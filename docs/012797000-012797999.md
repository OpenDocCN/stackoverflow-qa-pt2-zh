# StackOverflow 问答 12797000-12797999

# coffeescript - 如何从对象返回设置

> ID：12797014
> 
> 赞同：0
> 
> 时间：2012-10-09T09:36:04.963
> 
> 标签：coffeescript

我做了这样的事情：

```
myProject =

  settings:
    duration: 500
    value: 'aValue'

  aFunction: ->
    myElement.fadeOut myProject.settings.duration 
```

这只是一个示例，但我的项目就是这样。很多时候我必须参考设置来获得某个值，而且我总是要写`myProject.settings.value`，而且看起来不太好。

我的问题是，我可以调用一个返回所需值的函数吗？像这样的东西：

```
aFunction: ->
  myElement.fadeOut getSetting(duration) 
```

我试过了

```
getSetting: (param) ->
  myProject.settings.param 
```

但失败了？这是为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:16:14.443

要通过变量访问对象属性，您可以执行以下操作：

```
object[key] 
```

在咖啡脚本中，最后一行应该是返回值，在您的示例中：请注意 @ (= this)。

```
myProject =

  settings:
    duration: 500
    value: 'aValue'

  fadeOut: ($element) ->
    $element.fadeOut @getSetting('duration')

  getSetting: (key) ->
    @settings[key]

myProject.fadeOut($myElement) 
```

的JavaScript：

```
var myProject;

myProject = {
  settings: {
    duration: 500,
    value: 'aValue'
  },
  fadeOut: function($element) {
    return $element.fadeOut(this.getSetting('duration'));
  },
  getSetting: function(key) {
    return this.settings[key];
  }
};

myProject.fadeOut($myElement); 
```

# iphone - 加载大量图像时崩溃

> ID：12797025
> 
> 赞同：1
> 
> 时间：2012-10-09T09:36:32.980
> 
> 标签：iphone

我正在创建一个应用程序，其中我正在为 Imageview 加载 800 个 jpg 图像。在发生不同的事件时，将为动画加载不同的图像集。在第一个事件发生时它工作正常，但在第二个事件时它在 iPhone 上崩溃。有什么帮助吗？我的部分代码如下

```
for (int aniCount = 1; aniCount < 480; aniCount++){
UIImage *frameImage = [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource: [NSString stringWithFormat: @"ani_soft_whimper_%i", aniCount] ofType: @"jpg"]];
[_arr_ImagesSoftWhimper addObject:frameImage];
}
imageView.animationImages = _arr_ImagesSoftWhimper; 
```

我为这些图像集崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:55:49.320

您可能内存不足。但这只是一个猜测。请提供一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:17:49.253

1.如果您从任何服务器下载，请调用异步调用。2.检查您的图像尺寸，大小，如果尺寸根据uiimageview框架大然后首先调整或裁剪您的图像，然后设置到uiimageview。

# c# - 类型转换两个模型和返回其他模型

> ID：12797029
> 
> 赞同：0
> 
> 时间：2012-10-09T09:36:41.360
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-2

```
 public static  Coupons.Domain.RejectedCoupons CoupontoRej(Coupons.Domain.Coupon coupon)             {    
            Coupons.Domain.RejectedCoupons a = coupon;   
           return a; 
```

帮帮我，遇到错误，不适合我

```
Error   2   Cannot implicitly convert type 'Com.Arpur.Coupons.Domain.Coupon' to 'Com.Arpur.Coupons.Domain.RejectedCoupons'  C:\Users\Agha\Desktop\Coupon\Com.Arpur.Coupon.User\Helpers\ExtensionMethods.cs  71  48  Com.Arpur.Coupon.User 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:50:42.463

乍一看，RejectedCoupons 似乎不是 Coupons 的基类，因此隐式转换不起作用（除非有一些隐式转换运算符）

为什么不创建一个新的 RejectedCoupons 并用优惠券的属性填充它

```
return new RejectedCoupons {
    prop1 = coupon.prop1,
    prop2 = coupon.prop2,
    ...
} 
```

# c++ - 虚拟析构函数签名

> ID：12797046
> 
> 赞同：0
> 
> 时间：2012-10-09T09:37:27.320
> 
> 标签：c++, virtual-destructor

对于虚拟机制，我们需要在基类和派生类中具有相同的方法名称。然而，在虚拟析构函数的情况下，名称可以不同。

任何人都可以解释虚拟机制（V-Ptr，V-Table）如何支持/使用不同命名的析构函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:41:57.327

`virtual`析构函数的处理方式与虚函数不同。**当一个对象被销毁时，继承链中的所有**析构函数都会被调用，与方法相反，在调用时只调用最派生类中的覆盖。

`virtual`析构函数本质上与非虚拟析构函数相同，除了如果要通过指向基类的指针删除对象时**它必须存在（否则它是未定义的行为）这一事实。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:41:14.243

一个类只能有一个析构函数，因此名称不需要相同 - 您不必使用名称来标识**哪个**析构函数，因为每个类只有一个析构函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:53:20.113

这取决于实现，只要它确保它可以调用正确的析构函数即可。这样做的方法可以是通用虚拟机制的一部分，也可以是仅用于析构函数的特殊机制。

人们会期望函数名称无论如何都不会出现在 vtables 中：编译器只是为每个类中的每个虚函数分配一个偏移量到表中。因此，析构函数是否有名称以及它们是什么的问题无关紧要。

# sql - 如何为 SQL 表达式创建数据库索引？

> ID：12797048
> 
> 赞同：0
> 
> 时间：2012-10-09T09:37:34.513
> 
> 标签：sql, indexing, db2, database-indexes

我是索引的初学者。我想为这个 SQL 表达式创建索引，这需要太多时间来执行，所以我想在哪些确切的列上创建索引？我正在使用 DB2 db，但没关系，我认为这个问题很笼统。

我的 SQL 表达式是：

```
select * from incident  where (relatedtoglobal=1) 
and globalticketid in (select ticketid from INCIDENT where status='RESOLVED')
     and statusdate <='2012-10-09 12:12:12' 
```

我应该用这 5 列创建索引还是如何创建索引？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:08:15.093

您的查询：

```
select * 
from incident  
where relatedtoglobal = 1 
  and globalticketid in ( select ticketid 
                          from INCIDENT 
                          where status='RESOLVED'
                        )
  and statusdate <='2012-10-09 12:12:12' ; 
```

和里面的子查询：

```
select ticketid 
from INCIDENT 
where status='RESOLVED' 
```

*   上的索引`(status, ticketid)`肯定会提高子查询评估的效率，从而提高查询的效率。

*   对于查询，除了前一个索引之外，您还需要一个索引。`(relatedtoglobal, globalticketid)`可能就足够了。

我不确定 DB2 引擎是否会/可以使用更复杂的索引。

*   喜欢一个`(relatedtoglobal, globalticketid) INCLUDE (statusdate)`或

*   两个指标，一开`(relatedtoglobal, globalticketid)`一开`(relatedtoglobal, statusdate)`

* * *

DB2 文档不容易阅读，但有很多细节。从**[CREATE INDEX](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0000919.htm)**语句和**[实现索引](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2.doc.admin%2Fbjnddimp1046555.htm)**开始。

# c++ - 转发声明模板类时“未定义模板的隐式实例化”

> ID：12797051
> 
> 赞同：49
> 
> 时间：2012-10-09T09:37:41.477
> 
> 标签：c++, templates, clang, forward-declaration

我有一些代码需要在其中前向声明模板类（或者至少，前向声明会让我的事情变得更容易......）。我已经写了我遇到的问题的简化版本，所以我可以在这里显示它：

```
template<bool>
class MyTemplateClass;

int main( int argc, char* argv[] )
{
    MyTemplateClass<false> myTemp;  // error here
    myTemp.GetTheValue();
    return 0;
}

template<bool bShouldMult>
class MyTemplateClass
{
    int m_myint;
    float m_myfloat;

public:
    MyTemplateClass() : m_myint(5), m_myfloat(3.0f) {}
    float GetTheValue()
    {
        return m_myint * (bShouldMult ? m_myfloat : 1.0f);
    }   

}; 
```

我在注释行遇到的错误是：

```
Error - implicit instantiation of undefined template 'MyTemplateClass<false>' 
```

我还需要在 MyTemplateClass 的前向声明中包含哪些其他细节？由于错误不是来自下一行，我假设这不是因为方法未定义。我使用的编译器是 LLVM/CLang，我在 Mac 上编译。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2017-03-16T22:33:56.933

你忘了`#include`什么吗？

我忘记了之后得到了这个

```
#include <array> 
```

当使用一个`std::array`

:^)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-09T09:50:16.973

为了声明任何类型的变量，无论模板与否，该类型的整个定义都必须可用。您不能前向声明一个模板，然后像定义它一样开始使用它。此时您所能做的就是声明一个指向基于模板的类型的对象的指针，如下所示：

```
MyTemplateClass<false> *myTempPtr;  // No error here 
```

不幸的是（但并非出乎意料）这会将错误移至下一行。初始化该指针的问题仍然存在：一旦您尝试调用`new MyTemplateClass<false>`，您将看到一个错误。

您需要重新安排代码以将模板的定义移到其使用位置之前。这可能有点乏味，但没有办法绕过它：编译器需要在您开始实例化模板并调用其方法的那一刻拥有整个定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:48:51.953

据我了解，您不能转发声明某些内容，然后在您的堆栈中实例化它（模板与否）。

另外我认为模板类的前向定义没有非常广泛的支持

# nutch - Nutch：如何将 url 结果与深度分开：1 和深度结果：2

> ID：12797053
> 
> 赞同：0
> 
> 时间：2012-10-09T09:37:52.643
> 
> 标签：nutch

在我用 nutch 运行这个命令后：

`bin/nutch crawl urls -dir crawl -depth 3 -topN 5`

我得到一个 url 列表，只是说 50 urls ，但任何人都知道按深度分隔所有 url。

所以我会得到结果：

来自深度 1 的 URL = 5 个 URL

*   网址

*   网址

*   网址

……

来自深度 2 的 URL = 15 个 URL

*   网址

*   网址

*   网址

……

类似的东西，有没有人已经解决了这个问题？

nutch 中是否有解决此问题的功能？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:00:25.770

nutch 中没有内置函数来执行此操作。但简单的 hack 将使用 dept 1 运行 nutch 命令，复制 web 表，然后再次运行 deth 1。所以你将有 2 个版本的 nutch web-table 对应于每一轮

# python - 如何在 python 中执行 'a' + 1 #=> 'b'？

> ID：12797067
> 
> 赞同：4
> 
> 时间：2012-10-09T09:38:31.690
> 
> 标签：python, string

我正在做一个项目，经常需要这个功能

```
'b' + 1 #=> 'a' and 'b' - 1 #=> 'a' 
```

现在我的解决方案非常乏味：

```
str(unichr((ord('b')+ 1))) 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:40:28.733

`str(unichr(c))`可以替换为`chr(c)`.

简化版：

```
chr(ord('b') + 1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:41:13.303

定义自己的功能：

```
In [103]: def func(c,n):
    return chr(ord(c)+n)
   .....: 

In [105]: func('a',-1)
Out[105]: '`'

In [106]: func('b',-1)
Out[106]: 'a'

In [107]: func('c',2)
Out[107]: 'e' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:41:43.670

Python 是强类型的，考虑字符串和整数是不同的，并且不会隐式地将一个转换为另一个。

但是，您的代码可能可以简化为

```
chr(ord('b') + 1) 
```

如果你经常使用它，把它放在一个函数中，不要再担心它了：

```
def incr_char(c, n):
    return chr(ord(c) + n) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:42:05.970

试试这个：

```
>>> import string
>>> string.letters[string.letters.index('a')+1]
'b' 
```

只为阿什维尼：

```
>>> string.letters[string.letters.index('a')-1]
'Z' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T09:43:15.750

您可以执行以下操作：

```
class char(unicode):
    def __add__(self, x):
        return char(unichr(ord(self) + x))

print char('a') + 1 # b 
```

# ruby - Nokogiri - 切片结果

> ID：12797069
> 
> 赞同：0
> 
> 时间：2012-10-09T09:38:35.397
> 
> 标签：ruby, parsing, screen-scraping, nokogiri, slice

我正在构建一个刮板来从新闻网站中提取故事。以下是来自 BBC 新闻网站的示例：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://www.bbc.co.uk/news/'))

doc.css('h2 a.story').each do |h2|

        puts "#{h2.content} - http://www.bbc.co.uk#{h2["href"]}"
end 
```

我需要做什么才能返回特定数量的结果，而不是全部？

我查看了 Nokogiri 文档，但解释性不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:44:31.067

这不是 Nokogiri 问题，而是 Ruby 数组问题。

用于[`take`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-take)前三个结果：

```
doc.css('h2 a.story').take(3).each do |h2|
  puts "#{h2.content} - http://www.bbc.co.uk#{h2["href"]}"
end 
```

对于第四到第八个结果，使用 Range：

```
doc.css('h2 a.story')[3..7].each do |h2|
  puts "#{h2.content} - http://www.bbc.co.uk#{h2["href"]}"
end 
```

# uml - UML 类聚合到自身

> ID：12797074
> 
> 赞同：3
> 
> 时间：2012-10-09T09:38:51.877
> 
> 标签：uml

我和我的小组正在制作一个程序，其中我们有一个树形结构。在这个树形结构中，我们已经使一个类别可以包含它自己。该计划基于您的费用，因此示例可能是：

你买了4个牛奶。4 种牛奶被归入“牛奶”类别。每个牛奶条目都有另一个类别中的价格（以及其他个人信息），该类别汇总。

诀窍是我们希望类别类能够自我包含它，所以：

“牛奶”类别是“乳制品”类别的一部分，就术语而言，它是“杂货”类别的一部分。

我们希望它是这样的原因是我们可以同时移动批量产品。因此，如果您想将 Milk 移至名为“Morning Stuff”的类别，则不必移动每一个，而只需移动整个类别。

图片是我们当前类别类的建模方式，但我们被告知如果没有更多进一步的解释我们无法做到这一点。UML 允许这样做吗？如果没有，我们如何使用 UML 对其进行建模？

![类别 UML 部分](../Images/c93f45c61bf96247398561136d41654a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:08:34.190

是的，UML 允许从一个类到它自身的关联。同样，以这种方式允许聚合甚至组合。

您发布的图像显示了一个聚合，而从您的描述中我会选择一个组合（实心菱形）：一个类别有一个或没有父级；一个类别在某种程度上是由它的孩子定义的；如果一个类别被删除，所有的孩子也会被删除。

可以在[此处](http://tcle.wordpress.com/2008/05/20/aggregation-vs-composition-a-review-on-uml/)找到聚合和组合之间的更长比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:18:08.130

是的，这是允许的，但在大多数情况下，最好聚合一个抽象（抽象类或接口）以保留多态性而不是项目本身；有关示例，请参见[复合模式。](http://www.oodesign.com/composite-pattern.html)

这被称为[接口隔离原则](http://www.oodesign.com/interface-segregation-principle.html)，是[SOLID 的五项原则之一](http://www.oodesign.com/design-principles.html)

# javascript - 显示错误答案

> ID：12797078
> 
> 赞同：0
> 
> 时间：2012-10-09T09:39:14.833
> 
> 标签：javascript, jquery

我创建了一个拼写游戏，用户通过单击字母来拼写单词。为了向用户展示他们有多少错误和正确，我计算了正确和错误消息显示的次数并将其打印给用户。

这适用于正确答案，但不适用于错误答案。有人能告诉我为什么吗？

这是正确答案的脚本（工作正常）...

```
var completeLetters = $('.wordglow2').length;
var completeWords = (completeLetters / 3);

    if ($(right).show()) {
        $('.counter').html("Right Answers = " + completeWords).show();
    } 
```

这是错误答案的答案（完全相同的逻辑，但不起作用！）...

```
var incompleteLetters = $('.wordglow4').length;
var incompleteWords = (incompleteLetters / 3);

    if ($(wrong).show()) {
        $('.counter2').html("Wrong Answers = " + incompleteWords).show();
    } 
```

所以基本上“wordglow4”是在字母拼写错误时添加到字母的样式，“wordglow2”是添加到正确拼写字母的样式。

所有单词都是 3 个字母长，因此是“（incompleteLetters / 3）”

这是一个帮助[http://jsfiddle.net/smilburn/Dxxmh/34/的小提琴](http://jsfiddle.net/smilburn/Dxxmh/34/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:58:11.787

“完整单词”计数器有效，因为当单词完成时，您总是在表格单元格上保留“.wo​​rdglow2”样式。因此*$('.wordglow2').length*将始终返回完整的字母（以及单词）

但是，不正确的单词将不起作用，因为一旦用户正确，样式就会更改（从 '.wordglow4' 到 '.wordglow2' - ps 您可能需要考虑使用更具描述性的类名 - 例如'.correctLetter' 和 '.wrongLetter'）。因此，屏幕上的“.wordglow4”字母永远不会超过 3 个，因此*不完整*单词计数器永远不会超过 1。

要使不正确的单词计数器起作用，您需要在函数外部声明计数器，并执行以下操作：

```
var incompleteLetters = $('.wordglow4').length;
incompleteWords += (incompleteLetters / 3); 
```

然后，这应该跟踪以前的失败，并为您提供所需的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:39:51.990

与班级的表格单元格一起在黑板上指示的只有一个*错误*`.wordglow4`答案，这与*正确*`.wordglow2`答案在被正确猜测后保持班级的正确答案不同。

所以计数`.wordglow2`永远是正确的，而计数`.wordglow4`永远只会是 3。

您应该将**count**变量移到`.click()`事件之外，并在猜错单词时将其递增。

因此，在您的示例代码中，添加...

```
var animation = false;
var incompleteWords = 0; // <-- this line
$('.drag').on('click', function(e) { 
```

和改变

```
var incompleteWords = (incompleteLetters / 3); 
```

到

```
incompleteWords += (incompleteLetters / 3); 
```

# html - HTML/CSS - 小盒子中的大盒子

> ID：12797079
> 
> 赞同：0
> 
> 时间：2012-10-09T09:39:16.697
> 
> 标签：html, css

我想如果我制作一个比它的容器大的盒子，盒子将被限制在容器的大小，并且它周围会有滚动条。

[http://jsfiddle.net/Amnesiac/ekT3h/](http://jsfiddle.net/Amnesiac/ekT3h/)

但是盒子实际上是从容器中出来的，就像上面的例子一样。

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:41:51.520

不，您必须使用 css 溢出来使滚动条出现。并且您必须拥有内容才能使它们处于活动状态，将 div 定义为您实际希望它显示的大小。

使用示例[http://jsfiddle.net/ekT3h/2/](http://jsfiddle.net/ekT3h/2/)更新了您的小提琴，使一切变得更大，以便更容易理解。第二个小提琴[http://jsfiddle.net/ekT3h/4/](http://jsfiddle.net/ekT3h/4/)标有 div 的名称，并更新了您的原始 css 以定位孩子而不考虑任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:43:10.503

在“容器”类中使用“溢出：自动”属性。

```
#container{
 height:100px;   
 width: 100px;   
 border: 1px solid red;  
    overflow:auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:44:53.077

应用以下CSS：

```
overflow:hidden 
```

# java - iText 中 Unicode 字符的限制

> ID：12797083
> 
> 赞同：2
> 
> 时间：2012-10-09T09:39:34.207
> 
> 标签：java, itext

我正在尝试在我的 PDF 中添加一个欧姆符号作为`\u2126`. 但它没有显示在 PDF 上。我需要设置特殊的字体或编码类型吗？

需要的符号是：Ω</p>

# html - 表格中的样式在 IE 中不起作用

> ID：12797085
> 
> 赞同：0
> 
> 时间：2012-10-09T09:39:45.413
> 
> 标签：html, css, internet-explorer, html-table

我有一张看起来像这样的桌子

```
<table>
<tr>
    <th>Heading</th>
    <td>body</td>
</tr>
<tr>
    <th>Heading</th>
    <td>body</td>
</tr>
</table> 
```

而不是默认情况下让标题浮动。我想坐在上面。

这是我的代码示例 - [http://jsfiddle.net/PJQT8/1/](http://jsfiddle.net/PJQT8/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:40:36.150

将标题单元格放在自己的行中，将数据单元格放在自己的行中。如果您不希望标题单元格占据左列，则不应将它们放在那里。

```
<table>
<tr>
    <th>Heading</th>
    <th>Heading</th>
</tr>
<tr>
    <td>body</td>
    <td>body</td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:28:48.907

```
<table width="499" height="155" class="payment-details">
            <th width="186">Secure Payment details</th>
              <th>Delivery Address</th>
              <th>Billing Address</th>
                <tr class="card">

                    <td width="186">
                  <p>Jane Smith</p>                  </td>
                        <td width="140">
                  <p>Jane Smith</p>                  </td>
                        <td width="157">
                  <p>Jane Smith</p>                  </td>
                </tr>
                <tr class="billing">

                    <td>
                        <p>John Smith</p>                    </td>

                    <td>
                        <p>John Smith</p>                    </td>

                    <td>
                        <p>John Smith</p>                    </td>
                </tr>
                <tr class="delivery">

                    <td>
                        <p>John Block</p>                    </td>
                         <td>
                        <p>John Block</p>                    </td>
                         <td>
                        <p>John Block</p>                    </td>
                </tr>
                <tr class="delivery">
                  <td>&nbsp;</td>
                   <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
</table> 
```

# silverlight - Silverlight：TextBlocks 中的日期时间格式

> ID：12797087
> 
> 赞同：0
> 
> 时间：2012-10-09T09:39:50.113
> 
> 标签：silverlight, xaml, datetime, string-formatting

我想在我的整个 Silverlight 应用程序中使用自定义 DateTimeFormat，所以我在我的`App.xaml.cs`.

```
var ci = (CultureInfo)Thread.CurrentThread.CurrentCulture.Clone();
ci.DateTimeFormat = new DateTimeFormatInfo()
{
    ShortDatePattern = "dd/MM/yyyy",
    LongDatePattern = "dd/MM/yyyy",
    FullDateTimePattern = "dd/MM/yyyy HHmm\\h",
    AMDesignator = string.Empty,
    PMDesignator = string.Empty,
    ShortTimePattern = "HHmm\\h",
    LongTimePattern = "HHmm\\h"
};
Thread.CurrentThread.CurrentCulture = ci; 
```

A`DateTime.Now.ToString("f")`给了我想要的答案（这是一个 24 小时格式的 DateTime 字符串）。但是，当我在 XAML 中执行以下操作时，TextBlock 会忽略我`CultureInfo`并做自己的事情：

```
<TextBlock Text="{Binding ArrivalTime,StringFormat=f}"/> 
```

有谁知道一种方法可以让我`TextBlock`以我想要的格式显示？非常感谢...

# iphone - 来自 iPhone 中 NSString 的 NSDate

> ID：12797088
> 
> 赞同：0
> 
> 时间：2012-10-09T09:39:51.093
> 
> 标签：iphone, nsstring, nsdate

`NSString`从到转换的一件简单的事情`NSDate`。我怎样才能转换 `Mon, 27 August 2012 01:30 AM`成`NSDate`这种相同的格式。我试过了`NSDateFormatter`。但我没有以这种必需的格式得到它。任何人都可以帮忙吗？这是我尝试过的。

```
 NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"EEEE,dd MM yyyy HH:mm a"];
NSDate *date1 = [df dateFromString:@"Mon,27 August 2012 01:30 AM"];
NSLog(@"%@",date1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:05:25.033

我希望这对你有帮助！

```
NSDateFormatter *dateformater=[[[NSDateFormatter alloc] init]autorelease];
[dateformater setDateFormat:@"EEEE,dd MMMM yyyy HH:mm a"];

NSDate *todayTmp=[NSDate date];
NSString *conversionDate=[dateformater stringFromDate:todayTmp];

Note : (Upper case) HH for 24h time format, (Lower case) hh for 12h time format 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:19:26.907

```
NSString *myDateAsAStringValue = @"Mon, 27 August 2012 01:30 AM";

NSDateFormatter *df = [[NSDateFormatter alloc] init];

[df setDateFormat:@"EEE, dd MMM yyyy HH:mm a"];

NSDate *myDate = [[NSDate alloc]init];

myDate = [df dateFromString:myDateAsAStringValue];

[df release];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm a"];
NSString *strDate = [dateFormatter stringFromDate:myDate];
NSLog(@"%@", strDate);
[dateFormatter release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:52:14.813

请使用下面的代码

```
 NSDateFormatter *df=[[NSDateFormatter alloc] init];
   [df setDateFormat:@"EEE,dd MMMM yyyy hh:mm a"];
   NSDate *date1 = [df dateFromString:@"Mon,27 August 2012 01:30 AM"];
   NSLog(@"%@",date1); 
```

你的格式化程序是错误的检查这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:47:15.183

**NSDateFormatter**是指定**从日期中提取字符串**时出现在日期字符串中的格式或从字符串中提取**日期时出现在日期字符串中的格式**

因此，每当您从 NSString 中提取 NSDate 时，总是以默认日期格式获得 NSDate（例如**2012-08-27 00:30:00 +0000**）......只有当您从 NSDate 中提取 NSString 时，才能在需要时获得 NSString您在 NSDateFormatter 中设置的（自定义）格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:37:46.417

我猜 NSLog 将以固定格式返回 NSDate。如果我们需要不同格式的日期，我们应该通过 NSDateFormatter 对其进行格式化并将其获取为 NSString。只是一个猜测。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T11:09:48.787

不要忘记设置正确的语言环境！如果您的设备不使用英语语言环境，NSDateFormatter 可能无法将其转换`Mon`为`August`有用的信息，因为 Mon 不是您的语言中星期一的正确缩写。例如，在德国，Monday 的正确三字母缩写是`Mon.`.

如果您解析包含单词的日期，则必须设置正确的语言环境。

这应该有效：

```
NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"EEE,dd MMMM yyyy hh:mm a"];

NSLocale *posixLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[df setLocale:posixLocale];

NSDate *date1 = [df dateFromString:@"Mon,27 August 2012 01:30 AM"];
NSLog(@"%@",date1); 
```

EEE 是三字母工作日缩写的日期格式化程序代码。
hh 是 1 到 12 之间小时的日期格式化代码。HH 表示 0-23
MMMM 是整月，MM 将是该月的数值 (= 08)。

# .net - 在 WCF 服务中使用 async/await 时，OperationContext.Current 在第一次等待后为空

> ID：12797091
> 
> 赞同：38
> 
> 时间：2012-10-09T09:40:11.183
> 
> 标签：.net, wcf, .net-4.5, async-await

我在 .NET 4.5 中使用 async/await 模式在 WCF 中实现一些服务方法。示例服务：

合同：

```
[ServiceContract(Namespace = "http://async.test/")]
public interface IAsyncTest
{
    Task DoSomethingAsync();
} 
```

执行：

```
MyAsyncService : IAsyncTest
{
    public async Task DoSomethingAsync()
    {
        var context = OperationContext.Current; // context is present

        await Task.Delay(10);

        context = OperationContext.Current; // context is null
    }
} 
```

我遇到的问题是第一次`await` `OperationContext.Current`返回后`null`我无法访问`OperationContext.Current.IncomingMessageHeaders`.

在这个简单的示例中，这不是问题，因为我可以在`await`. 但在现实世界`OperationContext.Current`中，是从调用堆栈的深处访问的，我真的不想为了进一步传递上下文而更改大量代码。

有没有办法在`await`不手动将其向下传递的情况下获取操作上下文？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-16T16:42:02.803

不幸的是，这不起作用，我们将在未来的版本中看到修复。

同时，有一种方法可以将上下文重新应用到当前线程，这样您就不必传递对象：

```
 public async Task<double> Add(double n1, double n2)
    {

        OperationContext ctx = OperationContext.Current;

        await Task.Delay(100);

        using (new OperationContextScope(ctx))
        {
            DoSomethingElse();
        }
        return n1 + n2;
    } 
```

在上面的示例中，**DoSomethingElse()**方法将按预期访问 OperationContext.Current。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-09T11:16:28.007

我认为您最好的选择是实际捕获它并手动传递它。您可能会发现这提高了代码的可测试性。

也就是说，还有其他几个选项：

1.  将其添加到`LogicalCallContext`.
2.  安装你自己的`SynchronizationContext`，它会`OperationContext.Current`在它执行时设置`Post`；这就是 ASP.NET 保留其`HttpContext.Current`.
3.  安装你自己的`TaskScheduler`哪套`OperationContext.Current`。

您可能还想在 Microsoft Connect 上提出此问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-11T09:33:24.510

它似乎已在 .Net 4.6.2 中修复。看[公告](https://blogs.msdn.microsoft.com/dotnet/2016/08/02/announcing-net-framework-4-6-2/#wcf "这个通告")

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-08T13:01:15.310

扩展 Cleary 先生的 #1 选项，可以将以下代码放在 WCF 服务的构造函数中，以`OperationContext`在逻辑调用上下文中存储和检索 ：

```
if (CallContext.LogicalGetData("WcfOperationContext") == null)
{
     CallContext.LogicalSetData("WcfOperationContext", OperationContext.Current);
}
else if (OperationContext.Current == null)
{
     OperationContext.Current = (OperationContext)CallContext.LogicalGetData("WcfOperationContext");
} 
```

有了这个，任何你遇到空上下文问题的地方，你都可以编写如下内容：

```
var cachedOperationContext = CallContext.LogicalGetData("WcfOperationContext") as OperationContext;
var user = cachedOperationContext != null ? cachedOperationContext.ServiceSecurityContext.WindowsIdentity.Name : "No User Info Available"; 
```

免责声明：这是一年前的代码，我不记得我`else if`在构造函数中需要的原因，但它与异步有关，我知道在我的情况下需要它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-21T08:42:52.360

这是一个示例`SynchronizationContext`实现：

```
public class OperationContextSynchronizationContext : SynchronizationContext
{
    private readonly OperationContext context;

    public OperationContextSynchronizationContext(IClientChannel channel) : this(new OperationContext(channel)) { }

    public OperationContextSynchronizationContext(OperationContext context)
    {
        OperationContext.Current = context;
        this.context = context;
    }

    public override void Post(SendOrPostCallback d, object state)
    {
        OperationContext.Current = context;
        d(state);
    }
} 
```

和用法：

```
var currentSynchronizationContext = SynchronizationContext.Current;
try
{
    SynchronizationContext.SetSynchronizationContext(new OperationContextSynchronizationContext(client.InnerChannel));
    var response = await client.RequestAsync();
    // safe to use OperationContext.Current here
}
finally
{
    SynchronizationContext.SetSynchronizationContext(currentSynchronizationContext);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-28T12:39:16.810

对我们来说幸运的是，我们现实生活中的服务实现是通过`Unity`IoC 容器实例化的。这使我们能够创建一个`IWcfOperationContext`配置为具有 a 的 a `PerResolveLifetimeManager`，这仅意味着对于`WcfOperationContext`我们的每个实例只有一个`RealService`.
在`WcfOperationContext`我们捕获的构造函数中`OperationContext.Current`，然后所有需要它的地方都从`IWcfOperationContext`. 这实际上是斯蒂芬克利里在他的回答中所建议的。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-04-28T02:55:12.203

更新：正如下面评论中所指出的，这个解决方案不是线程安全的，所以我想上面讨论的解决方案仍然是最好的方法。

我通过将 HttpContext 注册到我的 DI 容器 (Application_BeginRequest) 中来解决这个问题，并在需要时解决它。

登记：

```
this.UnityContainer.RegisterInstance<HttpContextBase>(new HttpContextWrapper(HttpContext.Current)); 
```

解决：

```
var context = Dependencies.ResolveInstance<HttpContextBase>(); 
```

# visual-studio-2010 - IDE 中的意外行为

> ID：12797092
> 
> 赞同：0
> 
> 时间：2012-10-09T09:40:12.503
> 
> 标签：visual-studio-2010, unit-testing

MS Visual Studio 2010 SP1。

我写了一些课。然后我为它编写了单元测试。请看我的第一个屏幕：

![在此处输入图像描述](../Images/43a0d12ac4febe40d9bced70877f0090.png)

如果我通过“1”按钮运行单元测试，那么代码会按我的预期工作，但是如果我通过“2”按钮运行单元测试，那么我会出现意外行为。请看我的第二个屏幕：

![在此处输入图像描述](../Images/9b6379a67bee8675932a2bde4bda6aec.png)

当条件

```
if (null == acadRegistryKey) 
```

是的，我按下`F10`键并转到第 175 行。我`F10`再次按下键，然后……我转到第 177 行。为什么会这样？在第 175 行之后，我必须从方法返回，因为必须发生异常。

最好的问候，安德烈

# c# - 获取包含“：”的后代节点？

> ID：12797095
> 
> 赞同：0
> 
> 时间：2012-10-09T09:40:16.297
> 
> 标签：c#, .net, xml, linq-to-xml

我已经将一个 XML 加载到一个看起来像这样的 XDocument 中：

```
<MyXML xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/MyApp.Client.Main.GUI.Report">
  <Wrapper xmlns:d2p1="http://schemas.datacontract.org/2004/07/MyApp.Business.Entity">
    <d2p1:_MultipelAttributId>156</d2p1:_MultipelAttributId>
  </Wrapper>
</MyXML> 
```

现在我需要获取 _MultipelAttributId 的值，但是在说明这一点时：

```
XElement element = (from cml2 in doc.Descendants("d2p1:_MultipelAttributId") select cml2).FirstOrDefault(); 
```

我对“：”有异常？

那么我如何获得价值呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:19:10.547

```
XNamespace ns = "http://schemas.datacontract.org/2004/07/MyApp.Business.Entity"; 

var element = xDoc.Descendants(ns + "_MultipelAttributId").FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:13:40.193

您查询的元素名称不正确。试试这个：

```
XElement element = (
    from cml2 in doc.Descendants()
    where cml2.Name.LocalName == "_MultipelAttributId"
    select cml2).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:25:45.583

这篇 MSDN 文章很好地解释了如何在 Linq to XML 中使用命名空间 [http://msdn.microsoft.com/en-us/library/bb669152.aspx](http://msdn.microsoft.com/en-us/library/bb669152.aspx)

```
XNamespace d2p1 = "http://schemas.datacontract.org/2004/07/MyApp.Business.Entity";
XElement multipelAttributId = doc.Descendants(d2p1 + "_MultipelAttributId").FirstOrDefault(); 
```

请注意，您可以从字符串无缝地创建 XNamespace 或 XName，因为 Microsoft 已经为这些类型编写了隐式转换。

# sql-server - 如何将 DateTime 转换为文本并与文本连接？

> ID：12797096
> 
> 赞同：0
> 
> 时间：2012-10-09T09:40:21.540
> 
> 标签：sql-server, sql-server-2008

我想将 DateTime 转换为文本并与文本连接。

```
declare @AssignDate datetime 
set @AssignDate =getdate()
select 'Date: ' + convert(char(16),@AssignDate) 
```

但我的输出如下：日期：2012 年 10 月 9 日 3:0，

我的输出应该是“日期：09/10/2012 15:30”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:43:18.743

```
declare @AssignDate datetime = getdate()
select 'Date: ' + convert(char(10),@AssignDate,103) + ' '
                + convert(char(5),@AssignDate,108) 
```

没有一种[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)格式可以使用，但您可以分两部分进行。

# c# - 如何在文本框C#中显示datagridview的值

> ID：12797097
> 
> 赞同：0
> 
> 时间：2012-10-09T09:40:24.253
> 
> 标签：c#, datagridview

我已经编写了以下代码，但它在文本框中显示了以前的记录。

```
private void dataGridViewkala_KeyDown(object sender, KeyEventArgs e)
        {
            txtkalacode.Text = dataGridViewkala.CurrentRow.Cells[0].Value.ToString();
           txtkalaname.Text = dataGridViewkala.CurrentRow.Cells[1].Value.ToString();
            txtkqty.Text = dataGridViewkala.CurrentRow.Cells[2].Value.ToString();
            txtkalapoint.Text = dataGridViewkala.CurrentRow.Cells[3].Value.ToString();} 
```

我的代码有什么问题，我也尝试这些代码，

```
txtkalapoint.Text=dataGridViewkala.SelectedRows[0].Cells[3].Value.ToString(); 
```

当我在文本框中按箭头键时，它会显示以前的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:42:42.983

按键发生在采取行动之前，而不是之后。您可以查看数据网格何时更改行，或者在按键上进行。或键

# django - 根据用户状态将相似的 URL 发送到不同的应用程序

> ID：12797102
> 
> 赞同：0
> 
> 时间：2012-10-09T09:40:44.017
> 
> 标签：django

我有 2 个应用程序，注册和相册。如果用户访问“/”或“/home”，那么他们应该看到注册/登录表单或他们的相册管理页面，具体取决于用户是否登录。

对于如何在 2 个不同的应用程序之间分派类似的 URL，是否有既定的最佳实践？有没有办法构建这个，这样任何一个应用程序都不需要知道另一个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:49:17.253

如果您的需求仅限于在用户未登录时显示登录表单与在用户未登录时显示“主页”，我建议您使用“需要登录”装饰器。

```
from django.contrib.auth.decorators import login_required

@login_required
def show_home(request):
    """
    Show home page...
    """
    ... 
```

这个装饰器可以应用在视图级别（如上所示）或 urls.py 中（如下所示）：

```
url(r'^reports/', login_required(ListView.as_view(
    template_name="...",
    queryset = ...,
    context_object_name = ...
))), 
```

第二种模式通常用于通用视图和基于类的视图。

这两种解决方案都假定您正在连接到 Django 的内置登录/注册设备（在需要时使用自定义模板和自定义视图）。如果您使用的是自定义注册/身份验证框架，那么使用装饰器模式仍然是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:48:02.850

如果您设置`LOGIN_URL`为`/registration/login`，并用 装饰您的`/`视图`@login_required`，那么它们将自动被重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:48:45.917

当用户登录时，将变量添加到会话并在 / 或 /home 请求中检查它。

# node.js - 如何在节点js中随机生成objectid

> ID：12797106
> 
> 赞同：8
> 
> 时间：2012-10-09T09:40:52.960
> 
> 标签：node.js, objectid

我需要在节点js中随机生成objectid。有什么方法可以创建。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-09T11:45:25.860

如果您的意思是 MongoDB ObjectID，请尝试以下操作：

```
var ObjectID = require('mongodb').ObjectID;

var objectId = new ObjectID(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-11-08T08:07:23.170

生成 mongoDB 对象 id 的另一种方法是。

```
function objectId() {
    const os = require('os');
    const crypto = require('crypto');

    const secondInHex = Math.floor(new Date()/1000).toString(16);
    const machineId = crypto.createHash('md5').update(os.hostname()).digest('hex').slice(0, 6);
    const processId = process.pid.toString(16).slice(0, 4).padStart(4, '0');
    const counter = process.hrtime()[1].toString(16).slice(0, 6).padStart(6, '0');

    return secondInHex + machineId + processId + counter;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-23T12:39:05.750

在 mongodb 中创建 ObjectId：

```
const {ObjectId} = require('mongodb'); 

// Method 1:
const myId = new ObjectId(); // No argument
// say, myId = ObjectId("507f1f77bcf86cd799439011")

// Access the Hexadecimal String from the ObjectId
console.log(ObjectId("507f1f77bcf86cd799439011").str); 
// 507f1f77bcf86cd799439011

// Method 2: Specify your own unique Hexadecimal String (12 bytes long)
const myId = new ObjectId("507f191e810c19729de860ea"); // with argument
// myId = ObjectId("507f191e810c19729de860ea") 
```

# asp.net-mvc-4 - 简化 mvc 4 项目以获得最佳 Web api 性能

> ID：12797111
> 
> 赞同：0
> 
> 时间：2012-10-09T09:41:05.457
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我目前正在审查 ASP.NET Web API，想知道是否有人设法“简化”了您在创建新的 ASP.NET Web API 项目时获得的 VS2010/12 项目模板。

说我持怀疑态度，但我想知道微软是否在项目模板中加入了一些可能不需要的东西，从而将其删除将使事情进展得更快。

例如，在 Web 表单中，您会默认包含大部分 http 模块，并且在大多数情况下您不需要所有模块。

基本上，我正在为我闪亮的新 Web API 网络服务寻找最佳性能，如果我能扔掉备用轮胎和烟灰缸，我会的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:32:50.980

有很多关于为纯粹的开发人员获得一个更清洁的起点的[反馈。](http://forums.asp.net/t/1771245.aspx/1)[此处](http://www.asp.net/whitepapers/mvc4-release-notes)发布说明：

> “空项目模板
> 
> MVC Empty 项目模板现在真正是空的，因此您可以从一个完全干净的状态开始。Empty 项目模板的早期版本已重命名为 Basic。”

您会发现“空”项目模板将是您在新 WebApi 项目中可以摆脱的最低限度。

文件 -> 模板 -> Web - Asp.Net MVC 4 Web 应用程序

选择模板“空”。

# google-chrome - Google Drive 离线文档文件位置

> ID：12797114
> 
> 赞同：36
> 
> 时间：2012-10-09T09:41:12.617
> 
> 标签：google-chrome, google-drive-api

在 Chrome 中使用 Google Drive 时，是否有人发现离线 Google 文档的存储位置/方式？它们必须存储在本地，但在哪里？

已经尝试过浏览器缓存等，但除非我遗漏了一些非常明显的东西，否则看不到它！

澄清一下，存储在“我的文档/Google Drive”中的文件是一个带有 URL 的文本文件，我正在寻找的是离线模式下 URL 指向的文件所在的位置。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-05T03:55:04.773

事实证明，离线文档存储在 HTML5 文件系统中。

Chrome FileSystem 存储位于我的 Windows 7 机器上：

```
C:\Users\<username>\AppData\Local\Google\Chrome\User Data\Default\File System 
```

我在启用了 Chrome“离线文档”的文档中添加了许多大图像，并且能够看到 FileSystem 存储目录适当地增长。

然后，我使用 Chrome 的[HTML5 文件系统资源管理器扩展](https://chrome.google.com/webstore/detail/html5-filesystem-explorer/nhnjmpbdkieehidddbaeajffijockaea)来查看离线文档的文件结构，并且能够确认图像确实是在 Chrome 离线时从 HTML5 文件系统中检索到的。看截图：

![离线谷歌驱动器文档的屏幕截图及其在文件系统中的文档存储](../Images/dd617a6598816444baae5fc63c98dba6.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T17:19:04.823

此外，您可能会对 Google Drive 在 Android 文件系统中存储离线文档的位置感兴趣。

`sdcard/android/data/com.google.android.apps.docs/`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-04T16:57:38.083

Google Drive 使用 Chrome 的 IndexedDB 来存储有关文件的数据。要查看内容，请打开开发者控制台 ( `Ctrl`++ `Shift`)`I`并选择资源选项卡。

[这个答案](https://stackoverflow.com/a/9389289/973070)告诉您 IndexedDB 在 Windows 文件系统中的实际位置。

在 Linux 上是：`~/.config/google-chrome/Default/IndexedDB`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-25T18:00:32.027

在我的计算机（Windows 8.1 / Chrome 版本 41.0.2272.101 m）上，我在“C:\Users\my username\Appdata\Local\Google\Chrome\User Data\Profile 1\File System”中找到了文件系统

我需要找到它，因为我在 Google 幻灯片中有一些损坏的图像（它们在我计算机上的其他计算机或其他浏览器上工作，只是在我计算机上的 chrome 中没有）。我删除了文件系统目录和 shazam，图像重新加载并且不再损坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T15:54:19.030

我的都存放在

> C:\users\%username%\Google 云端硬盘\

你下载了谷歌云端硬盘吗？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-04T11:14:04.657

离线访问仅在您使用 Chrome 时可用。请参阅[设置离线访问](https://support.google.com/drive/bin/answer.py?hl=en&answer=2375012)和[离线 Google 文档](https://support.google.com/drive/bin/answer.py?hl=en&answer=1628467)。似乎离线文档是由 Chrome 编码并存储在一些秘密的地方，以迫使您使用 Chrome。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-28T16:01:41.943

谷歌驱动器将离线文件存储在一个名为... android/data/com.google.android.apps.docs/files/pinned_docs_files_do_not_edit/ 的文件夹中，您将在该文件夹中找到所需的文件。请注意...您将找到的文件可以是两种格式.. 1) 加密 2) 开放类型

如果您未选中加密选项（默认情况下在谷歌驱动器中），您下载的文件将可见，但标准阅读器无法访问。每次尝试读取它都会导致操作失败。但是...如果您禁用了谷歌驱动器中的加密，您将能够使用任何类型的阅读器自由打开。

# asp.net - 如何从服务器加载 mobiscroll 值

> ID：12797116
> 
> 赞同：0
> 
> 时间：2012-10-09T09:41:13.787
> 
> 标签：asp.net, mobiscroll

我正在使用 mobiscroll 控件的选择预设选项，我想从服务器加载它的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:09:04.823

Mobiscroll 是一个客户端控件。如果您想将选择预设与您在服务器端的值一起使用，您应该创建一个 html 选择元素，然后在客户端使用该元素启动 mobiscroll。

```
<select name="City" id="select" style="display:none">
    <!-- the options from you -->
    <option value="value1">Option1</option>
    <option value="value2">Option2</option>
    ...
</select>

<script type="text/javascript">
$(function(){
    $('#select').scroller({
        preset: 'select'
    });
});
</script> 
```

# mysql - 从 MyISAM 迁移到 Innodb 时代码更改

> ID：12797117
> 
> 赞同：0
> 
> 时间：2012-10-09T09:41:15.550
> 
> 标签：mysql, ruby-on-rails, ruby, innodb, myisam

我只是想知道从 MyISAM 迁移到 InnoDB 时是否需要更改“ruby on rails”代码。

我想迁移到 InnoDB，并且已知死锁是在使用 InnoDB 时可能发生的事情，我是否需要以某种方式威胁我对 DB 的所有**插入**和**更新。**

到目前为止，我只使用了 ActiveRecord 的标准方法，而没有使用事务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:01:37.900

从我的角度来看，这应该是可能的，没有任何问题。迁移到 InnoDB，运行您的测试，看看是否有任何问题。从我的标准 Rails 项目历史来看，我从未遇到过死锁问题。但最终它取决于您编写的代码。除了尝试之外没有其他方法。

# javascript - 如何在 JavaScript 中声明可选函数参数？

> ID：12797118
> 
> 赞同：357
> 
> 时间：2012-10-09T09:41:27.810
> 
> 标签：javascript

我可以声明默认参数吗

```
function myFunc( a, b=0)
{
  // b is my optional parameter
} 
```

在 JavaScript 中？

* * *

## 回答 #1

> 赞同：618
> 
> 时间：2012-10-09T09:42:06.517

**使用 ES6：**这现在[是语言的一部分](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters)：

```
function myFunc(a, b = 0) {
   // function body
} 
```

请记住，ES6 会`undefined`根据真实性而非真实性检查值（因此只有真正的未定义值才会获得默认值 - 像 null 这样的虚假值不会默认）。

* * *

**使用 ES5：**

```
function myFunc(a,b) {
  b = b || 0;

  // b will be set either to b or to 0.
} 
```

只要您明确传入的所有值都是真实的，这[就会起作用](http://11heavens.com/falsy-and-truthy-in-javascript)。根据 MiniGod 的评论，不真实的价值观：`null, undefined, 0, false, ''`

在函数实际启动之前，看到 JavaScript 库对可选输入进行大量检查是很常见的。

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2012-10-09T09:49:12.643

### 更新

使用 ES6，这完全可以按照您描述的方式进行；可以在[文档](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/default_parameters)中找到详细说明。

### 旧答案

JavaScript 中的默认参数主要可以通过两种方式实现：

```
function myfunc(a, b)
{
    // use this if you specifically want to know if b was passed
    if (b === undefined) {
        // b was not passed
    }
    // use this if you know that a truthy value comparison will be enough
    if (b) {
        // b was passed and has truthy value
    } else {
        // b was not passed or has falsy value
    }
    // use this to set b to a default value (using truthy comparison)
    b = b || "default value";
} 
```

该表达式`b || "default value"`计算值 AND 是否存在，如果不存在或为假，则`b`返回 的值。`"default value"``b`

替代声明：

```
function myfunc(a)
{
    var b;

    // use this to determine whether b was passed or not
    if (arguments.length == 1) {
        // b was not passed
    } else {
        b = arguments[1]; // take second argument
    }
} 
```

特殊的“数组”`arguments`在函数内部可用；它包含所有参数，从 index`0`开始`N - 1`（其中`N`是传递的参数数量）。

这通常用于支持未知数量的可选参数（相同类型）；但是，最好陈述预期的论点！

### 进一步的考虑

尽管自 ES5 以来`undefined`不可[写](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)，但已知某些浏览器不会强制执行此操作。如果您对此感到担心，可以使用两种替代方法：

```
b === void 0;
typeof b === 'undefined'; // also works for undeclared variables 
```

# objective-c - 扩展的 NSTableView

> ID：12797121
> 
> 赞同：1
> 
> 时间：2012-10-09T09:41:37.213
> 
> 标签：objective-c, cocoa, uitableview, nstableview

我想制作一个具有扩展能力的表格视图。当您按下一行时，该行应展开以显示删除、复制等选项。我找到了一个 iOS 示例，但我没有让它在 Mac OS X 上运行，因为`NSTableView`和`UITableView`非常不同。

[http://www.cocoacontrols.com/platforms/ios/controls/kofiles](http://www.cocoacontrols.com/platforms/ios/controls/kofiles)

有没有其他模板？或者甚至可以让这个例子在 Mac OS X 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:44:19.437

我没有代码可以交给你，但你可以使用基于视图的 NSTableView。如果选中，您的原型视图可以调整自身大小以包含控件。将所有这些浓缩成一个相当简短的答案有点复杂，但是如果您使用基于视图的表格视图并将原型视图视为任何其他会增长并显示额外控件的视图，然后将此行为连接到选择状态，它应该可以工作.

注意：您*必须*为扩展部分编写一些代码，以处理调整大小、显示控件以及通知表格视图其中一行更改了高度。对于问题的每个单独组成部分，都存在大量文档和示例。在遇到障碍时发布更具体的问题。

# joomla - Joomla 2.5 - 显示编辑个人资料页面

> ID：12797124
> 
> 赞同：1
> 
> 时间：2012-10-09T09:41:40.293
> 
> 标签：joomla, joomla2.5, user-profile, user-management

我正在使用 Joomla 2.5 创建网站。对于登录，我使用默认的 Joomla 用户管理系统。在我登录后，**有时**我会看到我有编辑个人资料选项的个人资料页面。在我浏览其他一些页面并单击登录后，我只看到“嗨用户，注销”选项。单击登录时如何带来编辑个人资料选项？

同样在个人资料页面中，我看到了许多详细信息，例如要使用的编辑器和许多东西。如何隐藏这些细节？

## 编辑 1

在[Joomla 3.0](http://joomla30.cloudaccess.net/)中，我可以看到编辑配置文件选项。（用户名和密码作为演示）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:19:27.983

您可以通过菜单添加它。创建新菜单或使用现有菜单。一旦进入菜单，此时您必须创建一个新的菜单项。在菜单项类型下，单击选择。向下滚动，您将找到用户配置文件和编辑用户配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:09:50.280

转到模块/mod_login/tmpl/default.php

在这个文件中有代码之后

```
if ($type == 'logout'):

add the below code code for profile edit link right after
<a href="<?php echo 'index.php?option=com_sociallogin&view=profile&layout=edit';?>" title="My Profile">Edit Profile</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:04:47.953

在管理面板的模块管理器中，将有一个名为“用户菜单”的模块，该模块将与一个菜单相关联，很可能被称为同名。转到编辑“用户菜单”模块，在右下角，有一些选项可以选择模块出现在哪些页面上。

否则，如果您想将“编辑个人资料”链接作为登录模块的一部分，则需要转到以下文件：

```
modules/mod_login/tmpl/default.php 
```

并在那里添加必要的代码

希望这可以帮助

# jquery-plugins - “对象不支持‘就绪’的属性或方法”

> ID：12797128
> 
> 赞同：1
> 
> 时间：2012-10-09T09:41:56.667
> 
> 标签：jquery-plugins, mootools

```
Object doesn't support property or method 'ready' 
```

使用带有 js mootools 滑块的自定义下拉列表时出现此错误。我已经下载了 js 滑块和自定义下拉菜单，在尝试合并它时，我遇到了这个错误。

我已经从这里下载了 js 滑块插件： http: [//landofcoder.com/index.php ?option=com_jdownloads&Itemid=372&task=view.download&cid=6](http://landofcoder.com/index.php?option=com_jdownloads&Itemid=372&task=view.download&cid=6)

谁能告诉我它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:11:46.760

确保您需要 mootool 和 jquery。您可以在 Google Chrome 中打开 Inspector 并输入控制台选项卡`MooTools`和`jQuery`.

这个库在全局变量上有冲突`$`。

```
document.id('element_id') // Mootools' "$"
jQuery('selector or something') // jQuery's "$" 
```

我希望在你的情况下这应该会有所帮助

```
jQuery(document).ready(function() {
  // initialize you code
}); 
```

# ruby-on-rails - 没有表单的 Rails 按钮

> ID：12797131
> 
> 赞同：2
> 
> 时间：2012-10-09T09:41:58.480
> 
> 标签：ruby-on-rails

据我所知， button_to 用于提交表单。Rails 中是否有专门用于仅在客户端上运行一些 javascript 而不向服务器发送任何内容的按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:47:27.930

如果您只想在客户端运行 javascript，您可以添加纯 html 按钮并调用一些函数来运行所需的 javascript，方法是将事件绑定到该按钮。您根本不需要使用 Rails 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:45:53.100

这与 Rails 无关，而与 HTML 无关。

您总是可以放置普通的 HTML 标记（如表单上的 a`<button>`或 a`<a>`并使其触发 JavaScript 中的某些操作）

样本：

```
<%= form_for(@post) do |f| %>
  ...
  <button id="clicktrigger">Click Me!</button>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:53:48.323

请试试这个：

您可以使用 onclick 调用 javascript 函数。它不会提交表单。

```
<%= submit_tag "Test me!", :type => 'button', :onclick => 'alert("It works!")' %> 
```

# facebook - Facebook“喜欢”没有在时间线上发布

> ID：12797142
> 
> 赞同：1
> 
> 时间：2012-10-09T09:42:24.707
> 
> 标签：facebook

我想在我的 WordPress 页面上有一个“赞”Facebook 按钮。我尝试使用 Facebook 文档中的插件和直接代码。两者都有效，但我的“喜欢”不会在我的时间线上发布。我确实把我的 AppID 放在那里，它会是什么？

FB根代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/pl_PL/all.js#xfbml=1&appId=###"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>` 
```

fb：喜欢代码：

```
<fb:like href="<?php echo $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"] ?>" send="true" width="450" show_faces="false"></fb:like>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:24:11.277

这是您的 html 示例。

*给你一些提示，如果你不确定你的网站格式是否正确，不要简单地喜欢你的页面，因为它会向 facebook 提交错误标题/图像/描述/内容等的记录。

```
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:og="http://ogp.me/ns#"
  xmlns:fb="https://www.facebook.com/2008/fbml">
 <head>
<title>WooTube</title>
<meta property="og:title" content="WooTube"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="http://www.wootube.woolei.com"/>
<meta property="og:image" content="http://i.ytimg.com/vi/LD-rmC2i624/default.jpg"/>
<meta property="og:site_name" content="WooTube"/>
<meta property="fb:admins" content="568394401"/>
<meta property="og:description"
      content="WooTube - Share Video To All Your FaceBook Group With 1 Click!"/>
 </head>
 <body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:43:58.023

检查您在 Facebook 上的活动日志，看看您的个人资料上是否显示了“赞”。点赞可能已发布为“最近的活动”或个人“有人喜欢...”的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T09:26:11.247

您需要提交您的 Facebook 应用以供审核，然后“赞”才会出现在用户的时间线中，通过 Facebook 的应用仪表板 >> 状态和审核 >> 开始提交：

[https://developers.facebook.com/docs/apps/review](https://developers.facebook.com/docs/apps/review)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:01:53.857

I would use the Facebook debugger to lint your site/page where the like button resides:

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

This will tell you if you have any issues with the like button and or the OG tags on the page.

Hope this helps.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-10T16:53:56.087

可能我有点晚了:)但鉴于我没有看到一个可接受的答案......

您是否能够从[FB 调试器](https://developers.facebook.com/tools/debug)中看到正确的点赞数？

如果不是，可能值得验证以下代码的结果是否代表正确的 URL（并且具有正确的编码）：

```
<fb:like href="<?php echo $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"] ?> 
```

# hibernate - ManyToMany 在关系表（A_B 表）中找到不存在的元素

> ID：12797145
> 
> 赞同：0
> 
> 时间：2012-10-09T09:42:25.767
> 
> 标签：hibernate, many-to-many, hql

我在一侧与 0..* 基数有多对多关系。我想查询关系表。我找到了以下网站：[#2。查找所有未分配标签的文章](http://www.sergiy.ca/how-to-write-many-to-many-search-queries-in-mysql-and-hibernate/)但查询不起作用。

```
String hql = "select a from Article a " +
            "left join a.tags t " +
            "group by a " +
            "having count(t)=0";
Query query = session.createQuery(hql);
List<Article> articles = query.list(); 
```

当我使用此查询时，我收到一个错误，告诉我在 select 语句中未正确定义 group by 元素。

这是一个例子。假设我有hibernate生成的Articles表和Tags表关系表是Articles_Tags。我想查找没有任何标签的文章。

如何使用 hql 中的关系表查找所有没有标签的文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:58:55.450

查询无效。

但是这个应该做：

```
select a from Article a 
left join a.tags t 
where t.id is null 
```

# mysql - MYSQL concat 请求和字符串减法

> ID：12797152
> 
> 赞同：0
> 
> 时间：2012-10-09T09:42:46.837
> 
> 标签：mysql, string, request, concat

我在下面有一个mysql表：

```
id   user_id   ticket 
1    39        56478939
2    51        42234951
3    40        56478940
4    52        67284952 
```

其中票证（例如第一行）= 564789 + 39 (user_id) 我的请求如下所示：

```
SELECT CONCAT_WS(";", id, user_id, ticket) FROM `signals` 
```

我会得到：

```
1;39;56478939
2;51;42234951
... 
```

如何使用 MYSQL 请求获取此类数据（在票证末尾从票证 user_id 中删除）：

```
1;39;564789
2;51;422349
... 
```

请求应该足够快：非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:52:42.353

试试这个：

```
SELECT CONCAT_WS(";", id, user_id, LEFT(ticket,length(ticket)-length(user_id))) from table1; 
```

**[小提琴演示](http://sqlfiddle.com/#!2/ed2ad/9)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:47:20.337

试试这个 ：

```
 SELECT CONCAT_WS(";", id, user_id, LEFT(ticket,6)) FROM `signals` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:51:00.747

试试这个：

```
SELECT CONCAT_WS(";", id, user_id, left(ticket,length(ticket)-length(user_id)))
FROM `signals` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:00:26.150

您可以使用此查询 -

```
SELECT (ticket - user_id) DIV
  CASE
    WHEN user_id < 10 THEN 10
    WHEN user_id < 100 THEN 100
    ELSE 1000 END
FROM signals; 
```

如果需要，添加更多 WHEN 案例。

然后将其应用于您的查询。

# opencl - Opencl 缓冲区和内核执行

> ID：12797162
> 
> 赞同：0
> 
> 时间：2012-10-09T09:43:26.073
> 
> 标签：opencl

取自 OpenCL by Action

下面的代码实现了如图所示的目标。它创建两个缓冲区对象，并使用 clEnqueueCopyBuffer 将缓冲区 1 的内容复制到缓冲区 2。

然后 clEnqueueMapBuffer 将 Buffer 2 的内容映射到主机内存， memcpy 将映射的内存传输到一个数组。

![在此处输入图像描述](../Images/79aead37feeb761cb69850cd2c84ca8f.png)

我的问题是如果我不在代码中编写以下行，我的代码是否仍然有效：

```
 err = clSetKernelArg(kernel, 0, sizeof(cl_mem),  
                 &buffer_one);                     
    err |= clSetKernelArg(kernel, 1, sizeof(cl_mem), 
                  &buffer_two);              
    queue = clCreateCommandQueue(context, device, 0, &err);
    err = clEnqueueTask(queue, kernel, 0, NULL, NULL); 
```

内核是空白的，它什么也没做。设置内核参数和入队任务需要什么？

```
...
float data_one[100], data_two[100], result_array[100];
cl_mem buffer_one, buffer_two;
void* mapped_memory;
...

 buffer_one = clCreateBuffer(context,           
  CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR,             
  sizeof(data_one), data_one, &err);       
 buffer_two = clCreateBuffer(context,                  
  CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR,       
  sizeof(data_two), data_two, &err);  

  err = clSetKernelArg(kernel, 0, sizeof(cl_mem),  
                 &buffer_one);                     
  err |= clSetKernelArg(kernel, 1, sizeof(cl_mem), 
                  &buffer_two);              
 queue = clCreateCommandQueue(context, device, 0, &err);
 err = clEnqueueTask(queue, kernel, 0, NULL, NULL);     

 err = clEnqueueCopyBuffer(queue, buffer_one,  
  buffer_two, 0, 0, sizeof(data_one),           
  0, NULL, NULL);            

  mapped_memory = clEnqueueMapBuffer(queue, 
  buffer_two, CL_TRUE, CL_MAP_READ, 0,            
  sizeof(data_two), 0, NULL, NULL, &err);
  memcpy(result_array, mapped_memory, sizeof(data_two));       
  err = clEnqueueUnmapMemObject(queue, buffer_two, 
  mapped_memory, 0, NULL, NULL);                  
  } 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:58:04.353

我相信调用 enqueueTask 的目的是确保数据实际上驻留在设备上。有可能在使用该`CL_MEM_COPY_HOST_PTR`标志时，内存仍保留在主机端，直到内核需要它为止。因此，将任务入队可确保将内存带到设备中。这也可能发生在某些设备上，但不会发生在其他设备上。

您可以通过检测您的代码并测量运行任务所花费的时间来测试这个理论，无论是任务有参数还是没有参数。如果任务需要更长的时间进行争论，那么这很可能是正在发生的事情。

# java - 在 SQL 查询语句中分配变量

> ID：12797164
> 
> 赞同：0
> 
> 时间：2012-10-09T09:43:33.283
> 
> 标签：java, sql, derby

在我当前的项目中，我有一个带参数的函数（例如，`int badgID`在下面的代码片段中）。此函数连接 Apache Derby 数据库，创建表（例如，`FIRSTTABLE`），然后查询`FIRSTTABLE`表。查询语句使用函数参数进行查询（例如，`ID = $badgeID`）。我的问题：**`ID = $badgeID`从语法的角度来看是正确的方法吗？**. 我已经尝试过这种情况，但它不起作用。

```
public void getprofile (int badgeID) {

// Create connection with Apache-Derby Database.   

// Create table in Apache Derby datbase.
String createString = " CREATE TABLE FIRSTTABLE "
                    + "(ID INT PRIMARY KEY, "
            + "PREF INT, "
                    + " NAME VARCHAR(12))";

//  SQL query on table
querystmt = "SELECT * FROM FIRSTTABLE WHERE  ID = $badgeID"

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:47:35.507

那是php语法...

在java中你会写

```
String querystmt = "SELECT * FROM FIRSTTABLE WHERE  ID = " + badgeID; 
```

# java - Jsch - Shell 脚本执行后退出

> ID：12797165
> 
> 赞同：4
> 
> 时间：2012-10-09T09:43:33.703
> 
> 标签：java, unix, jsch

我正在尝试使用 Jsch 编写 Java 程序，其中我想使用该程序开始执行 shell 脚本，并在 shell 脚本的执行完成后退出程序。

```
 String userName = "";
    String hostName = "";
    String password = "";

    JSch javaSecureChannel = new JSch();

    Session jschSession = null;
    Channel jschChannel = null;

    try {

        jschSession = javaSecureChannel.getSession(userName, hostName, 22);
        Properties configurationProperties = new Properties();
        configurationProperties.put("StrictHostKeyChecking", "no");
        jschSession.setConfig(configurationProperties);
        jschSession.setPassword(password);
        jschSession.connect();
        jschChannel = null;
        jschChannel = jschSession.openChannel("shell");
        jschChannel.setOutputStream(System.out);

        File shellScript = createShellScript();

        FileInputStream fin = new FileInputStream(shellScript);
        byte fileContent[] = new byte[(int) shellScript.length()];
        fin.read(fileContent);
        InputStream in = new ByteArrayInputStream(fileContent);
        jschChannel.setInputStream(in);         
        jschChannel.connect();

        while(true){                

            //if(jschChannel.isClosed)
            if(jschChannel.getExitStatus() == 0){
              System.out.println("exit-status: " + jschChannel.getExitStatus());
              break;
            }

            try{
                Thread.sleep(1000);
            }catch(Exception ee){
                ee.printStackTrace();
            }

          }

    } catch (Exception e) {
        e.printStackTrace();
    }

    jschChannel.disconnect();
    jschSession.disconnect();
    System.out.println("Done...!!!"); 
```

createShellScript 方法如下。

```
 String temporaryShellFileName = "shellscript.sh";
    File fileStream = new File(temporaryShellFileName);

    try {

        PrintStream outStream = new PrintStream(new FileOutputStream(fileStream));
        outStream.println("#!/bin/bash");
        outStream.println("cd /u01/app/java/gids4x/Test");
        outStream.println("Test_with_NULL.sh");
        outStream.close();

    } catch (Exception e) {

        System.err.println("Error: " + e.getMessage());

    } 
```

使用上面的代码，我可以开始执行 shell 脚本。但是，即使在程序执行完成之后，即在脚本执行完成之后，我也不能终止程序执行。

你能建议具体需要做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T07:49:08.500

我也遇到了同样的问题，并通过使用以下两个步骤解决了它： 1\. 将最后一个命令作为“退出”发送 2\. 让我的邮件线程休眠直到通道打开

请找到如下代码：

```
public static void main(String[] arg){

  Channel channel=null;
  Session session=null;
try{
  JSch.setLogger(new MyLogger());
  JSch jsch=new JSch();
  jsch.addIdentity("C:\\testLinuxKey.key");

  String host=null;
  if(arg.length>0){
    host=arg[0];
  }
  else{
    host=JOptionPane.showInputDialog("Enter username@hostname",
                                     System.getProperty("user.name")+
                                     "@localhost"); 
  }
  String user=host.substring(0, host.indexOf('@'));
  host=host.substring(host.indexOf('@')+1);

  session=jsch.getSession(user, host, 22);

  // username and password will be given via UserInfo interface.
  UserInfo ui=new MyUserInfo();
  session.setUserInfo(ui);

  session.connect();

  channel=session.openChannel("shell");

  //channel.setInputStream(System.in);
  channel.setOutputStream(System.out);

  String temporaryShellFileName = "shellscript.sh";
    File fileStream = new File(temporaryShellFileName);

    try {

        PrintStream outStream = new PrintStream(new FileOutputStream(fileStream));
        outStream.println("id");
        outStream.println("sudo bash");
        outStream.println("cd /tmp/");
        outStream.println("/tmp/wasinfo.sh");
        outStream.println("exit");
        outStream.println("exit");
        outStream.close();
        FileInputStream fin = new FileInputStream(fileStream);
        byte fileContent[] = new byte[(int) fileStream.length()];
        fin.read(fileContent);
        InputStream in = new ByteArrayInputStream(fileContent);
        channel.setInputStream(in);  

    } catch (Exception e) {

        System.err.println("Error: " + e.getMessage());

    }

  channel.connect();
  while(channel.isConnected())
  {
      System.out.println("----- Channel On ----");
      Thread.currentThread().sleep(5000);
  }
  channel.disconnect();
  session.disconnect();
}
catch(Exception e){
  System.out.println(e);
  channel.disconnect();
  session.disconnect();      
}

System.out.println("Main End");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-16T00:18:11.197

我有一个类似的问题。我在窗口中运行 shell，但在窗口关闭时无法终止 Java。我通过关闭输入流解决了它。

# javascript - 不同元素上的 Javascript mousedown 和 mouseup

> ID：12797171
> 
> 赞同：1
> 
> 时间：2012-10-09T09:43:56.807
> 
> 标签：javascript, jquery, html

我正在尝试在 JS 中开发一个单词搜索游戏，如下所示：[https ://jquery-wordsearch-game.googlecode.com/svn/trunk/demo.html](https://jquery-wordsearch-game.googlecode.com/svn/trunk/demo.html)

顺便说一句，我没有使用那个人的插件，而是尝试自己开发。

我正在使用以下代码来触发处理程序以在用户单击并移动单元格时突出显示这些单元格。

`$('#puzzlecontainer').on('mousedown','.block',myHandler);`

问题是 mousedown 事件仅在第一个单元格上触发。我希望处理程序在鼠标路径中的所有单元格上触发。

另外我怎样才能使它与触摸事件兼容？我尝试了 touchmove 和 touchdown。

请帮忙

## 更新

在 Shusl 的帮助下，我添加了以下代码： var ismosedown = false;

```
 $('#puzzlecontainer').on('vmousedown','.block', function(){
            globalvars.ismousedown =true;
            $(this).addClass("active");
        });

        $('#puzzlecontainer').on('vmouseover','.block', function(){ 
            if(globalvars.ismousedown){
                $(this).addClass("active");
            }
        });

        $('#puzzlecontainer').on('vmouseup','.block', function(){ 
            globalvars.ismousedown = false;
        }); 
```

**vmouseover**在桌面浏览器上按需要工作。但它不适用于我的 Android 手机和平板电脑。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:49:19.640

触发一个函数以添加和删除要在 mouseenter 上触发的事件。在鼠标按下时添加此事件，并在鼠标抬起时将其删除以停止突出显示...

```
$('#puzzlecontainer').on('mousedown','.block',startSelect);// Run when down
$('#puzzlecontainer').on('mouseup','.block',stopSelect);// Run when up

function startSelect(){
    $('#puzzlecontainer').on('mouseenter','.block',myHandler);//Add Handler on enter.
    // Fire the mouseenter event for the current element or it will not highlight.
    $(this).trigger('mouseenter');
}
function stopSelect(){
    $('#puzzlecontainer').off('mouseenter','.block',myHandler);//Remove Handler because mouseup.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:50:05.140

您可以`mouseover`在每个单元格上使用事件并在`myHandler`. 检查它是否为真，然后将其视为`mousedown`事件

```
var ismosedown = false;

    $('#puzzlecontainer').on('mousedown','.block', function(){ ismosedown =true; } );
   $('allcells').mouseover(function(){
          if(ismosedown ){ // do works
           }
    }).mouseup(function(){
           ismosedown = false;
     }); 
```

# cordova - 电话间隙。地理定位服务启动失败

> ID：12797172
> 
> 赞同：6
> 
> 时间：2012-10-09T09:44:00.010
> 
> 标签：cordova, android-emulator

PhoneGap 版本：2.0.0。Android API 级别 16（4.0.3 版本）。提示错误的代码示例：

```
navigator.geolocation.getCurrentPosition(onSuccess, onError, {enableHighAccuracy:true});

function onSuccess(position) {
    console.log('latitude: '+ position.coords.latitude);
    console.log('longitude: '+ position.coords.longitude);                  
}

function onError(error) {
    console.log('Appeared error : '+ error.message);                
} 
```

总是在模拟器`Failed to start Geolocation service`中出错，错误代码`2`。即使通过*Android 控制台*或*DDMS发送 GPS 坐标*

Android清单权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T09:57:57.390

您需要在尝试获取位置时将`enableHighAccuracy`选项设置为。`true`

```
navigator.geolocation.getCurrentPosition(onSuccess, onError,{enableHighAccuracy:true}); 
```

此外，要指定您在模拟器中的位置**坐标，**

**Eclipse -> 打开透视图 -> DDMS -> 模拟器控制 -> 位置控制**

指定位置的坐标，然后按**“发送”**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T22:25:32.943

您是否仅在模拟器上进行测试？地理位置服务在我的 Android 模拟器中总是失败，但在真实设备上却没有。

编辑：请尝试使用以下代码

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(myPositionSuccess, myPositionError, {maximumAge: 300000, timeout:10000, enableHighAccuracy : true});
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T19:11:10.383

我已经尝试解决这个问题好几个星期了。我在网上搜索，似乎大多数人在为 android 开发时都会遇到关于 phonegap 的问题。解决方案是在具有 GPRS 的设备上测试我的代码。还要确保在运行代码之前启用您的 GPRS 和 wifi。避免使用模拟器测试GPRS，因为有很多功能缺失和错误。

# c - 如何为 TMS320F2812 DSP 编写内存屏障？

> ID：12797181
> 
> 赞同：4
> 
> 时间：2012-10-09T09:44:36.863
> 
> 标签：c, concurrency, memory-barriers, texas-instruments, ti-dsp

我浏览了 TI C/C++ 编译器 v6.1 用户指南 ( [spru514e](http://www.ti.com/general/docs/litabsmultiplefilelist.tsp?literatureNumber=spru514e) ) 但没有找到任何东西。

该`asm`声明在这方面似乎没有提供任何内容，手册甚至警告不要更改变量值（p132）。未实现用于声明对变量的影响的 GNU 扩展 (p115)。

我也没有发现任何内存屏障的内在特性（比如[`__memory_changed()`](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0376c/CJABCGHA.html)在 Keil 的 armcc 中）。

搜索网络或 TI 论坛也一无所获。

任何其他提示如何进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T19:52:47.243

内存屏障与内存访问的顺序有关，但您还必须确保值不会保留在寄存器中，而是完全写入内存。

使用 TI 编译器强制执行此操作的唯一方法是使用`volatile`.

请注意`volatile`，虽然是变量的修饰符，但在其实现中不是关于变量本身（即它的内存），而是关于对该变量的所有*访问。*因此，如果您想避免优化太少的影响，请编写您的程序，以便只有一些变量访问是易失的。

为此，请正常声明变量，并`volatile`仅在您想强制读取或写入变量时添加。您可以使用这样的辅助函数：

```
inline void force_write(int *ptr, int value)
{
    *(volatile int *)ptr = value;
} 
```

或者使用这个从 Linux 偷来的漂亮宏，可用于读/写和所有类型：

```
#define ACCESS_ONCE(x) (*(volatile typeof(x) *)&(x))
...
if (ACCESS_ONCE(ready) != 0)
    ACCESS_ONCE(new_data) = 42; 
```

（这个名字有历史原因；最好叫它`FORCE_ACCESS`。）

# php - 如何阻止空 SQL 查询显示所有结果？

> ID：12797182
> 
> 赞同：0
> 
> 时间：2012-10-09T09:44:37.587
> 
> 标签：php, html, mysql, sql

我正在创建一个肉类包装搜索表单，用户可以使用多个表单和下拉框搜索不同的包装。我有很多问题，但现在大部分都已排序，我只需要为下拉框创建“任何”搜索以及显示所有结果的空文本框的问题。

目前，当用户发送搜索时，他们可能已经在其他一些文本框中输入了内容，但是当其中一个表单为空时，会自动显示所有结果。我想要它，所以当发送搜索并且框为空时，代码会忽略该表单并仅检查其中包含信息的表单。

这是我的测试代码（不是我当前的最终表单代码）：

```
<body>
<?php
$con = mysql_connect("localhost", "root", "");
mysql_select_db("delyn_db", $con);

if (!$con)
{
    die("Could not connect: " . mysql_error());
}

$descrip = mysql_real_escape_string($_POST['descrip']);

$sql = "SELECT * FROM delyn WHERE description LIKE '%" . $descrip . "%'";

$r_query = mysql_query($sql);

if ($descrip === "")
{
    echo 'Null value';
}

while ($row = mysql_fetch_array($r_query))
{
    echo '<br /> Description: ' . $row['description'];
}

?>
</body> 
```

有人对如何阻止这种情况有任何想法吗？

编辑：对不起，这是我的带有搜索框的 HTML。上面的 php 只是发送值的地方。

```
<body>
    <form action="form5null.php" method="post">
        <label for="description">Description:</label> <input type="text" name="descrip">
        <br>
        <label for="trayheight">Trayheight:</label> <input type="text" name="height">
        <br>
        <label for="traywidth">Traywidth:</label> <input type="text" name="width">
        <br>
        <label for="traydepth">Traydepth:</label> <input type="text" name="depth">
        <br>
        <label for="trayrange">Trayrange:</label> <select name="trayrange">
            <option value="BBQ">
                BBQ
            </option>

            <option value="Dessert">
                Dessert
            </option>

            <option value="Display">
                Display
            </option>

            <option value="Meat">
                Meat
            </option>

            <option value="Microwave">
                Microwave
            </option>

            <option value="Party">
                Party
            </option>

            <option value="Salad/Wet Pasta">
                Salad/Wet Pasta
            </option>

            <option value="Snacks">
                Snacks
            </option>

            <option value="Standard">
                Standard
            </option>
        </select> <label for="traytype">Traytype:</label> <select name="traytype">
            <option value="Open">
                Open
            </option>

            <option value="Cavitised">
                Cavitised
            </option>

            <option value="Lid">
                Lid
            </option>

            <option value="Tray">
                Tray
            </option>

            <option value="Coallition">
                Coallition
            </option>

            <option value="Bowl">
                Bowl
            </option>

            <option value="Hinge pack">
                Open
            </option>

            <option value="Pot">
                Pot
            </option>

            <option value="Base &amp; Lid">
                Base and Lid
            </option>

            <option value="Rectangular">
                Rectangular
            </option>

            <option value="Specalist">
                Specialist
            </option>
        </select>
        <br>
        <label for="trayshape">Trayshape:</label> <select name="trayshape">
            <option value="Rectangular">
                Rectangular
            </option>

            <option value="Oval">
                Oval
            </option>

            <option value="Square">
                Square
            </option>

            <option value="Insert">
                Insert
            </option>

            <option value="Round">
                Round
            </option>

            <option value="Open">
                Open
            </option>
        </select>
        <br />
        <input type="submit" value="Submit">
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:25:32.883

您是否尝试通过仅检查值是否为空白/空（适用于 PHP）来限制您的 SQL 查询，如果没有填写则不运行查询？

例如（伪代码）

```
if(box1.HasText || box2.HasText || box3.HasText)
{
    RunTheSqlForForm1();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:53:55.380

将以下内容作为第一个选项添加到所有下拉列表中：

```
<option value="*">All</option> 
```

然后使用我在您的重复问题中提供的 SQL：

[如果在下拉列表中单击，使 SQL 忽略特定的搜索值？](https://stackoverflow.com/questions/12799361/make-sql-ignore-a-specific-search-value-if-clicked-in-a-dropdown/12799909#comment17308086_12799909)

Dirk Nachbar 也给出了很好的答案。

# css - CSS响应网格1px间隙问题

> ID：12797183
> 
> 赞同：5
> 
> 时间：2012-10-09T09:44:39.530
> 
> 标签：css, responsive-design, grid-layout

我正在为一个项目开发响应式网格系统。网格由向左浮动且**宽度**为**25%**的块组成。

这些块内部是设置为**100%** **高度/宽度** 或**50%** **高度/宽度** 的图像。

块中的所有图像彼此相邻，并且所有块彼此相邻，因此它看起来像一个无缝的图像网格。

我遇到的问题是在某些浏览器大小下，或者当您调整浏览器大小时，某些块之间会出现 1px 的间隙。

可以在这里看到一个例子：http: [//dahliacreative.com/responsivegrid/](http://dahliacreative.com/responsivegrid/)

我认为这可能取决于漂浮的方块，好像你把漂浮物取下来看起来都很好。我尝试使用`display: inline-block`etc，但无法正常工作！

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:50:00.440

这是由于使用了整轮百分比，例如 50%，当您达到某些宽度和高度（例如 561px * 393px）时，这些百分比不会均匀地分成 50%，因此剩下的 1px 间隙。

查看 twitter bootstrap CSS 以查看百分比精确到小数点后 6 位以避免此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T08:59:11.857

我通过将 css 类添加到最后一列来修复它，这个类的 css

```
.your_class_for_last_column { float: left !important;} 
/* TO FIX 1px Foundation 5 bug fix*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T03:04:24.520

您可以将新的 css3 与列间隙和列数一起使用。

```
column-count:
column-gap: 
```

克里斯用图像做了一个很好的例子，这与你的有关。您可以对 li 或 table 等元素执行几乎相同的操作 确保使用前缀并且在 IE 小于 10 时不起作用

[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

# c++ - 如何在 QTableView 中绘制自定义控件？

> ID：12797184
> 
> 赞同：2
> 
> 时间：2012-10-09T09:44:42.240
> 
> 标签：c++, qt

我必须在 QTableView 中绘制一个自定义控件。此控件必须看起来像 FileChooser。

[FileChooser http://www.vision.ee.ethz.ch/computing/sepp-irix/qt-3.0-mo/filechooser.png](http://www.vision.ee.ethz.ch/computing/sepp-irix/qt-3.0-mo/filechooser.png)

```
QStyleOptionButton button_option;
button_option.state |= QStyle::State_Enabled | QStyle::State_Off;
button_option.rect = PushButtonRect(option); //calculate button rect
button_option.text = "...";
QApplication::style()->drawControl(
    QStyle::CE_PushButton,
    &button_option,
    painter); 
```

上面的代码绘制了 QStyle::CE_PushButton - 看起来像 QButton，但 Qt 库中没有 QStyle::CE_LineEdit。如何绘制 QLineEdit？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:21:01.197

In order to draw custom widgets in a Table View, you need to create a custom [QItemDelegate](http://doc.qt.digia.com/stable/qitemdelegate.html#details) subclass and override at least the [createEditor](http://doc.qt.digia.com/stable/qitemdelegate.html#createEditor) method, where you can create any kind of widget which is displayed when double-clicking into the table cell. This item delegate can be assigned to the respective column in your table view.

You would then need to create a separate class e.g. CustomFileChooser which inherits from QWidget and consists of a Line Edit and Button.

Your createEditor method would then return such an object.

You may also have to override setEditorData (which shall assign the current model value to the editor widget which was created) and setModelData (which is called when the changes are committed).

This way, the line edit and button would only be visible after double-clicking into the table cell. If you want it to be always visible, you will have to override drawDisplay() as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:11:43.310

我自己找到了答案。您可以使用以下方式永久显示自定义编辑器（普通小部件）：

```
void QAbstractItemView::openPersistentEditor ( const QModelIndex & index ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-23T09:36:49.880

首先，您需要了解按钮是控制元素，因此您可以在 CE 下找到它，但是当您需要 lineEdit 时，它不是控制元素。为了画线编辑，我将引用 qt 文档，

“QStyleOptionFrameV2 继承了 QStyleOptionFrame，它用于绘制几个内置的 Qt 小部件，包括 QFrame、QGroupBox、QLineEdit 和 QMenu。”

是的，只有一个可能有效的示例代码才能帮助您清楚地理解它！代码应该看起来像这样

```
QStyleOptionFrameV2 *panelFrame = new QStyleOptionFrameV2;
QLineEdit *search = new QLineEdit;
panelFrame->initFrom(search);
panelFrame->rect = QRect(x,y,w,h);//Indeed the location and the size
panelFrame->lineWidth = QApplication::style->pixelMetric(QStyle::PM_DefaultFrameWidth, panelFrame, search);
panelFrame->state |= QStyle::State_Sunken;
QApplication::style()->drawPrimitive(QStyle::PE_PanelLineEdit, panelFrame, painter); 
```

# c# - 如何将文件保存到上级文件夹？

> ID：12797185
> 
> 赞同：1
> 
> 时间：2012-10-09T09:44:44.227
> 
> 标签：c#, webforms, directory

服务器中的文件夹结构如下所示：

*   www.example.com

    *   图片

    *   网页文件

        *   这里所有的网络文件
        *   索引.html
        *   例子.html

我的代码在 web 文件夹中。要将文件保存在 Web 文件中，我可以使用`server.MapPath("~\\folder")`.
但是如何将文件保存到位于上层且与 www.example.com 下的 web 文件相同的 lvl 的图像文件夹中？

新手，请指导。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:49:26.383

MapPath 方法将指定路径映射到物理路径。

这是给你的一些注意事项

```
 <%
response.write(Server.MapPath("test.asp") & "<br />")
response.write(Server.MapPath("script/test.asp") & "<br />")
response.write(Server.MapPath("/script/test.asp") & "<br />")
response.write(Server.MapPath("\script") & "<br />")
response.write(Server.MapPath("/") & "<br />")
response.write(Server.MapPath("\") & "<br />")
%>

Output:

c:\inetpub\wwwroot\script\test.asp
c:\inetpub\wwwroot\script\script\test.asp
c:\inetpub\wwwroot\script\test.asp
c:\inetpub\wwwroot\script
c:\inetpub\wwwroot
c:\inetpub\wwwroot 
```

如果您想使用您的 www 或根目录的相对路径

```
 response.write(Server.MapPath("../")) 
```

或者

```
 response.write(Server.MapPath("..\")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:47:25.963

怎么样？

```
server.MapPath("~/images/myfile.jpg"); 
```

# xml - 从文档中选择多个 XML 节点，然后在 TListbox Delphi 中显示

> ID：12797186
> 
> 赞同：1
> 
> 时间：2012-10-09T09:44:47.587
> 
> 标签：xml, delphi, xpath, pascal, txmldocument

我在 delphi 中使用 IXMLDocument 创建了一个 XML 文件，我需要访问每个名为 Manufacturer 的节点上的文本值，并在单击 Button1 时在 TListBox 中显示结果。

这是我创建 XML 文件的方式，在 FormCreate 上调用它：

```
procedure TfrmMain.CreateXML;
var
  BikeXMLDoc: IXMLDocument;
  Root, Bike, Manufacturer, Model, Year, Ratio1, Ratio2, Ratio3, Ratio4, Ratio5,
  Ratio6, Ratio7, PriRatio: IXMLNode;
begin
  // Create XML Document for bikes.xml
  BikeXmlDoc := TXMLDocument.Create(nil);
  BikeXmlDoc.Active := True;
  BikeXmlDoc.Options := BikeXmlDoc.Options + [doNodeAutoIndent];
  BikeXmlDoc.Version := '1.0';

  // Create Document Root Element
  Root := BikeXmlDoc.CreateNode('Bikes');
  BikeXmlDoc.DocumentElement := Root;

  // Create First Bike Node
  Bike := BikeXmlDoc.CreateNode('Bike');

  // Add Required Elements with values for Honda Fireblade 2012
  Manufacturer := BikeXmlDoc.CreateNode('Manufacturer');
  Manufacturer.Text := 'Honda';
  Model := BikeXmlDoc.CreateNode('Model');
  Model.Text := 'Fireblade CBR1000';
  Year := BikeXmlDoc.CreateNode('Year');
  Year.Text := '2012';
  Ratio1 := BikeXmlDoc.CreateNode('Ratio1');
  Ratio1.Text := '2.286';
  Ratio2 := BikeXmlDoc.CreateNode('Ratio2');
  Ratio2.Text := '1.778';
  Ratio3 := BikeXmlDoc.CreateNode('Ratio3');
  Ratio3.Text := '1.500';
  Ratio4 := BikeXmlDoc.CreateNode('Ratio4');
  Ratio4.Text := '1.333';
  Ratio5 := BikeXmlDoc.CreateNode('Ratio5');
  Ratio5.Text := '1.214';
  Ratio6 := BikeXmlDoc.CreateNode('Ratio6');
  Ratio6.Text := '1.138';
  Ratio7 := BikeXmlDoc.CreateNode('Ratio7');
  PriRatio := BikeXmlDoc.CreateNode('PriRatio');
  PriRatio.Text := '1.717';

  // Add elements to XML File
  Root.ChildNodes.Add(Bike);
  Bike.ChildNodes.Add(Manufacturer);
  Bike.ChildNodes.Add(Model);
  Bike.ChildNodes.Add(Year);
  Bike.ChildNodes.Add(Ratio1);
  Bike.ChildNodes.Add(Ratio2);
  Bike.ChildNodes.Add(Ratio3);
  Bike.ChildNodes.Add(Ratio4);
  Bike.ChildNodes.Add(Ratio5);
  Bike.ChildNodes.Add(Ratio6);
  Bike.ChildNodes.Add(Ratio7);
  Bike.ChildNodes.Add(PriRatio);

  // Save the XML File
  //ShowMessage('XML File Created : ' + AppFileLocation + 'bikes.xml');
  BikeXmlDoc.SaveToFile(AppFileLocation+'bikes.xml');
  BikeXmlDoc.Active := False;
  BikeXmlDoc := nil;
end; 
```

该代码重复了 4 次，向 XML 文件添加了 4 个更多元素，我没有在此处添加代码，因为我认为这不是必需的。完成的 XML 文件是这样的：

```
<?xml version="1.0"?>
<Bikes>
  <Bike>
    <Manufacturer>Honda</Manufacturer>
    <Model>Fireblade CBR1000</Model>
    <Year>2012</Year>
    <Ratio1>2.286</Ratio1>
    <Ratio2>1.778</Ratio2>
    <Ratio3>1.500</Ratio3>
    <Ratio4>1.333</Ratio4>
    <Ratio5>1.214</Ratio5>
    <Ratio6>1.138</Ratio6>
    <Ratio7/>
    <PriRatio>1.717</PriRatio>
  </Bike>
  <Bike>
    <Manufacturer>Kawasaki</Manufacturer>
    <Model>ZX6R 636</Model>
    <Year>2013</Year>
    <Ratio1>2.846</Ratio1>
    <Ratio2>2.200</Ratio2>
    <Ratio3>1.850</Ratio3>
    <Ratio4>1.600</Ratio4>
    <Ratio5>1.421</Ratio5>
    <Ratio6>1.300</Ratio6>
    <Ratio7/>
    <PriRatio>1.900</PriRatio>
  </Bike>
  <Bike>
    <Manufacturer>Suzuki</Manufacturer>
    <Model>GSXR1000</Model>
    <Year>2011</Year>
    <Ratio1>2.562</Ratio1>
    <Ratio2>2.052</Ratio2>
    <Ratio3>1.714</Ratio3>
    <Ratio4>1.500</Ratio4>
    <Ratio5>1.360</Ratio5>
    <Ratio6>1.269</Ratio6>
    <Ratio7/>
    <PriRatio>1.617</PriRatio>
  </Bike>
  <Bike>
    <Manufacturer>Triumph</Manufacturer>
    <Model>Daytona 675R</Model>
    <Year>2010</Year>
    <Ratio1>2.312</Ratio1>
    <Ratio2>1.857</Ratio2>
    <Ratio3>1.565</Ratio3>
    <Ratio4>1.350</Ratio4>
    <Ratio5>1.238</Ratio5>
    <Ratio6>1.136</Ratio6>
    <Ratio7/>
    <PriRatio>1.848</PriRatio>
  </Bike>
  <Bike>
    <Manufacturer>Yamaha</Manufacturer>
    <Model>YZF R1</Model>
    <Year>2013</Year>
    <Ratio1>2.533</Ratio1>
    <Ratio2>2.063</Ratio2>
    <Ratio3>1.762</Ratio3>
    <Ratio4>1.522</Ratio4>
    <Ratio5>1.364</Ratio5>
    <Ratio6>1.269</Ratio6>
    <Ratio7/>
    <PriRatio>1.512</PriRatio>
  </Bike>
</Bikes> 
```

我怎样才能做到这一点，当按下 Button1 时，再次访问 XML 文件，并且每个制造商的文本值都列在 ListBox1.Items 中。

我尝试了涉及 XPath 的解决方案来仅选择一个节点，但我需要能够选择所有节点。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:38:19.760

可能是这种方式（它未经测试，在这里使用在线 Delphi 参考编写，现在手头没有 Delphi）：

```
uses
  XMLDoc, XMLIntf, XMLDOM;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  XMLDocument: IXMLDocument;
  DOMNodeList: IDOMNodeList;
  DOMNodeSelect: IDOMNodeSelect;    
begin
  XMLDocument := LoadXMLDocument('c:\File.xml');
  if Assigned(XMLDocument) and 
    Supports(XMLDocument.DocumentElement.DOMNode, IDOMNodeSelect, DOMNodeSelect) then
  begin
    DOMNodeList := DOMNodeSelect.selectNodes('/Bikes/Bike/Manufacturer/text()');
    ListBox1.Items.BeginUpdate;
    try
      ListBox1.Items.Clear;
      for I := 0 to DOMNodeList.length - 1 do
        ListBox1.Items.Add(DOMNodeList.item[I].nodeValue);
    finally
      ListBox1.Items.EndUpdate;
    end;           
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:11:28.620

从文件加载文档：

*   [http://docwiki.embarcadero.com/Libraries/XE3/en/Xml.XMLDoc.LoadXMLDocument](http://docwiki.embarcadero.com/Libraries/XE3/en/Xml.XMLDoc.LoadXMLDocument)
*   [XPath 和 TXmlDocument](https://stackoverflow.com/questions/5383919)

通过 XPath 加载节点列表

*   [在 Delphi 中使用 XPath 查找元素](https://stackoverflow.com/questions/1406138)

枚举选定节点并提取文本

另外：[https ://stackoverflow.com/questions/tagged/delphi+xpath](https://stackoverflow.com/questions/tagged/delphi+xpath)

# html - 让 html5 视频在我的服务器上运行

> ID：12797187
> 
> 赞同：0
> 
> 时间：2012-10-09T09:44:49.913
> 
> 标签：html, .htaccess, video, ogg

首先很抱歉问了一些以前被问过很多次的问题，但我似乎无法找到我的问题的答案。

我有一个包含几个 html5 视频的网站，一切都在本地工作，但不在我的服务器上。所有视频均已上传（在 ogv、mp4、webm 中），目录路径正确，但视频未在任何浏览器中显示。

我曾尝试将“AddType video/ogg .ogv”等添加到我的 .htaccess 文件中，但什么也没做。如果我将 .htaccess 文件放在我的视频所在文件夹以外的任何位置，我会得到一个带有“IISPassword 页面无法显示”的页面。我已将所有必需的 mime 类型添加到 Cpanel，但仍然没有。

我在这里做错了什么？有什么建议么？

更新：视频现在显示在 Chrome 中，但不是 FF 或 safari

# git - 合并 Git 存储库

> ID：12797194
> 
> 赞同：0
> 
> 时间：2012-10-09T09:45:11.237
> 
> 标签：git

我有四个应用程序（C 语言），它们通过 POSIX 消息队列发送 C 结构进行通信。所有这些应用程序共享两个文件：

*   包含所有结构定义的 msg.h 文件
*   具有初始化这些结构的函数的 msg.c 文件

我想将每个应用程序保存在单独的存储库中，并在第五个存储库中为这些共享的 msg.h 和 msg.c 再创建一个存储库。更重要的是我想在每个应用程序存储库中链接 msg.h 和 msg.c，例如：

在存储库 SHARED 我有 msg.h 和 msg.c。我将这些文件链接到存储库 PROGRAM，因此该存储库知道 msg.h 和 msg.c 由其他存储库维护，如果在 PROGRAM 存储库上执行“拉”，它也会在后台从 SHARED 拉文件。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:14:33.017

是的，你可以简单地使用[Git Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

只需将您的共享代码保存在单独的存储库中，并将其作为子模块包含在您需要的任何地方。

git 子模块的另一个很酷的特性是它们还存储每个子模块的修订版本。因此，例如，从现在开始的两年后，您可以返回并检查您今天使用哪个版本的 SHARED 编译 PROGRAM。

# java - 当我在java中有纬度和经度时如何获取位置地址？

> ID：12797198
> 
> 赞同：3
> 
> 时间：2012-10-09T09:45:29.320
> 
> 标签：java

我从 GPS 设备获得了一定的纬度和经度。我必须知道那个地方的地址。我如何在java中做到这一点。当我知道纬度和经度时，谷歌在 java 中是否提供任何 API 来知道地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-21T11:55:52.240

在以下示例中，包含两个主要概念。

1.  [Web 服务客户端（反向地理编码）](https://developers.google.com/maps/documentation/geocoding/start)
2.  JSON

Web 服务客户端用于从提供一些 Web 服务的另一台服务器访问资源

使用此服务，您可以获得纬度、经度的地址使用

谷歌正在提供免费的网络服务客户端 URI 即

```
"https://maps.googleapis.com/maps/api/geocode/json?latlng=<LATITUDE>,<LONGITUDE> &key=<ENTER YOUR PLACE API KEY HEAR> 
```

使用该服务您可以从 Google place API 获取 JSON 格式的所有类型的地址

在您可以从 JSON 数据中找到所需的对象和值之后

我从那个 JSON 数据中给你 formatted_address

有以下代码使用纬度，经度获取位置地址

```
package clientpkg;

import java.net.URI;
import javax.ws.rs.client.Client;  
import javax.ws.rs.client.ClientBuilder;  
import javax.ws.rs.client.WebTarget;  
import javax.ws.rs.core.MediaType;  
import javax.ws.rs.core.UriBuilder;  
import org.glassfish.jersey.client.ClientConfig;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

public class MapAdd
{
    public static void main(String...aa)
    {
        try
        {
            System.out.println("Finding Address...\n");
            ClientConfig config = new ClientConfig();
            Client client = ClientBuilder.newClient(config);
            WebTarget target = client.target(getBaseURI());

            String jsonaddresss =  target.request().accept(MediaType.APPLICATION_JSON).get(String.class);

            String address = adres(jsonaddresss);

            System.out.println("Perfect Address is : >>"+address);

        }
        catch(Exception e)
        {
            System.out.println("Error"+e);
        }
    }

    private static URI getBaseURI()
    {
        return UriBuilder.fromUri("https://maps.googleapis.com/maps/api/geocode/json?latlng=32.263200,50.778187&key=<ENTER YOUR PLACE API KEY HEAR >").build();
    }
    private static String adres(String jsonaddresss)
    {
        try
        {
            JSONParser parser = new JSONParser();

            Object obj = parser.parse(jsonaddresss);
            JSONObject jsonObject = (JSONObject) obj;

            JSONArray msg = (JSONArray) jsonObject.get("results");

            //System.out.println("Message"+msg.get(1)); //Get Second Line Of Result

            JSONObject jobj = (JSONObject) parser.parse(msg.get(1).toString()); // Parsse it 

            String perfect_address = jobj.get("formatted_address").toString();

            jsonaddresss = perfect_address;
        }
        catch(Exception e)
        {
            jsonaddresss = "Error In Address"+e;
        }
        return jsonaddresss;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:47:47.310

Google 的[地理编码](https://developers.google.com/maps/documentation/geocoding)和[地点 API](https://developers.google.com/maps/documentation/places/)完全符合您的要求。

# python - 带有上下文的 Python 日志记录 - 传递密钥

> ID：12797199
> 
> 赞同：1
> 
> 时间：2012-10-09T09:45:39.520
> 
> 标签：python, logging, aop

我对 Python 相当陌生。我一直在修改我们现有的 python 模块以改进日志记录。我遇到了一个要求，即使用需要记录的特定键（上下文）以及进入和退出点来标记每个方法调用（和退出）。该密钥应该在根方法中生成并传递给进一步的方法调用。

我对我应该遵循的方法感到困惑。有没有办法在现有方法接口中动态插入额外的参数可能是使用 AOP 或注释？

或者我将这个问题改写为简短-

**如何将额外的参数传递给后续的方法调用？**

谢谢潘克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:52:07.850

如果您对所有这些方法都有一个记录器实例，也许您可​​以让根方法在输入时在记录器上设置上下文，并在退出时将其删除。

```
@contextlib.contextmanager
def setup_login(logger, context):
    old_name = logger.name
    logger.name = context
    yield
    logger.name = old_name 
```

根方法变为：

```
def root():
    context = compute_context()
    with setup_login(logger, context):
        # call other methods 
```

我使用`logger.name`了 ，但您可以使用 logger 的任何其他属性，或使用任何其他单例来共享全局状态。

# java - 使用什么从用户输入在 arrayList 中添加一系列整数

> ID：12797203
> 
> 赞同：3
> 
> 时间：2012-10-09T09:45:43.640
> 
> 标签：java, sockets, tcp, io, bufferedreader

我正在使用 Sockets 编写 Java 中的服务器客户端程序。

我要求用户输入一系列整数，将它们添加到 an 中`ArrayList`，然后使用 .将它们作为 Object 发送到服务器`ObjectOutputStream`。服务器然后接收对象。

我将对象解析为一个`ArrayList`，然后我使用一种方法来计算整数的最大数量，并将其作为字符串返回给客户端。

我`BufferedReader`用于用户输入

从某种意义上说，我需要的是关于如何：

检查用户输入，如果不是“ `Ok`”或按`Enter`

用户应该能够添加由**空格**分隔的数字。

如果然后他按 Enter 则应该退出循环并将数字添加到数组中

我到目前为止：

```
 BufferedReader integers = new BufferedReader(new InputStreamReader(System.in));
                        //  send int 1, for the Max number option
                        pw.println(option);
                        System.out.println(br.readLine());
                        String x = integers.readLine();
                        if(integers!=null){

                            readInt(integers);

                    }

                        objectOut = new ObjectOutputStream(client.getOutputStream());
                        objectOut.writeObject(maxNum);
                        objectOut.flush();
                        System.out.println(br.readLine());
                        objectOut.close();
                        break; 
```

读入方法：

```
public static int readInt(BufferedReader stdIn) {
        while (true) {
            try {
                String line = stdIn.readLine();
                int value = Integer.parseInt(line);
                return value;
            } catch (java.lang.NumberFormatException e) {
                ;
            } catch (IOException e) {
                ;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:55:03.723

你可以更好地处理这个问题`Scanner`。`BufferedReader`相当陈旧且已弃用。

```
List<Integer> seriesOfInt = new ArrayList<>();

while (scanner.hasNextInt()) {
    seriesOfInt.add(scanner.nextInt());
} 
```

或者，如果用户在一行中输入所有这些数字，它们之间有一些分隔符，比如空格 ( `)，您可以拆分输入并存储在 ArrayList 中。`

 ````
if (scanner.hasNext()) {
    List<String> seriesOfIntString = Arrays.asList(scanner.next().split(" "));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:55:35.297

不确定我是否理解你的问题。你在寻找类似[split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)的东西吗？使用此方法，您可以按任何字符拆分输入，在您的情况下`" "` ，它将返回一个字符串数组，然后您可以将其添加到您的 ArrayList 中。`

# android - ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent)

> ID：12797205
> 
> 赞同：1
> 
> 时间：2012-10-09T09:45:46.727
> 
> 标签：android

我收到这个错误**ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2585**当我开始一个意图

```
public class SingleMenuItemActivity  extends Activity {

TextView lblName;
TextView lblyest;
TextView lbltoday;
TextView lblHigh;
TextView lblLow;
TextView lblChange;
TextView lblPcchange;

String name,yesterday,today,high,low,change,pcchange;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
     setContentView(R.layout.single_list_item);

      lblName = (TextView) findViewById(R.id.name);
         lblyest = (TextView) findViewById(R.id.yesterday);
         lbltoday = (TextView) findViewById(R.id.today);
         lblHigh = (TextView) findViewById(R.id.high);
         lblLow = (TextView) findViewById(R.id.low);
         lblChange = (TextView) findViewById(R.id.change);
         lblPcchange = (TextView) findViewById(R.id.pcchange);  

         Intent in = getIntent();
         name = in.getStringExtra("name");;
         yesterday = in.getStringExtra("yesterday");
         today =in.getStringExtra("today");
         high =in.getStringExtra("high");
         low = in.getStringExtra("low");
         change = in.getStringExtra("change");
         pcchange =in.getStringExtra("pcchange");

      //Error doesnt happen when the lines below are commented
        lblName.setText((CharSequence)name.toString());
        lblyest.setText(yesterday.toString());
        lbltoday.setText(today.toString());
        lblHigh.setText(high.toString());
        lblLow.setText(low.toString());
        lblChange.setText(change.toString());
        lblPcchange.setText(pcchange.toString());  

} 
```

}

我知道当我执行 settext() 函数时会触发错误，但我不知道如何修复它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:51:31.547

您正在设置变量 lblName 和所有这些变量，以包含所有子视图的......但您是在类级别进行的。在布局膨胀之前不会创建这些视图，在读取的行中 `setContentView(R.layout.single_list_item);`

，所以所有这些变量都设置为空。

在 setContentView() 调用之后设置变量，看看它是如何进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:49:34.143

试试这个代码。

```
public class SingleMenuItemActivity  extends Activity {

    TextView lblName;
    TextView lblyest;
    TextView lbltoday;
    TextView lblHigh;
    TextView lblLow;
    TextView lblChange;
    TextView lblPcchange;

    String name, yesterday, today, high, low, change, pcchange;

    @Override
    protected void onCreate (Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate( savedInstanceState );
        setContentView( R.layout.single_list_item );
        Intent in = getIntent();

        name = in.getStringExtra( "name" );
        ;
        yesterday = in.getStringExtra( "yesterday" );
        today = in.getStringExtra( "today" );
        high = in.getStringExtra( "high" );
        low = in.getStringExtra( "low" );
        change = in.getStringExtra( "change" );
        pcchange = in.getStringExtra( "pcchange" );

        lblName = (TextView) findViewById( R.id.name );
        lblyest = (TextView) findViewById( R.id.yesterday );
        lbltoday = (TextView) findViewById( R.id.today );
        lblHigh = (TextView) findViewById( R.id.high );
        lblLow = (TextView) findViewById( R.id.low );
        lblChange = (TextView) findViewById( R.id.change );
        lblPcchange = (TextView) findViewById( R.id.pcchange );

        lblName.setText( (CharSequence) name.toString() );
      /*  lblyest.setText(yesterday.toString());
        lbltoday.setText(today.toString());
        lblHigh.setText(high.toString());
        lblLow.setText(low.toString());
        lblChange.setText(change.toString());
        lblPcchange.setText(pcchange.toString());  */

    }

} 
```

实际上，您不能在 setContentView() 调用之前初始化视图。这就是为什么，你得到这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:50:04.273

将这些行移到后面`setContentView(R.layout.single_list_item);`

```
TextView lblName = (TextView) findViewById(R.id.name);
TextView lblyest = (TextView) findViewById(R.id.yesterday);
TextView lbltoday = (TextView) findViewById(R.id.today);
TextView lblHigh = (TextView) findViewById(R.id.high);
TextView lblLow = (TextView) findViewById(R.id.low);
TextView lblChange = (TextView) findViewById(R.id.change);
TextView lblPcchange = (TextView) findViewById(R.id.pcchange); 
```

# javascript - 如何使用 $route 和 $routeParams 更新 Angular js 中的 url？

> ID：12797211
> 
> 赞同：12
> 
> 时间：2012-10-09T09:46:01.187
> 
> 标签：javascript, angularjs

如何重定向或更新网址？我找不到任何关于此的好的文档。基本上，我想做的是动态更改 $routeParams 并使用新值更新 url。

我的代码如下所示：

```
if ($routeParams.time) {
        var url;
        $routeParams.time = encodeURIComponent(value);
        url = '/' + $routeParams.time + '/' + 'marketing/networks';
        $location.path(url);
    } else {
        $routeParams.time = encodeURIComponent(value);
        url =  '/' + $routeParams.time + $location.path();
        $location.path(url);
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T09:52:55.193

**在阅读了我的答案的评论后，我认为这可能不是这个案例的正确答案。请在使用此解决方案之前阅读评论和其他答案。我不再使用 Angular，所以我觉得没有资格回答。**

**我在下面未修改原始答案：**

您正在正确更改位置，但 AngularJS 并没有意识到它已更改。您可以使用范围的“$apply”方法解决问题，如下所示：

```
$location.path( url );
$scope.$apply(); 
```

或者像这样：

```
$scope.$apply( $location.path( url ) ); 
```

在此处查看 $apply 文档[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope](http://docs.angularjs.org/api/ng.$rootScope.Scope)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T21:47:54.287

`$window.location.href`根据[http://docs.angularjs.org/guide/dev_guide.services.$location](https://docs.angularjs.org/api/ng/service/$location) (in `Caveats`section) ，您可能想尝试使用本机浏览器对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-04T18:01:37.613

你应该使用[https://angular-ui.github.io/](https://angular-ui.github.io/)

ui路由器

使用此功能时，您可以...

state.go("路由名称", {id:4});

比内置的路由服务好得多

投票最多的答案令人担忧！

# android - 标签活动上的android自定义对话框

> ID：12797213
> 
> 赞同：0
> 
> 时间：2012-10-09T09:46:09.013
> 
> 标签：android, dialog, customdialog

我有一个名为“tabActivity”的选项卡活动，在选项卡活动中我想要一个按钮“butDetail”在“saveImageActivity”来显示一个自定义对话框“detail.xml”。这是我显示对话框的代码

```
public void butDetail(View v){
    final Dialog dialog = new Dialog(saveImageActivity.this);
    dialog.setContentView(R.layout.detail);
    dialog.setTitle("Detail Image");
    TextView filepath = (TextView)findViewById(R.id.txtfilepath);
    TextView resolution = (TextView)findViewById(R.id.txtresolution);
    filepath.setText("File Path : ");
    resolution.setText("Resolution : ");
    dialog.setCancelable(true);
    dialog.show();
} 
```

为什么如果我添加“文件路径”和“分辨率”它总是给出“java.lang.NullPointerException”，如果我删除这两个变量，对话框就会出现，，这种情况的任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:47:56.210

使用以下代码：

```
TextView filepath = (TextView)dialog.findViewById(R.id.txtfilepath);
TextView resolution = (TextView)dialog.findViewById(R.id.txtresolution); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:56:39.807

使用此代码

```
 private void showDiaalog() {
            final Dialog dialog = new Dialog(Context);
            dialog.requestWindowFeature(dialog.getWindow().FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.layoutfile);

            dialog.setCancelable(true);
            btnok = (Button) dialog.findViewById(R.id.btnOk);

            btnok.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {

                        //some thing else
                    }

                }
            });
            Button btnCancel = (Button) dialog.findViewById(R.id.btncancel);

            btnCancel.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {

                    dialog.dismiss();
                }
            });

            dialog.show();
        } 
```

# php - 提交表单时用 PHP 发送电子邮件

> ID：12797214
> 
> 赞同：0
> 
> 时间：2012-10-09T09:46:11.540
> 
> 标签：php, html, email

我有这个表格的代码

```
 <?php
    session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Register</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<center><table width="1074" height="768" border="0" cellspacing="5" cellpadding="10" div style="width: 1065; height: *px; background:#FFFFFF;">
<tr>
<td bgcolor="#88bbdd">
<body>
<?php
    if( isset($_SESSION['ERRMSG_ARR']) && is_array($_SESSION['ERRMSG_ARR']) && count($_SESSION['ERRMSG_ARR']) >0 ) {
        echo '<ul class="err">';
        foreach($_SESSION['ERRMSG_ARR'] as $msg) {
            echo '<li>',$msg,'</li>'; 
        }
        echo '</ul>';
        unset($_SESSION['ERRMSG_ARR']);
    }
?>
<div align="center">
<table>
<form id="registerForm" name="registerForm" method="post" action="register-exec.php">
<tr>
<td><div align="left">*First Name           <td><input name="fname" type="text" class="textfield" id="fname" /></div>
<tr>
<td><div align="left">*Last Name        <td><input name="lname" type="text" class="textfield" id="lname" /></div>
<tr>
<td><div align="left">*Email Address    <td><input name="login" type="text" class="textfield" id="login" /></div>
<tr>
<td><div align="left">*Password     <td><input name="password" type="password" class="textfield" id="password" /></div>
<tr>
<td><div align="left">*Confirm Password <td><input name="cpassword" type="password" class="textfield" id="cpassword" /></div> 
</tr>
</table>
<br><br>
<input type="submit" name="Submit" value="Register" />  
</form>
<br><br>* Indicates a Required Field
</div>
</td>
</tr>
</table>
</body>
</html> 
```

然后那个表单运行这个 PHP

```
<?php
// multiple recipients
$to  = $login;

// subject
$subject = 'Subject';

// message
$message = '
<html>
<head>
  <title>Email</title>
</head>
<body>
  <p>Content</p> 
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: $fname $lname. "\r\n";
$headers .= 'From: email@mydomain.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?>

    <?php
        //Start session
        session_start();

        //Include database connection details
        require_once('config.php');

        //Array to store validation errors
        $errmsg_arr = array();

        //Validation error flag
        $errflag = false;

        //Connect to mysql server
        $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
        if(!$link) {
            die('Failed to connect to server: ' . mysql_error());
        }

        //Select database
        $db = mysql_select_db(DB_DATABASE);
        if(!$db) {
            die("Unable to select database");
        }

        //Function to sanitize values received from the form. Prevents SQL injection
        function clean($str) {
            $str = @trim($str);
            if(get_magic_quotes_gpc()) {
                $str = stripslashes($str);
            }
            return mysql_real_escape_string($str);
        }

        //Sanitize the POST values
        $fname = clean($_POST['fname']);
        $lname = clean($_POST['lname']);
        $login = clean($_POST['login']);
        $password = clean($_POST['password']);
        $cpassword = clean($_POST['cpassword']);

        //Input Validations
        if($fname == '') {
            $errmsg_arr[] = 'First name missing';
            $errflag = true;
        }
        if($lname == '') {
            $errmsg_arr[] = 'Last name missing';
            $errflag = true;
        }
        if($login == '') {
            $errmsg_arr[] = 'Email Address missing';
            $errflag = true;
        }
        if($password == '') {
            $errmsg_arr[] = 'Password missing';
            $errflag = true;
        }
        if($cpassword == '') {
            $errmsg_arr[] = 'Confirm password missing';
            $errflag = true;
        }
        if( strcmp($password, $cpassword) != 0 ) {
            $errmsg_arr[] = 'Passwords do not match';
            $errflag = true;
        }

        //Check for duplicate login ID
        if($login != '') {
            $qry = "SELECT * FROM members WHERE login='$login'";
            $result = mysql_query($qry);
            if($result) {
                if(mysql_num_rows($result) > 0) {
                    $errmsg_arr[] = 'Login ID already in use';
                    $errflag = true;
                }
                @mysql_free_result($result);
            }
            else {
                die("Query failed");
            }
        }

        //If there are input validations, redirect back to the registration form
        if($errflag) {
            $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
            session_write_close();
            header("location: register-form.php");
            exit();
        }

        //Create INSERT query
        $qry = "INSERT INTO members(firstname, lastname, login, passwd) VALUES('$fname','$lname','$login','".md5($_POST['password'])."')";
        $result = @mysql_query($qry);

        //Check whether the query was successful or not
        if($result) {
            header("location: register-success.php");
            exit();
        }else {
            die("Query failed");
        }

    ?> 
```

我想要它做的是当有人注册时，他们会收到一封电子邮件，说欢迎。这不起作用我正在尝试将“收件人”更改为他们在表单中提交的电子邮件地址。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:39:44.450

**披露：我是 AlphaMail 背后的开发者之一**

我建议您使用事务性电子邮件服务，例如：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   邮筒
*   发送网格

**为什么？**

*   您不必过多考虑电子邮件传递。
*   统计数据。让您跟踪总发送/点击/打开/退回。
*   通常基于 Web 服务而不是 SMTP。即更容易处理。
*   更简洁的代码（至少如果您使用 AlphaMail 将数据与表示分离）。
*   可扩展且面向未来。

如果您选择使用 AlphaMail，您可以使用[AlphaMail PHP-client](https://github.com/comfirm/alphamail-php5-client)。

**例子：**

```
include_once("comfirm.alphamail.client/emailservice.class.php");

$email_service = AlphaMailEmailService::create()
    ->setServiceUrl("http://api.amail.io/v1")
    ->setApiToken("YOUR-ACCOUNT-API-TOKEN-HERE");

$person = new stdClass();
$person->userId = "1234";
$person->firstName = "John";
$person->lastName = "Doe";
$person->dateOfBirth = 1975;

$response = $email_service->queue(EmailMessagePayload::create()
    ->setProjectId(12345) // Your AlphaMail project (determines template, options, etc)
    ->setSender(new EmailContact("Sender Company Name", "from@example.com"))
    ->setReceiver(new EmailContact("Joe Doe", "to@example.org"))
    ->setBodyObject($person) // Any serializable object
); 
```

AlphaMail 的另一个优点是您可以直接在[AlphaMail Dashboard](http://amail.io/login.php)中编辑您的模板，并且您可以使用[Comlang 模板语言](http://docs.amail.io/?section=comlang)来格式化您的电子邮件。

```
<html>
    <body>
        <b>Name:</b> <# payload.firstName " " payload.lastName #><br>
        <b>Date of Birth:</b> <# payload.dateOfBirth #><br>

        <# if (payload.userId != null) { #>
            <a href="/sign-up">Sign Up Free!</a>
        <# } else { #>
            <a href="/login?id=<# payload.userId #>">Sign In</a>
        <# } #>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:59:29.633

使用 gmail 作为您的邮件服务器。

```
require_once('class.phpmailer.php');
include_once('class.smtp.php');
$mail = new PHPMailer(); // defaults to using php "mail()"
$body = "<html></html>"; //html stuff
$mail->IsSMTP();
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the server
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port
$mail->Username   = "id@gmail.com";  // GMAIL username
$mail->Password   = "password";            // GMAIL password
$mail->From       = "id@gmail.com";
$mail->FromName   = "Admin";
$mail->Subject    = "Welcome";
$mail->WordWrap   = 50; // set word wrap
$mail->AddReplyTo("id@gmail.com","Admin");
$mail->AddAddress($email_id); //receiver's id
$mail->IsHTML(true); // send as HTML
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; 
$mail->MsgHTML($body);

if(!$mail->Send()){
  $msg = "Mailer Error: ".$mail->ErrorInfo;
  header("Location: http://{$_SERVER['HTTP_HOST']}/site/index.php?msg=$msg");
}else{
    $msg="Message sent successfully!";
    header("Location: http://{$_SERVER['HTTP_HOST']}/site/index.php?msg=$msg");
} 
```

下载[class.phpmailer.php](http://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.phpmailer.php)和[class.smtp.php](http://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.smtp.php?r=7)并将它们保存在您的根目录中

**编辑：**

在 register-exec.php 中，

```
$to  = $_POST['login'];
$name = $_POST['fname'];
$password = $_POST['password']; // you've given the name as 'password' in your form 
```

您可以使用这些变量..like

```
$body = "<div>Hi '.$name.'!<br>Your id:'.$to.',<br>Your Password:'.$password.'</div>"; 
```

# c# - Oracle 9i 存储过程 XML 类型输入参数

> ID：12797217
> 
> 赞同：1
> 
> 时间：2012-10-09T09:46:17.787
> 
> 标签：c#, stored-procedures, oracle9i

我正在尝试将 XML 类型传递给 Oracle 9i 中的存储过程。它应该做的就是从节点中提取一个值并返回它，但它不是返回值。任何人都可以建议吗？

```
XMLString = "<?xml version='1.0' encoding='utf-8' ?>";
XMLString += "<Document>";
XMLString += "<DocumentType>WorkOrder</DocumentType>";
XMLString += "<DocumentAction>Create</DocumentAction>";
XMLString += "<WorkOrder>";
XMLString += "<WO>123456</WO>";
XMLString += "<WOTask>1</WOTask>";
XMLString += "</WorkOrder>";
XMLString += "</Document>";

oraCon.ConnectionString = s_connectionString;
oraCon.Open();
oraCommand.CommandType = CommandType.StoredProcedure;
oraCommand.CommandText = "LOUISETEST.GetActionType";
oraCommand.Connection = oraCon;
oraCommand.Parameters.Add("xml_document_i", OracleDbType.XmlType, XMLString, ParameterDirection.Input);
oraCommand.Parameters.Add("action_i", OracleDbType.Varchar2, result, ParameterDirection.Output);
oraCommand.ExecuteNonQuery();

Console.WriteLine("Result : "+result.ToString()); 
```

存储过程如下：

```
 PROCEDURE GetActionType       
    (
    xml_document_i        IN XMLTYPE
    ,action_i          OUT VARCHAR2
    )
     AS
  BEGIN
      SELECT xml_document_i.Extract('/DocumentAction/text()').getstringval() INTO action_i
      FROM TABLE (XMLSEQUENCE (xml_document_i.EXTRACT ('/Document') ) ) ;
  END GetActionType; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:40:22.023

我通过以下方式解决了这个问题：

```
 //XMLString = "<?xml version='1.0' encoding='utf-8' ?>";
            XMLString += "<Document>";
            XMLString += "<DocumentType>WO</DocumentType>";
            XMLString += "<DocumentAction>Create</DocumentAction>";
            XMLString += "<WorkOrder>";
            XMLString += "<WO>123456</WO>";
            XMLString += "<WOTask>1</WOTask>";
            XMLString += "</WorkOrder>";
            XMLString += "</Document>";

            Console.WriteLine(XMLString.ToString());

            oraCon.ConnectionString = s_connectionString;
            oraCon.Open();
            oraCommand.CommandType = CommandType.StoredProcedure;
            oraCommand.CommandText = "LOUISETEST.GetActionType";
            oraCommand.Connection = oraCon;
            oraCommand.Parameters.Add("xml_document_i", OracleDbType.XmlType, XMLString, ParameterDirection.Input);

            OracleParameter result = new OracleParameter();
            result.ParameterName = "action_i";
            result.Direction = ParameterDirection.Output;
            result.OracleDbType = OracleDbType.Varchar2;
            result.Size = 256;
            oraCommand.Parameters.Add(result);

            oraCommand.ExecuteNonQuery();

            Console.WriteLine("Result : " + result.Value.ToString()); 
```

并使用以下 SP：

```
PROCEDURE GetActionType        
    ( 
    xml_document_i        IN XMLTYPE
    ,action_i             OUT VARCHAR2
    ) 
     AS 
     v_name      VARCHAR2(256);
  BEGIN   

  v_name := xml_document_i.extract('/Document/DocumentAction/text()').getStringVal();    
  SELECT v_name INTO action_i FROM dual;

  END GetActionType; 
```

# java - 对要打印的对象属性的自省

> ID：12797218
> 
> 赞同：0
> 
> 时间：2012-10-09T09:46:29.177
> 
> 标签：java, reflection, introspection

我抓住了这段代码：

```
ClassABC abc = new ClassABC();
for (Field field : abc.getClass().getDeclaredFields()) {
    field.setAccessible(true);
    String name = field.getName();
    Object value = field.get(abc);
    System.out.printf("Field name: %s, Field value: %s%n", name, value);
} 
```

[从这个问题](https://stackoverflow.com/questions/3217603/how-to-print-values-of-an-object-in-java-when-you-do-not-have-the-source-code-fo)

但是我想要一些可以从活动对象而不是类中获取属性的东西。我知道我需要自省我只是不确定如何从活动对象中获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:50:48.433

这：

```
Object value = field.get(abc); 
```

从 abc 引用的实例化对象中获取值。

您只能自省类，然后使用提供的字段和方法与实例化对象进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:50:12.287

> 类具有属性/属性，对象是一种状态，它只有这些属性的值。

```
ClassABC abc = new ClassABC(); 
```

上面的声明你创建了 ClassABC 类的对象。

```
Object value = field.get(abc); 
```

`field.get(abc)`将为您返回 object 的字段值`abc`。这样，您可以在运行时对 Object 的属性值进行自省。

[#Field.get()](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)

> 返回指定对象上此字段表示的字段的值。如果该值具有原始类型，则该值会自动包装在对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:05:46.793

> 但是我想要一些可以从活动对象而不是类中获取属性的东西。

“实时”对象是某个类的实例，该类将确定该对象具有哪些字段。您问题中的代码完全符合您的要求。

（Java 不允许您即时向对象添加新字段/属性……例如 Javascript、Python、Ruby 等语言。）

# objective-c - 目标 C：带块的类初始化？

> ID：12797222
> 
> 赞同：5
> 
> 时间：2012-10-09T09:46:45.090
> 
> 标签：objective-c, ios, objective-c-blocks

是否可以在视图控制器的 init 方法中使用块作为完成处理程序，以便父视图控制器能够在块中填写详细信息，而无需创建自定义 initWithNibName:andResourceBundle:andThis:andThat:对于每个可能的属性？

```
// ... in the didSelectRowAtIndexPath method of the main view controller :
SubViewController *subviewController = [[SubViewController alloc] initWithNibName:nil bundle:nil completionHandler:^(SubViewController * vc) {
    vc.property1 = NO;
    vc.property2 = [NSArray array];
    vc.property3 = SomeEnumValue;
    vc.delegate = self;
}];
[self.navigationController pushViewController:subviewController animated:YES];
[subviewController release]; 
```

在 SubViewController.m 中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil completionHandler:(void (^)(id newObj))block {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        block(self);
    }
    return self;
} 
```

代替

```
// ... in the didSelectRowAtIndexPath method of the main view controller :
SubViewController *subviewController = [[SubViewController alloc] initWithNibName:nil bundle:nil andProperty1:NO andProperty2:[NSArray array] andProperty3:SomeEnumValue andDelegate:self];
[self.navigationController pushViewController:subviewController animated:YES];
[subviewController release]; 
```

和

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andProperty1:(BOOL)p1 andProperty2:(NSArray *)p2 andProperty3:(enum SomeEnum)p3 andDelegate:(id<MyDelegateProtocol>)myDelegate {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
       self.property1 = p1;
       self.property2 = p2;
       self.property3 = p3;
       self.delegate = myDelegate;
    }
    return self;
} 
```

这样我就可以在主控制器中做任何我想做的事情，而不是调用预定义的 init 方法（并且必须为每个可能的初始化编写一个）。

有什么不好的吗？会有保留周期吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:19:43.937

您认为使用块有哪些优势？初始化器通常用于设置实例的*私有*状态。由于该块是在其他地方实现的，因此无法从该块访问此私有状态。

如果您只使用公共属性，为什么不在初始化后设置它们？

```
SubViewController *vc = [[SubViewController alloc] initWithNibName:nil bundle:nil];
vc.property1 = NO;
vc.property2 = [NSArray array];
vc.property3 = SomeEnumValue;
vc.delegate = self; 
```

这正是块版本所做的（没有麻烦）。

> 有什么不好的吗？会有保留周期吗？

不，但出于架构原因，我会驳回您的提议：您要么破坏了类的封装，要么没有获得任何优势，而不是仅仅在初始化后执行块所做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:06:15.650

问题是：

1.  这种方式有什么好处？
2.  你能有效地管理这段代码吗？

* * *

请注意，当程序增长时，将添加新的调用级别，这将使您的代码难以阅读、维护、扩展或开发。还要考虑未来的子类化以及将来如何调试此代码以找到一些不匹配的值。块可以让你的代码更快，而委托模式会让你的代码干净并在一个线程中运行，将来易于维护，这对于专业程序员来说是真正的价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:03:37.700

你可以定义你的

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil completionHandler:(void (^)(id newObj))block; 
```

类别中的方法`UIViewController`；从那里你会调用`initWithNib`，然后在刚刚分配的上执行你的完成块`self`：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil completionHandler:(void (^)(id newObj))block
{
    if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
        block(self);
    }
    return self;
} 
```

我认为这应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:21:01.967

这是可能的，没有`retain`问题。一切都将在同一个线程上同步调用。

**但是** 不这样做的简单方法有什么好处 - 之后调用另一个方法`init`，例如

```
MyController* controller = [[[MyController alloc] init] autorelease];
[self updateController:controller]; 
```

代码是否已从`init`方法中调用？

一般来说，`init...`如果您想以不同的方式初始化对象，我建议创建单独的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T10:24:04.557

我真的不确定你为什么会采取这种方法（除非你想引起 OOD 警察的注意）。[这不是一个好主意](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)。

您的控制器可以定义一个返回实例的函数或方法，而是按照它想要的方式进行初始化。

# javascript - 使用 jQuery 获取滚动底部

> ID：12797224
> 
> 赞同：3
> 
> 时间：2012-10-09T09:46:51.047
> 
> 标签：javascript, jquery

我有以下代码获取用户从顶部和底部滚动的量，然后使用这些值它应该隐藏或显示阴影。

```
$(document).ready(function() {

    if ( $(window).scrollTop() + $(window).height() >= $(window).height() ) {
        $('div.shadow-bottom').show();
    }

    $(window).scroll(function () {

        if ( $(window).scrollTop() >= 15 ) {
            $('div.shadow-top').show();
        } else {
            $('div.shadow-top').hide();
        }
        if ( $(window).scrollTop() + $(window).height() >= $(window).height() - 15 ) {
            $('div.shadow-bottom').show();
        } else {
            $('div.shadow-bottom').hide();
        }

    });

}); 
```

顶部工作正常，但是当您到达页面底部时，底部应该隐藏，但如果您距离底部 15 像素，则再次显示。

示例：[http ://dev.driz.co.uk/shadow/](http://dev.driz.co.uk/shadow/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:24:46.327

$(窗口).height(); // 返回浏览器视口的高度

$(文档).height(); // 返回 HTML 文档的高度

将您的代码更改为：

```
$(document).ready(function() {

 if ($(window).scrollTop() + $(window).height() >= $(document).height() - 15) {
    $('div.shadow-bottom').show();
 }

 $(window).scroll(function() {

    if ($(window).scrollTop() >= 15) {
        $('div.shadow-top').show();
    } else {
        $('div.shadow-top').hide();
    }
    if ($(window).scrollTop() + $(window).height() >= $(document).height() - 15) {
        $('div.shadow-bottom').show();
    } else {
        $('div.shadow-bottom').hide();
    }

 });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:45:41.970

正确的工作示例是：

```
$(document).ready(function() {

             if ($(window).height() < $(document).height()) {
                $('div.shadow-bottom').show();
             }

             $(window).scroll(function() {

                if ($(window).scrollTop() >= 15) {
                    $('div.shadow-top').show();
                } else {
                    $('div.shadow-top').hide();
                }
                if ($(window).scrollTop() + $(window).height() >= $(document).height() - 15) {
                    $('div.shadow-bottom').hide();
                } else {
                    $('div.shadow-bottom').show();
                }

             });

            }); 
```

这是基于上面bhb的回答。

# linux - Linux，在一台主机上编译一段代码，在另一台主机上运行？

> ID：12797227
> 
> 赞同：2
> 
> 时间：2012-10-09T09:47:02.350
> 
> 标签：linux, cross-compiling, abi

代码是c/c++编写的，可能依赖于编译主机中的一些库；它应该在另一个没有库的主机上运行，​​具体取决于问题。两台主机都是linux，可能有不同的版本。你有好的策略吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:13:04.723

[不鼓励](https://stackoverflow.com/questions/3430400/linux-static-linking-is-dead%20discouraged)在 Linux 上进行纯静态链接，只有在使用 C++ 无法选择的替代 libc（例如dietlibc）时才有可能，我[最喜欢](https://stackoverflow.com/questions/4032373/linking-against-an-old-version-of-libc-to-provide-greater-application-coverage%20favoured)的方法是在您必须支持的最旧版本的 Linux 上构建应用程序因为较新的 libc 版本将具有向后兼容性。

这将仅涵盖 libc，其他要求，例如 gtk、pangom 等必须直接编译到您的二进制文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:50:33.577

静态链接应用程序，使其依赖尽可能少的动态加载库。这是这个问题的一般解决方案。

其他解决方案包括：

*   随应用程序提供所需的库，并覆盖系统`LD_LIBRARY_PATH`变量以使包含的版本成为首选版本。
*   编写代码以动态加载使用`dlopen()`和朋友的库，并手动处理库版本的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:13:59.433

大多数平台都有定义明确的 ABI，涵盖 C 代码，但涵盖 C++ 功能的 ABI 还不常见。

仅使用 libc 用 c++ 编写的程序可能无法在其他平台上运行。如果二进制兼容性是一个重要问题，请考虑使用 c。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:06:57.070

考虑这个问题的所有答案（静态链接、在最旧的 Linux 上编译等），然后通过[Linux App Checker](http://www.linuxfoundation.org/collaborate/workgroups/lsb/all-about-linux-application-checker)检查您的最终二进制文件，以显示与其他 Linux 发行版的兼容性问题。

[![在此处输入图像描述](../Images/d1cde4fd6f32970e433d4d0c317b804f.png)](https://i.stack.imgur.com/u4T7O.jpg)

# antlr - 如何获取 Lexer 规则的文本

> ID：12797232
> 
> 赞同：1
> 
> 时间：2012-10-09T09:47:20.373
> 
> 标签：antlr, antlr3, antlrworks

我有一个像这样的 Antlr Grammar Lexer Rule，

```
Letter
    :  '\u0024' | '\u005f'|
       '\u0041'..'\u005a' | '\u0061'..'\u007a' | 
       '\u00c0'..'\u00d6' | '\u00d8'..'\u00f6' | 
       '\u00f8'..'\u00ff' | '\u0100'..'\u1fff' | 
       '\u3040'..'\u318f' | '\u3300'..'\u337f' | 
       '\u3400'..'\u3d2d' | '\u4e00'..'\u9fff' | 
       '\uf900'..'\ufaff'
    ;

Name : Letter (Letter | '0'..'9' | '.' | '-')*; 
```

我想获取名称的字符串值。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:53:30.623

### 从解析器规则：

```
rule
 : Name {String s = $Name.text; System.out.println(s);}
 ; 
```

或者

```
rule
 : n=Name {String s = $n.text; System.out.println(s);}
 ; 
```

### 从词法分析器规则本身：

```
Name 
 : Letter (Letter | '0'..'9' | '.' | '-')*
   {String s = $text; System.out.println(s);}
 ; 
```

# c# - 在 C# 中使用 WebRequests 登录 YouTube

> ID：12797238
> 
> 赞同：4
> 
> 时间：2012-10-09T09:47:36.117
> 
> 标签：c#, login, youtube

我对在 C# 中使用 WebRequests 还很陌生，希望有人帮助我登录 YouTube 并将 cookie 存储到 cookie 容器中。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:52:15.600

如果您使用的是 .NET 客户端库 (http://code.google.com/p/google-gdata/)，那么它将在需要时使用您提供的凭据为您进行身份验证：

[https://developers.google.com/youtube/2.0/developers_guide_dotnet#Authentication](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Authentication)

**C#中的GData**

使用 GData API 时，没有明确的注销方法，您可以使您的令牌无效，但如果您不使用它，它也会在一段时间后过期。关于如何使令牌失效的具体细节根据所采用的身份验证机制（OAuth、AuthSub、ClientLogin）而有所不同。

您也可以参考 CodeProject 上的这篇文章，[使用 C# 和 Youtube API 1.6 管理 YouTube](http://www.codeproject.com/Articles/143669/Manage-YouTube-using-C-and-Youtube-API-1-6)

```
YouTubeService service = new YouTubeService();
service.setUserCredentials(txtUser.Text , txtPassword.Text);
try { service.QueryClientLoginToken(); }
catch(System.Net.WebException e) { MessageBox.Show(e.Message); } 
```

**补充：**我已经调整了下面的代码以满足您的要求。

```
class YouTube
{
    public void Login()
    {
        HttpWebRequest request = GetNewRequest("https://accounts.google.com/ServiceLoginAuth", cookies);
        request.Referer = "https://accounts.google.com/ServiceLogin?passive=true&continue=https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F&uilel=3&hl=en_US&service=youtube";
        request.Host = "accounts.google.com";
        Dictionary<string, string> parameters = new Dictionary<string, string>{
            {"continue","https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F"},
            {"service","youtube"},{"uilel","3"},{"dsh","157212168103955870"},{"hl","en_US"},
            {"GALX","PTqcwpZb2aE"},{"pstMsg","1"},{"dnConn",""}, {"checkConnection","youtube%3A248%3A1"}, 
            {"checkedDomains","youtube"}, {"timeStmp",""}, {"secTok",""}, {"Email","username"}, {"Passwd","password"}, 
            {"signIn","Sign+in"}, {"PersistentCookie","yes"}, {"rmShown","1"}};
        HttpWebResponse response = MakeRequest(request, cookies, parameters);
        response.Close();
    }

    private static CookieContainer cookies = new CookieContainer();

    private static HttpWebRequest GetNewRequest(string targetUrl, CookieContainer SessionCookieContainer)
    {
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUrl);
        request.CookieContainer = SessionCookieContainer;
        request.AllowAutoRedirect = false;
        return request;
    }

    private static HttpWebResponse MakeRequest(HttpWebRequest request, CookieContainer SessionCookieContainer, Dictionary<string, string> parameters = null)
    {
        request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5Accept: */*";
        request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        request.CookieContainer = SessionCookieContainer;
        request.AllowAutoRedirect = false;

        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        string postData = string.Empty;
        foreach (KeyValuePair<String, String> parametro in parameters)
        {
            if (postData.Length == 0)                
                postData += String.Format("{0}={1}", parametro.Key, parametro.Value);                
            else                
                postData += String.Format("&{0}={1}", parametro.Key, parametro.Value);                
        }

        byte[] postBuffer = UTF8Encoding.UTF8.GetBytes(postData);
        using (Stream postStream = request.GetRequestStream())
        {
            postStream.Write(postBuffer, 0, postBuffer.Length);
        }

        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        SessionCookieContainer.Add(response.Cookies);

        while (response.StatusCode == HttpStatusCode.Found)
        {
            response.Close();
            request = GetNewRequest(response.Headers["Location"], SessionCookieContainer);
            response = (HttpWebResponse)request.GetResponse();
            SessionCookieContainer.Add(response.Cookies);
        }
        return response;
    }
} 
```

参考：[http ://social.msdn.microsoft.com/Forums/pl-PL/ncl/thread/40d249b5-a9ad-4068-8853-629fb20584a0](http://social.msdn.microsoft.com/Forums/pl-PL/ncl/thread/40d249b5-a9ad-4068-8853-629fb20584a0)

# javascript - 在选择菜单中添加 optgroup

> ID：12797241
> 
> 赞同：3
> 
> 时间：2012-10-09T09:47:45.413
> 
> 标签：javascript, jquery

我有一个 jQuery 代码，它将`select`从`ul li menu`. 我想`optgroup`从父菜单添加，但不知道如何。这是我的代码：

```
// Create the dropdown base
jQuery("<select />").appendTo("#module-menu");

// Create default option "Go to..."
jQuery("<option />", {
    "selected": "selected",
    "value"   : "",
    "text"    : "Go to..."
}).appendTo("#module-menu select");

// Populate dropdown with menu items
jQuery("#menu a").each(function() {
    var el = jQuery(this);
    jQuery("<option />", {
        "value"   : el.attr("href"),
        "text"    : el.text()
 }).appendTo("#module-menu select");
});
jQuery("#module-menu select").change(function() {
    window.location = jQuery(this).find("option:selected").val();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:56:54.047

```
$('#parent')
    .append($('<select>')
        .append($('<optgroup>')
            .prop('label', 'group 1')
            .append($('<option>')
                .text('option 1'))));​ 
```

[这里的例子。](http://jsfiddle.net/Tk5Cs/)

[另一个从 ul 获取数据的例子。](http://jsfiddle.net/Tk5Cs/1/)代码：

```
var sel = $('<select>');
$('#parent').append(sel);

$('#menu>li').each(function()
{
    var group = $('<optgroup>')
        .prop('label', $(this).find('>span').text());
    sel.append(group);

    $(this).find('ul>li').each(function()
    {
        var opt = $('<option>')
            .text($(this).find('>span').text());
        group.append(opt);
    });
});​ 
```

# c# - 如何以只读模式打开Excel文件？

> ID：12797243
> 
> 赞同：3
> 
> 时间：2012-10-09T09:47:48.233
> 
> 标签：c#, wpf, excel, browser

我正在使用带有 WPF 应用程序（WebBrowser 和 Microsoft.Office.Interop.Excel）的 VS2008、C# 我有一个任务：以只读模式在 WPF 表单上托管 Excel。

我怎样才能做到这一点：

一、在WebBrowser中加载Excel文件

```
 Uri _uri = new Uri("FilePath");
 WebBrowserExcel.Navigate(_uri); 
```

Next 2\. 在事件 WebBrowserExcel_LoadCompleted

```
 if ((WebBrowserExcel.Document as Excel.Workbook) == null) return;
       try
       {
          //Get loading WorkBook and set "Protect" for disable editing 
          _Book = WebBrowserExcel.Document as Excel.Workbook;
          _Book.Protect("", Type.Missing, Type.Missing);

          //Set "Protect" for disable editing to WorkSheet
           foreach (Excel.Worksheet _sheet in _Book.Sheets)
           {
               _sheet.Protect(&quot;&quot;, Type.Missing,Type.Missing,
                              Type.Missing,Type.Missing, true,Type.Missing,
                              Type.Missing, Type.Missing, Type.Missing, 
                              Type.Missing, Type.Missing,Type.Missing,
                              Type.Missing, Type.Missing, Type.Missing
                              );
            } 
        }
        ..... 
```

在此之后，当我尝试在 WebBrowser 中编辑文件时，我有一个 Excel 的 MessageBox。MessageBox 的文本：“This Book is Protected...etc”或“This Sheet is Protected...etc”

要隐藏此消息框，我需要设置属性 Excel.Application.DisplayAlerts = false;

```
3\. Set property

    _Book.Application.GetType().InvokeMember("DisplayAlerts", BindingFlags.SetProperty, null, _Book.Application, new object[] { false }); 
```

并有例外：

```
InnerException = {"could Not set the property DisplayAlerts Application class"} 
```

但是如果创建应用程序（不是从 WebBrowserExcel.Document 获取）我可以设置 DisplayAlerts，但我不能将 Excel.Application 托管到 WebBrowser，只有 Excel 的文件...

有没有办法在 WebBrowser 中将 Excel 的文件设置为只读？或者如何设置“DisplayAlerts”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:01:19.750

这是一个包 [http://support.microsoft.com/kb/165435/en](http://support.microsoft.com/kb/165435/en)

# java - 如何从不扩展 Activity、Android 的类创建 TimePicker？

> ID：12797244
> 
> 赞同：0
> 
> 时间：2012-10-09T09:47:49.690
> 
> 标签：java, android, android-widget

我正在尝试从不扩展 Activity 类的类创建 TimePicker 对话框。我需要一个名为 EnterTime 的类中的 TimePicker，该类具有包含活动上下文的上下文属性。

WEB 上 TimePicker 的所有示例都是用 Activity 类编写的基本示例，这就是它们让我感到困惑的原因。

我想要在低于 3.0 的 Android 上运行良好的时间选择器。我不使用 XML 布局。

所以基本上我需要建议在哪里放置 onCreateDialog() ，如何检索选择的时间等。

我有 EditText，它有 onClickListener() 用于调用 TimePicker。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:11:55.217

可能这个对你有帮助

```
public class MyTimePicker {
TimePickerDialog mTimePickerDialog;

public interface onTimeSet {
    public void onTime(TimePicker view, int hourOfDay, int minute);
}

onTimeSet mOnTimeSet;

public void setTimeListener(onTimeSet onTimeset) {
    mOnTimeSet = onTimeset;
}

public MyTimePicker(Context ctx) {
    mTimePickerDialog = new TimePickerDialog(ctx, new OnTimeSetListener() {

        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            mOnTimeSet.onTime(view, hourOfDay, minute);

        }
    }, 1, 1, true);
}

public void show() {
    mTimePickerDialog.show();
} 
```

并称之为

```
public void ShowTimePicker() {
    MyTimePicker myTimePicker = new MyTimePicker(this);
    myTimePicker.show();
    myTimePicker.setTimeListener(new onTimeSet() {

        @Override
        public void onTime(TimePicker view, int hourOfDay, int minute) {
            Toast.makeText(MainActivity.this,
                    "time is " + hourOfDay + ":" + minute,
                    Toast.LENGTH_LONG).show();

        }
    });
} 
```

# mysql - sql语句的接受率

> ID：12797251
> 
> 赞同：0
> 
> 时间：2012-10-09T09:48:15.337
> 
> 标签：mysql, sql, ruby-on-rails

我有一个具有以下结构的“建议”表：

```
id(suggest_id) | author_id | accepted(true/false) 
```

我想按最大接受率订购，例如：

```
Jack had 10 suggests and he accepted 5 (50% acceptance rate)
John had 20 suggests and he accepted 5 (25% acceptance rate)
Steve had 10 suggests and he accepted 8 (80% acceptance rate) 
```

这将返回：史蒂夫、杰克和约翰。

我认为可能必须使用两个 SQL 查询，一个用于建议数量，第二个用于`accepted=true`.

也许可以通过一个查询来完成？

我正在使用rails，所以它也可以通过rails来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:52:01.420

取决于你如何表示接受（真/假），比如......

```
select author_id, 
    sum(case when accepted ='true' then 1 else 0 end), 
    100.0*sum(case when accepted ='true' then 1 else 0  end)/count(*)
from yourtable
group by author_id
order by 100.0*sum(case when accepted ='true' then 1 else 0 end)/count(*) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:40:31.220

你也可以尝试使用纯红宝石：

```
@authors_by_acceptance_rate = Array.new
@authors = Author.all
@authors.each do |author|
  @suggests = Suggest.find_by_author_id(author.id)
      accepted = 0
  @suggests.each do |suggest|
    if suggest.accepted
      accepted = accepted + 1
    end
  end
  acceptance_rate = accepted/@suggests.count
  @authors_by_acceptance_rate.push('name' => @author.name, 'accepted' =>     acceptance_rate)   
end
return @authors_by_acceptance_rate 
```

我还没有测试过这个，所以不能保证它的工作...

# apache - 配置 apache/tomcat 503 页面

> ID：12797255
> 
> 赞同：4
> 
> 时间：2012-10-09T09:48:40.667
> 
> 标签：apache, tomcat

我正在为 Web 服务器运行 Apache “Apache/2.2.19 (Unix) mod_ssl/2.2.19 OpenSSL/1.0.0d mod_jk/1.2.32”，并将 Apache Tomcat/6.0.32 作为应用程序服务器。

我需要配置 apache 以在 tomcat 关闭或不可用时呈现 503 页面。我已经阅读了几篇文章，这些文章建议需要在 mod_jk.conf 虚拟主机上进行配置。[其中一个链接](http://kahimyang.info/kauswagan/howto_blogs/997-custom_error_pages_for_tomcat_jsf_applications)建议我需要在我的虚拟主机中执行以下操作：

```
<Directory /udd001/app/docroot>
    Order allow,deny
    Allow from all
</Directory> 
```

但这似乎对我不起作用。我的 404 aqnd 503 html 文件位于`/udd001/app/docroot`. 我的虚拟主机目前有以下似乎无法正常工作的内容。

```
ErrorDocument 404 /error404.html
ErrorDocument 503 /maintenance503.html 
```

每当tomcat关闭时，我仍然会收到404页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:51:58.587

我这样做：

首先创建一个漂亮的 503 页面并将其配置为默认的 503 页面。请记住，您使用的路径是相对于您在 apache 配置中定义的 Documentroot 的。在我的例子中， Documentroot 定义如下：

```
DocumentRoot "c:/apache/htdocs" 
```

在该文件夹`/tomcat-offline`中，我有一个子文件夹，其中放置了用作 503 页面的普通网页。现在我像这样配置503页面：

```
ErrorDocument 503 /tomcat-offline/index.html 
```

因为您可能将所有流量都转发到tomcat，我们需要将503页面排除在转发之外，否则它将无法正常工作。就我而言，我使用 mod_jk 进行所有转发，如下所示：

```
JkMount /* tomcat 
```

为了排除我的 503 页面并让 apache 从它的 Documentroot 中提供它，我像这样卸载该页面：

```
JkUnMount /tomcat-offline/* tomcat 
```

重新启动 apache 并关闭 tomcat。您应该能够看到 503 页面。

# c# - Folder.GetDetailsOf 返回错误的项目类型

> ID：12797256
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:48:41.563
> 
> 标签：c#, directory, shell32

我正在使用 Shell32 库从 .mp4 文件中检索数据。

我在本地主机上工作的代码，但是当我在 IIS 服务器上使用它时，它会将文件作为“MP4 文件”而不是“MP4 视频”返回，这会导致没有视频数据（宽度、高度、帧速率等）。 ） 找回。

我读到我可以使用[GetDetailsEx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775051%28v=vs.85%29.aspx)来获取正确的数据，但是 Folder 类中似乎不存在这种方法。

```
public static ExtendedFilePropertiesMp4 GetExtendedFileProperties(string directory, string fileName)
    {
        Dictionary<string, int> headers = new Dictionary<string,int>();

        Shell shell = new Shell();
        Folder folder;

        folder = shell.NameSpace(directory);

        for (int i = 0; i < short.MaxValue; i++)
        {
            string header = folder.GetDetailsOf(null, i);

            if (String.IsNullOrEmpty(header))
                break;

            if (!headers.ContainsKey(header))
                headers.Add(header, i);
        }

        FolderItems folderItems = folder.Items();

        foreach (FolderItem2 item in folder.Items())
        {
            if (folder.GetDetailsOf(item, 0) == fileName)
            {
                ExtendedFilePropertiesMp4 extendedFileProperties = new ExtendedFilePropertiesMp4();

                // Get data and set the properties of the extendFileProperties

                return extendedFileProperties;
            }
        }

        return null;
    } 
```

Web.config 中是否有设置或类似设置需要更改才能正常工作？

编辑：我看到我被否决了，这样做的人可以解释为什么吗？我很想详细说明我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:34:31.810

我使用它的目的是更改其中包含视频标签的 div 标签的宽度和高度。

由于上述方法不起作用，我找到了另一种方法，即使用加载的元数据。

有关更多信息，请参阅此答案： [jQuery，检查视频是否具有高度/宽度](https://stackoverflow.com/questions/2717986/jquery-checking-to-see-if-video-has-height-width)

# javascript - jQuery 就绪回调的调用顺序

> ID：12797257
> 
> 赞同：3
> 
> 时间：2012-10-09T09:48:43.200
> 
> 标签：javascript, jquery, onreadystatechange

如果页面中有两个 javaScript 函数，需要在文档加载完成时调用。是否有可能任何函数都可以首先执行，或者它将是第一个总是首先执行的函数？

因此，如果您有以下代码，则使用 jQuery：

```
$(document).ready(function(){ function1(); });

$(document).ready(function(){ function2(); }); 
```

会发生`function2`先执行还是`function1`总是先执行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:52:17.907

jQuery ready 使用[Deferred 对象系统](http://api.jquery.com/category/deferred-object/)：

```
ready: function( fn ) {
    // Add the callback
    jQuery.ready.promise().done( fn );

    return this;
}, 
```

（来自[源代码](http://code.jquery.com/jquery-latest.js)）

并且[文件](http://api.jquery.com/deferred.done)指出

> 回调按照添加的顺序执行

所以是的，您的回调将按添加顺序执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T09:51:22.220

如果你想让这些函数按顺序执行，你为什么不写：

```
$(document).ready(function(){ 
    function1();
    function2();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:52:25.497

最好利用回调函数来确定函数的执行顺序

# javascript - 如何仅为 Firefox 加载脚本

> ID：12797262
> 
> 赞同：6
> 
> 时间：2012-10-09T09:49:00.430
> 
> 标签：javascript, jquery, html

有没有办法只为 FireFox 加载脚本文件

例如：

```
<script src="js/script.js"></script>

<script src="js/scriptFF.js"></script> - this only for firefox ?? 
```

更新

我是这样制作的

```
<script>
    if($.browser.mozilla) { 
        jQuery.getScript("js/scriptFF.js");
    } else {        
        jQuery.getScript("js/scriptAll.js");            
    }
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:52:01.837

您可以`<script>`基于`User Agent`.

```
var ffFlag = (navigator.userAgent.toLowerCase().indexOf('firefox') !== -1);
var script = document.createElement("script");
script.src = (ffFlag)?"js/scriptFF.js":"js/script.js";
script.type = "text/javascript"; 
```

这应该可以解决问题！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:52:07.190

试试这个：

```
if($.browser.mozilla) {
  // do something
} 
```

对于版本

```
if ($.browser.mozilla && $.browser.version >= "2.0" ){
   alert('Mozilla above 1.9');
} 
```

[**jQuery 浏览器**](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:53:46.483

这应该可行，但如果有人欺骗他们的用户代理，你可能会陷入困境：

```
if (navigator.userAgent.toLowerCase().indexOf('firefox') !== -1) {
    var script = document.createElement("script");
    script.src = "js/scriptFF.js";
    script.type = "text/javascript";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:53:06.537

在您的代码中，添加：

```
if (navigator.userAgent.indexOf("Firefox") != -1)
{
    //Your firefox code
} 
```

# ruby-on-rails - RSpec：如何在静态方法上使用 should_receive？

> ID：12797264
> 
> 赞同：3
> 
> 时间：2012-10-09T09:49:09.237
> 
> 标签：ruby-on-rails, rspec

我在 lib/gcm.rb 中有一个模块：

```
require "net/http"
require "uri"

module GCM
  def self.dispatch_message(reg_ids, data)
    url = URI.parse(GCM_URL + "/send")

    @msg = { :registrationIds => reg_ids, :data => data }

    request = Net::HTTP::Post.new(url.path)
    request.content_type = 'application/json'
    request.body = @msg.to_json
    response = Net::HTTP.start(url.host, url.port) { |http| http.request(request) }
  end
end 
```

我想测试`dispatch_message`是否在我的一个控制器中调用了：

```
it "should dispatch a GCM message" do
  post :create, :post => @attr, :format => :json
  GCM.should_receive(:dispatch_message)
end 
```

但它失败了：

```
PostsController POST 'create' should dispatch a GCM message
 Failure/Error: GCM.should_receive(:dispatch_message)
   (GCM).dispatch_message(any args)
       expected: 1 time
       received: 0 times 
```

如果重要的话，我已经禁用了与 WebMock 的网络连接。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T09:54:57.590

您的期望必须在提出请求*之前出现：*

```
it "should dispatch a GCM message" do
  GCM.should_receive(:dispatch_message)
  post :create, :post => @attr, :format => :json
end 
```

# c++ - 取消对...的引用：从模板类继承

> ID：12797268
> 
> 赞同：1
> 
> 时间：2012-10-09T09:49:23.733
> 
> 标签：c++, templates, inheritance

我在从模板类继承时遇到了一些麻烦。下面的代码无法编译，显示此错误：`main.cpp : undefined reference to OBJ1<1000>::method()`

**父母.h**

```
template <int nb>
class PARENT
{
  PARENT() {};
  ~PARENT() {};

  virtual void method() = 0;
  enum { nb_ = nb };
}; 
```

**obj1.h**

```
#include "parent.h"

template <int nb>
class OBJ1 : public PARENT<nb>
{
  virtual void method();
}; 
```

**obj1.cpp**

```
#include "obj1.h"

template <int nb>
void OBJ1<nb>::method()
{
  //code
} 
```

**主文件**

```
#include "obj1.h"

int main()
{
  OBJ1<1000> toto;
  toto.method();
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:51:34.257

处理模板时，您不能将声明和实现拆分为单独的文件。有关原因，请参阅[此问题](https://stackoverflow.com/q/495021/1025391)（以及解决此问题的更简洁的描述）。

这需要合并（您也可以`#include`将实现文件放入标头中，让预处理器进行合并。）：

```
// obj1.hpp

#include "parent.h"

template <int nb>
class OBJ1 : public PARENT<nb>
{
  virtual void method();
};

template <int nb>
void OBJ1<nb>::method()
{
  //code
} 
```

# php - BibTeX 格式查询

> ID：12797271
> 
> 赞同：0
> 
> 时间：2012-10-09T09:49:32.077
> 
> 标签：php, javascript, reference, bibtex

您好我目前正在尝试为 BibTeX 记录编写解析器，以便将所有相关信息存储在数据库中并根据相关记录生成格式化参考。

我希望知道这里是否有人真的知道 Bibdesk 中的每种格式是什么以及它代表什么，因为在这方面似乎有些模棱两可。Bibdesk 格式是否也跨平台一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:19:18.020

你可能想看看[JabREF](http://jabref.sourceforge.net/)，这是一个基于 Java 的 BibTeX 编辑器，它对 BibTeX 条目进行一些解析和表示。

有一些 BibTeX 记录类型是通用的，但也有一些特定于渲染它们的宏，所以如果你想要一个完整的记录列表及其语义，你可能会不走运。

另外，尝试查看[Parse Bibtex 文件](https://stackoverflow.com/questions/10768747/parse-bibtex-files)

# python - 在 Windows 上的 Emacs 中运行 Python

> ID：12797274
> 
> 赞同：4
> 
> 时间：2012-10-09T09:49:43.443
> 
> 标签：python, shell, emacs, ipython

我刚刚在 Windows 上安装了 Python 2.7 和 IPython。

我习惯于在 Linux 上的 Emacs 中运行 IPython，例如

```
M-x shell 
```

然后`ipython`在提示符处键入“”。

这在 Linux 下工作得很好，但在 Windows 下，它在打印 IPython 横幅文本后挂起，即看起来它正在工作，但是你永远不会得到 IPython 提示。

我可以在 Windows 下从标准 cmd 终端毫无问题地加载 IPython（和 Python），而不是从 Emacs 中加载。

还有其他人经历过或希望解决这个问题吗？

在尝试启动普通的旧 Python 时，我也遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:12:37.903

在 Windows 中，它不会那么容易工作，而且非常烦人。首先，确保你已经安装了 pyreadline。

接下来，我让它使用我的系统路径中的一个 bat 文件，其中包含：

```
[ipython.bat]
@python.exe -i C:\devel\Python\2.7-bin\Scripts\ipython.py  --pylab %* 
```

接下来获取 python-mode.el 并删除 ipython.el。后者已弃用，python-mode 包含其功能。

相应地更改 ipython.py 文件的路径并保存。现在在您的 Emacs 中，在您的 init.el 文件中执行以下操作。

```
(custom-set-variables
 '(py-shell-name "ipython.bat")) 
```

或者，要实现最后一步，请执行 Ch v <RET> py-shell-name 并对其进行自定义并将其更改为 ipython.bat 或 ipython.bat 的完整路径（如果脚本目录不在您的系统路径中）。保存以备将来使用。

这应该让你的 IPython shell 工作。如果您想要多个交互式 matplotlib 图形而不挂起您的 IPython 控制台，还有一个警告。我可以解决这个问题的唯一方法是使用 IPython 0.10 而不是当前版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T13:12:31.797

我希望我不久前看过这篇文章。我在 Emacs 中运行 python、ipython 的经验如下：

我尝试了许多选项（在 Windows 7 上使用 python(x,y)-2.7.3.0）

使用 ipython.el：

只要您更改 ipython-command，它仍然有效。我不建议这样做，因为您通过更改 ipython-command 从 ipython.el 失去了一些功能

您可以显示图形，但在您关闭图形之前，提示会被冻结

裸蟒不起作用

更改 py-shell-name（如上）：当我添加 --pylab 选项时，我的数字总是挂起

我总是得到一个 IPython 终端

引入 ipython.bat 包含

```
@C:\\Python27\\python.exe -i -u C:\\Python27\\Scripts\\ipython-script.py %* 
```

并更改我在 ipython.exe 之前找到的 ipython.bat 的路径

IPython 工作，但仍然只有一个线程（您必须关闭图形才能返回外壳）

Python 也可以工作，所有剩余的函数都来自 python-mode.el

我仍然需要弄清楚如何在打开一个图（在 emacs 内）后返回 shell。我开始使用 Python 2.6 和旧版本的 IPython

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-15T07:47:12.590

使用`python -i`or`ipython -i`代替`python`or`ipython`为我工作（它让我在 Emacs 中得到提示，而不是无限期地挂起）。

从 python --help ：

> -i : 运行脚本后交互检查；即使 stdin 看起来不是终端也强制提示；还有 PYTHONINSPECT=x

* * *

但是，生成的 python 解释器可能无法完全正常工作。您有 2 个选项：

*   如果您在 conda 环境中使用 python：我建议您切换到正确的 Python 安装。这并不意味着删除 Anaconda，它只意味着从[https://www.python.org/downloads/windows/](https://www.python.org/downloads/windows/)下载 Python并从 Windows 的 %PATH% 变量中删除 Anaconda 的 Python。如果你不这样做，你会遇到很多图片显示问题，激活conda（conda activate base）等问题，我从来没有成功解决这些问题。
*   如果您使用来自 python.org/downloads 的 Python：您走在正确的轨道上！检查是否可以从命令行（Win+R cmd python）访问 Python，如果不能，将其路径添加到 Windows 路径变量。

现在您需要使图像显示工作。开箱即用，matplotlib.pyplot 在 Emacs 中滞后。这是您需要做的：

首先，检查你是否已经下载了 ipython`pip install ipython`包（`pip install matplotlib``pip install numpy`

然后在您的计算机上找到 ipython-script.py 的位置（在文件资源管理器中键入“ipython-script.py”以找到它）并将其作为参数放在变量 python-shell-interpreter-args 中，在“ -一世 ”。还要检查 python-shell-interpreter 是否正确设置为`python`. 你应该有这样的东西：

```
(setq python-shell-interpreter "python")
(setq python-shell-interpreter-args "-i c:/Users/YOUR-USER-NAME/AppData/Local/Continuum/anaconda3/Scripts/ipython-script.py") 
```

这样，您可以直接从 emacs 运行 python shell `M-x run-python`（或者，从 python 文件，Cc Cp 然后 Cc Cc）。

当然，如果您愿意，也可以从 shell 终端执行相同的操作，使用以下命令： `python -i "c:/Users/YOUR-USER-NAME/AppData/Local/Continuum/anaconda3/Scripts/ipython-script.py"`

或者您可以使用相同的命令创建一个 bat 文件。但这不是必需的。

（使用 Python 3.8 测试）

# php - 使用 PHPExcel 创建粗体文本/单元格

> ID：12797280
> 
> 赞同：0
> 
> 时间：2012-10-09T09:50:07.910
> 
> 标签：php, phpexcel

我试图加粗文本但我没有这样做，原因我真的不知道，我已经按照 PHPExcel 文档中的步骤操作，但没有结果，这是我的代码：

```
 require_once './classes/PHPExcel.php';
    Create new PHPExcel object
    $objPHPExcel = new PHPExcel();
    include('./classes/PHPExcel/Writer/Excel5.php');
    $objPHPExcel->getActiveSheet()->mergeCells('A1:k1');
    $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(25);
    $objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(18);
    $objPHPExcel->getActiveSheet()->getColumnDimension('C')->setWidth(18);
    $objPHPExcel->getActiveSheet()->getColumnDimension('D')->setWidth(18);
    $objPHPExcel->getActiveSheet()->getColumnDimension('E')->setWidth(40);
    $objPHPExcel->getActiveSheet()
    ->setcellValue('A25', "Answer")
    ->setcellValue('B25', "Surname")
    ->setcellValue('C25', "Name")
    ->setcellValue('D25', "Contact Number")
    ->setcellValue('E25', "Comment");

    //some stuff in between...
    //problem starts here...

    $objRichText = new PHPExcel_RichText();
    $objRichText->createText('This invoice is ');

    $objPayable = $objRichText->createTextRun('payable within thirty days after the end        of the month');
    $objPayable->getFont()->setBold(true);
    $objPayable->getFont()->setItalic(true);
    $objPayable->getFont()->setColor( new PHPExcel_Style_Color( PHPExcel_Style_Color::COLOR_DARKGREEN ) );

    $objRichText->createText(', unless specified otherwise on the invoice.');

    $objPHPExcel->getActiveSheet()->getCell('A18')->setValue($objRichText); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:04:20.730

从版本 1.7.2 升级到更新版本，包括对 Excel5 编写器中富文本的支持可能会有所帮助……版本 1.7.2 已经有将近 3 年的历史了。1.7.7 是当前的生产版本，1.7.8 已经过期但在 github 上可用。

这是问题列表中的工作项 #8916，并且在生产版本 1.7.7 中添加了支持

# jquery-ui - 来自代码隐藏的 Jquery UI 多选绑定项目

> ID：12797283
> 
> 赞同：0
> 
> 时间：2012-10-09T09:50:16.540
> 
> 标签：jquery-ui, postback, code-behind, multi-select, setvalue

我正在使用 JQuery UI Multiselect 插件将下拉列表与多选项目一起使用，并且我需要帮助将保存在数据库中的选定项目返回到多选下拉列表。

例子：

页面加载时的 Javascript 代码：

```
$("#<%=ddlCountry.ClientID%>").multiselect({
            checkAllText: "All",
            uncheckAllText: "Clear",
        noneSelectedText: "Select a country",
        selectedText: "# item(s) selected",
        close: function (event, ui) {
            var values = $("#<%=ddlCountry.ClientID%>").val();
            var array_of_checked_values = $("#<%=ddlCountry.ClientID%>").multiselect("getChecked").map(function () {
                return this.value;
            }).get();
            document.getElementById("<%=txtHidDataCountry.ClientID%>").value = array_of_checked_values;
        }
    }); 
```

下拉列表 ASPX 代码：

```
<div id="dvPais" style="display:none">
   <asp:DropDownList ID="ddlCountry" runat="server">
    </asp:DropDownList>
    <input type="hidden" id="txtHidDataCountry" runat="server" />
</div> 
```

在选择 3 个国家/地区后完成提交时，我将其设置为“1,2,3”之类的值。当我再次加载页面时，我需要从下拉列表中选择项目 1、2、3。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:13:28.033

只是给出我找到的解决方案：

```
$("#<%=ddlTeste.ClientID%>").multiselect({
        checkAllText: "All",
        uncheckAllText: "Clear",
    noneSelectedText: "Select a country",
    selectedText: "# item(s) selected",
    close: function (event, ui) {
        var values = $("#<%=ddlTeste.ClientID%>").val();
        var array_of_checked_values = $("#<%=ddlTeste.ClientID%>").multiselect("getChecked").map(function () {
            return this.value;
        }).get();
        document.getElementById("<%=txtHidDataTeste.ClientID%>").value = array_of_checked_values;
    }
});
var s = $("#<%=ddlTeste.ClientID%>").multiselect();
s.val(['1', '2','5']);
$("#<%=ddlTeste.ClientID%>").multiselect('refresh'); 
```

ASP 代码：

```
<asp:DropDownList ID="ddlTeste" runat="server" multiple>
    <asp:ListItem Value="1">Valor 1</asp:ListItem>
    <asp:ListItem Value="2">Valor 2</asp:ListItem>
    <asp:ListItem Value="3">Valor 3</asp:ListItem>
    <asp:ListItem Value="4">Valor 4</asp:ListItem>
    <asp:ListItem Value="5">Valor 5</asp:ListItem>
</asp:DropDownList> 
```

享受 ：）

# python - 如何通过 Python 检索 HTML 中复选框的值

> ID：12797285
> 
> 赞同：-2
> 
> 时间：2012-10-09T09:50:21.123
> 
> 标签：python, html, checkbox

我对 HTML 没有真正的了解，但我必须用它来为某些数据制作 Webview。我想要一个按钮，它链接到另一个 python 脚本来比较数据集。您可以通过选中复选框来选择要比较的数据集。然后该按钮应将您带到正确的脚本。比较功能、数据集列表等都有效，但我似乎无法获得复选框的值。这会生成复选框列表

```
 query_3 = App.QueryFactory.new("XMLQuery", xml_2 %(p1, p2, p3))
   for smlz in query_3.getAll():
    resultz += '''
<input type="checkbox" name="sml_id" value="%s"> 
<a href="http://xxx:xxx/xxxxx?sml_1=%s&gewinde=&kopf=&antrieb=&singlesearch=Suche">
%s | ID: %s |</a><br><br>''' % ( smlz.id, smlz.id, smlz.status, smlz.id)
return resultz 
```

这是按钮的代码：

```
comparebutton = """<td><input type="button" onclick="window.location.href = 'http://xxxx:xxxx/xxxx?sml_1=%s&gewinde=&kopf=&antrieb=&singlesearch=Suche';" value="Vergleichen"></td>\n""" % cb_id

keyw_c = str(kwds.get("sml_id"))   
keyw_c_l =  keyw_c.split() 
key_c_len = len(keyw_c_l)
cb_id = ''
p = 0
while p < key_c_len:
    temp_1 = str(keyw_c_l[p])
    temp_2 = temp_1.strip(",[]'")
    p += 1
    cb_id += "%s_" % temp_2 
```

**（注意：需要 _ 因为我要链接到的脚本在将数据 ID 用下划线划分时能够显示多个数据集，从而“比较”数据集）**

我尝试 get、getAll 等来获取我检查的复选框的值，但我总是得到“无”我做错了什么，或者是否可以通过制作一个执行我的 python 代码的某个功能的按钮来使这更容易，因为我有“比较”脚本的代码，我只是缺乏 HTML 知识来做这样的事情。

kwds 的输出（我有 4 个输入字段，singlesearch 是搜索按钮的名称）

```
{'sml_1': ['test'], 'antrieb': ['test'], 'singlesearch': ['Suche'], 'kopf': ['test'], 'gewinde': ['test ']} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:12:42.300

要制作 html Web 浏览器界面，您需要 Web 浏览器与您的应用程序通信的传输。最常用的传输是http。要运行一个可以运行 python 代码的 http，有很多[选项](http://wiki.python.org/moin/WebProgramming)。如果我不得不推荐一些东西，那就是[金字塔](http://docs.pylonsproject.org/en/latest/docs/pyramid.html)。

然后，您的 Web 服务器应该处理不同的请求：

1.  返回初始 html 表单的 url。该表单可以包含您需要的复选框。此表单的操作应该是请求编号 2 的 url。表单的方法可以是 POST 或 GET。使用 GET，用户可以看到表单数据。对于 POST，它是隐藏的。对于您的用例，GET 可能更好。

2.  处理从表单获取的 url。它将能够通过查看请求来查看表单上输入的值（例如复选框）。此时，您可以调用 vpython 模块来生成所需的内容，并在 http 响应中将其传递给浏览器。

# javascript - 程序运行后立即使用 .trigger('click')

> ID：12797288
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:50:37.693
> 
> 标签：javascript, jquery

在我的拼写游戏中，有一个填充了隐藏单词的网格。游戏的目的是通过点击字母表中的字母，使用提示和图像和声音来拼写单词。

用户通过按下下一个按钮知道要拼写什么单词。此按钮随机选择网格中的一个单词并将其突出显示。我的问题是我需要在游戏运行时自动按下按钮，以便用户立即开始。

我已经能够通过使用来做到这一点

```
 $(document).ready(function(){
    $('.minibutton').trigger('click');
}); 
```

唯一的问题是我不知道在哪里添加这个功能，当我这样做时，它会制动按钮的正常功能，这是......

```
 $('.minibutton').click(function() {

    $('.minibutton').prop('disabled', false);
    $('.picstyle').show();
    $('td').removeClass('spellword');
         var r = rndWord;
         while (r == rndWord) {
         rndWord = Math.floor(Math.random() * (listOfWords.length));
    }

    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3').css('color', 'transparent');

    var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
    if (noExist) {
        $('.minibutton').click();

    } else {

         $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
         audio.play();
         $("#mypic").attr('src', listOfWords[rndWord].pic);
         pic.show();
    }

 }); 
```

这是一个小提琴...... [http://jsfiddle.net/smilburn/Dxxmh/34/](http://jsfiddle.net/smilburn/Dxxmh/34/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:59:24.810

分配点击功能后直接执行此操作。

```
$('.minbutton').click(function(){
    // Your code
}).trigger("click"); 
```

这称为链接。一组 jQuery 对象在运行其函数时将（几乎）总是返回自身。

# git - 提取项目特征

> ID：12797290
> 
> 赞同：2
> 
> 时间：2012-10-09T09:50:47.783
> 
> 标签：git, command-line, github

我从 Github 克隆了一个项目，我想提取一些特征。有人可以给我一个提取说明：

*   有多少用户在这个项目上工作？
*   提取最大的变化文件？（有更多的承诺）
*   此文件的提交次数？
*   此文件的插入/删除次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:24:33.730

对于用户及其提交

```
git shortlog -s -n 
```

统计用户数

```
git shortlog -s -n | wc -l 
```

对于您可以执行的某个文件的提交次数

```
git log "path_to_file" | wc -l 
```

并将输出加 1 除以 6，因为每次提交有 6 行。我的 shell 技能不太好做那个管道

你也可以

```
git log --pretty=oneline "path_to_file" | wc -l 
```

用于插入和删除

```
git log --stat 
```

每次提交都提供信息，我想你需要仔细检查并开始计算

此外，github 可以通过 stats 和 file diff stat 很好地显示相同的信息

对于提交最多的文件，您需要检查每个文件并查看提交的数量并取最大的

这是我写的批处理文件。它可能会更好，但它应该让你开始

```
 for /r "Folder_Path" %%X in (*.*) do (
        (echo %%X  >> commits.txt
         git log --pretty=oneline %%X | wc -l >> commits.txt) 
        ) 
```

它将创建一个文件，其中包含文件名和提交次数。只取最大的

# php - Opencart 结帐未通过自定义字段

> ID：12797292
> 
> 赞同：0
> 
> 时间：2012-10-09T09:50:48.870
> 
> 标签：php, opencart

我正在尝试在结账时添加 2 个自定义字段（一个用于礼品备注，一个用于让用户选择发货日期）。我设法让礼品单字段正常运行，但日期字段出现问题。

我正在使用标准文本字段（输入类型 =“文本”），目的是使用 jQuery UI 作为日期选择器，但文本字段的值没有被传递。如果我从输入更改为文本区域，则数据确实会通过。我正在尝试将它们都添加到 Opencart 1.5.4 结帐的“付款方式”阶段。

我是 Opencart 的新手（昨天当我被要求添加这些字段时开始查看它）但了解 MVC+L 模式，并且正如我所说，设法让一个字段工作并传递到数据库中。我没有使用 vQmod。

输入字段中的数据没有传递到控制器/payment_method.php 中的 $this->request->post

这对我来说似乎是一个错误，它只是 Opencart 的一个怪癖吗？如果没有解决方案，我可以在技术上使用 textarea，但这感觉有点肮脏的解决问题的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:38:28.197

我在我的案例中找到了解决方案，这就是我所做的，以防它在未来帮助任何人。

我发现所有用于发布数据的 AJAX 都在

*查看/主题/**主题名称**/template/checkout/checkout.tpl*

我搜索了“帖子”的实例，检查并检查了它们与哪个部分相关。在我的情况下（在 payment_method 部分中添加字段），数据被传递到的 URL 是

**index.php?route=checkout/payment_method/validate**

并将额外字段的 id 添加到 AJAX 调用的数据属性中。

希望这对其他人有用

# xml - 函数 importxml 谷歌电子表格

> ID：12797294
> 
> 赞同：1
> 
> 时间：2012-10-09T09:51:01.087
> 
> 标签：xml, xpath, google-sheets

我必须学习 xpath，我尝试在谷歌电子表格中使用 importxml 函数，但它不起作用。

使用 firefox，我发现了 2 个显示 xpath 代码的插件（“firebug”和“xpath checker”）。使用萤火虫我有这个xpath：

```
 /html/body/div/div/div[3]/div[3]/div/div/form/h1 
```

并使用 xpath 检查器此代码：

```
id('titolo1')/h1 
```

我尝试使用此代码：

```
=importXML("url";"//*[@id='titolo1']/h1")
=importXML("url";"//html/body/div/div/div[3]/div[3]/div/div/form/h1")
=importXML("url";"id('titolo1')/h1") 
```

但它不起作用，任何人都可以看到问题可能出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-02T17:28:54.917

显示 H1 的 HTML，在一般情况下：

```
//*[@id='titolo1']/h1 
```

必须工作。

其他 - 检查语法（' vs "）。其他 - 尝试更广泛地查看问题所在（谷歌电子表格有时有奇怪的行为），例如：

```
//*[@id='titolo1']
//form
...etc. 
```

# java - 声纳和数据核

> ID：12797295
> 
> 赞同：0
> 
> 时间：2012-10-09T09:51:02.307
> 
> 标签：java, jdo, sonarqube, datanucleus

如果我们希望声纳忽略与“性能 - 从未调用私有方法» 从未调用私有方法 xxx.xxx.xxx.jdoXXX...”相关的严重违规行为，最佳实践是什么@执着的 ？

我们已经尝试了标签 //NOSONAR 和 @SuppressWarnings("all")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:15:04.010

After tangling with a similar issue from a different annotation, it appears you must put the NOSONAR tag on both the method declaration line as well as the first line of the method itself:

```
private void sampleMethod() { // NOSONAR
    doSomething(); // NOSONAR
} 
```

Hope that helps.

# android - 查找字符串时的数据库查询问题

> ID：12797296
> 
> 赞同：0
> 
> 时间：2012-10-09T09:51:03.477
> 
> 标签：android, database, sqlite

`enter code here`我正在尝试编写一个查询来提取我的 Android SQLite 数据库表中位置引用 =“字符串”的所有行。我在我的数据库助手类中使用以下代码：

```
public Cursor fetchComponentsForLocation(String locationRef) {
    Cursor mCursor =
            rmDb.query(true, LOCATIONS_TABLE, new String[] {
                    LOCATION_ID, RUN_LINK, AREA_LINK, INSPECTION_LINK, LOCATION_REF, RACKING_SYSTEM, COMPONENT, POSITION, RISK, ACTION_REQUIRED, NOTES_GENERAL, MANUFACTURER, TEXT1, TEXT2, TEXT3, TEXT4, NOTES_SPEC}, 
                    LOCATION_REF + "=" + locationRef, null,
                    null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
} 
```

我在我的活动中这样称呼它：

```
 // Get a Cursor for the list items
    Cursor listComponentCursor = rmDbHelper.fetchComponentsForLocation(locationRef);
    startManagingCursor(listComponentCursor);           

    // set the custom list adapter     
    setListAdapter(new MyListAdapter(this, listComponentCursor)); 
```

然后在我的 ListAdapter 中使用它来填充我的列表视图。现在在我的其他活动中，当我根据 id（即 long）获取行时，此代码可以正常工作。当我尝试使用 String 时，出现以下错误：

*`Caused by: android.database.sqlite.SQLiteException: **no such column: g:** , while compiling: SELECT DISTINCT _id, run_link, area_link, inspection_link, location_reference, racking_system, component, position, risk, action_required, notes_general, manufacturer, text1, text2, text3, text4, notes_spec FROM location_table WHERE location_reference=g`*

如您所见，在这种情况下 String = 'g'，但它似乎在寻找名为 'g' 的列而不是查看数据！

很困惑为什么这适用于长而不是字符串。一如既往的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:54:48.190

用这个改变你的：

```
String[] columns = {LOCATION_ID, RUN_LINK, AREA_LINK, 
                    INSPECTION_LINK, LOCATION_REF, RACKING_SYSTEM, COMPONENT,
                    POSITION, RISK, ACTION_REQUIRED, NOTES_GENERAL, MANUFACTURER, TEXT1, TEXT2, TEXT3, TEXT4, NOTES_SPEC};
String[] selection = LOCATION_REF + "= ?";

Cursor c = rmDb.query(true, LOCATIONS_TABLE, columns, selection, new String[] {locationRef},
                    null, null, null, null); 
```

我建议您使用**占位符**。这种方式更清洁，更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:53:18.047

where 应该看起来像`LOCATION_REF + "='" + locationRef + "'"`查询中的字符串应该包含在`''`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:53:26.940

我认为您在要搜索的字符串周围缺少几个单引号：

```
LOCATION_REF + "='" + locationRef+"'", null, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:54:55.503

使用这条线

```
rmDb.query(true, LOCATIONS_TABLE, new String[] {
                LOCATION_ID, RUN_LINK, AREA_LINK, INSPECTION_LINK, LOCATION_REF, RACKING_SYSTEM, COMPONENT, POSITION, RISK, ACTION_REQUIRED, NOTES_GENERAL, MANUFACTURER, TEXT1, TEXT2, TEXT3, TEXT4, NOTES_SPEC}, 
                LOCATION_REF + "='" + locationRef+"'", null,
                null, null, null, null); 
```

实际上`LOCATION_REF`if 是 type `String`，所以你需要把逗号放在那里。SQLite 约定。

# asp.net-mvc - 如何限制对 MVC 中某个文件的访问

> ID：12797297
> 
> 赞同：2
> 
> 时间：2012-10-09T09:51:04.973
> 
> 标签：asp.net-mvc, authorize

我正在使用 ASP.Net MVC，我想知道如何限制对某个文件的访问。我阅读了有关使用 [Authorize] 的信息，但它适用于控制器和操作。我尝试在 web.config 中使用，但它非常建议不要这样做，因为 MVC 在看到多个 .

我的文件位于应用程序的基础中，例如 /MyApp/MyFile。我想做的是，当用户导航到文件时。用户会看到，如果我错了，请纠正我，HTTP 401 错误之类的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:37:37.300

为了做到这一点，将文件粘贴在 App_Data 下的文件夹中，这将阻止直接访问，然后您需要创建一个控制器来处理对文件的访问。首先创建一个路由：

```
routes.MapRoute("", "Files/{file}", new { controller = "File", action = "View" }); 
```

然后将 Authorize 属性应用于操作并使用

```
return File(...); 
```

将文件实际返回给用户。

# scala - 在 Scala 中，如何将对象的值转换为 Map[String, String]？

> ID：12797300
> 
> 赞同：15
> 
> 时间：2012-10-09T09:51:16.687
> 
> 标签：scala

假设我有这门课

```
case class Test (id: Long, name: String) 
```

和这个类的一个实例：

```
Test :
id -> 1
name -> toto 
```

我想创建一个 Map[String, String] 如下：

```
Map( "id" -> "1", "name" -> "toto") 
```

我的问题是：有没有办法把这个 Test 实例变成 Map[String, String] ？我想避免使用这种方法：

```
def createMap(instance: Test): Map[String, String] = {
    val map = new Map[String, String]
    map.put("id", instance.id.toString)
    map.put("name", instance.name)
    map
} 
```

如果在 Scala 中没有这样做的方法，有没有办法迭代类属性？也许我可以创建一个通用函数来这样做：

```
def createMap(instance: T): Map[String, String] = {
   val map = new Map[String, String]
   //pseudocode 
   for  ((name, value) <- instance.getClassProperties.getValues) {
      case value.isInstanceOf[String] : map.push(name, value)
      case _ : map.push(name, value.toString)
    }
    map
} 
```

那可能吗 ？如果您有很好的示例/链接，我很感兴趣。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-09T10:35:20.607

是的，这是可能的。从 Scala 2.10 开始，您可以使用反射。

假设你有：

```
val test = Test(23423, "sdlkfjlsdk") 
```

以下将为您提供您想要的：

```
import reflect.runtime.universe._
import reflect.runtime.currentMirror

val r = currentMirror.reflect(test)
r.symbol.typeSignature.members.toStream
  .collect{case s : TermSymbol if !s.isMethod => r.reflectField(s)}
  .map(r => r.symbol.name.toString.trim -> r.get.toString)
  .toMap 
```

简单地迭代案例类的字段值，`.productIterator`在其实例上使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-09T10:13:48.627

您正在处理的主题在 StackOverFlow 上变得令人难以置信地反复出现，如果您想要一个类型安全的实现，问题就不是微不足道的。

解决问题的一种方法是使用反射（如建议的那样），但我个人更喜欢使用类型系统和隐式。

有一个著名的库，由一个非常聪明的人开发，它可以让您执行高级操作，例如将任何案例类转换为类型安全的异构列表，或创建异构映射，可用于实现“可扩展记录”。该库称为 Shapeless，这里有一个示例：

```
object RecordExamples extends App {
  import shapeless._
  import HList._
  import Record._

  object author  extends Field[String]  { override def toString = "Author" }
  object title   extends Field[String]  { override def toString = "Title" }
  object id      extends Field[Int]     { override def toString = "ID" }
  object price   extends Field[Double]  { override def toString = "Price" }
  object inPrint extends Field[Boolean] { override def toString = "In print" }

  def printBook[B <: HList](b : B)(implicit tl : ToList[B, (Field[_], Any)]) = {
    b.toList foreach { case (field, value) => println(field+": "+value) }
    println
  }

  val book =
    (author -> "Benjamin Pierce") ::
    (title  -> "Types and Programming Languages") ::
    (id     ->  262162091) ::
    (price  ->  44.11) ::
    HNil

  printBook(book)

  // Read price field
  val currentPrice = book.get(price)  // Static type is Double
  println("Current price is "+currentPrice)
  println

  // Update price field, relying on static type of currentPrice
  val updated = book + (price -> (currentPrice+2.0))
  printBook(updated)

  // Add a new field
  val extended = updated + (inPrint -> true)
  printBook(extended)

  // Remove a field
  val noId = extended - id 
  printBook(noId)
} 
```

Book 的行为类似于类型安全映射，可以使用对象作为键进行索引。如果您有兴趣了解更多信息，那么这篇文章可能是一个很好的切入点：

[HLists 只不过是一种复杂的元组编写方式吗？](https://stackoverflow.com/questions/11825129/are-hlists-nothing-more-than-a-convoluted-way-of-writing-tuples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-10T13:56:55.643

开始`Scala 2.13`, `case classes`（作为 的实现[`Product`](https://www.scala-lang.org/api/2.13.x/scala/Product.html)）提供了一个[`productElementNames`](https://www.scala-lang.org/api/2.13.x/scala/Product.html#productElementNames:Iterator[String])方法，该方法在其字段名称上返回一个迭代器。

通过使用获得的字段值压缩字段名称，[`productIterator`](https://www.scala-lang.org/api/2.13.x/scala/Product.html#productIterator:Iterator[Any])我们通常可以获得关联`Map[String, Any]`，并通过将值映射`toString`到关联`Map[String, String]`：

```
// case class Test(id: Long, name: String)
// val x = Test(1, "todo")
(x.productElementNames zip x.productIterator.map(_.toString)).toMap
// Map[String,String] = Map("id" -> "1", "name" -> "todo") 
```

# c - 在c中创建目录

> ID：12797301
> 
> 赞同：3
> 
> 时间：2012-10-09T09:51:18.703
> 
> 标签：c, mkdir

我正在处理一些 c 代码，并试图以编程方式创建一个目录。不久前我发现 mkdir(file, "w+) 函数使目录在创建后可写，但我刚刚注意到它在编译时会创建一个警告

```
warning: passing argument 2 of âmkdirâ makes integer from pointer without a cast 
```

下面是我正在使用的代码

```
void checkLogDirectoryExistsAndCreate()
{
    struct stat st;
    char logPath[FILE_PATH_BUF_LEN];
    sprintf(logPath, "%s/logs", logRotateConfiguration->logFileDir);
    if (stat(logPath, &st) != 0)
    {
        printf("Making log directory\n");
        mkdir(logPath, "w+");
    }
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T09:56:01.443

根据[这个 manpage](http://home.fhtw-berlin.de/~junghans/cref/MAN/mkdir.htm)，第二个参数是 a `mode_t`，它是一个数字类型，给出了想要的目录访问模式。在这里你应该提供`0777`一个八进制数，意思是所有的`r`，`w`和`x`，这是受限制的`umask`。

我不知道哪些信息适用于 Windows。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:53:24.457

[mkdir](http://linux.die.net/man/2/mkdir)的第二个参数应该是 type `mode_t`。[chmod](http://www.kernel.org/doc/man-pages/online/pages/man2/chmod.2.html)手册页列出了可用的模式（可以一起使用 OR'd）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T09:54:32.577

函数的第二个参数`mkdir`不是字符串。这是定义模式的标志组合。

有关更多信息，请参阅[mkdir 手册页](http://linux.die.net/man/3/mkdir)。请参阅[sys/stat.h](http://linux.die.net/include/sys/stat.h)以获取完整的标志列表（搜索“S_IRWXU”）

# php - 从多维数组中提取数组

> ID：12797306
> 
> 赞同：1
> 
> 时间：2012-10-09T09:51:22.133
> 
> 标签：php, arrays, multidimensional-array

所以这是我的数组：

> 数组（1）{[0]=>字符串（79）“{“form_array”：{“element1”：“value1”，“element2”：“value2”，“element3”：“value3”}}“}

如何将“form_array”提取为数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:54:48.043

您实际上只有一个包含一个元素的简单数组，它是一个字符串，似乎是 JSON 编码的。要获取其数据，您可以使用以下内容：

```
// get the string
$data = $array[0];

// decode the content
$data = json_decode( $data, true );

// get the sub array
$data = $data['form_array']; 
```

[这些步骤当然可以简化为一行。我只是为了可读性和清晰度将它们分开。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:58:04.183

如果您发布了 var_dump(arrayname) 的结果，那么此代码只会帮助您

```
$data = $data['form_array']; 
```

否则你可以使用 Sirko 的 anser

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:53:03.333

你可以试试

```
$array = json_decode($array[0]);
$formArray = $array->form_array; 
```

# android - Android全屏片段，检测返回键

> ID：12797310
> 
> 赞同：1
> 
> 时间：2012-10-09T09:51:40.957
> 
> 标签：android, android-fragments

我在片段上的后堆栈有问题。

我正在使用带有 ActionBarSHerlock 的 SlidingMenu。一切正常

我在片段中有一个列表视图，在列表视图中选择项目时，我显示另一个列表视图。到目前为止没有问题。

但是，我想为每个列表视图设置一个标题，除非我从片段返回

设想

片段 1 - 标题是“朋友组”

点击列表项会显示片段 2。在展示之前，我将片段 2 的标题设置为“群组中的朋友”——这也很好用

但是，当我在 Fragment 2 中按下返回键并且 Fragment 1 出现时，我想将标题改回“朋友组”

我曾尝试在 Fragment 2 中设置 onKeyListener，但不起作用。如何检测 Fragment 2 中的返回键？

# asp.net-mvc - 使用 Unity 动态注入构造函数参数

> ID：12797314
> 
> 赞同：4
> 
> 时间：2012-10-09T09:51:47.937
> 
> 标签：asp.net-mvc, dependency-injection, unity-container, constructor-injection

我在 ASP.NET MVC 4 应用程序中使用 Unity 容器进行依赖注入。

对于特定的控制器（比如 ProductController），我有一个依赖注入场景，如下所示：

1.  ProductController 构造函数采用 IProductsRepository 实例。
2.  IProductsRepository 实现有一个接受 IProductsService 实例的构造函数。
3.  IProductsService 实现具有一个接受身份验证令牌字符串的构造函数，该字符串是从 Web 请求中的 cookie 中检索的。

考虑到身份验证令牌 cookie 只能在创建控制器实例后检索，在这种情况下进行自动依赖注入的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:02:49.360

如果您需要延迟创建`ProductService`您可以

*   为该服务注入自定义工厂
*   让 DI 容器自动生成 Type 的委托工厂`Func<IProductService>`并将该委托注入您的控制器
*   让容器生成一个[惰性代理](http://outlawtrail.wordpress.com/2012/07/26/unity-generate-lazy-proxies-on-the-fly/)，向消费者隐藏你的服务的延迟创建

我更喜欢第三种选择，因为它对消费者来说是完全透明的`IProductService`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:01:42.537

我认为你有两个选择：

1 使用 container.Resolve() 并在可用时传递参数。

`IProductsService`因此，不要在你的构造函数中请求`ProductsRepository`你，而是这样做：

```
IProductsService anInstance = container.Resolve<IProductsService>(new ParameterOverride("authenticationTokenString", "myValue")); 
```

这称为 ParameterOverride。MSDN 文档可以在这里找到：[Resolving Objects by Using Overrides](http://msdn.microsoft.com/en-us/library/ff660920%28v=pandp.20%29.aspx)

2 不要传递普通的身份验证令牌字符串，而是将其封装在接口后面并传递那个。您`IProductsService`将参加`IAuthenticationTokenProvider`并要求该班级提供所需的令牌。您的实现将在创建所需的对象后访问它们以获取正确的值。

我会选择选项二。它将使您的设计更简洁，让 Unity 无需任何手动工作即可处理所有依赖项注入。

# android - 仅对某些类应用 proguard 日志剥离

> ID：12797315
> 
> 赞同：0
> 
> 时间：2012-10-09T09:51:51.120
> 
> 标签：android, logging, proguard

我在用着：

```
-assumenosideeffects class android.util.Log {
    public static int d(...);
    public static int v(...);
} 
```

剥离 Android 项目中的调试和详细日志记录。

我需要将此逻辑应用于某些文件（/somepackage 下的所有内容），但不是所有应用程序。任何人都知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:55:29.377

您不能有选择地应用此选项，但您可以创建委托给 Log 类的日志记录方法，然后删除这些方法，或者您可以在日志记录语句之前添加最终静态布尔 DEBUG 标志并将其设置为 false 以用于您的发布.

# c# - 如何将字典序列化为base64

> ID：12797317
> 
> 赞同：1
> 
> 时间：2012-10-09T09:51:54.943
> 
> 标签：c#

我需要序列化`headers`对象以字符串格式存储它，可能是base64。将`Dictionary<String, Object>`只有 String 或 Int 值，所以应该没有问题。

```
 Dictionary<String, Object> headers = RequestHeaders.ProcessHeaders(HttpContext.Current); 
```

此外，当然重点是能够将 base64 字符串反序列化回 Dictionary。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:12:31.563

您不能将 a 序列`Dictionary`化为 XML，但可以将其序列化为 JSON：

```
string json = JsonConvert.SerializeObject(dictionary, Formatting.None);
byte[] bytes = Encoding.UTF8.GetBytes(json);
string base64String = Convert.ToBase64String(bytes);` 
```

反序列化：

```
byte[] bytes = Convert.FromBase64String(base64String);
string json = Encoding.UTF8.GetString(bytes);
Dictionary<string, object> deserializedDict = JsonConvert.DeserializeObject<Dictionary<string, object>>(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:43:45.320

首先我可以澄清一下，您不能从 Dictionary 序列化到 Base64，因为 Dictionary 是一种结构，Base64 是一种编码格式。

您需要从 Dictionary 序列化为 XML（.NET 不支持，但您可以为此构建自己的序列化器/反序列化器，或使用第 3 方序列化器），或 JSON，甚至二进制（如果不需要人类可读）。然后，您可以将序列化的结果编码为 Base64。

ASP.NET ViewStates 的工作方式与此类似（但我不认为 ViewState 是字典），但它是一种先序列化然后进行 Base64 编码的结构。

# php - 表达式引擎 SafeCracker 格式化日期字段格式 =”%d/%m/%Y” = 01/01/1970

> ID：12797324
> 
> 赞同：0
> 
> 时间：2012-10-09T09:52:07.217
> 
> 标签：php, codeigniter, expressionengine, safecracker

嗨，我正在尝试使用 format 属性格式化名为 {member_birthday} 的日期字段。但是，每当我将该属性应用于标签时，它都会以正确的格式显示日期，但日期不正确。

**代码：**

```
<input type="text" name="display_birthday" id="display_birthday" value="{member_birthday}" maxlength="23" size="25"/> 
```

显示正确的日期，即 1982-11-08 12:00 AM

```
<input type="text" name="display_birthday" id="display_birthday" value="{member_birthday format="%d/%m/%Y"}" maxlength="23" size="25"/> 
```

显示不正确的日期，即 01/01/1970

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:20:15.917

它看起来像是`member_birthday`一个字符串（或 DateTime 对象），但要格式化为日期，它必须是一个整数。

在格式化之前将 member_birthday 转换为整数。如果`strtotime`您有权访问安全的破解程序代码，或者您可以使用模板中的 PHP 可执行块来预解析为变量，请使用此选项。但如果你能做到这些，那么你也可以在没有模板的情况下格式化它们！

编辑：[http](http://expressionengine.com/wiki/Dates_Explained) ://expressionengine.com/wiki/Dates_Explained建议：

> 如果您直接读取或写入数据库时​​间戳，请始终使用[本地化](http://expressionengine.com/user_guide/development/usage/localization.html)函数在 EE 和 Unix 时间戳之间进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:31:20.473

如果您的`member_birthday`字段确实是本机 EE 日期自定义字段，那么将存储的日期是 UNIX 时间戳，并且您的代码应该可以工作。

所以我的猜测是您没有使用本机 EE 日期字段，或者您正在使用，但是在输入数据时以某种方式绕过了正确的验证（因此最终在数据库中使用 ISO 样式的日期时间字符串）。

查看您的数据库（`exp_channel_data`表）以了解该字段数据的存储方式。尝试通过控制面板输入日期，看看输入的结果如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:20:12.510

[似乎日期格式功能在安全破解器标签http://devot-ee.com/add-ons/support/zoo-visitor/viewthread/7449#25153](http://devot-ee.com/add-ons/support/zoo-visitor/viewthread/7449#25153)中不起作用，所以我安装了这个插件[http://devot- ee.com/add-ons/nice-date](http://devot-ee.com/add-ons/nice-date)并使用此代码

```
{exp:low_nice_date date="{member_birthday}" format="%d/%m/%Y"} 
```

# mysql - mysql自行恢复

> ID：12797327
> 
> 赞同：0
> 
> 时间：2012-10-09T09:52:14.647
> 
> 标签：mysql, restore

我在mysql中有一个数据库。它位于我的服务器机器 windows server 2008 上。我使用该系统至少 2 个月没有任何问题。但昨晚它突然恢复到我猜的早期备份。因为我最近的所有数据都消失了，旧数据都在表中。这真的让我很困惑。我不知道windows是否以某种方式将自己恢复到更早的日期，还是mysql自行恢复？无论如何我可以检查发生了什么？

# jquery - 获取响应头 jquery ajax post Set-Cookie

> ID：12797331
> 
> 赞同：6
> 
> 时间：2012-10-09T09:52:21.030
> 
> 标签：jquery, ajax, web-services, rest, youtrack

我正在将 YouTrack 用于我们的跟踪系统。Youtrack 附带了一个休息网络服务，您可以调用它来从系统中获取信息。我在获得授权时遇到问题，并且一直被禁止。

我在他们的登录信息中发布我的帖子，我得到“登录正常”响应，如果我签入 firebug，我可以看到标题设置正确，但没有创建 cookie。为此，我需要从响应标头 Set-Cookie 中获取值。

帖子看起来像这样。

```
 $.post(youTrackLoginUrl, { login: "restUser", password: "qwerty" }, function(data, text, xhr) {

      // do something 

      }); 
```

响应和请求看起来像这样。

响应标头：

> HTTP/1.1 200 OK 服务器：Apache-Coyote/1.1 Set-Cookie：YTJSESSIONID=91541168A3E0FF9BBB02A8D427D70127；路径=/ jetbrains.charisma.main.security.PRINCIPAL=NjVlODRiZTMzNTMyZmI3ODRjNDgxMjk2NzVmOWVmZjNhNjgyYjI3MTY4YzBlYTc0NGIyY2Y1OGVlMDIzMzdjNTpyZXN0VXNlcg; 过期=周三，2013 年 10 月 9 日 09:47:48 GMT；Path=/ Cache-Control: no-cache, no-store, no-transform, must-revalidate Access-Control-Allow-Origin: a.domain.com Access-Control-Allow-Credentials: true Content-Type: application/ xml;charset=UTF-8 传输编码：分块日期：星期二，2012 年 10 月 9 日 09:47:48 GMT

要求：

> POST /rest/user/login HTTP/1.1 主机：b.eelab.se 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 Accept: */* Accept-Language: sv-se,sv;q=0.8,en-us;q=0.5,en;q=0.3 Accept-Encoding: gzip, deflate Connection: keep-alive Content-Type: application/x-www-form-urlencoded; charset=UTF-8 引用：http: [//intra.eelab.se/kontakt/it-vad-jobbar-vi-pa-nu/](http://intra.eelab.se/kontakt/it-vad-jobbar-vi-pa-nu/) 内容长度：30 来源：[http](http://a.domain.com) : //a.domain.com 编译指示：无-cache 缓存控制：无缓存

我需要 Set-Cookie 值来在网站上创建 cookie。我能做些什么来实现这一目标？

/干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T02:35:10.057

尝试这个：

```
function createCookie(name,value,days) {
  if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

$.post(youTrackLoginUrl, { login: "restUser", password: "qwerty" }, function(data, text, xhr) {

  data_set_cookie = data.match(/Set-Cookie:\s([^;]+);/)[1];
  createCookie(data_set_cookie.split("=")[0],data_set_cookie.split("=")[1],365); //sets cookie for 1 year

}); 
```

# javascript - SQLite SELECT * FROM table WHERE id=? 麻烦事

> ID：12797332
> 
> 赞同：0
> 
> 时间：2012-10-09T09:52:21.387
> 
> 标签：javascript, sql, sqlite, node.js

我的知识在这里存在差距，我在互联网上找不到答案。

基本上我正在制作一个 node.js 应用程序，它使用 socket.io 从 SQLite 数据库推送条目。

我在这里使用 SQLite 的实现-> [https://github.com/developmentseed/node-sqlite3](https://github.com/developmentseed/node-sqlite3)

我正在尝试执行该语句：

```
db.serialize(function() {
        db.run("SELECT * FROM messages WHERE id=?", messageNum, function(err, row) {
            console.log(row.id);            
        });
    }); 
```

我找不到文档。它目前正在抛出此错误：

无法读取未定义的属性“id”

我基本上猜到了语法......有人知道它实际上是什么吗？

**编辑**

我现在用一个效率极低的解决方案解决了这个问题：

```
db.serialize(function() {

        db.each("SELECT id, msg, date FROM messages", function(err, row) {
            if(row.id === messageNum){
                console.log(row.id);    
            }
        });

    }); 
```

不过，如果有人能在某个时候为我指出正确的方向，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:29:42.650

阅读[文档](https://github.com/developmentseed/node-sqlite3/wiki/API)——该`run`函数不返回任何数据。

该`each`函数支持参数，就像`run`：

```
db.each("SELECT id, msg, date FROM messages WHERE id = ?",
        messageNum,
        function(err, row) {
            console.log(row.id);
        }); 
```

# c# - 具有属性的多对多映射 - 主键是外键

> ID：12797335
> 
> 赞同：0
> 
> 时间：2012-10-09T09:52:27.580
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我无法使用属性关系映射我的多对多。很像这里的问题

[fluent nhibernate - 具有属性的多对多映射](https://stackoverflow.com/questions/5028172/fluent-nhibernate-many-to-many-mapping-with-attribute)

但是我的中产阶级没有主键，而是由其他两个班级的 ID 组成。

报价单品类（中类）

```
public class QuotationSKUCost : Entity
{
    public virtual decimal UnitPrice { get; set; }
    public virtual Quotation Quotation { get; set; }
    public virtual QuotationRequestSKU QuotationRequestSKU { get; set; }
} 
```

报价类

```
public class Quotation : Entity
{
    public virtual int Id { get; set; } 
    public virtual DateTime ValidUntil { get; set; }
    public virtual string Data { get; set; }
    public virtual ICollection<QuotationSKUCost> QuotationSKUCosts { get; set; }
} 
```

报价请求 SKU

```
public class QuotationRequestSKU : Entity
{
    public virtual int Id { get; set; }
    public virtual int Quantity { get; set; }
    public virtual ICollection<QuotationSKUCost> QuotationSKUCost { get; set; }
} 
```

中产阶级映射！！

```
 public QuotationSKUCostMapping()
    {
        Table("QuotationSKUCost");
        CompositeId() //need to map QuotationId and QuotationRequestSKUid as Composite key
          .KeyProperty(x => x.Quotation, "QuotationId")
          .KeyReference(x => x.QuotationRequestSKU, "QuotationRequestSKUId");
        Map(x => x.UnitPrice);
    } 
```

我尝试调试时遇到的错误是：

> *无法确定类型：ORM.Entities.Quote.Quotation、ORM、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null，对于列：NHibernate.Mapping.Column(QuotationId)*

*编辑：*添加报价映射

```
 public QuotationMapping()
    {
        Id(x => x.Id).Column("QuotationId");
        Map(x => x.ValidUntil);
        Map(x => x.Data);
        HasMany(x => x.QuotationSKUCosts).KeyColumn("QuotationId");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:54:08.993

看了很久才找到答案

```
 .KeyProperty(x => x.Quotation, "QuotationId")
          .KeyReference(x => x.QuotationRequestSKU, "QuotationRequestSKUId"); 
```

应该

```
 .KeyReference(x => x.Quotation, "QuotationId")
          .KeyReference(x => x.QuotationRequestSKU, "QuotationRequestSKUId"); 
```

# python - python scrapy在尝试使用参数时无法找到蜘蛛

> ID：12797336
> 
> 赞同：0
> 
> 时间：2012-10-09T09:52:29.740
> 
> 标签：python, scrapy

我已经成功地为域的每个网页创建了一个蜘蛛检索链接。

我想做同样的事情，但是对于我托管的多个域，为此，我更喜欢使用我的蜘蛛，只需将其添加为要监视的域的参数。

[这里](http://doc.scrapy.org/en/latest/topics/spiders.html)的文档解释说我们应该明确定义构造函数并在其中添加参数，然后使用命令 scrapy crawl myspider 启动蜘蛛。

这是我的代码：

```
class MySpider(BaseSpider):
    name= 'spider'

    def __init__(self, domain='some_domain.net'):
        self.domain = domain
        self.allowed_domains = [self.domain]
        self.start_urls = [ 'http://'+self.domain ]

    def parse(self, response):
        hxs = HtmlPathSelector(response)
        for url in hxs.select('//a/@href').extract():
            if not url.startswith('http://'):
                url= URL + url 
            print url
        yield Request(url, callback=self.parse) 
```

然而，启动

```
scrapy crawl spider -a domain='mydomain.my_extension' 
```

返回：

```
ERROR: unable to find spider: spider 
```

当我启动相同的代码，但没有显式构造函数时，我不能用 crawl 来做到这一点，我必须使用这个命令：

```
scrapy runspider /path/to/spider/spider.py 
```

而且我不能在runspider中使用参数，我必须运行 crawl

为什么不能使用scrapy crawl spider？为什么蜘蛛的名字永远不会被scrapy crawl 读取，就像scrapy runpider 一样？

Scrapy 看起来很棒，但第二眼看起来很令人不安：/

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:18:11.067

如果你运行 scrapy 0.14 你应该在类级别而不是在实例级别设置变量。我认为这在 0.15 中发生了变化

我建议阅读文档：[http ://doc.scrapy.org/en/0.14/topics/spiders.html](http://doc.scrapy.org/en/0.14/topics/spiders.html)

```
class MySpider(BaseSpider):
        name= 'spider'
        domain = domain
        allowed_domains = [self.domain]
        start_urls = [ 'http://'+self.domain ]

    def parse(self, response):
        hxs = HtmlPathSelector(response)
        for url in hxs.select('//a/@href').extract():
            if not url.startswith('http://'):
                url= URL + url 
            print url
        yield Request(url, callback=self.parse) 
```

# javascript - 如何使用 Javascript 发出多部分/表单数据 POST 请求？

> ID：12797340
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:52:39.113
> 
> 标签：javascript, file-upload

有人知道如何在 javascript 中制作 multipart/form-data 吗？有插件支持吗？

我正在使用 REST api 以 JSON 格式提交表单，现在我必须上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:15:04.510

最后我得到了 HTML5 FormData 通过 Ajax 请求上传文件.... :)

供参考：[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)

# json - 在 MVC3 中显示从 JSON 到表的数据

> ID：12797343
> 
> 赞同：2
> 
> 时间：2012-10-09T09:52:42.307
> 
> 标签：json, asp.net-mvc-3

我在 MVC3 项目的 .aspx 视图中有一个表格。我在 MVC3 中使用 .aspx 视图而不是 Razor 引擎或 .cshtml 视图。我的 jquery 中有一个承保函数，它从控制器中获取一个 JSON 对象，其中包含一些值。

```
function GetUsers() {
    $.ajax({
        url: ('/Home/GetUsers'),
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(),

        success: function (result) {
            alert(result.length);
            var partnersTable = $('#PartnersTable');
            partnersTable.html();

        },
        error: function () { alert("error"); }
    });
} 
```

现在我的视图中有一张桌子

```
<div id = "topGrid">
    <table id="PartnersTable" style="float: left; width: 49%">
        <th style="width: 75%">Partner</th>
        <th style="width:25%">Users</th>
    </table> 
```

这就是我获取 JSON 对象的方式。现在它只是虚拟数据，但稍后将从 DB 中填充

```
public JsonResult GetUsers()
        {
            var model = new List<UsersModel>();
            var item = new UsersModel();
            for (int i = 1; i <= 10; i++)
            {
                item.Partner = "Partner" + Convert.ToString(i);
                item.Count = i;
                model.Add(item);
            }
            return Json(model, JsonRequestBehavior.AllowGet);
        } 
```

我需要在我的表中显示来自 JSON 对象上方的数据。我怎样才能做到这一点？

我对 MVC3 完全陌生，所以如果我错过了回答这个问题所需的任何内容，请告诉我，请尽可能详细。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:06:24.183

您可以考虑两种方法。

1.  让您的控制器操作直接返回包含表数据的部分视图，这样您就不必执行 javascript 模板
2.  使用 JSON 并做 javascript 模板

让我们看看第一种方法：

```
public ActionResult GetUsers()
{
    var model = new List<UsersModel>();
    for (int i = 1; i <= 10; i++)
    {
        var item = new UsersModel();
        item.Partner = "Partner" + Convert.ToString(i);
        item.Count = i;
        model.Add(item);
    }
    return PartialView(model);
} 
```

接下来，您将拥有一个相应的局部视图，其中将包含表格的相应部分：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<MvcApplication1.Models.UsersModel>>" %>
<% foreach (var user in Model) { %>
    <tr>
        <td><%: user.Partner %></td>
        <td><%: user.Count %></td>
    </tr>
<% } %> 
```

然后在您的主视图中，您将拥有表格：

```
<table id="PartnersTable" style="float: left; width: 49%" data-url="<%= Url.Action("GetUsers", "Home") %>">
    <thead>
        <tr>
            <th style="width: 75%">Partner</th>
            <th style="width:25%">Users</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

最后使用 AJAX 填充表格的主体：

```
var table = $('#PartnersTable');
$.ajax({
    url: table.data('url'),
    type: 'GET',
    cache: false,
    context: table,
    success: function (result) {
        this.html(result);
    },
    error: function () { alert("error"); }
}); 
```

现在让我们看看第二种方法，它包括让控制器操作返回 JSON 并手动构建表的 HTML 模板：

```
public ActionResult GetUsers()
{
    var model = new List<UsersModel>();
    for (int i = 1; i <= 10; i++)
    {
        var item = new UsersModel();
        item.Partner = "Partner" + Convert.ToString(i);
        item.Count = i;
        model.Add(item);
    }
    return Json(users, JsonRequestBehavior.AllowGet);
} 
```

进而：

```
var table = $('#PartnersTable');
$.ajax({
    url: datble.data('url'),
    type: 'GET',
    cache: false,
    context: table,
    success: function (users) {
        var tableBody = this.find('tbody');
        tableBody.empty();
        $.each(users, function(index, user) {
            $('<tr/>', {
                html: $('<td/>', {
                    html: user.Partner
                }).after($('<td/>', {
                    html: user.Count
                }))
            }).appendTo(tableBody);
        });
    },
    error: function () { alert("error"); }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:58:34.590

我会考虑使用 jQuery 插件，比如 jqGrid (http://www.trirand.com/blog/) 可以从 JSON 创建表

或者，您可以创建一个局部视图并在控制器中呈现它并返回生成的 HTML 以填充到此页面上。允许对表进行强类型定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:03:00.540

不确定返回 JSON 是否是您最好的选择。使用 JSON，您需要一些方法将 JSON 对象转换为可以放置在 DOM 上的元素。这样做的许多策略，包括模板化和通过代码构建元素。

在这种情况下，最好让控制器方法**从部分视图发送回 HTML 而不是 JSON**。为此，您需要执行以下操作。

改变：-

```
 contentType: 'application/json' 
```

到：-

```
 contentType: 'html' 
```

更改控制器方法以返回 ActionResult 而不是 JsonResult。

添加一个呈现整个表格的新局部视图。

在您的标记中保留 div #topGrid。

改变：-

```
var partnersTable = $('#PartnersTable');
partnersTable.html(); 
```

到：-

```
var tableContainer = $('#topGrid');
tableContainer.html(result); 
```

我觉得不同的方法，但更适合您的要求。

# c# - 长按按钮

> ID：12797351
> 
> 赞同：7
> 
> 时间：2012-10-09T09:53:10.977
> 
> 标签：c#, winforms, button

我想`Button`在长时间按下 a 时重复一个动作，例如 MP3 阅读器的前进按钮。WinForm 中是否存在现有的 c# 事件？

我可以处理该`MouseDown`事件以启动一个计时器，该计时器将执行该操作并在`MouseUp`事件上停止它，但我正在寻找一种更简单的方法来解决这个问题 => 即：没有`Timer`（或线程/任务......）的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T10:35:26.607

更新：最短的方式：

使用[`Anonymous Methods`](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=VS.100%29.aspx)和`Object Initializer`：

```
public void Repeater(Button btn, int interval)
{
    var timer = new Timer {Interval = interval};
    timer.Tick += (sender, e) => DoProgress();
    btn.MouseDown += (sender, e) => timer.Start();
    btn.MouseUp += (sender, e) => timer.Stop();
    btn.Disposed += (sender, e) =>
                        {
                            timer.Stop();
                            timer.Dispose();
                        };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T10:51:49.513

最短的方式（并且没有任何任务/线程/计时器和秒表）:)

```
DateTime sw;
bool buttonUp = false;
const int holdButtonDuration = 2000;
private void btnTest_MouseDown(object sender, MouseEventArgs e)
{
    buttonUp = false;
    sw = DateTime.Now;
    while (e.Button == MouseButtons.Left && e.Clicks == 1 && (buttonUp == false && (DateTime.Now - sw).TotalMilliseconds < holdButtonDuration))
        Application.DoEvents();
    if ((DateTime.Now - sw).TotalMilliseconds < holdButtonDuration)
        Test_ShortClick();
    else
        Test_LongClick();
}
private void btnTest_MouseUp(object sender, MouseEventArgs e)
{
    buttonUp = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:01:10.457

您可以在 MouseDown 和 MouseUp 之间使用计时器。

```
MouseDownEvent

Timer tm1;

MouseUpEvent

Timer tm2; 
```

您可以在两个计时器之间轻松处理它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:05:10.433

您需要在按下按钮时执行一些操作，例如在 MP3 曲目中跳过几秒钟。

启动一个在 mouseUp 上被取消的计时器，它在按钮按下时定期（100 毫秒？）触发这种工作对我来说似乎是可行的。易于实现并且在 UI 上是非阻塞的。

更简单的解决方案可能会导致 UI 阻塞。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:02:23.413

> 我可以处理 MouseDown 事件来启动一个计时器，该计时器将执行该操作并在 MouseUp 事件上停止它，但我正在寻找**一种更简单的方法来解决这个问题**。

您可以通过以可重用的方式编写一次来使其更容易。您可以派生自己的`Button`具有这种行为的类。

或者编写一个可以附加到任何按钮的类来赋予它这种行为。例如，您可以执行以下操作：

```
class ButtonClickRepeater
{
    public event EventHandler Click;

    private Button button;
    private Timer timer;

    public ButtonClickRepeater(Button button, int interval)
    {
        if (button == null) throw new ArgumentNullException();

        this.button = button;
        button.MouseDown += new MouseEventHandler(button_MouseDown);
        button.MouseUp += new MouseEventHandler(button_MouseUp);
        button.Disposed += new EventHandler(button_Disposed);

        timer = new Timer();
        timer.Interval = interval;
        timer.Tick += new EventHandler(timer_Tick);
    }

    void button_MouseDown(object sender, MouseEventArgs e)
    {
        OnClick(EventArgs.Empty);
        timer.Start();
    }

    void button_MouseUp(object sender, MouseEventArgs e)
    {
        timer.Stop();
    }

    void button_Disposed(object sender, EventArgs e)
    {
        timer.Stop();
        timer.Dispose();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        OnClick(EventArgs.Empty);
    }

    protected void OnClick(EventArgs e)
    {
        if (Click != null) Click(button, e);
    }
} 
```

然后，您将按如下方式使用它：

```
private void Form1_Load(object sender, EventArgs e)
{
    ButtonClickRepeater repeater = new ButtonClickRepeater(this.myButton, 1000);
    repeater.Click += new EventHandler(repeater_Click);
} 
```

或更简洁地说，因为您不需要保留对`ButtonClickRepeater`：

```
private void Form1_Load(object sender, EventArgs e)
{
    new ButtonClickRepeater(this.myBbutton, 1000).Click += new EventHandler(repeater_Click);
} 
```

# python - 熊猫转置 concat()

> ID：12797352
> 
> 赞同：1
> 
> 时间：2012-10-09T09:53:11.337
> 
> 标签：python, pandas

如何转置`DataFrame`返回的 by `concat()`？

```
df = DataFrame([
            dict(a=1, b=10, c=41),
            dict(a=1, b=20, c=42),
            ])

concat([df, df]).T 
```

我得到：

```
AttributeError: 'DataFrame' object has no attribute 'dtypes' ! 
```

如果我尝试：

```
concat([df, df]).T.to_dict() 
```

我得到：

```
RuntimeError: maximum recursion depth exceeded in cmp 
```

我认为这与索引中引入的重复项有关，`concat()`但没有找到解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:58:45.397

您可以使用以下方式指定层次索引`keys`：

```
In [288]: concatenated = concat([df,df], keys=['first', 'second'])

In [289]: print concatenated.T
   first      second    
       0   1       0   1
a      1   1       1   1
b     10  20      10  20
c     41  42      41  42

In [290]: print concatenated.T.to_dict().values()
[{'a': 1, 'c': 41, 'b': 10}, {'a': 1, 'c': 41, 'b': 10}, {'a': 1, 'c': 42, 'b': 20}, {'a': 1, 'c': 42, 'b': 20}] 
```

# ruby-on-rails - ActionController 缓存在开发和测试环境中不起作用

> ID：12797353
> 
> 赞同：0
> 
> 时间：2012-10-09T09:53:10.993
> 
> 标签：ruby-on-rails, caching, actioncontroller, page-caching

我有这个控制器：

```
class PagesController < ApplicationController
  caches_page :index

  def index
  end
end 
```

并`action_controller.perform_caching`为每个环境启用。

在生产环境中，一切都按预期运行，缓存页面存储在 public/cache/index.html 中，但对于开发和测试，index.html 的缓存版本在每次请求时都会重新生成。

我正在使用 Rails 3.1.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:44:59.610

尝试更改您的`config.cache_classes`设置，我不能保证这会有所帮助，在开发模式下，rails 通常会重新加载所有内容。

[http://guides.rubyonrails.org/configuring.html](http://guides.rubyonrails.org/configuring.html)

# java - 如何从android中的静态方法调用非静态方法

> ID：12797355
> 
> 赞同：3
> 
> 时间：2012-10-09T09:53:12.943
> 
> 标签：java, android, variables, static-methods, android-context

我在从静态方法调用非静态方法时面临一个大问题。

这是我的代码

```
Class SMS
{
    public static void First_function()
    {
        SMS sms = new SMS();
        sms.Second_function();
    }

    public void Second_function()
    {
        Toast.makeText(getApplicationContext(),"Hello",1).show(); // This i anable to display and cause crash
        CallingCustomBaseAdapters();    //this was the adapter class and i anable to call this also
    } 
```

我能够调用 Second_function 但无法获取 Toast 和 CallCustomBaseAdapter() 方法，发生崩溃。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T09:58:44.277

```
 public static void First_function(Context context)
  {
    SMS sms = new SMS();
    sms.Second_function(context);
  }

  public void Second_function(Context context)
  {
    Toast.makeText(context,"Hello",1).show(); // This i anable to display and cause crash
  } 
```

实现这一点的唯一解决方案是您需要将当前上下文作为参数传递。我只为 Toast 编写了代码，但您需要根据您的要求对其进行修改。

从您的活动`First_function(getApplicationContext())`等传递上下文。

对于静态字符串

```
public static String staticString = "xyz";

public static String getStaticString()
{
  return staticString;
}

String xyz = getStaticString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:55:41.843

你应该有一个上下文的引用。您正在尝试从 SMS 实例中获取应用程序上下文。

我猜您是从 Activity 或 Service 调用 First_function。所以你可以这样做：

```
Class SMS
{
    public static void First_function(Context context)
    {
        SMS sms = new SMS();
        sms.Second_function(context);
    }

    public void Second_function(Context context)
    {
        Toast.makeText(context,"Hello",1).show(); // This i anable to display and cause crash
        CallingCustomBaseAdapters();    //this was the adapter class and i anable to call this also
    } 
```

然后，从您的活动中：

```
SMS.First_function(this); //or this.getApplicationContext() 
```

# django - django popen“无效语法”

> ID：12797356
> 
> 赞同：0
> 
> 时间：2012-10-09T09:53:15.943
> 
> 标签：django, popen

我是 Django 的新手。我想从某个角度运行一些命令。就像是：

```
 python /path/to/the/script/run.py -id 11 --user root --run_digital_id 29 --workflow map --lib_group library.yaml --log log.conf 
```

我用这个方法来调用：

```
def run_in_background(cmd):
    logging.info('running ' + cmd)
    p = subprocess.Popen(cmd, shell=True, stdout=PIPE, stderr=PIPE)
    output, errors = p.communicate()
    print output
    print errors
    logging.debug(output)
    logging.debug(errors) 
```

该命令被传递给方法 run_in_background()。当我复制命令并在终端上运行时，它运行良好。但是当我从 Django 的某个视图运行它时，它会报告：

```
Traceback (most recent call last):
  File "/path/to/the/script/run.py", line 11, in ?
    import conf, util
  File "/path/to/the/script/conf.py", line 11
    class Settings():
                   ^
SyntaxError: invalid syntax 
```

呃，当我从一些“普通”python 代码中调用它时，run_in_background 方法也可以工作。

错误位置是我程序的第一行。我怀疑路径有问题......但是经过长时间的搜索，我没有得到原因。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:11:19.380

似乎这是解决方案！

在某些 python 版本中，用空括号定义类`class Settings():`无效，您可能希望将其更改为`class Settings(object):`

# iphone - 更改时区后，是否应该更改 coredata 中的 NSDate 数据？

> ID：12797366
> 
> 赞同：0
> 
> 时间：2012-10-09T09:53:31.097
> 
> 标签：iphone, nsdate

我偶然发现了这个问题。

问题是我正在纽约编写我的应用程序，这是一个 ALARM 应用程序。我在早上 7:00 设置了闹钟。并且它已存储在核心数据中。

现在我在韩国。好消息是 NSNotification 的时间已自行更改，因此它在早上 7:00 的正确时间被解雇。但它在我的闹钟应用程序中显示为晚上 8:00。（但顺便说一句，它是在早上被解雇的，这很酷！）

这是完全可以理解的。我明白了。因为 NSDate 只是数字，应该是这样的。

但似乎只有解决这个问题的方法，那就是当用户设置时间并更改 coredata 中的 NSDate 数据时一起保存时区，如果时区会改变。

这意味着我实际上必须更改 COREDATA 中的 NSDATE 数据！

有没有比这更酷的方法来解决它，比如 NSNotification？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:49:31.330

这似乎是一个显示问题。当您将时间显示为字符串并进行适当的计算时，您可以确定时区。

我认为警报响起是因为您可能使用了计时器或本地通知，一旦设置它当然不会受到影响。

在将时间显示为字符串时，存储时区以帮助计算可能不是一个坏主意。

# php - SQL 插入速度的变化

> ID：12797368
> 
> 赞同：7
> 
> 时间：2012-10-09T09:53:35.860
> 
> 标签：php, mysql, performance, insert

我正在编写的脚本旨在更新记录使用国家和所有 IP 地址（或几乎所有 IP 地址）状态的数据库表。目前，我保持简单，仅从 5 个 RIR（区域互联网注册机构）获取数据并将其保存到我的数据库中。

最初速度是不切实际的，但通过减少日志中的信息量并将 SQL 插入分组为 1000 个组并使用单个查询，速度得到了显着提高。但是，现在运行脚本时，SQL 插入的速度变化很大，我想知道是否有人知道原因。

这是我记录的一些速度。在测试中，我将 PHP 中执行脚本迭代所用的时间和应用 sql 语句所用的时间分开，我没有将 PHP 时间包括在下面的列表中，因为效果可以忽略不计；即使是最大的数据块也不超过 1 秒。

**测试速度**（插入的数据行数始终保持不变）

**测试1** 总SQL执行时间：33秒

**测试 2** 总 SQL 执行时间：72 秒

**测试 3** 总 SQL 执行时间：78 秒

其他测试继续在约 30 秒和约 80 秒之间波动。

我有两个问题：

1）我应该接受这些差异作为世界的方式，还是有理由？

2）我对将 ~185000 行插入集中到一个查询中感到紧张。有什么理由我应该避免对这些插入使用一个查询？我以前没有处理过一次保存这么多的数据。

谢谢

__

数据库表如下。

Sorage 引擎 - InnoDB

**列：**

id - int，主键

注册表 - varchar(7)

代码 - varchar(2)

类型 - varchar(4)

开始 - varchar(15)

值 - 整数

日期 - 日期时间

状态 - varchar(10)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:52:52.220

```
1) Should I accept these disparities as the way of the world, or is there a reason for them? 
```

速度的变化可能是由于使用磁盘 IO 的竞争进程 - 所以等待资源。如果这是一个生产服务器而不是一个单独的测试服务器，那么肯定有一些其他进程正在请求访问磁盘。

```
2) I felt nervous about lumping the ~185000 row inserts into one query. Is there any reason I should avoid using one query for these inserts? I've not worked with this amount of data being saved at one time before. 
```

您还应该将插入分成 X 个插入组，并将每个组作为一个事务插入。

除了通过实验以外的其他方式确定 X 的值是困难的。

将插入分组到事务中可确保仅在每个事务之后而不是在每个（自动提交）插入之后才将数据写入（提交）到磁盘。

这对磁盘 IO 有很好的影响，如果您将多个插入分组到一个事务中，则可能会对可用内存产生不良影响。如果未提交的数据量对于当前内存来说太大，DBMS 将开始将数据写入内部日志（在磁盘上）。

所以 X 取决于插入的数量、与每个插入相关的数据量、允许的内存/用户/会话参数。还有很多其他的事情。

* * *

[percona](http://www.percona.com/downloads/percona-monitoring-plugins/)有一些很酷的（免费）工具。它们帮助您监控数据库活动。

您还可以查看[vmstat](http://en.wikipedia.org/wiki/Vmstat) watch -n .5 'vmstat'

查看生产环境的活动写入磁盘的数据量和变化。

启动您的脚本并等待，直到您注意到写入磁盘的字节数有所增加。如果写上一步几乎是一个恒定值（高于正常的生产使用），那么它就是颠簸和交换，如果它是有节奏的，那么它只是为提交而写。

# java - 通过蓝牙将图像从android发送到PC

> ID：12797372
> 
> 赞同：0
> 
> 时间：2012-10-09T09:53:50.497
> 
> 标签：java, android, bluetooth

我正在制作一个应用程序来将图像从 android 设备发送到在 PC 上运行的 java 应用程序。客户端（android）上的图像是a `Bitmap`，我将其转换为a `Byte Array`，以便通过蓝牙将其发送到服务器。

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();  
 ImageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);     
 byte[] b = baos.toByteArray();
 mBluetoothService.write(b); 
```

请注意，位图来自一个已经压缩的文件，所以我不需要再次压缩它。

我在服务器（Java）上使用以下代码：

```
 byte[] buffer = new byte[1024*1024];
  int bytes;
  bytes = inputStream.read(buffer);
  ByteArrayInputStream bais = new ByteArrayInputStream(buffer);
  BufferedImage image = ImageIO.read(bais);
  ImageIO.write(image, "jpg", new File("c:/users/image.jpg")); 
```

客户端没有错误。但是我在服务器端（java应用程序）得到了这个异常：

java.lang.IllegalArgumentException：im == null！

在 javax.imageio.ImageIO.write（未知来源）

在 javax.imageio.ImageIO.write（未知来源）

在 com.luugiathuy.apps.remotebluetooth.ProcessConnectionThread.run(ProcessConnectionThread.java:68)

在 java.lang.Thread.run（未知来源）

所以`ImageIO.read()`没有返回任何东西。似乎它无法将字节数组识别为图像。我在互联网上搜索过，但没有任何东西可以帮助我解决这个问题。有谁有想法吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:57:54.837

我终于可以弄清楚了！碰巧客户端（Android）创建了一个用于接收的线程和一个用于写入的线程。因此，当我发送图像时，它是以块的形式发送的，即 Android 操作系统时不时地暂停写入线程，因此服务器端（Java 应用程序）上的 inputStream 看到的是图像是分块发送的。所以，`ImageIO.read()`不是成功读取图像而是其中的一部分，这就是为什么我得到“java.lang.IllegalArgumentException：im == null！”，因为不能只用一个块创建图像。

**解决方案：**

除了图像之外，我还向服务器发送了一个“文件结尾”字符串，以便它知道文件何时完成（我想有更好的方法来解决这个问题，但这是可行的）。在服务器端，在一个 while 循环中，我接收所有字节块并将它们放在一起，直到收到“文件结尾”。编码：

安卓客户端：

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ImageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);     
    byte[] b = baos.toByteArray();
    mBluetoothService.write(b);
    mBluetoothService.write("end of file".getBytes()); 
```

Java服务器：

```
 byte[] buffer = new byte[1024];

    File f = new File("c:/users/temp.jpg");
    FileOutputStream fos = new FileOutputStream (f);

    int bytes = 0;
    boolean eof = false;

    while (!eof) {

        bytes = inputStream.read(buffer);
        int offset = bytes - 11;
        byte[] eofByte = new byte[11];
        eofByte = Arrays.copyOfRange(buffer, offset, bytes);
        String message = new String(eofByte, 0, 11);

        if(message.equals("end of file")) {

            eof = true;

        } else {

            fos.write (buffer, 0, bytes);

        }

    }
    fos.close(); 
```

希望它可以帮助某人。

# firefox - vimperator中如何退出查看源模式？

> ID：12797377
> 
> 赞同：17
> 
> 时间：2012-10-09T09:54:18.640
> 
> 标签：firefox, vimperator

在 Vimperator 中，当我点击`g``f`它时，我需要查看源代码。如何退出查看源代码并返回实际网页？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T10:04:27.293

我的错。源页面上的A`g``f`再次返回到实际页面

# java - 如何从表单接收值？

> ID：12797378
> 
> 赞同：0
> 
> 时间：2012-10-09T09:54:19.750
> 
> 标签：java, ajax, forms, jsp, struts2

嗨，我怎样才能从我的 JSP 页面上的表单中接收一个值？该怎么办 ？一旦用户单击提交，JSP 就有一个表单，表单的值应该发送到 java 类，但 java 类不接收这些值。JSP 的属性为小写（值），Java 类的变量为大写。（价值）

```
 <div id=“Myform">
     <s:form action=“inputs">
         <s:textfield name=“value" label=“input:"/>
         <s:submit/>
     </s:form>
   </div>

   <sx:div>
      <div id=“Values">
        <div id=“Value”&gt;Value is:${myClass.value}</div>
        <s:form action=“SubmitValue" >
          <s:submit/>  //When I click on this one, it does not send the value to class
        </s:form>
  </sx:div>

  private String value;

  public void Values(){
    System.out.println(“Value” + this.value);
  } 
```

我已经使用 Eclipse 生成了 getter 和 setter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:17:08.160

您必须从表单中提交一些内容才能在您的操作中包含某些内容。看看[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)。

如果您有带有属性的操作，`name`并且该属性设置了某个值，例如`Smit`，那么在 jsp 中，您可以使用`<s:property/>`标记来显示该值，并使用隐藏字段将该值提交回操作。

```
<sx:div>
  <div id=“Values">
    <div id=“Value”&gt;Value is:<s:property value="name"/></div>
    <s:form action=“SubmitValue" >
      <s:hidden name="name"/>
      <s:submit/>  //When I click on this one, it does not send the value to class
    </s:form>
</sx:div> 
```

# php - xpath使用PHP查找节点是否存在

> ID：12797379
> 
> 赞同：1
> 
> 时间：2012-10-09T09:54:24.863
> 
> 标签：php, dom, xpath

我想查找/创建查询运行后找到的所有元素的 xpath。

我试过了，但我卡住了。

此代码在所有元素/节点中搜索包含字母“t”的任何值。如果找到 't'，我想知道该元素的 xpath：

```
<?php

$dom = new DOMDocument();

@$dom->loadHTMLFile('http://www.linkbook.co/');

//use DOMXpath to navigate the html with the DOM
$dom_xpath = new DOMXpath($dom);

$elements = $dom_xpath->query("//*[text()[contains(., 't')]]");
var_dump($elements);
if (!is_null($elements)) {

  foreach ($elements as $element) {
  var_dump($element);
    echo "\n[". $element->nodeName. "]";

    $nodes = $element->childNodes;
    foreach ($nodes as $node) {
      echo $node->nodeValue. "\n";
    }

  }

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:59:19.207

[`DOMNode::getNodePath`](http://www.php.net/manual/en/domnode.getnodepath.php)正是这样做的，所以试试`echo $node->getNodePath()`。

# shell - 数据库和 Linux 监控工具

> ID：12797387
> 
> 赞同：0
> 
> 时间：2012-10-09T09:54:49.797
> 
> 标签：shell, unix, user-interface

我想创建一个可以监控我的进程（内存、cpu、状态等）以及数据库（积压等）的工具。这些进程在 Linux 上运行并使用 DB 作为 oracle。有许多不同的监控内容要添加到这个工具中。

这将在本地网络上报告。

所以为此我必须创建一个 GUI 。在后台，我将运行 shell 脚本和 sql 脚本来获取不同类型的数据并将数据转储到文件中。

**那么我应该用哪种语言编写 GUI 呢？**

最终用户将在 10,000 + 左右

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:59:46.050

从 Java 视图服务器和基于 Web 的 GUI (Flex/AJAX) 或 .NET GUI 开始，无论您对哪个更感兴趣，基于 Web 的实现都会稍微增加服务器的负载（.NET 所需的裸 Web 服务之上的额外层） ）。

以及收集器本身的原因 - Java 服务器将 XML/JSON/BinaryTCP 接口暴露给外部世界。任何 bash/perl 脚本都可以使用 JSON 轻松发布到其中。

Java 是必须公开多个异构接口的任何非超高性能和低延迟软件的最佳选择，因为大多数工业质量的构建块都可以从社区免费获得，并且可以很好地协同工作，这要归功于大量的同一个社区的标准化工作。

**参考**

*   [Servlet](http://www.oracle.com/technetwork/java/index-jsp-135475.html)，一种服务于客户端请求的 Java 技术（特别是 HTTP 和 Web 服务）
*   [JAX-WS](http://en.wikipedia.org/wiki/Java_API_for_XML_Web_Services)，一种用于通过 Servlet 公开 SOAP Web 服务的 Java 技术
*   [Grails](http://en.wikipedia.org/wiki/Grails_%28framework%29)是一个基于 Servlet 的 Web 框架的示例，[Struts](http://en.wikipedia.org/wiki/Apache_Struts)和[JSF](http://en.wikipedia.org/wiki/JavaServer_Faces)是其他示例；如果您使用基于 Web 的 GUI，这些可能会加速开发过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:14:04.450

其实这不是你**应该**使用哪种语言的问题，而是你**可以**使用哪种语言的问题。

如果您指的 GUI 是 web-GUI，那么有很多语言可以完成这项工作。java、php、python、ruby... 和应用程序/Web 服务器/容器可能会有所不同，具体取决于您选择的技术。

我建议用你最了解的技术（语言）来做。

# asp.net-mvc-4 - ASP.NET MVC4 模型绑定

> ID：12797394
> 
> 赞同：7
> 
> 时间：2012-10-09T09:55:08.657
> 
> 标签：asp.net-mvc-4, action-filter

有谁知道模型绑定何时发生在请求生命周期中？我问的原因是我遇到了一些本地化问题。

模型绑定是否在 OnActionExecuting 执行之前发生？

目前，我在全局操作过滤器 OnActionExecuting 方法中设置了当前区域性，但是在执行模型绑定时没有考虑到这一点。请求是一个 POST。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:28:20.830

我建议您将文化设置在更早的位置，而不是在操作过滤器中。在我当前的项目中，我`Application_AcquireRequestState`在 Global.asax.cs 中设置了活动文化。你可以试试。

```
protected void Application_AcquireRequestState(Object sender, EventArgs e)
{
   // set the culture
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:44:08.580

我发现在 MVC 应用程序中，最好的方法是使用**自定义路由**处理程序并在该处理程序中设置区域性。`ModelBinders`这与数据注释中的本地化资源完美结合。

```
public class MultiCultureMvcRouteHandler : MvcRouteHandler
{
    protected override IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        // get culture from route data
        var culture = requestContext.RouteData.Values["culture"].ToString();
        var ci = new CultureInfo(culture);
        Thread.CurrentThread.CurrentUICulture = ci;
        Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(ci.Name);
        return base.GetHttpHandler(requestContext);
    }
} 
```

[Alex Adamyan](http://adamyan.blogspot.ch/2010/07/addition-to-aspnet-mvc-localization.html)有一篇很棒的博客文章描述了这种技术。

另请参阅关于 SO 的[问题和答案。](https://stackoverflow.com/a/6788690/63733)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:10:01.940

**BindModel 先被击中**。您的本地化可以根据请求进行更改吗？如果是这样，您可以覆盖默认模型绑定器，并在需要时在那里设置您的语言环境。按照下面的链接创建自定义模型绑定器

[用于泛型类型的 ASP.NET MVC 模型绑定器](https://stackoverflow.com/questions/1487005/asp-net-mvc-model-binder-for-generic-type)

（为了证明自己，只需输入两个断点，您就会看到顺序）

我认为可能有更好的地方来设置本地化，但需要更具体的信息，这可能是一个不同的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T13:19:09.947

我也遇到了同样的问题。当模型绑定器具有无效数据时，它会在 ActionFilter(s) 之前运行。

我不喜欢建议的解决方案，因为弄乱路由不是我的首选解决方案。监听 Application_AcquireRequestState 是有问题的，因为这个事件会针对每个请求触发，而不仅仅是路由到 MVC 控制器的请求。

我最终在内部编写了`IControllerFactory`该使用的自定义实现`DefaultControllerFactory`并在方法内部执行本地化代码`CreateController`。
这也不理想，希望对您有所帮助。

```
 public class PluggableControllerFactory : IControllerFactory {

    private readonly IControllerFactory innerControllerFactory;

    public PluggableControllerFactory() {
      innerControllerFactory = new DefaultControllerFactory();
    }

    public IController CreateController(System.Web.Routing.RequestContext requestContext, string controllerName) {
      // Run your culture localization here

      return innerControllerFactory.CreateController(requestContext, controllerName);
    }

    public System.Web.SessionState.SessionStateBehavior GetControllerSessionBehavior(System.Web.Routing.RequestContext requestContext, string controllerName) {
      return innerControllerFactory.GetControllerSessionBehavior(requestContext, controllerName);
    }

    public void ReleaseController(IController controller) {
      innerControllerFactory.ReleaseController(controller);
    }

  }
} 
```

# unity3d - Android游戏开发使用unity 3D教程

> ID：12797403
> 
> 赞同：8
> 
> 时间：2012-10-09T09:55:52.430
> 
> 标签：unity3d

我是统一 3D 的新手。我正计划使用 Unity 3D 开发一个 android 游戏，我在网上搜索了 Unity3D 中的 android 相关教程，但找不到一个好的开发人员教我一个应用程序启动，所以请大家建议我一个网站我可以启动。我需要安卓教程，而不是独立的平台教程。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:59:58.510

您可以只使用[Google](https://www.google.es/#hl=en&safe=off&sa=X&ei=U_VzUML9OsSChQeDr4DwBg&spell=1&q=unity3d+android+tutorial&sqi=2&ved=0CBkQBSgA&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=8255192539267d5f&biw=1280&bih=711)或[Unity3D 官方文档](http://docs.unity3d.com/Documentation/Manual/android-GettingStarted.html)。

# scala - 动态提取元组值

> ID：12797405
> 
> 赞同：1
> 
> 时间：2012-10-09T09:56:04.747
> 
> 标签：scala, tuples, extract, on-the-fly

有没有一种方法可以动态地从元组中提取值？

让我们假设元组：

```
val x = ("1", 2, "3") 
```

和方法：

```
def doFoo(value1: String, value2: Int, value3: String)={} 
```

如何使用元组“x”调用*doFoo()*？像 doFoo(x) 这样的东西，元组中的值是动态提取的，以匹配方法签名。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T09:58:30.537

```
(doFoo _).tupled(x) 
```

或者

```
Function.tupled(doFoo _)(x) 
```

# ios - 在包含为 git 子模块时，我是否必须分叉一个 3rd 方库才能进行小的更改？

> ID：12797408
> 
> 赞同：0
> 
> 时间：2012-10-09T09:56:23.660
> 
> 标签：ios, git-submodules, soundcloud

根据 SoundCloud API 的建议，我正在尝试在我的 iOS 应用程序中使用一些 3rd 方库。我按照他们的[教程](http://developers.soundcloud.com/docs/api/ios-quickstart)，`git submodule add`在每个必需的依赖项上运行。

但是，在编译时，我必须对依赖项目进行一些微小的调整，以使它们正确链接——纯粹是在项目设置中。

我以前从未使用过子模块，但据我所知，父回购跟踪子模块的特定提交，对吧？如果我想对 3rd 方库的项目文件进行一些小调整，以便团队成员可以从源中提取它，这是否意味着我必须先分叉每个依赖项并提交每个小项目设置，只是为了让它们可以包含在主仓库中？或者我可以对第 3 方库进行“本地”更改，然后将主仓库推送到原点吗？

这非常令人沮丧，因为我实际上并没有*更改*3rd 方库本身，这纯粹是我必须更改的设置，以便它们与我的特定项目正常工作。有没有一种方法可以在不完全分叉每个库的情况下在主仓库中包含调整？！

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T07:37:45.010

您必须将修改放在某个地方，以便其他人可以得到它们。这为您提供了两个选项，这两个选项都以“fork”一词开头。

1.  分叉回购并维护它。
2.  fork 存储库，然后进行更改，以便每个人都可以从中受益（例如，将您必须更改的选项设置为 done 类型的配置参数），然后将拉取请求发送回原始请求。在它被接受后，你就可以摆脱你的叉子了，其他和你一样的人就不需要跳这个舞了。

# jquery - 在jquery中将类添加到div中的文本项

> ID：12797415
> 
> 赞同：0
> 
> 时间：2012-10-09T09:56:36.750
> 
> 标签：jquery, append, addclass

我有一个包含个人名称的 div 'usercontainer'。我想为这些名称添加一个类，以便稍后可以添加悬停和单击功能。我正在使用下面的方法，但它不会将“namecontainerclass”添加到每个单独的名称，而只是附加到整个 div，因此当我将鼠标悬停在一个名称上时，整个 div 会改变颜色。

jQuery代码：

```
function display(userArray) {

for(i=0; i<userArray.length; i++)
{
    $('#usercontainer').append(userArray[i].name +'</br>').addClass('namecontainerclass');
}

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:58:41.987

```
$('#usercontainer')
    .append($('<div>')
        .text(userArray[i].name)
        .addClass('namecontainerclass')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:02:57.507

```
function display(userArray) {
    $.each(userArray, function(i,txt) {
        $('#usercontainer').append(
            $('<div />', {text: txt, 'class': 'namecontainerclass'})
        );
    });
}); 
```

# jquery - Chrome 事件触发在大型 DOM 中需要很长时间

> ID：12797416
> 
> 赞同：5
> 
> 时间：2012-10-09T09:56:39.010
> 
> 标签：jquery, performance, google-chrome, dom

我有一个相对较大的 DOM，并且在触发元素上的事件时注意到 chrome 中令人难以置信的性能下降。单个事件，例如：

```
myElem.trigger('myevent.myscope',arguments); 
```

需要 14 毫秒！！(22.0.1229.92 米)

firefox 15.0.1 和 msie 9 中的相同事件触发时间不到 1 毫秒！

该元素是一个 jquery 对象并已被缓存，因此在触发之前不会进行 DOM 查找。我正在使用 console.time()

```
console.time('trigger');
myElem.trigger('myevent.myscope',arguments);
console.timeEnd('trigger'); 
```

有人可以对这种情况有所了解吗

谢谢

加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:09:17.043

这不是您问题的直接答案。

但根据我在自定义事件方面的经验，我会避免使用触发器/jquery 事件。

取决于 jQuery 版本。触发器会在 dom 树上冒泡，这可能需要很长时间。

> “从 jQuery 1.3 开始，.trigger()ed 事件在 DOM 树中冒泡；事件处理程序可以通过从处理程序返回 false 或在传递给事件的事件对象上调用 .stopPropagation() 方法来停止冒泡。” -[扳机](http://api.jquery.com/trigger/)

我个人的解决方案是使用 Peter Higgins [Pubsub](https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js)。

我创建了一个 jsperf 测试，显示 jquery ' [on](http://api.jquery.com/on/) ' 的性能差异（蓝色是 pubsub，红色是 jquery，越长越好 [每秒操作数]）； ![PUBSUB 与 Jquery](../Images/041fa5e91db9bf505a77896cd7c3ad22.png) [http://jsperf.com/peter-higgins-pubsub-vs-tiny-pubsub](http://jsperf.com/peter-higgins-pubsub-vs-tiny-pubsub)

从现在开始，我在处理自定义事件时使用 pubsub，在处理单击、鼠标悬停等事件时使用 jquery。

只是我的2美分。

# iphone - iPhone 5 键盘尺寸

> ID：12797419
> 
> 赞同：5
> 
> 时间：2012-10-09T09:56:41.070
> 
> 标签：iphone, ios, uitextfield, ios6

我一直在 4 英寸和 3.5 英寸 iPhone 模拟器中测试我的应用程序，当在 4 英寸模拟器中以横向模式启动带有 UITextField 的键盘时，它被压扁了。它看起来像一个普通的 3.5 英寸键盘：

![在此处输入图像描述](../Images/8ee1cd22aa32b8a57871e44304206fb5.png)

我错过了一些告诉它正确伸展的东西吗？

请注意 - 我无法使用实际的 iPhone 5 设备进行测试。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:32:48.720

也许您的模拟器设置为 4 英寸型号，但运行的是 iOS5——这种设置在 iOS 模拟器中是可能的，但在野外不存在。

# android - mainactivity.java 出错

> ID：12797421
> 
> 赞同：2
> 
> 时间：2012-10-09T09:56:48.387
> 
> 标签：android

> **可能重复：**
> [R 无法解析为变量 - Hello World](https://stackoverflow.com/questions/8498869/r-cannot-be-resolved-to-a-variable-hello-world)

我正在开发我的第一个应用程序，但卡在`mainactivity.java`.

这是我的代码：

```
package com.nterface;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    /** Called when the user clicks the Send button */
    public void sendMessage(View view) {
        // Do something in response to button
    }

} 
```

线上出现错误`setContentView(R.layout.activity_main);`

此行有多个标记：

*   R 无法解析为变量
*   断点：MainActivity [line: 12]- onCreate(Bundle)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:04:51.823

首先清理你的项目然后运行。如果没有影响然后重新启动你的eclipse并清理项目并运行它。如果没有，请通过以下[链接](http://www.mybringback.com/travis-android-help/1/hello-world/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:58:11.397

你应该导入你的`R.java`，它应该在`com.nterface.R`

# mysql - id 具有自动增量，但也有另一列增加但不像自动增量那样

> ID：12797422
> 
> 赞同：0
> 
> 时间：2012-10-09T09:56:49.707
> 
> 标签：mysql

为了使这个快速：主键 ID 列具有自动增量，但我还有另一个称为事务 ID 的列，它不是唯一的，可以是 1 表示 3 行，然后 2 表示 4 行，3 表示另一个说 2 行，依此类推.

可以获取 MAX(transaction_id) 和 ++ 吗？有人说，当 2 或 3 个用户发起新事务时，可能会出现锁定问题，因此他们可以使用相同的 transaction_id。我不能在这个上使用 AUTO_INCREMENT。我是对还是错？

谢谢，阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:03:28.693

我有另一个字段描述了 transaction_id 的所有者...所以即使 transaction_id 具有相同的值，所有者也会不同...只是太担心 AUTO_INCREMENT 功能:)))

干杯

# mysql - 为 Mysql 触发器中的变量选择值

> ID：12797424
> 
> 赞同：2
> 
> 时间：2012-10-09T09:56:59.867
> 
> 标签：mysql, database, triggers, phpmyadmin

好的，我已经看到了许多类似的问题，但爬过答案并不能让我的触发器没有错误！
我需要的结果是：每当在数据库表中插入一个新值时`temp_pool`，它都会触发，如果新地址不等于先前的地址值，则与此相同`dev_id`，`NEW.dev_id`则将新值插入位置表。

这是查询（示例）：

```
CREATE TRIGGER filter 
after insert on geo.temp_pool
for each row
BEGIN
DECLARE OLD_ADDR VARCHAR(2048);
OLD_AADR = select address from temp_pool where dev_id like NEW.dev_id
order by date desc, time desc limit 1;
IF (OLD_ADDR != NEW.address) THEN
INSERT INTO a3380361_geo.location
VALUES (NEW.dev_id,NEW.address,NEW.lat,NEW.lng,NEW.date,NEW.time);
END IF;
END
$$ 
```

我正在使用 phpMyAdmin 编辑器并将分隔符设置为`$$`.

我得到的错误是：

> # 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 '= select address from temp_pool where 1 order by date desc, time desc limit 1; 附近使用 ' 在第 5 行

我坚信将值赋值给`SELECT`变量 [ `OLD_ADDR`] 存在一些问题，那么有什么方法可以解决我的问题吗？
逻辑很简单，从查询中可以理解需求，对吧？

接受所有意见和建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:58:58.820

代替：

```
 OLD_AADR = select address from temp_pool where dev_id like NEW.dev_id 
```

利用：

```
SET OLD_AADR = (select address 
                from temp_pool 
                where dev_id like NEW.dev_id 
                order by address 
                limit 1); 
```

或者使用非标准的`SELECT`赋值语句（不确定mysql是否支持）：

```
SELECT OLD_AADR = address from temp_pool where dev_id like NEW.dev_id
                  order by address 
                  limit 1; 
```

并不是说在这两种情况下，`SELECT`语句都必须只返回一个标量值。这就是我使用`LIMIT 1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-16T11:30:43.810

你注意到错字了吗？

OLD_ADDR OLD_AADR

# javascript - 如何为 jquery UI 对话框添加标题？

> ID：12797425
> 
> 赞同：1
> 
> 时间：2012-10-09T09:57:01.563
> 
> 标签：javascript, jquery, jquery-ui

如何为这种情况添加`title`一个`JqueryUI dialog box`。此`dialog`框按照`model`ruby​​ on rails 中的名称打开。

## html页面示例：

```
<%= link_to pro_generic_lookup_data_path("Enr::Rds::Section2009", format: :js), data: {remote: true} %> 
```

在这里，`pro_generic_lookup_data`有选项`uidialog box.`所以，它会打开取决于`model name("Enr::Rds::Section2009")`.

## JavaScript

```
var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) {
  var section_value = $(".cross-reference-section-value");
  var section_id = $(".cross-reference-section-value-id");
  var section_clear_img = $(".cross-reference-section-clear-img");
  section_id.val(id);
  section_value.text(to_s);
  section_value.css('display', 'inline');
  section_clear_img.css('display', 'inline');
  $(section_clear_img).on('click', function() {
    section_value.text('')
    section_id.val('')
    section_clear_img.css('display', 'none');
  });
  var question_link = $('#question_picker').attr('href');
  question_link = question_link.replace(/\?+$/, '');
  question_link = question_link + '?columns[enr_rds_section_id]=' + id;
  $('#question_picker').attr('href', question_link);
  $("#modal_popup").dialog("destroy");      
}; 
```

我有三个这样的字段。因此，我需要为所有三个字段分别指定一个标题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:09:47.787

除了一些基本格式和在适用的情况下使用链式选择器之外，代码很好。

```
var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) {
    var $section_value = $(".cross-reference-section-value");
    var $section_id = $(".cross-reference-section-value-id");
    var $section_clear_img = $(".cross-reference-section-clear-img");

    $section_id.val(id);    
    $section_value.text(to_s).css('display', 'inline');

    $section_clear_img.css('display', 'inline').on('click', function() {
        $section_value.text('')
        $section_id.val('')
        $section_clear_img.css('display', 'none');
    });

    var question_link = $('#question_picker').attr('href');
    question_link = question_link.replace(/\?+$/, '');
    question_link = question_link + '?columns[enr_rds_section_id]=' + id;
    $('#question_picker').prop('href', question_link);

    $("#modal_popup").dialog("destroy");      
}; 
```

# scheme - 返回符号 n 次

> ID：12797427
> 
> 赞同：2
> 
> 时间：2012-10-09T09:57:07.823
> 
> 标签：scheme

makelist 是一个过程，它接受一个项目和一个整数 n 并返回项目 n 次。

```
(define (makelist (n item)
    (cond
      [(null? item) '()]
      [else (cons item (makelist (- n 1)))]))) 
```

我的程序返回语法错误，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:01:49.027

你可以使用：`(make-list n item)`:)

您的语法错误是由于不正确的`define`.

它应该是：

```
(define (makelist n item) ... 
```

请注意，您`(`在`n`.

# mysql - MySQL IF 子句问题

> ID：12797428
> 
> 赞同：1
> 
> 时间：2012-10-09T09:57:17.733
> 
> 标签：mysql

```
mysql> SELECT
   -> IF(status='EndSP',reportId,'') as 'reportId_EndSP'
   -> FROM T_Name LIMIT 10;
+--------------+
| reportId_EndSP |
+--------------+
|                |
|                |
| 270241         |
|                |
| 270242         |
|                |
|                |
| 270244         |
|                |
|                |
+--------------+
10 rows in set (0.00 sec)

But i need to return only the row where status = 'EndSP' 
```

我不需要执行 else 子句。

我可以简单地通过写作来实现

```
SELECT reportId FROM T_Name where status='EndSP'; 
```

但我需要使用 if 或 case 来完成。

**编辑/更新**

我的实际查询看起来像

```
SELECT
   -> IF(status='EndSP',reportId,'') as 'reportId_EndSP',
   -> IF(status='EndSP',createdTS,'') as 'createdTS_EndSP',
   -> IF(status='BeginSP',reportId,'') as 'reportId_BeginSP',
   -> IF(status='BeginSP',createdTS,'') as 'createdTS_BeginSP'
   -> FROM T_Name HAVING reportId_EndSP!='' AND reportId_BeginSP!='' LIMIT  10; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:11:30.750

怎么样：

```
SELECT * FROM (
   SELECT
      IF(status='EndSP',reportId,'') as reportId_EndSP
      FROM T_Name) a
WHERE reportId_EndSP != '' LIMIT 10; 
```

演示[http://sqlfiddle.com/#!2/d1167/8](http://sqlfiddle.com/#!2/d1167/8)

或单选版本

```
SELECT
   IF(status='EndSP',reportId,'') as reportId_EndSP
   FROM T_Name
HAVING reportId_EndSP != '' LIMIT 10; 
```

演示[http://sqlfiddle.com/#!2/d1167/9](http://sqlfiddle.com/#!2/d1167/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:01:02.350

您不能*只* `IF`使用/`CASE`因为它们不会从结果集中过滤掉值，当`IF`or`CASE`被调用时，结果集已经确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:08:08.473

```
SELECT
 reportId as 'reportId_EndSP'
 FROM T_Name where  IF(status='EndSP',reportId,' ') LIMIT 10; 
```

# java - java中的XMLRPC调用没有参数的方法？

> ID：12797430
> 
> 赞同：1
> 
> 时间：2012-10-09T09:57:23.083
> 
> 标签：java

我在没有参数的服务器中有一个远程方法。我无法从我的 java 客户端调用它。但我能够调用带有参数的方法。

```
**XmlRpcClient client = new XmlRpcClient();
XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
config.setServerURL(new URL("http://localhost:8000"));
client.setConfig(config);
Object[] params = new Object[]{null};
Object result = client.execute("hello",params);
System.out.println(result);** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:09:18.993

代替

```
Object[] params = new Object[]{null}; 
```

（包含 的单元素数组`null`）尝试

```
Object[] params = new Object[0]; 
```

（一个空数组）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:09:56.477

使用`new Object[] {null}`你假设至少有一个参数（null）。您只需要创建一个空数组：

```
new Object[0]; 
```

# php - 从php和sql中的两个表中提取行

> ID：12797431
> 
> 赞同：2
> 
> 时间：2012-10-09T09:57:23.090
> 
> 标签：php, sql

我有两张桌子`properties`和`buildings`. 我想`buildings`根据标准从表中提取行。

我已将这些建筑物 ID 放入变量中，如下所示：

```
$buildings = "1,2,3,4,5,6,7,8,9,10" 
```

我正在尝试根据上面的列表访问属性。

```
SELECT * FROM properties WHERE BUILDING_ID IN ('{$buildings}') 
```

但我没有得到想要的结果。我怎样才能得到想要的结果？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:58:53.360

删除单引号（以及可选的大括号）。

```
$query = "SELECT * FROM properties WHERE BUILDING_ID IN ($buildings)" 
```

请注意，这`IN`并不总是最有效的，因为它不能使用索引 - 如果您可以使用索引[`BETWEEN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)，您可能会在大型数据集上获得更好的性能。但对于较小的数据集，`IN`很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:51:24.277

您可以执行以下操作：

```
$buildings = "1,2,3,4,5,6,7,8,9,10";
$buildingIDs = explode(",", $buildings);

$buildingQueries = array();
foreach ($buildingIDs as $buildingID) {
  $buildingQueries[] = "BUILDING_ID = " . $buildingID;
}

$query = "SELECT * FROM properties WHERE " . implode(" OR ", $buildingQueries); 
```

这将使您能够利用索引，并允许使用可变 ID。

警告：您应该查看 mysqli 或 PDO，并远离即将弃用的 mysql 库

# sql - 从 SQL 转换为关系代数

> ID：12797433
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:57:36.683
> 
> 标签：sql, relational-algebra

嘿，我被问到这个问题：

将以下 SQL 翻译成关系代数

```
SELECT DISTINCT Student.Name, Course.Name
FROM Student, 
     Attendee, 
     Course
WHERE 
        Student.Name = Attendee.Name 
   AND Attendee.CourseId = Course.CourseId 
   AND StudyCourse = ‘CS’ 
   AND Course.CourseId > 42 
   AND Year = 2011 
```

我试图环顾四周，但我似乎无法找到如何做到这一点的具体答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:14:55.727

# java - JAXB - 使用动态标签名称解组 xml

> ID：12797434
> 
> 赞同：3
> 
> 时间：2012-10-09T09:57:42.133
> 
> 标签：java, xml-parsing, jaxb

> **可能重复：**
> [使用 JAXB 解组具有不同/动态名称的元素](https://stackoverflow.com/questions/835075/using-jaxb-to-unmarshall-elements-with-varying-dynamic-names)

我一直在寻找没有成功。我想使用这样的 JAXB 解组：

```
<root>
  <entity>
     <item_1>
           <name>name 1</name>
     </item_1>
     <item_2>
           <name>name 2</name>
     </item_2>
     <item_3>
           <name>name 3</name>
     </item_3>
  </entity>
</root> 
```

，我的模型：

```
@XmlRootElement(name = "root")
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElementWrapper(name = "entity")
    @XmlAnyElement
    private List<Item> items;

    // setters/getters...
} 
```

和

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Item {

    @XmlElement(name = "name")
    private String name;

    // setters/getters...
} 
```

但是这个返回总是空的项目列表。不知道我错过了什么。

谢谢

# bash - 在流式传输时合并视频块（即时）

> ID：12797437
> 
> 赞同：1
> 
> 时间：2012-10-09T09:57:51.520
> 
> 标签：bash, node.js, nginx, streaming, mp4

设置：

*   200M的视频块
*   带有 mp4 流媒体模块的 nginx 服务器，用于提供视频

是否可以从块中创建单个 mp4 文件，而不会中断将它们流式传输到客户端？

我已经手动尝试过`cat file_chunk >> test.mp4`，但成功有限。它在一种情况下有效（使用 vlc 在执行时播放文件`cat ...`），并且在不同情况下无效（通过浏览器流式传输，使用图腾媒体播放器......）。

此外，我们正在使用 Node.js 进行身份验证和相关 API（如果这可能有所帮助）。

相关的nginx配置：

```
 server {
        listen 441;
        ssl on;
        ssl_certificate /etc/nginx/ssl/server.crt;
                ssl_certificate_key /etc/nginx/ssl/server.key; 
        root /video/;

        location *.mp4 {
            mp4;
            mp4_buffer_size 1m;
            mp4_max_buffer_size 5m;
        }
    } 
```

理想情况下，这可能是在将块合并到正在流式传输的单个文件中的某个地方（没有中断）。

# android - 如何创建一个showdialog？

> ID：12797439
> 
> 赞同：0
> 
> 时间：2012-10-09T09:58:02.737
> 
> 标签：android

我将对话框自定义为：

```
dialoge3 = new Dialog(this);

dialoge3.setContentView(R.layout.layoutdialoge003);

Button btnCacnel = (Button) dialoge3.findViewById(R.id.btnE3Cancel);

btnCacnel.setOnClickListener(new OnClickListener() {    
    public void onClick(View v) {
        // TODO Auto-generated method stub
        dialoge3.cancel();
    }
});

dialoge3.show(); 
```

当我单击显示对话框时，我仍然可以单击活动。我希望当对话框显示时，我不能点击活动。

同样在 C# 中：

```
Form frm=new Form ();
frm.showDialog(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:03:37.060

尝试添加以下属性。也许这就是你正在寻找的，

```
dialoge3.setCanceledOnTouchOutside(false); 
```

这应该可以确保当用户在对话框边界之外触摸屏幕时，您的 Dialog 不会被取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:06:48.270

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage(R.string.dialog_fire_missiles)
               .setPositiveButton(R.string.fire, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // FIRE ZE MISSILES!
                   }
               })
               .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User cancelled the dialog
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create(); 
```

这是制作警报dailog的简单方法..nd如果您不理解我的代码，请简要告诉我您的确切问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:20:44.683

> 使用此功能并更改布局文件..

```
private void showDiaalog() {
                final Dialog dialog = new Dialog(Context);
                dialog.requestWindowFeature(dialog.getWindow().FEATURE_NO_TITLE);
                dialog.setContentView(R.layout.layoutfile);

                dialog.setCancelable(true);
                btnok = (Button) dialog.findViewById(R.id.btnOk);

                btnok.setOnClickListener(new OnClickListener() {

                    public void onClick(View arg0) {

                            //some thing else
                        }

                    }
                });
                Button btnCancel = (Button) dialog.findViewById(R.id.btncancel);

                btnCancel.setOnClickListener(new OnClickListener() {

                    public void onClick(View arg0) {

                        dialog.dismiss();
                    }
                });

                dialog.show();
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:03:09.537

尝试`AlertDialog.Builder`用于您的目的。可以使用 bulder 为您的对话框设置自定义布局。

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

# python - 如何在fedora上的python中通过模块名称查找模块的路径

> ID：12797441
> 
> 赞同：0
> 
> 时间：2012-10-09T09:58:09.363
> 
> 标签：python, path, web.py

> **可能重复：**
> [检索 python 模块路径](https://stackoverflow.com/questions/247770/retrieving-python-module-path)

我正在研究 python，我安装了 web.py 框架来开发小型 Web 应用程序并成功安装。当我尝试从 python 解释器导入如下

```
>>> import web
>>> 
```

实际上我想知道框架的安装路径或安装它的模块所以我尝试了

```
>>> import sys
>>> import sys.path 
```

当然它显示了许多安装在其中的模块的路径`sitepackages`，但是如果我们知道python中的模块名称，是否可以找到模块的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:05:38.130

您可以查看 sys.modules。例如：

```
>> import django
>> import sys
>> sys.modules['django']
<module 'django' from '/usr/local/lib/python2.7/dist-packages/django/__init__.pyc'> 
```

然后：如果你经常遇到模块路径问题[并且需要控制它]，我建议你看看 virtualenv ( [http://www.virtualenv.org/en/latest/index.html)。 html](http://www.virtualenv.org/en/latest/index.html) ). 它是 Python 世界中“模块导入地狱”问题的事实上的解决方案。

# php - 在 Joomla 中更改子菜单 URL

> ID：12797442
> 
> 赞同：1
> 
> 时间：2012-10-09T09:58:10.773
> 
> 标签：php, joomla2.5

我需要更改 Joomla 中的子菜单 URL。

![在此处输入图像描述](../Images/104e9c8aebf5a557ee50bd78a6fb2d5b.png)

在上面的例子中，如果我点击图形设计，那么 URL 显示：

www.mydomain.com/moreservices/graphicdesign.html

但我不需要上述 URL 中的“更多服务”。

同样，假设如果我单击演练，URL 是

www.mydomain.com/moreservices/3d/walkthrough.html

在这里，我不需要 URL 中的“moreservices/3d/”。如何更改网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:47:17.323

不幸的是，没有简单的解决方法，因为 Joomla 就是这样从菜单项构建 URL。摆脱父菜单项的唯一方法是创建一个新菜单，您将在其中移动所有子菜单项。它们必须是这个新菜单中的顶级项目，以便 URL 看起来像您想要的那样。你不需要把这个菜单放在一个模块中，它不需要显示在任何地方，它只需要存在。

接下来，一旦您将所有子菜单移动到这个新菜单，您将为每个子菜单创建新的菜单项别名。菜单别名从它重定向到的菜单项继承其 URL，因此您的 URL 应该看起来像您想要的那样。

# c# - C#如何将form3的值传回form1

> ID：12797450
> 
> 赞同：0
> 
> 时间：2012-10-09T09:58:20.793
> 
> 标签：c#

这个问题是以下问题的后续问题： [C# Text don't display on another form after double click an item in listbox](https://stackoverflow.com/questions/12795668/c-sharp-text-dont-display-on-another-form-after-double-clicking-an-item-in-list)

现在我在 form3 的文本框中输入了我的值。在form3中按“确定”后，如何将值传回form1以在listbox10中显示？以下是我的 form3 编码，但它不起作用：

```
private void button1_Click(object sender, EventArgs e)
{   
    //This is the coding for "OK" button.
    int selectedIndex = listBox10.SelectedIndex;
    listBox10.Items.Insert(selectedIndex, textBox1.Text);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:02:08.310

您可以将公共财产放在 form3 上：

```
public partial class form3 : Form
{
    public String SomeName
    {
        get
        {
            return textbox1.Text;
        }
    }

    ...
    private void buttonOK_Click(object sender, EventArgs e)
    {
        DialogResult = DialogResult.OK;
        Close();
    }

    private void buttonCancel_Click(object sender, EventArgs e)
    {
        DialogResult = DialogResult.Cancel;
        Close();
    }
 } 
```

在你打开form3的form1中，在ShowDialog之后，你会写：

```
if (form3.ShowDialog() == DialogResult.OK)
{

    int selectedIndex = listBox10.SelectedIndex;

    if (selectedIndex == -1) //listbox does not have items
        listbox10.Add(form3.SomeValue);
    else
        listBox10.Items.Insert(selectedIndex, form3.SomeName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:00:49.433

做这样的事情：

```
//form1:
public void add(int num)
{
  //add num to the list box.
} 
```

现在，form3 应该在构造函数中获取 form1 的一个实例，并保存它：

```
//in form3:
private form form1_i
public form3(form i_form1)
{
  .
  .
  .
 form1_i = i_form1;
} 
```

并在form3中单击按钮，调用`add`form1中的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:09:16.383

它应该是这样的，这是最安全的方法，事实上，如果您在 Windows Mobile 上工作，这是不会使应用程序崩溃的唯一方法。在桌面版本中，它可能会在调试版本中崩溃。

```
 public partial class Form1 : Form
{
    public string name = "something";
    public Form1()
    {
        InitializeComponent();
    }

    public delegate void nameChanger(string nme);
    public void ChangeName(string nme)
    {
        this.name = nme;
    }
    public void SafeNameChange(string nme)
    {
        this.Invoke(new nameChanger(ChangeName), new object[] { nme });
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Form3 f3 = new Form3(this);
        f3.Show();
    } 
```

}

```
public partial class Form2 : Form
    {
        Form1 ff;
        public Form2(Form1 firstForm)
        {
            InitializeComponent();
            ff = firstForm;
        }

    private void button2_Click(object sender, EventArgs e)
    {
        ff.SafeNameChange("something different from the Form1");
        this.Close();
    }
} 
```

# c# - 从 MSBuild 中删除文件夹

> ID：12797453
> 
> 赞同：0
> 
> 时间：2012-10-09T09:58:33.420
> 
> 标签：c#, visual-studio-2010, msbuild, jenkins

我正在尝试从使用 MSBuild 脚本的构建中删除一个文件夹（好吧，实际上我认为删除其中的文件更容易）。

我认为方法是将它们从复制任务本身中删除，但我认为它会很简单地看到它不起作用（我敢肯定，因为我对这些东西不太了解，只是昨天阅读了文档和今天）。这是我尝试删除文件夹（或其中的文件）的方式 ..App_Data/Email Templates 与这个空间（空间有什么用吗？）。

```
<ItemGroup>
  <SourceRootFiles Include="$(BuildFolder)/**/*.*" Exclude="$(BuildFolder)/**/App_Data/Email Templates/*.*">
  </SourceRootFiles>
</ItemGroup>

<Target Name="PrepareBuild" DependsOnTargets="CleanUp">
  <Message Text="Preparing the build directory : $(LocalBuild)"></Message>
  <MakeDir Directories="$(LocalBuild)" />

  <Copy SourceFiles="@(SourceRootFiles)" DestinationFolder="$(LocalBuild)\%(RecursiveDir)">
  </Copy>
  <Exec Command="FOR /r &quot;$(LocalBuild)&quot; %%f IN (.svn) DO RD /s /q &quot;%%f&quot;" IgnoreExitCode="true" />
</Target>

<Target Name="Build" DependsOnTargets="PrepareBuild">
  <MSBuild Projects="$(LocalBuild)\Getting.sln" />
</Target> 
```

更新。

詹金斯提出这个错误

:\Program Files\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(1852,5): 错误：将文件 App_Data\Email Templates\BuyerRegistrationComplete.htm 复制到 obj\Latest\Package\PackageTmp \App_Data\Email Templates\BuyerRegistrationComplete.htm 失败。找不到路径“App_Data\Email Templates\BuyerRegistrationComplete.htm”的一部分。[C:\Builds\Getting\Latest\Build\Web\UI\UI.csproj]

真的不知道它是否排除了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:20:40.897

在 githup 上有一个名为 MsBuildTasks 的项目，其中包含所有类型的自定义操作，您可以轻松地将它们集成到您的项目中

[https://github.com/loresoft/msbuildtasks](https://github.com/loresoft/msbuildtasks)

从您的更新中讲述了一个“新”故事。

在您的项目文件中，您引用 WebDeployment 想要复制到部署的 App_Data 文件夹中的文件。删除 App_Data 会导致文件丢失并因此失败。将这些文件移动到项目中的另一个位置或删除对这些文件的引用。

我的建议是为模板创建一个单独的文件夹，App_Data 有不同的用途。

# python - 仅从 pyqt4 中的 QGridLayout 中的 QLineEdit 小部件中提取文本

> ID：12797457
> 
> 赞同：0
> 
> 时间：2012-10-09T09:58:38.327
> 
> 标签：python, text, pyqt4

我有一个 QGrid 布局，其中包含大约 15 个小部件，包括 QLabels 、 QLineEdits 和 QComboBoxes 。我想要一个仅从 QLineEdit 小部件中提取文本的函数。

我的意思是这样的

```
for i in range(self.grid.count()):
    if self.grid.itemAt.widget(i).Type == QtGui.QLineEdit: //Not able to figure out the syntax 
        print self.grid.itemAt.widget(i).text() 
```

有人可以帮忙语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:56:46.793

您使用了错误的语法`itemAt`。试试这个：

```
 from PyQt4.QtGui import *
    ...
    for i in range(self.grid.count()):
        w = self.grid.itemAt(i).widget()
        print isinstance(w, QLineEdit) 
```

它应该工作得很好。

# coldfusion - 如果在主题标签 # 之后，如何访问 Coldfusion 中的 URL 参数 id？

> ID：12797467
> 
> 赞同：2
> 
> 时间：2012-10-09T09:58:58.863
> 
> 标签：coldfusion, uri, fragment-identifier

在尝试了大约一个小时但没有成功之后......（`coldfusion8`）一个虚拟的问题，但我*卡住了：

我的 URL（Jquery Mobile，没有 pushstate，这就是它看起来像的原因）：

```
 http://www.page.de/test/mem/search.cfm#/test/mem/search.cfm?id=9900000003869 
```

如果我输出：

```
<cfdump output="e:\website\dump.txt" label="catch" var="#url#"> 
```

我明白了：

```
catch - struct

ID: 9900000003869 
```

但是我如何访问它......我一直在尝试，没有任何效果：

```
<cfdump output="e:\website\dump.txt" label="catch" var="#id#">
<cfdump output="e:\website\dump.txt" label="catch" var="#ID#">
<cfdump output="e:\website\dump.txt" label="catch" var="#url.id#">
<cfdump output="e:\website\dump.txt" label="catch" var="#url.ID#">
<cfdump output="e:\website\dump.txt" label="catch" var="#StructGetValue(url,"id")d#">
... 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:19:26.677

对片段标识符进行一些研究（这对我来说是一个新术语：（）由彼得和邓肯的评论提示，我从 wiki 找到：[http ://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

> 片段标识符的功能与 URI 的其余部分不同：即，它的处理**完全是客户端，没有服务器**的参与——当然，服务器通常有助于确定 MIME 类型，而 MIME 类型决定了片段的处理。当代理（例如 Web 浏览器）向 Web 服务器请求资源时，**代理将 URI 发送到服务器，但不发送片段**。相反，代理等待服务器发送资源，然后代理根据文档类型和分片值处理资源。

现在，作为您的客户正在发送片段，并且由于某种原因您可以访问 url 变量，使用它是由我的原始帖子完成的。

```
<cfoutput> 
```

通常是您将变量或其他评估输出到屏幕的方式。

```
<cfset myName = "Travis">
<cfoutput>Hello, my name is #myName#</cfoutput> 
```

您还可以通过在不输出任何地方的语句中使用它来访问该变量。

```
<cfset myFullName = myName & " Mak"> 
```

您还可以在查询中使用变量

```
<cfquery name = "qSomeQuery" datasource = "#application.dsn#">
  select * from table where id = #url.id#
</cfquery> 
```

但是，这是在查询中使用它的不好方法，您应该始终使用 cfquery 参数。

```
<cfquery name = "qSomeQuery" datasource = "#application.dsn#">
  select * from table where id = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.id#">
</cfquery> 
```

您在测试变量时遇到的问题是由于语法不正确。

`<cfif isDefined("url.id")>`更`<cfif isDefined(url.id)>`准确的测试是`<cfif structKeyExists(url, "id")>`

出于某种原因，我的 CF 服务器在 # 之后截断了 url 中的所有内容，但您的似乎没有这个问题。正如您的 cfdump 所述，您可以看到您的 url 变量，因此“访问” url 变量就像使用它一样简单： `#url.id#`或测试它`<cfif isDefined("url.id")>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:29:01.653

好的...这有效：

```
 URL = http://www.page.de/test/mem/search.cfm#/test/mem/search.cfm?id=9900000003869

  <cfset objRequest = GetPageContext().GetRequest() />
  <cfset strUrl = right( objRequest.GetRequestUrl().Append( "?" & objRequest.GetQueryString() ).ToString(), 13)> 
```

[信用](http://www.bennadel.com/blog/378-Getting-The-Requested-URL-From-The-Page-Request-Object-Servlet-Without-Using-CGI.htm)

如果有人发现更简单，请发布。我会检查作为答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T10:05:00.080

你想从一个txt文件中读取这个？

你不能简单地使用：

```
<cfdump label="catch" var="#url.id#" /> 
```

那样有用吗？

**编辑：**

您可以尝试先捕获和格式化您需要的内容，然后再将其写入文件吗？

例如，尝试使用：

```
<cfsavecontent variable="myFileContents">
<cfoutput>#url.id#</cfoutput>
</cfsavecontent>

<cffile action="Write" file="e:\website\dump.txt" output="#myFileContents#" /> 
```

我还没有测试过这段代码，但试试看！

可能也想检查那个**URL**变量`isDefined()`

祝你好运。

# actionscript-3 - 引用存储在数组中的精灵/对象

> ID：12797471
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:59:13.890
> 
> 标签：actionscript-3

通过 将对象添加到数组后`push()`，如何引用它的`x`or`y`值？例如：

```
var Test:Sprite = new Sprite();         
Test.graphics.beginFill(0x000000);
Test.graphics.drawRect(0,0,10,10);
testHolder.addChildAt(genericBlock,0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:01:54.793

存储在数组中的任何对象的`x`和值都可以通过以下方式访问：`y`

```
var myArray = new Array();
myArray.push(testSprite1); // First object 'pushed' into array at position 0
myArray.push(testSprite2); // Second object 'pushed' into array at position 1

myArray[0].x = 50; // testSprite1.x = 50
myArray[1].x = 100; // testSprite2.x = 100;

// To referece..
trace(myArray[0].x, myArray[1].x); // Outputs: 50 100 
```

这是一个很棒的教程，可以学习如何实现数组和操作其中包含的所有/单个元素：

[http://www.republicofcode.com/tutorials/flash/as3arrays/](http://www.republicofcode.com/tutorials/flash/as3arrays/)

# jsf - 在 JSF2-Primefaces3 应用程序中未调用动作侦听器

> ID：12797474
> 
> 赞同：0
> 
> 时间：2012-10-09T09:59:19.553
> 
> 标签：jsf, jsf-2, google-maps-api-3, primefaces

我正在尝试在我的 JSF-2/Primefaces-3 应用程序中获取纬度和经度。我正在使用以下代码：

**XHTML**

```
<h:inputText id="address" value="#{nyBean.address}" />
<p:remoteCommand name="rmtCommandGeocoder" actionListener="#{myBean.getCordinates}" /> 
```

**JAVA脚本**

```
function geocoder() {
   var geocoder = new google.maps.Geocoder();
   var address = document.getElementById("address").value;
   geocoder.geocode({
      'address' : address
   }, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
         // Calls the remoteCommand "rmtCommandGeocoder",
         // passing the coordinates to map of parameters
         rmtCommandGeocoder([ {
            name : 'latitude',
            value : results[0].geometry.location.lat()
         }, {
            name : 'longitude',
            value : results[0].geometry.location.lng()
         }]);
      }
   });
} 
```

**豆**

```
public void getCordinates() {
   FacesContext context = FacesContext.getCurrentInstance();
   Map<String, String> parameterMap = context.getExternalContext().getRequestParameterMap();
   double latitude = Double.parseDouble((String) parameterMap.get("latitude"));
   double longitude = Double.parseDouble((String) parameterMap.get("longitude"));
} 
```

这里的问题是 getCordinates() 没有被调用。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:14:36.913

将签名更改为

```
public void retriveCordinates(ActionEvent event){ 
```

或者只是从`actionListener`变成`action`

还

最佳做法是仅对 getter/setter使用`get`或前缀，这就是为什么我改成`set``getCordinates``retriveCordinates`

# iphone - UIButton 的绑定和框架

> ID：12797477
> 
> 赞同：1
> 
> 时间：2012-10-09T09:59:24.980
> 
> 标签：iphone, objective-c, ios

我只想轻松打印出 myButton 尺寸。请检查代码：

```
@interface ViewController : UIViewController

@property (nonatomic, strong) IBOutlet UIButton *myButton; 
```

和 .m 文件：

```
@implementation ViewController

@synthesize myButton;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    CGRect f2 = self.myButton.bounds;
    printf("x: %f\n", f2.origin.x);

    CGSize f3 = self.myButton.frame.size;
    printf("x: %f\n", f3.height);
}

- (void)viewWillAppear:(BOOL)animated {
    CGRect f2 = self.myButton.bounds;
    printf("x: %f\n", f2.origin.x);

    CGSize f3 = self.myButton.bounds.size;
    printf("x: %f\n", f3.height);
} 
```

这是我在控制台中收到的：

```
x: 0.000000
x: 0.000000
x: 0.000000
x: 0.000000 
```

你能帮我如何打印它们吗？

![在此处输入图像描述](../Images/087e8c1064d66dcc5306ca52f7435bfb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:24:39.797

在自动布局的情况下，它会继续计算框架直到`viewWillAppear`被调用，发布`NSLog`in`viewDidAppear`方法将为您提供所需的按钮范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:06:49.587

请检查，参考 .xib 或 Storyboard 中的插座（无论您使用什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:15:13.543

这是您的 viewDidLoad 的正确代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect f2 = self.myButton.frame;
    NSLog("x origin: %f\n", f2.origin.x);
    NSLog("y origin: %f\n", f2.origin.y);
    NSLog("height: %f\n", f2.size.height);
    NSLog("width: %f\n", f2.size.width);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:45:15.757

另外需要注意的是，您可以使用方便的方法：

```
NSLog(@"self.myButton.bounds = %@", NSStringFromCGRect(self.myButton.bounds));
NSLog(@"self.myButton.frame = %@", NSStringFromCGRect(self.myButton.frame)); 
```

快速轻松地打印出 CGRect，而无需使用大量不同的字符串格式或 NSLog 语句

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:04:13.893

尝试这个 -

```
myButton.frame.origin.x;
myButton.frame.origin.y;
myButton.frame.size.width;
myButton.frame.size.height; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-08T02:20:12.303

我知道这是旧的，但为了记录，您的按钮的尺寸*不会*在 viewDidLoad 或 viewDidAppear 中设置。使用自动布局时使用**viewDidLayoutSubviews 。**这是一个重要的问题。此外，这可能会被多次调用。因此，如果您对这些值做一些昂贵的事情，请处理它。

# c - 在C中将两个数字转换为一个

> ID：12797479
> 
> 赞同：2
> 
> 时间：2012-10-09T09:59:32.940
> 
> 标签：c, numbers

新手问题；我有两个二进制数；比如说；0b11 和 0b00。如何将这两个数字结合起来得到 0b1100 （即将它们彼此相邻放置以形成一个新数字）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:01:17.243

使用按位移位和或运算符：

```
unsigned int a = 0x03;  /* Binary 11 (actually binary 00000000000000000000000000000011) */
unsigned int b = 0x00;  /* Binary 00 */

/* Shift `a` two steps so the number becomes `1100` */
/* Or with the second number to get the two lower bits */
unsigned int c = (a << 2) | b;

/* End result: `c` is now `1100` binary, or `0x0c` hex, or `12` decimal */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:03:06.857

左移`<<`和按位 OR `|`：

```
int a = 0;             /* 0b00 */
int b = 3;             /* 0b11 */
int c = (b << 2) | a;  /* 0b1100 */ 
```

笔记：

*   但不需要 OR，因为`a`在这种情况下为 0。
*   移位运算符中的`2`表示“向左移动两位”。右移是`>>`运算符。

# jquery - jQuery同步问题

> ID：12797481
> 
> 赞同：1
> 
> 时间：2012-10-09T09:59:39.630
> 
> 标签：jquery

我有以下代码：在里面我放了 2`alert()`进行调试。为什么 alert2 在 alert1 之前显示？？？

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {

        $.ajax({
            type: "POST",
            url: "ManagerBaseKit.aspx/GetDummyVersions",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                var items = [];
                $.each(result.d.Version, function (key, val) {
                    items.push('<li id="' + key + '">' + val + '</li>');
                });
                $('<ol/>', {
                    'id': 'selectable',
                    html: items.join('')
                }).appendTo('.baseVersionsTest');
                alert('1'); // should be alerted 1st

            }
        });

        alert('2'); // should be alerted 2nd

    });

</script> 
```

编辑：我怎样才能让`$.ajax`被称为第一件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:03:27.433

Alert2 在文档准备就绪时触发，Alert1 在成功的 ajax 请求后触发。您的代码可以重新编写为：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
     alert('2'); // Still the same functionality

        $.ajax({
            type: "POST",
            url: "ManagerBaseKit.aspx/GetDummyVersions",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                var items = [];
                $.each(result.d.Version, function (key, val) {
                    items.push('<li id="' + key + '">' + val + '</li>');
                });
                $('<ol/>', {
                    'id': 'selectable',
                    html: items.join('')
                }).appendTo('.baseVersionsTest');
                alert('1'); // should be alerted 1st

            }
        });

    });

</script> 
```

现在您可以看到为什么首先触发 Alert2（并且在文档准备就绪时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:04:11.510

您可以通过将 async 设置为 true 或 false 以同步/异步方式调用 ajax 函数。

```
$.ajax({
url : yourURL,
async : false,
...
}); 
```

# javascript - 重新定义一个 jQuery 对话框按钮

> ID：12797484
> 
> 赞同：1
> 
> 时间：2012-10-09T09:59:41.563
> 
> 标签：javascript, jquery, jquery-ui

在我们的应用程序中，我们使用一个通用函数来创建包含特定模块内容的 jQuery 对话框。自定义对话框由 3 个按钮（取消、保存、应用）组成。应用与保存相同，但也会关闭对话框。

许多模块仍在使用自定义帖子而不是 ajax-post。出于这个原因，我希望覆盖/重新定义特定对话框上的按钮。

到目前为止，我已经有了按钮，但我无法对它们做些什么。是否可以从对话框中获取按钮（是的，我知道）但对它们应用不同的功能？

到目前为止我的代码：

```
function OverrideDialogButtonCallbacks(sDialogInstance) {
  oButtons = $( '#dialog' ).dialog( 'option', 'buttons' );
  console.log(oButtons); // logs the buttons correctly

  if(sDialogInstance == 'TestInstance') {
    oButtons.Save = function() {
      alert('A new callback has been assigned.');
      // code for ajax-post will come here.
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:06:48.800

```
$('#dialog').dialog({
'buttons' : {
    'Save' : {
        id:"btn-save", // provide the id, if you want to apply a callback based on id selector
        click: function() {
           //
        },
    },
}
}); 
```

你试过这个吗？根据需要覆盖按钮的回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:42:06.000

根本不需要重新分配。试试这个。

```
function OverrideDialogButtonCallbacks(dialogSelector) {
    var button = $(dialogSelector + " ~ .ui-dialog-buttonpane")
                    .find("button:contains('Save')");

    button.unbind("click").on("click", function() {
        alert("save overriden!");
    });
} 
```

像这样称呼它`OverrideDialogButtonCallbacks("#dialog");`

工作小提琴：http: [//jsfiddle.net/codovations/yzfVT/](http://jsfiddle.net/codovations/yzfVT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:30:08.760

您可以使用`$(..).dialog('option', 'buttons')`. 这将返回一个对象数组，然后您可以通过搜索它们并调整点击事件来重新连接：

```
// Rewire the callback for the first button
var buttons = $('#dialog').dialog('option', 'buttons');
buttons[0].click = function() { alert('Click rewired!'); }; 
```

看这个小提琴的例子：http: [//jsfiddle.net/z4TTH/2/](http://jsfiddle.net/z4TTH/2/)

如有必要，您可以使用 . 检查按钮的文本`button[i].text`。

* * *

**更新：**

该`buttons`选项可以是两种形式之一，一种是如上所述的数组，另一种是对象，其中每个属性都是按钮的名称。要在这种情况下重新连接 click 事件，需要更新`buttons`对话框中的选项：

```
// Rewire the callback for the OK button
var buttons = $('#dialog').dialog('option', 'buttons');
buttons.Ok = function() { alert('Click rewired!'); };

$('#dialog').dialog('option', 'buttons', buttons); 
```

看到这个小提琴：http: [//jsfiddle.net/z4TTH/3/](http://jsfiddle.net/z4TTH/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:15:49.880

您可以尝试将您的新功能代码与 Save 的 Click 事件绑定吗？

```
if(sDialogInstance == 'TestInstance') {
            $('#'+savebtn_id).click(function() {
              alert('A new callback has been assigned.');
              // code for ajax-post will come here.
            });
    } 
```

# asp.net - Application_EndRequest 在请求结束之前触发？

> ID：12797487
> 
> 赞同：4
> 
> 时间：2012-10-09T09:59:54.997
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一些简单的类需要在请求结束时进行处理。

为此，我`Dispose`从.`Application_EndRequest``Global.asax`

这“在我的机器上运行良好”但在我得到的生产服务器上导致了一些问题`Cannot access a disposed object.`这发生在一些 MVC 帮助程序中。

在我看来，Application_EndRequest 是在请求​​结束时触发的。不是这样吗？我应该使用另一个事件来处理我的对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:54:24.947

## 应用程序池问题 - 可能

我怀疑您的一次性对象不一定是请求，而是应用程序范围（它可能会根据请求实例化，但它可能正在使用一些共享资源）。只要您在开发环境中测试您的应用程序，它的行为似乎与预期一致，但一旦您将其投入生产，您就会遇到问题。**这表明您可能遇到应用程序池问题**。

IIS Web 应用程序池功能实际上`HttpApplication`为您的应用程序实例化了多个实例，它们可能都共享公共的一次性资源。如果您的一次性对象就是这种情况并且您正在共享它，那么它可能不是线程安全的。当您不将共享资源使用情况包装在线程安全操作中时，情况也是如此。

这就是为什么当一个请求正在进行时另一个请求开始并且第一个处理对象而第二个进程仍在使用它的原因。

### 更多信息总是有帮助的

如果您能解释一次性对象/资源的性质以及您如何在应用程序中使用它，我们可以为您提供更好的帮助。但与此同时，您可以**[阅读我的博客文章](http://erraticdev.blogspot.co.uk/2011/01/how-to-correctly-use-ihttpmodule-to.html)**，其中讨论了应用程序池和处理它们。这与一次性物品本身无关，但您可能仍然会发现所有信息都非常有用和有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T06:58:36.417

如果您需要在控制器内部使用一些可按请求处理的对象，我建议您使用控制器的生命周期处理程序，而不是使用 Application_BeginRequest 和 Application_EndRequest。请参阅以下示例。

控制器：

```
public class BaseController : Controller
{
    protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        this.HttpContext.Items["MyDisposableObject"] = new MyDisposableObject();
    }

    protected override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        base.OnResultExecuted(filterContext);

        if (this.HttpContext.Items.Contains("MyDisposableObject"))
        {
            var myDisposableObject = 
                    this.HttpContext.Items["MyDisposableObject"] as IDisposable;

            if (myDisposableObject != null)
            {
                myDisposableObject.Dispose();
            }
        }
    }
} 
```

`IDisposable`对象：

```
public sealed class MyDisposableObject : IDisposable
{
    private bool disposed;

    public void Dispose()
    {
        if (!this.disposed)
        {
            // Dispose all managed 
            // and unmanaged resources. 

            // Note disposing has been done.
            this.disposed = true;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:45:19.743

如果对象的范围限定为控制器级别，您可以覆盖处理这些对象的`Dispose`方法。`Controller`

```
protected override void Dispose(bool disposing)
{
  if(disposing)
  {
    // dispose the objects here
  }

  base.Dispose(disposing);
} 
```

如果您在应用程序中使用一些 DI 框架（如 Ninject），您可以将该工作委托给他们。

除了在请求结束时释放对象之外，您还可以尝试将它们包装在一个`using`语句中，无论您通过这种方式访问​​什么位置，都可以确保对象已被释放。

# linux - BASH：在变量中设置上周一的日期

> ID：12797490
> 
> 赞同：1
> 
> 时间：2012-10-09T09:59:58.973
> 
> 标签：linux, bash, date

```
today=`date +%a`

if [ "$today" == "Mon" ] 
then
        monday=`date -dmonday +%Y%m%d`
else
        monday=`date -dlast-monday +%Y%m%d`
fi 
```

用上一个星期一的日期设置“星期一”变量是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:19:34.823

实际上，您的逻辑并不总是设置“上周一”。如果今天是星期一，您将获得当前日期值。

我觉得你的逻辑没问题。但是您可能关心的一件事是，`%a`给您一个本地化的工作日名称。从手册页：

> ```
>  locale’s abbreviated weekday name 
> ```

您可以使用另一种格式`%u`来使您的脚本更具可移植性。

> %u 星期几 (1..7); 1 是星期一

# c# - DAL 中的 Linq2Sql 静态数据上下文

> ID：12797491
> 
> 赞同：2
> 
> 时间：2012-10-09T10:00:05.527
> 
> 标签：c#, asp.net, linq-to-sql, data-access-layer, datacontext

我是 Linq to sql 的新手。我的问题很简单。

将 DataContext 作为 DAL 中的公共静态成员以充当单例是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:09:23.097

保持为单例并不是一个*好主意*`DataContext`，对于小型应用程序，您可能看不到任何后果，但是如果您的 Web 应用程序有很多用户要访问，则会导致*内存泄漏*。为什么？

`DataContext`基本上在后台实现了*Unit Of Work ，它内部有**内部缓存*来跟踪实体的变化并避免在一个业务事务中往返数据库。长时间保持`DataContext`为静态，表示内部缓存会暂时增加，不会正常释放。

`DataContext`应保存在一个业务事务中并尽快释放。Web 应用程序的最佳实践是`DataContext`按要求保留。您还可以使用 IoC Container，大多数 IoC Container 都支持这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:13:21.073

在 DAL 中使用共享数据上下文时，我也经历过一件事。假设有两个用户 A 和 B。如果用户 A 启动并进行事务处理，那么用户 B 可以提交用户 A 所做的更改，这是使用静态 DataContext 的副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:14:34.510

您绝对不应该`DataContext`在 ASP.NET 等多线程应用程序中使用静态变量。 [DataContext 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)指出：

> 不保证任何实例成员都是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:10:31.453

我通常尝试将数据访问类的功能组合在一起，并使该类 IDisposable。然后在构造函数中创建 DataContext，并在 dispose 方法中对 DataContext 运行 .dispose() 调用。

因此，当您需要该类中的某些内容时，您可以将其包装在 using 语句中，并使用相同的 DataContext 进行一系列调用。

这与使用静态 DataContext 的效果几乎相同，但意味着您不要忘记关闭连接，而且它似乎比使事物成为静态更 OO。

```
 public class MyDataAccessClass: IDisposable
    {
      private readonly DbDataContext _dbContext;

      public MyDataAccessClass()
      {
          _dbContext = new DbDataContext ();
      }

      public void Dispose()
      {
        _dbContext.Dispose();
      }

      public List<CoolData> GetStuff()
      {
           var d = _dbContext.CallStuff();
           return d;
      }
    } 
```

然后在你的课上

```
 using(var d = new MyDataAccessClass())
   {
         //Make lots of calls to different methods of d here and you'll reuse your DataContext
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T10:02:05.017

我建议您阅读有关**“工作单元”**模式的信息。即[http://stuartharris4.blogspot.com/2008/06/working-together-linq-to-sql.html](http://stuartharris4.blogspot.com/2008/06/working-together-linq-to-sql.html)

# ember.js - 在进入根状态时加载数据

> ID：12797493
> 
> 赞同：4
> 
> 时间：2012-10-09T10:00:05.557
> 
> 标签：ember.js

我想在应用程序进入根状态时加载数据或执行一些计算，任何想法如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:11:25.143

我不确定你的问题是什么，因为控制器没有状态，所以我猜你在这里谈论的是路由。

如果您想在进入根状态时加载数据，该功能尚未实现，但可能会稍后实现。

看看这个问题：[Controller instances not available in connectOutlets of root state。](https://github.com/emberjs/ember.js/pull/941)，我认为这正是你的问题。

在他们实现此功能之前，您仍然可以：

*   `ApplicationController#init`在方法中加载数据
*   添加一个包含所有其他路由（root.all）的路由，并`connectOutlets`在路由的方法中加载数据`all`（我不喜欢这个解决方案）
*   通过执行此操作来观察`applicationController`路由器的属性（请参阅[此 JSFiddle](http://jsfiddle.net/cu6R3/)）：

    ```
    App.Router = Em.Router.extend({
      loadData: function() {
        // load data here
      }.observes('applicationController'),
    }); 
    ```

# c# - 用 C# 代码删除文件夹？

> ID：12797494
> 
> 赞同：1
> 
> 时间：2012-10-09T10:00:07.290
> 
> 标签：c#

我正在尝试删除一个文件夹，但我可以设法让它正确吗？

我要删除的文件夹称为**ExtractedFiles**，它位于名为**FormValue**的文件夹内。

我可以删除同一个**FormValue**文件夹中的电子表格，但不能删除该文件夹。

我认为问题可能是我没有正确的文件夹扩展名

这有效：

```
if (File.Exists(tempFolderPathAlt + saveas + ".xls"))
            {
                File.Delete(tempFolderPathAlt + saveas + ".xls");
            } 
```

这不起作用：

```
 if (File.Exists(tempFolderPathAlt + "ExtractedFiles"))
            {
                File.Delete(tempFolderPathAlt + "ExtractedFiles");
            } 
```

有人可以告诉我文件夹的文件扩展名或如何删除一个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:02:37.133

如果你想删除一个文件夹，你应该使用[`Directory.Delete`](http://msdn.microsoft.com/en-us/library/system.io.directory.delete.aspx)而不是`File.Delete`：

```
String path = Path.Combine(tempFolderPathAlt, "ExtractedFiles");
bool directoryExists = Directory.Exists(path);
if(directoryExists)
    Directory.Delete(path, true); // deletes sub-directories 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:02:21.487

尝试使用[Directory.Delete](http://msdn.microsoft.com/en-us/library/system.io.directory.delete.aspx)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:02:26.853

你要

```
Directory.Delete 
```

由于您删除的是文件夹而不是文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:04:47.480

如果您收到 IOException 删除目录，请检查一下：

[无法使用 Directory.Delete(path, true) 删除目录](https://stackoverflow.com/questions/329355/cannot-delete-directory-with-directory-deletepath-true)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:04:22.037

对于删除目录，您需要使用该方法

```
Directory.Delete(string path,
    bool recursive); 
```

在此处参考官方文档：http: [//msdn.microsoft.com/en-us/library/fxeahc5f.aspx](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)

# mysql - MySQL - 在 FROM 子句中使用子查询创建视图

> ID：12797495
> 
> 赞同：4
> 
> 时间：2012-10-09T10:00:11.097
> 
> 标签：mysql, sql, subquery, sql-view

我想使用子查询在 MySQL 中创建视图

```
CREATE OR REPLACE VIEW `V_TASK_TRANSFER` (`REF_ID`, `DATE_CREATE`, `DATE_TRX`, 
    `ACCOUNT_NO`, `TO_ACCOUNT_NO`, `TO_NAME`, `CURRENCY_CODE`, `AMOUNT`,
    `TASK_TYPE`, `NAME_E`, `NAME_I`, `REF_NO`, `EXECUTION_TYPE`,
    `REVIEW_COUNT`, `REVIEW_NEED`, `APPROVE_COUNT`, `APPROVE_NEED`, 
    `TRX_COUNT_SUCCESS`, `TRX_COUNT_FAIL`, `TRX_COUNT_ALL`,
    `STATUS_TF`, `USER_ID`
) AS 
  SELECT REF_ID,
    DATE_CREATE,
    DATE_TRX,
    ACCOUNT_NO,
    TO_ACCOUNT_NO,
    TO_NAME,
    CURRENCY_CODE,
    AMOUNT,
    TASK_TYPE,
    NAME_E,
    NAME_I,
    REF_NO,
    EXECUTION_TYPE,
    REVIEW_COUNT,
    REVIEW_NEED,
    APPROVE_COUNT,
    APPROVE_NEED,
    TRX_COUNT_SUCCESS,
    TRX_COUNT_FAIL,
    TRX_COUNT_ALL,
    STATUS_TF,
    USER_ID
  FROM
    (SELECT T.REF_ID,
      T.DATE_CREATE,
      T.DATE_TRX,
      TTF.ACCOUNT_NO,
      TTF.TO_ACCOUNT_NO,
      TTF.TO_NAME,
      TTF.CURRENCY_CODE,
      TTF.AMOUNT,
      T.TASK_TYPE,
      TT.NAME_E,
      TT.NAME_I,
      T.REF_NO,
      T.EXECUTION_TYPE,
      T.REVIEW_COUNT,
      T.REVIEW_NEED,
      T.APPROVE_COUNT,
      T.APPROVE_NEED,
      T.TRX_COUNT_SUCCESS,
      T.TRX_COUNT_FAIL,
      T.TRX_COUNT_ALL,
      T.STATUS_TF,
      T.USER_ID
    FROM IB_TASKS T
    JOIN IB_TASK_TRANSFERS TTF ON T.REF_ID = TTF.REF_ID
    JOIN IB_TASK_TYPES TT ON TT.TASK_TYPE = T.TASK_TYPE
    UNION
    SELECT T.REF_ID,
      T.DATE_CREATE,
      T.DATE_TRX,
      TTF.ACCOUNT_NO,
      TTF.TO_ACCOUNT_NO,
      TTF.TO_NAME,
      TTF.CURRENCY_CODE,
      TTF.AMOUNT,
      T.TASK_TYPE,
      TT.NAME_E,
      TT.NAME_I,
      T.REF_NO,
      T.EXECUTION_TYPE,
      T.REVIEW_COUNT,
      T.REVIEW_NEED,
      T.APPROVE_COUNT,
      T.APPROVE_NEED,
      T.TRX_COUNT_SUCCESS,
      T.TRX_COUNT_FAIL,
      T.TRX_COUNT_ALL,
      T.STATUS_TF,
      T.USER_ID
    FROM IB_TASKS T
    JOIN IB_TASK_TRANSFERS_DOM TTF ON T.REF_ID = TTF.REF_ID
    JOIN IB_TASK_TYPES TT ON TT.TASK_TYPE = T.TASK_TYPE
    UNION
    SELECT T.REF_ID,
      T.DATE_CREATE,
      T.DATE_TRX,
      TTF.ACCOUNT_NO,
      TTF.TO_ACCOUNT_NO,
      TTF.TO_NAME,
      TTF.CURRENCY_CODE,
      TTF.AMOUNT,
      T.TASK_TYPE,
      TT.NAME_E,
      TT.NAME_I,
      T.REF_NO,
      T.EXECUTION_TYPE,
      T.REVIEW_COUNT,
      T.REVIEW_NEED,
      T.APPROVE_COUNT,
      T.APPROVE_NEED,
      T.TRX_COUNT_SUCCESS,
      T.TRX_COUNT_FAIL,
      T.TRX_COUNT_ALL,
      T.STATUS_TF,
      T.USER_ID
    FROM IB_TASKS T
    JOIN IB_TASK_TRANSFERS_FGN TTF ON T.REF_ID = TTF.REF_ID
    JOIN IB_TASK_TYPES TT ON TT.TASK_TYPE = T.TASK_TYPE
    ); 
```

但它给了我

> 错误 #1349 - 视图的 SELECT 在 FROM 子句中包含子查询

我该如何解决这个限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:04:47.717

根据文档：

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

*   SELECT 语句不能在 FROM 子句中包含子查询。

您的解决方法是为每个子查询创建一个视图。

然后在您的最终视图中访问这些子查询视图。

[查看解决方案](https://stackoverflow.com/a/3520552/1045444)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T10:29:43.277

尝试在没有子查询的情况下进行 -

```
CREATE OR REPLACE VIEW V_TASK_TRANSFER AS
    SELECT T.REF_ID,
      T.DATE_CREATE,
      T.DATE_TRX,
      TTF.ACCOUNT_NO,
      TTF.TO_ACCOUNT_NO,
      TTF.TO_NAME,
      TTF.CURRENCY_CODE,
      TTF.AMOUNT,
      T.TASK_TYPE,
      TT.NAME_E,
      TT.NAME_I,
      T.REF_NO,
      T.EXECUTION_TYPE,
      T.REVIEW_COUNT,
      T.REVIEW_NEED,
      T.APPROVE_COUNT,
      T.APPROVE_NEED,
      T.TRX_COUNT_SUCCESS,
      T.TRX_COUNT_FAIL,
      T.TRX_COUNT_ALL,
      T.STATUS_TF,
      T.USER_ID
    FROM IB_TASKS T
    JOIN IB_TASK_TRANSFERS TTF ON T.REF_ID = TTF.REF_ID
    JOIN IB_TASK_TYPES TT ON TT.TASK_TYPE = T.TASK_TYPE
    UNION
    SELECT T.REF_ID,
      T.DATE_CREATE,
      T.DATE_TRX,
      TTF.ACCOUNT_NO,
      TTF.TO_ACCOUNT_NO,
      TTF.TO_NAME,
      TTF.CURRENCY_CODE,
      TTF.AMOUNT,
      T.TASK_TYPE,
      TT.NAME_E,
      TT.NAME_I,
      T.REF_NO,
      T.EXECUTION_TYPE,
      T.REVIEW_COUNT,
      T.REVIEW_NEED,
      T.APPROVE_COUNT,
      T.APPROVE_NEED,
      T.TRX_COUNT_SUCCESS,
      T.TRX_COUNT_FAIL,
      T.TRX_COUNT_ALL,
      T.STATUS_TF,
      T.USER_ID
    FROM IB_TASKS T
    JOIN IB_TASK_TRANSFERS_DOM TTF ON T.REF_ID = TTF.REF_ID
    JOIN IB_TASK_TYPES TT ON TT.TASK_TYPE = T.TASK_TYPE
    UNION
    SELECT T.REF_ID,
      T.DATE_CREATE,
      T.DATE_TRX,
      TTF.ACCOUNT_NO,
      TTF.TO_ACCOUNT_NO,
      TTF.TO_NAME,
      TTF.CURRENCY_CODE,
      TTF.AMOUNT,
      T.TASK_TYPE,
      TT.NAME_E,
      TT.NAME_I,
      T.REF_NO,
      T.EXECUTION_TYPE,
      T.REVIEW_COUNT,
      T.REVIEW_NEED,
      T.APPROVE_COUNT,
      T.APPROVE_NEED,
      T.TRX_COUNT_SUCCESS,
      T.TRX_COUNT_FAIL,
      T.TRX_COUNT_ALL,
      T.STATUS_TF,
      T.USER_ID
    FROM IB_TASKS T
    JOIN IB_TASK_TRANSFERS_FGN TTF ON T.REF_ID = TTF.REF_ID
    JOIN IB_TASK_TYPES TT ON TT.TASK_TYPE = T.TASK_TYPE; 
```

# c++ - 使用 Lapack 的 dgesv 求解线性方程组

> ID：12797502
> 
> 赞同：0
> 
> 时间：2012-10-09T10:00:40.253
> 
> 标签：c++, linear-algebra, lapack, equation-solving

我想使用 C++ 中的 Lapack 包求解线性方程组。我计划使用这里的例程[，](http://www-heller.harvard.edu/people/shaw/programs/dgesv.c)即 dgesv[来实现它。](http://www-heller.harvard.edu/people/shaw/programs/lapack.html)

这是我的代码：

```
unsigned short int n=profentries.size();
double **A, *b, *x;
A= new double*[n];
b=new double[n];
x=new double[2];
// Generate the matrices for my equation
for(int i = 0; i < n; ++i)
{
    A[i] = new double[2];
}

for(int i=0; i<n; i++)
{
    A[i][0]=5;
    A[i][1]=1;
    b[i]=3;
}

std::cout<< "printing matrix A:"<<std::endl;
for(int i=0; i<n; i++)
{
    std::cout<< A[i][0]<<" " <<A[i][1]<<std::endl;
}
// Call the LAPACK solver
    x = new double[n];//probably not necessary
dgesv(A, b, 2, x); //wrong result for x!
std::cout<< "printing vector x:"<<std::endl;

/*prints 
3
3
but that's wrong, the solution is (0.6, 0)!
*/
for(int i=0; i<2; i++) 
{
    std::cout<< x[i]<<std::endl;
} 
```

我有以下问题：

dgesv 怎么会用元素 {3, 3} 计算向量 x？解决方案应该是 {0.6, 0}（用 matlab 检查过）。

问候

编辑： dgesv 可能适用于方阵。我下面的解决方案展示了如何使用 dgels 解决超定系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:28:10.390

Lapack 假设矩阵以列主要格式存储。它不适用于矩阵 A 的指针对指针格式。矩阵的所有元素都需要连续存储在内存中。

尝试这样声明 A：

```
double *A;
A = new double[2*n]; 
```

还有for循环：

```
for(int i=0; i<n; i++)
{
    A[i+0*n]=5;
    A[i+1*n]=1;
    b[i]=3;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:25:38.477

问题曾经是行专业/列专业的混淆，而且显然 dgesv 不适合非方阵。

超定线性方程组可以使用 dgels (#include "lapacke.h") 以最小二乘方式求解。

值得注意的是，对我来说乍一看并不明显：解向量（通常用 x 表示）然后存储在 b 中。

我的示例系统由一个矩阵 A 在其第一列中保存值 1-10 和一个向量 b 组成，其中 {i|1<=i<=10} 的值为 i^2：

```
 double a[10][2]={1,1,2,1,3,1,4,1,5,1,6,1,7,1,8,1,9,1,10,1};
double b[10][1]={1,4,9,16,25,36,49,64,81,100};
lapack_int info,m,n,lda,ldb,nrhs;
int i,j;

// description here: http://www.netlib.org/lapack/double/dgesv.f
m = 10;
n = 2;
nrhs = 1;
lda = 2;
ldb = 1;

for(int i=0; i<m; i++)
{
    for(int k=0; k<lda; k++)
    {
        std::cout << a[i][k]<<" ";
    }
    std::cout <<"" << std::endl;
}
std::cout<< "printing vector b:"<<std::endl;
for(int i=0; i<m; i++) 
{
    std::cout<< *b[i]<<std::endl;
}
std::cout<< "\nStarting calculation..."<<std::endl;

info = LAPACKE_dgels(LAPACK_ROW_MAJOR,'N',m,n,nrhs,*a,lda,*b,ldb);

std::cout<< "Done."<<std::endl;

std::cout<< " "<<std::endl;
std::cout<< "printing vector b:"<<std::endl;
for(int i=0; i<2; i++) 
{
    std::cout<< *b[i]<<std::endl;
}
std::cout<< "Used values: "<< m << ", " <<  n << ", " << nrhs << ", " << lda << ", " << ldb << std::endl; 
```

# scala - Functor、PointedFunctor、ApplicativeFunctor 和 Monad 的具体应用是什么？

> ID：12797504
> 
> 赞同：4
> 
> 时间：2012-10-09T10:00:50.533
> 
> 标签：scala, haskell, types, monads, functor

我一直在研究 Scala（以及扩展的 Haskell）一段时间，我完全被他们的类型系统和功能范式所吸引。最近，我偶然发现了“类型级编程”，并被卷入了诸如 Functor 之类的东西和其他我没听说过的东西（除了 Monad，我知道它是一种神秘的东西，但不知道该利用什么它！）。我研究了 Haskell 中的概念（顺便被它的类型系统和类型推断能力迷住了），并且我对类型成为 Functor、PointedFunctor、ApplicativeFunctor 或 Monoid 的含义有了一个纯技术层面的深刻理解（即使在技术层面上，我仍然不知道 Monad 是什么）但我 我觉得自己像个白痴，因为我认为这一切没有用，除了可能获得了对某些概念的良好分类（？）。这些东西有什么用？为什么要让生活如此复杂？为什么要研究这些东西并将它们分类为不同的类别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T11:15:15.980

> 为什么要让生活如此复杂？

他们都是为了让生活更*简单*！

首先，它们使我们编写的代码更干净、更清晰。

其次，它们增加了我们的表达能力，而没有添加真正的新语言特征。例如，Monads 让你使用标准语法来表达复杂的计算上下文，Functors 让你以标准方式思考和编程数据结构，Applicative Functors 让你可以像处理直接数据一样简单地处理有效或复杂的计算上下文，让你在纯数据之外干净地使用功能范式。

它们都有助于代码重用并帮助我们理解彼此的代码，因为它们为我们提供了一种思考事物的标准方式。

一旦你习惯了它们，你就不想没有它们！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T10:55:53.400

它们都是抽象的。例如。幺半群是支持零元素和加法的东西（必须是关联的）。例如整数、列表、字符串等。我认为为所有这些不同类型提供一个通用“接口”相当不错。

那么它们为什么有用呢？例如，您可以为所有幺半群编写通用 sum 函数。您只需编写一个通用函数，而不是为字符串、整数等编写一个。我认为这很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T11:16:36.687

我们首先应该问：**什么是函子，单子，** ...。除非我们知道这些概念是什么（意思），否则很难谈论它们的用途。

这些概念来源于[范畴论](https://en.wikipedia.org/wiki/Category_theory)。它们源于这样一个事实，即数学中的许多对象（以及因此在函数式编程中）共享一些共同的抽象属性。一旦我们了解并理解了这些属性，我们就可以使用它们来编写非常通用的代码，这些代码可重用于大量任务。

* * *

举个例子：功能大家都知道

```
map :: (a -> b) -> ([a] -> [b]) 
```

拥有 from `a`to的函数，`b`我们可以创建一个适用于 lists 的函数`[a]`。[函](https://en.wikipedia.org/wiki/Functor)子是这个概念的概括。任何可以以这种方式映射（并保留[函子定律](http://www.haskell.org/haskellwiki/Functor)）的东西都称为函子。所以`Functor`宣布

```
fmap :: Functor f => (a -> b) -> (f a -> f b) 
```

在列表的情况下`f`变为`[]`. `fmap`我们可以映射列表（它等于`map`），也可以映射`Maybe`s、各种集合、树，甚至函数。

也可以看看

*   [https://math.stackexchange.com/questions/370/good-book-lecture-notes-about-category-theory](https://math.stackexchange.com/questions/370/good-book-lecture-notes-about-category-theory)
*   [https://math.stackexchange.com/questions/21128/when-to-learn-category-theory](https://math.stackexchange.com/questions/21128/when-to-learn-category-theory)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-09T13:30:41.140

另外我想指出单子不是“神秘的”。尤其是类似容器的 monad（list、Maybe、Identity）非常容易理解。它们与仿函数类似，但有一点不同：使用`fmap`原始仿函数的“形状”（例如列表中元素的数量）被保留，例如，您不能`fmap`用来实现类似`filter`. 这就是为什么 monad 有一个名为“bind”的函数（在 Haskell 中它是`(>>=)`），它允许这种事情，但它们也不是魔法（例如，对于列表，它与 good old 相同`concatMap`）。此外，monad 具有`return`包装单个值的功能。

现在很多其他的，不是“容器式”的东西都是单子。有些 monad 可以对“存储的计算”进行操作（`Cont`对于 continuation monad）。它们可以提供 ( `Reader`)、收集 ( `Writer`) 或持有 ( `State`) 某种“附加上下文”。一个非常有用的“上下文”是“世界其他地方的状态”，更广为人知的是`IO`. 在这种情况下，类型系统（尤其是多态性和类型类所施加的限制）可以屏蔽不需要的交互，并强制一定的计算顺序（这在惰性语言中不是微不足道的），所以我们不需要肮脏的 hack 或语言 back-门，以便用纯语言做 IO。有些人认为这是一种魔法，但它只是巧妙地使用了类型系统，而 monad 并不是解决这个问题的唯一方法（例如，Clean 语言为此使用了“唯一性类型”）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T13:34:17.613

“这些东西有什么用？” 啊! 你可以用它们来写 FizzBu​​zz： [http://dave.fayr.am/posts/2012-10-4-finding-fizzbuzz.html](http://dave.fayr.am/posts/2012-10-4-finding-fizzbuzz.html)

# database - 从数据库中为每一页请求数据

> ID：12797505
> 
> 赞同：0
> 
> 时间：2012-10-09T10:00:50.447
> 
> 标签：database, web

我目前正在为登录系统开发“记住我”功能。

用户成功登录后，我会将用户的 ip、浏览器、会话 ID 和令牌存储在数据库中。如果我确实将它们存储在数据库中，我将需要从数据库中请求它们并对每个页面进行身份验证。

主要问题是，如果我为每一页都请求它们，它会减慢我的网站速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:56:35.677

每个页面请求的用户身份验证肯定会降低系统的性能。

php中用户身份验证的最佳方式[参考](https://stackoverflow.com/questions/2179520/whats-the-best-way-to-do-user-authentication-in-php)

# python - 从生产服务器抓取日志文件

> ID：12797521
> 
> 赞同：0
> 
> 时间：2012-10-09T10:01:38.537
> 
> 标签：python, logging, statistics, smb

我用python开发了一个用于在线web服务用户行为研究的统计系统，主要依赖于读取和分析来自生产服务器的日志。目前我在 SMB 协议下内部共享日志文件夹以供常规分析程序读取，但对于数据访问方法，我有 2 个问题，

1.  除了通过 SMB 之外，还有其他方式访问日志吗？还是其他策略？
2.  我猜很多read可能会阻塞生产的HD并影响正常的日志写入，有什么解决方案可以解决这个问题吗？

我希望我能想出一些实数，但目前还没有。任何人都可以给我一些指导，让我更优雅地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:27:19.343

如果您愿意使用第三方日志聚合工具，您有几个选择：

*   [http://graylog2.org/](http://graylog2.org/)
*   [http://www.logstash.net/](http://www.logstash.net/)
*   [http://www.octopussy.pm/](http://www.octopussy.pm/)
*   [https://github.com/facebook/scribe](https://github.com/facebook/scribe)

此外，如果您正在记录到 syslog - 许多常用的 syslog 守护程序（例如 syslog-ng ）可以配置为将来自各种应用程序的日志转发到这些聚合器中的一个或多个。从 python 应用程序记录到 syslog 很简单——标准库中有一个 syslog 模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:17:21.610

好吧，如果您在两者之间有一个 HTTP 服务器（IHS、OHS，我猜也是 Apache...），那么您可以通过 URL 公开您的物理存储库：您的每个文件也将受益于 URL，并且通过这种您可以很容易地下载它们的代码：

```
import os
import urllib2

# Open our local file for writing
f = urllib2.urlopen(url)
with open(os.path.basename(url), 'wb') as local_file:
    local_file.write(f.read()) 
```

# tomcat - Sysout 会影响 tomcat 的性能吗？

> ID：12797526
> 
> 赞同：1
> 
> 时间：2012-10-09T10:01:47.020
> 
> 标签：tomcat, web-applications, log4j

我们有一个在 tomcat 上运行的 java web 应用程序，在该应用程序中使用了很多 System.out.println 语句。这会影响应用程序性能吗

**注意：tomcat 作为服务运行，所有 sysout 都在 tomcat 标准输出日志中。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:06:10.877

过多的日志记录确实会抑制性能。在最坏的情况下，您的日志服务配置不当，日志可能会填满您的硬盘驱动器，这可能会导致各种问题。

# c# - 使用 Windows 窗体控制操作系统鼠标事件 - C#

> ID：12797529
> 
> 赞同：3
> 
> 时间：2012-10-09T10:01:48.823
> 
> 标签：c#, winforms, keyboard, mouseevent

我正在尝试执行的程序是使用带有 Windows 窗体的键盘来模拟操作系统的鼠标事件。现在，我可以更改光标并执行不同的操作，例如在表单内单击鼠标（当表单位于顶部时）。

问题是我想将它扩展到整个操作系统，这意味着即使我的 Windows 窗体不在顶部，我仍然能够控制我的光标并在窗体位于时在其他应用程序上执行各种鼠标事件跑步。我该怎么做才能实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:16:20.047

您可能想查看[.NET 中的这个库 Global System Hooks，](http://www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET)它使用全局系统挂钩来检测所有鼠标和键盘事件，包括应用程序之外的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:19:19.207

[`SendInput()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx)您可以使用 Win32 API合成操作系统范围内的击键、鼠标移动和按钮单击。[您可以使用P/Invoke](http://msdn.microsoft.com/en-us/library/aa288468.aspx)从 C# 调用它。示例代码可在此处找到：[PInvoke.net 上的 SendInput](http://pinvoke.net/default.aspx/user32/SendInput.html)。

我记得那天我使用 SendInput（和一个屏幕截图 API）在 C#（我认为是 2.0）中创建了一个扫雷机器人。它可以在大约一秒钟内解决专家难题。我希望我还有源代码可以在这里取样，但我没有。

**编辑：**似乎有人已经为 CodePlex 上的 Windows Input Simulator 创建了一个不错的`SendInput()`.NET [warpper](http://inputsimulator.codeplex.com/)。

# jsf - 如何在我的托管 bean 中识别单击的 commandButton

> ID：12797539
> 
> 赞同：2
> 
> 时间：2012-10-09T10:02:16.843
> 
> 标签：jsf

我的`actionListener`托管 bean 中有一个由许多命令按钮调用的方法。

```
public void verifyTestDisponibility(ActionEvent actionEvent) {
    if (button1 clicked) {
        // ...
    }
    if (button2  clicked) {
        // ...
    }
} 
```

我坚持的部分是识别单击的命令按钮。我怎样才能识别它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T10:55:07.680

你可以像这样使用它

在 xhtml 页面中，我们可以使用`<h:commandButton>`带有 actionListener 的标签

```
<h:commandButton id="btn1" action="#{yourBean.method}" value="ButtonValue"
   actionListener="#{yourBean.commandClicked}"></h:commandButton> 
```

在您的托管 bean 中

```
private String buttonId;
/* getters and setters for buttonId goes here */

public void commandClicked(ActionEvent event) {
  /* retrieve buttonId which you clicked */
  buttonId = event.getComponent().getId();

  /*check for which button you clicked*/
  if(buttonId.equals("btn1")){

  }else{

  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:17:45.103

您可以使用`event.getComponent().getClientId();`

```
if (event.getComponent().getClientId().equals("firstButton"))..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T05:37:20.790

这也适用于 ajax 监听器。我曾与 Primefaces 5 ajax 监听器一起使用过。例如：

```
public void myListener(AjaxBehaviorEvent ev) {
  String clientId = ev.getComponent().getClientId();
  ...
} 
```

# cakephp - CakePHP 2.x 的序列行为？

> ID：12797548
> 
> 赞同：0
> 
> 时间：2012-10-09T10:02:50.813
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

有人知道 cakePHP 2.x 的良好序列（有序列表）行为吗？我使用了 Neil Crookes Seqence Behavior（在 GitHub 上托管：[https](https://github.com/neilcrookes/sequence) ://github.com/neilcrookes/sequence ），但这还没有更新到2.x。提前很多！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:54:56.073

只需在它上面运行我的升级外壳。它将自动修复所有问题的 99%： [https ://github.com/dereuromark/upgrade](https://github.com/dereuromark/upgrade)

外壳，文件名，&model 到 Model $model，...

# android - Android AsyncTask 用于长时间运行的操作

> ID：12797550
> 
> 赞同：92
> 
> 时间：2012-10-09T10:02:54.700
> 
> 标签：android, android-asynctask

[引用此处](http://developer.android.com/reference/android/os/AsyncTask.html)找到的 AsyncTask 的文档，它说：

> AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

现在我的问题出现了：为什么？该`doInBackground()`函数在 UI 线程之外运行，那么在这里长时间运行操作有什么危害？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-26T06:45:55.653

这是一个非常好的问题，作为一个 Android 程序员需要时间来完全理解这个问题。事实上 AsyncTask 有两个相关的主要问题：

*   它们与活动生命周期的联系很差
*   它们很容易造成内存泄漏。

在[RoboSpice](https://github.com/octo-online/robospice) Motivations 应用程序（[可在 Google Play 上获得](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations)）中，我们详细回答了这个问题。它将深入了解 AsyncTasks、Loaders、它们的特性和缺点，并向您介绍网络请求的替代解决方案：RoboSpice。网络请求是 Android 中的常见需求，本质上是长时间运行的操作。这是该应用程序的摘录：

### AsyncTask 和 Activity 生命周期

AsyncTasks 不遵循 Activity 实例的生命周期。如果您在 Activity 中启动 AsyncTask 并旋转设备，则 Activity 将被销毁并创建一个新实例。但是 AsyncTask 不会死。它将继续存在，直到完成。

当它完成时，AsyncTask 不会更新新 Activity 的 UI。实际上，它会更新不再显示的活动的前一个实例。这可能会导致 java.lang.IllegalArgumentException: View not attach to window manager 类型的异常，例如，如果您使用 findViewById 来检索 Activity 中的视图。

### 内存泄漏问题

将 AsyncTasks 创建为活动的内部类非常方便。由于 AsyncTask 需要在任务完成或正在进行时操作 Activity 的视图，因此使用 Activity 的内部类似乎很方便：内部类可以直接访问外部类的任何字段。

*然而，这意味着内部类将在其外部类实例上持有一个不可见的引用：Activity。*

从长远来看，这会产生内存泄漏：如果 AsyncTask 持续很长时间，它会保持活动“活动”，而 Android 想要摆脱它，因为它不再显示。Activity 不能被垃圾收集，这是 Android 在设备上保留资源的中心机制。

* * *

将 AsyncTasks 用于长时间运行的操作确实是一个非常非常糟糕的主意。不过，它们适用于短暂的生命周期，例如在 1 或 2 秒后更新视图。

我鼓励您下载[RoboSpice Motivations 应用程序](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations)，它确实深入地解释了这一点，并提供了执行某些后台操作的不同方法的示例和演示。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-09T11:00:15.473

> 为什么 ？

因为`AsyncTask`，默认情况下，使用*您没有创建*的线程池。永远不要占用不是您创建的池中的资源，因为您不知道该池的要求是什么。如果该池的文档告诉您不要占用您未创建的池中的资源，则永远不要占用该池中的资源，就像这里的情况一样。

特别是，从 Android 3.2 开始，`AsyncTask`默认使用的线程池（对于`android:targetSdkVersion`设置为 13 或更高版本的应用程序）只有*一个*线程——如果你无限期地占用这个线程，你的其他任务都不会运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T10:11:44.937

Aysnc 任务是专门的线程，仍然可以与您的应用程序 GUI 一起使用，但同时保持 UI 线程的资源繁重任务。因此，当更新列表、更改视图等需要您执行一些获取操作或更新操作时，您应该使用异步任务，以便您可以将这些操作保持在 UI 线程之外，但请注意这些操作仍以某种方式连接到 UI .

对于不需要更新 UI 的长时间运行的任务，您可以改用服务，因为即使没有 UI，它们也可以生存。

因此，对于短任务，请使用异步任务，因为它们可能会在您的生成活动终止后被操作系统杀死（通常不会在操作过程中终止，但会完成其任务）。对于冗长且重复的任务，请改用服务。

有关更多信息，请参阅线程：

[AsyncTask 超过几秒钟？](https://stackoverflow.com/questions/12219930/asynctask-for-longer-than-a-few-seconds)

和

[即使活动已销毁，AsyncTask 也不会停止](https://stackoverflow.com/questions/2531336/asynctask-wont-stop-even-when-the-activity-has-destroyed)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-28T07:46:20.327

AsyncTask 的问题在于，如果它被定义为 Activity 的非静态内部类，它就会有对 Activity 的引用。在异步任务容器中的activity完成，但AsyncTask中的后台工作仍在继续的情况下，activity对象不会被垃圾回收，因为它有一个引用，这会导致内存泄漏。

解决此问题的解决方案是将[异步任务定义为](http://www.zoftino.com/android-threads-tutorial)活动的静态内部类并使用对上下文的弱引用。

但是，将它用于简单快速的后台任务仍然是一个好主意。要使用干净的代码开发应用程序，最好使用[RxJava](http://www.zoftino.com/retrofit-rxjava-android-example)运行复杂的后台任务并使用结果更新 UI。

# vim - Vim 改变 typedef 的颜色

> ID：12797555
> 
> 赞同：1
> 
> 时间：2012-10-09T10:03:00.530
> 
> 标签：vim

我在 C 文件中使用 typedef。我想将那些定义类型的单词的颜色更改为用于数据类型的颜色。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:22:10.647

有一个插件[TagHighlight](http://www.cgtk.co.uk/vim-scripts/taghighlight)用于 vim 以突出显示支持不同语言的类、typedef 等，您可以尝试。

> TagHighlight 是一个在 Vim 中突出显示源代码中的类、变量、类型等名称的插件。这样可以更快、更轻松地发现代码中的错误。通过使用丰富的 ctags 和解析输出，typedefs、#defines、枚举名称等都以不同的颜色清晰地突出显示。

# java - 如何查找 Java 堆大小和使用的内存 (Linux)？

> ID：12797560
> 
> 赞同：205
> 
> 时间：2012-10-09T10:03:10.317
> 
> 标签：java, linux, performance, memory, heap-memory

如何通过命令行检查 Linux 上 Java 应用程序的堆大小（和已用内存）？

我已经通过jmap尝试过。但它提供信息。关于 Eden/PermGen 等内部存储区域，这对我没有用。

我正在寻找类似的东西：

*   最大内存：1GB
*   最小内存：256 MB
*   堆内存：700 MB
*   已用内存：460 MB

就这样。我知道我可以在 JConsole 等中看到这一点，但我需要通过命令行来完成。（无法启用 JMX 等）

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-10-09T14:44:29.563

每个 Java 进程都有一个`pid`，您首先需要使用`jps`命令找到它。

获得 pid 后，您可以使用它`jstat -gc [insert-pid-here]`来查找垃圾收集堆行为的统计信息。

*   `jstat -gccapacity [insert-pid-here]`将显示有关内存池生成和空间功能的信息。

*   `jstat -gcutil [insert-pid-here]`将显示每一代的利用率占其容量的百分比。有助于一目了然地了解使用情况。

请参阅Oracle 网站上的[jstat 文档。](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html)

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2014-03-01T00:19:15.177

此命令显示配置的堆大小（以字节为单位）。

```
java -XX:+PrintFlagsFinal -version | grep HeapSize 
```

它也适用于 EC2 上的 Amazon AMI。

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2013-04-07T11:19:57.670

[jvmtop](https://github.com/patric-r/jvmtop)是一个命令行工具，它提供多个指标的实时视图，包括堆。

### VM 概览模式的示例输出：

```
 JvmTop 0.3 alpha (expect bugs)  amd64  8 cpus, Linux 2.6.32-27, load avg 0.12
 http://code.google.com/p/jvmtop

  PID MAIN-CLASS      HPCUR HPMAX NHCUR NHMAX    CPU     GC    VM USERNAME   #T DL
 3370 rapperSimpleApp  165m  455m  109m  176m  0.12%  0.00% S6U37 web        21
11272 ver.resin.Resin [ERROR: Could not attach to VM]
27338 WatchdogManager   11m   28m   23m  130m  0.00%  0.00% S6U37 web        31
19187 m.jvmtop.JvmTop   20m 3544m   13m  130m  0.93%  0.47% S6U37 web        20
16733 artup.Bootstrap  159m  455m  166m  304m  0.12%  0.00% S6U37 web        46 
```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2016-08-04T05:31:59.517

试试这个它在 Ubuntu 和 RedHat 中工作：

```
java -XX:+PrintFlagsFinal -version | grep -iE 'HeapSize|PermSize|ThreadStackSize' 
```

对于 Windows：

```
java -XX:+PrintFlagsFinal -version | findstr /i "HeapSize PermSize ThreadStackSize" 
```

对于 Mac

```
java -XX:+PrintFlagsFinal -version | grep -iE 'heapsize|permsize|threadstacksize' 
```

所有这些命令的输出类似于以下输出：

```
uintx InitialHeapSize                          := 20655360        {product}
uintx MaxHeapSize                              := 331350016       {product}
uintx PermSize                                  = 21757952        {pd product}
uintx MaxPermSize                               = 85983232        {pd product}
intx ThreadStackSize                           = 1024            {pd product}
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

要找到以 MB 为单位的大小，请将该值除以 (1024*1024)。

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2012-10-09T10:09:26.933

如果不使用大多数工具使用的 JMX，您所能做的就是使用

```
jps -lvm 
```

并推断设置将来自命令行选项。

默认情况下，如果没有 JMX，您将无法获取动态信息，但您可以编写自己的服务来执行此操作。

顺便说一句：我更喜欢使用 VisualVM 而不是 JConsole。

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2017-02-17T16:44:24.687

有一个具有视觉方面的命令行工具 - [jvm-mon](https://github.com/ajermakovics/jvm-mon)。它是一个用于命令行的 JVM 监控工具，它显示：

*   堆使用、大小和最大值
*   jvm 进程
*   cpu 和 GC 使用率
*   顶级线程

工具打开时，指标和图表会更新。

样本：[![jvm-mon](../Images/5ed4eee2670d746635da34ff8ce1c9dd.png)](https://github.com/ajermakovics/jvm-mon)

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2018-12-31T09:04:31.060

从**Java8 及更高版本**，您可以使用以下命令：

jcmd `JAVA_PROCESS_ID`GC.heap_info

您可以参考输出中的总内存、总内存和已用内存。

```
Sample Command And Output: jcmd 9758 GC.heap_info

PSYoungGen  total 1579520K, used 487543K [0x0000000751d80000, 0x00000007c0000000, 0x00000007c0000000)
  eden space 1354240K, 36% used [0x0000000751d80000,0x000000076f99dc40,0x00000007a4800000)
  from space 225280K, 0% used [0x00000007b2400000,0x00000007b2400000,0x00000007c0000000)
  to   space 225280K, 0% used [0x00000007a4800000,0x00000007a4800000,0x00000007b2400000)
ParOldGen       total 3610112K, used 0K [0x0000000675800000, 0x0000000751d80000, 0x0000000751d80000)
  object space 3610112K, 0% used [0x0000000675800000,0x0000000675800000,0x0000000751d80000)
Metaspace       used 16292K, capacity 16582K, committed 16896K, reserved 1064960K
  class space    used 1823K, capacity 1936K, committed 2048K, reserved 1048576K 
```

有关 jcmd 命令的更多详细信息，请访问[此处的链接](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html)

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2017-09-03T15:42:03.313

聚会迟到了，但一个非常简单的解决方案是使用 jpsstat.sh 脚本。它提供了一个简单的实时**当前内存**、**最大内存**和**cpu 使用**详细信息。

*   转到[GitHub 项目](https://github.com/amarjeetanandsingh/jps_stat)并下载**jpsstat.sh**文件
*   右键单击**jpsstat.sh**并转到*权限*选项卡并使其可执行
*   现在使用以下命令运行脚本**./jpsstat.sh**

这是脚本的示例输出 -

```
=====  ======  =======  =======  =====
 PID    Name   CurHeap  MaxHeap  %_CPU
=====  ======  =======  =======  =====
2777   Test3      1.26     1.26    5.8
2582   Test1      2.52     2.52    8.3
2562   Test2      2.52     2.52    6.4 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2019-09-13T11:07:08.370

在我的情况下，我需要检查一个 docker 容器中的标志，该容器没有大多数基本实用程序（ps，pstree ...）

使用`jps`我得到了正在运行的 JVM 的 PID（在我的情况下为 1），然后`jcmd 1 VM.flags`我从正在运行的 JVM 中得到了标志。

这取决于您可以使用哪些命令，但这可能会对某人有所帮助。:)

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2018-03-06T20:58:50.587

任何方法都应该给你大致相同的数字。`-X..m` `-X..x`为所有代分配使用的堆总是一个好主意。然后，您可以保证并执行 ps 以查看传递了哪些参数并因此被使用。

对于实际内存使用情况，您可以粗略地比较 VIRT（分配和共享）和 RES（实际使用）与 jstat 值的比较：

对于 Java 8，请参阅[jstat](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html)以了解这些值的实际含义。假设您运行一个没有 mmap 或文件处理的简单类。

```
$ jstat -gccapacity 32277
 NGCMN    NGCMX     NGC     S0C   S1C       EC      OGCMN      OGCMX       OGC         OC       MCMN     MCMX      MC     CCSMN    CCSMX     CCSC    YGC    FGC
215040.0 3433472.0  73728.0  512.0  512.0  67072.0   430080.0  6867968.0   392704.0   392704.0      0.0 1083392.0  39680.0      0.0 1048576.0   4864.0   7225     2 
```

```
$ jstat -gcutil 32277
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT
  6.25   0.00   7.96  18.21  98.01  95.29   7228   30.859     2    0.173   31.032 
```

**最大**：

```
 NGCMX + S0C + S1C + EC    + OGCMX   + MCMX    + CCSMX
   3433472 + 512 + 512 + 67072 + 6867968 + 1083392 + 1048576 = 12 GB 
```

（大致接近并低于 VIRT 内存）

**最大（最小，使用）：**

```
215040 + 512 + 512 + 67072 + 430080  + 39680    +  4864  = ~ 1GB 
```

（大致接近RES内存）

“不要引用我的话”，但 VIRT mem 大致接近或超过分配的最大内存，但只要**正在使用**的内存在物理内存中是空闲/可用的，JVM 就不会抛出内存异常。事实上，即使在操作系统上关闭了交换，在 JVM 启动时甚至不会检查最大内存与物理内存。[此处](https://stackoverflow.com/questions/561245/virtual-memory-usage-from-java-under-linux-too-much-memory-used)讨论了对 Java 进程真正使用的虚拟内存的更好解释。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-12-08T11:30:19.427

在 Java 堆大小方面，在 Linux 中，您可以使用

```
ps aux | grep java 
```

或者

```
ps -ef | grep java 
```

并查找 -Xms、-Xmx 以找出指定的初始和最大堆大小。

但是，如果您感兴趣的 Java 进程没有 -Xms 或 -Xmx，则意味着您的 Java 进程正在使用默认堆大小。您可以使用以下命令找出默认大小。

```
java -XX:+PrintFlagsFinal -version | grep HeapSize 
```

或特定的 jvm，例如，

```
/path/to/jdk1.8.0_102/bin/java -XX:+PrintFlagsFinal -version | grep HeapSize 
```

并查找以字节为单位的 InitialHeapSize 和 MaxHeapSize。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-06-11T13:15:48.560

首先从以下一项中获取进程 ID，即列出的进程中的第一个数字：（或仅使用`ps aux | grep java`，如果您愿意的话）

```
jps -lvm 
```

然后在此处使用进程 ID：

```
jmap -heap $MY_PID 2>/dev/null | sed -ne '/Heap Configuration/,$p';
jmap -permstat $MY_PID 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-07-10T17:41:13.497

从顶部找到您的 webapp/java 进程的进程 ID。使用 jmap heap 获取堆分配。我在 AWS-Ec2 上测试了这个弹性豆茎

您可以在下图中看到应用程序的 3GB 最大堆

[![在此处输入图像描述](../Images/080ae6a300c302b250be923ee5ab4bd5.png)](https://i.stack.imgur.com/D3qOj.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-06-22T13:59:58.367

*到目前为止，还没有这样的工具可以按照您要求的格式打印堆内存* **唯一也是唯一的打印方法是在 Runtime Class 的帮助下编写一个 java 程序**，

```
public class TestMemory {

public static void main(String [] args) {

    int MB = 1024*1024;

    //Getting the runtime reference from system
    Runtime runtime = Runtime.getRuntime();

    //Print used memory
    System.out.println("Used Memory:" 
        + (runtime.totalMemory() - runtime.freeMemory()) / MB);

    //Print free memory
    System.out.println("Free Memory:" 
        + runtime.freeMemory() / mb);

    //Print total available memory
    System.out.println("Total Memory:" + runtime.totalMemory() / MB);

    //Print Maximum available memory
    System.out.println("Max Memory:" + runtime.maxMemory() / MB);
} 
```

}

参考：[https ://viralpatel.net/blogs/getting-jvm-heap-size-used-memory-total-memory-using-java-runtime/](https://viralpatel.net/blogs/getting-jvm-heap-size-used-memory-total-memory-using-java-runtime/)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-12-15T17:50:02.567

使用`top`命令是检查程序内存使用情况的最简单方法。`RES`列显示进程占用的实际物理内存。

就我而言，我在 java 中读取了一个 10g 的文件，并且每次遇到 outOfMemory 异常。当`RES`列中的值达到`-Xmx`选项中设置的值时，就会发生这种情况。然后通过使用选项增加内存`-Xmx`一切都很好。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-05-17T03:40:39.330

如果使用 jrockit，请尝试 jrcmd 命令行工具。例如：

```
$ jrcmd 5127 print_memusage
5127:
Total mapped                  1074596KB           (reserved=3728KB)
-              Java heap       786432KB           (reserved=0KB)
-              GC tables        26316KB          
-          Thread stacks        13452KB           (#threads=34)
-          Compiled code         9856KB           (used=9761KB)
-               Internal          840KB          
-                     OS        15036KB          
-                  Other       146632KB          
-        Java class data        75008KB           (malloced=74861KB #103221 in 18709 classes)
- Native memory tracking         1024KB           (malloced=102KB #8) 
```

对于更多命令，如 heap_diagnostics，使用“jrcmd help”列出它们。

[https://blogs.oracle.com/jrockit/entry/why_is_my_jvm_process_larger_t](https://blogs.oracle.com/jrockit/entry/why_is_my_jvm_process_larger_t)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-12-07T21:08:44.697

```
jstat -gccapacity javapid  (ex. stat -gccapacity 28745)
jstat -gccapacity javapid gaps frames (ex.  stat -gccapacity 28745 550 10 ) 
```

上述命令的示例 O/P

```
NGCMN    NGCMX     NGC     S0C  
87040.0 1397760.0 1327616.0 107520.0 

NGCMN   Minimum new generation capacity (KB).
NGCMX   Maximum new generation capacity (KB).
NGC Current new generation capacity (KB). 
```

[在http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)获取更多详细信息

# javascript - 顶部 div 的动画位置创建空间

> ID：12797564
> 
> 赞同：3
> 
> 时间：2012-10-09T10:03:15.907
> 
> 标签：javascript, jquery, html, css, jquery-animate

我的页面内容周围有一个名为#Wrap 的 div，并编写了以下函数来向上移动所有内容，因此顶部的导航部分离开页面，并且我的内容有更多的屏幕空间：

```
$('.NavShrink').click(function(up) {
  $('#Wrap').animate({ top: '-=130px'});
  $(this).css('display', 'none');
  $('.NavExpand').css('display', 'block');
}) 
```

我还有以下内容可以再次将其恢复：

```
$('.NavExpand').click(function(down) {
  $('#Wrap').animate({ top: "+=130px"});
  $(this).css('display', 'none');
  $('.NavShrink').css('display', 'block');
}) 
```

我目前的问题是，当所有内容都移出屏幕时，页面似乎保持完整高度，这在我的内容底部创建了 130 像素的空白空间。这有什么办法？

我`#Wrap`目前只有这种风格`position:relative;`，但也尝试过，但`height:100%;`没有`height:auto;`运气。

编辑：这是页面：[http ://www.emilekelly.com/TestFolder/index.html](http://www.emilekelly.com/TestFolder/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:04:22.320

`position: absolute`上使用`#wrap`。

为什么？

因为相对于当前位置向上`position: relative`移动，`#wrap`但浏览器仍然考虑到它“应该”在下面的空间。

但是`position: absolute`会调整定位并将其脱离正常流程的上下文，从而折叠下面的内容，这就是您想要的 - 摆脱那个空间。

# c# - 是否可以压缩列表 在.net？

> ID：12797570
> 
> 赞同：1
> 
> 时间：2012-10-09T10:03:31.340
> 
> 标签：c#, web-services, xml-parsing, compression, gzip

我目前正在运行一个网络服务，将调用返回给我构建的 iPhone 客户端。Web 服务以肥皂的形式返回 xml。

我们注意到的是，当我们使用特定功能时，调用所需的时间比用户体验方面接受的时间要长。

这是一些示例代码和示例 xml

**功能**

```
public List<Foo> bar(....)
{

    // stuff

    return Bar;  
} 
```

结果被序列化为 XML 并在 iPhone 客户端中使用。

**函数返回的 XML 示例。**（此 xml 可能会变得非常大，具体取决于用户如何使用客户端应用程序）。

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <response xmlns="uri:Foo">
      <result>
        <p>
          <num>string</num>
          <d>int</d>
          <pf>string</pf>
          <pt>string</pt>
          <ipk>boolean</ipk>
          <ipa>boolean</ipa>
          <va>
            <ava xsi:nil="true" />
            <ava xsi:nil="true" />
          </va>
          <dps>
            <dp xsi:nil="true" />
            <dp xsi:nil="true" />
          </dps>
          <dst>string</dst>
        </p>
      </result>
    </response>
  </soap:Body>
</soap:Envelope> 
```

我基本上想要的是使数据更小。最好通过某种压缩。

是否可以在将 XML 返回给 iPhone 客户端之前压缩其大小？

我查看了[gzip](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)，但无法真正掌握它，因为它适用于流。

任何提示和/或指针将不胜感激。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:09:43.293

提示/指针：

1.  如果可能，请考虑使用 JSON，它占用的空间更小。

2.  研究使用[DeflateStream](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)类

3.  这是一篇关于[字符串压缩/加密的文章](http://www.codeproject.com/Articles/27396/Easy-String-Compression-and-Encryption)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:10:17.380

使用[DeflateStream](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)怎么样？这样，您可以将数据作为压缩字节数组而不是 XML 返回。我使用这种方法将 XML 段保存在内存中以减少占用空间，并且将整体大小减少了大约 80%，例如

**在服务器压缩**

```
using (var stream = new MemoryStream())
{
    using (var zip = new DeflateStream(stream, CompressionMode.Compress, true))
    {
        xmlDoc.Save(zip, SaveOptions.DisableFormatting);
    }
    return stream.ToArray();
} 
```

**在客户端解压**

```
using (var stream = new MemoryStream(compressedBytes))
{
    using (var zip = new DeflateStream(stream, CompressionMode.Decompress))
    {
        return XDocument.Load(zip);
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:21:31.130

如果您可以交换序列化，我会研究这个主题： [Fast and compact object serialization in .NET](https://stackoverflow.com/questions/549128/fast-and-compact-object-serialization-in-net)

当然，如果你不想松动 xml 格式，你也可以使用压缩：

*   [http://www.7-zip.org/sdk.html](http://www.7-zip.org/sdk.html)有一个 C# SDK
*   [http://www.icsharpcode.net/OpenSource/SharpZipLib/](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:11:52.780

如果您使用 WCF 4.5 或更高版本，您可以在二进制编码器上使用压缩：http: [//msdn.microsoft.com/en-us/library/aa751889.aspx](http://msdn.microsoft.com/en-us/library/aa751889.aspx "选择消息编码器")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:15:12.247

首先在网络服务器上启用压缩。这样您就不必担心手动压缩它，并且作为额外的好处，所有内容（除了 img 的）都将被压缩，从而获得更好的整体体验。

但是，我怀疑它是否真的能解决问题，因为您提到数据会变大。也许一个想法是发明一种不同的方案，在客户端缓存并在需要时（或在后台）请求增量。

一些更难做的事情，但在我看来会长期帮助你

# ruby-on-rails-3 - 如何将 id 传递给 rails 3 中的控制器？

> ID：12797576
> 
> 赞同：0
> 
> 时间：2012-10-09T10:03:38.833
> 
> 标签：ruby-on-rails-3

我已经使用 link_to 来调用控制器操作。

```
 <%= link_to "Inactive", {:controller => :leave_details, :action => :deactivate}, {:method => :post } %>. 
```

但我的要求是将 id 也传递给控制器​​操作，但是当我尝试传递 id(:id=>leave_detail.id) 时，它没有显示在参数中。我的参数看起来像

```
 {"_method"=>"post", "authenticity_token"=>"3vfyGQ5V6GQXRt2aQt+DOT0b3eGgP7B401uclnIGLUU=", "action"=>"deactivate", "controller"=>"leave_details"}. 
```

在我添加的路线文件中

```
 resources :leave_details do
         post :deactivate, :on => :collection
       end 
```

谁能告诉我这段代码出了什么问题或者我遗漏了什么。谢谢

# visual-studio-2010 - 使用 Visual Studio 2010 创建 Visual Studio 2008 加载项

> ID：12797579
> 
> 赞同：0
> 
> 时间：2012-10-09T10:03:55.483
> 
> 标签：visual-studio-2010, visual-studio-2008, add-in

有没有办法使用 Visual Studio 2010 创建 Visual Studio 2008 加载项？

我们的客户仍然使用 VS2008，在我们使用 TFS2010 升级到 VS2010 的过程中，如果我们能够在 VS2010 中开发此插件，那就太好了。

还是 Visual Studio 2010 加载项向后兼容？

谢谢！

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:07:15.530

Visual Studio 中有三个级别的可扩展性：

宏、加载项、VS 包

我可以确认 VS2008 插件在 VS2010 beta2 中运行良好。您只需编辑 .AddIn 文件并将“9.0”替换为“10.0”。此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:31:59.323

你应该去这个路径并将加载项路径复制到，然后工作它

打开 Visual Studio > Tools Menu > Options > Environment > Add-In/Macro Security > 添加路径，例如“C:\VisualStudioPlugins”

然后你使用这个加载项

saeedPy - 最好的问候

# c# - asp.net 网站（开发）第一次加载需要很长时间（C#/Visual Studio 2012）

> ID：12797580
> 
> 赞同：3
> 
> 时间：2012-10-09T10:03:57.210
> 
> 标签：c#, asp.net, iis-express, cassini

我知道关于生产网站的问题已经有一段时间了。但是，我想知道在开发过程中是否可以采取任何措施来加快网站的初始加载时间。我一直在计时，加载初始主页最多需要 50 秒。后续加载仅需 1 - 3 秒。此外，当我“中断”执行时，它不会在代码中的任何位置停止，而只会说“未找到源代码”。

输出窗口列出了很多：

```
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_scrollablecontent.ascx.fdc5856b.1gwjfghw.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_newarticles.ascx.44e66049.4ezrpblb.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_rightcolumnmediumrectangleadvert.ascx.57649735.kymbya94.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_main.master.cdcab7d2.lei5axii.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_articleheadline.ascx.c8a8415c.klhhkoqx.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_articleheadlines.ascx.c8a8415c.ikuqn1xd.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_panel.ascx.fdc5856b.a0mhhnzv.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_articlelistingitempanel.ascx.2acfc5c3.nqj5yies.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_otherheadlinespanel.ascx.205896d5.cg_7tycu.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\0a486d18\8cf9a7c5\App_Web_articleheadlinesandotherheadlines.ascx.1d347881.zttdxgh7.dll', Symbols loaded. 
```

此外，输出窗口以每秒 2 到 3 行的速度写入每一行（即每个组件）。该网站使用大量用户控件来使其更有条理。

有什么办法可以加快开发的初始页面加载速度？这确实浪费了开发人员的大量时间，不得不一直等待初始页面加载。我一直在尝试使用 Cassini 和 IIS Express，但两者的加载时间似乎相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:28:55.783

您是否一直在生成所有程序集？我曾经这样做，但现在我只在我的工作项目中设置构建选项（在解决方案属性中）。除非我手动执行，否则将不再生成所有其他 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:35:55.407

因为它是自上次发布以来第一次编译您的应用程序。这就是为什么它第一次很慢。它在每次发布后重新编译一次。因此，当您运行/调试/编译时，根据应用程序/库的大小重新编译需要时间。

您可以卸载您在网站中使用的库和程序集，以使其加载更快。

# javascript - 以十的幂显示较大的值

> ID：12797581
> 
> 赞同：0
> 
> 时间：2012-10-09T10:04:02.810
> 
> 标签：javascript, d3.js

我在 d3.js 工作，但遇到了问题。我正在使用教程和示例制作图表。我的问题是，在图表的 Y 轴上，我有非常大的值，例如 (120000000000)，它们是动态的。我无法在有限的空间上显示这些值那么有没有办法以 10 的幂显示这些大值，如 12X10^10 或使用 d3 的任何其他方式？

现在我正在使用这样的规模

**功率秤**

```
y = d3.scale.pow().exponent(0.3).domain([0, maxvalue ])
                                .range([Height, 0]).nice(); 
```

**对数刻度**

```
y = d3.scale.log().clamp(true).domain([0.1, maxvalue])
                               .range([height, 0]).nice(); 
```

**线性刻度**

```
y = d3.scale.linear().domain([0, maxvalue])
                     .range([height, 0]).nice(); 
```

**这对所有规模都很常见**

```
yAxis = d3.svg.axis().scale(y).ticks(6, tickFormatForLogScale)
                                   .orient('left'); 
```

任何有助于正确显示值的帮助都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:20:52.087

I was able to make something that looks like a log y linear x graph after modifying the example at: [http://d3-example.herokuapp.com/examples/area/area.html](http://d3-example.herokuapp.com/examples/area/area.html)

I changed the following:

```
 var data = d3.range(500).map(function(i) {
     return {x: i , y: i*i};
     //return {x: i / 39, y: (Math.sin(i / 3) + 2) / 4};
   });

  var y = d3.scale.log().clamp(true)
       .domain([1, 220000])
       .range([height, 0]);

  var x = d3.scale.linear()
       .domain([0, 500])
       .range([0, 900]); 
```

It seems unintuitive, but he `height` variable and the 900 literal define how big the rendered graph is. This may be due to how data is defined (parametrized function). To make this work, you have to tweak the domain of map(function(i){...}). The i variable will be given the values [ domain[0], ...., domain[1](https://i.stack.imgur.com/AlXDl.png)] and both x and y are calculated with the corresponding math expression in the map function.

I don't know how useful this will be to you, because you haven't shown the rest of your code. If you are still confused, try plotting a few log-scale graphs with [http://www.geogebra.org/](http://www.geogebra.org/) to get a general feel of how they work.

Here is what I get: ![logarithmic y scale](../Images/7862527011541500cae303dd423d2cd6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:11:24.257

Javascript 有 toPrecision 方法：

```
 var anumber=123.45
 anumber.toPrecision(2) //returns 1.2e+2 
```

# objective-c - Objective-C：将值写入 .plist 中数组的特定索引

> ID：12797582
> 
> 赞同：0
> 
> 时间：2012-10-09T10:04:04.440
> 
> 标签：objective-c, xcode, nsarray, nsdictionary, writetofile

我知道我可以例如将值写入 .plist 文件

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"stored" ofType:@"plist"];
NSString *comment = @"this is a comment"; 
[comment writeToFile:filePath atomically:YES]; 
```

但是，如果我在我的 .plist (gameArray) 中说一个数组，并且我想白`comment`到我的数组的特定索引中，即`gameArray[4]`；我该怎么做？

请允许我澄清一下

*   我有一个列表：`stored.plist`
*   在我的 plist 里面有一个数组`gameArray`
*   我想更新`gameArray`plist 内部的特定索引这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:19:06.273

您不能在应用程序的主包中更新和保存数据，而是必须在文档目录或其他目录中执行，如下所示：

```
 NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *plistFilePath = [documentsDirectory stringByAppendingPathComponent:@"stored.plist"];

if([[NSFileManager defaultManager] fileExistsAtPAth:plistFilePath]) 
{//already exits

   NSMutableArray *data = [NSMutableArray arrayWithContentsOfFile:plistFilePath];
   //update your array here
   NSString *comment = @"this is a comment";
   [data replaceObjectAtIndex:4 withObject:comment];

   //write file here
   [data writeToFile:plistFilePath atomically:YES];
}
else{ //firstly take content from plist and then write file document directory 

 NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"stored" ofType:@"plist"];
 NSMutableArray *data = [NSMutableArray arrayWithContentsOfFile:plistPath];
 //update your array here
   NSString *comment = @"this is a comment";
   [data replaceObjectAtIndex:4 withObject:comment];

   //write file here
   [data writeToFile:plistFilePath atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:15:16.273

假设'stored.plist'的内容是一个数组，你需要从路径实例化一个可变数组：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"stored" ofType:@"plist"];
NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile:filePath];
NSString *comment = @"this is a comment"; 

// inserting a new object:
[array insertObject:comment atIndex:4];

// replacing an existing object:
// classic obj-c syntax
[array replaceObjectAtIndex:4 withObject:4];        
// obj-c literal syntax:
array[4] = comment;

// Cannot save to plist inside your document bundle.
// Save a copy inside ~/Library/Application Support

NSURL *documentsURL = [[[NSFileManager defaultManager] URLsForDirectory:NSApplicationSupportDirectory inDomains:NSUserDomainMask] objectAtIndex:0];
NSURL *arrayURL = [documentsURL URLByAppendingPathComponent:[filePath lastPathComponent]];
[array writeToURL:arrayURL atomically:NO]; 
```

# objective-c - 今天的真实日期与 nib 文件

> ID：12797587
> 
> 赞同：-2
> 
> 时间：2012-10-09T10:04:19.640
> 
> 标签：objective-c, ios

如何使用 nib 文件创建带有今天真实日期的标签？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:34:48.310

不可能直接在 Interface Builder 中完成，您必须以编程方式完成。您应该连接（Google 类似 'IBOutlet'）UILabel，然后添加此代码，例如在 viewDidLoad 中（其中 _label 是您链接的 UILabel）：

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateStyle:NSDateFormatterShortStyle];
NSString *dateString = [dateFormat stringFromDate:today];
[_label setText:dateString]; 
```

# java - 将方法传递给类

> ID：12797590
> 
> 赞同：1
> 
> 时间：2012-10-09T10:04:22.443
> 
> 标签：java, processing

我正在研究控制物理安装的东西。安装存在一个网格，每个单元格可以是黑色或白色。Atm 我有这个方法：

```
void programRunner(int message) {
        if (message == STARTSHOWTIME) {
          println("showtime");
        }
        if (message == ENDSHOWTIME) {
          println("parse new state");
          boolean[][] nextState = randomState();
          gridCommunicator.nextState(nextState);
          checkMatrix.set(nextState);
        }
      } 
```

它传递一个多维数组，其中 true 为白色，false 为黑色。每当安装准备好并将某些东西设置到位以及进入下一个时，它就会被调用。

但是应该有多种模式，一种是随机的黑白模式，另一种是绘制字母，一种是显示图像等。

我想将每种模式都作为一个对象，我只是不知道我到底在寻找什么。举个例子：

```
class Program {

  String programName;

  Program(String programName) {
    this.programName = programName;
  }

  // . . . . . . . . . . . . . . . . . . .

  void programRunner(int message) {
    if (message == STARTSHOWTIME) {
      println("showtime");
    }
    if (message == ENDSHOWTIME) {
      println("parse new state");
      boolean[][] nextState = randomState();
      gridCommunicator.nextState(nextState);
      checkMatrix.set(nextState);
    }
  }

  // . . . . . . . . . . . . . . . . . . .

} 
```

方法 programRunner 现在仍然是相同的，并且要拥有不同的方法，我必须创建一个新类。但我不想要一个新类，我更喜欢我可以创建对象并将方法 programRunner 的样子传递给它。在java中可能有这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:14:58.907

如果您需要自定义具有几个变化部分的方法的行为，

1.  使用与部件一样多的方法创建接口；
2.  对于每一种不同的情况，将一个匿名类实例传递给您的方法，该类实例使用特定的案例特定逻辑实现接口。

解决方案的草图如下。

界面：

```
interface Strategy {
  void m1(); void m2();
} 
```

你的方法：

```
void actionMethod(Strategy s) {
  s.m1(); s.m2();
} 
```

调用方法：

```
actionMethod(new Strategy() { 
   public void m1() { ...stuff 1...}
   public void m2() { ...stuff 2...}
}); 
```

# jquery - 使用 jQuery 从多个元素中动态解除绑定事件（相当于 dojo.forEach(this.connections, dojo.disconnect);）

> ID：12797615
> 
> 赞同：0
> 
> 时间：2012-10-09T10:05:25.093
> 
> 标签：jquery, memory-leaks, internet-explorer-8, unbind

好的，这就是我所做的。

我使用 jQuery 将事件连接到我的控件，如下所示：

```
$("#id").click(function(){ 
   //do something 
});
$("#id-1").click(function(){ 
   //do something 
});
$("#id-2").click(function(){ 
   //do something 
}); 
```

我现在想要的是能够在页面卸载时动态解除绑定这些事件，这样：

```
$(window).unload(function(){
   //unbind events here
}); 
```

我使用以下内容将我的所有事件收集到一个数组中：

```
events = new Array();
events.push($("#id").click(function(){ 
   //do something 
})); 
```

现在在卸载时，我想遍历“事件”数组并断开所有事件与控件的连接。

我曾经像下面那样做，但那是道场：

```
dojo.forEach(this.connections, dojo.disconnect);) 
```

在上面的代码块中，“this.connections”是一个类似于我上面使用的“events”的数组。

那么有没有办法做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:11:54.223

这是我将如何做到的......

```
 events = new Array();
   events.push({selector:"#id",eventName:"click"}); 
```

接着

```
$(window).unload(function(){
   $.each(events,function(elem){
       $(elem.selector).off(elem.eventName);
   })
}); 
```

您将选择器和事件名称保存在数组中，以便以后访问它们。并简单地一一删除处理程序。可能不是最有效的，但它有效。

# php - 基本的 PHP SQL 查询不起作用

> ID：12797617
> 
> 赞同：0
> 
> 时间：2012-10-09T10:05:33.613
> 
> 标签：php, mysql, foreach, while-loop

我们有一个基本的 PHP 脚本来从 MySQL 数据库中提取每个作业的标题和描述，以简单地显示这些信息。这是它的样子：

```
$sql        = "SELECT `title`, `desc` FROM jobs WHERE active = 'y'";
$query      = mysql_query($sql) or die('<em><strong>SQL Error:</strong> ' . mysql_error() . '</em>');
$results    = mysql_fetch_assoc($query);

<?php while($result = mysql_fetch_assoc($query)) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$results['title']}</h2>";
    echo "<p>{$results['desc']}</p>";
    echo '</div>';
} ?> 
```

现在，这只从数据库中提取一行，但它应该提取两行。因此，我尝试了以下方法来替换该`while`语句：

```
<?php foreach($results as $result) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$result['title']}</h2>";
    echo "<p>{$result['desc']}</p>";
    echo '</div>';
} ?> 
```

这个说法也不行。这只是（奇怪地）显示表格第一行中每一列的第一个字符。

有谁知道为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:07:49.917

在您`while`使用与开始时相同的变量`$result`时：

```
while($result = mysql_fetch_assoc($query)) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$result['title']}</h2>";
    echo "<p>{$result['desc']}</p>";
    echo '</div>';
} 
```

并删除第一个`$results = mysql_fetch_assoc($query);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:07:45.173

您使用的结果变量`result`不是`results`

代替

```
$sql        = "SELECT `title`, `desc` FROM jobs WHERE active = 'y'";
$query      = mysql_query($sql) or die('<em><strong>SQL Error:</strong> ' . mysql_error() . '</em>');
**$results    = mysql_fetch_assoc($query);** // remove this line

<?php while($result = mysql_fetch_assoc($query)) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$results['title']}</h2>";
    echo "<p>{$results['desc']}</p>";
    echo '</div>';
} ?> 
```

到

```
$sql        = "SELECT `title`, `desc` FROM jobs WHERE active = 'y'";
$query      = mysql_query($sql) or die('<em><strong>SQL Error:</strong> ' . mysql_error() . '</em>');

<?php while($result = mysql_fetch_assoc($query)) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$result['title']}</h2>";
    echo "<p>{$result['desc']}</p>";
    echo '</div>';
} ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:08:46.920

您已经在循环开始之前获取了第一行，这就是它只打印第二行的原因。只需注释掉该行：

```
#$results = mysql_fetch_assoc($query); # here is your first row, 
                                       # simply comment this line

<?php while($result = mysql_fetch_assoc($query)) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$result['title']}</h2>";
    echo "<p>{$result['desc']}</p>";
    echo '</div>';
} ?> 
```

您也在循环，`$result`但`$results`在您的 while 循环体中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:09:11.677

检查这个：

```
$sql        = "SELECT `title`, `desc` FROM jobs WHERE active = 'y'";
$query      = mysql_query($sql) or die('<em><strong>SQL Error:</strong> ' . mysql_error() . '</em>');

<?php 
while($result = mysql_fetch_assoc($query)) {
    echo '<div class="left_content" style="margin-top: 15px;">';
    echo "<h2>{$result['title']}</h2>";
    echo "<p>{$result['desc']}</p>";
    echo '</div>';
}
 ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:10:55.603

更改此行

```
<?php while($result = mysql_fetch_assoc($query)) { 
```

到

```
<?php while($results = mysql_fetch_assoc($query)) { 
```

# cakephp - 在 cakephp 2.0 应用程序中代表另一个人发送电子邮件时遇到问题

> ID：12797618
> 
> 赞同：0
> 
> 时间：2012-10-09T10:05:36.710
> 
> 标签：cakephp

我有一个表单，用户可以在其中输入他们的电子邮件和朋友的电子邮件。如果电子邮件验证通过，我的控制器将使用电子邮件类向朋友发送消息。我想让朋友收到一封来自用户但无法正常工作的电子邮件。如果我将发件人设置为静态的，例如“myname@mydomain.com”，我只能成功发送电子邮件。这是我的表单：

```
<?php
    echo $this->Form->create('User', array( 'action' => 'invite',
                                    'controller' => 'users')  
                                    );
    echo $this->Form->input('User.from', array('label'=>"Your email",'value'=>'your email','class'=>"",'type'=>'email'));
    echo $this->Form->input('User.to', array('label'=>"Your friend's", 'value'=>"your friend's email",'class'=>"",'type'=>'email'));
    echo $this->Form->end(array('label'=>'Invite', 'class'=>'special-button use-transition')); 
?> 
```

然后我的用户控制器处理表单。这很成功，因为我可以让应用程序将电子邮件发送到有效的电子邮件地址。但是，如果我尝试将 $from 设置为用户的电子邮件地址，它不会发送任何内容。如何*从*用户输入的电子邮件地址发送此电子邮件？以下是用户控制器的相关部分：

```
// tell app to use Cake Email
App::uses('CakeEmail', 'Network/Email'); 

public function invite(){
    if ($this->request->is('post')) {
        // Get data from the form and send an email
        $to = $this->request->data['User']['to'];
        $from = $this->request->data['User']['from'];
        $subject = "Some text for the subject line";
        $message = "Some text for the message";
        // I use this data to send an email but it won't work unless
        // I change $from to something static like so:
        $from = "myemail@mydomain.com";
        $this->send($to, $from, $subject, $message);
        // redirect on success not shown...
    }
}

// Send function takes the to/from/subject/message and sends it
public function send($to, $from, $subject, $msg) {
    $email = new CakeEmail();
    $email->template('welcome')
          ->emailFormat('html')
          ->from($from)
          ->to($to)
          ->subject($subject);
    if ($email->send($msg)){
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:32:49.823

我建议您也尝试收集发件人的姓名并添加到来自字段。

所以你的表格应该是这样的：

```
<?php
    echo $this->Form->create('User', array( 'action' => 'invite',
                                'controller' => 'users')  
                                );
 echo $this->Form->input('User.fromName', array('label'=>"Your Name", 'value'=>"your name",'class'=>""));
echo $this->Form->input('User.from', array('label'=>"Your email",'value'=>'your email','class'=>"",'type'=>'email'));
echo $this->Form->input('User.to', array('label'=>"Your friend's", 'value'=>"your friend's email",'class'=>"",'type'=>'email'));
echo $this->Form->end(array('label'=>'Invite', 'class'=>'special-button use-transition')); 
?> 
```

在您的邀请函数中，让 $formMail 如下所示：

```
 $fromMail = array($this->request->data['User']['from'] => $this->request->data['User']['fromName']); 
```

希望这能奏效

# amazon-ec2 - 如何在 AWS 控制台中命名 EC2 EBS 卷？

> ID：12797622
> 
> 赞同：21
> 
> 时间：2012-10-09T10:05:47.857
> 
> 标签：amazon-ec2, amazon-web-services

如何使用 AWS 控制台命名我的 Amazon EC2 EBS 卷？默认情况下，名称字段为空，与实际的 EC2 实例不同，我看不到编辑此选项的选项。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-09T10:36:14.463

“名称”字段只是一个标签。要编辑此内容，请单击您的 EBS 卷，转到下方面板中的“标签”，您将在那里找到标签“名称”。填写您想要的名称作为值，它也会显示在概览面板中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T09:31:19.457

AWS 控制台中显示的“名称”只是一个标签。这适用于 AMI、卷、实例等。

您可以使用 ec2-api-tools 使用以下命令从命令行更改它：

```
ec2addtag <entity_id> --tag Name=<name> 
```

您可以通过调用安装 ec2-api-tools (Ubuntu)：

```
sudo apt-get install ec2-api-tools 
```

# android - 管理我的项目中的方向变化

> ID：12797625
> 
> 赞同：1
> 
> 时间：2012-10-09T10:06:17.937
> 
> 标签：android, bluetooth, screen-orientation, onconfigurationchanged

我正在开发具有蓝牙连接的应用程序。
我已将我的蓝牙启动器（意图）代码放在我活动的 onCreate() 中。
当手机的方向发生变化时，我的手机正在尝试重新连接设备。我试图从清单和活动中处理 Configurationchanges 事件，但这似乎不适合我。
请建议我对此的任何解决方案，我的时间不多了。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:15:35.173

你可以使用这个代码

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  if (savedInstanceState != null)
  {
   menuOut[0] = savedInstanceState.getBoolean("slide");
  }else
  {
  initLayout();
  adapter = new MyAdapter(this);
  ((ListView) findViewById(R.id.list1)).setAdapter(adapter);
  }
 } 
```

> 此函数在 oncreate 方法之外使用。

```
@Override
 protected void onSaveInstanceState(Bundle outState) {
  // TODO Auto-generated method stub

  outState.putBoolean("slide", true);
  super.onSaveInstanceState(outState);

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:10:58.140

尝试使用布尔值检查您是否已连接到蓝牙设备。使用 SharedPreferences 存储此值，然后在重写的“onResume()”函数中检查其值。

# javascript - Ipad悬停事件jQuery

> ID：12797627
> 
> 赞同：1
> 
> 时间：2012-10-09T10:06:22.223
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 为我的网站创建一个错误的悬停事件...

我只创建了以下列表中的所有子元素，现在也返回 false，而不是链接到正确的页面......

```
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
    $("ul.sf-menu li.i").click(function(e) {
        e.preventDefault();
    });
} 
```

有人对可行的替代方法有想法吗？

* * *

HTML

```
<ul class="sf-menu"> <li><a href="index.html">Home</a><li class="i"><a href="wedding-hire.html">Weddings</a>
            <ul>
                <li><a href="peel-suite.html">Peel Suite</a></li>
                <li><a href="the-hall.html">The Hall</a></li>
                <li><a href="the-grounds.html">The Grounds</a></li>
                <li><a href="food-and-drink.html">Food &amp; Drink</a></li>
                <li><a href="pricing.html">Pricing</a></li>
            </ul>
        </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:15:29.463

出色地。没有 HTML 很难说。但是当用户单击 li 时，您将停止浏览器的默认行为（因此还有它的子项，我认为这是一个锚点/链接）。您可以在点击时检查它是链接还是锚点，并以不同的方式处理它；

```
$("ul.sf-menu li.i").click(function(e) {
    if (e.target.nodeName!=="A"){
        e.preventDefault();
        //do your hover code
    }
    else{
        //do nothing, because the user wants the link to load
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:49:41.403

更改您的选择器，使其仅匹配第一级列表点，我也没有看到类 i，因此您可能还需要从选择器中删除它。

```
$("ul.sf-menu > li") 
```

# facebook-apps - 我推出了一个新的 Facebook 应用程序，如何选 择我现有的粉丝页面作为应用程序的社区页面？

> ID：12797630
> 
> 赞同：1
> 
> 时间：2012-10-09T10:06:30.003
> 
> 标签：facebook-apps, facebook-page

几个月来，我们一直在开发我们的游戏。

在那几个月里，我们一直在创建一个社区粉丝页面，我们花费了数百欧元来宣传我们的粉丝页面。

现在我们终于要启动游戏了，但是当我尝试将我现有的粉丝页面连接为应用程序的社区页面时，我只能选择创建一个新的。

如何连接我的新应用程序我的粉丝页面？或者我可以将喜欢迁移到新的粉丝页面吗？

我拒绝假设我们浪费了这么多钱来建立一个无用的粉丝页面！！！

# c# - asp.net ObjectDataSource 如何访问 System.Web.UI.Page 对象

> ID：12797631
> 
> 赞同：3
> 
> 时间：2012-10-09T10:06:30.303
> 
> 标签：c#, asp.net, objectdatasource

我使用 ObjectDataSource 如下。

```
<asp:ObjectDataSource ID="Item" runat="server" 
                SelectMethod="Grid_DataBind" TypeName="XXX.XXX.XXX" 
                DataObjectTypeName="Controller.Items" UpdateMethod="UpdateRow_Grid"
                InsertMethod="InsertRow_Grid"> 
```

当 InsertMethod 触发时，一切正常，但是......

```
public IList<Items> InsertRow_Grid(Items item)
    {
        item.ID = System.Guid.NewGuid().ToString();          
        bool contains = GridSource.AsEnumerable()
                        .Any(row => item.JobID == row.JobID);
        if (!contains)
        {
            GridSource.Add(item);              
        }
        else
        {              
           lblMsg.Text= "This record has already exists.";               
        }
        return GridSource;
    } 
```

它不知道我的 aspx 文件中显示的标签对象。

![在此处输入图像描述](../Images/2dd8f09485ebb4097bedc23718714405.png)

我已阅读[此](https://stackoverflow.com/questions/5874564/objectdatasource-selecting-method-cant-see-any-other-controls-values)内容，以便我可以搜索正确的解决方案。

但我仍然不知道该怎么做。

每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T10:47:00.170

这是因为 asp:ObjectDataSource 创建了您在“TypeName”属性中指定的对象的新实例 要使用当前页面对象而不是创建新对象，您需要以下代码：

```
YourObjectDataSource.ObjectCreating += (s, a) => { a.ObjectInstance = this; }; 
```

将其放在 Page_Load 或 Page_Init 中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T12:18:58.853

您可以将此代码添加到您的页面

```
...
<asp:Label id="lblMsg" runat="server"/>
<asp:ObjectDataSource ID="Item" runat="server" 
            SelectMethod="Grid_DataBind" TypeName="XXX.XXX.XXX" 
            DataObjectTypeName="Controller.Items" UpdateMethod="UpdateRow_Grid"
            InsertMethod="InsertRow_Grid">
..... 
```

# java - 这种内存使用模式在 Android 应用程序中可以吗？

> ID：12797632
> 
> 赞同：0
> 
> 时间：2012-10-09T10:06:32.250
> 
> 标签：java, android, memory-leaks

我一直在查看我的应用程序的内存使用情况。这就是我在 MAT 中看到的。

![在此处输入图像描述](../Images/f4d2a7080261f8dfcb780e58361852db.png)

根据著名的google io视频，android的主要资源都很好。但是 7.5 MB 是不是太多了？剩下的是什么？

我的应用程序使用了近 35MB 的大堆，其中近 30MB 几乎总是满的。GC_CONCURRENT 日志几乎总是显示为 9% 可用或 7% 可用。这正常吗？还是我在某处有内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:28:11.857

请阅读什么是[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)。在 android 中，内存泄漏意味着您创建一些对象并在对象尚未使用时保持指向它的链接。（如果您没有任何指向对象的链接 - 它将由 GC 收集）因此，查看内存是否存在问题的最简单方法 - 长时间使用您的应用程序并查看分配的内存是否增加。如果总是有 X Mb - 并且没有增加 - 没关系，即使 X 很大。

# android - 通过调用 startService 向服务发送消息

> ID：12797633
> 
> 赞同：2
> 
> 时间：2012-10-09T10:06:38.013
> 
> 标签：android, android-service

我已经创建了一个服务，并且我正在使用函数通过我的活动访问它，`bindService`但即使在我的活动退出后我也想继续运行我的服务。

为此，我必须使用`startService`，但以前我使用`bindService`的是在被调用后向（在服务中）`ServiceConnection`发送消息的地方。`handler``onServiceConnected`

但是我不知道如何使用 a 发送消息，`startService`因为我没有任何地方`onServiceConnected`可以将消息发送给处理程序。

*注意：我想继续运行我的服务，即使我不在我的应用程序中，因为我正在从我的服务更新小部件。*

所以一个服务有两个角色

1.  更新活动内的文本视图
2.  一旦活动退出，服务将更新小部件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:41:32.643

您有 3 个选项与您的服务进行通信：

*   为意图添加额外内容并调用 startService。您可以多次调用它，即使该服务已经在运行
*   创建一个 Messenger 并使用它与服务进行通信
*   使用绑定服务

请务必`START_STICKY`在您的服务中使用，以便在活动完成后继续运行，并`startForeground()`显示通知，否则您的服务将在一段时间后（平均为 30 分钟到 1 小时）被 SO 杀死。

**起始流程：**

*   ClientActivity (CA) 启动服务并将 CA Messenger 地址作为 Intent 中的额外地址发送给服务。
*   在服务启动时，它将服务信使地址发送回 CA（使用 CA 信使地址发送消息）。
*   最后，服务返回 START_STICKY。

有了这个，客户端和服务器就可以知道对方的 Messenger 地址，并且不需要绑定。

**停止服务：**

要停止服务，请在您的活动中使用以下内容：

```
stopService(new Intent(ActivityClass.this, ServiceClass.class)); 
```

**重新连接：**

如果您离开客户端活动 (CA) 并希望在重新启动应用程序时重新连接到服务，您有两种选择：

-再次从您的 CA 调用 startService。这将再次调用`onStartCommand`服务中的。仅当服务`onCreate()`尚未运行时才调用该服务。您可以使用上述启动流程来获取服务 Messenger；

- 您可以将服务 Messenger 设为 public 和 static `public static Messenger mMsgService = null;`。因此，当您的 CA 启动时，它可以检查服务信使是否已初始化（不为空）并使用它与服务进行通信。当设置停止时，需要设置`mMsgService = null;`

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:34:10.593

除了绑定到该服务之外，没有其他方法可以与该服务进行通信。在活动中绑定服务并不一定意味着服务将（或需要）解除绑定 onDestroy 服务。如果不调用 unbindService 方法，则绑定的 Service 将一直运行。所以解决方案是绑定到服务上，不要调用活动的 unbindService onDestroy。

# c++ - C++ Builder 导出 cdecl 以供跨平台使用

> ID：12797639
> 
> 赞同：0
> 
> 时间：2012-10-09T10:06:54.500
> 
> 标签：c++, delphi, dll, cross-platform, c++builder

我有一个最初用 MSVS 编写的库 (dll)，我需要制作跨平台 (Mac/Win)。我开始使用 XCode，但有了新的 Embarcadero C++ builder XE3，我认为一个开发环境会是更好的选择。宿主应用程序是用 Delphi 编写的，因此更有理由将其移至一组工具。

对于我现有的代码，一切都是 cdecl 但我无法让它在 C++ builder 上工作。如果我将它转换为stdcall，那么它可以正常工作，但据我所知，在OSX下使用库时我需要使用cdecl。

在 MSVC 中，我像这样导出我的函数：

```
extern "C" __declspec(dllexport) int Init(char * init_dir, DebugCallbackFunc f, DeviceCallbackFunc f1) 
```

在 C++ Builder 中，我像这样导出：

```
extern "C" __declspec( dllexport ) int _cdecl Init(char * init_dir, DebugCallbackFunc f, DeviceCallbackFunc f1) 
```

问题是，当我使用 cdecl 时，Delphi 主机应用程序总是使用 GetProcAddress 返回 NULL，但如果我将其更改为 stdcall，则工作正常。

```
TUDMXInit = function(p: PAnsiChar; f: TDebugCallbackFunc; f1: TDeviceCallbackFunc): integer; cdecl; 
```

我还将欣赏一个处理“_”的最佳方法的示例，该示例假定在 OSX 下作为导出函数的前缀。我应该只使用条件将其添加到所有函数的前面吗？

提前致谢。马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:28:16.493

这样做的通常方法是使用宏。declspec 和 cdecl/stdcall 是特定于 Windows 的。您想要的 OSX（和其他 Unix）中的调用是

```
extern "C" int Init(char * init_dir, DebugCallbackFunc f, DeviceCallbackFunc f1) 
```

所以通常的方法是定义一个宏，例如 DLL_EXPORT 参见 Boost 库中的示例，例如来自[Serialization或来自](http://www.boost.org/doc/libs/1_51_0/boost/archive/detail/decl.hpp)[Tcl](http://wiki.tcl.tk/8721)的更简单的描述

假设 WINDOWS 在您的构建中为 Windows 库定义

```
#ifdef WINDOWS
  #define DLLEXPORT  __declspec( dllexport )
#else
  #define DLLEXPORT
#endif 
```

您也可以在此处构建 DLL 或在需要时调用 DLL 时使此定义正确运行`__declspec( dllimport )`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:26:16.363

我处理这些差异的方式始终是相同的基本思想：看看每个编译器是如何做的，然后想出一个或一组宏，它们可以生成所有需要的表格，而且使用起来不太麻烦。

对于您的 _cdecl，像“EXPORT_CDECL”这样的简单宏似乎就足够了；然后，您可以根据编译器的要求将其设置为空，“_cdecl”或“stdcall”。

您还可以使用类似这样的东西来为名称添加一些东西，例如`#define EXPORT_NAME(Name) _##Name`

当然，您也可以创建一个“大”宏，它采用单个组件（返回类型、函数名称、函数参数）并吐出整个结果行。

# ffmpeg - FFMPEG 如何将 MJPEG 编码数据复用到 mp4 或 avi 容器 c++

> ID：12797647
> 
> 赞同：4
> 
> 时间：2012-10-09T10:07:16.513
> 
> 标签：ffmpeg, mjpeg, multiplexing

我正在寻找一种将 mjpeg（压缩）视频数据复用到 mp4 或 avi 等视频容器中的方法。（我将来还需要添加音频）。因为我在项目的其他部分也使用了 FFMPEG，所以如果可能的话，我想使用这些库。我不是在寻找命令行 FFMPEG 使用！我尝试在 ffmpeg 中使用 muxing 示例，我只能创建一个（非常大的）带有视频信息的 .mjpeg 文件。这不是我要找的。

示例将非常受欢迎，但指向正确方向的指针也可以！

编辑：我已将 yuvj422p 流输出到 jpeg 图像，我想将其放入 mp4 容器中。使用 ffmpeg 命令行可以：

ffmpeg -i yuvy%01d.jpg -vcodec mjpeg out.mp4

我想直接在我的代码中执行此操作（当然不首先创建 jpeg 图像）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:25:00.680

我通过以下方式修复了它：

我使用了 muxing 示例，而不是使用编码函数，我只是跳过它，直接将 JPEG 数据加载到数据包中。为了设置 OutputContext，我使用了猜测格式函数并将编解码器设置为 MJPEG。我将 PTS 数据更改为帧计数器。因为无论如何所有帧都是按时间顺序排列的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T11:55:41.803

三个主要步骤

1.  解码（使用 avcodec_decode_video() ）
2.  将原始帧转换为 yuv420p 格式（使用 swscale()）
3.  编码（使用 avcodec_encode_video() ）

如果您需要，我可以提供示例代码

# android - 如何在 Android 的 Webview 中打开 Excel、.doc 文件？

> ID：12797651
> 
> 赞同：11
> 
> 时间：2012-10-09T10:07:27.317
> 
> 标签：android

如何在 Android webview 中打开 Excel 和 .doc 文件。谷歌文档可以支持吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-09T10:11:12.640

是的，Google doc 支持您显示 doc 或 excel、pdf、txt 或其他格式。

```
WebView urlWebView = (WebView)findViewById(R.id.containWebView);
urlWebView.setWebViewClient(new AppWebViewClients());
urlWebView.getSettings().setJavaScriptEnabled(true);
urlWebView.getSettings().setUseWideViewPort(true);
urlWebView.loadUrl("http://docs.google.com/gview?embedded=true&url="
                + "YOUR_DOC_URL_HERE"); 

public class AppWebViewClients extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);

    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-20T11:31:41.237

如果要从内部存储中打开文档文件，例如 **file:///data/user/0/com.sample.example/files/documents/sample.docx**，则**不能使用**

```
urlWebView.loadUrl("http://docs.google.com/gview?embedded=true&url="+"YOUR_DOC_URL_HERE"); 
```

您必须从外部应用程序（如 google docs、MS Word 等）打开 docx 文件，为此您可以使用`FileProvider`

* * *

添加`<provider>`AndroidManifest.xml 文件。

```
<application>
 <provider
   android:name="androidx.core.content.FileProvider"
   android:authorities="com.sample.example.provider" // you have to provide your package name here add add .provider after your package name
   android:exported="false"
   android:grantUriPermissions="true">
   <meta-data
      android:name="android.support.FILE_PROVIDER_PATHS"
      android:resource="@xml/file_paths" />
 </provider>
</application> 
```

* * *

添加**res/xml/file_paths.xml**文件

```
<?xml version="1.0" encoding="utf-8"?>
<paths>
  <root-path name="root" path="." />
</paths> 
```

* * *

**最后在MainActivity.java**文件中添加打开 docx 文件的代码

```
StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();
StrictMode.setVmPolicy(builder.build());
builder.detectFileUriExposure();

Uri docUri = FileProvider.getUriForFile(getApplicationContext(), 
  "com.sample.example.provider", 
  new File("/data/user/0/com.sample.example/files/documents/sample.docx")); // same as defined in Manifest file in android:authorities="com.sample.example.provider"
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(docUri, "application/msword");
try{
   intent.setFlags(FLAG_GRANT_READ_URI_PERMISSION | FLAG_GRANT_WRITE_URI_PERMISSION);
   Intent chooser = Intent.createChooser(intent,"Open With..");
   startActivity(chooser);
} catch (ActivityNotFoundException e) {
   //user does not have a pdf viewer installed
   Log.d(LOG_TAG, "shouldOverrideUrlLoading: " + e.getLocalizedMessage());
   Toast.makeText(MainActivity.this, "No application to open file", Toast.LENGTH_SHORT).show();
} 
```

# android - 在 Android 中不一致地获取 Inflate 异常

> ID：12797652
> 
> 赞同：0
> 
> 时间：2012-10-09T10:07:30.983
> 
> 标签：android, xml, layout-inflater, forceclose

我的模拟器和设备上的 Inflate 异常不一致，但有时它工作正常

它显示在第-16行的xml中，我遇到了问题，因为我使用的是两个图像，一个在另一个之上

我有一个位图图像，并且我保留了一个 .png 图像。

这是因为我在 xml 中拥有的图像吗？几乎我的 xml 中有 10 张图片

我在具有 800 跨 480 分辨率的模拟器中运行此应用程序

我不知道如何解决这个问题，任何帮助总是很感激。

Logcat 显示这些消息

```
 10-09 09:39:34.667: E/AndroidRuntime(339): FATAL EXCEPTION: main
 10-09 09:39:34.667: E/AndroidRuntime(339): java.lang.RuntimeException: Unable to start activity ComponentInfo{co.msat.carhome.clusters/co.msat.carhome.clusters.ClustersActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class <unknown>
 10-09 09:39:34.667: E/AndroidRuntime(339):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
 10-09 09:39:34.667: E/AndroidRuntime(339):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 10-09 09:39:34.667: E/AndroidRuntime(339):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.os.Looper.loop(Looper.java:123)
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-09 09:39:34.667: E/AndroidRuntime(339):  at java.lang.reflect.Method.invokeNative(Native Method)
10-09 09:39:34.667: E/AndroidRuntime(339):  at java.lang.reflect.Method.invoke(Method.java:507)
 10-09 09:39:34.667: E/AndroidRuntime(339):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-09 09:39:34.667: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-09 09:39:34.667: E/AndroidRuntime(339):  at dalvik.system.NativeStart.main(Native Method)
10-09 09:39:34.667: E/AndroidRuntime(339): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class <unknown>
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
10-09 09:39:34.667: E/AndroidRuntime(339):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
10-09 09:39:34.667: E/AndroidRuntime(339):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
   10-09 09:39:34.667: E/AndroidRuntime(339):   at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
   10-09 09:39:34.667: E/AndroidRuntime(339):   at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
   10-09 09:39:34.667: E/AndroidRuntime(339):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
   10-09 09:39:34.667: E/AndroidRuntime(339):   at android.app.Activity.setContentView(Activity.java:1657)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at co.msat.carhome.clusters.ClustersActivity.onCreate(ClustersActivity.java:53)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
  10-09 09:39:34.667: E/AndroidRuntime(339):    ... 11 more
  10-09 09:39:34.667: E/AndroidRuntime(339): Caused by: java.lang.reflect.InvocationTargetException
  10-09 09:39:34.667: E/AndroidRuntime(339):    at java.lang.reflect.Constructor.constructNative(Native Method)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
  10-09 09:39:34.667: E/AndroidRuntime(339):    ... 22 more
  10-09 09:39:34.667: E/AndroidRuntime(339): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x12/d=0x0 a=2 r=0x7f070001}
  10-09 09:39:34.667: E/AndroidRuntime(339):    at android.content.res.Resources.loadDrawable(Resources.java:1681)
  10-09 09:39:34.667: E/AndroidRuntime(339):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
    10-09 09:39:34.667: E/AndroidRuntime(339):  at android.view.View.<init>(View.java:1951)
    10-09 09:39:34.667: E/AndroidRuntime(339):  at android.widget.ImageView.<init>(ImageView.java:112)
    10-09 09:39:34.667: E/AndroidRuntime(339):  at android.widget.ImageView.<init>(ImageView.java:108)
     10-09 09:39:34.667: E/AndroidRuntime(339):     ... 25 more
     10-09 09:44:34.836: I/Process(339): Sending signal. PID: 339 SIG: 9
     10-09 09:54:16.536: D/AndroidRuntime(368): Shutting down VM
     10-09 09:54:16.536: W/dalvikvm(368): threadid=1: thread exiting with uncaught exception (group=0x40015560)
     10-09 09:54:16.667: E/AndroidRuntime(368): FATAL EXCEPTION: main
     10-09 09:54:16.667: E/AndroidRuntime(368): java.lang.RuntimeException: Unable to start activity ComponentInfo{co.msat.carhome.clusters/co.msat.carhome.clusters.ClustersActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class <unknown>
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at android.os.Handler.dispatchMessage(Handler.java:99)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at android.os.Looper.loop(Looper.java:123)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at android.app.ActivityThread.main(ActivityThread.java:3683)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at java.lang.reflect.Method.invokeNative(Native Method)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at java.lang.reflect.Method.invoke(Method.java:507)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
      10-09 09:54:16.667: E/AndroidRuntime(368):    at dalvik.system.NativeStart.main(Native Method)
      10-09 09:54:16.667: E/AndroidRuntime(368): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class <unknown>
     10-09 09:54:16.667: E/AndroidRuntime(368):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
     10-09 09:54:16.667: E/AndroidRuntime(368):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    10-09 09:54:16.667: E/AndroidRuntime(368):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
   10-09 09:54:16.667: E/AndroidRuntime(368):   at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
   10-09 09:54:16.667: E/AndroidRuntime(368):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
   10-09 09:54:16.667: E/AndroidRuntime(368):   at android.app.Activity.setContentView(Activity.java:1657)
   10-09 09:54:16.667: E/AndroidRuntime(368):   at co.msat.carhome.clusters.ClustersActivity.onCreate(ClustersActivity.java:53)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
  10-09 09:54:16.667: E/AndroidRuntime(368):    ... 11 more
  10-09 09:54:16.667: E/AndroidRuntime(368): Caused by: java.lang.reflect.InvocationTargetException
 10-09 09:54:16.667: E/AndroidRuntime(368):     at java.lang.reflect.Constructor.constructNative(Native Method)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
 10-09 09:54:16.667: E/AndroidRuntime(368):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
 10-09 09:54:16.667: E/AndroidRuntime(368):     ... 22 more
  10-09 09:54:16.667: E/AndroidRuntime(368): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x12/d=0x0 a=2 r=0x7f070001}
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.content.res.Resources.loadDrawable(Resources.java:1681)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.view.View.<init>(View.java:1951)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.widget.ImageView.<init>(ImageView.java:112)
  10-09 09:54:16.667: E/AndroidRuntime(368):    at android.widget.ImageView.<init>(ImageView.java:108)
  10-09 09:54:16.667: E/AndroidRuntime(368):    ... 25 more 
```

这是我的 xml 代码

```
 <?xml version="1.0" encoding="utf-8"?>
      <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/my_ph"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/meter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:layout_marginLeft="110dip"
    android:layout_marginTop="80dip"
    android:src="@drawable/background" />

 <ImageView
    android:id="@+id/pointer1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:layout_marginLeft="110dip"
    android:layout_marginTop="80dip"
    android:background="@+id/meter"
    android:visibility="visible" /> 

<!--
    android:layout_gravity="left"
    android:layout_marginLeft="170dip"
    android:layout_marginTop="100dip"        
    android:src="@drawable/meat_speedometer_needle01"
-->

<ImageView
    android:id="@+id/rpm"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:layout_marginLeft="290dip"
    android:layout_marginTop="80dip"
    android:src="@drawable/background" />

<ImageView
    android:id="@+id/pointer2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:layout_marginLeft="290dip"
    android:layout_marginTop="80dip"
    android:background="@+id/rpm"
    android:visibility="visible" />

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="60dp" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <ImageView
            android:id="@+id/text1"
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="50dip"
            android:layout_marginTop="30dp"
            android:background="@drawable/leftarrow"
            android:textSize="10dp" />

        <TextView
            android:id="@+id/text2"
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="170dip"
            android:layout_marginTop="30dp"
            android:background="#ff0000"
            android:textSize="10dp" />

        <ImageView
            android:id="@+id/rightindicator"
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="180dip"
            android:layout_marginTop="30dp"
            android:background="@drawable/rightarrow"
            android:textSize="10dp" />
    </TableRow>
</TableLayout>

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="90dp"
    android:layout_gravity="bottom" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <ImageView
            android:id="@+id/text11"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_marginLeft="50dip"
            android:layout_marginTop="0dp"
            android:background="@drawable/icon" />

        <TextView
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="05dp"
            android:layout_marginTop="05dp"
            android:text="30&apos;C" />

        <ImageView
            android:id="@+id/text12"
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="120dip"
            android:layout_marginTop="30dp"
            android:background="@drawable/battery"
            android:textSize="10dp" />

        <TextView
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="8dp"
            android:layout_marginTop="30dp"
            android:text="70%" />

        <ImageView
            android:id="@+id/text13"
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="105dip"
            android:layout_marginTop="30dp"
            android:background="@drawable/fuel"
            android:textSize="10dp" />

        <TextView
            android:layout_width="30dp"
            android:layout_height="20dp"
            android:layout_marginLeft="8dp"
            android:layout_marginTop="30dp"
            android:text="25L" />
    </TableRow>
</TableLayout> 
```

这是我的java代码

```
 public class ClustersActivity extends Activity {
/** Called when the activity is first created. */
// ViewFlipper vf;
ImageView img, img1, rightindicator, pointer1, pointer2;
Bitmap bitmap;
Matrix matrix = new Matrix();
private IMyRemoteService remoteService;
private boolean started = false;
private RemoteServiceConnection conn = null;
private Handler serviceHandler;
private int enginRPM;
private int batteryLevel;
private int temperature;
private static int speed;
private Task myTask = new Task();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.cluster);
    getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
    startService();
    bindService();
    System.gc();
    bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.meat_speedometer_needle01);
    rightindicator = (ImageView) findViewById(R.id.rightindicator);
    img = (ImageView) findViewById(R.id.meter);
    img1 = (ImageView) findViewById(R.id.rpm);
    pointer1 = (ImageView) findViewById(R.id.pointer1);

    pointer1.setImageBitmap(bitmap);
    pointer1.setScaleType(ScaleType.CENTER);
    pointer1.setVisibility(View.VISIBLE);
    pointer2 = (ImageView) findViewById(R.id.pointer2);
    pointer2.setImageBitmap(bitmap);
    pointer2.setScaleType(ScaleType.CENTER);
    pointer2.setVisibility(View.VISIBLE);

    final Animation fadein = AnimationUtils.loadAnimation(this,
            R.anim.fade_in);
    final Animation fadeout = AnimationUtils.loadAnimation(this,
            R.anim.fade_out);
    // rightindicator.startAnimation(animationScale);
    rightindicator.startAnimation(fadein);
    rightindicator.startAnimation(fadeout);
    serviceHandler = new Handler();
    serviceHandler.postDelayed(myTask, 1000L);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:14:19.050

使用`drawable`代替`@+id`

```
 android:background="@drawable/meter" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:06:51.787

线`android:background="@+id/meter"`是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T12:08:59.637

要修复错误：

在清单中：

```
<application
        android:largeHeap="true" 
```

在 .xml 文件中，您必须删除以下代码：

```
android:src="@drawable..
android:background="@drawable... 
```

因为错误是内存不足错误。您应该查看代码以处理内存

# .net - Page.Title 与母版页不符合预期

> ID：12797653
> 
> 赞同：1
> 
> 时间：2012-10-09T10:07:34.713
> 
> 标签：.net, master-pages, page-title

根据一些消息来源（[包括这个](http://kirtimdarji.blogspot.co.il/2011/07/page-life-cycle-of-master-page-with.html)），当使用母版页时，页面`Load`发生在母版页之前`Load`。

当我在页面中分配`Page.Title`一个值时，`Load`它会起作用。

`Page.Title += "J"`如果我在母版页中写入`Load`标题`J`，则无论先前是否分配了值。

在所有情况下，当我`Response.Write(Page.Title)`稍后在母版页中时`Load`，它都是空的。

我在这里错过了什么？

**编辑**（一些代码）：

默认.aspx

```
Page.Title = "Title"; 
```

母版页

```
Page.Title += " - More title";
.
.
.
Response.Write("TITLE: " + Page.Title); 
```

我进入`TITLE:`窗口和`- More title`浏览器标题。

**编辑**（一些调试）：

我将以下内容添加到我的 aspx 和母版页中：

```
protected void Page_Init(object sender, EventArgs e)
{
    Response.Write("<!--DEBUG-" + (debug_counter++) + "- TITLE: " + Page.Title + "-->\r\n");
}
protected void Page_PreRenderComplete(object sender, EventArgs e)
{
    Response.Write("<!--DEBUG-" + (debug_counter++) + "- TITLE: " + Page.Title + "-->\r\n");
}
protected void Page_Render(object sender, EventArgs e)
{
    Response.Write("<!--DEBUG-" + (debug_counter++) + "- TITLE: " + Page.Title + "-->\r\n");
}
protected void Page_SaveStateComplete(object sender, EventArgs e)
{
    Response.Write("<!--DEBUG-" + (debug_counter++) + "- TITLE: " + Page.Title + "-->\r\n");
} 
```

`Load`在两者的功能中加上几条相似的线条。他们都出来空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:18:11.140

母版页的[行为类似于页面上的子控件](https://stackoverflow.com/a/10525258/284240)：母版页 Init 事件发生在页面 Init 和 Load 事件之前，而**母版页 Load 事件发生在页面 Init 和 Load 事件之后**。

我最近回答了从 MasterPage 设置页面标题的最佳位置是什么：[https ://stackoverflow.com/a/10525258/284240](https://stackoverflow.com/a/10525258/284240)

> 您甚至可以使用 SaveStateComplete 事件，这应该是您可以更改标题的最新位置：

```
protected void Page_PreRenderComplete(object sender, EventArgs e)
{
    Page.Title = "late title";
} 

protected void Page_SaveStateComplete(object sender, EventArgs e)
{
    Page.Title = "very late title";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:55:24.067

我最终改用了`Page.Header.Title`。有用。

从[这里](http://www.4guysfromrolla.com/articles/051006-1.aspx)我明白他们应该是一样的。显然不是。

# web-crawler - 关于 Google 自定义搜索 API 的适当使用

> ID：12797656
> 
> 赞同：1
> 
> 时间：2012-10-09T10:07:42.893
> 
> 标签：web-crawler, web-search

我正在编写一个商业应用程序，该应用程序将 URL 列表作为输入（在本例中来自 Google 自定义搜索），处理 URL 指向的页面并将处理后的信息与 URL 一起存储。

我只是想知道是否有人知道这是否违反了其 TOS 中的规则，该规则指出：“您不得以任何方式构建、缓存或修改 Google 生成的结果”..

来源：[http ://www.google.com/cse/docs/tos.html](http://www.google.com/cse/docs/tos.html)

我也很想知道是否有人可以推荐任何好的搜索引擎 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:42:56.483

您需要区分 Google 自定义搜索和 Google 自定义搜索 API。

CSE 是您可以嵌入到您的网站的 Google 搜索功能。据我所知，它可能仅由客户端 Web 浏览器使用，并且您不得以任何方式修改/框架/等结果。

可在此处找到自定义搜索 API 的文档：

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

请注意，查询限制为每天 100 个。

如果您在开发者控制台中启用此 API，您将看到此服务的明确 TOS，可能是这些：

[https://developers.google.com/custom-search/terms](https://developers.google.com/custom-search/terms)

[https://developers.google.com/terms/](https://developers.google.com/terms/)

请注意，这些确实包括

> 禁止内容
> 
> 除非内容所有者或适用法律明确允许，否则您同意您不会也不会允许您的最终用户对从 API 返回的内容执行以下操作：
> 
> 抓取、构建数据库或以其他方式创建此类内容的永久副本，或将缓存副本保留的时间超过缓存标头允许的时间；
> 
> 复制、翻译、修改、创建衍生作品、出售、出租、出借、传送、分发、公开展示或再许可给任何第三方；
> 
> 歪曲来源或所有权；或者
> 
> 删除、隐藏或更改任何版权、商标或其他所有权声明，伪造或删除任何作者归属、法律声明或材料来源或来源的其他标签。

您的使用听起来好像属于“构建数据库”类别。

由于您每天只能收到 100 个请求，并且不允许以此构建数据库，因此我认为 API 无法满足您的需求。

# python - python 的 scipy.stats.ranksums 与 R 的 wilcox.test

> ID：12797658
> 
> 赞同：12
> 
> 时间：2012-10-09T10:07:45.330
> 
> 标签：python, r, scipy

python 的 scipy.stats.ranksums 和 R 的 wilcox.test 都应该计算 Wilcoxon 秩和检验的两侧 p 值。但是当我在相同的数据上运行这两个函数时，我得到的 p 值相差几个数量级：

回复：

```
> x=c(57.07168,46.95301,31.86423,38.27486,77.89309,76.78879,33.29809,58.61569,18.26473,62.92256,50.46951,19.14473,22.58552,24.14309)
> y=c(8.319966,2.569211,1.306941,8.450002,1.624244,1.887139,1.376355,2.521150,5.940253,1.458392,3.257468,1.574528,2.338976)
> print(wilcox.test(x, y))

        Wilcoxon rank sum test

data:  x and y 
W = 182, p-value = 9.971e-08
alternative hypothesis: true location shift is not equal to 0 
```

Python：

```
>>> x=[57.07168,46.95301,31.86423,38.27486,77.89309,76.78879,33.29809,58.61569,18.26473,62.92256,50.46951,19.14473,22.58552,24.14309]
>>> y=[8.319966,2.569211,1.306941,8.450002,1.624244,1.887139,1.376355,2.521150,5.940253,1.458392,3.257468,1.574528,2.338976]
>>> scipy.stats.ranksums(x, y)
(4.415880433163923, 1.0059968254463979e-05) 
```

所以 R 给了我 1e-7 而 Python 给了我 1e-5。

这种差异从何而来，哪一个是“正确”的 p 值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-09T11:45:05.907

这取决于选项的选择（精确与正常近似，有或没有连续性校正）：

R的默认值：

> 默认情况下（如果未指定 'exact'），如果样本包含的有限值少于 50 个且不存在平局，则会计算精确的 p 值。否则，使用正态近似。

默认（如上图）：

```
wilcox.test(x, y)

    Wilcoxon rank sum test

data:  x and y 
W = 182, p-value = 9.971e-08
alternative hypothesis: true location shift is not equal to 0 
```

具有连续性校正的正态近似：

```
> wilcox.test(x, y, exact=FALSE, correct=TRUE)

    Wilcoxon rank sum test with continuity correction

data:  x and y 
W = 182, p-value = 1.125e-05
alternative hypothesis: true location shift is not equal to 0 
```

没有连续性校正的正态近似：

```
> (w0 <- wilcox.test(x, y, exact=FALSE, correct=FALSE))

    Wilcoxon rank sum test

data:  x and y 
W = 182, p-value = 1.006e-05
alternative hypothesis: true location shift is not equal to 0 
```

为了更精确：

```
w0$p.value
[1] 1.005997e-05 
```

看起来 Python 给你的另一个值（4.415880433163923）是 Z 分数：

```
2*pnorm(4.415880433163923,lower.tail=FALSE)
[1] 1.005997e-05 
```

我很想知道发生了什么，但我还要指出，`p=1e-7`和`p=1e-5`...之间几乎没有任何实际区别。

# clojure - ^:dynamic 在defonce上有什么用？

> ID：12797662
> 
> 赞同：7
> 
> 时间：2012-10-09T10:07:50.477
> 
> 标签：clojure, environment-variables

查看`clojure.test` [源代码](https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L244)，我发现了以下内容：

```
(defonce ^:dynamic
  ^{:doc "True by default.  If set to false, no test functions will
   be created by deftest, set-test, or with-test.  Use this to omit
   tests when compiling or loading production code."
    :added "1.1"}
  *load-tests* true) 
```

`defonce`阻止重新定义（即使用）标记为 var 的背后有什么好处或理由`^:dynamic`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:42:01.217

`defonce`一般不会阻止重新定义，但仅在重新加载文件时才会阻止。当 var 维护某种状态或上下文时，这通常很有用。我相信`defonce`这里的使用可能是库开发的产物，开发人员需要在开发过程中多次重新加载文件，同时仍希望保留相同的值。

由于 var 不是指向 ref，而是直接 var，因此 using`^:dynamic`是正确的选择。现在代码可以使用`set!`或`binding`以线程本地方式更改值。

# ios6 - 无法在 IOS6 中设置StatusBarOrientaion

> ID：12797663
> 
> 赞同：0
> 
> 时间：2012-10-09T10:08:00.580
> 
> 标签：ios6

当我使用 UINavigationController 时，方向状态不会改变。这是我的代码：

AppDelegate.h 文件

```
#import <UIKit/UIKit.h>
@class MainViewController;
@interface AppDelegate : UIResponder<UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) MainViewController *mainViewController;
@end 
```

AppDelegate.m 文件

```
...

-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDistionary* launchOptions
{
self.window = [[UIWindow alloc]initWithFrame:[[UIScreen mainScreen]bounds]];
self.mainViewController = [[MainViewController alloc]initWithNibName:@"MainViewController" bundle:nil];
UINavigateionController *navigationController = [[UINavigationController alloc]initWithRootViewController:self.mainViewController];
self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible];
return YES;
}
.... 
```

主视图控制器.m

```
...
-(NSUInteger)supportedInterfaceOrientations{
    return  UIInterfaceOrientationMaskLandscapeLeft;
}
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationMaskLandscapeLeft;
}
-(BOOL)shouldAutorotate{
    return YES;
}
-(void) viewDidAppear:(BOOL)animated {

    [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeLeft;
    [self.navigationController setNavigationBarHidden:YES];
}
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:39:08.440

从 iOS 6.0 SDK 发行说明：

> setStatusBarOrientation:animated: 方法并未完全弃用。它现在仅在最顶层全屏视图控制器的 supportedInterfaceOrientations 方法返回 0 时才有效。这使得调用者负责确保状态栏方向一致。

# c - Ascii 十六进制值到 ascii 数字

> ID：12797667
> 
> 赞同：0
> 
> 时间：2012-10-09T10:08:11.657
> 
> 标签：c, hex

> **可能重复：**
> [如何在 C 中按字符将 ASCII 转换为十六进制？](https://stackoverflow.com/questions/2700563/how-would-you-convert-from-ascii-to-hex-by-character-in-c)

我喜欢将用 ascii 代码表示的十六进制值转换为十六进制值表示的数字。

举个例子：

`A5`应转换为`0xA5`（即 165）

但是`A5`代表`ASCII`（所以`0x4135`我猜）

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:11:45.637

使用`strtol`.

```
long x = strtol("A5", 0, 16)
// x is now 165 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:11:52.343

如果你有`strtol`可用的（我相信它在标准库中），它应该像调用`strtol`使用 16 作为基础一样简单。

```
char *end
val = strtol("A5", &end, 16) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:58:11.183

另一种方法是使用 sscanf()：

```
sscanf("A5", "%x", &bar); 
```

# java - 高效的线程方案

> ID：12797670
> 
> 赞同：0
> 
> 时间：2012-10-09T10:08:27.173
> 
> 标签：java, multithreading, interrupt

我正在编写一个通过串行端口执行某些操作的 java GUI。因为我不希望它在等待响应时阻塞，所以我认为有一个线程这样做是一种更好的方法，但现在我面临两个选择，我不知道哪个更有效：

*   案例 1：为每个异步任务创建一个线程。
*   案例 2：保持单个线程休眠并通过更改原子整数的值然后中断它来让它执行不同的任务。

这些操作都不会是处理器密集型的，但我仍然想知道将线程永久保留在内存中是否明智。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:13:38.370

我会使用一个单线程的 ExecutorService 像

```
private final ExecutorService service = Executors.newSingleThreadExecutor();

service.submit(new Runnable() {
   public void run() {
       // task to perform here.
   }
}); 
```

您可能需要不同的线程来读取和写入串行设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:12:55.517

看看[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)，我想这就是你所需要的。

正如 Peter 所建议的，您可以`ExecutorService`使用 [newSingleThreadExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)创建并使用它来处理您的任务。

# lua - 从lua中的表中删除项目

> ID：12797671
> 
> 赞同：0
> 
> 时间：2012-10-09T10:08:27.810
> 
> 标签：lua, lua-table

在从表中删除一个项目时，我真的非常努力，我动态地创建表，并且在表中插入值真的很棒，但是从表中删除值让我真的很麻烦。这是我的脚本：

```
local key = isValueExists ( blowUpArray, spriteNo )
if key ~= nil then
table.remove ( blowUpArray, key )
end

function isValueExists(tbl, item)
    for key, value in pairs(tbl) do
        if value == item then 
            return key 
        end
    end
    return nil
end 
```

这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:06:07.537

这里是最简单的，

```
for k = 1, #blowUpArray do
    if tonumber(blowUpArray[k]) == spriteNo then
        table.remove (blowUpArray, k)
        end
    end 
```

# c++ - 如何使用 usb Lacewing::Client 来接收数据？

> ID：12797673
> 
> 赞同：1
> 
> 时间：2012-10-09T10:08:34.400
> 
> 标签：c++, sockets, liblacewing

```
Lacewing::EventPump pump;
        Lacewing::Client* client = new Lacewing::Client(pump);
        client->Tag = this;
        client->onReceive(onReceiveEx);
        client->onConnect(onConnectEx);

        Lacewing::Address adb("127.0.0.1",12581,Lacewing::Address.HINT_IPv4);
        client->Connect(adb);
        pump.StartEventLoop(); 
```

这个我的代码，客户端成功连接到服务器并且onConnectEx按预期调用，但onReceiveEx没有调用！！！客户没有收到任何东西，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:16:09.043

If ReceiveEx is not called, it means that the server has not sent any data to your client. You should ensure that your server is sending data to clients that connect to it - if not, then you should not expect ReceiveEx to be called and this is normal behavior.

# excel - 自动继续公式

> ID：12797676
> 
> 赞同：2
> 
> 时间：2012-10-09T10:08:58.503
> 
> 标签：excel

我有一个带有 AJ 列的 excel 表。AF 列是手动填充的，而 GJ 列是根据 AF 的值计算的。

当用 AF 列中的数据填充行时，G 列中的单元格会自动填充正确的公式，而我必须手动“拖动”列 HJ 以使它们向下重复行。

有没有办法让 HJ 列表现得像 G 列一样。为什么 G 列表现得像这样？

我打开了“扩展数据范围格式和公式”选项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:44:41.643

不知道为什么您的工作表会按原样运行，但是如果您将数据格式化为数据表，那么它将按您的意愿运行。

# javascript - 如何检测 Javascript 是否在 Opera 的跨域 IFrame 中运行？

> ID：12797677
> 
> 赞同：0
> 
> 时间：2012-10-09T10:08:57.850
> 
> 标签：javascript, iframe, cross-domain, opera

如何检测 JavaScript 是否在 Opera 的跨域 IFrame 中运行？如果我尝试测试`if(typeof iframe.parent.document === 'undefined')`Opera 12 似乎只是给出“未处理的错误：`Security error: attempted to read protected`”，它不能被代码捕获，从而中断执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:18:09.673

你不能。但是，如果您的目标是防止其他域中的人将您的页面嵌入 iframe，则可以发送一个 http 标头来防止这种情况。

[https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

大多数现代浏览器都支持它。它允许您指定允许哪些网站将您的页面嵌入 iframe。

# php - Doctrine2 Native Query：行被移动

> ID：12797678
> 
> 赞同：2
> 
> 时间：2012-10-09T10:09:00.023
> 
> 标签：php, symfony, doctrine, sqlresultsetmapping

我想使用 Doctrine 结果映射，但我得到了一个非常奇怪的结果。

这是我在存储库“结果”中的代码：

```
 $sql = 'SELECT * FROM (
                SELECT
                k.id AS keyword_id,
                k.name,
                r.position,
                r.date,
                r.id
                FROM
                Result r
                INNER JOIN Keyword k ON r.keyword_id = k.id
                WHERE r.domain_id = 2005
                ORDER BY
                date DESC
            ) AS foo
            GROUP BY
            CONCAT(name, DATE_FORMAT(date, \'%Y%m\') )
            ORDER BY
            CONCAT(name, date) ASC;';

    $rsm = new ResultSetMapping;
    $rsm->addEntityResult('XXX\SesBundle\Entity\Result', 'r');
    $rsm->addFieldResult('r', 'id', 'id');
    $rsm->addFieldResult('r', 'position', 'position');
    $rsm->addFieldResult('r', 'date', 'date');
    $rsm->addJoinedEntityResult('XXX\SesBundle\Entity\Keyword', 'k', 'r', 'keyword');
    $rsm->addFieldResult('k', 'keyword_id', 'id');
    $rsm->addFieldResult('k', 'name', 'name');

    $em = $this->getEntityManager();

    $results = $em->createNativeQuery($sql, $rsm)
                ->getResult();

    return $results; 
```

必须有 20 个结果，如果我`count($results)`的结果是 20。

但是如果我 var_dump($result[19]) 我得到这个转储：

```
 [19] =>
  class Example\SesBundle\Entity\Result#1565 (7) {
    private $id =>
    int(498)
    private $url =>
    NULL
    private $position =>
    int(30)
    private $date =>
    class DateTime#1594 (3) {
      public $date =>
      string(19) "2012-10-02 12:04:17"
      public $timezone_type =>
      int(3)
      public $timezone =>
      string(13) "Europe/Berlin"
    }
    private $keyword =>
    NULL
    private $domain =>
    NULL
    private $engine =>
    NULL
  }
} 
```

看，私人`$keyword`是`NULL`。正确的转储应该如下所示：

```
 [16] =>
  class Example\SesBundle\Entity\Result#1623 (7) {
    private $id =>
    int(19)
    private $url =>
    NULL
    private $position =>
    int(2)
    private $date =>
    class DateTime#1619 (3) {
      public $date =>
      string(19) "2012-09-28 17:33:26"
      public $timezone_type =>
      int(3)
      public $timezone =>
      string(13) "Europe/Berlin"
    }
    private $keyword =>
    class Example\SesBundle\Entity\Keyword#1647 (3) {
      private $id =>
      int(2376)
      private $name =>
      string(19) "Example"
      private $domain =>
      class Doctrine\ORM\PersistentCollection#1624 (9) {
        ...
      }
    }
    private $domain =>
    NULL
    private $engine =>
    NULL
  } 
```

还有另一种非常奇怪的行为。结果被“转移”了。应该是的结果`$result[0]`没有出现在`var_dump()`. 如果执行的代码是`$result[0]`应该是的结果`$result[1]`，但是具有应该是的结果的 id `$result[0]`。所以我认为映射不太正确。

如果我在 Navicat 中执行 SQL 语句，一切都是正确的。

对不起我的英语不好，我希望你明白我的意思:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:12:21.533

这是解决方案：

使用时，`addJoinedEntityResult`您必须按照与在 sql 语句中选择列的顺序相同的顺序进行映射。

欲了解更多信息，请查看： http: [//www.doctrine-project.org/jira/browse/ddc-1362](http://www.doctrine-project.org/jira/browse/ddc-1362)

我不知道为什么教义团队关闭了票。

感谢@luka8088 提供此解决方案。

# asp.net-mvc - 无法在我的 asp.net mvc 4 应用程序中调用 Json Web 服务

> ID：12797689
> 
> 赞同：0
> 
> 时间：2012-10-09T10:09:43.717
> 
> 标签：asp.net-mvc, json

我想在此链接[http://dev.joget.org/community/display/KB/JSON+API#JSONAPI-web%2Fjson%2Fworkflow%2Fprocess%2Flist上将以下 Web 服务称为 mentioend](http://dev.joget.org/community/display/KB/JSON+API#JSONAPI-web%2Fjson%2Fworkflow%2Fprocess%2Flist)

所以在我的 asp.net mvc 视图中，我写了以下内容：-

```
<script type="text/javascript">
            $(document).ready(function () {
                // Send an AJAX request
                $.getJSON("http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=admin",
                function (data) {
                    // On success, 'data' contains a list of products.
                    $.each(data, function (key, val) {

                        // Format the text to display.
                        var str = val.id + ': $' + val.packageName;

                        // Add a list item for the product.
                        $('<li/>', { text: str })
                        .appendTo($('#products'));
                    });
                });
            });
</script>
<h1>The Processes are</h1>
<ul id="products"/> 
```

但是当我运行上面的网页时，不会在下面显示任何进程`<h1>The Processes are </h1>`，而如果我输入以下内容`http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=admin&nbsp`；直接在我浏览器的地址栏上，然后将显示所有进程。那么可能出了什么问题？

BR

**-::::UPDATED::::-** 我已经更新了我的 JAVASCRIPT 如下：-

```
$(document).ready(function(){

           $.ajax({
               type: "GET",
               url: "http://localhost:8080/jw/web/json/workflow/package/list?loginAs=admin",

               dataType: "JSONP",
               contentType: "application/json; charset=utf-8",
               success: function (data) {
                   $.each(data, function (key, val) {

                       // Format the text to display.
                       var str = val.packageId + ': $ ' + val.packageName;

                       // Add a list item for the product.
                       $('<li/>', { text: str })
                       .appendTo($('#products'));

                   });
               }});
           }); 
```

但 Web 服务调用的结果返回为

```
undefined: $ undefined 
```

而不是像这样的东西：-

```
{"activityId":"","processId":"289_process1"} 
```

那么阻止我的代码显示正确数据的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:42:42.807

尝试按照文档中的说明将 JSONP`callback`参数指定为`callback=?`查询字符串的末尾：

```
var url = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=admin&callback=?';
$.getJSON(url, function (data) {
    // On success, 'data' contains a list of products.
    $.each(data, function (key, val) {
        // Format the text to display.
        var str = val.id + ': $' + val.packageName;
        // Add a list item for the product.
        $('<li/>', { text: str }).appendTo('#products');
    });
}); 
```

* * *

更新：

在显示您的 JSON（最后）后，产品列表包含在一个`data`属性中，因此您需要调整您的`$.each`并在此属性上操作，而不是直接在结果上操作：

```
{
    "data": [
        {
            "packageName": "CRM",
            "packageI‌​d": "crm"
        },
        {
            "packageName": "EngineersAssociation",
            "packageId": "EngineersAssociation"
        },
        {
            "packageName": "LeaveApp",
            "packageId": "leaveApp"
        },
        {
            "packageName": "Newtest",
            "packageId": "Newtest"
        },
        {
            "p‌​ackageName": "TestApp",
            "packageId": "testapp"
        },
        {
            "packageName": "test54",
            "packageId": "test5"
        }
    ]
} 
```

所以调整你的代码：

```
var url = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=admin&callback=?';
$.getJSON(url, function (result) {
    // On success, 'result.data' contains a list of products.
    $.each(result.data, function (key, val) {
        // Format the text to display.
        var str = val.id + ': $' + val.packageName;
        // Add a list item for the product.
        $('<li/>', { text: str }).appendTo('#products');
    });
}); 
```

# javascript - 灵活滚动

> ID：12797690
> 
> 赞同：-2
> 
> 时间：2012-10-09T10:09:47.367
> 
> 标签：javascript, jquery, html, css

如何在窗口最小化时将滚动条添加到 div 并在最大化时删除我尝试使用此脚本但它不起作用

```
 <script type="text/javascript">
          $(document).ready(function () {
               var bodywidth = $(document).width();
               $("#tabMain").width(bodywidth);
           });
    </script> 
```

这是我的div：

```
 <div class="tabsMainCont" id="tabMain">
          <ul class="tabsMenu">
          <li><a href="#" id="Profile">Profile</a></li>
          <li><a href="#" id="Clinics">My Clinics</a></li>
          <li><a href="#" id="Assistants">My Assistants</a></li>
          <li><a href="#" id="Mangment">Mangment</a></li>
          </ul>
          <div class="tabsContent">
          <p>test</p>
          </div>
      </div> 
```

这是我到目前为止所做的CSS：

```
.tabsMainCont 
{
    margin: 0 auto;
    padding-top: 19px;
    width: 1257px;
}

.tabsMenu
{
    float:left;
   overflow: hidden; margin: 0 0 0 0; background: #ffffff; /* Old browsers */
background: -moz-linear-gradient(top,  #ffffff 0%, #f3f3f3 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#f3f3f3)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 0%,#f3f3f3 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 0%,#f3f3f3 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 0%,#f3f3f3 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 0%,#f3f3f3 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f3f3f3',GradientType=0 ); /* IE6-9 */
   border-bottom: 1px solid #D1D1D1;
   width:100%;
       -webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
height:43px;
}

.tabsMenu li
{
    float:left;
    list-style-type:none;
    border-right: 1px solid #DEDEDE;
    height:43px;
width:340px;
}

.tabsMenu li a
{
padding:11px 26px 26px 118px;  
display:block;
color:Black;
}

.tabsMenu li a:hover
{
    text-decoration:none;
    background: #ffffff; /* Old browsers */
background: -moz-linear-gradient(top,  #ffffff 0%, #eaeaea 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#eaeaea)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 0%,#eaeaea 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 0%,#eaeaea 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 0%,#eaeaea 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 0%,#eaeaea 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eaeaea',GradientType=0 ); /* IE6-9 */
color:Black;
}

.tabsMenu li a:focus
{
background: rgb(244,244,244); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(244,244,244,1) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(244,244,244,1)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(244,244,244,1) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(244,244,244,1) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(244,244,244,1) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(244,244,244,1) 0%,rgba(255,255,255,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
}

.tabsMainCont .tabsContent
{
background-color:White;
border-radius:4px;
overflow:auto; 
float:left;
width:100%;   
} 
```

tabsContent div 是我希望它滚动的那个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:58:45.043

如果您希望在浏览器提供的内容之外使用水平和垂直滚动，那么您需要设置要滚动的元素的宽度和高度（在这种情况下`.tabsContent`），这可以基于 px 或 %。鉴于您已经设置`.tabsMenu`为隐藏溢出，那么如果您只添加：

```
float: left;
overflow: auto; 
```

到`.tabsMainCont`元素，然后只有当`.tabsContent`元素中有其他内容时才会水平滚动。

编辑：我预见到的唯一问题是垂直滚动条将位于最右边的边缘，`.tabsMainCont`这会导致您出现可用性问题，在这种情况下，我强烈建议仅在元素上使用 overflow-x 并使用浏览器垂直滚动，所以更新的 CSS 将是：

```
.tabsMainCont 
{
    margin: 0 auto;
    padding-top: 19px;
    width: 1257px;
    float:left;
    overflow-x: auto;
} 
```

# oop - 这种代码气味有一个通用名称吗？

> ID：12797693
> 
> 赞同：1
> 
> 时间：2012-10-09T10:10:06.140
> 
> 标签：oop, dependencies, anti-patterns

我称它为“送货员”。我已经看到了它的几个变体，但问题是一个类具有依赖项，其唯一目的是将它传递给协作者并且从不使用依赖项本身。

（我使用 PHP 是因为它是我最熟悉的，但它与语言无关）

```
class Dependency{}

class B {
    public function setDependency(Dependency $dependency) {
        //...
    }
}

class A {
    private $b;
    private $dependency;

    public function __construct(Dependency $dependency, B $b) {
        $this->dependency = $dependency;
        $this->b = $b;
    }

    public function foo() {
        $this->b->setDependency($this->dependency);
    }
} 
```

可能我在野外看到的最常见的变体是为此目的滥用继承，在父类中拥有一个存在的属性，以便子类可以访问依赖项，即使父类从未实际使用依赖项本身。

```
class Dependency{}

class A {
    protected $dependency;

    public function __construct(Dependency $dependency) {
        $this->dependency = $dependency;
    }
}

class B extends A {
    public function foo() {
        $this->dependency->bar();
    }
} 
```

我在代码中看到的比我想要的要多得多，这让我很不高兴！我只是想知道是否有一个名称，以便我可以将人们链接到阅读材料，了解为什么这是一个坏主意。就目前而言，我不知道要搜索什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:44:43.437

我不知道任何名字，但我有点喜欢送货员......虽然我想有些人可能会认为这个名字边缘冒犯。

通常，这个问题可以通过依赖注入或服务定位器来解决，尽管太多人为此使用单例（不恰当地）。

我对 PHP 不够熟悉，不知道 PHP 是否提供了真正的 DI 解决方案（与穷人的 DI 相比），但我认为如果没有，服务定位器是可以接受的（即使服务定位器通常是代码气味在自身）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T04:39:59.883

第二个片段中与继承相关的问题在我看来就像“Broken Hierarchy”。当基类和它的派生类不共享 IS-A 关系时，就会出现这种气味。很常见的代码使用继承只是为了方便（为了重用），而不是因为参与的类相关（通过 IS-A 关系）的层次结构是有意义的。

[（我从《重构软件设计气味](http://bit.ly/DesignSmells)》一书中借用了气味术语（即 Broken Hierarchy） ）

# c# - 如何在不知道何时完成的情况下显示进程的进展

> ID：12797698
> 
> 赞同：1
> 
> 时间：2012-10-09T10:10:34.360
> 
> 标签：c#, wpf, wpf-controls

当我有一个我知道何时完成的过程时，我会使用进度条。但是我可以用什么来表明一个过程正在进行中，但我不知道它什么时候会完成？

WPF中对此有什么特殊控制吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T10:17:58.300

为什么不使用`IsIndeterminate`设置为的 ProgressBar `true`？

![在此处输入图像描述](../Images/08d5c47974c62e7be356af0f1d34e267.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T10:12:47.930

我建议您使用[BusyIndi​​cator](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator)来显示应用程序正在进行中。

# jquery - JQuery：检测输入字段的变化

> ID：12797700
> 
> 赞同：261
> 
> 时间：2012-10-09T10:10:45.793
> 
> 标签：jquery, keypress

我想检测用户的键盘操作何时改变文本字段的值。它应该在现代浏览器中始终如一地工作。

.keypress 事件的 JQuery 页面说它不一致？此外，它不适用于退格、删除等。

我不能使用 .keydown ，因为它会对 shift、alt 和箭头键等作出反应。此外，当用户按住一个键并插入多个字符时，它不会多次触发。

有没有我想念的简洁方法？或者我应该使用 .keydown 并过滤掉由箭头键、shift 等触发的事件？我主要担心的是会有一些我不知道应该被过滤的键。（我几乎忘记了 alt 和 ctrl，我想可能还有其他人）但是我将如何检测被按住并插入多个字符的键？

作为奖励，它会检测到由于粘贴（包括右键单击）而导致的更改，但我从[这里](https://stackoverflow.com/questions/1601353/detect-paste-on-input-box "这里")有解决方案。

* * *

## 回答 #1

> 赞同：805
> 
> 时间：2012-10-09T10:21:07.083

您可以将“输入”事件绑定到文本框。**每次**输入更改时都会触发，因此当您粘贴某些内容（即使右键单击）时，删除并键入任何内容。

```
$('#myTextbox').on('input', function() {
    // do something
}); 
```

如果您使用`change`处理程序，这只会在用户取消选择输入框后触发，这可能不是您想要的。

这里有一个例子：http: [//jsfiddle.net/6bSX6/](http://jsfiddle.net/6bSX6/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-09T10:13:57.917

使用 jquery[更改事件](http://api.jquery.com/change/)

> 描述：将事件处理程序绑定到“更改”JavaScript 事件，或在元素上触发该事件。

一个例子

```
$("input[type='text']").change( function() {
  // your code
}); 
```

, ,`.change`的优点是事件只会*在输入改变时触发*`.keypress``.focus``.blur``.change`

 ** * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-09T10:27:57.433

我最近使用以下功能实现了相同的功能。

我想在编辑时启用保存按钮。

1.  不建议更改事件，因为只有在编辑后，在单击“保存”按钮之前单击页面上的其他位置时才会触发更改事件。
2.  Key Press 不处理 Backspace、Delete 和 Paste 选项。
3.  Key Up 处理所有内容，包括制表符、Shift 键。

因此，我在下面编写了结合按键、keyup（用于退格、删除）和文本字段粘贴事件的函数。

希望它可以帮助你。

```
function checkAnyFormFieldEdited() {
    /*
     * If any field is edited,then only it will enable Save button
     */
    $(':text').keypress(function(e) { // text written
        enableSaveBtn();
    });

    $(':text').keyup(function(e) {
        if (e.keyCode == 8 || e.keyCode == 46) { //backspace and delete key
            enableSaveBtn();
        } else { // rest ignore
            e.preventDefault();
        }
    });
    $(':text').bind('paste', function(e) { // text pasted
        enableSaveBtn();
    });

    $('select').change(function(e) { // select element changed
        enableSaveBtn();
    });

    $(':radio').change(function(e) { // radio changed
        enableSaveBtn();
    });

    $(':password').keypress(function(e) { // password written
        enableSaveBtn();
    });
    $(':password').bind('paste', function(e) { // password pasted
        enableSaveBtn();
    });

} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-09T10:18:13.460

用于`$.on()`将您选择的事件绑定到输入，不要使用诸如`$.keydown()`etc 之类的快捷方式，因为从 jQuery 1.7`$.on()`开始是附加事件处理程序的首选方法（请参见此处： http: [//api.jquery.com/on/](http://api.jquery.com/on/)和[http: //api.jquery.com/bind/](http://api.jquery.com/bind/) )。

`$.keydown()`只是一个快捷方式`$.bind('keydown')`，并且`$.bind()`是`$.on()`替换（以及其他）。

据我所知，要回答您的问题，除非您需要`keydown`专门触发一个事件，否则该`change`事件应该为您解决问题。

```
$('element').on('change', function(){
    console.log('change');
}); 
```

为了回复以下评论，`change`此处记录了 javascript 事件：[https ://developer.mozilla.org/en-US/docs/Web/Events/change](https://developer.mozilla.org/en-US/docs/Web/Events/change)

这是`change`使用 jQuery 处理输入元素的事件的工作示例：http: [//jsfiddle.net/p1m4xh08/](http://jsfiddle.net/p1m4xh08/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-09T10:14:32.200

您可以使用 jQuery change() 函数

```
$('input').change(function(){
  //your codes
}); 
```

API 页面上有关于如何使用它的示例：http: [//api.jquery.com/change/](http://api.jquery.com/change/)*

# python - 如何应对面料中可能出现的提示？

> ID：12797704
> 
> 赞同：1
> 
> 时间：2012-10-09T10:10:58.390
> 
> 标签：python, fabric

当我登录到我们的一台服务器时，系统会提示我：

```
Please select the system to work with:
   1: system1 (user u1)
   2: system2 (user u1)
   3: system3 (user u2)

Enter your choice (1-3) [1]: 
```

我需要在执行任何命令**之前输入“1”，****就在 login 之后**。我可以通过 Fabric 自动响应此类提示吗？其他盒子可能会在没有提示的情况下登录，所以这只是可能的情况之一。需要这样的东西：

```
if prompt("Enter your choice (1-3) [1]:"):
  response("1")
run(command) 
```

如何才能做到这一点？我阅读[了与远程程序的交互](http://docs.fabfile.org/en/latest/usage/interactivity.html)，但没有找到任何有用的示例。如果可能的话，我宁愿只使用织物，而不是涉及其他模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:29:11.410

看来，没办法。

可能的解决方案如下：

1.  一些命令行工具支持禁止提示放置默认值的标志（如果您需要的话）。
2.  您可以使用在[本主题](https://stackoverflow.com/questions/4857702/how-to-provide-password-to-a-command-that-prompts-for-one-in-bash)中作为可能解决方案提出的[*autoexpect*工具](http://www.linuxjournal.com/article/3065)。

# c++ - 4 个字节的十六进制日期时间转换为可读

> ID：12797707
> 
> 赞同：2
> 
> 时间：2012-10-09T10:11:14.480
> 
> 标签：c++, datetime, hex

我收到了来自服务器的响应，该响应已被压缩并将其转换为 base64 字符串。我已经解码了这个响应，发现它看起来像一个肥皂文档。大多数值都是十六进制格式。所以我有一个参数 datetime 存储值“\xf4\xdd|\xad\x08”。我知道它代表 24.06.1982 日期。

如何将十六进制值转换为日期格式？更喜欢 c/c++ 语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:26:16.933

要将编码后的数字转换为整数，您需要确定它是大端还是小端。

由于您拥有的数据不是字符串，即数字不是文本而是直接二进制，因此您不能明智地使用`sscanf()`它是一个字符串解析函数。

相反，是这样的：

```
const char *buffer = "\xf4\xdd|\xad\x08";
unsigned int stamp = (((unsigned char) buffer[0]) << 24) |
                     (((unsigned char) buffer[1]) << 16) |
                     (((unsigned char) buffer[3]) << 8) |
                     ((unsigned char) buffer[4]); 
```

如果它是 little-endian，则反转索引顺序（这样`buffer[0]`就变成了`buffer[4]`，依此类推）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T10:18:20.387

将该十六进制格式转换为数字，您可以使用 scanf()

```
int a,b,c,d;
sscanf(input,"\\x%x\\x%x|\\x%x\\x%x",&a,&b,&c,&d);
long result=a<<24 | b<<16 | c<<8 | d; 
```

这将为您提供 4108168456 的价值，您提供。

你有什么关于格式的进一步信息？

```
int a,b,c,d;
sscanf(input,"\\x%x\\x%x|\\x%x\\x%x",&a,&b,&c,&d);
long field1=a<<8 | b;
long field2=c<<8 | d; 
```

# prolog - gnu Prolog 上的 EndView 游戏

> ID：12797708
> 
> 赞同：-4
> 
> 时间：2012-10-09T10:11:18.467
> 
> 标签：prolog, gnu, clpfd

一般问题：我们有 8*8 的地图，我们必须用 1 到 6 的数字填充空方格。但是在每一列中，原始数字只能满足 1 次。每行和每列中的两个方格都留空。两边的数字，上下显示我们应该出现的第一个数字（但它可以出现在两个空方块之后）。

所以，现在我有了这个代码，它最终适用于 4*4 地图的 swi-prolog。

```
:- module(ab, [ab/0]).
:- [library(clpfd)].

gen_row(Ls):-length(Ls, 4), Ls ins 0..3.

transpose(Ms, Ts) :-
    %must_be(list(list), Ms),
    (   Ms = [] -> Ts = []
    ;   Ms = [F|_],
        transpose(F, Ms, Ts)
    ).

transpose([], _, []).
transpose([_|Rs], Ms, [Ts|Tss]) :-
    lists_firsts_rests(Ms, Ts, Ms1),
    transpose(Rs, Ms1, Tss).

lists_firsts_rests([], [], []).
lists_firsts_rests([[F|Os]|Rest], [F|Fs], [Os|Oss]) :-
    lists_firsts_rests(Rest, Fs, Oss).

ab :-
Rows = [R1,R2,R3,R4],
maplist(gen_row, Rows),
transpose(Rows, [C1,C2,C3,C4]),

maplist(all_distinct, [R1,R2,R3,R4]),
maplist(all_distinct, [C1,C2,C3,C4]),

start(R2, 3),
start(R3, 3),
finish(R3, 2),

start(C3, 1),
finish(C2, 2),

maplist(writeln, [R1,R2,R3,R4]).

finish(X, V) :-
reverse(X, Y),
start(Y, V).

start([0,Y|_], Y).
start([Y|_], Y). 
```

但是，它不支持更大面积的 2 个空白位置的问题，例如 8*8 拼图。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:19:55.653

您必须从[另一个问题](https://stackoverflow.com/q/12789732/874024)中获取 transpose/2，并将 all_distinct/1 替换为 fd_all_distinct/2。

另外，获取 writeln 并在此处替换 write`maplist(write, [R1,R2,R3,R4]).`

**编辑**一个简单的解决方案是扩展有限域的“编码”，将两位数保留**为**空白，而不仅仅是 0，并扩展在发布到[另一个问题](https://stackoverflow.com/q/12789732/874024)的答案中已经看到的逻辑。

为了类比，我将调用third_end_view，并且将是（在**Gnu** Prolog中）

```
/*  File:    third_end_view_puzzle.pl
    Author:  Carlo,,,
    Created: Oct  10 2012
    Purpose: help to solve extended Second End View puzzle
             https://stackoverflow.com/q/12797708/874024
*/

:- include(transpose) .

third_end_view_puzzle :-

    length(Rows, 8),
    maplist(gen_row(8), Rows),
    transpose(Rows, Cols),

    maplist(fd_all_different, Rows),
    maplist(fd_all_different, Cols),

    Rows = [R1,R2,R3,R4,R5,R6,R7,R8],
    Cols = [C1,C2,C3,C4,C5,C6,C7,C8],

    start(R1, 4),
    start(R2, 2),
    start(R3, 3),
    start(R4, 5),
    start(R5, 3),
    finish(R1, 6),
    finish(R2, 4),
    finish(R3, 2),
    finish(R5, 1),
    finish(R7, 2),

    start(C2, 3),
    start(C3, 4),
    start(C4, 3),
    start(C5, 5),
%   start(C6, 4),
    start(C7, 1),
%   finish(C1, 3),
%   finish(C2, 2),
    finish(C3, 5),
    finish(C4, 5),
    finish(C5, 6),
    finish(C6, 1),
    finish(C7, 4),

    maplist(fd_labeling, Rows),
    nl,
    maplist(out_row, Rows).

gen_row(N, Ls) :-
    length(Ls, N),
    fd_domain(Ls, 1, N).

out_row([]) :- nl.
out_row([H|T]) :-
    (H >= 7 -> write('-') ; write(H)),
    write(' '),
    out_row(T).

% constraint: Num is max third in that direction
start(Vars, Num) :-
    Vars = [A,B,C|_],
    A #= Num #\/ (A #>= 7 #/\ B #= Num) #\/ (A #>= 7 #/\ B #>= 7 #/\ C #= Num).

finish(Var, Num) :-
    reverse(Var, Rev), start(Rev, Num). 
```

我使用了一个更简单的条件，没有具体化，来陈述“从方向看的第三个观点”。

如前所述，您会看到一些约束（那些被注释掉的）使这个谜题无法解决。

测试：

```
| ?- third_end_view_puzzle.  

4 3 - - 5 2 1 6 
2 1 - 3 - 5 6 4 
3 5 4 1 - 6 2 - 
5 4 6 2 1 3 - - 
- - 3 6 2 4 5 1 
1 6 2 4 3 - - 5 
6 - 1 5 4 - 3 2 
- 2 5 - 6 1 4 3 

true ? 
```

# asp.net-mvc-3 - 在 mvc 中使用表单身份验证检查用户名和密码？

> ID：12797710
> 
> 赞同：0
> 
> 时间：2012-10-09T10:11:21.393
> 
> 标签：asp.net-mvc-3, forms-authentication

我正在尝试编写一种在 Web 应用程序中对用户进行身份验证的方法。这是代码：

```
public void SignIn(UserInfo Entity)
    {
        if(this.CheckUser(Entity.UserName, Entity.Password))

        {
            FormsAuthentication.RedirectFromLoginPage(Entity.UserName, false);
        }
        else
        {

        }
    }

    public bool CheckUser(String _UserName, string _Password)
    {
        using (var context = new TourBlogEntities1())
        {
            List<UserInfo> test = null;
            test = (from s in context.UserInfoes
                       where s.UserName == _UserName && s.Password == _Password
                       select s).ToList<UserInfo>();

            if(test==null)
            {
                return false;
            }
            else
            {
                return true;
            }

        }

    } 
```

问题是我可以使用任何未注册的用户名和密码登录。我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:18:50.273

您的列表永远不会为空。您需要检查您的列表是否包含一个元素。

我建议你使用`Any()`or`Count()`方法。

> **Any()** - 确定序列是否包含任何元素。
> 
> **Count()** - 返回一个数字，表示指定序列中有多少元素满足条件。

## 样本

### 任何（）

```
return (from s in context.UserInfoes
       where s.UserName == _UserName && s.Password == _Password
       select s).Any(); 
```

### 数数（）

```
return (from s in context.UserInfoes
       where s.UserName == _UserName && s.Password == _Password
       select s).Count() != 0; 
```

## 更多信息

*   [MSDN - Enumerable.Any](http://msdn.microsoft.com/en-us/library/bb337697.aspx)
*   [MSDN - Enumerable.Count](http://msdn.microsoft.com/en-us/library/bb535181.aspx)

# mysql - 为什么记录计数值之间存在差异

> ID：12797722
> 
> 赞同：0
> 
> 时间：2012-10-09T10:11:54.093
> 
> 标签：mysql

实际上我的目的是找出我的数据库中存在的记录数，以便找出我已经执行了查询，例如**select sum(table_rows) from information_schema.tables where table_schema='database_name';** 它给了我一些价值，比如 90658965

之后，我需要单个表中存在的记录数，因此我执行了以下查询**select table_rows,table_name from information_schema.tables where table_schema='database_name';** 我得到了像**3781** (table_rows) 和 ticket(table_name)这样的结果

因此，为了交叉验证，我执行了 **select count(*) from tickets 之类的查询；** 我得到了像**3552这样的结果**

为什么上述两个查询的表计数存在差异**门票**
表 的存储引擎是innodb

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:18:31.410

如[表中`INFORMATION_SCHEMA TABLES`所述](http://dev.mysql.com/doc/en/tables-table.html)：

> 对于[`InnoDB`](http://dev.mysql.com/doc/en/innodb-storage-engine.html)表，行数只是 SQL 优化中使用的粗略估计。[`InnoDB`](http://dev.mysql.com/doc/en/innodb-storage-engine.html)（如果表是分区的，这也是正确的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:30:44.000

```
SELECT COUNT(*) FROM TABLENAME 
```

本次查询为资源激励操作。

总回报 `information_schema.tables` 将是正确的**

# sql - 使用 SUM 返回的数据不正确

> ID：12797726
> 
> 赞同：1
> 
> 时间：2012-10-09T10:12:02.873
> 
> 标签：sql, sql-server

我以前使用过这里的答案来回答我的问题，但我找不到这个问题的答案。

我正在编写一个查询，该查询需要提取驱动程序的滴数。相当直截了当，但是我需要将它们加在一起才能得出总数，但是当我使用 SUM 功能时，它不会返回正确的信息。

在表 Journey Header 是一个包含 Number of Drops 的列，我需要将它们相加得出一个总数，它确实如此，但我需要我的查询来显示 Driver、Vehicle、Total number of Drops 和一个订单值，但我不希望每个单独的记录，我希望它们全部组合在一起，如果这有意义的话......

下面是我正在使用的脚本和下面的部分结果 - 例如，我希望司机 Chris Akwuba 显示一行，其中包含他完成的滴水总量以及订单价值（订单价值有效）

谢谢你，我希望你能理解我的胡言乱语......

```
select
sum(JH.NoofDrops) as [Number of Drops],
Jh.JourneyID,
JH.DriverName as [Driver],
VT.Name as [Vehicle Class],
SUM (OH.TotalSellPrice) as [Order Value]
from JourneyHeader JH with (NOLOCK)
LEFT JOIN VehicleType VT with (NOLOCK) on VT.VehicleTypeID=JH.VehicleTypeID
LEFT JOIN JourneyLine JL with (NOLOCK) on JL.JourneyID=JH.JourneyID
LEFT JOIN Orderheader OH with (NOLOCK) on OH.OrderID=JL.OrderID
where 
JourneyDate between '2012-06-01 00:00:00' and '2012-07-20 00:00:00'
Group by JH.DriverName, VT.Name, Jh.NoOfDrops, JH.JourneyID

Number of Drops JourneyID     Driver         Vehicle Class  Order Value
25          14520             Chris Akwuba       Transit            2533.32
1           14521             Kevin O'Sullivan   Hiab (Class2)  214.15
16          14522             Kevin O'Sullivan   Hiab (Class2)  1672.29
9           14523             Chris Akwuba       Transit            1136.69
16          14525             James O'Brien      7.5 tonne          633.18
9           14526             Errol Gray         Transit            768.17
25          14527             John Hardy         Transit            969.80 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:19:11.687

通过例如从`Jh.NoOfDrops, JH.JourneyID`组中删除`JourneyID``select`

```
Group by JH.DriverName, VT.Name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:17:49.030

即使*您*编写了正确的 SQL，您的结果也总是不正确的。由于您添加了`with (NOLOCK)`提示，因此您要求执行脏读，您将获得不一致的数据。[如果使用 NOLOCK 提示，](http://blogs.msdn.com/b/sqlcat/archive/2007/02/01/previously-committed-rows-might-be-missed-if-nolock-hint-is-used.aspx)请参阅先前提交的行可能会丢失。

现在，如果你愿意放弃“给我错误结果”的提示，那么你就有机会了。但为了实现这一点，您的要求不能自相矛盾。当您说`I want the driver Chris Akwuba to show one line`您显然不能要求`JourneyID`列时。您必须下定决心，要么每个司机一排，**要么**每个旅程一排。不是都。一旦你解决了其中一个问题，请重新提出问题。

# javascript - 用 JSON 数据填充多个选择框

> ID：12797727
> 
> 赞同：1
> 
> 时间：2012-10-09T10:12:09.643
> 
> 标签：javascript, jquery, json

我有以下数据库表（虽然数据库中有更多数据，但这还不是全部！）：

```
catid   value   description
0        350     350 euro
0        500     500 euro
0        650     650 euro
1        0       No
1        1       Yes 
```

在 PHP 和 json_encode() 的帮助下，我正在创建该表的 JSON 字符串：

```
jQuery171024539993586950004_1349776890005([{"0":"0","catid":"0","1":"350","value":"350","2":"350 euro","description":"350 euro"},{"0":"0","catid":"0","1":"500","value":"500","2":"500 euro","description":"500 euro"},{"0":"0","catid":"0","1":"650","value":"650","2":"650 euro","description":"650 euro"},{"0":"1","catid":"1","1":"0","value":"0","2":"No","description":"No"},{"0":"1","catid":"1","1":"1","value":"1","2":"Yes","description":"Yes"}]) 
```

现在我想要的是使用 JSON 来填充选择框，就像在 HTML 中一样：

```
<select id="0">
    <option value="350">350 euro</option>
    <option value="500">500 euro</option>
    <option value="650">650 euro</option>
</select>

<select id="1">
    <option value="0">No</option>
    <option value="1">Yes</option>
</select> 
```

谁能帮我这个？我知道如何做一个循环来填充一个表（使用 $.getJSON），但我有点坚持这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:14:41.470

此函数将遍历您发布的对象并填充菜单（给定您发布的来源）：

```
var populateSelects = function(data) {
    var cat0 = $('select#0'),
        cat1 = $('select#1'),
        opt = $('<option />'),
        newOpt = {},
        cat0opts = [],
        cat1opts = [];
    $.each(data, function(i, obj) {
        //clone the option element so as to not re-create a new one
        newOpt = opt.clone();
        //obj is the JavaScript object in the array, so
        //dot-notation works nicely
        newOpt.text(obj.description).val(obj.value);
        if (obj.catid === "0") {
            //push the DOM element, not the jQuery object
            cat0opts.push(newOpt[0]);
        } else if (obj.catid === "1") {
            cat1opts.push(newOpt[0]);
        }
    });
    //Add the array of DOM elements to their respective menus,
    //clearing out any existing menu items.
    cat0.empty().append(cat0opts);
    cat1.empty().append(cat1opts);
}; 
```

这是它的实际操作：http: [//jsfiddle.net/a5MTE/1/](http://jsfiddle.net/a5MTE/1/)

一个重要的注意事项是`catid`比较......如果解析的 JSON 返回`catid`为数字（不是字符串），您需要将比较更改为`if (obj.catid === 0)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:23:25.570

通过 json 解析，您应该必须制作一个解析器，并且通过 addcat 上的 if 和 else 条件，您将能够做到

# php - Facebook 帖子图片未显示

> ID：12797735
> 
> 赞同：1
> 
> 时间：2012-10-09T10:12:43.560
> 
> 标签：php, facebook, facebook-graph-api

我想使用 facebook graph api 在朋友墙上发布一个墙贴。一切正常，但图像正在显示。这是我的代码。

```
 $attachment = array(
            'message' => $d['giftmsg'],
            'name' => 'You have received a gift voucher for ' . $dd['title'] . '!' . '',
            'link' => $plink,
            'description' => " Login to the Tippll facebook app to claim you gift card.   Your friends can click on the like above to top up this gift even further!",
            'picture' => $img_url,
            'actions' => array('name' => 'Top-Up This Gift', 'link' => $plink)
        );

  $post = $facebook->api('/' . $_POST['friend_id'] . '/feed', 'POST', $attachment); 
```

这里 $img_url 包含有效的 url，当我将此 url 输入到浏览器地址栏时，它会显示图像。但是 facebook 并没有将它提取到我的帖子中。我尝试了来自其他服务器的图像，它可以工作在其他服务器上但不在我的服务器上的图像。我正在使用 htaccess 将 www 重定向到非 www。请建议我解决方案。提前感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:15:19.813

可能有2个可能的原因：

1.  facebook 无法访问您的图像，因为 facebook 首先获取您的图像并将其存储在他们的云中。
2.  您的主机被 Facebook 禁止，不再接受来自您 URL 的图像

# google-maps - 带有 SVG 路径的 Marker 中的锚点搞砸了图像

> ID：12797736
> 
> 赞同：0
> 
> 时间：2012-10-09T10:12:43.963
> 
> 标签：google-maps, google-maps-api-3

我对以下代码有疑问。
正如你所看到的，它在水上画了一个“T”，这很好，正是我在这个例子中想要的。
现在的问题是我想设置锚点。
如果您在标记中的锚线中添加注释，您会看到 T 完全搞砸了。而不是只是移动一点，以便 T 的脚是锚。
这是一个错误，那么我希望它得到修复。
除了重新计算所有路径坐标（如果可行的话）之外，是否有一种解决方法如何让它正常工作？

```
<!DOCTYPE html>
<html>
  <head>
    <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(40, -150),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        new google.maps.Marker({
          icon: {
              //anchor: new google.maps.Point(8.1328125, 17),
              path: 'm 7.1855469,17 0,-12.6269531 -4.7167969,0 0,-1.6894531 11.347656,0 0,1.6894531 -4.7363279,0 0,12.6269531 z'
          },
          position: new google.maps.LatLng(40, -150),
          map: map
        });
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:16:18.647

问题是您正在使用将笔移动到*相*对于当前笔位置`m`的指定点 x,y的命令。当您更改锚点时，您不会均匀地偏移所有点，而是使用锚点扭曲它们，从而影响它们彼此之间的关系。（我不确定我是否在解释这一点）。M & L 使用 xy 点，m 和 l 使用*相对*xy 点。

 **在这里，我用 LineTo (L) 替换了您隐含的 MoveTo (m) 语句。（我还移动了您的起点，使其实际上指向某个东西，因此您可以看到更改锚点如何均匀地移动路径。还有一个基本标记供参考）。

```
<!DOCTYPE html>
<html>

<head>
  <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css"
    rel="stylesheet">
  <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
  <script>
    function initialize() {
      var mapOptions = {
        zoom: 21,
        center: new google.maps.LatLng(40, -83),
        mapTypeId: google.maps.MapTypeId.SATELLITE
      };

      var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

      new google.maps.Marker({
        icon: {
          anchor: new google.maps.Point(6, 15),
          path: 'm 0,0 L12,0 L12,2 L7,2 L7,14 L5,14 L5,2 L0,2 z',
          scale: 5,
          strokeColor: 'red'
        },
        position: new google.maps.LatLng(40, -83),
        map: map
      });

      // I am a reference marker
      new google.maps.Marker({
        position: new google.maps.LatLng(40, -83),
        map: map
      });
    }
  </script>
</head>

<body onload="initialize()">
  <div id="map_canvas"></div>
</body>

</html> 
```**

# jquery - jQuery ajax 调用，服务器响应很晚？

> ID：12797737
> 
> 赞同：1
> 
> 时间：2012-10-09T10:12:43.980
> 
> 标签：jquery, ajax, performance, firebug, fiddler

我有这个 ajax 调用从客户端执行，使用 jQuery，但有时（我的意思是通常在第一次调用时）它执行非常慢，也许这个图会解释..

![在此处输入图像描述](../Images/8dbf0ebfa3e91dcd99189b9ab73fe037.png)

如您所见，最后一次调用在任何事情之前都等待了**609 毫秒**，虽然接收数据需要**210 毫秒**，这是可以忍受的，但是为什么要等待**609 毫秒**呢？

Fiddler 的统计数据是

```
Request Count:   1
Bytes Sent:      552        (headers:543; body:9)
Bytes Received:  364        (headers:234; body:130)

ACTUAL PERFORMANCE
--------------
ClientConnected:    15:16:42.799
ClientBeginRequest: 15:16:42.799
GotRequestHeaders:  15:16:42.799
ClientDoneRequest:  15:16:42.799
Determine Gateway:  0ms
DNS Lookup:         0ms
TCP/IP Connect:     0ms
HTTPS Handshake:    0ms
ServerConnected:    15:16:42.799
FiddlerBeginRequest:15:16:42.799
ServerGotRequest:   15:16:43.408
ServerBeginResponse:15:16:43.408
GotResponseHeaders: 15:16:43.408
ServerDoneResponse: 15:16:43.408
ClientBeginResponse:15:16:43.408
ClientDoneResponse: 15:16:43.705 
```

jQuery 没什么特别的，只是一个简单的 ajax 调用......

```
$.ajax({
        url: '/AutoComplete.asmx/GetPriorityAndRemarks',
        type: 'POST',
        timeout: 20000,
        datatype: 'xml',
        cache: false,
        data: 'arg=' + custCode,
        success: function (response) {
            var result = $(response).find("string").text();
            // the values is in form of name, address, mobile, priority and remark, and discount
            var resultAry = result.split(':');
            //alert(resultAry);
            $('#txtCustomerName').val(resultAry[0].trim());
            $('#lblAddress').text(resultAry[1]);
            $('#lblMobileNo').text(resultAry[2]);
            $('#lblPriority').text(resultAry[3]);
            $('#lblRemarks').text(resultAry[4]);
            $('#txtDiscount').val(resultAry[5]);
            $('#txtQty').focus();
            $('#txtQty').select();
            $('#hdnCustCode').val(custCode);
            return false;
        },
        error: function (response) {
             alert('some error occured');
        }
    }); 
```

代码实现为

```
public string GetPriorityAndRemarks(string arg)
{
    try
    {
        SqlCommand cmd = new SqlCommand();

        cmd.CommandText = "sp_NewBooking";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@BranchId", Globals.BranchID);
        cmd.Parameters.AddWithValue("@CustCode", arg);
        cmd.Parameters.AddWithValue("@Flag", 31);
        return PrjClass.ExecuteScalar(cmd);
    }
    catch (Exception)
    {
        return "";
    }
} 
```

那么，是什么导致它花费了这么多时间呢？此外，作为一项附加措施，考虑到第一次调用此代码可能会很慢，我在页面加载时使用虚拟参数调用此代码，这样当使用真实数据调用代码时，这不是*第一次*，也不是关于服务器的任何事情正在设置，缓存或任何已经完成的事情。但是仍然没有运气，无论天气如何，无论我在页面加载时是否使用虚拟数据调用此代码，第一次调用时总是很慢。谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:56:15.140

**两种（重叠）可能性是：**

1）客户端->服务器很慢

2) 服务器 -> 数据库很慢

对于 (1) 如果您的 Web 服务器没有足够的带宽或请求过载，它就不会有效地运行。同样，如果您的客户端（测试）计算机的连接速度非常慢，您的性能将受到阻碍。如果没有更好（更快）具有更多带宽的服务器，就无法解决此问题。但是需要更多的测试来验证这种情况。

对于 (2) 您的存储过程“sp_NewBooking”可能运行不佳。我会考虑为它正在访问的表在 (BranchId, CustCode) 上放置一个非聚集索引。这也可能与 (1) 中解释的问题有关，如果您的数据库服务器因请求而陷入困境，或者您的 Web 服务器和数据库之间的连接不佳，您可能会遇到性能问题。

**要测试这些可能性：**

让您的客户端计算机 PING 服务器，或访问静态 HTML 或图像文件。检查响应时间，如果它很慢，则说明您有连接问题，或者您的 Web 服务器因请求过多而无法有效处理。

从它所在的网络/域内连接到您的数据库服务器（例如远程桌面到服务器，从同一个 LAN 连接到 sql management studio）。手动运行存储过程并检查响应时间。如果响应速度很慢，那么您的数据库服务器要么陷入了无法有效处理的请求，要么您的底层数据库没有得到很好的优化（在这种情况下，请尝试添加索引）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:17:03.983

这不是 Firefox 在发送请求之前等待，而是 Firefox 在服务器开始将数据推回套接字之前等待。

请参见[此处](http://www.softwareishard.com/blog/firebug/introduction-to-firebug-net-panel/)：Firefox 是“等待响应 - 等待来自服务器的响应”。

因此，问题仅与服务器相关（是的，处理请求的 609 毫秒很糟糕）。分析您的“asmx”页面以查看会发生什么。也许您为自动完成执行了错误的 SQL 查询，或者数据库的索引很差。

# python - 矩阵中的Python矩阵

> ID：12797740
> 
> 赞同：0
> 
> 时间：2012-10-09T10:12:57.870
> 
> 标签：python

在我的程序中，我使用这个 var：

```
payoff_matrix = [ [(4,4),(1,6)] , [(6,1),(2,2)] ] 
```

我需要检查（4,4）和（2,2），（可以是任何东西）我使用

```
 a=payoff_matrix[0]
  b=a[0]
  c=b[0]
  d=b[1] 
```

结果是

```
 c=4
  d=4 
```

我可以去那种地方吗

```
c=payoff_matrix[0].[0].[0] 
```

或以某种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:15:00.773

```
In [4]: mat = [ [(4,4),(1,6)] , [(6,1),(2,2)] ]

In [6]: c,d=mat[0][0]    #here mat[0] is [(4,4),(1,6)], invoking [0] on this yields [4,4]

In [7]: c
Out[7]: 4

In [8]: d
Out[8]: 4

In [9]: a,b=mat[1][1]  #here mat[1] is [(6,1),(2,2)], invoking [1] on this yields [2,2]

In [10]: a
Out[10]: 2

In [11]: b
Out[11]: 2 
```

# php - 如何从 php 服务器脚本自动在 Facebook 页面上发布？

> ID：12797742
> 
> 赞同：1
> 
> 时间：2012-10-09T10:13:02.707
> 
> 标签：php, facebook-graph-api, facebook-access-token

我的客户有一个电子商务网站，他们在那里销售他们的产品，他们也有该网站的 Facebook 页面。当产品价格降低或新产品推出时，我想在该页面上发布墙贴。但我想让这个自动，所以我想授权 facebook 自动，这意味着我不想要任何登录对话框。脚本应该自己授权。现在我使用的代码如下，但它要求我登录。并告诉我哪种方法好（容易）发布页面墙帖子？

```
require 'API_Library/Facebook/src/facebook.php';
 $page_id = '111111111111111';
 $appId = '111111111111111';
 $appSecret = 'aaaaaaaaaaaaaaaaaaaaa22222222222';

 $facebook = new Facebook(array(
             'appId' => $appId,
             'secret' => $appSecret,
             'cookie' => true
         ));
 $session = $facebook->getAccessToken();

 $me = NULL;

 if($session)
 {
     try
     {
         $me = $facebook->api('/me');
         $facebook->api('me/feed', 'post', array(
             'message' => 'Hello World!'
         ));
     }
     catch(FacebookApiException $e)
     {
         echo $e->getMessage();
     }
 } 
```

OUTPUT: (#200) 用户尚未授权应用程序执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:41:35.857

为了向页面发布内容，您需要页面管理员通过应用程序进行身份验证。未经身份验证，您无法发布到页面。因此，在您可以自动设置之前，需要进行一些用户交互。

该过程如下：

1.  设置 Facebook 应用程序以获取应用程序 ID 和应用程序密码 - 您将需要它来查询 API 并将更新发布到页面
2.  作为页面管理员，使用`manage_pages`权限登录您的应用程序。
3.  登录后，API 调用`/me/accounts`将为您提供`access_token`访问页面和发布更新的权限
4.  使用页面的`accesss_token`，然后您可以使用 POST 更新`/{page_id}/feed`

希望这可以帮助。

# android - Android Emulator 突然变得很慢

> ID：12797746
> 
> 赞同：1
> 
> 时间：2012-10-09T10:13:20.240
> 
> 标签：android, android-emulator

我在 Windows 系统上使用 Android 版本 4.0.3。我的模拟器运行良好，但突然变得非常慢。

启动需要太多时间，所以大部分时间启动都会被取消，或者我必须提前启动模拟器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:28:49.883

如果您的模拟器启动时间较长，您可以配置 AVD 以保存模拟器的快照。这显着提高了启动时间，尽管由于保存快照而关闭时间会增加。

如果您的模拟器通常很慢（启动和运行程序），并且如果您使用的是 Intel x86 处理器，则可以`Intel Hardware Accelerated Execution Manager`从 android SDK 安装。与标准模拟器相比，这将使模拟器速度提高 10 倍以上。它甚至比中档真实设备更快。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:27:53.870

每个平台上的模拟器都因启动缓慢而臭名昭著。通常你启动模拟器，等到它完全启动，然后运行你的程序。在真实设备上进行调试是非常可取的。

在程序运行之间让模拟器保持打开状态是必要的。

我的一位教授放弃并花了几千美元购买了一台带有巨大固态驱动器的新计算机，因为他无法在不到五分钟的时间内打开模拟器窗口，这影响了他基于该平台教授课程的能力. 我走的是更便宜的路线，在平板电脑上花了 200 美元。无论哪种方式，硬件都是真正的答案。

# qt - 如何在删除应用程序时从诺基亚 N9 (MeeGo) 上的用户主文件夹中删除文件

> ID：12797748
> 
> 赞同：1
> 
> 时间：2012-10-09T10:13:31.227
> 
> 标签：qt, shell, debian, meego

我的诺基亚 N9 的 Qt 应用程序将一些数据存储在 /home/user/.config 内的我的文件夹中。卸载应用程序时，我需要使用我的数据删除此文件夹。据我了解，这可以使用 postrm 文件来实现。我使用以下文件：

邮局

```
#!/bin/sh

rm -rf /home/user/.config/mydatafolder/

exit 0 
```

但是这段代码不起作用。我认为没有足够的权利来删除用户文件夹中的某些内容。所以，我尝试使用

```
devel-su user -c "rm -rf /home/user/.config/mydatafolder/" 
```

但它只在开发者模式下工作，我需要应用程序在没有它的情况下正常工作。以下代码也不起作用：

```
su user -c "rm -rf /home/user/.config/mydatafolder/" 
```

有人知道如何删除这个文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:27:50.640

好的，我已经解决了这个问题。在这种情况下，您不需要使用 su 或 su-devel。默认情况下，所有 pre/post rm/install 脚本都由“root”运行。要让这些脚本由“用户”运行，我们只需将以下字符串添加到 aegis 清单文件中：

```
<request context="INSTALL">
    <credential name="UID::user" />
    <credential name="GID::users" />
</request> 
```

# python - Python 和引用传递。局限性？

> ID：12797749
> 
> 赞同：4
> 
> 时间：2012-10-09T10:13:35.277
> 
> 标签：python, pass-by-reference

我想做类似以下的事情：

```
class Foo(object):
    def __init__(self):
        self.member = 10
        pass

def factory(foo):
    foo = Foo()

aTestFoo = None
factory(aTestFoo)

print aTestFoo.member 
```

但是它崩溃了`AttributeError: 'NoneType' object has no attribute 'member'`：对象`aTestFoo`没有在函数调用中被修改`factory`。

执行此操作的 pythonic 方式是什么？这是要避免的模式吗？如果是当前的错误，它是如何命名的？

在 C++ 中，在函数原型中，我会添加对要在工厂中创建的指针的引用……但也许这不是我在 Python 中应该考虑的事情。

在 C# 中，有一个关键字`ref`允许修改引用本身，非常接近 C++ 方式。我不知道 Java ......我确实想知道 Python。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T10:21:57.240

Python 没有通过引用传递。顺便说一句，它与 Java 共享的少数东西之一。有些人将 Python 中的参数传递描述为按值调用（并将值定义为引用，其中引用的意思不是它在 C++ 中的含义），有些人将其描述为按引用传递，我觉得这很值得怀疑（他们重新定义了它使用 Python 所谓的“引用”，并最终得到与几十年来被称为通过引用无关的东西），其他人则使用没有被广泛使用和滥用的术语（流行的例子是“ {对象，共享}的{传递，调用}）。请参阅[按对象调用](http://effbot.org/zone/call-by-object.htm)在 effbot.org 上对各种术语的定义、历史以及这些术语的某些论点中的缺陷进行了相当广泛的讨论。

没有命名的短篇故事是这样的：

*   每个变量、对象属性、集合项等都*指向*一个对象。
*   赋值、参数传递等创建另一个变量、对象属性、集合项等，该变量引用同一个对象，但不知道哪些其他变量、对象属性、集合项等引用了该对象。
*   任何变量、对象属性、集合项等都可以用于修改对象，并且任何其他变量、对象属性、集合项等都可以用于观察该修改。
*   没有变量、对象属性、集合项等引用另一个变量、对象属性、集合项等，因此您不能模拟按引用传递（在 C++ 意义上），除非将可变对象/集合视为您的“命名空间”。这太难看了，所以当有更简单的选择时不要使用它（例如返回值，或异常，或通过可迭代解包的多个返回值）。

您可能会认为这就像在 C 中使用指针，但不是指向指针的指针（但有时是指向包含指针的结构的指针）。然后按值传递这些指针。但不要过多解读这个比喻。Python 的数据模型与 C 的数据模型有很大不同。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T10:25:42.997

你在这里犯了一个错误，因为在 Python

> ```
> "We call the argument passing technique _call by sharing_,
> because the argument objects are shared between the
> caller and the called routine.  This technique does not
> correspond to most traditional argument passing techniques
> (it is similar to argument passing in LISP).  In particular it
> is not call by value because mutations of arguments per-
> formed by the called routine will be visible to the caller.
> And it is not call by reference because access is not given
> to the variables of the caller, but merely to certain objects." 
> ```

在 Python 中，形式参数列表中的变量绑定到实际参数对象。对象在调用者和被调用者之间*共享；*不涉及“新鲜地点”或额外的“商店”。

（当然，这就是为什么 CLU 的人称这种机制为“共享调用”的原因。）

> 顺便说一句，Python 函数也不能在扩展环境中运行。功能体对周围环境的访问非常有限。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T10:36:28.073

Python 文档的[赋值语句](http://docs.python.org/reference/simple_stmts.html#assignment-statements)部分可能很有趣。

Python 中的`=`语句会根据情况采取不同的方式，但在您呈现的情况下，它只是将新对象绑定到新的局部变量：

```
def factory(foo):
    # This makes a new instance of Foo,
    # and binds it to a local variable `foo`,
    foo = Foo()

# This binds `None` to a top-level variable `aTestFoo`
aTestFoo = None

# Call `factory` with first argument of `None`
factory(aTestFoo)

print aTestFoo.member 
```

尽管它可能更令人困惑而不是有用，但该[`dis`](http://docs.python.org/library/dis.html)模块可以向您展示函数的字节码表示，这可以揭示 Python 内部的工作方式。这是`工厂的反汇编：

```
>>> dis.dis(factory)
  4           0 LOAD_GLOBAL              0 (Foo)
              3 CALL_FUNCTION            0
              6 STORE_FAST               0 (foo)
              9 LOAD_CONST               0 (None)
             12 RETURN_VALUE 
```

也就是说，Python`Foo`按名称 (0) 加载全局类，并调用它（3，实例化和调用非常相似），然后将结果存储在局部变量中（6，参见[STORE_FAST](http://docs.python.org/library/dis.html#opcode-STORE_FAST)）。然后它加载默认返回值`None`（9）并返回它（12）

> 执行此操作的 pythonic 方式是什么？这是要避免的模式吗？如果是当前的错误，它是如何命名的？

Python 中很少需要工厂函数。在偶尔需要它们的情况下，您只需从工厂返回新实例（而不是尝试将其分配给传入的变量）：

```
class Foo(object):
    def __init__(self):
        self.member = 10
        pass

def factory():
    return Foo()

aTestFoo = factory()

print aTestFoo.member 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:22:31.287

您的工厂方法不返回任何内容 - 默认情况下，它的返回值为`None`. 您分配`aTestFoo`给`None`，但从不重新分配它 - 这是您实际错误的来源。

解决这些问题：

```
class Foo(object):
    def __init__(self):
        self.member = 10
        pass

def factory(obj):
    return obj()

aTestFoo = factory(Foo)
print aTestFoo.member 
```

这应该做我认为你所追求的，尽管这种模式在 Python 中并不典型（即工厂方法）。

# php - MySQL 插入语句因外键约束而失败

> ID：12797756
> 
> 赞同：2
> 
> 时间：2012-10-09T10:13:53.113
> 
> 标签：php, mysql

我有这样的声明：

```
INSERT INTO `alias`( `alias`, `ref_links_id`) VALUES ("3334",4) 
```

我得到这个错误：

```
Cannot add or update a child row: a foreign key constraint fails 

(`bestr_main`.`alias`, CONSTRAINT `alias_ibfk_1` FOREIGN KEY (`ref_links_id`) 

REFERENCES `links` (`link_id`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

别名表使用外键连接到链接表。为什么插入记录时会出现此错误？

我现在明白了.. 我试图将键之间的链接更改为另一个表，我得到了这个：

```
 1452 - Cannot add or update a child row: a foreign key constraint fails 

  (`bestr_main`.<result 2 when explaining filename '#sql-73c_38e0'>, CONSTRAINT 

 `#sql-73c_38e0_ibfk_1` FOREIGN KEY (`ref_links_id`) REFERENCES `refs` (`ref_id`) 

 ON DELETE CASCADE ON UPDATE C) 
```

那说明什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:17:21.483

读取错误

```
FOREIGN KEY (ref_links_id) REFERENCES links (link_id)) 
```

方法

```
`links`.link_id  (Parent)

`alias`.ref_links_id (Child) 
```

没有父母就没有孩子。所以首先检查父表中插入子表的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:15:49.020

如果您`links`想在`alias.ref_links_id`.

`links`如果它不存在，请先在表中创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:16:43.903

链接表没有值“4”。请检查链接表值，它的值为“4”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:20:25.453

```
if((select count(*) from primaty_table where pk_id=4) > 0)
{
INSERT INTO `alias`( `alias`, `ref_links_id`) VALUES ("3334",4)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T10:20:50.787

`ref_links_id`4 将已经存在于表中`alias`。您不能为外键约束插入重复值。

如果要删除外键，

```
ALTER TABLE `alias` DROP FOREIGN KEY ref_links_id; 
```

然后尝试`INSERT INTO`alias `(`alias `,`ref_links_id`) VALUES ("3334",4)`

# html - 表行跨度百分比未通过验证器

> ID：12797758
> 
> 赞同：1
> 
> 时间：2012-10-09T10:13:55.523
> 
> 标签：html, html-table, w3c-validation

我正在生成一些 html 表，我希望第一行跨越*所有*其他行，所以这就是我所做的：

```
<table>
    <tr>
        <td colspan="100%">Table title</td>
    </tr>
    <tr>
        <td></td>
    </tr>
</table> 
```

问题是我还希望我的网站是 w3c 有效的：

```
Bad value 100% for attribute colspan on element td: Expected a digit but saw % instead. 
```

我尝试使用 colspan="all"，但它不起作用，我想我可以设置一个非常高的值，例如 colspan=500 以确保它始终是 colspan-ed，但似乎有点脏并且仍然无效。

有没有办法跨行每隔一行并且是 w3c 有效的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:42:59.467

使用标题元素。这用于为您的表格提供标题并覆盖所有表格列。

```
<table>
    <caption>Table title</caption>
    <tr>
        <td>Data cell</td>
        <td>Data cell</td>
        <td>Data cell</td>
    </tr>
    [...]
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:24:25.837

1) W3 规范说该值必须是整数 NUMBER。百分比绝对行不通。

> 此属性指定当前单元格跨越的列数。此属性的默认值为一（“1”）。值零 ("0") 表示单元格跨越从当前列到定义单元格的列组 (COLGROUP) 的最后一列的所有列。

2）Firefox是目前唯一支持0的浏览器。

3）你可以尝试一个非常大的数字，但这也可能让你在验证器上遇到麻烦。当您知道表中的列数时，也许您应该尝试使用 Javascript 在运行时设置该属性。

# autotools - 如何使用 automake 即 autotools 从 Java 类创建可执行文件？

> ID：12797760
> 
> 赞同：4
> 
> 时间：2012-10-09T10:13:57.350
> 
> 标签：autotools

我正在研究自动工具。我有一些使用 java 类的 c++ 文件。我可以使用自动工具为我的项目创建可执行文件，但我无法为项目中包含的 java 类创建可执行文件。我的项目将此 java 可执行文件作为命令执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:16:33.260

我会从 java 类中生成一个 jar 文件并将其安装到 DATADIR 中。

# java - Maven 和 EJB3 - 控制客户端的名称

> ID：12797762
> 
> 赞同：1
> 
> 时间：2012-10-09T10:14:08.847
> 
> 标签：java, maven, ejb-3.0

我正在开发一个具有 EJB 模块的项目。由于缺少版本编号，该模块无法进入我们的 maven-repository (Nexus) 存在问题。我目前正在尝试解决这个问题，但我似乎无法按照我想要的方式得到它。

在 EJB 项目的 pom.xml 中：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ejb-plugin</artifactId>
    <configuration>
      <ejbVersion>3.0</ejbVersion>
      <outputDirectory>${basedir}/target/classes </outputDirectory>
      <jarName>MyProjectEJB</jarName>
      <generateClient>true</generateClient>
      <archive>
        <manifest>
          <addClasspath>true</addClasspath>
        </manifest>
      </archive>
    </configuration>
  </plugin> 
```

这是它最初的方式。构建模块会产生两个 .jar 文件：MyProjectEJB.jar 和 MyProjectEJB-client.jar。我尝试了以下方法来添加版本编号：

```
 <jarName>MyProjectEJB-${project.version}<jarName> 
```

现在，我得到类似：MyProjectEJB-4.1-SNAPSHOT.jar 和 MyProjectEJB-4.1-SNAPSHOT-client.jar。这几乎是正确的，但我真的希望版本号也是客户端中的最后一个（所以 MyProjectEJB-client-4.1-SNAPSHOT）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:26:31.733

`client`在这种情况下是一个 Maven 分类器。

> 分类器允许区分从相同 POM 构建但内容不同的工件。它是一些可选且任意的字符串，如果存在的话，它会被附加到工件名称中，紧跟**在版本号之后**。

如果您在名称中移动它，则不可能对其具有正确的依赖关系。

以下依赖项将使用 EJB：

```
<dependency>
    <groupId>your.group</groupId>
    <artifactId>MyProjectEJB</artifactId>
    <version>1.0</version>
</dependency> 
```

以下依赖项将使用 EJB 客户端：

```
<dependency>
    <groupId>your.group</groupId>
    <artifactId>MyProjectEJB</artifactId>
    <version>1.0</version>
    <classifier>client</classifier>
</dependency> 
```

# php - Yii 中的 CActiveRecord 有没有办法只处理一个表中的字段子集？

> ID：12797768
> 
> 赞同：0
> 
> 时间：2012-10-09T10:14:29.257
> 
> 标签：php, yii

我正在处理具有数百个字段的表，并且我需要一种方法让 yii 只处理字段的子集（读取和写入）。在 CActiveRecord 类中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:08:49.000

在一个表中有数百个字段并不是更好。

无论如何，使用 Yii 可以读取和写入字段子集。我可以用`CDbCriteria`.

```
$criteria = new CDbCriteria;
$criteria->select = 'field1, field2'; // specify fields you want to read 
```

在写作的同时，你必须聪明地知道你什么时候会写哪个领域。这可以用`rules`in来完成`model`。

定义`scenario`要对特定操作执行的规则和适当的验证。

`$model->save()`在调用方法之前设置场景。

```
// Set scenarion
$model->setScenario('mystep1'); 
```

适用`scenario`于模型规则。

```
// You rule in model
array('email','email','on'=>'mystep1') 
```

还将规则仅应用于`safe`您要执行更新操作的那些字段。

```
array('email, id, name','safe') 
```

安全规则也适用于场景；

**注意：** 使用场景可以保存或更新表的特定字段，但必须指定表的列，默认为NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:31:53.103

看看[defaultScope()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#defaultScope-detail)函数`CActiveRecord`。它允许您指定添加到所有`SELECT`查询的条件。

您将像这样覆盖该函数：

```
public function defaultScope() {
    // by default only select records with type = 1
    return array(
        'condition' => 'type = 1',
    );
} 
```

阅读：

[http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:42:36.960

根据这个 SO 问题：[Calling a database view in Yii using Active Record](https://stackoverflow.com/questions/5782879/calling-a-database-view-in-yii-using-active-record)您可以使用数据库**视图**使您的模型仅基于您需要的列。

然后，您将不得不通过此视图找到一种**写入**（插入和更新）的方法，我相信有多种方法可以确保这一点。

# python - 使用 Tornado 上传文件

> ID：12797772
> 
> 赞同：7
> 
> 时间：2012-10-09T10:14:41.523
> 
> 标签：python, python-3.x, tornado

`put`使用请求时，如何在 Tornado 中访问上传的文件？

```
@require_basic_auth
class UploadFile(tornado.web.RequestHandler):
    def put(self, params):
        path = calculate_path(params)
        # TODO: create an empty binary file at path and then copy 
        # the request input stream to it. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T10:33:19.907

`self.request.files`应该没事。这是一个[例子](http://technobeans.wordpress.com/2012/09/17/tornado-file-uploads/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T10:48:08.060

```
@require_basic_auth
class UploadFile(tornado.web.RequestHandler):
    def put(self, params):
        path = calculate_path(params)
        with open(path, 'wb') as out:
            body = self.request.get_argument('data')
            out.write(bytes(body, 'utf8')) 
```

...是我需要的。

在一些 ActiveState 页面上找到。

# javascript - 我如何访问其中具有数据层次结构的 Json 对象

> ID：12797775
> 
> 赞同：0
> 
> 时间：2012-10-09T10:14:50.017
> 
> 标签：javascript

我通常在我的 asp.net mvc 上使用 Json 对象，方法是遍历对象并显示结果，例如

```
$.each(data, function (key, val) { 

                        // Format the text to display. 
                        var str = val.id + ': $' + val.packageName; 

                        // Add a list item for the product. 
                        $('<li/>', { text: str }) 
                        .appendTo($('#products')); 
```

但是我遇到了一个 Web 服务，它以以下格式返回 Json 对象，其中包含某种类型的内容：-

```
{
  "total":3,
  "desc":false,
  "sort":"name",
  "start":0,
  "data":
  [
    {"id":"hdc_v1001#1#hdc_certification_process",
      "packageName":"halal certification",
      "name":"HDC Certification Process",
      "packageId":"hdc_v1001",
      "label":"HDC Certification Process ver 1",
      "version":"1"},
    {"id":"mdec_v1002#12#mdec_wp1",
      "packageName":"Mdec Work Progress",
      "name":"mdec_wp1",
      "packageId":"mdec_v1002",
      "label":"mdec_wp1 ver 12",
      "version":"12"},
    {"id":"mora#5#mora_new_application",
      "packageName":"MORA Halal Certification",
      "name":"MORA New Application",
      "packageId":"mora",
      "label":"MORA New Application ver 5",
      "version":"5"}
  ]
} 
```

那么在这种情况下，我如何能够遍历 Json 对象以显示其值？最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:18:34.140

```
myJsonObject = {
  "total":3,
  "desc":false,
  "sort":"name",
  "start":0,
  "data":
  [
    {"id":"hdc_v1001#1#hdc_certification_process",
      "packageName":"halal certification",
      "name":"HDC Certification Process",
      "packageId":"hdc_v1001",
      "label":"HDC Certification Process ver 1",
      "version":"1"},
    {"id":"mdec_v1002#12#mdec_wp1",
      "packageName":"Mdec Work Progress",
      "name":"mdec_wp1",
      "packageId":"mdec_v1002",
      "label":"mdec_wp1 ver 12",
      "version":"12"},
    {"id":"mora#5#mora_new_application",
      "packageName":"MORA Halal Certification",
      "name":"MORA New Application",
      "packageId":"mora",
      "label":"MORA New Application ver 5",
      "version":"5"}
  ]
};
$.each(myJsonObject.data, function (key, val) { 

                    // Format the text to display. 
                    var str = val.id + ': $' + val.packageName; 

                    // Add a list item for the product. 
                    $('<li/>', { text: str }) 
                    .appendTo($('#products')); 
} 
```

# ios - shouldStartLoadWithRequest 和地址数据检测器，如何获取地址？

> ID：12797780
> 
> 赞同：3
> 
> 时间：2012-10-09T10:15:09.923
> 
> 标签：ios, uiwebview

我正在使用启用了地址（邮政地址）数据检测器（iOS 4,5 或 6）的 UIWebView。在点击已检测到的地址后在 shouldStartLoadWithRequest 中调用时，我会以以下形式获得 URL：x-apple-data-detectors//4 如何从中提取地址？此外，使用这样的 URL 调用 UIApplication 的 openURL 不起作用（没有任何反应）。

# iphone - 未找到 cap_ios.h

> ID：12797783
> 
> 赞同：11
> 
> 时间：2012-10-09T10:15:13.373
> 
> 标签：iphone, ios, opencv

显然，我已经从[http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/下载了 opencv2.framework](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/)

但是在我从 GSOC 2012 下载示例项目后，facedetectvideo 项目需要框架中的 opencv2/highgui/cap_ios.h 但 opencv2.framework 没有。

关于最新的完整框架有什么建议吗？

任何帮助将不胜感激。thx

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-01-31T17:36:19.980

截至目前，头文件已移至新位置。尝试这个。

```
#import <opencv2/videoio/cap_ios.h> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-21T07:26:37.313

从新库中，您必须使用以下标头

```
#import "opencv2/imgcodecs/ios.h" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T10:19:34.010

你不需要 cap_ios.h。

您只需`#import <opencv2/opencv.hpp>`将“opencv.framework”文件拖入 Xcode 后，在您的 prefix.pch 文件中。

GSOC opencv 代码适用于某种开发版本。

# compilation - 是否可以在咖啡脚本中使用编译时变量？

> ID：12797784
> 
> 赞同：1
> 
> 时间：2012-10-09T10:15:15.407
> 
> 标签：compilation, coffeescript, environment-variables

我想实现的一个例子：

```
SERVER=localhost:3000 coffee -o src/ coffee/ 
```

样品.咖啡

```
$.post "ENV.SERVER", data 
```

示例.js

```
$.post("localhost:3000", data); 
```

欢迎注释和想法，尽管我可以这样做：

```
source.replace("ENV.SERVER","localhost:3000"); 
```

# c# - C# 设计帮助 - 处理提供者的实例

> ID：12797786
> 
> 赞同：1
> 
> 时间：2012-10-09T10:15:16.243
> 
> 标签：c#, .net, design-patterns

我正在寻找一种设计技术来实现以下目标。

*   两个不同的数据源读取数据
*   我需要能够动态添加或删除更多数据源

到目前为止，我所做的是，我创建了以下内容：

```
IDataProvider 
- StartReadData()
- EndReadData()
- List<DataObjs> (contains data)

   XmlDataProvider : IDataProvider
   CsvDataProvider : IDataProvider

IDataProviderManager
- List<IDataProvider> (has a collection of dataprovider)

  DataProviderManager : IDataProvideManager 
```

现在，我正在寻找一种更好的技术，通过它我可以实例化 IDataProviders 并以可配置的方式对其进行管理（**添加或删除更多 IDataProviders 类，而无需对代码进行任何更改或重新编译**）。

欢迎任何好的设计技术或类似代码的链接。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:41:53.993

只要将提供程序保存在单独的程序集中，就可以在配置文件中定义它们并在运行时实例化它们：

```
 <DataProviders>
 <provider name="XmlDataProvider" 
      type="Separate.Assembly.Providers.XmlDataProvider, Separate.Assembly"/>
<provider name="CsvDataProvider" 
      type="Separate.Assembly.Providers.CsvDataProvider, Separate.Assembly"/>
</DataProviders> 
```

然后，您的代码必须读取和解析配置，然后动态加载类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:13:15.047

如果您不想每次都重新编译，那么解决方案可以是您自己的解决方案和@Stuart Dunkeld 提供的解决方案的混合。

1.  定义一些接口，如`IDataProvider`.
2.  编写一些配置节处理程序（实现[IConfigurationSectionHandler](http://msdn.microsoft.com/en-us/library/system.configuration.iconfigurationsectionhandler.aspx)`IDataprovider` ）并在应用程序配置中配置所有数据提供者（实现类）。
3.  添加一些“管理器”类，为特定类型加载配置的数据提供程序。您可以使用类似[IUnityContainer](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.iunitycontainer%28v=pandp.20%29.aspx)的东西来了解依赖关系并解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:37:37.177

作为第一步，使用工厂模式抽象出提供者的实例化。

在那个工厂里，你可以用任何一种方式来实现：配置、反射等。

但我的猜测是，从长远来看，你最终会使用 IoC 容器，因为他们正在做你想要的（并且更好）

大多数容器可以扫描程序集并将它们透明地导入您的应用程序，而无需重新编译。

我建议花一点时间来了解 DI，而不是浪费时间发明自己的解决方案。（顺便说一句，这也是值得学习的东西）

当您找到适合您的最终解决方案时，使用工厂可以在不破坏应用程序的情况下更改实现。

# ruby-on-rails - Rails 应用程序无法识别生产服务器上的 fastercsv gem

> ID：12797791
> 
> 赞同：1
> 
> 时间：2012-10-09T10:15:31.153
> 
> 标签：ruby-on-rails, ruby, rubygems

当我在生产服务器上运行 rails 应用程序时，它给了我以下错误：

> LigesController#export_all 中的名称错误
> 
> 未初始化的常量 LigesController::FasterCSV

但是，在开发环境中它工作正常。该 gem 已安装在服务器上。我可以通过“宝石清单”看到它有什么想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:33:49.257

我在我的控制器中有这个导出所有操作。之前我使用的是 CSV 而不是文件，这给了我 NameError。所以我将它更改为文件并且它有效。我不知道为什么我们不能将它命名为 csv ..可能是因为旧的 csv gem ......

```
def export_all

@liges = Liges.all

**file** = FasterCSV.generate do |line|
  cols = ["ID","Details","PartnerCode","Sence","Date","Partner","Person","TaxName","TaxID"]
line << cols

@liges.each do |entry|                
line << [entry.id, entry.description, entry.code, entry.ellipsis, entry.Date, entry.name, entry.people_name, entry.tax_name, entry.tax_id ]
    end  

end

send_data(file, 
:type => 'text/csv; charset=iso-8859-1; header=present', 
:disposition => "attachment; filename=Oligo_data_#{Time.now.strftime('%d%m%y-%H%M')}.csv")

 end 
```

# symfony-1.4 - 嵌入式表单和事件调度器

> ID：12797795
> 
> 赞同：0
> 
> 时间：2012-10-09T10:15:42.390
> 
> 标签：symfony-1.4, symfony-forms

我有 3 种形式，一种是a`SalesForm`和`SalesItemForm``EmbedSalesItemForm`

我有`SalesItemForm`我的`SalesForm`使用`embedRelation('SalesItems', EmbedSalesItemForm)`

这些效果很好，当我查看销售时，我会看到嵌入其中的物品。没事儿。

不过，我想要做的是检查一个值是否出现在任何嵌入式表单值中，如果是，则可能连接到事件调度程序/侦听器以发送电子邮件。

我可以通过以下方式获取表单值：

```
public function processValues($values) {

    var_dump($values);exit;

    return parent::processValues($values);

} 
```

这将返回：

```
 array
      'SalesItems' => 
        array
          0 => 
            array
              'id' => string '38' (length=2)
              'quantity' => int 1
              'sku' => string 'test1' (length=9)
              'description' => string 'test1' (length=5)
              'price' => float 9.99
              'out_of_stock' => null
          1 => 
            array
              'id' => string '39' (length=2)
              'out_of_stock' => string 'on' (length=2)
              'quantity' => int 1
              'sku' => string '1234' (length=4)
              'description' => string 'test' (length=4)
              'price' => float 9.99
      'id' => string '20' (length=2)
      'first_name' => string 'Test' (length=4)
      'last_name' => string 'Name' (length=4)
      'email_address' => string 'test@test.com' (length=13) 
```

理想情况下，我需要检查是否`out_of_stock`是`on`. 这是一个复选框字段

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:24:51.090

据我了解，您需要这样的东西：

```
public function processValues($values) {

    if(isset($values)){
      foreach($values as $value){
        if($value['out_of_stock'] == 'on'){ // The checkbox is checked
          // Send mail
        }
      }
    }

    return parent::processValues($values);

} 
```

# sql - 带参数 CTE 表达式结果的表值函数

> ID：12797800
> 
> 赞同：3
> 
> 时间：2012-10-09T10:15:54.983
> 
> 标签：sql, common-table-expression

是否可以有一个包含 tvf 的 select 语句，其参数是 CTE 表达式的结果？这是我的代码：

```
 ;with
 date_cte as
 (
    SELECT * FROM ExplodeDates('2012-10-09','2012-10-12')
 )
SELECT * FROM ufn_GET_ATTENDANCE
(
    SELECT QUOTENAME(CONVERT(varchar(10),thedate,120),'''') thedate FROM date_cte
) 
```

当我运行此查询时，错误是关键字“SELECT”附近的语法不正确。')' 附近的语法不正确。

有可能吗？或者我对 CTE 有一些误解。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:28:01.843

如果您的 SQLServer 版本中有 CTE，那么也有[**CROSS APPLY 和 OUTER APPLY**](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符

```
;with date_cte as
 (
  SELECT * FROM ExplodeDates('2012-10-09','2012-10-12')
 )
  SELECT c.*
  FROM date_cte CROSS APPLY ufn_GET_ATTENDANCE(QUOTENAME(CONVERT(varchar(10), thedate, 120), '''')) c 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d60a6/1/0)上的演示[](http://sqlfiddle.com/#!3/d60a6/1/0)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:19:39.353

如果 ufn_GET_ATTENDANCE 接受标量输入，您可以将内部查询括起来以提供标量值。

```
;with
 date_cte as
 (
    SELECT * FROM ExplodeDates('2012-10-09','2012-10-12')
 )
SELECT * FROM ufn_GET_ATTENDANCE
(
    (SELECT QUOTENAME(CONVERT(varchar(10),thedate,120),'''') thedate FROM date_cte)
) 
```

但是，由于`ufn_GET_ATTENDANCE`将用户定义的表类型作为参数，因此无法传递 CTE 结果。除非它是 EXACT 定义的类型，否则甚至不是兼容的表变量。

请参阅以下示例：

```
create type ud_type as table (A int)
GO
create function table_in(@in ud_type readonly)
returns table as
return select * from @in
GO

declare @tbl ud_type;
select * from table_in(@tbl)
-- ok
GO

declare @tbl table (A int);
select * from table_in(@tbl)
-- Operand type clash: table is incompatible with ud_type: 
```**

# sql - 使用 case 表达式检查计算值

> ID：12797802
> 
> 赞同：1
> 
> 时间：2012-10-09T10:15:57.893
> 
> 标签：sql

我有一个查询，例如：

```
SELECT *,
(A+B) AS TOTALVALUE
FROM 
(SELECT A,B FROM MYTABLE) AS MYTABLE1 
```

如何将 a`case...when`与计算值一起使用？例如，如果我的计算值大于 1，我希望它为 10，否则我希望它返回它的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:17:16.850

```
SELECT *
, (A+B) AS TOTAL VALUE
, case when (A + B) > 1 then 10 else (A + B) end as my_calc_col
FROM MYTABLE 
```

您可能还想考虑`NULLs`：

```
select 
     x.A
   , x.B
   , case when TOTAL_VALUE > 1 then 10 else TOTAL_VALUE end as TOTAL_VALUE2
from
(
   select coalesce(A, 0) + coalesce(B, 0) as TOTAL_VALUE
          , A
          , B
   FROM MYTABLE
) x 
```

**编辑**：我也简化了这一点：

```
FROM 
(SELECT A,B FROM MY TABLE) AS MYTABLE1 
```

简单地说：

```
SELECT A, B, .....
FROM MYTABLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:18:19.133

```
SELECT 
   *,
   CASE WHEN 
      (A+B) > 1 
   THEN 
     10 
   ELSE 
     (A+B) END
 AS TOTAL VALUE
FROM 
(SELECT A,B FROM MY TABLE) AS MYTABLE1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:37:16.047

除了其他答案之外，可能值得指出的是 SQL Server 中有两种类型的 CASE

这些是等价的

```
CASE x
   WHEN y THEN z
   ELSE NULL
END 
```

和

```
CASE 
   WHEN x = y THEN z
   ELSE NULL
END 
```

但据我所知，你不能用第一个表达：

例如，第二个 case 语句可以：

```
CASE 
   WHEN x + 1 = y - 1 THEN z
   ELSE NULL
END 
```

在第二个 case 语句中使用表达式很有用，但如果需要简单的值比较，请使用第一个。

# objective-c - 如何覆盖类别中的委托方法？

> ID：12797805
> 
> 赞同：0
> 
> 时间：2012-10-09T10:16:11.240
> 
> 标签：objective-c, ios5, overriding, uialertview, objective-c-category

我已经为委托方法创建了类别`UIAlertView`并覆盖了委托方法`willPresentAlertView`，但我在类别中的方法没有被触发。

**示例代码：**

```
@interface UIAlertView (CustomAlert)
@end

@implementation UIAlertView (CustomAlert)
- (void)willPresentAlertView:(UIAlertView *)alertView1
{

    for (UIView *sub in [alertView1 subviews])
    {
        if([sub class] == [UIImageView class])
        {
            ((UIImageView *)sub).image=nil;
            ((UIImageView *)sub).backgroundColor = [UIColor blackColor];
        }
    }

    [alertView1.layer setBorderColor:[[UIColor whiteColor] CGColor]];
    [alertView1.layer setCornerRadius:0];
    [alertView1.layer setBorderWidth:2];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:38:08.433

`willPresentAlertView`如果您的意图是为委托方法提供默认实现，那么您的方法（`willPresentAlertView`在`UIAlertView`类别中定义）是正确的。您只需要将警报本身作为委托传递，以便调用该方法：

```
 UIAlertView* alert = ...
 alert.delegate = alert; 
```

如果你不这样做，你的委托方法将不会被调用。

另一方面，我怀疑定义这样的默认实现是否真的很有用，因为原则上每个警报都需要自己特定的委托方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:38:39.437

简单的：

```
@interface MONBlackStyle : NSObject // << new class, not category
+ (void)willPresentAlertView:(UIAlertView *)alertView1;
@end

@interface MONOrangeStyle : NSObject // << new class, not category
+ (void)willPresentAlertView:(UIAlertView *)alertView1;
@end 
```

不需要类别。当然，当您使用该类别时，警报参数是多余的，`UIAlertView`当然，如果访问是问题，上述消息的定义可能会调用其他一些类别方法。另请注意，在这个确切的示例中，委托将被设置为：`alert.delegate = [MONOrangeStyle class];`这是朝着正确方向迈出的一步，但可以采取更多步骤。祝你好运。

# sql - 使用 PostgreSQL 中的存储过程更新列

> ID：12797806
> 
> 赞同：0
> 
> 时间：2012-10-09T10:16:12.680
> 
> 标签：sql, oracle, stored-procedures, plsql

我有一个表，其中一个名为的列`items`及其值是 `''`大约 1000 行，我们如何在 PostgreSQL 中使用存储过程将每个项目重命名为一个唯一值，例如具有增量值的列，即

```
 items0001, items0002, items003,.....items1000 
```

试过这个，但它不工作

```
UPDATE product SET items=CASE
          WHEN items='' THEN  items='items'+1
          ELSE items123

          END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:51:14.480

假设您的表有一个名为`id`以下的主键列应该这样做：

```
update product
    set items = new_items.new_item
from (
  select id, coalesce(items,'')||to_char(row_number() over (), 'FM00009') as new_item
  from product
) as new_items
where new_items.id = p.id
and product.items is null or product.items = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:24:34.727

```
UPDATE product SET items=CASE
      WHEN len(items)>0 THEN  items='items'+1
      ELSE items123

      END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:27:45.333

UPDATE product SET items=CASE WHEN len(items)>0 THEN 'items' || somesequence.nextval ELSE 项目 END

# ios - 自 iOS6 以来 UINavigationBar 中的标题未对齐

> ID：12797807
> 
> 赞同：4
> 
> 时间：2012-10-09T10:16:16.690
> 
> 标签：ios, fonts, uinavigationbar, uiappearance

从 iOS 6 开始，我在应用程序中使用自定义样式时遇到了几个问题。我使用自定义字体和几个`UIAppearance`代理。我无法理解的一个问题是我的 UINavigationBar 中的标题未对齐。在 iOS 5 中，一切正常并正确对齐。

由于 iOS6 已经发布并且自定义样式并不少见，我认为这不是错误，而是我对 iOS6 的一些新变化的误解。

![错位](../Images/b30b74d08b1e39bd2cdff6caad1429b2.png)

我在文档中搜索了用于调用 UIAppearance 代理的文本对齐方法，但我找不到这样的方法。

我使用以下代码行在整个应用程序中设置 UINavigationBar 的样式：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavigationBarBackground"] 
                                   forBarMetrics:UIBarMetricsDefault];

[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavigationBarBackground"] 
                                   forBarMetrics:UIBarMetricsLandscapePhone];

[[UINavigationBar appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                      [UIColor whiteColor], UITextAttributeTextColor, 
                                                      [UIFont fontWithName:@"Corbel-Bold" size:14.0], UITextAttributeFont,
                                                      nil]];

[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setTintColor:[UIColor whiteColor]];
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                      [UIColor ceBlueColor], UITextAttributeTextColor,
                                                      [UIColor whiteColor], UITextAttributeTextShadowColor, 
                                                      [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset, 
                                                      [UIFont fontWithName:@"Corbel" size:0.0], UITextAttributeFont, 
                                                      nil]
                                            forState:UIControlStateNormal];

[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -3) forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T12:14:06.460

这里有同样的问题，但我注意到当导航栏有后退按钮或右栏按钮（表格编辑）时不会发生这种情况。导航到新视图控制器然后返回第一个视图控制器时，标题上的对齐方式也已修复...

我认为正在发生的事情是iOS根据默认字体计算标题框架的位置，因为我使用的字体有点小，标题有点偏向中心左侧。

我当前的修复是调用`setNeedsLayout`viewWillAppear。似乎正在工作。

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (self.navigationItem.hidesBackButton || self.navigationItem.rightBarButtonItem == nil) {
        [self.navigationController.navigationBar setNeedsLayout];
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T12:13:57.760

如果有帮助，您可以（至少）调整标题的垂直位置：

```
[[UINavigationBar appearance] setTitleVerticalPositionAdjustment:4 forBarMetrics:UIBarMetricsDefault]; 
```

（这个问题帮助我找到了解决这个问题的方法：[UINavigationBar custom title position](https://stackoverflow.com/questions/5992476/uinavigationbar-custom-title-position)）

# hibernate - Hibernate 会话和标准

> ID：12797810
> 
> 赞同：0
> 
> 时间：2012-10-09T10:16:22.467
> 
> 标签：hibernate

org.hibernate.Criteria 是一个接口。

那怎么可能跟随呢？

```
Criteria crit = sess.createCriteria(Cat.class);  
crit.setMaxResults(50);
List cats = crit.list(); 
```

任何人如何在不首先实现接口的情况下调用标准接口上的方法？

例如

```
crit.setMaxResults
crit.list(); 
```

一些基本的东西我不明白。帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:21:39.470

会话接口确实有实现，其中之一是`org.hibernate.internal.CriteriaImpl`. 查看#createCriteria 方法的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:21:48.557

您使用接口声明一个变量 - 接口的设计，但它可以是实现该接口的任何类型。

`sess.createCriteria`返回我猜，[Criteriaimpl](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/impl/CriteriaImpl.html)。（继续命名那里的休眠方式）。

看看集合框架以及优秀的使用界面。

# c# - 旋转轴进行旋转

> ID：12797811
> 
> 赞同：0
> 
> 时间：2012-10-09T10:16:28.910
> 
> 标签：c#, vector, xna, rotation

使用第一人称相机观察方向 d.

为了让相机指向目标 t（具有关联的方向 d2），我必须围绕某个轴旋转 d，对吗？该轴应该穿过相机并且应该垂直于由 d 和 d2 形成的平面，对吗？

假设我每帧将向量 d 旋转一定程度，旋转轴不应该改变，因为虽然 d 正在慢慢接近 d2，但它们对应的平面不会改变，对吗？

好吧，如果这一切都是真的，那么我想知道为什么下面示例中的旋转轴在每次调用时都会发生变化。旋转工作准确，但从旋转开始到结束速度会降低。

这篇文章来自[当前问题](https://stackoverflow.com/q/12796701/946904)的上下文，您还可以在此处查看源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:10:56.590

方向`_rotationAxis`点不会改变，因此您所说的旋转方向是恒定且正确的。但是 的大小`_rotationAxis`正在变化，因此您会得到 x、y、z 分量的不同值和不同的旋转量。

当您执行交叉以获得旋转轴时，生成的向量的长度是交叉的两个向量的长度和将它们分开的角度的***函数***。结果向量的方向始终与两个输入向量成 90 度。

最有可能的是，您使用的 2 个向量的长度是一致的并且最有可能是单位长度，但是由于它们之间的角度小于每帧，因此会导致`_rotationAxis`每帧的长度不同。

在 Xna 中，产生的旋转量`CreateFromAxisAngle`不仅取决于作为参数插入的角度，还取决于轴矢量的长度（在文档中并不明显，但仍然如此）。因此，您在每帧使用越来越短的旋转轴，这会导致每帧的旋转量越来越小。如果旋转轴矢量的长度为 1.0（单位长度矢量），它只会产生您插入的旋转角度。

`_rotationAxis`在`CreateFromAxisAngle`. _

```
_rotationAxis = Vector3.Cross(Direction, _flyTargetDirection);
_rotationAxis.Normalize();
_rotation = Matrix.CreateFromAxisAngle(_rotationAxis, MathHelper.ToRadians(_flyViewingSpeed - Math.ToRadians(rotationSpeed))); 
```

# cakephp - CakePHP - Linking Models

> ID：12797816
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:16:48.583
> 
> 标签：cakephp

I have three models

1.  User
2.  Status
3.  Comments

I am done with User and Status associations now i want to make join for comments but i am a bit confused and i think it would be like this...

Scenario 1: A user hasMany status and status belongsTo user [ DONE ] Scenario 2: A status hasMany comments and comments belongsTo status [ Which will be done as well ]

The thing which is eating my mind is that comments also belongsTo user [ Right or Wrong ? ]

If right then is this the way i am gonna use belongsTo

```
var $belongsTo = array('status','user'); 
```

and what about find('all') ? would it be like this

```
$this->User->Status->Comment->find('all'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:40:03.553

Ok, based on application that looks like Facebook, I think you should have these associations like:

**User**

```
public $hasMany = array(
    'Status' => array(
        'className' => 'Status',
        'foreignKey' => 'user_id',
        'dependent' => true
    ),
    'Comment' => array(
        'className' => 'Comment',
        'foreignKey' => 'user_id',
        'dependent' => true
    ),
); 
```

**Status**

```
public $hasMany = array(
    'Comment' => array(
        'className' => 'Comment',
        'foreignKey' => 'status_id',
        'dependent' => true
    ),
);

public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id'
    ),
); 
```

**Comment**

```
public $belongsTo = array(
    'Status' => array(
        'className' => 'Status',
        'foreignKey' => 'status_id'
    ),
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id'
    ),
); 
```

And to find comments of a status, for example, you can use **[Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)**.

Hope this helps.

# delphi - Firebird 强行解除僵局

> ID：12797817
> 
> 赞同：1
> 
> 时间：2012-10-09T10:16:52.000
> 
> 标签：delphi, deadlock, firebird, database-deadlocks

我正在使用 Delphi IBQuery 和 IBTransaction 组件使用此查询更新数据库中的所有记录：

```
UPDATE INVOICES SET BLK = 0; 
```

当用户打开另一个客户端应用程序时，它会在某些记录（由用户打开）上留下死锁。

问题在于我的应用程序必须完成上述查询。

是否可以实施某种解决方案来强制消除死锁？例如 SQL 查询？

Firebird 版本是 2.1.2.18118 在 Windows 7 上运行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:25:32.020

最好的选择是重构这些应用程序。

FB/IB 的自然模式是有两个并行事务。

*   **#1**将是只读的、已提交的、永不关闭的，它仅用于读取数据。

*   **#2**将在短时间内打开/提交以实际应用更改。任何“正在编辑”的数据本身都不会开启交易。

长期编辑事务通过阻止垃圾收集并强制它（和索引）包含大量虚假数据来影响数据库。

我不知道您是否可以通过 IBX + IBQuery + 某种自定义更新查询（例如 TUpdateSQL 在 bDE 时代）来做到这一点。第 3 方 FB 连接库通常对双向事务模式有一些支持。

然而，这种方法强加了一个非常具体的应用程序设计模式，并使 Firebird 无法保证数据一致性——这现在是应用程序的负担。评论带来了一个很好的链接： [Re: [firebird-support] Long read-only Transactions](http://fb-list-archive.s3-website-eu-west-1.amazonaws.com/firebird-support/2008/6/94903.html)

* * *

在现代 Firebird 中，如果您具有数据库管理员/所有者角色，您可以强制删除事务。阅读有关监控表的信息。请注意，2.5.1 中存在错误，因此您可能会等待 2.5.2 发布。

*   [http://www.upscene.com/documentation/fbtm2/index.html?dm_monitoringtables.htm](http://www.upscene.com/documentation/fbtm2/index.html?dm_monitoringtables.htm)
*   c:\Program Files\Firebird\Firebird_2_5\doc\README.monitoring_tables.txt

但是，如果您强制回滚这些事务 - 应用程序将如何表现？用户仍然会在编辑时突然发现他的大部分更改都丢失了。

PS。[http://www.sql.ru/forum/actualthread.aspx?tid=910920](http://www.sql.ru/forum/actualthread.aspx?tid=910920)此代码用于`mon$transactions`将事务映射到连接，然后强行断开有问题的应用程序。如果直接`delete from mon$transactions where...`不可用，那么这将是剩下的选项。

聚苯乙烯。由于 FB 2.1 长时间事务最好每隔几分钟提交（并关闭）一次（甚至是 r/o 事务）。原因是如果他们碰巧使用 BLOB 计算，这可能会导致数据库无法控制的增长，只有在事务关闭时才会重置。虽然这可能会触发所有 db-aware 控件的重新读取，但在没有像 MIDAS ClientDataset 这样的中间缓存的情况下使用事务，这可以说仍然比数据库膨胀更好，在一些极少数情况下报告非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:13:08.470

我已经设法通过一些用户交互来解决问题。

首先，我正在检查用户是否正在编辑任何发票。

```
SELECT COUNT(*) FROM MON$RECORD_STATS WHERE MON$STAT_GROUP = 2 AND MON$RECORD_UPDATES <> 0 
```

然后，如果在上述查询执行过程中发现任何锁，我将向用户显示一条消息“请关闭所有打开的发票...”，并创建一个***failed.sql***文件，其中包含必须执行的查询，以防万一如果用户只是终止我的应用程序。

在下一次启动我的应用程序时，我检查***failed.sql***文件是否存在并尝试使用死锁检查再次执行它。

所以我的应用程序对用户来说变得有点烦人，但它不会做出任何可能给用户带来挫败感的无人看管的操作。

# c - 在每个模块中包含标题的良好做法

> ID：12797818
> 
> 赞同：2
> 
> 时间：2012-10-09T10:16:56.100
> 
> 标签：c

假设我在 C 中有 3 个用于 exe 的源文件。在这三个文件中以及在包含 main() 函数的源文件中包含像 stdio 这样的标头是否是一个好习惯？

如果否，那么正常做法是什么。

我读过一篇文章说标题应该包含结构的所有定义，#defines 等。但我不确定是否包含其他标准标题。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:17:52.033

仅包含您需要的标题。没有其他人。

* * *

包括不必要的附加标头可能/将产生不必要的更大的 exe/lib。你不需要那个。

此外，这可能会误导某些人 - 不要包含您不需要的代码。

它可能会导致名称冲突，例如 - 如果您包含具有相同名称的标题、包含函数。你也不需要这个。

`C`没有`namespace`s，所以你不需要包含名字，你不会使用。您可能想将它们用于其他事情。

如果您需要多个模块中的标题 - 包括它。除此以外：

*   如果它没有被间接包含，你会遇到编译器错误。
*   如果它被间接包含，这可能会给开发人员带来一些麻烦，他们将维护/支持您的代码

# java - Java 中的小玩意儿

> ID：12797835
> 
> 赞同：1
> 
> 时间：2012-10-09T10:18:04.557
> 
> 标签：java

来自[隐藏链接--沦为恶意网站]

> 当要移位的值（左操作数）是 int 时，只有右手操作数的最后 5 位用于执行移位。移位的实际大小是被 31 (0x1f) 屏蔽的右侧操作数的值。即移位距离始终在 0 和 31 之间（如果移位值 > 32 移位为 32 % 值）

```
35             00000000 00000000 00000000 00100011
31 -> 0x1f     00000000 00000000 00000000 00011111
&              -----------------------------------
Shift value    00000000 00000000 00000000 00000011   -> 3

-29            11111111 11111111 11111111 11100011
31 -> 0x1f     00000000 00000000 00000000 00011111
&              -----------------------------------
Shift value    00000000 00000000 00000000 00000011   -> 3 
```

那个的真实意义是什么？这是否意味着对于右移，您可以乘以 32 的最大值？这是为了防止溢出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:21:31.647

这意味着您只能移动 0 到 31 之间的值，因为`int`类型中有 32 位。对于 a`long`你只能移动 0 到 63 位。

如果您给它任何其他值，则移位量将被适当地`& 31`或`& 63`适当地掩盖。

例如，如果你想要一个扩展数字的低 7 位的符号，你可以使用

```
n << -7 >> -7 
```

无论`n`是`int`_`long`

* * *

从[JLS 15.19](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.19)

> 如果左侧操作数的提升类型是 int，则只有右侧操作数的五个最低位用作移位距离。就好像右手操作数经过位逻辑与运算符 & (§15.22.1) 与掩码值 0x1f。因此，实际使用的移位距离始终在 0 到 31 的范围内，包括 0 到 31。
> 
> If the promoted type of the left-hand operand is long, then only the six lowest-order bits of the right-hand operand are used as the shift distance. It is as if the right-hand operand were subjected to a bitwise logical AND operator & (§15.22.1) with the mask value 0x3f. The shift distance actually used is therefore always in the range 0 to 63, inclusive.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:23:51.670

It's not that the maximum you can multiply by is 32, it's **2^31**. (Bit shifting is exponentiation, not multiplication)

Considering that integers only have 32 bits, what would you expect to happen if you shifted by more then 31 bits anyway? You'd end up with the exact same result regardless of your input value - all of its its bits would have been shifted "off the end" - so it would serve no purpose whatsoever as an operation.

# java - 在java中解析动态字符串

> ID：12797845
> 
> 赞同：-1
> 
> 时间：2012-10-09T10:18:35.010
> 
> 标签：java, substring

我想解析这样的字符串：

`String str = 6,image micky.jpeg:7,image 02.jpeg:8,img3;`

在爪哇。其中`6`, `7`,`8`是 ids，动态字符串中可以有任意数量的 ids。

我想从这个字符串中找到 ids 数组如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:20:30.133

您可以使用带有“：”参数的拆分方法。[split(String regex)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)方法（用于 String*对象*）返回一个字符串数组，这些字符串在*对象*中由*regex*分隔。在这种情况下，它将返回一个数组，如：

> {"6,image micky,jpeg","7,image 02.jpeg","8,img3"}

然后你可以遍历这个数组并再次使用 split 。这次使用“，”作为参数。然后你需要从结果数组中获取第一个值。

```
String[] array = str.split(":");
for(int i=0;i<array.length;i++){
  String[] innerData = array[i].split(",");
  String id = innerData[0];
  System.out.println(id);
} 
```

或者

```
String[] array = str.split(":");
for(String s : array){
  String[] innerData = s.split(",");
  String id = innerData[0];
  System.out.println(id);
} 
```

在这两种情况下，字符串 id 都是您要查找的。

如果你想尝试

```
String[] array = str.split(","); 
```

首先，生成的数组如下所示：

> {"6","image micky.jpeg:7","image 02.jpeg:8","img3"}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:24:30.647

```
 String str = "6,image micky.jpeg:7,image 02.jpeg:8,img3";
    String[] array = str.split(":");

    int[] ids = new int[array.length]; // Array of ids.
    int index = 0;

    for (String s : array) 
    {
        String[] subArray = s.split(",");

        try
        {
            ids[index++] = Integer.valueOf(subArray[0]);
        }
        catch(NumberFormatException nfe)
        {
            nfe.printStackTrace();
        }           
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:21:24.953

您需要使用String类的[StringTokenizer](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/StringTokenizer.html)或[split(...) 方法。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:33:08.057

使用 StringTokenizer

```
 String str = "6,image micky.jpeg:7,image 02.jpeg:8,img3";

     StringTokenizer tk = new StringTokenizer(str, ":");
     while (tk.hasMoreElements()) {
        String elem = (String) tk.nextElement();

        StringTokenizer tk1 = new StringTokenizer(elem, ",");

         if (tk1.hasMoreElements()) {
                String elem1 = (String) tk1.nextElement();
                System.out.println(elem1.charAt(0));
         }      

     } 
```

# android - 这是使用服务的好用例吗？

> ID：12797847
> 
> 赞同：0
> 
> 时间：2012-10-09T10:18:43.250
> 
> 标签：android, android-service

我有一个监听广播和发送广播的应用程序。
当应用程序发送广播时，它期望从另一个应用程序返回广播。

我在接收器中捕获广播，然后将内容发送到一个名为“解码”的常规 java 类。这里我检查广播的内容，并在 mainActivity 上调用一个方法来启动另一个活动。

这个 mainActivity 没有真正的 UI，所以我正在考虑制作一个服务来替换它。所以我不是从解码中调用 mainActivity，而是创建一个服务并从该服务调用一个方法。

现在，由于我没有使用 android 服务的经验，这是使用服务的好案例吗？
我在哪里可以找到一个很好的 android 服务示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:27:30.803

你是对的，现在是使用 a 的时候了，`Service`因为你永远不应该`Activity`从`Activity`. 我会给你最基本`Service`的作为模板，然后你可以随意往里面加东西：

```
public class MyService extends Service{

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override 
    public void onCreate() {
        super.onCreate();
        Log.i("daim", "MyService has started ...");
        startMyMethod();    
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.e("daim", "MyService has stopped ...");    
    }

    public void startMyMethod(){
        // do your work
    }
} 
```

现在为了启动这个服务，你调用方法`startService`并停止它，调用方法`stopService`。现在，如果您想在服务内停止服务，例如当您的工作完成时。您可以`stopSelf();`在您的服务方法中调用。谷歌搜索`startService`并`stopService`查看需要哪些参数，以及如何调用它们，这取决于你是否在一个类中，如果你从一个类中调用它`Activity`，这就是你可能需要的地方。`Context`

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# ios - 带有 textLabel 、 detailTextLabel 和 UIImage 的 UItable 视图单元格

> ID：12797850
> 
> 赞同：1
> 
> 时间：2012-10-09T10:18:58.133
> 
> 标签：ios, objective-c, uiimageview, uitableview

我正在为我的视图实现一个表视图控制器。作为苹果文档中的具体细节，我`UITableViewCellStyleSubtitle`在表格中使用了我的单元格。

我需要的是一个单元格，左侧包含一个小头像，粗体`textLabel`和较小的`detailTextLabel`. 两者`textLabel`和`detailTextLabel`都是多行，而不仅仅是一行。

我正在尝试[链接](http://www.icodeblog.com/2010/11/18/making-smarter-table-view-cells/)中的教程，但模拟器只显示`textLabel`.

这是我的`cellForRowAtIndexPath:`方法：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 

static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }
cell.textLabel.text = [newsTitle objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont boldSystemFontOfSize:18];
    cell.textLabel.numberOfLines = ceilf([[newsTitle objectAtIndex:indexPath.row] sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap].height/20);

    cell.detailTextLabel.text = [newsDescription objectAtIndex:indexPath.row];
    cell.detailTextLabel.font = [UIFont systemFontOfSize:14];
    cell.detailTextLabel.numberOfLines = ceilf([[newsTitle objectAtIndex:indexPath.row] sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap].height/20);
return cell;
} 
```

这是`heightForRowAtIndexPath:`方法：

```
(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *titleString = [newsTitle objectAtIndex:indexPath.row];
    NSString *detailString = [newsDescription objectAtIndex:indexPath.row];
    CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];
    CGSize detailSize = [detailString sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

    return detailSize.height+titleSize.height;

} 
```

**注意：**数组`newsTitle`保留`textLabel`, `newsDescription`for的内容`textDetailLabel`。它还没有包含头像。如果有人可以帮助我解决此问题并将较小的头像添加到此表格视图单元格中，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:24:27.380

您应该创建一个自定义`UITableViewCell`子类，该子类具有 a 的属性，您可以使用您在 中选择的`UIImageView`来填充该属性。我建议将其添加为的子视图，然后将单元格的缩进调整为加上一些填充的宽度。这具有将单元格的全部内容向右移动以为图像腾出空间的效果：`UIImage``cellForRowAtIndexPath:``UIImageView``contentView``UIImageView`

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self) {
        // make room for the icon
        self.indentationLevel = 1;
        self.indentationWidth = kIconWidth + kIconPadding;

        _iconImageView = [[UIImageView alloc] initWithFrame:CGRectMake(kIconPadding, kIconPadding, kIconWidth, kIconWidth)];
        [self.contentView addSubview:_iconImageView];
    }

    return self;
} 
```

# c# - 如何在 C# 中将矩形数组复制到标准数组？

> ID：12797851
> 
> 赞同：0
> 
> 时间：2012-10-09T10:18:59.563
> 
> 标签：c#, .net

> **可能重复：**
> [从 C# 中的矩形数组中提取一维数组的最佳方法是什么？](https://stackoverflow.com/questions/232545/whats-the-best-way-to-extract-a-one-dimensional-array-from-a-rectangular-array)

如何将矩形阵列复制到标准阵列？当然没有迭代每个项目......

```
double[,] rectArray = new double[3,3];
double[] linearArray = new array[9]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:21:58.807

您可以使用`OfType`or`Cast`方法：

```
linearArray = rectArray.OfType<double>().ToArray(); 
```

或者：

```
linearArray = rectArray.Cast<double>().ToArray(); 
```

# api - rest api 允许值的最佳实践

> ID：12797871
> 
> 赞同：2
> 
> 时间：2012-10-09T10:19:52.000
> 
> 标签：api, rest, post

我正在实现一个 REST API，在其中添加资源时，某些 POST 字段只能具有特定值。例如，我有一个带有 usertype 字段的用户资源：这个 usertype 字段只能有 2 个值，即管理员和用户。

您如何允许开发人员以 RESTful 方式发现这些允许的值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:53:16.267

您将需要在您的媒体类型中定义枚举的概念。然后，您可以在超媒体控件中枚举允许的值，告诉他们在哪里发布什么。例如 GETting`/users`可能会返回以下内容：

```
<users href="/users">
    ... collection information and other controls you want to include ...
    <create href="/users" method="post">
        ... fields ...
        <usertype type="enum" cardinality="required">
            <administrator/>
            <user/>
        </usertype>
    </create>
</users> 
```

`create`元素是表单，元素`usertype`是表单字段，`administrator`并且`user`是枚举的有效值。根据此示例，您的媒体类型中将需要集合、表单、表单字段和枚举的结构。

这实际上是我喜欢 REST 的原因之一。由于此信息是在带内传递的，因此您可以轻松更改它而不会破坏（编写良好的）客户端。例如，只是说您想添加`editor`到枚举中，您可以添加它。老客户可以忽略它，新客户可以利用它。更好的是，您可以根据请求者的授权更改有效值。例如，如果请求者是管理员，那么他们将被赋予`administrator`和`user`作为有效值。如果请求者是 a`user`那么它们仅`user`作为有效选项给出。诺斯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:12:27.400

一个简单的解决方案可能是返回允许值的只读资源 /usertypes。

# postgresql - 初始化二维数组

> ID：12797872
> 
> 赞同：0
> 
> 时间：2012-10-09T10:19:52.190
> 
> 标签：postgresql, multidimensional-array

我需要用 m 行和 n 列初始化二维数组，但`m`可能`n`会改变。我在这里找到了这样的例子：

```
ARRAY[[NULL,NULL],[NULL,NULL]] 
```

但它用 2 行和 2 列初始化数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:58:53.413

我找到了答案：

```
array_fill(0,ARRAY[m,n]) 
```

# xcode - 为 Marmalade SDK 选择不同版本的 Xcode

> ID：12797873
> 
> 赞同：1
> 
> 时间：2012-10-09T10:19:54.420
> 
> 标签：xcode, marmalade

在 Windows 上有配置 Marmalade 的工具。我在 Mac 上找不到这样的工具。必须有一些脚本来做到这一点。

我的果酱版本是 6.0.6

现在它选择 Xcode 4.5 并抱怨 Marmalade 中没有 iPnone SDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:52:10.897

我能够让它与 xcode-select 一起工作

```
sudo xcode-select -switch /Developer/ 
```

我希望将新 Xcode 保留为默认值，但我希望仅将旧 xcode 与 Marmalade 一起使用。

如果有人会提供解决方案如何配置 Marmalade 以使用正确版本的 Xcode，那么我将其标记为正确版本。

# php - 数组上的逗号，通过 PHP 的最后一个值除外

> ID：12797875
> 
> 赞同：2
> 
> 时间：2012-10-09T10:19:55.213
> 
> 标签：php

> **可能重复：**
> [PHP，将数组回显为一串逗号分隔值](https://stackoverflow.com/questions/4857972/php-echoing-an-array-into-a-string-of-comma-seperated-values)

对于有经验的 PHP 编码人员来说，这似乎应该是相当简单的......我不是。

这是我到目前为止所拥有的：

```
<?php echo $cfs->get_labels('name'); ?>: <?php $values = $cfs->get('name');
    foreach($values as $value => $label) {echo $value . ', ';}
?> 
```

我怎样才能避免在这样的最后一个值上打印逗号？

我提到过[这个](https://stackoverflow.com/questions/7376171/removing-last-comma-in-php)和类似的，但似乎无法破解它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T10:20:51.657

您可以使用`echo implode(',', $values);`而不是 foreach 循环。

编辑：哎呀，我刚刚注意到您输出了密钥，因此您可以使用：

`echo implode(',', array_keys($values));`

# jquery - 动态加载jquery DataTable

> ID：12797877
> 
> 赞同：4
> 
> 时间：2012-10-09T10:20:01.100
> 
> 标签：jquery, datatables

我打算使用 Jquery DataTable 来显示用户收件箱。当他单击页码或下一个或上一个按钮时，我想部分加载用户消息。

从我最初的研究来看，我认为 jquery DataTable 在呈现之前需要所有表数据。

有谁知道是否有任何可能的方式来根据用户请求加载数据表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:23:00.843

不，您可以轻松地将数据添加到 DataTable，只需查看文档：

[http://datatables.net/api#fnAddData](http://datatables.net/api#fnAddData)

或[http://datatables.net/release-datatables/examples/server_side/server_side.html](http://datatables.net/release-datatables/examples/server_side/server_side.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-30T11:21:07.167

您可以动态地重新初始化 Datatable 上的数据。

```
// clear all Datatable instance object 
$('#sample').DataTable().clear();

// re-initialize array values using foreach
sample_array = ['car','apple']
$.each(sample_array, function( index, value ) {
      $('#sample').dataTable().fnAddData( [value]);
}); 
```

# java - cas自定义注销

> ID：12797879
> 
> 赞同：5
> 
> 时间：2012-10-09T10:20:09.800
> 
> 标签：java, spring, spring-security, cas

在实现 jasig-CAS 时，我遇到了下一个问题：我想实现注销。现在它工作正常，但我希望 CAS 服务器在注销到请求来自的服务器后重定向用户（例如，`http://localhost:8080/myApp`）。我试图在安全上下文中添加“服务”，但这里没有发生任何事情是我的弹簧安全上下文的一部分：

```
<security:logout logout-url="/logout"
                        logout-success-url="https://localhost:9543/cas-server-webapp-3.4.10/logout?service=http://localhost:8080/myApp" 
                        invalidate-session="true" /> 
```

所有配置和程序均取自[本手册。](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/cas.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:25:00.500

这对默认有帮助吗`cas-servlet.xml`

```
 <bean id="logoutController" class="org.jasig.cas.web.LogoutController"
    p:centralAuthenticationService-ref="centralAuthenticationService"
    p:logoutView="casLogoutView"
    p:warnCookieGenerator-ref="warnCookieGenerator"
    p:ticketGrantingTicketCookieGenerator-ref="ticketGrantingTicketCookieGenerator"
    p:servicesManager-ref="servicesManager"
    p:followServiceRedirects="${cas.logout.followServiceRedirects:false}"/> 
```

看最后一行`${cas.logout.followServiceRedirects:false}`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-19T12:58:57.610

**cas-servlet.xml**

```
 <bean id="logoutController" class="org.jasig.cas.web.LogoutController"
        p:centralAuthenticationService-ref="centralAuthenticationService"
        p:logoutView="casLogoutView"
        p:warnCookieGenerator-ref="warnCookieGenerator"
        p:ticketGrantingTicketCookieGenerator-ref="ticketGrantingTicketCookieGenerator"
        p:servicesManager-ref="servicesManager"
        p:followServiceRedirects="${cas.logout.followServiceRedirects:true}"/> 
```

**在注销网址中**

```
<a href="/cas/logout?service=http://localhost:8080/myApp" title="Log Out">Logout</a> 
```

# asp.net-mvc - 从视图模型返回单个用户的详细信息

> ID：12797891
> 
> 赞同：0
> 
> 时间：2012-10-09T10:20:42.127
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我有一个视图模型，其中包含用户详细信息以及来自名为 User 和 UserDetails 的两个不同模型的扩展用户详细信息。

在我的 UsersController 中，我的 Details 方法有以下内容 -

```
public ViewResult Details(RegisterViewModel viewModel)
        {

            User currentuser = context.Users
                .Include("UserDetails")
                .Where(i => i.UserName == viewModel.UserName)
                .First();

            currentuser.UserDetails = new UserDetails();

            return View(currentuser);   
        } 
```

在我的详细信息视图中，我从 -

```
@model TRS.ViewModels.RegisterViewModel 
```

然后尝试从视图模型中列出详细信息，例如

```
<tr>
    <td>User Name</td>
    <td>@Model.UserName</td>

</tr> 
```

但是当我转到用户的详细信息页面时，我收到了这个错误 -

```
Server Error in '/' Application.

Sequence contains no elements

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Sequence contains no elements

Source Error: 

Line 37:         {
Line 38:             
Line 39:             User currentuser = context.Users
Line 40:                 .Include("UserDetails")
Line 41:                 .Where(i => i.UserName == viewModel.UserName) 
```

我显然做错了什么，但一直找不到。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:27:26.803

你做错了很多事情。第一个是您的 LINQ 查询，您在其中搜索数据库`UserName`中匹配的记录`viewModel.UserName`。但是，如果当您尝试`.First()`在最后调用该方法时此查询未返回任何结果，您将得到一个异常。所以你可以测试查询是否返回结果：

```
User currentuser = context.Users
    .Include("UserDetails")
    .Where(i => i.UserName == viewModel.UserName)
    .FirstOrDefault();
if (currentuser == null)
{
    // no records were found in the database that match this query
    return HttpNotFound();
} 
```

您的代码有问题的另一件事是您的视图是强类型的，`TRS.ViewModels.RegisterViewModel`但您的`Details`控制器操作正在将`User`模型传递给无法工作的视图。您需要将视图模型传递给它。

此外，这个细节操作是如何调用的以及作为参数传递的视图模型的值是什么也不是很清楚。您确定将任何值传递给请求吗？否则，所有属性都将为空，这可能会解释为什么您的 LINQ 查询找不到任何记录。

# r - 使用 scale_x_reverse 时不显示小中断

> ID：12797892
> 
> 赞同：1
> 
> 时间：2012-10-09T10:20:42.083
> 
> 标签：r, graph, ggplot2

当我使用便利功能时，我无法获得`minor_breaks`做任何事情的论据`scale_x_reverse`

```
df <- data.frame(x=c(10,20,40,90,300),y=c(1,2,7,2,7)) #define data frame

# scale_x_continuous uses minor_breaks just like it should
ggplot(df, aes(x,y)) + geom_line() +
    scale_x_continuous(breaks=c(10,50,100,150,200,250,300), minor_breaks=10:300)

# scale_x_reverse seems to ignore the minor_breaks option
ggplot(df, aes(x,y)) + geom_line() + 
    scale_x_reverse(breaks=c(10,50,100,150,200,250,300), minor_breaks=10:300) 
```

有什么方法可以反转 X 轴但仍然可以自定义小中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:19:14.897

这对我来说就像一个错误。`scale_x_reverse`只是 with 的包装`scale_x_continuous`器`trans = reverse_trans()`。现在，`reverse_trans`通过简单地定义一个反转每个值的符号的函数来完成它的工作：`function(x) -x`.

所以凭直觉，我尝试了这个：

```
ggplot(df, aes(x,y)) + 
    geom_line() + 
    scale_x_reverse(breaks=c(10,50,100,150,200,250,300), 
                    minor_breaks= -c(25,75,125)) 
```

可能很容易解决。您可以考虑在 github 上提交错误报告。

# java - REST 还是 SOAP 调用？

> ID：12797897
> 
> 赞同：0
> 
> 时间：2012-10-09T10:21:01.083
> 
> 标签：java, web-services, rest, soap, crm

我很少使用我的应用程序中的 http 调用 CRM 应用程序。我需要知道是通过 SOAP 还是 REST。我能知道它是通过 REST 还是 SOAP 使用 url 吗？或者有没有办法找到如何确定协议。代码片段如下：

```
HttpRequestBase request = new HttpGet(url);
request.setParams(/*some HttpParams*/);

ResponseHandler<String> responseHandler = new UnicodeResponseHandler();
String response = httpClient.execute(request, responseHandler);

/* where httpClient is an instance of org.apache.http.client.HttpClient */
/* where url is a http url */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:04:20.847

我对这个问题有点困惑。有几种不同的方式来查询 Crm。带 OData 的 REST、带 WSDL 的 SOAP、不带 WSDL 的 SOAP。

您可以很容易地从 Url 中分辨出区别，因为存在不同的 SOAP 和 REST 端点。查看设置 > 自定义 > 开发人员资源。

![在此处输入图像描述](../Images/2b3610937d82ec4a420d93121b932e0e.png)

我真的不明白这种情况，你要动态地使用一个（或两个？），因为每个的用法都完全不同。

如果这只是关于 CRM 2011 SOAP & REST 的一般性问题，我建议您查看[MSDN](http://msdn.microsoft.com/en-us/library/gg490659.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:27:08.360

基本上`HttpClient`可用于进行 REST 和 SOAP 调用，请查看[此链接](http://polimetla.com/2011/04/27/consuming-web-service-using-apache-httpclient-and-soap-message/)以了解 SOAP 调用用法。

主要区别在于您发出*请求*和解析*响应*的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:25:18.567

即 REST，您正在创建一个 http get 并设置 HTTP 参数（不包括soap）并获得响应。响应可以是普通的旧字符串、json 或 xml...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:25:46.660

据我所知，没有这样的方法。

如果你很幸运 - 如果这是 SOAP Web 服务，URL 将返回给你 WSDL，但这不是强制性的。您可能会尝试在 URL 中添加“ `?wsdl`”——但再一次，这是 Java 的一些 SOAP Web 服务框架的约定——但根据规范仍然不是强制性的。

SOAP 有效负载基于 XML，因此如果 URL 返回其内容类型不是“application/xml”的内容，您可能会认为这是 REST Web 服务。此外，SOAP 仅使用 POST 方法，而 REST 使用 GET，以及其他 HTTP 方法 - PUT 和 DELETE。

例如，在您的代码中，您使用的是 GET 方法，因此我们可能认为这是 RESTFul Web 服务，但谁说这不是您的代码中的错误，而您实际上需要在这里使用 POST？但是再一次 - 这种方法并不安全，因为 RESTFul Web 服务可能会返回 XML 格式的数据。

您将必须实现一些发现机制，或者可能使用您的服务的设置主机/IP 地址来配置您的应用程序，并为每个服务确定配置中这是 SOAP 还是 REST。

# tsql - 是否允许在您正在更新的表中子选列值？

> ID：12797901
> 
> 赞同：1
> 
> 时间：2012-10-09T10:21:07.137
> 
> 标签：tsql, moving-average, set-based

我正在创建一个存储过程来计算事务表中每个备件的移动平均成本 (MAC)。它是某种自动检查和修复每一行的 MAC。我正在使用基于集合的方法，因为我避免使用光标。

我的交易表有以下几列：

Transaction No -- 记录该行的交易编号 TransacType -- 交易类型值将是 BEG (Beginning Balance), ISS (for Issuance), 和 RR (for Received Stocks)

库存号 -- 产品编号

成本——库存编号的每单位成本

数量——交易的数量

MAC -- 移动平均成本

规则： - 如果事务是 RR，Sproc 将计算 MAC。- 随后所有 ISS 交易的成本将等于最新 RR 的 MAC。

样品表

```
-----------------------------------------------------------------------
TransacNo     TransacType   StockNo Cost    Qty MAC 
-----------------------------------------------------------------------
0               BEG     AE1 450.00  10  450.00  
1               RR      AE1 460.00  05  453.33
2               ISS     AE1 453.33  01  ------
3               RR      AE1 460.00  05  455.09
4               ISS     AE1 455.09  01  ------
5               BEG     AE2 450.00  10  450.00
6               RR      AE2 460.00  05  453.33
7               ISS     AE2 453.33  01  ------
8               RR      AE2 460.00  05  455.09
9               ISS     AE2 455.09  01      ------
------------------------------------------------------------------------ 
```

我的移动平均成本公式：

```
Moving Average Cost = ((Latest MAC * Current OnHand Qty) + (RR Cost * RR Qty))
            ---------------------------------------------------------------
                    (Current OnHand Qty + RR Qty) 
```

我的 MAC 修复代码：

```
Declare @LatestMAC decimal(18,2);
set @LatestMAC = 0.00

Declare @CurrentOnHand int;
Set @CurrentOnHand = 0

Declare @TotalISS int;
Declare @TotalRR int;

Update TransacTable
Set

@TotalISS =  
            ISNULL((
            Select SUM(Qty) 
            from 
                TransacTable TT 
            where 
                TT.TransacType = 'ISS' and
                TT.StockNo = StockNo and
                TT.TransacNo < TransacNo),0),   
@TotalRR =  
            ISNULL((
            Select SUM(Qty) 
            from 
                TransacTable TT 
            where 
                TT.TransacType = 'RR' and
                TT.StockNo = StockNo and
                TT.TransacNo < TransacNo),0),   

@LatestMAC = (Select top(1) ISNULL(MAC,0) 
            from 
                TransacTable TT 
            where 
                TT.TransacType = 'RR' and 
                TT.StockNo = StockNo and 
                TT.TransacNo < TransacNo 
            Order by 
                TT.TransacNo desc),

@CurrentOnHand = @TotalRR - @TotalISS,

MAC = 
Case
    WHEN TransacType = 'BEG'
        THEN MAC
    WHEN TransacType = 'RR'
        THEN ((@LatestMAC * @CurrentOnHand) + (Cost * Quantity) / (@CurrentOnHand * Quantity))
    else NULL
End,

Cost = 
Case
    When TransacType = 'ISS'
        THEN @LatestMAC
    else Cost
end 
```

我的问题是 MAC 方程所需的变量（TotalISS、TotalRR、CurrentMAC）返回 NULL。

是否不允许在您正在更新的表中选择列值？或者我的解决方案本身有错误？我基于这个例子得出了我的解决方案 -[这里。](http://www.intersoftdevelopment.com/IDI-ASPNET/Free-Source-Code.aspx?CodeID=30&Code=SQL%20Server%20Set-Based%20Moving%20Averages%20no%20Cursor%202) 我不想使用光标，所以我使用了这种方法。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:44:28.293

这看起来太复杂了。

尝试

```
update yourtable
set
    mac =  ss  
from yourtable t1
    outer apply (
         Select 
              SUM(cost*quantity* case transactype when 'iss' then -1 else 1 end)
                  /SUM(quantity * case transactype when 'iss' then -1 else 1 end) as ss 
              from yourtable 
              where transacno <= t1.transacno 
              and stockno = t1.stockno
              ) t2 
```

# c# - 在 Azure 上部署使用 ACS 的 MVC 应用程序

> ID：12797903
> 
> 赞同：0
> 
> 时间：2012-10-09T10:21:16.583
> 
> 标签：c#, asp.net, azure

我是 Azure 软件开发的新手。我开发了一个 MVC Web 应用程序。我还使用了一个通过 CRUD 操作实现的简单数据库。我已经使用我的登录名在 Azure 云上部署了我的 MVC。我还将我的数据库迁移到了 Azure 云。我按照以下链接：

[https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database)

我还必须实施使用 ACS 的身份验证。接受 google 和 yahoo 凭据。我可以按照下面的帖子成功地做到这一点：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg429779.aspx)

但是 ACS 是在 localhost 上实现的。我的意思是在模拟器上运行良好，但我无法在 Azure 环境中发布使用 ACS 的 Web 应用程序。

我尝试通过更改为托管在云上的实际 Web 应用程序名称来更改我创建的所有 localhost 引用，但没有运气。

请帮助我如何部署使用 ACS 托管在 Azure 云环境中的 MVC 应用程序。

任何链接也将提供帮助或任何信息。提前非常感谢。我被这个打了4个小时...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:57:52.670

你需要做两件事：

*   在 ACS 中，确保信赖方应用程序使用您的公共 URL（您的 cloudapp.net 地址或自定义 DNS）。
*   在您的 web.config 中，将来自 localhost 的所有引用替换为您的公共 URL（您也可以[按照此处所述](http://fabriccontroller.net/blog/posts/a-few-tips-to-get-up-and-running-with-the-azure-appfabric-access-control-service)自动执行此操作）。

# windows - RegDeleteKey 和 RegDeleteKeyEx

> ID：12797905
> 
> 赞同：2
> 
> 时间：2012-10-09T10:21:30.580
> 
> 标签：windows, winapi, registry

我正在编写一个应用程序，它将使用 API **RegDeleteKey**或**RegDeleteKeyEx**递归删除一些注册表项。困扰我的是**RegDeleteKeyEx**没有为低于**XP x64 Professional**定义，所以现在这个限制限制了我的应用程序。有什么方法可以让我同时使用从 XP x86 到 Win7 x64 的两种 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:25:44.617

为了让您的应用程序在`RegDeleteKeyEx`不存在的旧系统中运行，您需要避免静态链接到此 API。也就是说，您不直接使用此函数，而是在运行时通过`GetProcAddress`. 如果成功，则 API 可用并且您可以使用它（或者您可以检查操作系统版本）。

看看这里：[如何使用 RegDeleteKeyEx](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/43cc1a76-4295-49bf-b2f9-da90dcefd82b)：

```
 hAdvAPI32 = LoadLibrary(_T("AdvAPI32.dll"));
   ASSERT(hAdvAPI32 != NULL);
   _RegDeleteKeyEx = (PFN_RegDeleteKeyEx)GetProcAddress(hAdvAPI32 , "RegDeleteKeyEx");
   ASSERT(_RegDeleteKeyEx != NULL); 
```

`RegDeleteKey`可以直接使用，因为它存在于所有目标平台中。

# r - 使用 RPostgreSQL 从 R 中的数据框创建临时表

> ID：12797909
> 
> 赞同：2
> 
> 时间：2012-10-09T10:21:38.190
> 
> 标签：r, postgresql

我有一个数据框，我需要使用 RPostgreSQL 包将其写为 R 中的**临时表**。

例子：

```
>data(USArrests)
#Assuming that we have already established a connection to the postgres db
#Let conn be the postgres connection object
>dbWriteTable(conn, "temp_table_data", USArrests, temp.table=TRUE) 
```

这不起作用。参数 temp.table 似乎被忽略了。

如果没有办法处理dbWriteTable，是否有办法将数据帧写为临时表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-16T10:29:37.113

你可以使用这个参数 `is.temp = TRUE`并且它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:17:34.517

我能想到的最简单的方法是将数据帧作为结果集返回，并使用用 plpgsql 编写的包装函数将其写入临时表。这意味着您必须将逻辑分解为计算层和存储层。

# iphone - 应用条件：shouldRestoreApplicationState：要调用的函数

> ID：12797911
> 
> 赞同：0
> 
> 时间：2012-10-09T10:21:49.830
> 
> 标签：iphone, objective-c, ios, cordova

我对IOS应用程序开发有点陌生。我正在使用科尔多瓦 2.1.0。我有一个基本问题。何时应该`application:shouldSaveApplicationState:`调用函数来保存应用程序状态？同样，什么时候应该`application:shouldRestoreApplicationState:`调用恢复状态/数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:25:47.257

您不会调用[`application:shouldSaveApplicationState:`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW34)系统执行的方法。当您的应用程序即将关闭时，系统将调用这些方法，因此您可以保存应用程序的状态。

然后，当您的应用程序再次启动时，系统将调用[`application:shouldRestoreApplicationState:`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW37)恢复您的应用程序状态。

有一个例外，如果用户杀死你的应用程序，那么状态也是删除。

# android - 应用内结算 GoogleTV

> ID：12797913
> 
> 赞同：2
> 
> 时间：2012-10-09T10:21:52.613
> 
> 标签：android, in-app-billing, google-tv, sony

我尝试使用应用内计费制作我们现有应用的 GoogleTV 版本。在平板电脑和手机上一切正常，但在 Google TV 上运行时遇到问题。该应用程序卡在计费过程中。

我只是尝试设置谷歌的地牢示例来测试基本功能。它适用于手机和平板电脑，但我在 GTV 设备上收到以下消息：

> ## 无法进行购买
> 
> 市场计费服务目前不可用。您可以继续使用此应用，但无法进行购买。

我重新启动了设备并进行了出厂重置，但没有任何更改。

现在我的问题。

索尼 NSZ-GS7 是否支持应用内计费？怎么了？

**设备：**索尼 NSZ-GS7 | **操作系统：** Android 3.2 | **谷歌播放：** 1.2.0 | **我的应用程序：** 5.0.12

**更新：**

Gaunt Face 的向导帮助了我。地牢示例现在开始。但是，如果我进行购买，应用内计费会在 30 秒后卡在“授权购买...”，我得到“应用程序我的应用程序（处理 com.android.vending）没有响应”。

这与我的应用程序遇到的问题相同。

索尼 NSZ-GS7 是否仍然存在错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:11:15.940

Google TV 确实支持应用内计费，但​​不支持订阅计费。

请参阅此处以获取有关使演示工作的指南：[http ://www.gauntface.co.uk/blog/2012/08/15/google-tv-in-app-billing/](http://www.gauntface.co.uk/blog/2012/08/15/google-tv-in-app-billing/)

在 GTV 上安装原生 Google Play 商店后，订阅计费将生效，该商店应该很快推出：http: [//googletv.blogspot.co.uk/2012/10/google-play-movies-tv-shows-and-music .html](http://googletv.blogspot.co.uk/2012/10/google-play-movies-tv-shows-and-music.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:28:13.493

`Does the Sony NSZ-GS7 support In-app billing?`不

“如果您的设备运行的是 Android 3.0，则应用内结算需要 5.0.12（或更高版本）”

更多[阅读。](http://developer.android.com/guide/google/play/billing/billing_testing.html)

# magento - Magento 1.7.0.2 清除缓存

> ID：12797918
> 
> 赞同：1
> 
> 时间：2012-10-09T10:22:00.693
> 
> 标签：magento, caching

我在清除 Magento 缓存版本 1.7.0.2 时遇到问题。

我做了所有可能的清除缓存操作，但 js、css、phtml 更改不适用。

细节：

我对 , 进行了更改`menu.js`，`view.phtml`但`custom.css`没有更改

缓存操作：

*   刷新 Magento 缓存
*   从缓存管理列表中禁用所有缓存
*   刷新 Javascript/CSS 缓存
*   FTP 手动清除 /var/cache 文件夹和 /var/session

所以我被困在这里，不知道该怎么办？？

另外，也许它是相关的，我无法访问 Magento Connect 管理器，被重定向到 404 页面，我已经设置了权限 755 个文件夹 644 个文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:08:41.697

如果您的所有步骤都已完成。检查您的控制器和布局。

**js 和 css 是否已经添加到该布局中？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:35:21.583

测试站点时，请在管理员中禁用 CSS 和 JS 压缩。压缩文件将保存在另一个目录中。

查看**/media/css**和**/media/js**清理这两个文件夹。如果您确定您已编辑正确的文件。

但我认为你编辑了错误的文件？

# objective-c - 将方法签名中的 NSString 约束到一组已定义的常量

> ID：12797926
> 
> 赞同：2
> 
> 时间：2012-10-09T10:22:36.887
> 
> 标签：objective-c

我并没有试图实现任何特定的目标，只是尝试使用 Objective-c。

我有一个采用 NSString 的方法。最近我添加了一组 NSString 常量。非常像枚举，在签名中您可以引用枚举名称，我想知道是否有一种方法在编译时将 NSString const 分组为一个通用名称，以便放入方法签名中，而无需编码一组“if- else' 在方法本身中。

我的意思是，这就是我实际在做的事情：

```
static *const MyConstOne = @"const1";
static *const MyConstTwo = @"const2";
static *const MyConstThree = @"const3";

-(void)myMethod:(NSString*)value {

  if(value==MyConst1) {
    // do something...
  }

  // do other check...

  // if I am here value does not correspond to any const
} 
```

这将是所需的方法，这显然是错误的：

```
-(void)myMethod:(MyConst*)const; 
```

# objective-c - Objective C协议循环依赖？

> ID：12797927
> 
> 赞同：8
> 
> 时间：2012-10-09T10:22:38.923
> 
> 标签：objective-c, ios, interface, protocols

我在自己的头文件中有一个协议A，用作接口。然后我有两个具体的类，它们是该协议的不同实现。

现在，在我的 ViewController 中，我使用它来声明 id 类型的属性，它允许我在 VC 对此一无所知的情况下交换实现。

我还有protocolB，用于将这两个实现对象的委托调用委托给VC。

问题是我有循环依赖。

在协议 A 中，我需要声明一个 id 类型的“委托”属性。在协议 B 中，委托方法正在向调用者发送引用，调用者是 id 类型的对象...

有更好的设计吗？

* * *

更新示例，也许对其他人有帮助。

**协议头：**

```
#import <Foundation/Foundation.h>

 /*!
 Abstract interface for any Provider 
 */

@protocol DataProviderDatasource <NSObject>

@required
@property (nonatomic) id <DataProviderDelegate> delegate; 
-(void)update;

@end 
```

**协议B头**

```
#import <Foundation/Foundation.h>
#import "DataProviderDatasource.h"
/*!
 Protocol that each  Data Provider implements to make delegate calls to notify its     delegate about data management operations.
 */

@protocol DataProviderDelegate <NSObject>

-(void)dataProviderWillUpdate:(id<DataProviderDatasource>)dataProvider;
-(void)dataProviderdidUpdate:(id<DataProviderDatasource>)dataProvider; 
```

@结尾

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T10:28:14.570

像类一样，您可以转发声明协议：

```
@protocol MONProtocolB; // << forward declaration -- #import not required

@protocol MONProtocolA
- (void)setDensity:(NSValue<MONProtocolB>*)pValue;
                           ^^^^^^^^^^^^ << compiler recognizes this as an
                                           objc protocol
@end 
```

那么当编译器看到协议名称和循环依赖被破坏时，它就不会出错（除非你的协议都来自另一个当然是愚蠢的）。

然后，您可以`#import`在任何有物理依赖的地方使用 MONProtocolB。

# vim - 重新打开会话后 Vim 状态行失去颜色

> ID：12797928
> 
> 赞同：2
> 
> 时间：2012-10-09T10:22:45.353
> 
> 标签：vim, statusline

我在 vim 中稍微调整了我的状态栏，并开始喜欢它。我使用 autosession.vim，所以当我重新打开时，我打开了相同的文件，但状态行会丢失所有颜色设置。如果我擦除缓冲区并重新打开，颜色又回来了（或者，如果我来源 ~/.vimrc）。我做错了什么还是只是缓冲区的性质，在重新打开会话后状态行会丢失颜色设置？图片如下： ![有色](../Images/56ec38e5171ff81aaec811f8407d754d.png)

![重新开放后](../Images/5fcd3682ab99aa860a245b13ef963a6e.png)

值得一提的是，我在 ArchLinux 上使用了 gvim。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:54:07.653

`:syntax on`当会话恢复时，您的自定义突出显示可能会因为命令而丢失。除了像这样定义您的自定义突出显示：

```
:hi User1 guibg=Blue 
```

添加一个恢复它们的自动命令：

```
:autocmd ColorScheme * hi User1 guibg=Blue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:10:19.963

为了解决这个问题，在你的 .vimrc 中为每个用户颜色添加以下内容：

```
autocmd SessionLoadPost * hi User1 guifg=#112005 guibg=#009099 
```

SessionLoadPost 在加载会话文件并重新激活您的自定义颜色后触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:29:33.900

您可以通过以下方式调试覆盖状态行设置的内容

```
:verbose set statusline? 
```

这将告诉您该值是上次设置的

```
 statusline=.....
    Last set from C:\Program Files\Vim\_vimrc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-05T23:53:07.573

## - 最简单稳定的解决方案 -

### 创建一个 shell 函数来打开一个 vim 会话并`.vimrc`在会话完成加载后获取源代码，这样您就可以恢复所有的设置：

打开你的shell配置文件（`.bashrc`或`.zshrc`等）并编写这个函数：

```
vims() {
  vim -S "$1" -c 'source ~/.vimrc'
} 
```

保存并获取 shell 配置文件（或重新启动 shell）后，您将始终能够使用命令打开 vim 会话...

`vims mysession.vim`

……完成了！:)

# java - 如何在 JBOSS 7 上部署简单的 war 文件？

> ID：12797931
> 
> 赞同：4
> 
> 时间：2012-10-09T10:23:02.670
> 
> 标签：java, jakarta-ee, jboss, jboss7.x, jboss5.x

我成功部署了一个简单的war文件（vivek.war），其中包含一个简单的index.jsp文件`Jboss-5.X.X and Jboss-6.X.X.` 我只是将war文件放在`server\default\deploy`

然后去了`localhost:8080/vivek/index.jsp`，一切都很好。

但同样，对于 Jboss-as-7.1.1，我以独立方式部署了 war 文件`standalone\deployments`并启动`\bin\standalone.sh`，然后转到`localhost:8080/Hello/index.jsp`不显示该文件。它显示`HTTP Status 404-/vivek/` `(description The requested resource (/axis2/) is not available.)`在浏览器中。

在 Jboss-as-7.1.1 上部署一个简单的 war 文件的过程是什么，以及我如何进入浏览器。

如果没有人有想法请帮助我？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T10:55:56.160

您应该在部署目录中放置一个空的标志文件**warname** .dodeploy（例如vivek.war.dodeploy）。

有关标志文件的更多信息，请参阅部署目录中的 README.TXT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:57:15.193

嗯，我的 JBoss 7.1.1 不需要部署目录中的 .dodeploy 文件。只需将 .war 或 .ear 或 ejb.jar 复制到部署目录以供服务器启动部署过程就足够了。请提供 server.log 以查看详细信息。您是否在 META-INF/web.xml 或 application.xml 中设置了上下文根标签？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T08:50:16.367

在 Jboss AS7 中部署 war 项目时，可以将所谓的已分解 Web 应用程序（即未压缩）或压缩的 Web 应用程序资源 .WAR 文件复制到此位置 ${jboss.server.base.dir}/standalone/部署/

*   当一个人选择在非压缩或爆炸的目录表单中部署项目时，需要指定标记文件.Dodeploce，例如vivek.war.dodeploy，如果文件夹名称是vivek.war
*   当 One 选择以压缩的 Web 应用程序资源形式部署项目时，不需要标志文件。

*您可以参考以下资源以获取更多详细信息
1\. 一个有用的链接如下[JBoss AS 7 中的部署链接](https://docs.jboss.org/jbossweb/7.0.x/deployer-howto.html)
2\. 有关详细信息，您可以查看 ${jboss.server.base.dir}/standalone/ deployments/README.txt 文件位于该位置*

> 非压缩意味着它是您从 jar 文件解压缩后获得的简单目录结构，目录结构示例如下 -

```
 vivek.war   
      |-index.jsp    
      |- WEB-INF   
          |- web.xml 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-14T08:20:19.720

它非常简单，复制您的战争并将其粘贴到您的目录中，然后从您的目录中`standalone\deployments`运行。如果您在 Linux 上，请从您的目录运行。`standalone.bat``bin``standalone.sh``bin`

# ios6 - AFURLConnectionOperation + NSURLConnection 在 iOS5.1 & iOS6.0 下表现不同？

> ID：12797932
> 
> 赞同：1
> 
> 时间：2012-10-09T10:23:04.353
> 
> 标签：ios6, nsurlconnection, nsurlrequest, afnetworking, nsurlcache

我看到 iOS6、AFNetworking 和 NSURLConnection 的问题没有任何意义。

重现问题

*   提出请求，任何请求，并确保其成功
*   关闭互联网连接
*   再次启动应用程序并再次发出相同的请求

**iOS5.1**

> ```
> 2012-10-09 15:30:43.667 CACHE TEST[3811:1bb03] <NSMutableURLRequest http://myserver.in/someImage.png>
> 2012-10-09 15:30:43.674 CACHE TEST[3811:1bb03] -[AFURLConnectionOperation connection:didReceiveData:]
> 2012-10-09 15:30:43.675 CACHE TEST[3811:1bb03] -[AFURLConnectionOperation connectionDidFinishLoading:] 
> ```

数据被拾取[从我假设的 NSURLCache]，并被`connectionDidFinishLoading`调用。

**iOS6.0**

> ```
> 2012-10-09 15:32:34.578 CACHE TEST [3877:1e903] <NSMutableURLRequest http://myserver.in/someImage.png>
> 2012-10-09 15:32:34.578 CACHE TEST [3877:1e903] -[AFURLConnectionOperation connection:didFailWithError:] 
> ```

数据未被拾取[我验证了 NSURLCache 的 Cache.db 确实在 sqlite db 中有该图像作为 blob]，并被`connection:didFailWithError:`调用。

我在 API 差异中没有发现任何表明NSURLConnection、NSURLRequest 或 NSURLCache有任何*相关变化的东西。*

结果是，当应用程序在 5.1 上离线运行时调用成功块，而在 iOS6.0 上调用失败块

**更新**

编写了一个测试来确认 NSURLConnection、NSURLRequest 或 NSURLCache 的行为没有不同。

[在http://github.com/abhinittiwari/NSURLCacheTest](http://github.com/abhinittiwari/NSURLCacheTest)找到它

# java - Jpanel在重绘时调整大小

> ID：12797933
> 
> 赞同：0
> 
> 时间：2012-10-09T10:23:20.173
> 
> 标签：java, swing, bufferedimage, jslider

我在下面的代码中执行了缩放操作。表格中的两个滑块是缩放仿射变换的 X 和 Y 参数。我的问题是当我更改图像正在缩放的​​滑块时，我如何动态调整我的 jpanel 的大小，该图像正在其中被绘制。

```
/*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package newpackage;

    import java.awt.Graphics;
    import java.awt.Image;
    import java.awt.geom.AffineTransform;
    import java.awt.image.AffineTransformOp;
    import java.awt.image.BufferedImage;
    import java.io.File;
    import java.io.IOException;
    import java.util.logging.Level;
    import java.util.logging.Logger;
    import javax.imageio.ImageIO;

    /**
     *
     * @author ABC
     */
    public class Swon extends javax.swing.JFrame {

        final BufferedImage img;
        /**
         * Creates new form Swon
         */
        public Swon() throws IOException{
           BufferedImage im=ImageIO.read(new File("C:/Users/ABC/Desktop/I-RIX2012_Final_logo_out.jpg"));
           this.img=new BufferedImage(im.getWidth(),im.getWidth(),BufferedImage.TYPE_BYTE_GRAY);
           this.img.getGraphics().drawImage(im, 0, 0, null);
            initComponents();
        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">
        private void initComponents() {

            jPanel1 = new javax.swing.JPanel(){

                // @Override

                //    public void paint(Graphics g)
                //    {
                    //        super.paint(g);
                    //        g.drawImage(img.getScaledInstance(this.getWidth(), this.getHeight(), Image.SCALE_FAST),0,0,null);
                    //    }

            };
            jSlider1 = new javax.swing.JSlider();
            jSlider2 = new javax.swing.JSlider();

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

            jPanel1.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
            jPanel1.addComponentListener(new java.awt.event.ComponentAdapter() {
                public void componentResized(java.awt.event.ComponentEvent evt) {
                    jPanel1ComponentResized(evt);
                }
            });

            javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
            jPanel1.setLayout(jPanel1Layout);
            jPanel1Layout.setHorizontalGroup(
                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 268, Short.MAX_VALUE)
            );
            jPanel1Layout.setVerticalGroup(
                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 209, Short.MAX_VALUE)
            );

            jSlider1.setMaximum(5);
            jSlider1.setValue(1);
            jSlider1.addChangeListener(new javax.swing.event.ChangeListener() {
                public void stateChanged(javax.swing.event.ChangeEvent evt) {
                    jSlider1StateChanged(evt);
                }
            });

            jSlider2.setMaximum(5);
            jSlider2.setValue(1);
            jSlider2.addChangeListener(new javax.swing.event.ChangeListener() {
                public void stateChanged(javax.swing.event.ChangeEvent evt) {
                    jSlider2StateChanged(evt);
                }
            });

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(45, 45, 45)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jSlider2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jSlider1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addContainerGap(242, Short.MAX_VALUE))
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(36, 36, 36)
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGap(33, 33, 33)
                    .addComponent(jSlider1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jSlider2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(38, Short.MAX_VALUE))
            );

            pack();
        }// </editor-fold>

        private void jPanel1ComponentResized(java.awt.event.ComponentEvent evt) {
            // TODO add your handling code here:
          //  AffineTransform f=new AffineTransform();

        }

        private void jSlider1StateChanged(javax.swing.event.ChangeEvent evt) {
            // TODO add your handling code here:

                        AffineTransform scale = AffineTransform.getScaleInstance(jSlider1.getValue(),jSlider2.getValue());       
                    AffineTransformOp op3 = new AffineTransformOp(scale, AffineTransformOp.TYPE_BILINEAR);
                    BufferedImage scaling = new BufferedImage(this.img.getHeight(), this.img.getWidth(), this.img.getType());
                    BufferedImage img1=op3.filter(this.img, scaling);
                    jPanel1.getGraphics().drawImage(img1.getScaledInstance(jPanel1.getWidth(), jPanel1.getHeight(), Image.SCALE_FAST), 0, 0, null);
        }

        private void jSlider2StateChanged(javax.swing.event.ChangeEvent evt) {
            // TODO add your handling code here:
             AffineTransform scale = AffineTransform.getScaleInstance(jSlider1.getValue(),jSlider2.getValue());       
                    AffineTransformOp op3 = new AffineTransformOp(scale, AffineTransformOp.TYPE_BILINEAR);
                    BufferedImage scaling = new BufferedImage(this.img.getHeight(), this.img.getWidth(), this.img.getType());
                    BufferedImage img1=op3.filter(this.img, scaling);
                    jPanel1.getGraphics().drawImage(img1.getScaledInstance(jPanel1.getWidth(), jPanel1.getHeight(), Image.SCALE_FAST), 0, 0, null);
        }

        /**
         * @param args the command line arguments
         */
        public static void main(String args[]) {
            /* Set the Nimbus look and feel */
            //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
            /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
             * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
             */
            try {
                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        javax.swing.UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (ClassNotFoundException ex) {
                java.util.logging.Logger.getLogger(Swon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (InstantiationException ex) {
                java.util.logging.Logger.getLogger(Swon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                java.util.logging.Logger.getLogger(Swon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                java.util.logging.Logger.getLogger(Swon.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            }
            //</editor-fold>

            /* Create and display the form */
            java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                    try {
                        new Swon().setVisible(true);
                    } catch (IOException ex) {
                        Logger.getLogger(Swon.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            });
        }
        // Variables declaration - do not modify
        public javax.swing.JPanel jPanel1;
        private javax.swing.JSlider jSlider1;
        private javax.swing.JSlider jSlider2;
        // End of variables declaration
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:51:50.317

好吧，首先，不要这样做`this.img.getGraphics().drawImage(im, 0, 0, null)`，当面板重新绘制时，图像不会更新。您需要覆盖`paintComponent`a `JComponent`(prefer `JPanel`) 的方法并以适当的比例重新绘制图像。

其次，您需要将图像面板放置在能够真正关心面板大小的布局上（例如`GridBagLayout`）。为此，请覆盖该`getPreferredSize`方法并返回缩放图像的大小...

![在此处输入图像描述](../Images/2642fe6a22fe2696083c0c6170bdf544.png)

```
public class ResizableImagePane {

    public static void main(String[] args) {
        new ResizableImagePane();
    }

    public ResizableImagePane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ScalerPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class ScalerPane extends JPanel {
        private JSlider slider;
        private ImagePane imagePane;
        public ScalerPane() {

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();

            gbc.gridx = 0;
            gbc.gridy = 0;

            imagePane = new ImagePane();

            add(imagePane, gbc);

            gbc.gridy = 1;
            gbc.weightx = 0;
            gbc.weighty = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            slider = new JSlider();
            slider.setMinimum(1);
            slider.setMaximum(100);
            gbc.weightx = 1;
            gbc.weighty = 1;
            gbc.anchor = GridBagConstraints.SOUTH;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(slider, gbc);

            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent ce) {
                    imagePane.setZoom(slider.getValue() / 100f);
                }
            });
            slider.setValue(100);
        }
    }

    protected class ImagePane extends JPanel {
        private BufferedImage background;
        private Image scaled;
        private float zoom;
        public ImagePane() {
            try {
                background = ImageIO.read(new File("path/to/your/image"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            setZoom(1f);
            setBorder(new LineBorder(Color.RED));
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(scaled.getWidth(this), scaled.getHeight(this));
        }

        public void setZoom(float zoom) {
            this.zoom = zoom;
            int width = Math.round(background.getWidth() * zoom);
            scaled = background.getScaledInstance(width, -1, Image.SCALE_SMOOTH);

            invalidate();
            revalidate();
            repaint();
        }

        public float getZoom() {
            return zoom;
        }

        @Override
        protected void paintComponent(Graphics grphcs) {
            super.paintComponent(grphcs);

            int x = (getWidth() - scaled.getWidth(this)) / 2;
            int y = (getHeight() - scaled.getHeight(this)) / 2;

            grphcs.drawImage(scaled, x, y, this);
        }
    }
} 
```

# ruby - 写入文件时出现 Ruby Google Drive 授权错误

> ID：12797940
> 
> 赞同：0
> 
> 时间：2012-10-09T10:23:58.923
> 
> 标签：ruby, ruby-on-rails-3, authentication, spreadsheet, google-drive-api

我正在使用[google_drive](https://github.com/gimite/google-drive-ruby)下载和操作 Google Drive 文档以播种 Rails 应用程序。我可以将电子表格下载为文件并毫无问题地解析它们，但是我想将电子表格保存在本地。

```
require "google_drive"

# Log in to Google Drive
session = GoogleDrive.login("my.email@address.com", "MyPassword")

spreadsheet = session.spreadsheet_by_title('SpreadsheetName')

# At this point spreadsheet exists and I can manipulate it freely

spreadsheet.download_to_file('spreadsheet_name.xls') 
```

根据我正在使用的[自述](https://github.com/gimite/google-drive-ruby/blob/master/README.rdoc)[文件 download_to_file](http://gimite.net/doc/google-drive-ruby/GoogleDrive/File.html#method-i-download_to_file)，但遇到授权错误：

```
/Users/*[me]*/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/google_drive-0.3.2/lib/google_drive/session.rb:429:in `request': Response code 401 for get https://docs.google.com/feeds/download/spreadsheets/Export?key=*[key]*: 

  <HTML> (GoogleDrive::AuthenticationError)
    <HEAD>
      <TITLE>Unauthorized</TITLE>
    </HEAD>
    <BODY BGCOLOR="#FFFFFF" TEXT="#000000">
      <H1>Unauthorized</H1>
      <H2>Error 401</H2>
    </BODY>
  </HTML>

  from /Users/Me/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/google_drive-0.3.2/lib/google_drive/file.rb:153:in `download_to_io'
        from /Users/Me/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/google_drive-0.3.2/lib/google_drive/file.rb:114:in `block in download_to_file'
        from /Users/Me/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/google_drive-0.3.2/lib/google_drive/file.rb:113:in `open'
        from /Users/Me/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/google_drive-0.3.2/lib/google_drive/file.rb:113:in `download_to_file'
        from db/seeds/modules.rb:14:in `<main>' 
```

我究竟做错了什么？似乎身份验证失败，但我已经获得授权并下载了文件数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:23:34.700

这是一个已知问题：[https ://github.com/gimite/google-drive-ruby/issues/34](https://github.com/gimite/google-drive-ruby/issues/34)

> download_to_file 使用不同的 API，似乎只支持以 HTML 格式下载。要以 PDF 格式下载，您需要编写代码来手动获取您提到的 URL。您可能可以使用 session.request() 方法来重用 google-drive-ruby 提供的授权。
> 
> 在 google-drive-ruby 中拥有该功能会很好。但是 google-drive-ruby 使用的 API（文档列表 API）将被弃用，所以我需要切换到 Google Drive API。所以我将在切换后实现该功能（如果它在 Google Drive API 中可用）。

# iphone - 使用 target="_blank" / Cordova 2.0 / jQuery Mobile 1.2.0 调用 Childbrowser

> ID：12797944
> 
> 赞同：2
> 
> 时间：2012-10-09T10:24:12.980
> 
> 标签：iphone, jquery-mobile, phonegap-plugins, cordova-2.0.0, childbrowser

我已经使用 jQuery Mobile 1.2 为 iOS 构建了一个 Cordova 2.0 应用程序。里面的框架。我已经成功安装了 Childbrowser 插件（在[这个版本](https://github.com/Shereef/ChildBrowserOnCordova200)和[这个指南](https://github.com/andreassolberg/jso/blob/master/README-Phonegap.md)中。感谢这些好人在这一点上的帮助，

现在我可以直接使用 onclick 事件调用 Childbrowser，并在头部使用此 javascript：

```
<script type="text/javascript">
  app.initialize();
  function launchCB() {
    if(window.plugins.childBrowser != null) {
      window.plugins.childBrowser.onLocationChange = function(loc){};
      window.plugins.childBrowser.onClose = function(){};
      window.plugins.childBrowser.onOpenExternal = function(){};
      window.plugins.childBrowser.showWebPage('http://www.google.de');
    } else {
      alert('not found');
    }
  }
</script> 
```

或直接与例如

```
<a href="#" onclick="window.plugins.childBrowser.showWebPage('http://www.google.de');"> Google</a> 
```

现在我想打开所有带有属性的链接`target="_blank"`。因此，我找到[了这个线程](https://stackoverflow.com/questions/10632203/childbrowser-plugin-in-phonegap-1-7-can-open-only-for-the-first-time)并选择了 Charlie Gorichanaz 的解决方案。

但是当我在 iPhone 模拟器中启动应用程序时，我得到的只是沙钟，或者更确切地说是 jQuery mobile 的死亡旋转轮。

我很高兴每一个有用的建议，我从来没有在这个应用程序之前编码过。这是我的 index.html

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name = "format-detection" content = "telephone=no"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Cordova</title>
    <script type="text/javascript" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" src="ChildBrowser.js"></script>
    <gap:plugin name="ChildBrowser" /> <!-- latest release -->
    <script type="text/javascript" charset="utf-8" src="EmailComposer.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
      app.initialize();
      function launchCB() {
        if(window.plugins.childBrowser != null) {
          window.plugins.childBrowser.onLocationChange = function(loc){};
          window.plugins.childBrowser.onClose = function(){};
          window.plugins.childBrowser.onOpenExternal = function(){};
          window.plugins.childBrowser.showWebPage('http://www.google.de');
        } else {
          alert('not found');
        }
      }
      /*
       var args;
       cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);
     */
   </script>
   <!-- jQuery mobile -->
   <link type="text/css" rel="stylesheet" media="screen" href="jqm/jquery.mobile-1.2.0-alpha.1.min.css">
   <link type="text/css" rel="stylesheet" media="screen" href="jqm/Changes.css">
   <script type="text/javascript" src="jqm/jquery-1.7.2.min.js"></script>
   <script>
     // for using childbrowser to open pdf on remote sites
     $(document).bind( "mobileinit", function() {
       $.mobile.allowCrossDomainPages = true;
     }
   );
   // the function i want to implement
   $(document).bind("pageinit", function() {
     onDeviceReady();
   });
   function onDeviceReady() {
     var root = this;
     cb = window.plugins.childBrowser;
     if (cb != null) {
       $('a[target="_blank"]').click(function(event) {
         cb.showWebPage($(this).attr('href'));
         event.preventDefault();
         event.stopImmediatePropagation();
         return false;
       });
     }
   }
   // don't know is this thing is right in place...
   document.addEventListener("deviceready", onDeviceReady, false);
 </script>
 <script src="jqm/jquery.mobile-1.2.0-alpha.1.min.js"></script>
</head>
<body>
  <section data-role="page" id="home" data-theme="a" data-position="fixed">
    <div data-role="header"> <!-- header -->
      <h1>Test</h1>
      <div style="position:absolute; top:0px; right:5px;">
        <a href="#about" data-transition="pop">
          <img src="images/schlange-sw.png" alt="Schlange">
        </a>
      </div>
    </div>
    <!-- /header -->
    <div data-role="content"> <!-- content -->
      <a id="domainbut" onclick='launchCB()'>Working </a>
      <a href="http://www.google.de/" target="_blank" data-role="button" data-inline="true"> not working </a>
    </div>
    <!-- content -->
    <div data-role="footer" data-theme="a" data-position="fixed"></div>
  </section>
  <section data-role="dialog" id="about" data-close-btn-text="Close This Dialog">
    <div data-role="header">
      <h1>Über</h1>
    </div>
    <div data-role="content">
      <h1 style="text-align: center;"></h1>
      <div align="center">
    </div>
    <p style="text-align: center;">The owner of this app</p>
    <button onclick="cordova.exec(null, null, 'EmailComposer', 'showEmailComposer', [args]);">Compose Email</button>
    <p>
      <a href="#home" data-role="button" data-rel="back">OK</a>
    </p>
  </div>
</section>
</body>
</html> 
```

先感谢您。

问候

基克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:29:18.437

@Kieke，如果您决定取消 ChildBrowser，我发现以下内容对我有用。

注意：假设您使用的是 PhoneGap 2.x

在你的`Cordova.plist`设置`OpenAllWhitelistURLsInWebView = YES`和设置你的`ExternalHosts`列表中，`*`很好。您希望 webview 不阻止的任何内容（在 Safari 或应用程序中查看）都必须在您的`ExternalHosts`列表中。

在您`MainViewController.m`将以下代码添加到底部时，您可以手动将任何 URL 重定向到 Safari，请参阅以下`if`语句`www.loadDomainInSafari.com`：

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *requestURL =[ [ request URL ] retain ];
    NSString *host = [ [ requestURL host] retain ];

    // if YES, directs to WebView
    // otherwise, takes OpenAllWhitelistURLsInWebView setting

    // if www.loadDomainInSafari.com, open in Safari by explictly stating NO.
    // otherwise take OpenAllWhitelistURLsInWebView setting of YES
    if ([host isEqualToString:@"www.loadDomainInSafari.com"]) {
        return ![ [ UIApplication sharedApplication ] openURL: [ requestURL autorelease] ];
    }
    [ requestURL release ];
    return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:10:35.353

在您的`Cordova.plist`中，您是否拥有`OpenAllWhitelistURLsInWebView = YES`并且您要连接的所有域（例如 www.google.com、localhost）都在您的`ExternalHosts`列表中吗？

如@Littm 所述，查看 Xcode 调试器的控制台，您将看到您的链接是否因为不在白名单中而被阻止。

您还可以`tail /var/log/system.log`在执行后检查您的 system.log 是否有任何错误。

# javascript - 如何通过鼠标在 javascript 中控制对象的方向？

> ID：12797947
> 
> 赞同：-3
> 
> 时间：2012-10-09T10:24:28.627
> 
> 标签：javascript, html

我正在开发一个 html5 游戏项目。在这个我必须通过鼠标控制我的对象方向。我已经从键盘控制它。但我想实现鼠标控制。所以任何人都可以帮助然后回复我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:27:19.033

假设您使用的是 jQuery：

```
$(document).bind('mousemove', function(e) {
    var refObj = $('#image-id');  // reference object selector
    var objPos = refObj.offset(); // get object's absolute position
    var objCenterPos = {          // get object's center absolute position
        x: objPos.left + refObj.width()  / 2,
        y: opjPos.top  + refObj.height() / 2
    };
    var refPos = { // compute mouse position relative to reference object
        x: e.pageX - objCenterPos.x,
        y: e.pageY - objCenterPos.y
    };

    updateDirectionVector(refPos); // refPos is also the direction vector
});

function updateDirectionVector(vector) {
    // do whatever you want here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:39:07.753

使用“onmousemove”并捕获其事件

```
window.onmousemove = functionName;

functionName(event){
    //now read the relevant event properties for the mouse
    //console.log(event); //use console.log to get a list of possible event properties
    x = event.pageX;
    y = event.pageY;

} 
```

您需要跟踪以前的位置并在该功能中做很多其他事情，但是有很多文档可以帮助您入门。

试试这个链接： http: [//orangesplotch.com/mouse_follower-javascript_tutorial/](http://orangesplotch.com/mouse_follower-javascript_tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:55:32.187

下面的代码可能会给你一些想法！

```
var refPos = {x:window.event.clientX,y:window.event.clientY};

window.addEventListener("mousemove",function(){
var curPos = {x:window.event.clientX,y:window.event.clientY};
var left = refPos.x - curPos.x;
var top = refPos.y - curPos.y;
var direction = "";
direction += (top < 0)?"South":"North";
direction += (left <0)?"East":"West";
alert("Relative Direction " + direction);
},true); 
```

希望这个对你有帮助！

# linux - 用属性文件中提到的值替换标记的脚本

> ID：12797953
> 
> 赞同：0
> 
> 时间：2012-10-09T10:24:45.163
> 
> 标签：linux, shell

我有一个包含数据的文件 values.properties，例如：

```
$ABC=10
$XYZ=20 
```

我想创建一个 shell 脚本，它将从上面的文件中一个一个地获取每个元素。

说 $ABC，然后转到文件 ABC.txt 并将 $ABC 的值替换为 10。类似地，然后转到文件 XYZ.txt 并将 $XYZ 替换为 20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:19:36.593

我想也许这应该在 Unix 和 Linux 部分，我一起破解的解决方案如下：

```
cat values.properties  | grep "=" | cut -d "$" -f2 | awk -F "=" '{print "s/$"$1"/"$2"/g "$1".txt"}' | xargs -n2 sed -i 
```

流程是这样的：

1.  通过以下方式过滤掉所有赋值： grep "="
2.  通过以下方式删除'$'： cut -d "$" -f2
3.  使用awk拆分变量名和值并构造sed替换命令
4.  使用 xargs 通过以下方式拉入替换参数和目标文件：xargs -n2
5.  最后将 sed 作为命令传递给 xargs：xargs -n2 sed

# facebook - 分享页面时如何在facebook中隐藏网站url？

> ID：12797955
> 
> 赞同：1
> 
> 时间：2012-10-09T10:24:46.210
> 
> 标签：facebook, url, share

当我使用评论 facebook 插件时，我会在我的网站页面中发表评论。在我的 Facebook 时间线中，我看到了图片、标题、网址和描述。如何在 facebook 时间线上隐藏那个 url 网站？

我没有写`<meta property="og:site_name" content=""/>`在那里。

我的代码如下所示：

`<meta property="og:title" content="<?php echo trim($title); ?>"/> <meta property="og:description" content="<?php echo $desc;?>" /> <meta property="og:image" content="<?php echo $url_pic; ?>"/>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:36:33.193

在 Facebook 上共享链接时，您无法隐藏站点 URL。这是一项安全功能，因此用户知道他们将访问哪个域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:33:29.640

您可以省略描述，但为了用户安全，我认为您不能隐藏网站网址。它总是从插件所在的页面解析。

# haskell - 使用多参数类型类的模糊类型变量

> ID：12797956
> 
> 赞同：1
> 
> 时间：2012-10-09T10:24:47.333
> 
> 标签：haskell, higher-rank-types

我不明白为什么 Haskell 无法在以下代码中找出第 8 行的类型。expressMaybe 函数的类型签名不是确定结果类型与两个输入参数的类型相同吗？

```
{-# LANGUAGE MultiParamTypeClasses #-}

class Gene g n where
  express :: g -> g -> g
  -- there will be other functions that use the "n" type parameter

expressMaybe :: Gene g n => Maybe g -> Maybe g -> Maybe g
expressMaybe (Just a) (Just b) = Just (express a b) -- line 8
expressMaybe (Just a) Nothing  = Just a
expressMaybe Nothing (Just b)  = Just b
expressMaybe Nothing Nothing   = Nothing 
```

我得到的错误是：

```
Amy20.hs:8:40:
    Ambiguous type variable `n0' in the constraint:
      (Gene g n0) arising from a use of `express'
    Probable fix: add a type signature that fixes these type variable(s)
    In the first argument of `Just', namely `(express a b)'
    In the expression: Just (express a b)
    In an equation for `expressMaybe':
        expressMaybe (Just a) (Just b) = Just (express a b)
Failed, modules loaded: none. 
```

我尝试使用 RankNTypes 和 ScopedTypeVariables，但我不知道如何使错误消失。

预先感谢您的帮助！

编辑：既然我理解了这个问题，我使用了fundeps，因为我对它们很熟悉，而且对于我的应用程序来说，拥有多个用于编码基因的“字母表”没有多大意义。不过，我以前从未使用过类型族，所以我也会研究一下。

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}

class Gene g n | g -> n where
  express :: g -> g -> g
  -- there will be other functions that use the "n" type parameter

expressMaybe :: Gene g n => Maybe g -> Maybe g -> Maybe g
expressMaybe (Just a) (Just b) = Just (express a b) -- line 8
expressMaybe (Just a) Nothing  = Just a
expressMaybe Nothing (Just b)  = Just b
expressMaybe Nothing Nothing   = Nothing 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T10:32:26.293

考虑一下：

```
instance Gene String Int where
  express _ _ = "INT"

instance Gene String Double where
  express _ _ = "DOUBLE"

expressMaybe (Just "") (Just "") 
```

该代码应该产生`(Just "INT")`还是`(Just "DOUBLE")`？是的，Haskell 知道 的结果`expressMaybe`将与参数具有相同的类型。但这并不意味着它知道在这里使用哪个实例，因为同一类型可以有多个实例，`g`但`n`.

如果在您的情况下`n`，每种类型只有一种类型`g`，您可以考虑使用类型族或功能依赖项等扩展，您可以使用这些扩展向类型系统表达这一事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T00:26:10.530

我建议您避免功能依赖并选择类型系列。它们更有趣、更直观：

```
{-# LANGUAGE TypeFamilies, KindSignatures #-}

class Gene g where
  type Nucleotide g :: *  -- each instance has an associated type
  express :: g -> g -> g
  encode :: [Nucleotide g] -> g -- probably doesn't make sense, but need an example
  -- there will be other functions that use the "Nucleotide g" type parameter 
```

假设我们有

```
data ACTG = A | C | T | G
data ACTGgene = ACTGgene [ACTG] 
```

本质上，您通过类型级别的简单模式匹配来定义类型函数：

```
instance Gene ACTGgene where
  type Nucleotide ACTGgene = ACTG
  encode ns = ACTGgene ns
  express = error "I'm out of my depth here because I gave up Biology when I hit 14." 
```

现在我们的代码编译：

```
expressMaybe :: Gene g => Maybe g -> Maybe g -> Maybe g
expressMaybe (Just a) (Just b) = Just (express a b) -- compiles fine
expressMaybe (Just a) Nothing  = Just a
expressMaybe Nothing (Just b)  = Just b
expressMaybe Nothing Nothing   = Nothing 
```

* * *

现在可能是您的基因类型基本上取决于您使用的核苷酸，或者您可以互换使用不同的核苷酸，我不知道，但是解决您的问题的一种可能的解决方案是使用构造函数类：

```
class Gene g where
   express :: g n -> g n -> g n
   encode :: n -> g n
   -- more stuff 
```

这将适合数据声明，如

```
data ACTG = A | C | T | G
data ListGene n = ListGene [n]

instance Gene ListGene where
  ... 
```

但也许这对于您的问题域来说太参数化了，我不知道。

* * *

当然，您应该尝试类型族。我做到了。[现在我爱他们。](https://stackoverflow.com/questions/12399796/associated-parameter-restriction-using-functional-dependency/12409935#12409935)- 链接的答案包括最后的链接以供进一步阅读。

# google-ads-api - 在带有谷歌广告的网站上投放我的广告

> ID：12797958
> 
> 赞同：0
> 
> 时间：2012-10-09T10:24:55.447
> 
> 标签：google-ads-api

我考虑过这是否可能。

我的竞争对手在他们的网站上投放 Google 广告。我希望我运行 Google Adwords 并在那里展示我的广告（竞争对手显示 728x90 谷歌广告横幅）。这可能吗？- 我应该只在他们的网站上运行关键字是在元关键字中吗？

```
<meta name="description" content="Chat, sjov, ballade, tale sammen, ungdom, ungdomsproblemer, brevkasse, kærlighed, flirt, avatar"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:32:59.360

Adwords 有一个名为[“自选展示位置”](http://support.google.com/adwords/bin/answer.py?hl=en&answer=99502)的选项。您可以在此处添加竞争对手的 URL。请注意，他可能会在他的 Adsense 帐户中阻止链接到您网站的广告。

# sql - 左连接不起作用

> ID：12797963
> 
> 赞同：2
> 
> 时间：2012-10-09T10:25:01.030
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我写了以下查询

```
SELECT 
   us.Id as Id, us.Name as Name,
   SUM(CASE WHEN c.isPublish = 0 THEN 1 ELSE 0 END) AS PendingCoupons,
   SUM(CASE WHEN c.isPublish = 1 and convert(date,c.PublishedDate,101) >=  convert(date, GETDATE(), 101) THEN 1 ELSE 0 END) AS ApprovedCouponsToday,
   SUM(CASE WHEN c.isPublish = 0 and convert(date,c. CreateDate, 101) = convert(date, GETDATE(), 101) THEN 1 ELSE 0 END) AS PendingCouponsToday,
   SUM(CASE WHEN c.isPublish = 1 THEN 1 ELSE 0 END) AS ApprovedCoupons,
   SUM(CASE WHEN c.isPublish = 1 and c.Userid = us.Id and convert(date, c.PublishedDate, 101) >= convert(date, GETDATE(), 101) THEN 1 ELSE 0 END) AS ApprovedByUserToday,
   SUM(CASE WHEN c.isPublish = 1 and c.Userid = us.Id THEN 1 ELSE 0 END) AS ApprovedByUser,
   SUM(CASE WHEN c.ReviewVerify = 1 and convert(date, c.PublishedDate, 101) >= convert(date, GETDATE(), 101) THEN 1 ELSE 0 END) AS ProcessToday,
   COUNT(*) AS Total
FROM 
   Users AS us
LEFT JOIN 
   Coupon c ON Userid = us.Id
GROUP BY 
   us.Name , us.Id 
```

我有以下两张桌子

![表](../Images/cbfa16a913a69cb733e5253176d8a227.png)

在运行上面的查询之后，结果总是这样

![结果](../Images/801f7193b5b9bae84e237ed7a2afc19c.png)

这个查询是否有任何错误，因为它总是返回我计数“0”，我每个用户都有近 100 张优惠券但它没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:26:27.880

我认为您可能需要使用 a从表`RIGHT JOIN`中获取所有记录`Coupon`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:50:56.640

看起来，由于`RIGHT JOIN`有效并给出了正确的答案（可能是虚假的用户 ID），而 a`LEFT JOIN`根本没有给出与优惠券相关的任何结果，优惠券在非现有用户上注册。

`LEFT JOIN`要求数据存在于表的左侧，而右侧则可能存在，`RIGHT JOIN`反之亦然。换句话说，数据存在于最右边的表（优惠券）中，与左侧（用户）没有任何联系

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:00:44.387

您没有使用正确的连接。您想获得用户 ID 的优惠券吗？使用此联接。FROM Users AS us LEFT JOIN Coupon c ON us.Id = c.Userid 如果这不起作用，则使用： FROM Users AS us LEFT OUTER JOIN Coupon c ON us.Id = c.Userid

# c# - 使用 XmlReader 处理命名空间

> ID：12797964
> 
> 赞同：1
> 
> 时间：2012-10-09T10:25:13.523
> 
> 标签：c#, xml, xml-namespaces, xmlreader

我有一个复杂的 XML 文件，其结构如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="xxx:xxx:xxx:xxx:xxxxx:xxx:xsd:xxxx.xxx.xxx.xx">
    <Element1>
        <Element2>
            <Element2A>xxxxxx</Element2A>
            <Element2B>2012-08-29T00:00:00</Element2B>
        </Element2>
    </Element1>
</Document> 
```

现在我正在使用 XmlReader 读取这个 XML 文档并处理信息如下

```
XmlReader xr = XmlReader.Create(filename);
while (xr.Read()) 
{
   xr.MoveToElement();
   XElement node = (XElement)XElement.ReadFrom(xr);
   Console.WriteLine(node.Name);
}
xr.Close(); 
```

我面临的问题是在输出中，命名空间以 ElementName 为前缀。例如输出

```
{xxx:xxx:xxx:xxx:xxxxx:xxx:xsd:xxxx.xxx.xxx.xx}Element1 
```

有什么方法可以删除/处理这个，因为我需要使用元素名称和子名称进行进一步过滤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:30:17.333

[`XElement.Name`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.name.aspx)不是（如您所料） a [`String`](http://msdn.microsoft.com/en-us/library/system.string.aspx)，而是[`XName`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx)具有[`LocalName`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.localname.aspx)属性的 a ，因此：

```
Console.WriteLine(node.Name.LocalName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:37:23.017

您可能想要删除命名空间。删除命名空间的一种方法是编写 c# 代码，另一种方法是按照[删除命名空间](https://stackoverflow.com/questions/4387571/remove-namespace-for-a-perticular-element) -Milind中的建议使用 XSLT 转换

# php - php & recursive Iterator : 查找特定文件及其路径

> ID：12797966
> 
> 赞同：0
> 
> 时间：2012-10-09T10:25:19.133
> 
> 标签：php, file, recursion, iterator, sugarcrm

我是 SPL 和 recursiveIterator 的新手……你能帮帮我吗？

**我想要达到的目标：**

我想在文件夹树中找到一个文件，我想获取它的路径。

我的文件夹树可能看起来像这样：

```
./ressources
./ressources/Images
./ressources/Images/Image01
./ressources/Images/Image02
./resources/Images/ImagesSub/Image03
./ressources/Docs
./ressources/Docs/Doc01 
```

等等...

我通过 sql 查询获得了我的文件的名称（警告：它们从来没有扩展名）。现在，我想通过在“./ressources”文件夹上执行递归迭代器来查找文件的位置。

然后，当我找到该文件时，我想返回整个链接“./ressources/Folder/File”。

我已经阅读了[Gordon 的解决方案](https://stackoverflow.com/questions/2398147/php-recursive-directory-path)，但它不起作用，我只尝试回显某些内容，但没有显示任何内容。

这是我的代码：

```
$doc_id = $bean->id;
$query = "SELECT a.document_revision_id  FROM  documents as a, document_revisions as b ";
$query .= "WHERE a.document_revision_id = b.id AND a.id = '" . $doc_id . "' LIMIT 1";
$results = $bean->db->query($query, true);
$row = $bean->db->fetchByAssoc($results);

$file_id = $row['document_revision_id'];
$ressources = './ressources/';
$iter = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($ressources, RecursiveDirectoryIterator::KEY_AS_FILENAME), RecursiveIteratorIterator::SELF_FIRST);
foreach ($iter as $entry) {
    if ($entry->getFilename() === $file_id){
        echo '<script> alert('.$entry->getFilepath().');</script>';
    }
} 
```

（我知道在回声中发出警报是胡说八道，但是用糖来显示一些东西是相当困难 **的**

我正在尝试在 SugarCrm CE 6.5.2 logic_hook 中执行此操作，并且它在 archlinux 上运行。我的 PHP 版本是 5.4.6

真的很紧急，如果你能帮助我，我会很高兴的！！

提前感谢！

**2009 年 12 月 10 日下午 2 点开始编辑：我的糖项目是什么以及为什么我无法从数据库中获取路径名**

我在 Documents 模块中创建了一个名为 folder_name_c 的自定义字段。您使用要上传文档的文件夹的名称（在资源下）填充它。

我想允许用户在我编辑文档时将上传的文件从其旧文件夹移动到新文件夹。

编辑文档时，我做了一个 after_retrieve 挂钩以允许 logic_hook 在编辑时工作（之前，它只是为编辑视图完成）

所以，如果我得到 $bean->folder_name_c，它会获取该字段的内容。如果我尝试使用 sql，它只会在我单击“保存”后才会选择 folder_name_c。

所以，我没有任何线索可以让我的旧文件夹名称创建一个

```
$old_link = '.ressources/'.$old_folder.'/'.$file_id; 
```

我只能创建

```
$new_link = '.ressources/'.$bean->folder_name_c.'/'.$file_id; 
```

所以，经过很长一段时间，我发现我可以浏览我的 ressources 文件夹和我的子文件夹来找到名为 $file_id 的文件，然后创建 $old_link

仅供参考，通过在糖工作室下创建一个新的自定义字段，我获得了很多时间。我不想通过添加 custom_code 调用数据库或其他方式来度过我的生活。这是紧急的，递归迭代器似乎简单快捷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:55:14.963

没有诸如`getFilepath`for 之类的方法`(Recursive)DirectoryIterator`，只使用`$entry`它自己，当在字符串上下文中使用时，它被强制转换为这样的一个（à la [`__toString`](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)）：

```
$file_id = 'test';
$ressources = './ressources/';

// [...]

echo '<script>alert('.$entry.');</script>'; // is casted to a string which contains the full path

// results in alerting ./resources/SubFolder/test 
```

我用相同的结构测试了它，没有扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:59:28.267

所以，我发现了如何使用递归迭代器来解决我的问题！这是我的代码：

```
$ressources = './ressources/';
$directoryIter = new RecursiveDirectoryIterator($ressources);
$iter = new RecursiveIteratorIterator($directoryIter, RecursiveIteratorIterator::SELF_FIRST);
$old_path = '';
$new_path = $ressources.$bean->folder_name_c.'/'.$file_id;
chmod($new_path,0777);

foreach ($iter as $entry) {

    if (!$directoryIter->isDot()) {

        if ($entry->getFileName() == $file_id) {
            $old_path = $entry->getPathName();
            chmod($old_path, 0777);
            copy($old_path,$new_path);

         }
    }
} 
```

所以我成功获得了我的文件的原始路径！:)

但*一如既往*，**有一个问题**：

我想将我的文件从 $old_path 剪切并粘贴到 $new_path *（如您在我的代码中所见）*。这里的副本效果很好，但我不知道我必须在哪里取消链接（）旧路径..如果有人知道......（如果我在错误的行中写了副本，请告诉我！：D）

# c# - WF4：工作流程保持锁定

> ID：12797975
> 
> 赞同：2
> 
> 时间：2012-10-09T10:25:39.843
> 
> 标签：c#, .net, c#-4.0, workflow-foundation-4

我有一个使用 WorkflowApplication 在 IIS 中托管 WF4 工作流的应用程序

工作流由用户定义（使用重新托管的工作流设计器），xml 存储在数据库中。然后，根据使用应用程序的用户操作，在数据库中选择一个 xml 并创建/恢复工作流。

我的问题是：当工作流到达书签并闲置时，它会保持锁定不同的时间。然后，如果用户尝试对这个工作流进行另一个操作，我得到了这个异常：

> InstancePersistenceCommand 的执行被中断，因为实例“52da4562-896e-4959-ae40-5cd016c4ae79”被不同的实例所有者锁定。发生此错误通常是因为不同的主机加载了实例。拥有实例锁定的所有者或主机的实例所有者 ID 为“d7339374-2285-45b9-b4ea-97b18c968c19”。

现在是时候写一段代码了

当我的工作流程空闲时，我指定它应该被卸载：

```
private PersistableIdleAction handlePersistableIdle(WorkflowApplicationIdleEventArgs arg)
{
    this.Logger.DebugFormat("Workflow '{1}' is persistableIdle on review '{0}'", arg.GetReviewId(), arg.InstanceId);
    return PersistableIdleAction.Unload; 
} 
```

Foreach WorkflowApplication 我需要，我新建一个SqlWorkflowInstanceStore：

```
var store = new SqlWorkflowInstanceStore(this._connectionString);
store.RunnableInstancesDetectionPeriod = TimeSpan.FromSeconds(5);
store.InstanceLockedExceptionAction = InstanceLockedExceptionAction.BasicRetry; 
```

这是我的 WorkflowApplication 的创建方式

```
WorkflowApplication wfApp = new WorkflowApplication(root.RootActivity);
wfApp.Extensions.Add(...);
wfApp.InstanceStore = this.createStore();
wfApp.PersistableIdle = this.handlePersistableIdle;
wfApp.OnUnhandledException = this.handleException;
wfApp.Idle = this.handleIdle;
wfApp.Unloaded = this.handleUnloaded;
wfApp.Aborted = this.handleAborted;
wfApp.SynchronizationContext = new CustomSynchronizationContext();
return wfApp; 
```

然后我调用 Run 方法来启动它。一些解释：
- root.RootActivity：它是从存储在数据库中的工作流 XML 创建的活动
- CustomSynchronizationContext：处理授权的同步上下文
- 在我在卸载工作流时记录的 handleUnloaded 方法中，我看到工作流已正确卸载在下一个用户操作之前，但似乎工作流程在卸载后保持锁定（？）

然后，稍后，当我需要恢复工作流时，我以与调用相同的方式创建工作流：

```
wfApp.Load(workflowInstanceId); 
```

抛出上面指定的“锁定”异常。如果我等待几分钟，然后再试一次，它工作正常。

[我在这里](http://msmvps.com/blogs/theproblemsolver/archive/2009/11/19/windows-workflow-foundation-4-and-persistence.aspx)读到一篇文章说我们需要设置一个所有者。因此，我还尝试使用以下代码将静态 SqlWorkflowInstanceStore 与所有者集一起使用：

```
if (_sqlWorkflowInstanceStore != null)
    return _sqlWorkflowInstanceStore;

lock (_mutex)
{
    if (_sqlWorkflowInstanceStore != null)
        return _sqlWorkflowInstanceStore;

    // Configure store
    _sqlWorkflowInstanceStore = new SqlWorkflowInstanceStore(this._connectionString);
    _sqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod = TimeSpan.FromSeconds(5);
    _sqlWorkflowInstanceStore.InstanceLockedExceptionAction = InstanceLockedExceptionAction.BasicRetry;

    // Set owner - Store will be read-only beyond this point and will not be configurable anymore
    var handle = _sqlWorkflowInstanceStore.CreateInstanceHandle();
    var view = _sqlWorkflowInstanceStore.Execute(handle, new CreateWorkflowOwnerCommand(), TimeSpan.FromSeconds(5));
    handle.Free();

    _sqlWorkflowInstanceStore.DefaultInstanceOwner = view.InstanceOwner;
}

return _sqlWorkflowInstanceStore; 
```

但后来我有这种例外：

> InstancePersistenceCommand 的执行被中断，因为所有者 ID '9efb4434-8560-469f-9d03-098a2d48821e' 的实例所有者注册已失效。此错误表明此所有者锁定的所有实例的内存副本已过时，应连同 InstanceHandles 一起丢弃。通常，最好通过重新启动主机来处理此错误。

有谁知道如何确保在卸载工作流时立即释放工作流上的锁定？我看到一些[帖子](http://msdn.microsoft.com/en-us/library/ee816858.aspx)使用 WorkflowServiceHost（使用 WorkflowIdleBehavior）执行此操作，但这里我*没有*使用 WorkflowServiceHost，我使用的是 WorkflowApplication

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:30:16.320

我怀疑问题出在 SqlWorkflowInstanceStore 的 InstanceOwner 上。它不会被删除，因此工作流需要等待前一个的所有权超时。

创建实例所有者

```
var instanceStore = new SqlWorkflowInstanceStore(connStr);

var instanceHandle = instanceStore.CreateInstanceHandle();
var createOwnerCmd = new CreateWorkflowOwnerCommand();
var view = instanceStore.Execute(instanceHandle, createOwnerCmd, TimeSpan.FromSeconds(30));
instanceStore.DefaultInstanceOwner = view.InstanceOwner; 
```

删除实例所有者

```
var deleteOwnerCmd = new DeleteWorkflowOwnerCommand();
instanceStore.Execute(instanceHandle, deleteOwnerCmd, TimeSpan.FromSeconds(30)); 
```

另一个可能的问题是，当工作流中止时，未调用 Unloaded 回调。

# sql - 加入两个具有 where 子句的选择查询

> ID：12797982
> 
> 赞同：3
> 
> 时间：2012-10-09T10:25:47.817
> 
> 标签：sql, oracle11g

```
SELECT JIVE_USER_ID,
       EMAIL_ID, 
       USER_ID 
FROM VIK_USER WHERE EMAIL_ID='user@example.com'; 
```

### 结果是

```
JIVE_USER_ID    EMAIL_ID              USER_ID
11222            user@example.com     User 
```

### 另一个查询是

```
SELECT  VIK_USER_PROFILE.FIRST_NAME,
        VIK_USER_PROFILE.LAST_NAME,
        VIK_USER.EMAIL_ID 
FROM VIK_USER,VIK_USER_PROFILE 
WHERE VIK_USER_PROFILE.USER_ID=VIK_USER.USER_ID; 
```

### 结果是

```
FIRST_NAME    LAST_NAME     EMAIL_ID
Ray            User        user@exmaple.com 
```

我想使用单个块语句获得结果。如何将这两个选择语句合并为一个。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:29:34.787

```
select VIK_USER.JIVE_USER_ID,
       VIK_USER.EMAIL_ID, 
       VIK_USER.USER_ID,
       VIK_USER_PROFILE.FIRST_NAME,
       VIK_USER_PROFILE.LAST_NAME,
       VIK_USER.EMAIL_ID
from VIK_USER, VIK_USER_PROFILE
where VIK_USER_PROFILE.USER_ID=VIK_USER.USER_ID
and VIK_USER.EMAIL_ID='user@example.com' 
```

详细地说，VIK_USER 和 VIK_USER_PROFILE 在一个 INNER JOIN 中（逗号只是一个快捷方式）。

加入条件为`VIK_USER_PROFILE.USER_ID=VIK_USER.USER_ID`。JOIN 具有连接条件，通常在跨两个表共享相同值的列上。

或者，可以这样编写完全相同的查询：

```
select *
from VIK_USER
inner join VIK_USER_PROFILE on VIK_USER_PROFILE.USER_ID=VIK_USER.USER_ID
where VIK_USER.EMAIL_ID='user@example.com'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T16:09:41.663

上面的答案基于 where or 和子句连接表和过滤器。这对于大表可能效率低下。而是过滤特定 id 的表，然后加入。

# jquery - jQuery - 访问对象属性

> ID：12797986
> 
> 赞同：0
> 
> 时间：2012-10-09T10:26:01.483
> 
> 标签：jquery, jplayer

出于单元测试的目的，我需要检查 jQuery & jPlayer 对象的*src*对象属性。不幸的是，我无法通过 DOM 访问该属性。

这是供参考的初始化代码：

```
$("#jquery_jplayer_1").jPlayer({
    ready: function (event) {
        $(this).jPlayer("setMedia", {
        mp3: "mysound.mp3"
        }).jPlayer("play"));
    }
(...) 
```

Firebug 告诉我的财产在：

```
jPlayer.status.src 
```

但是下面的代码返回一个未定义的。

```
$("#jquery_jplayer_1").jPlayer().status.src 
```

这也返回一个未定义的。

```
$("#jquery_jplayer_1").jPlayer.status.src 
```

*调用和获取src*值的正确路径命令是什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:07:49.400

如果我没记错的话，我认为它就像......

```
$("#jquery_jplayer_1").data("jPlayer").status.src 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:13:17.080

您正在尝试访问函数 jPlayer 返回的对象的属性。但是，您发布的萤火虫输出表明它不是返回值的属性，而是它自身的函数的属性。jPlayer 既是一个函数又是一个具有属性的对象。JS 中的所有函数都是对象，它们可以像任何其他对象一样具有属性，所以

```
jPlayer.status.src 
```

访问由 jPlayer 标识的函数/对象的状态属性的 src 属性，而

```
jPlayer().status.src 
```

访问调用jPlayer标识的函数返回的对象的status属性的src属性

根据评论

$(...).jPlayer

是 jQuery 选择器（通过 jPlayer 插件附加）的一个属性，该属性不必与标识符所`jPlayer`标识的相同。标识符实际上是全局对象的`jPlayer`属性，因此它们可能相同，也可能不同。在您的情况下，它们不一样，或者来自 firebug 的行不正确/不完整

# apache - Apache Flex 4.8.0 在 Flash Builder 4.7 中不工作

> ID：12797987
> 
> 赞同：1
> 
> 时间：2012-10-09T10:26:10.033
> 
> 标签：apache, apache-flex, flash-builder

昨天，我开始在我的 Flash Builder 4.6 中使用 Apache Flex 4.8.0。一切正常，感谢[http://lucamezzalira.com/2012/07/24/how-to-install-flex-4-8-0-sdk-in-flash-builder/](http://lucamezzalira.com/2012/07/24/how-to-install-flex-4-8-0-sdk-in-flash-builder/)上的教程 现在，我下载了Flash Builder 4.7 测试版。发行说明声明支持 Apache Flex 4.8.0。但是，当我尝试将其添加到我的 SDK 列表时，它会显示“目录不包含 flex sdk”。我没有其他选择。我只是做了与教程中相同的操作。怎么了=

# javascript - 转换为 Jquery

> ID：12797988
> 
> 赞同：1
> 
> 时间：2012-10-09T10:26:12.263
> 
> 标签：javascript, jquery

今天早上我正在尝试做最简单的事情，但我的大脑无法参与。过去几周我一直在学习基本的 javascript 和 Jquery。我有一段想要转换为 jquery 的 javascript 代码，我希望我的 javascript 不显眼。

代码片段是

```
<p>
    This is the main content. To display a lightbox click <a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'">here</a>
</p>
<div id="light" class="white_content">
    This is the lightbox content. 
    <a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">Close</a>
</div>
<div id="fade" class="black_overlay"></div> 
```

我正在努力使这个灯箱更有效率，但今天似乎无法解决如何转换..任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:34:01.990

当放置在[点击](http://api.jquery.com/click/)绑定中时，`javascript:void(0);`可以复制来自的行为。`return false`

`document.getElementById('light')`可以重写为`$("#light")`.

您需要在链接中添加类或 ID 以定位它们。

```
$(document).ready(function(){
    $("a").click(function() { // replace this selector as appropriate
        // do stuff here - lookup css in the JQuery docs
        return false; // prevents the link's default action - see also e.preventDefault() in the docs
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:38:07.793

将您的 HTML 更改为：

```
<p>This is the main content. To display a lightbox click
   <a href="#" id="a_show">here</a></p>

<div id="light" class="white_content">This is the lightbox content.
<a href="#" id="a_close">Close</a></div>
<div id="fade" class="black_overlay"></div> 
```

那么jQuery是：

```
$(document).ready(function() {
  $("#a_show").click(function(e) {
      e.preventDefault(); // Prevent's the click from firing - like JavaScript:void(0)
      $("#light").css("display","block");
      $("#fade").css("display","block");
  });

  $("#a_close").click(function(e) {
      e.preventDefault(); // Prevent's the click from firing - like JavaScript:void(0)
      $("#light").css("display","none");
      $("#fade").css("display","none");
  });
}); 
```

或者您可以使用`fadeIn`/ `fadeOut`jQuery 方法，以获得更好的视觉效果 - 如果您想要即时效果，请使用`show()`/`hide()`在它的位置：

```
$(document).ready(function() {
  $("#a_show").click(function(e) {
      e.preventDefault(); // Prevent's the click from firing - like JavaScript:void(0)
      $("#light").fadeIn();
      $("#fade").fadeIn();
  });

  $("#a_close").click(function(e) {
      e.preventDefault(); // Prevent's the click from firing - like JavaScript:void(0)
      $("#light").fadeOut();
      $("#fade").fadeOut();
  });
}); 
```

第一个示例类似于类似，并且可用于通过 jQuery 更改其他 CSS 属性 - 但是，如果您想显示/隐藏或淡化元素，请使用本机 jQuery 方法，如第二个示例中所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T10:38:46.053

而不是 javascript `style.display='none','block'`jquery 用户`Hide() ,show()`方法

```
$(document).ready(function(){
    $("a").click(function() { 

$("#fade").hide();
$("#light").show();

        return false;
    });
}); 
```

但要理解这一切，你应该先开始学习[Jquery](http://docs.jquery.com/Tutorials)，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:39:04.010

假设您在第一个标签上有一个 id="show"，在第二个标签上有一个 id="hide"。

```
$("#show").click(function(e){
    e.preventDefault()
    $("#light, #fade").show()
})
$("#hide").click(function(e){
   e.preventDefault()
   $("#light, #fade").hide()
}) 
```

现在这不是像您的示例那样的内联脚本，因此您需要将其放在标签或外部脚本文件中，然后使用标签拉入

在学习 jquery 时，我可以推荐[Jquery for Designer](http://jqueryfordesigners.com/)视频

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T10:49:35.880

嗯。似乎有几个人打败了我。

这是我对它的价值的回答：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Test</title>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $("#a1").click(function() {
            $('#light').show();
            $('#fade').show();
        });
        $("#close").click(function() {
            $('#light').hide();
            $('#fade').hide();
        });
    });
    </script>
</head>
<body>
    <p>This is the main content. To display a lightbox click <a id="a1" href="#">here</a></p>
    <div id="light" class="white_content" style="display:none">This is the lightbox content. 
    <a id="close" href = "#">Close</a>
    </div>
    <div id="fade" class="black_overlay"></div>
</body>
</html> 
```

如果您正在尝试创建灯箱，为什么要重新发明轮子？如果你在周围搜索，你会发现一些预构建的 jQuery 插件......

[http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts](http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts)

# php - 将 $_GET 和 $_POST 分配给单个变量

> ID：12797989
> 
> 赞同：2
> 
> 时间：2012-10-09T10:26:13.667
> 
> 标签：php

我目前正在这样做：

`$_GET`要求

```
$process = @$_GET['data_process'];
$id = @$_GET['data_id'];
$link = @$_GET['data_page']; 
```

`$_POST`要求

```
$process = @$_POST['data_process'];
$id = @$_POST['data_id'];
$link = @$_POST['data_page']; 
```

虽然对我来说看起来很乱。我该如何完善这个过程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:28:58.027

这就是我所做的

```
function POST($key) {
    return isset($_POST[$key]) ? $_POST[$key] : null;
}

function GET($key) {
    return isset($_GET[$key]) ? $_GET[$key] : null;
} 
```

简单用法

```
$process = GET('data_process');
$id = GET('data_id');
$link = GET('data_page');

$process = POST('data_process');
$id = POST('data_id');
$link = POST('data_page'); 
```

编辑：通过这种方式，您可以轻松分配默认值。例子：

```
function POST($key,$default=null) {
    return isset($_POST[$key]) ? $_POST[$key] : $default;
}

$process = POST('p','defaultvalue'); 
```

@yes123 想要更多在这里你有它..

```
$R = new REQUEST();
$process = $R['data_process'];
$id = $R['data_id'];
$link = $R['data_page']; 
```

使用的类

```
class REQUEST implements \ArrayAccess {
    private $request = array();

    public function __construct() {
        $this->request = $_REQUEST;
    }

    public function offsetSet($offset, $value) {
        if (is_null($offset)) {
            $this->request[] = $value;
        } else {
            $this->request[$offset] = $value;
        }
    }

    public function offsetExists($offset) {
        return isset($this->request[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->request[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->request[$offset]) ? $this->request[$offset] : null;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T10:29:20.480

您可以执行以下操作来检查变量：

```
$id = isset($_GET['id']) ? (int)$_GET['id'] : ''; 
```

不要使用**@**来隐藏通知。你应该有一个干净的代码。

# objective-c - 如何更改 MFMessageComposeViewController 的联系人选择器的标题颜色和文本？

> ID：12797992
> 
> 赞同：0
> 
> 时间：2012-10-09T10:26:21.263
> 
> 标签：objective-c, colors, mfmailcomposeviewcontroller, titlebar, mfmessagecomposeview

我在我的应用程序中使用 MFMessageComposeViewController 使用以下代码在应用程序中显示发送短信功能。

```
MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
picker.messageComposeDelegate = self;
[self presentModalViewController:picker animated:YES];
[picker release]; 
```

您还需要在 .h 文件中将其委托和头文件导入为，

```
#import <MessageUI/MessageUI.h>
...
@interface YourViewController : UIViewController <....., MFMessageComposeViewControllerDelegate> 
```

短信视图控制器看起来像..

![在此处输入图像描述](../Images/45dd0239157cfbffeb045f007ce0ce68.png)

**问题：**

问题是，我在整个应用程序中使用了自定义颜色。该颜色在此短信视图控制器的导航栏颜色中得到反映，如下所示..

![在此处输入图像描述](../Images/058dd69d830392fc3f6db64f28eb2149.png)

但我不想在这里显示自定义标题颜色。我只想显示默认的。有没有办法将此自定义标题颜色更改为默认颜色？

**注意：**我在 Appdelegate 的`didFinishLaunchingWithOptions`方法中添加了自定义导航标题颜色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:39:09.433

您可以使用 UIAppearance appearanceWhenContainedIn 然后添加适用的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:48:08.897

我通过以下代码得到了解决方案..

```
[[UINavigationBar appearanceWhenContainedIn:[ABPeoplePickerNavigationController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];    
[[UIBarButtonItem appearanceWhenContainedIn:[ABPeoplePickerNavigationController class], nil] setBackgroundImage:nil forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

在这里，我只是将 nil 定义为 ABPeoplePickerNavigationController 类的背景颜色。我的应用程序中的所有其他类都将具有相同的导航栏颜色和相同的后退按钮颜色（即，我在 AppDelegate 中添加到导航栏外观的自定义颜色）。

# javascript - Jquery live 在 IE 中运行很慢

> ID：12797994
> 
> 赞同：1
> 
> 时间：2012-10-09T10:26:30.483
> 
> 标签：javascript, jquery

我注意到这条线

```
 $('#opp-tabs input[type=text]:not(#newActionText), #opp-tabs textarea').live('keyup', function() {
        onFormChanged();
    }); 
```

在 IE8 中运行速度极慢，它在 firefox 和 chrom 中运行良好，但在 IE 中却不行，老实说，它是“not”这个词的 cos，它如何定义这种在 IE 中以正常速度运行的不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:30:55.530

您确实应该确保选择器尽可能轻量级，**尤其是**在`.live()`方法中使用时。发生的情况是，事件实际上被绑定到`document.body`并且它需要在那里检查给定事件是否与您的原始选择器字符串匹配。该过程可能非常昂贵，在您的情况下，它还需要调用*Sizzle* ^(**)，这使得它变得更慢。

最佳案例解决方案，使用`.on()`或`.delegate()`限制必要的 DOM 冒泡。这意味着，您不会将事件处理程序绑定到`body`，而是绑定到*最近的共享父节点*，这会提高整体性能。其次，更重要的是，**改进选择器**！

使用*类名*之类的查询你需要的节点，其实不会比当前状态差多少。

要优化当前表单，请尝试如下：

```
$('#opp-tabs input:text, #opp-tabs textarea').not('#newActionText').on('keyup', 'closest shared parent selector', function() {}); 
```

参考：[.delegate()](http://api.jquery.com/delegate/)，[`.on()`](http://api.jquery.com/on/)

^(** Sizzle 是 jQuery 的 javascript css-selector 引擎)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:33:00.770

添加到@jAndy 的答案中，您可以将其表示为

```
$('#opp-tabs input[type=text], #opp-tabs textarea').live('keyup', function() {
    if(this.id != "newActionText") onFormChanged();
}); 
```

# ios - 如何在 IOS 中仅包含使用过的 corodova 插件

> ID：12797996
> 
> 赞同：0
> 
> 时间：2012-10-09T10:26:31.090
> 
> 标签：ios, cordova, phonegap-plugins

我正在开发一个 ios 应用程序。我只在我的应用程序中使用 crodova 的联系人插件。所以只希望在我的构建中包含联系 coordva 插件，而所有其他未使用的插件都必须省略。我想知道，如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:44:36.153

@syed imty 首先你下载新版本的 Cordova 文件。给你“iOS”文件夹和“www”之前复制你的“Cordova.js”文件

仅在您的“www”文件夹中没有任何额外内容并使用标签连接。删除以前的“Cordova.js”或“Phonegap.js”

试试这个，干杯......！

# python - Django 用于什么目的？

> ID：12797999
> 
> 赞同：64
> 
> 时间：2012-10-09T10:26:43.480
> 
> 标签：python, django

我听到很多人在各种论坛上谈论 Django。但我有一个非常基本的问题：Framework 是什么意思以及为什么使用 Django。

在听了很多关于 Django 的内容后，我为 Django 写了几章（来自 Djangobook.com）。运行完这些章节后，我想知道如何使用 Django 创建一个非常简单的网站。（网站应该有几个页面，如主页、收藏夹、关于、联系人，并且将提供静态内容）。

Django可以用于创建这样的网站吗？我在网上搜索了很多但没有找到任何相关的例子，我只遇到了创建博客，论坛网站等的例子。如果Django可以用于创建这个网站，应该是什么方法。

有人可以解释这个基本术语“框架”及其意义吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-09T10:27:57.677

不，它不是用来制作网站的。您的示例听起来就像您想要普通的旧 HTML。

Django 用于创建 Web 应用程序。也就是说，通常由数据库支持的软件，包括某种交互性，通过浏览器运行。框架提供了制作这种软件的结构和常用方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T10:32:46.657

Django 可用于创建动态的高安全性 Web 应用程序。对于创建像您所要求的那样的静态网站，HTML 就足够了。

可以在[这里](https://docs.djangoproject.com/en/dev/intro/tutorial01/)找到创建 django 应用程序的教程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-09T10:33:48.327

我认为您正在寻找的是一个非常简单的 CMS（内容管理系统），其中有许多可用于各种语言/框架。Django 有 django-cms 和 mezzanine（等等）。

django 真正厉害的是快速构建动态网站，你不需要担心大多数事情，你只需要定义你的数据模型，然后就可以开始了（几乎）。如果您想更好地了解可能的情况，请查看[django 教程](https://docs.djangoproject.com/en/1.4/)（在“第一步”下），它为您提供了对 django 以及如何使用它构建网站的很好的介绍。