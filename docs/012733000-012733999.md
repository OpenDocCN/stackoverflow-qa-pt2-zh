# StackOverflow 问答 12733000-12733999

# iphone - ios 6 iphone 应用无法在 iPad 上运行

> ID：12733004
> 
> 赞同：3
> 
> 时间：2012-10-04T17:57:50.677
> 
> 标签：iphone, xcode, ipad, ios6

**iOS 6 中的错误**

以下是生成错误的步骤

1.  *   为iphone生成一个项目
2.  *   向界面构建器添加一个按钮
3.  *   在 ipad 模拟器上运行和构建
4.  *   按下按钮，它不起作用。除非您按 2 次，或将 iPad 倒置位置，因为按钮再次起作用并且应用程序

有谁知道为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:06:13.807

这段代码解决了问题=）

```
-(NSUInteger)supportedInterfaceOrientations{ 
return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:00:07.337

仔细看看你在这里写的：

1.  *   为iphone生成一个项目

您只为 iPhone 创建了一个项目。您可以在构建设置中更改此设置。

![在此处输入图像描述](../Images/0387c008825d9ef3f34002a6d534c9d1.png)

# c# - 使用 MemoryStream 的 XSLT 编译错误

> ID：12733013
> 
> 赞同：1
> 
> 时间：2012-10-04T17:58:16.177
> 
> 标签：c#, asp.net, xslt

我正在动态创建一个 xslt 和 xml 文件以显示我的问卷并保存我的问题选项（用于下拉菜单）。现在我想使用流而不是在实际文件上写入。所以这就是我的做法：

```
XmlReader xslt_reader;
XmlReader xml_reader;

PageLoad(){
  Fn_CreateXSL();
  Fn_CreateXML();
  LoadQuestionnaire();
}

Fn_CreateXSL(){
   xslt_stream = new MemoryStream();

   XmlTextWriter objXSLTWriter = new XmlTextWriter(xslt_stream, Encoding.UTF8);

   objXSLTWriter.Formatting = Formatting.Indented;
   objXSLTWriter.WriteStartDocument();
    ..........
   objXSLTWriter.WriteEndDocument();
   xslt_stream.Seek(0, SeekOrigin.Begin);
   xslt_reader = XmlReader.Create(xslt_stream);
}

Fn_CreateXML(){
   xmlt_stream = new MemoryStream();

   XmlTextWriter objXMLTWriter = new XmlTextWriter(xmlt_stream, Encoding.UTF8);

   objXMLTWriter.Formatting = Formatting.Indented;
   objXMLTWriter.WriteStartDocument();
    ..........
   objXMLTWriter.WriteEndDocument();
   xmlt_stream.Seek(0, SeekOrigin.Begin);
   xmlt_reader = XmlReader.Create(xmlt_stream);
}

LoadQuestionnaire(){
  XslCompiledTransform var_xsl_trans = new XslCompiledTransform();

  // also tried var_xsl_trans.Load(xslt_reader, null, new XmlUrlResolver());
  var_xsl_trans.Load(xslt_reader); // XSLT Compile Error occurs

  StringWriter sw = new StringWriter();

  var_xsl_trans.Transform(xml_reader, null, sw);
} 
```

但是当我尝试加载它时出现“XSLT 编译错误。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:08:46.253

这是对我有用的方法。

我不会使用 XmlWriter->MemoryStream->XmlReader，而是使用`XElement`Microsoft 在 .NET 3.5 中通过 LINQ 引入的。`Load`类的和`Transform`方法都有`XslCompiledTransform`重载，这些重载`IXPathNavigable`作为参数传递 XML。这个接口只有一个方法`XPathNavigator CreateNavigator()`，`XElement`有这样的方法。我不知道为什么微软没有声明`XElement`实现这个接口。可能他们忘记了:-)。所以，为了弥补这个疏忽，我实现了 6 线转换器类`XNavigable`。你会在下面看到它。这是 OP 的 Page_Load() 的模拟：

```
public void Generate()
{
    XElement inputXml = CreateInputXml();
    XElement transformXslt = CreateTransformXslt();

    XslCompiledTransform transform = new XslCompiledTransform();
    transform.Load(new XNavigable(transformXslt), null, null);

    MemoryStream outputStream = new MemoryStream(); 
    transform.Transform(new XNavigable(inputXml), null, outputStream);

    byte[] outputBytes = outputStream.ToArray();
    string outputString = Encoding.UTF8.GetString(outputBytes);
} 
```

我使用`MemoryStream`而不是`StringWriter`因为 StringWriter 总是为我创建 UTF-16 编码的 XML 作为输出。我认为 UTF-16 是由 StringWriter 强加的，因为底层字符串每个字符有 16 位。使用 MemoryStream，我们可以控制编码。

为了完整起见，这里是我的`CreateInputXml`和`CreateTransformXslt`方法的代码。它们只是例子。当然，`XElement.Add()`可以使用方法来生成内容。我只是使用其中列出了所有节点的构造函数来快速进行硬编码。

```
 private static XElement CreateTransformXslt()
    {
        //XSL to substitute <placeholder/> with <realElement/> and copy everything else.
        //<stylesheet version="1.0" xmlns="http://www.w3.org/1999/XSL/Transform">
        //  <output indent="yes" />
        //  <template match="@* | node()">
        //    <copy>
        //      <apply-templates select="@* | node()" />
        //    </copy>
        //  </template>
        //  <template match="placeholder">
        //    <realElement xmlns="" />
        //  </template>
        //</stylesheet>
        XNamespace xsl = "http://www.w3.org/1999/XSL/Transform";
        XNamespace empty = "";
        XElement transformXslt = new XElement(xsl + "stylesheet", new XAttribute("version", "1.0"),
            new XElement(xsl + "output", new XAttribute("indent", "yes")),
            //new XElement(xsl + "strip-space", new XAttribute("elements", "*")),
            new XElement(xsl + "template", new XAttribute("match", "@* | node()"),
                new XElement(xsl + "copy",
                    new XElement(xsl + "apply-templates", new XAttribute("select", "@* | node()"))
                )
            ),
            new XElement(xsl + "template", new XAttribute("match", "placeholder"),
                new XElement("realElement")
            )
        );
        return transformXslt;
    }

    private static XElement CreateInputXml()
    {
        XElement origXml = new XElement(new XElement("Root",
                                            new XElement("Child1", "data1"),
                                            new XElement("placeholder"),
                                            new XElement("Child2", "data2")));
        return origXml;
    } 
```

上面代码中的一个问题是我们不应该`xsl:strip-space elements="*"`在 XSL 中使用。上面有评论。这是因为`XslCompiledTransform`当输入 xml 作为`IXPathNavigable`. 在一条错误消息中，`XmlReader`如果我需要剥离，它建议使用。我认为剥离空间对于生成网页并不重要。

最后，这里是开头提到的转换器类：

```
class XNavigable : IXPathNavigable
{
    XElement _xElement;
    public XNavigable(XElement xElement)
    {
        _xElement = xElement;
    }

    public XPathNavigator  CreateNavigator()
    {
            return _xElement.CreateNavigator();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:05:17.547

正如评论中提到的@kevin，以下解决了我的问题，但我不太确定它为什么会起作用（有一些想法，但不确定）

> 在 xmlt_stream.Seek(0, SeekOrigin.Begin); 之前添加 objXMLTWriter.Flush()

# jquery - Jquery closeOnEscape 无法正常工作

> ID：12733015
> 
> 赞同：1
> 
> 时间：2012-10-04T17:58:31.690
> 
> 标签：jquery

给出以下代码：http: [//jsfiddle.net/UsZG8/1/](http://jsfiddle.net/UsZG8/1/)

```
<html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/base/jquery-ui.css"/>
    <script type="text/javascript">
      $(document).ready(function() {

            $("#modalDiv").dialog({
                modal: false,
                autoOpen: false,
                height: '500',
                width: '750',
                draggable: true,
                resizable: false,
                position: 'center',
                closeOnEscape: true,
            });
            $('#1stPage').click(
                function() {
                    url = 'mypage.html';
                    $("#modalDiv").dialog('option', 'title', 'Test 1st');
                    $("#modalDiv").dialog("open");
                    $("#modalIFrame").attr('src',url);
                    return false;
            });   

            $('#2ndPage').click(
                function() {
                    url = 'myPage2.html';
                    $("#modalDiv").dialog('option', 'title', 'Test 2nd');
                    $("#modalDiv").dialog("open");
                    $("#modalIFrame").attr('src',url);
                    return false;
            });  
      });
    </script>
    </head>
    <body>
        <a id="1stPage" href="#">1st link</a><br><br>
        <a id="2ndPage" href="#">2nd link</a>
        <div id="modalDiv"><iframe id="modalIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title"></iframe></div>
    </body>
</html> 
```

只需单击其中一个链接，closeOnEscape 就可以正常工作。在按下 esc 之前单击两个链接时，closeOnEscape 将不起作用。

似乎我错过了一些东西，我也无法弄清楚问题出在哪里。感谢任何帮助:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:00:40.373

您必须通过单击它来“重新聚焦”对话框。当您单击第二个链接时，它会失去焦点

在打开之前发送关闭命令将重新聚焦它

```
$(document).ready(function() {

        $("#modalDiv").dialog({
            modal: false,
            autoOpen: false,
            height: '500',
            width: '750',
            draggable: true,
            resizable: false,
            position: 'center',
            closeOnEscape: true, 
        });
        $('#1stPage').click(
            function() {
                url = 'mypage.html';
                $("#modalDiv").dialog('option', 'title', 'Test 1st');
                $("#modalDiv").dialog("close");//<----
                $("#modalDiv").dialog("open");
                $("#modalIFrame").attr('src',url);
                $("#modalDiv").click();
                return false;
        });   

        $('#2ndPage').click(
            function() {
                url = 'myPage2.html';
                $("#modalDiv").dialog('option', 'title', 'Test 2nd');
                $("#modalDiv").dialog("close");//<----
                $("#modalDiv").dialog("open");
                $("#modalIFrame").attr('src',url);
                return false;
        });  
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:01:44.957

我相信这是因为模态对话框失去了焦点。打开对话框后，将焦点设置为它。我认为您的 closeOnEscape 问题会消失。

```
$('#1stPage').click(
    function() {
    url = 'mypage.html';
    $("#modalDiv").dialog('option', 'title', 'Test 1st');
    $("#modalDiv").dialog("open");
    $("#modalIFrame").attr('src',url);
    //focus the modal div
    return false;
});   

$('#2ndPage').click(
    function() {
    url = 'myPage2.html';
    $("#modalDiv").dialog('option', 'title', 'Test 2nd');
    $("#modalDiv").dialog("open");
    $("#modalIFrame").attr('src',url);
    //focus the modal div
    return false;
}); 
```

# c++ - C++ Curl，如何读取返回数据？

> ID：12733019
> 
> 赞同：0
> 
> 时间：2012-10-04T17:58:50.843
> 
> 标签：c++, arrays, curl, imdb

我正在尝试使用 curl 和[http://www.deanclatworthy.com/imdb](http://www.deanclatworthy.com/imdb)从 IMDB 获取电影和电视节目信息。我正在使用[http://curl.haxx.se/libcurl/c/simple.html中的 simple.c 示例](http://curl.haxx.se/libcurl/c/simple.html)

```
cout << "Type a movie name: " << endl;
getline(cin, searchTerm);

replace(searchTerm.begin(), searchTerm.end(), ' ', '+');

CURL *curl;
CURLcode res;

string temp;
temp = "http://www.deanclatworthy.com/imdb/?q=" + searchTerm;

curl = curl_easy_init();

if(curl) {

    curl_easy_setopt(curl, CURLOPT_URL, temp.c_str());

    /* Perform the request, res will get the return code */
    res = curl_easy_perform(curl);
    /* Check for errors */
    if(res != CURLE_OK)
        fprintf(stderr, "curl_easy_perform() failed: %s\n",
                curl_easy_strerror(res));

    /* always cleanup */
    curl_easy_cleanup(curl);
} 
```

这是我的输出，如果我搜索黑暗骑士崛起：

**输入电影名称：** 黑暗骑士崛起 **{"imdbid":"tt1345836","imdburl":"http://www.imdb.com/title/tt1345836/","genres":"Action,Crime,Thriller" ,"languages":"English","country":"USA,UK","votes":"390735","stv":0,"series":0,"rating":"8.8","runtime" :"165min","title":"黑暗骑士崛起","year":"2012","usascreens":4404,"ukscreens":0}**

我的问题是我希望将返回的带有信息的文本放入一个数组中，这样我就可以很好地整理它，例如

```
movieInto[14] = *array* 
```

然后如果我想标题、评级、年份等，我可以调用数组的不同部分。它已经被格式化为一个数组，但我不知道要调用什么来进入。

希望这里聪明的头脑可以帮助我=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:01:59.717

该数据看起来像 JSON，因此您应该使用 JSON 解析器 - 有[很多选项](https://www.google.com/search?q=c%2B%2B+json+parser)。

# jquery-mobile - JQuery Mobile - 修复了多页模板中的导航

> ID：12733023
> 
> 赞同：2
> 
> 时间：2012-10-04T17:59:02.657
> 
> 标签：jquery-mobile

我真的必须在每个页面 DIV 上重复“导航栏”吗？或者是否有一种解决方案可以为多页 html 中的所有页面仅使用一个页脚？

```
 <div data-role="page" id="page11">
        <div data-role="header"> <h1>Home</h1> </div>

        <div data-role="content"> <h3>TEST</h3>
            <p> <a href="#dialog" data-rel="dialog" data-transition="pop" data-role="button">Dialogbox </a> </p>
        </div>

        <div data-role="footer" data-id="foo1" data-position="fixed"> 
            <div data-role="navbar">
                <ul>
                    <li> <a href="#page1" data-iconpos="top" data-icon="home">Start </a> </li>
                    <li> <a href="#page2" data-iconpos="top" data-icon="help">Hilfe </a> </li>
                </ul>
            </div> 
        </div>
    </div>

    <div data-role="page" id="page2">
        <div data-role="header"> <h1>Hilfe </h1> </div>
        <div data-role="content"> <h3>TEST </h3> </div>

         <div data-role="footer" data-id="foo1" data-position="fixed"> 
            <div data-role="navbar">
                <ul>
                    <li> <a href="#page1" data-iconpos="top" data-icon="home">Start </a> </li>
                    <li> <a href="#page2" data-iconpos="top" data-icon="help">Hilfe </a> </li>
                </ul>
            </div> 
        </div>
    </div> 
```

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:53:40.780

是的，您的导航栏/页脚/页眉必须出现在所有页面 DOM 元素中。但是为了避免重复自己，您在客户端和/或服务器端有很多选择。我总是建议在这种情况下使用某种模板。

在客户端，您可以将导航栏放入`<script>`标签下方的`<body>`标签中。为这个脚本标签分配一个唯一的 id 属性并添加一些 JavaScript，如下所示：

模板片段：

```
<script type="text/template" id="myFooterTemplateID">
    <div data-role="footer" data-id="foo1" data-position="fixed"> 
        <div data-role="navbar">
            <ul>
                <li> <a href="#page1" data-iconpos="top" data-icon="home">Start </a> </li>
                <li> <a href="#page2" data-iconpos="top" data-icon="help">Hilfe </a> </li>
            </ul>
        </div> 
    </div>
</script> 
```

JavaScript：

```
jQuery('*[data-role="page"]').on("pagebeforecreate", function(e) {
    var page = jQuery(this);
    // please replace this part with a template engine ...
    var header = jQuery(jQuery("#myFooterTemplateID").html()); 

    // bind some events to the header's content here - if any
    // for example: 
    // header.find('.myButtonClass').bind('tap', onButtonClicked);

    // append to page
    page.append(header);
}); 
```

查看[Handlebars.js](http://handlebarsjs.com/)或[Underscore-Templates](http://underscorejs.org/#template)以获得生产就绪的 JS 模板，而不是编写自己的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-21T11:45:38.690

不，*在以后的 jqm 版本中，例如 1.4.0 版本*，您不需要在每个页面 DOM 元素中包含导航栏。

这是一个出现在所有页面上的导航栏示例，并且只包含一次，在页面元素之外： http: [//demos.jquerymobile.com/1.4.0/toolbar-fixed-persistent/](http://demos.jquerymobile.com/1.4.0/toolbar-fixed-persistent/)

基本上，您只需要添加`data-position="fixed"`到页眉/页脚，并使用以下命令启动工具栏：

```
$(function() {
    $( "[data-role='navbar']" ).navbar();
    $( "[data-role='header'], [data-role='footer']" ).toolbar();
}); 
```

# java - 使用 .split 时的前导空格

> ID：12733033
> 
> 赞同：1
> 
> 时间：2012-10-04T17:59:39.657
> 
> 标签：java, string, tokenize

我有一个任务是从我的教科书中修改一个程序。该程序从用户那里获取一个输入字符串，然后以输入的字数作为响应。我的任务是将其更改为进行字符计数而不是字数计数。我的工作正常，但是当我使用 .split 对字符进行标记时，我在数组中得到了一个前导空格，有人可以解释为什么吗？

```
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;
import java.util.Set;
import java.util.TreeSet;

/**
*
* @author Frank
*/
public class LetterCounting 
{
    public static void main( String[] args )
   {
      // create HashMap to store String keys and Integer values
      Map< String, Integer > myMap = new HashMap< String, Integer >(); 

      createMap( myMap ); // create map based on user input
      displayMap( myMap ); // display map content
   } // end main

   // create map from user input
   private static void createMap( Map< String, Integer > map ) 
   {
      Scanner scanner = new Scanner( System.in ); // create scanner
      System.out.println( "Enter a string:" ); // prompt for user input
      String input = scanner.nextLine();

      // tokenize the input
      String letters = input.replaceAll("\\s", "");
      String[] tokens = letters.split( "" );

      // processing input text 
      for ( String token : tokens ) 
      {
         String word = token.toLowerCase(); // get lowercase word

         // if the map contains the word
         if ( map.containsKey( word ) ) // is word in map
         {
            int count = map.get( word ); // get current count
            map.put( word, count + 1 ); // increment count
         } // end if
         else 
            map.put( word, 1 ); // add new word with a count of 1 to map
      } // end for
   } // end method createMap

   // display map content
   private static void displayMap( Map< String, Integer > map ) 
   {      
      Set< String > keys = map.keySet(); // get keys

      // sort keys
      TreeSet< String > sortedKeys = new TreeSet< String >( keys );

      System.out.println( "\nMap contains:\nKey\t\tValue" );

      // generate output for each key in map
      for ( String key : sortedKeys )
         System.out.printf( "%-10s%10s\n", key, map.get( key ) );

      System.out.printf( 
         "\nsize: %d\nisEmpty: %b\n", map.size(), map.isEmpty() );
   } // end method displayMap
} // end class WordTypeCount 
```

我有来自 netbeans 的 dubug 数据的屏幕截图，但我没有足够的声誉来发布它。如果有人想看，请告诉我，我可以发给你。

提前感谢您的意见。

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:29:01.350

String.split() 使用正则表达式进行拆分。[您可以改用StringUtils 库](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)中的一种 splitXYZ() 方法，该方法将字符串用作分隔符并产生更可预测的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:07:05.797

你为什么不尝试`replaceAll(regex, replacement)`方法并编写一个简单的代码如下？

```
 Scanner scanner = new Scanner( System.in ); // create scanner
    System.out.println( "Enter a string:" ); // prompt for user input
    String inputString = scanner.nextLine();
    System.out.println(inputString);
    System.out.println(inputString.length());
    String truncatedString = inputString.replaceAll(" ", "");
    System.out.println(truncatedString);
    System.out.println(truncatedString.length()); 
```

# php - 组合这 2 个 sql 查询时出现错误

> ID：12733035
> 
> 赞同：0
> 
> 时间：2012-10-04T17:59:50.967
> 
> 标签：php, mysql

所以我有这个

```
$sql_totalbooknumber =  "SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND `category_id <>355";
$sql_updatebooknumber = "UPDATE `probid_categories` SET `items_counter` = ".$sql_totalbooknumber." WHERE  `category_id` =  '355'";

            if (!mysql_query($sql_totalbooknumber))
  {
  die('Error: ' . mysql_error());
  };
            if (!mysql_query($sql_updatebooknumber))
  {
  die('Error: ' . mysql_error());
  }; 
```

不知何故，它们单独工作正常（如果我注释掉一个或另一个）但是当我将它们组合起来时，我得到了这个错误

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND 'cate' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:01:07.843

`$sql_totalbooknumber`是一个字符串，其中包含您的查询。不是该查询的结果。

您期望将整数传递给`$sql_updatebooknumber`，但您将包含第一个查询的字符串传递给它。

试试这个：

```
$sql_totalbooknumber =  "SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND `category_id` <>355";
$result = mysql_query($sql_totalbooknumber);
list($id) = mysql_fetch_array($result);

$sql_updatebooknumber = "UPDATE `probid_categories` SET `items_counter` = ".$id." WHERE  `category_id` =  '355'";
mysql_query($sql_updatebooknumber); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:02:34.930

你正在做一个子查询；你真的需要用括号括起来：

```
$sql_totalbooknumber =  "SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND `category_id` <>355";
$sql_updatebooknumber = "UPDATE `probid_categories` SET `items_counter` = (".$sql_totalbooknumber.") WHERE  `category_id` =  '355'"; 
```

否则，数据库无法正确解析。

# sql - 有条件的 SSIS 行计数

> ID：12733038
> 
> 赞同：-1
> 
> 时间：2012-10-04T17:59:57.367
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有 Product 表有 Productid 和 Product_No 作为主键。现在，当我处理行并将其过滤为黑色、蓝色、红色、白色类别时。我知道如何过滤它，但问题是我必须更新另一个表 Product_Category(Product_Id as PK) 中的行数。但我根据 Product_DI 进行了更新。

说明：-用黑色产品表过滤产品表

```
Product_ID | Product_No | Price | Color
1          | 1          | 2.50  | Black
1          | 2          | 0.96  | Black
1          | 3          | 0.96  | Black
1          | 4          | 0.96  | Black
2          | 1          | 0.96  | Black
2          | 2          | 0.96  | Black
3          | 1          | 0.96  | Black 
```

所以我必须更新 Product_Category

```
Product_ID | Color_CNT
1          | 4
2          | 2
3          | 1 
```

请分享你的知识。感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:14:41.530

除非我遗漏了您的问题，否则您可以`UPDATE`使用第一张桌子对您的第二张桌子运行：

```
update t2
set Color_CNT = ColorCount
from table2 t2
left join
(
  select count(color) ColorCount, Product_ID
  from table1
  group by Product_ID
) t1
  on t2.product_id = t1.product_id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9752b/3)

如果您需要`INSERT`数据，那么您可以执行以下操作：

```
insert into table2 (product_id, color_cnt)
select Product_ID,  count(color) ColorCount
from table1
group by Product_ID; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5aeaa/3)

这两个都可以在 SSIS 中完成，您将创建一个`Execute SQL Task`查询并将其放置在 SQL 语句字段中。这将在您的包运行时执行。

# sql - 维护计划失败时发送通知

> ID：12733040
> 
> 赞同：1
> 
> 时间：2012-10-04T18:00:01.857
> 
> 标签：sql, sql-server, tsql

当维护计划失败时，是否有数据库邮件发送通知？或者这是否必须在与维护计划相对应的工作上完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:21:00.143

要使用 DB Mail，您需要在 BID 中打开维护计划，然后添加一个执行 SQL 任务，该任务使用存储过程发送邮件。

但是，话虽如此，我建议您将发送邮件任务添加到维护计划中，然后在任务和发送邮件任务之间添加失败优先级约束。

您也可以通过在 BIDS 中打开维护计划并添加 On Error 事件处理程序，然后将 Send Mail 任务放入其中来实现相同（更优雅）。

# sql - SQL 查找完全包含给定集合的集合

> ID：12733044
> 
> 赞同：2
> 
> 时间：2012-10-04T18:00:09.607
> 
> 标签：sql, oracle

我有两个这样的表：

```
create table doi (
    id number primary key not null,
    -- Other columns omitted
);

create table doi_membership (
    id number primary key not null,
    doi_id number not null, --foreign key to doi.id
    key_1 number not null,
    key_2 number not null,
    -- Other columns omitted
); 
```

我有一组 key_1、key_2 对，我想看看是否有一个 doi 包含给定 key_1、key_2 对的完整集，仅此而已。我似乎想不出执行此操作所需的 SQL。如果有帮助，我正在使用 oracle 数据库。有任何想法吗？

更新：

我认为我没有很好地解释这一点，所以我将举一个例子。

从概念上讲，单个 DOI 包含 key_1、key_2 对的列表。我有自己的 key_1、key_2 对列表，我想看看是否存在一个 DOI，其对列表与我的对列表完全匹配。

因此，假设有一个 DOI 具有以下 key_1、key_2 对列表（这些行中的每一行都是与同一 doi 相关的单独 doi_membership 行）：

```
1, 2
3, 4
5, 6 
```

另一个 DOI 具有以下对列表：

```
1, 2
3, 4
5, 6
7, 8 
```

我拥有的那组对是

```
1, 2
3, 4
5, 6 
```

我想匹配给定的第一个 DOI，因为它的对集和我的对集完全匹配。第二个 DOI 不应**匹配**。

我希望这能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:18:53.337

我认为处理集合成员的最佳方法是使用`HAVING`SQL 中的子句。这个想法是将集合的元素组合在一起，在这种情况下，每个 doi 的成员记录，然后在个人级别进行测试。

例如，下面的 having 子句将检查 keyval1 是否存在：

```
having sum(case when keyval_1 = <keyval1> then 1 else 0 end) > 0 
```

它通过将记录数与 相加来做到这一点`keyval_1 = <keval1>`。如果大于0，则“doi_id”满足条件。

您的条件有点复杂，因为您正在查看成对的值。解决此问题的一种方法是将值连接在一起（不是必需的，但它在某种程度上简化了逻辑）。以下子句验证 doi_id 上是否仅存在您的值对：

```
having sum(case when concat(key_1, ',', key_2) in (<key value pairs here>)
                then 0 else 1 end) = 0 
```

它的作用是计算密钥对不匹配的记录数。如果有，则比较失败。您需要为 in 子句连接您的键值对。类似的东西`in ('1,1', '2,2', '3,14')`。

为了推广到所有匹配的条件，我使用以下内容：

```
select doi_id
from doi_membership
group by doi_id
having sum(case when concat(key_1, ',', key_2) in (<key value pairs here>)
                then 0 else 1 end) = 0 and 
       sum(case when concat(key_1, ',', key_2) = <key pair 1>
                then 1 else 0 end) > 0 and
       sum(case when concat(key_1, ',', key_2) = <key pair 2>
                then 1 else 0 end) > 0 and
       . . .
       sum(case when concat(key_1, ',', key_2) = <key pair n>
                then 1 else 0 end) 
```

该`HAVING`子句首先测试所有对都存在。然后剩下的子句测试每一对的存在。

还有其他方法。我发现该`HAVING`子句是最通用的，因为它可以容纳关于集合包含标准的广泛逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:21:35.347

假设您的密钥对列表存储在一个表中，这是您可以考虑的另一种方法：

```
SELECT m.doi_id
FROM doi_membership m
LEFT JOIN sample_key_set s
  ON m.key_1 = s.key_1 AND m.key_2 = s.key_2
GROUP BY m.doi_id
HAVING COUNT(*) = ALL(
  COUNT(s.key_1),
  (SELECT COUNT(*) FROM sample_key_set)
)
; 
```

查询外连接`doi_membership`到样本对列表，对结果集进行分组`doi_id`，并将组中的总行数与匹配行的总计数以及样本对的总计数进行比较。如果所有计数都相等，`doi_id`则返回相应的计数。

如果你不知道 ALL 谓词，这个条件

```
COUNT(*) = ALL(
  COUNT(s.key_1),
  (SELECT COUNT(*) FROM sample_key_set)
) 
```

只是一个捷径

```
 COUNT(*) = COUNT(s.key_1)
AND COUNT(*) = (SELECT COUNT(*) FROM sample_key_set) 
```

为了表明该方法有效，以下是分析的各种示例：

```
#   Rows in "m"  Rows in "s"  Count values          Outcome
--  -----------  -----------  --------------------  -------
1      1, 2         1, 2      COUNT(*)          =2  MATCH
       3, 4         3, 4      COUNT(s.key_1)    =2
                              SELECT COUNT(*)...=2
--  -----------  -----------  --------------------  -------
2      1, 2         1, 2      COUNT(*)          =1  NO
                    3, 4      COUNT(s.key_1)    =1  MATCH
                              SELECT COUNT(*)...=2
--  -----------  -----------  --------------------  -------
3      1, 2         1, 2      COUNT(*)          =2  NO
       5, 6         3, 4      COUNT(s.key_1)    =1  MATCH
                              SELECT COUNT(*)...=2
--  -----------  -----------  --------------------  -------
4      1, 2         1, 2      COUNT(*)          =3  NO
       3, 4         3, 4      COUNT(s.key_1)    =2  MATCH
       5, 6                   SELECT COUNT(*)...=2 
```

如您所见，使用此方法，仅返回键集完全匹配的 DOI。

作为将示例密钥对列表存储在表中的替代方法，您可以使用如下公共表表达式：

```
WITH sample_key_set AS (
  SELECT *key[1]*, *key[2]* FROM DUAL UNION ALL
  SELECT *key[3]*, *key[4]* FROM DUAL UNION ALL
  ...
)
SELECT m.doi_id
FROM ... /* the rest of the above query */ 
```

[在 SQL Fiddle](http://sqlfiddle.com/#!4/86878/1)上还有一个演示方法可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:06:12.740

```
SELECT <whatever you need>
FROM doi_membership
WHERE (Key_1 = <key value your looking for> AND Key_2 = <key value you're looking for>) 
```

除非我误读了这个问题，否则我认为这很容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T19:19:25.657

你不能只使用自加入吗？

好的，所以您不需要内部比较，只需要针对参数/硬编码的密钥对值。

内部检查将是：

```
SELECT 
    d.doi_ID, 
    c.CountOfID
FROM 
    doiMembership d INNER JOIN 
    (SELECT 
    doi_ID,Count(ID) CountOfID
    FROM doiMembership
    GROUP BY doi_ID) c ON 
    d.doi_ID = c.doi_ID INNER JOIN 
    (SELECT 
    doi_ID, Count(ID) CountOfID
    FROM doiMembership
    GROUP BY doi_ID) c2  on
    c2.CountOfID = c.CountOfID  inner join
    doiMembership d2 ON 
    c2.doi_ID = d2.doi_ID and
    c.CountOfID = d2.CountOfID AND 
    (d.key1 = d2.[key1]) AND 
    (d.key2 = d2.[key2])
WHERE 
    (d.ID <> d2.[id]) 
GROUP BY 
    d.doi_ID, 
    c.CountOfID 
```

但如果您想与已知的 doi 进行比较，您可以使用：

```
SELECT 
    d.doi_ID, 
    c.CountOfID
FROM 
    doiMembership d INNER JOIN 
    (SELECT 
    doi_ID,Count(ID) AS CountOfID
    FROM doiMembership
    GROUP BY doi_ID) c ON 
    d.doi_ID = c.doi_ID INNER JOIN 
    (SELECT 
    doi_ID, Count(ID) AS CountOfID
    FROM doiMembership
    GROUP BY doi_ID) c2  INNER JOIN 
    doiMembership AS d2 ON 
    c2.doi_ID = d2.doi_ID and
    c.CountOfID = d2.CountOfID
WHERE 
    (d.ID <> d2.[id]) AND 
    (d.key1 = d2.[key1]) AND 
    (d.key2 = d2.[key2]) and
    d.doi_id = 'value'
GROUP BY 
    d.doi_ID, 
    c.CountOfID 
```

# html - 列表索引背景图像 - 到前面？

> ID：12733046
> 
> 赞同：0
> 
> 时间：2012-10-04T18:00:14.807
> 
> 标签：html, css

我正在为客户设计一个在线商店，产品图像需要显示在一个框架中，但是这个框架应该显示在图像之上而不是它后面（框架的图像是一个有点花哨的东西，不一样形状作为产品图像，因此它需要位于顶部 - 这是产品页面屏幕截图的链接，列表中包含背景图像 -[产品页面](http://varoom.ie/pub_content/squiggle.png)

（那些粉红色的小图像需要坐在图像的顶部）这是CSS

```
.product-grid{
 list-style: none;
 margin: 0;
 color: {{ settings.grid_text_colour }};
 }

   .product-grid li{
 padding: 25px 5px 5px 5px;
 width: 190px;
 float: left;
 margin: 0 15px 10px 0;
 position: relative;
 text-align: center;
background: url({{ 'squiggle.png' | asset_url }}) no-repeat;
} 
```

无论如何，透明的背景图像（squiggle.png）实际上可以位于列表中显示的图像之上吗？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:21:42.567

我假设产品图像是`<img>`包含在列表项中的标签。

由于您的“框架”是父元素上的背景图像，因此它必须出现在该元素内的任何子元素下方。

有几种方法可以获得您想要的效果：

1.  更改标记和 CSS：添加一个以框架作为背景图像的额外元素（并更改 CSS 以删除框架作为列表项的背景图像）。这个元素需要是列表项的另一个子元素，并且为了出现在产品图像的顶部，它需要出现在图像元素之后，或者需要有一个位置和一个 z-index。

2.  仅更改 CSS：将您的背景图像设置为`.product-grid li:after`***以及这些其他属性以使其`:after`可见。

    `content: ''; display: inline-block;`

无论您是使用额外元素还是`:after`伪元素来保存框架，都需要一些额外的属性来正确调整大小和位置：

```
position: absolute;
top: -20px;
left: -20px;
right: -20px;
bottom: -20px; 
```

`top`您需要对,等位置属性使用负值`left`，以使框架图像大于产品图像。`-20px`只是一个估计；玩它并找出正确的确切值。

通过执行这些操作中的任何一个，您可能会引入可用性问题，因此不要忘记通过进一步的标记更改或使用 JS 来解决它。如果您的产品图片是链接，并且框架覆盖了其中的一部分，那么用户可能最终会在他们认为点击了图片时点击了框架，并想知道为什么他们没有得到产品页面/弹出窗口/其他任何内容。

如果您同意我上面的第一个建议，您可以通过将产品图像和框架容器元素都包装在链接元素中来解决链接问题。如果您采用第二个建议，您可以使用 JS 在重定向到您的产品链接的整个列表项上放置一个单击处理程序，或者使用链接元素`:after`而不是列表项来保存您的框架图像。`:before`并且`:after`伪元素表现为子元素而不是它们所属元素的兄弟元素，因此单击锚点`:after`元素将注册为单击锚点。

***可能 `.product-grid li a:after`取决于您如何解决链接点击问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:07:06.987

背景图像在背景中，期间。您必须将包含背景的元素绝对定位在包含图像的不同元素上。您可以使用绝对定位来执行此操作。

# objective-c - 接口方法的默认可见性是什么？

> ID：12733049
> 
> 赞同：1
> 
> 时间：2012-10-04T18:00:25.853
> 
> 标签：objective-c, methods, interface, member

根据 Apple 的 Objective-C 规范，所有未标记的实例变量都是`@protected`. 我没有找到任何信息来说明哪个指令是方法的默认值；他们`@protected`是，`@private`还是`@public`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:10:28.010

这些规范不适用于方法。方法的工作方式与 ObjC 中的 ivars 完全不同。具体来说，实际上并没有*调用方法*。一*发消息*。然后对象解释消息并采取一些行动。通常的操作是运行与发送的消息同名的方法，但还有其他选项。* 另一个常见的方法是抛出异常，因为对象无法弄清楚它应该对消息做什么。这个分派步骤是 ObjC 的基础，这意味着方法不能真正是私有的。

任何消息都可以发送到任何对象**，因此对象上存在的任何方法都可以在运行时运行。

可以在类扩展或类别中声明伪私有方法，这样特定的翻译单元就看不到它。然后，当您尝试发送相应的消息时，您会收到编译器警告或错误，但仍然可以（通过`performSelector:`和变体，或`objc_msgSend()`直接使用）运行“私有”方法。

* * *

*例如在动态方法解析和消息转发下的[运行时编程指南中介绍的那些。](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtDynamicResolution.html#//apple_ref/doc/uid/TP40008048-CH102-SW1)

**需要注意的是，在 ARC 下编译并使用括号语法时`[obj message]`，编译器必须已经看到该类型对象的具有该名称的方法声明，但这是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:10:03.190

所有方法和所有实例变量都可以从任何地方访问（使用 KVC），没有真正的私有。但是，如果您尝试发送不在对象接口中的消息（调用方法），编译器会给您一个警告。所以@interface 中的所有方法都是公共的，其他的都是私有的。关于您的实例变量，不再需要它们。改为使用属性。

# html - HTML 视频问题

> ID：12733050
> 
> 赞同：1
> 
> 时间：2012-10-04T18:00:34.887
> 
> 标签：html, video, html5-video, mime

我正在尝试在我的网站上放一段视频。它在我桌面上的资源管理器中播放，但是当我将它放到网上时它不播放（但它在我的手机上播放），它只是显示一个黑屏，中间有一个“x”。我没有使用 Apache 或 Wordpress，只是使用带有 fasthosts 的 HTML 和记事本作为我的提供者。

从我一直在网上阅读的内容来看，这可能与 MIME 类型有关。我已经尝试了一切，但无法弄清楚。

这是到目前为止的代码......

```
<video width="360" height "203" controls="controls">
 <source src="Media\Videos\Water Video 2.mp4" type="video/mp4">
 <source src="Media\Videos\Water Video 2.ogg" type="video/ogg">
 <source src="Media\Videos\Water Video 2.webm" type="video/webm">
</video> 
```

我拥有的 .htaccess 文件的唯一内容是......

```
AddType video/ogg .ogg
AddType video/webm .webm
AddType video/mp4 .mp4 
```

任何可以提供的帮助都会很棒。

在此先感谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:38:12.430

首先，我会尝试其中一个以及您的 HTML5 嵌入：

[http://videojs.com/](http://videojs.com/)

[http://mediaelementjs.com/](http://mediaelementjs.com/)

这些将帮助您的视频在不支持 HTML5 <video> 的浏览器上播放。

其次，确保您的元数据位于 mp4* 的前面，这样文件就会立即播放，而不是等待整个视频下载完毕。对于 Webm 文件，请确保它具有低 kbps（例如 600kbps），以便可以在 Android 上加载。

*这就是我使用的：[http ://rndware.info/products/metadata-mover.html](http://rndware.info/products/metadata-mover.html)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:07:15.170

我得到了同样的黑框，中间有一个 x...除了这是 HTML5 音频标签，我只在 IE 9 中遇到这个错误。

对我来说，最终我需要更改 Internet Explorer 中的设置：

工具 -> Internet 选项 -> 高级 -> 多媒体：“在网页中播放声音”。

无论如何，如果这个问题只发生在 IE 9 中，我会检查那些多媒体设置，看看是否有什么可以改变的，让它神奇地活起来。

希望有帮助！

# java - JavaFX 2 路径绘制性能

> ID：12733051
> 
> 赞同：3
> 
> 时间：2012-10-04T18:00:35.623
> 
> 标签：java, performance, drawing, javafx-2

我有一个添加`Group`了`Path`节点的 JavaFX，我每秒向其中添加大约 30 次数据。这会导致我的整个 GUI 在大约一分钟后变得*非常*迟钝且无响应。首先，我添加这样的路径`Group`：

```
root.getChildren().add(path); 
```

数据添加如下：

```
while(true) {
    // Calculate x and y...

    path.getElements().add(new LineTo(x, y));
    path.getElements().add(new MoveTo(x, y));

    // Sleep 33 milliseconds...
} 
```

如果我不将路径添加到组，但之后仍然添加数据，GUI 仍然响应，所以性能问题似乎是在绘制路径的形状时。为什么？我可以做些什么来提高性能？这是已知的发生还是我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T18:30:18.047

JavaFX 2.1 中存在与路径性能相关的已知问题（[创建路径非常慢](http://javafx-jira.kenai.com/browse/RT-18788)），而 JavaFX 2.2 中未解决的另一个类似问题（[提高路径渲染性能](http://javafx-jira.kenai.com/browse/RT-20405)）。[如果您检查JavaFX 问题跟踪系统](http://javafx-jira.kenai.com)，可能还有其他问题。对于目前正在开发的 JavaFX8，许多元素的性能得到了[极大的提升](http://fxexperience.com/2012/09/preliminary-performance-numbers-in-javafx-8/)。

您可以尝试的另一种方法是使用[画布](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html)而不是路径。但是，取决于您的用例，对于某些用例，这将是一个合适的替代品，而对于其他用例则不是。

如果您可以创建一个简短的可重现测试用例并为其提交 JavaFX 问题，JavaFX 团队将调查您看到的任何性能问题，如果它们是由底层系统实现引起的，则可能会解决这些问题。

您还应该检查您的实现以了解以下内容：

1.  不要在 JavaFX 线程上调用 sleep。
2.  不要在 JavaFX 线程上做任何处理器密集型的事情。
3.  不要在 JavaFX 线程上执行阻塞 I/O。
4.  不要在 SceneGraph 或路径中放置数万个节点。
5.  从另一个线程读取或写入 SceneGraph 中的对象时，请使用[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)。
6.  不要太频繁地调用 Platform.runLater，否则您最终会导致事件处理系统过载。

并不是说您的代码有任何上述问题，只是需要检查。

# java - 让一个物体旋转并面对一个中心点

> ID：12733052
> 
> 赞同：0
> 
> 时间：2012-10-04T18:00:35.480
> 
> 标签：java, trigonometry

我正在开发一款游戏，玩家控制一艘宇宙飞船，该飞船围绕中心点按时钟/逆时针方向旋转，同时从该点发射射弹。我把所有的东西都写好了，虽然实际的位置有点偏离并且旋转不起作用。

对于运动，我有：

```
if (code==KeyEvent.VK_LEFT) {
            trans.setToIdentity();
            trans.translate(player.x-10, player.y-10);
            player.moveLeft();
                            //trans.rotate(?)
            System.out.println(player.x + " " + 
                               player.y + " " + player.dX + " " + player.dY);
} 
```

`trans`AffineTransform在哪里，`player.moveLeft()`将玩家的坐标更改为圆上的一个点（按预期工作，使用 sin/cos/theta，简单触发）。当我用它绘制一个对象时，`Graphics2D`它会跟随坐标，但是当我使用导入的图像时，它会跟随几个（~25）像素。由于我有一个角度、x、y 和半径，我可以使用什么来`AffineTransform`围绕其中心点旋转图像并让它始终面向中心点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:42:25.617

```
 if (code==KeyEvent.VK_LEFT) {
            trans.setToIdentity();
            player.moveLeft();
            trans.translate(player.x-shipImg.getWidth()/2,player.y-shipImg.getHeight()/2);
            trans.rotate(player.angle-1.57, shipImg.getWidth()/2, shipImg.getHeight()/2);
        } 
```

弄清楚了。首先将船的中心点移动到玩家的 x,y 坐标，然后围绕中心点旋转（稍微调整角度）。

# c - 获取正确的参数指针

> ID：12733057
> 
> 赞同：2
> 
> 时间：2012-10-04T18:00:46.377
> 
> 标签：c, gcc, clang, callstack

我有这个......奇怪的问题，我正在拼命寻找解决方案。

我们有这个例子：（为 32 位系统制作）

```
#include <stdio.h>

//unsigned foo(unsigned arg_a, unsigned arg_b) {
unsigned foo(unsigned arg_a, ...) {
        unsigned *temp = (unsigned *)((unsigned)&arg_a + 4);
        return *temp + arg_a;
}

int main(void) {
        int i = foo(0xbe00, 0x00af);
        printf("We got a %x\n", i);
        return 0;
} 
```

函数 foo 有 2 个参数。目标是根据 arg_a 的地址“猜测”arg_b 的地址。这是基于调用者 (main) 将 arg_a 和 arg_b 推入堆栈的假设（因此 (int)&arg_b - (int)&arg_a == 4 ）。

根据编译器和优化级别，输出会有所不同，如下所示：

```
 gcc -g -Wall -O0 test.c
 ./a.out 
We got a beaf
 gcc -g -Wall -O1 test.c
 ./a.out 
We got a beaf
 gcc -g -Wall -O2 test.c
 ./a.out 
We got a 80542b0
 gcc -g -Wall -O3 test.c
 ./a.out 
We got a 80542b0
 clang -g -Wall -O0 test.c
 ./a.out 
We got a 8054281
 clang -g -Wall -O1 test.c
 ./a.out 
We got a 805423f
 clang -g -Wall -O2 test.c
 ./a.out 
We got a b768d9d6
 clang -g -Wall -O3 test.c
 ./a.out 
We got a b76899d6 
```

（这个例子非常不稳定，例如通过在 foo 中放置一个 printf，gcc 总是打印“We got a beaf”。Clang.. not..）

上面的例子只是我尝试清楚的方式。

我真正的问题（和我的目标）如下：如何提取 arg_a 的原始地址，即调用者（主）通过使用 foo 函数内部的 CLANG 将 0xbe00 推入堆栈的地址？（gcc 不是一个选项，虽然它仍然很有趣）

谢谢你的时间！

编辑：使 foo 可变参数以使问题更有意义...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:11:34.393

简而言之，不要那样做。

你正在做的是未定义的行为。如果你想要的地址`arg_b`，然后写`&arg_b`。`arg_a`由于 C 的别名规则，试图通过使用指针技巧来获得它是行不通的。编译器假定某些指针不会相互别名，因此优化器做出的假设在您这样做时不再正确。结果，代码无法正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:50:51.123

我不认为这对你有用。

首先，如果 gcc 是你的编译器，你为什么不直接引入标准 C 库呢？如果您不想这样做，那么从标准实现中仅引入 stdarg.h 怎么样？

我正在查看的 stdarg.h 版本（在 Windows 上与 gcc 4.4.0 一起提供）基本上是一堆调用编译器内置函数的宏 - 如果你有适合编译器的宏，那么它应该很容易，即使您不使用标准库的其余部分（我可以理解不愿意将整个混乱拉入其中）。

如果这对您不起作用，请尝试将您正在编写的函数标记为可变参数，并查看编译器文档以了解它如何构建堆栈。您可能必须根据平台编写一些汇编程序片段，但是通过将函数声明为可变参数，您将强制编译器以可预测的方式构建堆栈。

如果您的编译器不支持函数的可变参数，那么您可能需要重新考虑其他选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:03:17.973

你在做什么会导致未定义的行为。

访问可选参数 (from `...`) 的正确方法是使用from `va_list`、`va_start()`和宏。`va_arg()``va_end()``<stdarg.h>`

使用这些宏的示例很多，您可以轻松地在网上找到它们。

这里不允许猜测。

# ssrs-2008 - 如何更改 SSRS 中的参数顺序

> ID：12733062
> 
> 赞同：0
> 
> 时间：2012-10-04T18:01:05.537
> 
> 标签：ssrs-2008, reporting-services

我正在处理`SSRS reports`并且无法更改进入下拉列表的参数的顺序请帮助我

```
=First(Fields!PortfolioName.Value, "PortfolioName") & " : " & Switch
    (
     Parameters!SourceID.Value = 13,
     "Official",
     Parameters!SourceID.Value = Nothing,
     "Internal" ,
     Parameters!SourceID.Value = 15,
     "Broker Dealer"
     ) & " Pricing" 
```

给`id`和`porfolioname`

为了更好地理解，我在这里粘贴了一张图片。

我希望默认值`official`位于顶部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:27:30.567

我假设定价来源信息在另一个名为“定价来源”的表中可用。

(1) 使用以下查询获取定价信息数据：

```
SELECT PricingSourceID, PricingSourceName
    FROM PricingSource
    WHERE PricingSourceId
ORDER BY CASE PricingSourceName
WHEN 'Official' THEN 1
ELSE 999
END 
```

(2) 现在在另一个数据集中使用此查询，并在“可用值”中使用此数据集为 SSRS 中的参数“定价来源”填充下拉列表

* * *

# azure - Azure 存储：真正删除 VM 的秘诀

> ID：12733064
> 
> 赞同：2
> 
> 时间：2012-10-04T18:01:09.143
> 
> 标签：azure, azure-blob-storage

新手用户使用 Azure Linux VM，发现删除 VM（停止计费表的必要步骤）会留下难以识别和区分的存储残余物（例如，支持 VM 映像和数据磁盘） ）。

所以我真的有两个问题：

1) 从存储中删除 VM 及其关联的 OS 磁盘的正确步骤顺序是什么（最好从 Azure CLI）？

2) 有没有人构建了一个映射工具，可以解开 VM 映像、数据磁盘、操作系统磁盘和存储 blob 之间的依赖关系？

显然，如果我也能解决我在尝试删除我认为是未使用的 blob 时看到的那些讨厌的“租赁错误”，那就太好了。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:15:57.090

你可以使用 Azure 服务管理 REST API 来查找与你创建的 VM 关联的媒体。首先调用[List Hosted Services](http://msdn.microsoft.com/en-us/library/windowsazure/ee460781.aspx)以查找所有 VM（以及您可能创建的其他 Azure 服务类型）。然后为您感兴趣的服务调用[Get Hosted Service Properties](http://msdn.microsoft.com/en-us/library/windowsazure/ee460806.aspx)`embed-detail` ，并将参数设置为`true`。响应将包括有关 VM 正在使用的 OS 磁盘和数据磁盘（如果有）的详细信息，包括磁盘名称、媒体链接、源映像名称和 OS。

Azure 服务器管理 REST API 具有许多其他功能，可用于构建功能齐全的 VM 管理工具。但是，它与 Azure VM 程序的其余部分一样处于 Beta 版，因此请为一些惊喜做好准备。

# .net - 带有枚举参数的 InvokeMember 行为

> ID：12733069
> 
> 赞同：0
> 
> 时间：2012-10-04T18:01:30.687
> 
> 标签：.net, reflection

我认为这应该可行……但事实并非如此。我得到一个 MissingMemberException。

```
class Program
{
    static void Main(string[] args)
    {
        typeof(Class1).InvokeMember("Prop",
                                      System.Reflection.BindingFlags.Public |
                                      System.Reflection.BindingFlags.Instance |
                                      System.Reflection.BindingFlags.SetProperty, null, new Class1(), new object[] { TestEnum.One });

        typeof(Class1).InvokeMember("Prop",
                                      System.Reflection.BindingFlags.Public |
                                      System.Reflection.BindingFlags.Instance |
                                      System.Reflection.BindingFlags.SetProperty, null, new Class1(), new object[] { (int)1 });
    }

}

public class Class1
{
    public TestEnum Prop { get; set; }
}

public enum TestEnum : int
{
    One = 1,
    Two,
    Three
} 
```

这似乎与其他所有 System.Reflection 方法的行为相矛盾......关于如何让 DefaultBinder 正确识别要使用的方法的任何想法？还是另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:11:15.127

第一个有效。只有第二个没有。因此，原因是没有 name`Prop`和 type `int`in 的属性`Class1`。如果你投到`1`而`TestEnum`不是`int`它会起作用。

此行为与其他反射行为一致。如果参数的类型不匹配，则找不到该成员。

# vb.net - 加载 .exe 时获得焦点控制

> ID：12733073
> 
> 赞同：1
> 
> 时间：2012-10-04T18:01:45.373
> 
> 标签：vb.net, winforms, multithreading, focus

我有 vb.net 表单，可以打开另一个 vb.net exe 进行测试。我正在尝试测试加载 exe 时特定文本框是否具有焦点。

我的测试表单使用 Assembly.UnsafeLoadFrom(_path) 加载 exe 然后在新线程上运行 FormtoTest

我使用 System.Type.GetProperty() 和 GetFields() 函数来获取 FormtoTest 的所有输入字段及其属性。

然后我在输入字段列表中找到这个文本框，

但是当我调用 System.Type.GetProperty("Focused") 时，我得到一个错误：“跨线程操作无效：控制 'txtID' 从创建它的线程以外的线程访问。”

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:09:51.187

听起来您将需要使用代表

参考

[http://msdn.microsoft.com/en-us/library/ms951089.aspx](http://msdn.microsoft.com/en-us/library/ms951089.aspx)

这是在 C# 中，但也解释了基本概念。 [http://www.codeproject.com/Articles/2083/The-key-to-multi-threaded-Windows-Forms-UI-interac](http://www.codeproject.com/Articles/2083/The-key-to-multi-threaded-Windows-Forms-UI-interac)

# jakarta-ee - 如何跟踪应用程序服务器上特定 Web 应用程序的点击次数

> ID：12733076
> 
> 赞同：0
> 
> 时间：2012-10-04T18:01:59.297
> 
> 标签：jakarta-ee, spring-mvc, servlet-filters

我正在开发 Web 应用程序，我需要使用 Ajax 从客户端跟踪特定 Web 应用程序的点击次数。

MyEar 有以下战争：

1.  APP-a
2.  APP-b（使用 Spring 框架 3.1.0 ）
3.  APP-c（使用Spring框架3.1.0）
4.  APP-d

我想跟踪/计数（使用 APP-b 和 APP-c 中的过滤器）从 APP-d（使用 ajax）对应用程序 APP-b 和 APP-c 的请求数

我不能使用会话，因为我的 APP-b 和 APP-c 是无状态的。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:31:35.133

您可以使用拦截器。1）如果您想分别计算对 APP-b 和 APP-c 的请求数，只需在两个应用程序中定义一个静态变量即可。每次在拦截器中收到一个请求，检查是否来自APP-d。如果是，则增加静态计数器。一段时间后继续定期更新文件或数据库（保存计数的地方）。2）如果您想将两个应用程序中的总计数作为总命中数，那么您应该使用支持集群的缓存（大多数缓存都支持），这样您就可以从两个应用程序中访问它。收到请求后，从缓存中获取先前的计数，增加它并在您的文件或数据库中更新它。

# java - 在android中将xml布局的背景设置为相机

> ID：12733079
> 
> 赞同：1
> 
> 时间：2012-10-04T18:02:10.340
> 
> 标签：java, android, camera, preview

我有一个项目，我有一个`xml`布局，里面有按钮和所有这些，我需要背景是`camera`，所以预览在后面`buttons`，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:30:52.737

这是我项目中的 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
     Copyright (C) 2008 ZXing authors Licensed under the Apache License, 
    Version 2.0 (the "License"); you may not use this file except in compliance 
    with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 
    Unless required by applicable law or agreed to in writing, software distributed 
    under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES 
    OR CONDITIONS OF ANY KIND, either express or implied. See the License for 
    the specific language governing permissions and limitations under the License.

-->
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF8090A0" >

    <SurfaceView
        android:id="@+id/preview_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <com.x09soft.scanner.zxing.ViewfinderView
        android:id="@+id/viewfinder_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/transparent" />

    <ImageButton
        android:id="@+id/btn_flash"
        android:background="@drawable/flash_off"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_gravity="right|center_vertical"/>

</FrameLayout> 
```

CaptureActivity 和 ViewfinderView 您可能会看到（如上所述）[here](http://code.google.com/p/zxing/)

正如 CaptureActivity 的文档中所说：

> 此活动打开相机并在后台线程上进行实际扫描。它绘制一个取景器来帮助用户正确放置条形码，在图像处理过程中显示反馈，然后在扫描成功时覆盖结果。

取景器视图：

> 此视图覆盖在相机预览之上。它在其外部添加了取景器矩形和部分透明度，以及激光扫描仪动画和结果点。

如果您不想绘制任何锐器，请不要使用 ViewfinderView。

看看 CaptureActivity init camera 方法，也许对你有帮助。

```
private void initCamera(SurfaceHolder surfaceHolder) {
        try {
            cameraManager.openDriver(surfaceHolder);
            // Creating the handler starts the preview, which can also throw a
            // RuntimeException.
            if (handler == null) {
                handler = new CaptureActivityHandler(this, decodeFormats,
                        characterSet, cameraManager);
            }
        } catch (IOException ioe) {
            Log.w(TAG, ioe);
            displayFrameworkBugMessageAndExit();
        } catch (RuntimeException e) {
            // Barcode Scanner has seen crashes in the wild of this variety:
            // java.?lang.?RuntimeException: Fail to connect to camera service
            Log.w(TAG, "Unexpected error initializing camera", e);
            displayFrameworkBugMessageAndExit();
        }
    } 
```

SurfaceHadler 在 resume() 方法中创建：

```
 SurfaceView surfaceView = (SurfaceView) findViewById(R.id.preview_view);
        SurfaceHolder surfaceHolder = surfaceView.getHolder(); 
```

另外检查这个[链接](https://stackoverflow.com/questions/5015635/android-camera-preview)

# .net - 未更改实体上的 DbUpdateConcurrencyException

> ID：12733080
> 
> 赞同：1
> 
> 时间：2012-10-04T18:02:12.453
> 
> 标签：.net, sql-server, entity-framework

看来我在未修改的实体上遇到了并发异常。我正在使用实体框架 4.3.1，代码优先，这发生在 WCF 服务中。

为了简化我的示例，假设我有两个实体。

```
public class Foo
{
    public int Id { get; set; }
    public string BarKey { get; set; }
    public string SomeValue { get; set; }

    public Bar MyBar { get; set; }
}

public class Bar
{    
    public string Key { get; set; }
    public string OtherValue { get; set; }

    public ICollection<Foo> Foos { get; set; }
} 
```

用户只能通过应用程序编辑 Foos。条形图可以查看，但不能编辑。此外，我将 DTO 与 WCF 服务一起使用。典型的应用流程如下。

1.  客户端调用服务方法`GetFoo`。这将从数据库中检索 Foo 并将其映射到 FooDto。这还将检索相关的 Bar 并将其映射到 BarDto。
2.  客户端更新 FooDto
3.  客户端调用`SaveFoo`并传入更新的 FooDto。
    一个。该服务将使用 重新检索原始 Foo，`context.Set<Foo>().Find(fooDto.Id)`然后从 FooDto 复制更新的值。
    湾。业务逻辑运行，可能调用`context.Set<Bar>().Find(foo.BarKey)`. 值可以从 Bar 中读取，但不会更新。
    C。然后服务调用`context.SaveChanged()`.

在这一点上，我偶尔会得到一个`DbUpdateConcurrencyException`. 在我的错误处理中，如果异常类型`DbUpdateException`是 的基类`DbUpdateConcurrencyException`，我循环遍历`ex.Entries`并记录`entry.Entity.GetType()`和`entry.State`。

在我的错误日志中，我有几个条目显示类型是`Bar`并且状态是`Unchanged`。完全有`Bar`可能已经更新。但是，我不在乎，因为`Bar`没有改变。

为什么我会收到此异常以及如何防止它发生？

# cuda - CUDA - 为什么基于扭曲的并行减少速度较慢？

> ID：12733084
> 
> 赞同：10
> 
> 时间：2012-10-04T18:02:23.277
> 
> 标签：cuda, gpgpu, reduction

我有关于基于扭曲的并行减少的想法，因为根据定义，扭曲的所有线程都是同步的。

所以想法是输入数据可以减少 64 倍（每个线程减少两个元素），而无需任何同步。

与 Mark Harris 的原始实现相同，减少应用于块级，数据位于共享内存上。 [http://gpgpu.org/static/sc2007/SC07_CUDA_5_Optimization_Harris.pdf](http://gpgpu.org/static/sc2007/SC07_CUDA_5_Optimization_Harris.pdf)

我创建了一个内核来测试他的版本和我的基于 warp 的版本。
内核本身完全相同地将 BLOCK_SIZE 元素存储在共享内存中，并在输出数组中的唯一块索引处输出其结果。

该算法本身运行良好。用完整的数组进行测试以测试“计数”。

**实现的函数体：**

```
/**
 * Performs a parallel reduction with operator add 
 * on the given array and writes the result with the thread 0
 * to the given target value
 *
 * @param inValues T* Input float array, length must be a multiple of 2 and equal to blockDim.x
 * @param targetValue float 
 */
__device__ void reductionAddBlockThread_f(float* inValues,
    float &outTargetVar)
{
    // code of the below functions
} 
```

**1.他的版本的实现：**

```
if (blockDim.x >= 1024 && threadIdx.x < 512)
    inValues[threadIdx.x] += inValues[threadIdx.x + 512];
__syncthreads();
if (blockDim.x >= 512 && threadIdx.x < 256)
    inValues[threadIdx.x] += inValues[threadIdx.x + 256];
__syncthreads();
if (blockDim.x >= 256 && threadIdx.x < 128)
    inValues[threadIdx.x] += inValues[threadIdx.x + 128];
__syncthreads();
if (blockDim.x >= 128 && threadIdx.x < 64)
    inValues[threadIdx.x] += inValues[threadIdx.x + 64];
__syncthreads();

//unroll last warp no sync needed
if (threadIdx.x < 32)
{
    if (blockDim.x >= 64) inValues[threadIdx.x] += inValues[threadIdx.x + 32];
    if (blockDim.x >= 32) inValues[threadIdx.x] += inValues[threadIdx.x + 16];
    if (blockDim.x >= 16) inValues[threadIdx.x] += inValues[threadIdx.x + 8];
    if (blockDim.x >= 8) inValues[threadIdx.x] += inValues[threadIdx.x + 4];
    if (blockDim.x >= 4) inValues[threadIdx.x] += inValues[threadIdx.x + 2];
    if (blockDim.x >= 2) inValues[threadIdx.x] += inValues[threadIdx.x + 1];

    //set final value
    if (threadIdx.x == 0)
        outTargetVar = inValues[0];
} 
```

**资源：**

使用了 4 个同步线程 使用了
12 个 if 语句
11 个读取 + 添加 + 写入操作
1 个最终写入操作
5 个寄存器使用

**表现：**

五次测试运行平均：~ 19.54 ms

**2.基于Warp的方法：（**与上面相同的函数体）

```
/*
 * Perform first warp based reduction by factor of 64
 *
 * 32 Threads per Warp -> LOG2(32) = 5
 *
 * 1024 Threads / 32 Threads per Warp = 32 warps
 * 2 elements compared per thread -> 32 * 2 = 64 elements per warp
 *
 * 1024 Threads/elements divided by 64 = 16
 * 
 * Only half the warps/threads are active
 */
if (threadIdx.x < blockDim.x >> 1)
{
    const unsigned int warpId = threadIdx.x >> 5;
    // alternative threadIdx.x & 31
    const unsigned int threadWarpId = threadIdx.x - (warpId << 5);
    const unsigned int threadWarpOffset = (warpId << 6) + threadWarpId;

    inValues[threadWarpOffset] += inValues[threadWarpOffset + 32];
    inValues[threadWarpOffset] += inValues[threadWarpOffset + 16];
    inValues[threadWarpOffset] += inValues[threadWarpOffset + 8];
    inValues[threadWarpOffset] += inValues[threadWarpOffset + 4];
    inValues[threadWarpOffset] += inValues[threadWarpOffset + 2];
    inValues[threadWarpOffset] += inValues[threadWarpOffset + 1];
}

// synchronize all warps - the local warp result is stored
// at the index of the warp equals the first thread of the warp
__syncthreads();

// use first warp to reduce the 16 warp results to the final one
if (threadIdx.x < 8)
{
    // get first element of a warp
    const unsigned int warpIdx = threadIdx.x << 6;

    if (blockDim.x >= 1024) inValues[warpIdx] += inValues[warpIdx + 512];
    if (blockDim.x >= 512) inValues[warpIdx] += inValues[warpIdx + 256];
    if (blockDim.x >= 256) inValues[warpIdx] += inValues[warpIdx + 128];
    if (blockDim.x >= 128) inValues[warpIdx] += inValues[warpIdx + 64];

    //set final value
    if (threadIdx.x == 0)
        outTargetVar = inValues[0];
} 
```

**资源：**

使用了 1 个同步线程
7 if 语句
10 读取添加写入操作
1 最终写入操作
5 寄存器使用

5 位移位
1 加
1 子

**表现：**

五次测试运行平均：~ 20.82 ms

在具有**256** mb 浮点值的**Geforce 8800 GT 512 mb**上多次测试两个内核。**并以每块 256 个线程**（100% 占用率）运行内核。

 ****基于 warp 的版本慢了 ~ **1.28**毫秒。

*如果未来的卡允许更大的块大小，则基于 warp 的方法仍然不需要进一步的同步语句，因为最大值为 4096，它会减少到 64，而最终的 warp 会减少到 1*

**为什么它不快？或者这个想法的缺陷在哪里，内核？**

从资源使用情况来看，翘曲方法应该领先吗？

**Edit1：更正了内核只有一半线程处于活动状态，不会导致超出范围的读取，添加了新的性能数据**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T23:37:34.560

我认为您的代码比我的代码慢的原因是，在我的代码中，在第一阶段，每个 ADD 活动的扭曲数量是其一半。在您的代码中，所有经线在所有第一阶段都处于活动状态。因此，总体而言，您的代码会执行更多的扭曲指令。在 CUDA 中，重要的是要考虑执行的总“warp 指令”，而不仅仅是一个 warp 执行的指令数。

此外，只使用一半的经线是没有意义的。启动经线只是为了让它们评估两个分支并退出有开销。

另一个想法是使用`unsigned char`并且`short`实际上可能会降低您的性能。我不确定，但它肯定不会为您节省寄存器，因为它们没有打包到单个 32 位变量中。

另外，在我的原始代码中，我用模板参数 BLOCKDIM 替换了 blockDim.x，这意味着它只使用了 5 个运行时 if 语句（第二阶段的 if 被编译器消除）。

顺便说一句，计算你的更便宜的方法`threadWarpId`是

```
const int threadWarpId = threadIdx.x & 31; 
```

您可以查看[这篇文章](http://scholar.google.com/citations?view_op=view_citation&hl=en&user=pxbPE_cAAAAJ&cstart=40&citation_for_view=pxbPE_cAAAAJ:mVmsd5A6BfQC)以获取更多想法。

*编辑：* 这是另一种基于扭曲的块减少。

```
template <typename T, int level>
__device__
void sumReduceWarp(volatile T *sdata, const unsigned int tid)
{
  T t = sdata[tid];
  if (level > 5) sdata[tid] = t = t + sdata[tid + 32];
  if (level > 4) sdata[tid] = t = t + sdata[tid + 16];
  if (level > 3) sdata[tid] = t = t + sdata[tid +  8];
  if (level > 2) sdata[tid] = t = t + sdata[tid +  4];
  if (level > 1) sdata[tid] = t = t + sdata[tid +  2];
  if (level > 0) sdata[tid] = t = t + sdata[tid +  1];
}

template <typename T>
__device__
void sumReduceBlock(T *output, volatile T *sdata)
{
  // sdata is a shared array of length 2 * blockDim.x

  const unsigned int warp = threadIdx.x >> 5;
  const unsigned int lane = threadIdx.x & 31;
  const unsigned int tid  = (warp << 6) + lane;

  sumReduceWarp<T, 5>(sdata, tid);
  __syncthreads();

  // lane 0 of each warp now contains the sum of two warp's values
  if (lane == 0) sdata[warp] = sdata[tid];

  __syncthreads();

  if (warp == 0) {
    sumReduceWarp<T, 4>(sdata, threadIdx.x);
    if (lane == 0) *output = sdata[0];
  }
} 
```

这应该会更快一些，因为它使用了在第一阶段启动的所有经线，并且在最后阶段没有分支，代价是额外的分支、共享加载/存储和`__syncthreads()`新的中间阶段。我没有测试过这段代码。如果你运行它，请告诉我它的性能。如果您在原始代码中为 blockDim 使用模板，它可能会再次更快，但我认为这段代码更简洁。

请注意，使用临时变量`t`是因为 Fermi 和后来的架构使用纯加载/存储架构，因此`+=`从共享内存到共享内存会导致额外的负载（因为`sdata`指针必须是易失的）。一次显式加载到临时文件中可以避免这种情况。在 G80 上，它不会对性能产生影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:06:17.537

您还应该检查 SDK 中的示例。我记得一个很好的例子，它实现了几种减少方法。其中至少一个也使用基于扭曲的减少。

（我现在无法查找名称，因为我只将它安装在我的另一台机器上）****

# foreach - 从生产到开发将数据添加到数据库

> ID：12733088
> 
> 赞同：0
> 
> 时间：2012-10-04T18:02:37.030
> 
> 标签：foreach, datatable, add

在这里，如果我们无法获得隐私，我们开发人员在我们自己的世界中工作，然后在代码中搞砸，甚至不费心要求将生产数据库支持到开发环境。所以我有两个数据库，一个叫做 prod，另一个叫做 dev。我们真的不需要一次更新所有表，只是那些与我们的应用程序有关的表（有很多表可以在没有备份过程的情况下完成所有操作）所以鉴于我已经尝试了几个想法我实际上是从这里来的（至少其中一个）。每段代码都会执行，但是当我转到开发表时没有数据:(“这次”权限不是问题。

(1) DataRow[] 行复制；rowstoCopy = tdProd.Select(); foreach (DataRow temp in rowstoCopy) { tdDev.ImportRow(temp); }

(2) dsProd.Tables.Add(tdProd); dsDev.Tables.Add(tdDev);

```
 foreach(DataTable thisTable in dsProd.Tables)
            {
                DataRow DevRow;
              // For each row, print the values of each column.
                foreach(DataRow myRow in thisTable.Rows)
                {
                    DevRow = tdDev.NewRow();
                    int i = thisTable.Columns.Count -1;(could use an Array but fustration set in)
                    foreach(DataColumn myCol in thisTable.Columns)
                    {
                       DevRow[i - 1] = myRow[myCol].ToString();
                       Console.WriteLine(myRow[myCol]);
                        i += 1;
                    }

                    tdDev.Rows.Add(DevRow);

                   }
                Console.WriteLine(tdDev.Rows.Count);
            } 
```

Everthing 运行并打印到控制台，现在出现错误，但是当我转到 dev 表时，没有记录。第二个真的让我很烦恼，这对最终用户来说非常方便

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:18:07.433

是的，做到了

字符串 strSQL = "插入 [Ops1SQLDEV].[dbo]。" + to_tb + " SELECT * FROM [Ops1SQL].[dbo]." +来自_tb；SqlCommand cmd = new SqlCommand(strSQL, conn); cmd.CommandType = CommandType.Text; conn.Open(); cmd.ExecuteNonQuery(); conn.Close();

# jquery - 如何为我的网站检测移动设备

> ID：12733089
> 
> 赞同：0
> 
> 时间：2012-10-04T18:02:38.390
> 
> 标签：jquery, mobile, detection

> **可能重复：**
> [自动检测移动浏览器（通过用户代理？）](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

好的，所以我为我的网站制作了这个移动版本，它位于 mobile.mysite.com 但我如何获得它，以便当用户从任何移动设备（ipad、ipod、手机等......）访问 mysite.com 时它转到 mobile.mysite.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:08:29.450

您可以使用 CSS3 媒体查询和响应式设计，也可以使用某种 JavaScript 库（如 device.js）来检查用户正在使用哪部手机以及可用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:06:07.717

考虑使用[modernizr](http://modernizr.com/)来确定客户端是否有触摸事件，然后重定向到 mobile.mysite.com

您还可以检测设备的分辨率，但这变得不那么有用了，因为手机现在有高清分辨率屏幕。

如果您使用的是 php，请考虑使用此[脚本](http://code.google.com/p/php-mobile-detect/)

# json - DataBinder 未将 JSON 数组对象绑定到模型中的 List 字段

> ID：12733091
> 
> 赞同：1
> 
> 时间：2012-10-04T18:02:57.600
> 
> 标签：json, asp.net-mvc-3

下面是我用来创建 JSON 对象的 javascript 代码，通过该对象将值返回给控制器。vm 指代一个由数字填充的其他地方的数组。我创建了一个数字数组的对象。

```
$("#saveUser").live("click", function() {

            var username = $("#UserName").val();
            var email = $("#Email").val();
            var phoneNumber = $("#PhoneNumber").val();
            var personCode = $("#PersonCode").val();
            var managerId = $("#ManagerId").val();
            var officeId = $("#OfficeId").val();
            var address = $("#Address").val();
            var activeInd = $("#ActiveInd").val();

            var roles = [];
            for(i=0;i<vm.RoleDdList().length ;i++) {
                    roles.push(vm.RoleDdList()[i].role());   
                }

            var jsonObj = 
                {
                    username:username,
                    email:email,
                    phoneNumber:phoneNumber,
                    personCode:personCode,
                    managerId:managerId,
                    officeId:officeId,
                    address:address,
                    activeInd:activeInd,
                    roles:roles
            };

            $.ajax({
               type:"POST",
               async:true,
               url:"Users/Save",
               data:jsonObj,
               dataType: "json",
               success:function (data) {
                   dlg.dialog("close");
               },
               error:function (data) 
               {
                   alert("An error occurred when saving the contact.");    
               }
            });
        }); 
```

控制器方法：

```
[HttpPost]
    public void Save(UsersModel model)
    {
        //code
    } 
```

我可以看到使用调试器没有将角色字段传递给控制器​​。它是在客户端生成和填充的。该模型需要该特定字段的字符串列表。所有其他对象都通过并匹配。

我已经更改了将 vm 数组中的数字转换为字符串的代码，但我仍然没有得到任何通过。（模型中的列表为空）。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:25:56.587

试试这个：

```
$.ajax({ 
    type: 'POST', 
    dataType: 'json', 
    url: '/Users/Save', 
    data: JSON.stringify(jsonObj), 
    contentType: 'application/json; charset=utf-8', 
    success: function (data) { 
        console.debug(data); 
    }, 
    error: function (data) { 
        console.debug(data); 
    } 
}); 
```

# python - 如何获取图像并保存到 blobstore？

> ID：12733098
> 
> 赞同：1
> 
> 时间：2012-10-04T18:03:24.740
> 
> 标签：python, google-app-engine, app-engine-ndb

我想从另一个站点获取图像（~250Kb）并将它们保存到[blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview)。我想使用 Blobstore，因为它有配额（5Gb 免费）与数据存储（1Gb 免费）。我该怎么做？

GAE 文档说我应该创建上传表单以使用我不需要的 blobstore。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:05:02.743

我认为这段代码会起作用：

```
from __future__ import with_statement                     # first line of your code     
....
from google.appengine.api import urlfetch
import mimetypes
from google.appengine.api import files
.....
image_name = 'your_image.png'
response = urlfetch.fetch('http://....../' + image_name)  # response.status_code == 200 
(mimetype, _) = mimetypes.guess_type(image_name) 
file_name = files.blobstore.create(mime_type= mimetype, _blobinfo_uploaded_filename= image_name))
with files.open(file_name, 'a') as f:                                           
    f.write(response.content)
files.finalize(file_name)                       
blob_key = files.blobstore.get_blob_key(file_name) 
```

# onclick - 在 VFP 中动态创建按钮事件

> ID：12733099
> 
> 赞同：0
> 
> 时间：2012-10-04T18:03:26.800
> 
> 标签：onclick, visual-foxpro

我有一个 VFP 表单，我在其上动态创建了一个命令按钮。如何创建一个响应 onclick 事件的函数？提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:36:05.070

最好的方法是创建一个包含您需要的代码的按钮类。然后，根据该按钮类动态添加您的按钮。

添马舰

# c# - 如何在C#中按住鼠标右键单击

> ID：12733102
> 
> 赞同：3
> 
> 时间：2012-10-04T18:03:32.167
> 
> 标签：c#, windows, mouse, kinect

我想出了如何在某些事件发生时单击鼠标右键（在我的情况下是 Kinect 骨架数据）

```
mouse_event((uint)(MouseEventFlags.RIGHTDOWN | MouseEventFlags.RIGHTUP),(uint)mousepos.X, (uint)mousepos.Y, 0, 0); 
```

此代码只执行一次鼠标右键单击。只要我在 Kinect 中做某些手势，我怎样才能让它发生的时间更长，类似于按住鼠标右键单击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:32:58.823

您需要使用提到的事件和它们之间的一些计时器。

例子：

```
MouseDown
    Start Timer
MouseUp
    Disable Timer 
```

然后你可以在定时器之间做任何你想做的事情。

# excel - 过滤后复制和粘贴单元格

> ID：12733103
> 
> 赞同：0
> 
> 时间：2012-10-04T18:03:37.023
> 
> 标签：excel, vba, copy, autofilter

我在 A 列中有一些值，它们包括负值和正值，并且我在其中编写了下面的值以在相邻列中过滤和复制相同的值。

但我需要的是过滤后，如果 a3、a7、a8 具有负值，它们应该复制到相邻的单元格，即 b3、b7、b8。我无法得到它。

请帮忙........

```
Sub AutoFilter_in_Excel()
Range("A1").AutoFilter Field:=1, Criteria1:="<0", Operator:=xlAnd
Worksheets("sheet1").Range("A2:A7").Copy _
Destination:=Worksheets("sheet1").Range("c2")
Range("A1").AutoFilter Field:=1, Criteria1:=">0", Operator:=xlAnd
Worksheets("sheet1").Range("A2:A7").Copy _
Destination:=Worksheets("sheet1").Range("b2")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:53:43.843

这会做到的。您遇到的问题是您无法复制具有多个区域的范围。

```
Sub AutoFilter_in_Excel()
Dim rg As Range

With Range("A1").CurrentRegion
    .AutoFilter Field:=1, Criteria1:="<0"

    For Each rg In .Resize(.Rows.Count - 1).Offset(1).SpecialCells(xlCellTypeVisible).Areas

        rg.Copy rg.Offset(, 1)

    Next rg

End With

End Sub 
```

# objective-c - 如何计算用于 atos 的二进制文件中的真实符号地址？

> ID：12733104
> 
> 赞同：2
> 
> 时间：2012-10-04T18:03:42.000
> 
> 标签：objective-c, xcode, pointers, llvm, atoi

我一直试图找出一种方法来计算从崩溃报告中获得的堆栈地址的确切符号地址。我找到了以下公式：[https ://stackoverflow.com/a/12464678/920407](https://stackoverflow.com/a/12464678/920407)

并尝试使用我发现的为我计算地址的工具：[https ://github.com/nob1984/natos](https://github.com/nob1984/natos)

但是这些方法都不起作用，尽管误差范围相对较小 - 在发生错误的实际行之前大约 3-4 行。

我故意强迫应用程序因超出 NSArray 对象边界而崩溃。这是我的结果：

崩溃报告：

```
0   CoreFoundation                  0x36bf688f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x3300d259 objc_exception_throw + 33
2   CoreFoundation                  0x36b4e23d -[__NSArrayI objectAtIndex:] + 165
3   SomeApp                         0x0013cea3 -[DashboardTableViewController tableView:didSelectRowAtIndexPath:] (DashboardTableViewController.m:970)
4   UIKit                           0x34e7993d -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 945
5   UIKit                           0x34ef3627 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 159
6   Foundation                      0x32829933 __NSFireDelayedPerform + 415
7   CoreFoundation                  0x36bcaa33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 15
8   CoreFoundation                  0x36bca699 __CFRunLoopDoTimer + 365
9   CoreFoundation                  0x36bc926f __CFRunLoopRun + 1207
10  CoreFoundation                  0x36b4c4a5 CFRunLoopRunSpecific + 301
11  CoreFoundation                  0x36b4c36d CFRunLoopRunInMode + 105
12  GraphicsServices                0x34d13439 GSEventRunModal + 137
13  UIKit                           0x34df5cd5 UIApplicationMain + 1081
14  SomeApp                         0x00146587 main (main.m:17)
15  SomeApp                         0x00102008 start + 40 
```

北约输出：

```
Main Stack Address == 0x146587
Target Stack Address == 0x13cea3
Slide == 0x1000
Main Symbol Address == 0x4751c
Load Address == 0x10006b
Target Symbol Address == 0x3de38

dwarfdump output:
(null)

atos output:
-[DashboardTableViewController tableView:viewForHeaderInSection:] (in SomeApp) (DashboardTableViewController.m:966) 
```

正如 Apple Crash 报告所述，代码行实际上是 970 而不是 966。我想知道是什么导致了这个错误，应该使用什么来正确计算地址。

# c - 计算文件行数的C函数

> ID：12733105
> 
> 赞同：10
> 
> 时间：2012-10-04T18:03:43.363
> 
> 标签：c

当我尝试运行我的程序时，打印的行数错误。

```
LINES: 0 
```

这是输出，虽然我的 .txt 文件中有五行

这是我的程序：

```
#include<stdio.h>
#include<stdlib.h>

int countlines(char *filename);

void main(int argc, char *argv[])
{
  printf("LINES: %d\n",countlines(argv[1]));         
}

int countlines(char *filename)
{
  // count the number of lines in the file called filename                                    
  FILE *fp = fopen(filename,"r");
  int ch=0;
  int lines=0;

  if (fp == NULL);
  return 0;

  lines++;
  while ((ch = fgetc(fp)) != EOF)
    {
      if (ch == '\n')
    lines++;
    }
  fclose(fp);
  return lines;
} 
```

我确信这是一个简单的错误，但我是编程新手。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-04T18:37:19.270

```
while(!feof(fp))
{
  ch = fgetc(fp);
  if(ch == '\n')
  {
    lines++;
  }
} 
```

但请注意：[为什么“while (!feof (file))”总是错的？](https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T18:05:46.380

你声明

```
int countlines(char *filename) 
```

进行`char *`辩论。

你这样称呼它

```
countlines(fp) 
```

传入 FILE *.

这就是为什么你得到那个编译错误。

您可能应该将第二行更改为

```
countlines("Test.txt") 
```

因为您在*countlines中打开文件*

您当前的代码正在尝试在两个不同的位置打开文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T18:53:57.407

你有一个 ; 在结束时`if`。改变：

```
 if (fp == NULL);
  return 0; 
```

到

```
 if (fp == NULL) 
    return 0; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T18:06:28.770

您正在打开一个文件，然后将文件指针传递给一个只需要文件名来打开文件本身的函数。您可以简化呼叫；

```
void main(void)
{
  printf("LINES: %d\n",countlines("Test.txt"));
} 
```

编辑：您正在改变问题，因此很难回答；一开始你`main()`改错了，你忘了第一个参数是argc，所以它崩溃了。现在你有问题；

```
if (fp == NULL);   // <-- note the extra semicolon that is the only thing 
                   //     that runs conditionally on the if 
  return 0;        // Always runs and returns 0 
```

它将始终返回 0。删除那个额外的分号，你应该得到一个合理的计数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T18:46:47.737

我没有立即看到任何会导致分段错误的明显内容。我唯一的怀疑是你的代码在你运行它时期望得到一个文件名作为参数，但如果你不传递它，它无论如何都会尝试引用一个。

`argv[1]`在不存在时访问*会*导致分段错误。**在尝试引用它们之前检查参数的数量通常是一种很好的做法。**您可以通过使用以下函数原型来执行此操作`main()`，并检查它`argc`是否大于 1（简单地说，它将指示 argv 中的条目数）。

```
int main(int argc, char** argv) 
```

*一般来说*，找出导致段错误的最佳方法是使用调试器。如果您在 Visual Studio 中，请在 main 函数的顶部放置一个断点，然后在启动程序时选择*“带调试*运行”而不是“不带调试运行”。它将在顶部停止执行，并让您逐行执行，直到您发现问题。

如果您在 Linux 中，您只需获取核心文件（名称中将包含“核心”）并使用`gdb`（GNU 调试器）加载它。它可以给你一个堆栈转储，它将直接指向导致分段错误发生的行。

编辑：我看到你改变了你的问题和代码。所以这个答案可能不再有用了，但无论如何我都会把它作为一个很好的建议，看看我能否很快解决修改后的问题）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-27T17:26:21.267

这是我的功能

```
char *fileName = "input-1.txt";
countOfLinesFromFile(fileName);

void countOfLinesFromFile(char *filename){
FILE* myfile = fopen(filename, "r");
int ch, number_of_lines = 0;
do
{
    ch = fgetc(myfile);
    if(ch == '\n')
        number_of_lines++;
}
while (ch != EOF);
if(ch != '\n' && number_of_lines != 0)
    number_of_lines++;
fclose(myfile);
printf("number of lines in  %s   = %d",filename, number_of_lines); 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-14T10:13:59.167

接受的答案需要 34 (!) 秒来计算我的 Core i9 CPU 和 SSD 驱动器上 1.3 Gb CSV 文件中的行数。请不要`fgetc`用于读取大文件。这是非常缓慢的。以下代码片段在 300 毫秒内完成了这项工作：

```
#include <stdio.h>

#define BUF_SIZE 65536

int count_lines(FILE* file)
{
    char buf[BUF_SIZE];
    int counter = 0;
    for(;;)
    {
        size_t res = fread(buf, 1, BUF_SIZE, file);
        if (ferror(file))
            return -1;

        int i;
        for(i = 0; i < res; i++)
            if (buf[i] == '\n')
                counter++;

        if (feof(file))
            break;
    }

    return counter;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-03-23T20:09:56.573

这是 C/C++ 中的完整实现

```
#include <stdio.h>

void lineCount(int argc,char **argv){

        if(argc < 2){
             fprintf(stderr,"File required");
             return;
        }
        FILE *fp = fopen(argv[1],"r");

        if(!fp){
            fprintf(stderr,"Error in opening file");
            return ;      
        }

        int count = 1; //if a file open ,be it empty, it has atleast a newline char
        char temp;

        while(fscanf(fp,"%c",&temp) != -1){
                if(temp == 10) count++;
        }

        fprintf(stdout,"File has %d lines\n",count);
   }

int main(int argc,char **argv){

        lineCount(argc,argv);
        return 0;
}
https://github.com/KotoJallow/Line-Count/blob/master/lineCount.c 
```

# mobile - 当前是否有任何移动浏览器不支持表格？

> ID：12733108
> 
> 赞同：1
> 
> 时间：2012-10-04T18:03:54.393
> 
> 标签：mobile, browser, html-table

`<table>`我的意思是，对标签的基本、简单的支持，以显示具有多行和多列的表格数据。对于此特定问题，对样式的支持并不重要。

我刚刚被告知，一些“基础网络”浏览器不支持表格，仅适用于在美国推出的产品。这意味着功能手机的最低公分母。不过，他们确实必须有浏览器。

但是，我一直在为移动设备设计，但从未真正听说过这一点。即使在 5 年前，我也只知道有些支持很差，所以太多的行或太多的嵌套会炸毁它们，但我们市场上的每个浏览器都支持表格。我认为 cHTML 可能没有，但这不是我们现在会在这里遇到的。

我可以访问一堆设备，但找不到以下支持：Obigo、UC Web (J2ME)、Access (v3) 或 S40 浏览器。

当然更不用说所有的智能手机平台了。

# android - 膨胀并附加常见的 PreferenceCategory

> ID：12733110
> 
> 赞同：0
> 
> 时间：2012-10-04T18:04:10.333
> 
> 标签：android, preferenceactivity

我有一个名为 common.xml 的通用 PreferenceCategory ：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceCategory
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceScreen
        android:title="Common preference screen" />

</PreferenceCategory> 
```

我想膨胀它并附加到我的 PreferenceActivity 层次结构中的不同 PreferenceScreen(s) （不是全部）。我搜索了如何，但经过多次尝试，我没有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:39:18.567

我最近想出了一个解决方案。它可能比您正在寻找的更复杂，但这里是基础知识：

*   有两个项目：一个库和使用该库的游戏
*   这个想法是许多游戏可以使用相同的库（我保留通用 Java/XML 代码的地方）
*   在一个屏幕上，我可以同时显示来自公共库代码和游戏特定代码的首选项

我写了一篇详细的博客[文章](http://pilcrowpipe.blogspot.jp/2012/12/modular-approach-to-implementing.html)，以及示例代码和 2 个 Eclipse 项目。

# java - 我在字符串中有一个奇怪的空格字符

> ID：12733113
> 
> 赞同：3
> 
> 时间：2012-10-04T18:04:13.757
> 
> 标签：java, whitespace

我有一个 Java 方法，可以在短语中查找单词，如果找到该单词，则将其从短语中删除。单词和短语可以是任何东西。它们是变体。这是我的代码：

```
private String removeWord( String phrase, String word ) {
    phrase = phrase.replaceAll( "(?i)" + word , "" );
    return phrase;
} 
```

我遇到的问题是有一个短语传递给这个方法：

> 古罗马帝国如此庞大、如此强大和如此雄心勃勃，以至于它几乎对它所触及的一切都产生了强大的影响。罗马的影响如此广泛，以至于即使在今天，大多数西方国家的语言、文化、法律和政府仍然带有罗马的印记。

从文本中查找和删除的单词是“罗马帝国”，但它无法删除。经过一番调查，我发现这是因为短语中的空格不是正常空格。当我在 Notepad++ 中复制该短语的文本并搜索相同的单词时，我也找不到它！

请参阅随附的屏幕截图。第 5 行是我手动编写的一行，如您所见，Notepad++ 能够找到它，但在第 1 行中找不到“罗马帝国”。当我在文件中数“罗马帝国”时，它只找到了一次！

**另一个奇怪的空间是什么？！**

![在此处输入图像描述](../Images/05c7ee372b2eeaff0262ce39d8acc315.png)

**-------------------------------------------------- --- >> 编辑：更多细节：**

我用 Java 编写了这段代码来检查两个空格之间的区别：

```
char a = ' ';
char b = ' ';

System.out.println( (int) a );  // Prints 160
System.out.println( (int) b );  // Prints 32 
```

奇怪的是这两个空间看起来完全一样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:07:24.973

可能[是一个非破坏空间](http://en.wikipedia.org/wiki/Non-breaking_space)。您可以显式查找它们或用 \s（又名 [:space:]）替换您的搜索字符串空格。

# javascript - jquery xml解析以查找具有特定属性的节点而无需循环

> ID：12733114
> 
> 赞同：1
> 
> 时间：2012-10-04T18:04:14.200
> 
> 标签：javascript, jquery, xml, html

我有这个 xml 文件 - payload.xml

```
<Remoting><Response>
    <Controller id="c">
    <Messages/>
    <StructData name="Root">
        <F name="@ErrorOccured"/>
        <F name="@TransitionErrorOccurred"/>
        <List name="DataList" aspect="Delete"/>
        <List name="DataList" aspect="New">
            <Item name="001">
                <F name="CreationDateTime" >2012/04/26</F>
                <F name="ProductDescription" />
            </Item>
            <Item name="01F">
                <F name="CreationDateTime" >2012/08/09</F>
                <F name="ProductDescription" >Smartphone 16GB</F>
            </Item>                 
            <Header name="@tableSize">316 </Header>
        </List>
    </StructData>
    <Events>
        <Event event="$Core" operation="$AddRow" path="/Root/DataList"/>
    </Events>
    </Controller>
    </Response></Remoting> 
```

我想提取具有特定名称和特定属性的节点，例如，如果我想提取

```
<Item name="001">
                <F name="CreationDateTime" >2012/04/26</F>
                <F name="ProductDescription" />
            </Item> 
```

有没有办法以一种方式做到这一点，而无需遍历 .find('Item') 的所有元素

例如，我可以执行类似 .find('Item') -> 属性名称 = '001' 的操作吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:15:19.730

是的，您可以使用您习惯的 jQuery 选择器来完成。

[**演示**](http://jsfiddle.net/GKTfs/)（打开控制台查看记录的内容）

假设您的 xml 在 var xmlText 中，您使用

```
var $xml = $($.parseXML(xmlText)); 
```

然后你找到你的项目使用

```
var yourItem = $xml.find('item[name="001"]'); // note the lowercase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:10:49.353

本教程可能会有所帮助： [http](http://www.w3schools.com/xml/xml_parser.asp) ://www.w3schools.com/xml/xml_parser.asp 这是您可以使用的代码示例。

```
xmlDoc=parser.parseFromString('<Remoting><Respon...oller>    </Response></Remoting>',"text/xml");
items = xmlDoc.getElementsByTagName('Item');
firstItem = items[0]; 
```

# c# - 运行具有一组特定 DLL 的程序？

> ID：12733116
> 
> 赞同：0
> 
> 时间：2012-10-04T18:04:22.927
> 
> 标签：c#, windows, dll

是否可以针对特定目录中的特定二进制文件而不是当前安装在系统上的二进制文件运行程序？我也无法修改应用程序的来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:50:18.320

最接近的方法是将更新的 DLL 放在与 .exe 相同的目录中。

以下是程序如何查找要加载的 DLL（不包括众所周知的 DLL）的优先级列表。

1.  当前进程的可执行模块所在的目录。

2.  当前目录。

3.  Windows 系统目录。GetSystemDirectory 函数检索此目录的路径。

4.  Windows 目录。GetWindowsDirectory 函数检索此目录的路径。

5.  PATH 环境变量中列出的目录。

如果您需要指定任意目录，那么 item #2 是您的朋友。您可以 cd / 进入目标目录，然后使用完整路径从该位置运行您的 .exe。或者，您可以创建一个 Windows 快捷方式并指定“开始于：”值来设置应用程序的当前目录。如果有问题的 .exe 更改其工作目录，这将无法正常工作。

Update: While it is now apparent to me that this advice is out of date, it is also the only advice that touches on using "a specific binary in a specific directory," which i read to mean arbitrary directories that may not be the directory an .exe is installed it. Also, now i see that this was tagged with "C#", which does make my answer exceptionally lame due to the availability of .manifest, i think?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:09:19.417

最简单的方法是使用 LoadLibrary 调用动态加载 DLL。这样您就可以指定您喜欢使用的 DLL 副本的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:41:09.003

如果它是本机 DLL，则只需将 DLL 与可执行文件放在同一文件夹中。[DLL 搜索](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586.aspx)首先在该文件夹中查找。

# html - Mozilla 和 IE 中的填充问题

> ID：12733119
> 
> 赞同：1
> 
> 时间：2012-10-04T18:04:33.007
> 
> 标签：html, css, internet-explorer, padding

网址： http: [//onedirectionconnection.com](http://onedirectionconnection.com)

我在 Internet Explorer 中的网站出现填充问题（一如既往）

在 Chrome 和 Mozilla 中，该站点很好（至少在最新版本中）。在 Internet Explorer 上，我的评论 div 的填充不起作用。

基本上，左边有 300 像素的填充，右边有 60 像素的填充，内容为 67 像素，因此评论编号可以放在每个帖子底部的粉红色框中。

在 IE 中，右侧的填充不呈现。如果有人知道问题可能是什么，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:08:06.563

使用这种风格可能会有所帮助

```
 html,body{
  margin:0;
  padding:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:26:42.307

您处于怪癖模式。你的 DOCTYPE 一定有问题。

### 编辑

用这个：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:39:17.227

您在 HTML 上方有一个 html 注释块

```
<!--THIS INCLUDES HEADER.PHP--> 
```

这使 IE 进入 Quirks 模式。删除它，看看它是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T01:30:43.403

首先，使用[http://w3.validator.org](http://w3.validator.org)查看您的 HTML 是否有问题。我还看了你的 CSS，没有 CSS 重置。Internet Explorer 不遵循相同的盒子模型，这可能是导致问题的原因。您可能应该考虑使用 Eric Meyer 重置作为初学者，然后对其进行修改以满足您的需要。您可以在此处找到 Eric Meyer 重置：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# android - 尝试调试 NDK 时无法检测到应用程序 ABI

> ID：12733125
> 
> 赞同：22
> 
> 时间：2012-10-04T18:04:57.687
> 
> 标签：android, debugging, android-ndk

我正在尝试在 Eclipse 上使用 ADT 20.0.3 使用本机代码调试 Android 应用程序，它给了我这个错误：

```
[2012-10-04 12:09:12 - ndk_android] Unknown Application ABI: 
[2012-10-04 12:09:12 - ndk_android] 
[2012-10-04 12:09:12 - ndk_android] Unable to detect application ABI's 
```

jni 文件正确构建，我可以使用本机代码运行应用程序。

我的构建文件 Application.mk 如下所示：

```
APP_OPTIM        := debug
APP_ABI := armeabi armeabi-v7a
APP_STL := gnustl_static

LOCAL_LDLIBS := $(ANDROID_NDK)/sources/cxx-stl/gnu-libstdc++/libs/armeabi-v7a/libgnustl_static.a 
```

有谁知道这个错误的原因是什么？有没有人使用 ADT 20 进行本机调试？

我正在按照这里的指南：[http ://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)

**编辑：**

清理和删除临时文件/文件夹/设置后，我仍然遇到同样的错误。然后我安装了一个干净的 Eclipse。安装了 CDT，然后是 ADT，这似乎解决了这个问题。我相信问题出在 Sequoyah 或 Eclipse 中的其他插件/设置上。

这已经解决了，但现在我遇到了另一个问题。断点不起作用，但我会保留另一个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T15:40:36.270

转到首选项 -> Android -> NDK。您为此设置了正确的路径，它将起作用。这种方式对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T21:35:20.280

我相信问题出在 Sequoyah 或 Eclipse 中的其他插件/设置上。我安装了一个干净的 Eclipse。安装了 CDT，然后是 ADT，这似乎解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T20:33:45.617

尝试清理 OBJ 和 libs 目录，并且只构建一个 ABI。例如，在NDK_DEBUG **=1**旁边添加**APP_ABI=armeabi**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T03:55:28.143

我通过在 Application.mk 文件中添加 APP_PLATFORM 条目解决了这个问题，并确保清单文件中提到的最小 sdk 版本相同。

例如，在我的例子中，APP_PLATFORM:=21 添加到 Application.mk 文件中添加到清单文件中。

您还需要在 jni 函数定义中保留断点，而不是在 java 端的 jni 本机函数声明中。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-24T18:39:09.007

使用**NDK r16b**时出现此错误，切换到**r10e**时已修复。**

# ruby-on-rails - 更改 Rails 3 中的嵌套资源助手约定

> ID：12733129
> 
> 赞同：0
> 
> 时间：2012-10-04T18:05:27.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个以前没有嵌套的资源，现在需要嵌套。因此，我对 Rails 命名它的 url 助手`parent_child_path`和必须重构所有资源路径引用的默认约定完全不感兴趣。

有没有办法覆盖这个约定并让嵌套资源`child_path`像约定一样使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:42:46.533

```
resources :parents, :shallow => true do
  resources :children
end 
```

将允许`parent_child_path`和`child_parent_path`（浅）

如果您仍想访问`child_path`，只需将其添加为非嵌套资源

```
resources :children

resources :parents, :shallow => true do
  resources :children
end 
```

# javascript - 在运行 Jquery 函数之前检查小部件是否可用

> ID：12733132
> 
> 赞同：0
> 
> 时间：2012-10-04T18:05:30.557
> 
> 标签：javascript, jquery

我正在使用 Jquery 插件同位素。根据屏幕分辨率，我需要销毁同位素小部件以防止其运行其功能。我正在使用以下代码：

```
$(window).smartresize(function(){
            if($(window).width() < 700) {
                container.isotope('destroy');

            }else {
                container.isotope({$options});
            }
        }); 
```

这在第一次调整大小时工作正常，同位素小部件被破坏。但是，如果我再次调整大小（低于 700 像素），则会引发以下异常：

`cannot call methods on isotope prior to initialization; attempted to call method 'destroy'`

如何在运行前检查 container.isotope 是否存在`container.isotope('destroy');`？

**完整的工作代码**

```
 $(window).load(function(){
        var container = $('{$this->selector}')
        if($(window).width() > 701){
            container.isotope({$options});
        }else{
            container.isotope = false;
        }

        $(window).smartresize(function(){
          if($(window).width() < 700) {
            container.find('.item').removeAttr('style');
            if(container.isotope) {
              container.isotope('destroy')
              container.isotope = false
            }
          } else{
            container = $('{$this->selector}')
            container.isotope({$options})
          }
        });
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:08:12.803

怎么样：

```
if (container.isotrope)
//It exists. Do whatever
else
//Does not exist. Do whatever else
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:12:45.917

```
`$(window).smartresize(function(){
  if($(window).width() < 700) {
    if(container.isotope) {
      container.isotope('destroy')
      container.isotope = false
    }
  } else if(container.isotope) {
    container.isotope({$options})
  }
})` 
```

# powershell - Powershell System.__ComObject.document 属性在 IE 9 下不再有效

> ID：12733143
> 
> 赞同：2
> 
> 时间：2012-10-04T18:06:11.900
> 
> 标签：powershell, internet-explorer-9

我一直在编写一个使用网络浏览器界面运行一些服务器功能的脚本。我使用 Internet Explorer 8 在 Windows 7 上编写了脚本，它运行良好。一旦我将它移动到运行 Windows 2008 和 Internet Explorer 9 的生产服务器，它就会中断。终于追踪到它的故障点，但我有点难过如何修复它。这是会导致问题的代码：

```
$ie = new-object -com "InternetExplorer.Application"
$ie.navigate("http://www.google.com")
$ie.visible = $True
$doc = $ie.document
$Object1 = $doc.getElementByID("pocs") 
```

这会弹出一个 IE 窗口，它应该能够按 ID 搜索元素。麻烦的是，现在我得到了错误

> “找不到“getElementById”和参数计数的重载：“1”。”

关于这个错误，我几乎找不到。实际问题实际上是变量 $doc。如果我在 IE 9 上执行“$doc | get-member”，我会得到：

```
TypeName: System.__ComObject#{c59c6b12-f6c1-11cf-8835-00a0c911e8b2} 
```

但在 IE 8 下我得到：

```
 TypeName: mshtml.HTMLDocumentClass 
```

因此，基本上，当我调用 $ie.document 时，IE 9 / Windows 2008 无法加载 Web 文档内容。我试过将 IE9 设置为兼容模式，但没有运气。

$ie.document | get-member 实际上确实显示了以下方法：“getElementById Method Variant getElementById ()”，所以它就在那里，但是没有文档可以解析。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-31T10:24:03.277

鉴于这个问题在各种技术论坛上的存在时间很长，我同样感到惊讶的是，这个问题还没有得到解决。不过，我认为我已经找到了解决方案，尽管在某些时候需要由 Microsoft IE 团队来解决。

就像所有引用的线程一样，我在该`getElementById`方法上遇到了同样的问题，在没有对几台测试机器（一台 Windows 2008R2 Enterprise 64 位和一台 Windows 7 32 位）进行其他更改的情况下，我可以获得相同的脚本去工作。

作为我不喜欢的临时解决方案的解决方法：

1.  使用 IE11 中的开发控制台，将文档模式切换为 8（9、10、11、Edge（默认）不起作用）——我的自动化脚本立即运行。IE 受信任站点、区域安全性、保护模式、PowerShell 会话权限没有更改）。很明显，这只是某种 IE11 安装的组件问题
2.  安装 Office 2013，无需运行或授权，相同的脚本立即运行，无需更改 IE11 的文档模式。显然，Office 确实安装/注册了可以解决问题的东西（正如 Rhys Edwards 所说）

因此，我开始通过以下方式缩小 Office 为启用 IE 自动化所需的 COM 对象所做的工作：

1.  准备新的虚拟 Windows 2008R2 服务器，没有更新。在 IE8 下运行测试脚本 - 没有问题。

2.  升级到 IE11。跑测试脚本 - 像往常一样失败。

3.  拍摄虚拟机快照

4.  使用 Regshot 记录注册表和文件系统

5.  运行 Office 2013 Pro_SP1 安装，默认选项没有更改 Office 安装完成后，没有运行一次（根本没有）再次运行测试脚本 - 一切正常，带有`getElementById`调用的 IE 自动化全部恢复运行

6.  拍摄第二个虚拟机快照

7.  进行第二次扫描`regshot`并分析差异

8.  转储了我的`$ie`对象的属性，还注意到那里比运行 Office 安装之前要多得多。整个引用`mshtml.dll`和`HTMLDocument`类 - 看起来应该

9.  我可以从办公室安装添加并在GAC（版本7.0.3300.0）中注册的`RegShot`差异文件中看到`MSHTML.dll`

我接下来所做的可能不会完全被批准，但是：

1.  我`microsoft.mshtml.dll`在`"c:\program files(x86)\Microsoft.net\primary interop assemblies"`文件夹中找到并将其从 VM 中保存到我的本地计算机桌面

2.  恢复到 2013 年前的快照

3.  将其复制`microsoft.mshtml.dll`到 VM 中并安装到 GAC（请记住，这是仍在 .net 2 上的 2008R2 服务器，我没有在安装 IE11 之前或之后更新 .net，只有办公室）。我只需将文件拖到资源管理器的`c:\windows\assembly`视图中即可安装到 GAC。在.Net的更高版本中，您需要使用`gacutil /l`

4.  测试了相同的脚本和 BOOM，一切正常。无需更改任何 IE 设置或提升脚本权限或安装 Office

所以总结一下。如果您安装 IE11，为了让 PowerShell 自动化文档模型，我必须（重新）`mshtml.dll`在 GAC 中注册。为什么 IE11 安装不能确保发生这种情况超出了我的理解，但我认为 IE 团队需要对此进行调查。

我还认为，对于那些在 IE10/11 中“正常工作”的人，您必须在已经在 GAC 中注册的机器上拥有一个产品`mshtml.dll`（可能是 Office，可能是 Visual Studio 或其他一些 MS 应用程序）。因此，为什么您没有看到肯定存在的相同问题。

希望这对某人有所帮助-这让我发疯了！

安德鲁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T20:44:43.280

正如对该问题的评论中所详述的，这个问题似乎有三种解决方案。

1.  **升级到 PowerShell 3.0**：版本 2.0 仅在涉及网络抓取和使用 IE 作为对象时最多与 IE8 兼容。但是，3.0 版将适用于 IE9。你可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=34595)得到它。
2.  **关闭 IE**中的保护模式：在设置中的“安全”选项卡下为 Internet 区域打开保护模式似乎对我有用。应该仔细考虑这方面的安全隐患。
3.  **在管理员模式下**运行脚本：只需在提升的 PowerShell 提示符下运行脚本。

最后两个解决方案来自不同的[SO 答案](https://stackoverflow.com/a/14996243/945456)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T19:45:35.893

我有类似的问题，并通过以下步骤解决：

1.  检查您计算机上的 Microsoft.mshtml.dll。它应该位于位置 C:\Program Files (x86)\Microsoft.NET\Primary Interop Assemblies。如果您在此位置找不到它，则可能是您没有此 dll，这就是您遇到此问题的原因。

2.  找到 dll，并尝试在运行时加载程序集。您可以将 dll 放在机器上的任何位置并执行此操作。下面是在运行时加载程序集的方法的链接。 [https://onedrive.live.com/?cid=21ad54fd70600673&id=21AD54FD70600673%211922](https://onedrive.live.com/?cid=21ad54fd70600673&id=21AD54FD70600673%211922)

# javascript - 如果焦点默认移动到它，jquery datepicker 不会激活

> ID：12733147
> 
> 赞同：0
> 
> 时间：2012-10-04T18:06:20.393
> 
> 标签：javascript, jquery, html, datepicker

[http://www.frostjedi.com/terra/scripts/demo/jquery-datepicker.html](http://www.frostjedi.com/terra/scripts/demo/jquery-datepicker.html)

如果您在文本区域之外单击并在其中重新单击，则会出现一个日历。首次加载页面时如何使其显示？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:08:41.790

这应该工作，

```
$(function() {
    $('#datepicker').focus();
}); 
```

但整个 Jquery 库并未正确包含在内。

尝试使用以下方式获取 jquery：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:13:21.857

```
$(function() {
    $('#datepicker').datepicker('show');
}); 
```

这应该为您提供日期选择器而不设置焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:13:44.850

您可以在 DOM Ready 上显示它：

```
$(function() {
    $( "#datepicker" ).datepicker('show');
}); 
```

同样在您发布的演示链接上，您正在从`jqueryui.com`域加载 jQuery js/css 文件，并且您收到 403 Forbidden HTTP 错误，因此未加载 jQuery。

如果你想使用 CDN，你应该使用[http://code.jquery.com/](http://code.jquery.com/)。您将在那里找到用于 jQuery 和 jQuery UI 主题的 JS 和 CSS URL。

# lisp - LISP 组合两个整数列表并按升序对它们进行排序？

> ID：12733151
> 
> 赞同：0
> 
> 时间：2012-10-04T18:06:35.300
> 
> 标签：lisp, scheme, racket

组合列表没有问题，但按升序对它们进行排序是我苦苦挣扎的地方。

```
 (define (combineASC l1 l2)
   (cond 
     ((null? l1) l2)
     (#t (cons (car l1) (combineASC (cdr l1) l2)))
     (sort l2 #'<))) ; I found this part in an online source 
```

这是我得到的输出：

```
(combineASC '(2 4 6) '(1 4 5))

(2 4 6 1 4 5) 
```

有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:15:47.463

因此，您正在组合两个输入列表，每个列表都已按升序排序。你想把它们“编织”成一个，也是按升序排列的。

为此，您只需获取两个头元素（每个来自每个输入列表）并进行比较；然后你从它的列表中取出最小的，并进一步组合你剩下的 - 使用相同的功能。

将不涉及排序。结果列表将根据定义它的过程进行排序。

此操作通常称为“合并”。它保留重复项。它的重复删除对应项也将两个有序列表合并为一个，称为“联合”。这是因为这些有序（非降序或严格升序）列表可以看作是集合的表示。

* * *

另一个需要注意的微妙之处是，当两个头部元素相等时该怎么办。我们已经决定保留副本，是的，但是要先取出两个中的*哪一个？*

通常，它是左边的。然后，当这样定义`merge`的操作用作*合并排序*的一部分时，排序将是*稳定*的（当然也必须为此正确定义分区）。稳定意味着保留元素的原始顺序。

例如，如果排序是稳定的，那么当按pairs的第一个元素排序时，`(3,1) (1,2) (3,3)`保证排序为`(1,2) (3,1) (3,3)`而不是排序`(1,2) (3,3) (3,1)`。

因此，按照您的代码框架，我们得到

```
;; combine two non-decreasing lists into one non-decreasing list,
;; preserving the duplicates
(define (combineNONDECR l1 l2)
   (cond 
     ((null? l1) l2)
     ((null? l2) l1)
     ((<= (car l1) (car l2))
      (cons (car l1) (combineNONDECR (cdr l1) l2)))
     (t
      (cons (car l2) (combineNONDECR l1 (cdr l2)))))) 
```

但是，如果您真的需要结果*按升序*排列，而不是*non-decreshing*，那么您必须稍微调整一下 - 将`=`案例分开并单独处理，以阻止重复项潜入（每个升序列表中没有重复项，但列表可能包含它们两者之间的一些重复项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:43:12.020

因为尾递归:)

```
(define (merge-sorted . lists)
  (define (%merge-sorted head tails)
    (cond
     ((null? tails) head)
     ((null? (car tails))
      (%merge-sorted head (cdr tails)))
     (else (let ((sorted
                  (sort tails
                        (lambda (a b)
                          (<= (car a) (car b))))))
             (%merge-sorted (cons (caar sorted) head)
                            (cons (cdar sorted) (cdr sorted)))))))
  (reverse (%merge-sorted '() lists)))

(merge-sorted '(1 2 3) '(4 5 6 7 8 9) '(2 4 6) '(1 3 5 7)) 
```

*   它可以更好地扩展：P

* * *

我想这就是威尔所说的：

```
(define (merge-sorted . lists)
  (define (%swap-if-greater lists)
    (define (%do-swap head next built tails)
      (cond
       ((null? tails)
        (append (reverse built)
                (cond
                 ((null? next) (list head))
                 ((> (car head) (car next))
                    (list next head))
                 (else (list head next)))))
       ((> (car head) (car next))
        (%do-swap head (car tails)
                  (cons next built) (cdr tails)))
       (else (append (reverse built)
                     (list head) (list next) tails))))
    (%do-swap (car lists)
              (if (null? (cdr lists)) '() (cadr lists))
              '() (if (null? (cdr lists)) '() (cddr lists))))
  (define (%merge-sorted head tails)
    (cond
     ((null? tails) head)
     ((null? (car tails))
      (%merge-sorted head (cdr tails)))
     (else (let ((sorted (%swap-if-greater tails)))
             (%merge-sorted (cons (caar sorted) head)
                            (cons (cdar sorted)
                                  (cdr sorted)))))))
  (reverse
   (%merge-sorted
    '() (sort lists (lambda (a b) (<= (car a) (car b))))))) 
```

特别是考虑到 Schemes... 在布尔值上的有趣位置，我不会对此很感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:17:01.430

```
(defun merge (l1 l2)
 (if (not (and (eql nil l1) (eql l2 nil))
  (if (> (car l1) (car l2))
     (cons (car l1) (merge (cdr l1) l2))
    (cons (car l2) (merge (cdr l2) l1)))
  ;;;append the not-nil string to the rest.
  ) 
```

这应该可以工作（您仍然需要完成代码，但想法很明确）

**请注意**，此代码在 common-lisp 中。

查找[合并排序](http://en.wikipedia.org/wiki/Merge_sort)以获取有关该技术的更多信息

# ios - UIImage imageNamed：不会自动选择视网膜@2x 图像

> ID：12733155
> 
> 赞同：12
> 
> 时间：2012-10-04T18:06:44.113
> 
> 标签：ios, ios6, retina-display

假设我在捆绑包或资产目录中有三个图像：

1.  默认~iphone.png
2.  默认@2x~iphone.png
3.  默认-568h@2x.png

在 iOS 4 及更高版本上，UIImage 构造函数可以采用如下图像名称：

```
[UIImage imageNamed:@"Default"]; 
```

当我在 3.5 英寸视网膜显示器 (iphone) 上时，它会自动选择图像 (2)。如果在非视网膜显示器上，它会选择 (1)。这很棒。

我将图像 3 命名为 4 英寸视网膜 (iPhone 5) 启动图像的指定名称。有没有办法命名图像 (3)，这样当我在 4 英寸视网膜显示器上运行时，它会返回相同的 UIImage 构造函数？

也许这还没有实现，或者我对便利性期望过高......我只是想避免在我的代码中使用任何条件逻辑来根据屏幕尺寸选择图像。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T18:14:45.867

我也遇到了同样的问题，结果证明 iPhone 5/iPod Touch 第 5 代没有这种行为。

您必须手动确定您的应用程序是否在此类设备上运行并相应地更改文件名。

我已使用此方法检查我的应用程序是否在 iPhone 5/iPod Touch 第 5 代上运行：

```
#define IS_PHONEPOD5() ([UIScreen mainScreen].bounds.size.height == 568.0f && [UIScreen mainScreen].scale == 2.f && UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
```

然后您可以像这样调整图像名称：

```
if(IS_PHONEPOD5()) {
   myImageView.image = [UIImage imageNamed:@"MyImage-568h.png"];
} else {
   myImageView.image = [UIImage imageNamed:@"MyImage.png"];
} 
```

**更新**
我还在 github ( [Link](https://gist.github.com/3782351) ) 上找到了一个 UIImage 类别，它实现了您正在寻找的内容。它没有对不存在的文件的回退，但您可以自己轻松地实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:11:09.307

没有 4" 图像类型。与其他所有图像唯一不同的是，`Default-568h@2x.png`它被用作 iPhone 5 的启动图像，并向操作系统发出信号，表明您的应用程序支持更长的屏幕并且不应该被加黑。

您必须处理代码或具有不同屏幕尺寸的自动布局。没有特殊的自动图像类型。它可以是标准屏幕图像类型，也可以是视网膜图像类型，与 iOS 4 以来相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T03:16:19.710

iOS 8 中的新 API 允许您加载命名图像的视网膜版本，以前您必须自己确定文件名：

```
UIImage* retinaImage = [UIImage imageNamed:@"ImageName" 
    inBundle:nil compatibleWithTraitCollection:nil];

NSLog(@"screen scale: %2.2f retinaImage: %@",
    [UIScreen mainScreen].nativeScale, retinaImage); 
```

# jquery - 区分 JSON 中的空字符串和 null

> ID：12733162
> 
> 赞同：4
> 
> 时间：2012-10-04T18:07:22.007
> 
> 标签：jquery, json, null, string

我正在使用 jQuery 反序列化来自服务器的 JSON 响应，但我需要区分*空*值和*空*值：

示例响应：

```
{
    "Key1": "Value1",
    "Key2": null,
    "Key3": ""
} 
```

我可以看到，在原始 JSON 字符串中，这两个值是不同的，但是当我反序列化这两个值时，`Key2`它们`Key3`是`null`. 无论如何我可以说服 jQuery 反序列化器不要将这些值视为相同？

# csv - 如何使用 vbscript 将文本文件中的 LF 转换为 CRLF？

> ID：12733165
> 
> 赞同：2
> 
> 时间：2012-10-04T18:07:30.860
> 
> 标签：csv, vbscript, newline, line-endings

我有一个由 Mac 程序生成的 CSV 文件（不幸的是，编码灵活性很小），它在行尾写入 LF。然后一个 vbscript 像这样读取这个文件：

```
Set objTextFile = fso.OpenTextFile("the_file.csv", 1)
lineItemString = objTextFile.Readline 
```

但是，由于它在行尾查找 CRLF，因此`lineItemString`包含整个文件的文本。由于这是一个日常程序，我不想添加一个临时步骤，即使用一些将所有行结尾正确转换为 CRLF 的实用程序。

有没有办法通过在我的 vbscript 中进行这种转换来避免这种情况？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:17:16.863

这将用 CRLF 替换字符串中的每个 LF：

```
Replace(str, vbLf, vbCrLf) 
```

不过，根据您想要处理文件的方式，可能更容易读取整个文件并将内容拆分为`vbLf`.

```
Set objTextFile = fso.OpenTextFile("the_file.csv", 1)
For Each line In Split(objTextFile.ReadAll, vbLf)
  ' do stuff
Next 
```

# ruby - RSpec 隐含主题似乎失败，显式主题有效

> ID：12733166
> 
> 赞同：0
> 
> 时间：2012-10-04T18:07:39.620
> 
> 标签：ruby, rspec

我有一个简单的测试，根据我是否使用明确的主题，它似乎有不同的行为。

```
context "successful validation" do
  subject(:invitation) {invitations(:emmet_invite)}
  after do
    invitation.send_voucher
  end
  it "calls hotel_booked?" do
    invitation.should_receive(:hotel_booked?).and_return(true) #works
  end

  it {should_receive(:hotel_booked?).and_return(true)} #fails
end 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:39:42.377

在 rspec-mocks 中查看这个 github 问题：[https ://github.com/rspec/rspec-mocks/issues/148](https://github.com/rspec/rspec-mocks/issues/148)

引用：

> 添加了隐式主题以支持单行期望，但我不相信它曾经打算与模拟期望一起使用。为了使模拟期望有意义，在设置之后必须在示例中包含一些代码，因此将其用于一个衬里并没有真正意义。

所以基本上，你不能使用`should_receive`隐含的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:26:57.307

您可以使用`subject`来获取隐式主题：

```
it { subject.should_receive(:hotel_booked?).and_return(true) } 
```

尽管这不像您的明确示例那么容易阅读。

# c# - 如何避免 MatchCollection 处理错误？

> ID：12733167
> 
> 赞同：0
> 
> 时间：2012-10-04T18:07:47.607
> 
> 标签：c#, .net, regex

我正在使用 matchcollection，例如：

```
matches = new Regex(ABS_URL_REGEX, RegexOptions.IgnoreCase | RegexOptions.Compiled).Matches(TargetText); 
```

在这种情况下，正则表达式匹配 URL 值：

```
(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'" + "\"" + ".,<>?«»“”‘’])) 
```

Regex 本身运行得非常快，但在检查结果时应用程序挂起：

```
if (matches != null && matches.Count > 0) 
```

如果我取出计数部分，此调用将很快通过，但随后卡在下一行：

```
foreach (Match thisMatch in matches) 
```

最常见的罪魁祸首似乎是有 0 个匹配项。那么如何在不遇到这些挂起问题的情况下检查结果呢？

# c# - MVC3错误的表单提交

> ID：12733168
> 
> 赞同：0
> 
> 时间：2012-10-04T18:07:50.080
> 
> 标签：c#, asp.net-mvc-3, forms

从我正在制作的网站的每个页面上，您都可以登录。在具有其他表单的页面上，提交后我收到以下错误：“不允许子操作执行重定向操作。” 在我添加登录之前，所有表单都运行良好。此外，登录在您使用时可以正常工作。仅当我提交不同的表单时才会出现该错误。我设置了一个断点，并观察了当我点击另一个提交时会发生什么。出于某种原因，SignIn Post ActionResult 正在尝试运行。任何帮助，将不胜感激。

### 错误：

> 不允许子操作执行重定向操作。第 67 行：@{Html.RenderAction("SignIn", "Account");}

### 登录 查看

```
@using (Html.BeginForm("SignIn", "Account", FormMethod.Post))
{
    <input class="signInSubmit" type="submit" name="submitButton" value="" />
} 
```

### 视图中的另一种形式

```
@using (Html.BeginForm("Confirm", "Cart", null, FormMethod.Post, new { @id = "productDetailsForm" }))
{
    <input class="addToCart" type="submit" name="submit" value="" />
} 
```

### 登录控制器

```
// GET: /Account/SignIn
public ActionResult SignIn()
{
    return PartialView();
}

// POST: /Account/SignIn
[HttpPost]
public ActionResult SignIn(Customer customer)
{
    try
    {
        //Stuff is here
        return RedirectToAction("Index", "Home");
    }
    catch
    {
        return RedirectToAction("Registration");
    }
} 
```

### 其他形式的控制器

```
// GET: /Cart/
public ActionResult Index()
{
  CartViewModel cart = getCart();
  return View(cart);
}

//POST: Cart/Confirm
[HttpPost]
public ActionResult Confirm(int productID, bool certs, int quantity)
{
  CartItemViewModel viewModel = new CartItemViewModel
  {
    Item = productRep.GetProductByID(productID),
    Certs = certs,
    Quantity = quantity
  };
  return View(viewModel);
} 
```

### HTML 源代码

```
<form action="/Account/SignIn" method="post">
    <input class="signInSubmit" type="submit" value="" />
</form>
<form action="/Cart/Confirm" id="productDetailsForm" method="post">
    <input class="addToCart" type="submit" value="" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:06:36.403

### 我的解决方案

我将 POST ActionResult 重命名为 SignIn 以外的任何内容。有谁明白为什么会这样？

### 帐户控制器

```
// POST: /Account/Signed
[HttpPost]
public ActionResult Signed(Customer customer)
{
    try
    {
        //Stuff is here
        return RedirectToAction("Index", "Home");
    }
    catch
    {
        return RedirectToAction("Registration");
    }
} 
```

# r - 从 lme 摘要中提取 N

> ID：12733169
> 
> 赞同：1
> 
> 时间：2012-10-04T18:07:51.080
> 
> 标签：r, summary, mixed-models

我正在寻找一种快速的方法来提取测试`N`摘要中生成的观察数 () `lme`，而不是复制和粘贴？我在网上找到[了这个](https://r-forge.r-project.org/scm/viewvc.php/pkg/trunk/R/texreg.R?view=markup&revision=28&root=texreg)，但该命令似乎不是内置的，并且`texreg`包没有上传到这个站点。

```
n <- nobs(model) #extract number of observations 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:31:50.463

```
library(nlme)

x <- 1:80
g <- sort(rep(c(1,2,3,4),20))
set.seed(1)
y <- 3*x+g*0.01+rnorm(80,sd=0.01)

plot(y~x)
fit <- lme(y~x,random=~1|g)

nobs(fit)
[1] 80 #works just fine

fit$dims$N
[1] 80 #alternative 
```

# haskell - 在haskell中， :+: 在数据类型定义中是什么意思？

> ID：12733171
> 
> 赞同：13
> 
> 时间：2012-10-04T18:07:57.250
> 
> 标签：haskell

这是新数据类型的定义：

```
data Total a = Total a :+: Total a 
              |... 
```

:+: 在这种类型定义中是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T18:12:57.233

它是一个以中缀形式编写的数据构造函数。如果运算符以 . 开头，则可以将其用作构造函数`:`。

# php - PHP变量值不更新MySQL表字段？

> ID：12733178
> 
> 赞同：0
> 
> 时间：2012-10-04T18:08:30.330
> 
> 标签：php, mysql

我正在使用已发布的 PHP 数据更新 MySQL 表。我首先收集发布的数据，并将它们放入适当的变量中。连同必要的 if/else 检查。

然后，我只需要编写一次查询。

但现在我有一个 if/else 来检查是否更新特定字段。如何在相应的变量中存储**“不更新”值？**

因为否则我必须对整个查询进行 if/else 检查，仅针对一个字段。

我只想尽可能高效。:)

我的查询如下：

```
$updateTable = mysql_query("UPDATE myTable SET field1 = '$field1', field2 = '$field2'"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:12:12.147

无论您身在何处，都可以将 $_POST 放入变量中，执行此操作，

```
 if( $field2 === 'xyz' ) { //if value is 'xyz', do not update
     $sql = ''; 
  } else 
      $sql = ", field2 = '$field2'"; 
```

然后在查询中，

```
 $updateTable = mysql_query("UPDATE myTable SET field1 = '$field1' $sql"); 
```

**编辑：**如果使用 1/0（真或假），

```
 if( $field2 == true ) { //if value is true, do not update
     $sql = ''; 
  } else 
      $sql = ", field2 = '$field2'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:16:58.573

您需要构建查询，将其存储在 PHP 字符串中，例如：

```
$sql = "UPDATE `table` SET ";
if ($_POST['foo']!=='') {
  $sql .= " `foo`='".mysql_real_escape_string($_POST['foo'])."',";
}
if ($_POST['bar']!=='') {
  $sql .= " `bar`='".mysql_real_escape_string($_POST['bar'])."',";
}
$sql = rtrim($sql,',');
$sql .= " WHERE `id`='".mysql_real_escape_string($_POST['id'])."'" 
```

然后执行您的字符串作为查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:14:08.333

如果您询问是否应该更新该字段，您可以执行以下两项操作之一：

1) 指定一个标准，确保`field1`并且`field2`仅在行与标准匹配时才更新。如果条件不匹配，则不会更新记录。这是最常见的方式。

```
UPDATE myTable ...
WHERE criteria1 = 1 AND criteria2 = 'Red' 
```

2) 在 之前运行查询`UPDATE`以查看是否执行更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T18:16:14.813

我不确定您要的是什么，但也许这可以回答您的问题：

```
$updateTable = mysql_query("
UPDATE myTable SET
    field1 = IF('$field1'>'','$field1', field1),
    field2 = IF('$field2'>'','$field2', field2)
"); 
```

当然，您正在向编写的代码开放 SQL 注入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T18:50:04.230

假设您已经收集了要更新的字段，`$fields`如下所示：

```
array (
'filed1' => 'value' ,
'field2' => ''value
) 
```

现在您需要生成查询，您可以通过在数组中循环来执行此操作：

```
 $sql = "UPDATE mytable ";
$sql .= $fields ? "SET " : "" ;
    foreach ($fields as $key=>$value) {
    $sql.= $value ? "$key = '$value' , " : '' ;
    }
    //you need to omit the trailing ','
$sql[strlen($sql) -1 ] = ""; 
```

[提示：使用mysqli_real_escape_string](http://www.php.net/manual/en/mysqli.real-escape-string.php)或其他更好的方法清理所有用户输入。

快乐编码:)

# javascript - 使用 jQuery 和 JSON 加载和附加外部 html 文件

> ID：12733182
> 
> 赞同：0
> 
> 时间：2012-10-04T18:08:45.317
> 
> 标签：javascript, jquery, json

我使用以下代码：

```
<div id="success"></div>
<script>$.getJSON('http://daytona.bg/test.html', function(data) { $(data.html).appendTo("#success"); } );</script> 
```

该脚本正在加载和附加，但前提是 test.html 在我的计算机上。如果它在外部域上 - 它不起作用。

怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:13:00.783

您需要使用 JSONP（JSON 的跨域版本）从外部域获取数据。

这是一个包含很多有用信息的链接：[jQuery AJAX cross domain](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

# python - 为什么乘法会多次重复这个数字？

> ID：12733184
> 
> 赞同：9
> 
> 时间：2012-10-04T18:08:53.177
> 
> 标签：python, string, multiplication

我不知道如何在 Python 中进行乘法运算。

如果我这样做：

```
price = 1 * 9 
```

它将如下所示：

```
111111111 
```

答案必须是`9`( `1x9=9`)

我怎样才能让它正确乘法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T18:10:48.620

只有当您将整数与字符串相乘时，您才会得到重复的字符串..

您可以使用`int()`工厂方法从整数的字符串形式创建整数..

```
>>> int('1') * int('9')
9
>>> 
>>> '1' * 9
'111111111'
>>>
>>> 1 * 9
9
>>> 
>>> 1 * '9'
'9' 
```

*   如果**两个操作数都是 int**，您将得到它们的乘法 int。
*   如果**一个操作数是 int 而另一个是 string**，则该字符串将重复 int 指定的次数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T18:10:53.203

这是字符串和整数之间的区别。看：

```
>>> "1" * 9
'111111111'

>>> 1 * 9
9 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T18:09:55.063

使用整数而不是字符串。

确保将您的字符串转换为整数

`price = int('1') * 9`

您发布的实际示例代码不会`9`返回`111111111`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T18:12:05.033

我认为您对这里的类型感到困惑。如果您将字符串相乘，您只会得到该结果。启动解释器并试试这个：

```
>>> print "1" * 9
111111111
>>> print 1 * 9
9
>>> print int("1") * 9
9 
```

所以确保第一个操作数是一个整数（而不是字符串），它会起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T18:11:22.827

应该管用：

```
In [1]: price = 1*9

In [2]: price
Out[2]: 9 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-04T18:58:35.097

您不能将整数乘以字符串。可以肯定的是，您可以尝试使用 int（整数的缩写，表示整数）命令，例如 -

```
firstNumber = int(9)
secondNumber = int(1)
answer = (firstNumber*secondNumber) 
```

希望有帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T18:10:32.107

```
In [58]: price = 1 *9
In [59]: price
Out[59]: 9 
```

# trigger.io - 为 trigger.io 应用程序指定 iOS 包 ID

> ID：12733189
> 
> 赞同：2
> 
> 时间：2012-10-04T18:09:05.610
> 
> 标签：trigger.io

我浏览了所有文档，但无法找到这个，所以我会在这里问...

现在，一旦我的应用程序加载到设备 io.trigger.forge 上，它们的捆绑 ID。显然，这不适用于提交到应用商店等，因为我所有的应用，无论是用 Forge 构建的还是其他构建的，都应该以相同的捆绑 ID 开头。

那么，我在哪里可以设置生成的应用程序的捆绑 ID？forge 工具是否有命令行参数，或者一些 config.json 键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:17:56.983

Doh，我忽略了这一点：

[http://docs.trigger.io/en/v1.4/modules/package_names.html](http://docs.trigger.io/en/v1.4/modules/package_names.html)

# mysql - 具有复合主键和特定 VARCHAR 长度的 NodeJS MySQL ORM

> ID：12733190
> 
> 赞同：2
> 
> 时间：2012-10-04T18:09:06.210
> 
> 标签：mysql, node.js, orm

我一直在寻找 Node.js 的 MySQL ORM。我研究了[persist.js](https://github.com/jeremydurham/persist-js)、[sequelize](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://www.sequelizejs.com/&ei=Cc9tUJvBJIr1iQKi_4GYAw&usg=AFQjCNEiUxMG4RhBsZ18f7powg0nIC4TQg)和[node-orm](https://github.com/dresende/node-orm)。不幸的是，它们都不支持我需要的两个功能：1.支持复合主键（大多数只支持“id”字段作为主键）2.指定我的 VARCHAR 长度的能力

我有一个包含数百万行的表，它使用 VARCHAR(16)。将其增加到 255 将为数据库增加数百 MB 的浪费空间。那张桌子也将继续增长，进一步加剧浪费。

有没有我想念的替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T10:44:39.413

node-orm has a advanced options now .

see here: [node-rom2/advanced-options](http://dresende.github.io/node-orm2/#advanced-options), so I think you can change primary id now. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T22:57:38.480

看看这对：[mysql](https://npmjs.org/package/mysql)和[light-orm](https://npmjs.org/package/light-orm) Mysql 有本机实现 - 快速，light-orm 围绕关系 dbs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T07:52:43.937

这里的答案很晚 :) Objection.js 确实支持复合键（[http://vincit.github.io/objection.js/#composite-keys](http://vincit.github.io/objection.js/#composite-keys)）并且创建 mysql varchar 列不应该取决于 ORM。

# haskell - unwrapResumable 中的“释放”怎么办？

> ID：12733192
> 
> 赞同：1
> 
> 时间：2012-10-04T18:09:09.497
> 
> 标签：haskell, conduit, haskell-wai

我写了一个[简单的 Wai-to-uwsgi 代理](http://hpaste.org/75713)，但在这样做时，我不得不使用`unwrapResumable`. 这给出了`Pipe`最终需要调用的解包和“释放”函数。release 函数的类型是`ResourceT IO ()`，我想我想用我当前的资源注册它，但要做到这一点，我需要 release 只是`IO ()`。我应该用释放功能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:31:55.710

释放操作应该已经在您的`ResourceT`. 在正确的`conduit`代码中，有两种不同的方式来处理资源清理：

*   自身之内`Pipe`。此清理将尽可能早地调用，但不是异常安全的。
*   从`ResourceT`. 这是异常安全的，但可能会延迟。

提供的清理操作`unwrapResumable`允许您回收“尽可能早”的方面。但是，如果您只是在`ResourceT`块之外调用清理，则无论如何都无需担心。

# javascript - 如何有效地从geojson中提取值？

> ID：12733201
> 
> 赞同：1
> 
> 时间：2012-10-04T18:09:33.210
> 
> 标签：javascript, arrays, loops

我有`geojson`以下结构的文件：

```
var areas = {
"type": "FeatureCollection",                                                                                
"features": [
{ "type": "Feature", "id": 0, "properties": { "name": "a", "count": "854" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.271687552328165, 29.359549285088008 ], [ 13.272222904657671, 29.357697459147403 ], [ 13.272586765837973, 29.35566049412985 ], [ 13.273062097784726, 29.354438105832578 ], [ 13.272652418199639, 29.360795108476978 ], [ 13.271320041078822, 29.360700647951568 ], [ 13.271687552328165, 29.359549285088008 ] ] ] } }
,
{ "type": "Feature", "id": 1, "properties": { "name": "b", "count": "254"}, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.277038163109875, 29.358442424220023 ], [ 13.276782949188294, 29.358122923383512 ], [ 13.275290999273452, 29.358508600578681 ], [ 13.274634727185679, 29.358485484466968 ], [ 13.282581930993208, 29.358635779719847 ], [ 13.278334024184868, 29.359814295404375 ], [ 13.277038163109875, 29.358442424220023 ] ] ] } }
,
{ "type": "Feature", "id": 2, "properties": {"name": "c", "count": "385"}, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.279484097462499, 29.349831113628788 ], [ 13.27792879702741, 29.349728966688758 ], [ 13.276089401418951, 29.349901260351807 ], [ 13.275677565886326, 29.349951087700632 ], [ 13.279484097462499, 29.349831113628788 ] ] ] } }
,
{ "type": "Feature", "id": 3, "properties": { "name": "d", "count": "243"}, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.290520299215724, 29.352306689134622 ], [ 13.289722088408338, 29.351802774685929 ], [ 13.289065241087885, 29.352101541350635 ], [ 13.28785814146197, 29.351114667998772 ],  [ 13.290520299215724, 29.352306689134622 ] ] ] } }

]
} 
```

通常，要将这些数据转换为数组，我会创建一个循环来遍历将这个值存储在数组中的适当变量。但是，我不知道这是否是最好的方法。有没有办法将所有值拉出`id`到一个数组中，以便我最终得到：

```
[0,1,2,3] 
```

我也很乐意使用任何外部库来做到这一点——我主要是好奇是否有比我目前的方法更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:17:23.680

如果您绝对不顾一切尝试其他方法，可以尝试[underscore 的 map](http://underscorejs.org/#map)。代码看起来像这样：

```
_.map(areas.features, function (item) { return item.id }); 
```

这将调用 features 中每个项目的内部函数，并返回一个包含每个结果的数组。

我不认为你可以在这里做任何过于激进的事情 - 最终，从嵌套对象和数组中提取值不能被简化太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:17:40.380

不是我的代码，但这里有一篇关于非常有效地从 json 获取值的帖子。

请参阅 [在 JSON 对象上使用 jQuery 的 find()后](https://stackoverflow.com/questions/4992383/use-jquerys-find-on-json-object)

User Box9的回答可能是最好的方法

```
function getObjects(obj, key, val) {
    var objects = [];
    for (var i in obj) {
        if (!obj.hasOwnProperty(i)) continue;
        if (typeof obj[i] == 'object') {
            objects = objects.concat(getObjects(obj[i], key, val));
        } else if (i == key && obj[key] == val) {
            objects.push(obj);
        }
    }
    return objects;
} 
```

关于这个代码块也支持这个答案，因为它是我发现提取值的最佳方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:18:00.413

像这样的东西应该工作：

```
 var arr = new Array();
    for(var i = 0; i < areas.features.length; i++){
        arr.push(areas.features[i].id)
    } 
```

要直接获得某个`id`值，您可以执行以下操作：

```
areas.features[0].id 
```

在这种情况下是`0`.

**[例子](http://jsfiddle.net/RC6cL/)**

# c++ - 多线程 DirectX 代码中 SEHException 的原因是什么？

> ID：12733202
> 
> 赞同：0
> 
> 时间：2012-10-04T18:09:35.173
> 
> 标签：c++, windows-8, directx, windows-runtime, directwrite

我正在使用一个我不熟悉的相当大且复杂的代码库，它使用**DirectWrite**进行文本渲染。我不知道这是否重要，但这是一个 WinRT（Windows 应用商店）应用程序。

该应用程序是**多线程**的，并且一些 DirectX 调用是从后台（不是 UI）线程完成的。所有的**BeginDraw**和**EndDraw**调用都是从**UI 线程**进行的，并且一些**DrawText**调用是从**后台**线程进行的。我确保这些调用都没有重叠，并且 DrawText 仅在 BeginDraw 和 EndDraw 对之间调用。

但是，有时我在调用 DrawText 方法时会收到**SEHException 。****从UI 线程**调用时它永远不会发生，只有在从**后台**线程调用时才会发生。
这不会发生在每台计算机上。它经常发生在某些人身上，而在其他人身上根本无法复制。
VS 调试器所说的确切消息是这样的：“x.DLL 中发生了'System.Runtime.InteropServices.SEHException' 类型的第一次机会异常”，它发生在我调用**ID2D1DeviceContext.DrawText()**函数和调试器时在 DrawText 调用中中断 d2d1.h 头文件。

当抛出 SEHException 时，有什么方法可以调试或诊断出了什么问题？（这显然与从后台线程调用 DrawText 函数有关。）
除此之外，从后台线程调用 DirectX 函数是否有任何一般规则？（我确保使用 D2D1_FACTORY_TYPE_MULTI_THREADED 选项创建 D2D1Factory。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:40:34.687

SEH异常只是Win32异常：Windows内部使用的异常机制，与C++异常不同。

因此，所有 SEH 异常都告诉您“某些 Windows 函数引发了异常”。与任何其他例外一样，发生这种情况的原因有很多。

因此，询问这种例外的“通常原因”是什么是徒劳的。

a 的常见原因是`std::exception`什么？他们有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:26:56.933

该问题仅出现在单台计算机上，无法在其他计算机上重现。并且在更新视频卡驱动程序后，它也在该计算机上停止，因此可能是一些驱动程序问题（Windows 8 的 Nvidia 驱动程序已经存在一些问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:26:16.297

确保打开 DirectX 调试运行时。在视觉工作室中运行。它具有打印到控制台的非常详细的错误检查。要打开它，请运行 DirectX 控制面板。

# python - Epoll bug (?) 消耗 100% CPU (Python, PyMongo, Tornado)

> ID：12733208
> 
> 赞同：0
> 
> 时间：2012-10-04T18:09:56.790
> 
> 标签：python, mongodb, tornado

我正在运行一个带有可尾游标的封顶集合（mongodb）。它运行良好，直到 - 突然，在 20-300 秒后 - 它跳到 100% cpu 并且 mongostat 显示`getmore`完全停止。

我在python脚本上做了cProfile，发现了这个：

```
 1    0.000    0.000    0.000    0.000 {method 'lstrip' of 'str' objects}
   77    0.000    0.000    0.000    0.000 {method 'match' of '_sre.SRE_Pattern' objects}
   11    0.000    0.000    0.000    0.000 {method 'partition' of 'str' objects}
   34  242.726    7.139  242.726    7.139 {method 'poll' of 'select.epoll' objects}
   12    0.000    0.000    0.000    0.000 {method 'pop' of 'dict' objects} 
```

所以 epoll 在这里绝对是突出的，而其他一切看起来都很正常，这很可能是导致挂断和 CPU 破坏的原因。

但是这是什么意思？（也许[这里](http://osdir.com/ml/python-tornado/2011-10/msg00041.html)有提示？）发生了什么事，我该如何解决？

这是最有可能触发 epoll 的代码：

```
while WSHandler.cursor.alive:
        try:
            doc = WSHandler.cursor.next() 
```

它在一个单独的线程中运行（带有`threading.thread()`）。

（我正在使用 Tornado WebSocket，三个用于插入数据库的 mongodb 脚本，以及一个用于拖尾光标的脚本。cProfile 来自拖尾脚本。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:56:00.540

这是由于`IOLoops`在三个不同的脚本中运行三个 Tornado 造成的。这弄乱了使用的 epoll `IOLoop`。解决了将所有三个脚本放在一个中`IOLoop`。

并通过运行[AWS 微实例！](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)

# ruby - sed/awk 是否适用于此？用别的东西代替？

> ID：12733214
> 
> 赞同：0
> 
> 时间：2012-10-04T18:10:10.323
> 
> 标签：ruby, sed, awk

我希望能够快速做这样的事情：

我有一个 MySQL 数据库表，里面有我网站的访问者。这些列是日期、IP 地址、浏览器、URL、引用者。

我想做这个：

1.  抓取特定日期的所有行
2.  删除所有行，确保在每 15 分钟间隔内，没有两行具有相同的 IP 地址

sed/awk 适合这类问题吗？或者像Ruby这样的脚本语言会更合适吗？

我不太“明白” sed/awk 的实际用途。也可以简单地解释一下。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:14:13.250

我建议为此目的使用 SQL。这就是为什么您首先将数据存储在数据库中的原因，不是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:18:30.027

Sed 和 Awk 旨在作为文本处理工具。因此，它们可以在您的数据以良好的文本格式（通常相当于人类可读）呈现的情况下提供帮助。

SQL 数据库通常以二进制格式存储，这些工具**不是**最好的选择。即使是人类可读的某些格式也可以使用其他工具更好地处理（XML 可能是最好的例子）。

如果您可以将数据库导出为 CSV（逗号分隔值电子表格），您可能有更好的机会使用这些工具来处理它。

否则，使用 Perl/Python/Ruby 和合适的 SQL 模块来访问数据会更容易。

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:32:18.530

[Sed](http://www.grymoire.com/Unix/Sed.html)或[Awk](http://www.grymoire.com/Unix/Awk.html)不适用于此问题，它们适用于文本处理。我建议使用`Python`或`PHP`与相关的`SQL`库/模块结合使用，并使用[cron](http://en.wikipedia.org/wiki/Cron)来安排脚本的执行。脚本将与此类似*（对于 php）。*

```
$db_host = 'localhost';
$db_user = 'mysql_user'
$db_pwd = 'supersecret'

$Date = '10/3/2010' #Whatever the date format is in the DB 
mysqlconnect($db_host, $db_user, $db_pwd);

$result = mysql_query("SELECT * FROM db.table WHERE time=$Date);

while (!$row = mysql_fetch_row($result))
    echo $row

# Should check IP before deletion - **WARNING** Will delete all data from table
mysql_query("DELETE FROM db.table")

mysql_free_result($result) 
```

注意：这不会在删除之前进行行检查，但您会了解如何开始开发某些东西。

# ruby-on-rails-3 - 如何添加设计错误消息“有人已经使用该电子邮件注册”

> ID：12733215
> 
> 赞同：0
> 
> 时间：2012-10-04T18:10:13.753
> 
> 标签：ruby-on-rails-3, error-handling, devise

当有人尝试使用已经有与之关联的帐户的电子邮件进行注册时，我想显示一条错误消息，上面写着“有人已经使用该电子邮件进行了注册”。

我怎样才能添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:13:04.840

只需确保您的模型包含`devise :validatable`并且它会自行处理。

请参阅：[http ://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Validatable](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Validatable)

# javascript - 将 ul 显示为下拉菜单

> ID：12733229
> 
> 赞同：0
> 
> 时间：2012-10-04T18:11:02.860
> 
> 标签：javascript, css, drop-down-menu, html-lists

当正文宽度小于给定（媒体 css）（手机等）时，是否可以使用纯 css 或非常简单的方法将导航菜单作为下拉列表传输

```
<nav>  
    <ul>  
        <li><a href="#">Blog</a></li>  
        <li><a href="#">About</a></li>  
        <li><a href="#">Archives</a></li>  
        <li><a href="#">Contact</a></li>  
        <li class="subscribe"><a href="#">Subscribe via. RSS</a></li>  
    </ul>  
</nav> 
```

假设：我想正常显示它，但是在窄屏手机上，想将其显示为下拉菜单 - 与选择表单相同。

[编辑]

类似于：[http](http://themewich.com/aware/) : //themewich.com/aware/ - 调整大小时查看菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:13:49.137

我不知道你到底想要什么，但这也许可以帮助你。我希望

```
<nav>  
<ul>  Test
    <li><a href="#">Blog</a></li>  
    <li><a href="#">About</a></li>  
    <li><a href="#">Archives</a></li>  
    <li><a href="#">Contact</a></li>  
    <li class="subscribe"><a href="#">Subscribe via. RSS</a></li>  
</ul>  
</nav> ​

ul li{
  display:none;

}
 ul:hover li{
   display:block;

}​ 
```

[jsFiddle](http://jsfiddle.net/afshinprofe/Mnkru/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:14:40.553

您可以使用javascript检测屏幕宽度，如果屏幕宽度太小，您可以使用标签将列表更改为下拉菜单。谷歌“javascript innerHTML”获取更多信息如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:42:22.890

如果您查看禁用 CSS 的示例 URL（或查看源代码），您将看到两种类型的导航都存在（嵌套列表和表单选择）。该页面正在使用媒体查询来确定要隐藏的元素：窄设备将隐藏列表版本，而宽设备将隐藏表单版本。

# ruby - 用 Ruby 读取文件返回奇怪的输出

> ID：12733234
> 
> 赞同：0
> 
> 时间：2012-10-04T18:11:21.140
> 
> 标签：ruby

我正在尝试读取一个`JSON`文件，`Ruby`并且输出非常奇怪。这是我正在使用的代码：

```
require 'rubygems'

class ServiceCalls 

    def initialize ()

    end

    def getFile()

        Dir.entries('./json').each do |mFile|

            if mFile[0,1] != "."
                self.sendServiceRequest(mFile)
            end

        end
    end

    def sendServiceRequest(mFile)
        currentFile = File.new("./json/" + mFile, "r") 
        puts currentFile.read
        currentFile.close
    end

end

mServiceCalls = ServiceCalls.new
mServiceCalls.getFile 
```

这是输出：

```
Macintosh H??=A?v?P$66267945-2481-3907-B88A-1094AA9DAB6D??/??is32???????????????????????????????????vvz?????????????????????????????????????????????????????????????????????????????????????????????vvz?????????????????????????????????????????????????????????????????????????????????????????????vvz???????????????????????????????????????????????????????????s8m+88888888???????89????????99?????????9:??????????:;??????????;=??????????=>??????????>????????????@??????????@A??????????AC??????????CD??????????DE??????????EE??????????E6OXdknnkdXO6ic118?PNG
bookmark88?A[DT>??A?@
                     ApplicationsMAMPhtdocsServiceTestAutomationMDXservicecatalog-verizon.json$4T??
                  `?
                   U?????l??????
                                Macintosh H??=A?v?P$66267945-2481-3907-B88A-1094?is32???????????????????????????????????vvz?????????????????????????????????????????????????????????????????????????????????????????????vvz?????????????????????????????????????????????????????????????????????????????????????????????vvz???????????????????????????????????????????????????????????s8m+88888888???????89????????99?????????9:??????????:;??????????;=??????????=>??????????>????????????@??????????@A??????????AC??????????CD??????????DE??????????EE??????????E6OXdknnkdXO6ic118?PNG
UIEvolutions-MacBook-Pro-109:MDXServiceTesting Banderson$ ruby testmdxservices.rb
bookmark88?A?,P>??A?@
                     ApplicationsMAMPhtdocsServiceTestAutomationMDXservicecatalog-adaptation.json$4T??
                     `?
                      U?????l??????
                                   Macintosh H??=A?v?P$66267945-2481-3907-B88A-1094AA9DAB6D??/?<icns<?TOC his32?s8mic118il32?l8mic1?ic07ic13#ic08#ic14^?ic09_ic1?is32???????????????????????????????????vvz?????????????????????????????????????????????????????????????????????????????????????????????vvz?????????????????????????????????????????????????????????????????????????????????????????????vvz???????????????????????????????????????????????????????????s8m+88888888???????89????????99?????????9:??????????:;??????????;=??????????=>??????????>????????????@??????????@A??????????AC??????????CD??????????DE??????????EE??????????E6OXdknnkdXO6ic118?PNG

IHDR szz?iCCPICC Profile(?T?k?P??e???:g >h?ndStC??kW??Z?6?!H??m\??$?~?ًo:?w?>?
                                                                             كo{?a???"L?"???4M'S??????9'??^??qZ?/USO???????^C+?hM??J&G@Ӳy???lt?o߫?c՚?
                                                                    ? ??5?"?Y?i\?΁?'&??.?<?ER/?dE?oc?ግ#?f45@?   ??B:K?@8?i??
                  ??s??_???雭??m?N?|??9}p?????_?A??pX6?5~B?$?&???ti??e??Y)%$?bT?3li?
    ??????P???4?43Y???P??1???KF????ۑ??5>?)?@????r??y??????[?:V???ͦ#??wQ?HB??d(??B
                                                                               a?cĪ?L"J??itTy?8?;(???Gx?_?^?[???????%׎??ŷ??Q???麲?ua??n?7???
                                                           Q???H^e?O?Q?u6?S??u
                                                                              ?2??%vX
     ???^?*l
O?????ޭˀq,>??S???%?L??d????B???1CZ??$M??9??P
                                            'w????\/????]???.r#???E|!?3?>_?o?a?۾?d?1Z?ӑ???z???'?=??????~+??cjJ?tO%mN?????
                                         |??-???bW?O+
o?
  ^?
    I?H?.?;???S?]?i_s9?*p???.7U^??s.?3u? 
```

有人可以告诉我我做错了什么吗？我需要指定我使用的编码类型吗？我试图用 , 和另一个我不记得的文件来读取`gets`文件`sysread`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:47:05.713

我不完全确定为什么，但我相信是 './json' 路径导致了问题。我在我的 Windows XP 机器上尝试了该脚本并得到了类似的结果。

但是，当我重写脚本以包含`File.dirname(__FILE__)`而不是`'./'`它起作用时。我还清理了一些代码。

```
class ServiceCalls 

    def get_file
        dirname = File.join(File.dirname(__FILE__), 'json')
        Dir.entries(dirname).each do |file|
            unless file.start_with? '.'
                File.open(File.join(dirname, file), 'r') {|f| puts f.read}
            end
        end
    end
end

sc = ServiceCalls.new
sc.get_file 
```

`__FILE__`是当前脚本的路径。[`File.join`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-join)使用系统独立的路径分隔符。[`File.open`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-open)，如果你传递一个块，当它完成块时，它实际上会为你关闭文件。[`String#start_with?`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-start_with-3F)比使用`[0,1]`获取字符串的第一个元素更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:19:02.883

试试这个：

```
Dir.entries('./json').each do |mFile|
  next if ['.', '..'].include?(mFile)
  self.sendServiceRequest(mFile) 
```

# objective-c - 如何轻松更新 SQLite Objective-c 中的整行

> ID：12733236
> 
> 赞同：0
> 
> 时间：2012-10-04T18:11:22.007
> 
> 标签：objective-c, ios, sqlite, row

我有一个包含大约 150 列的数据库，并且想以某种方式一次更新整行。我不想做一个非常长的陈述，而且列的类型也不一样。有没有一种简单的方法可以做到这一点？也许在 Windows 中使用 NSMutableArray 或类似 BEGIN_COLUMN_MAP 和 COLUMN_ENTRY_AUTO 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:15:15.810

在 SQLite 中修改数据的唯一方法是使用`UPDATE`语句。

如果您不想自己编写它，则必须编写一个帮助函数来为您编写它。

# javascript - 在页面刷新/导航时保留 Twitter Bootstrap 折叠状态

> ID：12733238
> 
> 赞同：31
> 
> 时间：2012-10-04T18:11:33.490
> 
> 标签：javascript, jquery, twitter-bootstrap, twitter-bootstrap-3

我正在使用 Bootstrap“折叠”插件为一长串链接制作手风琴。手风琴体标签包括“折叠”，因此当页面加载时所有组都折叠起来。当您打开一个组并单击一个链接时，它会将您带到一个新页面以查看一些详细信息，然后您单击一个返回链接或浏览器返回以返回到列表。不幸的是，当您返回手风琴时，手风琴又回到了折叠状态，您必须再次打开该组并找到您所在的位置。我预计会有很多这种来回导航，这种行为会令人沮丧。

有什么方法可以保留用户的位置并返回到它，或者只是防止页面重新加载或 javascript 再次触发。

我认为解决方案可能是沿着这些思路，但不确定。 [Twitter bootstrap：向打开的手风琴标题添加一个类](https://stackoverflow.com/questions/10918801/twitter-bootstrap-adding-a-class-to-the-open-accordion-title)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-20T10:27:26.797

您可以通过 cookie 轻松解决此问题。有很多简化的库，比如我在下面的示例中使用的[https://github.com/carhartl/jquery-cookie ：](https://github.com/carhartl/jquery-cookie)

```
<script src="https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js"></script> 
```

将以下代码添加到脚本部分（`#accordion2`参考修改后的 twitter bootstrap 示例，我随后列出）

```
$(document).ready(function() {
    var last=$.cookie('activeAccordionGroup');
    if (last!=null) {
        //remove default collapse settings
        $("#accordion2 .collapse").removeClass('in');
        //show the last visible group
        $("#"+last).collapse("show");
    }
});

//when a group is shown, save it as the active accordion group
$("#accordion2").bind('shown', function() {
    var active=$("#accordion2 .in").attr('id');
    $.cookie('activeAccordionGroup', active)
}); 
```

你完成了！[这里是http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)上示例的修改版本，带有可点击的链接，当您返回时 - 最后显示的手风琴组会自动打开

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Collapsible Group Item #1
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Link : <a href="http://google.com">google.com</a>
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        Link : <a href="http://stackoverflow.com">stackoverflow.com</a>
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
        Collapsible Group Item #3
      </a>
    </div>
    <div id="collapseThree" class="accordion-body collapse">
      <div class="accordion-inner">
        Link : <a href="http://cryptozoologynews.blogspot.com/">cryptozoology news</a>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-08-12T07:15:38.847

在**Bootstrap 3.xx**中，您必须使用以下脚本将上次打开状态保存在 cookie 中。

**HTML 标记**

```
<div class="panel-group" id="accordion">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">Collapsible Group
                    Item #1 </a>
            </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse in">
            <div class="panel-body">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson
                ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put
                a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table,
                raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                labore sustainable VHS.
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">Collapsible Group
                    Item #2 </a>
            </h4>
        </div>
        <div id="collapseTwo" class="panel-collapse collapse">
            <div class="panel-body">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson
                ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put
                a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table,
                raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                labore sustainable VHS.
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Collapsible
                    Group Item #3 </a>
            </h4>
        </div>
        <div id="collapseThree" class="panel-collapse collapse">
            <div class="panel-body">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson
                ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food
                truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put
                a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim
                keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
                Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table,
                raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                labore sustainable VHS.
            </div>
        </div>
    </div>
</div> 
```

**jQuery**

```
 $(document).ready(function () {
        //when a group is shown, save it as the active accordion group
        $("#accordion").on('shown.bs.collapse', function () {
            var active = $("#accordion .in").attr('id');
            $.cookie('activeAccordionGroup', active);
          //  alert(active);
        });
        $("#accordion").on('hidden.bs.collapse', function () {
            $.removeCookie('activeAccordionGroup');
        });
        var last = $.cookie('activeAccordionGroup');
        if (last != null) {
            //remove default collapse settings
            $("#accordion .panel-collapse").removeClass('in');
            //show the account_last visible group
            $("#" + last).addClass("in");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-07T09:16:40.273

我尝试了上面建议的技术，它对我有用（有点），但在某些情况下调用 .collapse("show") 似乎会破坏手风琴切换行为。打开第一个面板将使先前打开的面板保持打开状态。我通过添加类“in”来解决这个问题：

```
$(document).ready(function() {
    var last=$.cookie('activeAccordionGroup');
    if (last!=null) {
        //remove default collapse settings
        $("#accordion .panel-collapse").removeClass('in');
        //show the account_last visible group
        $("#" + last).addClass("in");
    }
}); 
```

否则，感谢 davidkonrad 让我走上正轨。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-31T12:49:48.437

谢谢你，它有效。我对其进行了一些修改，以简单地保留特定 DIV 的显示/隐藏状态（而不是特定于在 DIV 列表中仅显示一个 DIV）。

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

<script language="javascript" type="text/javascript">
    function retainDivCollapsedState(nameOfDiv, nameOfHeader) {
        // when the div is shown, save a cookie with a value of 'true'
        $("#" + nameOfDiv).on('shown.bs.collapse', function () {
            $.cookie(nameOfDiv, "true"); // this is a cookie.  named the same as the control (poor practice) for brevity 
        });
        // when the div is collapsed, remove the same cookie
        $("#" + nameOfDiv).on('hidden.bs.collapse', function () {
            $.removeCookie(nameOfDiv);
        });

        // on page load, show or hide the div (and stylized the header) according to the cookie (if it exists)
        var showDiv = $.cookie(nameOfDiv);
        if (showDiv != null) {
            $("#" + nameOfDiv).addClass("in");                      // The div to show
            $("#" + nameOfHeader).removeClass("collapsed");         // The header to stylize as expanded
        }
    };
</script>

<script language="javascript" type="text/javascript">
    $(document).ready(
        retainDivCollapsedState("divName", "divHeaderName")
    );
</script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-23T17:11:47.580

另一个可用的选项是使用 url 哈希。

```
$(document).ready(function () {
    var hash = window.location.hash;
    if (hash) {
        $("#accordion .panel-collapse").removeClass('in');
        $(hash).addClass('in');
    }

    $('#accordion').on('shown.bs.collapse', function () {
        var activeId = $("#accordion .in").attr('id');
        window.location.hash = activeId;
    });

    $('#accordion').on('hidden.bs.collapse', function () {
        window.location.hash = '';
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T02:11:13.797

谢谢你，发现它很有帮助，但如果你使用的是 Bootstrap 3 和最新的 jquery，这可以工作：

```
$("#accordion").on('shown.bs.collapse', function()
{
   ...
}); 
```

希望这可以节省其他人一些时间....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-24T12:56:20.743

## 更新的答案

好的，伙计们，所以我花了一些时间试图让它发挥作用。主要是因为我发现的所有答案都超级旧且未更新。

这将适用于：

*   **引导程序 3.xx**
*   **引导程序 4.xx**
*   **引导程序 5.xx**

**注意：**更新到新的 Github 存储库[https://github.com/js-cookie/js-cookie](https://github.com/js-cookie/js-cookie)的 cookie的使用已更改，例如，而不是`$.cookie('name');`现在`Cookies.get('name');`

包括

```
<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script> 
```

脚本

```
$(document).ready(function() {

      var last=Cookies.get('activeAccordionGroup');

      if (last!=null) {
          //remove default collapse settings
          $("#accordion .collapse").removeClass('show');
          //show the last visible group
          $("#"+last).collapse("show");
      }
 });

 //when a group is shown, save it as the active accordion group
 $("#accordion").bind('shown.bs.collapse', function() {
      var active=$("#accordion .show").attr('id');
      Cookies.set('activeAccordionGroup', active);
  }); 
```

**变化：**

*   引导事件不再`shown`是`shown.bs.collapse`
*   Cookie 使用

手风琴 HTML

```
<div id="accordion">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h5 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Collapsible Group Item #1
        </button>
      </h5>
    </div>

    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body">
        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingTwo">
      <h5 class="mb-0">
        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Collapsible Group Item #2
        </button>
      </h5>
    </div>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
      <div class="card-body">
        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingThree">
      <h5 class="mb-0">
        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Collapsible Group Item #3
        </button>
      </h5>
    </div>
    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
      <div class="card-body">
        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
      </div>
    </div>
  </div>
</div> 
```

# python - 如何比较列表列表的元素（Python）

> ID：12733243
> 
> 赞同：1
> 
> 时间：2012-10-04T18:12:16.610
> 
> 标签：python, list, nested-lists

```
identical = 0
while x < len(BigList):
    while y < len(BigList):
        if BigList[x][0] == BigList[y][0] and y != x:
            identical += 1
        y += 1
    x += 1 
```

如何正确查看`0th`大列表中每个列表的元素是否等于大列表中另一个列表中的另一个第 0 个元素？

即，我需要`[[1,2],[2,3],[1,4],[2,5]]`制作`identical=2`，因为 2 个列表的第 0 个元素等于另一个列表的`0th`元素

蒂亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T18:20:12.670

```
identical = len(BigList) - len(set(item[0] for item in BigList)) 
```

重复项数 = BigList 中的项数减去唯一的第 0 个索引项数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:19:54.117

首先列出第 0 个元素...然后计算出现次数（如果您是 2.7+，则可以在第零个列表中使用 collections.Counter

```
zeros = [mylist[0] for mylist in biglist]
my_dict = dict([(c,zeros.count(c)) for c in zeros])
dup_elems = filter(lambda key:my_dict[key]>1, my_dict.keys())
print len(dup_elems) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:19:27.250

1.  计算在索引 0 处共享元素的子列表的数量。
2.  计算相同子列表的数量。
3.  两者的区别在于你所追求的。

代码：

```
firstElems = zip(*L)[0]
firstSames = sum(v for v in collections.Counter(firstElems).values if v != 1)
equals = sum(v for v in collections.counter(tuple(l) for l in L).values if v!=1)
answer = firstSames - equals 
```

希望这可以帮助。

# visual-studio - Monodroid 布局文件夹支持

> ID：12733248
> 
> 赞同：0
> 
> 时间：2012-10-04T18:12:34.627
> 
> 标签：visual-studio, android-layout, xamarin.android

我想根据 android 文档在我的布局文件夹上使用限定符，但 VS 中的设计器似乎不支持它们。例如 layout-w600dp 不会发送到模拟器；使用布局文件夹中的默认 axml 文件。

有谁知道 Monodroid 是否支持这些设置？如果是这样，您如何使它们生效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:14:44.493

我认为 w600dp 需要一定的 api 级别才能工作 - 可能是 3.2 - 请参阅[http://android-developers.blogspot.co.uk/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.co.uk/2011/07/new-tools-for-managing-screen-sizes.html)

# javascript - 这个窗口大小调整功能是如何工作的？

> ID：12733249
> 
> 赞同：0
> 
> 时间：2012-10-04T18:12:43.113
> 
> 标签：javascript

不久前，我要求一个 javascript 函数，它允许我以设定的时间间隔在浏览器窗口中调整内容的大小。就像，不是每个像素大小的变化。我被赋予了这个功能：

```
function throttle (func, wait) {
    var throttling = false;
    return function(){
        if ( !throttling ){
            func.apply(this, arguments);
            throttling = true;
            setTimeout(function(){
                throttling = false;
            }, wait);            
        }
    };
}

window.onresize = throttle(function() {
    resize_columns();
}, 20); 
```

该人说，当时他/她真的没有时间解释关闭。我仍然不明白它是如何工作的。有人可以向我解释吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:17:16.060

返回的匿名函数在“节流”变量上形成一个闭包。因此，即使您的堆栈展开，并且函数 throttle() 会“超出范围”。匿名函数仍然可以访问“节流”变量。

闭包很棒..我每天都在使用它们，它们对我来说仍然很神奇..（一旦你了解了它们是如何在堆上实现的，它就不那么神奇了，但我离题了 :)

# php - 无法使用 file_get_html 获取确切的字符集

> ID：12733251
> 
> 赞同：0
> 
> 时间：2012-10-04T18:12:47.077
> 
> 标签：php, ajax, simple-html-dom

我正在尝试使用简单 html dom 的 file_get_html 从网站获取详细信息。我试过的链接是：[http ://dns.marnet.net.mk/registar.php?dom=test.mk](http://dns.marnet.net.mk/registar.php?dom=test.mk)

我得到的满是问号

```
������ ������������ ������: 
test.com.mk
test.mk
�������� �� �������: test.mk [ ����� ��:15507 ]
���� �� ���� � ������� ��������������: 24-02-2013
���� �� ������������ �� �������:

24-02-2009
����� ��� �� ������������:

��� ��������� �������-������ ����� ������, ������� �� �����������, ���������, �������� � ������
������ �� ������������:

���. ����� �������� ��. 15/10, ������
��� �� ������������:

4030006605991
�������� �� ������������:

02/3114-001

��������������� �������
���:

����� ���������
e-mail:

zivko@prologistics.com
�������:

02/3114-000
�������� �������
���:

����� ���������
e-mail:

boris@proinformatics.com
�������:

02/3114-002
������� �����������
���
IP
ns2.powweb.com  65.254.254.134
ns1.powweb.com  65.254.254.135 
```

如何获取网站中使用的原始字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:33:49.510

我找到了解决方案。

我在 file_get_html 命令之后添加了这个。

```
$html=mb_convert_encoding($html,'utf8','windows-1251'); 
```

这根据需要转换了我的字符集。

感谢所有回复的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:24:25.140

查看源代码时，我刚刚检查了页面上的字符集：它给了我这个：

`<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">`

# delphi - Leak Watcher Tool - 重载内存分配

> ID：12733252
> 
> 赞同：1
> 
> 时间：2012-10-04T18:12:49.103
> 
> 标签：delphi, memory-management, memory-leaks

我正在开发一个工具来帮助我找到我的应用程序的内存泄漏。该功能在我使用对象 (TOBJECT) 时运行良好，但在使用缓冲区时遇到了一些问题。在某些情况下，我无法识别我的应用程序中出现了一些错误，这些错误似乎是对内存的一些错误访问。我在我的逻辑或代码上找不到任何可能的错误。如果有更多的德尔福经验的人可以帮助我。也许某些内存管理器的特定行为导致了问题。

多一点解释：

**内存分配控制**

Objective: 计算系统分配了多少确定大小的内存缓冲区，例如：

## 缓冲区大小 | 分配数量 | 使用的总内存

```
325     |       35265      |    11461125    
23      |       32         |     736
...     |       ...        |    ... 
```

我如何控制内存分配和释放：

```
I created an array of integer that goes from 0 to 65365\. This array will be used to keep the amount of allocs of the corresponding size.
For example, If I call GetMem for a buffer of 523, the Array[523] will increase + 1\. 

The GetMem, ReallocMem, AllocMem, the problem is easy to resolve 'cause one of it's parameters is the size of the buffer. So I can use this to increase the position of the array.

The problem cames with the FreeMem, 'cause the only parameter is the pointer of the buffer. I don't know it's size.
    - I can't create a list to keep the Pointer and it's size. 'Cause there is SO much allocations, it will be so much expensive to the application keep searching/adding/removing items from this list. And this list must to be protected with critical section etc etc. So no way.

How I'm trying to solve this problem: 
    Just to remeber I created the array to keep the number off allocations. 

    Items:     0                              65365
               |................................|
    Addess:   $X                            $(65365x SizeOf(Integer))   

    When allocators methos are called, for example: GetMem(52);
    I changed the behavior of it, I will alloc the requested size (52), but I'll add here a size of an integer;
    So I will have:  

    0     4                          56 
    |.....|...........................|
       $x           

    In the plus space (0..3) I'll set the address of the corresponding space of the array. In this case the address position $array(52). And I add + (SizeOf(Integer)) to the address result of the GetMem, so it will have access just the 52 bytes that were asked for.

    When the FreeMem are called. What I do is:
        - Get the pointer asked for deallocation.
        - Decrease the pointer by the size of the integer
        - Check if the address of the current pointer is relative to the Array of control address.
        - If it is, I use the the address and decrease 1 from the Array position
        - And ask for the FreeMem 
```

在大部分时间和系统中，它运行良好。但是，在某些时候，我真的不知道如何以及是否在系统中遇到了一些奇怪的错误。如果我停用此实现，我永远不会得到错误。

我正在评论代码以便更容易理解，但这不是硬代码，所以，这里是：

其他线程：[https ://forums.embarcadero.com/thread.jspa?threadID=77787](https://forums.embarcadero.com/thread.jspa?threadID=77787)

```
unit uInstancesAnalyser;

    {
    Functionality: The feature developed in this unit try to watch how the memory are being allocated by your system. The main focus of it is help to find memory leak in the most non intrusive way.
    How to Install: Put this unit as the first unit of yout project. If use use a third memory manager put this unit just after the unit of your memory manager.
    How to get it's report: It's not the final version of this unit, so the viewer was not developed. By the momento you can call the
        method SaveInstancesToFile. It'll create a text file called MemReport in the executable path.

    WARNING: If you use the pointer of the VMT destinated to vmtAutoTable, you should not use the directive TRACEINSTANCES.

    How it works:
    The feature work in two different approaches:
    1) Map the memory usage by objects
    2) Map the memory usage by buffers (Records, strings and so on)

    How are Objects tracked:
      The TObject.NewInstance was replaced by a new method (TObjectHack.NNewInstanceTrace).
      So when the creation of an object is called it's redirect to the new method. In this new method is increased the counter of the relative class and change the method in the VMT that is responsible to free the object to a new destructor method (vmtFreeInstance). This new destructor call the decrease of the counter and the old destructor.
      This way I can know how much of objects of each class are alive in the system.

      (More details about how it deep work can be found in the comments on the code)

    How are Memory Buffer Traced:
      The GetMem, FreeMem, ReallocMem, AllocMem were replaced by new method that have an special behavior to help track the buffers.

       As the memory allocation use the same method to every kind of memory request, I'm not able to create a single counter to each count of buffer. So, I calculate them base on it size. First I create a array of integer that start on 0 and goes to 65365.
      When the system ask me to give it a buffer of 65 bytes, I increase the position 65 of the array and the buffer is deallocated I call the decrease of the position of the array corresponding to buffer size. If the size requested to the buffer is bigger or equal to 65365, I'll use the position 65365 of the array.

      (More details about how it deep work can be found in the comments on the code)

    --------------------------------------------------------------------------------------
    Develop by  Rodrigo Farias Rezino
        E-mail: rodrigofrezino@gmail.com
        Stackoverflow: http://stackoverflow.com/users/225010/saci
         Please, any bug let me know
    }

    interface
    {$DEFINE TRACEBUFFER}    {Directive used to track buffer} //Comment to inactive
    {$DEFINE TRACEINSTANCES} {Directive used to track objects} //Comment to inactive

    //{$DEFINE WATCHTHREADS} // It's not finished

    uses
      Classes, SyncObjs, uIntegerList;

      {You can register possibles names for some Buffers Sizes, it can be useful when you are working with record. Example
        TRecordTest = record
          Field1: Integer
          Field2: string[50]

        So, you can call RegisterNamedBuffer(TRecordTest, SizeOf(TRecordTest));
        This way, in on the report of buffer/objects will be explicit what possibles named buffer can be that memory in use.}
      procedure RegisterNamedBuffer(ABufferName: string; ASize: integer);

      {This function return the possible named buffers registered with that size}
      function GetBufferName(ASize: integer): string;

      {It's a simple output to save the report of memory usage on the disk. It'll create a file called test.txt in the executable directory}
      procedure SaveInstancesToFile;

    var
      {Flag to say if the memory watcher is on or off}
      SIsMemoryWatcherActive: Boolean;

    implementation

    uses
       Windows, SysUtils, TypInfo;

    const
      SIZE_OF_INT = SizeOf(Integer);

      SIZE_OF_MAP = 65365;
      {$IFDEF WATCHTHREADS}
      GAP_SIZE = SIZE_OF_INT * 2;
      {$ELSE}
      GAP_SIZE = SIZE_OF_INT;
      {$ENDIF}

    type
      TArrayOfMap = array [0..SIZE_OF_MAP] of Integer;
      TThreadMemory = array [0..SIZE_OF_MAP] of Integer;

      {This class is used to Register}
      TNamedBufferList = class(TIntegerList)
      public
        constructor Create;

        function GetBufferName(ASize: integer): string;
        procedure RegisterNamedBuffer(ABufferName: string; ASize: integer);
      end;

      PClassVars = ^TClassVars;
      TClassVars = class(TObject)
      private
        class var ListClassVars: TList;
      public
        BaseInstanceCount: Integer;
        BaseClassName: string;
        BaseParentClassName: string;
        BaseInstanceSize: Integer;
        OldVMTFreeInstance: Pointer;
        constructor Create;
        class procedure SaveToDisk;
      end;

      TNamedBuffer = class(TObject)
        Names: string;
      end;

      PJump = ^TJump;
      TJump = packed record
        OpCode: Byte;
        Distance: Pointer;
      end;

      TObjectHack = class(TObject)
      private
        FCriticalSection: TCriticalSection;
        class procedure SetClassVars(AClassVars: TClassVars); //inline;
        class function GetClassVars: TClassVars; inline;

        procedure IncCounter; inline;
        procedure DecCounter; inline;
        procedure CallOldFunction;
      public
        constructor Create;
        destructor Destroy; override;

        class function NNewInstance: TObject;
        class function NNewInstanceTrace: TObject;
        procedure NFreeInstance;
      end;

    var
      SDefaultGetMem: function(Size: Integer): Pointer;
      SDefaultFreeMem: function(P: Pointer): Integer;
      SDefaultReallocMem: function(P: Pointer; Size: Integer): Pointer;
      SDefaultAllocMem: function(Size: Cardinal): Pointer;

      SThreadMemory: TThreadMemory;
      SMap: TArrayOfMap;
      SNamedBufferList: TNamedBufferList;

      {$IFDEF WATCHTHREADS}
      SMissedMemoryFlow: Integer;
      {$ENDIF}

    {$REGION 'Util'}
    type
      TWinVersion = (wvUnknown, wv95, wv98, wv98SE, wvNT, wvME, wv2000, wvXP, wvVista, wv2003, wv7);

    function GetWinVersion: TWinVersion;
    var
      osVerInfo: TOSVersionInfo;
      majorVersion, minorVersion: Integer;
    begin
      Result := wvUnknown;
      osVerInfo.dwOSVersionInfoSize := SizeOf(TOSVersionInfo);
      if GetVersionEx(osVerInfo) then
      begin
        minorVersion := osVerInfo.dwMinorVersion;
        majorVersion := osVerInfo.dwMajorVersion;
        case osVerInfo.dwPlatformId of
          VER_PLATFORM_WIN32_NT:
          begin
            if majorVersion <= 4 then
              Result := wvNT
            else if (majorVersion = 5) and (minorVersion = 0) then
              Result := wv2000
            else if (majorVersion = 5) and (minorVersion = 1) then
              Result := wvXP
            else if (majorVersion = 5) and (minorVersion = 2) then
              Result := wv2003
            else if (majorVersion = 6) then
              Result := wvVista
            else if (majorVersion = 7) then
              Result := wv7;
          end;
          VER_PLATFORM_WIN32_WINDOWS:
          begin
            if (majorVersion = 4) and (minorVersion = 0) then
              Result := wv95
            else if (majorVersion = 4) and (minorVersion = 10) then
            begin
              if osVerInfo.szCSDVersion[1] = 'A' then
                Result := wv98SE
              else
                Result := wv98;
            end
            else if (majorVersion = 4) and (minorVersion = 90) then
              Result := wvME
            else
              Result := wvUnknown;
          end;
        end;
      end;
    end;

    function GetMethodAddress(AStub: Pointer): Pointer;
    const
      CALL_OPCODE = $E8;
    begin
      if PBYTE(AStub)^ = CALL_OPCODE then
      begin
        Inc(Integer(AStub));
        Result := Pointer(Integer(AStub) + SizeOf(Pointer) + PInteger(AStub)^);
      end
      else
        Result := nil;
    end;

    procedure AddressPatch(const ASource, ADestination: Pointer);
    const
      JMP_OPCODE = $E9;
      SIZE = SizeOf(TJump);
    var
      NewJump: PJump;
      OldProtect: Cardinal;
    begin
      if VirtualProtect(ASource, SIZE, PAGE_EXECUTE_READWRITE, OldProtect) then
      begin
        NewJump := PJump(ASource);
        NewJump.OpCode := JMP_OPCODE;
        NewJump.Distance := Pointer(Integer(ADestination) - Integer(ASource) - 5);

        FlushInstructionCache(GetCurrentProcess, ASource, SizeOf(TJump));
        VirtualProtect(ASource, SIZE, OldProtect, @OldProtect);
      end;
    end;

    function PatchCodeDWORD(ACode: PDWORD; AValue: DWORD): Boolean;
    var
      LRestoreProtection, LIgnore: DWORD;
    begin
      Result := False;
      if VirtualProtect(ACode, SizeOf(ACode^), PAGE_EXECUTE_READWRITE, LRestoreProtection) then
      begin
        Result := True;
        ACode^ := AValue;
        Result := VirtualProtect(ACode, SizeOf(ACode^), LRestoreProtection, LIgnore);

        if not Result then
          Exit;

        Result := FlushInstructionCache(GetCurrentProcess, ACode, SizeOf(ACode^));
      end;
    end;

    {$ENDREGION}

    function GetInstanceList: TList;
    begin
      Result := TClassVars.ListClassVars;
    end;

    procedure SaveInstancesToFile;
    begin
      TClassVars.SaveToDisk;
    end;

    procedure OldNewInstance;
    asm
      call TObject.NewInstance;
    end;

    procedure OldAfterConstruction;
    asm
      call TObject.InitInstance;
    end;

    { TObjectHack }
    type
      TExecute = procedure of object;

    procedure TObjectHack.CallOldFunction;
    var
      Routine: TMethod;
      Execute: TExecute;
    begin
      Routine.Data := Pointer(Self);
      Routine.Code := GetClassVars.OldVMTFreeInstance;
      Execute := TExecute(Routine);
      Execute;
    end;

    constructor TObjectHack.Create;
    begin

    end;

    procedure TObjectHack.DecCounter;
    var
      ThreadId: Cardinal;
    begin
      {$IFDEF WATCHTHREADS}
      ThreadId := GetCurrentThreadId;
      SThreadMemory[ThreadId] := SThreadMemory[ThreadId] - Self.InstanceSize;
      ThreadId := 0;
      if (Self.ClassType.InheritsFrom(TThread)) then
        ThreadId := TThread(Self).ThreadID;
      {$ENDIF}

      GetClassVars.BaseInstanceCount := GetClassVars.BaseInstanceCount -1;
      CallOldFunction;

      {$IFDEF WATCHTHREADS}
      if ThreadId <> 0 then
      begin
        if SThreadMemory[ThreadId] < 0 then
          SMissedMemoryFlow := SMissedMemoryFlow + SThreadMemory[ThreadId];

        SThreadMemory[ThreadId] := 0;
      end;
      {$ENDIF}
    end;

    destructor TObjectHack.Destroy;
    begin

      inherited;
    end;

    class function TObjectHack.GetClassVars: TClassVars;
    begin
      Result := PClassVars(Integer(Self) + vmtAutoTable)^;
    end;

    function _InitializeHook(AClass: TClass; AOffset: Integer; HookAddress: Pointer): Boolean;
    var
      lAddress: Pointer;
      lProtect: DWord;
    begin
      lAddress := Pointer(Integer(AClass) + AOffset);
      Result := VirtualProtect(lAddress, 4, PAGE_READWRITE, @lProtect);
      if not Result then
        Exit;

      CopyMemory(lAddress, @HookAddress, 4);
      Result := VirtualProtect(lAddress, 4, lProtect, @lProtect);
    end;

    class procedure TObjectHack.SetClassVars(AClassVars: TClassVars);
    begin
      AClassVars.BaseClassName := Self.ClassName;
      AClassVars.BaseInstanceSize := Self.InstanceSize;
      AClassVars.OldVMTFreeInstance := PPointer(Integer(TClass(Self)) + vmtFreeInstance)^;

      if Self.ClassParent <> nil then
        AClassVars.BaseParentClassName := Self.ClassParent.ClassName;

      PatchCodeDWORD(PDWORD(Integer(Self) + vmtAutoTable), DWORD(AClassVars));
      _InitializeHook(Self, vmtFreeInstance, @TObjectHack.DecCounter);
    end;

    procedure RegisterClassVarsSupport(const Classes: array of TObjectHack);
    var
      LClass: TObjectHack;
    begin
      for LClass in Classes do
        if LClass.GetClassVars = nil then
          LClass.SetClassVars(TClassVars.Create)
        else
          raise Exception.CreateFmt('Class %s has automated section or duplicated registration.', [LClass.ClassName]);
    end;

    procedure TObjectHack.IncCounter;
    begin
      if GetClassVars = nil then
        RegisterClassVarsSupport(Self);

      GetClassVars.BaseInstanceCount := GetClassVars.BaseInstanceCount + 1;
    end;

    { TClassVars }

    constructor TClassVars.Create;
    begin
      ListClassVars.Add(Self);
    end;

    class procedure TClassVars.SaveToDisk;
    var
      LStringList: TStringList;
      i: Integer;
    begin
      LStringList := TStringList.Create;
      try
        LStringList.Add('CLASS | NUMBER OF INSTANCES');
        {$IFDEF TRACEINSTANCES}
        for i := 0 to ListClassVars.Count -1 do
          if TClassVars(ListClassVars.Items[I]).BaseInstanceCount > 0 then
            LStringList.Add(TClassVars(ListClassVars.Items[I]).BaseClassName + '|' + IntToStr(TClassVars(ListClassVars.Items[I]).BaseInstanceCount));
        {$ENDIF}

        {$IFDEF TRACEBUFFER}
        for I := 0 to SIZE_OF_MAP do
          if SMap[I] > 0 then
            LStringList.Add(Format('Mem. Size: %d | Amount: %d', [I, SMap[I]]));
        {$ENDIF}

        LStringList.SaveToFile(ExtractFilePath(ParamStr(0)) + 'MemReport.txt');
      finally
        FreeAndNil(LStringList);
      end;
    end;

    //////////////////////////////////////////////////////////////////////////////////////
    ///  Memory manager controller

    function IsInMap(AValue: Integer): Boolean; inline;
    begin
      try
        Result := (AValue > Integer(@SMap)) and (AValue <= Integer(@SMap[SIZE_OF_MAP]));
      except
        Result := False;
      end;
    end;

    function MemorySizeOfPos(APos: Integer): Integer; inline;
    begin
      Result := (APos - Integer(@SMap)) div SIZE_OF_INT;
    end;

    function NAllocMem(Size: Cardinal): Pointer;
    var
      pIntValue: ^Integer;
      MapSize: Integer;
      ThreadId: Cardinal;
    begin
      if Size > SIZE_OF_MAP then
        MapSize := SIZE_OF_MAP
      else
        MapSize := Size;

      Result := SDefaultAllocMem(Size + GAP_SIZE);
      pIntValue := Result;
      SMap[MapSize] := SMap[MapSize] + 1;
      pIntValue^ := Integer(@SMap[MapSize]);

      {$IFDEF WATCHTHREADS}
      ThreadId := GetCurrentThreadId;
      SThreadMemory[ThreadId] := SThreadMemory[ThreadId] + Size;

      pIntValue := Pointer(Integer(Result) + SIZE_OF_INT);
      pIntValue^ := ThreadId;
      {$ENDIF}

      Result := Pointer(Integer(Result) + GAP_SIZE);
    end;

    function NGetMem(Size: Integer): Pointer;
    var
      LPointer: Pointer;
      pIntValue: ^Integer;
      MapSize: Integer;
      ThreadId: Cardinal;
    begin
      if Size > SIZE_OF_MAP then
        MapSize := SIZE_OF_MAP
      else
        MapSize := Size;

      LPointer := SDefaultGetMem(Size + GAP_SIZE);
      pIntValue := LPointer;
      SMap[MapSize] := SMap[MapSize] + 1;
      pIntValue^ := Integer(@SMap[MapSize]);

      {$IFDEF WATCHTHREADS}
      ThreadId := GetCurrentThreadId;
      SThreadMemory[ThreadId] := SThreadMemory[ThreadId] + Size;

      pIntValue := Pointer(Integer(LPointer) + SIZE_OF_INT);
      pIntValue^ := ThreadId;
      {$ENDIF}

      Result := Pointer(Integer(LPointer) + GAP_SIZE);
    end;

    function NFreeMem(P: Pointer): Integer;
    var
      pIntValue: ^Integer;
      LPointer: Pointer;
      ThreadId: Cardinal;
      LFreed: Boolean;
    begin
      LPointer := Pointer(Integer(P) - GAP_SIZE);
      pIntValue := LPointer;
      if IsInMap(pIntValue^) then
      begin
        {$IFDEF WATCHTHREADS}
        ThreadId := Integer(Pointer(Integer(pIntValue) + SIZE_OF_INT)^);
        SThreadMemory[ThreadId] := SThreadMemory[ThreadId] - MemorySizeOfPos(pIntValue^);
        {$ENDIF}
        Integer(Pointer(pIntValue^)^) := Integer(Pointer(pIntValue^)^) - 1;
        Result := SDefaultFreeMem(LPointer);
      end
      else
        Result := SDefaultFreeMem(P);
    end;

    function NReallocMem(P: Pointer; Size: Integer): Pointer;
    var
      pIntValue: ^Integer;
      LPointer: Pointer;
      LSizeMap: Integer;
      ThreadId: Cardinal;
    begin
      LPointer := Pointer(Integer(P) - GAP_SIZE);
      pIntValue := LPointer;
      if not IsInMap(pIntValue^) then
      begin
        Result := SDefaultReallocMem(P, Size);
        Exit;
      end;

      if Size > SIZE_OF_MAP then
        LSizeMap := SIZE_OF_MAP
      else
        LSizeMap := Size;

      //Uma vez com o valor setado, não pode remover o setor
      Integer(Pointer(pIntValue^)^) := Integer(Pointer(pIntValue^)^) - 1;

      {$IFDEF WATCHTHREADS}
      ThreadId := Integer(Pointer(Integer(pIntValue) + SIZE_OF_INT)^);
      SThreadMemory[ThreadId] := SThreadMemory[ThreadId] - MemorySizeOfPos(pIntValue^) + Size;
      {$ENDIF}

      Result := SDefaultReallocMem(LPointer, Size + GAP_SIZE);
      SMap[LSizeMap] := SMap[LSizeMap] + 1;
      pIntValue := Result;
      pIntValue^ := Integer(@SMap[LSizeMap]);
      Result := Pointer(Integer(Result) + GAP_SIZE);
    end;

    procedure TObjectHack.NFreeInstance;
    var
      ThreadId: Cardinal;
    begin
      {$IFDEF WATCHTHREADS}
      ThreadId := GetCurrentThreadId;
      SThreadMemory[ThreadId] := SThreadMemory[ThreadId] - Self.InstanceSize;
      {$ENDIF}
      CleanupInstance;
      SDefaultFreeMem(Self);
    end;

    class function TObjectHack.NNewInstance: TObject;
    var
      ThreadId: Cardinal;
    begin
      Result := InitInstance(SDefaultGetMem(Self.InstanceSize));
      {$IFDEF WATCHTHREADS}
      ThreadId := GetCurrentThreadId;
      SThreadMemory[ThreadId] := SThreadMemory[ThreadId] + Self.InstanceSize;
      {$ENDIF}
    end;

    class function TObjectHack.NNewInstanceTrace: TObject;
    var
      ThreadId: Cardinal;
    begin
      try
        Result := InitInstance(SDefaultGetMem(Self.InstanceSize));
        if (Result.ClassType = TClassVars) or (Result is EExternal) then
          Exit;

        TObjectHack(Result).IncCounter;
        {$IFDEF WATCHTHREADS}
        ThreadId := GetCurrentThreadId;
        SThreadMemory[ThreadId] := SThreadMemory[ThreadId] + Self.InstanceSize;
        {$ENDIF}
      except
        raise Exception.Create(Result.ClassName);
      end;
    end;

    procedure InitializeArray;
    var
      I: Integer;
    begin
      for I := 0 to SIZE_OF_MAP do
        SMap[I] := 0;
    end;

    type
      PLocalTest = ^LocalTest;
      LocalTest = record
        Size: integer;
        Size2: string;
      end;

    procedure ApplyMemoryManager;
    var
      LMemoryManager: TMemoryManagerEx;
    begin
      GetMemoryManager(LMemoryManager);
      SDefaultGetMem := LMemoryManager.GetMem;
      {$IFNDEF TRACEBUFFER}
      Exit;
      {$ENDIF}
      LMemoryManager.GetMem := NGetMem;

      SDefaultFreeMem := LMemoryManager.FreeMem;
      LMemoryManager.FreeMem := NFreeMem;

      SDefaultReallocMem := LMemoryManager.ReallocMem;
      LMemoryManager.ReallocMem := NReallocMem;

      SDefaultAllocMem := LMemoryManager.AllocMem;
      LMemoryManager.AllocMem := NAllocMem;

      SetMemoryManager(LMemoryManager);
    end;

    procedure TestRecord;
    var
      LTest: PLocalTest;
    begin
      LTest := AllocMem(1);
      Dispose(LTest);

      LTest := AllocMem(SIZE_OF_MAP + 1);
      Dispose(LTest);

      New(LTest);
      ReallocMem(LTest, SIZE_OF_MAP +1);
      Dispose(LTest);
    end;

    procedure TesteObject;
    var
      LTestObject: TObject;
    begin
      LTestObject := TObject.Create;
      LTestObject.Free;
    end;

    { TNamedBuffer }

    constructor TNamedBufferList.Create;
    begin
      inherited Create;
      Sorted := True;
    end;

    function GetBufferName(ASize: integer): string;
    begin
      Result := SNamedBufferList.GetBufferName(ASize);
    end;

    procedure RegisterNamedBuffer(ABufferName: string; ASize: integer);
    begin
      SNamedBufferList.RegisterNamedBuffer(ABufferName, ASize);
    end;

    function TNamedBufferList.GetBufferName(ASize: integer): string;
    var
      LIndex: Integer;
    begin
      Result := 'Unknow';
      LIndex := IndexOf(ASize);
      if LIndex = -1 then
        Exit;
      Result := TNamedBuffer(Objects[LIndex]).Names;
    end;

    procedure TNamedBufferList.RegisterNamedBuffer(ABufferName: string; ASize: integer);
    var
      LIndex: Integer;
      LNamedBuffer: TNamedBuffer;
    begin
      LIndex := IndexOf(ASize);
      if LIndex = -1 then
      begin
        LNamedBuffer := TNamedBuffer.Create;
        LNamedBuffer.Names := 'Possible types: ' + ABufferName;
        Self.AddObject(ASize, LNamedBuffer);
      end
      else
        TNamedBuffer(Objects[LIndex]).Names := TNamedBuffer(Objects[LIndex]).Names + ' | ' + ABufferName;
    end;

    procedure InitializeAnalyser;
    var
      LCan: Boolean;
    begin
      SIsMemoryWatcherActive := False;
      SNamedBufferList := TNamedBufferList.Create;

      case GetWinVersion of
        wv98, wvXP, wvVista, wv7: LCan := True;
        else LCan := False;
      end;

      if not LCan then
        Exit;

      {$IFDEF TRACEINSTANCES}
      TClassVars.ListClassVars := TList.Create;
      {$ENDIF}

      {$IFDEF TRACEBUFFER}
      InitializeArray;
      {$ENDIF}

      ApplyMemoryManager;
      ///  Buffer wrapper
      {$IFDEF TRACEBUFFER}
      TestRecord;
        {$IFNDEF TRACEINSTANCES}
        AddressPatch(GetMethodAddress(@OldNewInstance), @TObjectHack.NNewInstance);
        {$ENDIF}
      {$ENDIF}

      ///Class wrapper
      {$IFDEF TRACEINSTANCES}
      AddressPatch(GetMethodAddress(@OldNewInstance), @TObjectHack.NNewInstanceTrace);
      TesteObject;
      {$ENDIF}
      SIsMemoryWatcherActive := True;
    end;

    { TThreadDestroy }
    initialization
      InitializeAnalyser

    end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:32:31.663

我没有清理 FreeMem 上的奇偶校验字节。如果有人想看看或帮助，我会继续努力：[http ://rfrezinos.wordpress.com/delphi-memory-profiler/](http://rfrezinos.wordpress.com/delphi-memory-profiler/)

附件。

# java - 程序忽略 ID 为 4096 的 setInputType

> ID：12733253
> 
> 赞同：0
> 
> 时间：2012-10-04T18:12:49.473
> 
> 标签：java, android, android-edittext

我有一个滑块，可以让我动态添加一些 EditText 字段。

这是我使用的代码：

```
EditText editText = new EditText(getActivity());
editText.setId(i);
editText.setLayoutParams(new LayoutParams(
LayoutParams.FILL_PARENT,
LayoutParams.WRAP_CONTENT));
editText.setInputType(4096);
linearLayout.addView(editText);
editText.setHint("Cash Flow " + i);
i++; 
```

这是在一个 while 循环中，确保创建的字段数 = 滑块上的数字。无论如何，根据[this](http://developer.android.com/reference/android/text/InputType.html#TYPE_NUMBER_FLAG_DECIMAL)的 setInputType并不适用于所有值。例如，如果我将 2 放入其中，它将自动将键盘仅作为“数字和符号”部分。

但是，我需要该人能够输入负数（即数字前的负号）。

我认为 ID 为 4096 的 TYPE_NUMBER_FLAG_SIGNED 应该可以解决问题，但我仍然可以在该字段中输入字母和内容......

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:20:43.240

TYPE_NUMBER_FLAG_SIGNED 是一个标志而不是输入类型，你必须做的是这样写：

```
setInputType(TYPE_CLASS_NUMBER | TYPE_NUMBER_FLAG_SIGNED); 
```

# debugging - windbg -remote 无法连接到 Server 2012 上的 localhost

> ID：12733255
> 
> 赞同：2
> 
> 时间：2012-10-04T18:12:54.120
> 
> 标签：debugging, windbg, remote-debugging

我正在尝试使用 IFEO 方法调试服务的启动（我已经在 Windows 2012 之前的服务器版本上成功完成了启动以外的场景）。reg`Debugger`值为. `c:\debuggers-x64\cdb.exe -server tcp:port=1234`然后我启动服务并验证 cdb.exe 正在监听使用`netstat -na | findstr 1234`（我验证在启动服务之前没有在此端口上监听）。然后我尝试像这样连接到调试服务器，`windbg.exe -remote tcp:server=localhost,port=1234`但它可能会挂起 15-30 秒然后失败。我再次尝试，当它挂起时，我`netstat -na | findstr 1234`再次运行，它显示 cdb.exe 在端口 1234 上侦听，它还显示 SYN_SENT 到端口 1234 上的 127.0.0.1（可能是由 windbg.exe 发送的）。它保持在 SYN_SENT 状态，直到 windbg.exe 报告连接失败。

所以 TCP 连接建立永远不会完成。我检查了防火墙，它已关闭。我也尝试使用网络适配器的 IP 地址（而不是`localhost`），但我得到了相同的行为。我还尝试让 cdb.exe 在 > 5000 的端口上侦听，但这也具有相同的行为。

有谁知道 Server 2012 中是否引入了用于访问 TCP 端口的新安全性？

谢谢

# php - PHP cURL 站点地图生成器

> ID：12733257
> 
> 赞同：0
> 
> 时间：2012-10-04T18:13:00.443
> 
> 标签：php, curl, sitemap

大家好，我的站点地图生成器有问题，它在几千个 URL 上运行良好，但是当它到达 20000 个 URL 时，它开始出错，我还能做些什么来帮助防止这种情况

```
$request_url ="http://www.example.com";//put your url here
$url=str_replace("http://", "", $request_url); // i added this because to check if wwwdomain.com is in the url
$alllinks=array();// create an array for all the links
         $alllinks2=array();// create an array for all the links
          $alllinks3=array();// create an array for all the links
            $newUrl=array();// create an array for all the links
$badUrls=array("basket", "#" ,"mailto", "javascript:document", "reviews.php", "review.php","tab=",".JPG",".jpg","png","PNG","gif","GIF","item_id=","../", "pn_pr");// array of urls we dont want to include
$ch = curl_init(); //search for links
curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
curl_setopt($ch, CURLOPT_URL, $request_url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt ($ch,CURLOPT_VERBOSE,false);
curl_setopt($ch, CURLOPT_TIMEOUT, 900);
$result = curl_exec($ch); 
```

谢谢

# jquery - JQuery 选择器只需选择

> ID：12733261
> 
> 赞同：1
> 
> 时间：2012-10-04T18:13:09.897
> 
> 标签：jquery

我正在尝试更改 html 元素的标签。

HTML

```
 <div id='content'>
 <g transform="100">.....</g>
 <g transform="150">This needs to stay as is</g>
 </div> 
```

如何更改第一个元素的变换值？到目前为止，我有以下...

```
 $('#content g:first').replaceWith( "hello" ); 
```

显然，这改变了一切，我只需要改变变换值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:15:16.887

您可以使用`attr`方法：

```
$('#content g:first').attr('transform', 'newValue'); 
```

但是，如果您的文档类型是 HTML `g`，则不是有效标签，`transform`也不是有效属性，您可以改用`data-*`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:15:25.757

```
$('#content g:first').attr("transform", "hello"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:16:29.380

*attr*方法将为您完成工作

# google-app-engine - Future.wait_all() 的 GAE NDB 示例用法

> ID：12733269
> 
> 赞同：1
> 
> 时间：2012-10-04T18:13:47.463
> 
> 标签：google-app-engine

对不起我的无知，但我的期望是这会奏效：

```
from google.appengine.ext import ndb
from models import myModels

delete_futures = []
delete_futures.append(ndb.delete_multi_async(myModels.Kind1.query().fetch(999999, keys_only=True)))
delete_futures.append(ndb.delete_multi_async(myModels.Kind2.query().fetch(999999, keys_only=True)))

ndb.Future.wait_all(delete_futures) 
```

但它会抛出“TypeError：列表对象是不可散列的”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:25:39.293

也许使用 .extend 创建单个列表而不是列表列表？

> 等到通过列表中的所有期货都完成。

没想到您可能会通过列表。

```
delete_futures = []
delete_futures.extend(ndb.delete_multi_async(myModels.Kind1.query().fetch(999999,          keys_only=True)))
delete_futures.extend(ndb.delete_multi_async(myModels.Kind2.query().fetch(999999, keys_only=True))) 
```

[https://developers.google.com/appengine/docs/python/ndb/futureclass#Future_wait_all](https://developers.google.com/appengine/docs/python/ndb/futureclass#Future_wait_all)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:26:21.167

每次调用`delete_multi_async`都会返回一个期货列表，因此您的`delete_futures`列表是一个列表列表。`append`将您的 s更改为`extend`它应该可以工作

# ruby-on-rails - 'validate_inclusion_of' 不起作用

> ID：12733271
> 
> 赞同：0
> 
> 时间：2012-10-04T18:13:58.367
> 
> 标签：ruby-on-rails, ruby

我需要设置一个条件，如果`my_counter`等于或`0`，则我的验证标志设置为，否则将我的验证标志设置为。`1``2``true``false`

但我的`validate_inclusion_of`电话不起作用：

```
if User.find_by_email(@email)
      user = User.find_by_email(@email)
      user.my_count += 1
      user.save

      # Here is where it fails
      if validates_inclusion_of :my_count, :in => [0,1,2]
        @my_flag = true
      else
        @my_flag = false
      end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:16:05.687

这不是您在模型上设置验证的方式。我可以建议你这样做：

```
@my_flag = [0,1,2].include? user.my_count 
```

**编辑：**让我指出你发现你的`User`两次导致 2 个查询。考虑这样做：

```
if user = User.find_by_email(@email)
  user.my_count += 1
  user.save
  @my_flag = [0,1,2].include? user.my_count
end 
```

# forms - HTML表单不发送参数

> ID：12733276
> 
> 赞同：18
> 
> 时间：2012-10-04T18:14:11.253
> 
> 标签：forms, html

我为我的网站编写了一个登录面板，一切看起来都很好，但是当我点击提交页面刷新时，没有发送任何参数。我检查了 get 和 post 方法，但它不起作用。这是我的代码：

```
<form id="login_form" action="index.php?task=login" method="post">
    <div class="control-group">
        <div class="controls">
            <div class="input-prepend">
                <span class="add-on"><i class="icon-user"></i></span>
                <input class="span2" id="username" type="text" value="Username" onblur="if(this.value=='') this.value='Username'" onfocus="if(this.value=='Username') this.value='';">
            </div>
        </div>
    </div>
    <div class="control-group">
        <div class="controls">
            <div class="input-prepend">
                <span class="add-on"><i class="icon-cog"></i></span>
                <input class="span2" id="password" type="password" value="Password" onblur="if(this.value=='') this.value='Password'" onfocus="if(this.value=='Password') this.value='';" />
            </div>
        </div>
    </div>
    <div class="clear"></div>
    <div class="separator"></div>
    <button type="submit" class="btn">Login</button>
</form> 
```

谁能告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-04T18:15:20.197

您的输入标签没有`name`发布值所需的属性。

```
<input type="text" name="username" /> 
```

# php - 负时间戳——在 PHP 中有意义吗？

> ID：12733280
> 
> 赞同：5
> 
> 时间：2012-10-04T18:14:22.940
> 
> 标签：php, date, time, timestamp

根据[手册](http://www.php.net/manual/en/function.time.php)，PHP 使用 Unix 纪元（1970 年 1 月 1 日 00:00:00 UTC）来生成其时间戳。

鉴于此定义，我认为当目标日期在 Unix 纪元之前时，使用负时间戳是合理的。但是，由于时间在编程中是一个复杂的问题，我想知道在 PHP 中使用负时间戳是否有任何警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:16:00.757

的确，你是完全正确的。负数只是 Unix 纪元之前的秒数。

# objective-c - MFMailComposeViewController 中的 iOs 自定义方案

> ID：12733283
> 
> 赞同：0
> 
> 时间：2012-10-04T18:14:34.483
> 
> 标签：objective-c, ios, url, mfmailcomposer

我正在尝试通过 MFMailComposeViewController 发送自定义 url 方案，以便收件人可以点击嵌入式链接并在他的 iphone 上打开我的应用程序。到目前为止，收件人收到了一封电子邮件，但当他点击 LINK 时没有任何反应。这是代码：

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self; // &lt;- very important step if you want feedbacks on what the user did with your email sheet
[picker setSubject:@"Incoming task"];
// Fill out the email body text
NSString * types = @"";
for(NSString *type in task.location_types){
    types = [types stringByAppendingFormat:@"%@|",type];
}
if(types.length > 1){
    types = [types substringToIndex:types.length - 1];
}
NSString *desc = [task.description stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *link = [NSString stringWithFormat:@"helpy://?taskid=%d&desc=%@&types=%@\"",task.TaskId,desc,types];
NSString *emailBody = [NSString stringWithFormat:@"<a href=\"#\" onclick=\"doSomething();\">TAP HERE</a><script type=\"text/javascript\" charset=\"utf-8\">function doSomething() { window.location = \"%@\;return false;}</script>",link];

[picker setMessageBody:emailBody isHTML:YES]; 

picker.navigationBar.barStyle = UIBarStyleBlack;

[controller presentModalViewController:picker animated:YES];
[picker release]; 
```

helpy://?taskid=..... 是我自定义注册的 URL 方案，如果我从浏览器的地址栏中键入它，它会在 iPhone 上打开我的应用程序。出于某种原因，当这个链接嵌入到电子邮件中时，点击它不会做任何事情。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:21:37.797

我非常怀疑 Mail 是否会在 iOS 上执行 JavaScript（即使在桌面上我也非常怀疑，但还没有尝试过）。只需将 URL 设置为`href`超链接的属性，一切都会正常工作。你为什么要使用 JavaScript 来做这件事？我只是好奇 ;-）

```
NSString *link = [NSString stringWithFormat:@"helpy://?taskid=%d&desc=%@&types=%@\"",task.TaskId,desc,types];
NSString *emailBody = [NSString stringWithFormat:@"<a href=\"%@\">TAP HERE</a>", link]; 
```

# cordova - 验证失败：标题不能为空，（我的标题不为空） build.phonegap.com

> ID：12733284
> 
> 赞同：0
> 
> 时间：2012-10-04T18:14:38.963
> 
> 标签：cordova

我试图在 build.phonegap.com 上构建 2 个不同的应用程序（两个示例应用程序）

两次我都验证失败：标题不能为空

第一个应用程序是使用 cordova_android 创建函数创建的

我直接从他们的样本中克隆的第二个应用程序

（克隆的） [https://github.com/tholum/phonegap-start](https://github.com/tholum/phonegap-start)

（我的） [https://github.com/tholum/DemoPhonegapApp](https://github.com/tholum/DemoPhonegapApp)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:43:16.717

我看到的唯一错误是这一行：

`<script type="text/javascript" src="cordova-2.0.0.js"></script>`

据我所知，在使用 build.phonegap 时，您只需执行以下操作：

`<script type="text/javascript" src="cordova.js"></script>`

它将自动使用最新的cordova项目（目前为2.1.0）

在您的副本中，它指向 phonegap.js 而不是 cordova.js

# php - 使用 PHP 替换平面文件数据库中的一行

> ID：12733292
> 
> 赞同：4
> 
> 时间：2012-10-04T18:15:04.413
> 
> 标签：php, replace, flat-file

关于这个类似的主题有很多不同的主题，但我还不能完全理解我的问题的解决方案。

我想做的很简单，我有一个平面文件数据库，数据存储如下 -

```
$username:$worldLocation:$resources 
```

问题是我想要一个提交数据 html 页面，该页面将根据使用 php 搜索术语来更新这一行

```
search db for - $worldLocation

if $worldLocation found

replace entire line with $username:$worldLocation:$updatedResources 
```

我知道应该有一个相当简单的方法来完成这项工作，但我目前无法弄清楚，我会继续尝试，因为这篇文章已经发布，但如果你知道我可以使用的方法，我将非常感谢你的帮助.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:48:35.943

我一直很喜欢 c，以及从 c 进入 php 的函数。

签出[`fscanf`](http://php.net/fscanf)和[`fprintf`](http://php.net/fprintf)。

这些将使您在阅读某种格式的作品时生活更轻松。比如说：

```
$filehandle = fopen("file.txt", "c");
while($values = fscanf($filehandle, "%s\t%s\t%s\n")){
    list($a, $b, $c) = $values;
    // do something with a,b,c
} 
```

此外，没有性能解决方法来避免`reading the entire file into memory -> changing one line -> writing the entire file`. 你必须这样做。

这是尽可能高效的。因为您很可能使用本机 c 代码，因为我读过一些在这些情况下 php 只是包装 c 函数的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:30:41.817

1.  你喜欢艰难的方式，就这样吧......
2.  使每条线的长度相同。添加空格、制表符、大写 X 等以填补空白
3.  当你想替换线时，找到它，因为每条线的长度都是固定的，你可以替换它。
4.  为了提高速度和减少麻烦，请使用数据库（甚至 SQLLite）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:12:21.037

如果您致力于平面文件，最简单的事情是遍历每一行，编写一个新文件并更改匹配的文件。

是的，这很糟糕。

我强烈建议切换到“适当的”数据库。如果您担心资源或运行服务器的复杂性，可以查看 SQLite 或 Berkeley DB。这两者都使用“只是一个文件”的数据库，消除了安装和维护数据库服务器的问题，但您仍然能够快速轻松地搜索、替换和删除单个记录。如果出于其他原因您仍然需要平面文件，您可以轻松编写一些导入/导出例程。

如果您想发挥创造力，另一种有趣的可能性是将您的*文件系统*视为数据库。给每个用户一个目录。在每个目录中，都有一个位置文件。在每个文件中，更新资源。这意味着，要插入一行，您只需写入一个新文件。要更新文件，只需重写一个文件。删除用户只是对目录进行核对。当然，将整个内容放入内存中会产生更多开销。

解决问题的其他方法可能是使您的平面文件只写，因为附加到文件末尾是一个微不足道的操作。然后，您创建第二个文件，其中列出了在读取平面文件时应忽略的“死”行号。同样，您可以轻松地“X”出现有行（这再次比尝试更新文件中长度可能不同的行要容易得多）并将新数据附加到末尾。

后两个想法并不是真正的实际解决方案，而是向您展示解决问题的方法总是不止一种。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T05:02:07.707

好的....经过几个小时的工作......这个例子对我来说很好......我打算编写一个编辑工具......并将它用于密码更新......它成功了！此页面不仅使用新密码向用户发送和发送电子邮件（抱歉...为避免发布附加代码而对地址进行了编码）...而且它还为该用户编辑条目并在新文件中重写所有文件信息...完成后，它显然会交换文件名，将旧文件存储为 usuarios_old.txt。

在这里获取代码（抱歉，stackoverflow 对代码发布非常挑剔）

[https://www.iot-argentina.xyz/edit_flat_databse.txt](https://www.iot-argentina.xyz/edit_flat_databse.txt)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-04T18:25:58.480

那是你的位置：

```
update `field` from `table` set `field to replace` = '$username:$worldlocation:$updatesResources' where `field` = '$worldLocation'; 
```

# java - 并行运行两个昂贵的数据库调用

> ID：12733297
> 
> 赞同：1
> 
> 时间：2012-10-04T18:15:24.883
> 
> 标签：java, multithreading, performance, swing

我有（比如说）2 个函数，它们执行 db-hit 来获取大量数据。由于这两个函数一个接一个地执行（由同一个线程），所用时间为 T(f(1)) + T(f(2))。如何并行执行这两个函数（通过创建 2 个线程），以便总时间为： T(max(T(f1), T(f2))

我已经完成了完整的 java swing 应用程序的编写，现在想优化它的性能。欣赏任何见解，如果问题太天真，请原谅。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:54:22.327

您还没有说您是否需要函数的任何返回值，但考虑到它们访问数据库的事实，这似乎很有可能。一个非常好的和简单的解决方案是使用 Executors 和 Futures。

完整的代码示例在这里：

```
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

public class FuturesExample {

  public interface ReturnTypeOne {}
  public interface ReturnTypeTwo {}

  public void runTwo() {
    ExecutorService executor = Executors.newFixedThreadPool(2);

    // Dispatch two tasks.
    Future<ReturnTypeOne> first = executor.submit(new Callable<ReturnTypeOne>() {
      @Override
      public ReturnTypeOne call() throws Exception {
        // Work, work, work...
        return null;
      }
    });
    Future<ReturnTypeTwo> second = executor.submit(new Callable<ReturnTypeTwo>() {
      @Override
      public ReturnTypeTwo call() throws Exception {
        // Work, work, work...
        return null;
      }
    });

    // Get the results.
    try {
      ReturnTypeOne firstValue = first.get();
      ReturnTypeTwo secondValue = second.get();
      // Combine the results.
    } catch (InterruptedException e) {
      e.printStackTrace();
    } catch (ExecutionException e) {
      e.printStackTrace();
    }
  }
} 
```

它由两个部分组成。首先其中两个任务被提交到线程池中。每个 ExecutorService.submit() 调用立即返回任务计算的**未来值**。任务在 submit() 调用时立即分派，并在后台运行。当然，您可以分派两个以上的任务。

在第二部分中，获得了期货的价值。发生的情况是对 Future.get() 的调用会阻塞当前线程，直到计算出该值。这并不意味着任何任务被阻塞，它们都在运行，线程只是等待给定任务完成并返回一个值。一旦返回第一个值，就会进行第二次 Future.get() 调用。在这种情况下，它可能会或可能不会阻塞。如果第二个任务已经完成（可能在第一个任务之前），则立即返回该值。如果第二个任务仍在运行，则调用会阻塞当前线程，直到计算出该值。

以上归结为您的主线程只会等待最长运行的任务。正是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:25:16.827

您可以像这样调度 2 个线程：

```
new Thread(new Runnable()
{
    @Override
    public void run()
    {
        // TODO Place your "f(1)" code here...

    }
}).start();

new Thread(new Runnable()
{
    @Override
    public void run()
    {
        // TODO Place your "f(2)" code here...

    }
}).start(); 
```

# php - 致命错误：不在对象上下文错误中使用 $this

> ID：12733300
> 
> 赞同：-1
> 
> 时间：2012-10-04T18:15:30.747
> 
> 标签：php, mime

我收到致命错误：在运行以下代码时不在对象上下文中使用 $this。我正在编写一个脚本来将我的电子邮件转发到另一个帐户。请帮我。我是php的新手。错误指出了这`if (is_resource($this->connection))`条线。但据我所知，那里一切都很好。

```
$hostname = '{imap.xyz.com:993/imap/ssl}INBOX';
$username = 'aaaaa@xyz.com';
$password = 'xxxxxxxxx';

$connection = imap_open($hostname,$username,$password) or die('Cannot connect to Tiriyo: ' . imap_last_error());

function Message_Parse($id)
{
    if (is_resource($this->connection))
    {
        $result = array
        (
            'text' => null,
            'html' => null,
            'attachments' => array(),
        );
    $structure = imap_fetchstructure($this->connection, $id, FT_UID);

    if (array_key_exists('parts', $structure))
    {
        foreach ($structure->parts as $key => $part)
        {
            if (($part->type >= 2) || (($part->ifdisposition == 1) && ($part->disposition == 'ATTACHMENT')))
            {
                $filename = null;

                if ($part->ifparameters == 1)
                {
                    $total_parameters = count($part->parameters);

                    for ($i = 0; $i < $total_parameters; $i++)
                    {
                        if (($part->parameters[$i]->attribute == 'NAME') || ($part->parameters[$i]->attribute == 'FILENAME'))
                        {
                            $filename = $part->parameters[$i]->value;

                            break;
                        }
                    }

                    if (is_null($filename))
                    {
                        if ($part->ifdparameters == 1)
                        {
                            $total_dparameters = count($part->dparameters);

                            for ($i = 0; $i < $total_dparameters; $i++)
                            {
                                if (($part->dparameters[$i]->attribute == 'NAME') || ($part->dparameters[$i]->attribute == 'FILENAME'))
                                {
                                    $filename = $part->dparameters[$i]->value;

                                    break;
                                }
                            }
                        }
                    }
                }

                $result['attachments'][] = array
                (
                    'filename' => $filename,
                    'content' => str_replace(array("\r", "\n"), '', trim(imap_fetchbody($this->connection, $id, ($key + 1), FT_UID))),
                );
            }

            else
            {
                if ($part->subtype == 'PLAIN')
                {
                    $result['text'] = imap_fetchbody($this->connection, $id, ($key + 1), FT_UID);
                }

                else if ($part->subtype == 'HTML')
                {
                    $result['html'] = imap_fetchbody($this->connection, $id, ($key + 1), FT_UID);
                }

                else
                {
                    foreach ($part->parts as $alternative_key => $alternative_part)
                    {
                        if ($alternative_part->subtype == 'PLAIN')
                        {
                            echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                            $result['text'] = imap_fetchbody($this->connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                        }

                        else if ($alternative_part->subtype == 'HTML')
                        {
                            echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                            $result['html'] = imap_fetchbody($this->connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                        }
                    }
                }
            }
        }
    }

    else
    {
        $result['text'] = imap_body($this->connection, $id, FT_UID);
    }

    $result['text'] = imap_qprint($result['text']);
    $result['html'] = imap_qprint(imap_8bit($result['html']));

    return $result;
        }

return false;
}
$to      = 'aaaa@gmail.com';
$subject = 'the subject';
$message = 'test';

$id=1;
Message_Parse($id);
$headers = 'From: aaa@xyz.com' . "\r\n" .
    'Reply-To: aaa@xyz.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
$mail = mail($to, $subject, $result, $headers);
if($mail){
echo "YES";
} else{
echo "NO";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:18:12.770

`$this`仅存在于属于类的方法中。`$this`不存在于函数或不属于类的任何其他地方。[查看有关基本 OOP](http://www.php.net/manual/en/language.oop5.basic.php)的 PHP 手册页以了解更多信息。

如果您想引用全局变量`$connection`，可以通过将函数的开头更改为：

```
function Message_Parse($id)
{
    global $connection;
    if (is_resource($connection))
    { 
```

请注意，尽管在任何语言中使用全局变量都是不好的编程习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:18:18.183

只需更改`$this->connection`为`$connection`. `$this`仅在您上课时适用。此外，您可能需要`global $connection;`在函数顶部调用。我相信任何未传递给参数的变量都需要调用这个关键字。

有关“全局关键字”的信息，请参见：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:29:32.287

正如所有其他人所说，你不在一个对象内，所以你不能使用 $this。

但是你在一个函数内部，所以你也不能访问这个函数之外的任何变量，除非你让它可以访问。

使用的解决方案有效，但如果你有一天决定应该重命名`global`你的全局变量，它会让你下地狱。`$connection`

更好的解决方案是将其作为第二个参数传递给您的函数。

`function Message_Parse($id)`应该成为`function Message_Parse($id, $connection)`

`if (is_resource($this->connection))`应该成为`if (is_resource($connection))`

`$id=1; Message_Parse($id);`应该成为`$id=1; Message_Parse($id, $connection);`

完毕。

# javascript - 如何将几个匿名 jquery 函数转换为一个命名函数？

> ID：12733307
> 
> 赞同：0
> 
> 时间：2012-10-04T18:15:49.507
> 
> 标签：javascript, jquery

是否可以将以下四个匿名jquery函数转换为一个传递参数的函数？

这就是我所拥有的...

```
 dropZone.addEventListener("dragenter", this.dragEnter, false);
    dropZone.addEventListener("dragover", this.dragOver, false);
    dropZone.addEventListener("dragleave", this.dragLeave, false);
    dropZone.addEventListener("drop", this.dragDrop, false); 
```

...

```
this.dragOver = function(ev) {
    ev.stopPropagation();
    ev.preventDefault();
    this.className = "dragover";
}

this.dragLeave = function(ev) {
    ev.stopPropagation();
    ev.preventDefault();
    this.className = "dragleave";
}

this.dragEnter = function(ev) {
    ev.stopPropagation();
    ev.preventDefault();
    this.className = "dragenter";
}

this.dragDrop = function(ev) {
    ev.stopPropagation();
    ev.preventDefault();
    this.className = "dragdrop";
} 
```

我正在寻找功能类似于...的东西

```
 dropZone.addEventListener("dragenter", dropEvent(this,"dragenter"), false);
    dropZone.addEventListener("dragover",  dropEvent(this,"dragOver"), false);
    dropZone.addEventListener("dragleave", dropEvent(this,"dragLeave"), false);
    dropZone.addEventListener("drop",      dropEvent(this,"dragDrop"), false); 
```

...

```
function dragEvent(ev, label) {
    ev.stopPropagation();
    ev.preventDefault();
    this.className = label;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:20:46.737

您可以使用部分应用的函数来做到这一点：

```
function dragEvent(that, label) {
  return function(ev) {
    ev.stopPropagation();
    ev.preventDefault();
    that.className = label;
  }
} 
```

您可以在此处阅读有关 javascript 中的部分应用程序的更多信息：http: [//benalman.com/news/2012/09/partial-application-in-javascript/](http://benalman.com/news/2012/09/partial-application-in-javascript/)

# php - 立即显示表单输入

> ID：12733333
> 
> 赞同：1
> 
> 时间：2012-10-04T18:17:19.067
> 
> 标签：php, javascript, html, forms, input

我想知道您如何直接显示用户输入的表单输入。

例如，在这个网站上，当您提出问题时，您的文字直接显示在底部。或者像这个网站[http://demo.tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery/demo.php](http://demo.tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery/demo.php)当你添加一个注释时，你可以立即在左边看到你的粘性如何看。

我认为这是用 javascript 完成的，但我不知道如何

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:19:47.280

您可以使用 jQuery.keyup 事件[jsfiddle](http://jsfiddle.net/ngWQq/19/)

```
 $("textarea").keyup(function(){
   $('div div').html(this.value);

});
$("input").keyup(function(){
   $('div span').html(this.value);

}); 
```

HTML

```
 <textarea ></textarea>
<input />
<div >
    <div></div>
    <span></span>
</div> 
```

CSS：

```
div{

 position: relative;
    width: 150px;
    height:100px;
}
span{

 position:absolute;
    right:3px;
    bottom:3px;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:20:43.360

```
<input id="example_input" type="text"/>
<div id="content_receiver">

$("#example_input").bind("keyup change", function() { 
    $("#content_receiver").html($(this).val())
}) 
```

编辑以响应 saml 建议的更改事件之外的 keyup 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:40:52.830

通常，分配一个 JavaScript 函数来处理`keyup`表单输入的事件。该函数选择页面上的另一个元素并将`innerText`该元素的属性设置为表单输入的当前值（keyup 后）。

[“预览”的其余部分，例如http://demo.tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery/demo.php](http://demo.tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery/demo.php)上的便利贴颜色 ，或***文本格式***您在这里看到的 SO，是通过处理函数应用的内联样式或 CSS 或两者的组合来完成的。

我在你可以玩的小提琴中设置了一个简单的例子：http: [//jsfiddle.net/95nyp/1/](http://jsfiddle.net/95nyp/1/)模拟[http://demo.tutorialzine.com/2010/01/sticky-notes-ajax- php-jquery/demo.php](http://demo.tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery/demo.php)

Please keep in mind that the reason this is not an in-depth explanation is that there are **many** ways to accomplish this, and this answer is merely one of the more simple ways.

# xml - 使用 PL/SQL 创建 xls 文件而不通过 xml

> ID：12733336
> 
> 赞同：3
> 
> 时间：2012-10-04T18:17:24.273
> 
> 标签：xml, excel, plsql, oracle-apex, xls

我的系统是用APEX/Oracle 11g开发的，想直接创建xls文件，不用创建xml文件。系统当前创建了一个xml文件，然后可以保存为xls格式，但是非常挑剔的用户不喜欢尝试打开xml文件时的Windows 7警告（Excel警告文件格式不与其扩展名不匹配）。有什么方法可以在 APEX 中使用 Oracle PL/SQL 来完成此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:37:51.697

Morten Braten 整理了一个很棒的 PLSQL 资源页面：[http ://code.google.com/p/plsql-utils/](http://code.google.com/p/plsql-utils/)

具体来说，Anton Scheffer 分享了他的包 AS_XLSX，它将满足您的 APEX 需求： [http ://technology.amis.nl/2011/02/19/create-an-excel-file-with-plsql/](http://technology.amis.nl/2011/02/19/create-an-excel-file-with-plsql/)

在包头中使用很好的示例非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:09:49.627

您可以使用 Java 存储过程

[http://docs.oracle.com/cd/B28359_01/java.111/b31225/chfive.htm](http://docs.oracle.com/cd/B28359_01/java.111/b31225/chfive.htm)

和阿帕奇 Poi

[http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html)

创建实际的电子表格并将其存储在 lob 字段中，然后返回给用户

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:17:25.810

您可以使用 OraExcel 包生成真正的 xlsx 文件（二进制形式）。使用该软件包，您可以像在 Excel 中一样格式化单元格并应用样式。

它有一个简单的 API，您可以在其中逐步创建 Excel 文件并描述每个单元格的外观。

完成 Excel 文件后，可以选择将 xlsx 文件生成为 PL/SQL BLOB 变量，该变量可以返回到 APEX 并下载。

没有让您的客户感到烦恼的警告。

您可以编写一个简单的函数，如下所示，创建一个 Excel 电子表格并将其返回给 APEX：

```
CREATE OR REPLACE FUNCTION get_excel RETURN BLOB IS
   my_blob BLOB;
BEGIN

  ora_excel.new_document;
  ora_excel.add_sheet('My sheet');

  ora_excel.query_to_sheet('SELECT field1, field2, field2 FROM my_table');

  ora_excel.save_to_blob(my_blob);

  RETURN my_blob;

END; 
```

更多示例见：[http ://www.oraexcel.com/examples](http://www.oraexcel.com/examples)

干杯

# c# - 如何从抽象超类中引用子类的字段？

> ID：12733339
> 
> 赞同：4
> 
> 时间：2012-10-04T18:17:36.873
> 
> 标签：c#, inheritance, reflection

类似：[如何通过反射访问抽象父类中的实例字段？](https://stackoverflow.com/q/4361714/1026459)，但只是名义上，没有人实际使用或引用反射。

约束：

*   C＃*   必须使用抽象类来继承*   必须能够将字符串作为字段标识符传递（愿意协商）

    ```
    public class ViewModel : BaseClass
    {
     public Car Car { get; set; }
    }
    public abstract class BaseClass
    {
     public object GetField(string field){
      //return Car if .GetField("Car") is called
     }
    } 
    ```

    我认为这需要反思，但我无法完全理解它。如本例所示，如何访问 Car 字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:21:01.600

试试这个：

```
[TestFixture]
public class TravisSerialisationTest
{
    [Test]
    public void GetPropertyValueTest()
    {
        var volvo = "Volvo";
        var viewModel = new ViewModel() { Car = volvo };
        var field = viewModel.GetField(() => viewModel.Car);
        Assert.AreEqual(volvo,field);
    }
}

public class ViewModel : BaseClass
{
    public string Car { get; set; }
}

public abstract class BaseClass
{
    public T GetField<T>(Expression<Func<T>> propertyExpression )
    {
        return propertyExpression.Compile().Invoke();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:31:22.177

尝试这样的事情：

```
 public class ViewModel : BaseClass
    {
        public string Car { get; set; }
    }
    public abstract class BaseClass
    {
        public object GetField(string name)
        {
            MemberInfo member = GetType()
                .GetMember( name, BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static )
                .FirstOrDefault();
            if(member == null)
            {
                return null;
            }
            PropertyInfo property = member as PropertyInfo;
            if(property != null)
            {
                return property.GetValue( this, null );
            }
            FieldInfo field = member as FieldInfo;
            if(field != null)
            {
                return field.GetValue( this );
            }
            return null;
         }
    } 
```

# vxworks - 需要了解 cbioDevBytesRW 是如何初始化的

> ID：12733342
> 
> 赞同：1
> 
> 时间：2012-10-04T18:17:40.863
> 
> 标签：vxworks

我在使用 dosFsLib 的 MPC862 处理器上有一个 VxWorks 5.5.1 项目，并且让 bootsec 阵列间歇性地失败。在调查这个问题时，我调用了 cbioLib.c 中的 cbioBytesRW。到目前为止，一切都很好。

我的问题是在 cbioLib.c 中，函数 cbioBytesRW 调用 cbioDevBytesRW 函数指针来执行 bootsec 数组的读取，我找不到 cbioDevBytesRW 的初始化位置。

我使用了“ar”并查看了 target/lib/ppc/PPC860/common/libos.a 但也没有在库中看到它。

有人可以帮我理解 cbioBytesRW 是如何初始化的吗？

查尔斯·克林克

# search - 如何根据 ElasticSearch 中的项目数对搜索结果进行排序？

> ID：12733351
> 
> 赞同：2
> 
> 时间：2012-10-04T18:18:04.507
> 
> 标签：search, elasticsearch

假设我在 ElasticSearch 中存储这样的文档：

```
{
    'name':'user name', 
    'age':43, 
    'location':'CA, USA', 
    'bio':'into java, scala, python ..etc.', 
    'tags':['java','scala','python','django','lift']
} 
```

假设我使用 location=CA 进行搜索，如何根据“标签”中的项目数对结果进行排序？

我想在第一页列出标签数量最多的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:37:24.853

您可以对包含标签数量的附加字段进行索引，然后您可以轻松地对结果进行排序。否则，如果您愿意在查询时支付一点性能成本，那么有一个很好的解决方案不需要重新索引您的数据：您可以基于这样的脚本进行[排序：](http://www.elasticsearch.org/guide/reference/api/search/sort.html)

```
{
    "query" : {
        "match_all" : {}
    },
    "sort" : {
        "_script" : { 
            "script" : "doc['tags'].values.length",
            "type" : "number",
            "order" : "asc"
        }
    }
} 
```

正如您可以从基于脚本的排序部分中看到的那样：

> 请注意，对于基于单个自定义脚本的排序，建议使用 custom_score 查询，因为基于分数的排序更快。

这意味着最好使用[自定义分数查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html)来影响您的分数，然后按分数排序，如下所示：

```
{
    "query" : {
        "custom_score" : {
            "query" : {
                "match_all" : {}
            },
            "script" : "_score * doc['tags'].values.length"
        }
    }
} 
```

# database - 如何在 Spinner 中对数据进行排序

> ID：12733356
> 
> 赞同：0
> 
> 时间：2012-10-04T18:18:22.487
> 
> 标签：database, sorting, spinner

我有许多从数据库表中填充的微调器。我想控制数据在微调器中的排序方式，因为在一个示例中，我有以下形式的数据：

1,2,3,4,5,6,7,8,9,10,11,12 等

但这会由微调器排序，如下所示：

1,10,11,12,13,14,15,16,17,18,19,2,20,21 等

显然不对！

我的 Spinner 代码示例（不是上面的 Spinner）如下所示：

```
 Cursor componentCursor = rmDbHelper.fetchAllComponents();
    startManagingCursor(componentCursor);

    // create an array to specify which fields we want to display
    String[] from2 = new String[]{RMDbAdapter.COMPONENT_FORM_TEXT};
    //INSPECTOR_NAME = "inspector_name"
    // create an array of the display item we want to bind our data to
    int[] to2 = new int[]{android.R.id.text1};
    // create simple cursor adapter
    SimpleCursorAdapter componentSpinnerAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, componentCursor, from2, to2 );
    componentSpinnerAdapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    // get reference to our spinner
    componentSpinner.setAdapter(componentSpinnerAdapter);
    if (locationId > 0) { // Set spinner to match saved data in database

        int spinnerPosition = 0; 

        for (int i = 0; i < componentSpinner.getCount(); i++)  
        { 
             Cursor cur = (Cursor)(componentSpinner.getItemAtPosition(i)); 

             //--When your bind you data to the spinner to begin with, whatever columns you 
             //--used you will need to reference it in the cursors getString() method... 

             //--Since "getString()" returns the value of the requested column as a String--  
             //--(In my case) the 4th column of my spinner contained all of my text values  
             //--hence why I set the index of "getString()" method to "getString(3)" 

             String componentSpinnerString = cur.getString(2).toString(); 

             if(componentSpinnerString.equals(componentSpinnerData.toString())) 
             { 
                //--get the spinner position-- 
                spinnerPosition = i; 
                break; 
              } 
         }       
        componentSpinner.setSelection(spinnerPosition); 
    }

    else { // Set spinner to default

        int spinnerPosition = 0; 

        for (int i = 0; i < componentSpinner.getCount(); i++)  
        { 
            Cursor cur = (Cursor)(componentSpinner.getItemAtPosition(i));

            String componentSpinnerString = cur.getString(2).toString();

            if(componentSpinnerString.equals("Upright (front)"))
            { 
                //--get the spinner position-- 
                spinnerPosition = i; 
                break; 
            } 
         }       
        componentSpinner.setSelection(spinnerPosition);

    } 
```

下面的数据库代码（根据 gotuskar 的要求）：

```
public Cursor fetchAllComponents() {
    return rmDb.query(COMPONENT_TABLE, new String[] {
            COMPONENT_ID, RACKING_SYSTEM, COMPONENT_FORM_TEXT, TEXT_BOXES_DATA},
            null, null, null, null, null);
} 
```

# vim - 使用列表的内容添加行

> ID：12733357
> 
> 赞同：1
> 
> 时间：2012-10-04T18:18:26.963
> 
> 标签：vim

如果我有一个句子——“我认识一个名叫 Ted 的人喜欢 //^$”——或者基本上是一个包含很多字符的句子，我不想转义，我想插入该句子的不同名称的副本（例如约翰玛丽鲍勃）...

for 循环可以通过复制句子，将其粘贴到下一行，然后替换名称来做到这一点吗？我如何告诉它粘贴在哪里？

我也可以先粘贴名称列表，然后将句子放在名称周围 - 例如`:s/^/I know a person named /`，但我发现如果有很多文本需要转义很多字符，我可能会在某处出错并浪费有时间仔细检查表达式。

那么，有没有更简单的方法从句子中获取内容并将其放入替代命令中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:23:18.130

您可以使用 vim 中的宏来执行此操作。在这里查看 vim 宏的解释：http: [//vim.wikia.com/wiki/Macros](http://vim.wikia.com/wiki/Macros)。这比使用正则表达式要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:38:34.733

就像 Chiel92 建议的那样，宏是最简单的方法。假设您有一个如下所示的文本文件：

```
I know a person named XXX who like //^$

John
Mary
Bob 
```

我个人会：

1.  转到第 1 行，并将该行复制到命名缓冲区中：`:1<enter>"iyy`
2.  转到第 3 行并记录一个宏，该宏复制该行上的名称，粘贴`i`缓冲区的内容，然后将 XXX 替换为该行上的名称：
    1.  转到第 3 行：`:3<enter>`
    2.  开始录制宏来注册m：`qm`
    3.  将名称删除到不同的寄存器中：`"od$`
    4.  粘贴到模板中：`"ipkdd`
    5.  将 XXX 替换为名称：`:s/XXX/^Ro/`
    6.  转到下一行：`j`
    7.  完成录制：`q`

对于每个名称行，您现在可以重播宏：`@m`或`@@`

注意：在制作宏并遇到重放问题时，我总是发现查看我的录制注册表的内容很有帮助。您可以`^R^Rm`查看您记录的所有命令。

# android - 显示教程

> ID：12733361
> 
> 赞同：3
> 
> 时间：2012-10-04T18:18:44.173
> 
> 标签：android, android-layout, android-view

我正在做一个带有一些布局的应用程序，当应用程序启动时，我想显示一个谷歌使用的那种教程。

我在互联网上没有找到任何有关此的信息，只有基本教程。我真的很想显示用户在浏览应用程序时必须使用的手势。

有没有办法显示这样的教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T08:38:56.663

这是一个显示与 Google 相同的蓝色圆圈的库：

[展示视图库](https://github.com/amlcurran/ShowcaseView)

然后我只是在视图上添加了手势图标，来自这个免费的图标集：

[触摸手势图标](http://www.mobiletuxedo.com/touch-gesture-icons/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:26:11.537

您要做的第一件事是将教程的显示状态存储在像[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)这样的持久存储中。

除此之外，您可以使用 Animations 和 ImageViews 来显示您希望用户了解的操作。

[您可能会从我关于此处](https://stackoverflow.com/a/10978362/1069068)帮助叠加的另一个答案中获得一些关于在屏幕上定位动画的想法。

简而言之，您可以动态获取元素在屏幕上的位置，并相应地定位帮助信息。这使得它也可以在不同的屏幕尺寸上正常工作。

# c# - 由于缺乏权限而无法访问参考？

> ID：12733362
> 
> 赞同：2
> 
> 时间：2012-10-04T18:18:44.583
> 
> 标签：c#, .net, winforms, filenotfoundexception

我创建了一个访问另一个程序中的标签的申请表。我使用**dll**访问标签 IOM.InTouchDataAccess。我运行程序，它一直工作，直到我写一个标签并按下选择。错误：**无法加载文件或程序集“IOM.InTouchDataAccess，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。**我还是一个新手程序员。该程序在 Program.cs 中停止 `Application.Run(new InTouchTagBrowser());`

**表格代码**

```
public partial class InTouchTagBrowser : Form
    {
        public string tagName;

        public InTouchTagBrowser()
        {
            InitializeComponent();
        }

        private void TagBrowser_Load(object sender, EventArgs e)
        {
        }

        private void SelectButton_Click(object sender, EventArgs e)
        {
            try
            {
                tagName = tagNameBox.Text;
                InTouchDdeWrapper inTouchWrapper = new InTouchDdeWrapper();
                string value = inTouchWrapper.Read(tagName);

                TagDotField tagDotField = new TagDotField(tagName);
                string description = inTouchWrapper.Read(tagDotField.Description);
                string engUnits = inTouchWrapper.Read(tagDotField.EngUnits);

                descriptionlbl.Text = description;
                englbl.Text = engUnits;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void WriteButton_Click(object sender, EventArgs e)
        {
            try
            {
                if (tagName != "")
                {
                    MessageBox.Show("Please enter a tag!");
                }
                else
                {
                    string inputValue = ValueBox.Text;
                    InTouchDdeWrapper inTouchWrapperWriter = new InTouchDdeWrapper();

                    TagDotField tagWriter = new TagDotField(inputValue);
                    inTouchWrapperWriter.Write(tagName, inputValue);
                }
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                MessageBox.Show("Tag change successfull");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:24:32.437

你没有提供太多信息。如果我是你，以下是我应该尝试的事情清单：

1.  检查文件是否在硬盘中。（检查 \debug 文件夹）
2.  如果文件存在，请仔细检查其版本是否为 1.0.0.0
3.  检查 CopyLocal 是否为真。
4.  检查 dll **IOM.InTouchDataAccess**是否不需要其他 dll。如果它是您安装的库的一部分，请确保所有 dll 都在那里。如果不确定，请使用 .NET Reflector 检查其依赖项。

# html - 如何使图像从屏幕的一侧滑到另一侧的固定位置？

> ID：12733363
> 
> 赞同：0
> 
> 时间：2012-10-04T18:18:49.977
> 
> 标签：html, css

我的页面上现在有两个浮动图像，代码如下所示：

```
<html>
<head>
<style type="text/css">

#img1{
  position: fixed;
  left: 10px;
  top: 10px;
  z-index: 10;
}

#img2{
  position: fixed;
  right: 10px;
  bottom: 100px;
  z-index: 10;
}

</style>
</head>

<body>
  <img src="IMAGE1.png" id="img1">
  <img src="IMAGE2.png" id="img2">
</body>
</html> 
```

但是，我希望 img2 从左侧滑入它的位置，然后留在那里，而 img1 在 img2 完成移动后立即出现。它需要在网页打开时自动发生。

我已经尝试了我所知道的，但我仍然是一个初学者，所以任何帮助将不胜感激。谢谢！

PS 如果图像可以留在那里，而有人点击每个页面（这是一个 tumblr 博客），而不是每次都重置，那将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:23:29.577

据我所知，有两种方法：Javascript 和 CSS3。

对于 JS，我建议使用一个库，比如 jQuery，它已经有一个`animate`派上用场的方法：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

**（小编辑）**如果您希望在页面加载后发生动画，请查看`.ready`方法：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

使用 CSS3，您可以使用过渡，在这里阅读更多内容：http: [//www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

# jquery - Jquery 从动态表中挑选元素

> ID：12733366
> 
> 赞同：0
> 
> 时间：2012-10-04T18:19:00.550
> 
> 标签：jquery, html-table, underscore.js

我有一个表格模板，该模板由服务器以 JSON 格式发送的数据填充。模板代码如下：

```
<table id="mangeDataTable" class="tablesorter">

            <thead>
                <tr>
                    <th >S.No</th>
                    <th >Manga</th>
                    <th >Status</th>
                    <th > Edit</th>
                    <th> Delete</th>

             </tr>
            </thead>
            <tbody>
            <% for (var i = 0; i < mangaData.length; i++) { %> <% var item =mangaData[i]; %>
            <% var count=i%>

                <tr>
                <td><%= ++count%></td>
                <td><%= item.text%></td>
                <td><%= item.status%></td>
                <input id="mangaName" type="hidden" name="text" value="<%= item.text%>"/>
                <td><a href="#edit-box"  class="edit-window" title="<%= item.text%>" >Edit</a></td>
                <td><a href="#delete-box"  class="delete-window" title="<%= item.text%>" >Delete</a></td>

            </tr>
             <% } %>
             </tbody>
        </table> 
```

使用上面的模板，我可以创建一个如下图所示的表格： ![漫画数据表](../Images/8c3d142d56e7a57543d4bee4abb57ebe.png)

**问题在于编辑和删除功能**。我希望在单击编辑/删除时选择行的数据（漫画名称、状态）。到目前为止，我一直在将名称设置为锚标签的标题属性，并通过 jquery att() 将其提取出来。

```
var mangaName=$(this).attr("title"); 
```

但这不是做事的方式。这只是我选择的一个临时解决方案。关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:34:15.283

由于您已经在使用 jQuery，我建议您使用 datatables 插件来显示和编辑您的数据。它相对容易设置和使用。

主页：[http ://datatables.net/examples/](http://datatables.net/examples/)

在此处提供与您的描述匹配的示例：http: [//editor.datatables.net/release/DataTables/extras/Editor/examples/inlineControls.html](http://editor.datatables.net/release/DataTables/extras/Editor/examples/inlineControls.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:06:47.997

瑞凯诗，

jQuery`.closest()`是你最好的朋友。

```
$('#mangeDataTable').on('click', '.edit-window', function(){
    var row = $(this).closest('tr');
    var mangaName = row.find('td').eq(1).text();
    //then do whatever is necessary to edit
}).on('click', '.delete-window', function(){
    var row = $(this).closest('tr');
    var mangaName = row.find('td').eq(1).text();
    //then do whatever is necessary to delete
}); 
```

浮动`<input>`在 a`<tr>`中但不在 a`<td>`中可能不是一个好主意。不确定浏览器将如何处理这个问题，我猜这个元素至少在某些浏览器中是不可寻址的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:04:11.460

我将标题放在数据属性中`<tr>`，然后[`closest`](http://api.jquery.com/closest/)找到它。您的 HTML 模板将如下所示：

```
<tr data-title="<%= item.text %>">
    <!--...-->
</tr> 
```

然后您的编辑和删除处理程序可以找到这样的标题：

```
var title = $(this).closest('tr').data('title');
// Or even $(this).closest('[data-title]').data('title') for more future-proofing 
```

然后，您可以`title`将编辑和删除链接上的属性用于其预期目的（即为用户提供有关链接功能的一些额外信息）：

```
<td>
    <a ... title="Edit <%= item.text%>">Edit</a>
</td>
<td>
    <a ... title="Delete <%= item.text%>" >Delete</a>
</td> 
```

# websub - java中是否有PubSubHubbub服务器实现？

> ID：12733374
> 
> 赞同：-1
> 
> 时间：2012-10-04T18:19:33.570
> 
> 标签：websub

java中是否有PubSubHubbub Server而不是发布者实现？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-04T18:41:19.577

看看[这个](https://github.com/berb/java-sub-pubsubhubbub)。用 Java 为 PubSubHubBub 0.3 协议编写的直接订阅者实现。

用法：

```
Subscriber subscriber = new SubscriberImpl("subscriber-host",8888);
Subscription subscription = subscriber.subscribe(URI.create("http://feed-host/my-push-enabled-feed.xml"));

subscription.setNotificationCallback(new NotificationCallback()
{

    @Override
    public void handle(SyndFeed feed)
    {
        //TODO: Do something with the feed
    }
} ); 
```

# android - Android AVD 无法连接到互联网

> ID：12733375
> 
> 赞同：1
> 
> 时间：2012-10-04T18:19:36.390
> 
> 标签：android, android-emulator, avd

我的安卓模拟器无法连接到互联网。连接在几个月前可以正常工作。它既不适用于我应该下载 RSS 提要的应用程序，也不适用于互联网浏览器。我正在使用 3G USB 连接。

www.google.com 上的网页可能会暂时关闭，或者可能会永久移动到新的网址。

请注意，我检查了： - 包括 GSM 调制解调器支持 - 我向我的应用程序授予了 INTERNET 授权 - 我没有使用任何代理连接到互联网 - 屏幕顶部显示的 3G 图标 - 我激活了数据漫游

这些都没有帮助解决问题。

最近我添加到我的计算机的网络接口。有线连接和 VirtualBox 网卡。

你能帮我找到解决办法吗？我怀疑我的 AVD 连接到了不提供 Internet 连接的错误接口。

在哪里可以找到有助于跟踪此问题的任何跟踪/日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:27:00.720

在 Windows 机器中打开命令提示符会话

发出以下命令以连接到模拟器：

> adb -e 外壳

在模拟器外壳发出命令：

> ifconfig eth0

如果它正在运行，您将获得模拟器的 IP 地址和信息。

您还可以使用以下命令：

> ping ip地址

检查与特定 IP 地址的连接。

根据上述命令的结果，当您在 linux shell 中时，您可能会查找有关网络命令检查和验证连接性的一般 linux 帮助。

祝你好运。

# jquery - IFrame中的JQuery Post不起作用

> ID：12733379
> 
> 赞同：1
> 
> 时间：2012-10-04T18:20:01.137
> 
> 标签：jquery, iframe

我正在尝试根据从 IFrame 发送到另一个处理器文件的 $.post 请求的结果显示一条消息。

```
//begin script
function sendForm() {
$.post("http://www.website.com/main/post.php",$("#testForm").serialize(),function(data,status){
$("#result").html(data)
});
return false
}

$(document).ready(function() {
$("#testForm").submit(sendForm);
});

//end script

//form in an IFrame
//the IFrame is in a url like http://website.com/main/module/footer.php
<form id="testForm" method="post">
<label for="email">Enter your email</label>
<input id="email" name="email" type="text" required="yes" validate="email" message="Please enter a valid email address" class="replaceText" value="Enter your email"/>
<input id="subscribe" type="image" src="signup.png"/>
</form>

//this is where output from $.post request should be displayed
<div id="result"></div>
//end 
```

我已尝试执行以下操作，它工作正常，显示来自 $.post 的消息，

```
//scripts were disabled/commented out
//form in an IFrame
<form id="testForm" action="http://www.website.com/main/post.php" method="post">
<label for="email">Enter your email</label>
<input id="email" name="email" type="text" required="yes" validate="email" message="Please enter a valid email address" class="replaceText" value="Enter your email"/>
<input id="subscribe" type="image" src="signup.png"/>
</form>

<h5><div id="result"></div></h5> 
```

但是，由于表单位于 IFrame 中，因此它会加载显示脚本消息的整个 IFrame。我只需要在不破坏整个 IFrame 的情况下显示消息。

注意：我需要保留 IFrame 并且不能更改文件 post.php。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:41:55.533

`name`最简单的方法是在主页上给你的 iframe 一个，而不是

```
$("#result").html(data) 
```

说

```
$('#result', frames['myFrameName'].document).html(data) 
```

# javascript - 使用 jquery 的图形栏演示

> ID：12733380
> 
> 赞同：-6
> 
> 时间：2012-10-04T18:20:08.820
> 
> 标签：javascript, jquery

您能否提供参考以实现网格数据值的图形表示...如果更新了网格数据，则需要更新图形....使用 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:39:59.470

我不确定这是否是您的意思，但是您看过 D3 吗？

[https://github.com/mbostock/d3/wiki/Gallery](https://github.com/mbostock/d3/wiki/Gallery)

它是一个很棒的图形表示库（在 svg 或画布上），它很容易响应数据更新并与 jquery 配合得很好。

# mysql - MYSQL存储过程根据连接用户的成员资格选择不同的列数据

> ID：12733384
> 
> 赞同：1
> 
> 时间：2012-10-04T18:20:27.217
> 
> 标签：mysql, stored-procedures

我正在尝试创建一个存储过程来返回一个 ID 列表和一个计算机名称，每个 ID 和一个计算机名称会根据连接用户的公司成员身份和该公司所在的区域而有所不同，格式如下：

```
ID | ComputerName
================= 
```

....但我真的无处可去，如果有任何帮助，我将不胜感激！

我需要 ComputerName 的值是 NameCompany、NameRegion、NamePublic 之一，具体取决于登录用户是哪个公司/地区的成员：

计算机名称表：

```
ComputerID | CompnayID | NameCompany | NameRegion  | NamePublic
================================================================
1          | 1         | AlicesPC    | MarketingPC | GeneralPC
2          | 1         | BobsPC      | FinancePC   | SpecialPC
3          | 2         | AndysPC     | AdminPC     | ProtectedPC
4          | 3         | JanesPC     | ReceptionPC | GeneralPC 
```

用户表：

```
UserID | UserName | MemberofCompanyID
=====================================
 1     | Jim      | 1
 2     | Sally    | 2
 3     | Ann      | 3 
```

公司表：

```
CompanyID | CompanyName | MemberOfRegionID
==========================================
1         | Acme        | North
2         | Sprockets   | North
3         | Arkwrights  | South 
```

区域表：

```
RegionID | RegionName
=====================
1        | North
2        | South 
```

## 这样：

从“StoredProcedure”中选择 (ID,ComputerName) 以获取 Jim 返回：

```
ID | ComputerName
=================
1  | AlicesPC
2  | BobsPC
3  | AdminPC
4  | GeneralPC 
```

从 Sally 返回的“StoredProcedure”中选择 (ID,ComputerName)：

```
ID | ComputerName
=================
1  | MarketingPC
2  | FinancePC
3  | AndysPC
4  | GeneralPC 
```

从“StoredProcedure”中选择 (ID,ComputerName) 以获取 Ann 返回：

```
ID | ComputerName
=================
1  | GeneralPC
2  | SpecialPC
3  | ProtectedPC
4  | JanesPC 
```

我还尝试添加一个“OverrideName”表，可以修改给定用户的内容：

覆盖名称表：

```
OverrideID | UserID | ComputerID | OverrideName
======================================================
1          | 3      | 2          | Special-PC-TopFloor 
```

因此，从“StoredProcedure”中为 Ann 选择 (ID,ComputerName)：

```
ID | ComputerName
=================
1  | GeneralPC
2  | Special-PC-TopFloor
3  | ProtectedPC
4  | JanesPC 
```

到目前为止，我的想法是建立一个结果集

身份证、姓名公众号

然后使用 NameRegion 覆盖它，其中用户 ID 在公司中，公司在区域中。

然后使用用户 ID 在公司中的 NameCompany 覆盖它。

最后用覆盖表中条目与用户名匹配的数据覆盖它。

任何帮助或建议表示赞赏！

谢谢，

本

# iphone - Xcode 4 - 重命名/删除文件，但得到“找不到文件”错误

> ID：12733386
> 
> 赞同：2
> 
> 时间：2012-10-04T18:20:33.703
> 
> 标签：iphone, xcode4, preprocessor, file-not-found, lexical

我刚刚使用 Xcode 的重构工具将核心数据类从 Player 重命名为 Person。在修复了由于使用 Xcode 在重命名中遗漏的点表示法导致的大约 100 个错误之后，我到了最后一个：

Player.m - 词法或预处理器问题 - 未找到“Person.h”

Player.m 不再存在于项目中，并在错误中显示为已删除（空图标）。显然，既然我摆脱了它，我就不希望它再存在了！

为了解决这个问题，我尝试重新添加 Player.h 和 Player.m 的旧副本，并进行清理。我检查了 Build Phases->Compile Sources 部分，Person.m 在那里，Player.m 不在。Person.h 实际上确实存在。

不确定这是否重要，但我正在使用 mogenerator 生成我的核心数据类。另外，这是我的第三个 xcdatamodel 版本。版本 1 和 2 使用 Player.h。

这是错误的屏幕截图： ![Player.m - 词法或预处理器问题 - 未找到“Person.h”](../Images/9db89b931a388dad7422028a3dce3a20.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:21:47.363

尝试*clean build*，如果不行，*重启 Xcode*，如果不行，*删除 DerivedData 目录*，甚至*重启*。

Xcode 有时会感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:59:29.513

您可以尝试通过按 Cmd+Alt+Shift+K 来进行超级干净（不确定真正的术语是什么）。这将执行清理并从构建文件夹中删除所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T07:03:45.827

好吧，我遇到了一个非常相似的问题并解决了它，删除了我的项目设置中缺少的编译源。要做到这一点，请按照以下步骤操作

1.  点击项目页面。此页面包含您应用的常规设置
2.  选择构建阶段。
3.  在 Build Phases 部分中，选择编译源。
4.  如果缺少某些类或文件或需要编译的东西。
5.  选择水印文件，然后单击本节底部的减号。

只需单击，项目即可运行。我希望这对其他人有帮助。

# php - 为我的 amazon s3 文件打乱 php 脚本生成的文件名？

> ID：12733390
> 
> 赞同：-1
> 
> 时间：2012-10-04T18:20:49.707
> 
> 标签：php, amazon-s3

大家好，我想知道是否有办法生成随机文本并替换我的文件名（当然链接仍然有效）？

我注意到人们喜欢让文件（主要是视频）有非常随机的字符作为文件名，而不是相关的文件名。它们是在每个用户查看页面时生成的吗？或者它真的是一个随机字符名称的文件？如果您有大量文件，我无法想象这会很有效。

我目前正在使用来自[http://css-tricks.com/snippets/php/generate-expiring-amazon-s3-link/的脚本](http://css-tricks.com/snippets/php/generate-expiring-amazon-s3-link/)

这允许我不公开共享我的文件，但用户不能直接访问该文件。我希望这是有道理的，让我知道你的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:37:14.997

到今天为止，您可能可以使用[S3 网站重定向](http://aws.typepad.com/aws/2012/10/amazon-s3-support-for-website-redirects.html)来完成此操作。

只需使用正确的 HTTP 标头集创建一个随机的新文件，然后将其重定向回真实文件。这使用 HTTP 301 重定向，因此在 Web 浏览器中加载它或使用 cURL 或 wget 请求它最终会解析真实位置。

# javascript - Chrome 在猜测 HTML 实体？

> ID：12733391
> 
> 赞同：0
> 
> 时间：2012-10-04T18:20:57.883
> 
> 标签：javascript, jquery, google-chrome, loops, html-entities

我有一个简单的函数，它模仿文本末尾的“省略号”效果作为跨浏览器解决方案。该函数从文本末尾删除 2 个字符，并查看是否仍有溢出。如果存在，则函数继续执行，如果不存在，则函数返回。我们可以在各处找到这些功能，而且非常简单。

我遇到了一个问题，*至少*在 Chrome 中（还没有打扰其他人），如果文本有一个 HTML 实体（在我的特定情况下是“&”），浏览器会“猜测”该实体，即使整个实体完整。

**例子**

这将是函数执行时文本的示例 console.log...

```
"hey mike &amp; u..."

"hey mike &amp;..."

"hey mike &am..."

"hey mike &amp;..."

"hey mike &am..."

"hey mike &amp;..." 
```

如您所见，一旦我们到达实体，无论它可能是什么，一旦文本被插入回 DOM，就会猜测实体。这显然会导致一个永无止境的循环。

有什么想法吗？

**编辑**

我已经通过在下面的代码中使用 text() 而不是 html()*解决*了这个问题，但它仍然没有回答为什么浏览器（或其他东西）猜测实体的问题......

```
while($this[0].scrollHeight>$this.outerHeight() && $this.html().length){
      // var text = $this.html() *old method, with error*
      var text = $this.text();
      $this.html(text.substr(0,text.length-5)+"...");
} 
```

# c# - 将属性从模型复制回对象——显式复制或迭代属性集合？

> ID：12733395
> 
> 赞同：2
> 
> 时间：2012-10-04T18:21:05.370
> 
> 标签：c#, asp.net-mvc

我正在获取一个对象并将其属性写入模型，然后在我的视图中显示模型以进行编辑。之后，用户点击提交并将模型发布回我的控制器。我现在想获取模型的属性并将它们写回对象。

我正在考虑使用反射来做到这一点，但我有点警惕。以为我会检查是否有更明显的答案。

代码：

```
//OrderDetailsModel
public OrderDetailsModel(Order order)
{
    CompletionDateTime = order.CompletionDateTime;
    CreateDateTime = order.CreateDateTime;
    UpdateDateTime = order.UpdateDateTime;
    BusinessArea = order.BusinessArea;
    Comment = order.Comment;
    CostCenter = order.CostCenter;
    CreateUsername = order.CreateUsername;
    Customer = order.Customer;
    IncidentNumber = order.IncidentNumber;
    OrderID = order.ID;
    OrderStatus = order.OrderStatus;
    ProjectName = order.ProjectName;
    ProjectNumber = order.ProjectNumber;
    ProjectSubcode = order.ProjectSubcode;
    UpdateUsername = order.UpdateUsername;
    Description = order.Description;
}

//OrdersController
public ActionResult SaveOrderDetails(OrderDetailsModel orderDetailsModel)
{
    Order order = WorkflowManager.GetOrderByID(orderDetailsModel.OrderID);

    foreach(PropertyInfo propertyInfo in orderDetailsModel.GetType().GetProperties)
    {
         //Write properties back.
    }

    return null;
} 
```

关于如何做到这一点的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:23:55.470

看看[AutoMapper](http://automapper.org/)。它使这种左手<->右手编码的工作变得很短。

这是一个例子：

```
Mapper.CreateMap<Order, OrderDetailsModel>();
OrderDetailsModel dto = Mapper.Map<Order, OrderDetailsModel >(order); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:24:41.723

使用[自动映射器](https://github.com/AutoMapper/AutoMapper)。它映射具有相同名称的属性，无需任何自定义编码。您可以使用 NuGet 将其添加到 Visual Studio 中的项目中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:26:59.067

您可以使用`AutoMapper`模式来完成此映射。

注意：您在 github 上有项目和库

链接：[https ://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T19:32:09.223

您还应该看看[ValueInjecter](http://valueinjecter.codeplex.com/)

在同时使用 Automapper 和 ValueInjecter 之后，我会说 ValueInecter 肯定更容易使用。在您想要从一个对象映射到另一个对象之前，它也不需要预先完成任何设置。只要属性名称匹配，您就可以使用默认功能。它还支持展平和非展平。

这是一个例子：

```
myObject.InjectFrom(anyOtherObject); 
```

不要忘记在引用程序集后包含 using 语句：

```
using Omu.ValueInjecter; 
```

谢谢。

# android - 当 Checkable 父级被检查时，如何将 CheckBox 的检查设置为 true？

> ID：12733397
> 
> 赞同：0
> 
> 时间：2012-10-04T18:21:15.687
> 
> 标签：android, android-layout

我有`ListView`自定义`Checkable`列表项布局。我`ListView`在`CHOICE_MODE_MULTIPLE`模式下工作，我想检查`CheckBox`cheked 父`com.domain.CheckedRelativeLayout`项的子视图。我该怎么做？

```
<?xml version="1.0" encoding="utf-8"?>
<com.domain.CheckedRelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:descendantFocusability="blocksDescendants"
    android:background="@drawable/selector">
    <RelativeLayout
        android:id="@+id/rl_data"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:paddingTop="2dp"
        android:paddingBottom="2dp">

        ...

    </RelativeLayout>
    <CheckBox android:id="@+id/cb_select"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_margin="6dp"
        android:text="" />
</com.domain.CheckedRelativeLayout> 
```

java类：

```
public class CheckedRelativeLayout extends RelativeLayout implements Checkable {
private boolean mChecked;

    private static final int[] CheckedStateSet = {
        android.R.attr.state_checked
    };

    public CheckedRelativeLayout(Context context) {
        super(context);
    }

    public CheckedRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override 
    public boolean isChecked() {
        Log.v(getClass().getName(), " IS CHECKED ");
        return mChecked;
    }

    public void setChecked(boolean checked) {
        if (mChecked != checked) {
            mChecked = checked;
            refreshDrawableState();
        }
    } 

    @Override 
    public void toggle() { 
        mChecked = !mChecked;
        Log.v(getClass().getName(), " TOGGLE ");
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CheckedStateSet);
        }
        return drawableState;
    }

    @Override
    public boolean performClick() {
        toggle();
        return super.performClick();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:26:00.227

由于您在 XML 中定义子项，因此我将遍历 CheckedRelativeLayout 中的所有子项，如果它们实现了 Checkable，则对它们调用 setChecked 并传入 CheckedRelativeLayout 的选中状态。

如果您要在代码中构建布局（这意味着您保证孩子总是在那里），您可以在 CheckedRelativeLayout 的状态更改时切换复选框。

# javascript - 如何使用 JS 移动检测直接提供图像而不是模态？

> ID：12733398
> 
> 赞同：1
> 
> 时间：2012-10-04T18:21:31.103
> 
> 标签：javascript, mobile, mobile-safari, browser-detection

我正在建立一家餐厅的网站，并通过 TW Bootstrap 将他们的菜单加载为模式中的图像。代码如下所示：

```
 <div id="menu" class="modal hide fade in" style="display: none; ">
              <div class="modal-header">
                <a class="close" data-dismiss="modal">×</a>
              </div>
              <div class="modal-body">
                <img src="assets/menus/brunch.jpg">
              </div>
          </div>
          <a data-toggle="modal" href="#menu" >BRUNCH</a></p> 
```

这在桌面浏览器上运行良好，但在移动浏览器中，图像的大小使得滚动和缩放有点尴尬。客户希望在移动设备中废弃模式，并在用户单击菜单链接时将图像加载到新页面中。

我已经阅读了很多关于媒体查询和 javascript 浏览器检测的内容，但我觉得我想做的只是规模较小。最简单、最无痛的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:34:41.813

让您的网络服务器检测设备是否是移动浏览器。如果它看起来是移动设备，请重定向到具有内嵌图像而不是模式的页面的移动版本（并且，在底部提供指向完整版本网站的链接，以防他们不想要查看移动内容）。

# performance - “perf top”命令在虚拟机上无法正常运行

> ID：12733402
> 
> 赞同：1
> 
> 时间：2012-10-04T18:21:44.753
> 
> 标签：performance, linux-kernel, performancecounter, perf

我有一台运行 Ubuntu 12.04 和 linux 内核 3.2.0-31 的虚拟机。当我尝试运行`sudo perf top`可以分析整个系统进程并收集其信息的命令时，没有显示任何信息。但其他命令运行良好，例如`perf stat ls`收集运行 ls 命令的所有性能信息。

![截屏](../Images/9e7fc2e22797720b94b4357b3c65ac60.png)

所以我想知道：是因为`perf top`命令不支持虚拟机吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:41:40.483

这是vmware上的客人吗？然后它将无法正常工作。

[http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2015931](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2015931)

# jquery - Smooth Div Scroll 未在所有版本的 IE 上初始化（或仅部分初始化）。其他浏览器都正常

> ID：12733404
> 
> 赞同：1
> 
> 时间：2012-10-04T18:21:52.083
> 
> 标签：jquery, internet-explorer, jquery-plugins

我正在开发一个实现[Smooth Div Scroll 插件](http://www.smoothdivscroll.com/)的项目。

对于所有其他浏览器，我的代码允许用户水平滚动浏览一堆 div，但 IE 显然有其他想法。它偶尔会选择正确初始化，或者只初始化部分功能，或者通常根本不做任何有用的事情。

相关的 jQuery 代码（和 PHP 的接触）：

```
$(document).ready(function () {
  $("div#sbir-sttr-tool").smoothDivScroll({
    mousewheelScrolling            : true,
    manualContinuousScrolling      : false,
    hotSpotScrollingStep           : 5,
    hotSpotScrollingInterval       : 7,
    easingAfterHotSpotScrolling    : false
    <?php 
      if(isset($_GET['col'])){
        echo ', startAtElementId   : "sbir_' . $_GET['col'] . '"'.PHP_EOL;
      }
    ?>
  });
}); 
```

PHP 段按预期输出。就像我说的，初始化在其他浏览器中完美运行（测试：FF、Chrome、Safari、Opera）。

控制台中没有抛出 JS 错误。我在 IE 中收到了许多 304 负载，但我假设这不是问题（如果我错了，请纠正我）。

这个问题可以在这里测试：[http](http://startech1.org/dev/sbir/?col=) ://startech1.org/dev/sbir/?col= （其中`0 <= col < 5`，或者只是不包括`col`参数）。

如果问题是与页面上安装的其他插件发生某种冲突，也会安装[Fancybox](http://fancyapps.com/fancybox/)并且我正在`jQuery v1.8.0`运行`jQuery-UI v1.8.18`.

# c# - VS2012远程调试无需管理员账号

> ID：12733406
> 
> 赞同：10
> 
> 时间：2012-10-04T18:21:53.160
> 
> 标签：c#, visual-studio-2012, remote-debugging

让我稍微解释一下我们。我们是一组开发人员，他们为我们的团队拥有专用服务器，但它仍然由另一个执行组织范围策略的组管理。他们的理想方案是将远程调试设置为服务，并允许我们组中的任何人通过我们的本地工作站访问调试器。给我们的服务器组管理员权限，很可能是最后的选择。

我们查看了 Microsoft 页面列表，如下所示：

-- [http://msdn.microsoft.com/en-us/library/9y5b4b4f.aspx](http://msdn.microsoft.com/en-us/library/9y5b4b4f.aspx) --

本文解释了为什么建议使用管理员帐户的原因。-- [http://blogs.msdn.com/b/greggm/archive/2008/05/15/visual-studio-remote-debugger-service-user-account-requirements.aspx](http://blogs.msdn.com/b/greggm/archive/2008/05/15/visual-studio-remote-debugger-service-user-account-requirements.aspx) --

本文指出需要让管理员登录到服务器，而另一个用户正在远程调试。不是一个选择。-- [http://msdn.microsoft.com/en-us/library/aa291278(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa291278(v=vs.71).aspx) --

-- [http://blogs.msdn.com/b/greggm/archive/2004/10/04/237519.aspx](http://blogs.msdn.com/b/greggm/archive/2004/10/04/237519.aspx) -- -- [http://social.msdn.microsoft.com/Forums/en-US/vsdebug /thread/2cd87191-f0fb-462b-8367-c1b7e3ddf443/](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/2cd87191-f0fb-462b-8367-c1b7e3ddf443/) --

我们设置了防火墙权限，可以看到运行 msvsmon 的服务器。发现的大部分内容表明，当远程调试器作为远程计算机上的服务运行时，只有管理员可以连接到调试器。到目前为止，我们还没有找到切实可行的解决方案。

无论如何设置一个能够访问远程调试器的网络组，而无需授予组管理员权限？其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-11T14:32:34.390

据我所知，您可以将您想要的用户添加到允许调试权限的特殊组中，如果您想防止对生产中的记录进行写访问，您需要配置您的数据库以删除该组的这些权限。顺便说一句，您需要拥有与发布完成时编译的相同的 pdb 文件。通过这种方式，您将能够调试您的代码，否则您将无法看到值的来源。将 pdb 保留在上一个版本中并让您的开发人员团队可以访问它们是一种很好的做法。

[![在此处输入图像描述](../Images/b38d1039891613f774604416c94760c2.png)](https://i.stack.imgur.com/82s9q.png)

# php - 如何通过 chrome 扩展存储用户特定的数据

> ID：12733407
> 
> 赞同：1
> 
> 时间：2012-10-04T18:21:52.750
> 
> 标签：php, javascript, mysql, google-chrome-extension

我创建了一个 chrome 扩展，它通过 XMLHttpRequest 在 .php 文件中发送一些变量值，该文件将这些数据插入到 mySQL 数据库中。

除了这些数据之外，我还想获取特定于用户的信息（例如唯一的 user_id），这将允许我将每条数据连接到生成它的用户。

我的问题是：这是否可以通过 chrome 扩展来实现，如果可以，您能否给我一些关于从哪里开始寻找的指示？

非常感谢你！

PS：我不想拥有用户的实际身份，我只想能够区分来自不同用户的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T14:45:57.110

在这种情况下，身份 api 可能是答案 [https://developer.chrome.com/apps/app_identity](https://developer.chrome.com/apps/app_identity)

# postgresql - 诊断 PostgreSQL 中的应用程序连接泄漏

> ID：12733408
> 
> 赞同：2
> 
> 时间：2012-10-04T18:21:57.393
> 
> 标签：postgresql

我正在调查 PostgreSQL 中的连接泄漏，并希望收集一些诊断信息。

特别是，我想将一些信息与我建立的每个连接相关联，然后能够直接查询它。

如果我在 MS-SQL 中设计这种东西，我会更改我的连接工厂，以在每次连接建立后对诊断表执行 upsert，其中包含[@@spid](http://msdn.microsoft.com/en-us/library/ms189535.aspx)、回溯和其他诊断信息。

然后为了诊断正在发生的事情，我可以在 spid 上查询加入我的诊断表的[sysprocesses 。](http://msdn.microsoft.com/en-us/library/ms179881.aspx)这将为我提供与每个连接关联的干净的*应用程序回溯。*

如何在 PostgreSQL 上实现类似的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:41:46.130

PostgreSQL 派生一个新进程来处理每个连接。您可以轻松获取此进程的 PID：

```
SELECT pg_backend_pid(); 
```

这对应于标准管理工具（ 、 等）中可见的进程`top`ID `ps`。您也可以使用标准工具 ( ) 终止连接`kill`，或者在具有适当权限的情况下，通过说`SELECT pg_terminate_backend(pid)`.

当前会话的列表也可以在数据库中访问：

```
SELECT * FROM pg_stat_activity; 
```

最后一点：PID 保证在查询运行时是唯一的，但最终会被操作系统重新使用。`backend_start`您可以通过将 PID 与 的列配对来确保唯一性`pg_stat_activity`。就此而言，您不妨将其与您的日志记录混为一谈：

```
INSERT INTO log_table (pid, backend_start, message, backtrace)
SELECT procpid, backend_start, 'my message', 'my backtrace'
FROM pg_stat_activity
WHERE procpid=pg_backend_pid(); 
```

# javascript - 将元素添加到文档时的触发方法

> ID：12733410
> 
> 赞同：0
> 
> 时间：2012-10-04T18:22:06.827
> 
> 标签：javascript, ajax

我正在尝试为 IE 实现占位符功能。

到目前为止，我得到了以下代码：

```
if(!$.support.placeholder) {

    $('#closestStaticParent').on('focus', '[placeholder]' function() {
      var input = $(this);
      if (input.val() == input.attr('placeholder')) {
        input.val('');
        input.removeClass('placeholder');
      }
    }).on('blur', '[placeholder]' function() {
      var input = $(this);
      if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        input.val(input.attr('placeholder'));
      }
    }).blur();

} 
```

所以它在模糊上添加了占位符，代码用占位符模糊了每个元素。现在的问题是只有最初加载的元素会模糊。如果我使用 ajax 加载文本字段，它们不会触发`blur()`.

如何使新文本字段`blur()`在添加到文档（加载）时自行启动？

PS。请不要使用基于时间间隔或 ajax 成功重新检查的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:27:42.520

更改`$('#closestStaticParent')`为`$('body')` 如果您正在创建的元素不是`closestStaticParent`

# byte - 如何将 4 字节的切片转换为符文？在围棋中

> ID：12733413
> 
> 赞同：3
> 
> 时间：2012-10-04T18:22:24.783
> 
> 标签：byte, go

我有一个符文的内存表示

```
key := make([]byte, 4) 
```

现在，如何将其转换为符文？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T18:24:54.220

有一个专用的[DecodeRune](http://golang.org/pkg/unicode/utf8/#DecodeRune)函数：

> **func DecodeRune(p []byte) (r rune, size int)**
> 
> DecodeRune 解压缩 p 中的第一个 UTF-8 编码并返回符文及其宽度（以字节为单位）。如果编码无效，则返回 (RuneError, 1)，这是正确 UTF-8 的不可能结果。

所以你只需要导入`"unicode/utf8"`并做

```
r, _ := utf8.DecodeRune(key) 
```

# delphi - delphi：与控件的项目集合中的字符串关联的对象会发生什么

> ID：12733421
> 
> 赞同：0
> 
> 时间：2012-10-04T18:23:02.273
> 
> 标签：delphi

这里会发生什么？

当过程结束并超出范围时，对象是否仍然有效？它会保持未分配状态还是我仍然可以参考？

每当用户决定将项目添加到我的控件时，我都需要添加此类项目，并且我还必须通过在用户的活动上创建然后添加我的类的对象。我担心，当我需要处理这些对象以在我的应用程序中进一步使用时，它们会保留在范围内还是可以访问？或者他们的参考资料会丢失？

```
 procedure TForm1.Button1Click(Sender: TObject);
     var
       LMyCustomObj : TMyCustomObject;
     begin
       LMyCustomObj := TMyCustomObject.Create;

       ListBox1.Items.AddObject('1', LMyCustomObj);
     end; 
```

进一步，如果我添加

```
 LMyCustomObj.Free; 
```

对于我的函数，它们是否也会从控件的集合中删除，还是会导致内存泄漏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T20:55:49.053

> 当过程结束并超出范围时，对象是否仍然有效

是的。

> 我担心，当我需要处理这些对象以在我的应用程序中进一步使用时，它们会保留在范围内还是可以访问？

他们仍然可以通过`ListBox.Items.Objects[]`酒店访问。

> 或者他们的参考资料会丢失？

不，因为 ListBox 有对它们的引用。

> 如果我添加进一步
> 
> ```
> LMyCustomObj.Free; 
> ```
> 
> 对于我的功能，它们是否也会从控件的集合中删除

不可以。您必须在使用完毕后手动删除它们。

> 还是会导致内存泄漏？

不，您更有可能在以后崩溃您的代码，因为 ListBox 现在包含对无效对象的引用。

# sql - 用于在数据库中存储不同文件的数据类型

> ID：12733427
> 
> 赞同：2
> 
> 时间：2012-10-04T18:23:24.143
> 
> 标签：sql, database, file, postgresql, sqldatatypes

我试图让数据库接受 postgres 数据库表中的不同文件。我要支持的文件具有不同的 mime 类型。我想支持pdf、word、纯文本和power point。问题是我不知道选择什么数据类型。pgadmin（我正在使用的工具）的文档非常（比如说）不能令人满意。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:54:12.950

虽然您可以将文件*内容*存储在数据库中，但请考虑存储文件*路径*并使用文件系统来存储文件。

在 IT 世界中，“你可以用任何东西做任何事情”，但这并不意味着你*应该*.

在这种情况下，您尝试将数据库用作文件系统，这是可以做到的，但数据库在存储文件内容（通常是“大”数据）方面不如文件系统高效或实用。它会：

*   让您的备份变得更长更大
*   减慢插入查询（更多 I/O）
*   使您的日志文件更大（更慢并且更频繁地填充）
*   使访问文件变慢（查询与简单的磁盘 I/O）
*   要求您通过数据库访问文件（麻烦，不能使用浏览器等）
*   ETC

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T18:26:02.503

您可以[`bytea`](http://www.postgresql.org/docs/current/static/datatype-binary.html)在 PostgreSQL 中使用类型。

# drop-down-menu - Knockoutjs：如何为选择中的选项添加标题

> ID：12733430
> 
> 赞同：4
> 
> 时间：2012-10-04T18:23:34.543
> 
> 标签：drop-down-menu, attributes, knockout.js

我使用 Knockoutjs 选项绑定来填充我的选择

```
<select data-bind="value: val, options: options, optionsText: 'text', optionsValue: 'ID'">
</select> 
```

但是对于某些选项，文本是相同的。然后我想添加一个title属性来添加信息。我可以在不修改 knockoutjs 本身的情况下通过淘汰赛来做到这一点吗？

可能正在使用 optionsText 中的函数，但我看不到如何

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T19:04:44.017

您可以使用*foreach*绑定来执行此操作，如下所示：

```
<select data-bind="foreach: options, value: selectedValue">
    <option data-bind="value: ID, text: text, attr: {title: title}" ></option>
</select> 
```

[这](http://jsfiddle.net/AGcd4/)是一个工作示例。

# android - 如何在 listFragment 上设置初始选择

> ID：12733432
> 
> 赞同：1
> 
> 时间：2012-10-04T18:23:41.723
> 
> 标签：android, selection, android-listfragment

是否可以在 listFragment 上设置初始选择？我想显示一个按时间排序的事件列表，如果向上滚动，可以选择查看过去的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:33:48.673

```
getListView().setSelection(position); 
```

看[这里](http://developer.android.com/reference/android/widget/ListView.html#setSelection%28int%29)

# iphone - ViewController 子类中应该有 [super viewDidUnload] 吗？

> ID：12733437
> 
> 赞同：0
> 
> 时间：2012-10-04T18:24:25.673
> 
> 标签：iphone, ios, xcode

我已经将 UIViewController 子类化了 3 次。每个人都应该有**[super viewDidUnload]**吗？

希望是一个简单的问题，而不是太愚蠢！谢谢。

```
- (void)viewDidUnload
{
    ...
    [super viewDidUnload];  //<<< In all 3 subclasses?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:27:16.350

是的，你应该`super`在每节课上打电话。

请注意，此方法在 iOS 6.0 中已弃用。在低内存条件下不再清除视图，因此永远不会调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:47:55.913

您应该在 viewDidUnload 方法调用中调用 [super viewDidUnload]。

您应该阅读[ios 开发文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)（内存管理小节）。我相信它会帮助你理解你的问题的答案；）

# c - 由非法声明引起的 C2061 语法错误标识符“等待”？

> ID：12733441
> 
> 赞同：0
> 
> 时间：2012-10-04T18:24:45.120
> 
> 标签：c

**给定：**
将库从 unix (COMPAQ Tru 64)DEC ALPHA 移植到 w32 XP sp3 OS。语言：使用 c89 编译器构建的 unix 平台上的 C 代码，带有选项：c89 -c -O -DLOWER_U -DSOLARIS sychld.c

仅使用带有 /c（仅编译）选项的 MS Visual Studio 2010 C 编译器

**问题：**
出现错误 wait.h(79)：C2061 语法错误标识符“等待”代码：

```
77:#ifndef _BSD             /* POSIX definition of wait() */
78:#ifdef _NO_PROTO
79:extern pid_t wait();
80:#else
81:_BEGIN_CPLUSPLUS
82:extern pid_t wait(int *);
83:_END_CPLUSPLUS
84:#endif /* _NO_PROTO */
85:#endif /* _BSD */ 
```

请注意，变量是在条件语句中声明的。第 79 行的 var 也在第 285 行声明。

```
284:#ifdef _NO_PROTO
285:extern pid_t wait();
286:extern pid_t wait3();
287:#else
288:
289:_BEGIN_CPLUSPLUS
290:extern pid_t wait(union wait *);
291:#include <sys/resource.h>   /* contains rusage struct for wait3 */
292:extern pid_t wait3(union wait *, int, struct rusage *);
293:_END_CPLUSPLUS
294#endif  /* !_NO_PROTO */ 
```

我不是一个经验丰富的 C 程序员，但我觉得如果我创建一个临时变量，那么我只会做一个声明。如何在不影响代码完整性的情况下做到这一点？

这是我收到错误的原因吗？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:40:36.763

第 79 行不是声明变量，而是声明函数。

编译器抱怨的实际问题（即使消息还不清楚）是它不知道是什么`pid_t`。

您更大的问题（如果您的代码正在使用`wait()`）是Windows不支持生成进程的Unix fork模型-至少不使用POSIX子系统之类的东西（我什至不确定Windows是否支持）或使用[Cygwin](http://www.cygwin.com/)库。我怀疑 Cygwin 可能是您轻松移植应用程序的最佳选择，但是如果没有有关该应用程序的更多信息以及 Cygwin 许可是否可以接受，这很难知道。

# javascript - 输入按钮 onClick 删除最近的 div

> ID：12733448
> 
> 赞同：1
> 
> 时间：2012-10-04T18:25:03.320
> 
> 标签：javascript, jquery

呃，为什么这不起作用，我在我的网站上多次使用类似这样的代码..但现在不起作用..

HTML

```
<div><span>a</span><input type='hidden' /> <input type='button' onClick='Remove(event)' /> 
```

jQuery

```
function Remove(e){
e.preventDefault();
$(this).closest('div').remove();
} 
```

看起来 $(this) 不是我的按钮。我用 alert($(this).val()) 进行了测试，没有任何结果。

![在此处输入图像描述](../Images/acd08c07db7d27736cecbe48f74dd6fc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:28:11.170

如何将一个类添加到按钮元素并将处理程序绑定到按钮

```
<div>
   <span>a</span>
   <input type='hidden' /> 
   <input type='button' class'removeDiv' /> 
```

**代码：**

```
$(function () {
    $('.removeDiv').click (function () { 
         $(this).parent().remove();
         // As I see the input is direct child of the div
    });
}); 
```

> 我的 div 也是从客户端和服务器端创建的。它很容易添加 onclick 功能而不是在新项目上取消绑定重新绑定，不是吗？

在这种情况下，您可以使用委托事件。见下文，

```
$(function () {
    //Replace document with any closest container that is available on load.
    $(document).on('click', '.removeDiv', function () { 
         $(this).parent().remove();
         // As I see the input is direct child of the div
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T18:30:30.730

这应该工作！

HTML

```
<div><span>a</span><input type='hidden' /> <input type='button' onClick='Remove(this)' /> 
```

jQuery

```
function Remove(obj){
    $(obj).closest('div').remove();
} 
```

# css - CSS 列表导航不遵守宽度规则

> ID：12733449
> 
> 赞同：0
> 
> 时间：2012-10-04T18:25:14.490
> 
> 标签：css

我正在使用无序列表来创建 3 层导航。出于某种原因，当我将宽度设置为第三层时，它不会粘住。不知道我做错了什么。非常感谢任何和所有帮助！多谢你们。这是 jsfiddle 链接： http: [//jsfiddle.net/VnUMF/](http://jsfiddle.net/VnUMF/)，您可以通过查看资源 > 工程库来查看此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:32:08.073

你已经用这个覆盖了宽度：

```
#navList li a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:33:17.203

设置宽度`#subItemsR li a`。这将覆盖您为 设置的宽度`#navList li a`，这是当前适用于所有菜单链接的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:33:50.700

如果您将宽度应用于`#subItemsR li a`它会起作用。然而，最好的情况是，如果可以的话，你应该让它们自动宽度。

# git - 防止 Git 在拉取时更改权限

> ID：12733452
> 
> 赞同：25
> 
> 时间：2012-10-04T18:25:21.647
> 
> 标签：git, version-control

当我从我的存储库中提取更改时，Git 更改了文件权限（实际上，他更改了组`write`权限）。

如果我是正确的，Git 应该只跟踪可执行位，并且无论如何都可以使用设置`core.filemode`为 false 来删除它。

但是，虽然文件模式设置为 false（在本地、全局和用户中），但当我拉取时，`write`权限会不断变化。

我可以使用 git-hooks 来重置正确的 chmod，但这是一些开销，如果有办法让 git 完全忽略文件模式更改，我会更喜欢。

任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T20:24:10.000

*此处可能*有帮助的一个配置设置是[`core.sharedRepository`](http://git-scm.com/docs/git-config)，在博文“[在协作存储库中保留对 Git 对象的组写入](http://briantanaka.com/blog/git/)”中介绍：

> 结果证明解决方案相当简单。
> 在文件`.git/config`中，我添加了一行内容：“ `sharedRepository = group`”，如下所示：
> 
> ```
> [core]
>     repositoryformatversion = 0
>     filemode = true
>     bare = false
>     logallrefupdates = true
>     sharedRepository = group 
> ```
> 
> 此后，`.git/objects`使用适当的组写入权限创建了其中的新文件。
> （但是，请注意，新文件由接收推送的用户帐户的主要组拥有。如果在项目上协作的用户具有不同的主要组，并且这些用户不共享该组的成员资格组，您可能仍然会遇到问题。）

确保**您的价值`umask`**：

> 示例：`0660`将使所有者和组可以读/写 repo，但其他人无法访问（相当于组，除非`umask`是 eg `0022`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-15T00:42:38.760

我使用的解决方案是以具有您要保留的权限[的用户身份运行命令：](https://askubuntu.com/questions/294736/run-a-shell-script-as-another-user-that-has-no-password)

```
sudo -u user command 
```

在这种情况下，它可能是：

```
sudo -u www-data git pull 
```

`www-data` [至少是 Ubuntu 上的 apache 默认用户](https://askubuntu.com/questions/520634/giving-ownership-of-the-directory-to-the-apache-user)。

这可以防止权限更改。我在更新我的 VPS 上的 git 存储库时使用它，同时将文件权限设置为网络服务器用户。

# vb.net - 在删除数据表中的所有条目之前选择 Count(*) 返回旧值

> ID：12733453
> 
> 赞同：0
> 
> 时间：2012-10-04T18:25:23.330
> 
> 标签：vb.net, oracle, select, count

所以我在我的表上插入了一些数据，运行了一个 Select Count(*) 查询，并显示了结果，它是 120，然后我从 sqldeveloper 中删除了表的数据，再次使用与以前相同的查询运行我的 VB 项目测试它是否工作正常，令我惊讶的是它返回了与以前相同的值！仍然是 120，虽然相同的 Select Count 查询确实从 sqldeveloper 返回 0，但我已经关闭了项目并再次打开它，没有任何变化。会发生什么？

这是我的查询代码：

```
sql.CommandText = "select count(*) from mytable"
sql.CommandType = CommandType.Text
sql.Connection = conexion.con
test = Convert.ToInt32(sql.ExecuteScalar().ToString())
TextBox1.Text = test.ToString() 
```

test 是一个 Integer 变量，我将其转换为 Integer 的原因是因为我想评估结果并根据查询返回的数字决定要做什么。

VB.NET 3.5 和 Oracle10g XE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:43:28.923

我会自己回答这个问题，以防万一其他人将来遇到这个问题，确实正如评论者所说，你必须在期望看到数据库中的任何实际更改之前提交你在 SQLdeveloper 上所做的所有事情，就好像它是一个实际的 SQL 事务。

感谢对此发表评论的人。

# ios - iOS CoreData中的多行sqlite db更新

> ID：12733454
> 
> 赞同：0
> 
> 时间：2012-10-04T18:25:28.723
> 
> 标签：ios, sqlite, core-data

我正在使用带有 UITableView 的 NSFetchedResultsController 从底层 sqlite 数据库中呈现 iOS 应用程序中的数据。在应用程序流程中的某些点，我需要从单独的控制器更新数据库多行中的标志。

我不认为遍历所有对象，更改标志，然后重新保存是理想的。

有没有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:39:03.790

你可以这样做。

1.  将获取的控制器退出为委托（非常重要）
2.  对 CoreData 执行更改并保存上下文
3.  再次分配获取的控制器委托并再次执行获取
4.  调用 reload table，只更新可见行

您可以使用有关保存和更改上下文的常用 CoreData 通知来处理此问题。您可以执行任何您想要的操作，只有在保存上下文时才会通知他们。

# jsf - primefaces 在数据表上自动完成

> ID：12733456
> 
> 赞同：0
> 
> 时间：2012-10-04T18:25:33.397
> 
> 标签：jsf, autocomplete, primefaces

是否可以有一个带有 incell 编辑的数据表，其中要填充的字段之一是自动完成字段？我正在使用 primefaces 3.4

```
<p:column headerText="#{label['manufacturer_name']}" style="width:145px">
 <p:cellEditor>
  <f:facet name="output">
     <h:outputText value="#{prod.manufacturer}" style="width:140px" />
   </f:facet>
       <f:facet name="input">
    <p:autoComplete id="acManufacturer" value="#{prod.manufacturer}" completeMethod="#{productBean.manufactures}" style="width:140px" />
    </f:facet>
</p:cellEditor>
</p:column> 
```

在豆方面：

```
 public List<String> manufactures(){
    List<String> manufactures = new ArrayList<String>();
    manufactures.add("man2");
    manufactures.add("man1");

    return manufactures;
} 
```

我的方法永远不会在 bean 上调用。

谢谢

# javascript - 使用选项卡时 InfoWindow 高度不正确

> ID：12733457
> 
> 赞同：3
> 
> 时间：2012-10-04T18:25:33.720
> 
> 标签：javascript, html, css, google-maps, google-maps-api-3

我正在使用[tabber.js](http://www.barelyfitz.com/projects/tabber/)将选项卡添加到我的 InfoWindows，并使用以下代码确保在 InfoWindow 的 DOM 准备好后呈现选项卡：

```
infowindow.id = marker.markerid;
infowindow.open(map, marker);

google.maps.event.addListener(infowindow, 'domready', function () {
    tabberAutomatic({div: document.getElementById(marker.markerid)});
}); 
```

使用 Google Maps API，**InfoWindow 的高度是在 InfoWindow*打开***时根据其内容自动计算的，而不是在 DOM 准备好时。结果是 InfoWindow 的大小大约是它应该大小的两倍，因为高度基本上是每个选项卡中所有内容的高度之和。呈现选项卡时，我在 InfoWindow 中留下了很多空白。

所以我需要做的是强制 InfoWindow 在呈现选项卡***后重新计算它的高度。***这可能吗？

**更新**：[这个小提琴](http://jsfiddle.net/PQJJU/)说明了我的问题。在这种情况下，如何强制 InfoWindow 正确计算它的高度？显式设置 maxHeight 或等效项不是一个选项，因为 InfoWindow 的内容是动态生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:24:49.600

我通过执行以下操作解决了这个问题：

1.  使用**'html:' 属性在标记对象中声明 HTML 内容**
2.  在设置真实内容之前创建了一个**空的叠加层**
3.  **更新**了点击事件的叠加内容，并在之后初始化了**tabberAutomatic**

您可以在此处查看实时示例：

[http://jsfiddle.net/alexcastillo/af6bs/](http://jsfiddle.net/alexcastillo/af6bs/)

**对于多个标记：**

[http://jsfiddle.net/alexcastillo/Gk7AM/](http://jsfiddle.net/alexcastillo/Gk7AM/)

笔记：

1.  必须**在循环之外**创建空覆盖。
2.  **不需要**在 domready 事件上运行**tabberAutomatic**函数。

最好的，

# objective-c - 在 iOS 设备上跟踪 Objective-C 调用的 GDB 脚本 - 问题

> ID：12733471
> 
> 赞同：4
> 
> 时间：2012-10-04T18:26:18.443
> 
> 标签：objective-c, ios, gdb, objective-c-runtime

我有一个 gdb 脚本，我正在处理所有通过 objc_msgSend 的 Objective-C 方法调用，但我遇到了一个我似乎无法处理的问题。在查看了 Objective-C 运行时源代码之后，我开发了以下脚本来在 objc_msgSend 的每个中断处打印 [ ]。问题是在某些情况下 data_NEVER_USE 不是有效指针但也不为空。我能找到的关于一个类是否已初始化的唯一指标是 id->data_NEVER_USE->flags & RW_REALIZED。我在这里遗漏了类初始化的哪些方面可以让我跳过这种情况？

```
b objc_msgSend
c
commands
silent

if (*$r0 == 0)
    continue
end

set $id = (class_t *)$r0
set $sel = $r1      
print *$id  
if($id->data_NEVER_USE != 0)
    set $data = (class_ro_t *) ($id->data_NEVER_USE)
    if (($data->flags & 0x80000000) && ($data->name))
        set $classname = $data->name
        printf "[%s ", $classname
    else
        continue
    end
end

if ($sel != 0)
    printf "%s", $sel
else
    printf "null"
end

printf "]\n"
continue
end 
```

我很感激这方面的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T22:41:22.513

这两种方法对我来说效果很好。请注意，在我的示例中，我手动启动“SomeApp”以便在它启动后立即对其进行监控。

```
gdb
(gdb) attach --waitfor 'SomeApp'

**this is where you manually start SomeApp on your device**

call (void)instrumentObjcMessageSends(YES) 
```

“instrumentObjcMessageSends”在运行时启用/禁用消息记录。这是[有关此方法的更多信息。](http://www.dribin.org/dave/blog/archives/2006/04/22/tracing_objc/)

另一个选项，仍然在你的 iDevice 上使用 GDB，是写一个像这样的小命令：

```
FooPad:~ root# gdb
(gdb) attach SBSettings
Attaching to process 440.
Reading symbols for shared libraries . done
Reading symbols for shared libraries ............................. done
0x35686004 in mach_msg_trap ()

(gdb) break objc_msgSend
Breakpoint 1 at 0x3323ef72

(gdb) commands
Type commands for when breakpoint 1 is hit, one per line.
End with a line saying just "end".

>printf "-[%s %s]\n", (char *)class_getName(*(long *)$r0,$r1),$r1
>c
>end

(gdb) c
Continuing.
// a ton of information will follow 
```

一旦你按下**“c”**（就在上面写着“Continuing.”的那一行，你的屏幕就会填满函数名和参数。

最后按照[这些说明](http://www.securitylearn.net/2012/05/20/installing-gnu-debugger-on-iphone/)在您的 iDevice 上获得一个正常工作的 GDB。为了后代，我将在此处发布简短说明：

> GNU 调试器 (gdb) 用于分析 iOS 应用程序的运行时行为。在最近的 iOS 版本中，直接从 Cydia 下载的 GNU 调试器已损坏且无法正常运行。关注 Pod 2g 博客文章也没有帮助我。
> 
> 要解决这个问题，请将[http://cydia.radare.org](http://cydia.radare.org)添加到 cydia 源并下载最新的 GNU 调试器（build 1708）。GDB build 1708 适用于 iOS 5.x。

# python - Python PyQt 如何为 QProcess 设置环境变量？

> ID：12733479
> 
> 赞同：1
> 
> 时间：2012-10-04T18:26:48.027
> 
> 标签：python, qt, pyqt, environment-variables

我正在尝试在 QT 应用程序中为正在运行的 QProcess 设置环境变量。代码如下。但是，在测试中似乎没有设置环境变量。有什么建议么？

```
def runUbootTests(self):
    env = QtCore.QProcessEnvironment.systemEnvironment()
    env.insert("LINUX_ETH_ADDR", "3c:98:bf:00:00:f4")
    self.process.setProcessEnvironment(env)
    self.process.readyReadStandardOutput.connect(self.readReady)
    self.process.start("make", ("clean", "check_uboot")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:32:22.240

您是否尝试过使用[http://docs.python.org/library/os.html#os.environ](http://docs.python.org/library/os.html#os.environ)？这修改了当前进程的环境（也可以在 /proc 中看到）。

这个新环境也应该传递给任何衍生的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:09:43.000

您发布的代码似乎没有明显错误，并且对我有用。

这是我的测试文件和输出：

*生成文件*：

```
clean:  
    @echo 'SHELL:' $(SHELL)

check_uboot:    
    @echo 'ADDR:' $(LINUX_ETH_ADDR) 
```

*测试.py*：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.button = QtGui.QPushButton('Test', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.button)
        self.process = QtCore.QProcess(self)

    def handleButton(self):
        env = QtCore.QProcessEnvironment.systemEnvironment()
        env.insert("LINUX_ETH_ADDR", "3c:98:bf:00:00:f4")
        self.process.setProcessEnvironment(env)
        self.process.readyReadStandardOutput.connect(self.readReady)
        self.process.start("make", ("clean", "check_uboot"))

    def readReady(self):
        print str(self.process.readAllStandardOutput())

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

*输出*：

```
$ python2 test.py
SHELL: /bin/sh

ADDR: 3c:98:bf:00:00:f4 
```

# android - android ui - 周围有没有 android 向导框架？

> ID：12733484
> 
> 赞同：1
> 
> 时间：2012-10-04T18:27:16.250
> 
> 标签：android, android-ui

我想知道是否有任何 android 向导框架可以帮助实现像设置序列这样的向导。当然，它可以在没有太多痛苦的情况下从地面实施（例如[这里](https://stackoverflow.com/questions/1013469/make-a-wizard-like-application-in-android)的一个讨论）是的，因为这似乎是一个非常标准的需求，我希望已经有一些可用的支持框架。

谢谢哥们

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:01:26.270

我可以回答这个问题——但不是肯定的。核心 API 中没有任何内容，ActionBarSherlock 中也没有任何内容，而且我在其他任何地方都找不到任何远程有用的东西。

我最终在 ABS 的背面开发了我自己的向导框架，但目前它与我自己的应用程序（和我的其他框架代码）如此紧密地交织在一起，以至于它不处于可以作为公共回购的状态github（这是我的长期计划）。

如果您决定走自己的路，我建议您从 ActionBarSherlock 开始，并使用带有片段的选项卡式视图。它易于组合，最终用户可以使用选项卡、滑动或按钮（如果您提供它们）来逐步导航。如果您不希望它们可见，也可以隐藏选项卡（但它们确实让用户了解即将发生的事情，这可能会有所帮助）。查看 Fragments 示例应用程序，特别是“Tabs and Pager”示例。ViewPager 和 FragmentPagerAdaptor 是你的朋友。[您可以从 Action Bar Sherlock 网站](http://actionbarsherlock.com/)下载 ABS 和示例

# c# - DI Castle WCF 构造函数我该怎么做

> ID：12733485
> 
> 赞同：0
> 
> 时间：2012-10-04T18:27:17.013
> 
> 标签：c#, oop, dependency-injection, castle-windsor

我继承了一个使用 Castle DI 的项目。我正在向解决方案添加 WCF，并且需要使用解决方案中的一些功能。该类具有以下内容，我假设是注入。

```
private readonly IOrderRepository _orderRepository;
    private readonly IEshopOrderRepository _eShopOrderRepository;
    private readonly IUserRepository _userRepository;
    private readonly IListRepository _listRepository;
    private readonly INHibernateRepositoryWithTypedId<ProductVariant, string> _productVariantRepository;

    private readonly IMapper<GiftCardPayment, string, GiftCardPaymentDto> _giftCardDtoMapper;
    private readonly IMapper<AbstractOrder, OrderDto> _orderDtoMapper;
    private readonly IMapper<AbstractOrder, RecurringOrder> _recurringOrder;
    private readonly IMapper<Address, CreditCardPaymentDto> _creditCardDtoMapper;

    public delegate OrderDto ShipmentProcessing(OrderDto order, bool isRecap);

    public OrderManagementService(IOrderRepository orderRepository, IUserRepository userRepository, IListRepository listRepository,
        IEshopOrderRepository eShopOrderRepository,
        INHibernateRepositoryWithTypedId<ProductVariant, string> productVariantRepository,
        IMapper<GiftCardPayment, string, GiftCardPaymentDto> giftCardDtoMapper,
                                  IMapper<AbstractOrder, OrderDto> orderDtoMapper,
        IMapper<AbstractOrder, RecurringOrder> recurringOrder,
        IMapper<Address, CreditCardPaymentDto> creditCardDtoMapper)
    {
        _orderRepository = orderRepository;
        _eShopOrderRepository = eShopOrderRepository;
        _userRepository = userRepository;
        _listRepository = listRepository;
        _productVariantRepository = productVariantRepository;
        _giftCardDtoMapper = giftCardDtoMapper;
        _orderDtoMapper = orderDtoMapper;
        _recurringOrder = recurringOrder;
        _creditCardDtoMapper = creditCardDtoMapper;
    } 
```

所有这些都有效。我的问题是如何在 WCF 服务类中实现这种模式。我无法将参数添加到构造函数，因为客户端不会提供它们。

我能够在 WCF 中使用 DI，因此该部分可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:49:45.350

Castle 有一个[WCF 设施](http://docs.castleproject.org/Default.aspx?Page=WCF-Facility-Registration&NS=Windsor&AspxAutoDetectCookieSupport=1)。本质上，它是一个自定义服务工厂，用于创建您的服务，而不是 WCF 提供的默认工厂。如果你想使用流畅的注册，你必须将你的服务提供给服务主机工厂中使用的容器。为此，您可以创建自己的服务主机工厂，继承自城堡项目提供的服务主机工厂 (Castle.Facilities.WcfIntegration.DefaultServiceHostFactory)，并在工厂的构造函数中创建 windsor 容器。

您自己的服务主机工厂的示例实现，派生自 Castle 提供的 DefaultServiceHostFactory：

```
public class MyOwnServiceHostFactory: Castle.Facilities.WcfIntegration.DefaultServiceHostFactory
{

    public MyOwnServiceHostFactory() : base(CreateKernel())
    { }

    private static Castle.MicroKernel.IKernel CreateKernel()
    {
        var container = new Castle.Windsor.WindsorContainer();
        container.Install(new WindsorInstaller());
        return container.Kernel;
    }

}

public class WindsorInstaller : IWindsorInstaller
{

    #region IWindsorInstaller Members

    public void Install(Castle.Windsor.IWindsorContainer container, Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store)
    {
        container.AddFacility<Castle.Facilities.WcfIntegration.WcfFacility>();
        container.AddFacility<Castle.Facilities.TypedFactory.TypedFactoryFacility>();

        container.Kernel.Resolver.AddSubResolver(new Castle.MicroKernel.Resolvers.SpecializedResolvers.ListResolver(container.Kernel));
        // add your services here...
    }

} 
```

# c# - 如何从响应中删除“方法”节点？

> ID：12733486
> 
> 赞同：3
> 
> 时间：2012-10-04T18:27:19.310
> 
> 标签：c#, xml, wcf, soap, xml-serialization

我正在编写一个 WCF 服务，它应该处理**我无法控制**的预定义 SOAP/XML 格式。

这是我公开的服务合同：

```
[OperationContract]
[WebInvoke(Method = "POST")]
bool SavePets(Pets Pets); 
```

该服务期望的 SOAP 是：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <SavePets xmlns="http://tempuri.org">
      <Pets>
        <Dog>
          <Name>Fido</Name>
        </Dog>
        <Dog>
          <Name>Duke</Name>
        </Dog>
        <Cat>
          <Name>Max</Name>
        </Cat>
      </Pets>
    </SavePets>
  </s:Body>
</s:Envelope> 
```

但是，我需要删除方法名称 (SavePets) 或参数名称 (Pets)，因此服务不需要它：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
      <Pets>
        <Dog>
          <Name>Fido</Name>
        </Dog>
        <Dog>
          <Name>Duke</Name>
        </Dog>
        <Cat>
          <Name>Max</Name>
        </Cat>
      </Pets>
  </s:Body>
</s:Envelope> 
```

我没有使用 DataContracts 或 MessageContracts。我的 Pets 类如下所示：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = false, Namespace = "http://tempuri.org")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "http://tempuri.org", IsNullable = true)]
    public partial class Pets
{...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:07:27.497

要删除其中一个元素，您可以使用未包装的消息协定（用 装饰的类型`[MessageContract(IsWrapped = false)]`）。下面的代码显示了一项可以接收该请求的服务。

```
public class StackOverflow_12733486
{
    [ServiceContract(Namespace = "")]
    [XmlSerializerFormat]
    public interface ITest
    {
        [OperationContract]
        SavePetsResponse SavePets(SavePetsRequest request);
    }
    public class Service : ITest
    {
        public SavePetsResponse SavePets(SavePetsRequest request)
        {
            return new SavePetsResponse { Result = true };
        }
    }
    [MessageContract(IsWrapped = false)]
    public class SavePetsRequest
    {
        [MessageBodyMember]
        public Pets Pets { get; set; }
    }
    [MessageContract(WrapperNamespace = "")]
    public class SavePetsResponse
    {
        [MessageBodyMember]
        public bool Result { get; set; }
    }
    public class Pets
    {
        [XmlElement(ElementName = "Dog")]
        public string[] Dogs;
        [XmlElement(ElementName = "Cat")]
        public string[] Cats;
    }
    static Binding GetBinding()
    {
        var result = new BasicHttpBinding();
        return result;
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), GetBinding(), "");
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(GetBinding(), new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();
        Pets pets = new Pets { Cats = new string[] { "Max" }, Dogs = new string[] { "Fido", "Duke" } };
        proxy.SavePets(new SavePetsRequest { Pets = pets });

        ((IClientChannel)proxy).Close();
        factory.Close();

        WebClient c = new WebClient();
        c.Headers[HttpRequestHeader.ContentType] = "text/xml";
        c.Headers["SOAPAction"] = "urn:ITest/SavePets";
        string reqBody = @"<s:Envelope xmlns:s=""http://schemas.xmlsoap.org/soap/envelope/"">
                <s:Body>
                    <Pets>
                        <Dog>Fido</Dog>
                        <Dog>Duke</Dog>
                        <Cat>Max</Cat>
                    </Pets>
                </s:Body>
            </s:Envelope>";
        Console.WriteLine(c.UploadString(baseAddress, reqBody));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# iphone - 事件在 iphone 内部工作，但在 ipad ios6 中不起作用

> ID：12733488
> 
> 赞同：1
> 
> 时间：2012-10-04T18:27:35.820
> 
> 标签：iphone, xcode, ipad, uibutton, ios6

这会产生错误

Generate a project for iphone only withorientation Landscape left 和 Landscape Right
向界面生成器添加一个按钮
在 ipad 模拟器上运行
按下按钮，它不起作用。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:51:22.187

这解决了ios 6中的方向问题

```
-(NSUInteger)supportedInterfaceOrientations{ 
return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:01:53.550

在 ViewController 中实现该`supportedInterfaceOrientations`方法没有帮助。

一种解决方法是选择“通用”（iPhone + iPad）作为目标设备。

# ruby-on-rails - 传递多个参数 - Rails 控制器

> ID：12733492
> 
> 赞同：0
> 
> 时间：2012-10-04T18:27:54.377
> 
> 标签：ruby-on-rails

Newb RoR 开发人员在这里。

我有一个模型`size.rb`，它基本上有各种尺寸元素。

现在，在我随后的观点中，我有多组`radio_button_tags`. 由于每个集合都是独立的，我重命名了 each ( `shirtsize_ids`, `waistsize_ids`, 等)

现在，我遇到的问题是如何将所有这些不同`size_id`的参数传递给控制器​​。归根结底，它们都被记录为一个`size_id`名为 usersize 的联合模型中的属性，但是由于我必须在视图中区分它们（出于单选按钮的目的），所以我被卡住了！

谢谢您的帮助

**看法**

```
<% Size.select { |size| size.category == 'waist' }.sort.each do |size| %>
<%= radio_button_tag 'waistsize_ids[]', size.id, false, :id => "waistsizing-#{size.id}" %>
<% Size.select { |size| size.category == 'waist' }.sort.each do |size| %>
<%= radio_button_tag 'inseamsize_ids[]', size.id, false, :id => "inseamsizing-#{size.id}" %> 
```

**控制器**

```
def create
  @user_size = UserSize.new(params[:user_size])    
  params = {"waistsize" => {'id' => 'size.id'}}
  params.each do |size|

  UserSize.create(:size_id => size.id, :user_id => current_user.id)
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:39:24.337

`radio_button`vs`radio_button_tag`可能是更好的选择：

```
<%= radio_button :waistsize, :id, size.id, :checked => false, :id => "waistsizing-#{size.id}" %>
<%= radio_button :inseamsize, :id, size.id, :checked => false, :id => "inseamsizing-#{size.id}" %>

# => params = { ..., "waistsize"=>{"id"=>"xyz"}, "inseamsize"=>{"id"=>"xyz"} } 
```

然后，在控制器中：

```
def create
  @user_size = UserSize.new(params[:user_size])    
  UserSize.create(:size_id => params[:waistsize][:id], :user_id => current_user.id)
  UserSize.create(:size_id => params[:inseamsize][:id], :user_id => current_user.id)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:38:35.850

UserSize 模型是否类似于“size_type”，或者为什么你有“waistsize”和“inseamsize”等。

# wpf - 如何创建没有淡入淡出效果的 ColorAnimation

> ID：12733494
> 
> 赞同：1
> 
> 时间：2012-10-04T18:28:03.330
> 
> 标签：wpf

我想将矩形的背景颜色更改为绿色 1 秒，而不是将其更改回黑色。我想模拟灯的开或关——我不想让颜色淡入。下面的代码做了我想要的，除了它从黑色变为绿色，反之亦然。我绝对不想在 UI 线程上睡觉............

```
ColorAnimation animation = new ColorAnimation { From = Colors.Black, To = Colors.LightGreen, Duration = new Duration(TimeSpan.FromSeconds(1)), RepeatBehavior= new RepeatBehavior(1), AutoReverse=true };
SolidColorBrush activityLight = new System.Windows.Media.SolidColorBrush(Colors.Black);
ActivityIndicator.Fill = activityLight;
this.RegisterName("activityLight", activityLight);
ActivityStoryboard = new Storyboard();
ActivityStoryboard.Children.Add(animation);
Storyboard.SetTargetName(animation, "activityLight");
Storyboard.SetTargetProperty(animation, new PropertyPath(SolidColorBrush.ColorProperty)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:50:38.537

您可以使用[ColorAnimationUsingKeyFrames](http://msdn.microsoft.com/en-us/library/ms613802.aspx)：

```
var colorAnimation = new ColorAnimationUsingKeyFrames();
colorAnimation.KeyFrames.Add(
    new DiscreteColorKeyFrame(Colors.Green, TimeSpan.FromSeconds(0d)));
colorAnimation.KeyFrames.Add(
    new DiscreteColorKeyFrame(Colors.Black, TimeSpan.FromSeconds(1d)));

ActivityIndicator.Fill.BeginAnimation(SolidColorBrush.ColorProperty, colorAnimation); 
```

# asp.net - 如何让第二个 modalPopupExtender 打开？

> ID：12733496
> 
> 赞同：0
> 
> 时间：2012-10-04T18:28:08.717
> 
> 标签：asp.net, ajax, vb.net, visual-studio-2008

我有一个网页在同一页面上有两个 modalpopupextenders，它们都是使用 .show() 从代码隐藏调用的

但是，只有第一个这样的面板会打开，单步执行代码会发现第二个面板的 show() 被调用，但页面本身没有任何反应。存在所有适当的控件，例如 targetcontrolid 和 popupcontrolid。我在下面粘贴了两个扩展器控件，第一个是没有问题的。

```
<cc1:ModalPopupExtender TargetControlID="lbHidden1" ID="pnlEditNickname_ModalPopupExtender" BehaviorID="pnlEditNickname_ModalPopupExtender"
        runat="server" DynamicServicePath="" Enabled="True" BackgroundCssClass="modalBackground"
        PopupControlID="pnlEditNickname_Modal" DropShadow="false" CancelControlID="btnModalEditCancel">
        </cc1:ModalPopupExtender>

<cc1:ModalPopupExtender TargetControlID="hiddenLB2" ID="pnlCancelCert_ModalPopupExtender" BehaviorID="pnlCancelCert_ModalPopupExtender"
                runat="server" DynamicServicePath="" Enabled="True" BackgroundCssClass="modalBackground"
                PopupControlID="pnlCancelCertModal" CancelControlID="btnCancelCertDelete"  DropShadow="false">
            </cc1:ModalPopupExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:36:09.670

对于同一页面中的两个 ModalPopupExtender，您应该分配 unique `BehaviorID`。

# sql - How do i create a Job in SSRS?

> ID：12733505
> 
> 赞同：0
> 
> 时间：2012-10-04T18:28:53.673
> 
> 标签：sql, reporting-services

I have created a report and subscriptions but when I go to SQL Server 2008 R2 Management Studio and connect to Report Server I do not see anything under Jobs folder. When I right-click I do not see an option to create a Job. How do I make a job so that it shows under this folder?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:48:51.783

There are a couple of things you can check

1.  Is SQLAgent currently turned on?
2.  Is SQL Agent set to auto-start?
3.  Under what permissions (i.e. user account or proxy account) is SQLAgent set to run?
4.  What type of subscription did you create? scheduled? data-driven? (the latter is an enterprise-edition only feature)
5.  What delivery method for the subscriptions? to a folder? via email? If to a folder, does the SQLAgent account have the appropriate permissions to read/write on that shared folder? If via email, have you configured the SMTP settings in SSRS configuration tool?
6.  I am assuming that SSRS is installed in native (not SharePoint integrated mode) - is this correct? There are different set of troubleshooting steps if the latter

For completeness, [here's](http://msdn.microsoft.com/en-us/library/ms156307.aspx) an MSDN reference (step-by-step) on how to create a subscription. Also I assume that your user account has the appropriate permissions to create other types (that is, non-SSRS subscription jobs) of new jobs on your SQL Server instance via SSMS.

# c# - 如何将循环中的多个 linq 查询保存在单个变量中？

> ID：12733506
> 
> 赞同：0
> 
> 时间：2012-10-04T18:28:53.927
> 
> 标签：c#, asp.net, sql, linq

我认为可以将循环中的多个 linq 查询保存在单个变量中吗？

```
public ActionResult Index()
    {
        string ActiveUserId = (string)Session["ActiveUserGuid"];
        Guid MyGuid = new Guid(ActiveUserId);

        var queryRoots = from r in db.Roots
                         where r.UserId == MyGuid
                         select r.TaskId;

//Here is the questionable Part
        foreach (var i in queryRoots)
        {             
            var queryAllTasks = from t in db.Tasks
                                join b in db.Trees on t.TaskId equals b.ChildId
                                where b.TaskId == i
                                select t;
            tasksForView.Add(queryAllTasks); <---????? obviously doesnt work
        };

        return View(queryAllTasks);
    }

public class Root
{
    public int RootId { get; set; }

    public Guid UserId { get; set; }
    public User User { get; set; }  //navigation Property

    public int TaskId { get; set; } // composite key
    public int ChildId { get; set; }
    public Tree Tree { get; set; } //navigation Property
}

public class Tree
{
    public int TaskId { get; set; }
    public int ChildId { get; set; }
    public int Length { get; set; } //Path length

    public virtual ICollection<Root> Roots { get; set; }

} 
```

如果您想知道它应该做什么。我想从分层传递闭包表中查询几个子树并将它们返回到视图。

我知道我的代码还没有接近工作，我只是尝试了非常简单的解决方案！我想一种不同的查询方式可以一起解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:32:03.817

`Contains`在您的整数列表中使用：

```
var tasks = 
    from t in db.Tasks
    join b in db.Trees on t.TaskId equals b.ChildId
    where queryRoots.Contains(b.TaskId)
    select t;

return View(tasks); 
```

或在一个查询中完成所有操作：

```
var tasks = 
    from t in db.Tasks
    join b in db.Trees on t.TaskId equals b.ChildId
    join r in db.Roots on r.TaskId equals b.TaskId
    where r.UserId == MyGuid
    select t;

return View(tasks); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:32:31.957

这里的问题是您正在[关闭循环变量](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach)。LINQ 查询尽可能使用延迟执行，因此您只是定义查询是什么并存储它，而不是计算结果并存储它们。

您在这里有几个选择。您可以`ToList`在查询末尾添加一个；它会急切地评估它，并且存储该列表不会导致问题。

可能破坏的是您的查询正在使用`i`，它在循环中被更改。由于查询实际上不会评估`i`循环结束后的内容，`i`因此将始终具有最后一个值。这很容易通过在循环内添加一个新的局部变量并分配`i`给它来解决。在查询中使用该局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:49:26.973

正如其他人所说，`queryAllTasks`在循环的每次迭代中都推迟了执行。所以你存储的只是一个`IQueryable`.

你想要的是

```
tasksForView.Add(queryAllTasks.ToList()); 
```

另外，我注意到您正试图以`queryAllTasks`视图模型的形式返回，但该变量的范围仅限于 for 循环。我假设你想`tasksForView`作为你的模型返回（我进一步假设它在其他地方声明，因为我在你提供的代码中没有看到它的声明。）

# c++ - C ++中的稀疏非负最小二乘

> ID：12733510
> 
> 赞同：3
> 
> 时间：2012-10-04T18:29:18.827
> 
> 标签：c++, math, matrix, sparse-matrix

我正在寻找一个软件包来解决 C++ 中一个*非常大*的、稀疏的非线性最小二乘问题。我在 C++ 中遇到了大量现代 linalg 库（特征、犰狳、boost 等），但似乎没有一个内置这样的求解器（甚至是常规的最小二乘求解器）。我真的如果可能的话，喜欢避免对旧的 C / Fortran 接口进行大量混乱的调用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:55:01.827

我会简单地使用用 C++ 编写**的通用 NLP 求解器** [IPOPT 。](https://projects.coin-or.org/Ipopt)它是我尝试过的最强大的求解器，它可以成功地用于解决*非常大*的问题。

如果您使用通用IPOPT，需求的变化（例如添加约束）将没有问题。

求解过程中耗时的部分是在每个迭代步骤中求解线性系统，因此值得为您的平台获得最好的线性求解器 + LinAlg 包。

不幸的是，IPOPT 在内部调用 Fortran 子例程，因此您将需要一个有点痛苦的 Fortran 编译器。

如果 IPOPT 还不够，您将不得不寻找特定问题的解决者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T03:11:27.753

如果您不需要约束，请尝试[Ceres](https://code.google.com/p/ceres-solver/)或[g2o](https://github.com/RainerKuemmerle/g2o)。两者都建立在 Eigen 之上，并且可以利用稀疏矩阵求解器，即[SuiteSparse](http://www.cise.ufl.edu/research/sparse/SuiteSparse/)和朋友。

# apex-code - Visualforce 工具栏重新渲染 Firefox 错误

> ID：12733512
> 
> 赞同：0
> 
> 时间：2012-10-04T18:29:21.443
> 
> 标签：apex-code, visualforce

我有一个 Visualforce 工具栏，当我仅在 Firefox 中重新呈现页面块时，整个栏会垂直扩展到一个大的工具栏块。

请参阅下面的代码

```
<apex:toolbar id="theToolbar" style="background-color:#8d8d8d;background-image:none">
             <apex:toolbarGroup itemSeparator="line" location="left" id="toobarGroupForm">          
                  <apex:outputText style="color:#f8f8ff;font-weight:bold" value="Amount of Records"/>
                 <apex:selectList label="Record Amount" value="{!ShowAmountOfRecords}" size="1" required="false" >
                     <apex:actionSupport event="onchange" action="{!AmountOfRecordsAction}" reRender="innerblock" status="recordamountchange" />
                        <apex:outputPanel style="color:#f8f8ff;font-weight:bold">
                             <apex:actionStatus id="recordamountchange" startText="Showing more records..." stopText=""/>
                        </apex:outputPanel>
                     <apex:selectOptions value="{!AmountOfRecordsList}"/>
                  </apex:selectList>
                  <apex:outputText style="color:#f8f8ff;font-weight:bold" value="Filter By Document Type"/>
                  <apex:selectList label="Filter by Record Type" value="{!FilterByRecordType}" size="1" required="false" >
                     <apex:actionSupport event="onchange" action="{!FilterByRecordTypeAction}" reRender="innerblock" status="filterByRecordType" />
                         <apex:outputPanel style="color:#f8f8ff;font-weight:bold">
                             <apex:actionStatus id="filterByRecordType" startText="Filtering your records..." stopText=""/>
                        </apex:outputPanel>
                     <apex:selectOptions value="{!FilterByRecordTypeList}"/>
                  </apex:selectList>

              </apex:toolbarGroup>
            </apex:toolbar> 
```

这是 Firefox 中的已知错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:39:26.773

问题是我有同一个工具栏组的两个选项列表部分。确保将组件添加到不同的工具栏组。

```
<apex:toolbar id="theToolbar" style="background-color:#8d8d8d;background-image:none" rendered="true">
             <apex:outputText style="color:#f8f8ff;font-weight:bold" value="Amount of Records"/>
             <apex:toolbarGroup itemSeparator="line" location="left" id="toobarGroupForm" rendered="true">          
                 <apex:selectList label="Record Amount" value="{!ShowAmountOfRecords}" size="1" required="false" >
                     <apex:actionSupport event="onchange" action="{!AmountOfRecordsAction}" status="recordamountchange" reRender="innerblock" />
                        <apex:outputPanel style="color:#f8f8ff;font-weight:bold">
                             <apex:actionStatus id="recordamountchange" startText="Showing more records..." stopText=""/>
                        </apex:outputPanel>
                     <apex:selectOptions value="{!AmountOfRecordsList}"/>
                  </apex:selectList>
              </apex:toolbarGroup>
              <apex:outputText style="color:#f8f8ff;font-weight:bold" value="Filter By Document Type"/>
              <apex:toolbarGroup itemSeparator="line" location="left" id="toobarGroupForm2" rendered="true"> 
                  <apex:selectList label="Filter by Record Type" value="{!FilterByRecordType}" size="1" required="false"  >
                     <apex:actionSupport event="onchange" action="{!FilterByRecordTypeAction}" status="filterByRecordType" reRender="innerblock"/>
                         <apex:outputPanel style="color:#f8f8ff;font-weight:bold">
                             <apex:actionStatus id="filterByRecordType" startText="Filtering your records..." stopText=""/>
                        </apex:outputPanel>
                     <apex:selectOptions value="{!FilterByRecordTypeList}"/>
                  </apex:selectList>
              </apex:toolbarGroup>
            </apex:toolbar> 
```

# sql - 仅连接 ForeignKey 关系中的单行的查询

> ID：12733516
> 
> 赞同：1
> 
> 时间：2012-10-04T18:29:36.407
> 
> 标签：sql, django

我有以下模型（简化）：

```
class Category(models.model):
    # ...

class Product(models.model):
    # ...

class ProductCategory(models.Model):
    product = models.ForeignKey(Product)
    category = models.ForeignKey(Category)
    # ...

class ProductImage(models.Model):
    product = models.ForeignKey(Product)
    image = models.ImageField(upload_to=product_image_path)
    sort_order = models.PositiveIntegerField(default=100)
    # ... 
```

我想构建一个查询，该查询将获取与特定类别关联的所有产品。我想在查询集中仅包含*许多*相关图像中的一个（最低的图像），`sort_order`以便单个查询获取显示类别中所有产品所需的所有数据。

在原始 SQL 中，我可能会使用这样的`GROUP BY`东西：

```
SELECT * FROM catalog_product p 
LEFT JOIN catalog_productcategory c ON (p.id = c.product_id) 
LEFT JOIN catalog_productimage i ON (p.id = i.product_id) 
WHERE c.category_id=2 
GROUP BY p.id HAVING i.sort_order = MIN(sort_order) 
```

这可以在不使用原始查询的情况下完成吗？

**编辑**- 我应该注意到我尝试过的......

```
# inside Category model...
products = Product.objects.filter(productcategory__category=self) \
            .annotate(Min('productimage__sort_order')) 
```

虽然这个查询确实如此`GROUP BY`，但我看不到任何方法来（a）`ProductImage.image`进入 QuerySet，例如。`HAVING`条款。我正在有效地尝试从特定的 ProductImage 实例向 Product 实例（或 QuerySet）动态添加一个字段。这可能不是使用 Django 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:47:08.923

这不是一个原始查询，但也不是完全公共的 api。

您可以在评估之前将 group by 子句添加到查询集：

```
qs = Product.objects.filter(some__foreign__key__join=something)
qs.group_by = 'some_field'
results = list(qs) 
```

但请注意：这取决于 db 后端的行为不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:22:20.070

```
catagory = Catagory.objects.get(get_your_catagory)
qs = Product.objects.annotate(Min('productimage__sortorder').filter(productcategory__category = catagory) 
```

这应该只命中数据库一次，因为查询集是惰性的。

# ruby-on-rails - 交换两个模型之间关系的 RESTful 方式

> ID：12733517
> 
> 赞同：0
> 
> 时间：2012-10-04T18:29:44.647
> 
> 标签：ruby-on-rails, rest, updates

我有一个用户和一个班次。用户有很多班次。

```
class User < ActiveRecord::Base
  has_many :shifts
end

class Shift < ActiveRecord::Base
  belongs_to :user
end 
```

我的一个用户不能做他们的一个班次，所以想和另一个用户交换它。

什么是最好的方法来平静地做到这一点？看来我需要同时更新 2 个班次：需要交换的班次，然后是需要交换的班次。因此，这并不真正适合用于更改单个模型的`edit`and操作。`update`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:51:45.867

*这与单个资源的任何默认 RESTful 路由（成员*路由）都不完全吻合。一种可能性是添加一个新的 RESTful*收集*路由：

```
# routes.rb
resources :users do
  collection do
    post 'swap'
  end
end 
```

更多信息：http: [//guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:41:33.150

```
def change_shift(shift_id_or_object, alt_user)
  shift = Shift.find(shift_id_or_object) unless shift_id_or_object.respond_to? :user
  shift.user = alt_user
  shift
end 
```

# google-chrome - Vim：随时让 chrome 刷新：写

> ID：12733519
> 
> 赞同：7
> 
> 时间：2012-10-04T18:29:57.937
> 
> 标签：google-chrome, vim

[我想要一个执行 vim wiki here 中](http://vim.wikia.com/wiki/Automatically_refresh_display_of_html_on_saving_file)描述的解决方案，但它适用于 Chrome。

也就是说，我试图避免这种情况：

*   编辑您的 HTML/CSS 文件。
*   在 Vim 中点击保存。
*   `CMD/CNTRL/ALT`+`TAB`到 Firefox。
*   在 Firefox 中按下`Ctrl-R`以刷新。
*   `CMD/CNTRL/ALT`+`TAB`回到 Vim。
*   一遍又一遍地做，每次都畏缩一点。

vim wiki 解决方案适用于 firefox，而我在网上找到的其他脚本和解决方案仅适用于 Mac。但我在 Windows 上，通常会在屏幕的左半部分打开 vim（编辑 html），在屏幕的右半部分打开 chrome（显示我正在编辑的文件）。

一个真正“愚蠢”的解决方案对我来说很好。也就是说，vim 和浏览器之间甚至不需要文件名的通信。如果我可以在 vim 中打开一个模式，将其称为“自动刷新”，现在每当我在 chrome 中`:w`执行*当前活动的选项卡*时，它都会自行刷新，而不会将焦点从 vim 窗口中移开。那将是完美的。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:50:58.353

我不知道如何从 shell 重新加载给定的 chrome 页面，但是，我同意 Chiel92 的观点，如果您需要在文件更改时查看您的更改，您可以从浏览器中执行此操作。

请参阅[LiveReload](https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei)，适用于 Windows 和 Mac（当时不适合我）并支持 Safari 和 Chrome。

LiveReload 将检查您的主页以及它所依赖的所有 css 和 javscript，如果有任何更改，它将重新加载它。

他们似乎已经发布了第二个版本，但是第 2 版的官方网站已经离线，而且第 2 版似乎也没有在 github 上。（版本 1 它[在 github 上](https://github.com/mockko/livereload)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T14:40:52.340

可能对您有用的解决方案是在您的 html 编码中包含 head 标签中的行

```
 <meta http-equiv="refresh" content="30" /> 
```

现在，当您要部署它时，这将每 30 秒直接从 [w3schools.com重新加载页面，只需删除该行](http://www.w3schools.com/tags/att_meta_http_equiv.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-08T20:21:32.503

# 如果你在 mac 上工作，那么一点苹果脚本就可以完成这项工作。

将此功能放在您的 vim 配置中将使您自动执行在窗口之间切换和刷新您描述的过程。

```
function! ReloadBrowser()
    silent exe "!osascript -e 'tell app \"Firefox\" to activate\<cr>
            \tell app \"System events\"\<cr> keystroke \"r\" using command down\<cr>
            \end tell'"
    silent exe "!osascript -e 'tell app \"Iterm2\" to activate'"
endfunction 
```

调用该函数会将系统焦点更改为 Firefox，按 CMD-R 刷新页面，然后将焦点更改回 Iterm2。

更改“Firefox”和“Iterm2”以适应您的工作流程。

您可以在 vim 命令提示符中键入函数，`:call ReloadBrowser()`或使用如下映射触发调用：

```
nnoremap <leader>rl call ReloadBrowser()<cr> 
```

## 要在您编写文件的任何时候触发调用，您可以使用自动命令。

```
augroup AutoReload
    au!
    autocmd BufWritePost *.filetype call ReloadBrowser()
augroup END 
```

这可能会有点烦人，所以如果你真的想要这种行为，我认为最好让它像这样切换：

```
let s:auto_reload = v:false

function! ToggleAutoReload()
    if s:auto_reload
        augroup AutoReload
            au!
            autocmd BufWritePost *.filetype call ReloadBrowser()
        augroup END
    else
        augroup AutoReload
            au!
        augroup END
    endif
    let s:auto_reload = !s:auto_reload
endfunction 
```

有了它，您可以手动触发重新加载，`<leader>rl` 或者`:call ToggleAutoReload()`在保存文件时启用自动重新加载，`:call ToggleAutoReload()`完成后第二个将禁用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:08:34.000

我过去曾尝试过 LiveReload，但它不是一个非常可靠的解决方案：它有*很多*bug 和不稳定，而且安装过程太复杂，效果太差。

从那时起，（一年多）我一直在使用[一个小的 Chrome 扩展程序](https://chrome.google.com/webstore/detail/chromereload/njoipeaphfnaplplihpbgndfojhdhmjo/details)，它每秒自动重新加载网页`x`。它根本不是“智能”的，但它适用于本地文件和托管文件。我用过无数次，没有任何副作用。

Vim Wiki 上的那个解决方案是可能的，因为 MozREPL 允许外部进程与 Firefox 交互。从那里编写一个`autocmd`触发刷新 on`:w`或 on的代码非常简单`CursorHold`。但是 AFAIK 没有适用于 Chrome/Chromium 的此类工具，并且它们不提供外部 API。LiveReload 是一个出色但失败的 hack，我相信如果你必须使用 Chrome，你将不得不接受愚蠢的解决方案。

***编辑***

我只记得[有一个脚本](https://github.com/rynop/webrf)在这个 Linux 机器上运行良好，但在 Mac OS X 上有点受限，而且似乎在 Windows 上不起作用。本质上，您使用其名称的一部分注册一个窗口/选项卡：

```
$ webrf setup-by-search test.html 
```

那么您只需执行以下操作：

```
$ webrf refresh 
```

刷新页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-23T14:53:45.917

我使用 WSL 和两个屏幕，所以对我来说这很有效。（就像每个 :write 有点太多了）

```
nmap <leader>t :silent !powershell.exe -command "Add-Type -AssemblyName System.Windows.Forms; [Windows.Forms.Cursor]::Position = \"-1290,50\"; Add-Type -MemberDefinition '[DllImport(\"user32.dll\")] public static extern void mouse_event(int flags, int dx, int dy, int cButtons, int info);' -Name U32 -Namespace W; [W.U32]::mouse_event(6,0,0,0,0); [Windows.Forms.Cursor]::Position = \"40,40\"; [W.U32]::mouse_event(6,0,0,0,0);"<CR><CR> 
```

它基本上通过 powershell 命令告诉 vim 让鼠标光标转到：

1.  position -1290, 50 （chrome的刷新按钮所在的位置）
2.  鼠标左键单击
3.  位置 40,40（这是我的 vim 全屏显示的位置）
4.  鼠标左键单击

需要第 3 步和第 4 步来重新调整 vim 我尝试发送 ALT-TAB 但我的 vimrc 不喜欢 % 符号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-29T11:46:28.980

在 Windows 操作系统上，您可以使用[AutoHotKey](https://www.autohotkey.com/)脚本，该脚本将自动执行按键操作。
例如，下面的脚本将绑定`Left Alt + r`切换到浏览器窗口，发送一个`Control + r`（刷新）然后回到你之前的窗口。
加载页面后，替换`Title_of_your_webpage`为浏览器的窗口标题字符串。

```
!r::
    WinGet, winid, , Title_of_your_webpage
    WinActivate, ahk_id %winid%
    Send ^r
    Send !{Tab}
    Return 
```

# session - 释放会话对象

> ID：12733521
> 
> 赞同：2
> 
> 时间：2012-10-04T18:30:13.877
> 
> 标签：session, struts2, server-side, dispose

是否可以处理存储在 struts2 中的会话中的对象？

我想在会话中存储的一些对象具有需要释放的资源，但是当会话超时或关闭时，我找不到干净地处理它们的方法。

我意识到基于客户端的解决方案需要一个 javascript 计时器，但我现在并不担心客户端。我只是希望能够在会话超时时清理服务器端的资源。

我考虑过检查每个请求的会话（复数，因为可以有许多与不同客户端的并发会话）并执行后期清理，但此时会话映射已经消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:31:02.153

从同事那里找到答案。感谢您的建议。

看来解决方案是创建一个实现 HttpSessionListener 的类。此接口包含在创建和销毁会话时调用的函数。然后加：

```
<listener>
    <listener-class>my.package.listeners.TestSessionListener</listener-class>
</listener> 
```

到 web.xml 或您的 servlet 配置文件。

# iphone - Xcode 4.5：iphone 5.1 模拟器中的 NSLayoutConstraint 问题

> ID：12733522
> 
> 赞同：2
> 
> 时间：2012-10-04T18:30:13.787
> 
> 标签：iphone, ios, xcode, crash

**我收到一个错误**：

`Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason:`

```
'Could not instantiate class named NSLayoutConstraint' 
```

当我试图在**iPhone 5.1 模拟器**中运行我的应用程序时。它在我的 iOS 6.0 和 5.0 模拟器以及我的设备上运行良好。它在运行应用程序之前崩溃了，实际上它在启动屏幕上崩溃了。尝试删除该应用程序不起作用。它无法从设备中删除，所以我从*/User/"name"/library/application support/simulator/my app*中删除了它。如果我在模拟器中触摸 X，它会冻结。" `Autolayout`" 是**未选中**的，否则它根本不会运行。有没有人建议现在做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T19:37:00.967

只需从 FileInspector - InterfaceBuilderDocument 禁用自动布局，它也可以在 iOS 5 上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T03:20:19.263

如果您使用 Storyboard，则需要选择主 Storyboard，右键单击并选择`Show File Inspector`. 在 File Inspector 窗格中的 下`File Versioning > Document Versioning`，选择 iOS 5.x for Deployment 并取消选中`Use Autolayout`。

# iphone - 可以从我的应用程序中的多个类中将默认值注册到 NSUserDefaults 吗？

> ID：12733529
> 
> 赞同：9
> 
> 时间：2012-10-04T18:30:29.877
> 
> 标签：iphone, ios, ipad, nsuserdefaults, preferences

我已阅读并理解`NSUserDefaults`可用于将我的应用程序的首选项保存到文件系统的方式。我也意识到需要先注册默认值，然后再在应用程序中使用它们。

但是，我不确定是否可以在我的应用程序中注册各种类的默认值。例如，在`AppDelegate`我想注册属于整个应用程序的首选项，但在主题类中我想使用（并因此注册）仅用于获取和设置应​​用程序主题的首选项。就用户默认值而言，更多类将有自己的需求，因此这适用于我从事的任何项目的多个部分。

这种将偏好与它们属于正确工作方式的类保持一致的方式吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T20:02:17.087

是的，您可以注册多个类的默认值。当您注册一个新的默认值时，它只是将该新的键/值对添加到注册域（应用程序只有一个）。我认为你这样做的方式很合理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:38:36.743

NSUserDefaults 与整个应用程序相关。因此，在哪里读取/存储它们并不重要：即使将它们设置在另一个类中，任何类都可以看到这些键。

我个人尝试使用我自己的方案，因此相关的偏好可能是“接近”的。

IE：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:themePreferences forKey:@"Theme"];
[defaults setObject:otherPreferences forKey:@"Other"]; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T19:24:22.830

这不是必需的，但是如果您想按类对首选项文件进行分区，则可以将类名作为键的一部分。例如：

```
NSString *prefKey = [ NSString stringWithFormat: @"%s.prefName", (const char *) class_getName([ self class ]) ]; 
```

`prefName`您存储的任何首选项的名称在哪里。这样，您可以对不同的类使用相同的首选项名称，而不必担心它们会相互覆盖。但正如其他人所说，除非您有特定的需要这样做，否则`NSUserDefaults`可以从应用程序中的任何位置调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T18:36:43.643

如果您使用`[NSUserDefaults standardUserDefaults]`它将在整个应用程序中共享。您可以将自己的默认类用于特定于类的设置。

# javascript - 点击时，知道点击的元素是否是一个复选框？

> ID：12733536
> 
> 赞同：0
> 
> 时间：2012-10-04T18:31:20.070
> 
> 标签：javascript, jquery

我曾经使用以下内容来了解​​单击的项目是否是复选框：

```
if ($(e.target).className === 'checkbox') {} 
```

升级到最新版本的 jQuery 后，现在对于 Chrome、Safari 和 Firefox 返回 undefined。

确定单击复选框是否发生的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:32:25.147

尝试使用`.is`函数和`:checkbox`选择器

```
if ($(e.target).is(':checkbox')) {
   //it is a checkbox
} 
```

**演示：http:** [//jsfiddle.net/a5SbG/1/](http://jsfiddle.net/a5SbG/1/)

或者你可以试试

```
if (e.target.type == 'checkbox') { 
  //It is a checkbox
} 
```

**演示：http:** [//jsfiddle.net/a5SbG/](http://jsfiddle.net/a5SbG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T18:35:15.233

我觉得你把事情搞混了。

`className`是元素的属性，而不是 jQuery 对象。因此，如果您真的想在没有 jQuery 的情况下获得课程，您可以使用：

```
e.target.className == "checkbox" 
```

但问题在于`className`可能是多个由空格分隔的类，因此您需要使用正则表达式或类似的东西来实际找到它。

如果您想在 jQuery 中执行此操作，我会使用：

```
$(e.target).hasClass("checkbox") 
```

如果你真的在寻找一个复选框元素，你可以使用以下任何一种：

```
e.target.tagName.toLowerCase() == "input" && e.target.type.toLowerCase() == "checkbox"
$(e.target).is("input:checkbox")  // jQuery docs for :checkbox selector suggest including "input"
$(e.target).is('[type="checkbox"]')  // jQuery docs also suggest to use this instead of the above because it's faster than :checkbox in modern browsers 
```

[http://api.jquery.com/checkbox-selector/](http://api.jquery.com/checkbox-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:34:46.980

使用直接 JS，我通常会这样做：

```
var eTarget = e.target !== null ? e.target : e.srcElement;

if (eTarget.type === 'checkbox') { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T18:51:51.453

```
 $(document).ready(function () {
       $("input:checkbox").click(function () {
           if ($(this).is(":checked")) {
               //Do Stuff if Checked
           } 
       });
   }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T18:56:11.243

这似乎对我有用：

```
window.addEventListener('load', function () {

    function onClick() {
        if (this.tagName.toUpperCase() === 'INPUT' && this.type.toUpperCase() === 'CHECKBOX') {
            console.log([this.tagName, this.type])
        } else {
            console.log("HTML Element has Wrong tag or type");
        }
    };

    document.getElementById("myCheckBox").addEventListener('click', onClick);
    document.getElementById("myButton").addEventListener('click', onClick);
}); 
```

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <label><input id="myCheckBox" type="checkbox" />Click Me!</label>
    <input type="button" id="myButton" value="Click Me!" />
    <script type="text/javascript" src="detectElementType.js"></script>
</body>
</html> 
```

在此处查看实际操作（在 Chrome 中按 F12 以查看控制台，或打开 FireBug 控制台等）：

[http://www.sanbarcomputing.com/flat/forumPosts/detectElementType/detectElementType.html](http://www.sanbarcomputing.com/flat/forumPosts/detectElementType/detectElementType.html)

并非所有浏览器都支持 addEventListener()（ECMAScript 5 中的新功能），但具有优势。在此处查看有关事件处理程序的文章：

[http://www.javascripter.net/faq/addeventlistenerattachevent.htm](http://www.javascripter.net/faq/addeventlistenerattachevent.htm)

# php - 在 PHP 中调用 JSON 调用的常见做法是什么？

> ID：12733538
> 
> 赞同：0
> 
> 时间：2012-10-04T18:31:24.813
> 
> 标签：php, json, rpc

我正在尝试制作一个 JSON 调用库。它具有以下特点。

*   能够自定义标题
*   能够 POST 任何数据到服务器（包括表单编码（`a=1&b=2&c=3`）和 JSON 数据块）
*   解析响应并作为 JSON 对象返回

我在其他问题中搜索，发现只有两个答案。

*   使用`file_get_contents()`. 这种方式非常简单易用；但是，除了获取内容之外，您无能为力——您无法添加标题，无法使用 POST。但它通常被所有服务器支持。
*   使用卷曲。这种方式看起来很强大，你几乎可以用它做任何事情。缺点是你必须在你的服务器上安装 libcurl 和 php-curl 支持，这意味着你不能在没有安装 curl 的服务器上使用它。

那么，如果我想开发一个可以在大多数服务器上使用的通用库，是`curl`一个不错的选择吗？

还有其他方法可以做到这一点吗？

* * *

简而言之，我正在寻找`urllib2`Python 的 PHP 版本——易于使用、功能强大且可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:45:33.563

您有两个选择：[`curl`](http://bg2.php.net/manual/en/book.curl.php)和[HTTP 流上下文选项](http://bg2.php.net/manual/en/context.http.php)。两者都可以完成您所描述的；`curl` *可能*不会随处安装，而流上下文是核心功能并且始终可用。

实际上，你也可以使用[sockets](http://php.net/manual/en/book.sockets.php)来实现你的库，这会做更多的工作，但如果你需要对你的请求做更奇怪的事情，可能会让你更好地控制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T18:53:49.357

据我所知，curl 主要包含在许多服务器上，因为它本机支持 4.0.2 PHP 版本。还有一个原生 php 函数[header](http://www.php.net/manual/en/function.header.php)，它通过简单地使用这样的 -> 等来自定义您的响应的`header('location: index.php')`标题`header('cache-control: ok')`。[您可以在php.net](http://php.net/manual/en/ref.network.php)上查看网络功能部分

# python - ArcGIS 10 中的 Python 脚本正在使用模块 re 并返回“未定义全局名称‘re’”

> ID：12733539
> 
> 赞同：1
> 
> 时间：2012-10-04T18:31:43.283
> 
> 标签：python, arcgis, calculated-field, arcpy

我是 python 脚本的新手，我主要在 ArcGIS 10 中使用它。我的脚本应该重新格式化字段 CINTP1 中的字符串。一个示例是“000000100”并返回“1.00”。我已将它导入到工具箱中，以便在表 'MAPCHAR' 中的选定记录上运行。我不断收到的错误是：

：错误000539：错误运行表达式：removeLeadingZeros（“000000100”）：未定义全局名称're'执行失败（CalculateField）。

执行失败（脚本）。

这是我的脚本：

```
import arcpy, re, sys, string, os

MAPCHAR = "MAPCHAR"

CINPT1 = "CINPT1"

expression = "removeLeadingZeros(!CINPT1!)"
codeblock = """def removeLeadingZeros(myValue):
    newValue = re.sub('^0+',"",myValue)

    valueList = list(newValue) #convert newValue to List
    valueList.insert(-2, '.') #insert the '.' characater int the list at the -2 position

    newValue = "".join(valueList) #join back to create the new  updated string

    myvalue = newValue"""

arcpy.CalculateField_management(MAPCHAR, CINPT1, expression, "Python", codeblock) 
```

任何帮助将不胜感激..谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:37:09.280

你应该在下面的代码块中有你的导入语句。所以`import re`在代码块的第一行添加一个： -

```
codeblock = """import re
    def removeLeadingZeros(myValue):
        newValue = re.sub('^0+',"",myValue)

        valueList = list(newValue) #convert newValue to List
        valueList.insert(-2, '.') #insert the '.' int the list at the -2 position

        newValue = "".join(valueList) #join back to create the new  updated string

        myvalue = newValue""" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:36:45.793

看起来您正在`codeblock`arcpy 命名空间中运行。如果 arcpy 中没有`import re`，将`codeblock`无法工作。

顺便说一句，您不需要正则表达式来删除前导零 - 只需转换为 int。使用扳手敲钉子的经典例子。

# c++ - 在 basic_string 中查找 STL::Exception 的来源

> ID：12733548
> 
> 赞同：0
> 
> 时间：2012-10-04T18:32:09.717
> 
> 标签：c++, linux, string, exception, std

我正在尝试跟踪 std::exception 的来源，在 basic_string::erase 中，我将我直接调用擦除的所有位置包装在 try/catch 中，并且没有看到任何这些 catch 块被击中，所以它必须从另一个 basic_string 方法内部调用。该异常似乎是我正在使用的代码中竞争条件的结果，因此很难重现，关于我如何检测和/或从此异常获取堆栈跟踪的任何想法？顺便说一句，这是 x86 linux 机器上的 c++ 代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:37:12.120

你应该试试

(gdb) 接球

然后 gdb 会在每次抛出异常时触发断点。你会看到一个调用栈。

编辑：这篇文章是调试异常的一大堆技巧：[GDB：抛出特定异常类型时如何中断？](https://stackoverflow.com/questions/6835728/gdb-how-to-break-when-a-specific-exception-type-is-thrown)

# ruby-on-rails - 在 EC2 上扩展 Rails 应用程序。这是正确的方法吗？

> ID：12733549
> 
> 赞同：0
> 
> 时间：2012-10-04T18:32:13.970
> 
> 标签：ruby-on-rails, database, amazon-ec2, scalability, decoupling

所以我有一个 Rails 应用程序。它目前作为前端和后端+数据库单独运行。

我需要扩展它以拥有多个后端服务器。

后端服务器运行着 Resque 后台工作程序（由用户前端请求产生）。它还严重依赖回调。

我正在计划以下设置：

```
|front-end| --- |load-balancer (haproxy or AWS ELB)| --- Server 1 ---- Postgresql Database (+++ other DBs added via replication later if needed)
                                                    \___ Server 2 ---/
                                                                    ++ (other servers added in the same fashion later ) 
```

在这种情况下，我担心如何处理将数据库放在单独的机器上。

1) 我打算创建一个新的空 Rails 应用程序，其架构与初始后端相同。让它运行并通过 HTTP 接受更新/发布，并通过远程 SSH 保持连接（在后端触发 :after_commit 回调）。这是一个更好的主意吗？

2）我正在使用 Postgresql，并打算在需要时切换到企业数据库。目前需要扩展后端处理而不是数据库的部分。

3) 这种方法看起来是否可扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:42:29.537

我不确定我是否真的理解你的问题。通常在生产应用程序中，数据库层与应用程序层是分开的。我不能完全确定这是否与您有关，但这绝对是一块有趣的手表。[http://vimeo.com/33263672](http://vimeo.com/33263672)。它讨论了在 rails 和 db 层之间使用 redis 层来促进排队，并创建零停机环境。似乎它比使用第二个导轨堆栈更好？我认为它应该看起来像这样；

|ELB| 网络服务器 |ELB| 应用服务器 |RRDNS| Redis 服务器 | PostGreSQL 服务器 |

如果我理解你的意思。如果没有，该视频链接仍然值得一看:)

# c++ - 最快的 C++ 有理数库

> ID：12733557
> 
> 赞同：0
> 
> 时间：2012-10-04T18:32:28.247
> 
> 标签：c++, performance, gmp, rational-numbers

我正在使用[GMP的](http://gmplib.org/)[GMPXX](http://gmplib.org/manual/C_002b_002b-Interface-Rationals.html#C_002b_002b-Interface-Rationals)包装器，但速度不够快。是否有可能找到一些有理数库速度的比较？

在我的计算过程中，会出现一个非常大的有理数，分母为 10^100，分子大小相同。

你知道比GMP更快的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T19:22:17.187

> 你知道比GMP更快的东西吗？

看来 Haskell 的人面临着与你类似的问题。以下是他们的笔记：

*   [http://hackage.haskell.org/trac/ghc/wiki/ReplacingGMPNotes](http://hackage.haskell.org/trac/ghc/wiki/ReplacingGMPNotes)
*   [http://hackage.haskell.org/trac/ghc/wiki/ReplacingGMPNotes/PerformanceMeasurements](http://hackage.haskell.org/trac/ghc/wiki/ReplacingGMPNotes/PerformanceMeasurements)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-10-04T18:59:05.030

有理数是浮点数/双精度数，问题基本上是基数 2（计算机使用）与基数 10（人类在经典数学演算中使用），最终获得通用有理数的良好**表示**是很好的挑战，考虑到大小为 10^100 的值，这将成为一个非常好的挑战。

我认为您应该暂停一分钟并考虑一下，因为由 10^100/10^100 生成的浮点数可能非常巨大，而在我看来，用计算机执行此操作对于一个非常先进的实验室来说是这样的，你不能期望图书馆能够高效地解决此类问题，最重要的是能够以如此大的幅度解决此类问题。

[进一步阅读](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal/3448855#3448855)

# ios - 在 UIWebView 中隐藏移动 Twitter 品牌栏？

> ID：12733558
> 
> 赞同：1
> 
> 时间：2012-10-04T18:32:29.807
> 
> 标签：ios, xcode, mobile, twitter, uiwebview

我有一个链接到移动 Twitter 页面的 UIWebView，它在顶部显示了[这个栏。](http://i.imgur.com/OEdJw.jpg)我想删除它，这样它就不会限制观看空间但没有任何运气。我试图在加载后将 javascript 传递给页面以隐藏它，但它不起作用。

我在[这里](http://dogboystudios.com/removing-html-elements-from-a-uiwebview)使用示例：

```
- (void)hideUnwantedHTML{

[self.webView stringByEvaluatingJavaScriptFromString:@"var script = document.createElement('script');"  

    "script.type = 'text/javascript';"  

    "script.text = \"function hideID(idName) { "  

    "var id = document.getElementById(idName);"  

    "id.style.display = 'none';"

 "}\";" 

 "document.getElementsByTagName('head')[0].appendChild(script);"];  

[self.webView stringByEvaluatingJavaScriptFromString:@"hideID('brand_bar');"];    
} 
```

和：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

[self hideUnwantedHTML];

} 
```

我也用 getElementByClassName 和 getElementByTagName 尝试过，但没有任何效果。有任何想法吗？

# google-analytics - Google Analytics：报告在同一会话中访问页面 A 和页面 B 的用户的简单方法？

> ID：12733561
> 
> 赞同：0
> 
> 时间：2012-10-04T18:32:33.617
> 
> 标签：google-analytics, web-analytics, visitor-pattern

我知道所有新的 GA 报告，例如访问者流量、目标​​跟踪等，但是有没有一种简单的方法可以跟踪用户在同一会话中访问 PageA 和 PageB？我不在乎他们采取了什么路径，或者一个是退出页面还是入口页面。我只是想知道在会话的某个时间点同时访问了 PageA 和 PageB 的访问者数量（即使他们在之前、之间或之后访问了 Page C、Page D 和 Page E）。

这可以以某种方式在自定义报告中完成，哪个更可取？如果我需要使用正则表达式也可以。还是我可能需要设置过滤配置文件？

非常感谢您！

格伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:05:19.970

您只需创建一个高级细分（点击“标准报告”标签下顶部的“高级细分”，然后点击右侧的“创建新细分”）。

本段条件：

包含第 1 页并包含第 2 页

完毕。

* * *

链接到 Google 的[高级细分文档](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033017)

# c++ - matlab 内置函数是用一些较低级别的语言编写的吗？

> ID：12733565
> 
> 赞同：6
> 
> 时间：2012-10-04T18:32:39.370
> 
> 标签：c++, matlab

为什么 Matlab 中的内置函数比您自己编写的函数快得多？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T18:37:06.480

是的，`matlab`类似的人通常将包装函数用于以低级语言（通常`Fortran`）编写的线性代数库例程，例如`BLAS`,`ATLAS`或`LAPACK`.

[您可以在此处](http://www.mathworks.com/company/newsletters/news_notes/clevescorner/winter2000.cleve.html)阅读有关此内容的更多信息

如果您好奇函数包装成本有多少开销（基本上没有），也可以看看[这个问题。](https://stackoverflow.com/questions/7596612/benchmarking-python-vs-c-using-blas-and-numpy)结果适用于`C++`，`python`但`numpy`我相信它们也适用于 matlab。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:36:40.783

简而言之，因为它们将用本机代码 (C/C++) 编写，因此允许开发人员访问对数据的汇编程序优化，以及使用 SSE 和类似的能力来尝试和并行化 CPU 内的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:37:19.273

是的，这些矩阵函数很可能是用 C、C++ 甚至汇编编写的。C 和 C++ 代码甚至可以利用 SIMD（单指令多数据）过程，如 SSE（来自英特尔）。

# php - 在浏览器中查看 Word 文件

> ID：12733566
> 
> 赞同：-1
> 
> 时间：2012-10-04T18:32:42.880
> 
> 标签：php, jquery

> **可能重复：**
> [word文档查看器浏览器插件](https://stackoverflow.com/questions/5001497/word-document-viewer-browser-plugin)

我想在前端（浏览器）上查看用户上传的 docx 文件。对 jQuery 或 flash 或 PHP 的任何推荐。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:37:00.310

是的。您可以使用 Flash 或 PHP... 或几乎任何现代语言来完成

1.  解码上传的文件，提取文本、格式和图形
2.  从此信息创建图像或 pdf
3.  在浏览器中显示#2

# android - 如何在扫描时读取 Android 中的蓝牙 LE 广告数据

> ID：12733567
> 
> 赞同：8
> 
> 时间：2012-10-04T18:32:42.893
> 
> 标签：android, bluetooth

低功耗蓝牙设备可以向其他设备广播消息。该消息包可以包括长度、配置文件、rssi（信号强度）等信息。

在 Android 中扫描 BLE 设备时，如何读取那些蓝牙 LE 广播数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-11T02:23:15.970

**API 级别 21+**

在 **android.bluetooth.le.ScanCallback**中，如下回调方法有一个名为**result**的参数，其中有一个名为**scanRecord**的字段，其中应该包含 BLE 设备发送的广告数据。

```
void onScanResult (int callbackType, ScanResult result) 
```

**API 级别 18-20**

在**BluetoothAdapter.LeScanCallback**中，如下回调方法有一个名为**scanRecord**的参数，该参数应包含 BLE 设备发送的广告数据。

```
public abstract void onLeScan (BluetoothDevice device, int rssi, byte[] scanRecord) 
```

**scanRecord：**远程设备提供的广告记录的内容。

# c# - 为什么 .NET 框架不提供深度复制对象的方法？

> ID：12733571
> 
> 赞同：6
> 
> 时间：2012-10-04T18:32:53.923
> 
> 标签：c#, .net, deep-copy

前几天我使用自定义方法来深度克隆对象，我知道你可以用不同的方式进行深度克隆（反射、二进制序列化等），所以我只是想知道：

Microsoft 没有在框架中包含深拷贝方法的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T18:57:25.227

这个问题比你想象的要困难得多，至少在一般情况下是这样。

对于初学者来说，副本不只是深或浅，它是一个频谱。

让我们想象一下，我们有一个字符串数组列表，我们想要复制它。

*   我们从最浅的层次开始，我们只是将整个事物的引用复制到另一个变量。对从任一变量引用的列表所做的任何更改都会被另一个变量看到。

*   所以现在我们去创建一个全新的列表来给第二个变量。对于第一个列表中的每个项目，我们将其添加到第二个列表中。现在我们可以修改从任一变量引用的列表，而不会被另一个变量看到。但是，如果我们获取列表的第一项并更改第一个数组中的字符串，这两个列表都会看到它！

*   现在我们正在创建一个新列表，对于第一个列表中的每个数组，我们正在创建一个新数组，将底层数组中的每个字符串添加到新数组中，并将这些新数组中的每一个添加到新列表。现在我们可以改变任一列表中的任何数组，而不会看到变化。但是等等，两个列表仍然引用相同的字符串（毕竟它们是值类型；它们内部有一个用于数据的字符数组）。如果某个卑鄙的人出现并改变其中一个字符串怎么办（使用不安全的代码，您实际上可以做到这一点）！因此，现在您正在使用深层副本复制所有字符串。但是如果我们不需要这样做呢？如果我们知道没有人如此卑鄙以至于他们会改变字符串怎么办？或者，就此而言，*应该*由两个列表反映出来）。

然后当然会出现循环引用、类中的字段等问题，这些字段并不能*真正*代表它的状态（即，可能是缓存值或派生数据，可以根据需要由克隆重新计算）。

实际上，您需要实现每种类型`IClonable`或等效的类型，并拥有自己的自定义代码来克隆自身。对于一门语言来说，维护这将是*很多*工作，特别是因为有很多方法可以克隆复杂的对象。成本会相当高，而且好处（除了少数认为值得为其实现克隆方法的对象之外）通常不值得。作为一名程序员，你根据你知道你需要走的深度编写你自己的克隆类型的逻辑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T18:41:43.137

它类似于它在 C 和 C++ 中的工作方式（或不工作方式）：

要进行深度复制，您实际上必须知道如何解释不同的数据。在普通情况下，浅拷贝（已提供）与深拷贝相同。但是一旦这不再是真的，它真的取决于实施和解释。没有一般的经验法则。

让我们以一个游戏为例：

*   NPC 对象有两个整数作为成员。一个整数代表它的生命值，另一个是它的唯一 ID。
*   如果克隆 NPC，则必须保持生命值，同时更改唯一 ID。这是编译器/运行时无法自行确定的。您必须对此进行编码，本质上是告诉程序“如何复制”。

我可以想到两种可能的解决方案：

*   添加关键字来表示无法复制的内容。虽然这听起来是个好主意，但它并不能真正解决问题。你可以告诉编译器`UniqueID`不能复制，但同时你不能定义这应该如何发生。即使你可以，你也可以...
*   创建复制构造函数 (C++) 或复制/克隆对象的方法（C#，例如`CopyTo()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:37:21.720

嗯..我的观点是：

A) 因为你很少希望副本真的很深
B) 因为框架不能保证知道如何真正有意义地克隆一个对象
C) 因为以一种简单的方式实现深度克隆很简单并且需要一个方法和几行使用反射和递归的代码

但我会尝试找到一篇涵盖该内容的旧 MSDN 文章

编辑：我还没有找到:(我仍然确定我在某处看到它，但我现在不能用谷歌搜索它。但是一些关于相关 ICloneable 和派生的有用链接：

[http://blogs.msdn.com/b/brada/archive/2004/05/03/125427.aspx](http://blogs.msdn.com/b/brada/archive/2004/05/03/125427.aspx) [http://blogs.msdn.com/b/mrtechnocal/archive/2009/10/19/why-not -icloneable-t.aspx](http://blogs.msdn.com/b/mrtechnocal/archive/2009/10/19/why-not-icloneable-t.aspx) [https://stackoverflow.com/a/3712564/717732](https://stackoverflow.com/a/3712564/717732)

所以，由于我没有找到作者的话，让我扩展点：

A：因为很少你想让副本真的很深

你看，框架怎么能猜出它一般应该有多深呢？让我们假设完全深入并假设它已经实现。现在我们有了按成员克隆和完全克隆方法。尽管如此，在某些情况下，人们需要克隆我但不是根基。因此，他们发布了另一个问题，为什么全克隆无法切断原始碱基。或次生。等等。从 .Net 团队的角度来看，提供深度克隆几乎不能解决任何问题，因为我们这些用户仍然会因为看到一些部分工具并且很懒惰并且想要拥有一切而对此大发雷霆：）

B）因为框架不能保证知道如何真正有意义地克隆一个对象

尤其是一些带有句柄或类似本机 ID 的特殊对象，例如来自 Entity Framework、.Net 远程代理、COM 包装器等的对象：您可能会成功读取并克隆上层层次结构层，但最终，您会在下面的某个地方找到一些神秘的东西就像`IntPtr`你只**知道**你不应该复制的那样。大部分的时间。但有时你可以。但是框架的代码必须是通用的。深度克隆要么必须非常复杂，需要对具有特殊外观的类成员进行许多健全性检查，要么如果程序员在具有程序员不想分析的基类的东西上调用它，则会产生危险的结果。

B+) 另外，请注意，树中的基类越多，它们就越有可能具有一些参数化的构造函数，这可能表明直接复制不是一个好主意。可直接复制的类通常具有无参数的构造函数和属性可访问的所有可复制数据。

B++) 从框架设计者的角度来看，考虑到内存和速度，浅拷贝几乎总是非常快，而深拷贝正好相反。不允许开发人员自由地深度复制巨大的对象，这有利于框架和平台的声誉。无论如何，如果你的对象是轻量级和简单的，你会需要一个深拷贝，对吧？:) 不提供深拷贝会鼓励开发人员考虑深拷贝的需求，这通常会使应用程序更轻、更快。

C）因为以一种简单的方式实现深度克隆很简单，并且需要一个方法和几行代码，使用反射和递归

有了浅拷贝，真正写深拷贝有多难？没那么难！只需实现一个给定对象'obj'的方法：

```
pseudocode:
object deepcopier(object obj)
    newobject = obj.shallowcopy()
    foreach(field in newobject.fields)
        newobject.field = deepcopier(newobject.field)
    return newobject 
```

好吧，就是这样。当然，字段枚举必须由反射执行，并且还必须读取/写入字段。

但是，这种方式非常幼稚。这有一个严重的缺陷：如果某个对象有两个指向同一个对象的字段怎么办？我们应该检测到它并进行一次克隆，然后将两个字段都分配给那个克隆。此外，如果某个字段指向的对象引用了另一个对象（...）也指向的某个对象 - 也可能只需要跟踪和克隆一次。另外，周期呢？如果在树深处的某个地方，一个对象有一个对根的引用？像上面这样的算法会很高兴地下降并重新复制所有内容，然后再一次，最终会被 StackOverflow 阻塞。

这使得克隆很难被跟踪，并且开始看起来更像是序列化。实际上，如果您的类是 DataContract 或 Serializable，您可以简单地对其进行序列化和反序列化以获得完美的深层副本 :)

深度克隆很难以通用的方式进行，除非您知道对象的含义及其所有字段的含义，并且知道哪些应该真正被克隆，哪些应该被统一。如果您作为开发人员知道这只是一个可以完全安全地进行深度克隆的数据对象，那么为什么不将其设为可序列化呢？如果您不能使其可序列化，那么您可能也无法对其进行深度克隆！

# python - 通过 ConfigParser 使用字典理解

> ID：12733574
> 
> 赞同：0
> 
> 时间：2012-10-04T18:33:09.417
> 
> 标签：python, python-2.7

通过以下示例，我可以从`[section1]`. 我如何为其他部分或更多部分执行此操作？

**store.config**

```
[section1]
field_a = hello
field_b = galaxy

[section2]
field_a = hello
field_b = galaxy

[section3]
field_a = hello
field_b = galaxy 
```

**主文件.py**

```
from ConfigParser import SafeConfigParser

class Main:

   def get_properties(self, section, *variables):
        cfgFile = 'c:\store.config'
        parser = SafeConfigParser()
        parser.read(cfgFile)
        properties= variables
        return {
            variable: parser.get(section,variable) for variable in properties
        }

   def run_me(self):
        config_vars= self.get_properties('section1','field_a')
        print config_vars

op=Main()
op.run_me() 
```

电流输出：

```
{'section1': 'field_a'} 
```

这将帮助我改进在[Using var from from function A to function B](https://stackoverflow.com/questions/12730524/using-var-from-from-function-a-to-function-b)后给出的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:38:45.437

我相信你正在寻找你[的`sections`方法](http://docs.python.org/library/configparser.html#ConfigParser.RawConfigParser.sections)`SafeConfigParser`。对于您的示例，它应该返回`['section1', 'section2', 'section3']`，您可以对其进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:53:30.480

解决方案：

```
def run_me(self):
    config_vars= self.get_properties('services','package_install','package_info')
    convig_vars_2 = self.get_properties('network','proxy_server','proxy_user') 
```

就这么简单。

# php - 可以从 wordpress 循环中的帖子中获取关键字

> ID：12733579
> 
> 赞同：0
> 
> 时间：2012-10-04T18:33:24.423
> 
> 标签：php, wordpress

如果有人可以帮助我，那就太好了。

我正在使用 wordpress 为我当地的足球队做一个网站，他们希望能够创建带有描述性比赛报告的常规帖子。没关系。但他们也希望某些信息出现在另一个页面上，其中包含匹配报告列表，就好像它在表格中一样，只有关键的相关信息，例如... 场地 | 事业部 | 主队 | 3 2 |客队 | 报告链接|

其中一些会很好，即日期和报告链接，但问题是其他信息非常具体，不像包括`the_title`或其他内容那么简单。

他们帖子的标题看起来与桌面上的标题不同。所以代替`the_content`,`the_title`等，我想知道是否有可能获取`the_content`. 还是我想做的事情很复杂？我想知道是否可以使用标签来实现这一点？我希望这对他们来说尽可能容易。我真的很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:40:02.223

您可以使用正则表达式来解析内容，但这不是推荐的方法。

最简单的方法是使用“自定义字段” [http://codex.wordpress.org/Custom_Fields](http://codex.wordpress.org/Custom_Fields)

然后使用

```
get_post_custom($post_id) 
```

获取所有不同标签的数组，然后在表格中显示 em。

/R

# php - 在 Windows XP 中使用 PHP 重新启动 Apache2

> ID：12733581
> 
> 赞同：0
> 
> 时间：2012-10-04T18:33:34.240
> 
> 标签：php, apache

我有一个 PHP 文件，执行时必须重新启动 Apache。我尝试如下：我输入了最后一行：

```
exec('C:\apache2restart.bat'); 
```

和文件。蝙蝠

```
net stop apache2 && net start apache2 
```

但它只是停止 Apache，并没有重新启动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:48:01.267

如果仅包含启动命令的文件有效，那么我建议您输入

```
 sleep 10 
```

在两个命令内（或超过 10 个！只需检查停止需要多长时间，然后调整它）以使批处理等待 10 秒。告诉我，我很好奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:31:12.190

尝试执行一个单独的批处理文件来执行重启脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:34:49.903

将文件更改为

```
net stop apache2
net start apache2 
```

# javascript - 我可以使用 python 连接到 https websocket 吗？

> ID：12733582
> 
> 赞同：1
> 
> 时间：2012-10-04T18:33:36.503
> 
> 标签：javascript, python, websocket, socket.io

我一直在使用 python 连接到`ws://`websocket 流，并使用[websocket-client](http://pypi.python.org/pypi/websocket-client/0.7.0)取得了巨大的成功。但是，当我尝试连接到`https://`-schemed 流时，该库抱怨`https`不受支持。[此](https://bitfloor.com/docs/api/market-data/websocket#book)页面似乎表明可以通过 https 使用 javascript 中的 socket.io 连接到这样的流。

我不是 javascript 大师，所以我可能在这里遗漏了一些微妙之处，但这可以在 python 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:41:53.643

似乎我混淆了使用标准协议实现的 websockets 和 socket.io 套接字，它们似乎实现了服务器和客户端之间的握手以消除浏览器的不兼容性。

Python 有一个很好的 websockets 实现，但似乎没有一个好的 socket.io 套接字实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:45:20.700

websockets的安全[URI 方案](http://en.wikipedia.org/wiki/WebSocket#URI_scheme)是`wss://`

尝试使用`wss://`而不是连接`https://`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-04T18:42:22.310

在 python 中，您可以使用[urllib2](http://docs.python.org/library/urllib2.html)连接到 https url。例如，您可以执行以下操作：

```
import urllib2

conn = urllib2.urlopen("https://www.google.com/")
content = conn.read()
print(content) 
```

# svg - 带有 d34raphael 的饼图

> ID：12733583
> 
> 赞同：2
> 
> 时间：2012-10-04T18:33:41.010
> 
> 标签：svg, raphael, d3.js, vml

我需要绘制一个适用于 IE 8 的饼图，所以我使用的是 d34raphael。

目前这是我的代码，它是从 d3 饼图示例[https://raw.github.com/mbostock/d3/master/examples/pie/pie.html修改的](https://raw.github.com/mbostock/d3/master/examples/pie/pie.html)

```
var width = 300,
    height = 300,
outerRadius = Math.min(width, height) / 2,
innerRadius = outerRadius * .6,
data = d3.range(10).map(Math.random),
color = d3.scale.category20(),
donut = d3.layout.pie(),
arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);

// #chart is a div
var paper = new Raphael($('#chart')[0], width, height);
var svg = d3.raphael(paper);

 paper.setStart();

 var vis = svg.selectAll('rect')
.data([data])
.enter().append('rect')
   .attr('x', 0)
   .attr('y', 0)
   .attr('width', width)
   .attr('height', height);

svg.selectAll('path')
    .data(donut)
.enter().append('path')
   .attr('fill', function(d, i) { return color(i); })
   .attr('d', arc)
   .attr('transform', 'translate(' + outerRadius + ',' + outerRadius + ')');

paper.setFinish().transform(['t', 0, 0]); 
```

当我将甜甜圈传递给数据函数时它崩溃了，d3 的数据函数内的绑定函数有一个`group`参数。单步执行数据函数后，我发现它`group`是未定义的。（对我来说，它在 d3.v2.js:4997 上崩溃`bind(group = this[i], value.call(group, group.parentNode.__data__, i));`，它试图`parentNode`在 undefined上引用`group`）我认为这可能与 raphael 不支持 g 标签有关。关于如何将 d3 pie 布局与 d34raphael 一起使用的任何想法？谢谢

# actionscript-3 - AS3：无法将子索引影片剪辑添加到精灵中

> ID：12733591
> 
> 赞同：1
> 
> 时间：2012-10-04T18:34:15.547
> 
> 标签：actionscript-3, addchild

我在 Flash (AS3) 中创建了一个动态阻塞地形，一切正常，地形放置正确。但是我需要包含碰撞，并且我希望这些块位于影片剪辑（精灵）中，因此我可以测试与地形本身的碰撞。

Ps：我不知道单独测试与每个块的碰撞是否会好，因为我将使用 enterframe 函数并且块生成是动态的。

我面临的问题是我有一个名为 blockHolder 的精灵，但我无法将块添加到它。

这是代码（我对其进行了简化，因此如果您将它们直接添加到舞台中，我们将在级联中创建块，例如*addChild(clonedSquare)*。

我收到的错误： *TypeError：错误 #1009：无法访问空对象引用的属性或方法。*

```
var blockHolder:Sprite = new Sprite();

var clonedSquare = new square();

var lowestPoint:int = 10;
var highestPoint:int = 20;
var areaLenght:int = 10;

function createLvl():void
{
    for (var i:Number = 0; i<(areaLenght); i++)
    {
        clonedSquare = new square();
        clonedSquare.x = i * clonedSquare.width;
        //sets the height of the first block
        if (i == 0)
        {
            var firstY:Number = Math.ceil(Math.random()*((lowestPoint-highestPoint))+highestPoint)*clonedSquare.height;
            clonedSquare.y = firstY;
            trace("terrain begins " + firstY + " px down");
        }
        else
        {
                var previousId:Number = i - 1;
                clonedSquare.y = getChildByName("newSquare"+previousId).y + clonedSquare.height;
        }
        //sets the entity (block) name based on the iteration
        clonedSquare.name = "newSquare" + i;
        //adds the cloned square
        blockHolder.addChild(clonedSquare);
    }
    addChild(blockHolder);
}

createLvl(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:53:37.260

好吧，我修复了错误。我仍然不清楚你的要求。基本上我将每个块添加到一个数组并以这种方式引用该块。你`clonedSquare.y = getChildByName("newSquare"+previousId).y + clonedSquare.height;`正在抛出错误。另外，您的 firstY 将第一个街区从我的舞台上移开，所以我将其设置为 0 作为 firstY

```
var blockHolder:Sprite  = new Sprite();
var squares:Array       = [];
var lowestPoint:int     = 10;
var highestPoint:int    = 20;
var areaLenght:int      = 10;

function createLvl():void
{
    for (var i:Number = 0; i<(areaLenght); i++)
    {
        var clonedSquare = new square();
        clonedSquare.x = i * clonedSquare.width;
        if (i == 0)
        {
            var firstY:Number = Math.ceil(Math.random()*((lowestPoint-highestPoint))+highestPoint)*clonedSquare.height;
            //clonedSquare.y = firstY;
            clonedSquare.y = 0;
            trace("terrain begins " + firstY + " px down");
        }
        else
        {
            clonedSquare.y = squares[i - 1].y + clonedSquare.height;
        }
        blockHolder.addChild(clonedSquare);
        squares.push(clonedSquare);
    }
    addChild(blockHolder);
}
createLvl(); 
```

# html - 改变 悬停时的背景

> ID：12733600
> 
> 赞同：0
> 
> 时间：2012-10-04T18:35:25.683
> 
> 标签：html, css

我有这个菜单：

```
<div class="nav">
    <ul>
        <li><a href="#">HOME</a></li>
        <li><a href="#">AMORTECIMENTO</a></li>
    </ul>
</div> 
```

正常外观：

![正常外观](../Images/dd6712bd1f17b67b05c70a08b5a31ee6.png)

这是用户悬停菜单时的外观：

![:hover 外观](../Images/b0f74cc25667c5080273e2a7afe3f37f.png)

所以，我不知道如何设置 css，假设我在菜单上有最大的名字，比如：“AMORTECIMENTO”

有小费吗？？

我试过这个，但是在小名字上，菜单正在削减背景......

```
.nav ul li a{
    display:block;
    font-size:15px;
    color:#000;
    padding:5px 7px;
    background:transparent;
    text-decoration:none;
}

.nav ul li:hover{
    background:url(../imagens/bola_fundo_menu.png) center no-repeat;
} 
```

我的意图是，当用户将菜单项悬停在`<li>`背景上，出现篮球和`<a>`标签时，背景将变为#FFF，但我在菜单上有大小名称，所以我无法设置`<li>`和`<a>`标签的宽度... 我认为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:04:22.603

这是一个使用伪元素的快速示例：http: [//codepen.io/anon/pen/iwerJ](http://codepen.io/anon/pen/iwerJ)

使用您最初发布的确切 HTML，使用如下 CSS：

```
.nav { 
  background: #CCC; 
  font-family: Helvetica, Arial, sans-serif;
  line-height: 48px; 
  margin: 50px auto 0;
  width: 90%;
}

.nav ul:after {
  clear: both;
  content: '';
  display: block; 
}

.nav ul li {
  float: left;
  font-size: 14px;
  list-style: none;
  padding: 0 10px;
  position: relative;
}
.nav ul li:hover:after {
    /* Replace background with image */
    background: #abc123;
    /* Optionally remove radius */
    border-radius: 30px;

    content: '';
    display: block;
    position: absolute;
    top: 50%; left: 50%;
    margin-top: -30px; 
    margin-left: -30px;
    height: 60px; width: 60px;
}

.nav a {
  color: #333;
  display: inline-block;
  line-height: 180%;
  padding: 0 4px;
  position: relative;
  text-decoration: none;
  z-index: 1;
}
    .nav li:hover a { background: #FFF; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:39:29.507

只需设置悬停背景。例如：

```
div.nav li:hover{
  background-image: url('basketball.jpg');
} 
```

编辑：您遇到的问题不仅仅是背景图片...

*   您需要将导航文本垂直居中设置导航单元的最小宽度，以便球的左侧和右侧不会被切断
*   为锚标记设置纯白色背景，以便文本在悬停时实际上可见
*   为大于中心图像的锚标签设置 z-index 以便它们都可以点击（现在你不能点击中心右侧的链接）

祝你好运。我不能为你写出所有这些代码，但这应该会让你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:39:19.160

在您的导航类上，您所要做的就是像这样编写您的 css：

```
.nav ul li:hover
{ 
background-image:url('yourimage.jpg');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T18:49:28.830

要修复截止图像，您只需`min-width`在`.nav li`元素上放置一个。确保该值至少与背景图像一样宽。

您可能还想添加`text-align: center`.

# python - 使用 python 将查询结果打印到管道分隔文件

> ID：12733601
> 
> 赞同：2
> 
> 时间：2012-10-04T18:35:36.890
> 
> 标签：python, oracle, export-to-csv

我是 python 的初学者，我正在尝试将查询结果打印到管道分隔文件。我怎样才能修改这个脚本来做到这一点？

```
import cx_Oracle
import csv

connection = cx_Oracle.connect("blah blah blah connection stuff")
cursor = connection.cursor()
cursor.execute("select column1, column2 from schema.table")
result=cursor.fetchall()
c = csv.writer(open("C:\mystuff\output.csv","wb"))
c.writerow(result) 
```

现在它打印出来像这样 "(10001965, '0828442C00548')","(10001985, '0696230C35242')","(10001986, 'C41251')"

我希望它在行尾打印管道分隔和新行。谢谢你的帮助！10001965|0828442C00548\n 10001985|0696230C35242\n 10001986|C41251\n

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T19:15:13.583

要将管道符号作为分隔符，您可以在创建编写器时传入“分隔符”参数：

c = csv.writer(open("C:\mystuff\output.csv","wb"), delimiter="|")

您还可以添加一个 lineterminator 参数：

c = csv.writer(open("C:\mystuff\output.csv","wb"), delimiter="|", lineterminator="\n")

虽然它应该默认为 "\r\n"

我认为您可能对“writerow”的调用也有问题。db 结果是一个元组列表，要将其正确写入 csv 文件，您应该使用“writerows”（注意函数的复数形式）。这应该正确处理列表并将 db 值对放在单独的行上，用管道正确分隔。目前，您的代码正在编写一个“行”，这就是为什么没有换行符分隔数据值的原因。

新代码：

c = csv.writer(open("C:\mystuff\output.csv","wb"), delimiter="|")

c.writerows（结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:43:16.337

它打印出一个字符串列表？您可以使用`"|".join(string.split(','))`连接曾经以逗号分隔的字符串以管道分隔。并且，使用`'\n'.join(list)`列表获取换行符。这不会在末尾添加换行符，因此如果您愿意，只需`+ '\n'`添加结果即可。

# internet-explorer - ie8中的.trim js错误，我该如何解决？

> ID：12733602
> 
> 赞同：0
> 
> 时间：2012-10-04T18:35:37.290
> 
> 标签：internet-explorer, trim

```
array[i].trim(); 
```

给出错误但仅在 ie8 中

它给出了一个关于“不支持的方法”的错误。

也许 .trim 在 IE 9 中被删除了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:50:27.317

`String.trim()`在 1.8.1 中添加，在 IE8 或更低版本中未实现。

在代码的开头，您可以使用

```
if(!String.prototype.trim) {
    String.prototype.trim = function () {
        return this.replace(/^\s+|\s+$/g,'');
    };
} 
```

并将`.trim()`针对任何字符串实现。

见[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:44:14.490

假设数组是一个字符串数组，JavaScript 字符串对象没有 trim() 方法。见[这里](http://www.w3schools.com/jsref/jsref_obj_string.asp)。

取自[这个](https://stackoverflow.com/a/498995/1660607)问题，你可以做

```
array[i].replace(/^\s\s*/, '').replace(/\s\s*$/, ''); 
```

我希望这会有所帮助。

# qt - Qt 的分段错误调试器

> ID：12733604
> 
> 赞同：0
> 
> 时间：2012-10-04T18:35:39.570
> 
> 标签：qt, qt4

我们可以使用 gdb 来调试 Qt 程序的分段错误吗？如果没有，还有其他工具可以为 Qt 程序完成任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:29:18.023

当然，您可以使用 gdb 或任何其他支持 C++ 的调试器来调试 Qt 程序。Qt 只是一个 C++ 库，Qt 源代码只是使用 Qt 库的 C++ 源代码。

# objective-c - XCode 错误：未捕获的异常“NSInternalInconsistencyException”

> ID：12733605
> 
> 赞同：0
> 
> 时间：2012-10-04T18:35:43.250
> 
> 标签：objective-c, ios, xcode, runtime-error

这到底是什么意思？

***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新 (2) 后现有节中包含的行数必须等于其中包含的行数更新前的那个节 (1)，加上或减去从该节插入或删除的行数（1 插入，1 删除），加上或减去移入或移出该节的行数（0 移入，0搬出）。'

令人困惑...当我重新加载 UITableview 时出现此错误。这是在说什么更新？我无法删除或添加单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:47:18.213

它告诉您的是，返回的值`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`与该部分中的实际行数不同步。您是否可能硬连线了本节中的行数，然后以编程方式删除行而不在此方法中更新它？

如果你看消息，它认为现在应该有 2 行，但你之前有 1 行，然后插入 1 并删除了 1，这意味着净效果应该是 1 行。

# grails - 在 Grails 控制台中导入服务？

> ID：12733609
> 
> 赞同：27
> 
> 时间：2012-10-04T18:36:04.433
> 
> 标签：grails, grails-web-console

如何在 grails 控制台中获取服务？我的业务规则在服务中实现，但我无法在 grails 控制台中访问它们。有谁知道如何帮助我？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-04T19:40:31.980

Spring`ApplicationContext`可作为`ctx`控制台中的变量使用，您可以使用它来访问 Spring bean，例如服务。通常是这样，`def myService = ctx.getBean('myService')`但是 Grails 添加了一个元类助手，所以你可以这样做`def myService = ctx.myService`

# php - 检查远程文件是否是有效的 mp3

> ID：12733612
> 
> 赞同：0
> 
> 时间：2012-10-04T18:36:16.290
> 
> 标签：php, mime-types

你能告诉我一个检查远程（http）文件是否是有效mp3而不下载整个文件的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:49:18.260

不要相信来自服务器的任何东西。MIME 类型可能是假的。甚至文件名。假设您期待一个 MP3 文件。存储正确的扩展名并验证它。

至少标题以及文件名的正确扩展名。在最坏的情况下，他们的耳朵会发出可怕的噪音，而您会收到投诉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:41:04.737

你可以试试

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "http://...music.mp3");
curl_setopt($curl, CURLOPT_HEADER, true);
curl_setopt($curl, CURLOPT_FILETIME, true);
curl_setopt($curl, CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$header = curl_exec($curl);
$info = curl_getinfo($curl, CURLINFO_CONTENT_TYPE);
curl_close($curl);

$mp3_mimes = array('audio/mpeg','application/mp3','audio/mpeg3','audio/x-mpeg-3');
if (in_array($info, $mp3_mimes)) {
    // Somthign cooking
} 
```

另一个建议是下载文件并通过读取头信息进行验证

```
$curl = curl_init();

$localfile = "local.temp";
unlink($localfile);

$file = fopen($localfile, 'w+');
curl_setopt($curl, CURLOPT_URL, "http://robtowns.com/music/blind_willie.mp3"); // nput
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FILE, $file);
curl_exec($curl);
curl_close($curl);
fclose($file);

$mp3 = new mp3();
if ($info = $mp3->get_mp3($localfile, true, false)) {
    var_dump($info);
} else {
    unlink($localfile);
    // bad File
} 
```

[MP3类](http://www.phpclasses.org/package/5275-PHP-Manipulate-MP3-audio-files.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:14:45.617

检查文件大小，如果它 >1mb 验证...不是答案，但现在最好...

# objective-c - 调试 Objective C JNI 代码

> ID：12733614
> 
> 赞同：4
> 
> 时间：2012-10-04T18:36:30.090
> 
> 标签：objective-c, xcode, eclipse, debugging, java-native-interface

情况如下：

我在 Eclipse 中打开了一个客户的 java 项目。它使用由 Xcode Objective C 项目创建的 JNI 库。当我执行 Java 代码时，有什么好的方法可以让我从 Eclipse 中调试 C 代码吗？显然eclipse的默认调试器无法单步进入jni库文件，我们丢失了线程（线程在这里表示调查线程，而不是编程线程）。

任何建议或输入都会受到赞赏，因为代码库足够大，遵循客户的代码将比其他选项快得多。

谢谢。

编辑：

需要注意的是，jni 库之所以用 Objective-C 编写，是因为它正在与 Mac OSX 集成。它使用 Cocoa 框架与 Apple 语音 api 集成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T21:34:13.003

我不确定我是否完全理解您的设置，以及您是否需要从 Eclipse 中完成此操作。无论如何，我对使用 JNI 和 Cocoa 库做一个小测试程序很感兴趣，只是为了尝试调试 obj-c/c 代码。

我成功地完成了这个设置并调试了代码。我将 IntelliJ 用于 Java，将 Xcode 用于 objc/c 部分，但在 eclipse 中执行 java 部分是轻而易举的事。

所以你应该能够准确地设置我的项目结构并开始调试。从那里您应该能够将这些知识应用到您自己的更复杂的代码中。

这就是我开始的方式：

*   通过选择 Cocoa Library 在 Xcode 中创建一个新项目。

![可可库](../Images/6e3dfa34170a8f3d6bec34acdf67edd5.png)

*   将项目命名为`libnative`动态类型。

![选择选项](../Images/d0e4a92609e515aedbc53d9f34675157.png)

*   为您的新项目选择一个地方。我使用`~/Development/`并跳过该`Create local git...`部分。

*   `lib native.xcodeproj`这将在您选择的文件夹中创建一个名为的新项目。已自动创建两个文件：`libnative.h`和`libnative.m`.

*   首先，您必须更改项目设置。

    *   `Executable Extension`在该`Packaging`部分必须从 更改`dynlib`为`jnilib`。
    *   `Framework Search Paths``Search Paths`必须更新该部分以指向 JNI 框架：`/System/Library/Frameworks/JavaVM.framework/Frameworks/JavaNativeFoundation.framework/`

![在此处输入图像描述](../Images/400bdc89c3b98d7b6e1c9445b7d19396.png)

*   现在是时候添加一些代码了。请注意，使用此设置您将不得不使用`<JavaVM/jni.h>`. 更新`libnative.m`如下代码：

```
//
//  libnative.m
//  libnative
//
//  Created by maba on 2012-10-09.
//  Copyright (c) 2012 maba. All rights reserved.
//

#import "libnative.h"
#include <JavaVM/jni.h>

@implementation libnative

@end

#ifdef __cplusplus
extern "C" {
#endif

#ifndef VEC_LEN
#define VEC_LEN(v) (sizeof(v)/sizeof(v[0]))
#endif/*VEC_LEN*/

static JavaVM *javaVM;

static void print();

static JNINativeMethod Main_methods[] =
{
    { "print", "()V", (void*)print },
};

static struct {
    const char      *class_name;
    JNINativeMethod *methods;
    int             num_methods;
} native_methods[] = {
    { "com/stackoverflow/Main", Main_methods, VEC_LEN(Main_methods) },
};

JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM *jvm, void *reserved) {
    JNIEnv *env = 0;
    jclass cls  = 0;
    jint   rs   = 0;

    if ((*jvm)->GetEnv(jvm, (void**)&env, JNI_VERSION_1_4)) {
        return JNI_ERR;
    }

    javaVM = jvm;

    for (unsigned int i = 0; i < VEC_LEN(native_methods); i++) {
        cls = (*env)->FindClass(env, native_methods[i].class_name);
        if (cls == NULL) {
            return JNI_ERR;
        }
        rs = (*env)->RegisterNatives(env, cls, native_methods[i].methods, native_methods[i].num_methods);
        assert(rs == JNI_OK);
    }

    return JNI_VERSION_1_4;
}

static void print(JNIEnv *env, jclass cls) {
    printf("Hello from C");
}

#ifdef __cplusplus
}
#endif 
```

*   按构建代码`⌘</kbd>+`B`.`

*   现在是时候创建 Java 代码了。我只是在 package 中创建了一个名为 Main 的类 `com.stackoverflow`。

`com.stackoverflow.Main.java`

```
package com.stackoverflow;

/**
 * @author maba, 2012-10-09
 */
public class Main {

    static native void print();

    static {
        System.out.println(System.getProperty("java.library.path"));
        System.loadLibrary("native");
    }

    public static void main(String[] args) {
        System.out.println("Loading native");
        Main.print();
    }
} 
```

*   在之前的行设置断点`Main.print();`。使用以下 JVM 选项启动调试器：

```
-Djava.library.path="/Users/maba/Library/Developer/Xcode/DerivedData/libnative-cquleqohzyhghnercyqdwpnznjdf/Build/Products/Debug/" 
```

这条线有点长，也是用户特定的。`libnative-cquleqohzyhghnercyqdwpnznjdf`您将不得不自己查找目录名称是什么，但除了生成的路径之外，它们或多或少与我的相同。

*   程序应该在断点处运行并等待。是时候将 Xcode 调试器附加到正在运行的应用程序了。

*   选择菜单`Product`->`Attach to Process >`并指向下拉部分中正在运行的`java`进程。`System`如果有多个`java`进程，那么它很可能是具有最高 PID 的进程，但并非总是如此。你得试试。

*   在c代码中创建断点就行了`printf("Hello from C");`。

*   返回 Java IDE 并从停止的地方继续执行。

*   回到 Xcode，看看它在断点处等待！

![在断点](../Images/d6bcd55a9857d3ebf7b713b2f6938533.png)

* * *

正如我之前所说，这是 obj-c/JNI 的一种非常简单的方法，您的项目可能非常大，但是通过这个小型测试项目，您至少可以看到它是如何工作的，然后继续您自己的项目设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:41:31.797

您也许可以从终端附加`gdb`（或）。`lldb`如果带有本机代码的进程的启动是`fork()/exec()`- 即如果您无法键入`gdb /some/command/line`- 那么您可能会使用该`--waitfor`选项（参见手册页）来等待下级的启动。

加载符号会很棘手。

* * *

> 这是一个使用 cocoa 框架的 Mac OS X 项目。这会影响这个吗？

它不应该。如果有的话，它会更容易，希望符号文件是可用的格式。关键通常是在 Java 和本机代码之间的边界处找到正确的突破点。

dylib 中的本机代码是加载到 JVM 中，还是您有自定义可执行文件在内部启动 JVM？

在任何情况下，您都需要将本机调试器附加到运行该本机代码的任何进程。可能在您适当地设置了基于 java 的调试会话之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:24:21.823

过去在做 JNI 时，我构建了一个测试工具来促进应用程序的本机部分的开发 - 以及 JNI 代码 - 这是臭名昭著的容易搞砸的，避免了从双方同时调试的需要。

这是作为一个本地应用程序编写的，它以编程方式调用 JVM，而不是从 Java 应用程序开始，然后尝试附加到 JVM。

当然，您可以在 Xcode 中启动它并对其进行调试——这对于使用 CDT 的 Eclipse 来说是一种无限可取的体验。

这种安排的 Java 方面通常非常简单且非设计性 - 基本上是一种从应用程序的本机部分调用的方法，然后通过 JNI 对本机部分进行一次或多次调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T21:34:01.107

这是我在 Windows 下调试 JNI (C/C++) 所遵循的步骤，我认为 ObjectiveC 也需要相同的步骤。对于 Linux，它非常相似（将 ; 替换为 :，%XXX% 替换为 ${XXX}...）。

1.  创建一个名为 MyDebug.gdbinit 的文件
2.  将这 4 行添加到其中：

    设置参数 -classpath .;xxxx.jar;yyy.jar path.to.your.Main

    显示参数

    跑

    BT

3.  启动 gdb 和 Java： gdb "%JAVA_HOME%\bin\java"

4.  使用Java层的GUI重现错误
5.  如果您想逐步执行您的 JNI 代码，gdb 允许您放置一些断点

# unix - 从上一行和下一行读取列值，但使用 awk 将它们作为附加字段插入当前行

> ID：12733615
> 
> 赞同：0
> 
> 时间：2012-10-04T18:36:35.103
> 
> 标签：unix, awk

我希望你能帮我解决我的问题。

我有一个包含 3 列数据的输入文件，如下所示：

```
Apl_No Act_No Sfx_No 
100    10     0
100    11     1
100    12     2
100    13     3
101    20     0
101    21     1 
```

我需要创建一个输出文件，其中包含输入中的数据和输出中的 3 个附加文件。它应该如下所示：

```
Apl_No Act_No Sfx_No Crt_Act_No Prs_Act_No Cd_Act_No
100    10     0       -         -          -
100    11     1       10        11         12
100    12     2       11        12         13
100    13     3       12        13         10
101    20     0       -         -          -
101    21     1       20        21         20 
```

每个`Apl_No`都有一组`Act_No`映射到它。需要创建 3 个新字段：`Crt_Act_No` `Prs_Act_No` `Cd_Act_No`. 当`Apl_No`遇到第一个唯一值时，列值 4、5 和 6 ( `Crt_Act_No` `Prs_Act_No` `Cd_Act_No`) 需要被划掉。对于随后出现的每一个相同`Apl_No`的`Crt_Act_No`，the 与`Act_No`上一行中的`Prs_Act_No`相同，`Act_No`与当前行中的`Cd_Act_No`相同，并且`Act_No`与下一行中的相同。`Apl_No`对于除最后一行之外的所有后续行，这将继续。在最后一行中`Crt_Act_No`和`Prs_Act_No`以与上述行相同的方式填充，但是当遇到第一个唯一时，`Cd_Act_No`需要`Act_No`从第一行中拉出`Apl_No`。

我希望使用 awk 来实现这一点。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:59:18.150

一种解决方案：

```
awk '
    ## Print header in first line.
    FNR == 1 {
        printf "%s %s %s %s\n", $0, "Crt_Act_No", "Prs_Act_No", "Cd_Act_No";
        next;
    }

    ## If first field not found in the hash means that it is first unique "Apl_No", so
    ## print line with dashes and save some data for use it later.
    ## "line" variable has the content of the previous iteration. Print it if it is set.
    ! apl[ $1 ] {
        if ( line ) {
            sub( /-/, orig_act, line );
            print line;
            line = "";
        }
        printf "%s %s %s %s\n", $0, "-", "-", "-";
        orig_act = prev_act = $2;
        apl[ $1 ] = 1;
        next;
    }

    ## For all non-unique "Apl_No"... 
    {
        ## If it is the first one after the line with
        ## dashes (line not set) save it is content in "line" and the variable
        ## that I will have to check later ("Act_No"). Note that I leave a dash in last
        ## field to substitute in the following iteration.
        if ( ! line ) {
            line = sprintf( "%s %s %s %s", $0, prev_act, $2, "-" );
            prev_act = $2;
            next;
        }

        ## Now I know the field, so substitute the dash with it, print and repeat
        ## the process with current line.
        sub( /-/, $2, line );
        print line;
        line = sprintf( "%s %s %s %s", $0, prev_act, $2, "-" );
        prev_act = $2;
    }
    END {
        if ( line ) {
            sub( /-/, orig_act, line );
            print line;
        }        
    }
' infile | column -t 
```

这会产生：

```
Apl_No  Act_No  Sfx_No  Crt_Act_No  Prs_Act_No  Cd_Act_No
100     10      0       -           -           -
100     11      1       10          11          12
100     12      2       11          12          13
100     13      3       12          13          10
101     20      0       -           -           -
101     21      1       20          21          20 
```

# flash - 无法使用 osmf 流式传输 mp4，它只能下载整个文件然后播放

> ID：12733616
> 
> 赞同：0
> 
> 时间：2012-10-04T18:36:36.550
> 
> 标签：flash, video-streaming, mp4, osmf, m4v

我正在使用 osmf 并且我正在尝试通过 http 流式传输 m4v 文件（osmf 应该支持它）而不是流式传输它，它下载整个文件，完成后，它会播放它。我怎样才能让它流式传输而不是下载它？

我的代码是：

```
var resource:URLResource = new URLResource("http://path/to/file.m4v");
mediaFactory = new DefaultMediaFactory();
var element:MediaElement = mediaFactory.createMediaElement(resource);
player = new MediaPlayer(element);
container = new MediaContainer();
container.addMediaElement(element);
videoContainer.addChild(container); 
```

我试过而不是使用 mediaFactory：

```
var videoElement:VideoElement =  new VideoElement(resource ,new HTTPStreamingNetLoader()); 
```

没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:48:53.467

要使 mp4 立即可播放，您需要对其进行提示。使用 MP4Box。

```
MP4Box -hint input_file 
```

谷歌一点关于暗示以更好地理解它。这个想法是将标题放在文件的开头。

# algorithm - 跳过列表的时间复杂度

> ID：12733622
> 
> 赞同：3
> 
> 时间：2012-10-04T18:36:57.590
> 
> 标签：algorithm, data-structures, skip-lists

我可以知道为什么平均情况下插入跳过列表的时间复杂度是 O(log n)，为什么具有 n 个元素的跳过列表的高度很可能是 O(log n)。以及为什么每一层的平均搜索时间是 O(1)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:45:57.903

我可以帮助 O(log n) 部分。

基本上... [[跳过列表搜索] 很容易让人联想到数组中的二进制搜索，并且可能是直观理解为什么此列表中访问的最大节点数在 .](http://www.csee.umbc.edu/courses/undergraduate/341/fall01/Lectures/SkipLists/skip_lists/skip_lists.html)

# ios - IOS 二进制文件中的 LC_DATA_IN_CODE

> ID：12733627
> 
> 赞同：1
> 
> 时间：2012-10-04T18:37:09.740
> 
> 标签：ios, binary, legacy, mach-o

我有一个 IPA 文件，其主要二进制文件包含一个 0x29 加载命令，该命令在旧版本的 loader.h 中指定为“LC_DATA_IN_CODE”。

但是，当我尝试对文件执行任何操作（包括使用 otool 或 codesign）时，我会收到有关“未知加载命令”的错误消息。

我将与给我 IPA 文件的人交谈，但在此之前我想了解此命令的一些历史记录。它是否不再受支持，如果是，它留下了什么版本？或者它是否被重新添加到最新版本的操作系统中？删除它会伤害任何东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:39:17.680

您收到这些消息的原因是您的 otool 版本已过时。Apple 的大多数工具都在他们不知道的加载命令上中断，并且 DATA_IN_CODE（实际上不是那么旧）已在最近的二进制文件中使用。出于同样的原因，您也可能在使用 LC_SOURCE_VERSION 或 LC_MAIN 的 OS X 二进制文件上失败。Mountain Lion 的 otool 可能会更好，或者您可以使用 jtool 来代替。

# google-apps-script - Google Apps Script e.namedValues 格式多项选择

> ID：12733634
> 
> 赞同：2
> 
> 时间：2012-10-04T18:37:29.030
> 
> 标签：google-apps-script

我有一个简单的脚本，可以通过电子邮件发送 Google Drive 表单提交的结果。表单中的一个问题具有多项选择复选框。我正在使用 e.namedValues 来获取答案数组，以便我可以通过电子邮件发送它们，如下所示：

```
var multiple = e.namedValues['Multiple Choice Question'].toString(); 
```

通过电子邮件发送的结果是这样的：

```
Answer 1, Answer 2, Answer 3 
```

但我希望结果的格式如下：

```
Answer 1
Answer 2
Answer 3 
```

而不是用逗号分隔。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:14:53.703

使用 JavaScript String 的 split 函数

```
var multiple = e.namedValues['Multiple Choice Question'].toString();
var choicesSelected = multiple.split(',');
multiple =''; 
for(var i in choicesSelected){
  multiple += choicesSelected[i] + '\n' ;
}
for (var i in multiple){
  Logger.log(multiple[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-15T18:25:26.177

试试这个：

```
function myFunction(e) {
   var eMails = e.namedValues['Your question here'].toString();
   var choicesSelected = eMails.split(', ');

   /**
      eMails =''; 
      for(var i in choicesSelected){
      eMails += choicesSelected[i] + '\n';
   }

   */
   for (var i in choicesSelected){
      Logger.log(choicesSelected[i]);
   }
} 
```

# jquery - CSS3 中的动态掩码无法正常工作

> ID：12733637
> 
> 赞同：0
> 
> 时间：2012-10-04T18:37:36.773
> 
> 标签：jquery, html, css, webkit

我尝试使用渐变工具创建一个基本的简单动态蒙版，但它无法正常工作。**注意我使用的是谷歌浏览器。**

如果将鼠标从一个位置拖动到另一个位置，圆形和模糊会发生变化，这很奇怪。

[http://jsfiddle.net/mrdSs/101/](http://jsfiddle.net/mrdSs/101/)

我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:45:41.680

[http://jsfiddle.net/5J8D6/4/](http://jsfiddle.net/5J8D6/4/)

不要`circle closest-side`改用 try `50px 50px`。我们需要设置一个明确的形状和大小

```
var t = "background-image: -webkit-radial-gradient("+e.pageX+"px "+e.pageY+"px, 50px 50px,  rgba(0,0,0,0) 50%, rgba(0,0,0,1) 100px)"; 
```

见[http://www.impressivewebs.com/css3-radial-gradient-syntax/](http://www.impressivewebs.com/css3-radial-gradient-syntax/)

# sql - 多列到 XML 列

> ID：12733638
> 
> 赞同：0
> 
> 时间：2012-10-04T18:37:37.140
> 
> 标签：sql, sql-server, tsql

给定两个表：

`T1( EntityID int , EmailAddress varchar(55),MaxNumberOfConnections int )`

`T2( EntityID int , EntityAttributes XML )`

如何使用单个语句将所有数据插入到其中，从而将 (all but) 中的所有列`T1`转换为以下中的一个 XML 列：`T2``T1``EntityID``T2`

```
T1( 1,'1234@1234.com',454)

T2(1, '<Attributes>
          <Attribute EmailAddress="1234@1234.com">
          <Attribute MaxNumberOfConnections ="454">
      </Attributes>' ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:50:00.210

以下是基于我的评论的两个解决方案 - 具有多个属性的单个“属性”元素：

```
SELECT
    EntityId,
    (
        SELECT
            EmailAddress AS [Attribute/@EmailAddress],
            MaxNumberOfConnections AS [Attribute/@MaxNumberOfConnections]
        FROM
            T1 i
        WHERE
            i.EntityId = o.EntityId
        FOR XML PATH('Attributes')
    ) AS EntityAttributes 
FROM
    T1 o 
```

每个字段的单个元素：

```
SELECT
    EntityId,
    (
        SELECT
            EmailAddress,
            MaxNumberOfConnections
        FROM
            T1 i
        WHERE
            i.EntityId = o.EntityId
        FOR XML PATH('Attributes')
    ) AS EntityAttributes 
FROM
    T1 o 
```

# c - PThreads 上下文中的多处理器与多线程

> ID：12733640
> 
> 赞同：4
> 
> 时间：2012-10-04T18:37:50.830
> 
> 标签：c, multithreading, pthreads, hardware, multiprocessing

我有一个关于硬件选择及其对软件开发的影响的应用程序级别 (PThreads) 问题。

我已经在多核单 CPU 机器上很好地测试了多线程代码。

我正在尝试决定为我的下一台机器购买什么：

*   一个6核单CPU盒子
*   4核双CPU机箱

**我的问题是，如果我选择双 CPU 机箱，这会严重影响我的代码移植吗？或者我可以分配更多线程并让操作系统处理其余的吗？**

换句话说，在 PThreads 应用程序的上下文中，多处理器编程与（单 CPU）多线程有什么不同吗？

*我认为在这个级别上没有什么区别，但是在配置一个新机器时，我注意到必须为每个 CPU 购买单独的内存。那时我遇到了一些认知失调。*

**关于代码的更多细节（对于那些感兴趣的人）：** 我将大量数据从磁盘读取到一个巨大的内存块中（大约 24GB 很快就会更多），然后我产生了我的线程。最初的内存块是“只读的”（由我自己的代码策略强制执行），因此我不会对该块进行任何锁定。我在看 4 核双 CPU 机箱时感到困惑——它们似乎需要单独的内存。在我的代码上下文中，我不知道如果我分配一堆额外的线程会发生什么“幕后”。操作系统会将我的内存块从一个 CPU 的内存库复制到另一个？ **这将影响我必须购买多少内存（提高此配置的成本）。** 理想的情况（成本方面和易于编程方面）是让双 CPU 共享一大块内存，但如果我理解正确的话，这在新的英特尔双核 MOBO 上可能是不可能的（比如HP ProLiant ML350e)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T19:10:21.977

现代 CPU ¹在本地处理 RAM，并使用单独的通道²在它们之间进行通信。这是 NUMA 架构的消费者级版本，十多年前为超级计算机创建。

这个想法是为了避免可能导致严重争用的共享总线（旧的 FSB），因为每个内核都使用它来访问内存。随着您添加更多 NUMA 单元，您将获得更高的带宽。不利的一面是，从 CPU 的角度来看，内存变得不均匀：一些 RAM 比其他 RAM 更快。

当然，现代操作系统调度程序是 NUMA 感知的，因此他们试图减少任务从一个单元到另一个单元的迁移。有时可以在同一个插槽中从一个核心移动到另一个核心；有时会有一个完整的层次结构指定哪些资源（1-、2-、3 级缓存、RAM 通道、IO 等）是共享的，哪些不是，并且通过移动任务来确定是否会受到惩罚. 有时它可以确定等待正确的核心是没有意义的，最好将整个东西铲到另一个插槽....

在绝大多数情况下，最好让调度程序做它最了解的事情。如果没有，你可以玩弄`numactl`.

至于给定程序的具体情况；最好的架构很大程度上取决于线程之间的资源共享水平。如果每个线程都有自己的 Playground 并且大部分时间都在其中单独工作，那么足够聪明的分配器会优先考虑本地 RAM，从而降低每个线程碰巧在哪个单元上的重要性。

另一方面，如果对象由一个线程分配，由另一个线程处理并由第三个线程使用；如果它们不在同一个单元格上，性能会受到影响。您可以尝试创建小型线程组并限制组内的大量共享，然后每个组可以毫无问题地进入不同的单元格。

最坏的情况是所有线程都参与到数据共享的大狂欢中。即使您的所有锁和进程都已调试好，也没有任何方法可以优化它以使用比单元上可用的内核更多的内核。甚至最好将整个过程限制为仅使用单个单元中的内核，从而有效地浪费其余部分。

^(现代的1)，我的意思是任何 AMD-64 位芯片，对于英特尔来说，Nehalem 或更好。

² AMD将此通道称为HyperTransport，Intel名称为QuickPath Interconnect

**编辑：**

您提到您初始化了“一大块只读内存”。然后产生很多线程来处理它。如果每个线程都在该块的自己的部分上工作，那么在生成它之后*在线程上*初始化它会好得多。这将允许线程分布到多个内核，分配器将为每个内核选择本地 RAM，这是一种更有效的布局。也许有一些方法可以提示调度程序在它们产生后立即迁移线程，但我不知道细节。

**编辑2：**

`mmap`如果您的数据是从磁盘逐字读取的，没有任何处理，那么使用而不是分配一个大块和`read()`ing可能是有利的。有一些共同的优点：

1.  无需预先分配 RAM。
2.  该`mmap`操作几乎是瞬时的，您可以开始使用它。数据将根据需要延迟读取。
3.  `mmap`在应用程序、 ed RAM、缓冲区和缓存之间进行选择时，操作系统可能比您更聪明。
4.  它的代码更少！
5.  不需要的数据不会被读取，不会占用 RAM。
6.  您可以专门标记为只读。任何尝试写入的错误都会导致核心转储。
7.  由于操作系统知道它是只读的，它不能是“脏”的，所以如果需要 RAM，它会简单地丢弃它，并在需要时重新读取。

但在这种情况下，您还会得到：

*   由于数据是延迟读取的，因此每个 RAM 页面将在线程分布在所有可用内核上*之后被选择；*这将允许操作系统选择接近进程的页面。

所以，我认为如果两个条件成立：

*   数据不会在磁盘和 RAM 之间以任何方式处理
*   数据的每一部分（大部分）由一个线程读取，而不是被所有线程读取。

然后，只需使用`mmap`，您就应该能够利用任何大小的机器。

如果数据的每一部分都由一个以上的线程读取，也许您可​​以确定哪些线程将（大部分）共享相同的页面，并尝试提示调度程序将它们保存在同一个 NUMA 单元中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T04:32:39.947

对于您正在查看的 x86 机器，内存物理连接到不同 CPU 插槽的事实是一个实现细节。从逻辑上讲，机器的总内存显示为一个大池 - 您无需更改应用程序代码即可使其在两个 CPU上*正确运行。*

然而，性能是另一回事。跨套接字内存访问会降低速度，因此未修改的程序可能无法充分发挥其潜力。

不幸的是，很难提前说您的代码是在 6 核单节点机器上还是在 8 核双节点机器上运行得更快。即使我们可以看到您的代码，它最终也将是一个有根据的猜测。有几点需要考虑：

*   跨套接字内存访问惩罚只会在缓存未命中时起作用，因此如果您的程序具有良好的缓存行为，那么 NUMA 不会对您造成太大伤害；
*   如果您的线程都在写入私有内存区域并且您受到写入内存带宽的限制，那么双插槽机器将最终提供帮助；
*   如果您受计算限制而不是内存带宽限制，那么 8 核可能优于 6；
*   如果您的性能受到缓存读取未命中的限制，那么 6 核单插槽盒开始看起来更好；
*   如果您有很多锁争用或写入共享数据，那么这又倾向于建议使用单套接字盒。

有很多变数，所以最好的办法是向您的惠普经销商询问与您正在考虑的配置相匹配的借用机器。然后，您可以测试您的应用程序，看看它在哪里表现最好，并相应地订购您的硬件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:46:35.360

没有更多细节，很难给出详细的答案。但是，希望以下内容可以帮助您解决问题。

如果你的线程代码是正确的（例如你正确地锁定了共享资源），你应该不会遇到任何由硬件架构变化引入的错误。不正确的线程代码有时会被特定平台如何处理 CPU 缓存访问/共享等细节所掩盖。

由于单芯片、多核与多芯片替代方案中的内存和缓存管理方法不同，您可能会遇到每个等效内核的应用程序性能发生变化。

具体来说，如果您正在查看每个 CPU 具有单独内存的硬件，我会假设每个线程都将被锁定到它启动的 CPU（否则，系统将不得不产生大量开销来将线程的内存移动到专用内存到不同的核心）。根据您的具体情况，这可能会降低整体系统效率。但是，每个内核单独的内存也意味着不同的 CPU 不会相互竞争给定的缓存线（每个双 CPU 上的 4 个内核仍可能竞争缓存线，但这比 6 个内核的争用要少正在竞争相同的缓存行）。

这种类型的缓存行争用称为*虚假共享*。我建议阅读以下内容以了解这是否可能是您面临的问题

[http://www.drdobbs.com/parallel/eliminate-false-sharing/217500206?pgno=3](http://www.drdobbs.com/parallel/eliminate-false-sharing/217500206?pgno=3)

底线是，如果您遵循正确的线程开发实践，应用程序行为应该是稳定的（除了自然依赖于线程调度细节的事情），但性能可能会根据您正在做的事情而有所不同。

# http - Nginix 代理缓存 - 如何检查它是否工作？

> ID：12733641
> 
> 赞同：0
> 
> 时间：2012-10-04T18:37:52.250
> 
> 标签：http, nginx, http-headers

我已经设置了我的 nginx.conf 文件以使用我在网上找到的教程中的代理缓存。但是，我试图弄清楚如何检查它是否真的有效。我在某处读过添加 add_header X-Cache-Status $upstream_cache_status; 在服务器部分的配置文件中应该添加一个缓存头到一个响应中，该响应将显示它是否来自缓存（具有 HIT、MISS 或 EXPIRED 的值）。但是，我想知道在哪里可以实际查看此标头（及其值），以及这是否是正确的方式/是否还有其他方式。一般来说，我对网络很陌生，如果这是一个菜鸟问题，我很抱歉。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:00:25.200

您有正确的方法，要查看发回的标头，您需要检查您的 http 客户端。显然如何做到这一点，如果你能做到，将取决于你的客户

这里有一些查看标题的简单方法：

```
1\. curl --head http://your-adress
2\. wget --server-response http://your-adress
3\. in firefox, install the [liveheaders][1] addon,
   go the <url>, rightclick->View page info->headers
4\. in opera open dragonfly with ctrl+i
   go to network->make request part of the tool,
   enter http://your-adress, 
   the result with headers will be shown in the response field 
```

# ipc - 共享内存 IPC（和其他 IPC）如何与多个 CPU 一起工作？

> ID：12733643
> 
> 赞同：1
> 
> 时间：2012-10-04T18:37:59.903
> 
> 标签：ipc, shared-memory

我正在研究一个只有一个共享内存区域和一些 GPIO/IRQ 连接的 2 个 CPU 的架构。它们是完全独立的，因此它们不共享任何缓存。然而，计划是让两者都在共享内存中的同一个 Linux OS 映像中执行。我想知道共享内存、信号等 IPC 机制如何工作？由于两个 CPU 在同一个 RAM 中执行，只要这些机制保存在 RAM 中，那么我假设当一个 CPU 去检查共享内存区域的状态时，只要没有一致性问题，它就可以工作。在这种设置中信号（软件中断）如何工作？这一切都在RAM中处理吗？会有连贯性问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:15:24.317

假设您谈论的是 SMP 配置，即具有多个 CPU 的大多数台式机/低端服务器机器，那么您应该永远不会看到任何一致性问题，尽管您可能会面临大面积共享内存的性能问题。例如，如果每个处理器（集合 {0, 1}）在其缓存中都有一些内存行，并且处理器 0 写入该行，它将更新它的缓存。如果内存位置设置为标记，它应该直写到该内存位置，并且另一个处理器的内存控制器将重新加载或使其对该行的缓存无效。

这在当代 CPU 中有些复杂，因为每个 CPU 模块都有自己的内存控制器，因此也有自己的专用内存。因此，由芯片内部的内存控制器来协商共享哪些缓存线，如果它们被某些处理器内核修改，则使共享缓存线无效。如果您想了解默认情况，您可以阅读[MESIF 协议](http://en.wikipedia.org/wiki/MESIF_protocol)，英特尔至强 CPU 使用该协议来保持多个处理器模块系统中的缓存一致性。**但底线是，在 SMP 系统中，您永远不应该看到不连贯的共享内存状态 - 只有当多个内核敲击同一内存区域时才会出现性能下降。**

# sql - 用于计算平均每月独立访问者的 MS SQL 查询

> ID：12733644
> 
> 赞同：1
> 
> 时间：2012-10-04T18:38:01.140
> 
> 标签：sql, tsql, aggregate-functions

我进行了 MSSQL 查询，计算过去 30 天的总唯一 IP 地址和总 IP 记录。

```
SELECT count(IPAddress) AS totalPageHits, count(DISTINCT IPAddress) AS totalVisitors, count(DateTime)
FROM recordTable
WHERE DateTime > GETDATE()-30 
```

现在我很难计算平均每日页面点击量和平均每日独立访问者。我尝试使用`AVG`，但它给了我一条错误消息，说“操作数数据类型 varchar 对 avg 运算符无效。”
任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:59:44.777

```
SELECT  AVG(HitCount) as AverageHits,
    AVG(UniqueHitCount) As AverageUniqueHits
FROM
(
SELECT  COUNT(IPAddress) as HitCount,
        COUNT(DISTINCT IPAddress) as UniqueHitCount,
        DATEDIFF(d, GETDATE(), DateTime) as Day
FROM tblHitCounter
WHERE DateTime > GETDATE() - 30
GROUP BY DATEDIFF(d, GETDATE(), DateTime)
) sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:46:10.903

您需要按天分组，然后取平均值：

```
select avg(totalPageHits) as avgDailyTotalPageHits,
       avg(totalVisitors) as avgDailyTotalVisitors
from (SELECT cast(DateTime as date) as thedate,
             count(IPAddress) AS totalPageHits,
             count(DISTINCT IPAddress) AS totalVisitors, count(DateTime) as cnt
      FROM recordTable
      WHERE DateTime > GETDATE()-30
      group by cast(DateTime as date)
     ) t 
```

# c++ - 有静态、常量成员时的赋值运算符？

> ID：12733645
> 
> 赞同：1
> 
> 时间：2012-10-04T18:38:05.153
> 
> 标签：c++, loops, operator-overloading

我必须与成员一起编写一个新课程，例如

```
class A
{
    static int i;
    const int j;
    char * str;
    ...
    ...
}; 
```

现在我想为它写赋值运算符。

```
A& A::operator=(const A& rhs)
{
    if(this != rhs)
    {
        delete [] str;
        str = new char[strlen(rhs.str)+1];
        strcpy(str, rhs.str);
    }
    return * this;
} 
```

这样对吗？我将忽略静态和常量成员（？）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T18:44:18.343

赋值运算符将一个对象复制到另一个对象中。由于相同类型的所有对象共享相同的静态成员，因此没有理由复制静态成员。

`const`成员是另一回事。您不能（嗯，不应该）更改它们，但是如果两个对象的 const 成员具有不同的值，则将一个对象复制到另一个对象可能不是一个好主意；const 成员不会有正确的值。这就是为什么编译器不会为具有 const 成员的类生成复制赋值运算符。因此，您首先必须确保复制这样的对象是有意义的，即使 const 成员的值错误；然后问自己为什么它有 const 成员，如果它们不影响它的行为。

参考也。（是的，这里有回声）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T18:40:53.893

静态成员不属于单个对象，因此您不需要复制它们。

`const`成员不能改变，所以你真的不能做一个正确的副本。参考也。

# javascript - 如何使用 jQuery 将行号添加到代码块？

> ID：12733647
> 
> 赞同：2
> 
> 时间：2012-10-04T18:38:19.253
> 
> 标签：javascript, jquery, formatting

如果我有以下 HTML 标记：

```
<div class="code">
<pre>
      int i = 1;
      int j = 2;
</pre>
</div> 
```

我想用 jQuery 把它变成这样的东西：

```
<table>
<tr><td>1</td><td><code>   int i = 1</code></td></tr>
<tr><td>2</td><td><code>   int j = 2</code></td></tr>
</table> 
```

我目前正在使用 SyntaxHighlighter，但这对于我的简单需求来说似乎太复杂了。

我怎样才能简单地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:42:38.727

您可以使用插件，但也可以非常轻松地构建一个简单的解决方案：

```
$('pre').html('<table>'+$.map($('pre').text().split('\n'), function(t, i){
    return '<tr><td>'+(i+1)+'</td><td><code>'+t+'</code></td></tr>';
}).join('')+'</table>');​ 
```

[**示范**](http://jsfiddle.net/WF5ED/1/)

* * *

而不是将每一行包装在一个`<code>`元素中，我更喜欢使用 CSS ：

javascript：

```
$('pre').html('<table>'+$.map($('pre').text().split('\n'), function(t, i){
    return '<tr><td>'+(i+1)+'</td><td>'+t+'</td></tr>';
}).join('')+'</table>');​ 
```

CSS：

```
pre table {
    font-family : courier;
    padding: 2px;
}
pre table td:first-child {
    color:#777;
    border-right: 1px solid #ccc;
} 
```

[**示范**](http://jsfiddle.net/McMSS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:46:16.683

代码：[jsfiddle](http://jsfiddle.net/g2XVg/)。使用换行符拆分整个文本。

```
var a = $("pre").text().split(/\n/g);
html = "<table>";
for(var k=0; k< a.length; k++){
    if($.trim(a[k]) != "" ){
  html += '<tr><td>'+ (k+1) +'</td><td><code>  ' +(a[k])+'</code></td></tr>';
    }
}
html +="</table>"; 
```

;

# java - 尝试写入文件，得到 FileNotFoundException（只读文件系统）

> ID：12733648
> 
> 赞同：0
> 
> 时间：2012-10-04T18:38:20.627
> 
> 标签：java, android, eclipse, robotium, filenotfoundexception

所以基本上我有一个利用 Robotium 在 android 设备上运行测试的程序，所有测试都运行良好。某些测试也有时间戳，我想将这些时间戳保存到一个文件中，以便我可以在其他地方使用它们，所以我写了一个简单的方法。

```
public static void saveTimestamps(Timestamp ts) throws IOException {
    FileWriter fw = new FileWriter(
        "C:\\Users\\brendonn\\workspace\\TestProject\\timestamps.txt");
    fw.write(ts.toString());
    fw.close();
} 
```

但是对于使用这种方法的每个测试，我都会得到

java.io.FileNotFoundException: /timestamps.txt（只读文件系统）

而且我不确定从这里去哪里。我不是想写电话，我只是在我的电脑上写一个文本文件。我可以在这台计算机上的其他课程中做完全相同的事情，并且可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:59:01.673

从快速浏览[Robotium](http://code.google.com/p/robotium/)主页可以看出，该工具在目标系统上运行！如果这是正确的，那么您的方法是尝试写入 Android 设备上不存在路径的内容。

请注意，Robotium 项目的首页谈到了从 PC 运行测试的未来功能。

您可以尝试将时间保存到目标设备上的文件中（应用程序需要在某处写入权限），或者您可以将数据作为日志消息发送出去并在您的 PC 上捕获日志输出。

# r - 搜索和替换字符

> ID：12733651
> 
> 赞同：0
> 
> 时间：2012-10-04T18:38:41.030
> 
> 标签：r

我有一个这样的字符串

```
x<-c("This is a test (120)") 
```

我需要替换 test 和 ( 之间的空格，这样文本就会像这样

```
x<-c("This is a test(120)") 
```

我试过这个

```
s<-gsub("\t\v\(", "", x) 
```

不工作，任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:46:37.697

使用前瞻：

```
gsub("\\s+(?=\\()", "", x, perl=TRUE) 
[1] "This is a test(120)" 
```

答案取决于您需要的更多规格。是否要删除左括号前面的所有空格？还是只有一个？还是只在包含数字的括号前面？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:41:27.827

一种简单的方法是使用`fixed = TRUE`如下：

```
gsub(" (", "(", x, fixed = TRUE) 
```

或者：

```
gsub(" \\(", "\\(", x) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T18:42:58.340

您必须在 R 中“双重转义”。一个用于 R，一个用于正则表达式：

```
s <- gsub('\\s\\(', '(', x) 
```

也就是说，根据您的具体用例，您可能希望它更健壮：

```
s <- gsub('(.+) \\((.+)\\)', '\\1(\\2)', x) 
```

# sql - SQL - 递归查询中 SELECT 内的 CASE 赋值

> ID：12733657
> 
> 赞同：0
> 
> 时间：2012-10-04T18:39:03.457
> 
> 标签：sql, sql-server, recursion, case, variable-assignment

我正在创建一个 SQL Server 2008 查询，该查询将输出公司中的员工列表以及他们所在的团队以及一个附加列。

组织树示例：

```
Level 0: CEO
Level 1: A, B, and C
Level 2:
    For A:1,2,3
    For B:4,5,6
    For C:7,8,9 
```

在我的结果集中，我应该看到三列——名称、级别（树的）和团队。对于 1,2 和 3，我会将“A”视为他们的团队，将 2 视为级别。对于 4,5 和 6，'B' 和 2 用于级别，依此类推。

我正在使用递归查询来导航树（那里没有问题），但是由于我需要将团队名称“携带”到查询中（如果有 8 级 - 它仍然应该显示第 1 级的人他们报告），我正在这样做：

```
(...)
UNION ALL
-- Recursive Member Definition
-- in here level increments one each time, and the team should output the child
-- of the top manager
SELECT  A.treenodeid, A.parentnodeid, A.email, LEVEL+1, team = 
                                    CASE LEVEL
                                        When 1 then SET @salead = A.Email
                                        Else @salead
                                    END
   FROM XX as A 
  INNER JOIN TeamsTable as B on A.parentnodeid = b.treenodeID 
```

由于**我试图使用 CASE 来检查级别是否为 1**（将团队名称更新为团队负责人的电子邮件名称），SQL 一直说在这种情况下我有“ **SET 附近的语法不正确**”。

是否可以在 CASE 中进行此类分配？我环顾四周，没有发现这是否适用于我的递归案例。

这是所有查询（假设根是“JohnSmith”）：

```
WITH TeamsTable (treenodeid, parentnodeid, email, Level, team)
AS
( 
    -- Anchor - Level starts with 0, and the team is empty for the top manager
    SELECT treenodeid,parentnodeid,email,0,''       
     FROM XX WHERE email = 'JohnSmith'

    UNION ALL

    -- Recursive Member Definition - in here level increments one each time, and the team should output the child of the top manager
    SELECT
        A.treenodeid, A.parentnodeid, A.email, LEVEL+1, team = 
                                CASE LEVEL
                                    When 1 then SET @salead = A.Email
                                    Else @salead
                                END
    FROM XX as A 
    INNER JOIN TeamsTable as B on A.parentnodeid = b.treenodeID
)

-- Statement that executes the CTE
SELECT *
FROM TeamsTable 
```

非常感谢，伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:53:08.440

为什么你需要这个变量？我没有看到它随后被使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:47:42.437

我会自下而上解决这个问题，而不是自上而下。

你还没有说 A、B、C 或 CEO 应该在哪个团队，所以我编造了。

我还以可用的形式包含了示例数据：

```
create table Org (
    ID int not null,
    Name varchar(10) not null,
    ParentID int null
)
go
insert into Org (ID,Name,ParentID) values
(1,'CEO',null),
(2,'A',1),
(3,'B',1),
(4,'C',1),
(5,'1',2),
(6,'2',2),
(7,'3',2),
(8,'4',3),
(9,'5',3),
(10,'6',3),
(11,'7',4),
(12,'8',4),
(13,'9',4) 
```

询问：

```
;With AllPeople as (
    select ID,ID as LastParentID,ParentID as NextParentID, CASE WHEN ParentID is null THEN 0 ELSE 1 END as Level
    from Org
    union all
    select ap.ID,ap.NextParentID,o.ParentID,Level + 1
    from
        AllPeople ap
            inner join
        Org o
            on
                ap.NextParentID = o.ID and
                o.ParentID is not null
), Roots as (
    select ID from Org where ParentID is null
), RootedPeople as (
    select * from AllPeople where NextParentID is null or NextParentID in (select ID from Roots)
), Names as (
    select
        oself.Name,
        oteam.Name as Team,
        Level
    from
        RootedPeople rp
            inner join
        Org oself on rp.ID = oself.ID
            left join
        Org oteam on rp.LastParentID = oteam.ID
)
select * from Names 
```

结果：

```
Name       Team       Level
---------- ---------- -----------
CEO        CEO        0
A          A          1
B          B          1
C          C          1
9          C          2
8          C          2
7          C          2
6          B          2
5          B          2
4          B          2
3          A          2
2          A          2
1          A          2 
```

CTE的解释：

*   `AllPeople`是一个递归查询，它爬上组织树直到它到达根。我们使用两列 (`LastParentID`和`NextParentID`) 来跟踪层次结构的两个级别 - 因为显然，一旦我们到达根，我们想要之前的级别。
*   `Roots`找到所有没有父母的人。这就是我们如何识别`AllPeople`完整的行，在，
*   `RootedPeople`我们找到从未成功找到任何父母的行，或者递归到达树顶的地方。
*   `Names`最后，我们重新加入`Org`表格，为个人和团队分配名称。这不是必需的 - 它本身可能是最终查询。

另请注意，由于`AllPeople`CTE 的构建方式是递归的，我们会在进行时计算级别 - 每次递归时，我们都会在`Level`该行所代表的值上加一。

# c# - Modal PopUp 内的 OK 按钮的事件处理程序未执行

> ID：12733658
> 
> 赞同：1
> 
> 时间：2012-10-04T18:39:06.320
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, modalpopupextender

这里的问题是，我在用户控件中有一个模态弹出扩展器，它是从主页内的另一个用户控件调用的，在母版页内。页面动态加载第一个用户控件，当我想显示模式对话框时，它将用户控件动态加载到占位符中，并在加载模式弹出用户控件时调用模式的 show 方法。

在模态中，我有一些文本框和一个按钮来将一些数据保存到数据库中。

问题是按钮 onClick 事件根本不会触发。我尝试在模态控件的 Onload 事件中添加一个断点，但奇怪的是，如果我在父用户控件的 Onthe 加载事件（包含模态弹出窗口的那个）中放置另一个断点，它不会进入那里断点确实在父用户控件的 OnLoad 事件处正确停止。我需要使用事件处理程序，因为我在那里调用存储过程将数据保存到数据库中。

请注意，我不想只关闭 modalpopup 窗口，我想验证一些文本框然后将一些数据保存到数据库中，这就是为什么我必须使用按钮的事件处理程序。

谢谢你的支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:04:07.193

这是我在需要模态对话框的应用程序中使用的功能。这些按钮实际上是由 Jquery 代码生成的，因此可以保证它们的事件被触发：

```
 $(function () {
           $(".addNew").dialog({
               autoOpen: false,
               width: 300,
               height: 300,
               modal: true,
               close: function (event, ui) {
           },
           buttons:
                   {
                       "Exclude Week": function () {

                           var cReason = $('#<%= ddlReasonCode.ClientID %> option:selected').text();
                           var Week = $('#<%= lblWeekChange.ClientID %>').text();

                           $.ajax(
                                   {
                                       type: "POST",
                                       url: "Ajax/ExcludeWeek.aspx",
                                       data: "week=" + Week + "&reasonCode=" + cReason,
                                       success: function (msg) {
                                           $('#resultDiv').text('Added to List');

                                       },
                                       error: function (x, e) {
                                           alert("The call to the server side failed. " + x.responseText);
                                       }
                                   }
                               );
                                   $(this).dialog("close");
                       },
                       "Cancel": function () {
                           $(this).dialog("close");
                       }
                   }
       });

   }); 
```

// 这是用于触发对话框的代码：

```
$(".addNew").dialog("open"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T14:35:39.457

对于给定的场景可能已经晚了，但是在我的项目中升级 AjaxControlToolikit 版本后我遇到了同样的问题。

问题是 ModalPopupExtender 属性 OkControlID：在较新版本的工具包服务器端单击按钮的处理程序不会执行，它将运行，而是运行 OnOkScript 客户端代码。

为了恢复旧行为，就我而言，我必须从模态弹出扩展器声明标记中删除 OkControlID 属性。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T23:44:40.727

不知何故，把我的整个模态弹出框放在外面`<asp:UpdatePanel>`我已经为我解决了这个问题。我会说我对更新面板不是很熟悉，但它确实有效！

# isset - PHP 中哪个更好：使用 '@' 抑制警告或使用 isset() 运行额外检查？

> ID：12733666
> 
> 赞同：10
> 
> 时间：2012-10-04T18:39:38.553
> 
> 标签：isset, php

例如，如果我实现一些简单的对象缓存，哪种方法更快？

```
1\. return isset($cache[$cls]) ? $cache[$cls] : $cache[$cls] = new $cls;

2\. return @$cache[$cls] ?: $cache[$cls] = new $cls; 
```

我在某处读到`@`需要大量时间来执行（我想知道为什么），尤其是在实际发出和禁止警告/通知时。`isset()`另一方面意味着额外的哈希查找。那么哪个更好，为什么？

我确实希望在全球范围内保持 E_NOTICE 处于开发和生产服务器上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T18:44:08.110

我不会担心哪种方法更快。那是一个微优化。我会更担心哪个代码更具可读性和更好的编码实践。

我当然更喜欢您的第一个选项而不是第二个选项，因为您的意图更加清晰。此外，最好通过始终明确地测试变量来避免边缘条件问题，以确保您得到预期的结果。例如，如果存储的类`$cache[$cls]`不是 type`$cls`怎么办？

就个人而言，如果我通常不希望 $cache 上的索引未设置，那么我也会将错误处理放在那里而不是使用三元操作。如果我可以合理地期望该索引会定期取消设置，那么我会让类`$cls`表现为单例并让您的代码类似于

```
return $cls::get_instance(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T18:46:00.697

`isset()`方法更好。它是明确声明索引可能未定义的代码。抑制错误是草率的编码。

根据这篇文章[10 Performance Tips to Speed Up PHP](http://www.wardontheweb.com/10-performance-tips-to-speed-up-php/)，警告需要额外的执行时间，并且还声称`@`操作符“昂贵”。

> 事先清理警告和错误也可以让你避免使用@错误抑制，这很昂贵。

此外，`@`不会抑制与自定义错误处理程序有关的错误：

[http://www.php.net/manual/en/language.operators.errorcontrol.php](http://www.php.net/manual/en/language.operators.errorcontrol.php)

> 如果您使用 set_error_handler() 设置了自定义错误处理函数，那么它仍然会被调用，但是这个自定义错误处理程序可以（并且应该）调用 error_reporting() 当触发错误的调用前面有 @ 时，它将返回 0 .
> 
> 如果启用了 track_errors 功能，则表达式生成的任何错误消息都将保存在变量 $php_errormsg 中。这个变量将在每个错误上被覆盖，所以如果你想使用它，请尽早检查。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-04T18:44:44.820

`@`暂时改变`error_reporting`状态，这就是为什么说它需要时间。

如果您期望某个值，验证它的第一件事是检查它是否已定义。如果你有通知，那可能是因为你遗漏了一些东西。`isset()`在我看来，使用是一种很好的做法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T22:53:02.550

我对这两种情况都进行了计时测试，使用各种长度的哈希键，还使用哈希表的各种命中/未命中率，以及使用和不使用`E_NOTICE`.

结果是：与`error_reporting(E_ALL)`变`isset()`体相比，速度快了`@`20-30%。使用的平台：OS X 10.8 上的命令行 PHP 5.4.7。

但是，`error_reporting(E_ALL & ~E_NOTICE)`短哈希键的差异在 1-2% 以内，而长哈希键（16 个字符）的差异在 10% 以内。

请注意，第一个变体执行 2 次哈希表查找，而 with 的变体`@`只执行一次查找。

因此，`@`在所有情况下都较差，我想知道是否有任何优化它的计划。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T19:14:13.643

我认为您的优先事项在这里有些混乱。

首先，如果您想获得更快的真实世界测试 - 对其进行负载测试。如前所述，尽管压制可能会更慢。

这里的问题是，如果您对常规代码有性能问题，您应该升级您的硬件，或者优化您的代码的大逻辑，而不是阻止正确执行和错误检查。

从长远来看，抑制错误以窃取最微小的速度增益对您没有任何好处。特别是如果您认为此错误可能会一次又一次地发生，并导致您的应用程序运行速度比捕获并修复错误时更慢。

# c++ - 将通用结构作为接口中的参数传递

> ID：12733668
> 
> 赞同：3
> 
> 时间：2012-10-04T18:39:55.230
> 
> 标签：c++, templates, parameters, struct

在 C++ 中，假设我有一个将消息包装在通用结构中的消息传递系统：

```
template<typename T>
struct Message
{
  std::string Name;
  T Data;
}; 
```

我还有一个接口，其中包含需要使用此结构的纯通用版本的函数：

```
class Interface
{
  public:
    virtual ~Interface() { }
    virtual void Receive(Message& message) = 0;
    virtual Message Send() = 0;
}; 
```

但是，`Message`不再命名类型；诸如`Message<float>`和`Message<std::string>`名称类型之类的东西。由于将要实现的类`Interface`想要捕获不同`Message`的 ，我不能只定义一个特定的类型。

我能想到解决这个问题的唯一方法是撕掉模板并使用继承，但是我会在我的代码中乱扔诸如 and 之类的东西`IntMessage`，`BoolMessage`这看起来非常难看。关于如何以我想要的方式做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:53:51.923

~~一种简单的方法是将`Message`类型拆分为层次结构：~~

 ~~```
struct MessageBase {
  std::string Name;
};
template<typename T>
struct Message : MessageBase
{
  T Data;
}; 
```~~ 

~~然后你可以`MessageBase&`通过接口。~~

[前面的不行。该函数将能够接受任何`MessageBase&`对象，但`Receive`似乎是关于在参数中存储一条编译时类型未知的消息。虽然如果您不介意动态分配，您可以拥有一个`Message`包含名称和一个指向 a 的指针`MessageBase`，然后是`MessageImpl`（上面的模板）的不同实现]

另一种常见的方法是将所有可能的消息添加到联合并传递联合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:46:11.437

为什么不将您的界面定义为模板？

```
template<typename T>
class Interface
{
  public:
    virtual ~Interface() { }
    virtual void Receive(Message<T>& message) = 0;
    virtual Message<T> Send() = 0;
}; 
```

# c# - 选择屏幕区域的最简单方法

> ID：12733669
> 
> 赞同：0
> 
> 时间：2012-10-04T18:39:56.613
> 
> 标签：c#, wpf, crop, screen-capture

我正在用 C# + WPF 编写一个简单的程序，记录/序列化用户鼠标和键盘活动，然后他可以播放它。

它的一些功能需要用户指定屏幕中小区域的坐标。将左上角和右下角的坐标输入到文本框不是很舒服，所以我想以类似的方式选择它，如 Windows Snipping Tool、ZScreen/ShareX 等。

类似的东西，也许简化了

![](../Images/f8c7170e39766661a11c52cae7e8ecc8.png)

实现它的最简单方法是什么？

我用谷歌搜索了很多，但没有找到任何简单明了的东西。[http://cropper.codeplex.com/](http://cropper.codeplex.com/)源代码看起来太复杂了，我不需要图像，只需要相对于屏幕的坐标。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T18:44:06.483

您可以尝试使用这个静态类`CaptureScreen`和`Capture method`

```
static public class CaptureScreen
{
    public static BitmapSource Capture(Rect area)
    {
        IntPtr screenDC = GetDC(IntPtr.Zero);
        IntPtr memDC = CreateCompatibleDC(screenDC);
        IntPtr hBitmap = CreateCompatibleBitmap(screenDC, (int)SystemParameters.VirtualScreenWidth, (int)SystemParameters.VirtualScreenHeight);
        SelectObject(memDC, hBitmap); // Select bitmap from compatible bitmap to memDC

        // TODO: BitBlt may fail horribly
        BitBlt(memDC, 0, 0, (int)area.Width, (int)area.Height, screenDC, (int)area.X, (int)area.Y, TernaryRasterOperations.SRCCOPY);
        BitmapSource bsource = Imaging.CreateBitmapSourceFromHBitmap(hBitmap, IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());

        DeleteObject(hBitmap);
        ReleaseDC(IntPtr.Zero, screenDC);
        ReleaseDC(IntPtr.Zero, memDC);
        return bsource;
    }

    #region WINAPI DLL Imports

    [DllImport("gdi32.dll", ExactSpelling = true, PreserveSig = true, SetLastError = true)]
    static extern IntPtr SelectObject(IntPtr hdc, IntPtr hgdiobj);

    [DllImport("gdi32.dll")]
    private static extern IntPtr CreateCompatibleBitmap(IntPtr hdc, int nWidth, int nHeight);

    [DllImport("gdi32.dll", SetLastError = true)]
    private static extern IntPtr CreateCompatibleDC(IntPtr hdc);

    [DllImport("gdi32.dll")]
    private static extern bool DeleteObject(IntPtr hObject);

    [DllImport("gdi32.dll")]
    private static extern IntPtr CreateBitmap(int nWidth, int nHeight, uint cPlanes, uint cBitsPerPel, IntPtr lpvBits);

    [DllImport("user32.dll")]
    private static extern IntPtr GetDC(IntPtr hWnd);

    [DllImport("user32.dll")]
    private static extern int ReleaseDC(IntPtr hWnd, IntPtr hDC);

    private enum TernaryRasterOperations : uint
    {
        /// <summary>dest = source</summary>
        SRCCOPY = 0x00CC0020,
        /// <summary>dest = source OR dest</summary>
        SRCPAINT = 0x00EE0086,
        /// <summary>dest = source AND dest</summary>
        SRCAND = 0x008800C6,
        /// <summary>dest = source XOR dest</summary>
        SRCINVERT = 0x00660046,
        /// <summary>dest = source AND (NOT dest)</summary>
        SRCERASE = 0x00440328,
        /// <summary>dest = (NOT source)</summary>
        NOTSRCCOPY = 0x00330008,
        /// <summary>dest = (NOT src) AND (NOT dest)</summary>
        NOTSRCERASE = 0x001100A6,
        /// <summary>dest = (source AND pattern)</summary>
        MERGECOPY = 0x00C000CA,
        /// <summary>dest = (NOT source) OR dest</summary>
        MERGEPAINT = 0x00BB0226,
        /// <summary>dest = pattern</summary>
        PATCOPY = 0x00F00021,
        /// <summary>dest = DPSnoo</summary>
        PATPAINT = 0x00FB0A09,
        /// <summary>dest = pattern XOR dest</summary>
        PATINVERT = 0x005A0049,
        /// <summary>dest = (NOT dest)</summary>
        DSTINVERT = 0x00550009,
        /// <summary>dest = BLACK</summary>
        BLACKNESS = 0x00000042,
        /// <summary>dest = WHITE</summary>
        WHITENESS = 0x00FF0062
    }

    [DllImport("gdi32.dll")]
    private static extern bool BitBlt(IntPtr hdc, int nXDest, int nYDest, int nWidth, int nHeight, IntPtr hdcSrc, int nXSrc, int nYSrc, TernaryRasterOperations dwRop);

    #endregion
} 
```

# visual-studio-2012 - VS2012 中的 TFS Pending Changes 键盘命令

> ID：12733672
> 
> 赞同：5
> 
> 时间：2012-10-04T18:40:01.180
> 
> 标签：visual-studio-2012

我正在将 VS2012 与 TFS2010 一起使用（这可能重要也可能不重要）。

我似乎无法获得任何*应该*与 Pending Changes 窗口一起工作的键盘命令，你知道的，工作。

我尝试了[此处](http://alexmg.com/post/2009/09/05/Comparison-keyboard-shortcuts-for-Pending-Changes-in-TFS.aspx)列出的步骤，并且尝试将键绑定到键盘对话框中列出的“CompareWith”命令。唯一真正看起来做任何事情的是 File.* 命令，但这些命令在打开的文件上运行，而不是 Pending Changes 窗口。

我已经看到像`Alt`- `I`(check-in) 这样的命令有效，但它们没有出现在键盘设置中。

VS2012 中的新窗口是否有自己的一组在其他地方设置的键盘设置？我试图达到一个只有键盘的工作流程来进行比较、排除或撤消。

**更新**：这真的很奇怪。我实际上可以在右键单击对话框中看到快捷键，但按下它们没有任何作用。然后我尝试将其更改为和弦，并收到错误消息：“组合键 (Ctrl+Shift+Q, Ctrl+Shift+Q) 绑定到当前不可用的命令 (Tfs.ContextPendingChangesPageExcludeChanges)”

**更新 2**：我发现[了这篇博](http://blogs.msdn.com/b/buckh/archive/2012/06/06/team-explorer-2012-keyboard-shortcuts.aspx)文，其中列出了更多快捷方式，但实际上并未对单个文件进行操作。为了快速参考，这是他的清单：

```
Shortcut    Team Explorer Page
Ctrl+'      Search
Ctrl+0,H    Home
Ctrl+0,P    Pending Changes
Ctrl+0,M    My Work
Ctrl+0,W    Work Items
Ctrl+0,B    Build
Ctrl+0,R    Reports
Ctrl+0,D    Documents
Ctrl+0,S    Settings
Ctrl+0,A    Web Access – team home page
F5          Refresh
Ctrl+Up     Move focus to the previous visible section header
Ctrl+Down   Move focus to the next visible section header
Alt+Left    Navigate backward
Alt+Right   Navigate forward
Alt+Home    Focus the navigation control
Alt+0       Focus the page top level content
Alt+[1-9]   Focus the visible section [1-9] level content
Alt+Up      Focus the previous visible section content
Alt+Down    Focus the next visible section content 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:40:22.230

在 VS 2012 RTM 的某些团队资源管理器页面中存在键绑定错误。这已在下一个 VS 2012 更新中得到修复。

-乍得

# jquery - 带有 MVC 错误的 JQuery 帖子

> ID：12733674
> 
> 赞同：0
> 
> 时间：2012-10-04T18:40:03.217
> 
> 标签：jquery, post

我在出错的 MVC 应用程序帖子中使用 JQuery，有没有办法告诉错误是什么？

示例代码 -

```
 $.post("/Path/Action", form, function (returnHtml) {

        //do stuff

    }).error(function () { alert("error"); }); 
```

我附加了“.error”调用，但这并没有告诉我错误的原因。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:55:53.970

```
.error( function (jqXHR, status, error) {
    alert(jqXHR);
    alert(status),
    alert(error);
 }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:58:02.717

```
$.ajax({  
    type: 'POST',  
    url: '/Path/Action',  
    data: form,  
    success: function (data) {  
        console.debug(data);  
    },  
    error: function (data) {  
        console.debug(data);  
    }  
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:58:05.543

希望您根据我的评论自行调试它，但您可以通过这种方式获取信息

```
$.post("/error/").error( function(xhrObject,statusName,statusText) {
    console.log(xhrObject,statusName,statusText);  //Passed in info via arguments
    console.log(xhrObject.status);  //get the status code via the xhr object
});​ 
```

[jsFiddle 示例](http://jsfiddle.net/vxYUm/)

# mysql - 插入触发器后可以做更新吗？

> ID：12733676
> 
> 赞同：0
> 
> 时间：2012-10-04T18:40:11.770
> 
> 标签：mysql, sql, triggers, mysql-5.5

我是创建触发器的新手，但我需要它，因为我正在为某些 ID 使用持久存储。

我有`RECEIPT`一个列的表`RECEIPT_ID`

以及`CONFIG_DB`带有列和值的表：

```
NAME               VALUE
---------------    -----   
NEXT_RECEIPT_ID      1 
```

我创建了这个触发器

```
CREATE TRIGGER UPDATE_RECEPCION_ID

AFTER INSERT ON RECEIPT

FOR EACH ROW 

BEGIN

UPDATE CONFIG_DB SET VALUE=VALUE+1;

END    
; 
```

我不知道这是否可以......我只想要它在我插入一个新`RECEIPT_ID`的`VALUE`in`CONFIG_DB`增加 1 后。非常感谢。

编辑：我在 Mysql Workbench 5.2.40 和 Mysql Server 5.5.25 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:15:18.200

使用以下查询创建触发器

```
delimiter |
CREATE
    TRIGGER `UPDATE_RECEPCION_ID` 
     AFTER INSERT ON `RECEIPT`
    FOR EACH ROW BEGIN
     UPDATE CONFIG_DB SET VALUE=VALUE+1 
     WHERE  NAME='NEXT_RECEIPT_ID';
    END;
    | 
```

# c# - FluentValidation 和服务器+客户端远程验证器

> ID：12733679
> 
> 赞同：3
> 
> 时间：2012-10-04T18:40:22.607
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, validation, fluentvalidation

我正在尝试为 FluentValidation 构建一个通用的远程验证器扩展，类似于[此线程](http://fluentvalidation.codeplex.com/discussions/258348)中讨论的内容。[此博客](http://nripendra-newa.blogspot.com/2011/05/fluent-validation-remote-validation.html)中发布了客户端解决方案，但我需要远程验证器同时在客户端和服务器端工作。

规则看起来像这样：

```
IRuleBuilderOptions<T, TProperty> Remote(string action, 
                                         string controller, 
                                         Expression<Func<T, object>>[] properties, 
                                         IComparable[] values, 
                                         HttpVerbs httpVerb = HttpVerbs.Get); 
```

其中：
`action`and`controller`是动作/控制器的名称
`properties`是模型属性表达式的数组 (m => m.FirstName)
`values`是文字值的数组

为验证器设置规则可能如下所示：

```
this.RuleFor(m => m.Username).Remote("UsernameUnique", "RemoteController", null, null); 
```

我想我可以弄清楚客户端部分，因为我将构建一个 jQuery 适配器来调用操作方法，并传入值。

我不知道如何从`IsValid`验证器的方法中调用相同的控制器操作。

以下是我考虑过的一些选项：

*   以某种方式远程调用控制器操作，创建存根上下文。不确定如何使用 IoC 注入依赖项。服务定位器？

*   使用普通的 .NET 方法，并从验证器和操作方法中调用它。

我认为这将是一个强大的验证器，但似乎我想出的任何选项都将是丑陋的，即使我设法让它工作。

有没有更好的方法来解决这个问题？我对任何可行的方法都持开放态度，只是找不到很多选择，至少没有优雅的选择。但是在这一点上，如果没有其他选择，我什至可以接受一个非优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:47:23.120

您可以添加一个额外的方法参数，该参数采用 lambda 函数用于控制器的操作方法。

这很草率，我目前正在研究将远程验证集成到 FluentValidation 框架中的方法。如果我有别的想法，我会告诉你的。

# php - 在 Web 输入中发现代码，PHP

> ID：12733683
> 
> 赞同：1
> 
> 时间：2012-10-04T18:40:45.740
> 
> 标签：php, content-management-system, wysiwyg

我正在为我的一个站点编写一个基本的 CMS，并且遇到了一些页面需要动态服务 PHP 和 JS 的问题，而其他页面则是普通的 HTMl。我希望有一个设置可以允许需要它的页面使用它，并将加载 ACE 编辑器而不是不同的所见即所得编辑器。我想拒绝在非代码启用页面上编码的任何输入。如何确保数据库中包含的所有 JS 和 PHP 都不会执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:56:12.803

你真的不想这样做。如果你做错了，除了安全问题之外，这将成为一个绝对的维护噩梦——没有很好的方法将 CMS 页面放入版本控制中。在开发环境和实时站点之间测试和迁移代码充其量会变得脆弱。 [在我的另一篇文章](https://stackoverflow.com/questions/447878/what-are-some-of-drupals-shortcomings/448644#448644)中，我详细介绍了运行 Drupal 站点时遇到的问题，而您也开始走类似的道路。

话虽如此，如果您坚持执行此计划，那么要走的路是使用适当的模板引擎（我最近一直在使用[h2o](http://www.h2o-template.org/)）并将内容转义的担忧留给它。我要做的另一件事是将 PHP 和代码的可显示部分分开，方法是将它们放在完全独立的字段中。这不仅为您提供更清晰的代码（记住，混合显示和逻辑是不好的），而且您**始终**可以将显示的内容视为“哑”文本，并且只允许它通过模板访问 PHP 的输出。

# tomcat - Tomcat7 加载 server.xml 失败

> ID：12733684
> 
> 赞同：3
> 
> 时间：2012-10-04T18:40:46.953
> 
> 标签：tomcat

尝试将我们的应用程序从 tomcat5 移动到 tomcat7 时遇到了很多麻烦。我终于找到了这个日志，它给了我一个线索，但它非常模糊。这就是说：

```
+ /usr/java/bin/java -Dnop -Dfile.encoding=UTF-8 -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xmx1g -Xms256m -Djava.endorsed.dirs=/usr/local/apache-tomcat-7.0.30/endorsed -classpath /usr/local/apache-tomcat-7.0.30/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.30/bin/tomcat-juli.jar -Dcatalina.base=/software/tomcat-sbox7 -Dcatalina.home=/usr/local/apache-tomcat-7.0.30 -Djava.io.tmpdir=/software/tomcat-sbox7/temp org.apache.catalina.startup.Bootstrap start 
Oct 4, 2012 2:13:10 PM org.apache.catalina.startup.Catalina initDirs
SEVERE: Cannot find specified temporary folder at /software/tomcat-sbox7/temp
Oct 4, 2012 2:13:10 PM org.apache.catalina.startup.Catalina load
WARNING: Unable to load server configuration from [/software/tomcat-sbox7/conf/server.xml]
Oct 4, 2012 2:13:10 PM org.apache.catalina.startup.Catalina initDirs
SEVERE: Cannot find specified temporary folder at /software/tomcat-sbox7/temp
Oct 4, 2012 2:13:10 PM org.apache.catalina.startup.Catalina load
WARNING: Unable to load server configuration from [/software/tomcat-sbox7/conf/server.xml]
Oct 4, 2012 2:13:10 PM org.apache.catalina.startup.Catalina start
SEVERE: Cannot start server. Server instance is not configured. 
```

我不知道为什么这些东西无法加载。有没有一个地方我可以找到更全面的日志，或者你有一些想法我可以尝试完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:56:58.407

事实证明，应用程序 catalina.properties 中的 common.loader 是：

```
common.loader=${catalina.home}/lib 
```

它必须是：

```
common.loader=${catalina.home}/lib,${catalina.home}/lib/*.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-10T10:41:45.053

我觉得这很不寻常，因为它没有得到正确的解释，而且它被大量使用。我的偏好是使用 Linux 安装，然后使用 service 命令标准化启动：

```
service tomcat7 start 
```

如果您在此之后看到命令，您会看到在操作系统级别启动了一个详细的 java 应用程序，其中包含很多参数，更具体的参数如代理、主机名、路径等。我发现这比仅仅运行 catalina.sh run 更合适，为了防止目录出现问题，你必须为目录、路径等添加带有开关的参数

这种方法还可以防止分散的 conf、admin 和 temp 目录出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:06:20.643

最好的选择是 $CATALINA_HOME/logs 中的默认日志，默认命名为 catalina.out。如果您转到 Tomcat 的 conf 目录并编辑 server.xml，您可以启用 Valve 配置以打印访问日志，但这对您没有特别的帮助。

这里的错误（猜测）似乎是tomcat配置（来自第一行）期望/software/tomcat-sbox7/temp中的那些目录存在并且它们不存在？这是托管的 Tomcat 实例吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T17:17:37.043

此类问题通常与 Linux 权限有关。特别是当你看到线条说 -

`'SEVERE: Cannot find specified temporary folder at /software/tomcat-sbox7/temp'`

并且您确定该目录存在。

您可能想检查哪个 Linux 用户用于启动 Tomcat JVM。尝试以该特定用户身份登录并尝试访问该特定目录。就我而言，这就是问题所在。更正了此权限问题，问题已解决！

# java - 错误：“延迟绑定失败 （您是否忘记继承所需的模块）？”

> ID：12733688
> 
> 赞同：0
> 
> 时间：2012-10-04T18:40:54.303
> 
> 标签：java, gwt

我的 GWT 项目有问题。该项目可以编译，但是当我尝试作为 Web 应用程序进行调试时，出现以下错误。我是新手，所以任何关于我如何解决这个问题的指导都将不胜感激。如果您需要查看我的代码，请告诉我，我很乐意发布它。

此错误消息反复出现：

“无法通过延迟绑定创建 'com.gwt ....myEntryPointClass' 的实例。”

```
11:39:03.438 [ERROR] [helpdesktest] Failed to create an instance of 'com.gwt.HelpDeskTest.client.HelpDeskTest' via deferred binding 
java.lang.RuntimeException: Deferred binding failed for 'com.gwt.HelpDeskTest.client.HelpDeskTest' (did you forget to inherit a required module?)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)
at com.google.gwt.core.client.GWT.create(GWT.java:97)
at com.gwt.HelpDeskTest.client.HelpDeskTest.<init>(HelpDeskTest.java:23)
at sun.reflect.GeneratedConstructorAccessor14.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
at com.google.gwt.core.client.GWT.create(GWT.java:97)
at com.gwt.HelpDeskTest.client.HelpDeskTest.<init>(HelpDeskTest.java:23)
at sun.reflect.GeneratedConstructorAccessor14.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
at com.google.gwt.core.client.GWT.create(GWT.java:97) 
```

我在浏览器窗口中收到此消息：

```
Exception while loading module com.gwt.HelpDeskTest.client.HelpDeskTest. See Development  Mode        for    details.
com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:503)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:375)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at   com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Thread.java:680) 
```

最后，我在控制台窗口中收到了这条消息。

```
*** java.lang.instrument ASSERTION FAILED ***: "!errorOutstanding" with message transform method call failed at ../../../src/share/instrument/JPLISAgent.c line: 806 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:39:18.707

这是创建我的服务实例的代码：

```
public class HelpDeskTest implements EntryPoint {
private final HelpDeskTestServiceAsync helpDeskTest= GWT.create (HelpDeskTest.class); 
```

这是我必须将其更改为：

```
public class HelpDeskTest implements EntryPoint {
private final HelpDeskTestServiceAsync helpDeskTest= GWT.create (HelpDeskTestService.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:31:28.983

`com.gwt.HelpDeskTest.client.HelpDeskTest`课程真的`HelpDeskTest`在包里`com.gwt.HelpDeskTest.client`吗？通常 Java 包名应该是小写的。

假设这是您想要的，是包中的模块文件`com.gwt.HelpDeskTest`吗？您的下一个错误表明模块位于`com.gwt.HelpDeskTest.client.HelpDeskTest`，这与入口点相同 - 这没有意义。

典型的 GWT 项目设置有一个模块文件（以 结尾`.gwt.xml`）和一个`client`包，其中包含仅客户端代码，包括入口点本身。例如

```
com/
   company/
      project/
         MyProject.gwt.xml
         client/
            MyProjectEntryPoint.java
            ... 
```

入口点的全名是 then `com.company.project.client.MyProjectEntryPoint`，它应该列在 中的`<entry-point>`标记中`MyProject.gwt.xml`。

# php - 将时间戳格式设置为“2010 年 8 月 17 日上午 7:15”

> ID：12733689
> 
> 赞同：-3
> 
> 时间：2012-10-04T18:40:58.393
> 
> 标签：php, mysql

如何将 MySQL 生成的时间戳格式化为“2010 年 8 月 17 日上午 7:15”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:45:46.317

你应该看看[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)：

```
select date_format(yourdate, '%M %d, %Y %l:%i %p') yourNewDate
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f105a/5)

如果您有多个需要格式化的字段，那么您仍将使用 Date_format：

```
select date_format(yourdate1, '%M %d, %Y %l:%i %p') yourNewDate1,
  date_format(yourdate2, '%M %d, %Y %l:%i %p') yourNewDate2
from yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:47:33.470

`date("U",$timestamp)`接近于您想要的格式。如果你想要更接近的东西，你将不得不构建日期格式字符串。大概是这样`date("F j, Y g:i a", $timestamp)`的。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:48:33.720

您也可以在 PHP 中进行转换

```
$date = date("F d, Y g:i a", $timestampFromMySQL); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T18:43:37.200

尝试在 mysql 中使用[date_format](http://www.w3schools.com/sql/func_date_format.asp)

```
 DATE_FORMAT(date_field,'%M %d, %Y %h:%i %p') 
```

查询例如：

```
 select date_format(date_field, '%M %d, %Y %l:%i %p') as new_date
  from your_table 
```

# objective-c - 如何获得可可字体的大小

> ID：12733691
> 
> 赞同：0
> 
> 时间：2012-10-04T18:41:00.277
> 
> 标签：objective-c, cocoa, osx-lion

我有一个 NSString 及其属性（字典）。我可以用这个得到一个 NSAttributedString 。
我需要知道字符串的大小。使用字体我只能使用 capHeight 方法获取高度，但我还需要宽度，如何获取此信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:48:48.470

看一眼：

```
- (NSRect)boundingRectWithSize:(NSSize)size options:(NSStringDrawingOptions)options 
```

在 NSAttributedString 上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:48:59.877

你可以这样做：

```
NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:font, NSFontAttributeName, nil];
NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:string attributes:attributes];
NSSize size = [attrString size];
CGFloat width = size.width;
CGFloat height = size.height;
[attrString release];

NSLog(@"String width: %f", width);
NSLog(@"String height: %f", height); 
```

# jquery - 使用下拉选择选项文本填充输入文本

> ID：12733694
> 
> 赞同：0
> 
> 时间：2012-10-04T18:41:07.517
> 
> 标签：jquery, select

我有一个分类广告网站，当用户从下拉列表中选择一些选项时，我希望在发布广告表单中显示该选项中的文本以自动填充输入字段。我设法使用 .val 获取该选择的值，但是当我使用 .text 时，输入字段会填充选择中可用的所有选项。我有一个演示可以更好地理解[jsfiddle.net](http://jsfiddle.net/A8Nxp/240/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:46:45.280

如果您只想要选定的项目`text`，则必须使用如下`:selected`选择器：

```
var selected_item = $(":selected", this).text() 
```

参见：[jsfiddle.net](http://jsfiddle.net/erwin21/A8Nxp/246/)

[有关:selected 选择器](http://api.jquery.com/selected-selector/)的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:49:15.310

要获取下拉列表的选定值，请使用 val() 而不是 text()。改变：

```
var selected_item = $(this).text() 
```

至

```
 var selected_item = $(this).val() 
```

# cpanel - 如何在iptables centos cpanel 11中打开2195端口

> ID：12733697
> 
> 赞同：0
> 
> 时间：2012-10-04T18:41:13.103
> 
> 标签：cpanel, iptables, centos5

请帮我。如何在 iptables ...centos 服务器和安装的 cpanel 11 中添加 2195 端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:49:22.580

如果您有 root 密码并且可以通过 ssh 登录，请运行以下命令：

```
iptables -I OUTPUT -p tcp --dport 2195 -j ACCEPT
/etc/init.d/iptables stop
/etc/init.d/iptables start 
```

# asp.net - MVC SelectList 设置视图中控件的宽度

> ID：12733700
> 
> 赞同：0
> 
> 时间：2012-10-04T18:41:20.230
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

感谢我到这里的帮助 - 我的控制器中有以下代码：

```
 var stands = db.Stands.ToList().Where(s => s.ExhibitorID == null)
              .Select(s => new SelectListItem
              {
                  Value = s.StandID.ToString(),
                  Text = s.Description + "-- £" + s.Rate.ToString()
              });

        ViewBag.StandID = new SelectList(stands, "Value", "Text"); 
```

并像这样在我的视图中呈现它：

```
<div class="editor-field"> 
    @Html.DropDownList("StandID", new {style = "width:150px"})
</div> 
```

但是在视图中，我收到以下错误：

CS1928：“System.Web.Mvc.HtmlHelper”不包含“DropDownList”的定义和最佳扩展方法重载“System.Web.Mvc.Html.SelectExtensions.DropDownList(System.Web.Mvc.HtmlHelper, string, string )' 有一些无效的参数

当我删除新的 {style=....

如何设置下拉列表的宽度，而不会出现此错误？

谢谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:08:01.923

您需要进行一些更改。首先，从这里更改您的控制器代码：

```
ViewBag.StandID = new SelectList(stands, "Value", "Text"); 
```

对此：

```
ViewBag.StandList = new SelectList(stands, "Value", "Text"); 
```

其次，将您的助手更改为：

```
@Html.DropDownList("StandID", (SelectList)ViewBag.StandList, new {style = "width:150px"}) 
```

重要的是要确保html元素名称与项目集合不同，否则会出现各种问题。

使用强类型视图模型会更好。

```
@Html.DropDownListFor(m => m.StandID, Model.StandList, new {style="width:150px;"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:47:12.200

您没有将正确的参数传递给@Html.DropDownList。从这里的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/dd470380 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd470380(v=vs.100).aspx)

看起来您想使用以下重载：

```
public static MvcHtmlString DropDownList(
    this HtmlHelper htmlHelper,
    string name,
    IEnumerable<SelectListItem> selectList,
    Object htmlAttributes
) 
```

因此，您的第一个参数是您正确的名称字符串，但是您需要 SelectList 作为您的第二个参数，您的 HtmlAttributes 作为您的第三个参数。试试这样：

```
<div class="editor-field">
     @Html.DropDownList("StandID", ViewBag.StandID, new {style = "width:150px"})
</div> 
```

更新：

不确定您是否将正确的东西传递到您的 ViewBag 中。您将它设置为等于一个新的 SelectList 对象，并且 DropDownList 需要一个 SelectListItems 的集合。

在你的控制器中试试这个：

```
var stands = db.Stands.ToList().Where(s => s.ExhibitorID == null)                  
    .Select(s => new SelectListItem                  
    {                      
        Value = s.StandID.ToString(),                      
        Text = s.Description + "-- £" + s.Rate.ToString()
    });                    

ViewBag.StandID = stands; 
```

更新：

这是我如何完成同样的事情。我有一个返回 IEnumerable 的静态方法，然后在我的视图中引用该方法。（对不起VB语法）

```
Namespace Extensions

    Public Module Utilities

        Public Function SalutationSelectList(Optional ByVal Salutation As String = "") As IEnumerable(Of SelectListItem)

            Dim ddl As New List(Of SelectListItem)

            ddl.Add(New SelectListItem With {.Text = "", .Value = "", .Selected = If(Salutation = "", True, False)})
            ddl.Add(New SelectListItem With {.Text = "Mr.", .Value = "Mr.", .Selected = If(Salutation = "Mr.", True, False)})
            ddl.Add(New SelectListItem With {.Text = "Ms.", .Value = "Ms.", .Selected = If(Salutation = "Ms.", True, False)})
            ddl.Add(New SelectListItem With {.Text = "Mrs.", .Value = "Mrs.", .Selected = If(Salutation = "Mrs.", True, False)})
            ddl.Add(New SelectListItem With {.Text = "Dr.", .Value = "Dr.", .Selected = If(Salutation = "Dr.", True, False)})

            Return ddl

        End Function
    End Module
End Namespace

@Html.DropDownListFor(Function(org) org.Salutation, SalutationSelectList()) 
```

# cordova - onRestore Phonegap/inAppPurchaseManager 插件的购买按钮代码

> ID：12733704
> 
> 赞同：0
> 
> 时间：2012-10-04T18:41:32.603
> 
> 标签：cordova, phonegap-plugins

我正在为 phonegap 使用 InAppPurchaseManager 插件我不确定如何让恢复购买按钮代码工作。我什至不确定这个插件是否包含所有正确的代码。谁能指出我正确的方向？

这是电话。只是不确定下一步该怎么做。

window.plugins.inAppPurchaseManager.onRestored = function(transactionIdentifier, productId, transactionReceipt) { console.log('restored: ' + productId); /* 请参阅开发人员指南了解如何处理此操作的详细信息 */ }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:38:58.647

知道了！您所要做的就是添加这个。

```
<script type="text/javascript" charset="utf-8">
   $(".ftk50").click(function() {
      window.plugins.inAppPurchaseManager.restoreCompletedTransactions(); 
    });
</script>

<a href="#" class="ftk50">Restore All Purchases</a> 
```

# ios - iOS 构建失败；/bin/sh 没有这样的文件或目录

> ID：12733705
> 
> 赞同：16
> 
> 时间：2012-10-04T18:41:34.740
> 
> 标签：ios, xcode, build, compiler-errors, sh

我正在处理我的应用程序，然后不知从何而来，我得到了这个构建错误，无法弄清楚为什么它不会消失。显然它认为我缺少某种脚本。其他人知道为什么吗？我正在使用 Xcode 4.5.1。

> /bin/sh：/Users/JonErickson/Library/Developer/Xcode/DerivedData/FireCom-cygbnsedlgybvdewalvvmzqeehlc/Build/Intermediates/FireCom.build/Debug-iphonesimulator/FireCom.build/Script-C8CC6BE415FAAB4C001BB67E.sh：（null）：错误的解释器： 没有相应的文件和目录

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T18:53:32.273

在项目的“构建阶段”中检查可能损坏的“运行脚本”阶段。

它应该看起来像这样：

![构建阶段](../Images/8fd4a395102dfb1e2422338e7c907006.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T17:50:32.837

我重命名了我的应用程序，并遇到了这个错误。在不同的地方，我更改了名称，但在一个地方找不到.. - 在 Target 的构建设置文件中。

Cmd + Shift + F 在整个项目中查找。搜索旧的应用程序名称字符串。找到旧名称仍然卡住的地方，用新名称更新它。

![在此处输入图像描述](../Images/4403c119a7ce4cb17ea201961b811436.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T04:24:04.660

我已经多次遇到这种情况，因为我`DerivedData`的工作不是最新的。我从来不理解它何时执行并且不跟踪我所做的更改的逻辑......但是由于脚本试图从派生数据中的存档运行，您需要确保脚本实际上是存在的。为此，请删除您的派生数据（或至少删除包含您的脚本的目录），然后重新构建。Xcode 将填补空白。您可以`Derived Data`通过导航到`File`菜单然后转到`Project Settings`（或`Workspace Settings`相应地）并点击指向您的查找器的链接来快速访问。就当垃圾吧。

# java - Java 泛型 - 不能应用于给定类型

> ID：12733709
> 
> 赞同：3
> 
> 时间：2012-10-04T18:41:47.583
> 
> 标签：java, generics

我有一些类似的代码：

```
public class Main {

    private static abstract class Bar {}

    private static class SubBar extends Bar {}

    private static abstract class Baz<T extends Bar> {

        private T t;

        public void setT(T t) {
            this.t = t;
        }

    }

    private static class SubBaz extends Baz<SubBar> {}

    private void foo(Baz<? extends Bar> baz, Bar bar) {
        baz.setT(bar);
    }
 } 
```

这会导致错误：

```
error: method setT in class Baz<T> cannot be applied to given types;
required: CAP#1
found: Bar
reason: actual argument Bar cannot be converted to CAP#1 by method invocation conversion
where T is a type-variable:
T extends Bar declared in class Baz
where CAP#1 is a fresh type-variable:
CAP#1 extends Bar from capture of ? extends Bar 
```

我不明白为什么。方法 setT 应该接受扩展 Bar 的东西，我正在传递类 Bar 的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:47:36.060

> 方法 setT 应该接受扩展 Bar 的东西，我正在传递类 Bar 的东西。

这正是问题所在：`<? extends Bar>`意思是“某种未知类型`Bar`或其子类”。由于您不知道它是哪种类型，因此实际上不可能`setT()`在该上下文中调用，除非使用`null`参数。

这将按预期工作：

```
private void foo(Baz<Bar> baz, Bar bar) {
    baz.setT(bar);
} 
```

我敢肯定，Stackoverflow 上有数百个此类问题的变体。似乎几乎每个程序员起初都误解了`?`通配符的用途并错误地使用了它。

它的实用性在于你的`Bar`类有一个`public T getT()`方法。一个类型的变量`Baz<? extends Bar>`可以同时包含`Baz<Bar>`和的对象`Baz<SubBar>`，并且您可以调用`getT()`它来获取一个`Bar`（或某个子类）并且可以像这样使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:47:16.607

您正在尝试做的不是类型安全。如果你有：

```
private static class OtherSubBar extends Bar {} 
```

然后你可以这样做：

```
Baz<SubBar> baz = new Baz<SubBar>();
foo(baz, new OtherSubBar()); 
```

# prolog - 在 JIProlog 中使用冻结

> ID：12733710
> 
> 赞同：0
> 
> 时间：2012-10-04T18:41:50.870
> 
> 标签：prolog, graph-theory, freeze, cycle, edge-list

我想用 JIProlog 进行图形搜索。下面的示例`memberchk`没有 . 但是，当我确实包含它时，Prolog 冻结，可能是因为无限搜索。

```
connected(ac,a,b). connected(ac,a,c). connected(ac,b,c). 
connected(ac,b,a). connected(ac,c,a). connected(ac,c,b).

path(A,B,[AB]) :- connected(AB,A,B).
path(A,C,[H|T]) :- connected(H,A,B), path(B,C,T), \+ memberchk(H,T). 
```

在[这个答案](https://stackoverflow.com/questions/1607611/simple-graph-search-in-prolog/1608551#1608551)中，我找到了原因（边缘列表尚未实例化）和解决方案的提示（使用`freeze/2`）。但是，`freeze/2`在我正在使用的 JIProlog 中不起作用。谁能帮我找到替代解决方案？

**编辑：**我知道一般来说，对于图表来说，这将是一个跟踪节点的解决方案，例如在[这个](https://stackoverflow.com/questions/10797793/how-to-visit-each-point-in-directed-graph/10800569#10800569)例子中，但是对于我的特定应用程序，“节点”也可以*在*边缘，这就是我想要检查的原因被访问的边而不是被访问的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:08:58.127

我不确定是否理解您的要求。我会尝试调整建议的答案。

```
% get a path from start to end
path(Start, End, Path) :-
    path(Start, End, [], Path).

path(A, B, Visited, [AB|Visited]) :- connected(AB, A, B).

path(A, C, Visited, Path) :-
    connected(AB, A, B),
    \+ memberchk(AB, Visited),
    path(B, C, [AB|Visited], Path). 
```

当心：未经测试的代码....

# javascript - 访问 document.execCommand 的系统字体？

> ID：12733712
> 
> 赞同：1
> 
> 时间：2012-10-04T18:42:07.267
> 
> 标签：javascript, execcommand

所以我在文本编辑区域（很像[TinyMC 编辑器）上使用](http://www.tinymce.com/)[execCommand](http://msdn.microsoft.com/en-us/library/hh801229%28v=vs.85%29.aspx#fontname) （带有 FontName 命令） ，但我不确定如何访问机器上最常见的系统字体列表。

或者更确切地说，是否应该指定某些最常用的字体并期望它们可以在客户端机器上找到？

（我做了功课，我没有找到关于这个主题的任何其他线程）。

谢谢，加布斯特罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:44:33.927

这是带有该脚本的站点链接：[http ://www.lalit.org/lab/javascript-css-font-detect/](http://www.lalit.org/lab/javascript-css-font-detect/)

用法很简单：

```
window.onload = function() {
    var detective = new Detector();
    alert(detective.detect('font name'));
}; 
```

在我的项目中，它帮助了我很多。

# java - Spring - 无效的参数值：java.io.NotSerializableException

> ID：12733713
> 
> 赞同：10
> 
> 时间：2012-10-04T18:42:17.953
> 
> 标签：java, mysql, spring-mvc

我正在尝试将记录插入表中，但出现以下错误：我也尝试使用“？” 对于sql语句中的参数并得到相同的错误。

**错误**

```
54080 [http-8084-2] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory  - Finished creating instance of bean 'Sybase'
54080 [http-8084-2] INFO  org.springframework.jdbc.support.SQLErrorCodesFactory  - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
54080 [http-8084-2] DEBUG org.springframework.jdbc.support.SQLErrorCodesFactory  - Looking up default SQLErrorCodes for DataSource [org.apache.commons.dbcp.BasicDataSource@1e20a9a]
54083 [http-8084-2] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Fetching JDBC Connection from DataSource
54085 [http-8084-2] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Returning JDBC Connection to DataSource
54085 [http-8084-2] DEBUG org.springframework.jdbc.support.SQLErrorCodesFactory  - Database product name cached for DataSource [org.apache.commons.dbcp.BasicDataSource@1e20a9a]: name is 'MySQL'
54090 [http-8084-2] DEBUG org.springframework.jdbc.support.SQLErrorCodesFactory  - SQL error codes for 'MySQL' found
54090 [http-8084-2] DEBUG org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator  - Unable to translate SQLException with Error code '0', will now try the fallback translator
54091 [http-8084-2] DEBUG org.springframework.jdbc.support.SQLStateSQLExceptionTranslator  - Extracted SQL state class 'S1' from value 'S1009'
54092 [http-8084-2] INFO  com.crimetrack.jdbc.JdbcOfficersDAO  - PreparedStatementCallback; SQL [INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, divisionNo, poisitionId, emailAdd, startDate, endDate, genderId, phoneNo, dob) VALUES (:userName,:password, :fName, :lName, :oName, :divisionNo, :poisitionId, :emailAdd, :startDate, :endDate, :genderId, :phoneNo, :dob)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
54092 [http-8084-2] DEBUG org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod  - Method [handleRequest] returned [ModelAndView: reference to view with name 'officer_registration'; model is null]
54092 [http-8084-2] DEBUG org.springframework.web.servlet.DispatcherServlet  - Rendering view [org.springframework.web.servlet.view.JstlView: name 'officer_registration'; URL [/WEB-INF/jsp/officer_registration.jsp]] in DispatcherServlet with name 'crimetrack' 
```

**JdbcOfficersDAO**

```
public void saveOfficer(Officers officer) {
    logger.info("In saveOfficer");

    try{            

        String sql= "INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, " +
                    "divisionNo, poisitionId, emailAdd, startDate, endDate, genderId, " +
                    "phoneNo, dob) VALUES (:userName,:password, :fName, :lName, :oName, :divisionNo, "+
                    ":poisitionId, :emailAdd, :startDate, :endDate, :genderId, " +
                    ":phoneNo, :dob)";

        logger.debug("Executing saveOfficer String " + sql);
        int count = getJdbcTemplate().update(sql,new MapSqlParameterSource()
                .addValue("userName",officer.getUserName())
                .addValue("password", officer.getPassword())
                .addValue("fName", officer.getfName())
                .addValue("lName", officer.getlName())
                .addValue("oName", officer.getoName())
                .addValue("divisionNo", officer.getDivisionNo())
                .addValue("positionId",officer.getPositionId())
                .addValue("emailAdd", officer.getEmailAdd())
                .addValue("startDate", officer.getStartDate())
                .addValue("endDate", officer.getEndDate())
                .addValue("genderId", officer.getGenderId())
                .addValue("phoneNo",officer.getPhoneNo())
                .addValue("dob", officer.getDob()));

        logger.info(count +" Rows affected in tblOfficers");

    }catch(Exception e){

        logger.info(e.getMessage());
    }

} 
```

**官员.java**

/** * */

```
import java.util.Date;

public class Officers {

    private String userName;
    private String password;
    private String password2;
    private String fName;
    private String lName;
    private String oName;
    private int divisionNo;
    private int positionId;
    private String emailAdd;
    private Date startDate;
    private Date endDate;
    private String genderId;
    private String phoneNo;
    private Date dob;
    /**
     * No args constructor
     */
    public Officers() {
    }
    /**
     * @param userName
     * @param password
     * @param fName
     * @param lName
     * @param oName
     * @param divisionNo
     * @param positionId
     * @param emailAdd
     * @param startDate
     * @param endDate
     * @param genderId
     * @param phoneNo
     * @param dob
     */
    public Officers(String userName, String password, String fName, String lName,
            String oName, int divisionNo, int positionId, String emailAdd,
            Date startDate, Date endDate, String genderId, String phoneNo,
            Date dob) {
        this.userName = userName;
        this.password = password;
        this.fName = fName;
        this.lName = lName;
        this.oName = oName;
        this.divisionNo = divisionNo;
        this.positionId = positionId;
        this.emailAdd = emailAdd;
        this.startDate = startDate;
        this.endDate = endDate;
        this.genderId = genderId;
        this.phoneNo = phoneNo;
        this.dob = dob;
    }
    /**
     * @return the BadgeNo
     */
    public String getUserName() {
        return userName;
    }
    /**
     * @param badgeNo the BadgeNo to set
     */
    public void setUserName(String userName) {
        this.userName = userName;
    }
    /**
     * @return the Password
     */
    public String getPassword() {
        return password;
    }
    /**
     * @param password the Password to set
     */
    public void setPassword(String password) {
        this.password = password;
    }
    /**
     * @return the First Name
     */
    public String getfName() {
        return fName;
    }
    /**
     * @param fName the First Name to set
     */
    public void setfName(String fName) {
        this.fName = fName;
    }
    /**
     * @return the Last Name
     */
    public String getlName() {
        return lName;
    }
    /**
     * @param lName the Last Name to set
     */
    public void setlName(String lName) {
        this.lName = lName;
    }
    /**
     * @return the Other Name
     */
    public String getoName() {
        return oName;
    }
    /**
     * @param oName the Other Name to set
     */
    public void setoName(String oName) {
        this.oName = oName;
    }
    /**
     * @return the DivisionNo
     */
    public int getDivisionNo() {
        return divisionNo;
    }
    /**
     * @param divisionNo the DivisionNo to set
     */
    public void setDivisionNo(int divisionNo) {
        this.divisionNo = divisionNo;
    }
    /**
     * @return the PositionId
     */
    public int getPositionId() {
        return positionId;
    }
    /**
     * @param positionId the PositionId to set
     */
    public void setPositionId(int positionId) {
        this.positionId = positionId;
    }
    /**
     * @return the Email Address
     */
    public String getEmailAdd() {
        return emailAdd;
    }
    /**
     * @param emailAdd the Email Address to set
     */
    public void setEmailAdd(String emailAdd) {
        this.emailAdd = emailAdd;
    }
    /**
     * @return the Start Date
     */
    public Date getStartDate() {
        return startDate;
    }
    /**
     * @param startDate the Start Date to set
     */
    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }
    /**
     * @return the End Date
     */
    public Date getEndDate() {
        return endDate;
    }
    /**
     * @param endDate the End Date to set
     */
    public void setEndDate(Date endDate) {
        this.endDate = endDate;
    }
    /**
     * @return the GenderId
     */
    public String getGenderId() {
        return genderId;
    }
    /**
     * @param genderId the GenderId to set
     */
    public void setGenderId(String genderId) {
        this.genderId = genderId;
    }
    /**
     * @return the Phone Number
     */
    public String getPhoneNo() {
        return phoneNo;
    }
    /**
     * @param phoneNo the Phone Number to set
     */
    public void setPhoneNo(String phoneNo) {
        this.phoneNo = phoneNo;
    }
    /**
     * @return the Date Of Birth
     */
    public Date getDob() {
        return dob;
    }
    /**
     * @param dob the Date Of Birth to set
     */
    public void setDob(Date dob) {
        this.dob = dob;
    }
    /**
     * @return the password2
     */
    public String getPassword2() {
        return password2;
    }
    /**
     * @param password2 the password2 to set
     */
    public void setPassword2(String password2) {
        this.password2 = password2;
    }

} 
```

**更新错误日志**

```
57818 [http-8084-3] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Fetching JDBC Connection from DataSource
57820 [http-8084-3] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Returning JDBC Connection to DataSource
57820 [http-8084-3] DEBUG org.springframework.jdbc.support.SQLErrorCodesFactory  - Database product name cached for DataSource [org.apache.commons.dbcp.BasicDataSource@1077e76]: name is 'MySQL'
57824 [http-8084-3] DEBUG org.springframework.jdbc.support.SQLErrorCodesFactory  - SQL error codes for 'MySQL' found
57825 [http-8084-3] DEBUG org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator  - Unable to translate SQLException with Error code '0', will now try the fallback translator
57825 [http-8084-3] DEBUG org.springframework.jdbc.support.SQLStateSQLExceptionTranslator  - Extracted SQL state class 'S1' from value 'S1009'
57825 [http-8084-3] ERROR com.crimetrack.jdbc.JdbcOfficersDAO  - Could not save officer 
org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, divisionNo, poisitionId, emailAdd, startDate, endDate, genderId, phoneNo, dob) VALUES (:userName,:password, :fName, :lName, :oName, :divisionNo, :poisitionId, :emailAdd, :startDate, :endDate, :genderId, :phoneNo, :dob)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
    at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:107)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:603)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:868)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:876)
    at com.crimetrack.jdbc.JdbcOfficersDAO.saveOfficer(JdbcOfficersDAO.java:113)
    at com.crimetrack.service.OfficerManager.RegisterOfficer(OfficerManager.java:21)
    at com.crimetrack.web.OfficerRegistrationController.handleRequest(OfficerRegistrationController.java:147)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:910)
    at com.mysql.jdbc.PreparedStatement.setSerializableObject(PreparedStatement.java:3359)
    at com.mysql.jdbc.PreparedStatement.setObject(PreparedStatement.java:3010)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.setObject(DelegatingPreparedStatement.java:229)
    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:351)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:144)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.doSetValue(ArgPreparedStatementSetter.java:65)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.setValues(ArgPreparedStatementSetter.java:46)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:816)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:1)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:587)
    ... 34 more
57826 [http-8084-3] DEBUG org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod  - Method [handleRequest] returned [ModelAndView: reference to view with name 'officer_registration'; model is null]
57827 [http-8084-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - Rendering view [org.springframework.web.servlet.view.JstlView: name 'officer_registration'; URL [/WEB-INF/jsp/officer_registration.jsp]] in DispatcherServlet with name 'crimetrack' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-11T07:19:10.857

您是在使用`JdbcTemplate`（而不是`SimpleJdbcTemplate`已弃用）还是`NamedParameterJdbcTemplate`？

命名参数仅在`SimpleJdbcTemplate`和中受支持`NamedParameterJdbcTemplate`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T14:47:36.163

嗨，我遇到了和你一样的问题。

我目前使用的是 spring 3.2，看起来在这个版本中你必须使用类 NamedParameterJdbcTemplate 而不是 JdbcTemplate。这样做可以解决我的问题。

如果您从 JdbcDaoSupport 扩展，请使用 NamedParameterJdbcDaoSupport 而不是这个。在这个类中，你有一个 jdbcTemplate 和一个 NamedParameterJdbcTemplate

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T19:21:29.383

尝试将实现 Serializable 添加到官员类。现在其中的所有内容都是可序列化的，如果这是导致问题的类，这将解决它。

由于没有帮助OP，因此添加响应，但通常会导致不可序列化的异常，因为该对象未标记为可序列化。

刚刚在代码中注意到您的 sql 使用的是“poisitionId”，但您的 addValue 使用的是“positionId”。也许这种不匹配导致了您的问题？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T19:16:49.883

除了捕获代码块中可能发生的每个异常之外，您只是打印出抛出的异常的消息，因此您丢失了导致您找到异常来源的堆栈跟踪。

由于 Spring 只是抛出`RuntimeException(s)`，您可以删除异常处理并查看堆栈跟踪，它会告诉您更多关于对象不可序列化的信息。作为替代方案，您可以通过假设您使用 log4j来替换`logger.info(e.getMessage());`异常处理中的语句。`logger.error("Could not save officer.", e);`它会告诉你更多关于错误的信息，而不仅仅是包装异常的消息。

查看您的代码，导致此异常的候选人可能是`Officers`该类。您是否尝试将其存储在会话中？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T19:23:59.787

```
public class Officers implements Serializable { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T15:52:07.003

这是帮助我解决这个问题的两件事的结合：

```
public void saveOfficer(Officers officer) {
        logger.info("In saveOfficer");

        int count = getJdbcTemplate().update("INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, divisionNo, positionId, emailAdd, startDate, endDate, genderId,phoneNo, dob,badgeNo) "+
                                                "VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)"
                                                , new Object[]{officer.getUserName(),StringSecurity.EncryptString(officer.getPassword()),officer.getfName(),
                                                 officer.getlName(),officer.getoName(),officer.getDivisionNo(),officer.getPositionId(),
                                                 officer.getEmailAdd(),officer.getStartDate(),officer.getEndDate(),officer.getGenderId(),
                                                 officer.getPhoneNo(),officer.getDob(),officer.getBadgeNo()});

        logger.info(count +" Rows affected in tblOfficers");            

    } 
```

并且在@Visher指出的我包括的课程上

```
public class Officers implements Serializable{ 
```

# java - 我的代码中的线程 3 NullPointerException 是什么意思？

> ID：12733714
> 
> 赞同：0
> 
> 时间：2012-10-04T18:42:18.127
> 
> 标签：java, nullpointerexception, acm-java-libraries

当我使用 ACM 库编译和运行我的 Java 程序时，我不断收到此错误

```
Exception in thread "Thread-3" java.lang.NullPointerException
    at SpaceTravel.getBlackHoleDistance(SpaceTravel.java:148)
    at SpaceTravel.gameOverBlackHole(SpaceTravel.java:132)
    at BlackHole.oneTimeStep(BlackHole.java:84)
    at BlackHole.run(BlackHole.java:45)
    at java.lang.Thread.run(Unknown Source) 
```

这是游戏类：

```
import acm.graphics.*;
import acm.program.*;
import acm.util.*;
import java.awt.*;

public class SpaceTravel extends GraphicsProgram {
  // specify the size of the window
  public static int APPLICATION_WIDTH = 1280;
  public static int APPLICATION_HEIGHT = 600;

  // class constants
  private static final double
    PLANET_SIZE = 80,
    BLACK_HOLE_SIZE = 100,
    STAR_SIZE = 2;

  // instance variables
  private GOval ice, fire, iron;
  private GPoint lastPoint;
  private boolean isDragging = false;
  private GLabel gameOverText, goal, win;
  private BlackHole blackhole1, blackhole2;
  private RandomGenerator rand = new RandomGenerator();

  // init method, draw the graphics objects
  public void init() {

    setBackground(Color.BLACK);

    // call the randomly colored stars method
    drawStars();

    // call 1 instance of BlackHole class
    blackhole1 = new BlackHole(BLACK_HOLE_SIZE, 5, 2, this);
    add(blackhole1, APPLICATION_WIDTH-400, APPLICATION_HEIGHT/2 );
    new Thread(blackhole1).start();

    // call 1 instance of BlackHole class, but name it differently
    blackhole2 = new BlackHole(BLACK_HOLE_SIZE, 3, -4, this);
    add(blackhole2, APPLICATION_WIDTH-200, APPLICATION_HEIGHT/2 );
    new Thread(blackhole2).start();

    // draw fire planet
    fire = drawCircleCentered(100, 400, PLANET_SIZE);
    add(fire);
    fire.setFilled(true);
    fire.setColor(Color.RED);

    // draw ice planet
    ice = drawCircleCentered(100, 100, PLANET_SIZE);
    add(ice);
    ice.setFilled(true);
    ice.setColor(Color.BLUE);

    // draw iron planet
    iron = drawCircleCentered(100, 250, PLANET_SIZE);
    add(iron);
    iron.setFilled(true);
    Color grey = new Color(34, 34, 34);
    iron.setColor(grey);

    // game over text
    gameOverText = new GLabel ("GAME OVER", APPLICATION_WIDTH/2 - 250, APPLICATION_HEIGHT/2);
    gameOverText.setColor(Color.RED);
    gameOverText.setFont(new Font("DEFAULT_FONT", Font.BOLD, 90));

    // goal text
    goal = new GLabel ("GOAL", APPLICATION_WIDTH-150, APPLICATION_HEIGHT/2);
    goal.setColor(Color.RED);
    goal.setFont(new Font("DEFAULT_FONT", Font.BOLD, 20));
    add(goal);

    // win text
    win = new GLabel ("WINRAR IS YOU!", APPLICATION_WIDTH/2 - 350, APPLICATION_HEIGHT/2);
    win.setColor(Color.RED);
    win.setFont(new Font("DEFAULT_FONT", Font.BOLD, 90));
  }

  // checker method if the ice and fire plantes touch, call the game over method below.
  private void checkFireIce(GOval fire, GOval ice) {
    if(getDistance(fire, ice) < PLANET_SIZE ) {
      gameOver(fire);
    }
  }

  // checker method for when fire planet gets to the goal text, call the game winning method below
  private void checkPlanetsGoal() {
    if(fire.getBounds().intersects(goal.getBounds())) {
      winGame();
    }
  }

  // start dragging if the ball is pressed
  public void mousePressed(GPoint point) {
    if (ice.contains(point)) {
      isDragging = true;
      lastPoint = point;
    }
  }

  // move the ball when it is dragged, and call checking methods for game winning or game over conditions
  public void mouseDragged(GPoint point) {
    checkFireIce(fire, ice);
    checkPlanetsGoal();
    if (isDragging) {
      ice.move(point.getX()-lastPoint.getX(),
               point.getY()-lastPoint.getY());
      lastPoint = point;
      // bump the planets
      bump(ice, iron);
      bump(iron, fire);
    }
  }

  // checking method for if any of the planets have touched an instance of black hole
  public void gameOverBlackHole(BlackHole blackhole) {
    double a = getBlackHoleDistance(fire, blackhole);
    double b = getBlackHoleDistance(ice, blackhole);
    double c = getBlackHoleDistance(iron, blackhole);
    if(a < BLACK_HOLE_SIZE/2 + PLANET_SIZE/2) {
      gameOver(fire);
    }
    if(b < BLACK_HOLE_SIZE/2 + PLANET_SIZE/2) {
      gameOver(ice);
    }
    if(c < BLACK_HOLE_SIZE/2 + PLANET_SIZE/2) {
      gameOver(iron);
    }
  }

  // get distance between a black hole instance and a planet
  private double getBlackHoleDistance(GOval planet, BlackHole blackhole) {
    return GMath.distance(planet.getX()+PLANET_SIZE/2, planet.getY()+PLANET_SIZE/2,

                          blackhole.getX(), blackhole.getY());
  }

  // bump helper method, calculates how much to move a tangent planet by when it is being bumped by another
  private void bump(GOval planet1, GOval planet2) {
    double offset = PLANET_SIZE+1.5 - getDistance(planet1, planet2);
    if (offset > 0) {
      planet2.move(offset*(planet2.getX()-planet1.getX())/PLANET_SIZE,
                   offset*(planet2.getY()-planet1.getY())/PLANET_SIZE);
    }
  }

  // a helper method, compute the distance between the centers of the balls
  private double getDistance(GOval planet1, GOval planet2) {
    return GMath.distance(planet1.getX()+PLANET_SIZE/2, planet1.getY()+PLANET_SIZE/2,

                          planet2.getX()+PLANET_SIZE/2, planet2.getY()+PLANET_SIZE/2);
  }

  // a helper method, draw a circle centered at the given location
  private GOval drawCircleCentered(double centerX, double centerY, double size) {
    return new GOval(centerX-size/2, centerY-size/2, size, size);
  }

  // a helper method, draw randomly colored stars 
  private void drawStars() {
    for (int i = 0; i < 1000; i++) {
      GOval star = drawCircleCentered(rand.nextDouble(0, APPLICATION_WIDTH), rand.nextDouble(0, APPLICATION_HEIGHT), STAR_SIZE);
      add(star);
      star.setFilled(true);
      star.setColor(rand.nextColor());
    }    
  }

  // helper method to switch dragging off when mouse is released from window
  public void mouseReleased(GPoint point) {
    isDragging = false;
  }

  // helper method to switch dragging off, remove the planet that touched the goal, and display game over text
  public void gameOver(GOval planet) {
    isDragging = false;
    remove(planet);
    add(gameOverText);
  }

  // helper method to switch dragging off, remove planets, and display win text
  private void winGame() {
    isDragging = false;
    add(win);
    remove(fire);
    remove(ice);
    remove(iron);
    remove(goal);
  }
} 
```

这是创建可以结束游戏的黑洞的类。

```
// import libraries
import acm.program.*;
import acm.graphics.*;
import acm.util.*;
import java.awt.*;
import java.util.*;

public class BlackHole extends GCompound implements Runnable {

  // instance variables
  private double size, xSpeed, ySpeed;
  private SpaceTravel game;
  private boolean stopHammerTime = false;

  // constructor for BlackHole
  public BlackHole(double size, double xSpeed, double ySpeed, SpaceTravel game) {

    // save the parameters size, xSpeed, ySpeed, centerX, centerY, and game
    this.size = size;
    this.xSpeed = xSpeed;
    this.ySpeed = ySpeed;
    this.game = game;

    // call method drawBlackhole
    drawBlackhole(0, 0, size, 3, 40);
  }

  // run method, move the black hole until it hits a planet || stopHammerTime = true
  public void run() {
    while(!stopHammerTime) {
      oneTimeStep();
    }
  }

  // helper method, creates a black hole
  private void drawBlackhole(double centerX, double centerY, double size, double gap, int layers) {

    for (int i = 0; i < layers; i++) {

      // this gradient color will lighten each time the for loop completes
      Color gradient = new Color(0 + 5*i, 0 + 5*i, 0 + 5*i);

      GOval ring = drawCircleCentered(centerX, centerY, size-gap*2*i);
      add(ring);
      ring.setFilled(true);
      ring.setColor(gradient);
    }
  }

  // a helper method, draw a circle centered at the given location
  private GOval drawCircleCentered(double centerX, double centerY, double size) {
    return new GOval(centerX-size/2, centerY-size/2, size, size);
  }

  // a helper method, move the blackHole in oneTimeStep
  private void oneTimeStep() {
    double x = getX();
    double y = getY();

    // if the black hole hits the left or the right wall, reverse the x-speed
    if (x < size/2 || x+size/2 > game.getWidth()) xSpeed = -xSpeed;

    // if the black hole hits the top or the bottom wall, reverse the y-speed
    if (y < size/2 || y+size/2 > game.getHeight()) ySpeed = -ySpeed;

    // move the black hole by a small interval, incorporating changes from if statements
    move(xSpeed, ySpeed);

    // check if a planet has touched a blackhole
    game.gameOverBlackHole(this);

    // delay
    pause(20);
  }  
} 
```

我很确定我对类的调用是正确的，但由于某种原因，被调用的 blackhole2 只是崩溃了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:43:11.857

```
Exception in thread "Thread-3" java.lang.NullPointerException 
```

这是`NullPointerException`在执行线程时发生的`"Thread-3"`

在`SpaceTravel.java`文件中的第 148 行。

似乎在`Thread-3`执行时，第 148 行正在尝试对`null`引用进行一些操作，这导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:45:37.043

显然崩溃的代码如下所示：

```
return GMath.distance(planet.getX()+PLANET_SIZE/2, planet.getY()+PLANET_SIZE/2,
                      blackhole.getX(), blackhole.getY()); 
```

很可能`planet`or`blackhole`参数是`null`. 使用调试器或`println()`找出哪一个。这段代码从三个地方调用：

```
double a = getBlackHoleDistance(fire, blackhole);
double b = getBlackHoleDistance(ice, blackhole);
double c = getBlackHoleDistance(iron, blackhole); 
```

你的行号有点偏离，但我敢说这是第一行，所以要么`fire`or `blackhole`is `null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:00:59.883

快速分析：

`gameOverBlackHole`方法被称为表单`BlackHole`类，这会导致问题，因为删除发生在该方法内部。如果在一个线程执行时发生删除，那么将有 NPE

如果您在多个线程之间共享对象状态，这可能是一个可能出错的示例

# jquery - 在用户点击的元素上获取点击事件

> ID：12733717
> 
> 赞同：0
> 
> 时间：2012-10-04T18:42:26.290
> 
> 标签：jquery, html

我想获取有关当前单击`html`元素的信息。为此，我使用了`$(*).click()`事件，以便页面上的每个元素都有这个事件。假设我现在有以下`html`代码 `<div class="outer"> <div class="inner"> <p>Hello<p> </div> </div>` ，当用户单击 hello 时我想获取该元素，以便我可以识别它的标签、它的类等。但问题是，当用户单击 hello 时，单击事件被触发，但它在 p 上被触发tag ，然后是 div class=inner ，然后在 div 上，类为 external 。但在这里我只想在用户点击的文本或区域上获取事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:44:52.880

请使用`$(document).click()`代替`$(*).click()`和使用`e.target`来获得指定。元素。

您可以使用停止事件冒泡`e.stopPropagation();`

```
$(document).click(function (e) {
   e.stopPropagation();
   alert('Tag Name: ' + e.target.tagName + 
           ' --has class: ' + e.target.className + 
           ' --with text: ' + $(e.target).text());
}); 
```

**演示：http:** [//jsfiddle.net/Q6cpR/1/](http://jsfiddle.net/Q6cpR/1/)

# facebook - Facebook javascript SDK 连接在 IE 和 Safari 中失败

> ID：12733722
> 
> 赞同：1
> 
> 时间：2012-10-04T18:42:38.900
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我在 Safari 和 IE 上登录 Facebook 时遇到问题。我可以使用以下代码使用 Chrome 和 Firefox 登录：

```
 var appId = 'APP ID';
    var uid;

    // Initialize the JS SDK
    FB.init({
     appId: appId,
     status: true, // check login status
     cookie: true, // enable cookies to allow the server to access the session
     xfbml: true,  // parse XFBML
     channelUrl: '//localhost:8888/photo/channel.html' // Channel File
    });
    // Get the user's UID
    FB.getLoginStatus(function(response) {
     uid = response.authResponse.userID ? response.authResponse.userID : null;
     console.info(uid);
    });

    function authUser() {
     FB.login(function(response) {
       console.info(response);
       uid = response.authResponse.userID ? response.authResponse.userID : null;
       console.info("called");
     }, {scope:'email,publish_actions'}); 
```

但是当我的代码进入`FB.getLoginStatus`Safari 和 IE 时，响应显示

```
authResponse: undefined
status: "unknown" 
```

编辑：忘了提到显示权限的弹出窗口没有在 Safari 和 IE 中弹出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T03:20:14.413

如果状态为“未知”，则意味着以下两种情况之一：

1.  用户未登录，或
2.  第三方 cookie 被禁用

Safari 是唯一默认禁用第三方 cookie 的浏览器（Firefox 将很快效仿）。IE 中一些较高的安全设置也会将其关闭。由于您的代码在 Firefox/Chrome 中运行，我猜这是罪魁祸首。

不幸的是，FB.getLoginStatus 需要第三方 cookie 才能返回适当的 authResponse 和状态。我认为您的选择非常有限：

1.  让用户通过 PHP 或其他后端 SDK 登录，并强制他们每 2 小时重新登录一次（我认为 FB 令牌每 7600 秒过期一次）
2.  检测“未知”状态并向用户显示一条消息，要求他们为 facebook.com 启用第三方 cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:29:09.117

通过在 Facebook 而不是我的本地主机上运行应用程序，我实际上并没有解决我能够解决的问题。我相信这是因为在 Facebook 上我已经登录了。

# c# - ImageView 最大尺寸 iOS MonoTouch

> ID：12733724
> 
> 赞同：0
> 
> 时间：2012-10-04T18:42:56.573
> 
> 标签：c#, objective-c, xamarin.ios

我正在使用 UIImageView 控件从字节数组创建图像。我需要确保图像的最大尺寸为 600 x 600。我该怎么做？但是，我尝试过 SizeThatFits() 和 SizeToFit()，它们只是在屏幕上移动图像。我尝试将 Bound 属性设置为 new RectangleF(0, 0, 600, 600)，但是，这也没有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:54:39.700

您可以检查 UIImage Size 属性是否超出您的限制。如果是这样，[缩放](https://stackoverflow.com/questions/2417969/resize-and-saving-an-image-to-disk-in-monotouch)它：

```
const int limit = 600;
if ((View.Frame.Size.Width > limit) || (View.Frame.Size.Height > limit))
{
    // Scale as on link above.
} 
```

或者，您可以将 UIImageView 的 Frame 和 ContentMode 设置为所需的值。

# android - 2 个实体共享一个 android 签名密钥的含义

> ID：12733726
> 
> 赞同：0
> 
> 时间：2012-10-04T18:43:03.150
> 
> 标签：android, security, key, code-signing

我正在考虑从其他开发人员那里购买现有的 android 应用程序。他已经使用与销售中包含的相同的签名密钥签署了其他未包含在销售中的应用程序。如果共享或复制密钥和我们都拥有一个副本以便我们可以更新我们拥有的应用程序有什么影响呢？我主要担心的是他是否可以在未经我许可或访问我的开发者帐户的情况下更新我新购买的应用程序，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:09:33.873

有一篇很棒的文章/视频介绍了如何在[Phandroid](http://phandroid.com/2012/06/21/getting-acquired-how-to-transfer-ownership-of-your-android-app-or-game/)进行收购。它确实简要介绍了签名密钥的想法，但更多的是从卖方的角度来看。无论如何，我认为这不会是世界上最糟糕的事情，因为虽然他可以为“你的”应用程序制作一个新的签名 APK，但在将其转移到你的 Google 帐户后，他应该无法将其发布到 Google Play . 他*可以*尝试通过其他方式分发它，但我不会太费劲，特别是如果你在一份好的合同中获得了销售条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:17:57.883

除了发布应用程序的“流氓”版本之外，需要注意的另一件事是，如果应用程序使用签名权限或 sharedUserId，他们可能会创建另一个应用程序，该应用程序可能会访问和更改原始应用程序中的数据（通过内容提供商、远程服务等）即使应用程序没有使用这两种方法，您也可能决定在未来添加一些东西。

# javascript - 正则表达式检查文本框中的字符串

> ID：12733727
> 
> 赞同：0
> 
> 时间：2012-10-04T18:43:10.470
> 
> 标签：javascript, jquery, jquery-ui

我有一个文本输入字段，我想检查用户在那里输入的内容。我想允许他们在有或没有 $ 的情况下输入货币金额。他们应该能够输入：

```
$12
$12.0
12
12.0
$ 12.0 
```

不知道我该怎么做。我认为正则表达式可能会有所帮助，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:47:36.153

基本正则表达式。

```
(/^\$?\s?\d+(\.\d+)?$/).test("$12.0");

/ -Beginning of Reg Exp
^ - Start of line
\$? - Match a $ or not
\s? - Match a space or not
\d+ - match one or more numbers
(\.\d+)? - match a decimal point followed by more numbers
$ - match end of a line
/ - end of reg expression 
```

这将失败

`12.`和`.0`

因为它们不在您可能的解决方案中

# android - Android 应用内容更新

> ID：12733731
> 
> 赞同：1
> 
> 时间：2012-10-04T18:43:18.560
> 
> 标签：android, cordova, jquery-mobile

我使用 phonegap 和 jquery mobile 为会议编写了一个超级简单的 android 应用程序。在最后一刻，换了房间。当时，我拥有 html 文件中的所有信息，所以我只能通过部署新版本的应用程序并希望每个人都更新来更新它。下次我怎样才能使它变得更好？我知道我可以将信息远程存储在 xml 文件中并下载它，但如果没有任何变化，我不想不必要地用完他们的数据。什么是有效的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:51:52.883

只要有一个超级简单的服务，你的应用程序会不时联系它，如果有可用的更新，如果有，那么下载新的信息......我会说;-) 更复杂的是使用一些推送服务，比如 parse.com 提供的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:03:57.743

您可以将项目托管在 GIT 或 SVN 存储库上，然后告诉他们在每个会话开始时签出/克隆您的项目。

这样，您可以确认并确保它们都在运行您希望它们运行的​​东西。

# algorithm - 剖析归并排序例程

> ID：12733734
> 
> 赞同：0
> 
> 时间：2012-10-04T18:43:26.177
> 
> 标签：algorithm, delphi, sorting, computer-science, mergesort

**免责声明：**这是一个需要对代码和算法进行一些解释的问题。它不是为了修复任何东西或优化任何东西，而是为了便于理解。

我对排序例程的理解不是很好。我请求帮助将已经可用的合并排序代码从这里转换`integer type`为`string type`：[delphi mergesort for string arrays](https://stackoverflow.com/questions/12673633/delphi-mergesort-for-string-arrays)。收到答案后，我开始了解排序程序。

一些资源可以方便地帮助理解：

1.  [http://www.iti.fh-flensburg.de/lang/algorithmen/sortieren/merge/mergen.htm](http://www.iti.fh-flensburg.de/lang/algorithmen/sortieren/merge/mergen.htm)
2.  [http://www.youtube.com/watch?v=9Qk1t66g7IU](http://www.youtube.com/watch?v=9Qk1t66g7IU)

我试图剖析代码以跟随它。这个问题不是我试图验证我自己对归并排序的理解，而是以清晰的方式展示排序例程。这个问题的价值在于人们试图更好地理解归并排序。这是必不可少的，因为如果您很好地理解了一个原型，则可以更容易地理解其他类型。

**我的问题是为什么我们要添加“1”来设置长度和“结果”**

```
SetLength(AVals, Length(Vals) div 2 + 1);
Result := 1 + PerformMergeSort(0, High(Vals)); 
```

**为什么我们在这里减去“1”？** *编辑：我认为如果不减去 1，K 会超出范围吗？*

```
Result := k - 1; 
```

这是这个问题的代码；顺便说一句，这是一个优化的合并排序，因为它只复制了一半的数组：

```
function MergeSortRemoveDuplicates(var Vals: array of Integer):Integer;
var
  AVals: array of Integer;

   //returns index of the last valid element
  function Merge(I0, I1, J0, J1: Integer):Integer;
  var
    i, j, k, LC:Integer;
  begin
    LC := I1 - I0;
    for i := 0 to LC do
      AVals[i]:=Vals[i + I0];
      //copy lower half or Vals into temporary array AVals

    k := I0;
    i := 0;
    j := J0;
    while ((i <= LC) and (j <= J1)) do
    if (AVals[i] < Vals[j]) then begin
      Vals[k] := AVals[i];
      inc(i);
      inc(k);
    end else  if (AVals[i] > Vals[j]) then begin
      Vals[k]:=Vals[j];
      inc(k);
      inc(j);
    end else begin //duplicate
      Vals[k] := AVals[i];
      inc(i);
      inc(j);
      inc(k);
    end;

    //copy the rest
    while i <= LC do begin
      Vals[k] := AVals[i];
      inc(i);
      inc(k);
    end;

    if k <> j then
      while j <= J1 do begin
        Vals[k]:=Vals[j];
        inc(k);
        inc(j);
      end;

    Result := k - 1;
  end;

 //returns index of the last valid element

  function PerformMergeSort(ALo, AHi:Integer): Integer; //returns
  var
    AMid, I1, J1:Integer;
  begin

  //It would be wise to use Insertion Sort when (AHi - ALo) is small (about 32-100)
    if (ALo < AHi) then
    begin
      AMid:=(ALo + AHi) shr 1;
      I1 := PerformMergeSort(ALo, AMid);
      J1 := PerformMergeSort(AMid + 1, AHi);
      Result := Merge(ALo, I1, AMid + 1, J1);
    end else
      Result := ALo;
  end;

begin
  SetLength(AVals, Length(Vals) div 2 + 1);
  Result := 1 + PerformMergeSort(0, High(Vals));
end; 
```

这是我对非常小的修改的理解：

```
function MergeSortRemoveDuplicates(var Vals: array of Integer):Integer;
var
  AVals: array of Integer;

   //returns index of the last valid element
  function Merge(I0, I1, J0, J1: Integer):Integer;
  var
    i, j, k, LC:Integer;
  begin
    // difference between mid-point on leftside
    // between low(Original_array) and midpoint(true Original_array midpoint)
    // subtracting I0 which is Low(Original_array)
    // or here equals zero(0)
    // so LC is quarter point in Original_array??
    LC := I1 - I0;

    // here we walk from begining of array
    // and copy the elements between zero and LC
    // this is funny call that Vals[i + I0] like 0 + 0
    // then 1 + 0 and so on. I guess this guarantees if we are
    // starting from non-zero based array??
    for i := 0 to LC do
      AVals[i]:=Vals[i + I0];

    // k equal low(Original_array)
    k := I0;

    // I will be our zero based counter element
    i := 0;

    // J will be (midpoint + 1) or
    // begining element of right side of array
    j := J0;

    // while we look at Copy_array elements
    // between first element (low(Copy_array)
    // and original_array from midpoint + 1 to high(Original_array)
    // we start to sort it
    while ((i <= LC) and (j <= J1)) do

    // if the value at Copy_array is smaller than the Original_array
    // we move it to begining of Original_array
    // remember position K is first element
    if (AVals[i] < Vals[j]) then begin
      Vals[k] := AVals[i];

      // move to next element in Copy_array
      inc(i);

      // move to next element in Original_array
      inc(k);

    // if the value at copy_array is larger
    // then we move smaller value from J Original_array (J is midpoint+1)
    // to position K original_array (K now is the lower part of ) Original_array)
    end else  if (AVals[i] > Vals[j]) then begin
      Vals[k]:=Vals[j];

      //move K to the next element in Original_array
      inc(k);

      // move j to next element in Original_array
      inc(j);

    // if the value in Original_array is equal to the element in Copy_array
    // do nothing and count everything up
    // so we end up with one copy from duplicate and disregard the rest
    end else begin //duplicate
      Vals[k] := AVals[i];
      inc(i);
      inc(j);
      inc(k);
    end;

    //copy the rest
    while i <= LC do begin
      Vals[k] := AVals[i];
      inc(i);
      inc(k);
    end;

    // if the counters do not endup at the same element
    // this means we have some that maybe leftover on
    // the right side of the Original_array.
    // This explains why K does not equal J : there are still elements left over
    // then copy them to Original_array
    // starting at position K.
    if k <> j then
      while j <= J1 do begin
        Vals[k]:=Vals[j];
        inc(k);
        inc(j);
      end;

    // why K - 1?
    // function needs result so return will be null if called
    // I don't understand this part
    Result := k - 1;
  end;

 //returns index of the last valid element

  function PerformMergeSort(ALo, AHi:Integer): Integer; //returns
  var
    AMid, I1, J1:Integer;
  begin

  //It would be wise to use Insertion Sort when (AHi - ALo) is small (about 32-100)
    if (ALo < AHi) then
    begin
      AMid:=(ALo + AHi) shr 1;    // midpoint
      I1 := PerformMergeSort(ALo, AMid);  //recursive call I1 is a data point on the left
      J1 := PerformMergeSort(AMid + 1, AHi);  // recursive call I1 is a data point on the right
      Result := Merge(ALo, I1, AMid + 1, J1);
    end else
      Result := ALo;
  end;

begin
  // test if array is even then we can split nicely down middle
  if Length(Vals) mod 2 = 0 then
  begin
    SetLength(AVals, Length(Vals) shr 1);
    Result := PerformMergeSort(0, High(Vals));
  end
  else
  //array is odd let us add 1 to it and make it even
  // shr 1 is essentially dividing by 2 but doing it on the bit level
  begin
    SetLength(AVals, (Length(Vals) + 1) shr 1);
    Result := PerformMergeSort(0, High(Vals));
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:07:52.677

这是我对作者提供的代码的修改，旨在在排序过程中删除重复项。一些解释：

外部功能：

1.  我们应该提供缓冲区（AVals）来存储一半的初始数组。*Length(Vals) div 2 + 1*为奇数和偶数大小的数组提供了足够的空间，而不会产生不必要的复杂性。更好的价值（适用于所有情况）：**Length(Vals + 1) div 2**
2.  内部过程 PerformMergeSort 返回最后一个有效元素的**索引**，但外部过程返回有效元素的**计数**（在引用的主题中有注释），所以我使用 (1 + PerformMergeSort())。

    原因：在内部我们必须使用索引，但是这个过程的最终用户应该知道新的数组长度。

内部函数 PerformMergeSort：

它获取数组块的开始和结束索引，对该块进行排序并返回最后一个有效元素的索引。在递归调用之后，我们就有了这种情况。不变：两个块都已排序，它们不包含重复项，左段长度非零

```
*****ACDEFG****BCDEGHILM******
     ^    ^    ^       ^
     |    |    |       |
     Alo  I1   AMid+1  J1 
     I0   I1   J0      J1  //as named in Merge 
     \____/
       LC+1 elements 
```

合并后：

```
*****ABCDEFGHILM**************
     ^         ^^
     |         ||__k
     |         | 
     Alo       Result 
```

内部函数合并：

使用提供的示例，笔和纸，逐步合并，看看它是如何工作的。

关于复制周期：我们将（LC+1）个元素复制到临时缓冲区 AVals，使用 AVals 的起始段（总是从 0 开始）和主数组的正确段（从 I0 开始，通常非零）

# ajax - 使用请求范围通过 Coldfusion 中的请求堆栈标记 Ajax 请求的替代方法？

> ID：12733735
> 
> 赞同：0
> 
> 时间：2012-10-04T18:43:25.317
> 
> 标签：ajax, jquery-mobile, coldfusion, scope, xmlhttprequest

我有一个`Jquery Mobile`应用程序。JQM 请求的第一个页面始终是常规页面加载。所有后续页面都通过 Ajax 拉入。由于用户可以从每个页面开始，我需要在每个页面上放置完整的标题，包括我所有的自定义内容，例如（系统错误消息等）。

这一切都加载在第一页上。在随后的页面加载`via AJAX`中，JQM 仍然请求整个页面，尽管只`div data-role="page"`使用了它们之间的内容。

所以我想这样做：

```
<cfset variables.xmlDetect = "">
    <cfset variables.headsUp = GetHttpRequestData()>
    <cfif StructKeyExists(variables.headsUp.headers, "X-Requested-With")>
        <cfset variables.xmlDetect = StructFind(variables.headsUp.headers, "X-Requested-With")>
    </cfif>
    <cfif variables.xmlDetect NEQ "">
        <cfset request.xmlDetected = "true">
    <cfelse>
        <cfset request.xmlDetected = "false">
    </cfif> 
```

并为 设置一个标志`this is requested via AJAX`，这样我就可以减少页眉和其他所有内容，因为它们已经在第一页上加载了。

我只阅读`request`范围对于通过请求堆栈传递信息是不好的。是这样吗？我喜欢的想法`if request=xml, skip all of this, else serve it`。在不违反封装的情况下跨模板和视图执行此操作的正确方法是什么？只需保存大量数据一到达客户端就被发送和转储。

谢谢你的一些建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:23:47.397

我会考虑将此逻辑移动到自定义标签包装器中。包装器在必要时处理输出标题并在其中进行检查。你可以在我的博客上看到一个完整的例子：[http ://www.raymondcamden.com/index.cfm/2011/8/26/Making-jQuery-Mobile-templates-even-easier--with-ColdFusion](http://www.raymondcamden.com/index.cfm/2011/8/26/Making-jQuery-Mobile-templates-even-easier--with-ColdFusion)

# jquery - 带有 jQ uery 的样式列

> ID：12733736
> 
> 赞同：0
> 
> 时间：2012-10-04T18:43:26.880
> 
> 标签：jquery

我需要为表格中的一整列设置样式。该列应对应于**`id="current"`**行中的元素**`thead`**。

```
<table>
<thead>
    <tr>
        <td></td>
        <td></td>
        <td><div id="current"></div></td>
        <td></td>
    </tr>
</thead>
<tbody>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</tbody>
</table> 
```

现在，我可以将一个类添加到正确的列中，我只需要找出一种方法来告诉列计数。

```
var num = ???
$('td:nth-child(num)').addClass('selectedCol'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:46:48.470

尝试这个

```
$("#current").closest('td').index() 
```

# ios - iOS 6 旋转：推送视图控制器

> ID：12733737
> 
> 赞同：6
> 
> 时间：2012-10-04T18:43:30.657
> 
> 标签：ios, uiviewcontroller, rotation, ios6

我想支持 iOS 6 旋转。麻烦的是，我一直在查看大量文档和堆栈溢出问题，但没有找到任何稍微深入的解决方案。我只看到我应该将这两个方法添加到我的视图控制器类中 - 但是，如果我没记错的话，它们的操作方式与 iOS 6 之前的方法不同：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll; // use what is appropriate for you.
} 
```

我的应用程序当前使用以下代码在 pre-iOS6 中旋转。请注意，我使用界面方向参数来确定是否要推送我的视图控制器。如何在 iOS 6 轮换代表中实现这一点？

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    UIInterfaceOrientation toOrientation = self.interfaceOrientation;

    if ( self.tabBarController.view.subviews.count >= 2 )
    {
        UIView *tabBar = [self.tabBarController.view.subviews objectAtIndex:1];

        if(toOrientation != UIInterfaceOrientationLandscapeLeft && toOrientation != UIInterfaceOrientationLandscapeRight)
        {
            CUSTOM_DEBUG_LOG("\n\nRotated back to Portrait");
            tabBar.hidden = FALSE;
        }
    }
}

- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        CUSTOM_DEBUG_LOG("\nView going landscape");
        ScrollViewController *s = [[ScrollViewController alloc] initWithNibName:@"ScrollViewController" bundle:nil];
        [self.navigationController pushViewController:s animated:NO];
        [s release];
        self.tabBarController.tabBar.hidden = YES;
        self.navigationController.navigationBar.hidden = YES;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:56:46.237

父视图现在在 iOS 6 中处理旋转。子类化你的导航控制器并添加一个布尔值

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;  // your rotation here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T19:54:29.233

签出[这个](https://stackoverflow.com/questions/8697473/didanimatefirsthalfofrotationtointerfaceorientation-ios5-replacement)和[这个](https://stackoverflow.com/questions/3595471/willanimaterotationtointerfaceorientation-not-called-on-popviewcontrolleranimate)SO 讨论。

[编辑]

是的，您提到的方法在 iOS 6.0 中并未被弃用，它们将继续工作。这只是自动旋转的工作方式已经改变。到目前为止，决定是否旋转是视图控制器的责任，但现在 RootViewController 将决定他们的孩子是否应该旋转。如果您没有设置 rootviewcontroller，则必须将其添加到窗口，然后将 shouldAutoRotate 和 supportedInterfaceOrientations 方法放入 rootviewcontroller。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:26:58.877

当我第一次发布问题时，我可能没有正确实现 iOS6 轮换代码。

我错误地认为 willAnimateRotationToInterfaceOrientation 函数在 iOS6 中已被弃用，导致我相信有一个带有方向参数的新 iOS 旋转委托。事实证明情况并非如此，所以我的应用程序有点工作。

The code I plugged into my app was just this:

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T20:59:04.860

If you are using a UINavigationController, override `shouldAutomaticallyForwardRotationMethods = YES` property.

Then like Mark S said, also override `shouldAutorotate` and `supportedInterfaceOrientations` for the children VCs.

# javascript - 从 node.js 中的 C++ 模块访问 Javascript 模块

> ID：12733738
> 
> 赞同：1
> 
> 时间：2012-10-04T18:43:35.503
> 
> 标签：javascript, c++, node.js, module

在创建另一个模块时，我通常通过将模块名称作为参数传递来访问 js 模块中已编译的 c++ 模块，如下所示：

```
var cppModule = require('./cppModule');
var cppModObject = new cppModule.SomeObject;
var jsModule = require('./jsModule');
var jsModObject = new jsModule.OtherObject(cppModObject); 
```

在我的js中，我有类似的东西：

```
var jsModule = function(otherModArg) {
  var otherModuleObject = otherModArg;
  ...
} 
```

我的问题是我是否可以做相反的事情，即将一些实例化的 js 对象传入我的 c++ 模块并在 c++ 中访问该对象。如果有帮助，我很乐意发布更多代码......我还没有找到任何关于此的文档。谢谢！

# ios - iOS：如何处理已发布的委托

> ID：12733742
> 
> 赞同：2
> 
> 时间：2012-10-04T18:43:54.803
> 
> 标签：ios, delegates

我有一个对象用作我的视图控制器和我的 web 服务之间的连接层。该对象接受一个委托，并在从服务器返回数据时通知该委托。我遇到了一个问题，即委托在 http 请求运行时被释放。当请求返回时，我的对象尝试调用委托上的方法并且应用程序崩溃。

处理此问题的最佳方法是什么。我在几个地方读到你不应该保留你的代表，因为他们经常也保留对象，导致循环依赖。因此，如果我不能保留我的委托，我如何在调用它的方法之前检查它是否已被解除分配？

```
@property (nonatomic, assign) NSObject<ServerConnectionDelegate>* delegate; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:52:25.050

如果委托的生命周期长于工作对象的生命周期，通常应该使用委托模式。（抱歉，这里不确定正确的术语）。

你有几个选项来解决这个问题：

*   作为一种解决方法，您可以在对象的 dealloc 方法中将连接委托设置为 nil。
*   如果需要数据（可能供以后使用），您可以使用 NSNotification 通知委托任何连接事件，而不是委托模式。
*   正如杰克在他的评论中建议的那样，您可以使您的委托成为连接的弱属性 - 如果您的项目使用 ARC，这可能是最好的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:49:26.793

您应该取消任何正在运行的请求，并在 dealloc 方法中将其委托设置为 nil。

```
- (void)dealloc
{
   [yourWebServiceRequest cancelRequestAndClearDelegate]; 
   [super dealloc];
} 
```

# php - 标题位置指回上一页，最后激活的选项卡处于活动状态

> ID：12733747
> 
> 赞同：0
> 
> 时间：2012-10-04T18:44:13.600
> 
> 标签：php, twitter-bootstrap

我有一个使用 twitter bootstrap 的标签页，对于标签页，我正在使用这个修改[https://github.com/twitter/bootstrap/pull/581#issuecomment-4828029](https://github.com/twitter/bootstrap/pull/581#issuecomment-4828029)，它给了我类似 index.php?id=1# 的 URL /profile（如果配置文件选项卡处于活动状态），index.php?id=1#/contact（如果联系人选项卡处于活动状态）。

问题是，当我提交表单时，处理表单的页面将使用 $_SERVER['HTTP_REFERER'] 发回给我，但它没有将我重定向到 index.php?id=1#/profile 它会将我重定向到 index.php . 据我了解，这是因为 #/profile 是客户端，而 index.php 是服务器端。有什么方法可以使处理表单的页面重定向回来并使上次访问的选项卡处于活动状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:57:02.077

在表单中添加一个隐藏字段并将哈希值放入其中。然后让您的表单处理脚本在构建重定向时将哈希附加到引用者。

另一种选择是将当前选项卡放入 cookie 中，并在打开页面时选择该选项卡。

# java - 为教育目的在 Java 中实现 XML 解析器

> ID：12733750
> 
> 赞同：0
> 
> 时间：2012-10-04T18:44:20.327
> 
> 标签：java, xml, parsing

我想验证 XML（在 String 对象中）是否格式正确。像这样：

```
"<root> Hello StackOverflow! <a> Something here </a> Goodbye StackOverflow </root>" 
```

它还应该验证属性，但我现在有点太远了。我只是想确保我的逻辑是正确的。这是我到目前为止所得到的，但我被困住了，我需要一些帮助。

```
public boolean isWellFormed( String str )
{
    boolean retorno = true;

    if ( str == null )
    {
        throw new NullPointerException();
    }

    else
    {
        this.chopTheElements( str );
        this.chopTags();

    }
    return retorno;
}

private void chopTags()
{
    for ( String element : this.elements )
    {
        this.tags.add( element.substring( 1, element.length()-1 ) );
    }
}

public void chopTheElements( String str )
{
    for ( int i = 0; i < str.length(); i++ )
    {
        if ( str.charAt( i ) == '<' )
        {
            elements.add( getNextToken( str.substring( i ) ) );
        }
    }
}

private String getNextToken( String str )
{
    String retStr = "";

    if ( str.indexOf( ">" ) != -1 )
    {
        retStr = str.substring( 0, str.indexOf( ">" ) + 1 );
    }

    return retStr;
} 
```

到目前为止，我在一个列表中切割了像“”这样的元素，然后在另一个列表中切割了标签，如下所示：root，/root。

但我不知道如何进行，或者我是否朝着正确的方向前进。我被指派在没有正则表达式的情况下解决这个问题。

有什么建议吗？我在这里迷路了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:10:06.763

当您看到“<”时首先断开字符串不是解决方法，因为您识别的块与 XML 的层次结构无关。例如，如果您有输入：

```
<a>xxx<b>...</b>yyy</a> 
```

那么你的一个块将是“/b>yyy<”，这对进一步分解没有用处。

你需要根据语法的结构来组织你的代码。如果语法说一个元素由一个开始标签、一个（元素或字符）序列和一个结束标签组成，那么您需要一个与该序列匹配的方法，并调用其他方法来处理其组件。因为语法是递归的，所以你的代码也是递归的，所以这被称为递归下降解析。这是计算机科学课程中经常教授的内容，因此您会在教科书中找到对该主题的出色介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:04:20.847

如果您不处理巨大的 XML 文件，请考虑使用 DOM 解析器。为此，我建议您查看[DocumentBuilder](http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilder.html)类。您实际上需要调用不同的`parse()`方法（*您的源可以是文件或任何其他 InputSource*）

# python - 我想要以下代码的 **unicode 类型**::

> ID：12733752
> 
> 赞同：-2
> 
> 时间：2012-10-04T18:44:27.770
> 
> 标签：python, string, parsing, unicode

我从 SO 专家那里得到了以下代码，但它适用于 ANSI 字符串，我的输入是**UNICODE STRING**。如何使此代码适用于两个版本？TIA

```
import csv
from collections import defaultdict
summary = defaultdict(list)
csvin = csv.reader(open('qwetry.txt'), delimiter='|')
for row in csvin:
    summary[(row[1].split()[0], row[2])].append(int(row[5]))
csvout = csv.writer(open('datacopy.out','wb'), delimiter='|')
for who, what in summary.iteritems():
    csvout.writerow( [' '.join(who), len(what), sum(what)] ) 
```

礼貌：乔恩克莱门茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:55:48.763

**csv**模块不直接支持读写 Unicode 。你可以在[这里](http://docs.python.org/library/csv.html)找到详细信息。相同的生成器如下：

```
 import csv

def unicode_csv_reader(unicode_csv_data, dialect=csv.excel, **kwargs):
    # csv.py doesn't do Unicode; encode temporarily as UTF-8:
    csv_reader = csv.reader(utf_8_encoder(unicode_csv_data),
                            dialect=dialect, **kwargs)
    for row in csv_reader:
        # decode UTF-8 back to Unicode, cell by cell:
        yield [unicode(cell, 'utf-8') for cell in row]

def utf_8_encoder(unicode_csv_data):
    for line in unicode_csv_data:
        yield line.encode('utf-8') 
```

# php - 使用 BCrypt 的 PHP 登录身份验证

> ID：12733753
> 
> 赞同：1
> 
> 时间：2012-10-04T18:44:35.023
> 
> 标签：php, mysql, sql, pdo, bcrypt

所以我有一个 php 身份验证脚本，一切正常。但是我非常不确定我的编程方式（我对一些东西进行了硬编码），我希望堆栈可以查看这个并指出任何潜在的问题。

这是脚本：

```
<?php
require_once 'Bcrypt.php';
class Mysql {
    private $conn;

    function __construct() {
        $this->conn =  new PDO('mysql:host=***;dbname=***;charset=UTF-8','***','***') or 
                      die('There was a problem connecting to the database.');
    }

    function verify_Username_and_Pass($un, $pwd) {
        ini_set('display_errors', 'On');
        error_reporting(E_ALL | E_STRICT);
        $query = "SELECT *
                FROM Conference
                WHERE Username = :un";

        $stmt = $this->conn->prepare($query);

        $stmt->bindParam(':un', $un);
        //$stmt->bindParam(':pwd', $pwd);
        $stmt->execute();
        $row = $stmt->fetchAll();
        $hash = $row[0]["Password"];
        $is_correct = Bcrypt::check($pwd, $hash);

        if ($is_correct) {
            // User exist
            $firstName = $row[0]["First Name"];
            $_SESSION["FirstName"] = $firstName;
            return true;
            $stmt->close();
        }
        else {
            // User doesn't exist
            return false;
            $stmt->close();
        }
    }
}
?> 
```

那么它看起来如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:56:44.913

如果不进行测试，我认为您的代码应该可以工作，BCrypt 的使用看起来很合理。当然，有些地方可以改进，有些可能是见仁见智。

1.  如果您的查询没有返回任何行（因为不存在这样的用户名），您将访问一个 invalid index `$row[0]["Password"]`。在使用之前，您应该先询问是否有结果。
2.  您关闭数据库的调用放在 return 语句之后，因此它永远不会被执行。PHP 会自动关闭数据库，所以要么在 return 语句之前关闭它，要么删除该行。
3.  您命名了您的函数`verify_username_and_password()`，但实际上它确实也从数据库读取并写入会话。这些是隐藏的活动，除非他阅读整个代码，否则另一个开发人员无法知道会话发生了变化。解决此问题的一种可能性是拆分功能。

未经测试的例子：

```
$userRow = getUserRowFromDatabase($userName);
if (!is_null($userRow))
{
  if (verifyPassword($password, $userRow["Password"]))
  {
    addLoggedInUserToSession($userRow["First Name"])
  }
} 
```

这三个功能中的每一个都只有一个问题需要解决。这将使您的代码更具可读性，理想情况下它应该就像阅读书中的故事一样。

希望我能给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:04:50.797

您实际上可以使用 mysql 为您验证哈希

```
 SELECT COUNT(*) FROM Conference
 WHERE Username = :un
 AND Password = ENCRYPT(:pass, Password)
 LIMIT 1 
```

# gcc - 旧版本的 libc 与我的二进制文件链接

> ID：12733754
> 
> 赞同：0
> 
> 时间：2012-10-04T18:44:39.523
> 
> 标签：gcc, libc

我继承了一个有一些问题的软件。我相信这些问题与静态链接的*libc版本有关。*

我在 Windows XP 机器上构建它，目标是 x86 QNX Neutrino 6.3.2 机器。

以前，使用*GCC 2.95.3*构建的软件 （嗯，从技术上讲，它是 QNX 的*QCC*包装并调用*GCC*）有人添加了一个功能，并且必须将其移植到使用*GCC 3.3.5*构建，因为新功能需要它。

现在，这个软件是我的。我需要做一些补充，但注意到*奇怪*的行为。经过一番挖掘，我发现2.95.3 和 3.3.5的*libc*都有静态链接。根据[QNX 的网站](http://www.qnx.com/developers/docs/6.3.2/momentics/compatibility/about.html#C++_code)，：

> GCC 2.95.3（来自 6.2.1 或 6.3）和 GCC 3.3.5 使用不同的 C++ ABI 并具有不同的名称修饰。因此，您无法将使用 GCC 2.95.3 构建的 C++ 二进制文件（对象、可执行文件、库）与使用 GCC 3.3.5 构建的二进制文件链接起来。

这是一个重大的 ABI 更改，所以我显然很担心。我为此写了一个小测试

```
#include <stdio.h>

int main()
{
    FILE *stream_ptr = popen("fakename","r"); /// use libc
    return 0;
} 
```

并用 3.3.5 构建它：

```
QCC -V3.3.5,gcc_ntox86 small.cpp -o small.out 
```

然后使用*字符串*来查看该程序静态链接的内容

```
strings -a small.out | grep GCC
GCC: (GNU) 3.3.5 (qnx-nto)
GCC: (GNU) 3.3.5 (qnx-nto)
GCC: (GNU) 2.95.3
GCC: (GNU) 3.3.5 (qnx-nto) 
```

如您所见，GCC 2.95.3 的 libc 已被静态链接。

我的第一个问题是：**如何使用 3.3.5 版本的 libc 建立此链接？**

我的第二个问题是：**为什么它首先与 2.95.3 链接？**

我在做什么错/错过了什么？欢迎任何建议。

（项目中可能还有 60 个其他东西与 2.95.3 对象相关联，我需要将它们全部修复，因此我自己实现*popen()*和他最亲密的 59 个朋友并不是最好的主意......）

谢谢，

卡尔

**更新：**

所以我还没有想出如何解决这个问题，但是有一点关于 QNX 6.3.2 的背景知识，所以后来偶然发现这个问题的人不必费力地解决这个问题：

*您可以对链接器ld --verbose*使用详细选项并让它吐出它所做的一切。请注意，当我这样做时，我得到了以下输出：

```
attempt to open C:/QNX632/host/win32/x86/usr/lib/gcc-lib/i386-pc-nto-qnx6.3.0/3.3.5//libc.a failed
attempt to open C:/QNX632/target/qnx6/x86/lib/gcc/3.3.5/libc.a failed
attempt to open C:/QNX632/target/qnx6/usr/i386-pc-nto-qnx6.3.0/lib//libc.a failed
attempt to open C:/QNX632/target/qnx6/usr/lib/libc.a failed
attempt to open C:/QNX632/target/qnx6/x86/lib//libc.a succeeded 
```

可以看到，链接器正*试图*打开 3.3.5 版本的*libc.a*，但它根本不存在。我查看了其他 3 台同事的计算机，没有 3.3.5 版本的*libc.a。*我不确定这甚至是如何在突破性的 ABI 更改中起作用的，但我怀疑这个项目中的一些不稳定与这种差异有关。

虽然这回答了我最初的问题，

> 1）你不能让它与不存在的 libc.a 文件链接，
> 
> 2) 它选择 2.95.3 版本，因为 3.3.5 版本不存在，

它提出了新的问题：

**3) QNX 为什么不随这个版本的 Momentics 发布 3.3.5 版本的 libc.a？**（或者如果他们这样做，他们把它藏在哪里，因为我错过了。）

**4）是否有任何可行的解决方法？**我能够在不使用 libc 的情况下构建项目中除了两个最重要的服务器之外的所有内容，但是在我修复最后两个服务器之前，~~我仍在寻找解决方案~~。

更新更新：

他们与 QNX 人员一起使用 GCC 3.3.5 为我构建了一个不受支持、未经测试的 libc.a、libm.a 和 libsocket.a 工程版本，此后一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:23:25.337

当我为 QNX 6.3.2 编译时，我总是将 3.3.5 与 GNU C/C++ 库一起使用。如果您不指定 GNU，您将默认获得 Dinkum 库。过去我在 Dinkum 线程安全方面遇到过问题。试试这些标志：

```
qcc -V3.3.5,gcc_ntox86 -Y_gpp 
```

-Y_gpp 指示 qcc 使用 GNU 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:09:27.753

万一其他人遇到类似的问题，据我所知，这里是我提出的四个问题的答案。他们不鼓励。

1) 你不能让它与不存在的 libc.a 文件链接。当然。

2) 它选择 2.95.3 版本的 libc.a，因为 3.3.5 版本不存在。

3) 在与 QNX 人员的讨论中，他们表示，对于 QNX Neutrino 6.3.2，经过官方测试的编译器**只有**2.95.3，尽管 GCC 3.3.5 包含在 Momentics 的发货版本中，**但它没有经过测试，也没有经过测试。支持**。它恰好在那里。

4) 选项：

```
a) Go to a newer version of QNX which uses a newer version of GCC
b) Get source for libc (and libm as it turns out) and build it with GCC 3.3.5.
   This one may pan out. Still waiting on QNX tech support.
c) Get already-built libraries from the QNX folks.
d) Don't use GCC 3.3.5 to build for Neutrino 6.3.2 
```

真诚的，
卡尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:54:21.813

GCC 3.3 是史前的，QNX 不是有更新的版本吗？

编译器或链接器应该有一些选项会告诉它是冗长的，您可以使用它来查看所有库路径和链接到的库。这可能会向您展示如何链接到较旧的库。

# java - 在android中使imagebuttons在触摸时发光

> ID：12733756
> 
> 赞同：2
> 
> 时间：2012-10-04T18:44:44.687
> 
> 标签：java, android, animation, glow

我正在为 android 制作一个启动器，它只能在横向中使用。屏幕的一半是按钮，不是应用程序，而是按钮，一半只是一些时钟之类的东西。我希望我的按钮在我触摸它们时会发光一秒钟或其他东西，然后是动画以显示不同的屏幕。我只需要发光的帮助。请帮助我，非常感谢！

这是我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/mainLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/wallpaper" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

</LinearLayout>

<GridView
    android:id="@+id/gridView1"
    android:layout_width="284dp"
    android:layout_height="wrap_content"
    android:numColumns="3" >

</GridView> 
```

我也想知道如何将图像按钮添加到我的 gridview

我的Java代码：

```
package com.mysoftware.mysoftwareos.launcher;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.LinearLayout;

public class MainActivity extends Activity implements OnClickListener {
LinearLayout mainLayout;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Import views
    mainLayout = (LinearLayout)findViewById(R.id.mainLayout);

    //Setup onClickListener for the buttons

}
@Override
public boolean onKeyDown(int KeyCode, KeyEvent event) {
    if ((KeyCode == KeyEvent.KEYCODE_BACK)) {
        //Do nothing to prevent the back button to kill the launcher
        return true;
    }
    return super.onKeyDown(KeyCode, event);
}
public void onClick(View src) {
    switch(src.getId()) {
    }
}
} 
```

# php - 使用 PHP 复制图像

> ID：12733757
> 
> 赞同：3
> 
> 时间：2012-10-04T18:44:51.430
> 
> 标签：php, image, curl, fopen

在其他站点的许可下，我应该定期下载托管在另一个站点上的图像，并将其包含在我们站点上的网络摄像头照片集合中，并带有指向贡献站点的外部链接。

这对于任何其他站点都没有任何问题，但是对于这个特定站点，我无法打开图像来调整它的大小并将其保存到我们的服务器。这不是盗链问题，因为我可以`<img src="http://THEIRIMAGE />`在我们网站的页面上创建一个普通的 ole' 并且它工作正常。

我已经尝试过`$img = new Imagick($sourceFilePath)`像其他所有方法一样直接使用，以及尝试使用 PHP 的副本并尝试使用 cURL 复制图像，但是这样做时，页面只是超时而根本没有结果。

这是有问题的图像：http: [//island-alpaca.selfip.com :10202/SnapshotJPEG?Resolution=640x480&Quality=Standard](http://island-alpaca.selfip.com:10202/SnapshotJPEG?Resolution=640x480&Quality=Standard)

就像我说的那样，我可以用其他几个网络摄像头做这种事情，但它不适用于这个，我不知道为什么它不能。任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:50:32.483

为了减少带宽和服务器负载，某些站点会阻止某些机器人访问其内容。您的 cURL 请求需要更接近地模仿实际的浏览器，其中包括（通常）引用者、用户代理等。也可能是存在重定向并且您没有告诉 cURL 遵循重定向。

尝试设置更多这样的选项：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_ENCODING , "gzip");
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_USERAGENT, 'PHP');
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10); 
```

如果这不起作用，请从实际浏览器中获取用户代理并将其放入其中，看看是否会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:51:53.750

尝试使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)。

例如：

```
$url = 'http://island-alpaca.selfip.com:10202/SnapshotJPEG?Resolution=640x480&Quality=Standard';
$outputfile = "tmp/image" . date("Y-m-d_H.i.s");
$cmd = "wget -q \"$url\" -O $outputfile";
exec($cmd);
$temp_img = file_get_contents($outputfile);
$img = new Imagick($temp_img); 
```

你能试试这个然后回复我吗？

# google-maps - 模糊/损坏的谷歌地图控件

> ID：12733761
> 
> 赞同：8
> 
> 时间：2012-10-04T18:45:13.550
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我在我的 Google 地图应用上看到了一些非常奇怪的行为。我正在使用主干：

```
 initialize: ->
    osmMapType = new google.maps.ImageMapType(
      getTileUrl: (coord, zoom) ->
        "http://tile.openstreetmap.org/#{zoom}/#{coord.x}/#{coord.y}.png"
      tileSize: new google.maps.Size(256, 256)
      isPng: true
      alt: "OpenStreetMap layer"
      name: "OSM"
      maxZoom: 19
    )

    cloudMadeMapType = new google.maps.ImageMapType(
      getTileUrl: (coord, zoom) ->
        "http://b.tile.cloudmade.com/a97cc0871d97477b911c3f9155a93ee7/26250/256/#{zoom}/#{coord.x}/#{coord.y}.png"
      tileSize: new google.maps.Size(256, 256)
      isPng: true
      alt: "CloudMade layer"
      name: "CMade"
      maxZoom: 13
    )

    lat = 51.503
    lng = -0.113
    latlng = new google.maps.LatLng(lat, lng)
    options =
      zoom: 10
      center: latlng
      mapTypeId: 'OSM'
    @gMap = new google.maps.Map(document.getElementById("map"), options)
    @gMap.mapTypes.set('OSM', osmMapType)
    @gMap.mapTypes.set('CloudMade', cloudMadeMapType)
    @gMap.setMapTypeId(google.maps.MapTypeId.TERRAIN) 
```

我正在加载 API：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script> 
```

但出于某种原因......谷歌地图控件和覆盖是“模糊的”：

[模糊的控制... http://vuknikolic.wordpress.com/2012/04/02/twitter-bootstrap-and-google-maps-v3/](http://vuknikolic.wordpress.com/2012/04/02/twitter-bootstrap-and-google-maps-v3/)

和一个信息窗口...

![信息窗口做同样的事情](../Images/f79a815715bed2bc6d34059fb7280e3b.png)

我一遍又一遍地查看了代码，看不到错误，控制台中也没有错误。

* * *

@geocodezip 是对的，它是 css。本质上，谷歌地图不喜欢 BootStrap 处理图像最大宽度的方式。所以你需要在你的 CSS 中加入一些小技巧......

```
#map img {
    max-width: none;
} 
```

[http://vuknikolic.wordpress.com/2012/04/02/twitter-bootstrap-and-google-maps-v3/](http://vuknikolic.wordpress.com/2012/04/02/twitter-bootstrap-and-google-maps-v3/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T19:03:23.520

您的代码中没有错误。这是你的css的问题。

只需在地图容器中添加这个 CSS（假设它有`id=gmap`）：

```
#gmap img {
  max-width: none;
} 
```

# iphone - 再次设置滚动帧大小时禁用滚动

> ID：12733766
> 
> 赞同：1
> 
> 时间：2012-10-04T18:45:36.780
> 
> 标签：iphone, ios, uiscrollview

你好朋友我对ios很陌生。我在视图中设置滚动大小确实加载为

```
scrollView.frame=CGRectMake(0, 0, 320, 460);
 [scrollView setContentSize:CGSizeMake(320,500)]; 
```

现在我想在点击按钮时向上滚动我的框架。

```
scrollView.frame=CGRectMake(0,-100, 320,550); 
```

我的框架向上移动但在此之后我的滚动视图被禁用我也尝试使用启用滚动视图但它也不起作用。

请建议我提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:00:24.453

因为你第二次设置

```
scrollView.frame=CGRectMake(0,-100, 320,550); 
```

其中 550 是`height`，`scrollView`它大于您设置的内容高度

```
[scrollView setContentSize:CGSizeMake(320,500)]; 
```

如果您想`scrollView`在单击按钮时向上移动框架，则只需减小其**Y**坐标而不增加其高度。对于垂直滚动，内容高度应大于框架高度。所以第二次这样设置框架 -

```
scrollView.frame=CGRectMake(0,-100, 320, 460); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:47:19.633

您设置`[scrollView setContentOffset:animated:]`而不是设置`frame`滚动。[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

在你的情况下，你可能会做

```
[scrollView setContentOffset:CGPointMake(0, 100) animated:YES]; 
```

# python - 找到最小数量的hadoop流python

> ID：12733772
> 
> 赞同：0
> 
> 时间：2012-10-04T18:46:08.110
> 
> 标签：python, hadoop, mapreduce, hadoop-streaming

我是 hadoop 框架和 map reduce 抽象的新手。

基本上，我想在一个巨大的文本文件中找到最小的数字（用“，”分隔）

所以，这是我的代码 mapper.py

```
 #!/usr/bin/env python

 import sys

 # input comes from STDIN (standard input)
 for line in sys.stdin:
 # remove leading and trailing whitespace
 line = line.strip()
 # split the line into words
numbers = line.split(",")
# increase counters
for number in numbers:
    # write the results to STDOUT (standard output);
    # what we output here will be the input for the
    # Reduce step, i.e. the input for reducer.py
    #
    # tab-delimited; the trivial word count is 1
    print '%s\t%s' % (number, 1) 
```

减速器

```
 #!/usr/bin/env python

from operator import itemgetter
import sys
smallest_number = sys.float_info.max
for line in sys.stdin:
# remove leading and trailing whitespace
     line = line.strip()

# parse the input we got from mapper.py
     number, count = line.split('\t', 1)
     try:
           number = float(number)
     except ValueError:
            continue

     if number < smallest_number:
        smallest_number = number
        print smallest_number <---- i think the error is here... there is no key value thingy

     print smallest_number 
```

我得到的错误：

```
 12/10/04 12:07:22 ERROR streaming.StreamJob: Job not successful. Error: NA
      12/10/04 12:07:22 INFO streaming.StreamJob: killJob...
          Streaming Command Failed! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T02:22:47.553

首先，我希望您注意，除非您只使用一个减速器，否则您的解决方案将不起作用。事实上，如果你使用多个 reducer，那么每个 reducer 都会吐出它接收到的最小数字，最终你会得到一个以上的数字。但是接下来的问题是，如果我必须只使用一个 reducer 来解决这个问题（即，只有一个任务），那么使用 MapReduce 可以获得什么？这里的诀窍是映射器将并行运行。另一方面，您不希望映射器输出读取的每个数字，否则一个减速器将不得不查看整个数据，这对顺序解决方案没有任何改进。解决这个问题的方法是让每个映射器只输出它读取的最小数字。此外，由于您希望所有映射器输出到同一个减速器，

映射器将如下所示：

```
#!/usr/bin/env python                              

import sys

smallest = None
for line in sys.stdin:
  # remove leading and trailing whitespace          
  line = line.strip()
  # split the line into words                       
  numbers = line.split(",")
  s = min([float(x) for x in numbers])
  if smallest == None or s < smallest:
    smallest = s

print '%d\t%f' % (0, smallest) 
```

减速机：

```
#!/usr/bin/env python                                           

import sys

smallest = None
for line in sys.stdin:
  # remove leading and trailing whitespace                       
  line = line.strip()
  s = float(line.split('\t')[1])
  if smallest == None or s < smallest:
    smallest = s

print smallest 
```

还有其他可能的方法来解决这个问题，例如使用 MapReduce 框架本身对数字进行排序，以便 reducer 接收的第一个数字是最小的。如果您想了解更多 MapReduce 编程范式，您可以阅读[本教程的示例，来自我的博客](http://had00b.blogspot.com/2013/08/mapreduce-gentle-introduction.html)。

# api - 是否有任何 API 可以禁用 chrome 中的预渲染功能？

> ID：12733778
> 
> 赞同：8
> 
> 时间：2012-10-04T18:46:34.603
> 
> 标签：api, google-chrome, prerender

在不使用自动化的情况下，有没有办法以编程方式禁用谷歌浏览器中的预渲染功能（高级设置：预测网络操作以提高页面加载性能）？

我找不到任何允许我修改此设置的直接 API。所以，我尝试`dns_prefetchin->enabled`在`"[Chromedir]\User Data\Default\Preferences"`文件中修改为`"false"`. 但是每次我打开 Chrome 时，这个值都会被重置。使用 Procmon 实用程序并没有为我提供任何关于 chrome 可以在何处存储其设置的额外线索。

提前致谢。

**编辑：**我应该提前提到，使用命令行选项`--prerender`将不起作用，因为我需要为所有 chrome 实例关闭此值（即使由操作系统 shell 启动）。

# ruby-on-rails - rspec 和 rails 和 capybara：如何使用相同的测试来测试工厂的 6 种不同变体

> ID：12733787
> 
> 赞同：2
> 
> 时间：2012-10-04T18:46:56.240
> 
> 标签：ruby-on-rails, rspec

我们的应用程序支持多种类型的帐户，因此我们的许多测试都会遍历所有帐户类型。

然而，我们有一个共同的模式是每个帐户类型的第一步都是相同的，但是我们想要测试每个帐户类型的一些独特方面。这是一个测试的高级视图：

all_account_types.each 做 |account_type|

*   创建具有特征 account_type 的帐户工厂
*   为帐户创建经理工厂
*   5 个人工厂选择加入该帐户
*   1 人然后选择退出
*   经理创建并发送广播
*   一个选择退出没有收到消息
*   四个选择加入得到消息
*   验证消息的格式（取决于帐户类型）

最后一个测试是问题...我们运行的测试取决于帐户的类型...目前我们在测试中有逻辑说明`if account_type==X then Y.should include(Z)`并且在进行测试时有效，但它会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:51:47.953

不要忘记这`let`是惰性求值的，这意味着您可以在示例或上下文之前覆盖测试设置：

```
context "Accounts" do
  let(:account) { Factory.create(:generic_account) }

  it "behaves like an account" do
    # ...
  end

  context "Manager account" do
    let(:account) { Factory.create(:manager_account }

    it "behaves like a manager account" do
       account.type.should == "manager"
       # ...
    end
  end
end 
```

# sql - 创建数字列时出现语法错误

> ID：12733788
> 
> 赞同：2
> 
> 时间：2012-10-04T18:46:57.283
> 
> 标签：sql, ms-access

将参数传递给 NUMERIC(4) 时引发语法错误。如果它只是通过 NUMERIC 就可以正常工作。使用的数据库是 Access。

```
CREATE TABLE LINE(
INV_NUMBER      CHAR(5)     NOT NULL,
LINE_NUMBER     CHAR(1)     NOT NULL,
P_CODE          VARCHAR(15) NOT NULL,
LINE_UNITS      NUMERIC(4)  NOT NULL,
LINE_PRICE      CURRENCY    NOT NULL,
CONSTRAINT      LIN_PK      PRIMARY KEY(LINE_NUMBER),
CONSTRAINT      LIN_FK      FOREIGN KEY(INV_NUMBER) REFERENCES INVOICE(INV_NUMBER)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:50:16.647

Access 没有`NUMERIC`数据类型。改为使用`INTEGER`。

[在此处](http://msdn.microsoft.com/en-us/library/office/bb208866%28v=office.12%29.aspx)查看有效数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:51:05.543

[在这里，您可以找到所有访问数据类型](http://www.w3schools.com/sql/sql_datatypes.asp) 并且`NUMERIC`不支持，您必须使用`INTEGER`

# javascript - Javascript IF 与 OR 一起使用

> ID：12733804
> 
> 赞同：0
> 
> 时间：2012-10-04T18:47:41.683
> 
> 标签：javascript, string, if-statement, or-operator

我敢肯定这很容易，我也看到过类似的问题，但没有人能帮助我弄清楚为什么这不起作用。`currentPage`没有人能告诉我为什么当设置为`faq`or时这不会捕获`contact`吗？

```
<script type="text/javascript">
                function init() {
                document.getElementById('searchSubmit').onclick=function(){
                        var uriArgs = window.location.search;
                        var currentPage = uriArgs.match(/page=?(\w*)/);
                        if ( (currentPage == null) || (currentPage == 'faq') || (currentPage == 'contact') ) {
                                currentPage = "index";
                                document.getElementById('searchHidden').value = currentPage;
                        }
                        else {
                                document.getElementById('searchHidden').value = currentPage[1];
                        }
                }
                }
                window.onload=init;
        </script> 
```

我设置了一个弹出警报，这样我就可以看到它是否被正确设置为`faq`or `contact`，所以我不确定为什么该`if`语句没有捕捉到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:50:47.220

如果有匹配，[`String.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)将返回数组索引 1 处的捕获组。例子：

```
> 'page=sdfsfsdf'.match(/page=?(\w*)/)
["page=sdfsfsdf", "sdfsfsdf"] 
```

因此，您需要查看由返回的数组的*内部*`match`（假设它不是`null`）。

```
if (currentPage == null || currentPage[1] == 'faq' || currentPage[1] == 'contact') {
    /* ... */       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:52:21.187

您的问题不在于`if`- 语句，而在于[`match`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)的结果：它返回匹配和匹配组的数组 - 您想与第一个匹配组进行比较。

```
var match = window.location.search = uriArgs.match(/page=?(\w*)/),
    currentPage = false;
if (match != null)
    currentPage = match[1];

if ( !currentPage || currentPage=='faq' || currentPage=='contact' ) {
    // do something
} 
```

# c# - 将数据导出到已经包含一些预定义数据的 Excel 工作表并作为电子邮件附件发送

> ID：12733812
> 
> 赞同：1
> 
> 时间：2012-10-04T18:48:01.997
> 
> 标签：c#, devexpress, export, aspxgridview

将数据从导出`Devexpress ASpxGridView`到`Excel`文件中，并且该 Excel 文件已经包含一些关键字段。

*所以数据应该以正确的格式填写而不覆盖现有数据。*

此外，应打开并修改该文件，以使其中一个字段成为由几个预定义项目组成的下拉列表。

现在，在将数据导出到 excel 文件并完成操作后，该文件应该作为电子邮件的附件发送。

如果您有任何类似的要求参考，请指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:41:52.410

```
 EmailMessage msg = new EmailMessage();
    FileStream fs = new FileStream(@"c:\Test.xls", FileMode.OpenOrCreate);  
    Exporter.WriteXls(fs);
    msg.AddAttachment("c:\Test.xls");
    msg.Send();
    fs.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:47:16.173

我建议您使用[Epplus](http://epplus.codeplex.com/releases/view/42439)，您可以从数据源中获取所需的数据，打开并将此数据添加到您的 xlsx。

# compilation - 编译时没有警告的mpicc

> ID：12733817
> 
> 赞同：0
> 
> 时间：2012-10-04T18:48:12.033
> 
> 标签：compilation, mpi

我想知道使用什么标志来避免使用 mpicc 编译 C/C++ 并行时出现的警告消息。更具体地说，我不想让我的消息屏幕引用未使用的变量，例如警告：未使用的变量

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:35:04.480

大多数（？）MPI 编译器包装器会将编译器选项传递给它们包装的编译器。所以你应该能够使用相同的标志 for `mpicc`，你将使用你的编译器展开。

要获得更好的答案：请咨询您的安装源，`mpicc`该安装源通常（在 Linux 系统上）作为 shell 脚本实现。许多版本也响应`-help`和类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:04:24.103

正如高性能标记所指出的，`mpicc`它只是真实编译器工具链的包装器。有一个几乎标准的选项，（几乎）所有包装器都理解：`-showme`. 它向您展示了哪些标志确切地传递给了编译器，例如：

```
$ mpicc -showme
icc <lots of preprocessor flags> -fexceptions -pthread \
    <lots of linker flags> -lmpi -losmcomp -lrdmacm -libverbs -lrt \
    -lnsl -lutil -lpsm_infinipath -lbat -llsf -ldl -lm -lnuma 
```

检查这些选项，查阅编译器手册并了解如何抑制警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T23:54:55.887

根据您的编译器，您可以添加标志来避免此类警告消息，例如`-w`禁用警告消息的 GCC 范围选项。

# linux - 为什么这些共享库不同？

> ID：12733818
> 
> 赞同：0
> 
> 时间：2012-10-04T18:48:21.893
> 
> 标签：linux, centos, shared-libraries

我正在比较两个我认为应该相同的系统上的文件，并注意到 /lib64/libcrypto.so.0.9.8e 是不同的。这些是 CentOS 5.x 系统。许多其他库也不同，这让我感到惊讶。对于此文件，例如，rpm 版本相同，并且 rpm -qV 将文件显示为未修改。

系统一：

```
# ls -la /lib64/libcrypto.so.0.9.8e
-rwxr-xr-x 1 root root 1364912 May 29 17:28 /lib64/libcrypto.so.0.9.8e*
# rpm -qf /lib64/libcrypto.so.0.9.8e
openssl-0.9.8e-22.el5_8.4
# rpm -qV openssl-0.9.8e-22.el5_8.4 | less
... output does not list this file 
```

系统二：

```
# ls -la /lib64/libcrypto.so.0.9.8e
-rwxr-xr-x 1 root root 1367232 May 29 17:28 /lib64/libcrypto.so.0.9.8e*
# rpm -qf lib64/libcrypto.so.0.9.8e
openssl-0.9.8e-22.el5_8.4
# rpm -qV openssl-0.9.8e-22.el5_8.4 | less
... output does not list this file 
```

我真的不明白这一点。这些文件在安装时是否重新链接、重建、剥离或其他？寻找有关下一步检查的任何解释或建议。谢谢！

* * *

编辑：谢谢@IgnacioVazquez-Abrams。对于其他任何人来说，这是一项 cron 工作：`/etc/cron.daily/prelink`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:51:04.983

它们是[预先链接](http://en.wikipedia.org/wiki/Prelink)的，可以加快加载速度。rpmdb 使用有关现有文件的新信息进行更新。

# android - 无法创建轮询位置服务android

> ID：12733821
> 
> 赞同：1
> 
> 时间：2012-10-04T18:48:40.483
> 
> 标签：android, location, looper

我正在尝试为位置创建轮询服务，该服务开始更新位置并等待 2 分钟，然后删除更新

当我尝试使用我的模拟器发送位置时，我的位置监听器似乎没有收到一个。

是因为我没有为我在线程中创建的 looper 实现处理程序吗？

或者因为我的线程休眠所以我没有收到任何位置

```
package android.co.in;

import android.graphics.Canvas;
import android.os.Looper;
import android.view.SurfaceHolder;

public class customThread extends Thread {

boolean stop;
boolean run;
customThread()
{   
    BounceLogger.logIt(this, "Constructor()");
    stop=false;
    run=true;
}
@Override
public void run()
{
  Looper.prepare();
  BounceLogger.logIt(this, "run()");
  while(!stop)
  {
      while(run)
      {
        updateThread(); 
      }

      try 
      {
          wait();
      } 
      catch (InterruptedException e) 
      {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }

  }
  Looper.loop();
}   

//derived class should overide this function
public void updateThread()
{

}

public void runThread()
{  
  start();
}

public void stopThread()
{
    stop=true;
}

public void pauseThread()
{
    run=false;
    BounceLogger.logIt(this,"calling wait on worker thread");
}

public void resumeThread()
{
    BounceLogger.logIt(this,"calling notify on worker thread");
    run=true;
    notify();       
}

}

//responsible for all location related queries
public class UserLocationManager extends customThread{

boolean locationFound;

LocationSelector locationSelector;

UserLocationManager(BuddiesAroundActivity activity)
{
    super();
    locationFound=false;
    locationSelector=LocationSelector.getLocationSelector(activity);
}

Location GetUserLocation()
{
    queryUserLocation();
    return locationSelector.getLastKnownLocation();
}

@Override
public void updateThread()
{
    locationSelector.startListening();
    try {
        Thread.sleep(200000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    locationSelector.stopListening();
}

void queryUserLocation()
{       
    runThread();    
}

}

package android.co.in;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class LocationSelector 
{

private static LocationSelector locationSelector=null;
private static final int TWO_MINUTES = 1000 * 60 * 2;
LocationManager locationManager;
LocationListener locationListener;
Location lastKnownLocation;

LocationSelector()
{
    Intialize();
}

LocationSelector(BuddiesAroundActivity activity)
{
    Intialize();
    locationManager=
       (LocationManager)activity.getSystemService(Context.LOCATION_SERVICE);
}

static LocationSelector getLocationSelector(BuddiesAroundActivity activity)
{
    if(locationSelector==null)
        locationSelector = new LocationSelector(activity);

    return locationSelector;    
}

void startListening()
{
    if(locationManager!=null)
    {
        BounceLogger.logIt(this, "started listening on location updates");

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000,100,     locationListener);
              locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,1000,100, locationListener);
    }
}

public void stopListening()
{
    BounceLogger.logIt(this, "stopped listening on location updates");
    locationManager.removeUpdates(locationListener);
}

private void Intialize() 
{
    lastKnownLocation=null;
    // TODO Auto-generated method stub
    locationListener=new LocationListener() {
        public void onLocationChanged(Location current) 
        {
          // Called when a new location is found by the network location     provider.
            BounceLogger.logIt(this,"recived a location"+current.getLatitude()+":"+current.getLongitude());
            if(lastKnownLocation==null)
            {
                lastKnownLocation=current;
            }
            getBestLocation(lastKnownLocation,current);

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}

      };

}

private float getDistanceBetweenLocations(Location a,Location b)
{
    float distance =a.distanceTo(b);     
    return distance;     
}

private double getAngleBetweenLocations(Location origin,Location destination)
{
     double angle=0.0f;
     double longDiff;
     double latDiff;

     longDiff=destination.getLongitude()-origin.getLongitude();
     latDiff=destination.getLatitude()-origin.getLatitude();

     angle=Math.atan2(longDiff,latDiff);         
     return angle; 
 }

Location getLastKnownLocation()
{
    return lastKnownLocation;
}

Location getBestLocation(Location old,Location current)
{
    if(old ==null)
        return current;

    //check time
    long timeDelta = current.getTime() - old.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    int useCurrentLocationByTime=0;
    if(isSignificantlyNewer)
    {
        useCurrentLocationByTime++;
    }

    //check for accuracy
    int useCurrentLocationByAccuracy=0;
    if(old.getAccuracy() < current.getAccuracy())
    {
        useCurrentLocationByAccuracy++;
    }

    //check for provider this is blunt but u might want give priority to providers and then decide
    int useCurrentLocationByProvider=0;
    if(old.getProvider().equals(current.getProvider()))
    {
        useCurrentLocationByProvider++;
    }

    int points=useCurrentLocationByTime+useCurrentLocationByAccuracy+useCurrentLocationByProvider;

    if(points > 1.5)
    {
        return current;     
    }

    return old;     
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:14:47.740

在您的 updateThread 中，您启动对 Location 的请求，然后将线程 tp sleep 200 秒，这使得无法接收新位置。线程一醒来，您就删除位置更新请求。

您需要重新设计代码，使 Location Listner 在不同的线程中运行，或者更好的是，您使用 handler.post() 方法在 200 秒后运行可运行的方法，这将停止位置侦听器并避免使用线程为了那个原因。

--已编辑--

你应该做这样的事情：

```
Handler handler = new Handler();
startLocationListener(); //in this method you only add the listener for onLocationsChange(). No threads needed.
handler.postDelayed(rStopLocationListener, 200000); //the runnable rStopLocationListener will run in 200 seconds

//define rStopLocationListener
private Runnable rStopLocationListener = new Runnable() {
  public void run() {
          stopLocationListener(); //in this method you only remove the listener for onLocationsChange(). No threads needed.
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:12:52.993

包android.co.in；

```
import android.graphics.Canvas;
import android.os.Looper;
import android.view.SurfaceHolder;

public class customThread extends Thread {

boolean stop;
boolean run;
customThread()
{   
    BounceLogger.logIt(this, "Constructor()");
    stop=false;
    run=true;
}
    @Override
    public void run()
    {
  //Looper.prepare();
  BounceLogger.logIt(this, "run()");
  while(!stop)
  {
      while(run)
      {
        updateThread(); 
      }

      try 
      {
          wait();
      } 
      catch (InterruptedException e) 
      {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }

  }
  //Looper.loop();
    }   

    //derived class should overide this function
   public void updateThread()
  {

  }

  public void runThread()
  {  
  start();
  }

  public void stopThread()
{
    stop=true;
}

  public void pauseThread()
{
    run=false;
    BounceLogger.logIt(this,"calling wait on worker thread");
}

  public void resumeThread()
{
    BounceLogger.logIt(this,"calling notify on worker thread");
    run=true;
    notify();       
}

   }

  class customLooperThread extends Thread {

boolean stop;
boolean run;
customLooperThread()
{   
    BounceLogger.logIt(this, "Constructor()");
    stop=false;
    run=true;
}
   @Override
   public void run()
   {
  Looper.prepare();
  BounceLogger.logIt(this, "run()");
  while(!stop)
  {
      while(run)
      {
        updateThread(); 
      }

      try 
      {
          wait();
      } 
      catch (InterruptedException e) 
      {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }

  }
  Looper.loop();
  } 

   //derived class should overide this function
  public void updateThread()
  {

  }

 public void runThread()
 {  
  start();
 }

 public void stopThread()
{
    stop=true;
}

 public void pauseThread()
{
    run=false;
    BounceLogger.logIt(this,"calling wait on worker thread");
}

  public void resumeThread()
{
    BounceLogger.logIt(this,"calling notify on worker thread");
    run=true;
    notify();       
}

   }

   //responsible for all location related queries
   public class UserLocationManager extends customLooperThread{

boolean locationFound;

LocationSelector locationSelector;
Handler h;

UserLocationManager(BuddiesAroundActivity activity,Handler uiHandler)
{
    super();
    locationFound=false;
    locationSelector=LocationSelector.getLocationSelector(activity);

}

Location GetUserLocation()
{
    queryUserLocation();
    return locationSelector.getLastKnownLocation();
}

@Override
public void updateThread() 
{
    locationSelector.startListening();
    h= new Handler();
    h.postAtTime(locationSelector, 20000);
    try {
        sleep(20000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    locationSelector.stopListening();
}

void queryUserLocation()
{       
    runThread();    
}

   }

   public class LocationSelector extends customThread
   {

private static LocationSelector locationSelector=null;
private static final int TWO_MINUTES = 1000 * 60 * 2;
LocationManager locationManager;
LocationListener locationListener;
Location lastKnownLocation;

LocationSelector()
{
    Intialize();
}

LocationSelector(BuddiesAroundActivity activity)
{
    Intialize();
    locationManager= 
                 (LocationManager)activity.getSystemService(Context.LOCATION_SERVICE);
}

static LocationSelector getLocationSelector(BuddiesAroundActivity activity)
{
    if(locationSelector==null)
        locationSelector = new LocationSelector(activity);

    return locationSelector;    
}

void startListening()
{
    if(locationManager!=null)
    {
        BounceLogger.logIt(this, "started listening on location updates");

          locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000,100,   
          locationListener);

      locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,1000,100,                   
      locationListener);
    }
}

public void stopListening()
{
    BounceLogger.logIt(this, "stopped listening on location updates");
    locationManager.removeUpdates(locationListener);
}

@Override
public void updateThread()
{
BounceLogger.logIt(this, "updateThread");
}

private void Intialize() 
{
    lastKnownLocation=null;
    // TODO Auto-generated method stub
    locationListener=new LocationListener() {
        public void onLocationChanged(Location current) 
        {
          // Called when a new location is found by the network location provider.
            BounceLogger.logIt(this,"recived a location"+current.getLatitude()+":"+current.getLongitude());
            if(lastKnownLocation==null)
            {
                lastKnownLocation=current;
            }
            getBestLocation(lastKnownLocation,current);

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}

      };

}

private float getDistanceBetweenLocations(Location a,Location b)
{
    float distance =a.distanceTo(b);     
    return distance;     
}

private double getAngleBetweenLocations(Location origin,Location destination)
{
     double angle=0.0f;
     double longDiff;
     double latDiff;

     longDiff=destination.getLongitude()-origin.getLongitude();
     latDiff=destination.getLatitude()-origin.getLatitude();

     angle=Math.atan2(longDiff,latDiff);         
     return angle; 
 }

Location getLastKnownLocation()
{
    return lastKnownLocation;
}

Location getBestLocation(Location old,Location current)
{
    if(old ==null)
        return current;

    //check time
    long timeDelta = current.getTime() - old.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    int useCurrentLocationByTime=0;
    if(isSignificantlyNewer)
    {
        useCurrentLocationByTime++;
    }

    //check for accuracy
    int useCurrentLocationByAccuracy=0;
    if(old.getAccuracy() < current.getAccuracy())
    {
        useCurrentLocationByAccuracy++;
    }

    //check for provider this is blunt but u might want give priority to providers and then decide
    int useCurrentLocationByProvider=0;
    if(old.getProvider().equals(current.getProvider()))
    {
        useCurrentLocationByProvider++;
    }

    int points=useCurrentLocationByTime+useCurrentLocationByAccuracy+useCurrentLocationByProvider;

    if(points > 1.5)
    {
        return current;     
    }

    return old;     
} 
```

}

# javascript - Google Maps API v3：Geocoding Reversal，只打印出一个标记（javascript）

> ID：12733823
> 
> 赞同：1
> 
> 时间：2012-10-04T18:48:48.080
> 
> 标签：javascript, google-maps-api-3, google-geocoder

对代码进行了更改，将依赖数据放入函数中，该函数向信息窗口返回正确的值，而不是 UNDEFINED。

问题来了，只打印了一个标记。

```
 var geocoder;
    var map; 

    function load() {
      geocoder = new google.maps.Geocoder();
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(57.699322, 11.951093),
        zoom: 6,
        minZoom: 6,
        maxZoom: 18,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

          // Get the xml data
    downloadUrl("functions.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var point = new google.maps.LatLng(markers[i].getAttribute("lat"),markers[i].getAttribute("lng"));

        codeLatLng(point, function(addr){   
           var name = markers[i].getAttribute("name").replace("_"," ");
           var html = '<div class="markTitle">' + name.replace("_"," ") + '</div>'
                    + '<div class="markAddress">'+addr+'</div>'
                    + '<a class="markLink" href="http://www.wikiplace.se/index.php?title='+ name +'">'                      
                    +  'Läs mer om '+ name.replace("_"," ") + ' här...</a>';
           var marker = new google.maps.Marker({
                        map: map,
                        position: point,
                        uid: "id"+i});      
           google.maps.event.addListener(marker, 'click', function() {
                    infoWindow.setContent(html);
                    infoWindow.open(map, marker);});                 
        });   // end codeLatLng 

   }  // end for-loop
});// end downloadURL  
    } 
```

这段代码似乎有效。

```
 function codeLatLng(point, callback) {        
    geocoder.geocode({'latLng': point}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {     
          callback(results[1].formatted_address);
        } else {
          alert("Couldn't find address");
        }
      } else {
        alert('Geocoder failed due to: ' + status);
      }
    });     
  } 
```

我还检查了 XML 文件是否有错误，但它的格式是正确的。有人对此有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:55:57.897

`codeLatLng`是异步的，到你使用`addr`它的时候它仍然是未定义的。

您应该将取决于其值设置为回调内部的代码移动。

# xampp - 在 Web Storm 中保存时出错（权限被拒绝）

> ID：12733824
> 
> 赞同：5
> 
> 时间：2012-10-04T18:48:49.373
> 
> 标签：xampp, save, permission-denied, webstorm

当我在 Web Storm 中单击保存时，出现以下错误：

```
Could not save project:
java.io.FileNotFoundException:/Applications/XAMPP/xamppfiles/htdocs/[myFileName]/.idea/workspace.xml~ (Permission denied) 
```

据我所知，我的更改正在保存。谁能告诉我是什么原因造成的，如果这是我需要关注的事情。

# dojo - 使用 dojo 创建图片库的问题

> ID：12733833
> 
> 赞同：2
> 
> 时间：2012-10-04T18:49:04.530
> 
> 标签：dojo

我在使用 dojo 创建图片库时遇到问题。json 文件中的图像不会呈现。我不确定问题是什么。这是我的代码。

```
<script type="text/javascript">
dojo.require("dojox.image.Gallery");
dojo.require("dojo.data.ItemFileReadStore");
dojo.require("dojo.parser");
djConfig.useCommentedJson=true;
dojo.addOnLoad(function(){  
var itemNameMap = {imageThumbAttr: "thumb",imageLargeAttr: "large"};
var request = {query: {}, count: 20};
dijit.byId('gallery1').setDataStore(itemStore,request, itemNameMap);
});
</script>
</head>
<body class="claro">
<div id="gallery1" dojoType="dojox.image.Gallery" style="background-color:gainsboro;">    
</div>
<div jsId="itemStore" dojoType="dojo.data.ItemFileReadStore"  url="TotalEnrollmentMapData.json"> </div> 
```

json文件是

```
var maps={identifier:'Enrollment Maps' ,
label:'Maps',
items:[

{  thumb:"maps_2.0/2012 Enrollment.png",
large:"maps_2.0/2012 Enrollment.png",
title:"I'm wide,me"
},
                                                  ,
{  thumb:"maps_2.0/2012 Enrollment Change.png",
large:"maps_2.0/2012 Enrollment Change.png",
title:"I'm a horizontal picture"},

{  thumb:"maps_2.0/2012 FTIAC Enrollment.png",
large:"maps_2.0/2012 FTIAC Enrollment.png",
title:"I'm another horizontal picture"},

{  thumb:"maps_2.0/2012 FTIAC Enrollment Change.png",
large:"maps_2.0/2012 FTIAC Enrollment Change.png",
title:"I'm a vertical picture"}
]}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T13:34:49.880

我正在编写一个基于图像库的相当大的 dojo 应用程序，在尝试了 dojox/image/Gallery 之后，我决定从头开始编写自己的小部件是谨慎的做法。

话虽这么说，您的代码似乎来自此

[http://dojocampus.org/explorer/#Dojox_Image_Gallery_Default](http://dojocampus.org/explorer/#Dojox_Image_Gallery_Default)

如果您查看画廊从中提取数据的 JSON 文件，它是一个实际的 JSON 文件（不是 JavaScript，您在文件中所说的就是这个文件）。

作为第一步，我会尝试直接从您的商店中获取一些商品，以确认它是否按照您的预期工作，然后才调查所述商店的内容是否符合 dojox/image/Gallery 所期望的内容。

# vb.net - VB.net 中的骰子游戏

> ID：12733834
> 
> 赞同：-3
> 
> 时间：2012-10-04T18:49:05.060
> 
> 标签：vb.net, debugging

我正在处理的 vb.net 程序中有三个问题。我正在创建一个骰子游戏，用户可以单击滚动，它会随机滚动并向他们展示他们滚动的骰子的图片。他们可以选择他们想玩多少筹码以及他们下注的数字。他们每次掷三个骰子。

以下是问题：

Duplicates - 当用户点击滚动和随机生成的数字时，其中两个是相同的，它不会显示其中一个。它应该显示其中之一

图像移入 Pictureboxes - 我试图让骰子图像移入 Pictureboxes，而不是让东西在播放时变得可见。

gui图片：http: [//i.imgur.com/Kn6Nd.png](http://i.imgur.com/Kn6Nd.png)

当前代码：

```
 Dim do1 As Integer = rnd.Next(1, 7)
    Dim do2 As Integer = rnd.Next(1, 7)
    Dim do3 As Integer = rnd.Next(1, 7)
    Dim do4 As Integer = rnd.Next(1, 7)
    Dim do5 As Integer = rnd.Next(1, 7)
    Dim do6 As Integer = rnd.Next(1, 7)

    ''Assign the appropriate image based on each die's value.
    d1.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", d1)), Image)
    d2.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", d2)), Image)
    d3.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", d3)), Image)
    d4.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", d1)), Image)
    d5.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", d2)), Image)
    d6.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", d3)), Image)

    Dim iNumber As Integer
    Dim iNumber2 As Integer
    Dim iNumber3 As Integer

    'purpose is to roll the dice and play the game. 
    'variables and declarations are here.
    Dim chips As Integer = 100

    If chkBet1.Checked = False And ChkBet2.Checked = False And chkBet3.Checked = False And chkBet4.Checked = False And chkBet5.Checked = False And chkBet6.Checked = False Then
        MessageBox.Show("Please select a number to play")
    Else

        If txtChip1.Text = "" AndAlso txtChip2.Text = "" AndAlso txtChip3.Text = "" AndAlso txtChip4.Text = "" AndAlso txtChip5.Text = "" AndAlso txtChip6.Text = "" Then
            MessageBox.Show("You must enter an amount.")
        Else

            'here we are randomizing the numbers for the game. 
            'iNumber = Int((6 * rnd()) + 1)
            'iNumber2 = Int((6 * rnd()) + 1)
            'iNumber3 = Int((6 * rnd()) + 1)

            'this will show the dice if the number generated between 1-6 is automatically chosen. 
            If iNumber = 1 Then
                d1.Visible = True
            ElseIf iNumber = 2 Then
                d2.Visible = True
            ElseIf iNumber = 3 Then
                d3.Visible = True
            ElseIf iNumber = 4 Then
                d4.Visible = True
            ElseIf iNumber = 5 Then
                d5.Visible = True
            ElseIf iNumber = 6 Then
                d6.Visible = True
            End If

            'this will show for the second dice. 
            If iNumber2 = 1 Then
                d1.Visible = True
            ElseIf iNumber2 = 2 Then
                d2.Visible = True
            ElseIf iNumber2 = 3 Then
                d3.Visible = True
            ElseIf iNumber2 = 4 Then
                d4.Visible = True
            ElseIf iNumber2 = 5 Then
                d5.Visible = True
            ElseIf iNumber2 = 6 Then
                d6.Visible = True
            End If

            'this will show for the third dice. 
            If iNumber3 = 1 Then
                d1.Visible = True
            ElseIf iNumber3 = 2 Then
                d2.Visible = True
            ElseIf iNumber3 = 3 Then
                d3.Visible = True
            ElseIf iNumber3 = 4 Then
                d4.Visible = True
            ElseIf iNumber3 = 5 Then
                d5.Visible = True
            ElseIf iNumber3 = 6 Then
                d6.Visible = True
            End If

            ''this part is for the chips that they win. If they bet one chip, and one dice rolls a one, they got two chips. 
            If do1 = 1 AndAlso chkBet1.Checked Then
                chips = "2"
            ElseIf do2 = 2 AndAlso ChkBet2.Checked Then
                chips = "4"
            ElseIf do3 = 3 AndAlso chkBet3.Checked Then
                chips = "6"
            ElseIf iNumber = 4 AndAlso chkBet4.Checked Then
                chips = "8"
            ElseIf iNumber = 5 AndAlso chkBet5.Checked Then
                chips = "10"
            ElseIf iNumber = 6 AndAlso chkBet6.Checked Then
                chips = "12"
            End If

            ''second chip possible winnings. 
            If iNumber2 = 1 AndAlso chkBet1.Checked Then
                chips = "2"
            ElseIf iNumber2 = 2 AndAlso ChkBet2.Checked Then
                chips = "4"
            ElseIf iNumber2 = 3 AndAlso chkBet3.Checked Then
                chips = "6"
            ElseIf iNumber2 = 4 AndAlso chkBet4.Checked Then
                chips = "8"
            ElseIf iNumber2 = 5 AndAlso chkBet5.Checked Then
                chips = "10"
            ElseIf iNumber2 = 6 AndAlso chkBet6.Checked Then
                chips = "12"
            End If

            'third chip possible winnings. 
            If iNumber3 = 1 AndAlso chkBet1.Checked Then
                chips = "2"
            ElseIf iNumber3 = 2 AndAlso ChkBet2.Checked Then
                chips = "4"
            ElseIf iNumber3 = 3 AndAlso chkBet3.Checked Then
                chips = "6"
            ElseIf iNumber3 = 4 AndAlso chkBet4.Checked Then
                chips = "8"
            ElseIf iNumber3 = 5 AndAlso chkBet5.Checked Then
                chips = "10"
            ElseIf iNumber3 = 6 AndAlso chkBet6.Checked Then
                chips = "12"
            End If

            'chips are added up here by all
            'chips = iNumber + chips '+ iNumber2 + iNumber3
            lblChips.Text = chips
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:08:22.780

您为每个骰子使用相同的图片框。看起来您应该只有 3 个图片框，每个骰子一个，并且它们应该始终可见。然后，当您确定骰子上滚动的值时，更改图片框中的图像以匹配。将 6 个图像存储为资源。

我在表单上有 1 个按钮和 3 个图片框。我的项目资源中还嵌入了 6 张图像（每个骰子一张）。每次单击按钮时，我都有此代码根据随机数在每个图片框上显示正确的图像：

```
Option Strict On

Public Class Form1

    Dim rnd As New Random()

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        'Get a random digit from 1 to 6 for each die.  
        Dim die1 As Integer = rnd.Next(1, 7)
        Dim die2 As Integer = rnd.Next(1, 7)
        Dim die3 As Integer = rnd.Next(1, 7)

        'Assign the appropriate image based on each die's value.
        PictureBox1.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", die1)), Image)
        PictureBox2.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", die2)), Image)
        PictureBox3.Image = CType(My.Resources.ResourceManager.GetObject(String.Format("Die{0}", die3)), Image)
    End Sub

End Class 
```

附加信息：

```
I created 6 .png files, one for each side of a die.  I named them Die1.png, Die2.png, etc. and then added them as resources to my project. 
```

# c++ - C ++指针与数组和指针转换

> ID：12733835
> 
> 赞同：1
> 
> 时间：2012-10-04T18:49:10.600
> 
> 标签：c++, arrays, pointers, casting

我正在尝试以下代码：

```
unsigned long * foo = (unsigned long *) 0x200000; 
```

因此，据我了解， foo 指向无符号长 0x200000。现在，如果我尝试，

```
std::cout<<foo[0]; 
```

我认为这应该打印值`0x200000`（可能是十进制）。因为，`foo[0] = *(foo + 0) = 0x200000`。但是，它实际上打印`0`.

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:50:21.707

你误会了，

```
unsigned long * foo = (unsigned long *) 0x200000; 
```

将 0x200000 解释为`unsigned long`. 因为它极不可能是`unsigned long`您可以在程序中合法访问的地址，

```
std::cout<<foo[0]; 
```

几乎可以肯定是未定义的行为，并可能导致段错误。但是，在您的情况下，访问该内存位置不会导致段错误，并且那里的位被解释并打印为`unsigned long`，它们恰好全为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:54:59.020

```
type * pointerName = addressItPointsTo; 
```

`pointerName[0]`与 相同`*pointerName`，表示取消引用指针并在它指向的地址处获取值。它恰好是 0，但它通常会导致分段错误。

# c# - Visual Studio 启动错误的项目

> ID：12733838
> 
> 赞同：11
> 
> 时间：2012-10-04T18:49:17.200
> 
> 标签：c#, visual-studio-2010

我有一个包含 5 个项目的解决方案。当我将一个项目设置为启动项目并点击调试按钮时，会启动其他项目之一。那是一个错误吗？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-06T04:58:49.437

如果您的项目是 Web 应用程序，请尝试为项目 URL 分配不同的端口。它可以在 Project / Properties / Web / Project URL 中完成。如果它们具有相同的 url，我的 Visual Studio 经常会运行错误的项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-30T17:29:34.830

我不想更改应用程序根 url，所以我这样做效果很好。

转到**Project / Properties / Web / Project URL**，然后单击`Create Virtual Directory`按钮。它将修复在 IISExpress 中使用的应用程序版本。

（我使用了几个不同的分支，这是一个简单的修复，因此我可以为每个分支使用相同的端口......然后我的浏览器历史记录仍然有效。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:52:12.270

您可能需要检查解决方案的属性，并确保在启动项目选择中选择了一个项目并且没有选择多个项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:59:57.700

在 VS 2010 中，您可以右键单击一个项目并选择“设置为启动项目”。但是，您也可以右键单击解决方案并选择属性。在对话框中有“单个启动项目”和“多个启动项目”的选项。您确定此处未选择“多个...”吗？

# apache - 如何在 ubuntu 11.10 中为 rails 应用程序配置 apache 乘客

> ID：12733845
> 
> 赞同：0
> 
> 时间：2012-10-04T18:49:32.597
> 
> 标签：apache, passenger

我正在使用 linode vps 部署 rails 应用程序我已经成功安装了 ruby​​ 和 rails、mysql 和 apache 以及乘客。

这是我在 /etc/host 中的主机文件

```
 127.0.0.1                          localhost.localdomain localhost
     198.58.100.126                     foo.qitch1.com       foo 
```

在 httpd.conf 文件中安装乘客后，我还复制了一些行

```
 LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/passenger-3.0.17/ext/apache2/mod_passenger.so

   PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/passenger-3.0.17

  PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194@global/ruby 
```

其中包括在 apache2.conf

现在我在 /atc/apache2/sites_available 中创建名为 generate_pdf.com 的文件

其中 generate_pdf 是我的应用程序的名称。这个文件有代码

```
 NameVirtualHost *:80

 <VirtualHost *:80>
   ServerName aziz.qitch1.com
   DocumentRoot /var/www/generate_pdf/public
   RailsEnv production
   <Directory /var/www/generate_pdf/public>
    Allow from all
    Options -MultiViews
    </Directory>
</VirtualHost> 
```

但是当我启动服务器并访问此网址 aziz.qitch1.com

什么都没有加载，我在 shell 中有这个

```
 NameVirtualHost *:80 has no VirtualHosts 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:16:21.033

我正在研究一个相关的问题，并遇到了[http://old.thoughtsincomputation.com/posts/using-phusion-passenger-and-apache2-on-ubuntu-with-rvm-and-gemsets](http://old.thoughtsincomputation.com/posts/using-phusion-passenger-and-apache2-on-ubuntu-with-rvm-and-gemsets)，它建议将 VirtualHost中的代码`/etc/apache2/conf.d/virtual.conf`。这解决了我的问题，也可以帮助你。

注意我没有`IfModule`文章使用，我的VirtualHost代码如下：

```
<VirtualHost *:80>
   ServerName www.yournamehere.com
   # !!! Be sure to point DocumentRoot to 'public'!
   DocumentRoot /rails_app_folder/app_name/public
   <Directory /rails_app_folder/app_name/public>
      # This relaxes Apache security settings.
      AllowOverride all
      # MultiViews must be turned off.
      Options -MultiViews
   </Directory>
</VirtualHost> 
```

# android - Android Intent 用于新的一天或重大时间更改

> ID：12733849
> 
> 赞同：2
> 
> 时间：2012-10-04T18:49:52.580
> 
> 标签：android, android-intent, alarmmanager

Android 中是否存在在重大时间变化（例如新的一天）时广播的意图。我正在寻找类似于在 iOS 中广播的重大时间更改通知的内容。我正在尝试安排在每天开始时进行处理。我知道使用 AlarmManager 可以做到这一点，但如果有其他方法，我想避免安排我自己的警报。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T18:55:13.030

`Intent`Android中唯一与时间相关的有：

*   [`ACTION_TIME_TICK`](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_TICK)：每分钟触发一次（仅由系统触发）。
*   [`ACTION_TIME_CHANGED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_CHANGED)：当设备的时间由用户设置时触发。
*   [`ACTION_TIMEZONE_CHANGED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIMEZONE_CHANGED): 当设备的时区改变时触发（仅由系统触发）。

恐怕没有“重大时间变化”的意图。我能建议的最好方法是注册`ACTION_TIME_TICK`并检查时间是否等于午夜，或者如你所说，使用`AlarmManager`.

[您可以在文档](http://developer.android.com/reference/android/content/Intent.html)中找到可用意图的完整列表（点击 contol+F 并找到“标准活动操作”以直接进入列表）。“广播操作”是您对此问题感兴趣的操作。

# c++ - 在 ROOT 中绘制具有不同变量名称的直方图

> ID：12733852
> 
> 赞同：1
> 
> 时间：2012-10-04T15:10:55.687
> 
> 标签：c++, root-framework

我不确定如何正确表达这个问题，但这就是我想要做的。

可以使用 cern ROOT 和以下命令绘制单个直方图，

```
(TH1F*)electron->Draw(); 
```

但是我有几十个按顺序命名的直方图，比如电子1、电子2、电子3等，我想写一个简单的循环来绘制它们。我尝试使用 sprintf 和一个简单的 for 循环，但 ROOT 不喜欢它。

```
char name[20];
(TH1F*)electron->Draw();
for(int j=0;j<5;j++){
            sprintf(name, "%s%d","electron",j);
            (TH1F*)name->Draw("same");
 } 
```

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:52:27.853

您还需要一个额外的步骤。正如@twalberg 所说，你有一个字符串，而不是一个对象指针。对于 root，您可以做的只是更改您的代码，以便我添加一行。

```
char name[20];
electron->Draw();
for(int j=0;j<5;j++){
   sprintf(name, "%s%d","electron",j);
   TH1F *h = (TH1F*)gDirectory->Get(name); // THIS IS THE MISSING LINE
   if ( h ) h->Draw("same"); // make sure the Get succeeded 
 } 
```

额外的行从本地 TDirectory 按名称获取引用的对象。强制转换是必要的，以便将 gDirectory 强制转换为正确类型的对象。

当您以交互方式使用 root 时，这会在幕后神奇地发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T19:17:56.973

创建一个显示“electron0”的字符串，将`char *`指向字符串开头的指针转换为 a `TH1F *`，并将其取消引用，就好像字符串实际上是 a `struct TH1F *`（或`class TH1F *`）很可能只会使程序崩溃，并且不一样作为引用一个名为`electron0`.

可能你最好的选择是，而不是命名一堆变量`electron0`，`electron1`等等......，创建一个数组`TH1F electron[NELECTRONS];`，然后将它们引用为`electron[0]`，`electron[1]`等等。（或者，如果对象是动态分配的，使用 a`TH1F *electron[NELECTRONS];`并存储指针（带有适当的间接引用它们（`*(electron[0]).Draw(...)`或`electron[0]->Draw(...)`）。

# excel - 如何在 excel - VB 中操作字符串？

> ID：12733854
> 
> 赞同：1
> 
> 时间：2012-10-04T18:50:06.653
> 
> 标签：excel, vba

我想知道是否有人可以告诉我如何从 Excel - VB 中的以下字符串推断“http://www.nbc.com/xyz”和“我喜欢这个节目”。

谢谢

```
<a href="http://www.nbc.com/xyz" >I love this show</a><IMG border=0 width=1 height=1 src="http://ad.linksynergy.com/fs-bin/show?id=Loe5O5QVFig&bids=261463.100016851&type=3&subid=0" > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T19:54:31.613

```
Sub Tester()
    '### add a reference to "Microsoft HTML Object Library" ###
    Dim odoc As New MSHTML.HTMLDocument
    Dim el As Object
    Dim txt As String

    txt = "<a href=""http://www.nbc.com/xyz"" >I love this show</a>" & _
         "<IMG border=0 width=1 height=1 " & _
         "src=""http://ad.linksynergy.com/fs-bin/show?" & _
         "id=Loe5O5QVFig&bids=261463.100016851&type=3&subid=0"" >"

    odoc.body.innerHTML = txt

    Set el = odoc.getElementsByTagName("a")(0)
    Debug.Print el.innerText
    Debug.Print el.href

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:36:44.993

曾经的方法是使用正则表达式。另一种方法是使用 Split 在各种分隔符上拆分字符串，例如

```
Option Explicit

Sub splitMethod()
Dim Str As String

    Str = Sheet1.Range("A1").Value
    Debug.Print Split(Str, """")(1)
    Debug.Print Split(Split(Str, ">")(1), "</a")(0)

End Sub

Sub RegexMethod()
Dim Str As String
Dim oRegex As Object
Dim regexArr As Object
Dim rItem As Object

    'Assumes Sheet1.Range("A1").Value holds example string
    Str = Sheet1.Range("A1").Value

    Set oRegex = CreateObject("vbscript.regexp")
    With oRegex
        .Global = True
        .Pattern = "(href=""|>)(.+?)(""|</a>)"
        Set regexArr = .Execute(Str)

        'No lookbehind so replace unwanted chars
        .Pattern = "(href=""|>|""|</a>)"
        For Each rItem In regexArr
            Debug.Print .Replace(rItem, vbNullString)
        Next rItem
    End With
End Sub

'Output:
'http://www.nbc.com/xyz
'I love this show 
```

这匹配`href="`或`>`在字符串的开头，`"`或`</a>`在字符串的末尾，中间有任何字符（\n 换行符除外） `(.+?)`

# sql - 如何从联接表中选择具有特定值或空值的字段

> ID：12733855
> 
> 赞同：0
> 
> 时间：2012-10-04T18:50:11.817
> 
> 标签：sql

也许我的描述有点模糊:) 我想在两个表上进行外部联接，并选择一个字段具有某些值或为空的记录我最初的概念是

```
select A.x,B.y 
from A 
left outer join B 
    on A.id= B.a_id 
where b.y ='abc' 
    or b.y is null 
```

但后来我意识到它是从 B 表中获取的，而不是从加入
的表中获取，我该怎么做？

我需要的是选择行，其中By是'abc'或null，即：
（1，'abc'）
（2，null）

而我的查询为我提供了带有结果的内部连接功能

(1,'abc')
忽略其他条目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:27:36.240

是吗

```
select A.x,B.y from A left outer join B on A.id= B.a_id and ( b.y ='abc' or b.y is null ) 
```

阅读评论后，只需删除左外层

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:54:34.883

这是你想要的吗？

```
 select A.x,b.y 
    from A 
    left outer join B 
        on A.id= B.a_id and
        b.y ='abc' 
```

如果，正如您在评论中所说，您得到的是内部联接结果而不是预期的外部联接，那是因为您在 where 子句中引用了外部表。您需要移动对联接的引用。

# cuda - 对寄存器和共享内存使用无符号短整数是否有意义？

> ID：12733856
> 
> 赞同：2
> 
> 时间：2012-10-04T18:50:14.477
> 
> 标签：cuda, gpgpu

在 CUDA 程序中为寄存器（用于节省寄存器的内存）和共享内存（更快的访问）使用无符号短整数是否有意义？

我创建模板**设备**函数（使用寄存器和共享内存）并将其专门用于 uint 和 ushort。使用：对于 uint：25 个寄存器和速度 460 MB/秒。对于 ushort：26 个寄存器和速度 420 MB/秒。

所以没有理由使用 unsigned short int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:18:41.903

我对 CUDA 没有丰富的经验，但我读过，我们应该避免使用无符号类型（[Cuda C 最佳实践指南](http://www.google.pl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CBwQFjAA&url=http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Best_Practices_Guide.pdf&ei=Kt9tUM2dCsWn4gTzwIHYDA&usg=AFQjCNHdGZmujC4_z8Ygb0mxFtojxnIarA&sig2=CU5un3jo-hstFJJ7PW8Rnw&cad=rja "最佳实践指南")）。

使用共享内存可能是提高应用程序性能的最佳方式。你应该考虑如何优化你的内核。当您经常从全局内存中读取相同的值或者您需要在内核中使用一个线程（所有内核将数据加载到 SM 并停止但首先从 SM 中读取数据而不是从全局内存中），请使用共享内存。

一切都取决于你想做什么。如果您想优化内核，请发布一些代码。

# macos - Cocoa - 如何以编程方式初始化视图？

> ID：12733864
> 
> 赞同：2
> 
> 时间：2012-10-04T18:50:41.967
> 
> 标签：macos, cocoa, nsview, nswindow, appkit

我在理解如何初始化视图而不将其连接到我的 nib 文件中时遇到问题。所以我想要做的是，而不是拖入视图并为其分配一个专用类，我想以编程方式将其添加到我的应用程序委托中的窗口中。

我真的不知道这是多么错误，但我在我的 AppDelegate 中尝试了这样的事情：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    DView *dV = [[DView alloc]initWithFrame:NSMakeRect(0, 0, 1000, 600)];
    [self.window addSubview:dV];
} 
```

我认为窗口也是一个 NSView ，那么为什么不直接将它添加到它呢？但这会崩溃并以无限循环结束。我希望你能帮助我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:50:08.570

是的，

```
MONView * view = [[MONView alloc] initWithFrame:someFrame]; 
```

是正确的。

* * *

> 我认为窗口也是一个 NSView

它*不是*NSView （它是`NSResponder`）。正如 Richard Stahl 指出的那样，您应该与窗口的*内容视图*进行交互：`[window.contentView addSubview:view];`

# jvm - Java 堆转储权限

> ID：12733868
> 
> 赞同：9
> 
> 时间：2012-10-04T18:50:50.080
> 
> 标签：jvm, heap-memory, file-permissions, heap-dump, jmap

在 Linux 机器（也很可能是 Unix 机器）中生成的 Java 堆转储具有访问限制。堆只能由进程的所有者读取（ACL 掩码设置为 600）。我了解这是出于安全原因。但是，我找不到任何引用或解释该行为的文档。谁能指出我的文档（如果有的话）？另外，有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:52:08.007

如果您对深入的 JVM 内部结构感兴趣，可以查看 OpenJDK 的源代码。

这是 HeapDumper 服务的链接：http: [//hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/share/vm/services/heapDumper.cpp](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/share/vm/services/heapDumper.cpp)

如果你深入研究，你会看到 JVM 正在创建二进制文件`S_IREAD | S_IWRITE`

```
 4373 // create binary file, rewriting existing file if required
 4374 int os::create_binary_file(const char* path, bool rewrite_existing) {
 4375   int oflags = O_WRONLY | O_CREAT;
 4376   if (!rewrite_existing) {
 4377     oflags |= O_EXCL;
 4378   }
 4379   return ::open64(path, oflags, S_IREAD | S_IWRITE);
 4380 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:04:53.830

堆转储由作为特定用户运行的 JVM 进程编写。就像*任何*Linux 进程创建的任何文件*一样*，它将归该用户所有。

 *如果您想要实际的文档，[这里是](http://linux.die.net/man/2/open). 看看下面的描述`O_CREAT`。*

# python - Python中的快速后缀生成

> ID：12733871
> 
> 赞同：2
> 
> 时间：2012-10-04T18:50:54.703
> 
> 标签：python

我有一个字符串 s，我需要从字符串生成一组后缀。例如，`abcdef`会导致数组`[f, ef, def, cdef, bcdef, abcdef]`。我以直接的方式这样做：

```
def get_suffixes(s):
    sb_set = set()
    sb = ''
    for i in range(len(s)-1,-1,-1):
        sb = s[i] + sb
        sb_set.add(sb) 
```

有没有更优化/快速的方法来做到这一点？我需要生成大量这样的后缀（字符串 s 是 10K 长）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:53:01.580

怎么样`set(s[a:] for a in xrange(len(s)))`？

（不确定为什么要使用集合，因为后缀必须是不同的，但我在这里保持使用集合，因为您说这就是您想要的。如果您只想要一个列表，您也可以只使用列表推导。 )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:52:56.050

只需使用列表推导 .. 稍后在需要集合操作时转换为集合

```
s = "abcdef"    
suffixes = [s[i:] for i in range(1,len(s))] 
```

看

```
>>> s = "abcdef"
>>> suffixes = [s[i:] for i in range(1,len(s))]
>>> suffixes
['bcdef', 'cdef', 'def', 'ef', 'f'] 
```

或者

```
>>> s = "abcdef"
>>> suffixes = [s[i:] for i in range(len(s))]
>>> suffixes
['abcdef','bcdef', 'cdef', 'def', 'ef', 'f'] 
```

# prolog - 读取序言中的输入并打印结果

> ID：12733874
> 
> 赞同：1
> 
> 时间：2012-10-04T18:51:05.007
> 
> 标签：prolog, dcg

我正在学习 Prolog 的想法，这是我想要练习的：

我想编写一个可以像这样工作的 Prolog 程序：

```
?- input([apple,is,fruit]).
?- input([chicken,is,meat]).
?- input([Is,apple,meat]).
No, it is a fruit
?- input[(Is,chicken,meat])
Yes. 
```

当我试图实现这个程序时，我遇到了一些问题：

(1) 我使用这段代码试图读取输入并区分问题和断言，但它失败了：

```
input([]).
input([X|R]) :- X is 'Is', write('test code read question'); write("test code read assertion"). 
```

（2）我仍然对如何从输入消息中过滤出有用的信息感到困惑。例如，在`[Apple,is,fruit]`输入数组中，我只需要`apple`和`fruit`。我们平时是怎么跳`is`字的呢？

我不想在程序中硬编码太多东西，而是更喜欢一种好的函数式编程风格来解决可以帮助我从中学习的问题。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T19:23:02.943

仅仅因为我喜欢它们，我会倾向于使用明确的从句语法（DCG）。然后你可以很容易地做出陈述并解析它们：

```
word(Word) --> [Word].
statement(Statement) --> 
    word(Thing), [is], word(Category), 
    { Statement =.. [Category, Thing] }. 
```

DCG 的诀窍是您的语法正在转换为差异列表表示。括号中的部分是普通的 Prolog 代码；它周围的部分被解释为列表的文字部分或其他语法规则。所以 [Word] 匹配一个原子。我们实际上可以这样写规则：

```
statement(Statement) -->
    [Thing, is, Category],
    { Statement =.. [Category, Thing] }. 
```

它会产生相同的效果，也许更具可读性，但我喜欢迂腐。特别注意使用`=..`，它将列表转换为事实，反之亦然（因此`[fruit, apple]`变为`fruit(apple)`）。

使用 DCG 进行解析非常简单：使用`phrase/2`：

```
?- phrase(statement(X), [apple,is,fruit]).
X = fruit(apple). 
```

然后您可以使用`asserta`将这些子句插入到动态存储中：

```
input(Text) :- 
    phrase(statement(Statement), Text),
    asserta(Statement). 
```

例如：

```
?- input([apple,is,fruit]).
true.

?- fruit(X).
X = apple. 
```

现在您可以编写另一个子句来解析查询：

```
query(Query) --> 
    ['Is'], word(Word), word(Category), 
    { Query =.. [Category, Word] }. 
```

看起来非常相似！同样，如果您愿意，可以使用以下语法：

```
query(Query) -->
    ['Is', Word, Category],
    { Query =.. [Category, Word] }. 
```

现在您可能想要编写一个子句将两个语法规则组合成一个“句子”规则：

```
sentence(statement(S)) --> statement(S).
sentence(query(Q))     --> query(Q). 
```

试试看：

```
?- phrase(sentence(X), ['Is', apple, fruit]).
X = query(fruit(apple)).

?- phrase(sentence(X), [apple, 'is', fruit]).
X = statement(fruit(apple)) ; 
```

您现在看到，我们不仅得到了解析的事实，而且还得到了一个包装器，它告诉我们它是一个语句还是一个查询。我们现在可以用 this 而不是语句和查询来解析，并`input`像这样重写：

```
input(Text) :-
    phrase(sentence(S), Text), perform(S). 
```

我添加了一个辅助来处理这项工作：

```
perform(statement(S)) :- asserta(S).
perform(query(Q))     :- Q. 
```

当您添加更多语法抽象时，这将很方便：每个`perform`子句处理不同的“句子”类型，因此您在上面进行解析并处理下面的工作。现在，我们或多或少地拥有了您想要的东西：

```
?- input([apple,is,fruit]).
true ;
false.

?- input(['Is',apple,fruit]).
true.

?- input(['Is',banana,fruit]).
false. 
```

您可以通过在`sentence`规则中引入削减并使用特殊输出处理真/假来改进事情，但我认为这是我想要进入的方向，特别是如果您希望将来能够处理不同的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:08:04.170

您没有使用 Prolog 语法。您所描述的可以通过这种方式实现（未经测试的代码）：

```
:- dynamic facts/1.

input(L) :-
  (  L == [is|_]
  -> (  facts(L)
     -> true
     ;  get_kind(L, K), format('no, it is ~w~n', [K])
     )
  ;  assert(facts(L))  % should check duplicates?
  ).

get_kind([is, Object, _], Kind) :-
  facts([Object, is, Kind]) -> true ; Kind = unknow. 
```

注意以大写开头的符号：这些是*变量*，而不是*原子*。

# wpf - wpf 数据绑定到对象

> ID：12733876
> 
> 赞同：2
> 
> 时间：2012-10-04T18:51:09.737
> 
> 标签：wpf, object, data-binding

例如我有一个班级人：

```
class Person {
     string Name { get; set; }
} 
```

在我的 wpf 应用程序的 mainWindow 中，我得到了一个带有此类的 ObservableCollection，我想在表格中显示它。我让它在表格中显示成员（在这种情况下只有名称），但由于某些原因，我在表格中有一个按钮。在此按钮中，我使用 xaml 文件中的“命令”属性将 ICommand 绑定到它。

这就是我到目前为止所做的工作，但我怎样才能将对象“人”本身作为参数发送给命令？我成功地将 xaml 中的命令参数用于字符串/整数，但是如何发送我在行中显示的对象？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:35:22.723

```
<Button Command="{Binding ElementName=}" CommandParameter={Binding ElementName=ObjectToSendWithCommand" />` 
```

听起来您没有在 CommandParameter 值中正确绑定对象。我需要成为代码隐藏或 ViewModel 中的公共属性（如果您使用的是 MVVM），如果此值发生更改，则需要使用 PropertyChanged 事件。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:16:42.623

我试图做同样的事情，但我没有找到任何方法来创建`Binding`另一个绑定。我如何解决这个问题：

我`SelectedItem`在同一个地方创建一个属性`ICommand`，然后我将集合中的选定项目绑定到我的`SelectedItem`属性，`mode=TwoWay`. 这样，我总是在我的`SelectedItem`属性中拥有集合的选定项目，并且`ICommand`我可以访问它。

希望这可以帮助您解决问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:23:41.853

你的 Xaml 文件看起来像

```
<ListBox ItemsSource="{Binding MultipleCopyList, Mode=TwoWay}">
 <ListBox.ItemTemplate>
<DataTemplate>
      <StackPanel Orientation="Horizontal">
         <TextBlock Text="{Binding HeaderText,Mode=TwoWay}" Grid.Column="1"  /> 
      </StackPanel>
    </DataTemplate>
</ListBox> 
```

你的触发器看起来像

```
<i:Interaction.Triggers>
<i:EventTrigger EventName="MouseLeftButtonUp">

<cmd:EventToCommand Command="{Binding DataContext.MouseClickCommand,  RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter ="{Binding}" />
</i:EventTrigger>
</i:Interaction.Triggers> 
```

你的 ViewModel 看起来像

```
private RelayCommand<StateForm> _MouseClickCommand;
    public RelayCommand<StateForm> MouseClickCommand
    {
        get {
            if (_MouseClickCommand == null)
            {
                _MouseClickCommand = new RelayCommand<StateForm>(e => MouseClick(e));
            }
            return _MouseClickCommand; }
        set
        {
            _MouseClickCommand = value;
            RaisePropertyChanged("MouseClickCommand");
        }
    }
  private void MouseClick(StateForm e)
    {
   Your Code goes Here
       } 
```

# c - 正确计算 OpenGL 使用的模型和视图矩阵？

> ID：12733879
> 
> 赞同：1
> 
> 时间：2012-10-04T18:51:19.133
> 
> 标签：c, opengl, matrix, model-view, projection-matrix

我在 GL 3.2 中遇到了一些矩阵问题。我如何（最好以矩阵表示法）生成模型和视图矩阵？如何设置我的模型/视图矩阵？我已经有一个投影矩阵；它被定义为：

```
float right = 800.0f, left = 0.0f;
float top = 0.0f, bottom = 600.0f;
float far = 1.0f, near = -1.0f;

float ortho_mat[16] = {(2.0f / (right - left)), 0.0f, 0.0f, 0.0f,
                     0.0f, (2.0f / (top - bottom)), 0.0f, 0.0f,
                     0.0f, 0.0f, (-2.0f / (far - near)), 0.0f,
                     (-((right + left) / (right - left))),
                     (-((top + bottom) / (top - bottom))),
                     (-((far + near) / (far - near))), 1.0f}; 
```

我知道这个正交矩阵必须乘以模型和视图矩阵，并且必须乘以点。如何设置这些矩阵？

编辑：我不介意它们是否连接成一个（模型视图）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:08:30.730

我建议您使用库 OpenGL 数学而不是自己实现所有内容。OpenGL 数学包含 OpenGL 所需的所有数学 - 语法灵感来自 GLSL。该库位于此处：

[http://glm.g-truc.net/](http://glm.g-truc.net/)

或者，您可以实现自己的数学库。在这种情况下，我建议您查看 Angels 数学库（来自“交互式计算机图形学：基于着色器的 OpenGL，6/E 的自顶向下方法”一书）。这个库很容易理解：

[http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/CODE/include/](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/CODE/include/)

（查看 mat.h 和 vec.h）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:00:16.530

如果你只是想计算模型视图矩阵，你可以参考参考页面了解它是如何在 GLU 中实现的。（您实际上不能在 OpenGL 3 中使用 GLU 库，但参考页面显示了矩阵数学是如何在内部实现的。）

用于定位“相机”： [http ://www.opengl.org/sdk/docs/man/xhtml/gluLookAt.xml](http://www.opengl.org/sdk/docs/man/xhtml/gluLookAt.xml)

进行翻译： [http ://www.opengl.org/sdk/docs/man/xhtml/glTranslate.xml](http://www.opengl.org/sdk/docs/man/xhtml/glTranslate.xml)

进行旋转： [http ://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml)

# php - 根据不同的日期间隔计算价格

> ID：12733881
> 
> 赞同：1
> 
> 时间：2012-10-04T18:51:26.043
> 
> 标签：php, mysql, sql

我正在尝试开发酒店预订系统。在我的搜索表单中，我有两个日期选择器（出发日期和到达日期）和目的地。我的日期有问题，在我的数据库中，我有两个表“价格”和“季节”，可以通过季节的 id 与关节连接。

表结构：

```
CREATE TABLE IF NOT EXISTS `prices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `prix_single` varchar(255) NOT NULL,
  `prix_double` varchar(255) NOT NULL,
  `prix_triple` varchar(255) NOT NULL,
  `idseason` varchar(255) NOT NULL,
  `idhotel` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=41 ;

CREATE TABLE IF NOT EXISTS `season` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `begin_date` varchar(255) NOT NULL,
  `end_date` varchar(255) NOT NULL,
  `idhotel` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) 
```

例如第一季我有 1 月 1 日至 2 月 28 日期间（每人每晚 100 美元） 3 月 1 日至 4 月 28 日（每人每晚 120 美元）

如果我的客户选择时间段 [2 月 26 日至 3 月 3 日]，我如何使用 SQL 进行计算？我试过这个：

```
SELECT *
FROM season, prices
WHERE season.id=prices.season
and (season.begin_season BETWEEN 2012/02/26 AND 2012/03/03 OR season.fin_season BETWEEN 2012/02/26 AND 2012/03/03) 
```

它对我不起作用，它返回给我的结果是空的，我的数据库中有两个赛季

```
id  begin_season    end_season  idhotel
32  10/07/2012  28/09/2012  52
35  29/09/2012  29/10/2012  52 
```

我怎样才能做到这一点？非常感谢！

编辑：我已经改变了我的表格和我的查询，如下所示：

```
CREATE TABLE IF NOT EXISTS `season` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `begin_season` date NOT NULL,
  `end_season` date NOT NULL,
  `idhotel` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) 

INSERT INTO `season` (`id`, `begin_season`, `end_season`, `idhotel`) VALUES
(32, '2012-08-09', '2012-09-09', '52'),
(35, '2012-09-10', '2012-10-30', '52');

CREATE TABLE IF NOT EXISTS `prices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `price_single` varchar(255) NOT NULL,
  `price_double` varchar(255) NOT NULL,
  `price_triple` varchar(255) NOT NULL,
  `idseason` varchar(255) NOT NULL,
  `idhotel` int(11) NOT NULL,
  PRIMARY KEY (`id`)
)

INSERT INTO `prices` (`id`, `price_single`, `price_double`, `price_triple`, `idseason`, `idhotel`) VALUES
(31, '10', '20', '30', 32, 52),
(32, '20', '40', '60', 35, 52),

SELECT * FROM season, prices WHERE season.id=prices.idseason and (season.begin_season BETWEEN '2012-09-30' AND '2012-10-27' OR season.end_season BETWEEN '2012-09-30' AND '2012-10-27') 
```

我的结果是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:56:00.627

您可以将 begin_date 和 end_date 设为 varchar 以外的其他内容。可能是时间戳或表示 unix 时间的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:57:12.160

您的`season`表设置不正确。

`begin_date`并且`end_date`是`varchar(255)`...不是`date`或`datetime`或`timestamp`

所以你不能使用“BETWEEN”。将它们转换为日期/日期时间/时间戳，然后您就可以使用您想要的所有功能（>、<、BETWEEN 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:57:17.570

我认为您的日期格式不正确。日期的格式是

`The DATE type is used for values with a date part but no time part. MySQL retrieves and displays DATE values in 'YYYY-MM-DD' format.`

根据此处的文档：

[http://dev.mysql.com/doc/refman/5.0/en/datetime.html](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

改变它有什么作用吗？

编辑：

哦，您甚至没有使用 DATE 作为类型。你应该这样做。

# .htaccess - 使用 mod_rewrite 将动态 URL 转换为 SEO 友好的 URL ??

> ID：12733883
> 
> 赞同：0
> 
> 时间：2012-10-04T18:51:44.040
> 
> 标签：.htaccess, url, url-rewriting, seo

我不是 PHP 开发人员，我被要求执行一些 SEO。这是我的 .htaccess

```
 RewriteEngine On
    RewriteBase /
    RewriteRule [_\ ] space.cgi [L]
    ErrorDocument 404 /errors/404.php 
    ErrorDocument 400 /errors/badrequest.php
    ErrorDocument 401 /errors/authreqd.php
    ErrorDocument 403 /errors/forbid.php
    ErrorDocument 500 /errors/serverr.php 
    ErrorDocument 503 /errors/ServiceUnavailable.php 

    RewriteEngine On 
    RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot@yahoo.com [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Custo [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^DISCo [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^GrabNet [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Grafula [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^HMView [OR] 
    RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [OR] 
    RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR] 
    RewriteCond %{HTTP_USER_AGENT} ^InterGET [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^JetCar [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^larbin [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^WebStripper [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^WebZIP [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Wget [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Widow [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR] 
    RewriteCond %{HTTP_USER_AGENT} ^Zeus 
    RewriteRule ^.* - [F,L]
    RewriteRule rss.xml rss.php [QSA,L]

    RewriteEngine on
    RewriteRule ^index.htm$ index.php
    RewriteRule ^search.htm$ search.php
    RewriteRule ^about.htm$ about.php
    RewriteRule ^contacts.htm$ contacts.php
    RewriteRule ^gallery.htm$ gallery.php
    RewriteRule readmore.htm$ readmore.php

    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.php -f
    RewriteRule .* $0.php

    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.htm -f
    RewriteRule .* $0.htm 
```

我正在尝试重写我的 URL 以对 SEO 更友好，我正在使用以下代码在我的 .htaccess 文件中执行此操作：

```
RewriteEngine On      
RewriteRule blog/(.*)/$ readmore.php?&postid=$1 [NC]      
RewriteRule ^/*(.+/)?([^.]*[^/])$ http://%{HTTP_HOST}/$1$2/ [L,R=301] 
```

最后一个代码不适用于我的网站：我不知道！请帮助 [http://www.afrogfx.com/index](http://www.afrogfx.com/index)

要转换的网址

```
 http://www.afrogfx.com/readmore?postid=62&categories=6&catid=6#.UG3ZoK5adS8 
```

或者

[http://www.afrogfx.com/readmore?postid=62](http://www.afrogfx.com/readmore?postid=62)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:08:26.293

> 最后一个代码不适用于我的网站：S 我不知道

你不能匹配 a 中的查询字符串`RewriteRule`，你也不想盲目地重写 URI，因为规则就在它之前，你只会导致重定向循环。将您的第二条规则更改为：

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /readmore\.php\?
RewriteCond %{QUERY_STRING} postid=([^&]+)
RewriteRule ^ /blog/%1/ [L,R=301] 
```

# c++ - 关于 C++ 包含另一个类

> ID：12733888
> 
> 赞同：32
> 
> 时间：2012-10-04T18:52:03.313
> 
> 标签：c++

我有两个文件：

```
File1.cpp
File2.cpp 
```

File1 是我的主类，它具有主要方法，File2.cpp 有一个类调用 ClassTwo，我想在我的 File1.cpp 中创建 ClassTwo 的对象

我将它们编译在一起

```
g++ -o myfile File1.cpp File2.cpp 
```

但是当我尝试通过

//创建类二对象

```
ClassTwo ctwo; 
```

它不起作用。

错误是

ClassTwo 未在此范围内声明。

这是我的 main.cpp

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
//here compile error - undeclare ClassTwo in scope.
ClassTwo ctwo;

//some codes
} 
```

这是我的 File2.cpp

```
#include <iostream>
#include <string>

using namespace std;

class ClassTwo
{
private:
string myType;
public:
void setType(string);
string getType();
};

void ClassTwo::setType(string sType)
{
myType = sType;
}

void ClassTwo::getType(float fVal)
{
return myType;
} 
```

响应将我的 File2.cpp 拆分为另一个 .h 文件，但如果我声明一个类，我如何将其拆分为另一个 .h 文件，因为我需要维护变量（私有）和函数（公共) 以及如何在 main 方法中将 ClassTwo ctwo 添加到我的 File1.cpp

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-04T18:56:50.140

> **您的代码中的基本问题是什么？**

您的代码需要分成接口（.h）和实现（.cpp）。
当您编写类似的内容时，编译器需要查看类型的组成

```
ClassTwo obj; 
```

这是因为编译器需要为类型的对象保留足够的内存，`ClassTwo`所以它需要查看`ClassTwo`. 在 C++ 中执行此操作的最常见方法是将代码拆分为头文件和源文件。
类定义放在头文件中，而类的实现放在源文件中。这样，人们可以轻松地将头文件包含到其他需要查看他们创建的对象的类的定义的源文件中。

> **为什么我不能简单地将所有代码放在 cpp 文件中并将它们包含在其他文件中？**

您不能简单地将所有代码放在源文件中，然后将该源文件包含在其他文件中。C++ 标准要求您可以根据需要多次声明实体，但只能定义一次（**[一个定义规则（ODR）](http://en.wikipedia.org/wiki/One_Definition_Rule)**） . **[包含源文件会违反 ODR，因为在包含该文件的每个翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**中都会创建实体的副本。

> **如何解决这个特殊问题？**

您的代码应按如下方式组织：

//**文件1.h**

```
Define ClassOne 
```

//**文件2.h**

```
#include <iostream>
#include <string>

class ClassTwo
{
private:
   string myType;
public:
   void setType(string);
   std::string getType();
}; 
```

**//文件1.cpp**

```
#include"File1.h"

Implementation of ClassOne 
```

**//文件2.cpp**

```
#include"File2.h"

void ClassTwo::setType(std::string sType)
{
    myType = sType;
}

void ClassTwo::getType(float fVal)
{
    return myType;
} 
```

**//main.cpp**

```
#include <iostream>
#include <string>
#include "file1.h"
#include "file2.h"
using namespace std;

int main()
{

    ClassOne cone;
    ClassTwo ctwo;

    //some codes
} 
```

> **除了包含头文件之外，还有其他方法吗？**

如果您的代码只需要创建指针而不是实际对象，那么您不妨使用**[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)**，但请注意，使用前向声明会增加**[对该类型的使用方式的一些限制，](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)**因为编译器将该类型视为**不完整类型**。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-04T19:01:07.870

C++（和 C 就此而言）将类型、函数和类的“声明”和“实现”分开。您应该在头文件（.h 或 .hpp）中“声明”所需的类，并将相应的实现放在 .cpp 文件中。然后，当您希望在某处使用（访问）一个类时，您#include 相应的头文件。

例子

ClassOne.hpp：

```
class ClassOne
{
public:
  ClassOne(); // note, no function body        
  int method(); // no body here either
private:
  int member;
}; 
```

ClassOne.cpp：

```
#include "ClassOne.hpp"

// implementation of constructor
ClassOne::ClassOne()
 :member(0)
{}

// implementation of "method"
int ClassOne::method()
{
  return member++;
} 
```

主.cpp：

```
#include "ClassOne.hpp" // Bring the ClassOne declaration into "view" of the compiler

int main(int argc, char* argv[])
{
  ClassOne c1;
  c1.method();

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T19:01:40.103

如果您不想要标题，则需要转发声明类的名称：

```
class ClassTwo; 
```

**重要提示：**这仅在某些情况下有效，有关更多信息，请参阅 Als 的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T19:23:18.140

同时编译两个*.cpp*文件的事情，并不意味着他们“知道”彼此。您将必须创建一个文件，“告诉”您的*File1.cpp*，实际上有像*ClassTwo*这样的函数和类。该文件称为**头文件**，通常不包含任何**可执行**代码。（也有例外，例如内联函数，但一开始就忘记它们）它们服务于声明性需求，只是为了告诉哪些函数可用。

当您拥有您的`File2.cpp`并将其包含在您`File1.cpp`的.`File1.cpp``File2.cpp`

因此，您应该创建一个头文件，例如`File1.hpp`or `File1.h`（其他名称也可以，但这只是标准）。它的工作原理如下：

**//文件1.cpp**

```
void SomeFunc(char c) //Definition aka Implementation
{
//do some stuff
} 
```

**//文件1.hpp**

```
void SomeFunc(char c); //Declaration aka Prototype 
```

* * *

对于干净的代码，您可以在顶部添加以下内容`File1.cpp`：

```
#include "File1.hpp" 
```

以下是围绕`File1.hpp`的代码：

```
#ifndef FILE1.HPP_INCLUDED
#define FILE1.HPP_INCLUDED
//
//All your declarative code
//
#endif 
```

这使你的**头文件**更干净，关于重复的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T20:36:53.440

当您想将代码转换为结果（可执行文件、库或其他）时，有 2 个步骤：
1）编译
2）链接
在第一步中，编译器现在应该了解您使用的对象大小、函数原型以及可能遗产。另一方面，链接器希望在您的代码中找到函数和全局变量的实现。

现在，当您`ClassTwo`在`File1.cpp`编译器中使用时，您对此一无所知，也不知道应该为它分配多少内存，或者例如它具有的女巫成员，或者它是一个类和枚举，甚至是 int 的 typedef，所以编译将失败编译器。添加`File2.cpp`解决了寻找实现但编译器仍然不满意的链接器的问题，因为它对您的类型一无所知。

所以请记住，在编译阶段你总是只使用一个文件（当然还有那个文件包含的文件），而在链接阶段你需要多个包含实现的文件。并且由于 C/C++ 是静态类型的，并且它们允许它们的标识符用于多种用途（定义、typedef、枚举类、...），因此您应该始终向编译器标识您的标识符，然后使用它，并且作为规则编译器应该总是知道你的变量的大小！

# ios - 如何在不推入新 ViewController 的情况下 [UIWebView loadRequest:]

> ID：12733890
> 
> 赞同：0
> 
> 时间：2012-10-04T18:52:11.997
> 
> 标签：ios, uiviewcontroller, uiwebview

我想要的功能是这样的：

我有一组 URL，我想将它们加载到现有的 UIWebView 中，而无需推入新的 ViewController。我只希望 webView 在没有动画或滑动的情况下重新加载。

现在，这是我在 ViewController 中的实现：

```
@synthesize webView;

@synthesize requestObj;

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

    //I show a spinner while it is loading. This is done in webViewDidStartLoad:
    viewLoading = YES;

    //this is landing URL, so I draw some buttons in viewDidLoad
    home = YES;  

    //I load this request into my webView in viewDidLoad
    requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:myURL]];
    }
    return self;
} 
```

然后，在 ViewController 的某个地方，如果有人在我的滑动菜单中按下特定的 URL，我会调用：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:newUrl]];
[webView loadRequest:request]; 
```

如果没有将新版本的 ViewController 推入堆栈，我无法弄清楚如何将这个新 URL 加载到令人兴奋的 webView 中。每次它在 ViewController 中调用我的 initWithNibName: 方法时，我都想不出一个好的方法来阻止它把自己推到堆栈上，而只是更新 webView。

我可以使用 [self.navigationController setViewControllers:] 来制作一个新的 ViewController 并阻止控制器绘制 backButton，但它仍然在滑动。

必须有一种简单的方法来重新加载我只是没有得到的 webView。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:00:54.827

好的，我弄清楚了为什么会发生这种行为：

我正在从 webView 捕获一些 URL，并在方法中推送一个新的 ViewController：

```
BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType 
```

我没有正确检查我只想重新加载而不是推送的 URL。因此，每次调用上述方法时，它都会使用 URL 推送一个新的 ViewController。

我进去得到了一个我不想被推入另一个视图的 URL 的子字符串：

```
- (BOOL)homeURL:(NSString *)url
{
    BOOL match = NO;
    url = [self urlType:url];

    if ((url) && ((NSOrderedSame == [url compare:subtring])))
    {
        match = YES;
    }

    return match;
}

- (NSString *)urlType:(NSString *)url
{
    NSRange beginSubstring = [url rangeOfString:@"com/"];
    NSString *val = url;

    if (url)
    {
        val = [val substringWithRange:NSMakeRange((beginSubstring.location + 4), substring.length)];
    }

    return val;
} 
```

然后我修复了上面的方法来捕获子字符串：

```
//capture URL
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{

    if (!viewLoading)
    {
        if ([self homeURL:request.URL.absoluteString])
        {
            return YES;
        }
        else
        {
            ViewController *newPage = [[ViewController alloc] initWithNibName:@"ViewController" request:request home:NO bundle:nil];
            [self.navigationController pushViewController:newPage animated:YES];
            return NO;
        }
    }

    return YES;
} 
```

现在看来工作得很好！

# ios - 以下适用于 iOS 的委托函数

> ID：12733893
> 
> 赞同：0
> 
> 时间：2012-10-04T18:52:20.880
> 
> 标签：ios

在 base.h 中实现了一个委托函数

```
id<MADayViewDataSource> _dataSource;

@protocol MADayViewDataSource <NSObject>

- (NSArray *)dayView:(MADayView *)dayView eventsForDate:(NSDate *)date;
@end 
```

在 base.m

```
- (void)setDataSource:(id <MADayViewDataSource>)dataSource {
    _dataSource = dataSource;
    [self reloadData];
}

- (id <MADayViewDataSource>)dataSource {
    return _dataSource;
}

- (void)reloadData {
    NSArray *events = [self.dataSource dayView:self eventsForDate:self.day];
} 
```

在顶部 Viewcontroller.h 它实现了来自 base.h 的 MADayViewDatasource 委托

```
 :UIViewController<MADayViewDataSource> { } 
```

在 base.m 中，它实现了委托函数

```
- (NSArray *)dayView:(MADayView *)dayView eventsForDate:(NSDate *)startDate { 
```

所以，我对代码的理解是什么时候调用base.m里面的函数

```
[self.datasource dayView:self eventsForDate:self.day]; 
```

`self.datasource`无论如何都会调用返回_datasource `-(void)setDataSource <MADayViewDataSource>)dataSource {}`..等等，我迷路了..

***我的问题是调用的功能序列是什么？来自 base 的数据源与从顶层视图控制器的委托函数返回的数组有何关系？***

# vim - 如何重置 Vim 中的拆分？

> ID：12733896
> 
> 赞同：4
> 
> 时间：2012-10-04T18:52:27.697
> 
> 标签：vim, nerdtree, minibufexplorer

我正在使用[MiniBufExplorer](http://www.vim.org/scripts/script.php?script_id=159)和[NERD 树](http://www.vim.org/scripts/script.php?script_id=1658)在 Vim 中进行开发。我通常有以下屏幕：

```
MMMMMMMMMMMM
NNSSSSSSSSSS
NNSSSSSSSSSS
NNSSSSSSSSSS
NNSSSSSSSSSS
NNSSSSSSSSSS 
```

`N`NERD 树在哪里， `M`MiniBufExplorer 在哪里，是`S`我正在查看的文件。

我有时忘记使用`:sh`进入 shell，然后我点击`:q`了`S`拆分，这使得切换 NERD 树将进行全屏 NERD 树拆分或全屏源视图，但从来没有在 NERD 之前的位置树在左边（MiniBufExplorer 没有改变）。

之后如何“重置”拆分以恢复旧行为？我基本上一直在做`:qa`完全退出 Vim，但显然这会关闭一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:03:53.760

您可以尝试使用会话 - 使用

```
mksession 
```

并用

```
source Session.vim 
```

如果你的分裂搞砸了。

认为如果涉及 NERDTree，您将需要使用 session.vim 插件：请参阅[Vim, NERDtree not recovery in session restore](https://stackoverflow.com/questions/4226905/vim-nerdtree-not-recovered-in-session-restore)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:44:55.113

不是您问题的直接答案，但也许可以解决您的问题：

[https://github.com/jistr/vim-nerdtree-tabs](https://github.com/jistr/vim-nerdtree-tabs)

> “当您关闭文件时，选项卡也会随之关闭。没有 NERDTree 挂起。”

Nerdtree 是最糟糕的事情。那个插件换插件使它可以忍受。

# python - 布尔比较日期时非常奇怪的行为

> ID：12733897
> 
> 赞同：1
> 
> 时间：2012-10-04T18:52:39.880
> 
> 标签：python

尝试在 python 中比较日期时，我注意到一些非常奇怪的行为。我正在尝试使用日期来检查是否将项目添加到 MySQL 数据库（使用 mysqldb 库），并且在比较日期时，我得到了奇怪的行为：

代码是：

```
 latestDate = pullDateFromTable() #pull the latest item from the table
   for transaction in transactions:
        print "Transaction Time:",transaction.date
        print "Latest Entry:",latestDate
        if transaction.date > latestDate:
            print "Transaction is new, added product"
            #insert item to MySQL database
        else:
            print "Old transaction, did not add product" 
```

输出是：

```
Transaction Time: Thu Oct  4 11:42:25 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Old transaction, did not add product

Transaction Time: Wed Oct  3 22:11:48 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 19:32:56 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 17:46:35 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 17:46:35 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 17:46:35 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 16:25:06 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 14:00:48 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 11:46:20 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 11:46:20 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 11:22:37 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 09:05:13 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 09:05:13 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Wed Oct  3 09:05:13 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Tue Oct  2 07:38:25 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Transaction is new, added product

Transaction Time: Mon Oct  1 17:39:52 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Old transaction, did not add product

Transaction Time: Mon Oct  1 15:05:29 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Old transaction, did not add product

Transaction Time: Sun Sep 30 20:56:38 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Old transaction, did not add product

Transaction Time: Sun Sep 30 09:52:09 2012
Latest Entry: Thu Oct  4 11:42:25 2012
Old transaction, did not add product 
```

您会注意到星期二或星期三（10 月 2 日和 3 日）的日期大于最新日期（10 月 4 日），但 9 月或 10 月 1 日的日期小于。

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T18:56:24.857

您的日期似乎是字符串，并且它们按字母顺序进行比较。`W`紧随其后`T`。

# javascript - 替换选择框中的值而无需删除和重新填充

> ID：12733898
> 
> 赞同：3
> 
> 时间：2012-10-04T18:52:41.283
> 
> 标签：javascript, html, dom

我想知道是否可以使用 javascript 来替换选择框中的行或值。请注意：选择框已经用 javascript 动态填充以开始

IE。

```
[SELECT BOX]
Apples
Oranges
Pears
Strawberries
Kiwi 
```

将 (Oranges) 替换为 Mangos，因此新列表显示为：

```
[SELECT BOX]
Apples
Mangos
Pears
Strawberries
Kiwi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:04:07.883

使用 jQuery。筛选。[jsfiddle](http://jsfiddle.net/PHRVD/)

```
 $("select option").filter(function(){
   return $.trim(this.innerHTML) == "Oranges"; 
}).html("Mangos");​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:02:15.120

可能有更好的方法来做到这一点，特别是如果您愿意使用 jQuery - 但 OP 并不清楚，所以这里有一个纯 JavaScript 解决方案。

**HTML**

```
<select id="fruit">
    <option value="Apples">Apples</option>
    <option value="Oranges">Oranges</option>
    <option value="Pears">Pears</option>
    <option value="Strawberries">Strawberries</option>
    <option value="Kiwi">Kiwi</option>
</select>​​​​​​​​​​​​​​ 
```

**JAVASCRIPT**

```
​var el = document.getElementById("fruit");

for(var i=0; i < el.options.length; i++){
    if(el.options[i].value == "Oranges"){
        el.options[i].value = "Mangos";
        el.options[i].innerText = "Mangos";        
    } 
} 
```

**[例子](http://jsfiddle.net/wwWkA/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:59:04.260

```
 jQuery(function () { // fire when DOM ready
        jQuery("select:eq(0)").find("option").each(function () { // for loop
            if (jQuery(this).text().indexOf("Oranges") > -1) { // check text with current option
                jQuery(this).text("Mangos"); // set net text
                jQuery(this).val("mangos"); // set new value
            }
        });
    }); 
```

* * *

原生 JavaScript：

```
var elem = document.getElementsByTagName("select")[0].getElementsByTagName("option");
    for (var i = 0; i < elem.length; i++) {
        if (elem[i].innerHTML.indexOf("Oranges") > -1) {
            elem[i].innerHTML = "Mangos";
            elem[i].value = "mangos";
    }
} 
```

# coldfusion - 如何使用单独的提交按钮访问冷融合中的动态查询

> ID：12733900
> 
> 赞同：0
> 
> 时间：2012-10-04T18:52:52.557
> 
> 标签：coldfusion

我正在尝试使用网页中动态搜索的查询结果，方法是使用另一个按钮访问它，该按钮会将结果导出到逗号分隔的文件中。但是，导出按钮由于某种原因无法识别查询存在。我不断收到一条错误消息：变量 QUERY 未定义。

我想要做的是这样当用户点击导出按钮时，它将搜索保存在逗号分隔的文件中。现在我正在使用一个函数，它将搜索保存在一个名为 strOutput 的变量中，以逗号分隔的形式。然后我打算把它写到一个文件中。

由于它无法识别查询，我尝试在搜索函数中设置变量并在页面顶部使用 cfparam 标记，以便我可以在导出函数中访问它。这也不起作用。也许有更好的方法来做到这一点？

代码如下所示：

这是我的搜索功能的开始：

```
<cfif structKeyExists(Form, "submit")>

<cfquery datasource="#Session.HousingDataSource#" name="query">
        SELECT * 
```

此代码位于上述运行查询并显示结果的代码之后。

```
<cfif structKeyExists(Form,"export")>
     <cfset strOutput = QueryToCSV(
          query,"studentFirst,studentLast,studentNumber,Detail1,itemDate") />

<!---cffile
  action="WRITE"
  file="#filename#"
  output="#strOutput#"
/--->

</cfif> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:10:48.973

在这两种情况下都需要存在查询，因为不会从一个请求到另一个请求记住查询...在以下示例中，在发出第二个请求时可能尚未创建查询。

```
<cfif StructKeyExists(form, "submit")>
    <!--- This only gets run on the first request --->
    <cfquery datasource="#session.HousingDataSource#" name="query">
        ...
    </cfquery>
</cfif>

<cfif StructKeyExists(form, "export")>
    <!--- This only gets run on the second request --->
    <cfset output = QueryToCSV(query, "studentFirst,studentLast,studentNumber,Detail1,itemDate")/>
    <cffile action="write" file="#filename#" output="#output#"/>
</cfif> 
```

如果您按如下方式更新代码，那么在导出时它将再次运行查询以将其导出...

```
<cfif StructKeyExists(form, "submit") || StructKeyExists(form, "export")>
    <!--- This gets run both times --->
    <cfquery datasource="#session.HousingDataSource#" name="query">
        ...
    </cfquery>
</cfif>

<cfif StructKeyExists(form, "export")>
    <cfset output = QueryToCSV(query, "studentFirst,studentLast,studentNumber,Detail1,itemDate")/>
    <cffile action="write" file="#filename#" output="#output#"/>
</cfif> 
```

或者您可以将其保存在会话中...

```
<cfif StructKeyExists(form, "submit")>
    <cfquery datasource="#session.HousingDataSource#" name="query">
        ...
    </cfquery>
    <cfset session.query = query/>
</cfif>

<cfif StructKeyExists(form, "export") && StructKeyExists(session, "query")>
    <cfset output = QueryToCSV(session.query, "studentFirst,studentLast,studentNumber,Detail1,itemDate")/>
    <cffile action="write" file="#filename#" output="#output#"/>
</cfif> 
```

或者应用范围。

# javascript - 用外行术语解释 .call()。帮助理解它

> ID：12733902
> 
> 赞同：0
> 
> 时间：2012-10-04T18:52:58.110
> 
> 标签：javascript, jquery

我在 Mozilla 文档中看到了这个例子。有以下解释：

“在这个纯粹构造的例子中，我们创建了匿名函数并使用 call 在数组中的每个对象上调用它。这里匿名函数的主要目的是为每个对象添加一个打印函数，它能够打印正确的索引数组中的对象。将对象作为这个值传递并不是绝对必要的，而是出于解释的目的。

```
var animals = [
  {species: 'Lion', name: 'King'},
  {species: 'Whale', name: 'Fail'}
];

for (var i = 0; i < animals.length; i++) {
  (function (i) {
    this.print = function () {
      console.log('#' + i  + ' ' + this.species + ': ' + this.name);
    }
  }).call(animals[i], i);
} 
```

我不明白的是在这里做的事情。如果我们没有它，我们不是还在循环通过匿名函数并安慰价值吗？这对关闭有什么作用吗？我只是想了解这里如何使用 .call() 以及为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:55:00.350

`call`在特定上下文中调用函数。在这种情况下，它设置`this`为`animals[0]`和`animals[1]`。没有它，`this`就不会在函数的上下文中设置（或者更确切地说，它会设置为`window`）。

# case-sensitive - LogParser 区分大小写的搜索

> ID：12733904
> 
> 赞同：1
> 
> 时间：2012-10-04T18:53:02.500
> 
> 标签：case-sensitive, logparser

我正在尝试使用 LogParser 匹配 IIS 日志中的特定 URI。有多个请求进入相同的地址，但情况略有不同。如何按大小写提取单个 URI？

例如：“myPath\ThIsPaGe.aspx”与“mypath\thispage.aspx”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T18:04:22.810

使用`LIKE`代替`=`

```
select *
from 'logfilename'
where cs-uri-stem LIKE 'myPath\ThIsPaGe.aspx' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:22:40.943

Use ToLower or ToUpper case on your paths. This is from String object.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T16:30:43.363

一种方法是使用`To_Lowercase`如下：

```
SELECT To_Lowercase(cs-uri-stem) as Res, cs-method, cs-status
WHERE Res = 'mypath\thispage.aspx'
... 
```

这样做的好处是可以通过报告来简化分组。

# vim - 在 Vim 中轻松将函数参数重新格式化为多行

> ID：12733909
> 
> 赞同：15
> 
> 时间：2012-10-04T18:53:11.393
> 
> 标签：vim, formatting, arguments

特别是在编辑遗留 C++ 代码时，我经常发现自己手动重新格式化如下内容：

```
SomeObject doSomething(firstType argumentOne, secondType argumentTwo, thirdType argumentThree); 
```

像这样：

```
SomeObject doSomething(firstType argumentOne,
                       secondType argumentTwo,
                       thirdType argumentThree); 
```

是否有内置命令可以执行此操作？如果没有，有人可以建议一个插件或提供一些 VimScript 代码吗？（`J`或者`gq`可以很容易地逆转这个过程，所以它不需要双向。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-16T04:38:36.233

您可以使用[splitjoin](https://github.com/AndrewRadev/splitjoin.vim)。

```
SomeObject doSomething(firstType argumentOne, secondType argumentTwo, thirdType argumentThree); 
```

在括号内或括号上，键入`gS`以拆分。你得到：

```
SomeObject doSomething(firstType argumentOne,
    secondType argumentTwo,
    thirdType argumentThree); 
```

你也可以使用[vim-argwrap](https://github.com/FooSoft/vim-argwrap/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T21:01:08.917

这是我在我的`.vimrc`. 它比@rbernabe 的回答更灵活；它根据`cinoptions`全局设置进行格式化，并简单地以逗号分隔（因此，如果需要，可以用于多个函数）。

```
function FoldArgumentsOntoMultipleLines()
    substitute@,\s*@,\r@ge
    normal v``="
endfunction

nnoremap <F2> :call FoldArgumentsOntoMultipleLines()<CR>
inoremap <F2> <Esc>:call FoldArgumentsOntoMultipleLines()<CR>a 
```

这在正常和插入模式下映射`F2`到在当前行上进行搜索和替换，将所有逗号（每个逗号后面有 0 个或多个空格）转换为逗号，每个逗号后面都有一个回车符，然后选择整个组并使用 Vim 缩进内置`=`。

该解决方案的一个已知缺点是包含多个模板参数的行（它也以逗号分隔，而不仅仅是普通参数的逗号）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T19:21:47.687

我会将寄存器设置为预设宏。经过一些测试，我得到以下结果：

```
let @x="/\\w\\+ \\w\\+(\nf(_:s­\\(\\w\\+\\)\\@<=,/,\\r            /g\n" 
```

使用 vimrc 中的这一行，您可以通过执行宏 x:`@x`将光标置于要格式化的行上方来格式化方法。它为缩进添加了 12 个空格，因此给出：

```
|
SomeObject doSomething(firstType argumentOne, secondType argumentTwo, thirdType argumentThree); 
```

执行宏后：`@x`你得到

```
SomeObject doSomething(firstType argumentOne,
             secondType argumentTwo,
             thirdType argumentThree); 
```

如果您在函数定义行中，则可以进行替换：

```
:s\(\w\+\)\@,<=,/,\r            /g 
```

这很容易把它放在映射中：

```
nmap <F4> :s/\(\w\+\)\@<=,/,\r            /g<CR> 
```

# c# - 在不使用接口的情况下删除多余的 C# 代码

> ID：12733910
> 
> 赞同：4
> 
> 时间：2012-10-04T18:53:28.600
> 
> 标签：c#, wcf

请考虑两个限制 -

1.  无法将 MyProperty 移动到接口或抽象类。
2.  FooEventHandler 是一个 dotnet 框架方法，因此不能更改参数类型。

我在几个类中定义了 MyProperty。

```
class A
    {
        public string MyProperty { get; set; }
    }
    class B
    {
        public string MyProperty { get; set; }
    }
    class C
    {
        public string MyProperty { get; set; }
    } 
```

FooEventHandler 方法为它接收到的所有参数更新此属性。

```
public object FooEventHandler(object obj)
    {
        object toReturn = null;
        if (obj.GetType() == typeof(A))
        {
            (obj as A).MyProperty = "updated";
            toReturn = obj;
        }
        else if (obj.GetType() == typeof(B))
        {
            (obj as B).MyProperty = "updated";
            toReturn = obj;
        }
        else if (obj.GetType() == typeof(C))
        {
            (obj as C).MyProperty = "updated";
            toReturn = obj;
        }
        return toReturn;
    } 
```

并且 FooEventHandler 像这样反复调用 -

```
static void Main(string[] args)
    {
        Program program = new Program();
        A objA = new A();
        program.FooEventHandler(objA);
        B objB = new B();
        program.FooEventHandler(objB);
        C objC = new C();
        program.FooEventHandler(objC);
    } 
```

请提出一种删除 Foo 中冗余代码的方法，考虑到上述两个限制。

更准确地说，我在 WCF 中使用 ParameterInspector 时遇到了这个问题。我正在尝试修改此处截获的所有请求的属性，并且必须根据 operationName 编写 Switch Case。

**如上所述的A、B、C、D**类是代理。所以不想一开始就修改它们。由于更新服务参考将覆盖我的 iterface 更改。

```
public object BeforeCall(string operationName, object[] inputs){
    // update inputs[0] properties
    } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T19:06:36.853

您实际上可以让您的类实现一个接口，以使其更易于使用。关键是生成的服务引用类是`partial`，这意味着您可以在单独的文件中执行此操作，重新生成代码时不会被覆盖：

```
namespace ServiceReferenceNamespace {
 public partial class A : IMyProperty { }
 public partial class B : IMyProperty { }
 public partial class C : IMyProperty { }
} 
```

在哪里`IMyProperty`：

```
public interface IMyProperty { string MyProperty { get; set; } } 
```

然后你可以改变你的`FooEventHandler`方法采取一个`IMyProperty`，或采取一个`object`和检查`obj is IMyProperty`（或使用`as`，所以检查只做一次）。这使您可以简单地使用该属性，而没有任何反射或动态复杂性以及这些方法对运行时性能的影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T19:00:12.533

假设`dynamic`您可以使用：

```
dynamic toReturn = obj;
toReturn.MyProperty = "updated";
return toReturn; 
```

`MyProperty`如果在 上不存在，这将抛出`obj`。

测试：

```
[Test]
public void X()
{
    A objA = new A();
    var x = FooEventHandler(objA);
    Assert.IsInstanceOf<A>(x);
    Assert.AreEqual("updated", (x as A).MyProperty);

    B objB = new B();
    var y = FooEventHandler(objB);
    Assert.IsInstanceOf<B>(y);
    Assert.AreEqual("updated", (y as B).MyProperty);

    C objC = new C();
    var z = FooEventHandler(objC);
    Assert.IsInstanceOf<C>(z);
    Assert.AreEqual("updated", (z as C).MyProperty);

    D objD = new D();
    Assert.Throws<RuntimeBinderException>(() => FooEventHandler(objD));
}

class D {} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T19:03:08.140

我的第一个想法是在您的事件处理程序中使用反射：

```
public object FooEventHandler(object obj)
{
    obj.GetType().GetProperty("MyProperty").SetValue(obj, "updated", null);
    return obj;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T19:05:00.503

使用反射，您可以检查这些条件，然后设置值：

1.  具有预期的属性`MyProperty`
2.  `MyProperty`是类型`string`
3.  `MyProperty`有一个二传手

.

```
public object FooEventHandler(object obj)
{
  if (obj == null)
    return null;

  var property = obj.GetType().GetProperty("MyProperty");
  if (property != null && property.PropertyType == typeof(string) && property.GetSetMethod(true) != null)
  {
    property.SetValue(obj, "updated", new object[]{ });
    return obj;
  }

  return null;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T19:11:27.007

**编辑**
Tim S 的答案可能是最简单和最安全的。但是，部分类必须都在同一个程序集中。如果由于某种原因您无法编辑包含代理类的程序集，您仍然可以这样做。

**原始答案**

这可能有点过分了。

制作一个新界面

```
public interface IProxyWrapper
{
    string MyProperty { get; set; }
} 
```

实施`AWrapper`/`BWrapper`和`CWrapper`. 有两种不同的方法可以做到这一点。我只会展示`A`，因为从那里开始其余的应该很容易。

```
public class AWrapper : IProxyWrapper
{
    public string MyProperty { get; set; }
} 
```

或者

```
public class AWrapper : A, IProxyWrapper
{
    string IProxyWrapper.MyProperty 
    { 
        get { return base.MyProperty; }
        set { base.MyProperty = value; }
    }
} 
```

第二个的好处是您可以在`AWrapper`任何可以使用`A`.

无论哪种方式，您都需要找到一种将值从包装器获取到代理类的方法。您可以使用 AutoMapper 之类的东西来设置属性，或者将其作为构造函数参数传入，将其存储在字段中，然后实现`IProxyWrapper.MyProperty`wrap `A.MyProperty`。

至于将值返回给代理，还有 AutoMapper，或者您可以以某种方式公开该字段。

您现在可以为您的应用程序进一步自定义这些包装类，而不必担心在重新生成代理时丢失它。

# opencv - 如何正确使用单应矩阵？

> ID：12733912
> 
> 赞同：3
> 
> 时间：2012-10-04T18:53:31.423
> 
> 标签：opencv, mapping, pixel, panoramas, homography

所以我有一个图像和一个全景图像。使用 Homography 矩阵将来自`image1`的像素映射到全景图（对吗？）。我有单应矩阵`H`。

那么，对于全景图中的每个像素，我怎么知道像素在`image1`哪里？

我有全景图中像素的 (u,v) 坐标，这是一个`H`将 image1 映射到全景图的 Homography。

公式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:25:34.187

*反向*公式为：p'=[wx,wy,w] = [u,v,1]*H^-1 ;
其中 H^-1 是 H 的倒数；（根据定义存在）
除以齐次坐标 w：
p = p'/w = [x,y,1]，其中坐标 [x,y] 映射到全景图中的 [u,v]。

中间结果 p' 是一个 3 维向量，其中两个第一个元素必须除以最后一个元素。这适用于正向和反向操作。

[http://en.wikipedia.org/wiki/Homography](http://en.wikipedia.org/wiki/Homography)

# python - 如何使用 python/matplotlib 绘制中间有空行的数据

> ID：12733920
> 
> 赞同：2
> 
> 时间：2012-10-04T18:54:00.893
> 
> 标签：python, matplotlib, gnuplot

我有一个看起来像这样的数据文件

```
#X    Y 
1     23.2 
2     24.01
3     67.34
4     68.90
# 

1    7.87 
2    6.90  
3    5.78   
4    7.89 
```

注意线条之间的间隙。在我的情节中，我应该有两条单独的线，就像 gnuplot 会绘制它一样。如何使用 python/matplotlib 做到这一点。我目前正在收到一条加入回来的线路。

这是我目前的绘图方式：

```
F=loadtxt('fort.30',comments='#',dtype='float64' )
t=F[:,0]
E=F[:,1]  
plt.plot(t,E) 
```

感谢您的评论和回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:59:43.487

在数据集的各个部分之间添加 None 或 nan：

```
plt.plot([1,2,None,3,4],[1,0,None,2,1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:43:32.593

`F`只要第一列中的值小于之前行中的值，您就可以将数组拆分为多个子图。

```
breaks = [i for i in range(len(F)) if i > 0 and F[i, 0] < F[i-1, 0]]
borders = [0] + breaks + [len(F)]
subplots = [F[borders[i]:borders[i+1]] for i in range(len(borders)-1)] 
```

现在，您可以绘制各个子图。

```
for f in subplots:
    t, E = f[:, 0], f[:, 1]
    plt.plot(t, E)
plt.show() 
```

当然，只有当新子图的第一个值总是低于前一个子图的最后一个值时。如果您必须依靠`#`来细分绘图，您可能必须自己解析文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:04:18.843

到目前为止，您还没有显示任何代码。您当前的代码可能会有所帮助，基于此人们可能会为您提出一个可行的解决方案。

基本上，您必须自己在 Python 中进行文件处理。如果`#`是数据集之间的分隔符，那么用 Python 编写一个函数来读取文件，逐行解释。如果一行包含由空格分隔的 2 个数字，则将该行的数据添加到当前数据集中。如果一行只包含一个`#`（数字符号），则开始一个新的数据集。

这样做之后，您可以清楚地表示数据集（在 Python 列表或 numpy 数组中），并且可以担心绘制这些数据集。

# android - 使用自定义电话号码标签添加联系人

> ID：12733925
> 
> 赞同：0
> 
> 时间：2012-10-04T18:54:30.363
> 
> 标签：android

我希望能够使用联系人姓名（很简单）、电话号码以及 ICS 支持的该电话号码的自定义标签将联系人添加到用户的联系人中。例如，我可能想将电话号码“xxx-xxx-xxxx”的“John Doe”添加为自定义类型“Blackberry”。这种粒度可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:23:01.737

这可以通过如下所示的 Intent 来完成。（奖励：您不必请求读/写联系人权限！）您感兴趣的特定字段是 ContactsContract.Intents.Insert.PHONE_TYPE 和 ContactsContract.Intents.Insert.SECONDARY_PHONE_TYPE

```
private void addContact(Activity activity)
{
    Intent intent = new Intent(ContactsContract.Intents.Insert.ACTION);
    intent.setType(ContactsContract.RawContacts.CONTENT_TYPE);
    intent.putExtra(ContactsContract.Intents.Insert.NAME, "John Smith");
    intent.putExtra(ContactsContract.Intents.Insert.EMAIL, "john@example.com");
    intent.putExtra(ContactsContract.Intents.Insert.PHONE, "555-555-5555");
    intent.putExtra(ContactsContract.Intents.Insert.PHONE_TYPE, "Blackberry");
    intent.putExtra(ContactsContract.Intents.Insert.SECONDARY_PHONE, 555-444-3333);
    intent.putExtra(ContactsContract.Intents.Insert.SECONDARY_PHONE_TYPE, "School Phone");
    activity.startActivity(Intent.createChooser(intent, ""));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T12:14:32.427

试试这个代码。它是自定义在一个联系人中添加多条记录。
**将联系人详细信息应用程序保存到默认电话通讯录非常容易。**

```
ArrayList<ContentValues> data = new ArrayList<ContentValues>();

        ContentValues row2 = new ContentValues();
        row2.put(ContactsContract.Contacts.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);
        row2.put(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_CUSTOM);
        row2.put(ContactsContract.CommonDataKinds.Email.LABEL, "Green Bot");
        row2.put(ContactsContract.CommonDataKinds.Email.ADDRESS, "android@android.com");
        data.add(row2);

        ContentValues row3 = new ContentValues();
        row3.put(ContactsContract.Contacts.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
        row3.put(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_CUSTOM);
        row3.put(ContactsContract.CommonDataKinds.Phone.LABEL, "Arpit");
        row3.put(ContactsContract.CommonDataKinds.Phone.NUMBER, "Aaa@android.com");
        data.add(row3);

        Intent intent = new Intent(Intent.ACTION_INSERT, ContactsContract.Contacts.CONTENT_URI);
        intent.putExtra(ContactsContract.Intents.Insert.NAME, "Jiks");
        intent.putExtra(ContactsContract.Intents.Insert.EMAIL, "john@example.com");
        intent.putExtra(ContactsContract.Intents.Insert.PHONE, "555-555-5555");
        intent.putParcelableArrayListExtra(ContactsContract.Intents.Insert.DATA, data);
        startActivity(intent); 
```

# python - python glob.glob - 如何在不知道子目录中的深度的情况下找到特定文件（或文件列表）？

> ID：12733926
> 
> 赞同：3
> 
> 时间：2012-10-04T18:54:30.877
> 
> 标签：python, linux, networking, glob

现在，我使用 subprocess 来调用`find`哪个可以很好地完成工作，但是我追求的是一种 Pythonic 的做事方式。

这是当前代码：

```
cmd = "find /sys/devices/pci* | grep '/net/' |grep address"
p = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=True) 
```

在输出中，我收到以下列表：

```
[root@host1 ~]# find /sys/devices/pci* |grep '/net/'|grep 'address'
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:00.0/0000:08:00.0/net/eth0/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:01.0/0000:09:00.0/net/eth1/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:02.0/0000:0a:00.0/net/rename4/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:03.0/0000:0b:00.0/net/eth3/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:04.0/0000:0c:00.0/net/eth4/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:05.0/0000:0d:00.0/net/eth5/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:06.0/0000:0e:00.0/net/eth6/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:07.0/0000:0f:00.0/net/eth7/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:08.0/0000:10:00.0/net/eth8/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:09.0/0000:11:00.0/net/eth9/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:0a.0/0000:12:00.0/net/eth10/address
/sys/devices/pci0000:00/0000:00:07.0/0000:04:00.0/0000:05:00.0/0000:06:00.0/0000:07:0b.0/0000:13:00.0/net/eth11/address 
```

现在，如果我这样做了，`glob.glob('/sys/devices/pci*/*/*/*/*/*/*/net/')`我确实会得到一个目录列表，我什至可以查找文件，但它肯定似乎需要更长的时间`find`，即使通过子进程也是如此。而且结果集很大，我无法提前知道具体主机的架构是否会有相同的目录结构，所以不知道要输入多少个星号`glob.glob()`。

我的问题是，我如何重复简单`find | grep`命令实现的行为，或者，如果有更好的方法来查找主机拥有的所有 NIC 的所有 MAC，无论是否处于活动状态（我正在寻找特定的 MAC模式在这里）

编辑：不应该使用 glob，os.walk 似乎正在做这项工作：

```
>>> for root, dirs, names in os.walk('/sys/devices/'):
...     if 'address' in names and 'pci' in root:
...         f = open(str(root + '/address'), 'r')
...         mac = f.readlines()[0].strip()
...         f.close()
...         print mac
...         eth = root.split('/')[-1]
...         print eth 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T19:02:42.577

你检查过 os.walk() 吗？

```
import os
for root, dirs, names in os.walk(path):
    ... 
```

[http://docs.python.org/library/os.html#os.walk](http://docs.python.org/library/os.html#os.walk)

从上面的链接中，这是一种跳过某些目录的方法：

```
import os
from os.path import join, getsize
for root, dirs, files in os.walk('python/Lib/email'):
    print root, "consumes",
    print sum(getsize(join(root, name)) for name in files),
    print "bytes in", len(files), "non-directory files"
    if 'CVS' in dirs:
        dirs.remove('CVS')  # don't visit CVS directories 
```

# orchardcms - Orchard CMS 中包含用户和项目的内容项目

> ID：12733928
> 
> 赞同：0
> 
> 时间：2012-10-04T18:54:38.193
> 
> 标签：orchardcms

我正在考虑使用 Orchard CMS (1.5) 作为我下一个应用程序的主干。我将尝试实现的是创建一个名为“帐户”的内容项，它将代表一个企业帐户。

挑战在于每个帐户 - 内容项都需要：

1.  管理自己的用户
2.  用户可以有父母 - 经理
3.  具有只能由与该帐户关联的用户访问的内容项

我找不到任何可以实现这种结构的项目，所以我想知道这里是否有人知道类似的事情，或者可能有文章可以帮助我入门。我了解 1.5 中的内容项权限可用，但我不知道如何从第 (1) 和 (2) 点开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:36:11.207

如果您正在构建具有这种复杂程度的应用程序，那么您绝对应该看看 skywalker 的网上商店系列。它目前有 11 个部分，从[这里](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-1)开始。

我认为对您来说最有趣的部分是第 8 部分（[向网站注册新客户](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-8)）、第 9 部分（[创建订单并与 PSP 通信](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-9)）和第 10 部分（[从后端管理客户和订单](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-10)），其中有很多例子针对您自己的 Orchard 架构，创建复杂的父子关系（例如，一个客户可以有多个订单，而每个订单可以有多个订单项目，每个订单项目由一个产品或产品包组成）并通过管理来处理它们通过构建您自己的具有多个选项卡的管理菜单。

这个系列在我构建自己的复杂应用程序时帮助了我很多，我相信如果您仍在考虑使用 Orchard 进行应用程序开发，它也会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:46:53.043

我认为帐户不适合内容项的概念。我的建议是开发自己的模块。也许你可以看看[http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.Profile](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.Profile)。这个模块是在 Orchard 附带的 Orchard.Users 模块之上开发的。您可以看到它如何利用 Orchard.Users 来提供更多功能。:)

# cocos2d-iphone - Cocos2d：在CCActionEase中获取场景的当前位置

> ID：12733930
> 
> 赞同：1
> 
> 时间：2012-10-04T18:54:39.513
> 
> 标签：cocos2d-iphone, uikit, position, layer, scene

我需要将 UIKit 层的位置与 Cocos2D 场景层同步，发生的过渡将当前场景从屏幕上移出新场景。我已经编辑了 CCActionEase 来制作我自己的更新方法，它可能会在我的委托中调用一个方法来发送我的 Cocos2D 场景层的当前位置。我所需要的只是一种在 CCActionEase 中以某种方式获取场景当前位置的方法。它需要在这里，因为 CCActionEase 一遍又一遍地调用更新，而当它存在时，场景的位置正在改变。

这是我的代码的运行顺序，以便调用。

在我的场景当前层中，我的转换方法被称为：

`[[CCDirector sharedDirector] replaceScene: [ExitUTransition transitionWithDuration:5.4 scene: [JoinedMapsScene scene]]];`

在那个类中，我的自定义 CCEaseInWithPercentMult 的 actionWithAction 被称为：

```
@implementation ExitUTransition

- (CCActionInterval*)easeActionWithAction:(CCActionInterval*)action {

    return [CCEaseInWithPercentMult actionWithAction:action rate:1.0f];

}

@end 
```

在 CCActionEase 中，调用 update 方法：

```
@implementation CCEaseInWithPercentMult
-(void) update: (ccTime) t
{

    [other update: powf(t,rate)];

    //here I could pass the scene layer position

    [(cocosTestsAppDelegate *)[[UIApplication sharedApplication] delegate] adjustBGViewPosWithXOffset:scenePosX withYOffset:scenePosY];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:35:32.107

为什么不覆盖您正在移动的图层的 setPosition？我在我的应用程序中使用这种技术来移动带有图层的 UITextField 并且它工作正常。

```
-(void)setPosition:(CCPoint)p
{
      [super setPosition:p];
      CGPoint uiKitPoint = [[CCDirector sharedDirector] convertToUI:p];

      //Move the UIKit object wherever
} 
```

# ruby-on-rails - 如何让 jstree 中的节点显示比标题更多的内容（我想在标题旁边添加一个可点击的链接）？

> ID：12733933
> 
> 赞同：1
> 
> 时间：2012-10-04T18:54:54.887
> 
> 标签：ruby-on-rails, ruby, json, jstree

我正在尝试创建一个在节点中包含多个文本块的树（例如，标题，然后是用户可以单击以在树中创建该节点的新子节点的链接）。目前 jstree 似乎不支持这种事情，但我正在寻找任何好的解决方法（不希望将链接放在上下文菜单中）。

我以这种方式创建了 json 哈希：

```
 def item_to_json_hash(item)

    data = {:item_id => item.id, :data => html_for_item_data(item)}

    children = []

    if (item.has_children?)
        children_collection = item.children
        children_collection.each do |child|
            children << item_to_json_hash(child)
        end

        data[:children] = children
    end 

    return data
end

def html_for_item_data(item)
    return %Q|<table style='display: inline-block'><tr><td>#{item.data}</td><td><a href="/items/new?id=#{item.id}">New Child of Item</a></td></tr></table>|
end 
```

我认为将两个文本块放入带有 html 标记的长字符串中会有所帮助，但是 jstree 期望节点作为一个整体被选中的事实干扰了节点内部的链接。

这是我的索引，它显示了构建树的 javascript：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#collisterator_tree").jstree({
            core : { "html_titles" : true},
            themes : { "theme" : "classic" },
            "json_data" : {
                "ajax" : { 
                    "url" : "/items.json",
                    "data" : function(m) {
                            var html_data = m.attr                              
                            return { id : html_data ? m.attr("id") : 0 };
                        }
                }
            },
            plugins : ["themes", "json_data", "ui" ]
})
}); 
```

**编辑** 自己找到了我的答案。在这里张贴以防有人感兴趣。[一年前的堆栈溢出问题](https://stackoverflow.com/questions/4880364/jstree-nodes-dont-work-when-ui-plugin-is-used "一年前的 Stackoverflow 问题")给了我需要的提示：从插件中删除“ui”使我自己的节点内的链接可点击。

# php - PHP odbc_prepare WHERE field IN ($LIST) - (Progress OpenEdge 10.2A)

> ID：12733936
> 
> 赞同：0
> 
> 时间：2012-10-04T18:54:58.383
> 
> 标签：php, sql, odbc, openedge

我正在尝试使用 odbc_prepare 和 odbc_execute 语句编写查询，如下所示：

```
$query = 'SELECT * FROM TABLE WHERE names IN (?) AND age < ?';
$names = "Joe, John, Billy";
$age = 21;
$result = odbc_prepare($this->connection, $query);
odbc_execute($query, array($names, $age)); 
```

当然，由于某种原因，这不起作用，我已经尝试了我的 $names 变量格式的几种变体。任何帮助将不胜感激，因为我无法找到任何使用 odbc_prepare 和 WHERE IN 子句的查询示例。

我正在使用 OpenEdge 10.2A odbc 驱动程序连接到 Progress 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T21:42:47.970

只是为了让以后的每个人都知道我为这个特定问题想出了什么：

```
$names = array("Joe","John","Billy");

$queryVars = array();
foreach($names AS $name){
    $queryVars[] = $name;
}

$paramBind = implode(',', array_fill(0, count($names), '?'));
$query = 'SELECT * FROM TABLE WHERE names IN ('.$paramBind.')';

odbc_execute($query, $queryVars); 
```

希望其他人觉得这很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:11:15.173

从手册中阅读，我认为它应该如下所示：

```
$query = 'SELECT * FROM TABLE WHERE names IN (?)'
$names = array("Joe", "John", "Billy");
$result = odbc_prepare($this->connection, $query);
odbc_execute($query, array(implode(',', $names)); 
```

这给出了一个包含 1 个元素的数组，因为请求了 1 个参数。该元素包含一个字符串`'Joe, John, Billy'`，这是该`IN` 子句的正确值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:02:47.827

看起来你正试图以一种奇怪的方式使用[array()](http://php.net/manual/en/language.types.array.php)。

尝试做类似的事情：

```
$names = array("Joe", "John", "Billy");
foreach($names as $name)
{   
    $query = 'SELECT * FROM TABLE WHERE names IN (?)'
    $result = odbc_prepare($this->connection, $name);
    odbc_execute($query, $name);
} 
```

这里还有一些关于[odbc_prepare()的更多信息](http://php.net/manual/en/function.odbc-prepare.php)

# php - 如何消除空格

> ID：12733940
> 
> 赞同：-2
> 
> 时间：2012-10-04T18:55:01.260
> 
> 标签：php, mysql

我有一个输入文本表单，但有时某些表单没有填充文本，但我不想在我的回显页面中生成空白。如果我的输入文本没有在表单中输入，我该如何消除这个丢失的空间。

```
<? echo $rows['info']; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:56:45.097

```
<? echo trim($rows['info']); ?> 
```

[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:57:00.647

您应该使用 php`trim()`函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T18:57:10.647

使用修剪：

```
<? echo trim($rows['info']); ?> 
```

添加 <br />：

```
$info = trim($rows['info']);

if (!isEmpty($info)) {
    echo $info . "<br />";
} 
```

# php - 如果最新时间戳比今天早两周，则 PHP MySQL

> ID：12733943
> 
> 赞同：0
> 
> 时间：2012-10-04T18:55:16.133
> 
> 标签：php, mysql, timestamp

我正在尝试查询每个用户和组保存出勤记录的表。如果每个用户和组的最新时间戳比今天的日期早两周，则会显示图像。这是我此时拥有的代码，但我认为我不了解时间格式或其他内容。

```
$tsquery = mysql_query("SELECT ts FROM `attendance` WHERE contact_id='$contactid' AND             group_id='$groupid' AND `ts` + INTERVAL 7 DAY < NOW() ORDER BY ts LIMIT 1 ");
$ts=mysql_fetch_array($tsquery);

if(isset($ts)){
echo "<img src='images/care.png' title='Care Group' style='border: none; background-color:     #fff;'>";
} else {
} 
```

我在某些人身上得到了错误的结果。如果某人 2 周前没有参加活动，但昨天确实参加了活动，则返回 true，而不是发现他们在过去两周内参加了活动。有没有更好的方法可以返回更准确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:58:47.077

你需要稍微改变一下你的逻辑。检查是否存在行匹配`ts + INTERVAL 7 DAY < NOW()`意味着“他们是否参加了超过 7 天前的任何活动*”*？检查行匹配`ts + INTERVAL 7 DAY >= NOW()`意味着“他们在过去一周参加过任何活动吗？” 如果*没有*行，那么他们在一周内没有做任何事情。

（另外，只是一个挑剔，但你有“两周”的散文和“7 天”的代码。两周当然是 14 天。）

# c# - form.show 来自功能区的无模式

> ID：12733946
> 
> 赞同：0
> 
> 时间：2012-10-04T18:55:37.283
> 
> 标签：c#, vsto, excel-2010

我有一个插件，它通过功能区栏上的按钮将工具窗口显示为 showdialog。这个模型版本工作正常。现在我需要允许与表单“下”的电子表格进行交互。我努力了：

```
spec.Show(((IWin32Window)Globals.myAddin.Application.ActiveWindow)); 
```

我收到一个“可疑演员表”错误。当然 'this' 惨遭失败，因为工具栏不是可转换为 'IWin32Window' 的形式

我希望它能够像内置的查找窗口一样运行，您可以在其中调用它并仍然与底层电子表格进行交互。形式很简单：

```
public partial class Spec : Form 
```

显然，我错过了一些东西。TIA

* * *

根据 Slaks 评论添加此内容：

```
 public class DialogService
    {
        public void ShowDialog(Form dialog)
        {
            NativeWindow mainWindow = new NativeWindow();
            //mainWindow.AssignHandle(Process.GetCurrentProcess().MainWindowHandle);
            Application app = new Application();
            mainWindow.AssignHandle(new IntPtr(app.Hwnd));
            dialog.Show(mainWindow);
            mainWindow.ReleaseHandle();

        }
   } 
```

使用 app.Hwnd 或 Process.GetCurrentProcess().MainWindowHandle 时的问题会立即消失。也许我把这件事复杂化了。有没有比我在这里所做的更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:57:13.467

您需要创建自己的类，该类实现并从其属性`IWin32Window`返回 Excel 。`HWND``Handle`

# iphone - 通过按钮重置应用程序

> ID：12733959
> 
> 赞同：0
> 
> 时间：2012-10-04T18:56:23.093
> 
> 标签：iphone, objective-c, ios, c, ipad

我已经构建了一个应用程序，用户可以在其中按下按钮并在每次点击时获得许多文本响应。在 10 次响​​应后，按钮用完了要说的东西，所以我放置了一个重置​​按钮，以便用户可以点击它并再次运行按钮方法。在这一点上，我只是在想办法进行重置时遇到了麻烦。

```
@implementation ViewController
@synthesize billLabel, topLabel, bill;

 - (void)viewDidLoad
{
[super viewDidLoad];

[bill setHidden:YES];

}

 - (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)button:(id)sender
{
[bill setHidden:NO];
static int counter;

if (counter == 0)
{
    billLabel.text = @"text";
}
else if (counter == 1)
{
    billLabel.text = @"text2";
}
else if (counter == 2)
{
    billLabel.text = @"text3";
}
else if (counter == 3)
{
    billLabel.text = @"text4";
}
else if (counter == 4)
{
    billLabel.text = @"text5";
}
else if (counter == 5)
{
    billLabel.text = @"text6";
}
else if (counter == 6)
{
    billLabel.text = @"text7";
}
else if (counter == 7)
{
    billLabel.text = @"text8";
}
else if (counter == 8)
{
    billLabel.text = @"text9";
}
else if (counter == 9)
{
    billLabel.text = @"text10";
}
else if (counter == 10)
{
    billLabel.text = nil;
}

counter += 1;

}

- (IBAction)reset:(id)sender
{

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:17:03.020

尽管您的问题有点令人困惑，但我相信我知道您要做什么。首先使您`int counter`的班级级别变量。请务必在此时将其声明为 0。然后，在您的重置方法中只需使用此代码，

> 计数器 = 0;

您可能想要禁用该按钮，但这取决于您。

# reverse-engineering - 分析未知二进制文件的程序

> ID：12733962
> 
> 赞同：0
> 
> 时间：2012-10-04T18:56:41.103
> 
> 标签：reverse-engineering, archive, binaryfiles

我有一个未知类型的文件，通过我收集的关于其来源的研究和数据，我确定它可能包含多媒体信息，就像档案一样。

是否有可以分析二进制文件并找到某些图像格式等的程序，就像存档修复工具（仅适用于*任何*二进制文件的工具）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:17:38.623

您可以签出 010 Editor 进行二进制分析：[http ://www.sweetscape.com/010editor/](http://www.sweetscape.com/010editor/)

我也不喜欢 windows 工具，但它功能强大并且有试用版。

引用：

1.  针对许多不同数据类型的完整查找、替换、在文件中查找和在文件中替换功能。
2.  强大的二进制比较工具，用于分析两个文件之间的逐字节差异。
3.  使用直方图工具计算字节出现次数并可视化数据。
4.  计算校验和/哈希算法，包括 CRC-16、CRC-32、Adler32、MD2、MD4、MD5、RIPEMD160、SHA-1、SHA-256、TIGER 等。

这是他们页面的屏幕 ![截屏](../Images/9aafd278d9370aa75954940ed08e38bc.png)

# internet-explorer - IE 中的 Knockoutjs valueHasMutated 错误

> ID：12733963
> 
> 赞同：0
> 
> 时间：2012-10-04T18:56:44.343
> 
> 标签：internet-explorer, knockout.js

我没有看到错误在哪里。我在同一页面的另一部分有类似的代码，具有类似的设置，在 IE 中运行良好，但这会引发错误。我最初尝试只推送每个值，但 IE 有问题（请参阅[http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)）。

```
function DocSubType( doc_subtype_id, description ) {
    this.doc_subtype_id = ko.observable( doc_subtype_id );
    this.description = ko.observable( description );
};  
....
docsubtypeModel = [ ], //Where the loaded descriptions are stored. Knockout observers this.

viewDocSubTypeModel = {
    docsubtypes: ko.observableArray(docsubtypeModel),
....
download: function() {
    $.getJSON( DocSubTypesettings.list, function( json ) {
        //Push to the original model and then stated that it has mutated to speed up performance in IE.
        var tmparray = viewDocSubTypeModel.docsubtypes();
        for( i=0; i < json.docsubtypes.length; i++ ) {
            tmp = new DocSubType( json.docsubtypes[i].doc_subtype_id, json.docsubtypes[i].description );
            tmparray.push( tmp );
        }
        viewDocSubTypeModel.docsubtypes.valueHasMutated(); /*ERROR HERE*/        
    });
} 
```

IE8 报告“JScript Object expected” knockout-1.2.1.js，第 34 行字符 262。（或 knockout-1.2.1.debug.js，第 928 行字符 19）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:50:12.550

问题是我写了一个导致评估失败的排序助手。

# linux - Lazarus Linux Ubuntu 上的线程

> ID：12733967
> 
> 赞同：2
> 
> 时间：2012-10-04T18:56:50.990
> 
> 标签：linux, multithreading, lazarus

我在使用线程运行应用程序时遇到问题，在 Windows 上运行良好，但是当我在 Linux Ubuntu 12.04 上运行它时，我的应用程序崩溃了。

这是一个非常小的应用程序，仅用于理解线程。

创建线程时，我的应用程序崩溃。

这是代码：

```
unit Unit1;

{$mode objfpc}{$H+}

interface

uses
  Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, StdCtrls,
  ComCtrls;

type

{ TMyThread }

  TMyThread = class(TThread)
  private
    fStatusText: string;
    procedure CambiaLabel();
  protected
    procedure Execute; override;
  public
    constructor Create(CreateSuspended: boolean);
  end;

{ TForm1 }

  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    Label1: TLabel;
    ProgressBar1: TProgressBar;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);

    procedure FormCreate(Sender: TObject);
  private
    { private declarations }
  public
    { public declarations }
     miHilo: TThread;
  end;

var
  Form1: TForm1;

implementation

{$R *.lfm}

{ TMyThread }
procedure TMyThread.CambiaLabel();
begin
    Form1.Label1.Caption:=fStatusText;

    Form1.ProgressBar1.StepIt;

    if Form1.ProgressBar1.Position = Form1.ProgressBar1.Max then begin
       Form1.miHilo.Terminate;
       Form1.ProgressBar1.Position := 0;
    end;
end;

procedure TMyThread.Execute;
var
  newStatus : string;
begin
  fStatusText := 'TMyThread comenzando...';
  fStatusText := 'TMyThread Corriendo ...';
  while (not Terminated) and (true {any condition required}) do begin

    //here goes the code of the main thread loop

    Synchronize(@CambiaLabel);

  end;
end;

constructor TMyThread.Create(CreateSuspended: boolean);
begin
  FreeOnTerminate := True;
  inherited Create(CreateSuspended);
end;

{ TForm1 }

procedure TForm1.Button1Click(Sender: TObject);
begin

  if miHilo <> nil then begin
    ShowMessage('Ya se esta ejecutando');
  end
  else begin
    miHilo := TMyThread.Create(false);
  end;

end;

procedure TForm1.Button2Click(Sender: TObject);
begin
   if miHilo <> nil then begin
     miHilo.Terminate;
     ShowMessage('Hilo terminado');
     miHilo:=nil;
   end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin

end;

end. 
```

这里是带有错误消息的图像：[错误消息图像](https://i.imgur.com/KY7pW.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:40:48.670

我找到了解决方案，我在项目的 .lpr 文件中遗漏了一些东西，我使用线程 os OS Unix，如 Linux、OsX、freebsd，你必须在 .lpr 文件中添加一行：

这是正常的文件：

```
program project1;

{$mode objfpc}{$H+}

uses
  {$IFDEF UNIX}{$IFDEF UseCThreads}
  cthreads,
  {$ENDIF}{$ENDIF}
  Interfaces, // this includes the LCL widgetset
  Forms, Unit1
  { you can add units after this };
  .
  .
  . 
```

这是您必须添加的行 **{$define UseCThreads}**

所以你的文件应该是这样的：

方案项目1；

```
{$mode objfpc}{$H+}
{$define UseCThreads}

uses
  {$IFDEF UNIX}{$IFDEF UseCThreads}
  cthreads,
  {$ENDIF}{$ENDIF}
  Interfaces, // this includes the LCL widgetset
  Forms, Unit1
  { you can add units after this };
  .
  .
  . 
```

这就是它现在的工作原理，感谢您的答案和提示；D

# actionscript-3 - ActionScript 3：在复杂的动作链中间等待用户输入

> ID：12733972
> 
> 赞同：0
> 
> 时间：2012-10-04T18:57:04.113
> 
> 标签：actionscript-3

我正在尝试在 ActionScript 3 中编写一个 roguelike 游戏。在这种类型的游戏中，角色和物品以复杂且不可预测的方式进行交互，因此游戏内事件的长链可以在一个回合的空间内发生，每一个由上一个导致的，并且经常发生在前一个正确完成其进程之前。当我发现，在这样的混乱中，我需要提示玩家输入并立即采取行动，然后其他任何事情继续发生，似乎出现了一个问题。

如果 UI 在单独的线程上运行，这样玩家可以输入输入并且我可以接收它而不必从当前正在执行的整个函数堆栈中返回，那么理智的方法是简单地调用（从任何巨大的嵌套函数调用我碰巧在里面）一个等待玩家输入然后对其进行操作的函数。但在 AS3 中，这是不可能的；在返回之前等待输入的函数只会导致程序挂起。

针对此类问题，人们说正确的解决方案是将我的操作分解为多个部分，这样我就可以等待用户输入，然后继续我正在做的事情。对于通常提供此类建议的琐碎示例来说，这很可爱并且可以优雅地工作，但是在这种情况下，不可预测且经常随机发生的事件可能会同时导致数十个复杂事件链，其中任何一个都可能突然需要在任何时候用户输入，“恢复我正在做的事情”的概念似乎是一项艰巨的任务。

我是否别无选择，只能将游戏中发生的所有事情存储为一个数据结构，该数据结构描述了事件的所有细节，包括到目前为止的进展情况，这样我就可以突然放弃我正在做的事情等待玩家输入，然后重建之前的状态，不管它可能多么复杂？与从任何地方简单地调用“get_input”函数然后继续我快乐的方式相比，这项任务的繁琐似乎足以阻止我或任何人使用 AS3。我错过了什么？有没有办法解决这个问题，不会让我发疯，或者我应该把这当作 AS3 不适合这项工作的工具的暗示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:10:22.040

关于数据结构 - 我认为是的，你做得对。关于用户输入的“即时”请求 - 您应该在某处定义一段时间，任何持续时间少于此的时间都被视为即时事件，并且永远不应要求用户在“继续？”行中输入。现在，您希望有一个事件来触发比主事件更短的事件，这是可以做到的，并且 AS3 对于这种类型的事件处理是正常的 - 但是，为了让玩家能够提供输入，您有释放 enterFrame 侦听器或用于处理事件链的任何进程。因此，例如，您可以这样做：

```
var userInputRequested:Boolean=false;
while (!userInputRequested && (yourEventsToBeProcessed>0)) {
    userInputRequested=processOneTurnOfOneEvent();
} 
```

显然，你的游戏应该能够同时处理一个事件一段时间，比如一个事件“你的角色正在穿上盔甲”，因为我见过一个像这样的冗长事件的 roguelike。好的，这个事件被推送到你的事件链中，yourEventsToBeProcessed 现在是非零的。这个循环在计算游戏时间的同时处理一个穿着事件（！！！如果你错过了这个，你就有大麻烦了。它应该符合“当我们到达处理这个量子的最后一个事件时，推进一个量子并且从第一个事件开始”）直到事件成功完成，否则会弹出另一个随机事件（“狗头人进入视野！” - 它可能不需要用户输入，但“狗头人在攻击范围内”可能）。基本上，“移动你的世界”事件在该链中始终处于活动状态，但不计入在该循环中检查的计数器中，否则您的玩家将永远等待世界。现在，这样的事件对玩家可见，如果“processOneTurnOfOneEvent()”返回 true，则循环结束，enterFrame 侦听器可能会为用户提供输入内容的方法，并耐心等待，直到收到输入。

# c# - 如何将 Window.Owner 设置为 Outlook 窗口

> ID：12733974
> 
> 赞同：8
> 
> 时间：2012-10-04T18:57:08.263
> 
> 标签：c#, .net, wpf, outlook, vsto

我有一个弹出 WPF 窗口的 Outlook 插件

有没有办法将 WPF 的`Window.Owner`属性设置为 Outlook？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T20:50:54.643

感谢@reedcopsey 让我们走上正轨……

**检索Outlook 句柄**的技巧是使用反射来获取活动窗口的标题 ( *Caption* ) 并使用`FindWindow`Win32 API 来获取活动窗口`IntPtr`句柄 (*检查器、资源管理器等*)。灵感来自[这个 MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/6ec291f3-6f0f-4d25-aa4c-1f5779486881/)。拥有活动窗口句柄后，您可以利用它[`WindowInteropHelper`](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)来管理所有者关系。

### 检索 Outlook 句柄（*通过`ActiveWindow`*）

```
Window yourWPFWindow = new Window();
dynamic activeWindow = Globals.ThisAddIn.Application.ActiveWindow();
IntPtr outlookHwnd = new OfficeWin32Window(activeWindow).Handle;
WindowInteropHelper wih = new WindowInteropHelper(yourWPFWindow);
wih.Owner = outlookHwnd;
yourWPFWindow.Show(); 
```

### OfficeWin32Window（*帮助类*）

```
///<summary>
/// This class retrieves the IWin32Window from the current active Office window.
/// This could be used to set the parent for Windows Forms and MessageBoxes.
///</summary>
///<example>
/// OfficeWin32Window parentWindow = new OfficeWin32Window (ThisAddIn.OutlookApplication.ActiveWindow ());   
/// MessageBox.Show (parentWindow, "This MessageBox doesn't go behind Outlook !!!", "Attention !", MessageBoxButtons.Ok , MessageBoxIcon.Question );
///</example>
public class OfficeWin32Window : IWin32Window
{

    ///<summary>
    /// The <b>FindWindow</b> method finds a window by it's classname and caption.
    ///</summary>
    ///<param name="lpClassName">The classname of the window (use Spy++)</param>
    ///<param name="lpWindowName">The Caption of the window.</param>
    ///<returns>Returns a valid window handle or 0.</returns>
    [DllImport("user32")]
    public static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    #region IWin32Window Members

    ///<summary>
    /// This holds the window handle for the found Window.
    ///</summary>
    IntPtr _windowHandle = IntPtr.Zero;

    ///<summary>
    /// The <b>Handle</b> of the Outlook WindowObject.
    ///</summary>
    public IntPtr Handle
    {
        get { return _windowHandle; }
    }

    #endregion

    ///<summary>
    /// The <b>OfficeWin32Window</b> class could be used to get the parent IWin32Window for Windows.Forms and MessageBoxes.
    ///</summary>
    ///<param name="windowObject">The current WindowObject.</param>
    public OfficeWin32Window(object windowObject)
    {
        string caption = windowObject.GetType().InvokeMember("Caption", System.Reflection.BindingFlags.GetProperty, null, windowObject, null).ToString();

        // try to get the HWND ptr from the windowObject / could be an Inspector window or an explorer window
        _windowHandle = FindWindow("rctrl_renwnd32\0", caption);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T19:02:41.600

这可以通过[WindowInteropHelper](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)完成：

```
WindowInteropHelper wih = new WindowInteropHelper(yourWindow);
wih.Owner = outlookHwnd;
yourWindow.Show(); 
```

# ios - 有没有办法同时使用图层阴影和视图转换？

> ID：12733983
> 
> 赞同：2
> 
> 时间：2012-10-04T18:57:50.253
> 
> 标签：ios, objective-c, uiview, layer, uiviewanimation

我正在使用视图转换 (UIViewAnimationOptionTransitionFlipFromLeft) 在父视图的 2 个视图之间进行切换。首先，我尝试在父级（view.layer 的阴影）上设置阴影，但阴影在动画过程中消失，然后又回来了。我还尝试在 2 个子视图上放置单独的阴影，并且发生了同样的事情。

除了将阴影保存为单独的图像之外，我可以做些什么来在阴影仍然可见的视图之间进行动画处理？

谢谢。

编辑：所以看起来视图的 maskToBounds 在过渡期间设置为 YES（我尝试添加阴影 UIImage 并且它仍然被裁剪）。有什么办法关掉吗？我认为这是一种优化。

编辑：对于我需要的（阴影视图在滚动视图中），动态阴影严重滞后。所以我使用了 .png 阴影，它们不再滞后。为了防止截断，我将视图放在另一个视图中，这样我的阴影实际上就在父视图范围内，并且它们可以完美翻转。

# wpf - 如何使用 Caliburn Micro 将 View/ViewModel 绑定到 Properties.Settings.Default？

> ID：12733984
> 
> 赞同：1
> 
> 时间：2012-10-04T18:57:50.960
> 
> 标签：wpf, caliburn.micro

我可以将视图直接绑定到我的 Properties.Settings.Default 中的设置吗？或者我需要创建具有相同名称的属性并手动刷新值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:11:36.237

尝试这个 ：

```
<Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:Properties="clr-namespace:WpfApplication1.Properties" Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <Label Content="{Binding Source={x:Static Properties:Settings.Default}, Path=BrandOfBeerOfChoice}"/>

    </Grid>
</Window> 
```

在这个小应用程序中，我创建了一个名为`BrandOfBeerOfChoice`.

# python - 通过 Web 应用程序处理作业：实时状态更新和后端消息传递

> ID：12733985
> 
> 赞同：10
> 
> 时间：2012-10-04T18:57:51.937
> 
> 标签：python, web-applications, websocket, messaging, zeromq

我想实现一个（开源）Web 应用程序，用户通过他的浏览器向 Python Web 应用程序发送某种请求。请求数据用于定义和提交某种繁重的计算工作。计算工作外包给“工人后端”（也是 Python）。在作业处理期间，作业会随着时间的推移经历不同的阶段（理想情况下，从“提交”到中间状态到“完成”）。我想要完成的是实时向用户显示当前的工作状态。这意味着工作人员后端必须将作业状态传回 Web 应用程序。然后，Web 应用程序必须将信息推送到用户的浏览器。我为您带来了一张示意性描述基本思想的图片： ![示意图问题描述](../Images/2f672d696d42843b5ca77f8edda4b9d5.png)

红色圆圈中的数字表示事件的时间顺序。“web app”和“worker backend”仍有待设计。现在，如果您能帮助我做出一些技术决策，我将不胜感激。

我的问题，特别是：

1.  **我应该在 Web 应用程序和工作人员后端之间应用哪种消息传递技术？** 当工作人员后端发出关于某个工作的信号（某种消息）时，它必须触发 Web 应用程序中的某个事件。因此，我需要某种与最初请求提交作业的客户端相关联的回调。我想我需要一些发布/订阅机制，工作后端发布和网络应用订阅。当 Web 应用程序收到消息时，它会通过向客户端发送状态更新来对其做出反应。我希望工作人员后端具有可扩展性，并且与 Web 应用程序紧密分离。因此，我正在考虑使用 Redis 或 ZeroMQ 来完成这项任务。你怎么看？我的整个方法是不是有点太复杂了？

2.  **我应该使用哪种技术将信息推送到浏览器？** 只是出于完美主义，我想要实时更新。我不想以高频率轮询。当工作人员后端发出消息时，我希望立即推送到客户端:-)。另外，我不需要最大的浏览器支持。这个项目首先对我来说或多或少是一个技术演示。我应该去 HTML5 服务器发送的事件/websockets 吗？或者你会推荐其他方式吗？

非常感谢您提前提出的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:59:25.607

一个选项是使用 WebSocket。如果您走这条路，您可能会查看[Autobahn](http://autobahn.ws/)，其中包括适用于 Python (Twisted) 的客户端和服务器，以及基于 WebSocket 的 RPC+PubSub 协议（带有适用于 Python、JavaScript 和 Android 的库）。使用 RPC+PubSub 订阅可以保护大量工作，并且可能满足您的需求（工作提交 => RPC，工作工作更新 => PubSub）。

AutobahnPython 在 Twisted 上运行，它还可以充当 WSGI 容器，从而可以运行 Flask（或其他基于 WSGI 的 Web 框架）。您可以在 1 个端口/服务器上运行所有内容。后者在 GitHub Autobahn 存储库中有一个示例。

免责声明：我是 Autobahn 和[WAMP](http://wamp.ws)的原作者，并为 Tavendo 工作。

**详细信息：** 我假设您的工作人员执行 CPU 密集型和/或阻塞操作。

首先，您的员工是纯 Python 还是外部程序？

如果是后者，您可以使用 Twisted 进程协议实例，该实例通过 stdio 管道（以非阻塞方式）从主 Twisted 线程进行通信。如果是前者，您可以使用 Twisted 后台线程池并使用 Twisted deferToThread（参见：[http](http://twistedmatrix.com/documents/current/core/howto/threading.html) ://twistedmatrix.com/documents/current/core/howto/threading.html ）。

Autobahn 在主 Twisted reactor 线程上运行。如果您的工作人员也这样做（参见之前的评论），那么您可以直接调用 WebSocket/WAMP 工厂/协议实例上的方法。如果不是（worker 在后台线程上运行），您应该通过 callFromThread 调用这些方法。

如果您使用 WAMP，主要是为每个工作人员获取 WampServerFactory 的引用。然后，worker 可以通过调用适当的工厂方法向所有订阅者发送 PubSub 事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T19:13:17.150

既然您在谈论 Python Web 应用程序，我建议您查看：

**我应该在 Web 应用程序和工作人员后端之间应用哪种消息传递技术？**

[Celery](http://celeryproject.org/) - 将您的工作分解为较小的任务，这些任务返回需要显示给客户的结果

**我应该使用哪种技术将信息推送到浏览器？**

NodeJS上的[Socket IO](http://socket.io/)[类型](http://nodejs.org/)的服务器端 JS 框架或[用于您的 Python Web 框架的 Web 套接字库](http://blog.jupo.org/2011/08/13/real-time-web-apps-with-django-and-websockets/)

如果你不是太依赖 python，看看[Meteor](http://meteor.com/)

基于[此线程](https://groups.google.com/forum/#!msg/celery-users/41cSOM3YvYA/4Et_o1M9un8J)，实时更新从服务器到 Web 客户端的进度的其他方法可能包括将进度状态写入 redis 数据库或使用基于[celery 子任务的](http://docs.celeryproject.org/en/latest/userguide/canvas.html)异步结果的[STOMP 协议使用](http://stomp.github.com//)[Oribited](http://orbited2.org/) / [Morbid](http://pypi.python.org/pypi/morbid/0.8.2)（均基于[Twisted](http://twistedmatrix.com/trac/)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T12:19:19.683

为了有任何用途，您的 Web 应用程序将有一个数据库。我会在该数据库中创建一个专门用于这些作业的表。每个工作都有一个“状态”。

这简化了您的系统，因为您可以发送开始工作的请求并将其交给后端工作人员（zmq 是这个 IMO 的一个很好的解决方案）。由于您使用 python 作为后端，因此让您的工作人员作业更新其在数据库中的当前工作作业或拥有另一个“更新程序”，其唯一工作是更新数据库中的字段（保持逻辑分开）是非常简单的将提供更好的解决方案，如果您正在进行大量更新，则允许您启动多个“更新程序”）

然后对于您的前端，由于您不想轮询服务器，我会做一些[“长轮询”](http://goo.gl/17YuW)。您实际上所做的是轮询服务器，但服务器实际上永远不会“响应”，直到您感兴趣的数据发生变化。一旦发生变化，您就会响应请求。在前端，您的 JS 在收到最新更新后立即重新建立连接。只要您使用也是跨浏览器的 JS 框架（我建议使用 jQuery），该解决方案就可以跨浏览器兼容。

* * *

要消除 Web 应用程序数据库轮询，请执行以下操作：

将初始请求作为对 Web 应用程序的长轮询请求，Web 应用程序向您的后端发送一条 zmq 消息（可能需要使用 REQ/REP 套接字完成）并等待。它一直等到它从 zmq 后端收到状态更改的消息。当它获得状态更改时，它会以更改响应前端。此时，前端将发送一个新的长轮询请求（此作业的当前 id 可以是其身份），Web 应用程序将重新连接到后端并等待另一个状态更改。使这项工作的诀窍是使用 ZMQ[`ZMQ_IDENTITY`](http://api.zeromq.org/2-1%3azmq-setsockopt#toc6)最初创建时的套接字（在第一个请求中）。这将允许 Web 应用程序重新连接到相同的后端套接字并获得新的更新。当后端有新的更新要发送时，它会向 Web 应用程序发出信号，然后 Web 应用程序将响应长轮询请求及其状态更改。这样就`polling`没有后端数据库，一切都是后端工作人员的事件驱动。

我会设置某种看门狗，如果前端消失（切换页面或关闭浏览器），后端套接字将正确关闭。当它改变状态时，他们不需要坐在那里无限期地阻塞。

# mysql - 在 2 个表上加入父子 ID 并从另一行返回结果

> ID：12733986
> 
> 赞同：4
> 
> 时间：2012-10-04T18:57:51.920
> 
> 标签：mysql, sql, join

我对 SQL 有基本的理解，因此需要帮助，并提前感谢那些回复的人。

我有 2 个表格，一个表格包含标题和可以在这些标题下选择的选项。另一个表链接到该表的实际数据引用以引用标题名称和选项。

我正在尝试执行 SQL 查询来连接这些表，然后在一个表中引用父/子 ID 以从另一个表中提取标题+选定选项，但我得到的只是 ID 号。我已经创建了一个图像，应该解释我想要返回的结果......并且失败了！

这里的这张图片将解释：

![http://i.imgur.com/hSPvY.jpg](../Images/5191540c8454ebad148acaf7d9e3c9ef.png)

注意 - 上面，我说不是 18 和 20，我可以让我的结果显示 ID 号..但不是来自父标题和子标题的正确信息。（服务器支持 - 现场访问收费）

这是我使用 SQL 的地方：

```
 SELECT custom_def_organizations.title
    FROM custom_data_organizations
    INNER JOIN organizations
    ON custom_data_organizations.organization_id = organizations.id
    INNER JOIN custom_def_organizations
    ON custom_def_organizations.parent_id = custom_data_organizations.root_field_id 
    AND custom_def_organizations.id = custom_data_organizations.field_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:15:32.520

加入父子的第一个查询，没有 custom_data_organization 但使用隐含的层次结构：

```
SELECT parent.id, child.id
    FROM custom_def_organizations AS parent
    JOIN custom_def_organizations AS child
        ON (child.parent_id = parent.id); 
```

这将返回：

```
18  19
18  20
18  21
18  22
18  23 
```

现在获取其他信息：

```
SELECT parent.id, child.id, CONCAT(parent.title, ' - ', child.title) AS title
    FROM custom_def_organizations AS parent
    JOIN custom_def_organizations AS child
        ON (child.parent_id = parent.id); 
```

这将返回：

```
18  19  Server Support - Yes
18  20  Server Support - Site Visits Chargeable
18  21  Server Support - Site Visits Included
18  22  ...
18  23 
```

相同的概念，但使用 custom_data_organizations 驱动 JOIN：

```
SELECT cdo.id, CONCAT(parent.title, ' - ', child.title) AS title
    FROM custom_data_organizations AS cdo
    JOIN custom_def_organizations AS parent
        ON (cdo.root_field_id = parent.id)
    JOIN custom_def_organizations AS child
        ON (cdo.field_id = child.id); 
```

这将返回：

```
 85    Server Support - Site Visits Chargeable
    ... 
```

# javascript - 用jquery中的属性值替换节点名

> ID：12733987
> 
> 赞同：0
> 
> 时间：2012-10-04T18:57:56.140
> 
> 标签：javascript, jquery, html

我有这个 xml：

```
<Item name="Alpha">
    <Field name="CreationDateTime">2012-04-26</Field>
    <Field name="Material" readOnly="X"> Congress </Field>
</Item> 
```

我想把它转换成这种格式（注意节点名需要换成对应的属性名）

```
<Item name="Alpha">
    <CreationDateTime >2012-04-26</CreationDateTime>
    <Material readOnly="X"> Congress </Material>
</Item> 
```

在 jquery 中最快的方法可能是什么。这必须发生在具有 1000 条记录的表中，因此它必须是有效的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:38:07.907

以下代码使用 jQuery 的 map 函数在文档之间进行转换。它完成了基本工作，并且可能可以进一步扩展以满足您完整文档的需求。

几个存在的问题：

*   输出中标签的大小写是小写的，我似乎找不到一个简单的解决方案。
*   我不知道它将如何处理数千条记录。:)

资源：

```
<script type="text/javascript">
$(function() {
    var XML = 
    '<Item name="Alpha">' +
    '<Field name="CreationDateTime">2012-04-26</Field>' + 
    '<Field name="Material" readOnly="X"> Congress </Field>' +
'</Item>';

$(XML).map(function() {             
    function map() {
        if ($(this).is("Item")) {
            var result = $("<Item>").attr("name", "Alpha");                     
            var children = $(this).children().map(map);

            $(children).each(function() {
                result.append(this);
            });

            return result;
        }

        if ($(this).is("Field")) {
            var name = $(this).attr("name");

            var result = $("<" + name + ">");

            // Transfer other attributes
            $(this.attributes).each(function() {
                if (this.name === "name")
                    return;

                result.attr(this.name, this.value);
            });

            result.text( $(this).text() );
            return result;
        }
    };

    var result = $(XML).map(map);
});
});
</script> 
```

# jquery-ui - 动态更改 SELECTED 下拉选项

> ID：12733990
> 
> 赞同：0
> 
> 时间：2012-10-04T18:58:00.120
> 
> 标签：jquery-ui, jquery

我有这个下拉

```
<select class="dropdown"><option value="0">Disabled</option><option value="1">Enabled</option></select> 
```

在使用查询或纯 javascript 的 javascript 中，我想将选择框的值动态更改为我的 div 显示的值。这是我的 div 节目

启用

因此，如果此 div 已启用，我应该在已启用选项中进行选择。所以上面的下拉菜单是

```
<select class="dropdown"><option value="0">Disabled</option><option value="1" selected>Enabled</option></select> 
```

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:12:18.227

这个小提琴怎么样？

[http://jsfiddle.net/rMrSU/](http://jsfiddle.net/rMrSU/)

HTML

启用

```
<select class="dropdown">
    <option value="0">Disabled</option>
    <option value="1">Enabled</option>
</select> 
```

JS

```
$(document).ready(function(){
    $('.dropdown option').each(function(){
        if($(this).text()==$('div#show').text())
            $(this).attr('selected','selected');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:06:26.130

[这个小提琴](http://jsfiddle.net/kNRev/)怎么样

HTML

```
<select class="dropdown">
    <option value="0">Disabled</option>
    <option value="1">Enabled</option>
</select>

<div id="myId">Enabled</div> 
```

Javascript

```
$('.dropdown option:contains(' + $('#myId').text() + ')').attr('selected', true); 
```

或者更好的是[这个](http://jsfiddle.net/kNRev/1/)

```
$('.dropdown').val($('.dropdown option:contains(' + $('#myId').text() + ')').val()) 
```

两者之间的区别在于，一个是分配 selected 属性（但这意味着可能有 1 个以上的项目`selected="selected"`）。第二个更好，因为它将值分配给下拉列表。

这完全取决于您需要如何访问下拉列表......我个人会选择`.val()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T19:08:42.040

你可以做这样的事情：

演示：http: [//jsfiddle.net/eXbFg/](http://jsfiddle.net/eXbFg/)

如果 Div 已“启用”，它将选择“启用”选项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T19:22:39.103

Your question isn't very clear... Similar to this functionality?

[http://jsfiddle.net/eXbFg/](http://jsfiddle.net/eXbFg/)

Mind you, you can use either text, or value if you feel more comfortable.

# javascript - 通过 Javascript 中的循环将事件处理程序应用于元素

> ID：12733994
> 
> 赞同：0
> 
> 时间：2012-10-04T18:58:08.213
> 
> 标签：javascript

我想为我的所有`<td>`标签添加一个事件处理程序。我尝试了以下方法：

```
var allSquares = document.getElementsByTagName("td");

for (var i = 0, len = allSquares.length; i < len; i++){
allSquares[i].addEventListener('ondragover', allowDrop, false);

} 
```

任何人都知道为什么它不起作用？提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:03:06.467

通常传递给的事件名称`addEventListener`不以`"on"`.

```
allSquares[i].addEventListener('dragover', allowDrop, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:03:33.653

使用 W3 方法`addEventListener`，您不会`"on"`在事件名称之前添加一个（就像您为 Microsoft 所做的那样）：

```
allSquares[i].addEventListener('dragover', allowDrop, false); 
```

请参阅 Quirksmode[关于两种高级事件注册模型的文章](http://www.quirksmode.org/js/events_advanced.html)。

# php - 在 javascript 中使用服务器 php 值

> ID：12733996
> 
> 赞同：-1
> 
> 时间：2012-10-04T18:58:12.927
> 
> 标签：php, javascript, server-side

这个问题是因为我在数据库表中有一些值作为参数，所以我认为在不使用内联脚本的情况下在 javascript 中使用它们的方法是调用 a `parameters.php`，它返回所有值并将它们存储在 javascript`global`变量中以使用它们。我只想知道这是否正确，或者是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:13:34.463

你可以使用类似的东西让我们说：

```
<?php 
    $variable = "some variable that you need";
?>
<script type="text/JavaScript">
<!--
document.write("<?php echo $variable;?>")
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:06:22.870

这可能非常有效，但我认为在页面本身中生成内联 javascript 也同样容易。我假设参数可能会在每个请求上发生变化，因此通过将它们放在页面本身中，您可以为每个页面视图保存一个请求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T19:06:37.837

让我们考虑一下 - 您正在将服务器变量发送到浏览器

浏览器由不受您控制的人运行。

你假设他们会忠实地发回这些变量。

在这里它崩溃了。

您收到这些变量。并且您假设没有包含这些变量

所以这些变数会在你不在乎的情况下继续存在吗？

# java - 线程化的java服务器只发送一个文件

> ID：12733997
> 
> 赞同：0
> 
> 时间：2012-10-04T18:58:13.230
> 
> 标签：java, multithreading, sockets

我有一个将文件发送到 android 客户端的 java 服务器。出于某种原因，服务器似乎只通过一次就关闭了套接字，我希望它发送所有文件然后关闭套接字，这是我的服务器代码。提前致谢

```
public void run() {
   DataOutputStream dos = null;
    try {
        String path = "/home/test";
        int count = 0;
        dos = new DataOutputStream(
                new BufferedOutputStream(socket.getOutputStream()));
        DataInputStream dis = new DataInputStream(new BufferedInputStream(
                socket.getInputStream()));

        File[] files = new File(path).listFiles();
        for (File file : files) {
            String filename = file.getName();
            String extension = filename.substring(
                    filename.lastIndexOf(".") + 1, filename.length());
            if ("png".equals(extension)) {
                count += 1;
            }

        }
        System.out.println("Sending " + count + " files");
        dos.writeInt(count);
        dos.flush();
        byte[] temp = new byte[1024];
        int n = 0;
        for (File file : files) {
            String filename = file.getName();
            String extension = filename.substring(
                    filename.lastIndexOf(".") + 1, filename.length());
            if ("png".equals(extension)) {
                FileInputStream fis = new FileInputStream(file);
                BufferedInputStream bis = new BufferedInputStream(fis);
                byte fileContent[] = new byte[(int) file.length()];
                bis.read(fileContent);
                int dataLength = fileContent.length;
                dos.writeInt(dataLength);
                dos.flush();
                int open = dis.readInt();
                System.out.println("still open if open = 5: open = "+open);
                System.out.println(filename + " is " + dataLength
                        + " bytes long");
                while ((dataLength > 0)
                        && (n = bis.read(temp, 0,
                                (int) Math.min(temp.length, dataLength))) != -1) {
                    dos.write(temp, 0, n);
                    dos.flush();
                    dataLength -= n;

                }
                System.out.println("Sent file "+filename);
                fis.close();
                bis.close();

            }
        }

    } catch (IOException e) {
        e.printStackTrace();
    }
    finally
    {   

        try{
        if (dos != null) {dos.close();}
        } catch (Exception e) {

            e.printStackTrace();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:03:46.077

你的 Android 应用程序有没有可能在旋转？您的代码中有逻辑错误。它将整个文件读入，`fileContent`但随后您进入`while`循环等待文件被完全读取。

```
bis.read(fileContent);
...
while ((dataLength > 0)
    && (n = bis.read(temp, 0, (int) Math.min(temp.length, dataLength))) != -1) { 
```

您已经阅读了整个文件，`bis`因此当您阅读更多内容时，您会得到它，`n == 0`所以它会永远循环。

如果要进行缓冲，则应删除`bis.read(fileContent);`. 如果要在开始时读取文件，则需要删除`while`循环。

```
int dataLength = (int) file.length();
byte fileContent[] = new byte[dataLength];
bis.read(fileContent);
dos.writeInt(dataLength);
dos.write(fileContent);
dos.flush();
dataLength -= n; 
```

# html - Javascript 选项删除

> ID：12733998
> 
> 赞同：0
> 
> 时间：2012-10-04T18:58:19.307
> 
> 标签：html, options

> **可能重复：**
> [是否可以在选项元素内嵌套任何 DOM 元素？](https://stackoverflow.com/questions/10454831/is-it-possible-to-nest-any-dom-elements-inside-of-an-option-element)

我正在动态创建选项文本。是否有可能将它们呈现为罢工的语法？如果我尝试`"<strike>"+tokens[0]+"</strike>",`，我会得到未转义的文字，这不是我想要的。更普遍的问题是 javascript 选项可以渲染 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:57:16.600

您可以为此使用 CSS，尽管删除线仅显示在下拉列表中，而不显示在所选选项上。

[http://jsfiddle.net/kboucher/gLqh9/](http://jsfiddle.net/kboucher/gLqh9/)

更新：您可以将 'strike' 类应用于 SELECT 元素本身，以使所选项目具有直通性。（当所选选项具有“罢工”类时，也许有一些 JavaScript 来切换此类？）

要在小提琴中进行测试，请更改：

```
option.strike { text-decoration: line-through; } 
```

至

```
select,
option.strike { text-decoration: line-through; } 
```

**注意：这可能不适用于所有浏览器**