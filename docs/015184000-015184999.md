# StackOverflow 问答 15184000-15184999

# django - Django - 覆盖表单保存（）方法返回无？

> ID：15184000
> 
> 赞同：5
> 
> 时间：2013-03-03T08:47:24.123
> 
> 标签：django, django-forms

目前，我的模型表单正在覆盖 save() 方法，并且工作正常。问题是当我调用 savedObject = form.save() 时，表单被保存但它返回 None？在覆盖 save() 之前，我会得到保存的对象，但是这种方法有什么问题？

模型形式的 save()：

```
def save(self, *args, **kwargs):
       kwargs['commit']=False
       obj = super(MyForm, self).save(*args, **kwargs)
       obj.time = datetime.date.today()
       obj.expire = datetime.date.today()
       return obj.save() 
```

POST后在我看来调用：

```
savedObject = form.save()
#form is now saved, but savedObject is None 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T09:27:26.170

正确的方法：

```
def save(self, commit=True):
    obj = super(MyForm, self).save(commit=False)
    obj.time = datetime.date.today()
    obj.expire = datetime.date.today()
    if commit:
        obj.save()
    return obj 
```

# objective-c - 跨类文件传递变量的问题

> ID：15184002
> 
> 赞同：0
> 
> 时间：2013-03-03T08:47:38.770
> 
> 标签：objective-c, xcode, class, variables

我很难将变量从一个类文件传递到另一个类文件。我已经尝试过全局变量创建者 extern，但这也不起作用。

具体来说，我正在尝试将我创建的新类文件中的变量传递给`NDSClassSiteViewController`主控制器`NDSClassMasterViewController`。

我已将@property 添加到 .h 文件中，如下所示：

```
@interface NDSClassSiteViewController : UITableViewController {

    NSArray *sitesMenu;

}

@property (nonatomic, retain) NSString *siteid;

@end 
```

然后将@synthesize 放入.m 文件中，如下所示：

```
#import "NDSClassSiteViewController.h"

#import "NDSClassMasterViewController.h"

@interface NDSClassSiteViewController () {
    NSMutableArray *_objects;
}
@end

@implementation NDSClassSiteViewController

@synthesize siteid; 
```

我在 .m 文件中设置变量如下：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showMenu"]) {

        NSInteger row = [[self tableView].indexPathForSelectedRow row];

        //NSArray *appcell = [sitesMenu objectForKey:@"Table"];

        NSLog(@"AppCell %@", sitesMenu);

        NSDictionary *entry = [sitesMenu objectAtIndex:row];

        self.siteid = [entry objectForKey:@"SITEID"];

        NSLog(@" sample SiteView %@", siteid);

        //NDSClassMasterViewController *detailController = segue.destinationViewController;
        //detailController.detailItemTwo = siteid;
    }
} 
```

然后我尝试使用以下命令在主视图控制器中访问它：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    globalid = siteid;

} 
```

但我收到一个错误：`use of undeclared identifier siteid`

我真的不知道为什么它不允许我使用变量？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:30:48.577

您已在 上声明了一个属性`NDSClassSiteViewController`。要访问该属性，您需要一个`NDSClassSiteViewController`范围内的实例，并且您还必须使用属性的语法来访问它——点语法或标准方法调用语法。

要读取属性：

```
aSiteViewController.siteID
[aSiteViewController siteID] 
```

设置它：

```
aSiteViewController.siteID = @"Site ID here";
[aSiteViewController setSiteID:@"Site ID Here"] 
```

当您在`NDSClassSiteViewController`then的方法中时，`self`指向您可能要使用的实例。否则，您可能会在方法中创建它或将其作为参数传入。此外，当您在一个实例方法中时，`NDSClassSiteViewController`您可以直接访问支持该属性的实例变量 - 通常这是`_siteID`您手动合成的，所以`siteID`应该可以工作。*请注意，我做了`siteID`而不是`siteid`您正在使用的。我这样做是为了可读性并遵循既定的 Objective-C 命名约定。*

# javascript - 在 ng-repeat 之后执行 jQuery 函数

> ID：15184003
> 
> 赞同：9
> 
> 时间：2013-03-03T08:47:46.803
> 
> 标签：javascript, jquery, angularjs

在此先感谢您的帮助。我在我的 web 应用程序中使用这个[tagmanager 。](http://welldonethings.com/tags/manager)jQuery 函数工作正常，直到这个

```
<input type="text" name="tags" placeholder="Tags" class="tagsManager" /> 
```

置于

```
ng-repeat = "(key,val) in client_proj" 
```

这是代码的一小段

```
<div class="accordion-group" ng-repeat="(key,val) in client_proj"><!--For Every Project in Project List-->
  <div class="accordion-heading" style="background-color:#EFF8FB">
    <a class="accordion-toggle" data-toggle="collapse" data-parent="#mainAccordion" href="#{{val.id}}" ng-click="disableEditor()">
      <div align="center">{{val.title}}</div>
    </a>
  </div>
  <div id="{{val.id}}" class="accordion-body collapse">
    <div class="accordion-inner" style="font-size:12px; background-color:white">
      <strong>Technologies Exposure:</strong><br/>
      <div ng-hide="editorEnabled">{{val.exposure}}</div>
      <div ng-show="editorEnabled">
        <textarea ng-show="editorEnabled" class="span12" ng-model="val.exposure" rows="12" style="resize:vertical"></textarea>
        <input type="text" name="tags" placeholder="Tags" class="tagsManager" /> 
```

它显示为普通输入，而不执行任何功能，例如在按下或输入后创建新标签。

谁能告诉我发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T14:51:47.083

1.创建一个自定义指令，作为 jQuery 插件的包装器：

```
angular.module('<YOUR APP OR MODULE>').directive('tagsManager', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.tagsManager();
            //whatever other logic would go here
        }
    };
}); 
```

然后从脚本中删除 tabsManager 的自动初始化（类似于`$('<SELECTOR>').tagsManager();`or `jQuery('<SELECTOR>').tagsManager();`）

最终，在您的 ng-repeat 中，将指令添加到输入元素（可选地添加其他属性——您可能必须在指令中为这些属性编程行为——如果需要的话）

```
<input tags-manager> 
```

这将使 AngularJS 在您的输入（通过自定义指令）在 DOM 中呈现之后初始化 tabsManager。

说得通？

# android - 无法从 json webservice 获取数据

> ID：15184004
> 
> 赞同：0
> 
> 时间：2013-03-03T08:47:48.697
> 
> 标签：android, json

我想从`jason webservice`，

JSON响应是：

```
{"content":[{"id":"1","asset_id":"62","title":"sample page","alias":"","introtext":"","fulltext":"Some Contents"},{"id":"2","asset_id":"62","title":"sample page2","alias":"","introtext":"","fulltext":"Some Contents"},{"id":"3","asset_id":"62","title":"sample page3","alias":"","introtext":"","fulltext":"Some Contents"}]} 
```

访问[这里](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)后 ，我以这种方式完成了：

```
private void parseData() {
    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(BASE_URL);

    try {
        // Getting Array of Contents
        contents = json.getJSONArray(TAG_CONTENTS);

        // looping through All Contents
        for(int i = 0; i < contents.length(); i++){
            JSONObject c = contents.getJSONObject(i);

            // Storing each json item in variable
            id = c.getString(TAG_ID);
            title = c.getString(TAG_TITLE);      
        }

        textView.setText(id + " " + title);
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

现在我得到了 id =`3`和 title = `sample page3`result 我怎样才能得到前两个值！！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:29:08.333

阿尔谢！！试试这个人！！

```
private void parseData() {
    // Creating JSON Parser instance
    MyJSONParser jParser = new MyJSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(BASE_URL);

    try {
        // Getting Array of Contents
        jsonArrar = json.getJSONArray(TAG_CONTENTS);
        List list = new ArrayList<String>();
        // looping through All Contents
        for(int i = 0; i < jsonArrar.length(); i++){
           // JSONObject c = jsonArrar.getJSONObject(i);

            String id1=jsonArrar.getJSONObject(i).getString(TAG_ID);                
            String title=jsonArrar.getJSONObject(i).getString(TAG_TITLE);               
            String fullText=jsonArrar.getJSONObject(i).getString(TAG_FULL_TEXT);                

            list.add(id1);
            list.add(title);
            list.add(fullText);
        }

        Iterator<String> iterator = list.iterator();
        StringBuilder builder = new StringBuilder();
        while (iterator.hasNext()) {
            String string = iterator.next();                
            builder.append(string+"\n");

        }

        textView.setText(builder);
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:50:48.297

你的线是`JSONObject`和不是`JSONArray`。

你应该这样使用它：

```
JSONObject jso = new JSONObject(line);
JSONArray jsa = new JSONArray(jso.getJSONArray("content")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:26:35.230

尝试这样的事情

// jsonData : 响应

List<String> 内容 = 新 ArrayList<String>();

字符串[] 值；

```
 try {

        JSONObject jsonObj = new JSONObject(jsonData);
        if (jsonObj.get(JSON_ROOT_KEY) instanceof JSONArray) {

            JSONArray array = jsonObj.optJSONArray(JSON_ROOT_KEY);
            for (int loop = 0; loop < array.length(); loop++) {
val = new String[loop];
JSONObject Jsonval = array.getJSONObject(loop);
val.Jsonval.getString(TAG_ID);
val.Jsonval.getString(asset_id); 
```

. . ETC

内容.add(val);

```
}
} 
```

}

# sql - 如何在查询中获取多个最大值/最小值的时间值

> ID：15184006
> 
> 赞同：1
> 
> 时间：2013-03-03T08:47:57.210
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的表包含以下值：
[quote_date],[total_time],[supA_demB],[demA_supB],[demB_supA],[supB_demA]

我想运行这样的查询：

```
SELECT quote_date
  ,min(demA_supB) as MinDemASupB
  ,max(demA_supB) as MaxDemASupB
  ,min(supA_demB) as MinSupADemB
  ,max(supA_demB) as MaxSupADemB
  ,min(demB_supA) as MinDemBSupA
  ,max(demB_supA) as MaxDemBSupA
  ,min(supB_demA) as MinSupBDemA
  ,max(supB_demA) as MaxSupBDemA
  FROM [dbo].[a_b_RatioTable]
  GROUP BY quote_date 
```

有没有办法将 total_time 值添加到此查询中的每个混合/最大值？
喜欢：

```
SELECT quote_date
  ,min(demA_supB) as MinDemASupB
  ,something as MinDemASupBTime
  ,max(demA_supB) as MaxDemASupB
  ,something as MinDemASupBTime... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:36:34.113

尝试这个，

```
SELECT quote_date
  ,min(demA_supB) as MinDemASupB
  ,(select total_time from [dbo].[a_b_RatioTable] where quote_date = r.quote_date and demA_supB = min(r.demA_supB)) MinDemASupBTotal
  ,max(demA_supB) as MaxDemASupB
  ,(select total_time from [dbo].[a_b_RatioTable] where quote_date = r.quote_date and demA_supB = max(r.demA_supB)) MaxDemASupBTotal
  ,min(supA_demB) as MinSupADemB
  ,(select total_time from [dbo].[a_b_RatioTable] where quote_date = r.quote_date and supA_demB = min(r.supA_demB)) MinSupADemBTotal
  ,max(supA_demB) as MaxSupADemB
  ,(select total_time from [dbo].[a_b_RatioTable] where quote_date = r.quote_date and supA_demB = max(r.supA_demB)) MaxSupADemBTotal
  ,min(demB_supA) as MinDemBSupA
  .......
  ,max(demB_supA) as MaxDemBSupA
  ,min(supB_demA) as MinSupBDemA
  ,max(supB_demA) as MaxSupBDemA
  FROM [dbo].[a_b_RatioTable] r
  GROUP BY quote_date 
```

注意：子查询可能会降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:08:41.507

只需添加另一列作为 total_time。它会正常工作。

```
,min(demA_supB) as MinDemASupB
,max(demA_supB) as MaxDemASupB
,min(supA_demB) as MinSupADemB
,max(supA_demB) as MaxSupADemB
,min(demB_supA) as MinDemBSupA
,max(demB_supA) as MaxDemBSupA
,min(supB_demA) as MinSupBDemA
,max(supB_demA) as MaxSupBDemA
,total_time 
```

# ios - iOS UILabel 中显示的行数

> ID：15184010
> 
> 赞同：1
> 
> 时间：2013-03-03T08:48:18.617
> 
> 标签：ios, objective-c, xcode, uikit, interface-builder

我有一个 UILabel 最多可以显示 2 行文本。我没有使用自动布局。在 IB 中，我将“lines”属性设置为 2。如何获取 Obj-C 中显示的行数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:12:36.513

简而言之：调用 UILabel 的**sizeWithFont** :，然后除以字体的**lineHeight**。

# actionscript-3 - AS3 如何永久删除一个对象？

> ID：15184012
> 
> 赞同：0
> 
> 时间：2013-03-03T08:48:36.663
> 
> 标签：actionscript-3

我创建了一个新形状，创建了一个侦听器，当对象碰到形状时启动一个函数，该函数清除形状的图形，删除侦听器并删除子对象。但看起来它会留下一些幽灵，当我的对象到达它的位置时仍然会触发。我不确定它为什么会发生，我认为 clear+remove 应该使它不可能 hitTest。但是不知何故，孩子们仍然相互堆积，最后一个创建的孩子触发了该功能。因此，如果您理解，请给我一个提示，如果不明白，请笼统地告诉我**什么是永久删除创建的形状的方法，所以它不算存在？**

一点细节。击中形状必须启动一个删除它的函数并创建一个具有相同功能的不同功能的同名新形状等。因此当前函数必须是我调用的那个，而不是最后一个，我的监听器删除。每次制作新形状可能会使记忆超负荷，而且我每次都会清理。我忘了什么吗？

```
fun0(){
  var bob:Shape = new Shape();
  addChild(bob);
  bob...drawRect...
  addEventListener(...,fun1)
  function fun1(){ if(hitTest...){
  bob...clear();
  removeChild(bob);
  removeEventListener(...,fun1)
  fun2();
  } 
 }

fun2(){
  var bob:Shape = new Shape();
  addChild(bob);
  bob...drawRect...
  addEventListener(...,fun3)
  function fun1(){ if(hitTest...){
  bob...clear();
  removeChild(bob);
  removeEventListener(...,fun3)
  fun0();
  } 
} 
```

等等，即使我删除了监听器，它也只会在我触发它后才看到 fun3。同样，我确实将对象移开，它不再 hitTest，然后清除 + 删除。如果您不明白或无法提供帮助，请不要生气，忽略这一点，我需要帮助，而不是我没有你聪明的信息。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:42:06.100

首先不要在函数内部声明函数。然后对事件监听器使用弱引用。

```
// params: eventName, listener, capturePhase, priority, useWeakReference
someObj.addEventListener("eventName",myFunct,false,0,true); 
```

您必须摆脱对该对象的任何引用，然后将其设置为 null

```
removeChild(bob); 
bob= null; 
```

之后GC会收集它！

编辑：

如果您继续进行 hitTest，例如在 enterFrame 上。通过检查对象的 .stage 属性来检查对象是否在舞台上。

```
if(bob.stage)
  {
    if(hitTest ...){};
  } 
```

# oracle - oracle过程中使用游标的动态查询

> ID：15184015
> 
> 赞同：3
> 
> 时间：2013-03-03T08:48:46.213
> 
> 标签：oracle, dynamic, procedure

我正在使用存储过程来使用游标选择记录。此过程获取记录 ID 作为输入。

这是代码：

```
create or replace
procedure GET_ITEM_DETAILS_ALL
(
  cur_out out sys_refcursor,
  PSTRING VARCHAR2 DEFAULT NULL
)
is
  query_string  VARCHAR2(1000);
Begin
  query_string := 'Select IT.SL_NO from ITEM_DETAILS IT where IT.SL_NO in (:sl) order by IT.SL_NO';
  OPEN cur_out FOR query_string USING PSTRING;
End; 
```

对于调用/测试程序，我使用以下代码：

```
VAR R REFCURSOR
EXEC GET_ITEM_DETAILS_ALL (:R, '4')
PRINT R 
```

问题是当我传递一个整数，如“4”或“2”时，程序返回数据，但当我传递“1,2”或“3,4”时，它显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-31T06:14:16.740

```
 OPEN cur_out FOR Select IT.SL_NO from ITEM_DETAILS IT where IT.SL_NO in (SELECT REGEXP_SUBSTR(sl,'[^,]+', 1, LEVEL) FROM DUAL CONNECT BY REGEXP_SUBSTR(sl, '[^,]+', 1, LEVEL) IS NOT NULL ) order by IT.SL_NO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:12:16.957

您不能使用一个绑定变量将值列表传递给查询。
传递带有逗号分隔列表的字符串后，您的查询将变得
`Select IT.SL_NO from ITEM_DETAILS IT where IT.SL_NO in ('1,2') order by IT.SL_NO`
不正确。
您应该手动将输入字符串转换为查询中的值列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:27:53.170

问题是 PSTRING 是单个变量而不是数组。所以你的陈述实际上等同于

```
.... where IT.SL_NO = PSTRING 
```

这就是为什么它在您通过时有效，`4`而在您通过时失败`1,2`。

以您的方式使用动态 SQL 没有任何价值（我们可以在不使用字符串的情况下打开引用游标）。但是，利用动态 SQL 是解决问题的一种方法：

```
query_string := 'Select IT.SL_NO from ITEM_DETAILS IT where IT.SL_NO in ('
                   ||PSTRING||
                   ') order by IT.SL_NO';
OPEN cur_out FOR query_string; 
```

或者，您可以使用字符串标记器将字符串转换为标记。不幸的是，Oracle 没有内置标准，但针对不同版本的数据库有各种解决方法。Adrian Billington[在他的网站上有一个很好的](http://www.oracle-developer.net/display.php?id=412)综述。使用其中一种方法可以让您放弃动态 SQL：

```
OPEN cur_out FOR select IT.SL_NO from ITEM_DETAILS IT 
   where IT.SL_NO in ( select * from table ( your_string_tokenizer( PSTRING ) ) ) 
   order by IT.SL_NO; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T12:15:38.290

解决方案如下：

```
create or replace procedure GETITEM_DETAILS_ALL

(
    cur_out out sys_refcursor,
    PSTRING VARCHAR2 DEFAULT NULL
 )

is

query_string  VARCHAR2(1000);

Begin

query_string := 'Select IT.SL_NO from ITEM_DETAILS IT where IT.SL_NO in (' || PSTRING || ') order by IT.SL_NO';

OPEN cur_out FOR query_string;

End; 
```

# php - php html解码字符串

> ID：15184021
> 
> 赞同：1
> 
> 时间：2013-03-03T08:49:26.067
> 
> 标签：php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T11:25:18.850

```
<!doctype html>

<html lang="en">
<head>
    <title>String Cleansing</title>
</head>
<body>
<?php
echo '<pre>';

// The below are the strings
echo $string_with_htmlent =
     "a detail of The School of Athens<!-- this should link to an article about the famous artwork -->, a fresco by Raphael";

echo '<br>';

echo $string_unicode = 
     "Aristotle by Francesco Hayez (1791";
?>&acirc;&euro;&quot;
<?php 

echo $string_unicode_c = "1882)";    
echo '<br>';

// The below is how you fixed
echo $a = html_entity_decode($string_with_htmlent); echo '<br>';

echo $b = htmlentities($string_unicode.$string_unicode_c);

echo '<br>';

// The below is how I code and you expect
$clean = $string_with_htmlent.' '.$string_unicode.' '.$string_unicode_c; 

var_dump(filter_var($clean,FILTER_SANITIZE_STRING));

echo '</pre>';
?>
</body>
</html> 
```

替代`html_entity_decode`和`htmlentities`是`FILTER_SANITIZE_STRING`。使用一个内置功能修复所有 html 实体代码和特殊字符。

# xml - XML 元素自动值更改

> ID：15184026
> 
> 赞同：1
> 
> 时间：2013-03-03T08:49:54.310
> 
> 标签：xml

嗨，这是一个巨大的文件，我需要将元素“AccumulatorFactor”的值更改为元素“价格”

示例：节点 Prepaid2Prepaid 中的价格为 60，因此元素“AccumulatorFactor”也应为 60。

```
<NodeCopy><Node>SC14
    <Condition>ServiceClass
        <Comment>SC 14 with access fees of 12500 for 30 days</Comment>
        <Values>14</Values>
    </Condition>
    <Node>Community CUG
        <Node>Prepaid2Prepaid
            <Condition>BooleanOperator
                <Operation>AND</Operation>
                <Condition>NumberList
                    <Type>0</Type>
                    <Number>75</Number>
                </Condition>
                <Condition>CommunityId
                    <Value>1-999</Value>
                </Condition>
            </Condition>
            <Tariff>Rate
                <UnitType>Time</UnitType>
                <Price>60.0
                    <Factor>60</Factor>
</Price>
                <Interval>1
                    <Factor>1</Factor>
</Interval>
                <UpdateType>Active</UpdateType>
                <AccumulatorFactor>0.0</AccumulatorFactor>
            </Tariff>
        </Node>
    </Node>
    <Node>A2A
        <Condition>NumberList
            <Type>0</Type>
            <Number>75</Number>
        </Condition>
        <Node>Price
            <Tariff>Rate
                <UnitType>Time</UnitType>
                <Price>163.2
                    <Factor>60</Factor>
</Price>
                <Interval>1
                    <Factor>1</Factor>
</Interval>
                <UpdateType>Active</UpdateType>
                <AccumulatorFactor>0.0</AccumulatorFactor>
            </Tariff>
        </Node>
    </Node>
    <Node>All Operators
        <Condition>NumberList
            <Type>0</Type>
            <Number>77,78
70
76
2911,1108,1177
79
71
3,4,2
121,185,200,91,888,971,2070,890,913,189
555,809</Number>
        </Condition>
        <Node>Price
            <Tariff>Rate
                <UnitType>Time</UnitType>
                <Price>178.8
                    <Factor>60</Factor>
</Price>
                <Interval>1
                    <Factor>1</Factor>
</Interval>
                <UpdateType>Active</UpdateType>
                <AccumulatorFactor>0.0</AccumulatorFactor>
            </Tariff>
        </Node>
    </Node>
</Node>
</NodeCopy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T06:37:06.907

```
 public void OverWriteXMLElement()
     {
        string AppFileurl = System.Web.HttpContext.Current.Server.MapPath(@"~/Config/GlobalConfig.aspx.cs.xml");
        XmlDocument xDoc = new XmlDocument();
        xDoc.Load(AppFileurl);

        string UserFileurl = System.Web.HttpContext.Current.Server.MapPath(@"~/Config/UserManagement.aspx.cs.xml");
        XmlDocument UserDoc = new XmlDocument();
        UserDoc.Load(UserFileurl);

        XmlNodeList aNodes = xDoc.SelectNodes("/Application/PageSetting/Pagination");
        XmlNodeList UNodes = UserDoc.SelectNodes("/UserManagement/PageSetting/Pagination");

        foreach (XmlNode unode in UNodes)           
        {
            XmlNode child1 = unode.SelectSingleNode("PageSize");

            if (child1.InnerText == "" || child1.InnerText == null)
            {
                foreach (XmlNode node in aNodes)
                {
                    child1.InnerText = node.SelectSingleNode("PageSize").InnerText;
                    UserDoc.Save(UserFileurl);
                }
            }
        } 
```

您可以在另一个 xml 文件的帮助下更改一个 xml 文件的 xml 元素。

# ios - 无法使用“ACAccountStore”登录时该怎么办？

> ID：15184029
> 
> 赞同：1
> 
> 时间：2013-03-03T08:50:14.647
> 
> 标签：ios, xcode, twitter, acaccount

我目前正在开发一个使用 ACAccountStore 访问 twitter 帐户以获取推文的应用程序。一切正常，但我不知道如果用户不向帐户授予承诺，我可以显示或做什么。

我的第一个想法是显示登录视图或切换到 iOS 设置，但这在 iOS 5.1 或更高版本中不再适用？有人有其他更好的解决方案吗？:)

最好的祝福

编辑：我不是在寻找整个授权码。仅针对用户不授予对帐户的访问权限的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:50:54.703

当用户不授予您访问权限时，只需显示一条错误消息“应用程序被拒绝访问 twitter”，然后忽略它 -> 假设您没有 twitter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:04:45.843

```
store = [[ACAccountStore alloc] init];

ACAccountType *twitterType =  [store accountTypeWithAccountTypeIdentifier: ACAccountTypeIdentifierTwitter]; 

// Request Access for Twitter Accounts
[store requestAccessToAccountsWithType:twitterType
  withCompletionHandler:^(BOOL granted, NSError *error){
   if(granted){
    // Handle Granted condition
} else{
    // We didn’t get access, output why not
    NSLog(@”%@”,[error localizedDescription]);
   }
}]; 
```

以上是请求的示例授权。

> 您可以在 else 部分获取错误描述，最好在警报视图中向用户显示错误描述，或者其他选项是要求用户通过设置应用程序允许访问该应用程序。

您无法以编程方式切换到设置应用程序。

# mysql - MySQL：简单的查询修改

> ID：15184033
> 
> 赞同：1
> 
> 时间：2013-03-03T08:50:38.910
> 
> 标签：mysql

有这三个表：

1.  帖子
2.  post_replies
3.  喜欢

这个查询正在返回我的帖子，他们的回复都很好。

```
SELECT posts.title, posts.num, posts.status, posts.category, posts.content, posts.member_num, COUNT( posts_replies.blyrb_num ) AS count, COUNT( likes.comment_num ) AS likes_count
FROM posts_replies
INNER JOIN posts ON ( posts_replies.blyrb_num = posts.num )
LEFT JOIN likes ON ( likes.comment_num = posts_replies.num )
WHERE posts.status <>3
AND posts.access = 'Public'
AND (
posts.title LIKE '%dress%'
OR posts.content LIKE '%dress%'
)
GROUP BY posts.num 
```

但问题是这个查询只返回有一些回复的帖子。我不想要这样的限制，我想要所有的帖子，不管他们有没有回复。

关于我在这里做错了什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:53:28.397

在“FROM”和您的第一个“JOIN”中交换表格，并将您的第一个“JOIN”更改为 LEFT JOIN，应该可以解决问题：

```
SELECT posts.title, posts.num, posts.status, posts.category, posts.content, posts.member_num, COUNT( posts_replies.blyrb_num ) AS count, COUNT( likes.comment_num ) AS likes_count
FROM posts
LEFT JOIN posts_replies ON ( posts_replies.blyrb_num = posts.num )
LEFT JOIN likes ON ( likes.comment_num = posts_replies.num )
WHERE posts.status <>3
AND posts.access = 'Public'
AND (
posts.title LIKE '%dress%'
OR posts.content LIKE '%dress%'
)
GROUP BY posts.num 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:53:48.820

要做的事情：

*   使用`LEFT JOIN`而不是`INNER JOIN`
*   交换表格：`POST`和`posts_replies`

询问，

```
SELECT  posts.title, 
        posts.num, 
        posts.status, 
        posts.category, 
        posts.content, 
        posts.member_num, 
        COUNT( posts_replies.blyrb_num ) AS count, 
        COUNT( likes.comment_num ) AS likes_count
FROM    posts
        LEFT JOIN posts_replies 
            ON ( posts_replies.blyrb_num = posts.num )
        LEFT JOIN likes 
            ON ( likes.comment_num = posts_replies.num )
WHERE   posts.status <> 3 AND 
        posts.access = 'Public'
        AND 
        (
            posts.title LIKE '%dress%'
            OR posts.content LIKE '%dress%'
        )
GROUP   BY posts.num 
```

# android - 带有 x86 图像的 Android 2.3.3 模拟器无法在“使用主机 GPU”的情况下运行

> ID：15184036
> 
> 赞同：7
> 
> 时间：2013-03-03T08:50:51.667
> 
> 标签：android, android-emulator, avd

我注意到，如果我在使用 Android 2.3.3 和 Intel x86 系统映像创建新虚拟设备时选中“使用主机 GPU”复选框，模拟器将无法运行，它显示黑屏，没有生命迹象，除了logcat 中的错误。根据我在网上找到的一些信息，在主机 GPU 上运行从未打算用于 2.3.3 图像，仅适用于 4.0.3+。但后来我找到[了这个答案](https://stackoverflow.com/questions/10179187/android-emulator-black-screen-with-gpu-emulation-yes)，作者声称在安装后成功运行它`ironhide`。但是 Ironhide，我从来没有机会使用过，也不知道它到底是什么，它只在 Linux 上可用。有什么方法可以在 Windows 上启用 x86 系统映像和主机 GPU 运行 2.3.3？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T00:59:00.933

要使用图形加速功能，您必须安装以下版本的 Android 开发工具： Android SDK Tools，Revision 17 或更高版本 Android SDK Platform API 15，Revision 3 或更高版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-30T07:50:04.477

只需取消选中“使用主机 GPU”，因为它适用于 Android 4+。即使您不使用主机 gpu 并且在安装 HAXM 并禁用动画时设置了足够的 RAM，模拟器在这种组合上也足够快。

# asp.net-mvc - MVC RedirectToAction 和自定义过滤器

> ID：15184042
> 
> 赞同：0
> 
> 时间：2013-03-03T08:51:18.007
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4

我的操作有一些自定义过滤器

```
 [CustomFilters.LibrarianAction]
    [CustomFilters.LibraryUserAction]
    public ActionResult Users()
    {
     // my action code
     ... 

    } 
```

当我使用

```
 @Html.ActionLink("users") 
```

我可以在 OnActionExecuting 上从此方法获取自定义过滤器：

```
 method.GetCustomAttributes(typeof(CustomFilters.LibrarianAction), true) 
```

但是当我使用

```
 RedirectToAction("users"); 
```

该操作不会返回任何带有代码的过滤器：

```
 method.GetCustomAttributes(typeof(CustomFilters.LibrarianAction), true) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:44:38.743

问题来自我的代码来比较动作名称。我没有使用 to lower() 与字符串进行比较。

# .htaccess - 除非搜索，否则使用 htaccess 重定向

> ID：15184045
> 
> 赞同：1
> 
> 时间：2013-03-03T08:51:34.293
> 
> 标签：.htaccess, search, redirect

我不确定这是否可能，但这就是发生的事情。

我目前有一个 .htaccess 规则将 example.com 重定向到 store.example.com

```
RewriteCond %{HTTP_HOST} example\.com [NC]
RewriteCond %{REQUEST_URI} ^/$
Rewriterule ^(.*)$ http://store.example.com/[L,R=301] 
```

这很好用，但是我的搜索查询不再有效。我想做的是将 example.com 重定向到 store.example.com ，除非我正在搜索。

示例搜索如下所示：

```
http://example.com/?s=my+search+query+string 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:54:46.713

你有没有尝试过：

```
RewriteCond %{HTTP_HOST} example\.com [NC]
RewriteCond %{QUERY_STRING} ^!(s=(.*))$
Rewriterule ^(.*)$ http://store.example.com/ [L,R=301] 
```

# c++ - c++ 指针转换帮助，void* 到布尔值

> ID：15184050
> 
> 赞同：2
> 
> 时间：2013-03-03T08:52:33.010
> 
> 标签：c++, pointers, plugins, casting

我目前正在学习 C++，并且在转换指针方面遇到了一些问题。首先，我不确定我正在尝试做的事情就是我想做的事情。

我正在尝试采用一个函数，该函数可以根据字符串参数将适当的指针返回到各种方法指针，然后使用方法指针。

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <vector>
using namespace std;

typedef void* (*plugin_function)(void*);

static class Plugin
{
public:
    static bool doBoolStuff(){
        return true;// A Simple function that returns true
    }
};

void* getFunction(string pluginName, string functionName)
{
    if(pluginName =="Bool"){
        return &Plugin::doBoolStuff;
            //If the string is right it should return a method pointer.
            //I think that void* has the ability to point to anything, I am trying
            //to use that functionality to create a system where I am able to set 
            //some parameters and get the appropriate method pointer.
    }else{
        return NULL;
    }
}

int main(int argc, _TCHAR* argv[])
{
    void* pluginFunction;
    pluginFunction = getFunction("Bool","");

    if(pluginFunction == &Plugin::doBoolStuff)cout<<"CastSuccesful!"<<endl;

    //This section right here is where my code is breaking.
    //
    // IntelliSense: expression preceding parentheses of apparent call must have              
    //(pointer-to-) function type   
    //c:\Users\Walter\Dropbox\Inscription\MethodCasting\MethodCasting\MethodCasting.cpp 
    //MethodCasting

    cout << "Bool function ->"<< pluginFunction()<<endl;
    cout << "--------------------------------"<<endl;
    system("pause");

} 
```

任何反馈都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:06:50.860

**编辑：**不是真的，对不起。正如@Stephen Lin 指出的那样，我没有阅读`static`修饰符......所以虽然你想要的对非静态成员函数不起作用，但它通常适用于静态成员使用`reinterpret_cast`（这种行为是实现定义的）：

```
class Plugin {
    public:
    static bool foo()
    {
        std::cout << "Foo called!" << std::endl;
        return true;
    }
};

void *get_func()
{
    return reinterpret_cast<void *>(&Plugin::foo);
}

int main()
{
    void *pluginFunction = get_func();
    (reinterpret_cast<bool (*)()>(pluginFunction))();
    return 0;
} 
```

*原帖：*

* * *

你不能。根据[这篇文章](http://sphaleron.blogspot.hu/2012/01/evil-c-5-member-function-pointer.html)：

> 但是，没有办法将`void *`back 转换为您可以实际使用的成员函数指针。

我自己试过了。实际上，所有的`static_cast`，`reinterpret_cast`甚至是旧的 C 风格的转换都拒绝工作 - 无论是 with `void *`，还是 with `bool (*)()`（是的，我什至尝试从非成员函数指针类型转换为成员函数类型）......

抱歉，C++ 似乎不允许我们这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:48:52.933

这取决于你的实现，如果你能做到这一点。在可移植的 C++ 中你不能。即使可以，您也需要显式转换（在这种情况下`reinterpret_cast<>`）来在不同的指针类型之间进行转换。

请注意，这不会扩展到真正的“方法”指针，即**非静态**成员函数指针。您不能在成员函数指针和对象指针或普通函数指针之间进行转换。**如果您只有**非静态成员函数指针 ，则可以使用我最后介绍的方法。

Portably`reinterpret_cast<>`可以在函数指针类型和对象指针类型之间自由转换——尽管在几乎所有情况下，除了转换回原始类型之外，对结果的任何使用都是未定义的。

对于对象指针类型和函数指针类型之间的转换，C++11 标准说（§5.2.10 [expr.reinterpret.cast]/8）：

> 有条件地支持将函数指针转换为对象指针类型或反之亦然。这种转换的含义是实现定义的，除非实现支持双向转换，将一种类型的纯右值转换为另一种类型并返回，可能具有不同的 cv 限定，应产生原始指针值。

因此，它取决于您的实现（并且应该在其文档中记录），如果将函数指针强制转换为`void *`编译并返回编译。唉，如果是这样，你应该得到预期的行为。

在您的代码中缺少演员表。您需要转换为泛型类型（在您的情况下`void*`），`getFunction`并且您需要转换回原始类型才能调用该函数。所以你需要知道原始类型`main()`：

```
void* pluginFunction = getFunction("Bool","");
// ....
cout << "Bool function ->"<< (reinterpret_cast<bool (*)()>(pluginFunction))()<<endl; 
```

一个更便携的解决方案是使用任意函数指针类型，例如`void (*)()`传递插件函数指针，这样你就有：

```
typedef void (*any_func_ptr)();

// If you wanted to use this for non-static member functions, you could do
//   struct AnyClass;
//   typedef void (AnyClass::*any_memfun_ptr)();

any_func_ptr getFunction(string pluginName, string functionName)
{
    if(pluginName =="Bool"){
        return reinterpret_cast<any_func_ptr>(&Plugin::doBoolStuff);
    }else{
        return NULL;
    }
}

int main(int argc, char* argv[])
{
    any_func_ptr pluginFunction = getFunction("Bool","");

    if(reinterpret_cast<bool (*)()>(pluginFunction) == 
         &Plugin::doBoolStuff)
             cout<<"CastSuccesful!"<<endl;

    cout << "Bool function ->"<< (reinterpret_cast<bool (*)()>(pluginFunction))()<<endl;

} 
```

# perl - Perl Win32::GUI 冻结

> ID：15184055
> 
> 赞同：1
> 
> 时间：2013-03-03T08:53:12.477
> 
> 标签：perl

我编写了一个脚本来连接到主机系统并使用该[`Win32::GUI`](https://metacpan.org/module/Win32%3a%3aGUI)模块运行一些命令以输入命令。

在进行过程中，GUI 会冻结并且在完成之前没有响应。

谁能告诉我解决方案？

# javascript - 如何使用网格显示来自 ajax 的数据源的工作网格？

> ID：15184058
> 
> 赞同：0
> 
> 时间：2013-03-03T08:53:39.150
> 
> 标签：javascript, ajax, dojo, dgrid

当我学习了关于 dgrid（一个新的 dojo 网格）的教程时，我已经学习了示例代码。
让我在这里选择一个列出：

```
require(["dgrid/Grid", "dojo/domReady!"], function(Grid){
var data = [
    { first: "Bob", last: "Barker", age: 89 },
    { first: "Vanna", last: "White", age: 55 },
    { first: "Pat", last: "Sajak", age: 65 }
];

var grid = new Grid({
    columns: {
        first: "First Name",
        last: "Last Name",
        age: "Age"
    }
}, "grid");
grid.renderArray(data);
}); 
```

我只想知道我们是否可以显示来自 Ajax 数据源的数据。如何实施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:31:20.460

与或[`dgrid/OnDemandGrid`](https://github.com/SitePen/dgrid/wiki/OnDemandList-and-OnDemandGrid)一起使用。[`dojo/store/JsonRest`](http://livedocs.dojotoolkit.org/dojo/store/JsonRest)[`dojo/store/Memory`](http://livedocs.dojotoolkit.org/dojo/store/Memory)

您可以在我对*Is it possible to filter data in a dgrid like you can in a datagrid 的*[回答](https://stackoverflow.com/questions/12010731/is-it-possible-to-filter-data-in-a-dgrid-like-you-can-in-a-datagrid-if-so-how/12198356#12198356)中找到一个工作示例？：http: [//jsfiddle.net/phusick/7gnFd/](http://jsfiddle.net/phusick/7gnFd/)

# sql-server-2008 - SSRS MDX 查询不适用于多值参数

> ID：15184061
> 
> 赞同：2
> 
> 时间：2013-03-03T08:53:58.980
> 
> 标签：sql-server-2008, reporting-services, mdx

我需要你的帮助！！

我想使用 SSRS 创建具有多值参数的报告。

所以，我写了这个 mdx 脚本：

```
WITH 
-- Geography metadata

MEMBER [Measures].[Geographie]
   AS StrToValue ( @SelectionGeographie + ".Hierarchy.Currentmember.Uniquename" )
MEMBER [Measures].[Geographie_Label]
   AS StrToValue( @SelectionGeographie + ".Hierarchy.CurrentMember.Member_Caption" )

-- Activity metadata

MEMBER [Measures].[Activite]
   AS StrToValue( @SelectionActivite + ".Hierarchy.Currentmember.Uniquename" )
MEMBER [Measures].[Activite_Label]
   AS StrToValue( @SelectionActivite + ".Hierarchy.CurrentMember.Member_Caption" )

-- Date metadata

MEMBER [Measures].[Temps]
   AS StrToValue( @Annee + ".Hierarchy.Currentmember.Uniquename" )
MEMBER [Measures].[Temps_Label]
   AS StrToValue( @Annee + ".Hierarchy.CurrentMember.Member_Caption" )

-- Perimetre metadata
MEMBER [Measures].[Perimetre]
   AS StrToValue( @Perimetre + ".Hierarchy.Currentmember.Uniquename" )
MEMBER [Measures].[Perimetre_Label]
   AS StrToValue( @Perimetre + ".Hierarchy.CurrentMember.Member_Caption" )

SELECT NON EMPTY {
 -- display the parameters  attributes on columns

 [Measures].[Geographie],
 [Measures].[Geographie_Label],

 [Measures].[Activite],
 [Measures].[Activite_Label],

 [Measures].[Temps],
 [Measures].[Temps_Label],

 [Measures].[Perimetre],
 [Measures].[Perimetre_Label],

 [Measures].[11 VA]

} ON COLUMNS, 

      ( STRTOSET ( "{" + @SelectionGeographie + "}") ,

        STRTOSET   ("{" + @SelectionActivite + "}" ))

ON ROWS

FROM [MyCube]

WHERE STRTOTUPLE ( "(" +@Annee + "," + @Perimetre + ")" ) 
```

但它适用于参数中的一个值，而不适用于多值参数。当我有多个值时，我的元数据成员中的结果为空。

任何想法 ？

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:48:42.963

> WITH -- 地理元数据成员 [Measures].[Geographie] AS "[Geographie]."+ @NiveauGeographie +".Currentmember.Uniquename"
> 
> 成员 [Measures].[Geographie_Label] AS "[Geographie]."+ @NiveauGeographie +".CurrentMember.Member_Caption"
> 
> SELECT NON EMPTY { [Measures].[Geographie], [Measures].[Geographie_Label], [Measures].[11 VA]
> 
> } 在列上，
> 
> ( STRTOSET ("{" + @SelectionGeographie + "}") ,
> 
> ```
> STRTOSET   ("{" + @SelectionActivite + "}" )) 
> ```
> 
> 在行
> 
> 来自 [MyCube]
> 
> WHERE STRTOTUPLE ("(" +@Annee + "," + @Perimetre + ")"

# java - 在要求我检查值的练习中遇到问题

> ID：15184063
> 
> 赞同：1
> 
> 时间：2013-03-03T08:54:34.550
> 
> 标签：java

我正在完成 Objects First With Java 中的练习（供测试前复习）。一个练习要求我创建一个 checkIndex 方法，我做得正确。下一部分要求我重写我的 listFile 和 removeFile 方法，以便它们使用我的 checkIndex 方法来确保已输入有效参数。我不知道如何做到这一点，并尝试了一些事情。一些帮助将不胜感激。谢谢。

```
public class MusicOrganizer
{
// An ArrayList for storing the file names of music files.
private ArrayList<String> files;

/**
 * Create a MusicOrganizer
 */
public MusicOrganizer()
{
    files = new ArrayList<String>();
}

/**
 * Add a file to the collection.
 * @param filename The file to be added.
 */
public void addFile(String filename)
{
    files.add(filename);
}

/**
 * Return the number of files in the collection.
 * @return The number of files in the collection.
 */
public int getNumberOfFiles()
{
    return files.size();
}

/**
 * List a file from the collection.
 * @param index The index of the file to be listed.
 */
public void listFile(int index)
{
        String filename = files.get(index);      //not sure
        System.out.println(filename);
    }

/**
 * Remove a file from the collection.
 * @param index The index of the file to be removed.
 */
public void removeFile(int index)
{
    if(index >= 0 && index < files.size()-1) {
        files.remove(index);
    }
}

public String getfive(){
    return files.get(4);
}

public void addNew(String whatIsYourFavourite){
    files.add(whatIsYourFavourite);
}

public void remove(){
    files.remove(2);
}

public void checkIndex(int check){
    if ((check >= 0) && (check <= files.size()-1)){

    }
    else{
        System.out.println("Valid range must be between 0 and -1");
    }

}

public boolean checkIndex2(int check2){
    if ((check2 >= 0) && (check2 <= files.size()-1)){
       return true;
    }
    else{
        return false;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:59:14.603

实际上这应该相对容易。假设您的代码对于删除和检查索引都是正确的，您可以使用 checkindex2 在 if 语句中返回一个布尔值。所以你有了

```
 public void removeFile(int index)
    {
        if(checkindex2(index))
 {
            files.remove(index);
        }
    } 
```

和列表

```
 public void listFile(int index)
        {
               if(checkindex2(index)){
                System.out.println(files.get(index));
            }
} 
```

# navigation - ZF2 为导航注册自定义助手

> ID：15184067
> 
> 赞同：2
> 
> 时间：2013-03-03T08:55:13.250
> 
> 标签：navigation, zend-framework2, acl, view-helpers

我正在使用*Zend Navigation*和*ACL*。我的用户可以有多个角色，它们彼此没有关系，但是*Zend Navigation*只接受一个角色并检查具有该角色的*ACL*，这对我不利。

如何为导航注册一个新的助手，以便我可以覆盖该`acceptAcl`方法。我试图创建和注册一个简单的*视图助手*，但没有奏效

```
class Menu extends \Zend\View\Helper\Navigation\Menu implements \Zend\ServiceManager\ServiceLocatorAwareInterface
{

    protected function acceptAcl(AbstractPage $page)
    {
        if (!$acl = $this->getAcl()) {
            // no acl registered means don't use acl
            return true;
        }

        $userIdentity = $this->getServiceLocator()->get('user_identity');
        $resource = $page->getResource();
        $privilege = $page->getPrivilege();

        $allowed = true;
        if ($userIdentity->id !== "1") {

            if ($acl->hasResource($resource)) {
                $allowed = false;
                foreach ($userIdentity->rolls as $roll) {
                    if ($acl->isAllowed($roll['id'], $resource)) {
                        $allowed = true;
                        continue;
                    }
                }
            }
        }

        return $allowed;
    }

    public function renderMenu($container = null, array $options = array())
    {
        return 'this is my menu';
    }

}

'view_helpers' => array(
    'invokables' => array(
        'myMenu' => 'Application\View\Helper\Menu',
    ),
), 
```

我如何注册这个助手以便导航知道它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-07T07:52:32.070

即使主题很旧，该解决方案在 ZF2 v2.3.3 中也不适用于我。

经过一番研究，我发现Navigation Helper没有共享，或者是twig模块搞砸了共享，如果我尝试在模块bootstrap中为Navigation添加自定义插件（例如新菜单），它只是无效。但是我在阅读 Navigation Helper 构造时发现了一件有趣的事情

> Zend\Navigation\View\HelperConfig.php

Navigation 插件管理器可以在 key 下的模块、全局或本地配置中进行配置`navigation_helpers`。这是使用插件扩展 Navigation 的一种简单方法。

前任 ：

> 模块.config.php

```
'navigation_helpers' => array (
    'invokables' => array(
        'menu' => 'Application\View\Helper\Navigation\Menu',
    ),
), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T10:19:03.413

`Navigation`视图助手注册在`ViewHelperPluginManager`. 所有导航助手（`Menu`等`Breadcrumbs`）都由单独的插件管理器管理。据我所知，您还不能覆盖配置中的导航助手。

尝试将以下内容添加到您的`Module.php`：

```
class Module
{
    public function onBootstrap($e)
    {
        $application = $e->getApplication();
        /** @var $serviceManager \Zend\ServiceManager\ServiceManager */
        $serviceManager = $application->getServiceManager();

        $pm = $serviceManager->get('ViewHelperManager')->get('Navigation')->getPluginManager();
        $pm->setInvokableClass('myMenu', '\Application\View\Helper\Menu');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-27T15:19:22.100

> 我的用户可以有多个角色，它们彼此没有关系，但是 Zend Navigation 只接受一个角色并检查具有该角色的 ACL，这对我不利。

这个问题很容易解决：只需为*这个用户*创建一个角色，它继承自真实角色。请参阅[官方文档](https://docs.zendframework.com/zend-permissions-acl/usage/#multiple-inheritance-among-roles)，并搜索引用角色“someUser”的段落，您应该将其理解为指的是*当前用户*。因此：角色应该被动态地添加到 ACL 中。

```
$roles = ['staff', 'editor'];
$this->acl->addRole(new Role('currentuser'), $roles); 
```

然后使用“currentuser”作为要检查的角色。

一个问题是您必须以正确的顺序列出“父角色”，即首先列出特权最少的角色，因为它们是以相反的顺序检查的。

您可以尝试使用类似以下代码段的内容来解决这个问题，这将忽略它无法识别的任何角色，并将它们保持在硬编码列表的顺序中。

```
# $userRoles is an array with the roles of the current user
$this->acl->addRole(new Role('currentuser'),
    array_intesect(['member', 'staff', 'editor', 'admin'], $userRoles)); 
```

# javascript - 单击此特定输入中的图像时如何发送输入的ID

> ID：15184068
> 
> 赞同：0
> 
> 时间：2013-03-03T08:55:20.413
> 
> 标签：javascript

我在每个输入中有 2 个输入和图像。当我单击输入中的图像时，我只想清除此输入中的文本。这要怎么做？

这是我的功能

```
function deleteText (id)
{
 //here i should get txtNameFirm ot txtNameOwner

var element = document.getElementsById(id);
element.value=" ";
} 
```

HTML

```
<div class="outer" >
    <input type="text" id = "txtNameOwner"  value="ENTER NAME OF OWNER"   /> 
    <img src="file:///C:/Users/gismo2/Dropbox/GISmoBusinessCatalogProject-Feb2013/IconResources/close_btn.png" onclick="deleteText('txtNameOwner')/>
</div>

<div class="outer" >
    <input type="text" id = "txtNameFirm"  value="ENTER NAME OF FIRM"   /> 
    <img src="file:///C:/Users/gismo2/Dropbox/GISmoBusinessCatalogProject-Feb2013/IconResources/close_btn.png" onclick="deleteText('txtNameFirm')" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:57:38.540

尝试这个

```
var element = document.getElementById(id);
element.value=''; 
```

你写`getElementsById`的是`getElementById` 应该工作。

# python - ASCII 字符串作为 Python 3 中 numpy 字符串数组的 dtype

> ID：15184069
> 
> 赞同：6
> 
> 时间：2013-03-03T08:55:24.477
> 
> 标签：python, arrays, string, numpy, python-3.x

NumPy 的`string`dtype 似乎与 Python 对应`str`，因此在 Python 2.x 和 3.x 之间发生了变化：

在 Python 2.7 中：

```
In [1]: import numpy as np

In [2]: np.dtype((np.str_, 1)).itemsize
Out[2]: 1

In [3]: np.dtype((np.unicode_, 1)).itemsize
Out[3]: 4 
```

在 Python 3.3 中：

```
In [2]: np.dtype((np.str_, 1)).itemsize
Out[2]: 4 
```

在这两种情况下，NumPy 的版本都是 1.7.0。

我正在编写一些我想在两个 Python 版本上工作的代码，并且我想要一个 ASCII 字符串数组（4x 内存开销是不可接受的）。所以问题是：

*   如何在 Python 3 中为特定长度的 ASCII 字符串（每个字符 1 个字节）定义 dtype？
*   我如何以在 Python 2 中也适用的方式来做到这一点？
*   额外的问题：我可以进一步限制字母表，例如`ascii_uppercase`，并为每个字符节省一点或两个吗？

我认为可能的答案是第一个问题的字符数组（即有一个字符数组而不是字符串数组）。好像我可以在构造一个时指定项目大小：

```
chararray(shape, itemsize=1, unicode=False, buffer=None, offset=0,
          strides=None, order=None) 
```

更新：不，`itemsize`实际上是字符数。但还是有的`unicode=False`。

这是要走的路吗？

它也会回答最后一个问题吗？

我如何实际使用它`dtype`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T08:29:15.487

您可以使用 'S' [typestr](http://docs.scipy.org/doc/numpy/reference/arrays.interface.html#arrays-interface)：

```
>>> np.array(['Hello', 'World'], dtype='S')
array([b'Hello', b'World'], 
      dtype='|S5') 
```

同样在 2.6/2.7`str`中别名为`bytes`（或`np.bytes_`）：

```
>>> np.dtype((bytes, 1)) # 2.7
dtype('|S1')
>>> np.dtype((bytes, 1)) # 3.2
dtype('|S1') 
```

并且`b''`支持文字：

```
>>> np.array([b'Hello', b'World']) # 2.7
array(['Hello', 'World'], 
      dtype='|S5')
>>> np.array([b'Hello', b'World']) # 3.2
array([b'Hello', b'World'], 
      dtype='|S5') 
```

# c# - 如何将 ConcurrentDictionary 与 WPF ListView 绑定？

> ID：15184070
> 
> 赞同：1
> 
> 时间：2013-03-03T08:55:27.720
> 
> 标签：c#, wpf, multithreading, data-binding

我对 ListView 和绑定都没有太多经验。

我有并发字典

其中密钥很长，而 Test 是一个具有多个公共属性的类。

我想要一个列表视图，其中的列显示其中一些属性（不需要编辑），并且当用户从列表中选择一个项目时，可以访问相应的 Test 对象。

我还想确保操作是线程安全的，因为我正在使用并发字典，其中任务可以随时向其中添加项目。

我正在使用 .Net Framework 4.5、Visual Studio 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:03:27.827

为此编写值转换器。在添加项目时，您只需通知整个 dict 视图模型（实现**INotifyPropertyChanged**）属性已更改，并且列表将被重新填充。但是您可以将 ConcurrentDictionary 包装在实现**INotifyCollectionChanged**的​​集合中。例子：[这里](https://devel.nuclex.org/framework/browser/Nuclex.Support/trunk/Source/Collections/ObservableDictionary.cs?rev=1473)和[这里](https://www.cryptool.org/trac/CrypTool2/browser/trunk/CrypPlugins/WorkspaceManager/View/Base/ObservableDictionary.cs?rev=2832)

# iphone - 如何让类似怪物的游戏在ios中运行

> ID：15184077
> 
> 赞同：-3
> 
> 时间：2013-03-03T08:57:15.327
> 
> 标签：iphone, ios, cocos2d-iphone, levelhelper

嗨，我是游戏开发的新手，任何人都可以指导我如何制作像[Monsters, Inc.](https://itunes.apple.com/us/app/monsters-inc.-run/id555724449?mt=8)这样的游戏。使用关卡助手或任何可以指导我的教程或软件运行 .type 游戏。直到现在我才看到关于关卡助手的教程，其中只显示了从右到左，从左到右，从上到下，从下到上，但我没有找到任何教程或任何玩家从右到左移动但在玩家改变位置时上下移动的东西，如这个游戏所以谁能告诉我这里也是游戏的视频链接[http://www.youtube.com/watch?v=RTSZOKQUk7Q](http://www.youtube.com/watch?v=RTSZOKQUk7Q)。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:49:14.097

您需要使用`COCOS2D`和来学习 iOS 开发`BOX2D`。您可以查看我在 cocos2d 中工作过的一款 iOS 游戏。

```
http://www.youtube.com/watch?v=30gHSRUU384 
```

但是在您的场景中，您必须先制作完整的地图。有些软件可用于 MAC。然后你必须学习一个操纵杆的例子，你可以用它来处理你的播放器。玩家的移动将取决于`JOYSTICK`。`JOYSTICK`GitHub 上也提供了示例。`This link will help you.`

```
https://github.com/cjhanson/SneakyJoystick 
```

将地图添加到场景中。意味着创建整个地图。你可以看看这个教程。

```
http://www.youtube.com/watch?v=cjduXkenf4w 
```

希望这会帮助你。

# windows - 使用多个 Git

> ID：15184078
> 
> 赞同：1
> 
> 时间：2013-03-03T08:57:22.167
> 
> 标签：windows, git, github

我有以下目录结构

```
root
root/framework (Yii)
root/protected/messages 
```

所有这个文件夹必须是单独的 git repos

我想做的是

1.  `root`并且`root/framework`必须是单独的回购。但

    *   `root/framework`只能拉，因为我没有对此存储库的推送访问权限。我的意思是当我拉父仓库时我想拉 yii，但当我推送父仓库时不想推送。

    *   另一个问题是，Yii（根/框架）的远程目录结构看起来像[http://screencast.com/t/mU1TgXuZDv](http://screencast.com/t/mU1TgXuZDv) 我只需要框架文件夹的内容。如何仅将此文件夹的内容拉入`root/framework`？

2.  制作`root/protected/messages`单独的 git repo 以便当我推拉`root`git repo 时，也可以为它做这件事。换句话说，与父母一到两个单独的遥控器一起推拉。

为了解决第二个问题，我在里面初始化了新的 repo，`root/protected/messages`但现在他们分别推拉。我的意思是，我希望他们一次向/从 2 个遥控器推送和拉取更改。无法弄清楚该怎么做。

我也不知道第一个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:59:05.177

1.  为了在父 git 存储库中创建一个单独且独立的 git 存储库，您需要查看 Git 子模块（[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)）。这些基本上允许您在一个目录中创建一个完全独立的 git 存储库，该目录本身就是一个 git 存储库。

2.  要创建子模块，命令是`git submodule add git://path/to/gitname.git folder-containing-the-inner-git`. 当然，在触发此命令之前，您需要 cd 进入父文件夹，在您的情况下将是`root`. 将是`git://path/to/gitname.git`git url`Yii`和.`folder-containing-the-inner-git``root/framework`

3.  为了提取整个 git repo 的特定文件夹，您可能需要按照 stackoverflow [How to pull specific directory with git](https://stackoverflow.com/questions/2425059/how-to-pull-specific-directory-with-git)上的这个问题的建议`Yii`进行尝试。我自己从未尝试过。 此外，你也可以做一个（[https://www.kernel.org/pub/software/scm/git/docs/v1.7.0/git-read-tree.html#_sparse_checkout](https://www.kernel.org/pub/software/scm/git/docs/v1.7.0/git-read-tree.html#_sparse_checkout)）。尽管您仍然需要获取整个 repo。`git checkout`
    `Git 1.7``sparse checkout`

4.  一旦你使用 git submodules inside 创建了一个单独的 git repo `root`，你将不得不`root/protected/messages`单独在里面推送和拉取 git。但是，您可以通过为内部存储库创建一个 git 挂钩 ( [http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks) ) 来自动化此过程`root`。钩子是一个脚本，可以在特定的 git 事件/操作（如提交、合并等）上执行。有关这些事件的完整列表，您可以参考此页面... [http://www.manpagez.com/man/ 5/githooks/](http://www.manpagez.com/man/5/githooks/)
    好像没有a `git push`or的事件`pull`。但是有一个事件`git merge`...... `post-merge`：

    > 这个钩子由 git merge 调用，当在本地存储库上执行 git pull 时会发生这种情况。该钩子采用单个参数，一个状态标志，指定正在完成的合并是否是壁球合并。如果由于冲突导致合并失败，则此钩子不会影响 git merge 的结果并且不会执行。
    > 
    > 该钩子可以与相应的预提交钩子一起使用，以保存和恢复与工作树相关的任何形式的元数据（例如：权限/所有权、ACLS 等）。有关如何执行此操作的示例，请参见 contrib/hooks/setgitperms.perl。

因此，您可以编写一个简单的 bash 脚本，例如：

`cd root/protected/messages
git pull origin master`

所以每次你从这个脚本中的外部仓库拉取时`root`都会被触发，你也可以拉取内部仓库的内容。但是，这将在每次合并时发生，而不仅仅是在拉取时发生的合并，因此您可能需要小心。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:06:14.497

您可以尝试更直接的方法：

*   初始化你的 git repo `root`；
*   将您添加`root/framework`到`.gitignore`其中；
*   转到那里`root/framework`并在那里初始化新的 git 存储库；

您将拥有 matroshka 风格的存储库。但是，坦率地说，它们比解决方案更难支持`git-submodules`，因为`root`repo 根本不知道其他 repo，并且所有`push`esh, `pull`s 都需要在每个 repo 中单独完成。

# php - 从父窗口提交 iframe 表单

> ID：15184082
> 
> 赞同：0
> 
> 时间：2013-03-03T08:57:46.930
> 
> 标签：php, javascript, iframe

```
<iframe id="frame1" name="frame1" align="center" src="committee_assign1.php" height="400" width="700">
                </iframe>

                    <center><input onClick="submitiframeform(); return false;" type="button" name="submit" value="Submit" />
                <script type="text/javascript">

function submitiframeform(){
    window.frames['frame1'].document.forms['fypassign'].submit();
}
</script> 
```

以上是主页名称committee_assign.php ..

下面是 iframe 调用委员会_assign1.php 的页面。

```
<?php
    include '../database.php';
    include 'valid_login.php';
       if(isset($_POST['submit'])) { 

    $continue = FALSE;
    $i = 0; 
    while ($continue == FALSE) { 
        if (isset($_POST['id_'.$i])) { 
            $fypcomm = $_POST['fypcomm_'.$i];
            $user = $_POST['id_'.$i];
            $sql = mysql_query(" UPDATE Lecturer SET LectFypCommittee = '$fypcomm' WHERE LectID = '$user' ") 
                or die(mysql_error());
            mysql_query($sql);
        } else
            {$continue = TRUE;}
        $i++;
    }

     echo ("<SCRIPT LANGUAGE='JavaScript'>

        window.location.href='../committee/committee_assign1.php'
        </SCRIPT>");

}

    ?>
<head>

</head>

<body>
<form id="fypassign" name="fypassign" method="post" action="" target="_self" onSubmit="">

                <?php

                $counter = 0;

                echo "<table class ='box'>";
                    echo "<thead>";
                    echo "<tr>";
                    echo "<th align='left' valign='top'>"."Lecturer Name"."</th>";
                    echo "<th align='left' valign='top'>"."FYP Committee"."</th>";    
                    echo "</tr>";

                    $sql = mysql_query(" SELECT * FROM Lecturer ORDER BY LectFypCommittee DESC, LectName ASC ") or die(mysql_error());
                    while($info = mysql_fetch_assoc($sql)) {
                        $idcount = "id_".$counter;
                        echo "<input type='hidden' name='$idcount' id='$idcount' value={$info['LectID']}  />";

                        echo "<tr>";

                        echo "<td>";
                            echo $info['LectName'];
                        echo "</td>";

                        echo "<td>";
                            $formname = "fypcomm_".$counter;
                            echo "<select name='$formname'>";
                            //to convert the flag value to user understandable language
                            if ($info['LectFypCommittee'] == '0'){
                                $dbfyp = 'No';
                            }
                            else $dbfyp = 'Yes';

                            echo "<option selected='selected' value='{$info['LectFypCommittee']}'>".$dbfyp."</option>";
                            if ($info['LectFypCommittee'] == '0'){
                                echo "<option value='1'>".'Yes'."</option>";
                            }
                            else echo "<option value='0'>".'No'."</option>";
                            echo "</select>";
                        echo "</td>";

                        echo"</tr>";
                        $counter++;
                    }

                    echo "</table>";
                ?>

                </form>

                </body> 
```

我单击父页面上的提交按钮，页面刷新，但值未更新。

有人可以在这里指导我吗？

很抱歉发布这么长的代码，我希望你们能更多地理解我在做什么。TQ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:02:29.573

您的commitment_assign.php 中没有`input`名为提交：

`if(isset($_POST['submit']))`

您必须检查以下内容：

`if(isset($_POST))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:04:32.267

您正在检查提交是否已发布，但您没有名为提交的输入。添加一个名为 submit 并带有一些值的输入，并检查该帖子提交是否存在。如果您不想看到额外的输入，可以将其隐藏。

if($_POST['submit']) 正在检查 post 数组中是否存在键为 'submit' 的值。$_POST 数组中的所有键和值分别是表单元素的名称和值。

# php - 处理大量数字时，PHP 代码需要很长时间才能执行

> ID：15184091
> 
> 赞同：0
> 
> 时间：2013-03-03T08:59:42.817
> 
> 标签：php, for-loop, execution, largenumber, prime-factoring

这是一个简单的程序，用于查找质数，以便在稍后阶段检查数字的除法。

我试图通过最初取数字的整数平方根来缩短它以分解复杂性。但是执行脚本仍然需要很长时间。我可以在我的代码中实现哪些其他更改以减少执行时间（我已经将最大执行时间设置为 5 分钟）

```
<?php
error_reporting(E_ALL);
$num = 600851475143;
//$sqrt_num = (int)sqrt($num);

for( $j = 2; $j <= $num; $j++ )
{
    for( $k = 2; $k < $j; $k++ )
    {
        if( $j % $k == 0 )
        {
        break;
        }

    }
    if( $k == $j )
    {
        //echo "Prime Number : ", $j, "<br>";
        if( $num % $j == 0 )
        {
        echo "Prime number : ", $j, "<br>";
        }
    }
} 
```

**编辑**刚刚评论了 sqrt 的行，因为这似乎是正确的..但循环仍然需要很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:57:33.353

减少此代码执行时间的最佳方法是删除它。每次运行时都没有必要计算每个素数——它们不会很快改变。

运行一次，将其写入文件或数据库，并在需要时使用。我个人将它放在一个数组中以备后用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:12:21.473

提高代码执行时间的一种方法是：

```
$num = 1000;

for($j = 2; $j <= $num; $j++)
{
    $cond = sqrt($j);
    for($k = 2; $k <= $cond; $k++)
    {
        if($j % $k == 0)
        {
        break;
        }

    }
    if($k > $cond)
    {
        echo 'Prime number: ' . $j . '<br>';
    }
} 
```

但是没有必要每次都从一开始就计算素数。您可以每隔 30 秒左右记住一次您所在的位置，将结果保存到数据库、文件或数组中，然后重新启动脚本，该脚本应该从停止的地方继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:47:25.940

这是通过试除法分解的基本算法；我不懂PHP，所以我只给出伪代码：

```
function factors(n)
    f, fs := 2, []
    while f * f <= n
        while n % f == 0
            append f to fs
            n := n / f
        f := f + 1
    if n > 1 append n to fs
    return fs 
```

有比找到数的因数更好的方法，但即使是这种简单的方法也足以解决您试图解决的 Project Euler 问题；你应该在不到一秒钟的时间内就有一个解决方案。当您准备好使用素数进行更多编程时，我谦虚地在我的博客上推荐这篇[文章。](http://programmingpraxis.com/essays)

# verilog - Verilog 有符号乘法“丢失”有符号位

> ID：15184096
> 
> 赞同：1
> 
> 时间：2013-03-03T09:00:21.110
> 
> 标签：verilog

我正在编写一个使用乘法器模块的代码，当其中一个输入为负数时，它会返回奇怪的答案。我猜这与 Verilog 如何处理带符号的数字有关，并且模块没有将结果正确存储在“注册退出”声明中。我所有的 input/output/wire/reg 声明都已签名，所以我不确定我缺少什么以及我还需要做什么来告诉 Verilog 来处理这个问题。对不起初学者的问题！

例如，

当 X[0] 为 1610 且 Theta1[1] 为 -123 时，我从乘法器模块得到的结果是：6914897148530

以下是我的代码的相关部分：

```
module mult(in1, in2, out, mult_start); // multiplication module

input signed    [32-1:0]    in1, in2;
input               mult_start;

output      signed [64-1:0] out;
reg         signed [64-1:0] out;

always @(in1 or in2 or mult_start)
begin
    if (mult_start)
    begin
        out <= (in1 * in2) & {64{1'b1}};
    end
    else
        out <= out;
end
endmodule

module child_one (clk, rst_b, sig_start, Input_X, Input_Theta1)

// Internal Variables Memory
reg signed [`REG_LENGTH-1:0] Theta1 [0:217-1];
reg signed [`REG_LENGTH-1:0] X [0:216-1];
wire signed [`OUT_LENGTH-1:0] prod_1 [0:217-1];
reg signed [`OUT_LENGTH-1:0] prod_sum;
wire signed [`OUT_LENGTH-1:0] sig_result;

mult mult_001 (X[0], Theta1[1], prod_1[1], mult_start); 
mult mult_002 (X[1], Theta1[2], prod_1[2], mult_start); 
mult mult_003 (X[2], Theta1[3], prod_1[3], mult_start); 
mult mult_004 (X[3], Theta1[4], prod_1[4], mult_start); 

always @(posedge clk or negedge rst_b)
begin
    if (sig_start == 1) 
    begin
        if (state == 4'b0000)
        begin
            state <= 4'b0001; // initialize state variable to zero
            k <= 0;
            result_done <= 0;
            index <= 0;
        end
        else if (state == 4'b0001) // Start Multiplication Operation
        begin
            k               <= result_done ?      0     : k + 1;
            result_done     <= result_done ?      1     : (k == 10);
            state       <= result_done ?      4'b0010   : 4'b0001;
            mult_start  <= result_done ?      1'b1  : 1'b0; 
        //mult_start <= 1'b1;
        //state <= 4'b0010;
        end
        else if (state == 4'b0010) // Stop Multiplication Operation
        begin
            k <= 0;
            result_done <= 0;
            mult_start <= 0;
            state <= 4'b0011;
        end
    end
end 
```

端模块

谢谢，

费萨尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T02:55:01.830

感谢所有的帮助和建议。为 mult 模块编写单独的测试平台有助于找到解决方案。

我的问题出在多模块中。由于我的输入是 32 位长，所以 mult 输出将是 32*2+1 = 65 位长。我的输出端口“out”仅分配为 64 位长，当答案为负数时会导致符号问题。将其分配为 65 位长解决了我的问题。

# javascript - 一键调用javascript和c#方法

> ID：15184097
> 
> 赞同：0
> 
> 时间：2013-03-03T09:00:30.833
> 
> 标签：javascript, asp.net, button

我有一个 javascript 方法和一个 c# 方法，现在单击一个按钮，我想同时调用它们。

首先，我想调用名为 as 的 c# 方法，`'Find_Direction'`因为它可以输入 onclick，然后我将在名为 as 的 javascript 方法之后调用`calcRoute`。

我正在尝试这个，但没有任何运气：

```
<asp:Button id="Button1" UseSubmitBehavior="False" value="GetDirections" onclick="calcRoute" OnClientClick="Find_Direction" runat="server"/> 
```

弹出以下错误：

```
Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

Compiler Error Message: CS1061: 'ASP.findroute_aspx' does not contain a definition for 'calcRoute' and no extension method 'calcRoute' accepting a first argument of type 'ASP.findroute_aspx' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:02:59.443

您在 onClick 事件中指定 javascript 函数名称。所以把C#函数名放在这里

C#代码：

```
 protected void  Find_Direction (object sender, EventArgs e)
 {
   // do your work

   // Register your javascript function

    Page.ClientScript.RegisterStartupScript(this.GetType(), "script", "  <script>calcRoute();</script>");
 } 
```

你的标记：

```
<asp:Button id="Button1" value="GetDirections" onclick="Find_Direction" runat="server"/> 
```

案例 2：在服务器端函数之前调用 javascript 函数

Javascript函数

```
 function calcRoute() {

        alert('test')
        return true;
    } 
```

你的标记

```
 <asp:Button id="Button1" value="GetDirections" onclick="Find_Direction " OnClientClick="return Find_Direction()" runat="server"/> 
```

通过这种方式，您可以调用 javascript 函数，然后调用服务器端，但请确保您从 javascript 函数返回 true 以调用服务器端函数。

我希望，现在你可以解决你的问题。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T09:03:40.363

您需要在代码隐藏（aspx.cs 或 aspx.vb 文件）中有一个名为`calcRoute`.

如果您希望 JS 先执行，您应该能够按照您的方式进行操作，OnClientClick 指向 JS 函数， OnClick 指向 C#/VB 方法（事件处理程序）。

如果您想确保在您的 C# 代码之后调用 JS，您应该处理后端的点击，然后通过注册启动脚本将 JS 发送回浏览器。除非您使用更新面板，否则这将导致完整的回发。在您的事件处理程序中，您可以注册一个启动脚本`Page.RegisterStartupScript`以将 javascript 命令发送回浏览器。在这种情况下，您根本不想使用 OnClientClick。

# angularjs - 在另一个中需要一个指令控制器

> ID：15184098
> 
> 赞同：0
> 
> 时间：2013-03-03T09:00:58.520
> 
> 标签：angularjs, angularjs-directive

这些是我试图在另一个指令中要求一个指令的控制器的方式。

1) [http://jsfiddle.net/Xarm2/1/](http://jsfiddle.net/Xarm2/1/)

2) [http://jsfiddle.net/82UKq/1/](http://jsfiddle.net/82UKq/1/)

在这两种情况下，您都可以在 firebug 控制台中看到，所需指令的控制器要么是空对象，要么`undefined`是空对象。

1) 我如何在`d2`指令中访问“d1Cntrl”。

2）请让我知道一个用例需要我在另一个指令中要求一个指令控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:30:27.560

1.  请参阅 John Lindquist 关于[指令到指令通信的精彩截屏视频](http://egghead.io/video/angularjs-directive-to-directive-communication/)

2.  例如，如果您有一个输入元素，您希望在其中应用两个自定义验证，其中一个验证仅应在第一个验证通过时运行（例如，模式匹配验证仅应在元素具有值时激活）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:59:54.860

很少有人认为我愿意把它放在这里

1）指令没有创建自己的范围，例如。 `<superhero strength>The Hulk</superhero> <superhero flight speed strength>Superman</superhero> <superhero speed>The Flash</superhero>`

这三个指令将共享相同的范围，除非我们在定义中明确说明`scope:true`或。如果您我们没有创建新的范围，那么最后一个超级英雄将生效。`scope:{}``superhero`

2）如果我们在`superhero`级别创建一个新范围，则相同的范围由兄弟指令共享，如`strength`等`flight`。

3) 如果我们在另一个指令中需要一个指令控制器，则使用`this`关键字在指令控制器上定义的 api 将暴露给请求指令。请注意，在控制器范围内定义的方法将`$scope`不可见。

如果造句有误或观点有误，请随时编辑。

# java - 如何在java中比较两个结果集的值

> ID：15184100
> 
> 赞同：6
> 
> 时间：2013-03-03T09:01:49.060
> 
> 标签：java, resultset

我有两张桌子。并且这些表具有相同的架构，由用户 ID、用户名组成。我想检查和中是否有任何共同点`username`。`table1``table2`

```
 rs1 = statement.executeQuery("select username from table1")
 rs2 = statement.executeQuery("select username from table2") 
```

我的逻辑是：

*   `while(rs1.next())`
*   将 的值`rs1`与 的每个值进行比较`rs2`。
*   `If`找到匹配的打印值之一`else`打印两个值。

有没有办法在java中实现这一点......请任何人帮助我......谢谢......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:05:13.827

我会使用一条 SQL 语句：

```
select table1.username from table1, table2 where table1.username = table2.username 
```

这只会返回出现在两个表中的用户名，因此不需要后处理。

这种构造称为[内连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)。如果您还想识别`table1`和/或唯一的用户名`table2`，您可以使用[外连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_joins)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:37:43.950

伪代码：

```
if ( A.type = B.type )
{
    PRINT same type

    if ( A.format = B.format )
    {
        PRINT same format

        if ( A.value = B.value )
        {
            PRINT same value
        }
        else
        {
            PRINT different value
        }
    }
    else
    {
        PRINT different format
    }
}
else
{
    PRINT different type
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:46:00.813

您可以通过 SQL 语句 IN 和 NOT IN 来解决它，或者您可以尝试这样的事情：

```
public boolean compareResultSets(ResultSet resultSet1, ResultSet resultSet2) throws SQLException{
        while (resultSet1.next()) {
            resultSet2.next();
            ResultSetMetaData resultSetMetaData = resultSet1.getMetaData();
            int count = resultSetMetaData.getColumnCount();
            for (int i = 1; i <= count; i++) {
                if (!resultSet1.getObject(i).equals(resultSet2.getObject(i))) {
                    return false;
                }
            }
        }
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:21:05.467

我举一个例子来解决这个问题：

```
rs1 = statement.executeQuery("select username from table1")
rs2 = statement.executeQuery("select username from table2")

while(rs1.next()) {
// Compare till rs1 reachs its last record.
  while(rs2.next()) {
     if() {
       // Do your code here...
     }
  }

// this will move resultSet cursor to the first position.
rs2.first();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-04T05:21:11.657

一种方法可能是：-

```
String query = "(" + query1 +") intersect ("+ query2 + ")"; 
```

无论如何，相交操作中的位置将为您提供公共列。

PS :- 我知道这个问题很老，但它可能对某人有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-10-02T13:57:26.973

这个答案已经由 Akash5288 给出并由 Pavel Smirnov 编辑。这对我来说就像魔术一样有效。我无法对原始答案进行点赞或评论，这就是我重新发布它的原因。非常感谢。我这边只有一个编辑：**rs2.beforeFirst();** 会比**rs2.first() 更好地工作；**.

我举一个例子来解决这个问题：

```
rs1 = statement.executeQuery("select username from table1")
rs2 = statement.executeQuery("select username from table2")

while(rs1.next()) {
// Compare till rs1 reachs its last record.
  while(rs2.next()) {
     if() {
       // Do your code here...
     }
  }

// this will move resultSet cursor to the first position.
rs2.first();
} 
```

# actionscript-3 - 无法访问影片剪辑中的儿童

> ID：15184101
> 
> 赞同：0
> 
> 时间：2013-03-03T09:01:53.310
> 
> 标签：actionscript-3, flash, robotlegs

在 flash cs6 中，我绘制了一个 flash 影片剪辑，其中我将导出设置设置为 abc.Gameboard。在游戏板内部，我有一堆片段（符号：片段），我将它们导出为 abc.Piece - 基类都设置为 MovieClip 和类文件。该作品具有诸如命中，过度等框架标签。我的问题是访问代码中的作品，以便我可以例如。gotoAndPlay("mine") - 目前该事件仅触发一次，这是板上的最后一块。我可以在最后一块上设置框架动作，但想弄清楚如何为每一块做同样的事情。

我像这样在舞台上添加了一个游戏板

```
var gb:Gameboard = new Gameboard();
gb.name = "gb001";
contextView.addChild(gb); 
```

然后

```
contextView.addEventListener(Event.ADDED, thingAdded);

private function thingAdded(event:Event):void
{
    var type:String = event.target.toString();
    switch(type)
    {
        // this runs only once - i want it to run for each piece that is inside the symbol
        case "[object Piece]":

        var p:MovieClip = event.target as Piece;
        p.gotoAndPlay("mine");
        break;
    }
} 
```

或者如果有更好的方法会很棒..这看起来很笨重

**编辑：**有关我如何尝试构建游戏板的更多信息在 illustrator 中绘制形状集合 - 将其遮盖（游戏板区域）。以图形形式导入 Flash。将图形转换为几个影片剪辑符号（因此 JSFL 可以向下钻取并访问蒙版片段） - 运行 JSFL 脚本并创建 00 片段。然后我在 Piece 和 Gameboard 上设置导出设置，并将 Gameboard 添加到 contextView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:49:30.567

实际上，我曾经写过一篇关于这个的[整篇文章](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)。`ADDED`对于添加的每个 DisplayObject，该事件应触发一次。你确定你没有使用`ADDED_TO_STAGE`，它不会冒泡吗？如果您正在使用`ADDED_TO_STAGE`，那么您需要将 useCapture 标志设置为 true 以使其为所有孩子触发。

如果您想让 RobotLegs 参与该过程，可能更好的方法是简单地为您希望以不同方式表现的每个特定按钮创建一个“标记”类，然后为每个将管理行为的类注册一个中介. Robotlegs 已经内置了用于监听 ADDED_TO_STAGE 并执行此操作的钩子。

但是，您也可以考虑将 Flash IDE 用于它的用途，即把东西放在舞台上。在这种情况下，您的 GameBoard 实例将在您的主文档类的构造函数中准备好，您可以使用它做任何您想做的事情。

MPO 是Gameboard*外部*的逻辑不应该知道或关心它在内部是如何工作的，老实说，它可能甚至不应该是 GameBoard 的责任来处理简单的东西，比如状态和事物上的按钮。这应该取决于按钮本身。如果按钮不需要切换或任何超出 SimpleButton 处理的东西，您可以在库中将按钮实例声明为 Button 而不是 MovieClip，并免费获得所有这些东西，而不是自己编写代码。

成为一名优秀的编码员的一部分是能够找出*不*编码所有内容的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:55:09.057

in their Gameboard inside Piece? I want know exactly your Gameboard Structure.

If you're right. try this:

```
function thingAdded(e:Event):void
{
    if(!e.target is Gameboard) return;

    var mc:Gameboard = Gameboard(e.target);

    var i:int = 0;
    while(i<mc.numChildren)
    {
        if( mc.getChildAt(i) is Piece)
        {
            var piece:Piece = Piece(mc.getChildAt(i));

            piece.gotoAndStop(2);
        }
        i++;
    }
} 
```

Here is my Sample code: [Gameboard](http://www.datafilehost.com/download-3dbad823.html)

# jquery - jquery 只渲染一次，第二次它不会再次渲染，只显示前一个

> ID：15184102
> 
> 赞同：1
> 
> 时间：2013-03-03T09:01:53.617
> 
> 标签：jquery, ruby-on-rails, views, partial-views, renderpartial

我必须通过 jquery 为我的场景附加部分我无法使用 ajax 渲染部分，因为它需要控制器的交互并且我被限制不使用控制器。

所以我正在这样做

```
$('#button_add').click(function(){

  $('#content_form_div').append("
    <%= j render(:partial=> 'pages/content/call_text_phone',
:locals => @locals.merge!(counter: cookies[:counter] + 1 ),
 :formats=>[:html]) %>");
   }); 
```

它第一次渲染部分，但第二次它实际上并没有渲染部分。

在不使用 ajax 的情况下执行此操作的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:16:38.100

要重新渲染屏幕上的任何内容，您需要重新加载它（或在 javascript 中重新创建它）给我看，您似乎嵌入了静态 HTML，并且脚本按照它的指示进行操作。它呈现静态 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:49:47.970

在我自己的解决方案上花费了时间之后，由于代码混乱和更多代码行，事情变得疯狂。

对于嵌套表单，我将其作为我的解决方案，因为它也不需要控制器的交互。

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

还有一件事，我在 jquery 中添加了 getRandomInt 来创建唯一的 id，这对于避免在没有时差的情况下立即创建的字段的时间戳重复是必要的。

```
function add_fields(link, association, content) {
 // I changed below line by adding getRandomInt method to assure unique id. 
  var new_id = new Date().getTime() + getRandomInt(1, 5000);
  var regexp = new RegExp("new_" + association, "g")
  $(".all_fields").append(content.replace(regexp, new_id));
}

function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

# highcharts - Highcharts：动态设置 y 轴最大值和最小值，而不是在创建时

> ID：15184103
> 
> 赞同：49
> 
> 时间：2013-03-03T09:01:56.020
> 
> 标签：highcharts

简短的问题：创建图表后，有没有办法`min/max`在 Highcharts 中设置。我知道`y: {min: 100,max: 200}`图表初始化时的初始设置，但我想稍后动态更改最大值/最小值。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-03-03T09:46:41.723

我想[setExtremes](http://api.highcharts.com/highcharts/Axis.setExtremes)是最好的方法。语法应该是：`chart.yAxis[0].setExtremes(100,300);`

如果一个人只想设置最小值然后`chart.yAxis[0].setExtremes(100,null);`为我工作。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-06-04T11:22:17.580

我们也可以使用更新方法

```
chart.yAxis[0].update({
    max: 100
}); 

chart.xAxis[0].update({
    max: 150
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:02:02.680

您也可以使用 tickPositioner [http://api.highcharts.com/highcharts#yAxis.tickPositioner](http://api.highcharts.com/highcharts#yAxis.tickPositioner)来定义最小/最大值和这些值之间的刻度。

# objective-c - UIView 动画后 UIView 内的 UIButton 不起作用

> ID：15184104
> 
> 赞同：11
> 
> 时间：2013-03-03T09:02:10.190
> 
> 标签：objective-c, uibutton, uiviewanimation

我在这个论坛上看到了很多问题，这些问题给出了这个主题的答案“UIView 中的 UIButton，当动画不起作用时”，但是在尝试了类似的答案之后

```
a) UIViewAnimationOptionAllowUserInteraction to the options
b) subView.setUserInteractionEnabled = YES
c) [button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

他们都不为我工作:-(

这是场景。应用程序处于横向模式，名为 menuView 的 UIView 放置在 x=480,y=0 处。它的高度=200，宽度=150。因此，当我点击右上角的按钮时，会执行以下代码

```
- (IBAction)showMenu {
    [menuView setUserInteractionEnabled:YES];
    [optionsButton setUserInteractionEnabled:YES];
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseOut |  UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         self.view.frame = CGRectOffset(self.view.frame, 0, 200);
                     }
                     completion:NULL];
} 
```

输出？：视图正在出现，但 menuView 中的 optionsButton 不可点击。我连接了一个事件，做了一个 NSLog(@"Options button clicked")，但什么也没发生:-(

请告诉我我做错了什么？

**更新：**当我将“menuView”子视图放在 self.view 中时，然后在运行并单击 optionsButton 时，我会收到 NSLog 消息。仅当我将 menuView 的 origin.x 指定为 480 及以上时，它才不起作用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-03T12:06:31.793

如果您可以看到*UIButton*，则它的*userInteractionEnabled*（默认为 YES！）已设置，并且其父视图在整个层次结构中的*userInteractionEnabled*为 YES - 您应该能够与它进行交互。

动画永远不会改变你的*userInteractionEnabled*属性！所以你在那里做的事情根本没有必要。如果您尝试在动画**期间**启用交互- 这是一个不同的故事，只是传递给动画消息的一个选项。

因此，如果这不是您的问题（并且可能不是），那么我猜超级视图的一个框架正在裁剪*UIButton*！

现在你看，如果*UIButton*（或任何*UIView*）在*UIView*的框架之外，它仍然是可见的，除非在父视图上设置了*clipsToBounds*。

这种情况的结果是：你可以看到我，但你不能碰我。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-27T19:38:19.050

在我的情况下，缺少对包含视图高度的约束导致视图高度为 0。按钮在视图下方可见，但不可触摸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-01T14:54:38.567

对我来说，这完全是关于动画代码本身被忽视的错误。在调用我的新高度的地方我实际上是在调用我的新宽度，在调用我的新宽度的地方我实际上是在调用我的新高度，因此导致 UIView 超长但超窄，从而将所有内容推到中心视野之外，视野之外。

*   将您的 UIViews 背景颜色更改为红色，以便您可以实际看到它的动画位置。

*   如果您的 UIView 在另一个视图中，请打开`clipSubviews`以便您只能看到`subView`.

*   运行你的项目。

如果您的 UIView 不是其正常的高度和宽度，则很可能您忽略了动画调用中的一些代码。

确保您`x, y, width, height`在动画代码中以正确的顺序显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T06:53:53.240

就我而言，我的动画过渡似乎尚未完成。我忘了把`completeTransition:Bool`我的 `animateTransition:context`方法放在最后。

# asp.net - 使用 css 设置 kendoui 样式文本框的宽度

> ID：15184106
> 
> 赞同：3
> 
> 时间：2013-03-03T09:02:22.687
> 
> 标签：asp.net, css, asp.net-mvc, kendo-ui

我知道您可以更改文本框的宽度

```
@Html.TextBoxFor(m => m.LoginId, new { @class = "k-textbox", style="width:400px" }) 
```

但我想要一个更整洁的方法。

我尝试将其添加到新的 css 文件中

```
.k-textbox .small {
    width: 50px !important;
}
.k-textbox .medium {
    width: 120px !important;
}
.k-textbox .large {
    width: 320px !important;
} 
```

在我的cshtml文件中

```
@Html.TextBoxFor(m => m.LoginId, new { @class = "k-textbox medium" }) 
```

但这不起作用。文本框的大小仍然保持不变

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T09:07:27.317

你的 CSS 定义是错误的。

`.k-textbox .medium`意味着您有一个 DOM 元素，`class="k-textbox"`并且在该 DOM 元素内有另一个元素，`class="medium"`而您的情况并非如此。只需去掉 CSS 规则中的空格：

```
.k-textbox.small {
    width: 50px !important;
}
.k-textbox.medium {
    width: 120px !important;
}
.k-textbox.large {
    width: 320px !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T14:05:37.133

这真的很晚了，但我认为这个话题的重要更新......

如果您在带有 Bootstrap 的 MVC 4/5 Web 应用程序中 - 您不想指定宽度，因为这会破坏引导程序的“响应”能力。

您需要向 TextBox 添加一个类以将其设置为 100% 的宽度，并将其放置在您希望的任何 Bootstrap 宽度列的 div 中：

例如，我的wide-full类是：

```
.wide-full {
    width: 100%;
} 
```

现在，假设您在剃刀表单上的地址模型中有一个城市字段......

```
<div class="row">
    @Html.LabelFor(model => model.City, new { @class = "control-label col-sm-2 col-md-2 col-lg-2" })
   <div class="col-sm-4 col-md-4 col-lg-4">
        @Html.TextBoxFor(model => model.City, new { @class = "text-box single-line wide-full" })
        @Html.ValidationMessageFor(model => model.City)
    </div>
</div> 
```

现在，当查看设备发生变化时，您的文本框会根据您的响应式设计做出反应并处理新的所需宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-21T06:37:16.587

我正在使用剑道，并且已将其添加到剃须刀应用程序的 _layout 页面中，效果很好：

```
<style>
        .k-numerictextbox {
            width: 100%;
        }

        .k-datetimepicker {
            width: 100%;
        }

        .k-textbox {
            width: 100%;
        }
    </style> 
```

# javascript - Javascript 错误：我的第一行输入意外结束，没有明显问题，但我收到一条消息，整个画布停止

> ID：15184109
> 
> 赞同：0
> 
> 时间：2013-03-03T09:02:42.920
> 
> 标签：javascript, syntax-error

我把整个东西都放进去了，以防我进入 chrome 并寻找错误，但它也没有工作，所以我检查了一下，显然第一行有问题。我保留了前 6 行并删除了所有其他内容，然后它工作正常，所以我去了 SublimeText2 并在代码中搜索了每个 ) 和 }。

```
var canvasBg = document.getElementById('canvasBg');
var ctxBg = canvasBg.getContext('2d');

var canvasJet = document.getElementById('canvasJet');
var ctxJet = canvasJet.getContext('2d');

var jet1;
var fps = 17;
var drawInterval;

var imgSprite = new Image();
imgSprite.src = 'SpriteSheet.png'
imgSprite.addEventListener('load',init,false);

function init() {
    drawBg();
    startDrawing();
    jet1 = new Jet();
    document.addEventListener('keydown',checkKeyDown,false);
    document.addEventListener('keyup',checKeyUp,false);
}

function draw() {
    jet1.draw();
}

function startDrawing() {
    stopDrawing();
    drawInterval = setInterval(draw,fps);
}

function stopDrawing() {
    clearInterval(setInterval);
}

Jet.prototype.draw = function() {
    clearCtxJet();
    ctxJet.drawImage(imgSprite,this.srcX,this.srcY,this.width,this.height,this.drawX,this.drawY,this.width,this.height);

};

function Jet() {
    this.srcX = 0;
    this.srcY = 0;
    this.drawX = 200;
    this.drawY = 200;
    this.width = 96;
    this.height = 30;
    }

function drawJet() {
}

function drawBg() {

    ctxBg.drawImage(imgSprite,96,0,800,500,0,0,800,500)

}

function clearCtxBg() {
    ctxBg.clearRect(0,0,800,500);
}

function clearCtxJet() {
    ctxJet.clearRect(0,0,800,500);
}

function checkKeyDown(e) {

    var keyID = (e.keyCode) ? e.keyCode : e.which;
    if (keyID === 38) { // 38 is up key
        alert('up arrow was pressed');
        e.preventDeafault();
    }

    if (keyID === 39) { // 39 is right key
        e.preventDeafault();
    }

    if (keyID === 40) { // 40 is down key
        e.preventDeafault();
    }

    if (keyID === 37) { // 37 is left key
        e.preventDeafault();
    }

function checkKeyup(e) {

    var keyID = (e.keyCode) ? e.keyCode : e.which;
    if (keyID === 38) { // 38 is up key
        alert('up arrow was pressed');
        e.preventDeafault();
    }

    if (keyID === 39) { // 39 is right key
        e.preventDeafault();
    }

    if (keyID === 40) { // 40 is down key
        e.preventDeafault();
    }

    if (keyID === 37) { // 37 is left key
        e.preventDeafault();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:18:25.683

很高兴在[http://jsfiddle.net中看到完整的代码](http://jsfiddle.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:16:19.290

我假设您只显示部分代码，因此无法知道这是否是实际错误，但 checkKeyup 和 checkKeydown 都缺少右括号。

我建议为 Sublime Text 2 安装[Package Control](http://wbond.net/sublime_packages/package_control)，然后使用它来安装[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)，它将能够为您检查您的代码并指出缺少的分号和大括号。

# php - 用php创建文本图像

> ID：15184115
> 
> 赞同：1
> 
> 时间：2013-03-03T09:03:35.307
> 
> 标签：php, image, imagettftext

我正在使用以下代码：

```
<?php
 $im = ImageCreate(350, 70);
 $white = ImageColorAllocate($im, 0xFF,0xFF,0xFF);
 $fontColor = ImageColorAllocate($im, 0xF2,0x67,0x22);
 ImageTTFText ($im, 20, 0, 10, 40, $fontColor, '/home/squareli/public_html/cookingessence.com/fonts/TektonPro-BoldExt.otf', $text); 
 Header('Content-Type: image/png');
 ImagePNG($im);
?> 
```

我想获取此代码并将其保存在自己的 .php 文件中。我希望能够通过我网站上的其他页面访问此文件。我想为每个页面分配 $text 不同的变量。这可能吗？

我目前可以使用以下方法通过其他页面访问 php 代码：

```
<img src="code-page-name.php"> 
```

我的问题是我找不到为 $text 分配变量的方法。我能够做到这一点的唯一方法是将名称直接放入上述代码或加载特定页面并在 URL /code-page-name.php?text=Name%On%The%Page 中添加变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T18:48:12.453

原因`$_SESSION`是不可靠的。但这是最好和最简单的解决方案。

**代码页名称.php**

```
<?php
session_start();
if(isset($_SESSION["text"])) {
$text = $_SESSION["text"];
}
else {
$text = "Default Text";
}
$im = ImageCreate(350, 70);
$white = ImageColorAllocate($im, 0xFF,0xFF,0xFF);
$fontColor = ImageColorAllocate($im, 0xF2,0x67,0x22);
ImageTTFText ($im, 20, 0, 10, 40, $fontColor, '/home/squareli/public_html/cookingessence.com/fonts/TektonPro-BoldExt.otf', $text);
Header('Content-Type: image/png');
ImagePNG($im);
?> 
```

**其他页面名称.php**

```
<?php
session_start();
$_SESSION["text"] = "WhatEver";
?>
<img src="code-page-name.php" /> 
```

请记住将`session_start()`函数放在任何 html 标记之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:06:26.133

你可以通过get发送文本。

```
code-page-name.php?text=blah 
```

比你可以访问它

```
$_GET[text] 
```

您在 url 中发送的任何内容都可以通过 $_GET 访问，并且您可以发送多个变量。例如`code-page-name.php?text=blah&color=red&color2=green`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:08:07.023

是的，使用会话。它将类似于验证码。您可以将 $text 用作变量，并将其一次写入图像。

```
#file1.php
session_start();
$text = $_SESSION['text'];
//draw the image here

#file2.php
session_start();
echo $_SESSION['text']; 
```

# visual-c++ - Windows XP 和 Win 7 在使用清单文件加载 DLL 方面的区别

> ID：15184120
> 
> 赞同：1
> 
> 时间：2013-03-03T09:04:04.873
> 
> 标签：visual-c++, manifest, dll

我正在使用 .Net 4 组件，该组件使用子目录中的 .manifest 文件创建激活上下文（通过互操作）。

`AppDir`

 ````
- App.exe (.Net 4)
- App.dll (.Net 4)
---- SubDir
-------- lib.dll (Native x86)
------- lib.manifest 
````  ````
 activationContext = new NativeMethods.ACTCTX();
    activationContext.cbSize = Marshal.SizeOf(typeof(NativeMethods.ACTCTX));
    activationContext.lpSource = this.ManifestFileName;
    activationContext.dwFlags = 4;
    activationContext.lpAssemblyDirectory = new System.IO.FileInfo(this.ManifestFileName).Directory.FullName;
    contextHandle = NativeMethods.CreateActCtx(ref activationContext);
    int winError = Marshal.GetLastWin32Error(); 
```

当前目录 = AppDir

清单路径 = .\SubDir\lib.manifest

在 Win 7 中，SubDir/lib.dll 被加载并执行得很好。

在 Win XP 清单文件加载正常但系统然后尝试加载 AppDir/lib.dll，而不是 AppDir/SubDir/lib.dll

我已经通过 ProcMon 验证了这一点。如果我将 SubDir 中的所有内容复制到 AppDir 并指向 AppDir/lib.manifest，它在 XP 即当前目录中工作正常。

我需要做什么才能使 XP 在 SubDir 中加载 lib.dll？`

# asp.net-mvc - 如何使用 ASP.NET MVC 实现站点地图路径？

> ID：15184123
> 
> 赞同：0
> 
> 时间：2013-03-03T09:04:17.643
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用 ASP.NET MVC 4，尝试在页面上显示站点地图路径，例如：主页 > 客户 > 订单 > 详细信息。除了[MvcSiteMapProvider 之外](https://github.com/maartenba/MvcSiteMapProvider "MvcSiteMapProvider")，还有其他方法可以实现“动态”站点地图路径吗？

我想知道是否可以跳过 XML 站点地图文件并动态创建站点地图路径（在运行时）。因为我只需要“面包屑”，而不是网站菜单。如果有示例代码显示人们如何实现它，那就太好了。

# django - Django 1.5：adminmedia 和 django-filebrowser-no-grappelli

> ID：15184130
> 
> 赞同：0
> 
> 时间：2013-03-03T09:05:33.857
> 
> 标签：django, django-templates, django-filebrowser, django-1.5

我尝试在 Django 1.5 中使用 django-filebrowser-no-grappelli。问题是：在 Django 1.5 中，模板标签库 adminmedia 被删除，它只包含已弃用的模板标签 {% admin_media_prefix %}。Django-filebrowser-no-grappelli 在模板中使用 adminmedia：

```
{% adminmedia %}
<link rel="stylesheet" type="text/css" href="{% custom_admin_media_prefix %}css/forms.css" /> 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:18:19.810

行，

设置.py：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    .....
    'django.core.context_processors.static',
) 
```

然后全部更改，`{% adminmedia %}`上。`{% static %}``{% custom_admin_media_prefix %}``{{ STATIC_URL }}`

为所有添加引号`{% url 'someting' %}`（1.5 中的新语法）。也许它不是绝对正确的，但它正在工作。

但是，我无法将文件浏览器添加到 TinyMCE :( 为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:44:01.857

看，{% url %} 标签在语法上有一些缺点：当你输入`{% url app.views.view %}`它时，它可以通过两种方式读取：

1.  您在 app.views 中有您的视图功能
2.  您有变量或对象“​​app”，其中包含名为“views”和“view”的方法或键或属性。

这是模棱两可的，所以从 django 1.5 开始，您应该像字符串一样定义视图位置： `{% url 'app.views.view' %}`。

顺便说一句，我认为没有`django-filebrowser-no-grappelli`支持 django 1.5 的分支。我希望它会很快

# models - 有限状态机如何进行除法？

> ID：15184131
> 
> 赞同：4
> 
> 时间：2013-03-03T09:05:43.793
> 
> 标签：models, state-machine, fsm, computation

我正在学习关于计算模型的课程，目前我们正在做有限状态机。我的任务之一是画出一个执行 3 除法的 FSM；为了简化模型，机器只接受 3 的倍数。我不确定这到底是如何工作的，特别是因为我想象 FSM 只输出单个二进制值。你们能否举出例子（除以 2 或 4）或提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:41:23.517

![用于除以 3 的 FSM](../Images/1042581380b47f6a8b9d4ab72da1d3bb.png)

这就是你所需要的，我认为（抱歉图片不好）。'E' 代表 epsilon/lambda/no-output。边缘的标签表示“输入/输出”。对于读取的每个符号，还有一个相应的输出，可能是 lambda（无输出）。

# ios - 在 UIView 外部（而不是内部）添加边框

> ID：15184133
> 
> 赞同：90
> 
> 时间：2013-03-03T09:06:12.123
> 
> 标签：ios, uiview, border

如果使用视图中的代码添加视图的边框，例如

```
self.layer.borderColor = [UIColor yellowColor].CGColor;
self.layer.borderWidth = 2.0f; 
```

边框被添加到视图中，如下所示： ![在此处输入图像描述](../Images/97e181faae823cf3ae515cc52a9e3b1e.png)

右视图是原始视图，可以看到，边框视图的黑色区域小于原始视图。但我想要得到的是原始视图之外的边框，如下所示：![在此处输入图像描述](../Images/de72005d9c0f7347cfbdd9f2058b1cb8.png). 黑色区域等于原始区域，我该如何实现？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-03-03T09:23:31.787

不幸的是，您不能简单地设置一个小属性来将边框与外部对齐。它与内部对齐绘制，因为 UIViews 默认绘制操作在其边界内绘制。

想到的最简单的解决方案是在应用边框时将 UIView 扩展边框宽度的大小：

```
CGFloat borderWidth = 2.0f;

self.frame = CGRectInset(self.frame, -borderWidth, -borderWidth);
self.layer.borderColor = [UIColor yellowColor].CGColor;
self.layer.borderWidth = borderWidth; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-11-06T09:03:31.250

好的，已经有一个公认的答案，但我认为有更好的方法来做到这一点，你只需要有一个比你的视图大一点的新层，并且不要将它掩盖到视图层的边界（实际上是默认行为）。这是示例代码：

```
CALayer * externalBorder = [CALayer layer];
externalBorder.frame = CGRectMake(-1, -1, myView.frame.size.width+2, myView.frame.size.height+2);
externalBorder.borderColor = [UIColor blackColor].CGColor;
externalBorder.borderWidth = 1.0;

[myView.layer addSublayer:externalBorder];
myView.layer.masksToBounds = NO; 
```

当然，这是如果您希望您的边框为 1 个单位大，如果您想要更多，您可以相应地调整`borderWidth`图层的框架。这比使用稍大一点的第二个视图要好，因为 a`CALayer`比 a 轻，`UIView`并且您不必修改 的框架`myView`，这很好，例如如果`myView`是 a`UIImageView`

**注意：**对我来说，模拟器上的结果并不完美（该层并不完全位于正确的位置，因此该层有时在一侧较厚）但正是真实设备上所要求的。

**编辑**

其实我在**NB**里说的问题只是因为我把模拟器的屏幕缩小了，正常大小是绝对没有问题的

希望能帮助到你

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-11-07T22:48:51.800

通过上述公认的最佳答案，我体验到了这样**不好的**结果和难看的边缘：

[![没有贝塞尔路径的边框](../Images/19be3e38c052aa2868cdf0a765d4139e.png)](https://i.stack.imgur.com/vwrfF.png)

因此，我将与您分享我的 UIView **Swift**扩展，它使用 UIBezierPath 作为边框轮廓 - 没有难看的边缘（受[@Fattie](https://stackoverflow.com/a/41962342/3013992)启发）：

[![与贝塞尔路径的边界](../Images/970a5a5af0ac50f57da89093f3b09b98.png)](https://i.stack.imgur.com/USW9O.png)

```
//  UIView+BezierPathBorder.swift

import UIKit

extension UIView {

    fileprivate var bezierPathIdentifier:String { return "bezierPathBorderLayer" }

    fileprivate var bezierPathBorder:CAShapeLayer? {
        return (self.layer.sublayers?.filter({ (layer) -> Bool in
            return layer.name == self.bezierPathIdentifier && (layer as? CAShapeLayer) != nil
        }) as? [CAShapeLayer])?.first
    }

    func bezierPathBorder(_ color:UIColor = .white, width:CGFloat = 1) {

        var border = self.bezierPathBorder
        let path = UIBezierPath(roundedRect: self.bounds, cornerRadius:self.layer.cornerRadius)
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        self.layer.mask = mask

        if (border == nil) {
            border = CAShapeLayer()
            border!.name = self.bezierPathIdentifier
            self.layer.addSublayer(border!)
        }

        border!.frame = self.bounds
        let pathUsingCorrectInsetIfAny =
            UIBezierPath(roundedRect: border!.bounds, cornerRadius:self.layer.cornerRadius)

        border!.path = pathUsingCorrectInsetIfAny.cgPath
        border!.fillColor = UIColor.clear.cgColor
        border!.strokeColor = color.cgColor
        border!.lineWidth = width * 2
    }

    func removeBezierPathBorder() {
        self.layer.mask = nil
        self.bezierPathBorder?.removeFromSuperlayer()
    }

} 
```

例子：

```
let view = UIView(frame: CGRect(x: 20, y: 20, width: 100, height: 100))
view.layer.cornerRadius = view.frame.width / 2
view.backgroundColor = .red

//add white 2 pixel border outline
view.bezierPathBorder(.white, width: 2)

//remove border outline (optional)
view.removeBezierPathBorder() 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-03-02T19:44:57.973

对于 Swift 实现，您可以将其添加为 UIView 扩展。

```
extension UIView {

    struct Constants {
        static let ExternalBorderName = "externalBorder"
    }

    func addExternalBorder(borderWidth: CGFloat = 2.0, borderColor: UIColor = UIColor.whiteColor()) -> CALayer {
        let externalBorder = CALayer()
        externalBorder.frame = CGRectMake(-borderWidth, -borderWidth, frame.size.width + 2 * borderWidth, frame.size.height + 2 * borderWidth)
        externalBorder.borderColor = borderColor.CGColor
        externalBorder.borderWidth = borderWidth
        externalBorder.name = Constants.ExternalBorderName

        layer.insertSublayer(externalBorder, atIndex: 0)
        layer.masksToBounds = false

        return externalBorder
    }

    func removeExternalBorders() {
        layer.sublayers?.filter() { $0.name == Constants.ExternalBorderName }.forEach() {
            $0.removeFromSuperlayer()
        }
    }

    func removeExternalBorder(externalBorder: CALayer) {
        guard externalBorder.name == Constants.ExternalBorderName else { return }
        externalBorder.removeFromSuperlayer()
    }

} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-03-03T12:08:58.003

那么没有直接的方法可以做到这一点您可以考虑一些解决方法。

1.  像你一样改变和增加框架并添加边框颜色
2.  在当前视图后面添加一个尺寸较大的视图，使其显示为边框。可以作为自定义视图类
3.  如果您不需要明确的边界（清晰的边界），那么您可以依靠阴影来达到目的

    ```
    [view1 setBackgroundColor:[UIColor blackColor]];
    UIColor *color = [UIColor yellowColor];
    view1.layer.shadowColor = [color CGColor];
    view1.layer.shadowRadius = 10.0f;
    view1.layer.shadowOpacity = 1;
    view1.layer.shadowOffset = CGSizeZero;
    view1.layer.masksToBounds = NO; 
    ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-03T09:20:08.710

在添加边框之前，使用边框宽度增加视图框架的宽度和高度：

```
float borderWidth = 2.0f
CGRect frame = self.frame;
frame.width += borderWidth;
frame.height += borderWidth;
 self.layer.borderColor = [UIColor yellowColor].CGColor;
 self.layer.borderWidth = 2.0f; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-25T09:42:33.540

斯威夫特 5

```
extension UIView {
    fileprivate struct Constants {
        static let externalBorderName = "externalBorder"
    }

    func addExternalBorder(borderWidth: CGFloat = 2.0, borderColor: UIColor = UIColor.white) -> CALayer {
        let externalBorder = CALayer()
        externalBorder.frame = CGRect(x: -borderWidth, y: -borderWidth, width: frame.size.width + 2 * borderWidth, height: frame.size.height + 2 * borderWidth)
        externalBorder.borderColor = borderColor.cgColor
        externalBorder.borderWidth = borderWidth
        externalBorder.name = Constants.ExternalBorderName

        layer.insertSublayer(externalBorder, at: 0)
        layer.masksToBounds = false

        return externalBorder
    }

    func removeExternalBorders() {
        layer.sublayers?.filter() { $0.name == Constants.externalBorderName }.forEach() {
            $0.removeFromSuperlayer()
        }
    }

    func removeExternalBorder(externalBorder: CALayer) {
        guard externalBorder.name == Constants.externalBorderName else { return }
        externalBorder.removeFromSuperlayer()
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-29T04:51:51.193

我喜欢**@picciano**的解决方案 如果您想要爆炸圆形而不是方形，请将**addExternalBorder**函数替换为：

```
func addExternalBorder(borderWidth: CGFloat = 2.0, borderColor: UIColor = UIColor.white) {
        let externalBorder = CALayer()
        externalBorder.frame = CGRect(x: -borderWidth, y: -borderWidth, width: frame.size.width + 2 * borderWidth, height: frame.size.height + 2 * borderWidth)
        externalBorder.borderColor = borderColor.cgColor
        externalBorder.borderWidth = borderWidth
        externalBorder.cornerRadius = (frame.size.width + 2 * borderWidth) / 2
        externalBorder.name = Constants.ExternalBorderName
        layer.insertSublayer(externalBorder, at: 0)
        layer.masksToBounds = false

    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-16T01:46:00.250

实际上有一个非常简单的解决方案。只需像这样设置它们：

```
view.layer.borderWidth = 5

view.layer.borderColor = UIColor(red: 1, green: 1, blue: 1, alpha: 0.5).cgColor

view.backgroundColor = UIColor(red: 1, green: 1, blue: 1, alpha: 0.25).cgColor 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-29T07:19:38.157

我喜欢@picciano 和@Maksim Kniazev 的解决方案。我们还可以使用以下方法创建环形边框：

```
func addExternalAnnularBorder(borderWidth: CGFloat = 2.0, borderColor: UIColor = UIColor.white) {
    let externalBorder = CALayer()
    externalBorder.frame = CGRect(x: -borderWidth*2, y: -borderWidth*2, width: frame.size.width + 4 * borderWidth, height: frame.size.height + 4 * borderWidth)
    externalBorder.borderColor = borderColor.cgColor
    externalBorder.borderWidth = borderWidth
    externalBorder.cornerRadius = (frame.size.width + 4 * borderWidth) / 2
    externalBorder.name = Constants.ExternalBorderName
    layer.insertSublayer(externalBorder, at: 0)
    layer.masksToBounds = false
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-28T21:50:01.493

在 Storyboard 中，我如何在我的 UI 视图（主 - SubscriptionAd）周围放置边框是将其放置在另一个 UI 视图（背景 - BackgroundAd）中。Background UIView 的背景颜色与我想要的边框颜色相匹配，而 Main UIView 的每一侧都有约束值 2。

我将背景视图链接到我的 ViewController，然后通过更改背景颜色来打开和关闭边框。

[![嵌套 UIView 的图像，周围有 Top View 2px 约束，使其更小而不是更大](../Images/31b75fc3fb3cb254740bf0a5534d7b5e.png)](https://i.stack.imgur.com/yXdpS.png)

# eclipse - 为团队编程设置 egit 存储库

> ID：15184141
> 
> 赞同：2
> 
> 时间：2013-03-03T09:07:11.523
> 
> 标签：eclipse, git, egit

我正在尝试找出为多个开发人员设置 egit 存储库的最佳方式。

我发现了一些为每个开发人员设置独立存储库的论据，然后建议通过将相应的外部上游存储库设置为例如开发人员 A 的 Eclipse 中的开发人员 B 来合并文件，以便 A 可以拉取并与 B 合并。但是 A 然后需要一直将 repo 改回他自己的。并且在设置中切换上游仓库非常麻烦。

或者，所有开发人员都可以在不同的分支中处理同一个 repo - 然后合并会更容易，因为没有人必须去设置并更改上游 repo。另一方面，这也有点“危险”，因为每个开发人员都在不受限制地开发同一个仓库（所以我听说了）

从长远来看，哪种方式更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:37:46.820

从长远来看，拥有*一个*上游存储库更容易管理。

每个开发人员都可以在本地创建自己的分支。
他们应该同意一个共同的分支来推动。它可以是主分支，也可以是功能分支（如果其中一些正在与特定功能协作）。

这个想法是，在每次推送之前，`pull --rebase`从上游 repo 到该分支，以便在上游/分支之上重播您的本地工作（您尚未推送的提交）（`git pull --rebase`将获取然后将您的本地工作重新定位在刚刚获取的内容）。
这样，开发人员只会推送将在上游合并为快进合并的提交。

在 EGit 术语中，这`pull --rebase`是在您[创建跟踪分支](http://wiki.eclipse.org/EGit/User_Guide#Branch_Creation_Dialog)时配置的。

![拉变基](../Images/2977ad1a3b6f405431758c2f1ecabd45.png)

> Rebase：拉取时，将从上游获取新的更改，并更新远程跟踪分支。然后当前本地分支将重新基于更新的远程跟踪分支

# asp.net - 可以在 ASP.NET 用户控件中使用 void async 方法吗？

> ID：15184147
> 
> 赞同：11
> 
> 时间：2013-03-03T09:08:04.500
> 
> 标签：asp.net, asynchronous, user-controls, void

我已经`async void`在 ASP.NET Web 窗体页面上成功使用了方法。但是，当我尝试在 Web 用户控件中使用相同的方法，然后将此 Web 用户控件放入具有`async="true"`设置的页面时，我不断收到此错误：

> 此时无法启动异步操作。异步操作只能在异步处理程序或模块内或在页面生命周期中的某些事件期间启动。如果在执行页面时发生此异常，请确保将页面标记为 <%@ Page Async="true" %>。

所以问题是，`void async`方法可以在 Web 用户控制中使用并嵌入到启用异步的 Web 表单页面中吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T21:25:39.820

如果它在页面上，您可以让控件调用异步方法。请参见下面的示例：

**页面.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Page.aspx.cs" Inherits="AsyncDEmo.Page" Async="true" %>

<%@ Register Src="~/Control.ascx" TagPrefix="uc1" TagName="Control" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <uc1:Control runat="server" id="Control" />
    </form>
</body>
</html> 
```

Page.aspx 的代码隐藏为空

**控制.ascx**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Control.ascx.cs" Inherits="AsyncDEmo.Control" %>

<span id="TaskMessage" runat="server">
      </span> 
```

**控制代码隐藏**

```
protected void Page_Load(object sender, EventArgs e)
    {
        // Define the asynchronuous task.
        Samples.AspNet.CS.Controls.SlowTask slowTask1 =
          new Samples.AspNet.CS.Controls.SlowTask();
        Samples.AspNet.CS.Controls.SlowTask slowTask2 =
        new Samples.AspNet.CS.Controls.SlowTask();
        Samples.AspNet.CS.Controls.SlowTask slowTask3 =
        new Samples.AspNet.CS.Controls.SlowTask();

        PageAsyncTask asyncTask1 = new PageAsyncTask(slowTask1.OnBegin, slowTask1.OnEnd, slowTask1.OnTimeout, "Async1", true);
        PageAsyncTask asyncTask2 = new PageAsyncTask(slowTask2.OnBegin, slowTask2.OnEnd, slowTask2.OnTimeout, "Async2", true);
        PageAsyncTask asyncTask3 = new PageAsyncTask(slowTask3.OnBegin, slowTask3.OnEnd, slowTask3.OnTimeout, "Async3", true);

        // Register the asynchronous task.
        Page.RegisterAsyncTask(asyncTask1);
        Page.RegisterAsyncTask(asyncTask2);
        Page.RegisterAsyncTask(asyncTask3);

        // Execute the register asynchronous task.
        Page.ExecuteRegisteredAsyncTasks();

        TaskMessage.InnerHtml = slowTask1.GetAsyncTaskProgress() + "<br />" + slowTask2.GetAsyncTaskProgress() + "<br />" + slowTask3.GetAsyncTaskProgress();
    } 
```

**慢类.cs**

```
public class SlowTask
{
    private String _taskprogress;
    private AsyncTaskDelegate _dlgt;

    // Create delegate. 
    protected delegate void AsyncTaskDelegate();

    public String GetAsyncTaskProgress()
    {
        return _taskprogress;
    }
    public void ExecuteAsyncTask()
    {
        // Introduce an artificial delay to simulate a delayed  
        // asynchronous task.
        Thread.Sleep(TimeSpan.FromSeconds(5.0));
    }

    // Define the method that will get called to 
    // start the asynchronous task. 
    public IAsyncResult OnBegin(object sender, EventArgs e,
        AsyncCallback cb, object extraData)
    {
        _taskprogress = "AsyncTask started at: " + DateTime.Now + ". ";

        _dlgt = new AsyncTaskDelegate(ExecuteAsyncTask);
        IAsyncResult result = _dlgt.BeginInvoke(cb, extraData);

        return result;
    }

    // Define the method that will get called when 
    // the asynchronous task is ended. 
    public void OnEnd(IAsyncResult ar)
    {
        _taskprogress += "AsyncTask completed at: " + DateTime.Now;
        _dlgt.EndInvoke(ar);
    }

    // Define the method that will get called if the task 
    // is not completed within the asynchronous timeout interval. 
    public void OnTimeout(IAsyncResult ar)
    {
        _taskprogress += "AsyncTask failed to complete " +
            "because it exceeded the AsyncTimeout parameter.";
    }
} 
```

# asp.net-mvc-3 - 无法转换 WhereSelectListIterator 类型的对象

> ID：15184153
> 
> 赞同：6
> 
> 时间：2013-03-03T09:08:44.827
> 
> 标签：asp.net-mvc-3, linq, c#-4.0

我一直试图弄清楚为什么当代码返回调用方法时，返回格式化为下拉列表的美国州列表的 Linq 查询不会转换为列表。我得到的错误是：

**无法将 'WhereSelectListIterator'2[StateListing.States,<>f__AnonymousTypea'2[System.String,System.String]]' 类型的对象转换为类型 'System.Collections.Generic.List`1[StateListing.States]'**

来自错误的命名空间 StateListing 是一个 dll 库，它有一个名为 States 的类，它返回一个 IEnumerable 状态列表，如下所示。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace StateListing
{
    public class States 
    {
        public string StateAbbriviation { get; set; }
        public int StateID { get; set; }
        public string StateName { get; set; }
        static int cnt = 0;

        public static IEnumerable<States> GetStates()
        {
            return new List<States>
            {
                new States
                {
                    StateAbbriviation = "AL",
                    StateID=cnt++,   
                    StateName = "Alabama"
                },
                new States
                {
                    StateAbbriviation = "AL",
                    StateID=cnt++,
                    StateName = "Alaska"
                }

                //Continued on with the rest of states

            }.AsQueryable();
        }
    }
} 
```

在我的控制下，我调用 GetStates 从上面的类库中返回一个状态列表。

```
 [HttpPost]
    public JsonResult GetStateOptions() 
    {
        try
        {
            //Return a list of options for dropdown list
            var states = propertyRepository.GetStates(); 
            return Json(new { Result = "OK", options = states });
        } 
```

在属性存储库类中，我有两种方法，一种是从库中获取 StateList，另一种是为我的视图中的下拉列表格式化状态列表。

```
 public List<States> GetStateList()
    {
        var items = (from s in States.GetStates()
                    select s).ToList();

        return items;
    }

    List<States> IPropertyRepository.GetStates() 
    {
        try
        {
            List<States> RawStates = GetStateList();
            var stateList = RawStates.Select(c => new { DisplayText = c.StateName,   Value = c.StateID.ToString() });
            return (List<States>)stateList;  //<=== Error 
        } 
```

当代码到达 GetStates 方法中的返回值时，就会发生错误。

任何有关此铸造问题的帮助解释我做错了什么将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T09:13:01.840

这就是问题：

```
var stateList = RawStates.Select(c => new { DisplayText = c.StateName, 
                                            Value = c.StateID.ToString() });
return (List<States>)stateList; 
```

两个问题：

*   `Select`不返回`List<T>`
*   你不是=选择`States`对象；您正在选择匿名类型

第一个可以使用`ToList()`; 第二个*可以*通过更改`Select`调用*或*更改方法的返回类型来修复。`States`鉴于没有`DisplayText`or`Value`属性，目前还不清楚您真正想要返回什么。

我*希望*有一种`GetStates`返回状态的方法-在这种情况下，您已经得到了`GetStatesList()`可能已经完成了您想要的操作。

基本上，您需要考虑您真正想要返回的类型，并使您的方法返回类型和方法主体都匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T09:11:42.413

您将 LINQ 查询投影到匿名对象，而不是显然无法工作的状态列表。2 种类型不兼容。因此，首先修改您的存储库层并摆脱该`GetStateList`方法：

```
public class PropertyRepository: IPropertyRepository
{
    public List<States> GetStates() 
    {
        return States.GetStates().ToList();
    }
} 
```

然后在控制器中投影到所需的结构：

```
[HttpPost]
public JsonResult GetStateOptions() 
{
    var states = propertyRepository.GetStateList(); 
    var options = states.Select(x => new
    {
        DisplayText = c.StateName,   
        Value = c.StateID.ToString()
    }).ToList();
    return Json(new { Result = "OK", options = states });
} 
```

# java - 如何在treeviewer中隐藏具有树层次结构的第一列？

> ID：15184154
> 
> 赞同：3
> 
> 时间：2013-03-03T09:08:53.987
> 
> 标签：java, swt, jface, treeviewer

我想完全隐藏`TreeViewer`. 如果我将其隐藏，`setWidth(0)`则下一个可见列将获得三角形和填充。最愚蠢的方法是每次隐藏第一列时处理`TreeViewer`和创建。`TableViewer`有没有可靠的方法来解决这个问题？

已编辑。插图：

![示范](../Images/747020b378c3565249169dece6c3eba0.png)

1.  `id`带有和`label`列的原始表
2.  带有隐藏`id`列的表。宽度为 1 像素。虚线分隔符非常难看。
3.  带有隐藏`id`列的表。宽度为 0 像素。现在第 2 列已重新格式化元素。

PS 我可能会在运行时成功地用鼠标隐藏第一个 id 列（没有虚线分隔符和第二列看起来相同）。但是如何通过代码做到这一点？我绑定阅读 JFace 源代码，但没有找到任何有用的公共方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T16:30:29.203

你必须在你的实现中处理这个，`ITreeContentProvider`你**不**`getElements()`应该返回根元素，而是返回它的子元素。在你应该返回的根。**`getParent()``null`**

# countdown - 倒计时结束时的PHP

> ID：15184156
> 
> 赞同：0
> 
> 时间：2013-03-03T09:08:58.743
> 
> 标签：countdown

所以我有一个倒计时计时器，它在时钟达到 0 时抓取一个 .php 文件。唯一的问题是，php 文件正在新窗口中打开。我希望它以某种方式显示在页面底部。

我对javascript或AJAX一无所知。只有php和html。谁能告诉新手该怎么做？

> ```
> <!--START COUNTDOWN TIMER SCRIPT-->
>                           <br>
>                           <script type="text/javascript">
> 
>                           window.onload = function() {
> countDown('my_div1', 'timerunout.php', 4); } function countDown(elID, output, seconds) {
> var elem = document.getElementById(elID),
>     start = new Date().getTime(), end = start+seconds*1000,
>     timer = setInterval(function() {
>         var now = new Date().getTime(), timeleft = end-now, timeparts;
>         if( timeleft < 0) {
>             document.location.href = output;
>             clearInterval(timer);
>         }
>         else {
>             timeparts = [Math.floor(timeleft/60000),Math.floor(timeleft/1000)%60];
>             if( timeparts[1] < 10) timeparts[1] = "0"+timeparts[1];
>             elem.innerHTML = "When the Clock hits Zero...<br> "+timeparts[0]+":"+timeparts[1];
>         }
>     },250); // the lower this number, the more accurate the timer. 250 recommended }
> 
>                           </script>
> 
>                           <center>
>                           <font color="#FF0000"><b><h1>
>                           <div id="my_div1">
>                           </div>
>                           </h1></b></font>
>                           </center>
>                           <!--END COUNTDOWN TIMER SCRIPT--> 
> ```

* * *

好的，所以我在 index.php 上有一个倒数计时器，当它达到 0 时...它使用 AJAX 在页面底部打开另一个 php 文件。我们称之为timerunout.php

问题是...在那个 PHP 文件是一个链接。在该链接的末尾需要附加一个附属 ID。

只有当有人在 index.php 的地址末尾键入他们的用户名时，才会检测到该会员 ID。有什么建议么？

这是 index.php 的代码

> window.onload = function() { countDown('my_div1', 'timerunout.php', 4); }
> 
> ```
> function countDown(elID, output, seconds) {
>     var elem = document.getElementById(elID);
>     start = new Date().getTime(), end = start+seconds*1000,
>     timer = setInterval(function() {
>         var now = new Date().getTime(), timeleft = end-now, timeparts;
>         if( timeleft < 0) {
>             //This code creates the AJAX object, which will then be used to send it.
>             var xmlhttp;
>             if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
>                 xmlhttp=new XMLHttpRequest();
>             } else {// code for IE6, IE5
>                 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
>             }
> 
>             //This code parameterizes the object to point at your page in an asynchronous way.
>             xmlhttp.open("GET","timerunout.php?s1=username",true);
>             xmlhttp.send(); //Once all parameters are set, send it on it's way.
> 
>             //Callback. Once the request is in one of it's stages, this will be called.
>             xmlhttp.onreadystatechange=function() {
>                 //Request done and fetching the page successful?
>                 if (xmlhttp.readyState==4 && xmlhttp.status==200) {
>                     //Sets the HTML of my_div1 to whatever was in timerunout.php
>                     elem.innerHTML=xmlhttp.responseText;
>                 }
>             }
>             clearInterval(timer);
>         } else {
>             timeparts = [Math.floor(timeleft/60000),Math.floor(timeleft/1000)%60];
>             if( timeparts[1] < 10) timeparts[1] = "0"+timeparts[1];
>             elem.innerHTML = "When the Clock hits Zero...<br> "+timeparts[0]+":"+timeparts[1];
>         }
>     } ,250); // the lower this number, the more accurate the timer. 250 recommended  } </script> <center>
>     <div id="my_div1"></div> </center> <!--END COUNTDOWN TIMER SCRIPT--> 
> ```

这是timerunout.php

> ```
>  //
>     // Maybe check $s1 is indeed valid
>     //
> 
>     $newurl = sprintf('/join.php?id=%s', urlencode($_GET['s1']));
>     $coaching = sprintf('/live/webinar-register.php?id=%s', 
> ```
> 
> urlencode($_GET['s1'])); ?>

所以基本上我要说的是，在 index.php 中，`username`这一行需要来自用户在地址栏中输入的内容。

```
xmlhttp.open("GET","timerunout.php?s1=username",true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:25:48.287

如果你想使用 jQuery-Framework，你可以这样处理：

```
$.ajax({
    url: "timerunout.php",
    data:{ s1:"whateverparametersuitsyourfancy" }
}).done(function(data) {
    $('#my_div1').html(data);
}); 
```

如果你想走传统的方式，AJAX 调用会稍微复杂一些。来自 w3schools 网站：

```
//This code creates the AJAX object, which will then be used to send it.
var xmlhttp;
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
} else {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

//This code parameterizes the object to point at your page in an asynchronous way.
xmlhttp.open("GET","timerunout.php?s1=whateverparametersuitsyourfancy",true);
xmlhttp.send(); //Once all parameters are set, send it on it's way.

//Callback. Once the request is in one of it's stages, this will be called.
xmlhttp.onreadystatechange=function() {
    //Request done and fetching the page successful?
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        //Sets the HTML of my_div1 to whatever was in timerunout.php
        document.getElementById("my_div1").innerHTML=xmlhttp.responseText;
    }
} 
```

两个代码都会向相关页面发送 GET 请求，并将目标页面的“回显”输出写入由“my_div1”标识的 html 标记。

在您的代码中（我将使用普通的 JS 示例），这可能看起来像这样。

```
<!--START COUNTDOWN TIMER SCRIPT-->
<br>
<script type="text/javascript">
    window.onload = function() { 
        countDown('my_div1', 'timerunout.php', 4); 
    } 

    function countDown(elID, output, seconds) {
        var elem = document.getElementById(elID);
        start = new Date().getTime(), end = start+seconds*1000,
        timer = setInterval(function() {
            var now = new Date().getTime(), timeleft = end-now, timeparts;
            if( timeleft < 0) {
                //This code creates the AJAX object, which will then be used to send it.
                var xmlhttp;
                if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                } else {// code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }

                //This code parameterizes the object to point at your page in an asynchronous way.
                xmlhttp.open("GET","timerunout.php?s1=whateverparametersuitsyourfancy",true);
                xmlhttp.send(); //Once all parameters are set, send it on it's way.

                //Callback. Once the request is in one of it's stages, this will be called.
                xmlhttp.onreadystatechange=function() {
                    //Request done and fetching the page successful?
                    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                        //Sets the HTML of my_div1 to whatever was in timerunout.php
                        elem.innerHTML=xmlhttp.responseText;
                    }
                }
                clearInterval(timer);
            } else {
                timeparts = [Math.floor(timeleft/60000),Math.floor(timeleft/1000)%60];
                if( timeparts[1] < 10) timeparts[1] = "0"+timeparts[1];
                elem.innerHTML = "When the Clock hits Zero...<br> "+timeparts[0]+":"+timeparts[1];
            }
        } ,250); // the lower this number, the more accurate the timer. 250 recommended 
}
</script>
<center>
    <font color="#FF0000"><b><h1>
        <div id="my_div1"></div>
    </h1></b></font>
</center>
<!--END COUNTDOWN TIMER SCRIPT--> 
```

编辑：我在 AJAX 调用中添加了一个 GET 参数，以方便您使用。

# html - 缩放时标题右侧的空白

> ID：15184160
> 
> 赞同：1
> 
> 时间：2013-03-03T09:10:29.037
> 
> 标签：html, css

我正在开发[这个](http://www.brilliantseotechnologies.com/test.html)网站。

我面临的问题是放大时标题右侧的空白。我做了各种各样的事情，但未能用黑色填充标题部分区域的白色。

相关CSS代码：（代码太长我就不贴了，大家可以在官网找到）

```
header
{
    float:left;
    width:100%;
    height:700px;
    background:#000000;
    -webkit-box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;
    -moz-box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;
    box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;
}

.header_main
{
    background: #000000;
    -webkit-box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;
    -moz-box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;
    box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;
    float:left;
    height:800px;
    width:100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:12:40.617

这是因为在您的[http://www.brilliantseotechnologies.com/css/2nav.css](http://www.brilliantseotechnologies.com/css/2nav.css)`ul.menu`上，您的班级有 width:98%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:47:18.657

有很多问题，请按照以下建议进行操作：

1`.slideshow{margin: -10px 0 0 50px;}`从类 .slideshow 中删除这一行

2 `.headrouter{ padding-left:100px; width:1200px;}`移除 padding-left 并设置 width:1100px

3 `#site_content {margin-left:50px; }`删除margin-left

4 将overflow-x:hidden 添加到body 中，如下所示：

```
 body {
       background: none repeat scroll 0 0 #FFFFFF;
       font: 80% Arial,Helvetica,sans-serif;
       overflow-x: hidden;
      } 
```

那应该可以解决问题。

# java - 编写汇编程序的替代技术

> ID：15184164
> 
> 赞同：2
> 
> 时间：2013-03-03T09:10:52.550
> 
> 标签：java, algorithm, assembly

我正在为特定指令集编写汇编程序。我坚持的阶段是我正在使用 switch case 将指令转换为它们各自的十六进制代码。因此，对于 25 条指令，我使用了 25 种情况，我的代码可以转换指令。有没有更好的方法来转换这些指令，而不是使用这么多开关案例。ISA 可以在这里找到：[https ://docs.google.com/file/d/1uIzgSaTD-onlr6f3ltmZkGRuYpAxIKqKSvOSAYsjREeBawYD7vRE4q42i9dM/edit?usp=sharing](https://docs.google.com/file/d/1uIzgSaTD-onlr6f3ltmZkGRuYpAxIKqKSvOSAYsjREeBawYD7vRE4q42i9dM/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:19:54.163

当我编写汇编程序时，我有几个字典，它们为每条指令存储了它们的编码和调用执行它的回调（那是 C#，你不介意吗？;)）：

```
class Processor {
    static Dictionary<string, int> _encodings = new Dictionary<string, int>() {

        { "mov", 0x00000032 },
        { "add", 0x00000051 }
        // etc.
    };

    static Dictionary<string, Action<object, object>> _callbacks = 
        new Dictionary<string, Action<object, object>>() {

            { "mov", executeMov },
            { "add", executeAdd } 
            // ect
    };

    void executeMov(object o1, object o2) {
        // ...
    }

    void executeAdd(objecy o1, object o2) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T11:06:07.433

我会创建一组描述每条指令的结构。该结构将包含：

*   指令助记符（例如`"AND"`）
*   指令操作码（例如`0`）
*   指令操作数类型（例如`no operand`, `register operand`, `memory operand`, `immediate operand`, `2 register operands`, `register operand + memory operand`, `register operand + immediate operand`, `memory operand + immediate operand`, 等）

然后您可以通过助记符搜索数组并查看该指令接受哪些操作数并将其与输入程序集的操作数匹配。如果没有匹配，您检查是否有另一个版本的相同指令和相同的助记符但具有不同的操作数和重复匹配（看起来`AND`有两种口味）。如果整个数组中没有匹配项，则会失败并出现错误。

简单、通用、可扩展。除非有性能要求，否则我不会费心优化速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:20:13.280

在某些时候，您将获得枚举所有指令的复杂性。但我很无聊，所以这里有一种将复杂性移开的方法是做这样的事情，伪代码：

```
 abstract class InstructionWriter
      void writeInstruction(file, data)

 ...lots of different instruction writers...

 void setupWriters() {
      writers = Container<InstructionWriter>(NUM_OP_CODES);
      writers[OPCODE1] = writerForOpCode1();
      writers[OPCODE2] = writerForOpCode2();
      ...
 } 
```

那么实际的写作可以重写为

```
 void writeInstructions(program) {
     file = open(binaryfile)
     for(opcode o in program) {
         writers[o.opcode].write(file, o.data);
     }
 } 
```

尽管通过定位所有继承的函数等，这种方法可能会比 switch 慢，但这只是一个猜测。

# arrays - TouchDevelop 的字符串连接错误

> ID：15184165
> 
> 赞同：1
> 
> 时间：2013-03-03T09:11:07.820
> 
> 标签：arrays, string, touchdevelop

我开始使用 TouchDevelop 进行编程，但我输入了以下错误。

```
action main ()      
var strings := collections → create string collection      
strings → set at(1, "I")      
strings → set at(2, "II")      
strings → set at(3, "III")      
strings → set at(4, "IV")      
strings → set at(5, "V")      
strings → set at(6, "VI")      
var x := math → random(6) + 1      
var s := strings → at(x)      
"The value of dice is " → concat(s) → post to wall # ERROR AT CONCAT(S) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T13:56:06.297

对于 touchdevelop 语言，您要使用字符串连接字符，即 || . 您的线路将是：

```
"The value of dice is " || s → post to wall 
```

如果您使用的是 Windows Phone 7，则可以在数学运算符旁边的左侧第三个菜单中找到双竖线字符。

# java - 在哈希表中找到值时打印键

> ID：15184166
> 
> 赞同：0
> 
> 时间：2013-03-03T09:11:09.057
> 
> 标签：java, hashmap, hashtable

当找到或存在值时，我试图在哈希表中打印键值。此代码似乎不起作用。

```
 Map<String,Integer> map = new HashMap<String, Integer>();
    for(int j=0;j<al.size();j++){            
        Integer count = map.get(al.get(j));       
        map.put(al.get(j), count==null?1:count+1);   //auto boxing and count

    }
    int max = Collections.max(map.values());
    if( map.containsValue(max))
    {

     System.out.println(map.keySet());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:17:30.460

首先，这些值可能会出现*多次*- 我假设您要打印*所有*匹配的键？

其次，哈希表基本上不是为按值查找而设计的 - 所以你必须迭代所有条目：

```
// Adjust types accordingly
for (Map.Entry<String, String> entry : map.entrySet()) {
    if (entry.getValue().equals(targetValue)) {
        System.out.println(entry.getKey());
    }
} 
```

如果某些值可能为空，则应更改相等性检查。

# bash - 如何从bash中的大文件中删除带有特殊字符的长行

> ID：15184168
> 
> 赞同：1
> 
> 时间：2013-03-03T09:11:35.260
> 
> 标签：bash

我有一个包含 200 行的文件，我想删除 5 个长行（每行包含特殊字符）。

```
$cat abc
............
comments[asci?_203] part of jobs where to delete
5 similar lines
..... 
```

我尝试使用文件上的行号（nl）删除这 5 行，但没有奏效。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:31:41.603

您是否尝试过使用 awk 删除这些行？这未经特殊字符测试，但*也许*它可以工作

```
awk '{if (length($0)<55) print $0}' < abc 
```

替换`55`为您要保留的最大行长

# r - 最佳拟合非线性数据帧列表

> ID：15184176
> 
> 赞同：2
> 
> 时间：2013-03-03T09:13:14.453
> 
> 标签：r, lapply

我有一个数据框列表，我想计算列表中每个数据框的非线性最佳拟合，并获得一个包含最佳拟合对象的列表。我正在尝试使用 lapply 但我遇到了参数问题。

```
# define a function for D
fncTtr <- function(n,d) (d/n)*((sqrt(1+2*(n/d))-1))
# define a function for best fit
bestFitD <- function(dat,fun) {
 res <- nls(dat$ttr~fun(n,d),data=dat,start=list(d=25),trace=T)
 return(res)
}

resL <- lapply(dData2,bestFitD,dat=dData2,fun=fncTtr) 
```

当我执行此代码时，我收到以下错误：

> FUN(X[[1L]], ...) 中的错误：未使用的参数 (X[[1]])

我希望 lapply 遍历 dData2 中的每个数据帧并执行 bestFitD 函数。我应该如何在 lapply 中定义函数的参数。dData2 对象是一个列表。我将它用作 bestFitD 的参数，但此函数需要一个数据帧作为参数。我该如何定义这个参数？当我使用一个数据帧自行执行函数 bestFitD 时，它运行正常。具有数据框组件的 dData2 列表示例：

```
$`1`
    n    ttr      d id
1  35 0.6951 27.739  1
2  36 0.6925 28.072  1
3  37 0.6905 28.507  1
4  38 0.6887 28.946  1
5  39 0.6790 28.003  1
6  40 0.6703 27.247  1
7  41 0.6566 25.735  1
8  42 0.6605 26.981  1
9  43 0.6567 27.016  1
10 44 0.6466 26.026  1
11 45 0.6531 27.667  1
12 46 0.6461 27.128  1
13 47 0.6336 25.751  1
14 48 0.6225 24.636  1
15 49 0.6214 24.992  1
16 50 0.6248 26.011  1

$`2`
    n    ttr      d id
17 35 0.6951 27.739  2
18 36 0.6925 28.072  2
19 37 0.6905 28.507  2
20 42 0.6605 26.981  2 
```

以下代码似乎没问题：

```
res <- bestFitD(dData2[[1]],fncTtr) 
```

但是当我执行以下操作时：

```
res <- bestFitD(dData2[[2]],fncTtr) 
```

我收到以下错误：

```
Error in model.frame.default(formula = ~dat + ttr + n, data = dat) : 
  invalid type (list) for variable 'dat' 
```

为什么？两者都是数据框！但似乎第二个组件有些奇怪！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T10:46:12.247

只需摆脱函数调用`dat$`中的。`nls`我相信它正在寻找`dat$dat$ttr`显然会破裂的东西。也就是说，您的`bestFitD`功能应该是：

```
bestFitD <- function(dat,fun) {
    res <- nls(ttr~fun(n,d),data=dat,start=list(d=25),trace=T)
    return(res)
} 
```

现在，使用`lapply`as 调用：

```
resL <- lapply(dData2, bestFitD, fun = fncTtr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:46:20.713

这应该有效：

```
resL <- lapply(dData2, function(x,fun){
                 bestFitD(x,fun)
               },fun='fncTtr') 
```

我重写的地方，bestFitD 使用`do.call`

```
bestFitD <- function(dat,fun){
  nls(ttr~do.call(fun,list(n,d)), data=dat,
      start=list(d=25),trace=T)
  res
}

0.003237457 :  25 
0.0009393089 :  26.77943 
0.0009362902 :  26.84895 
0.0009362902 :  26.84898 
0.001282807 :  25 
4.771935e-05 :  27.64267 
4.389588e-05 :  27.80729 
4.389584e-05 :  27.80781 
```

**编辑**

我的解决方案可以简化为（类似于但不完全与 Anthony 解决方案）

```
lapply(dData2, bestFitD, fun = 'fncTtr') 
```

# c++ - 是否可以在 Eclipse C++ 中创建一个自动导入“#include”依赖项的模板？

> ID：15184177
> 
> 赞同：2
> 
> 时间：2013-03-03T09:13:16.543
> 
> 标签：c++, eclipse, templates

使用 Eclipse IDE 'Juno'，您可以使用 Java 模板自动导入类的所有依赖项，例如：

```
${:import(org.apache.log4j.Logger)}
private static final Logger _logger = Logger.getLogger(${enclosing_type}.class); 
```

我找不到使用 log4cpp 的 C++ 的等效版本。我相信 ${enclosure_type} 等于 ${type_name} 但找不到任何包含可能依赖的库的内容。一些博客提到他们使用 ctrl-space 代码插入模板，后跟 ctrl-1 来修复依赖关系，但是 ctrl-1 对我来说不能包含缺少的库。在 C++ 中，这可能使用命名空间吗？我对 C++ 不是很熟悉。任何和所有的帮助表示赞赏。

# ruby - 为模型编写范围、连接和排序

> ID：15184182
> 
> 赞同：0
> 
> 时间：2013-03-03T09:14:33.057
> 
> 标签：ruby, ruby-on-rails-3.2, rails-activerecord

我的模型是这样的：

**计划** `has_many` **测量** ，然后 **测量** `has_many` **目标** 和**目标**表有一个名为的列`value`

我的查询是这样的：

```
@programs2 = Program.includes([measures: :targets])
               .some_scope
               .where('organization_id = 1')
               .limit(2) 
```

我不知道在哪里或如何编写`some_scope`查询部分。查询开头，`Program.includes`所以我认为它应该在 Program 模型中定义，但我遇到的问题是`measures: :targets`. 我如何为他们定义一个连接。如果只是一张桌子，我知道我可以这样做：

```
scope :salary, :joins => :registry,   :order => "money DESC" 
```

我也需要类似的东西，但这有两个表格，就像我上面解释的那样。我不知道怎么写那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:41:01.583

尝试，

```
scope :some_scope, joins(mesures: :targets) 
```

# php - 如何使用使用php的按钮一个接一个地显示数据库的行？

> ID：15184184
> 
> 赞同：0
> 
> 时间：2013-03-03T09:14:40.147
> 
> 标签：php

我有一个数据库，其值如下

*   芒果
*   苹果
*   橘子

现在我想将这些值分别显示到一个 html 表中。就像第一行只有芒果，然后我点击下一个按钮，然后是苹果，然后是下一个按钮，然后是橘子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:21:27.530

假设您有一个 php 数组，例如`$array(0=>"mango",1=>"apple",2=>"oranges")`.

```
<table >
<tr>
<td id="myTable">
<?php echo $array[0]; ?>
</td>
</tr>
<script>var iterator = 0;</script>
<input type="button" value="next" onclick="nextVal(iterator)"/>

function nextVal(nextVal){
nextVal++;
document.getElementById("myTable").innerHTML = "<?php echo $array["+nextVal+"]; ?>";
} 
```

# ruby - 与类和实例变量创建混淆

> ID：15184189
> 
> 赞同：0
> 
> 时间：2013-03-03T09:15:25.823
> 
> 标签：ruby

我正在使用`class`块内的局部变量、类变量和实例变量创建，如下所示。但是我发现了一些我自己无法解释的东西。我的困惑已在下面的两个代码之间发布。

```
class Foo
def self.show
@@X = 10 if true
p "hi",@@X.object_id,x.object_id
end
end
#=> nil
Foo.show
#NameError: undefined local variable or method `x' for Foo:Class
#   from (irb):4:in `show'
#   from (irb):7
#   from C:/Ruby193/bin/irb:12:in `<main>' 
```

预计会出现上述错误。但是在下面的代码中，我已将类变量分配`@@X`给`10`. 但是在`p`语句中我使用了实例变量。`@X`为什么错误没有像上面的代码一样抛出？

```
class Foo
def self.show
@@X = 10 if true
p "hi",@X.object_id
end
end
#=> nil
Foo.show
"hi"
4
#=> ["hi", 4] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:22:15.000

由于[一切都是对象](http://www.ruby-lang.org/en/about/)，并且在 Ruby 中不需要显式变量声明，因此您可以编写代码

```
p @X.object_id 
```

默默地引入了一个实例变量`@X`( `@X.nil? == true`)。您可以在以下位置看到这种魔力`irb`：

```
~ irb
> p @x.object_id
# 8
# ⇒ 8 
```

# indentation - 如何在 Inkscape 中创建矩形的缩进？

> ID：15184190
> 
> 赞同：6
> 
> 时间：2013-03-03T09:15:34.917
> 
> 标签：indentation, inkscape

我一直在尝试为激光切割设计一些东西，但不知道如何创建矩形的缩进。任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T00:25:29.783

我不完全确定你的意思。是这样的吗？

![在此处输入图像描述](../Images/05667456e16c7198e2720d9c4befa629.png)

如果是，这里是如何做（或任何其他缩进）：

用工具画出你的矩形`Create Rectangles and Squares`。将其转换为路径 ( `Path > Object to Path`)。您将失去矩形工具 (F4) 的特殊属性（您将不再拥有该`vertical rounding`按钮），但现在您将能够使用该`Edit paths by nodes`工具 (F2) 编辑对象。选择这个工具和你的矩形。您将看到四个节点。要创建如图所示的凹痕，您需要更多节点：

单击矩形的上部连接线（下图中的第 1 步）并单击`Insert new nodes into selected segments`按钮（第 2 步）（请注意，您只会在选择`Edit paths by nodes`工具时看到此按钮）

![在此处输入图像描述](../Images/9f9c61873cf329f238a73f1859bdc947.png)

之后，只需在矩形“内部”拖动一个节点（下图中的步骤 1）。`Make selected nodes symmetric`例如，使用或 其他按钮进行圆形实验。您会注意到连接到节点的小手柄，拖动它们。

![在此处输入图像描述](../Images/e3a543deb22f81266ea548daf1dcd269.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T09:18:16.223

另一种方法：创建第二个对象（在这种情况下是另一个矩形），将其放在要缩进的对象上，全选，然后路径->差异（或 Ctrl-+）。

![缩进：路径差异 (Ctrl+-)](../Images/fb405608aee7a4a22a8fd483f599a459.png)

# java - 如何在 Java 中使用内联类中断线程

> ID：15184192
> 
> 赞同：0
> 
> 时间：2013-03-03T09:15:45.177
> 
> 标签：java, multithreading, interrupt

我正在实现一个程序，它将 rtp 音频传输到对等计算机，同时运行一个线程来获取 ping 数据。单击开始按钮后，两种方法几乎同时启动。问题是当我想中断/退出程序时，ping 数据不会显示输出，但线程仍在运行。

> 开始按钮

```
JButton startCap = new JButton("Start");
    startCap.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent act) {

                            go();//go() is the rtp audio method

                        Thread pinging = new Thread() {
                            public void run() {

                                PingTest();
                            }
                        };

                        pinging.setName("runPing");
                        pinging.start();

        }
    }); 
```

> 退出按钮

```
JButton stopCap = new JButton("Exit");
    stopCap.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent act) {
                            //just for some checking, I know its not a good design
                            //I new at here
            if (sink != null) {
                sink.addDataSinkListener(new DataSinkListener() {
                    public void dataSinkUpdate(DataSinkEvent e) {
                        if(e instanceof EndOfStreamEvent)
                            sink.close();
                    }
                });
            }
            if (processor != null)
                processor.stop();
                            System.exit(-1);
                            //I think there no need to return, but still put at there
                            Thread.currentThread().interrupt();//preserve the message
                            pinging.currentThread().interrupt();
                            return;//
                            //Runtime.getRuntime().halt(0);
                            //pinging.stop();
                            }

    }); 
```

> 一些 GUI 代码

```
public static void createAndShowGui() {
    JFrame frame = new JFrame("Sender");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(new SimpleVoiceTransmiter());
    frame.setSize(200, 75);
    frame.setVisible(true);
    frame.toFront();
}

public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGui();
        }
    });
} 
```

go() 是主要方法，而 PingTest() 是依赖方法，当 go() 通过单击“开始”按钮启动时，PingTest() 将启动。现在的问题是我不知道如何中断/退出 PingTest()。如何同时中断/退出所有线程（PingTest（））？真的需要一些提示，在此先感谢。

p/s：PingTest() 正在使用 Runtime.exec() 来 ping 对等计算机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:24:10.070

`pinging.currentThread()`不返回 ping 线程。它等价于`Thread.currentThread()`, 因为`currentThread()`是一个静态方法。要获取 pinging 线程，只需使用`pinging`：

```
pinging.interrupt(); 
```

我也不明白你为什么要中断当前线程。当前线程是事件调度线程，它正在运行您的 GUI。没有理由打断它。

# macos - .bash_profile 和脚本作为符号链接

> ID：15184194
> 
> 赞同：2
> 
> 时间：2013-03-03T09:16:11.173
> 
> 标签：macos, git, shell, symlink, .bash-profile

我想知道，当我设置我的`.bash_profile`或其他配置（如符号链接`.irssi`或符号链接）时是否有任何问题`.slate`。问题是，我想将我所有的配置和脚本 git 放入`/usr/local/bin`（我在 OS X 上），这样我就有了版本控制和它们的备份。这样，我也可以在其他机器上使用它们。

我只是想知道如果我这样做的话，是否有任何东西会破裂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:21:49.183

是的，只要符号链接有效并且用户具有读取这些位置的适当权限，您就不会有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T09:19:09.037

没有任何问题，这正是人们将他们的点文件置于版本控制之下的方式

# jquery - 如何使用 jQuery 访问多个类

> ID：15184198
> 
> 赞同：1
> 
> 时间：2013-03-03T09:16:30.113
> 
> 标签：jquery, css, inheritance, hover

我正在尝试使用这个 jQuery 函数来使我的图像缩放以及在悬停时出现滑动文本。我想使用总共 13 张图像，每张图像都有不同的尺寸。当我在 jQuery 函数中放置多个类时，所有类都继承第一个类的 css 属性，即使每个图像都有自己独特的 css 属性。如何设计我的函数，使每个类不继承第一个类的 css 代码？

```
<script>
    $(document).ready(function() {

        //move the image in pixel
        var move = -15;

        //zoom percentage, 1.2 =120%
        var zoom = 1.2;

        //On mouse over those thumbnail
        $('.zitem, .take2').hover(function() {

                    //Set the width and height according to the zoom percentage
                    width = $('.zitem, .take2').width() * zoom;
                    height = $('.zitem, .take2').height() * zoom;

                    //Move and zoom the image
                    $(this).find('img').stop(false,true).animate({'width':width, 'height':height, 'top':move, 'left':move}, {duration:1000});

                    //Display the caption
                    $(this).find('div.caption').stop(false,true).fadeIn(200);
                },
                function() {
                    //Reset the image
                    $(this).find('img').stop(false,true).animate({'width':$('.zitem, .take2').width(), 'height':$('.zitem, .take2').height(), 'top':'0', 'left':'0'}, {duration:500});

                    //Hide the caption
                    $(this).find('div.caption').stop(false,true).fadeOut(200);
                });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:19:15.500

尝试

```
var width = $(this).width() * zoom;
etc. 
```

# c# - 将 Visual Studio 2012 配置为使用 Mono 的 C# 编译器，而不是默认的 csc.exe

> ID：15184200
> 
> 赞同：4
> 
> 时间：2013-03-03T09:16:37.490
> 
> 标签：c#, visual-studio, mono, unity3d

我在一个名为 Unity3D 的游戏引擎中工作，它的脚本系统在 Mono 上运行。默认情况下，Unity 使用修改后的 Mono 版本来开发/编译脚本。我正在设置我的 Visual Studio 以更好地处理 Unity 项目及其与 .NET 相关的各种问题。

我目前正试图配置 Visual Studio 来处理我的各种程序集的编译。Unity 使用旧 Mono 编译器的修改版本，因此我*不能*使用默认的 csc.exe 来构建程序集。

我理想的解决方案是让 Visual Studios 的**构建解决方案**选项使用我指向的编译器来处理我的项目，也许是通过配置 MSBuild (.csproj) 文件？如果没有这一点，我可以使用 Mono 的 mcs/gmcs 编译器**在 Visual Studio**中构建另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:29:11.793

一种方法是编写一个 MSBuild/PSake 脚本，您可以通过 VS 中的快捷键运行该脚本。我写了一篇关于[通过快捷键挂钩构建脚本](http://levelnis.co.uk/blog/running-a-continuous-integration-build-locally-via-a-visual-studio-shortcut-key)的博客文章。基本上，您将编写一个执行 MSBuild 脚本的批处理文件并为其分配一个键盘快捷键，例如 ALT-1。然后，您将按 ALT-1 而不是 CTRL-SHIFT-B 来编译项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T13:05:29.483

我做了一个项目，Unity 在我的 Mac 上运行并在 Parallels 上运行 Windows/VS2008。在我的 Visual Studio 解决方案中，我引用了适当的 Mono dll 而不是普通的 .NET dll（即 System、System.Xml 等）并使用了典型的 .. 我还使用 Mono 提供的 nUnit dll 编写了所有单元测试分配。由于 Unity 是（或至少是）仅使用 .cs 文件，因此只需将它们复制（通过 Post Build Script）到我的 Unity 项目结构中效果很好。Unity 会检测到更改并更新脚本。这种方法非常有效，但是我大约在 2 年前使用它，所以我不确定它是否仍然适用。

此外，似乎有人在制作有关如何执行此操作的视频时遇到了麻烦：http: [//forum.unity3d.com/threads/120327-Video-Tutorial-How-to-use-Visual-Studio-for-所有你的统一开发](http://forum.unity3d.com/threads/120327-Video-Tutorial-How-to-use-Visual-Studio-for-all-your-Unity-development)

# gwt - GWT Websockets 技术

> ID：15184208
> 
> 赞同：0
> 
> 时间：2013-03-03T09:17:53.627
> 
> 标签：gwt, websocket

我正在寻找一种在 GWT 中使用 websockets 的方法。有一些 API，但我听说它们在开发模式下不起作用。那正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:54:14.037

I use [Atmosphere](https://github.com/Atmosphere/atmosphere) and it works fine. You will find a chat for example in GWT.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:24:06.023

听起来你在谈论[彗星](https://code.google.com/p/gwt-comet/wiki/GettingStarted)和[Gwt-Ws。](https://code.google.com/p/gwt-ws/)

要使它们工作，您必须配置您的[Jetty 服务器](https://code.google.com/p/gwt-jetty/) ，我的意思是使用[JettyLauncher](https://code.google.com/p/gwt-jetty/)。

并且上述框架在 Webkit 浏览器中都支持，`Chrome`如`Safari`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T13:34:09.487

## 这可以通过 JSNI 和 stomp over sockjs 来实现

1.  这两个 javaScript.files 的 ClientBundle 和 TextResource

2.  将此 TextResources 作为脚本注入（不要错过 setRemoveTag(false)，因为这是 FromString）

    ```
    ScriptInjector.fromString(myRes.sockJs().getText()).setRemoveTag(false).inject(); 
    ```

3.  并在JSNI中建立连接

    ```
    var socket = new SockJs('myPath');
    var stompClient = Stomp.over(socket);
    var connect_callback = function() {.....}
    stompClient.connect({}, connect_callback) 
    ```

您可以将此 stompClient 作为 JavaScriptObject 返回，稍后在 jsni 方法中订阅或发送消息，或查看 GWT JSNI 覆盖功能。

# c# - json到Windows商店应用程序C#中的新列表框项

> ID：15184209
> 
> 赞同：3
> 
> 时间：2013-03-03T09:18:00.587
> 
> 标签：c#, json, xaml, windows-8, listbox

我有一个适用于 Windows 8 的应用程序，它需要获取一个 Json 字符串并将其反序列化为 DATACONTRACTS，它将在具有最大高度的列表框中显示我希望的信息，如果大于最大高度，它将滚动。

我拥有它的问题不是无法做到，而是不知道如何去做。

到目前为止，我可以反序列化 Json，并且可以指定我希望每个项目进入 UI 的位置，但我想要做的基本上是数组中的每个项目，我希望它创建一个新的 Stackpanel，使用 Textblocks 格式化来自 Json 的信息。不幸的是，我不知道该怎么做，而且我真的不知道我在寻找什么来获得有关如何做的教程

这是我的代码，它使用辅助类从 json 中获取项目并将它们放入 TextBlocks 的文本中。

```
var _FilterSaleList = new FilterSalesList();
var _Sales = await _FilterSaleList.FindSalesbyFilters();
string _SaleName = _Sales.sales[0].name.ToString();
string _SaleDescription = _Sales.sales[0].description.ToString();
string _SaleName1 = _Sales.sales[1].name.ToString();
string _SaleDescription1 = _Sales.sales[1].description.ToString();
int _TotalResults = _Sales.sales.Length;
SaleTitle.Text = _SaleName;
SaleDescription.Text = _SaleDescription;
SaleTitle1.Text = _SaleName1;
SaleDescription1.Text = _SaleDescription1; 
```

这是列表框的 XAML 代码，其中已有 2 个堆栈面板。

```
<ListBox Grid.Row="1">
    <StackPanel Margin="0,0,0,5">
        <TextBlock x:Name="SaleTitle" Text="" HorizontalAlignment="Center" Margin="0,0,0,5"/>
        <TextBlock x:Name="SaleDescription" Text="" HorizontalAlignment="Center" MaxHeight="40" Margin="0,0,0,5" TextWrapping="Wrap"/>                        
    </StackPanel>
    <StackPanel Margin="0,0,0,5">
        <TextBlock x:Name="SaleTitle1" Text="" HorizontalAlignment="Center" Margin="0,0,0,5"/>
        <TextBlock x:Name="SaleDescription1" Text="" HorizontalAlignment="Center" MaxHeight="40" Margin="0,0,0,5" TextWrapping="Wrap"/>
    </StackPanel>
</ListBox> 
```

下面是我希望它看起来如何的图像。即使一切都像我说的那样以这种方式工作，我希望这样，json 中的每个项目都会创建一个新的堆栈面板并显示图像中的信息。我不知道这样做的时候它叫什么，所以即使是一个关于在哪里看的简单提示也会很棒！

[http://puu.sh/2biMZ](http://puu.sh/2biMZ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:43:58.273

在 XAML 中有一个非常好的特性，称为绑定，它允许您简单地将对象或对象列表绑定到可视元素。这样，您不必在 C# 代码中手动“构建”图形用户界面。

这是一个非常大的话题，所以您可能应该看看什么是 MVVM，它将帮助您利用 Binding 的强大功能：http: [//channel9.msdn.com/Series/Building-Apps-for-Both-Windows -8-and-Windows-Phone-8-Jump-Start/Building-Apps-for-Both-Windows-8-and-Windows-Phone-8-03-Model-View-ViewModel](http://channel9.msdn.com/Series/Building-Apps-for-Both-Windows-8-and-Windows-Phone-8-Jump-Start/Building-Apps-for-Both-Windows-8-and-Windows-Phone-8-03-Model-View-ViewModel)

但现在，你能做的是：

1/ 使用 ItemTemplate 属性的 DataTemplate 定义您的 ListBox 如下：

```
<ListBox Grid.Row="1" x:Name="SalesListbox">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Margin="0,0,0,5">
                <TextBlock x:Name="SaleTitle" Text="{Binding name}" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                <TextBlock x:Name="SaleDescription" Text="{Binding description}" HorizontalAlignment="Center" MaxHeight="40" Margin="0,0,0,5" TextWrapping="Wrap"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

DataTemplate 将告诉列表中的每个项目应如何呈现。您还应该注意到我们如何为每个文本块中的文本属性使用绑定。`name`它与`description`模型中的属性名称绑定在一起。

然后你可以用你的数据填充你的 ListBox ：

```
var filterSaleList = new FilterSalesList();
var salesByFilters = await filterSaleList.FindSalesbyFilters();
SalesListbox.ItemsSource = salesByFilters.sales; 
```

# php - 使用 jquery、php、mysql 的动态弹出窗口

> ID：15184219
> 
> 赞同：2
> 
> 时间：2013-03-03T09:19:16.567
> 
> 标签：php, jquery, mysql

```
<script type="text/javascript" src="jquerynew.js"></script>
<script>

    $(document).ready(function() 
    {       
       $('#wings').click(function(event) 
       {
           loadPopupBox();
           $('body').css('background','#333');        
       });

       $('#popupclose').click(function(event) 
       {            
           unloadPopupBox();
           $('body').css('background','white');
       });

       function loadPopupBox() 
       {  
          $('#popupbox').fadeIn("slow");
       }        

       function unloadPopupBox() 
       {
          $('#popupbox').fadeOut("normal");       
       }  
       $("#popupbox").hide();
    });

</script>

<style>
 table { border-collapse:collapse; margin-left:370px; margin-top:20px; padding:10px; font-family:Trebuchet MS; min-width:530px; }
 table th,td { border:1px solid #8AC007; }

 #popupbox {  position:fixed; _position:absolute; /* hack for internet explorer 6 */ background:#FFFFFF; left:472px; top:150px; 
           border:2px solid lightgray; padding:15px;  z-index:100px; font-size:15px;  -moz-box-shadow: 0 0 5px lightgray; 
           -webkit-box-shadow: 0 0 5px lightgray; box-shadow: 0 0 5px lightgray; display:none; }

 #popupclose { border:0px solid lightgray; color:#6FA5E2; font-family:verdana; font-weight:bold; line-height:15px; float:right;
               cursor:pointer;  text-decoration:none; }
</style>

<?php

  $con = mysql_connect("localhost","root","");  
  mysql_select_db("popupsql",$con);

  $users = mysql_query("SELECT u.id, u.username, u.firstname, u.lastname FROM user u");  
  $rows = array();
  while($row = mysql_fetch_assoc($users))
  $rows[] = $row;

  echo '<table>
             <tr style="background:#8AC007;color:#8A4C25;font-size:15px;">
                <th style="padding:10px;">Firstname</th>
                <th style="padding:10px;">Lastname</th>
                <th style="padding:10px;">Status</th>
             </tr>';
  foreach($rows as $row)
  { 
     echo '<tr>
               <td style="padding:5px;">'.$row['firstname'].'</td>
               <td style="padding:5px;">'.$row['lastname'].'</td>
               <td style="padding:5px;text-align:center;">
                 <a id="wings">view status</a>
                 <div class="popupbox">
                 <div style="height:30px;"><img class="popupclose" src="close.png" style="float:right;"></img></div>';
                 $grades = mysql_query('SELECT u.firstname, u.lastname,u.email,ggh.finalgrade FROM grade_grades_history ggh, user u WHERE 
                                        u.id = ggh.userid AND u.id = '.$userid.'');   

                 $rows = array();
                 while($row = mysql_fetch_array($grades));
                 $rows[] = $row;
                 foreach($rows as $row)
                 {
                   echo $row['email'];
                 }
             echo '</div>
               </td>
           </tr>';
  }
  echo '</table>';     
?> 
```

这是我动态显示 jQuery 弹出窗口的代码。弹出窗口仅针对第一行打开，但我需要所有用户的弹出窗口，即，当我单击第一个用户查看状态时，弹出窗口应显示他/她的适当状态. 任何人都可以建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:29:30.720

而不是在行上使用 id 使其成为一个类。您正在使用 id 作为选择器来分配仅适用于第一个匹配元素的点击处理程序。但是如果您将它们更改为类并选择该类，它将适用于所有这些。

# templates - 如何仅更新工作簿模板的 Sheet1...？

> ID：15184224
> 
> 赞同：1
> 
> 时间：2013-03-02T15:53:02.723
> 
> 标签：templates, vba, excel

我有这段代码可以将数据从一个工作簿中的范围复制到特定模板的 Sheet1。（然后，来自 Sheet1 的数据填充模板文件中的第二个工作表。）每个文件都创建并以“names1”范围内的名称命名。

这似乎工作得很好，但我需要它来做另外两件事：

*   首先，我需要它检查是否已经使用该文件名创建了一个文件，如果是，则不要覆盖它，或者提示保存。
*   其次，最重要的是，我需要找到一种方法让它检查现有文件，然后只用上面的信息覆盖 Sheet1，而不更改文件中任何其他工作表上的任何内容，然后保存并关闭文件。然后继续检查文件中的所有其他名称，或者从模板创建一个新文件（就像我的代码已经做的那样），或者只更新 sheet1 并保存/关闭文件。

我已经搜索过这方面的帮助，但是由于我有限的 VBA 知识，我不确定将加载项放在哪里以及使用什么语法。任何帮助将不胜感激！！！

这是我的工作代码：

```
Sub Smart1()

Dim src As Workbook
Dim dst As Workbook
SavePath = ActiveWorkbook.Path

Set src = ActiveWorkbook

For Each C In Range("Names1")

i = C.Row

Name = Cells(i, 44).Value
PSFFAll = Cells(i, 45).Value
CLSFall = Cells(i, 46).Value
CLSWin = Cells(i, 47).Value
CLSEnd = Cells(i, 48).Value
WWRFall = Cells(i, 49).Value
WWRWin = Cells(i, 50).Value
WWREnd = Cells(i, 51).Value
DORFWin = Cells(i, 52).Value
DORFEnd = Cells(i, 53).Value
AccWin = Cells(i, 54).Value
AccEnd = Cells(i, 55).Value

fname = Cells(i, 44).Value & ".xlsx"

Workbooks.Open FileName:=ThisWorkbook.Path & "\Smart1.xlsx"

With Workbooks("Smart1.xlsx").Worksheets("Sheet1")
.Range("a2").Value = Name
.Range("B2").Value = PSFFAll
.Range("C2").Value = CLSFall
.Range("D2").Value = CLSWin
.Range("E2").Value = CLSEnd
.Range("F2").Value = WWRFall
.Range("G2").Value = WWRWin
.Range("H2").Value = WWREnd
.Range("I2").Value = DORFWin
.Range("J2").Value = DORFEnd
.Range("K2").Value = AccWin
.Range("L2").Value = AccEnd
End With

ActiveWorkbook.saveas FileName:=SavePath & "\" & fname
ActiveWorkbook.Close True
On Error Resume Next

Next C

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:33:52.837

这只是您的第一个问题的答案。使用它来检查文件是否存在。

```
Sub saveme()

    SavePath = "D:\folder"
    fname = "test.xls"
    fullsavepath = SavePath & "\" & fname

    On Error Resume Next
    If Dir(fullsavepath) <> "" Then
        Open fullsavepath For Binary Access Read Lock Read As #1: Close #1
    End If

    If Err.Number <> 0 Then

        If MsgBox("A file with the name '" & fname & "' is already open." & vbCrLf & _
            "Do you want to replace it?", vbYesNo + vbQuestion + vbDefaultButton2, _
            "Microsoft Excel") = vbYes Then

            Application.DisplayAlerts = False
            Workbooks(fname).Close savechanges:=False
            ActiveWorkbook.SaveAs Filename:=fullsavepath
            Application.DisplayAlerts = True
        End If

    Else
        ActiveWorkbook.SaveAs Filename:=fullsavepath
    End If

    Err.Clear

End Sub 
```

重要的部分是：

```
If Dir(fullsavepath) <> "" Then
    Open fullsavepath For Binary Access Read Lock Read As #1: Close #1
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:09:48.240

这是答案！感谢特威德尔！Sub Smart1() Dim src As Workbook Dim dst As Workbook SavePath = ActiveWorkbook.Path

```
Set src = ActiveWorkbook

For Each C In Range("Names1")

    i = C.Row

    Name = Cells(i, 44).Value
    PSFFAll = Cells(i, 45).Value
    CLSFall = Cells(i, 46).Value
    CLSWin = Cells(i, 47).Value
    CLSEnd = Cells(i, 48).Value
    WWRFall = Cells(i, 49).Value
    WWRWin = Cells(i, 50).Value
    WWREnd = Cells(i, 51).Value
    DORFWin = Cells(i, 52).Value
    DORFEnd = Cells(i, 53).Value
    AccWin = Cells(i, 54).Value
    AccEnd = Cells(i, 55).Value

    fname = Cells(i, 44).Value & ".xlsx"

    If Dir(SavePath & "\" & fname) = "" Then
        'Filename does not exist, then use template
        Set dst = Workbooks.Open(Filename:=ThisWorkbook.Path & "\Smart1.xlsx")
    Else
        'File already exists, then use existing & update
        Set dst = Workbooks.Open(Filename:=SavePath & "\" & fname)
    End If

    With dst.Worksheets("Sheet1")
        .Range("a2").Value = Name
        .Range("B2").Value = PSFFAll
        .Range("C2").Value = CLSFall
        .Range("D2").Value = CLSWin
        .Range("E2").Value = CLSEnd
        .Range("F2").Value = WWRFall
        .Range("G2").Value = WWRWin
        .Range("H2").Value = WWREnd
        .Range("I2").Value = DORFWin
        .Range("J2").Value = DORFEnd
        .Range("K2").Value = AccWin
        .Range("L2").Value = AccEnd
    End With
    Application.DisplayAlerts = False
    dst.Close True, SavePath & "\" & fname
    Application.DisplayAlerts = True
    On Error Resume Next

Next C 
```

结束子

# java - SimpleDateFormat ParseException：无法解析的日期

> ID：15184231
> 
> 赞同：1
> 
> 时间：2013-03-03T09:20:52.083
> 
> 标签：java

我正在尝试执行此代码：

```
Date date = null;
if (detailsBean.getDiscoveryProjectBean ().getCreatedDate ()==null || 
    detailsBean.getDiscoveryProjectBean ().getCreatedDate ().equalsIgnoreCase(""))
{
    projectDetails.getDiscoveryProject().setCreationTime(new Date());
}
else
{
    try 
    {
        date = new SimpleDateFormat (FormatUtils.simpleFormat).
            parse (detailsBean.getDiscoveryProjectBean ().getCreatedDate ());
    } catch (Exception e) {
        throw new PanDaApplicationException (e.getMessage ());
    }
    projectDetails.getDiscoveryProject().setCreationTime(date);
} 
```

在 try 块中抛出 ParseException 异常。但是，我不知道其原因，因为代码看起来不错。`FormatUtils.simpleFormat`is的定义`public static final String simpleFormat = "dd-MMM-yyyy"`并且`detailsBean.getDiscoveryProjectBean().getCreatedDate()`具有类似的值`28-Feb-2013`

我真的不知道为什么会抛出这个异常，我需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:26:46.873

我的猜测是问题出在`SimpleDateFormat`使用默认语言环境的方式上——如果您的语言环境不使用“Feb”作为月份的缩写名称，您就会遇到问题。因此，如果您的所有数据实际上都是英文的，您可能想要：

```
DateFormat format = new SimpleDateFormat(FormatUtils.simpleFormat, Locale.US);
format.setTimeZone(...); // See below
date = format.parse(detailsBean.getDiscoveryProjectBean().getCreatedDate()); 
```

注意关于设置时区的部分。同样，`SimpleDateFormat`如果您不指定任何其他内容，将使用您的系统默认值。（您将获得“指定时区的午夜”的瞬间作为`Date`值。）

我还强烈建议您考虑使用[Joda Time](http://joda-time.sf.net)而不是内置的`Date`/`Calendar`类型 - 这是一个更好的日期/时间 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T09:27:44.507

```
Locale.setDefault (Locale.ROOT);
System.out.println (new SimpleDateFormat ("dd-MMM-yyyy").parse ("28-Feb-2013"));
Locale.setDefault (Locale.forLanguageTag ("ru"));
System.out.println (new SimpleDateFormat ("dd-MMM-yyyy").parse ("28-Feb-2013")); 
```

对我来说输出是：

```
Thu Feb 28 00:00:00 MSK 2013
Exception in thread "main" java.text.ParseException: Unparseable date: "28-Feb-2013"
    at java.text.DateFormat.parse(DateFormat.java:357)
    at DateFormat.main(DateFormat.java:19) 
```

因此，同一日期成功地用`ROOT`语言环境解析，但用俄语失败。

# bash - 如何在 bash 子外壳中读取用户的输入

> ID：15184235
> 
> 赞同：5
> 
> 时间：2013-03-03T09:21:33.670
> 
> 标签：bash, shell

我有一个片段，用户可以粘贴到他们的终端中。它看起来像这样：

```
"script..." | sudo bash -s ARG1 
```

脚本部分实际上是通过 HTTP 获取脚本的 curl 命令。
我还需要将一个参数传递给该脚本，我可以使用 bash 的 -s 参数来做到这一点。（这都是片段的一部分）

但是，我还需要“阅读”才能工作。我想提示用户进行其他配置。它现在不起作用，可能是由于 Subshel​​ls / stdin 被重定向。

我该怎么做？

# background - 如何在 Windows Phone 中更改所选项目的背景颜色？

> ID：15184237
> 
> 赞同：0
> 
> 时间：2013-03-03T09:21:41.860
> 
> 标签：background, listbox, windows-phone, selected

如何更改 Windows Phone 中具有数据模板的列表框中的选定项目的背景颜色？

我已经看到它可以与 Setter Properties 一起使用。我会在哪里写它们？

谢谢。

**代码**

```
<ListBox x:Name="listLocs" HorizontalAlignment="Left" Height="605" VerticalAlignment="Top" Width="250" SelectionChanged="listLocs_SelectionChanged" Margin="10,155,0,0" BorderBrush="#FF030042" BorderThickness="2" Foreground="#FF030042">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <StackPanel>
                    <Image Source="/Images/Pin2.png" Width="60"  Height="60" />
                </StackPanel>
                <StackPanel>
                    <StackPanel>
                        <TextBlock x:Name="txtName" Margin="10,0,0,0" Foreground="#FF030042"  FontSize="30" Text="{Binding Name}"/>
                    </StackPanel>
                    <StackPanel>
                        <TextBlock x:Name="txtDescription" Margin="10,0,0,0" Foreground="#FF030042" FontSize="20" Text="{Binding Description}"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:58:24.253

您可以在 selectchanged 事件处理程序中的代码中执行此操作：

```
 private void listLocs_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        ListBoxItem myitem = listLocs.SelectedItem as ListBoxItem;
       SolidColorBrush brush =  new SolidColorBrush(Color.FromArgb(255,255,0,0));
       myitem.Background = brush;
    } 
```

# sed - 如何使用 sed 替换 ini 文件中的值？

> ID：15184243
> 
> 赞同：4
> 
> 时间：2013-03-03T09:22:17.100
> 
> 标签：sed

此示例来自 devstack 脚本。

```
sed -i -e "/^\[$section\]/,/^\[.*\]/ s|^\($option[ \t]*=[ \t]*\).*$|\1$value|" "$file" 
```

谁能解释这个`sed`替换命令是如何工作的？

我了解一些基本`sed`的机制，但这对我来说似乎很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:56:39.997

-i 选项在原地编辑文件 $file。

# 地址范围

要匹配的行范围的语法是 /pattern1/,/pattern2/ 脚本搜索从包含行首 $section 中的字符的第一行到此 ^ 的行范围[.*] 表示包含至少一个字符的行。

# 替代

对于与上述范围说明符匹配的所有行，将执行替换命令 s/pattern/replacement/ 命令。注意使用 | 分隔替代命令 - s|pattern|replacement|。

要匹配的模式使用插入符号 (^) 从行首开始。

部分 (....) 位于替换部分中，称为 \1。

在 (...) 部分中是字符串 $section 后跟可能有多个空格或制表符 - [ \t]* 表示没有或多个制表符或空格。后跟一个 '=' 字符，可能更多的空格或制表符。.*$ 将匹配任意数量的字符到行尾。

替换的 \1$value 是前面提到的包含 (...) 的部分，后跟 $value 中的值。

！

# c# - 使用两个日期检索数据的 SQL 查询

> ID：15184244
> 
> 赞同：-1
> 
> 时间：2013-03-03T09:22:19.727
> 
> 标签：c#, sql, winforms, date

我正在尝试使用两个日期从数据库中检索数据，但 Visual Studio 抛出语法错误。

以下是使用 sql 查询填充数据集的方法：

```
public DataSet OrderBetweenDates(string date1, string date2)
{

    //  string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
    DataSet dataSet = new DataSet();
    OleDbConnection oleConn = new OleDbConnection(connString);

    try
    {
        oleConn.Open();
        string sql = "SELECT Order.OrderNumber, (Customer.Title +SPACE(2)+ Customer.CustomerName) as [Customer Name], Customer.CustomerEbayname, Customer.EmailAddress, Customer.PhoneNumber, (Customer.Address1 + SPACE(2) + Customer.Address2 + SPACE(2)+ Customer.City + SPACE(2) + Customer.PostCode + SPACE(2) + Customer.Country) as Address,  Order.ItemPurchased, Order.PurchasedDate, Order.TotalPrice FROM Customer INNER JOIN [Order] ON Customer.[CustomerID] = Order.[CustomerID] WHERE [PurchasedDate] >= #date1# AND [PurchasedDate] <= #date2#";
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
        dataAdapter.Fill(dataSet, "Customer");
    }
    catch (Exception ex)
    {
        MessageBox.Show("An exception has been occured\n" + ex.ToString());
        Console.WriteLine(ex.ToString());
    }
    finally
    {
        oleConn.Close();
    }
    if (dataSet.Tables.Count <= 0)
        return null;
    else
        return dataSet;
} 
```

![在此处输入图像描述](../Images/f5f37be05ebe76981f2561f514afb419.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:52:08.990

推荐的方式（**强烈推荐**）是使用参数。但是，如果您不想遵循最佳实践并且总是想陷入困境，请尝试以下操作：

```
string sql = @"SELECT [Order].OrderNumber,
(Customer.Title +SPACE(2)+ Customer.CustomerName) as [Customer Name],
Customer.CustomerEbayname, Customer.EmailAddress, Customer.PhoneNumber,
(Customer.Address1 + SPACE(2) + Customer.Address2 + SPACE(2)+ Customer.City
 + SPACE(2) + Customer.PostCode + SPACE(2) + Customer.Country) as Address,
[Order].ItemPurchased, Order.PurchasedDate, Order.TotalPrice
FROM Customer INNER JOIN [Order] ON Customer.[CustomerID] = Order.[CustomerID]
WHERE [PurchasedDate] >= #" + date1 + "# AND [PurchasedDate] <= #" + date2 + "#"; 
```

你注意到变化了吗？您的日期参数包含在查询字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:28:35.977

你的情况如下：

```
WHERE [PurchasedDate] >= #date1# AND [PurchasedDate] <= #date2# 
```

现在`#date1#`并且`#date2#`不是有效日期 - 您可能希望为这些查询添加参数。请参阅[MD.Unicorn 在您的其他问题中给您的答案](https://stackoverflow.com/a/15009342/1174942)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:31:29.863

除了已经提到的可能的日期格式问题；

```
SELECT Order.OrderNumber, 
...
Order.ItemPurchased, 
Order.PurchasedDate, 
Order.TotalPrice 
... 
```

`Order`是 from 的关键字，`ORDER BY`并且需要 - 在所有地方 - 包含在`[]`.

```
SELECT [Order].OrderNumber, 
... 
```

# django - Django 1.5 升级后 STATIC_URL 不工作

> ID：15184245
> 
> 赞同：1
> 
> 时间：2013-03-03T09:22:21.290
> 
> 标签：django, django-settings, django-staticfiles

我可能只是累了，没有注意到这里有什么明显的东西，但是升级到 Django 1.5 后，我的静态文件的路径被破坏了。

设置.py

```
from os.path import abspath, basename, dirname, join, normpath

SITE_ROOT = dirname(dirname(abspath(__file__)))

SITE_NAME = basename(SITE_ROOT)

PROJECT_ROOT = dirname(SITE_ROOT)

STATIC_ROOT = normpath(join(SITE_ROOT, 'static', 'site_media'))

STATIC_URL = "/site_media/static/"

STATICFILES_FINDERS = (
    "staticfiles.finders.FileSystemFinder",
    "staticfiles.finders.AppDirectoriesFinder",
    "staticfiles.finders.LegacyAppDirectoriesFinder",
    "compressor.finders.CompressorFinder", 
```

)

索引.html

```
 <link rel="stylesheet" href="{{ STATIC_URL }}css/site_base.css" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T09:29:47.297

```
{% load static from staticfiles %}

<link rel="stylesheet" href="{% static 'css/site_base.css' %}" /> 
```

Django 1.5 新实现的文档：

[https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#template-tags](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#template-tags)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:34:23.980

因为在 Django 1.5 中你必须使用 {% load staticfiles %}

```
 <link rel="stylesheet" href="{{STATIC_URL}}css/site_base.css" /> 
```

# ruby-on-rails-3 - Postgres 表没有在主键上设置自动增量

> ID：15184246
> 
> 赞同：0
> 
> 时间：2013-03-03T09:22:29.937
> 
> 标签：ruby-on-rails-3, postgresql, activerecord

在 Rails 中，My Membership 模型迁移如下所示：

```
class CreateMemberships < ActiveRecord::Migration
  def change
    create_table :memberships do |t|
      t.integer :user_id
      t.integer :organization_id
      t.integer :membership_type_id

      t.timestamps
    end
  end
end 
```

和我的用户模型迁移：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :first_name
      t.string :last_name
      t.string :email

      t.timestamps
    end
  end
end 
```

对我来说，这些看起来几乎一样。但是，当我查看中的表格时，`psql`我看到了这一点：

```
cd_dev=# \d memberships
                  Table "public.memberships"
       Column       |            Type             | Modifiers 
--------------------+-----------------------------+-----------
 id                 | integer                     | not null 
```

和

```
cd_dev=# \d users
                                       Table "public.users"
    Column     |            Type             |                     Modifiers                      
---------------+-----------------------------+----------------------------------------------------
 id            | integer                     | not null default nextval('users_id_seq'::regclass) 
```

换句话说，`memberships`表的 id 字段不会被自动分配。在 Rails 控制台中，当我尝试通过简单地创建新成员`Membership.create(user_id: 1, organization_id: 1)`时失败说：

`ActiveRecord::StatementInvalid: PG::Error: ERROR: null value in column "id" violates not-null constraint`

我可能可以用谷歌搜索一种使该`id`领域正常工作的方法`memberships`，但我不明白这是怎么发生的。关于 Rails/Postgres 有什么我应该知道的吗？我不记得我是使用 Rails 生成器还是手动输入这些模型的迁移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:27:49.317

这不正常。你确定你没有手动摆弄数据库吗？尝试

```
rake db:drop db:create db:migrate 
```

# android - Android-Tools Gradle 插件

> ID：15184253
> 
> 赞同：6
> 
> 时间：2013-03-03T09:23:18.510
> 
> 标签：android, sdk, compilation, version, gradle

我目前正在尝试让新的 android 构建系统（[http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system)）工作。因此，我创建了一个`build.gradle`包含以下内容的文件：

```
apply plugin: 'android'

android {
    compileSdkVersion 15
    target='android-15'    

    defaultConfig {
        targetSdkVersion 15
        minSdkVersion 8
        versionCode 10
    }

    sourceSets {
        main {
            manifest {
                srcFile 'AndroidManifest.xml'
            }
        }
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.android:android:4.0.1.2'
    compile project(':ActionBarSherlock')
    compile fileTree(dir: './libs', include: '*.jar')
} 
```

我是根据文档完成的，所以我希望它能够工作；但是，我收到以下错误消息：

> 错误：默认配置间接依赖于 Android API 级别 14，但变体“调试”的 minSdkVersion 是 API 级别 8

删除对 android 4.0.1.2 的显式依赖时，错误消失了，但我留下了编译错误，因为无法解析 Android 文件本身。举个例子，`Activity`或者`View`找不到类。`minSdkVersion`据说，我可以降级到旧版本的 Android 以`15`匹配`8`.

插件本身在版本 0.3 的根 build.gradle 中声明。

你们中有人知道如何解决该错误吗？

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:34:44.943

嗯，不知何故，我让它使用支持 API 而不是整个 Android 作为依赖项来工作......至少它现在工作......

# node.js - 在nodejs中刷新页面时保持新会话

> ID：15184254
> 
> 赞同：0
> 
> 时间：2013-03-03T09:23:26.677
> 
> 标签：node.js, mongodb, session, express, passport.js

我有 0.8.21 nodejs 和 3.1.0 express 框架（模块是最新的）。有著名的heroku项目，包括express、mongodb和passport auth：

[https://github.com/madhums/nodejs-express-mongoose-demo](https://github.com/madhums/nodejs-express-mongoose-demo)

会话存储：

```
 var express = require('express')
    , mongoStore = require('connect-mongo')(express)

  ...

  app.use(express.logger('dev'))

  // set views path, template engine and default layout
  app.set('views', config.root + '/app/views')
  app.set('view engine', 'jade')

  app.configure(function () {
    // dynamic helpers
    app.use(viewHelpers(config))

    // cookieParser should be above session
    app.use(express.cookieParser())

    // bodyParser should be above methodOverride
    app.use(express.bodyParser())
    app.use(express.methodOverride())

    // express/mongo session storage
    app.use(express.session({
      secret: 'noobjs',
      store: new mongoStore({
        url: config.db,
        collection : 'sessions'
      })
    }))

    // connect flash for flash messages
    app.use(flash())

    // use passport session
    app.use(passport.initialize())
    app.use(passport.session())

    app.use(express.favicon())

    // routes should be at the last
    app.use(app.router)

    ... 
```

**问题：**我希望用户只登录 70 秒，所以我写了`cookie: {maxAge: 70*1000},`之后`app.use(express.session({`会发生什么：用户只能在 70 秒内通过站点，而不是退出。如果用户刷新页面或通过链接，会话更新到数据库，如：

```
{ "_id" : "cVYWfv7kHbaEPNUCD2Bbbaw4",
  "session" : "{\"cookie\":{\"originalMaxAge\":70000,\"expires\":\"2013-03-02T14:46:52.146Z\",\"httpOnly\":true,\"path\":\"/\"},\"passport\":{\"user\":\"51320f3fd04c162d14000003\"},\"flash\":{}}",
  "expires" : Date( 1362235612146 ) } 
```

但无论如何，用户只记录了 70 秒。我的意思是会话更新到 mongodb，新`expires`日期，但用户仍然可以在登录后仅 70 秒后登录。

请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:12:36.200

我想 connect-mongo 在会话上维护一个 TTL 索引，该索引在 1 分钟间隔后检查是否删除会话。所以你只能让你的会话在 1 分钟、2 分钟或 k 分钟内过期，k 是整数。如果使用连接 mongo 过期逻辑，则不能删除会话。

**你可以做什么**

1.  要么自己为自定义过期编写逻辑，而忽略 connect mongo 正在做什么。（伪方法）

2.  `OR`70 秒后，只需删除浏览器中的 cookie。编写一个这样做的javascript代码。尽管有一个缺点，用户可能仍然会禁用 javascript 并让 cookie 存活，并且他可能可以将会话继续到 120 秒 @ max（假设您将会话`expires`设置为 70 秒）。如果在这种情况下这 50 秒可能会受到影响，那么您可以使用这个快速优雅的修复。

# xaml - 如何将应用程序的背景全局设置为 Windows 商店应用程序中的图像？

> ID：15184255
> 
> 赞同：0
> 
> 时间：2013-03-03T09:23:27.120
> 
> 标签：xaml, windows-store-apps

我正在尝试在我的应用程序中将图像设置为背景，现在我知道如何在本地使用

`<Grid> <Grid.Background> <ImageBrush ImageSource="/Assets/Background.png"/> </Grid.Background> </Grid>`

我怎样才能在全球范围内做到这一点，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:24:29.883

有两种方法可以做到这一点： 1\. 为您的资源添加不带名称的样式，因此它将应用于该类型的每个元素：

```
<Page.Resources>
    <Style TargetType="Grid">
        <Setter Property="Background">
            <Setter.Value>
                <ImageBrush ImageSource="/Assets/SplashScreen.png"/>
            </Setter.Value>
        </Setter>
    </Style>
</Page.Resources> 
```

2.添加带有名称的样式并在需要时应用它

```
<Page.Resources>
<Style x:Key="ImageStyle"  TargetType="Grid">
    <Setter Property="Background">
        <Setter.Value>
            <ImageBrush ImageSource="/Assets/SplashScreen.png"/>
        </Setter.Value>
    </Setter>
</Style>
</Page.Resources>
<Grid Style="{StaticResource ImageStyle}">
</Grid> 
```

# apache-flex - 带有状态和单选按钮的奇怪的 flex 行为

> ID：15184256
> 
> 赞同：0
> 
> 时间：2013-03-03T09:23:29.983
> 
> 标签：apache-flex, flex4

我有以下弹性组件：

```
<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" 
         width="400" 
         height="300"
         borderColor.male="blue"
         borderColor.female="#FF00F6"
         initialize="init(event)">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            protected function genderChanged(event:Event):void
            {               
                setByRadioGroup();
            }

            protected function init(event:FlexEvent):void
            {
                currentState = "male";
                //setByRadioGroup()
            }

            protected function setByRadioGroup():void {
                currentState = genderGroup.selectedValue as String;
            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <s:RadioButtonGroup id="genderGroup" change="genderChanged(event)">

        </s:RadioButtonGroup>
    </fx:Declarations>
    <s:states>
        <s:State name="male"/>
        <s:State name="female"/>
    </s:states>
    <s:Form>
        <s:FormItem label="name">
            <s:TextInput name="nameField" id="nameField"/>
        </s:FormItem>
        <s:FormItem label="gender">
            <s:RadioButton label="male" groupName="genderGroup" selected.male="true"/>
            <s:RadioButton label="female" groupName="genderGroup" selected.female="true"/>
        </s:FormItem>
    </s:Form>
</s:BorderContainer> 
```

我试图通过将 currentState 设置为“male”来初始化组件的整个状态（包括选定的单选按钮）。这最初有效（选择了正确的单选按钮并且边框为蓝色）： ![初始状态](../Images/62bee1ec198c51a23b5955e2e79a5a43.png)

但是当我单击另一个单选按钮时，用户界面有时会处于奇怪的状态 - 单选选择恢复为原始状态，但边框颜色会发生变化： ![点击后](../Images/d69e6e2b50479b52eeeaf72525639117.png)

我错过了某种比赛吗？

我正在使用 flex 4.6.0 和 flash builder 4.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:09:24.587

您还必须告知其他状态的选定值，因为它可以按预期工作：

```
<s:RadioButton label="male" groupName="genderGroup" selected.male="true" selected.female="false"/>
<s:RadioButton label="female" groupName="genderGroup" selected.female="true" selected.male="false"/> 
```

虽然我宁愿不使用状态标识符设置选定的值。我会在组件中添加一个状态更改侦听器，并在其处理函数中设置选定的值。但这只是个人的选择......

# php - DateTime 是 php 中的预定义函数或方法吗？

> ID：15184259
> 
> 赞同：0
> 
> 时间：2013-03-03T09:23:45.890
> 
> 标签：php

伙计们即时帮助某人使用他的 php 代码。但我似乎无法弄清楚这段代码有什么问题：

![在此处输入图像描述](../Images/a8543a069aa8e8df7536cb4d0851301f.png)

系统在 LOCALHOST 中很好。但是当我将它上传到免费主机（000webhost.com）时，它给了我这个错误：

**“致命错误：在第 273 行的 /home/a5927002/public_html/thesis2/lib/functions.php 中调用未定义的方法 DateTime::add()”**

所以我寻找一个函数或类 DateTime，我无法在任何地方找到它。但它在本地主机中工作正常。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:25:54.947

我认为您的本地使用 php 5.3 或更高版本编译，但您的共享主机使用 php 5.2 或更低版本编译。添加功能需要 PHP 5.3.0 或更高版本。有关更多信息，请参阅以下链接：

[约会时间](http://www.php.net/manual/en/datetime.add.php)

DateTime::modify() 是使用 PHP 5.2 (php.net) 时的替代方法。例如，您可以使用 modify 函数将 1 天添加到特定日期：

```
$date = date_create('2006-12-12');
date_modify($date, '+1 day');
echo date_format($date, 'Y-m-d'); 
```

# javascript - AngularJS - 自定义元素配置的最佳场所

> ID：15184261
> 
> 赞同：0
> 
> 时间：2013-03-03T09:23:56.347
> 
> 标签：javascript, html, angularjs

问候溢出者，

关于传递会影响特定自定义元素行为或样式的配置信息的最佳实践是什么？

我的想法是：作为无行为的客户属性（即没有为它们定义指令）。

示例：我想配置我的自定义元素，因为我有“按下”和“切换”按钮。我是否应该使用自定义属性，例如 al:type="Toggle"，它没有被定义为指令（对我的元素的行为没有影响，即虚拟属性）？还是有更好的最佳实践方式？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:37:58.973

（如果我正确理解了您的问题..）没有标准化的方法来执行此操作，但是 angular-ui 通过允许您指定已向依赖注入器注册的“值”对象的名称来处理此问题。很难解释，[更容易展示](http://angular-ui.github.com/#/directives-jq)（例如，查看“如何”下的 jquery passthrough）。

我个人遵循的约定是这样的：

```
<div myDirective="optionsFn()">foo</div> 
```

其中 'optionsFn' 从我的控制器返回选项。

# updatepanel - 如何使用更新面板和验证器来划分 matser 页面

> ID：15184262
> 
> 赞同：0
> 
> 时间：2013-03-03T09:24:05.310
> 
> 标签：updatepanel

我有一个母版页，其左侧`Div`区域包含一个`UserControl`持有 3`texboxes+validators`和一个提交按钮，仅用于将简单数据插入我的数据库。

在 MainContent 区域中，我有我`contentPlaceHolder`的所有网页。在这些页面中，我有更多`textboxes+validators`和另一个提交按钮。

问题是，当我想从 UC 或主区域页面提交某些内容时，似乎所有主页面区域（即 UC 和主页面）中都会触发验证器。

我知道我应该使用更新面板，但不确定如何包装母版页的每个部分以及如何配置它，因此它将分别为每个部分激活验证器。

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:46:17.043

您需要设置每个验证器的 ValidationGroup 以将它们分成组。请参阅[此](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.validationgroup.aspx)示例。

# vim - 找不到配色方案

> ID：15184264
> 
> 赞同：5
> 
> 时间：2013-03-03T09:24:16.630
> 
> 标签：vim, colors

我正在尝试安装一个名为“github”的配色方案，它是从 vim 站点获得的，我已经完全按照如何通过添加`github.vim`到我的`~/.vim/colors`文件夹来安装它。但是，执行后我收到错误消息“找不到配色方案`github.vim`”：

```
:colorscheme github.vim 
```

在搜索了无数帖子以寻求解决方案后，我似乎无法找到问题所在，因此，如果有人可以提供帮助，那就太好了。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T09:25:53.107

试试这个命令：

```
:colorscheme github 
```

您不应该使用该命令的`.vim`扩展名。`colorscheme`

要查看您需要使用的颜色方案中的全部颜色范围，`gvim`因为终端版本`vim`会限制它可以显示的颜色数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T18:29:48.430

您使用的主题是仅 gui 主题。您可以使用 Gvim 或尝试其他主题。看看summerfruit256：[http](http://www.vim.org/scripts/script.php?script_id=2577) ://www.vim.org/scripts/script.php?script_id=2577 。

# php - 我想在这个邮件功能中使用密件抄送或抄送功能？

> ID：15184267
> 
> 赞同：1
> 
> 时间：2013-03-03T09:25:00.967
> 
> 标签：php, email, sendmail

我想在这个邮件功能中使用密件抄送或抄送功能？

**这里是我的邮件功能**

```
 <?php
//SENDS EMAIL THAT TELLS THE USER TO ACTIVATE THE ACCOUNT
$activation = 'activation.php?key='.$key;
$your_email = 'non-reply@mydomain.pk'; //CHANGE TO YOUR SETTINGS
$domain = $_SERVER["HTTP_HOST"]; //YOUR DOMAIN AND EXTENSION
$to  = $email;
$subject = 'MyDomain Activate Account';
$message .='<img src="http://mydomain.com/images/securedownload.jpg"/>';
$message = 'Welcome,<br/> '.$_POST['username'].'. You must activate your account via   this       message to log in. Click the following link to do so:   http://'.$domain.'/'.$activation;
$headers = 'From: Mydomain<'.$your_email.'@'.$domain.'>\r\n'; //MODIFY TO YOUR SETTINGS
$headers .= 'Content-type: text/html\r\n';
mail($to, $subject, $message,  $headers);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T18:09:57.597

这很简单，如果有人从这里获得帮助，只需分享：

```
//......
//...Other setting goes here....

// Always set content-type when sending HTML email
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";

// More headers
$headers .= 'From: My Name <myemail@example.com>'. "\r\n";
//Multiple CC can be added, if we need (comma separated);
$headers .= 'Cc: myboss1@example.com, myboss2@example.com' . "\r\n";
//Multiple BCC, same as CC above;
$headers .= 'Bcc: myboss3@example.com, myboss4@example.com' . "\r\n";

mail($to, $subject, $message,  $headers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:34:57.843

您应该添加到邮件的 to 和 headers 部分。

**对于 TO 部分**

```
$to = "to@to.com, cc@cc.com" 
```

**对于标题部分**

```
$headers .= "To: To Name <to@to.com>\n";
$headers .= "CC: CC Name <cc@cc.com>\n";
$headers .= "BCC: BCC Name <bcc@bcc.com>\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:33:52.733

只需在您的代码中添加密件抄送/抄送

```
<?php
//SENDS EMAIL THAT TELLS THE USER TO ACTIVATE THE ACCOUNT
$activation = 'activation.php?key='.$key;
$your_email = 'non-reply@mydomain.pk'; //CHANGE TO YOUR SETTINGS
$domain = $_SERVER["HTTP_HOST"]; //YOUR DOMAIN AND EXTENSION
$to  = $email;
$subject = 'MyDomain Activate Account';
$message .='<img src="http://mydomain.com/images/securedownload.jpg"/>';
$message = 'Welcome,<br/> '.$_POST['username'].'. You must activate your account via   this       message to log in. Click the following link to do so:   http://'.$domain.'/'.$activation;
$headers = 'From: Mydomain<'.$your_email.'@'.$domain.'>\r\n'; //MODIFY TO YOUR SETTINGS
$headers .=  "BCC: email@domain.com;\r\n"
$headers .= 'Content-type: text/html\r\n';
mail($to, $subject, $message,  $headers);
?> 
```

# php - 从 unix 时间戳的 mysql 字段中获取 10 个生日，包括即将到来和已过的年龄

> ID：15184269
> 
> 赞同：0
> 
> 时间：2013-03-03T09:25:26.760
> 
> 标签：php, mysql, unix-timestamp, date

我无法弄清楚它的mysql查询，所以我想也许有人可以帮助我。

我有 mysql 表，其中包含用户数据，包括他们的生日（由 php 用 time() 插入），我需要从中获得 10 个生日。棘手的部分是它应该随着用户年龄的生日而即将到来和过生日。即将到来的将在第二天之内。像这样：

*   13:44 01-03-2013 Bob 10 岁了
*   2013 年 4 月 3 日 15:55 萨拉将 22 岁

人的年龄可能最好在查询后用 php 计算，我可以自己做。

但是，如果无法完成此查询，那么我想可以得到 10 个即将到来的生日和 10 个已过的生日，这应该是可能的。

谢谢大家的阅读和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:59:35.743

看看这篇文章：[如何选择即将到来的生日](http://www.tsc-web.net/archive/2007/12/mysql-query-howto-select-upcoming-birthdays/comment-page-1/)

# javascript - 为什么 jquery .change 事件不像我预期的那样工作

> ID：15184270
> 
> 赞同：-1
> 
> 时间：2013-03-03T09:25:41.287
> 
> 标签：javascript, jquery

这是我的问题：

我有一个带有两个选项的选择标签 - “Hello”和“World”

html

```
<select>
<option> Hello </option>
<option> World </option>
</select> 
```

**在 IE 中**，当您选择一个选项并且它成为选定选项时，蓝色突出显示保持不变，直到您单击选择标记之外的其他位置。（在 Firefox 中不是这样）

所以我写了一个脚本，当一个选项被选中时，它会从元素中移除焦点。

脚本

```
$('select').change(function() {
        $(this).blur(); 
```

但是仍然存在一个小问题：如果我选择 Hello 然后获得 Hello 选项 - 焦点将保留并且蓝色突出显示。But if I choose hello and then world option -everything works..
I read that For select menus, the change event occurs when an option is selected!!!But why the option has to be different from the previous selected to trigger the change event . 我希望你明白我的英语不是很好

这是 js 示例 - 请在 IE [TEST JSFIDDLE 示例中对其进行测试](http://jsfiddle.net/tNLGk/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:30:58.330

如果您选择相同的值，该选项并没有真正**改变**对吧？

The change event is only triggered if the option changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:38:13.850

尝试这个：

```
$(document).ready(function() {
  $('select').mouseout(function(){$(this).blur();})
}); 
```

这是一种 hack，会起作用，但不建议使用，因为如果用户试图用键盘填充它，那么它可能会有点麻烦

# java - JUNG2：将顶点放在固定点

> ID：15184275
> 
> 赞同：0
> 
> 时间：2013-03-03T09:26:20.333
> 
> 标签：java, jung

我想问是否有任何方法可以将顶点放在画布上的特定点（x，y）。我想启动一个已经构建图形的应用程序，但是使用 g.addVertex(1) 将顶点添加到图形，但它被放置在画布上的随机点上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:48:00.173

[http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/layout/AbstractLayout.html](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/layout/AbstractLayout.html)

`setLocation`其次是`lock`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:18:46.413

```
public static class MyVertex  {
    private String name;
    private int vIndex;
    private boolean visited = false;
    private int distance = 0;

    private double x;
    private double y;

    public MyVertex(String name, int vIndex) {
        this.name = name;
        this.vIndex = vIndex;
    }

    public void setX(double x) {
        this.x = x;
    }

    public double getX() {
        return x;
    }

    public void setY(double y) {
        this.y = y;
    }

    public double getY() {
        return y;
    }

    public String getName() {
        return name;
    } 
```

}

也许这会对你有所帮助？我将它用于我的项目，效果很好！

# c# - 从多个父级获取 UIElement 子级

> ID：15184276
> 
> 赞同：1
> 
> 时间：2013-03-03T09:26:27.457
> 
> 标签：c#, wpf, uielement

我有`StackPanel`一些`WrapPanel`。每个内部都有`WrapPanel` 两个元素：

```
<StackPanel FlowDirection="RightToLeft" Grid.Column="2" Grid.Row="1" Name="check_boxes_layout">
    <WrapPanel>
        <CheckBox Name="chk1" Checked="Checked_Changed" Unchecked="Unchecked"></CheckBox>
        <Rectangle Width="50" Fill="Red" Name="rec1" Margin="10 2 2 2"/>
    </WrapPanel>
    <WrapPanel>
        <CheckBox Name="chk12" Checked="Checked_Changed" Unchecked="Unchecked"></CheckBox>
        <Rectangle Width="50" Fill="Blue" Name="rec2" Margin="10 2 2 2"/>
    </WrapPanel>
<StackPanel/> 
```

我想获取类型复选框的所有子项。我该怎么做？

```
foreach (var item in check_boxes_layout.Children.OfType<CheckBox>())
{
    //this code just return Wrap Panel
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:39:06.380

使用这个递归函数：

```
List<UIElement> GetAllChildren(Panel c)
{
    List<UIElement> list = c.Children.Cast<UIElement>().ToList();
    foreach( var elem in list.OfType<Panel>())
        list.AddRange(GetChildren(elem));
    return list;
} 
```

不，你可以说：

```
foreach (var item in GetAllChildren(check_boxes_layout).OfType<CheckBox>())
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:39:43.360

我首先通过经纱板循环并得到它的孩子

```
 foreach (WrapPanel warppanel in check_boxes_layout.Children)
 {
     foreach (var item in warppanel.Children.OfType<CheckBox>)
     {
          .
          .
          .
     }
 } 
```

# python - 使用 pymc 用 MCMC 拟合两个正态分布（直方图）？

> ID：15184293
> 
> 赞同：14
> 
> 时间：2013-03-03T09:28:57.317
> 
> 标签：python, statistics, pymc

我正在尝试拟合 CCD 上的光谱仪检测到的线轮廓。为了便于考虑，我提供了一个演示，如果解决了，它与我*实际*想要解决的非常相似。

我看过这个： [https](https://stats.stackexchange.com/questions/46626/fitting-model-for-two-normal-distributions-in-pymc) ://stats.stackexchange.com/questions/46626/fitting-model-for-two-normal-distributions-in-pymc 和其他各种问题和答案，但他们正在做一些根本不同的事情比我想做的。

```
import pymc as mc
import numpy as np
import pylab as pl
def GaussFunc(x, amplitude, centroid, sigma):
    return amplitude * np.exp(-0.5 * ((x - centroid) / sigma)**2)

wavelength = np.arange(5000, 5050, 0.02)

# Profile 1
centroid_one = 5025.0
sigma_one = 2.2
height_one = 0.8
profile1 = GaussFunc(wavelength, height_one, centroid_one, sigma_one, )

# Profile 2
centroid_two = 5027.0
sigma_two = 1.2
height_two = 0.5
profile2 = GaussFunc(wavelength, height_two, centroid_two, sigma_two, )

# Measured values
noise = np.random.normal(0.0, 0.02, len(wavelength))
combined = profile1 + profile2 + noise

# If you want to plot what this looks like
pl.plot(wavelength, combined, label="Measured")
pl.plot(wavelength, profile1, color='red', linestyle='dashed', label="1")
pl.plot(wavelength, profile2, color='green', linestyle='dashed', label="2")
pl.title("Feature One and Two")
pl.legend() 
```

![真实值和测量值图](../Images/ef53d867f32c15f215a9e28240fadaf5.png)

**我的问题：** PyMC（或一些变体）可以给我上面使用的两个组件的平均值、幅度和 sigma 吗？

请注意，我真正适合我真正问题的函数不是高斯函数——所以请提供使用通用函数的示例（如我的示例中的 GaussFunc），而不是“内置” pymc.Normal() 类型功能。

此外，我了解模型选择是另一个问题：因此，对于当前的噪声，1 个组件（配置文件）可能是统计上合理的。但我想看看 1、2、3 等组件的最佳解决方案是什么。

我也不赞同使用 PyMC 的想法——如果 scikit-learn、astroML 或其他一些包看起来很完美，请告诉我！

编辑：

我在很多方面都失败了，但我认为正确的事情之一是：

```
sigma_mc_one = mc.Uniform('sig', 0.01, 6.5)
height_mc_one = mc.Uniform('height', 0.1, 2.5)
centroid_mc_one = mc.Uniform('cen', 5015., 5040.) 
```

但我无法构建一个有效的 mc.model。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T19:58:11.023

不是最简洁的 PyMC 代码，但我做出这个决定是为了帮助读者。这应该运行，并给出（真正）准确的结果。

我决定使用具有自由范围的统一先验，因为我真的不知道我们在建模什么。但可能有人对质心位置有所了解，并且可以在那里使用更好的先验。

```
### Suggested one runs the above code first.
### Unknowns we are interested in

est_centroid_one = mc.Uniform("est_centroid_one", 5000, 5050 )
est_centroid_two = mc.Uniform("est_centroid_two", 5000, 5050 )

est_sigma_one = mc.Uniform( "est_sigma_one", 0, 5 )
est_sigma_two = mc.Uniform( "est_sigma_two", 0, 5 )

est_height_one = mc.Uniform( "est_height_one", 0, 5 ) 
est_height_two = mc.Uniform( "est_height_two", 0, 5 ) 

#std deviation of the noise, converted to precision by tau = 1/sigma**2
precision= 1./mc.Uniform("std", 0, 1)**2

#Set up the model's relationships.

@mc.deterministic( trace = False) 
def est_profile_1(x = wavelength, centroid = est_centroid_one, sigma = est_sigma_one, height= est_height_one):
    return GaussFunc( x, height, centroid, sigma )

@mc.deterministic( trace = False) 
def est_profile_2(x = wavelength, centroid = est_centroid_two, sigma = est_sigma_two, height= est_height_two):
    return GaussFunc( x, height, centroid, sigma )

@mc.deterministic( trace = False )
def mean( profile_1 = est_profile_1, profile_2 = est_profile_2 ):
    return profile_1 + profile_2

observations = mc.Normal("obs", mean, precision, value = combined, observed = True)

model = mc.Model([est_centroid_one, 
              est_centroid_two, 
                est_height_one,
                est_height_two,
                est_sigma_one,
                est_sigma_two,
                precision])

#always a good idea to MAP it prior to MCMC, so as to start with good initial values
map_ = mc.MAP( model )
map_.fit()

mcmc = mc.MCMC( model )
mcmc.sample( 50000,40000 ) #try running for longer if not happy with convergence. 
```

## 重要的

请记住，该算法与标签无关，因此结果可能会显示`profile1`所有特征，`profile2`反之亦然。

# android - 在 Play 商店中发布具有不同名称的相同应用

> ID：15184295
> 
> 赞同：3
> 
> 时间：2013-03-03T09:29:00.270
> 
> 标签：android

我知道在技术上可以将同一个应用程序放入具有 2 个几乎相同的 APK（不同的包名称和标题）的应用商店，虽然可能有点狡猾 - 我想这不会被谷歌允许，但我看不到他们的 Ts & Cs 中禁止这样做的任何内容

[https://play.google.com/about/developer-distribution-agreement.html](https://play.google.com/about/developer-distribution-agreement.html)

例如“我的酷应用免费”和“最棒的应用试用”

*问题*：这是否允许？

*原因*：我和一位同事正在讨论标题和下载描述的影响（基于不同的索引/用户搜索），并想知道人们是否曾经发布具有 2 个不同的游戏/应用程序，看看哪个更成功

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T11:39:42.353

如您所说，如果应用程序的包名称不同，则可以。对于具有试用版和付费版的应用程序，通常会这样做。关于您的问题，我们目前在 Google Play 中有大约 6 个应用程序，它们是同一应用程序的不同品牌版本。这意味着，它们有自己的包名、启动画面和一些数据库数据，但应用程序实际上是一样的。到目前为止，我们在 Google 上没有遇到任何问题，所以我认为这是可能的。

仅供参考，如果您有兴趣做类似的事情，就应用程序的可维护性而言，最佳选择是使用[Android 库](http://www.vogella.com/articles/AndroidLibraryProjects/article.html)项目。

基本上，您有一个在 Eclipse 中选中“Android 库”选项的主要大项目。你有所有的主要代码。另一方面，您创建了两个链接到您的库的附加项目。他们只需要他们的 manifest.xml 和一些活动来调用库的主要活动。如果您想在 Google Play 中发布这两个应用程序，它们的包名称必须不同。

此外，您可以为每个项目覆盖一些资源。例如，您可以在 /res/values 中有一个布尔值，指示项目是试用版还是付费版，它们具有不同的值。然后，在库中，如果它是试用版，您可以检查此布尔值以显示广告。您可以做的另一件有用的事情是为每个应用程序使用自定义启动画面，方法是在每个项目中使用相同名称的不同图像资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T09:33:51.550

据我所知，这是允许的，而且过去肯定已经做过（伪装成流行游戏的恶意软件）。如果您发布的应用程序是您自己的作品（实际上只是名称不同），那么我也看不到任何人报告它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-24T10:31:31.797

根据[Play 管理中心开发者计划政策（2020 年 10 月 21 日生效），](https://support.google.com/googleplay/android-developer/answer/10177647?hl=en&ref_topic=9877065)这是禁止的。

> 我们不允许应用仅提供与 Google Play 上已有的其他应用相同的体验。应用程序应通过创建独特的内容或服务为用户提供价值。以下是一些常见违规行为示例： 复制其他应用程序的内容而不添加任何原始内容或价值。创建具有高度相似的功能、内容和用户体验的多个应用程序。如果这些应用程序的内容量都很小，开发人员应该考虑创建一个聚合所有内容的应用程序。

# php - 登录表单需要完成多次才能登录

> ID：15184298
> 
> 赞同：0
> 
> 时间：2013-03-03T09:29:14.463
> 
> 标签：php, html, forms, login

我有一个登录表单（HTML -> PHP）。我输入正确的详细信息，然后重新加载页面，我必须再次输入详细信息。我按下提交，然后它又做了一次。在第三次（有时我认为是第二次）它实际上让我登录。

**任何帮助将不胜感激。**

这是表单 HTML：

```
<!-- Login Form -->
                    <form method="post" id="login-form-splash">
                    <input type="text" class="text" name="username" onfocus="if(this.value == 'Username') { this.value = ''; }" value="Username" />
                    <input type="password" name="password" class="password" onfocus="if(this.value == 'Password') { this.value = ''; }" value="Password" />
                    <input type="submit" name="submit" value="Login" class="submit" />
                    <br />
                    <a href="resetpassword.php"><span>Lost Password?</span></a>
                    <br />
                    No account yet? <a href="register.php">Register</a>.<br />
            </form> 
```

这是实际登录的PHP：

```
<?php
//Check if login form was submitted.
if(isset($_POST['submit']))
{   

    //include important settings and functions.
    include($_SERVER['DOCUMENT_ROOT'] . '/includes/config.php');

    //Check if both fields were completed.
    if($_POST['username'] == '' || $_POST['password'] == '')
    {
        //Tell them whats wrong.
        echo "<script language=\"javascript\">alert('You need to complete both fields.');</script>";
    }   else
        {
            //The completed both fields.
            //Localise vars.
            $username = $_POST['username'];
            $password = $_POST['password'];

            //Protect against SQL Injection using mysql_prep function. [mysql_prep can be found in ./includes/functions.php]
            mysql_prep($username);
            mysql_prep($password);

            //MD5 Hash the password to check against hashed password in DB.
            $password = md5($password);

            //Connect to MySQL Database.
            include($_SERVER['DOCUMENT_ROOT'] . '/includes/connect.php');

            //If connection exists
            if(isset($mysql_connection))
            {
                //Run MySQL Query on DB.
                $sql = "SELECT * FROM `users` WHERE `username` = '$username' AND `password` = '$password'";
                $result = mysql_query($sql, $mysql_connection) or die('Cannot Execute:'. mysql_error());

                //Check if there is a match. There can only be one.
                if(mysql_num_rows($result) == 1)
                {
                    //Create session variables and set values within them.
                    $_SESSION['username'] = $username;

                    //Redirect to Members page.
                    header('Location: members.php'); 
                }   else
                    {
                        //Username and Password are not correct, or the account doesn't exist.
                        echo "<script language=\"javascript\">alert('Please check that you have entered the details correctly.');</script>";
                    }
            }   else
                {
                    //Database error.
                    echo "<script language=\"javascript\">alert('There was a database error. Please try again or contact a technician at errors@eatgamesleep.com');</script>";
                }
        }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:10:16.160

也许你应该更换

```
 if(isset($mysql_connection)) { 
```

只是

```
if($mysql_connection){ 
```

# php - 我的新密码不允许使用 &

> ID：15184306
> 
> 赞同：0
> 
> 时间：2013-03-03T09:30:07.340
> 
> 标签：php, jquery

我的网站上有一个窗口，访问者可以在其中更改密码。

问题是 & 字符从未被使用：

如果我输入这两个新密码：

stack& stack&（第二个是确认）

BD 中的插入是堆栈（没有 &）。

这是js代码：

`data: 'nouveau_mdp=' + $('input#champ_nouveau_mdp').val(),`

警报显示我“堆栈&”

在 PHP 中，$_POST 的 var_dump 给了我：

堆栈（没有 &）。

& 是 jquery 的保留字吗？

这是我的 js 代码：

```
$.ajax({
                            type: 'POST',
                            url: 'modification_mdp.php',
                            data: 'nouveau_mdp=' + $('input#champ_nouveau_mdp').val(),
                            dataType: 'text',
                            success: function(reponse) {
                                reponse = $.trim(reponse); 
```

你有想法重新解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:42:31.013

编码字段值

`data: 'nouveau_mdp=' + encodeURI($('input#champ_nouveau_mdp').val()),`

通过这种方式`&`是用 ascii 号编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:39:03.947

PHP 中不允许通过 Get 方法或 Post 方法传递 & 字符。由于通过 GET 方法访问 PHP 的常用语法是`ines.php?user=username&password=mypassword`'&' 字符分隔两个变量。

这就是为什么它不从 'Stack&' 中获取 '&' 您可以使用 Javascript 来验证是否在文本框中没有输入 &。使用JavaScript对变量进行编码... PHP端无需解码

```
encodeURIComponent("stack&") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:48:39.647

尝试传递一个关联数组，jQuery 将为您编码：

```
data: { nouveau_mdp: $('input#champ_nouveau_mdp').val() } 
```

您需要更改接收此值的 PHP 代码以匹配（它获取的是数组而不是字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T09:54:49.237

这条线是问题所在：

```
data: 'nouveau_mdp=' + $('input#champ_nouveau_mdp').val(), 
```

& 字符在 HTTP 中具有特殊的含义。如果您有多个参数，它们将由 & 分隔，例如 nouveau_mdp=mynewpassword&old_mdp=myoldpassword

您需要做的是将诸如 &、= 等字符编码为它们的十六进制等价物，即分别为 %26 和 %3D。

在 JavaScript 中，您可以使用**encodeURI()**函数来执行此操作。

不过，正如另一个答案中提到的，jQuery 还允许您传递 JSON 参数字典，它会为您进行编码。

# c - “模式匹配”和 C 中的提取

> ID：15184313
> 
> 赞同：1
> 
> 时间：2013-03-03T09:30:42.390
> 
> 标签：c, pattern-matching

我需要解析很多文件名（我猜最多 250000 个），包括路径，并从中提取一些部分。

这是一个例子：

原来的：`/my/complete/path/to/80/01/a9/1d.pdf`

需要：`8001a91d`

我正在寻找的“模式”总是以“/8”开头。我需要从 8 个十六进制数字字符串中提取的部分。

我的想法如下（简化为演示）：

```
/* original argument */
char *path = "/my/complete/path/to/80/01/a9/1d.pdf";

/* pointer to substring */
char *begin = NULL;

/* final char array to be build */
char *hex = (char*)malloc(9);

/* find "pattern" */
begin = strstr(path, "/8");
if(begin == NULL)
    return 1;

/* jump to first needed character */
begin++;

/* copy the needed characters to target char array */
strncpy(hex,   begin,   2);
strncpy(hex+2, begin+3, 2);
strncpy(hex+4, begin+6, 2);
strncpy(hex+6, begin+9, 2);
strncpy(hex+8, "\0",    1);     

/* print final char array */
printf("%s\n", hex); 
```

这行得通。我只是觉得这不是最聪明的方法。并且可能有一些我自己看不到的陷阱。

那么，有人对这种指针移动方式有什么危险提出建议吗？在您看来会有什么改进？

C 是否提供了这样的功能`s|/(8.)/(..)/(..)/(..)\.|\1\2\3\4|`？如果我没记错的话，一些脚本语言有这样的特性；如果你明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:33:49.677

C 本身不提供此功能，但您可以使用 POSIX 正则表达式。它是一个功能齐全的正则表达式库。但是对于像你这样简单的模式，这可能是最好的方法。

顺便说一句，更`memcpy`喜欢`strncpy`. 很少有人知道什么`strncpy`是好的。而我不是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:24:14.073

在仅匹配的简单情况下，`/8./../../..`我自己会亲自寻求`strstr()`解决方案（不需要外部依赖）。如果规则变得更多，您可以尝试词法分析器（[flex](https://github.com/westes/flex/)和朋友），它们支持正则表达式。

在你的情况下是这样的：

```
h2           [0-9A-Fa-f]{2}
mymatch      (/{h2}){4} 
```

可以工作。尽管词法分析器通常返回令牌标识符，但您必须通过副作用将缓冲区设置为匹配。

无论如何，您将在没有依赖关系的情况下获得正则表达式的强大功能，但会以生成（读取：不可读）代码为代价。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:57:50.197

```
/* original argument */
char *path = "/my/complete/path/to/80/01/a9/1d.pdf";
char *begin;
char hex[9];
size_t len;

/* find "pattern" */
begin = strstr(path, "/8");
if (!begin) return 1;

// sanity check
len = strlen(begin);
if (len < 12) return 2; 

   // more sanity
if (begin[3] != '/' || begin[6] != '/' ||  begin[9] != '/' ) return 3;

memcpy(hex,   begin+1, 2);
memcpy(hex+2, begin+4, 2);
memcpy(hex+4, begin+7, 2);
memcpy(hex+6, begin+10, 2);
       hex[8] = 0;     

   // For additional sanity, you could check for valid hex characters here
/* print final char array */
printf("%s\n", hex); 
```

# maven - Maven 插件开发 - 将当前项目的资源包含到插件中 - “include-project-dependencies” - “NoSuchElementException”

> ID：15184314
> 
> 赞同：1
> 
> 时间：2013-03-03T09:30:44.977
> 
> 标签：maven, maven-plugin, resourcedictionary, mojo

我正在尝试开发一个 maven 插件，该插件使用将其用作插件的项目的资源文件。我将该[建议](https://stackoverflow.com/questions/2659048/add-maven-build-classpath-to-plugin-execution-classpath)实施到我的 maven-plugin 项目中，并且构建得很好。但是当我清理并构建使用该插件的项目时，我得到了这个异常：

> “无法在项目临时执行目标 sample.plugin:maven-plugin:1.0-SNAPSHOT:convertproperties（默认）：无法检索组件配置器 include-project-dependencies 以配置 mojo sample.plugin:maven-plugin:1.0-SNAPSHOT :convertproperties: java.util.NoSuchElementException 角色：org.codehaus.plexus.component.configurator.ComponentConfigurator 角色提示：include-project-dependencies"

maven插件的POM文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>sample.plugin</groupId>
    <artifactId>maven-plugin</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>maven-plugin</packaging>

    <name>maven-plugin</name>

    <dependencies>
        <dependency>
            <groupId>org.codehaus.plexus</groupId>
            <artifactId>plexus-utils</artifactId>
            <version>[1.5.0, 1.5.1 ]</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-plugin-api</artifactId>
            <version>2.0.9</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven.plugin-tools</groupId>
            <artifactId>maven-plugin-annotations</artifactId>
            <version>3.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.3</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.3</version>
        </dependency>
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.4</version>
            <type>jar</type>
        </dependency>

        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-project</artifactId>
            <version>2.0.9</version>
            <exclusions>
                <exclusion>
                    <artifactId>maven-artifact</artifactId>
                    <groupId>org.apache.maven</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-model</artifactId>
            <version>2.0.9</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-core</artifactId>
            <version>2.0.9</version>
            <exclusions>
                <exclusion>
                    <artifactId>maven-artifact</artifactId>
                    <groupId>org.apache.maven</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>maven-repository-metadata</artifactId>
                    <groupId>org.apache.maven</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>wagon-provider-api</artifactId>
                    <groupId>org.apache.maven.wagon</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-artifact</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-repository-metadata</artifactId>
            <version>2.0.9</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-provider-api</artifactId>
            <version>1.0-beta-2</version>
        </dependency>
    </dependencies>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.plexus</groupId>
                    <artifactId>plexus-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <goals>
                                <goal>descriptor</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-plugin-plugin</artifactId>
                    <version>2.3</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>2.4</version>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project> 
```

我使用 maven-plugin 的项目的 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.mycompany</groupId>
    <artifactId>temp</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>temp</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.3</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.3</version>
        </dependency>

        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>sample.plugin</groupId>
                <artifactId>maven-plugin</artifactId>
                <version>1.0-SNAPSHOT</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>convertproperties</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <sourcePath>/lang</sourcePath>
                    <destinationPath>lang_json</destinationPath>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <additionalClasspathElements>
                        <additionalClasspathElement>src\main\webapp\lang</additionalClasspathElement>
                    </additionalClasspathElements>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
            </resource>
        </resources>
    </build>

</project> 
```

任何帮助都会非常有用，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:12:11.973

我找到了一个很好的解决方案来使用 maven-plugin 中的项目资源。首先，我放弃了使用该[建议](https://stackoverflow.com/questions/2659048/add-maven-build-classpath-to-plugin-execution-classpath)。我的插件的目的是转换一些资源（.properties）文件并将它们保存到项目中存储 jsp 页面的位置。因此，第一步是复制所需的资源文件并根据需要使用另一个名为“maven-antrun-plugin”的 maven-plugin 重命名它们，方法是这样设置：

```
 <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>CopyLanguagePropertiesAsJson</id>
                    <phase>compile</phase>
                    <configuration>
                        <tasks>
                            <copy file="${basedir}\src\main\resources\x.properties"
                                  tofile="${basedir}\src\main\webapp\x\y.z" />
                        </tasks>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

在那次移动之后，我将打开的属性文件和目标文件作为变量发送到我的插件中，键入“文件”并转换属性文件并存储到转换后的文件中 ==> x.properties --> yz 我说打开是因为 maven 做了工作完全一样；在构建时打开为某些 Maven 插件设置为变量的文件，并发送那些作为这些文件引用的对象。maven-plugin 可以通过这种方式更改这些文件。

像这样：

```
 <plugin>
            <groupId>group.id</groupId>
            <artifactId>artifact-id</artifactId>
            <version>x.x.x</version>
            <configuration>
                <properties>
                    <file>${basedir}\src\main\resources\x.properties</file>
                </properties>
                <convertedFiles>
                    <file>${basedir}\src\main\webapp\x\y.z</file>
                </jsons>
            </convertedFiles>
        </plugin> 
```

这些文件是在我的插件的代码（类扩展 AbstractMojo）中获取的，如下所示：

```
/**
 * @parameter 
 */
private File[] properties;
/**
 * @parameter 
 */
private File[] convertedFiles; 
```

这些是完全实现将 .properties 文件转换为另一个文件并存储在项目某处的目标的步骤。

此外，我遇到了一个异常，它告诉在使用它的项目的构建时间执行 maven-plugin 时找不到某些类。这是由于在当前项目的构建时无法找到所需的 maven-plugin jar 文件造成的。解决方法是使用名为“maven-assembly-plugin”的插件来构建 maven-plugin 的 jar，包括 maven-plugin 使用的依赖 jar 库。maven-plugin 的 pom 文件中的插件配置：

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id> <!-- this is used for inheritance merges -->
                    <phase>package</phase> <!-- bind to the packaging phase -->
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

如果在某些情况下，插件无法按照描述编译您的 jar，可能是由于您的 maven-plugin 中不包含主类。因为使用这种将所有jar文件编译为一个的插件的原因是可以单独执行当前项目的jar，而不需要运行时的任何其他类（构建独立的jar文件）。因此，只需创建一个使用 maven-plugin 类的主类（类扩展 AbstractMojo）并尝试再次编译。成功编译后，您可以删除主类，它会在没有主类的情况下再次成功构建您的 maven-plugin。

如果这篇文章对某人有帮助，我将非常高兴。

# python - 在这种情况下，queue.get() 在 python 中是如何工作的

> ID：15184316
> 
> 赞同：1
> 
> 时间：2013-03-03T09:30:54.410
> 
> 标签：python, multithreading, queue

我正在研究这个例子

[http://eli.thegreenplace.net/2011/12/27/python-threads-communication-and-stopping/](http://eli.thegreenplace.net/2011/12/27/python-threads-communication-and-stopping/)

他是这样使用的

```
while not self.stoprequest.isSet():
    try:
        dirname = self.dir_q.get(True, 0.05)
        ... # do work
    except Queue.Empty:
        continue 
```

我不明白他为什么使用`block`element in`dir_q.get(True)`

我想知道如果我使用程序的行为

`self.dir_q.get()`

文档说，如果我们不提供任何东西，那么如果队列中有东西，它将得到它，否则它将引发异常。

我认为那有什么问题

`block`和`timeout`正在做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:48:14.113

阅读队列上的文档。

> Queue.get([block[, timeout]]) 从队列中移除并返回一个项目。如果可选的 args 块为真并且超时为无（默认值），则在必要时阻止，直到项目可用。如果 timeout 是一个正数，它最多会阻塞 timeout 秒，如果在那段时间内没有可用的项目，则会引发 Empty 异常。否则（块为假），如果一个项目立即可用，则返回一个项目，否则引发空异常（在这种情况下忽略超时）。

当 'block' 参数（不是 'element'）为 True，并且 'timeout' 为正数时，队列将等待 'timeout' 秒，直到队列中有可用的元素。如果在调用 Queue.get() 时队列为空，并且在指定的“超时”（例如 0.05 秒）内没有其他线程 Queue.put() 将元素放入队列，则队列引发空。否则，它返回另一个线程的第一个元素 Queue.put()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:34:22.893

`self.dir_q.get()`阻塞直到有物品可用；`self.stoprequest.set()`因此，如果您取消超时，您的程序可能无法及时做出反应。

# html - 使用 jsoup 提交文本搜索

> ID：15184317
> 
> 赞同：1
> 
> 时间：2013-03-03T09:30:54.847
> 
> 标签：html, jsoup

我有一段 html 代码，它代表网站的一部分，该网站应该是大学教师目录的搜索小部件

```
 <div id="right_column" class="content_main"> 
    <div class="searchbox"> 
     <form method="POST" action="/faculty/directory_search/" id="searchform"> 
      <h4>Search the Directory</h4> 
      <input type="text" name="searchterms" value="" /> 
      <select name="category" class="dropdown"> <option value="all" selected="selected">All Categories</option> <option value="Faculty">Faculty</option> <option value="Staff">Staff</option> <option value="Visitors">Visitors</option> <option value="Full time">Full time</option> <option value="Visiting">Visiting</option> <option value="Special Appointment">Special Appointment</option> <option value="Biological Sciences">Biological Sciences</option> </select> 
      <input type="hidden" name="sort" value="asc" /> 
      <input type="submit" class="submit" value="Search directory" /> 
      <a class="button" href="/faculty/index/desc" id="sortbutton">Sort Alphabetically</a> 
     </form> 
     <script type="text/javascript">
                $('#searchform').ready(function(){
                    $('#sortbutton').click(function(){
                        $('input[name="sort"]').val('desc');
                        $('#searchform').submit();
                        return false;
                    });
                });
            </script> 
    </div> 
```

我正在尝试输入名称“john”并使用 jsoup 使用以下 java 代码提交搜索（适用于 android，但总体上与常规 java 应用程序的 java 代码相同）

```
Document doc = Jsoup.connect("http://www.qatar.cmu.edu/directory/").data("searchterms", "john").post(); 
```

[但是，我一直得到与“ http://www.qatar.cmu.edu/directory/](http://www.qatar.cmu.edu/directory/) ”相同的页面，但没有提交搜索。我注意到在 html 代码中有提交输入类型。我想知道我是否必须提交搜索。如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:44:54.420

我相信您正在对包含表单的页面执行 POST 请求，而不是表单端点。这应该有效：

```
Document doc = Jsoup.connect("http://www.qatar.cmu.edu/faculty/directory_search/").data("searchterms", "john").data("sort", "asc").data("category", "all").post(); 
```

它直接向表单端点发出 POST 请求。

# javascript - 将 BASE64 文件从 Backbone.js 模型发送到浏览器

> ID：15184321
> 
> 赞同：0
> 
> 时间：2013-03-03T09:30:59.293
> 
> 标签：javascript, backbone.js

我在骨干模型中有一个 BASE64 编码文件。

看起来像这样（`console.log(model.toJSON());`）：

```
Attachments: Array[1]
    0: Object
        Content: "JVBERi0xLjQKJeLjz9MKMSAwIG9iaiA8PC9UeXBlL..."
        ContentLength: 29512
        ContentType: "application/octet-stream"
        Name: "Notification.pdf" 
```

如何将其作为点击事件的强制下载发送到浏览器？我想避免返回服务器执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:25:07.560

您有几个不同的选项，都涉及[Data URIs](http://en.wikipedia.org/wiki/Data_URI_scheme)。

如果你只是想快速下载而不关心文件名是什么，那么你可以让你的 JS 这样做：

```
window.location = 'data:application/octet-stream;base64,JVBERi0xLjQKJ...'; 
```

但是，如果您希望能够为下载指定文件名，则需要使用新的 HTML5 功能和`<a>`标签。

```
var a = document.createElement('a');
a.href = 'data:application/octet-stream;base64,JVBERi0xLjQKJ...';
a.download = 'Filename.pdf';
a.click(); 
```

这将适用于较旧的浏览器，但由于该`download`属性是 HTML5 中的新属性，因此它们将下载没有正确文件名的文件。

# android - 如何借助android中的循环在listview中添加值

> ID：15184323
> 
> 赞同：0
> 
> 时间：2013-03-03T09:31:08.230
> 
> 标签：android, android-listview, dynamic-list

我正在尝试在我的程序中实现动态 ListView 来获取解析值。现在我想通过循环的帮助在那个 ListView 中添加那些解析的值，我在这里很无助。我尝试了很多例子，但都失败了，所以请有人帮助我。因为我真的需要帮助。这是一段代码。

```
 package com.ifahja.cricketpredictor;

    import java.net.URL;

    import javax.xml.parsers.SAXParser;
    import javax.xml.parsers.SAXParserFactory;

    import org.xml.sax.InputSource;
    import org.xml.sax.XMLReader;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.AdapterView.OnItemClickListener;

    public class ScorecardActivity extends Activity
    {
     ListView listView;

         public void onCreate(Bundle savedInstanceState)
         {
              super.onCreate(savedInstanceState);

              setContentView(R.layout.scorecard);

              ScorecardGetterSetter scorecard;

              listView=(ListView)findViewById(R.id.listView1);

          try
        {
            URL url;
            String queryString1 ="http://static.cricinfo.com/rss/livescores.xml";

            /* Replace blanks with HTML-Equivalent. */  

            url = new URL(queryString1.replace(" ", "%20"));

            /* Get a SAXParser from the SAXPArserFactory. */

            SAXParserFactory spf = SAXParserFactory.newInstance();

            SAXParser sp = spf.newSAXParser();

            /* Get the XMLReader of the SAXParser we created. */
            XMLReader xr = sp.getXMLReader();

            ScorecardHandler myHandler = new ScorecardHandler();

            xr.setContentHandler(myHandler);

            /* Parse the xml-data our URL-call returned. */
            xr.parse(new InputSource(url.openStream()));

            Log.d("URL", "it's all right");
        } 

        catch (Exception e) 
        {
            System.out.println(e);
            Log.d("URL", "problum in URL");

        }

        scorecard = ScorecardHandler.scorecard;

        //for(int i=1;i<scorecard.getTitle().size();i++)
        //{
        //TextView title = new TextView(this);
        final String android_versions[] = {
                scorecard.getTitle().get(1),
                scorecard.getTitle().get(2),
                scorecard.getTitle().get(3),
                scorecard.getTitle().get(4),
                scorecard.getTitle().get(5),
                scorecard.getTitle().get(6),
        //                  scorecard.getTitle().get(7),
       //                   scorecard.getTitle().get(8),
       //                   scorecard.getTitle().get(9),
       //                   scorecard.getTitle().get(10),
       //                   scorecard.getTitle().get(11),
    `enter code here`//                 scorecard.getTitle().get(12),
    //                  scorecard.getTitle().get(13),
    //                  scorecard.getTitle().get(14),
     //                 scorecard.getTitle().get(15),
   //                   scorecard.getTitle().get(16),
   //                   scorecard.getTitle().get(17),
   //                   scorecard.getTitle().get(18),
   //                   scorecard.getTitle().get(19),

        };

         ArrayAdapter<String> adapter= new ArrayAdapter<String>(this,   R.layout.custom_list_item,android_versions);             
            listView.setAdapter(adapter);

            listView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {

                if(android_versions[arg2]==android_versions[0])
                {
                    Intent intentList_0 = new            Intent(ScorecardActivity.this,List_0.class);
                    startActivity(intentList_0);
                }
                }

                });

        }

         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:34:37.807

这段代码应该可以工作：

```
ListView listView = (ListView) findViewById(R.id.mylist);

List< String> scorecard = new ArrayList< String>(); \\\\\\\\ the trick is here 

String[] values = new String[scorecard .size()];

for (int i = 0; i < scorecard.size(); i++) {
    values[i] = scorecard.get(i).getName();
}
ArrayAdapter< String> adapter = new ArrayAdapter< String>(this,
        android.R.layout.simple_list_item_1, android.R.id.text1, values);

    // Assign adapter to ListView
    listView.setAdapter(adapter); 
```

# html - 韩语在 HTML 页面中无法识别

> ID：15184328
> 
> 赞同：-3
> 
> 时间：2013-03-03T09:32:23.617
> 
> 标签：html, lang

当我在我的 html 代码中输入韩语并通过浏览器打开它时，浏览器无法识别韩语并打印出一些奇怪的单词。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:34:55.690

你犯的错误一定很少。

*   **首先**，您应该在 HTML 页面上指定一个 doctype。使用 HTML5 文档类型

    ```
    <!DOCTYPE html> 
    ```

*   **其次，**您还应该指定文档的字符编码。所以，添加：

    ```
    <meta charset="utf-8" /> 
    ```

    在你的头部。或者对于具有更好跨浏览器兼容性的更长版本，请使用：

    ```
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'> 
    ```

同样正如 Juhana 所说，您的文件必须以相同的编码（即 Unicode UTF-8）保存，才能存储 Unicode 字符并显示它们。

# asp.net - 如何在 Umbraco 中创建可编辑的宏

> ID：15184330
> 
> 赞同：2
> 
> 时间：2013-03-03T09:32:47.490
> 
> 标签：asp.net, content-management-system, umbraco

我正在使用 Umbraco 4.7 开发网站。某些页面中存在某些共同元素，例如“联系方式”、“最新消息”、“最新产品”等。例如，一个页面可以有联系方式，而其他页面可能有新闻。我想创建某种宏（HTML 或 Razor）并希望将它们添加到所需的页面上。但我也希望内容编辑器可以编辑此内容。我该如何创建这样的可编辑宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T11:42:34.777

我假设您熟悉 Razor 和创建宏。如果没有，这里有[一篇合理的文章](http://www.diplo.co.uk/blog/2011/6/17/using-razor-in-umbraco-47.aspx)。

有几种方法可以做到这一点，但每种方法都取决于您希望显示的内容类型。例如，可以仅使用代码创建“最新新闻”宏，只需在剃刀中指定以选择按日期降序排列的前 3 篇新闻文章。同样，如果联系人详细信息数据已经存在于另一个页面上（例如关于我们或联系我们），那么您可以使用 Razor 定位该页面并拉取您希望在宏中显示的字段值。

但是，一旦您想控制宏中显示的项目，您将需要创建一些额外的方法来控制它。对于您的产品，您可能希望选择在宏中显示的产品，从而在整个站点中显示。因此，您可以：

*   为每个产品添加一个是/否字段（例如，称为“在侧栏中显示”），然后可以使用宏来过滤产品显示；或者
*   创建一个名为“Side bar products”的新文档类型，其中包含允许您选择产品的 uComponents 多节点选择器。然后，您可以从此文档类型创建一个节点，并在您的宏中使用 Razor 查询此节点中的产品。（您显然必须确保该节点不显示在站点的导航中！）

到目前为止，第二个选项是更好的选择，因为它更易于维护，提供了一点可扩展性，并且还允许您潜在地拥有多个“侧栏产品”节点，因此您可以在网站的不同部分拥有不同的产品集。第一个选项当然更容易实现，但可能难以维护，因为您必须记住勾选了哪个产品。

# javascript - Chrome 扩展程序：无法将消息发送到 id 为 -1 的选项卡

> ID：15184331
> 
> 赞同：2
> 
> 时间：2013-03-03T09:33:10.880
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我已经检查了许多关于在 Chrome 扩展中传递消息的问题，但我没有发现很多与此相关的具体问题。

我正在使用 chrome.devtools* API，当开发人员工具栏停靠时，我无法在内容脚本之间发送消息。当它没有停靠（即浮动）时，一切正常。

这是我正在做的一个简短示例。

开发工具.js

```
chrome.devtools.panels.create("myExtension", "img/icon.png", 
    "/panel.html", function(extensionPanel) {

         var myData;  //this variable gets manipulated before a user 
                      //clicks on the panel  

         extensionPanel.onShown.addListener(function(panelWindow) {
             chrome.extension.sendMessage({greeting: "update my data", data: myData}, function(response) {});
        });
}); 
```

然后在我的后台脚本（eventPage.js）中，我监听这个消息并将它传递给 panel.js

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    if (request.greeting == "update my data"){
        chrome.tabs.sendMessage(sender.tab.id, {greeting: "show data", showResource: request.data}, function(response) {});
    }
}); 
```

最后，我在 panel.js（从 panel.html 加载）中监听“显示数据”调用

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
        if (request.greeting == "show data") {
            //do stuff with my data here

}); 
```

本质上，我需要在 devtools.js 和 panel.js 之间传递消息，但唯一的方法是使用后台脚本作为中介。

devtools.js -> background.js -> panel.js。

只要开发工具面板没有停靠在窗口上，这实际上就可以正常工作。当它停靠时，我收到一个错误，因为 sendMessage() 不会除了 -1 的选项卡 ID，这是当开发工具停靠到窗口时 sender.tab.id 等于的值。我也尝试使用 chrome.tabs.connect - 持久连接 - 但遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:56:29.330

我最近也刚刚发现如何做到这一点。

“Google Pagespeed”使用的一种技术是获取被检查窗口的标签 ID，并使用端口在扩展程序和背景之间来回传递。

每当您想向扩展程序发送消息时，您都会查找选项卡 ID 并获取其端口。

## 面板.js

```
// get the inspected windows tab id from the panel
var tabId = chrome.devtools.inspectedWindow.tabId;

// create the port
var port = chrome.extension.connect({name: 'connection'});

// keep track of the port and tab id on the background by
// sending the inspected windows tab id
port.postMessage(['connect', tabId]) 
```

## 事件页面.js

```
var activeListeners = {};

chrome.extension.onConnect.addListener(function(port) {
  port.onMessage.addListener(function(message) {
    if (message[0] === 'connect') {
      // get the tab id
      var tabId = message[1];

      // save the reference to the port
      activeListeners[tabId] = port;

      // make sure we clean up after disconnecting (closing the panel)
      activeListeners[tabId].onDisconnect.addListener(function() {
        delete activeListeners[tabId];
      });
    }
  });
}); 
```

这不是一个非常彻底的解释，但我希望你明白这一点。

# c# - 在c#中将文本文件存储到mysql数据库中

> ID：15184334
> 
> 赞同：2
> 
> 时间：2013-03-03T09:33:49.867
> 
> 标签：c#, mysql, c#-4.0

我通过c#读取文件，文件格式是这样的。
**输入文件**

```
00001740,      0.125,      0,      able
00001740,      0.125,      0,      unable
00002098,      0,          0.75,   country
00002312,      0,          0,      love 
```

我想要这个文件在 MYSQL 数据库中。我编写的代码将每一行存储在数据库的每一行中。但是下面的代码只写了文本文件的第一行

```
 private void button1_Click(object sender, EventArgs e)
        {
            string MyConString = "server=localhost;" +
                "database=zahid;" + "password=zia;" +
                "User Id=root;";
            MySqlConnection connection = new MySqlConnection(MyConString);
            MySqlCommand command = connection.CreateCommand();
            MySqlDataReader Reader;
            connection.Open();
            StreamReader reader = new StreamReader("D:\\out.txt");

            string line;
            while ((line = reader.ReadLine()) != null)
            {   
                string[] parts = line.Split(',');
                command.CommandText = "insert into score(POS_ID,Pos,Neg,Word) values('" + parts[1] + "','" + parts[2] + "','" + parts[3] + "','" + parts[4] + "')";

                Reader = command.ExecuteReader();      
            }
        } 
```

此代码仅返回第一行，但我希望所有文本文件行都存储在数据库中。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:40:56.427

尝试清理混乱：

```
private void button1_Click(object sender, EventArgs e)
{
    string[] lines = File.ReadAllLines("D:\\out.txt");
    foreach (var line in lines)
    {
        var data = line.Split(new[] { ',' }, 4);
        int posId = int.Parse(data[0].Trim());
        double pos = double.Parse(data[1].Trim());
        double neg = double.Parse(data[2].Trim());
        string word = data[3].Trim();
        StoreRecord(posId, pos, neg, word);
    }
}

private void StoreRecord(int posId, double pos, double neg, string word)
{
    var conStr = "server=localhost; database=zahid; password=zia; User Id=root;";
    using (var connection = new MySqlConnection(conStr)) 
    using (var command = connection.CreateCommand())
    {
        connection.Open();
        command.CommandText = 
        @"INSERT INTO score 
            (POS_ID, Pos, Neg, Word) 
          VALUES 
            (@posId, @pos, @neg, @word)";
        command.Parameters.AddWithValue("@posId", posId);
        command.Parameters.AddWithValue("@pos", pos);
        command.Parameters.AddWithValue("@neg", neg);
        command.Parameters.AddWithValue("@word", word);
        command.ExecuteNonQuery();
    }
} 
```

注意事项：

*   将数据库插入逻辑分离到专用方法中，以避免在同一个地方进行解析和数据库插入
*   使用`using`语句来正确处理 IDisposable 资源，例如连接和命令
*   使用参数化查询来避免 SQL 注入

此外，您可能不想[`rolling your own CSV parser`](http://secretgeek.net/csv_trouble.asp)使用`String.Split`，而是使用真正的 CSV 解析器。

如果 CSV 文件很大，您可以一次读取一行以避免一次将其加载到内存中：

```
private void button1_Click(object sender, EventArgs e)
{
    using (var stream = File.OpenRead("D:\\out.txt"))
    using (var reader = new StreamReader(stream))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            var data = line.Split(new[] { ',' }, 4);
            int posId = int.Parse(data[0].Trim());
            double pos = double.Parse(data[1].Trim());
            double neg = double.Parse(data[2].Trim());
            string word = data[3].Trim();
            StoreRecord(posId, pos, neg, word);
        }
    }
} 
```

# ruby - 如何知道 ruby 中什么不是线程安全的？

> ID：15184338
> 
> 赞同：95
> 
> 时间：2013-03-03T09:34:02.123
> 
> 标签：ruby, multithreading, concurrency, thread-safety, ruby-on-rails-4

[从 Rails 4 开始](http://edgeguides.rubyonrails.org/4_0_release_notes.html#railties-notable-changes)，默认情况下，一切都必须在线程环境中运行。这意味着我们编写的所有代码**和我们使用的** **所有**gem 都必须是`threadsafe`

所以，我对此有几个问题：

1.  ruby/rails 中什么不是线程安全的？**Vs**什么是 ruby​​/rails 中的线程安全？
2.  是否有已知是线程安全的宝石列表，*反之亦然*？
3.  是否有不是线程安全示例的常见代码模式列表`@result ||= some_method`？
4.  ruby lang核心中的数据结构，例如`Hash`etc线程安全吗？
5.  在 MRI 上，有一个[`GVL`/`GIL`](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)表示一次只能运行 1 个 ruby​​ 线程，除了`IO`，线程安全更改会影响我们吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-03-03T10:35:40.080

没有一个核心数据结构是线程安全的。据我所知，Ruby 附带的唯一一个是标准库（`require 'thread'; q = Queue.new`）中的队列实现。

MRI 的 GIL 并没有使我们免于线程安全问题。它只确保两个线程不能同时运行 Ruby 代码，即*同时*在两个不同的 CPU 上。线程仍然可以在代码中的任何位置暂停和恢复。如果您编写诸如`@n = 0; 3.times { Thread.start { 100.times { @n += 1 } } }`从多个线程更改共享变量之类的代码，则共享变量之后的值是不确定的。GIL 或多或少是对单核系统的模拟，它不会改变编写正确并发程序的基本问题。

即使 MRI 像 Node.js 一样是单线程的，您仍然需要考虑并发性。具有增量变量的示例可以正常工作，但您仍然可以获得竞争条件，其中事情以非确定性顺序发生并且一个回调破坏了另一个回调的结果。单线程异步系统更容易推理，但它们并非没有并发问题。想想一个有多个用户的应用程序：如果两个用户或多或少同时在 Stack Overflow 帖子上点击编辑，花一些时间编辑帖子然后点击保存，第三个用户稍后会看到他们的更改读同一篇文章？

在 Ruby 中，与大多数其他并发运行时一样，任何多于一个操作的操作都不是线程安全的。`@n += 1`不是线程安全的，因为它是多个操作。`@n = 1`是线程安全的，因为它是一项操作（在后台有很多操作，如果我试图详细描述为什么它是“线程安全”的，我可能会遇到麻烦，但最终你不会从分配中得到不一致的结果）。`@n ||= 1`, is not，也没有其他速记操作+赋值。我犯过很多次的一个错误是 write `return unless @started; @started = true`，这根本不是线程安全的。

我不知道任何关于 Ruby 的线程安全和非线程安全语句的权威列表，但是有一个简单的经验法则：如果一个表达式只执行一个（无副作用）操作，它可能是线程安全的。例如：*如果方法**没有副作用*（因为在 Ruby 中几乎任何东西都是方法调用，在很多情况下甚至是赋值，这也适用于其他示例`a + b`）`a = b`。在这种情况下，副作用意味着改变状态的事物。没有*副作用*。`a.foo(b)`*`foo`*`def foo(x); @x = x; end`

 *在 Ruby 中编写线程安全代码最困难的事情之一是所有核心数据结构，包括数组、哈希和字符串，都是可变的。很容易意外泄漏你的状态的一部分，当那部分是可变的时，事情就会变得非常糟糕。考虑以下代码：

```
class Thing
  attr_reader :stuff

  def initialize(initial_stuff)
    @stuff = initial_stuff
    @state_lock = Mutex.new
  end

  def add(item)
    @state_lock.synchronize do
      @stuff << item
    end
  end
end 
```

此类的实例可以在线程之间共享，并且它们可以安全地向其中添加内容，但是有一个并发错误（它不是唯一的）：对象的内部状态通过`stuff`访问器泄漏。除了从封装的角度来看是有问题的，它还打开了一罐并发蠕虫。也许有人拿了那个数组并将它传递到其他地方，而那个代码又认为它现在拥有那个数组并且可以用它做任何它想做的事情。

另一个经典的 Ruby 示例是这样的：

```
STANDARD_OPTIONS = {:color => 'red', :count => 10}

def find_stuff
  @some_service.load_things('stuff', STANDARD_OPTIONS)
end 
```

`find_stuff`第一次使用时工作正常，但第二次返回其他内容。为什么？该`load_things`方法碰巧认为它拥有传递给它的选项哈希，并且确实`color = options.delete(:color)`. 现在`STANDARD_OPTIONS`常量不再具有相同的值。常量仅在它们引用的内容上是恒定的，它们不保证它们所引用的数据结构的恒定性。想想如果这段代码同时运行会发生什么。

如果您避免共享可变状态（例如，由多个线程访问的对象中的实例变量，由多个线程访问的哈希和数组等数据结构）线程安全并不是那么难。尽量减少同时访问的应用程序部分，并将精力集中在那里。IIRC，在 Rails 应用程序中，为每个请求创建一个新的控制器对象，因此它只会被单个线程使用，您从该控制器创建的任何模型对象也是如此。但是，Rails 也鼓励使用全局变量（`User.find(...)`使用全局变量`User`，你可能认为它只是一个类，它是一个类，但它也是全局变量的命名空间），其中一些是安全的，因为它们是只读的，但有时你将东西保存在这些全局变量中，因为它很方便。使用可全局访问的任何内容时要非常小心。

在线程环境中运行 Rails 已经有一段时间了，所以如果不是 Rails 专家，我仍然会说你不必担心 Rails 本身的线程安全。通过执行我上面提到的一些事情，您仍然可以创建不是线程安全的 Rails 应用程序。当涉及到其他 gem 时，除非他们说它们是线程安全的，否则如果他们说它们是假设它们不是，则假设它们不是线程安全的，并查看它们的代码（但只是因为你看到它们像这样`@n ||= 1`并不意味着它们不是线程安全的，这是在正确的上下文中做的完全合法的事情——你应该寻找诸如全局变量中的可变状态，它如何处理传递给它的方法的可变对象，尤其是它如何处理选项哈希）。

最后，线程不安全是一个传递属性。任何使用非线程安全的东西本身就不是线程安全的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-13T18:36:10.860

除了 Theo 的回答之外，如果您要切换到 config.threadsafe，我会在 Rails 中添加一些需要特别注意的问题区域！

*   **类变量**：

    `@@i_exist_across_threads`

*   **环境**：

    `ENV['DONT_CHANGE_ME']`

*   **线程**：

    `Thread.start`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-09T10:53:06.820

> 从 Rails 4 开始，默认情况下一切都必须在线程环境中运行

这不是 100% 正确的。默认情况下，线程安全 Rails 处于启用状态。如果您部署在像乘客（社区）或独角兽这样的多进程应用服务器上，则根本没有区别。如果您在 Puma 或 Passenger Enterprise > 4.0 等多线程环境中部署，此更改仅与您有关

过去，如果你想在多线程应用服务器上部署，你必须打开*config.threadsafe*，这是现在的默认设置，因为它所做的一切要么没有任何影响，要么也应用于在单个进程中运行的 Rails 应用程序（[证明链接](http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html)）。

但是，如果您确实想要 Rails 4[流式传输](http://blog.phusion.nl/2012/08/03/why-rails-4-live-streaming-is-a-big-deal/)的所有优势和多线程部署的其他实时内容，那么也许您会发现[这篇](http://m.onkey.org/thread-safety-for-your-rails)文章很有趣。正如@Theo 悲伤的那样，对于 Rails 应用程序，您实际上只需要在请求期间省略变异静态状态。虽然这是一个简单的做法，但不幸的是，您无法确定您找到的每颗宝石都遵循这一点。据我所知，JRuby 项目的 Charles Oliver Nutter 在[这个](http://rubyrogues.com/124-rr-jruby-with-charlie-nutter/)播客中有一些关于它的提示。

如果你想编写一个纯并发的 Ruby 编程，你需要一些可以被多个线程访问的数据结构，你可能会发现[thread_safe](https://github.com/headius/thread_safe) gem 很有用。*

# java - 在android中按下按钮时从文本框中读取

> ID：15184339
> 
> 赞同：1
> 
> 时间：2013-03-03T09:34:31.390
> 
> 标签：java, android, button, textedit

当我按下按钮时，我试图检索 TextBox 值，但它不起作用。这是我的代码。任何的想法？

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.httpxml);
    httpstuff  = (TextView) findViewById(R.id.http);
    client = new DefaultHttpClient();
    button = (Button)findViewById(R.id.shoppingprice);
    button.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {

                //shoppingapi price =  new shoppingapi();
                et=(EditText)findViewById(R.id.text);
                txt=et.getText().toString();

            }

        });

   new Read().execute("displayprice");
}

@SuppressLint("ShowToast")
public JSONObject productprice(String productname) throws ClientProtocolException,IOException,JSONException
{

    StringBuilder url = new StringBuilder(URL);
    url.append(productname);
    url.append("&searchType=keyword&contentType=json");

    HttpGet get = new HttpGet(url.toString());

    HttpResponse r = client.execute(get);
    int status = r.getStatusLine().getStatusCode();

    Log.d("Price", "asdasd");

    if(status == 200){
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
         jObj = new JSONObject(data);
        JSONObject jsonData = jObj.getJSONObject("mercadoresult");
        JSONObject jsonProducts = jsonData.getJSONObject("products");
        JSONArray jsonArray = jsonProducts.getJSONArray("product");
        jsonArray = (JSONArray) jsonArray.get(1);

        jObj = (JSONObject)jsonArray.get(0);

        return jObj;
        }
    else
    {
    Toast.makeText(MainActivity.this,"error",Toast.LENGTH_LONG).show();

    return null;    

  }
}

public class Read extends AsyncTask<String,Integer,String>
{

    @Override
    protected String doInBackground(String... params) {

        try {

            json = productprice(txt); 

            return json.getString("displayprice");

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
        }

        // TODO Auto-generated method stub
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        //super.onPostExecute(result);

        //httpstuff.setText("The price of the Product is ");
        httpstuff.setText(result);
        httpstuff.setText(txt);
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
 // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

它没有显示错误，但将`txt`值显示为空白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:06:55.133

因为你打电话给这条线

```
new Read().execute("displayprice"); 
```

在 onCreate

当您单击按钮时，txt 值正在发生变化。

`txt`因此，您在分配价值之前正在访问它。如果您想像这样使用值更改并尝试这样

```
public void onClick(View arg0) {

            et=(EditText)findViewById(R.id.text);
            txt=et.getText().toString();

            new Read().execute("displayprice");

        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:02:30.607

`Button`在单击外部引用它。

```
 et=(EditText)findViewById(R.id.text); 
```

`AsynTask`下图直接进入里面

```
public class Read extends AsyncTask<String,Integer,String>
{ 
```

***`String txt = et.getText().toString();`***

```
@Override
protected String doInBackground(String... params) {

    try {

        json = productprice(txt); 

        return json.getString("displayprice");

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        //e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        //e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        //e.printStackTrace();
    }

    // TODO Auto-generated method stub
    return null;
}

@Override
protected void onPostExecute(String result) {
    // TODO Auto-generated method stub
    //super.onPostExecute(result);

    //httpstuff.setText("The price of the Product is ");
    httpstuff.setText(result);
    httpstuff.setText(txt);
}
 } 
```

# android - 从父活动传递结构

> ID：15184340
> 
> 赞同：1
> 
> 时间：2013-03-03T09:34:52.817
> 
> 标签：android, android-activity

我有一个获取和处理数据的活动，我想启动一个新活动，该活动能够从父活动访问一些变量（复杂的数据结构）。

我不能在这里使用序列化，有没有简单的方法在活动之间传递变量？或者也许访问父活动的功能之一并获取我需要的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:42:19.143

> 有没有简单的方法在活动之间传递变量？

```
Intent intent = new Intent(context,SecondActivity.class);
intent.putExtra("isLogin", "yes");
startActivity(intent); 
```

在 SecondActivity 中获取价值。

```
Bundle extras = getIntent().getExtras(); 
if(extras !=null) {
   String value = extras.getString("isLogin");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:38:23.993

您可以使用广播接收器在活动之间传递数据，在主活动上创建单例或使用静态 getter/setter 来获取变量。

如果你想传递不可序列化的变量，我仍然认为你的设计有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:51:20.603

为此，我们可以使用 Bundle Class。

在第一个活动（firstactivity.java）中：

```
//Create the intent
  Intent i = new Intent(firstactivity.this, secondactivity.class);
  EditText txtUserName = (EditText) findViewById(R.id.username);
  String UserName=txtUserName.getText().toString();

  //Create the bundle
  Bundle bundle = new Bundle();
  //Add your data to bundle
  bundle.putString(“UserName”, UserName);  
  //Add the bundle to the intent
  i.putExtras(bundle);

  //Fire that second activity
   startActivity(i); 
```

在第二个活动（secondactivity.java）中：

```
//Get the bundle
Bundle objBundle = getIntent().getExtras();
//Extract the data
String UserName= objBundle.getString(“UserName”); 
```

# django - django：在管理员中更改模型的标题

> ID：15184344
> 
> 赞同：2
> 
> 时间：2013-03-03T09:35:54.567
> 
> 标签：django, django-admin

默认情况下，Django (1.4) 在管理站点中的模型名称中添加字母“s”。例如，我有一个名为 History 的模型类。在查看管理站点时，我发现 django 将其命名为 History `s`。

我怎样才能删除这封信并保持模型名称不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:38:18.523

```
from django.utils.translation import ugettext_lazy as _

class ModelName(models.Model):
    .................

    class Meta:
        verbose_name_plural = _("History") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:37:36.647

`verbose_name_plural`在模型的 Meta 类中定义你自己的。

[https://docs.djangoproject.com/en/dev/ref/models/options/#verbose-name-plural](https://docs.djangoproject.com/en/dev/ref/models/options/#verbose-name-plural)

# android - 在 GoogleMaps 上的 android 应用程序中为不同用户放置不同的标记图标

> ID：15184345
> 
> 赞同：0
> 
> 时间：2013-03-03T09:36:08.053
> 
> 标签：android, google-maps, geolocation, google-maps-markers

我想在 android 应用程序的地图上添加点，我从 Web 服务获取点（纬度，经度），并想用标记将它们放在地图上，但问题是我有两种用户，所以我想放置其中一个具有与其他用户不同的标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:40:15.067

你可以做这样的事情：

```
for (Task tempTask : SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository())
{
    LatLng latlng = new LatLng(tempTask.getLatitude(),tempTask.getLongtitude());
    if (tempTask.getStatus().contentEquals(TasksListActivity.STATUS_WAITING))
    {
        newmarker = map.addMarker(new MarkerOptions().position(latlng).title(tempTask.getTitle()).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_blue)));
    }
    else if (tempTask.getStatus().contentEquals(TasksListActivity.STATUS_IN_PROGRESS))
    {
        newmarker = map.addMarker(new MarkerOptions().position(latlng).title(tempTask.getTitle()).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_bordo)));
    }
    else if (tempTask.getStatus().contentEquals(TasksListActivity.STATUS_ON_THE_WAY))
    {
        newmarker = map.addMarker(new MarkerOptions().position(latlng).title(tempTask.getTitle()).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_turkiz)));
    }
    else if (tempTask.getStatus().contentEquals(TasksListActivity.STATUS_COMPLETE))
    {
        newmarker = map.addMarker(new MarkerOptions().position(latlng).title(tempTask.getTitle()).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_orange)));
    }
    else if (tempTask.getStatus().contentEquals(TasksListActivity.STATUS_FAILED))
    {
        newmarker = map.addMarker(new MarkerOptions().position(latlng).title(tempTask.getTitle()).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_purpul)));
    }
} 
```

如您所见，我根据标记的状态为标记设置了不同颜色的不同图标。

您可以做一些类似的事情，只需更改您预执行的检查即可。

# c - 解释在以下 Turbo C 代码中如何以及为什么使用指针

> ID：15184347
> 
> 赞同：0
> 
> 时间：2013-03-03T09:36:14.130
> 
> 标签：c, pointers, turbo-c

```
int a[10],sum,*p;
sum=0;
for(p=&a[0];p<&a[10];p++)
    sum += *p;
printf("%d",sum) 
```

嗨，我是 turbo c 的新手，尤其是在指针方面。有人可以向我解释一下指针是如何在这个程序中使用的。先感谢您。

我知道程序是如何工作的，但我不明白为什么程序使用指针和“&”符号。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:57:35.207

这是 C 中指针的说明性示例，但是也可以在不使用指针的情况下编写此代码。这里

`p=&a[0]`

^ 存储数组第一个值的内存地址`a`。并且 For 循环将执行，直到指针存储最后一个数组值的内存地址，即`a[10]`。

`sum += *p;`

上面语句中的 ^`*p`代表指针指向的内存地址的值`p`。例如`p`，当前指向`a[0]`. 然后 的值`a[0]`将被添加到`sum`。在 For 循环的下一次迭代中， 的值`p`增加，它将指向`a[1]`。

# ibm-mobilefirst - 禁用证书主机名验证

> ID：15184349
> 
> 赞同：0
> 
> 时间：2013-03-03T09:36:29.153
> 
> 标签：ibm-mobilefirst

我今天刚开始使用 worklight 并尝试连接 RESTFul API。我想使用带有自签名证书的服务器（我不拥有）使用 ssl。我按照 worklight 文档中定义的过程在我的 cacert 中导入了证书。

现在，当我尝试 RESTFul API 时出现以下错误：

```
"errors": [ "Runtime: Http request failed: javax.net.ssl.SSLException:
    hostname in certificate didn't match: 
```

在许多 http java 实现中，有一种方法可以禁用主机名验证，但在使用 worklight 时不知道该怎么做。

任何提示？

由于这个问题已经关闭，因为它离题了，您能告诉我我在哪里发布问题并获得有关 IBM Worklight 的支持吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:56:03.767

请参阅这篇关于自签名证书的文章。

[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fadmin%2Ft_ibm_worklight_server_and_self-signed_certificates.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fadmin%2Ft_ibm_worklight_server_and_self-signed_certificates.html)

# bash - 如何避免 bash 命令替换以删除换行符？

> ID：15184358
> 
> 赞同：85
> 
> 时间：2013-03-03T09:37:56.223
> 
> 标签：bash, newline, command-substitution

为了加快一些 bash 脚本的执行，我想使用命令替换将命令的结果保存在变量中，但是命令替换用空格替换`0x0A`换行符。例如：

```
a=`df -H` 
```

或者

```
a=$( df -H ) 
```

当我想进一步处理`$a`时，换行符被空格替换，所有行现在都在一行上，这更难 grep：

```
echo $a 
```

避免命令替换删除换行符的简单技巧是什么？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-03-03T09:46:04.873

## 不删除非尾随换行符

您正在寻找的换行符在那里，您只是看不到它们，因为您使用`echo`时没有引用变量。

***验证***：

```
$ a=$( df -H )
$ echo $a
Filesystem Size Used Avail Use% Mounted on /dev/sda3 276G 50G 213G 19% / udev 2.1G 4.1k 2.1G 1% /dev tmpfs 832M 820k 832M 1% /run none 5.3M 0 5.3M 0% /run/lock none 2.1G 320k 2.1G 1% /run/shm
$ echo "$a"
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda3       276G   50G  213G  19% /
udev            2.1G  4.1k  2.1G   1% /dev
tmpfs           832M  820k  832M   1% /run
none            5.3M     0  5.3M   0% /run/lock
none            2.1G  320k  2.1G   1% /run/shm
$ 
```

## *尾随*换行符被删除

正如**@user4815162342**正确指出的那样，虽然输出中的换行符没有被删除，但*尾随换行符*会通过命令替换被删除。参见下面的实验：

```
$ a=$'test\n\n'
$ echo "$a"
test

$ b=$(echo "$a")
$ echo "$b"
test
$ 
```

在大多数情况下，这无关紧要，因为`echo`将添加已删除的换行符（除非使用`-n`选项调用它），但在某些极端情况下，程序输出中的尾随换行符不止一个，它们对于一些理由。

## 解决方法

### 1.添加虚拟角色

在这种情况下，正如**@Scrutinizer 所**提到的，您可以使用以下解决方法：

```
$ a=$(printf 'test\n\n'; printf x); a=${a%x}
$ echo "$a"
test

$ 
```

***说明：***字符`x`被添加到输出中（使用`printf x`），在换行符之后。由于换行符不再*尾随*，因此它们不会被命令替换删除。下一步是删除`x`我们添加的，使用`%`运算符 in`${a%x}`。现在我们有了原始输出，所有换行符都存在！！！

### 2\. 使用进程替换读取

代替使用命令替换将程序的输出分配给变量，我们可以使用[*进程替换*](http://tldp.org/LDP/abs/html/process-sub.html) 将程序的输出提供给`read`内置命令（归功于**@ormaaj**）。进程替换保留所有换行符。将输出读取到变量有点棘手，但您可以这样做：

```
$ IFS= read -rd '' var < <( printf 'test\n\n' ) 
$ echo "$var"
test

$ 
```

***解释：***

*   我们将读取命令的[*内部字段分隔符*](http://tldp.org/LDP/abs/html/internalvariables.html)`IFS=`设置为 null，使用. 否则`read`不会将整个输出分配给`var`，而只会分配第一个标记。
*   [`read`](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_08_02.html)我们使用 options调用`-rd ''`。这`r`是为了防止反斜杠充当特殊字符，并将`d ''`分隔符设置为空，以便 read 读取整个输出，而不仅仅是第一行。

### 3\. 从管道中读取

代替使用命令或进程替换将程序的输出分配给变量，我们可以将程序的输出通过管道传递给`read`命令（归功于**@ormaaj**）。管道还保留所有换行符。但是请注意，这次我们`lastpipe`使用[内置](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html)[的`shopt`](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html). 这是必需的，以便`read`在当前 shell 环境中执行命令。否则，该变量将在子 shell 中分配，并且无法从脚本的其余部分访问。

```
$ cat test.sh 
#!/bin/bash
shopt -s lastpipe
printf "test\n\n" | IFS= read -rd '' var
echo "$var"
$ ./test.sh 
test

$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-10T21:31:12.580

我试图解决这个问题，因为我正在使用 bash 流式传输在 F# 脚本上运行解释器的结果。经过一些试验和错误，这原来解决了这个问题：

```
$ cat fsi.ch
#!/bin/bash
echo "$(fsharpi --quiet --exec --nologo $1)"

$ fsi.ch messages.fsx
Welcome to my program. Choose from the menu:
new | show | remove 
```

当然，假设您需要运行一个终端程序。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-22T10:28:50.960

另一个“巧妙的技巧”是使用回车符，它可以防止换行符被剥离，但不会向输出添加任何内容：

```
$ my_func_1 () {
>     echo "This newline is squashed"
> }
$ my_func_2 () {
>     echo "This newline is not squashed"
>     echo -n $'\r'
> }
$ echo -n "$(my_func_1)" && echo -n "$(my_func_2)" && echo done
This newline is squashedThis newline is not squashed
done
$ 
```

但是买家要注意：正如评论中提到的，这对于只是进入终端的输出可以很好地工作，但如果你将它传递给另一个进程，你可能会混淆它，因为它可能不会期待奇怪的 terminating `'\r'`。

# ios - block_copy 何时使用

> ID：15184365
> 
> 赞同：4
> 
> 时间：2013-03-03T09:38:24.800
> 
> 标签：ios, objective-c, objective-c-blocks

何时复制块？该文档说，块“在执行从定义它们的范围返回时被删除。这意味着你不能直接从函数中返回它们。如果块只能在其定义范围仍在调用堆栈上时使用，它们不会像实际那样有用”

因此，这是我尝试过的代码，希望在 viewDidLoad 中执行完成后删除该块。

**MyReaderController.h**

```
@interface MyReaderController : UIViewController
{
    myBlockVar aBlockVar;
}
-(myBlockVar) getABlock;
@end 
```

**MyReaderController.m**

```
@implementation MyReaderController
- (void)viewDidLoad
{
    [super viewDidLoad];
    aBlockVar=[self getABlock];
    NSLog(@"Block Result = %f",aBlockVar(1));
}
-(void) viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];
    NSLog(@"Block Exists even after the execution completes=%@ %f",aBlockVar,aBlockVar(5));
}

-(myBlockVar) getABlock{
    return ^(int var){return 4.0f;};
}

@end 
```

那么，此代码是否需要将 viewDidLoad 更改为如下所示，如果不需要，那么我应该何时使用它。

```
- (void) viewDidLoad{
    [super viewDidLoad];
    aBlockVar=Block_copy([self getABlock]);
    NSLog(@"Block Result = %f",aBlockVar(1));
} 
```

***第2部分***

后来我尝试使用以下代码，希望现在它会在 viewDidDisappear 中将 aBlockVar 作为 nil obj 返回。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    Blocker *blocker=[[Blocker alloc] init];
    myBlockVar myVar=[blocker getABlock];
    aBlockVar=myVar;
    NSLog(@"Block Result = %f",aBlockVar(1));
    blocker=nil;
    myVar=nil;
} 
```

**拦截器.m**

```
#import "Blocker.h"

@implementation Blocker

-(myBlockVar) getABlock{
    return ^(int var){return 4.0f;};
}
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T09:51:59.537

你在用ARC吗？如果是这样，您不需要使用`Block_copy`or `Block_release`。

如果是，那么您对修改后的代码是正确的，因为`Block_copy`将其从堆栈中取出并放入有效保留计数为 1 的堆中。您还需要`Block_release`在最终完成块时在适当的地方调用，使其平衡副本，有效地将保留计数恢复为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T08:26:56.213

现有答案的附录：

即使您使用 ARC，在某些情况下您仍然需要`Block_copy`. 例如，从 an 中提取一个块参数`NSInvocation`并在函数返回后使用它。

```
- (void)interceptInvocation:(NSInvocation *)call {
    BlockType block;
    [call getArgument:&block atIndex:2];  // ARC cannot see this happen
    block = (__bridge BlockType)Block_copy((__bridge void *)block);

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        block();
    });
} 
```

如果没有副本，块将在运行时被释放。似乎`Block_release`不需要匹配，因为当我添加一个时，由于版本太多而崩溃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T10:20:02.983

利用`@property (nonatomic, copy) (int)(^myBlock)(void);`

让系统为你做好内存管理！

初始化：

```
self.myBlock = ^int(void){
    return 4.0;
}; 
```

如果你想在某处摧毁你的街区`self.myBlock = NULL;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T10:48:02.800

**有弧从不，没有弧：**

* * *

: 当你有一个 STACK 块并希望将其保留为 HEAP 块时（例如，当你在函数中有一个块并希望它在退出函数后仍然存在！）

然后你需要block_copy它。

* * *

你也需要像 NSString 一样保留/释放它（使用 block_copy/block_release）

# c# - 当应用程序默认语言设置为 ar（阿拉伯语）时，更改消息对话框显示布局？

> ID：15184366
> 
> 赞同：0
> 
> 时间：2013-03-03T09:38:39.437
> 
> 标签：c#, xaml, windows-8, windows-runtime, cultureinfo

我正在创建一个 Windows 8 应用程序并将默认语言设置为 ar（阿拉伯语）。如下图所示： ![在此处输入图像描述](../Images/0a204ce4bfc24745c2c81c857896463b.png)

现在，当消息对话框中显示任何消息时，它会以阿拉伯语格式（从右到左）显示。如何在不更改应用默认语言的情况下更改显示格式。消息显示如下： ![在此处输入图像描述](../Images/78bfa5996b900217545ccbace16e3b26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:28:32.923

我已经更改了 Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = "en"，然后在显示消息对话时将 Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = "ar" 更改回来。

# scala - 如何为具有协变/逆变类型参数的类定义 flatMap？

> ID：15184371
> 
> 赞同：1
> 
> 时间：2013-03-03T09:39:15.743
> 
> 标签：scala, monads, covariance, contravariance, for-comprehension

假设我们有一个具有协变和逆变类型参数的类：

```
sealed trait Pipe[-I,+O,+R]
// case subclasses 
```

我们为这个类的实例定义了单子操作：

```
object Pipe {
    def flatMap[I,O,Ri,R](p: Pipe[I,O,Ri], f: Ri => Pipe[I,O,R]): Pipe[I,O,R] =
        ...
} 
```

为了能够使用`for`-comprehension，我们需要它`flatMap`是 trait 本身的一个方法：

```
sealed trait Pipe[-I,+O,+R] {
    def flatMap[I,O,Ri,R](f: Ri => Pipe[I,O,R]): Pipe[I,O,R] =
        Pipe.flatMap(this, f);
} 
```

但是，这不会编译，它失败了

> 逆变类型`I`出现在`(R) => Pipe[I,O,R1]`value 类型的协变位置`f`。

（协变类型参数也会出现类似的错误。）

我了解限制以及问题发生的原因。但是是否有一些解决方法，如何`flatMap`使用`Pipes.flatMap`与上述相同的语义来定义特征？也许使用一些隐式转换和/或中间构建器类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T10:28:24.543

最简单的，

```
implicit def pipeFlatMap[I, O, A](pipe: Pipe[I, O, A]) = new {
  def flatMap[B](f: A => Pipe[I, O, B]) = Pipe.flatMap(pipe, f)
} 
```

如果您`Pipe`允许实现`point`, ie `def point[I, O, A](a: A): Pipe[I, O, A]`，那么实现一个完整的`scalaz.Monad`类型类可能会很有用，因为 Scalaz 的隐式将为您`flatMap`和许多其他单子操作免费提供：

```
implicit def pipeMonad[I, O] = new Monad[({type λ[α]=Pipe[I, O, α]})#λ] {
  // TODO implement point and bind
} 
```

# c# - 为每个循环创建多个实例

> ID：15184372
> 
> 赞同：0
> 
> 时间：2013-03-03T09:39:25.517
> 
> 标签：c#, loops, instance, skype, skype4com

我希望能够在每次循环发生时创建一个新的“群聊”，但它只会创建一次，因为我不知道如何创建另一个聊天实例。

```
for (int ii = 0; ii < Convert.ToInt32(StartingV2); ii++)
{
    var chat = skype.CreateChatMultiple(collection);//Want to create a new one these every loop
    chat.OpenWindow();
    chat.Topic = StartingV1;
    foreach (User i in collection)
    {
        chat.SendMessage("Hello and goodbye, " + i.Handle);
    }
    chat.Leave();
    Thread.Sleep(300);
} 
```

我无法弄清楚如何通过测试或搜索自己来制作新的“var chat”。

# java - Torrent 相关：UDP 协议上的跟踪器响应（更新 #3 - 工作）

> ID：15184376
> 
> 赞同：5
> 
> 时间：2013-03-03T09:39:55.073
> 
> 标签：java, http, udp, bittorrent

> 更新 #4：添加了用于使用 UDP 和发送通知消息的演示 java 片段（记住连接是第一个！）检查下面的自己的响应。

==================================================== ==

> 更新#3：我设法让它工作，下面提出的方法 doConnect() 是好的，更多信息在我自己的回复下面。

==================================================== ==

我主要对当announce url的协议是UDP时如何下载跟踪器响应感兴趣。

详细信息：所以这些是来自有效种子文件的一些公告网址（第一个是主要的）

```
http://tracker.torrentbox.com:2710/announce
udp://elbitz.net:80/announce.php?passkey=362fc69de3402e8ef5794c7ecf7c58d4
udp://tracker.podtropolis.com:2711/announce 
```

如果协议是 HTTP，那么一切顺利，这就是我的工作方式：

```
String fullUrl = announceURL + "?info_hash=" + this.m_TorrentInfoHashAsURL + .. // i add the params
URL url = new URL(fullUrl);
URLConnection connection = url.openConnection();
InputStream is = connection.getInputStream();
.. //reading the stream 
```

如果协议是 UDP，则 URL 构造函数会抛出“java.net.MalformedURLException: unknown protocol:udp”

所以我想问题可以恢复到以下问题：如何从 UDP 协议上的 URL 下载资源？（希望它简单，我看不到数据报的东西）

**更新＃1：**

我在网上做了一些更多的调查并得出了下面粘贴的以下结构（应该可以工作..但不是，我的意思是在本地可以，但不是使用真正的跟踪器）

规格链接：http: [//www.bittorrent.org/beps/bep_0015.html](http://www.bittorrent.org/beps/bep_0015.html)

例如：这就是我创建套接字的方式，但在有效的跟踪器上，我从来没有收到任何回复作为响应，所以有些东西不起作用：

```
if full url: udp://elbitz.net:80/announce.php?passkey=362fc69de3402e8ef5794c7ecf7c58d4
this.m_TrackerHost: elbitz.net 
this.m_TrackerPort: 80

private DatagramSocket m_WorkingSocket;
    private DatagramSocket getWorkingSocket() {
        Logger.d(TAG, "getWorkingSocket()");

        if(this.m_WorkingSocket==null){
            Random rnd = new Random();
            for (int i = 0; i < 100; i++) {
                try {
                    int port = 15000 + rnd.nextInt(15000); // [15000-30000)
                    DatagramSocket result = new DatagramSocket(port);
                    InetAddress trackerAddress = InetAddress.getByName(this.m_TrackerHost);
                    result.connect(trackerAddress, this.m_TrackerPort);
                    this.m_WorkingSocket = result;
                } catch (SocketException se) {
                    Logger.w(TAG, "getWorkingSocket() - port is taken");
                } catch (SecurityException se) {
                    Logger.w(TAG, "getWorkingSocket() - port is blocked?");
                } catch (UnknownHostException e) {
                    Logger.w(TAG, "getWorkingSocket() - unkwnown host?");
                }
            }
        }

        return this.m_WorkingSocket;
    } 
```

& 现在来自 doConnect 的完整代码应该是第一个通信阶段（接下来是宣布 .. 那里的类似代码）

```
private boolean doConnect() throws IOException{
    Logger.d(TAG, "doConnect()");

    DatagramSocket workingSocket = this.getWorkingSocket();
    DatagramPacket sendPacket = null, receivePacket = null;

    byte[] sendData = null;
    byte[] receiveData = null;
    int round = 0;

    Logger.d(TAG, "doConnect(): first round, timeout: " + this.getTimeoutInMillis(ACTION_ID_CONNECT, round));
    while(true) {
        if(round==8){
            Logger.w(TAG, "doConnect() - failed to connect with tracker, consumed in vain all 8 rounds..");
            return false;
        }

        workingSocket.setSoTimeout(this.getTimeoutInMillis(ACTION_ID_CONNECT, round));

        if(receivePacket==null){
            /*
            Offset  Size            Name            Value
            0       32-bit integer  action          0 // connect
            4       32-bit integer  transaction_id
            8       64-bit integer  connection_id
            16  */
            receiveData = new byte[16]; //CONNECT: at least 16 bytes
            receivePacket = new DatagramPacket(receiveData, receiveData.length);

            sendData = this.getConnectRequest();//return byte[] with everything..just like in specs
            sendPacket = new DatagramPacket(sendData, sendData.length); 
        }

        try {
            Logger.d(TAG, "doConnect() - sending connect data: " + (Arrays.toString(sendData)));
            workingSocket.send(sendPacket);
            workingSocket.receive(receivePacket);
            break;
        } catch (SocketTimeoutException ste) {
            round ++;
            Logger.w(TAG, "doConnect() connect - new round: " + (round+1) + "|timeout: " + this.getTimeoutInMillis(ACTION_ID_CONNECT, round));
            continue;
        }
    }

    byte[] connectResponse = receivePacket.getData();
    int actionIdFromResponse = Utils.byteArrayToInt(Utils.subArray(connectResponse, 0, 4));
    int transactionIdFromResponse = Utils.byteArrayToInt(Utils.subArray(connectResponse, 4, 4));
    long connectionIdFromResponse = Utils.byteArrayToLong(Utils.subArray(connectResponse, 8, 8));

    if(transactionIdFromResponse!=this.m_TransactionId){
        Logger.w(TAG, "doConnect() - received different transactionId");
        return false;
    }

    if(actionIdFromResponse!=ACTION_ID_CONNECT){
        Logger.w(TAG, "doConnect() - didnt received ACTION_ID_CONNECT");
        return false;
    }

    //store connectionId
    this.m_ConnectionId = connectionIdFromResponse;
    return true;
} 
```

问题仍然存在..我从未收到来自跟踪器的响应（也尝试使用其他 url） 新问题：是否可以在 elbitz.net 上创建套接字，端口：80，当完整的 url 包含更多信息时（例如：/announce）？

**更新#2**

上面的代码似乎工作正常..我在谷歌上找到了一个已经实现这个规范的跟踪器列表，瞧，响应发生了（例如：“udp://tracker.openbittorrent.com:80”）

新问题和再次规范在这里： http: [//www.bittorrent.org/beps/bep_0015.html](http://www.bittorrent.org/beps/bep_0015.html) - 我似乎不知道如何获得同行列表？.. 在对 torrent 跟踪器的正常请求（通过 http）中，有两种情况：正常响应（编码映射）和压缩响应（二进制形式）。那么现在的同行名单呢？

*   从规格来看，这是宣布响应：

> ```
> /*
>               Offset      Size            Name            Value
>               0           32-bit integer  action          1 // announce
>               4           32-bit integer  transaction_id
>               8           32-bit integer  interval
>               12          32-bit integer  leechers
>               16          32-bit integer  seeders
>               20 + 6 * n  32-bit integer  IP address
>               24 + 6 * n  16-bit integer  TCP port
>               20 + 6 * N  */ 
> ```

从我的测试中，我总是收到相同的字段值：IP 地址和 TCP 端口 .. 加上每个请求我得到一个响应 .. 所以这不可能！.. 我需要一个同行列表！

**请帮忙！**我尚未实现的唯一类型的响应消息是刮擦和错误...但没有人包含我感兴趣的信息（对等信息：ip 和端口）例如：刮擦

```
Offset      Size            Name            Value
0           32-bit integer  action          2 // scrape
4           32-bit integer  transaction_id
8 + 12 * n  32-bit integer  seeders
12 + 12 * n 32-bit integer  completed
16 + 12 * n 32-bit integer  leechers
8 + 12 * N 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:48:17.920

我对我自己的问题的回答..谢谢，我！

*   如果它以 udp:// 开头，则有效
*   如果 url 是：udp://elbitz.net:80/announce.php?passkey=362fc69de3402e8ef5794c7ecf7c58d4 您在 udp://elbitz.net 上创建套接字，使用端口 80（创建 UDP 套接字时不使用 /announce 部分）
*   由于它是 UDP，因此无法保证响应（不会抛出异常，您只需等待），规范中提到了最大 8 轮规则……但这意味着要等待相当长的时间才能实现跟踪器不存在。
*   在通过 UDP 通信的情况下，您发送 2 种类型的请求（连接和通知，每个作为 1 个 UDP 包）并接收 1 个响应（显然，如果你很幸运，也可以作为 UDP 包）.. 提取可用信息，你有解析响应`byteBuffer`。真正的信息再次在这里： http: [//www.bittorrent.org/beps/bep_0015.html](http://www.bittorrent.org/beps/bep_0015.html)；
*   在收到 Connect 响应之前，您不能宣布（您需要一个`transactionId`, 阅读规范）我`doConnect()`是好的，我从中更改了很少几行（例如：我正在使用`byteBuffer`by使用的最大大小（以字节为单位`DataGramPacket`），这意味着 new byte[ 65508] 而不是 [16] - 最小大小。收到响应时，其余部分将填充字节，即 0）。
*   如您所见，`doConnect`有一个 while 循环（它显示了最大 8 轮规则）；
*   `socketTimeOut`持续增加（使用规格中的公式，30 秒，90.. 等）。
*   收到连接响应后，您必须执行announce()，方法内容相似，请求不同（再次参见规范），并且我再次使用缓冲区的最大大小（新字节[65508]）但这次更有意义，因为接收到的对等点的列表大小不是硬编码的（它可以是 1/8/10 个对等点...我总是请求 10 个）..
    （最小大小为 20 字节，当没有在味精中添加对等点信息时会发生这种情况）。同样，这个响应只是一个数据包（最大 65508 字节中有空间......我想我得到了 70% 的填充）
*   由于阻塞方法（`receive()`），一切都很慢，我在自己的线程上拥有它（通常那些响应的跟踪器不需要消耗超过 2 轮......这很好）。
*   在上面的代码中看不到的是 1 分钟规则（1 分钟后再次连接）。
*   我的意见：这个丑陋的代码！使用 UDP .. & 线程，因为一切都很慢 & 阻塞......

更新***

## 用于使用 udp 的代码被截断

```
DatagramSocket workingSocket = ?;//
DatagramPacket sendPacket = null, receivePacket = null;
byte[] sendData = null;
byte[] receiveData = null;

receiveData = new byte[65508]; //NOTE: at least 16 bytes | 65508 is max size, unused bytes are 0
receivePacket = new DatagramPacket(receiveData, receiveData.length);

sendData = this.getRequestTypeAnnounce(announceUDPWrapper.a_TransactionId);
sendPacket = new DatagramPacket(sendData, sendData.length); 
workingSocket.send(sendPacket);
workingSocket.receive(receivePacket);
byte[] fullResponse = receivePacket.getData(); 
```

## 为撰写公告味精而截取的代码

```
private byte[] getRequestTypeAnnounce(AnnounceUDPWrapper announceUDPWrapper) {
    //long connectionId, int transactionId, int tcpPort
    ByteBuffer bBuffer = ByteBuffer.allocate(98);
    bBuffer.putLong(announceUDPWrapper.a_ConnectionId);
    bBuffer.putInt(ACTION_ID_ANNOUNCE);
    bBuffer.putInt(announceUDPWrapper.a_TransactionId);
    bBuffer.put(announceUDPWrapper.a_InfoHash);//<<<< what you asked.. adding the infoHash which is byte[]
    bBuffer.put(this.m_MyId);

    bBuffer.putLong(announceUDPWrapper.a_Downloaded);
    bBuffer.putLong(announceUDPWrapper.a_Uploaded);
    bBuffer.putLong(announceUDPWrapper.a_Left);
    bBuffer.putInt(announceUDPWrapper.a_EventType.ordinal());

    bBuffer.put(Utils.intToByteArray(0));// ip, 0 = default
    bBuffer.putInt(0);//key
    bBuffer.putInt(10);//num_want

    byte[] portAsBytes = Utils.intToByteArray(announceUDPWrapper.a_ListeningTCPPort);
    bBuffer.put(Utils.subArray(portAsBytes, 2, 2)); //port
    return bBuffer.array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:49:46.027

在我看来，您在这里混合了网络层。

udp 位于较低层 - http:// 通过 tcp，而其他一些协议可以通过 udp。IP 低于此值，因此您尝试使用的协议类似于“torrent over udp, over IP”。

有关一些 torrent/udp 协议文档，请参见[此处](http://www.bittorrent.org/beps/bep_0015.html)。

# mysql - MySQL - 如何将列转为行？

> ID：15184381
> 
> 赞同：21
> 
> 时间：2013-03-03T09:40:58.923
> 
> 标签：mysql, sql, union, unpivot, lateral-join

我现在可能看不太清楚，但我在 MySQL 中有一个如下所示的表：

```
ID | a  | b  | c 
1  | a1 | b1 | c1
2  | a2 | b2 | c2 
```

`ID`出于某种原因（实际上是在另一个表上的连接 - 基于

```
1 | a1 | a
1 | b1 | b
1 | c1 | c
2 | a2 | a
2 | b2 | b
2 | c2 | c 
```

所以基本上，我需要查看如下行： `ID`, `columntitle`,`value` 有没有办法轻松做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-04T00:12:11.353

您正在尝试对数据进行*反透视*。MySQL 没有 unpivot 函数，因此您必须使用`UNION ALL`查询将列转换为行：

```
select id, 'a' col, a value
from yourtable
union all
select id, 'b' col, b value
from yourtable
union all
select id, 'c' col, c value
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b424e/1)。

这也可以使用 a 来完成`CROSS JOIN`：

```
select t.id,
  c.col,
  case c.col
    when 'a' then a
    when 'b' then b
    when 'c' then c
  end as data
from yourtable t
cross join
(
  select 'a' as col
  union all select 'b'
  union all select 'c'
) c 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b424e/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T00:08:23.403

尝试使用[UNION ALL](http://dev.mysql.com/doc/refman/5.0/en/union.html)。

```
SELECT ID, a, 'a' 
FROM tbl
WHERE ID = 1
UNION
SELECT ID, b, 'b' 
FROM tbl
WHERE ID = 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-17T16:42:26.050

It took a long time coming, but MySQL version 8.0.14 finally added support for lateral joins - the official terminology is [lateral derived tables](https://dev.mysql.com/doc/refman/8.0/en/lateral-derived-tables.html).

This is a very powerful feature, that comes handy in multiple situations, including unpivoting table columns to rows.

You can phrase the query as follows:

```
select t.id, x.*
from mytable t
cross join lateral (
    select a, 'a' 
    union all select b, 'b'
    union all select c, 'c'
) as x(col1, col2) 
```

It may look like this is not a big difference compared to the typical cannonical solution - after all, we are still using `union all` within the lateral derived table... But don't get it wrong: this query *scans the table only once*, as opposed to the other approach, which requires one scan for each column to unpivot. So this is more efficient - and the performance gain increases dramatically as the table goes bigger and/or more columns need to be unpivoted.

Bottom line: if you are running MySQL 8.0.14 or higher, just use this technique. From that version onwards, this is the canonical way to unpivot in MYSQL.

**[Demo on DB Fiddle](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=9934600e3b79bcbeef829fa9857b4f7b)**:

Sample data:

```
ID | a  | b  | c 
-: | :- | :- | :-
 1 | a1 | b1 | c1
 2 | a2 | b2 | c2

```

Query results:

```
id | col1 | col2
-: | :--- | :---
 1 | a1   | a   
 1 | b1   | b   
 1 | c1   | c   
 2 | a2   | a   
 2 | b2   | b   
 2 | c2   | c   

```

* * *

**Side note**

MySQL 8.0.19 added support for [the `VALUES` statement](https://dev.mysql.com/doc/refman/8.0/en/values.html), which could help further shortening the query by removing the need to use `union all` in a subquery (although I don't see any performance gain here, this makes the query neater).

nfortunately, As of version 8.0.21, this **does not work** yet - which might be considered a bug - but maybe will in a future version...:

```
select t.id, x.*
from mytable t
cross join lateral (values 
    row(a, 'a'), 
    row(b, 'b'),
    row(c, 'c')
) as x(col1, col2); 
```

# java - 如何使用 Google 电子表格 API Java 库未经身份验证获取公共 Google 电子表格数据

> ID：15184385
> 
> 赞同：10
> 
> 时间：2013-03-03T09:41:39.717
> 
> 标签：java, google-sheets, google-spreadsheet-api, google-authentication

-我想做的事

我想使用 Google Spreadsheet API Java 库从 Google Spreadsheet 获取数据，无需身份验证。Google 电子表格公开发布。我想使用以下方法：com.google.gdata.data.spreadsheet.CustomElementCollection

-问题

CustomElementCollection 返回收集带有身份验证的数据。但 CustomElementCollection 返回 null 而无需身份验证。

由于 listEntry.getPlainTextContent() 显示数据，所以我认为我应该能够以任何方式获取数据。

-附上源代码

带认证：Auth.java

```
import java.net.URL;
import java.util.List;
import com.google.gdata.client.spreadsheet.ListQuery;
import com.google.gdata.client.spreadsheet.SpreadsheetService;
import com.google.gdata.data.spreadsheet.CustomElementCollection;
import com.google.gdata.data.spreadsheet.ListEntry;
import com.google.gdata.data.spreadsheet.ListFeed;
import com.google.gdata.data.spreadsheet.SpreadsheetEntry;
import com.google.gdata.data.spreadsheet.WorksheetEntry;

public class Auth {
    public static void main(String[] args) throws Exception{
        String applicationName = "AppName";
        String user = args[0];
        String pass = args[1];
        String key = args[2];
        String query = args[3];

        SpreadsheetService service = new SpreadsheetService(applicationName);
        service.setUserCredentials(user, pass); //set client auth 

        URL entryUrl = new URL("http://spreadsheets.google.com/feeds/spreadsheets/" + key);
        SpreadsheetEntry spreadsheetEntry = service.getEntry(entryUrl, SpreadsheetEntry.class);
        WorksheetEntry worksheetEntry = spreadsheetEntry.getDefaultWorksheet();

        ListQuery listQuery = new ListQuery(worksheetEntry.getListFeedUrl());
        listQuery.setSpreadsheetQuery( query );

        ListFeed listFeed = service.query(listQuery, ListFeed.class);
        List<ListEntry> list = listFeed.getEntries();
        for( ListEntry listEntry : list )
        {
            System.out.println( "content=[" + listEntry.getPlainTextContent() + "]");
            CustomElementCollection elements = listEntry.getCustomElements();
            System.out.println(
                    " name=" + elements.getValue("name") + 
                    " age="  + elements.getValue("age") );
        }
    }
} 
```

没有身份验证：NoAuth.java

```
import java.net.URL;
import java.util.List;
import com.google.gdata.client.spreadsheet.FeedURLFactory;
import com.google.gdata.client.spreadsheet.ListQuery;
import com.google.gdata.client.spreadsheet.SpreadsheetService;
import com.google.gdata.data.spreadsheet.CustomElementCollection;
import com.google.gdata.data.spreadsheet.ListEntry;
import com.google.gdata.data.spreadsheet.ListFeed;
import com.google.gdata.data.spreadsheet.WorksheetEntry;
import com.google.gdata.data.spreadsheet.WorksheetFeed;

public class NoAuth {
    public static void main(String[] args) throws Exception{
        String applicationName = "AppName";
        String key = args[0];
        String query = args[1];

        SpreadsheetService service = new SpreadsheetService(applicationName);

        URL url = FeedURLFactory.getDefault().getWorksheetFeedUrl(key, "public", "basic");

        WorksheetFeed feed = service.getFeed(url, WorksheetFeed.class);
        List<WorksheetEntry> worksheetList = feed.getEntries();
        WorksheetEntry worksheetEntry = worksheetList.get(0);

        ListQuery listQuery = new ListQuery(worksheetEntry.getListFeedUrl());
        listQuery.setSpreadsheetQuery( query );

        ListFeed listFeed = service.query( listQuery, ListFeed.class );
        List<ListEntry> list = listFeed.getEntries();
        for( ListEntry listEntry : list )
        {
            System.out.println( "content=[" + listEntry.getPlainTextContent() + "]");
            CustomElementCollection elements = listEntry.getCustomElements();
            System.out.println(
                    " name=" + elements.getValue("name") + 
                    " age="  + elements.getValue("age") );
        }
    }
} 
```

谷歌电子表格：

[https://docs.google.com/spreadsheet/pub?key=0Ajawooo6A9OldHV0VHYzVVhTZlB6SHRjbGc5MG1CakE&output=html](https://docs.google.com/spreadsheet/pub?key=0Ajawooo6A9OldHV0VHYzVVhTZlB6SHRjbGc5MG1CakE&output=html)

-结果

无需认证

　　　内容=[年龄：23​​] 名称=null 年龄=null

带认证

　　　内容=[年龄：23​​] 名称=芋头年龄=23

请让我知道有用的信息以避免该问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:42:20.637

我不知道为什么会这样，但是当您不使用凭据访问请求时，您无法通过以下方式检索单元格：

```
CustomElementCollection elements = listEntry.getCustomElements();
System.out.println(" name=" + elements.getValue("name") + " age="  + elements.getValue("age") ); 
```

我已经对其进行了测试，我发现只有这种方法可以检索数据：

```
List<ListEntry> list = listFeed.getEntries();
for (ListEntry row : list) {
    System.out.println(row.getTitle().getPlainText() + "\t"
            + row.getPlainTextContent());
} 
```

它打印：

```
Taro    age: 23
Hanako  age: 16 
```

如您所见，您应该解析文本并从 raw 检索年龄`String`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-22T07:15:52.690

我相信问题在于您正在`"basic"`为电子表格使用投影。如果您使用`"values"`投影，一切都应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:43:20.667

我也想知道这个。我查看了进来的提要（只需将工作表的 URL 粘贴到 Chrome 中），似乎没有 XML 标记，并且都在 <content> 标记下。因此，解析器将其全部集中到 BaseEntry 的文本内容中（而不是创建 ListEntry）是有道理的。

# linux - shell脚本中的top命令

> ID：15184386
> 
> 赞同：3
> 
> 时间：2013-03-03T09:41:41.480
> 
> 标签：linux, shell, expect

我试图通过期望脚本获得前 5 行 top 命令。我从 shell 脚本和其他一些东西一起调用这个期望脚本。

`top | head -5`给我下面的输出，即没有cpu stats-

> 顶部 - 09:10:58 46 天，17:03，12 个用户，平均负载：0.01, 0.02, 0.00 任务：总共 138 个，1 个正在运行，137 个正在睡眠，0 个停止，0 个僵尸
> 
> 内存：总计 16432400k，已使用 8408096k，可用 8024304k，609200k 缓冲区交换：总计 6290736k，已使用 0k，可用 6290736k，缓存 6754356k

如果我只`top`在该远程服务器上运行命令，我可以看到在更新 CPU 状态行之前有 2-3 秒的延迟，有人可以帮我获取所有 5 行更新的 CPU 状态吗？以下是我的期望脚本 -

```
#!/usr/bin/expect -f
set user1 abc
set pass1 pass
set timeout 8
match_max 1000
spawn ssh -C -o stricthostkeychecking=no $user1@<ip>
expect "*?assword:*"
send  "$pass3\r"
expect "?xterm*"
send "\r"
send "top | head -5\r"
expect eof 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T09:59:54.223

您需要运行`top`而`batch mode`不是默认的`interactive mode`. 此外，您需要定义`top`为获取其测量值而执行的迭代次数。

```
num_iterations=3
top -b -n $num_iterations | head -5 
```

如果您希望输出仅列出前 5 个进程并跳过显示的统计标题，您可以尝试以下操作：

```
num_iterations=3
top -b -n $num_iterations | sed -n '8,12p' 
```

还可以根据需要调整值`num_iterations`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T21:37:19.900

```
top -b -n 2 -u $(whoami) | grep -A6 -B5 PID |tail -12 
```

根据要求调整以下值。

**grep**
-A$after_lines_count
-B$before_lines_count

**尾巴**- *$($after+$before + 1)*

尾值应为 [ 行数前 + 行数后 + 1（PID 匹配行）]

如果您不想要用户特定的详细信息。

```
 top -b -n 2 | grep -A6 -B5 PID |tail -12 
```

注意：***顶部****迭代次数为 2（top -n 2），即显示输出需要 6 秒（取决于每次迭代设置的延迟）*

# c# - Windows 8 C# - 如何保留 ListBox 项目？

> ID：15184388
> 
> 赞同：0
> 
> 时间：2013-03-03T09:41:52.187
> 
> 标签：c#, xaml, windows-8, listbox, listboxitems

假设我有一个用 XAML 编写的 ListBox：

```
<ListBox x:Name="myListBox" /> 
```

并在 C# 中添加项目：

```
myListBox.Items.Add("a");
myListBox.Items.Add("b");
myListBox.Items.Add("c"); 
```

当我关闭应用程序时，我在 myListBox 中添加的项目都消失了，当我再次打开应用程序时，myListBox 从空白开始。我想保留这些项目，现在我的方法是将其存储在 1 个字符串中并将其保存到 RoamingSettings。但它效率低下，我的代码现在很乱。有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:50:02.707

有多种方法可以保存应用程序的状态，详见本文： http: [//msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx ?cs-save-lang=1&cs- lang=csharp#code-snippet-7](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-7)

您是否覆盖了该`SaveState`方法？`Dictionary<String,Object>`与手动序列化到 RoamingSettings 相比，您可以使用该方法更适当地存储数据。

也就是说，考虑采用 MVVM 设计，这样您只需要保存视图/页面的 ViewModel 数据而不是控制属性状态。

# php - php db 访问所有文件，但不包含

> ID：15184391
> 
> 赞同：0
> 
> 时间：2013-03-03T09:42:13.180
> 
> 标签：php, database, pdo

我正在一个 PHP 站点上工作，其中数据库连接的工作方式如下：

index.php：-> 包含一个带有 db pdo 单格顿类的文件，用于 db 连接，之后它包含来自子文件夹的 php 文件，无论用户选择什么。

每个包含的 php 文件都可以使用 db 类进行 db 连接：

```
$objDb = Database::getInstance()->getConnection(); 
```

到现在为止还挺好。但是包含 PHP 文件将 ajax 请求发送到那些子文件夹中的其他 php 文件，这些文件不包含在 index.php 中。意味着在每个这样的 php 文件中，我再次包含 db 连接类（因为它没有从 index.php 中获取它）。

这不是戏剧性的，因为它只是一个班轮。但我问我是否有更有效的数据库连接设计方法。是否可以将包含的类传递给需要数据库连接的子文件夹中的所有 php 文件？

非常感谢亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:45:35.483

我会在根目录中创建一个文件，就像`common.php`它应该包含在所有 php 文件中一样。

在 common.php 中，我会像下面的示例一样创建自动加载器：[http](http://www.php.net/manual/en/function.spl-autoload-register.php) : //www.php.net/manual/en/function.spl-autoload-register.php 它将自动加载所需的类，而无需在任何地方包含它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:49:31.117

是的，这是可能的，但不推荐且毫无意义。

数据库连接只是一般配置案例的一个子案例。
在您的脚本中，您需要许多配置选项、常量、初始化等 - 因此，无论如何您都需要包含一个 config/bootstrap 文件。
在那里你也可以包括你的连接线。

# jquery - jQuery：命名空间，在另一个中使用变量

> ID：15184402
> 
> 赞同：0
> 
> 时间：2013-03-03T09:44:21.500
> 
> 标签：jquery, namespaces

我需要你的帮助。如何在命名空间中使用变量？像这样的东西：

```
$.MyScript = {
    script: $("script")
  , dataID: script.data("id")
  , dataColor: script.data("color")
  , Alerting: function alerting(){
        alert(dataColor);
    }
}
$.Myscript.Alerting; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:53:40.573

首先，这不是编写 jQuery 插件的正确方法，如果这就是您想要做的。咨询[jQuery 的插件/创作文档](http://docs.jquery.com/Plugins/Authoring)以了解正确的方法。

* * *

除此之外，您现在拥有代码的方式可以`dataColor`通过使用关键字引用父对象来访问`this`。

我正在从我的答案中删除代码，因为您还有其他问题。查看@dfsq 的答案以解决您的问题。

我只是在这里留下我的答案作为对官方文档的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:54:42.873

在创建对象之前，您无法访问`script`属性。您可以改用此模式：

```
$.MyScript = (function() {

    var $script = $("script");

    return {
        script: $script,
        dataID: $script.data("id"),
        dataColor: $script.data("color"),
        alerting: function alerting() {
            alert(this.dataColor);
        }
    }
})();

$.MyScript.alerting(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T10:18:55.110

我建议您使用更通用的方法，而不涉及 jQuery。您始终可以创建自己的命名空间并对其进行扩展。

阅读Addy Osmani 的[这篇漂亮文章](http://addyosmani.com/blog/essential-js-namespacing/)，了解更多详情。

```
/* define a global var, the root of your namespace */
var myNamespace = myNamespace || {};

/*
 * init and populate your ns inside a immediately invoked function expression
 * you can pass the jQuery object as argument if you need it in your business logic
 * but it is not necessary
 */
(function(ns, $){
    ns.ScriptObject = function($script){
      var $s = $script;

      this.getDataColor = function(){
         return $s.data("color");
      }

      this.getDataId = function(){
         return $s.data("id");
      }

      /* add further methods */
    }

})(myNamespace ,jQuery) 
```

# sed - Sed 特殊字符

> ID：15184404
> 
> 赞同：0
> 
> 时间：2013-03-03T09:44:41.160
> 
> 标签：sed

我正在尝试替换：

```
#/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */; 
```

和 ：

```
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'; 
```

这是我的 sed 命令，它不起作用...

```
sed 's|#/\*\!40101 SET @OLD_SQL_MODE=@@SQL_MODE\, SQL_MODE=`NO_AUTO_VALUE_ON_ZERO` \*/;|SET @OLD_SQL_MODE=@@SQL_MODE\, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'\;|' file.sql > filenew.sql 
```

我想我的问题是字符'但我找不到解决方案你能帮帮我吗！

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:10:36.223

要绕过在`sed`命令中使用单引号的问题，请将其括在双引号之间：

```
sed "s|#/\*\!40101 SET @OLD_SQL_MODE=@@SQL_MODE\, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' \*/;|SET @OLD_SQL_MODE=@@SQL_MODE\, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'\;|" file.sql > filenew.sql 
```

它产生：

```
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'; 
```

# javascript - 在 WebStorm 中为 Jasmine + Backbone 运行 jsTestDriver

> ID：15184409
> 
> 赞同：2
> 
> 时间：2013-03-03T09:45:14.767
> 
> 标签：javascript, backbone.js, jasmine, js-test-driver

我正在 Jasmine 中为 Backbone 应用程序编写测试，我想知道我的测试覆盖的代码比例。为此，我想使用 jsTestDriver。但是我有一个问题：我创建了一个配置文件并在那里添加了所有资源，但是当我开始测试 Backbone 方法时没有定义。这是我的配置文件：

```
server: http://localhost:9876

load:
  - lib/jasmine-1.3.1/jasmine.js
  - lib/jasmine-jquery.js
  - lib/JasmineAdapter.js
  - lib/sinon-1.5.2.js
  - cordova-2.2.0.js
  - libs/jquery-1.8.2.min.js
  - libs/underscore-min.js
  - libs/backbone-min.js
  - libs/lazyload-min.js
  - core/js/core.js
  - index.js

test:
  - spec/test.js 
```

该顺序与 SpecRunner 文件中的顺序相同。这是我的测试文件：

```
describe("Attributes", function(){
    it("Test", function() {
        c = new Cars;
        expect(c.attributes.StartDate).toBeDefined();
        expect(c.attributes.StartDate).toBeDefined();
    })
}); 
```

Cars 是一个 Backbone 模型，该模型具有默认属性 StartSate。在我的测试中，我想检查该属性是否已定义。当然还有 WebStorm 中的错误：

```
TypeError: TypeError: Cannot read property 'attributes' of undefined
TypeError: Cannot read property 'attributes' of undefined
           at null.<anonymous> (spec/test.js:10:21) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:25:27.863

我认为最好使用[`has`](http://documentcloud.github.com/backbone/#Model-has)模型对象的方法来检查属性，而不是检查`attributes`属性：

```
describe("Attributes", function(){
    it("Test", function() {
        c = new Cars;
        expect(c.has("StartDate")).toBe(true);
    })
}); 
```

这样，您可以向模型添加一些可以覆盖该`has`方法的隐式逻辑。此外，您没有指定如何扩展模型以创建您的`Cars`类。您是否指定了默认值？

# ruby-on-rails - 使用 rspec、capybara 和 email_spec 设计密码恢复的集成测试

> ID：15184416
> 
> 赞同：2
> 
> 时间：2013-03-03T09:46:33.033
> 
> 标签：ruby-on-rails, rspec, devise, capybara, email-spec

我正在尝试使用 email_spec 使用 rspec/capybara 测试密码恢复

我的 test.rb 包含：

```
config.action_mailer.delivery_method = :test 
```

我的测试是这样的：

```
feature User do
  let!(:user){ FactoryGirl.build(:user) }

  before(:each) do
    visit root_path
    click_link "Sign up/in"
  end

  scenario "recover password" do
    user.save!
    click_link "Forgot password?"
    fill_in "Email", :with => user.email
    click_button "Send me reset password instructions"
    unread_emails_for(user.email).should be_present
  end 
```

我的测试失败如下：

```
 1) User recover password
     Failure/Error: click_button "Send me reset password instructions"
     ActionView::Template::Error:
       Missing host to link to! Please provide the :host parameter,
       set default_url_options[:host], or set :only_path to true 
```

如果我设置了 default_url_options，rspec 会尝试发送邮件。我不太确定：only_path。

谁能指出我正确的方向？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T19:17:56.367

在 中设置以下行`/config/environments/test.rb`：

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

# ruby-on-rails - 如何在 Rails 中使用“印象派”宝石？

> ID：15184420
> 
> 赞同：1
> 
> 时间：2013-03-03T09:46:59.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 rails dev 的新手，正在寻找使用[https://github.com/charlotte-ruby/impressionist](https://github.com/charlotte-ruby/impressionist)但无法通过查看其文档来弄清楚如何使用它。我已经完成了迁移，并且在尝试放置时

```
class ArticlesController < InheritedResources::Base
  impressionist
end 
```

或者

```
class ArticlesController < InheritedResources::Base
  impressionist :actions=>[:show,:index]
end 
```

它抛出没有找到方法的错误。**我不确定哪些代码需要放在模型中，哪些代码需要放在控制器中，哪些代码需要放在视图**中才能看到 view_count，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:09:44.857

第一个问题是一个类型

至于你的第二个问题（在评论中），最简单但非常有效的方法是

```
 in the view:
 <% @pages.each do |page| %>
   <%= page.impressionist_count %> 
 <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T17:43:49.610

您也可以将`Impression`其用作模型来查询内容，就像普通模型一样。例如，

```
Impression.where(user_id: 12).length 
```

如果您需要一些高级查询，我发现这很方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T07:35:23.750

该文档未指定重新启动服务器。这并不明显，因为它不适用于所有宝石，但印象派却需要。

# java - 链接触发方法多个没有。次

> ID：15184422
> 
> 赞同：0
> 
> 时间：2013-03-03T09:47:07.297
> 
> 标签：java, jsf, jakarta-ee, jpa, jsf-2

问题是，每当我单击 Home.xhtml 上的 Next page 链接转到 getMoreStatusList Page 时，getMoreStatusList 函数都会不停地调用，直到它抛出一个索引超出范围的异常。我什至打印从会话对象获取的索引值`statusindex`和getmorestatusList内部的字符串，当在`getMoreStatusList()`控制台的方法内部时，我使用该方法`results = results.subList(index,index+5);`创建子列表，但是这条线被多次调用并且抛出了超出范围的异常随着 index 的值随着每次调用而增加。

1)主页.xhtml

```
 <h:head>    
    </h:head>

    <h:body class="thrColElsHdr">        

                <!--  -->
                <div class="items">
                    <div id="scroll_items">
                        <c:forEach var="p" items="#{statusBean.statusList}">
                              //Content

                        </c:forEach>

                    </div>
                </div>

    <a href ="getMoreStatusList.xhtml">Next page</a>
    </h:body>
    </html> 
```

2) 状态 Bean（包含 getMoreStatusList 函数）

```
 public class StatusBean {

                public List<Status> getStatusList() {
            FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext()
                    .getSession(true);
            User user = (User) session.getAttribute("userdet");
            Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
                    + user.getEmail() + "' ORDER BY s.timeMillis desc",
                    Status.class);
            List<Status> results = query.getResultList();

            Collections.sort(results);
            results = results.subList(0, 5);

            session.setAttribute("statusindex", 5);
            return results;

        }

        public List<Status> getMoreStatusList() {

            System.out.println("Inside getMoreStatusList");
            FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext()
                    .getSession(false);
            User user = (User) session.getAttribute("userdet");
            Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
                    + user.getEmail() + "' ORDER BY s.timeMillis desc",
                    Status.class);
            List<Status> results = query.getResultList();

            Collections.sort(results);
            int index = (int) session.getAttribute("statusindex");
            System.out.println(index);
            results = results.subList(index,index+5);
            session.setAttribute("statusindex", index + 5);
            return results;

        }

    } 
```

3) 获取更多状态列表.xhtml

```
<h:head></h:head>
<h:body>

            <c:forEach var="p" items="#{statusBean.moreStatusList}">

                      // Content
            </c:forEach>

</h:body>

</html> 
```

3）Stacktrace（我把它缩短了，因为限制是30000）

```
Inside getMoreStatusList
[EL Finest]: 2013-03-03 15:09:47.527--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.527--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.527--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.529--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.529--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Friend sql="SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)")
[EL Finest]: 2013-03-03 15:09:47.529--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.529--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.53--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.53--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.53--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.53--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [ramanujonlyme@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.531--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.531--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.531--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.531--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [atinr4@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.531--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
5
Inside getMoreStatusList
[EL Finest]: 2013-03-03 15:09:47.532--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.532--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.532--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.533--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.533--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Friend sql="SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)")
[EL Finest]: 2013-03-03 15:09:47.534--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.534--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.534--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.534--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.534--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.535--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [ramanujonlyme@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.535--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.535--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.535--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.535--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [atinr4@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.536--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
10
Inside getMoreStatusList
[EL Finest]: 2013-03-03 15:09:47.537--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.537--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.537--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.538--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.539--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Friend sql="SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)")
[EL Finest]: 2013-03-03 15:09:47.539--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.539--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.539--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.539--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.539--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.54--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [ramanujonlyme@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.54--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.54--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.54--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.54--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [atinr4@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.541--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
15
[EL Finest]: 2013-03-03 15:09:47.541--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Comment sql="SELECT COMMENTID, COMMENT, COMMENTBY, EMAIL, PICTURE, STATUSID, TIMEMILLIS FROM COMMENT WHERE (STATUSID = ?)")
[EL Finest]: 2013-03-03 15:09:47.541--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.541--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT COMMENTID, COMMENT, COMMENTBY, EMAIL, PICTURE, STATUSID, TIMEMILLIS FROM COMMENT WHERE (STATUSID = ?)
    bind => [61]
[EL Finest]: 2013-03-03 15:09:47.542--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
Inside getMoreStatusList
[EL Finest]: 2013-03-03 15:09:47.543--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.543--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.543--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.544--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.545--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Friend sql="SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)")
[EL Finest]: 2013-03-03 15:09:47.545--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.545--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.546--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.546--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.546--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.546--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [ramanujonlyme@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.547--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.547--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.547--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.547--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [atinr4@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.548--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
20
Inside getMoreStatusList
[EL Finest]: 2013-03-03 15:09:47.548--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.548--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.548--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.549--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.549--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Friend sql="SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)")
[EL Finest]: 2013-03-03 15:09:47.549--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.55--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.55--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.55--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.55--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.55--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [ramanujonlyme@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.551--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.551--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.551--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.551--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [atinr4@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.552--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
25
Inside getMoreStatusList
[EL Finest]: 2013-03-03 15:09:47.553--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.553--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.553--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.554--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.554--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Friend sql="SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)")
[EL Finest]: 2013-03-03 15:09:47.554--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.554--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT FRIENDREQUESTID, EMAIL, FRIENDEMAIL, STATUS FROM FRIEND WHERE (EMAIL = ?)
    bind => [amlan@ymail.com]
[EL Finest]: 2013-03-03 15:09:47.555--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.555--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.555--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.555--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [ramanujonlyme@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.556--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
[EL Finest]: 2013-03-03 15:09:47.556--UnitOfWork(1909765639)--Thread(Thread[http-bio-8080-exec-1,5,main])--Execute query ReadAllQuery(referenceClass=Status sql="SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC")
[EL Finest]: 2013-03-03 15:09:47.556--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2013-03-03 15:09:47.556--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--SELECT STATUSID, EMAIL, PICSTATUS, PICSTATUSDESC, PICTURE, STATUSBY, STATUSMSG, TIMEMILLIS, VIDEOSTATUS, VIDEOSTATUSDESC FROM STATUS WHERE (EMAIL = ?) ORDER BY TIMEMILLIS DESC
    bind => [atinr4@gmail.com]
[EL Finest]: 2013-03-03 15:09:47.557--ServerSession(1973858306)--Connection(1390011245)--Thread(Thread[http-bio-8080-exec-1,5,main])--Connection released to connection pool [default].
30
Mar 03, 2013 3:09:47 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_v.6] threw exception [/getMoreStatusList.xhtml @17,41 test="${p.statusmsg!=null}" /getMoreStatusList.xhtml @17,41 test="${p.statusmsg!=null}": /getMoreStatusList.xhtml @14,60 items="#{statusBean.moreStatusList}": Error reading 'moreStatusList' on type com.bean.StatusBean] with root cause
java.lang.IndexOutOfBoundsException: toIndex = 35
    at java.util.SubList.<init>(AbstractList.java:622)
    at java.util.RandomAccessSubList.<init>(AbstractList.java:775)
    at java.util.AbstractList.subList(AbstractList.java:484)
    at java.util.Vector.subList(Vector.java:1034)
    at com.bean.StatusBean.getMoreStatusList(StatusBean.java:191)
    at sun.reflect.GeneratedMethodAccessor92.invoke(Unknown Source)
    at ...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:53:43.840

您应该使用`<ui:repeat>`(with `xmlns:ui="http://java.sun.com/jsf/facelets"`) 而不是`<c:forEach>`

`foEach`是一个标签处理程序，`repeat`是一个组件。[您可以在此博客](https://rogerkeays.com/jsf-c-foreach-vs-ui-repeat)上阅读有关两者之间区别的更多信息

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
</h:head>
<h:body class="thrColElsHdr">
    <ui:repeat var="p" value="#{statusBean.statusList}">
        <div>
            <h:outputText label="Status" value="#{p.value}" />
        </div>
    </ui:repeat>
    <a href="getMoreStatusList.xhtml">Next page</a>
</h:body>
</html> 
```

和

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head></h:head>
<h:body>
    <ui:repeat var="p" value="#{statusBean.moreStatusList}">
        <div>
            <h:outputText label="Status" value="#{p.value}" />
        </div>
    </ui:repeat>
    <a href="getMoreStatusList.xhtml">Next page</a>
</h:body>
</html> 
```

摆脱`IndexOutOfBoudsException`使用以下内容`getMoreStatusList`：

```
int index = (Integer) session.getAttribute("statusindex");
int end = index+5 > results.size() ? results.size() : index+5;
List<Status> subList = results.subList(index,end);
session.setAttribute("statusindex", end); 
```

并在`getStatusList`：

```
int index = 0;
int end = index+5 > results.size() ? results.size() : index+5;
List<Status> subList = results.subList(0, end); 
```

# android - 在免费 Web 托管站点中测试 HTML 解析时出错

> ID：15184428
> 
> 赞同：0
> 
> 时间：2013-03-03T09:48:20.127
> 
> 标签：android, html-parsing, web-hosting

我需要测试`html`一个站点的解析代码。它在控制台中运行正常`java`.. 尝试使用 my3gb.com 和 x10hosting.. 但在两者中我都得到错误超时异常..??

请建议一个托管站点。`logcat`在上述站点中显示了这一点：

```
 03-03 14:29:35.273: WARN/System.err(517): java.net.SocketTimeoutException: Connection timed out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:10:49.620

正如我猜你告诉我的解决方案一样。

> java.net.SocketTimeoutException：连接超时。

在局域网的设备中测试应用程序。你必须做以下事情。

1) 关闭系统防火墙。

2）您的设备和服务器必须在同一网络上。

3) 两者都必须有正常的互联网连接，并确保您已写入`ip-address`要连接的服务器的权限。

# python - 在 Python 中，如何使函数接受嵌入在字符串中的一系列变量？

> ID：15184429
> 
> 赞同：2
> 
> 时间：2013-03-03T09:48:27.387
> 
> 标签：python

在 Python 中：

```
a = "l[0], l[1], l[2], l[3]"
# l[0] etc. have their own value

my_function(a) #doesn't work

#but this does work
my_function(l[0], l[1], l[2], l[3]) 
```

字符串 a 可以“转换”以便函数看到变量吗？谢谢你。

稍后更新：感谢您回答我的问题。我包括了更大的问题以及为什么我不得不求助于 eval 函数（根据您的答案，这不是所需的）。功能：

```
class Line(object):
def __init__(self, pt1, pt2, *pt):
    pt1 = Point(pt1[0],pt1[1])
    pt2 = Point(pt2[0],pt2[1])
    self.vertices = [pt1, pt2]
    for i in pt:
        self.vertices.append(Point(i[0],i[1]))

def __getitem__(self, key):
    pt = self.vertices[key]
    p = Point(p[0],p[1])
    return p

#Here is the part with the issue:

def move(self, dx, dy):
    pts = len(self.vertices)
    l = self.vertices

    pt1 = Point(Point(l[0].x, l[0].y).move(dx, dy).x, Point(l[0].x, l[0].y).move(dx, dy).y)
    pt2 = Point(Point(l[1].x, l[1].y).move(dx, dy).x, Point(l[1].x, l[1].y).move(dx, dy).y)
    if pts == 2:
        mv = LineString(p1, p2)
    if pts > 2:
        bla = ''
        for i in [2,pts]:
            px = Point(l[i].x, l[i].y).move(dx, dy).x
            py = Point(l[i].x, l[i].y).move(dx, dy).y
            l[i] = Point(px,py)
            bla += 'l[' + str(i) + '], '
            arguments = bla[:-2]
            mv = LineString(pt1, pt2, *eval(arguments))
    return mv 
```

根据您的回答，有更好的方法来解决这个问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:51:31.233

为此，您可以将`eval`评估字符串的函数与`*`运算符结合起来，以应用于`my_function`结果元组：

```
my_function(*eval(a)) 
```

然而，在没有充分理由的情况下这样做几乎总是表明设计不佳。`eval`使您的代码容易受到运行时错误和代码注入攻击，并删除重要的性能优化。如果您描述您的实际需求，很可能有人可以提出更好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T00:08:36.643

你有一个[**XY**问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。
您真正的**X**问题是将任意数量的对象传递给函数。
在定义了包含这些对象的标识符的字符串之后，从该字符串中提取对象的**Y解决方案就成为了您的解决方案。**
但我很确定以下代码片段回答了您真正的**X**问题：

```
 if pts > 2:
        blal = []
        for i in [2,pts]:
            px = Point(l[i].x, l[i].y).move(dx, dy).x
            py = Point(l[i].x, l[i].y).move(dx, dy).y
            blal.append(Point(px,py))
        mv = LineString(pt1, pt2, *blal) 
```

它是 Python 提供的一种工具，用于将任意数量的参数传递给函数，并非在所有编程语言中都存在。把自己的生活复杂化，不使用它会很可惜。

我认为应该通知甚至阻止新成员不要过快地投票和接受答案。

### 编辑

我认为您可以用这个替换问题中的代码块：

```
from itertools import chain

class Line(object):
    def __init__(self, pt1, pt2, *pt):
        self.vertices = map(lambda x: Point(*x),
                            chain((pt1,pt2), pt))

    def __getitem__(self, key):
        return Point(*self.vertices[key])

    def move(self, dx, dy):
        return LineString(*[ Point(Point(v.x, v.y).move(dx, dy).x,
                                   Point(v.x, v.y).move(dx, dy).y)
                             for v in self.vertices]) 
```

你甚至可以定义`Point()`这样一种方式，它会接受一对（元组，列表......，我不知道你`pt`的 s 是什么）而不是 So 的元素`pt`
，你可以写`Point(x)`而不是`Point(*x)`and

```
self.vertices = map(Point, chain((pt1,pt2), pt)) 
```

代替

```
self.vertices = map(lambda x: Point(*x),
                    chain((pt1,pt2), pt)) 
```

但需要写`Point((v.x,v.y))`而不是 `Point(v.x,v.y)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T09:52:34.133

Python 方法采用[任意参数列表](http://docs.python.org/2/tutorial/controlflow.html#arbitrary-argument-lists)。这意味着您的函数可以接受任意数量的参数。

这是一个例子：

```
def foo(*args, **kwargs):
   print args

foo('a','b','c','d') 
```

现在，假设您想传递一个包含值的列表作为参数：

```
mylist = ['a','b','c','d']
foo(mylist) 
```

现在这将导致：

```
(['a', 'b', 'c', 'd'],) 
```

以您的列表作为第一个参数的元组。我们想要的是和 一样的效果`foo('a','b','c','d')`。为此，我们需要扩展列表，如下所示：

```
foo(*mylist) 
```

现在你会得到同样的结果：

```
('a', 'b', 'c', 'd') 
```

* * *

将此并将其应用于您的问题：

```
def foo(*args, **kwargs):
   print "Total arguments: {}".format(len(args))

v = "a, b, c"
>>> foo(v)
Total arguments: 1
>>> foo(*v.split(','))
Total arguments: 3 
```

# c# - JObject如何读取数组中的值？

> ID：15184430
> 
> 赞同：56
> 
> 时间：2013-03-03T09:48:28.103
> 
> 标签：c#, json.net

这是 json 字符串：

`{"d":[{"numberOfRowsAdded":"26723"}]}`

```
string json = DAO.getUploadDataSummary();
JObject uploadData = JObject.Parse(json);
string array = (string)uploadData.SelectToken("d"); 
```

如何更改代码以读取“numberOfRowsAdded”中的值？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-05T04:26:36.080

```
JObject uploadData = JObject.Parse(json);
int rowsAdded = Convert.ToInt32((string)uploadData["d"][0]["numberOfRowsAdded"]) 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-03-04T08:25:18.243

您需要转换为`JArray`：

```
string json = "{\"d\":[{\"numberOfRowsAdded\":\"26723\"}]}";
JObject parsed = JObject.Parse(json);
JArray array = (JArray) parsed["d"];
Console.WriteLine(array.Count); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-05T23:23:35.353

您可以将您的`JObject`作为`dynamic`对象。
您还可以将数组转换为`JArray`对象。

```
JObject yourObject;
//To access to the properties in "dot" notation use a dynamic object
dynamic obj = yourObject;
//Loop over the array
foreach (dynamic item in obj.d) {
  var rows = (int)item.numberOfRowsAdded;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-27T05:56:58.090

我尝试编写一个可以读取我的 json 字符串任何部分的通用方法。我在这个线程上尝试了很多答案，但它不适合我的需要。所以这就是我想出的。我在我的服务层中使用以下方法从 json 字符串中读取我的配置属性。

```
public T getValue<T>(string json,string jsonPropertyName)
{                      
    var parsedResult= JObject.Parse(json);

    return parsedResult.SelectToken(jsonPropertyName).ToObject<T>();
} 
```

这就是你将如何使用它：

```
var result = service.getValue<List<string>>(json, "propertyName"); 
```

因此，您可以使用它来获取 json 字符串中的特定属性并将其转换为您需要的任何内容。

# mysql - VPS 无法通过套接字连接到本地 MySQL 服务器

> ID：15184433
> 
> 赞同：0
> 
> 时间：2013-03-03T09:48:57.233
> 
> 标签：mysql, sql-server, hosting, vps

我的 VPS 主机中的 mysql 有连接问题。我认为这是由于我的服务器驱动器出现故障，并且我的主机已更换并重建了新驱动器。所以我认为我的MySQL安装可能已经损坏，所以我升级了mysql但问题仍然存在。如何解决这个问题？谢谢

```
root@user [~]# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.1.68-cll MySQL Community Server (GPL)

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use testdb
No connection. Trying to reconnect...
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
ERROR: 
Can't connect to the server

mysql> 
```

这是 /var/lib/mysql/domain.err 中生成的错误日志

```
Version: '5.1.68-cll'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL)
130303 17:28:49  InnoDB: Assertion failure in thread 2965224304 in file fsp/fsp0fsp.c line 3341
InnoDB: We intentionally generate a memory trap.
InnoDB: Submit a detailed bug report to http://bugs.mysql.com.
InnoDB: If you get repeated assertion failures or crashes, even
InnoDB: immediately after the mysqld startup, there may be
InnoDB: corruption in the InnoDB tablespace. Please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.1/en/forcing-innodb-recovery.html
InnoDB: about forcing recovery.
09:28:49 UTC - mysqld got signal 6 ;
This could be because you hit a bug. It is also possible that this binary
or one of the libraries it was linked against is corrupt, improperly built,
or misconfigured. This error can also be caused by malfunctioning hardware.
We will try our best to scrape up some info that will hopefully help
diagnose the problem, but since we have already crashed, 
something is definitely wrong and this may fail.

key_buffer_size=8384512
read_buffer_size=131072
max_used_connections=0
max_threads=500
thread_count=0
connection_count=0
It is possible that mysqld could use up to 
key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 1099543 K  bytes of memory
Hope that's ok; if not, decrease some variables in the equation.

Thread pointer: 0x0
Attempting backtrace. You can use the following information to find out
where mysqld died. If you see no messages after this, something went
terribly wrong...
stack_bottom = 0 thread_stack 0x30000
/usr/sbin/mysqld(my_print_stacktrace+0x25)[0x848d5e5]
/usr/sbin/mysqld(handle_fatal_signal+0x42a)[0x82dd84a]
[0xb775c500]
/lib/libc.so.6(abort+0x17a)[0xb75513da]
/usr/sbin/mysqld(fseg_free_step_not_header+0x1a1)[0x83afab1]
/usr/sbin/mysqld[0x8409078]
/usr/sbin/mysqld[0x84094d0]
/usr/sbin/mysqld(trx_purge_fetch_next_rec+0x7a)[0x840960a]
/usr/sbin/mysqld(row_purge_step+0x37)[0x83eefb7]
/usr/sbin/mysqld(que_run_threads+0x4f7)[0x83de467]
/usr/sbin/mysqld(trx_purge+0x32f)[0x840787f]
/usr/sbin/mysqld(srv_master_thread+0x417)[0x8400267]
/lib/libpthread.so.0(+0x6a49)[0xb773ca49]
/lib/libc.so.6(clone+0x5e)[0xb760763e]
The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains
information that should help you find out what is causing the crash.
130303 17:28:49 mysqld_safe Number of processes running now: 0
130303 17:28:49 mysqld_safe mysqld restarted
130303 17:28:49 [Warning] '--log_slow_queries' is deprecated and will be removed in a future release. Please use ''--slow_query_log'/'--slow_query_log_file'' instead.
130303 17:28:49 [Warning] '--safe-show-database' is deprecated and will be removed in a future release. Please use 'GRANT SHOW DATABASES' instead.
130303 17:28:49 [Warning] '--log' is deprecated and will be removed in a future release. Please use ''--general_log'/'--general_log_file'' instead.
130303 17:28:49 [Note] Plugin 'FEDERATED' is disabled.
130303 17:28:49  InnoDB: Initializing buffer pool, size = 8.0M
130303 17:28:49  InnoDB: Completed initialization of buffer pool
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
130303 17:28:49  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
130303 17:28:49  InnoDB: Started; log sequence number 0 1605434197
130303 17:28:49 [Warning] 'user' entry 'root@s1.replace.com' ignored in --skip-name-resolve mode.
130303 17:28:49 [Warning] 'user' entry 'root@xx1.no-ip.org' ignored in --skip-name-resolve mode.
130303 17:28:49 [Note] Event Scheduler: Loaded 0 events
130303 17:28:49 [Note] /usr/sbin/mysqld: ready for connections.
Version: '5.1.68-cll'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL)
130303 17:28:50  InnoDB: Assertion failure in thread 2965224304 in file fsp/fsp0fsp.c line 3341
InnoDB: We intentionally generate a memory trap.
InnoDB: Submit a detailed bug report to http://bugs.mysql.com.
InnoDB: If you get repeated assertion failures or crashes, even
InnoDB: immediately after the mysqld startup, there may be
InnoDB: corruption in the InnoDB tablespace. Please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.1/en/forcing-innodb-recovery.html
InnoDB: about forcing recovery. 
```

电脑信息

```
root@user [~]# uname -a
Linux domain.com 2.6.32-042stab072.10 #1 SMP Wed Jan 16 18:54:05 MSK 2013 i686 i686 i386 GNU/Linux

root@user [~]# free -m
             total       used       free     shared    buffers     cached
Mem:          2560       1323       1236          0          0        826
-/+ buffers/cache:        497       2062
Swap:            0          0          0

root@user [~]# cat /etc/my.cnf 
[mysqld]
max_connections=500
log-slow-queries
log-error
safe-show-database
bind-address=xx.x.xx.xxx
skip-name-resolve
connect_timeout= 10
log=1
log_warnings = 2
max_allowed_packet = 64M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:48:46.903

您的 MySQL 服务器进程没有运行，或者在 MySQL 开始侦听连接后 InnoDB 断言已挂起该进程。请注意以下几行：

```
130303 17:28:49 [Note] /usr/sbin/mysqld: ready for connections.
Version: '5.1.68-cll'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL)
130303 17:28:50  InnoDB: Assertion failure in thread 2965224304 in file fsp/fsp0fsp.c line 3341
InnoDB: We intentionally generate a memory trap.
InnoDB: Submit a detailed bug report to http://bugs.mysql.com.
InnoDB: If you get repeated assertion failures or crashes, even
InnoDB: immediately after the mysqld startup, there may be
InnoDB: corruption in the InnoDB tablespace. Please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.1/en/forcing-innodb-recovery.html
InnoDB: about forcing recovery. 
```

转到该输出中列出的[InnoDB 恢复页面，然后按照强制 InnoDB 恢复的说明进行操作。](http://dev.mysql.com/doc/refman/5.1/en/forcing-innodb-recovery.html)看起来您的 InnoDB 数据库已损坏。

# android - Android 应用内结算 SDK V3：刷新库存时出错

> ID：15184442
> 
> 赞同：1
> 
> 时间：2013-03-03T09:50:32.720
> 
> 标签：android, sdk, in-app-purchase, in-app-billing

我遇到了一个例外：

```
com.android.vending.billing.util.IabException: Error refreshing inventory (querying prices of items). (response: 6:Error) 
```

上

```
(IabHelper instance).queryInventory(true, skuList); 
```

在 4 台设备（不同的制造商，android 操作系统版本）上的 2 台设备上，在其他 2 台上运行正常。skuList 填充正常

这是什么意思，如何固定/绕行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-18T08:56:36.847

我收到了同样的错误消息，在我的情况下，我是一个彻头彻尾的白痴，并在 SKU 列表中传递了 Base64 编码的 RSA 公钥（用于 IabHelper 的设置）。当我将其更改为实际的应用内产品 ID 时，问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:00:13.853

如果设备没有网络连接，我只会在我的实现中看到这一点。失败的 2 台设备是连接到运营商网络还是 Wi-Fi？

# node.js - 猫鼬中的跨模型查询

> ID：15184445
> 
> 赞同：0
> 
> 时间：2013-03-03T09:51:09.177
> 
> 标签：node.js, mongoose

Fe 我有三个模型：

模型A、模型B、模型C

ModelA 有一个包含 ModelB 实例 id 的数组。ModelB 有一个包含 ModelC 实例 id 的数组。

如何查询作为 ModelA 实例成员的所有 ModelB 实例成员的 ModelC 的所有实例？

```
ModelA
   ∟ [
      ModelB
        ∟ [ModelC, ModelC, ModelC]
      ModelB
        ∟ [ModelC, ModelC, ModelC, ModelC]
      ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:15:30.847

是`ModelB`和`ModelC`嵌入文件吗？还是它们是参考？假设它们是引用，那么您将必须首先加载所有`ModelA`实例，然后加载所有`ModelB`实例，依此类推。不幸的是 MongoDB 不支持连接，所以你无能为力（好吧，你总是可以尝试运行 map/reduce ）。看起来 SQL 数据库可能是您尝试做的任何事情的更好选择。

# javascript - 使用原型和处理执行顺序

> ID：15184446
> 
> 赞同：0
> 
> 时间：2013-03-03T09:51:23.297
> 
> 标签：javascript, prototype

我正在尝试真正扎实地掌握 JavaScript，但我遇到了一个对我来说很大的问题。我习惯于使用 C 语言工作，我发现的障碍之一是处理 JavaScript 的原型功能以及何时声明函数，因为它与执行顺序有关。

例如，采用以下代码：

```
var construct = new Constructor(); //I can do this even if its above the declaration of the object.

construct.MyPrivilagedFunction(); //Can do this here too, even though it's above the function declaration.

construct.MyPublicFunction(); //Can't do this because it is above the function declaration.

function Constructor() {

    //Private member
    var m_Ding = "Ding!";

    //Accessible publicly and has access to private member.
    this.MyPrivilagedFunction = function() {
    console.log(m_Ding);
    }
}
Constuctor.prototype.MyPublicFunction = function() {
    //Doesn't have access to private members. This doesn't work.
    console.log(m_Ding);
} 
```

我知道原型设计提供了更好的性能，因为函数的副本不会存储在对象的每个实例上，而是每个实例都引用同一个函数（我猜每个新实例都可以被认为是一个全新的对象类型？） . 但是，原型设计不允许我在定义函数之前使用它。此外，原型函数无法访问对象的私有成员。

这只是一个真正的问题，因为我正在处理一个项目，其中两个对象需要使用彼此的功能。如果我在代码的前面放置一个对象，它将无法访问第二个对象，因为原型函数遵循执行顺序（从上到下）。

旁注：我也知道我的对象可能应该是一个对象字面量（如 object={property:value}），但我仍在努力掌握范围和原型设计以尝试处理它现在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:49:36.190

如果我让你好了，你的问题的根源是“两个对象需要使用彼此的功能”。

但实际上 Javascript 不是一种类型化语言：定义 TypeA，定义 TypeB，之后您可以毫无问题地使用实例：typeA 和 typeB 对象。

```
var Speaker = function(name) {
    this.name = name ;
};

Speaker.prototype.sayHi = function(aMate) {
   amate.listenTo(this, ' Hi ' + this.mate.name ); // no type checking performed here
                                                   // so no issue even if Listener 
                                                   // is not defined yet
};

var Listener = function(name) {
    this.name = name;
    this.knownMate = [];
};

Listener.prototype.listenTo = function (mate, words) {
    this.knownMate.push(mate);
};

var aSpeaker  = new Speaker('Joe');
var aListener = new Listener('Bobby');

aSpeaker.sayHi(aListener); 
```

顺便说一句，您在 Javascript 中没有私有成员，只有闭包。所以是的，在“私有”成员范围之外定义的任何函数都将无法读取/写入它。
另请注意，如果性能是一个问题，则在性能较低的 js 引擎上关闭速度较慢。拥有“伪私有”成员的一个不错的解决方案是将这些成员定义为不可枚举 Object.defineProperty()
（在此处观看：
[https ://developer.mozilla.org/en-US/docs/JavaScript /Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:35:20.507

执行顺序是你写的。“下面的一切都是无关紧要的”规则只有两个例外：变量和函数声明被提升，即您可以在上面使用（分配给，调用）它们。并注意[函数声明和函数表达式之间的区别](https://stackoverflow.com/q/336859/1048572)。

> `var construct = new Constructor() //I can do this even if its above the declaration of the object.`

你要说的构造函数的声明。

> `construct.MyPrivilagedFunction(); //Can do this here too, even though it's above the function declaration.`

这里没有函数声明。特权方法是在构造函数执行期间创建的（将函数表达式分配给属性）（见上文）。

> `construct.MyPublicFunction(); //Can't do this because it is above the function declaration.`

同样，它不是函数声明，而是函数表达式的赋值。它还没有发生，因为它在下面。

> 这只是一个真正的问题，因为我正在处理一个项目，其中两个对象需要使用彼此的功能。如果我在代码的前面放置一个对象，它将无法访问第二个对象，因为原型函数遵循执行顺序（从上到下）。

在调用任何内容之前，您通常不需要访问任何内容。首先“声明”所有内容（构造函数、原型属性），然后实例化。

# php - 如何在我的邮件功能中发送密件抄送或抄送电子邮件，但我尝试了代码但密件抄送或抄送功能不起作用？

> ID：15184449
> 
> 赞同：1
> 
> 时间：2013-03-03T09:51:49.927
> 
> 标签：php, email, sendmail

如何在我的邮件功能中发送密件抄送或抄送电子邮件，但我尝试了代码但密件抄送或抄送功能不起作用？

```
<?php
//SENDS EMAIL THAT TELLS THE USER TO ACTIVATE THE ACCOUNT
$activation = 'activation.php?key='.$key;
$your_email = 'non-reply@mydomain.pk'; //CHANGE TO YOUR SETTINGS
$domain = $_SERVER["HTTP_HOST"]; //YOUR DOMAIN AND EXTENSION
$to  = $email;
$subject = 'MyDomain Activate Account';
$message .='<img src="http://mydomain.com/images/securedownload.jpg"/>';
$message = 'Welcome,<br/> '.$_POST['username'].'. You must activate your account via   this       message to log in. Click the following link to do so:   http://'.$domain.'/'.$activation;
$headers .= "BCC: MyDomain Order Copy <demo@mydomain.com>\n";
$headers .= 'MIME-Version: 1.0' . "\r\n";  
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
$headers .= "From: MyDomain <'.$your_email.'@'.$domain.'>\r\n" .  
//"Reply-To: $from \r\n" .  
"X-Mailer: PHP/" . phpversion();    
?> 
```

# oracle - javax.xml.ws.WebServiceException：未找到提供程序 com.sun.xml.internal.ws.spi.ProviderImpl

> ID：15184454
> 
> 赞同：9
> 
> 时间：2013-03-03T09:52:04.543
> 
> 标签：oracle, java

我正在尝试在 jdk1.5 上运行 web 服务客户端并给我以下错误：

```
javax.xml.ws.WebServiceException: Provider com.sun.xml.internal.ws.spi.ProviderImpl not found 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:37:22.973

确保在您的路径上您还可以找到包含该类的 jar `com.sun.xml.internal.ws.spi.ProviderImpl`。我检查了可能需要什么 jar，[在这里](http://www.jarfinder.com/index.php/java/info/com.sun.xml.ws.spi.ProviderImpl)您可以看到包含给定类的 jar。其中任何一个都可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-13T20:30:31.103

我不知道为什么它找不到正确的类的确切原因，但我认为它在查找资源时**Oracle 数据库中的 Java 类加载器（或特性）存在一些问题。**

我从 java.net 加载了 JAX-WS 参考实现及其与 SYS 用户的所有依赖项（具有公共访问权限和公共同义词）。但是从我加载到用户 SCOTT 模式的服务 WSDL 生成的类。并且由于某种原因，当 SCOTT 运行使用服务的程序时，`javax.xml.ws.spi.FactoryFinder`确实在资源中查找实现名称`META-INF/services/javax.xml.ws.spi.Provider`（具有正确的值`com.sun.xml.ws.spi.ProviderImpl`）但找不到该资源，因此尝试从硬编码的类名（`com.sun.xml.internal.ws.spi.ProviderImpl`）加载提供程序并失败。

`META-INF/services/*`对我来说，解决方案是将所有 JAX-WS RI 和依赖项 jar 中的所有文件加载到 SCOTT 模式。另一种方法可能是将所有 JAX-WS RI、依赖项**和**最终程序加载到相同的模式。

# mysql - SQL Manager for MySQL - foreign Key

> ID：15184456
> 
> 赞同：-1
> 
> 时间：2013-03-03T09:52:10.663
> 
> 标签：mysql

I would like to make **personId** Foreign Key using this software and later connect with table **country**. Do you know where is this option?

![enter image description here](../Images/23758b0af5dfe778f07af940df5cb80a.png) [here they show option for foreign Key - but I have another view](http://www.sqlmanager.net/en/products/mysql/manager/documentation/hs5435.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:03:34.547

Problem fixed before I didn`t find this example.

[here they show](http://www.sqlmanager.net/en/products/mysql/manager/documentation/hs5462.html)

# c# - C# 日期操作过滤用户

> ID：15184457
> 
> 赞同：0
> 
> 时间：2013-03-03T09:52:18.613
> 
> 标签：c#, asp.net, date, datetime

我怎样才能得到日期：

*   最近**三个月**
*   去年

这样做的原因是我想比较所有用户创建日期并检查用户是否在过去三周或去年注册。

在 C# ASP.NET 网站中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:55:05.460

*   最近三个月

    ```
    DateTime threeMonthsAgo = DateTime.Now.AddMonths(-3) 
    ```

*   去年

    ```
    DateTime oneYearAgo = DateTime.Now.AddYears(-1) 
    ```

然后您可以将该`DateTime`实例与`DateTime.Now`.

# python - 调试 Python 程序 LCM

> ID：15184462
> 
> 赞同：1
> 
> 时间：2013-03-03T09:53:16.323
> 
> 标签：python, debugging

所以我有这个程序：

```
def gcd(x, y):
    while y % x != 0:
        y = y % x
        x = x % y
    return y
def lcm(x, y):
    (x * y) / gcd(x, y)
a = lcm(1, 2)
b = lcm(3, a)
c = lcm(b, 4)
d = lcm(5, c)
e = lcm(6, d)
f = lcm(e, 7)
g = lcm(f, 8)
h = lcm(9, g)
i = lcm(h, 10)
j = lcm(11, i)
k = lcm(12, j)
l = lcm(k, 13)
m = lcm(l, 14)
n = lcm(15, m)
o = lcm(n, 16)
p = lcm(17, o)
q = lcm(18, p)
r = lcm(q, 19)
print(lcm(r, 20)) 
```

好的，由于这篇文章的答案，我现在已经解决了这个问题，但为什么会这样：

```
def gcd(x, y):
        while y % x != 0:
            y = y % x
            x = x % y
        return y
    def lcm(x, y):
        return (x * y) / gcd(x, y)
    a = lcm(1, 2)
    b = lcm(3, a)
    c = lcm(b, 4)
    d = lcm(5, c)
    e = lcm(6, d)
    f = lcm(e, 7)
    g = lcm(f, 8)
    h = lcm(9, g)
    i = lcm(h, 10)
    j = lcm(11, i)
    k = lcm(12, j)
    l = lcm(k, 13)
    m = lcm(l, 14)
    n = lcm(15, m)
    o = lcm(n, 16)
    p = lcm(17, o)
    q = lcm(18, p)
    r = lcm(q, 19)
    print(lcm(r, 20)) 
```

返回这个：

```
ZeroDivisonError: float modulo 
```

抱怨第二行，我想我可能需要某种`if`声明来按顺序排列这两个数字。有人知道为什么会这样吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:54:25.027

您忘记`return`了`lcm`函数中的某些内容。

```
def lcm(x, y):
    return (x * y) / gcd(x, y) 
```

当您没有在函数中显式返回任何内容时，Python 会自动返回`None`. 当您尝试`lcm(r, 20)`时，这与`lcm(None, 20)`, 因为您将函数中的两个参数相乘而`lcm`不起作用 - 您不能这样做`None * 20`。

然而，这会产生另一个错误——你的`gcd`函数也有问题！

错误发生在`y % x`is时`0`，然后你马上就做`x % y`。这将是一个可行的解决方案：

```
def gcd(x, y):
    while y != 0:
        x, y = y, x % y
    return x 
```

这直接取自Wikipedia 文章（第 2.2 节）中的[Euclid 算法。](http://en.wikipedia.org/wiki/Greatest_common_divisor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:02:14.837

这里有一个误解。当你使用`gcd()`inside`lcm()`时，你正在创建嵌套环境。`gcd()`的环境无权访问全局环境。它返回的任何东西都可以被`lcm()`' 环境访问。你不会在 中向全局环境返回任何东西`lcm()`，所以 python 默认返回 . 来`None`修复这个尝试：

```
def lcm(x, y):
    return (x * y) / gcd(x, y) 
```

您还必须将此块添加到`lcm()`以避免引发`ZeroDivision`异常：

```
def lcm(x, y):
    try:
        return (x * y) / gcd(x, y)
    except ZeroDivisionError:
        do whatever you want and return a value 
```

# php - 提交表单后如何刷新网页

> ID：15184463
> 
> 赞同：1
> 
> 时间：2013-03-03T09:53:33.413
> 
> 标签：php, mysql

m 开发一个网站，您可以在其中通过提供适当的输入来搜索任何所需的属性。我还提供了一项功能，您可以在其中参与房产的在线拍卖。我提供了一个输入框，您可以在其中设置您的出价并提交您的出价。在该输入框的顶部，我正在显示我从数据库中获取的当前最高出价。如果用户提交的出价高于当前最高出价，则“当前最高出价为*_* ”输入框上方的行应自动更新。但是，由于我已经在页面顶部编写了从数据库中获取和显示最高出价的逻辑，n 已经实现了页面底部更新数据库的其余逻辑，m 面临一些错误，请有人帮助我谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:00:47.627

如果你想使用 php 刷新网页试试这个

```
header("Location:http://something/index.php"); 
```

或者，如果您想定期从数据库中获得最高出价，则必须使用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:03:42.480

您可以在 JavaScript 的帮助下刷新页面

```
location.reload(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:09:40.410

有两种方法

1) 只需将表单提交到服务器，而无需任何 ajax 内容。（它将被更新并作为默认行为加载）

2）使用 ajax（jQuery.load 或 jQuery.ajax 将是最简单的）。

```
- submit form in the click method of jquery, 
- print bid status as  the response.
- Catch this response process it and update your data on page.
- to prevent page refresh, use event.preventDefault or return false at end of function 
```

# php - 访问嵌套在 php 类中的函数中的变量

> ID：15184466
> 
> 赞同：2
> 
> 时间：2013-03-03T09:53:56.937
> 
> 标签：php

这是我的代码的缩减版本，其中包含 main`class`和 main`function`

我需要获取`'userName'`用户输入的值才能在内部使用它`'mainFunction'`，尝试将`'userName'`内部设置为`'myForm'`全局但没有得到值。

`'userName'`可以在外面使用value`'mainClass'`以便我可以在任何地方使用它吗？

```
 class mainClass {

  function myForm() {
      echo '<input type="text" value="'.$userName.'" />';
   }

 }   
 function mainFunction () {
    $myArray = array (

         'child_of' => $GLOBALS['userName']

      ) 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:57:58.427

```
class mainClass {
    public $username;
    function  __construct($username){
        $this->username = $username;
    }

    function myForm() {
        echo '<input type="text" value="'.$this->userName.'" />';
    }

 }

 function mainFunction () {
    $myArray = array (
        'child_of' => $this->username;
    );
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:02:56.227

> 'userName' 的值可以在'mainClass' 之外使用，以便我可以在任何地方使用它吗？

是的。

首先，您需要像这样定义一个类属性

```
class MainClass
{

    private $_userName;

    public function myForm()
    {
        echo '<input type="text" value="'.$this->_userName.'" />';
    }
} 
```

看看你如何在 myForm() 方法中访问这个属性。

然后你需要为这个属性定义 getter 方法（或者你可以将属性公开），如下所示：

```
class MainClass
{

    private $_userName;

    public function getUserName()
    {
        return $this->_userName;
    }

    public function myForm()
    {
        echo '<input type="text" value="'.$this->_userName.'" />';
    }
} 
```

您可以像这样访问用户名属性

```
$main = new MainClass();
$userName = $main->getUserName(); 
```

请注意，您需要 MainClass 类的实例。

我建议您从简单的概念开始，并确保您 100% 理解这一点。另外我建议避免使用全局变量和更复杂的静态方法逻辑。尝试使其尽可能简单。

热烈的问候，维克多

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T10:45:15.917

下面的代码是 Codeigniter get_instance 方法的最小化[版本](http://ellislab.com/codeigniter)。因此，在您的情况下，您可以在开头的某个地方使用此代码：

```
/** Basic Classes to load the logic and do the magic */

class mainInstance {

    private static $instance;

    public function __construct()
    {
        self::$instance =& $this;
    }

    public static function &get_instance()
    {
        return self::$instance;
    }
}

function &get_instance()
{
    return mainInstance::get_instance();
}

new mainInstance();
/** ----------------------------------------------- */ 
```

然后你可以像这样创建你的全局类：

```
class customClass1 {

    public $userName = '';

      function myForm() {
          return '<input type="text" value="'.$this->userName.'" />';
       }

}

/** This is now loading globally */
$test = &get_instance();
//If you choose to actually create an object at this instance, you can call it globally later
$test->my_test = new customClass1(); 
$test->my_test->userName = "johnny";

/** The below code can be wherever in your project now (it is globally) */
$test2 = &get_instance();
echo $test2->my_test->myForm()."<br/>"; //This will print: <input type="text" value="johnny" />
echo $test2->my_test->userName; //This will printing: johnny 
```

由于这现在是全球性的，您甚至可以像这样创建自己的函数：

```
function mainFunction () {
    $tmp = &get_instance();
    return $tmp->my_test->userName;
}

echo mainFunction(); 
```

# java - 来自动态 Web 项目中 jar 的 ClassNotFoundException

> ID：15184468
> 
> 赞同：0
> 
> 时间：2013-03-03T09:54:10.200
> 
> 标签：java, jar

我创建了一个想要在动态 Web 项目中使用的 JPA 项目。

我从这个 JPA 项目中制作了一个 jar，并将其添加到动态 web 项目的 lib 文件夹中。然后我将它添加到动态 Web 项目的构建路径中，并在“订购和导出”选项卡中勾选它。

第一个问题：我使用这些选项创建了带有正常导出到 jar 的 jar 文件；

![在此处输入图像描述](../Images/25718be3ed105580ee4cdc45c9cf43af.png)

这些可以吗，还是我必须添加一些东西。

第二个问题：在我将此 jar 添加到构建路径并使用此 jar 中的类的实例后，我可以将其添加到导入中，并且该类是已知的，因此我看不到任何错误。

当我尝试在使用类的地方运行 jsp 和 servlet 时，我的 apache 中出现***java.lang.NoClassDefFoundError***错误，在我使用类的行出现 java.lang.ClassNotfoundEception。因此，由于某种原因，他在运行时找不到该类。

我试图用不同的选择一遍又一遍地制作罐子。我试图以不同的方式（ctrl-T）导入我需要的类，但我只看到一个类。

我唯一觉得奇怪的是导入的样子。在我的 JPA 项目中，我有一个包结构，例如：

be.JPA.project6

在我的动态网络项目中，我有一个包结构，如：

be.project6

当我看到导入时，我看到：be.JPA.project6.data.classname

我希望有一个不同的结构，这样他就会知道他需要在“正常”包结构之外进行搜索。但也用“ctrl-T”我只能看到这个类

我不想引用其他项目，而是像这样将它与 jar 一起使用。

我目前没有任何线索，所以任何建议都会更受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:03:09.040

构建路径是：构建路径。用于*构建*应用程序的路径。

webapp的*运行时*类路径由 WEB-INF/class 目录和`WEB-INF/lib`.

从动态 Web 项目的构建路径中删除 jar。只需将其放入`WebContent/WEB-INF/lib`目录中。Eclipse 会自动将此目录中的所有 jar 添加到构建路径中，并将它们放在`WEB-INF/lib`已部署的 Web 应用程序的目录中，这样它们也是运行时类路径的一部分。

# javascript - javascript中的正则表达式错误

> ID：15184477
> 
> 赞同：-1
> 
> 时间：2013-03-03T09:54:50.387
> 
> 标签：javascript, regex

```
regex = /^[0-9A-F]{2}:[0-9A-F]{2}$/

regex.test("2A:3G") // is resulting in false as output. 
```

如果我是正确的，它应该是真的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T09:57:33.737

`G`不是，`[0-9A-F]`所以不，它不应该是真的。

你可以检查这`/^[0-9A-F]{2}:[0-9A-F]{2}$/.test('2A:3F')`是真的，所以这是唯一的原因。

# wcf - 在 WCF 服务器中引发事件

> ID：15184480
> 
> 赞同：0
> 
> 时间：2013-03-03T09:56:11.283
> 
> 标签：wcf, events

我在 SO 中看到了一些讨论，比如[这个，](https://stackoverflow.com/questions/5739501/how-can-a-wcf-service-raise-events-to-its-clients)说 WCF 中没有事件之类的东西。
另一方面，我正在关注[本教程](http://wcftutorial.net/WCF-Events.aspx)并进入“事件”部分。

教程中的代码是否被认为是不好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:36:50.070

这不是不好的做法，但这些事件将仅在服务器（服务）端主机进程上使用（消耗）（当服务类/合同接口直接可访问时）。标准 WCF 客户端不知道那些未反映在自动生成的客户端代理中的事件。

但是，如果在客户端上可以访问原始接口定义，您可以使用带有事件的服务合同接口来约束自定义客户端代理（也称为服务/服务器代理）。

# django - InvalidOperation：十进制的无效文字：u''

> ID：15184487
> 
> 赞同：2
> 
> 时间：2013-03-03T09:57:01.920
> 
> 标签：django

当用户在每个信封中执行货币分配时，有时他们忘记将金额放入其他信封中，结果为“0”。然后它将导致 InvalidOperation。

如何修复此错误？或者系统如何只获取大于0的金额？

例外

```
Types:  InvalidOperation

Value:  Invalid literal for Decimal: u'' 
```

分配中的信封/views.py（应用程序）

```
 t2_payee = 'Envelope Transfer'

        for val in request.POST:

            if val[0:4] == "env_":

                env = Envelope.objects.get(pk=int(val[4:]))

                amt = Decimal(request.POST[val])

 <WSGIRequest
 path:/envelopes/allocate/6313/,
 GET:<QueryDict: {}>,
 POST:<QueryDict: {u'allocation_date': [u'2013-03-03'], u'month': [u'03'], 
      u'source': [u'6313'], u'year': [u'2013'], u'env_6316': [u''], 
      u'csrfmiddlewaretoken': [u'3kKoVymvIpbyhCknE1c3WH6YFznTaEoj'], 
      u'env_6315': [u'1'], u'env_6314': [u'0']}>,
 COOKIES:{'__utma': '136509540.132217190.1357543480.1362303551.1362307904.34', 
```

'__utmb': '1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T12:35:49.553

在您的 env_6316 示例值为空，Decimal 不知道如何将其转换为数字。您应该检查 val 是否为空，如果是，则在转换为十进制之前将其替换为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T20:45:39.470

我在运行 SQL 查询并尝试使用查询返回的数据构建 Pandas 数据框时遇到此错误。对查询的更改为我解决了这个问题。我还尝试对返回的列值进行 CAST，但最终，将 ::FLOAT8 附加到有问题的字段是我唯一的解决方案。

示例查询：

```
SELECT sum(dollars)::FLOAT8 FROM [table] WHERE ... 
```

sum(dollars) 是对我造成问题的领域。我表中的类型是数字（10,6），大小是 8。

# c# - 无法通过 C# 中数据集的存储过程获取结果

> ID：15184488
> 
> 赞同：0
> 
> 时间：2013-03-03T09:57:21.833
> 
> 标签：c#, visual-studio-2010, sql-server-2008

我有一个存储过程如下：

```
ALTER PROCEDURE GetPatientSearchResultFromLocation(@Searchvalue varchar(100))
AS
   SELECT    
      RegNo, FirstName, MiddleName, LastName, EmailId, FrCityId, Location, MobileNo
   FROM         
      PatientsReg
   WHERE     
      (Location LIKE '@Searchvalue%'); 
```

在这里，如果我只运行 SQL 查询，它会给我适当的输出，但是当我在这个过程中使用它时，它不会返回任何值，而只是简单的表结构。

我的c#代码如下：

```
public DataTable GetPatientDetailsFromLocation(string Searchvalue)
{
        command = new SqlCommand("GetPatientSearchResultFromLocation", connection);
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.AddWithValue("@Searchvalue", Searchvalue);
        command.UpdatedRowSource = UpdateRowSource.OutputParameters;
        adp = new SqlDataAdapter(command);
        connection.Open();
        adp.Fill(ds);
        connection.Close();
         return ds.Tables[0];
} 
```

没有异常/错误，但也没有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:05:11.630

错误在 LIKE 子句中

```
 (Location LIKE '@Searchvalue%'); 
```

应该

```
 (Location LIKE @Searchvalue); 
```

没有单引号，而 '%' 通配符应该直接在 C# 代码中添加到参数值。

```
 command.Parameters.AddWithValue("@Searchvalue", Searchvalue + "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:06:48.143

尝试改变这一点：

```
(Location LIKE '@Searchvalue%'); 
```

到：

```
(Location LIKE @Searchvalue + '%'); 
```

# objective-c - 检查活动的 Internet 连接（Mac 应用程序）

> ID：15184490
> 
> 赞同：1
> 
> 时间：2013-03-03T09:57:32.677
> 
> 标签：objective-c, macos

我看过很多关于如何在 iOS 上检查互联网连接的教程，但我发现在 OSX 上很难做到这一点。到目前为止，每当它尝试加载网站并且没有互联网（以及应用程序启动时）时，我所拥有的是：

```
NSURL *scriptUrl = [NSURL URLWithString:@"http://apple.com"];
NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
if (data)
    NSLog(@"Device is connected to the internet");
else
    NSLog(@"Device is not connected to the internet");
    [RetryInternetWindow makeKeyAndOrderFront:NSApp]; 
```

* * *

我发现的唯一问题是它似乎认为我从来没有任何互联网连接并显示我告诉它的窗口。有没有一种简单的方法可以在 Mac 应用程序上检查互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:21:39.237

您应该能够为此使用可达性 API。请参阅此[Apple 指南](http://developer.apple.com/library/mac/#documentation/Networking/Conceptual/SystemConfigFrameworks/SC_ReachConnect/SC_ReachConnect.html#//apple_ref/doc/uid/TP40001065-CH204-BHAFBAHI)。

[github](https://github.com/tonymillion/Reachability)上还有一个替代品。

# c# - 解析 windows 'ipconfig /all' 输出

> ID：15184495
> 
> 赞同：1
> 
> 时间：2013-03-03T09:57:46.270
> 
> 标签：c#, .net, regex, parsing, ipconfig

我在使用正则表达式解析 'ipconfig /all' 的输出时遇到了一些麻烦。目前我正在使用 RegexBuddy 进行测试，但我想在 C#.NET 中使用正则表达式。

我的输出是：

```
Ethernet adapter Yes:

   Connection-specific DNS Suffix  . :
   Description . . . . . . . . . . . : MAC Bridge Miniport
   Physical Address. . . . . . . . . : 02-1F-29-00-85-C9
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   Link-local IPv6 Address . . . . . : fe80::f980:c9c3:a574:37a%24(Preferred)
   Link-local IPv6 Address . . . . . : fe80::f980:c9c3:a574:37a7%24(Preferred)
   Link-local IPv6 Address . . . . . : fe80::f980:c9c3:a574:37a8%24(Preferred)
   IPv4 Address. . . . . . . . . . . : 10.0.0.1(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.0.0
   IPv4 Address. . . . . . . . . . . : 172.16.0.1(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 172.16.0.254
   DHCPv6 IAID . . . . . . . . . . . : 520228888
   DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-17-1C-CC-CF-00-1F-29-00-85-C9
   DNS Servers . . . . . . . . . . . : 192.162.100.15
                                       192.162.100.16
   NetBIOS over Tcpip. . . . . . . . : Enabled 
```

到目前为止我写的正则表达式是：

```
([ -~]+):.+(?:Description\s)(?:\.|\s)+:\s([ -~]+).+(?:Physical Address)(?:\.|\s)+:\s([ -~]+).+(?:DHCP Enabled)(?:\.|\s)+:\s([ -~]+).+(?:(?:Link-local IPv6 Address)(?:\.|\s)+:\s([ -~]+).+Preferred.+)+ 
```

问题是我想将所有有用的字段作为组捕获，以便在 C# 中轻松获取它们，并且由于某种原因 - 当我要捕获多个“链接本地 IPv6 地址”字段时，它停止工作。

我会很感激任何帮助，谢谢。

编辑：另一个问题是我从远程机器接收 ipconfig 数据（那里有一个我无法控制的非托管程序） - 因此我不能使用 WMI 或类似的东西来获取另一个中的 ipconfig 信息方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T10:08:01.167

> 但我想在 C#.NET 中使用正则表达式。

为什么是正则表达式？相信我，你不想使用正则表达式。一位智者曾经说过：

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。

让我现在陈述你的两个问题：

*   使用 ipconfig 检索有关 TCP/IP 配置的信息
*   使用正则表达式解析此工具的输出

实际上，您可以直接使用 WMI 检索此信息，从而解决您最初的问题，并且永远不要考虑再次使用正则表达式：

```
using (var mc = new ManagementClass("Win32_NetworkAdapterConfiguration"))
using (var instances = mc.GetInstances())
{
    foreach (ManagementObject instance in instances)
    {
        if (!(bool)instance["ipEnabled"])
        {
            continue;
        }

        Console.WriteLine("{0}, {1}, {2}", instance["Caption"], instance["ServiceName"], instance["MACAddress"]);

        string[] ipAddresses = (string[])instance["IPAddress"];
        string[] subnets = (string[])instance["IPSubnet"];
        string[] gateways = (string[])instance["DefaultIPGateway"];
        string domains = (string)instance["DNSDomain"];
        string description = (string)instance["Description"];
        bool dhcp = (bool)instance["DHCPEnabled"];
        string[] dnses = (string[])instance["DNSServerSearchOrder"];
    }
} 
```

除此之外，您可以使用该[`Mgmtclassgen.exe`](http://msdn.microsoft.com/en-us/library/2wkebaxa.aspx)实用程序为这些 WMI 类创建强类型包装器，从而使您的代码更加安全，并且您将能够摆脱魔术字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T11:56:46.640

为什么使用正则表达式？您的输入采用简单的键值格式。使用类似的东西

```
foreach (var line in lines)
{
   var index  = line.IndexOf (':') ;
   if (index <= 0) continue ; // skip empty lines

   var key   = line.Substring (0,  index).TrimEnd (' ', '.') ;
   var value = line.Substring (index + 1).Replace ("(Preferred)", "").Trim () ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:47:23.800

当然，您可以通过使用获取所有这些信息[`NetworkInterface.GetAllNetworkInterfaces()`](http://msdn2.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getallnetworkinterfaces)

# wpf - 如何为 WPF 工具包图表赋予样式

> ID：15184501
> 
> 赞同：5
> 
> 时间：2013-03-03T09:58:21.313
> 
> 标签：wpf, wpftoolkit

![在此处输入图像描述](../Images/7888167565f3f448d80b502d6ff02692.png)

我在我的 WPF 应用程序中使用 WPF 工具包图表和 PieChart。

我想在饼图图片中将默认的白色背景更改为透明..

如何赋予风格以实现这一目标

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T17:12:44.870

WPF 旨在允许您通过 XAML 设置控件样式；不是代码。也可以通过样式使饼图中的绘图区域和图例透明。不幸的是，绘图区域周围的边框无法使用属性来控制，而您必须修改整个控件模板。最后，使用样式可能和在后面编写修改可视化树的代码一样乏味，但至少对我来说，它仍然感觉像是一种更简洁的方法。

```
<chartingToolkit:Chart>
  <chartingToolkit:Chart.PlotAreaStyle>
    <Style TargetType="Grid">
      <Setter Property="Background" Value="Transparent"/>
    </Style>
  </chartingToolkit:Chart.PlotAreaStyle>

  <chartingToolkit:Chart.LegendStyle>
    <Style TargetType="visualizationToolkit:Legend">
      <Setter Property="Margin" Value="15,0"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="BorderBrush" Value="Transparent"/>
      <Setter Property="Background" Value="Transparent"/>
    </Style>
  </chartingToolkit:Chart.LegendStyle>

  <chartingToolkit:Chart.Style>
    <Style TargetType="chartingToolkit:Chart">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="chartingToolkit:Chart">
            <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <visualizationToolkit:Title Content="{TemplateBinding Title}" Style="{TemplateBinding TitleStyle}" />

                <!-- Use a nested Grid to avoid possible clipping behavior resulting from ColumnSpan+Width=Auto -->
                <Grid Grid.Row="1" Margin="0,15,0,15">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>

                  <visualizationToolkit:Legend x:Name="Legend" Title="{TemplateBinding LegendTitle}" Style="{TemplateBinding LegendStyle}" Grid.Column="1" />
                  <chartingprimitives:EdgePanel x:Name="ChartArea" Style="{TemplateBinding ChartAreaStyle}">
                    <Grid Canvas.ZIndex="-1" Style="{TemplateBinding PlotAreaStyle}" />
                    <!--<Border Canvas.ZIndex="10" BorderBrush="#FF919191" BorderThickness="1" />-->
                  </chartingprimitives:EdgePanel>
                </Grid>
              </Grid>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </chartingToolkit:Chart.Style>

  <chartingToolkit:PieSeries ... />
</chartingToolkit:Chart> 
```

和`PlotAreaStyle`被`LegendStyle`修改以使它们透明。`ControlTemplate`通过修改图表并简单地注释掉有问题的`Border`元素来删除绘图区域周围的边框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T10:57:07.980

如果您查看可视化树，您会发现您必须更改网格和边框的背景属性才能将背景更改为透明（下图中以黄色突出显示的元素）。

![在此处输入图像描述](../Images/1e8f2306508d60ec192efbd4a17b7538.png)

为此，您可以在`Loaded`事件中更改颜色。首先您必须找到`EdgePanel`名称`ChartArea`，然后您必须更改网格和边框的颜色。如果您还想将背景设置`Legend`为透明，则必须找到`Legend`元素并设置适当的属性。

```
<DVC:Chart Canvas.Top="80" Canvas.Left="10" Name="mcChart" 
   Width="400" Height="250"
   Background="Orange"
   Loaded="mcChart_Loaded">            
    <DVC:Chart.Series>
        <DVC:PieSeries Title="Experience" 
            ItemsSource="{StaticResource FruitCollection}"
            IndependentValueBinding="{Binding Path=Name}"
            DependentValueBinding="{Binding Path=Share}">                
        </DVC:PieSeries>
    </DVC:Chart.Series>           
</DVC:Chart> 
```

代码隐藏：

```
private void mcChart_Loaded(object sender, RoutedEventArgs e)
{
    EdgePanel ep = VisualHelper.FindChild<EdgePanel>(sender as Chart, "ChartArea");
    if (ep != null)
    {
        var grid = ep.Children.OfType<Grid>().FirstOrDefault();
        if (grid != null)
        {
            grid.Background = new SolidColorBrush(Colors.Transparent);
        }

        var border = ep.Children.OfType<Border>().FirstOrDefault();
        if (border != null)
        {
            border.BorderBrush = new SolidColorBrush(Colors.Transparent);
        }
    }

    Legend legend = VisualHelper.FindChild<Legend>(sender as Chart, "Legend");
    if (legend != null)
    {
        legend.Background = new SolidColorBrush(Colors.Transparent);
        legend.BorderBrush = new SolidColorBrush(Colors.Transparent);               
    }
} 
```

在这种情况下查找子元素的辅助类`EdgePanel`：

```
class VisualHelper
{
    public static T FindChild<T>(DependencyObject parent, string childName) where T : DependencyObject
    {
        if (parent == null) return null;

        T foundChild = null;

        int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < childrenCount; i++)
        {
            var child = VisualTreeHelper.GetChild(parent, i);
            T childType = child as T;
            if (childType == null)
            {
                foundChild = FindChild<T>(child, childName);
                if (foundChild != null) break;
            }
            else if (!string.IsNullOrEmpty(childName))
            {
                var frameworkElement = child as FrameworkElement;
                if (frameworkElement != null && frameworkElement.Name == childName)
                {
                    foundChild = (T)child;
                    break;
                }
            }
            else
            {
                foundChild = (T)child;
                break;
            }
        }
        return foundChild;
    }
} 
```

# php - 如何从php中的关联数组中获取所有键

> ID：15184502
> 
> 赞同：4
> 
> 时间：2013-03-03T09:58:27.283
> 
> 标签：php, associative-array

我在 php 中有一个关联数组。当我在它上面做一个模具时，我会得到如下正确的值：

```
array(1) { [0]=> array(1) { [123]=> string(5) "Hello" }} 
```

但是当我尝试将此数组的键提取到一个新数组中时，我无法取出键：

```
$uniqueIds = array_keys($myAssociativeArray);
die(var_dump($uniqueIds));
int(0) array(1) { [0]=> int(0) } 
```

谁能告诉我我在这里做错了什么？我想从关联数组中取出所有键。为此，我指的是线程：[php：如何从数字索引中获取关联数组键？](https://stackoverflow.com/questions/4095796/php-how-to-get-associative-array-key-from-numeric-index)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T10:16:03.090

```
$uniqueIds = array_keys($myAssociativeArray[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:59:51.417

```
 <?php
    function multiarray_keys($ar) {

        foreach($ar as $k => $v) {
            $keys[] = $k;
            if (is_array($ar[$k]))
                $keys = array_merge($keys, multiarray_keys($ar[$k]));
        }
        return $keys;
    }
$result = multiarray_keys($myAssociativeArray);
var_dump($result);
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-28T23:33:32.607

以下递归获取关联数组中的所有键

```
function getArrayKeysFlat($array) {
    if(!isset($keys) || !is_array($keys)) {
        $keys = array();
    }
    foreach($array as $key => $value) {
        $keys[] = $key;
        if(is_array($value)) {
            $keys = array_merge($keys,getArrayKeysFlat($value));
        }
    }
    return $keys;
} 
```

# templates - 将 Bootstrap 模板添加到 MeteorJS

> ID：15184504
> 
> 赞同：11
> 
> 时间：2013-03-03T09:58:58.040
> 
> 标签：templates, twitter-bootstrap, meteor

我有一个来自[https://wrapbootstrap.com/](https://wrapbootstrap.com/)的 Bootstrap 主题，我想在 MeteorJS 应用程序中使用它。问题是它有如下脚本标签：

```
<!--[if !lte IE 6]><!-->
    <!-- Link to Google CDN's jQuery + jQueryUI; fall back to local -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery.min.js"><\/script>')</script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script>window.jQuery.ui || document.write('<script src="js/libs/jquery.ui.min.js"><\/script>')</script>

    script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></scrip>
                                                                                    <!-- RECOMMENDED: For (IE6 - IE8) CSS3 pseudo-classes and attribute selectors -->
    <!--[if lt IE 9]> 
        <script src="js/include/selectivizr.min.js"></script>                   
    <![endif]-->

    <script src="js/libs/jquery.ui.touch-punch.min.js"></script>                <!-- REQUIRED:  A small hack that enables the use of touch events on mobile --> 
```

添加到 MeteorJS 时不起作用。我知道标签不起作用，但是您如何将这个设计的页面适应 MeteorJS？

**后期编辑：**

我添加了`script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>`上面的。以上所有脚本都添加到`<body>`. 该`google.maps`库用于`lib/main.js`，它不适用于 MeteorJS，因为它会引发`ReferenceError`. 在 Meteor 之外它工作正常。

关于如何从引导模板添加谷歌地图脚本的任何想法？

**后期编辑：**

Bootstrap 模板有一个`lib/main.js`文件，它是最后导入的 javascript 文件。尽管如此，当我将它添加到 Meteor 时，它似乎正在运行，但在 UI 中看不到它的效果。例如，它执行这一行`$(".chzn-select").select2();`，但只有当我从控制台执行它时，我才能看到 UI 更改。该文件最后由 Meteor 加载。我也试过

```
function load_scripts() {
var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "lib/main.js";
    document.body.appendChild(script);
}

if (Meteor.is_client) {
    window.onload = load_scripts;
} 
```

没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:04:16.143

这些外部主题可能与流星包含的默认引导程序不兼容，因此您应该删除流星的引导程序包：

**删除默认引导程序**：

```
meteor remove bootstrap 
```

**添加您的主题：**

将您的 css 文件放在项目的 css 目录中，例如`/client/css`

将主题 javascript 文件放入`/client/lib`

不要担心脚本标签，或者链接它们中的任何一个或任何东西，meteor 应该处理所有这些。

***还***

Meteor 默认包含 JQuery，因此您不必担心将其包含在您的项目中。如果由于某些奇怪的原因您是流星项目，则添加 jquery 可能没有使用它：

```
meteor add jquery 
```

**外部 API**

例如 FB/Google Mapis API/跟踪脚本。像往常一样将它们添加到`<head>`html 文件的部分中。

希望你觉得这一切都很酷！！

# upload - 使用 codedUI 测试框架自动化 kendoUI 上传控制

> ID：15184505
> 
> 赞同：0
> 
> 时间：2013-03-03T09:59:05.813
> 
> 标签：upload, kendo-ui

当使用 codedUI 作为自动化测试框架来测试应用程序时，我遇到了 KendiUI 上传控件的问题。

问题：我从使用KendoUI上传控件开发的UI中录制并播放了上传文件的事件，但是自动化框架没有显示指示文件上传的进度条，它一直显示进度图标。

我该如何解决这个问题

但是，当我手动尝试上传文件时它工作正常，在几秒钟内它会显示进度条并出现复选标记，表明文件已上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:38:20.010

我遇到了同样的问题，但在 Microsoft CodedUI 支持的帮助下，我能够解决这个问题。

在您尝试使用 ajax 相关控件执行文件上传等功能的测试方法中，禁用`WebWaitForReadyLevel`. 请将以下代码行粘贴到您的测试方法的开头

```
ConfigurationManager.AppSettings["WebWaitForReadyLevel"] = "3"; 
```

这实际上会禁用它。

此禁用处于`testmethod`级别，因此如果您不想禁用，请不要编写任何此类代码，因为默认情况下`WebWaitForReadyLevel`已启用。

希望这可以帮助。

# apache - CakePHP、mod_rewrite 和 SVN

> ID：15184506
> 
> 赞同：0
> 
> 时间：2013-03-03T09:59:18.163
> 
> 标签：apache, svn, cakephp, mod-rewrite

我有一个非常奇怪的问题。

我配置了一个空`cakephp 2.3`项目，我进行了所有 cakephp 更改（`database.php`、`salt`等）等等`debugkit`。

一切正常，我得到了蛋糕的默认页面，没有错误。

当我将这个项目提交给`svn`然后我签出项目时，我收到了`mod_rewrite is not configured properly`.

为什么？有什么区别？我怎样才能检查它？

（注意：我将两个文件夹上的用户所有者更改为相同，我将权限设置为 777，我没有更改 httpd conf，所以在两种情况下都是相同的，而且两个项目的 vhost 也是相同的，只有服务器的名称和路径不同。）

# android - 从枚举类中获取名称

> ID：15184508
> 
> 赞同：0
> 
> 时间：2013-03-03T09:59:22.853
> 
> 标签：android, enums, drawable

我有这样的枚举类：

```
public enum Names {

Logo1(R.drawable.adese,"Adese"),
Logo2(R.drawable.afra,"Afra");

private int resource;
private String description;
private Names(int resource, String description){
    this.description = description;
}

public boolean isCorrect(String input){
return input.equals(description);
}
} 
```

我想从活动中的可绘制对象中获取枚举的名称。换句话说，当我为某个方法提供 R.drawable.adese 时，我想获得 Logo1。而当我提供 R.drawable.afra 时，我想得到 Logo2 等等。我怎样才能做到这一点？

在我的活动中

```
Names name;
.
.
.
id = R.drawable.adese;
name = Names.forDrawable(id);
    check.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            a=name.isCorrect(text.getText().toString());
            if(a==true){
            Intent intent = new Intent(LogoActivity.this, LevelSelectionActivity.class);
            startActivity(intent);
        }
        }
        }); 
```

活动中声明了检查按钮等，我没有写在这里缩短。

我收到错误消息：

```
03-03 12:16:27.125: E/AndroidRuntime(6091): FATAL EXCEPTION: main
03-03 12:16:27.125: E/AndroidRuntime(6091): java.lang.NullPointerException
03-03 12:16:27.125: E/AndroidRuntime(6091):     at         com.example.turkishlogoquiz.LogoActivity$1.onClick(LogoActivity.java:57)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at android.view.View.performClick(View.java:4223)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at android.view.View$PerformClick.run(View.java:17275)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at android.os.Handler.handleCallback(Handler.java:615)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at android.os.Looper.loop(Looper.java:137)
-03 12:16:27.125: E/AndroidRuntime(6091):   at android.app.ActivityThread.main(ActivityThread.java:4898)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-03 12:16:27.125: E/AndroidRuntime(6091):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:05:01.250

只需创建一个静态方法，该方法将返回一个`Names`可绘制资源的值。

```
public enum Names {
    Logo1(R.drawable.adese,"Adese"),
    Logo2(R.drawable.afra,"Afra");

    private int resource;
    private String description;

    private Names(int resource, String description) {
        this.resource = resource;
        this.description = description;         
    }

    public boolean isCorrect(String input){
        return input.equals(description);
    }

    public static Names forDrawable(int resourceId) {
        for (final Names name : Names.values()) {
            if (name.resource == resourceId) {
                return name;
            }
        }

        return null;
    }
} 
```

# java - 对文件的读取和写入操作的倍数

> ID：15184510
> 
> 赞同：-3
> 
> 时间：2013-03-03T09:59:36.173
> 
> 标签：java, netbeans

我正在尝试找到一种方法来创建一个类和关联的方法来计时读/写操作，并将结果显示到控制台。我到处找，但我没有找到任何东西（（有可能做到吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:02:23.847

你可以试试这个：

```
long readMethodStartTime = System.nanoTime();
readMethod();
long readMethodEndTime = System.nanoTime();

long readMethodDuration = readMethodEndTime - readMethodStartTime ;
System.out.println("Time taken for readMethod to execute: " + readMethodDuration); 
```

对于 write 方法也是如此。

# linux-kernel - 分配的内存是否使模块被内核视为“已使用”

> ID：15184511
> 
> 赞同：2
> 
> 时间：2013-03-03T09:59:45.820
> 
> 标签：linux-kernel, kernel, drivers

我是内核编程新手，目前正在使用 tplink 无线网卡（Atheros 芯片组）的“Madwifi”驱动程序。我的内核版本是 2.6.32-37 (ubuntu)。

我正在使用一个已被其他人修改过的驱动程序（我不认识也无法联系以获取更多信息），我担心他们动态分配内存（使用 kmalloc）但没有释放它适当地。

我的问题是：

1.  如果他们实际上没有释放分配的内存，是否会使操作系统将模块视为“忙碌”，使其无法卸载模块？

2.  以及我应该如何或在哪里释放模块中分配的内存（考虑到模块应该“永远”运行的事实）？

谢谢！

奥马尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:03:29.547

不。与（或其任何同事）分配内存`kmalloc`不会增加`use-count`模块的。分配内存的所有权可以随时更改，只需将地址（保存在指针变量中）传递给另一个存储在某处的模块/块。内核没有跟踪这个。

如何共享、给予和获取内存在很大程度上取决于编码架构和编码模型的选择。这是用**C**编写的；没有规则。

处理模块使用计数的一种方法是使用 kref。有关更多信息，请参阅内核源树中的*Documentation/kref.txt或*[此处](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/kref.txt)。

# c# - 嵌入基于 XAML 的用户控件的 Windows 应用商店类库

> ID：15184513
> 
> 赞同：1
> 
> 时间：2013-03-03T09:59:53.490
> 
> 标签：c#, windows-store-apps, asp.net-4.5

如何将基于 XAML 的用户控件预编译到 dll 中？

类似于 Razor Generator 对 MVC 视图的工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:20:03.600

是的你可以。您可以创建一个可以从您的应用程序引用的类库（Windows 应用商店应用程序）。但是，它必须与您的应用程序一起打包，并且不能动态加载。

# dart - 如何在飞镖编程中监听键盘事件

> ID：15184517
> 
> 赞同：5
> 
> 时间：2013-03-03T10:00:11.280
> 
> 标签：dart, dart-webui

我是谷歌飞镖的新手，现在已经尝试学习了一天。一般来说，我对编程很陌生，我正在尝试阅读文档；然而，我觉得有点不知所措。

我想知道在[这里](http://api.dartlang.org/docs/bleeding_edge/dart_html/KeyCode.html#SPACE)键为空格键创建交互的最合适方法。当按下空格键时，它会在函数 void startwatch() 、 void resetwatch() 之间切换

我相信这是正确的文档页面，也是[keyboardEventController 的文档](http://api.dartlang.org/docs/bleeding_edge/dart_html/KeyboardEventController.html)

```
void main() {

}

void startwatch() {
  mywatch.start();
  var oneSecond = new Duration(milliseconds:1);
  var timer = new Timer.repeating(oneSecond, updateTime);
}

void resetwatch() {
  mywatch.reset();
  counter = '00:00:00';
} 
```

需要任何进一步的信息，我会立即回复。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T15:02:44.180

要收听键盘事件并在`startwatch()`和之间切换`resetwatch()`：

```
void main() {
  var started = false;

  window.onKeyUp.listen((KeyboardEvent e) {
    print('pressed a key');

    if (e.keyCode == KeyCode.SPACE) {
      print('pressed space');

      if (started) {
        resetwatch();
      } else {
        startwatch();
      }

      started = !started; // A quick way to switch between true and false.
    }
  });
} 
```

`window`是[`Window`](http://api.dartlang.org/docs/releases/latest/dart_html/Window.html)类的一个实例。它会自动为您提供。

还有一个方便的类叫做[`KeyEvent`](http://api.dartlang.org/docs/releases/latest/dart_html/KeyEvent.html)，它试图消除跨浏览器的不一致。这些不一致通常与特殊键有关。

# android - 位图着色器和 canvas.scaling android

> ID：15184521
> 
> 赞同：9
> 
> 时间：2013-03-03T10:00:55.723
> 
> 标签：android, bitmap, android-canvas, paint

有人对以下问题有提示或解释吗？我用位图着色器绘制了一条路径。当画布未缩放时，它看起来不错（第一张图片）。当我缩放（放大）时，位图着色器不会被缩放并且看起来很丑陋。我在放大后尝试了几件事来重新创建位图着色器，但没有成功:-(。有人有提示吗？

没有缩放它看起来不错：

![在此处输入图像描述](../Images/3681a4a752dc2c07a15baeb6d1037730.png)

缩放时看起来很丑：

![在此处输入图像描述](../Images/4b9884b8227a19f5283222f83109bd5a.png)

代码 ：

```
 canvas.scale(scalex, scaley);
    canvas.translate(itranslatex, itranslatey);

    fillBMP = makePatternCross(fscalex, 1, Color.GREEN/*,fscalex,fscaley*/);
    fillBMPshader = new BitmapShader(fillBMP, BitmapShader.TileMode.REPEAT, BitmapShader.TileMode.REPEAT);
    paintshader = new Paint();
    paintshader.setShader(fillBMPshader);   

    canvas.drawPath(cpath.path, paintshader);

private static Bitmap makePatternCross(float fSize, float fStrokewith,int iColor) {
    Log.v("Create Patter makePatternCross","makePatternCross");

    float fBitmapSizeOrig = 10;
    fBitmapSizeOrig=fBitmapSizeOrig*fSize;
    Bitmap bm = Bitmap.createBitmap((int)fBitmapSizeOrig,(int) fBitmapSizeOrig,Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(bm);
    //c.scale(200, 200);
    c.drawColor(Color.WHITE);
    Paint p = new Paint();
    p.setColor(iColor);
    //p.setStrokeWidth(iStrokewith);
    p.setStrokeWidth(fStrokewith/fSize);
    p.setStrokeWidth((float) 0.000001);
    c.drawLine(0, 0, fBitmapSizeOrig, fBitmapSizeOrig, p);
    c.drawLine(0, fBitmapSizeOrig, fBitmapSizeOrig, 0, p);

    if (fSize != 1) {
        int iNewSize = (int) (( fBitmapSizeOrig) * fSize);
        bm = Bitmap.createScaledBitmap(bm, iNewSize, iNewSize, false);
    }

    int width = bm.getWidth();
    int height = bm.getHeight();
    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            if (bm.getPixel(x, y) == Color.WHITE) {
                bm.setPixel(x, y, Color.TRANSPARENT);
            } else {
                // bm.setPixel(x, y, bm.getPixel(x, y));
            }
        }
    }
    return bm;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:03:00.173

不确定这是否是您要寻找的。但是，如果您使用矩阵来缩放位图，它会比正常缩放保留更多的质量。

```
Matrix matrix = new Matrix();
matrix.postScale(desiredScale, desiredScale);
Bitmap scaledBitmap = Bitmap.createBitmap(sampledSrcBitmap, 0, 0, sampledSrcBitmap.getWidth(), sampledSrcBitmap.getHeight(), matrix, true); 
```

此外，当从较低的分辨率到较高的分辨率时，您也可以尝试以下操作：

```
Options options = new BitmapFactory.Options();
options.inScaled = false;
Bitmap source = BitmapFactory.decodeResource(a.getResources(), path, options); 
```

# wordpress - wordpress wp_insert_attachment() url 有错误的文件目录

> ID：15184525
> 
> 赞同：2
> 
> 时间：2013-03-03T10:01:52.660
> 
> 标签：wordpress, upload

我有以下代码：

```
$wp_filetype = wp_check_filetype( basename( $image_url ), null );
$wp_upload_dir = wp_upload_dir();
$attachment = array(
    'guid' => $wp_upload_dir['url']. '/' . basename( $image_url ), 
    'post_mime_type' => $wp_filetype['type'],
    'post_title' => preg_replace('/\.[^.]+$/', '', basename($image_url)),
    'post_content' => '',
    'post_status' => 'publish'
);

$attach_id = wp_insert_attachment( $attachment, $image_url ); 
```

一切正常，但附加的 img 标签的 url 与 src 属性中的预期不同。（ wp-contents/uploads 而不是 wp-contents/uploads/2013/03/ ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:15:59.683

尝试更改`$wp_upload_dir['url']`为`$wp_upload_dir['path']`或`$uploads['baseurl'] . $uploads['subdir']`。

# xaml - 在 Windows Phone 8 上覆盖多个页面

> ID：15184529
> 
> 赞同：1
> 
> 时间：2013-03-03T10:02:23.410
> 
> 标签：xaml, windows-phone-8

我试图构建一个能够从 web 服务同步数据的 Windows Phone 8 应用程序。

虽然我正在同步数据，但我想显示一个小弹出/覆盖/弹出，但我仍然希望能够在我的页面之间导航，而我的覆盖在这些页面之间仍然存在。

我使用 Windows RT 应用程序成功地做到了这一点：我只是在 RootPage 上添加了一个 Frame-Control，它也显示了弹出窗口。然后我在这个框架内导航，弹出窗口总是在那里。

如何在 Windows Phone 8 应用程序中实现此目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:57:12.683

您可以像在 Windows8 上那样重新设置 ``RootApplicationFrame 的样式以添加您的指标。有关示例，请参见[http://www.jeff.wilcox.name/2011/07/creating-a-global-progressindicator-experience-using-the-windows-phone-7-1-sdk-beta-2/](http://www.jeff.wilcox.name/2011/07/creating-a-global-progressindicator-experience-using-the-windows-phone-7-1-sdk-beta-2/)

或者您可以只使用页面系统托盘中的进度指示器在此处添加指示。这可能是应用程序中最常用的方法。参见[http://blog.duc.as/2011/10/08/using-the-system-tray-to-show-progress-in-windows-phone-7-mango/](http://blog.duc.as/2011/10/08/using-the-system-tray-to-show-progress-in-windows-phone-7-mango/)

# ruby-on-rails - Heroku PG Backups，如何仅恢复某些记录

> ID：15184532
> 
> 赞同：0
> 
> 时间：2013-03-03T10:02:53.667
> 
> 标签：ruby-on-rails, heroku, backup

我想使用 Heroku PG Backups 来恢复我的数据，以防任何内容被错误删除。我的问题是，如果我只想恢复某个记录及其关联怎么办？比如一个学生和他的成绩..

我发现了一个类似的问题：[如何从使用 Heroku PG Backups 制作的备份中恢复三个项目？](https://stackoverflow.com/questions/8536300/how-do-i-restore-three-items-from-a-backup-made-using-heroku-pg-backups)

但是，我不知道挑选物品是什么意思。我该怎么做？..手动？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:47:43.170

> 但是，我不知道挑选物品是什么意思。我该怎么做？..手动？

这是一个手动过程，是的。例如，您可以使用 dblink[0] 从一个数据库连接到另一个数据库并提取相关记录。

[0] [http://www.postgresql.org/docs/9.1/static/dblink.html](http://www.postgresql.org/docs/9.1/static/dblink.html)

这是一个关于如何在 heroku 上使用 dblink 的完整示例：

[https://gist.github.com/hgmnz/5100682](https://gist.github.com/hgmnz/5100682)

# browser-cache - 禁用浏览器缓存以通过 TCPDF 在 iF rame PDF 中显示

> ID：15184539
> 
> 赞同：3
> 
> 时间：2013-03-03T10:04:22.573
> 
> 标签：browser-cache, tcpdf

我正在尝试几个小时来解决以下缓存问题。

我的应用程序具有以下结构（简化）：

1.  **index.php** - 主页（包含各种输入字段、提交按钮和一个 iframe，用于在 TCPDF 的帮助下显示 PDF 内容）

2.  **generate.php** - 根据提供的 POST 参数生成 PDF 文件并将文件存储到文件系统

3.  **viewer.php** - 显示 PDF 文档（TCPD 库）。iframe 加载此脚本以显示 pdf 文件

工作流程非常简单——用户选择一些选项并单击主页上的提交按钮。选定的参数通过 POST 通过 AJAX 发送到 generate.php 脚本。该脚本生成 PDF 文件并将其存储到文件系统。最后它返回新创建/编辑的文件名。文件名在 AJAX 回调函数中获取，然后使用新/编辑的文件名刷新 iframe：

```
viewer.php?filename=NEW_OR_EDITED_FILENAME 
```

一切正常，但是当文件被替换时，有时（不总是），浏览器会显示旧的 pdf 文件，尽管新版本在硬盘上。我尝试了以下解决方案：

1.  **添加 Meta 标签以禁用对index.php**和**viewer.php**生成的 HTML 的缓存
***   通过以下方式禁用 jQuery AJAX 调用的缓存：`jQuery.ajaxSetup({cache: false});`*   在文件名参数中添加一些随机字符串：

    viewer.php?filename=FILENAME_RANDOMSTRING** 

 **然后从脚本中删除 RANDOMSTRING 并提取文件名。这些解决方案都不适合我。测试的浏览器是：**Chrome 25.0.1364.152**和**Firefox 19.0**。有人可以帮我弄这个吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T12:42:04.543

刚刚遇到了同样的问题，但是在添加了一个随机字符串之后它就完美了：

```
<iframe src="file.pdf?=<?=time();?>"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:34:00.313

经过几个小时的尝试，我找到的解决方案是**每次都真正生成一个新文件**（问题中的解决方案3，而不删除文件末尾的随机字符串）。因此，每次更改都需要更新数据库并删除旧文件。我最初的意图是避免这些行为，但不幸的是没有找到其他解决方案**

# php - 文本区域评论字段上不可靠的 JQuery 帖子

> ID：15184540
> 
> 赞同：0
> 
> 时间：2013-03-03T10:04:38.520
> 
> 标签：php, jquery, post

我正在开发一个基于 php 的小型网站，我希望用户能够评论其他用户的帖子。我使用 jquery 帖子将用户评论发送到将其添加到数据库的 php 脚本，但我发现即使 jquery 帖子提醒“成功”，评论有时也不会添加到数据库中。我的代码如下：

Jquery 帖子（帖子的 id 分配给 textarea）

```
$('.post_comment').live('click', function(){
    entry = $(this).parent();
    var textarea = entry.find('.commentbox');
    textarea_id = textarea.attr('id');
    textarea_value = textarea.val();
    if(textarea_value.length > 0)
    {
        $.post('add_comment.php', { id : textarea_id, value : textarea_value } , function(data){
            alert("Success");
        });
    } 
```

add_comment.php

```
<?PHP
session_start();
$currentUser = $_SESSION['id'];
include("connect.php");
$id = $_POST['id'];
$value = $_POST['value'];
mysql_query("INSERT INTO comment (post,user,content,date) VALUES ('$id','$currentUser','$value',NOW())");
echo mysql_insert_id();
mysql_close($connection);
?> 
```

我不确定这是我的代码，还是只是一个不可靠的网络主机。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:27:28.923

textarea_value = encodeURIComponent(textarea.val());

# javascript - 为什么胖箭头不绑定到循环理解中的当前环境？

> ID：15184541
> 
> 赞同：0
> 
> 时间：2013-03-03T10:04:57.340
> 
> 标签：javascript, loops, binding, coffeescript, list-comprehension

如果我编译这个 CoffeeScript：

```
 funcs = ((=> console.log i) for i in [0..2])                                                                                                                                                                                          

    funcs[0]()  // Prints 3
    funcs[1]()  // Prints 3
    funcs[2]()  // Prints 3 
```

它产生这个 JavaScript：

```
 (function() {
      var funcs, i;

      funcs = (function() {
        var _i, _results,
          _this = this;
        _results = [];
        for (i = _i = 0; _i <= 3; i = ++_i) {
          _results.push(function() {
            return console.log(i);
          });
        }
        return _results;
      }).call(this);

      funcs[0]();

      funcs[1]();

      funcs[2]();

      funcs[3]();

    }).call(this); 
```

我认为它会改为：

```
 _results.push((function(i) {
             return function() {
              return console.log(i);
          }})(i)); 
```

有人可以解释为什么它不这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:00:49.077

胖箭头`this`在词法上绑定，而不是每个变量。用于使用`do`IIFE 捕获变量。

```
funcs =
  for i in [0..2]
    do (i) ->
      -> console.log i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:20:09.930

这不是闭包的工作方式。当你从另一个函数作用域返回一个函数时，你会得到一个闭包：

```
var closure = (function(i) {
    return function() {
        console.log(i);
    };
})(i); 
```

这可以通过这个丑陋的 CoffeeScript 来实现（这里不需要粗箭头）：

```
funcs = ((do (j=i) -> -> console.log j) for i in [0..2]) 
```

我建议不要把它写成一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:29:58.733

好的，所以在查看 CoffeeScript 文档之后，我相信我已经回答了我自己的问题。 `=>`仅将函数绑定到 的当前值`this`。我错误地认为它将所有变量绑定到它们的当前值。

...虽然如果它有这样的功能会很整洁。也许`->>`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T10:31:57.843

当您将该咖啡转换为 javascript 时，您将获得一个绑定范围的函数。问题是：

```
funcs = (function() {
    var _i, _results,
      _this = this;
    _results = [];
    for (i = _i = 0; _i <= 3; i = ++_i) {
      _results.push(function() {
        return console.log(i);
      });
    }
    return _results;
  }).call(this); 
```

在那里，变量 i 被绑定，但是当你调用函数时，值是 3，并且每次调用函数时都保持在 3 中。

# graphics - SDL 库：是否真的需要为 SDL_HWSURFACE 调用 SDL_UpdateRect()？

> ID：15184549
> 
> 赞同：0
> 
> 时间：2013-03-03T10:05:46.903
> 
> 标签：graphics, sdl

我是 SDL 的新手，到目前为止，我已经阅读了大约十几个介绍性教程。我对硬件和软件表面之间的区别（即调用 SDL_SetVideoMode() 中的 SDL_HWSURFACE 和 SDL_SWSURFACE 标志）以及 SDL_UpdateRect() 对每种表面类型的行为方式感到有些困惑。我的理解是，对于硬件表面，不需要调用 SDL_UpdateRect()，因为它是直接绘制到显示屏上的。但是，此 Wikibooks 教程 ( [http://en.wikibooks.org/wiki/SDL_%28Simple_DirectMedia_Layer%29](http://en.wikibooks.org/wiki/SDL_%28Simple_DirectMedia_Layer%29) ) 中的示例显示不同：它在硬件表面上调用 SDL_UpdateRect()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:01:47.937

> 我对硬件和软件表面之间的区别（即调用 SDL_SetVideoMode() 中的 SDL_HWSURFACE 和 SDL_SWSURFACE 标志）感到有些困惑

在 SDL 文档 AFAIK 中，他们只是声明软件表面存储在系统内存（您的计算机 RAM）中，硬件表面存储在视频内存（您的 GPU RAM）中，并且硬件表面可以利用硬件加速（见下文SDL_翻转）。

虽然文档没有说太多，但还是有区别的，例如，我知道当使用 alpha 混合时，软件表面在性能方面优于硬件表面。我还听说软件表面更适合直接像素访问，但我无法确认。

> 以及 SDL_UpdateRect() 对每种表面类型的行为方式

两者的行为是相同的：函数更新给定表面中的给定矩形。也许，在实现方面，肯定存在差异，但同样，文档没有说明任何关于它的内容。

对于 SDL_Flip，尽管情况不同：当与硬件表面一起使用时，它会尝试交换视频缓冲区（仅当硬件支持双缓冲时才有可能，请记住将 SDL_DOUBLEBUF 标志传递给 SDL_SetVideoMode）。如果硬件不支持双缓冲或者是软件表面，则 SDL_Flip 调用等效于使用 SDL_UpdateRect (SDL_UpdateRect(screen, 0, 0, 0, 0)) 更新整个表面区域。

> 我的理解是，对于硬件表面，不需要调用 SDL_UpdateRect()，因为它是直接绘制到显示屏上的。

不，您应该像使用软件表面一样调用它。

另请注意，在 SDL_UpdateRect 和 SDL_Flip 函数上选择的表面参数名称可能有点误导：参数名称是屏幕，但它可以是任何 SDL_Surface（不仅仅是表示用户屏幕的表面）。大多数时候（至少对于简单的应用程序），您只会在屏幕表面上进行 blit，但在不是用户屏幕的其他表面上进行 blit 是有意义的（有时是必要的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:14:28.300

[SDL_UpdateRect()](http://sdl.beuc.net/sdl.wiki/SDL_UpdateRect)与表面类型无关。（使用 SDL OpenGL 时不要使用它）。每当您必须更新 SDL_Surface 的（部分）时，都应该调用它。事实上，每次你[翻转](http://sdl.beuc.net/sdl.wiki/SDL_Flip)一个表面时，`SDL_UpdateRect(screen, 0, 0, 0, 0)`都会调用那个表面。

# ruby-on-rails - 如何在rails中获取随机记录？

> ID：15184551
> 
> 赞同：1
> 
> 时间：2013-03-03T10:06:25.190
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 rails 中获取随机记录，以在我的主页中呈现。

我有一个带有内容和标题属性的帖子模型。假设我出于某种原因想获取随机帖子（内容和标题），我该如何在 ruby​​ 中进行操作。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T11:01:16.667

你可能会发现这个宝石很方便：[Faker](http://faker.rubyforge.org/)

它允许生成具有某种含义的随机字符串。

例如，一个名字：

```
Faker::Name.name => “Bob Hope” 
```

或电子邮件

```
Faker::Internet.email 
```

除了这个gem，如果你想很容易生成mock模型，我推荐gem [Factory Girl](https://github.com/thoughtbot/factory_girl)

它允许您为模型创建工厂，因此您可以快速生成具有随机属性的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:36:23.733

自第一个回答一个不清楚的问题以来，发布另一个答案。

正如@m_x 所说，您可以`RANDOM()` 用于 SQL。

如果您不介意加载所有数据集，也可以在 ruby​​ 中进行：

```
Post.all.sample 
```

这将从所有帖子中随机选择一个记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T11:10:55.907

我知道这是一个老问题，但由于没有选择答案，回答它可能对其他用户有帮助。

我认为最好的方法是在 Ruby 中生成一个随机偏移量并在您的 Active Record 语句中使用它，如下所示：

```
Thing.limit(1).offset(rand(Thing.count)).first 
```

该解决方案还具有高性能和便携性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T17:00:40.557

不幸的是，没有与数据库无关的方法来获取随机记录，因此 ActiveRecord 没有实现任何方法。

对于 postgresql，您可以使用：

```
Post.order( 'RANDOM()' ).first 
```

获取一篇随机帖子。

此外，我通常为此创建一个范围：

```
class Post < ActiveRecord::Base
  scope :random_order, ->{ order 'RANDOM()' }
end 
```

所以如果你改变你的 RDBMS，你只需要改变范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T10:23:39.800

在您的后期控制器中，

```
def create
  @post = Post.new(params[:post])
  if you_want_some_random_title_and_content
    title_length = 80 #choose your own
    content_length = 140 #choose your own
    @post.title = (0...title_length).map{(65+rand(26)).chr}.join
    @post.content = (0...content_length).map{(65+rand(26)).chr}.join
  end

  if @post.save
    redirect_to @post
  else
    render 'new'
  end
end 
```

[使用 Kent Fedric 的方式](https://stackoverflow.com/questions/88311/how-best-to-generate-a-random-string-in-ruby)生成随机字符串

# actionscript-3 - 闪存上的音频搜索栏控制

> ID：15184552
> 
> 赞同：0
> 
> 时间：2013-03-03T10:06:38.320
> 
> 标签：actionscript-3, flash

我有一个场景，我正在开发一个音频播放器，并想为音轨搜索栏编写代码。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:29:42.920

假设您有一个`Sound`对象和一个`SoundChannel`对象来播放该`Sound`对象，您可以执行以下操作：

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.geom.Rectangle;
    import flash.media.Sound;
    import flash.media.SoundChannel;
    import flash.net.URLRequest;

    public class Main extends Sprite 
    {
        private var _trackBar:Sprite;
        private var _sound:Sound;
        private var _soundChannel:SoundChannel;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            _trackBar = new Sprite();
            _trackBar.graphics.beginFill(0);
            _trackBar.graphics.drawRect(-10, 0, 20, 40);
            _trackBar.graphics.endFill();
            addChild(_trackBar);

            graphics.lineStyle(2);
            graphics.moveTo(_trackBar.x - 10, _trackBar.y);
            graphics.lineTo(_trackBar.x - 10, _trackBar.y +_trackBar.height);
            graphics.moveTo(_trackBar.x + 200, _trackBar.y);
            graphics.lineTo(_trackBar.x + 200, _trackBar.y + _trackBar.height);

            _sound = new Sound();
            _sound.addEventListener(Event.COMPLETE, onLoaded);
            _sound.load(new URLRequest("[mp3 url goes here].mp3"));
        }

        private function onLoaded(e:Event):void 
        {
            _soundChannel = _sound.play();
            stage.addEventListener(Event.ENTER_FRAME, onTick);
            _trackBar.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
            _trackBar.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
        }

        private function onTick(e:Event):void 
        {
            if (!_soundChannel)
            {
                return;
            }
            _trackBar.x = 200 * (_soundChannel.position / _sound.length);

        }

        private function onMouseUp(e:MouseEvent):void 
        {
            _trackBar.stopDrag();
            _soundChannel = _sound.play(_sound.length * (_trackBar.x  / 200));

        }

        private function onMouseDown(e:MouseEvent):void 
        {
            _soundChannel.stop();
            _soundChannel = null;
            _trackBar.startDrag(false, new Rectangle(0, 0, 200, 0));
        }

    }

} 
```

请注意：这非常粗糙，绝对可以优化。它只是拼凑在一起，向您展示如何完成这样的任务。

# android - 停止 LocationListener 服务

> ID：15184556
> 
> 赞同：0
> 
> 时间：2013-03-03T10:07:06.723
> 
> 标签：android, android-service, android-location

我想停止`LocationListener`，但使用 a `Log`，我发现我的服务仍在运行 after`removeUpdates()`方法（当位置更改时，它会插入到我的日志中）。你知道问题出在哪里吗？提前致谢。

```
public class MyService extends Service implements LocationListener {

 private final static String TAG = "MyService";
 LocationManager lm;

     public MyService() {
     }

     ....//Other methods here

    public void onLocationChanged(Location loc) {
         Log.d(TAG, loc.toString());
         if(/*A condition, which has to stop the service when it´s time*/) 
         {
             lm.removeUpdates(this);
             lm = null;
         }
    }

    public void subscribeToLocationUpdates() {
        this.lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    }

    @Override
    public void onDestroy() {
    } 
```

}

我在另一个 Activity 中调用此服务，onCreate 方法：

```
 ComponentName comp = new ComponentName(getPackageName(),
                 MyService.class.getName());
    ComponentName service = startService(new Intent().setComponent(comp)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:30:26.383

**Service**对象及其生命周期独立于您的位置管理器的状态。或与此相关的任何其他对象。服务代表应用程序的后台部分。一旦你完成它，你可以调用`finish()`方法来结束它。

所以在你的情况下：

```
 public void onLocationChanged(Location loc) {
     Log.d(TAG, loc.toString());
     if(/*A condition, which has to stop the service when it´s time*/) 
     {
         lm.removeUpdates(this);
         lm = null;
         stopSelf(); // end this service
     }
} 
```

请查看 android 的服务文档以大致了解其性质：[Android 服务](http://developer.android.com/reference/android/app/Service.html)

# android - 在 Android 中与 setRepeating 一起使用时，AlarmManager 仅允许一项服务通过

> ID：15184557
> 
> 赞同：0
> 
> 时间：2013-03-03T10:07:24.827
> 
> 标签：android, service, broadcastreceiver

我已经为此苦苦挣扎了几天。我想要做的是定期运行服务，大约相隔 2-3 分钟。我有一个负责界面和设置第一个警报的活动。

警报由 BroadcastReceiver 配置，如下所示：

```
public class Receiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
          String message = "Alarm worked";
          Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
          setAlarm(context);
    }

    public void setAlarm(Context context){
        AlarmManager am = (AlarmManager) context.
                              getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, Receiver.class);
        PendingIntent pi = PendingIntent.getBroadcast(context, 
                              0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        Intent dailyUpdater = new Intent(context, DiscoveryService.class);
        context.startService(dailyUpdater);
        am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() 
                              + (1000 * 30) , pi);
    }
} 
```

我已经尝试将 setRepeating 用于 AlarmManager，但它仍然具有相同的效果。发生的事情是，AlarmManager 按它应该的方式工作，它会触发接收者获取的 Intent，并定期执行 onReceive，这是它应该的。但是，它仅在第一次执行该服务。第一次之后，警报仍然响起，但服务没有执行。

我从有类似问题的人那里阅读了一些主题，其中一个提到 PendingIntent 仅持续一次发送。因此，我选择不每次都设置警报，这样我就可以设置pendingIntent 标志以进行每次更新。

我尝试使我的服务成为一个 intentService，这很好，但是我的服务内部的蓝牙扫描仪不起作用，因为 intentService 线程在没有等待我的蓝牙发现完成的情况下终止。

有人知道什么可以帮助我吗？

这是我的服务的一部分：

```
public class DiscoveryService extends Service {
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this, "MyAlarmService.onCreate()", 
                                 Toast.LENGTH_LONG).show();
        findEverything();
    }
} 
```

编辑：这是我目前拥有的代码。

```
public void onReceive(Context context, Intent intent) {
      String message = "Alarm worked";
      Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
      Intent dailyUpdater = new Intent(context, DiscoveryService.class);
      context.startService(dailyUpdater);
}

public void setAlarm(Context context){
    // get a Calendar object with current time
    AlarmManager am=(AlarmManager)context. 
                             getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, Receiver.class);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent,
                             PendingIntent.FLAG_UPDATE_CURRENT);
    am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 
                             (1000 * 30) , pi);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:47:49.640

> 发生的事情是，AlarmManager 按其应有的方式工作，它触发接收者获取并定期执行 onReceive 的 Intent，正如它应该的那样。但是，它仅在第一次执行该服务。第一次之后，警报仍然响起，但服务没有执行。

*您在安排*闹钟时打了`startService()`一次电话。你根本没有*从*你*的*. 然而，您正在通过. 因此，当警报响起时，不会向服务发送命令，因为您没有向它发送命令。**`startService()` *`BroadcastReceiver``BroadcastReceiver`***

 ***> 我从有类似问题的人那里阅读了一些主题，其中一个提到 PendingIntent 仅持续一次发送。

仅当您使用`FLAG_ONE_SHOT`.

> 有人知道什么可以帮助我吗？

`startService()`从您的方法调用`onReceive()`，而不是从您的方法调用`setAlarm()`。此外，添加所有`WakeLock`管理逻辑，因为您正在使用`_WAKEUP`警报并且您无法使用 my `WakefulIntentService`.***

# neo4j - 错误：org.neo4j.cypher.ProfilerStatisticsNotReadyException：此结果尚未实现

> ID：15184558
> 
> 赞同：0
> 
> 时间：2013-03-03T10:07:24.880
> 
> 标签：neo4j, cypher

我正在尝试[优化 Cypher 查询](https://stackoverflow.com/questions/15146883/optimize-neo4j-cypher-query)，但是[我做的一个例子](http://console.neo4j.org/?id=3hjktv)给了我：

> 错误：org.neo4j.cypher.ProfilerStatisticsNotReadyException：此结果尚未实现。迭代它以获取分析器统计信息。

知道这意味着什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:17:35.517

最后不带子句试试`limit`。分析的东西是全新的——看起来你可能在那里发现了一个错误，如果你想在 github 上报告它：[https](https://github.com/neo4j/neo4j/issues) ://github.com/neo4j/neo4j/issues 。不确定它是控制台还是 Cypher。

# database - 多语言网站数据存入数据库的问题

> ID：15184559
> 
> 赞同：0
> 
> 时间：2013-03-03T10:07:34.667
> 
> 标签：database, web, event-handling, character, multilingual

我正在制作一个多语言网站并将数据存储到数据库中。我面临的问题是，除了英语以外的某些语言中的某些字符没有被插入到数据库中。例如，如果我在表单文本区域或输入框中输入“cliënten”[荷兰语]，当我提交时。它只插入“cli”，但在这个字符之后什么都没有 ë 问题很清楚。这似乎是一个特殊的租船人。现在谁能告诉我如何将这样的字符插入所有其他语言的数据库中？

在此先感谢所有的专家。

:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:46:12.293

您可以首先检查字符集和数据库的排序规则。如果您使用 phpMyAdmin，打开数据库，您可能会看到每个表的标题为“排序规则”的列。理想情况下，我认为你会想要 utf8。

更多信息：[http ://dev.mysql.com/doc/refman/5.6/en/charset-database.html](http://dev.mysql.com/doc/refman/5.6/en/charset-database.html)

如果数据库看起来不错，那么如果您正在通过网页加载详细信息，请检查您是否已经在那里指定了字符集以及在页面标题中使用类似这样的内容：

```
<meta charset="UTF-8"> 
```

# php - spl_autoload_register 带参数调用函数

> ID：15184560
> 
> 赞同：1
> 
> 时间：2013-03-03T10:07:47.127
> 
> 标签：php, parameters, arguments

我编写了以下函数来加载类：

```
function loadClass($className, $classFolder, $classSuffix=".class.php"){...} 
```

现在我想注册 3 个使用此功能的自动装载机。

```
spl_autoload_register("loadClass"); // Set second variable ($classFolder) to "classes1/"
spl_autoload_register("loadClass"); // Set second variable ($classFolder) to "classes2/"
spl_autoload_register("loadClass"); // Set second variable ($classFolder) to "classes3/" 
```

是否有机会在不创建新函数的情况下使用自定义的第二个参数（例如我的“classes1/”路径）注册自动加载器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T10:20:57.487

你可以这样做：

```
spl_autoload_register(function($className) {
    loadClass($className, "classes1/", $classSuffix=".class.php");
});
spl_autoload_register(function($className) {
    loadClass($className, "classes2/", $classSuffix=".class.php");
});
spl_autoload_register(function($className) {
    loadClass($className, "classes3/", $classSuffix=".class.php");
}); 
```

# html - 位置从绝对更改为相对时设计崩溃

> ID：15184561
> 
> 赞同：0
> 
> 时间：2013-03-03T10:07:57.470
> 
> 标签：html, css

看我的情况是，我必须将`div`[DivFirst] 放在另一个`div`[DivSecond] 中。
我通过设置下面`css`给出的来做到这一点，

```
#DivFirst
{
    width:500px;
    height:500px;
    position:relative;
}
#DivSecond
{
    position:absolute;
    width:200px;
    height:200px;
    top:50%;
    left:50%;
    margin-top:-100px;
    margin-left:-100px; 
} 
```

之后，出于某种原因，我更改了`DivSecond's position from absolute to relative`，
结果`design`崩溃了，也就是说，`DivFirst's height`更改了并且
内部 div [ `DivSecond`] 不`centered`正确。

我可以选择`position absolute`for the `inner div`，但我只需要知道为什么会这样
。？顺便说一句，如果我做错了什么，请引导我走上正确的道路。

* * *

[**注意：** *通过设置内部 div 的绝对位置和相对位置来运行演示*]

## [演示](http://jsfiddle.net/VvjBD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:50:47.703

在这种情况下，负上边距正在拉动#DivFirst。您可以通过将 overflow: auto 添加到 #DivFirst 来停止此行为。

由于您知道所涉及的 div 的大小，您可能需要考虑仅手动定位它们，而不是尝试用负边距将它们轻推到位[http://jsfiddle.net/DDcfD/](http://jsfiddle.net/DDcfD/)：

CSS：

```
#DivFirst
{
    width:500px;
    height:500px;
    position:relative;
    background-color:red;
}

#DivSecond
{
    position:relative;
    background-color:yellow;
    width:200px;
    height:200px;
    top:150px;
    left: 150px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:25:35.710

会发生这种情况，因为当您给时`#DivSecond` `position: absolute;`，您将目标元素相对于其第一个定位的祖先元素定位，只要它不是静态定位的。

当你给你的`#DivSecond` `position`属性一个`relative`值时，你不再将它相对于它的祖先元素定位，而是相对于它的正常位置，默认情况下，这意味着你将 50% 添加`left`到这是正常的位置。

[您可以在此处](http://www.w3schools.com/css/css_positioning.asp)查看示例。

# ruby - Ruby 与 Swig：NameError：未初始化的常量

> ID：15184563
> 
> 赞同：0
> 
> 时间：2013-03-03T10:08:05.247
> 
> 标签：ruby, swig, libqxt

我正在尝试在 ruby​​ 中使用[Qxt 库](http://dev.libqxt.org/libqxt/wiki/Home)（即[QxtGlobalShortcut](http://libqxt.bitbucket.org/doc/tip/qxtglobalshortcut.html)）。

正如所建议的那样：[我如何从](https://stackoverflow.com/questions/1542520/how-can-i-call-c-functions-from-within-ruby)创建[swig](http://www.swig.org/)包装器的 ruby​​ 中调用 C++ 函数，但是当尝试使用生成的库时，我遇到了错误：

```
NameError: uninitialized constant QxtGlobalShortcut::QxtGlobalShortcut
    from (irb):5
    from /usr/bin/irb:12:in `<main>' 
```

我的完整 irb 会话输出：

```
$ irb
irb(main):001:0> require 'Qt4'
=> true
irb(main):002:0> require 'QxtGlobalShortcut'
=> true
irb(main):003:0> app = Qt::Application.new ARGV
=> #<Qt::Application:0x0000000110bd18 objectName="irb">
irb(main):004:0> ui = Qt::Widget.new
=> #<Qt::Widget:0x000000012a8428 objectName="", x=0, y=0, width=640, height=480>
irb(main):005:0> shortcut = QxtGlobalShortcut::QxtGlobalShortcut.new ui
NameError: uninitialized constant QxtGlobalShortcut::QxtGlobalShortcut
    from (irb):5
    from /usr/bin/irb:12:in `<main>' 
```

我使用以下内容在 swig 中生成包装器：

```
$ cat QxtGlobalShortcut.i
%module QxtGlobalShortcut
%{
/* Includes the header in the wrapper code */
#include "/usr/include/QxtGui/QxtGlobalShortcut"
%}

/* Parse the header file to generate wrappers */
%include "/usr/include/QxtGui/QxtGlobalShortcut"

$ cat extconf.sh
require 'mkmf'
dir_config('QxtCore')
dir_config('QxtGui')
dir_config('QtCore')
dir_config('QtGui')
create_makefile('QxtGlobalShortcut')

$ cat wrapper.sh
swig -c++ -ruby QxtGlobalShortcut.i
ruby extconf.rb --with-QxtCore-include=/usr/include/QxtCore/ --with-QxtGui-include=/usr/include/QxtGui/ --with-QtCore-include=/usr/include/QtCore/ --with-QtGui-include=/usr/include/QtGui/
make 
sudo make install 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:04:07.540

根据提供的 gist 中生成的 .cpp 文件，没有生成包装类型，请参见第 1814 到 1822 行：

```
/* -------- TYPES TABLE (BEGIN) -------- */

#define SWIGTYPE_p_char swig_types[0]
static swig_type_info *swig_types[2];
static swig_module_info swig_module = {swig_types, 1, 0, 0, 0, 0};
#define SWIG_TypeQuery(name) SWIG_TypeQueryModule(&swig_module, &swig_module, name)
#define SWIG_MangledTypeQuery(name) SWIG_MangledTypeQueryModule(&swig_module, &swig_module, name)

/* -------- TYPES TABLE (END) -------- */ 
```

好吧，实际上只有一个是 p_char。出于未知原因，您`%include "/usr/include/QxtGui/QxtGlobalShortcut"`在 .i 文件中的子句不会生成任何换行。

可能此标头的内容受到 #ifdef 的“保护”，这些内容被评估为 FALSE，因此 SWIG 会忽略其内容。您确实必须检查此标题，或在此处发布其内容要点的链接，以便我们可以编辑此答案。

# android - Android 设备上 Phonegap 应用程序的本地存储是否与内置浏览器分开？

> ID：15184567
> 
> 赞同：18
> 
> 时间：2013-03-03T10:08:38.587
> 
> 标签：android, cordova, local-storage

[我的问题本质上是对这个问题](https://stackoverflow.com/q/7750857/184108)的跟进或澄清。

[我有一个使用 Javascript 和Adob​​e 的 Phonegap Build 服务构建](https://build.phonegap.com/)的 Android 应用程序，并且我正在使用“本地存储”在设备上存储数据。

从另一个问题中，我了解到存储在本地存储中的数据本质上是“永久的”，因为它将无限期地保留在设备上，除非用户通过手动清除应用程序的缓存或删除应用程序来操作它（也许我愿意忍受的其他不寻常的情况）。

然而，部分[接受的答案](https://stackoverflow.com/a/7754409/184108)让我感到困惑，因为它开始模糊谈论手机浏览器和谈论 Phonegap 应用程序之间的界限。

我不清楚的是，Android 上使用 Phonegap 的应用程序是否使用与手机内置浏览器*相同的缓存。*Phonegap 本质上是现有浏览器工具的扩展，还是它自己独立的独立和自包含浏览器？

至关重要的是，如果用户清除浏览器中的缓存，这会影响基于 Phonegap 安装的应用程序吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-03T10:19:32.910

由于 Phonegap 使用 Webiview 来呈现您的应用程序：[WebView 和 Phonegap](http://phonegap.com/2012/05/02/phonegap-explained-visually/)。

并且出于安全原因，使用的每个应用程序`WebView`都有自己的缓存和历史记录。“没有用户或操作系统希望第三方应用程序访问此类数据”。因此，简而言之，您的应用将在其缓存文件夹中保留自己的历史记录和数据，并在以下情况之一被删除：

*   用户手动删除它们。
*   用户使用了应用程序设置屏幕并删除了它们。
*   应用已卸载。

阅读更多关于此的信息。看看 WebView 缓存：[Cookie 和窗口管理](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:20:07.227

不，在应用内浏览器中创建的缓存只能通过以下方法删除：

```
window.localStorage.removeItem("key"); 
```

或者

```
window.localStorage.clear(); 
```

或应用程序卸载

或应用程序管理器中的手动操作（删除数据/缓存）。

但最好的答案是自己做一个实验，看看会发生什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-06T15:35:24.603

是的，它是独立的，但有时您需要将某种变量传递给 In App Browser。它使编码更容易将 ls 项目从当前的 web 视图传递到另一个，如 iOS 中。

这是我在 PhoneGap 中所做的

我使用 InAppBrowser executeScript() 将当前 webviews localStorage 的副本传递给另一个。

```
//add the listener to detect when the page loads after inappbrowser is called into view
ref.addEventListener('loadstop', function(){
     ref.executeScript({code: 'SetInAppBrowserLocalStorage(\''+localStorage+'\');'});
}); 
```

* * *

```
//In your inAppBrowser page you create a function that  will get called on loadStop
//This will pass "all" the contents of the main webviws localStorage to the webview 
//created by InAppBrowser
function SetInAppBrowserLocalStorage(localStorageThatWasPassed){
    localStorage = localStorageThatWasPassed;
}; 
```

您还可以在用户离开该视图之前清除由 SetInAppBrowserLocalStorage() 创建的 localStorage。

测试和工作 100% :)...如果您需要更多帮助，请告诉我

*****更新*******

这仍然有效......但不再一致了。经过多次测试，我意识到这根本不是要走的路。有时，在创建 inappbrowser 实例时，数据传递的速度不够快。我通过那里的问题跟踪器与科尔多瓦人交谈，他们告诉我这不是一种安全的做事方式……我明白了……但我对他们的回应是，如果我只想在页面之间传递 ls 变量怎么办在我的应用程序中..那些甚至无法从互联网访问......老实说，我不明白为什么 ls 项目不能像在 iOS 和其他网络中一样在应用程序中全局访问。如果有人有更好的解决方案，我很想听听。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-02T11:23:05.400

通过在您的 mainActivity 中进行此设置（扩展 Droidgap。）

```
 super.appView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 
```

我们正在使我们的应用程序不存储缓存。

# c# - 转换列表的最快方法 列出

> ID：15184575
> 
> 赞同：27
> 
> 时间：2013-03-03T10:10:17.360
> 
> 标签：c#, performance, linq

获取原语列表并将其转换为可为空的原语列表的最快方法是什么？例如：`List<int>`对`List<int?>`。

简单的解决方案是创建一个新列表并使用`foreach`循环添加每个项目，这需要太多时间。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-03T10:11:54.183

没有比创建新列表更快的方法了：

```
var newList = list.Select( i => (int?)i ).ToList(); 
```

但是，使用 LINQ 比使用裸循环要慢。

最快的方法是使用`List<int?>`具有预分配容量的 a：

```
List<int?> newList = new List<int?>(list.Count); // Allocate enough memory for all items
foreach (var i in list)
    newList.Add(i); 
```

如果您正在寻找列表项的就地类型更改，这是不可能的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-03T10:27:41.000

而不是`Select`你可以坚持使用`Cast`LINQ 运算符：

```
List<int> first = new List<int>() {1, 2, 3};
List<int?> second = first.Cast<int?>().ToList(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-03T11:10:22.497

如果您想知道更快的解决方案是什么，您应该使用三种不同的方式做一个小[*基准测试：*](https://en.wikipedia.org/wiki/Benchmark_%28computing%29)

```
List<int> list = Enumerable.Range( 0, 10000 ).ToList( );
Stopwatch sw = Stopwatch.StartNew( );

for ( int i = 0; i < 100000; i++ ) {
   List<int?> newList = new List<int?>( );
   foreach( int integer in list )
      newList.Add( ( int? ) integer );
}

sw.Stop( );
TimeSpan timespan = sw.Elapsed;
Console.WriteLine( String.Format( "Foreach: {0:00}:{1:00}:{2:00}", timespan.Minutes, timespan.Seconds, timespan.Milliseconds / 10 ) );
sw.Restart( );

for ( int i = 0; i < 100000; i++ ){
   List<int?> newList = list.Select( x => ( int? ) x ).ToList( );
}

sw.Stop( );
timespan = sw.Elapsed;
Console.WriteLine( String.Format( "LINQ-Select: {0:00}:{1:00}:{2:00}", timespan.Minutes, timespan.Seconds, timespan.Milliseconds / 10 ) );
sw.Restart( );

for ( int i = 0; i < 100000; i++ ){
   List<int?> newList = list.Cast<int?>( ).ToList( );
}

sw.Stop();
timespan = sw.Elapsed;
Console.WriteLine( String.Format( "LINQ-Cast: {0:00}:{1:00}:{2:00}", timespan.Minutes, timespan.Seconds, timespan.Milliseconds / 10 ) ); 
```

结果：

![基准](../Images/d37bdc67c5dab0f6e80053ae8677ea09.png)

正如我们所料，最好的方法是第一个解决方案 ( `foreach`)，这意味着循环遍历元素，强制转换并将它们添加到新列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-13T13:29:40.907

这不是一个新问题，但我目前使用此代码；我分享它，希望它可以帮助其他有同样问题的人： *List with pre-allocated + Linq*：

```
var branchIds = new List<int?>(branches.Count);
branchIds.AddRange(branches.Select(int.Parse).Select(brId => (int?)brId)); 
```

# cakephp - 在 Cakephp 中编辑字段时发送电子邮件

> ID：15184576
> 
> 赞同：0
> 
> 时间：2013-03-03T10:10:22.950
> 
> 标签：cakephp

我有员工应用程序，其中用户可以辞职，活跃，新和转移。我想要实现的是，当员工的地位从活动（standing_id = 1）更改/编辑时，它应该能够通过电子邮件发送，但事实并非如此。我在 EmployeeController 中放置了一个电子邮件功能。下面是我的代码。

```
function _sendNewEmployeeEditMail($id) {
$Employee = $this->Employee->read(null,$id);
$email = new CakeEmail();
$email->from(array('no-reply@test.com' => 'Testing App'));
$email->to(array('jaahvicky@gmail.com' => 'Name Surname'));
$email->subject('New Employee');
$email->template('employee_email');
$email->viewVars(compact('Employee'));
$email->emailFormat('html');
$edit_email = true;    
$current_status = $this->Employee->field('standing_id');
if($current_status==1) {
$edit_email = false;
if ($email->send()) {
$this->Session->setFlash('Your employee has been submitted.','default',array('class' => 'notification'));
return true;
} else {
$this->Session->setFlash('Your employee has not been submitted.','default',array('class' => 'error'));
return false;
}
}
} 
```

在我的编辑保存功能中，这是我尝试发送电子邮件的方式

```
public function edit($id = null) {
    $this->Employee->id = $id;
    if (!$this->Employee->exists()) {
        throw new NotFoundException(__('Invalid employee'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->Employee->save($this->request->data)) {
            $this->Session->setFlash(__('The employee has been saved'),'default',array('class' => 'notification'));
            $this->_sendNewEmployeeEditMail($this->Employee->getLastInsertID()  );
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The employee could not be saved. Please, try again.'),'default',array('class' => 'error'));
        }
    } else {
        $this->request->data = $this->Employee->read(null, $id);
    }
    $standings = $this->Employee->Standing->find('list');
    $this->set(compact('standings')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:47:35.033

You're using `$this->Employee->getLastInsertID()`, which will only be present after *inserting* a new Employee.

Because you're editing an existing Employee, this will always be empty. You should use the $id in stead;

```
$this->_sendNewEmployeeEditMail($id); 
```

# c++ - 结构内部地图上的分段错误

> ID：15184581
> 
> 赞同：0
> 
> 时间：2013-03-03T10:11:03.857
> 
> 标签：c++, map, struct

> 我正在创建一个包含地图的结构，但是当我尝试插入一个元素时，它会引发分段错误

```
#include<stdio.h>
#include<stdlib.h>
#include<map>
using namespace std;
typedef struct a
{
    map<int,int> m;
}a;
int main()
{
    a* b;
    b=(a*) malloc(sizeof(a));
    b->m[0]=0;

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:15:42.820

您的代码甚至都没有开始类似于惯用的 C++，任何人可以向您推荐的最好的事情就是拿起一本关于 C++ 的好书。

程序的快速修复：使用`new`而不是`malloc`-`malloc`不属于 C++ 代码。这将确保`a->m`实际构建。然后，一定要`b`在最后删除。这带来了 的所有问题`new/delete`，所以当您对 C++ 的基础知识有所了解时，请阅读智能指针。

稍微更剧烈的变化，这将在您的简单程序中减少问题：使用自动存储：

```
a b;
b.m[0] = 0; 
```

这将是您的 C++ 程序，而不是奇怪的 C/C++ 组合：

```
#include<map>

struct a
{
    std::map<int,int> m;
};

int main()
{
    a b;
    b.m[0]=0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:20:12.630

使用`new`运算符动态分配内存，否则在使用时不会调用结构中映射的构造函数`malloc`。

```
int main()
{
    a* b;
    b= new a;

    b->m[0]=0;
    // Do whatever here

    // When you're done using the variable b
    // free up the memory you had previously allocated
    // by invoking delete
    delete b;

    return 0;
} 
```

# javascript - 使用 Google Maps JavaScript API 勾勒和阴影区域

> ID：15184584
> 
> 赞同：10
> 
> 时间：2013-03-03T10:12:00.403
> 
> 标签：javascript, google-maps, google-maps-api-3

谷歌地图网络应用程序以非常好的方式对区域进行地理编码和勾勒。这可以通过 Google Maps JavaScript API 实现吗？网站示例：

[https://maps.google.se/maps?q=sk%C3%A5ne&hl=sv&ie=UTF8&ll=57.1422,13.337402&spn=5.468408,16.907959&sll=39.290385,-76.612189&sspn=0.243658,0.523%374&hnear=Sk +l%C3%A4n&t=m&z=7](https://maps.google.se/maps?q=sk%C3%A5ne&hl=sv&ie=UTF8&ll=57.1422,13.337402&spn=5.468408,16.907959&sll=39.290385,-76.612189&sspn=0.243658,0.528374&hnear=Sk%C3%A5ne+l%C3%A4n&t=m&z=7)

[![寻找瑞典斯科讷](../Images/99562efec46b0d43741714b4e1b2df81.png)](https://i.stack.imgur.com/iK8BK.png)

[![瑞典斯科讷的轮廓和阴影](../Images/c1b92090a962fbca165378708f106ac8.png)](https://i.stack.imgur.com/9q9sJ.png)

这是瑞典斯科讷县。Google Maps Web 应用程序用红色勾勒出它的轮廓并用粉红色着色。我想使用 Google Maps JavaScript API 对这样的区域进行地理编码和显示。如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T12:28:54.717

据我所知，Google Map API v3 尚未提供边界功能。

您需要知道边界才能塑造多边形。给定地址的地理编码器返回的信息不足以形成边界。您可能会在[此处](http://maps.googleapis.com/maps/api/geocode/json?address=Stockholm&sensor=false)看到返回的信息。

斯德哥尔摩的边界是：`'17.73966,59.66395|17.75651,59.61827|17.81771,59.58645|17.84347,59.53069|17.78465,59.49340|17.78277,59.38916|17.83277,59.36500|17.93215,59.33652|18.00736,59.34496|18.09139,59.33444|18.05722,59.39139|18.12000,59.45388|18.19508,59.45012|18.16562,59.41083|18.32826,59.39795|18.28659,59.41228|18.25945,59.44638|18.31722,59.47361|18.37333,59.46694|18.66638,59.59138|18.69979,59.64409|18.74555,59.68916|18.84139,59.71249|18.98569,59.71666|19.03222,59.71999|19.07965,59.76743|18.93472,59.78361|18.86472,59.79804|18.96922,59.86561|19.06545,59.83250|19.07056,59.88972|19.00722,59.91277|18.92972,59.92472|18.89000,59.95805|18.81722,60.07548|18.77666,60.11084|18.71139,60.12806|18.63277,60.14500|18.50743,60.15265|18.44805,59.99249|18.37334,59.86500|18.29055,59.83527|18.15472,59.79556|18.08111,59.74014|17.96055,59.70472|17.89694,59.68916|17.73966,59.66395'`

总之，困难的部分是找到您想要在地图上绘制的城市的边界。我不确定是否有提供这些界限的免费服务。检查此[Stackoverflow 问题](https://stackoverflow.com/questions/12560706/google-map-highlight-country-with-border-using-polygon)以获取有关提供边界的站点的更多信息。

在下面的示例中，当您单击绘制斯德哥尔摩按钮时，斯德哥尔摩将绘制在地图上。

```
<html>

        <head>

            <head>
                <title>Area calculator - Outline a property on a google map and find its area</title>
                <title>Google Maps</title>
                <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
                <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en">

                </script>
                <script type="text/javascript">
                    var map,
                    geocoder,
                    addressMarker,
                    mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278);

                    function initialize() {
                        map = new google.maps.Map(document.getElementById('map_canvas'), {
                            zoom: 7,
                            center: mapCenter,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        });
                        geocoder = new google.maps.Geocoder();
                    }

                    function showAddress() {
                        var address = $('#to').val();
                        geocoder.geocode({
                            'address': address
                        }, function (results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                map.setCenter(results[0].geometry.location);
                                var marker = new google.maps.Marker({
                                    map: map,
                                    position: results[0].geometry.location
                                });
                            } else {
                                alert("Geocode was not successful for the following reason: " + status);
                            }
                        });
                    }

    				function drawPolygon() {

    				// stockholm boundaries
    					var boundaries = '17.73966,59.66395|17.75651,59.61827|17.81771,59.58645|17.84347,59.53069|17.78465,59.49340|17.78277,59.38916|17.83277,59.36500|17.93215,59.33652|18.00736,59.34496|18.09139,59.33444|18.05722,59.39139|18.12000,59.45388|18.19508,59.45012|18.16562,59.41083|18.32826,59.39795|18.28659,59.41228|18.25945,59.44638|18.31722,59.47361|18.37333,59.46694|18.66638,59.59138|18.69979,59.64409|18.74555,59.68916|18.84139,59.71249|18.98569,59.71666|19.03222,59.71999|19.07965,59.76743|18.93472,59.78361|18.86472,59.79804|18.96922,59.86561|19.06545,59.83250|19.07056,59.88972|19.00722,59.91277|18.92972,59.92472|18.89000,59.95805|18.81722,60.07548|18.77666,60.11084|18.71139,60.12806|18.63277,60.14500|18.50743,60.15265|18.44805,59.99249|18.37334,59.86500|18.29055,59.83527|18.15472,59.79556|18.08111,59.74014|17.96055,59.70472|17.89694,59.68916|17.73966,59.66395';

                        var latLngArray = boundaries.split('|');
                        var points = [];
                        for (var i = 0; i < latLngArray.length; i++) {
                            pos = latLngArray[i].split(',');
                            points.push(new google.maps.LatLng(parseFloat(pos[1]), parseFloat(pos[0])));
                        }

                        var shape = new google.maps.Polygon({
                            paths: points,
                            strokeColor: '#ff0000',
                            strokeOpacity: 0.8,
                            strokeWeight: 2,
                            fillColor: '#ff0000',
                            fillOpacity: 0.35
                        });

                        shape.setMap(map);
                    }

                    $(document).ready(function () {
                        initialize();
                    });

                    $(document).on('click', '.show-address', function (e) {
                        e.preventDefault();
                        showAddress();
                    });

    				$(document).on('click', '.draw-address', function (e) {
                        e.preventDefault();
                        drawPolygon();
                    });
                </script>
            </head>

            <body>
                <div id="basic-map">
                    <div id="map_canvas" style="height:150px;"></div>
                    <label for="to">Address</label>
                    <input type="text" id="to" value="Stockholm, Sweden" />
                    <a href="#" class="show-address">Show Address</a>
    				<a href="#" class="draw-address">Draw Stockholm</a>
                </div>
            </body>

    </html>
```

我希望这有帮助。

# .net - 在数据连接中，我在 VS 2010 中没有 MYSQL 作为选项，当我点击“其他”时，我仍然没有在任何这些选项中看到 MYSQL

> ID：15184585
> 
> 赞同：0
> 
> 时间：2013-03-03T10:12:02.830
> 
> 标签：.net

在数据连接中，我在 VS 2010 中没有 MYSQL 作为选项，当我点击“其他”时，我仍然没有在任何这些选项中看到 MYSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:16:10.583

您应该首先为 .NET 安装 MySQL 连接器。

[http://dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

然后你可能会`MySQL Database`在`Choose Data Source`窗口上看到。

# wcf - 用于 WCF Web 服务的 Restlet 客户端

> ID：15184587
> 
> 赞同：0
> 
> 时间：2013-03-03T10:12:26.777
> 
> 标签：wcf, restlet

我正在寻找示例代码 restlet 客户端，通过它我可以使 WCF webservice(REST) 托管在 IIS 上。

谢谢阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:07:29.243

来自“Restlet 在行动”

导入 org.restlet.resource.ClientResource；

公共类 HelloClient {
public static void main(String[] args) 抛出异常 {
ClientResource helloClientResource = new ClientResource(" [http://example.com:8111/](http://example.com:8111/) ");
helloClientResource.get().write(System.out);
}
}

# python - Python 是否可以重新创建整个调用堆栈？

> ID：15184588
> 
> 赞同：3
> 
> 时间：2013-03-03T10:12:31.343
> 
> 标签：python, python-stackless

我有兴趣尝试使用 python。`frame.f_locals`我知道我可以使用and检查并注入局部和全局变量到一个框架中`frame.f_globals`，但我现在渴望创建一个完整的调用堆栈。

使我无法更改堆栈信息的原因是 python 不允许我更改它。

我实际上已经考虑过以编程方式转换我正在使用的 python 模块，以模拟缠绕堆栈。但我知道这是一个糟糕的解决方案，因为客户端代码使用`if`, `while`,`with`并且`try`很容易破坏我的代码。

我也看过 manipulating `frame.f_back`，但无济于事。它是只读的。

```
>>> import sys
... 
... frm = sys._getframe()
... 
... frm.f_back = None
Traceback (most recent call last):
  File "<pyshell#4>", line 5, in <module>
    frm.f_back = None
TypeError: readonly attribute 
```

# 我正在尝试做的事情

作为一项实验，我正在尝试`fork()`通过网络实现。

我知道无堆栈 python 可能有我想要的，但仍然无法更改`frame.f_back`属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:12:48.677

看看 Online Python Tutor ( [http://www.pythontutor.com/](http://www.pythontutor.com/) )。它的作用是在执行期间捕获帧以创建 Python 代码的可视化。因此，您可以使用捕获的帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:16:07.627

你应该看看[AST 模块](http://docs.python.org/2/library/ast.html "AST")和[symtable 模块](http://docs.python.org/2/library/symtable.html "符号表")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:16:33.737

```
>>> type(sys._getframe())()

TypeError: cannot create 'frame' instances 
```

对不起。

# ruby-on-rails - 导轨。大型 vendor.js？

> ID：15184590
> 
> 赞同：0
> 
> 时间：2013-03-03T10:12:39.767
> 
> 标签：ruby-on-rails, caching, asset-pipeline, assets

我的 rails 项目中有 vendor.js 文件，其中包含几个供应商库，在添加一些新库后，我在开发环境中遇到了这个问题

```
Started GET "/assets/vendor.js" for 10.40.129.65 at 2013-03-03 14:01:24 +0400
Cache write: 0d6281da1957dd9c5e063fb636c50bd260dae5e2
Cache read: 0d6281da1957dd9c5e063fb636c50bd260dae5e2
Cache read: http://work:3000/assets/vendor.js?
Cache write: http://work:3000/assets/vendor.js?
!! Rack application returned nil body. Probably you wanted it to be an empty string?
!! Unexpected error while processing request: undefined method `each' for nil:NilClass 
```

尝试删除一些库可以解决问题，并且预编译的资产可以正常工作。但我想让它在开发中工作。请帮帮我。

供应商.js：

```
//= require ./vendor/ext/stacktrace.js
//= require jquery
//= require jquery_ujs
//= require underscore
//= require backbone
//= require twitter/bootstrap
//= require js_notifier
//= require ./vendor/ext/mustache-1.4.2
//= require ./vendor/ext/strftime
//= require ./vendor/ext/moment
//= require ./vendor/ext/langs.js
//= require ./vendor/ext/jquery.jgrowl_minimized.js
//= require ./vendor/ext/jquery-ui-1.10.0.custom.min.js
//= require ./vendor/ext/jquery-ui-sliderAccess.js
//= require ./vendor/ext/jquery-ui-timepicker-addon.js
//= require ./vendor/ext/backbone.paginator.js
//= require ./vendor/ext/jquery-deparam.min.js
//= require ./vendor/ext/select2.js
//= require_tree ./templates
//= require ./vendor/channels.js.coffee
//= require ./vendor/ext/bootstrap.switch.js
//= require ./vendor/ext/private_pub
//= require ./vendor/ext/spin.js
//= require ./vendor/ext/jquery.spin.js 
```

我正在使用 Memcached + Dalli

UPD：我已经在每个环境中明确设置了 cache_store（developemnt.rb、production.rb 和 test.rb），这解决了问题，直到我打开谷歌浏览器再次出现问题。结果，在 FF 中一切正常，Chrome 无法加载 vendor.js（相同的服务器实例（瘦）并且在同一时间用于两个浏览器）

记录 ff 请求：

```
Cache read: http://work:3000/assets/vendor.js?
Cache read: 577d6ed0d98975b583329c312bd25667620f2497 
```

记录 chrome 请求（同上）：

```
Started GET "/assets/vendor.js" for 10.40.129.65 at 2013-03-03 20:37:11 +0400
Cache write: 577d6ed0d98975b583329c312bd25667620f2497
Cache read: 577d6ed0d98975b583329c312bd25667620f2497
Cache read: http://work:3000/assets/vendor.js?
Cache write: http://work:3000/assets/vendor.js?
!! Rack application returned nil body. Probably you wanted it to be an empty string?
!! Unexpected error while processing request: undefined method `each' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:24:01.877

您可以考虑应用`index.js`技术，如[本 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)(2.1.2) 中所述。尝试拆分您的大文件并将这些部分包含在清单文件中，例如：

在您`/app/vendor/assets/javascripts`创建一个新目录`my_libraries`并将零件放入其中。然后在同一目录中创建`index.js`清单文件并正常包含文件：

```
//= require file1
//= require file2 
```

在你的`application.js`：

```
//= require my_libraries 
```

编辑：一种解决方案是：在您的（`/vendor/ext`正确的路径是css) 来创建内容：`app/vendor/assets/javascripts/ext``/vendor/ext``index.js`

```
//= require_tree . 
```

并在`application.js`：

```
//= require ext 
```

然后您应该从清单中删除对`vendor`dir 的所有引用。`application.js`另一个错误是在清单中包含带有`.js`前缀的文件。在清单文件中，您应该声明不带前缀的包含。

查看解释`require_tree`使用的资产管道的文档。

# codeigniter - 将密码 Symfony2 迁移到 CodeIgniter

> ID：15184597
> 
> 赞同：1
> 
> 时间：2013-03-03T10:13:30.840
> 
> 标签：codeigniter, symfony, encryption, sha1, salt

我正在将 Symfony 中的一个项目迁移到 CodeIgniter。我对密码用户有疑问：我不知道如何在 Codeigniter 中创建相同的密码。

密码示例为 : `aze`。在数据库中，我有：

密码：`284261c499a22c0de073b642f2d55b0684c86555`
盐：`iudcjri8lnkgosgo0k00skwo8cwssgc`

Symfony 安全配置：

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext
        Kalisteco\AdminSpaceBundle\Entity\User:
            algorithm: sha1
            encode_as_base64: false
            iterations: 1

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH] 
```

我试过这段代码：

```
$password = "aze"
$salt = "iudcjri8lnkgosgo0k00skwo8cwssgc";
$str = do_hash($str.$salt, 'sha1'); // Result : f767fd2c23e045f24e8dc065814dea4242591642
$str = do_hash($salt.$str, 'sha1'); // Result : de47f71660f92fbfc583b4dd779f28c35c38e785 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:09:06.667

`{`Symfony 用和包围盐`}`：

```
$salted = $password.'{'.$salt.'}'; 
```

# c# - 返回列表中的最大重复项

> ID：15184598
> 
> 赞同：20
> 
> 时间：2013-03-03T10:13:38.340
> 
> 标签：c#, linq, list, count, max

```
 List<string> prod = new List<string>();
        prod.Add("dfg");
        prod.Add("dfg");
        prod.Add("ojj");
        prod.Add("dfg");
        prod.Add("e"); 
```

在上面的代码 prod List 中有项目“dfg”重复三次（最大计数）......我想要“dfg”作为输出，因为这个项目重复的次数最多。任何人都可以在这方面提供帮助

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-03T10:22:59.257

不是绝对最有效的，但它有效：

```
var maxRepeatedItem = prod.GroupBy(x => x)
                          .OrderByDescending(x => x.Count())
                          .First().Key; 
```

这更有效：

```
var maxRepeatedItem = prod.GroupBy(x => x)
                          .MaxBy(x => x.Count())
                          .First().Key; 
```

但它需要[MoreLinq](http://code.google.com/p/morelinq/)的扩展`MaxBy`

**编辑（根据评论）：**

如果您想要**所有**最大重复元素以防出现平局，这是一个可能的解决方案：

```
var grouped = prod.ToLookup(x => x);
var maxRepetitions = grouped.Max(x => x.Count());
var maxRepeatedItems = grouped.Where(x => x.Count() == maxRepetitions)
                              .Select(x => x.Key).ToList(); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-03T10:22:46.640

您可以使用 LINQ：

```
string maxRepeated = prod.GroupBy(s => s)
                         .OrderByDescending(s => s.Count())
                         .First().Key; 
```

# android - 保护 android 中的 SSL 客户端密钥对

> ID：15184605
> 
> 赞同：1
> 
> 时间：2013-03-03T10:14:10.930
> 
> 标签：android, ssl, authentication

我在 android 中使用证书进行 SSL 客户端身份验证。包含证书的密钥库存储在 /res 目录中。

困扰我的是，当使用 zip 实用程序打开时，res 文件夹中的密钥库在 apk 中可见。现在，如果有人要反编译我的代码并获取密钥库密钥，他/她可以冒充我的应用程序。

任何保护它的建议。

# c# - 使用来自另一个 CS 的函数获取 asp 图像 url

> ID：15184614
> 
> 赞同：1
> 
> 时间：2013-03-03T10:15:55.943
> 
> 标签：c#, asp.net, visual-studio-2010

**我在名为Users.aspx**的类中有以下代码：

```
<asp:Image ID="Image1" runat="server" ImageUrl='<%#GetImagePath("Icon1.jpg")%>' 
```

在**Users.aspx.cs**我已经实现：

```
public string GetImagePath(string imgName)
{
    string Finalurl = "~/App_Themes/Default/Images/" + imgName;
    return Finalurl;
} 
```

问题是我想在通用帮助类中使用**GetImagePath**函数，并从多个地方使用它，而不是在每个 .aspx.cs 文件中定义它，并且在 aspx 类中具有如下内容：

```
<asp:Image ID="SomeImage" runat="server" ImageUrl='<%#GeneralHelper.GetImagePath("Icon1.jpg")%>' 
```

如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:20:38.990

您将其声明为静态、类和函数，如下所示：

```
public static class GeneralHelper
{
  public static string GetImagePath(string imgName)
  {
    string Finalurl = "~/App_Themes/Default/Images/" + imgName;
    return Finalurl;
  }
} 
```

您将它放在一个新文件（GeneralHelper.cs）上，然后编译它并将其作为 dll 包含在您的 bin 中，然后将其放在 App_Code 目录中。

# twisted - 在虚拟环境中扭曲的 pip 安装缺少 gcc-4.0 错误

> ID：15184619
> 
> 赞同：1
> 
> 时间：2013-03-03T10:16:24.433
> 
> 标签：twisted, virtualenv, pip

我正在尝试在 virtualenv 中使用 Scrapy，这也需要安装 twisted。我`pip install Scrapy`没有问题，但是当我尝试时`pip install twisted`，我在输出中多次收到以下错误：

```
unable to execute gcc-4.0: No such file or directory

error: command 'gcc-4.0' failed with exit status 1 
```

我之前尝试在我的实际系统上安装 python 包时遇到了类似的问题，这就是我首先开始使用 virtualenv 的原因。这是我的环境中安装的 python 版本的问题吗？这是我目前拥有的：

```
Django          - 1.5          - active 
Python          - 2.7.3        - active development (/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload)
Scrapy          - 0.16.4       - active 
pip             - 1.2.1        - active 
setuptools      - 0.6c11       - active 
wsgiref         - 0.1.2        - active development (/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7)
yolk            - 0.4.3        - active 
```

为了检查我`gcc`在命令行输入了哪个版本的 gcc 并得到了

```
i686-apple-darwin11-llvm-gcc-4.2: no input files 
```

`export CC=gcc-4.2`我在运行之前尝试过`pip install twisted`，我得到了：

```
llvm-gcc-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/powerpc-apple-darwin11-llvm-gcc-4.2': execvp: No such file or directory

lipo: can't figure out the architecture type of: /var/folders/s8/d0f65gc93nbchdk52g2cg5f80000gn/T//ccWQa7cJ.out

error: command 'gcc-4.2' failed with exit status 255 
```

它在我看来有点像它正在寻找`powerpc-apple-darwin11-llvm-gcc-4.2`，而我上面的内容是`i686-apple-darwin11-llvm-gcc-4.2`——这些是不同的，因此会导致问题吗？

为了提供更多背景信息，我很久以前从 Python.org 安装程序安装了 Python 2.7，然后从 Snow Leopard 直接升级到 Mountain Lion。如果我只是在`python`命令行输入，我会得到

```
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:32:06) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin 
```

所以我猜这意味着我正在使用 Apple 的 Python？它是用 gcc-4.0.1 构建的？所以如果是这样的话，我不应该不需要这样做`export CC=gcc-4.2`吗？还是我需要这样做并切换到 Python.org 版本的 Python？（如果是后者，我该怎么做？）

**更新：** 我尝试[了此解决方案](https://superuser.com/a/35288/165175)来切换 Python 版本，但没有奏效。

**更新：** 我设法使用`sudo port select --set python python27`命令切换 Python 版本（在我的 virtualenv 之外），但这并没有解决问题，即使我现在显示：

```
Python 2.7.3 (default, Nov 17 2012, 19:54:34) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin 
```

当我`python`在命令行输入时。

**更新**：我还发现[这个](https://stackoverflow.com/a/11796279/1256700)问题的解决方案似乎与我遇到的问题几乎完全相同，但我已经升级到 XCode 4.6 并且肯定按照上述解决方案中的描述安装了命令行工具（首选项>下载选项卡>安装命令行工具）。我也安装了 XCode 3.2.6，但是——有没有可能导致我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:36:19.617

你试过`CC="$(type -p clang)" pip install twisted`吗？你不一定需要用来`gcc`编译 Twisted 的扩展；相反，选择`clang`可能会清除似乎困扰您的`gcc`安装的任何奇怪问题。

如果这不起作用，我建议卸载任何 Python.org 版本的 Python，然后可能重新安装 OS 和 Xcode，因为看起来某些东西可能损坏了您的系统 Python 安装。我不知道对`powerpc`东西的引用是如何持续到 Mountain Lion 中的，因为 Lion 取消了对 ppc 的支持。

# objective-c - “子类”核心数据模型

> ID：15184620
> 
> 赞同：1
> 
> 时间：2013-03-03T10:16:26.317
> 
> 标签：objective-c, xcode, cocoa, core-data

我有一个使用 Core Data 并有两个目标的项目。这些目标有几个共享实体。目前，我正在维护两个具有重复实体的独立模型，在我看来，这不是有效的。

有没有办法将共享数据模型作为具体目标中数据模型的父级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:39:31.790

我不知道如何创建“嵌套核心数据模型”（但也许其他人会这样做）。

您可以做的是创建一个包含所有实体的模型和两个[Configurations](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html#//apple_ref/doc/uid/TP40002328-SW3)，每个目标一个。

配置包含持久存储中使用的所有实体的联合，您可以在创建或添加持久存储时指定配置

```
addPersistentStoreWithType:configuration:URL:options:error: 
```

# python - Python JSON 保留编码

> ID：15184621
> 
> 赞同：1
> 
> 时间：2013-03-03T10:16:28.907
> 
> 标签：python, json, encoding

我有一个这样的文件：

```
aarónico
aaronita
ababol
abacá
abacería
abacero
ábaco
#more words, with no ascii chars 
```

当我读取该文件并将其打印到控制台时，它的打印结果与预期完全相同，但是当我这样做时：

```
f.write(json.dumps({word: Lookup(line)})) 
```

这被保存了：

```
{"aar\u00f3nico": ["Stuff"]} 
```

当我预期：

```
{"aarónico": ["Stuff"]} 
```

当我使用 jason.loads() 时，我需要得到相同的结果，但我不知道在哪里或如何进行编码，或者是否需要让它工作。

**编辑**

这是将数据保存到文件的代码：

```
with open(LEMARIO_FILE, "r") as flemario:
    with open(DATA_FILE, "w") as f:
        while True:
            word = flemario.readline().strip()
            if word == "":
                break
            print word #this is correct
            f.write(json.dumps({word: RAELookup(word)}))
            f.write("\n") 
```

这个加载数据并返回字典对象：

```
 with open(DATA_FILE, "r") as f:
        while True:
            new = f.readline().strip()
            if new == "":
                break
            print json.loads(new) #this is not 
```

如果键与保存的键不同，我无法查找字典。

**编辑 2**

```
>>> import json
>>> f = open("test", "w")
>>> f.write(json.dumps({"héllö": ["stuff"]}))
>>> f.close()
>>> f = open("test", "r")
>>> print json.loads(f.read())
{u'h\xe9ll\xf6': [u'stuff']}
>>> "héllö" in {u'h\xe9ll\xf6': [u'stuff']}
False 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T10:22:35.670

这是*正常*且有效的 JSON 行为。*Python也*使用`\uxxxx`转义，因此请确保不要将 Python 文字表示与字符串的内容混淆。

 *Python 3.3 中的演示：

```
>>> import json
>>> print('aar\u00f3nico')
aarónico
>>> print(json.dumps('aar\u00f3nico'))
"aar\u00f3nico"
>>> print(json.loads(json.dumps('aar\u00f3nico')))
aarónico 
```

在 python 2.7 中：

```
>>> import json
>>> print u'aar\u00f3nico'
aarónico
>>> print(json.dumps(u'aar\u00f3nico'))
"aar\u00f3nico"
>>> print(json.loads(json.dumps(u'aar\u00f3nico')))
aarónico 
```

从文件读取和写入文件时，以及仅指定原始字节字符串（并且`"héllö"`是原始字节字符串）时，您*不会*处理 Unicode 数据。您需要先了解编码数据和 Unicode 数据之间的区别。我**强烈**建议您至少阅读以下 3 篇文章中的 2 篇：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

你对你的 python 原始字节字符串表示很幸运`"héllö"`，Python 设法为你自动解码它。从文件中读回的值是完全正常且正确的：

```
>>> print u'h\xe9ll\xf6'
héllö 
```*

# c - 在链表中存储字符串时遇到问题

> ID：15184625
> 
> 赞同：0
> 
> 时间：2013-03-03T10:16:43.213
> 
> 标签：c, string, list

我无法在链接列表中存储字符串。这是将节点插入列表的函数：

```
void insert_rec(rec_ptr *h_ptr, rec_ptr *t_ptr, int a, int b, int c, char* cs)
{   

    rec_ptr new_ptr;    
    new_ptr = rec_ptr( malloc( sizeof(REC) ) );

    if(new_ptr != NULL)
    {
        new_ptr->x    = a;
        new_ptr->y    = b;
        new_ptr->z    = c;
        new_ptr->c    = cs;
        new_ptr->next = NULL;

        if(*h_ptr == NULL){
            *h_ptr = new_ptr;
        }
        else{
            (*t_ptr)->next = new_ptr;
        }
        *t_ptr = new_ptr;
    }
    else
    {
        printf("%d %d %d not inserted. No memory available.\n",a,b,c);
    }
} 
```

这是从输出文件读取输入的函数。我将一个字符串作为`char*`. 已`fscanf()`正确读取字符串。

```
void read_from_input2(rec_ptr & hptr, rec_ptr & tptr)
{  

    fp3=fopen("input2.txt","r");

    if (fp3 == NULL)
        printf("Error: Couldn't open file: input2.txt\n");
    else
    {
        while(!feof(fp3))
        {
            int x,y,z;
            char c1[10];
            fscanf(fp3,"%d",&x);
            fscanf(fp3,"%d",&y);
            fscanf(fp3,"%d",&z);
            fscanf(fp3,"%s",c1);
            char *c2 = c1;
            insert_rec(&hptr,&tptr,x,y,z,c2);
        }
    }
    fclose(fp3);
} 
```

这是我遇到问题的功能。当我从链表中提取数据时，变量`c1`输出垃圾。

```
void write_to_output2(rec_ptr hptr)
{   

    fp4=fopen("output2.txt","w");

    if (fp4 == NULL)
        printf("Error: Couldn't open file: output2.txt\n");
    else
    {
        if(hptr == NULL){
            printf("List is empty.\n\n");
        }
        else{
            while(hptr != NULL)
            {
                int x,y,z;
                char *c1,*c2;
                x  = hptr->x;
                y  = hptr->y;
                z  = hptr->z;
                c1 = hptr->c;
                c2 = get_class(x,y,z);
                fprintf(fp4,"%d %d %d %s %s\n",x,y,z,c1,c2);
                hptr = hptr->next;
            }
        }
    }
    fclose(fp4);
} 
```

如果有人能看到我的错误，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:19:48.943

```
char c1[10];
/* ... */
char *c2 = c1;
insert_rec(&hptr,&tptr,x,y,z,c2); 
```

问题`c1`出在堆栈上`read_from_input2`，然后您存储指向其内容的指针。当结束时它将超出范围，`while`因此对它的访问将无效。

你会想要`strdup`它（或等效的）。

```
char *c2 = strdup(c1);

/* or */

new_ptr->c = strdup(cs); 
```

并且不要`free`在某个时候忘记它。

# android - 什么格式必须有我的自定义 CONTENT_FILTER_URI？

> ID：15184626
> 
> 赞同：0
> 
> 时间：2013-03-03T10:17:08.913
> 
> 标签：android, listview, android-contentprovider, android-loadermanager

我有一个列表视图，我通过 LoaderManager 从 sqlite 数据库填充，并且我希望能够过滤这个列表。

我正在关注 android 文档中的示例：http: [//developer.android.com/guide/components/loaders.html#example](http://developer.android.com/guide/components/loaders.html#example)

但我在这一点上遇到了障碍：

if (mCurFilter != null) {

baseUri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI, Uri.encode(mCurFilter));

}

我不知道 CONTENT_FILTER_URI 应该是什么样子。

我能找到的所有示例都在谈论使用 Phone 过滤电话联系人。CONTENT_FILTER_URI，但在我的情况下，我需要一个自定义的 CONTENT_FILTER_URI，类似于

CONTENT_URI = Uri.parse("content://" + AUTHORITIES + "/" + DataBase.TABLE);

来自我已实现的扩展 ContentProvider 类。

那么它必须有什么格式呢？

我对文档不太了解：

[http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#CONTENT_FILTER_URI](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#CONTENT_FILTER_URI)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:47:11.403

原来我把事情复杂化了。我重用了 CONTENT_URI。

# javascript - Requirejs - 在加载 data-main 之前配置 require

> ID：15184631
> 
> 赞同：6
> 
> 时间：2013-03-03T10:18:16.437
> 
> 标签：javascript, requirejs, amd

我们第一次使用 requirejs，我在构建依赖项时遇到了麻烦。

我已将我的主 app.js 文件定义为 index.html 中的 data-main 属性：

```
<script data-main="src/app" src="/js/lib/require/require.js"></script> 
```

但是，我有一个文件，它定义了我所有需要的路径/垫片配置，我希望它在 app.js 文件之前运行。我需要它运行，以便我可以在我的 app.js 中将配置的路径作为依赖项引用。

我不认为正确的方法是将我的 config.js 作为数据主。我尝试将 config.js 设置为这样的依赖项：

```
 <script type="text/javascript">
        var require = {
            baseUrl: "/",
            deps: ["src/config"]
        }
    </script>
    <!-- data-main is the main js file of the app -->
    <script data-main="src/app" src="/js/lib/require/require.js"></script> 
```

但这没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:55:52.620

就我而言，我加载`config.js`以`app.js`共享每个页面的配置。

例如：

```
require(['config'], function(){
  require(['module','another'], function(){
    // run with all modules
  });
}); 
```

为了优化这个项目，使用`has.js`是减少 HTTP 连接的更好方法。有关更多详细信息，请参阅[此示例项目](https://github.com/eller86/requirejs-best-practice/tree/master/src/combineWithConfig)。

# java - HashMap 的自定义 hashcode/equals 操作

> ID：15184637
> 
> 赞同：7
> 
> 时间：2013-03-03T10:19:28.247
> 
> 标签：java, hashmap, equals, hashcode, overriding

是否存在 HashMap 类（或 Map 接口）的实现，它允许我使用备用哈希码和等于操作...类似于如何使用 Collections.sort 中的 Comparator 以多种方式对相同类型的集合进行排序（列表，比较器）。

如果可能的话，我想避免创建一个提供所需哈希码和等于操作的密钥包装器。

* * *

就我而言，我需要这样的情况之一：

在我的 Web 应用程序中，对于每个请求，我都会加载位置/ISP 和其他数据。在代码的不同部分（在我的服务和存储库层中），我已经“最小化”了特定于其要求的缓存。

这是一个简化的代码示例：

```
class GeoIpData{
    private String countryName;
    private String state;
    private String city;
    private String isp;
    @Override
    public int hashCode() {
        //countryName hashCode
        //state hashCode
        //city hashCode
        //isp hashCode
    }
    @Override
    public boolean equals(Object obj) {
        // compare countryName
        // compare state
        // compare city
        // compare isp
    }
}

 Map<GeoIpData,#Type1> fullCache = ... //This cache needs to be unique per countryName,state,city and isp
 Map<GeoIpData,#Type2> countryCache = ... //This cache needs to be unique per countryName
 Map<GeoIpData,#Type2> ispCache = ... //This cache needs to be unique per countryName,isp 
```

为了实现这一点，上述 3 个映射需要 3 个不同的 hashcode 和 equals 方法。

```
fullCache:
hashCode -> GeoIpData.hashCode();
equals   -> GeoIpData.equals(Object obj);

countryCache:
hashCode -> {countryName hashCode }
equals   -> {compare countryName }

ispCache:
hashCode -> {countryName hashCode & isp hashCode }
equals   -> {compare countryName & compare isp hashCode } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T10:23:40.460

[GNU Trove](http://trove4j.sourceforge.net/html/overview.html)允许您为特定的 TObjectHashingStrategy 提供您自己的哈希和等于 TCustomHashMap 的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-22T13:48:31.947

最初的 Java API 有界`equals`/`hashCode`行为类型（类），因为那时他们没有 lambda。

为了重用现有的 API / 实现 - 制作临时密钥：

```
public CountryKey {
    private String country;
    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof CountryKey)) { return false; }
        CountryKey that = (CountryKey) obj;
        return this.country.equals(that.country);
    }
    @Override int hashCode() {
         return country.hashCode();
    }
} 
```

或包装：

```
public CountryKey {
    private GeoIpData holder;
    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof CountryKey)) { return false; }
        CountryKey that = (CountryKey) obj;
        return this.holder.getCountry().equals(that.holder.getCountry());
    }
    @Override int hashCode() {
         return holder.getCountry().hashCode();
    }
} 
```

并为键编写辅助构造函数：

```
public class GeoIpData {
     public CountryKey buildCountryKey() {
          return new CountryKey(this.country);
     }
} 
```

# php - 如果已在另一个选项卡中打开，则阻止打开 html

> ID：15184638
> 
> 赞同：4
> 
> 时间：2013-03-03T10:19:29.143
> 
> 标签：php, javascript, html, google-chrome, tabs

我是这个网站的新手。
我已经创建了一个`.exe`启动器，它在 Kiosk 模式下使用谷歌浏览器`html`打开`html`（全屏模式，标签和地址栏隐藏）。

注意：启动器在其主安装目录中有自己的 Chrome 副本。

我的问题是，每当用户启动 Launcher 时，它都会指向同一个 Kiosk-Chrome，但会在新选项卡中打开它。由于选项卡是隐藏的，用户无法返回上一个选项卡，除非用“+”关闭新选项卡或用“ `ctrl`+ ”或“ + `w`”切换到上一个选项卡。`ctrl``1``ctrl``tab`

无论如何要检查是否`html`已经打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:38:22.630

在 php、javascript 或 html 中是不可能的。但是您的启动器应该可以打开现有 chrome 实例打开的网页，至少您应该能够阅读现有选项卡的标题。

除此之外，当您的启动器打开网页时，您应该能够为窗口实例指定名称（例如 href 链接的目标）。如果您使用该选项指定一些神秘的窗口名称，那么您的问题可能会得到解决，但这是您的启动器所独有的。

# html - div 高度和链接换行/换行

> ID：15184640
> 
> 赞同：1
> 
> 时间：2013-03-03T10:19:43.800
> 
> 标签：html, css

试图解释问题是什么真的很困难，但是如果你看看我创建的[JSFiddle](http://jsfiddle.net/Relborg/Xfv6Y/)，事情会更加清晰。

首先，您会注意到行的行高不相等，即使高度应该设置为 33%，因此所有行都应该同样高。遗憾的是，情况并非如此。

其次，有一个较长的链接应该被包裹在它自己的按钮内，此时按钮有点被切断了一半，造成了破损的外观。

同样，就我的特定问题而言，命名这篇文章真的很困难。看看 JSFiddle 会让事情变得更清楚。

```
//Ignore this comment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:34:00.080

我更新了您的代码并更改了您的 CSS。

```
Add float:left to #specialist-area-nav,#specialist-area-nav a,#specialist-area-nav .row, #specialist-area-nav .col;
Ad  margin-top:1% to #specialist-area-nav .row;
Change #specialist-area-nav a padding to 5px;
Add margin-left:1% to #specialist-area-nav .col;
Change #specialist-area-nav .row height to 32%;
Add white-space: nowrap to #specialist-area-nav a; 
```

[JSFiddle 更新源](http://jsfiddle.net/Xfv6Y/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:40:35.107

这是因为定义的最大百分比宽度，按钮将在找到空白处被切成两半。要解决此问题，请将以下内容添加到您的代码中：

```
#specialist-area-nav a{
    white-space: nowrap;
} 
```

这将防止按钮断裂，并使它们保持相同的高度。

[JSFiddle](http://jsfiddle.net/Xfv6Y/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:43:46.377

添加`#specialist-area-nav a{ display:inline-block; }`将解决一些问题，但你仍然需要做更多的调整。

# php - 使用 DOMDocument 按类名获取所有元素

> ID：15184641
> 
> 赞同：9
> 
> 时间：2013-03-03T10:19:44.770
> 
> 标签：php, html-parsing, domdocument

这个问题似乎已经回答了很多次，但我似乎仍然无法将这些碎片拼凑在一起。

我想按名称获取每个类的节点值。例如

```
<td class="thename"><strong>32</strong></td>
<td class="thename"><strong>12</strong></td> 
```

我想抓住 32 和 12。我认为这需要 for 循环，但不确定如何实现它。这是我到目前为止所拥有的

```
$domain = "http://domain.com";
$dom = new DOMDocument();

$dom->loadHTMLFile($domain);
$xpath = new DomXpath($dom);
$div = $xpath->query('//*[@class="thename"]')->item(0);
$stuff = $div ->textContent;

echo($stuff); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T10:45:42.297

这是你要找的吗？

```
 $result = array();

    $doc = <<< HTML
    <html>
        <body>
            <div>1
                <span>2</span>
            </div>
            <div>3</div>
            <div>4
                <span class="class1"><strong>5</strong></span>
                <span class="class1"><strong>6</strong></span>
                <span>7</span>
            </div>
        </body>
    </html>
HTML;
    $classname = "class1";
    $domdocument = new DOMDocument();
    $domdocument->loadHTML($doc);
    $a = new DOMXPath($domdocument);
    $spans = $a->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' $classname ')]");

    for ($i = $spans->length - 1; $i > -1; $i--) {
        $result[] = $spans->item($i)->firstChild->nodeValue;
    }

    echo "<pre>";
    print_r($result);
    exit(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-28T10:10:59.277

我只是在php中做了这个

```
$dom = new DOMDocument('1.0');
           $classname = "product-name";

           @$dom->loadHTMLFile("http://shophive.com/".$query);
           $nodes = array();
           $nodes = $dom->getElementsByTagName("div");
           foreach ($nodes as $element)
           {
               $classy = $element->getAttribute("class");
               if (strpos($classy, "product") !== false)
               {
                       echo $classy;
                       echo '<br>';
               }

           } 
```

# python - sqlalchemy：只插入一行的一部分

> ID：15184653
> 
> 赞同：1
> 
> 时间：2013-03-03T10:20:44.367
> 
> 标签：python, insert, sqlalchemy

我是 sqlalchemy 的新手，遇到了问题。我找不到只插入新行的一部分的方法。`session.add()`如果我给出所有列，我可以插入一行。但是如果我只想给出一些列呢？

在互联网上，我找到了一些告诉我使用`.insert()`

```
sqlalchemy.sql.expression.insert(table, values=None, inline=False, **kwargs) 
```

（编程新手，所以我还不完全理解这些行）

我进口的

```
import sqlalchemy
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base 
from sqlalchemy import Column, Integer, String, ForeignKey, Boolean
from sqlalchemy.orm import relationship, backref
from sqlalchemy.orm import sessionmaker
from sqlalchemy.sql.expression import insert

Base = declarative_base()
engine = create_engine('sqlite:///test.db')

class Users(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String, unique=True)
    password = Column(String)
    email = Column(String)

    def __init__(self, name, password, email):
        self.name = name
        self.password = password
        self.email = email

Session = sessionmaker(bind=engine)
Session.configure(bind=engine)
session = Session()

session.add(users.insert().values(name="some name")) 
```

现在最后一行一直给我一个 AttributeError，`(Users has no attribute insert)`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:26:49.797

“部分”插入意味着与完整插入相同，但您未指定 left 为`NULL`. 数据库仍然可以将`NULL`值替换为架构中为您省略的列指定的默认值。

在 SQLAlchemy 中，这仅意味着您将这些相同的列设置为`None`; 你甚至不必明确地这样做。

请注意，您不需要*类*上的`__init__`方法`Users`。这可能会让您更难不指定某些列。SQLAlchemy 声明性基础为您提供了一个默认`__init__`方法，该方法可以执行您*已经*想要的操作，但也保留了默认值。

如果您不想`__init__`完全删除，请将该方法更改`__init__`为默认值`None`或明确指定`None`列值，如 Burhan 的答案：

```
class Users(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String, unique=True)
    password = Column(String)
    email = Column(String)

    def __init__(self, name=None, password=None, email=None):
        self.name = name
        self.password = password
        self.email = email 
```

然后用于插入一个完全“空”的行（如果你完全*删除*`session.add(Users())`了它也可以工作）。*`__init__`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:31:16.223

由于您使用的是[声明式 base](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html)，因此您可以简单地执行以下操作：

```
u = Users('foo',None,None)
session.add(u)
session.commit() 
```*

# python - 我应该使用哪个 gensim 语料库类来加载 LDA 转换的语料库？- Python

> ID：15184655
> 
> 赞同：4
> 
> 时间：2013-03-03T10:20:55.593
> 
> 标签：python, nlp, corpus, lda, gensim

**如何从 python 加载 LDA 转换的语料库`gensim`？**我试过的：

```
from gensim import corpora, models
import numpy.random
numpy.random.seed(10)

doc0 = [(0, 1), (1, 1)]
doc1 = [(0,1)]
doc2 = [(0, 1), (1, 1)]
doc3 = [(0, 3), (1, 1)]

corpus = [doc0,doc1,doc2,doc3]
dictionary = corpora.Dictionary(corpus)

tfidf = models.TfidfModel(corpus)
corpus_tfidf = tfidf[corpus]
corpus_tfidf.save('x.corpus_tfidf')

# To access the tfidf fitted corpus i've saved i used corpora.MmCorpus.load()
corpus_tfidf = corpora.MmCorpus.load('x.corpus_tfidf')

lda = models.ldamodel.LdaModel(corpus_tfidf, id2word=dictionary, num_topics=2)
corpus_lda = lda[corpus]
corpus_lda.save('x.corpus_lda')

for i,j in enumerate(corpus_lda):
  print j, corpus[i] 
```

上面的代码将输出：

```
[(0, 0.54259038344543631), (1, 0.45740961655456358)] [(0, 1), (1, 1)]
[(0, 0.56718063124157458), (1, 0.43281936875842542)] [(0, 1)]
[(0, 0.54255407573666647), (1, 0.45744592426333358)] [(0, 1), (1, 1)]
[(0, 0.75229707773868093), (1, 0.2477029222613191)] [(0, 3), (1, 1)]

# [(<topic_number_from x.corpus_lda model>, 
#   <probability of this topic for this document>), 
#  (<topic# from lda model>, <prob of this top for this doc>)] [<document[i] from corpus>] 
```

**如果我想加载保存的 LDA 转换语料库，`gensim`我应该使用哪个类来加载？**

我试过使用`corpora.MmCorpus.load()`，它没有给我转换后的语料库的相同输出，如上所示：

```
>>> lda_corpus = corpora.MmCorpus.load('x.corpus_lda')
>>> for i,j in enumerate(lda_corpus):
...   print j, corpus[i]
... 
[(0, 0.55087839240547309), (1, 0.44912160759452685)] [(0, 1), (1, 1)]
[(0, 0.56715974584850259), (1, 0.43284025415149735)] [(0, 1)]
[(0, 0.54275680271070581), (1, 0.45724319728929413)] [(0, 1), (1, 1)]
[(0, 0.75233330695720912), (1, 0.24766669304279079)] [(0, 3), (1, 1)] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-02T22:34:32.073

您的代码中还有更多问题。

要以 MatrixMarket 格式保存语料库，您需要

```
corpora.MmCorpus.serialize('x.corpus_lda', corpus_lda) 
```

文档在[这里](http://radimrehurek.com/gensim/tut1.html#corpus-formats)。

您正在训练`corpus_tfidf`，但随后仅进行转换`lda[corpus]`（无 tfidf）。使用 tfidf 或普通的词袋，但要始终如一地使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:51:33.803

在`corpora.XCorpus`（[http://radimrehurek.com/gensim/apiref.html](http://radimrehurek.com/gensim/apiref.html)）中尝试了所有可能的类之后，我尝试使用 BleiCorpus 进行加载，似乎它生成的输出与保存的模型相同，但小数位数更少。

```
>>> from gensim import corpora, models
>>> import numpy.random
>>> numpy.random.seed(10)
>>> 
>>> doc0 = [(0, 1), (1, 1)]
>>> doc1 = [(0,1)]
>>> doc2 = [(0, 1), (1, 1)]
>>> doc3 = [(0, 3), (1, 1)]
>>> corpus = [doc0,doc1,doc2,doc3]
>>> dictionary = corpora.Dictionary(corpus)
>>> 
>>> tfidf = models.TfidfModel(corpus)
>>> corpus_tfidf = tfidf[corpus]
>>> 
>>> lda = models.ldamodel.LdaModel(corpus_tfidf, id2word=dictionary, num_topics=3)
>>> corpus_lda = lda[corpus]
>>> corpus_lda.save('x.corpus_lda')
>>> 
>>> for i,j in enumerate(corpus_lda):
...   print j, corpus[i]
... 
[(0, 0.15441373560695118), (1, 0.56498524668290762), (2, 0.28060101771014123)] [(0, 1), (1, 1)]
[(0, 0.59512220481946487), (1, 0.22817873367464175), (2, 0.17669906150589348)] [(0, 1)]
[(0, 0.52219543266162705), (1, 0.15449347037173339), (2, 0.32331109696663957)] [(0, 1), (1, 1)]
[(0, 0.83364632205849853), (1, 0.086514534997754619), (2, 0.079839142943746944)] [(0, 3), (1, 1)]
>>>
>>> lda_corpus = corpora.BleiCorpus.load('x.corpus_lda')
>>> for i,j in enumerate(lda_corpus):
...   print j, corpus[i]
... 
[(0, 0.154413735607), (1, 0.564985246683), (2, 0.280601017710)] [(0, 1), (1, 1)]
[(0, 0.595122204819), (1, 0.228178733675), (2, 0.176699061506)] [(0, 1)]
[(0, 0.522195432662), (1, 0.154493470372), (2, 0.323311096967)] [(0, 1), (1, 1)]
[(0, 0.833646322058), (1, 0.086514534998), (2, 0.079839142944)] [(0, 3), (1, 1)] 
```

# asp.net-mvc - ASP.NET 运行时错误

> ID：15184657
> 
> 赞同：-2
> 
> 时间：2013-03-03T10:21:14.520
> 
> 标签：asp.net-mvc, web-config

在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

```
Line 16:   <system.web>
Line 17:     <compilation debug="true" targetFramework="4.5" />
Line 18:     <authentication mode="Forms">
Line 19:       <forms loginUrl="~/Account/LogOn" timeout="2880" />
Line 20:     </authentication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:43:57.517

您是否有存储在项目文件夹中且未从项目中排除的先前版本的备份目录？在这种情况下可能会发生。如果是这种情况，则从以前的版本中删除“web.config”文件。

# mysql - MySQL，SHOW TABLES LIKE "somePrefix%"，更改列名结果

> ID：15184660
> 
> 赞同：1
> 
> 时间：2013-03-03T10:21:37.120
> 
> 标签：mysql

我正在使用`SHOW TABLES LIKE`语法来打印当前数据库中以特定前缀开头的表名。

我感兴趣的是结果列名称可由我配置（例如，当您进行选择时，您可以为某些字段`AS`命名不同的名称：`SELECT x AS y FROM z`.

`SHOW TABLES`使用语法时是否可以做同样的事情？

我知道使用 查询 information_schema 的选项`SELECT`，但我不希望将此选项授予用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:36:40.047

您可以根据 information_schema [1] 为您的用户创建一个视图并相应地调整权限。类似问题的所有答案都指向信息模式 [2,3]。

[1] [http://dev.mysql.com/doc/refman/5.5/en/views.html](http://dev.mysql.com/doc/refman/5.5/en/views.html)

[2][表选择查询在mysql中给出别名](https://stackoverflow.com/questions/11204462/table-selection-query-giving-alias-in-mysql)

[3][显示表 MySQL 结果的别名](https://stackoverflow.com/questions/11378375/alias-to-show-tables-mysql-result)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T10:11:31.807

您可以使用以下查询：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_SCHEMA='your_schema_name' 
AND TABLE_NAME LIKE 'somePrefix%' 
```

# core-data - 更改的 sectionNameKeyPath 属性值未反映在 NSFetchedResultsController 上

> ID：15184663
> 
> 赞同：1
> 
> 时间：2013-03-03T10:22:26.517
> 
> 标签：core-data

我有一个由 NSFetchedResultsController 支持的表格视图。

每当底层上下文中的对象发生变化时，NSFetchedResultsController 都会自动在 table-view 上反映新的属性值。耶。

我注意到的一个例外是对用于 sectionNameKeyPath 的属性值的更新不会自动反映。

我猜想用于 sectionNameKeyPath 的属性值对于 NSFetchedResultsController 来说是如此重要，以至于我需要再次执行获取并重新加载表格视图？

**更新**：这里是用于配置获取请求的代码

```
- (void)configureFetch {

CoreDataHelper *cdh = [(AppDelegate *)[[UIApplication sharedApplication] delegate] cdh];

NSFetchRequest *request =
[NSFetchRequest fetchRequestWithEntityName:@"Item"];

request.sortDescriptors =
[NSArray arrayWithObjects:
 [NSSortDescriptor sortDescriptorWithKey:@"locationAtHome.storedIn"
                               ascending:YES],
 [NSSortDescriptor sortDescriptorWithKey:@"name"
                               ascending:YES],
 nil];
[request setFetchBatchSize:15];
self.frc =
[[NSFetchedResultsController alloc] initWithFetchRequest:request
                                    managedObjectContext:cdh.context
                                      sectionNameKeyPath:@"locationAtHome.storedIn"
                                               cacheName:nil];
self.frc.delegate = self;
} 
```

以及执行提取的代码：

```
- (void)performFetch {

if (self.frc) {
    [self.frc.managedObjectContext performBlockAndWait:^{
        NSError *error;
        [self.frc performFetch:&error];
        if (error) NSLog(@"%@ '%@' %@ (Reason: %@)",
                         self.class, NSStringFromSelector(_cmd),
                         error.localizedDescription, error.localizedFailureReason);

        [self.tableView reloadData];
    }];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:27:06.653

问题不在于使用 as 的属性`sectionNameKeyPath`发生了变化，而是*相关对象*中的属性发生了变化。

获取的结果控制器仅跟踪对获取的对象本身（在您的情况下为*Item*对象）的更改，而不是对相关对象的更改。

唯一的解决方案（据我所知）是将部分作为附加属性添加到*Item*实体，即使这意味着您有重复的数据。

# google-maps - 是否可以在选定的谷歌地图路线中获得完整的国家列表？

> ID：15184664
> 
> 赞同：1
> 
> 时间：2013-03-03T10:22:30.053
> 
> 标签：google-maps, google-maps-api-3

我现在开始新项目，我想知道是否可以使用谷歌地图来解决我的问题并获取所选路线中的国家/地区列表。

我试图在互联网上搜索这方面的信息，但找不到我需要的任何东西。

编辑：所以我创建了循环遍历路线步骤的函数，并在每个步骤中通过给定的纬度/经度坐标，我可以通过使用 googles geocoder.geocode 函数获得该步骤在哪个国家/地区。但是现在我在循环执行步骤时遇到了新问题，我收到此错误：OVER_QUERY_LIMIT 表示网页在允许的时间段内发送了太多请求。我什至尝试在校准地理编码功能之前将超时设置为 500 毫秒，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:54:47.667

如果您提出路线请求，它将始终包含有关跨越国际边界的详细信息。

只需尝试在 maps.google.com 上执行 from/to 请求，当它越过边界时，您就会在方向上看到。

我们可以从[方向响应](https://developers.google.com/maps/documentation/javascript/directions#InspectingResults)中获取相同的信息。

# c# - 如何检测静态构造函数是否在.net中执行？

> ID：15184665
> 
> 赞同：0
> 
> 时间：2013-03-03T10:22:35.483
> 
> 标签：c#, .net, static-constructor

我正在 Intel Inspector 下测试复杂的 .net/COM 应用程序（本机内存泄漏）。在 .net 代码的很多地方，我们在静态字段中缓存对 COM 对象的引用。显然，Inspector 将这些标记为泄漏。在少数情况下，添加抑制就足够了，但有时标记的对象数量（作为主 COM 对象的一部分创建）失控（数百个），抑制这些对象可能会隐藏实际泄漏的相似模式。长话短说——就在进程退出之前，我正在遍历 appdomain 中加载的所有程序集中的所有类，并且我将引用我的 COM 对象的静态字段设置为空。如果我可以打印所有引用 COM 对象的静态字段，即使它们尚未被接受为有效缓存（并且可能是实际泄漏），这对于未来的使用会非常有用。

但是，如果从未使用过 type，它的静态构造函数将在我调用 getField 时执行（查看它是否为空），并可能创建更多 COM 对象。有什么方法可以检测当前 AppDomain 中是否使用过类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:12:33.237

我不认为你可以自动完成，但你可以让静态构造函数自己注册。因此，不是迭代程序集中的所有类，而是迭代所有已注册的类。

```
public static class ClassRegistrar
{
    private static List<Type> registered = new List<Type>();
    public static void Register(Type type)
    {
        registered.Add(type);
    }
    public static IEnumerable<Type> Registered
    { get { return registered; } }
}

public class MyClass
{
    static MyClass()
    {
        ClassRegistrar.Register(typeof(MyClass));
    }
} 
```

# clearcase - 在不使用配置规范的情况下从具有特定标签的 Clearcase 复制元素

> ID：15184670
> 
> 赞同：3
> 
> 时间：2013-03-03T10:23:15.277
> 
> 标签：clearcase

如何从`Clearcase`特定的 复制元素或文件`label`，而不`label`在`config specs`.

我不想更改视图的配置规范，但我需要访问我选择的文件之一的旧版本，并且我想直接从我现有的视图中这样做（同样，不更改任何内容）。
我知道我想要恢复的版本（从实例版本 2，即使我在我看来当前选择的是版本 3）。

![在此处输入图像描述](../Images/e9f4d3883a67e2f826e268704ccc3b2f.png)

您将使用什么`cleartool`命令来访问所述旧版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:03:37.533

您可以使用[扩展路径名](https://stackoverflow.com/questions/176858/in-clearcase-how-can-i-view-old-version-of-a-file-in-a-static-view-from-the-co/177350#177350)，但只能使用动态视图（任何现有的动态视图，不需要特定的配置规范）。
文章“[使用版本扩展路径从命令提示符打开当前不在您的视图中的版本](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/to_open_not_view.htm)”提到您也可以使用快照视图，但您需要：

*   已经加载的元素（显然不是你想要的版本）
*   要*复制*到视图中的旧版本（作为私有文件）：`cleartool get -to prog.old.c prog.c@@/main/r1_fix/1`

请注意，版本树的上下文菜单包括一个“发送到”条目，它可以有效地为您执行 cleartool 获取（即副本）。

![在此处输入图像描述](../Images/95b3ac211975d6a775865be81c89ed05.png)

* * *

但是在动态视图中，你不需要复制任何东西，你可以直接引用任何旧版本：

```
cp foo.c@@/RLS4.3
cp include.h@@/main/bugfix/REL2 
```

另请参阅[版本选择器](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/version_selector.htm)：

> 如果版本标签被定义为每个元素一个，**则一个附加的链接/文件系统对象会出现在元素目录树的顶层**。
> 例如，如果`BL3`是一个每个元素的标签，则这些版本扩展的路径名都是对同一版本的明确引用：

```
hello.c@@/BL3
hello.c@@/main/bugfix/patch2/BL3 
```

> 实际上，此功能允许您在不知道版本树中的确切位置的情况下引用版本。

在动态视图中，当您在视图中看到 hello.c 时（可以是*任何*选定的版本，而不是您想要的带有标签的版本），您实际上可以这样做：

```
cd hello.c@@
dir 
```

这将列出所有独特的标签供您选择。

# mysql - 对我的记录进行分组的最快方法是什么？

> ID：15184672
> 
> 赞同：0
> 
> 时间：2013-03-03T10:23:26.637
> 
> 标签：mysql, sql, database-design

我的网站显示了不同主题的链接集合。这些链接分为两种类型：网络和图像。我的数据库将有数百万（可能超过一千万）这些记录。当页面加载时，我需要向用户显示该页面特定主题的 Web 和图像链接。所以第一个问题是：

1.  我是创建两个单独的较小的表，每个表用于 Web 和图像链接，然后对每个表进行查询，还是为两者创建一个巨大的表（具有正确的索引）并进行一次查询。我将在哪里获得更好的性能？如果一个表和一个查询更有效，那么我的下一个问题是：

2.  细分这两种类型以进行演示的最有效方法是什么？我应该使用`group by`，还是应该使用 php 将我的结果数组分为两种类型？

蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:39:21.127

您可以对所有对象使用一个表，或者对链接或网站使用一个表来获得类似的性能。如果您有两个单独的表，则对结果进行 UNION 将返回您需要的所有结果。

划分结果的主要原因是它们是否真的不同（从您的应用程序的角度来看）。也就是说，如果您最终要使用很多查询，例如

```
select * from objects where type='image'; 
```

那么有两个表可能是有意义的。

然后使用 group by 不是对不同结果进行分组的一种方式，而是一种聚合它们的方式。

因此，例如，您可以使用

```
select type, count(*) from objects group by type 
```

要得到

```
| image |  100000 |
| web   | 2000000 | 
```

但它不会返回分离的对象。要将它们“分组”，您可以对每个使用查询，或者使用排序，然后在应用程序中使用逻辑来划分结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:57:49.637

这取决于 web 数据如何接近 img 数据。如果数据基本上是由*链接*组成的，那么一个表更合适，有一个列来区分网络和数据（以后可能还有其他的，比如 css、js ......）

```
Links: (id, link, type) 
```

*在类型*或*类型链接*上添加索引将有助于分组（按类型）和匹配搜索（类型，链接）。

但是，如果 web 和 img 数据的不同之处在于您不想混合使用苹果和橙子，例如

```
Web: (wid, wlink, rating, ...)
Img: (iid, ilink, width, height, mbsize, camera, datetaken, hasexif...) 
```

在这种情况下，除了*链接*之外，两个表都没有太多共同点。图像链接和网络链接不同，当两种数据都具有相同的链接时，甚至没有“增益”。另一个优点（一个表也可以，但在这里更有意义）是将两种数据链接到另一个表中

```
 Relations: (wid,iid) 
```

这允许维护网站和图像之间的关系，因为一个图像可能被多个网站使用，而网站使用多个图像。索引上`wid`和上`iid`。

我的偏好是这两个表（带有可选的关系链接）。

关于来自 PHP 的查询，使用`UNION`您可以在一次查询中从两个表中获取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T14:03:27.903

您可能会从一张表中获得*稍微*更好的性能，但此决定应主要取决于数据或约束的性质是否不同。

您必须做出另一个（从性能角度来看更重要的）决定：您希望如何对数据进行[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)（所有[InnoDB 表都是集群的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)）？

如果您想在获取给定页面的所有链接时获得出色的性能，请使用标识关系，在链接表中生成自然键：

![在此处输入图像描述](../Images/1bbfb9663afe88cfafe85070fff0ed91.png)

LINK 表实际上只是一个 B 树，页 PK ¹在其**前沿**，它将属于同一页的行物理地组合在一起。以下查询可以通过简单的索引范围扫描和最少的 I/O 来满足：

```
SELECT URL
FROM LINK
WHERE PAGE_ID = <whatever> 
```

如果您使用单独的表，则只能有两个不同的查询。许多客户端 API 支持在单个数据库往返中执行两个查询。如果 PHP 没有，您可以 UNION 两个查询以节省一个数据库往返：

```
SELECT *
FROM (
    SELECT 1 LINK_TYPE, URL
    FROM IMAGE_LINK
    WHERE PAGE_ID = <whatever>
    UNION ALL
    SELECT 2, URL
    FROM WEB_LINK
    WHERE PAGE_ID = <whatever>
)
ORDER BY LINK_TYPE 
```

上面的查询会给你...

```
LINK_TYPE  URL
1          http://somesite.com/foo.jpeg
1          http://somesite.com/bar.jpeg
1          http://somesite.com/baz.jpeg
...
2          http://somesite.com/foo.html
2          http://somesite.com/bar.html
2          http://somesite.com/baz.html
... 
```

...这将很容易在客户端级别分离。

如果您没有使用单独的表，您可以在客户端级别通过它们的扩展名来分隔 URL，或者在 LINK PK 中引入一个附加字段：{PAGE_ID, LINK_TYPE, URL}，这应该会使以下查询非常有效：

```
SELECT LINK_TYPE, URL
FROM LINK
WHERE PAGE_ID = <whatever>
ORDER BY LINK_TYPE 
```

请注意，PK 中的字段顺序很重要，因此将 LINK_TYPE 放在末尾会阻止 DBMS*仅*进行索引范围扫描。

* * *

*¹不管它是什么；我只是用了`PAGE_ID`一个例子。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T10:27:24.227

> 我是创建两张单独的小桌子还是一张大桌子？

去一张桌子。

> 细分这两种类型以进行演示的最有效方法是什么？

取决于*特定*的搜索条件。

# java - 如何在 Webots 中显示图形？

> ID：15184675
> 
> 赞同：0
> 
> 时间：2013-03-03T10:23:57.933
> 
> 标签：java, webots

我已经实现了适用于 Webots 模拟 e-puck（PRO 7.0.3，OS X）的遗传算法（Java）。我现在要做的是显示一个图表，该图表将显示健身得分如何随时间变化。

我一直在尝试使用 JFreeChart，但不幸的是，不允许从 Webots 模拟中显示新框架。

我一直在研究使用显示节点手动生成图形，但这非常繁琐且有限。

你知道其他方法吗？或者也许是强制 Webots 允许 JFrames 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:02:48.620

您不需要使用任何 java 库来显示图形。只需将*[Display](https://www.cyberbotics.com/doc/reference/display)*节点添加到您的世界：

```
Display {
  rotation 1 0 0 3.14
  width 128
  height 128
  windowPosition 0 1
} 
```

并在您的控制器中初始化它：

```
 display = wb_robot_get_device("display");
 width = wb_display_get_width(display);
 height = wb_display_get_height(display);
 wb_display_fill_rectangle(display,0,0,width,height);
 wb_display_set_color(display,LIGHT_GREY); 
```

这将在场景的左下角创建一个方形面板，能够在模拟过程中显示 2D 内容。您可能会在您的 Webots 版本中包含的项目中找到一些*显示的使用示例。*

初始化后，您可以简单地将像素、线条、多边形、文本和...添加到显示面板。访问我之前提到的 Java API 链接。

# javascript - 情节突出

> ID：15184681
> 
> 赞同：0
> 
> 时间：2013-03-03T10:24:19.980
> 
> 标签：javascript, css, image

例如谷歌图片：[http ://www.technobuffalo.com/wp-content/uploads/2012/12/Google-Apps.jpeg](http://www.technobuffalo.com/wp-content/uploads/2012/12/Google-Apps.jpeg)

我希望在单击按钮后 G 颜色从蓝色变为红色。

这只是一个例子。非常复杂，不可能将 g 换成另一个 g 图像。

你怎么看？是否可以参考图像的某些部分并更改这些区域的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:55:17.163

你不能做你想做的事。使用多张图片或使用 CSS 自己“构建”一张。但是保持这个图像并动态改变它的颜色是不可能的（除非你真的发疯了）

# python - Python多线程径向基函数

> ID：15184682
> 
> 赞同：0
> 
> 时间：2013-03-03T10:24:20.940
> 
> 标签：python, multithreading, artificial-intelligence, multiprocessing

所以我需要让径向基函数运行得更快一点

```
 while(error):
        epoch += 1
        error = 0
        for i in xrange(self.numPoints):
            dp = self.dotProduct(g[i], self.weights)
            signum = self.sig(dp)
            if dp < 0 and g[i].classification == 1:
                self.updateWeights(signum, g[i])
                error += 1
            elif dp > 0 and g[i].classification == -1:
                self.updateWeights(signum, g[i])
                error += 1
            elif dp == 0:
                self.updateWeights(signum, g[i])
                error += 1
        if epoch > 10000:
            return 0
    print "Epochs %i, %i Dimensions" % (epoch, self.numWeights - 1)
    return 1

def dotProduct(self, x, y):
    ret = 0.0
    for i in xrange(len(y)):
        ret += x.points[i]*y[i]
    return ret

def sig(self, x):
    if x < 0:
        return 1
    if x > 0:
        return -1
    else:
        return 0

def updateWeights(self, s, g):
    for i in xrange(self.numWeights):
        self.weights[i] = self.weights[i] + self.learningRate * s * g.points[i] 
```

我想使用并发线程，但python线程锁定线程，直到前一个线程完成，所以它不会使它比运行单个主线程更快。

我需要找到一种同时运行线程的方法，每个线程都有一个线程：for i in xrange(self.numPoints): 但是锁定 self.weights 的值，这意味着一次只有一个线程可以更改它们。

任何人都知道如何做到这一点？

这在小型数据集上效果很好，但是在使用真实数据时会有点麻烦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:19:09.597

您可以使用 numpy 数组来提高性能，例如：

```
import numpy as np

def dotProduct(self, x, y):
    return np.dot(x.point, y)

def updateWeights(self, s, g):
    self.weights += self.learningRate * s * g.points 
```

其中`x.point`, `y`, `self.weights`,`g.points`是一维 numpy 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:55:46.077

Python 多线程在一个 CPU 内核上的单个进程中运行所有线程。

要运行真正的并行线程，您应该使用[多处理](http://docs.python.org/2/library/multiprocessing.html)库。

# objective-c - validateMenuItem：未调用

> ID：15184683
> 
> 赞同：8
> 
> 时间：2013-03-03T10:24:24.593
> 
> 标签：objective-c, macos, cocoa, nsmenu

我正面临一个奇怪的情况。我有`NSMenu`一个子菜单。子菜单的内容以编程方式填充。在我的`validateMenuItem:`方法中，我可以看到所有正在检查的项目（父项目）以及子项目（一旦我单击子菜单），除了那些在我的自动填充子菜单中的项目。

这是为什么？难道我做错了什么？关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-03T10:32:53.847

**这是解决方案：**

Cocoa`validateMenuItem:`在 Class 中查找`NSMenuItem`动作选择器所在的方法。

因此，如果您`NSMenuItem`的操作选择器（例如`@selector(someSelector:)`）是在 中实现的，那么如果您想验证相应的菜单项，请`SomeClass`确保您也有一个`validateMenuItem:`方法。`SomeClass`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-28T08:03:31.217

@Dr.Kameleon 有正确的答案。

如果可以的话，我会添加一个小点来更新它？我的代码最近在这方面发生了故障，并且在之前工作时停止调用 validateMenuItem:。我没有注意到，因为唯一的症状是一个菜单项在它应该被禁用时不再被禁用。

问题是 Swift 4。该方法必须归因于 @objc。在早期版本的 Swift 中，从 NSObject、NSViewController 等继承就足够了，但是随着 Swift 4 和 5 的新版本发生了变化。

ps 将方法放在扩展中似乎很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T10:08:30.977

以上答案并没有帮助我解决我的问题。我创建了一个单独的项目来了解何时`validateMenuItem(:)`调用该方法。

`validateMenuItem(:)`只有在以下情况下才会调用该方法：

1.  符合`NSMenuItemValidation`在实现`NSPopUpButton`.
2.  所有 NSMenuItem 都必须为实现`NSMenuItemValidation`协议的对象设置一个动作和目标。
3.  实现`validateMenuItem(:`) 方法。
4.  实现`dummyAction(:)`不做任何事情的 NSMenuItem 方法。

5.  必须设置 NSPopUpButton "Items: Autoenables" autoenablesItems

**版本 11.5 (11E608c)，Swift 5.0，DP：macOS 10.15。**

代码：

```
import Cocoa
// 1) Conform to NSMenuItemValidation in the class which implements the NSPopUpButton.

class NSMenuItemValidationTestViewController: NSViewController, NSMenuItemValidation {
@IBOutlet weak var popupButton: NSPopUpButton!

// MARK: - ViewController lifecycle

override func viewDidLoad() {
    super.viewDidLoad()
    // .target and .action are set programmatically because menus are mostly build programmatically.
    // 2) All NSMenuItems must have an action and target set to the object which implements the
    // NSMenuItemValidation protocol.
    self.popupButton?.menu?.items.forEach{( $0.target = self )}
    self.popupButton?.menu?.items.forEach{( $0.action = #selector(dummyAction(_:)) )}
}

// MARK: - NSMenuItemValidation
// 3) Implement the validateMenuItem(:) method.
func validateMenuItem(_ menuItem: NSMenuItem) -> Bool {
    print("Function: \(#function), line: \(#line)")
    return true
}

// 4) Implement the dummyAction(:) method for NSMenuItem which doesn't do anything
@IBAction func dummyAction(_ sender: NSMenuItem?) {
    print("Function: \(#function), line: \(#line)")    }

}

// 5) The NSPopUpButton "Items: Autoenables" checkbox must be set to true in storyboard.
// or
// self.popupButton?.menu?.autoenablesItems = true 
```

TODO：Github 链接到源代码。（快来了）。

# javascript - 如何使用 javascript 按许多条件进行过滤？

> ID：15184688
> 
> 赞同：0
> 
> 时间：2013-03-03T10:25:17.297
> 
> 标签：javascript, jquery, jsfiddle

因此，我正在检查一种创建搜索功能的方法，该功能使用基于许多条件的结果进行过滤，这些条件通过选中复选框从数据库中检索到。[我从http://jsfiddle.net/magicalex/FmQvc/](http://jsfiddle.net/magicalex/FmQvc/)找到了 jsfiddle 代码。

它适用于一间可变卧室，当我添加浴室标准时，它可以正常工作，但是当我想根据这两个变量进行过滤时。

```
$(window).load(function(){
$('input').change(function(){
var allchecked=0;
$('input').each(function(){
    var checked;
    if (checked = $(this).attr('checked')) {allchecked++};
    var numberofrooms = $('li[data-bedrooms='+$(this).data('bedrooms')+']');
    checked ?  numberofrooms.show('slow'): numberofrooms.hide('slow');

    var numberofbathrooms = $('li[data-  bathrooms='+$(this).data('bathrooms')+']');
    checked ?  numberofbathrooms.show('slow'): numberofbathrooms.hide('slow');
});
if(allchecked==0){$('li').show('slow');}
}); 
```

示例：检查 1 间卧室 2 间浴室，这不应该带来任何结果。

```
<body>
<input data-bedrooms="1" type="checkbox">1 bedrooms<br>
<input data-bedrooms="2" type="checkbox">2 bedrooms<br>
<input data-bedrooms="3" type="checkbox">3 bedrooms<br><br>

<input data-bathrooms="1" type="checkbox">1 bathrooms<br>
<input data-bathrooms="2" type="checkbox">2 bathrooms<br>
<ul>
<li data-bedrooms="1" data-bathrooms="1">1 bedroom apartment</li>
<li data-bedrooms="1" data-bathrooms="1">1 bedroom apartment</li>
<li data-bedrooms="3" data-bathrooms="2">3 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="3" data-bathrooms="2">3 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
<li data-bedrooms="1" data-bathrooms="1">1 bedroom apartment</li>
<li data-bedrooms="2">2 bedroom apartment</li>
</ul>

</body> 
```

但这不是出现的情况，它根据检查的两个浴室标准带出三间卧室。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:55:36.547

如果要查找同时包含 data-bedroom 属性和 data-bathroom 属性的所有*li元素，则需要使用同时匹配两者的选择器*

```
$('li[data-bedrooms='+$(this).data('bedrooms')+'][data-bathrooms='+$(this).data('bathrooms')+']') 
```

# sql - 为什么 SQLite 不使用我的索引进行排序

> ID：15184690
> 
> 赞同：1
> 
> 时间：2013-03-03T10:25:36.087
> 
> 标签：sql, sqlite, indexing

我的查询：

```
SELECT *
FROM t1, t2
WHERE (t1.ZID=t2.ZCHARACTERID AND t1.ZID IN (1,2,3,4) AND t2.Z_ENT=3)
ORDER BY t2.ZSTROKECOUNT 
```

我的指数：

```
CREATE INDEX i1 on t1(ZID);
CREATE INDEX i2 on t2(ZCHARACTERID, Z_ENT, ZSTROKECOUNT); 
```

解释查询计划

```
selectid    order       from        detail                                                                         
----------  ----------  ----------  -----------------------------------------------------------------  --------------
0           0           1           SEARCH TABLE t1 USING INDEX i1 (ZID=?) (~740 rows)
0           0           0           EXECUTE LIST SUBQUERY 1                                                        
0           1           0           SEARCH TABLE t2 USING INDEX i2 (ZCHARACTERID=? AND Z_ENT=?) (~9 row)
0           0           0           USE TEMP B-TREE FOR ORDER BY 
```

从解释查询计划的第 3 行开始，它说只使用了两个索引列，并且临时 b-tree 用于排序依据。但据我了解，我应该也可以使用 i2 进行订购。

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:22:01.900

因为你忘记了`FROM`条款

试试这个方法

```
 SELECT * FROM your_table WHERE (t1.ZID=t2.ZCHARACTERID AND t1.ZID IN (1,2,3,4) AND t2.Z_ENT=3) ORDER BY t2.ZSTROKECOUNT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:04:24.583

索引不是按 排序的`ZSTROKECOUNT`。

如果您这样做，SQLite 将使用索引进行排序：

```
DROP INDEX i2;
CREATE INDEX i3 ON t2(ZSTROKECOUNT, ZCHARACTERID, Z_ENT); 
```

# javascript - 将对象推入数组

> ID：15184691
> 
> 赞同：-1
> 
> 时间：2013-03-03T10:25:36.510
> 
> 标签：javascript, arrays, object

我对 JS 对象的理解很薄弱。如果我将一组对象传递到一个新数组中，然后尝试获取某个索引处的长度或值（如下面的摘录），我会返回一条未定义的消息。这里有明显的错误吗？谢谢。

```
var arrayTest = [];
var objCollection = obj.name + obj.size + obj.weight; 
arrayTest.push(objCollection);
alert(arrayTest[0]); // returns undefined 
```

澄清一下，我正在收集客户的产品选择并将其存储在 json 文件中的技术数据返回 - 目的是将这个选择放入表格中。

```
{
"name": "the name",
"size": "the size",
"weight": "the weight"
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:39:50.790

您确定*objCollection*实际上包含一个值吗？~~在我看来，*obj*对象的字段之一是未定义的，因为将值与未定义的对象连接会产生未定义的结果。因此，您将一个未定义的对象推送到您的数组，而不是您想要的。~~请参阅[Bergi 的评论](https://stackoverflow.com/posts/comments/21392587)以进行更正。

# asp.net - ASP.NET 4.5 文本框文本模式

> ID：15184692
> 
> 赞同：3
> 
> 时间：2013-03-03T10:26:00.833
> 
> 标签：asp.net

可以在 ASP.net TextBox TextMode = "DateTime" or "Date" 中阻止过去的日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:34:25.790

我假设这是 WebForms，在这种情况下是的，您可以使用`RangeValidator`. 像这样：

```
<asp:TextBox runat="server" ID="dateField" />
<asp:RangeValidator runat="server" Type="Date" ControlToValidate="dateField" 
MaximumValue="9999/12/28" 
MinimumValue="1000/12/28" 
ErrorMessage="enter valid date" /> 
```

您需要根据需要设置`MinimumValue`属性。您可以从代码隐藏或页内`<script>`块中执行此操作：

```
this.rangeValidator.MinimumValue = DateTime.UtcNow.Subtract( new TimeSpan(13,0,0) ).ToString("G", CultureInfo.InvariantCulture); 
```

请注意我使用`UtcNow`并减去 13 小时来获得真实的、全球可接受的最小日期值。您可能希望根据您的应用程序更改此设置（例如将其限制为您的服务器的时区，前提是您的用户所期望的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:44:10.917

[这篇文章应该可以帮助你](https://stackoverflow.com/questions/15050136/html-5-asp-net-4-5-textbox-textmode)

> [输入元素规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#date-and-time-state-%28type=datetime%29)min 属性（如果指定）必须具有一个有效的全局日期和时间字符串值。max 属性（如果指定）的值必须是有效的全局日期和时间字符串

您可能会从后面的代码中执行此操作

```
yourTextBox.Attributes.Add("min", DateTime.Now.ToString()); 
```

# sql-server - 为什么 NHibernate Session.Save 会锁定数据库？

> ID：15184693
> 
> 赞同：2
> 
> 时间：2013-03-03T10:26:32.700
> 
> 标签：sql-server, nhibernate, dotnetopenauth

我用 NHibernate 作为 ORM 构建了一个小型 ASP.NET MVC Web 应用程序。在每个 HTTP 请求开始时，我都会创建一个会话并打开一个事务并在请求结束时关闭它。

```
// Begin request

session = StaticSessionManager.OpenSession();    
session.BeginTransaction();

// End of request

currentSession.Transaction.Commit();
currentSession.Flush();
currentSession.Close(); 
```

现在我还在使用[DotNetOpenAuth](http://www.dotnetopenauth.net/) API 进行 Facebook/Google 登录。为了让我注册一个新用户，API 要求我用一些用户信息更新一个表（比如 UserProfile）。这是我通过 Nhibernate 的 Save() 做的

```
session.Save(new UserProfile { UserName = userName }); 
```

在同一个 Web 请求中，DotNetOpenAuth API 期望从该表（UserProfile）中读取上述插入的数据。

现在这会导致死锁场景，因为 NHibernate 的 Save 对数据库应用了某种锁定。即使我手动尝试使用 SQL Server Management Studio 从该表中读取数据，它似乎也要等到 Web 请求超时。

现在我在保存后尝试了显式刷新

```
session.Flush(); 
```

但即使这样也不能摆脱锁。我希望我的 DotNetOpenAUth API 能够读取最新数据。

目前，我在保存后进行交易，然后再重新打开一次。我不确定这是否是最佳做法/有任何缺点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:29:31.517

## 何时调用 Flush？

使用默认设置 ( `FlushMode`on `ISession`)，调用`Commit()`NHibernate 事务将自动刷新更改。在某些情况下，我们想手动刷新，但`Flush()`在事务提交后调用是不好的，原因有很多：

*   由于提交本身已经刷新，我们知道没有更多的更改要刷新，所以它没用。然而，NHibernate 不知道它是无用的，所以它仍然会脏检查所有加载的对象。也就是说，superflouos 冲洗对性能不利。

*   如果确实有一些脏状态要发送到数据库，那么这样的更新将在事务之外执行，这通常不是我们想要的。

## 数据库锁定

通常，当数据库获取某种锁时，该锁会一直保留到事务提交或回滚为止。刷新不会终止事务，因此对锁没有释放影响。

## 尝试的解决方案

根据您的描述，您似乎正在使用一个数据库连接（通过 NHibernate 会话）来创建 UserProfile，并使用另一个数据库连接（在同一个 Web 请求中）来读取它。稍后的连接会阻塞，因为第一个连接上的事务尚未完成。（显然它必须锁定，因为数据库还不知道事务是否会成功。）

尝试找到一种方法来执行以下任何操作：

*   创建用户配置文件时，请在一个单独的事务（可能还有会话）上执行此操作，您可以在返回之前提交该事务。

*   或者使用户配置文件的“回读”使用相同的数据库连接，以便可以在同一个事务中完成。我不熟悉 DotNetOpenAuth API，但看看是否有办法覆盖读取操作，以便您可以通过 NHibernate 进行操作，或者尝试将 session.Connection 注入 DotNetOpenAuth。

# coffeescript - 如何使用 CoffeeScript 引用正确的范围

> ID：15184694
> 
> 赞同：0
> 
> 时间：2013-03-03T10:26:49.380
> 
> 标签：coffeescript

在这种情况下，我对如何从内部范围引用外部范围感到困惑：

```
that = @
@collection.bind 'reset', ->
  that.render() 
```

是否有任何使`that = @`外观更好的 CoffeeScript 构造？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:36:26.120

据我所知，这就是[胖箭头](http://coffeescript.org/#fat_arrow)的用途：

```
@collection.bind 'reset', =>
  @render() 
```

它编译成：

```
var _this = this;

this.collection.bind('reset', function() {
  return _this.render();
}); 
```

# java - 是否通过 Java 影响性能与 SQl 的多个打开/关闭连接？

> ID：15184697
> 
> 赞同：1
> 
> 时间：2013-03-03T10:27:04.560
> 
> 标签：java, sql, oracle, jdbc

我正在编写一个基本代码来访问数据库中的警报系统查询。我知道工作中的数据库（基于 Oracle）会自动创建一个连接池，我想知道如果我每 5-15 秒连接、执行查询和**关闭连接**，性能是否会急剧下降，这是正确的做法吗它还是我必须保持连接打开，直到无限循环关闭？

我有人在工作中告诉我，关闭连接会导致数据库每次都必须从头开始查找查询，但是如果我将其保持打开状态，则查询将在数据库某处的缓存中。

```
 ResultSet rs1 = MyStatement.executeQuery(QUERY_1);
     while (rs1.next()){
     // do something
     }
     rs1.close();

     rs1 = MyStatement.executeQuery(QUERY_2);
     while (rs1.next()){
     // do something
     }
     rs1.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:09:56.207

1.  Oracle 无法连接连接，这必须在客户端完成

2.  您没有在发布的代码示例中关闭任何连接

3.  打开连接是一个相当缓慢的过程，因此请使用一组固定的连接（通常该组的大小为一个，用于胖客户端应用程序之类的东西）或连接池，它将打开的连接汇集起来以供重用。有关连接池的可行选项，请参阅此问题：[使用 JDBC 的连接池选项：DBCP 与 C3P0](https://stackoverflow.com/questions/520585/connection-pooling-options-with-jdbc-dbcp-vs-c3p0)如果您在应用程序服务器上运行，它可能已经提供了连接池解决方案。检查文档。

4.  关闭代码中的结果集或连接（不在代码中）之类的东西应该在 finally 块中完成。进行关闭（并且正确处理必要的异常实际上相当困难。考虑使用 Spring 的 JdbcTemplate 之类的东西（[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/ jdbc.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html) )

5.  如果您不使用 VPN（虚拟私有数据库）之类的东西，Oracle 将缓存语句的执行计划，无论它们是否来自同一个连接。最近访问的数据也保存在内存中，以便快速访问类似数据的查询。所以性能下降实际上来自建立连接的延迟。在数据库端创建连接有一些开销，理论上这可能会影响整个数据库的性能，但这可能是无关紧要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:00:42.820

每次客户端连接到数据库时，都必须对该连接进行身份验证。这显然是开销。此外，数据库监听器只能同时处理有限数量的连接；如果同时连接尝试的数量超过该阈值，它们将被放入队列中。这也是开销。

所以一般的答案是，是的，打开和关闭连接是一项昂贵的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:32:35.680

使用 DB 连接池总是有益的，尤其是在您使用 Java EE 应用服务器时。此外，使用 Java EE 应用服务器中开箱即用的连接池也是最佳选择，因为它将由应用服务器开发团队进行优化和性能测试。

# wpf - 两个具有相同代码但名称不同的 IMultiValueConverter - 只有一个有效

> ID：15184698
> 
> 赞同：0
> 
> 时间：2013-03-03T10:27:17.260
> 
> 标签：wpf, xaml, data-binding, ivalueconverter, imultivalueconverter

我遇到了一个奇怪的 WPF 问题。`IMultiValueConverter`我的 WPF 项目引用的程序集中有两个定义。它们的代码相同，但名称不同。我已经多次清理和重建程序集，但由于某种原因，只有一个值转换器工作，而另一个给出“clr 命名空间中不存在”xaml 错误。

注意：我知道该文件位于项目引用的正确命名空间和程序集中，因为我将 dll 直接反映在 WPF 项目的 bin 文件夹中。

这种现象有什么解释吗？

```
//// this works
public class IndexConverter : IMultiValueConverter
{
    public virtual object Convert(
        object[] values, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
    {
        var element = values[0] as Object;
        var sequence = values[1] as IEnumerable;
        return sequence.Cast<Object>().ToList().FindIndex(c => c.Equals(element)).ToString();
    }

    public virtual object[] ConvertBack(
        object value, Type[] targetTypes,
        object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

////  this gives me xaml errors
public class IndexConverterCopy : IMultiValueConverter
{
    public virtual object Convert(
        object[] values, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
    {
        var element = values[0] as Object;
        var sequence = values[1] as IEnumerable;
        return sequence.Cast<Object>().ToList().FindIndex(c => c.Equals(element)).ToString();
    }

    public virtual object[] ConvertBack(
        object value, Type[] targetTypes,
        object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:45:56.237

新的 VS2012 中有一些奇怪的错误，这似乎是某种缓存问题。

唯一的解决方案是重新启动 VisualStudio。

到目前为止，我发现了 3 个这样的错误

1.  更改您的 xaml 布局，它在设计器视图中更改，按 F5 构建，应用程序不显示新更改，需要 VS 重启
2.  您所有的撤消数据都消失了，并且 ctrl+z 不再起作用，需要 VS 重新启动
3.  设计器不会显示任何内容并显示`IndexOutOfRange` 异常，需要 VS 重启

这个问题听起来像是来自 xaml 和 cs 以某种方式变得不同步的同一区域，因此重新启动 VS 也可能是解决您的问题的唯一方法（带上 SP1）

# python - iPython - 调试模式下的库函数帮助

> ID：15184701
> 
> 赞同：2
> 
> 时间：2013-03-03T10:27:25.197
> 
> 标签：python, matlab, function, debugging, ipython

我想知道当我在 iPython 中处于调试模式时如何访问库函数的帮助页面。例如，

```
ipdb> help(numpy.random.randn) 
```

在调试模式下不起作用，因为它不是 ipdb 命令。

我可以在 Matlab 中做这样的事情，在哪里

```
K>> help(randn) 
```

即使我处于调试模式，也会返回 randn 的帮助页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:09:45.267

`!help(numpy.random.randn)`在 pdb 中使用。

`!`感叹号确保 pdb 不会尝试将该行作为 pdb 命令执行，而是将其传递给 Python 解释器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:40:52.973

我没有安装 ipython 但很可能你可以访问帮助

```
print randn.__doc__ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:45:25.677

我已经很久没有使用 iPython，但我认为你应该能够做到这一点：

```
ipdb> import numpy
ipdb> import pydoc
ipdb> pydoc.help(numpy.random.randn) 
```

# java - CachedRowSetImpl getString 基于列标签抛出“无效的列名”

> ID：15184709
> 
> 赞同：7
> 
> 时间：2013-03-03T10:28:38.897
> 
> 标签：java, sql, jdbc, resultset

当我执行以下代码时，一切都很好：

```
ResultSet rs = con.prepareStatement("SELECT r.UID AS R FROM r").executeQuery();
System.out.println(rs.getMetaData().getColumnLabel(1));
rs.next();
System.out.println(rs.getString("R")); 
```

结果是：

```
R
23 
```

但是当我执行以下代码时：

```
ResultSet rs = con.prepareStatement("SELECT r.UID AS R FROM r").executeQuery();
CachedRowSetImpl rslt = new CachedRowSetImpl();
rslt.populate(rs);
System.out.println(rslt.getMetaData().getColumnLabel(1));
rslt.next();
System.out.println(rslt.getString("R")); 
```

结果是：

```
R
java.sql.SQLException: Invalid column name 
```

为什么会在这里抛出异常？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T11:51:52.547

问题是`CachedRowSet`( `com.sun.rowset.CachedRowSetImpl`) 的参考实现包含一个错误：当您按名称检索列时，它使用`columnName`而**不是**，`columnLabel`因此与使用`columnLabel`检索值的 JDBC 规范的其余部分背道而驰。此错误使得无法通过`columnLabel`.

Oracle 的错误是[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7046875](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7046875)，但（令人惊讶的是）他们已使其无法供公众查看。

有两种潜在的解决方法。一种是检查您的驱动程序是否提供了一个属性以使该`ResultSetMetaData.getColumnName(..)`方法也返回该`columnLabel`值，第二种解决方法是创建一个子类`CachedRowSetImpl`（不幸的是，这需要很多覆盖方法）。

以下版本是从此消息中复制的：[Re: Regression from 2.1.6](http://fb-list-archive.s3-website-eu-west-1.amazonaws.com/firebird-java/2012/7/10715.html)

```
import java.math.BigDecimal;
import java.sql.Array;
import java.sql.Blob;
import java.sql.Clob;
import java.sql.Ref;
import java.sql.SQLException;
import java.util.Calendar;
import java.util.Collection;
import java.util.Hashtable;

import javax.sql.rowset.RowSetMetaDataImpl;

import com.sun.rowset.CachedRowSetImpl;

public class FixedCachedRowSetImpl extends CachedRowSetImpl {

    private static final long serialVersionUID = -9067504047398250113L;
    private RowSetMetaDataImpl RowSetMD;

    public FixedCachedRowSetImpl() throws SQLException {
        super();
    }

    public FixedCachedRowSetImpl(Hashtable env) throws SQLException {
        super(env);
    }

    private int getColIdxByName(String name) throws SQLException {
        RowSetMD = (RowSetMetaDataImpl) this.getMetaData();
        int cols = RowSetMD.getColumnCount();

        for (int i = 1; i <= cols; ++i) {
            String colName = RowSetMD.getColumnLabel(i);
            if (colName != null) if (name.equalsIgnoreCase(colName))
                return (i);
            else
                continue;
        }
        throw new SQLException(resBundle.handleGetObject("cachedrowsetimpl.invalcolnm").toString());
    }

    @Override
    public Collection<?> toCollection(String column) throws SQLException {
        return toCollection(getColIdxByName(column));
    }

    @Override
    public String getString(String columnName) throws SQLException {
        return getString(getColIdxByName(columnName));
    }

    @Override
    public boolean getBoolean(String columnName) throws SQLException {
        return getBoolean(getColIdxByName(columnName));
    }

    @Override
    public byte getByte(String columnName) throws SQLException {
        return getByte(getColIdxByName(columnName));
    }

    @Override
    public short getShort(String columnName) throws SQLException {
        return getShort(getColIdxByName(columnName));
    }

    @Override
    public int getInt(String columnName) throws SQLException {
        return getInt(getColIdxByName(columnName));
    }

    @Override
    public long getLong(String columnName) throws SQLException {
        return getLong(getColIdxByName(columnName));
    }

    @Override
    public float getFloat(String columnName) throws SQLException {
        return getFloat(getColIdxByName(columnName));
    }

    @Override
    public double getDouble(String columnName) throws SQLException {
        return getDouble(getColIdxByName(columnName));
    }

    @Override
    public BigDecimal getBigDecimal(String columnName, int scale) throws SQLException {
        return getBigDecimal(getColIdxByName(columnName), scale);
    }

    @Override
    public byte[] getBytes(String columnName) throws SQLException {
        return getBytes(getColIdxByName(columnName));
    }

    @Override
    public java.sql.Date getDate(String columnName) throws SQLException {
        return getDate(getColIdxByName(columnName));
    }

    @Override
    public java.sql.Time getTime(String columnName) throws SQLException {
        return getTime(getColIdxByName(columnName));
    }

    @Override
    public java.sql.Timestamp getTimestamp(String columnName) throws SQLException {
        return getTimestamp(getColIdxByName(columnName));
    }

    @Override
    public java.io.InputStream getAsciiStream(String columnName) throws SQLException {
        return getAsciiStream(getColIdxByName(columnName));

    }

    @Override
    public java.io.InputStream getUnicodeStream(String columnName) throws SQLException {
        return getUnicodeStream(getColIdxByName(columnName));
    }

    @Override
    public java.io.InputStream getBinaryStream(String columnName) throws SQLException {
        return getBinaryStream(getColIdxByName(columnName));
    }

    @Override
    public Object getObject(String columnName) throws SQLException {
        return getObject(getColIdxByName(columnName));
    }

    @Override
    public int findColumn(String columnName) throws SQLException {
        return getColIdxByName(columnName);
    }

    @Override
    public java.io.Reader getCharacterStream(String columnName) throws SQLException {
        return getCharacterStream(getColIdxByName(columnName));
    }

    @Override
    public BigDecimal getBigDecimal(String columnName) throws SQLException {
        return getBigDecimal(getColIdxByName(columnName));
    }

    @Override
    public boolean columnUpdated(String columnName) throws SQLException {
        return columnUpdated(getColIdxByName(columnName));
    }

    @Override
    public void updateNull(String columnName) throws SQLException {
        updateNull(getColIdxByName(columnName));
    }

    @Override
    public void updateBoolean(String columnName, boolean x) throws SQLException {
        updateBoolean(getColIdxByName(columnName), x);
    }

    @Override
    public void updateByte(String columnName, byte x) throws SQLException {
        updateByte(getColIdxByName(columnName), x);
    }

    @Override
    public void updateShort(String columnName, short x) throws SQLException {
        updateShort(getColIdxByName(columnName), x);
    }

    @Override
    public void updateInt(String columnName, int x) throws SQLException {
        updateInt(getColIdxByName(columnName), x);
    }

    @Override
    public void updateLong(String columnName, long x) throws SQLException {
        updateLong(getColIdxByName(columnName), x);
    }

    @Override
    public void updateFloat(String columnName, float x) throws SQLException {
        updateFloat(getColIdxByName(columnName), x);
    }

    @Override
    public void updateDouble(String columnName, double x) throws SQLException {
        updateDouble(getColIdxByName(columnName), x);
    }

    @Override
    public void updateBigDecimal(String columnName, BigDecimal x) throws SQLException {
        updateBigDecimal(getColIdxByName(columnName), x);
    }

    @Override
    public void updateString(String columnName, String x) throws SQLException {
        updateString(getColIdxByName(columnName), x);
    }

    @Override
    public void updateBytes(String columnName, byte x[]) throws SQLException {
        updateBytes(getColIdxByName(columnName), x);
    }

    @Override
    public void updateDate(String columnName, java.sql.Date x) throws SQLException {
        updateDate(getColIdxByName(columnName), x);
    }

    @Override
    public void updateTime(String columnName, java.sql.Time x) throws SQLException {
        updateTime(getColIdxByName(columnName), x);
    }

    @Override
    public void updateTimestamp(String columnName, java.sql.Timestamp x) throws SQLException {
        updateTimestamp(getColIdxByName(columnName), x);
    }

    @Override
    public void updateAsciiStream(String columnName, java.io.InputStream x, int length) throws SQLException {
        updateAsciiStream(getColIdxByName(columnName), x, length);
    }

    @Override
    public void updateBinaryStream(String columnName, java.io.InputStream x, int length) throws SQLException {
        updateBinaryStream(getColIdxByName(columnName), x, length);
    }

    @Override
    public void updateCharacterStream(String columnName, java.io.Reader reader, int length) throws SQLException {
        updateCharacterStream(getColIdxByName(columnName), reader, length);
    }

    @Override
    public void updateObject(String columnName, Object x, int scale) throws SQLException {
        updateObject(getColIdxByName(columnName), x, scale);
    }

    @Override
    public void updateObject(String columnName, Object x) throws SQLException {
        updateObject(getColIdxByName(columnName), x);
    }

    @Override
    public Object getObject(String columnName, java.util.Map<String, Class<?>> map) throws SQLException {
        return getObject(getColIdxByName(columnName), map);
    }

    @Override
    public Ref getRef(String colName) throws SQLException {
        return getRef(getColIdxByName(colName));
    }

    @Override
    public Blob getBlob(String colName) throws SQLException {
        return getBlob(getColIdxByName(colName));
    }

    @Override
    public Clob getClob(String colName) throws SQLException {
        return getClob(getColIdxByName(colName));
    }

    @Override
    public Array getArray(String colName) throws SQLException {
        return getArray(getColIdxByName(colName));
    }

    @Override
    public java.sql.Date getDate(String columnName, Calendar cal) throws SQLException {
        return getDate(getColIdxByName(columnName), cal);
    }

    @Override
    public java.sql.Time getTime(String columnName, Calendar cal) throws SQLException {
        return getTime(getColIdxByName(columnName), cal);
    }

    @Override
    public java.sql.Timestamp getTimestamp(String columnName, Calendar cal) throws SQLException {
        return getTimestamp(getColIdxByName(columnName), cal);
    }

    @Override
    public void updateRef(String columnName, java.sql.Ref ref) throws SQLException {
        updateRef(getColIdxByName(columnName), ref);
    }

    @Override
    public void updateClob(String columnName, Clob c) throws SQLException {
        updateClob(getColIdxByName(columnName), c);
    }

    @Override
    public void updateBlob(String columnName, Blob b) throws SQLException {
        updateBlob(getColIdxByName(columnName), b);
    }

    @Override
    public void updateArray(String columnName, Array a) throws SQLException {
        updateArray(getColIdxByName(columnName), a);
    }

    @Override
    public java.net.URL getURL(String columnName) throws SQLException {
        return getURL(getColIdxByName(columnName));
    }
} 
```

您还可以查看[`org.springframework.jdbc.support.rowset.ResultSetWrappingSqlRowSet`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/support/rowset/ResultSetWrappingSqlRowSet.html)，其中还说：

> 注意：自 JDBC 4.0 起，已明确任何使用字符串来标识列的方法都应使用列标签。列标签是使用 SQL 查询字符串中的 ALIAS 关键字分配的。当查询不使用 ALIAS 时，默认标签是列名。大多数 JDBC ResultSet 实现都遵循这种新模式，但也有例外，例如 com.sun.rowset.CachedRowSetImpl 类，它只使用列名，而忽略任何列标签。从 Spring 3.0.5 开始，`ResultSetWrappingSqlRowSet`会将列标签转换为正确的列索引，以便更好地支持使用RowSets 时`com.sun.rowset.CachedRowSetImpl`使用的默认实现。`JdbcTemplate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T06:02:52.900

您可以使用内部选择：

```
ResultSet rs = con.prepareStatement("SELECT * FROM (SELECT r.UID AS R FROM r) AA").executeQuery();
CachedRowSetImpl rslt = new CachedRowSetImpl();
rslt.populate(rs);
System.out.println(rslt.getMetaData().getColumnLabel(1));
rslt.next();
System.out.println(rslt.getString("R")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-12T15:40:23.597

一种解决方法似乎是将列包装在函数或数学运算中。然后，您可以在`CachedRowSetImpl`.

如果你的 SQL 是这样的：

```
SELECT
  id AS student_id,
  cost - discount AS total_cost,
  first_name AS name
FROM
  students 
```

您将能够引用`studentRow.getBigDecimal("total_cost")`，但会因“列名无效”`studentRow.getLong("student_id")`而失败。`studentRow.getString("name")``SQLException`

但是如果你的 SQL 是这样的：

```
SELECT
  id + 0 AS student_id,
  cost - discount AS total_cost,
  CONCAT(first_name) AS name
FROM
  students 
```

然后它会按您的预期工作。

我不确定这会对性能造成什么影响，但它会在紧要关头起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T07:00:22.150

这里我改进的 getColIdxByName 版本支持 MySQL 5.x 名称，如“tbl.column”：

```
private int getColIdxByName(String name) throws SQLException {
    RowSetMD = (RowSetMetaDataImpl) this.getMetaData();
    int cols = RowSetMD.getColumnCount();

    for (int i = 1; i <= cols; ++i) {
        String colLabel = RowSetMD.getColumnLabel(i);
        String colName  = RowSetMD.getColumnName(i);
        if (colName != null) if (name.equalsIgnoreCase(colName) || name.equalsIgnoreCase(RowSetMD.getTableName(i) + "." + colName)) {               
            return (i);
        }
        else if (colLabel != null) if (name.equalsIgnoreCase(colLabel)) {
            return (i);
        }
        else
            continue;
    }
    throw new SQLException(resBundle.handleGetObject("cachedrowsetimpl.invalcolnm").toString());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-19T12:36:18.660

最新的 JDK 1.7 已经实现了 CachedRowSet 并且标签名称错误已得到修复！

```
import java.sql.ResultSet;
import javax.sql.rowset.CachedRowSet;
import javax.sql.rowset.RowSetFactory;
import javax.sql.rowset.RowSetProvider;

ResultSet rs = con.prepareStatement("SELECT r.UID AS R FROM r").executeQuery();
RowSetFactory rowSetFactory = RowSetProvider.newFactory();
CachedRowSet crs = rowSetFactory.createCachedRowSet();
crs.populate(rs); 
```

# extjs - 为 ExtJS 标签创建自己的控制器？

> ID：15184712
> 
> 赞同：0
> 
> 时间：2013-03-03T10:29:20.323
> 
> 标签：extjs, extjs4.1, extjs-mvc

在我的应用程序中，我的视口中有一个项目控制器和一个树视图。树形视图显示项目列表。在我的视口中心有一个标签面板。当我在树视图中选择我的项目时，我想为当前项目打开一个特定的选项卡。这在我的项目控制器中工作正常。

为了清理我的代码，我想在一个新的 ProjectDetails 控制器中提取此逻辑，该控制器负责打开选项卡和我的选项卡表单。这样做的正确方法是什么？我将创建一个新控制器，而不是打开选项卡，而是加载这个新控制器，初始化并启动它。

但是如何将项目作为参数放入控制器以及我应该以哪种方法打开我的选项卡并将事件分配给组件？我认为 init 方法为时过早，因为没有创建组件......

谢谢并恭祝安康！

# c# - C# 使用 MediaInfo.dll 发布应用程序

> ID：15184713
> 
> 赞同：2
> 
> 时间：2013-03-03T10:29:28.687
> 
> 标签：c#, dllimport, mediainfo

我已经构建了一个程序，它将使用 MediaInfo.dll 读取 mkv 文件的一些视频和音频信息。

该程序在从源代码运行时运行完美，并将 dll 放在`bin`文件夹中。

现在我想发布我的应用程序并能够继续使用它。`MediaInfo.dll`不再找到该库。我尝试将它放入`C:\WIndows\`或放入`C:\Windows\system32`，但没有运气。如果我运行安装程序（发布后），程序安装在同一位置（我不想要这个，但这是另一个问题）。我也尝试将 dll 放入该文件夹中。

向我抛出错误的代码是：

```
try{
  Handle = MediaInfo_New();
}
catch (Exception ex){
                Handle = (IntPtr)0;
Console.Out.WriteLine(ex.ToString());
} 
```

错误抛出是`System.BadImageFormatException`or `System.DllNotFoundException: Unable to load DLL 'MediaInfo.dll'`。

关于在哪里放置 dll 的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:42:10.140

您需要将 DLL 部署到复制 EXE 的同一目录中。

您遇到了 BadImageFormatException 问题并且没有看到 c:\windows\system32 工作，因为您正在将程序部署在引导 64 位版本 Windows 的机器上。但是，您的程序无法在 64 位模式下运行，您需要依赖 32 位本机代码。您需要通过强制您的程序在 32 位模式下运行来解决这个问题。右键单击您的 EXE 项目，属性，构建选项卡，将平台目标设置更改为 x86。将 DLL 复制到 Windows 目录是一个非常糟糕的主意，但在这样的机器上它是 c:\windows\syswow64。 *始终*支持本地部署，与 EXE 相同的目录。

如果在此之后仍然遇到 DllNotFoundException 问题，那么可能的问题是 MediaInfo.dll 本身依赖于另一个 DLL。这很常见，存储 C 运行时的 DLL 是一种非常常见的依赖项。如果您不知道可能是什么 DLL，那么您可以使用 SysInternals 的 ProcMon 实用程序。您会看到程序正在搜索 DLL，但没有找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:16:52.357

您可以尝试以下方法之一 -

1）将其`MediaInfo.dll`放在与可执行文件相同的位置。确保您的程序是为正确的目标平台构建的。当目标平台和二进制文件在架构上不匹配时（x86 v/s x64），我经常看到 BadImageFormatException。打包依赖项通常会解决这个问题。

2)在目标机器`MediaInfo.dll`的[全局程序集缓存中注册。](http://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.71%29.aspx)这可以通过安装程序或简单地使用[gacutil.exe](http://msdn.microsoft.com/en-us/library/ex0ss12c%28v=vs.80%29.aspx)来完成。这将使 dll 对目标机器上的所有程序集可见。

# android - 如何使用 SQL 搜索值？

> ID：15184714
> 
> 赞同：0
> 
> 时间：2013-03-03T10:29:31.507
> 
> 标签：android

我正在尝试学习如何在 Android 中使用数据库，到目前为止，我已经学会了如何获取表中的所有数据行，但我不确定如何使用 SQL 查询来搜索值等于我传递给下面方法的字符串值？

我想知道是否有人可以添加一些简单的代码，如何在我的代码中使用 SQL 查询数据库？感谢帮助！谢谢！

像这样的东西：`String query = "Select * from DB_TABLE where TABLE_IMAGE_PATH = filePath";`

```
// Read from database
public String readContacts(String filePath){

    String[] columns = new String[]{TABLE_ID, TABLE_IMAGE_PATH, TABLE_CONTACT_NAME, TABLE_CONTACT_NUMBER, TABLE_CONTACT_ADDRESS};
    Cursor c = db.query(DB_TABLE, columns, null, null, null, null, null);

    int id = c.getColumnIndex(TABLE_ID);
    int imagePath = c.getColumnIndex(TABLE_IMAGE_PATH);
    int name = c.getColumnIndex(TABLE_CONTACT_NAME);
    int number = c.getColumnIndex(TABLE_CONTACT_NUMBER);
    int address = c.getColumnIndex(TABLE_CONTACT_ADDRESS);

    String result = "";

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){ 
    result = result + c.getString(id) + " " + c.getString(imagePath) + " " + c.getString(name) + " " + c.getString(number) + " " + c.getString(address);
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:42:36.613

你可以搜索查询

它的确切字符串

```
String query = "Select * from DB_TABLE where TABLE_IMAGE_PATH  like  '"+filePath+"'; 
```

如果值包含您的字符串

```
String query = "Select * from DB_TABLE where TABLE_IMAGE_PATH  like  '%"+filePath+"%'; 
```

如果价值需要从最后

```
String query = "Select * from DB_TABLE where TABLE_IMAGE_PATH  like  '%"+filePath+"'; 
```

如果价值需要从一开始

```
String query = "Select * from DB_TABLE where TABLE_IMAGE_PATH  like  '"+filePath+"%'; 
```

把这些

```
SQLiteDatabase dbR = this.getReadableDatabase();
    Cursor cur = dbR.rawQuery("query", null);
            return cur 
```

使用此光标，您可以获得价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:36:24.290

您可以通过将查询代码修改为：

```
 String[] columns = new String[]{TABLE_ID, TABLE_IMAGE_PATH, TABLE_CONTACT_NAME,   TABLE_CONTACT_NUMBER, TABLE_CONTACT_ADDRESS};

        Cursor cursor = db.query(ANSWERS_TABLE,
            columns,
            columns[1] + " = ?", new String[]{filePath}, null, null, null); 
```

看看这里：[SQLiteDataBase 查询](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

# c# - 使用 OnItemDataBound 时如何获取转发器中的上一行？

> ID：15184719
> 
> 赞同：0
> 
> 时间：2013-03-03T10:30:01.143
> 
> 标签：c#, asp.net, repeater

我有一个中继器，它创建一个按完成日期排序的任务列表。

```
 <asp:Repeater ID="rptCompletedProjectTasks" OnItemDataBound="rptCompletedProjectTasks_ItemDataBound" runat="server">
               <HeaderTemplate>
                   <h3>Completed Tasks</h3> 
                    <table class="projTaskTable">
                        <tr>
                            <th style="width:100px">W/C</th>
                            <th style="width:450px">Description</th>
                            <th style="width:100px">Due</th>
                            <th style="width:100px">Completed</th>
                            <th style="width:50px">Var</th>
                        </tr>
                    </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td><asp:Label ID="lblWeek" runat="server" Text=''></asp:Label></td>
                        <td><%# Eval("description") %></td>
                        <td><%# Eval("deadline", "{0:d MMM yy}") %></td>
                        <td><asp:Label ID="lblCompleted" runat="server" Text='<%# Eval("completedDate", "{0:d MMM yy}") %>'></asp:Label></td>
                        <td><%# Eval("var") %></td>
                   </tr>
                </ItemTemplate>
               <FooterTemplate></table></FooterTemplate>
            </asp:Repeater> 
```

我想按周对已完成的任务进行可视化分组，一周开始日期在一组任务的第一行的左列中，而在一周发生变化之前，其他任何内容都没有。IE

![在此处输入图像描述](../Images/e1eddeb537ed9ceeaaca7be5b84d7b58.png)

我正在尝试检查上一项的 WeekCommencing 值，并且仅在 lblWeek 控件与使用 OnItemDataBound 的上一行的值不同时才更新它：

```
protected void rptCompletedProjectTasks_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            DateTime weekCommencing = new DateTime(1970, 1, 1);

            if ((e.Item.ItemType != ListItemType.Header) && (e.Item.ItemType != ListItemType.Footer))
            {

                Label completedDate = e.Item.FindControl("lblCompleted") as Label;
                Label lblWeekCommencing = e.Item.FindControl("lblWeek") as Label;

                DateTime completed = Convert.ToDateTime(completedDate.Text);

                if (completed != weekCommencing)
                {

                    lblWeekCommencing.Text = getWeekCommencing(completed).ToString("d MMM");

                }
                else
                {
                    lblWeekCommencing.Text = "";
                }
                weekCommencing = completed;
            } 
```

我用来获取一周开始日期的函数是：

```
protected DateTime getWeekCommencing(DateTime date)
        {

            int delta = DayOfWeek.Monday - date.DayOfWeek;
            DateTime monday = date.AddDays(delta);
            return monday;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:43:11.510

也许您可以使用并检查这是 lastItem 吗？

```
e.Item.ItemIndex 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:45:39.453

实现此目的的一种简单方法是在页面类上使用私有属性。您可以创建一个属性，`private DateTime currentWeek.`并且您可以在页面加载中启动此属性，就像您在使用 weekCommencing 的方法开始时所做的那样。

比在每行数据绑定上，您可以检查此行日期是否与 currentWeek 变量在同一周，如果不是，则设置标签文本并将 currentWeek 设置为此行周。

```
protected void Page_Load(object sender, EventArgs e)
{
    currentWeek = new DateTime(1970, 1, 1);
} 
```

# php - 是否可以使用变量打印 php 变量？

> ID：15184725
> 
> 赞同：2
> 
> 时间：2013-03-03T10:31:02.253
> 
> 标签：php

我有一个非常简单的问题。但真的让我抓狂。

我有一个声明说：

> 示例和示例具有一个 php 变量，例如 $loggedin_user_name

首先，我想将上面的语句存储在 MySQL 数据库中，然后在我想打印上面的语句时将其取回。似乎他们没有问题。
但是当我从数据库中提取数据后尝试打印数据时，它正在打印相同的语句。但我想，它必须打印登录的用户名，而不是`$loggedin_user_name`上面的语句。

那么，是否可以在变量中打印变量？如果是，请提出一种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T10:33:23.997

使用[sprintf()](http://php.net/sprintf)

```
$str = "example and example with one php variable like %s"; 
```

然后从数据库中加载并填写

```
$out = sprintf($str, $loggedin_user_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:34:55.690

如果它总是相同的变量名，我建议使用

```
echo str_replace($fromDb, '$variableToReplace', $variableToReplace); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:40:58.493

您可以使用 preg_match 在字符串中查找变量名，然后将其替换为 str_replace。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T11:58:38.513

```
$name = "ABC";
$bla = "$name";
echo $bla; //ABC 
```

将始终为“ABC”，因为 PHP 在分配给 $bla 时正在评估您的变量。

您可以使用单引号来避免这种行为（如`$bla='$name'; //$name`）或引用 $ 符号（如`$bla="\$name"; //$name`）。然后，您可以将您想要的字符串存储到数据库中。

But you can not (only when using eval(), wich you MUST NOT DO in good PHP-Code) build this behaviour, that php has, when printing fulltext. Like Mentioned in another answer, you should use printf or sprintf and replace the $loggedin_user_name with %s (for "string).

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-03T10:37:15.947

您可以使用 eval 函数，它可以像您的示例一样使用：

```
$loggedin_user_name = 'bilal';
$str = "example and example with one php variable like $loggedin_user_name";

eval("\$str = \"$str\";");
echo $str; 
```

缺点：

*   如果您作为参数提供给 eval 的 str 变量或字符串/代码由用户填充，则此用法会产生漏洞。
*   如果评估代码中出现致命错误，则整个脚本将退出。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-03T10:42:10.463

最好是连接一个字符串：

```
$exampleWithUsername = 'example' . $loggedin_user_name;

echo $exampleWithUsername; 
```

'example' 是一个硬编码的字符串，但你可以给它一个包含字符串 $example 的变量，或者直接将 $username 连接到 $example 中。

# browser - Windows 手机应用链接

> ID：15184737
> 
> 赞同：1
> 
> 时间：2013-03-03T10:33:13.107
> 
> 标签：browser, hyperlink, windows-phone

所以 - 我想制作一个 Windows Phone 应用程序，当我打开它时链接到我的网页 - 我该怎么做？我有SDK，并尝试使用浏览器，但我似乎无法找到设置主页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:06:37.000

试试这些文章。很好解释的场景。
[来自诺基亚开发者网站](http://www.developer.nokia.com/Community/Wiki/WebBrowser_Control_Techniques_in_Windows_Phone)。
[来自 CSharp Corner 网站](http://www.c-sharpcorner.com/UploadFile/ae35ca/working-with-web-browser-control-in-windows-phone-7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:42:58.703

您可以使用 WebBrowser 控件，将其放置在原本为空的页面上。如果愿意，这可以让您微调体验。

但是更容易的是只使用**WebBrowserTask**。这将使您立即退出您的应用程序并进入操作系统的真正浏览器体验。在 App.xaml.cs 文件中，只需添加以下代码：

```
private void PhoneApplicationService_Launching(object sender, LaunchingEventArgs e)
{
    WebBrowserTask webBrowserTask = new WebBrowserTask();

    webBrowserTask.Uri = new Uri("http://my.superawesomewebsite.com", UriKind.Absolute);

    webBrowserTask.Show();
} 
```

您的应用程序将立即启动浏览器，您无需执行任何其他操作。

# php - PHP - 架构，变量范围的问题

> ID：15184741
> 
> 赞同：-1
> 
> 时间：2013-03-03T10:33:57.623
> 
> 标签：php, global-variables, scope

我现在正在编写一个应用程序，它应该尽可能简单。我的控制器实现了**render($Layout)**方法，它只执行以下操作：

```
public function render($Layout) {
  $this->Layout = $Layout;
  include( ... .php)
} 
```

我不太明白以下问题：在我的控制器中，我定义了一个变量：

```
public function somethingAction() {
  $someVariable = "something";
  $this->render('someLayout');
} 
```

在 php 视图文件中（与渲染函数中包含的相同）我尝试回显变量，但什么也没有。但是，如果我这样声明我的操作方法：

```
public function somethingAction() {
  global $someVariable;
  $someVariable = "something";
  $this->render('someLayout');
} 
```

在我看来是这样的：

```
global $someVariable;
echo $someVariable; 
```

它确实有效。每次都写**全局**这个词仍然很烦人。

我怎样才能做到这一点？我宁愿不使用 $_GLOBAL 数组。例如，在 Cake PHP 中，有一个类似**$this->set('varName', $value)**的方法。然后我可以将视图中的变量作为**$varName**访问。它是如何完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:59:33.410

来自[PHP 手册`include`：](http://www.php.net/manual/en/function.include.php)

> 当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用。但是，包含文件中定义的所有函数和类都具有全局范围。

当你这样做

```
public function somethingAction() {
  $someVariable = "something";
  $this->render('someLayout');
} 
```

`$someVariable`变量仅限于范围`somethingAction()`。调用您的`render()`方法不会神奇地使变量在 中可用`render()`，因为该`render()`方法具有自己的变量范围。一个可能的解决方案是

```
public function somethingAction() {
  $this->render(
      'someLayout', 
      array(
          'someVariable' => 'something'
      )
    );
} 
```

然后更改`render()`为

```
public function render($Layout, array $viewData) {
    $this->Layout = $Layout;
    include( ... .php)
} 
```

然后，您将可以访问`$viewData`包含的文件，前提是您没有尝试在其他功能或方法中使用它，例如，如果您的包含文件如下所示：

```
<h1><?php echo $viewData['someVariable']; ?></h1> 
```

它会起作用，但如果它看起来像这样：

```
function foo() {  
    return $viewData['someVariable']; 
}
echo foo(); 
```

它不起作用，因为`foo()`它有自己的变量范围。

**但是**，[控制器的唯一职责是处理输入](https://stackoverflow.com/questions/3499336/in-mvc-where-do-you-draw-the-line-between-a-controller-and-model/3501048#3501048)。渲染是视图的责任。因此，您的控制器根本不应该有`render()`方法。考虑将该方法移至您的 View 类，然后执行

```
public function somethingAction() {
  $view = new View('someLayout');
  $view->setData('someVariable', 'something');
  $view->render();
} 
```

`render()`然后可以像这样实现 View 对象的方法：

```
class View
…
    $private $viewData = array();       

    public function setData($key, $value) 
    {
        $this->viewData[$key] = $data;
    }

    public function render()
    {
        extract($this->viewData, EXTR_SKIP);
        include sprintf('/path/to/layouts/%s.php', $this->layout);
    } 
```

该`extract`函数将使用它们的键作为名称在当前范围内导入数组的值。这将允许您使用`viewData`as`$someVariable`而不是`$this->viewData['someVariable']`. `extract`不过，请确保您在使用它之前了解其安全隐患。

请注意，这只是您当前做事方式的一种可能替代方案。您也可以将视图完全从控制器中移出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:54:37.337

使用`global`你隐式使用`$_GLOBALS`数组。

一个**不推荐**的例子，因为全局变量从来都不是一件好事：

```
function something() {
  global $var;
  $var = 'data';
}

// now these lines are the same result:
echo $_GLOBALS['var'];
global $var; echo $var; 
```

为什么不简单地使用 $this->set 函数？

```
public function render($Layout) {
  $this->Layout = $Layout;
  include( ... .php)
}

public function somethingAction() {
  $this->set('someVariable', "something");
  $this->render('someLayout');
}

// in a framework's managed view:
echo $someVariable; 
```

很抱歉没有详细了解您的框架，但这完全有道理。

实际上它是如何完成的：有一个本机[`extract`](http://www.php.net/manual/en/function.extract.php)函数，它将关联数组加载到当前符号表中：

```
array( 'var0' => 'val0', 'var1' => 'val1') 
```

变成

```
echo $var0; // val0
echo $var1; // val1 
```

这很可能是“发生了什么”。

# jquery - jQuery 作为 Composer 依赖项，为什么我必须指定一个版本？

> ID：15184742
> 
> 赞同：0
> 
> 时间：2013-03-03T10:34:13.917
> 
> 标签：jquery, composer-php

我想使用 Composer 管理 jQuery。

我添加了一个自定义存储库，它工作正常。但是为什么我需要指定 a`version`以及如何避免这种情况？将`url`始终提供相同的稳定版本，并且一直更新版本号对我来说似乎没用。

```
{
    "require": {
        "jquery/jquery": "*"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "jquery/jquery",
                "version": "1.9.1",
                "dist": {
                    "url": "http://code.jquery.com/jquery.js",
                    "type": "file"
                }
            }
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:42:41.190

顺便说一句，您可以使用`components/jquery`而不是映射自己的 jquery ;)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:36:05.533

由于错误的版本可能会破坏您的代码，因此不推荐使用的功能、功能支持或任何与功能相关的问题都会出现问题。

# android - Android相对布局子大小

> ID：15184749
> 
> 赞同：0
> 
> 时间：2013-03-03T10:35:01.697
> 
> 标签：android, android-relativelayout

我在线性布局中有一个相对布局，在相对布局中我有一个图像视图和glsurface堆叠在它上面，我希望glsurface具有与imageview相同的大小，如何完成这项任务？

```
 <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent">

                <com.zibi.ResizableImageView
                                    android:id="@+id/imageView1"
                                    android:layout_width="fill_parent"
                                    android:layout_height="fill_parent"
                                    android:layout_weight="1.0"
                                    android:gravity="center_horizontal"
                                    android:src="@drawable/notepad" />

                <com.zibi.zGLSurfaceView android:id="@+id/surfaceviewclass"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent">

                </com.zibi.travelersnotepad.zGLSurfaceView>
            </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:50:51.083

尝试设置`layout_align*`属性。TextView 将覆盖 ImageView。[更多关于相对布局属性](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

```
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <ImageView 
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image"
        android:scaleType="fitXY"/>
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#AFFF"
        android:layout_alignRight="@+id/img"
        android:layout_alignLeft="@+id/img"
        android:layout_alignTop="@+id/img"
        android:layout_alignBottom="@+id/img"
        android:text="sample text"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:42:00.597

您不能使用 RelativeLayout 来强制其中子视图的大小属性。如果您对它没有特别的需求，您可以使用 LinearLayout 并赋予两个视图相同的权重：

```
 <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent">

            <com.zibi.ResizableImageView
                                android:id="@+id/imageView1"
                                android:layout_width="fill_parent"
                                android:layout_height="fill_parent"
                                android:layout_weight="1.0"
                                android:gravity="center_horizontal"
                                android:src="@drawable/notepad" />

            <com.zibi.zGLSurfaceView android:id="@+id/surfaceviewclass"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1.0">

            </com.zibi.travelersnotepad.zGLSurfaceView>
        </LinearLayout> 
```

# jquery - 如何使用 Jquery 设置 aa 变量

> ID：15184751
> 
> 赞同：0
> 
> 时间：2013-03-03T10:35:06.647
> 
> 标签：jquery, variables

我有两个这样的变量：

```
var th = $(".on", parent.document.body).find('input').eq(0).val();
var th2 = $(".on", parent.document.body).find('input').eq(1).val(); 
```

现在我想做一个`if`包含两个变量的声明：

```
if ($(th + th2, parent.document.body).val() == ''){ 

...

} 
```

这对我不起作用。我不知道为什么。我还尝试了其他变体，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:39:26.810

如果您尝试测试 2 个输入字段是否为空，您可以针对存储在变量中的值进行测试：

```
if (th == '' && th2 == '') {
    // the 2 input fields are empty    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T10:40:27.783

由于 jQuery 是一个 JavaScript 框架，您可以使用纯 JavaScript

```
if(th == '' && th2 == '') { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T10:51:09.587

提取两个字段值后，您只是在进行字符串比较，因此请使用普通的 Javascript。

但是，您*可能*还想忽略用户可能在字段中留下的任何空白，所以我会使用：

```
if ($.trim(th) === '' && $.trim(th2) === '') {
     // both fields are "empty"
     ...
} 
```

您还应该避免代码重复，并尽可能利用本机 Javascript 和 DOM 调用：

```
var $in = $(parent.document.body).find('.on input');  // Don't repeat yourself
var th = $in[0].value;   // more efficient than $in.eq(0).val()
var th2 = $in[1].value 
```

# antlr4 - antlr4：创建 ParseTrees 时忽略多余的标记

> ID：15184758
> 
> 赞同：6
> 
> 时间：2013-03-03T10:36:23.550
> 
> 标签：antlr4

我正在使用 ANTLR4 为实时语言 PEARL 开发编译器。

使用 ANTLR4，我的 ParseTree 填充了多余的标记，例如用于结束语法单元的分号。

有没有办法告诉 ANTLR 忽略这些类型的令牌？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T11:43:02.967

> 有没有办法告诉 ANTLR 忽略这些令牌？

不，但是使用 ANTLR4 的内置监听器/访问器，不需要删除这些标记。

请参阅：[“跳过”更改解析器行为](https://stackoverflow.com/questions/15129658/skip-changes-parser-behavior)

# php - Office 2007 无法识别 PHP Excel 导出

> ID：15184762
> 
> 赞同：1
> 
> 时间：2013-03-03T10:36:32.857
> 
> 标签：php, xml, excel

我已经使用堆栈溢出好几年了，但现在才注册了一个帐户，因为我从来没有陷入如此困境以至于我需要问一个问题（不是因为我很聪明，因为我的代码很简单！），无论如何我的问题；

我正在通过 PHP 导出一个 .xls 格式的表，其中包含来自我的 MYSQL 表中的几个表的信息。所有信息和样式都完美无缺。唯一的问题是，当它在 office 2007 中打开时，我收到以下错误消息：

“您尝试打开的文件 'export.xls' 的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您确定要查看这个文件？”

总而言之，所有信息都成功地从数据库中提取，并且所有样式都有效 - 我知道这是真的，因为当我在弹出的对话框上单击“是”时，我看到所有内容都布置得很完美。

下面是 Excel 导出器类：

```
/**
* Class for generating xml with multiple spreadsheets
* @author Marin Crnković
* @version 0.9
* @update_date 21.01.2009
*/

class excel_xml {

var $xml_data;

var $nl;

var $tab;

var $cols;

var $rows;

var $worksheets;

var $counters;

var $xml;

/**
* Constructor
*/
function excel_xml(){
    $this->column_width = 150;
    $this->debug        = false;
    $this->cols         = array();
    $this->row_array    = array();
    $this->rows         = array();
    $this->worksheets   = array();
    $this->counters     = array();
    $this->nl           = "\n";
    $this->tab          = "\t";
}

/**
* Set debug
*/
function debug() {
    $this->debug = true;
}

/**
* Generate xml
* @returns string
*/
function generate() {
    // Create header
    $xml = $this->create_header().$this->nl;
    // Put all worksheets
    $xml .= join('', $this->worksheets).$this->nl;
    // Finish with a footer
    $xml .= $this->create_footer();
    $this->xml = $xml;
    return $this->xml;
}

/**
* Create worksheet
* Uppon creating a worksheet, delete counters
* @param string $worksheet_name: name of the worksheet
*/
function create_worksheet($worksheet_name) {
    $worksheet = '<Worksheet ss:Name="'.$worksheet_name.'">';
    $worksheet .= $this->create_table();
    $worksheet .= '<WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
    <ProtectObjects>False</ProtectObjects>
    <ProtectScenarios>False</ProtectScenarios>
    </WorksheetOptions>
    </Worksheet>';

    // Unset the counters and rows so you can generate another worksheet table
    $this->counters     = array();
    $this->row_array    = array();
    $this->rows         = '';

    // Add generated worksheet to the worksheets array
    $this->worksheets[] = $worksheet;
}

/**
* Create table
* @returns string
*/
function create_table() {
    // Create rows with the method that automaticaly sets counters for number of columns and rows
    $rows = $this->create_rows();

    // Table header
    $table = '<Table ss:ExpandedColumnCount="'.$this->counters['cols'].'" ss:ExpandedRowCount="'.$this->counters['rows'].'" x:FullColumns="1" x:FullRows="1">'.$this->nl;

    // Columns data (width mainly)
    for($i = 1; $i <= $this->counters['cols']; $i++) {
        $table .= '<Column ss:Index="'.$i.'" ss:Width="'.$this->column_width.'" />'.$this->nl;
    }
    // Insert all rows
    $table .= join('', $rows);

    // End table
    $table .= '</Table>'.$this->nl;
    return $table;
}

/**
* Add another row into the array
* @param mixed $array: array with row cells
* @param mixed $style: default null, if set, adds style to the array
*/
function add_row($array, $style = null) {
    if(!is_array($array)) {
        // Asume the delimiter is , or ;
        $array = str_replace(',', ';', $array);
        $array = explode(';', $array);
    }
    if(!is_null($style)) {
        $style_array = array('attach_style' => $style);
        $array = array_merge($array, $style_array);
    }

    $this->row_array[] = $array;
}

/**
* Create rows
* @returns array
*/
function create_rows() {
    $row_array = $this->row_array;
    if(!is_array($row_array)) return;

    $cnt = 0;
    $row_cell = array();
    foreach($row_array as $row_data) {
        $cnt++;

        // See if there are styles attached
        $style = null;
        if($row_data['attach_style']) {
            $style = $row_data['attach_style'];
            unset($row_data['attach_style']);
        }

        // Store the counter of rows
        $this->counters['rows'] = $cnt;

        $cells = '';
        $cell_cnt = 0;
        foreach($row_data as $key => $cell_data) {
            $cell_cnt++;

            $cells .= $this->nl.$this->prepare_cell($cell_data, $style);
        }

        // Store the number of cells in row
        $row_cell[$cnt][] = $cell_cnt;

        $this->rows[] = '<Row>'.$cells.$this->nl.'</Row>'.$this->nl;
    }

    // Find out max cells in all rows
    $max_cells = max($row_cell);
    $this->counters['cols'] = $max_cells[0];

    return $this->rows;
}

/**
* Prepare cell
* @param string $cell_data: string for a row cell
* @returns string
*/
function prepare_cell($cell_data, $style = null) {

    $str = str_replace("\t", " ", $cell_data);          // replace tabs with spaces
    $str = str_replace("\r\n", "\n", $str);             // replace windows-like new-lines with unix-like
    $str = str_replace('"',  '""', $str);               // escape quotes so we support multiline cells now
    preg_match('#\"\"#', $str) ? $str = '"'.$str.'"' : $str; // If there are double doublequotes, encapsulate str in doublequotes

    // Formating: bold
    if(!is_null($style)) {
        $style = ' ss:StyleID="'.$style.'"';
    } elseif (preg_match('/^\*([^\*]+)\*$/', $str, $out)) {
        $style  = ' ss:StyleID="bold"';
        $str    = $out[1];
    }

    if (preg_match('/\|([\d]+)$/', $str, $out)) {
        $merge  = ' ss:MergeAcross="'.$out[1].'"';
        $str    = str_replace($out[0], '', $str);
    }
    // Get type
    $type = preg_match('/^([\d]+)$/', $str) ? 'Number' : 'String';

    return '<Cell'.$style.$merge.'><Data ss:Type="'.$type.'">'.$str.'</Data></Cell>';
}

/**
* Create header
* @returns string
*/
function create_header() {
    if (is_array($this->styles)) {
        $styles = join('', $this->styles);
    }
    $header = <<<EOF
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:x="urn:schemas-microsoft-com:office:excel"
xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
xmlns:html="http://www.w3.org/TR/REC-html40">
<OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office">
    <DownloadComponents/>
    <LocationOfComponents HRef="file:///\\"/>
</OfficeDocumentSettings>
<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">
    <WindowHeight>12525</WindowHeight>
    <WindowWidth>15195</WindowWidth>
    <WindowTopX>480</WindowTopX>
    <WindowTopY>120</WindowTopY>
    <ActiveSheet>0</ActiveSheet>
    <ProtectStructure>False</ProtectStructure>
    <ProtectWindows>False</ProtectWindows>
</ExcelWorkbook>
<Styles>
    <Style ss:ID="Default" ss:Name="Normal">
        <Alignment ss:Vertical="Bottom"/>
        <Borders/>
        <Font/>
        <Interior/>
        <NumberFormat/>
        <Protection/>
    </Style>
    <Style ss:ID="bold">
        <Font ss:Bold="1" />
    </Style>
    $styles
</Styles>
 EOF;
    return $header;
}

/**
* Add style to the header
* @param string $style_id: id of the style the cells will reference to
* @param array $parameters: array with parameters
*/
function add_style($style_id, $parameters) {
    foreach($parameters as $param => $data) {
        switch($param) {
            case 'size':
                $font['ss:Size'] = $data;
            break;

            case 'font':
                $font['ss:FontName'] = $data;
            break;

            case 'color':
            case 'colour':
                $font['ss:Color'] = $data;
            break;

            case 'bgcolor':
                $interior['ss:Color'] = $data;
            break;

            case 'bold':
                $font['ss:Bold'] = $data;
            break;

            case 'italic':
                $font['ss:Italic'] = $data;
            break;

            case 'strike':
                $font['ss:StrikeThrough'] = $data;
            break;
        }
    }
    if(is_array($interior)) {
        foreach($interior as $param => $value) {
            $interiors .= ' '.$param.'="'.$value.'"';
        }
        $interior = '<Interior ss:Pattern="Solid"'.$interiors.' />'.$this->nl;
    }
    if(is_array($font)) {
        foreach($font as $param => $value) {
            $fonts .= ' '.$param.'="'.$value.'"';
        }
        $font = '<Font'.$fonts.' />'.$this->nl;
    }
    $this->styles[] = '
    <Style ss:ID="'.$style_id.'">
        '.$interior.$font.'
    </Style>';
}

/**
* Create footer
* @returns string
*/
function create_footer() {
    return '</Workbook>';
}

/**
* Output as download
*/
function download($filename) {

    if(!strlen($this->xml)) $this->generate();

    header("Cache-Control: public, must-revalidate");
    header("Pragma: no-cache");
    header("Content-Length: " .strlen($this->xml) );
    header("Content-Type: application/vnd.ms-excel");
    if(!$this->debug){
        header('Content-Disposition: attachment; filename="'.$filename.'"');
        header("Content-Transfer-Encoding: binary");
    } else {
        header("Content-Type: text/plain");
    }

    print $this->xml;
    exit;
} 
```

}

这是我对敏感信息进行审查的实现；

```
 $excel = new excel_xml();

$header_style = array(
    'bold'       => 1,
    'size'       => '14',
    'color'      => '#FFFFFF',
    'bgcolor'    => '#4F81BD'
);

$excel->add_style('header', $header_style);

$header_style2 = array(
    'bold'       => 1,
    'color'      => '#FFFFFF',
    'bgcolor'    => '#92d050'
);

$excel->add_style('green', $header_style2);

$header_style3 = array(
    'bold'       => 1,
    'color'      => '#FFFFFF',
    'bgcolor'    => '#c00000'
);

$excel->add_style('error', $header_style3);
$header_style4 = array(
    'bold'       => 1,
    'color'      => '#FFFFFF',
    'bgcolor'    => '#e46d0a'
);

$excel->add_style('orange', $header_style4);
$header_style5 = array(
    'bold'       => 1,
    'color'      => '#FFFFFF',
    'bgcolor'    => '#c00000'
);

$excel->add_style('red', $header_style5);

/**
* Add row and attach the style "header" to it
*/
$excel->add_row(array(
    'col1',
    'col2',
    'col3',
    'col4',
    'col5'
), 'header');

/**
* Add some rows, if you encapsulate the string inside asterisks,
* they will get bold using the predefined style "bold"
* If you append "|x" where x is a number, that cell will be
* merged with the x following cells
*/

$excel->add_row(array(
    $Queried_Info_From_DB1,
    $Queried_Info_From_DB2,
    $Queried_Info_From_DB3,
    $Queried_Info_From_DB4,
    $Queried_Info_From_DB5
), 'red');                  

if(mysql_num_rows($result) == 0){ 

    $excel->add_row(array(
        'You have no info to display!|4'
    ), 'error');
}

/**
* Tell the object to create the worksheet.
* The passed string is the name of the worksheet
*/
$excel->create_worksheet('Your info');

/**
* If you invoke the generate method, you will get the
* XML returned or...
*/
$xml = $excel->generate();

/**
* ... you can pass the whole thing for download with
* the passed string as the filename
*/
$excel->download('Export'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:57:43.267

您正在编写的文件是电子表格ML 格式，而不是 BIFF (.xls) 格式，因此 MS Excel 会抱怨这种差异。尝试使用 .xml 的文件扩展名保存它（因为那是您实际创建的）

# android - 在 facebook 上共享 android 应用程序内容

> ID：15184764
> 
> 赞同：0
> 
> 时间：2013-03-03T10:36:46.943
> 
> 标签：android, facebook

如何允许用户通过应用程序内的共享按钮共享他们保存在 android 应用程序中的数据（文本数据）在他们的 facebook 墙上。我不确定是否应该使用 facebook android sdk 设备或共享意图。如果有人可以向我提供有关此的一些信息或告诉我与此相关的任何教程，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:40:01.630

您不能使用 android 中的意图在 facebook 墙上分享文本。为此，您需要使用 facebook sdk。使用意图，您可以在电子邮件、Twitter 上分享文本，也可以在 Facebook 上分享照片。

我之前使用意图在 facebook 上发送文本，它之前没有工作。

根据 Facebook 的平台政策，我们无法使用 Intent.EXTRA_TEXT 预先填写分享对话框。它通常被认为是一个错误，但根据此处提交的错误报告以及此处，Facebook 明确提到情况并非如此（这不是错误）。

我发现我们无法为使用 Intents 上传的照片添加标题。我们能做到这一点的唯一方法是将**Facebook SDK**集成到您的应用程序中，然后带有文本标题的照片将在 Facebook 墙上共享。

要开始在 android 中使用 facebbok sdk：

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

# java - java更新错误

> ID：15184770
> 
> 赞同：0
> 
> 时间：2013-03-03T10:37:42.673
> 
> 标签：java, sql, ms-access, jdbc

```
 if (e.getSource() == btn_updt) {
        try {

            String str = "img";

            int max_avail;

            double price;

            Frame f = new Frame();

            Connection con;

            DriverManager
                    .registerDriver(new sun.jdbc.odbc.JdbcOdbcDriver());

            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

            con = DriverManager.getConnection("jdbc:odbc:dsnproj", "", "");

            Statement s = con.createStatement();

            // int mno=Integer.parseInt(txt_contcno.getText());

            price = Double.parseDouble(txt_price.getText());

            max_avail = Integer.parseInt(txt_qty_avl.getText());

            String qry_up = "update category set prod_name='"
                    + txt_pro_nm.getText() + "',desc='"
                    + txt_pro_desc.getText() + "',photo='" + str
                    + "',max_quan_avail=" + max_avail + ",cur_price="
                    + price + ",per='" + ch_weight.getSelectedItem()
                    + "' where   p_name='" + ch_pro_nm.getSelectedItem()
                    + "'";

            System.out.println(qry_up);

            s.execute(qry_up);

            System.out.println("updated");

            // JOptionPane.showMessageDialog(f,
            // "Updates Successfully : ","A plain message",JOptionPane.PLAIN_MESSAGE);
        } catch (Exception ae) {
            System.out.println(ae.getLocalizedMessage());
        }

        return result;
    } 
```

我得到了错误：

```
update category set prod_name='jjhhj',desc='jjjh',photo='img',max_quan_avail=88,cur_price=99.0,per='piece' where p_name='brush' [Microsoft][ODBC Microsoft Access Driver] Syntax error in UPDATE statement. 
```

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:51:10.090

由于[DESC](http://www.techonthenet.com/sql/order_by.php)是关键字，因此必须用`[]`.

将此用于您的查询：

```
 String qry_up = "update category set prod_name='"
                    + txt_pro_nm.getText() + "',[desc]='"
                    + txt_pro_desc.getText() + "',photo='" + str
                    + "',max_quan_avail=" + max_avail + ",cur_price="
                    + price + ",per='" + ch_weight.getSelectedItem()
                    + "' where   p_name='" + ch_pro_nm.getSelectedItem()
                    + "'"; 
```

# java - java.lang.NoClassDefFoundError: com/rexsl/test/AssertionPolicy

> ID：15184777
> 
> 赞同：1
> 
> 时间：2013-03-03T10:39:08.223
> 
> 标签：java

我正在尝试使用以下代码验证简单的 HTML 文件：

```
public static void main(String[] args)
{
   String xhtml = "<html><body><p>Hello, world!</p></body></html>";
   ValidationResponse response = new ValidatorBuilder().html().validate(xhtml);
   System.out.println(response.valid());
} 
```

结果：

> 线程“main”中的异常 java.lang.NoClassDefFoundError: com/rexsl/test/AssertionPolicy at com.rexsl.w3c.ValidatorBuilder.(ValidatorBuilder.java:64) at HTMLValidator.main(HTMLValidator.java:10)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:55:03.067

*当JVM*在*运行时*找不到特定的*类*时会出现此异常。

 *确保：

*   *类*在*Java Classpath*中可用。
*   如果您使用*JAR*命令运行程序，请确保在*Class* *-Path 属性*中定义了Class 。*

# php - php数组到单选按钮

> ID：15184781
> 
> 赞同：0
> 
> 时间：2013-03-03T10:39:39.650
> 
> 标签：php, arrays, radio-button, dynamic-arrays

我想创建一个标有我的数组值的单选按钮。我所能做的就是把它们全部打印出来。除了索引之外，我还能用什么来访问我的数组（动态数组），因为我不知道我的语言目录中文件的顺序和数量？谢谢！

输入

```
english.xml,mandarin.xml,french.xml 
```

这些文件以语言保存，我将在单选按钮表单中使用文件名作为标签。

```
$files = glob("languages/*.xml");

foreach($files as $file){

   $file = substr($file, 10); //removes "languages/"
   $file = substr_replace($file, "", -4); //removes ".xml"
   ?>

   <p><?=$file?></p> // prints out the filename
   <?}?> 
```

输出

```
<form action="">
<input type="radio" name="lang" value="english">english
<input type="radio" name="lang" value="mandarin">mandarin
<input type="radio" name="lang" value="french">french
</form> 
```

对不起我的英语不好，我希望我解释得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:12:06.293

使用`[]`您可以将元素添加到数组中。该顺序将是您放置它们的顺序，这与`$files`您正在循环的数组相同。

[pathinfo](http://php.net/manual/en/function.pathinfo.php)函数可以获取文件的名称（没有目录或扩展名）。

```
function getLangs() {
    $langs = array();
    $files = glob("languages/*.xml");

    foreach($files as $file) {
        $lang = pathinfo($file, PATHINFO_FILENAME);
        $langs[] = $lang;
    }

    return $langs;
} 
```

现在使用打印它

```
$langs = getLangs();

foreach ($langs as $lang) {
   echo "<label><input type='radio' name='lang' value='$lang' /> $lang</label>";
} 
```

而不是使用`echo`你可以建立一个模板，如

```
<form action=''>
<?php foreach ($langs as $lang): ?>
   <label><input type="radio" name="lang" value="<?= $lang ?> /> value="<?= $lang ?></label>
<?php endforeach; ?>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:43:56.097

您也可以使用 foreach 访问数组的键。像这样：

```
foreach($files as $key => $value) {
    //....
} 
```

# jakarta-ee - index.jsp 文件是做什么用的？

> ID：15184788
> 
> 赞同：1
> 
> 时间：2013-03-03T10:40:25.123
> 
> 标签：jakarta-ee

抱歉，如果这是一个非常基本的问题，但文件到底是什么`index.jsp`？在 Web 应用程序中还有哪些重要的 jsp 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:45:01.327

这是一个名为`index`. AFAIK，默认情况下，webapp 的欢迎文件包括 index.jsp。这意味着如果您访问 URL

```
http://som.host.com/webapp/foo/bar/ 
```

`/foo/bar/`将执行位于 webapp 目录中的 index.jsp 。

# mysql - 如何在 MySql 中编写连接查询？

> ID：15184792
> 
> 赞同：0
> 
> 时间：2013-03-03T10:40:51.157
> 
> 标签：mysql, sql, join

我有一个具有以下架构的数据库：

**编号：**整数

**名称：** varchar

**电子邮件：** varchar

**facebook：** varchar（可能的值：Y 或 N）

**twitter：** varchar（可能的值：Y 或 N）

**时间：**时间戳（创建时间戳）

我们可以为同一个人设置多行，其中 facebook、twitter 和时间可能/会有所不同。我想在我最终想要以下内容的地方进行查询：

> **姓名**
> 
> **电子邮件**
> 
> **total_count**（电子邮件的总行数）
> 
> **total_facebook_yes**（电子邮件的 Facebook YES 总数）
> 
> **total_twitter_yes**（电子邮件的 Twitter 是的总数）
> 
> **last_time**（电子邮件最新行的时间戳）

我一直在写一个查询。谁能指导我。请帮忙。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:45:44.197

您不需要连接查询，您需要一个具有计数和最大功能的组。

就像是：

```
select
    name,
    email,
    count(name) as total_count,
    sum(facebook = 'y') as total_facebook_yes,
    sum(case when twitter = 'y' then 1 else 0 end) as total_twitter_yes,
    max(time) as last_time
from `table_name`
group by name, email 
```

由于对架构的了解有限，我建议您考虑将表拆分为具有关系的多个表。从 wiki [3th-normal-form](http://en.wikipedia.org/wiki/Third_normal_form)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:54:09.057

查看预期的结果，您希望 JOIN 发生在哪里？尝试这个。Mysql 在布尔包装方面是宽容的，

```
SELECT NAME, EMAIL, COUNT(FACEBOOK='yes') as FBTOTAL_Count, COUNT(Twitter='yes') as TOTALTW_Count
FROM YOURTABLE
GROUP BY FACEBOOK, TWITTER, NAME, EMAIL 
```

# java - 无法开始活动得到错误

> ID：15184796
> 
> 赞同：0
> 
> 时间：2013-03-03T10:41:07.390
> 
> 标签：java, android

活动无法启动我收到错误日志（红线）：

```
03-03 12:29:50.492: E/AndroidRuntime(24207): FATAL EXCEPTION: main
03-03 12:29:50.492: E/AndroidRuntime(24207): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.makkuzu.hello/com.makkuzu.hello.Picture}: java.lang.ArrayIndexOutOfBoundsException
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.os.Looper.loop(Looper.java:130)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.ActivityThread.main(ActivityThread.java:3693)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at java.lang.reflect.Method.invokeNative(Native Method)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at java.lang.reflect.Method.invoke(Method.java:507)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at dalvik.system.NativeStart.main(Native Method)
03-03 12:29:50.492: E/AndroidRuntime(24207): Caused by: java.lang.ArrayIndexOutOfBoundsException
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.graphics.Bitmap.checkPixelsAccess(Bitmap.java:838)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.graphics.Bitmap.getPixels(Bitmap.java:780)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at com.makkuzu.hello.Picture.onCreate(Picture.java:188)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-03 12:29:50.492: E/AndroidRuntime(24207):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-03 12:29:50.492: E/AndroidRuntime(24207):    ... 11 more 
```

并且可能出现的错误代码是：

```
 colorbox = BitmapFactory.decodeResource(getResources(),
    R.drawable.color_picker);

    b = BitmapFactory.decodeResource(getResources(), R.drawable.picker);
    orgWidth2 = colorbox.getWidth();
    orgHeight2 = colorbox.getHeight();

    orgWidth = oldBitmap.getWidth();
    orgHeight = oldBitmap.getHeight();

    myColors = Bitmap.createBitmap(orgWidth2, orgHeight2,
            Bitmap.Config.ARGB_8888);
    newBitmap  = Bitmap.createBitmap(
            orgWidth, orgHeight, Bitmap.Config.ARGB_8888);
    pixels=pixels1=pixels2=pixels3=pixels4 = new int[orgWidth * orgHeight];
    ClrbxPx = new int[orgWidth * orgHeight];

    oldBitmap.getPixels(pixels, 0, orgWidth, 0, 0, orgWidth, orgHeight);
    newBitmap.setPixels(pixels, 0, orgWidth, 0, 0, orgWidth, orgHeight);

    colorbox.getPixels(ClrbxPx, 0, orgWidth2, 0, 0, orgWidth2, orgHeight2);
    myColors.setPixels(ClrbxPx, 0, orgWidth2, 0, 0, orgWidth2, orgHeight2);

    myFrame = BitmapFactory
            .decodeResource(getResources(), R.drawable.frame);
    canvas = new Canvas(newBitmap);
    canvas.drawBitmap(myFrame, 1, 1, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:57:31.100

您应该像这样更正 ClrbxPx：

```
 ClrbxPx = new int[orgWidth2 * orgHeight2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:01:57.190

logcat 中的 2 条相关行是：

```
03-03 12:29:50.492: E/AndroidRuntime(24207): Caused by: java.lang.ArrayIndexOutOfBoundsException
03-03 12:29:50.492: E/AndroidRuntime(24207):    at com.makkuzu.hello.Picture.onCreate(Picture.java:188) 
```

这基本上意味着您的数组之一不正确，并且您正在查看索引之外。

我可以在您的代码中找到的唯一数组是：

```
 pixels=pixels1=pixels2=pixels3=pixels4 = new int[orgWidth * orgHeight];
    ClrbxPx = new int[orgWidth * orgHeight]; 
```

请检查您的 Picture.Java 文件的第 188 行并修复代码

# java - 无法读取 iText 生成的 pdf

> ID：15184798
> 
> 赞同：0
> 
> 时间：2013-03-03T10:41:23.350
> 
> 标签：java, pdf, servlets, itext

这是我生成pdf的代码：

```
public String generateList( Group group, List<GroupTerm> terms, List<Child> children, int begin, int finish )
{
    String pathForList = "C:\\...\\List.pdf";

    File filePath = new File( pathForList );
    filePath.delete();

    try
    {

        Document document = new Document( PageSize.A4.rotate() );

        PdfWriter.getInstance( document, new FileOutputStream( pathForList ) );

        document.open();

        // CONTENT

        BaseFont helvetica = BaseFont.createFont( BaseFont.HELVETICA, BaseFont.CP1250, BaseFont.EMBEDDED );
        Font helvetica9 = new Font( helvetica, 9 );
        Font helvetica9bold = new Font( helvetica, 9, Font.BOLD );

        Paragraph paragraph1 =
            new Paragraph( "Godziny: " + group.getStartHours() + "-" + group.getFinishHours() + "  Miejsce: " + group.getPlace()
                + "  Grupa wiekowa: " + group.getAgeGroupName() + "  Poziom: " + group.getLevel() + "  Instruktor: " + group.getInstructor(),
                           helvetica9bold );

        paragraph1.setAlignment( Element.ALIGN_LEFT );

        document.add( paragraph1 );
        document.add( new Paragraph( " " ) ); 

        PdfPTable table = new PdfPTable( 12 ); // 12 columns.

        PdfPCell cell01 = new PdfPCell( new Paragraph( "Imię", helvetica9 ) );
        PdfPCell cell02 = new PdfPCell( new Paragraph( "Nazwisko", helvetica9 ) );
        table.addCell( cell01 );
        table.addCell( cell02 );

        for ( int i = begin; i < finish; i++ 
        {
            GroupTerm term = new GroupTerm();

            int iterator = -1;
            int a = i + 1;

            while ( term.getTermID() != a )
            {
                iterator++;
                term = terms.get( iterator );
            }

            table.addCell( new PdfPCell( new Paragraph( conv.dateFromCalToString( term.getTerm() ), helvetica9 ) ) );
        }

        for ( int j = 0; j < children.size(); j++ )
        {
            table.addCell( new PdfPCell( new Paragraph( children.get( j ).getName() ) ) );
            table.addCell( new PdfPCell( new Paragraph( children.get( j ).getSurname() ) ) );
            for ( int k = 0; k < 10; k++ )
            {
                table.addCell( new PdfPCell( new Paragraph( "" ) ) );
            }
        }

        document.add( table );

        document.close();
    }
    catch ( Exception e )
    {

    }

    return pathForList;
} 
```

问题是这样的：我为某个数据生成pdf，它创建了List.pdf，做得很好。但是，然后我尝试为另一组数据再生成一个，生成的文件大小为 0kb，打开时显示消息“Adobe Reader 无法打开”List.pdf”，因为它不是受支持的文件类型或因为文件已损坏”。

PDF 在我的网络应用程序中生成并通过 servlet 作为响应发送，所以我通过浏览器打开它。

编辑：我的 servlet 代码：

```
protected void doGet( HttpServletRequest request, HttpServletResponse response )
    throws ServletException, IOException
{
    ... // Getting data here

    String path = pdf.generateList( group, terms, children, begin, finish );

    // download

    response.setContentType( "application/octet-stream" );
    response.setHeader( "Content-Disposition", "attachment;filename=List.pdf" );

    ServletOutputStream out = null;

    try
    {
        File file = new File( path );
        FileInputStream fileIn = new FileInputStream( file );
        out = response.getOutputStream();

        byte[] outputByte = new byte[4096];
        // copy binary contect to output stream
        while ( fileIn.read( outputByte, 0, 4096 ) != -1 )
        {
            out.write( outputByte, 0, 4096 );
        }
        fileIn.close();
        out.flush();
        out.close();

        int i = 0;
    }
    catch ( Exception e )
    {
        if ( out != null )
        {
            out.close();
        }
    }
    finally
    {

    }

    response.sendRedirect( "calendar.jsp" );
} 
```

编辑：我还使用 iText 在这个应用程序中生成发票，它工作正常。无论我使用什么数据，所有 pdf 文件都是正确的。

怎么了？我使用的是相同的方法，只是数据集不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:03:47.730

尝试将您的内部循环替换为：

```
int got;
while ( (got = fileIn.read( outputByte, 0, 4096 )) > 0) {
    out.write( outputByte, 0, got );
} 
```

您的原始循环始终在文件末尾写入 4096 字节，但文件的最后一个块可能比这更短，因此您的原始循环在 HTTP 响应的末尾写入垃圾，将其填充为 4096 字节的倍数.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:23:41.507

问题解决了。它是数据本身。方法无法正确获取数据，文件已损坏。我改变了发送数据的方式，它奏效了！

# c++ - 如何删除使用 SWIG 生成的 Python 包装器中的堆对象？

> ID：15184799
> 
> 赞同：4
> 
> 时间：2013-03-03T10:41:25.340
> 
> 标签：c++, python, swig

我正在开发一个 Python 模块和一个 C++ 库。在 C++ 代码中，我有一个返回堆对象的函数，如下所示。

```
MyClass* func()
{
  MyClass* myclass = new MyClass();
  return myclass;
} 
```

但是当我在 Python 端使用这个函数时，我无法删除返回的对象。

```
myclass = func()
del myclass # still remains in memory 
```

谁能告诉我如何在 Python 代码中删除返回的对象，好吗？

我可以将返回值的类型从 MyClass* 更改为 MyClass，这样我就可以避免这种内存泄漏。但我不想接触 C++ 代码，因为 C++ 库已经在其他地方使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T15:02:22.867

请参阅SWIG 文档第[11.2](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Customization_ownership)`%newobject`节中的和`%typemap(newfree)`指令。

引用自文档：

> 一些应用程序中的一个常见问题是管理对象的正确所有权。例如，考虑这样的函数：

```
Foo *blah() {
   Foo *f = new Foo();
   return f;
} 
```

> 如果包装函数 blah()，SWIG 不知道返回值是新分配的对象。结果，生成的扩展模块可能会产生内存泄漏（SWIG 是保守的并且永远不会删除对象，除非它确定返回的对象是新创建的）。
> 
> 要解决此问题，您可以使用 %newobject 指令为代码生成器提供额外的提示。例如：

```
%newobject blah;
Foo *blah(); 
```

> %newobject 的工作方式与 %rename 和 %exception 完全相同。换句话说，您可以像以前一样将它附加到类成员和参数化声明。例如：

```
%newobject ::blah();                   // Only applies to global blah
%newobject Object::blah(int,double);   // Only blah(int,double) in Object
%newobject *::copy;                    // Copy method in all classes
... 
```

> 当提供 %newobject 时，许多语言模块将安排获得返回值的所有权。这允许在不再使用时自动对值进行垃圾收集。但是，这完全取决于目标语言（语言模块也可以选择忽略 %newobject 指令）。
> 
> 与 %newobject 密切相关的是一个特殊的类型映射。“newfree”类型映射可用于释放新分配的返回值。它仅适用于已应用 %newobject 的方法，并且通常用于清理字符串结果。例如：

```
%typemap(newfree) char * "free($1);";
...
%newobject strdup;
...
char *strdup(const char *s); 
```

> 在这种情况下，函数的结果是目标语言的字符串。由于此字符串是原始结果的副本，因此不再需要 strdup() 返回的数据。示例中的“newfree”类型映射只是释放此内存。

# c# - 反编译的 DLL - 帮助判断它是 C# 还是 VB.NET 的线索？

> ID：15184802
> 
> 赞同：4
> 
> 时间：2013-03-03T10:41:38.400
> 
> 标签：c#, .net, vb.net, decompiler

当使用 DotPeek 之类的东西来反编译 DLL 时，我如何判断它最初是用 VB.Net 还是 C# 编码的？

我认为没有简单的方法可以分辨，但是在某些反编译的代码中可能存在明显的迹象（即线索）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:59:04.757

您可以查找对该`Microsoft.VisualBasic`库的引用。如果存在这种情况，则代码很可能是使用 VB 编写的。该库有时也包含在 C# 项目中，但这并不常见。如果没有参考，那肯定不是 VB。

（嗯，可以使用命令行编译器和特殊的编译器开关在没有库的*情况*下编译 VB，但这种情况极为罕见。）

您还可以检查该`VisualBasic`库的使用频率。在常规的 VB 程序中，它会经常使用，但在 C# 程序中，它通常只用于某些在其他库中不可用的特定任务，例如`DateDiff`调用。

任何 VB 特定命令，例如`CInt`或`Mid`将显示为对`VisualBasic`库的调用，甚至`=`在字符串上使用的运算符都将使用该库。此代码（其中`a`和`b`是字符串）：

```
If a = b Then 
```

实际上会进行库调用来进行比较，并在反编译为 C# 时显示如下：

```
if (Operators.CompareString(a, b, false) == 0) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T10:48:16.277

一种可能的途径可能是寻找命名索引器；在 C# 中是不允许的，即你只能在 c# 中使用以下内容

```
object this [int index] {get;set;} 
```

但是在托管的 C++ 和 VB.Net 中（我相信，如果我错了会删除它）看起来你可以命名索引器。

所以至少你可以把它缩小到它是否是 C#

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T10:52:10.300

为了完整起见，我将发布我知道的线索：

如果反编译为 C# 并发现以 $static$ 开头的无效成员名称：

```
private short $STATIC$Report_Print$20211C1280B1$nHeight; 
```

...这意味着它可能是 VB.Net，因为编译器使用它们来实现“静态”VB 关键字。

Hans Passant 和 Jon Skeet 在这里解释得更好：[https ://stackoverflow.com/a/7311567/22194](https://stackoverflow.com/a/7311567/22194) [https://stackoverflow.com/a/7310497/22194](https://stackoverflow.com/a/7310497/22194)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T15:10:07.877

我很惊讶`My`还没有人提到命名空间。很难让 VB.NET 编译器在输出中不包含它的一些帮助类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T10:42:40.097

> 如何判断它最初是用 VB.Net 还是 C# 编码的？

你不能以一种可靠的方式说出来。当然，使用 VB.NET 编译器编译的 IL 将包含对某些 VB 特定程序集（例如`Microsoft.VisualBasic`）的引用，但没有什么可以阻止 C# 项目也引用和使用这些程序集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T10:57:25.200

为了建立在其他答案中引入的想法，程序集不会报告使用什么语言编写它，但您可能会寻找不[符合 cls 的代码](http://msdn.microsoft.com/en-us/library/bhc3fa7f.aspx)

符合 CLS 意味着代码是针对所有符合 CLS 的语言都可用的功能编写的。这意味着没有公共的嵌套类或命名的索引器，并且可能还有一些 IL 可能支持但任何特定语言可能不支持的其他特性。

如果是一个选项，您可能只需要查看 PDB。

# java - 为什么要在 Scala 或 Java 中使用盒装类型而不是 Java 或 C 中的原始类型？

> ID：15184803
> 
> 赞同：-3
> 
> 时间：2013-03-03T10:41:53.230
> 
> 标签：java, c, performance, scala

我刚刚对 Scala、Java 和 C 进行了比较。以下是我运行的代码和得到的结果：

**Java（原始数据类型）：**

```
 class test {
        public static void main(String args[]) {
            long t1=System.nanoTime();
            for (int i=0; i<1000000000; i++) {

            }
            long t2 = System.nanoTime();

            System.out.println((t2-t1));
        }
    } 
```

输出：1181601584
，即 1.2 秒

**C：**

```
 #include <stdio.h>
    #include <time.h>

    int main() {
      clock_t t1=clock();
      for (int i=0; i<1000000000; i++) {

      }
      clock_t t2= clock();

      printf("%u",(t2-t1)/(double)CLOCKS_PER_SEC);

      return 0;
    } 
```

输出：2233382994
，即 2.2 秒

**斯卡拉：**

```
 object test {
      def main(args: Array[String]) {
        val nos = 1 to 1000000000
        val t1 = System.nanoTime
        for (i<-nos) {

        }
        val t2 = System.nanoTime

        println(t2-t1)
      }
    } 
```

输出：12392282270
，即 12.4 秒

**Java（盒装）：**

```
 class test {
        public static void main(String args[]) {
            Long t1=System.nanoTime();
            for (Integer i=0; i<1000000000; i++) {

            }
            Long t2 = System.nanoTime();

            System.out.println((t2-t1));
        }
    } 
```

输出：20756681957
，即 20.8 秒

现在，我的问题是，如果原始的东西比盒装的对应物更快，我们为什么要选择使用面向对象的语言？我同意面向对象编写大型项目要容易得多，但如果效率和速度是我们所寻找的（就像在服务器和超级计算机中一样，而且我认为更快的软件对家庭用户来说更好） ，为什么世界上会有人尝试用 Scala 编写他的代码？一个更深层次的问题是，为什么会出现这些慢速语言？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T10:56:33.127

选择语言的主要因素并不总是（甚至极少）性能。你会在这两者之间选择哪一个：

1.  语言 A 允许在 30 天内创建一个程序。每次用户交互的响应时间为 2 毫秒
2.  语言 B 允许在 2 天内创建相同的程序。但是每次用户交互的响应时间是 20 毫秒。

你真的认为最终用户关心响应时间是 2 毫秒还是 20 毫秒？这些时间太小了，无法区分。但是与 2 天的开发相比，30 天的开发是巨大的。每天1000美元，这有很大的不同。

此外，您的基准测试存在缺陷。

而且，您不能使用 OOP 来使用 Integer 而不是 int。您使用 OOP 能够以更直观的方式操作由多个字段和方法组成的复杂对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:15:46.357

几乎不是一个有用的基准。很有可能您的 C 和 Java 编译器会立即优化空循环，而在 Scala 中却不是那么容易，因为循环的 Scala 版本涉及方法调用，必须首先检查效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:57:52.913

因为有时，通常，大多数时候，紧循环的速度是您最不关心的问题。

# java - 在 MULE 中添加一个 java 类作为 bean

> ID：15184806
> 
> 赞同：1
> 
> 时间：2013-03-03T10:42:12.000
> 
> 标签：java, wsdl, mule, flow, payload

在 MULE 3.3.0 CE 中，我编写了一个带有构造函数和两个方法的简单 java 类，我将它们复制到下面：

```
 public class Book {
        private String title;

        public Book(String theTitle) {
            // TODO Auto-generated constructor stub
            title = theTitle;
        }

        public String getTitle(){
            return title;
        }

        public String displayAuthorName(String authorName) {
            return authorName;
        }
    } 
```

现在我想将我的 java 类添加为我的 .mflow(Configuration XML) 中的一个 bean，然后将有效负载传递给 java 类方法。

我该怎么做这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:06:41.987

为了完成这项工作，您需要：

1.  将您的组件定义为 spring bean。
2.  定义组件的入口点。
3.  在流程中使用您的组件。

这是一个例子：

```
package com.mypackage.test;

import org.mule.api.annotations.param.Payload;

    public class MyComponent {

    private String myProperty;

    public String getMyProperty() {
        return myProperty;
    }

    public void setMyProperty(String myProperty) {
        this.myProperty = myProperty;
    }

    public String doProcess(@Payload String payload) {
        //do something interesting
        return "You said: " + payload;
    }

} 
```

定义入口点的一种方法是使用@Payload 注解。

然后是示例流程：

```
<spring:bean id="myBean" class="com.mypackage.test.MyComponent">
    <spring:property name="myProperty" value="Some Value" />
</spring:bean>

<flow name="componentFlow">
    <http:inbound-endpoint address="http://localhost:8082/test" />
    <component>
        <spring-object bean="myBean" />
    </component>
    <set-property propertyName="Content-Type" value="text/plain" doc:name="Property" />
</flow> 
```

# jpa - JPA 批量插入（如果不存在）

> ID：15184809
> 
> 赞同：3
> 
> 时间：2013-03-03T10:42:32.343
> 
> 标签：jpa, persistent

我有 3 个实体 - Player、Hand 和 PlayerHandStats。前两个是常规表，ID 为 PK。另一方面，PlayerHandStats 有一个复合 PK（player_id，hand_id）。它们一起形成了某种“包”，这就是我试图将它们保持在一个块中的原因。ParsedHand 只是一个捆绑实体的类 - 它包含 1 Hand、2..10 Player 和 2..10 PlayerHandStats。下面是我目前的幼稚方法，它并没有真正起作用。

```
public static void persist(ParsedHand parsedHand) {
    EntityManager em = emf.createEntityManager();
    em.getTransaction().begin();

    em.persist(parsedHand.getHand());

    Collection<Player> players = parsedHand.getPlayers().values();
    for (Player player : players) {
        em.persist(player);
    }

    Collection<PlayerHandStats> stats = parsedHand.getStats().values();
    for (PlayerHandStats phs : stats) {
        em.persist(stats);
    }

    em.getTransaction().commit();
    em.close();
} 
```

问题是，特定的 Player 实体可能已经存在于 DB 中——在这种情况下，整个过程终止。我想继续它，不对实体执行任何合并或更新，而是检索它的 ID（因为在应用程序级别它没有分配 ID）。

快速示例（**注意**：列 NAME 和 POKER_SITE 形成一个唯一约束）：

```
ID  |NAME        |POKER_SITE
----+------------+------------
0   |neverlimp92 |PokerStars
1   |player01    |PokerStars 
```

现在，假设我在应用程序级别有一个 Player 实体，其中包含字段（null、'neverlimp92'、'PokerStars'）。显然，它会返回java.sql.SQLIntegrityConstraintViolationException，整个过程终止。我怎样才能避免这种情况？我应该覆盖 hashCode() 和 equals() 方法，并执行

```
for (Player player : playes) {
    if (!em.contains(player)) {
        em.persist(player);
    }
} 
```

我不确定这是否是明智之举，考虑到可能有 10k 行，甚至 100k 行。

而且，如果实体确实存在，那么在应用程序级别检索其 ID 并将其分配给现有实例的正确方法是什么？

我对 JPA 的经验很少，非常感谢任何形式的帮助，或者指出我正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:04:36.147

如果玩家可能是现有玩家，那么对于每个玩家，您需要在数据库中查询具有该名称和站点的玩家，如果存在则使用它，如果不存在则保留它。

这取决于他们是这样的球员的可能性有多大。如果不太可能，那么您可以将其持久化，如果提交失败，则使用第二种算法重试。

一般来说，如果你的播放器有它的 id 会更好，那么你就会知道它是新的还是现有的。

# rethinkdb - 在 ReQL/Rethink 中使用子查询过滤掉结果？

> ID：15184812
> 
> 赞同：0
> 
> 时间：2013-03-03T10:42:40.693
> 
> 标签：rethinkdb, in-subquery, nosql

我正在尝试更多地了解 RethinkDB 及其子查询功能。我想知道在 ReThinkDB 中是否可以进行以下操作：

```
// example of "post" document:
{ id: .., allow: [], disallow: [some_label_id, other_label_id], ... }

// example of "label" document:
{ id: .., user_id: .., name: 'my-label' }

var MY_USER_ID = "1b4-4c6-7d9"

// Query in psuedo-code:
IN database test
IN table posts   
FILTER out any "posts" where the "disallow" array
  contains a value found in this sub-query:
   IN table labels  
   FILTER id .eq disallow[index] AND user_id .eq MY_USER_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:08:14.430

RethinkDB 目前没有*intersect*和*contains*命令。它们将在暂定于 4 月 15 日发布的 1.4 版本中。

# php - 虽然循环只为每个客户端创建一个下拉框（PHP/MySQL）

> ID：15184814
> 
> 赞同：0
> 
> 时间：2013-03-03T10:43:09.717
> 
> 标签：php, mysql, drop-down-menu, while-loop

我正在尝试使用两个查询来为每个医生设置多个下拉菜单。到目前为止，这是有效的，但不幸的是它只拉动了该项目。

我想在下拉列表中提供所有“专业知识”（以及作为选项值的专业知识 ID）。

我已经设置了下面的 while 循环，但是我没有成功为每个 Client_ID 生成下拉列表。

第一个查询（如下）从区域中提取客户 ID

```
$client_id = $_GET['doc_id'];
$physician_id_expertise = $client_id;

$doctor_query = 'SELECT * ';
$doctor_query.= 'FROM `primarycare_expertise` ';
$doctor_query.= 'WHERE `physician_id`=' . $client_id . ' ';
$doctor_result = mysql_unbuffered_query( $doctor_query ); 
```

while 循环包含第二个查询，它设置下拉列表（拉入所有“专业知识”值）。

```
while ($doctor_row = mysql_fetch_array( $doctor_result ))
{
    echo "<select name='doc_id_expertise_" . $doctor_row['pe_id'] . "' id='doc_id_expertise_" . $doctor_row['pe_id'] . "'>";

    $expert_query = 'SELECT * FROM `expertise` ';
    $expert_result = mysql_unbuffered_query( $expert_query );

    while ($expert_row = mysql_fetch_array( $expert_result )){
        if($doctor_row['expertise_id'] == $expert_row['expertise_id'])
        {
            $selected = "selected";
        } else {
            $selected = "";
        }
        echo "<option $selected value=" . $expert_row['expertise_id'] . ">" . $expert_row['expertise'] . "</option>";
    }

    echo "</select>";
    echo "<br />";
} 
```

如果你们中的任何人可以帮助我，我将非常感激！感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:48:14.150

您在遍历先前查询的无缓冲结果时发送新查询。这不起作用。尝试使用`mysql_query`而不是`mysql_unbuffered_query`像这样的第一个查询：

```
$doctor_result = mysql_query (
    "SELECT * FROM primarycare_expertise WHERE physician_id='$client_id'"); 
```

对于后续查询，您仍然可以使用`mysql_unbuffered_query`，因为它们不重叠。

有关详细信息，请参阅以下[页面](http://php.net/manual/en/mysqlinfo.concepts.buffering.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:50:18.220

顺便说一句，不推荐使用 mysql 包。考虑改为采用 mysqli 扩展。

[http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

# java - 如何使用 UUID 生成唯一的正 Long

> ID：15184820
> 
> 赞同：44
> 
> 时间：2013-03-03T10:43:45.073
> 
> 标签：java, uuid

我需要为我的数据库主键列生成唯一的 Long id。

我以为我可以使用**UUID.randomUUID().getMostSignificantBits()**但有时它会产生一些负长，这对我来说也是个问题。

是否可以只从 UUID 生成正长？会有数十亿个条目，所以我希望每个生成的密钥都必须是唯一的。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-01-12T12:33:47.170

```
UUID.randomUUID().getMostSignificantBits() & Long.MAX_VALUE 
```

这样做的原因是，当你用 1 按位 & 时，它允许相同的数字通过，当你用 0 按位 & 时，它会阻止它，结果为 0。现在，二进制中的 Long.MAX_Value 是

```
0111111111111111111111111111111111111111111111111111111111111111 
```

这是 0 后跟 63 个 1（总共是 64 位，在 java 中很长）

因此，当您使用上述数字按位 & 一个数字 X 时，您将得到相同的数字 X，除了最左边的位现在变成零。这意味着您只更改了该数字的符号而不是值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-19T15:57:19.380

正如其他人所写的那样， long 没有足够的空间容纳唯一的数字。但在许多情况下，对于特定用途，一个数字可能是独一无二的。例如，具有纳秒精度的时间戳通常就足够了。为了得到它，将当前毫秒向左移动 20 位以分配纳秒空间，然后用纳秒覆盖它：

```
(System.currentTimeMillis() << 20) | (System.nanoTime() & ~9223372036854251520L); 
```

**nano & ~9223372036854251520L**部分采用当前的纳秒并将前 44 个字节设置为 0，只留下代表纳秒到一毫秒的右侧 20 位（999999 纳秒）它与以下内容相同：

```
nanoseconds & ~1111111111111111111111111111111111111111111100000000000000000000 
```

旁注：不应使用纳秒来表示当前时间，因为它们的起点在时间上不固定，并且在达到最大值时会被回收。

您可以使用任何其他位操作。通常最好考虑当前时间和其他一些东西，例如当前线程 id、进程 id、ip。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-03T12:00:37.573

看看[http://commons.apache.org/sandbox/commons-id//index.html](http://commons.apache.org/sandbox/commons-id//index.html) 它有一个 LongGenerator 可以给你你所需要的。

此外，如果您使用的是 Hibernate，那么您可以要求它为您生成 ID（它有多种算法可供您选择），如果没有，您可以查看它们的实现，例如[http://grepcode.com/文件/repo1.maven.org/maven2/hibernate/hibernate/2.1.8/net/sf/hibernate/id/TableHiLoGenerator.java#TableHiLoGenerator](http://grepcode.com/file/repo1.maven.org/maven2/hibernate/hibernate/2.1.8/net/sf/hibernate/id/TableHiLoGenerator.java#TableHiLoGenerator)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-03T11:37:12.740

我刚刚遇到了这个解决方案。我暂时试图理解解决方案。它说的是 twitter 雪花的 Java 实现。基于 twitter 雪花 ID 生成算法的 64 位顺序 ID 生成器。

[https://github.com/Predictor/javasnowflake](https://github.com/Predictor/javasnowflake)

欢迎任何建议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-07T10:59:37.127

此代码的灵感来自@Daniel Nuriyev 的回答。但是，当在同一毫秒内发生碰撞时，使用计数器（或我所见过的鉴别器）而不是使用纳米时间：

```
private static long previousTimeMillis = System.currentTimeMillis();
private static long counter = 0L;

public static synchronized long nextID() {
    long currentTimeMillis = System.currentTimeMillis();
    counter = (currentTimeMillis == previousTimeMillis) ? (counter + 1L) & 1048575L : 0L;
    previousTimeMillis = currentTimeMillis;
    long timeComponent = (currentTimeMillis & 8796093022207L) << 20;
    return timeComponent | counter;
} 
```

此方法通过将毫秒时间戳组件与计数器组件打包在一起来生成半唯一 ID。该算法允许在冲突开始发生之前的同一毫秒内生成大约一百万个（或准确地说是 1048575 个）唯一 ID。唯一 ID 一直生成到 2248 年，此时它将环绕并再次从 0 开始。

ID生成如下：

自纪元以来的毫秒数：

`|0|000000000000000000000010110111101111100110001001111100101011111|`

与 (8796093022207L) 按位与：

`|0|000000000000000000001111111111111111111111111111111111111111111|`

为您提供 43 个最低有效位作为时间分量。

然后将其向左移动 20 位，得到：

`|0|0010110111101111100110001001111100101011111|00000000000000000000|`

与 20 位计数器的按位或（例如，如果计数器为 3）为您提供：

`|0|0010110111101111100110001001111100101011111|00000000000000000101|`

时间分量仅使用 43 位（而不是 44 位），因为我们不希望更改最高有效位（这是数字的符号）。这导致仅生成正 ID。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-07T11:16:45.340

> 我想在应用程序端执行此操作，因为如果我将在数据库端执行此操作，我必须再次触发一个查询以获取行的 id..我想避免这种情况。

***不！***您可以使用 AUTOINCREMENT 主键，并在 JDBC 中使用 INSERT 检索生成的键。

```
String insertSQL = "INSERT INTO table... (name, ...)"
        + " VALUES(?, ..., ?)";
try (Connection connection = getConnection();
        PreparedStatement stmt = connection.prepareStatement(insertSQL,
                Statement.RETURN_GENERATED_KEYS)) {
    stmt.setString(1, ...);
    stmt.setInt(2, ...);
    stmt.setBigDecimal(3, ...);
    ...
    stmt.executeUpdate();

    ResultSet keysRS = stmt.getGeneratedKeys();
    if (keysRS.next()) {
        long id = keysRS.getInt(1);
    }
} 
```

这更有效，肯定更容易，更安全。UUID 是 128 位。仅使用 64 位会降低其唯一性。所以至少主观上不是100%完美。至少 XOR ( `^`) 两个长部分。

# selenium-webdriver - 如何删除在 selenium webdriver 运行期间生成的临时文件？

> ID：15184828
> 
> 赞同：5
> 
> 时间：2013-03-03T10:44:23.747
> 
> 标签：selenium-webdriver

谁能帮我删除在 Web 驱动程序测试运行期间生成的临时文件？我正在使用 selenium web 驱动程序 1.25 和 IE 7。在 java 中实现我的测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:58:39.947

在最新版本的 Webdriver 中使用 driver.quit() 后，临时文件会自动删除。不能确定。**是 1.25 还是 2.25 ？**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-26T06:16:43.270

一定要打电话

```
driver.quit(); 
```

代替

```
driver.close(); 
```

close() 不会删除临时文件

# xamarin.ios - 如何绑定 CGPDFDocumentRef？

> ID：15184829
> 
> 赞同：1
> 
> 时间：2013-03-03T10:44:26.997
> 
> 标签：xamarin.ios

我假设 CGPDFDocumentRef 应该绑定到 CGPDFDocument

我正在尝试以下

```
 //- (id)initWithPDFDocument:(CGPDFDocumentRef)_document filepath:(NSString *)fullFilePath;
    [Export("initWithPDFDocument:filepath:")]
IntPtr Constructor (CGPDFDocument document, string path); 
```

我还包括：

```
using MonoTouch.CoreGraphics; 
```

当我尝试编译绑定项目时，出现以下错误：

```
: error BI1002: btouch: Unknown kind MonoTouch.CoreGraphics.CGPDFDocument document in method 'pdftest.ReaderDocument.Constructor' 
```

编辑：

从 poupou 输入后，我有以下内容：

```
 [BaseType (typeof (NSObject))]
    partial interface ReaderDocument {

    [Export("initWithPDFDocument:filepath:")] 
    [Internal] IntPtr Constructor (IntPtr document, string path); 
```

并且在 extras.cs 中：

```
 public partial class ReaderDocument {
        public ReaderDocument (CGPDFDocument doc, string path) : this (doc.Handle, path) { }
    } 
```

我可以在 MonoDevelop 中构建绑定项目，但在 btouch 中出现以下错误。我正在使用命令“/Developer/MonoTouch/usr/bin/btouch MyBindingLib.cs -s:extras.cs”

```
MyBindingLib.cs(12,19): error CS0260: Missing partial modifier on declaration 
of type `mybindingtest.ReaderDocument'. Another partial declaration of this type 
exists
extras.cs(6,30): (Location of the symbol related to previous error)
extras.cs(6,30): error CS0261: Partial declarations of `mybindingtest.ReaderDocument' 
must be all classes, all structs or all interfaces 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:17:19.393

`btouch`不知道存在的所有类型，只知道基本类型和您定义的类型。在这种情况下，您可以分两步绑定它。

首先绑定`CGPDFDocumentRef`为 an`IntPtr`并将其装饰为`[Internal]`.

```
[Export("initWithPDFDocument:filepath:")]
[Internal]
IntPtr Constructor (IntPtr document, string path); 
```

接下来在您的`Extra.cs`文件中添加一个自定义构造函数。

```
partial public class YourType {
   public YourType (CGPDFDocument doc, string path) : this (doc.Handle, path) { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:11:18.770

在 Core Graphics 研讨会中有一个使用 CGPDFDocument 的示例：

[http://www.youtube.com/watch?v=MNxVMYKaZP0](http://www.youtube.com/watch?v=MNxVMYKaZP0)

相关代码在这里：

[https://github.com/xamarin/Seminars/blob/master/2012-01-26-CoreGraphics/XaminarPDFDemo/XaminarPDFDemo/PDFView.cs](https://github.com/xamarin/Seminars/blob/master/2012-01-26-CoreGraphics/XaminarPDFDemo/XaminarPDFDemo/PDFView.cs)

# orm - bltoolkit - 添加不在数据库表中的属性

> ID：15184832
> 
> 赞同：0
> 
> 时间：2013-03-03T10:44:33.593
> 
> 标签：orm, mapping, entity, bltoolkit

bltoolkit 中是否有任何方法可以添加到未映射到数据库表的实体属性？

就像是：

```
[NoMap()]
public string Something {get; set;} 
```

? 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:47:38.543

只需使用 MapIgnore 属性

```
[MapIgnore()]
public string Something {get; set;} 
```

# c# - 使用 Skype4com 删除 Skype 群聊

> ID：15184833
> 
> 赞同：1
> 
> 时间：2013-03-03T10:44:38.340
> 
> 标签：c#, skype, skype4com

我试图制作一个可以清除我的 Skype 群聊的功能。这是我想出的：

1.

```
foreach (SKYPE4COMLib.GroupCollection d in skype.Groups)
{
    skype.DeleteGroup(d.Count);
} 
```

2.

```
for (int i = 0; i < skype.Groups.Count; i++)
{
    try
    {
        skype.DeleteGroup(i);
    }
    catch { }
} 
```

两种方法都不会删除组。不确定需要做什么才能从我的 Skype 中删除所有组。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-03T11:26:40.370

目前无法通过 Skype4Com 完成。

顺便说一句，您尝试删除的这些组是联系人组，即您可以像在任何地址簿中一样在 Skype 中对您的联系人进行分组。对于群聊，查找聊天对象并检查聊天成员计数，例如 if (chat.Members.Count > 1)。

您可以在此处找到更多示例：http: [//devforum.skype.com/](http://devforum.skype.com/)

# c# - 如何通过在C#中单击来减小字体的大小

> ID：15184835
> 
> 赞同：1
> 
> 时间：2013-03-03T10:45:01.350
> 
> 标签：c#, winforms, richtextbox

我使用 Windows 窗体应用程序。我很困惑如何减少richtextbox 中的字体。我用我最好的知识尝试但做不到。我已经尝试过该功能。当前字体大小最重要的一个是必须保存..我的编码部分::-

```
 static int dmk;
    public void fun()
    {
        int dk = Convert.ToInt32(richTextBox1.Font.Size); // font save run time
        dmk = dk;
    }

    private void sizeDecreaseToolStripMenuItem_Click(object sender, EventArgs e)
    {   int ab = dmk;
        int ak = ab--;

       // .Font = new Font(textBox.Font.FontFamily, 16);

        richTextBox1.Font = new Font(richTextBox1.Font.FontFamily, ak);           
    } 
```

我希望我的字体像 Microsoft word 中那样减少一键点击。数据只在运行时输入。

我知道我的英语很差。先谢谢了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:48:21.963

使用此代码并查看此[问题](https://stackoverflow.com/questions/14241765/how-to-increase-and-decrease-text-size-on-a-textbox)

```
Font font = richTextBox1.Font;
float newSize = font.Size;
newSize -= 2.0F;
richTextBox1.Font = new Font(font.FontFamily, newSize, font.Style); 
```

# pspice - PSPICE。错误 15053：无法初始化 PSpice UI

> ID：15184840
> 
> 赞同：1
> 
> 时间：2013-03-03T10:45:31.340
> 
> 标签：pspice

每次我尝试在 PSpice 中进行模拟时都会遇到问题。当我单击运行时，会出现以下窗口：

> 错误（15053）：无法初始化 PSpice UI

有人可以帮我吗？我需要将 PSpice 用于我大学的一门学科。我真的很感激任何人可以给我的任何信息。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-15T07:11:28.453

*   我通过替换文件解决了这个错误

> pspice.ini

*   在cadence 安装文件夹的路径**C:\SPB_Data\cdssetup\OrCAD_PSpice\16.6.0中。**
*   重新启动 Orcad PSpice 程序并尝试运行模拟。

# java - 如何检查 JZMQ 套接字是否已连接

> ID：15184841
> 
> 赞同：10
> 
> 时间：2013-03-03T10:45:37.083
> 
> 标签：java, zeromq, jzmq

有没有办法检查JZMQ（zmq的java绑定）套接字是否连接？

```
ZContext zmqContext = new ZContext();
ZMQ.Socket workerSocket = zmqContext.createSocket(ZMQ.DEALER);
workerSocket.setIdentity("ID".getBytes());
workerSocket.connect("tcp://localhost:5556"); 
```

在上面的代码之后，我想检查是否连接了 workerSocket。检查连接状态会很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-09T01:45:55.493

不，API 中没有检查套接字是否已连接的方法。

ZeroMq 对网络进行抽象；客户端和服务器连接对建立连接的对等方是完全透明的。客户端或服务器可能会向不存在的对等方发送消息；不会产生错误；相反，它们将根据 HWM 配置在套接字缓冲区中排队。

要检查对等点的可用性，请使用具有超时因子的同步请求/回复心跳手动进行；举个例子，希望对你有帮助！

在此处查看请求/回复的样本！ [https://github.com/imatix/zguide/tree/master/examples/](https://github.com/imatix/zguide/tree/master/examples/)

# codeigniter - codeigniter 将变量从控制器传递到模型

> ID：15184848
> 
> 赞同：2
> 
> 时间：2013-03-03T10:46:16.227
> 
> 标签：codeigniter, activerecord, model, controller

我想简单的问题。

我的控制器正在使用`$this->uri->segment(3)`. 这将始终是一个值。我把它放在一个数组中传递给模型：

```
$customerid = array(
   'id' => $this->uri->segment(3)
); 
```

**控制器语法如下：**

```
function confirm_delete_customer()
{
            $data['title']="Confirm Customer Deletion";

            $customerid=array(
                'id'=>$this->uri->segment(3)
                );

            //query model to get data results for form
            $data=array();

            if($query=$this->model_master_data->get_customer_records_to_delete()){
                $data['records']=$query;

            $this->load->view("master_data/view_master_data_header",$data);
            $this->load->view("master_data/view_master_data_nav");
            $this->load->view("master_data/view_content_master_data_confirm_customer_deletion",$data);
            $this->load->view("master_data/view_master_data_footer");

} 
```

然后我试图访问这个数组值并将其传递给我的模型进行处理。如果我将数组硬编码到模型中，它将按照以下语法工作：

**模型 - 手动语法是：**

```
function get_customer_records_to_delete()
{
    $query = $this->db->get_where('customers', array('id'=>43));
    return $query->result();
} 
```

如果我尝试用我的控制器中的数组替换它，它会失败并出现错误： `Undefined variable: customerid`

**我想要工作的模型的想法：**

```
function get_customer_records_to_delete()
{
    $query = $this->db->get_where('customers', $customerid);
    return $query->result();
} 
```

我有一种感觉，它是一件小事。然而，这是从数据库中获取单个记录以输出到视图的最佳方式吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T10:51:39.697

最好的方法是：

```
function confirm_delete_customer()
{
    $data=array();

    $data['title']="Confirm Customer Deletion";

    $customerId = $this->uri->segment(3);

    //Prevent SQL injections
    if(!is_numeric($customerId) || empty($customerId)) {
        show_error("Bad Request");
    }

    $query = $this->model_master_data->get_customer_records_to_delete($customerId);

    if ($query){
        $data['records']=$query;

        $this->load->view("master_data/view_master_data_header",$data);
        $this->load->view("master_data/view_master_data_nav");
        $this->load->view("master_data/view_content_master_data_confirm_customer_deletion",$data);
        $this->load->view("master_data/view_master_data_footer");

    }
} 
```

然后你可以简单地调用：

```
function get_customer_records_to_delete($customerId)
{
    $query = $this->db->get_where('customers', array('id'=>$customerId));
    return $query->result();
} 
```

在你的模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:55:03.690

您需要将该值作为参数传递给函数，以便它可以访问它。

前任：

```
get_customer_records_to_delete($customerid)
{
    // now $customerid is accessible
    $query = ....;
    return $……;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T11:01:50.800

您应该严重依赖函数参数。从控制器中获取客户 ID 并将其发送到模型。此外，您可以使用`row()`从数据库中获取单个结果。

**控制器**：

```
 function confirm_delete_customer(){
    $data['title']="Confirm Customer Deletion";

    $customerid=$this->uri->segment(3);

    //query model to get data results for form
    $data=array();

    if($query=$this->model_master_data->get_customer_records_to_delete( $customerid)) //you are sending customer id as a parameter here
    $data['records']=$query;

    $this->load->view("master_data/view_master_data_header",$data);
    $this->load->view("master_data/view_master_data_nav");
    $this->load->view("master_data/view_content_master_data_confirm_customer_deletion",$data);
    $this->load->view("master_data/view_master_data_footer");

}} 
```

**模型**

```
function get_customer_records_to_delete($customerid) 
{
    $query = $this->db->get_where('customers', array("id"=>$customerid)); //you are using the customer id sent from the controller here
    return $query->row(); //this will return a single row
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T19:56:04.327

旧线程，但答案是在控制器中将变量声明为“公共”（即`public $customerid;`），在这种情况下，您的模型可以使用它。在某些情况下，明确地作为参数传递可能更安全。但是，当您有多个变量时，选择声明它们会很有用。

# c++ - C++ getline() 不结束输入

> ID：15184850
> 
> 赞同：1
> 
> 时间：2013-03-03T10:46:23.210
> 
> 标签：c++, string, input, getline

```
string str, temp;

string c;

cout << "Insert the character that ends the input:" << endl;

getline(cin, c);

cout << "Insert the string:" << endl;

getline(cin, str, c.c_str()[0]); 
```

我应该能够在字符串“test”中输入一个字符串，直到我输入结束字符，但是如果我输入一个双新行，它就无法识别结束字符，也不会结束输入。

这是输出：

```
Insert the character that ends the input:
}
Insert the string:
asdf

}
do it}
damn} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:47:14.067

You may want to redesign your code a little bit, e.g. if the delimiter is a character, then why reading a `string` (and using a kind of obscure syntax like "`c.c_str()[0]`" - at least just use `c[0]` to extract the first character from the string)? Just read the single delimiter character.

Moreover, I see no unexpected results from `getline()`.

If you try this code:

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    cout << "Insert the character that ends the input: " << endl;  
    char delim;
    cin >> delim;

    string str;   
    cout << "Insert the string: " << endl;   
    getline(cin, str, delim);

    cout << "String: " << str << endl;
} 
```

the output is as expected, e.g. the input string "`hello!world`" is truncated at the delimiter "`!`" and the result is just "`hello`":

> ```
> C:\TEMP\CppTests>cl /EHsc /W4 /nologo /MTd test.cpp
> test.cpp
> 
> C:\TEMP\CppTests>test.exe
> Insert the character that ends the input:
> !
> Insert the string:
> hello!world
> String:
> hello 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:54:57.573

将代码更改为

> 获取线（cin，str，c[0]）；

# php - 文件通过json获取内容

> ID：15184851
> 
> 赞同：1
> 
> 时间：2013-03-03T10:46:34.823
> 
> 标签：php, codeigniter, json

我有一个文件文本文件，我在其中通过 file_put_contents 保存用户 ID 我想在将其发送到查看功能之前显示该用户 ID 这是我的代码我尝试自己 bt 没有得到结果....

```
 $name   =   $this->session->userdata('name');
      $id   =   $this->session->userdata('id');

   file_put_contents($filename,json_encode(array('id'=>$id,'name'=>$name)));

   $response = array();
   $response = json_decode(file_get_contents($filename));
   if ($response->name==1){
      echo $this->session->userdata('name');
   }
   echo json_encode($response); 
```

这不起作用，我想显示 bt 如果我删除这个 if 条件然后我在视图文件中得到我的结果

```
 if ($response->name==1){
         echo $this->session->userdata('name');
       } 
```

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:44:53.767

`$response->name`它将是一个字符串，而不是一个 int。

代替：

```
if ($response->name==1){
    echo $this->session->userdata('name');
} 
```

和：

```
if ($response->name){
    echo $this->session->userdata('name');
} 
```

**更新：**
您在评论中的某处声明要检查用户 ID，但在代码中检查用户名。同样在`if`条件内，您应该使用来自 $response 的数据，而不是来自会话的数据。那说：

```
if ($response->id == 1){
    echo $response->name;
} 
```

作为旁注，您确定`id`并且`name`存在于会话中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:44:31.883

我不清楚你为什么有

```
if ($response->name==1){ 
```

但无论如何试试这个

如果你想保护 json 对象结构，你需要第二个参数为真

```
 json_decode(file_get_contents($filename) ,true); 
```

并且您需要一些可以在底部找到的 json 标头

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');
$name   =   $this->session->userdata('name');
$id   =   $this->session->userdata('id');
if(!empty($name)){

    if(!is_file($filename)){
        touch($filename);
        chmod($filename,0777);
    }

    file_put_contents($filename,json_encode(array('id'=>$id,'name'=>$name),true));

    $response = array();
    $response = json_decode(file_get_contents($filename) ,true);
    if (empty($response->name)){  
        echo json_encode(array('error'=>'empty response name'),true);
     die();

 }else{

    echo json_encode($response);
  }

      }else{
    json_encode(array('error'=>'no username'),true)
    } 
```

我的管理员中有我的消息系统，它用于codeigniter

[http://dl.dropbox.com/u/72626795/messaging.zip](http://dl.dropbox.com/u/72626795/messaging.zip)

# jquery - jQuery 未定义的 html 属性

> ID：15184854
> 
> 赞同：0
> 
> 时间：2013-03-03T10:47:15.573
> 
> 标签：jquery, undefined

单击拇指时，我正在尝试加载图像。用户点击：

```
<li><a href="#" class="01"><img src="images/thumbimg1.jpg" alt="thumbnail 1" /></a></li> 
```

我使用的 jQuery 是：

```
var divs = $('#img01, #img02, #img03, #img04, #img05, #img06, #img07, #img08, #img09, #img10');
var classNumber = $(this).attr('class');
var thumb = 'thumb';
var html = '.html';
$(divs).hide();

//$("#img01" + $(this).attr("class")).load(thumb+number+html).fadeIn();

$('ul#thumbs li a').click(function(){
    $(divs).hide();
    $('#img' + $(this).attr('class')).load(thumb+classNumber+html).fadeIn();
});
}); 
```

当我查看控制台时，classNumber 只是以未定义的形式返回。

当我做 console.log(this); 我点击了正确的链接，显示了正确的类，所以我不知道为什么我没有定义。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:55:14.393

你变得不确定，因为：

```
var classNumber = $(this).attr('class'); 
```

被绑定在循环之外，所以 this 不是指元素，而是指窗口。在上面的代码中，您正在尝试有效地尝试执行此操作：

```
var classNumber = $(window).attr('class'); 
```

你需要这样做：

```
$('ul#thumbs li a').click(function(){
    var classNumber = $(this).attr('class');
    $(divs).hide();
    $('#img' + $(this).attr('class')).load(thumb+classNumber+html).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:50:03.847

您的`classNumber`变量正在`a`被单击的特定范围之外声明。相反，您需要在点击处理程序中定义它；

```
$('ul#thumbs li a').click(function(){
    var classNumber = $(this).attr('class');

    $(divs).hide();
    $('#img' + $(this).attr('class')).load(thumb+classNumber+html).fadeIn();
}); 
```

* * *

FWIW，您可能想要选择另一个属性而不是`class`，因为如果您在以后的生活中添加其他类，这将中断。使用自定义属性 ( `data-*`)，或窃取其他属性，例如`title`.

您可能还想考虑向所有`#img`'s 添加一个公共类，并简单地调用`$(.your-common-class)`而不是单独调用它们中的每一个。

# objective-c - 核心数据多上下文导入和故障

> ID：15184858
> 
> 赞同：1
> 
> 时间：2013-03-03T10:47:55.623
> 
> 标签：objective-c, core-data

我`NSManagedObjectContext`在几个 UIViewControllers 中使用了一个 main 来显示数据（这是一个`UITableView` 带有列表的`Department`）

3 个实体，一个`Department`具有一对一到`Boss`一个对多到`Employee`（在这种情况下，`employee`具有一个`NSData`（这是一个图像）属性`allow external storage`）。

由于我正在批量导入图像，因此我在具有自己的后台线程中执行此操作`NSManagedObjectContext`。

导入包括创建`Boss`实体和所有`Employee`并设置关系。

现在我的问题是：

*   如果我使用其中的一个`child context`进行`main context`导入和保存，那么即使两个上下文都没有更改，所有图像也会保留在内存中。
*   如果我使用`context with no relation to the main context`图像并没有留在内存中，但新数据没有显示在中`UIViewController`（显然，因为`main context`没有通知由 所做的更改`background context`）

所以我希望在没有图像的情况下仍然显示更改（这意味着我想`Department`知道它有`Boss`关系但没有图像在内存中）。简而言之，我希望他们一旦`context`被保存就变成错误。

编辑：我认为问题在于，当我保存时`child context`，它`main context`会与...)

编辑2：我想我修好了，这就是我所做的：

*   我用了一个`child context`绑到的`main context`，我听了所有的`NSManagedObjectContextDidSaveNotification` ，`inserted` `updated`我呼吁`refreshObject:mergeChanges:`它把它变成故障。

我注册了来自每个上下文的所有通知。

```
-(void)contextDidSave:(NSNotification*)saveNotification {
    NSManagedObjectContext *defaultContext = saveNotification.object;
    NSArray *insertedObjects = [saveNotification.userInfo valueForKey:@"inserted"];
    if (insertedObject) {
        NSLog(@"INSERTED : %@", insertedObjects);
        for (NSManagedObject *object in insertedObjects) {
            [defaultContext refreshObject:object mergeChanges:NO];
        }
    }
    NSArray *updatedObjects = [saveNotification.userInfo valueForKey:@"updated"];
    if (insertedObject) {
        NSLog(@"UPDATED : %@", updatedObjects);
        for (NSManagedObject *object in updatedObjects) {
            [defaultContext refreshObject:object mergeChanges:NO];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:21:45.657

您可以使用 将特定对象变成故障`refreshObject:mergeChanges:`，为 mergeChanges 参数传递 NO。

> 将对象变为故障（标志为 NO）意味着对相关托管对象（即对象具有引用的对象）的强引用被破坏，因此您也可以使用此方法修剪您想要的对象图的一部分限制内存使用。

[文档在这里](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/refreshObject%3amergeChanges%3a)。

# algorithm - While循环时间复杂度

> ID：15184862
> 
> 赞同：0
> 
> 时间：2013-03-03T10:48:09.773
> 
> 标签：algorithm, while-loop, time-complexity

我有一个算法考试..在循环时间复杂度方面有点不太好：我刚刚开始了解它的基础知识..

我有这个while循环

```
i=2
while (i<n)
{
   i=i*i
   x=x+1
} 
```

我相信解决方案必须是这样的： （i） 每次执行语句 1 次时
将从 2 运行到 2 ^k，其中 k = 2 ^(i ..)

所以 1+1+1+.. ，这意味着 1*2 ^k

从这里我无法继续..

第二个问题伙计们..请推荐一个我可以练习更多这些的网站或某事..搜索但没有找到：s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:12:01.957

只要`i`小于，循环就会运行`n`。换句话说，你需要找到`k`2 ^(2 ^k) < n。==> k = log [2] log [2] n。所以循环迭代 log [2] log [2] n 次，并且在每次迭代中它执行 2 个操作（乘法和加法） - 这些操作需要`O(1)`时间。

==> 执行循环的时间等于 log [2] log [2] n * O(1) ==> 总复杂度为`O(loglogn)`.

# vb.net - 警告：无法找到依赖项

> ID：15184868
> 
> 赞同：2
> 
> 时间：2013-03-03T10:48:28.983
> 
> 标签：vb.net, visual-studio-2010, crystal-reports-2010

我已经使用 VB.net 2010 和框架 4 构建了一个应用程序，并且我也安装了水晶报表。每当我尝试创建设置时，都会出现此警告：

> 警告：找不到程序集“CrystalDecisions.CrystalReports.Engine.dll”的依赖项“BUSINESSOBJECTS.LICENSING.KEYCODEDECODER”（签名=“692FBEA5521E1304”版本=“13.0.2000.0”）

当我在其他 PC 上安装时显示此错误。

你对此有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:07:56.003

我认为您必须在运行应用程序的客户端上安装 Crystal Report 2010。

来自 msdn 博客：

> 从 4 月 16 日星期五开始，Crystal Reports for Visual Studio 2010 的 Beta 版将作为单独下载从该站点提供。就像 Crystal Reports 集成到 Visual Studio 安装时一样，此下载将继续免费。

来自： http: [//blogs.msdn.com/b/vbteam/archive/2010/04/08/crystal-reports-for-visual-studio-2010.aspx ?PageIndex=4](http://blogs.msdn.com/b/vbteam/archive/2010/04/08/crystal-reports-for-visual-studio-2010.aspx?PageIndex=4)

看看这里：[http ://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/91f71ce2-e591-45a1-8bc2-0d61cd090117/](http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/91f71ce2-e591-45a1-8bc2-0d61cd090117/)

# node.js - appfog如何上传文件

> ID：15184869
> 
> 赞同：0
> 
> 时间：2013-03-03T10:48:41.293
> 
> 标签：node.js, appfog

我在 appfog 上创建了 node.js 应用程序，然后下载命令提示符并登录。但是如何上传一些文件？“最后从你的源代码目录中：

af 更新我的应用程序”

如何设置目录或要上传的文件？

我想上传这个[http://tutorialzine.com/2012/08/nodejs-drawing-game/](http://tutorialzine.com/2012/08/nodejs-drawing-game/)但我没有找到如何选择下载的文件夹以及如何上传它。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:24:13.033

您可以`af update appname`从要上传的目录执行，也可以使用`--path`选项指定上传目录路径。

# php - 创建由当前年份编号和自动递增值组成的唯一 ID

> ID：15184880
> 
> 赞同：0
> 
> 时间：2013-03-03T10:50:44.457
> 
> 标签：php, mysql, phpmyadmin

我想创建一个由 4 位数年份和 5 位数自动增量字段组成的学生 ID 号。例如：2013-00001，当一年结束时，5 位数字将重新为零 (0) 例如：2014-00001。

谢谢， 慈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:36:05.350

您可以使用 StudentId 表本身来存储所有数据。

```
select LatestNumber from StudentIds where Year=2013 ORDER BY LatestNumber DESC LIMIT 1; 
```

将数字与年份分开，这样您就可以在新的一年通过添加一个虚拟 Year=2014, LatestNumber=0 来重置它

```
$LatestNumber = $result['LatestNumber'];
$LatestNumber++;

insert into StudentIds (Year, LatestNumber, ...) values (2013, $LastestNumber, ...) 
```

在多个查询等情况下添加错误处理......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:04:18.537

```
create Table width two columns: Year,LatestNumber 

function generateStudentId(){
    $year = date("Y");
    $latestNumber = 0;
    $res = mysql_query("select * from myTable where Year=$year");
    $result = mysql_fetch_array($res);
    if($result)
        $latestNumber = $result['LatestNumber'];
    $latestNumber++;
    if($result){
        mysql_query("update myTable set LatestNumber=$latestNumber where Year=$year");
    }
    else
        mysql_query("insert into myTable values($year,$latestNumber)");

    $fiveDigitNumber = return str_pad((int) $latestNumber,5,"0",STR_PAD_LEFT);
    $studentId = $year.$fiveDigitNumber;
    return $studentId;
} 
```

# javascript - JavaScript：如何拦截来自 iframe 的 http 请求

> ID：15184891
> 
> 赞同：2
> 
> 时间：2013-03-03T10:51:58.217
> 
> 标签：javascript

我以编程方式在我的网页中设置 iframe 的 url。我必须知道这个 url 更改触发了哪些 http 请求（css、脚本、图像等加载的 url）。我截获了 XMLHttpRequest，但从未调用过这个对象......

我怎样才能拦截那些http请求？

是否有另一种方法可以“加载” iframe 并获取所有触发的 url 请求？

这是我的代码：

```
(function(xhr){
  var pt = xhr.prototype;
  pt._open = pt.open;
  pt.open = function(){
   console.log('Open called...');
   this._open.apply(this, arguments);
})(XMLHttpRequest);
...
$('#iframe').attr('src', 'http://www.stackoverflow.com'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:03:42.417

An与父窗口`<iframe />`不同`window`，因此，当您覆盖时`XMLHttpRequest`，您将覆盖父窗口中的那个，***而不是***窗口中的那个`<iframe />`。

不幸的是，同源策略阻止您访问 的`window`，`<iframe />`因此您对此无能为力。

即使这里没有 SOP，虽然您*可以*拦截 AJAX 请求，但您无法拦截资产请求（CSS、JS、图像）。

您最好的选择是在您的服务器上使用代理，并通过那里路由 iframe 请求；通过您的代理而不是直接访问重写所有资产 URL（但即便如此，您也无法跟踪边缘情况，例如 JavaScript，包括其他资产等。

# c# - 从 C# 通过 C++/CLI 访问本机对象！

> ID：15184897
> 
> 赞同：1
> 
> 时间：2013-03-03T10:52:29.130
> 
> 标签：c#, qt, c++-cli, pinvoke, easyhook

我编写了一个 C# 应用程序，将 DLL 注入到第三方可执行文件中（恰好是使用 Qt 框架构建的）。此 DLL 使用 EasyHook 拦截对许多特定函数的调用。当我注入的代码被调用时，我会尝试检查一些作为这些函数参数的对象。

例如，我截获了一个解析 XML 的调用：

```
virtual bool __thiscall QXmlSimpleReader::parse(class QXmlInputSource const &) 
```

在我的 C# 代码中，我有一个 PInvoke 签名来匹配这个：

```
static extern bool XmlParse(IntPtr Reader, IntPtr Source) 
```

我想调用作为“Source”类成员的“data()”函数。也就是说，QXmlSimpleReader 从 QXmlInputSource 解析原始 XML，但在此之前，我试图通过这个“data()”函数检查原始 XML。

根据这里一位专家的建议，我尝试使用 C++/CLI 本地访问对象（请参阅[调用第三方 DLL 中的方法](https://stackoverflow.com/questions/15062983/calling-methods-in-third-party-dlls)）。我在 C++ 中构造了一个包装器对象，它接受来自 C# 代码的 IntPtr：

标题：

```
public ref class QXmlInputSource
{
public:
    // Constructor must be called with C# IntPtr
    QXmlInputSource(IntPtr Ptr);

    bool LoadQt(void);
    bool UnloadQt(void);

    String^ Data();

private:
    // Pointer to the native Qt object
    void * Native;
    HINSTANCE DllHandle;

    // SIGNATURE: virtual QString QXmlInputSource::data() const
    typedef void * (__thiscall *QXmlInputSource_Data)(void *);
    QXmlInputSource_Data fpData;
}; 
```

CPP 文件：

```
QXmlInputSource::QXmlInputSource(IntPtr Ptr)
{
    LoadQt();
    Native = Ptr.ToPointer();
}

bool QXmlInputSource::LoadQt(void)
{
    FARPROC Addr;

    /* get handle to dll */
    std::wstring LibName = QtPath + QtXml;
    DllHandle = LoadLibrary(LibName.c_str()); 

    /* get pointer to the function in the dll*/ 
    Addr = GetProcAddress(HMODULE (DllHandle), "?data@QXmlInputSource@@UBE?AVQString@@XZ"); 
    fpData = QXmlInputSource_Data(Addr);

    return true;
}

bool QXmlInputSource::UnloadQt()
{
    /* Release the Dll */ 
    FreeLibrary(DllHandle);
    return true;
}

String^ QXmlInputSource::Data()
{
    void* Ptr = fpData(Native);
    return "EPIC FAIL";
} 
```

当我尝试调用 fpData() 函数指针时，基于 Qt 的应用程序崩溃。帮助：P

一些可能有帮助也可能没有帮助的附加信息：

*   我已经使用相同的方法成功地调用了“更简单”对象上的函数，例如 QString.count() 和 QString.data()。（QString 似乎只是标准 unicode 字符串的轻量级包装器）。

*   在包含我感兴趣的 XML 函数的 QtXml4.dll 文件中，实际上有两个 parse() 方法；Source 是 const & 的一种，另一种是 Source 是 const *。我不知道我是否应该使用其中一个。我认为我的签名无论如何都不会改变。

*   当我尝试玩耍时，我尝试在 C# 代码中取消引用 IntPtr 并将其传递给 C++：

    IntPtr DerefSrc = (IntPtr)Marshal.PtrToStructure(Source, typeof(IntPtr));

如果我打印出这两个 IntPtrs 的值，Source 的值约为 3.5Mb，而 DerefSrc 的值为 1.6Gb - 这与内存中 QtXml4.dll 的地址大致匹配。我的猜测是 3.5Mb 是相对偏移，而 DerefSrc 显然是绝对参考。将 DerefSrc 转换为相对地址并将其传递给 C++ 是否值得一试...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:03:37.870

我看到几个问题：

1.：你没有检查LoadLibrary和GetProcAddress的返回值。QXmlInputSource::data 甚至是 DLL 导出的方法吗？如果没有，那么 GetProcAddress 显然会失败。

2.：如何实例化 QXmlInputSource 类？我问是因为您似乎正在尝试在 C# 代码中执行此操作，这很难正确执行（您需要知道该类所需的大小，分配该大小的正确对齐的内存块，然后调用构造函数它）。

3.：你调用函数指针的方式是错误的。您需要声明适当类型的方法指针：

```
FARPROC fp = ::GetProcAddress(...);

typedef QString (QXmlInputSource::*DataMethod)();
DataMethod mpData = reinterpret_cast<DataMethod>(fp);

QXmlInputSource source;
QString data = (source.*mpData)(); 
```

4.：查看 QXmlInputSource::data 的文档，我看到它返回一个 QString，它与指针（正如您当前正在处理的那样）完全不同。要将其转换为 System.String，您需要如下代码：

```
QString s1 = (QChar*)L"example string";
String^ s2 = gcnew String((wchar_t*)s1.data()); // calls the String::String(wchar_t*) constructor overload 
```

# google-chrome - 为什么更改它以使我的内容脚本针对 http 站点而不是所有 url 运行会使内容脚本显示在开发人员工具中？

> ID：15184900
> 
> 赞同：2
> 
> 时间：2013-03-03T10:52:31.877
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools, content-script

我正在学习 Chrome 扩展并制作一些 hello world 应用程序。我正在这里处理内容脚本。

首先，我的应用程序非常简单，它只是一个加载内容脚本的清单。

这是清单

```
{
  "name": "turn all th into TH",
  "version": "1.0",
  "permissions": [
    "http://*/*"
  ],
  "manifest_version": 2,

 "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["contentScriptFirstApp.js"]
    }
  ]
} 
```

并且内容脚本只是一行

> 警报（'你好'）；

现在我运行它，每次加载页面时都会显示警报框。

然而，奇怪的是，虽然代码正在运行，但我在开发者工具中找不到 ContentScript。

只有当我对我的清单进行轻微调整时，更改 match 参数，而不是 allow ，它只与 http 文件匹配，如下所示，我可以在开发人员工具中看到内容脚本。

```
{
  "name": "turn all th into TH",
  "version": "1.0",
  "permissions": [
    "http://*/*"
  ],
  "manifest_version": 2,

 "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["contentScriptFirstApp.js"]
    }
  ]
} 
```

只是好奇这是为什么。在这两种情况下，代码都在运行并显示警告框，但为什么只有当内容脚本页面将“matches”参数设置为 http 页面时，它才会开始显示在开发人员工具中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:45:10.113

很确定这只是巧合，也是我第一次加载扩展时经常看到的故障。

当我使用您的`"<all_urls>"`清单时，我在开发工具的*Sources*`contentScriptFirstApp.js`选项卡中看到了一切正常。我可以很好地切换到内容脚本上下文。

 *但似乎有时在*第*一次从磁盘安装扩展时，第*一个*选项卡的开发工具并不总是能看到它。我[和其他人](https://stackoverflow.com/questions/14059078/use-the-tampermonkey-api-from-the-chrome-console/14059557#comment-19431566)已经看到了这个问题，但我还没有找到一种可靠的方法来按需复制问题。

无论是什么原因，关闭该选项卡并打开一个新选项卡总是可以修复它（到目前为止）。因此，当您更改清单时，可能有足够的时间使扩展*巧合*地出现在开发工具中。就像我说的那样，无论设置如何，清单都有效并且扩展程序会显示给我`matches`。*

# c - 将元素插入链接列表

> ID：15184901
> 
> 赞同：0
> 
> 时间：2013-03-03T10:52:47.570
> 
> 标签：c, linked-list, insertion

我正在参加 C 考试，在尝试将元素插入链表时，遇到了运行时问题。我唯一的目的是将 4 个元素添加到列表中，然后打印列表。但是，它给出了一个错误。我已经看过一些插入代码，我的代码似乎是正确的。看不到错误。任何援助将不胜感激。

```
#include <stdio.h>
#include <stdlib.h>

struct ders{
    char kod;
    struct ders *next;

}*header;
typedef struct ders Ders;
void add(Ders*,Ders*);
void print(Ders*);

int main(void)
{

header = NULL;
Ders *node = NULL;
int i = 0;
char c;
while(i<4)
{
    scanf("%c",&c);
    node = (Ders*)malloc(sizeof(Ders));
    node->kod = c;
    node->next = NULL;
    add(header,node );
    i++;

}
print(header);

return 0;
}

void add(Ders *header, Ders *node)
{
    if(header == NULL){
        header = node;
        header->next = NULL; }
    else{
        node->next = header;
        header = node;

    }
}

void print(Ders *header)
{
Ders *gecici = header;

while(gecici != NULL){
    printf("%c\n",gecici->kod);
    gecici = gecici->next;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:43:44.887

正如 nihirus 所说，“指针是按值传递的。因此，您可以更改它指向的内存，但不能更改实际指针，即使其指向其他东西。”

您的修改导致错误`*header is not member of struct` ，因为 `->` 优先级高于 `*`

尝试 `(*header)->next = NULL` 改用。

C 运算符优先级： [http ://www.difranco.net/compsci/C_Operator_Precedence_Table.htm](http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm)

# javascript - 设计可滚动的表格结构

> ID：15184904
> 
> 赞同：0
> 
> 时间：2013-03-03T10:53:10.837
> 
> 标签：javascript, html, css

我目前正在寻找一种使用 HTML 和 JS 设计表格结构的方法，这应该是

1.  水平滚动（必须可以动态添加新列）
2.  容忍单元格大小的变化（例如，添加一些文本或控件时）。例如，当将第二行中的第二个单元格的大小加倍时，每隔一个单元格应该留在正确的列中。
3.  应该可以将渲染列调整为屏幕宽度。
4.  在移动设备上滑动应该可以使用相同的布局。
5.  > = 必须支持 IE8、FF、Chrome

目前我正在考虑一个基于 DIV 的解决方案，如果需要，通过调整列和单元格 DIV 的大小来保留列和行的正确表结构。

它应该是这样的：

![这就是它应该看起来的样子。 可滚动区域应可按需扩展](../Images/b671535c675af06653c9691a086d3d70.png)

基于 DIV 的解决方案是否合适，或者是否有可能使用默认的 HTML 表格？

# c++ - 你能停止为整数输入字母吗？

> ID：15184906
> 
> 赞同：0
> 
> 时间：2013-03-03T10:53:14.317
> 
> 标签：c++

我想知道是否有停止输入整数的字母。这是我在 int main 中使用的代码。

```
do
{
    cout << "Player 1 please enter the value of the row you would like to take ";
    cin >> row;
}while (row != 0 && row != 1 && row != 2 && row != 3); 
```

我对这段代码的问题是，如果用户输入一个字母，它会创建一个永无止境的循环。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T11:09:03.943

标准库不提供任何可以过滤通过标准输入输入的字符的内容。我相信你可以使用图书馆`curses`来做到这一点。

但是，您可以做的是检查输入是否成功。`operator>>`for`int`会将流的状态设置为`failbit`如果它无法提取整数（例如，当它遇到一个`'a'`或类似的东西时。您可以在布尔上下文中使用提取运算符，如下所示：

```
cout << "Player 1 please enter the value of the row you would like to take ";

while (!(cin >> row) || (row < 0 || row > 3)) {

    cout << "Invalid input, try again!\n";
    // clear the error flags and discard the contents,
    // so we can try again
    cin.clear();
    cin.ignore(std:numeric_limits<std::streamsize>::max(), '\n');
} 
```

请注意，如果您输入 example `1abc`，读取将成功读取`1`并将 留`abc`在流中。这可能不是理想的行为。如果您希望将其视为错误，您可以说

```
if ((cin >> std::ws).peek() != EOF) { /* there's more input waiting */ } 
```

并采取相应的行动，或者在获得价值后无条件地忽略流中的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:08:31.120

一次获取一个字符，并且只将数字字符添加到字符串中。采用

```
cin.get(); 
```

在一个循环中。

# iphone - 将自己的视图类分配给情节提要

> ID：15184916
> 
> 赞同：0
> 
> 时间：2013-03-03T10:54:42.630
> 
> 标签：iphone, ios, storyboard

请参阅包含导航视图、手势和一些视图的故事板。

![http://i.stack.imgur.com/Gwuy3.png](../Images/f1ac7fca818faf1db5152432cb5b69e8.png)

里面还有一个`TabView`，它包含一个`UIImageView`和`UITableViewController`。

要将我的数据应用到这个 TableView，我需要使用`msExampleTableViewController`.

问题：输入/下拉字段在按 Enter 后删除条目（例如，如果此类不可分配）。

这里有什么问题，如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:41:18.557

NA UITableViewController 确实假定根视图将是 UITableView。当您将 UITableView 与其他控制器结合使用时。您可以在您的控制器（在您的情况下为 ViewController）中执行以下操作：

```
@interface YourViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
@property (nonatomic, assign) IBOutlet UITableView* tableView; 
```

在 Interface Builder 中，将 table view 的 delegate 和 dataSource outlets 都设置为其父视图的视图控制器（文件的所有者）...

现在，您的视图控制器实现应该是典型的 TableViewController 实现：`cellForRowAtIndexPath`等。

# opengl - 导入 3D 模型的位置

> ID：15184922
> 
> 赞同：1
> 
> 时间：2013-03-03T10:55:09.260
> 
> 标签：opengl, graphics, shader, models, mesh

因此，每当我将 3D 模型（.3ds、.obj 等）加载到我的 openGL 程序中时，它们要么被放置在看似随机的位置，要么被放置在不理想的位置。有没有一种简单的方法可以让我在导入模型时将它转到我指定的位置？我认为这可以使用顶点着色器来处理，并通过一些矢量添加来转换输入位置，但这需要首先知道它将出现在哪里，以便知道将其转换多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:26:13.383

这完全取决于应用于 3D 模型的转换，或 3D 建模包中使用的坐标系。我会说你从错误的一端接近这个。如果您希望数据保持一致，请确保以您期望的 3D 建模包中的方式导出数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:36:51.693

很难弄清楚“正确的方向”是什么。当你看到一个茶壶时，它的把手应该在左边还是右边？

但是，正确的位置可能更容易调整。

假设您希望加载的对象显示在 (Lx, Ly, Lz)

首先，通过添加每个坐标并对其进行平均来计算顶点的质心（Cx、Cy、Cz）。例如：对于 (1,0,1)、(0,1,1) 和 (0,0,1) 这 3 个点，质心为 (1/3, 1/3, 1)。

现在将每个顶点偏移（Lx-Cx，Ly-Cy，Lz-Cz），并且您的几何图形应该围绕位置（Lx，Ly，Lz）“居中”。

注意：这适用于相当对称的模型（例如：人、生物、汽车等）。

# sitecore - Sitecore - 验证下拉列表值更改事件

> ID：15184923
> 
> 赞同：0
> 
> 时间：2013-03-03T10:55:12.770
> 
> 标签：sitecore, sitecore6

我有一个站点核心项目“类别”，它有一个填充“产品类型”模板列表的下拉链接。

每个类别都可以有一个“产品类型”。

（在类别节点下创建的产品将使用下拉列表中选择的模板。例如，鞋类将有一个鞋类模板，拖鞋类也将有一个鞋类模板，包类将有一个包包模板）。

问题：

1.  这些类别应该能够标记相关类别。因此，我需要显示一个树列表类型的控件，它只允许选项选择具有相同“产品类型”的类别。在“鞋子”类别下，我需要有“拖鞋”。我怎样才能做到这一点？

2.  选择“拖鞋”作为“鞋子”的相关项目后，如果用户尝试更改“拖鞋”中的“产品类型”下拉链接值，如何警告用户该产品类型已链接到另一个类别？（保存类别项目的验证。）

希望这是 Sitecore 中相关项目的常见问题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:39:24.817

你的第一个问题，“标记相关类别”我不清楚你想用它实现什么。但是如果我理解正确的话，你想在 Category-item 中选择一个 product-type-template 让编辑器在 Category-item 下创建所选产品类型的产品。

您可以通过使用 Category-item 上的[item:saved 事件](http://sdn.sitecore.net/Articles/API/Using%20Events.aspx)来解决此问题： - 首先检查您是否正在保存 Category 类型的项目但检查模板。- 如果是 Category-Item，请读取 product-type droplink 的值，然后将此模板动态添加到 Category 项目的插入选项中。

您检查相关项目的第二个问题只能通过使用 item:saving 事件以相同的方式处理。不是 item:saved 事件，因为您想在保存项目之前进行检查，以便您可以取消保存并通过该`Sitecore.Web.UI.Sheer.SheerResponse.Alert()`方法显示消息框。在 item:saving 事件中，您需要通过 LinkDatabase 方法检查当前项目是否有 1 个或多个引用者（链接到该项目的项目）`Globals.LinkDatabase.GetReferrers()`。

对此而不是 item:saving 事件使用验证是没有用的，因为验证事件只会引发警告并保存项目。

另一个很好的示例代码链接是John West 的[博客](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Intercepting-Item-Updates-with-Sitecore.aspx)。

# c++ - 找出 AxB 网格中有多少匝

> ID：15184928
> 
> 赞同：0
> 
> 时间：2013-03-03T10:55:39.807
> 
> 标签：c++, arrays, grid

所以，基本上，检查下面的图片：

![图片](../Images/7f4e24ce404ee4c85766a8de25efc9b0.png)

这是解释的 4x5 网格，但实际挑战需要您输入网格尺寸。所以，我的工作是编写一个程序来计算你转动的次数（在这种情况下是红点）。起始位置始终在左下角。这家伙正在按时钟的箭头移动（“右”）。

程序输入/输出为：您输入的网格尺寸：4 5（例如）

你输出方向变化的量。7

所以，我完全不知道它是如何完成的。我只看到的解决方案如下：

```
#include <iostream>
#include <cmath>
using namespace std;
int main() {
    long long n, i,pom,m;
    int k,br=0;

    cin>>n>>m;
    if(n>m) {
        int pom=n;
        n=m;
        m=n;
    }
    if(n+1>=m)
        cout<<(n-1)+(m-1);
    else
        cout<<(n-1) +(n-1)+1;

    return 0;
} 
```

但我不明白下面的例子......谁能解释发生了什么？或者任何其他解决这个问题的方法总是受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:27:39.693

```
int res = 0;
if(height == width)
    res = height * 2 - 2;//when height is odd than you will have 2 rows with single red dot
                           //when height is even you will have one row without red dot (all the rest have 2 red dots.
else if (width > height)
   res = height * 2 - 1;//one rows with 1 red dot the rest with 2 red dots.
else //height > width
   res = width * 2 - 2// 2 columns with one red dot and the rest with 2 red dots. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:51:00.350

我不是 C++ 人，所以无法帮助理解代码。但肯定可以帮助了解这里的情况。情况是匝数将仅取决于两个维度之一。哪个更少。所以匝数取决于较小的尺寸和那一侧的盒子数量。因为在图片中，当您采用 4X5 阵列时，无论您将宽度增加到多少。只要高度为 4，则转数将仅保持 7。但是，如果将宽度从 4 减小到 3，则匝数现在取决于宽度。

现在关于点的数量。如果两个维度相同且奇数，则假设维度为 2A+1，则匝数将为 4*A。

如果一个维度较小，则如果维度相同且偶数，则假设维度为 2*A ，则匝数将为 4A-2。

如果较小的尺寸是偶数，则假设尺寸为2*A，那么匝数将为4A-1。

如果较小的尺寸是奇数，则假设尺寸为2A+1，那么匝数将为4A+1。

看看这是否适用于您自己的新代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:51:07.690

此代码有条件地交换`n`并`m`制作`n <= m`：

```
if(n>m) {
    int pom=n;
    n=m;
    m=n;
} 
```

鉴于此，条件`n+1>=m`等价于`n == m || n + 1 == m`。

请注意，这两个公式`(n-1)+(m-1)`和`(n-1) +(n-1)+1`给出相同的结果`n + 1 == m`。

所以实际上没有必要检查是否`n + 1 == m`; 只有特殊情况`n == m`才重要。如果`n == m`，那么你可以使用公式`(n-1)+(m-1)`，或者只是`2 * n - 2`。否则，使用公式`(n-1) +(n-1)+1`，或者只是`2 * n - 1`。

重写代码：

```
int calculate_number_of_turns(int m, int n)
{
    if (m == n)
        return 2 * n - 2;
    else
        return 2 * std::min(m, n) - 1;
} 
```

编辑：

如果您想从头开始编写代码，而无需事先了解数学，您可以先编写一个递归函数。

如果`n = 2`，很容易看出答案是 3（3 圈）。如果`m = 2`，则答案为 2。否则（假设`n > 2`和`m > 2`），计算涉及为不同的参数调用相同的函数。

```
int calculate_number_of_turns(int m, int n)
{
    if (n == 2)
        return 3;
    else if (m == 2)
        return 2;
    else
        return calculate_number_of_turns(???, ???);
} 
```

想象一下从图片中的路径开始，然后在第二个转弯后立即停止。如果你把图片倒过来，就好像你用和高度减1一样。所以调用相同的函数将计算*除了*前2圈之外还`m - 1, n - 1`剩下要做的圈数。

 *```
int calculate_number_of_turns(int m, int n)
{
    if (n == 2)
        return 3;
    else if (m == 2)
        return 2;
    else
        return 2 + calculate_number_of_turns(m - 1, n - 1);
} 
```

现在，将此递归函数转换为任何更简单的形式并不太复杂（只需计算函数将调用自身的次数，直到终止条件成立）。*

# php - 在更改时间时将“@”替换为文本“at”

> ID：15184929
> 
> 赞同：-4
> 
> 时间：2013-03-03T10:55:41.383
> 
> 标签：php, wordpress, date, time

我有一个 wordpress 博客，我想向用户展示上次更新的网站。在下面的代码中，我有`mysql2date('j F Y **@** H:i', $last);`.

我只想用这样的文字替换“@”：“最后更新于 2013 年 3 月 3 日” ***，时间为***“11:39”

这是原始代码：

```
<?php
$last = $wpdb->get_var("SELECT post_modified FROM $wpdb->posts order by post_modified DESC LIMIT 1");
echo "Last updated " . mysql2date('j F Y @ H:i', $last);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:57:21.287

你不能只在格式字符串中写“at”，我相信你知道，因为该函数会将每个字母解释为时间\日期变量。但是您可以在日期格式字符串中包含普通字母，而不会将它们解释为时间/日期变量，方法是使用反斜杠“转义”它们：

`'j F Y \a\t H:i'`

PHP（Wordpress 使用）中时间/日期格式字符串的文档可在此处获得：[http](http://www.php.net/manual/en/function.date.php) ://www.php.net/manual/en/function.date.php 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:59:15.140

```
SELECT DATE_FORMAT(post_modified, "Last updated %e %M %Y at %k:%i") FROM ... 
```

# javascript - 未捕获的类型错误：对象 [对象数组] 没有方法“节点”

> ID：15184930
> 
> 赞同：1
> 
> 时间：2013-03-03T10:56:01.990
> 
> 标签：javascript, d3.js

我试图让这个例子工作；

[http://bl.ocks.org/mbostock/raw/2966094/46279db71d3c218664f72e1d3cb74cb2fb46da43/](http://bl.ocks.org/mbostock/raw/2966094/46279db71d3c218664f72e1d3cb74cb2fb46da43/)

在线示例完美运行。但是，当我将示例复制到本地 MAMP 安装时，出现以下错误：

```
Uncaught TypeError: Object [object Array] has no method 'nodes'. 
```

我的 json 加载正确，有谁知道这个问题来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:06:40.300

我刚刚做了以下事情：

```
git clone https://gist.github.com/2966094.git pedigree_tree
cd pedigree_tree
python -m SimpleHTTPServer 
```

...然后打开我的浏览器：

```
http://localhost:8000/ 
```

该示例可以正常工作，这是可以预料的。

也许您可以尝试复制我的步骤（您的 Mac 上应该有 Python）。如果它通过 python SimpleHTTPServer 工作，则假设您的 MAMP 配置有问题。

或者，您的示例下载/克隆可能出现问题。您是否在浏览器开发者控制台中看到任何错误（在 Chrome 中：菜单 | 工具 | 开发者工具）？

# mysql - 如何为我的特殊情况有效地设计 MySQL 数据库

> ID：15184931
> 
> 赞同：-2
> 
> 时间：2013-03-03T10:56:06.013
> 
> 标签：mysql, sql, database, database-design, relational-database

我正在开发一个 PHP MySQL 论坛。我想让我的论坛尽可能高效。

我做了这两张桌子

1.  tbl_threads
2.  tbl_comments

现在，问题是每个评论下都有一个喜欢和不喜欢的按钮。我必须存储`user_name`单击了喜欢或不喜欢按钮的`comment_id`. 我已经创建了一个 user_likes 列和一个`user_dislikes`用于`tbl_comments`存储逗号分隔的 user_names 的列。但是在这个论坛上，我读到这不是一种有效的方法。有人建议我创建第三个表来存储喜欢和不喜欢，并使我的数据库设计符合 1NF。

但问题是，如果我制作第三张表`tbl_user_opinion`并制作两个像这样的字段 1.comment_id 2.类型（喜欢或不喜欢）

那么，我是否必须运行与我的页面上的评论一样多的 sql 查询才能获取每个评论的喜欢和不喜欢数据。会不会低效。我认为我在这里有些困惑。有人可以澄清这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:51:21.040

逗号分隔的列表违反了[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)原则，因此违反了 1NF。您将很难维护引用完整性，并且在大多数情况下，查询也是如此。

这是以标准化方式执行此操作的一种方法：

![在此处输入图像描述](../Images/56aea40d4f1bbb9ea578172e1b0c780a.png)

[这对集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)非常友好：它将属于同一评论的赞成票在物理上靠近在一起（反对票同上），使以下查询相当有效：

```
SELECT
    COMMENT.COMMENT_ID,
    <other COMMENT fields>,
    COUNT(DISTINCT UP_VOTE.USER_ID) - COUNT(DISTINCT DOWN_VOTE.USER_ID) SCORE
FROM COMMENT
    LEFT JOIN UP_VOTE
        ON COMMENT.COMMENT_ID = UP_VOTE.COMMENT_ID
    LEFT JOIN DOWN_VOTE
        ON COMMENT.COMMENT_ID = DOWN_VOTE.COMMENT_ID
WHERE
    COMMENT.COMMENT_ID = <whatever>
GROUP BY
    COMMENT.COMMENT_ID,
    <other COMMENT fields>; 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!2/167cc/26)

如果对您来说足够快，请测量实际数据量。如果不是，则对模型进行非规范化并将总分缓存在 COMMENT 表中，并在每次向 *_VOTE 表插入新行或从 *_VOTE 表中删除新行时通过触发器使其保持最新。

如果您还需要获取特定用户投票的评论，则需要 *_VOTE {USER_ID, COMMENT_ID} 上的索引，即上面的主键/集群键的反面。¹

* * *

*¹这就是为什么我不只使用一个包含额外字段的 VOTE 表的原因之一，该字段可以是 1（表示赞成）或 -1（表示反对）：用次要[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)的效率较低索引。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:24:21.533

你有一个这样的关系方案：

有两种方法可以解决这个问题。第一个，“干净”的一个是建立你的“喜欢”表，并在适当的列上做“计数（*）”。

第二个是在每条评论中存储一个计数器，指示那里有多少涨跌。如果您想检查，如果特定用户对评论投票，您只需要检查一个条目，您可以轻松地将它们作为自己的查询处理并将它们合并到您的数据库之外（为此使用查询导致 comment_id 和用户在特定线程中所做的投票。）

您使用逗号分隔列表的方法不是很高效，因为如果没有更高的智能或大量的解析字符串，您将无法解析它。如果你有一个数据库 - 使用它！

（“一个信息 - 一个数据集”！）

# linux - 如何从 bash 将源代码上传到 Arduino？

> ID：15184932
> 
> 赞同：6
> 
> 时间：2013-03-03T10:56:23.053
> 
> 标签：linux, bash, deployment, arduino

现在我正在使用标准的 Arduino IDE 1.0.1。

然而，我发现 IDE 本身很笨拙，而我自己在其他编辑器中编辑代码只需要复制粘贴到 IDE 中并将其上传到我的 Arduino。

我真的不喜欢这个工作流程。

所以我想知道：是否有不同的方式通过命令行部署 Arduino 项目？基本上我正在寻找一种`arduino deploy /path/to/project /dev/ttyUSB0`从 bash 运行类似东西的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T11:08:37.313

您需要一个调用程序`avrdude`将二进制文件上传到您的目标，并根据您的设置和目标修改参数：

```
mcu=atmega8
f_cpu=16000000
format=ihex
rate=19200
port=/dev/ttyusb0
programmer=stk500
target_file=test.hex

avrdude -F -p $mcu -P $port -c $programmer -b $rate -U flash:w:$target_file 
```

如果您在一台`Debian`或一`Ubuntu`台机器上，您应该能够执行以下操作来安装`avrdude`：

```
sudo apt-get install avrdude 
```

否则，您应该能够从[这里](http://savannah.nongnu.org/projects/avrdude)获取资源并自己构建它。

还有一个全面的[Makefile](http://arduino.cc/playground/uploads/Learning/Makefile)，您可以使用它来构建和上传到您的文件`Arduino`，它再次使用类似的`avrdude`命令上传到目标。更改Makefile中的参数后，运行`make upload`将hex文件上传到目标。

**注意：**您需要安装`gcc-avr`并`avr-libc`安装软件包才能构建二进制文件（从问题来看，您已经在这样做了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T06:27:34.723

以下是您可以尝试的两个选项

**仅限 Arduino 1.5.x**

如果您使用的是 Arduino 1.5.x，那么您可以使用 arduino 可执行文件可以接受[命令行参数](https://github.com/arduino/Arduino/wiki/Arduino-IDE-1.5-from-command-line)。

请注意，Arduino 1.5.x 仍处于测试阶段，因此您可能会遇到一些问题。

**Arduino 1.0.x**

如果您使用的是 Arduino 1.0.x，那么您可以使用我[的 Arduino 生成文件，](http://hardwarefun.com/tutorials/compiling-arduino-sketches-using-makefile)它可用于从命令行编译和上传 Arduino（或普通 AVR C）程序到 Arduino。

以下是此 makefile 的一些重要功能

*   支持通过 Arduino 作为 ISP 或任何程序员上传
*   通过串口与 Arduino 通信
*   支持编译纯 AVR C 程序
*   支持用户库和系统库。
*   生成程序集和符号文件
*   使用备用 Arduino 内核（如 ATtiny 或 Arduino 备用内核）进行编程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T14:39:32.757

我为 ubuntu/linux 制作了一个 arduino 构建器，它有帮助

*   建造
*   上传
*   监听串口
*   跟踪草图文件中的更改

生成器和如何设置一切的说明可以在这里找到： [https ://github.com/limitium/arduino_builder](https://github.com/limitium/arduino_builder)

你也可以在这里看到关于它的小演示视频： [https ://youtu.be/Nu3YGMoXORI](https://youtu.be/Nu3YGMoXORI)

# php - 以下 Facebook 登录 php 代码显示意外错误

> ID：15184933
> 
> 赞同：0
> 
> 时间：2013-03-03T10:56:23.283
> 
> 标签：php, facebook, facebook-graph-api, facebook-login

我正在尝试使用 facebook 登录并回显用户的 /me/ 图形详细信息。我根据 facebook 的开发人员页面编写了以下代码，但出现了问题，页面[https://qonnect.co/fbcon.php](https://qonnect.co/fbcon.php)无法加载！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Qonnect | Your online ID on the web</title>
<meta content="online identity, social network, contact details, share, personal profile">
<?php require_once("facebook.php"); ?>
</head>

<body>
  <p>chekc access token at bottom</p>
<?php 

   $app_id = "353349231445***";
   $app_secret = "1299cd46fd******";
   $my_url = "https://www.qonnect.co";

   session_start();

   $code = $_REQUEST["code"];

   if(empty(code))
   {
    $_SESSION['state']= md5(uniqid(rand(), TRUE));
      $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'] . "&scope=user_birthday,read_stream";

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

      //rechecking of sessions state variable for CSRF attack !
      if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
        $token_url = "https://graph.facebook.com/oauth/access_token?"."client_id=".$app_id.
        "&redirect_uri=".urlencode($my_url)."&client_secret=".$app_secret."&code=".$code; //code exchanged for access token.
        $response = file_get_contents($token_url);
        $params = null;
        parse_str($response, $params);

        $graph_url = "https://graph.facebook.com/me?access_token=". $params['access_token'];
        $user = json_decode(file_get_contents($graph_url));
        echo("Hello", $user->name);
     }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   }
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:25:25.627

> 如果我是对的，500 Internal Server Error 可能是由
> 
> ```
> A malformed php cgi script
> An invalid directive in an .htaccess or other config file
> Limitation imposed by file system and server software 
> Error/Missing php.ini 
> ```
> 
> 在大多数情况下，它是无效的 .htaccess 指令

你能检查一下吗

1) .htaccess

2）让我知道整个 php 代码的捕获

```
>       try{
>     
>     } catch(Exception $o){
>           echo $o;
>       } 
```

3.你能设置一个

```
set_time_limit ( int seconds) 
```

# sql - 如何向表中添加多个列并在其中一个上添加默认约束？

> ID：15184939
> 
> 赞同：28
> 
> 时间：2013-03-03T10:57:24.950
> 
> 标签：sql, sql-server, tsql

我想在现有表中添加 2 个新列。

其中之一应`NOT NULL`具有默认值*0* （也填写现有行）。

我尝试了以下语法：

```
Alter TABLE dbo.MamConfiguration
    add [IsLimitedByNumOfUsers] [bit]  NOT NULL,
    CONSTRAINT IsLimitedByNumOfUsers_Defualt [IsLimitedByNumOfUsers] DEFAULT 0
    [NumOfUsersLimit] [int] NULL
go 
```

但它抛出异常。我应该怎么写？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-03T10:59:57.277

你可以使用这个：

```
ALTER TABLE dbo.MamConfiguration
ADD [IsLimitedByNumOfUsers] [BIT] NOT NULL DEFAULT 0,   
    [NumOfUsersLimit] [INT] NULL
GO 
```

或这个：

```
ALTER TABLE dbo.MamConfiguration
ADD [IsLimitedByNumOfUsers] [BIT] NOT NULL 
        CONSTRAINT IsLimitedByNumOfUsers_Default DEFAULT 0,
    [NumOfUsersLimit] [INT] NULL
go 
```

更多：[更改表](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T11:05:47.570

试试这个。

```
ALTER TABLE dbo.MamConfiguration  
ADD [IsLimitedByNumOfUsers] [bit]  NOT NULL DEFAULT 0,     
[NumOfUsersLimit] [int] NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-18T11:25:09.457

**要将多个列添加到表中并在其中一个上添加默认约束 -**

```
ALTER TABLE dbo.MamConfiguration
ADD [IsLimitedByNumOfUsers] [BIT] CONSTRAINT Def_IsLimitedByNumOfUsers DEFAULT(0) NOT NULL,   
    [NumOfUsersLimit] [INT] NULL;
GO 
```

# c# - @Html.DisplayNameFor 和单页应用程序

> ID：15184941
> 
> 赞同：1
> 
> 时间：2013-03-03T10:57:27.217
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, knockout.js

该`DisplayName`属性非常有用。它将影响`@Html.DisplayNameFor()`视图中使用的所有位置。无论如何在 Asp.Net Mvc 4 单页应用程序中使用该属性？

```
public class MyModel 
{ 
    [DisplayName("fancy name")]
    public int A { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:01:20.143

你可以使用这个@LabelFor

```
@Html.LabelFor(m=>m.Name) 
```

# java - 如何阻塞直到 BlockingQueue 为空？

> ID：15184943
> 
> 赞同：26
> 
> 时间：2013-03-03T10:57:34.453
> 
> 标签：java, concurrency, blockingqueue

我正在寻找一种方法来阻止直到 a`BlockingQueue`为空。

我知道，在多线程环境中，只要有生产者将项目放入`BlockingQueue`.

但是，如果只有*一个*生产者，那么在它停止将项目放入队列后，它可能想要等待（并阻塞）直到队列为空。

Java/伪代码：

```
// Producer code
BlockingQueue queue = new BlockingQueue();

while (having some tasks to do) {
    queue.put(task);
}

queue.waitUntilEmpty(); // <-- how to do this?

print("Done"); 
```

你有什么主意吗？

**编辑**：我知道包装`BlockingQueue`和使用额外的条件可以解决问题，我只是问是否有一些预制的解决方案和/或更好的替代方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-03T11:06:02.257

使用`wait()`and的简单解决方案`notify()`：

```
// Producer:
synchronized(queue) {
    while (!queue.isEmpty())
        queue.wait(); //wait for the queue to become empty
    queue.put();
}

//Consumer:
synchronized(queue) {
    queue.get();
    if (queue.isEmpty())
        queue.notify(); // notify the producer
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-11T17:43:52.010

我知道您可能已经有一堆线程在主动轮询或排队，但我仍然觉得您的流程/设计不太正确。

队列变空并不意味着之前添加的任务已经完成，有些项目可能需要很长时间才能处理，因此检查是否为空并没有太大用处。

所以你应该做的是忘记`BlockingQueue`，你可以将它用作任何其他集合。将项目翻译成`Collections`of`Callable`并使用`ExecutorService.invokeAll()`。

```
 Collection<Item> queue = ...
    Collection<Callable<Result>> tasks = new ArrayList<Callable<Result>>();

    for (Item item : queue) {
        tasks.add(new Callable<Result>() {

            @Override
            public Result call() throws Exception {
                // process the item ...

                return result;
            }
        });
    }

    // look at the results, add timeout for invokeAll if necessary
    List<Future<Result>> results = executorService.invokeAll(tasks);

    // done 
```

这种方法将使您完全控制生产者可以等待多长时间以及适当的异常处理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T11:12:48.630

这不是您想要做的，但是使用 a`SynchronousQueue`会产生与您的 Java/Pseudocode 非常相似的效果，即生产者阻塞，直到某个消费者检索到所有数据。

唯一的区别是生产者在每个 put 上阻塞，直到消费者来检索数据，而不是最后一次。不确定这是否会对您的情况产生影响。如果生产者执行的任务有点昂贵，我希望它只会产生明显的不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T11:29:45.953

您的用例应该非常特殊，因为通常您只想在队列已满时阻塞生产者，而不是等到它为空。

无论如何，这是可行的。我相信旋转直到`isEmpty`返回 true 并没有那么低效，因为生产者将在本地旋转，即，将访问自己的缓存，而不是撞到总线。但是，由于线程仍然可调度，因此会消耗 CPU 时间。但是本地旋转绝对是更简单的方法。否则我会看到两个选项：

1.  使用`wait`+ `notify`like @niculare 建议
2.  不知何故，让第一个注意到队列为空的消费者以无锁的方式通知生产者；这会更慢，但会优雅地降级“更多”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-17T14:22:25.753

@niculare 给出的答案似乎还可以，但请查看@hankduan 的评论。

我在寻找类似问题的解决方案时看到了这个问题。
最后，我或多或少地重写了`LinkedBlockingQueue`.
它具有其方法的子集，并且不实现`Collection`or `Iterable`。
它管理多个生产者和消费者。
对我来说它有效。

```
/**********************************************************************************************************************
 * Import specifications
 *********************************************************************************************************************/
import java.util.Date;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.*;

/**********************************************************************************************************************
 * This class implements a completely reentrant FIFO.
 *********************************************************************************************************************/
public class BlockingFIFO<E>
{
  /********************************************************************************************************************
   * The constructor creates an empty FIFO with a capacity of {@link Integer#MAX_VALUE}.
   *******************************************************************************************************************/
  public BlockingFIFO()
  {
    // -----------------
    // Initialize object
    // -----------------
    this(Integer.MAX_VALUE);

  } // constructor

  /********************************************************************************************************************
   * The constructor creates an empty FIFO with the specified capacity.
   *
   * @param capacity_ipar The maximum number of elements the FIFO may contain.
   *******************************************************************************************************************/
  public BlockingFIFO(int capacity_ipar)
  {
    // ---------------------
    // Initialize attributes
    // ---------------------
    lock_attr = new ReentrantLock();
    not_empty_attr = lock_attr.newCondition();
    not_full_attr = lock_attr.newCondition();
    head_attr = null;
    tail_attr = null;
    capacity_attr = capacity_ipar;
    size_attr = 0;

  } // constructor

  /********************************************************************************************************************
   * This method removes all of the elements from the FIFO.
   *
   * @return The number of elements in the FIFO before it was cleared.
   *******************************************************************************************************************/
  public int clear()
  {
    // -----------------
    // Initialize result
    // -----------------
    int result;
    result = 0;

    // ----------
    // Clear FIFO
    // ----------
    lock_attr.lock();
    try
    {
      result = size_attr;
      head_attr = null;
      tail_attr = null;
      size_attr = 0;
      not_full_attr.signalAll();
    }
    finally
    {
      lock_attr.unlock();
    }

    // ----
    // Done
    // ----
    return (result);

  } // clear

  /********************************************************************************************************************
   * This method returns the number of elements in the FIFO.
   *
   * @return The number of elements in the FIFO.
   *******************************************************************************************************************/
  public int size()
  {
    // -----------
    // Return size
    // -----------
    lock_attr.lock();
    try
    {
      return (size_attr);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // size

  /********************************************************************************************************************
   * This method returns the number of additional elements that the FIFO can ideally accept without blocking.
   *
   * @return The remaining capacity the FIFO.
   *******************************************************************************************************************/
  public int remainingCapacity()
  {
    // -------------------------
    // Return remaining capacity
    // -------------------------
    lock_attr.lock();
    try
    {
      return (capacity_attr - size_attr);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // remainingCapacity

  /********************************************************************************************************************
   * This method waits for the FIFO to become empty.
   *
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for the FIFO to become
   *                              empty.
   *******************************************************************************************************************/
  public void waitEmpty()
    throws InterruptedException
  {
    // -----------------------------
    // Wait for FIFO to become empty
    // -----------------------------
    lock_attr.lock();
    try
    {
      while (size_attr > 0)
        not_full_attr.await();
    }
    finally
    {
      lock_attr.unlock();
    }

  } // waitEmpty

  /********************************************************************************************************************
   * This method waits at most the specified time for the FIFO to become empty.
   * <br>It returns <code>true</code> if the FIFO is empty and <code>false</code> otherwise.
   *
   * @param  timeout_ipar         The maximum number of milliseconds to wait for the FIFO to become empty.
   * @return                      True if and only if the FIFO is empty.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for the FIFO to become
   *                              empty.
   *******************************************************************************************************************/
  public boolean waitEmpty(long timeout_ipar)
    throws InterruptedException
  {
    // ------------------
    // Determine deadline
    // ------------------
    Date deadline;
    deadline = new Date(System.currentTimeMillis() + timeout_ipar);

    // -----------------------------
    // Wait for FIFO to become empty
    // -----------------------------
    lock_attr.lock();
    try
    {
      while (size_attr > 0)
      {
        if (!not_full_attr.awaitUntil(deadline))
          return (false);
      }
      return (true);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // waitEmpty

  /********************************************************************************************************************
   * This method waits at most the specified time for the FIFO to become empty.
   * <br>It returns <code>true</code> if the FIFO is empty and <code>false</code> otherwise.
   *
   * @param  timeout_ipar         The maximum time to wait for the FIFO to become empty.
   * @param  unit_ipar            The unit of the specified timeout.
   * @return                      True if and only if the FIFO is empty.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for the FIFO to become
   *                              empty.
   *******************************************************************************************************************/
  public boolean waitEmpty(long    timeout_ipar,
                           TimeUnit unit_ipar)
    throws InterruptedException
  {
    // -----------------------------
    // Wait for FIFO to become empty
    // -----------------------------
    return (waitEmpty(unit_ipar.toMillis(timeout_ipar)));

  } // waitEmpty

  /********************************************************************************************************************
   * This method adds the specified element at the end of the FIFO if it is possible to do so immediately without
   * exceeding the queue's capacity.
   * <br>It returns <code>true</code> upon success and <code>false</code> if this queue is full.
   *
   * @param  element_ipar The element to add to the FIFO.
   * @return              True if and only if the element was added to the FIFO.
   *******************************************************************************************************************/
  public boolean offer(E element_ipar)
  {
    // ----------------------
    // Try to add the element
    // ----------------------
    lock_attr.lock();
    try
    {
      if (capacity_attr > size_attr)
      {
        push(element_ipar);
        return (true);
      }
      else
        return (false);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // offer

  /********************************************************************************************************************
   * This method adds the specified element at the end of the FIFO, waiting if necessary up to the specified wait time
   * for space to become available.
   * <br>It returns <code>true</code> upon success and <code>false</code> if this queue is full.
   *
   * @param  element_ipar         The element to add to the FIFO.
   * @param  timeout_ipar         The maximum number of milliseconds to wait for space to become available.
   * @return                      True if and only if the element was added to the FIFO.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for space to become
   *                              available.
   *******************************************************************************************************************/
  public boolean offer(E    element_ipar,
                       long timeout_ipar)
    throws InterruptedException
  {
    // ------------------
    // Determine deadline
    // ------------------
    Date deadline;
    deadline = new Date(System.currentTimeMillis() + timeout_ipar);

    // ----------------------
    // Try to add the element
    // ----------------------
    lock_attr.lock();
    try
    {
      while (size_attr == capacity_attr)
      {
        if (!not_full_attr.awaitUntil(deadline))
          return (false);
      }
      push(element_ipar);
      return (true);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // offer

  /********************************************************************************************************************
   * This method adds the specified element at the end of the FIFO, waiting if necessary up to the specified wait time
   * for space to become available.
   * <br>It returns <code>true</code> upon success and <code>false</code> if this queue is full.
   *
   * @param  element_ipar         The element to add to the FIFO.
   * @param  timeout_ipar         The maximum time to wait for space to become available.
   * @param  unit_ipar            The unit of the specified timeout.
   * @return                      True if and only if the element was added to the FIFO.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for space to become
   *                              available.
   *******************************************************************************************************************/
  public boolean offer(E        element_ipar,
                       long     timeout_ipar,
                       TimeUnit unit_ipar)
    throws InterruptedException
  {
    // ----------------------------
    // Try to add specified element
    // ----------------------------
    return (offer(element_ipar, unit_ipar.toMillis(timeout_ipar)));

  } // offer

  /********************************************************************************************************************
   * This method adds the specified element at the end of the FIFO, waiting if necessary for space to become available.
   *
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for space to become
   *                              available.
   *******************************************************************************************************************/
  public void put(E element_ipar)
    throws InterruptedException
  {
    // ----------------------
    // Try to add the element
    // ----------------------
    lock_attr.lock();
    try
    {
      while (size_attr == capacity_attr)
        not_full_attr.await();
      push(element_ipar);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // put

  /********************************************************************************************************************
   * This method retrieves, but does not remove, the head of the FIFO, or returns <code>null</code> if the FIFO is
   * empty.
   *
   * @return The head of the FIFO, or <code>null</code> if the FIFO is empty.
   *******************************************************************************************************************/
  public E peek()
  {
    // --------------------
    // Return first element
    // --------------------
    lock_attr.lock();
    try
    {
      if (size_attr == 0)
        return (null);
      else
        return (head_attr.contents);
    }
    finally
    {
      lock_attr.unlock();
    }

  } // peek

  /********************************************************************************************************************
   * This method retrieves and removes the head of the FIFO, or returns <code>null</code> if the FIFO is
   * empty.
   *
   * @return The head of the FIFO, or <code>null</code> if the FIFO is empty.
   *******************************************************************************************************************/
  public E poll()
  {
    // --------------------
    // Return first element
    // --------------------
    lock_attr.lock();
    try
    {
      if (size_attr == 0)
        return (null);
      else
        return (pop());
    }
    finally
    {
      lock_attr.unlock();
    }

  } // poll

  /********************************************************************************************************************
   * This method retrieves and removes the head of the FIFO, waiting up to the specified wait time if necessary for an
   * element to become available.
   * <br>It returns <code>null</code> if the specified waiting time elapses before an element is available.
   *
   * @param  timeout_ipar         The maximum number of milliseconds to wait for an element to become available.
   * @return                      The head of the FIFO, or <code>null</code> if the specified waiting time elapses
   *                              before an element is available.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for an element to become
   *                              available.
   *******************************************************************************************************************/
  public E poll(long timeout_ipar)
    throws InterruptedException
  {
    // ------------------
    // Determine deadline
    // ------------------
    Date deadline;
    deadline = new Date(System.currentTimeMillis() + timeout_ipar);

    // --------------------
    // Return first element
    // --------------------
    lock_attr.lock();
    try
    {
      while (size_attr == 0)
      {
        if (!not_empty_attr.awaitUntil(deadline))
          return (null);
      }
      return (pop());
    }
    finally
    {
      lock_attr.unlock();
    }

  } // poll

  /********************************************************************************************************************
   * This method retrieves and removes the head of the FIFO, waiting up to the specified wait time if necessary for an
   * element to become available.
   * <br>It returns <code>null</code> if the specified waiting time elapses before an element is available.
   *
   * @param  timeout_ipar         The maximum time to wait for an element to become available.
   * @param  unit_ipar            The unit of the specified timeout.
   * @return                      The head of the FIFO, or <code>null</code> if the specified waiting time elapses
   *                              before an element is available.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for an element to become
   *                              available.
   *******************************************************************************************************************/
  public E poll(long     timeout_ipar,
                TimeUnit unit_ipar)
    throws InterruptedException
  {
    // ------------------------
    // Try to get first element
    // ------------------------
    return (poll(unit_ipar.toMillis(timeout_ipar)));

  } // poll

  /********************************************************************************************************************
   * This method retrieves and removes the head of the FIFO, waiting if necessary for an element to become available.
   *
   * @return                      The head of the FIFO.
   * @throws InterruptedException Thrown when the current thread got interrupted while waiting for space to become
   *                              available.
   *******************************************************************************************************************/
  public E take()
    throws InterruptedException
  {
    // ---------------------------
    // Try to return first element
    // ---------------------------
    lock_attr.lock();
    try
    {
      while (size_attr == 0)
        not_empty_attr.await();
      return (pop());
    }
    finally
    {
      lock_attr.unlock();
    }

  } // take

  /********************************************************************************************************************
   * This class implements as node within the FIFO.
   *******************************************************************************************************************/
  private class Node
  {
    E    contents;
    Node next;

  } // class Node

  /********************************************************************************************************************
   * This method adds the specified element to the end of the FIFO.
   * <br>It sends a signal to all threads waiting for the FIFO to contain something.
   * <br>The caller should have locked the object and have made sure the list is not full.
   *******************************************************************************************************************/
  private void push(E element_ipar)
  {
    // -----------
    // Create node
    // -----------
    Node node;
    node = new Node();
    node.contents = element_ipar;
    node.next = null;

    // --------------
    // Add to the end
    // --------------
    if (head_attr == null)
      head_attr = node;
    else
      tail_attr.next = node;
    tail_attr = node;

    // ----------------------
    // We got another element
    // ----------------------
    size_attr++;
    not_empty_attr.signalAll();

  } // push

  /********************************************************************************************************************
   * This method removes the first element from the FIFO and returns it.
   * <br>It sends a signal to all threads waiting for the FIFO to have space available.
   * <br>The caller should have locked the object and have made sure the list is not empty.
   *******************************************************************************************************************/
  private E pop()
  {
    // ------------
    // Isolate node
    // ------------
    Node node;
    node = head_attr;
    head_attr = node.next;
    if (head_attr == null)
      tail_attr = null;

    // --------------------------
    // We removed another element
    // --------------------------
    size_attr--;
    not_full_attr.signalAll();

    // ----
    // Done
    // ----
    return (node.contents);

  } // pop

  /********************************************************************************************************************
   * This attribute represents the lock on the FIFO.
   *******************************************************************************************************************/
  private Lock lock_attr;

  /********************************************************************************************************************
   * This attribute represents the condition of the FIFO not being empty.
   *******************************************************************************************************************/
  private Condition not_empty_attr;

  /********************************************************************************************************************
   * This attribute represents the condition of the FIFO not being full.
   *******************************************************************************************************************/
  private Condition not_full_attr;

  /********************************************************************************************************************
   * This attribute represents the first element of the FIFO.
   *******************************************************************************************************************/
  private Node head_attr;

  /********************************************************************************************************************
   * This attribute represents the last element of the FIFO.
   *******************************************************************************************************************/
  private Node tail_attr;

  /********************************************************************************************************************
   * This attribute represents the capacity of the FIFO.
   *******************************************************************************************************************/
  private int capacity_attr;

  /********************************************************************************************************************
   * This attribute represents the size of the FIFO.
   *******************************************************************************************************************/
  private int size_attr;

} // class BlockingFIFO 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-06-20T10:41:13.913

根据[文档](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)，可以通过以下方法在“删除”时阻止 BlockingQueue：`take()`或者`poll(time, unit)`代替`poll()`

# c++ - 如何指向链表中的下一个内存？

> ID：15184946
> 
> 赞同：1
> 
> 时间：2013-03-03T10:57:57.740
> 
> 标签：c++, linked-list, hashtable

这些是我的结构声明

```
struct Package_Node
{
    int bar_code;
    float package_weight;
    struct Package_Node *next;//_packaged;
};

struct Key_Node
{
    int key;
    struct Package_Node *next;//_package;
}; 
```

这就是在其中添加一些随机项目的方式

```
 for(int i=0;i<N;i++)
        {
            barcodeTemp = rand() % max_value + 1;
            keyTemp = barcodeTemp % X;
            tempWeight = rand() % 500 + 1;
            totalPackages[i].bar_code=barcodeTemp;
            totalPackages[i].package_weight=tempWeight;

        }
        for(int i=0;i<N;i++)
        {
            cout << totalPackages[i].bar_code <<endl;
            cout << totalPackages[i].package_weight << endl;
        } 
```

我想知道我是否需要在代码内部和结构外部添加一些东西来创建链表？更清楚地说，我正在使用 Package_node 结构创建（比方说）5 个随机包，这些包具有 bar_code 和 package_weight 的随机值。我正在使用哈希表方法来确定 key_node 中包信息的存储位置。如果 key_node[1] 有两个元素并且我想添加第三个元素，我该怎么做才能在末尾添加第三个元素而不删除任何内容。它必须是一个链接列表，并且末尾必须始终指向 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:01:45.450

在你的 for 循环中添加这样的内容：

```
totalPackages[i].next = NULL;
if (i>0) {
  totalPackages[i-1].next = &totalPackages[i];
} 
```

# xml - 序列化/反序列化 JPA 实体的最可靠方法是什么？

> ID：15184947
> 
> 赞同：1
> 
> 时间：2013-03-03T10:58:06.107
> 
> 标签：xml, json, jpa, serialization, binary

我必须将分离的 JPA 实体从服务器发送到客户端并且它不会返回，但是客户端应该能够可靠地实例化这些实体。

1.  实体中有双向关系（循环图）、集合、数组和可嵌入的键。

2.  我可以控制服务器和客户端——即我可以在客户端和服务器中使用相同版本的实体类，并且序列化的数据将非常短暂。

3.  这将用于关键操作，我必须确保客户端能够毫无问题地反序列化。无风险——不惜一切代价。反序列化的可靠性比效率/速度/尺寸更重要

关于如何解决这个问题以及使用什么库来实现最低风险解决方案的任何建议？XStream、JAXB、Java 序列化、Json、XMLEncoder 等选项似乎有很多……我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:14:00.520

我有使用 JAXB 对 JPA 实体类进行 XML 序列化的良好经验。在基于 Web 服务的客户端-服务器通信的许多关键项目中得到证明。

通常，使用另一个 DTO 层进行实体序列化是一种很好的做法。通过这种方式，您可以缩短关系周期并进一步自定义您的对象以进行序列化。您可以手动在这些层之间进行映射，或者使用诸如[Dozer 之](http://dozer.sourceforge.net/)类的工具。

通常它只涉及创建具有少量 JAXB 注释（@XmlType 等）的相应 POJO，以及这些 POJO DTO 和 JPA 实体之间的一些映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:59:34.860

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**EclipseLink MOXy**是 JAXB (JSR-222) 规范的实现。由于 EclipseLink 还提供了[JPA 实现](http://www.eclipse.org/eclipselink/jpa.php)，它的许多扩展都旨在映射 JPA 实体：

*   `@XmlInverseReference`用于支持双向关系（参见：[http](http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html) ://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html ）
*   `@XmlPath`用于映射嵌入式 ID（参见：[http](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html) ://blog.bdoughan.com/2010/07/xpath-based-mapping.html ）。
*   `@XmlJoinNodes`（类似于 JPA 的`@JoinColumns`）当您需要按键/外键进行映射时。

由于您的问题也被标记为[json](/questions/tagged/json "显示标记为“json”的问题")您可能有兴趣知道 MOXy 还使用 JAXB 元数据提供 JSON 绑定：

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

谈到可靠性 MOXy 目前是 WebLogic 12.1.1 中的默认 JAXB 提供程序。

*   [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)

# javascript - node.js openurl 中的查询字符串限制是什么以及如何使用默认电子邮件客户端发送电子邮件？

> ID：15184948
> 
> 赞同：1
> 
> 时间：2013-03-03T10:58:18.457
> 
> 标签：javascript, node.js, mailto

我将 node.js 用于我的桌面应用程序。我需要从它发送电子邮件。所以我使用下面的代码：

```
require("openurl").open("mailto:"+emailAddress+"?" + 
    "subject=TEST subject&" +
    "body=Hello! How are you?\nHello! How are you?\nHello! How are you?\nHello! " + 
    "How are you?\nHello! How are you?\nHello! How are you?\nHello! How are you?\n" +
    "Hello! How are you?\nHello! How are you?\nHello! How are you?\n"); 
```

这会调用电子邮件客户端，但电子邮件正文会被截断大约 200 个字符。

我也尝试了以下代码：

```
require("openurl").mailto(["john@example.com", "jane@example.com"],
        { subject: "Hello!", body: "This is\na generated email!\n" }); 
```

参考链接：[https ://github.com/rauschma/openurl](https://github.com/rauschma/openurl)

此代码仅添加电子邮件 ID（第一封电子邮件），没有其他任何内容（未添加主题和电子邮件正文）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:00:34.300

`openurl`并不是要发送电子邮件，而是要求操作系统在最适合的应用程序中打开 url。因此`http`url 将在您的默认浏览器中`mailto`打开，并将在您的邮件应用程序中打开以撰写电子邮件。

要从 发送电子邮件`node.js`，这个问题提供了很多选项：[在 Node.js 中发送电子邮件？](https://stackoverflow.com/questions/4113701/sending-emails-in-node-js)

# f# - 获取 Array、List 或 Seq 的第 N 个元素的不同参数顺序

> ID：15184949
> 
> 赞同：12
> 
> 时间：2013-03-03T10:58:19.617
> 
> 标签：f#, pipeline

在获取 Array、List 或 Seq 的第 N 个元素的函数中使用不同的参数顺序是否有充分的理由：

```
Array.get source index
List .nth source index
Seq  .nth index  source 
```

我想使用管道运算符，似乎只有 Seq 才有可能：

```
s |> Seq.nth n 
```

有没有办法与 Array 或 List 具有相同的符号？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T11:29:12.880

我想不出任何好的理由来定义`Array.get`这种`List.nth`方式。鉴于流水线在 F# 中非常常见，因此应该将它们定义为`source`最后出现的参数。

在 的情况下`List.nth`，它不会有太大变化，因为您可以使用`Seq.nth`并且时间复杂度仍然`O(n)`是`n`列表的长度：

```
[1..100] |> Seq.nth 10 
```

`Seq.nth`在数组上使用不是一个好主意，因为您会丢失随机访问。为了保持`O(1)`的运行时间`Array.get`，您可以定义：

```
[<RequireQualifiedAccess>]
module Array =
    /// Get n-th element of an array in O(1) running time
    let inline nth index source = Array.get source index 
```

一般来说，不同的参数顺序可以通过使用`flip`函数来缓解：

```
let inline flip f x y = f y x 
```

您可以直接在上面的功能上使用它：

```
[1..100] |> flip List.nth 10
[|1..100|] |> flip Array.get 10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T23:14:13.510

只需使用反向管道运算符：

```
[1..1000] |> List.nth <| 42 
```

由于两个运算符都是左关联的，`x |> f <| y`因此被解析为`(x |> f) <| y`，这样就可以了。

如果要删除括号，后向管道运算符也很有用：`f (very long expression)`可以替换为`f <| very long expression`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T00:03:10.337

由于 Pad 和 bytebuster 回答了您的最后一个问题，我将重点介绍为什么部分。

这是基于我目前的知识，而不是历史事实。

由于从 OCaml 和 OCaml 派生的 F# 具有[Array](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Array.html)和[List](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)但[没有 Seq](http://caml.inria.fr/pub/docs/manual-ocaml/libref/index.html)，并且 F# 使用 |> 进行自然流水线和[类型检查](https://stackoverflow.com/q/13821811/1243762)，并且[OCaml 缺少 pipleline operator](https://stackoverflow.com/questions/14410953/converting-f-pipeline-operators-to-ocaml)，因此 F# 的作者切换到 Seq。但显然为了与 OCaml 向后兼容，他们并没有切换所有内容。

# php - Joomla 1.5。图片上的文字不起作用

> ID：15184951
> 
> 赞同：0
> 
> 时间：2013-03-03T10:58:34.227
> 
> 标签：php, image, text, joomla, imagettftext

我正在使用 Joomla 1.5。我有创建带有文本的图像的脚本，但它对我不起作用：

```
<?php
// Set the content-type
header('Content-Type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing...';
// Replace path by your own font path
$font = "ARIAL.TFF";

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);
?> 
```

我不明白为什么这不起作用。我在谷歌找到了很多例子，我用过它，但总是一样的。![错误](../Images/af09cb8f3e1853d0690c10fd337c1816.png) 这个英文错误的意思是：`Image "http://juokoera.lt/a.php" can't be shown, because It have problems (errors)`.

我在谷歌上发现，这可能是我的主机故障，我改变了它，但同样的问题。如果可以，请帮助我。非常感谢你。

**更新：** 我得到了同样的错误，代码看起来像：

```
dasfasdf
dfas

<?php 
header('Content-Type: image/png');
$im = imagecreatetruecolor(400, 30);
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);
$text = 'Testing...';
$font = "ARIAL.TTF";
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);
imagepng($im);
imagedestroy($im); ?> 
```

如何在同一个 php 中使用其他文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:34:17.397

我认为你的问题在这里：

```
$font = "ARIAL.TFF"; 
```

实际上，在您的服务器上不存在名为“ARIAL.TFF”的文件，您要查找的字体扩展名是 TTF，而不是 TFF，实际上您的服务器上存在“ARIAL.TTF”，我刚刚下载了它，将该行更正为：

```
$font = "ARIAL.TTF"; 
```

之后，您应该能够在图像上写文字

希望这可以帮助

**更新**

问题更新后，我注意到在打印出一些文本后发送了一个标题。

`header()`为了正确发送标头，在函数之前无需打印任何内容。

在[PHP 手册>header()](http://php.net/manual/en/function.header.php)中，首先解释的是：

`Remember that header() must be called before any actual output is sent, either by normal HTML tags, blank lines in a file, or from PHP. It is a very common error to read code with include, or require, functions, or another file access function, and have spaces or empty lines that are output before header() is called. The same problem exists when using a single PHP/HTML file.`

# android - 通过给出特定位置在RelativeLayout android中放置一个视图

> ID：15184954
> 
> 赞同：0
> 
> 时间：2013-03-03T10:58:47.903
> 
> 标签：android, layout, android-relativelayout

我试图通过给出特定的坐标来放置一个视图，即布局的顶部和左边距，但不知何故顶部定位没有按预期工作。我就是这样做的

```
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
            200, 200);
    // this will make the top left corner as 0,0
    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    layoutParams.leftMargin = x1;
    layoutParams.topMargin = y1; 
```

如果我为上边距提供较小的值，它可以正常工作，但值越大，错误越大。例如，在高度为 800 的屏幕上，如果我将上边距值设为 400，它应该从中间开始，至少这是我所期望的，但它从屏幕的 60% 左右开始，如果我从 720 开始90% 的屏幕，它甚至没有显示。谁能告诉我我做错了什么？

# java - 仅使用没有 UI 的服务器发送 facebook 消息

> ID：15184956
> 
> 赞同：0
> 
> 时间：2013-03-03T10:59:05.700
> 
> 标签：java, facebook, facebook-chat

我希望从我的应用程序服务器发送一条 facebook 消息，而无需每次都提示用户输入。我一直在查看 facebook 聊天 API，但它仅适用于 facebook UI，这意味着每次我想使用聊天时都必须提示用户。有解决方法还是我错过了什么？

我在我的服务器上使用 JAVA。

# jquery - 在项目详细信息页面中运行 jQuery

> ID：15184964
> 
> 赞同：0
> 
> 时间：2013-03-03T10:59:36.670
> 
> 标签：jquery, ms-project-server-2010

我正在尝试使用 Project Server 2010 限制项目详细信息页面 (PDP) 中“项目注释”自定义字段的长度。我在添加到 PDP 的内容编辑器 Web 部件中使用以下 jQuery：

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script>
    $(document).ready(function(){ 
        var textArea = $("textarea[title$='Project Notes']");
        textArea.keypress(function() 
        { 
            var text = textArea.text();
            if(text.length > 10) 
            { 
                alert("Project Notes cannot exceed 100 characters in length."); 
                textArea.val(text.substring(0,9)); 
            } 
        }); 
    });
</script> 
```

但是，当用户在文本区域中键入时，什么都没有发生。事件不会触发。我尝试了对代码的各种修改，但结果相同。请让我知道我错过了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:41:41.520

您可以使用`maxlength`html 元素的属性。

```
<textarea maxlength="10" rows='5' cols='25'></textarea> 
```

如果我们使用您的脚本，则使用`.val()`而不是`.text()`. 表单元素确实具有您必须输入文本的值。无论是`input type text`还是`textarea`。

```
var textArea = $("textarea[title$='Project Notes']");
textArea.keypress(function () {
   var text = textArea.val();
   if (text.length > 10) {
      alert("Project Notes cannot exceed 100 characters in length.");
      textArea.val(text.substring(0, 9));
   }
}); 
```

[**你可以在这里**](http://jsfiddle.net/WuctG/)尝试一下[](http://jsfiddle.net/WuctG/)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:55:08.110

我已将文本区域更改为文本框，并且事件开始正常触发。**

# ios - UICollectionView 添加 UICollectionCell

> ID：15184968
> 
> 赞同：71
> 
> 时间：2013-03-03T10:59:58.103
> 
> 标签：ios, uicollectionview, uicollectionviewcell

当我尝试放入Interface Builder`UICollectionCell`时`UICollectionView`，我无法以未知的原因放入它。单元格将转到工具栏而不添加到`UICollectionView`

我在用：

*   iOS SDK 6.0
*   XCode 4.5.1
*   我不使用情节提要

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-03T11:09:40.667

只有 StoryBoard 中的 UICollectionView 内部有 UICollectionViewCell。如果使用 XIB，使用 CellName.xib 创建一个新的 XIB，将 CollectionViewCell 添加到其中，指定 UICollectionView 自定义类的名称。之后使用 registerNib。

示例代码：[https ://github.com/lequysang/TestCollectionViewWithXIB](https://github.com/lequysang/TestCollectionViewWithXIB)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-03T11:08:54.753

如果您正在使用文件，则不能`UICollectionViewCell`直接放入。它只可能在故事板中。将 a 添加到单独的 Xib 文件中。给出你的班级名称。然后在集合视图出现之前注册类或 xib`UiCollectionView``Xib``UICollectionViewCell`

```
 [self.collectionView registerClass:[CollectionViewCell class] forCellWithReuseIdentifier:CELL_ID]; 
```

通常这是在`viewDidLoad`.

这是`UICollectionViewCell`不使用的自定义的实现`Xib`

```
 @implementation CollectionViewCell
 @synthesize imageView = _imageView;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    self.backgroundColor = [UIColor whiteColor];
    self.layer.shadowColor = [UIColor blackColor].CGColor;
    self.layer.shadowRadius = 5.0f;
    self.layer.shadowOffset = CGSizeMake(2.0f, 2.0f);
    self.layer.shadowOpacity = 0.5f;

    // Selected background view
    UIView *backgroundView = [[UIView alloc]initWithFrame:self.bounds];
    backgroundView.layer.borderColor = [[UIColor colorWithRed:0.529 green:0.808 blue:0.922 alpha:1]CGColor];
    backgroundView.layer.borderWidth = 10.0f;
    self.selectedBackgroundView = backgroundView;

    // set content view
    CGRect frame  = CGRectMake(self.bounds.origin.x+5, self.bounds.origin.y+5, self.bounds.size.width-10, self.bounds.size.height-10);
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
    self.imageView = imageView;          
    [imageView release];
    self.imageView.contentMode = UIViewContentModeScaleAspectFill ;
    self.imageView.clipsToBounds = YES;
    [self.contentView addSubview:self.imageView];       

}
return self;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T21:26:02.167

好的。实际上有一个解决方法，如果你真的想在 interface builder 的 xib 文件中的 collectionView 中拥有单元格：

1.  创建故事板。
2.  从界面生成器创建 UICollectionView 和 UICollectionViewCell。
3.  使用约束等调整 UI，使其看起来完全符合您的要求。
4.  创建一个新的 xib 文件。
5.  将情节提要中的所有内容复制到新的 xib 文件中。

它将完美地工作。

*   One thing to keep in mind that step #3 is very important, because after #5 you are not supposed to drag and move around the UICollectionView, if you do, the cell will magically disappear! Other than that, it will just work perfectly.

# c - 分段错误 - 自定义外壳

> ID：15184970
> 
> 赞同：0
> 
> 时间：2013-03-03T11:00:29.753
> 
> 标签：c, shell, segmentation-fault

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

#define BUF 1024        //I assume that the maximum number of arguments is 1024

main()
{
    char c;
    char *temp;
    char *arg[BUF];                 //the commands
    int i=1,j,k,iter=0;

    while(1)
    {
            i=1;
            iter=0;
            printf("CS21> ");
            temp = malloc(sizeof(char));
            while((c=fgetc(stdin))!='\n')
            {
                    temp = realloc(temp, i*sizeof(char));

                    temp[i-1]=c;
                    i++;
            }

            j=0;
            while(j<strlen(temp))
            {
                    if(temp[j]==' ')
                    {
                            j++;
                            continue;
                    }

                    if(temp[j]!=' ')  //Line 38: Same check performed as Line 42
                    {
                                    k=j;
                                    arg[iter] = malloc(sizeof(char));
                                    while(temp[k]!=' ')    //Line 42: Segmentation Fault here
                                    {
                                            arg[iter] = realloc(arg[iter],(k-j+1)*sizeof(char));
                                            arg[iter][k-j]=temp[k];
                                            k++;
                                    }
                                    iter++;
                                    k++;
                                    j=k;
                                    continue;
                    }
            }
    }
} 
```

嗨，以上是我的自定义 shell 代码中的代码示例。我还没有完成代码，以防万一你想知道程序会一直运行到无穷大。现在，我在一行中遇到了分段错误（已被评论），但我不明白为什么。我在第 38 行执行与第 42 行相同的检查，但它没有在那里给出分段错误。谁能帮我吗？

一些提到的变量的用途如下：“temp”是一个指向内存位置的指针，它保存给shell的整个命令。“args”是一个指针数组，每个指针都指向一个包含命令中各个参数的内存位置。

例如，“temp”将保存字符串 - gcc hello.c -o hello，如果它已传递给我的 shell。args[0] 将指向“gcc”，args[1] 将指向“hello.c”，依此类推。

这就是这个代码示例的目的。消除“temp”中的空格后，它将所有参数存储在“args”中。当人员从 shell 调用 exit 命令时，while(1) 循环将退出。但这部分将单独完成。现在有人可以帮我处理这个代码示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:08:53.663

当字符串中没有空格时（最后一个参数的情况），您在 while(temp[k]!=' ') 中的循环没有完成。如果 k > strlen(temp)，则需要停止循环。

只是我的评论：到底是谁在教每个字符后按字节读取和重新分配？这很尴尬……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:06:23.743

我认为以下行：

```
arg[iter] = malloc(sizeof(char)); 
```

`k`if的伤害值`item`大于BUF。`temp`如果`iter`为负值，它也会损坏。这是因为`k`和`temp`存储在堆栈附近`arg`，并且写入`arg`超出其大小的元素实际上可能会覆盖存储在附近的变量。

尝试打印上述行的前后，看看它们的值是否损坏`k`。`temp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:07:23.430

在行

```
while((c=fgetc(stdin))!='\n')
{
        temp = realloc(temp, i*sizeof(char));

        temp[i-1]=c;
        i++;
} 
```

您不会以空终止字符结束临时字符串

然后你就超出了那个数组的范围

```
 while(temp[k]!=' ')    //Line 42: Segmentation Fault here 
```

换行

```
 temp[i-1]=c; to  temp[i-1]='\n'; 
```

和

```
while(temp[k]!=' ') to while(temp[k]!='\0') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T11:20:18.523

您需要为 , 分配额外的一个字符空间`temp`，用于表示字符串结尾的特殊`'\0'`字符。

```
while((c=fgetc(stdin))!='\n')
{
    temp = realloc(temp, i*sizeof(char) + 1);  //1 more char space for '\0'
    temp[i-1]=c;
    i++;
 }
 temp[i] = '\0';  //Indicates the end of String 
```

并不是说`arg`字符串也必须以结尾`'\0'`。

这将防止您遇到*分段错误*，但您可能想检查您的程序可能会失败的其他情况..

有关详细信息，请参阅[此](https://stackoverflow.com/questions/2037209/what-is-a-null-terminated-string)。

# sed - Sed - 从正则表达式打印行到（正则表达式或 eof）

> ID：15184975
> 
> 赞同：1
> 
> 时间：2013-03-03T11:01:17.480
> 
> 标签：sed

如何`sed`从一个匹配的正则表达式（包括）到另一个匹配的正则表达式（包括）的打印行，但添加条件 - 关闭正则表达式可能根本不存在，在这种情况下，应该打印直到 EOF 的所有内容？

示例 1（假设`^START.*`和`^END.*`作为分隔正则表达式）：

```
cruft1
cruft2
START print this
print this
print this
END print this too
cruft 
```

示例 2：

```
cruft1
cruft2
START print this
print this
print this
- file ends here 
```

子问题：只打印第一个这样的出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:12:09.673

匹配从 ^START 到 ^END 的所有行

```
 sed -n '/^START/,/^END/p' <file> 
```

打印第一次出现

```
 sed -n '/^START/,/^END/ {p;q;}' <file> 
```

# highcharts - 动态添加系列高图

> ID：15184983
> 
> 赞同：5
> 
> 时间：2013-03-03T11:02:00.853
> 
> 标签：highcharts, highstock

我在使用 highstock 动态添加系列时遇到问题。为了做到这一点，我使用了 chart.addSeries 函数。第一个系列也应该通过来自网络服务的数据动态添加。我的问题出在图表的第一个视图中。我的意思是当图表第一次显示时，滚动条没有正确显示，但是当我点击 ZOOM 区域（1、3、6 个月 - 每年 - 年初至今）时，会出现滚动条。

```
chart.addSeries({
                name: name,
                data: data,
                type: 'spline'
            }); 
```

我也将数据分别设置为导航器（以便在 xAxis 上正确保存数据）并且**系列属性为空（起初我没有任何系列） - 问题在这里（空系列）**

我已经在其他系列中看到了很多使用 addSeries 的示例，但还没有看到作为第一个系列。

```
 var navigator = chart.get('navigator');
            navigator.setData(data); 
```

我已经搜索了很多，但我找不到一个好的解决方案。请帮助我...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:45:27.497

问题在于范围选择器中的选定按钮。您强制 Highstock 对空数据设置极端值，因此会产生错误。您可以在添加数据后直接设置极端值，请参阅：

```
chart.addSeries({
        name: 'ADBE',
        data: ADBE
    }, false);
    var nav = chart.get('navigator');
    nav.setData(ADBE);
    chart.xAxis[0].setExtremes(); //reset or set extremes to get navigator and scrollbar 
```

现场示例：http: [//jsfiddle.net/vqa2r/](http://jsfiddle.net/vqa2r/)

# jquery - 将文本插入文本区域

> ID：15184984
> 
> 赞同：0
> 
> 时间：2013-03-03T11:02:14.060
> 
> 标签：jquery

案例：如果我`click red image` **>** `add new div`，那么如果我`click green image` **>** `insert text to textarea`

我怎样才能使这项工作？
[http://jsfiddle.net/AMZMA/tNt7t/11/](http://jsfiddle.net/AMZMA/tNt7t/11/)

我知道如果我做到了这个
[http://jsfiddle.net/AMZMA/tNt7t/9/](http://jsfiddle.net/AMZMA/tNt7t/9/)
它可以工作

但它会在后台加载图像，因为我正在使用`display:none`
我只想在单击时加载图像`red image`

对不起我的英语不好：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:07:13.893

您正在使用的`click()`事件`#image`将应用于文档中当前存在的所有图像，并且不会应用于您将来动态添加的图像。您可以使用`delegate()`或`on()`监听`#image`现在或将来所有元素的点击事件。

```
 $(document).on('click', "#image",function(event){
        var test = $(event.target).attr("title");
        $(".text").focus().val(test);
    }); 
```

[http://jsfiddle.net/tNt7t/20/](http://jsfiddle.net/tNt7t/20/)

* * *

这可能会有所帮助：

*   [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)
*   [http://api.jquery.com/on/](http://api.jquery.com/on/)

# java - CSS 仅适用于奇数行

> ID：15184996
> 
> 赞同：1
> 
> 时间：2013-03-03T11:04:25.023
> 
> 标签：java, css, javafx-2

我有一个填充有 Samples 对象的表格视图。如果 Samples 对象的属性 = true，我想填充 TableRow。我使用了基于jewelsea这个答案的方法：[Disable TableRow based on data](https://stackoverflow.com/questions/10925882/disable-tablerow-based-on-data)

```
int i = 0;
if (tblSamples.getItems().size() > 0) {
    for (Node n : tblSamples.lookupAll("TableRow")) {
        if (n instanceof TableRow) {
            TableRow row = (TableRow) n;
            row.getStyleClass().removeAll("hasMastitisRow");

            if (tblSamples.getItems().get(i).getClinicalMastitis()) {
                row.getStyleClass().add("hasMastitisRow");
            }
            i++;

            if (i == tblSamples.getItems().size()) {
                break;
            }
        }
    }
} 
```

CSS：

```
.hasMastitisRow {  
    -fx-control-inner-background: linear-gradient(#FFFFFF 85%, red 100%);
} 
```

但是，它只适用于奇数行，偶数行似乎不起作用？

编辑：当CSS应用于偶数行时，我似乎也遇到了以下错误（在奇数行上我没有错误）：

```
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-table-cell-border-color' while resolving lookups for '-fx-background-color' from rule '*.table-row-cell:odd' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-row-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-table-cell-border-color' while resolving lookups for '-fx-background-color' from rule '*.table-row-cell:odd' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-control-inner-background' while resolving lookups for '-fx-text-fill' from rule '*.table-cell' in stylesheet jar:file:/C:/Program%20Files/Java/jdk1.7.0_15/jre/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.bss 
```

**编辑：** 新方法但结果仍然相同（应用于奇数行，而不是偶数行）：

```
tc_Samples_Quarter.setCellFactory(new Callback<TableColumn<Samples, String>, TableCell<Samples, String>>() {
        @Override
        public TableCell<Samples, String> call(TableColumn<Samples, String> soCalledSampleRowStringTableColumn) {
            return new TableCell<Samples, String>() {
                @Override
                public void updateItem(final String item, final boolean empty) {
                    super.updateItem(item, empty);
                    this.getTableRow().getStyleClass().remove("hasMastitisRow");
                    if (item != null) {
                        setText(item);
                        this.getTableRow().getStyleClass().add("hasMastitisRow");
                    } else {
                        setText(null);
                    }
                }
            };
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:12:56.470

对你的一些代码感到好奇。首先，您正在获取您的节点，例如：

```
for (Node n : tblSamples.lookupAll("TableRow")) { 
```

然后你做一个检查实例，看看它是否是一个 TableRow

```
if (n instanceof TableRow) { 
```

有必要吗？**lookupAll**是否有可能返回不是 TableRow 的节点？如果是这样，那么一种可能性可能是**i**索引的递增仅发生在**if (n instanceof TableRow)**内，因此**i**仅在它是 TableRow 时才递增。会不会是**i**不匹配索引中的项目，因为它跟不上循环？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:40:37.957

这已通过使用 setCellFactory 解决方案（请参阅上述问题中的其他方法）并将 CSS 调整为：

```
.hasMastitisRow {  
    -fx-background-color: linear-gradient(#FFFFFF 85%, red 100%);
} 
```

# vb.net - 在 vb.net 中使用 sql 查询检索访问数据

> ID：15184997
> 
> 赞同：0
> 
> 时间：2013-03-03T11:04:38.490
> 
> 标签：vb.net

我在 vb.net 中做一个项目，并使用 access 2003 作为后端。我想要某种方式来获取用户 ID 为“uid”的某些特定用户的密码“pwd”。

用户 ID 是使用 ComboBox 获得的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:51:03.047

在我们开始之前，您必须知道“用户”是一个保留字。您不应该使用保留字来管理表格。它会导致各种各样的问题。但是，我们可以使用括号来处理。

有很多方法可以按照您的要求进行操作，但这是我通常的处理方式。

首先，您需要一个数据连接。我不确定您使用的是什么 CPU 平台，如果是 64 位处理器，您需要进行配置 - 并将 Active Solution Platform 更改为“x86”。

其次，您需要一个数据集来保存数据。用数据集中的数据填充组合框。

从组合框中选择“uid”后，您将需要一种仅查找该用户的方法。我建议使用数据视图。

这是一个完成任务的示例程序。我已经尝试过了，它确实有效。

```
Public Class Form1

Dim oleConn As New OleDb.OleDbConnection
Dim sql As String
Dim command As New OleDb.OleDbCommand
Dim oleAdapter As New OleDb.OleDbDataAdapter
Dim UserDataSet As New DataSet
Dim usid As String
Dim x As Integer
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    oleConn = New OleDb.OleDbConnection
    oleConn.ConnectionString = "provider=microsoft.jet.oledb.4.0;data source=<< DATBASE PATH>>"
    sql = "Select * From [User]"
    oleConn.Open()
    command = New OleDb.OleDbCommand(sql, oleConn)
    command.ExecuteNonQuery()
    oleAdapter = New OleDb.OleDbDataAdapter("Select * From [User]", oleConn)
    UserDataSet = New DataSet
    oleAdapter.Fill(UserDataSet)
    oleConn.Dispose()
    cmbUid.DataSource = UserDataSet.Tables(0)
    cmbUid.DisplayMember = "uid"
End Sub
Private Sub cmbUid_SelectedValueChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmbUid.SelectedValueChanged
    usid = cmbUid.Text
    FindPWD()
End Sub
Private Sub FindPWD()
    'Create a dataview
    Dim dv As New DataView
    'Associate the dataview to _oDs (Dataset table)
    dv.Table = UserDataSet.Tables(0)
    Dim drv As DataRowView 'Data Row View object to query DataView object
    'Filter based on a combo box value selected
    dv.RowFilter = "[uid] LIKE '" & usid & "'"
    'Retrieve my values returned in the result
    For Each drv In dv
        'clear  textbox first time thru
        If x = 0 Then
            x = 1
            txtPwd.Clear()
        Else
            txtPwd.Text = drv("pwd")
        End If
    Next

End Sub

End Class 
```