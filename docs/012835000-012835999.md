# StackOverflow 问答 12835000-12835999

# c# - 如何删除第三个冒号后的所有字符？

> ID：12835001
> 
> 赞同：2
> 
> 时间：2012-10-11T08:09:52.680
> 
> 标签：c#, substring, indexof

我有一个日期时间跨度，但当前用户可以输入`12:00:00:00`，我收到此错误：

> SqlDbType.Time 溢出。值“12:00:00:00”超出范围。必须介于 00:00:00.0000000 和 23:59:59.9999999 之间。

所以为了阻止他们这样做，我认为如果我在第三个冒号之后删除所有字符会更容易。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:11:01.123

你`12:00:00.00`不想`12.00:00:00`

注意你的句号。

尝试

```
 string badtimes = "12:00:00:00";
        string goodtimes = badtimes.Substring(0, badtimes.LastIndexOf(":")); // 12:00:00 
```

还要检查[SqlDbType.Time 和 TimeSpan 不兼容](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/537c8c14-09da-4ddd-b1e4-330340ddd7b1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:13:38.380

字符串中的点未正确放置： `12.00:00:00`必须是`12:00:00.00`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:21:26.630

你可以试试这个

```
String time = "12:00:00:00";
        string[] parts = time.Split(new char [] {':'}, StringSplitOptions.RemoveEmptyEntries);
        string correctFormating = String.Format("{0}:{1}:{2}.{3}",parts); 
```

# html - 页眉和页脚 100% 宽度，内容只有 900px 宽

> ID：12835002
> 
> 赞同：0
> 
> 时间：2012-10-11T08:09:57.153
> 
> 标签：html, css

这是我目前正在使用的代码：http: [//jsfiddle.net/HMsKa/39/](http://jsfiddle.net/HMsKa/39/)

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head>
    <title>Title</title>
    <link href="main2.css" rel="stylesheet" type="text/css">
    <!--[if !IE 7]>
    <style type="text/css">
    #wrap {display:table;height:100%}
    </style>
    <![endif]-->
</head>
<body>

<div id="wrap">
    <div id="header">
        <a href="/"><img src="/static/img/header.jpg" id="logo" alt="coming soon" title="coming soon"></a>
        <ul>
            <li><a href="/posts/list/">Link1</a></li>
            <li><a href="/posts/create/">Link 2</a></li>
            <li><a href="/about">Link 3</a></li>
        </ul>
    </div>

    <div id="main">
        There are many sticky footer methods to be found in Google. I've tried many of them and they usually fail in some regards. The problem it seems is that some of these methods are old and may have worked in older browsers but they don't in newer browser releases. Because those pages are old, and were heavily linked too in the past, they still rank high in Google. Many webmasters looking for a sticky footer solution end up scratching their heads as they try these same old methods because they are the first ones they end up finding when they search.
    </div>

</div>

<div id="footer">
    &#169; 2012 Company, Inc.
    <ul>
    <li><a href="/contact">Contact</a></li>
    <li><a href="/faq">FAQ</a></li>
    <li><a href="/terms">Terms</a></li>
    <li><a href="/privacy">Privacy</a></li>
    </ul>
</div>

</body>
</html>​ 
```

**CSS**

```
html, body {
    height: 100%;
    padding: 0;
    margin: 0;
}

#wrap {
    min-height: 100%;
}

#main {
    padding-bottom: 60px; /* must be same height as the footer */
    overflow:auto;
    background-color: purple;
}

#footer {
    height: 60px;
    margin-top: -60px; /* negative value of footer height */
    position: relative;
    clear:both;
    background-color: blue;
} 

/*Opera Fix*/
body:before {
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;
}

#header {
    background-color: orange;
    height: 60px;
} 
```

我正在尝试在stackoverflow上进行一些设置，其中页眉和页脚的背景一直延伸到整个页面，但页眉内容、页脚内容和主要内容位于中间的固定宽度列中这页纸。在 JSFiddle 上玩了一会儿之后，我运气不太好，我确信这样做有对错之分。

有人可以让我以最好的方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:15:16.873

这将使您的中心栏占屏幕宽度的 80%：

```
#main {
   width: 80%;
   margin: 0 auto;
} 
```

这将使它固定在 900px：

```
#main {
   width: 900px;
   margin: 0 auto;
} 
```

编辑：

```
#header {
    width: 100%;
}
#header_content {
    width: 900px;
    margin: 0 auto;
}
#main {
    width: 900px;
    margin: 0 auto;
} 
```

HTML：

```
<div id="header">
    <div id="header_content">My header content, 900px in width</div>
</div>
<div id="main">
    My main content, also 900px in width;
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:33:42.497

将页眉和页脚设置为 100% 宽度，并将其中的内容居中，然后将正文居中。

这对于页脚来说很容易，因为它已经设置为 position:relative。在页脚中添加另一个 div，它将包含宽度为 900 像素、位置：绝对、左：50% 和 -450 像素的左边距的内容。

对标题和正文使用相同的方法。

Appologies，我会添加一些代码来说明，但我在我的 iPhone 上 - 这需要我几个小时 >_< 当我可以使用真正的键盘时，我将进行编辑以澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:23:29.587

根据我的低估，我创建了一个 jsfiddle。如果您还有其他问题，请查看并告诉我。

**演示**

[http://jsfiddle.net/saorabhkr/3Ak7S/1/](http://jsfiddle.net/saorabhkr/3Ak7S/1/)

**编辑**

我做了一些更改，请看一下。

[http://jsfiddle.net/saorabhkr/3Ak7S/5/](http://jsfiddle.net/saorabhkr/3Ak7S/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:14:03.253

只定义css

```
#main {
    background-color: purple;
    margin: auto;
    overflow: auto;
    padding-bottom: 60px;
    width: 90%;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T08:12:55.620

```
#main {
    width: 900px;
    margin: 0 auto;
} 
```

# jquery - 使用 jQuery 启用/禁用 .NET 4.0 按钮

> ID：12835008
> 
> 赞同：4
> 
> 时间：2012-10-11T08:10:10.430
> 
> 标签：jquery, asp.net, .net

我正在尝试使用 jQuery 启用 .net LinkBut​​ton，但在 .NET 4.0 中情况发生了一些变化，仅使用 attr("disabled", "disabled") 或 removeAttr("disabled") 将不起作用。

这是按钮。

```
<asp:LinkButton ID="LinkButtonContinue" runat="server" Text="Continue" CssClass="button continue" Enabled="false"></asp:LinkButton> 
```

呈现如下：

```
<a class="aspNetDisabled button continue" id="ContentPlaceHolder1_LinkButtonContinue">Continue</a> 
```

请注意新添加的 aspNetDisabled 类。

所以我尝试了这个：

```
jQuery(".continue").removeAttr("disabled").removeClass("aspNetDisabled"); 
```

和这个：

```
jQuery(".continue").removeClass("aspNetDisabled"); 
```

两者都不起作用，因为没有要删除的禁用属性，所以我假设它使用 JS 来禁用它？

我将如何使用此类启用按钮？

有任何想法吗？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:43:44.323

我认为问题是，当你有一个像生成的服务器端这样的按钮时，页面上会出现一些 javascript 废话，例如：

```
<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script> 
```

`javascript:__doPostBack('id','')`并且按钮将在 href 上有类似的东西

我认为您应该尝试手动定义此 href 值服务器端（或在页面加载时使用 javascript 动态定义，使用生成的可怕 id 可能更容易）。

在您的实例中，没有 href 因此即使未禁用锚点也不会发生任何事情。

**编辑：** 避免禁用按钮服务器端并在页面加载时使用javascript禁用它不仅更容易吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:32:54.773

也许这对你有用：

```
$('.continue').disabled = false; 
```

也可以使用的另一种方法是：

```
$('.continue').attr("disabled", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:35:29.093

试试这样的..

```
<head id="Head1" runat="server">
    <title></title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>

    <style type="text/css">
        .disabled-link
        {
            color: Gray;
            cursor: default;
        }
    </style>

    <script type="text/javascript">

        $(function() {
            var linkButton1 = $('.continue'); // $('#<%= LinkButton1.ClientID %>')
            var href = linkButton1.attr('href');
            $('#<%= EnableButton.ClientID %>').click(function(e) {
                e.preventDefault();
                linkButton1.attr('href', linkButton1.attr('myCustomAttr')).removeClass('disabled-link');
            });

            $('#<%= DisableButton.ClientID %>').click(function(e) {
                e.preventDefault();
                linkButton1.attr('href', '#').attr('myCustomAttr', href).addClass('disabled-link');

            });
        });

    </script>

</head>
<body>
    <form id="form1" runat="server">
    <asp:LinkButton ID="LinkButton1" runat="server"  CssClass="button continue" PostBackUrl="test.aspx">LinkButton</asp:LinkButton>
    <br />
    <asp:Button ID="DisableButton" runat="server" Text="Disable" />
    <asp:Button ID="EnableButton" runat="server" Text="Enable" />
    </form>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:13:07.020

仅使用：

```
$('.continue').removeClass("aspNetDisabled"); 
```

我猜应该工作

# javascript - JavascriptMVC：在包装控制器中监听实例化控制器的事件

> ID：12835013
> 
> 赞同：2
> 
> 时间：2012-10-11T08:10:33.980
> 
> 标签：javascript, jquery, jquery-events, javascriptmvc

我有 2 个控制器：

```
$.Controller('App.Browse',
/** @Static */
{
    defaults : {}
},
/** @Prototype */
{
    init : function(){
        $('#map').app_map();
    },
    // how can I listen here for an event of app_map() controller
}) 
```

和

```
$.Controller('App.Map',
/** @Static */
{
    defaults : {}
},
/** @Prototype */
{
    init : function(){
        // how can I trigger an event to be listened by app_browser() controller
    },
}) 
```

简短的想法是，当我在`App.Map`控制器中时，我想注意`App.Browse`控制器做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:38:54.240

您可以尝试以下方法：

```
window.createEventManager = (function() {

var Event = function(manager, name) {
    this.name = name;
    this._manager = manager;
    this._listeners = [];
};

Event.prototype = {
    listen: function(fn) {
        if (!$.isFunction(fn)) {
            throw "fn is not a function.";
        }

        this._listeners.push(fn);
    },

    fire: function(args) {
        args = args || {};
        args.name = this.name;

        var ls = this._listeners;
        for (var i = 0, l = ls.length; i < l; ++i) {
            ls[i](args);
        }

        this._manager.fire(args);
    }
};

var EventManager = function(eventNames) {
    for (var n in eventNames) {
        this[eventNames[n]] = new Event(this, eventNames[n]);
    }

    this._listeners = [];
};

EventManager.prototype = {
    /**
     * Listen to all events
     * @param fn
     */
    listen: function(fn) {
        if (!$.isFunction(fn)) {
            throw "fn is not a function.";
        }

        this._listeners.push(fn);
    },

    fire: function(args) {
        var ls = this._listeners;
        for (var i = 0, l = ls.length; i < l; ++i) {
            ls[i](args);
        }
    },

    getEvent: function(name){
        return this[name];
    }
};

return function(eventNames) {
    return new EventManager(eventNames);
};
})(); 
```

在地图控制器中：

```
init : function(){
    events = createEventManager(["mapTrigger"]);
}, 
```

并在浏览器中通过以下方式收听：

```
 $('#map').app_map().events.getEvent("mapTrigger").listen(function(){
        // Logic to perform on trigger.
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:28:42.773

JMVC 已为此做好了准备。像这样声明它：

```
$.Controller('App.Browse',
/** @Static */
{
    defaults : {
        mapController: null
    },
    listensTo: ['mapCustomEvent']
},
/** @Prototype */
{
    init : function(){
        $('#map').app_map();
    },

    '{mapController} mapCustomEvent': function(element, event, param) {
        //handle event
    }
})

$.Controller('App.Map',
/** @Static */
{
    defaults : {}
},
/** @Prototype */
{
    init : function(){
        param = "something I'd like to pass into event listener";
        $(this).trigger('mapCustomEvent', params);
    }
}) 
```

并实例化：

```
map = new App.Map('#map');
new App.Browse($('#browse'), {mapController: map}); 
```

# java - 无法找出在图中移动的正确算法

> ID：12835014
> 
> 赞同：3
> 
> 时间：2012-10-11T08:10:38.993
> 
> 标签：java, algorithm, graph

我之前已经发布过这个问题，但我想我会修改它并尝试更详细一点。我在下面有这张图片。我想要完成的是从均匀的“泡沫”开始，然后从 1 和 0 过渡到其他状态。这是我已经完成的：

1）创建具有所有状态（偶数和奇数）的 mainMap 以及另一个正确具有远离该状态的输入（0 和 1）的映射。2) 将状态从偶数转换到奇数转换。

![平价](../Images/cd701a3f106bb4385ec3b2cacaafccc1.png)

到目前为止，这是我的代码：

```
public static void main(String[] args) {

  //Map<Even, ArrayMap[0->even,1->odd]> for first line
  Map<String, Map<String,String>> mainMap = new ArrayMap<String, Map<String,String>>();
 //Map<int,even/odd>

  TypedBufferReader input = new TypedBufferReader("Enter Finite Automaton Description File: ");
 //read the file.
  for (;;) {
     try {
          String line = input.readLine();
          StringTokenizer st = new StringTokenizer(line, ";");
          String  state = st.nextToken();

          Map<String,String> transitions = mainMap.get(state);

          transitions = new ArrayMap<String, String>();
          while (st.hasMoreTokens()) {
              String intStateInput = st.nextToken();
              String inputState = st.nextToken();
              transitions.put(intStateInput, inputState);
          }
        mainMap.put(state, transitions);
     } catch (EOFException e) { break;}
  }

  //Print in alphabetical order of states. odd/even to even/odd
  List<String> mapList = new ArrayList<String>(mainMap.keys());
  Collections.sort(mapList);
  for (String s : mapList) {
      Map<String, String> tempMap = mainMap.get(s);
      System.out.println(s + " transitions = " + tempMap.toString());
  }

  //Process one line file.
  TypedBufferReader oneLineInput = new TypedBufferReader("Enter start state/inputs file: ");

  try {
      String oneLine = oneLineInput.readLine();
      StringTokenizer st = new StringTokenizer(oneLine,";");
      String initialState = st.nextToken();
      System.out.println("Initial state = " + initialState);

      while (st.hasMoreTokens()) {
          String inputNum = st.nextToken();

      }

  } catch (EOFException e) {}

  } 
```

}

我应该读取一行如下的文件：“even; 1;0;1;1;0;1” 因此，它将打印 even 的初始状态并继续在 mainMap 中移动。

对于 even 的初始状态，它会是这样的：

初始状态 = 偶数

输入 = 1 状态 = 奇数

输入 = 0 状态 = 奇数

输入 = 1 状态 = 偶数

输入 = 1 状态 = 奇数

输入 = 0 状态 = 奇数

输入 = 1 状态 = 偶数

最终状态 = 偶数

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:33:20.763

在您的循环中，您将获得链接到当前状态名称的转换，然后获得给定转换的新状态名称：

```
while (st.hasMoreTokens()) {
   String inputNum = st.nextToken();          
   Map<String,String> mainMap transitions = mainMap.get(initialState);
   initialState = transitions.get(inputNum);
} 
```

我还会在 currentState 中重命名 initialSate，但这只是个人偏好:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:28:53.527

我认为这很容易做到。你需要记住以前的状态，所以你甚至开始

```
Step 1: prevState = EVEN
Step 2: Read currentState (Read them as Integer)
Step 3: Repeate Until EOF
          if currentState | prevState == 0  then
             state = EVEN
             print EVEN 
          else
             state =  ODD
             print ODD 
```

# c# - Windows 8 Metro 应用程序 - 为堆栈面板设置动画？

> ID：12835017
> 
> 赞同：0
> 
> 时间：2012-10-11T08:10:43.067
> 
> 标签：c#, windows, animation, microsoft-metro

我正在制作一个按钮，它将消失我的堆栈面板：

```
public void myButton (object sender, Windows.UI.Xaml.RoutedEventArgs e)
{
     myStackPanel.Visibility = Visibility.Collapsed;
} 
```

但是，我还想在摆脱那个堆栈面板时执行一些动画。

只是一个简单的动画，比如从左到右淡出。我应该在 myButton 上添加哪些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:05:24.187

您可以使用**FadeOutThemeAnimation**，如下所述：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.fadeoutthemeanimation.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.fadeoutthemeanimation.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:48:21.123

如果你想在你的代码隐藏中做一些事情，你可以尝试这样的事情。

```
DoubleAnimation fadeout = new DoubleAnimation(1, 0, TimeSpan.FromSeconds(2), FillBehavior.HoldEnd);
fadeout.BeginTime = TimeSpan.FromSeconds(0);
Storyboard sb = new Storyboard();
Storyboard.SetTarget(fadeout, myStackPanel);
Storyboard.SetTargetProperty(fadeout, new PropertyPath("(Opacity)"));
sb.Children.Add(fadeout);
sb.Begin(); 
```

# postgresql - 类似于 row_number 的方法，每个组在 0 处重新开始

> ID：12835025
> 
> 赞同：3
> 
> 时间：2012-10-11T08:11:00.403
> 
> 标签：postgresql

假设有一个表存储这样的层次结构：

```
item_id | hierarchical_id 
--------+-----------------
    1   | ;1;
    2   | ;1;2;
    3   | ;1;2;3;
    4   | ;1;2;4;
    5   | ;1;2;4;5; 
```

这里存储的层次结构是 1 作为根，2 是 1 的子节点，3 和 4 是 2 的子节点，5 是 4 的子节点。

查询

```
SELECT
  -- the substr is used to remove the first and last semicolumns
  regexp_split_to_table(substr(hierarchical_id, 2, length(hierarchical_id) - 2)
                        , E';'
  ) as parent_id,
  item_id,
  hierarchical_id
FROM 
  table 
```

返回

```
parent_id | item_id | hierarchical_id
----------+---------+-----------------
       1  |    1    | ;1;
       1  |    2    | ;1;2;
       2  |    2    | ;1;2;
       1  |    3    | ;1;2;3;
       3  |    3    | ;1;2;3;
       1  |    4    | ;1;2;3;
       2  |    4    | ;1;2;4;
       4  |    4    | ;1;2;4;
       1  |    5    | ;1;2;4;5;
       2  |    5    | ;1;2;4;5;
       4  |    5    | ;1;2;4;5;
       5  |    5    | ;1;2;4;5; 
```

如何修改查询以获得这样的第 4 列：

```
parent_id | item_id | hierarchical_id | distance
----------+---------+-----------------+---------
       1  |    1    | ;1;             | 0
       1  |    2    | ;1;2;           | 1
       2  |    2    | ;1;2;           | 0
       1  |    3    | ;1;2;3;         | 2 
       2  |    3    | ;1;2;3;         | 1
       3  |    3    | ;1;2;3;         | 0
       1  |    4    | ;1;2;4;         | 2
       2  |    4    | ;1;2;4;         | 1
       4  |    4    | ;1;2;4;         | 0
       1  |    5    | ;1;2;4;5;       | 3
       2  |    5    | ;1;2;4;5;       | 2
       4  |    5    | ;1;2;4;5;       | 1
       5  |    5    | ;1;2;4;5;       | 0 
```

的含义是当前行上的和`distance`之间的距离。例如：节点与自身的距离为0，节点与父节点的距离为1，节点与父节点的距离为2等。不必从0开始。`item_id``parent_id`

`row_number`如果我能让每组相等`item_id`的 s 在 0 处重新启动它会正常工作，因为其中的 id`hierarchical_id`是有序的。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:19:18.837

窗口函数给你很多控制；见[4.2.8。窗口函数调用](http://www.postgresql.org/docs/current/static/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)。

您需要的关键是：

```
row_number() OVER (PARTITON BY item_id ORDER BY hierarchical_id) 
```

给定数据：

```
create table t ( item_id integer, hierarchical_id text );
insert into t (item_id, hierarchical_id) values
(1,';1;'),
(2,';1;2;'),
(3,';1;2;3;'),
(4,';1;2;4;'),
(5,';1;2;4;5;'); 
```

查询：

```
WITH x AS (
  SELECT regexp_split_to_table(substr(hierarchical_id, 2, length(hierarchical_id) - 2), E';') as parent_id,
    item_id,
    hierarchical_id
  FROM t
)
SELECT 
  *,
  row_number() OVER (PARTITION BY item_id ORDER BY parent_id DESC) - 1 AS distance
FROM x
ORDER BY item_id, parent_id; 
```

产生：

```
 parent_id | item_id | hierarchical_id | distance 
-----------+---------+-----------------+----------
 1         |       1 | ;1;             |        0
 1         |       2 | ;1;2;           |        1
 2         |       2 | ;1;2;           |        0
 1         |       3 | ;1;2;3;         |        2
 2         |       3 | ;1;2;3;         |        1
 3         |       3 | ;1;2;3;         |        0
 1         |       4 | ;1;2;4;         |        2
 2         |       4 | ;1;2;4;         |        1
 4         |       4 | ;1;2;4;         |        0
 1         |       5 | ;1;2;4;5;       |        3
 2         |       5 | ;1;2;4;5;       |        2
 4         |       5 | ;1;2;4;5;       |        1
 5         |       5 | ;1;2;4;5;       |        0 
```

看起来大致正确，但是由于您的预期输出似乎与您在运行它时提供的查询的输出不匹配（第 9.1 页），因此很难确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:04:36.353

现在问题得到了更好的改进，这里有一个更好地表达意图的公式，而不仅仅是结果：

```
CREATE EXTENSION intarray;

SELECT 
  exploded.*, 
  array_length(h_arr,1) - idx(h_arr,parent_id) AS distance
FROM (
  SELECT unnest(h_arr) AS parent_id, item_id, h_arr 
  FROM (
    SELECT
      item_id,
      regexp_split_to_array( trim(hierarchical_id,';'),';')::int[] as h_arr
    FROM t
  ) h_as_intarray
) exploded; 
```

...虽然由于需要所有通行证，它有点慢。如果`hierarchical_id`首先将它们存储为整数数组，那么它可能应该是：

```
ALTER TABLE t ALTER COLUMN hierarchical_id TYPE int[] 
USING (regexp_split_to_array( trim(hierarchical_id,';'),';')::int[]); 
```

你会有一个更好的查询，因为你会摆脱所有可怕的正则表达式字符串处理：

```
SELECT 
  exploded.*,
  array_length(hierarchical_id,1) - idx(hierarchical_id,parent_id)  AS distance
FROM (
  SELECT unnest(hierarchical_id) AS parent_id, item_id, hierarchical_id 
  FROM t
) exploded; 
```

...在这个小数据集上，奖励积分也快了 3 倍，并且很可能在更大的数据集上保持或扩大领先优势。

# php - 通过 XMLHttpRequest 上传时使用 getimagesize()

> ID：12835026
> 
> 赞同：0
> 
> 时间：2012-10-11T08:11:07.753
> 
> 标签：php, file-upload, xmlhttprequest

我正在使用[这个文件上传](https://github.com/valums/file-uploader)器，并决定验证上传文件的实际内容，以确保它确实是一张图片。所以我想使用带有文件名的 PHP`getimagesize()`函数。但是没有`$_FILES['xxx']['tmp_name']`，所以我将它传递给`getimagesize`函数。您建议在我的上传过程中验证实际内容类型？

```
/**
 * Handle file uploads via XMLHttpRequest
 */
class qqUploadedFileXhr {
    /**
     * Save the file to the specified path
     * @return boolean TRUE on success
     */
    function save($path) {    
        $input = fopen("php://input", "r");
        $temp = tmpfile();
        $realSize = stream_copy_to_stream($input, $temp);
        fclose($input);

        $target = fopen($path, "w");        
        fseek($temp, 0, SEEK_SET);
        stream_copy_to_stream($temp, $target);
        fclose($target);

        return true;
    }
    function getName() {
        return $_GET['qqfile'];
    }
    function getImageInfo() {
        return getimagesize($_GET['qqfile']); /* no such file or directory */
    }
} 
```

**更新**

```
if ($this->file->save($uploadDirectory . $filename . $ext)){
    // if only images are allowed to upload
    if ($imgOnly)
    {
            // get image size and if $imgInfo were false delete uploaded file
        $imgInfo = getimagesize($uploadDirectory . $filename . $ext);
        if (!$imgInfo)
        {
            unlink($uploadDirectory . $filename . $ext);
            return array('error' => 'The file uploaded is not actual image file.');
        }
    }
    return array('success'=>true);
} else {
    return array('error'=> 'Could not save uploaded file.' .
        'The upload was cancelled, or server error encountered');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:15:02.123

该函数`save`接受一个字符串参数并将上传的图像保存到具有该路径的文件中。因此，只需打开您传递给的任何文件名`save()`.

# ruby-on-rails - 保存对象时 after_save 是如何工作的

> ID：12835029
> 
> 赞同：17
> 
> 时间：2012-10-11T08:11:12.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

如果我执行以下操作：

```
@user.name = "John"    
@user.url = "www.john.com"
@user.save 
```

如果我使用`after_save`

```
@user.url = "www.johnseena.com"
@user.save 
```

当我这样做时会发生什么？

我相信它应该因为“after_save”回调而保存该值。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-11T08:51:42.533

在我看来，如果你`save`在回调中调用函数`after_save`，那么它将陷入递归，除非你在开头放置一个守卫。像这样

```
class User < AR::Base
      after_save :change_url

      def change_url
          #Check some condition to skip saving
          url = "www.johnseena.com"
          save              #<======= this save will fire the after_save again
      end
end 
```

但是，除了放置警卫之外，您还可以`update_column`使用

```
def change_url
    update_column(:url, "www.johnseena.com")
end 
```

在这种情况下，它不会触发`after_save`。但是，它会火`after_update`。因此，如果您对该回调有任何更新操作，那么您将再次递归:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T11:19:43.150

**after_save**回调将被触发，无论它是对该对象的**保存**还是**更新。**

还，

**update_column**不会触发任何回调（即 after_update）并且也会跳过验证。请参阅[http://apidock.com/rails/ActiveRecord/Persistence/update_column](http://apidock.com/rails/ActiveRecord/Persistence/update_column)

U 应根据操作及其时间具体使用**after_create**或**after_update 。**

```
after_create :send_mail
def send_x_mail
  #some mail that user has been created
end

after_update :send_y_mail
def send_y_mail
  #some data has been updated
end

after_save :update_some_date
def update_some_data
  ...
  action which doesnt update the current object else will trigger the call_back
end 
```

另请参阅[`after_create` 和 `after_save` 之间的区别以及何时使用哪个？](https://stackoverflow.com/questions/6422199/what-is-the-difference-between-after-create-and-after-save-and-when-to-use-w)对于回调，请参阅[http://ar.rubyonrails.org/classes/ActiveRecord/Callbacks.html#M000059](http://ar.rubyonrails.org/classes/ActiveRecord/Callbacks.html#M000059)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T08:16:50.977

如果您修改任何 int ，`after_save`它将不会被保存，因为`save`它已经发生了。干预的唯一机会是回滚整个事务。如果在 中添加另一个`save`，`after_save`那么它将是一个无限循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-22T20:29:51.433

无需对数据库执行两次查询并担心递归，您可能需要考虑在数据有效负载进入服务器之前对其进行修改。

```
class User < AR::Base
      before_save :change_url

      def change_url
          url = "www.johnseena.com"
      end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-28T13:02:52.557

非常感谢所有在这里帮助我的人。这是解决我的问题的解决方案。我按订单模型修改如下：

```
class Order < ActiveRecord::Base

  has_and_belongs_to_many :users

  validates :item, presence: true

  def add_order(username, order)
    user = User.where(username: username).first
    if !user.nil?
      user.orders.create(item: order.item)
    end
  end

  def remove_order(order)
  end

end 
```

# php - 添加在数据库中发布主题的用户

> ID：12835034
> 
> 赞同：0
> 
> 时间：2012-10-11T08:11:33.643
> 
> 标签：php, database, fetch

我的数据库中有一个表`TOPICS`，它没有说明哪个用户打开了它。但是，在我的`MESSAGES`表格中，有一`USER`列显示哪个用户打开了它。我的问题是：我怎样才能给我的`TOPICS`表提供一个包含用户的列并获取这些信息？

现在，我在每个配置文件中都有用户的最后一条消息，但如前所述，我无法**显示主题和主题名称的链接**，因为`TOPICS`. 我怎样才能做到这一点？

我用它来获取用户的最后一条消息，它有效：

```
$lastpost = execute_scalar("SELECT message FROM messages where messages.user='$who' Order by date desc"); 
```

现在我需要为这个主题做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:53:33.877

我不知道我是否理解您的需求，但如果我错了，请纠正我......

你可以..

1 - 在用户表“LastTopicId”中添加列

2-使用用户和主题的外键创建新表'UserOpenTopic'，日期......所以你可以做查询

`$lastpost = query("SELECT topic.TopicName FROM UserOpenTopic INNER JOIN topic ON topic.ID = UserOpenTopic.TopicID where UserOpenTopic.userID='$who' Order by date desc");`

而且您应该为每个主题的用户提供最后一个主题（和整个历史）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:55:18.457

我了解消息始终与主题相关，因此您应该添加从*消息*到*主题*的：1 关系。根据表模式中的字段类型和命名约定，它应该是这样的：

```
ALTER TABLE `messages` ADD `topicId` INT NOT NULL; 
```

在这种情况下，关系实际上是作为 Id 的*外键*构建的，它当然必须存在于您的表*主题*中。*存储消息时，您还必须注意存储此相关主题 ID（或表主题*的相应主键）。获取消息时，您必须加入它：

```
SELECT message,user FROM messages,topics WHERE messages.topicId = topics.Id AND messages.user='$who' ORDER BY messages.date DESC 
```

请查看 mysql 文档（CREATE、ALTER 和 SELECT 语法）以获得更详细的示例。使用 ORM 时，请查看构建和处理*hasMany*关系的示例。

# lambda - 以最大值返回闭包的函数

> ID：12835035
> 
> 赞同：1
> 
> 时间：2012-10-11T08:11:37.950
> 
> 标签：lambda, closures, maxima

如何定义一个以最大值返回闭包的函数？

我的具体例子：我有一个表格列表：

```
myList : [a = 1, c = 33, d = c+7]; 
```

我想根据等号之前的部分提取一个元素。

这是我的尝试：

```
find_a (e) := first(e) = a;
temp1 : sublist(myList ,'find_a );
map('second, temp1);
//output is "1" 
```

这如我所愿。

由于真正的列表要长得多，而且我不想复制粘贴代码，我现在想像这样使用它：

```
SearchElement(ElementName) := block(
        [res],
        res : lambda([x],first(x) = ElementName),
        return (res)
        );
GetByKey(list_,key_) := block(
        [res , finder:SearchElement(key_)],
        res : map('second, sublist(list_,'finder),
        return (res)
        );

GetByKey(myList, a);
// should return "1" 
```

但是第一部分已经不起作用：

```
SearchElement(a);
// output:
lambda([x],first(x)=ElementName)
// expected output:
lambda([x],first(x)=a) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:01:43.727

该解决方案对我有用（基于最大值帮助中的“咖喱”示例`buildq`，请参阅[36\. 函数定义](http://maxima.sourceforge.net/docs/manual/maxima_36.html)）：

```
ElementSelectorPredicate(targetElement) ::= buildq (
            [targetElement], 
            lambda ([x], first(x) = targetElement)
          );
ExtractElement(targetList, targetElement, operation) := block(
            [searcher: ElementSelectorPredicate(targetElement), res],
            res: first(sublist(targetList,'searcher)), 
            return (operation(res))
          ); 
```

例子：

```
myList : [a = 4, b = 7, c = 5+b]$
ExtractElement(myList, b, identity);
// result: b = 7
ExtractElement(myList, c, second);
// result: b+5 
```

# ios - 从通讯录中获取所有联系人电话号码崩溃了？

> ID：12835036
> 
> 赞同：0
> 
> 时间：2012-10-11T08:11:41.537
> 
> 标签：ios

我已经完成了下面的代码来尝试从通讯录中获取所有联系人的电话号码：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
  NSArray *arrayOfPeople = 
  (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);    
  NSUInteger index = 0;
  allContactsPhoneNumber = [[NSMutableArray alloc] init];

  for(index = 0; index<=([arrayOfPeople count]-1); index++){

    ABRecordRef currentPerson = 
    (__bridge ABRecordRef)[arrayOfPeople objectAtIndex:index];

    NSArray *phones = 
    (__bridge NSArray *)ABMultiValueCopyArrayOfAllValues(
    ABRecordCopyValue(currentPerson, kABPersonPhoneProperty));

    // Make sure that the selected contact has one phone at least filled in.
    if ([phones count] > 0) {
      // We'll use the first phone number only here.
      // In a real app, it's up to you to play around with the returned values and pick the necessary value.
      [allContactsPhoneNumber addObject:[phones objectAtIndex:0]];
    }
    else{
      [allContactsPhoneNumber addObject:@"No phone number was set."];
    }
  } 
```

但是，它在 iOS 6 中运行良好，但在 iOS 5 中运行良好。它在以下代码中崩溃：

```
ABRecordRef currentPerson = 
(__bridge ABRecordRef)[arrayOfPeople objectAtIndex:index]; 
```

输出打印：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (0) beyond bounds (0)' 
```

任何人都有建议为什么它会崩溃？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:30:45.430

这不是取决于 iOS5/iOS6 的问题，而是不同测试环境的问题。在一种情况下（我猜是一个模拟器）您的通讯录中有联系人，而在另一种情况下则没有。

但是你在你的循环中的测试会在零`for`的情况下失败，因为返回一个**unsigned**并且减去创建一个下溢（解释为一个无符号整数给你一个整数的最大值，因为它是负数并且无符号整数当然只能存储正整数）。`[arrayOfPeople count]``count``NSUInteger`**`-1``0UL``-1``-1`**

 **因此，当您没有任何联系并且`[arrayOfPeople count]`为零时，无论如何您都会进入`for`循环，因此在尝试获取空数组中索引 0 处的对象时会崩溃。

* * *

替换`for`循环中的条件

```
for(index = 0; index<=([arrayOfPeople count]-1); index++) 
```

到

```
for(index = 0; index<[arrayOfPeople count]; index++) 
```

`for`当您的地址簿中没有任何联系人时，您的崩溃应该会消失，因为您不会下溢并且不会进入您的循环。**

# javascript - 如何用 jquery 或 javascript 替换变量内的文本

> ID：12835041
> 
> 赞同：3
> 
> 时间：2012-10-11T08:11:53.117
> 
> 标签：javascript, jquery, replace

> **可能重复：**
> [为什么javascript在使用replace时只替换第一个实例？](https://stackoverflow.com/questions/1967119/why-does-javascript-replace-only-first-instance-when-using-replace)

我有这个变量

```
var newRow = "<td><div> [[myvar]]</div> <div> [[myvar]]</div> </td> " 
```

当我这样做时

```
newRow  = newRow.replace('[[myvar]]', '10'); 
```

只有第一次出现被替换，而不是第二次

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T08:13:23.253

您可以使用正则表达式

```
newRow  = newRow.replace(/\[\[myvar\]\]/g, '10'); 
```

对于多次替换，没有其他简单的解决方案。注意 ：

*   正则表达式在所有浏览器上都进行了高度优化，尤其是在使用`/\[\[myvar\]\]/`符号时
*   如果你的模式是动态的，你可以使用`new RegExp(somepattern, 'g')`（但是[如果你有一个固定的模式，为了更好的性能不要使用它](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FObjects%2FRegExp)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:14:20.647

用这个：

```
newRow = newRow.replace(new RegExp('[[myvar]]', 'g'), '10'); 
```

# javascript - extjs：从单选按钮获取检查值

> ID：12835042
> 
> 赞同：1
> 
> 时间：2012-10-11T08:11:53.927
> 
> 标签：javascript, extjs

我正在使用无线电组是和否。我希望将点击值发送到服务器。如何实现？

我的代码：

```
{
    fieldLabel: 'Striping',
    xtype: 'radiogroup',
    columns: [50, 100],
    items: [{
        boxLabel: 'Yes',
        name: 'rb',
        id: 'stYes',
        /*checked: true,*/
        inputValue: '1',
        listeners: {
            click: function () {
                alert("Click 2!");
            }
        }

    }, {
        boxLabel: 'No',
        name: 'rb',
        id: 'stNo',
        inputValue: '2',
        listeners: {
            click: function () {
                alert("Click 2!");
            }
        }
    }]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:00:08.117

我认为这样的事情会起作用，我无法测试这个atm。单击不会表示单选按钮，您需要使用更改事件。此外，您最好将听众放在您的小组中。然后，您不必为组中的每个按钮定义一个侦听器。

注意：为组件提供 id 时要小心，请使用 itemId 或 name 代替。

```
 {
        fieldLabel: 'Striping',
        xtype:'radiogroup',
        columns: [50, 100],
        items: [{
            boxLabel: 'Yes',
            name: 'rb',
            id: 'stYes',
            /*checked: true,*/
            inputValue: '1'

        }, 
        {
            boxLabel: 'No',
            name: 'rb',
            id: 'stNo',
            inputValue: '2'
        }],
        listeners: {
            change: function( radiogroup, newValue, oldValue, eOpts ) {
                alert(newValue.rb);
            }
        }
    } 
```

小提琴示例：http: [//jsfiddle.net/johanhaest/cpLvK/7/](http://jsfiddle.net/johanhaest/cpLvK/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T13:16:02.303

`.individual`将返回`inputValue`您在 radiogroup 项目中设置的内容。

```
 listeners: {
        change: function( radiogroup, newValue, oldValue, eOpts ) {
            alert(newValue.individual);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-19T04:13:05.570

刚刚解决了这个问题，没有在 RadioButtons 中添加“名称”配置来获取我刚刚使用的值：

```
change : function(radioButton,newValue,oldValue){

var newVal = Object.keys(newValue).map(function (key) { return obj[key]; });
var value = newVal[0];
console.log(value)

} 
```

# php - Zend_Navigation 站点地图未生成

> ID：12835043
> 
> 赞同：0
> 
> 时间：2012-10-11T08:12:06.140
> 
> 标签：php, zend-framework, sitemap, zend-navigation

我目前正在使用 Zend Framework 1.12 创建一个项目管理系统，但我遇到了该`Zend_Navigation::Sitemap()`方法的问题。

我在其中有一个名为的控制器`SitemapController`，`indexAction()`它禁用了布局。然后，我的`/views/scripts/sitemap/index.phtml`脚本渲染站点地图。

问题是：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"/> 
```

这就是我在`/sitemap`URI 中得到的全部内容。即使我`navigation.xml`的被填满。

这是我的所有代码：

**索引.phtml**

```
<?php
$this->navigation()->sitemap()->setFormatOutput(true)
                              ->setUseSchemaValidation(false)
                              ->setUseXmlDeclaration(true)
                              ->setUseSitemapValidators(true);
echo $this->navigation()->sitemap()->render($this->navigation);
?> 
```

**站点地图控制器.php**

```
<?php
class SitemapController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        $this->view->layout()->disableLayout();
    }
} 
```

**引导程序.php**

```
/**
* @return Zend_Navigation
*/
protected function _initNavigation()
{
    $view = $this->bootstrap('layout')->getResource('layout')->getView();
    $config = new Zend_Config_Xml(APPLICATION_PATH.'/configs/navigation.xml', 'nav');
    $navigation = new Zend_Navigation($config);
    $view->navigation($navigation);
} 
```

**导航.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
    <nav>
        <home>
            <label>Tableau de Bord</label>
            <controller>index</controller>
            <action>index</action>
        </home>
        <project>
            <label>Projets</label>
            <controller>project</controller>
            <action>index</action>
        </project>
        <tasks>
            <label>Tâches</label>
            <controller>tasks</controller>
            <action>index</action>
        </tasks>
        <messages>
            <label>Messages</label>
            <controller>messages</controller>
            <action>index</action>
        </messages>
    </nav>
</configdata> 
```

有人能告诉我为什么它没有按预期呈现站点地图吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:13:21.267

有没有办法改变 Zend_Navigation 中的编码？

我建议您在构建菜单树或从您的 navigation.xml 中检查编码。

## 来自 Zend_Navigation 文档

> 注意 默认使用 UTF-8 编码
> 
> 默认情况下，Zend Framework 使用 UTF-8 作为其默认编码，并且，针对这种情况，Zend\View 也是如此。可以使用 setEncoding() 方法（或 encoding 实例化参数）在视图对象本身上设置不同的字符编码。然而，由于 Zend\View\Interface 没有为编码定义访问器，如果您使用 Dojo 视图助手的自定义视图实现，您可能没有 getEncoding() 方法，这是视图助手内部使用的方法用于确定要编码的字符集。
> 
> 如果您不想在这种情况下使用 UTF-8，则需要在自定义视图实现中实现 getEncoding() 方法。

我在处理 ISO-8859-1 和 JSON 时有时会发生这种情况，它只是削减了输出，我觉得这可能与您的语言有关。

# 更新

这是我在我的代码中使用的`sitemapAction`：

```
/**
 * Shows the site map.
 *
 * @return string
 */
public function sitemapAction()
{
    $this->view->layout()->disableLayout();
    $config = new Zend_Config_Xml(APPLICATION_PATH . DS . 'configs' . DS . 'navigation.xml', 'mainnav');
    $container = new Zend_Navigation($config);
    $this->view->navigation($container);
    $this->_helper->viewRenderer->setNoRender(true);
    $response = $this->getResponse();
    $response->setHeader('Content-Type', 'text/xml');
    echo $this->view->navigation()->sitemap();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:04:24.477

基于@Saul Martínez 的回答，我编写了代码来生成站点地图。它不使用任何 XML 文件，但可以从数据库中填充链接。链接在这里：

[Zend_Navigation 用数组覆盖？](https://stackoverflow.com/questions/2320590/zend-navigation-overwrite-with-array/16053480#16053480)

# svn - svn 提交的回调

> ID：12835048
> 
> 赞同：2
> 
> 时间：2012-10-11T08:12:12.623
> 
> 标签：svn

当我提交我的源代码（来自我的 Netbeans IDE 6.7.1/6.9.1/）时，所有修改过的文件都会提交到 SVN 存储库，但我在成功提交后会得到回调。

像“提交的修订版 5212”

当我从 Tortoise SVN Subversion:1.6.9 提交时，甚至出现同样的问题

详情如下： SVN 服务器：安装在远程机器上的 SVN 1.6.12

我们公司超过50%的人都面临这个问题。

请在这方面帮助我，因为这是主要问题

提前致谢。

# android - Android：使用服务的通知

> ID：12835050
> 
> 赞同：0
> 
> 时间：2012-10-11T08:12:19.307
> 
> 标签：android, service, notifications

我以前从未使用过服务。所以，在互联网上关注了几个恶魔之后，我的实现是这样的：

在我的 MainActivity 的 onResume() 中，我以这种方式启动服务：

```
protected void onResume() {
super.onResume();
startService(new Intent(MainActivity.this, NotificationsService.class));
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
Intent i = new Intent(this, NotificationsService.class);
PendingIntent pi = PendingIntent.getService(this, 0, i, 0);
am.cancel(pi);
am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
SystemClock.elapsedRealtime() + 60000, 60000, pi);
} 
```

我的 NotificationsService 类是：

```
public class NotificationsService extends Service {

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        handleIntent(intent);
        return START_NOT_STICKY;
    }
    private NotificationManager nm;
    private WakeLock mWakeLock;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mWakeLock.release();
    }

    private void showNotification() {

        nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.icon,
                "Notification Ticker", System.currentTimeMillis());
        notification.flags = Notification.FLAG_AUTO_CANCEL;
        Date date = new Date(System.currentTimeMillis());
        Intent i = new Intent(this, NotificationsActivity.class);
        i.putExtra("notification",
                "This is the Notification " + date);
        i.putExtra("notifiedby", "xyz");
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, i,
                PendingIntent.FLAG_UPDATE_CURRENT);
        notification.setLatestEventInfo(this, "xyz",
                "This is the Notification", contentIntent);
        nm.notify(R.string.service_started, notification);
    }

    private class PollTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            showNotification();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            stopSelf();
        }
    }

    private void handleIntent(Intent intent) {
        // obtain the wake lock
        PowerManager pm = (PowerManager) getSystemService(POWER_SERVICE);
        mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                "NotificationsService");
        mWakeLock.acquire();
        // check the global background data setting
        ConnectivityManager cm = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        if (!cm.getBackgroundDataSetting()) {
            stopSelf();
            return;
        }
        new PollTask().execute();
    }
} 
```

在 NotificationsActivity 中，我得到了 Extras 并显示了。这些 Extras 有一个时间戳，我每分钟（60000 毫秒）调用一次 showNotifications() 方法。

**问题：**

1.  我从 Service Extras 获得的 NotificationsActivity 中显示的时间戳是第一个通知的时间戳

例如，如果第一次通知的时间是上午 10:10:10，那么活动中的时间总是上午 10:10:10。但是在“通知”面板中，它会为每分钟创建的每个通知显示更新的通知，例如上午 10:15:10。

1.  如果我每分钟设置一次通知，我希望通知是分开的。相反，它只是替换了以前的通知。或者最好是来自 myApp 的 10 个通知。

如何获得这些？

**主要是我想知道为什么时间戳没有更新？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:14:24.493

> 我在 NotificationsActivity 中显示的时间戳，我从 Service Extras 中获得，即第一个通知的时间戳

如果活动仍在运行，则应使用`onNewIntent()`而不是调用它`onCreate()`，并且`Intent`交付对象`onNewIntent()`应具有适当的附加功能。`getIntent()`总是首先返回`Intent`用于创建活动的。

> 如果我每分钟设置一次通知，我希望通知是分开的。

用户认为那些在他们的屏幕上充斥着通知的开发人员完全是白痴。

> 相反，它只是替换了以前的通知。

这就是您告诉它与您的呼叫有关的内容`notify()`。

# sql - 选择查询没有给出想要的结果

> ID：12835053
> 
> 赞同：0
> 
> 时间：2012-10-11T08:12:33.823
> 
> 标签：sql

我正在编写一个选择查询，在 where 条件下我想检查一个字段值，如果它为空，那么只有我会检查其他其他字段值。请注意，选择是在光标中使用的。

原始查询：

* * *

```
SELECT ni.node_installation_id,ni.customer_node_id,ni.customer_id,c.brand_name_1,substr(nitr.name,1,instr(nitr.name, ' ')-1) as node_inst_type
    from node_installation ni , customer c , node_inst_type_release nitr
    where ni.customer_id = c.customer_id 
    and ni.node_inst_type_release_id = nitr.node_inst_type_release_id
    **and trunc(sysdate) - trunc(ni.arne_timestamp) >= 60** 
    and ni.no_of_collection_node_missed >= 4
    and c.customer_id =90; 
```

以粗体表示的引用语句，如果 ni.arne_timestamp 为 null，则结果也为 null。在这种情况下，我想检查其他条件，如 ni.arne_flag = 'I' 并在选择查询中获取这些行。希望我这次很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:15:11.310

> 如果 ni.arne_timestamp 为 null，则结果也为 null。在这种情况下，我想检查其他情况，例如 ni.arne_flag = 'I'

在谓词中添加对`NULL`值的检查，如下所示：`AND`

```
...
AND(ni.arne_timestamp IS NULL OR ni.arne_flag = 'I')
AND(ni.arne_timestamp IS NULL 
    OR 
    (trunc(sysdate) - trunc(ni.arne_timestamp)) >= 60 ) 
```

因此，使用 ANSI-92`JOIN`语法的查询应如下所示：

```
SELECT 
  ni.node_installation_id,
  ni.customer_node_id,
  ni.customer_id,
  c.brand_name_1,
  substr(nitr.name, 1, instr(nitr.name, ' ') - 1) as node_inst_type
FROM node_installation ni 
INNER JOIN customer c ON ni.customer_id = c.customer_id 
INNER JOIN node_inst_type_release nitr 
        ON ni.node_inst_type_release_id = nitr.node_inst_type_release_id
WHERE (ni.arne_timestamp IS NULL OR ni.arne_flag = 'I')
  AND (ni.arne_timestamp IS NULL 
         OR 
       (trunc(sysdate) - trunc(ni.arne_timestamp)) >= 60 )
  AND ni.no_of_collection_node_missed >= 4
  AND c.customer_id = 90; 
```

# java - em.persist() 需要 JPA 中的父实体对象

> ID：12835057
> 
> 赞同：0
> 
> 时间：2012-10-11T08:12:47.233
> 
> 标签：java, jpa

在下面的代码中，每次我需要在持久化 Emp 时通过传入来获取对象`Dept`，我不想去数据库。我希望像 JDBC 一样只传递 id 而不是对象。每次从数据库影响性能。我怎么做？`deptId``createUser()`

```
public class Emp {
  Integer eid;
  String ename;
  long sal;
  Dept dept;    

  public void createUser(Integer eid,String ename,long sal,Integer deptId) {
    Dept dept = em.find(Dept.class,deptId);
    Emp emp = new Emp();
    emp.setEid(101);
    emp.setEname("Smith");
    emp.setSal(100000);
    emp.setDept(dept);    // here Dept object required 
    em.persist(emp);
  }

}

public class Dept {
  Integer deptid;
  String deptname;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:14:15.167

阅读[EntityManager 的 API 文档](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html)...

*   getReference() - 如果您只需要它作为参考（根据文档可能会延迟获取实例）
*   find() - 如果你也想使用它的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:39:26.263

我认为[em.getReference()](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)适合这些需求

# android - 如何使用phonegap在状态栏中显示android的推送通知？

> ID：12835058
> 
> 赞同：2
> 
> 时间：2012-10-11T08:12:48.280
> 
> 标签：android, cordova, push-notification

我想使用phonegap在android中实现推送通知，我使用下面的链接来实现GCM

[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

我能够实现推送通知，并且在提交 appid regid 和发件人 ID 后，我能够在我的手机屏幕上获得一个小示例文本，但我想在状态栏中显示通知。任何人都可以帮助我如何使用上面的示例在状态栏中显示推送通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:14:59.360

您可以使用[Cordova StatusBarNotification 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification) ，或者如果您想要更快的解决方案，您可以简单地将以下本机 Java 代码添加到您的 GCMIntentService.java onMessage() 函数中：

```
String message = extras.getString("message");
String title = extras.getString("title");
Notification notif = new Notification(android.R.drawable.btn_star_big_on, message, System.currentTimeMillis() );
notif.flags = Notification.FLAG_AUTO_CANCEL;
notif.defaults |= Notification.DEFAULT_SOUND;
notif.defaults |= Notification.DEFAULT_VIBRATE;

Intent notificationIntent = new Intent(context, TestSampleApp.class);
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

notif.setLatestEventInfo(context, title, message, contentIntent);
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);
mNotificationManager.notify(1, notif); 
```

并且不要忘记添加以下导入，

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent; 
```

请务必将**YourActivityClassName.class替换为扩展****DroidGap**的存根类的名称。例如，在示例项目中，它被称为**MainActivity**。

# java - 码头服务器 Web 应用程序和 lib 文件的自动更新程序

> ID：12835070
> 
> 赞同：0
> 
> 时间：2012-10-11T08:13:25.233
> 
> 标签：java, jetty, auto-update

**Jetty 服务器**在我们的客户零售店中作为 POS 应用程序的服务运行。现在，我正在手动发布文件夹并通过团队查看器安装在那里，我需要连接和更新 war/jar 文件以进行任何更改。

为此，我需要一个**自动更新程序**，它可以从通用 Web 服务器获取更改并进行干净的自动更新。更改将是 War 文件或 lib 文件。

任何人都可以最好地建议如何以最好的方式做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:06:58.223

我不知道开箱即用的解决方案，但这是我们几年前在 jetty 上进行的部署管理器工作的设计考虑之一。这最终将是一个自定义的 Provider 实现，而不是本地文件扫描器查找更改，而是可以在其他地方查找更改，获取这些资源，然后触发 jetty 中的相关行为。

我们显然还没有开始实施这种行为，但是如果你想写一些东西并将其贡献回项目或赞助它的开发，在码头拥有它会很有趣。

如果您不想拥有包含在码头本身中的解决方案，您可以使用 shell 脚本和 cron 的组合来拼凑一些可能工作的东西，这些脚本和 cron 会定期唤醒并检查新内容的 url，下载它然后使用触发重新加载相关文件的热部署机制，但这更像是一次性的，可能通常没有用，但我可以看到它在某些情况下是如何工作的。

# web-applications - 如何使用私有 IP 地址访问我的 Web 应用程序

> ID：12835073
> 
> 赞同：0
> 
> 时间：2012-10-11T08:13:42.117
> 
> 标签：web-applications, glassfish

我有以下问题：

我有一个 glassfish Web 应用程序，它位于一个虚拟主机上，在我的 LAN 中有一个相应的私有 IP 地址。我还有一个与我的公共 IP 地址相关联的域名。现在我想让我的 Web 应用程序在 LAN 之外可用，换句话说，我想通过输入我的域名（例如`http://cts.mydomain.it`，它具有公共 IP 地址）来访问位于我的私有 IP 地址上的 Web 应用程序。我怎样才能做到这一点？？？

我希望有人帮助我

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T05:53:32.560

获取与您的私有 IP 地址等效的公共 IP 地址。

# rest - 具有多个参数的 MVC4 Web API Rest 接口

> ID：12835074
> 
> 赞同：7
> 
> 时间：2012-10-11T08:13:43.933
> 
> 标签：rest, parameters, asp.net-mvc-4, asp.net-web-api

我有一个名为 LoginController 的控制器，其 Get 方法的签名为：

```
public string Get(string Key, string Code, string UserID, string Password) 
```

我希望能够通过类似于以下的调用来调用它：

```
http://localhost:1234/api/Login/KeyValue/CodeValue/UserValue/PasswordValue 
```

我不能让它工作。如果我调用调用：

```
http://localhost:1234/api/Login?Key=KeyValue&Code=CodeValueUserID=UserValue&Password=PasswordValue 
```

通话成功。

我尝试将如下路线添加到 Global.asax

```
 routes.MapHttpRoute(name: "Login", routeTemplate: "api/{controller}/{action}/{Key}/{Code}/{UserID}/{Password}",
                defaults: new { Key = UrlParameter.Optional, Code = UrlParameter.Optional, UserID = UrlParameter.Optional, Password = UrlParameter.Optional }); 
```

或者

```
 routes.MapHttpRoute(name: "Login", routeTemplate: "api/{controller}/{Key}/{Code}/{UserID}/{Password}",
                defaults: new { Key = UrlParameter.Optional, Code = UrlParameter.Optional, UserID = UrlParameter.Optional, Password = UrlParameter.Optional }); 
```

这些似乎不起作用。我哪里错了，或者这甚至可能吗？我能够在带有 MVC3 的 RC 版本的 WebApi 中做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T08:22:08.777

您似乎缺少请求中的操作 ( `/api/Login/KeyValue/CodeValue/UserValue/PasswordValue`)。`/api/Login/Get/KeyValue/CodeValue/UserValue/PasswordValue`如果您打算使用第一条路线，请尝试。

如果您希望能够在不指定操作的情况下调用它并默认为“获取”，则必须指定默认操作：

```
defaults: new { Key = UrlParameter.Optional, Code = UrlParameter.Optional, UserID = UrlParameter.Optional, Password = UrlParameter.Optional, Action = "Get" } 
```

我已经在 ASP.NET MVC 4 项目（Visual Studio 2012 RC）中成功地尝试了这个：

创建一个带有动作的 LoginController：

```
public string Get(string Key, string Code, string UserID, string Password)
{
    return Key + Code + UserID + Password;
} 
```

并在 Global.asax.cs 中映射路线：

```
 RouteTable.Routes.MapHttpRoute(null, "api/{controller}/{Key}/{Code}/{UserID}/{Password}",
            new { Key = UrlParameter.Optional, Code = UrlParameter.Optional, UserID = UrlParameter.Optional, Password = UrlParameter.Optional, Action = "Get"}); 
```

如果它对您不起作用，则可能是另一条路由正在捕获请求或该路由未注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:32:59.937

您正试图在不采取行动的情况下进行路由。有用。

但在这种情况下，您应该在控制器中使用属性来标记操作方法。您可以使用以下属性：HttpGet、HttpPut、HttpPost、HttpDelete、AcceptVerbs、NonAction。

有关更多信息，请在文章中阅读：

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

# java - Java 多线程多请求方法

> ID：12835077
> 
> 赞同：5
> 
> 时间：2012-10-11T08:13:49.230
> 
> 标签：java, multithreading, concurrency, http-post

我想向“test.com”发送一个从 0 到 100 的请求，我拥有的代码将每隔一秒发送一个请求......这样程序将需要 100 秒才能完成。

我想做的是设置10个线程同时运行，使线程1从（0,10）开始；线程 2 从 (10,20) ... 等等，这样程序应该只需要 10 秒左右就可以完成，这可能吗？怎么能做到呢？

```
import java.io.InputStreamReader;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.PostMethod;

public class Palomo implements Runnable {
    String url = "http://test.com";
    HttpClient client = null;
    PostMethod method = null;
    BufferedReader br = null;
    String contents = null;

    public void run() {
        for (int i = 0; i <= 100; i++) {
            synchronized (this) {
                doPost(i);
            }
                      try {
        Thread.sleep(1000);
        } catch (InterruptedException e) {
        e.printStackTrace();
        }
        }
    }

    public void doPost(int i) {
        try {
            client = new HttpClient();
            method = new PostMethod(url);

            this.method.addParameter("myPostRequest", Integer.toString(i));

            client.executeMethod(method);

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            method.releaseConnection();
        }
    }

    public static void main(String[] args) {
        new Thread(new Palomo()).start();
    }
} 
```

非常感谢 ！

***编辑***

阅读你给我的指示，我创造了这个可怕的怪物......

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class SimpExec {
    public static void main(String args[]) {

        ExecutorService es = Executors.newFixedThreadPool(4);

        es.execute(new MyThread("A"));
        es.execute(new MyThread("B"));
        es.execute(new MyThread("C"));
        es.execute(new MyThread("D"));

        es.shutdown();
    }
}

class MyThread implements Runnable {
    String name;

    MyThread(String n) {
        name = n;
        new Thread(this);
    }

    public void run() {
        if (name=="A"){
            for (int i=1;i<=10;i++){
                System.out.println(i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        if (name=="B"){
            for (int i=10;i<=20;i++){
                System.out.println(i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        if (name=="C"){
            for (int i=20;i<=30;i++){
                System.out.println(i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        if (name=="D"){
            for (int i=30;i<=40;i++){
                System.out.println(i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

我知道这可能是你看过的最糟糕的一段代码，但它正是我想要的，如果你能给我一些指导，告诉我应该如何以正确的方式完成这件事，那就太好了。

非常感谢您提供的所有重要建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:19:10.300

你应该看看[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)，它是为实现这种事情而创建的。

您可以使用创建一个包含 10 个线程的池，`Executors.newFixedThreadPool(10);`然后提交`Runnable`您想要执行的任务 ( )。池负责在线程之间分派任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T08:19:27.853

您可以使用[Executors.newFixedThreadPool(10)](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)创建一个 Executor，并使用它来执行每个请求作为自己的 Runnable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:21:14.580

为什么不缩短 PostRequest 之间的时间。使用线程会产生相同的影响，因为发送之间的时间更短。您唯一可以通过在此更改帖子发送到的顺序的线程来完成的事情

1, 11, 21,31,41 ... 2, 12,22,32,...

采用

```
Thread.CurrentThread.Sleep(100) 
```

减少主应用程序中发送之间的时间。

此外，让多个线程访问同一个 HTTPClient 可能会遇到麻烦。甚至，如果您同步访问权限，发送过程将是串行的，因为 httpclient 一次只能发布 1 个请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:45:43.863

添加其他评论，建议使用 ExecutorService（这是一个很好的解决方案）
每个提交的 Runnable 对象都应该具有要处理的请求范围。
. 您应该考虑让类扩展 Runnable。
它的代码看起来像 -

```
public class RangedPosts extends Runnable {
    private int start;
    private int end;
    public RangedPosts(int start,int end) {
        this.start = start;
        this.end = end;
    }

    public void run() {
       //Perform here a loop from start to end
    }
} 
```

然后用法应该是一个for循环，创建10个RangePosts的可运行对象，将范围定义（开始和结束）传递给它们

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-02T17:32:36.390

我做过类似的事情，我将分享我的第一个 POC，因为分享感觉很好。

```
package test;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class ThreadCreater {

    // use getShape method to get object of type shape
    public Thread threadRunner(int start, int end, int threadCount, String url) {
    Thread thread = null;
    int tempEnd = 0;
    for (int i = 0; i <= end; i = i + 10) {
        start = i;
        tempEnd = i + 10;
        thread = getThread(start, tempEnd, threadCount, url);
        thread.start();
    }

    return null;
    }

    public static Thread getThread(int start, int end, int threadCount, String url) {
    Thread thread = new Thread() {
        public void run() {
        try {
            sendGET(start, end, url);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }

        private void sendGET(int start, int end, String url) throws Exception {
        url += "start=" + start + "&end=" + end;
        URL obj = new URL(url);
        // Send post request
        HttpURLConnection con = (HttpURLConnection) obj.openConnection();

        // basic reuqest header to simulate a browser request
        con.setRequestMethod("GET");
        con.setRequestProperty("User-Agent",
            "Mozilla/5.0 (Windows NT 6.3; rv:36.0) Gecko/20100101 Firefox/51.0");
        con.setRequestProperty("Upgrade-Insecure-Requests", "1");
        con.setRequestProperty("Connection", "keep-alive");
        con.setDoOutput(true);

        // reading the HTML output of the POST HTTP request
        BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
        }
    };
    return thread;
    }

    public static void main(String[] args) {
    ThreadCreater obj = new ThreadCreater();
    int start = 0;
    int end = 100;
    int threadCount = 10;
    String url = "http://iseebug.com/test.php?";

    obj.threadRunner(start, end, threadCount, url);
    }

} 
```

下面是简单的 test.php 代码

```
<?php
/**
 * Created by PhpStorm.
 * User: polo
 * Date: 02-04-2017
 * Time: 22:28
 */

$q1 = isset($_GET['start']) ? $_GET['start'] : 'fakeMIP';
$q2 = isset($_GET['end']) ? $_GET['end'] : 'fakeMIP';

if($q1>=0&&$q2<=10){
echo $q2;
}elseif ($q1>=10&&$q2<=20){
    echo $q2;
}elseif ($q1>=20&&$q2<=30){
    echo $q2;
}elseif ($q1>=30&&$q2<=40){
    echo $q2;
}elseif ($q1>=40&&$q2<=50){
    echo $q2;
}elseif ($q1>=50&&$q2<=60){
    echo $q2;
}elseif ($q1>=60&&$q2<=70){
    echo $q2;
}elseif ($q1>=70&&$q2<=80){
    echo $q2;
}elseif ($q1>=80&&$q2<=90){
    echo $q2;
}elseif ($q1>=90&&$q2<=100){
    echo $q2;
} 
```

祝你好运。

但我更喜欢 java 的 ExecutorService 用于高使用率，对于有限的要求，您可以使用基本线程。

向我寻求任何帮助。

# android - jQuery 动画在 Android 4.0 中不起作用

> ID：12835080
> 
> 赞同：0
> 
> 时间：2012-10-11T08:14:04.877
> 
> 标签：android, jquery, cordova, twitter-bootstrap

我在我的应用程序中使用 twitter bootstrap、jquery 和 phonegap。

我有一个带有溢出的 div:scroll 和两个按钮来浏览它：

```
 <a href="#" id="left-button" style="float: left;"><i class="icon-chevron-left"></i></a>
    <a href="#" id="right-button" style="float: right;"><i class="icon-chevron-right"></i></a>
    <div id="content" style="overflow: scroll; white-space: nowrap;">
        <img src="img/bandera.jpg" class="img-rounded">
        <img src="img/arbol.jpg" class="img-rounded">
    </div> 
```

我有下一个 jquery 脚本来使用这些按钮：

```
 $('#right-button').click(function(){
       $('#content').animate({
           scrollLeft: '+=200px'
       }, 600 );
     });
   $('#left-button').click(function(){
       $('#content').animate({
           scrollLeft: '-=200px'
       }, 600 );
     }); 
```

但我有一个问题。这些按钮在我的桌面上的 Firefox、Chrome 甚至 IE 中都可以正常工作，并且在 Android 2.2 中也可以正常工作

但出于某种原因，在 Android 4.0 中，按钮什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:06:36.293

试试 jquery-1.9.1.js，我对 Android 2.3.6 设备上的 jquery-1.8.2.js 有同样的问题。我终于通过升级到 jquery-1.9.1.js 解决了这个问题。

[http://bugs.jquery.com/ticket/12497](http://bugs.jquery.com/ticket/12497)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:29:01.293

因此，我尝试过的最简单的解决方法是在动画之前将 CSS 溢出属性设置为隐藏，并在调用完成处理程序时将其恢复为“滚动”/“自动”。

问题是，当我将“溢出”设置回“滚动”时，可滚动的 div 会上升到顶部……有什么想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:17:52.750

你会试试这个。

```
 $('#left-button').live("click", function(){
       $('#content').animate({
           scrollLeft: '-=200px'
       }, 600 );
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T03:14:22.033

scrollLeft 在 Android 中不起作用，它是 Android 浏览器 (4.0.3+) 中的一个已知错误。

[看看这个stackoverflow问题](https://stackoverflow.com/questions/12641898/jquery-scrollleft-not-working-on-android)

相反，您可以使用内部元素的“左”属性。

# java - Android - seekBar 索引超出范围异常

> ID：12835083
> 
> 赞同：0
> 
> 时间：2012-10-11T08:14:14.903
> 
> 标签：java, android, seekbar

```
 cpu0minSeek.setMax(frequencies.size());
 cpu0minSeek.setProgress(frequencies.indexOf(cpu0MinFreq));
    cpu0minSeek.setOnSeekBarChangeListener(new OnSeekBarChangeListener(){

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            cpu0min.setText(frequencies.get(progress).substring(0, frequencies.get(progress).length() - 3) + "Mhz");

        } 
```

这个想法是：

我有一个 seekBar 和一个 textView

我检索可用频率列表并将 seekBar 的最大进度设置为列表的大小。在进度更改时，我将 textView 上的文本设置为列表中的频率，其索引与搜索栏中的进度相同

当 seekbar 达到最大进度时，我收到**indexOutOfBoundException**

我知道发生这种情况的原因，因为索引变得与大小相同，所以它不存在，但我不明白如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:20:10.470

`cpu0minSeek.setMax(frequencies.size() - 1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:27:10.630

```
cpu0minSeek.setMax(frequencies.size() - 1); 
```

这实际上有效。该用户的帖子已删除，我无法接受

# php - 如何打破 ob_start() 并在一些标签后继续

> ID：12835092
> 
> 赞同：1
> 
> 时间：2012-10-11T08:14:44.720
> 
> 标签：php, caching, ob-start

我想为一个电子商务平台构建一个缓存系统。

我选择在页面末尾使用`ob_start('callback')`和。`ob_end_flush()`

我将验证是否`.cache`为访问的 url 创建了任何文件，如果有文件，我将打印其内容。

我的问题是我想让购物车保持活动状态，所以我不想缓存它。我怎样才能做到这一点？

```
<?php

    function my_cache_function($content) {
        return $content;
    }

    ob_start('my_cache_function');

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>test</title>
</head>
<body>
     test
     <?php
         //some ob_break() ?
     ?>
     <div id="shopping-cart">
         this should be the content I do not want to cache it
     </div>
     <?php
         // ob_continue() ?
     ?>

</body>
</html>
<?php
     ob_end_flush();
?> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:21:13.813

你可以这样做：

```
<?php

    function my_cache_function($content) {
        return $content;
    }
    $output = "";
    ob_start('my_cache_function');

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>test</title>
</head>
<body>
     test
     <?php
         $output .= ob_get_clean();
     ?>
     <div id="shopping-cart">
         this should be the content I do not want to cache it
     </div>
     <?php
         ob_start();
     ?>

</body>
</html>
<?php
         $output .= ob_get_clean();
         echo $output;
?> 
```

尽管这实际上没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:19:46.883

如果你这样做，问题是内容将在之前放置的任何 HTML 之前输出。您可能想要将该内容保存在某个变量中，然后在缓存“模板”文件中使用占位符，例如 %SHOPPING-CART%

因此，您可以将其替换为带有真实非缓存内容的 str_replace。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T08:48:10.613

我不确定 Zulakis 的解决方案是否能顺利进行……这个改动呢？

```
<?php
$pleaseCache=true;
function my_cache_function($content) {
    if($pleaseCache)
    {
        /// do your caching
    }
    return $content;
}
$output = "";
ob_start('my_cache_function');

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>test</title>
</head>
<body>
     test
     <?php
         $output .= ob_get_clean();
         $pleaseCache = false;
         ob_start('my_cache_function');
     ?>
     <div id="shopping-cart">
         this should be the content I do not want to cache it
     </div>
     <?php
         $output .= ob_get_clean();
         $pleaseCache = true;
         ob_start('my_cache_function');
     ?>

</body>
</html>
<?php
     $output .= ob_get_clean();
     ob_end_clean();
     echo $output;
?> 
```

再说一次，不确定这是否有意义......但我假设你有你的理由。

# deployment - 使用 hudson deploy 插件将 .war 自动部署到远程 jboss4.2.3.GA 失败

> ID：12835094
> 
> 赞同：1
> 
> 时间：2012-10-11T08:14:59.617
> 
> 标签：deployment, jboss, hudson, system-properties

我正在使用 hudson-deploy 插件，将我的`.war`文件自动部署到远程`jboss4.2.3.GA`. 当我将端口设置为低于`10000`时，它可以工作，例如：

```
http://10.78.68.210:8080/ 
```

但是我们的系统正在使用端口`17200`，所以 url 应该是

```
http://10.78.68.210:17200 
```

这一次，自动部署失败。错误信息是：

```
Caused by: java.lang.IllegalArgumentException: port out of range:117200
    at java.net.InetSocketAddress.<init>(InetSocketAddress.java:118)
    at org.codehaus.cargo.container.jboss.JBoss4xRemoteDeployer.buildSocketAddressForDeployableServer(JBoss4xRemoteDeployer.java:269)
    at org.codehaus.cargo.container.jboss.JBoss4xRemoteDeployer.<init>(JBoss4xRemoteDeployer.java:133)
    at org.codehaus.cargo.container.jboss.JBoss4xRemoteDeployer.<init>(JBoss4xRemoteDeployer.java:117)
    ... 27 more 
```

我在上面看到了一个意想不到的“117200”，而不是“17200”

所以我检查了源代码：

```
String portStr = configuration.getPropertyValue(JBossPropertySet.REMOTEDEPLOY_PORT);
if (portStr == null)
{
    portStr = "1" + configuration.getPropertyValue(ServletPropertySet.PORT);
} 
```

和

```
String REMOTEDEPLOY_PORT = "cargo.jboss.remotedeploy.port"; 
```

由于病毒portStr总是返回`null`，portStr然后设置为“1”+“17200”，结果是“117200”

如何让 hudson-deploy 加载有价值的`cargo.jboss.remotedeploy.port`属性？我尝试了一切，但每次都失败了。

多谢！

# php - 在 PHP 的扩展类中重新定义方法时返回正确的类名

> ID：12835099
> 
> 赞同：1
> 
> 时间：2012-10-11T08:15:13.487
> 
> 标签：php, oop, class, object, syntax

我希望第一个示例代码产生与第二个相同的结果，但事实并非如此。所以为了得到正确的类名，我不得不重新定义`msg()`扩展类中的自定义方法。

我想知道为什么第一个不产生扩展类名，以及为什么在重新定义完全相同的方法时它会产生。

**示例 1**

```
call_user_func(array(new MyClass_Mod, "msg"));

class MyClass {
    function msg() {
        echo '<p>get_class(): ' . get_class() . '</p>';
    }
}
class MyClass_Mod extends MyClass {
} 
```

**输出**

> get_class(): 我的班级

**示例 2**

```
call_user_func(array(new MyClass_Mod, "msg"));

class MyClass {
    function msg() {
        echo '<p>get_class(): ' . get_class() . '</p>';
    }
}
class MyClass_Mod extends MyClass {
    function msg() {
        echo '<p>get_class(): ' . get_class() . '</p>';
    }
} 
```

**输出**

> get_class(): MyClass_Mod

我想知道机制，所以不建议使用`get_called_class()`. 我无法将它用于 PHP 5.3 以下的版本。感谢您的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:16:57.887

您只需将`$this`参数传递给[`get_class`](http://php.net/manual/function.get-class.php)函数。

```
get_class($this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:20:59.430

If the parameter of `get_class` is omitted when inside a class, **the name of that class** is returned.

You need to specify the parameter with `$this`.

# visual-studio - 如何在 Visual Studio 中创建解决方案文件夹或文件的快捷方式

> ID：12835108
> 
> 赞同：1
> 
> 时间：2012-10-11T08:15:44.253
> 
> 标签：visual-studio, visual-studio-2012, keyboard-shortcuts

我现在正在处理的项目结构非常糟糕。是否有可能像在 Windows 资源管理器中一样在 Visual Studio 2012 中为文件和文件夹创建快捷方式。

我想有常用文件夹和文件的快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:49:04.387

该问题的解决方案只是添加新的解决方案文件夹。然后将文件拖放到该文件夹​​中，它们将自动成为快捷方式。不幸的是，我没有找到为文件夹创建快捷方式的解决方案。

![文件快捷方式](../Images/c5d18cf166733ccf89fb4cc1bca10510.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:19:51.657

将这些文件放在共享项目中并引用它或将其添加到您的其他解决方案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-19T11:47:33.737

可以按如下方式创建快捷方式解决方案文件夹：

*   右键单击 .csproj 文件，然后选择*编辑项目文件*
*   添加这样的条目

...

```
<ItemGroup>
    <Compile Include="any_abs_or_rel_path\**\*.*">
        <Link>%(RecursiveDir)%(FileName)%(Extension)</Link>
    </Compile>
</ItemGroup> 
```

[这篇博文](https://web.archive.org/web/20120719043826/http://greenicicleblog.com/2010/12/01/link-whole-directories-into-visual-studio-projects)提供了更多细节。

# java - Java 自定义异常处理

> ID：12835119
> 
> 赞同：0
> 
> 时间：2012-10-11T08:16:20.020
> 
> 标签：java, exception

我正在寻找有关如何在一个场景中处理 java 中的异常的建议，其中

```
Class A.test() 
{
    ClassB.test1()
}

test1()
{
   Map listOfExceptions = new HashMap();
   for()
   {
      try{
      }
      catch(custException e){
       // I want the for loop to continue even if there is an exception
       //So I am not throughing now rather adding the exception message to map with 
       //the field name for which for loop is running as key and message as value
      {
   }

// at some point if map has >0 records I want to throw an exception to classA.
} 
```

所以这里的问题是如何将地图数据添加到抛出的异常中？基本上我需要将异常列表发送到调用方法，作为异常处理的一部分。有没有办法我们可以做到这一点？如果答案众所周知，这可能是一个非常愚蠢的问题，但我无法在任何地方找到确切的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T08:21:35.577

为什么不只是在迭代时构建一个`List<Exception>`？然后，如果该列表不为空，则在完成时抛出一个`CustomException`（派生自），并将 提供为 that 中的字段。`Exception``List<Exception>``CustomException`

您可能不希望存储 a`List<Exception>`但 a `List<Info>`where`Info`表示导致异常的数据。那可能会更轻量级。

更好的是，创建一个可以在它们发生时`ErrorCollator`添加的对象。`Exceptions`完成后，调用`ErrorCollator.throwExceptionIfReqd()`，该对象本身可以确定是否抛出异常（简单地说，如果`List`不为空）。这样，您就有了一个可以一致使用的可重用组件/模式。如果不立即做，也许值得努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:24:56.217

创建一个自定义异常类，例如

```
Class CustomException extends Exception{

Map listOfExceptions; 

CustomException (Map m){
  ListofExceptions=m;
 }
} 
```

现在，当记录 >0 或任何其他条件时抛出此客户异常。

```
throw new CustomException(listOfExceptions); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:29:18.053

查看以下代码，了解如何将异常添加到 HashMap

```
public class ClassA {

    HashMap hm = new HashMap(); //HashMap Object that holds Exceptions

    public ClassA(){
        try {
            runA();
        } catch (Exception ex) {
            hm.put("a", ex); //put Exception in HashMap
        }
        try {
            runB();
        } catch (Exception ex) {
            hm.put("b", ex); //put Exception in HashMap
        }
    }

    private void runA() throws Exception {
        throw new Exception("a"); //Generate exception a
    }

    private void runB() throws Exception {
        throw new Exception("b"); //Generate exception b
    }
} 
```

然后你可以通过提供一些getter函数来扩展这个类来获取你的HashMap对象并使用这个循环（迭代器）你可以迭代它：

```
// Get a set of the entries
Set set = hm.entrySet();
// Get an iterator
Iterator i = set.iterator();
// Display elements
while(i.hasNext()) {
  Map.Entry me = (Map.Entry)i.next();
  System.out.print(me.getKey() + ": ");
  System.out.println(me.getValue());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:54:34.357

请尝试以下代码。在我的示例代码中，我将 String 解析为 int。

> 直到数组结束，解析继续。如果发生异常，把它放到地图上。该映射包含作为键运行 for 循环的字段名称和作为值运行的异常消息。
> 
> 在数组的最后，检查映射是否需要向调用类抛出异常。

```
public class ExceptionHadlingTest {

    public static void main(String[] args) {
        A1 a1 = new A1();
        a1.test();
    }
}
class A1 {
    public void test() {

        B1 b1= new B1();
        try {
            b1.test1();
        } catch (Exception e) {
        }
    }
}

class B1 {
    public void test1() throws Exception {
        Map<String, String> exceptions = new HashMap<String, String>();
        String[] array = {"1","a","2","b","6"};
        for (int i=0; i< array.length ; i++) {
            try {
                int a = Integer.parseInt(array[i]);
            } catch (Exception e) {
                exceptions.put(array[i], e.getMessage());
            }
        }
        if(exceptions.size() > 0) {
            System.out.println("Total Number of exception " + exceptions.size());
            for (Entry<String, String> entry : exceptions.entrySet()) {
                System.out.println(entry.getKey() + " " + entry.getValue());
            }
            throw new Exception();
        }
    }
    private int parse(String str) {
        int a = Integer.parseInt(str);
        return a;
    }
} 
```

您也可以在 for 中使用 customException。

# database - 将内容从数据库项目部署到其他数据库

> ID：12835122
> 
> 赞同：0
> 
> 时间：2012-10-11T08:16:39.067
> 
> 标签：database, visual-studio, tfs, vsdbcmd

我在 TFS 中有一个构建定义，它在 Visual Studio 中构建一个数据库项目。输出是一个 dbschema 和一些其他文件。使用该 dbschema，我使用 vsdbcmd 将该数据库部署到另一台服务器。这可以很好地部署数据库结构/模式。

是否也可以将原始数据库的数据/内容部署到另一个数据库？或者也将 db-content 放在构建定义的输出中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:28:30.627

您可以在 DB 项目的 PostDeploy sql 脚本中包含 INSERT 语句，以生成您需要的任何数据。

如果您想整体生成这些 INSERT 语句，您可以使用数据比较工具将带有数据的数据库与没有数据的数据库进行比较，它将生成您需要的所有 INSERT 语句，然后您可以将其复制粘贴到 PostDeployment 脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T12:21:41.623

我们在部署后脚本中使用 SQL 合并脚本（带有 MERGE-stmts 的脚本文件）来保持数据库中的查找表是最新的。为每个查找表创建一个脚本文件（合并 stmt）并从您的部署后脚本中引用这些文件。有时可能需要在将数据加载到查找表之前删除 FK 关系并以特定顺序加载它们。我们创建了两个脚本，一个在合并脚本之前运行，删除 FK，另一个在合并脚本之后运行，重新创建 FK。对我们来说很好。

# asp.net - 如何为活动目录配置连接字符串

> ID：12835131
> 
> 赞同：3
> 
> 时间：2012-10-11T08:17:19.870
> 
> 标签：asp.net, asp.net-mvc, active-directory, web-config

我需要为 Active Directory 配置连接字符串，我的 Web 应用程序位于可以访问 Active Directory 的同一台机器上

目前我使用这个字符串没有成功

```
<add name="ADConnectionString" connectionString="" /> 
```

您能否指出正确的方向，因为这是我第一次对 Active Directory 进行查找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:57:25.990

访问 Active Directory 安全性需要到您的 Active Directory 的连接字符串。您的系统管理员应该为您提供适当的连接字符串信息。应用程序安全向导为根域控制器和一级域控制器提供了可能的 Active Directory 连接字符串，这足以连接到 Active Directory 并使用 Active Directory 安全性。这是一个非常强大的功能。如果没有可用的 Active Directory，则无法对任何人进行身份验证。配置的连接字符串作为 ADDomainControllers 键的值存储在应用程序的 Web.config 文件中。如果在通过应用程序安全向导配置应用程序安全时 Active Directory 控制器不可用，则除了标准角色之外，向导中不会显示任何角色。因此，

为没有身份验证的新站点或使用数据库身份验证的现有站点提供针对 Active Directory 的身份验证所需的步骤...

Active Directory 连接字符串与 ASP.NET 中使用的数据库连接字符串类似，只是它引用了一个 LDAP 地址。

```
 <connectionStrings>
     <add name="ADConnectionString"
      connectionString="LDAP://Product.com.au/DC=Product,DC=prd,DC=au"/>
     </connectionStrings> 
```

这在 web.config 文件及其整个产品中。我们可以这样做，特别是，

像

```
<connectionStrings>
<add name="ADConnectionString"
  connectionString="LDAP://Sub.Product.com.au/CN=Sub,DC=Product,DC=prd,DC=au"/>
 </connectionStrings> 
```

然后配置成员资格提供程序

```
<membership defaultProvider="defaultProviderName">
<providers>
    <add name="defaultProviderName"
    type="System.Web.Security.ActiveDirectoryMembershipProvider,
    System.Web, Version=2.0.0.0, Culture=neutral,
    PublicKeyToken=b03f5f7f11d50a3a"
    connectionStringName="NmaeActiveDirConnectionString"
    attributeMapUsername="Name"/>
</providers>
</membership> 
```

然后配置身份验证和授权参数，上述设置要求每个用户在访问您的 Web 应用程序之前进行身份验证。ASP.NET 会自动将这些用户重定向到 Login.aspx 页面。

```
<authentication mode="Forms">
<forms name=".ADAuthCookie" timeout="43200"/>
 </authentication>
  <authorization>
  <deny users="?"/>
  <allow users="*"/>
 </authorization> 
```

最后一步是创建登录页面，

`Membership.GetUser(UserName)`用于获取详细信息。

# c# - 当我尝试调用 Web 服务时出现 KSoap 错误消息

> ID：12835132
> 
> 赞同：0
> 
> 时间：2012-10-11T08:17:30.347
> 
> 标签：c#, android, .net, web-services

我正在使用 SOAP 与用`.Net`. 源代码如下：

```
public class SlipperyAsSoap extends Activity {

Button sendMsg;
TextView resultText;
EditText query;

final String NAMESPACE = "http://tempuri.org/";
final String SOAP_ACTION = "http://tempuri.org/IIOService/SendMessage";
final String METHOD_NAME = "SupportedMessageTypes";
final String URL = "http://biovnap.no.netserver/Bio/IOService.svc?wsdl";

// private static String SOAP_ACTION1 =
// "http://tempuri.org/FahrenheitToCelsius";
// private static String SOAP_ACTION2 =
// "http://tempuri.org/CelsiusToFahrenheit";
// private static String NAMESPACE = "http://tempuri.org/";
// private static String METHOD_NAME1 = "FahrenheitToCelsius";
// private static String METHOD_NAME2 = "CelsiusToFahrenheit";
// private static String URL =
// "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    sendMsg = (Button) findViewById(R.id.button1);
    resultText = (TextView) findViewById(R.id.textView1);
    query = (EditText) findViewById(R.id.editText1);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);

    sendMsg.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            // Initialize soap request + add parameters
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            // Use this to add parameters
            // request.addProperty("Fahrenheit",
            // query.getText().toString());

            // Declare the version of the SOAP request
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);

            envelope.setOutputSoapObject(request);
            envelope.dotNet = true;

            try {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(
                        URL);
                androidHttpTransport.debug = true;
                // this is the actual part that will call the webservice

                androidHttpTransport.call(SOAP_ACTION, envelope);

                // Get the SoapResult from the envelope body.
                SoapObject result = (SoapObject) envelope.bodyIn;

                if (result != null) {
                    // Get the first property and change the label text
                    resultText.setText(result.getProperty(0).toString());
                } else {
                    Toast.makeText(getApplicationContext(), "No Response",
                            Toast.LENGTH_LONG).show();
                }
            } catch (IOException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                Log.e("XMLPullParser: ", e.getMessage());
            }
        }

    });
}
} 
```

如您所见，我尝试联系 W3Schools 的 Web 服务，只是为了测试。这很好用，但是当我尝试联系我的网络服务时，我的网络服务可以与我的手机在同一个网络中访问，我只从 LogCat 收到这个错误：

```
10-11 10:11:21.435: E/XMLPullParser:(1043): unexpected type (position:END_DOCUMENT null@1:1 in java.io.InputStreamReader@41a790d8) 
```

我尝试达到的方法是这样的：

```
wsdl:operation name="SupportedMessageTypes">
<wsdl:input wsaw:Action="http://tempuri.org/IIOService/SupportedMessageTypes" message="tns:IIOService_SupportedMessageTypes_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/IIOService/SupportedMessageTypesResponse" message="tns:IIOService_SupportedMessageTypes_OutputMessage"/>
</wsdl:operation> 
```

当我尝试执行此操作时会发生此错误，`androidHttpTransport.call(SOAP_ACTION, envelope);`我知道这应该放在 AsyncTask 中，每个网络操作都应该以这种方式构造，所以请不要抱怨。

**这是来自 WCF 测试客户端的请求 XML**

```
 <s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://tempuri.org/IIOService/SupportedMessageTypes</a:Action>
    <a:MessageID>urn:uuid:5c3f721a-f0d6-4be9-9699-10b48a2ee146</a:MessageID>
    <a:ReplyTo>
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
  </s:Header>
  <s:Body>
    <SupportedMessageTypes xmlns="http://tempuri.org/" />
  </s:Body>
</s:Envelope> 
```

**和响应 XML**

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://tempuri.org/IIOService/SupportedMessageTypesResponse</a:Action>
    <a:RelatesTo>urn:uuid:85436e79-86bb-4370-843c-b1047975b864</a:RelatesTo>
  </s:Header>
  <s:Body>
    <SupportedMessageTypesResponse xmlns="http://tempuri.org/">
      <SupportedMessageTypesResult xmlns:b="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <b:string>EurodacTestReplyGenerator</b:string>
        <b:string>EurodacBlock</b:string>
      </SupportedMessageTypesResult>
    </SupportedMessageTypesResponse>
  </s:Body>
</s:Envelope> 
```

任何人都可以给我这个错误信息的提示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:35:41.563

**`SOAP_ACTION`**是**`NAMESPACE + METHOD`**

所以，这就是我认为你在调用自己的服务时出错的地方。

*假设*您已更正分配的方法和命名空间，以下应该可以工作。

```
final String NAMESPACE = "http://tempuri.org/";
final String SOAP_ACTION = "http://tempuri.org/IIOService/SupportedMessageTypes";
final String METHOD_NAME = "SupportedMessageTypes"; 
```

# php - 如何使用 PHP 从日期中查找星期几的日期？

> ID：12835133
> 
> 赞同：109
> 
> 时间：2012-10-11T08:17:33.520
> 
> 标签：php, date

如果我有一个`$date` `YYYY-mm-dd`并且想要获得`$day`一周中的特定（由 0（星期日）到 6（星期六）指定）`YYYY-mm-dd`。

例如，如果我得到`2012-10-11`as`$date`和`5`as `$day`，我想得到`2012-10-12`，如果我得到`0`as `$day`，`2012-10-14`

**编辑：**
你们中的大多数人都误解了它。我得到了一些日期，`$date`并希望获得同一周的 0-6 指定的日期`$date`。

所以不，我不想要`$date`……

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-10-11T08:35:14.613

我想这就是你想要的。

```
$dayofweek = date('w', strtotime($date));
$result    = date('Y-m-d', strtotime(($day - $dayofweek).' day', strtotime($date))); 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-10-11T08:20:56.927

您可以使用 date() 函数：

```
date('w'); // day of week 
```

或者

```
date('l'); // dayname 
```

获取日期的示例函数：

```
function getWeekday($date) {
    return date('w', strtotime($date));
}

echo getWeekday('2012-10-11'); // returns 4 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-11T08:30:26.430

尝试

```
$date = '2012-10-11';
$day  = 1;
$days = array('Sunday', 'Monday', 'Tuesday', 'Wednesday','Thursday','Friday', 'Saturday');
echo date('Y-m-d', strtotime($days[$day], strtotime($date))); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-09-17T08:46:28.350

如果您的日期已经是`DateTime`或者`DateTimeImmutable`您可以使用该`format`方法。

```
$day_of_week = intval($date_time->format('w')); 
```

[格式字符串与date](http://php.net/manual/en/function.date.php)函数使用的格式字符串相同。

* * *

要回答预期的问题：

```
$date_time->modify($target_day_of_week - $day_of_week . ' days'); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-11T08:21:17.210

PHP手册说：

> w 星期几的数字表示

因此，您可以使用 mktime 构造一个日期，并在其中使用`date("w", $yourTime);`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-11T08:32:40.360

只是：

2012-10-11 作为 $date 和 5 作为 $day

```
<?php
$day=5;
$w      = date("w", strtotime("2011-01-11")) + 1; // you must add 1 to for Sunday

echo $w;

$sunday = date("Y-m-d", strtotime("2011-01-11")-strtotime("+$w day"));

$result = date("Y-m-d", strtotime($sunday)+strtotime("+$day day"));

echo $result;

?> 
```

$result = '2012-10-12' 就是你想要的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T08:29:18.453

恐怕你必须手动完成。获取日期的当前星期几，计算偏移量并将偏移量添加到日期。

```
$current = date("w", $date)
$offset = $day - $current
$new_date = new DateTime($date)
    ->add(
        new DateInterval($offset."D")
    )->format('Y-m-d') 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-19T19:00:32.437

我不得不对葡萄牙语（巴西）使用类似的解决方案：

```
<?php
$scheduled_day = '2018-07-28';
$days = ['Dom','Seg','Ter','Qua','Qui','Sex','Sáb'];
$day = date('w',strtotime($scheduled_day));
$scheduled_day = date('d-m-Y', strtotime($scheduled_day))." ($days[$day])";
// provides 28-07-2018 (Sáb) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-18T15:10:33.803

```
<?php echo date("H:i", time()); ?>
<?php echo $days[date("l", time())] . date(", d.m.Y", time()); ?> 
```

很简单，这应该可以解决问题

# windows - [delphi]如何检测文件夹是否在使用中？

> ID：12835135
> 
> 赞同：0
> 
> 时间：2012-10-11T08:17:39.043
> 
> 标签：windows, delphi, winapi

我在一个项目中写了两个线程。

Thread1 用于将文件夹 1 中的所有文件和子文件夹处理到文件夹 2。

folder1 和 folder2, folder3 都来自输入。

Thread2用于检查folder2是否有任何文件或子文件夹，如果为true，则将它们移动到folder3（将它们复制到folder3，然后将它们从folder2中删除）。

有问题。

示例 1

folder1 'C:\Test\1'

folder1 的孩子

C:\测试\1

C:\Test\1\L.tex

C:\Test\1\sdf.txt

C:\Test\1\2031 <--- 这是文件夹

文件夹 2 'D:\Sdf\555'

文件夹 3 'D:\Sdf\492pS1'

**项目运行...**

Thread1 创建 D:\Sdf\555\1

Thread2 将 D:\Sdf\555\1 移动到 D:\Sdf\492pS1\1

Thread1 创建 D:\Sdf\555\1\2031(D:\Sdf\555\1 被移除)

**错误...**

如何检测文件夹是否在使用中？

# javascript - 如何计算每个参数的 json 项？

> ID：12835144
> 
> 赞同：-1
> 
> 时间：2012-10-11T08:18:30.240
> 
> 标签：javascript, json, extjs

我有一个 JSON 商店：

```
{
    "Week": 1145,
    "From": "IN1"
},
{
    "Week": 1145,       
    "From": "IN1"
},
{
    "Week": 1145,        
    "From": "IN2"
},
{
    "Week": 1146,
    "From": "IN1"
},
{
    "Week": 1146,
    "From": "IN2"
} 
```

我想为每个“周”计算“从”的数量，例如第 1146 周，我会得到 IN1 = 1 和 IN2 = 1，对于第 1145 周，我会得到 IN1 = 2 和 IN2 = 1。

我编写了一个函数，它遍历我的数据存储以计算每个参数的 IN1 和 IN2：

```
countBy: function(param){
    var count = {};
    this.each(function(item){
        var type = item.get(param);
        if (Ext.isDefined(count[type])){
            count[type]++;
        } else {
            count[type] = 1;
        }                               
    });
    return count;
} 
```

但问题是当我在参数中给它“Week”时，它不计算每个WEEK的IN1和IN2，它返回“1145”：3和1146：2，但我想要的是：“1145”：{ IN1：2} 和“1146”：{IN1：1}。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:30:35.000

您也需要`From`作为参数传递。

试试下面：

```
countBy: function(param, param2){
    var count = {};
    this.each(function(item){
        var type = item.get(param);
        var from = item.get(param2);
        if (type in count){
            if (from in count[type]) {
              count[type][from]++;
            } else {
              count[type][from] = 1;
            } 
        } else {
            count[type] = {};
            count[type][from] = 1;
        }                               
    });
    return count;
} 
```

# javascript - Rails 3 UJS 在等待 ajax:callback 时运行一个 while 循环

> ID：12835146
> 
> 赞同：0
> 
> 时间：2012-10-11T08:18:38.980
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.2, ujs

`:remote => true`这是我用于表单的 javascript 。

目前，当提交表单时，该函数运行一次。（宽度增加 5%。

但是，我希望这个动画循环运行，以便宽度以 5% 的增量不断增加，直到我得到一个 ajax:success 或一个 ajax:failure 回调，此时我想跳转到另一个函数。

```
$('#new_message').bind('ajax:loading', function() {
  $('#send_bar').animate({
    width: '+=5%'
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:06:33.213

声明一个运行动画的函数，然后在[完成参数](http://api.jquery.com/animate/)中，传递该函数，使其递归调用自身：

```
var start_animation = function() {
  $('#send_bar').animate({width: '+=5%'}, 5000, 'linear', start_animation);
} 
```

在加载函数中，调用该函数开始动画：

```
$('#new_message').bind('ajax:loading', function() {
  start_animation();
}); 
```

然后在绑定到 ajax:success 和 ajax:failure 时，调用[stop](http://api.jquery.com/stop/)：

```
$('#new_message').bind('ajax:success', function() {
  $('#send_bar').stop();
});

$('#new_message').bind('ajax:failure', function() {
  $('#send_bar').stop();
}); 
```

# iis - 经典的 ASP url 重写模块

> ID：12835151
> 
> 赞同：1
> 
> 时间：2012-10-11T08:19:08.490
> 
> 标签：iis, iis-7, asp-classic

> **可能重复：**
> [是否可以在经典 asp 中进行友好的 url（url 重写）？](https://stackoverflow.com/questions/1090553/is-it-possible-to-do-friendly-url-url-rewriting-in-classic-asp)

是否可以在 IIS7 中为经典的 asp 站点配置 url 重写？我已经为 IIS 安装了 url 重写模块。
我已按照说明设置入站和出站规则。

原来的网址是[http://mydomain.com/Products.asp?Param=9319&ig_id=31457&title=Electric](http://mydomain.com/Products.asp?Param=9319&ig_id=31457&title=Electric)

当我尝试我的新网址时，例如[http://mydomain.com/Products/9319/31457/Electric](http://mydomain.com/Products/9319/31457/Electric)我收到以下错误

HTTP 错误 404.2 - 未找到 由于 Web 服务器上的 ISAPI 和 CGI​​ 限制列表设置，无法提供您请求的页面。

我在 .NET 测试站点上尝试了完全相同的方法，一切正常。任何帮助，将不胜感激。请记住，这是一个经典的 ASP 站点，而不是 .NET

我已经按照下面提供的链接中的内容进行操作，但仍然没有乐趣。我尝试编写自定义 404 页面并将其设置为 IIS 中的 404 页面，但似乎没有调用 404 页面。谢谢

# jakarta-ee - 每次都需要重启 Tomcat 才能让 Xuggler 正常工作

> ID：12835166
> 
> 赞同：0
> 
> 时间：2012-10-11T08:20:19.517
> 
> 标签：jakarta-ee, tomcat, xuggler

我正在尝试开发一个视频共享网站，用户可以在其中上传视频，一旦上传视频，就会为该视频创建缩略图。这是通过 Xuggler 完成的。这很好用，但是当我第二次或下一次这样做时，它不会生成图像。知道为什么吗？下次会上传视频，但不会为它们生成图像。当 Web 应用程序第一次运行，并且用户上传视频时，只会生成图像。因此，为了为每次上传生成图像，我必须重新启动我的服务器（Tomcat）。这个有什么办法？？？我在下面列出我的代码，我希望我能得到良好的回应。

此代码来自 我的 Web 应用程序的第一页**index.jsp**，用户将从该页面上传视频：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <script type="text/javascript">
        function validate(){
            document.getElementById("mybutton").style.visibility="visible";
            document.getElementById("file_browse").style.visibility="hidden";

        }
    </script>
    <title>ADMIN PAGE</title>
    <style type="text/css">
        #Text1
        {
            width: 303px;
            height: 28px;
            margin-top: 0px;
        }
        #Button1
        {
            width: 84px;
            margin-bottom: 4px;
            height: 27px;
        }
        #Button2
        {
            width: 100px;
            height: 35px;
        }
        #Button3
        {
            width: 100px;
            height: 35px;
        }
        .style1
        {
            font-size: xx-large;
        }
        .style2
        {
            color: #CC0000;
            word-spacing: inherit;
        }
        #Button4
        {
            width: 113px;
            height: 32px;
        }
        #Button5
        {
            width: 114px;
            height: 32px;
        }
        .newStyle1
        {
            font-style: oblique;
        }
        .style3
        {
            font-style: oblique;
            color: #FF0000;
            font-size: xx-large;
        }
    </style>
   </head>
   <body bgcolor="#E7EEE7">
    <form id="form1" runat="server">

        <div style="border-style: groove; border-width: thin;height: 77px; width:    
   999px; margin-right: 1px; margin-top: 0px">

            &nbsp;&nbsp;<span class="style1"></span> <span   
   class="style3">YouTUBE</span></span><span
                class="style2">&nbsp;  
   </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input id="Text1" type="text" /><input id="Button1" type="button"
                                                   value="Search"/>

               <input id="Button2" type="button" value="Admin"/>
            <input id="Button3" type="button" value="Logout" /></div>
    </form>
    <div style="border-style: groove; border-width: thin;width: 155px; height: 906px;    
    margin-top:0px;">
    </div>
    <div style="border-style: groove; border-width: thin;height: 908px; width: 250px;   
    margin-left: 750px; margin-top: -907px; margin-bottom: 0px; margin-right: 0px;">
    </div>
    <div style="border-style: groove; border-width: thin; width: 586px; height: 487px;  
    margin-left: 159px; margin-top: -910px; margin-right: 7px;">

        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="600"   
    height="344">

            <object type="application/x-shockwave-flash" data="player.swf" width="580"   
    height="444">

                <param name="movie" value="Justin King Lesson 2.flv" />
                <param name="wmode" value="transparent" />
                <param name="bgcolor" value="#FFFFFF" />
                <param name="quality" value="high" />
                <param name="allowFullScreen" value="true" />
                <param name="allowscriptaccess" value="always" />
                <a href="http://www.adobe.com/go/getflash">
                <img     
     src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" 
     alt="Get Adobe Flash player" />
                </a>
                <param name="flashvars" value="vdo=Justin King Lesson  
     2.flv&amp;autoplay=false" />

            </object>

        </object>
    </div>
    <p>

        <input id="Button4" type="button" value="Upload"/>
        <input id="Button5" type="button" value="Download" /></p>

    <form ENCTYPE="multipart/form-data" ACTION=
          "VT" METHOD="POST">

        <table style="margin-top:30px;margin-left:160px;">
            <tr>
                <td colspan="1"><p align="center"/></td>
                <td>
                </td>
                <td><div id='file_browse_wrapper'>
                        <input type="file" name="F1" id="file_browse"   
    onclick="validate()" /></div></td>

            </tr>
        </table>
        <table style="margin-top:-37px;margin-left:164px;">

            <div id="mybutton_wrapper">
                <tr><td><p align="right"><input TYPE="submit" VALUE="" id="mybutton"  
    style="visibility:hidden"/></p></td></tr>
            </div>

            <tr><td colspan="2"></td></tr>

        </table>

    </form>
    </body>
    </html> 
```

通过执行**VT.java** servlet 进行上传：

```
package xugglerPack;

import java.io.DataInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.math.BigInteger;
import java.security.SecureRandom;
import java.util.Random;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.awt.Image;

public class VT extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    HttpSession session = request.getSession(true);
    String user = "";

    String contentType = request.getContentType();
    if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0)) {
        DataInputStream in = new DataInputStream(request.getInputStream());
        int formDataLength = request.getContentLength();
        byte dataBytes[] = new byte[formDataLength];
        int byteRead = 0;
        int totalBytesRead = 0;
        while (totalBytesRead < formDataLength) {
            byteRead = in.read(dataBytes, totalBytesRead, formDataLength);
            totalBytesRead += byteRead;
        }
        String file = new String(dataBytes);

        String saveFile = file.substring(file.indexOf("filename=\"") + 10);
        saveFile = saveFile.substring(0, saveFile.indexOf("\n"));
        saveFile = saveFile.substring(saveFile.lastIndexOf("\\") + 1,  
        saveFile.indexOf("\""));
        int lastIndex = contentType.lastIndexOf("=");
        String boundary = contentType.substring(lastIndex + 1, contentType.length());
        int pos;
        pos = file.indexOf("filename=\"");
        pos = file.indexOf("\n", pos) + 1;
        pos = file.indexOf("\n", pos) + 1;
        pos = file.indexOf("\n", pos) + 1;
        int boundaryLocation = file.indexOf(boundary, pos) - 4;
        int startPos = ((file.substring(0, pos)).getBytes()).length;
        int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;

        String rootPath = "C:\\Users\\JD\\Documents\\NetBeansProjects\\xuggler\\web";

        session.setAttribute("myFolderpath", rootPath);
        FileOutputStream fileOut = new FileOutputStream(rootPath + "\\" + saveFile);

        fileOut.write(dataBytes, startPos, (endPos - startPos));
        fileOut.flush();
        fileOut.close();
        String myFile = rootPath.concat("\\").concat(saveFile);
        Main main=new Main();
        main.main(saveFile,myFile);

        RequestDispatcher rd = request.getRequestDispatcher("findSong.jsp");
        rd.forward(request, response);
    }

   }

   @Override
   protected void doGet(HttpServletRequest request, HttpServletResponse response)
   throws ServletException, IOException {
    processRequest(request, response);
  } 

   @Override
   protected void doPost(HttpServletRequest request, HttpServletResponse response)
   throws ServletException, IOException {
    processRequest(request, response);
  }

   @Override
   public String getServletInfo() {
   return "Short description";
    }

  } 
```

在上传过程中，使用 Xuggler 从视频中的**Main.java生成图像：**

```
 package xugglerPack;

  import java.awt.image.BufferedImage;

  import java.io.File;

  import java.io.IOException;

  import javax.imageio.ImageIO;

  import com.xuggle.mediatool.IMediaReader;

  import com.xuggle.mediatool.MediaListenerAdapter;

  import com.xuggle.mediatool.ToolFactory;

  import com.xuggle.mediatool.event.IVideoPictureEvent;

  import com.xuggle.xuggler.Global;

  import java.util.Random;

    public class Main {

public static final long SECONDS_BETWEEN_FRAMES = 50;

private static final String outputFilePrefix =  
"C:\\Users\\JD\\Documents\\NetBeansProjects\\xuggler\\web\\";
// The video stream index, used to ensure we display frames from one and
// only one video stream from the media container.
private static long mVideoStreamIndex = SECONDS_BETWEEN_FRAMES;
//public String saveFile  =  "";
// Time of last frame write
private static long mLastPtsWrite = Global.DEFAULT_PTS_PER_SECOND +  
SECONDS_BETWEEN_FRAMES;
public static final long MICRO_SECONDS_BETWEEN_FRAMES =
        (long) (Global.DEFAULT_PTS_PER_SECOND * SECONDS_BETWEEN_FRAMES);

public void main(String saveFile, String inputFilename) {

    IMediaReader mediaReader = ToolFactory.makeReader(inputFilename);

    // stipulate that we want BufferedImages created in BGR 24bit color space

    mediaReader.setBufferedImageTypeToGenerate(BufferedImage.TYPE_3BYTE_BGR);

    mediaReader.addListener(new ImageSnapListener());

    // read out the contents of the media file and

    // dispatch events to the attached listener

    while (mediaReader.readPacket() == null);

}

private static class ImageSnapListener extends MediaListenerAdapter {

    public void onVideoPicture(IVideoPictureEvent event) {

        if (event.getStreamIndex() != SECONDS_BETWEEN_FRAMES) {

            // if the selected video stream id is not yet set, go ahead an

            // select this lucky video stream

            if (mVideoStreamIndex == SECONDS_BETWEEN_FRAMES) {
                mVideoStreamIndex = event.getStreamIndex();
            } // no need to show frames from this video stream
            else {
                return;
            }

        }

        // if uninitialized, back date mLastPtsWrite to get the very first frame

        if (mLastPtsWrite == Global.DEFAULT_PTS_PER_SECOND + SECONDS_BETWEEN_FRAMES) {
            mLastPtsWrite = event.getTimeStamp() + SECONDS_BETWEEN_FRAMES;
            // String outputFilename = dumpImageToFile(event.getImage());
            dumpImageToFile(event.getImage());
        }

        // if it's time to write the next frame

        /*      if (event.getTimeStamp() - mLastPtsWrite
        >= MICRO_SECONDS_BETWEEN_FRAMES) {

        String outputFilename = dumpImageToFile(event.getImage());

        // indicate file written

        double seconds = ((double) event.getTimeStamp())
        / Global.DEFAULT_PTS_PER_SECOND;

        System.out.printf(
        "at elapsed time of %6.3f seconds wrote: %s\n",
        seconds, outputFilename);

        // update last write time

        mLastPtsWrite += MICRO_SECONDS_BETWEEN_FRAMES;

        } */

    }

    private String dumpImageToFile(BufferedImage image) {

        try {
            Random rg = new Random();
            int random = rg.nextInt(500);
            //   long randomlong = rg.nextLong();

            String outputFilepath = outputFilePrefix
                    + random + ".png";
            String outputFilename = random + ".png";
            String parts[] = outputFilename.split("\\.");
            String part1 = parts[0];
            System.out.println("the filename is splitted into two , where the name of  
     the file is " + part1);

            ImageIO.write(image, "png", new File(outputFilepath));

            DBHandler db = new DBHandler();
            db.insertpic(outputFilename, part1, "me", outputFilepath);

            return outputFilename;

        } catch (IOException e) {

            e.printStackTrace();

            return null;

        }

      }
   }
} 
```

正如我之前所说的问题是，当我运行我的应用程序时，视频会被上传并生成图像，但是下次我上传视频时，只会上传视频而不是图像。我必须重新启动 Tomcat 才能再次达到同样的效果，所以请帮忙。在此先感谢，很抱歉让这个话题变得很长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:04:06.597

尝试在 Main 类中删除`static`这两个变量的关键字：

```
private static long mVideoStreamIndex = SECONDS_BETWEEN_FRAMES;
private static long mLastPtsWrite = Global.DEFAULT_PTS_PER_SECOND + SECONDS_BETWEEN_FRAMES; 
```

如果您将它们设为静态，它们的值将在调用中保持不变，我怀疑这是否真的是您想要的。如我错了请纠正我。

# javascript - JS/HTML 或 FLASH 动作图展示器

> ID：12835170
> 
> 赞同：0
> 
> 时间：2012-10-11T08:20:36.793
> 
> 标签：javascript, html, flash, drawing, diagram

我已经花了几个小时寻找符合我要求但似乎找不到任何东西的工具。

我想要的工具（不管技术如何）应该能够绘制一个链接动作的图表。现在特别的是，动作不仅可以拆分（那么一棵普通的树就足够了），它们还可以向下合并。

示例（2 和 3 链接到 5；以及 5 和 6 链接到 7）

```
Action 1  -> Action 2  -> Action 5   -> action 7
          -> action 3
          -> action 4  -> Action 6 
```

有很多图表工具（jointJs、jGraph、jGraphUI、jsPlumb 等）可以正常工作，但问题是您需要自己指定项目的坐标。

由于数据是动态的，因此手动指定它的工作量太大。你知道拥有我需要的功能的简单工具（无需编辑图表，只需显示它）吗？（只要它可以在 web 上下文中运行就可以了，所以 JS、flash、canvas 都是候选者）

谢谢， Pj

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:20:09.020

您提到的 JGraph 确实具有自动布局功能，mxGraph、[github.com](http://github.com/jgraph/mxgraph) /jgraph/mxgraph和 JavaScript 版本也是如此（并且可免费用于非商业用途）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:32:04.380

如果这是在商业场景中，[yFiles for HTML](http://www.yworks.com/yfileshtml)似乎很适合您的要求：

它是一个纯 Javascript 图表解决方案，不需要活动的服务器组件或插件。它可以轻松处理一般图形，并具有非常复杂的自动布局算法。

网站上有一个现场演示，您可以在其中尝试您的确切场景：使用支持 HTML5 的浏览器并将其指向：

[InteractiveGraphSource 演示](http://live.yworks.com/yfiles-for-html/demos/DataBinding/demo.yfiles.binding.interactivegraphsource/index.html)，

等待它加载，然后切换到顶部组合框中的示例 4，并将以下值填写到右侧的文本框中：

节点来源：

```
{
1:'Action 1', 
2:'Action 2', 
3:'Action 3',
4:'Action 4', 
5:'Action 5', 
6:'Action 6',
7:'Action 7'
} 
```

边缘来源：

```
[
{from:1, to:2}, 
{from:2, to:5}, 
{from:3, to:5}, 
{from:6, to:7}, 
{from:5, to:7}, 
{from:1, to:3}, 
{from:4, to:6}, 
] 
```

源节点绑定：

```
from 
```

目标节点绑定：

```
to 
```

使 Node Id Binding 和 Edge Label Binding 为空

并像这样稍微修改模板：

```
<rect fill='AliceBlue' stroke='LightBlue' stroke-width='2' width='{TemplateBinding width}' height='{TemplateBinding height}'></rect><text transform='translate(10 20)' data-content='{Binding}' style='font-size:18px; font-family:Arial; fill:#000; text-anchor: left; dominant-baseline: central;'></text> 
```

完成后，按左上角的“应用图表源”按钮，观察您的图表动画并显示在中央画布中。然后，您可以通过鼠标平移、鼠标滚轮缩放和单击节点来选择节点或使用键盘导航在节点之间切换来导航图形。

这只是库的演示，但演示已经非常强大。您还可以评估该库并针对庞大的 API 进行“真正的编程”。

披露：我为 yWorks 工作，但我在这里不代表我的雇主。

# node.js - Socket.IO 故障检测

> ID：12835171
> 
> 赞同：1
> 
> 时间：2012-10-11T08:20:38.447
> 
> 标签：node.js, socket.io

如果 node.js 服务器和客户端之间的链接断开，并且断开连接事件尚未由超时触发，有没有办法检测客户端发出的特定事件是否无法传递到Socket.IO 的服务器端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:06:58.197

我对此进行了更深入的研究，因为我不是 socket.io 或 node.js 方面的专家。

1.  哪种类型的插座？

sockets.io 根据浏览器的功能抽象出它使用哪种方法连接到服务器。默认使用 WebSockets (HTML5)。

但是，服务器端的 sockets.io 连接到 node.js 的网络服务器，因此它将始终使用 TCP，因为这是 HTTP 运行的内容。因此，无论客户端使用哪种方法，它都将始终在下面使用 TCP。因此，您无需担心 UDP 套接字。

1.  socket.io 是否发出错误？

TCP 理论上会检查每个数据包是否到达，因此 TCP 应该将连接错误冒泡到 socket.io 库。因此，您可以尝试以下方法：

```
<script>
  var socket = io.connect('http://localhost/');

  socket.on('error', function (message) { 
    alert( 'error in transport: ' + message );
  }); 
```

顺便说一句，我自己没有尝试过，但我阅读了 socket.io.js 的代码（你应该通过浏览器找到它，因为它是由 socket.io 根据传输配置动态创建的，在我看来）查看使用 publish() 发出了哪些事件。错误还应该触发断开连接，重新连接序列，但是“关闭”直到它完全关闭（在我看来）才会触发，这可能需要一些时间。但看起来`error`应该立即开火。

1.  否则我有两个想法
    ：使用 node.js socket.setTimeOut 设置更短的超时，看看会发生什么，b。或尝试通过某种方式强制套接字上的错误，即在读取循环中的读取之间（因为您可能正在使用非阻塞套接字，您必须这样做），尝试写入套接字。

# jquery - Jquery - 水平移动 div 的 backroundPosition 的滚动条

> ID：12835175
> 
> 赞同：2
> 
> 时间：2012-10-11T08:20:44.463
> 
> 标签：jquery

我正在尝试解决如何让我的**身体滚动条**将特定 div的**backgroundPosition -** **#simpleBG** - 在向下滚动时向右移动，在向上滚动时向左移动。

> jQuery（文档）.ready（函数（$）{
> 
> ```
>  $('#simpleBG').scroll(function(event, direction) {
>      if (direction === 'down') {
>         $('#simpleBG').animate({backgroundPosition: '-=20px 0px'})
>      }
>      else {
>         $('#simpleBG').animate({backgroundPosition: '0px 0px'})
>      }        }); 
> ```
> 
> });

我有 backroundpos.js 允许背景动画。只是不确定我是否在这里使用了正确的逻辑和语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:30:57.320

尝试：

```
 var $simpleBG = $("#simpleBG"),
       $root = $(".wrapper");

   $root.on("scroll", (function(e,d) {
       if(d=='down'){
          $simpleBG.animate{backgroundPosition: '-=20px 0px'})
       }
       else {
          $simpleBG.animate({backgroundPosition: '0px 0px'})
       }        
   }); 
```

其中 .wrapper 是外部元素上的一个类。

虽然不太确定滚动元素上的方向，但该方向的另一种解决方案可能是：

```
var tempScrollTop, currentScrollTop = 0;

   $("#div").scroll(function(){

   currentScrollTop = $("#div").scrollTop();

   if (tempScrollTop < currentScrollTop )
   //scrolling down
   else if (tempScrollTop > currentScrollTop )
   //scrolling up

tempScrollTop = currentScrollTop;
} 
```

# python - Python 的 __new__ 有哪些用例？

> ID：12835176
> 
> 赞同：11
> 
> 时间：2012-10-11T08:20:45.397
> 
> 标签：python

我了解`__new__`它的作用（以及它与 的区别`__init__`）所以我对定义不感兴趣，我对何时以及如何使用`__new__`.

文档说：

> 通常，`__new__`除非您将不可变类型（如`str`,或`int``unicode``tuple`

但是我想不出要使用的其他情况`__new__`或如何正确使用它（例如，当子类化不可变类型或在这种情况下为什么需要它时）。

那么，何时、为什么以及如何使用`__new__`？

**我对用例感兴趣，而不是它的作用（我知道它的作用）。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T08:47:02.247

为自己回答，我用它来

*   创建一个单例模式（尽管有一些[方法](https://stackoverflow.com/a/12305625/566644)可以不使用`__new__`）
*   [从外部模块动态扩展类](https://stackoverflow.com/a/4714744/566644)而不实际编辑源代码
*   自定义元类中的类（尽管`__call__`我认为也可以使用）
*   扩展`datetime.datetime`类（它是不可变的）以在没有参数的情况下返回当前时间，如果`strptime`使用单个字符串参数调用则返回调用参数的结果

如果您`__new__`想更改用于构造不可变类型的参数，就像我在`datetime`示例中想要的那样，或者如果您根本不想调用父`__new__`级但返回一个以另一种方式甚至是完全不同的类型。当您进入时，`__init__`以任何方式更改对象都为时已晚，因此您需要在`__new__`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:46:25.587

一个潜在的用例可能是一个“工厂类”，它根据实现返回各种类的实例。

# oracle - Oracle：合并两行

> ID：12835177
> 
> 赞同：0
> 
> 时间：2012-10-11T08:20:48.303
> 
> 标签：oracle, oracle8i

我的表中有一对相关的行。

如何合并这些行：

```
date                         col1 col2
2012-09-11 13:28:21.0000000  A    50
2012-09-11 13:28:21.0000000  A    -50 
```

到一排

```
date                         col1 col2 col3
2012-09-11 13:28:21.0000000  A    50   -50 
```

如果两个日期之间可能存在微小差异（大约一秒钟，并且仅出现在 100 对中的 1 对中）？例如：

```
2012-09-11 13:28:21.0000000
2012-09-11 13:28:22.0000000 
```

或者在更糟糕的情况下，一秒钟改变一分钟：

```
2012-09-11 13:28:59.0000000
2012-09-11 13:29:00.0000000 
```

**更新（字符串列）：**

如何将相同的行与带有字符串值的附加 col3 合并？

```
date                         col1 col2 col4
2012-09-11 13:28:21.0000000  A    50   abc
2012-09-11 13:28:21.0000000  A    -50  def 
```

到：

```
date                         col1 col2 col3 col5 col6
2012-09-11 13:28:21.0000000  A    50   -50  abc  def 
```

或者：

```
date                         col1 col2 col3 col5
2012-09-11 13:28:21.0000000  A    50   -50  abc,def 
```

**解决方案（字符串）**（hkutluays答案的扩展）：

```
max(case when col2 > 0 then col4 end) col5
max(case when col2 < 0 then col4 end) col6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:35:15.977

未经测试，但可以解决问题。

```
select 
round(sysdate,'MI'),col1, sum( case when col2> 0 then col2 else 0 end ) col2,
sum( case when col2 < 0 then col2 else 0 end ) col3
from table
group by round(sysdate,'MI'),col1 
```

# visual-studio-2010 - 如何在没有封闭测试用例的情况下将需求添加到测试计划

> ID：12835181
> 
> 赞同：1
> 
> 时间：2012-10-11T08:20:59.640
> 
> 标签：visual-studio-2010, testing, microsoft-test-manager

每次我向测试计划中添加新的需求套件时，也会添加所有已关闭的测试用例。

如何将它们排除在测试计划之外？如果我从计划中手动删除它们，那么它们与用户故事的链接也会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:57:55.167

似乎没有办法从需求套件中排除封闭的测试用例。唯一的做法是从相关的用户故事中删除这些测试用例。

我添加了用户语音：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3359348-exclude-closed-test-cases-from-requirement-suites-](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3359348-exclude-closed-test-cases-from-requirement-suites-)

# java - 在 Java 中添加到新的 JTable 时，JTable 中的 TableColumns 会被链接？

> ID：12835191
> 
> 赞同：0
> 
> 时间：2012-10-11T08:21:35.560
> 
> 标签：java, swing, jtable, tablecolumn

我有几个 JTable，每个都有几列。每个表都显示在 JTabbed 窗格中的不同选项卡上。这些列在表中具有相同的标题名称，但列中的值不同。我试图通过右键单击标题并点击比较来允许在所有表中比较标题。这将打开一个新的 JDialog，同时传递一个具有所选匹配标题的列列表：

```
public void actionPerformed(ActionEvent arg0) {
                List<TableColumn> columns = new ArrayList<TableColumn>();

                for (int i = 0; i < tables.size(); i++) {

                    String tableName = tabPane.getTitleAt(i);
                    JTable tempTable = (JTable) tables.get(tableName);

                    // Get column at the channel name used
                    TableColumn col = tempTable.getColumn("chosen header");

                    // Add the column to the list of channel columns
                    columns.add(col);
                }

                new comparisonDialog(UI.getFrame(), "chosen header",
                        columns);
            } 
```

这似乎工作正常，将表的所有公共列存储到传递给新 JDialog 的列表中。当我在新的 JDialog 中显示包含这些列的表格时，它似乎也可以工作：

```
JTable table = new JTable();

for (TableColumn col : passedColumnList) {
            col.setHeaderValue(col.getHeaderValue());
            table.addColumn(col);
        } 
```

但是会显示正确的列：

*   列中的所有数据都丢失了
*   这些列似乎链接到它们来自的表，因为调整一个大小会调整它来自​​的表中的列的大小！

我在这里错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:53:18.820

首先，表中的数据由表模型控制，而不是由列模型控制。

其次， a`TableColumn`有自己的模型（包装在 a 中`TableColumnModel`），对对象的更改将反映在所有注册以监视它的模型（以及依赖于它们的视图）中。

您将需要创建一个新的表模型，其中包含每列的数据行，映射到相应的列。

您应该允许您的表模型定义列信息，而不是从基础表中“提取”列引用。

# objective-c - 关于使用 tableviews 导航的一些建议

> ID：12835195
> 
> 赞同：0
> 
> 时间：2012-10-11T08:21:41.590
> 
> 标签：objective-c, ios, xcode, cocoa-touch, tableview

好的，所以背景信息是我正在尝试生成一个 Web 树样式的选项菜单，以在当前应用程序中使用。每个项目都有一个代码和一个父代码。（例如父代码：汽车/代码：福特，父代码：福特/代码：蒙迪欧等。我将数据存储在核心数据中，我目前拥有它，因此它为第一个选项（汽车）执行 NSFetch )，然后使用该选项（福特）中的代码来查找下一个级别，但这并没有像 Apple 的 tableview 菜单那样以 SO 闻名的侧滑...

我不确定是否尝试以某种方式将数据提取到数组数组中，然后菜单应该正确滚动，或者有一个第二个视图，它将在后台加载下一个选项，然后在 didSelectRowAtIndexPath 上交换视图控制器......

如果您也可以向我指出有关这些的任何示例代码/教程/信息，那就太好了。我用谷歌搜索/检查了苹果文档和“使用表格视图导航数据层次结构”苹果开发使用故事板，而这个应用程序没有。我能找到的关于将核心数据提取到数组数组的唯一信息是在这里，并且与我不需要的 CSV 文件有关。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:10:30.527

选择在 UIScrollView 中使用 2 个视图，禁用用户滚动选项并滚动（然后在没有动画的情况下交换视图）以创建无限的滚动限制 =]

# jquery - 输出html到 使用 jQuery

> ID：12835196
> 
> 赞同：-4
> 
> 时间：2012-10-11T08:21:45.320
> 
> 标签：jquery, css, html

我有一个下拉菜单，我想显示按钮链接的 html 内容到 a`<DIV>`
有谁知道该怎么做？
你有我可以参考的示例页面吗？
提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:30:36.340

好吧，只需阅读您的代码（无代码），您就可以设置 DOM 元素的 html：

```
$("DIV").html("HERE");
$("DIV").append("HERE");
something.appendTo("DIV"); 
```

要从元素中获取特定内容，您可以使用：`$("DIV").attr("attribute of the element");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:30:20.343

在 Google 搜索[jquery 时，将 html 添加到 div](https://www.google.be/search?q=jquery+add+html+to+div&aq=f&sugexp=chrome,mod=4&sourceid=chrome&ie=UTF-8)这些是前两个链接：

*   [append](http://api.jquery.com/append/)：将参数指定的内容插入到匹配元素集中每个元素的末尾。
*   [html](http://api.jquery.com/html/)：获取匹配元素集中第一个元素的 HTML 内容。

第四个链接是重复的：[使用 jQuery 将 html 添加到 div 中，](https://stackoverflow.com/q/2774091/540352)其中有`append()`.

首先谷歌搜索您的问题不仅可以节省我们的时间，而且您实际上可以更快地获得答案。如果谷歌出现枯竭或您需要更多信息，那么您来这里，这里的许多用户将很乐意为您提供帮助。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:31:53.767

我希望这对你有帮助

```
 <div class="dropdown">
<a class="account" >My Account</a>
<div class="submenu">
<ul class="root">
<li ><a href="#Dashboard" >Dashboard</a></li>
<li ><a href="#Profile" >Profile</a></li>
<li ><a href="#settings">Settings</a></li>
<li ><a href="#feedback">Send Feedback</a></li>
</ul>
</div>

</div> 
```

Domo 页面：[fiddle](http://jsfiddle.net/sselvamani22/z2cyk/)

示例页面：[网站](http://www.9lessons.info/2012/06/simple-drop-down-menu-with-jquery-and.html)

# java - 组件的定位（如何将几个按钮放置在相同大小的屏幕中心）

> ID：12835198
> 
> 赞同：1
> 
> 时间：2012-10-11T08:21:48.173
> 
> 标签：java, swing, components

将组件准确放置在 JFrame 上所需位置的可靠推荐方法？

就我而言，我有一个简单的 Jframe 作为菜单。该框架由顶部的标签和中间的三个按钮组成。使用自由设计，3 个按钮似乎漂浮在框架上，当我运行项目时，它们变成难看的位置。只有当 3 个按钮被拖到最大长度（到框架的每一侧）时，它们才会表现为“锁定到位”。这非常难看..我希望框架中间的 3 个按钮在一起。

我正在使用 Netbeans。自由设计是我一直在使用的，但只有当有很多组件时才有用，这样它们就可以“卡入”到彼此的位置。使用其他设置布局管理器尚未奏效。有经验的人会如何处理这样的问题？

我对彻底的学习很感兴趣。如果这个问题非常业余，至少有人可以推荐一本教科书或其他 GUI 学习资源吗？（我已经两次讨论过“对象首先使用 java”，他们只对那里的 GUI 构建进行了非常基本的解释）。

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T10:07:41.393

事情很简单，但是当然，您应该自己搜索更多。

顺便说一句，您在管理按钮的布局和大小方面存在问题。

请忘记使用任何布局创建器，因为它们会生成令人困惑的代码，而且很难理解到底发生了什么。

通常对于初学者我会讲一个特定的布局，即 BoxLayout [编辑：当然有很多更简单的方法可以达到目标，这个答案有教学目的并且希望足够大以便理解，而不仅仅是成为一个“这里，做这个复制粘贴]

首先我们需要知道 Box 布局是如何工作的。它有两种轴（即添加组件的方式），从上到下 (PAGE_AXIS) 和从左到右 (LINE_AXIS)。使用这两个轴并嵌套各种布局，您可以随心所欲。

首先要知道如何嵌套更多布局。

为了嵌套布局，我们将使用 JPanel，每个都有一个不同的轴，这些轴将被放入另一个轴中。

开始分析你的案例。您在面板中心的三个按钮上有一个标签。我们可以从内部面板开始，即带有组件的面板；我们需要一个 PAGE_AXIS（从上到下），其中包括：

```
// +---------------------+
// |     white space     |
// |                     |
// + - - - - - - - - - - +
// |JLABEL JLABEL  JLABEL|
// + - - - - - - - - - - +
// |     white space     |
// |_____________________|
// |       button        |
// |---------------------|
// |_____________________|
// |       button        |
// |---------------------|
// |_____________________|
// |       button        |
// |---------------------|
// |     white space     |
// +---------------------+ 
```

如您所见，面板适合匹配组件的宽度，诀窍是 BoxLayout 更愿意为组件提供最大尺寸。在这种情况下没有边距，所以我们需要一个外部不同的JPanel，带有LINE_AXIS，以便放置左右边距，结果将是这样的：

```
// +---+---------------------+---+
// |   |     white space     |   |
// |   |                     |   |
// |   + - - - - - - - - - - +   |
// | W |JLABEL JLABEL  JLABEL| W |
// | H + - - - - - - - - - - + H |
// | I |     white space     | I |
// | T  _____________________  T |
// | E |       button        | E |   
// |    ---------------------    |
// | S  _____________________  S |
// | P |       button        | P |   
// | A  ---------------------  A |
// | C  _____________________  C |
// | E |       button        | E |   
// |    ---------------------    |
// |   |     white space     |   |
// +-----------------------------+ 
```

所以，我们需要知道的第一件事是热设置每个面板的布局。

```
// Initializing
JPanel outside = new JPanel();
JPanel inside = new JPanel();

// setting a layout with horizontal alignment
outside.setLayout(new BoxLayout(outside, BoxLayout.LINE_AXIS));
// setting a layout with vertical alignment
inside.setLayout(new BoxLayout(inside, BoxLayout.PAGE_AXIS)); 
```

完成此操作后，我们必须填充面板。从外面开始。局外人需要（看着我的形象）首先是一个水平空间，然后是内部面板，然后是另一个水平空间。我继续添加它们。

```
// create an horizontal space of 20px
outside.add(Box.createHorizontalStrut(20));
outside.add(inside);
outside.add(Box.createHorizontalStrut(20)); 
```

现在我们移动到里面，我们需要一个大的空白，标签，另一个白色，一个按钮，一个小白，按钮，小白，第三个按钮和一个大白。我继续用这个填充内部面板。

```
// create a vertical space of 20px
inside.add(Box.createVerticalStrut(20));

JLabel title = new JLabel("THE TITLE");
inside.add(title);

inside.add(Box.createVerticalStrut(20);

JButton btt1 = new JButton("BUTTON ONE");
// create a new dimension object
Dimension d = new Dimension(200,40);
// set the four kind of size, the button CANNOT be different than the dimension I choose
btt1.setSize(d);
btt1.setMinimumSize(d);
btt1.setMaximumSize(d);
btt1.setPreferredSize(d);
JButton btt2 = new JButton("BUTTON TWO");
btt2.setSize(d);
btt2.setMinimumSize(d);
btt2.setMaximumSize(d);
btt2.setPreferredSize(d);
JButton btt3 = new JButton("BUTTON THREE");
btt3.setSize(d);
btt3.setMinimumSize(d);
btt3.setMaximumSize(d);
btt3.setPreferredSize(d);

// Now that the button are ready we put them in the panel.
inside.add(btt1);
inside.add(Box.createVerticalStrut(5));
inside.add(btt2);
inside.add(box.createVerticalStrut(5));
inside.add(btt3);

// Last white space, the bottom margin:
inside.add(Box.createVerticalStrut(20)); 
```

现在我已经完美地建立了我的结构。只要让它可见，一切就完成了。当然你需要把它放在 JFrame 或 JDialog 中，当然第一个面板可以是 JFrame 或 JDialog，因为可以为任何组件设置 BoxLayout。

通过这个基础教程，我希望您了解编程这种结构的基础知识。但是您需要阅读此内容才能继续并使事情变得更复杂： http: [//docs.oracle.com/javase/tutorial/uiswing/layout/index.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) http://docs.oracle.com/javase /tutorial/uiswing/layout/box.html

祝你今天过得愉快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T10:25:25.867

布局非常强大，而且非常节省时间……我来自 Delphi 和 VB 等其他语言，我可以告诉您 Swing 的最佳特性之一是布局管理器。

![在此处输入图像描述](../Images/6885f11af2a5d2595856ebc3c53a60fc.png)

```
public class TestLayout06 {

    public static void main(String[] args) {
        new TestLayout06();
    }

    public TestLayout06() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MenuPanel());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }            
        });
    }

    protected class MenuPanel extends JPanel {

        public MenuPanel() {            
            JLabel label = new JLabel("Menu");
            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(label, gbc);

            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.gridy++;
            add(new JButton("Option 1"), gbc);
            gbc.gridy++;
            add(new JButton("Option 2"), gbc);
            gbc.gridy++;
            add(new JButton("Option 3"), gbc);
        }
    }
} 
```

看一眼

*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# iphone - 如果我正在设计一个 iphone 应用程序，我应该使用固定定位吗？

> ID：12835201
> 
> 赞同：0
> 
> 时间：2012-10-11T08:22:03.737
> 
> 标签：iphone, html, css, jquery-mobile

我正在尝试设计一个 iphone 应用程序，并且计划使用 PhoneGap。我正在考虑在窗口底部添加的菜单栏。我应该修复定位还是应该使用绝对或相对或什么？谢谢 0_0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:56:28.787

使用`position: fixed;`and`bottom: 0;`这样，元素将始终位于屏幕底部，与您查看网页的设备无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:30:37.927

**不要修复它...**

因为如果您修复它，您将失去 Iphone 5 和其他设备之间的最佳匹配视图。

选择从底部起 10% 的方式。

因此，这样您就可以最适合所有设备。

# testing - 詹金斯如何进行后期构建以使用先前构建的工作区

> ID：12835205
> 
> 赞同：1
> 
> 时间：2012-10-11T08:22:30.740
> 
> 标签：testing, build, jenkins

我有两个构建工作。第一个清理和构建项目（从 SVN 轮询），并触发测试构建作为构建后操作。我不想让测试版本再次轮询来自 SVN 的内容，那么我如何让测试工作使用先前版本中的二进制版本来测试项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:37:51.900

您可以使用[Copy Artifact Plugin 将](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)工件从一个作业复制到另一个作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:23:28.977

您可以将构建的结果（工件）保留在 Jenkins 的区域之外——
这将允许您从任何工作，甚至从其他系统访问它们。

# sql - 如何通过mssql存储过程读取远程（网络）机器中xml文件的内容

> ID：12835206
> 
> 赞同：1
> 
> 时间：2012-10-11T08:22:34.840
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2008-r2, bulkinsert

我尝试使用批量插入读取本地机器中单个 xml 文件的内容。

```
SELECT * FROM OPENROWSET ( BULK '''+ @FILENAME+''' , SINGLE_CLOB ) AS xmlData 
```

它正在工作，但我正试图从远程机器上读取数据。它给出以下错误

```
Msg 4861, Level 16, State 1, Line 1
Cannot bulk load because the file "Z:\TechnicalLoss_EnergyAccounting_10.10.2012.12.19.PM.XML" could not be opened. Operating system error code 3(The system cannot find the path specified.). 
```

我给文件路径为

```
\\172.16.11.52\D:\TechnicalLoss_EnergyAccounting_10.10.2012.12.19.PM.XML 
```

然后它给出了同样的错误，我为那个远程机器创建了网络共享驱动器，即（z:)给定文件路径为

```
Z:\TechnicalLoss_EnergyAccounting_10.10.2012.12.19.PM.XML 
```

同样的错误:-(帮我解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:31:05.647

这里的问题似乎是关于文件共享，而不是关于 SQL Server。

首先，驱动器映射是针对每个用户的，因此在使用 SQL Server 时使用驱动器号会导致问题，因为 SQL Server 服务帐户没有映射任何驱动器号。出于这个原因，最好完全避免驱动器号并简单地使用 UNC 路径。

接下来，股份的形式是`\\ServerName\Share`。看起来您尝试访问的文件位于 D: 驱动器的根目录中，因此正确的路径是`\\172.16.11.52\D$\TechnicalLoss_EnergyAccounting_10.10.2012.12.19.PM.XML`. 但是，请注意，这`D$`是[默认的管理员共享](http://en.wikipedia.org/wiki/Administrative_share)，只有管理员可以使用它。由于 SQL Server 服务帐户希望没有管理员权限，因此您无论如何都不应该使用它，并且将文件存储在任何驱动器的根目录（尤其是`C:`）通常是一种不好的做法。

最后，即使您有一个共享，您用来访问该共享的帐户也需要同时拥有该共享和文件系统的权限。这是[使用域帐户运行 SQL Server 的](http://msdn.microsoft.com/en-us/library/ms143504.aspx)好处之一。

总之，您可能需要做的是：

1.  如果还没有，请使用域帐户运行 SQL Server（请参阅上面的链接）
2.  为您的文件创建一个文件夹，调用它`D:\XMLFiles`（或任何您喜欢的名称）
3.  共享文件夹，所以现在您有一个名为`\\172.16.11.52\XMLFiles`
4.  确保 SQL Server 服务帐户具有从共享读取的权限
5.  再次尝试您的代码：

`SELECT * FROM OPENROWSET ( BULK '\\172.16.11.52\XMLFiles\TechnicalLoss_EnergyAccounting_10.10.2012.12.19.PM.XML' , SINGLE_CLOB ) AS xmlData`

# grails - 我在用 在 grails 中按代码搜索付款

> ID：12835213
> 
> 赞同：1
> 
> 时间：2012-10-11T08:23:23.317
> 
> 标签：grails

```
<label><b>Code</b></label>
<g:remoteField name="code" action="paymentsSearch" update="content" paramName="code" />
</span> 
```

这是我使用的代码。

输入每个字母后，它正在调用支付搜索操作。

但我想在字段中输入整个值然后按回车键或单击字段外部后调用支付搜索操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:50:43.617

有问题的标签专门用于发送

> 当它改变时它对远程链接的值

见： http: [//grails.org/doc/latest/ref/Tags/remoteField.html](http://grails.org/doc/latest/ref/Tags/remoteField.html)

我会使用 formRemote 标记 (http://grails.org/doc/latest/ref/Tags/formRemote.html) 并在您单击字段或提交按钮时使用一些 JQuery 来触发提交响应回车键的按下。

# c# - 检测哪个控件处于活动状态

> ID：12835216
> 
> 赞同：1
> 
> 时间：2012-10-11T08:23:29.303
> 
> 标签：c#, .net, textbox, listbox, focus

我有一个带有文本框和列表框的设置，我希望列表框仅在文本框或列表框被聚焦时才可见。首先列表框将是不可见的。然后，当文本框聚焦时，列表框应该是可见的。只有当其中一个失去焦点并且都没有接收到它时，列表框才会再次变得不可见。所以我想要实现的是以下始终是真实的：

`listBox.Visible = textBox.Focused || listBox.Focused`

在我的解决方案中，文本框和/或列表框可以是标准类型的特化（如果这简化了解决方案）。

我试过听两个控件 LostFocus 和 GotFocus 事件并在那里设置列表框的可见性。但是，从不在列表框上调用 GotFocus 事件，因为当文本框失去焦点时我将其变为不可见。

有没有人对如何实现这一目标提出建议？我的备用计划（我不喜欢）是当一个人失去焦点时启动计时器，如果另一个人获得焦点则停止。因此，将不胜感激一种“更清洁”的实现方式；）

**编辑：**我正在开发它以用作 .NET WinForms 自定义控件。

**编辑2：**

**看来我对自己的解释还不够好。因此，我将尝试更明确地解释我想要实现的目标。**

我正在创建一种新类型的 TextBox（继承我几年前构建的现有类型的 TextBox）。TextBox 当前用作对象的通用集合（包括实现 IList 的子类型）。TextBox 定义了一个 ListBox，它根据一组标准显示集合中元素的子集。由于 TextBox 被添加到父控件中，因此 ListBox 也是如此。因此，这两者作为一种在集合中搜索元素的设置工作。有点像你的浏览器在你开始输入时提出建议。

我正在使用此设置而不是包含两个控件的 UserControl，因为后者会导致 usercontrol 成为两个控件的大小，或者（当大小与 TextBox 匹配时）ListBox 不可见。

我意识到我可以选择在添加此控件的表单中的所有控件上处理 GotFocus 或 Enter 事件。这是我想到的一种非常简单的方法，但我更喜欢编写一个不监听表单中每个其他控件的控件。

我希望这可以澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:36:02.693

您可以做的是将`Enter`事件处理程序添加到表单上的*所有其他*控件。

```
private void OtherControls_Enter(object sender, EventArgs e)
{
  listBox.Visible = false;
} 
```

**编辑：**
*示例适用于 WinForms，但也适用于 WPF。*

如果自定义控件仅包含`TextBox`，`ListBox`然后您将事件添加到`TextBox`以设置`ListBox`可见：

```
private void textBox1_Enter(object sender, EventArgs e)
{
  listBox1.Visible = true;
} 
```

如果还有其他控件，则将`OtherControls_Enter`事件处理程序添加到它们。

在`Leave`自定义控件的事件中，您添加如下内容：

```
private void userControl11_Leave(object sender, EventArgs e)
{
  userControl11.Controls["listbox1"].Visible = false;
} 
```

**编辑 2：**
更好的是`ListBox`在自定义控件中公开 from：

```
public ListBox TheListBox { get { return listBox1; } } 
```

接着：

```
private void userControl11_Leave(object sender, EventArgs e)
{
  userControl11.TheListBox.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:58:27.900

将所有控件 Control_Enter 事件实现为集中式并检查发件人对象是您的文本框还是列表框，然后列表框将可见，否则不可见。

像这样

```
this.button1.Enter += new System.EventHandler(this.Control_Enter);
   this.textBox1.Enter += new System.EventHandler(this.Control_Enter);
   this.listBox1.Enter += new System.EventHandler(this.Control_Enter);

private void Control_Enter(object sender, EventArgs e)
    {
        Control obj = (Control)sender;
        if (obj.Name == "textBox1" || obj.Name == "listBox1")
        {
            listBox1.Visible = true;
        }
        else
        {
            listBox1.Visible = false;
        }
    } 
```

不要忘记分配控制选项卡索引

# c# - 如何捕获事件日志清除尝试？

> ID：12835218
> 
> 赞同：0
> 
> 时间：2012-10-11T08:23:31.927
> 
> 标签：c#, event-log

是否有可能以某种方式捕获清理事件日志的尝试？这样我就可以取消该尝试或进行存档，然后才允许清除日志。或者，如果无法捕获此类事件，也许还有其他方法可以强制用户仅通过归档进行清除？（使用 .Net 3.5，Windows 7）

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T08:50:24.123

您可以控制对事件日志的访问。有许多访问级别。您可以使用[EventLogPermission](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogpermission.aspx)类。您可以使用指定访问级别

`public enum EventLogPermissionAccess { Write };`

# c# - 似乎无法使用 TFS API，如何从 SDK 中正确导入项目？

> ID：12835228
> 
> 赞同：2
> 
> 时间：2012-10-11T08:24:17.063
> 
> 标签：c#, .net, visual-studio-2010, tfs, tfs-sdk

我正在尝试编写一些简单的代码来连接到 a `TfsTeamProjectCollection`，但是，我继续收到消息：

> “找不到类型或命名空间名称'WorkItemStore'/'WorkItemCollection'/'TfsTeamProjectCollection'/'Project'。”

我试图找到 TFS SDK 以及如何安装它，但我似乎无法弄清楚 - 我似乎是盲目的，因为这在某处肯定有很好的记录。我相信我需要安装其中一些[项目](http://archive.msdn.microsoft.com/TfsSdk/Release/ProjectReleases.aspx?ReleaseId=4188)，然后将它们添加为我的项目的引用？这可能是正确的吗？我需要哪些物品？

非常感谢，为这个愚蠢的问题道歉——我最近放弃了咖啡！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:49:01.150

尝试引用 Microsoft.TeamFoundation.Client.dll

它与团队资源管理器一起安装。

# delphi - ClientDataSet 仅从 TADOQuery 传输部分数据

> ID：12835232
> 
> 赞同：0
> 
> 时间：2012-10-11T08:24:21.730
> 
> 标签：delphi, delphi-2006, tclientdataset, tadoquery, tdatasetprovider

我有两个数据库，我需要确保一个数据库中的所有记录在另一个数据库中都有匹配的记录。我将这些称为 DB-SQL 和 DB-Legacy

如果两者都有 SQL 接口，这将很容易，但不幸的是，我只有这种类型的访问权限，另一个我有一个“查找记录/第一个/下一个”类型的接口。

我选择执行此任务的方法是通过以下代码将 DB-SQL 传输到客户端数据集：

```
 var
    lQuery: TADOQuery;
    lProvider: TDataSetProvider;
    lDataSet: TClientDataSet;
  begin
    lQuery := TADOQuery.Create(nil);
    lProvider := TDataSetProvider.Create(nil);
    lDataSet := TClientDataSet.Create(nil);
    // we don't need either of these and should speed things up
    lDataSet.disablecontrols;
    lQuery.DisableControls;
    try
      lQuery.Connection := aConnection;
      lQuery.SQL.Add('SELECT FieldA, FieldB, FieldC, 0 as FoundInGIS');
      lQuery.SQL.Add('FROM TableA');
      // following two lines needed to allow us to modify the FoundInGIS field in the clientdataset
      lQuery.open;
      lquery.fieldbyname('FoundInGIS').Readonly := false;
      lProvider.DataSet := lQuery;
      lDataSet.Data := lProvider.Data;
      lDataSet.fieldbyname('FoundInGIS').readonly := false;
      lDataSet.LogChanges := false;
      // index by FieldA for quick searching by FindKey later
      lDataSet.IndexFieldNames := 'FieldA';
    finally
      lQuery.Free;
      lProvider.Free;
    end; 
```

这是基于[http://www.podgoretsky.com/ftp/docs/Delphi/D5/dg/5_ds3.html#20536的代码](http://www.podgoretsky.com/ftp/docs/Delphi/D5/dg/5_ds3.html#20536)

然后，这将允许我使用 First/Next 直到 EOF 迭代 DB-legacy，使用 FindKey 搜索 ClientDataSet 以确保 DB-Legacy 中的所有记录都存在于 DB-SQL 中。通过将 FoundInGIS 标记设置为 1，我可以按此值进行筛选，以查找 DB-SQL 中但 DB-Legacy 中没有的所有记录。

我的问题是我们的一个数据库比其他数据库大得多，有 3,310,510 条记录。lQuery 的记录数是正确的，但是在过程结束时 lDataSet 只有大约 2,500,000 条。

现在，我想使用 cds 来使用 FindKey 方法，TADOQuery 不支持该方法，但是如果它忽略了 1/3 的记录，它就没有多大用处了！我猜测 DataSetProvider 或 ClientDataSet 中的某处可能存在整数溢出，尽管如果是这样它不会引发异常，这有点顽皮！有没有其他人遇到过这种问题，有没有办法对其进行排序（也许通过以较小的块下载数据或使用另一种填充 CDS 的方式）？

在这种情况下，SQL-DB 是 Oracle，但代码也需要与 SQL-Server 一起使用，尽管我怀疑这是一个数据库问题。

编辑：我现在的行为略有不同。当我尝试从查询中删除一些字段时，它运行良好。所有字段都可以单独运行，但它无法处理所有字段（这支持我的溢出假设）。我现在是，但是偶尔会出现异常。例外是

```
'Format '%s' invalid or incompatible with argument' 
```

这是一种误导，因为深入研究 Debug DCU 表明错误是由

```
SafeArrayCheck(SafeArrayCopy(VarToDataPacket(Value), FSavedPacket)); 
```

在 TCustomClientDataSet.SetData （DBClient 行 1482）。这会引发 ESafeArrayError (AResult = -2147024882)，它会变成“意外的变体或安全数组错误”，但它无法处理对 FormatStr 的后续调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:18:30.440

好的 - 在使用了降低的字段数量之后，我确信 TClientDataSet 无法将所有记录插入一个块中（2 个字段插入了所有记录，除了一个之外，所有记录都插入了大约 2,900,000 并且所有这些都插入了 c2,500,000）。调用 SetProvider 和使用 lDataSet.open 时会遇到相同的结果。

我已经说服自己问题不在 lQuery 或 TDataSetProvider 方面，因为 TCustomProvider.GetData 在调用 GetRecords 后返回了正确的记录数。

最后，我已经能够通过将数据拆分为 100,000 个记录块来对其进行排序，如下所示：

```
 lProvider.DataSet := lQuery;
  lDataSet.SetProvider(lProvider);
  lDataSet.packetrecords := 100000;
  lDataSet.Open;
  while lDataSet.getnextpacket > 0 do
  begin
  end; 
```

这似乎工作正常，如果我认为合适，甚至可以让我有机会将其附加到进度条。

不过，VCL 代码中没有引发合理的异常仍然没有给人留下深刻的印象。

# ruby-on-rails - 将内容从一个 git 存储库移动到另一个，并使用 capistrano 进行部署

> ID：12835233
> 
> 赞同：0
> 
> 时间：2012-10-11T08:24:27.043
> 
> 标签：ruby-on-rails, git, deployment, capistrano

我有两个 .git 存储库：

```
/var/git/repo_a.git
/var/git/repo_b.git 
```

他们与 capistrano 一起部署到：

```
/var/www/rails/repo_a
/var/www/rails/repo_b 
```

我想将 repo_b.git 的所有内容迁移到 repo_a.git 中，删除 repo_a.git 的内容。之后，我想毫无问题地将 repo_a.git 部署到 repo_a 目录中。

但我害怕这个……我想确定一切都会好起来的！最好的方法是什么？

# php - OSX 网络共享 memcached php

> ID：12835238
> 
> 赞同：0
> 
> 时间：2012-10-11T08:24:54.483
> 
> 标签：php, macos, memcached

我一直在使用我的 Mac 的网络共享功能来测试一些 php 代码。

我有一些在使用 memcached 的 ubuntu 机器上运行的代码。现在我想使用网络共享在本地测试它。

要为 ubuntu 安装 memcached 扩展，我这样做：

```
sudo apt-get install php5-memcached 
```

如何在 OSX 的默认 Web 共享设置上安装扩展，以便在本地测试我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:58:18.597

您可以使用os x 的[自制](http://mxcl.github.com/homebrew/)软件包管理器安装 memcached `brew install memcached`。

安装完成后，您将需要一些额外的步骤，当您进行安装或使用`brew info memcached`.

布鲁太棒了！

您也可以使用 brew 安装 php 扩展！要在 php 中启用它，您必须修改 php.ini 文件并添加扩展名。就像是 ：

```
extension="/usr/local/Cellar/__packagename__/__version__/memcached.so" 
```

# wordpress - wordpress 查询字符串和数组

> ID：12835244
> 
> 赞同：0
> 
> 时间：2012-10-11T08:25:15.340
> 
> 标签：wordpress

我正在构建第一个 wordpress 循环中的帖子列表，以便在第二个循环中将其删除，以避免主页上出现重复的内容。所以我有一个数组：

```
$do_not_duplicate_slider[] = $post->ID; 
```

现在我想从二级循环中删除这些帖子：

```
query_posts( 'order=DESC&orderby=modified&posts_per_page=4&post_type=post&category_name='.$myCity ); 
```

如何在此字符串中传递 $do_not_duplicate_slider？

在我读到的 codex 下，可以像这样在数组中执行它：`post__not_in => $do_not_duplicate_slider`

但由于我的查询是基于字符串的，我想继续这种方式，而不是重写数组中的所有内容。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:56:13.810

您可以尝试：

```
query_posts( 'post__not_in='.join(',',$do_not_duplicate_slider).'&order=DESC&orderby=modified&posts_per_page=4&post_type=post&category_name='.$myCity ); 
```

或使用数组：

```
query_posts(array( 
    'post__not_in'=>$do_not_duplicate_slider,
    'order'=>'DESC',
    'orderby'=>'modified',
    'posts_per_page'=>4,
    'post_type'=>'post',
    'category_name'=>$myCity 
)); 
```

# php - 如何在 mysql_query php 中选择一个表

> ID：12835247
> 
> 赞同：0
> 
> 时间：2012-10-11T08:25:34.317
> 
> 标签：php

大家好，OOP PHP 新手。我在下面有以下代码：

**测试.php**

```
<?php
class test 
{
    private $dbhost;
    private $dbname;
    private $user;
    private $pass;
    public function __construct()
    {
        $this->dbhost = 'localhost';
        $this->dbname = 'XXXX';
        $this->user = 'root';
        $this->pass = '';
    }
    public function open($obj)
    {
        $con = mysql_connect($this->dbhost,$this->user,$this->pass) or die(mysql_error());
        $db = mysql_select_db($this->dbname)or die(mysql_error());
        $query = mysql_query("SELECT * FROM '".$obj."'") or die(mysql_error());

    }

}

?> 
```

在另一个名为 test2.php 的文件中，我有以下代码：

```
<?php
    require_once('testClass.php');
    $obj = new test();
    $obj2 = 'user';
    $obj->open($obj2);
?> 
```

我收到以下错误： **您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“用户”附近使用正确的语法**

提前寻求帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:28:44.470

**$obj 应该是表名**，您不需要**在表名周围加上单引号。**

```
mysql_query("SELECT * FROM ".$obj) or die(mysql_error()); 
```

**编辑：**

```
 while($row = mysql_fetch_array($query)){
    echo $row['userId'];
 } 
```

建议：你的查询一定是受到mysql注入攻击的影响。使用 PDO 或 Mysqli lib 真的很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:01:41.173

```
$sql = mysql_query("SELECT * FROM your_table");
$row = mysql_num_row($sql);
if($row > 0){
//do something
}else{
echo "No records found";
} 
```

# wso2 - wso2碳数据库表定义

> ID：12835248
> 
> 赞同：0
> 
> 时间：2012-10-11T08:25:35.453
> 
> 标签：wso2, wso2carbon

我可以在 $CARBON_HOME/dbscripts 文件夹中看到一堆脚本，但想了解有关架构的更多信息。

是否有任何文档描述了碳创建的所有表？

以下是 Carbon 4.0.1 使用的表格。看起来有两种主要类型的数据被管理：注册表 (REG_x) 和用户管理 (UM_x)。

```
REG_CLUSTER_LOCK
REG_LOG
REG_PATH
REG_CONTENT
REG_CONTENT_HISTORY
REG_RESOURCE
REG_RESOURCE_HISTORY
REG_COMMENT
REG_RESOURCE_COMMENT
REG_RATING
REG_RESOURCE_RATING
REG_TAG
REG_RESOURCE_TAG
REG_PROPERTY
REG_RESOURCE_PROPERTY
REG_ASSOCIATION
REG_SNAPSHOT

UM_TENANT
UM_USER
UM_USER_ATTRIBUTE
UM_ROLE
UM_PERMISSION
UM_ROLE_PERMISSION
UM_USER_PERMISSION
UM_USER_ROLE
UM_DIALECT
UM_CLAIM
UM_PROFILE_CONFIG
UM_CLAIM_BEHAVIOR
UM_HYBRID_ROLE
UM_HYBRID_USER_ROLE
UM_HYBRID_REMEMBER_ME 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-28T12:32:36.657

您可以在 [1] 中找到 WSO2 Identity Server 的数据库表定义。大多数表格对其他产品也是通用的。

[1] [http://tharindue.blogspot.com/2015/04/wso2-identity-server-data-dictionary.html](http://tharindue.blogspot.com/2015/04/wso2-identity-server-data-dictionary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:44:30.490

我找到的最接近的答案在[这里](https://stackoverflow.com/questions/12251336/wso2-api-manager-database?rq=1)

我想我需要查看 DAO 并尝试找出那里发生的事情。

# datatables - 重新加载/刷新数据表

> ID：12835249
> 
> 赞同：0
> 
> 时间：2012-10-11T08:25:39.550
> 
> 标签：datatables

单击刷新按钮后，我想重新加载/刷新 dataTable 中的数据。目前，我在单击按钮时调用 dataTable 初始化函数，但这会一次又一次地发送 ajax 请求。有没有其他方法可以重新加载/刷新数据表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:19:18.047

您可以使用`yourTable.fnDraw();`或`fnReloadAjax`根据您的要求。[在这里](http://datatables.net/plug-ins/api)阅读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:12:03.923

如果是服务器端，设置 bDestroy=true ( [http://datatables.net/usage/options](http://datatables.net/usage/options) )

通常我将我的 datadbles 函数设置为变量 oTable，然后在随后的单击函数中调用 oTable.fnDraw(); 发现当传递不同的参数时它比 fnReload ajax 效果更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:43:02.310

我使用 oTable.fnDraw() 方法在删除或激活/停用某些事件后刷新我的数据表。其中 oTable 是 Your Table 的对象。

# c# - 如何使用 c# 捕获窗口焦点更改事件

> ID：12835252
> 
> 赞同：0
> 
> 时间：2012-10-11T08:26:08.913
> 
> 标签：c#, events, window, focus

我想构建一个应用程序来监视所有正在运行的 Windows 焦点更改事件。我知道 WM_KILLFOCUS (0x0008) 和 WM_SETFOCUS(0x0007) 并且当窗口失去焦点或获得焦点时，将发送消息。在 spy++ 的帮助下，我得到如下输出：

<00001> 0005069A S WM_SETFOCUS hwndLoseFocus:(null)

<00002> 0005069A R WM_SETFOCUS

<00003> 0005069A S WM_KILLFOCUS hwndGetFocus:(null)

<00004> 0005069A R WM_KILLFOCUS

<00005> 00010096 S WM_SETFOCUS hwndLoseFocus:(null)

<00006> 00010096 R WM_SETFOCUS

我尝试编写以下 c# 代码以使其在我的 winfrom 应用程序中工作：

```
[StructLayout(LayoutKind.Sequential)]
public struct NativeMessage
{
 public IntPtr handle;
 public uint msg;
 public IntPtr wParam;
 public IntPtr lParam;
 public uint time;
 public System.Drawing.Point p;
}
[DllImport("user32.dll")]
public static extern sbyte GetMessage(out NativeMessage lpMsg, IntPtr hWnd, uint wMsgFilterMin, uint wMsgFilterMax);

NativeMessage msg = new NativeMessage();
        sbyte ret;
        while ((ret = GetMessage( out msg, IntPtr.Zero, 0, 0)) != -1)
        {
            if (ret == -1)
            {
                //-1 indicates an error
            }
            else
            {
                if (msg.msg == 0x0008 || msg.msg == 0x0007)
                {
                    this.textBox1.Text = "ret is: " + ret;
                }
            }
        } 
```

不幸的是，我从未收到 WM_KILLFOCUS 和 WM_SETFOCUS 消息。

当我发现所有正在运行的窗口中发生获取/丢失焦点事件时，我实际上想在我的应用程序中触发一个事件。我怎样才能让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:37:49.883

使用`Form.Actived`和`Form.Deactivate`事件来确定表单是否丢失或获得焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:40:23.230

如果你真的想进入令人讨厌的原生窗口消息世界，你应该使用[WndProc](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.wndproc.aspx)

# powershell - powershell 命令从控制台工作，但不能从脚本工作

> ID：12835253
> 
> 赞同：1
> 
> 时间：2012-10-11T08:26:12.390
> 
> 标签：powershell

我正在尝试使用以下脚本远程安装我们的构建（一个 msi），见下文。

问题是它不起作用，但奇怪的是，如果我从 PowerShell 控制台运行命令，它就会起作用。

我刚刚测试了在一台远程服务器上运行安装，它工作正常（我得到一个返回码 0，我还检查了远程服务器，它安装得很好）

所以我的问题是我在这里错过了什么？

为什么这些命令在从 PS 控制台运行时可以正常工作，但在使用脚本时却不行？

TIA

```
 param ($serverfile, $targetdir, $domainname, $username, $password,)

   if (-not($serverfile) -or -not($targetdir) -or -not($domainname) -or -not($username))
   {
   echo "error"
   exit
   }

     #default to c:\temp, this needs to be in the server
    $dest = "c$\temp\"

    #This is really good as it allows us to have some sort of type safety
    $srvs = Import-Csv $serverfile

    foreach ($item in $srvs) 
    { 
     if ($item.Type -eq "App" )
     {
        $name = $item.Hostname
        $path = "\\$name\" + $dest

        New-Item -ItemType directory -Path $path -Force

        Copy-Item -Path '.\Deployment.msi' -Destination $path -Force

        $wmi = "\\" +$name + "\ROOT\CIMV2:Win32_Product" 

        echo "Start Install Product"

        $product = ([WMIClass]$wmi)
        $var = $product.Install("c:\temp\Deployment.msi", "TARGETDIR=$targetdir DOMAINNAME=$domainname EMANRESU=$username PASSWORD=$password", $true)

        if ($var.ReturnValue -ne 0)
        { 
          echo "Error installing Deployment.msi on $name"
          echo "exit code: $var.ReturnValue"
        }   

        echo "Installed Product on $name"
     } 
```

编辑：

如果我硬编码服务器的名称，例如：

```
$path = '\\uk703\c$\temp\'
$wmi = '\\uk703\ROOT\CIMV2:Win32_Product' 
```

然后一切正常

很明显，问题归结于我对变量如何扩展等缺乏了解......

任何指导将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:29:43.810

可能是您的脚本未在需要它的环境中签名（即 PS 模式具有“受限”执行策略）。这是一个可以帮助您的[帖子。](http://www.hanselman.com/blog/SigningPowerShellScripts.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:15:34.190

一个小的错误代码（显然不是脚本失败的原因），您正在以错误的方式扩展字符串中的变量属性：

```
"exit code: $var.ReturnValue" 
```

正确的方法是：

```
"exit code: $($var.ReturnValue)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T16:59:29.797

我已经在我的博客中获得了完整的详细[信息](http://manyrootsofallevilrants.blogspot.co.uk/2012/10/install-and-uninstall-msi-remotely.html)

本质上我已经使用 [string]::Format() 并且它似乎有效

# unit-testing - Grails 单元测试和引导

> ID：12835257
> 
> 赞同：1
> 
> 时间：2012-10-11T08:26:30.697
> 
> 标签：unit-testing, grails

我为控制器编写了一个单元测试。

我有一个引导文件，它通过添加一个方法来改变域类的元类`asPublicMap()`。我在控制器中使用此方法将域类返回为 json，但仅返回一些选定*的公共*字段。

我的单元测试因`MissingMethodException`for 而失败`asPublicMap()`。据我了解，引导类不加载用于单元测试，仅用于集成测试。这就是我收到此错误的原因。

我的问题是：是否有其他地方可以放置元类操作以便在单元测试期间将它们考虑在内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:34:20.440

只需将单元测试移至集成测试即可解决。加载引导类以进行集成测试，因此现在它运行良好。

我对迁移的关注是关于`@Mock`注释，但令人惊讶的是它也适用于集成测试。该数据库不用于模拟域类。

# php - 从 MySql 中获取随机图像

> ID：12835259
> 
> 赞同：0
> 
> 时间：2012-10-11T08:26:37.647
> 
> 标签：php, mysql, image, random

我正在尝试从外部页面上的数据库中获取随机图像脚本工作正常，但它只获取 id 用户 id 名称的图像，我只想获取具有活动链接的图像

就像大多数壁纸网站一样，它们在主页或随机某处显示缩略图，当用户点击壁纸时，它会重定向到壁纸（或大图）

这是我的代码

```
<?php

$connect= mysql_connect('localhost','root',' ');
if($connect) {
    mysql_select_db ('wall_paper',$connect);

    $query= ("SELECT * FROM wallpapers ORDER BY Rand() LIMIT 5");
    $result= mysql_query($query);

    echo "<table border='1'>";
    while ($row=mysql_fetch_array($result, MYSQL_NUM)){
        echo "<tr><td>$row[0] </td><td>$row[1]</td><td>$row[2]</td></tr>";
    }
    echo "</table>";
} else {
    echo "cant connet to the database";
}
?> 
```

我的数据库从以下位置获取图像：

[数据库映像](http://i50.tinypic.com/mm4bap.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:03:52.530

要显示图像，您需要知道图像文件路径。在您的数据库中，您只有图像参数而不是文件路径。如果您可以创建文件路径，则可以将其放入结果输出：

```
while ($row=mysql_fetch_array($result, MYSQL_NUM)){
    $sPath = '/path_to_dir_with_images/'. $row[0] . '.jpg'; // something like this
    echo "<tr><td>{$sPath}</td></tr>";
} 
```

# asp.net-mvc - 没有为此对象定义无参数构造函数。

> ID：12835260
> 
> 赞同：2
> 
> 时间：2012-10-11T08:26:42.987
> 
> 标签：asp.net-mvc, asp.net-mvc-4, method-missing, missingmethodexception

目前我有一个运行时异常：'Systen.MissingMethodException：没有为此对象定义无参数构造函数。

我用谷歌搜索并发现很多人实际上没有默认构造函数，尽管我的代码确实有，所以我不知道哪里出错了！

我的完整代码可以在 pastebin 上找到，因为它非常大：[http ://pastebin.com/RxdKgxSx](http://pastebin.com/RxdKgxSx)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T08:35:29.857

代替：

```
public ActionResult Create(UploadViewItem viewItem, HttpPostedFile postedFile) 
```

和：

```
public ActionResult Create(UploadViewItem viewItem, HttpPostedFileBase postedFile) 
```

ASP.NET MVC 对实际`HttpContext`对象（`HttpContextBase`, `HttpRequestBase`, `HttpResponseBase`, `HttpSessionBase`, `HttpPostedFileBase`, ...）进行抽象处理。

这就是允许更轻松的单元测试和模拟这些对象的原因。

有关在 ASP.NET MVC 中上传文件的更多信息，您可以查看[以下博客文章](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)。

# objective-c - 选项卡图标在 iOS 4 上更改默认颜色

> ID：12835266
> 
> 赞同：0
> 
> 时间：2012-10-11T08:26:54.573
> 
> 标签：objective-c, ios4, uitabbar

我想更改标签图标默认颜色（蓝色）的颜色。我已经使用 tint color 完成了 iOS5。但是 iOS 4 不支持 tint color。请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:31:50.507

你可以获得iOS版本

```
float version = [[UIDevice currentDevice].systemVersion floatValue];
if (version >= 5.0) {
    // Adjust tint color
} 
```

旧版本不允许更改色调颜色

# powershell - 使用 vmrun 立即更新 VMWare 工作站 gui 中虚拟机的 displayName

> ID：12835270
> 
> 赞同：1
> 
> 时间：2012-10-11T08:27:17.677
> 
> 标签：powershell, vmware, vmrun

我正在从 Windows 7 上的 Windows Powershell 编写 VMWare Workstation (8.0.2) 脚本。我正在尝试克隆一个模板虚拟机并制作它的多个实例，每个实例都有不同的显示名称。这样我就可以在完成后使用 GUI 轻松识别和控制机器。

默认情况下，vmrun 会将克隆机器的名称设为“Copy of (old machine name)”。我想更改此名称，以便可以从工作站 GUI 轻松识别机器。

我正在使用的代码是

```
& vmrun clone "path to master vm.vmx" "path to new vm.vmx" linked snapshot_01
# attempting to change the display name here results in an error "vm not started"
& vmrun start "path to new vm.vmx" gui
& vmrun writeVariable "path to new vm.vmx" runtimeConfig displayName "new display name" 
```

不幸的是，此代码不会更新 VMWare 工作站 GUI。使用“readVariable”命令我可以读出新值。

我正在考虑编写一些 Powershell 来直接更新 .vmx 文件，但只是觉得必须有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T00:48:08.350

是的，我已经用 Powershell 做到了这一点。轻松的任务。

```
(get-content $CloneVMX) | foreach-object {$_ -replace 'displayName = "Clone of Master2012"', $Displayname } | set-content $CloneVMX 
```

其中 $clonevmx 是 .vmx 文件的路径 它只是读取和替换，我在创建链接克隆后立即执行此操作。

[在BRS2GO](https://community.emc.com/blogs/bottk/2013/10/09/test-networker-810-with-exchange-2013-on-your-vmware-workstation)上查看更多信息

# php - PHP 正则表达式换行符

> ID：12835271
> 
> 赞同：1
> 
> 时间：2012-10-11T08:27:23.487
> 
> 标签：php, regex, line-breaks

关于用换行符提取评论的简单正则表达式问题：

**细绳：**

```
 <description language="de">Diese Tabelle zeigt die Zugangswege der Besucher auf die Website</description>

   <options>
      <!-- Hier stehen die Optionen für den View, die sich nicht auf colums beziehen.
           Bisher gibt es da nix, kann aber mal nicht schaden das vorzusehen  -->
   </options>

   <defaultcolumn>
      <!-- Hier können für Basiswerte für alle Spalten definiert werden. 
           Die Spaltendefinition weiter unten gibt die Möglichkeit die Werte je Spalte zu überschreiben
           Welche Optionen es gibt (incl. Titel, Description und Emptycelltext) siehe "allvaluescolumn" oben. 
      -->
      <options>
         <option name="align" value="left"><!-- (left|center|right), default left --></option> 
```

**我的正则表达式尝试：**

```
/<!--(.*)-->/ 
```

这将提取所有单行注释。

**问题：**

我如何获得所有评论？还有多线的？添加`\n`还是`\r\n\`没有成功。

`<!-- get me (linebreak) me also -->`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:37:27.800

处理 (X)HTML/XML 字符串时经常出现的情况，这样做的*正确*方法是根本不使用正则表达式，而是使用[DOM](http://www.php.net/manual/en/book.dom.php)和[XPath](http://www.php.net/manual/en/class.domxpath.php)。

要获取文档中的所有注释，您需要的 XPath 查询是：

```
//comment() 
```

例如：

```
$str = '<description language="de">Diese Tabelle zeigt die Zugangswege der Besucher auf die Website</description>

<options>
  <!-- Hier stehen die Optionen für den View, die sich nicht auf colums beziehen.
       Bisher gibt es da nix, kann aber mal nicht schaden das vorzusehen  -->
</options>

<defaultcolumn>
  <!-- Hier können für Basiswerte für alle Spalten definiert werden. 
       Die Spaltendefinition weiter unten gibt die Möglichkeit die Werte je Spalte zu überschreiben
       Welche Optionen es gibt (incl. Titel, Description und Emptycelltext) siehe "allvaluescolumn" oben. 
  -->
  <options>
     <option name="align" value="left"><!-- (left|center|right), default left --></option>';

$doc = new DOMDocument('1.0');
@$doc->loadHTML($str);
$xpath = new DOMXPath($doc);

$nodes = $xpath->query('//comment()');

$comments = array();

foreach ($nodes as $node) {
    $comments[] = trim($node->nodeValue);
}

print_r($comments); 
```

[看到它工作](http://codepad.viper-7.com/QMoen5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:31:09.877

尝试

```
/<!--(.*?)-->/s 
```

默认情况下`.`匹配没有换行符，因此您需要使用正则表达式分隔符后的模式启用该`dotall`模式。`s`(`s`是`singleline`修饰符，它将整个字符串视为一行，即使点匹配也换行。)

然后我通过在它后面添加一个来使量词变得不贪婪`?`，否则它将从第一个开始标记匹配到最后一个结束标记。

# css - 将内容添加到 compass/sass 变量并使用单个输出

> ID：12835272
> 
> 赞同：1
> 
> 时间：2012-10-11T08:27:23.477
> 
> 标签：css, compass-sass, sass

我希望能够将 css 添加和堆叠到变量、mixin 或占位符之类的东西上，并在给定点输出它。我不知道 Sass 是否对此有一些内置行为。例如，我想使用它来包含 IE 特定样式或与媒体查询一起使用。我不希望将所有内容都打印为“内联”，例如在文件底部或单独的文件中。在代码示例中，我试图对此进行更多解释。别提语法！

```
.box {
    width:250px;
    @stack mediaquery_var_or_mixin(small) {
        width:100%;
    }
}

.input {
    width:100px;
    @stack mediaquery_var_or_mixin(small) {
        width:100%;
    }
}

echo mediaquery(small); 
```

输出将如下所示：

```
.box {
    width:250px;
}

.input {
    width:100px;
}

@media (max-width: 320px) {
    .box {
        width:100%;
    }
    .input {
        width:100%;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:22:45.847

正如评论中提到的评论者 cimmanon，这不是 Sass 的当前功能。

虽然此功能会使压缩输出更简单，但如果您使用 gzip 编码提供文件，则在编译的 css 中创建的冗余不再是主要问题。

# jquery - jQuery中创建DOM元素的区别

> ID：12835275
> 
> 赞同：4
> 
> 时间：2012-10-11T08:27:41.563
> 
> 标签：jquery, performance, dom

我想知道在使用 jQuery 创建 DOM 元素时是否存在性能差异（或最佳实践是什么）。

据我所知，有3种方法可以做到这一点：

1.  按字符串：

    ```
    $('<a href="http://www.example.com" class="footerLink" rel="external">example</a>');` 
    ```

2.  先创建元素，再添加属性：

    ```
    $('<a></a>')
      .addClass('footerLink')
      .attr({ 
         rel: 'external, 
         href: 'http://www.example.com' 
      })
      .text('example'); 
    ```

3.  创建元素并使用它传递属性对象：

    ```
    $('<a></a>', {
      'class': 'footerLink', 
      href: 'http://www.example.com',
      rel: 'external'
    })
    .text('example'); 
    ```

**编辑：** 如果您将很多项目附加到一个元素怎么办？你应该先做一个很长`string`的然后在循环之后附加它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:36:31.473

创建要作为字符串附加的整个 DOM，然后将其附加到文档的最快方法是`html()`：

```
var dom = '<a href="http://www.example.com" class="footerLink" rel="external">example</a>';
$(element).html(dom); 
```

在示例中的三个中，最快的应该是第三个，因为它不必进行任何复杂的字符串解析，并且属性不是使用链式函数调用放置的，而是作为单个对象提供的选择器的参数。

[有一个关于 jQuery 的论坛主题，您可能想查看。](http://forum.jquery.com/topic/inserting-dom-performance)

**更新：**

如果您要为一个元素创建很多项目，那么您绝对应该采用字符串方法。看看下面制作 1000 个列表元素的例子。

```
// Assume we have data defined with 1000 data members
// each containing a text property
var list = [];
for (var i = 0; i < data.length; i++) {
    list.push('<li>' + data.text + '</li>');
}
$(ul).html(list.join('')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:13:47.023

正如 Konstantin 所解释的，字符串方法在性能方面更好。但是，我想指出，如果在编写代码时不知道 DOM 字符串（例如，文本来自用户输入），那么较慢的方法将有意义：

*   避免长系列的字符串连接
*   让 jquery 的[“文本”](http://api.jquery.com/text/)方法有机会在输出之前清理字符串

最后，这可能真的是模板框架的工作（胡子或其他......）

# java - 我怎么能调用 finalize()

> ID：12835278
> 
> 赞同：1
> 
> 时间：2012-10-11T08:27:54.220
> 
> 标签：java, protected, finalize

在下面的代码中，我得到了输出 Hello。谁能解释为什么编译器没有报告错误，因为我在类和继承链之外调用了一个受保护的函数。

```
package sampleproject;

public class SampleProject 
{
    public static void main(String[] args) 
    {
        Sample s=new Sample();
        s.finalize();
    }
}

class Sample
{
    @Override
    protected void finalize()
    {
        System.out.println("Hello");
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:29:47.960

`protected`范围包括*包*，以及类和子类。你的两个类都是同一个包的一部分。

我希望你不打算打电话`finalize()`，顺便说一句。这应该留给垃圾收集器（而不是依赖，。或者！）。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/2506525/12960)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:30:11.600

`protected`使方法在同一个包中可见

这可能会有所帮助：[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:30:23.777

> **受保护**的成员只能由他们自己的类、该类的子类或同一包中的类的成员访问。

从[这里](http://en.wikipedia.org/wiki/List_of_Java_keywords)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:38:44.917

`SampleProject.java`您在 package中有一个名为的文件`sampleproject`。SampleProject.java 包含定义的两个类，即`SampleProject`和`Sample`。因此，当您编译文件 SampleProject.java 时，您将看到`SampleProject.class`和`Sample.class`在同一个文件夹中。所以它们在同一个包中（因为编译器插入包作为`samplepackage`，`Sample.class`因此调用该`finalize`方法成功。

# cloudbees - 部署到 run@cloud 保持应用程序处于停止状态

> ID：12835280
> 
> 赞同：0
> 
> 时间：2012-10-11T08:28:04.510
> 
> 标签：cloudbees

我有一些部署到 run@cloud 的应用程序处于停止状态。是否可以使用 bees:deploy 升级这些应用程序，让它们保持停止状态？

这会很棒，这样我可以稍后决定何时应用 bees:start 到应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:43:57.897

不，我认为部署行为会将它们置于启动状态 - 但您可以在此之后立即停止它们（即它们只会运行几秒钟）。

# flash - 在第二个屏幕中显示的 Flash 影片剪辑

> ID：12835283
> 
> 赞同：0
> 
> 时间：2012-10-11T08:28:23.980
> 
> 标签：flash, screen, projector

我正在做一个 Flash 交互——一个屏幕是触摸屏，一个屏幕是投影仪。

在触摸屏上，用户可以选择更改影片剪辑的颜色——一旦用户对颜色感到满意，结果需要显示在高射投影仪上（即在第二个屏幕上）

虽然一个完整的解决方案是完美的，但我只是在寻找正确方向的指针 - 最好使用 actionscript 2（如果可能的话）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:11:16.387

我假设您打算将它们作为 2 个独立的 SWF？看看[LocalConnection](http://docs.brajeshwar.com/as2/LocalConnection.html)的使用。这将允许您在两个 SWF 之间传递数据。

# java - 创建目录。如果存在，则删除目录及其内容并在 Java 中创建新目录

> ID：12835285
> 
> 赞同：10
> 
> 时间：2012-10-11T08:28:33.673
> 
> 标签：java, directory

我正在尝试用 Java 创建一个目录。如果存在，我想删除该目录及其内容并创建一个新目录。我正在尝试执行以下操作，但该目录没有被删除。新文件将附加到目录中。

```
File file = new File("path");
boolean isDirectoryCreated = file.mkdir();
   if (isDirectoryCreated) {
       System.out.println("successfully made");
        } else {
          file.delete();
          file.mkdir();
          System.out.println("deleted and made");
          } 
```

我在运行时在运行项目的目录中创建这个目录。每次运行后，必须删除旧内容，并且必须在此目录中存在新内容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-23T01:56:49.133

感谢 Apache，这非常容易。

```
import java.io.File;
import java.io.IOException;

import org.apache.commons.io.FileUtils;

public class DeleteFolder {

    public static void main(String[] args){
        try {
            File f = new File("/var/www/html/testFolder1");
            FileUtils.cleanDirectory(f); //clean out directory (this is optional -- but good know)
            FileUtils.forceDelete(f); //delete directory
            FileUtils.forceMkdir(f); //create directory
        } catch (IOException e) {
            e.printStackTrace();
        } 
    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-11T08:33:16.320

```
public static boolean deleteDir(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }
    return dir.delete();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-11T08:35:27.393

您需要先删除目录的内容，然后才能删除目录。您可以尝试以下操作：-

```
File file = new File("path");
boolean isDirectoryCreated = file.mkdir();

if (isDirectoryCreated) {
       System.out.println("successfully made");

} else {
       deleteDir(file);  // Invoke recursive method
       file.mkdir();       
}

public void deleteDir(File dir) {
    File[] files = dir.listFiles();

    for (File myFile: files) {
        if (myFile.isDirectory()) {  
            deleteDir(myFile);
        } 
        myFile.delete();

    }
} 
```

# weblogic11g - Weblogic Sc ripting Tool 常用模块

> ID：12835288
> 
> 赞同：1
> 
> 时间：2012-10-11T08:28:42.217
> 
> 标签：weblogic11g, wlst

在使用 WLST 时，我遇到了几个问题。我们的服务器仅使用 Solaris 或 Linux，因此请在回答时记住这一点。

1：我应该在哪里放置与内部 WLST 功能无关的 WLST 通用模块（选项解析、日志记录、输出......） 1.1：我自己写了一些，以说明Oracle 提供的 Jython 2.1 中缺乏现有的。

2：如何包含使用 WLST 内部函数的模块，以便它们工作，并且不会丢失它们的信息（模块中的连接在返回主程序时不会保持连接）。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T13:41:02.317

对于#1，我可以通过将当前路径添加到 sys.path 来将库 .py 文件包含在与目标脚本相同的目录中。例如，如果我有一个文件 functions.py，我会使用以下代码：

```
import os, sys
sys.path.append(os.path.dirname(os.path.abspath(inspect.getsourcefile(lambda:(True)))))
import functions 
```

我不确定添加到 sys.path 是否是 Pythonic 的做事方式，但它可以完成工作，而且 WLST 也非常[“狂野西部”](http://en.wikipedia.org/wiki/Cowboy_coding)。

如果您无法使用嵌入 Python 2.1 的旧版 Weblogic，例如 10.x（可能还有 11g？），您会发现它没有很多现在标准的库，包括检查库。您必须使用`sys.argv[0]`而不是`os.path.abspath(inspect.getsourcefile(lambda:(True)))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T17:20:53.147

对于#1，我按照 Ed Griebel 的方法附加到 sys.path。为了支持旧版本，我利用了 sys.argv[0] 变量。

对于#2，如果您在模块中执行“导入 wlstModule”，那么在主脚本中我发现您需要绕过提供的内部 WLST 函数，而是使用 wlstModule 中的函数。只需在主脚本中添加相同的“import wlstModule”，然后更改所有调用以使用导入的 wlstModule。例如，在您的主脚本中使用“wlstModule.cd()”、“wlstModule.cmo()”和“wlstModule.set()”等调用，而不是“cd()”、“cmo()”和“放（）”。

# c++ - 接受任何类型的函数作为参数的 C++ 类

> ID：12835290
> 
> 赞同：1
> 
> 时间：2012-10-11T08:28:46.540
> 
> 标签：c++, function, templates, implementation

我正在为一个类编写一个 .hpp 文件，该类应该接收一个函数作为其参数之一并将其存储在一个成员变量中，到目前为止，我的代码如下所示：

```
template<typename Function> class myClass
{
  public:
           myClass(Function function) : pvFunction( function ) {}

           //Functor operator
           double operator() (double x) const{
             return pvFunction(x+4);
           }
  private:
           Function pvFunction
} 
```

该程序看起来毫无意义，因为它返回的值现在并不重要。我只是想弄清楚如何将函数传递给这个类并使用它的仿函数运算符。唯一的问题是：

1）我不知道这个类的定义是否正确，这意味着这是接受任何类型的函数作为参数传递给这个类的对象的正确方法。

2）如何在我的程序中创建此类的实例？如何将函数传递给新对象然后调用它？

已经有一段时间了，似乎无法弄清楚

编辑：

在我的程序文件 main.cpp 中，此代码收到错误：

```
double function(double);

int main()
{
   myClass<double> myClassObject((function));
   return 0;
}

double function(double x)
{
   return (x+3.0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:35:14.977

您收到一个错误，因为该类期望模板参数是实际的函数类型，但您`double`在实例化中传递了模板参数。

考虑使用 C++11 的新功能，例如[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function).

```
template<typename T>
struct myClass
{
    typedef std::function<T(T)> func_type;

    func_type pvFunction;

    myClass(func_type func) : pvFunction(func) {}

    T operator()(T x)
        { return pvFunction(x + 4); }
};

double function(double x)
{
    return (x+3.0);
}

int main()
{
    myClass<double> my_class(function);
    std::cout << "my_class(3) = " << my_class(3) << '\n';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:37:46.757

1) 是的。

2）`myClassObject`你的例子中的类型应该是

```
 myClass<double(*)(double)> myClassObject(function); 
```

因为函数是类型`double(*)(double)`。构造此类模板对象的最佳方法是使用如下函数模板：

```
template<typename Function>
myClass<Function> MakeMyClass(Function f)
{
    return myClass<Function>(f);
}

int main()
{
   auto withFuncPtr= MakeMyClass(function);
   auto withLambda= MakeMyClass([] (double v) {return v*2;});

   Foo foo;
   auto withStdFunction = MakeMyClass(
       std::bind(&Foo::Method, &foo, std::placeholders::_1));
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:39:27.443

您可以使用带有 operator() 的 struct 作为建议

```
template<typename Function> class myClass
{
  public:
        myClass(){}

        //Functor operator
        double operator() (double x) const
        {
          return pvFunction(x+4);
        }
  private:
        Function pvFunction;
};

struct Double
{
    double operator()(const double n)const
    {
        return n;
    }
};

int main() {
    myClass<Double> myClassObject;
    std::cout<<myClassObject(2.0f);
    return 0;
} 
```

打印 6

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:39:49.590

我真的不确定你想要实现什么，因为如果你仍然想将任何函数绑定到具有双精度类型的参数，你怎么能使用它，但是，下面的示例使你的示例模板工作，但我真的不'看不到用途。

```
 template<typename Function> class myClass
    {
    public:
        myClass(Function function) : pvFunction( function ) {}

        //Functor operator
        double operator() (double x) const{
            return pvFunction(x+4);
        }
    private:
        Function pvFunction;
    };

    double foo1(double x)
    {
        return x;
    }

    double foo2(double x)
    {
        return x + 1;
    }
    int main(int argc, char** argv)
    {
        myClass<double(*)(double)> instance1(foo1);
        myClass<double(*)(double)> instance2(foo2);
        double a = instance1(1.5), b = instance2(1.5);
        return 0;
    } 
```

# java - JDK 1.4.2 中的 javax.comm

> ID：12835293
> 
> 赞同：0
> 
> 时间：2012-10-11T08:29:03.153
> 
> 标签：java, legacy, javax.comm

我遇到了一个使用 Java 1.4.2 的遗留项目。该项目包含对用于串行端口通信的 javax.comm 的引用。

我现在尝试在 java 7 上运行它，发现 javax.comm 不包含在 JDK 中。

我找不到的是确认这实际上是 1.4.2 时代标准 JDK 或 JRE 发行版的一部分。

我只是想知道这是否有效，因为它曾经是标准发行版的一部分，或者是否有人在几年前做了一些捏造以使其运行。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:54:44.827

javax.comm api 不是标准 JDK 的一部分，必须单独安装。我无法从[oracle 页面](http://www.oracle.com/technetwork/java/index-jsp-141752.html)找到当前的官方下载链接，[此答案](https://stackoverflow.com/a/7562613/139595)包含[指向包含 windows 版本的 zip 文件的链接](http://llk.media.mit.edu/projects/picdev/software/javaxcomm.zip)。

对于 linux，您可以查看[librxtx](http://rxtx.qbang.org/wiki/index.php/Main_Page)，版本 2.0 应该与 API 兼容。

# cakephp - CakePHP2 中的多态关联

> ID：12835298
> 
> 赞同：7
> 
> 时间：2012-10-11T08:29:28.557
> 
> 标签：cakephp, polymorphic-associations

我有 3 个模型`Page`，`Course`和`Content`

`Page`并`Course`包含元数据并`Content`包含 HTML 内容。

`Page`两者`Course`都有很多`Content`

`Content`属于`Page`和`Course`

为了避免包含`page_id`和`course_id`字段`Content`（因为我希望它扩展到不仅仅是 2 个模型），我正在考虑使用多态关联。我从在面包店中使用[多态行为](http://bakery.cakephp.org/articles/AD7six/2008/03/13/polymorphic-behavior "多态行为")开始，但它生成了太多我喜欢的 SQL 查询，而且它还抛出了一个“非法偏移”错误，我不知道如何修复（它是在 2008 年编写的，似乎没有人最近提到过它，所以错误可能是由于它不是为 Cake 2 设计的？）

无论如何，我发现我几乎可以通过硬编码模型中的关联来完成我需要的一切：

**页面模型**

```
CREATE TABLE `pages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `slug` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created` datetime NOT NULL,
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`)
)

<?php 
class Page extends AppModel {
    var $name = 'Page';
    var $hasMany = array(
        'Content' => array(  
            'className' => 'Content',
            'foreignKey' => 'foreign_id',
            'conditions' => array('Content.class' => 'Page'),
        )
    );
}
?> 
```

**课程模式**

```
CREATE TABLE `courses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `slug` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created` datetime NOT NULL,
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`)
)

<?php 
class Course extends AppModel {
    var $name = 'Course';
    var $hasMany = array(
        'Content' => array(  
            'className' => 'Content',
            'foreignKey' => 'foreign_id',
            'conditions' => array('Content.class' => 'Course'),
        )
    );
}
?> 
```

**内容模型**

```
CREATE TABLE IF NOT EXISTS `contents` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `class` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
  `foreign_id` int(11) unsigned NOT NULL,
  `title` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
)

<?php 
class Content extends AppModel {
    var $name = 'Content';   
    var $belongsTo = array(
        'Page' => array(
            'foreignKey' => 'foreign_id',
            'conditions' => array('Content.class' => 'Page')
        ),
        'Course' => array(
            'foreignKey' => 'foreign_id',
            'conditions' => array('Content.class' => 'Course')
        )
    );
}
?> 
```

好消息是`$this->Content->find('first')`它只生成一个 SQL 查询而不是 3 个（就像多态行为的情况一样），但问题是返回的数据集包括两个 belongsTo 模型，而它应该只返回一个存在的模型。以下是返回数据的外观：

```
array(
    'Content' => array(
        'id' => '1',
        'class' => 'Course',
        'foreign_id' => '1',
        'title' => 'something about this course',
        'content' => 'The content here',
        'created' => null,
        'modified' => null
    ),
    'Page' => array(
        'id' => null,
        'title' => null,
        'slug' => null,
        'created' => null,
        'updated' => null
    ),
    'Course' => array(
        'id' => '1',
        'title' => 'Course name',
        'slug' => 'name-of-the-course',
        'created' => '2012-10-11 00:00:00',
        'updated' => '2012-10-11 00:00:00'
    )
) 
```

我只希望它返回其中一个`Page`或`Course`取决于 Content.class 中指定的一个

**更新：**结合`Page`和`Course`模型似乎是解决这个问题的明显方法，但我上面显示的模式只是为了这个问题的目的而显示的。实际模式在其字段方面实际上非常不同，并且每个模式与其他模型的关联数量也不同。

**更新 2**

这是运行产生的查询`$this->Content->find('first');`：

```
SELECT `Content`.`id`, `Content`.`class`, `Content`.`foreign_id`, `Content`.`title`,
`Content`.`slug`, `Content`.`content`, `Content`.`created`, `Content`.`modified`, 
`Page`.`id`, `Page`.`title`, `Page`.`slug`, `Page`.`created`, `Page`.`updated`, 
`Course`.`id`, `Course`.`title`, `Course`.`slug`, `Course`.`created`, 
`Course`.`updated` FROM `cakedb`.`contents` AS `Content` 
LEFT JOIN `cakedb`.`pages` AS `Page` ON 
(`Content`.`foreign_id` = `Page`.`id` AND `Content`.`class` = 'Page') 
LEFT JOIN `cakedb`.`courses` AS `Course` ON (`Content`.`foreign_id` = `Course`.`id` 
AND `Content`.`class` = 'Course') WHERE 1 = 1 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T07:39:44.643

你的查询没问题。只需在查找后过滤空值：

```
public function afterFind($results, $primary = false) {
    return Set::filter($results, true);
} 
```

看看[这个](https://stackoverflow.com/questions/8289417/cakephp-join-only-if-id-is-not-null)问题。

您还可以尝试向`conditions`您提供不为空**或**`find`不为空的查询。`Page.id` **`Course.id`**

# ruby - 如何在 ruby 可执行文件之前通过选项？

> ID：12835300
> 
> 赞同：0
> 
> 时间：2012-10-11T08:29:32.123
> 
> 标签：ruby, command-line-interface

假设这个命令：

```
FOO=bar BAR=foo executable --args 
```

什么时候`executable`是 bash 脚本，我只是通过名称、$FOO、$BAR 等获得选择。

`executable`如果是 ruby​​ 脚本，如何获取它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:30:36.053

这些“选项”是环境变量，因此可以通过`ENV`. 试试这个：

```
puts ENV['FOO'] # => bar 
```

# java - 如何解决创建 Spring 上下文的异常？

> ID：12835305
> 
> 赞同：0
> 
> 时间：2012-10-11T08:29:50.017
> 
> 标签：java, spring, hibernate, alfresco

我正在使用 sdk alfresco 4.0d，eclipse ide juno，

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'encryptionKeysRegistry' defined in class path resource [alfresco/encryption-context.xml]: Cannot resolve reference to bean 'transactionService' while setting bean property 'transactionService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionService' defined in class path resource [alfresco/core-services-context.xml]: Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [alfresco/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
        at org.alfresco.util.BaseApplicationContextHelper.getApplicationContext(BaseApplicationContextHelper.java:67)
        at org.alfresco.util.ApplicationContextHelper.getApplicationContext(ApplicationContextHelper.java:46)
        at org.alfresco.sample.FirstFoundationClient.main(FirstFoundationClient.java:63)
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionService' defined in class path resource [alfresco/core-services-context.xml]: Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [alfresco/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 17 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [alfresco/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 27 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [alfresco/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 37 more
    Caused by: org.hibernate.HibernateException: Hibernate Dialect must be explicitly set
        at org.hibernate.dialect.DialectFactory.determineDialect(DialectFactory.java:59)
        at org.hibernate.dialect.DialectFactory.buildDialect(DialectFactory.java:39)
        at org.hibernate.cfg.SettingsFactory.determineDialect(SettingsFactory.java:426)
        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:128)
        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2073)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1298)
        at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
        at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
        at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
        ... 44 more 
```

我正在尝试运行 firstFoundationClient 但上面有异常

```
// locate the company home node
//
SearchService searchService = serviceRegistry.getSearchService();
StoreRef storeRef = new StoreRef(StoreRef.PROTOCOL_WORKSPACE, "SpacesStore");
ResultSet resultSet = searchService.query(storeRef, SearchService.LANGUAGE_LUCENE,                   "PATH:\"/app:company_home\"");
NodeRef companyHome = resultSet.getNodeRef(0);
resultSet.close(); 
```

我想使用上面的代码来搜索存储库中的节点以显示在露天页面上，我是对的吗？

对不起，我的英语

预先感谢

这是我的休眠配置

```
#
# Hibernate configuration
#

# The Hibernate Dialect:
#    As of V3.1, the dialect is automatically detected.
#    It is still possible to set the dialect explicitly, for example:
#       hibernate.dialect=org.hibernate.dialect.MySQLInnoDBDialect

hibernate.jdbc.use_streams_for_binary=true
hibernate.show_sql=false
hibernate.cache.use_query_cache=false
hibernate.max_fetch_depth=10
hibernate.cache.provider_class=org.alfresco.repo.cache.InternalEhCacheManagerFactoryBean
hibernate.cache.use_second_level_cache=true
hibernate.default_batch_fetch_size=1
hibernate.jdbc.batch_size=32
hibernate.connection.release_mode=auto
hibernate.connection.isolation=2

#hibernate.query.substitutions=
#hibernate.jdbc.use_get_generated_keys=false

# Oracle Schema Distinction:
#    See https://issues.alfresco.com/jira/browse/ETHREEOH-680
#    Metadata queries to Oracle have to be limited by schema name
#    when multiple instances of Alfresco are installed on an Oracle server.
#hibernate.default_schema= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:17:47.447

您发布的堆栈跟踪的最后一行可能是重要的，尤其是这一点：

```
org.hibernate.HibernateException: Hibernate Dialect must be explicitly set 
```

当数据库连接未正确设置时，通常会出现此异常。如果数据库连接失败，所有需要数据库在启动时完全正常运行的 Spring bean 都将无法初始化，最终在 Alfresco 完全启动之前杀死它。

请验证 Alfresco 是否可以正确连接到数据库并重试。

# jquery - iPad/iPhone 上的网站和可点击项目

> ID：12835306
> 
> 赞同：0
> 
> 时间：2012-10-11T08:29:52.903
> 
> 标签：jquery, iphone, ipad, mobile, click

我一直在建立一个网站，以便它可以响应 iPhone 和 iPad 等平板电脑，但是我遇到了可点击项目的问题。

例如，我目前有我的导航“位置：固定”，因此无论您向下滚动页面多远，它始终存在。我遇到的问题是在您单击下拉菜单并选择要跳转到的部分后，当我返回选择另一个部分时它不起作用。我必须滚动一点才能激活导航，以便再次单击菜单。

谁能帮帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:45:37.113

您是否尝试过使用触摸事件？

```
var ua = navigator.userAgent,
event = (ua.match(/iPad/i)) ? "touchstart" : "click";

$("put your selector here").bind(event, function(e) {

}); 
```

# joomla - 在 K2 joomla 的顶部和底部显示分页

> ID：12835308
> 
> 赞同：1
> 
> 时间：2012-10-11T08:29:58.180
> 
> 标签：joomla, pagination, joomla-k2

分页在页面底部显示效果很好。问题是我想在页面的上方和底部显示分页。帮助赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:51:04.857

您应该能够通过添加模板覆盖来做到这一点。将文件复制`JOOMLA SITE/components/com_k2/templates`到`JOOMLA SITE/templates/YOUR TEMPLATE/html/com_k2`. 这意味着在 k2 更新的情况下，将分页放在顶部不会被覆盖

然后只需将分页代码复制到页面顶部即可。

例如，对于类别部分（文件`default/category.php`），您应该在第 252 行（在 2.6.1 版中）找到

```
<!-- Pagination -->
<?php if(count($this->pagination->getPagesLinks())): ?>
<div class="k2Pagination">
    <?php if($this->params->get('catPagination')) echo $this->pagination->getPagesLinks(); ?>
    <div class="clr"></div>
    <?php if($this->params->get('catPaginationResults')) echo $this->pagination->getPagesCounter(); ?>
</div>
<?php endif; ?> 
```

只需将此代码复制到页面顶部（大约第 131 行），您就应该获得第二组分页！

# events - jQuery 解绑监听器

> ID：12835309
> 
> 赞同：-1
> 
> 时间：2012-10-11T08:29:59.617
> 
> 标签：events, triggers, event-handling, jquery

我有问题要解除绑定一个监听共享发射器之一的监听器：

```
// this is emitter. Fire always in a.b.c namespace but with different parameters 
$(document).trigger("a.b.c", {
    p: 1,
    p2: ...

});

// listener 1
$(document).bind("a.b.c", function(e, object) {
    if (object.myParam) {
        ....
    }
});

// listener 2
$(document).bind("a.b.c", function(e, object) {
    if (object.anotherParam) {
        ....
    }
}); 
```

如何解除监听器 2 的绑定，让监听器 1 继续工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:42:00.497

保存对处理程序的引用，以便以后[`unbind`](http://api.jquery.com/unbind/)可以使用：

```
var listener = function(e, object) {
    if (object.anotherParam) {
        ....
    }
};

$(document).bind("a.b.c", listener);

// sometime later:
$(document).unbind("a.b.c", listener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:49:18.150

我找到了更好的解决方案[命名空间事件](http://docs.jquery.com/Namespaced_Events)

```
// this is emitter. Fire always in a.b.c namespace but with different parameters 
$(document).trigger("a.b.c", {
    p: 1,
    p2: ...

});

// listener 1
$(document).bind("a.b.c.listener1", function(e, object) {
    if (object.myParam) {
        ....
    }
});

// listener 2
$(document).bind("a.b.c.listener2", function(e, object) {
    if (object.anotherParam) {
        ....
    }
}); 
```

现在触发`a.b.c`将使用`listener1`和触发`listener2`。并解除绑定 - 只需解除与特定侦听器的绑定，例如：

```
$(document).unbind("a.b.c.listener1"); 
```

在这种情况下`listener2`，将被保留，并且能够通过命名空间调用`a.b.c`

# c# - 输入字符串的格式不正确。在 IE 中调用 TimeSpan.FromSeconds(Convert.ToDouble(time)) 关于改变文化

> ID：12835310
> 
> 赞同：0
> 
> 时间：2012-10-11T08:30:06.077
> 
> 标签：c#, asp.net, internet-explorer, multilingual, culture

嗨，我使用下面给出的方法将其转换为字符串，其工作正常，但在 IE 中，其通过异常**输入字符串的格式不正确。** 在这条线上

```
 s = TimeSpan.FromSeconds(Convert.ToDouble(time)); 
```

这些是我传递给它的值

```
600, 298.8, 65505, 69, 70, 20.5, 20.5, 20.5, 20.5, 1840.4, 682, 1040.3 
```

在 chrome 中它可以工作，但在 IE 中，当我将文化更改为法语时，它会在第二个值上出现异常，请帮助我解决问题所在

```
public static String ConvertTimeToString(this string time)   
{

    if (String.IsNullOrEmpty(time))
    {
        return time;
    }

    TimeSpan s;

    if (time.IndexOf(':') >= 0)
    {
        s = TimeSpan.Parse(time);
    }
    else
    {
        s = TimeSpan.FromSeconds(Convert.ToDouble(time));
    }

    return s.ConvertTimeToString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:36:54.640

失败很可能是在通话中`Convert.ToDouble`。您的代码可能在具有“，”作为小数分隔符的 CultureInfo 中执行，但您的值使用“。”。我建议您使用`Double.TryParse`具有“。”的 CultureInfo。作为小数分隔符：

```
Double value;
if (Double.TryParse(time, NumberStyles.Any, CultureInfo.GetCultureInfo("en-US"), out value))
{
    s = TimeSpan.FromSeconds(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:37:27.363

您需要在使用`IFormatProvider`时指定一个`Convert.ToDouble(time)`：

```
Convert.ToDouble(time, CultureInfo.InvariantCulture) 
```

指定`CulturInfo.InvariantCulture`指定期望浮点写入的文化`1.234`（注意句点）。您的问题的根源可能是您`time`的格式`1,234`（注意逗号）。或者可能是相反的：您没有指定一个`IFormatProvider`并且您的 ASP.NET 进程的当前区域性使用逗号作为小数分隔符，但提供的字符串使用句点？

如果使用的小数点不一致，您应该在源处修复它（不确定源在此处），或者作为最后的手段，您可以用句点替换逗号：

```
Convert.ToDouble(time.Replace(",", ".") , CultureInfo.InvariantCulture) 
```

但是，尝试解析字符串却不知道会发生什么并不是最好的做法。

# javascript - KendoUI，Knockout，字段的条件验证

> ID：12835317
> 
> 赞同：0
> 
> 时间：2012-10-11T08:30:31.437
> 
> 标签：javascript, html, knockout.js, kendo-ui

我正在使用带有 knockoutjs 的 kendoui 小部件作为数据源。我有一个将数据绑定到`StartClientFromWebEnabled`可观察变量的复选框。`StartClientFromWebEnabled`仅当复选框 ic 选中（为真）时，输入文本框才可见。输入具有必需的属性。我希望仅在选中复选框时触发所需的验证。

这是我的html：

```
<table>
    <tr>
        <td><label for="startClientFromWebEnabled">Client Launch From Web:</label></td>
        <td><input type="checkbox" id="startClientFromWebEnabled" name="startClientFromWebEnabled" data-bind="checked: StartClientFromWebEnabled, enable: IsEditable" onchange="startClientFromWebToggleRequiredAttribute()" /></td>
    </tr>
    <tr data-bind="visible: StartClientFromWebEnabled">
        <td><label for="mimeType">Protocol:</label></td>
        <td>
            <input  id="mimeType" name="mimeType" data-bind= "value: MimeType, enable: IsEditable" />
            <span class="k-invalid-msg" data-for="mimeType"></span>
        </td>
    </tr>
</table> 
```

我尝试了一些场景，包括`onChange event`使用以下 javascript 函数添加和删除所需属性的复选框设置：

```
startClientFromWebToggleRequiredAttribute = function () {
    var checkbox = document.getElementById("startClientFromWebEnabled");
    var mimeType = document.getElementById("mimeType");
    if (checkbox.checked) {
        mimeType.setAttribute("required", "required");
    }
    else {
        mimeType.removeAttribute("required");
    }
} 
```

问题是我的应用程序中的许多依赖属性都需要此功能，我的选择是使用一些参数使此函数通用，并使用相应的参数值从 html 调用它，如下所示：

```
toggleRequiredAttribute = function (checkboxElement, inputElement1, inputElement2 ... ) {
    var checkbox = document.getElementById(checkboxElement);
    var inputElement1 = document.getElementById(inputElement1);
    if (checkbox.checked) {
        inputElement1.setAttribute("required", "required");
    }
    else {
        inputElement1.removeAttribute("required");
    }
}

<input type="checkbox" id="startClientFromWebEnabled" name="startClientFromWebEnabled" data-bind="checked: StartClientFromWebEnabled, enable: IsEditable" onchange="toggleRequiredAttribute('startClientFromWebEnable', 'mimeType')" /> 
```

我真的不喜欢这种情况。我想知道 kendoui 中是否有类似条件验证的东西，只有在满足某些条件时才会触发。也欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:54:43.290

我有同样的问题，我创建了一个自定义验证器，它也处理服务器端验证，这个例子不是 100% 完成，但所有验证都在工作，这验证了取决于复选框状态的字符串长度，它还使用资源来处理错误message 等需要稍作修改，它使用 kendo ui 验证客户端，让我知道这是否有用：

模型属性：

```
public bool ValidateTextField { get; set; }

[CustomValidator("ValidateTextField", 6, ErrorMessageResourceType=typeof(Errors),ErrorMessageResourceName="STRINGLENGTH_ERROR")]
public string TextField{ get; set; } 
```

自定义验证器：

```
[AttributeUsage(AttributeTargets.Field|AttributeTargets.Property, AllowMultiple=false, Inherited=true)]
public class CustomValidatorAttribute : ValidationAttribute, IClientValidatable {

    private const string defaultErrorMessage="Error here.";
    private string otherProperty;
    private int min;

    public CustomValidatorAttribute(string otherProperty, int min) : base(defaultErrorMessage) {
        if(string.IsNullOrEmpty(otherProperty)) {
            throw new ArgumentNullException("otherProperty");
        }

        this.otherProperty=otherProperty;
        this.min=min;
        this.ErrorMessage = MyResources.Errors.STRINGLENGTH_ERROR;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext) {

        bool valid = true;
        var curProperty = validationContext.ObjectInstance.GetType().
                GetProperty(otherProperty);
        var curPropertyValue = curProperty.GetValue
(validationContext.ObjectInstance, null);
        if(Convert.ToBoolean(curPropertyValue)) {

            string str=value.ToString();
            valid =  str.Length >= min;
            if(!valid) { return new ValidationResult(MyResources.Errors.STRINGLENGTH_ERROR); }
        }
        return ValidationResult.Success;
    }

    #region IClientValidatable Members

    public System.Collections.Generic.IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context) {
        var rule=new ModelClientValidationRule {
            ErrorMessage = this.ErrorMessage,
            ValidationType="checkboxdependantvalidator"
        };

        rule.ValidationParameters["checkboxid"]=otherProperty;
        rule.ValidationParameters["min"]=min;

        yield return rule;
    }
    public override string FormatErrorMessage(string name) {
        return String.Format(CultureInfo.CurrentUICulture, ErrorMessageString,
            name);
    }

} 
```

Javascript：

```
(function ($, kendo) {
    $.extend(true, kendo.ui.validator, {
        rules: { // custom rules
            customtextvalidator: function (input, params) {
                //check for the rule attribute 
                if (input.filter("[data-val-checkboxdependantvalidator]").length) {
                    //get serialized params 
                    var checkBox = "#" + input.data("val-checkboxdependantvalidator-checkboxid");
                    var min = input.data("val-checkboxdependantvalidator-min");
                    var val = input.val();

                    if ($(checkBox).is(':checked')) {
                        if (val.length < min) {
                            return false;
                        }
                    }        
                }
                return true;
            }
        },
        messages: { //custom rules messages
            customtextvalidator: function (input) {
                // return the message text
                return input.attr("data-val-checkboxdependantvalidator");
            }
        }
    });
})(jQuery, kendo); 
```

有用的帖子：

[http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3](http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3)

[http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx](http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx)

# bash - BASH 脚本 - 从没有代表的目录中的所有文件中打印排序内容

> ID：12835319
> 
> 赞同：2
> 
> 时间：2012-10-11T08:30:34.323
> 
> 标签：bash, sorting, printing

在当前目录中有名称格式为“gradesXXX”（其中 XXX 是课程编号）的文件，如下所示：

```
ID           GRADE         (this line is not contained in the files)
123456789    56
213495873    84
098342362    77
.            .
.            .
.            . 
```

我想编写一个 BASH 脚本，打印所有等级高于某个数字的 ID，这是该脚本的第一个参数。

要求是一个 ID 最多只能打印一次，并且不使用中间文件。我被引导使用两个脚本 - 第一个长度为一行，第二个长度最多为六行（不包括“#！”行）。

我对这个很迷茫，所以任何建议都将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:52:31.017

我正在寻找的答案是

```
// internal script
#!/bin/bash
while read line; do
    line_split=( $line )
    if (( ${line_split[1]} > $1 )); then
        echo ${line_split[0]}
    fi
done

// external script
#!/bin/bash
cat grades* | sort -r -n -k 1 | internalScript $1 | cut -f1 -d" " | uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:37:15.007

好的，一个简单的解决方案。

```
cat grades[0-9][0-9][0-9] | sort -nurk 2 | while read ID GRADE ; do if [ $GRADE -lt 60 ] ; then break ; fi ; echo $ID ; done | sort -u 
```

我不确定为什么需要两个脚本。全部在一个脚本中：

```
#!/bin/bash

threshold=$1
cat grades[0-9][0-9][0-9] | sort -nurk 2 | while read ID GRADE ; do if [ $GRADE -lt $threshold ] ; then break ; fi ; echo $ID ; done | sort -u 
```

我们首先对所有成绩文件进行分类，按成绩按相反顺序对它们进行排序。如果等级低于阈值，while 循环将中断，因此只有等级较高的行才能打印其 ID。`sort -u`确保每个 ID 只发送一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:29:56.473

另一个解决方案：

```
cat grades[0-9][0-9][0-9] | awk -v MAX=70 '{ if ($2 > MAX) foo[$1]=1 }END{for (id in foo) print id }' 
```

`| sort -n`如果您希望按排序顺序添加 ID，请在此之后附加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:54:32.363

您可以使用`awk`：

```
awk '{ if ($2 > 70) print $1 }' grades777 
```

它打印秒列大于 70 的每一行的第一列。如果需要更改阈值：

```
N=71
awk '{ if ($2 > '$N') print $1 }' grades777 
```

这是[在 AWK 中传递 shell 变量](http://chihungchan.blogspot.com.br/2009/03/four-ways-to-pass-shell-variables-in.html)`'`所必需的。要处理当前目录中的所有文件并删除重复的行：`grade???`

```
awk '{ if ($2 > '$N') print $1 }' grades??? | sort -u 
```

一个简单的单线解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:38:00.573

在纯`bash`：

```
N=60
for file in /path/*; do
    while read id grade; do ((grade > N)) && echo "$id"; done < "$file"
done 
```

* * *

**输出**

```
213495873
098342362 
```

# python - Distcp 与 Hadoop 流式作业

> ID：12835329
> 
> 赞同：1
> 
> 时间：2012-10-11T08:30:56.180
> 
> 标签：python, hadoop, hadoop-streaming

我将把要做的工作大致分为两部分：

1.  我有大量数据（大约 1 TB，分为数百个文件），我通过 distcp 从 S3 复制到 HDFS

2.  这些数据将由 hadoop 流式作业（一个简单的映射器和减速器，用 python 编写）处理

现在，我必须等到所有数据都被复制到`HDFS`，然后才能开始我的实际工作。问题来了：考虑到它`DISTCP`本身就是一个 map-reduce 作业，有没有办法可以“流线化”这两个作业，即第二个作业是否可以开始处理已经复制的数据（例如`distcp`已经复制一些文件，第二份工作在技术上已经可以开始了）？

我希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:38:10.297

您可以使用 S3InputFormat (https://github.com/ATLANTBH/emr-s3-io) 将数据直接读取给您的映射器。但请注意，如果作业失败，您将重新下载所有数据。所以，我建议在处理之前下载所有数据。如果您不需要一次处理整个数据，您可以在 distcp 启动后启动 mapreduce。但是您应该编写自己的 FileInputFormat 扩展名，它将记录某处（我想在输入目录中）处理了哪些文件，并在每次调用时过滤掉已处理的文件（在方法 getSplits() 中）并仅处理未处理的文件。

# java - 我需要在这里重建 Java 吗？

> ID：12835335
> 
> 赞同：1
> 
> 时间：2012-10-11T08:31:06.350
> 
> 标签：java, oop, build

我有一个`ClassA`正在项目的各个领域使用我的许多组件和库。
现在我需要为这个类添加一个额外的成员，但由于其他区域不需要/使用它，所以它不适合`extend`这个类。
如果我将成员添加到`ClassA`而不是`extending`我会有任何问题吗？一切都需要重建吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:39:12.653

添加新成员可保留二进制兼容性，另请参见[第 13 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)。Java 语言规范的二进制兼容性。

显然，您需要重建修改后的类，而不是使用修改后的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:35:10.450

除非您现有的 ClassA 和其他班级之间的联系和互动 BREAK，否则应该没有问题。但是，如果您更改其他类使用的方法的签名，则在定位旧版本的方法时可能会出现运行时错误，因为它不再存在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T08:37:24.003

如果您更改 A 级，显然需要进行重建。为了尽量减少影响，您可以扩展 A 类并将子类用于您的工作。其他组件和库将继续使用您的 A 类，而您的代码现在应该引用具有添加成员的子类。

同样，这取决于您如何定义对象。

# jquery - 如何使用 jQuery 允许数字（0-9）和十进制值文本框？

> ID：12835341
> 
> 赞同：19
> 
> 时间：2012-10-11T08:31:36.150
> 
> 标签：jquery

我写了几行只接受数字字符，但我的脚本不起作用。当我输入任何字母时，它会被插入到我不想要的文本框中。我希望该文本框应该只接受数值和“。” 小数点。这是我的脚本。告诉我那里有什么问题。

```
 $().ready(function () {
        $("input[id*='txtQty']").keyup(function (event) {
            var flag = false;

            if (event.shiftKey == true) {
                event.preventDefault();
            }
            // Allow Only: keyboard 0-9, numpad 0-9, backspace, tab, left arrow, right arrow, delete
            if ((event.keyCode >= 48 && event.keyCode <= 57) || (event.keyCode >= 96 && event.keyCode <= 105) || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 46) {
                // Allow normal operation
                flag = true;
            } else {
                // Prevent the rest
                event.preventDefault();
            }

            if (flag) {

            }
        });
    }); 
```

如果可能的话，请给我脚本，这将使我的文本框只有数字和十进制数字。谢谢

这是我的完整脚本。问题是它正在使用点**“。”** 我不想要。

```
 $().ready(function () {
        $("input[id*='txtQty']").keydown(function (event) {
            var flag = true;

            if (event.shiftKey == true) {
                event.preventDefault();
                flag = false;
            }

            if ((event.keyCode >= 48 && event.keyCode <= 57) || (event.keyCode >= 96 && event.keyCode <= 105) || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

            } else {
                event.preventDefault();
                flag = false;
            }

            if (flag) {
                if (jQuery.trim(this.value) != "") {
                    if (IsNumeric(jQuery.trim(this.value)) == true) {
                        var Symbol = $("span[id*='lblPrice']").text().trim().substring(1, 0);
                        var oldprice = $("input[id*='txtHiddenPrice']").val();
                        var newprice = Math.round((oldprice * this.value), 2);
                        $("span[id*='lblPrice']").text(Symbol + newprice);
                        UpdateCart($(this).closest('tr').find("input[id*='txtItemId']").val(), $(this).closest('tr').find("input[id*='txtProductId']").val(), this.value);
                    }
                }
            }
        });
    }); 
```

所以告诉我我需要在我的代码中更改什么，因此它不应该采用十进制值。另一个重要的事情是我将 keydown() 事件附加到通配符系统，因为我的页面可能有许多名称结尾的文本框，如**txtQty**。

```
 $("input[id*='txtQty']").keyup(function (event) { 
```

所以请帮助我。谢谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-11T08:40:30.730

你不能在活动中使用`e.preventDefault()`它。`keyup`将其更改为`keydown`.

```
$(function () {
    $("input[id*='txtQty']").keydown(function (event) {

        if (event.shiftKey == true) {
            event.preventDefault();
        }

        if ((event.keyCode >= 48 && event.keyCode <= 57) || 
            (event.keyCode >= 96 && event.keyCode <= 105) || 
            event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 37 ||
            event.keyCode == 39 || event.keyCode == 46 || event.keyCode == 190) {

        } else {
            event.preventDefault();
        }

        if($(this).val().indexOf('.') !== -1 && event.keyCode == 190)
            event.preventDefault(); 
        //if a decimal has been added, disable the "."-button

    });
});​ 
```

## [小提琴](http://jsfiddle.net/CHB4s/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-11T08:41:06.403

您可以在键入时删除非数字字符。

```
$("#txtQty").keyup(function() {
    var $this = $(this);
    $this.val($this.val().replace(/[^\d.]/g, ''));        
});​ 
```

***[演示。](http://jsfiddle.net/ecDmn/1/)***

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-07T11:48:27.450

创建一个**仅限数字的**类并将其添加到您的元素中

这将接受：
- 退格
- 删除
- 数字
- 一位小数

```
$(".numbers-only").keypress(function (e) {
    if(e.which == 46){
        if($(this).val().indexOf('.') != -1) {
            return false;
        }
    }

    if (e.which != 8 && e.which != 0 && e.which != 46 && (e.which < 48 || e.which > 57)) {
        return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-20T08:00:03.560

防止非数字数字

```
 $(".number").on('keypress', function (e) {
            return e.metaKey || e.which <= 0 || e.which == 8 || e.which == 46 || /[0-9]/.test(String.fromCharCode(e.which));
            //      cmd/ctrl ||  arrow keys  ||   delete key ||   dot key     || numbers
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-19T08:15:28.447

此解决方案仅适用于您不包含十进制数或仅包含 0-9 的数字

```
$("#number").keypress(function( event ){
    var key = event.which;

    if( ! ( key >= 48 && key <= 57 ) )
        event.preventDefault();
}); 
```

您可以在此处查看运行示例[http://jsfiddle.net/yghD3/6/](http://jsfiddle.net/yghD3/6/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-08T07:17:51.973

```
$('.number').keypress(function(event) {
  if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 || event.which > 57)) {
    event.preventDefault();
  }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-26T17:58:50.933

我的解决方案接受复制和粘贴并保存插入符号的位置。它用于产品成本，因此仅允许正十进制值。可以很容易地重构以允许负数或仅整数位。

```
$(function () {
    $("input.only-positive-decimal").bind("change keyup input", function () {
            var position = this.selectionStart - 1;
                //remove all but number and .
                var fixed = this.value.replace(/[^0-9\.]/g, '');
                if (fixed.charAt(0) === '.')                  //can't start with .
                    fixed = fixed.slice(1);

                var pos = fixed.indexOf(".") + 1;
                if (pos >= 0)               //avoid more than one .
                    fixed = fixed.substr(0, pos) + fixed.slice(pos).replace('.', '');

                if (this.value !== fixed) {
                    this.value = fixed;
                    this.selectionStart = position;
                    this.selectionEnd = position;
                }
    });
}); 
```

放到html页面上：

```
<input type="text" class="only-positive-decimal" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-11T08:37:49.293

你可以试试[http://www.texotela.co.uk/code/jquery/numeric/](http://www.texotela.co.uk/code/jquery/numeric/)

[该线程](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)提到了相同的插件以及您可以尝试的许多其他事情。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-01T04:24:06.430

```
//This will let you enter numbers only and the decimal point ones.

$(window).load(function(){
$('.number').keypress(function(event) {
  if(event.which < 46 || event.which >= 58 || event.which == 47) {
    event.preventDefault();
  }

  if(event.which == 46 && $(this).val().indexOf('.') != -1) {
    this.value = '' ;
  }  
});
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-29T14:18:09.433

它将只允许*1 到 9 个数字*和*小数*。如果正在插入其他字符，它将替换这些数字。

```
<script>
  $("input[id*='txtQty']").keydown(function () {
    var txtQty = $(this).val().replace(/[^0-9\.]/g,'');
    $(this).val(txtQty);
  });
</script> 
```

检查[小提琴](https://jsfiddle.net/Danish_Enam/da90nt3c/2/)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-15T12:14:12.283

试试这个代码

```
$('#from-amount1').keypress(function(event) {
//alert(event.which == 8);
//alert(event.which);
    if((event.which > 47 && event.which < 58) || (event.which == 46 || event.which == 8))
    {
    	 // your condition
    }
    else
    {
    event.preventDefault();
    }
}).on('paste', function(event) {
    event.preventDefault();
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<input type="text" value="" id="from-amount1"/>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-20T07:43:38.520

```
element.keypress(function (e) { 
    var charCode = (e.which) ? e.which : event.keyCode;
    var dec=0;

    dec = (this.value.match(/[.]/g) || [] ).length;

    if(dec===1 && e.key=='.')
        return false;

    if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode!=46)
        return false;

}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-14T14:31:45.300

1 允许第一个字符点 2 拒绝多个点 3 允许两个点键

在您的 HTML 中

```
<input class="number" type="number" log="" id="yourId" log="" />

$('#yourId').keypress(KeyPressOnlyDecimals);

function KeyPressOnlyDecimals (event) {

   if (event.which != 13)
        {
                let cId = $(window.getSelection().anchorNode).find('input')[0].id;
                let tId = $(event.currentTarget).attr('id');
                let sel = window.getSelection().toString();

                if (((event.which != 46  ) || ($(this).val().indexOf('.') != -1  && ($(event.currentTarget).val().length > 0 &&  ((cId != tId) || (cId === tId && (sel == null || sel.length == 0)))))) && (event.which < 48 || event.which > 57)) {
                    event.preventDefault();
                }
                $(event.currentTarget).on('paste', function(event) {
                    event.preventDefault();
                });
                var currentVal = $(event.currentTarget).val();

                let log =   $(event.currentTarget).attr('log');
                var count = log.split('.').length;
                if (count == 2 && event.which == 46 && sel != currentVal)
                {
                    event.preventDefault();
                }

                if (count >= 2)
                {

                    if (cId === tId && sel.length > 0)
                    {
                        var replaced = currentVal.replace(new RegExp(sel, 'g'), event.key);

                    }

                    if (count > 2 && $(event.currentTarget).val().length > 0 &&  ((cId != tId) || (cId === tId && (sel == null  || sel.length == 0) ))) 
                    {
                        event.preventDefault();
                    }

                }
                else
                {
                    if(event.which == 46)
                        $(event.currentTarget).attr('log',event.key);
                }

                console.log($(event.currentTarget).attr('log'));

        }
  } 
```

# javascript - 如何使用javascript检查java小程序是否完全加载

> ID：12835344
> 
> 赞同：0
> 
> 时间：2012-10-11T08:31:52.137
> 
> 标签：javascript, jquery, applet

> **可能重复：**
> [是否可以注册一个在 java 小程序完全加载时触发的 javascript 事件？](https://stackoverflow.com/questions/4407300/is-it-possible-to-register-a-javascript-event-that-triggers-when-java-applet-is)

我的页面上有 java 小程序。

我需要检测 java 小程序是否完全加载或不使用`javascript/ jquery`.

我试过了，`applet.isActive()`但没有给出正确的结果。

# mysql - MySQL COUNT 并合并重复记录

> ID：12835346
> 
> 赞同：0
> 
> 时间：2012-10-11T08:31:53.013
> 
> 标签：mysql, sql, count

我正在尝试运行一个查询来计算每个用户的订单数量。不幸的是，系统最初设置得并不好，并且有许多重复的客户记录（使用相同的电子邮件地址）。

我目前有以下简单查询：

```
SELECT 
u.id,
u.name
u.email,
COUNT(o.id) AS num_orders
FROM users u
INNER JOIN orders o
ON o.user_id = u.id
GROUP BY u.id
ORDER BY u.id 
```

我可以做些什么来合并重复用户的计数吗？

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:33:28.487

```
SELECT  
    u.email, 
    COUNT(o.id) AS num_orders 
FROM users u 
    INNER JOIN orders o 
        ON o.user_id = u.id 
GROUP BY u.email
ORDER BY u.email 
```

顺便说一句，虽然 mysql 允许您`GROUP BY u.id`在查询中执行和省略其他非聚合字段，但它既不好也不标准 SQL，应该避免。

# sql-server-2008 - 如何使用两个不同的表获得两个不同存储过程的平均值？

> ID：12835347
> 
> 赞同：1
> 
> 时间：2012-10-11T08:32:02.697
> 
> 标签：sql-server-2008

我有一个存储过程，结果如下：

```
Aaa Bbb Ccc Ddd Eee Average
2   7   5   4   5   5 
```

我有另一个存储过程，结果如下：

```
Fff Ggg Hhh Iii Jjj Kkk Average
28  6   7   5   6   6   6 
```

现在我想要上面两个平均列的平均值！我能做些什么？请注意，这两个存储过程是不同表的结果！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:42:14.513

尝试这样的事情：

将两个结果插入临时表并计算临时表的平均值

```
create table #tmp
 (col1 int,col2 int,col3 int,col4 int,col5 int,col6 int,Average int)

insert into #tmp (col1,col2,col3,col4,col5,Average)
exec proc1

insert into #tmp 
exec proc2

select sum(Average)/2.0 from #tmp 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/475ae/1)

**另一种选择**是将两个过程中的平均值变量作为输出参数并将两个过程的输出存储到变量中并计算变量的平均值

# azure - 无法获取移动服务的位置信息 - 错误 400

> ID：12835348
> 
> 赞同：1
> 
> 时间：2012-10-11T08:32:03.743
> 
> 标签：azure

我尝试在此页面上遵循 Scotts 对 Azure 的介绍： [https ://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started/](https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started/)

但是在我打算创建新的移动服务时已经在第 4 点出现了错误。我短暂地看到白色对话框出现，Region 的组合框显示“正在加载...”然后对话框很快消失，我收到以下错误消息。

> 无法获取移动服务的位置信息 - 错误 400 浏览器：5.0（Windows NT 6.2；WOW64）AppleWebKit/537.4（KHTML，如 Gecko）Chrome/22.0.1229.94 Safari/537.4 用户语言：电子邮件：（我的电子邮件）

未说明的用户语言让我有点怀疑。我检查了 Chrome，但指定了语言，所以那里没有错。然后我尝试了 IE 10 并得到了类似的结果。现在实际上检测到用户语言是正确的，这很好，但错误消息仍然相同。

> 无法获取移动服务的位置信息 - 错误 400 浏览器：5.0（兼容；MSIE 10.0；Windows NT 6.2；WOW64；Trident/6.0；.NET4.0E；.NET4.0C；.NET CLR 3.5.30729；.NET CLR 2.0.50727；.NET CLR 3.0.30729；Zune 4.7）用户语言：sv-SE 电子邮件：（我的电子邮件）

我猜这是 Azure 站点预览版的问题。我能做些什么来让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:23:55.183

一些用户似乎遇到了这个问题，据我们所知，这与在您的 Azure 帐户上拥有多个订阅有关，其中一些订阅未启用移动服务。您可以尝试以下方法：

1.  转到[https://manage.windowsazure.com](https://manage.windowsazure.com)
2.  使用您用于移动服务（或任何其他 Azure 服务）的帐户登录
3.  点击顶部栏，您可以看到选项
4.  点击“帐户”（您可能需要再次提供密码）
5.  点击顶部的“预览功能”
6.  为您的每个订阅添加移动服务功能（如果它已经表明您已注册，请再次注册）
7.  等待几分钟，以便添加通过通常的自动化过程

如果这不起作用，您能否给我发邮件至 pbatum@microsoft.com 以便我跟进？

# if-statement - 如果批处理文件中的语句给出错误

> ID：12835350
> 
> 赞同：0
> 
> 时间：2012-10-11T08:32:04.433
> 
> 标签：if-statement, batch-file

批处理脚本中的以下简单步骤给了我错误。它说

```
'else' is not recognized as an internal or external command,
operable program or batch file.
) was unexpected at this time. 
```

有人可以帮忙吗？

```
set var_machine64 = 0

if exist "C:\Program Files (x86)" ( set var_machine64 = 1 )

if !var_machine64! == 1 (
    If exist "C:\Program Files (x86)\Microsoft" (
        echo Microsoft folder not available 
        goto End ) ) 
else (
        If exist "C:\Program Files \Microsoft" (
        echo Microsoft folder not available 
        goto End ) )

:End
Exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:36:55.670

`else`必须在您关闭最后一个块的同一行，即`)`：

```
if !var_machine64! == 1 (
    If exist "C:\Program Files (x86)\Microsoft" (
        echo Microsoft folder not available 
        goto End
    )
) else (
    If exist "C:\Program Files\Microsoft" (
        echo Microsoft folder not available 
        goto End
    )
) 
```

我还冒昧地修复了文件夹名称中的缩进和多余的空格。

这解决了您当前的语法错误问题，但无济于事，因为批处理文件无论如何都无法工作。您不能在`=`in`set`语句周围使用任何空格，否则您将创建一个以空格结尾的变量，其值以 1 开头。所以：

```
set var_machine64=0
if exist "C:\Program Files (x86)" ( set var_machine64=1 ) 
```

会让事情变得更好。另请注意，要使用延迟扩展，您需要`setlocal enabledelayedexpansion`在批处理文件之前或`cmd`以`/v:on`. 我只是猜你没有显示整个文件（这没关系，但考虑到这个简短片段中的错误率，我会说你应该仔细检查其他所有内容）。

随机附注：包含`exit`在批处理文件中并不好，因为当从交互式会话运行时，它会杀死它。如果您只想退出批处理文件（而不是整个命令处理器），请使用`exit /b`or `goto :eof`。

# sql - 使用have子句查找记录

> ID：12835351
> 
> 赞同：4
> 
> 时间：2012-10-11T08:32:06.990
> 
> 标签：sql, database

我想检索所有具有最近修改时间的记录。例如，以这张表为例：

```
|page_url|last_modified|
---------
|abc.com |2010-10-01 10:00:00|
|xyz.com |2010-10-04 12:10:00|
|xyz.com |2010-10-04 12:00:00|
|xyz.com |2010-10-04 10:00:00|
|abc.com |2010-10-01 08:00:00| 
```

输出应包含以下数据：

```
|page_url|last_modified|
---------
|abc.com |2010-10-01 10:00:00|
|xyz.com |2010-10-04 12:10:00| 
```

我曾尝试使用像下面这样的有子句，但对我不起作用:(

```
SELECT page_url, last_modified 
FROM
my_table
HAVING MAX(last_modified); 
```

编辑 1：我的表中有 25 个字段可供使用。但是，我想我不能为所有人申请 group by。现在做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:33:27.160

无需`HAVING`在此使用，仅`GROUP BY`从句。

```
SELECT page_url, MAX(last_modified) 
FROM my_table
GROUP BY page_url 
```

**更新 1**

```
SELECT  a.*
FROM    my_table a
        INNER JOIN
        (
            SELECT page_url, MAX(last_modified) recentDate
            FROM my_table
            GROUP BY page_url
        ) b ON a.page_url = b.page_url AND
                a.last_modified = b.recentDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:34:06.987

尝试使用`group by`and `max()`in`select`语句

```
SELECT page_url, max(last_modified) 
FROM  my_table
group by page_url 
```

更多信息：

*   [通过...分组](http://www.w3schools.com/sql/sql_groupby.asp)
*   [最大限度](http://www.w3schools.com/sql/sql_func_max.asp)
*   [拥有](http://www.w3schools.com/sql/sql_having.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T13:43:13.747

如果您使用的是具有元组功能的 RDBMS，`IN`例如 Postgresql、MySql 和 Oracle。您可以使用以下方法。

因此，假设您已经拥有这样的现有视图：

```
create view page_latest as

SELECT page_url, MAX(last_modified) recentDate
FROM tbl
GROUP BY page_url;

select * from page_latest; 
```

输出...

```
| PAGE_URL |                     RECENTDATE |
---------------------------------------------
|  abc.com | October, 01 2010 10:00:00+0000 |
|  xyz.com | October, 04 2010 12:10:00+0000 | 
```

...基于此数据：

```
| PAGE_URL |                  LAST_MODIFIED |            MESSAGE |
------------------------------------------------------------------
|  abc.com | October, 01 2010 10:00:00+0000 |           no alarm |
|  xyz.com | October, 04 2010 12:10:00+0000 |       no surprises |
|  xyz.com | October, 04 2010 12:00:00+0000 | fake plastic trees |
|  xyz.com | October, 04 2010 10:00:00+0000 |              creep |
|  abc.com | October, 01 2010 08:00:00+0000 |         thom yorke | 
```

您可以通过重新使用上述视图和上述 RDBMS 的元组功能 IN 来找到所有最新消息：[http ://www.sqlfiddle.com/#!2/b8193/2](http://www.sqlfiddle.com/#!2/b8193/2)

```
select * 
from tbl
where (page_url,last_modified) in (select page_url, recentDate from page_latest); 
```

输出：

```
| PAGE_URL |                  LAST_MODIFIED |      MESSAGE |
------------------------------------------------------------
|  abc.com | October, 01 2010 10:00:00+0000 |     no alarm |
|  xyz.com | October, 04 2010 12:10:00+0000 | no surprises | 
```

不仅查询更短，而且更易于阅读。虽然如果您没有视图，您可以在查询中内联“视图”：[http ://www.sqlfiddle.com/#!2/b8193/5](http://www.sqlfiddle.com/#!2/b8193/5)

```
select * 
from tbl
where (page_url,last_modified) in

  (SELECT page_url, MAX(last_modified) recentDate
   FROM tbl
   GROUP BY page_url); 
```

此答案在 Sql Server 中不起作用。只有少数数据库不支持 tuple-capable `IN`，不幸的是 Sql Server 就是其中之一

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:37:23.587

```
SELECT z.page_url,z.last_modified 
FROM (SELECT page_url, MAX(last_modified) 
      FROM my_table 
      GROUP BY page_url) as z 
ORDER BY z.page_url 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:12:32.923

这些怎么样-

```
 SELECT   page_url,last_modified,other field
    FROM my_table
    ORDER BY page_url,last_modified 
```

或者

```
 SELECT  distinct page_url,last_modified,other field
   FROM my_table
   ORDER BY page_url,last_modified 
```

# c - 格式字符串中的空格 (scanf)

> ID：12835360
> 
> 赞同：11
> 
> 时间：2012-10-11T08:32:46.007
> 
> 标签：c, input, whitespace, scanf, stdio

考虑以下代码：

```
#include<stdio.h>
int main() {
    int i=3, j=4;
    scanf("%d c %d",&i,&j);
    printf("%d %d",i,j);
    return 0;
} 
```

如果我必须更改变量的值，如果我给出`2c3`或作为输入`2 c 3`，它就会起作用。`2c 3`如果我希望用户输入与我想要的相同的模式，我`%dc%d`应该`2c3`怎么`2 c 3`做`%d c %d`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T08:44:35.883

**格式字符串中的空格**匹配输入中的 0 个或多个空格字符。

所以`"%d c %d"`期望数字，然后是任意数量的空白字符，然后是字符`c`，然后是任意数量的空白字符，最后是另一个数字。

`"%dc%d"`期望数字, `c`, 数字。

* * *

另请注意，如果您`*`在格式字符串中使用，它会禁止赋值：
`%*c`= 读取 1 个字符，但不要将其分配给任何变量

因此，`"%d%*c c%*c %d"`如果您想**强制**用户输入：数字，至少 1 个字符后跟任意数量的空白字符，`c`至少 1 个字符后跟任意数量的空白字符和数字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T09:56:11.990

如果您想接受`1c2`但不接受`1 c 2`，请使用不带空格的模式：

```
scanf("%dc%d", &x, &y); 
```

如果您想接受`1c2`和`1 c 2`（以及`1 \t \t c \t 2`等），请使用带有空格的模式：

```
scanf("%d c %d", &x, &y); 
```

如果您想接受`1 c 2`但不接受`1c2`，请添加一个包含空格的假字符串：

```
scanf("%d%*[ \t]c%*[ \t]%d", &x, &y); 
```

这里的格式字符串`%[ \t]`意味着“读取包含任意数量的空格和制表符的字符串”；但是使用附加的`*`，它变成“*期望*一个包含任意数量的空格和制表符的字符串；然后*丢弃它*”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:49:08.710

我想我会将 scanf 结果读入不同的变量（即不重用`i`和`j`）作为`"%d%s%d"`. 然后检查您从 %s 获得的字符串，如果它符合您的要求，请使用其他变量覆盖 i 和 j。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:52:22.317

首先强制进行字符串解析：

```
char a[100], b[100];
scanf("%99s c %99s", a, b); 
```

然后使用 sscanf() 将字符串转换为 int。

# rotation - Three.js - 将自定义几何移动到原点

> ID：12835361
> 
> 赞同：9
> 
> 时间：2012-10-11T08:32:51.607
> 
> 标签：rotation, three.js

我有一些从 STEP 文件转换中获得的自定义几何图形，我使用鼠标旋转它们。它们围绕场景的原点旋转，但由于它们远离它，它们似乎在虚拟球体上旋转。如何将它们移动到原点，以使它们看起来不会“浮动”（我的意思是我想将虚拟球体的半径减小到零）。[这是我想移动的例子](http://sygest.agintersys.com/testing.html)。我尝试将他们的位置设置为 (0, 0, 0) 做：

```
object.position.x = 0;
object.position.y = 0;
object.position.z = 0; 
```

但它没有用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-11T08:53:02.700

此问题的典型解决方案是在创建几何图形后立即对其进行平移。您可以通过将平移矩阵应用于几何体来做到这一点，如下所示：

```
geometry.applyMatrix( new THREE.Matrix4().makeTranslation( distX, distY, distZ ) ); 
```

编辑：你可以简单地这样做，而不是：

```
geometry.translate( distX, distY, distZ ); // three.js r.72 
```

该功能`geometry.computeBoundingBox()`可能有助于您确定要翻译的数量。

但是，我在您的情况下看到，您有多个几何形状，因此它有点复杂，但可行。您需要将每个几何图形平移相同的量。

编辑

提示：不要将每个对象添加到场景中，而是创建父对象，将其添加到场景，然后将对象添加到父对象。

```
var parent;

parent = new THREE.Object3D();
scene.add( parent );

parent.add( object1 );
parent.add( object2 );
// and so on... 
```

然后在您的渲染函数中，只需旋转父对象，而不是单个对象。

# iphone - 音乐停止通知

> ID：12835362
> 
> 赞同：0
> 
> 时间：2012-10-11T08:32:52.903
> 
> 标签：iphone, ios, cocoa-touch, mpmovieplayercontroller

我正在使用 MediaPlayer 框架在我的 iPhone 应用程序中播放视频。我正在使用 Mediaplayer 框架中可用的通知。但是每当我的音频/音乐停止时，我都不会收到任何通知。

所以我想知道在 iOS 中，是否有任何其他框架可用于在音乐停止时获得通知。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:36:21.967

添加这个观察者：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackState:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:self.ctl];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.ctl]; 
```

选择器将是：

```
- (void)moviePlayBackState:(NSNotification*)notification {
  //called when music stopped or paused
}

- (void)moviePlayBackDidFinish:(NSNotification*)notification {
  //called when music finished
} 
```

# symfony - Doctrine 的命名空间别名

> ID：12835366
> 
> 赞同：4
> 
> 时间：2012-10-11T08:32:57.160
> 
> 标签：symfony, namespaces, doctrine

我开始负责一个大型的遗留 Web 应用程序，我正在尝试将它慢慢重构到 Symfony2 框架中。我做的第一件事就是把 Doctrine 包括进来。

我在 Composer 的帮助下安装了 Doctrine 并为它设置了一个引导文件。我的实体，为了避免未来的复杂化，已经遵循命名空间方案`Company\BundleName\Entity\Object`。以下作品：

```
$em->getRepository('Company\\BundleName\\Entity\\Object')
   ->find($id)
; 
```

我找不到任何关于如何像 Symfony2 那样告知 Doctrine 命名空间别名的参考资料，所以我可以写

```
$em->getRepository('CompanyBundleName:Object')
   ->find($id)
; 
```

反而。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-13T11:50:02.677

现在有一个更简单的方法：

```
$config = Setup::createAnnotationMetadataConfiguration(...);
$config->addEntityNamespace('CompanyBundleName', 'Company\BundleName\Entity'); 
```

会做你想做的。我花了几个小时寻找这个！它不在我能找到的任何文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:50:17.923

这个功能是由 DoctrineBridge 包在 Symfony2 中设置的，特别是[getMappingDriverBundleConfigDefaults 函数](https://github.com/symfony/DoctrineBridge/blob/master/DependencyInjection/AbstractDoctrineExtension.php#L166)。

如果你想在没有 Symfony2 的情况下反映这个功能，你需要扩展 Doctrine 实体管理器并在 getRepository 函数中自己生成前缀。它不是教义系统的一部分。

# ruby-on-rails - 为什么私有辅助方法仍然可以在视图中访问？

> ID：12835367
> 
> 赞同：18
> 
> 时间：2012-10-11T08:32:57.980
> 
> 标签：ruby-on-rails, ruby, private, helper

只是另一个“为什么会这样”的问题：我注意到仍然可以在视图中访问私有辅助方法。为什么？有没有办法防止这种情况（例如，当有只能从另一个助手中调用的助手方法时）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-11T09:04:16.310

助手是[混入](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html#S2)视图的模块。这意味着助手中的公共、受保护和私有方法成为视图上的公共、受保护和私有方法。

我认为您实际上不能从视图中隐藏辅助方法。你需要做一些事情，比如有一个你在助手中实例化的助手类，然后将调用委托给它 - 听起来它可能会很快变得混乱。:)

# java - Java JFreeChart 类别步骤图水平（图像到 explane）

> ID：12835369
> 
> 赞同：3
> 
> 时间：2012-10-11T08:33:14.277
> 
> 标签：java, charts, jfreechart, categories

我需要以下类型的图表：
它应该是一个“阶梯式”折线图，垂直轴上有类别，如下所示：

![这就是它的样子](../Images/8be914e2f0cde103511fe517ddb2ecdd.png)

我找到了这个类别步骤图的例子，但它的方向不适合我的目的。

[http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/CategoryStepRenderer.html](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/CategoryStepRenderer.html)

到目前为止我所做的就是这样，但是正如您所看到的，红线不适合图表的方向（应该是水平的）：

![当前状态](../Images/189e9347e3db4376e83793489f9d3972.png)

对应的代码：

```
 DefaultCategoryDataset ds = new DefaultCategoryDataset(); 

// create dataset

    for (int k = 0; k < ffCount; k++) {
                  StateSignal ss1 = (StateSignal) this.ffDSet.getFframes().get(k).getSignals().get(i);
                  ds.setValue((double) k + 1, ss1.getName(), ss1.getStates().get(0).getStatus());

     }
    CategoryStepRenderer categorysteprenderer = new CategoryStepRenderer(false);
    categorysteprenderer.setBaseToolTipGenerator(new StandardCategoryToolTipGenerator());
    CategoryAxis categoryaxis = new CategoryAxis("Category");
    NumberAxis numberaxis = new NumberAxis("Value");
    CategoryPlot categoryplot = new CategoryPlot(ds, categoryaxis, numberaxis, categorysteprenderer);
    categoryplot.setRangePannable(true);
    categoryplot.setOrientation(PlotOrientation.HORIZONTAL);
    chart = new JFreeChart("test", null, categoryplot, true); 
```

我不让它工作。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T12:07:48.593

看起来您需要使用带有 a`XYStepRenderer`和 a的标准 XYLineChart`SymbolAxis`来替换默认的 Range Axis 而不是 a`CategoryStepRenderer`和水平绘图方向

如果您将状态 A 和 B 与数值 1 和 2 相关联，您可以创建如下图表：

![在此处输入图像描述](../Images/9d26eb3b22100a38253c5cb69e3b5fc4.png)

使用这个`XYStepRenderer`

```
 XYStepRenderer renderer = new XYStepRenderer();
  renderer.setBaseShapesVisible(true);
  renderer.setSeriesStroke(0, new BasicStroke(2.0f));
  renderer.setSeriesStroke(1, new BasicStroke(2.0f));
  renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator());
  renderer.setDefaultEntityRadius(6);
  plot.setRenderer(renderer); 
```

和一个`Symbol Axis`

```
 String[] grade =  new String[3];
  grade[0] = "";
  grade[1] = "Status A";
  grade[2] = "Status B";
  SymbolAxis rangeAxis = new SymbolAxis("", grade);
  rangeAxis.setTickUnit(new NumberTickUnit(1));
  rangeAxis.setRange(0,3);
  plot.setRangeAxis(rangeAxis); 
```

在此示例`SymbolAxis`中，为 Axis 中的每个值提供了一个替代标签

# android - 在Crystal Report中生成的android中查看PDF

> ID：12835374
> 
> 赞同：0
> 
> 时间：2012-10-11T08:33:21.577
> 
> 标签：android

我有一个在 Crystal Report 版本 13.0.0.99 中生成的 PDF 文件，它生成了版本 1.7 的 Pdf。但是所有其他不是由 Crystal Report 生成的 PDF 都可以在我的应用程序中读取。此链接将获取我使用 Crystal Report 创建的 PDF 文件。

[http://www.mediafire.com/?d9b444vx0102vea](http://www.mediafire.com/?d9b444vx0102vea)

当我在android中查看这个pdf时，我得到了输出

[http://www.mediafire.com/view/?v0wzlqzhzqtiswb](http://www.mediafire.com/view/?v0wzlqzhzqtiswb)

我应该怎么做才能在我的应用程序中看到这个 pdf 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:40:35.243

在stackoverflow上有很多用于打开/编辑pdf的资源（从你的问题中不确定）

> 1.) 使用意图打开 pdf - 它将使用已安装的现有 pdf 查看器打开
> 
> 2.) 看看
> 
> [适用于 Android 的 PDF 库 - PDFBox？](https://stackoverflow.com/questions/5952626/pdf-library-for-android-pdfbox/5953194#5953194)
> 
> [Android PDF 渲染](https://stackoverflow.com/questions/7087454/android-pdf-rendering)

对于开源库、商业库等，从开发人员的角度来看，基本上 pdf 和 android 不能很好地结合在一起

# joomla2.5 - Joomla 中的常量名称格式

> ID：12835378
> 
> 赞同：0
> 
> 时间：2012-10-11T08:33:43.307
> 
> 标签：joomla2.5

```
<?xml version="1.0" encoding="utf-8"?>
<metadata>
        <layout title="COM_HELLOWORLD_HELLOWORLD_VIEW_DEFAULT_TITLE">
                <message>COM_HELLOWORLD_HELLOWORLD_VIEW_DEFAULT_DESC</message>
        </layout>
        <fields name="request">
                <fieldset name="request">
                        <field
                                name="id"
                                type="list"
                                label="COM_HELLOWORLD_HELLOWORLD_FIELD_GREETING_LABEL"
                                description="COM_HELLOWORLD_HELLOWORLD_FIELD_GREETING_DESC"
                                default="1"
                        >
                                <option value="1">Hello World!</option>
                                <option value="2">Good bye World!</option>
                        </field>
                </fieldset>
        </fields>
</metadata> 
```

是否有必要以它的风格调用常量（因为我现在 joomla 正在使用模式观察器）或者我可以简单地调用它`COM_HELLOWORLD_HELLO`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:23:30.083

您所指的常数是语言常数。这些用于不同的语言文件以提供多种语言。

该样式纯粹是一种为确保这些语言字符串易于使用而创建的格式。

因此，您可以随意调用常量 - 显然没有空格！

# wso2 - wso2 carbon 4.0 聚类说明

> ID：12835379
> 
> 赞同：0
> 
> 时间：2012-10-11T08:33:44.087
> 
> 标签：wso2, wso2carbon

此[链接](http://wso2.org/library/articles/introduction-wso2-carbon-clustering)上的说明是否适用于在 carbon 4.0 版上设置集群？这篇文章已经很老了（2009 年），从那时起，carbon 已经发布了一个主要版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:51:13.790

Carbon 4.0.0 中的部署模型发生了重大变化。这篇[博](http://charithaka.blogspot.com/2012/09/setting-up-minimum-deployment-of-wso2.html)文提供了使用基于 Carbon 4.0.0 的产品设置最小集群的信息。

# objective-c - 当应用程序在后台运行时以编程方式更改 iphone 锁屏

> ID：12835380
> 
> 赞同：2
> 
> 时间：2012-10-11T08:33:48.207
> 
> 标签：objective-c, ios, background-image, homescreen, lockscreen

我正在开发一个 iphone 应用程序，当应用程序在后台运行时，我必须以编程方式更改锁屏图像。我有很多东西说这是不可能的，但是有一个应用程序可以解决这个问题，请让我知道如何实现这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:04:49.277

更改锁屏图像的唯一方法是在播放音频时。Police Scanner+ 确实会播放音频，因此可以设置图像。这仅适用于 iOS 5+，并且是这样完成的。

```
- (void)setupNowPlayingInfoCenter:(MPMediaItem *)currentSong
{
    NSString *ver = [[UIDevice currentDevice] systemVersion];
    CGFloat version = 4.0;
    if ([ver length] >= 3)
    {
        version = [[ver substringToIndex:3] floatValue];
    }

    if (version >= 5.0)
    {
        MPMediaItemArtwork *artwork = [currentSong valueForProperty:MPMediaItemPropertyArtwork];

        MPNowPlayingInfoCenter *infoCenter = [MPNowPlayingInfoCenter defaultCenter];

        if (currentSong == nil)
        {
            infoCenter.nowPlayingInfo = nil;
            return;
        }

        infoCenter.nowPlayingInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                [currentSong valueForKey:MPMediaItemPropertyTitle], MPMediaItemPropertyTitle,
                [currentSong valueForKey:MPMediaItemPropertyArtist], MPMediaItemPropertyArtist,
                [currentSong valueForKey:MPMediaItemPropertyAlbumTitle], MPMediaItemPropertyAlbumTitle,
                [currentSong valueForKey:MPMediaItemPropertyAlbumTrackCount], MPMediaItemPropertyAlbumTrackCount,
                [currentSong valueForKey:MPMediaItemPropertyAlbumTrackNumber], MPMediaItemPropertyAlbumTrackNumber,
                artwork, MPMediaItemPropertyArtwork,
                [currentSong valueForKey:MPMediaItemPropertyComposer], MPMediaItemPropertyComposer,
                [currentSong valueForKey:MPMediaItemPropertyDiscCount], MPMediaItemPropertyDiscCount,
                [currentSong valueForKey:MPMediaItemPropertyDiscNumber], MPMediaItemPropertyDiscNumber,
                [currentSong valueForKey:MPMediaItemPropertyGenre], MPMediaItemPropertyGenre,
                [currentSong valueForKey:MPMediaItemPropertyPersistentID], MPMediaItemPropertyPersistentID,
                [currentSong valueForKey:MPMediaItemPropertyPlaybackDuration], MPMediaItemPropertyPlaybackDuration,
                [NSNumber numberWithInt:self.mediaCollection.nowPlayingIndex + 1], MPNowPlayingInfoPropertyPlaybackQueueIndex,
                [NSNumber numberWithInt:[self.mediaCollection count]], MPNowPlayingInfoPropertyPlaybackQueueCount, nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:39:59.523

除非应用程序在越狱的 iDevice 中运行，否则无法实现此效果（这意味着该应用程序无法提交到 App Store）。

# objective-c - NSCache 数据被清除

> ID：12835382
> 
> 赞同：-1
> 
> 时间：2012-10-11T08:34:01.500
> 
> 标签：objective-c

我在 NSCache 中存储一个数组。（我的 NSCache 名称是 aesCache）

```
 #define DEBUG_CACHE 1
 self.aesCache = [[NSCache alloc] init];
 [self.aesCache setDelegate:self]; 
```

在 NSCache 中保存数组

```
 - (void)saveObjects:(NSMutableArray*)savedObj {
            [self saveValue:savedObj key:@"Objects"];
        } 
```

将其保存到 NSCache。

```
 - (void)saveValue:(id)value key:(NSString *)key {
#ifdef DEBUG_CACHE
    NSLog(@"#CACHE_MANAGER: SAVE Object");
    NSLog(@"#CACHE_MANAGER: KEY %@", key);
#endif
    if (value && key) {
        [self.aesCache setObject:value forKey:key];
    }
    else {
#ifdef DEBUG_CACHE
        NSLog(@"#CACHE_MANAGER: *** KEY VALUE SEEMS TO BE NIL ***");
#endif
    }

} 
```

要从缓存中获取该数组，我使用：

```
- (NSMutableArray*)getObjects {
    array = [self getValue:@"Objects"];
    #ifdef DEBUG_CACHE
         NSLog(@"#CACHE_MANAGER: Getting the 'Objects' from Cache");
   #endif
        if (areas == nil) {
   #ifdef DEBUG_CACHE
         NSLog(@"#CACHE_MANAGER: No Objects cached. ");
    #endif

    }
    return array;
} 
```

我将从缓存中获取数组。但是如果我锁定屏幕然后打开缓存委托函数

```
- (void)cache:(NSCache *)cache willEvictObject:(id)obj {
    #ifdef DEBUG_CACHE
        NSLog(@"#CACHE_MANAGER: Going to evict the object");
    #endif
} 
```

被解雇，我会得到空的结果。我该如何解决这个问题。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:50:18.853

NSCache 的目的是缓存对象，但它可以随时刷新以保留内存。如果你想要一个更持久的缓存，你应该使用字典。

# java - EntitManager 的单例 bean 不能正常工作，以防来自无状态 bean 的多次访问

> ID：12835385
> 
> 赞同：0
> 
> 时间：2012-10-11T08:34:08.383
> 
> 标签：java, hibernate, locking, jpa-2.0, entitymanager

我有一个 2 应用程序。一个是应用程序客户端，另一个是 EJB 项目。我的客户端引用了服务器端。容器托管 Bean 事务用于 bean。我不能使用以下语句将实体管理器注入 bean。

```
@PersistenceContext(unitName = "DBService")
private EntityManager em; 
```

我在服务器端有一个消息驱动 bean、2 个无状态 bean 和一个**单例 bean 。**我从消息驱动bean本地注入2个无状态bean。根据JMS消息的消息类型（它来自服务器或客户端），消息驱动bean调用相关有状态bean的业务方法。每个无状态bean都注入单例bean .

我正在对单例 bean 中的实体进行一些更改，更新实体的某些字段，我正在向客户端或服务器发送 jms 消息。当消息由 2 个无状态 bean 处理时，它调用单例 bean 的业务方法。例如我改变了一个实体的字段。然后单例bean向客户端发送jms消息，然后客户端做一些工作，然后他将消息发送回服务器，服务器在消息驱动bean中消费这个消息，然后它调用相关的无状态bean的业务方法，然后无状态均值调用单例bean的业务方法。然后我正在从数据库中查询，但是我看不到更改实体的最新状态。我的更改被覆盖了。我认为如果 Singleton bean 的 EntityManager 由多个 bean 注入，它就不能正确地保持实体的状态。我认为必须从连接池中获取相同的单例 bean 实例。我对此有严重的问题。

你认为我的检测是正确的吗？还是我做错了什么？

**问题**：我认为当一个无状态bean调用singleton bean的方法新事务开始时，然后第二个无状态bean调用singleton bean的方法，它也启动了一个事务，但是前一个没有提交，2个事务不知道变化这是彼此的。但我不知道如何解决这个问题。使用 Bean 托管事务是单例 bean 的一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:44:17.990

默认情况下，带有注释的 bean`@Singleton`是容器管理的，并且使用锁定模式`LockType.WRITE`，可以显式应用`@ConcurrencyManagement(CONTAINER)`。

如果客户端正在调用任何方法，则所有其他请求都必须等待前一个调用返回。在这里，您可以将锁应用于单例 bean 的入口方法，然后可以从内部调用其他方法。

您还可以在方法级别使用 进行注释`@Lock(LockType.WRITE)`。因此，调用的顺序将与客户端调用它们的顺序有关。

* * *

**编辑：**对单例 bean 的并发访问是序列化的，默认情况下方法具有`REQUIRED`事务属性。

因此容器在客户端的事务上下文中调用 bean 的方法。因此，他们将拥有从无状态 bean 到单例 bean 的单独事务。

```
Stateless Bean A ----->                          ---> Read/Write 
Stateless Bean B ----->  |C|B| Singleton --> |A| ---> Read/Write
Stateless Bean C ----->                          ---> Read/Write 
```

如上所述，来自 bean B & C 的请求将被序列化/排队，直到 A 尚未完成。所以所有的请求都会被单独处理而不影响其他请求，但可能会导致性能瓶颈。

您可以应用方法级别锁定，`@Lock(LockType.WRITE)`用于更改共享数据`@Lock(LockType.READ)`的方法和访问它们的方法。

# windows-phone-7 - 在 Windows Phone 上沿路径绘制文本

> ID：12835387
> 
> 赞同：0
> 
> 时间：2012-10-11T08:34:18.907
> 
> 标签：windows-phone-7, text

我正在 windows phone 7.5 平台上开发地图应用程序。我需要沿着某条路画一段文字。在 android 中，我可以创建一个 Path 对象并用它分配起点和终点。然后我可以调用 drawTextOnPath API 沿路径绘制文本。但我不知道如何在 windows phone 中实现这一点。好像只能用TextBlock在WritableBitmap上画文字，但是TextBlock类没有提供改变文字方向的API。我必须使用 XNA 来绘制文本吗？

**EDIT1：**我没有使用任何地图服务，例如 Bing 和地图控件来实现我的应用程序。因为该应用程序只提供我们学校校园的地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:21:24.393

文章：http://windowsphonegeek.com/articles/Windows-Phone-Map-Control-Display-Current-Location-and-Remove-previous-Pushpins

非常有用

.....................................2

o 你想找到一种在 writebitmap 上绘制路径的方法。

您可以在 writebitmap 的父控件上绘制路径。

像这样：

var yourpath = XamlReader.Load(@"") as Path;

Children.Add(_pathUnreadTriangle);

然后 MeasureOverride 它

# sql - PL/SQL - 连接 3 个表时错误列定义不明确

> ID：12835391
> 
> 赞同：0
> 
> 时间：2012-10-11T08:34:28.020
> 
> 标签：sql, plsql

我正在加入 PL/SQL 中的 3 个表，即员工、部门和经理的另一名员工。但是当我运行脚本时出现此错误

```
Error report:
ORA-06550: line 19, column 9:
PL/SQL: ORA-00918: column ambiguously defined
ORA-06550: line 9, column 3:
PL/SQL: SQL Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

我是 PL/SQL 的新手，所以无法理解这些错误的含义。

这是开始块内的选择语句，我得到错误

```
 select e.first_name||' '||e.last_name AS Employee ,
          m.first_name||' '||m.last_name AS Manager ,
          e.job_id AS jobemp , 
          d.department_name AS Department ,
          e.salary AS Salary
  into ename, manager, jobid, depn, sal
  from employees e join departments d 
          on (e.department_id = d.department_id)
        join employees m
          on (e.manager_id = m.employee_id)
  where salary = (select min(salary) from employees)
  ; 
```

谁能帮我识别这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:36:03.150

`salary`在 where 子句中指定来自哪个表

```
 select e.first_name||' '||e.last_name AS Employee , 
          m.first_name||' '||m.last_name AS Manager , 
          e.job_id AS jobemp ,  
          d.department_name AS Department , 
          e.salary AS Salary 
  into ename, manager, jobid, depn, sal 
  from employees e join departments d  
          on (e.department_id = d.department_id) 
        join employees m 
          on (e.manager_id = m.employee_id) 
  where e.salary = (select min(salary) from employees); 
```

# android - 无法在 Netbeans 中打开现有项目

> ID：12835392
> 
> 赞同：2
> 
> 时间：2012-10-11T08:34:31.543
> 
> 标签：android, netbeans

我在我的计算机上使用 Netbeans 7.0.1，我已经在同一台机器上创建了几个项目，然后在为 Android 安装/添加插件之后，我无法在同一台机器上打开任何项目。如何让我的 netbeans 再次打开我现有的项目？你认为插件的安装/添加与此事有关吗？我是否需要删除我所做的所有更改？如何？

而且我忘了提到，每当我尝试“打开项目”时，它都会显示一个显示项目位置的窗口，这让我想到了转到“我的文档\NetBeansProject\ProjectName”，但是，当我点击我想要的项目（例如 GenReport）在文本框中（标签是 Titled 'Project Name' ），这显示 -

> 无法识别的项目；缺少插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:35:54.807

尝试使用从现有资源创建新项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T15:04:22.617

尽管这听起来很愚蠢，但请使用您的项目目录，将其压缩，然后选择“文件”>“导入项目”>“从 Zip”。这应该让你回到你的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T21:49:08.723

这发生在我身上，因为 NetBeans 没有安装 HTML5 插件（在我获得了新版本的 NetBeans 之后）。你知道什么——错误信息告诉我到底出了什么问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T15:46:12.393

只需使用文件>打开项目，然后浏览到现有项目的根目录。只要您安装了 nbandroid 插件，它就会被检测为 android 项目。

# hadoop - Hadoop dfs 复制

> ID：12835396
> 
> 赞同：7
> 
> 时间：2012-10-11T08:34:51.723
> 
> 标签：hadoop, hdfs

对不起，伙计们，只是一个简单的问题，但我在谷歌上找不到确切的问题。关于 dfs.replication 是什么意思的问题？如果我在hdfs中创建了一个名为filmdata.txt的文件，如果我设置dfs.replication = 1，那么它是否完全是一个文件（一个filmdata.txt）？或者除了主文件（filmdata.txt）之外，hadoop将创建另一个复制文件. 简而言之：如果设置dfs.replication=1，一共有一个filmdata.txt，还是两个filmdata.txt？提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T09:01:28.087

文件系统中的文件总数将在 dfs.replication 因子中指定。因此，如果您设置 dfs.replication=1，那么文件系统中将只有一个文件副本。

检查[Apache 文档](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml)以获取其他配置参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T10:15:19.827

为确保数据的高可用性，Hadoop 会复制数据。

当我们将文件存储到 HDFS 中时，hadoop 框架将文件拆分为一组块（64 MB 或 128 MB），然后这些块将在集群节点之间复制。配置 dfs.replication 是指定需要多少次复制.

dfs.replication 的默认值为 3，但这可根据您的集群设置进行配置。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T17:15:41.353

Praveen 提供的链接现已损坏。这是描述参数[dfs.replication](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml)的更新链接。

请参阅[Hadoop 集群设置](http://hadoop.apache.org/docs/stable/cluster_setup.html)。有关配置参数的更多信息。

您可能需要注意，文件可以跨越多个块，并且每个块将被复制 dfs.replication 中指定的次数（默认值为 3）。此类块的大小在参数 dfs.block.size 中指定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T09:30:48.757

在 HDFS 框架中，我们使用商品机器来存储数据，这些商品机器不是高端机器，如具有高 RAM 的服务器，可能会丢失数据节点（d1，d2，d3）或块（b1 ,b2,b3)，因此 HDFS 框架将每个数据块 (64MB, 128MB) 拆分为三个副本（默认情况下），每个块将存储在单独的数据节点中（d1, d2, d3）。现在考虑块（b1）在数据节点（d1）中损坏，块（b1）的副本在数据节点（d2）和数据节点（d3）中也可用，以便客户端可以请求数据节点（d2） ) 来处理 block(b1) 数据并提供结果，就像 data-node(d2) 失败一样，客户端可以请求 data-node(d3) 来处理 block(b1) 数据。这称为-dfs.replication mean。

希望你有一些清楚。

# objective-c - UIButton 没有为 MKAnnotationView 正确加载

> ID：12835397
> 
> 赞同：1
> 
> 时间：2012-10-11T08:35:05.707
> 
> 标签：objective-c, uibutton, mkannotationview

我正在创建一个带有详细信息披露按钮的 MKAnnotationView。

在 mapView: viewForAnnotation: 我只是创建了一个占位符按钮。

```
//  the right accessory view needs to be a disclosure button ready to bring up the photo
aView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

在mapView：didSelectAnnotationView：我实际上创建了一个要使用的按钮（带有相关标签）

```
//  create a button for the callout
UIButton *disclosure                = [self.delegate mapController:self buttonForAnnotation:aView.annotation];

NSLog(@"DisclosureButton: %@", disclosure);

//  set the button's target for when it is tapped upon
[disclosure addTarget:self.delegate action:@selector(presentAnnotationPhoto:) forControlEvents:UIControlEventTouchUpInside];

//  make the button the right callout accessory view
aView.rightCalloutAccessoryView = disclosure; 
```

在日志中，该按钮似乎已完全实例化并设置了正确的标签。

这是按钮创建者：

```
/**
 *  returns an button for a specific annotation
 *
 *  @param  sender              the map controller which is sending this method to us (its' delegate)
 *  @param  annotation          the annotation we need to create a button for
 */
- (UIButton *)mapController:(MapController *)   sender
        buttonForAnnotation:(id <MKAnnotation>) annotation
{
    //  get the annotation as a flickr photo annotation
    FlickrPhotoAnnotation *fpa  = (FlickrPhotoAnnotation *)annotation;

    //  create a disclosure button used for showing photo in callout
    UIButton *disclosureButton      = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    //  associate the correct photo with the button
    disclosureButton.tag            = [self.photoList indexOfObject:fpa.photo];

    return disclosureButton;
} 
```

当我选择注释时，问题就来了。在选择注释并点击详细信息披露按钮的几秒钟内，没有任何反应。然而，在点击并返回注释几次并测试按钮后，它最终按预期工作。

奇怪的延迟是怎么回事？有时当按钮开始工作时，它只是看起来好像 alpha 设置为 0.0，直到您点击它并出现。

严重的是我遇到的更奇怪的问题之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:24:43.593

在`didSelectAnnotationView`调用委托方法之前，地图视图已经根据注释视图的属性准备了标注视图（在您进行更改之前）。

因此，您在第一次点击时看到的标注没有应用程序所做的更改`didSelectAnnotationView`。在接下来的点击中，标注可以基于上一次点击设置的值（这实际上取决于如何处理注释视图重用`viewForAnnotation`）。

看起来代码唯一要做的`didSelectAnnotationView`就是`buttonForAnnotation`设置按钮操作和标签。

我假设您使用的是“标记”方法，因为该`presentAnnotationPhoto:`方法需要引用所选注释的属性。

您无需使用标签即可在您的操作方法中获取选定的注释。相反，有几个更好的选择：

*   `selectedAnnotations`您的自定义操作方法可以从地图视图的属性中获取选定的注释。有关如何执行此操作的示例，请参阅[此问题。](https://stackoverflow.com/questions/9797047/how-to-keep-data-associated-with-mkannotation-from-being-lost-after-a-callout-po)
*   使用地图视图自己的委托方法`calloutAccessoryControlTapped`而不是自定义操作方法。委托方法传递对注解视图的引用，该注解视图包含指向其注解的属性（即。`view.annotation`），因此无需猜测、搜索或询问选择了哪个注解。我推荐这个选项。

在第一个选项中，执行`addTarget`in`viewForAnnotation`并且不要费心设置`tag`. 您也不需要该`buttonForAnnotation`方法。然后在按钮操作方法中，从`mapView.selectedAnnotations`.

目前，您的操作方法已启用，`self.delegate`因此您可能无法从其他控制器访问地图视图。您可以做的是***在地图控制器中创建一个本地按钮操作方法，该方法***获取选定的注释，*然后*调用该`presentAnnotationPhoto:`操作方法`self.delegate`（现在可以编写该方法以接受*注释参数*而不是按钮点击处理程序）。

第二个选项类似，只是您不需要执行任何操作`addTarget`，并且在`calloutAccessoryControlTapped`方法中调用`presentAnnotationPhoto:`on `self.delegate`。

对于这两个选项，我建议修改方法*以*`presentAnnotationPhoto:`接受注释对象`FlickrPhotoAnnotation *`本身（并将注释传递给它。`UIButton *`*`presentAnnotationPhoto:`*

# android - Android google drive 应用程序未显示在可用图片来源列表中

> ID：12835400
> 
> 赞同：1
> 
> 时间：2012-10-11T08:35:13.877
> 
> 标签：android, google-drive-api

我已使用以下代码将图片导入到我的应用程序：

```
Intent importIntent = new Intent(Intent.ACTION_GET_CONTENT);
importIntent.setType("image/*");
startActivityForResult(importIntent, REQUEST_IMPORT_IMAGE); 
```

这一切都很好而且很花哨，我在我的galaxy tab和galaxy nexus上都获得了带有画廊和保管箱选项的源选择器。

但是，当我安装和配置 Google Drive 应用程序时，它并没有显示为图像源的选择。从驱动应用程序导入图像是否涉及一些额外的问题，或者这只是驱动应用程序开发团队的疏忽？

尝试搜索世界各地，但找不到任何人甚至提到缺少从驱动器应用程序导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:52:08.030

您是否在应用清单中设置了适当的意图过滤器？查看 Google Drive SDK 文档以获取有关如何与 Android 集成的指南：

[https://developers.google.com/drive/integrate-android-ui](https://developers.google.com/drive/integrate-android-ui)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T11:34:11.880

看来这一切只是 Android Drive 开发人员的一个简单的忽略。至少在[http://googledrive.blogspot.fi/2013/05/a-smoother-drive-app-for-android.html](http://googledrive.blogspot.fi/2013/05/a-smoother-drive-app-for-android.html)更新之后，驱动器应用程序应该作为导入源出现。

我不需要更改任何代码。

# javascript - webrtc 在一侧流式传输视频并在另一侧接收？html5

> ID：12835404
> 
> 赞同：3
> 
> 时间：2012-10-11T08:35:16.473
> 
> 标签：javascript, html, html5-video, webrtc

我想知道是否可以像以下[https://apprtc.appspot.com/?r=91737737](https://apprtc.appspot.com/?r=91737737)那样从客户端捕获视频输入，并将其显示在另一个上以便任何观众都可以看到它，我的问题是我我的第二台计算机上没有网络摄像头，我想使用 webrtc 接收视频。是否可以从一端捕获并在另一端捕获？也许如果这不可能，websockets 是最好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T11:36:59.040

除了由于性能/带宽问题而导致的不完美之外，我认为没有理由不可能。

目前最受支持的 HTML5 解决方案我想它是使用 Chrome 上可用的getUserMedia [（](http://caniuse.com/stream)[考虑](http://www.html5rocks.com/en/tutorials/getusermedia/intro/#toc-gettingstarted)getUserMedia.js[以](https://github.com/addyosmani/getUserMedia.js)获得更广泛的相机输入支持，尽管我没有使用它）

**设想**

我们将有一个捕获器、一个广播流的服务器和接收最终流的观察者。

**计划**

*捕获阶段*

1.  使用 getUserMedia 从摄像头获取数据
2.  在画布上绘制它（也许你可以跳过这个）
3.  使用 websockets（例如通过 socket.io 以获得更广泛的支持）将帧以图像数据的格式发布到服务器（例如 node.js）。

*广播阶段*

1.  接收图像数据并广播给订阅的观察者

*观看阶段*

1.  观察者将与服务器建立 websocket 连接
2.  在从服务器接收到的每个新帧上，它必须将接收到的帧绘制到画布上

**注意事项**

1.  您应该考虑到网络性能会影响播放。
2.  您可以在客户端强制执行 FPS 速率以避免播放速度不稳定。
3.  如果缓冲池适合您的情况以实现更流畅的播放，那就太好了。

**未来**

您可以在[PeerConnection API](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-peerconnection)和[MediaSource API](http://updates.html5rocks.com/2011/11/Stream-video-using-the-MediaSource-API)可用时使用它们，因为这就是制作它们的原因，尽管这可能会增加 CPU 使用率，具体取决于浏览器的性能。

# c++ - C++ 中的 Ofstream 数组

> ID：12835406
> 
> 赞同：4
> 
> 时间：2012-10-11T08:35:23.010
> 
> 标签：c++, arrays, ofstream

我希望在我的项目中使用 41 个输出文件来在它们上面写文本。首先创建一个字符串数组`list`来命名这些输出文件，然后我尝试定义一个 ofstream 对象数组并使用`list`它们来命名它们，但是我得到了这个错误`'outfile' cannot be used as a function`。下面是我的代码：

```
#include <sstream>
#include <string>
#include <iostream>
#include <fstream>
using namespace std ;
int main ()
{
  string list [41];
  int i=1;
  ofstream *outFile = new ofstream [41];

  for (i=1;i<=41 ;i++)
  {
    stringstream sstm;
    sstm << "subnode" << i;
    list[i] = sstm.str();
  }

  for (i=0;i<=41;i++)
    outFile[i] (list[i].c_str());

  i=1;
  for (i=1;i<=41;i++)
    cout << list[i] << endl;

  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T08:57:33.090

有关以下修复，请参见下文：

1.  除非必须，否则不要使用`new`（您泄漏了所有文件并且没有正确破坏它们将导致数据丢失；如果您没有正确关闭它们，ofstreams 可能不会被刷新，并且挂起的输出缓冲区将丢失）
2.  使用正确的数组索引（从 0 开始！）
3.  调用*默认构造*`.open(...)`来打开文件 *`ofstream`*
**   建议：
    *   我建议反对`using namespace std;`（以下未更改）
    *   我建议重复使用`stringstream`. 这是一个好习惯
    *   更喜欢使用 C++ 风格的循环索引变量 ( `for (int i = ....`)。这可以防止意外的`i`范围过大。
    *   事实上，与时俱进，使用 ranged for*

 *```
#include <sstream>
#include <string>
#include <iostream>
#include <fstream>
using namespace std;
int main ()
{
    ofstream outFile[41];

    stringstream sstm;
    for (int i=0;i<41 ;i++)
    {
        sstm.str("");
        sstm << "subnode" << i;
        outFile[i].open(sstm.str());
    }

    for (auto& o:outFile)
        cout << std::boolalpha << o.good() << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:42:47.797

你不能像你一样调用构造函数。尝试调用`outFile[i].open(list[i].c_str())`. 注意“开放”。*

# sql - sql 计数语句

> ID：12835418
> 
> 赞同：0
> 
> 时间：2012-10-11T08:35:53.603
> 
> 标签：sql, oracle, count, group-by

我有一个表名为 JOB_Details ，数据显示如下：

```
Age           Department:IT         
              Male     Female 
30yrs         5          1              
30-34yrs      3          2              
35-39yrs      4          4              
40-49yrs      2          3              
50-54yrs      1          0 
```

并且输出假设会像：

```
Age           Department:IT          Total
              Male     Female 
30yrs         5          1              6
30-34yrs      3          2              5
35-39yrs      4          4              8
40-49yrs      2          3              5
50-54yrs      1          0              1
Total         15         10             25 
```

我该怎么做？因为当使用 count 和 group by 函数时，结果将不是我想要的。有人可以给我一些建议吗？为了您的信息，我使用 Oracle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:37:52.310

```
SELECT AGE, MALE, FEMALE, SUM(MALE + FEMALE) AS TOTAL
FROM JOB_DETAILS
GROUP BY AGE 
```

编辑：

如果您想要运行总数，则必须使用`ROLLUP`（SQL Server）

```
SELECT AGE, MALE, FEMALE, SUM(MALE + FEMALE) AS TOTAL
FROM JOB_DETAILS
GROUP BY AGE
WITH ROLLUP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:41:15.467

尝试`union all`像这样使用：

```
SELECT age, Male, Female, nvl(Male,0) + nvl(Female,0) as total
FROM JOB_Details 
union all
SELECT 'TOTAL', sum(Male), sum(Female), sum(nvl(Male,0) + nvl(Female,0))
FROM JOB_Details 
```

有观点：

```
create view vJOB_Details 
SELECT (CASE WHEN age='30' THEN Count(EMPLID) 
             WHEN age='34' THEN Count(EMPLID) 
             WHEN age='39' THEN Count(EMPLID) 
             WHEN age='49' THEN Count(EMPLID) 
             WHEN age='54' THEN Count(EMPLID) 
             ELSE NULL 
        END) TOTAL_COLUMN ,
        (CASE WHEN GENDER1='M' THEN Count(EMPLID) 
              WHEN GENDER1='F' THEN Count(EMPLID) 
              ELSE NULL 
         END) TOTAL_GENDER 
FROM job_details 
GROUP BY age,GENDER 

SELECT age, Male, Female, nvl(Male,0) + nvl(Female,0) as total
FROM vJOB_Details 
union all
SELECT 'TOTAL', sum(Male), sum(Female), sum(nvl(Male,0) + nvl(Female,0))
FROM vJOB_Details; 
```

# c# - 字典 智能感知

> ID：12835420
> 
> 赞同：0
> 
> 时间：2012-10-11T08:35:54.640
> 
> 标签：c#, string, visual-studio, intellisense, dictionary

`Dictionary<string,string>`有没有办法为C#中的所有键获取智能感知？

或者是否有可能获得带有字符串参数的方法的智能感知。

我想拥有类似的东西`ResourceManager.GetString("")`。如果可能的话，我不想创建一个带有常量字符串的静态类来模拟它。

编辑：

我目前正在使用字典将多个资源文件组合到一个字典中，这是因为资源用于多个项目并且需要被覆盖。

```
var temp = ResourceFile1.ResourceManager
                    .GetResourceSet(CultureInfo.CurrentUICulture, true, true)
                    .Cast<object>()
                    .Select(
                        x => new
                            {
                                ID = 1,
                                Value = x.GetType().GetProperty("Value").GetValue(x, null).ToString(),
                                Key = x.GetType().GetProperty("Key").GetValue(x, null).ToString()
                            });
                temp = temp.Concat(
                    ResourceFile2.ResourceManager
                        .GetResourceSet(CultureInfo.CurrentUICulture, true, true)
                        .Cast<object>()
                        .Select(
                            x => new
                            {
                                ID = 2,
                                Value = x.GetType().GetProperty("Value").GetValue(x, null).ToString(),
                                Key = x.GetType().GetProperty("Key").GetValue(x, null).ToString()
                            }));
                temp = temp.Concat(
                    ResourceFile3.ResourceManager
                        .GetResourceSet(CultureInfo.CurrentUICulture, true, true)
                        .Cast<object>()
                        .Select(
                            x => new
                                {
                                    ID = 3,
                                    Value = x.GetType().GetProperty("Value").GetValue(x, null).ToString(),
                                    Key = x.GetType().GetProperty("Key").GetValue(x, null).ToString()
                                }));
            ResourceDictionary = temp.GroupBy(x => x.Key)
                .Select(x => x.FirstOrDefault(c => c.ID == x.Max(v => v.ID)))
                .ToDictionary(x => x.Key, x => x.Value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:38:42.377

如果您知道有限值，请不要使用字符串，而是在这种情况下使用枚举。

根据定义，字符串在运行时可以包含任何值，而枚举在编译时是已知的。

或者您可以简单地避免使用字典。如果您知道您的字典将始终包含相同的键，则最好创建一个类，其中每个键都有一个属性，您以前使用过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:39:21.917

不，没有办法对编译时未知的东西（例如字典中的键）进行 Intellisense。Intellisense 仅适用于编译时对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:39:12.270

您不能使用 Dictionary，因为它使用哈希函数。由于类似的字符串没有类似的哈希，这根本不适合您的目的。

如果您需要自己实现它，我认为您可以通过构建基数树来解决它。

（我将其解释为您想要在运行时进行智能感知。）

# algorithm - 如何解决这个问题（选择间隔）

> ID：12835422
> 
> 赞同：0
> 
> 时间：2012-10-11T08:35:54.567
> 
> 标签：algorithm, intervals

我已经给出了一些间隔`I = {I(1), I(2), ..., I(m)}`。`I(i) = [a_i, b_i] (1<=a_i<=b_i<=n)`您可能会认为间隔相互覆盖（对不起，我的英语很差），所以没有间隔，例如`{[1,5], [3,6]}, {[2,5], [5,7]}`. 并且`{[1,1], [2,2], ..., [n,n]}`必须包含在 I 中。

让我们假设`C(i) = b_i - a_i + 1`。

我想找到`{I(c_1), I(c_2), ..., I(c_k)}`彼此不重叠的，并且`C(c_1) + C(c_2) + ... + C(c_k) = T. (1 <= T <= n)`.

我可以使用子集和问题找到`O(n*T)`DP 解决方案，我认为它是 NP，但我不确定。我可以优化更多`O(n*T)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:52:38.987

这个问题可以从[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)（给定一组数字和一个目标数字，找出是否有一个子集与这个目标相加）通过简单的[归约](http://en.wikipedia.org/wiki/Polynomial-time_reduction)：

给定一个子集和的实例：`S={c_1,c_2,..,c_n},T`- 通过创建`n`非重叠区间、区间 i 和`c_i`点来创建这个问题的一个实例（通过升序很容易做到）。还是一样`T`。

现在，子集和问题的答案是正确的当且仅当存在一个总和为 的区间子集`T`。这基本上是同一个问题，因为根据问题的定义，所有区间都不会相互重叠。

由此我们可以得出结论-您的问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)。

此外，如果我们能更好地解决问题 then `O(T*n)`，我们可以使用相同的方法解决子集和问题，然后`O(T*n)`^(1,2)。
但是，AFAIK，子集和的最佳伪多项式解决方案是`O(T*n)`，所以如果你有这样的解决方案 - 坚持下去。

* * *

(1) 转换问题是`O(n)`
(2) 这种说法仅适用于这种特定的归约，而不适用于多项式归约的一般情况。

# bash - 期望 bash 表达式中的错误

> ID：12835429
> 
> 赞同：0
> 
> 时间：2012-10-11T08:36:23.583
> 
> 标签：bash, ssh, expect

我在我的 bash 脚本中使用了以下期望命令，以设置无密码 ssh 连接。

```
VAR=$(expect -c '
     spawn ssh-copy-id -i '"$SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP "'   
     expect "*?assword:*"
     send "'"$REMOTE_HOST_PASSWD"'\r";
     expect { 
     "Permission denied, please try again." {
        exit '"$WRONG_PASSWORD"' 
     }
 }
 ') 
```

我期望密码字符串为“ *？assword：* ”以便发送密码。但是无论我为期望块写什么，它都有效。如果我写

```
expect "xxxx"
expect "yyyy" 
```

它也有效，所以我认为它没有进入那个块？解决方案是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:43:31.727

可能是在进行比赛之前，比赛已经结束或发生超时。即使没有找到匹配项，expect 也会返回并继续执行，发送密码。

在期望手册中`COMMAND`，我们有一个部分解释了该`expect`命令：

```
waits until one of the patterns matches the output of a spawned process, a
specified time period has passed, or an end-of-file is seen. 
```

要解决这个问题，您应该将发送代码放在期望的正文中：

```
VAR=$(expect -c '
     spawn ssh-copy-id -i '"$SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP "'   
     expect "*?assword:*" {
       send "'"$REMOTE_HOST_PASSWD"'\r"
     }
     expect { 
     "Permission denied, please try again." {
        exit '"$WRONG_PASSWORD"' 
     }
 }
 ') 
```

希望这会有所帮助=)

# ios - 几个子项目。建筑的重复符号

> ID：12835432
> 
> 赞同：1
> 
> 时间：2012-10-11T08:36:42.340
> 
> 标签：ios, static-libraries

我有一个工作区，其中包含多个可重用工件项目，这些项目被编译成静态库。后来，我通过引用将它们作为子项目包含在其他项目中，从而在其他项目中使用这些库。但是当项目 A 使用库 B 和 C 时，我遇到了“重复符号”的问题，这两个库都使用库 D（库 B 和 C 作为项目 A 的子项目包含在内，所有库 B、C、D 都是从工件工作区）。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:22:51.383

如果您无权访问这些静态库的源代码，您将无能为力。如果你这样做，你必须重构/重命名冲突的类名。

# android - Android 2.2 模拟器无法连接互联网，但 4.0.3 模拟器可以连接

> ID：12835433
> 
> 赞同：2
> 
> 时间：2012-10-11T08:36:47.203
> 
> 标签：android, android-emulator, internet-connection, android-2.2-froyo

当我尝试从模拟器连接互联网与 android 2.2 时无法连接。但是，如果我尝试立即从模拟器连接互联网与 4.0.3，我会成功..

我已经从 eclipse、配置、代理设置、网络设置、ip 号码、dns 设置和其他设置进行了更改，但它是相同的。

此外，我已经更改了所有设置 android 2.2 模拟器，设置->无线和网络->移动网络->接入点名称->myconnection，但还是一样。

但是，所有这些问题都不在 android 4.0.3 模拟器上。

这可能是什么原因造成的？有没有人有任何想法？我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:29:52.610

试试这个 ：

在设置->无线和网络->移动网络->启用数据（复选框）

保持真实

现在检查它............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:22:09.740

请在[此处](https://stackoverflow.com/questions/2206822/no-internet-on-android-emulator-why-and-how-to-fix)查看链接，如果它不适合您，请重新启动模拟器或创建一个新的 android 2.2 版本模拟器。

# php - 重定向并提交到页面

> ID：12835436
> 
> 赞同：0
> 
> 时间：2012-10-11T08:37:01.957
> 
> 标签：php

> **可能重复：**
> [使用 POST 而不是 Get 的 Response.Redirect？](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)

我需要将用户从一个页面重定向到另一个页面，这很容易，但第二个页面实际上是一个将获取 POST 变量并打印该页面的页面。我需要的是让我重定向用户并通过 POST 将数据发送到我将用户重定向到的页面的功能（如果它存在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:42:08.020

通过重定向时，您无法在 PHP 中发送 POST 数据`header()`。您可以使用`CURL`将 POST 数据发送到另一个脚本，但这不会重定向用户。

你不能只检查`$_REQUEST`数组而不是`$_POST`目标脚本吗？这样，无论数据来自 POST 还是 GET 都无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:46:08.353

这是一个链接，解释了如何在`POST`没有`curl`

```
http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/ 
```

如果可行，您也可以使用`session`全局数组。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-11T08:41:05.410

你如何重定向这个用户？你想从哪里提取帖子数据？

如果您使用的是表单，则可以使用隐藏字段传递其他 POST 变量。例如：

```
<form action="<URL>.php" method="POST">
<input type=”hidden” name=”Language” value=”Spanish”&gt;

Full name: <input type="text" name="full_name" />

<input type="submit" value="Submit" />

</form> 
```

在这种情况下，在下一页您可以调用 $_POST["full_name"] 和 $_POST["Language"]。

# python - Python正则表达式循环

> ID：12835437
> 
> 赞同：-1
> 
> 时间：2012-10-11T08:37:06.440
> 
> 标签：python, regex, search, loops, findall

我有这段代码，它将在文件中查找某些内容。该文件如下所示：

```
name;lastname;job;5465465
name2;lastname2;job2;5465465
name3;lastname3;job3;5465465 
```

这是python代码：

```
import re
import sys

filehandle = open('somefile.csv', 'r')
text = filehandle.read()
b = re.search("([a-zA-Z]+);([a-z\sA-Z]+);([a-zA-Z]*);([0-9^-]+)\n?",text)
print (b.group(2),b.group(1),b.group(3),b.group(4)) 
```

不，它只会打印：

```
lastname;name;job;5465465 
```

它应该先打印姓氏，所以我对组进行了此操作。现在我需要一个循环来打印这样的所有行：

```
lastname;name;job;5465465
lastname2;name2;job2;5465465
lastname3;name3;job3;5465465l 
```

我尝试了所有类型的循环，但它没有通过整个文件......我需要怎么做？

必须使用 re 模块完成。我知道它在 csv 模块中很容易；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:53:14.797

问题不在于循环，而在于您的正则表达式/捕获组模式。类 [a-zA-Z]+ 将不匹配“lastname3”或“lastname2”。此示例有效：

```
import re
import sys

for line in open('somefile.csv', 'r'):
    b = re.search("(\w+);(\w+);(\w*);([0-9^-]+)\n?",line)
    if b:
        print "%s;%s;%s;%s" % (b.group(2),b.group(1),b.group(3),b.group(4)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:46:54.290

不需要`re`，但很好的工作`csv`：

```
import csv
with open('somefile.csv', 'r') as f:
    for rec in csv.reader(f, delimiter=';'):
        print (rec[1], rec[0], rec[2], rec[3]) 
```

`re`如果您想检查单个元素的有效性（有效的电话号码、名称中没有数字、大写名称等），您可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T08:49:58.470

您需要逐行处理文件。

```
import re
import sys

with open('somefile.csv', 'r') as filehandle:
    for text in filehandle:
        b = re.search("([a-zA-Z]+);([a-z\sA-Z]+);([a-zA-Z]*);([0-9^-]+)\n?",text)
        print (b.group(2),b.group(1),b.group(3),b.group(4)) 
```

您的文件具有很好的分号分隔值，因此使用`split`建议的 csv 库会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T08:52:30.653

似乎您只想重新排序您拥有的东西，在这种情况下，我不知道是否需要正则表达式。我相信以下内容可能有用：

重新排序 = operator.itemgetter(1, 0, 2, 3)

[http://docs.python.org/library/operator.html](http://docs.python.org/library/operator.html)

# struts - 如何从我自己的 portlet 调用 liferay struts action？

> ID：12835439
> 
> 赞同：0
> 
> 时间：2012-10-11T08:37:06.657
> 
> 标签：struts, liferay

我定义了一个 editPortletURL

```
PortletURL redirectURL = renderResponse.createRenderURL();
redirectURL.setWindowState(LiferayWindowState.POP_UP);
redirectURL.setParameter("struts_action", "/asset_publisher/add_asset_redirect");
editPortletURL.setParameter("redirect", redirectURL.toString());

editPortletURL.setParameter("originalRedirect", redirectURL.toString());
editPortletURLString = editPortletURL.toString();
editPortletURLString = HttpUtil.addParameter(editPortletURLString, "doAsGroupId", assetRenderer.getGroupId());
editPortletURLString = HttpUtil.addParameter(editPortletURLString, "refererPlid", plid); 
```

我`edit_article.jsp`从我的 portlet 调用。我会，如果我点击“发布”按钮，我应该被转发到指向 `/asset_publisher/add_asset_redirect`struts 动作的 jsp 页面。此操作映射到`add_asset_jsp`. 此页面触发`Liferay.fire (closeWindow) event`，应该关闭弹出窗口并刷新我的 portlet。但是如果我尝试这样做 - 我会在弹出窗口中看到我的 portlet...

如何将 Liferay 操作类引用/包含到我自己的 portlet 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:58:39.610

如果您在 liferay 6.1 中工作，那么您可以简单地使用 action-hook 来满足您的要求。请检查以下链接

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/other-hooks](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/other-hooks)

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/performing-a-custom-acti-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/performing-a-custom-acti-4)

# java - 如何在 Play Framework 中使用 POST 参数？

> ID：12835440
> 
> 赞同：3
> 
> 时间：2012-10-11T08:37:10.720
> 
> 标签：java, playframework-2.0

我正在尝试使用 JavaScript 路由发出 POST 请求。在路由文件中：

```
POST /comments controllers.Clients.addComment(text: String, client: Int)
GET /assets/javascripts/routes controllers.Application.javascriptRoutes() 
```

在页面上：

```
jsRoutes.controllers.Clients.addComment(args.text, @client.id).ajax(...); 
```

但它创建了请求

```
POST http://localhost:9000/comments?text=qwe&client=1 HTTP/1.1 
```

如何让它在 POST 正文中传递参数而不是请求字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T09:36:52.207

看看[ajax() 文档](http://api.jquery.com/jQuery.ajax/)- 就是这样的例子：

```
$.ajax({
    type: "POST",
    url: "some.php",
    data: { name: "John", location: "Boston" }
}); 
```

由于[Play](http://en.wikipedia.org/wiki/Play_Framework) JavaScript 路由已经定义`url`和请求方法（`type`），您只需要添加`data`（当然您不需要将它们指定为括号中的参数）

```
jsRoutes.controllers.Clients.addComment().ajax(
    data: {
      client: @client.id,
      text: args.text
    }
); 
```

您也可以只向给定的客户端发送文本（由 URL 确定（可以`POST`但`PUT`看起来更好:)）：

```
PUT /comments/:client     controllers.Clients.addComment(client: Int) 
```

在视图中：

```
jsRoutes.controllers.Clients.addComment(@client.id).ajax(
    data: { text: args.text }
); 
```

因此，它将执行 PUT 请求，`http://domain.tld/comments/123`并且`text`在`form()`使用 POST 发送时可用：

```
public static Result addComment(int client) {
    String receivedText = form().bindFromRequest().get("text");
    // save it to DB ...
    return ok( "Added comment: "+ receivedText+ ". for client id: " + client);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T15:01:07.867

由于我不太了解 Play 中的 JsRoutes，所以我所做的是：

在我看来：

```
var client = 1;

$.ajax({
    type: "POST",
    url: "/comments/" + client,
}); 
```

在我的路线中，对方法的调用：

```
GET /comments/:client     controllers.Clients.addComment(client: Int) 
```

这可以让浏览器像对路由中定义的某些 URL 的普通 ajax 调用一样发出请求。

# smalltalk - 如何使用“Consolas”作为编码字体

> ID：12835441
> 
> 赞同：4
> 
> 时间：2012-10-11T08:37:13.313
> 
> 标签：smalltalk, squeak

我想在 Windows 操作系统上更改 Squeak 4.3 图像中代码版本的字体，如果可能的话使用 consolas 字体。

我在首选项浏览器中没有发现任何东西可以轻松做到这一点。那个[SO 问题](https://stackoverflow.com/questions/574873/how-can-i-easily-change-to-native-fonts-in-smalltalk-squeak-pharo)看起来很完美，但在我的情况下没有一个答案有效。

比如上线

```
font := LogicalFont familyName: 'Bitmap DejaVu Sans' pointSize: 10. 
```

它失败了`LogicalFont`：我得到允许修复丢失的类/变量的弹出窗口。

> 未知变量：LogicalFont 请更正，或取消：[...]

该解决方案是否不适合 Squeak 4.3，还是我缺少一些软件包？

**编辑**：通常，在问题发布*后*，我会找到一些答案元素：

> 我在首选项浏览器中没有发现任何东西可以轻松做到这一点。

因为设置不能通过首选项浏览器访问，而是通过世界菜单 -> 外观 -> 系统字体 -> 代码字体。

但我只看到少数可用的字体（除了 ComicSans 和 BitstreamVera），但没有 Consolas。我确实`Offer native fonts`启用了首选项，但是...

**第二次编辑**：鉴于 Igor Stasenko 的回答，我在 SqueakSource 上发现提到了似乎是最新的[FreeTypePlus](http://www.squeaksource.com/@F_D5WfXcpOnk3kgI/eKYxPXFN)（对于初学者来说，了解如何在 Squeak 上安装新软件通常不容易，而且似乎 Squeak 已经放慢了速度2006/2007 年和[Swiki](http://wiki.squeak.org/squeak)中提到的一些项目现在都已关闭......）

所以我加了蒙蒂塞洛

```
MCHttpRepository
    location: 'http://www.squeaksource.com/FreeTypePlus'
    user: ''
    password: '' 
```

并安装`FreeType`，`FreeTypeSubPixelAntiAliasing`和`PinesoftEnhancementsForFreetype`。现在我可以看到我的 ttf 系统字体...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:28:43.217

AFAIK，Squeak 默认不包括 Freetype 支持。

您可以尝试使用默认包含 Freetype 的 Pharo。[http://www.pharo-project.org/home](http://www.pharo-project.org/home)

或者您可以尝试在 Squeak 中安装 Freetype 包并为 VM 下载 freetype 插件。

# shell - CakePHP 控制台-应用程序错误

> ID：12835450
> 
> 赞同：1
> 
> 时间：2012-10-11T08:37:26.793
> 
> 标签：shell, cakephp, console, cakephp-2.0, cakephp-2.1

我已将 CakePHP 1.2 站点升级到 2.x。

该站点将一个内核用于多个应用程序。一切正常，除了贝壳。

我无法从控制台运行现有的 shell 之一。

当我尝试更改应用程序时，`cake -app store`出现以下错误：

```
#!/usr/bin/php -q
PHP Fatal error:  Cannot redeclare class ShellDispatcher in C:\www\domains\cakes\lib\Cake\Console\ShellDispatcher.php on line 24

Fatal error: Cannot redeclare class ShellDispatcher in C:\www\domains\cakes\lib\Cake\Console\ShellDispatcher.php on line 24 
```

我正在执行以下命令：

`> cd C:\www\domains\cakes\store`

`> Console\cake -app store`

我在 Linux（debian）环境中得到相同的结果。配置有问题还是蛋糕中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:55:02.300

您是否删除了与旧 cake 1.3 核心相关的任何环境路径？并不是说那些会干扰您的 2.x 核心。反正你不需要它们。只有 PHP 之一。

我的猜测是，如果您没有找到任何外壳：您没有阅读应有的迁移指南：http: [//book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)

外壳现在位于 /Console/Command/

使用可用的升级外壳之一自动实现或手动更改它。

PS：shell 的工作方式也有一些变化，不会使 1.3 的 shell 在 2.x 中开箱即用。您将不得不手动解决这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:37:14.887

首先，感谢大家尝试解决这个问题。

我找到了原因。我为所有应用程序使用一个 database&core.php 文件，而 shell 不喜欢我包含这些文件的方式。更改此设置后，错误消失了。

# http - HTTP 状态 902 - 没有这样的对话

> ID：12835453
> 
> 赞同：7
> 
> 时间：2012-10-11T08:37:33.070
> 
> 标签：http, tomcat

我正在和一位同事一起做一些工作，涉及将回调 URL 从我的模块传递给他的。由于他这边的一些错误配置，回调 URL 是不同的，它从他的服务器调用了一个 URL，而不是我的。Appart 我们修复了错误，在错误配置的回调中，我得到了这个响应（我以前从未见过）：

```
HTTP Status 902 - No such conversation 
```

只是出于好奇，我四处搜索，找不到此 HTTP 状态代码的任何规范或描述，我一直认为状态代码仅从 1XX 变为 5XX（如[HTTP 1.1 规范的第 10 节所述](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）

知道在哪里可以找到描述此的官方（或非）规范吗？

仅供参考，有问题的服务器是 Tomcat 7.0.25

**编辑：**包括响应的图像

![在此处输入图像描述](../Images/fe75bad80dce0f510b6f13032e69b1e1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:59:06.587

没有官方规范对此进行定义。（您可以在此处查看已注册状态代码的列表：[http](http://www.iana.org/assignments/http-status-codes/http-status-codes.xml) ://www.iana.org/assignments/http-status-codes/http-status-codes.xml ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:43:05.363

很抱歉所有的嗡嗡声，但事实证明，一个重复使用的公司内部库是负责这个的，所以**它与 Tomcat 无关，也与 Spring 或任何东西无关**。它只是一个专有的公司响应代码。

# google-closure-compiler - 使用 calcdeps.py 构建 Closure 项目时出现“异常：重复提供”

> ID：12835459
> 
> 赞同：1
> 
> 时间：2012-10-11T08:37:49.187
> 
> 标签：google-closure-compiler, google-closure, google-closure-library

我是[Closure Tools](https://developers.google.com/closure/)的新手。在这种情况下，我有一个这样的项目结构：

![关闭项目目录截图](../Images/236bd963f2c8d74c64f72ae519bc85d9.png)

用于`calcdeps.py`组合和编译我的项目，我得到了这个异常：

> 例外：在 (D:\Tes compress\CSS\Stack\sample2.js, sample2.js) 中重复提供 (ClosureSample)

我使用以下命令来调用`calcdeps.py`：

> python calcdeps.py -i sample.js -p "D:\Tes compress" -p sample2.js -o 已编译 -c compiler.jar -f --js=sample_renaming_map.js -f --compilation_level=ADVANCED_OPTIMIZATIONS -f - -warning_level=VERBOSE -f --externs=jquery-1.7.js -f --js_output_file=sample_compiled.js

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:02:54.477

确保命名空间`ClosureSample`仅由对[`goog.provide()`](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/base.js#83)所有 JavaScript 源文件的一次调用提供：sample.js、sample2.js 等。如果多个文件包含该行`goog.provide('ClosureSample')`，您将收到重复的提供异常。

Closure 的`base.js`定义中包含以下注释`goog.provide()`：

```
// Ensure that the same namespace isn't provided twice. This is intended
// to teach new developers that 'goog.provide' is effectively a variable
// declaration. And when JSCompiler transforms goog.provide into a real
// variable declaration, the compiled JS should work the same as the raw
// JS--even when the raw JS uses goog.provide incorrectly. 
```

在命令行调用中，您可以删除`-p sample2.js`该文件，因为该文件已包含在 path`-p "D:\Tes compress`中。

> **注意：**该[`calcdeps.py`](https://developers.google.com/closure/library/docs/calcdeps)脚本已弃用。有关新推荐的依赖解析脚本的信息，请参阅使用[ClosureBuilder 。](https://developers.google.com/closure/library/docs/closurebuilder)`closurebuilder.py,`

# gwt - 水平面板 GWT 中的对齐

> ID：12835461
> 
> 赞同：0
> 
> 时间：2012-10-11T08:37:58.977
> 
> 标签：gwt, button

我想在我的 Horizo​​ntalPanel 中将一些按钮对齐到左侧。

这是我的示例代码。

```
 public void onModuleLoad() {

        HorizontalPanel buttonsPanel = new HorizontalPanel();

        Button test1 = new Button("Test1");
        Button Test2 = new Button("Test me ");
        buttonsPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_LEFT);
        buttonsPanel.setWidth("100%");
        buttonsPanel.add(test1);
        buttonsPanel.add(Test2);
        RootPanel.get("buttoncontainer").add(buttonsPanel);

    } 
```

但是这样一来，这些 Button 之间就有了很大的空间。但我希望他们团结在一起。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:45:08.380

我建议使用 FlowPanel 而不是 Horizo​​ntalPanel。对于流畅的页面布局，它几乎总是一个更好的选择。将按钮添加到 FlowPanel 并设置

```
myPanel.addStyleName("menuPanel"); 
```

添加此 CSS 规则：

```
.menuPanel input {
    float: left;
    margin-right: 10px;
} 
```

如果您使用标签看起来像按钮，则在 CSS 规则中使用 div 而不是 input，如果您使用图像作为按钮，则使用 img。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:25:12.450

问题如下：

当您将项目放置在比内部项目的共同宽度更宽的水平面板中时，项目的放置将在水平面板指定的区域内完成。

因此，在这种情况下，如果您想将它们粘在一起，请将水平面板的起始宽度设置为 0px，当您添加儿童按钮时，它将尽可能扩大容器所允许的范围。

```
HorizontalPanel buttonsPanel = new HorizontalPanel();

Button test1 = new Button("Test1");
Button Test2 = new Button("Test me ");
//You do not need the next line.
//buttonsPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_LEFT);
buttonsPanel.setWidth("0px");
buttonsPanel.add(test1);
buttonsPanel.add(Test2);
RootPanel.get("buttoncontainer").add(buttonsPanel); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T13:21:17.670

我的建议如下，这样我们就可以选择将整个面板对齐到您想要的任何位置，同时仍然保持这些按钮彼此相邻。

```
HorizontalPanel buttonsPanel = new HorizontalPanel();

        // set your width here, at what position we want to see your panel. 
        // I set 100%, so that it occupies entire width.
        buttonsPanel.setWidth("100%");
        buttonsPanel.setTableWidth("100%");
        Button test1 = new Button("Test1");
        Button test2 = new Button("Test2");

        TableData test1layoutData = new TableData();

        test1layoutData.setHorizontalAlign(HorizontalAlignment.RIGHT);
        TableData test2layoutData = new TableData();
        test2layoutData.setHorizontalAlign(HorizontalAlignment.LEFT);
        buttonsPanel.add(test1,test1layoutData);
        buttonsPanel.add(test2,test2layoutData);

RootPanel.get("buttoncontainer").add(buttonsPanel); 
```

**屏幕截图：（忽略图表，只看底部的按钮）**

![在此处输入图像描述](../Images/8bc81c27076f510e3092afad149a0e05.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T14:10:49.753

使控件向右或向左对齐的最佳方法是编写两行 CSS，如下所示：

```
.buttonToLeft
{
    float: left;
    left: 100%;
} 
```

然后将它们分配给控件，如下所示：

```
HorizontalPanel hpButtons = new HorizontalPanel();
hpButtons.addStyleName("buttonToLeft"); 
```

# sql - 使用 NOT EXISTS 的 SQL 查询以确定另一个属性是否具有某些值

> ID：12835462
> 
> 赞同：0
> 
> 时间：2012-10-11T08:38:02.507
> 
> 标签：sql, subquery, exists

在这里与我的 SQL 查询作斗争。我有一张桌子：

APPS(id, game) 其中 id 是主键。

我试图做的是显示所有使用至少所有具有 id 为“Tim”的人所做的游戏的 id。我有一个有效的查询，并返回我需要的内容，但我是从论坛拼凑起来的。所以我真正想要的是查询如何工作的快速而基本的概要。不需要详细的细节，因为我了解大多数术语，而只是查询的作用，以及它如何确定正确的记录。

我的查询是：

```
SELECT id
FROM APPS X
WHERE NOT EXISTS
     (SELECT *
      FROM APPS Y
      WHERE id='Tim' AND NOT EXISTS
           (SELECT *
            FROM APPS Z
            WHERE Z.id = A.id AND Z.id = Y.id)); 
```

非常感谢您的帮助！

编辑：查询工作正常，但我所追求的是它是如何工作的以及它如何返回它所做的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:56:05.083

> 查询工作正常，但我所追求的是它是如何工作的以及它如何返回它所做的记录。

对，所以你遇到了称为关系除法的问题。Joe Celko 写了[一篇很好的文章](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。

您发布的查询真的很奇怪：

```
WHERE Z.id = A.id AND Z.id = Y.id 
```

在关系除法中，最里面的`not exists`查询有两个针对不同列的相等语句。例如，来自 Joe Celko 的帖子：

```
WHERE (PS1.pilot_name = PS2.pilot_name)
      AND (PS2.plane_name = Hangar.plane_name) 
```

比较`pilot_name`和`plane_name`有意义，而比较`id`两次根本没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:44:22.623

```
SELECT prefiltered.id
FROM (select count(distinct game) games from apps where id='Tim') tim
join (select id from apps
      where id<>'Tim'
      group by id
      having count(distinct game) >= tim.games) prefiltered
JOIN apps a on a.id = 'Tim'
JOIN apps b on b.id = prefiltered.id and b.game = a.game
group by prefiltered.id
having count(distinct b.game) = tim.games 
```

有点冗长，对于小桌子来说可能有点矫枉过正。这个想法是预先计算 Tim 拥有的游戏，并快速预过滤至少有那么多游戏的 id。只有这样，才会查询完整的表，将 Tim 的游戏与过滤后的 id 匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:41:31.363

```
Please provide colname as per common between table :

SELECT id
FROM APPS X
WHERE colname NOT in
     (SELECT colname
      FROM APPS Y
      WHERE id='Tim' AND colname NOT in
           (SELECT colname
            FROM APPS Z
            WHERE Z.id = A.id AND Z.id = Y.id)); 
```

# python - django：formfield_for_foreignkey 不允许我创建新的内联对象

> ID：12835464
> 
> 赞同：2
> 
> 时间：2012-10-11T08:38:13.310
> 
> 标签：python, django, django-admin

我有以下模型：

```
class Benchmark(models.Model):
    name = models.CharField(max_length=50)
    location = models.CharField(max_length=150)
    platforms = models.ManyToManyField('Platform')

class Platform(models.Model):
    name = models.CharField(max_length=50)

class KnobItem(models.Model):
    value = models.CharField(max_length=150)
    knob = models.ForeignKey('Knob')

class BenchmarkKnobItem(KnobItem):
    benchmark = models.ForeignKey('Benchmark')

class PlatformKnobItem(KnobItem):
    platform = models.ForeignKey('Platform')

class Knob(models.Model):
    name = models.CharField(max_length=150) 
```

在管理员中，我有`BenchmarkKnobItem`和`PlatformKnobItem`作为内联。添加新基准旋钮的下拉菜单具有同时列出可用平台旋钮的不良效果。然后，我`formfield_for_foreignkey`将可用旋钮的方法用于它们各自的基准或平台模型。

```
def formfield_for_foreignkey(self, db_field, request, **kwargs):
    if db_field.name == "knob":
        kwargs["queryset"] = BenchmarkKnobItem.objects.all()
    return super(BenchmarkKnobItemInline, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

不幸的是，这不允许我创建一个新的内联对象。管理员说“选择一个有效的选择。该选择不是可用的选择之一。” 我假设这是因为该对象尚未保存。

是否有人对如何允许我创建新旋钮同时仍将可用选择限制为各自类型有任何想法？

# php - 无法将数据从 Android 发送到 PHP

> ID：12835465
> 
> 赞同：1
> 
> 时间：2012-10-11T08:38:22.777
> 
> 标签：php, android, http, tracking

我正在尝试将日期从 Android 发送到 PHP。我在启动屏幕活动中添加了一些代码以便能够做到这一点。但是，它给了我一个错误。我不知道我错过了什么。下面是完整的代码：

```
 public class Splash extends Activity {

DBAdapter db = new DBAdapter(this);
protected int _splashTime = 5000; 
private Thread splashTread;
private String android_id;
private String formattedDate;
SharedPreferences prefs = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    Calendar c = Calendar.getInstance();
    System.out.println("Current time => " + c.getTime());

    SimpleDateFormat df = new SimpleDateFormat("MM'/'dd'/'yyyy");
    formattedDate = df.format(c.getTime());

    android_id =Secure.getString(this.getContentResolver(),
            Secure.ANDROID_ID); 

    Log.d("IP", getIpAddress());
    Log.d("id", android_id);
    Log.d("date",""+ formattedDate);

    final Splash sPlashScreen = this; 

    splashTread = new Thread() {
        @Override
        public void run() {
            try {                   
                synchronized(this){
                    wait(_splashTime);
                }

            } catch(InterruptedException e) {} 
            finally {
                finish();

                Intent i = new Intent();
                i.setClass(sPlashScreen, Tab.class);
                startActivity(i);

                try {
                    splashTread.join();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    };

    splashTread.start();
    prefs = getSharedPreferences("com.sample.package", MODE_PRIVATE);

}

@Override
public void onBackPressed() {
}
public String getIpAddress() {
try {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
            InetAddress inetAddress = enumIpAddr.nextElement();
            if (!inetAddress.isLoopbackAddress()) {
                return inetAddress.getHostAddress().toString();
            }
        }
    }
} catch (SocketException ex) {
    Log.e("LOG", ex.toString());
}
return null;
}

@Override
protected void onResume() {
super.onResume();

if (prefs.getBoolean("firstrun", true)) {
    prefs.edit().putBoolean("firstrun", false).commit();
    Log.d("FIRST LAUNCH?", "YES");
    sendData();

}else{
    Log.d("FIRST LAUNCH?", "NO");
 }
}

public void sendData() {
HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://whatever.php");
try{
    List<BasicNameValuePair> deviceInfo = new ArrayList<BasicNameValuePair>(3);
       deviceInfo.add(new BasicNameValuePair("ip", getIpAddress()));
       deviceInfo.add(new BasicNameValuePair("date", formattedDate));
       deviceInfo.add(new BasicNameValuePair("id", android_id));
       httppost.setEntity(new UrlEncodedFormEntity(deviceInfo));
       HttpResponse response = httpclient.execute(httppost);
       HttpEntity entity = response.getEntity();
       InputStream is = entity.getContent();
       Log.i("postData", response.getStatusLine().toString());
 } catch (IOException e) {
      Log.e("log_tag", "Error in http connection "+e.toString());

 }

}
} 
```

我把活动的所有代码贴出来了，这样比较容易理解。

编辑：

```
10-11 17:10:14.885: E/log_tag(352): Error in http connection 
10-11 17:10:14.885: E/log_tag(352): java.net.UnknownHostException: xxxxxxxx.ph
10-11 17:10:14.885: E/log_tag(352):     at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
10-11 17:10:14.885: E/log_tag(352):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
10-11 17:10:14.885: E/log_tag(352):     at java.net.InetAddress.getAllByName(InetAddress.java:256)
10-11 17:10:14.885: E/log_tag(352):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
 10-11 17:10:14.885: E/log_tag(352):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-11 17:10:14.885: E/log_tag(352):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
 10-11 17:10:14.885: E/log_tag(352):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
10-11 17:10:14.885: E/log_tag(352):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-11 17:10:14.885: E/log_tag(352):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-11 17:10:14.885: E/log_tag(352):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-11 17:10:14.885: E/log_tag(352):     at com.mexican.recipes.Splash.sendData(Splash.java:142)
10-11 17:10:14.885: E/log_tag(352):     at    com.mexican.recipes.Splash.onResume(Splash.java:125)
10-11 17:10:14.885: E/log_tag(352):     at   com.mexican.recipes.Splash.onCreate(Splash.java:92)
10-11 17:10:14.885: E/log_tag(352):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-11 17:10:14.885: E/log_tag(352):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-11 17:10:14.885: E/log_tag(352):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-11 17:10:14.885: E/log_tag(352):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-11 17:10:14.885: E/log_tag(352):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-11 17:10:14.885: E/log_tag(352):     at android.os.Handler.dispatchMessage(Handler.java:99)
 10-11 17:10:14.885: E/log_tag(352):    at android.os.Looper.loop(Looper.java:123)
10-11 17:10:14.885: E/log_tag(352):     at     android.app.ActivityThread.main(ActivityThread.java:3683)
10-11 17:10:14.885: E/log_tag(352):     at java.lang.reflect.Method.invokeNative(Native Method)
10-11 17:10:14.885: E/log_tag(352):     at java.lang.reflect.Method.invoke(Method.java:507)
10-11 17:10:14.885: E/log_tag(352):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-11 17:10:14.885: E/log_tag(352):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-11 17:10:14.885: E/log_tag(352):     at dalvik.system.NativeStart.main(Native Method) 
```

此外，它不再显示我的启动画面。

编辑：

这些是我的权限：

```
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# facebook - 使用测试用户帐户发布操作时 Facebook Open Graph 错误

> ID：12835467
> 
> 赞同：1
> 
> 时间：2012-10-11T08:38:23.223
> 
> 标签：facebook, facebook-opengraph

我正在尝试提交一个名为“Watch”的内置 Facebook Open Graph 操作，但是我不断收到 Facebook 测试帐户用户的错误，并且无法弄清楚为什么 Facebook 拒绝他们自己的“操作”和他们自己的“测试用户” “？

根据 Facebook，如果不使用测试用户帐户，您将无法提交其内置的 Facebook 操作：

```
Built-in Action Types require that you provide instructions for using your app's Open Graph integration as your Open Graph Test User in a functioning test environment. Failure to provide a functioning test environment will result in rejection of your Action Type. 
```

我有两个测试帐户并选择了“启用 Ticker”按钮，但是当我使用测试用户帐户发布到用户时间线/代码时，我仍然收到此错误：

```
statusCode:  500
headers:  { 'access-control-allow-origin': '*',
'cache-control': 'no-store',
'content-type': 'text/javascript; charset=UTF-8',
expires: 'Sat, 01 Jan 2000 00:00:00 GMT',
pragma: 'no-cache',
'www-authenticate': 'OAuth "Facebook Platform" "unknown_error" "An unexpected error has occurred. Please retry your request later."',
'x-fb-rev': '645172',
'x-fb-debug': 'YwWqAJLmmVbUhG20kfBzoFaX8vlQ/BH25Xzh3CnakOk=',
date: 'Thu, 11 Oct 2012 08:31:40 GMT',
connection: 'keep-alive',
'content-length': '123' } 
```

这就是我要发布的内容：

```
{"host":"graph.facebook.com","port":"443","path":"/me/video.watches?access_token=AAAClql9ZBqlMBAExxkqIGs08NBFJ9FKVfEhQmc5C1ZCBZALgPPsVbMuaOXXsYRaAavX2AsjUWZB2IYTkXm8cyjHAJJqNypbZBKPUlnr5FugZDZD&video=https%3A%2F%2Fpazooza.azurewebsites.net%2FpazoozaVideo%3FogType%3Dfacebook%26id%3D0000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999999_0000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999991","method":"POST"} 
```

愚蠢的是，它适用于普通（真实用户）帐户，但不适用于 Facebook 自己的测试帐户。任何人都知道他们认为问题可能是什么？我还需要为这些测试帐户启用其他功能以使它们使用操作吗？

干杯

更新：我还检查了权限 = {"data":[{"installed":1,"publish_actions":1,"user_videos":1,"bookmarked":1}]};

所以权限不是问题。我已经删除了测试用户并重新创建了另一个，但仍然没有运气......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:42:13.347

它可能与： [无法以测试用户身份发布 Open Graph 操作](https://stackoverflow.com/questions/8898851/unable-to-post-open-graph-actions-as-a-test-user)

请注意，沙盒模式现在位于“设置”->“基本”上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:24:40.067

问题有两个方面：

1) Facebook 的提交操作流程有一些限制，即测试操作的测试人员不会就“他们为什么不批准您的操作”给您太多反馈。他们只是为您提供指向文档的链接以及您想从中锻炼的原因，为什么您的操作不适用于他们的测试用户帐户。这个故事的另一部分是测试您的操作的 FB 测试人员创建“新”测试用户帐户，而不管您创建的测试用户帐户和他们使用它们。它们有一个名称，例如“Auth Preview User”。

2) 问题的原因与我向所有尝试注册和使用我的应用的 Facebook 用户提出的请求有关。我正在调用图形 api 以将每个用户的访问令牌有效地延长至 60 天（FB 应用程序允许的最大值）。然而，这些由 FB 测试人员创建的“新”测试用户帐户似乎表现出奇怪的行为，并且寿命只有 2 小时。每当我尝试扩展其中一个帐户时，都会出现错误。但是在第二个请求中（例如，如果我留在我的 Canvas 应用程序中并且只是单击了另一个链接）Facebook 会将同一个用户发回给我，但会使用新的 access_token 和该 access_token 的到期日期？我认为这个新令牌的有效期要长得多，有几百年。所以我只是将它存储在旧的顶部并消除了我的逻辑错误。显然我不知道为什么 FB 会这样做，但是嗯！真是太棒了！

无论哪种情况，我认为我已经了解到，每当您向 FB 提交操作时，您都会在发送指令的开头放置尽可能多的信息以复制您的操作。我说的是这样的：

（我已经用你们创建的所有 3 个预览测试用户帐户测试了这个操作，每个都上传了一个示例视频，你收到什么错误？）

1.  第一条指令
2.  第二条指令
3.  ...

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T07:17:05.907

Action 类型有审核流程。您需要提交 Action 类型 Like。如果您不提交这个，它仅适用于创建应用程序的帐户或您添加到该应用程序的任何测试人员。检查应用程序设置并提交以供审核。希望它会有所帮助

# asp.net-mvc - 未发生 DbUpdateConcurrencyException

> ID：12835469
> 
> 赞同：1
> 
> 时间：2012-10-11T08:38:33.190
> 
> 标签：asp.net-mvc, entity-framework

我目前正在关注本教程

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

但是，我似乎无法让并发异常 (DbUpdateConcurrencyException) 发生。

我在相关表中创建了时间戳字段（在我的项目中称为“组”）。

我的代码如下

在 GroupController.cs

```
[HttpPost]
public ActionResult Edit(Group group)
{
    try
    {
        if (ModelState.IsValid)
        {

            medEntitiesDB.Entry(group).State = EntityState.Modified;
            medEntitiesDB.SaveChanges();
            return RedirectToAction("Index");

        }

    }

    catch (DbUpdateConcurrencyException ex)
    {
        var entry = ex.Entries.Single();
        var databaseValues = (Group)entry.GetDatabaseValues().ToObject();
        var clientValues = (Group)entry.Entity;
        if (databaseValues.GroupName != clientValues.GroupName)
            ModelState.AddModelError("Name", "Current value: "
                + databaseValues.GroupName);
        ModelState.AddModelError(string.Empty, "The record you attempted to edit "
            + "was modified by another user after you got the original value. The "
            + "edit operation was canceled and the current values in the database "
            + "have been displayed. If you still want to edit this record, click "
            + "the Save button again. Otherwise click the Back to List hyperlink.");
        group.Timestamp = databaseValues.Timestamp;
    }
    catch (DataException)
    {
        //Log the error (add a variable name after Exception)
        ModelState.AddModelError(string.Empty, "Unable to save changes. 
          Try again, and if the problem persists contact your system administrator.");
    }

    return View(group);
} 
```

我的“小组”课程如下

```
namespace MyClasses
{
using System;
using System.Collections.Generic;

using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

 public partial class Group
 {

    public System.Guid GroupID { get; set; }
    public string GroupName { get; set; }
    public System.DateTime DateCreated { get; set; }

    [Timestamp]
    public byte[] Timestamp { get; set; }
 }
} 
```

有谁知道为什么没有发生此异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:24:22.967

确保您已通过模型绑定提供 Timestamp 值。

而且您还需要由另一个人更改您的组对象。您可以打开编辑页面两次并更改某些字段，然后单击保存按钮。应该出现异常。

# python - 从对象值创建python字符串

> ID：12835471
> 
> 赞同：1
> 
> 时间：2012-10-11T08:38:41.803
> 
> 标签：python, string

我不知道描述我真正要寻找的东西的最佳方式可能这个例子是解释我的问题的最佳方式：

我有以下字符串列表（我的对象名称）：

```
mynames = ["A","B","C"] 
```

我的对象本身定义为：

```
A = "Hello"
B = 12
C = "This is C" 
```

现在我想创建一个逗号分隔的字符串，其中包含“mynames”中提到的对象的所有值，例如：

```
myresult = "Hallo,12,This is C" 
```

当然我可以像手动一样：

```
",".join([A,str(B),C]) 
```

但是有没有办法根据列表“mynames”创建结果，比如“，”.join（mynames）？

谢谢，

/j

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:43:49.677

显而易见的答案是使用 globals() 或 locals()

```
lst = [globals()[x] for x in 'A', 'B', 'C'] 
```

正确的是

```
 don't do that 
```

每次您尝试在 python 中操作变量名时，您都在做错事。使用适当的数据结构，例如 dict。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:03:33.187

如其他答案中所述，您可以使用 eval、literal-eval、globals、locals 或其他此类废话来完成您的任务 - 但您的方法是错误的。

正如我认为在其他答案中提到的那样，您最好使用不同的数据结构，也许是字典。例如，在您的示例中：

```
A = "Hello"
B = 12
C = "This is C" 
```

可以通过以下方式完成：

```
my_dict = {}
my_dict["A"] = "Hello"
my_dict["B"] = 12
my_dict["C"] = "This is C" 
```

然后你可以简单地这样做：

```
mynames = ["A","B","C"]
print [my_dict[key] for key in mynames] 
```

在控制台上，结果如下：

```
>>> my_dict = {}
>>> my_dict["A"] = "Hello"
>>> my_dict["B"] = 12
>>> my_dict["C"] = "This is C"
>>> mynames = ["A","B","C"]
>>> print [my_dict[key] for key in mynames]
['Hello', 12, 'This is C'] 
```

现在把它们变成一个字符串很简单，我相信你可以从这里得到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:44:38.697

`eval`你的朋友在这里吗：

```
",".join([ str(eval(e)) for e in mynames ]) 
```

# math - 如何检测谷歌地图上重叠的两个或多个圆圈

> ID：12835474
> 
> 赞同：-1
> 
> 时间：2012-10-11T08:38:55.070
> 
> 标签：math, google-maps-api-3, physics

我在随机坐标上有随机标记（矢量圆圈）。如果我有圆的半径，那么我怎么能找到两个或多个圆重叠与否？

你对`zoom`水平也有任何想法吗？在不同的缩放级别中，圆圈可能重叠也可能不重叠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:29:57.737

如果圆心之间的距离小于两个半径之和，则它们重叠。如果您在真实距离内工作，则缩放无关紧要。

# architecture - 使用 AMQP 收集事件

> ID：12835475
> 
> 赞同：0
> 
> 时间：2012-10-11T08:38:56.740
> 
> 标签：architecture, scalability, amqp

对于简单的统计数据收集场景，AMQP 是否比临时实现有任何优势？它的工作原理是这样的 - 客户端将事件（比我们愿意放入持久存储中的更多）发送到（几个）Web Worker，Worker 聚合它们并写入单个数据库。我认为我不应该考虑为此使用 AMQP，因为我仍然需要网络工作者通过 HTTP 接收来自客户端的事件并发布它们。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:08:44.843

您可以为此使用 AMQP，但最好使用统计数据收集软件。例如，如果您为数据收集/绘图服务设置了 Graphite，并添加了一个`statsd`前端，那么您可以通过 UDP（开销最低）发送数据点，并让 statsd 聚合并写入 Graphite 数据库。关键是`statsd`支持统计收集。您将 statsd 服务器配置为收集 10 个数据点中的 1 个，然后 statsd 客户端将每 10 个数据点中的一个随机发送到服务器（限制网络流量）并`statsd`计算总计 10 次的聚合。例如，如果您在聚合时间段内获得 3 个数据点，它们的值为 38、42 和 40，则 statsd 将记录 40 个平均数据点和 30 个事件的事件量。

如果您决定走这条路，请务必考虑使用与 statsd 兼容但支持更多测量类型的 metricsd [https://github.com/mojodna/metricsd](https://github.com/mojodna/metricsd)

# javascript - Ruby On Rails 3、Pusher、Javascript、AJAX、慢请求

> ID：12835478
> 
> 赞同：0
> 
> 时间：2012-10-11T08:39:00.603
> 
> 标签：javascript, ruby, ajax, ruby-on-rails-3, pusher

我正在使用 Ruby on Rails 3 后端和 HTML AJAX 前端构建一个 facebook 聊天应用程序。对于我使用[Pusher](http://www.pusher.com)的套接字。一切正常，但有一个缺点，那就是性能。

对 Pusher API 的请求大约需要 300 毫秒，这太慢了。

触发 Pusher API 的代码是这样的：

```
Pusher['presence-chat'].trigger!( 'message_added', { message: message, name: session[:user][:fullname], username: session[:user][:username] } ) 
```

该`Pusher`课程来自推动者开发人员制作的宝石。

我最近在他们的论坛上发帖，正在等待答案，但我想知道这里是否有人可以为我指出正确的方向以加快速度。

仅供参考：

运行应用程序的服务器在荷兰，我猜他们的服务器不是。

所以问题是，是什么导致一个简单`Net::HTTP`的（因为这就是 Pusher-gem 正在使用的）这么慢？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:54:54.640

所以，我已经从我的标准 WEBrick 服务器切换到 Thin（= Evented Server）。

我将触发方法更新为异步触发方法：

```
Pusher['presence-chat'].trigger_async( 'message_added', { message: message, name: session[:user][:fullname], username: session[:user][:username] } ) 
```

现在请求只需 2 - 4 毫秒！

感谢菲尔@Pusher！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:51:39.617

尝试使用一些后台作业推送到免费的 api

sidekiq、延迟工作、resque 等有一些很棒的宝石

还有railscasts可以帮助您轻松理解它

[http://railscasts.com/episodes?utf8=%E2%9C%93&search=background+job](http://railscasts.com/episodes?utf8=%E2%9C%93&search=background+job)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:00:02.863

在前面使用 node.js 和 RoR 的套接字怎么样，您将通过此配置获得最大的性能

你可以参考这个 [http://liamkaufman.com/blog/2012/02/25/adding_real-time_to_rails_with_socket.IO_nodejs_and_backbonejs_with_demo/](http://liamkaufman.com/blog/2012/02/25/adding_real-time_to_rails_with_socket.IO_nodejs_and_backbonejs_with_demo/)

# reverse-proxy - Squid 2.7 和客户端标头 max-age=0

> ID：12835484
> 
> 赞同：0
> 
> 时间：2012-10-11T08:39:13.070
> 
> 标签：reverse-proxy, squid

我试图在同一台机器上的 php 应用程序前面使用 squid 作为反向缓存代理，并且永远不要让用户到达后端，总是在后台加载陈旧的缓存。

* * *

我在端口 80 中使用带有 Centos 6.3 (x86_64) 的自编译 squid 2.7-Stable9，而 apache+php 与端口 8000 在同一台机器上。

apache+php 响应头将此发送给 squid：

```
header('Cache-Control: max-age=10, stale-while-revalidate=15, stale-if-error=20');
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
```

当我要求 squid 页面时，第一次重新验证，下一次使用总是陈旧的，但这适用于 Firefox WebDevelopersTools 扩展的**DISABLE CACHE**缓存选项。

不同之处在于，当缓存未禁用时，客户端发送**Cache-control: max-age=0**和**If-Modified-Since**并且 squid 始终连接到后端并重新验证。

在 Squid 3.2 中，它使用**ignore-cc**按预期工作，但在 2.7 中没有这样的选项。

这是我的 squid.conf：

```
# http_port public_ip:port accel defaultsite= default hostname, if not provided
http_port 80 accel defaultsite=mydomain.com

# IP and port of your main application server (or multiple)
cache_peer 127.0.0.1 parent 8000 0 no-query originserver name=main
cache_peer_domain main mydomain.com

# Do not tell the world that which squid version we're running
httpd_suppress_version_string on

# Remove the Caching Control header for upstream servers
header_access Cache-Control deny all

# log all incoming traffic in Apache format
logformat combined %>a %ui %un [%tl] "%rm %ru HTTP/%rv" %Hs %<st "%{Referer}>h" "%{User-Agent}>h" %Ss:%Sh
access_log /usr/local/squid/var/logs/squid.log combined all

cache_effective_user squid

refresh_pattern nocache=true 0 0% 0

icp_port 0 
```

我想在 php 应用程序中选择缓存时间，并且永远不要让用户看到重新验证的延迟，这就是我使用 2.7 版和 stale-while-revalidate 的原因。

* * *

启用缓存的请求示例：

```
GET /some-page HTTP/1.1
Host: mydomain.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1 FirePHP/0.7.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: es-es,es;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
x-insight: activate
If-Modified-Since: Thu, 11 Oct 2012 10:14:52 GMT
Cache-Control: max-age=0

HTTP/1.0 200 OK
Date: Thu, 11 Oct 2012 10:29:31 GMT
Server: Apache/2.2.22 (PowerStack)
Last-Modified: Thu, 11 Oct 2012 10:29:32 GMT
Content-Type: text/html; charset=UTF-8
X-Cache: MISS from localhost
X-Cache-Lookup: HIT from localhost:80
Via: 1.1 localhost:80 (squid)
Connection: close 
```

禁用缓存的示例（我想要发生的事情）：

```
GET /some-page HTTP/1.1
Host: mydomain.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1 FirePHP/0.7.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: es-es,es;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
x-insight: activate

HTTP/1.0 200 OK
Date: Thu, 11 Oct 2012 10:36:53 GMT
Server: Apache/2.2.22 (PowerStack)
Last-Modified: Thu, 11 Oct 2012 10:36:53 GMT
Content-Type: text/html; charset=UTF-8
Age: 2
Content-Length: 16725
X-Cache: HIT from localhost
X-Cache-Lookup: HIT from localhost:80
Via: 1.1 localhost:80 (squid)
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:03:40.037

此处描述的解决方案：[如何在 squid 2.7 中使用 3.1 功能“ignore-cc”](https://stackoverflow.com/questions/12846107/how-to-use-in-squid-2-7-the-3-1-feature-ignore-cc)

* * *

好吧，在尝试了所有替代方案之后，我修改了源代码以实现该功能。

我在**Squid-2.7-stable9**中更改了文件**src/** refresh.c : *282*：

```
282:    if (request) { 
```

为了

```
282:    if (request && FALSE) { 
```

* * *

他们在 3.X 中做了类似的事情来实现 ignoreCc：

```
269:    if (request && !request->flags.ignore_cc) { 
```

按预期工作。

# c++ - OpenCv 使用 exp 和 Mat

> ID：12835485
> 
> 赞同：0
> 
> 时间：2012-10-11T08:39:14.360
> 
> 标签：c++, opencv

我想根据这个公式在 OpenCV 中执行矩阵计算：

```
newMat = 1 / ( 1 + exp( scalar * ( otherScalar - Matrix ) ) ) 
```

在 OpenCV 中是否有一种简单的方法可以做到这一点，还是我必须在 for 循环中计算？对我来说主要问题是 exp( Matrix )。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:16:40.037

Maecky 的答案非常好 - 对于 1 通道图像。

如果您的图像有多个频道，乐趣就开始了。由于某些原因，

```
float(scalar) - _3ChannelMat 
```

仅在第一个通道上应用运算，而乘法

```
float(scalar2) * _3channelMat 
```

在图像的所有通道上完成。有趣，不是吗？

解决方案是使用 cv::Scalars：

```
newMat = cv::Scalar(0.4, 0.4, 0.4) * ( cv::Scalar(255, 255, 255) - _3channelMat); 
```

我不久前就这种奇怪的行为提交了一个错误，但还没有答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T09:44:33.860

好的，我自己找到了答案，如果有人有同样的问题，这里是代码：

```
newMat = float(scalar) * ( float(otherScalar) - newMat);
cv::exp( newMat, newMat );
newMat= 1.0f / ( 1.0f + newMat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:55:28.867

@Maecky 您可能只是在答案中写了一个错误。

*`1+A`通常表示`I+A`*和 1/A 表示反转（即 A^{-1}）其中`I`是单位矩阵 - 在 matlab 和 opencv 中称为眼睛。（此外 F/A === F*A^{-1}）

在您的解决方案中，您将添加一个全为矩阵`newMat`（在 matlab 和 opencv 中称为矩阵），而不是眼睛。

正确（即计算 (I + exp(scalar*(otherScalar*I-Matrix)))^{-1} ）：

```
using namespace cv;
Size s = Matrix.size();
int t = Matrix.type();
Mat newMat;
Mat I = Mat::eye(s,t);

exp( scalar * ( otherScalar*I - Matrix ), newMat );
newMat = (I + newMat).inv(); 
```

# windows - 每次蓝牙通信都使用 Windows 蓝牙驱动程序？

> ID：12835486
> 
> 赞同：0
> 
> 时间：2012-10-11T08:39:19.307
> 
> 标签：windows, bluetooth, driver, wdm

我正在尝试为 Windows Vista 及更高版本中的蓝牙开发过滤器驱动程序，我想知道是否每个蓝牙相关操作都必须通过 Windows 蓝牙驱动程序堆栈，或者它是否仅限于 Microsoft 蓝牙堆栈。

例如，我有一个来自 IVT 的 USB 蓝牙收发器，它使用 BlueSoleil。BlueSoleil 栈可以在不经过蓝牙驱动栈的情况下执行一些蓝牙标准操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:19:25.190

堆栈中的每个驱动程序都是可替换的。只要替换符合操作系统定义（正确注册，提供所需的回调），就操作系统而言就可以了。每个组件负责另一部分功能，因此替换它将替换驱动程序堆栈的相应功能。在此处查看更多信息：[什么是 Windows 操作系统中的驱动程序堆栈？](https://stackoverflow.com/questions/4254060/what-is-a-driver-stack-in-the-windows-os)

# c++ - C++ time.h difftime

> ID：12835496
> 
> 赞同：0
> 
> 时间：2012-10-11T08:40:03.587
> 
> 标签：c++, time, truncate, floor

我在解释`difftime`我生成的日志中的数量时遇到了麻烦：

我测量一些方法调用的持续时间，并使用以下语法记录它：

```
time_t end, start ;

time(&start);

obj->sqp_func(this);

time(&end);

t_time = difftime(end, start) ;

sqp << "time " << endl ;
sqp << (double) end <<  endl ;
sqp << (double) start << endl ; 
sqp << (double) t_time << endl ; 
```

类型在哪里`sqp`。`ofstream`

我得到，应该在哪里打印`t_time`（使用 type `double`），值 210。

那是210秒吗？它是被截断的，还是被截断的？

例如，如何在几秒钟内获得最多 2 个浮点的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:04:47.290

您需要使用更高分辨率的计时器（如果您不能使用 C++11）。-[像这样](http://linux.die.net/man/3/clock_gettime)。对于你的情况`clockid_t - CLOCK_MONOTONIC`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:49:24.613

`difftime`返回**double**类型**的秒数差异**[http://www.cplusplus.com/reference/clibrary/ctime/difftime/](http://www.cplusplus.com/reference/clibrary/ctime/difftime/) - 有关详细说明，请参阅此内容

# makefile - 如何从 Makefile 中获取已编译文件的列表？

> ID：12835499
> 
> 赞同：3
> 
> 时间：2012-10-11T08:40:13.897
> 
> 标签：makefile

我有`Makefile`一个项目。它是有效的，并且有效：如果我输入`make`，我将在当前文件夹中编译一个二进制文件。我想找到一种以编程方式（从脚本）获取二进制文件名称的方法，或者如果`make`产生多个文件，则获取这些文件的完整列表。

我想可以有三种方法来做到这一点：

1.  执行`make -d`或类似的东西并分析其输出以获取文件名。它有多可靠？它适用于所有`Makefile`的还是只适用于最标准的？
2.  调用一些`make`清理所有目标文件的特殊命令，所以我*只*在构建目录中得到生成的二进制文件。有这样的命令吗？
3.  解析`Makefile`的内容并使用外部实用程序从中获取所有信息。再次，它有多可靠？

我想为任何`Makefile`基于项目的项目找到一个通用的解决方案，但如果 CMake 生成的项目有一个特定的解决方案，它在某些情况下也会对我有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:05:38.783

这是一个有趣的问题。一个问题：什么是二进制？

假设我有一个 Makefile 看起来像

```
foo.pdf foo.aux: foo.tex
    pdflatex foo

foo.tex: foo.tex.in edits.sed
    sed -f edits.sed foo.tex.in >foo.tex

PRODUCTS: foo.pdf 
```

（也就是说，不仅仅是构建可执行程序的 Makefile）。是`foo.pdf`二进制吗？是`foo.aux`，哪个是次要产品？是`foo.tex`，哪个是中间的，哪个不是任何标准意义上的“二进制”？是`PRODUCTS`，这是一个虚拟目标，但它仍然是依赖规则的目标，甚至是“二进制”？沿着这些思路思考，我怀疑对于您似乎正在寻找的“二进制”的定义，没有真正有用的，甚至是稍微固定的定义。也就是说，我怀疑您提出的问题可能比看起来更模糊。

因此，最好提高一个级别，忘记二进制文件，并询问是否有任何方法可以提取 Makefile 的依赖关系图。一旦你得到了它，你就可以查看它并确定那些你正在寻找的东西是“二进制”的。

您如何获得该依赖关系图？GNU 'make' 信息页面提到了依赖关系图，但没有更多细节，特别是没有提供一种发出它内部生成的依赖关系图的方法。

事实上，通过分析 Makefile 为自己简单地构建图形可能相当容易。我们开始了——谷歌搜索“makefile parser”确实产生了一些结果：Perl 仅据我所知，但你可能可以用它做点什么。

这是一个很长的说法，我想不出一种更快的方法（修补 automake 将是一条路线，如果您通过该路线生成这些 Makefile，但您的问题表明并非如此）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T09:28:06.513

在 Makefile 中找到一个`clean`具有如下定义的目标是很常见的：

```
clean:
    rm -rf *.o core *.stackdump 
```

然后调用`make clean`会导致该目标被“构建”，即当前工作目录中具有指定名称的所有文件都将被删除，并带有极大的偏见。

这大约是您的选项 2 所建议的；您可能可以编写`clean`每次`make`执行时都“构建”的makefile。我认为这比解析 Makefile 或分析`make -d`. 这可能也是您规避@Norman Gray 回答中提出的问题的一种简单方法。

# java - 如何在容器中存储不同类型的对象？

> ID：12835500
> 
> 赞同：13
> 
> 时间：2012-10-11T08:40:14.950
> 
> 标签：java, containers

我想知道我是否可以拥有一个数组（或基本上是一个表），其中每个元素都是一组不同类型的对象。我的意思是我想创建这样的东西（我知道它的语法不正确，只是想证明我的想法）：

```
List<String, int, double, Date, ... , etc > list_name 
```

我这样做是为了确保当我将所有这些信息保存到我的数据库时，我会将所有这些信息都放在数据库的同一个条目中。这是因为我从不同站点进行了一些网络抓取以收集所有这些数据，即在列表中，字符串可能来自站点 A，int 可能来自站点 B，等等。我发现由于某些原因可能会遗漏一些信息（比如说，对于列表的特定元素，站点 A 的字符串可能丢失，其他数据就在那里，非常好。）。如果我将这些数据存储到单独的列表中，恐怕会有一些数据不匹配。

现在我的解决方案是创建一个类，比如 ClassA ：

```
ClassA{

public String info1
public int info2
public double info3
..
..
public wtever info

} 
```

然后我将有一个 ClassA 列表

我想知道是否有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:46:09.413

> 我这样做是为了确保当我将所有这些信息保存到我的数据库中时，我会将所有这些信息保存在数据库的同一个条目中。

是的，您通过创建一个包含所有值的类来做正确的事情。

而且，正如您已经注意到的，`List`如果您希望执行多个数据库插入/更新，则可以创建一个此类对象。

*许多持久性方案在定义类（称为[DAO](http://en.wikipedia.org/wiki/Data_access_object)）的基础上运行，以表示存储在各个表中的数据。使用支持注释类的持久性提供程序（例如[Hibernate](http://www.hibernate.org/)）可以真正简化您与数据库的交互。我建议您更详细地[研究这个主题](https://www.google.co.uk/search?q=java+persistence)。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T08:49:19.313

您可以使用 simple `List<java.lang.Object>`，因为 Java 中的所有类都是`java.lang.Object`. 但是，这很容易出错，如果您不小心处理它，可能会在运行时抛出 ClassCastException。就像你提到`List<ClassA>`的那样是正确的。但请确保`ClassA`在设计时一切都正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T08:47:34.157

您创建用于保存这些不同类型属性的类的方式似乎很好。然后你可以使用`ArrayList`, 一个`List`这样的接口实现：

```
ArrayList<ClassA> list = new ArrayList<ClassA>(); 
```

然后您可以轻松地填充和操作它。

对于您的数据库操作，我建议您使用**DAO（数据访问对象）**类和**映射器**类来方便您对数据源的持久性操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T08:43:31.970

您可以做的是创建一个抽象超类，您的所有类都将扩展它，然后列出它。任何扩展这个超类的类都将适合同一个列表。

当您操作您的集合时，请确保您找出您正在处理的对象类型。

```
public abstract class ClassA {
    // Empty
}

public class ClassB extends ClassA {
    // something something
}

public class ClassC extends ClassA {

}

public class main {
    List<ClassA> list.....
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T08:46:42.283

我也会这样做，即创建一个表示您要保存的一组内容的对象（也许背后隐藏着一个域概念？），然后有一个该类型的列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T08:44:14.317

由于 Java 中的所有（有节制的事实）对象都继承自`Object`，因此您可以在需要时编写`List<Object>...`并转换其中的对象。请记住，这要求您绝对控制不同对象的类别。

# iphone - 如何获取用户在键盘中点击的字符？

> ID：12835503
> 
> 赞同：0
> 
> 时间：2012-10-11T08:40:27.533
> 
> 标签：iphone, objective-c, ios, cocoa-touch

当用户触摸空格和退格按钮时，我有一个`UITextField`并且我想执行一些操作。我怎样才能做到这一点？我知道我必须使用键盘通知。谁能告诉我如何获得哪个键所触及的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:44:24.430

您可以实现文本字段委托的方法`textField:shouldChangeCharactersInRange:replacementString:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:46:53.223

不一定，更好的解决方案是使用`UITextFieldDelegate`read the [reference](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)。它包含`textField:shouldChangeCharactersInRange:replacementString:`您可以使用的方法。

至于退格检测，这里有很多关于这个主题的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T08:49:00.390

这是一个示例代码：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSString *resultingString = [textField.text stringByReplacingCharactersInRange: range withString: string];
NSCharacterSet *whitespaceSet = [NSCharacterSet whitespaceCharacterSet];

if  ([resultingString rangeOfCharacterFromSet:whitespaceSet].location == NSNotFound)      {

 //Your Code Here

    return YES;

}  else  {

    return NO;
}} 
```

**编辑：**

如果你想检查是否有空格（文本中的任何地方），你可以这样做：

```
NSRange range = [[textField text] rangeOfCharacterFromSet:whitespace];
if (range.location != NSNotFound) {
// There is whitespace.
} 
```

# c++ - 命名 union 或 boost::variant typedefs

> ID：12835504
> 
> 赞同：0
> 
> 时间：2012-10-11T08:40:29.163
> 
> 标签：c++

我将数据库值保存在一个变体中。在您看来，以下哪个 typedef 最有意义：

```
typedef boost::variant<int, bool, std::string> Value;
typedef boost::variant<int, bool, std::string> Values;
typedef boost::variant<int, bool, std::string> Type;
typedef boost::variant<int, bool, std::string> Types; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:45:18.520

它们都没有意义。什么是值或类型？只是抽象的名字。最好用更具体的名称来命名它们，例如 ObjectState 或 PacketField。诸如类型之类的名称没有任何意义，当您命名变量时，认为其他人可以阅读并理解它的含义，当您忘记您做了什么时，您必须记住它是什么，并且不要阅读一堆代码来理解这种类型的用途。

有关变量命名和软件工程的更多信息，您可以购买由[Steve McConnell编写的精彩书籍](http://en.wikipedia.org/wiki/Steve_McConnell)[Code complete](https://rads.stackoverflow.com/amzn/click/com/0735619670)。

# html - html5 应用程序缓存 joomla 网站

> ID：12835506
> 
> 赞同：1
> 
> 时间：2012-10-11T08:40:30.330
> 
> 标签：html, joomla, web, pageload, application-cache

我们基于我们定制的 Joomla 安装为我们的客户建立了多个网站。

我们必须支持回到 ie7，但我想开始让这些网站离线可用。人们是否认为这是一个好主意，因为这不是一个应用程序？

此外，人们如何看待这将与半定期更改的内容一起使用？

我欢迎你的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:55:39.913

首先，您应该注意，您使用的任何离线功能`AppCache`仅适用于版本 10 或更高版本 ( [caniuse.com](http://caniuse.com/#search=application%20cache) ) 的 IE 用户。

尽管有这个名字，但让网站（以及 Web 应用程序）离线可用是`AppCache`.

[这里](http://www.html5rocks.com/en/tutorials/appcache/beginner/)有一个很好的主题介绍和一篇优秀的文章[，](http://www.alistapart.com/articles/application-cache-is-a-douchebag/)包括使用该技术的基本原理以及在这样做时遇到的问题，来自一个`AppCache`在最近一个项目中广泛使用的人。

# android - 内存不足错误 Android

> ID：12835511
> 
> 赞同：0
> 
> 时间：2012-10-11T08:40:40.330
> 
> 标签：android

我正在开发一个图像处理应用程序，其中我有一个包含多个图像的相册文件夹。

项目中也可以有不止一张专辑。在启动应用程序有一个专辑列表。在选择相册画廊视图时，将显示包含在该相册中的图像。

如果我们选择任何图像而不是启动新活动，您可以在其中对所选图像进行绘图（即您可以在图像上绘制线条或形状）。您还可以使用相机或从图库中将图像添加到相册。现在我面临的问题是应用程序工作正常。但我无法处理 OutOfMemory 错误。我已经尝试了很多东西。如

1.  调整图像大小。
2.  破坏活动。
3.  使用数据库助手类的应用程序上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:03:11.760

您必须选择使用 android 中的图像： - 使用 java 和 SDK - 使用本机代码和 NDK

如果您只想使用 SDK，请尝试使用[inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)对资源图像进行采样。除了采样图像之外，请确保您在使用后正确回收图像资源，并且您的应用程序中没有内存泄漏。您可以使用[MAT](http://www.eclipse.org/mat/)来发现内存泄漏。

或者您可以使用 NDK 编写代码。当您使用本机代码时，您在其中创建的对象位于本机堆中，与 java.util.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T04:04:03.593

OOM（OutOfMemory）问题总是由于Bitmap Object处理不当造成的。因此，您尝试过的（调整大小、销毁活动等）无法解决 OOM 问题。

解决OOM的更好方法是根据设备的分辨率密度将图像加载到内存中。Goole Android 培训课程有一章讨论如何有效地加载大图像。可以参考这里

[https://developer.android.com/training/displaying-bitmaps/load-bitmap.html](https://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

希望这会对你有所帮助！

# sql-server-2008 - 链接两个没有共同点的表

> ID：12835513
> 
> 赞同：0
> 
> 时间：2012-10-11T08:40:44.137
> 
> 标签：sql-server-2008, join

我正在尝试加入这些陈述：

```
select min(len(Password)) as min, 
       max(len(Password)) as max, 
       avg(len(Password)) as avg 
FROM Customer.dbo.Password 

UNION ALL
select min(len(password2)) as min, 
       max(len(password2)) as max, 
       avg(len(password2)) as avg 
FROM website.dbo.password2 
```

对这些：

```
SELECT c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, 'website' db FROM website.sys.all_columns as c INNER JOIN website.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like '%password%' AND type = 'U'

UNION
SELECT c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, 'Customer' db FROM Customer.sys.all_columns as c INNER JOIN Customer.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like '%password%' AND type = 'U' 
```

它们没有共同的列。前两个 SELECT 语句生成密码长度的 min、max 和 avg 三列，后两个生成密码所在位置的 colName、tableName 和 db 名称。

纯粹出于视觉原因，我想在一个表中显示两个结果集，以获取与适当的 colName、tableName 和 db 相对应的 min、max、avg。

我试过这样做：

```
DECLARE @numberTable TABLE (link nvarchar(500), max int, min int, avg int)
INSERT INTO @numberTable

select 'link', min(len(Password)) as min, 
       max(len(Password)) as max, 
       avg(len(Password)) as avg 
FROM Customer.dbo.Password UNION ALL
select 'link', min(len(password2)) as min, 
       max(len(password2)) as max, 
       avg(len(password2)) as avg 
FROM website.dbo.password2

SELECT * FROM @numberTable ORDER BY max

DECLARE @myTable TABLE (link nvarchar(500), colName nvarchar(500), tableName   nvarchar(500), db nvarchar(500))
INSERT INTO @myTable

SELECT 'link', c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, 'website' db FROM website.sys.all_columns as c INNER JOIN website.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like '%password%' AND type = 'U' UNION

SELECT 'link', c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, 'Customer' db FROM Customer.sys.all_columns as c INNER JOIN Customer.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like '%password%' AND type = 'U' 

SELECT * FROM @myTable ORDER BY db

SELECT link
FROM @myTable
LEFT OUTER JOIN @numberTable
ON @myTable.link = @numberTable.link 
```

不幸的是，这没有用。

我正在使用 Microsoft SQL Server 2008。

希望我所追求的有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:45:24.677

您可以使用`cross join`连接两个不相关的表：

```
SELECT  c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName
,       o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName
,       'website' db 
,       pwd.[min]
,       pwd.[max]
,       pwd.[avg]
FROM    website.sys.all_columns as c 
INNER JOIN 
        website.sys.all_objects o 
ON      c.object_id = o.object_id 
CROSS JOIN
        (
        select min(len(Password)) as min, 
               max(len(Password)) as max, 
               avg(len(Password)) as avg 
        FROM   website.dbo.Password        
        ) as pwd
WHERE   c.name like '%password%' 
        AND type = 'U' 

UNION

SELECT  c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName
,       o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName
,       'Customer' db 
,       pwd.[min]
,       pwd.[max]
,       pwd.[avg]
FROM    Customer.sys.all_columns as c 
INNER JOIN 
        Customer.sys.all_objects o 
ON      c.object_id = o.object_id 
CROSS JOIN
        (
        select min(len(Password)) as min, 
               max(len(Password)) as max, 
               avg(len(Password)) as avg 
        FROM    Customer.dbo.Password        
        ) as pwd
WHERE   c.name like '%password%' 
        AND type = 'U' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:48:18.247

创建他们确实有共同点的任意东西并加入他们

```
Select * 
from
(
select 
       1 as RowID,
       min(len(Password)) as min,  
       max(len(Password)) as max,  
       avg(len(Password)) as avg  
FROM Customer.dbo.Password  

UNION ALL 
select 
       2,
       min(len(password2)) as min,  
       max(len(password2)) as max,  
       avg(len(password2)) as avg  
FROM website.dbo.password2 
) t1
inner join
(

SELECT 1 as RowID, c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, 'website' db FROM website.sys.all_columns as c INNER JOIN website.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like '%password%' AND type = 'U' 

UNION 
SELECT 2, c.name COLLATE SQL_Latin1_General_CP1_CI_AS colName, o.name COLLATE SQL_Latin1_General_CP1_CI_AS tableName, 'Customer' db FROM Customer.sys.all_columns as c INNER JOIN Customer.sys.all_objects o ON c.object_id = o.object_id WHERE c.name like '%password%' AND type = 'U' 
) t2
    on t1.rowID = t2.rowID 
```

# html - HTML/CSS 水平文本换行

> ID：12835514
> 
> 赞同：2
> 
> 时间：2012-10-11T08:40:48.023
> 
> 标签：html, css, word-wrap

我正在尝试实现一些非常简单的事情，但我无法弄清楚我做错了什么。我有以下 html 标记：[JSFiddle](http://jsfiddle.net/U7WyZ/)，目标是使文本在比图像长时换行，即文本应该水平换行并且永远不会超过图像的高度。

但是有两个问题：我无法编辑文本并且文本是一个块，从数据库中获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:16:56.843

如果您无法删除`<br/>`元素，则将它们设置为：

```
br {
    display:none;
} 
```

应该删除它们。硬换行符的存在导致了换行问题。

如果您可以删除`<br/>`元素，则文本更接近您需要的流程。但是，需要向包含元素添加高度（可能是宽度）和溢出规则，以阻止文本在图像下换行。

HTML

```
<div class="footer-row-1">
    <a style="float: left; margin-right: 25px;" href="index.html"><img src="http://theliberalstore.com/products/media/Q-EmptyRedSlash.gif" alt=""></a>
    <div class="textBlock"> // <--- added a container for the text block
    <p> Some Really Really long <br />
text, text, text<br />
text, text, text<br />
text, text, text: <br />
text, text, text<br />
text, text,<br />
<br />
text, text, text<br />
text, text, text<br />
<br />
text, text, text <br />
text, text, text<br />
text, text, text<br />
<br />
text, text, text</p>
    <p>text, text, text, text, text, text</p>
        <p style="padding-top: 5px;" class="color-4">text, text, text, text, text, text</p>
    </div>
</div>
<div class="footer-row-2">
    Another completely different content here
</div>​​​ 
```

CSS

```
.footer-row-2 {
    clear:both;
}

br {
    display:none;
}

.textBlock {
    width:300px; /* for demo, to force a scroll bar */
    height:100px; /* same as image */
    overflow-x:hidden;
    overflow-y:scroll;
} 
```

​</p>

# r - naiveBayes (e1071) 的分类不起作用（$levels 返回 NULL）

> ID：12835515
> 
> 赞同：6
> 
> 时间：2012-10-11T08:40:50.303
> 
> 标签：r, machine-learning, classification

我使用 naiveBayes (e1071 [http://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Classification/Na%C3%AFve_Bayes](http://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Classification/Na%C3%AFve_Bayes) ) 对我的数据集进行分类（分类类：“类”0/1）。这是我所做的：

```
library(e1071)
arrhythmia <- read.csv(file="/home/.../arrhythmia.csv", head=TRUE, sep=",")

#devide into training and test data 70:30
trainingIndex <- createDataPartition(arrhythmia$class, p=.7, list=F)
arrhythmia.training <- arrhythmia[trainingIndex,]
arrhythmia.testing <- arrhythmia[-trainingIndex,]

nb.classifier <- naiveBayes(class ~ ., data = arrhythmia.training)
predict(nb.classifier,arrhythmia.testing[,-260]) 
```

分类器不起作用，这是我得到的：

```
> predict(nb.classifier,arrhythmia.testing[,-260])
factor(0)
Levels: 

> str(arrhythmia.training)
'data.frame':   293 obs. of  260 variables:
 $ age                         : int  75 55 13 40 44 50 62 54 30 46 ...
 $ sex                         : int  0 0 0 1 0 1 0 1 0 1 ...
 $ height                      : int  190 175 169 160 168 167 170 172 170 158 ...
 $ weight                      : int  80 94 51 52 56 67 72 58 73 58 ...
 $ QRSduration                 : int  91 100 100 77 84 89 102 78 91 70 ...
 $ PRinterval                  : int  193 202 167 129 118 130 135 155 180 120 ...
 # and so on (260 attributes)

> str(arrhythmia.training[260])
'data.frame':   293 obs. of  1 variable:
 $ class: int  1 0 1 0 0 1 1 1 1 0 ...

> nb.classifier$levels
NULL 
```

我尝试使用包含的数据集（虹膜），一切正常。我的方法有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T14:49:45.960

确保将类变量视为因素；IE

```
nb.classifier <- naiveBayes(as.factor(class) ~ ., data = arrhythmia.training) 
```

顺便说一句，您不需要从预测调用中排除类变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T16:32:05.883

数据框中由字符串组成的每个变量都需要被视为一个因素。

如果变量不是因素，请使用以下命令：

```
 df$var1 <- as.factor(df$var1) 
```

这包括类变量。

*Note: If one variable is numeric, you don't require to turn it into a factor.*

# android - 如何在android中单击主页键时显示弹出窗口？

> ID：12835517
> 
> 赞同：0
> 
> 时间：2012-10-11T08:41:04.837
> 
> 标签：android

我必须在单击主屏幕按钮时显示一个弹出窗口。我试过使用下面的代码`onkeydown()`，但是点击主页键按钮它没有进入循环。

```
if(keyCode == KeyEvent.KEYCODE_HOME)

{

  //do something

} 
```

我也尝试使用`onUserLeaveHint()`，但没有用。

如果有人知道这件事，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:43:40.257

你不能。API 不允许您捕获该键的按下。这是一把安全钥匙。有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/2208912/how-can-i-detect-user-pressing-home-key-in-my-activity)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:45:39.320

无法覆盖主页按钮，这是系统要求的。[请参阅 Android 开发人员 Romain Guy https://stackoverflow.com/a/5039586/1578771](https://stackoverflow.com/a/5039586/1578771)的答案。

此外，将来最好使用 onKeyUp() ，因为您将能够使用其他事件，如长按等。

# css - 如何在没有的情况下实现对齐的对话框布局 ?

> ID：12835520
> 
> 赞同：1
> 
> 时间：2012-10-11T08:41:09.577
> 
> 标签：css, jsf-2, primefaces

我目前正在使用这个 facelet：

```
<p:dialog id="eventDetailsDialog">
    <h:panelGroup layout="block" styleClass="dialogElement">
        <h:outputLabel for="title" value="Title:" />
        <p:inputText id="title" value="#{bean.title}" />
    </h:panelGroup>
    <h:panelGroup layout="block" styleClass="dialogElement">
        <h:outputLabel for="from" value="From:" />
        <p:calendar id="from" value="#{bean.startDate}" 
                    mode="popup" showOn="button" 
                    pattern="dd.MM.yyyy HH:mm">
        </p:calendar>
    </h:panelGroup>
    <h:panelGroup layout="block" styleClass="saveButton">
        <p:commandButton id="saveEventButton" value="Save"
            actionListener="#{bean.save}" />
    </h:panelGroup>
    <p:messages id="allMessages"/>
</p:dialog> 
```

连同这个样式表：

```
.dialogElement {
    margin: 0.2em;
}

.dialogElement label {
    width: 4em;
    display: inline-block;
}

.saveButton button {
    margin: 0 auto;
    margin-bottom: 0.2em;
    display: block;
} 
```

创建一个对话框，其中标签和字段很好地对齐。`<h:panelGroup>`如果不使用围绕每个字段的 -tags ，我发现无法实现此布局。这尤其成问题，因为`<p:calendar>`renders 和`<input>`-field`<button>`旁边有一个。结果应该是这样的（上面的例子为了简洁省略了一些字段，但布局是一样的）：

![我想要的对话框](../Images/f82b41396661e7cce344f357a3d61ba5.png)

有没有办法实现与上述解决方案相同的布局，但不使用`<h:panelGroup>`或任何其他组件仅用于布局（仅 CSS）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:37:39.293

您可以只使用纯 HTML。

```
<p:dialog id="eventDetailsDialog">
    <div class="dialogElement">
        <h:outputLabel for="title" value="Title:" />
        <p:inputText id="title" value="#{bean.title}" />
    </div>
    <div class="dialogElement">
        <h:outputLabel for="from" value="From:" />
        <p:calendar id="from" value="#{bean.startDate}" 
                    mode="popup" showOn="button" 
                    pattern="dd.MM.yyyy HH:mm">
        </p:calendar>
    </div>
    <div class="saveButton">
        <p:commandButton id="saveEventButton" value="Save"
            actionListener="#{bean.save}" />
    </div>
    <p:messages id="allMessages"/>
</p:dialog> 
```

A`<p>`在[语义上更正确](http://developers.whatwg.org/forms.html)。

```
<p:dialog id="eventDetailsDialog" styleClass="dialog">
    <p>
        <h:outputLabel for="title" value="Title:" />
        <p:inputText id="title" value="#{bean.title}" />
    </p>
    <p>
        <h:outputLabel for="from" value="From:" />
        <p:calendar id="from" value="#{bean.startDate}" 
                    mode="popup" showOn="button" 
                    pattern="dd.MM.yyyy HH:mm">
        </p:calendar>
    </p>
    <p>
        <p:commandButton id="saveEventButton" value="Save"
            actionListener="#{bean.save}" />
    </p>
    <p:messages id="allMessages"/>
</p:dialog> 
```

和

```
.dialog p {
    margin: 0.2em;
}

.dialog label {
    width: 4em;
    display: inline-block;
}

.dialog p>button {
    margin: 0 auto;
    margin-bottom: 0.2em;
    display: block;
} 
```

# android - 我如何在我的 Android 应用程序中看到完整的 ListView

> ID：12835521
> 
> 赞同：1
> 
> 时间：2012-10-11T08:41:11.870
> 
> 标签：android, listview, android-intent, android-arrayadapter, listadapter

我为使用 ListView 测试 Android 应用程序而编写。这个 ListView 我用 ListAdapter 填充，它工作正常。只有当我启动应用程序时，我才会看到完整的 ListView :(

![在此处输入图像描述](../Images/a0f24793eee17eaf8aa777ac399de195.png)

这是我的**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8" ?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

   <ListView
       android:id="@+id/listview1"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       ></ListView>

</LinearLayout> 
```

这是我的**MainActivity.java**

```
package de.linde.listview;

import java.util.ArrayList;
import java.util.List;
import android.os.Bundle;
import android.app.Activity;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        List valueList = new ArrayList<String>(); 

        for(int i=0;i<10;i++)
        {
            valueList.add("value" + i); 
        }

        ListAdapter adapter = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_list_item_1,valueList); 

        final ListView lv = (ListView)findViewById(R.id.listview1);
        lv.setAdapter(adapter); 
    }

} 
```

我做错了什么:(？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:43:22.773

你的文字颜色有问题。

尝试更改 listviwe 的文本颜色或背景颜色。

它肯定会起作用。

```
 <ListView
   android:background="#C0C0C0" <------
   android:id="@+id/listview1"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">
   </ListView> 
```

# html - 使用画布 HTML 绘制“X”字

> ID：12835531
> 
> 赞同：9
> 
> 时间：2012-10-11T08:41:58.633
> 
> 标签：html

单击时，我使用画布在鼠标位置绘制“X”字，但是当我绘制新的“X”字时，旧的“X”是“BOLD”。

[http://jsfiddle.net/darklight27/h4JvJ/](http://jsfiddle.net/darklight27/h4JvJ/)

你对我有什么建议吗？谢谢！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T08:51:37.677

在开始画线之前，请致电`beginPath()`：

```
function drawX(x, y) {
    ctx.beginPath();

    ctx.moveTo(x - 20, y - 20);
    ctx.lineTo(x + 20, y + 20);

    ctx.moveTo(x + 20, y - 20);
    ctx.lineTo(x - 20, y + 20);
    ctx.stroke();
} 
```

jsFiddle 上的更新代码：http: [//jsfiddle.net/h4JvJ/23/](http://jsfiddle.net/h4JvJ/23/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-27T07:12:49.617

上面 Stefan 的回答用 2 行绘制了一个简单的 X。如果您想要更厚的 X，请使用以下函数：

```
const drawX = (ctx, shape, x, y, size, width) => {
    // Start at the top left corner and draw an X
    ctx.beginPath();
    x -= size;
    y -= size;
    ctx.moveTo(x, y);
    x += width / 2;
    y -= width / 2;
    ctx.lineTo(x, y);
    x += size;
    y += size;
    ctx.lineTo(x, y);
    x += size;
    y -= size;
    ctx.lineTo(x, y);
    x += width / 2;
    y += width / 2;
    ctx.lineTo(x, y);
    x -= size;
    y += size;
    ctx.lineTo(x, y);
    x += size;
    y += size;
    ctx.lineTo(x, y);
    x -= width / 2;
    y += width / 2;
    ctx.lineTo(x, y);
    x -= size;
    y -= size;
    ctx.lineTo(x, y);
    x -= size;
    y += size;
    ctx.lineTo(x, y);
    x -= width / 2;
    y -= width / 2;
    ctx.lineTo(x, y);
    x += size;
    y -= size;
    ctx.lineTo(x, y);
    x -= size;
    y -= size;
    ctx.lineTo(x, y);
    ctx.stroke();
    ctx.closePath();
    ctx.fillStrokeShape(shape);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-28T20:35:17.250

可定制的十字架

```
 var cursor = document.createElement("canvas"),
      ctx = cursor.getContext("2d");

    cursor.width = 36;
    cursor.height = 36;

    // draw some shape for sake of demo
    ctx.strokeStyle = color;

    ctx.lineWidth = 2;

    var x = cursor.width / 2;
    var y = cursor.height / 2;

    // ctx.moveTo(x, y);
    ctx.arc(x, y, 20, 0, 2 * Math.PI);
    ctx.stroke();

    ctx.beginPath();
    ctx.arc(x, y, 30, 0, 2 * Math.PI);

    let lineLength = 22

    ctx.moveTo(x - lineLength / 2, y - lineLength / 2);
    ctx.lineTo(x + lineLength / 2, y + lineLength / 2);
    ctx.stroke();

    ctx.moveTo(x + lineLength / 2, y - lineLength / 2);
    ctx.lineTo(x - lineLength / 2, y + lineLength / 2);
    ctx.stroke(); 
```

# c# - 如何在 Windows 窗体应用程序中获取当前窗体？

> ID：12835533
> 
> 赞同：2
> 
> 时间：2012-10-11T08:42:01.103
> 
> 标签：c#, winforms

我创建了一个 Windows 窗体应用程序。我想从另一个应用程序中获取该应用程序中的处理表单（当前表单）。因为（第一个）应用程序由多个表单组成，我想知道哪个表单正在处理/活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:53:25.700

使用其他应用程序？

那么app B必须访问app A的处理表单吗？在运行时，A 和 B 是不同的进程，不是吗？所以应用程序 A 应该公开一种可从应用程序 B 访问的侦听套接字和一个具有诸如`GetCurrentForm()`. 因此应用 B 可以向套接字发送请求并获取响应。我想出这样的事情。

参考：

*   [MSDN 上的套接字](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:37:18.983

[***`GetForegroundWindow`***](http://msdn.microsoft.com/en-us/library/ms633505.aspx)功能

> 检索前台窗口（用户当前正在使用的窗口）的句柄。

C#签名：

```
/// <summary>The GetForegroundWindow function returns a handle to the foreground window.</summary>
[DllImport("user32.dll")]
private static extern IntPtr GetForegroundWindow(); 
```

和来自 pinvoke 的示例代码：

```
public ApplicationState AppState
{
    get
    {
        Process[] processCollection = Process.GetProcessesByName(ProcessName);
        if(processCollection != null && processCollection.Length  >= 1 && 
            processCollection[0] != null)
        {
            IntPtr activeWindowHandle = Win32.GetForegroundWindow();
            //Optional int ProcessID;
            //Optional Win32.GetWindowThreadProcessId(GetForegroundWindow(),out ProcessID)
            foreach(Process wordProcess in processCollection)
            {
                //Optional if( ProcessID == wordProcess.Id ) return ApplicationState.Focused;
                if(wordProcess.MainWindowHandle == activeWindowHandle)
                {
                    return ApplicationState.Focused;
                }
            }
            return ApplicationState.Running;
        }
        return ApplicationState.NotRunning;
    }
} 
```

# grails - grails i18n-fields orderby

> ID：12835534
> 
> 赞同：0
> 
> 时间：2012-10-11T08:42:03.110
> 
> 标签：grails, grails-plugin

我正在学习将 Grails 与 i18n-fields 插件一起使用。这是一个简单的设置，域：

```
package bookstore

@i18nfields.I18nFields
class Book {
    String name 

    static constraints = {
    }

    static i18nFields = ['name']
} 
```

而控制器是：包书店

```
class BookController {
    def scaffold = Book

    def test = {
        def tekst = ""
        Book.findAll(sort: 'name').each{ tekst += "id: " + it.id + "    book: " + it.name + "<br/>\n" }
        render tekst
    }
} 
```

我通过脚手架生成的界面创建了几本书，没关系。问题在于动作“测试”。没有排序它可以工作，但是当我添加排序条件时它会中断消息：

错误 500：内部服务器错误

URI

/书店/书/测试

班级

org.hibernate.QueryException

信息

无法解析属性：书店名称：bookstore.Book

grails-app\controllers\bookstore\BookController.groovy 的第 8 行左右

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:31:00.273

> 使用 Book.findAll(sort:'name') 的闲置代码
> 
> Book.list（排序：'名称'）

# java - 如何定义属性？

> ID：12835537
> 
> 赞同：0
> 
> 时间：2012-10-11T08:42:06.273
> 
> 标签：java, attributes

下面的问题让我很困惑，我不确定我的想法是否正确。这是问题

> 给定三条直线a，b和c。只要任何两条线的总和总是大于第三条线（即 a + b > c 和 b + c > a 和 a + c），他们就能够形成一个三角形
> 
> > 乙）。使用以下内容编写 Java 类 Triangle：

```
Attributes: length of the three sides of the triangle 
Behaviour: 
```

> *   将三个边的长度设置为传入的值的构造函数。当这些值不能形成三角形时，构造函数应该抛出一个 InvalidValueException 对象。
>     *   findArea() 方法使用公式 area = a +b+c 计算三角形对象的面积

只是提醒一下问题的下一部分是创建一个 GUI。我已经这样做了。

所以上面的问题是它要求我只是简单地获取值，但从哪里获取？是通过图形用户界面吗？还是命令行基础？这个问题并不具体，所以我可以假设简单地创建准备接受这些值的变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:00:36.360

好吧，如果您被要求开发一个 GUI，我真的认为必须通过它输入值......并且 Triangle 类必须具有 3 个属性：a、b 和 c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:53:51.613

> 所以上面的问题是它要求我只是简单地获取值，但从哪里获取？

从构造函数参数。这就是下面的意思：

> *“将三边长度设置为传入值的构造函数。”*

例如：

```
 public Triangle(int a, int b, int c) {
        this.a = a; this.b = b; this.c = c;
    } 
```

* * *

> 是通过图形用户界面吗？还是命令行基础？

GUI（或命令行入口点）可能会从某处获取值并将它们作为构造函数参数传递。或者......*任何*代码都可以简单地实例化 a`Triangle`与侧面的硬连线值；例如

```
 Triangle pythagorasFavourite = new Triangle(3, 4, 5); 
```

* * *

> 这个问题并不具体，所以我可以假设简单地创建准备接受值的变量吗？

实际上，它是具体的：见上文。

* * *

但是请注意，三角形的面积不是`area = a + b + c`。真正的公式是：

> 已知三边长时的三角形面积为
> 
> ```
>  1/4 * square-root [ P * (P-2a) * (P-2b) * (P-2c)] 
> ```
> 
> 其中`P`是总周长`a`，`b`和`c`是三边的长度。

参考： http: [//library.thinkquest.org/20991/gather/formula/data/297.html](http://library.thinkquest.org/20991/gather/formula/data/297.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:43:42.980

为什么不暂时在测试类或类似的类中对其进行硬编码，例如

```
new Triangle(3,4,5); 
```

在这种情况下，您有兴趣针对各种功能（有效与无效）测试您的代码，因此我将编写一个具有特定数据集的测试（或多个测试），例如

```
 // expected to be ok
   new Triangle(3,4,5);

   // expected exception
   new Triangle(1,1,3); 
```

*在后一种情况下，如果您没有收到异常*，您可能希望捕获异常并以错误退出您的程序。

您可能想查看[单元测试框架](http://www.junit.org)来帮助您解决这个问题。

编辑：您修改后的问题现在包含`Triangle`双方的二传手。我认为您最好将字段设为只读，在构造时执行此操作并从构造函数中抛出异常。如果您需要设置器，那么您必须`validate()`在某个阶段调用该方法，否则您可能会创建一个`Triangle`无效的方法。请注意，您不能在每次调用 setter 时调用验证器，因为您可能正在设置多个边并且中间状态可能无效。

# asp.net-mvc-3 - 没有在 global.asax MVC3 项目中注册重定向 url 的 URL 重定向

> ID：12835541
> 
> 赞同：0
> 
> 时间：2012-10-11T08:42:15.450
> 
> 标签：asp.net-mvc-3

我有像 "https://www.syncfusion.com/msdn" 这样的重定向 URL。如果我们在浏览器中输入此 URL，它将转到“https://www.syncfusion.com/home/aboutus?utm_medium=msdn”。

对于此 URL 重定向，在 global.asax 文件中创建了路由映射“

```
 routes.MapRouteLowercase(
      "MSDN", // Route name
      "newsletter", // URL with parameters
      new { Controller = "root", Action = "Redirection", key = "msdn" } 
     // Parameter defaults
 ); 
```

在这里，我创建了单独的操作来处理 URL 重定向。

所以我的请求没有在全局中注册重定向 URL 并且没有单独的操作，我们可以将 URL 重定向到指定的 URL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:49:02.413

在控制器本身中，您也可以这样做。

```
 return  RedirectToAction("Redirection", "root",new{key="msdn"}) 
```

如果您要重定向到现有网址，那么您可以尝试

```
return Redirect(redirecturl) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:49:44.810

[您可以通过创建自定义重定向路由和处理程序（ IRouteHandler](http://prideparrot.com/blog/archive/2012/7/understanding_routing) /IHttpHandler）来实现这一点，如本文末尾所指定。

# java - 错误 [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2){"JBAS014653: 复合操作失败并被回滚。

> ID：12835543
> 
> 赞同：0
> 
> 时间：2012-10-11T08:42:21.967
> 
> 标签：java, jakarta-ee, jboss, jboss7.x, jboss-weld

大家好，我对 jboss-as-7.1.1 有一些问题。当我在 jboss-5.1、jboss-6.1 中部署 axis2.war 时，它工作正常，但是当我在 jboss-as-7.1.1 中部署时，我遇到了错误

我的错误日志如下：-

```
12:03:27,851 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "axis2.war"
12:03:30,721 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry xpp3.jar in "/content/axis2.war/WEB-INF/lib/jibx-run-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,724 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry stax-api.jar in "/content/axis2.war/WEB-INF/lib/jibx-run-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,727 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry wstx-asl.jar in "/content/axis2.war/WEB-INF/lib/jibx-run-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,735 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jaxws-rt.jar in "/content/axis2.war/WEB-INF/lib/jaxws-tools-2.1.3.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,738 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jaxb-xjc.jar in "/content/axis2.war/WEB-INF/lib/jaxws-tools-2.1.3.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,743 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry relaxngDatatype.jar in "/content/axis2.war/WEB-INF/lib/jaxws-tools-2.1.3.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,747 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry bcel.jar in "/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,750 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jibx-run.jar in "/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,753 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry xpp3.jar in "/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,756 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry stax-api.jar in "/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,758 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry wstx-asl.jar in "/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,762 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jaxb-api.jar in "/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,766 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry activation.jar in "/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,769 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jsr173_1.0_api.jar in "/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,771 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jaxb1-impl.jar in "/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,777 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry activation.jar in "/content/axis2.war/WEB-INF/lib/mail-1.4.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,792 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry xercesImpl.jar in "/content/axis2.war/WEB-INF/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,798 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry xml-apis.jar in "/content/axis2.war/WEB-INF/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
12:03:30,807 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry serializer.jar in "/content/axis2.war/WEB-INF/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
12:03:31,112 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."axis2.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."axis2.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "axis2.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_30]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_30]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_30]
Caused by: java.lang.RuntimeException: Error getting reflective information for class org.apache.axis2.webapp.AxisAdminServlet with ClassLoader ModuleClassLoader for Module "deployment.axis2.war:main" from Service Module Loader
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.metadata.MethodAnnotationAggregator.runtimeAnnotationInformation(MethodAnnotationAggregator.java:58)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.handleAnnotations(InterceptorAnnotationProcessor.java:85)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:70)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:55)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: Lorg/apache/axis2/webapp/AdminAgent;
    at java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_30]
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291) [rt.jar:1.6.0_30]
    at java.lang.Class.getDeclaredFields(Class.java:1743) [rt.jar:1.6.0_30]
    at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:57) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 10 more
Caused by: java.lang.ClassNotFoundException: org.apache.axis2.webapp.AdminAgent from [Module "deployment.axis2.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 15 more

12:03:31,193 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) JBAS015870: Deploy of deployment "axis2.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"axis2.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"axis2.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"axis2.war\""}}
12:03:31,318 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015877: Stopped deployment axis2.war in 124ms
12:03:31,320 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."axis2.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."axis2.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "axis2.war"

12:03:31,336 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"axis2.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"axis2.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"axis2.war\""}}}} 
```

谁有时间请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:44:03.950

JBoss AS7 中的类加载与以前的版本（6、5 等）不同。您应该避免将所有库放入 web-inf/lib 文件夹，而是使用模块和依赖项。请在[此处阅读详细信息](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)

# c# - 将 buttonClick 方法作为参数传递

> ID：12835544
> 
> 赞同：0
> 
> 时间：2012-10-11T08:42:24.100
> 
> 标签：c#, parameters, event-handling, devexpress

我想将 buttonClick 方法作为参数传递给函数：我们有

按钮点击：

```
private void iDeactivate_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
{
 ...
} 
```

功能：

```
private void AddItemToPopUpMenu(GridViewMenu cMenu, string cItemCaption, EventHandler cClickHandler, Image cItemImage, bool cItemBeginGroup)
{
    DXMenuItem item = new DXMenuItem();
    item.Caption = cItemCaption;
    item.Click += new EventHandler(cClickHandler); //problem there
    item.Image = cItemImage;
    item.BeginGroup = cItemBeginGroup;
    cMenu.Items.Add(item);
} 
```

那么有人可以提出解决方案吗？

试过：

```
AddItemToPopUpMenu(cMenu, iDeaActive.Caption, iDeactivate_ItemClick, null, false); 
```

并将函数参数更改为：

```
private void AddItemToPopUpMenu(GridViewMenu cMenu, string cItemCaption, EventHandler<ItemClickEventArgs> cClickHandler, Image cItemImage, bool cItemBeginGroup) 
```

但是后来我在标记“那里的问题”的代码中出错了

那么是否可以在不更改参数的情况下传递 buttonClick 方法？

编辑：当我看到一些错误的答案时，应该说我必须作为参数传递，因为 AddItemToPopUpMenu 被多次调用，每次都使用不同的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:45:37.137

从外观上看，[`DXMenuItem.Click`](http://documentation.devexpress.com/#WindowsForms/DevExpressUtilsMenuDXMenuItem_Clicktopic)仅提供常规`EventArgs`对象，因此只能与常规对象一起使用`EventHandlers`。

你试图[`DevExpress.XtraBars.ItemClickEventArgs`](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraBarsItemClickEventArgstopic)在你的处理程序中获取一个专门的对象，而事件只是*不提供它*。

我认为您尝试做的事情是不可能的。你要么需要减少你的处理程序，所以它只需要一个常规的`EventArgs`，或者你需要找到一种类型的按钮，它的`Click`事件提供一个`ItemClickEventArgs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:46:10.807

您可以将方法名称直接分配给您的事件，前提是签名与事件所需的委托匹配

```
item.Click += iDeactivate_ItemClick; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:47:42.263

```
item.Click += cClickHandler; 
```

因为你已经通过了代表，所以对你来说足够了

# windows-7 - Win7 64下使用SAPI 5.1

> ID：12835548
> 
> 赞同：3
> 
> 时间：2012-10-11T08:42:39.623
> 
> 标签：windows-7, speech-recognition, sapi, phoneme

我正在编写一个基于 Annosoft 控制台程序的自动唇形同步工具（[链接到 Annosoft 工具](http://www.annosoft.com/sapi_lipsync/docs/)）。本程序使用 SAPI 5.1。对我来说，它在 Win XP 32 位上运行良好。但是有没有办法让它在 Win7 64 位系统下工作？

PS控制台程序是开源的，但我对SAPI和音频处理不是很熟悉，所以重写整个代码对我来说并不是一个真正的选择。

编辑：恐怕我的语言表达并没有真正让我的问题对其他人有意义，所以：是否有可能让 Windows SAPI 5.1 在 Windows 7 64 位中工作？如果是 - 如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:42:46.917

是的，这是可能的，我的电脑里有它。只需从此链接安装 SDK：http: [//www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

如果你不想要所有的 Windows SDK，看看这里[http://www.microsoft.com/en-us/download/details.aspx?id=27226](http://www.microsoft.com/en-us/download/details.aspx?id=27226)

干杯

# iphone - 将引脚添加到自定义图像

> ID：12835549
> 
> 赞同：1
> 
> 时间：2012-10-11T08:42:43.723
> 
> 标签：iphone, ios5, xcode4.2

如何在自定义图像上添加可点击的图钉或类似图钉？让用户在单击图像或视图上的图钉（可能是文本框）的位置添加注释。

在我的代码中，我在图像上添加了静态弹出窗口，我希望我能找到方法让用户在单击图像的任何部分时让他添加 pin 或类似 popup 的东西。

```
 I use this code to add popup to the image 
(part of the code ) self.visiblePopTipViews = [NSMutableArray array];

    self.contents = [NSDictionary dictionaryWithObjectsAndKeys:
                     // Rounded rect buttons
                     @"Play Ground", [NSNumber numberWithInt:1],
                     @"HeadMaster", [NSNumber numberWithInt:2],
                     @"Science Faculty", [NSNumber numberWithInt:3],
                     @"Accounting Faculty", [NSNumber numberWithInt:4],
                     @"Economy Faculty", [NSNumber numberWithInt:5],
                     @"Cultive Faculty", [NSNumber numberWithInt:6],
                     @"Tourisim Faculty", [NSNumber numberWithInt:7],
                     @"Swimming Pool ", [NSNumber numberWithInt:8],
                     @"Medicine Faculty", [NSNumber numberWithInt:9],
                     @"Engeneering Faculty", [NSNumber numberWithInt:10],
                     @"IT Faculty", [NSNumber numberWithInt:11],
                     nil];

    // Array of (backgroundColor, textColor) pairs.
    // NSNull for either means leave as default.
    // A color scheme will be picked randomly per CMPopTipView.
    self.colorSchemes = [NSArray arrayWithObjects:
                         [NSArray arrayWithObjects:[NSNull null], [NSNull null], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [NSNull null], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [NSNull null], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [UIColor darkTextColor], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [UIColor blueColor], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [NSNull null], nil],
                         nil];
     scroll = [[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    scroll.backgroundColor = [UIColor blackColor];
    scroll.delegate = self;

     zoomView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, scroll.contentSize.width, scroll.contentSize.height)];
    zoomView.backgroundColor = [UIColor whiteColor];

    image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"map.png"]];

    scroll.contentSize = image.frame.size;
    [scroll addSubview:image ] ; 

    UIButton *playGround = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [playGround addTarget:self 
                   action:@selector(buttonAction:)
         forControlEvents:UIControlEventTouchDown];
    [playGround setTitle:@"playGround" forState:UIControlStateNormal];
    playGround.tag = 1 ; 
    playGround.frame = CGRectMake(290.0, 170.0, 80.0, 40.0);
    [image addSubview:playGround];

    UIButton *masterBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [masterBtn addTarget:self 
                  action:@selector(buttonAction:)
        forControlEvents:UIControlEventTouchDown];
    [masterBtn setTitle:@"Presidency" forState:UIControlStateNormal];
    masterBtn.tag = 2 ; 
    masterBtn.frame = CGRectMake(250.0, 270.0, 60.0, 30.0);
    [image addSubview:masterBtn]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:07:06.290

```
UIImageView* marker = [[UIImageView alloc] initWithImage: myMarkerImage];
[marker setCenter: CGPointMake(250,150)];
[myScrollView addSubview: marker]; 
```

# javascript - 如何使用按钮的“data-”属性调用选定的 JavaScript 函数

> ID：12835550
> 
> 赞同：15
> 
> 时间：2012-10-11T08:42:42.593
> 
> 标签：javascript, jquery, html, json, custom-data-attribute

我正在尝试在我的按钮上设置一些数据，以便可以访问它`onclick`。我在键值是字符串的按钮数据属性中使用 JSON 没有问题。但是，我不知道如何将值设置为函数。

单击此演示代码中的按钮时，我希望单击事件调用该函数，该函数`option1()`将警告字符串“hello outside”。

我得到的错误是：

```
Uncaught TypeError: Property 'option1' of object #<Object> is not a function 
```

HTML（JSFiddle 在这里：http: [//jsfiddle.net/NDaEh/32/](http://jsfiddle.net/NDaEh/32/)）：

```
<button type='button' data-button='{"option1": "option1", "option2": 
"option2"}'>click1</button> 
```

JS：

```
var data='hello outside';
var option1=function(data){
    alert(data)
}  

$('button').click(function(){
  //var data='hello inside';
  $(this).data('button').option1(data); // should alert 'hello outside'
}); 
```

想法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-11T09:35:06.133

使用以下代码获取 HTML 中的值：

```
$('button').click(function(){
  var data = $.parseJSON($(this).attr('data-button'));
  alert(data.option1)
}); 
```

此代码专门针对您的要求。通过这种方式，您可以在 HTML 中存储数据并在 JavaScript 代码中检索。

更新了 JSFiddle 代码，工作代码位于：http: [//jsfiddle.net/NDaEh/51/](http://jsfiddle.net/NDaEh/51/)

编辑：

**动态调用函数的解决方案：http: [//jsfiddle.net/NDaEh/70/](http://jsfiddle.net/NDaEh/70/)** HTML：

```
<button type='button' data-button='{"func": "func1"}'>click1</button>
<button type='button' data-button='{"func": "func2"}'>click2</button> 
```

JS：

```
var myFuncs = {
  func1: function () { alert('Function 1'); },
  func2: function () { alert('Function 2'); },
};

$('button').click(function(){
  var data = $.parseJSON($(this).attr('data-button'));

  myFuncs[data.func]();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T08:59:05.760

不要将对象保存为 html 标记属性值中的 JSON 字符串。请改用 data() 方法。

```
$('input[type="button"]').data({ option1: 'o1', option2: 'o2' }); 
```

另外，当你写这个时：

```
$(this).data('button').option1(data); 
```

`option1`需要成为一个插件才能链接到数据方法（或任何 jquery 方法）。你需要这样的东西：

```
jQuery.fn.option1 = function () {

   alert($(this).data('option1'));

   return this;
} 
```

## [小提琴](http://jsfiddle.net/NDaEh/56/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T09:03:33.623

使用 jQuery`data`如下所示：

```
$('input[type=button]').data('button-data', { option1: 'option1', option2: 'option2}); 
```

利用：

```
$('input[type=button]').data('button-data');  //{ option1: 'option1', option2: 'option2} 
```

为了从元素中获取数据

# php - SQL 查询因撇号而中断

> ID：12835553
> 
> 赞同：1
> 
> 时间：2012-10-11T08:43:03.107
> 
> 标签：php, sql, sql-injection

我正在使用 html 解析器从第三方站点抓取数据，然后将我需要的信息插入 MySQL。碰巧很多信息中都包含撇号。问题是对于 SQL 查询如下：

```
INSERT INTO table (column) VALUE ('".$value."') 
```

如果 中`$variable`有撇号，则查询中断。我手动插入的信息太多了。这完全太耗时了。对我有什么建议可以使这个查询起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:44:09.953

这是一个经典的 SQL 注入缺陷。如果 的值`$value`由用户控制，他们现在基本上可以做任何事情。抓取的字符串中的引号脱离了 SQL 字符串中的引号环境，因此允许执行任意 SQL 命令。

简短的回答是，使用`mysql_real_escape_string`.

当然，这也是强制性的“mysql_* 已弃用，使用 mysqli 或 PDO”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:44:37.520

因此，换句话说，您的查询很容易受到`SQL Injection`. 更好地使用`PDO`或`MySQLi`扩展，因为您标记了`PHP.

花点时间阅读这篇文章：[**在 PHP 中防止 SQL 注入的最佳方法？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# javascript - 函数中的 JavaScript 作用域

> ID：12835557
> 
> 赞同：0
> 
> 时间：2012-10-11T08:43:12.123
> 
> 标签：javascript, jquery, scope

我有这个功能：

```
function loadCollapse() {
  function collapseDetail() {
    $(this).next().fadeToggle(500);
  }    

  //toggle the componenet with class summary  
  $("span.summary").unbind('click',collapseDetail);
  $("span.summary").click(collapseDetail);
} 
```

此函数绑定到`ajaxComplete()`事件，也就是在所有 ajax 请求完成时执行。奇怪的是解除绑定不起作用。

它仅在`collapseDetail()`定义/移动到`loadCollapse()`. 为什么？

每次执行该函数时，函数内部的函数是否真的重新定义？

我需要担心由此产生的任何潜在的内存/性能问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:45:23.230

每次调用该函数时，`collapseDetail`都会重新定义该函数，因此它将与您上次创建的函数不同。因为它是一个不同的函数，而不是你在第一次调用时绑定的那个，所以 unbind 不会有任何效果，因为这个新`collapseDetail`函数从未被绑定。

解决此问题的一种方法示例：

```
function generateLoadCollapse() {
    var collapseDetail = function() {
        $(this).next().fadeToggle(500);
    };

    var loadCollapse = function() {
        $("span.summary").unbind('click',collapseDetail);
        $("span.summary").click(collapseDetail);
    };

    return loadCollapse;
} 
```

另一种方式可能是这样的：

```
function generateLoadCollapse() {
    return (function() {
        this.collapseDetail = function() {
            $(this).next().fadeToggle(500);
        };

        $("span.summary").unbind('click',this.collapseDetail);
        $("span.summary").click(this.collapseDetail);
    })();
} 
```

然后，您可以将此函数返回的值分配给您之前的值`loadCollapse`：

```
loadCollapse = generateLoadCollapse(); 
```

# android - 我正在按照android指南学习xml解析器，但是示例项目提示错误，可能是什么原因？

> ID：12835558
> 
> 赞同：1
> 
> 时间：2012-10-11T08:43:18.840
> 
> 标签：android, xml, parsing

这是链接[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)，示例代码在右侧供下载。

**我正在使用 wi-fi 连接，一些人建议禁用 LAN 卡，我这样做了，仍然有例外......并且所有与读取 xml 相关的项目都无法在我的模拟器上运行。**

**它提示我这个错误**

```
10-11 08:41:43.169: E/AndroidRuntime(825): FATAL EXCEPTION: main
10-11 08:41:43.169: E/AndroidRuntime(825): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android.networkusage/com.example.networkusage.NetworkActivity}: java.lang.ClassNotFoundException: com.example.networkusage.NetworkActivity
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.os.Looper.loop(Looper.java:137)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-11 08:41:43.169: E/AndroidRuntime(825):  at java.lang.reflect.Method.invokeNative(Native Method)
10-11 08:41:43.169: E/AndroidRuntime(825):  at java.lang.reflect.Method.invoke(Method.java:511)
10-11 08:41:43.169: E/AndroidRuntime(825):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-11 08:41:43.169: E/AndroidRuntime(825):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-11 08:41:43.169: E/AndroidRuntime(825):  at dalvik.system.NativeStart.main(Native Method)
10-11 08:41:43.169: E/AndroidRuntime(825): Caused by: java.lang.ClassNotFoundException: com.example.networkusage.NetworkActivity
10-11 08:41:43.169: E/AndroidRuntime(825):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
10-11 08:41:43.169: E/AndroidRuntime(825):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
10-11 08:41:43.169: E/AndroidRuntime(825):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-11 08:41:43.169: E/AndroidRuntime(825):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-11 08:41:43.169: E/AndroidRuntime(825):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:01:18.950

编辑：- 我下载并将示例导入到 Eclipse。为了让它运行，我必须编辑 android manifest 让它读

```
<activity
            <!-- note removed all but simple name from android:name -->
            android:name="NetworkActivity" 
            android:label="@string/app_name" >
            <!-- more stuff -->
</activity> 
```

* * *

看来您需要将 com.example.networkusage.NetworkActivity 添加到 AndroidManifest

```
 <activity 
            android:name="com.example.networkusage.NetworkActivity"
        </activity> 
```

* * *

Google 的开发人员文档也存在一个问题，您的清单不应该有

```
<?xml version="1.0" encoding="utf-8"?> 
```

在顶部。如果我包含它，至少 Eclipse 总是会为我抱怨。如果您从文档中复制了该行，则值得将其删除。我不认为这是基于发布的异常的问题，但是......

# android - 如何将加载程序对话框添加到我的 web 视图？

> ID：12835560
> 
> 赞同：2
> 
> 时间：2012-10-11T08:43:29.200
> 
> 标签：android, android-webview

我正在尝试在我的应用程序中将加载程序对话框添加到我的 web 视图中。那么，你能帮我解决这个问题吗？

这是我的 webview**代码**：

```
public class AlTibbiWebViewActivity extends Activity {

private WebView wv;
private Intent incomingIntent = null;
private WebViewClient wvc = new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        wv.loadUrl(url);
        return true;
    }

};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.web_view);
    this.wv = (WebView) findViewById(R.id.webView);
    this.wv.setWebViewClient(wvc);
    wv.getSettings().setJavaScriptEnabled(true);
    this.incomingIntent = getIntent();
    String urlToLoad = incomingIntent.getExtras().getString("urlToLoad");

    //EXTRA HEADER MAP (remove header from web view )

     Map<String, String> aMap = new HashMap<String, String>() ;
     aMap.put("app", "no");
     //myMap = Collections.unmodifiableMap(aMap);
     wv.loadUrl(urlToLoad , aMap);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:49:31.700

```
webView.setWebViewClient(new WebViewClient() {

        public boolean shouldOverrideUrlLoading(WebView view, String url) {              
            view.loadUrl(url);
            return true;
        }
        public void onLoadResource (WebView view, String url) {
            if (progrDialog == null) {
                progrDialog = new ProgressDialog(YourActivity.this);
                progrDialog.setMessage("Loading...");
                progrDialog.show();
            }
        }
        public void onPageFinished(WebView view, String url) {
            try{
            if (progrDialog.isShowing()) {
                progrDialog.dismiss();
                progrDialog = null;
            }
            }catch(Exception exception){
                exception.printStackTrace();
            }
        }
    }); 
```

# jquery - jQuery - 检查数字数组的顺序

> ID：12835561
> 
> 赞同：2
> 
> 时间：2012-10-11T08:43:30.540
> 
> 标签：jquery

使用 jQuery 是否有一个函数可以告诉我数字数组的内容是否按数字顺序排列？例如;

[2,5,7,8,9] 将返回 true [5,2,7,8,9] 将返回 false

场景：我有一个从 mysql 填充的 UL，li 项目是随机显示的文本语句，li 的 id 是项目应为正确序列的排名顺序号。然后，用户必须使用 jQuery sortable 通过拖放来重新排序项目。当项目被删除时，我希望 jQuery 通过序列化将重新排序的项目抓取到一个数组中，然后我可以检查它们是否按数字顺序排列，这将表明正确的答案。我已经一切正常，我可以将结果传回 php 进行验证，然后在单独的 div 中显示答案，但我想使用 jQuery 对客户端进行检查，而不是发回服务器。

温柔对待我 我是新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:54:56.247

给你试试这个。

```
var arr1 = [5,2,7,8,9];
var arr2 = [2,5,7,8,9];

function isNumeric(arr) {
   for (var i = 0; i < arr.length - 1; i++) {
      if (arr[i] > arr[i + 1]) {
         return false;
      }
   }
   return true;
}

console.log(isNumeric(arr1));
console.log(isNumeric(arr2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:04:26.190

```
var array1 = [1, 2, 3, 4, 5, 6];
var array2 = [1, 2, 4, 3, 5, 6];

console.log(checkArrayOrder(array1 ,array2));

function checkArrayOrder(array1 ,array2)
{
    for (var i = 0; i<array2.length; i++) {
        if (array2[i] != array1[i]) {
           return false;
            break;
        }//if close
    }//for close
    return true;
} 
```

检查这个[小提琴](http://jsfiddle.net/u9xES/40/)

​</p>

# richtextbox - Lotus Notes：显示附加到文档中富文本字段的图像

> ID：12835563
> 
> 赞同：2
> 
> 时间：2012-10-11T08:43:31.697
> 
> 标签：richtextbox, document, lotus-notes, rtf

我怎么做？我有一个富文本字段，其中附加了一个图像，但现在我想直接在文档中显示该图像，而不是双击附件来查看图像。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:45:36.820

有一些技巧可以完成这项工作，但我的经验是它经常失败并向用户显示红色 x 而不是图像。

我建议您使用并排的视图和 xpage 做一个复合应用程序，当用户选择文档或打开它时，您使用 xpage 中的图像控件显示图像。

[这是一个链接，描述了您如何找到图像的正确网址](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_ABOUT_URL_COMMANDS_FOR_OPENING_IMAGE_FILES_ATTACHMENTS_AND_OLE_OBJECTS.html)

# grails - 使用 Markdown 作为 Grails 视图

> ID：12835568
> 
> 赞同：7
> 
> 时间：2012-10-11T08:43:40.770
> 
> 标签：grails, markdown

我们正在编写一个 grails (Grails 2.1.1) 项目，对于我们的某些视图，我们希望使用 markdown 而不是 gsp 文件。

目前，我们可以使用特殊布局中的[降价插件来做到这一点。](http://www.grails.org/plugin/markdown)这使我们可以像这样渲染 markdown 视图：

`render(layout: 'docs', view: 'markdown')`

但是，这要求降价页面具有 .gsp 扩展名，而出于实际原因，我们需要它具有 .md 扩展名。

有谁知道将markdown用作grails视图的更好方法？如果我们可以避免使用 .gsp 扩展名，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:42:21.973

# 简短的回答

如果不进行一些重大修改，您将无法做到这一点。分布式 GrailsViewResolver 硬绑定到 .gsp 和 .jsp 扩展。

请参阅[github 上的 grails-core](https://github.com/grails/grails-core/blob/master/grails-web/src/main/groovy/org/codehaus/groovy/grails/web/servlet/view/GrailsViewResolver.java#L54 "github 上的 grails-core")进行验证。

# 长答案

您或许可以设计自己的 Ant 任务，将其挂接到 Grails 应用程序的编译周期，这样至少您可以通过 GroovyPageCompiler 编译 *.md 文件。

该过程可能看起来像[这样](https://gist.github.com/3927274)（尽管不完全是，因为在这种情况下，为了简单起见，我依靠插件的 taglib 来进行渲染）。

但这并不能解决您的所有问题。您还需要注册一个新的视图解析器，为此您将不可避免地走上重写[GrailsDispatcherServlet](https://github.com/grails/grails-core/blob/master/grails-web/src/main/groovy/org/codehaus/groovy/grails/web/servlet/GrailsDispatcherServlet.java)的道路。

听起来您将文件存储在 conf 目录中的解决方案可能是您目前最好的（尽管很脏）的选择。也许将来有人会花时间允许可配置的 GSP 文件扩展名，这可能会解决您的问题。

我希望您发现其中的一些信息很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T21:22:24.180

我做了几乎相同的事情，但今天采用了另一种方法。我想提供项目的自述文件，所以我无法真正将它移动到任何地方。我最终将它软链接`readme.md`到`grails-app/views/readme/readme.gsp`. 我[发布](http://highlevelbits.com/2014/11/markdown-readme-from-grails.html)了整个事情。

是的——如果你和你的所有同事都在 *-nix 上，软链接就可以工作——所以这不是一种平台安全的方式。

# sql - 如何使用纯 SQL 进行探索性数据分析？

> ID：12835572
> 
> 赞同：2
> 
> 时间：2012-10-11T08:43:43.093
> 
> 标签：sql, ssis, data-mining, etl, data-quality

我是一名 ETL 开发人员，使用不同的工具来完成 ETL 任务。在我们所有的项目中都会出现同样的问题：在构建数据仓库之前以及在构建 ETL 以进行数据移动之前，数据分析的重要性。通常我使用纯 SQL 进行数据分析（即发现错误数据、数据异常、计数、不同值等），因为 ETL 工具没有为这些提供好的替代方案（我们的工具中有一些数据质量组件，但它们是没那么复杂）。一种选择是使用[R 编程语言](http://en.wikipedia.org/wiki/R_%28programming_language%29)或[SPSS Modeler](http://www-01.ibm.com/software/analytics/spss/products/modeler/)等工具进行这种[探索性数据分析](http://en.wikipedia.org/wiki/Exploratory_data_analysis)。但是，如果有数百万行数据，这些工具通常不可用或不合格。

如何使用 SQL 进行这种分析？有没有可用的辅助脚本？在数据清洗和 ETL 之前，您如何进行这种探索性数据分析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:14:05.030

将数据加载到某个暂存系统并使用 SSIS 中的数据分析器任务。使用此链接[http://gowdhamand.wordpress.com/2012/07/27/data-profiling-task-in-ssis/](http://gowdhamand.wordpress.com/2012/07/27/data-profiling-task-in-ssis/)来验证如何进行数据分析。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T13:46:35.880

为此，我找到了一个很好的工具：[Datacleaner](http://datacleaner.org/)。这似乎完成了我想在 EDA 过程中对数据做的大部分事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-07T04:50:38.437

使用这个 Exploratory Data Analysis for SQL 可以帮助进行数据分析和分析

[https://pypi.org/project/edaSQL/](https://pypi.org/project/edaSQL/)

源代码： [https ://github.com/selva221724/edaSQL](https://github.com/selva221724/edaSQL)

# c++ - 如何将 std::chrono::time_point 转换为带有小数秒的日历日期时间字符串？

> ID：12835577
> 
> 赞同：70
> 
> 时间：2012-10-11T08:43:52.443
> 
> 标签：c++, datetime, c++11, std, chrono

如何转换`std::chrono::time_point`为带有小数秒的日历日期时间字符串？

例如：

```
"10-10-2012 12:38:40.123456" 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-11T09:08:47.050

如果system_clock，这个类有time_t转换。

```
#include <iostream>
#include <chrono>
#include <ctime>

using namespace std::chrono;

int main()
{
  system_clock::time_point p = system_clock::now();

  std::time_t t = system_clock::to_time_t(p);
  std::cout << std::ctime(&t) << std::endl; // for example : Tue Sep 27 14:21:13 2011
} 
```

示例结果：

```
Thu Oct 11 19:10:24 2012 
```

编辑：但是， time_t 不包含小数秒。另一种方法是使用 time_point::time_since_epoch() 函数。此函数从纪元返回持续时间。下面的例子是毫秒分辨率的小数。

```
#include <iostream>
#include <chrono>
#include <ctime>

using namespace std::chrono;

int main()
{
  high_resolution_clock::time_point p = high_resolution_clock::now();

  milliseconds ms = duration_cast<milliseconds>(p.time_since_epoch());

  seconds s = duration_cast<seconds>(ms);
  std::time_t t = s.count();
  std::size_t fractional_seconds = ms.count() % 1000;

  std::cout << std::ctime(&t) << std::endl;
  std::cout << fractional_seconds << std::endl;
} 
```

示例结果：

```
Thu Oct 11 19:10:24 2012

925 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-10-11T17:04:39.540

不言自明的代码如下，首先创建`std::tm`对应于 10-10-2012 12:38:40 的 a ，将其转换为 a `std::chrono::system_clock::time_point`，添加 0.123456 秒，然后通过转换回 a 将其打印出来`std::tm`。如何处理小数秒是最后一步。

```
#include <iostream>
#include <chrono>
#include <ctime>

int main()
{
    // Create 10-10-2012 12:38:40 UTC as a std::tm
    std::tm tm = {0};
    tm.tm_sec = 40;
    tm.tm_min = 38;
    tm.tm_hour = 12;
    tm.tm_mday = 10;
    tm.tm_mon = 9;
    tm.tm_year = 112;
    tm.tm_isdst = -1;
    // Convert std::tm to std::time_t (popular extension)
    std::time_t tt = timegm(&tm);
    // Convert std::time_t to std::chrono::system_clock::time_point
    std::chrono::system_clock::time_point tp = 
                                     std::chrono::system_clock::from_time_t(tt);
    // Add 0.123456 seconds
    // This will not compile if std::chrono::system_clock::time_point has
    //   courser resolution than microseconds
    tp += std::chrono::microseconds(123456);

    // Now output tp

    // Convert std::chrono::system_clock::time_point to std::time_t
    tt = std::chrono::system_clock::to_time_t(tp);
    // Convert std::time_t to std::tm (popular extension)
    tm = std::tm{0};
    gmtime_r(&tt, &tm);
    // Output month
    std::cout << tm.tm_mon + 1 << '-';
    // Output day
    std::cout << tm.tm_mday << '-';
    // Output year
    std::cout << tm.tm_year+1900 << ' ';
    // Output hour
    if (tm.tm_hour <= 9)
        std::cout << '0';
    std::cout << tm.tm_hour << ':';
    // Output minute
    if (tm.tm_min <= 9)
        std::cout << '0';
    std::cout << tm.tm_min << ':';
    // Output seconds with fraction
    //   This is the heart of the question/answer.
    //   First create a double-based second
    std::chrono::duration<double> sec = tp - 
                                    std::chrono::system_clock::from_time_t(tt) +
                                    std::chrono::seconds(tm.tm_sec);
    //   Then print out that double using whatever format you prefer.
    if (sec.count() < 10)
        std::cout << '0';
    std::cout << std::fixed << sec.count() << '\n';
} 
```

对我来说，这输出：

```
10-10-2012 12:38:40.123456 
```

您`std::chrono::system_clock::time_point`可能精确到也可能不够精确以保持微秒。

**更新**

一个更简单的方法是只使用[这个日期库](http://howardhinnant.github.io/date/date.html)。代码简化为（使用 C++14 持续时间文字）：

```
#include "date.h"
#include <iostream>
#include <type_traits>

int
main()
{
    using namespace date;
    using namespace std::chrono;
    auto t = sys_days{10_d/10/2012} + 12h + 38min + 40s + 123456us;
    static_assert(std::is_same<decltype(t),
                               time_point<system_clock, microseconds>>{}, "");
    std::cout << t << '\n';
} 
```

输出：

```
2012-10-10 12:38:40.123456 
```

`static_assert`如果您不需要证明 of 的类型`t`是 a ，则可以跳过`std::chrono::time_point`。

如果输出不符合您的喜好，例如您真的想要 dd-mm-yyyy 排序，您可以：

```
#include "date.h"
#include <iomanip>
#include <iostream>

int
main()
{
    using namespace date;
    using namespace std::chrono;
    using namespace std;
    auto t = sys_days{10_d/10/2012} + 12h + 38min + 40s + 123456us;
    auto dp = floor<days>(t);
    auto time = make_time(t-dp);
    auto ymd = year_month_day{dp};
    cout.fill('0');
    cout << ymd.day() << '-' << setw(2) << static_cast<unsigned>(ymd.month())
         << '-' << ymd.year() << ' ' << time << '\n';
} 
```

它准确地给出了请求的输出：

```
10-10-2012 12:38:40.123456 
```

**更新**

以下是如何以毫秒精度巧妙地格式化当前时间 UTC：

```
#include "date.h"
#include <iostream>

int
main()
{
    using namespace std::chrono;
    std::cout << date::format("%F %T\n", time_point_cast<milliseconds>(system_clock::now()));
} 
```

这只是为我输出：

```
2016-10-17 16:36:02.975 
```

C++17 将允许您替换`time_point_cast<milliseconds>`为`floor<milliseconds>`. 在此之前`date::floor`可在`"date.h"`.

```
std::cout << date::format("%F %T\n", date::floor<milliseconds>(system_clock::now())); 
```

## 更新 C++20

在 C++20 中，这现在很简单：

```
#include <chrono>
#include <iostream>

int
main()
{
    using namespace std::chrono;
    auto t = sys_days{10d/10/2012} + 12h + 38min + 40s + 123456us;
    std::cout << t << '\n';
} 
```

要不就：

```
std::cout << std::chrono::system_clock::now() << '\n'; 
```

`std::format`将可用于自定义输出。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T09:09:42.480

通常，您不能以任何直接的方式执行此操作。`time_point`本质上只是一个`duration`来自特定时钟的时代。

如果您有 a `std::chrono::system_clock::time_point`，那么您可以使用`std::chrono::system_clock::to_time_t`将 转换`time_point`为 a `time_t`，然后使用普通的 C 函数（例如`ctime`或`strftime`）对其进行格式化。

* * *

示例代码：

```
std::chrono::system_clock::time_point tp = std::chrono::system_clock::now();
std::time_t time = std::chrono::system_clock::to_time_t(tp);
std::tm timetm = *std::localtime(&time);
std::cout << "output : " << std::put_time(&timetm, "%c %Z") << "+"
          << std::chrono::duration_cast<std::chrono::milliseconds>(tp.time_since_epoch()).count() % 1000 << std::endl; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-30T01:18:50.603

这对我来说适用于像 YYYY.MM.DD-HH.MM.SS.fff 这样的格式。试图让这段代码能够接受任何字符串格式就像重新发明轮子一样（即在 Boost.

```
std::chrono::system_clock::time_point string_to_time_point(const std::string &str)
{
    using namespace std;
    using namespace std::chrono;

    int yyyy, mm, dd, HH, MM, SS, fff;

    char scanf_format[] = "%4d.%2d.%2d-%2d.%2d.%2d.%3d";

    sscanf(str.c_str(), scanf_format, &yyyy, &mm, &dd, &HH, &MM, &SS, &fff);

    tm ttm = tm();
    ttm.tm_year = yyyy - 1900; // Year since 1900
    ttm.tm_mon = mm - 1; // Month since January 
    ttm.tm_mday = dd; // Day of the month [1-31]
    ttm.tm_hour = HH; // Hour of the day [00-23]
    ttm.tm_min = MM;
    ttm.tm_sec = SS;

    time_t ttime_t = mktime(&ttm);

    system_clock::time_point time_point_result = std::chrono::system_clock::from_time_t(ttime_t);

    time_point_result += std::chrono::milliseconds(fff);
    return time_point_result;
}

std::string time_point_to_string(std::chrono::system_clock::time_point &tp)
{
    using namespace std;
    using namespace std::chrono;

    auto ttime_t = system_clock::to_time_t(tp);
    auto tp_sec = system_clock::from_time_t(ttime_t);
    milliseconds ms = duration_cast<milliseconds>(tp - tp_sec);

    std::tm * ttm = localtime(&ttime_t);

    char date_time_format[] = "%Y.%m.%d-%H.%M.%S";

    char time_str[] = "yyyy.mm.dd.HH-MM.SS.fff";

    strftime(time_str, strlen(time_str), date_time_format, ttm);

    string result(time_str);
    result.append(".");
    result.append(to_string(ms.count()));

    return result;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-23T11:54:23.143

我会把它放在对已接受答案的评论中，因为那是它所属的地方，但我不能。因此，以防万一有人得到不可靠的结果，这可能就是原因。

请注意接受的答案，如果 time_point 在纪元之前，它将失败。

这行代码：

```
std::size_t fractional_seconds = ms.count() % 1000; 
```

如果 ms.count() 为负数，将产生意外值（因为 size_t 并不意味着保存负值）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-28T04:13:35.297

就我而言，我使用的是线程安全的 chrono 和 c 函数 localtime_r（与 std::localtime 相反）。

```
#include <iostream>
#include <chrono>
#include <ctime>
#include <time.h>
#include <iomanip>

int main() {
  std::chrono::system_clock::time_point now = std::chrono::system_clock::now();
  std::time_t currentTime = std::chrono::system_clock::to_time_t(now);
  std::chrono::milliseconds now2 = std::chrono::duration_cast<std::chrono::milliseconds>(now.time_since_epoch());
  struct tm currentLocalTime;
  localtime_r(&currentTime, &currentLocalTime);
  char timeBuffer[80];
  std::size_t charCount { std::strftime( timeBuffer, 80,
                                         "%b %d %T",
                                          &currentLocalTime)
                         };

  if (charCount == 0) return -1;

  std::cout << timeBuffer << "." << std::setfill('0') << std::setw(3) << now2.count() % 1000 << std::endl;
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-19T10:10:06.767

如果要以`system_clock::time_point`numpy datetime64 的格式格式化 a，可以使用：

```
std::string format_time_point(system_clock::time_point point)
{
    static_assert(system_clock::time_point::period::den == 1000000000 && system_clock::time_point::period::num == 1);
    std::string out(29, '0');
    char* buf = &out[0];
    std::time_t now_c = system_clock::to_time_t(point);
    std::strftime(buf, 21, "%Y-%m-%dT%H:%M:%S.", std::localtime(&now_c));
    sprintf(buf+20, "%09ld", point.time_since_epoch().count() % 1000000000);
    return out;
} 
```

样本输出：`2019-11-19T17:59:58.425802666`

# box-api - 使用 box api 的文件的直接下载链接

> ID：12835579
> 
> 赞同：0
> 
> 时间：2012-10-11T08:44:02.043
> 
> 标签：box-api

我们想获得一个在一段时间后过期的文件的直接下载链接，在 v2 api 中是否有任何端点。

Dropbox 有一个媒体 API，它做得足够好。[https://www.dropbox.com/developers/reference/api#media](https://www.dropbox.com/developers/reference/api#media)

我们检查了文档，发现我们可以共享文件并获取下载链接，但这会改变文件的属性，而且该链接仅适用于高级用户。

——阿努拉格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:08:25.783

您发现的通过 Box 提供的共享链接非常接近您的要求。非高级用户仍然可以获得共享链接，只是链接将指向下载页面，而不是直接下载链接。

您的需求是否要求它没有这样的中间步骤？

# php - .htaccess with mod_rewrite for PHP

> ID：12835581
> 
> 赞同：1
> 
> 时间：2012-10-11T08:44:05.757
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

> **可能重复：**
> [在 PHP 中使用 mod_rewrite 重写 URL](https://stackoverflow.com/questions/2460851/rewrite-url-in-php-with-mod-rewrite)

我正在为我们当地的城市开发一个工作门户，它是使用 PHP 和 MySQL 开发的。我已经将各种功能主义者纳入其中，例如按城市搜索、按经验水平搜索、按行业类型搜索，最后按日期搜索。

我有一个这样的网址：

```
http://example.com/job_details.php?id=hj11&location=Mumbai&job=System+Administrator&company=Exa+India+Pvt+Ltd 
```

我尝试了很多方法来达到我所期望的最终结果。但它没有发生在我身上..:-(

我正在寻找这样的东西，

```
http://example.com/jobs-in-mumbai/Exa-India-Pvt-Ltd/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:24:20.253

您还需要将您的 id 放在 URL 中。所以 URL 将是：

```
http://example.com/jobs-in-mumbai/Exa-India-Pvt-Ltd/Mumbai/hj11 
```

首先，创建一个文件名为“.htaccess”的文本文件，并将其放在服务器的主文件夹（公共主页）中。

将给定的代码放在您的 htaccess 文件中。上传文件。

将给定的 URL 转换为上面指定的 URL 的代码是：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(.*)/(.*)/(.*)$ job_details.php?id=$4&location=$3&job=$1&company=$2 [L] 
```

请尝试让我知道。将 .htaceess 放在放置 job_details.php 的同一文件夹中。我假设这是在公共主文件夹中。

# jquery - 如何克隆（）一个元素n次？

> ID：12835582
> 
> 赞同：9
> 
> 时间：2012-10-11T08:44:08.317
> 
> 标签：jquery, clone

我有一个动态表，我想`<col>`用 jQuery 附加元素。

我有这个：

```
var tds = jQuery("tr > td").length; // count how many tds
jQuery("#colgroup-compare > col").clone() // clone
    .appendTo('#colgroup-compare'); // and append 
```

显然这只会附加 1 `<col>`，我想附加 (n) 个数字。我该怎么做？

我有长度，我有分身能力，现在怎么结合？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T08:47:26.323

有一个循环：

```
var $col = $("#colgroup-compare > col");
for(var i = 0; i < n; i++){
    $col.clone().appendTo('#colgroup-compare');
} 
```

您不能`jQuery("#colgroup-compare > col").clone().appendTo('#colgroup-compare');`在循环中使用，因为这会在迭代 > 0 时附加更多列...

这可以优化：

```
var $colgroup = $('#colgroup-compare'); // this saves the colgroup collection to avoid recomputing it later
var $col = $colgroup.children("col"); // this makes the clonable col(s) from the col children of $colgroup
for (var i=n; i-->0;){ // n times (from n-1 to 0)
    $colgroup.append($col.clone()); // append a clone of the col(s)
} 
```

编辑：要计算`th`你的第一行，你可以这样做：

```
var n=$("tr").first().children('th').length; 
```

（这避免了多于一排）

[示范](http://jsfiddle.net/mQEYu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T18:53:01.870

如果您不想要深度克隆，则可以通过将元素的[outerHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element.outerHTML)传递给数组[`join()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join)方法来避免手动迭代，从而生成与元素数量相对应的 HTMLString `n`，如下所示：

```
var elementString = new Array(++n).join($(selector).get(0).outerHTML) 
```

您可以将其附加到您希望的任何元素。

* * *

在您的情况下，您可以执行以下操作：

```
var n= $("tr > td").length,
$colgroup = $("#colgroup-compare");
$colgroup.append(new Array(++n).join($colgroup.find("col").get(0).outerHTML)); 
```

# c - 为什么 mac os 上的 memchr() 会出现越界

> ID：12835584
> 
> 赞同：5
> 
> 时间：2012-10-11T08:44:10.917
> 
> 标签：c, macos, overflow

在 mac os x 上使用 memchr() 时遇到溢出问题。

这是我的测试代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(void){
    char *content="http\r\nUser";
    int content_size = strlen(content);
    char *contmem = malloc(content_size+1);
    memset(contmem, '\0', content_size+1);
    memcpy(contmem, content, content_size);
    printf("%c\n", *(content+content_size));
    printf("%c\n", *(contmem+content_size));
    char *t = memchr(content, 't', content_size);
    printf("%c\n", *t);
    return 0;
} 
```

它在linux上正常工作，即我的fedora 16，并打印出正确的t值。但是当我在 Mac 上运行相同的代码时，会出现分段错误！！

用 gdb 调试后，我的说法是：

```
(gdb) print t
$7 = 0xf4b <Address 0xf4b out of bounds> 
```

然后我尝试在这个测试文件中重写 memchr 函数：

```
static char*
memchr(const char *data, int c, unsigned long len){
    char *tp = data;
    unsigned long i;
    for( i = 0; i<len; i++){
        if((int)*tp == c){
            return tp;
        }else{
            tp = tp+1;
        }
    }
} 
```

输出似乎正确！

```
 (gdb) print t
 $1 = 0x100000f1d "ttp\r\nUser" 
```

所以我对 mac os 上 memchr() 的异常行为感到困惑，而其他 mem 函数如 memset() memcpy() 工作正常。

如何在不重写 mac 上的 memchr() 的情况下运行测试？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T09:03:42.387

该函数[`memchr()`](http://en.cppreference.com/w/c/string/byte/memchr)在 中声明`string.h`，发布的代码中没有包含指令。这意味着编译器将生成一个隐式函数声明（它应该发出警告），它返回一个`int`. 如果您的系统上的`sizeof(int)`和`sizeof(char*)`不同，这可以解释问题。添加：

```
#include <string.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:02:42.920

您的代码确实应该可以工作。您的编译器可能正在使用 mem***() 函数的内置版本。尝试包含 string.h 以强制使用 libc 版本。

# django - 如何使用 XHR 通过 POST 将数据作为键值对而不是字符串发送

> ID：12835588
> 
> 赞同：3
> 
> 时间：2012-10-11T08:44:16.103
> 
> 标签：django, post, xmlhttprequest, angularjs

我正在创建两个 POST 调用。一种使用 django 形式，另一种通过资源 xhr 使用 angular js。

角度设置如下所示：

```
myModule.factory('gridData', function($resource) {
    //define resource class
    var root = {{ root.pk }};
    var csrf = '{{ csrf_token }}';
    return $resource('{% url getJSON4SlickGrid root.pk %}:wpID/', {wpID:'@id'},{
            get: {method:'GET', params:{}, isArray:true},
            update:{method:'POST', headers: {'X-CSRFToken' : csrf }}
    });
}); 
```

通过这样创建 xhr 发布请求：

```
item.$update(); 
```

此发布请求按预期发送到服务器，但是当我想访问[QueryDict](https://docs.djangoproject.com/en/dev/ref/request-response/#querydict-objects)时，我无法访问使用传递的数据：

```
name = request.POST.get('name', None) 
```

`name`总是`None`这样。

这背后的问题是 QueryDict 对象被解析得很奇怪。

```
 print request.POST
<QueryDict: {u'{"name":"name update","schedule":0"}':[u'']}> 
```

而我本来期望这个结果，当我通过“正常”发布请求发送数据时得到这个结果：

```
<QueryDict: {u'name': [u'name update'], u'schedule': [u'0']}> 
```

所以似乎 Django 在 POST 请求中接收到一些东西，指示 Django 将参数解析为一个字符串。知道如何规避这个问题吗？

更新：

我发现[这个](https://stackoverflow.com/a/6322561/237690)讨论他们说问题是如果您提供除 MULTIPART_CONTENT 以外的任何内容类型，则参数将被解析为一个字符串。我检查了使用 POST 请求发送的内容类型，它确实设置为`'CONTENT_TYPE': 'application/json;charset=UTF-8'`. 因此，这很可能是问题所在。因此我的问题是：如何将使用 angular.js 资源创建的 xhr 发布请求的 CONTENT_TYPE 设置为`MULTIPART_CONTENT`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T09:03:42.150

你可以：

*   摆弄客户端[发送数据而不是json](http://docs.angularjs.org/api/ng.$http)
*   使用`json.loads(request.raw_post_data).get('name', None)`(django < 1.4)
*   使用`json.loads(request.body).get('name', None)`(django >= 1.4)

Angular 文档讨论了[转换请求和响应](http://docs.angularjs.org/api/ng.$http)

> 要在本地覆盖这些转换，请将转换函数指定为配置对象的 transformRequest 和/或 transformResponse 属性。要全局覆盖默认转换，请覆盖 $httpProvider 的 $httpProvider.defaults.transformRequest 和 $httpProvider.defaults.transformResponse 属性。

[您可以在此处](https://stackoverflow.com/a/12191613/1733117)找到前面提到的示例。

# azure - 无法创建 Azure 移动服务

> ID：12835597
> 
> 赞同：1
> 
> 时间：2012-10-11T08:44:35.633
> 
> 标签：azure, azure-mobile-services

> **可能重复：**
> [无法获取移动服务的位置信息 - 错误 400](https://stackoverflow.com/questions/12835348/failed-to-fetch-locations-information-for-mobile-services-error-400)

最近我有一个 Azure 试用订阅来试用移动服务，但每当我尝试创建

新的移动服务我收到此错误消息。有什么解决方案可以解决吗？

![在此处输入图像描述](../Images/c19ff337b5d01fa045f5fede6264f750.png)

# html - chrome中的输入字段宽度和填充

> ID：12835600
> 
> 赞同：1
> 
> 时间：2012-10-11T08:44:48.690
> 
> 标签：html, css, google-chrome

我遇到了一个问题，我的输入元素的宽度因浏览器而异。Chrome 给出了一个不正确的宽度，其中应该是宽度+填充它现在是宽度，总填充是最小宽度。

HTML

```
<input type="search" name="keywords" id="ctrl_keywords_2" class="text" value="">​ 
```

CSS

```
input {
width: 76px;
padding-right: 52px;
padding-left: 24px;
}​ 
```

我在这里放[了一个例子](http://jsfiddle.net/Sqyn7/)来测试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:00:43.997

此处解释的输入类型搜索存在限制，[http://css-tricks.com/webkit-html5-search-inputs/](http://css-tricks.com/webkit-html5-search-inputs/)

```
input[type=search] {    
    padding: 30px;            /* Overridden by padding: 1px; */
    font-family: Georgia;     /* Overridden by font: -webkit-small-control; */
    border: 5px solid black;  /* Overridden by border: 2px inset; */
    background: red;          /* Overridden by background-color: white; */
    line-height: 3;           /* Irrelevant, I guess */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:49:10.910

添加类型="搜索"

```
input [type="search"]{
width: 75px;
padding-right: 52px;
padding-left: 24px; 
}​ 
```

演示[http://jsfiddle.net/Sqyn7/1/](http://jsfiddle.net/Sqyn7/1/)

# list - 如何更改 SharePoint 中列表菜单工具栏菜单的顺序

> ID：12835601
> 
> 赞同：1
> 
> 时间：2012-10-11T08:45:04.957
> 
> 标签：list, sharepoint, menu, customization

我需要将自定义菜单添加到列表菜单工具栏。我写`elements.xml`了如下图：

```
<CustomAction
   Id="SiteActionsToolbar"
   RegistrationType="ContentType"
   RegistrationId="0x01"
   Location="ViewToolbar"
   Title="Upload"
   Sequence="0"
   Description="Upload file ti file system">
   <UrlAction Url="SitePages/UploadFile.aspx?ListId={ListId}"/>
</CustomAction> 
```

我的自定义菜单出现并且工作正常。但要求是在“新”菜单之后“动作”菜单之前设置此菜单的显示顺序。

是否可以在不使用 Javascript 的情况下在 sharepoint 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:33:02.740

您需要使用以下标签定义位置：

> <CommandUIExtension><CommandUIDefinitions> <CommandUIDefinition Location="Ribbon.Documents.New .Controls._children **"** >...

您可以通过将“新建”替换为您的部分来更改位置。

> 一般条目将是“新建”、“管理”、“副本”、“工作流程”

**Ribbon.Documents.New.Controls._children**行表示共享点将自定义按钮放置在哪个部分。

# iphone - 在 UINavigationbar 的右侧添加分页

> ID：12835602
> 
> 赞同：0
> 
> 时间：2012-10-11T08:45:12.717
> 
> 标签：iphone, objective-c, ios

一位设计师要求我在一个项目的 UINavigation 栏上添加分页，其目标是为 ios4.3+ 构建的。

我知道您可以在导航栏的右侧添加两个按钮，如本博客中所述：[在此处输入链接描述](http://www.mattdipasquale.com/blog/2010/11/02/how-to-add-multiple-uibarbuttonitems-to-uinavigationbar/)

但要得到设计师要求的外观 ![在此处输入图像描述](../Images/44b66fe601194c9168286e2194f6a36b.png)

我是否需要将图像添加到我的按钮，或者这是我以前从未见过的某种本机控件（特殊 UISegmentedControl？）？或者只有 2 个带有背景图像的自定义按钮。

谢谢，-代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:53:14.100

我使用分段控件实现了相同的功能，并且没有使用图像定义自定义按钮。我没有为箭头添加图像，而是使用了相应的 Unicode 字符并用它们实例化了分段控件。

```
 UISegmentedControl *toggleSegmentedControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"\u25B2",@"\u25BC",nil]];

UIBarButtonItem *toggleSegmentedControlBarItem = [[UIBarButtonItem alloc] initWithCustomView:toggleSegmentedControl];
self.navigationItem.leftBarButtonItem = toggleSegmentedControlBarItem; 
```

然后你的 leftBarButtonItem 被分段控件替换。

![在此处输入图像描述](../Images/3b51124bb65c7495b0c66c2f51735b0e.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T09:08:54.050

如果我不明白，您想在每个 UIBarButtonItem 中放置一个图像并设置按钮状态（单击时或正常状态）。如果是，您可以尝试此代码

```
`UIImage *buttonImageNormal = [UIImage imageNamed:@"image.png"];
UIImage *buttonImagePressed = [UIImage imageNamed:@"imagepressed.png"];
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
[myButton setImage:buttonImage forState:UIControlStateNormal];
[myButton setImage:buttonImage forState: UIControlStateHighlighted];

UIBarButtonItem aBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:myButton];

// Create and Set the Target and Action for aButton
[myButton addTarget:self action:@selector(myButtonClicked:) forControlEvents:UIControlEventTouchUpInside];` 
```

# javascript - jQuery Easy UI + treegrid + 复选框

> ID：12835611
> 
> 赞同：1
> 
> 时间：2012-10-11T08:45:36.490
> 
> 标签：javascript, jquery, treegrid, jquery-easyui

我在我的网站中使用“jQuery Easy UI”。我需要在每行带有复选框的页面中使用treegrid（与“jQuery Easy UI”-tree 证明的方式相同）。

![带有复选框屏幕截图的 jQuery Easy UI 树](../Images/141030171dbfdcde03cdc12ab2b76dd3.png)

我需要在 treegrid 小部件中与网格一起出现相同的树，而不是

![jQuery Easy UI 树形网格屏幕截图](../Images/722c9708a14ccd871ce4c30fe42db90c.png)

任何建议都是最受欢迎的......

谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:51:42.840

添加以下代码以将复选框列添加到树表中

```
$(function() {

columns:[[  
            {field:'code',title:'Code',width:100,align:'left'},
                {field:'name',title:'Name',width:100,align:'right'},  
                {field:'addr',title:'choose',width:80},  
                {field:'col4',title:'col4',width: 100, 
                    editor: {
                        type: 'checkbox', 
                        options: {on: '1', off: '0'}
                    }, 
                    formatter: function (value, row) { 
                        if (! row.leaf) { 
                            if (value == 1) { 
                                return '<img src="../resources/image/checked.jpg"/>'; 
                            } else { 
                                return '<img src="../resources/image/unchecked.jpg"/>'; 
                            } 
                        } else { 
                            return''; 
                        } 
                    }
                } 
              ]], 

            //Edit the end of the line, 
            // use click event first perform onAfterEdit event before the event trigger
            onClickRow: function (row) { 
                var rowIndex = row.id; 
                if (lastIndex != rowIndex) { 
                    $('#tablegridJS').treegrid('endEdit', lastIndex); 
                } 
             }, 
             //Line editing, 
             //use double-click event
             onDblClickRow: function (row) { 
             var rowIndex = row.id; 
                 if (lastIndex != rowIndex) { 
                     $('#tablegridJS').treegrid('endEdit', lastIndex); 
                     $('#tablegridJS').treegrid('beginEdit', rowIndex); 
                     lastIndex = rowIndex; 
                 } 
             }, 

            OnBeforeEdit: function (row) { 
                console.log(row);
                beforEditRow(row); // Here are the main steps and code functions 
            },

            OnAfterEdit: function (row, changes) { 
                console.log(change);
                var rowId = row.id; 
                    $.ajax ({ 
                    url: "saveProductConfig.action", 
                    data: row, 
                    success: function (text) { 
                        $.Messager.alert ('message', 'text', 'info'); 
                    }
                }); 
            },
            onClickCell: function(field, row) {
                if(field=='col4'){
                     var rowIndex = row.id; 
                     if (lastIndex != rowIndex) { 
                         $('#tablegridJS').treegrid('endEdit', lastIndex); 
                         $('#tablegridJS').treegrid('beginEdit', rowIndex); 
                         console.log($('#tablegridJS').treegrid('options')); 
                         options = $('#tablegridJS').treegrid('getEditor',{
                                index:row.id,    // pass the editing row id, defined via 'idField' property
                                field:'col4'
                            });
                         //console.log($(options.target).attr('checked',true));
                         console.log(options.target);
                         if(options.oldHtml=='<img src="../resources/image/unchecked.jpg">'){
                             $(options.target).attr('checked',true);
                         }else if(options.oldHtml=='<img src="../resources/image/checked.jpg">'){
                             $(options.target).attr('checked',false);
                         }
                         lastIndex = rowIndex; 
                     } 
                }           
            }
        });  

         function beforEditRow (row) { // This is the core, very useful if the same needs, then you can learn to achieve 
            //check box
            var libraryCoclum = $('#tablegridJS').treegrid('getColumnOption', 'col4'); 

            //checkbox object
            var checkboxOptionsObj = new Object (); 
            checkboxOptionsObj.on = '1 '; 
            checkboxOptionsObj.off = '0 '; 
            //add checkbox object on edit
            var checkboxEditorObj = new Object (); 
            checkboxEditorObj.type = 'checkbox'; 
            checkboxEditorObj.options = checkboxOptionsObj; 

            //ckeck whether to make checkbox or combo box editable
            if (row.leaf) { 
                libraryCoclum.editor = null; 
                typeCoclum.editor = comboboxEditorObj; 
            } else { 
                libraryCoclum.editor = checkboxEditorObj; 
                typeCoclum.editor = null; 
            } 
        }
        $("#bteasyui").click(function(){
            var dataSelected = "";
            //$("#tablegridJS").treegrid('selectAll');
            nodes = $("#tablegridJS").treegrid('getSelection');
            console.log(nodes);

            $('#tablegridJS').treegrid('beginEdit', nodes.id);  

            dataSelected = $("#tablegridJS").treegrid("check",'01');
            console.log($("#tablegridJS").treegrid('getChecked'));

        });
    }); 
```

# outlook - 用 tika 解析 Outlook pst

> ID：12835620
> 
> 赞同：4
> 
> 时间：2012-10-11T08:45:58.793
> 
> 标签：outlook, apache-tika

我是 Tika 的新手，正在解析 Outlook 文件。使用 Outlook Extractor 我可以解析 *.msg 文件，但不能解析 *.pst。是否可以用 tika 解析 pst 文件？如果是怎么办？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:17:12.417

在你问这个问题的时候，那是不可能的。Tika 增强请求 -添加 PST 支持的 TIKA-623 仅在 Tika 1.6 中得到解决[。](https://issues.apache.org/jira/browse/TIKA-623)对于旧版本的 Tika，您必须从那里获取补丁。（所有依赖项现在都在 Maven Central 中——这是很长一段时间内的关键阻碍）

对于 Apache Tika 1.6 或更高版本的用户来说，好消息是内置了 PST 支持，而[PST 现在是](http://tika.apache.org/1.8/formats.html#Mail_formats)Tika 中支持的邮件格式之一！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T12:50:05.400

pst 文件解析器可用于 Tika 1.6

[https://tika.apache.org/1.6/api/org/apache/tika/parser/mbox/OutlookPSTParser.html](https://tika.apache.org/1.6/api/org/apache/tika/parser/mbox/OutlookPSTParser.html)

[从http://grepcode.com/project/repo1.maven.org/maven2/org.apache.tika/tika-app/](http://grepcode.com/project/repo1.maven.org/maven2/org.apache.tika/tika-app/)下载最新的 jar

# javascript - 从javascript数组中删除逗号

> ID：12835621
> 
> 赞同：21
> 
> 时间：2012-10-11T08:45:58.080
> 
> 标签：javascript

我在javascript数组“testarray”中有3个字符串“a”、“b”、“c”。

```
var testarray=new Array("a","b","c"); 
```

然后我正在使用 javascript 警报框打印 testarray 的值。

```
alert(testarray); 
```

结果将像 a,b,c

所有这些字符串都由“，”字符分隔。我想用其他字符或两个或多个字符的组合替换此“，”，以便警报框显示类似`a%b%c`或`a%$b%$c`

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-11T08:47:43.850

使用[`join`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)：

```
alert(testarray.join("%")); // 'a%b%c' 
```

这是一个[工作示例](http://jsfiddle.net/MjELW/)。请注意，通过将空字符串传递给`join`您可以获得数组所有元素的连接：

```
alert(testarray.join("")); // 'abc' 
```

* * *

*旁注*`Array`：通常认为在创建数组时使用数组文字而不是构造函数是更好的做法：

```
var testarray = ["a", "b", "c"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T08:50:33.393

你可以遍历数组并插入你的字符

```
var testarray=new Array("a","b","c");
var str;
for (var i = 0; i < testarray.length; i++) {
  str+=testarray[i]+"%";
}
alert(str); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T08:48:20.860

使用 testarray 正在使用`testarray.toString()`before alert 转换为字符串。toString 使用“，”作为分隔符在内部连接这些项目。`Array.join`您可以使用并传递自己的分隔符将其转换为字符串。

`alert(testarray.join("%"));`

# c++ - 返回向量是否安全 >?

> ID：12835627
> 
> 赞同：1
> 
> 时间：2012-10-11T08:46:22.357
> 
> 标签：c++, vector, auto-ptr

> **可能重复：**
> [为什么将 std::auto_ptr<> 与标准容器一起使用是错误的？](https://stackoverflow.com/questions/111478/why-is-it-wrong-to-use-stdauto-ptr-with-standard-containers)

我有一个函数可以在指针中返回一些对象，所以我使用：

```
vector <auto_ptr <Object> > func() { ... } 
```

我想知道它是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:57:47.317

stl 喜欢在其算法中复制元素并使用临时副本（它们必须是“可复制构造的”和“可分配的”）。虽然这不适用于`auto_ptr`. 将一个分配`auto_ptr`给另一个会转移指针的所有权。

`auto_ptr<foo> A = B;`B 变为`NULL`， A 是指针的新所有者， B 不可用。当临时对象获得所有权时，它不会返回它，而是你有一个或多个悬空指针的向量`NULL`。

您可以使用 c++11 智能指针，或提升智能指针或自己实现一个。

# vba - 使用 VBA 自动创建 Excel 文档

> ID：12835631
> 
> 赞同：0
> 
> 时间：2012-10-11T08:46:34.170
> 
> 标签：vba, excel, automation

我们公司的总经理希望我生成一个自动每月文档，保存到我们系统上的某个位置，这样他就不必手动输入所有数据。我已经进行了设置，以便文档可以以正确的格式保存到正确的位置，但我对 VBA 的了解并不多。

从一个时间点的 1 个问题来解决这个问题我想我的问题是是否可以创建 1 个非常长的宏，它将在多个工作簿上完成许多不同的任务。例如，我们有一份来自我们的 ERP (Baan) 的报告，并将所有数据推送到一个单元格中。是否可以创建一个宏来完成将文本格式化为列，然后根据行引用从单元格中复制数据，然后获取所述数据并将其粘贴到不同的工作簿中？那么它是否能够通过仅运行一个宏来保存工作簿，如果可以，一旦执行宏，所有这些需要多长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:50:00.410

是的，我相信这应该是可行的，请记住文件名+位置保持不变（否则您必须每个月进行编辑）。创建不同的子/函数并在一个主宏中调用它们。

最简单的方法可能是一步一步来。记录宏，看看它是否已经帮助你，如果没有，请使用 google 和 stackoverflow 寻求帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:52:58.853

这是完全可能的——但在我看来，VBA 不太适合这项任务。编辑器充其量是atrocius，很容易产生高度具体的“意大利面条代码”。文件操作是可能的，但不是很好。错误处理是 80 年代风格，有很多 goto。因此，如果您想构建可维护的东西，请使用 Interop 或 epplus（用于读取/写入 excel 文档的 .net 包）或用于 office 的 .net 插件构建外部应用程序。

# java - JLabel 重叠

> ID：12835633
> 
> 赞同：1
> 
> 时间：2012-10-11T08:46:46.100
> 
> 标签：java, swing, layout, jlabel, overlap

我创建了一个覆盖它的标签`paintComponent`（用弧线以不同的格式绘制它）并将它们定位在面板上。一切正常，但是位于同一位置（by `.setlocation`）的标签正在产生问题。

假设我在同一位置有 3 个不同形状的标签。首先创建ABC A，然后创建B，最后创建c。当我单击 A 时，我的函数会绘制 A 并显示“您已单击 A”

但是当我点击 B 或 C 时，它就像我点击了 A。

（我在滚动窗格中堆叠的面板中添加标签）

这是我制作标签的代码

```
for(int i=0;i<rowcount;i++){
        arcstart = Rawazimuth(azimuth[i]);
                    //custom JLabel to paint it like an arc
        MyLabel FLabel = new MyLabel(100, 50, (int)arcstart,cellid[i],lon[i],lat[i]);
        FLabel.setOpaque(true);
        Dimension LabelSize = new Dimension( 100,50);
        FLabel.setSize(LabelSize);
                    //locate the JLabel to labels location. it might be same or not
        FLabel.setLocation(lon[i], lat[i]);

        MyPanel.add(FLabel);    
} 
```

这是我的自定义 jlabel 类

```
public MyLabel(int W, int H, int start,int outcellid,int lonn, int latt) {
    addMouseListener(this);
    arcsizeW = W;
    arcsizeH = H;
    arcstart = start;
    cellid = outcellid;
    clicked = false;
    lon = lonn;
    lat = latt;
}

@Override
public void paintComponent(Graphics g){
    // true if button is clicked, so paint acordingly
    if(clicked ==true){
       g.setColor(dummyg.getColor());  
   }else{
       g.setColor(Color.blue);
   }
  // draw the arc
   g.fillArc(0, 0,arcsizeW , arcsizeH, arcstart, 60);
}

 //if cell is clicked, change its color to red and print its cellid
@Override
public void mouseClicked(MouseEvent e) {

    System.out.println(cellid);

     dummyg = this.getGraphics();
     dummyg.setColor(Color.red);
    this.paintComponent(dummyg);
    clicked = true;
}// other listener stuff} 
```

那么我该如何预防呢？我想我可以使用 jlayerpane，但我至少需要 4 层（不知道是否可以）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T09:00:37.063

确保您正在调用`super.paintComponent`. 这对于确保组件正在绘制校正非常重要。

鼠标事件就像下雨。他们将击中第一个注册以接收鼠标事件的组件并停止（就像雨打伞一样）。

如果您有重叠的组件，在它们重叠的地方，鼠标事件会转到第一个注册来处理它们的组件（在本例中为 A）。

这是一个简单的例子来说明我的意思......

![在此处输入图像描述](../Images/5e7b70c2b2c9e4d96316109d501d5068.png) ![在此处输入图像描述](../Images/fac890cfa9ac70abd7689c208caefff2.png)

当您将鼠标悬停在每个圆圈上时，它会突出显示，尝试将鼠标悬停在中间...

```
public class OverlappingMouseTest {

    public static void main(String[] args) {
        new OverlappingMouseTest();
    }

    public OverlappingMouseTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BackgroundPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }            
        });
    }

    protected class BackgroundPane extends JLayeredPane {

        private CirclePane redPane;
        private CirclePane greenPane;
        private CirclePane bluePane;

        public BackgroundPane() {            
            redPane = new CirclePane(Color.RED);
            greenPane = new CirclePane(Color.GREEN);
            bluePane = new CirclePane(Color.BLUE);

            add(redPane);
            add(greenPane);
            add(bluePane);            
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        public void doLayout() {            
            Dimension size = new Dimension(100, 100);
            int width = getWidth() - 1;
            int height = getHeight() - 1;

            Point p = new Point();
            p.x = (width / 2) - 50;
            p.y = (height / 2) - 75;            
            redPane.setBounds(new Rectangle(p, size));

            p.x = (width / 2) - 75;
            p.y = (height / 2) - 25;
            bluePane.setBounds(new Rectangle(p, size));

            p.x = (width / 2) - 25;
            p.y = (height / 2) - 25;
            greenPane.setBounds(new Rectangle(p, size));            
        }        
    }

    protected class CirclePane extends JPanel {

        private boolean mouseHover = false;

        public CirclePane(Color background) {
            setOpaque(false);
            setBackground(background);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseExited(MouseEvent me) {
                    mouseHover = false;
                    repaint();
                }

                @Override
                public void mouseEntered(MouseEvent me) {
                    mouseHover = true;
                    repaint();
                }                
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        protected void paintComponent(Graphics grphcs) {            
            super.paintComponent(grphcs);

            Graphics2D g2d = (Graphics2D) grphcs.create();
            if (!mouseHover) {
                g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));
            }
            g2d.setColor(getBackground());
            g2d.fill(new Ellipse2D.Float(0, 0, getWidth() - 1, getHeight() - 1));
            g2d.dispose();            
        }        
    }    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T08:57:21.050

> 一切正常，但是位于同一位置（通过 .setlocation ）的 JLabel 正在产生问题。
> 
> 假设我在同一位置有 3 个不同形状的 Jlabel。首先创建ABC A，然后创建B，最后创建c。

有树的方式，可以使用

*   [JLayer (Java7)，基于 JXLayer (Java6)](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

*   [叠加布局](http://www.java2s.com/Tutorial/Java/0240__Swing/1401__OverlayLayout.htm)

*   [JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T09:58:01.660

我已经解决了我的问题。

我发现的真正问题是，Java 正在解释每个组件的 x、y 位置以及宽度和高度。因此，即使您的标签不重叠（以图形方式），它们也可以被解释为相同的组件。

为了解决我的问题，我找到了鼠标点击点和组件中心之间的角度；然后计算最近的组件并到达它。

图层等在这种情况下不起作用，唯一的其他方法可能是覆盖实际形状的 contains 方法。

# c# - 如何将滚动条添加到 GroupBox

> ID：12835636
> 
> 赞同：1
> 
> 时间：2012-10-11T08:46:53.453
> 
> 标签：c#, scrollbar, groupbox

有什么方法可以将滚动条添加到组框？我的代码场景是：我在一个表单上有很多组框。所有的组合框都将出现在同一个位置，并且高度和宽度也是固定的。我正在根据条件设置可见的组框真/假。

一些组框超出了宽度和高度，所以我想把它全部放在滚动条中。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:02:48.547

如果它是 Windows 应用程序，那么您需要将面板添加到组框并设置属性“AutoScroll”=true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:00:56.473

在您的表单上放置一个组框，然后添加此代码

```
int btnPos = 1;
Panel pnl = new Panel();
pnl.AutoScroll = true;
pnl.Top = 15;
pnl.Left = 2;
pnl.Width = groupBox1.Width - 8;
for (int i = 0; i < 22; i++)
{
    Button _btn = new Button();
    _btn.Text = "lbl";
    _btn.Top = btnPos;
    btnPos += 23;
    pnl.Controls.Add(_btn);
}
groupBox1.Controls.Add(pnl); 
```

# android - 当你在开发一个Android应用程序时，如果你想从Web服务器异步下载数据，你如何解决？

> ID：12835638
> 
> 赞同：1
> 
> 时间：2012-10-11T08:47:01.983
> 
> 标签：android, web-services, asynchronous

现在我正在开发一个Android应用程序，我想使用WebService从Web服务器异步下载数据，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:48:39.310

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:49:56.877

有几种方法可以做到这一点。最流行的方法之一是使用`AsyncTask`Android API 提供的类。

你可以阅读更多关于`AsyncTask` [这里](http://developer.android.com/reference/android/os/AsyncTask.html)

官方开发者指南中还有一整页专门介绍线程和进程，可在[此处](http://developer.android.com/guide/components/processes-and-threads.html)获得。

# javascript - 从菜单项中隐藏/删除菜单

> ID：12835640
> 
> 赞同：0
> 
> 时间：2012-10-11T08:47:12.003
> 
> 标签：javascript, html, drop-down-menu, hide

我有如下的 Joomla 菜单。

```
<li class="level1 parent">
<a href="/www.dd.com/index.php/donations" class="level1 parent">
<span>Donations</span>
</a>
</li>

<li class="level1 parent">
<a href="/www.dd.com/index.php/fund" class="level1 parent">
<span>Fund</span>
</a>
</li> 
```

我能做的是找到我拥有的列表菜单。

```
var texts = [], lis = document.getElementsByTagName("span");
var im=lis.length;
var textFound;
for(var i=0; im>i; i++) {
textFound = lis[i].firstChild.nodeValue
  texts.push(lis[i].firstChild.nodeValue);
} 
```

我想做的是`if menu is Donations, hide it`

我试过了`this.style.display='none';`，但它不起作用。

```
var texts = [], lis = document.getElementsByTagName("span");
var im=lis.length;
var textFound;
for(var i=0; im>i; i++) {
textFound = lis[i].firstChild.nodeValue
  texts.push(lis[i].firstChild.nodeValue);
  this.style.display='none';
} 
```

知道如何完成这项工作吗？

## 注意，我希望这只能在 JAVASCRIPT 中完成。没有查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:58:27.817

而不是`this`，它应该像`lis[i].style.display = 'none'`

您还需要比较您获得的文本。我没有看到任何比较条件来隐藏特定文本。

# android - GCM Activity 强制关闭

> ID：12835641
> 
> 赞同：0
> 
> 时间：2012-10-11T08:47:14.350
> 
> 标签：android, error-handling, google-cloud-messaging

我是 Google 云消息传递的初学者。我正在开发一个演示应用程序来检查 GCm 的功能。我已经创建了一个 GCM 项目，并且正在检查设备是否已注册。我正在使用以下代码，

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, "483910217912");
          Log.d(tag, "Registered");
        } else {
          Log.v(tag, "Already registered");
        }
    } 
```

我的清单文件是，

```
 <uses-sdk android:minSdkVersion="8" />
    <!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" /> 
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<permission android:name="my_app_package.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="my_app_package.permission.C2D_MESSAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
  <intent-filter>
    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
    <category android:name="my_app_package" />
  </intent-filter>
</receiver>
<service android:name=".GCMIntentService" />
        <activity
            android:name=".GCmExampleActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

我已将 gsm jar 文件包含到我的项目中。

它给出的 Logcat 错误是，

```
10-11 13:44:59.001: E/AndroidRuntime(339): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kochar.it.GCM/com.kochar.it.GCM.GCmExampleActivity}: java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf 
```

错误就行了，

```
GCMRegistrar.checkDevice(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:59:05.910

不要在模拟器中运行它。因为它需要谷歌帐户。

尝试以下之一，

1.  使用 Google api 创建模拟器 ![在此处输入图像描述](../Images/678dec2c471f02c6b5d6f0733cacbc9a.png)
2.  在真正的安卓手机上运行它
3.  在 Bluestack ( [http://bluestacks.com/](http://bluestacks.com/) )上运行它

它会解决你的问题。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:50:16.957

看来您使用的是错误的模拟器。默认模拟器使用没有任何 Google 软件包的常规 Android 模拟器，并且无法运行各种东西，如地图、c2dm 和各种类似的东西。您要做的是创建一个可以支持 Google API 的新模拟器。

# c# - 在wpf中将数据表绑定到数据网格的组合框

> ID：12835652
> 
> 赞同：0
> 
> 时间：2012-10-11T08:47:45.583
> 
> 标签：c#, wpf, combobox, wpfdatagrid

嗨，我必须创建一个 wpf 网格，其中包含组合框。我必须将网格绑定到数据表 dtGrid 并将组合框项目源绑定到数据表 dtcmb 。我在下面编写了用于在网格中嵌入组合框的模板。

现在我需要访问后面代码中的组合来指定项目源和 DisplayMemberPath, ,SelectedValuePath,SelectedValue,

即使我可以在后面的代码中访问数据网格，我也无法访问组合框。问题是什么？

```
<my:DataGridTemplateColumn x:Name="supplierName" Header="Supplier" Width="60" >
    <my:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox  x:Name="cmbSubSysSupplier_SRV"  IsTextSearchEnabled="True" 
            Height="23" ItemsSource="{Binding}"  Width="80" />
        </DataTemplate>
    </my:DataGridTemplateColumn.CellTemplate>
</my:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:52:50.157

对于这种特殊情况，您应该使用 DataGridComboBoxColumn。您可以通过其 x:Name 属性在代码中访问它。DataGridComboBoxColumn 对象将使您能够访问所需的所有属性。

# mysql - MySQL：如何在表中找到重复记录，并更新另一个表？

> ID：12835653
> 
> 赞同：2
> 
> 时间：2012-10-11T08:47:47.187
> 
> 标签：mysql

我有两个具有以下结构的表

**tbl_inv**

```
SKU   VID  UPC
AAA    2   0123
AA2    3   0123
AA3    4   0123
BBB    2   1234 
```

此表包括所有产品，带有 sku、vid 和 UPC 编号。

**tbl_images**

```
SKU   VID  IMAGE_HASHNAME
AAA    2   fcd20a60fd5c1b64cee40ac0c019a022 
```

此表包括带有图像的产品。我想在没有图像和 UPC 代码匹配的产品上进行更新和插入图像。

sku AAA、AA2 和 AA3 的产品匹配，因为 UPC 编号重复。

必须获得的最终结果是：

AA2 在 AAA 上为 IMAGE_HASHNAME 赋值 AA3 在 AAA 上为 IMAGE_HASHNAME 赋值

这个新记录必须插入 tbl_images

**更新后的 tbl_images**

```
SKU   VID  IMAGE_HASHNAME
AAA    2   fcd20a60fd5c1b64cee40ac0c019a022
AA2    3   fcd20a60fd5c1b64cee40ac0c019a022
AA3    4   fcd20a60fd5c1b64cee40ac0c019a022

SELECT i.UPC as upc
        FROM tbl_inv i 
        LEFT JOIN tbl_images img ON img.sku = i.sku AND img.vid = i.vid
        WHERE i.UPC != '' 
        AND img.image_hashname IS NOT NULL
        GROUP BY i.upc
        having count(i.upc) > 1 
```

通过此查询，我尝试在表中查找匹配的记录，但不显示记录。在这个查询之后，我想用 PHP 复制文件，并在表 tbl_images 中插入 VALUES。我哪里错了？

我为我的英语道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:57:00.343

找到匹配项

```
SELECT upc FROM tbl_inv
WHERE sku in ( SELECT sku FROM tbl_images) 
```

此查询将返回 0123，它是 SKU AAA 的 upc

-这里假设sku是唯一的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:17:47.097

试试这个

```
select t3.SKU,t3.VID,t4.IMAGE_HASHNAME 
from tbl_inv as t3 left join 
   (selectt1.SKU,t1.VID,t1.UPC,t2.IMAGE_HASHNAME 
          from tbl_inv as t1 right join tbl_images ON t1.SKU=t2.SKU)
             as t4 on t3.UPC=t4.UPC 
```

# c# - 通过设置入点和出点在 WPF 中动态缩放画布

> ID：12835665
> 
> 赞同：1
> 
> 时间：2012-10-11T08:48:39.647
> 
> 标签：c#, wpf

我正在使用画布元素在 WPF 中绘制程序。我想要实现的是一个带有可拖动端点的滚动条。Adobe 的 After Effects 视频编辑软件中就是这类滚动条的示例。

这种滚动条的基本功能是它能够滚动比它的容器更大的内容，但左右端点都可以拖动以动态改变内容的比例。

我在绘图程序中实现了一个类似的滚动条；用户应该能够拖动入点和出点（画布中的矩形），并且绘图画布应该通过缩放到所需范围来对此做出响应。我需要的信息：

*   总图的宽度（图点的数量）
*   容器的宽度（静态，600px）
*   入点和出点相对于滚动条画布总宽度的百分比

[链接到当前屏幕截图](http://i.imgur.com/56mjG.png)

有了这些信息，我创建了一个 MatrixTransform，使用 ScaleAt() 方法缩放容器内的绘图画布，使其与下面滚动条中的入点和出点匹配。为此，我使用了以下代码。resetTransform 每秒调用*FPS*次以跟上传入的数据，并且 XMAX 和 YMAX 在其他地方更新以反映这一点。

```
public void resetTransform(Boolean useSlider = false)
{
    //Add transformgroup to plot
    double yscale = plot.Height / view.YMAX; //YMAX is maximum plot value received
    double xscale = plot.Width / view.XMAX; //XMAX is total ammount of plotted points
    Matrix m = new Matrix(1, 0, 0, 1, 0, 0);
    if (useSlider)
    {
        double maxVal = zoomBar.ActualWidth - outPoint.Width;
        double outP = Canvas.GetLeft(outPoint); //points position relative to the scrollbar
        double inP = Canvas.GetLeft(inPoint);
        double center = (((outP + inP) / 2) / maxVal) * plot.ActualWidth;
        double delta = (outP-inP);
        double factor = (maxVal/delta) * xscale;
        double mappedinP = (inP / maxVal) * view.XMAX;

        double anchorOut = (outP / maxVal) * view.XMAX;
        double anchorIn = (inP / maxVal) * view.XMAX;

        m.ScaleAt(factor, -yscale,center,0); //scale around the center point, 
        m.Translate(0, plot.Height); //to compensate the flipped graph, move it back down
    }
    scale = new ScaleTransform(m.M11, m.M22, 0, 0); //save scale factors in a scaletransform for reference
    signals.scaleSignalStrokes(scale); //Scale the plotlines to compensate for canvas scaling
    MatrixTransform matrixTrans = new MatrixTransform(m); //Create matrixtransform
    plot.RenderTransform = matrixTrans; //Apply to canvas
} 
```

期望：一切都应该正常工作，并且当绘图点的数量随着时间的推移而增长时，绘制的图形会很好地缩放。现实：移动点时图形会缩放，但不具有代表性；此外，添加的情节点越多，整个画布向右移动的越多，我似乎对转换的控制就越少。现在的算法可能是错误的方法来获得我需要的结果，但我花了很多时间思考如何正确地做到这一点。

**更新**

我已经上传了一个视频，以便更清楚地了解互动。在视频中，您可以清楚地看到画布向右移动。 [截屏视频](http://dl.dropbox.com/u/7668847/screencap.avi)

我应该如何缩放画布（绘图）以适应两个边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:00:37.470

所以，经过一番挣扎，我找到了解决这个问题的正确算法。我将在下面发布resetTransform函数的调整版本：

```
 //Reset graph transform
    public void resetTransform(Boolean useSlider = false)
    {
        double yscale = plot.Height / view.YMAX; //YMAX is maximum plot value received
        double xscale = plot.Width / view.XMAX; //XMAX is total ammount of plotted points
        Matrix m = new Matrix(1, 0, 0, 1, 0, 0);
        if (useSlider)
        {
            double maxVal = zoomBar.ActualWidth - outPoint.Width;
            double outP = Canvas.GetLeft(outPoint); //points position relative to the scrollbar
            double inP = Canvas.GetLeft(inPoint);
            double delta = (outP-inP);
            double factor = (maxVal/delta) * xscale;

            anchorOut = (outP / maxVal) * view.XMAX; //Define anchorpoint coordinates
            anchorIn = (inP / maxVal) * view.XMAX;
            double center = (anchorOut +anchorIn)/2; //Define centerpoint

            m.Translate(-anchorIn, 0); //Move graph to inpoint
            m.ScaleAt(factor, -yscale,0,0); //scale around the inpoint, with a factor so that outpoint is plot.Height(=600px) further away
            m.Translate(0, plot.Height); //to compensate the flipped graph, move it back down
        }
            scale = new ScaleTransform(m.M11, m.M22, 0, 0); //save scale factors in a scaletransform for reference
            signals.scaleSignalStrokes(scale); //Scale the plotlines to compensate for canvas scaling
            MatrixTransform matrixTrans = new MatrixTransform(m); //Create matrixtransform
            plot.RenderTransform = matrixTrans; //Apply to canvas
    } 
```

因此，与其围绕中心点缩放，我应该首先平移图像，然后用一个因子围绕画布的原点缩放。这意味着画布的另一侧正好是 plot.Height 像素（增加了一些缩放）

现在一切似乎都很好，但是因为我使用的是自定义控件（画布中的可拖动矩形），我注意到这些矩形并不总是触发 mousse 事件。

由于它超出了这个问题的范围，我已经在[这篇文章中进一步描述了这个问题](https://stackoverflow.com/questions/12841909/overriding-dragmove-for-dragging-custom-controls)

# nhibernate - 流利的nhibernate hasmany关系无法插入

> ID：12835673
> 
> 赞同：2
> 
> 时间：2012-10-11T08:49:00.397
> 
> 标签：nhibernate

我有以下表格：

*   LANDLORD = Id（主键）、FirstName、Surname、EmailAddress、Title；
*   PROPERTY = Id（主键）、Type、NumberOfBedrooms、Address1、Address2、City、County、PostCode、LandlordId（Landlord 实体的外键）；

My Domain 类是：

```
public class Landlord:BaseEntity
{
    public virtual string Title { get; set; }
    public virtual string Surname { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string EmailAddress { get; set; }
    public virtual IList<Property> Properties { get; set; }

    public Landlord()
    {
        Properties = new List<Property>();
    }
}

public class Property:BaseEntity
{
    public virtual string Type { get; set; }
    public virtual int NumberOfBedrooms { get; set;}
    public virtual string Address1 { get; set; }
    public virtual string Address2 { get; set; }
    public virtual string City { get; set; }
    public virtual string County { get; set; }
    public virtual string PostCode { get; set; }
    public virtual Landlord Landlord { get; set; }

} 
```

我流利的 ​​NHibernate 地图是：

```
public sealed class LandlordMap:ClassMap<Landlord>
{
    public LandlordMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Map(x => x.Title);
        Map(x => x.Surname);
        Map(x => x.FirstName);
        Map(x => x.EmailAddress);
        HasMany(x => x.Properties)
            .KeyColumns.Add("LandlordId")
            .Inverse()
            .Cascade.All();
        Table("LANDLORD");
    }
}

public sealed class PropertyMap:ClassMap<Property>
{
    public PropertyMap()
    {
        Id(x => x.Id).GeneratedBy.Identity(); 
        Map(x => x.Type);
        Map(x => x.NumberOfBedrooms);
        Map(x => x.Address1);
        Map(x => x.Address2);
        Map(x => x.City);
        Map(x => x.County);
        Map(x => x.PostCode);
        References(x => x.Landlord, "LandlordId");
        Table("PROPERTY");
    }
} 
```

为了测试一个房东是否保存到数据库中，我有以下代码：

```
public class Program
{
    static void Main(string[] args)
    {
        ILandlordRepository rep = new LandlordRepository();

        //Create property object
        Property p1 = new Property
        {
            Address1 = "123 LA Road",
            Address2 = "Bilston",
            City = "Harlem",
            County = "West Mids",
            NumberOfBedrooms = 2,
            PostCode = "wv134wd",
            Type = "Bungalow"
        };

        //Create landlord and assign property
        var landlord = new Landlord();
        landlord.Title = "Dr";
        landlord.FirstName = "Rohit";
        landlord.Surname = "Kumar";
        landlord.EmailAddress = "rkhkp@p.com";
        landlord.Properties.Add(p1);

        //Add to the database
        rep.SaveOrUpdate(landlord);

        Console.ReadKey();

    }
} 
```

当我调用 SaveOrUpdate 时，我收到此错误：

> 无法插入：[Homes4U.Service.DomainClasses.Property][SQL: INSERT INTO PROPERTY (Type, NumberOfBedrooms, Address1, Address2, City, County, PostCode, LandlordId) VALUES (?, ?, ?, ?, ?, ?, ?, ?); 选择 SCOPE_IDENTITY()]

现在有人为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:08:02.920

在您的映射中，您已指定 Property 对象负责保存其对 Landlord 的引用。

```
HasMany(x => x.Properties)
            .KeyColumns.Add("LandlordId")
             // Inverse means that the other side of the 
             // relationship is responsible for creating the reference
            .Inverse()
            .Cascade.All(); 
```

当您尝试保存对象时，Properties 集合中的 Property 对象没有引用它所属的房东。在后台，它会尝试在 LandlordId 列中插入 NULL。

这就是为什么你得到你的错误。

**编辑**

要解决，先救房东，不提及任何财产。

```
 ILandlordRepository rep = new LandlordRepository();
    IPropertyRepository pro = new PropertyRepository();

    //Create landlord
    var landlord = new Landlord();
    landlord.Title = "Dr";
    landlord.FirstName = "Rohit";
    landlord.Surname = "Kumar";
    landlord.EmailAddress = "rkhkp@p.com";

    rep.SaveOrUpdate(landlord);

    // Now add the landlord reference to the property and
    // save
    /Create property object
    Property p1 = new Property
    {
        Address1 = "123 LA Road",
        Address2 = "Bilston",
        City = "Harlem",
        County = "West Mids",
        NumberOfBedrooms = 2,
        PostCode = "wv134wd",
        Type = "Bungalow",
        Landlord = landlord
    };

    pro.SaveOrUpdate(p1); 
```

保存后您可能需要重新加载房东。

**编辑 2**

看到这个关于逆的问题。

[NHibernate 中的逆属性](https://stackoverflow.com/questions/713637/inverse-attribute-in-nhibernate)

# python - Python中的字母序列

> ID：12835674
> 
> 赞同：24
> 
> 时间：2012-10-11T08:49:00.290
> 
> 标签：python, r, letters

Python中是否有内置方法/模块来生成字母，例如内置常量LETTERS或R中的字母常量？

R 内置常量的作用就像`letters[n]`生成`n = 1:26`字母表的小写字母一样。

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-11T08:50:35.123

它被称为[`string.ascii_lowercase`](http://docs.python.org/library/string.html#string.ascii_lowercase)。

如果你想选择*n 个*随机的小写字母，那么：

```
from string import ascii_lowercase
from random import choice

letters = [choice(ascii_lowercase) for _ in range(5)] 
```

如果你想要它作为一个字符串，而不是一个列表，那么使用`str.join`：

```
letters = ''.join([choice(ascii_lowercase) for _ in range(5)]) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-11T08:55:09.367

您可以`map`按以下方式使用：

```
>>> map(chr, range(65, 91))
['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
>>> map(chr, range(97, 123))
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
>>> a = map(chr, range(65, 70))
>>> a
['A', 'B', 'C', 'D', 'E'] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-07T12:55:15.953

通过上面的列表推导和参考，还有另一种方法：

```
>>> [chr(x) for x in range(97, 123)]
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-05T23:07:29.703

另一种方法可以直接给你一个字符串：

```
>>> bytearray(range(97,123)).decode("utf-8")
u'abcdefghijklmnopqrstuvwxyz' 
```

（它适用于python2和python3，当然如果它是python 3，u前缀将不可见）

如果这是您喜欢的，您显然可以将该字符串转换为其他答案中的列表，例如：

```
>>> [x for x in bytearray(range(97,123)).decode("utf-8")]
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] 
```

将其更改为选择 n 个随机字母也很容易（允许重复）：

```
>>> import random
>>> n = 10
>>> bytearray(random.randint(97, 122) for x in range(n)).decode('utf-8')
'qdtdlrqidx' 
```

或不重复：

```
>>> import random
>>> n = 10
>>> bytearray(random.sample(range(97, 123),n)).decode('utf-8')
'yjaifemwbr' 
```

# java - 如何在java中获取被调用方法的名称

> ID：12835677
> 
> 赞同：2
> 
> 时间：2012-10-11T08:49:05.847
> 
> 标签：java, logging, reflection

假设我有这样的方法

```
Calculator calc;
public void testMethod(){
-----
----
Calc.add(1,2);
-----
-------
} 
```

现在我想在函数末尾打印 Calculator.add，即我想在函数末尾打印 classname.printname。打印应该足够通用，我也可以将其用于其他方法。如何实现这个目标。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:51:41.273

```
private static final int CLIENT_CODE_STACK_INDEX;

static {
    // Finds out the index of "this code" in the returned stack trace - funny but it differs in JDK 1.5 and 1.6
    int i = 0;
    for (StackTraceElement ste : Thread.currentThread().getStackTrace()) {
        i++;
        if (ste.getClassName().equals(Resource.class.getName())) {
            break;
        }
    }
    CLIENT_CODE_STACK_INDEX = i;
}

public static String getCurrentMethodName() {
    return Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX].getMethodName();
}
public static String getCallerMethodName() {
    return Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX+1].getMethodName();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:52:53.937

作为最简单的方法，请记住您始终可以调用`this.getClass().getName()`：

```
class SimpleCalculator {

    public int add(int a, int b) {
        System.out.println(this.getClass().getName() +
                " - adding " + a + " and " + b);
        return a + b;
    }
} 
```

* * *

另一种常见的方法是使用[Log4J 之](http://www.tutorialspoint.com/log4j/index.htm)类的日志库。

*   [Log4J API](http://logging.apache.org/log4j/1.2/apidocs/)

您将使用的类是[Logger](http://logging.apache.org/log4j/1.2/apidocs/)

您将*Log4J*配置为写入某个文件。

每个类都声明了一个将消息打印到文件的*Logger 对象。*

每条消息都以生成消息的类的名称开头。

```
class SimpleCalculator {

    Logger calcLogger = Logger.getLogger(SimpleCalculator.class);

    public int add(int a, int b) {
        calcLogger.debug("add - adding " + a + " and " + b);
        return a + b;
    }
} 
```

...或者您可以使用@urir 建议的方法。

...或者您可能会发疯并使用[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:59:54.833

user Calculator.getClass().getName());用于查找类名和Calculator.getMethod();

或者使用 System.out.println("我被调用了 " + e.getStackTrace()[1].getClassName() + "." + e.getStackTrace()[1].getMethodName() + "()!" );

# android - ICS 上的 Android QuickContactBadge 箭头

> ID：12835684
> 
> 赞同：1
> 
> 时间：2012-10-11T08:49:26.497
> 
> 标签：android, android-4.0-ice-cream-sandwich, quickcontactbadge

我正在开发一个 Android 应用程序，其中包含一个列表视图，每个项目都有一张图片。

我`QuickContact`在每张照片上都设置了一个徽章。

在 android < ICS (android 4) 上图片正确显示，例如：

[在 android<4 上可以快速联系徽章](http://d.pr/i/X2Va)

但是Android ICS 4 或更高，右下角出现一个箭头：

[ics 上的 quickcontact 徽章箭头](http://d.pr/i/qg9V)

是否可以在快速联系徽章上隐藏此右下箭头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-04T20:21:52.830

此箭头称为叠加层，对于 Lollipop 和上方，以下是隐藏它的最简单方法：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    contactBadge.setOverlay(null);
} 
```

为了支持棒棒糖之前的版本，我扩展了 QuickContactBadge：

```
/**
 * Extend the QuickContactBadge to hide the overlay.
 */
public class MyQuickContactBadge extends QuickContactBadge {

    private static final String OVERLAY_FIELD_NAME = "mOverlay";

    public MyQuickContactBadge(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public MyQuickContactBadge(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyQuickContactBadge(Context context) {
        super(context);
        init();
    }

    private void init() {

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            super.setOverlay(null);
            return;
        }

        try {
            // Pre-lollipop we use reflection to null the overlay drawable
            Field overlayField = QuickContactBadge.class.getDeclaredField(OVERLAY_FIELD_NAME);

            // setAccessible(true) prevents IllegalAccessException
            overlayField.setAccessible(true);
            overlayField.set(this, null);

        } catch (NoSuchFieldException | IllegalAccessException e) {
            // TODO: log exception
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T01:28:01.220

有可能的。不要导入机器人 QuickContactBadge，而是使用此代码并将其作为 QuickContactBadge 导入。

```
/*
 * Copyright (C) 2009 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import android.content.AsyncQueryHandler;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.content.res.TypedArray;
import android.database.Cursor;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.provider.ContactsContract.Contacts;
import android.provider.ContactsContract.Intents;
import android.provider.ContactsContract.PhoneLookup;
import android.provider.ContactsContract.QuickContact;
import android.provider.ContactsContract.RawContacts;
import android.util.AttributeSet;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

/**
 * Widget used to show an image with the standard QuickContact badge
 * and on-click behavior.
 */
public class OverlayLessQuickContactBadge extends ImageView implements OnClickListener {
    private Uri mContactUri;
    private String mContactEmail;
    private String mContactPhone;
    private Drawable mOverlay;
    private QueryHandler mQueryHandler;
    private Drawable mDefaultAvatar;
    private Context mContext = getContext();

    protected String[] mExcludeMimes = null;

    static final private int TOKEN_EMAIL_LOOKUP = 0;
    static final private int TOKEN_PHONE_LOOKUP = 1;
    static final private int TOKEN_EMAIL_LOOKUP_AND_TRIGGER = 2;
    static final private int TOKEN_PHONE_LOOKUP_AND_TRIGGER = 3;

    static final String[] EMAIL_LOOKUP_PROJECTION = new String[] {
        RawContacts.CONTACT_ID,
        Contacts.LOOKUP_KEY,
    };
    static final int EMAIL_ID_COLUMN_INDEX = 0;
    static final int EMAIL_LOOKUP_STRING_COLUMN_INDEX = 1;

    static final String[] PHONE_LOOKUP_PROJECTION = new String[] {
        PhoneLookup._ID,
        PhoneLookup.LOOKUP_KEY,
    };
    static final int PHONE_ID_COLUMN_INDEX = 0;
    static final int PHONE_LOOKUP_STRING_COLUMN_INDEX = 1;

    public OverlayLessQuickContactBadge(Context context) {
        this(context, null);
    }

    public OverlayLessQuickContactBadge(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public OverlayLessQuickContactBadge(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        TypedArray styledAttributes = mContext.obtainStyledAttributes(R.styleable.Theme);

        mQueryHandler = new QueryHandler(mContext.getContentResolver());
        setOnClickListener(this);
    }

    /** This call has no effect anymore, as there is only one QuickContact mode */
    @SuppressWarnings("unused")
    public void setMode(int size) {
    }

    /** True if a contact, an email address or a phone number has been assigned */
    private boolean isAssigned() {
        return mContactUri != null || mContactEmail != null || mContactPhone != null;
    }

    /**
     * Resets the contact photo to the default state.
     */
    public void setImageToDefault() {
        if (mDefaultAvatar == null) {
            mDefaultAvatar = getResources().getDrawable(R.drawable.ic_contact_picture);
        }
        setImageDrawable(mDefaultAvatar);
    }

    /**
     * Assign the contact uri that this QuickContactBadge should be associated
     * with. Note that this is only used for displaying the QuickContact window and
     * won't bind the contact's photo for you. Call {@link #setImageDrawable(Drawable)} to set the
     * photo.
     *
     * @param contactUri Either a {@link Contacts#CONTENT_URI} or
     *            {@link Contacts#CONTENT_LOOKUP_URI} style URI.
     */
    public void assignContactUri(Uri contactUri) {
        mContactUri = contactUri;
        mContactEmail = null;
        mContactPhone = null;
        onContactUriChanged();
    }

    /**
     * Assign a contact based on an email address. This should only be used when
     * the contact's URI is not available, as an extra query will have to be
     * performed to lookup the URI based on the email.
     *
     * @param emailAddress The email address of the contact.
     * @param lazyLookup If this is true, the lookup query will not be performed
     * until this view is clicked.
     */
    public void assignContactFromEmail(String emailAddress, boolean lazyLookup) {
        mContactEmail = emailAddress;
        if (!lazyLookup) {
            mQueryHandler.startQuery(TOKEN_EMAIL_LOOKUP, null,
                    Uri.withAppendedPath(Email.CONTENT_LOOKUP_URI, Uri.encode(mContactEmail)),
                    EMAIL_LOOKUP_PROJECTION, null, null, null);
        } else {
            mContactUri = null;
            onContactUriChanged();
        }
    }

    /**
     * Assign a contact based on a phone number. This should only be used when
     * the contact's URI is not available, as an extra query will have to be
     * performed to lookup the URI based on the phone number.
     *
     * @param phoneNumber The phone number of the contact.
     * @param lazyLookup If this is true, the lookup query will not be performed
     * until this view is clicked.
     */
    public void assignContactFromPhone(String phoneNumber, boolean lazyLookup) {
        mContactPhone = phoneNumber;
        if (!lazyLookup) {
            mQueryHandler.startQuery(TOKEN_PHONE_LOOKUP, null,
                    Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, mContactPhone),
                    PHONE_LOOKUP_PROJECTION, null, null, null);
        } else {
            mContactUri = null;
            onContactUriChanged();
        }
    }

    private void onContactUriChanged() {
        setEnabled(isAssigned());
    }

    @Override
    public void onClick(View v) {
        if (mContactUri != null) {
            QuickContact.showQuickContact(getContext(), OverlayLessQuickContactBadge.this, mContactUri,
                    QuickContact.MODE_LARGE, mExcludeMimes);
        } else if (mContactEmail != null) {
            mQueryHandler.startQuery(TOKEN_EMAIL_LOOKUP_AND_TRIGGER, mContactEmail,
                    Uri.withAppendedPath(Email.CONTENT_LOOKUP_URI, Uri.encode(mContactEmail)),
                    EMAIL_LOOKUP_PROJECTION, null, null, null);
        } else if (mContactPhone != null) {
            mQueryHandler.startQuery(TOKEN_PHONE_LOOKUP_AND_TRIGGER, mContactPhone,
                    Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, mContactPhone),
                    PHONE_LOOKUP_PROJECTION, null, null, null);
        } else {
            // If a contact hasn't been assigned, don't react to click.
            return;
        }
    }

    /**
     * Set a list of specific MIME-types to exclude and not display. For
     * example, this can be used to hide the {@link Contacts#CONTENT_ITEM_TYPE}
     * profile icon.
     */
    public void setExcludeMimes(String[] excludeMimes) {
        mExcludeMimes = excludeMimes;
    }

    private class QueryHandler extends AsyncQueryHandler {

        public QueryHandler(ContentResolver cr) {
            super(cr);
        }

        @Override
        protected void onQueryComplete(int token, Object cookie, Cursor cursor) {
            Uri lookupUri = null;
            Uri createUri = null;
            boolean trigger = false;

            try {
                switch(token) {
                    case TOKEN_PHONE_LOOKUP_AND_TRIGGER:
                        trigger = true;
                        createUri = Uri.fromParts("tel", (String)cookie, null);

                        //$FALL-THROUGH$
                    case TOKEN_PHONE_LOOKUP: {
                        if (cursor != null && cursor.moveToFirst()) {
                            long contactId = cursor.getLong(PHONE_ID_COLUMN_INDEX);
                            String lookupKey = cursor.getString(PHONE_LOOKUP_STRING_COLUMN_INDEX);
                            lookupUri = Contacts.getLookupUri(contactId, lookupKey);
                        }

                        break;
                    }
                    case TOKEN_EMAIL_LOOKUP_AND_TRIGGER:
                        trigger = true;
                        createUri = Uri.fromParts("mailto", (String)cookie, null);

                        //$FALL-THROUGH$
                    case TOKEN_EMAIL_LOOKUP: {
                        if (cursor != null && cursor.moveToFirst()) {
                            long contactId = cursor.getLong(EMAIL_ID_COLUMN_INDEX);
                            String lookupKey = cursor.getString(EMAIL_LOOKUP_STRING_COLUMN_INDEX);
                            lookupUri = Contacts.getLookupUri(contactId, lookupKey);
                        }
                        break;
                    }
                }
            } finally {
                if (cursor != null) {
                    cursor.close();
                }
            }

            mContactUri = lookupUri;
            onContactUriChanged();

            if (trigger && lookupUri != null) {
                // Found contact, so trigger QuickContact
                QuickContact.showQuickContact(getContext(), OverlayLessQuickContactBadge.this, lookupUri,
                        QuickContact.MODE_LARGE, mExcludeMimes);
            } else if (createUri != null) {
                // Prompt user to add this person to contacts
                final Intent intent = new Intent(Intents.SHOW_OR_CREATE_CONTACT, createUri);
                getContext().startActivity(intent);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:38:28.820

这不是错误的，这是设计使然。QuickContactBadge 的目的不仅仅是显示图片，还提供一个界面，根据系统已知的现有联系人调出联系联系人的方法。“箭头”用于向用户表明，通过点击图片，他们可以获得更多信息；它就像一页的弯角。

如果您真的只想使用联系人的图片，我相信您将需要使用 ContactsContract API 并自己收集数据。

[http://developer.android.com/reference/android/provider/ContactsContract.html](http://developer.android.com/reference/android/provider/ContactsContract.html)

# github - 如何在 jsFiddle 中从 GitHub 存储库创建嵌入式 Demo？

> ID：12835686
> 
> 赞同：4
> 
> 时间：2012-10-11T08:49:33.753
> 
> 标签：github, jsfiddle

根据[来自 GitHub Repository 的 jsFiddle 文档 Display Demo，](http://doc.jsfiddle.net/use/github_read.html)使用 jsFiddle 很容易包含托管在 Github 上的 HTML Demo。

jsFiddle 允许将 jsFiddle 嵌入到您自己的网页[中嵌入小提琴](http://doc.jsfiddle.net/use/embedding.html)。

现在我想要的是在 Github 上托管我的演示文件，并通过我自己的网页中的嵌入式 jsFiddle 使用它们（即两个 jFiddle 功能的组合）。

这可能使用 jsFiddle 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T11:20:41.900

我认为 jsFiddle 只是 jsfiddle 网页上的 js 代码，所以它不能嵌入到您的页面中。

# git - Git：在不同的机器上工作

> ID：12835687
> 
> 赞同：1
> 
> 时间：2012-10-11T08:49:36.813
> 
> 标签：git

我正在使用 git 一段时间。在大多数项目中，我是唯一的开发人员，但我在 3 台机器上工作（工作笔记本电脑、个人笔记本电脑、台式机）。我倾向于做很多提交，即使我正在处理的功能不完整。我经常写诸如“保存当前工作”之类的提交评论。

这主要是为了以后在不同的机器上工作。我认为这不是理想的解决方案。创建分支并将它们上传到服务器会更好吗？我发现分支似乎是本地的，但我需要它们在服务器上以便能够在不同的机器上检查它们。

还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:56:51.530

听起来你想要功能分支。您可以将“WIP”（正在进行的工作）提交保存在其中，以在您的机器之间共享代码更改，并在将其合并回`master`.

切换机器时，您只需从正在使用的机器中提取功能分支，然后继续工作。你甚至可以`rebase --interactive`在工作期间保持干净的历史记录，然后`reset`在切换机器时，只要你将所有这些东西保存在一个单独的分支中。

这种方式`master`保持干净状态，您可以在单独的分支中执行所有正在进行的可共享内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:55:53.777

我认为这没什么大不了的。

您刚刚在 2 个分支机构工作过：

1.  工作
2.  掌握

在工作分支中，您甚至可以提交任何未完成的内容。

但是，在那之后，您需要使用：

```
git checkout master
git reset --soft work 
# reset --soft is really helpful. 
```

然后再次正式提交您的工作。

# javascript - 如何本地存储展开/折叠 CSS 设置

> ID：12835698
> 
> 赞同：0
> 
> 时间：2012-10-11T08:50:05.613
> 
> 标签：javascript, css, html, local-storage, web-storage

我正在寻找使用本地存储来记住展开/折叠元素的 CSS 设置的方法

所以我的 JavaScript 看起来像这样（它获取 id 并处理展开/折叠）

```
function toggleHeight(id, link) {
    var e = document.getElementById(id);

    if(e.style.maxHeight == '450px') {
        e.style.maxHeight = '0px'; 
    } else {
        e.style.maxHeight = '450px';
    }
} 
```

所以我正在寻找的是在点击链接时获取 div id på 并在点击时存储更改，然后在刷新时记住的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:57:10.437

也许是这样的

```
var height = localStorage.getItem(id+"-height");

localStorage.setItem(id+"-height", height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:00:04.353

正如这里所承诺的，我的解决方案是：

```
<script type="text/javascript">
function toggleHeight(id, link) {
var e = document.getElementById(id);
var height = localStorage.getItem(id);

if(e.style.maxHeight == '450px' || e.style.maxHeight == 'inherit') {
    e.style.maxHeight = '0px'; 
    localStorage.setItem(id,"closed");
} else {
    e.style.maxHeight = '450px';
    localStorage.setItem(id, "open");
}
}

  function load() { 

var setting
var e
var link
for (x in localStorage){
    setting = localStorage.getItem(x);
    e = document.getElementById(x);
    link = document.getElementById('forumlink'+x);

    if (setting == 'open')
    {
        e.style.maxHeight = '450px';
    }
    else
    {
        e.style.maxHeight = '0px';
    }   
    }
    }

</script> 
```

这会在单击时存储 div 的状态并设置为打开/关闭

在页面加载时，它会抓取存储的值并在打开/关闭值之后设置 max-height css ..

希望其他人可以利用这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:26:48.290

这就是我解决它的方法：工作[小提琴](http://jsfiddle.net/Vandeplas/XZf72/)

```
//extra methods to get and set objects in staid of strings
Storage.prototype.setObject = function(key, value) {
    this.setItem(key, JSON.stringify(value));
}

Storage.prototype.getObject = function(key) {
    var value = this.getItem(key);
    return value && JSON.parse(value);
}
//fetch the object or make a new and set constant values    
var toggleState = localStorage.getObject('toggleState') || {},
    MIN_SIZE= '0px',
    MAX_SIZE= '450px';

//shown is an optional parameter
function toggleHeight(id, shown) {
    var e = document.getElementById(id);
    if(shown === true || (typeof shown === "undefined" && e.style.maxHeight == MIN_SIZE)) {
       show(id);
    } else {
       hide(id);
    }
}

function show(id){
    var e = document.getElementById(id);
    e.style.maxHeight = MAX_SIZE;
    toggleState[id] = true;
    localStorage.setObject('toggleState',toggleState);
}
function hide(id){
    var e = document.getElementById(id);
    e.style.maxHeight = MIN_SIZE;
    toggleState[id] = false;
    localStorage.setObject('toggleState',toggleState);
}
//loop over it to set initial values
for(var i in toggleState){
    toggleHeight(i, toggleState[i]);
}

//do manual toggle, hide, show

toggleHeight('someID');​ 
```

你看我把显示和隐藏分开了，所以你也可以单独显示隐藏它们，如果你愿意的话，或者你仍然可以使用切换方法。

# windows-phone-7 - StreamReader Windows Phone 无法读取重音字符

> ID：12835699
> 
> 赞同：2
> 
> 时间：2012-10-11T08:50:10.993
> 
> 标签：windows-phone-7, streamreader, non-ascii-characters

我正在尝试使用重音字符接收带有 json 的响应。

当我收到回复时，我会这样做：

```
using (Stream responseStream = response.GetResponseStream())
                {
                    using (StreamReader reader = new StreamReader(responseStream, Encoding.UTF8))
                    {
                        result = reader.ReadToEnd();
                    }
                } 
```

当我在 texblock 或消息框中输出结果时，我总是得到特殊字符替换。

任何想法？

# php - Prestashop 上传图片

> ID：12835706
> 
> 赞同：2
> 
> 时间：2012-10-11T08:50:25.653
> 
> 标签：php, image, image-uploading, prestashop

我的 PHP 项目安装了 Prestashop 1.4.9.0。当我添加一个新产品时，我上传了一张 PNG 格式的图片，但是当它显示在客户端时，图片是 JPG 格式的。

如何保留图像扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:32:07.430

后台 -> 首选项 -> 图像

![图片部分](../Images/504cbaf0dcac5fe8a19aed0ab96da81a.png)

# java - Java Webclient 发送 null 而不是一个类

> ID：12835712
> 
> 赞同：0
> 
> 时间：2012-10-11T08:50:39.463
> 
> 标签：java, webservice-client

你好我有一个网络服务：

```
@WebMethod(operationName = "getUser")
public Iuser getUser(@WebParam(name = "userid") final String userid) {
    return ejbIuserFacade.getUser(userid);
} 
```

WebService 客户端很好地收到了 Iuser 类。

然后我有另一种方法：

```
@WebMethod(operationName = "mergeUser")
public boolean mergeUser(@WebParam(name = "iuser") final Iuser iuser) {
    return ejbIuserFacade.mergeUser(iuser);
} 
```

以另一种方式（从客户端到服务器）完全相同，但 iuser 始终为空。我尝试使用方法 1 接收（一切正常）并使用方法 2 发送相同的内容，但 iuser 为空）

知道有什么问题吗？

谢谢奥拉夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:54:29.600

使 IUser 实现 java.io.Serializable

# web-applications - 如何从 Web 应用程序启动相当于手机的 USSD 会话？

> ID：12835714
> 
> 赞同：1
> 
> 时间：2012-10-11T08:50:54.147
> 
> 标签：web-applications, mobile, sms, ussd

有一个移动汇款服务，我正在尝试创建一个等效的网络应用程序，以便我可以从网络应用程序进行转账。它目前的工作方式如下：

*   用户通过手机拨打*125*000#
*   提示用户输入 4 位密码
*   身份验证后，用户会看到菜单选项，其中之一是“4\. 汇款”
*   用户选择 4 并提示输入收款人号码 - 用户输入收款人号码、总数并确认交易并转账金额。

因此，理想情况下，我希望人们开设一个在线帐户，他们可以将其链接到这个已经存在的服务。然后从网站上，他们可以执行与上述结果相同的交易。即通过输入他们的号码并验证交易向朋友汇款。那么，由于该服务是基于 USSD 的，因此这完全有可能在 Web 应用程序上复制吗？我该怎么做呢？如果我要找到 USSD 的替代方案，但仍与他们的 USSD 服务器或应用程序服务器一致地运行，但使用不同的技术，最理想的解决方法是什么？我需要哪些信息和访问权限才能从当前应用程序的主机更新和执行事务操作？像 Twilio 这样的领先 SMS API 是否对这样的应用程序有任何可能的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:05:03.337

不，您将无法做到这一点。

该应用程序中的身份验证可能是：

1.  MSISDN（电话号码）
2.  4 位密码。

你需要两者。因此，您基本上不仅需要一个电话号码，还需要在 GSM 网络上注册的号码才能通过 USSD 与其通话。

您最好的方法是访问拥有 USSD 应用程序的公司，看看他们是否可以提供您可以在您的 WEB 项目中使用的 API。不过，您需要非常小心安全性。在网站中使用电话号码注册用户的一个好方法是使用 SMS 确认码。您可以通过这种方式注册您的移动用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T18:46:29.493

目前大多数 USSD 应用程序都提供短代码。在移动货币盛行的东非地区。如果您的移动货币账户上有钱，您可以绕过提示，直接到您授权使用 PIN 进行交易的确切位置。

卢旺达的例子，（这应该适用于肯尼亚，乌干达），但不同的代码。卢旺达的短代码是 *182$ 从我的钱包购买通话时间： 我这样做：`*182*2*1*1*200#` 然后在下一步使用我的 PIN 进行身份验证 从我的钱包向另一个电话号码**078xxxxxxx**发送移动货币。

```
*182*1*1*078xxxxxxx*200# 
```

我认为您可以使用 HTML tel 标签或 Javascript 在您的网站上创建一个电话链接。这是一个使用[HTML](https://jsfiddle.net/wr92uc3s/1/)的示例。它正在为我工​​作。一个错误，似乎电话链接将“#”读取为电话号码的终止符。

# java - 标准 Java 中的 FtpOutputStream 或类似内容

> ID：12835716
> 
> 赞同：1
> 
> 时间：2012-10-11T08:51:12.567
> 
> 标签：java, ftp, outputstream

有没有可能使用某种 OutputStream 将文件写入 FTP 目录而不必先写入本地文件的方法？

我找到了一些可以实现这一点的第 3 方库，但我想知道是否有一些 java“标准”类可以实现这一点，我的意思是，一些被打包到标准 Java API 中的类。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T08:54:51.363

```
URL url = new URL("ftp://user:pass@ftp.something.com/file.txt;type=i");
URLConnection urlc = url.openConnection();
InputStream is = urlc.getInputStream(); // To download
OutputStream os = urlc.getOutputStream(); // To upload 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:15:42.770

*   如果你应该只写/读文件，最好使用*java.net.URL*类。
*   如果您似乎应该通过 FTP 操作文件/目录，则必须使用 3rd 方库。

最佳实践是构建抽象层以不依赖于 FTP 解决方案。

对我来说，Java FTP 的最佳工具是[http://www.sauronsoftware.it/projects/ftp4j/](http://www.sauronsoftware.it/projects/ftp4j/)

# c# - DateTimePicker 从 ListView c# 中获取值

> ID：12835721
> 
> 赞同：0
> 
> 时间：2012-10-11T08:51:22.627
> 
> 标签：c#, forms, ado.net, window, datetimepicker

我有一个 ListView，其中有一列带有 Date(20.02.2000)。如何获取此值并将 im 放入 DateTimePicker？

```
dateTimePAterizare.Value = DateTime.Parse(listView1.SelectedItems[0].SubItems[4].Text); 
```

它给出了这个错误：

> 字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:53:18.197

这是因为您的字符串形式的日期`DateTime`格式不正确。使用**[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)**，它允许您`date`通过提供要转换为的日期的模式来解析它。

```
DateTime time = DateTime.ParseExact(listView1.SelectedItems[0].SubItems[4].Text, "dd.MM.yyyy",  CultureInfo.InvariantCulture);
dateTimePAterizare.Value = time; 
```

# php - 将多个用户选择的附件添加到电子邮件

> ID：12835722
> 
> 赞同：1
> 
> 时间：2012-10-11T08:51:25.040
> 
> 标签：php, html

我正在为我的站点上的管理员实施基本的电子邮件功能。他们可以设置主题、内容等，然后将邮件发送给指定的收件人。我遇到的问题是附件。他们应该能够选择**网络服务器上已经存在的**多个文件（例如 public_html/fileuploads/myfile.pdf）。

如果它不能从网络服务器附加，那么我至少需要实现一种方法，他们可以从他们的 PC 附加多个文件。目前我正在使用 Swiftmailer，它接受这样的附件：

```
$message->attach(Swift_Attachment::fromPath('/path/to/file.pdf')); 
```

所以我需要用户能够选择多个文件。我可以通过以下方式完成：

```
<input type="file" name="attachment[]" multiple/> 
```

但是现在我不知道如何获取每个选定文件的完整路径，然后将每个文件添加为附件。它应该从 HTML 提交到我的 mailer.php 页面。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:12:04.513

您将在 php 中获得文件名和 tmp 文件源，如下所示

```
for($i=0;$i<count($_FILES["attachment"]["name"]);$i++)  
{  
  if($_FILES["attachment"]["name"][$i] != "")  
  {  
    //here you will get all files selected by user.
    echo $_FILES["attachment"]["tmp_name"][$i];
    echo $_FILES["attachment"]["name"][$i] 

    //here you can copy files to your server, then pass one to your swift mailer function.
    //to copy file to your server, you can use copy() or move_upload_file() function.
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:17:53.833

```
// first get a list of the attachments
$attachments_dir = 'public_html/fileuploads';
$attachments = glob("$attachments_dir/*.pdf");

// then put them into the form
foreach ($attachments as $attachment) {
  echo '<input type="checkbox" name="attachments[]" value="',$attachment], '">',$attachment,'<br />'; 
 }

// then when the form is submitted, use them
$selected_attachments = $_POST['attachments'];
foreach ($selected_attachments as $attachment) {
  $message->attach(Swift_Attachment::fromPath($attachment));
} 
```

请记住，虽然这表明您想要完成的过程不是很安全。例如，有人可以将附件更改为 /root/secretpasswords.txt，您可以附加一些意想不到的内容。

如果所有附件仅在一个目录中，您可以只使用文件名部分而不是提交表单中的路径/文件名，但这应该足以让您开始。

# visual-studio-2010 - 在 rdlc 报告中显示页码时出错

> ID：12835723
> 
> 赞同：0
> 
> 时间：2012-10-11T08:51:29.833
> 
> 标签：visual-studio-2010, ssrs-2008, reporting-services, rdlc

我在尝试使用表达式中的“Globals！PageNumber”显示页码时遇到错误。占位符正在接受表达式，但是当我运行报告时，我在页码字段中得到#error。还有其他方法吗？做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:27:19.923

针对这个问题，我找到了两种解决方法：

1) 在项目设置中将目标框架从 4.0 更改为 3.5

2) 在 system.web 部分的 web.config 中添加以下行：

`<trust legacyCasModel="true" level="Full"/>`

# java - 显示 jdialog 后 JTextArea 不更新

> ID：12835730
> 
> 赞同：0
> 
> 时间：2012-10-11T08:51:45.427
> 
> 标签：java, swing, modal-dialog, jtextarea, jdialog

我试图在显示 JDialog 后更新 jtextarea 但它没有更新任何人都可以帮助我。

```
public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setBounds(0, 0, 500, 500);
        frame.setVisible(true);
        JDialog dialog = new JDialog(frame);
        dialog.setModal(true);
        JPanel panel = new JPanel();
        dialog.add(panel);
        final JTextArea area = new JTextArea();
        panel.add(area);
        dialog.setBounds(100, 100, 200, 200);
        area.setLineWrap(true);
        area.setText("bbbbbbbbbbbb");
        dialog.setVisible(true);
        area.setText("zzzz");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T08:53:39.490

它是模态的。将 modal 设置为 false 或在对话框中的某处添加 area.setText() 调用。例如，通过在可见的对话框上添加侦听器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T08:55:35.290

调用`dialog.setVisible`被阻塞。这意味着`area.setText("zzzz")`在对话框关闭之前不会执行该语句。

这就是模态对话框的本质

**更新**

为了能够像这样更新 UI，你需要有点偷偷摸摸......

```
public class TestDialog {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setBounds(0, 0, 500, 500);
                frame.setVisible(true);

                JDialog dialog = new JDialog(frame);
                dialog.setModal(true);
                JPanel panel = new JPanel();
                dialog.add(panel);
                final JTextArea area = new JTextArea();
                panel.add(area);
                dialog.setBounds(100, 100, 200, 200);
                area.setLineWrap(true);
                area.setText("bbbbbbbbbbbb");

                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        SwingUtilities.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                System.out.println("Hello");
                                area.setText("zzzz");
                            }
                        });
                    }
                }).start();

                dialog.setVisible(true);
            }
        });
    }
} 
```

# objective-c - nsurlconnection 和浏览器访问的区别？

> ID：12835731
> 
> 赞同：0
> 
> 时间：2012-10-11T08:52:00.597
> 
> 标签：objective-c, nsurlconnection, nsurl, nsurlrequest

我正在开发一个非常简单的应用程序，它访问一个书面的 url。所以我想知道通过nsurlconnection访问和仅使用浏览器访问有什么区别。导致某些站点响应，但当我使用 nsurlconnection 时它们不发送数据。

```
- (void)getWikiData:(NSString *)keyword{
NSString* tmpURL = @"http://wikipedia.simpleapi.net/api?keyword=";
NSString* encodedString;
CFStringRef strRef = CFURLCreateStringByAddingPercentEscapes(NULL, (CFStringRef)keyword, NULL, (CFStringRef)@"!*'();:@&=+$,/?%#[]~", kCFStringEncodingUTF8);
encodedString = [NSString stringWithString:(NSString *)strRef];
CFRelease(strRef);
[tmpURL stringByAppendingString:encodedString];
[tmpURL stringByAppendingString:@"&output=html"];
NSURL *url = [NSURL URLWithString:tmpURL];

NSString *userAgent = @"Custom User Agent";
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] initWithURL:url] autorelease];
[request setValue:userAgent forHTTPHeaderField:@"User-Agent"];

connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSHTTPURLResponse *)response{
NSLog(@"Receive Response");

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
NSLog(@"Receive Data");
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:03:00.913

不同之处在于生成的应用程序的用户代理字符串。MobileSafari 将自己报告为“Safari，iOS 像 Mac OS X”，但是，一个普通`NSURLConnection`的发送`CFNetwork`描述，这对于大多数站点进行“浏览器”（而不是“客户端”）检测不是很有用，这就是他们可能拒绝发送的原因数据到无法识别的用户代理。

# sip - 星号拨号方案说明

> ID：12835734
> 
> 赞同：0
> 
> 时间：2012-10-11T08:52:18.523
> 
> 标签：sip, asterisk, sip-server

以下是我从某处复制的一些星号拨号计划示例。

```
exten => s,1,Answer()
exten => s,n,Playback(hello-world)
exten => s,n,Hangup() 
```

第一行表示当新呼叫进入通道时，它会转到与应用程序绑定的分机 s（最高优先级）1 `Answer()`​​。

之后它转到`PlayBack(hello-world)`然后挂断电话。

现在下一节

```
[incoming]
exten => 123,1,Answer()
exten => 123,n,Background(main-menu)

exten => 1,1,Playback(digits/1)
exten => 1,n,Goto(incoming,123,1)

exten => 2,1,Playback(digits/2)
exten => 2,n,Goto(incoming,123,1) 
```

呼叫正在打到分机 123。（这是一个新菜单吗？？）或者它是从分机“s”转发的。我想我错过了这里的连接链接。

第二行说

`exten => 123,n,Background(main-menu).`

这是什么`main-menu`？它在哪里定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:31:03.853

`Background`与`Playback`应用程序类似，因为它播放文件（`main-menu`最有可能在*/var/lib/asterisk/sounds/*目录中找到的音频文件）。

在`Playback`返回控制之前播放整个文件。后台开始播放文件并立即返回控制，以便您可以执行其他命令。

欲了解更多信息，请参阅：

voip-info.org -[播放](http://www.voip-info.org/wiki/view/Asterisk+cmd+Playback)和[背景](http://www.voip-info.org/wiki/view/Asterisk+cmd+Background)
wiki.asterisk.org -[播放](https://wiki.asterisk.org/wiki/display/AST/Application_Playback)和[背景](https://wiki.asterisk.org/wiki/display/AST/Application_Background)

```
[incoming]
exten => 123,1,Answer() 
```

当星号在通道上接收到呼入呼叫时，星号会查看为该通道定义的上下文（`incoming`是该上下文的名称 - 通常是呼入的默认上下文）。上下文有不同的命令，具体取决于您拨打的分机号。

如果您已拨号`123`，它将开始播放某种自动菜单。

如果您已拨号`1`，否则`2`它将播放数字并再次重定向到`123`并开始播放交互式菜单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:20:17.987

One other thing is that the "next section"

```
[incoming] 
```

... is a dialplan "context". Contexts are a way of partitioning your dialplan; it's a box that holds its own set of variable, extensions, etc.. So in your example, the first context does not explicitly "Goto" or "Gosub" the call to the "Incoming" context, so the call in the first context cannot go there.

As for how the call would get into the "incoming" context, quite often that is defined with the phone trunk coming into the system. So in your appropriate SIP, IAX2 or PSTN trunks, you would have a line like:

```
context=incoming 
```

... and that would force the call to go there. If the call was "addressed" to extension 123 via a "DID" or "Direct Inwards Dial" number, then it would hit that extension and the caller would be hearing a menu greeting.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:31:44.503

*呼叫正在分机 123。（这是一个新菜单吗？？）还是从分机 's' 转接的。*

这是扩展，来自默认上下文（可能默认包括传入或按通道定义）。您可以使用包罗万象的扩展进行调试，使用

```
exten => _X.,1,NoOp(${CALLERID(NUM)} - ${EXTEN}) 
```

或者

```
exten => 123,2,NoOp(${CALLERID(NUM)} - ${EXTEN}) 
```

当您连接到星号 CLI 时，您会看到 Noop。

```
$ asterisk -rvvv 
```

*这里的主菜单是什么？它在哪里定义？*

main-menu 是一个类似“main-menu.gsm”的音频文件（目录在asterisk.conf 中定义）。Asterisk 决定使用哪种格式/编解码器。

# android - 用于从列中查找特定数据的 sqlite 搜索查询？

> ID：12835740
> 
> 赞同：3
> 
> 时间：2012-10-11T08:52:48.093
> 
> 标签：android

我正在制作寻找印度车牌的应用程序。我的数据库包含两列“代码”，“城市”代码包含 MH1、MH2 等数据，而城市包含 Pune、Mumbai 等数据。

应用程序包含一个编辑文本框和列表视图。

Listview 包含来自 GJ3 Rajkot、GJ10 Jamnagar 等数据库的全部数据。

如果我在编辑文本框中写 GJ 整个只有 GJ 的数据必须出现在列表视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:05:18.697

这是查询： SELECT * FROM `table_name` WHERE `code`LIKE '%GJ%' LIMIT 0 , 30

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:09:10.330

尝试这个 ：

```
Cursor c = mDb.rawQuery(
            "select * from table_name where column_name = ?",
            new String[] { "search" }); 
```

**编辑 ：**

按照上面给出的链接的教程并将以下方法添加到 TestAdapter

```
public Cursor get_tag_Data()
 {
     try
     {
         String sql ="select * from table_name where column_name = ?", new String[] { edittext.getText().toString().trim()}";

         Cursor mCur = mDb.rawQuery(sql, null);
         if (mCur!=null)
         {
            mCur.moveToNext();
         }
         return mCur;
     }
     catch (SQLException mSQLException) 
     {
         Log.e(TAG, "getTestData >>"+ mSQLException.toString());
         throw mSQLException;
     }
 } 
```

并从您的类中调用此方法，例如：

```
 TestAdapter mDbHelper = new TestAdapter(urContext);        
 mDbHelper.createDatabase();      
mDbHelper.open();

Cursor testdata = mDbHelper.get_tag_Data();

mDbHelper.close(); 
```

**编辑：**

在您的数据库类中声明以下方法，

```
 public List<String> getQuestions(String difficulty) {

   public static List<String> question_Set;
    question_Set = new ArrayList<String>();

    Cursor c = mDb.rawQuery(
            "select * from table_name where column_name = ?", new String[] { difficulty });

    while (c.moveToNext()) {

        question_Set.add(c.getString(1).trim());

    }

    return question_Set;
} 
```

现在打电话

```
DB.getQuestions(edittext.getText().toString().trim()); // DB is your database class name 
```

# javascript - 为每个单词重置计数

> ID：12835741
> 
> 赞同：4
> 
> 时间：2012-10-11T08:52:49.273
> 
> 标签：javascript, jquery

在我的拼写游戏中，有一个网格填充了对用户隐藏的单词。游戏的目的是借助声音和图片拼写这些单词。用户通过单击网格上的相关字母来拼写单词。

如果用户输入错误的单词，该单词会发出红色光。如果这种情况发生 3 次，则用户将有机会借助将在第 3 次错误尝试时出现的按钮移动到下一个单词。

目前这可行，但我刚刚遇到一个错误，错误的计数会继续。例如，如果用户对一个单词进行了 2 次错误尝试，然后正确地尝试了下一个单词。然后，只需要对该词的一个错误答案，就可以为用户提供继续选项。基本上我需要一种方法来让计数在每次移动到下一个单词时重置。

此代码计算错误尝试的次数，然后在 3 次之后使按钮（“.minibutton”）可见。

```
 var score = {
    right: 0,
    wrong: 0,
    attempts: 0
};

    score.wrong++;

        if (score.wrong == 3) {

            $(".minibutton").css('visibility', 'visible');
            $('.next').css('visibility', 'visible');
         } 
```

一个帮助的小提琴 - [http://jsfiddle.net/smilburn/7Y7A5/4/](http://jsfiddle.net/smilburn/7Y7A5/4/)（声音警告！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:08:13.103

当用户回答正确时，将 score.wrong 设置为 0。

编辑：

正如所指出的，您需要处理用户在错误回答后跳过问题的情况，因此重置 score.wrong 值的更好位置是在您显示新图片时，而不是在他们正确回答时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:59:32.033

`score.wrong`无论用户回答错误还是正确，每次显示新图片时都需要重置。

顺便说一句，您的代码会引发一些额外的错误，您可能需要修复它们。

> 未捕获的类型错误：对象 # 没有方法“显示”

# php - PHP 警告：无法修改标头信息

> ID：12835744
> 
> 赞同：2
> 
> 时间：2012-10-11T08:52:54.337
> 
> 标签：php

我有一个php登录功能。当我尝试使用正确的用户登录时，它会显示如下错误：

警告：无法修改标头信息 - 第 150 行 /home/hapshou1/public_html/index.php 中的标头（输出开始于 /home/hapshou1/public_html/index.php:15）

-

```
include "config.php";

if($_SERVER["REQUEST_METHOD"] == "POST")
{
    function antiinjection($data)
    {
        $filter_sql = mysql_real_escape_string(stripslashes(strip_tags(htmlspecialchars($data,ENT_QUOTES))));
        return $filter_sql;
    }

    $username = antiinjection($_POST['username']);
    $pass = antiinjection($_POST['password']);

    $login=mysql_query("SELECT username, password FROM user WHERE (username='$username' OR email='$username') AND password='$pass'");
    $found=mysql_num_rows($login);
    $r=mysql_fetch_array($login);

    if
    ((!empty($username)) &&
    (!empty($pass)))
    {
        if ($found > 0)
        {
            session_register("username");
            session_register("password");

            $_SESSION[username]     = $r[username];
            $_SESSION[password]     = $r[password];

            date_default_timezone_set("Asia/Jakarta");
            $date_log = date("j-F-Y, G:i ");

            mysql_query("update user set status='online', date_logged_in='$date_log' WHERE username='$_SESSION[username]'");
            header('location:home');
        }
        else
        {
            echo '<div class="error_log">
                    <p>Wrong username or password. Please try again.</p>
                </div>';
        }
    }
    else
    {
        echo '
            <div class="error_log">
                <p>Username and password are required.</p>
            </div>
        ';
    }
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:56:20.373

好吧，然后看看第 15 行的内容。

最可能的情况是该语句导致了输出：

```
$found=mysql_num_rows($login); 
```

这反过来又是由您的`mysql_query`退货造成的`false`。

您可以考虑这样报告任何错误：

```
if (false === ($login=mysql_query("SELECT username, password FROM user WHERE (username='$username' OR email='$username') AND password='$pass'"))) {
    die(mysql_error());
} 
```

*不建议`die()`在生产环境中使用这样的语句，因此请考虑使用记录器*

顺便说一句，学习如何使用 PDO/mysqli；PDO 有一种模式，在这种模式下，所有错误都可以转换为异常，这有助于我更快地找到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:54:21.377

放在`ob_start();`代码顶部并放在`ob_flush();`最后

总是放在重定向`exit();`之后`header`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:54:58.757

将您的代码包含在

```
 ob_start();

...

ob_flush(); 
```

发生此错误的原因是，当请求设置标头值时，网页正文的某些部分已经发送给用户。

也总是放在`exit();`header() 语句之后，以便在 header() 调用之后不会执行当前页面上的其余代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T09:13:00.543

**例子**： `header('Location: http://www.example.com/');`

Naga，试试这个代码：

```
 session_start();
date_default_timezone_set("Asia/Jakarta");
include "config.php";

if(isset($_POST['username']) && isset($_POST['password']))
{
    function antiinjection($data)
    {
        $filter_sql = mysql_real_escape_string(stripslashes(strip_tags($data)));
        return $filter_sql;
    }

    $username = antiinjection($_POST['username']);
    $pass     = antiinjection($_POST['password']);

    $login = mysql_query("SELECT username, password FROM user WHERE (username='$username' OR email='$username') AND password='$pass'");
    $r     = mysql_fetch_array($login);

    if((!empty($username)) && (!empty($pass)) && is_array($r))
    {
        if (count($r) > 0)
        {
            $_SESSION['username'] = $r['username'];
            $_SESSION['password'] = $r['password'];
            $date_log = date("j-F-Y, G:i");
            mysql_query("UPDATE user SET status = 'online', date_logged_in = '$date_log' WHERE username = '$_SESSION[username]'");
            header('Location: http://domen.com/');
        }
        else
        {
            echo '<div class="error_log">
                    <p>Wrong username or password. Please try again.</p>
                </div>';
        }
    }
    else
    {
        echo '
            <div class="error_log">
                <p>Username and password are required.</p>
            </div>
        ';
    }
} else {
    // do some action
} 
```

# .net - 十进制值显示为 0.00

> ID：12835746
> 
> 赞同：3
> 
> 时间：2012-10-11T08:52:59.507
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, razor, data-annotations

我在我的项目中保存工资值（首先使用 EF 代码）在我的模型中，我有 -

```
[DisplayFormat(DataFormatString = "{0:0.##}")]
[Display(Name = "Salary")]
public Decimal Salary { get; set; } 
```

当我查看我的数据库时，它似乎已正确保存。我可以看到值为 50000.00，列是 Salary（十进制（18,2），不为空）

但是在我看来，当我尝试显示此值时，它显示为 0.00

视图中的代码是

```
<tr>
    <td>Salary</td>
    <td>@Html.DisplayFor(x => x.Salary)</td>
</tr> 
```

知道为什么它显示 0.00 而不是 50000.00 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:57:33.477

尝试

```
[DisplayFormat(DataFormatString = "{0:n2}")] 
```

还要通过测试或无格式打印到屏幕上确认您在控制器中有实际值，即`@Model.Salary`

# r - 在 R 中，如何获得一组数据的最佳拟合方程？

> ID：12835747
> 
> 赞同：4
> 
> 时间：2012-10-11T08:52:59.150
> 
> 标签：r, equation

我不确定 R 是否可以做到这一点（我认为它可以，但也许这只是因为我倾向于假设 R 可以做任何事情:-)）。我需要的是找到描述数据集的最佳拟合方程。

例如，如果您有以下几点：

`df = data.frame(x = c(1, 5, 10, 25, 50, 100), y = c(100, 75, 50, 40, 30, 25))`

如何获得最佳拟合方程？我知道您可以通过以下方式获得最佳拟合曲线：

```
plot(loess(df$y ~ df$x)) 
```

但据我了解，您无法提取方程式，请参阅[Loess Fit and Resulting Equation](https://stackoverflow.com/questions/1785118/loess-fit-and-resulting-equation)。

当我尝试自己构建它时（请注意，我不是数学家，所以这可能不是理想的方法:-)），我最终得到了类似的结果：

```
y.predicted = 12.71 + ( 95 / (( (1 + df$x) ^ .5 ) / 1.3)) 
```

哪种似乎接近它 - 但我不禁认为可能存在更优雅的东西:-)

我觉得拟合线性或多项式模型也行不通，因为公式似乎与那些模型通常使用的不同（即，这个似乎需要除法、幂等）。例如，将[多项式模型拟合到 R 中的数据中](https://stackoverflow.com/questions/3822535/fitting-polynomial-model-to-data-in-r)的方法给出了非常糟糕的近似值。

我记得很久以前存在做这种事情的语言（Matlab 可能是其中之一？）。R也可以这样做，还是我只是在错误的地方？

（背景信息：基本上，我们需要做的是根据第一列中的数字找到一个确定第二列中数字的方程式；但我们自己决定数字。我们知道我们希望曲线看起来如何像，但如果我们得到更好的拟合，我们可以将这些数字调整为一个等式。它是关于产品的定价（一种比当前昂贵的定性数据分析软件更便宜的替代品）；您购买的“项目信用”越多，价格就越便宜它应该变成。与其强迫人们购买给定的数字（即 5 或 10 或 25），不如有一个公式更好，这样人们就可以准确地购买他们需要的东西——但这当然需要一个公式。我们有一个一些我们认为还可以的价格的想法，但现在我们需要将其转化为等式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T09:06:02.787

# 多元线性回归示例

适合 <- lm(y ~ x1 + x2 + x3, data=mydata)

summary(fit) # 显示结果

上面的代码应该为您提供最适合使用 OLS 的数据的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T11:21:50.060

我常用的插件： [http ://creativemachines.cornell.edu/eureqa](http://creativemachines.cornell.edu/eureqa)

但正如罗兰所说，“最适合一般”没有什么意义，因为任何函数都可以表示为泰勒级数。由于一组数据预计会在其值中存在噪声（即错误），因此曲线拟合的很大一部分是确定什么是噪声，什么不是。
如果你任意选择一些拟合函数，我可以保证的一件事是外推点会很快发散。

# c# - 如何以编程方式将文本转换为 prc/mobi 文件？

> ID：12835757
> 
> 赞同：0
> 
> 时间：2012-10-11T08:53:24.600
> 
> 标签：c#, java, text, kindle

如何以编程方式将文本转换为 prc/mobi 文件？是否存在任何用于 c# 或 java 的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:17:09.493

有 3 个工具 Calibre、eBookTools 和 mobiperl。Calibre 是用 Python 编写的，有一个 GUI，另外两个是用 perl 编写的。

如果没有真正需要从您的应用程序转换文档，您可以使用它们。或者从你的应用程序启动一个进程来执行一个 shell 来处理它们

# html - 使用 mediaelement.js 播放 iPhone/iPad 的替代源

> ID：12835758
> 
> 赞同：2
> 
> 时间：2012-10-11T08:53:32.377
> 
> 标签：html, streaming, mediaelement.js, wowza

我正在尝试使用 mediaelement.js 通过 Wowza 服务器流式传输视频文件。不幸的是，我只能让它在 iPhone/iPad 或桌面浏览器上工作。我真的不知道为什么会这样，但我发现 iPad/iPhone 显然需要不同的 URL 来播放视频（http:// 和 playlist.m3u8）。

这是我到目前为止得到的：

```
<video poster="images/dummy.jpg" controls="controls" preload="none">
    <!-- source for desktop -->
    <source src="rtmp://tv.mysite.de/mp4:movieclip.mp4" type="video/mp4" />
    <!-- source for iPad/iPhone -->
    <source src="http://tv.mysite.de/mp4:movieclip.mp4/playlist.m3u8" type="video/mp4" />
</video> 
```

```
<script>
$('video').mediaelementplayer();
</script> 
```

如果我使用此代码，它仅适用于桌面浏览器。仅使用第一个来源时，它不适用于 iPhone/iPad。如果我使用第二个来源，桌面浏览器也是如此。

有没有办法让所有设备/浏览器都发生奇迹？也许使用第二个来源作为移动 iOS 或其他东西的后备，或者我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:18:58.717

尝试像这样指定 iPad/iPhone 源：

```
<source src="http://tv.mysite.de/mp4:movieclip.mp4/playlist.m3u8" type="application/x-mpegURL" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:44:10.723

您是否尝试过使用不包含冒号“：”的视频路径？我不知道这是否是问题所在，但“：”冒号是 Mac 文件系统的特殊字符，并且不允许在文件路径中使用。

# c++ - 由 C++ 中的模板组成的列表

> ID：12835763
> 
> 赞同：3
> 
> 时间：2012-10-11T08:53:40.577
> 
> 标签：c++, list, templates

在 boost 图形库中，使用了属性映射。例如，考虑[这个关于 properties 的链接](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/using_adjacency_list.html#sec%3aadjacency-list-properties)。您可以添加多个属性列表，例如：

```
typedef property<vertex_distance_t, float, 
    property<vertex_name_t, std::string> > VertexProperty; 
```

我的问题是：

*   这个“模板列表”概念是否有名称，所以我可以用谷歌搜索它？
*   是否有类似的高级模板结构，如数组或树？
*   你有解释它的好书或网络链接吗？

注意：我需要一个没有 C++11 的解决方案，尽管 C++11 也会很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:23:02.633

这种类型的模板组合称为*基类链接*。

它特别适用于

*   从空基类优化中获利
*   使得支持开放式*mixins*列表变得相对容易， 即使在不直接支持*可变参数的编译器上也是如此*

    > **编辑**事实上，这确实是在 (c++0x) 可变参数（[现代 C++ 设计](https://rads.stackoverflow.com/amzn/click/com/0201704315)）出现之前通常实现类型列表的方式

参考：

*   [基类链接和对象大小](http://www.boost.org/doc/libs/1_39_0/libs/utility/operators.htm#chaining)

有关的：

*   [参数化基类](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Parameterized_Base_Class)
*   [空基优化](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Empty_Base_Optimization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:31:29.887

这也是一个*类型列表*，未连接到 C++11。[这](http://www.codeproject.com/Articles/23304/High-Performance-Heterogeneous-Container#Typelist8)是对类型列表的一个很好的解释

# ruby-on-rails - rails 3中没有模型的控制器的路由

> ID：12835764
> 
> 赞同：10
> 
> 时间：2012-10-11T08:53:45.387
> 
> 标签：ruby-on-rails, model, controller, routes

我有一个名为的控制器，它从没有关联的模型`BaseController`继承，但它的方法只响应一条消息以通知一切正常。`ApplicationController``ping`

我正在尝试通过在我的 routes.rb 文件中设置的 BaseController 调用操作 ping：

```
namespace :api, defaults: { format: 'json' } do   
  match '/ping' => 'base#ping' 
end 
```

但它总是给我一个 NameError `uninitialized constant Base`。我想它试图找到一个名为 Base 的模型，但它不存在，所以我不知道如何设置到我的控制器的正确路由。

我的 BaseController 的内容如下：

```
class Api::BaseController < ApplicationController
   load_and_authorize_resource
   respond_to :json

   def ping
      respond_with({ :status => 'OK' })
   end
end 
```

作为额外信息：`BaseController`只是其他控制器继承的父控制器。其他人是足智多谋的控制器，并有相关的模型

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T09:01:26.943

当您在路由周围放置命名空间时，它将在该命名空间中查找控制器。

因此，在您的情况下，它将寻找一个名为 Api::BaseController 的控制器，该控制器通常存储在 app/controllers/api/base_controller.rb 中。你的控制器是这样设置的吗？

有关更多详细信息，请参见此处：http: [//guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

**编辑：**

我不认为它没有找到问题所在的控制器。错误是由于您`load_and_authorize_resource`在控制器中调用而引起的。CanCan 使用控制器名称来尝试加载资源。

如果控制器没有型号，请拨打`authorize_resource :class => false`。

有关详细信息，请参阅[本页底部。](https://github.com/ryanb/cancan/wiki/Non-RESTful-Controllers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:05:33.437

请试试这个：

将此添加到您的 routes.rb

```
resources :base 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:23:12.273

在你的 routes.rb map.resources 中试试这个 :base, :collection=> {:ping=>:get}

# c#-4.0 - 从 AppBase 加载弱名称程序集

> ID：12835765
> 
> 赞同：1
> 
> 时间：2012-10-11T08:53:47.510
> 
> 标签：c#-4.0, reflection, assembly-loading

我想在运行时加载程序集。我知道的关于程序集的唯一信息是它的名称（弱名称）。我在其中一本书中读过，AppBase 中存在所有名称较弱的程序集。有谁知道我如何在运行时加载这个程序集？

如果您知道程序集路径，我在网上找到的代码正在加载程序集。但我不想硬编码路径。

我正在使用下面的代码来加载程序集。程序集程序集 = Assembly.Load("RomanConverter"); 现在，当 CLR 尝试加载程序集时，它找不到程序集。原因是上面的代码行是由一个控制台应用程序调用的，它没有任何对 Roman Converter 的引用。它试图在以下位置找到程序集：（Fusion Log）

日志：正在尝试下载新的 URL 文件：///C:/Users/XYZ/documents/visual studio 2010/Projects/Algo/Algo/bin/Debug/RomanConerter.DLL。日志：正在尝试下载新的 URL 文件：///C:/Users/XYZ/documents/visual studio 2010/Projects/Algo/Algo/bin/Debug/RomanConerter/RomanConerter.DLL。日志：正在尝试下载新的 URL 文件：///C:/Users/XYZ/documents/visual studio 2010/Projects/Algo/Algo/bin/Debug/RomanConerter.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/XYZ/documents/visual studio 2010/Projects/Algo/Algo/bin/Debug/RomanConerter/RomanConerter.EXE。

但是我的程序集出现在其他位置。（小鬼：我不能在这里硬编码路径，或者我不想给出任何相对路径）

# twitter-bootstrap - xpages中的引导轮播不是手动滑动的

> ID：12835767
> 
> 赞同：-2
> 
> 时间：2012-10-11T08:53:55.920
> 
> 标签：twitter-bootstrap, xpages, carousel

我在我的 xpages 中实现了引导轮播，它在自动模式下运行良好。但我无法手动切换图片（悬停停止也很好用）。

下面是从我的 xpage 创建的代码。好的，id 标签看起来有点奇怪。href的计算...

```
<div id="view:_id1:_id215:carousel" class="carousel slide">
<div id="view:_id1:_id215:carousel_inner" class="carousel-inner">
<div id="view:_id1:_id215:carousel_inner:0:Image" class="item active">
<img id="view:_id1:_id215:carousel_inner:0:image1" src="....jpg" alt="" class="viewphoto"></div>
<div id="view:_id1:_id215:carousel_inner:1:Image" class="item">
<img id="view:_id1:_id215:carousel_inner:1:image1" src="....jpg" alt="" class="viewphoto"></div>
<div id="view:_id1:_id215:carousel_inner:2:Image" class="item">
<img id="view:_id1:_id215:carousel_inner:2:image1" src="....jpg" alt="" class="viewphoto"></div>
</div>
<a id="view:_id1:_id215:cLeft" href="#view:_id1:_id215:carousel" class="carousel-control left" data-slide="prev">&lt;</a>
<a id="view:_id1:_id215:cRight" href="#view:_id1:_id215:carousel" class="carousel-control right" data-slide="next">&gt;</a>
</div>
</div> 
```

这就是 xpage 代码的外观（作为附加信息）

```
 <xp:panel id="carousel" styleClass="carousel slide">
        <xp:repeat id="carousel_inner" rows="30" value="#{view1}"
            var="cImages" styleClass="carousel-inner">

            <xp:panel id="Image">

                <xp:this.styleClass><![CDATA[#{javascript:if (sessionScope.carCount == 1){
                sessionScope.carCount = 2;
                        return "item active";
                    } else {
                        return "item"
                }}]]></xp:this.styleClass>

                <xp:image id="image1" styleClass="viewphoto">
                    <xp:this.url><![CDATA[#{javascript:getCImageHTML(cImages.getDocument(), "fnImage", "Image")}]]></xp:this.url>
                </xp:image>

                <xp:panel styleClass="carousel-caption" id="caption">
                    <h4>Thumbnaillabel header</h4>
                    <xp:label value="Aloha some description" id="label1"></xp:label>
                </xp:panel>
            </xp:panel>
        </xp:repeat>

        <xp:link escape="true" id="cLeft" styleClass="carousel-control left"
            value="##{id:carousel}">
            <xp:this.text><![CDATA[<]]></xp:this.text>
            <xp:this.attrs>
                <xp:attr name="data-slide" value="prev"></xp:attr>
            </xp:this.attrs>
        </xp:link>

        <xp:link escape="true" id="cRight" styleClass="carousel-control right"
            value="##{id:carousel}">
            <xp:this.text><![CDATA[>]]></xp:this.text>
            <xp:this.attrs>
                <xp:attr name="data-slide" value="next"></xp:attr>
            </xp:this.attrs>
        </xp:link>
    </xp:panel> 
```

所以也许有人有一个想法。或者，由于计算出的 id 标签，这可能是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:58:29.097

好的，我弄清楚了问题所在。ID-Tag 中的 ':' 是问题所在。'slide-prev/next' 不能使用它，因为它是 jQuery 中的一个特殊字符。

所以我创建了一个用反斜杠伪装冒号的函数。

现在它工作正常

谢谢阿明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:09:55.817

希望我能看到更多你的代码。您在文档的哪个位置定义了以下内容？

1.  jQuery.js
2.  引导程序.js
3.  引导轮播.js
4.  引导程序.css

此外，您的轮播是否位于与所有资源/js/css 定义分开的自定义控件中？我最终在每个组件的末尾添加了我的 jquery 和 bootstrap js 作为静态定义（否则我失去了一些功能，jquery 只在我的页面的一部分上生效，在一个带有 xe:dynamicContent 控件的单页应用程序中） .

# php - 在 php/mysql 中将时间四舍五入到最接近的 15 分钟

> ID：12835768
> 
> 赞同：0
> 
> 时间：2012-10-11T08:53:56.870
> 
> 标签：php, mysql

我有一个 MySQL 表，其中包含一个`time`存储广告发布时间的字段。我需要按 15 分钟的周期对它们进行分组并显示。

例子：

```
 |comm1|comm2 |comm3|
--------------------------------
|8:00- 8:15 |   2 | 5    |  0  |
--------------------------------
|8:15- 8:30 |   0 | 0    |  1  |
--------------------------------
|8:30- 8:45 |   4 | 1    |  3  |
--------------------------------
|8:45- 9:00 |   4 | 5    |  2  |
--------------------------------
|...        |   . | .    |  .  |
-------------------------------- 
```

以此类推直到24:00！所以，我需要做两件事：

1) 以全天 15 分钟为单位进行划分，以及

2) 围绕广告运行的时间，到这些时间段中最接近的时间段。

任何的想法？我只能使用 PHP/MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:09:10.763

试试这个——

```
SELECT
  SEC_TO_TIME((TIME_TO_SEC(time_field) DIV 900) * 900) AS round_time
FROM table 
```

其中 900 是 60 秒 * 15 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:05:38.743

如果对您的桌子一无所知，这很难说。但是假设你有一个 unix 时间戳字段，你可以像这样得到开始小时+季度：

```
SELECT concat( hour( from_unixtime( time ) ) , ':', floor( minute( from_unixtime( time ) ) %4 ) *15 ) FROM table 
```

在这种情况下`time`是您的 unix 时间戳字段。如果您有时间/日期时间字段，则可以删除 FROM_UNIXTIME 函数。

# javascript - 如何将附加元素最后放入容器中？

> ID：12835771
> 
> 赞同：1
> 
> 时间：2012-10-11T08:54:10.647
> 
> 标签：javascript, html

我正在开发一个 HTML5 项目。我遇到了以下问题，例如：-

```
var appededCanvas =document.createElement('canvas');        //Canvas to append
document.getElementById("div1").appendChild(appededCanvas );// div1 is container of Canvas 
```

现在“appededCanvas”将附加在“div1”中。

我希望如果更多元素（作为“div1”的子元素）添加到“div1”，那么这些元素将附加在“appededCanvas”之前。“appededCanvas”最终将保留（作为孩子）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T09:00:55.793

采用`parent.insertBefore(newElement, child)`

```
var appededCanvas =document.createElement('canvas'); 
var container = document.getElementById("div1");

container.appendChild(appededCanvas);
container.insertBefore(newElement, appendedCanvas);

// or if you want the last inserted element in the first
container.insertBefore(newElement, container.firstChild); 
```

# javascript - 您如何使用 Javascript 将元素绝对定位到网格布局中？

> ID：12835774
> 
> 赞同：1
> 
> 时间：2012-10-11T08:54:22.510
> 
> 标签：javascript, jquery

以下示例显示了平铺的 div，一旦单击淡出，我一直在尝试扩展它，以便删除子 img 而不是 div。

发生这种情况时，div 会丢失任何 CSS 定义的宽度和高度，并且网格会被破坏。

有谁知道如何使用不显示并保持网格布局的 JQuery UI 效果来为图像设置动画？

[http://jsfiddle.net/bzCbh/4/](http://jsfiddle.net/bzCbh/4/) - 工作示例

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:28:41.803

您的图块设置为`display:inline`忽略所述元素的高度和宽度。因此，当图像被删除时，它们很自然会崩溃，div 从一开始就从未尊重高度和宽度。将它们更改为`display:inline-block`，它会工作。

```
.layer .tile { ... display:inline-block; ...} 
```

您还应该更改图像以`display:block`使它们的行为一致

```
.layer .tile img { display:block; } 
```

​ 工作小提琴：http: [//jsfiddle.net/bzCbh/7/](http://jsfiddle.net/bzCbh/7/)

# c++ - Visual Studio 2012 错误 C2039：“序列化”：不是“std::shared_ptr<_Ty>”的成员

> ID：12835780
> 
> 赞同：0
> 
> 时间：2012-10-11T08:54:38.867
> 
> 标签：c++, boost, visual-studio-2012, shared-ptr

我在编译我的静态类库时遇到了这个问题。

我知道 Boost 并没有正式支持 VS2012，但由于这是我目前的开发环境，我真的可以使用一些建议。

我一直在四处寻找，但到目前为止没有任何帮助。

示例代码：

富.h：

```
#include "FooImpl.h"
#include <boost/serialization/serialization.hpp>
#include <boost/serialization/shared_ptr.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>

class Foo
{
public:
    Foo(void) : pImpl(std::make_shared<FooImpl>()) {}
    //similar constructors follow

    //a few get methods here
private:
    std::shared_ptr<FooImpl> pImpl;

    friend class boost::serialization::access;
    template <typename Archive>
    void serialize(Archive & ar, const unsigned int file_version);
} 
```

Foo.cpp：

```
#include "stdafx.h"
#include "Foo.h"

template<class Archive>
void Foo::serialize(Archive& ar, const unsigned int ver) 
{  
    ar & pImpl;
}

template void Foo::serialize<boost::archive::text_iarchive>(
    boost::archive::text_iarchive & ar, 
    const unsigned int file_version
);
template void Foo::serialize<boost::archive::text_oarchive>(
    boost::archive::text_oarchive & ar, 
    const unsigned int file_version
); 
```

FooImpl.h：

```
#include <boost/serialization/serialization.hpp>
#include <boost/serialization/string.hpp>

class FooImpl
{
public:
    FooImpl(void);
    //other constructors, get methods

private:
    //data members - unsigned int & std::wstring

    friend class boost::serialization::access;
    template <typename Archive>
    void serialize(Archive& ar, const unsigned int ver);
}; 
```

FooImpl.cpp：

```
#include "stdafx.h"
#include "FooImpl.h"

//function implementations

template <typename Archive>
void FooImpl::serialize(Archive& ar, const unsigned int ver)
{
    ar & id_;
    ar & code_;
}

//Later added, serialization requires these

template void FooImpl::serialize<boost::archive::text_iarchive>(
    boost::archive::text_iarchive & ar, 
    const unsigned int file_version
);

template void FooImpl::serialize<boost::archive::text_oarchive>(
    boost::archive::text_oarchive & ar, 
    const unsigned int file_version
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:09:57.830

`boost::serialization`是可扩展的，可以扩展为使用任何类型，因此您可以实现自己的`load/save`for版本，`std::shared_ptr`查看`boost_installation_path/boost/serialization/shared_ptr.hpp`并从中实现自己的版本`load/save`。`boost::shared_ptr`作为另一种解决方法，您可以使用`std::shared_ptr`!! 既然你正在使用，`boost`我认为使用`std::shared_ptr`over没有任何优势`boost::shared_ptr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:45:32.457

您正在尝试序列化指针。你想序列化指针指向的东西。最简单的方法是替换`foo << ptr;`为`foo << (*ptr);`.

周围的括号`*ptr`不是必需的，许多人会将它们视为笨拙的标志。但是，如果您发现它们使您更清楚，请使用它们。

# php - 带有常量参数的php exec（），安全吗？

> ID：12835788
> 
> 赞同：0
> 
> 时间：2012-10-11T08:55:01.050
> 
> 标签：php, exec

我们想在服务器端生成 mobi 文件。为此，我们需要使用来自 Amazon 的 kindlegen（从 epub 生成 mobi）。我读过启用 exec 并不完全安全，但我的问题是我是否使用类似的东西

```
exec('kindlegen ' . $epubInput . ' -c0 -o ' . $mobiOutput ); 
```

有没有可能出错？这两个变量（`$epubInput`和`$mobiOutput`）不是来自用户输入，它们是由脚本生成的。另一个问题（我想这是不可能的），但是否有一个设置可能允许 exec 只执行一个特定的文件，在我的例子中是 kindlegen？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:58:33.303

这取决于产生这些值的代码是否可以被欺骗产生邪恶的值。在这种情况下，它确实看起来不像，但你应该确定。

您还应该[`escapeshellarg`](http://php.net/manual/en/function.escapeshellarg.php)在调用之前使用两个参数`exec`；当值在您的控制之下时，这并不是绝对必要的，但没有理由反对这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:00:08.157

您应该使用[`escapeshellarg()`](http://www.php.net/manual/en/function.escapeshellarg.php)转义所有参数。这样，您将永远不必担心其他脚本的结果。

# android - “无法覆盖 SherlockActivity 的最终方法”

> ID：12835789
> 
> 赞同：13
> 
> 时间：2012-10-11T08:55:02.340
> 
> 标签：android

我正在尝试使用 Actionbarsherlock 扩展我的活动，当我这样做时出现错误

“无法覆盖 SherlockActivity 的最终方法”

我的活动有这些进口

```
 import java.io.IOException;
    import com.actionbarsherlock.app.SherlockActivity;
    import android.os.Bundle;
    import android.accounts.Account;
    import android.accounts.AccountManager;
    import android.accounts.AccountManagerCallback;
    import android.accounts.AccountManagerFuture;
    import android.accounts.AuthenticatorException;
    import android.accounts.OperationCanceledException;
    import android.app.Activity;
    import android.content.Intent;
    import android.util.Log;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button; 
```

请指导我如何解决它？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-31T01:21:22.073

正确的答案是导入 ActionBarSherlock 类，而不是标准的 Android 类。

这是来自 ActionBarSherlock 项目的首页，所以显然这是一个常见问题：

> 进口
> 
> 为了提供在 3.0 之前的 Android 版本上不可用的功能，该库包含并使用了许多与本机对应名称相同的类。最常见的三种是：
> 
> ```
> com.actionbarsherlock.app.ActionBar
> com.actionbarsherlock.view.Menu
> com.actionbarsherlock.view.MenuItem
> com.actionbarsherlock.view.MenuInflater 
> ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-24T13:42:14.897

删除以下导入

```
import android.view.Menu;

import android.view.MenuInflater;

import android.view.MenuItem; 
```

# javascript - 带有进度条的 Jquery 滑块

> ID：12835790
> 
> 赞同：1
> 
> 时间：2012-10-11T08:55:02.960
> 
> 标签：javascript, jquery, slider, progress-bar

我有设置和 jsfiddler：http: [//jsfiddle.net/semantic/6SaJK/2/](http://jsfiddle.net/semantic/6SaJK/2/)

我需要幻灯片自动旋转，每张幻灯片的进度条需要从 0 填充到 50px 宽度。我已经实现了其余的部分，但正在努力实现其余的逻辑。请注意，我想使用现有代码。谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:28:13.877

你可以尝试使用这样的东西：http: [//jsfiddle.net/6SaJK/28/](http://jsfiddle.net/6SaJK/28/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T16:02:00.973

我无法发表评论，因为我在 stackoverflow 上缺乏声誉，所以我的想法就在这里。

OP，请记住，当您为滑块和进度条进行暂停时，您可能会发现时间略有不同。每个需要动画进度条的滑块的防错答案是在进度条完成他的工作时触发滑块的“下一个”事件。

使用 jQuery Cycle 2，您可以通过以下方式实现它：

```
function main_slider() {

    if ( $("#slider").length ) {

    var $time = 7000;
    var $speed = 500;
    var $slide_width = $("#slider").width()

    $("#slider .cycle").on("cycle-initialized", function(event, opts) {
      var $slider = $("#slider");
      var $progress = $("#slider .progress");
      var $animator = $("#slider .progress .animator");
      var propWidth = $animator.width() / $progress.width() * 100;

      $animator.animate({
        width: "100%"
      }, $time * (100 - propWidth) / 100, function(){
        $("#slider .cycle").cycle("next");
      });

    });    

    $("#slider .cycle").cycle({
      fx: "scrollHorz",
      timeout: 0,
      speed: $speed,
      slides: "li",
      next: "#slider nav .next",
      prev: "#slider nav .prev",
      pauseOnHover: true,
      sync: true,
      delay: 0,
      hideNonActive: false,
      pager: "#slider .pager ul",
      pagerTemplate: "<li><a href='#'></a></li>"

    });

    $("#slider .cycle").on("cycle-before", function(event, opts) {
      $("#slider .progress .animator").stop(true).animate({"width": 0}, 0);
      var $slider = $("#slider");
      var $progress = $("#slider .progress");
      var $animator = $("#slider .progress .animator");

      $animator.animate({
        width: "100%"
      }, $time, function(){
        $("#slider .cycle").cycle("next"); //everything is a trick :)
      });
    })

    $("#slider .cycle").on("cycle-paused", function(event, opts) {
      var $slider = $("#slider");
      var $progress = $("#slider .progress");
      var $animator = $("#slider .progress .animator");

      $animator.stop(true);
    })

    $("#slider .cycle").on("cycle-resumed", function(event, opts) {
      var $slider = $("#slider");
      var $progress = $("#slider .progress");
      var $animator = $("#slider .progress .animator");

      var propWidth = ($animator.width() / $progress.width()) * 100;

      $animator.animate({
        width: "100%"
      }, $time * ((100 - propWidth) / 100), function(){
        $("#slider .cycle").cycle("next");
      });

    });

    $("#slider .cycle").on("cycle-next", function(event, opts){
      var $slider = $("#slider");
      var $progress = $("#slider .progress");
      var $animator = $("#slider .progress .animator");
      $animator.stop(true).width(0);

      $animator.animate({
        width: "100%"
      }, $time, function(){
        $("#slider .cycle").cycle("next");
      });
    }).on("cycle-prev", function(event, opts){
      var $slider = $("#slider");
      var $progress = $("#slider .progress");
      var $animator = $("#slider .progress .animator");
      $animator.stop(true).width(0);

      $animator.animate({
        width: "100%"
      }, $time, function(){
        $("#slider .cycle").cycle("next");
      });
    })

    $("#slider").mouseenter(function(){
      var $prev = $("#slider nav .prev");
      var $next = $("#slider nav .next");
      var $duration = 500

      $prev.stop().animate({
        opacity: 1,
        left: 0
      }, $duration)

      $next.stop().animate({
        opacity: 1,
        right: 0
      }, $duration)

    }).mouseleave(function(){
      var $prev = $("#slider nav .prev");
      var $next = $("#slider nav .next");
      var $duration = 500
      $prev.stop().animate({
        opacity: 0,
        left: "-46px"
      }, $duration)
      $next.stop().animate({
        opacity: 0,
        right: "-46px"
      }, $duration)
    })

    function position_controls() {
      var $prev = $("#slider nav .prev");
      var $next = $("#slider nav .next");
      var $slider = $("#slider li");

      var $sliderH = $slider.height();
      var $controlH = $prev.height();

      var $center = ($sliderH/2) - ($controlH/2);

      $prev.css("top", $center+"px");
      $next.css("top", $center+"px");

    }

    position_controls();

    $(window).resize(function(){
      position_controls();
    })

  }

}

main_slider(); 
```

html结构是：

```
<section id="slider">
  <nav><a href="#" class="next"></a><a href="#" class="prev"></a></nav>
  <ul class="cycle">
    <li><a href="#"><img src="images/slide1.jpg" /></a></li>
    <li><a href="#"><img src="images/slide2.jpg" /></a></li>
    <li><a href="#"><img src="images/slide1.jpg" /></a></li>
    <li><a href="#"><img src="images/slide2.jpg" /></a></li>
  </ul>
  <div class="progress"><div class="animator"></div></div>
  <div class="pager"><ul></ul></div>
</section> 
```

jQuery 部分现在有点混乱，因为这是我刚刚完成的开发版本，因此它没有优化，变量声明太多，但它做了它需要做的事情，而且时间没有问题。

# redirect - struts2 动作重定向到“外部”url

> ID：12835791
> 
> 赞同：0
> 
> 时间：2012-10-11T08:55:08.127
> 
> 标签：redirect, struts2, action, httprequest

我需要我的操作才能重定向到外部 url 地址，例如[http://google.com](http://google.com)

现在我有：

```
<default-action-ref name="home" />
<global-results>
  <result name="redirect" type="redirect">${targetUrl}</result>
</global-results> 
```

如果在 targetUrl 我有[http://google.com](http://google.com)我的操作将调用主页，它不会重定向到谷歌。

我在这里看到了类似的问题 [How to do dynamic URL redirects in Struts 2?](https://stackoverflow.com/questions/173846/struts2-how-to-do-dynamic-url-redirects) 但我可以看到只有 url 的最后一部分被用作重定向的目的地。

你能帮我么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:20:48.713

要从拦截器重定向到特定操作，我执行了以下操作：

```
response.sendRedirect("specificAction.action");
return null; 
```

在这种情况下不需要全局结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T20:08:48.143

您可以通过使用[Http Header](https://struts.apache.org/core-developers/httpheader-result.html)结果类型来做到这一点。这将起作用，因为到浏览器的重定向指令只是一个状态代码加上“位置”标题。

```
<result name="startCheckout" type="httpheader">
    <param name="status">303</param>
    <param name="headers.location">${externalUrl}</param>
</result> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T10:18:48.713

这将解决您的问题。从您返回重定向的 Action 类中，targetUrl 应该是该类的成员变量，并且应该具有公共 getter 和 setter。

```
public class YourAction extends ActionSupport {
    private String targetUrl;

    public String execute() {
         return "redirect";
    }

    public String getTargetUrl() {
        return targetUrl;
    }

    public void setTargetUrl(String targetUrl) {
        this.targetUrl = targetUrl;
    }

} 
```

# c# - 实体框架4.3 DBMigrations代码先行，数据库依赖

> ID：12835793
> 
> 赞同：0
> 
> 时间：2012-10-11T08:55:10.593
> 
> 标签：c#, entity-framework, ef-code-first

我有一个代码优先模型，数据库迁移在 mysql .net 连接器 6.6.x 驱动程序上运行良好。

但是我想知道我从模型生成的迁移是否是特定于 mysql 的，或者只要我为它配置了驱动程序和 sqlgenerator，我是否应该能够将相同的 dbmigrations（包括初始创建脚本）迁移到其他数据库？

我知道它以某种方式确实使用了您正在开发的数据库模式来生成 dbmigration 步骤。虽然我不清楚为什么，因为它应该能够完全基于代码优先模型生成这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:58:53.397

DB Migrations 生成的 SQL 脚本（.sql 文件）不能针对其他数据库运行，因为该脚本将特定于运行它的数据库。

但是，您仍然可以针对不同的数据库重新生成脚本。模型是抽象的，SQL 不是（也不能是）

# jquery - JQuery 对话框：检查 beforeclose 处理程序中的调用元素

> ID：12835794
> 
> 赞同：2
> 
> 时间：2012-10-11T08:55:15.200
> 
> 标签：jquery, jquery-ui, jquery-dialog

我有一个 JQuery 对话框，它具有刷新父窗口的 beforeclose 处理程序方法：

```
$( "#dialog" ).dialog({
    beforeclose: function(event, ui) { 
       refreshParent(); 
    } 
}); 
```

对话框一旦打开，就可以从多个位置关闭。每次关闭对话框时，都会调用 refreshParent() 方法。

现在我需要检查是否在某些情况下关闭对话框，不应该调用 refreshParent()。

这样做的一种方法是放置一个如下所示的全局标志：

```
$( "#dialog" ).dialog({
    beforeclose: function(event, ui) { 
       if(doRefreshParent)
           refreshParent(); 
    } 
}); 
```

并在调用对话框关闭之前将 doRefreshParent 设置为 true 或 false。但这似乎不是一个好方法。

有什么方法可以在 beforeclose 处理程序中检查调用对话框关闭的位置（即被点击的元素的 id，因为发生了对话框关闭）。这样我们就可以控制 refreshParent() 的调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:51:04.897

对于父元素的识别，可以简单的使用一个类来区分。一个简单的效果方法。你可以找到[一个活生生的例子](http://jsfiddle.net/6FGqN/290/)

主对话框配置::

```
jQuery("#dialog").dialog({
    autoOpen: false,

    modal: true,

    open: function() {

        var id = $('.parentelement').attr('id');
        $("#dialog").html("The parent id is::"+id);
        //alert("the id is:" + id);          
    },
     close: function(){
            $('.parentelement').removeClass('parentelement'); 
    }
}); 
```

# tfs - 在 tfs 中查找分支的变更集 id 父级

> ID：12835798
> 
> 赞同：4
> 
> 时间：2012-10-11T08:55:33.717
> 
> 标签：tfs, branch

使用 TFS，有人可以告诉我如何找到 2 个分支（或主干和一个分支）共同的最后一次提交的变更集的 id 吗？

很容易找到分支的第一个变更集的 id（带有 'tf history'），但我找不到这个提交的父级 :( Tfs 似乎没有保留（或显示）这些信息！

注意：取上一个提交 id（例如：如果分支的第一个变更集 id 是 120，则为 119）不是解决方案，因为变更集 id 会随着 tfs 服务器中任何项目的任何分支上的所有提交而增加（所以上一个提交可以被另一个项目，同一个项目的另一个分支采用）

我对使用 tf 命令和 GUI 的命令行解决方案感兴趣...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T09:24:23.430

我写了一篇关于此的博客文章：http: [//netexp.blogspot.com/2012/11/tfs-who-is-father-of-my-branch.html](http://netexp.blogspot.com/2012/11/tfs-who-is-father-of-my-branch.html)

简单来说：

1.  它可以通过 Visual Studio GUI（跟踪变更集功能）来完成。您需要跟踪子分支中的第一个变更集，然后在父分支中找到最大变更集（有关详细信息，请参阅博文中的屏幕截图）。
2.  它可以通过 TFS 客户端 API 完成。
3.  您可以使用我开发的一个简单的命令行应用程序。

# jquery - jQuery - 读取标签数据

> ID：12835801
> 
> 赞同：0
> 
> 时间：2012-10-11T08:55:35.167
> 
> 标签：jquery, html

我有一个如下的 HTML 片段

```
 <li class="tab selected" data-tab-id="10">
    <a href="#"></a>
    </li>

  var tabs = $('.tab');
  tabs.click(function(e){
    e.preventDefault();
    alert(data-tab-id value here);
}); 
```

选择选项卡后，如何读取`data-tab-id`需要传递给 AJAX 以获取正确数据的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:58:37.613

尝试这个

```
var tabs = $('.tab');
   tabs.click(function(e){
   e.preventDefault();
   alert($(this).attr('data-tab-id')); //gets data-tab-id  attribute... 10
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:57:10.310

```
tabs.click(function(e) {
    e.prevetDefault();
    alert($(this).attr('id'));
}); 
```

# authentication - MVC 4：通过会话保持静态数据

> ID：12835809
> 
> 赞同：2
> 
> 时间：2012-10-11T08:56:14.810
> 
> 标签：authentication, web, asp.net-mvc-4, castle-windsor, ioc-container

在他登录到我的 ASP.Net MVC 4 网站后，我需要保留一些关于用户的静态数据。一切都挂在温莎城堡的容器中。

登录过程调用身份验证服务，该服务返回用户数据，这是会话稍后处理和其他服务调用所需的。

我看过这篇文章：[MVC Custom Authentication, Authorization, and Roles Implementation](https://stackoverflow.com/questions/8567358/mvc-custom-authentication-authorization-and-roles-implementation/8703267#8703267)。但问题是它在静态类中使用了服务定位，这是有问题的。

在这样的设置中，我应该如何存储用户数据以在整个会话中使用？

编辑：我正在使用持久性 cookie，所以当用户返回站点时，我需要以某种方式重新创建我的用户数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:30:18.650

在您的 LogOn 方法中，一旦您授权了用户并从数据库中检索了用户详细信息，您就可以将它们存储在会话中：

```
UserDetail details = ...
Session["user_details"] = details; 
```

稍后当您需要它们时：

```
UserDetail details = Session["user_details"] as UserDetail; 
```

作为替代方案，您可以编写一个自定义 MembershipProvider，如果存在，它将从会话中读取此信息，如果不存在，它将查询数据库以检索它。

另一种可能性是通过覆盖 AuthorizeCore 方法来拥有自定义 Authorize 属性，您可以在该方法中设置包含用户详细信息并从会话中读取的自定义主体。

# c++ - Qt，如何从文件中重复读取数据？

> ID：12835810
> 
> 赞同：1
> 
> 时间：2012-10-11T08:56:17.837
> 
> 标签：c++, qt

我有一个文件，我想一遍又一遍地阅读，以更新我的代码中的参数。但是使用 QTextStream 只读取一次值，然后每次都读出 0 。

这基本上是我的代码：

```
int main(){
    QString data;
    QFile Status;

    Status.setFileName("/home/user/status");
    Status.open(QIODevice::ReadOnly);

    QTextStream in(&Status);

    While(1){
        usleep(100);
        data = in.readLine();
        cout << "This is the status: " << data.toInt();
    }
return 0;
} 
```

问题是它第一次正确读取“状态”文件，但在那之后，它读出“0”......关于如何一次又一次地读出这个文件的任何想法。

在附加信息中，我的想法是更改文件的数据以更新我的应用程序状态，这是一个介于 0 和 100 之间的数字 (int)。

感谢您的任何帮助，不胜感激.. :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:58:20.547

关闭文件并再次打开它或重置读取指针。

由于您要同时对其进行编辑，因此很可能需要在读取之间关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:59:38.283

如何关闭文件并因此重新调整 i/o 源？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:05:12.397

你的代码没有意义。如果您已成功打开文件，则没有人可以打开它进行写入。

您可以修改循环：

```
While(1){
    usleep(100);
    if(status.open(QIODevice::ReadOnly) ){
        QbyteArray data = status.readline();//edited
        status.close();
        //read the first line (without newline)
        QString valueString = QString(data).section(0, '\n');
        cout << "This is the status: " << data.toInt();
    }
} 
```

if 是在文件被另一个程序打开时等待的天真尝试。

# android - AsyncTask doInBackground 参数与构造函数参数

> ID：12835814
> 
> 赞同：6
> 
> 时间：2012-10-11T08:56:25.870
> 
> 标签：android

在 doInBackground 中，我需要引用应用程序上下文或活动。

`new MyAsyncTask(getApplicationContext())`线程安全和`doInBackground(Context... params)`其他可能的多线程概念、限制之间有什么区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T19:25:01.933

不。假设你有类似的东西：

```
private class MyAsyncTask extends AsyncTask<Context, Integer, Long> {
  private Context _context = null;

  MyAsyncTask(Context context) {
    _context = context;
  }

  protected Long doInBackground(Context... context) {
     // if _context and context are the same, it doesn't matter
     // which you use.
     return 0;
  }

  protected void onProgressUpdate(Integer... progress) {
    // update progress
  }

  protected void onPostExecute(Long result) {
    // publish result
  }
} 
```

那么关于上下文本身的多线程就没有固有的问题。

```
Context useMe = getApplicationContext();
MyAsyncTask task = new MyAsyncTask(useMe);
task.execute(useMe); // should use this if provided, otherwise, what was in constructor 
```

# vxworks - vxTas 在做什么？

> ID：12835815
> 
> 赞同：0
> 
> 时间：2012-10-11T08:56:27.940
> 
> 标签：vxworks

`BOOL vxTas (void * address)`我的工作是为 Linux重新实现 vxWorks 功能

我通过谷歌找到了一些文档。对吗，vxTas 检查一个变量，如果未设置，它将设置它并返回 TRUE，否则返回 FALSE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:26:55.917

它是 vxWork 对 Test-and-Set 指令的实现。

请参阅[“维基百科上的测试和设置”](http://en.wikipedia.org/wiki/Test-and-set)

# c++ - 在 C++ 中是否可以链接到使用早期版本的 Visual Studio 编译的 .lib 文件？

> ID：12835824
> 
> 赞同：1
> 
> 时间：2012-10-11T08:57:14.277
> 
> 标签：c++, linker-errors

我有一个项目，我们希望将其从 Visual Studio 6 移植到 Visual Studio 2010。

该项目依赖于预编译的第 3 方 .LIB 文件。此第 3 方库仅包含 .H 头文件（无 .CPP 文件）

我刚刚对 Visual Studio 2010 解决方案进行了快速导入，并且在链接时遇到了很多错误！

其中一些错误是指第 3 方 .lib 文件“ServerToolkitRuntimeLIB.LIB”

这是我构建的输出中的小片段：

```
1>ServerToolkitRuntimeLIB.LIB(SerialIO.obj) : error LNK2001: unresolved external symbol "void  __cdecl std::_Xlen(void)" (?_Xlen@std@@YAXXZ)
1>ServerToolkitRuntimeLIB.LIB(OPCConversions.obj) : error LNK2001: unresolved external symbol "void __cdecl std::_Xlen(void)" (?_Xlen@std@@YAXXZ)
1>ServerToolkitRuntimeLIB.LIB(OPCMemoryAS.obj) : error LNK2001: unresolved external symbol "void __cdecl std::_Xlen(void)" (?_Xlen@std@@YAXXZ)
1>ServerToolkitRuntimeLIB.LIB(OPCAddressSpace.obj) : error LNK2001: unresolved external symbol "void __cdecl std::_Xlen(void)" (?_Xlen@std@@YAXXZ)
1>ServerToolkitRuntimeLIB.LIB(OPCServer.obj) : error LNK2001: unresolved external symbol "void __cdecl std::_Xlen(void)" (?_Xlen@std@@YAXXZ) 
```

如果没有重建 3rd 方库的资源，我在这里是否处于松散状态，或者这里是否还有其他事情发生？

先感谢您。

编辑：第 3 方 .lib 最初是在 Visual Studio 6.0 中编译的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:21:51.980

如果你有 VS6，你可以尝试在那里生成一个 DLL，链接到你拥有的那个 .lib 文件，并导出必要的符号。

然后，您可以在 VS 2010 项目中动态链接该 dll，而无需使用 .lib

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:04:15.133

您的第 3 方库依赖于从 VS2010 中删除的 VS6 的一些内部实现，因此通常您不能在没有源代码的情况下使用它，但使用它有一种棘手的方式。

通常这个实现函数在 VS6 中都是开源的，你可以看到它的实现并实现你自己的版本并链接它，如果简单的链接不能解决问题你应该将你的实现编译为一个单独的 DLL 并链接它！

# linux - chmod o+rx '{}' 的含义 \

> ID：12835828
> 
> 赞同：2
> 
> 时间：2012-10-11T08:57:23.243
> 
> 标签：linux, shell, ubuntu, ubuntu-12.04

我试图弄清楚以下命令会做什么。我从 Linux shell 脚本中提取了它，当我输入它时，它会进入提示符 (>)。但我不知道在这个提示中输入什么。

```
 find ~/dev/tools/flex-4.5.0.20967 -type d -exec chmod o+rx '{}' \ 
```

我知道 find 命令的用途。它正在搜索指定的目录，检查它是否确实是一个目录并在该目录上执行 chmod 命令。我无法弄清楚的是 chmod 命令的格式。

我检查了 chmod 的手册页，但无法确定上述 chmod 格式的功能。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T09:03:35.403

检查手册页以获取`find`. 这`{} \;`是特定于`-exec`标志的`find`

出现 > 提示是因为您错过了一个 ';' 在......的最后 '\;'

```
find ~/dev/tools/flex-4.5.0.20967 -type d -exec chmod o+rx '{}' \; 
```

该命令查找下的所有子目录`~/dev/tools/flex-4.5.0.20967`。没有它，`-type d`它还将包含文件夹下的文件。

该`-exec my_command my_args1 my_args2 '{}' \;`部分通过 find 为每个匹配的结果指定，执行命令`my_command`为：

```
my_command my_args1 my_args2 matched_result 
```

`{}`替换为匹配的结果，在这种情况下是一个目录，表示`\;`参数的终止`my_command`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T09:03:57.717

`chmod`：“更改模式”，通常用于设置或更改文件权限。

o+ 为“其他人”添加权限（其他可能的值是 u(user) 和 g(group) with - (remove)

r 读取权限

x 执行权限（其他可能的值包括 w - 写权限）

`{}` 是用于`find`在正在执行的命令中指示“在此处插入当前文件名”的设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:10:18.973

要检查的手册页是 find 命令的。chmod 适用于 find 命令产生的每个目录。因此，要告诉 chmod 命令中目录的放置位置，使用“{}”语法指示。

例如，要将 find 命令生成的每个 .txt 文件移动到 ~/backup 目录：

```
find . -name "*.txt" -exec mv '{}' ~/backup \; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T09:04:49.167

find 命令搜索 ~/dev/tools/flex-4.5.0.20967 中的所有子目录。对于它在其上执行的每个找到的目录`chmod o+rx '{}'`。'{}' 符号被替换为当前找到的子目录名称。

# jenkins - 在詹金斯邮件中包含构建请求用户

> ID：12835830
> 
> 赞同：13
> 
> 时间：2012-10-11T08:57:30.733
> 
> 标签：jenkins, jenkins-plugins

构建完成后，我使用 mail-ext-plugin（Jenkins 电子邮件扩展插件）向某些用户发送电子邮件。我想在该邮件中包含开始（请求）构建的用户。- 我找不到任何适用于默认 Jenkins 变量的东西。- 我在邮件分机变量中找不到任何内容。- 我尝试构建用户变量插件来获取 $BUILD_USER

但我无法让它工作。

如何到达 $BUILD_USER、BUILD_REQUESTER、USERNAME 或类似的东西

现在我有

```
$DEFAULT_CONTENT

--

{$BUILD_USER} 
```

导致

```
zzz test GreenHat - Build # 27 - Still Failing:
Check console output....

--

{$BUILD_USER} 
```

也试过没有 {}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T09:20:30.237

我终于找到了我想要的，添加：

```
$CAUSE 
```

或者

```
${CAUSE} 
```

给

```
Started by user Jan Jansen 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-06T10:01:48.020

我意识到我在这里回答了一个 4 岁的问题，但谷歌把我带到了这里，所以其他人可能会发现这些信息很有用......

在过去几年中，Email-ext Jenkins 插件发生了许多[变化](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)，这会影响这个问题 - 例如，在 v2.38（2014 年 5 月 24 日）中：

> 为收件人提供者 (RecipientProvider) 实施了新的扩展点，这改变了添加收件人类型的方式
> 
> 不再有“请求者”“收件人”等复选框，每个都由 RecipientProvider 的实现提供

使用最新版本的插件，如果您希望向触发构建的用户发送电子邮件，您只需从“发送至”触发选项中选择“请求者”即可：

[![詹金斯截图](../Images/5df0eccb844794321249765a5efda8ff.png)](https://i.stack.imgur.com/UANtE.png)

“收件人列表”是一个硬编码列表，您也可以为工作定义它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-27T19:42:07.383

**简单的解决方案（没有任何插件/没有插件）！**

**方法1：通过Shell**

```
BUILD_TRIGGER_BY=$(curl --silent ${BUILD_URL}/api/xml | tr '<' '\n' | egrep '^userId>|^userName>' | sed 's/.*>//g' | sed -e '1s/$/ \//g' | tr '\n' ' ')
echo "BUILD_TRIGGER_BY: ${BUILD_TRIGGER_BY}" 
```

**方法 2：通过 Groovy**

```
node('master') {
BUILD_TRIGGER_BY = sh ( script: "curl --silent ${BUILD_URL}/api/xml | tr '<' '\n' | egrep '^userId>|^userName>' | sed 's/.*>//g' | sed -e '1s/\$/ \\/ /g'", returnStdout: true ).trim()
echo "BUILD_TRIGGER_BY: ${BUILD_TRIGGER_BY}"
} 
```

**方法 3：通过 Groovy**

```
BUILD_TRIGGER_BY = "${currentBuild.getBuildCauses()[0].shortDescription} / ${currentBuild.getBuildCauses()[0].userId}"
echo "BUILD_TRIGGER_BY: ${BUILD_TRIGGER_BY}" 
```

**输出：**

```
Started by user Admin / user@example.com 
```

**注意**：输出将是用户 ID 和用户名

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T17:17:57.967

在您的示例中，`{$BUILD_USER}`应该是`${BUILD_USER}`，
但即使这样，除非您安装此插件，否则它也无法工作：

[**构建用户变量插件**](https://wiki.jenkins-ci.org/display/JENKINS/Build+User+Vars+Plugin)

它为您提供以下变量：

*   BUILD_USER – 用户开始构建的全名，
*   BUILD_USER_FIRST_NAME – 用户开始构建的名字，
*   BUILD_USER_LAST_NAME – 用户开始构建的姓氏，
*   BUILD_USER_ID – 用户开始构建的 ID。

（有关详细信息，请参阅插件页面）

# jakarta-ee - 关于在 Web 上部署应用程序的错误

> ID：12835831
> 
> 赞同：0
> 
> 时间：2012-10-11T08:57:31.793
> 
> 标签：jakarta-ee, tomcat

在 tomcat 上部署基于 Web 的应用程序时出现以下错误，虽然在类路径中我添加了 spring jar，但在部署 tomcat 5.5 时仍然遇到问题，请告知

```
SEVERE: Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3743)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:736)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:448)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433) 
```

伙计们，请告诉我该怎么做，因为我在这个问题上遇到了困难。请告知是否还有其他建议你们可以建议，例如手动放置所需的罐子..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:06:47.450

如果您使用的是 Eclipse，则此错误是一个烦人的 Eclipse 错误。它时不时地发生在我身上。摆脱它：

*   做一个干净的项目。
*   打开**服务器**视图。
*   右键单击您正在使用的服务器并选择清理。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:01:23.693

您说您将弹簧罐添加到您的类路径中。请检查这些 jars 是否真的存在于**WEB-INF/lib**文件夹中。

# reporting-services - 在报告标题中显示多值 SSRS 参数

> ID：12835835
> 
> 赞同：1
> 
> 时间：2012-10-11T08:57:46.353
> 
> 标签：reporting-services, report, ssrs-2008

我在 SSRS 2008 中有一个文本多值参数，我想在报告标题中使用它。

如果我只是将它拖到标题中，当报告运行时它会显示#Error。

我需要编写什么样的表达式才能将值作为逗号分隔的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:01:32.123

多值参数是一个数组，要显示逗号分隔的列表，您需要执行以下操作：

```
=Join(Parameters!MultiValueParam.Value, ",") 
```

# vb.net - 将 .txt 链接到 Visual basic 2010 作为存储系统

> ID：12835839
> 
> 赞同：2
> 
> 时间：2012-10-11T08:58:01.173
> 
> 标签：vb.net

我正在尝试制作一个自动聊天机器人，它将从单独的 .txt 中提取随机行，这样我就可以减少笨重的代码。但是，我发现很难找到这样做的方法。任何帮助将不胜感激！抱歉，如果不是很清楚，我很乐意澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:41:20.707

您是否尝试过 my.resources 块？您可以在我的项目 -> 资源下找到它。只需添加您的字符串。在您的代码中，您可以像 dim str= my.resources.xyz 一样访问它们

然后在某处建立一个新列表：

```
 Dim mylist As New List(Of String)
    Dim ResourceSet As Resources.ResourceSet = My.Resources.ResourceManager.GetResourceSet(Globalization.CultureInfo.CurrentCulture, True, True)
    For Each Dict As DictionaryEntry In ResourceSet.OfType(Of Object)()
        If TypeOf (Dict.Value) Is String Then
            Debug.WriteLine(Dict.Key) 'outputting resource name
            mylist.Add(DirectCast(Dict.Value, String))
        End If
    Next 
```

得到一个随机数：

```
Dim RandomNumber As Integer
RandomNumber = RandomClass.Next(0, mylist.count-1) 
```

并访问列表 debug.print(mylist(randomNumber)) 的随机成员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:45:17.997

用这个！

```
 Dim mylist As New List(Of String)
Dim ResourceSet As Resources.ResourceSet = My.Resources.ResourceManager.GetResourceSetrue)
For Each Dict As DictionaryEntry In ResourceSet.OfType(Of Object)
    If TypeOf (Dict.Value) Is String Then
        Debug.WriteLine(Dict.Key) 
       mylist.Add(DirectCast(Dict.Value, String))
    End If
Next 
```

# javascript - JavaScript 中的 987 和 (987) 有什么区别？

> ID：12835842
> 
> 赞同：8
> 
> 时间：2012-10-11T08:58:06.183
> 
> 标签：javascript, prototype

我写了一个简单的扩展方法。

```
Number.prototype.toMillion = function(){
 if(!Number.isNaN){
   return this/1000000;
 }
} 
```

`987654321.toMillion()`提出：

> SyntaxError：意外的令牌非法

但`(987654321).toMillion()`有效。

`987`所以我的问题是：和有什么区别`(987)`？

仅供参考：

```
typeof(987) => returns "number" 
```

和

```
typeof((987)) still returns "number" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T09:02:43.600

解析器如何知道`.`字符后面的部分表示方法调用而不是数字的另一部分？例如：

```
10.1 // This is a number with a floating point
10.toMillion() //How does it know that this shouldn't be part of the number? 
```

因此，您不能在数字文字上调用方法。通过将文字放在括号中（[分组运算符](http://es5.github.com/#x11.1.6)），运行时将评估包含的表达式并将该方法应用于该评估的结果。

分组运算符消除了`.`字符的歧义。

* * *

**更新**

经过对规范的一些思考和调查，有充分的理由不允许使用前瞻来确定`.`字符后面的内容是数字的一部分还是属性标识符。

正如评论中提到的@CygnusX1，您可能会认为这两种情况（`.`后跟一个数字，`.`后跟一个非数字字符）可以通过使用前瞻来区分。由于标识符不能以数字开头，如果数字字符跟在 后面，则`.`它必须是数字。如果非数字字符跟`.`在 后面，它不能是数字的一部分。但这并不完全正确。

在一种情况下，非数字字符可以跟随`.`字符但仍然是数字的一部分：

```
console.log(1.e5); // Logs '100000' 
```

`e`表示后面是指数*，*可以是小写也可以是大写。出于这个原因，使用前瞻必须考虑到如果跟随的字符`.`是`e`or `E`，它仍然可以表示方法或数字的一部分。禁止在数字文字上使用属性更容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T09:02:46.697

在 JavaScript中`.`被重载。

```
123.123         // the interpreter assumes this is a floating point number
(123).123       // throws a syntax error, since an identifier
                // can't start with a number. - thanks James for pointing that out
(123).toMillion // refers to the function of the object returned by
                // the statement in braces
123.toMillion   // will throw a syntax error because a floating point number has only digits 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:03:26.977

当`987654321.toMillion()`被解析时，“句号”被解释为分数的分隔符。因此，如果您想将数字用作对象，则需要用大括号将其包裹起来。

# java - SQLite-Databasequery 成功后，Android-Cursor 保持为空

> ID：12835843
> 
> 赞同：0
> 
> 时间：2012-10-11T08:58:12.000
> 
> 标签：java, android-sqlite, android-cursor

在网上搜索 3 天并尝试不同的东西后，我的知识已经结束。我正在尝试通过光标从 Android-SQLite 数据库中获取数据。使用此 SQLCode 创建数据库：

创建表 Passwort("ref text 主键，pw text)";

错误代码是这样的：

公共字符串suchen（字符串参考）{

```
 String antwort = "";
    open();
    try {
        String rawQuery = "Select * FROM Passwort WHERE ref LIKE \"" + refe
                + "\"";
        // Cursor c= db.query("Passwort", null, DBspalten[0]+"= '"+refe+"'",
        // null, null, null, null);
        Cursor c = db.rawQuery(rawQuery, null);
        System.out.println(c.moveToFirst());
        // normaly the "antwort" would  be the second field of the Cursors first entry 
        // as told, the cursors  is always empty
        //antwort = "";
        System.out.println("testausgabe:" + " " + c.getCount());
    } catch (SQLException e) {
        System.out.println("anderer Fehler");
    }
    return antwort;
} 
```

我通过成功的插入语句插入了一个带有 ref="test" pw="QqjMs740Mg" 的条目。这个数据在数据库中是确定的，我通过数据库中的 Eclipse 插件找到了它。那么我的Cursor 的问题是什么，activ System.out.println-statment 总是提供false，这意味着Cursor 中没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:10:10.610

尝试这个：

```
String rawQuery = "Select * FROM Passwort WHERE ref LIKE '" + refe + "'"; 
```

我只是用单引号替换了双引号。所以sql查询将是：

```
SELECT * FROM Passwort WHERE ref LIKE 'your_refe_value' 
```

让我知道它是否有效。

# django-views - 如何从 Web 服务器复制/克隆虚拟环境

> ID：12835846
> 
> 赞同：0
> 
> 时间：2012-10-11T08:58:20.083
> 
> 标签：django-views

我有一个在 Web 服务器中运行的现有 Python django 项目。现在客户端需要对现有代码进行一些更改。所以我需要在我的本地机器中设置它。该项目所需的所有软件包都安装在虚拟环境中。如何将此虚拟环境复制或克隆到我的本地计算机以运行此项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:19:36.687

这很容易 - 假设您的服务器 virtualenv 在里面`~/example.org/_env/`，而您的本地项目目录是`~/Projects/example`：

您激活环境：

```
cd ~/example.org/_env/
. _env/bin/activate 
```

然后你冻结当前环境：

```
pip freeze > pip-requirements.txt 
```

然后将该文件下载到您的计算机并重建环境：

```
cd ~/Projects/example
virtualenv _env
pip install --use-mirrors -r pip-requirements.txt 
```

您的项目也可能已经有 pip-requirements.txt 文件，因此如果是这种情况，您可以忽略第一步。

如果您的机器上没有 virtualenv 二进制文件，则可以使用以下命令进行安装，例如：

```
sudo pip install virtualenv 
```

这将在系统范围内安装它

# c# - 在 Visual Studio 2012 中使用 DirectX

> ID：12835847
> 
> 赞同：11
> 
> 时间：2012-10-11T08:58:22.140
> 
> 标签：c#, visual-studio-2012, sdk, windows-8, directx

我有一些用 C# 编写的 DirectX 项目，需要专门通过 Visual Studio 2012 运行。

所有这些项目都使用名为“Microsoft.DirectX”的命名空间。

Microsoft Windows SDK 在我的 Windows 8 计算机上完全并成功安装，但是此命名空间仍然无法识别。

我的问题是，“如何结合使用 C#、Visual Studio 2012 和 MS Windows SDK 运行和开发 DirectX 应用程序？”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T09:21:07.673

我建议你看看[SharpDX](http://sharpdx.org/)。这是对 DirectX 的精简托管访问，API 与非托管版本非常相似（SharpDX 是从非托管 c++ 头文件自动构建的）。AFAIK 这是目前使用 DirectX 的最快的托管方法。

一个非常重要的事情可能是您也能够开发 Win8-Metro-Apps。AFAIK 这是不可能/允许的其他所有库。我提到这一点是因为你写了你想在 Win8 上开发/为 Win8 开发，但你没有说什么样的应用程序。Metro-Apps 比 Win8 的 Desktop-Apps 有更多限制。

如前所述，托管 DirectX 已过时。但似乎 XNA 自上一个版本 4 发布以来也不再维护。所以如果你想使用现代 DX10 或 DX11，你会被卡住，因为 XNA 使用的是 DX9。这里的一个替代方案是[ANX 框架](http://anxframework.codeplex.com/)。这个项目目前处于早期开发阶段，但对我来说似乎很有希望。ANX 可以使用 DirectX 进行渲染，在这种情况下使用 SharpDX。与 XNA（仅与 DirectX9 密切相关）相比，SharpDX 也能够使用其他渲染器（例如，用于 Linux 的 OpenGL）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T09:09:33.510

托管 DirectX 已过时且不再由 Microsoft 维护，因为它正在被[XNA](http://www.microsoft.com/en-us/download/details.aspx?id=23714)取代。支持托管 DirectX 的最后一个版本是[这个](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=10084)（2010 年 2 月发布）。

你也可以试试[SlimDX](http://slimdx.org/)：

> SlimDX 是一个免费的开源框架，使开发人员能够使用 C#、VB.NET 和 IronPython 等 .NET 技术轻松构建 DirectX 应用程序。它被设计成一个高效、简单和精益的包装器，它完全包含 Microsoft 的所有游戏和多媒体技术，并将它们公开给托管代码。所有代码都在 MIT/X11 许可下，所有内容都在知识共享署名-相同方式共享许可下。我们的最新版本是 2011 年 3 月，用户和开发人员可以在下载页面上找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:10:07.440

您可能需要[Microsoft XNA](https://www.microsoft.com/en-us/download/details.aspx?id=23714)。

# c# - 用经度和纬度查找最近的位置

> ID：12835851
> 
> 赞同：32
> 
> 时间：2012-10-11T08:58:34.107
> 
> 标签：c#, linq

我正在开发一个需要获取附近位置的应用程序，我的网络服务将接收 2 个参数（十进制经度，十进制纬度）

我有一个表格，其中位置保存在带有经度和纬度字段的数据库中，

我想检索最近的位置。

任何人都可以帮忙吗？

这是我的代码：

```
 var locations = from l in locations

     select l 
```

以下是有关此的更多详细信息：我在数据库表中有 2 个字段（decimal(18, 2) null）1 个纬度，2 个经度，

我有一个方法

```
public List<Locations>  GetLocation(decimal? Long, decimal? lat) 
{
var Loc = from l in Locations
  //// now here is how to get nearest location ? how to query?
  //// i have also tried Math.Abs(l.Lat - lat) its giving error about nullable decimal always hence i have seted decimal to nullable or converted to nullable
 //// also i have tried where (l.lat - Lat) * (l.lon - Long)  this is also giving error about can not convert decimal to bool
return Loc.ToList();
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-11T09:22:59.797

您可以先将数据库中的位置数据转换为`System.Device.Location.GeoCoordinate`，然后使用 LINQ 查找最近的位置数据。

```
var coord = new GeoCoordinate(latitude, longitude);
var nearest = locations.Select(x => new GeoCoordinate(x.Latitude, x.Longitude))
                       .OrderBy(x => x.GetDistanceTo(coord))
                       .First(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-19T21:32:23.423

要详细说明@Fung 的评论，如果您使用的是实体框架/LINQ to Entities，如果您尝试`GeoCoordinate.GetDistanceTo`在 LINQ 查询中使用该方法，您将收到运行时 NotSupportedException 消息：

*LINQ to Entities 无法识别方法 'Double GetDistanceTo(System.Device.Location.GeoCoordinate)' 方法，并且此方法无法转换为存储表达式。*

对于 Entity Framework 版本 5 或 6，另一种方法是使用[System.Data.Spatial.DbGeography](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography.aspx)类。例如：

```
DbGeography searchLocation = DbGeography.FromText(String.Format("POINT({0} {1})", longitude, latitude));

var nearbyLocations = 
    (from location in _context.Locations
     where  // (Additional filtering criteria here...)
     select new 
     {
         LocationID = location.ID,
         Address1 = location.Address1,
         City = location.City,
         State = location.State,
         Zip = location.Zip,
         Latitude = location.Latitude,
         Longitude = location.Longitude,
         Distance = searchLocation.Distance(
             DbGeography.FromText("POINT(" + location.Longitude + " " + location.Latitude + ")"))
     })
    .OrderBy(location => location.Distance)
    .ToList(); 
```

`_context`在此示例中是您先前实例化的 DbContext 实例。

虽然它目前[在 MSDN中没有记录，但](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography.distance%28v=vs.110%29.aspx)[DbGeography.Distance](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography.distance%28v=vs.110%29.aspx)方法返回的单位似乎是米。请参阅：[System.Data.Spatial DbGeography.Distance 单位？](https://stackoverflow.com/questions/13934169/system-data-spatial-dbgeography-distance-units)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T13:34:09.373

这是解决方案

```
var constValue = 57.2957795130823D

var constValue2 = 3958.75586574D;

var searchWithin = 20;

double latitude = ConversionHelper.SafeConvertToDoubleCultureInd(Latitude, 0),
                    longitude = ConversionHelper.SafeConvertToDoubleCultureInd(Longitude, 0);
var loc = (from l in DB.locations
let temp = Math.Sin(Convert.ToDouble(l.Latitude) / constValue) *  Math.Sin(Convert.ToDouble(latitude) / constValue) +
                                 Math.Cos(Convert.ToDouble(l.Latitude) / constValue) *
                                 Math.Cos(Convert.ToDouble(latitude) / constValue) *
                                 Math.Cos((Convert.ToDouble(longitude) / constValue) - (Convert.ToDouble(l.Longitude) / constValue))
                             let calMiles = (constValue2 * Math.Acos(temp > 1 ? 1 : (temp < -1 ? -1 : temp)))
                             where (l.Latitude > 0 && l.Longitude > 0)
                             orderby calMiles

select new location
  {
     Name = l.name
  });
  return loc .ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T09:02:22.290

您是否有一个有效范围，在该范围之外“命中”并不真正相关？如果是这样，请使用

```
from l in locations where ((l.lat - point.lat) * (l.lat - point.lat)) + ((l.lng - point.lng) * (l.lng - point.lng)) < (range * range) select l 
```

然后在这些结果的循环中找到具有最小平方距离值的命中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-20T12:44:55.440

```
var objAllListing = (from listing in _listingWithLanguageRepository.GetAll().Where(z => z.IsActive == true)
                                     let distance = 12742 * SqlFunctions.Asin(SqlFunctions.SquareRoot(SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (listing.Listings.Latitude - sourceLatitude)) / 2) * SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (listing.Listings.Latitude - sourceLatitude)) / 2) +
                                                        SqlFunctions.Cos((SqlFunctions.Pi() / 180) * sourceLatitude) * SqlFunctions.Cos((SqlFunctions.Pi() / 180) * (listing.Listings.Latitude)) *
                                                        SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (listing.Listings.Longitude - sourceLongitude)) / 2) * SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (listing.Listings.Longitude - sourceLongitude)) / 2)))
                                     where distance <= input.Distance

                                     select new ListingFinalResult { ListingDetail = listing, Distance = distance }).ToList();//.Take(5).OrderBy(x => x.distance).ToList(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-29T10:05:37.983

一个netcore友好的解决方案。根据需要重构。

```
public static System.Drawing.PointF getClosestPoint(System.Drawing.PointF[] points, System.Drawing.PointF query) {
    return points.OrderBy(x => distance(query, x)).First();
}

public static double distance(System.Drawing.PointF pt1, System.Drawing.PointF pt2) {
    return Math.Sqrt((pt2.Y - pt1.Y) * (pt2.Y - pt1.Y) + (pt2.X - pt1.X) * (pt2.X - pt1.X));
} 
```

# java - 打印阵列图

> ID：12835852
> 
> 赞同：2
> 
> 时间：2012-10-11T08:58:35.107
> 
> 标签：java, arrays, string, map

我正在尝试做的是记录一个`HashMap<String, Object>`包含多种对象的复合体，但我事先并不知道结构。`Map's own`toString toString`方法的唯一问题`method is that when it runs in to arrays and their own`是输出信息不足：

```
{array=[Ljava.lang.Object;@6c22c95b} 
```

我可以实现记录的最佳方法是`Map`什么？

示例代码片段：

```
public static void main(String[] args) {
    final Map<String, Object> map = new HashMap<String, Object>();
    final Object[] array = new Object[] {"hep", 1, true};
    map.put("array", array);
    System.out.println(map);
} 
```

输出：

```
{array=[Ljava.lang.Object;@6c22c95b} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:03:04.870

你有两种可能性。

首先将您的地图更改为包含集合而不是数组。`toString()`方法使用of 元素本身`AbstractCollection`创建集合元素的漂亮视图，因此如果您的元素足够好，则整个视图也将是可读的。`toString``toString`

其他可能性是遍历映射条目并用于`Arrays.toString(arr)`创建数组的字符串表示。通常记录器足够灵活，可以很容易地做到这一点，例如使用 log4j 的格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:06:29.003

好吧，您可以定义自己的贴图来扩展法线贴图并遮盖 .toString() 然后依次检查对象是否为 instanceof 数组并以不同方式处理打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:03:40.250

这确实是 Java 的黑暗角落之一。

[您可以使用Apache Commons Lang 之](https://commons.apache.org/lang/)类的外部库，它提供[`ReflectionToStringBuilder`](https://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/builder/ReflectionToStringBuilder.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T09:49:20.900

你正在解决错误的问题。使用[番石榴`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)代替数组映射，一切都会更好，包括字符串表示。如果您不想使用外部库，请使用`Map<String, List<Object>>`. 所有标准 List 实现都提供了适当的`toString()`方法。

顺便说一句，混合数组通常是代码异味。您应该尝试创建数组内容的对象表示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T09:01:28.170

您需要迭代并打印数组的内容，例如

```
 java.util.Arrays.toString(array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T09:09:33.023

除非值 Object 正确覆盖它的`toString`方法，否则您不能仅通过打印 Object 来打印有意义的日志。但是有可能使用 Java 反射。使用`java.lang.reflect`您必须获取字段（仅适用于公共字段）及其值。如果字段提到的对象不是覆盖`toString`方法，则需要再次使用反射。

```
Object object = map.get(key);
Class<?> klass = object.getClass(); // but it supports only public fields
Fields[] fields = klaa.getFields();

for (Field field: fields) {
 // get the values from the field . Check with the API
} 
```

如果这些字段是私有字段，并且您确定这些 getter 方法可用，那么您可以使用反射调用它们并打印它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-16T03:12:19.670

这里有几个可能有效的简单实用方法。

```
public static String toString(Object[] array) {
    if (array == null) return "null";
    final StringBuilder b = new StringBuilder("[");
    for (Object o : array) {
        if (b.length() > 0) b.append(", ");
        if (o == null) {
            b.append("null");
        } else if (o instanceof Map) {
            b.append(toString((Map) o));
        } else if (o.getClass().isArray()) {
            b.append(toString((Object[]) o));
        } else {
            b.append(o.toString());
        }
    }
    return b.append("]").toString();
}

public static String toString(Map map) {
    if (map == null) return "null";
    final StringBuilder b = new StringBuilder("{");
    for (Object key : map.keySet()) {
        final Object value = map.get(key);
        b.append(key).append("=");
        if (value == null) {
            b.append("null");
        } else {
            if (value.getClass().isArray()) {
                b.append(toString((Object[]) value, ", "));
            } else if (value instanceof Map) {
                b.append(toString((Map) value));
            } else {
                b.append(value);
            }
        }
    }
    return b.append("}").toString();
} 
```

这些改编自[cobbzilla-utils](https://github.com/cobbzilla/cobbzilla-utils)，我的个人方便实用程序库：

*   [https://github.com/cobbzilla/cobbzilla-utils/blob/master/src/main/java/org/cobbzilla/util/string/StringUtil.java#L227](https://github.com/cobbzilla/cobbzilla-utils/blob/master/src/main/java/org/cobbzilla/util/string/StringUtil.java#L227)
*   [https://github.com/cobbzilla/cobbzilla-utils/blob/master/src/main/java/org/cobbzilla/util/collection/ArrayUtil.java#L98](https://github.com/cobbzilla/cobbzilla-utils/blob/master/src/main/java/org/cobbzilla/util/collection/ArrayUtil.java#L98)

# sql - 使用 LIKE 运算符时的 SQL INDEX (DB2)

> ID：12835856
> 
> 赞同：4
> 
> 时间：2012-10-11T08:58:41.330
> 
> 标签：sql, indexing, db2

我知道在 Oracle 中有一个叫做 DOMAIN INDEX 的东西。但在 DB2 中如何？

我的大桌子上有声明：

```
SELECT * from TABLE where (upper(COLUMN1) like '%HGW%')) 
```

由于 UPPER 和 LIKE，COLUMN1 上的常规正常 INDEX 不会有帮助。创建一些强大的索引的语法是什么，它将影响这个 UPPER 和 LIKE 语句以获得这个查询的快速结果？我会很感激的例子和帮助。不幸的是，我无法删除第一个 % 或第二个 %。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:38:45.897

首先，每当您在列上运行类似`upper`或的函数时`lower`，该列上的索引将不会被使用，RDBMS 将诉诸全表扫描。要使索引正常工作，该列应单独保留。甚至：

```
SELECT col1 from table where col2+1 = 3 
```

不起作用，因为您正在列上运行函数（添加），因此`col2`不会使用索引（如果有）。因此，您必须将其更改为：

```
SELECT col1 from table where col2 = 3-1 
```

第二件事，当模式以通配符开头时，例如`*`or `.`，索引也不会被使用，因为您可以很容易地猜到，RDBMS 将无法知道列值以哪个字符开头。所以有两个步骤：

首先，更改您的排序规则，以便同时`foo`匹配. 这样就得到了照顾。`Foo``fOo``upper`

其次，您必须注意通配符部分。如果之前确实允许有很多字符`HG`，那么最好的办法是使用全文索引（不知道 DB2 是否有）。这个索引是专门为这些目的而构建的，全文搜索，所以你可以利用它。当然，它会消耗更多的资源，因为索引结构非常复杂，但你必须忍受它。

# java - Java Webservices 和 SOAP - 更改元素名称

> ID：12835864
> 
> 赞同：4
> 
> 时间：2012-10-11T08:59:08.783
> 
> 标签：java, web-services, soap, element

我正在编写一个返回自定义类型的 java web 服务。一切正常，除了当我查看 SOAP 响应时它不使用名称“myType” - 它使用“return”

这是我的 SOAP 响应 - 基本上它说“return”，我希望它说“mytype”

```
S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:MethodResponse xmlns:ns2="http://myWebservice/">
         <return>
            <field1>sdf</field1>
            <field2>sdf</field2>
       </return>
      </ns2:MethodResponse >
   </S:Body>
</S:Envelope> 
```

类包 myWebservice

```
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;

@WebService(serviceName = "myWebserivce")
public class myWebserivce{

    @WebMethod(operationName = "Method")
    public MyType Method(@WebParam(name = "string1") String string1, @WebParam(name = "string2") String string2) {

        MyType mt = new MyType();
        mt.setField1(string1);
        mt.setfield2(string2);

        return mt;
    }
} 
```

MyType 类

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="MyType") 
public class MyType {

    private String field1;
    private String field2;

    public String getField1() {
        return field1;
    }

    public void setField1(String field1) {
        this.field1 = field1;
    }

    public String getField2() {
        return field2;
    }

    public void setField2(String field2) {
        this.field2 = field2;
    }

} 
```

解决方案

```
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;

@WebService(serviceName = "myWebserivce")
public class myWebserivce{

    @WebMethod(operationName = "Method")
    @WebResult(name="MyType")
    public MyType Method(@WebParam(name = "string1") String string1, @WebParam(name = "string2") String string2) {

        MyType mt = new MyType();
        mt.setField1(string1);
        mt.setfield2(string2);

        return mt;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T09:23:40.220

您需要确保`myType`使用`@XmlRootElement(name="myType")`. （您可能还需要注释该方法`@WebResult(name="myType")`。

（在 Java 中，类名以大写字母开头，所以它应该是`MyType`）

# asp.net - ASP.NET 表单身份验证重定向到 IP 地址而不是域名

> ID：12835866
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:13.867
> 
> 标签：asp.net, redirect, iis-7, forms-authentication

我们为客户建立了一个 ASP.NET 网站。该站点通过名为 logon.aspx 的页面使用表单身份验证。我们在 Internet 上托管服务器，客户创建了本地 DNS 直通，以允许其用户（没有直接 Internet 访问权限）使用该站点。

只要客户直接连接到登录页面`http://my.domain.local/logon.aspx`，这就会起作用，但是如果他们尝试访问站点的根目录，他们会被重定向到`http://1.2.3.4/logon.aspx` 无法从其网络中访问的 IP 地址。

我怎样才能让这个重定向指向域名。我尝试将 logon.aspx 添加为 IIS 中站点的默认页面，但这并不能阻止重定向。我也尝试在 IIS 中设置主机名，但这不起作用。

该站点是 IIS 7 上的 .NET 3.5，并且是根网站（而不是 Web 应用程序）。我们将不胜感激地收到任何尝试的建议。

# android - 如果 Internet 连接在异步任务之间丢失，如何留在活动中

> ID：12835867
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:18.210
> 
> 标签：android

我在活动中有一个按钮。当我按下它时，它将加载另一个活动。在此活动中，我有一个自定义网格视图，每个单元格中都有描述和图像。我正在通过异步任务从远程服务器填充网格视图：

```
button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {

        if (isInternetAvailable) {
            Intent intent = new Intent(menuActivity.this,
                    gridActivity.class);
            startActivity(intent);
        }
        else {
            MyAlertDialog.ShowAlertDialog(menuActivity.this,
                                          "",
                                          "No network connection",
                                          "OK");
        }
    }
}); 
```

我在这里分享 testAsyncTask()。我在 gridActivity 的 onCreate() 中调用这个函数（第二个活动）

```
private void testAsyncTask() {
    new AsyncTask<Object, Object, Object>() {

        @Override
        protected void onPreExecute() {

            progress_Dialog = ProgressDialog.show(a, "", "Loading");
        }

        @Override
        protected Integer doInBackground(Object... params) {
            try {
                MenuService menuService = new MenuServiceImpl();
                MenuServiceResponse pMenu = menuService.getMenu();
                itemlist = pMenu.getMenu().getMenus();
                return 0;
            }
            catch (MyServiceException e) {
                MyAlertDialog.ShowAlertDialog(GridActivity.this, "", "No network connection detected.", "OK");
                e.printStackTrace();
            }
            return 0;
        }

        @Override
        protected void onPostExecute(Object result) {

            if (progress_Dialog != null) {
                progress_Dialog.dismiss();
            }

            try
            {
                adapter = new GridAdapter(
                    GridActivity.this, itemlist);
                AllitemgridView.setAdapter(adapter);

            }
            catch(Exception e)
            {
                adapter = null;
                MyAlertDialog.ShowAlertDialog(GridActivity.this, "", "Check Network Connection", "OK");
            }

        }
    }.execute();
} 
```

我正在检查我保留按钮的第一个活动中的条件。只有当我有 Internet 连接时，我才会触发启动活动。

现在进入我的问题，如果我有 Internet 连接并且我按下按钮，startacvitiy 将触发，它会移动到第二个活动。在第二个活动的 onCreate() 中，我调用了 testAsync()。现在它将显示一个加载对话框，在后台我将从远程服务器获取数据。

现在，如果我关闭调制解调器，应用程序会冻结 5-6 秒，然后它将强制关闭。那么我该如何处理这个异常呢？

doInbackgorund() 内部的编码需要 Internet 连接，这可能是我断开 Wi-Fi 时导致崩溃的原因。我该如何处理这个崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:09:58.567

你不能在 doinbackground 方法中使用这个，因为这个方法正在做另一个线程， `MyAlertDialog.ShowAlertDialog(GridActivity.this, "", "No network connection detected.", "OK");`

您只能在 onpost 方法中使用它。

或者您可以使用对话框消息：

```
 @Override
    protected Integer doInBackground(Object... params) {
        try {
            MenuService menuService = new MenuServiceImpl();
            MenuServiceResponse pMenu = menuService.getMenu();
            itemlist = pMenu.getMenu().getMenus();
            return 0;
        } catch (MyServiceException e) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    MyAlertDialog.ShowAlertDialog(GridActivity.this, "", "No network connection detected.", "OK");
                }
            });
            e.printStackTrace();
        }
    } 
```

# javascript - 区分主干模型和集合

> ID：12835868
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:21.737
> 
> 标签：javascript, python, django, backbone.js

我正在尝试通过几个文档阅读 Backbonejs。它是客户端的 MVC 框架。MVC 代表模型、视图和控制器。

我来自 django 背景，做过更多的事情。因此，我可能会通过与之相关来最好地理解。

对我来说，模型是这样的：

```
class Note(models.Model):

   title = models.CharField()
   description = models.TextField()
   date = models.DateField(auto_now_add=True)
   author = models.ForeignKey(UserProfile) 
```

现在这将为我创建一个数据库，在笔记表中我将有四列，标题、描述、日期和作者。

当我编写一个主干应用程序时，我如何定义我的模型和控制器？模型应该是什么，控制器应该是什么？请解释谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:35:49.503

模型是任何 JavaScript 应用程序的核心，包含交互式数据以及围绕它的大部分逻辑：转换、验证、计算属性和访问控制。

例子：

```
Person = Backbone.Model.extend({
    defaults: {
        name: 'Fetus',
        age: 0,
        children: []
    },
    initialize: function(){
        alert("Welcome to this world");
    }
}); 
```

Backbone 没有传统 mvc 框架中的控制器，而是使用路由器。骨干路由器用于路由您的应用程序 URL。在传统的 MVC 意义上，它们不一定符合语义

例子 ：

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "/posts/:id": "getPost",
        "*actions": "defaultRoute" // Backbone will try match the route above first
    },
    getPost: function( id ) {
        // Note the variable in the route definition being passed in here
        alert( "Get post number " + id );   
    },
    defaultRoute: function( actions ){
        alert( actions ); 
    }
}); 
```

在骨干网中，您没有数据库连接等，但您使用 Rest 与支持的服务器交互

我建议您关注这些截屏视频，它将准确地解释什么是骨干： [https ://peepcode.com/products/backbone-js](https://peepcode.com/products/backbone-js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:30:12.800

我看这个。它看起来很迟钝，但我尝试将骨干元素与 django 元素进行比较。

骨干集合相当于 Django 中的 QuerySet 对象。主干中的模型（如在 Django 中）只接受数据定义。路由器对象就像 Django URL 调度程序。视图由它们影响的元素限定范围（而不是像在 django 中那样呈现整个页面，它们会更改文档中定义的元素）

# android - 在 NFC Tap 上启动 Rhomobile 应用程序

> ID：12835870
> 
> 赞同：2
> 
> 时间：2012-10-11T08:59:24.960
> 
> 标签：android, nfc, rhomobile

全部，

当点击特定的 NFC 时，仅使用代码有什么方法可以启动应用程序？

我已经看到了一些 Andriodmanifest.xml 更改，但到目前为止还没有看到运气。

以下我在清单中所做的更改。

```
<intent-filter>  

<action android:name="android.nfc.action.NDEF_DISCOVERED"/>  

<category android:name="android.intent.category.DEFAULT"/> 

<data android:host="example.com" android:scheme="http" />

</intent-filter> 
```

NFC 标签存储了 example.com 的位置。

我在这里先向您的帮助表示感谢。

问候 ，

阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:26:11.097

谢谢 NFC 家伙。我想出了办法。这里是

```
 <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <data android:scheme="http"
                android:host="www.example.com"
                android:path="" />  
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter> 
```

# macos - 在 bash 脚本中运行 sudo 命令并使用 launchd 运行它

> ID：12835871
> 
> 赞同：7
> 
> 时间：2012-10-11T08:59:26.817
> 
> 标签：macos, bash, launchd

我有一个 bash 脚本，我想在 OS X 上使用 launchd plist 文件运行。我遇到的问题是 bash 脚本包含 sudo 命令并且它正在阻止它运行。例如，我的 bash 脚本如下所示：

```
#!/bin/bash
sudo /opt/local/bin/bindfs -u user1 /Library/WebServer/Documents/user1 /vhosts/user1/public_html
sudo /opt/local/bin/bindfs -u user2 /Library/WebServer/Documents/user2 /vhosts/user2/public_html 
```

我的 com.test.bindfs.plist 文件看起来像这样（用 Lingon 创建）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>GroupName</key>
    <string>admin</string>
    <key>Label</key>
    <string>com.jamespayne.bindfs</string>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/bin/bindfs.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
</dict>
</plist> 
```

我通过在启动后运行它并输入密码来检查脚本是否有效，但它不会在启动时运行。launchd plist 正在运行，但出现以下错误：

sudo：不存在 tty，也没有指定 askpass 程序

任何人都知道如何让这个工作或者为什么我可能会得到那个错误。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T15:55:45.817

您可能只需将属性列表移动到脚本中`/Library/LaunchDaemons/`并从脚本中删除 sudo 命令。

请参阅`man launchd`、`man launchd.plist`和[此博客文章](http://nb.nathanamy.org/2012/07/schedule-jobs-using-launchd/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-29T20:58:54.643

如果您从 Google 来到这里，希望以 sudo/root 权限运行用户登录 LaunchAgent，您可以执行以下操作：

*   `/Library/LaunchAgents`如果为所有用户`~/Library/LaunchAgents`运行或仅为单个用户运行，则放入 plist
*   让第一个`ProgramArguments`成为`sudo`，其余的成为您正在运行的命令
*   在文件中设置`NOPASSWORD`配置`/etc/sudoers.d`以允许`launchctl`在没有交互式密码提示的情况下升级您的特定命令。

有关更详细的分步演练，请参阅[此答案。](https://apple.stackexchange.com/a/288322/22055)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T12:24:54.993

`sudo`是一个交互式命令，要求用户输入密码才能继续。我可以想象`sudo`，由于无法找到 tty，它会简单地退出并出现错误。

您想要的命令是`su`，它是非交互式的，唯一的例外是您需要 root 才能运行它。但是，在您的情况下，您可能根本不需要它，因为脚本是由特权用户运行的？

另外你为什么要把脚本放进去`/usr/bin`？馊主意; 改为使用`/usr/local/bin`（或`/usr/local/sbin`如果存在）。

# rhomobile - 在 rhomobile 中的黑莓中构建错误

> ID：12835873
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:28.663
> 
> 标签：rhomobile

当我尝试在 Rhomobile 中为黑莓构建时，它会引发以下错误。

构建开始

PWD: C:\Users\Desktop\rhomobile-rhodes-system-api-samples-3.4.2-14-g78b8ea2\rhomobile-rhodes-system-api-samples-78b8ea2 CMD: rake run:bb:device cd C:/ MotorolaRhoMobileSuite2.1.1.7/ruby/lib/ruby/gems/1.9.1/gems/rhodes-3.4.2 rake 中止！不知道如何构建任务 'run:bb:device'

（通过使用 --trace 运行任务查看完整跟踪）RET：1 构建应用程序中的错误

如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T17:56:26.260

转到代码的 build.yml 文件所在的文件夹并输入 rake device:bb:production，这应该可以解决问题。

# sharepoint - 如何获取 SharePoint 2010 中库内文件夹的默认选择字段值

> ID：12835876
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:32.157
> 
> 标签：sharepoint, sharepoint-2010

我创建了一个文档库并在该库中创建了一个文件夹。然后我在这个库中添加了一个选择字段，即“水果”。此属性的选择是 Apple、Mango、Banana。在创建此属性期间，我已将“Apple”设置为默认值。保存更改。

现在，我转到库设置-> 列默认值设置，在那里我可以更改“库”和“文件夹”的默认值。我将文件夹的默认值更改为“Mango”。现在，当我在库中上传一个文档时，该文档的选择“水果”属性的值将是“Apple”。如果我在该库的文件夹中上传一个文档，则该文档的此选择属性的值将是“Mango”。

现在我的要求是以编程方式（C#）获取文件夹的默认值。我们使用 SharePoint 管理器搜索了 List 的方案，但找不到此信息。任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:58:49.123

我找到了解决方案

[http://msdn.microsoft.com/en-us/library/microsoft.office.documentmanagement.metadatadefaults_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.documentmanagement.metadatadefaults_members.aspx)

[http://www.c-sharpcorner.com/uploadfile/anavijai/programmatically-configure-location-based-metadata-defaults-in-sharepoint-2010/](http://www.c-sharpcorner.com/uploadfile/anavijai/programmatically-configure-location-based-metadata-defaults-in-sharepoint-2010/)

# excel - EXCEL 2007 SENDKEYS 检测到不明确的名称

> ID：12835878
> 
> 赞同：1
> 
> 时间：2012-10-11T08:59:39.343
> 
> 标签：excel, sendkeys, ambiguous

我正在尝试使用以下代码通过 vba 隐藏 excel 2007 中的功能区：

```
If Application.CommandBars("Ribbon").Height > 59 Then Application.SendKeys ("^{F1}"), True 
```

但 Office 帮助窗口打开并显示类似“检测到模糊名称”之类的内容。艾米的想法有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:59:52.627

它不太可能与那行代码有任何关系。

检测到不明确的名称通常意味着您有 2 个具有相同名称的子或函数

# xcode - 为什么 NSURL 查询不起作用

> ID：12835880
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:46.120
> 
> 标签：xcode, nsurl, nsurlrequest

我希望有人可以帮助我，因为我很沮丧。

我不知道为什么如果我执行：

fileURL = [NSURL URLWithString:@"http://myweb.com/my.pdf"];

然后我可以在 QLpreviewController 中正确显示文件

但如果我执行

fileURL = [NSURL URLWithString:@"http://myweb.com/download.php?Id=1"]; // 是一个pdf文件

然后文件以编码字符显示

拜托，任何人都可以帮助我吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:08:31.760

可能发生的情况是`QLPreviewController`在第一个示例中从文件名 (.pdf) 中识别内容类型，但在第二个示例中没有该信息。

如果您使用的是 PHP，您可能可以使用服务器端重写来创建以 .pdf 结尾的 URL（并在文件名中包含参数）。

# android - ListActivity 中上下文相关弹出菜单的设计模式

> ID：12835881
> 
> 赞同：2
> 
> 时间：2012-10-11T08:59:48.813
> 
> 标签：android

我有一个 ListActivity ，其行定义如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
 <TextView android:id="@+id/me_games_won"
     android:textSize="16sp"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

<TextView android:id="@+id/gamesmate_username"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
 <TextView android:id="@+id/him_games_won"
     android:textSize="16sp"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
 <ImageView
    android:id="@+id/imageMenuGamesmate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_settings" />     
</LinearLayout> 
```

根据行的某些状态，图像用于弹出或不弹出菜单。我的 ArrayAdapter 有这段代码来启动弹出菜单：

```
public View getView(int position, View convertView, ViewGroup parent) {
...
myimage.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {
PopupMenu popupMenu = new PopupMenu(v.getContext(), v);
popupMenu.getMenuInflater().inflate(R.menu.popupmenu_gamesmate, popupMenu.getMenu());
popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {

@Override
public boolean onMenuItemClick(MenuItem item) {

return true;
}
});

popupMenu.show();               
}               
}); 
```

现在，当用户单击菜单项时，将执行一个操作，但需要该行的值来正确格式化请求。

我正在寻找最好的设计模式来做到这一点？

也许继承 ListActivity 的 ListView 的行视图，但那又如何呢？也许子类化 PopupMenu 以使其保留用于创建行的数据版本？ETC...

有人有好主意吗？

干杯。大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:11:22.790

您是否将列表视图与适配器一起使用？这将使其非常容易处理，有很多关于如何做到这一点的示例（例如[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:58:27.310

一种可能的基于 YAGNI 的方法。

1.  弹出还是不弹出？我相信你对此没有任何问题。您在 getView() 中拥有所有方便的数据。所以一个简单的 if() 似乎就足够了。

2.  假设您的弹出菜单始终相同，只是操作因数据而异，您只需使菜单具有数据感知能力。为此，您需要在 onMenuItemClick() 中引用相应的数据项。要到达那里，您可以：

    *   子类化弹出菜单

    *   将位置传递给菜单的自定义构造函数

    *   使用 onMenuItemClick() 中的位置通过 adapter.getItem(int position) 检索数据项并在那里应用任何所需的逻辑

这种方法的好处是极简主义。你只传递一个整数。

PS。此外，如果你愿意，你可以很好地封装东西。

聚苯乙烯。如果您需要各种弹出菜单，您可以创建一个工厂，该工厂知道如何在从 getView() 调用时创建正确的子类。

# javascript - jQuery当函数不评估延迟对象时

> ID：12835882
> 
> 赞同：0
> 
> 时间：2012-10-11T08:59:48.767
> 
> 标签：javascript, jquery, ajax, web, deferred

我遇到了 Jquery 延迟对象的问题。我正在一个函数中创建一个承诺，该函数将执行 ajax 调用并将数据保存到服务器。我知道 jQuery ajax 有一个预定义的延迟对象。

```
var AddCodes = function(XML ){
    var def = $.Deferred();

    $.ajax({
        type: "POST",
        url: "webservicename.asmx/SaveCode",
        data: "{" + XML + "}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function () {
            def.resolve();
        },
        error: function (jqXHR, status, error) {
            def.reject();
        }
    });

   return def.promise();
} 
```

然后我正在评估这样的功能。

```
$.when(AddCodes(XML)).then(function(){
    processData();
} 
```

如果 AddCodes() 函数成功执行，我只是调用另一个函数将一些数据插入数据库。因为两者都是依赖函数。

问题是当函数不评估时， deferred`object. processData()`永远不会起作用。我第一次使用延迟到我的项目。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:13:40.730

该[文档](http://api.jquery.com/jQuery.when/)说，它`$.when()`接受延迟对象（使用`$.Deferred()` **和**普通对象创建的对象，它们被视为已经实现的承诺。

> 如果将单个参数传递给 jQuery.when 并且它不是 Deferred，它将被视为已解析的 Deferred，并且附加的任何 doneCallbacks 都将立即执行。

但`AddCodes()`不返回任何东西。如果您返回您的延迟对象 ( `def`)，这应该可以工作。

因此，如果您将代码更改为

```
var AddCodes = function(XML ){
    var def = $.Deferred();

    $.ajax({
        ....
    });

    return def.promise();
} 
```

你应该没事。请注意，这就像[这里的第一个示例](http://api.jquery.com/deferred.promise/)一样。

# c# - 如何从给定的天数中找到天数？

> ID：12835884
> 
> 赞同：0
> 
> 时间：2012-10-11T09:00:01.917
> 
> 标签：c#, sql-server, sql-server-2008

我有两个日期，想找到包括两个日期在内的天数，我尝试了这样的事情：

```
select datediff("d", '10/11/2012', '10/12/2012') 
```

它显示 1，但我希望结果为 2，因为我们有 2 天 11 和 12。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T09:01:21.667

最新版本的 SQL 引入了对添加整数的支持！耶。

```
select datediff("d", '10/11/2012', '10/12/2012') + 1
                                                ^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:41:15.033

如果您也在使用负差异进行操作，添加 1 可能无法为您提供您正在寻找的答案，您可以像这样处理这些情况：

```
declare @from datetime = '2012-10-11'
declare @to   datetime = '2012-10-10'

select datediff(day, @from, @to) 
 + case when datediff(day, @from, @to) < 0 then -1 else 1 end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:02:45.143

好吧，datediff 总是会找到 2 天之间的差异，正如您所指出的，对于您的示例，这是 1。如果您想让它包含在内，那么为什么不只对结果 +1 呢？

```
select datediff("d", '10/11/2012', '10/12/2012') + 1 
```

# javascript - 根据数据库值自定义 jQuery 移动日期框

> ID：12835890
> 
> 赞同：2
> 
> 时间：2012-10-11T09:00:19.597
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-mobile, calendar

我有一个带有 MVC.NET、MySQL、jQuery Mobile 的移动应用程序。我需要根据数据库表中的一些值自定义日期框（jQuery Mobile）。

例如，我需要一些日期，从日期框中，以绿色着色，其他为灰色，其他为红色或白色（取决于表中的值）。

这可能吗？

日期框代码：

```
@Html.Label("Date:  *")
@Html.TextBoxFor(model => model.Date, new { @Class = "calendar", @data_icon = "false", @type = "text", data_role = "datebox", data_options = "{\"mode\":\"calbox\",\"useNewStyle\": true,\"overrideStyleClass\": \"calendar\",\"fieldsOrderOverride\": [\"d\",\"m\",\"y\"],\"headerFormat\":\"%A,%d, %-m, %Y\",\"dateFormat\":\"DD-MM-YYYY\",\"useTodayButton\":true}" })
@Html.ValidationMessageFor(model => model.Date) 
```

# c# - 将 vb6 StrConv(string, vbunicode) 转换为 c#

> ID：12835894
> 
> 赞同：0
> 
> 时间：2012-10-11T09:00:35.257
> 
> 标签：c#, vb6-migration

我在将以下 VB6 代码转换为 c#4.0 时遇到问题？此函数从 oracle 数据库中获取 BLOb 并将其转换为字节。删除此示例不需要的代码后，它看起来像这样......

```
Function tempFunc(Data as Variant) as byte()

    tempFunc = StrConv(Data, vbUnicode)

End Function 
```

将函数转换为c#后...

```
byte[] tempFunc(object data) 
{ 
    ...code...
} 
```

我试图转换内线，但遇到了问题......

```
Microsoft.VisualBasic.Strings.StrConv(data, VBStrConv.???); 
```

VBStrConv 枚举中不再有 Unicode 等效标志...查找了其他一些示例并找到了这个...

```
byteData = System.Text.Encoding.UTF8.GetBytes(data); 
```

但是，这需要一个字符串，因此无济于事...找到了另一个使用内存流的示例，但是要对其进行转换，它将需要元数据，而该元数据在数据库的原始 BLOb 中不存在。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:02:57.777

您可以使用**[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)**

```
private byte[] tempFunc(object obj) 
{
    if(obj == null)
        return null;
    BinaryFormatter bf = new BinaryFormatter();
    MemoryStream ms = new MemoryStream();
    bf.Serialize(ms, obj);
    return ms.ToArray();
} 
```

# ruby-on-rails - Excel 和 Ruby 兼容性

> ID：12835896
> 
> 赞同：0
> 
> 时间：2012-10-11T09:00:36.630
> 
> 标签：ruby-on-rails, ruby, excel, csv, railscasts

我按照此[Railscasts 链接从 Rails](http://railscasts.com/episodes/362-exporting-csv-and-excel)导出 CSV 将我的 html 表（动态生成）导出到 xls，并在我执行 .xls 时下载我的 excel 文档

但是，当我在 iWork Numbers 中打开它时，我收到以下错误：

导入警告 - 这是一个制表符分隔的文档，不是有效的 Excel 文档。数据可能看起来不同。

我在文档中看到了表格的源代码。

这是我用来生成表格的代码：

```
<table border ="1">
        <tr>enter code here
    <th><%= get_column_name "#{@level1}"%></th>
    <th><%= get_column_name "#{@level2}"%></th>
    <th><%= get_column_name "#{@level3}"%></th>
    <th>abcd</th>
    </tr>
        <% @grp.each do |key, value| %>
            <% value.each do |k2, v2|%>
                <% v2.each do |k3, v3|%>
                        <tr>
                            <td><% if "#{@level1}" == "abcd"  && Person.exists?(key.to_i) %><%= "#{Person.find(key.to_i).get_name}" %><% else %><%= "#{key}" %><% end %></td>
                            <td><% if "#{@level2}" == "abcd"  && Person.exists?(k2.to_i) %><%= "#{Person.find(k2.to_i).get_name}" %><% else %><%= "#{k2}" %><% end %></td>
                            <td><% if "#{@level3}" == "abcd"  && Person.exists?(k3.to_i) %><%= "#{Person.find(k3.to_i).get_name}" %><% else %><%= "#{k3}" %><% end %></td>
                            <td><%= "#{v3.count}" if !v3.nil? %></td>
                        </tr>
                <%end%>
            <%end%>
        <%end%>
</table> 
```

有人可以告诉我是数字问题还是其他问题。我是一名学生，买不起excel来检查一下。

最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:24:15.480

一种更便携的方法是只生成 CSV 或 TSV（制表符分隔）文件。如果您没有 Excel 并且不需要处理 XLS[X] 的恐怖，这绝对是一个好主意。

您链接到的 Railscast 使用[CSV](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)库提供了一种解决方案。它为您处理引用字段，这非常好，我们稍后会看到。我还将概述手动方法：

假设您在控制器中有此操作：

```
# widget_controller.rb
def index
  @widgets = Widget.ordered_by_name
  respond_to do |format|
    format.csv
  end
end 
```

然后在你的模板中这样的东西会起作用：

```
<%# index.csv.erb %>
ID,Name
<% @widgets.each do |w| %>
<%= w.id %>,<%= w.name %>
<% end %> 
```

或者更简洁地说：

```
<%# index.csv.erb %>
<%= %w(ID Name).join(",") %>
<%= @widgets.map { |w| [w.id, w.name].join(",") }.join("\n") %> 
```

您需要小心引用。例如，如果`widgets[0].name`返回`foo,bar`，您的数据将如下所示：

```
ID,Name
1,foo,bar
2,baz 
```

解决方案是只引用该字段，或者如果您不想考虑这个......使用`CSV.generate`:)。

# javascript - Node.js 异步函数 *定义*

> ID：12835900
> 
> 赞同：5
> 
> 时间：2012-10-11T09:00:46.320
> 
> 标签：javascript, node.js, asynchronous

拜托，只是为了清除我脑海中的某些东西...

我习惯于在库中使用异步函数进行编写，但如何编写自己的函数呢？

为了说明我的问题，我制作了一个名为“MadMathz”的模块

我知道以下是异步函数的示例用法：

```
//load module
var mM = require('./MadMathz');

//perform a function
mM.async_function_addthree(12, function(result) {
  console.log(result)
});

//do something straight afterwards
console.log('Logging this straight after instead of waiting for computation'); 
```

我知道该函数的第二个参数是回调，但是如何定义诸如“async_function_addthree”之类的函数？假设出于此示例的目的， async_function_addthree 只是将 3 添加到第一个参数。

我只是把自己弄糊涂了，试图写出我认为可能是的东西。我完全走错了吗？我觉得我已经接近使用 node.js 了，但这需要清理。

如果可能的话，请解释而不是将我链接到某个地方。我相信其他人将从这个问题中受益。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T09:13:45.160

实际上，在没有任何进一步描述或要求的情况下创建“*异步*”函数听起来有点奇怪。通常，使用是为了避免长时间的*阻塞*。因此，如果我们有一个触发数据库查询的函数，并且我们想在完成后调用另一个函数，则应该在作业完成*后*调用该函数，并且原始函数会立即将控制流返回给*Node* (ECMAscript) .

所以如果我们有一个像

```
function someJob( callback ) {
    // heavy work
    callback();
} 
```

现在，这段代码仍然非常*同步*地运行。为了使其处于*异步*状态，我们可以调用节点的`process.nextTick`方法

```
function someJob( callback ) {
    // heavy work
    process.nextTick( callback );
} 
```

现在发生的事情是，Node 将在稍后通过其事件循环运行时执行该*回调*方法（它也这样做有点智能）。Eventho`nextTick`声称比它更有效`setTimeout`，它几乎是相同的交易（从 ECMAscript 编码器的角度来看）。所以在浏览器中我们可以像

```
function someJob( callback ) {
    // heavy work
    setTimeout( callback, 0 );
} 
```

如果说上面的示例方法根本没有多大意义，那是正确的，因为*异步*状态发生*在*繁重的工作之后。嗯，没错。事实上，你需要把*重的部分*分解成更小的部分，并利用相同的想法来`.nextTick()`提高效率。

这也是我一开始困惑的原因，其实每一个任务都已经为你提供了回调的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:08:11.353

这不是 node.js 模块代码，但我希望你能明白。

函数是 JavaScript 中的第一类对象。这就是为什么您可以将它们分配给变量并将它们像任何值一样传递给其他函数。一旦你有一个函数的引用，你只需`()`在函数引用后面加上它来调用它。

例子：

```
function async_function_addthree(a, callback) {
    callback(a + 3);
} 
```

这将添加`3`到第一个参数，然后调用第二个参数将结果传递给它。请记住，您可以随意命名参数。重要的是第二个参数将包含一个您可以调用的函数。

**但请注意：**接受回调的函数不会自动异步。在这个例子中，代码仍然按照定义的顺序执行，即首先`async_function_addthree`，然后是回调，然后是调用之后的所有内容`async_function_addthree`，例如`console.log`.

您可以添加一个`setTimeout`并延迟调用回调：

```
function async_function_addthree(a, callback) {
    setTimeout(function() {
        callback(a + 3);
    }, 1000);
} 
```

这将在一秒钟后调用回调。Node.js 甚至内置了更好的方法，请参阅[jAndy 的回答](https://stackoverflow.com/a/12836144/218196)。

但即使您的代码不是异步的，使用回调也是一个明智的设计选择，因为它允许您轻松更改函数的行为并在以后使其异步而不破坏现有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:25:26.040

当您将一些工作委派给*外部*进程（或者可能是 Node 的 C 层中的一些工作）时，NodeJS 进程中的异步就会发生，例如数据库查询、文件系统操作。

通常在普通的 JavaScript 函数中没有异步性（Node.js 是单线程的），没有多少有效的案例。但是，如果它真的很重，并且您真的想这样做，您可以将您的工作委托给其他进程（参见 child_process.fork）或在 setTimeout 的帮助下拆分操作（让进程喘息以处理其他请求），然后确实应该将其配置为异步功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-09T15:15:15.127

我在自己寻找答案时遇到了这个问题。

基本上，要在节点中编写一个异步函数，你给它的参数之一应该是一个函数；您稍后将在异步函数中调用该函数。

然后，当人们调用您的函数时，他们将能够定义该函数。

这是我以同步方式编写但不起作用的代码示例，以及我如何将其重写为异步并实际工作。

* * *

以下代码不起作用：

```
//synchronous function that doesn't work
var google_request  = function(animal_name, sessionid){
    var options = {
        url: 'http://google.com',
        method: 'POST',
        json: {
            "animal": animal_name,
            "sessionid": sessionid
        }
    };

    request(options, function (error, response, body) {
        if (!error && response.statusCode == 200) {
            return body;
        }
    });
};

//use your function
var body = google_request("ant", "session1")
console.log(body); //this will return undefined 
```

以下代码确实有效：

```
//asynchronous function
var google_request  = function(animal_name, sessionid, callback_function){
    var options = {
        url: 'http://google.com',
        method: 'POST',
        json: {
            "animal": animal_name,
            "sessionid": sessionid
        }
    };

    request(options, function (error, response, body) {
        if (!error && response.statusCode == 200) {
            callback_function(body);
        }
    });
};

//use your function
google_request("ant", "session1", function(body){
    console.log(body); 
)}; 
```

这可能不是最简单的例子，但我对这个函数所做的更改非常简单；我向函数传递了第三个参数，称为“callback_function”，而不是返回“body”，而是在 body 上调用了 callback_function。然后在下面我以通常的“节点”方式使用我的函数，而不是同步方式。

您可能还会发现此线程提供了丰富[的信息：如何从异步调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call)

# c# - 如何将按钮值传递给控制器 ？

> ID：12835905
> 
> 赞同：8
> 
> 时间：2012-10-11T09:01:09.047
> 
> 标签：c#, asp.net-mvc

我有视图，它有两个按钮，分别是“是”和“否”。如果我点击“是”重定向一个页面，如果我点击“否”重定向到另一个页面。

这是我的看法。

```
@using (Html.BeginForm())
 { 
<table  >
 <tr>
    <td >
      Ceremony : 
    </td>
    <td>
       Ceremony at @Model.ceremony_date

    </td>
</tr>

  <tr>
            <td >
              Name :
            </td>
            <td >
               @Model.first_name  @Model.middle_name  @Model.last_name
            </td>
        </tr>
        <tr>
         <td colspan="2" >
            @Html.Partial("_DegreeDetailsByGraduand", @Model.DegreeList)
         </td>
        </tr>

        <tr>
        <td colspan="2" >
        IS information is correct ?
        </tr>
        <tr>
        <td>
         <input type="submit" id="btndegreeconfirmYes" name="btnsearch" class="searchbutton"  value="Yes" />    
         </td>  <td>
          <input type="submit" id="btndegreeconfirmNo" name="btnsearch" class="searchbutton"  value="No" /></td>  
        </tr>
</table>

 } 
```

这是我的控制器

```
[HttpPost]

        public ActionResult CheckData()
        {

            return RedirectToRoute("detailform");
        } 
```

我不知道如何在控制器中获取按钮值。我该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T09:08:34.183

为提交按钮命名，然后在控制器方法中检查提交的值：

```
<% Html.BeginForm("MyAction", "MyController", FormMethod.Post); %>
<input type="submit" name="submitButton" value="Send" />
<input type="submit" name="submitButton" value="Cancel" />
<% Html.EndForm(); %>

public class MyController : Controller {
    public ActionResult MyAction(string submitButton) {
        switch(submitButton) {
            case "Send":
                // delegate sending to another controller action

            case "Cancel":
                // call another action to perform the cancellation

            default:
                // If they've submitted the form without a submitButton, 
                // just return the view again.
                return(View());
        }
    } 
```

}

希望这可以帮助：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T09:07:46.760

我想你正在使用 MVC + razor 引擎。

这样做：

你的 2 个按钮：

```
<input type="submit" value="Yes" id="buttonYes"/>
<input type="submit" value="Cancel" id="buttonCancel"/> 
```

你的表格：

```
@using (Html.BeginForm("Method", "Controller", FormMethod.Post, new { enctype = "multipart/form-data", id = "CreateReportForm" }))
{ 
…
} 
```

将此 javascript 添加到您的表单中。使您的操作适应控制器上将重定向的操作：

```
<script type="text/javascript">

    $(document).ready(function () {
        $("#buttonYes").click(function () {
            $('form#CreateReportForm').attr({ action: "Controller/Create" });
        });
        $("#buttonCancel").click(function () {
            $('form#CreateReportForm').attr({ action: " Controller /Cancel" });
        });
    });

</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T09:12:52.117

试试这样：

```
[HttpPost]
public ActionResult CheckData(string btnSearch)
{
    if (btnSearch == "Yes") {
        // The Yes submit button was clicked
    } else if (btnSearch == "No") {
        // The No submit button was clicked
    }
    return RedirectToRoute("detailform");
} 
```

但通常最好不要针对按钮的文本进行测试，而是针对预定义的值进行测试，因为文本可能会更改并且您的控制器操作可能会中断：

```
<button type="submit" name="btnsearch" value="yes">Yeah</button>
<button type="submit" name="btnsearch" value="no">Nope, I don't want to do this</button> 
```

进而：

```
[HttpPost]
public ActionResult CheckData(string btnSearch)
{
    if (btnSearch == "yes") {
        // The Yes submit button was clicked
    } else if (btnSearch == "no") {
        // The No submit button was clicked
    }
    return RedirectToRoute("detailform");
} 
```

还有一种更好的方法，您可以根据单击的按钮分派到不同的控制器操作。退房[`this article`](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)。

你可以有一个动作等于的表单`Action`：

```
@using (Html.BeginForm("Action", "Post")) 
{
  <input type="submit" name="saveDraft" value="Save Draft" />
  <input type="submit" name="publish" value="Publish" />
} 
```

然后在相应的控制器中有 2 个控制器动作：

```
public class PostController : Controller 
{
    [HttpParamAction]
    [HttpPost]
    public ActionResult SaveDraft(...) 
    {
        // ...
    }

    [HttpParamAction]
    [HttpPost]
    public ActionResult Publish(...) 
    {
        // ...
    }
} 
```

这是自定义操作名称选择器的定义：

```
public class HttpParamActionAttribute : ActionNameSelectorAttribute 
{
    public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo) 
    {
        if (actionName.Equals(methodInfo.Name, StringComparison.InvariantCultureIgnoreCase))
        {
            return true;
        }

        if (!actionName.Equals("Action", StringComparison.InvariantCultureIgnoreCase))
        {
            return false;
        }

        var request = controllerContext.RequestContext.HttpContext.Request;
        return request[methodInfo.Name] != null;
    }
} 
```

现在取决于单击哪个提交按钮，将调用正确的控制器操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T09:04:19.820

像这样使用 FormValueRequired 属性：

```
[HttpPost]
[FormValueRequired("btndegreeconfirmYes")]        
     public ActionResult CheckData()
     {
       Response.Write(submit);                    
       return RedirectToRoute("detailform");
     } 
```

你需要改变你的标记如下：

编辑：使用两个嵌套形式

```
 @using (Html.BeginForm())
    {
      @using (Html.BeginForm())
       {
           .
           .
           .       
      <input type="submit" id="btndegreeconfirmYes" name="btndegreeconfirmYes"class="searchbutton" value="Yes" />           
       }
<input type="submit" id="btndegreeconfirmNo" name="btndegreeconfirmNo"    class="searchbutton"  value="No" /></td>
    } 
```

通过使用第一个提交按钮执行此提交表单，将仅发送其自己的值，然后您可以在 FromValueRquired 属性中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-03T13:03:00.353

您可以创建一个处理程序，以便您的控制器可以根据提交元素名称路由您的帖子。

[http://stevenbey.com/enable-multiple-submit-buttons-in-aspnet-mvc](http://stevenbey.com/enable-multiple-submit-buttons-in-aspnet-mvc)

例如，控制器可以处理名为“Action_Publish”的提交元素，如下所示：

```
[HttpPost, FormAction(Prefix = "Action_")]    
public ActionResult Publish()    
{        
//...  
} 
```

# php - php 数组没有正确递增。

> ID：12835908
> 
> 赞同：2
> 
> 时间：2012-10-11T09:01:19.270
> 
> 标签：php

在我的 php 代码中，我运行了一堆 shell 脚本，最终输出以下内容

```
['October 20, 2003', '047085815X', '978-\n0470858158', '1', u'\nWireless Foresight: Scenarios of the Mobile World in 2015 [Hardcover]\n'] 
```

上面的输出保存到 $temp。

但是，当我执行 echo $temp[0] 时，它会打印第一个左括号并 echo $temp[1] 打印单引号等.....

我相信这是因为它是一个字符串而不是一个数组。

如果每个元素都用逗号分隔，我想将其转换为 n 数组。

但是，请注意 2003 年 10 月 20 日中有一个逗号，并且应该保留它自己的元素。

有人可以指出我在寻找什么功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:04:44.400

修剪打开和关闭 []，然后使用[str_getcsv()](http://www.php.net/manual/en/function.str-getcsv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:04:25.973

我认为这是您正在寻找的功能

[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)

快速示例

```
$line = "'October 20, 2003', '047085815X', '978-\n0470858158', '1', '\nWireless     Foresight: Scenarios of the Mobile World in 2015 [Hardcover]\n'";

$parsed = str_getcsv(
  $line, # Input line
  ",",   # Delimiter
  "'"   # Enclosure
);

print_r($parsed); 
```

输出：

```
Array ( [0] => October 20, 2003 [1] => 047085815X [2] => 978- 0470858158 [3] => 1 [4] => Wireless Foresight: Scenarios of the Mobile World in 2015 [Hardcover] ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:41:13.557

您的输入看起来非常像一个 js 数组，除了神秘`u`符号位于单引号之外，其他所有答案似乎都忽略了它。我也会。如果将单引号更改为双引号，则可以使用函数从 js`json_decode`中获取**php数组。**

```
$str = '["October 20, 2003", "047085815X", "978-\n0470858158", "1", "\nWireless Foresight: Scenarios of the Mobile World in 2015 [Hardcover]\n"]';
print_r(json_decode($str)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T09:05:52.453

您所拥有的似乎更接近于 javascript 数组。我不知道你的 shell 脚本是如何工作的，但我知道 php 数组是如何形成的；您需要以下内容来形成一个 php 数组：

```
$temp = array('item1','item2','etc'); 
```

所以对你来说，我会输出以下内容，减去方括号：

```
$temp = array('October 20, 2003', '047085815X', '978-\n0470858158', '1', '\nWireless Foresight: Scenarios of the Mobile World in 2015 [Hardcover]\n'); 
```

然后 $temp[0] 将返回正确的信息。

# java - Jackson - 由于构造函数导致的 JsonMappingException

> ID：12835911
> 
> 赞同：28
> 
> 时间：2012-10-11T09:01:23.587
> 
> 标签：java, json, jackson, gson

尝试反序列化 JSON 时出现以下异常

> 找不到适合类型的构造函数，`[simple type, class MyObj$obj$Card]:`无法从 JSON 对象实例化（需要添加/启用类型信息？）在`[Source: java.io.StringReader@4344ee21; line: 1, column: 201]`（通过引用链`MyObj["obj"]->Obj["cards"]`：）

JSON是

```
{
  "obj":{
  "api":"OK",
  "cache":false,
  "cards":[
     {
        "id":1232995897,
        "items":[
           {
              "id":"vmdSJLpnY",
              "cat":50,
              "rating":0.0
           }
        ]
     },
     {
        "id":0005897,
        "items":[
           {
              "id":"vxdSJLpnY",
              "cat":50,
              "rating":0.0
           }
        ]
     }
 ]
 }
} 
```

在`Obj`课堂上我有以下陈述

`@JsonProperty("cards") private Card[] cards;`

这会产生上述异常。将类型更改`Card[]`为`Object[]`不会产生异常，但它缺少我想要获得的正确映射。

任何线索我该如何解决？一个片段会很棒！这个错误到底意味着什么？

**更新**

我已经包含了 Java 类。

```
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.google.gson.Gson;

@JsonIgnoreProperties(ignoreUnknown=true)
public final class MyObj {
    @JsonIgnoreProperties(ignoreUnknown=true)
    public final class Obj {
        @JsonIgnoreProperties(ignoreUnknown=true)
        public final class Card {
            @JsonIgnoreProperties(ignoreUnknown=true)
            public final class Item {
                @JsonProperty("id") private String id;
                @JsonProperty("cat") private String cat;
                @JsonProperty("rating") private String rating;
                public final String getId() { return id; }
                public final String getCat() { return cat; }
                public final String getRating() { return ranting; }
                public final String toString() { return new Gson().toJson(this); }
            }

            @JsonProperty("items") private Item[] items;
            public final Item[] getItems() { return items; }
            public final String toString() { return new Gson().toJson(this); }
        }

        @JsonProperty("cards") private Card[] cards;
        public Card[] getCards() { return cards; }
        public final String toString() { return new Gson().toJson(this); }      
    }

    @JsonProperty("obj") MyObj obj;
    public final Card[] getCards(){ return apiServiceResultsNoLists.getCards(); }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-11T09:17:50.410

我认为问题很可能出在**Card**对象上

*   它可能没有**默认构造函数**
*   如果它没有默认构造函数，则应使用**[@JsonCreator进行注释](http://www.cowtowncoder.com/blog/archives/2011/07/entry_457.html)**

**编辑** 我有两件事：
*你没有二传手。
*您没有可以设置您的文件的公共构造函数。

如果你不给它任何（合法*）手段，反序列化器应该如何填充你的字段？

解决方案：
-> 将公共设置器添加到类中
-> 或创建带有 @JsonCreator 注释的参数化构造函数

*：当然，解析器可以做反射性的“修改可见性”技巧，但是拜托，这不是“它的播放方式”

**EDIT2** 我认为这应该可行，但我无法测试它 - 我手头没有一个项目，杰克逊现在正确设置（这只是其中的一部分，但我认为很容易解释我想要的显示。）注意，我将数组更改为列表：

```
 @JsonIgnoreProperties(ignoreUnknown=true)     
public final class Card {     
    @JsonIgnoreProperties(ignoreUnknown=true)

    public final class Item {     
        @JsonProperty("id") private String id;     
        @JsonProperty("cat") private String cat;     
        @JsonProperty("rating") private String rating;     

        @JsonCreator
        public Item(@JsonProperty("id") String id, @JsonProperty("cat") String cat, @JsonProperty("rating") String rating) {
            this.id = id;
            this.cat = cat;
            this.rating = rating;
        }   

        public final String getId() { return id; }     
        public final String getCat() { return cat; }     
        public final String getRating() { return ranting; }     
        public final String toString() { return new Gson().toJson(this); }     
    }     
    @JsonProperty("items") private List<Item> items;     

    @JsonCreator
    public Card(@JsonProperty("items") List<Item> items) {
        this.items = items;
    }       

    public final List<Item> getItems() { return items; }     

    public final String toString() { return new Gson().toJson(this); }     
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-14T16:30:45.327

前几天我有同样的症状并接受了建议`JsonCreator`，`JsonProperty`但我得到了同样的错误信息。事实证明，我正在从事的项目使用的是 fastxml 和 codehaus 的 jackson 版本。我将 codehaus 属性放在我的类上，但使用 fasterxml 的 ObjectMapper 进行解析。他们喜欢传递依赖。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-05T19:08:19.100

我一直面临着同样的问题。我的 Json 数据集如下

```
{
“计数”：1917，
  “数据”： [
    {
      “id”：“1”，
      "generated_id": "Z1-1156",
      "first_name": "Maruf",
      "last_name": "艾哈迈德",
      "full_name": "Maruf Ahmed 先生",
      “电子邮件”：“maruf1990@gmail.com”，
      "电话": "+8801676798306",
      "company_name": "SM Style Ltd.",
      "网站": "http:\\/\\/smartex-bd.com\\/",
      "地址": "\\\n路号：5 楼号：18\\\n等级：3\\\n车道：\\\n街区：F\\\n扇区：2\\\n地区：米尔普尔\\\n达卡1216 \\\nMirpur\\\n孟加拉国",
      "industry_type": "服装零售商",
      "job_title": "设计师",
      “部门”：“研发”，
      “日期”：“7\\/10\\/2015 下午 1:04:43”
    },
    {
      “id”：“2”，
      "generated_id": "Z2-1157",
      "first_name": "Akramul",
      "last_name": "Hoque",
      "full_name": "Akramul Hoque 先生",
      “电子邮件”：“akram@nassagroup.org”，
      "电话": "+8801732005564",
      "company_name": "纳萨集团",
      "网站": "www,nassagroup.org",
      "地址": "纳萨集团\\\n路号：238门牌号：\\\n层级：\\\n车道：\\\n地块：\\\n扇区：\\\n地区：高尔山里\\\n达卡1208\ \\nTejgaon 工业区\\\n孟加拉国",
      "industry_type": "牛仔服装制造商",
      "job_title": "跟单员（高级）",
      “部门”：“销售”，
      “日期”：“7\\/9\\/2015 晚上 10:56:22”
    }
    ]
}

```

```
 @JsonIgnoreProperties(ignoreUnknown = true)
    public class Visitors {

      @JsonIgnoreProperties(ignoreUnknown = true)
      public static class Visitor{
        @JsonProperty("id")
        public String mId;

        @JsonProperty("generated_id")
        public String mGenId;

        @JsonProperty("first_name")
        public String mFirstName;

        @JsonProperty("last_name")
        public String mLastName;

        @JsonProperty("full_name")
        public String mFullName;

        @JsonProperty("email")
        public String mEmail;

        @JsonProperty("phone")
        public String mPhone;

        @JsonProperty("company_name")
        public String mCompanyName;

        @JsonProperty("website")
        public String mWebsite;

        @JsonProperty("address")
        public String mAdress;

        @JsonProperty("industry_type")
        public String mIndustryType;

        @JsonProperty("job_title")
        public String mJobtitle;

        @JsonProperty("department")
        public String mDepartment;

        @JsonProperty("date")
        public String mDate;

        public Visitor(@JsonProperty("id") String  Id,
                       @JsonProperty("generated_id") String  GenId,
                       @JsonProperty("first_name") String  FirstName,
                       @JsonProperty("last_name") String  LastName,
                       @JsonProperty("full_name") String  FullName,
                       @JsonProperty("email") String  Email,
                       @JsonProperty("phone") String  Phone,
                       @JsonProperty("company_name") String  CompanyName,
                       @JsonProperty("website") String  Website,
                       @JsonProperty("address") String  Adress,
                       @JsonProperty("industry_type") String  IndustryType,
                       @JsonProperty("job_title") String  Jobtitle,
                       @JsonProperty("department") String  Department,
                       @JsonProperty("date") String  date)
        {
          mId = Id;
          mGenId = GenId;
          mFirstName = FirstName;
          mLastName= LastName;
          mFullName= FullName;
          mEmail= Email;
          mPhone= Phone;
          mCompanyName= CompanyName;
          mWebsite= Website;
          mAdress= Adress;
          mIndustryType= IndustryType;
          mJobtitle= Jobtitle;
          mDepartment= Department;
          mDate= date;
        }
      }

      @JsonProperty("count") public String mCount;

      @JsonProperty("data")  public ArrayList<Visitor> mVisitorList;

      @JsonCreator
      public Visitors(  @JsonProperty("count") String Count,
                        @JsonProperty("data") ArrayList<Visitor> visitorList)
      {
        mCount = Count;
        mVisitorList = visitorList;
      }
    } 
```

问题是内部类声明，它应该是静态的。因为杰克逊需要像访问它一样

```
new Visitors.Visitor(); 
```

所以我将内部`Visitor`类声明为`static`. 它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-11T09:15:21.553

我认为您在其中一个类中缺少默认构造函数。
或者：将 @JsonCreator 注释添加到构造函数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T09:15:47.413

查看您的 Card 类 - 很可能没有可访问的默认构造函数或构造函数缺少正确的映射。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-23T10:26:36.780

将默认构造函数添加到类和所有嵌套的用户定义类。它应该工作。

# text - 在 VBScript 中读取 txt 文件中的特定文本

> ID：12835912
> 
> 赞同：0
> 
> 时间：2012-10-11T09:01:25.503
> 
> 标签：text, vbscript

我有一个包含 5 行的 txt 文件。我想阅读第 1 行和第 5 行，但我不想阅读第一个单词，所以这里有一个 txt 文件包含的示例：

```
Title:        [Abo Manten] Kyuusho seme maniacs vol. 3 (Weak Spot Maniacs vol.3)
Upload Time:  2012-08-29 15:20
Uploaded By:  Hairs Fan
Downloaded:   2012-09-17 12:11
Tags:         swimsuit, abo manten, femdom, cbt, footjob 
```

所以我想读第一行但我不想读这个词**标题：**同样的事情发生在第 5 行我不想读这个词**标签：**

到目前为止，我的代码只读取了第一行和第五行。第 5 行也用逗号分隔文本。我不知道如何使第 1 行和第 5 行不阅读特定的单词。

```
Set f = CreateObject("Scripting.FileSystemObject").OpenTextFile("C:\PATH\TO\your.txt", 1)
line1 = f.ReadLine
f.SkipLine
f.SkipLine
f.SkipLine
line5 = Split(f.ReadLine, ",")
f.Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:10:57.473

```
Set f = CreateObject("Scripting.FileSystemObject").OpenTextFile("test.txt", 1)
line1 = replace(f.ReadLine,"Title:","")
f.SkipLine
f.SkipLine
f.SkipLine
line5 = Split(replace(f.ReadLine,"Tags:",""), ",")
f.Close 
```

这将替换特定行的标题和标签。

干杯! 阿米特 C.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:54:25.717

另一种选择是在第一个冒号处拆分行：

```
Set f = CreateObject("Scripting.FileSystemObject").OpenTextFile("test.txt", 1)
line1 = Trim(Split(f.ReadLine, ":", 2)(1))
f.SkipLine
f.SkipLine
f.SkipLine
line5 = Split(Trim(Split(f.ReadLine, ":", 2)(1)), ", ")
f.Close 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:43:36.727

'使用替换值工具。这简单。假设你有一个价值线，它=“我是个大人物”。

'如果你运行以下代码：

线=替换（线，“大”，“”）

'这是fline的结果值：

msgbox fline '这是“我是男人”

'干杯！

# map - 将graphviz绘制到地图

> ID：12835916
> 
> 赞同：2
> 
> 时间：2012-10-11T09:01:38.130
> 
> 标签：map, latitude-longitude, graphviz

我有一组给定节点的纬度和经度值。我已将这些纬度、经度投影到 x、y 并将它们提供给 .dot 代码并使用 graphviz 2.29 生成图形。命令是：

```
neato -Tpng -o sample.png sourcegv.dot 
```

输出图为： [http ://www.freeimagehosting.net/brpnt](http://www.freeimagehosting.net/brpnt)

生成此图的源代码是：

```
digraph {
rankdir=LR;

subgraph cluster1{

label="cluster 1" 

node[style=filled,color=cornflowerblue, fontcolor=white]
edge[arrowhead=vee,  color=maroon] 

n0[label="192.168.8.9" pos = "69.0,15.5!"];
n1[label="192.168.8.8" pos = "70.25,12.75!"];
n2[label="192.168.8.6" pos = "78.0,9.5!"];

 n0 -> n1 ;
 n1 -> n2 ;
 n0 -> n2 ;
 n2 -> n1 ;
 n2 -> n0 ;
 n1 -> n0 ;
};

subgraph cluster2{

label="cluster 2" 

node[style=filled,color=cornflowerblue, fontcolor=white]
edge[arrowhead=vee,  color=maroon] 

m0[label="192.168.8.9" pos = "70.5,18.25!"];
m1[label="192.168.8.8" pos = "75.25,17.75!"];
m2[label="192.168.8.6" pos = "70.25,16.5!"];

 m0 -> m1;
 m1 -> m2 ;
 m0 -> m2 ;
 m2 -> m1 ;
 m2 -> m0 ;
 m1 -> m0 ;
};

} 
```

我正在寻找一些方法，以便可以在**真实地图**（如 google earth 或 googlemap）中绘制图形，以便将节点固定到经纬度给定的位置。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:01:21.160

不幸的是，Graphviz 是不适合这项工作的工具。它用于图表，而不是地图。但是，有一些非常好的选择：

1.  Matplotlib 的[底图](http://matplotlib.org/)：它是用 Python 编写的，但你只需要知道一点就可以使用它。Matplotlib 有大量[示例](http://matplotlib.org/gallery.html)，但很容易找到好的教程。这里[也是 Basemap 包的一个很好的教程](http://www.packtpub.com/article/plotting-geographical-data-using-basemap)。

2.  [Google Maps API](https://developers.google.com/maps/documentation/)：您只需将标签、纬度和经度传递给 API 以绘制标记。您也可以生成[静态图像](https://developers.google.com/maps/documentation/staticmaps/)或交互式地图。

3.  为了完整起见，您可能需要查看 JavaScript 库，例如[Cartographer.js](http://cartographer.visualmotive.com/)或[Polymaps](http://polymaps.org/)

遗憾的是，这些都不像`dot`语言那么简单，但 Matplotlib 非常接近。

# .net - 从使用 .NET 代码的 C++/CLI DLL 导出 C 函数

> ID：12835924
> 
> 赞同：4
> 
> 时间：2012-10-11T09:02:18.363
> 
> 标签：.net, c, interop, c++-cli

我有一个使用一些托管代码（用 C# 编写）的 C++/CLI DLL。我想从 DLL 中导出一个纯 C 函数 - 它将使用`LoadLibrary`和从非托管代码中调用`GetProcAddress`。

在导出的函数中，我只需要创建一个实例并调用 C# 类的一种方法。所以我尝试了这个：

```
extern "C" __declspec( dllexport ) int __stdcall DoWork(
       const wchar_t* Param1,
       int Param2,
       void* Param3)
{
    WorkerNamespace::ManagedClass1 worker;
    return worker.DoWork( gcnew String(Param1), Param2, IntPtr( Param3 ) );
} 
```

它编译得很好，但是当我这样做时`dumpbin CompiledDll.dll /exports`，没有导出函数。

我尝试`#pragma unmanaged`在函数声明之前添加，但随后在主体内使用托管类型时出现错误。

如果我用一个空存根（只是`return 1;`）和用替换函数的主体`#pragma unmanaged`，该函数**仍然**不会出现在`dumpbin`. 那么我做错了什么？如何从 C++/CLI 类库项目中导出 C 函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T11:00:36.903

应该是配置问题。`Empty project`我使用模板创建了一个新项目，更改了

`Configuration Type`到`Dynamic Library (.dll)`

`Common Language Runtime Support`到`Common Language Runtime Support (/clr)`

在常规配置中并添加了对`System.Core`我的 C# 程序集的引用`Common Properties`，它现在可以工作了。

我还添加了一个 .DEF 文件来处理名称修改（当然，def 文件的名称应该设置为`Linker -> Input -> Module Definition file`）。

```
LIBRARY
EXPORTS
DoWork 
```

希望对其他人有所帮助。

# c# - 从 ViewModel 获取 [key] 属性

> ID：12835926
> 
> 赞同：5
> 
> 时间：2012-10-11T09:02:30.097
> 
> 标签：c#, annotations, key

我有一个具有`[key]`属性的 ViewModel，我想从该视图模型的实例中获取它。

我的代码看起来像这样（虚构模型）

```
class AddressViewModel
{
    [Key]
    [ScaffoldColumn(false)]
    public int UserID { get; set; } // Foreignkey to UserViewModel
}

// ... somewhere else i do:
var addressModel = new AddressViewModel();
addressModel.HowToGetTheKey..?? 
```

所以我需要`UserID`从 ViewModel 中获取（在这种情况下）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T09:08:49.893

[如果您对示例中的任何代码感到困惑或困惑，只需发表评论，我会尽力提供帮助。]

总之，您对使用***反射***来遍历类型的元数据以获取具有分配给它们的给定属性的属性很感兴趣。

以下只是执行此操作的*一种*方法（还有许多其他方法以及许多提供类似功能的方法）。

取自我在评论中链接的[这个问题：](https://stackoverflow.com/questions/390594/c-sharp-setting-property-values-through-reflection-with-attributes)

```
PropertyInfo[] properties = viewModelInstance.GetType().GetProperties();

foreach (PropertyInfo property in properties)
{
    var attribute = Attribute.GetCustomAttribute(property, typeof(KeyAttribute)) 
        as KeyAttribute;

    if (attribute != null) // This property has a KeyAttribute
    {
         // Do something, to read from the property:
         object val = property.GetValue(viewModelInstance);
    }
} 
```

正如 Jon 所说，处理多个`KeyAttribute`声明以避免问题。此代码还假设您正在装饰`public`属性（不是非公共属性或字段）并且需要`System.Reflection`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:19:29.237

您可以使用反射来实现这一点：

```
 AddressViewModel avm = new AddressViewModel();
       Type t = avm.GetType();
       object value = null;
       PropertyInfo keyProperty= null;
       foreach (PropertyInfo pi in t.GetProperties())
           {
           object[] attrs = pi.GetCustomAttributes(typeof(KeyAttribute), false);
           if (attrs != null && attrs.Length == 1)
               {
               keyProperty = pi;
               break;
               }
           }
       if (keyProperty != null)
           {
           value =  keyProperty.GetValue(avm, null);
           } 
```

# jquery - 我想通过单击单选按钮刷新我的 jsp 页面

> ID：12835928
> 
> 赞同：1
> 
> 时间：2012-10-11T09:02:35.060
> 
> 标签：jquery

我想在单击单选按钮时刷新我的 jsp 页面，而不刷新单击单选按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:07:27.930

如果您的意思是要刷新页面并在刷新后单击相同的单选按钮，则必须恢复它：

```
$(function(){
    // restoration :
    var clicked = localStorage['clicked'];
    if (clicked) $('input:radio[name="'+clicked'"]').attr('checked',true);

   // save and refresh :
   $('input:radio').click(function(){
       localStorage['clicked'] = this.name;
       location.reload();
   }
}); 
```

# backup - Elasticsearch 热备份策略

> ID：12835937
> 
> 赞同：21
> 
> 时间：2012-10-11T09:02:59.223
> 
> 标签：backup, elasticsearch

如果有人可以分享他最好的“热备份”策略，那将会很有趣`ElasticSearch`。

此外，请随时分享与此问题相关的工具和库，并可以提供帮助。

**更新：** 感谢@javanna 的回复，它非常完整，为进一步的行动提供了良好的方向。

我还进行了一项小型研究，发现了一些文章/讨论，如果有人感兴趣，它们会有所帮助。

*   [Elasticsearch 备份策略](http://www.dark.ca/2011/11/22/elasticsearch-backup-strategies/)
*   [在 github:gist 上](https://gist.github.com/1939828)[备份/恢复 Elasticsearch 索引](http://tech.superhappykittymeow.com/?p=296)和相关代码段
*   [弹性搜索备份和恢复](http://elasticsearch-users.115913.n3.nabble.com/Elastic-Search-Backup-and-Recovery-td4020442.html)讨论（查看 Paul Smith 的评论，他还分享了一个有用的链接到他的[工具来验证索引](https://github.com/Aconex/scrutineer)）

**更新：** Elasticsearch 1.0 有一个“官方”备份解决方案 -[快照/恢复 API](http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/modules-snapshots.html)，这是现在唯一正确的方法。ElasticSearch 将识别主分片并注意一致性。备份将以增量方式完成，因此您将能够非常快速且尽可能频繁地进行备份。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T17:35:37.757

副本是一种备份，elasticsearch 永远不会在原始主分片所在的同一节点上分配副本。但是仍然存在丢失数据的风险，具体取决于集群中有多少分片、副本和节点。

我会看一下[网关](http://www.elasticsearch.org/guide/reference/modules/gateway/)模块，通过它您可以保存索引和集群元数据。有不同类型的网关。例如，我会查看[Shared FS](http://www.elasticsearch.org/guide/reference/modules/gateway/fs/)，它允许您将索引和元数据复制到在所有节点之间共享的文件系统。您还可以通过[网关快照 API](http://www.elasticsearch.org/guide/reference/api/admin-indices-gateway-snapshot/)手动启动快照。

[此外，通过index.translog.disable_flush 索引设置](http://www.elasticsearch.org/guide/reference/api/admin-indices-update-settings/)禁用刷新后，您可以复制数据目录（在每个节点上）。这样，您将确保在复制时不会发出 lucene 提交。制作副本后，您需要再次启用刷新。

**更新**

除本地网关类型外，所有网关类型均已弃用，并将在未来版本中删除。Elasticsearch 1.0 将发布一个更好的备份解决方案。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-11-01T23:37:17.680

因此，这与 ElasticSearch 的工作方式背道而驰，但我会考虑拥有 2 个彼此不了解的独立 ElasticSearch 实例。在您的应用程序代码中，每个命令都会发送到两个实例。如果 1 个实例的命令失败，请在 1 分钟后重试该命令，然后继续重试。现在您可以保留其中 1 个实例作为热备份，或者您甚至可以使用它来通过负载平衡 2 个实例之间的查询来提高性能。

我不喜欢在 ElasticSearch 中设置副本的原因是配置哪个节点获取哪个副本很痛苦，而且如果您将来想要重新安排组织，您基本上必须经历很多麻烦。ElasticSearch 在幕后进行了大量的重新平衡，并尝试为您做所有事情。这可能很好..如果您拥有强大的服务器并且不在乎什么得到什么..但否则可能会很痛苦。

# c# - 在 asp.net 中单击按钮时未打开弹出窗口

> ID：12835938
> 
> 赞同：1
> 
> 时间：2012-10-11T09:02:59.357
> 
> 标签：c#, asp.net, button, popup

我有一个示例 asp.net 按钮，我正在为其编写点击事件并尝试打开一个新的弹出窗口，由于某种原因弹出窗口没有打开，请我知道问题是否与浏览器或代码有关

测试.aspx

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script language="javascript" type="text/javascript">

        function openNewWin(url) {

            var x = window.open(url, 'mynewwin', 'width=600,height=600,toolbar=1');

            x.focus();

        }

</script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
     <asp:Button ID="btnOpenPop" runat="server" Text="Open Pop"           

        onclick="btnOpenPop_Click" />
    </div>
    </form>
</body>
</html> 
```

测试.cs

```
public partial class Test : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnOpenPop_Click(object sender, EventArgs e)
        {
            string url = "http://www.dotnetcurry.com";

             ClientScript.RegisterStartupScript(this.GetType(), "OpenWin", "<script>openNewWin('" + url + "')</script>");

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T09:20:44.283

RegisterStartupScript 用于注册应该在页面加载（客户端）上运行的脚本。请改用 RegisterClientScript。

但是你为什么要回发来运行一个 javascript 函数呢？而不是尝试在服务器端执行代码，而是在客户端执行：

```
<asp:Button ID="btnOpenPop" runat="server" Text="Open Pop" OnClientClick="openNewWin(<%= URL %>)" /> 
```

并将 URL 声明为您的类中的属性：

```
public partial class Test : System.Web.UI.Page
{
    public string URL {get;set;}
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-04T20:26:41.653

将此 Javascript 放在头部

```
 <script type="text/javascript">
            function popup(url) {
                var width = 600;
                var height = 600;
                var left = (screen.width - width) / 2;
                var top = (screen.height - height) / 2;
                var params = 'width=' + width + ', height=' + height;
                params += ', top=' + top + ', left=' + left;
                params += ', toolbar=no';
                params += ', menubar=no';
                params += ', resizable=yes';
                params += ', directories=no';
                params += ', scrollbars=no';
                params += ', status=no';
                params += ', location=no';
                newwin = window.open(url, 'd', params);
                if (window.focus) {
                    newwin.focus()
                }
                return false;
            }     
        </script> 
```

现在在按钮点击上调用它

```
 <asp:Button ID="Button2" runat="server" 
             OnClientClick="popup('addNewClients.aspx');" 
             Text="Add New Clients" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:11:54.630

您是否尝试在`openNewWin`通话后添加分号？像这样

```
"<script>openNewWin('" + url + "');</script>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T05:28:17.230

使用脚本管理器

```
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "", "<script>$(function () {$('#popupID').modal({show:true,keyboard: false, backdrop: 'static'});});</script>", false); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-11T09:18:28.107

使用 jquery 作为弹出窗口，

```
$('#btnOpenPop).bind('click',function() { 

var x = window.open(url, 'mynewwin', 'width=600,height=600,toolbar=1'); 

 x.focus(); 

}); 
```

# mongodb - 在 mongoosejs 中有几个参数的 Mongodb .sort 等价物是什么？

> ID：12835941
> 
> 赞同：0
> 
> 时间：2012-10-11T09:03:05.120
> 
> 标签：mongodb, mongoose

假设我有集合 foo：

```
> db.foo.find()
{ "_id" : ObjectId("5076865a72da558dd40c819d"), "a" : 1, "b" : 5 }
{ "_id" : ObjectId("5076866f5c70b3b37c048494"), "a" : 2, "b" : 4 }
{ "_id" : ObjectId("5076866f5c70b3b37c048495"), "a" : 3, "b" : 6 }
{ "_id" : ObjectId("507686835c70b3b37c048496"), "a" : 0, "b" : 4 } 
```

我想按 排序`b`，然后按`a`：

```
> db.foo.find().sort({b:-1,a:-1})
{ "_id" : ObjectId("5076866f5c70b3b37c048495"), "a" : 3, "b" : 6 }
{ "_id" : ObjectId("5076865a72da558dd40c819d"), "a" : 1, "b" : 5 }
{ "_id" : ObjectId("5076866f5c70b3b37c048494"), "a" : 2, "b" : 4 }
{ "_id" : ObjectId("507686835c70b3b37c048496"), "a" : 0, "b" : 4 } 
```

显然，传递给 sort() 的哈希保留了键的顺序：

```
> db.foo.find().sort({a:-1,b:-1})
{ "_id" : ObjectId("5076866f5c70b3b37c048495"), "a" : 3, "b" : 6 }
{ "_id" : ObjectId("5076866f5c70b3b37c048494"), "a" : 2, "b" : 4 }
{ "_id" : ObjectId("5076865a72da558dd40c819d"), "a" : 1, "b" : 5 }
{ "_id" : ObjectId("507686835c70b3b37c048496"), "a" : 0, "b" : 4 } 
```

我需要的是在使用 mongoosejs 作为 DB 包装器的 Node.js 应用程序中复制这种行为。我知道我可以使用一个排序参数

```
Foo.find({},[],{sort:{b:-1}}, callback) 
```

有两个参数让我感到困惑，`Foo.find({},[],{sort:{b:-1, a:-1}}, callback)`并`Foo.find({},[],{sort:{a:-1, b:-1}}, callback)`以相同的顺序（按 排序`a`）返回元素 - 因为它应该，因为显然哈希/对象没有键顺序。

我知道你可以传递数组（例如`['b','a']`），但我仍然不确定如何设置反向顺序：`['-b','-a']`虽然被 mongoosejs 识别，但按直接顺序排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:28:19.767

在 Mongoose 3.x 中，您可以将字符串传递给[Query#sort](http://mongoosejs.com/docs/api.html#query_Query-sort)来执行此操作：

```
Foo.find().sort('-b -a').exec(callback); 
```

# r - R中数据框中的快速替换值

> ID：12835942
> 
> 赞同：20
> 
> 时间：2012-10-11T09:03:10.383
> 
> 标签：r, replace, dataframe

我有一个 150,000 行的数据框，其中 2,000 列包含值，其中一些是负数。我将这些负值替换为 0，但这样做非常慢（约 60 分钟或更长时间）。

`df[df < 0] = 0`

`df[,1441:1453]`看起来像（所有列/值都是数字）：

```
 V1441 V1442 V1443 V1444 V1445 V1446 V1447 V1448 V1449 V1450 V1451 V1452 V1453
1     3     1     0     4     4    -2     0     3    12     5    17    34    27
2     0     1     0     7     0     0     0     1     0     0     0     0     0
3     0     2     0     1     2     3     6     1     2     1    -6     3     1
4     1     2     3     6     1     2     1    -6     3     1    -4     1     0
5     1     2     1    -6     3     1    -4     1     0     0     1     0     0
6     1     0     0     1     0     0     0     0     0     0     1     2     2 
```

有没有办法加快这样的过程，例如我这样做的方式非常慢，并且有更快的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-11T09:15:26.087

尝试将您的 df 转换为矩阵。

```
df <- data.frame(a=rnorm(1000),b=rnorm(1000))
m <- as.matrix(df)
m[m<0] <- 0
df <- as.data.frame(m) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-17T00:46:33.140

`m`您的原始方法和当前答案都在创建时创建了一个与(或`df`)大小相同的对象`m<0`（矩阵方法更快，因为`[<-`与`[<-.data.frame`

您可以使用`lapply`and `replace`，然后您只看一个向量或`length (nrow(df))`每次而不是复制太多

```
df <- as.data.frame(lapply(df, function(x){replace(x, x <0,0)}) 
```

上面的代码应该是相当高效的。

如果您使用`data.table`，则该方法的大部分内存（和）时间效率低下`data.frame`都会被消除。对于像您这样的大数据情况，这将是理想的选择。

```
library(data.table)
# this really shouldn't be 
DT <- lapply(df, function(x){replace(x, x <0,0)})
# change to data.table
setattr(DT, 'class', c('data.table','data.frame'))
# or 
# DT <- as.data.table(df, function(x){replace(x, x <0,0)}) 
```

您可以在所有列上设置键，然后通过引用替换小于 0 的键值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-29T11:04:36.507

另一个 data.table 答案可能会更快，并且绝对应该消耗更少的内存。

```
library(data.table)
set.seed(108)
d = data.table(a=rnorm(1000),b=rnorm(1000))
set.colwise = function(x, i, j, value) {
  replace_dot_j = function(e, j) {
    if (is.symbol(e) && identical(e, as.symbol(".j"))) return(j)
    if (is.call(e)) {
      if (e[[1L]] == ".j") e[[1L]] = j
      for (i in seq_along(e)[-1L]) if (!is.null(e[[i]])) e[[i]] = replace_dot_j(e[[i]], j)
    }
    e
  }
  for (jj in j) eval(substitute(
    set(x, .i, .j, value),
    list(
      .i=replace_dot_j(substitute(i), jj),
      .j=jj
    )
  ))
  invisible(x)
}
d
set.colwise(d, i = which(d[[.j]] < 0), j = c("a","b"), value = 0)
d 
```

`.j`参数中使用的符号`i`被迭代并替换为`j`参数中的列。

# android - 如何在我的 Android 应用程序中使用 Flash 内容？

> ID：12835947
> 
> 赞同：0
> 
> 时间：2012-10-11T09:03:23.613
> 
> 标签：android, flash, obfuscation

我正在开发 Android 应用程序，我需要了解有关使用 Flash 技术的一些细节——我的公司有很多 Flash 内容，这些内容已经开发了 3 年。现在我们决定制作一个 Android 应用程序，并且我们想将这些内容添加到应用程序中。但我读过一些文章，其中告诉 Android (Google) 已决定取消对这项技术的支持。所以，现在我很困惑——Flash 会在我的 Android >=4.0 应用程序中工作吗？另外，请告诉我，是否有任何标准的方法来混淆 Android 资源（我们想保护我们独特的内容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:04:11.713

关于混淆阅读这篇文章......在你的项目中使用它没有问题这里有[一个链接](http://android-developers.blogspot.com/2010/09/proguard-android-and-licensing-server.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+blogspot%2FhsDu+%28Android+Developers+Blog%29)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:05:10.147

抱歉，Flash 不适用于 Android 设备。您可以创建一个 Adob​​e Air 应用程序来将 Flash 应用程序引入 Android 设备。

但是从长远来看，花时间创建 HTML5 替代品可能更有意义。

塞巴斯蒂安

# wpf - 首次使用 WPF 中的 WCF 非常慢

> ID：12835949
> 
> 赞同：11
> 
> 时间：2012-10-11T09:03:27.787
> 
> 标签：wpf, wcf, performance, startup, datacontractserializer

几天来，我一直在为我们的 WPF 应用程序问题而苦苦挣扎，我想知道是否有人以前遇到过这个问题并且可以提供帮助？问题似乎归结为客户端生成“即时”序列化程序来处理该 Web 方法调用中的类型。当第一次调用该方法时（Web 服务本身已经在运行），它可能需要例如 8 秒，后续调用可能需要例如 20 毫秒。在此延迟期间，客户端 WPF 进程上的 CPU 非常高。

使用 XmlSerializer 时，有一种方法可以使用 svcutil 预先生成这些序列化程序程序集。当（就像我们一样）使用普通的 WCF DataContractSerializer 时，这个选项似乎不存在。

我想要的是能够为我的所有数据合约（很多）中的所有类型预先生成这个程序集，或者，用我可以编码并以二进制形式传递数据的自定义程序替换这个过程（我们拥有此 Web 服务/客户端的两端，它们都是 .NET 4)。我已经使用了 BinaryForamtter 和 GZip 压缩，虽然这加快了数据的传输，但它总是被恢复为 XML 以由框架反序列化，因此这个问题仍然存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T09:27:11.447

您可以使用诸如[protobuf-net](http://code.google.com/p/protobuf-net/)之类的二进制库，它非常快，即使由于必须为每种类型生成代码而存在初始启动成本，但它仍然[比`DataContractSerializer`or`BinaryFormatter`](http://code.google.com/p/protobuf-net/wiki/Performance)好得多。您应该获得几秒钟的时间并获得整体更流畅的体验。它可以很[容易地与 WCF 集成](https://stackoverflow.com/a/790741/183367)。请记住，WCF 仍将检查您的各种合同以生成正确的 WSDL 和各种元数据。

还有其他可能会减慢 WCF 启动速度的因素，例如确定默认 Web 代理。如果您对它没有任何用处，请确保它`useDefaultWebProxy`在您的绑定配置中。`false`

尽管如此，您会发现无论您如何优化 WCF 启动通常都很慢。就个人而言，厌倦了在类似的场景中与缓慢作斗争（我控制了两端，并且客户端是 WPF 应用程序），我干脆放弃了 WCF 并选择了[ServiceStack](http://www.servicestack.net/) + protobuf-net。第一次调用从 2-3 秒缩短到 100 毫秒左右，所有后续的 HTTP 调用都是即时的。整体的用户体验有了很大的提升。请注意，我绝不隶属于 ServiceStack，这只是我的经验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:06:41.247

您是否通过查看生成的服务引用确认 DataContractSerializer 确实在使用？可能由于在添加服务引用操作期间存在一些架构不匹配，生成了 XmlSerializer 代码而不是默认的 DataContractSerializer，这导致了 XmlSerializer 的这种典型行为。在这种情况下，正如您所指出的 - 您可以预先生成序列化代码以改进冷启动： [//msdn.microsoft.com/en-us/library/aa751883.aspx](http://msdn.microsoft.com/en-us/library/aa751883.aspx)。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:00:42.230

您可以通过预加载 WCF 服务来改善冷启动时间...即不要等待第一个请求导致它被加载...提前加载。

*   [如何确认应用程序预热插件是否有效？](https://stackoverflow.com/questions/4786546/how-do-i-confirm-whether-application-warm-up-plugin-works)

*   [如何：避免 IIS 托管的 WCF 应用程序出现冷启动问题？](https://stackoverflow.com/questions/2290290/how-to-avoiding-cold-start-issues-with-iis-hosted-wcf-applications)

只是一些想法......“可能”有助于加快序列化领域的速度。

关于为您的服务类型预生成序列化程序集....项目|构建中有一个名为“生成序列化程序集”的选项....如果切换为“打开”，那么它会在构建时生成程序集，而不是在运行时动态。

目前尚不清楚此选项是否仅适用于基于 XMLSerializer 的序列化程序或 DataContractSerializers 的序列化程序集的预生成。您可以尝试将其切换为“开”，看看它是否有所作为。

您也可以尝试在客户端和服务器的代码中尽早执行此操作，以练习 DataContract 序列化程序......即在客户端或服务器必须处理请求之前......（不确定它是否有帮助）。

```
DataContractSerializer ps = new DataContractSerializer(typeof(Person));
DataContractSerializer cs = new DataContractSerializer(typeof(Company));
etc... 
```

为了使其更易于维护，您可以编写一个例程，使用反射来定位您打算序列化的类型，例如查找标有 DataContract ....或其他一些启发式方法...或预定义表的类型。

# objective-c - 调试核心数据迁移以比较哈希值

> ID：12835950
> 
> 赞同：8
> 
> 时间：2012-10-11T09:03:30.120
> 
> 标签：objective-c, ios, xcode, core-data, migration

我阅读了这篇关于解决令人讨厌的核心数据迁移问题的[帖子（点击） 。](https://stackoverflow.com/questions/10894383/core-data-mapping-model-version-hashes-not-matching-to-source-model-version-hash)

作者 Victor Bogdan 写道，他启用了数据迁移调试来获取实体的哈希值。这是什么意思？是否可以为迁移启用更多调试输出？还是他写了一个带有调试输出的迁移过程？

我的问题是我无法获取映射模型的实体散列来将它们与源和目标实体散列进行比较。

我在 XCode 4.5.1 上并使用 iOS6。但是我在旧版本中遇到了同样的迁移问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T16:51:55.593

要启用核心数据迁移调试模式，您需要添加

```
-com.apple.CoreData.MigrationDebug 1 
```

到您方案中的“**启动时传递的参数**”位置。

[Apple Technical Note TN2124](http://developer.apple.com/library/mac/#technotes/tn2124/)描述了这一点以及许多其他调试功能。

# wso2 - wso2 carbon - 4.0 的学生管理示例

> ID：12835960
> 
> 赞同：0
> 
> 时间：2012-10-11T09:03:48.043
> 
> 标签：wso2, wso2carbon

我已经按照[这里](http://wso2.org/premium/webinars/creating-your-own-wso2-carbon-components)的优秀教程来创建我自己的基于 carbon 3.0 的碳组件。

为了使示例在 carbon 4.0 上运行，需要对说明进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:11:02.227

您必须进行的唯一编辑是在功能级别，我们明确表示，要使此功能正常工作，您需要在运行时中使用 Carbon 4.xx 功能。

在功能 pom.xml 中，您必须执行类似的操作

```
<importFeatures>
       <importFeatureDef>org.wso2.carbon.core:4.0.0</importFeatureDef> 
```

除此之外，其余的应该可以正常工作而没有问题。有时我将样本移植到 Carbon 4.0.0 中。我附上新的拉链。附上之前我没有验证。它应该工作。

[https://docs.google.com/open?id=0Bz93FnJ8mzOrTGRweElSNWlQeU0](https://docs.google.com/open?id=0Bz93FnJ8mzOrTGRweElSNWlQeU0)

hth

# objective-c - 当我截取 UIView 的屏幕截图时，为什么会出现透明条以及如何以编程方式确定条高度？

> ID：12835961
> 
> 赞同：0
> 
> 时间：2012-10-11T09:03:52.037
> 
> 标签：objective-c, ios, xcode4.5

我做了一个简单的程序来截图

目的是为了显示一个不那么全屏的模式。截取presentingViewController 的屏幕截图，然后将其显示在背景上。

```
#import <QuartzCore/CALayer.h>

@implementation UIView (screenshot)
- (UIImage*) screenshot
{
    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return myImage;
}

@end 
```

很简单。

现在我做：[BGMDCachedProperties singleton].screenShotOfLastPresentingController = self.navigationController.view.screenshot;//截屏，放到变量中

然后我做 [[BGMDCachedProperties singleton].screenShotOfLastPresentingController saveScreenshot];

```
-(void)saveScreenshot{
    NSData * data = UIImagePNGRepresentation(self);
    NSString * documentDirectory= [BGMDApplicationsPointers applicationDocumentsDirectory];
    NSString * fileForDocumentDirectory = [documentDirectory stringByAppendingFormat:@"/%@",@"foo.png"];
    BOOL result = [data writeToFile:fileForDocumentDirectory atomically:YES];
    if (result)
    {

    }
} 
```

这就是我得到的： ![在此处输入图像描述](../Images/629151eedfdca304a4be0715dc6786df.png)

然后我显示一个模拟视图控制器，其目的是显示该图像。也许我只是误解了 foo.png 对吧？我将背景设置为红色，所以我们知道

这就是我得到的： ![在此处输入图像描述](../Images/2623c78657d05fdd6b06f462f49b2d72.png)

显然这对我的目的不起作用，因为我需要这样做：

![在此处输入图像描述](../Images/815d3b4fff18612c421d05f0fe8d00b7.png)

最后，我设法通过去掉屏幕截图的前 20 点来修复它。

```
theScreenshot = theScreenshot.crop20PointsifStatusBarShowsUp;

-(UIImage*) crop20PointsifStatusBarShowsUp
{
    if ([BGMDApplicationsPointers statusBarShowUp])
    {
        CGRect newSize = CGRectMake(0, sizeOfStatusBar, self.size.width, self.size.height-sizeOfStatusBar);
        UIImage * newImage = [self cropUIImageWithCGRect:newSize];
        return newImage;
    }
    else{
        return [self copy];
    }
} 
```

我终于成功了： ![在此处输入图像描述](../Images/971a91024de1abdade98b11d6f99e35f.png) 但是，如果用户允许个人热点，他们的状态栏将改为 40 点。

我想知道为什么透明条会出现在 navigationController.view 中，因为与所有视图一样，导航控制器只应该填充“可用”的屏幕而不是整个屏幕。

另外我怎么知道条带的大小？没有状态栏时有时为0，有时为20，有时为40。

我添加了这两个代码：

```
PO(NSStringFromCGRect(self.frame));
PO(NSStringFromCGSize(myImage.size)); 
```

并得到：

```
2012-10-12 07:57:34.627 BadgerNew[3354:907] <0x1cdc8a60 UIView+screenshot.m:(21)> NSStringFromCGRect(self.frame): {{0, 0}, {320, 431}}
2012-10-12 07:57:34.629 BadgerNew[3354:907] <0x1cdc8a60 UIView+screenshot.m:(22)> NSStringFromCGSize(myImage.size): {320, 431} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:14:23.470

我仍然不明白为什么我会得到条。似乎 navigationController.view 总是填满整个屏幕，然后有一个透明的屏幕，所以不覆盖状态栏。

例如，modalViewController 单独存在状态栏。

所以唯一好的解决方案是只计算状态栏的大小并裁剪图像。

```
-(UIImage*) crop20PointsifStatusBarShowsUp
{
    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];
    float sizeOfStatusBarVar= applicationFrame.origin.y;
    if ([BGMDApplicationsPointers statusBarShowUp])
    {
        CGRect newSize = CGRectMake(0, sizeOfStatusBarVar, self.size.width, self.size.height-sizeOfStatusBarVar);
        UIImage * newImage = [self cropUIImageWithCGRect:newSize];
        return newImage;
    }
    else{
        return [self copy];
    }
} 
```

您需要以编程方式计算它，因为如果您有私人热点，状态栏的大小通常为 40。

# azure - Windows azure 诊断代理停止工作

> ID：12835962
> 
> 赞同：5
> 
> 时间：2012-10-11T09:03:54.757
> 
> 标签：azure, azure-diagnostics

当我尝试在调试模式下在模拟器中启动 Web 角色时出现此错误。在几台机器上检查了这一点，但问题仍然存在。任何帮助都会很棒吗？我正在使用 Visual Studio 2012、Windows Azure SDK 1.7

# soap - 嵌入式设备防火墙和肥皂

> ID：12835964
> 
> 赞同：1
> 
> 时间：2012-10-11T09:03:59.793
> 
> 标签：soap, embedded, firewall

嗨，我只是想知道是否有可能让嵌入式设备运行我们可以调用的 web 服务，而无需在标准防火墙上打开额外的端口。我想可能不会。但我仍然想知道这可能吗？因此，例如，我是否可以在具有 Internet 连接的嵌入式消费产品上对 webservie 进行编程，并期望它能够在不发送安装程序来摆弄他的安全性的情况下工作。

如果不是，远程桌面如何工作？

我是安全新手，所以请原谅我的愚蠢问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:23:15.893

*   好的，我猜远程桌面将与 ssh 一起使用。好吧，我想我可以轮询一个 sql 服务器来获取消息，但这不是很优雅。任何人都对如何在不摆弄客户防火墙的情况下与嵌入式设备进行通信 vica verca 有更好的想法？

请让我知道，欢迎所有想法

# c#-4.0 - POCO 中的复杂类型在 DetectChanges/SaveChanges 中产生 NullReferenceException

> ID：12835967
> 
> 赞同：1
> 
> 时间：2012-10-11T09:04:08.897
> 
> 标签：c#-4.0, entity-framework-4, objectcontext

尝试在 EF 4.0 中保存实体时出现奇怪的行为。

只需考虑一个具有一个字符串属性的简单复杂类型。然后我有一个实体 POCO-Class（实际上是一个 STE，但这不是这里的重点），它包含这种复杂类型的几个复杂属性。

然后可以使用以下代码显示行为：

```
 var object = context.Records.Where(p => p.ID = requestedID).First();  // works
  object.ComplexProp1 = new ComplexTypeA(...);

  context.DetectChanges();  // success
  context.DetectChanges(); // NullReferenceException 
```

这段代码只是为了显示错误。它实际上是在我调用 SaveChanges() 时发生的，它在内部调用 DetectChanges()，所以我使用这段代码来重现。经过大量调试 EF 代码后，我发现在 EntityEntry.FindOriginalValue() 方法内部，第二次没有找到原始值，这导致其他地方出现异常。如果出现以下情况，则不会发生这种情况：

1.  我没有将复杂属性设置为新实例，而是设置了复杂类型本身的属性（例如：object.ComplexProp1.Value = "yes"）
2.  我使用STE方式。从上下文 1 中获取对象，将更改应用到上下文 2 并将其保存在那里。

但是始终保留复杂类型实例不是选项，STE 变体也不是。我不知道这是否是一种错误，或者我可能会改变什么来防止这个错误。有没有人至少有预感那里发生了什么？谢谢！

# php - 如何为 Limonade PHP 微框架配置 Nginx？

> ID：12835972
> 
> 赞同：1
> 
> 时间：2012-10-11T09:04:20.907
> 
> 标签：php, nginx, rewrite

Limonade PHP 微框架适用于 Nginx。但是，我想获得“漂亮的网址”功能，但我不知道如何。例如，我可以`http://a.com/?/about`毫无问题地访问，但我想`http://a.com/about`提供。

Limonade PHP 微框架提供了一个[.htacess](https://github.com/sofadesign/limonade/blob/master/examples/urlrewrite/htaccess.conf)文件来启用 Apache 中的“漂亮 url”功能，但我不知道如何使用 Nginx 来实现。

我试过了 ：

```
location / { rewrite ^(.*)$ /index.php?uri=/$1 break; } 
```

它似乎工作。我可以访问，`http://a.com/about`但是`http://a.com/?/about`服务器的响应**非常慢**，并且框架功能`url_for()`无法正常工作，所以肯定有什么遗漏。

谁能帮我找到正确的配置方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:00:26.857

这有点晚了，但在最新版本的框架中，这应该可以工作。把它放在你的 nginx.conf 中的 server {} 部分：

```
try_files $uri $uri/ /index.php?$args; 
```

此[拉取请求](https://github.com/sofadesign/limonade/pull/26)中添加了此功能。

有关更多信息，请参阅讨论选项卡中 sloonz 的评论。

# mysql - MySQL INSERT [...] SELECT 与混合数据（来自 SELECT 子句和手动插入的值）？

> ID：12835981
> 
> 赞同：1
> 
> 时间：2012-10-11T09:04:52.077
> 
> 标签：mysql, sql, select, insert, opencart

我正在尝试从基于 PHP 的电子购物车解决方案 OpenCart 修改表格。我目前的**oc_product_to_store**表中填充了我们目前提供的 1300 多种产品目录。我们创建了第二个商店，我想为每个**product_id**更新该表以使第二行指向第二个商店（因此，实际上，我想将**1**值插入到每个新行的**store_id**字段中，同时保留product_id**值**）。

我的问题是：在单个查询中是否可行？一些 ala **INSERT [...] SELECT**我通过查询获取**product_id**字段并同时“手动”指定**store_id**？

或者也许我应该尝试一个**循环**？

我有点摸不着头脑，但我觉得有点困难。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:06:09.143

所以你的意思是？

```
 INSERT oc_product_to_store (productid, storeid)
 SELECT productid, 2
 FROM oc_product_to_store 
 WHERE storedid=1 
```

（其中 1 是您现有的商店，2 是您的新商店）

# xpages - NotesXspDocument.save() 不允许访问或修改文件

> ID：12835982
> 
> 赞同：1
> 
> 时间：2012-10-11T09:04:58.287
> 
> 标签：xpages

我正在尝试保存带有附件的文档。由于我`document1.save()`在单击按钮时使用了一些计算活动，因此在 localhost 上运行时效果很好（document1 我的数据源名称）

但是如果我在服务器上运行它会给我以下错误`document1.save()`（NotesXSPDocumet）

> 执行 JavaScript 操作表达式时出错脚本解释器错误，行 = 32，列 = 25：[TypeError] 发生异常调用方法 **NotesXspDocument.save() 不允许访问或修改文件**：C:\Windows\TEMP\notes7A62B2\xsppers\5 \DAIGRDY62M 不允许访问或修改文件：C:\Windows\TEMP\notes7A62B2\xsppers\5\DAIGRDY62M

如果我的知识是正确的，在使用 xpages 文件上传控件时，XPage 首先将附件提取到临时文件夹中，然后使用该文件保存在创建的文档中。

我认为这就是在这种情况下发生的事情，xsp 无法访问附件。它与服务器和访问文件的权限有关，但我不确定......是否有人遇到过类似的事情或针对此类问题的任何解决方法或解决方案。

提前感谢您的帮助:)

**注意**：1）如果我使用简单的提交按钮，它工作正常，只有在尝试保存 NotesXspDocument 时才会出现问题。

2）如果它们不是 xPages 上的附件，它可以正常工作。3) 服务器版本为 8.5.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T06:06:23.887

1.  如果您上传文件，它首先存储在*xspupload*文件夹中。
2.  如果文件上传完成，文件将移动到*xsppers*文件夹。
3.  在*xsppers*文件夹中，有这样的子文件夹结构：*/xsppers/[SESSIONID]/[DOCUMENT-FIELDNAME]/...*。
4.  如果您保存文档，此文件夹中的文件将附加到文档中。

似乎不允许 domino 服务器访问或在*/xsppers/[SESSIONID]/*文件夹中创建新文件夹（步骤 3）。

请检查服务器上*/xsppers/*文件夹的安全设置。或者，您可以使用*xsp.persistence.dir.xsppers*属性将路径设置更改为服务器上*xsp.properties文件中的另一个路径*

# ruby-on-rails - Rails 应用程序不会使用设计删除用户帐户

> ID：12835983
> 
> 赞同：3
> 
> 时间：2012-10-11T09:04:58.480
> 
> 标签：ruby-on-rails, devise

我正在尝试从 RailsApps 项目模板创建一个预启动注册页面：[http ://railsapps.github.com/rails-prelaunch-signup/](http://railsapps.github.com/rails-prelaunch-signup/)

我已经将它部署到 Heroku 并且基本站点运行良好。你可以去这里：[http ://arcane-lake-2098.herokuapp.com](http://arcane-lake-2098.herokuapp.com)

问题是用户无法使用 app/views/devise/registrations/edit.html.erb 中的以下代码删除他/她的帐户

```
<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %>.</p> 
```

其他一切正常（创建帐户、编辑名称、密码等） - 但是当我单击“取消我的帐户”，然后在弹出窗口中单击“确定”时，它会显示“我们很抱歉，但出了点问题”。

我正在使用导轨 3.2.8

我已经搜索了所有的问答，大多数其他人似乎对路由路径有疑问。

以下是错误日志：

```
2012-10-11T09:46:49+00:00 app[web.1]: Started POST "/users/sign_in" for 49.2.27.159 at 2012-10-11 09:46:49 +0000
2012-10-11T09:46:49+00:00 heroku[router]: POST arcane-lake-2098.herokuapp.com/users/sign_in dyno=web.1 queue=0 wait=0ms service=118ms status=302 bytes=104
2012-10-11T09:46:49+00:00 app[web.1]: 
2012-10-11T09:46:49+00:00 app[web.1]: Started GET "/" for 49.2.27.159 at 2012-10-11 09:46:49 +0000
2012-10-11T09:46:49+00:00 app[web.1]: 
2012-10-11T09:46:49+00:00 heroku[router]: GET arcane-lake-2098.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=11ms status=200 bytes=1521
2012-10-11T09:46:51+00:00 app[web.1]: 
2012-10-11T09:46:51+00:00 app[web.1]: 
2012-10-11T09:46:51+00:00 app[web.1]: Started GET "/users/edit" for 49.2.27.159 at 2012-10-11 09:46:51 +0000
2012-10-11T09:46:51+00:00 heroku[router]: GET arcane-lake-2098.herokuapp.com/users/edit dyno=web.1 queue=0 wait=0ms service=15ms status=200 bytes=2949
2012-10-11T09:46:56+00:00 app[web.1]: 
2012-10-11T09:46:56+00:00 app[web.1]: 
2012-10-11T09:46:56+00:00 app[web.1]: Started DELETE "/users" for 49.2.27.159 at 2012-10-11 09:46:56 +0000
2012-10-11T09:46:57+00:00 app[web.1]: 
2012-10-11T09:46:57+00:00 app[web.1]: 
2012-10-11T09:46:57+00:00 app[web.1]: 
2012-10-11T09:46:57+00:00 app[web.1]: Hominid::APIError (<232> There is no record of "wheresclark@gmail.com" in the database):
2012-10-11T09:46:57+00:00 app[web.1]:   app/models/user.rb:69:in `remove_user_from_mailchimp'
2012-10-11T09:46:57+00:00 heroku[router]: POST arcane-lake-2098.herokuapp.com/users dyno=web.1 queue=0 wait=0ms service=436ms status=500 bytes=643 
```

随意注册并尝试取消您的帐户以了解我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:33:41.180

此错误通常意味着应用程序抛出 500 状态代码。您需要查看 [日志](https://devcenter.heroku.com/articles/logging#log-retrieval)，然后搜索精确的错误。

**更新 1**

正如 app/models/user.rb 第 69 行中的错误所说，尝试使用电子邮件“wheresclark@gmail.com”查找用户。据我了解，它使用 HominidAPI 访问远程数据库。你可能只是错过了这里的存在检查，不能肯定地说，因为它没有代码（它可能是特定于上下文的）。我认为用户在此方法执行之前已被删除，这会导致问题。

# php - php中错误处理的正确方法

> ID：12835984
> 
> 赞同：2
> 
> 时间：2012-10-11T09:05:06.590
> 
> 标签：php, error-handling

我意识到这是一个很大的话题，但我会欣赏一些关于处理错误的最佳实践方法的粗略想法，特别是在 OO PHP 中（但也对超越语言细节的良好模式感兴趣）。让我们假设这些类和应用程序是大规模的。

我也意识到最推荐的方法是使用 PHPs 异常模型，我很想知道下面的例子如何转化为这个。

**编辑**：我正在寻找的是关于如何最好地处理验证表单数据时产生的错误的想法（而不是方法被调用的错误），也许异常模型不适合这个用例**结束编辑**

特别是考虑到并非所有错误都需要立即显示/使用（可以在同一方法中抛出多个异常吗？），有些可能需要记录（我猜这是另一个问题），有些可能只有在其他依赖项是相关的真（或假），有些可能只是警告，有些可能很关键，有些可能是状态/通知。

我目前采用的方法大致如下：

```
class ClassName()
{
    public MethodName( $data, &$errors )
    {
        $e = [];

        // validate content and perform data handling
        // any errors should be added to the array $e

        if( empty( $e ) ) {
            return $processed_data;
        } else {
            $errors = $e;
            return false;
        }
    }
}

// and then calling:
$method_call = ClassName::MethodName( $data, $errors );

if( $method_call ) // do something with the data/display success message etc.
else // decide what to do with any errors 
```

焦油人，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:12:06.893

这真的取决于。不过，“正确”的 OO 方法是使用异常。已经内置了许多不同类型的异常（参见[http://www.php.net/manual/en/spl.exceptions.php](http://www.php.net/manual/en/spl.exceptions.php)），您可以定义自己的异常（参见[http://php.net/manual/ zh/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)）。

使用它们的方法可能与此类似

```
function foo($bar)
{
    if(!is_string($bar))
        throw new InvalidArgumentException("String argument expected");

    if(strlen($bar) > 50)
        throw new LengthException("String argument is too long!");
} 
```

然后，在调用代码时，使用 try/catch，例如

```
try {
     foo("hjsdkfjhkvbnsjd");
} catch(LengthException $ex) {
     // Trim the string
} catch (InvalidArgumentException $ex) {
     // Try to recover. Cast or trim or something
} catch (Exception $ex) {
     // We hit an exception we're not explicitly handling.  
     // Gracefully exit
     die($ex->Message);
} 
```

在任何情况下，只有在方法实际上被错误调用或者方法以致命方式失败时才应该抛出异常。

# xslt - 如何使用 xsl 1.0 找到最小值和最大值？

> ID：12835990
> 
> 赞同：4
> 
> 时间：2012-10-11T09:05:21.433
> 
> 标签：xslt, xslt-1.0

文件_1.xml

```
<productlist>
    <items>
        <item>Pen</item>
        <price>8</item>
    </items>
    <items>
        <item>Pen</item>
        <price>5</item>
    </items>
    <items>
        <item>Pen</item>
        <price>10</item>
    </items>
    <items>
        <item>Bag</item>
        <price>15</item>
    </items>
    <items>
        <item>Bag</item>
        <price>22</item>
    </items>
    <items>
        <item>Bag</item>
        <price>20</item>
    </items>
</productlist> 
```

文件_2.xml

```
<productlist>
    <items>
        <item>Pen</item>
    </items>
    <items>
        <item>Bag</item>
    </items>
</productlist> 
```

需要使用 xsl 1.0 输出如下所示的最大值和最小值

```
<productlist>
    <items>
        <item>Pen</item>
        <min>5</min>
        <max>10</max>
    </items>
    <items>
        <item>Bag</item>
        <min>15</min>
        <max>22</max>
    </items>
</productlist> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T10:38:21.280

排序，然后将第一项作为最小值，将最后一项作为最大值：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="data-url" select="'file_1.xml'"/>
<xsl:variable name="data-doc" select="document($data-url)"/>

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:key name="k1" match="items" use="item"/>

<xsl:template match="@* |  node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="items">
  <xsl:variable name="this" select="."/>
  <xsl:copy>
    <xsl:copy-of select="item"/>
    <xsl:for-each select="$data-doc">
      <xsl:for-each select="key('k1', $this/item)">
         <xsl:sort select="price" data-type="number" order="ascending"/>
         <xsl:if test="position() = 1">
           <min>
             <xsl:value-of select="price"/>
           </min>
         </xsl:if>
         <xsl:if test="position() = last()">
           <max>
             <xsl:value-of select="price"/>
           </max>
         </xsl:if>
       </xsl:for-each>
     </xsl:for-each>
   </xsl:copy>
 </xsl:template>

</xsl:stylesheet> 
```

当我在输入文档上使用 Saxon 6.5.5 应用上述样式表时

```
<productlist>
    <items>
        <item>Pen</item>
    </items>
    <items>
        <item>Bag</item>
    </items>
</productlist> 
```

另一个文件在哪里

```
<productlist>
    <items>
        <item>Pen</item>
        <price>8</price>
    </items>
    <items>
        <item>Pen</item>
        <price>5</price>
    </items>
    <items>
        <item>Pen</item>
        <price>10</price>
    </items>
    <items>
        <item>Bag</item>
        <price>15</price>
    </items>
    <items>
        <item>Bag</item>
        <price>22</price>
    </items>
    <items>
        <item>Bag</item>
        <price>20</price>
    </items>
</productlist> 
```

我得到了想要的结果

```
<productlist>
   <items>
      <item>Pen</item>
      <min>5</min>
      <max>10</max>
   </items>
   <items>
      <item>Bag</item>
      <min>15</min>
      <max>22</max>
   </items>
</productlist> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T11:34:34.420

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <xsl:apply-templates select="productlist"/>
    </xsl:template>
    <xsl:template match="productlist">
        <productlist>
            <xsl:variable name="intermediate">
                <xsl:for-each-group select="items" group-by="item">
                    <items>
                        <item>
                            <xsl:value-of select="item"/>
                        </item>
                        <prices>
                            <xsl:for-each select="current-group()">
                                <price>
                                    <xsl:value-of select="price"/>
                                </price>
                            </xsl:for-each>
                        </prices>
                    </items>
                </xsl:for-each-group>
            </xsl:variable>
            <xsl:for-each select="$intermediate/items">
                <items>
                    <item>
                        <xsl:value-of select="item"/>
                    </item>
                    <xsl:for-each select="prices">
                        <min>
                            <xsl:value-of select="min(price)"/>
                        </min>
                        <max>
                            <xsl:value-of select="max(price)"/>
                        </max>
                    </xsl:for-each>
                </items>
            </xsl:for-each>
        </productlist>
    </xsl:template>
</xsl:stylesheet> 
```

# javascript - 使用 Connect js res.render 不是一种方法

> ID：12835993
> 
> 赞同：1
> 
> 时间：2012-10-11T09:05:23.837
> 
> 标签：javascript, node.js, express, connect, dust.js

我编写了通过图形 API 获取 facebook 详细信息的代码。我收到了来自 facebook API 的响应，但我无法将这些响应呈现给我的 DUST 模板。

下面的代码用于渲染 DUST 模板。

```
res.render('listme', me); 
```

我收到以下错误：

```
 c:\Users\rksbala\node_modules\facebook-sdk\example\connect.js:53
              res.render('listme', me);
                  ^
    TypeError: Object #<ServerResponse> has no method 'render'
        at c:\Users\bradha\node_modules\facebook-sdk\example\connect.js:53:15
        at Facebook._graph (c:\Users\bradha\node_modules\facebook-sdk\lib\facebook.js:459:21)
        at IncomingMessage.Facebook._makeRequest.FacebookApiException.error_code (c:\Users\bradha\node_modules\facebook-sdk\lib\facebook.js:529:9)
        at IncomingMessage.EventEmitter.emit (events.js:115:20)
        at IncomingMessage._emitEnd (http.js:366:10)
        at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
        at CleartextStream.socketOnData [as ondata] (http.js:1366:20)
        at CleartextStream.CryptoStream._push (tls.js:492:27)
        at SecurePair.cycle (tls.js:846:20)
        at EncryptedStream.CryptoStream.write (tls.js:227:13) 
```

## app.js 代码：

```
 var express = require('express')
          , routes = require('routes')
          , http = require('http')
          , dust = require('dustjs-linkedin')
          , cons = require('consolidate')
          , path = require('path')
          , connect = require('connect')
          , fbsdk = require('facebook-sdk');

        var port = 8000;

        connect()
          .use(connect.favicon())
          .use(connect.cookieParser())
          .use(connect.bodyParser())
          .use(connect.methodOverride())
          .use(fbsdk.facebook({
            appId  : 'XXXXXXXXXXXXXXXXXXX',
            secret : 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
          }))

          .use(function(req, res, next) {
            var model = {title: 'PayPal :: Add Credit Card'};
            if (req.facebook.getSession()) {

              // get my graph api information
              req.facebook.api('/me', function(me) {
                var model;              
                if (me.error) {
                  res.end('An api error occured, so probably you logged out. Refresh to try it again...');
                } else {                 
                  res.render('listme', me);
                 //console.log(res);
                }
              });

            } else {
              res.end('<a href="' + req.facebook.getLoginUrl() + '">Login</a>');
            } 
          })
          .listen(port);

        console.log('Listening for http requests on port ' + port); 
```

请让我知道我犯了什么错误。

# javascript - extJS 3.3.0 网格错误，未显示 JSON 数据

> ID：12835994
> 
> 赞同：0
> 
> 时间：2012-10-11T09:05:30.483
> 
> 标签：javascript, extjs, resteasy, extjs3

我已将我的商店配置为：听到 url:pattern 是我的 resteasy webservice 应用程序路径：

```
Ext.BLANK_IMAGE_URL = '/ext-3.3.0/resources/images/default/s.gif';
var store = new Ext.data.Store({
    proxy : new Ext.data.HttpProxy({
        url:"/RestEasyDemo2/stud/student/read",
        method:"GET"
    }),
    reader: new Ext.data.JsonReader({
        fields:['id','name','address','gerder','emailId','contactNo'],
        //id:'id',
        root:'listing' // it's @XmlRootElement(name = "listing") of my list class
    })

});
store.load(); 
```

网格面板代码是，

```
var grid = new Ext.grid.GridPanel({
    store:store,
    columns:[{header:'Id', width:170 , sortable:true, dataIntex:'id'},
             {header:'NAME', width:170 , sortable:true, dataIntex:'name'},
             {header:'Address', width:150 , sortable:true, dataIntex:'address'},
             {header:'Gender', width:150 , sortable:true, dataIntex:'gender'},
             {header:'EMAIL ', width:150 , sortable:true, dataIntex:'emailId'},
             {header:'ContactNo ', width:100 , sortable:true, dataIntex:'contactNo'}
             ],
    title:'My Contacts',
    autoHeight:true,
    width:590,
    renderTo: Ext.getBody(),
    loadMask: true,
    //renderTo:document.body(),
    fram:true
}); 
```

但是，json数据没有被显示......所以请告诉我我实际缺少什么......？