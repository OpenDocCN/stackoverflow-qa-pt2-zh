# StackOverflow 问答 15289000-15289999

# scripting - VB Script 无法识别实际参数

> ID：15289000
> 
> 赞同：0
> 
> 时间：2013-03-08T07:39:14.100
> 
> 标签：scripting, vbscript, scripting-language

我有两个 VB 脚本。说**First.vbs**和**Second.vbs**。

**每次发生某些动作/事件时，**Frist.vbs 都会**调用**Second.vbs 。****

 **我正在尝试使用以下代码将两个参数从**Frist.vbs**发送到**Second.vbs ：**

**First.vbs**的内容：

```
Set objShell = Wscript.CreateObject("WScript.Shell")
param1 = "Welcome"
param2 = "Gokul Nath"
objShell.Run "Second.vbs" & " " & param1 & " " & param2
Set objShell = Nothing 
```

**Second.vbs**的内容：

```
param1= Wscript.Arguments.Item(0)
param2 = Wscript.Arguments.Item(1)
WScript.Echo(param1)
WScript.Echo(param2) 
```

我收到以下 Echo 消息：

```
Welcome - Which is correct, since I've passed "Welcome" from First.vbs
Gokul - Which is WRONG, since I've passed "Gokul Nath" from First.vbs 
```

出现此问题，因为每个空格都被视为参数的结尾。

我是脚本新手，任何人都可以提供一些建议/参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:17:01.077

的值`param2`包含一个空格，并且您没有将参数放在双引号之间。因此，您的`Run`命令行实际上有 3 个参数：

*   欢迎
*   古库尔
*   纳特

为避免在第二个参数周围添加双引号：

```
objShell.Run "Second.vbs" & " " & param1 & " """ & param2 & """" 
```

更好的是，引用*所有*参数并使用引用函数，这样你就不会被双引号淹没：

```
Function qq(str)
  qq = Chr(34) & str & Chr(34)
End Function

objShell.Run "Second.vbs" & " " & qq(param1) & " " & qq(param2) 
```**

# html - 表格随内部内容扩展

> ID：15289014
> 
> 赞同：0
> 
> 时间：2013-03-08T07:40:09.823
> 
> 标签：html, html-table

你如何防止 td 变得比表格最大宽度更宽？我无法以像素为单位设置大小，因为它用于填充表格的其余宽度。当我将 max-width 设置为 100% 时，这似乎是它的内容宽度。

```
<div class="content" style="width: 200px; max-width: 200px;">
    <table class="outer-table" style="width: 100%; max-width: 100%;">
        <tr>
            <td style="white-space: nowrap; max-width: 100%; background-color: yellow;">
                <div class="inner-div" style="width: 100%; max-width: 100%; overflow: scroll;">
                This is a table width to much content. I use "white-space: nowrap" to force it to grow wide.
                </div>
            </td>
        </tr>
    </table>
    </div> 
```

在行动中看到它：http: [//jsfiddle.net/TxqT4/1/](http://jsfiddle.net/TxqT4/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:45:37.270

只需`white-space: nowrap`从您的 td 样式中删除

使用 nowrap 属性，您将强制 td 内容保持内联，即。没有换行符，这就是它造成问题的原因

见这里[更新代码](http://jsfiddle.net/TxqT4/3/)

# android - 我无法关闭自定义警报对话框

> ID：15289016
> 
> 赞同：3
> 
> 时间：2013-03-08T07:40:15.143
> 
> 标签：android, android-alertdialog, android-custom-view, android-overlay

我需要创建一个带有两个按钮的警报对话框作为视图。我创建了它，但问题是在单击其中一个视图时执行的操作后我无法关闭它。这意味着在第一个按钮中

**这就是我要找的**

![前两个按钮是两个视图，我将它们粘贴在另一个视图中是线性布局](../Images/9ce179f02ceffef5ac78bf14297641a0.png)

**我的覆盖类**

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
       DatabaseHandler db;
       private Context context;
       double lat;
       double lon;
    // Alert Dialog Manager
    AlertDialogManager alert = new AlertDialogManager();

       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       @Override
       public boolean onTouchEvent(MotionEvent event, MapView mapView)
       {   

           if (event.getAction() == 1) {
               GeoPoint geopoint = mapView.getProjection().fromPixels(
                   (int) event.getX(),
                   (int) event.getY());
               db = new DatabaseHandler(context);
               // latitude & longtitude (double)
               lat = geopoint.getLatitudeE6() / 1E6;
               lon = geopoint.getLongitudeE6() / 1E6;

           }
        return false;
       } 

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }

       @Override
       public int size() {
          return mapOverlays.size();
       }

       @Override
       protected boolean onTap(int index) {
         OverlayItem item = mapOverlays.get(index);
         final String  title= item.getTitle();
         final String snippet= item.getSnippet();

         if(title.equalsIgnoreCase("Your Location")){

             alert.showpickAlertDialog1(context, title, snippet);

         }
         else if(title.equalsIgnoreCase("0")||title.equalsIgnoreCase("2")||title.equalsIgnoreCase("3")){
             String lati = String.valueOf(lat);
             String longi = String.valueOf(lon);        
alert.showpickAlertDialog2(context, lati, longi, snippet);
         }
         else if(title.equalsIgnoreCase("1")||title.equalsIgnoreCase("4")||title.equalsIgnoreCase("5")||title.equalsIgnoreCase("6")){

         }
        return true;

       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
       }

       public void populateNow(){
           this.populate();
       }

    } 
```

**自定义的 AlertDialogManager 类**

```
public class AlertDialogManager {
    private Context context;
    DatabaseHandler db = new DatabaseHandler(context);
    public void showAlertDialog(Context context, String title, String message,
            Boolean status) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

        // Setting Dialog Title
        alertDialog.setTitle(title);

        // Setting Dialog Message
        alertDialog.setMessage(message);

        if(status != null)
            // Setting alert dialog icon
            alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

        // Setting OK Button
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                System.exit(0);
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    public void showpickAlertDialog2(final Context context, final String lat, final String lon,final String snippet) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();
        LinearLayout layout = new LinearLayout(context);
        layout.setOrientation(LinearLayout.VERTICAL);
        final Button park_button = new Button(context);
        park_button.setHint("Park here");
      //  park_button.setBackgroundResource();
        layout.addView(park_button);
        park_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.out.println("parkbutton:Clicked");
                // Delete DB Values
                int count = db.getDatasCount();
                for(int i = 0;i<count;i++){
                    db.deleteValues(i);
                }
                //latitude & longtitude (string)
                   String latitude = lat;
                   String longtitude = lon;
                   Log.d("Insert: ", "Inserting ..");
                   db.addData(new Datas(latitude, longtitude));
                  // Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();

                // Reading DB Data
                   Log.d("Reading: ", "Reading all Values...");
                   List<Datas> datas = db.getAllDatas();       

                   for (Datas dat : datas) {
                       String log = "Id: "+dat.getID()+" ,Latitude: " + dat.getlat() + " ,Longtitude: " + dat.getlon();
                           // Writing DB data to log
                   Log.d("DB Data: ", log);

               }
    park_button.setEnabled(false);

            }
        });

        Button know_more_button = new Button(context);
        know_more_button.setHint("Know more");
        //  park_button.setBackgroundResource();
        layout.addView(know_more_button);
        know_more_button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                SharedPreferences prefs = context.getSharedPreferences("myprefs", 0);
                SharedPreferences.Editor editor =prefs.edit();
                editor.putString("KEY_REFERENCE", snippet);
                editor.commit();                

                Intent intent = new Intent(context, SinglePlaceActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intent);
            }
        });

        alertDialog.setView(layout);
        alertDialog.setButton("Back", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }
    public void showpickAlertDialog1(Context context, String title, String message) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();
        alertDialog.setTitle(title);
        alertDialog.setMessage(message);
        alertDialog.setButton("Back", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();

            }
        });

        // Showing Alert Message
        alertDialog.show();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:43:31.213

您当前正在将空上下文传递给`DatabaseHandler`AlertDialogManager 类中的类构造函数：

```
public class AlertDialogManager {
    private Context context;
    DatabaseHandler db ;
    public void showAlertDialog(Context context, String title, String message,
            Boolean status) {
         this.context=context;
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();
        db = new DatabaseHandler(context);

   //..your code here... 
```

并解雇 Dialog 使用`alertDialog.dismiss()`而不是`System.exit(0);`

# google-drive-api - Drive Files:List 查询在标题中搜索数字时不返回结果

> ID：15289018
> 
> 赞同：0
> 
> 时间：2013-03-08T07:40:25.593
> 
> 标签：google-drive-api

在标题中搜索数字时，文件查询不返回结果。例如，如果文件标题为“File.123”，则搜索查询“标题包含'文件'”成功，但查询“标题包含'123'”不成功。

这个问题可以很容易地在 API 资源管理器中重现。

还。IndexableText 字段不再可搜索，即在该字段中搜索值时查询不返回任何结果。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:35:10.767

我的错。似乎搜索是在搜索整个单词，而不是字符序列。因此，永远找不到 123。如果文件名是“文件 123”，那么搜索就会有结果。

# php - 将 Javascript 变量保存在新文件中

> ID：15289021
> 
> 赞同：0
> 
> 时间：2013-03-08T07:40:46.483
> 
> 标签：php, javascript

我有一个 Javascript 变量，它是一个带有键和数组的对象（如下所示的缩短版本）。我用 HTML 编写了一个表单，以便具有访问权限的用户（在他们登录后）可以删除、添加或更改其家谱的任何键。我需要知道的是如何获取这个新的、已更改的变量并将其保存到服务器，例如 userNameGenealogy.js，以便另一个页面可以使用它。我做了一些搜索，但不知道我需要的是否只是面向 PHP 的，或者我是否还需要研究 AJAX 或 JSON。

```
var genealogy = {};
    genealogy["Johnson"] = {
        "Ron": new Array(
            {"nickname":"Ronny","dob":"06/20/88"},
            {"nickname":"Ronald","dob":"03/15/54"}),
        "Scott": new Array(
            {"nickname":"Scotty","dob":"01/21/42"})
    }; 
```

这只是一个简短的片段，但我宁愿不必更改 Javascript 的格式，因为该站点的其余部分已编码为按原样使用它。任何帮助/指向正确方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:50:22.240

你需要为此使用ajax。例如使用[ajax()](http://api.jquery.com/jQuery.ajax/#example-0)并将`data`参数传递给它。然后你需要在 PHP 脚本中处理它，你必须在其中读取 $_POST （在下面的情况下）根据需要解析它，保存到文件并回显响应。

JavaScript 代码：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

# yahoo-boss-api - 雅虎 BOSS Geo api 问题

> ID：15289028
> 
> 赞同：0
> 
> 时间：2013-03-08T07:41:26.313
> 
> 标签：yahoo-boss-api

我是 OAuth 和 yahoo api 的新手。我的问题细节如​​下：在我当前的项目中，我们必须实现一个服务类，其中，当我们传递地址时，它应该使用yahoo boss geo apis并返回该地址的经纬度。我们在我们的项目中使用java。

到目前为止，我已经完成了以下提到的以下事情：

1.  我在[https://developer.apps.yahoo.com/projects](https://developer.apps.yahoo.com/projects)添加了项目详细信息，并获得了消费者密钥、消费者秘密等。
2.  但直到现在我还没有提交账单信息。
3.  我正在尝试运行这个简单的 java 示例：http: [//developer.yahoo.com/boss/geo/docs/codeexamples.html](http://developer.yahoo.com/boss/geo/docs/codeexamples.html)。我使用添加项目详细信息后获得的 Consumer Key，Consumer Secret。但是，当我尝试运行此示例时，我得到状态代码 = 503，这意味着服务不可用。2-3 次我也得到了 XML 的响应。

如果我在这里做错了什么，请告诉我。另外我该如何实现我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T23:01:02.687

这个问题很可能是由设置的速率限制引起的。可以在此处找到错误文档：http: [//developer.yahoo.com/boss/search/boss_api_guide/BOSSv2_APDX.html](http://developer.yahoo.com/boss/search/boss_api_guide/BOSSv2_APDX.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T20:21:44.163

在 Yahoo Boss 组中，许多人在开设帐户并输入帐单信息后立即报告收到 503 错误。24小时后问题解决了。

# c++ - transform_reduce 中的推力::system::system_error

> ID：15289030
> 
> 赞同：0
> 
> 时间：2013-03-08T07:41:34.470
> 
> 标签：c++, cuda, thrust

我正在使用 Thrust 在具有 2.1 计算能力的 Nvidia 卡上运行蒙特卡罗模拟。如果我尝试一次 transform_reduce 整个 device_vector，我会收到以下错误。这不是用完设备上的内存的问题，因为向量那么大（~1-10mb）。我知道我的代码是正确的，因为如果我使用 openmp 编译并仅在主机上运行，​​它就可以工作。什么可能导致这个问题？

mccva.exe 中 0x776e15de 处未处理的异常：Microsoft C++ 异常：内存位置 0x0014cb28 处的推力::system::system_error。

但是，如果我以块的形式执行 transform_reduce，它可以正常工作，直到我缩放模拟中的时间步数，然后它会给出相同的错误。

```
//run the Monte Carlo simulation
zpath * norm_ptr = thrust::raw_pointer_cast(&z[0]);
cout << "initialized raw pointer" << endl;
thrust::device_vector<ctrparty> devctrp = ctrp;
assert(devctrp.size()==ctrp.size());
cout << "Initialized device vector" << endl;
cout << "copied host vec to device vec" << endl;

float cva = 0;
for(unsigned int i=0; i<5; i++)
{
    if(i<4)
        cva += (1-R) * thrust::transform_reduce(devctrp.begin()+i*2000, devctrp.begin() + (i+1)*2000 - 1, calc(norm_ptr, dt, r, sims, N), 0.0f, sum());
    else
        cva += (1-R) * thrust::transform_reduce(devctrp.begin()+i*2000, devctrp.begin() + (i+1)*2000, calc(norm_ptr, dt, r, sims, N), 0.0f, sum());
} 
```

尝试此操作时出现错误：

```
float cva = 0.0f;
try
{
    cva = thrust::transform_reduce(devctrp.begin(), devctrp.end(), calc(norm_ptr, dt, r, sims, N), 0.0f, sum()); //get the simulated CVA
}
catch(thrust::system_error e)
{
    printf(e.what());
} 
```

我正在使用 VS2010，当它出现错误时，它指向 dbgheap.c 文件中的以下内容。

```
__finally {
    /* unlock the heap
     */
    _munlock(_HEAP_LOCK);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T13:58:22.000

当我忘记将`Properties`项目调整为我的 CUDA 卡计算能力时，我遇到了这种推力错误

`Configuration Properties > CUDA C\C++ > Device > Code Generation`更改`compute_10,sm_10`您的 GPU 计算能力

对于具有 2.1 计算能力的 Nvidia 卡，它将是`compute_20,sm_21`

# c# - MS-Word API 方法 Find.HitHighlight 抛出异常

> ID：15289036
> 
> 赞同：1
> 
> 时间：2013-03-08T07:42:08.300
> 
> 标签：c#, ms-word, find, highlight

我正在尝试以编程方式查找和突出显示 word 文件中的文本，但是当行`bool highlighted = range.Find.HitHighlight`执行时，会发生异常并且异常消息是`Bad variable type. (Exception from HRESULT: 0x80020008 (DISP_E_BADVARTYPE))`

我无法找出导致此错误消息的原因。这是我的完整代码。请有人看看并指导我如何修复它以及错误在哪里。

```
using Word = Microsoft.Office.Interop.Word;
private static void HighlightText()
        {
            object fileName = "D:\\CVArchievePath\\C0000000001.doc";
            object textToFind = "test1";
            object readOnly = true;
            Word.Application word = new Word.Application();
            Word.Document doc = new Word.Document();
            object missing = Type.Missing;
            try
            {
                doc = word.Documents.Open(ref fileName, ref missing, ref readOnly,
                                          ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing,
                                          ref missing);
                doc.Activate();

                object matchPhrase = false;
                object matchCase = false;
                object matchPrefix = false;
                object matchSuffix = false;
                object matchWholeWord = false;
                object matchWildcards = false;
                object matchSoundsLike = false;
                object matchAllWordForms = false;
                object matchByte = false;
                object ignoreSpace = false;
                object ignorePunct = false;

                object highlightedColor = Word.WdColor.wdColorGreen;
                object textColor = Word.WdColor.wdColorLightOrange;

                object missingp = false;
                Word.Range range = doc.Range();

                bool highlighted = range.Find.HitHighlight(ref textToFind,
                                                           ref highlightedColor,
                                                           ref textColor,
                                                           ref matchCase,
                                                           ref matchWholeWord,
                                                           ref matchPrefix,
                                                           ref matchSuffix,
                                                           ref matchPhrase,
                                                           ref matchWildcards,
                                                           ref matchSoundsLike,
                                                           ref matchAllWordForms,
                                                           ref matchByte,
                                                           ref missingp,
                                                           ref missingp,
                                                           ref missingp,
                                                           ref missingp,
                                                           ref missingp,
                                                           ref ignoreSpace,
                                                           ref ignorePunct,
                                                           ref missingp);

                System.Diagnostics.Process.Start(fileName.ToString());
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error : " + ex.Message);
                //Console.ReadKey(true);
            }
        } 
```

# codeigniter - Codeigniter 图像上传无法在线工作

> ID：15289037
> 
> 赞同：0
> 
> 时间：2013-03-08T07:42:10.250
> 
> 标签：codeigniter, image-upload

我有一个需要上传照片的应用程序，已在 codeigniter 中完成，可在 localhost 上正常工作，但无法在线工作。

**查看页面代码：**

```
<div> 
                  <form id="uploadimage" method="POST" name="uploadimage" action="<?php echo base_url(); ?>onebachhpan/savephoto" enctype="multipart/form-data">
                    <input type="file" name="userfile" id="userfile" accept="image/*" /><br/><br/>
                    <input type="submit" class="button_example" id="upload_button" name="upload_button" value="Upload"/>
             </form>
             <br/>
             <form  id="removeimage" method="POST" name="removeimage" action="<?php echo base_url(); ?>onebachhpan/removephoto" enctype="multipart/form-data">
                   <input type="submit" style="position: absolute; left: 100px; top: 64px; " class="button_example" id="delete_button" name="delete_button" value="Delete"/>
             </form>
             </div> 
```

以下是图像上传的控制器代码：这在 localhost 上运行良好：

**控制器代码：**

```
function savephoto()
    {
         $this->load->library('session');
        $this->load->library('image_lib');
        $config['image_library'] = 'gd2';
        $config['upload_path'] = './profilepic/'; //location to store image
        $config['allowed_types'] = 'gif|jpg|png';
        $this->load->library('upload', $config);
        if ( ! $this->upload->do_upload('userfile'))
        {
            $error = array('error' => $this->upload->display_errors());
         redirect(base_url().'uploaderror');

        }
        else
        {
            $photo = $this->upload->data();
            $data['photo'] = $photo;    
            $id = $this->session->userdata('MemberId');
            $filename = $photo['file_name'];
            $extension = $photo['file_ext'];

            $this->load->model('profile_model');
            $this->profile_model->photo($extension,$id);

          // echo "<pre>";print_r($photo);
            $newpath = './profilepic/'.$id.$extension;

            $config['source_image'] = './profilepic/'.$filename;
            $config['overwrite']=true;

            $config['new_image'] = $newpath;

            $config['width']  = '170';
            $config['height']  = '240';
            $config['maintain_ratio'] = true;

            //$this->load->library('image_lib', $config);

            $this->image_lib->initialize($config);
            $this->image_lib->resize();
            unlink('./profilepic/'.$filename);
            //$this->load->view('onebachhpan_index');
            redirect(base_url().'profile');

        }   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:00:19.423

试试这个例子，它工作得很好

```
 //File name
$cat_image_name = $_FILES["cat_image"]["name"] ;

$date_added = strtotime(date("m/d/Y H:i:s"));

//File uploading params 
$config['upload_path'] = './uploaded_files/categories';
$config['allowed_types'] = 'gif|jpg|png';
$config['file_name'] = $date_added."_ipad";
$config['remove_spaces'] = TRUE;

//Loading Library - File Uploading
$this->load->library('upload', $config);

//Upload the image
if (!empty($cat_image_name)) 
{
        $this->upload->do_upload('cat_image');
        $data = array('upload_data' => $this->upload->data());
        $category_image_ipad = $data['upload_data']['file_name'];
        $img_extension = $data['upload_data']['file_ext'];
} 
```

# ios - Objective-c iOS原型单元格在重绘后恢复

> ID：15289040
> 
> 赞同：0
> 
> 时间：2013-03-08T07:42:21.600
> 
> 标签：ios, objective-c, tableview

我有一个动态单元格，从数据库填充原型单元格。

当我单击一个单元格时，它会更改颜色并更新数据库。

但是，当单元格滚动到屏幕外时，它会恢复到原始颜色。如果我打开和关闭程序，单元格将是正确的颜色，因为数据库已更新。

重新加载整个表没有帮助。我检查并在单击单元格后立即更新数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:46:58.290

当单元格不在视野范围内并被重用（带有标识符...）时，进入视野的单元格将接管离开视野的单元格，从而将其所有更改设置为新单元格的更改。

您必须自己跟踪选择的单元格，当该单元格进入视野时，您可以进行单独的初始化，将其返回到旧状态。只需跟踪它的 indexPath.row 就可以了。

# java - 上传文件不要调用 onFinish() 方法

> ID：15289042
> 
> 赞同：1
> 
> 时间：2013-03-08T07:42:27.243
> 
> 标签：java, gwt, gwtupload

[我通过https://code.google.com/p/gwtupload/](https://code.google.com/p/gwtupload/)上传文件。一切正常，但有时我的文件保存在文件夹中，但上传者不调用 onFinish() 方法，一切都停止了。我没有任何关于错误的消息，文件保存在目录中，但上传器我停止了。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:06:57.997

似乎问题在于您选择上传的文件名的编码，这可能是 gwtupload 库中的错误。请在 gwtupload 站点中打开一张[票](http://code.google.com/p/gwtupload/issues/list)，并提供更多信息（带有小型 Eclipse 项目的 .zip 文件将是理想的），我会尽快解决问题。

# java - Java中的python struct.unpack

> ID：15289046
> 
> 赞同：0
> 
> 时间：2013-03-08T07:42:38.203
> 
> 标签：java, python

我对 Python 很陌生，一直在尝试用 Java 移植一个 Python 脚本。一段时间以来，我一直停留在以下代码逻辑上，试图将其转换为 Java，但一直无法这样做（可能是因为我误解了实际执行的操作）

```
data = unpack('>H', file.read(2))
if data == 0xffff
then //do something
else //do something else 
```

现在，我认为这是在上面的 python 脚本中完成的：- 以十六进制格式解压缩一个字符串（我相信，读取文件的前 2 个字节），然后检查它的值是否为 0）

我对拆包的看法是否正确；如果没有，那究竟是在做什么呢？是否通过此操作从文件对象中获取子字符串：-

1 - 将文件读入字节数组

2 - 获取字节数组的前 2 个元素

然后在做什么？

有人可以帮我写下Java上面python中提到的逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:14:43.557

在 Java 中，您需要一个 BigInteger，因为 Java 本机 long 不会保存任何大于 64 位的内容。

它可以使用字节数组进行初始化，所以你应该没问题。

# ruby-on-rails - 在rails 3中过滤json渲染

> ID：15289047
> 
> 赞同：0
> 
> 时间：2013-03-08T07:42:52.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我有这段代码：

```
 render :json => { :objects => @object.object_children } 
```

这行得通。但我只想要某些属性。我看到了这个：[在rails 3中过滤json渲染，](https://stackoverflow.com/questions/5395620/filter-json-render-in-rails-3)其中是这样的：

```
respond_to do |format|
format.json { render json: @objects.object_children, :only => [:id, :name] }
end 
```

它可以工作，但它返回没有标签的数据，就像这样：

```
id":null,"name":"foo" 
```

我想要其中的“：objects =>”标签。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:55:51.963

有关高级 json 序列化，请查看[Active Model Serializers](https://github.com/rails-api/active_model_serializers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:23:41.640

您必须将原始解决方案与您找到的解决方案结合起来：

```
render :json => { :objects => @object.object_children.as_json(:only => [:id, :name]) } 
```

编辑：解释

在您的原始解决方案中，您`:objects =>`手动将密钥添加到响应中。

```
render :json => @object.object_children
# vs
render :json => { :objects => @object.object_children } 
```

因此，要添加键*并*过滤返回的属性，您必须执行相同的操作，然后手动调用 as_json （这就是 Rails 为简单地返回整个集合所做的事情）并带有`:only`应用过滤器的选项。

是否使用`respond_to`块取决于您的需要。

# php - 从 SQL 数据库中搜索并显示结果

> ID：15289048
> 
> 赞同：1
> 
> 时间：2013-03-08T07:42:52.590
> 
> 标签：php, html, mysql, sql, database

我有一个 MySQL 数据库，我需要搜索交易号（它会显示我的姓名、电子邮件和 item_name）或搜索我的电子邮件地址 AND 姓名和购买日期，然后会给出我的交易号和 item_name -除非电子邮件、姓名和购买日期均正确无误，否则我不希望出现任何问题。

我的数据库中的字段是：

```
iname
iemail
itransaction_id
item_name 
```

有人可以帮忙....这是我目前拥有的....

```
<html>

<head>
<title>Search</title>
</head>

<body bgcolor=#ffffff>

<h2>Search</h2>

<form name="search" method="post" action="findme.php">
Seach for: <input type="text" name="find" /> 

<input type="submit" name="search" value="Search" />
</form>

</body>

</html> 
```

另存为 findme.html

下一个：

```
<html>
<head><title>Searching for a student...</title>
</head>
<body bgcolor=#ffffff>

<?php

echo "<h2>Search Results:</h2><p>";

//If they did not enter a search term we give them an error
if ($find == "")
{
echo "<p>You forgot to enter a search term!!!";
exit;
}

// Otherwise we connect to our Database
mysql_connect("xxxx.com", "xxxx", "xxxxpw") or             die(mysql_error());
mysql_select_db("xxxx") or die(mysql_error());

// We perform a bit of filtering
$find = strtoupper($find);
$find = strip_tags($find);
$find = trim ($find);

//Now we search for our search term, in the field the user specified
$iname = mysql_query("SELECT * FROM ibn_table WHERE upper($field) LIKE'%$find%'");

//And we display the results
while($result = mysql_fetch_array( $iname ))
{
echo $result['firstname'];
echo " ";
echo $result['lastname'];
echo "<br>";
echo $result['idnumber'];
echo "<br>";
echo "<br>";
}

//This counts the number or results - and if there wasn't any it gives them a     little     message explaining that
$anymatches=mysql_num_rows($iname);
if ($anymatches == 0)
{
echo "Sorry, but we can not find an entry to match your query...<br><br>";
}

//And we remind them what they searched for
echo "<b>Searched For:</b> " .$find;
//}
?> 

</body>
</html> 
```

保存为 findme.php

这是我目前得到的错误：

搜索结果：

警告：mysql_fetch_array()：提供的参数不是第 31 行 /hermes/bosweb25a/b409/ipg.bexgroupcouk/silverliningnetworks/Database/findme.php 中的有效 MySQL 结果资源

警告：mysql_num_rows()：提供的参数不是第 43 行 /hermes/bosweb25a/b409/ipg.bexgroupcouk/silverliningnetworks/Database/findme.php 中的有效 MySQL 结果资源 抱歉，我们找不到与您的查询匹配的条目...

搜索: CARYS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:07:14.257

`SELECT * FROM ibn_table WHERE itransaction_id LIKE '%$find%'`
注意 LIKE 和 '%$find%' 之间的空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:01:44.593

我有三给你，只是检查它..

```
 <html>
            <head><title>Searching for a student...</title>
            </head>
            <body bgcolor=#ffffff>

            <?php
            include "config.php";
            echo "<h2>Search Results:</h2><p>";

            if(isset($_POST['search']))
            {
            $find =$_POST['find'];
            //If they did not enter a search term we give them an error
            if ($find == "")
            {
            echo "<p>You forgot to enter a search term!!!";
            exit;
            }

            // Otherwise we connect to our Database

            // We perform a bit of filtering
            $find = strtoupper($find);
            $find = strip_tags($find);
            $find = trim ($find);

            //Now we search for our search term, in the field the user specified
            $iname = mysql_query("SELECT * FROM ibntable WHERE name LIKE'%$find%'")
             or die(mysql_error());

            //And we display the results
            while($result = mysql_fetch_array( $iname ))
            {
            echo "id :" .$result['fname'];
            echo "<br> ";
            echo "name :".$result['lname'];
            echo "<br>";
            echo "name :".$result['middlename'];
            echo "<br>";
            echo "<br>";
            }

            //This counts the number or results - and if there wasn't any it gives them a     little     message explaining that
            $anymatches = mysql_num_rows($iname);
            if ($anymatches == 0)
            {
            echo "Sorry, but we can not find an entry to match your query...<br><br>";
            }

            //And we remind them what they searched for
            echo "<b>Searched For:</b> " .$find;
            //}

            }
            ?> 

            </body>
            </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T22:45:31.823

作为后续行动，我遇到了同样的错误（php 脚本显示为文本），我修复它的方法是检查我用于网页的网址（假设我是从本地计算机运行 WAMP） .

您应该通过“localhost/somewebpage.html”格式而不是“file:///C:/wamp/www/somewebpage.html”格式访问您的页面。如果您从系统托盘中的 WAMP 服务器菜单转到 www 文件夹并双击您尝试运行的 html 页面，它将打开到 'file:///C:/wamp/www/somewebpage.html ' 格式。

很明显，解决这个问题的方法是打开浏览器并手动输入“localhost/somewebpage.html”来查看 webapge。以这种方式运行它会强制它通过可以处理 php.ini 的 Apache 服务器运行。以另一种方式运行它会强制页面完全从浏览器运行，并且您的网络浏览器不是网络服务器，因此它将 php 脚本作为纯文本处理并将其显示在您的页面上。

# java - 发现错误：RV_RETURN_VALUE_IGNORED_BAD_PRACTICE

> ID：15289051
> 
> 赞同：4
> 
> 时间：2013-03-08T07:43:04.923
> 
> 标签：java, io, findbugs

我正在使用`FindBugs`Ant 分析我在 Eclipse 中的代码。

以下片段给出`RV_RETURN_VALUE_IGNORED_BAD_PRACTICE`：

> RV：方法忽略异常返回值 (RV_RETURN_VALUE_IGNORED_BAD_PRACTICE)
> 
> 此方法返回一个未检查的值。应该检查返回值，因为它可能表示异常或意外的函数执行。例如，如果文件无法成功删除（而不是抛出异常），则 File.delete() 方法返回 false。如果您不检查结果，您将不会注意到方法调用是否通过返回非典型返回值来发出意外行为的信号。

```
public void export (File file) throws IOException {
    if (!file.exists()) {
        file.createNewFile();
    }

    BufferedWriter bw = null;
    try {
        bw = new BufferedWriter(new FileWriter(file.getAbsoluteFile()));
    ... 
```

实际上我不在乎文件存在与否，该方法应该继续执行。如果发生异常，它将被抛出`export()`

**如何重写此代码段，因此不显示警告/错误，而不在 Findbugs 配置文件中禁用它？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T07:53:02.123

在这种特殊情况下，您不必调用`file.createNewFile()`，因为文件无论如何都会由`FileWriter`.

但是，您必须确保该文件的父文件夹存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T07:48:11.457

`f.createNewFile();`返回`boolean`值

> **如果命名文件不存在且已成功创建，则为 **true ；**如果命名文件已经存在，则返回**false****

 **将方法更改为`boolean result = f.createNewFile();`

如果您不关心文件是否存在，您可能应该更改代码以**排除检查**并`exists`直接创建`BufferedWriter`将在文件不存在时创建文件。此外，如果您仍想使用当前代码添加`SuppressWarnings`忽略警告。**

# oracle - 将 Excel 文件转换为 CSV，然后将该数据从 CSV 移动到 oracle 数据库

> ID：15289052
> 
> 赞同：0
> 
> 时间：2013-03-08T07:43:07.810
> 
> 标签：oracle, excel, csv, vbscript

我有一张 CSV 格式的 Excel 表，然后应该将 CSV 中的数据加载到 oracle 数据库中的表中。

我有一个将 excel 文件转换为 CSV 的 VBscript，但该 excel 表的格式有点不同，因此 CSV 文件没有被正确填充。我附上了一个链接以下载该示例 excel 表。[电子表格](http://www.filedropper.com/auto_1)

如果您注意到红色文本是字段，它们各自的数据在下一个单元格上。例如，标题日期数据是 2000 年 1 月 1 日。现在，当我使用该 vbscript 进行转换时，我将在此处附加一个链接以下载该 csv。

我想删除所有这些逗号和第 1 列（长度 10）以及所有其他要删除的逗号。CSV 文件中应仅显示标题及其数据。你能帮我解决这个问题吗？

提前致谢。VBscript 代码在这里：-

```
WorkingDir = "C:\Users\vijaywp\Desktop"
Extension = ".XLS"

Dim fso, myFolder, fileColl, aFile, FileName, SaveName
Dim objExcel,objWorkbook

Set fso = CreateObject("Scripting.FilesystemObject")
Set myFolder = fso.GetFolder(WorkingDir)
Set fileColl = myFolder.Files

Set objExcel = CreateObject("Excel.Application")

objExcel.Visible = False
objExcel.DisplayAlerts= False

For Each aFile In fileColl
ext = Right(aFile.Name,4)
If UCase(ext) = UCase(extension) Then
'open excel
FileName = Left(aFile,InStrRev(aFile,"."))
Set objWorkbook = objExcel.Workbooks.Open(aFile)
SaveName = FileName & "csv"
objWorkbook.SaveAs SaveName, 23
objWorkbook.Close 
End If  
Next

Set objWorkbook = Nothing
Set objExcel = Nothing
Set fso = Nothing
Set myFolder = Nothing
Set fileColl = Nothing 
```

完成此转换后，我希望将 CSV 数据加载到 Oracle 数据库表中。请帮忙。

这是预期 CSV 输出的链接：-[预期 CSV 输出](http://www.filedropper.com/autoexpectedoutput)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:03:35.660

如果您想在 CSV 文件中使用自定义格式，请逐行、逐列读取 excel，然后根据您的选择将数据写入 CSV。

如果列中的逗号是唯一的问题，则使用选项将列文本双引号，以便其中的逗号不会造成问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T20:06:43.937

这可能令人失望，但是，首先去 csv 可能根本没有必要。您有 Excel，您希望将数据放入 Oracle 表中。假设我们的 Oracle 表“member_list”有三列：姓名、电话、城市。我们的 Excel 数据在 A 列中有名称，B 列中有电话，C 列中有城市。我们的标题在第 1 行，数据从第 2 行开始。在 D2 列中输入以下公式：="into member_list ("&$A$1&","&$B$1&","&$C$1&") VALUES("&A2&",'"&B2&"',' "&C2&")" 将相同的语句复制到每个数据行。返回 SQLDeveloper 类型： 通过将所有“D”列“放入语句”复制到 SQLDeveloper 来**插入所有** 跟随。最后输入：

 **执行，您现在已将所有 Excel 数据插入 Oracle。**

# c++ - 如何修复由多态性引起的错误？

> ID：15289053
> 
> 赞同：0
> 
> 时间：2013-03-08T07:43:14.940
> 
> 标签：c++, inheritance, polymorphism, game-engine

我的程序在以下行出现错误：

```
RAT_Entity* ecm = new RAT_EntityCustomModel();
ecm->Init(entities.size(), resourceManager->getCustomMesh(meshURL)); 
```

它应该初始化一个子实体，但它破坏了我的引擎。

RAT_Entity 和 RAT_EntityCustomModel 的标头如下：

```
#ifndef RAT_ENTITY_H
#define RAT_ENTITY_H

#include <iostream>

namespace RAT_ENGINE
{
    class RAT_Entity
    {
    public:
        RAT_Entity();
        ~RAT_Entity();

        virtual void Init(int argID, void* argVoid);
        virtual void CleanUp();

        int getID() const;

        virtual void PrintIO() const;
    protected:
        int id;
    };
}

#endif 
```

和

```
#ifndef RAT_ENTITYCUSTOMMODEL_H
#define RAT_ENTITYCUSTOMMODEL_H

#include "RAT_Entity.h"
#include "RAT_CustomMesh.h"

namespace RAT_ENGINE
{
    class RAT_EntityCustomModel : public RAT_Entity
    {
    public:
        RAT_EntityCustomModel();
        ~RAT_EntityCustomModel();

        void Init(int argID, RAT_CustomMesh* argMesh);
        void CleanUp();

        RAT_CustomMesh* getMesh() const;

        void PrintIO() const;
    private:
        RAT_CustomMesh* mesh;
    };
}

#endif 
```

如您所见，`void RAT_EntityCustomModel::Init(int argID, RAT_CustomMesh* argMesh)`从`virtual void RAT_Entity::Init(int argID, void* argVoid)`. 我需要这样做，否则我会收到以下错误：

> 1>e:\rat_engine\rat_engine\rat_engine\rat_entitymanager.cpp(34): 错误 C2660: 'RAT_ENGINE::RAT_Entity::Init' : 函数不接受 2 个参数

但是现在我的引擎在调用孩子的函数时坏了。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:11:30.003

该错误是由于以下事实造成的

```
RAT_Entity::Init 
```

和

```
RAT_EntityCustomModel::Init 
```

有不同的签名。因此，后一个函数不会覆盖第一个函数。如果你传入一个`void*`指针，那么`RAT_Entity::Init`就会被调用。但是，您期望它`RAT_EntityCustomModel::Init`被调用。

为了修复这些类型的错误，我强烈建议使用 C++11 中引入的 override 关键字，即将签名更改`RAT_EntityCustomModel::Init`为

```
void Init(int argID, RAT_CustomMesh* argMesh) override; 
```

然后编译器会抱怨这种错误。但是，您需要一个兼容 C++11 的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:54:12.290

你有更深层次的问题。

你需要不同的`RAT_Entity`东西`RAT_EntityCustomModel`才能正确初始化，可能完全不同的东西，我不知道。

他们之间的共同点是他们需要一些东西，不同的是他们想要不同的东西，`RAT_CustomMesh`例如。

如果他们需要的东西不是完全不同，即他们都需要某种网格，那么你可以`RAT_Mesh`在基类中作为参数而不是`void*`.

如果他们用完全不同的东西初始化，那么`Entity`需要决定它需要什么。在这种情况下，传递一个资源管理器，对您已有的进行了一些修改，实体可以从中请求它需要的东西。

```
class ResourceManager {
public:
    RAT_PlainMesh* getPlainMesh();
    RAT_CustomMesh* getCustomMesh();
}; 
```

和基本的`RAT_Entity`初始化函数：

```
class RAT_Entity
{
public:
    virtual void Init(int argID, ResourceManager& resourceManager);
    //...
}; 
```

# java - 在 MAC OSX 10.8.2 上安装 Java 调用错误：CFMessagePortCreateRemote

> ID：15289059
> 
> 赞同：1
> 
> 时间：2013-03-08T07:43:37.523
> 
> 标签：java, macos, terminal, osx-mountain-lion

您好，我正在尝试使用 osx 10.8.2 在我的 Mac 上安装 Java。

如果我`java -version`在终端中输入，我会收到以下错误：

`No Java runtime present, requesting install. 2013-03-08 08:36:03.477 java[1192:707] JLRequestRuntimeInstall: Error calling: CFMessagePortCreateRemote`

昨天我从我的电脑上完全卸载了 java 6 `sudo rm -fr /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin`

从oracle站点下载Java 7u17并安装后，安装程序说Java已完全安装。我再次输入`java -version`，它给了我同样的错误（没有 Java 运行时存在）。

你知道这个问题的任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:24:39.223

我最终通过使用 java 卸载所有内容并使用 sdk 安装 java 数据包来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T13:11:28.443

从[Java JDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html)安装 JDK - 请按照以下说明操作：[此处](http://docs.oracle.com/javase/8/docs/technotes/guides/install/mac_jdk.html)

安装后`java -version`再次运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T01:49:55.767

在我的 IT 部门的帮助下，我能够解决这个问题。由于 Apple 不再支持 Java，我们需要弄清楚一些事情。首先确保您为 Mac 下载了最新版本的 Java。完成此操作后，您将需要按照以下步骤操作。

在左上角打开您的系统首选项，然后转到 Java 选项卡并选择视图。在那里您会找到 Java 的版本，并且它已经被选中或选中。如果是这样，请转到“安全”选项卡并取消选择浏览器中的“启用 Java”内容，然后重新选择此项。（IT 人员说这会起作用，但我没有注意到任何事情）。然后继续在 Safari 中访问 JavaTester.org，您将自动看到您正在使用的 Java 版本。您可能需要多次刷新才能最终在屏幕中央的粉红色框中看到您的 Java 版本。

希望这可以帮助，

大卫

# c# - 使用我们的应用程序打开 SVG 时，DTD 上出现错误 403（禁止）

> ID：15289062
> 
> 赞同：3
> 
> 时间：2013-03-08T07:43:51.950
> 
> 标签：c#, svg, dtd

在我们的`C#`应用程序中，有时应用程序需要打开一个 svg 文件。为此，使用以下代码：

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.ValidationType = ValidationType.None;
XmlReader xr = XmlReader.Create(serverMainPath + @"/path/to/svg/file.svg", settings);
XmlDocument xd = new XmlDocument();
_nmsm = new XmlNamespaceManager(xd.NameTable);
_nmsm.AddNamespace("svg", "http://www.w3.org/2000/svg");
_nmsm.AddNamespace("v", "http://schemas.microsoft.com/visio/2003/SVGExtensions/");
xd.Load(xr); 
```

我们使用的标准 svg 以（据我所知它是一个有效的 svg）开头：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
    <!-- Généré par Microsoft Visio 11.0, SVG Export, v1.0 svgIncluded.svg Page-1 -->
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:v="http://schemas.microsoft.com/visio/2003/SVGExtensions/" width="8.26772in" height="11.6929in" viewBox="0 0 595.276 841.889" xml:space="preserve" color-interpolation-filters="sRGB" class="st23" > 
```

在过去的 6 个月里，它工作得很好。但是从一两周开始，这段代码有时会产生以下错误：

```
Server Error in '/ourApp' Application.
--------------------------------------------------------------------------------

The remote server returned an error: (403) Forbidden. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.WebException: The remote server returned an error: (403) Forbidden.

Source Error: 

Line 40:                 _nmsm.AddNamespace("svg", "http://www.w3.org/2000/svg");
Line 41:                 _nmsm.AddNamespace("v", "http://schemas.microsoft.com/visio/2003/SVGExtensions/");
Line 42:                 xd.Load(xr);

Source File: path/to/the/file/file.cs    Line: 42 

Stack Trace: 

[WebException: The remote server returned an error: (403) Forbidden.]
   System.Net.HttpWebRequest.GetResponse() +5400333
   System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials credentials) +69
   System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials) +3929515
   System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn) +54
   System.Xml.XmlTextReaderImpl.OpenStream(Uri uri) +34
   System.Xml.XmlTextReaderImpl.DtdParserProxy_PushExternalSubset(String systemId, String publicId) +380

[XmlException: An error has occurred while opening external DTD 'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd': The remote server returned an error: (403) Forbidden.]
   System.Xml.XmlTextReaderImpl.Throw(Exception e) +76
   System.Xml.XmlTextReaderImpl.DtdParserProxy_PushExternalSubset(String systemId, String publicId) +513
   System.Xml.DtdParserProxy.System.Xml.IDtdParserAdapter.PushExternalSubset(String systemId, String publicId) +16
   System.Xml.DtdParser.ParseExternalSubset() +21
   System.Xml.DtdParser.ParseInDocumentDtd(Boolean saveInternalSubset) +4017069
   System.Xml.DtdParser.Parse(Boolean saveInternalSubset) +54
   System.Xml.DtdParserProxy.Parse(Boolean saveInternalSubset) +31
   System.Xml.XmlTextReaderImpl.ParseDoctypeDecl() +254
   System.Xml.XmlTextReaderImpl.ParseDocumentContent() +451
   System.Xml.XmlTextReaderImpl.Read() +151
   System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace) +58
   System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc) +20
   System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace) +129
   System.Xml.XmlDocument.Load(XmlReader reader) +108
   OurMethod(params) in path/to/the/file/file.cs:42
   StackTrace in our App.

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.3643; ASP.NET Version:2.0.50727.3634 
```

起初我认为这是由于我们的 Internet 代理政策发生了变化，但由于在另一个代理后面的应用程序的另一个部署中发现了它，我非常怀疑这一点。

错误似乎或多或少是随机的，有时它会起作用，有时它不会。我只是不知道它为什么会这样。

问题是：你知道为什么会发生这种情况吗？如果是，您知道如何解决吗？如果没有，任何解决方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:34:32.757

最后，我使用了自制班来完成这项工作。它的灵感来自于[XmlUrlResolver 扩展的 MSDN 实现](http://msdn.microsoft.com/en-us/library/bb669135.aspx)。感谢@mzjn 指出指向 MSDN 资源的链接。

```
using System;
using System.Net;
using System.Net.Cache;
using System.Xml;
using System.IO;

namespace My.Nasmespace.Class.IO
{
    class XmlExtendedResolver : XmlUrlResolver
    {
        bool enableHttpCaching;
        ICredentials credentials;
        private string localServerPath;
        //resolve ressource from localServerPath if it's possible
        //resolve resources from cache (if possible) when enableHttpCaching is set to true 
        //resolve resources from source when enableHttpcaching is set to false  
        public XmlExtendedResolver(bool enableHttpCaching, string serverPath)
        {
            this.enableHttpCaching = enableHttpCaching;
            localServerPath = serverPath;
        }

        public override ICredentials Credentials
        {
            set
            {
                credentials = value;
                base.Credentials = value;
            }
        }

        public override object GetEntity(Uri absoluteUri, string role, Type ofObjectToReturn)
        {
            if (absoluteUri == null)
            {
                throw new ArgumentNullException("absoluteUri");
            }
            //resolve resources from cache (if possible) 
            if (absoluteUri.Scheme == "http" && enableHttpCaching && (ofObjectToReturn == null || ofObjectToReturn == typeof(Stream)))
            {
                /*Try to resolve it from the local path if it exists*/
                if (!string.IsNullOrEmpty(localServerPath) && absoluteUri.AbsolutePath.EndsWith(".dtd") && !absoluteUri.AbsoluteUri.StartsWith(localServerPath))
                {
                    try { 
                        return GetEntity(new Uri(localServerPath + "/Xml/" + absoluteUri.Segments[absoluteUri.Segments.Length-1]), role, ofObjectToReturn);
                    } catch (FileNotFoundException){
                         //Fail silently to go to the web request.
                    }
                }
                WebRequest webReq = WebRequest.Create(absoluteUri);
                webReq.CachePolicy = new    HttpRequestCachePolicy(HttpRequestCacheLevel.Default);
                if (credentials != null)
                {
                    webReq.Credentials = credentials;
                }
                WebResponse resp = webReq.GetResponse();
                return resp.GetResponseStream();
            }
            //otherwise use the default behavior of the XmlUrlResolver class (resolve resources from source) 
        else
            {
                return base.GetEntity(absoluteUri, role, ofObjectToReturn);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:23:52.023

我认为你必须围绕这个尝试一些逻辑，我只是​​从某个地方缓冲

```
request.UserAgent = "userAgents";
request.Accept = "*/*"; 
```

和

```
request.Credentials = new NetworkCredentials("username", "password");

or 

 request.Credentials = CredentialCache.DefaultCredentials; 
```

# ruby-on-rails - Rails - 通用全局函数

> ID：15289065
> 
> 赞同：5
> 
> 时间：2013-03-08T07:44:07.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我想向我的 Ruby on Rails 项目（模型、视图和控制器）的所有方面公开一个全局函数。最初，我认为我可以添加：

```
def self.my_function
    # Code here...
end 
```

到 /config/application.rb 然后调用：

```
Application::my_function 
```

在我的应用程序的任何地方。但这没有用。所以我做了一些谷歌搜索，看来我可以公开全局函数：

*   对于 /app/controllers/application_controller.rb 中的我的控制器
*   对于我在 /app/helpers/application_helper.rb 中的看法
*   对于我在 /lib/ 中的模型

但并非同时适用于所有人。

谁能告诉我我想要的是否可能？

我还想尽可能避免任何包含语句，因为理想情况下应该可以从任何地方访问。但是在这一点上，如果我可以在一个中心位置定义此函数的逻辑，即使使用包含语句也可以。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T08:08:17.643

`config/environment.rb`在应用程序初始化之前定义它：

```
<YourApp>::Application.initialize! 
```

# wcf - 为 Wcf 服务添加第二层安全性

> ID：15289066
> 
> 赞同：0
> 
> 时间：2013-03-08T07:44:14.003
> 
> 标签：wcf, iis, wcf-security

我托管了一个 Wcf 服务

当用户登录到他的用户帐户时，这是我对 wcf 服务的第一层安全性。那是正常的Windows登录身份验证。我想在访问 Wcf 服务之前提供第二层安全性。第二层安全性可以是用户名检查或用户名和密码检查。还有，在第二层安全中，如果用户与当前登录的用户相同，则不会要求认证。否则，要求将身份验证作为第二层安全性的一部分。

我应该如何实现这个逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:26:10.640

我想您是在询问有关使用自定义凭据进行身份验证的问题，您可以[在此处阅读](http://msdn.microsoft.com/en-us/library/bb386582%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:15:58.553

答案取决于您是使用 WCF 服务（如 Web 服务器）（使用 REST、BasicHttpBinding、WSHttpBinding 或 WebHttpbinding），还是使用更类似于网络的协议（如 NetNamedPipeBinding）。使用类似网络的协议，您可以建立在用户登录后持续存在的实时会话。

但是，假设您使用的是以 Web 为中心的协议之一，您无法真正设置第一、第二、第 n 层安全性。您可以发送一个自定义凭据侦听器（如 Paramosh 指向的内容），在用户使用服务之前捕获他/她，但仅此而已。可以说，在身份验证事件和请求击中风扇之间没有进一步的事件。

所以这就是我的建议：因为 http 通信几乎总是一组重复的请求和响应，所以您的身份验证发生在第一次联系时，给用户（在他们提交凭据之后）他们的 SessionID (GUID) 令牌可以随心所欲地返回。SessionID 令牌需要存储在某处的数据库中，并且在每次后续访问时，用户都需要出示该令牌以进行验证，但之后您就可以有效地获得一个实时会话场景，该场景应该可以防止不必要的入侵。并且可以通过上面列出的自定义凭据功能检查此 SessionID（或您使用的任何内容）。

# c# - 单独使用年视图的 ASP.NET CalendarExtender

> ID：15289071
> 
> 赞同：2
> 
> 时间：2013-03-08T07:44:36.000
> 
> 标签：c#, asp.net, calendarextender

我在我的 asp.net gridview 中使用 ASP.NET AJAX 日历扩展器。是否可以将其自定义为仅显示年份，因为我的情况不需要日和月值。

```
<asp:CalendarExtender ID="CalExtStartYear" runat="server" Enabled="True" TargetControlID="txtStartYear"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:58:23.010

尝试将`Format`属性设置为值：

```
yyyy 
```

如果您只需要年份值，我强烈建议不要使用它，因为它会增加额外的负载（您并不真正需要）

您可以改为放置一个组合框，将其值加载到页面加载事件的最小和最大年份

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:25:14.920

好的，我已经测试了这个解决方案，它工作正常：在标记中添加一个事件 OnClientShown="OnShown" 所以扩展器标记将是：

```
<asp:CalendarExtender ID="CalExtStartYear" runat="server" Enabled="True" TargetControlID="txtStartYear" OnClientShown="OnShown"/> 
```

现在添加一个java脚本函数：

```
<script type="text/javascript" >

    function OnShown(sender, args )
    {

        sender._switchMode("years", true);  
    }

</script> 
```

# ios - Twitter API 搜索请求的 NSJSONSerialization

> ID：15289072
> 
> 赞同：0
> 
> 时间：2013-03-08T07:44:38.210
> 
> 标签：ios, objective-c, twitter, nsjsonserialization

我一直在尝试使用 NSJSONSerialization 来让 Twitter 搜索工作以解析查询结果。我最初使用了一个关于使用 SLRequest 访问 Twitter 数据的教程，但我发现在这样做时我需要结果来更新属性以保存它们。我希望获取是一个类方法，所以我避免使用属性。我遇到的问题有点奇怪，我不确定为什么会发生。基本上我可以使用 [NSJSONSerialization JSONObjectWithData: ...] 可靠地获取 - 除了字典中的一个键：值对，结果。键“results”的值返回为 ( )，类型为 __NSArrayM。我可以看到我发送来获取数据的 URL 是正确的，并且解析字典中的其余信息是正确的。一世'

这是一个示例 GET 请求： [https ://search.twitter.com/search.json?q=tech%20filter%3Alinks%20lang%3Aen&src=typd&rpp=1&include_entities=true](https://search.twitter.com/search.json?q=tech%20filter%3Alinks%20lang%3Aen&src=typd&rpp=1&include_entities=true)

如果你去那个页面，你可以看到“results”键有一个与之关联的值，它应该是一个数组。不过，在我的解析版本中，我有一个空数组：

```
fetchResults = {
"completed_in" = "0.045";
"max_id" = 309208532929101825;
"max_id_str" = 309208532929101825;
page = 1;
query = "tech%2520filter%253Alinks%2520lang%253Aen";
"refresh_url" = "?since_id=309208532929101825&q=tech%2520filter%253Alinks%2520lang%253Aen&include_entities=1";
results = (
);
"results_per_page" = 1;
"since_id" = 0;
"since_id_str" = 0;
} 
```

发生这种情况是否有原因？我已经为下面的 JSON 解析输入了代码。

```
+(NSArray *)fetchTweetsForSearchContent:(NSString *)searchContent
{
    NSString *requestURL = [[TwitterFetcherrequestURLWithSearchContent:searchContent] absoluteString];

    NSLog(@"URL: %@",requestURL);
    NSString *query = [requestURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSData *jsonData = [[NSStringstringWithContentsOfURL:[NSURLURLWithString:query] encoding:NSUTF8StringEncodingerror:nil] dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;

    NSDictionary *fetchResults = jsonData ? [NSJSONSerializationJSONObjectWithData:jsonData options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaveserror:&error] : nil;

    if (error) NSLog(@"[%@ %@] JSON error: %@", NSStringFromClass([selfclass]), NSStringFromSelector(_cmd), error.localizedDescription);
    NSLog(@"%@", fetchResults);
    return [fetchResults objectForKey:@"results"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:50:23.950

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:responseData  options:kNilOptions error:nil]; 
```

试试这个可能会有所帮助，并用您从服务器获得的响应数据替换“responseData”

# spring - 将 Spring 3 服务注入 JSF 2 ManagedBean 时出现 Nullpointerexception

> ID：15289073
> 
> 赞同：0
> 
> 时间：2013-03-08T07:44:38.077
> 
> 标签：spring, jsf-2, nullpointerexception, autowired

实际上我在这里看到了很多类似的问题。不幸的是，我无法按照建议解决问题。这是我的代码。谁能找到我的问题可能出在哪里？非常感谢。

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>co.amity.sales</groupId>
  <artifactId>amitysales</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>amitysales Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <repositories>
        <repository>
            <id>prime-repo</id>
            <name>PrimeFaces Maven Repository</name>
            <url>http://repository.primefaces.org</url>
            <layout>default</layout>
        </repository>
  </repositories>

  <properties>
    <maven.test.failure.ignore>true</maven.test.failure.ignore>
    <spring.framework.version>3.2.0.RELEASE</spring.framework.version>

  </properties>

  <dependencies>

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.8.Final</version>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.1.Final</version>
    </dependency>

    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.23</version>
    </dependency>

    <!-- JSF -->
    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-api</artifactId>
      <version>2.1.6</version>
    </dependency>

    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-impl</artifactId>
      <version>2.1.6</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Primefaces -->
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.5</version>
    </dependency>

    <!-- c3p0 dependency -->
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1.2</version>
    </dependency>

    <!-- <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency> -->

 </dependencies>

  <build>
    <finalName>amitysales</finalName>
  </build>
</project> 
```

web.xml

```
<?xml version="1.0"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:app-context.xml</param-value>
 </context-param>

 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>
 <listener>
  <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
 </listener>

 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
 </servlet-mapping>

</web-app> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
    version="2.1">

    <application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

    <!-- configuration of navigation rules -->
    <navigation-rule>
        <from-view-id>/index.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/success.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

应用程序-contex.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <description>Example configuration to get you started.</description>

    <!-- <jdbc:embedded-database id="dataSource" type="H2">
        <jdbc:script location="classpath:schema.sql" />
        <jdbc:script location="classpath:test-data.sql" />
    </jdbc:embedded-database> -->

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="emf" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Data Source Declaration -->
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />   
        <property name="url" value="jdbc:mysql://localhost:3306/sales" />   
        <property name="username" value="root" />   
        <property name="password" value="root" />   
    </bean>

    <bean id="emf"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="packagesToScan" value="co.hyperclean.sales.entity" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">50</prop>
                <prop key="hibernate.jdbc.batch_size">10</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <context:annotation-config />

    <context:component-scan base-package="co.hyperclean.sales" />

</beans> 
```

UserServiceImpl.java

```
package co.hyperclean.sales.service.impl;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import co.hyperclean.sales.entity.Users;
import co.hyperclean.sales.service.UserService;

@Service("jpaUserService")
@Repository
@Transactional
public class UserServiceImpl implements UserService {

    private Log log = LogFactory.getLog(UserServiceImpl.class); 

    @PersistenceContext
    private EntityManager em;

    @Transactional(readOnly=true)
    public List<Users> findAll() {
        List<Users> contacts = em.createNamedQuery("Users.findAll", Users.class).getResultList();
        return contacts;
    }

    @Transactional(readOnly=true)
    public Users findById(int id) {
        TypedQuery<Users> query = em.createNamedQuery("Users.findById", Users.class);
        query.setParameter("id", id);
        return query.getSingleResult();
    }

} 
```

UserManagedBean.java

```
package co.hyperclean.sales.jsf.bean;

import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.DataAccessException;

import co.hyperclean.sales.entity.Users;
import co.hyperclean.sales.service.UserService;

@ManagedBean(name="usersManagedBean")
@RequestScoped
public class UsersManagedBean {

    // Spring User Service is injected...
    //@ManagedProperty(value = "#{jpaUserService}")

    @Autowired
    UserService userService;

    List<Users> userList = new ArrayList<Users>();

    private Users user = new Users();

    public String searchUser() {
        try {
            userList.add(userService.findById(user.getId()));
            return "success";
        } catch (DataAccessException dae) {
            dae.printStackTrace();
        }
        return "error";
    }

    public UserService getUserService() {
        return userService;
    }

    public void setUserService(UserService userService) {
        this.userService = userService;
    }
    public List<Users> getUserList() {
        return userList;
    }
    public void setUserList(List<Users> userList) {
        this.userList = userList;
    }

    public Users getUser() {
        return user;
    }

    public void setUser(Users user) {
        this.user = user;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:14:41.463

我发现了问题。我将 faces-config.xml 放在 WEB-INF 之外，我没有从 web.xml 中读取它。

# php - 我需要帮助使用 PHP 将今天的日期添加 30 天

> ID：15289079
> 
> 赞同：-5
> 
> 时间：2013-03-08T07:45:01.757
> 
> 标签：php

我的网站有一个用户系统。我需要做一些事情，使今天的日期增加 30 天。

更新：我决定使用整数而不是日期。

这就是我所做的。我进行了设置，以便当有人支付账单时，它将他们的“天”值设置为（值）+ 30

我做了一个 cron 工作，从每个用户的“天”中抽出 1 天。显然，我将 cron 作业设置为每天运行一次。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T07:48:17.183

使用`strtotime`和`date`如下。

```
echo date('Y-m-d', strtotime("+30 days")); 
```

**或者**

```
<?php
   echo date('Y-m-d h:i:s')."\n";

   echo date('Y-m-d h:i:s', mktime(date('h'),date('i'),date('s'),date('m'),date('d')+30,date('Y')))."\n";

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T07:51:36.043

首先你可以像这样添加日期

```
$iSecsInDay = 86400;
$iTotalDays = 30;
$user_signup = time() + ($iSecsInDays * $iTotalDays); 
```

然后你可以使用时间戳以任何你想要的方式生成日期，比如

```
$date = date('d-m-Y', $user_signup); 
```

完整的参考可以在这里找到。[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T07:47:52.223

使用[strtotime](http://php.net/manual/en/function.strtotime.php)函数。

```
strtotime('+30 days', time()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T08:40:19.583

如果您想将 +30 天添加到实际日期并在 mysql 中引入，您可以使用：

**$nextMonthDate = date("Ymd H:i:s", strtotime("+30 days",time()));**

Ymd H:i:s 是 MySQL DATETIME 的格式。

**例子：**

实际日期：echo echo date("Ymd H:i:s",time()); --> 2013-03-08 00:37:23

+30 天: echo date("Ymd H:i:s", strtotime("+30 days",time())); --> 2013-04-07 00:37:23

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T07:49:42.330

`$NewDate=Date('y:m:d', strtotime("+30 days"));`

[strtodate()](http://www.php.net/manual/en/function.strtotime.php)：

```
int strtotime ( string $time [, int $now = time() ] ) 
```

该函数期望得到一个包含英文日期格式的字符串，并将尝试将该格式解析为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），相对于现在给出的时间戳，或如果没有提供现在的当前时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T09:04:50.983

您不能将函数直接分配给类的变量。这就是您收到附加错误的原因。考虑将其移至您的构造函数。

```
... 
private $user_signup = null;

public function __construct() {
    $date = new DateTime();
    $date->add(new DateInterval('P30D'));
    $this->user_signup = $date->format('Y-m-d');
}
... 
```

另请参阅[将函数的结果分配给 PHP 类中的变量？OOP 怪异](https://stackoverflow.com/questions/3562397/assigning-a-functions-result-to-a-variable-within-a-php-class-oop-weirdness)以获取更多信息。

# java - 与主机 server.com/Db_name、端口 1433 的 TCP/IP 连接失败

> ID：15289083
> 
> 赞同：2
> 
> 时间：2013-03-08T07:45:25.327
> 
> 标签：java, android, sql, sql-server, jdbc

这个问题可能是一个基本问题，如果是，请原谅我。我正在尝试将我的***Android 应用程序连接到 MSSQL Server***。我在下面链接的问题中使用了相同的代码。我根据此链接中选择的答案使用了 sqljdbc 4.3.0：

[com.mysql.jdbc.driver 类未找到异常](https://stackoverflow.com/questions/15273713/com-mysql-jdbc-driver-class-not-found-exception)

当我这样做时，它调试成功，但是当我在我的设备上运行它时，它是三星 Galaxy Y（姜饼）它给了我这个错误：

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host server.com/Db_name, port 1433 has failed. Error: "null. Verify the connection properties, check that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port, and that no firewall is blocking TCP connections to the port.". 
```

任何帮助将不胜感激。

编辑：我在模拟器上运行它，它在文本视图中给出了这个错误。

android.os.NetworkOnMainThreadException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:27:12.297

你得到了这个例外：

```
com.microsoft.sqlserver.jdbc.SQLServerException:The connection to the 
          host server.com, named instance Db_name has failed. 
Error:"Java.net.SocketTimeoutException". Verify the server and the instance names, 
          check that no firewall is blocking UDP traffic to port 1434, and for 
          SQL Server 2005 or later verify that the SQL Server Browser Service 
          is running on the host. 
```

基本上，您需要按照异常消息中的说明进行操作：

1.  检查您使用的服务器主机名是否正确。（真的是“server.com”吗？）
2.  检查您使用的实例名称是否正确。（真的是“Db_name”吗？）
3.  检查是否没有防火墙阻止您从设备访问 UDP 端口 1434。
4.  检查 SQL Server 浏览器服务是否在“server.com”（或任何实际情况）上运行。

在您的设备上尝试的其他几件事：

*   检查您是否可以对“server.com”（或其他）进行 DNS 查找
*   检查您是否可以“ping”“server.com”主机（或其他）

基本上，有很多事情*可能*是错误的，您需要有条不紊地消除它们，直到找到问题的真正原因。我们不能为你这样做。

* * *

> 我在模拟器上运行它，它在文本视图中给出了这个错误。

```
 android.os.NetworkOnMainThreadException 
```

这是一个不同的问题。

这是[javadoc](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)所说的：

> *“当应用程序尝试在其主线程上执行网络操作时引发的异常。*
> 
> *这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档[设计响应性](http://developer.android.com/guide/practices/design/responsiveness.html)。”*

简而言之，你不应该在主事件线程上做网络事情（包括与平台外的数据库对话）......'因为它可能会导致 UI 长时间锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:54:43.317

您的 URL 有问题，请使用以下 URL 格式：

```
jdbc:sqlserver://server.com\\Db_name; 
```

# python - 如何在 python 中使用 MSAA api 访问 ms 单词文本及其样式

> ID：15289095
> 
> 赞同：1
> 
> 时间：2013-03-08T07:46:21.147
> 
> 标签：python, msaa

从过去 1 周开始，我正在搜索在 python 中使用 msaa api 访问 ms word，但我没有在 python 中获得任何信息。所以请帮我解决这个问题。

我想要在 python 中使用 msaa api 在 ms word doc 中的头条新闻

这个怎么做？

我以普通的 ms word doc 形式 python 获得头条新闻，但我不知道如何获得形式 msaa api。

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T12:27:27.053

我不认为 MSAA 是访问文档文本的最简单或最合适的方式......也许 Office 与 Microsoft 有不同的 API 来提取数据......

我建议您使用 Inspect32 或 AccExplorer 等工具检查您在 ms-word 中所需的对象是否支持 MSAA。

之后在 msaa 中通常您执行以下操作（使用任何语言）搜索窗口或获取前景窗口，从句柄到窗口获取可访问对象，并为该对象获取类、名称、值......（accValue，accName）

您可以使用如下库：[https](https://github.com/phuslu/pyMSAA) ://github.com/phuslu/pyMSAA 或使用 COM 调用。

# android - 防止服务在 Android 上启动时启动

> ID：15289100
> 
> 赞同：1
> 
> 时间：2013-03-08T07:46:43.430
> 
> 标签：android, service

是否可以通过按设备上的某种组合键来阻止服务在 Android 启动时启动？

# android - 如何为动态创建的视图设置 OnTouchListener？

> ID：15289105
> 
> 赞同：3
> 
> 时间：2013-03-08T07:47:05.577
> 
> 标签：android, android-layout, ontouchlistener

我有两种布局，一种`LinearLayout`和一种`RelativeLayout`。在`LinearLayout`我有 10 张图片。当我单击一个图像时，它被添加到`RelativeLayout`. 对所有 10 个图像都给出了类似的事件。在 中`RelativeLayout`，我已将 a 设置`OnTouchListener`为`ImageView`从`LinearLayout`. 但是我的问题是， `onTouch`仅适用于`ImageView`最近添加的图像，但是当我尝试触摸以前添加的图像时，它不起作用。我想为相对布局中添加的所有图像添加侦听器。

以下是我迄今为止尝试过的：

```
for(int i = 0; i < data.length; i++){
           image[i] = new ImageView(getApplicationContext());
            try{
               // int imgID = getResources().getIdentifier(data[i], null, getPackageName());
                image[i].setImageResource(data[i]);

            }catch(Exception e){
                int imgID = getResources().getIdentifier("nia", "drawable", "package");
                image[i].setImageResource(imgID);
            }         
            LinearLayout.LayoutParams LEye = new LinearLayout.LayoutParams(
                    100 , 70);
            LEye.leftMargin=20;
            image[i].setLayoutParams(LEye);
            shapeImageContainer.addView(image[i]); //shapeImageContainer is the Linear Layout
           final int c=i;
            image[i].setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    //addContentView( addIcon(), new RelativeLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT ) );
                    Toast.makeText(NewProject.this, "Position "+c, Toast.LENGTH_SHORT).show();

                    rootView.addView(addIcon(c)); //rootView is the Relative layout

                }
            });

            //image[i].setOnTouchListener(MyOnTouchListener);

        }

private ImageView addIcon(int c){
        item = new ImageView(this);
        item.setImageResource(data[c]);
        item.setAdjustViewBounds(true);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(100, 60 );
        if( mIconIdCounter != 1 ){
            params.addRule(RelativeLayout.RIGHT_OF,c-1);
        }
        item.setLayoutParams( params );
        item.setId( mIconIdCounter );
        ++mIconIdCounter;
        item.setOnTouchListener(MyOnTouchListener);
        return item;
    }

    OnTouchListener MyOnTouchListener = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
//          scroll.setEnabled(false);
//          horizontal.setEnabled(false);

//          scroll.setVisibility(View.GONE);
//          horizontal.setVisibility(View.GONE);
        RelativeLayout.LayoutParams  layoutParams2 = (RelativeLayout.LayoutParams) item.getLayoutParams();
                switch(event.getActionMasked())
                {

                    case MotionEvent.ACTION_MOVE:
                        scroll.requestDisallowInterceptTouchEvent(true);
                        horizontal.requestDisallowInterceptTouchEvent(true);
                        int x_cord = (int) event.getRawX();
                        int y_cord = (int) event.getRawY();

                        //right margin
                        if (x_cord > windowwidth) {
                            x_cord = windowwidth-10;
                        }

                        // left margin original
                        if (x_cord <68) {
                            x_cord = 68;
                        }
                        // left margin original
                        if (y_cord <68) {
                            y_cord = 68;
                        }
                        if (y_cord > windowheight) {
                            y_cord = windowheight-10;
                        }

                       // tv.setText(String.valueOf(y_cord));
                        layoutParams2.leftMargin = x_cord -60;
                        layoutParams2.topMargin = y_cord -65;
                        item.setLayoutParams(layoutParams2);
                        break;
                    default:
                        break;
                }
            return true;
        }

    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T07:53:32.070

> 但我的问题是，onTouch 仅适用于最近添加的图像视图，但是当我尝试触摸以前添加的图像时，它不起作用。

那是因为在`OnTouchListener`您使用该`item`字段来完成您的工作（它将始终指向`ImageView`您编写代码时添加的最后一个），而不是使用`View`调用侦听器的 。尝试这样的事情：

```
RelativeLayout.LayoutParams  layoutParams2 = (RelativeLayout.LayoutParams) v.getLayoutParams();
// rest of the onTouch callback...
v.setLayoutParams(layoutParams2); 
```

# php - setcookie() 不工作

> ID：15289106
> 
> 赞同：-1
> 
> 时间：2013-03-08T07:47:10.703
> 
> 标签：php, cookies, setcookie

不知道我做错了什么......

这是用于设置 cookie 的页面： [https ://www.ni-dieu-ni-maitre.com/test.php](https://www.ni-dieu-ni-maitre.com/test.php)

```
 $domain = "ni-dieu-ni-maitre.com";
$articleid = "test";

$lastviewedarticles = array();

if (isset($_COOKIE["viewed_articles"]) ) {
  $lastviewedarticles = unserialize($_COOKIE["viewed_articles"]);
}

if (!in_array($articleid, $lastviewedarticles)){
    $count = count($lastviewedarticles);
    if($count>=29)
        array_shift($lastviewedarticles);
    $lastviewedarticles[] = $articleid;
}
setcookie('viewed_articles', serialize($lastviewedarticles), time()+60*60*24*30, '/', '.' . $domain); 
```

然后这个页面读取cookie并输出内容： [https ://www.ni-dieu-ni-maitre.com/test2.php](https://www.ni-dieu-ni-maitre.com/test2.php)

```
if ( isset($_COOKIE["viewed_articles"]) ) {
  $lastviewedarticles = unserialize($_COOKIE["viewed_articles"]);
}
echo "cookie is currently:<br>";
print_r($lastviewedarticles); 
```

正如您在测试页面上看到的那样，cookie 始终为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:50:41.600

```
... '.$domain');
    ^        ^ 
```

您使用单引号，这意味着 php 不会`$domain`用变量中的相应值替换：

> [文档](http://php.net/manual/en/language.types.string.php)：
> 
> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

并且由于您无法`.$domain`从未设置的 cookie 中访问 c​​ookie：

> [文档](http://php.net/manual/en/function.setcookie.php)：
> 
> ***领域***
> 
> cookie 可用的域。将域设置为“www.example.com”将使 cookie 在 www 子域和更高的子域中可用。可用于较低域的 Cookie，例如“example.com”，将可用于较高的子域，例如“www.example.com”。仍在实施已弃用的 » RFC 2109 的旧浏览器可能需要前导 . 匹配所有子域。

将其更改为：

```
... '.'.$domain); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:53:20.187

从[RFC 2109](http://www.faqs.org/rfcs/rfc2109.html)开始，`domain`必须使用起始点设置参数（请参阅[http://php.net/setcookie](http://php.net/setcookie)）。请尝试一下，您的代码似乎没问题。请从`'.$domain.'`.

# java - 读取xml文件和xml文件中的链接并继续解析

> ID：15289109
> 
> 赞同：0
> 
> 时间：2013-03-08T07:47:39.990
> 
> 标签：java, xml, xml-parsing, youtube, sax

我正在使用 sax 解析器解析 xml 文件。该 xml 文件在带有下一个属性的链接标记中包含指向另一个 xml 文件的链接。我必须继续阅读，直到最后一个没有下一个属性的 xml 文件。以下是xml文件：

```
 <link rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml" href="http://gdata.youtube.com/feeds/api/videos/EokUNzGJBI8/comments" />
   <link rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml" href="http://gdata.youtube.com/feeds/api/videos/EokUNzGJBI8/comments/batch" />
   <link rel="self" type="application/atom+xml" href="http://gdata.youtube.com/feeds/api/videos/EokUNzGJBI8/comments?start-index=1&amp;max-results=25" />
   <link rel="next" type="application/atom+xml" href="http://gdata.youtube.com/feeds/api/videos/EokUNzGJBI8/comments?start-index=26&amp;max-results=25" /> 
```

我尝试了以下方法：

```
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser saxParser = factory.newSAXParser();
DefaultHandler handler = new DefaultHandler() {
boolean content=false;   
int i=0;
public void startElement(String uri, String localName,String qName, 
            Attributes attributes) throws SAXException {
    if (qName.equalsIgnoreCase("Content")) {
        content = true;
        i+=1;
    }
    if(qName.equalsIgnoreCase("Link") && attributes.getValue("rel").equalsIgnoreCase("next")){
        l=attributes.getValue("href");

        u=true;
    }   
} 
```

要递归读取上面返回的 url，`l`我执行以下操作：

```
saxParser2.parse(new InputSource(ur.openStream()), handler);//to read original url
 while(l!=null)
 {
     urs=new URL(l); //successive urls
 saxParser.parse(new InputSource(urs.openStream()), handler);
 } 
```

在上一个 xml 中找不到下一个后，上面继续打印最后一个响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:02:29.213

**编辑**：嗯，对不起，我终于得到了你的代码。

事实上，您并没有真正进行递归调用，因为您在第二个循环 (while) 中调用 parse，这是一个更好的主意。

所以你应该创建一个 DefaultHandler 的子类，并让 'nextUrl' 成为这个类的一个属性。所以代码是：

```
public class MyHandler extends DefaultHandler {
    private String nextUrl;

    public void startElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {
        // (...)
        if(qName.equalsIgnoreCase("Link") && attributes.getValue("rel").equalsIgnoreCase("next")){
            nextUrl=attributes.getValue("href");
        }   
    }

    public String getNextUrl() { return nextUrl; }
} 
```

然后在您的调用代码中：

```
String url = "*firstUrl*"; //ur=initial xml link
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser saxParser = factory.newSAXParser();
MyHandler handler = new DefaultHandler()
while(url != null){
    saxParser.parse(new InputSource(url.openStream()), handler); 
    // Here, you'll certainly want to do something with the data loaded in handler...
    url = handler.getNextUrl();
 } 
```

# android - PhoneGap应用最小化时如何显示本地通知

> ID：15289112
> 
> 赞同：3
> 
> 时间：2013-03-08T07:47:51.583
> 
> 标签：android, cordova, calllog, minimized

我有一个 PhoneGap 应用程序，我在其中使用 Android 的后台服务、PhoneListner 和 CallLog 插件。因此，当有来电/去电结束时，我的应用程序会显示具有最后通话详细信息的通知。但是，如果我最小化应用程序，那么它不会自动显示通知。所以我需要打开应用程序才能看到通知。

那么有没有办法在应用程序最小化时自动显示通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T12:58:11.860

您将必须创建一个在后台完成工作的服务。PhoneGap 应用程序在“最小化”时会暂停。

我用这个插件，效果很好！ [https://github.com/Red-Folder/Cordova-Plugin-BackgroundService](https://github.com/Red-Folder/Cordova-Plugin-BackgroundService)

在插件的 Java 部分（原生 Android 代码）中，您必须编写程序来检查呼叫并在之后显示通知。您可以使用 PhoneGap 应用程序中的插件管理您的服务。我在我的应用程序中使用它来检查我的网络服务器上的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T06:30:55.120

您可以使用本地通知插件来实现这一点。即使您的应用程序被最小化，它也能完美运行。

这是链接[https://github.com/zhuochun/local-notification](https://github.com/zhuochun/local-notification)

您可以按照自述文件中所述的步骤添加插件

```
<script type="text/javascript">
var notification = cordova.require("cordova/plugin/localNotification")

document.addEventListener("deviceready", appReady, false);

function appReady() {
  console.log("Device ready");

  notification.add({
      id: 1,
      date: new Date(),
      message: "Phonegap - Local Notification",
      subtitle: "Subtitle is here",
      ticker: "This is a sample ticker text",
      repeatDaily: false
  });
}
</script> 
```

试试这个插件。

# html - link_to image_tag 中的控制器和操作不执行控制器代码

> ID：15289118
> 
> 赞同：0
> 
> 时间：2013-03-08T07:48:08.337
> 
> 标签：html, ruby-on-rails, link-to

我的 link_to 看起来像这样：

```
<%= link_to image_tag(user_likes_selection.page_picture, :image_id =>     
user_likes_selection.id, :controller => :preferences_controller, 
:action => :checked_average_with_profile) %> 
```

我的控制器preferences_controller 有一个名为checked_average_with_profile 的方法，据我所知，当我单击图像时不会调用该方法。

从 link_to 生成的 html 代码是

```
<img>
<a href="/preferences"><img action="checked_average_with_profile" alt="Soul_surfer_film"     
controller="preferences_controller" height="70%" image_id="3254" 
src="/assets/soul_surfer_film.jpg" width="70%" /></a>
</img> 
```

为什么单击图像时不执行控制器代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:59:35.187

在这种情况下，如果您使用块形式，则更容易阅读代码`link_to`

```
<%= link_to { :image_id => user_likes_selection.id, :controller => :preferences, :action => :checked_average_with_profile } do %>
  <%= image_tag(user_likes_selection.page_picture %>
<% end %> 
```

在您的路线中，您还可以传递一个`as`选项，以便您可以使用命名路线。假设您的路线看起来像

```
match '/preferences/checked_average_with_profile/:image_id' => 'preferences#checked_average_with_profile', as: :check_average_profile 
```

您可以使用简化链接

```
link_to image_tag(user_likes_selection.page_picture), check_average_profile_path(user_likes_selection.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:53:30.870

把你的paren放在后面`user_likes_selection.id`，而不是放在最后。您正在将图像标签属性与您的 link_to 属性混合。

尝试：

```
<%= link_to image_tag(user_likes_selection.page_picture, :image_id =>     
user_likes_selection.id), {:controller => :preferences, 
:action => :checked_average_with_profile} %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:01:06.837

这是我在代码中的操作方式。

```
<%=link_to(image_tag(user_likes_selection.page_picture), check_average_profile_path(user_likes_selection.id)) %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:28:42.843

尝试：

```
<%= link_to image_tag(user_likes_selection.page_picture), url_for({:controller => 'preferences_controller', :action => 'checked_average_with_profile', :image_id =>  user_likes_selection.id}) %> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-09T05:53:57.277

最后通过在资源中添加一个包含我的操作的集合来解决我的问题：

```
resources :preferences do
  collection do
    get 'save_new_scores_to_profile'
    get 'checked_average_with_profile'
  end
end 
```

然后，我修改了视图代码，以便可以将 image_id 变量传递给控制器​​。

```
<%= link_to image_tag(user_likes_selection.page_picture,
    checked_average_with_profile_preferences_path(:image_id => 
    user_likes_selection.id) %> 
```

在我的控制器中，我确保使用参数获取 image_id 并在最后放置一个 redirect_to：

```
def checked_average_with_profile
  params[:image_id]
  redirect_to preferences_url
end 
```

如果您遇到此问题，关键部分是在您指定的控制器路径的括号内传递 id（无论可能是什么），并在路由文件中使用 COLLECTION 而不是 MEMBER。

# c# - 使用 WebGet 的可选 UriTemplate 参数

> ID：15289120
> 
> 赞同：24
> 
> 时间：2013-03-08T07:48:16.230
> 
> 标签：c#, wcf, rest

我试过这些

[WCF 服务 URI 模板中的可选参数？由 Kamal Rawat 发表在博客 | .NET 4.5 于 2012 年 9 月 4 日 本节展示了我们如何在 WCF Servuce URI inShare 中传递可选参数](http://www.c-sharpcorner.com/Blogs/9996/optional-parameters-in-wcf-service-uri-template.aspx)

和

[WCF 中 URITemplate 中的可选查询字符串参数](https://stackoverflow.com/questions/2969238/optional-query-string-parameters-in-uritemplate-in-wcf)

但没有什么对我有用。这是我的代码：

```
 [WebGet(UriTemplate = "RetrieveUserInformation/{hash}/{app}")]
    public string RetrieveUserInformation(string hash, string app)
    {

    } 
```

如果参数被填满，它会起作用：

```
https://127.0.0.1/Case/Rest/Qr/RetrieveUserInformation/djJUd9879Hf8df/Apple 
```

`app`但是如果没有价值 就不起作用

```
https://127.0.0.1/Case/Rest/Qr/RetrieveUserInformation/djJUd9879Hf8df 
```

我想`app`选择。如何做到这一点？
这是`app`没有值时的错误：

```
Endpoint not found. Please see the service help page for constructing valid requests to the service. 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-08T17:36:46.667

对于这种情况，您有两种选择。您可以`*`在参数中使用通配符 ( ) `{app}`，表示“URI 的其余部分”；或者你可以给`{app}`部件一个默认值，如果它不存在，它将被使用。

[您可以在http://msdn.microsoft.com/en-us/library/bb675245.aspx](http://msdn.microsoft.com/en-us/library/bb675245.aspx)上查看有关 URI 模板的更多信息，下面的代码显示了这两种选择。

```
public class StackOverflow_15289120
{
    [ServiceContract]
    public class Service
    {
        [WebGet(UriTemplate = "RetrieveUserInformation/{hash}/{*app}")]
        public string RetrieveUserInformation(string hash, string app)
        {
            return hash + " - " + app;
        }
        [WebGet(UriTemplate = "RetrieveUserInformation2/{hash}/{app=default}")]
        public string RetrieveUserInformation2(string hash, string app)
        {
            return hash + " - " + app;
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/RetrieveUserInformation/dsakldasda/Apple"));
        Console.WriteLine();

        c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/RetrieveUserInformation/dsakldasda"));
        Console.WriteLine();

        c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/RetrieveUserInformation2/dsakldasda"));
        Console.WriteLine();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-18T10:16:00.520

`UriTemplate`关于s 中使用查询参数的默认值的补充答案。根据[文档](https://msdn.microsoft.com/en-us/library/bb675245(v=vs.110).aspx)，@carlosfigueira 提出的解决方案仅适用于路径段变量。

> 仅允许路径段变量具有默认值。查询字符串变量、复合段变量和命名通配符变量不允许有默认值。

# mysql - 我的 sql 查询过去 7 天的数据？如果数据不存在则甚至获取日期并显示为 0 或 null

> ID：15289123
> 
> 赞同：1
> 
> 时间：2013-03-08T07:48:22.243
> 
> 标签：mysql, sql, database, convert-tz

我在 sql Fiddler 中制作了一个演示实体。我的桌子有以下专栏

```
displayId | displaytime | campaignId 
```

现在我想要的是为特定的campaignId选择最后7天的条目（我的意思是campaignId =“”）在同一日期应该有多个条目具有相同的campaign id..所以我想显示总campaignId的总和他们的日期

所以如果日期 2013-3-8 和其他日期有 7 条记录，那么它会显示我的记录

```
2013-03-02 | 1
2013-03-03 | 1
2013-03-04 | 0
2013-03-05 | 0
2013-03-06 | 0
2013-03-07 | 2
2013-03-08 | 7 
```

在以下查询中，它仅显示其计数的日期，其计数超过 0...例如，我尝试过的内容如下..但它只给了我一个在数据库中有条目的记录...

```
 2013-03-08 | 7

SELECT date(a.displayTime) AS `DisplayTime`,
       ifnull(l.TCount,0) AS TCount
FROM a_ad_display AS a
INNER JOIN
  (SELECT count(campaignId) AS TCount,
          displayTime
   FROM a_ad_display
   WHERE CONVERT_TZ(displaytime,'+00:00','-11:00') >= DATE_SUB(CONVERT_TZ(CURDATE(),'+00:00','-11:00') ,INTERVAL 1 DAY)
     AND CONVERT_TZ(displaytime,'+00:00','-11:00') <= CONVERT_TZ(CURDATE(),'+00:00','-11:00')
     AND campaignId = 20747
   GROUP BY DATE(displayTime)) AS l ON date(a.displayTime) = date(l.displayTime)
GROUP BY DATE(a.displayTime)
ORDER BY a.displaytime DESC LIMIT 7 
```

我已经在我的查询中实现了时区，所以如果你可以帮助我进行简单的查询，那么它的 ok..dont 包含`Convert_Tz`行。

这是我的虚拟实体的[http://sqlfiddle.com/#!2/96600c/1](http://sqlfiddle.com/#!2/96600c/1)链接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:16:27.407

如果您使用日期表，您的查询可以很简单：

```
select dates.fulldate, count(a_ad_display.id)
from dates
left outer join a_ad_display ON dates.fulldate = a_ad_display.displaytime
    [AND <other conditions here>]
where dates.fulldate BETWEEN date_add(curdate(), interval -6 day) AND curdate()
group by dates.fulldate 
```

[http://sqlfiddle.com/#!2/51e17/3](http://sqlfiddle.com/#!2/51e17/3)

* * *

在不使用日期表的情况下，这是一种方法。这很丑陋，而且性能可能很糟糕：

```
select displaytime, sum(c)
from
(
  select displaytime, count(a_ad_display.id) AS c
  from a_ad_display
  where displaytime BETWEEN date_add(curdate(), interval -6 day) AND curdate()
  group by displaytime
  union all
  select curdate(), 0
  union all
  select date_add(curdate(), interval -1 day), 0
  union all
  select date_add(curdate(), interval -2 day), 0
  union all
  select date_add(curdate(), interval -3 day), 0
  union all
  select date_add(curdate(), interval -4 day), 0
  union all
  select date_add(curdate(), interval -5 day), 0
  union all
  select date_add(curdate(), interval -6 day), 0
) x
group by displaytime
order by displaytime 
```

[http://sqlfiddle.com/#!2/96600c/16](http://sqlfiddle.com/#!2/96600c/16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-03T12:18:50.973

简单！您可以通过 PHP 完成。首先创建日期数组，如

```
date = date('Y-m-d'); $date1 = date('Y-m-d', strtotime('-1 days')); $date2 = date('Y-m-d', strtotime('-2 days'));$date3 = date('Y-m-d', strtotime('-3 days'));$date4 = date('Y-m-d', strtotime('-4 days'));$date5 = date('Y-m-d', strtotime('-5 days'));$date6 = date('Y-m-d', strtotime('-6 days')); 
                $dt_arr = array($date6,$date5,$date4,$date3,$date2,$date1,$date); 
```

从今天开始的最后 7 天，然后使用 foreach 并使用 foreach 中的 where 日期字段运行查询，例如

```
 foreach ($dt_arr as $value) 
    {
     $qry = mysqli_fetch_array(mysqli_query($link,"select * from table where dt_field = $value"));
       if($qry['value'] == '')
         {
           $valfield = 0;
          $dtfiled = $value;

     } 
```

# php - mysql安全查询php

> ID：15289124
> 
> 赞同：0
> 
> 时间：2013-03-08T07:48:25.887
> 
> 标签：php, mysql, crash

我很抱歉标题可能对内容没有意义。

我创建了一个代码，其中一个查询加载到 db 并选择一些行，然后它创建一个循环并将其放入一个数组中。

```
SELECT----      
for($i=0;$i<$count;$i++){
            $info[] = mysql_fetch_assoc($result); 
```

所以这个查询非常简单快捷。

现在，当访问者进入网络中的某个站点时，这些查询正在完成。这一切都很好，但我从不想相信我的访客。如果他们多次更新页面（使用多个浏览器、机器人等），那么我每秒的查询量会增加很多。这可能会导致崩溃！或者可以吗？

所以我想知道的是，我怎样才能获得内容，但仍然不让用户将页面更新为每秒多次。Cookies 检查最后一个数据库连接？对我有什么想法吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:23:19.357

它通常以这种方式工作：

```
 define('THIRTY_SECONDS', 30);

  if (current_request_cache_time_in_seconds() < THIRTY_SECONDS) {
      get_request_response_from_cache();
  } else {
      get_request_response_from_php_code();
      save_request_response_to_cache();
  } 
```

如您所见，这是一个高级函数，意味着正在执行的实际代码受到控制。在此示例中，特定页面的代码将仅每 30 秒执行一次（除非出现竞争条件）。

# c++ - 将 strtok 与 char 数组参数一起使用

> ID：15289129
> 
> 赞同：1
> 
> 时间：2013-03-08T07:49:09.350
> 
> 标签：c++

我正在尝试使用分隔符拆分 char 数组。

这给了我一个运行时错误：

```
#include <iostream>
#include <cstring>
int main()
{
    char* largechars = "q=test&use=bingo";
    char* chars_array = strtok(largechars, "&");
    while(chars_array)
    {
        std::cout << chars_array << '\n';
        chars_array = strtok(NULL, "&");
    }
} 
```

在这里演示[http://ideone.com/OpNssn](http://ideone.com/OpNssn)

该程序运行良好：

```
#include <iostream>
#include <cstring>
int main()
{
    char largechars[] = "q=test&use=bingo";
    char* chars_array = strtok(largechars, "&");
    while(chars_array)
    {
        std::cout << chars_array << '\n';
        chars_array = strtok(NULL, "&");
    }
} 
```

在这里演示[http://ideone.com/Ye8C8k](http://ideone.com/Ye8C8k)

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:07:55.360

`strtok()`解析字符串时修改其参数

您的第一个示例提供了一个只读变量作为参数`strtok`，因此您会收到运行时错误。在您的第二个示例中，您提供了一个可以修改的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:12:56.003

字符串 argumnet 的内容（在您的情况下`largechars`）被此函数修改并分解为更小的字符串（令牌）`strtok`。但是在您的第一个示例中，第一个参数是 `const char*`所以当它尝试修改内容时会导致运行时错误

# css - 两个div不对齐

> ID：15289131
> 
> 赞同：-1
> 
> 时间：2013-03-08T07:49:11.287
> 
> 标签：css, html, alignment

我无法将名为 的 div`#time`与另一个名为 的 div 水平对齐`.content`。

单击此处查看网站的实时版本 - [https://dl.dropbox.com/u/73176512/InteractiveGuide/index.html](https://dl.dropbox.com/u/73176512/InteractiveGuide/index.html)

时间 div 与内容 div 不一致。代码可以通过右键查看源码来查看。或者，如果需要，我可以将其粘贴到此处。

我正在浮动#time div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:03:33.747

用这个改变你的代码，

```
.upper {
    border-radius: 20px 20px 20px 20px;
    float: left;
    min-width: 1048px;
    padding: 10px 0;
}
.content {
    background-color: #FFF9EC;
    border: 1px solid white;
    border-radius: 20px 20px 20px 20px;
    box-shadow: 5px 5px 10px 5px gray;
    float: left;
    margin: 10px 0;
    min-width: 1024px;
    padding: 10px;
} 
```

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:56:35.637

请删除填充左右表单 .content

谢谢萨夫德·贾弗里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T07:56:51.023

给`#time`div 一个 -22px 的边距（我只是盯着这个，所以请检查一下）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T07:59:16.780

这是解决方案，只需将您的上层最小宽度设置为 1070px

```
 .upper
 {
float:left;
padding: 10px;
border-radius: 20px 20px 20px 20px;
min-width: 1070px;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T08:03:44.790

给#time添加一个负的右边距，这样：

```
#time {
    margin-right: -40px;
} 
```

# html - 可以在锚标记中禁用或评论 href 的值吗？

> ID：15289132
> 
> 赞同：0
> 
> 时间：2013-03-08T07:49:20.613
> 
> 标签：html

我的问题是我想要一些评论或禁用锚标记的 href 属性值内的一些文本。我的意思是看起来像这样：

```
<a href="http://[domain.com]stackoverflow.com">Jquery.com</a> 
```

当我单击 url 重定向到 stackoverflow.com 并像评论一样处理 domain.com 或对链接没有任何影响时。方括号中的值就像 url 中的注释：**[domain.com]**

我可以在不使用 jquery 或 javascript 的情况下做到这一点吗，就像 // 或 /**/ 用于代码内的正常注释。

请帮助我并感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:12:12.007

HTML 中的注释是这样的： `<!-- [domain.com] -->` 但这不适用于您的情况。

如果您希望它无效，为什么需要离开 [domain.com] ？

无论如何，你可以做这样的事情：

```
<a href="http://[domain.com]stackoverflow.com" class="linkWithComment">Jquery.com</a> 
```

和JS：

```
$('a.linkWithComment').click(function(e) {
    $(this).attr('href', $(this).attr('href').replace(/\[(.*)\]/g,''));        
}); 
```

这是一个 JSFiddle：http: [//jsfiddle.net/kJDUB/](http://jsfiddle.net/kJDUB/)

但请注意，这绝对不是推荐的行为：SEO 可能已损坏，并且有许多解决方案可以在更清洁的同时实现相同的行为（例如 HTML5 标签：`<a href="http://stackoverflow.com" data-other-domain="domain.com">Jquery.com</a>` 并且您仍然可以访问 domain.com ...）

# c# - .NET 4 中的 SQL Server 几何数据类型和实体框架代码优先

> ID：15289134
> 
> 赞同：2
> 
> 时间：2013-03-08T07:49:26.793
> 
> 标签：c#, .net-4.0, ef-code-first, geometry

我在我的应用程序中使用 Entity Framework Code First 4.4 和 .NET 4.0。
我正在使用已经设计好的数据库。
这个项目是关于地理系统的。数据库中有一个类型为“几何”的字段。数据库是 SQL Server 2008 R2 。我无法升级到 .NET 4.5，因为我们有很多客户使用 Windows XP 作为操作系统。
由于我使用 .NET 4.0，因此无法在我的 POCO 类中使用 System.Data.Spatial.DbGeometry。
是否存在将 SQL Server 'geometry' 数据类型映射到 C# 字符串变量或任何其他数据类型的任何方法或技巧？

# asp.net-mvc - How do I package a new HTML Helper and its data annotation atttibute?

> ID：15289140
> 
> 赞同：0
> 
> 时间：2013-03-08T07:49:42.217
> 
> 标签：asp.net-mvc, html-helper, nuget-package

I have a new HTML helper, `SelectionOtherTextBoxFor`. It is a textbox linked to a `<select>` element¹ for capturing the actual other value if the user selects 'Other' in the select list.

It has some JavaScript, `HtmlHelper` code, and some attribute code.

How do I package this so that other developers can just install and use it, without a list of files and where to put them? I suspect Nuget, but maybe there is a simpler way.

Otherwise, please may I turn this into how do I go about doing this in NuGet?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:00:16.773

The easiest would probably be to package the code in a class library that other developers could reference in their projects. As far as the javascript part is concerned, you could ship it alongside the class library.

If you want to automate the process, NuGet is definitely the way to go. You should read the [`Creating and Publishing a NuGet package guide`](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package) which contains very detailed instructions on how you could create a NuGet package and include dependencies in it. In this case you will have the assembly containing the custom helper and attribute and javascript file as a content to the package. The javascript file could then by default be deployed in `~/Scripts` when some developer installs the NuGet.

Personally I have always used NuGet for those kind of things as it offers lots of flexibilities.

# c# - 如何从 Jquery 调用处理程序（.ashx）？

> ID：15289144
> 
> 赞同：-2
> 
> 时间：2013-03-08T07:49:51.740
> 
> 标签：c#, jquery, asp.net, ashx

我有一个 HTTP 处理程序（.ashx），它从数据库生成一些 html 代码，我想从我的 Jquery 函数中调用它并传递一个值（userID）。

我不知道如何调用它并检索它的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T07:52:05.753

像这样的东西。

```
$(document).ready(function() {

    $.get("http://path/to/handler.ashx", function(html) {
        alert(html);
    });

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T07:54:15.567

使用 Google - 键入后的第一个站点`jquery ashx`- [https://sites.google.com/site/spyderhoodcommunity/tech-stuff/usingjqueryinaspnetappswithhttphandlersashx](https://sites.google.com/site/spyderhoodcommunity/tech-stuff/usingjqueryinaspnetappswithhttphandlersashx)

# qt - QlineEdit setInputMask() 后光标不闪烁

> ID：15289146
> 
> 赞同：2
> 
> 时间：2013-03-08T07:49:58.110
> 
> 标签：qt, qlineedit

我正在使用 setInputMask() 来验证 qlineEdit 中的 ipaddress。但使用 setInputMask() 后，光标不闪烁。有没有人知道如何解决这个问题以使光标在 setInputMask() 之后表现正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:08:34.850

您是否尝试在 setInputMask() 之后在 lineedit 上使用 SetFocus() 设置焦点。

# flash - 播放 .exe 闪存文件

> ID：15289153
> 
> 赞同：0
> 
> 时间：2013-03-08T07:50:28.867
> 
> 标签：flash, adobe-captivate

我们有一个从 adobe captivate 生成的 .exe flash 文件。如果我们有flash player PC，点击它就会播放.exe。如果我们在 PC 上没有 flash 播放器，则会出现此消息 ![消息或安装闪存](../Images/d25b9acd1492f7a49b2e9fd01218e273.png) 当我们确定并再次单击 .exe 文件时，它将播放。但是在已安装的程序列表中我没有看到 flash 播放器。flash 播放器安装在哪里？我们的问题是我们不希望安装该消息。我们可以自动安装flash并在我们单击.exe文件后播放而不显示任何消息，或者我们可以在没有flash的情况下播放.exe吗？

# php - Mysql Timeclock 状态和小时更新

> ID：15289155
> 
> 赞同：2
> 
> 时间：2013-03-08T07:50:44.097
> 
> 标签：php, mysql, real-time-clock

我有一张桌子来记录人们进​​出的情况。我需要找到获取给定人员记录并在给定时间段内加起来他们的小时数的最佳方法

这是表格：

tc_timeclock：

```
tc_id | user_id | status | time_stamp
-------------------------------------
1  | 1 | IN  | 2012-11-28 09:00:25
2  | 2 | IN  | 2012-11-28 09:01:25
3  | 3 | IN  | 2012-11-26 09:03:25
4  | 4 | IN  | 2012-11-28 09:21:25
5  | 5 | IN  | 2012-11-28 09:01:12
6  | 6 | IN  | 2012-11-28 09:47:13
7  | 7 | IN  | 2012-11-12 09:00:22
8  | 7 | OUT | 2012-11-12 09:03:28
9  | 5 | OUT | 2012-11-28 09:21:25
10 | 6 | OUT | 2012-11-28 11:47:13
11 | 3 | OUT | 2012-11-26 11:03:25
12 | 2 | OUT | 2012-11-28 11:01:25
13 | 1 | OUT | 2012-11-28 11:27:25
14 | 4 | OUT | 2012-11-28 11:21:25
15 | 4 | IN  | 2012-11-28 12:21:25
16 | 1 | IN  | 2012-11-28 12:27:25
17 | 3 | IN  | 2012-11-26 12:03:25
18 | 6 | IN  | 2012-11-28 12:47:13
19 | 2 | IN  | 2012-11-28 12:01:25
20 | 1 | OUT | 2012-11-28 17:27:25
21 | 4 | OUT | 2012-11-28 17:21:25
22 | 3 | OUT | 2012-11-26 17:03:25
23 | 2 | OUT | 2012-11-28 17:01:25 
```

* * *

我当然可以获取用户的所有行，它会包括所有的 IN 和 OUT 状态。我只是不知道找到这些状态之间的时间差（即他们打卡了多长时间）的最佳方法

另一个可能很简单的问题是如何在某个日期范围内找到所有这些。（即今天，这个工作周，这个支付周期。）

现在我认为其中一部分需要在一些 php 中完成，只是我一生都无法弄清楚逻辑。

# mysql - 选择前触发

> ID：15289156
> 
> 赞同：3
> 
> 时间：2013-03-08T07:50:46.603
> 
> 标签：mysql, select, triggers

我有以下触发语句

```
DELIMITER //
CREATE TRIGGER rating
BEFORE SELECT
ON `clinic`
FOR EACH ROW
BEGIN
    SET NEW.OLD.`rate` = (SELECT AVG(`rate`) FROM `Review` WHERE `Clinic_id` = NEW.OLD.`id`);
END// 
```

我尝试按照此处给出的说明进行操作[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)但出现语法错误。我究竟做错了什么？

注意我已经`SELECT`在表上运行了语句`Review`，它给出的结果没有任何问题。

编辑：我意识到我以前不能有触发器`SELECT`，因此决定在应用程序层处理它。看到这个： http: [//forums.mysql.com/read.php?99,277396,277692#msg-277692](http://forums.mysql.com/read.php?99,277396,277692#msg-277692)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T14:05:02.223

trigger_event 不能是 select trigger_event = { INSERT | 更新 | 删除 }

```
CREATE
[DEFINER = { user | CURRENT_USER }]
TRIGGER trigger_name
trigger_time trigger_event
ON tbl_name FOR EACH ROW
trigger_body 
```

触发时间：{之前| 后 }

触发事件：{插入| 更新 | 删除 }

# python - 在 IPython 并行进程中打印到标准输出

> ID：15289168
> 
> 赞同：8
> 
> 时间：2013-03-08T07:51:32.160
> 
> 标签：python, printing, parallel-processing, ipython, ipython-parallel

我是 IPython 新手，想在运行 IPython 并行集群函数时将中间结果打印到标准输出。（我知道对于多个进程，这可能会破坏输出，但这很好——它只是用于测试/调试，而且我正在运行的进程足够长，这样的冲突不太可能发生。）我检查了IPython 的文档，但找不到打印并行函数的示例。基本上，我正在寻找一种方法将子进程的打印输出重定向到主标准输出，IPython 相当于

```
subprocess.Popen( ... , stdout=...) 
```

在进程内打印不起作用：

```
rc = Client()
dview = rc()
def ff(x):
    print(x)
    return x**2
sync = dview.map_sync(ff,[1,2,3,4])
print('sync res=%s'%repr(sync))
async = dview.map_async(ff,[1,2,3,4])
print('async res=%s'%repr(async))
print(async.display_outputs()) 
```

返回

```
sync res=[1, 4, 9, 16]
async res=[1, 4, 9, 16] 
```

因此计算正确执行，但函数 ff 中的打印语句永远不会打印，即使所有进程都已返回。我究竟做错了什么？如何让“打印”工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T19:54:56.197

它实际上比你想象的更相似`subprocess.Popen( ... , stdout=PIPE)`。就像`Popen`对象有一个`stdout`属性，您可以读取它以查看子进程的标准输出，AsyncResult 有一个`stdout`属性，其中包含从引擎捕获的标准输出。它的不同之处在于它`AsyncResult.stdout`是一个**字符串列表**，其中列表中的每个项目都是单个引擎的标准输出作为字符串。

所以，开始：

```
rc = parallel.Client()
dview = rc[:]
def ff(x):
    print(x)
    return x**2
sync = dview.map_sync(ff,[1,2,3,4])
print('sync res=%r' % sync)
async = dview.map_async(ff,[1,2,3,4])
print('async res=%r' % async)
async.get() 
```

给

```
sync res=[1, 4, 9, 16]
async res=<AsyncMapResult: ff> 
```

我们可以看到`AsyncResult.stdout`字符串列表：

```
print(async.stdout)
['1\n2\n', '3\n4\n'] 
```

我们可以看到异步结果的标准输出：

```
print('async output:')
async.display_outputs() 
```

打印：

```
async output:
[stdout:0] 
1
2
[stdout:1] 
3
4 
```

这[是一个展示了所有这些的笔记本](http://nbviewer.ipython.org/5119333)。

根据您的问题，需要注意一些事项：

1.  在输出准备好之前，您必须等待 AsyncResult 完成（`async.get()`）
2.  `display_outputs()`不返回任何东西 - 它实际上是打印/显示本身，所以`print(async.display_outputs())`没有意义。

# java - 如何强制将对象放入处理程序类

> ID：15289173
> 
> 赞同：0
> 
> 时间：2013-03-08T07:52:03.157
> 
> 标签：java, interface, handler

我已经在这个问题中发布了一些相关代码： [动态指定返回数组列表的对象类型](https://stackoverflow.com/questions/15270133/specify-object-type-of-a-returned-array-list-dynamically)

现在我的问题更具体一点。

事实上，我正在使用以下“处理程序”类来调用实现接口的类的方法`IMSSQLStatement`：

```
public class MSSQLHandler {

    IMSSQLStatement statement;

    public MSSQLHandler(IMSSQLStatement statement) {
        this.statement = statement;
    }

    public void invoke() throws SQLException {
        statement.executeStatement();
    }

    public List<?> getDataList() throws SQLException {
        return statement.getDataList();
    }
} 
```

现在的问题是如何强制我（或实现我的接口的开发人员）将已实现类的创建对象放入`MSSQLHandler`？

也许这是一个糟糕的设计，但我没有找到任何关于我的问题的信息和用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:09:47.187

是的，您可以使用带有显式构造函数的抽象类，它会在所有子类上自动调用：

```
public abstract class IMSSQLStatement {

    protected IMSSQLHandler handler;

    public IMSSQLStatement() {
        handler = new IMSSQLHandler(this);
    }
} 
```

* * *

编辑：（参考评论）

If you want that only the handler should be able to call the methods in `IMSSQLStatement`, both classes should be placed in the same package. Allow only *package-private* and subclass access, by giving the `protected` modifier. Although the methods could be called in the subclass itself, it would not be accessible outside, with the exception of the package.

This won't solve your problem completely. The other (real bogus) way around would be *reflection*.

To use reflection, you should write in your documentation the exact method signature the subclass should use (of course, don't define an abstract method in the superclass), giving it the ***private*** modifier. The handler should access these methods through reflection.

Refer some document, that describes how to use reflection. This is complicated, and beyond the scope of SO.

# javascript - 正则表达式，匹配连字符的浮点数

> ID：15289177
> 
> 赞同：0
> 
> 时间：2013-03-08T07:52:16.913
> 
> 标签：javascript, regex, hyphen

另一个正则表达式问题：我正在编写 javascript 代码，我需要在连字符之间提取浮点数或整数。像这样：

```
var string="someText-180.5-200.70-someOtherText"; 
```

我需要得到：

```
var number1="180.5";
var number2="200.70"; 
```

有什么建议吗？（我一点都不擅长正则表达式..grrr）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:15:40.227

一个问题是，一个正则表达式匹配这个： "-180.5-" ，下一个匹配将在 "200.70-someOtherText" 字符串中搜索，所以，当下一次搜索运行不会匹配 200.70 ...我们应该做一点不仅仅是写一个正则表达式。

在我的灵魂中，我剪切了字符串的检查部分，并在字符串的另一部分再次运行正则表达式......并在匹配时执行。

见下面的代码：

```
 function findAllINeed(str){
         result = [];
         while ((match = /(?:\-)(([0-9]+)\.?([0-9]*))(?:\-)/.exec(str)) != null) {    
             str = str.substr(match.index + match[1].length)
             result.push(parseFloat(match[1]));
         }
         return result; 
    } 
```

我试过这个：

```
 findAllINeed("someText-180.5-200.70-someOtherText sd sdf -6 -6.777 7- s 4.55 -4-sdfsdfsdf -45.77-4-")
    [180.5, 200.7, 4, 45.77, 4] 
```

不匹配 -6, -6.7777, 4.55, 7- ...

但是找到'-'字符之间的所有正浮点数或整数我希望这对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T07:58:51.973

虽然其他基于 RegExp 的解决方案有效，但我将提出一个不使用正则表达式的解决方案。我这样做的动机是正则表达式有时难以阅读、修改和/或调试。

此代码返回一个包含字符串中所有浮点数的数组（假设浮点数为正）

```
"someText-180.5-200.70-someOtherText".split("-"). //splits by hyphens
 map(function(elem){
    return parseFloat(elem);//convert each part to float
}).filter(function(elem){
   return elem===elem;//filter out the not-a-numbers,
                      // that is, stuff converting to float failed on
}); 
```

`map/filter`如果您对此更满意，也可以不以“功能性”较低的方式完成此操作。我相信代码的可读性*非常*重要，您应该对自己的代码感到满意。你可以做

```
var str = "someText-180.5-200.70-someOtherText";
var splitStr = str.split("-");
var arrayOfFloats = [];
for(var i=0;i<splitStr.length;i++){
   var asFloat = parseFloat(splitStr[i]);
   if(asFloat===asFloat){ //check for NaN, that is parse float fails
      arrayOfFloats.push(asFloat);   
   }
}
//now arrayOfFloats contains all the floats in your expression 
```

如果您不想匹配第一个和最后一个部分（即，只有严格*在*连字符之间的浮点数）元素，您可以`slice`先匹配它们 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T03:05:26.423

您可以使用以下**正则表达式**来完成您正在寻找的内容：

```
[0-9]*\.?,?[0-9]+ 
```

* * *

## 输入：

*   someText-180.5-200.70-someOtherText

## 输出：

*   180.5
*   200.70

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T07:55:57.543

您可以使用此正则表达式：

```
var string="someText-180.5-200.70-someOtherText";

var match = string.match(/.*?(\d+(\.\d+)?).*?(\d+(\.\d+)?)/);
console.log(match[1]);  // prints 180.5
console.log(match[3]);  // prints 200.70 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T08:01:40.473

```
var numbers = string.match(/[\d.]+/g) 
```

或者，如果您担心多个时期会产生无效数字：

```
var numbers = string.match(/\d+(\.\d+)?/g) 
```

# mvvm - 如何使用 PRISM 和 MEF 将视图注入 UI？

> ID：15289178
> 
> 赞同：6
> 
> 时间：2013-03-08T07:52:23.747
> 
> 标签：mvvm, prism, mef

我已经搜索了一些教程，甚至查看了pluralsite Introduction to PRISM。但是，大多数示例都基于使用统一容器，并且缺少有关如何使用 Mef 容器实现此功能的信息。我的简单 helloworld 模块基于[网络教程](http://www.codeproject.com/Articles/229931/Understand-MVVM-Using-PRISM-by-Hello-World-Silverl#)。我的代码是相同的，除了我只卡在 HelloModule 上并使用 Mef，而不是 Unity，如教程所示：

我的主要问题是如何用我的视图模型初始化我的视图。我通过实验发现的唯一工作方法是在 View 构造函数中初始化视图模型：

```
HelloView.xaml.cs
namespace Hello.View
{
    [Export]
    public partial class HelloView : UserControl, IHelloView
    {
        public HelloView()
        {
            InitializeComponent();
            Model = new HelloViewModel(this);
        }

        public IHelloViewModel Model
        {
            //get { return DataContext as IHelloViewModel; }
            get { return (IHelloViewModel)DataContext; }
            set { DataContext = value; }
        }
    }
} 
```

以及标准模块初始化代码：

```
[ModuleExport(typeof(HelloModule), InitializationMode=InitializationMode.WhenAvailable)]
    public class HelloModule : IModule
    {
        IRegionManager _regionManager;

        [ImportingConstructor]
        public HelloModule(IRegionManager regionManager)
        {
            _regionManager = regionManager;
        }

        public void Initialize()
        {
            _regionManager.Regions[RegionNames.ContentRegion].Add(ServiceLocator.Current.GetInstance<HelloView>());
        }
    } 
```

但是，有人可以告诉正确的方法如何做这件事，我这必须在模块初始化部分完成。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T09:21:36.570

MatthiasG 展示了在 MEF 中定义模块的方法。请注意，视图本身并没有实现 IModule。但是，将 MEF 与 PRISM 结合使用的有趣部分是如何在启动时将模块导入 UI。

我只能在这里原则性地解释该系统，但它可能会为您指明正确的方向。每件事都有很多方法，但这是我理解的最佳实践，也是我在以下方面取得了非常好的经验：

**自举**

与 Prism 和 Unity 一样，这一切都始于 Bootstrapper，它源自`MefBootstrapper`in `Microsoft.Practices.Prism.MefExtensions`。引导程序设置 MEF 容器并因此导入所有类型，包括服务、视图、ViewModel 和模型。

**导出视图（模块）**

这是 MatthiasG 所指的部分。我的做法是 GUI 模块的以下结构：

*   `[Export(typeof(MyModel)]`模型使用属性将自身导出为其具体类型（也可以是接口，参见 MatthiasG） 。标记`[PartCreationPolicy(CreationPolicy.Shared)]`以表示仅创建一个实例（单例行为）。

*   ViewModel 像模型一样将自身导出为其具体类型，并通过构造函数注入导入模型：

    [ImportingConstructor] public class MyViewModel(MyModel model) { _model = model; }

*   View 通过构造函数注入导入 ViewModel，与 ViewModel 导入 Model 的方式相同

*   现在，这很重要：View 使用特定属性导出自身，该属性派生自“标准”`[Export]`属性。这是一个例子：

```
[ViewExport(RegionName = RegionNames.DataStorageRegion)]
public partial class DataStorageView
{
    [ImportingConstructor]
    public DataStorageView(DataStorageViewModel viewModel)
    {
        InitializeComponent();
        DataContext = viewModel;
    }
} 
```

**[ViewExport] 属性**

属性做了`[ViewExport]`两件事：因为它派生自`[Export]`属性，所以它告诉 MEF 容器导入视图。作为什么？这隐藏在它的定义中：构造函数签名如下所示：

```
public ViewExportAttribute() : base(typeof(UserControl)) {} 
```

通过调用`[Export]`type of的构造函数`UserControl`，每个视图都`UserControl`在 MEF 容器中注册。

其次，它定义了一个属性，该属性`RegionName`稍后将用于决定应将视图插入到 Shell UI 的哪个区域。RegionName 属性是接口的唯一成员`IViewRegionRegistration`。属性类：

```
/// <summary>
/// Marks a UserControl for exporting it to a region with a specified name
/// </summary>
[Export(typeof(IViewRegionRegistration))]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
[MetadataAttribute]
public sealed class ViewExportAttribute : ExportAttribute, IViewRegionRegistration
{
    public ViewExportAttribute() : base(typeof(UserControl)) {}

    /// <summary>
    /// Name of the region to export the View to
    /// </summary>
    public string RegionName { get; set; }
} 
```

**导入视图**

现在，系统的最后一个关键部分是*行为*，您将其附加到外壳的区域：`AutoPopulateExportedViews`行为。这将使用以下行从 MEF 容器中导入所有模块：

```
[ImportMany] 
private Lazy<UserControl, IViewRegionRegistration>[] _registeredViews; 
```

这会从容器中导入所有注册为的类型`UserControl`，如果它们具有实现`IViewRegionRegistration`. 因为您的`[ViewExport]`属性确实如此，这意味着您导入了每个标有 的类型`[ViewExport(...)]`。

最后一步是将视图插入区域，bahvior 在其`OnAttach()`属性中执行此操作：

```
/// <summary>
/// A behavior to add Views to specified regions, if the View has been exported (MEF) and provides metadata
/// of the type IViewRegionRegistration.
/// </summary>
[Export(typeof(AutoPopulateExportedViewsBehavior))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class AutoPopulateExportedViewsBehavior : RegionBehavior, IPartImportsSatisfiedNotification
{
    protected override void OnAttach()
    {
        AddRegisteredViews();
    }

    public void OnImportsSatisfied()
    {
        AddRegisteredViews();
    }

    /// <summary>
    /// Add View to region if requirements are met
    /// </summary>
    private void AddRegisteredViews()
    {
        if (Region == null) return;

        foreach (var view in _registeredViews
            .Where(v => v.Metadata.RegionName == Region.Name)
            .Select(v => v.Value)
            .Where(v => !Region.Views.Contains(v)))
            Region.Add(view);

    }

    [ImportMany()] 
    private Lazy<UserControl, IViewRegionRegistration>[] _registeredViews;
} 
```

注意`.Where(v => v.Metadata.RegionName == Region.Name)`。这使用属性的 RegionName 属性来仅获取为特定区域导出的那些视图，您将行为附加到。

该行为会附加到引导程序中的 shell 区域：

```
protected override IRegionBehaviorFactory ConfigureDefaultRegionBehaviors()
{
    ViewModelInjectionBehavior.RegionsToAttachTo.Add(RegionNames.ElementViewRegion);

    var behaviorFactory = base.ConfigureDefaultRegionBehaviors();
    behaviorFactory.AddIfMissing("AutoPopulateExportedViewsBehavior", typeof(AutoPopulateExportedViewsBehavior));
} 
```

我们已经完成了一个完整的循环，我希望这能让您了解 MEF 和 PRISM 是如何实现的。

而且，如果你还不觉得无聊：这是完美的：

[Mike Taulty 的截屏视频](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/12/31/silverlight-4-screencasts-the-managed-extensibility-framework-mef.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:28:14.680

您实现的`HelloView`方式意味着`View`必须知道其在某些情况下的确切实现是`IHelloViewModel`可以的，但意味着您不需要 this `interface`。

对于我提供的示例，我正在使用`property injection`，但`constructor injection`也可以。

如果你想使用，`interface`你可以像这样实现它：

```
[Export(typeof(IHelloView)]
public partial class HelloView : UserControl, IHelloView
{
    public HelloView()
    {
        InitializeComponent();
    }

    [Import]
    public IHelloViewModel Model
    {
        get { return DataContext as IHelloViewModel; }
        set { DataContext = value; }
    }
}

[Export(typeof(IHelloViewModel))]
public class HelloViewModel : IHelloViewModel
{
} 
```

否则它看起来像这样：

```
[Export(typeof(IHelloView)]
public partial class HelloView : UserControl, IHelloView
{
    public HelloView()
    {
        InitializeComponent();
    }

    [Import]
    public HelloViewModel Model
    {
        get { return DataContext as HelloViewModel; }
        set { DataContext = value; }
    }
}

[Export]
public class HelloViewModel
{
} 
```

还有一件事：如果您不想更改`Views`或提供它们的多个实现，则不需要`interface`for 他们。

# javascript - 自定义输入类型=文件行为

> ID：15289182
> 
> 赞同：4
> 
> 时间：2013-03-08T07:52:53.167
> 
> 标签：javascript, jquery, html

我的页面上有一个文件浏览器，使用

```
<input type="file" /> 
```

现在点击浏览按钮，我需要显示一个 JS“确认”弹出窗口。只有在该弹出窗口上单击“确定”时，我应该显示文件浏览器，否则它应该只是取消（不显示文件浏览器/选择器窗口）

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T07:55:46.943

```
$('input[type="file"]').click(function(){
    return confirm("Are you sure you want to see me dance?");
}); 
```

[**现场演示**](http://jsfiddle.net/5Qqqe/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T07:56:53.567

试试这个：

```
<input type="file" onclick="return confirm('Continue ?');"/> 
```

`**[DEMO](http://jsfiddle.net/H2bVP/)**`

或使用 onclick 事件处理程序：

```
 $('input[type=file]').click(function(){
    return confirm("Continue ?");
 }); 
```

`**[DEMO2](http://jsfiddle.net/p5Csc/1/)**`

# opengl - gluLookAt 和 MODELVIEW MATRIX

> ID：15289184
> 
> 赞同：0
> 
> 时间：2013-03-08T07:53:07.520
> 
> 标签：opengl, glulookat

我觉得我了解模型视图矩阵的用法和`gluLookAt`. 也就是说，通过声明`gluLookAt(ex,ey,ez,lx,ly,lz,ux,uy,uz)`，可以轻松设置一种直接查看某个点的方式。

我的问题是 - 由于`gluLookAt`后乘当前矩阵，假设您在调用之前加载标识`gluLookAt`，并且当前矩阵模式是模型视图，如果您绘制立方体会发生什么？

所以是这样的：

```
glMatrixMode(GL_PERSPECTIVE);
glLoadIdentity();
glFrustum(-5, 5, -5, 5, 15, 150);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(0, 0, 16, 0, 0, 0, 0, 1, 0);
glutSolidCube(1.0); 
```

在世界坐标中渲染的立方体在哪里？出于某种原因，在这种情况下，它是在世界原点渲染的，您可以在视口中看到它 - 但为什么呢？不应该`gluLookAt`用视图旋转和平移修改模型视图矩阵吗？立方体不应该用里面的相机来渲染吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:26:38.923

glutSolidCube(1.0) 绘制一个以世界原点为中心的边长为 1.0 的立方体。

所以顶点是：

*   (-0.5, -0.5, -0.5)
*   (-0.5, +0.5, -0.5)
*   (-0.5, +0.5, +0.5)
*   (-0.5, -0.5, +0.5)
*   (+0.5, -0.5, -0.5)
*   (+0.5, +0.5, -0.5)
*   (+0.5, +0.5, +0.5)
*   (+0.5, -0.5, +0.5)

现在 gluLookAt(0, 0, 16, 0, 0, 0, 0, 1, 0) 生成一个 modeView 矩阵，将这些坐标转换为相机坐标。

由于相机位置仅相对于默认相机位置 (0,0,0) 平移了 (0,0,16)，因此这个模型视图矩阵基本上将每个顶点平移了 (0,0,-16)。

清除？

# opengl - 在基于着色器的核心配置文件 OpenGL 中“反转 Z 轴”的方法？

> ID：15289190
> 
> 赞同：1
> 
> 时间：2013-03-08T07:53:25.033
> 
> 标签：opengl, matrix, projection, perspective

在我的业余爱好者基于着色器（非 FFP）的 GL（3.2+ 核心）“引擎”中，世界空间和模型空间中的一切都是“左撇子”（并保持这种方式），所以 X 轴从 -1（“左”）到 1（“右”），Y 从 -1（“下”）到 1（“上”），Z 从 -1（“近”）到 1（“远”） .

现在，默认情况下，在 OpenGL 中，NDC 空间的工作方式相同，但剪辑空间没有，据我所知，这里的 z 从 1（“近”）延伸到 -1（“远”）。

同时，我想理想地继续使用“有点像非官方准标准”的矩阵函数来进行观察和透视，目前定义为：

```
func (me *Mat4) Lookat(eyePos, lookTarget, upVec *Vec3) {
    l := lookTarget.Sub(eyePos)
    l.Normalize()
    s := l.Cross(upVec)
    s.Normalize()
    u := s.Cross(l)
    me[0], me[4], me[8], me[12] = s.X, u.X, -l.X, -eyePos.X
    me[1], me[5], me[9], me[13] = s.Y, u.Y, -l.Y, -eyePos.Y
    me[2], me[6], me[10], me[14] = s.Z, u.Z, -l.Z, -eyePos.Z
    me[3], me[7], me[11], me[15] = 0, 0, 0, 1
}

//  a: aspect ratio. n: near-plane. f: far-plane.
func (me *Mat4) Perspective(fovY, a, n, f float64) {
    s := 1 / math.Tan(DegToRad(fovY)/2) // scaling
    me[0], me[4], me[8], me[12] = s/a, 0, 0, 0
    me[1], me[5], me[9], me[13] = 0, s, 0, 0
    me[2], me[6], me[10], me[14] = 0, 0, (f+n)/(n-f), (2*f*n)/(n-f)
    me[3], me[7], me[11], me[15] = 0, 0, -1, 0
} 
```

因此，为了让我的世界空间相机（正-Z）与查看（负-Z）一起工作，按照这个伪代码：

```
// world-space position:
camPos := cam.Pos 
// normalized direction-vector, up/right/forward are 1 not -1:
camTarget := cam.Dir
// lookat-target:
camTarget.Add(&camPos)
// invert both Z:
camPos.Z, camTarget.Z = -camPos.Z, -camTarget.Z
// compute lookat-matrix:
cam.mat.Lookat(&camPos, &camTarget, &Vec3{0, 1, 0}) 
```

效果很好。在所有 6 个自由度中移动相机会产生正确的屏幕移动和正确的新相机世界空间坐标。

但是几何图形仍然在 Z 轴上反转。当我定位两个框时，A 在 (-2, 1, -2) 处出现在靠近左侧，B (2, 1, 2) 出现在最右侧，然后 A 出现在最左侧，B 出现在靠近右侧. Z 在这里仍然是倒置的。

现在，这些节点有自己的世界空间坐标，并从他们自己的模型到世界矩阵更新。我不应该在那里反转 posZ，因为它们形成了一个子节点的层次结构，它们与它们的父变换以及所有这些相乘。他们仍然在模型或世界空间中，根据我的法令，它们是左撇子。

他们从世界到相机的计算发生在我最后的 CPU 上，而不是在只获得一个最终（mvp/剪辑空间）矩阵的顶点着色器中。

当这种情况发生时——世界空间对象矩阵与剪辑空间观察和投影矩阵的乘法——那时我需要以某种方式反转 Z。

最好的方法是什么？或者，更一般地说，什么是常见的工作方式？我是否必须修改投影以接受左手但输出到 GL 右手？如果是这样，怎么做？然后我是否也必须修改lookat？有没有一种聪明的方法来做这一切，而不必修改有点标准的观察/投影矩阵，同时也保持左手坐标的模型变换矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:08:04.093

在 Perspective 中，将 me[11] 从 -1 更改为 1 应该按照您描述的方式反转 z 轴。如果这不正确，请尝试否定我[10]。当然，因为 z 轴是倒置的，所以你的旋转方向也会受到影响。如果我记得围绕 y 轴的右旋转，以及 x 轴可能会反转。如果是这种情况，您应该能够否定旋转以抵消它。

# c# - linq中的分组

> ID：15289195
> 
> 赞同：0
> 
> 时间：2013-03-08T07:53:48.270
> 
> 标签：c#, list, linq, linq-group

我有以下文件清单：

```
List<DocumentInfo> list1 = new List<DocumentInfo>()
{
   new DocumentInfo { Name = "Customer1", DocCount = 5 },
   new DocumentInfo { Name = "Customer1", DocCount = 10 },
   new DocumentInfo { Name = "Customer1", DocCount = 5 },
   new DocumentInfo { Name = "Customer2", DocCount = 4 },
   new DocumentInfo { Name = "Customer2", DocCount = 6 },
   new DocumentInfo { Name = "Customer3", DocCount = 3 }
}; 
```

如何使用 Linq 根据“名称”和“DocCount”的总和对上述列表进行分组并存储在另一个列表中？我想要以下内容：

```
Name = "Customer1", DocCount = 20
Name = "Customer2", DocCount = 10
Name = "Customer3", DocCount = 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T07:55:51.413

```
var results = list1.GroupBy(i => i.Name)
                   .Select(g => new
                                {
                                    Name = g.Key,
                                    DocCount = g.Sum(i => i.DocCount)
                                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T07:56:30.883

```
var list2 = list1.GroupBy(x => x.Name).Select(g => new DocumentInfo()
                                      {
                                          Name = g.Key,
                                          DocCount = g.Sum(x => x.DocCount)
                                      }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T07:56:36.800

试试这个：

```
list1.GroupBy(di => di.Name).Select(g => new DocumentInfo {Name = g.Key, DocCount = g.Sum(dc => dc.DocCount)}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T07:57:08.723

试试这样；

```
var anotherlist = list1.GroupBy(g => g.Name)
                  .Select(s => new
                  {
                      Name = s.Key,
                      DocCount = s.Sum(i => i.DocCount)
                  }); 
```

很简单，通过分组来获取它们的总和`DocCount`及其`Name`属性`Name`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T08:00:49.307

```
var result= from item in list1
            group item by item.Name
            into g
            select g;
var groupedInfo = result.SelectMany(group => group);
foreach(var g in groupedInfo)
{
     //Do Summation
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-02T01:48:40.110

这是另一种方法

```
var sumOfDocs = from doc in list1 group doc by doc.Name into g 
                select new { DocName = g.Key, DocSum = g.Sum(i => i.DocCount) }; 
```

# sql - 数据库连接错误

> ID：15289197
> 
> 赞同：0
> 
> 时间：2013-03-08T07:54:13.140
> 
> 标签：sql, winforms, connection

我有 win 应用程序，当我想将数据库连接到我的应用程序错误时出现此错误：

> 尝试为文件 C:\Users\Aren\Desktop\DB\REGISTRATION.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

```
public class DALBase
{
    protected SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\\Users\\Aren\\Desktop\\DB\\REGISTRATION.mdf;integrated Security=true ; User Instance=True");
    protected SqlCommand com = new SqlCommand();
    protected SqlDataAdapter da = new SqlDataAdapter();
    protected DataSet ds = new DataSet();

} 
```

* * *

```
public DataSet GetStudent(string filter)
    {

        DataSet dset = new DataSet();
        using (SqlCommand cmd = new SqlCommand())
        {
            string cmdstring = string.Format("Select * from {0}"
               , Common.Data.Student.Table_Name);

            if (!string.IsNullOrEmpty(filter)) cmdstring += " where " + filter;

            cmd.CommandText = cmdstring;
            cmd.Connection = this.con;
            cmd.Connection.Open();
            cmd.CommandText = cmdstring;
            cmd.Connection = this.con;
            SqlDataAdapter adapter = new SqlDataAdapter(cmd);
            adapter.Fill(dset, Common.Data.Student.Table_Name);
            return dset;
        }
    } 
```

注意：我的解决方案中还有 3 个项目，DALBASE 和 GETSTUDENT 方法在一个项目中，我从其他项目中调用它们来为我获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:37:30.393

我相信我过去遇到过这个问题。在我的情况下，我在 Visual Studio 中加载了一个应用程序，该应用程序在运行时会加载数据库并附加到 SQL Server。不知何故，当我关闭应用程序时，它没有从 SQL SERVER 中分离数据库，下次我运行应用程序时，它会抱怨类似的消息，如果不是相同的消息。

如果您安装了 SSMS，请打开 .\SQLEXPRESS 实例并查看您是否附加了 Registration*.mdf 文件。或者，如果您没有 SSMS，请打开命令行并输入...

```
sqlcmd -S .\SQLEXPRESS -Q "select name from sys.databases" 
```

这将向您显示该实例上附加/在线的所有数据库。

希望这可以帮助。

# database - 来自数据库的标签云

> ID：15289205
> 
> 赞同：0
> 
> 时间：2013-03-08T07:55:06.640
> 
> 标签：database, tags, cloud

我将标签存储在我网站的用户输入的表格中。所以基本上我只需要跑，

```
<?php echo $thing->tags; ?> 
```

这将返回该事物的所有标签。现在它只是吐出一个标签列表，如“香蕉苹果水果，蓝莓”，其中标签都是逗号和空格分隔的。我知道为了创建标签云，我需要将标签吐出到 ul，然后在 li 上运行 jquery 脚本。我想如果我能让我的标签出现在表单中，

```
<ul>
<li>bananas</li>
<li>apples</li>
<li>fruit</li>
<li>blueberries</li>
</ul> 
```

然后我将能够编写一个 jquery 脚本来将这些元素中的每一个放在小标签云框中。但我不知道如何让标签以这种形式出现。当我回显标签时，我可以应用一些可以为我执行此操作的 php 函数吗？

更新：我使用 preg_split，

```
<?php $tags=preg_split("/[\s,]+/", "$things->tags"); var_dump($tags);?> 
```

现在它们被列在一个数组中——逗号和空格分隔。我现在唯一的挑战是将数组的这些元素包含在 li 标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:55:19.060

好吧，这个是我自己想出来的。如上所述创建数组后，我使用了

```
<?php foreach ($tags as $row) : ?>
<li><? echo $row[0]; ?></li>
<li><? echo $row[1]; ?></li>
<li><? echo $row[2]; ?></li>
<? endforeach; ?> 
```

等等

# javascript - window.frame.openDialog 在 MAC 操作系统上不起作用

> ID：15289209
> 
> 赞同：1
> 
> 时间：2013-03-08T07:55:15.193
> 
> 标签：javascript, appjs

window.frame.openDialog 在 MAC 操作系统上不起作用。我无法从“打开”对话框中选择文件。任何帮助将不胜感激。

# iphone - 如何在提交到应用商店之前预测应用的原始大小

> ID：15289215
> 
> 赞同：2
> 
> 时间：2013-03-08T07:55:41.557
> 
> 标签：iphone, ios, xcode

我要为iOS创建一个应用程序。它需要大量的图像。所以我对我的应用程序的最终大小真的很紧张。我想知道之前有什么方法可以确定应用程序的最终大小创建应用程序二进制文件并提交到应用程序商店。我的意思是，如果我右键单击项目文件夹并选择 getInfo，那么显示的大小为 20 MB（我没有创建应用程序二进制文件）。现在我想知道，从我的 Xcode 项目创建应用程序二进制文件后，我的 20 MB 会发生什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T07:59:00.460

*   归档项目（Product-->Archive，需要选择iOS设备而不是模拟器）
*   这将自动打开组织者
*   在管理器中，图标正下方有一个“估计 App Store 大小”按钮：

![在此处输入图像描述](../Images/f0510738922304a3e9bc57b5db9ee13c.png)

您可能会发现应用商店的大小与您构建的 IPA 文件的大小不同 - 这是因为用于为应用商店创建应用程序的加密和签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:59:40.117

为什么你不能不提交就直接构建应用程序？

# iphone - 关于 UISearchBar:textDidChange 的 predicateWithFormat

> ID：15289219
> 
> 赞同：0
> 
> 时间：2013-03-08T07:55:54.743
> 
> 标签：iphone, ios, objective-c, nspredicate, uisearchbardelegate

我有一个问题，我不知道为什么方法2无法获得价值？

**方法一：可以获得价值！**

```
-(void) searchBar:(UISearchBar *) searchBar textDidChange:(NSString *)searchText{

    NSString *firstName = @"55566666666";

    AllMainEventRows3 = [AllMainEventRows mutableCopy];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@",firstName];
    NSArray *filteredArray = [AllMainEventRows3 filteredArrayUsingPredicate:predicate];
    NSLog(@"filteredArray: %@", filteredArray);
} 
```

**日志：**

```
filteredArray: (
        {
        JoinSuccess = 55566666666;
        bmabout = "";
        bmaddr = "\U53f0\U5317\U5e02\U9752\U5cf6\U6771\U8def99\U865f10F-6";
}) 
```

**方法二：无法取值！**

```
-(void) searchBar:(UISearchBar *) searchBar textDidChange:(NSString *)searchText{

    AllMainEventRows3 = [AllMainEventRows mutableCopy];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@",searchText];
    NSArray *filteredArray = [AllMainEventRows3 filteredArrayUsingPredicate:predicate];
    NSLog(@"filteredArray: %@", filteredArray);
} 
```

**日志：**

```
filteredArray:(

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:21:25.697

`textDidChange` **告诉代理用户更改了搜索文本**是[UISearchBarDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBarDelegate_Protocol/Reference/Reference.html)的代理方法，每当在搜索栏中更改文本时都会调用它，我认为第二种方法不会获得价值，因为自动触发代理方法意味着您没有调用它们并且您不能创建多个具有相同名称的委托方法。您可以为此目的声明一些自定义方法。

谓词有问题？将参考[NSPredicate 的用法](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793-CJBDBHCB)

# php - a list of numbers while stripping everything but numbers

> ID：15289222
> 
> 赞同：2
> 
> 时间：2013-03-08T07:56:05.390
> 
> 标签：php, preg-replace, explode

I have a list of numbers like this:

```
123-4-5679 tha
546-5465-7 dsf
98-4564-64 ds8 
```

I want to explode into it's own value while striping everything but the numbers. I am doing but it seems to keep everything but it does give me a value per line

```
$pn = preg_replace("/\r/", "\n", preg_replace("/\r\n/", "\n", $_POST['phone']));
$phone_numbers = explode("\n", $pn); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:08:07.987

You can also do it with one quick line in regex.

```
preg_match_all(":([0-9-]+):mi", $_POST["phone"], $match); 
```

Here's an [example](http://sandbox.onlinephpfunctions.com/code/63d670a2ce5ab3fcdfe2c499f5d17c8516617218)

**Edit:** To remove hyphens iterate through the results and replace the hyphens with an empty string

```
preg_match_all(":([0-9-]+):mi", $_POST["phone"], $matches);

// remove extra match array
$matches = array_shift($matches);

foreach( $matches as & $match )
{
   $match = preg_replace(":-:", "", $match);
} 
```

Updated [example](http://sandbox.onlinephpfunctions.com/code/4e2b7b77b907880fa9e2d3570edb4c5032046cd3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T07:59:30.513

I'd strip everything but digits and newlines:

```
$cleaned = preg_replace("/[^0-9\n]/", "", $_POST['phone']); 
```

And then `explode` it:

```
$numbers = explode("\n", $cleaned); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:18:25.743

Keep all numbers, match everything else but the line-separators:

```
~(?![\d-]+).*~ 
```

Usage in PHP to replace each match with an empty string

```
$numbers = preg_replace("~(?![\d-]+).*~", '', $phone); 
```

Result:

```
123-4-5679
546-5465-7
98-4564-64 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-08T07:58:57.303

Ok am i missing somethins?

```
$phone = explode(' ', $_POST['phone']);
$phone_number = $phone[0]; 
```

Isn't this working?

# php - Apache以nobody用户身份运行php脚本，cron以用户身份运行php脚本

> ID：15289224
> 
> 赞同：0
> 
> 时间：2013-03-08T07:56:16.070
> 
> 标签：php, permissions, cron, cpanel

我的默认 cpanel 设置以用户“nobody”的身份运行 apache。因此，当我通过输出文件的浏览器运行 php 脚本时，该文件的所有权为 nobody：nobody。当我从以用户“fred”身份登录的 cron 作业运行脚本时，输出文件归 fred:fred 所有，我需要浏览器和 cron 来覆盖同一个文件。我遇到的问题是，如果一个“用户”创建了文件，那么另一个用户无法覆盖它。请您让我知道根本问题在哪里以及可能的解决方案。文件的权限为 0775。

*   我是否需要设置组 - 将用户添加到与 nobody 相同的组？如果有怎么办？
*   如何让 cron 作业以用户 nobody 身份运行？

非常感谢，劳埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:14:14.567

**将文件的权限**更改为**0777**后尝试编写代码。但这会产生一个安全问题，因为任何人都可以编辑您的文件。

我有一个你需要实现的逻辑：

1.  **创建一个 shell 脚本，将临时**文件的内容复制到您的**实际文件**中。
2.  在 PHP 中，您只需要更新**临时**文件，Shell 可以读取它，因为临时文件将对每个人都有读取权限。
3.  使用**ssh2_exec**命令使用您的 Linux 用户名和密码执行 shell 脚本。

对于**ssh2_exec**手册，请点击以下链接：[http ://php.net/manual/en/function.ssh2-exec.php](http://php.net/manual/en/function.ssh2-exec.php)

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:21:14.530

好的，我对此的解决方案是为用户“nobody”创建一个 crontab。我有一个标准的 cpanel 安装，所以去 /var/spool/cron 为没人创建了一个条目。运行 crontab -e 对其进行编辑和安装。现在php在cron作业中作为nobody运行，就像通过浏览器一样。所有写入的文件都属于nobody，只有nobody 的rw 权限。

# opencv - OpenCV和用浮点数据读取图像

> ID：15289225
> 
> 赞同：3
> 
> 时间：2013-03-08T07:56:21.303
> 
> 标签：opencv

我使用 OpenCV 读取图像。然后我使用 Matlab 加载相同的图像。然后我显示图像。对于 OpenCV 加载的图像，图像内部没有图片，只有灰色平面。对于 Matlab 加载的图像，它具有我想要的图像。图像像素值是非常小的浮点数据，例如 0.0021。我用来加载图像的代码如下所示。

```
`Mat image(IMAGE_ROW, IMAGE_COL, CV_64FC3);
Mat  gray(IMAGE_ROW, IMAGE_COL, CV_64FC1);
image = imread(filespath, CV_LOAD_IMAGE_COLOR );// Read the file
cv::imshow("Image", image);
cvtColor( image, gray, CV_BGR2GRAY, 1);
cv::imshow("gray", gray);` 
```

为什么我不能拥有与 Matlab 加载的图像相同的图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T09:26:39.667

如前所述，您不能使用 imwrite()/imread() 来做到这一点。

但您可以使用 FileStorage 保存/加载浮点 Mats，如下所示：

```
Mat fm = Mat::ones(3,3,CV_32FC3); // dummy data

FileStorage fs("my.yml", FileStorage::WRITE );
fs << "mat1" << fm;  //choose any key here, just be consistant with the one below 
```

并回读：

```
Mat fm;
FileStorage fs("my.yml", FileStorage::READ );
fs["mat1"] >> fm; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:16:01.427

`cv::Mat`调用前不需要显式初始化图像`cv::imread`，它会根据读取的图像大小和格式正确初始化图像。所以你用 . 初始化你的图像并不重要`(IMAGE_ROW, IMAGE_COL, CV_64FC3)`。

OpenCV 没有写入/读取浮点图像的能力。来自[cv::imwrite](http://opencv.willowgarage.com/documentation/cpp/highgui_reading_and_writing_images_and_video.html#cv-imwrite)手册：

> 使用此功能只能保存 8 位（或在 PNG、JPEG 2000 和 TIFF 的情况下为 16 位）单通道或 3 通道（具有“BGR”通道顺序）图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-25T09:12:19.010

您可以使用 opencv 加载浮动图像`Mat img= imread(filename, CV_LOAD_IMAGE_ANYDEPTH);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-01T14:15:27.637

尝试了@berak 解决方案，但出现“Missing , between elements”异常。如[本](http://code.opencv.org/issues/969)错误报告所述，您必须在写入操作后释放 FileStorage 对象，否则将无法正确完成文件写入并因此引发该异常。那么，codelet 的更正版本应该是：

```
Mat fm = Mat::ones(3,3,CV_32FC3); // dummy data
FileStorage fs("my.yml", FileStorage::WRITE );
fs << "mat1" << fm;  //choose any key here, just be consistant with the one below
fs.release(); //Release the file and finish the writing. 
```

# java - 在 Hadoop mapreduce 中如何处理负载均衡？

> ID：15289226
> 
> 赞同：4
> 
> 时间：2013-03-08T07:56:22.430
> 
> 标签：java, apache, hadoop, mapreduce, distributed

在 Hadoop mapreduce 中如何处理负载均衡？我正在编写一个分布式应用程序，其中服务器根据基准测试、可用内存、CPU 内核数量、CPU 使用率、可用 GPU 数量/使用情况将作业分配给工作节点？我对 mapreduce 不是很有经验，并且已经阅读了 apache 网站上的一些文档，但仍然不确定如何解决这个问题。我可以进行基准计算并获取所有这些信息，然后通过算法动态拆分输入吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:34:22.180

“MapReduce 是一种用于处理和生成大型数据集的编程模型和相关实现”，摘自 MapReduce 论文的摘要。

正如您在评论中所说，您的项目似乎不是数据密集型而是计算密集型，因此我认为 MapReduce 不是您需要使用的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T06:15:24.487

MapReduce 系统的性能在很大程度上取决于均匀的数据分布。Apache MapReduce 框架使用一种简单的方法来分配工作负载并将相同数量的集群分配给每个 reducer。

负载不平衡会增加处理时间，甚至会因 reducer 任务的高运行时复杂性而加剧。需要一种自适应负载平衡策略来解决基于给定成本模型估计分配给减速器的任务成本的问题。

# asp.net-mvc-3 - 在视图中通过 IEnumerable foreach

> ID：15289232
> 
> 赞同：1
> 
> 时间：2013-03-08T07:56:37.230
> 
> 标签：asp.net-mvc-3, ienumerable

有人可以帮忙吗，不知道我做错了什么：

我的视图模型：

```
public class ScormModuleViewModel
{
  public IEnumerable<ScormModuleInfo> ScormModuleInfo { get; set; }
  public int CurrentPage { get; set; }
  public int PageSize { get; set; }
  public double Total { get; set; }
  public int RecordsPerPage { get; set; }
} 
```

然后我的控制器：

```
public ActionResult Index(int? page)
{
  List<ScormModuleInfo> modules = new List<ScormModuleInfo>();
  foreach (var directory in Directory.EnumerateDirectories(scormRootDir))
  {
     ScormModuleInfo module = new ScormModuleInfo();
     module.ScormModule = ZincService.ScormService.GetScormModule(scormTitle, scormDirectory);

      if (module.ScormModule != null)
        module.Installed = true;
      else
      {
        module.Installed = false;
        module.ScormModule = new ScormModule();
        module.ScormModule.Directory = scormDirectory;
        module.ScormModule.Title = scormTitle;
      }

      module.ScormModule.EntryPointRef = scormEntryPointRef;
      module.ScormModule.IdentifierRef = scormIdentifierRef;
      module.ScormModule.LaunchHeight = scormLaunchHeight;
      module.ScormModule.LaunchWidth = scormLaunchWidth;
      module.ScormModule.LaunchResize = scormLaunchResize;
      module.ScormModule.RelativeHtmlPath = scormRelativeHtmlPath;
      module.ScormModule.SchemaVersion = scormSchemaVersion;

      if (module.Installed)
      {
        // TODO: Save changes to module
        //ZincService.ScormService.UpdateScormModuleSettings(
      }

      modules.Add(module);
      noOfScormPackages++ ;

    }
  }

  ScormModuleViewModel model = new ScormModuleViewModel();
  model.ScormModuleInfo = modules;
  model.CurrentPage = page.GetValueOrDefault(1);
  model.PageSize = PageSizeSettings.ScormPackages;
  model.Total = noOfScormPackages;

  // Now iterate over modules and read imsmanifest.xml file for details of entry point and resources required.

  return View(model);
 } 
```

和我的观点：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<List<Zinc.Web.Areas.Admin.ViewModels.Scorm.ScormModuleViewModel>>" %>

      foreach (var module in Model)
   { %>
 <li>
   <div class="col1">
     <a href='javascript:LoadTrainingModuleWithDedicatedAPIObj("<%= module.ScormModuleInfo.r   .sc.ScormModule.RelativeHtmlPath %>/<%= module.ScormModule.EntryPointRef %>", "<%: module.ScormModule.Title %>", "<%: module.ScormModule.LaunchWidth %>", "<%: module.ScormModule.LaunchHeight %>");'>
       <% if (module.ScormModule.Title.Length < 70)
          { %>
         <%: module.ScormModule.Title%>
       <% }
          else
          { %>
          <%: module.ScormModule.Title.Substring(0, 70)%>....
       <% } %>
     </a>
   </div> 
```

我在所有模块下都得到了红线。特性？我不明白，我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:58:24.957

`Model`是你的视图模型。`Model.ScormModuleInfo`是`ScormModuleInfo`类型的 IEnumerable。

```
foreach (var module in Model.ScormModuleInfo) 
```

在您的控制器中，您传递`ScormModuleViewModel`给查看不是`List<ScormModuleViewModel>`

所以替换

```
System.Web.Mvc.ViewPage<List<Zinc.Web.Areas.Admin.ViewModels.Scorm.ScormModuleViewModel>> 
```

至：

```
System.Web.Mvc.ViewPage<Zinc.Web.Areas.Admin.ViewModels.Scorm.ScormModuleViewModel> 
```

# javascript - 计算 observable 的问题

> ID：15289245
> 
> 赞同：1
> 
> 时间：2013-03-08T07:57:22.350
> 
> 标签：javascript, jquery, knockout.js

我正在使用淘汰赛-2.2.0.js。我有以下模型：

```
function Person(name, age, city)
{
 this.Name = ko.observable(name);
 this.Age = ko.observable(age);
 this.City = ko.observable(city);

 ko.computed(function(){

   //Is there any way to execute this section whenever Name, Age, City any 
   //of this observable changes without including this.Name, this.Age and 
   //this.City inside it

 }, this).extend({ throttle: 500 });
} 
```

我知道我要问的有点奇怪，但我想知道有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:06:45.767

使用自定义绑定。自定义绑定内部有一个“更新”功能。当任何可观察值发生变化时，该更新函数会自动调用

[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:11:53.523

最简单的方法是调用`ko.toJS(this)`你的计算。这通常用于从视图模型中构建一个“干净”的对象。作为构建该对象的一部分，它将解开所有可观察对象（创建依赖项）。因此，每当任何依赖项发生变化时，都会触发您的计算。

这是诸如“脏标志”之类的基础：[http ://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

您可以`throttle`以这种方式与您的计算一起使用。

# html - 当其他不再可见时，Boostrap 让 span 占用空间

> ID：15289246
> 
> 赞同：2
> 
> 时间：2013-03-08T07:57:28.277
> 
> 标签：html, css, twitter-bootstrap

我在 joomla 中使用 twitter 引导带，我遇到了一个小问题，我的左栏在平板电脑上消失了（它的意思是），但是当它消失时，内容不会占用左栏的空间，所以这很奇怪平板电脑的间隙...

我将如何解决这个问题？[JSFIDDLE](http://jsfiddle.net/dawidvdh/beDR5/1/)

这是HTML：

```
<div class="row-fluid">
<!--LEFT-->
    <div class="span3 pull-left left_bar visible-desktop">
         It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>
<!--LEFT-->

<!--CONTENT-->
    <div class="span6 content pull-left">
        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.
     </div>
<!--CONTENT-->    

<!--RIGHT-->
    <div class="span3 pull-right right_bar hidden-phone">
        t is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.
    </div>
<!--RIGHT-->
</div> 
```

任何帮助非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:57:13.390

问题是因为 class="visible-desktop" 。使用此类，左侧栏将始终在桌面上可见，而在平板电脑和移动设备上将隐藏。

使用下面的媒体查询来排列列，以解决它们之间的空白。

```
@media (min-width: 768px) and (max-width: 979px) {
    .row-fluid .right_bar {
     width: 44.928%;

  }
} 
```

这是一个 jsfiddle 演示[列重排](http://jsfiddle.net/shail/beDR5/6/show)

# objective-c - 从另一个 ViewController 刷新 ViewController 中的 WebView

> ID：15289248
> 
> 赞同：0
> 
> 时间：2013-03-08T07:57:49.667
> 
> 标签：objective-c, webview, protocols, popover

嗨，我相对还是个目标 C 的新手 - 但在我需要完成的事情的深处。

当我单击其弹出表格单元格时，我试图刷新 ViewController 中的 webview，其 tableView 是从另一个 ViewController 生成的。

我已经阅读了我需要使用@protocol 的所有地方。所以我实现了如下：

在生成弹出框的 .h 文件中，我插入了：

```
@protocol updateViewController

-(void)updateView;

@end 
```

然后我添加了一个属性并合成：

```
@property (nonatomic, retain) id <updateViewController> viewControllerDelegate; 
```

在我插入的 tableview 的 .h 文件（用作弹出框）中：

```
#import "NDSClassViewController.h"

@interface NDSClassMainMenuViewController : UITableViewController <updateViewController> 
```

现在我想从 web 视图所在的 viewController 的 .m 文件中访问该方法来刷新它。

我不能按照指示使用 [updateViewController 方法名*]*，所以我一定是误解了一些东西。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:24:11.317

给你`yourtableview.viewControllerDelegate=self`创建 webview 的 viewcontroller 的 in viewdidload
所以 viewControllerDelegate 知道它必须用 webview 调用 viewcontroller 中实现的方法

# c - 将 make 与 -j4 或 -j8 一起使用

> ID：15289250
> 
> 赞同：62
> 
> 时间：2013-03-08T07:58:04.193
> 
> 标签：c, opencv, makefile

我有 4 个处理器，正在编译一个需要大量处理器的应用程序。我读到 OpenCV 建议使用`make`开关`-j4`；我应该改用`-j8`? 为多个处理器制作有什么好处？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-08T13:26:42.503

上面的答案大部分都是正确的。但是，细节有点误导。例如，不需要为“管理线程”添加额外的作业（注意：`make`实际上不是多线程的）。 `make`永远不会将自己视为一项工作`-j`，因此，正如惠更斯上面所说，如果您说`-j5`您将运行 5 个编译工作，而不是 4 个加 make。

大多数人使用 [核心数量] + [一些填充] 的原因与它的需求无关`make`，而是与编译器的性质有关。编译器实际上只是一个非常复杂的文本翻译工具：它以一种形式读取文本并将其转换为另一种形式的“文本”（二进制）。其中很多（尤其是当您的语言变得更加复杂时，例如 C++）需要大量 CPU。但它也需要大量的磁盘 I/O。磁盘 I/O 很慢，因此当一个编译器在等待来自磁盘的一些数据时，内核会安排其他作业运行。这就是为什么您可以有效地拥有超过同时运行的内核编译数量。

在你开始看到收益递减之前你能得到多大`-j`的收益（你的构建实际上开始变慢，在某些时候，更多`-j`）完全取决于你的硬件、你正在做的构建类型等。知道的唯一方法当然是实验。

但是，[核心数]+[几个] 通常是一个很好的近似值。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-03-08T08:04:41.107

正如您所说，该`-j`标志告诉 make 允许产生提供的“线程”数量。理想情况下，每个线程都在自己的核心/CPU 上执行，因此您的多核/CPU 环境可以充分利用。

`make`本身不编译源文件。这是由编译器 (gcc) 完成的。Makefile（输入`make`）包含一组目标。每个目标都有一组依赖项（在其他目标上）和如何构建目标的规则。`make`读取 Makefile(s) 并管理所有目标、依赖项和构建规则。除了编译源文件之外，您还可以使用它`make`来执行任何可以由 shell 命令描述的任务。

如果将允许的线程数设置得太高，则无法将每个线程调度到自己的核心上。需要额外的调度（上下文）开关来让所有线程执行。这种额外的资源使用显然会导致性能下降。

有多个经验法则，但我想设置为总计`<number of cores> + 1`是最常见的。这背后的想法是，所有核心都有自己的线程，并且还有一个额外的管理线程来处理目标并且接下来要构建。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T08:30:19.857

每个线程一个 CPU 加上一个管理器/加载器。由于从 CPU 的角度来看，执行磁盘操作的线程在技术上几乎是空闲的，因此将内核总数加一。

如果 CPU 使用超线程，您可以安全地将每个内核计为两个内核并将线程数加倍，因此四核 Intel Core i7 应该得到 -j9（八个虚拟内核加上管理器。）在四核 AMD 上使用 -j5

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-08T08:01:36.800

该`-j`选项仅用于加速应用程序构建，它确定可以为构建生成多少作业`make`。您可以设置`-j<nb core>`甚至更高`-j<nb-core * 1.5>`，以便编译可以并行进行。

它对编译后的代码没有影响。

对于 4 核系统，您可以尝试`make -j6`. 如果 make 可以运行并行构建，它将启动多达 6 个同时编译过程（例如 6 个对 gcc 的调用）。

# msp430 - 使用笔记本电脑控制 MSP430 PWM

> ID：15289251
> 
> 赞同：1
> 
> 时间：2013-03-08T07:58:07.777
> 
> 标签：msp430

我编写了一个代码，该代码从笔记本电脑获取两位数并将 PWM 占空比更改为该数字。这是我需要通过 UART 控制电机速度的更大要求的一部分。

```
#include "io430g2553.h"
#include <stdint.h>

void PWM(uint8_t duty_cycle);
void PWM_Config();

int main( void )
{
  // Stop watchdog timer to prevent time out reset
  WDTCTL = WDTPW + WDTHOLD;
   WDTCTL = WDTPW + WDTHOLD;
  BCSCTL1 = CALBC1_1MHZ;                  // Run at 1 MHz
  DCOCTL = CALDCO_1MHZ;                   // Run at 1 MHz

   PWM_Config();
   PWM(5);
   __delay_cycles(5000000);
   PWM(15);
    __delay_cycles(5000000);
   PWM(25);
   __delay_cycles(5000000);
   PWM(50);
    __delay_cycles(5000000);
    PWM(25);
    __delay_cycles(5000000);
     PWM(15);
    __delay_cycles(5000000);
     PWM(5);
   while(1)
   {}

}

void PWM_Config()
{
  P1OUT &= 0x00; // Clearing P1OUT 
  P1SEL |= BIT6 ;
  P1SEL2 &= ~BIT6 ;
  P1DIR |= BIT6; // Configuring P1.6 as Output

}

void PWM(uint8_t duty_cycle)
{
 TA0CTL =0;
 TA0CTL |= TACLR; 
 TA0CCR1 |= (duty_cycle*100);
 TA0CCR0 |= 10000; 
 TA0CTL |= TASSEL_2 + MC_1 + ID_0;// Register TA0CTL -> SMCLK/8, Up mode
 TA0CCTL1 |= OUTMOD_7 ;//Set/Reset Mode
 TA0CCTL0 &= ~CCIE; // Interrupt Disabled} 
```

void PWM(uint8_t duty_cycle) 函数的问题在于，它第一次在 P1.6 生成正确的 PWM，接下来如果给定一个值，它会将 PWM 更改为该 DC，但我无法返回到较低的 DC。

代码中的第一个 2 个 PWM 函数更改为正确的占空比 PWM(5)、PWM(15)，然后其余的 PWM 值不会产生所需的占空比。

我无法解决我哪里错了，任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:54:36.377

对我来说似乎是一个愚蠢的错误..

TA0CCR1 |= (duty_cycle*100);

代替

TA0CCR1 = (duty_cycle*100);

# iphone - 从IOS应用程序中的字符串中删除'\'

> ID：15289261
> 
> 赞同：2
> 
> 时间：2013-03-08T07:58:52.053
> 
> 标签：iphone, objective-c, html-escape-characters

我从带有反斜杠字符的 json 响应中得到一个字符串作为字符串。我想从 url 中删除 '\' 字符。我建立了代码，但它不起作用。代码在这里：

```
 NSString *responseData = [[NSString alloc]initWithData:[NSData dataWithContentsOfURL:url] encoding:NSUTF8StringEncoding];
    NSString* encodedString = [responseData stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSLog(@"Response ==> %@" ,encodedString);

       // here encodedString is a url which is showing crctly in output and need to trim the \ character.

       // NSString* str = [NSString stringWithFormat: @"encodedString"];
       // str = [str stringByReplacingOccurrencesOfString:@"?" withString:@""];
       // NSLog(@"Response ==> %@" , str);

    encodedString = [encodedString stringByReplacingOccurrencesOfString:@"\\" withString:@""];
        NSLog(@"Response ==> %@" ,encodedString); 
```

但我无法删除字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:14:32.303

如果要删除空格和`\`字符，最好将它们从`responseData`.

```
NSString *responseData = [[NSString alloc]initWithData:[NSData dataWithContentsOfURL:url] encoding:NSUTF8StringEncoding];

responseData = [responseData stringByReplacingOccurrencesOfString:@" " withString:@""];
responseData = [responseData stringByReplacingOccurrencesOfString:@"\\" withString:@""];
NSString* encodedString = [responseData stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T08:06:39.477

试试这个：

```
 NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"\\"];
    encodedString = [[encodedString componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];
    NSLog(@"%@", encodedString); 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:11:24.623

试试这个方法；

假设您的字符串包含一个 \，在字符串中使用双倍作为转义下一个 \

```
NSMutableString *string=[NSMutableString stringWithString:@"hi this i\\s good"];
//NSMutableString *string=[NSMutableString stringWithString:encodedString];

[string replaceOccurrencesOfString:@"\\" withString:@"" options:1 range:NSMakeRange(0, string.length)];

NSLog(@"%@",string); 
```

# load-balancing - 为什么所有数据包都应该通过负载平衡器而不是将客户端重定向到特定服务器？

> ID：15289271
> 
> 赞同：1
> 
> 时间：2013-03-08T07:59:38.480
> 
> 标签：load-balancing

我试图了解负载平衡的工作原理。

目前，据我了解，所有网络数据包都通过负载均衡器。但这显然使LB本身成为了瓶颈。将客户端直接重定向到特定服务器会更好。

那么，为什么大多数 LB 配置显示所有数据包都通过 LB 机器？

# php - 使用 rewriterule 创建 SEO 友好的 URL

> ID：15289273
> 
> 赞同：1
> 
> 时间：2013-03-08T07:59:41.210
> 
> 标签：php, .htaccess, mod-rewrite, rewrite

我尝试将我的 SEO URL 重写为一些真实的 GET 请求，以便在我的 PHP 文件中处理。

我想让这两种情况起作用：

```
mysite.com/company-profile -> index.php?action=company-profile

mysite.com/faq/howcanijoin -> index.php?action=faq&anchor=howcanijoin 
```

我得到了第一个使用规则的案例：

```
RewriteRule ^([A-Za-z0-9-]+)$   index.php?action=$1 
```

第二个我也试过了。我把这条规则放在前一条之前：

```
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)$   index.php?action=$1&anchor=$2 
```

但它不起作用。有什么建议么？如果我正确理解每个括号内的变量`$1, $2`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:26:00.023

做这个

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/(.*)$ /index.php?action=$1&anchor=$2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:04:15.413

这？

```
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-]+)$ index.php?action=$1&anchor=$2 [QSA,L] 
```

# windows - 像在 unix 中一样捕获返回错误，但现在在 dos/batch 中

> ID：15289276
> 
> 赞同：0
> 
> 时间：2013-03-08T07:59:50.273
> 
> 标签：windows, batch-file

我更习惯于 unix 脚本。

`findstr "ORA-[0-9]" alert_%%A.log>>%output-file%`

在 unix 中，我可以捕获返回错误：

`if [ $? -ne 0 ]; then echo "there is no ORA-ERROR found on alert log" > $ERRLOG`

问题：我怎样才能在 DOS / 批处理文件中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:11:11.663

如果命令失败，则该`%errorlevel%`变量返回 a `errorlevel`（带有`.bat`扩展名，而带有扩展名的即使命令成功也会`.cmd`更改）。`errorlevel`

所以，我猜上面的 unix 命令做了以下事情

```
if %errorlevel% neq 0 echo There is no ORA-ERROR found in alert log > %ERRLOG% 
```

**注意：**
我很确定以美元符号 ( `$`) 开头的东西是变量，所以我制作了将它输出到变量的文件。

希望有帮助。

# android - Android XML 属性引用了另一个相同类型的 xml 属性

> ID：15289278
> 
> 赞同：3
> 
> 时间：2013-03-08T07:59:53.563
> 
> 标签：android, android-layout, android-widget

我有一个由此 XML 定义的自定义视图

*（部分）*

```
<LinearLayout style="@style/LayoutVertWrapContent.SameWidth"
    android:layout_weight="2"
    android:layout_marginRight="?betweenElementsPadding">

    ...
    some inner views
    ...

</LinearLayout>

<LinearLayout style="@style/LayoutVertWrapContent.SameWidth"
    android:layout_weight="2"
    android:layout_marginRight="?betweenElementsPadding">

    ...
    some inner views
    ...

</LinearLayout> 
```

对于这个视图，我声明了一些属性：

```
<declare-styleable name="TheView">
    ...
    <attr name="betweenElementsPadding" format="dimension" />
</declare-styleable> 
```

如何在布局 xml 中为活动声明此视图并在**ElementsPadding**之间传递，以便`android:layout_marginRight="?betweenElementsPadding"`视图的 xml 工作？

```
<com.blablabla.TheView
        android:id="@+id/date" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_gravity="center_horizontal"
        dct:betweenElementsPadding="@dimen/background_padding" /> 
```

所需的结果是`android:layout_marginRight`将两个 LinearLayouts 都设置为**betweenElementsPadding**。

**更新 1**

为了防止进一步的误解，我想有一种统一的方式来改变**dct:betweenElementsPadding**，比如说

```
<com.blablabla.TheView
        android:id="@+id/date_1" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_gravity="center_horizontal"
        dct:betweenElementsPadding="3dp" />

<com.blablabla.TheView
        android:id="@+id/date_2" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_gravity="center_horizontal"
        dct:betweenElementsPadding="15dp" />

<com.blablabla.TheView
        android:id="@+id/date_3" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_gravity="center_horizontal"
        dct:betweenElementsPadding="25dp" /> 
```

在每种情况下，我都希望将**LinearLayout.layout_marginRight**设置为**dct:** betweenElementsPadding 的确切值，即从第一个开始为 3dp、15dp 和 25dp。

**更新 2**

使用 Joe 部分建议的解决方法。在自定义视图的样式构造函数中，我这样做：

```
// set betweenElementsPadding
final int betweenElementsPadding = array.getDimensionPixelSize(R.styleable.TheView_betweenElementsPadding, 0);
((LinearLayout.LayoutParams)((LinearLayout)findViewById(R.id.layout_1)).getLayoutParams()).rightMargin = betweenElementsPadding;
((LinearLayout.LayoutParams)((LinearLayout)findViewById(R.id.layout_2)).getLayoutParams()).rightMargin = betweenElementsPadding; 
```

但是我还没有找到关于如何仅对 XML 执行相同操作的原始问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:06:55.350

为什么不使用：

```
<style name="LayoutVertWrapContent.SameWidth" parent="someOtherStyleIfYouWant">
   <item name="android:layout_marginRight">@dimen/background_padding</item>
   <item name="android:layout_weight">2</item> <!-- if the same in all -->
</style> 
```

没有混合属性？

* * *

**编辑：**

此[链接](http://kotikan.com/blog/posts/2012/09/android-attributes)可能会有所帮助，而且我认为使用`xmlns:dct="http://schemas.android.com/apk/res-auto"`将有助于识别`dct:betweenElementsPadding`您的 xml。

```
<com.blablabla.TheView
        xmlns:dct="http://schemas.android.com/apk/res-auto"
        android:id="@+id/date" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_gravity="center_horizontal"
        dct:betweenElementsPadding="@dimen/background_padding" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:59:05.300

我会推荐dimens.xml。您可以参考这些来执行应用范围内的左/右/上/下填充等操作。您还可以使用 Views/ViewGroups（例如 FrameLayout）进行填充

我认为您也可能意味着将 XML 属性传递给自定义视图。在您的视图的构造函数中，有 attrs 参数，以及用于获取这些属性的命令，例如 gainStyledAttributes

# c# - 检测到潜在危险的 Request.Form 值

> ID：15289283
> 
> 赞同：1
> 
> 时间：2013-03-08T08:00:08.053
> 
> 标签：c#, asp.net, asp.net-4.0

我在用户控件中使用 mce 编辑器并添加`ValidateRequest="false"`到我使用该控件的页面指令中，然后我也收到“`Request.Form`检测到潜在危险值”错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:02:33.280

为了应用 ValidateRequest="false" 属性，您必须添加以下条目

```
<httpRuntime requestValidationMode="2.0" /> 
```

到您的 web.config。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:03:27.330

如果您使用的是 .NET 4，您可能还需要更改您的 Web 配置。

```
<httpRuntime requestValidationMode="2.0" /> in web.config. 
```

当您更改 validateRequest="false" 之类的页面时，请确保您是 HTML 编码字符串。

# bash - Sed删除大括号之间的bash脚本中的行

> ID：15289284
> 
> 赞同：0
> 
> 时间：2013-03-08T08:00:11.537
> 
> 标签：bash, sed

我正在尝试删除带有花括号的脚本中的注释和空行。以下代码在文件没有大括号时运行良好，但如果文件有大括号，则代码仅删除注释并在其位置留下空格。

```
sed  -e 's/#.*$//' -e '/^$/d' file >> file 
```

在不删除空行的情况下，输出结果如下

```
 more stuff above here

 location ~ \.php$ {
     root     /usr/share/nginx/html;
     fastcgi_pass   127.0.0.1:9000;
     fastcgi_index  index.php;
     fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
     include        fastcgi_params;
   }

 location ~ /\.ht {
     deny  all;
   }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:04:22.230

您的脚本在 zsh 中完美运行。试试这个

```
sed  -e 's/^#//' -e '/^[ \t]*$/d' 
```

# icefaces-1.8 - icefaces 1.8.2 中的重复组件 ID

> ID：15289286
> 
> 赞同：2
> 
> 时间：2013-03-08T08:00:21.200
> 
> 标签：icefaces-1.8

showall_Bean 在数据表中给了我整个列表....

在这里..我已经放置了编辑按钮..但是它会进入更新页面......但是当我进行更改并单击更新按钮时，它会显示错误“重复组件 ID”，但更新是在数据库中完成的。 ..

```
<ice:dataTable value="#{showall_Bean.list}" var="list" border="2" width="100%"
                id="dat`enter code here`atable123" rows="7" binding="#{showall_Bean.dataTable}"
                bgcolor="Silver" resizable="true">
                <ice:column id="c1">
                    <f:facet name="header" >
                        <ice:outputText id ="roll_text" value="Roll"></ice:outputText>
                    </f:facet>
                    <ice:outputText id ="roll_text1" value="#{list.roll}"></ice:outputText>
                </ice:column>
                <ice:column id="c2">
                    <f:facet name="header">
                        <ice:outputText id ="name_text" value="Name"></ice:outputText>
                    </f:facet>
                    <ice:outputText value="#{list.name}"></ice:outputText>
                </ice:column>
                <ice:column id="c3">
                    <f:facet name="header">
                        <ice:outputText id ="sex_text" value="Sex"></ice:outputText>
                    </f:facet>
                    <ice:outputText value="#{list.sex}"></ice:outputText>
                </ice:column>
                <ice:column id="c4">
                    <f:facet name="header">
                        <ice:outputText id ="address_text" value="Address"></ice:outputText>
                    </f:facet>
                    <ice:outputText value="#{list.address}"></ice:outputText>
                </ice:column>
                <ice:column id="c5">
                    <f:facet name="header">
                        <ice:outputText id ="city_text" value="City"></ice:outputText>
                    </f:facet>
                    <ice:outputText value="#{list.city}"></ice:outputText>
                </ice:column>
                <ice:column id="c6">
                    <f:facet name="header">
                        <ice:outputText id ="state_text" value="State"></ice:outputText>
                    </f:facet>
                    <ice:outputText  value="#{list.state}"></ice:outputText>
                </ice:column>
                <ice:column id="c7">
                    <f:facet name="header">
                        <ice:outputText id ="dob_text" value="DOB"></ice:outputText>
                    </f:facet>
                    <ice:outputText value="#{list.dob}"></ice:outputText>
                </ice:column>
                <ice:column id="c8">
                    <f:facet name="header">
                        <ice:outputText id ="field_text" value="Field"></ice:outputText>
                    </f:facet>
                    <ice:outputText value="#{list.field}"></ice:outputText>
                </ice:column>
                <ice:column id="c9">
                    <f:facet name="header">
                        <ice:outputText id ="action_text" value="Action"></ice:outputText>
                    </f:facet>
                    <ice:commandButton value="Edit" id="update" action="#{showall_Bean.Savedata}"></ice:commandButton>
                    <ice:commandButton value="Delete" id="delete"
                        action="#{showall_Bean.Delete_data}"></ice:commandButton>
                </ice:column>
            </ice:dataTable>
<ice:commandButton value="ADD" id="add" action="#{add_Bean.initCreate}"></ice:commandButton> 
```

# maven - BoneCP JDK 5 Maven 依赖

> ID：15289287
> 
> 赞同：1
> 
> 时间：2013-03-08T08:00:25.420
> 
> 标签：maven, java-5, bonecp

必须如何配置maven才能拉下JDK5版本的BoneCP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:00:25.420

您需要在依赖项中指定一个分类器

```
<dependency>
    <groupId>com.jolbox</groupId>
    <artifactId>bonecp</artifactId>
    <version>0.7.1.RELEASE</version>
    <classifier>jdk5</classifier>
</dependency> 
```

0.8.0-rc1 版本适用于 JDK 5

# iphone - 从 NSDictionary 获取对象的麻烦

> ID：15289292
> 
> 赞同：-3
> 
> 时间：2013-03-08T08:00:47.540
> 
> 标签：iphone, ios

我正在制作带有 2 个数组的字典，一个用于键（您可以在 Dic 中看到的 ID）和一个用于值（您可以在 Dic 中看到的出生日期）我的字典看起来像这样

```
100000297621293 = "08/31/1990";
100001904155266 = "12/30/1990";
100003248631105 = "05/27/1990";
100004327360299 = "01/01/1927";
100000157646688 = "08/22/1989";
100001069796883 = "12/03/1989";
100001475514001 = "03/09/1990";
100000717474427 = "08/05/1990";
100001221367192 = "08/05/1990";
100002586744158 = "04/15/1983"; 
```

这只是样本 dic 不完整

然后在我有另一个带有 ids 的数组并且我使用该数组从这个 Dic 获取出生日期但我得到空值请帮助我之后，我的代码如下

注意：我用于键的数组在 DIC 中始终作为键存在

```
NSDictionary *birthdayDictionary = 
[[NSDictionary alloc] initWithObjects:_parssedArrayOfFaceBook forKeys:_parssedArrayOfFaceBookUid];

NSLog(@"asdas%@",birthdayDictionary.description);

NSMutableArray *matches = [NSMutableArray array];

for (NSString *key in _selecteduid) {
    NSLog(@" see it%@",key);
    NSString *selectedBirthDate = [birthdayDictionary objectForKey:key];
    NSLog(@" matched%@",selectedBirthDate);
    [matches addObject:selectedBirthDate];
    NSLog(@" matched%@",matches);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:02:26.130

假设 selecteduid 是一个保留属性并且其中包含值，则此代码可以正常工作。

```
NSDictionary *birthdayDictionary = [NSDictionary dictionaryWithObjects:self.parssedArrayOfFaceBook
                                                                   forKeys:self.parssedArrayOfFaceBookUid];
    NSMutableArray *matches = [@[] mutableCopy];

    for (NSString *key in self.selecteduid){
        NSString *selectedBirthDate = birthdayDictionary[key];
        [matches addObject:selectedBirthDate];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:03:38.650

为什么是`*selectedBirthDate`一个`NSMutableArray`？出生日期（值）是字符串！不是数组！

```
NSString *selectedBirthDate = [birthdayDictionary objectForKey:key]; 
```

# joomla - 列出分配给 Joomla! 的所有文章！类别

> ID：15289297
> 
> 赞同：2
> 
> 时间：2013-03-08T08:01:25.530
> 
> 标签：joomla, joomla2.5

在文章 ( `com_content/article/default.php`) 的模板覆盖中，我必须打印所有文章标题，这些文章标题分配给由特定 ID 标识的类别（静态嵌入在我的代码中）。

*这是一个简短的例子：*

我有以下类别：

```
Uncategorized (id = 0)
Mycat (id = 1)
 |- My subcat (id = 2)
Mycat2 (id = 3) 
```

有了这篇文章：

```
Travelling and the US -> MyCat
New York is a nice city -> My subcat
Give me some feedback -> MyCat2
... 
```

在我的代码中，我现在想列出分配给 id = 1 类别的所有文章。此处的输出应如下所示：

```
Travelling and the US
New York is a nice city 
```

**更新**：对于阅读此内容并需要相同内容的每个人：唯一的方法是编写一个普通的 SQL 查询并通过 Joomla 运行它！[数据库 API 或使用“文章列表”之](http://www.joomlaboat.com/list-of-articles)类的插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T19:57:37.843

这就是我正在使用的（在用于`loadPosition`在内容页面上显示的模块内）

```
//Use JModelLegacy to get all articles within $categoryID

$model = JModelLegacy::getInstance('Articles', 'ContentModel', array('ignore_request' => true));
$appParams = JFactory::getApplication()->getParams();
$model->setState('params', $appParams);
$model->setState('filter.category_id', 'YOUR CATEGORY ID HERE'); //change that to your Category ID
$model->setState('list.ordering', 'title');
$model->setState('list.direction', 'ASC');

$articlesCategory =  (array) $model->getItems();

foreach ($articlesCategory as $artCat) {
  $artCat =  (array) $artCat;
  echo $artCat['title']  . "<br /><br />";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:51:30.280

最好使用页面上的模块。Extensions>Module Manager New Articles Category 然后在选项中选择过滤到“My subcat”而不是所有类别然后将其分配给要显示列表的页面的菜单项。要么所有页面，要么只有一两页

# shell - 用于安装的 shell 脚本

> ID：15289298
> 
> 赞同：-2
> 
> 时间：2013-03-08T08:01:26.433
> 
> 标签：shell, ubuntu

我需要一个 shell 脚本文件，用于在 Ubuntu 12.10 上安装带有 PHP5（和 PHP-FPM）和 MySQL 支持（LEMP）的 Nginx。谁能指导我创建一个 shell 脚本文件来安装这些工具。我是创建 shell 脚本的新手。

你的反应应该是可观的！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:05:21.023

基本上，Shell 脚本是一个文件，其中包含您无论如何都可以在命令行中手动执行的命令。

从创建它开始，内容如下：

```
#!/bin/bash

apt-get install ...

# do some other operations 
```

将其保存为 script.sh。现在只需更改它的权限，使其可执行：

```
$ chmod +x script.sh 
```

现在可以调用它了：

```
$ ./script.sh 
```

# php - 在进入数据库之前对数组值进行分组

> ID：15289301
> 
> 赞同：2
> 
> 时间：2013-03-08T08:01:39.180
> 
> 标签：php, symfony, doctrine, dql

我有一个使用教义2的symfony应用程序，我有这个数组：

```
Array ( 
[0] => Array ( [id] => 7 [createdOn] => DateTime Object ( [date] => 2011-03-01))                                        
[1] => Array ( [id] => 9 [createdOn] => DateTime Object ( [date] => 2011-03-12))
) 
```

amd 我需要将 [id] 值输入到按月份分组的数据库中，如下所示：

```
| createdOn | id    |
| 2011-03   | {7, 9}| 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:36:16.917

创建具有所需格式的数组；

```
foreach($array as $index => $subArray){
  $yearMonth = subStr($subArray["date"], 0, 7);
  $newData[$yearMonth][] = $subArray["id"];
}

foreach($newData as $yearMonth => $subArray){
  $newData[$yearMonth] = "{".implode(",", $newData[$yearMonth])."}";
}

var_dump($newData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:30:29.123

这是您的学说查询构建器的一部分：

```
$date = explode('-', $array[0]['date']);
$fromDate = new \DateTime($date[0].'-'.$date[1].'-'01 00:00:00); // 2011-03-01 00:00:00
$toDate = $fromDate;
$toDate->modify('+1 month'); // 2011-04-01 00:00:00

$qb = $this->createQueryBuilder('a')
     ->select('a.id')
     ->where('a.createdOn >= :fromDate')
     ->andWhere('a.createdOn < :toDate') // strictly inferior
     ->setParameter('fromDate', $fromDate->format('Y-m-d H:i:s'))
     ->setParameter('toDate', $toDate->format('Y-m-d H:i:s')); 
```

使用此查询，您可以搜索 createdOn 日期介于“2011-03-01 00:00:00”（包括）和“2011-04-01 00:00:00”（排除）之间的实体的 ID，因此 createdOn三月 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:33:56.487

试试这个 ：

```
$res           = array();
foreach($your_array as $val){
    $dt        = new DateTime($val['createdOn']->date); 
    $res[$dt->format('Y-m')][] = $val['id'];
}

foreach($res as &$val){
   $val        = json_encode($val);
}

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:34:23.490

[按照http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)中的描述创建一个学说事件侦听 器，并将 ID 添加到另一个数据库。

# android - android.view.WindowManager$BadTokenException: 无法添加窗口

> ID：15289316
> 
> 赞同：3
> 
> 时间：2013-03-08T08:02:38.110
> 
> 标签：android, exception

这是错误日志：

```
03-07 11:33:07.474: E/AndroidRuntime(5612): FATAL EXCEPTION: main
03-07 11:33:07.474: E/AndroidRuntime(5612): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@45b69850 is not valid; is your activity running?
03-07 11:33:07.474: E/AndroidRuntime(5612):     at android.view.ViewRootImpl.setView(ViewRootImpl.java:567)
03-07 11:33:07.474: E/AndroidRuntime(5612):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
03-07 11:33:07.474: E/AndroidRuntime(5612):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-07 11:33:07.474: E/AndroidRuntime(5612):     at android.app.Dialog.show(Dialog.java:281) 
```

而且我知道这是因为引用错误，我通过 getContext() 方法获取上下文（对话框不在任何活动中）

所以我不能使用 XXXActivity.this 来获得正确的上下文。所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T07:02:57.647

我也遇到了同样的问题。我为此使用了标签栏 Just put`getParent()`而不是`youractivity.this`.

我希望这会对某人有所帮助。

# java - 为什么我的第二个 sqlite 表会抛出异常？

> ID：15289322
> 
> 赞同：1
> 
> 时间：2013-03-08T08:03:00.503
> 
> 标签：java, android, eclipse, sqlite

我有一个创建表的 DatabaseHelper 类。第一个表（记录）工作正常，但第二个表在我尝试使用它时抛出异常（插入/选择...）。

这是我来自 DatabaseHelper 的代码：

```
 public void onCreate(SQLiteDatabase db) {

    String createTable="CREATE TABLE recordings" +
            "(_id INTEGER PRIMARY KEY AUTOINCREMENT," +
            " name VARCHAR(255) NOT NULL," +
            " datestart VARCHAR(255) NOT NULL" +
            ")";

    String createTable2="CREATE TABLE recording_image" +
            "(_id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "imageurl VARCHAR(255) NOT NULL," +
            "imagetime INTEGER NOT NULL," +
            "prot_id INTEGER NOT NULL," +
            "FOREIGN KEY(prot_id) REFERENCES recordings(_id) ON DELETE CASCADE" +
            ")";

    db.execSQL(createTable);    
    db.execSQL(createTable2);
} 
```

例外是：

> 没有这样的表：recording_image。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:27:26.870

是的，尝试清除应用程序的数据，也可以查看db的版本，如果你要创建的db版本高于手机上的当前db，你必须删除并重新创建所有的db D b。

请参阅：[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

希望对你有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:55:55.157

问题解决了。只需重新安装应用程序或更改数据库的版本号即可。

# django - 如何在 Django 中设置主键最小值

> ID：15289327
> 
> 赞同：2
> 
> 时间：2013-03-08T08:03:34.523
> 
> 标签：django

假设我有一个具有主键的模型，并且我不希望它们的主键从 1 开始。有没有办法可以指定主键的初始值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:16:12.193

```
class MyModel(models.Model):
    primary_field = models.IntegerField(primary_key=True)

    class Meta:
        db_table = u'mymodel_seq'

def new_seq_number():
    mymodel_seq = MyModel.objects.raw("select primary_field, nextval('mymodel_seq') from mymodel_seq")[0]
    seq_number = u'%04i' % mymodel_seq.nextval
    return seq_number 
```

# drupal-6 - 为什么视图模块（drupal）中的最大字段长度不会改变视图？

> ID：15289328
> 
> 赞同：1
> 
> 时间：2013-03-08T08:03:35.110
> 
> 标签：drupal-6, views

“将此字段修剪为最大长度”选项给了我一些非常出乎意料和令人困惑的结果。我已经决定我希望我的字段长度在 35 个字符后被截断。但是，当我在“最大长度”文本框中指定此数量并保存视图时，该字段被完全切断，一切都消失了。

所以作为一个测试，我将限制提高到 100 个字符，这给了我一些领域。但是我不知道 Views 从哪里获得 100 个字符？它认为一个角色是什么？

下一个问题是我的网格中有许多字段（按降序排列），并且我设置的 100 个字符限制在每个字段上表现不同。我希望所有字段的长度都相同，但是有些字段比其他字段短得多。

我根本无法理解这一点！帮助？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:11:32.097

字段可以有html代码吗？如果是这样，它可能会说明您的问题。这个修剪工具计算所有字符，无论是 html 代码还是要显示的文本。

您的最佳选择可能是在修剪复选框下方标记选项。移除 HTML 标签

# python - 如何在不设置 __tablename__ 的情况下继承 SQLAlchemy 中的声明式？

> ID：15289342
> 
> 赞同：2
> 
> 时间：2013-03-08T08:04:24.330
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

使用flask-sqlalchemy，我想创建一些类来继承声明性类并添加`__bind_key__`. 这样我就可以创建一些表并继承这些绑定的类。

```
from flask.ext.sqlalchemy import SQLAlchemy

db = SQLAlchemy()

class Model1(db.Model):
    __bind_key__ = 'db2'

class Table1(Model1):
    __tablename__ = 'table1'
    name = db.Column(db.String(100)) 
```

但是我遇到了一些麻烦：

```
sqlalchemy.exc.InvalidRequestError: Class <class '__main__.Model1'> 
    does not have a     __table__ or __tablename__ specified 
    and does not inherit from an existing table-mapped class. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:56:46.760

您还可以使用该`__abstract__`标志：

```
from flask.ext.sqlalchemy import SQLAlchemy

db = SQLAlchemy()

class Model1(db.Model):
    __abstract__ = True
    __bind_key__ = 'db2'

class Table1(Model1):
    __tablename__ = 'table1'
    name = db.Column(db.String(100)) 
```

SQLAlchemy 声明式（[此处的文档](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/declarative.html?highlight=abstract#abstract)`__abstract__`）忽略了设置为的类。作为奖励，这使您能够将 SQLAlchemy 特定属性（例如列）添加到您的.`True``Model1`

# php - Javascript动态下拉菜单 - 页面重新加载时反应？

> ID：15289346
> 
> 赞同：1
> 
> 时间：2013-03-08T08:04:38.867
> 
> 标签：php, javascript

我的 javascript 不是很好，但我正在努力学习。已经在这家呆了好几天了，不愿意寻求帮助，但需要提示:)

我有一个带有两个 SELECT 下拉菜单的下拉菜单。

```
 <select name="programSelect" onchange="setLanguage()" id="programList">
    </select>
  <br>
    <select name="languageSelect" id="languageList">
    </select> 
```

Javascript（要遵循的代码）从 XML 创建下拉列表。效果很好！

我现在尝试完成一些简单的事情，从一个项目开始。

当我提交表单时，它通过 POST 将变量传递到同一页面。发生搜索并重新出现下拉菜单。

由于第一个下拉菜单的 onClick 会填充第二个下拉菜单，因此当页面重新加载时，不会填充 dropdwons。我做了一个不太好的 PHP hack，并没有真正实现我想要的。

理想情况下，当页面重新加载时，我希望第一个下拉列表显示所有选项（选定项已选择），第二个下拉列表填充选定项已选择。

代码如下。我不确定我想做的是否简单……但在此先感谢。

这个 javascript 在我的页脚中，它加载了一个简单的 XML 文档，该文档已经构建了下拉层次结构。首先是 Javascript，然后是 XML：

```
<script type="text/javascript" language="javascript">
$(document).ready(init);
//var mainXML;
var curProgram="";
var curLanguage="";
function init(){
    // $("#languageList").hide();   //Dont Hide the level 2, or level 3
    loadXML("/xml/dropdownSelections.xml");
}
function loadXML(_xml){
$.ajax({
         type: "GET",
         url: _xml,
         dataType: "xml",
         success: setXML
}) // close ajax
}
function setXML(_xml){
var _idx=0;
var curOption;
var curCountry = $(_xml).find('country');
$(curCountry).each(function(i){
    var country = $(this);
    curOption=$("<option value='" + $(country).attr('program') + "'>" + country.children('label').text() + "</option>")
    $(curOption).appendTo($('#programList'))
})
}
function setLanguage(){
var curCountry = $('#programList').children(':selected').data('country')
$('#languageList').html(""); // reset the languages list
var curLang = $(curCountry).find('language');
$('#linkURL').html("");
if (curLang.length>1){
    curLang.each(function(i){
        var lang = $(this);
        var langCode=lang.attr('langCode');
        if (i==0){
            curOption="<option value='null'>--Select Issue--</option><option value='" + langCode + "'>" + lang.text() + "</option>";
        }else{
            curOption+="<option value='" + langCode + "'>" + lang.text() + "</option>"
        }
    });
    $(curOption).appendTo($('#languageList'));
    $('#languageList').show()
}else if (curCountry==null){
    // $('#languageList').hide();
    curOption="<option value='null'>--Select Issue--</option>";
    $(curOption).appendTo($('#languageList'));
}else{
    $('#languageList').hide();
    gotoPage($(curCountry).find('language').attr('langCode'))
}
}

</script> 
```

还有 XML（只是它的第一部分，还有其他部分模仿这种结构）：

```
<?xml version="1.0" encoding="UTF-8"?>
<countries>
<country program="read-and-learn">
    <label>Read and Learn</label>

    <languages>
        <language langCode="italian">Italian</language>
        <language langCode="french">French</language>
        <language langCode="spanish">Spanish</language>
        <language langCode="german">German</language>
        <language langCode="japanese">Japanese</language>
        <language langCode="russian">Russian</language>
        <language langCode="dutch">Dutch</language>
    </languages>

</country> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:59:25.540

在此，我们希望在页面提交之间保持选择框选择。为此，我们可以使用 PHP。

每当我们向 PHP 页面提交任何包含表单字段的表单时，我们都可以访问 PHP 代码中实际选择的内容。

因此，在我们的例子中，要在 PHP 中访问选定的表单字段值，我们需要使用以下代码。

```
$programSelect = $_POST['programSelect'];
$languageSelect = $_POST['languageSelect']; 
```

因此，我们在 PHP 中提供了这些值。

当我们在页面加载并填充选择框后需要这些值时。

由于 JavaScript 在同一页面中，因此我们在 JavaScript 中添加以下两行。

```
var programSelect = <?php echo $programSelect; ?>,
    languageSelect = <?php echo $languageSelect; ?>; 
```

在上面两行中，我们将选定的值从 PHP 传递到 JavaScript。

现在，在从 XML 填充数据之后，现在我们需要在选择表单字段中选择选项。由于我们已经使用简单的 jQuery 在 JavaScript 中获得了选定选项的值，因此我们可以选择它们。例如 ：

```
$("#programList option[value='" + programSelect + "']").attr('selected', true);
$("#languageList option[value='" + languageSelect + "']").attr('selected', true); 
```

这只是提供一个想法。

# sql - TSQL 计算大写和小写字母

> ID：15289351
> 
> 赞同：1
> 
> 时间：2013-03-08T08:05:02.893
> 
> 标签：sql, tsql

嗨，我正在编写一些 TSQL 代码实践，试图计算字符串中的元音、小写和大写字母，我的代码适用于元音，但不知何故它将所有字母都计为小写字母，这是我的代码：

```
DECLARE @name VARCHAR(200) ='Abc Efg Hij'
DECLARE @i int = 1
DECLARE @numVowels int = 0
DECLARE @numLower int = 0
DECLARE @numUpper int = 0

WHILE @i <= LEN(@name)
    BEGIN
        IF PATINDEX('%' + LOWER(SUBSTRING(@name, @i, 1)) + '%', 'aeiou') > 0
            BEGIN
                SET @numVowels += 1
            END
        IF SUBSTRING(@name, @i, 1) BETWEEN 'a' AND 'z'
            BEGIN 
                SET @numLower += 1
            END
        ELSE IF SUBSTRING(@name, @i, 1) BETWEEN 'A' AND 'Z'
            BEGIN
                SET @numUpper += 1
            END
        PRINT SUBSTRING(@name, @i, 1) 

        SET @i +=1
    END

PRINT 'There are ' + CAST((@numVowels) AS VARCHAR(200)) + ' vowels'
PRINT 'There are ' + CAST((@numLower) AS VARCHAR(200)) + ' lower-case letters'
PRINT 'There are ' + CAST((@numUpper) AS VARCHAR(200)) + ' upper-case letters' 
```

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:25:16.337

您的问题与整理有关，但是一些测试在我脑海中提出的问题比它解决的要多。首先，要让您的代码正常工作，您只需替换以下两种情况：

```
IF SUBSTRING(@name, @i, 1) BETWEEN ... 
```

和

```
IF SUBSTRING(@name, @i, 1) COLLATE Latin1_General_BIN BETWEEN ... 
```

强制二进制排序规则将阻止 SQL Server 考虑这一点`'a'`并且`'A'`是相等的。

现在我脑海中提出的问题是：

*   为什么它不适用于区分大小写的排序规则，例如`Latin1_General_CS_AS`(9 小写，0 大写)？这是我的第一次尝试，因为我希望您的问题是由不区分大小写的排序规则引起的，我希望它可以通过区分大小写的排序规则来解决
*   为什么它部分适用于`SQL_Latin1_General_CP1_CS_AS`(8 小写，1 大写) ？只有第一个`'A'`不被视为小写字符，我不知道为什么。

这就是我能从 .NET 开发人员的头脑中得到的全部信息。如果您正在寻找更多信息，也许这里或[https://dba.stackexchange.com/](https://dba.stackexchange.com/)上的其他人可以提供更多信息。

# java - Sublime Text 2中的Java控制台输入？

> ID：15289352
> 
> 赞同：8
> 
> 时间：2013-03-08T08:05:04.323
> 
> 标签：java, input, console, sublimetext2

我最近切换到 sublime text 2 但我似乎找不到任何插件/资源可以让我在编辑器中实现 java 控制台输入。我已经设法让它编译和执行 java 文件，但是每当我的代码需要任何输入（如扫描仪输入）时，代码就无法编译并且我得到一个错误。

我已经看到了在 python 上实现这一点的解决方案，但还没有设法在 Java 上找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-08T00:39:15.400

好的，我已经为这个“在 Sublime 中运行 java”问题找到了一个**完整而完美**的解决方案，我只在 Windows 7 中测试过。

按照以下步骤，您将拥有 2 个崇高的构建系统 - “JavaC”和“JavaC_Input”。

*   “JavaC”可以让你运行不需要用户输入的代码，并在sublime的终端模拟器中显示结果，既方便又好看。

*   “JavaC_Input”允许您在单独的终端窗口中运行需要用户输入的代码，它能够接受用户输入。你也可以在这个构建系统中运行不需要输入的代码，所以如果你不介意弹出窗口，你可以坚持使用这个构建系统，不要切换。

您可以从 Tools -> Build System 在构建系统之间切换。然后使用 ctrl+b 编译和运行代码。

以下是实现此目的的步骤：

（注意：请确保您已经具备java系统的基本设置：安装JDK并设置正确的CLASSPATH和PATH，我不会详细说明）

**“JavaC”构建系统设置**

1、用下面的代码制作一个bat文件，保存在C:\Program Files\Java\jdk*\bin\下，把所有东西放在一起。将文件命名为“javacexec.bat”。

```
@ECHO OFF
cd %~dp1
javac %~nx1
java %~n1 
```

2、然后编辑 C:\Users\your_user_name\AppData\Roaming\Sublime Text 2\Packages\Java\JavaC.sublime-build （如果没有，创建一个），内容为

```
{
   "cmd": ["javacexec.bat", "$file"],
   "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
   "selector": "source.java"
} 
```

**“JavaC_Input”构建系统设置（主要与@lac_dev 的回答相同）**

1、安装Cygwin [http://www.cygwin.com/]

2、转到C:\Users\your_user_name\AppData\Roaming\Sublime Text 2\Packages\Java\，然后创建一个名为“JavaC_Input.sublime-build”的文件，内容如下

```
{
"cmd": ["javacexec_input.bat", "$file"],
"file_regex": "^(...*?):([0-9]*):?([0-9]*)",
"selector": "source.java"
} 
```

3、用下面的代码制作一个bat文件，保存在C:\Program Files\Java\jdk*\bin\下，把所有东西放在一起。将文件命名为“javacexec_input.bat”。

```
@echo off
javac  -Xlint:unchecked %~n1.java 
start cmd /k java -ea %~n1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T18:10:45.897

我能够在 Windows 8 上解决这个问题，我还没有在任何其他平台上测试过，希望这对你有用。

1.  安装 Cygwin [http://www.cygwin.com/]

2.  确保启动命令使用驱动器：\Path_to_cygwin_installation\bin\start

    *   您可以使用 where 命令验证这一点：

        ```
            从哪里开始
        ```

3.  创建`javac.sublime.build`系统

    *   这是我的，可以改进

    ```
    {
    "cmd": ["javac.bat", "$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    “选择器”：“source.java”
    }

    ```

    *   确保更新您的环境路径，以便它知道在哪里找到`javac.bat`; 我把我的放在我的`java_home`安装下。
4.  创建您的`javac.bat`文件并使其在您的环境路径中可用

    ```
    @echo 关闭
    javac -Xlint:unchecked %~n1.java
    启动 java -ea %~n1

    ```

5.  在我的示例中，我必须确保应用程序保持打开状态：

    ```
    import java.util.Scanner;

    class Test
    {
        public static void main(String[] args)
        {
            Scanner reader = new Scanner(System.in);
            int input = -1;

            while(input != 0)
            {
                System.out.println("=======================");
                System.out.println("What is Your Age? Enter 0 to exit;");
                input = reader.nextInt();
                System.out.println("You've entered " + input + "\n\n");
            }
        }
    } 
    ```

您现在可以编译您的 java 文件并在新窗口中获取它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T16:18:18.117

不幸的是，**没有**可用于 Sublime Text 2 或 3 的解决方案。

但我还是喜欢它！所以我通常做的只是手动指定输入：

```
System.out.print("Enter Stack size: ");
//int input = br.readLine();
int input = 10; 
```

当我需要使用输入运行程序时，留下必要的部分注释（实际上几乎从来没有）。

# iphone - 将 iPhone 应用程序转换为通用应用程序

> ID：15289354
> 
> 赞同：0
> 
> 时间：2013-03-08T08:05:11.897
> 
> 标签：iphone, ios, objective-c, ipad

由于我`iPhone`的应用程序在全屏 iPhone 上运行良好，但是当我尝试在其中运行应用程序时，`iPad`它会显示 iphone 屏幕。`iPad`是否可以在不越狱或使用双像素方法的情况下全屏运行应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:08:55.037

好吧，您实际上需要为 iPad 创建一个版本，其中包含相应的 XIB 和类以及您可能想要添加的其他功能。请记住，iPad 版本不仅仅是 iPhone 的更大版本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:11:45.013

这个问题之前问过[但是阅读这个官方文档](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)这可能对你有帮助..其他选项是在 GOOGLE 中搜索是获得更多创建通用应用程序的方法的最佳方式。此[站点也与您的问题有关。](http://iphonedevelopment.blogspot.in/2010/04/converting-iphone-apps-to-universal.html)

# c# - WinRT ZipArchiv 包括文件夹信息

> ID：15289356
> 
> 赞同：0
> 
> 时间：2013-03-08T08:05:20.747
> 
> 标签：c#, microsoft-metro, windows-runtime

使用[Ziparchiv.CreateEntry](http://msdn.microsoft.com/en-us/library/hh158346.aspx)我将文件添加到 zipStream

但是有没有办法创建文件夹？

我想将文件夹树压缩为 zip。目前我看不到在 zip 文件中拥有相同树的方法。

为了不丢失信息，我目前唯一的想法是创建某种限制相对路径的参考文件。

有没有办法在 WinRT ZipArchivs 中有文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:05:20.747

刚刚在编写示例代码时找到了解决方案。因为我在这里没有找到这个，所以我考虑添加这个问题，也希望这会对某人有所帮助。如果这个是重复的，请随意删除它或将其链接到预先存在的问题:-)

调用[CreateEntry](http://msdn.microsoft.com/en-us/library/hh158346.aspx)时，路径可以作为文件名的前缀。以下代码将 foo 设置为存档中 zipfile 中的文件夹

```
 zipArchive.CreateEntry(@"foo\" + fileToCompress.Name,CompressionLevel.Optimal); 
```

# python - 向其他应用程序发送 Python 消息

> ID：15289361
> 
> 赞同：0
> 
> 时间：2013-03-08T08:05:27.643
> 
> 标签：python, messaging

现状：

我有两个 python 应用程序（前端服务器和数据收集器，数据库在它们之间）。

目前使用 redis 作为 db 及其发布/订阅协议，以便在有新数据可用时通知前端。

但是我可能想使用不同的数据库（并且不想将redis保留在系统上只是为了发布/订阅）。

如果数据收集器已向数据库处理新数据（不使用 beanstalkd 或 redis 等外部消息队列），是否有任何简单的替代方法来通知我的前端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:36:18.817

ZeroMQ 是一个不错的选择。它具有良好的 Python 绑定，它使同一台机器上的进程之间的通信和不同机器上的进程看起来几乎相同。

从阅读指南开始：http: [//zguide.zeromq.org/page :all](http://zguide.zeromq.org/page:all)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:17:42.923

正如我在评论中提到的，如果您想要通过网络传输的东西，那么除了设置 Web 服务（flask 应用程序？）或编写自己的 INET 套接字服务器之外，操作系统没有内置任何东西可以在它们之间进行通信机器。Beanstalk 在 Python 中有一个非常简单的 API，我已经非常成功地将它用于这种事情。

```
try:
    beanstalk = beanstalkc.Connection(host="my.host.com")
    beanstalk.watch("update_queue")
except:
    print "Error connecting to beanstalk"

while True:
    job = beanstalk.reserve()
    do_something_with_job(job) 
```

如果您只打算在同一台机器上工作，那么请阅读 linux IPC。进程之间的套接字连接非常快，几乎为零开销。当您利用 epoll 回调时，它们也可以成为异步程序的一部分。

# javascript - requirejs如何确保为匿名模块正确设置模块名称？

> ID：15289364
> 
> 赞同：2
> 
> 时间：2013-03-08T08:05:40.703
> 
> 标签：javascript, requirejs

在 requirejs 中，您可以定义一个模块而无需按字面设置它的名称，例如：

```
//in a.js
define([/*deplist*/],function(){
    /*do something*/
});

//in b.js
define([/*deplist*/],function(){
    /*do something*/
}); 
```

并且 requirejs 会根据他们的文件名（“a”和“b”）设置他们的模块名。Requirejs 添加`<script>`您的应用程序需要的所有标签，它们不是按顺序加载的（正如网络时间线所说）。

![js文件加载时间线](../Images/d6cafef419a8b48d6ed320904de3413f.png)

当一个模块调用`define`来定义自己时，它不知道它的模块名称，然后它将自己置于`defQueue`等待初始化的状态。初始化将在加载事件处理程序中完成，因为在事件处理程序函数中，节点引用是可访问的，并且模块名称记录在节点属性上（如：）`<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="a" src="./a.js"></script>`。

这就是问题所在，我们无法保证模块调用的顺序`define`与模块的节点`load`事件触发的顺序一致。那么模块名称如何正确映射到模块工厂呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:18:32.250

事实证明，js 评估及其引用节点“加载”事件触发顺序是巧合。

一个模块的js文件加载后，里面的内容会被评估（不知道什么时候，但会按照js文件加载的顺序评估），然后requirejs会将工厂和依赖列表推送到FIFO队列中。浏览器会按照 js 文件加载的顺序触发节点加载事件，并且 requirejs 在 "load" 事件处理程序中链接模块 id 和它的工厂。

例如，如果 a.js 在 b.js 之前加载，那么 a.js 的内容将不迟于 b.js 的内容被评估，并且 a.js 的“加载”事件处理程序将不迟于 b.js 的被调用。然后可以确定模块的 id 映射到它们的工厂和依赖列表。

# javascript - 如何使用javascript在android中设置宽度？

> ID：15289366
> 
> 赞同：5
> 
> 时间：2013-03-08T08:05:49.063
> 
> 标签：javascript, android, android-layout

我必须设置与所有尺寸的 Android 设备兼容的页面宽度。为此，我使用了以下代码：

```
meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" 
```

我也尝试了`target-densityDpi`所有属性，也在`target-densityDpi`70 到 400 之间

宽度不适合屏幕，宽度超出屏幕宽度（在较小的屏幕显示中）或宽度太小（在 4' 到 5' 英寸显示 android 设备中的较大显示中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:22:33.577

我通过使用解决了类似的问题：

`<meta charset = "utf-8" name = "viewport" content = "width=device-width, user-scalable = no, target-densitydpi=mdpi">`

还有一个CSS：

```
body {
   width: 100%;
} 
```

我避免了`mdpi`字体太小的问题。如果您对字体没有问题，也可以尝试`device-dpi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:36:35.973

我有同样的问题。我用：

```
meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" 
```

和：

```
meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1 user-scalable=no" 
```

并且有所有变体，`"`而不是`'` 声明之间的分号......但我仍然可以在我的 android 设备中缩放，并移动页面的一半内容。

可能与javascript有关？看... [使用视口元标记缩放适合移动 Web 内容](https://stackoverflow.com/questions/8735457/scale-fit-mobile-web-content-using-viewport-meta-tag)

问候，安妮

# database - 组合键上的范围键查询

> ID：15289371
> 
> 赞同：2
> 
> 时间：2013-03-08T08:06:18.013
> 
> 标签：database, amazon-dynamodb

目前我有一个包含以下字段的集合：

*   `userId`
*   `otherUserId`
*   `date`
*   `status`

对于我的 Dynamo 集合，我使用 userId 作为`hashKey`我`rangeKey`想要使用的 date:otherUserId。通过这样做，我可以检索在一个好的日期排序的所有 userId 条目。

但是，对于我的用例，我不应该有任何重复，这意味着我的`userId-otherUserId`收藏中不应该有相同的值。这意味着我应该首先进行查询以检查该“夫妇”是否存在，如果需要将其删除，然后进行插入，对吗？

编辑：

感谢您的帮助:-)

我的用例的目标是在 userA 访问 userB 的个人资料时进行存储。

现在，我想做的查询如下：

*   检索所有访问 UserA 个人资料的 UserB，以唯一（= 没有双重 UserB）并按时间排序。
*   检索 UserA 和 UserB 的特定对访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:07:12.650

我认为您有很多选择，但这里有一个可能基于您的应用程序具有时间感知能力的假设，即您想要查询最后 N 分钟、几小时、几天等内的交互。

```
hash_key = userA
range_key = [iso1860_timestamp][1]+userB+uuid 
```

首先，uuid 技巧是为了避免覆盖用户A 和用户B 之间同时发生的交互记录（可能发生取决于时钟的粒度/精度）。所以在插入方面我们是安全的：没有重复，没有覆盖。

查询方面，事情是这样完成的：

> *   检索所有访问 UserA 个人资料的 UserB，以唯一（= 没有双重 UserB）并按时间排序。

`query(hash_key=userA, range_key_condition=BEGIN(common_prefix))`

其中`common_prefix`= 2013-01-01 表示 2013 年 1 月的所有交互

这将检索一个时间范围内的所有记录，排序（假设它们以正确的顺序插入）。然后在*应用程序代码*中过滤它们以仅保留与 userB 有关的那些。不幸的是，DynamoDB API 不支持范围键条件列表（否则您可以通过传递额外的 CONTAINS userB 条件来节省一些时间）。

> *   检索 UserA 和 UserB 的特定对访问

`query(hash_key=userA, range_key_condition=BEGINS(common_prefix))`

如果我们可以假设您知道交互的时间戳，哪里`common_prefix`会更精确。

当然，应该根据您将处理的数据流的属性来评估这种设计。如果您可以（大多数情况下）为您的查询指定一个有意义的时间范围，它将很快并且受您在用户A 的时间范围内记录的交互次数的限制。

如果您的应用程序不是那么面向时间 - 我们可以假设用户通常只有少数交互 - 您可能会切换到以下模式：

```
hash_key = userA
range_key = userB+[iso1860_timestamp][1]+uuid 
```

这样您就可以按用户查询：

`query(hash_key=userA, range_key_condition=BEGIN(userB))`

这种替代方法将很快，并且受*所有时间范围内*userA-userB 交互的 nber 限制，这取决于您的应用程序，这可能是有意义的。

所以基本上你应该检查示例数据并估计哪个方向对你的应用程序有意义。两个方向（时间或用户）也可以通过在其他表中手动创建和维护索引来加速 - 以更复杂的应用程序代码为代价。

* * *

（历史版本：避免使用基于时间的键覆盖记录的技巧）在您的情况下，一个常见的技巧是使用生成的唯一 id ( `uuid`) 对范围键进行后缀。这样您仍然可以`query`使用条件调用`BETWEEN`来检索在给定时间段内插入的记录，并且您无需担心插入时的键冲突。

# cygwin - 无法在 cygwin 中运行 heroku 或 vagrant，但在 cmd 中可以

> ID：15289379
> 
> 赞同：5
> 
> 时间：2013-03-08T08:06:57.980
> 
> 标签：cygwin

不知何故，我无法在 cygwin 中运行 vagrant 或 heroku。当我使用默认的 windows cmd 应用程序时，它工作正常，但在 cygwin 中，我收到 vagrant 的此错误：

> C:/vagrant/vagrant/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in to_specs'：在 [] (Gem::LoadError) 中找不到 vagrant (>= 0) C:/vagrant/vagrant/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:into_spec' 来自 C:/vagrant/vagrant/embedded/lib/ruby/site_ruby/1.9.1/rubygems .rb:1231:in gem' 来自 C:/vagrant/vagrant/embedded/gems/bin/vagrant:22:in'

对于heroku：

> C:\Program Files (x86)\ruby-1.9.2\bin\ruby.exe: 没有这样的文件或目录 -- /cygdrive/c/Program Files (x86)/Heroku/bin/heroku (LoadError)

红宝石是什么东西？我不知道我应该做什么 - 在 Windows 中开发是一种真正的痛苦，任何人都可以提供任何关于我如何解决这个问题的见解吗？

感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T06:28:47.060

我在 Windows 上使用 Rails 和 Heroku 遇到了同样的问题。

Cygwin 下似乎[不支持 Toolbelt](https://plus.google.com/115543354052259422614/posts/8WTfAwXGN5H)。[此外，颜色并不总是以正确的方式呈现（例如，即使在使用ansicon -i](https://stackoverflow.com/questions/9229599/issue-getting-ansicon-working-on-windows-7-enterprise-64-bit)之后，我也没有设法呈现 heroku 日志颜色）。

我还考虑过使用[GOW](https://github.com/bmatzelle/gow/wiki)增强的 CMD 提示，但这意味着您必须在每个命令后附加“.bat”，而且颜色仍然是个问题。

我最终使用了[RailsInstaller](http://railsinstaller.org/)包中包含的**Git Bash shell 。**它可以识别相关文件的所有路径，具有您需要的所有 shell 命令，并且每种颜色似乎都正确呈现（例如 rails 日志、黄瓜和 rspec 测试、heroku 日志等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-21T21:47:44.940

您可能很久以前就解决了您的问题，但我只是想添加我经历的步骤，因为我在使用 Cygwin 的 Windows 上遇到了同样的问题。

首先，总是尝试更新您的 Cygwin 安装，尤其是当您看到与您发布的错误类似的错误时（我有同样的错误）：

```
/ruby: No such file or directoryin/heroku: line 4: /cygdrive/d/Development/Heroku/ruby-1.9.2/bin 
```

所以我更新了 Cygwin 并确保选择了所有必要的 ruby​​ 包/解释器等，但这仍然没有解决问题，因为我一直收到相同的错误消息。

然后我按照[在 Cygwin 下运行 Heroku 命令行客户端中概述的步骤进行操作：](https://plus.google.com/+MichaelSlinn/posts/8WTfAwXGN5H)

[(1) 从http://rubyforge.org/frs/download.php/76072/rubygems-1.8.24.zip](http://rubyforge.org/frs/download.php/76072/rubygems-1.8.24.zip)下载 RubyGem 1.9.3

（2）然后运行以下 -

```
$ unzip rubygems-1.8.24.zip
$ cd rubygems-1.8.24/rubygems-1.8.24
$ ruby setup.rb install
$ gem update --system
$ gem install heroku 
```

（3）打开一个新的shell窗口并验证版本——

```
$ heroku version
heroku-gem/2.28.10 (i386-cygwin) ruby/1.8.7 
```

这解决了我的问题，我现在可以从 Windows 上的 Cygwin shell 运行 heroku 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-28T07:55:56.240

对我来说@Azkuma 的回答只让我成功了一半。什么对我有用：

1）下载并解压RubyGem zip：[https ://rubygems.org/pages/download](https://rubygems.org/pages/download)

2) 为 gem 和 heroku 设置别名

```
alias gem='C:/ruby/bin/gem'
alias heroku='"C:/Program Files (x86)/Heroku/bin/heroku.bat"' 
```

3）如上安装

```
ruby setup.rb install
gem update --system
gem install heroku 
```

4）登录heroku

```
heroku login 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T15:47:36.717

我发现简单地设置一个别名对我有用。

```
alias heroku=c:/Program\\\ Files\\\ \\\(x86\\\)/Heroku/bin/heroku.bat 
```

然后我可以`heroku`直接在 Cygwin 中使用该命令。

我唯一遇到的问题是`heroku login`（以及扩展名`git push heroku master`），提示我使用 cmd.exe。对于这部分，我只是从相关文件夹中打开我的 Git Bash 窗口，登录并从那里推送。

# javascript - 使用 jQuery 显示/切换每个元素在任何特定时刻仅在屏幕上显示一个

> ID：15289380
> 
> 赞同：-1
> 
> 时间：2013-03-08T08:07:12.993
> 
> 标签：javascript, jquery, html, css

我有一些链接：

1.  关于
2.  文件夹
3.  恢复

当我单击“关于”时，我希望显示关于元素，但要隐藏 Portfolio 和 Resume 元素（等等通过模式）......

我的代码结构如下（剪辑到需要的部分）：

HTML：

```
<section id="attCatch">
    <div class="container_12">
        <h1 class="attCatchText">The name's Jake. I like to make things.</h1>
        <nav id="topMainNav">
            <ul>
                <li><a href="#" title="#" class="aboutLink">About</a></li>
                <li><a href="#" title="#" class="portfolioLink">Portfolio</a></li>
                <li><a href="#" title="#" class="resumeLink">Resume</a></li>
            </ul>
        </nav>
    </div>
</section>
<section id="contentLoader">
    <div class="container_12">
    <section class="mn_pages">
        <article class="about_page">
            <h1>About stuff</h1>
        </article>

        <article class="portfolio_page">
            <h1>Portfolio stuff</h1>
        </article>

        <article class="resume_page">
            <h1>Resume stuff</h1>
        </article>
    </section>
    </div>
</section> 
```

jQuery：

```
$(document).ready(function(){
     $('.mn_pages').hide();
     var i = 0;
     $('.topMainNav').each(function(){
         $(this).click(function(){ 
             $('.mn_pages:eq('+$(this).data('idf')+')').toggle('slow');
         });
         $(this).data('idf',i);
         i++;
    });
}); 
```

我以为我的 jQuery 代码可以工作，但事实并非如此。

包含 JS 小提琴；[http://jsfiddle.net/MsYdJ/](http://jsfiddle.net/MsYdJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:19:06.513

可能是这样的：

### [试用小提琴](http://jsfiddle.net/MsYdJ/12/)

```
$(function(){
   $('.mn_pages').find('article').hide(); // <---HIDES ON PAGE LOAD
   $('#topMainNav a').click(function(e){
      e.preventDefault();
      var page = $(this).text().toLowerCase();
      $('.mn_pages').find('article').hide(); // <---OPENED ONE HIDES
      $('[class="'+page+'_page"]').show(); //<------CLICKED ONE SHOWS
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:34:14.220

您可以使用以下选择器隐藏`articles`页面加载：

```
$('.mn_pages > article').hide(); 
```

然后以下显示/隐藏正确的元素：

```
$('#topMainNav li').on('click', function(e) {
  e.preventDefault();
  $('.mn_pages > article').hide().eq($(this).index()).show();
}); 
```

[这是一个小提琴](http://jsfiddle.net/GhwYb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:25:21.243

这是一个实现，其中您要求类/Id 名称保持不变，并随时更改链接的名称 -[这是小提琴](http://jsfiddle.net/MsYdJ/16/)

```
$(document).ready(function () {
        $('#contentLoader .mn_pages').children().hide();
        $('#topMainNav li').each(function () {
            var targetClass=($(this).children().attr("class")).replace("Link","_page");
            $(this).bind("click",function(){
                $("#contentLoader .mn_pages").children().hide();
                $("#contentLoader .mn_pages ."+targetClass).show();
            });
        });
}); 
```

# wordpress - 为什么 Fishpig 不能正确设置 Magento 博客 URL？

> ID：15289381
> 
> 赞同：0
> 
> 时间：2013-03-08T08:07:14.507
> 
> 标签：wordpress, magento, fishpig

所以，我的一个客户设置了这个 Magento 站点：

```
http://kharmakhare.com 
```

实际上，我以前曾问过有关此网站的问题。这一次，他们希望在以下位置建立一个博客：

```
http://kharmakhare.com/blog 
```

是的，已经有一个了。他们想用 Wordpress 集成到 Magento 主题中的 Wordpress 博客替换 AW 博客。只有一个问题；我根本无法更改网址。

不管我做什么，博客总是出现在：

```
http://kharmakhare.com/wordpress 
```

我尝试禁用 AW 博客并在以下位置测试新博客：

```
http://kharmakhare.com/blog 
```

但什么也没有发生。上面的 url 只是重定向到主站点。

我所有的 Wordpress 集成设置都是绿色的（“改进你的博客”除外）。如果我在设置中禁用 Wordpress 集成，/wordpress 目录仍然会出现。

在 Wordpress 中，站点 url 设置为 /blog。wordpress 网址是 /wp。每当我尝试更改永久链接设置时，Wordpress 都无法创建 .htaccess 文件，所以我手动进行了...但它总是在设置中使用 /blog：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule> 
```

并不是说它很重要。即使它设置为：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wp/index.php [L]
</IfModule> 
```

它仍然不起作用。

这是一个真正的、真正的痛苦。文档说它很容易，我读过的所有内容都说它很容易。这对我来说根本行不通。我什至尝试重新安装插件。然后我尝试卸载并重新安装插件。我还尝试过（在此之前）卸载并重新安装 wordpress。没有任何效果。

如果没有新博客来替换它，我无法删除 AW 博客。我可以暂时禁用 AW 博客，但不能删除它。有什么我想念的吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T11:25:38.987

首先，将 WordPress 集成升级到最新版本并卸载 AheadWorks 博客扩展。

其次，我假设您已将 WordPress 安装在“博客”以外的子目录中。对于这个例子，我假设你已经将它安装在 'wp' 中。

要使您的博客在 /blog 上可见，请将您的博客路由设置为“博客”，并将您的 WordPress 路径设置为“wp”。接下来，登录 WordPress 并选择 Settings > General 并将第二个 URL 选项（标记为站点地址 (URL)）更改为[http://www.yourmagentourl.com/blog](http://www.yourmagentourl.com/blog)

您现在应该可以在 /blog URL 上查看您的博客。

最后，如果 WordPress 安装在 /wp 并且在 /blog 中可见，您的 .htaccess 文件应该引用 /wp/ 而不是 /blog

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T14:18:07.117

解决方案很简单。首先完全禁用 AW_Blog。不要只是通过配置或通过 System > Advanced 禁用它。要么完全卸载它，要么删除 app/etc/modules/AW_Blog.xml 文件，然后刷新缓存。

AW_Blog 模块使用 - 相当自私 - 'blog' 作为它的frontName。frontName 优先于 Magento WordPress 集成中使用的动态路由系统，因此在安装 AW_Blog 时，您不能使用“博客”作为 WordPress URL。

完全卸载 AW_Blog 后，在扩展配置中输入“blog”作为博客路由。最后，登录 WordPress 管理员并选择设置 > 常规。在这里，您将看到 2 个 URL。第一个 URL 应该是真正的 WordPress URL（如果 WordPress 安装在 /wp 那么这应该是 /wp URL）。第二个 URL 应该是集成的 Magento URL（例如 /blog URL）

WordPress .htaccess 文件无效，因为它仅在实际访问 WordPress 时运行，而在访问 Magento 时不运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:37:19.140

嗨，这更像是一个问题澄清（[免责声明](https://meta.stackexchange.com/questions/124811/why-cant-we-comment-on-questions-when-new-user)），因为我遇到了可能是相关的问题。

当您访问[http://WWW.kharmakhare.com/blog](http://WWW.kharmakhare.com/blog)而不是较短的 url 时会发生什么？目前对我来说 - www.magento.com/blog 正确解析，而 magento.com/blog 将我发送到主页。

另外，您是否尝试过在 wordpress 设置中设置完整路径？您的问题表明您已将其设置为 /blog 而不是完整的[http://kharmakhare.com/blog](http://kharmakhare.com/blog)？我相信它应该包括完整的文件路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T22:19:55.170

好的，我认为这一定是插件中的错误。我可以让它工作的唯一方法是编辑 Fishpig 插件的核心，以便默认路由是“博客”。

不是一个理想的解决方案，但至少它有效。但是，这不应该是一个问题，该插件应该按预期工作而无需修改核心文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T10:02:50.940

在处理 Wordpress 插件时，请务必清理 magento 缓存（最好在编辑期间禁用它）并清除浏览器缓存。

在处理无效缓存时，在 magento 和 Wordpress 插件之间更改路由很快就会变成一场噩梦。

还要检查您的 URL 重写，因为有时作为最后的手段，网店所有者会使用它来使事情正常进行。

# android - 如何以解码过程应该减小图像大小的方式在android中解码大图像？

> ID：15289386
> 
> 赞同：-6
> 
> 时间：2013-03-08T08:07:50.700
> 
> 标签：android, performance, bitmap, drawable, decode

如何以解码过程应该减小图像大小的方式在android中解码大图像？

使用的代码：

```
Bitmap bmp= BitmapFactory.decodeStream(MainActivity.this.getAssets().open("index.png")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:18:29.710

检查这个，它可能会有所帮助

尝试使用 BitmapFactory.Options 解码图像

查看以下链接了解更多详情

[http://android-coding.blogspot.in/2011/06/reduce-bitmap-size-using.html](http://android-coding.blogspot.in/2011/06/reduce-bitmap-size-using.html)

谢谢。

# ajax - CakePHP Ajax 分页

> ID：15289391
> 
> 赞同：4
> 
> 时间：2013-03-08T08:08:08.060
> 
> 标签：ajax, cakephp

我目前正在尝试使 ajax 分页列表正常工作。我想我很接近了。当我单击上一个、下一个或单个页码时，会显示正确的结果，但 div.postsPaging 会加载分页结果以及 Cake 的 default.ctp 布局的页眉和页脚。我尝试在 displayPosts 视图或 displayPosts 操作中将布局设置为 ajax，但是默认布局根本不出现（在 div 内部或外部）。

我的问题是，如何仅使用分页结果而不是页眉、页脚或布局中的任何其他内容加载 postPaging div。如何让 ajax 请求的结果不包含默认布局的页眉和页脚？

附加到页面索引和下一步按钮之一的 jQuery 事件是：

```
$("#link-196981051").bind("click", function (event) {$.ajax({dataType:"html", success:function (data, textStatus) {$("#postsPaging").html(data);}, url:"\/AuthAdminCakeApp\/posts\/displayPosts\/page:2"});
return false;});`

$("#link-296431922").bind("click", function (event) {$.ajax({dataType:"html", success:function (data, textStatus) {$("#postsPaging").html(data);}, url:"\/AuthAdminCakeApp\/posts\/displayPosts\/page:2"});
return false;});` 
```

我的 PostsController 代码如下所示：

```
class PostsController extends AppController {

public $helpers = array('Js' => 'Jquery');    
public $paginate = array(
    'limit' => 3,
    'order' => array(
        'Post.title' => 'asc'
   )
);

public function displayPosts() {
    $this->set('posts', $this->paginate());
}

// other actions
} 
```

我的分页元素（paging.ctp）如下所示：

```
<?php
$this->Paginator->options(
        array('update'=>'#postsPaging',
                'url'=>array('controller'=>'posts', 
'action'=>'displayPosts')));
?>
<table cellpadding="0" cellspacing="0">
<tr>
    <th><?php echo $this->Paginator->sort('id'); ?></th>
    <th><?php echo $this->Paginator->sort('user_id'); ?></th>
    <th><?php echo $this->Paginator->sort('title'); ?></th>
    <th><?php echo $this->Paginator->sort('body'); ?></th>
    <th><?php echo $this->Paginator->sort('created'); ?></th>
    <th><?php echo $this->Paginator->sort('modified'); ?></th>
    <th class="actions"><?php echo __('Actions'); ?></th>
</tr>

<?php
foreach ($posts as $post): ?>
<tr>
    <td><?php echo h($post['Post']['id']); ?>&nbsp;</td>
    <td>
        <?php echo $this->Html->link($post['User']['id'],     array('controller' => 'users', 'action' => 'view', $post['User']['id'])); ?>
    </td>
    <td><?php echo h($post['Post']['title']); ?>&nbsp;</td>
    <td><?php echo h($post['Post']['body']); ?>&nbsp;</td>
    <td><?php echo h($post['Post']['created']); ?>&nbsp;</td>
    <td><?php echo h($post['Post']['modified']); ?>&nbsp;</td>

    <td class="actions">
        <?php echo $this->Html->link(__('View'), array('action' => 'view', $post['Post']['id'])); ?>
        <?php echo $this->Html->link(__('Edit'), array('action' => 'edit', $post['Post']['id'])); ?>
        <?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $post['Post']['id']), null, __('Are you sure you want to delete # %s?', $post['Post']['id'])); ?>
    </td>
</tr>
<?php endforeach;  ?>
</table>
<?php
echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
echo $this->Paginator->numbers(array('separator' => ''));
echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
?> 
```

displayPosts 操作的视图如下所示：

```
<div id="postsPaging">
<?php echo $this->element('Posts/paging'); ?>
</div> 
```

编辑：我使用的是 CakePHP 2.2.5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:16:06.323

您必须使用 ajax 布局。

```
$this->layout = ($this->request->is("ajax")) ? "ajax" : "default"; 
```

您还可以将此代码片段放在 AppController 中，用于应用程序范围内的 Ajax 响应。

```
public function beforeRender() {
    $this->layout = ($this->request->is("ajax")) ? "ajax" : "default";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T14:28:12.803

还要确保您正在加载 RequestHandler 组件。

```
var $components = array('RequestHandler'); 
```

将上述内容放入您的 Controller 或 AppController 将处理将布局设置为 ajax。

# jquery - 自动完成 json 格式响应无法显示在建议框中。我哪里做错了？

> ID：15289393
> 
> 赞同：0
> 
> 时间：2013-03-08T08:08:27.293
> 
> 标签：jquery, json, autocomplete

这是没有自动完成的独立工作代码。

```
function postVeJSON()
{
    var gelenJSONkurumlar;
    $.post("evrak_action.php",
        {isTipi:'kurumListesi',jsonMU:'evet'},
        function(data){
            alert(data);
        }
    );
} 
```

这给了我正确格式化的 json 数据

![从服务器返回 json (php)](../Images/b82b1b49b376581f23cc1ab3de0117c0.png)

但是当我尝试使用此代码在自动完成 ui 中获取它时

```
$("#evrakKurum").autocomplete({
    source: function(request, response) { 
        $.ajax({
            url: "evrak_action.php",
            data: {isTipi:'kurumListesi',jsonMU:'evet'},
            dataType: "json", 
            type: "POST", 
            success: function(data) {
                response(data);
            }
        });
    }   
    ,
minLength:3
}); 
```

抛出的任何错误或显示的任何消息。我哪里做错了？

# c++ - VHD 无法在 hyper V 中启动

> ID：15289405
> 
> 赞同：0
> 
> 时间：2013-03-08T08:09:49.493
> 
> 标签：c++, windows, virtualization, vhd, mbr

我正在为具有多个分区的磁盘创建动态 vhd。

涉及的步骤是

1.  首先，我通过创建页眉和页脚并计算 bat（块分配表）大小来创建 VHD。

2.  然后我使用 win32 API 获取磁盘大小和分区详细信息

3.  我拍摄卷的快照

4.  我读取父磁盘的 mbr 并覆盖扇区偏移量，然后将具有多个分区的 mbr 写入 VHD。

5.  现在对于每个卷影副本，我读取快照并写入 VHD 文件

6.  此过程成功完成，然后我在 diskmgmt.msc 中打开 vhd。它显示了两个分区，我可以看到这些分区中的数据。

7.  现在我将此 vhd 复制到 hyper V 机器，然后创建一个新 vm 并将此 vhd 添加到该机器。

8.  当它启动时，它给我一个错误“磁盘读取错误”，但是当我将此 vhd 添加到现有操作系统并在引导加载程序中添加引导条目时，它可以正常引导。

我不知道出了什么问题。如果有人来给我一些指示。

这是编写mbr的代码

```
/* Stream out the first data block which contains only the MBR */

   BYTE zerosector[512] = {0};

  zerosector[0] = 0x80;

  assert(0 != WriteFile(hFile, zerosector, 512, &nWritten, NULL));  /* here goes the  first block's block bitmap */

  zerosector[0] = 0x00;

 unint16 mcount = 0;
 unint64 indexOffset = 0;

 memcpy(&mbr,mbrbuff,512);
 for(vector<PartOffset*>::iterator pTemp = pPart.begin();pTemp!=pPart.end();pTemp++)
 {

   mbr.partition[mcount].type          = 0x07;
   mbr.partition[mcount].start_sector  = 4096 + indexOffset ;
   mbr.signature                       = 0xAA55;
   mbr.partition[mcount].total_sectors =  (((*pTemp)->total_sectors)) + 1 ; 
   indexOffset +=  ((((*pTemp)->total_sectors))) + 1;
   //if(mcount==0)
     //  indexOffset +=  ((((*pTemp)->start_sector)/512) );
   mcount++;

 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T15:39:29.027

[DiscUtils](http://discutils.codeplex.com/)提供了访问和写入与 Hyper-V 兼容的 .VHD 文件的参考

看看它如何从[DiskFactory开始构建 VHD](http://discutils.codeplex.com/SourceControl/latest#src/Vhd/DiskFactory.cs)

# gcc - Makefile循环依赖+没有这样的文件错误

> ID：15289406
> 
> 赞同：2
> 
> 时间：2013-03-08T08:09:50.260
> 
> 标签：gcc, makefile, avr-gcc, atmega

我一直在尝试使用模板为我的 avr gcc 项目编写一个生成文件。这是我第一次写一个（到目前为止，我一直在使用 AVR Studio 4 中的默认内置 makefile）

当我尝试编译时出现错误

```
make: Circular Makefile.out <- Makefile dependency dropped.
make: Circular all.out <- all dependency dropped.
avr-gcc  -I.  -g -mmcu=atmega8  -Os  -fpack-struct -fshort-enums -funsigned-bitfields -funsigned-char -Wall -std=gnu99 -DF_CPU=8000000 -Wa,-ahlms=../8_8_LED_DOT_MATRIX_DISPLAY.lst -c ../8_8_LED_DOT_MATRIX_DISPLAY.c -o ../8_8_LED_DOT_MATRIX_DISPLAY.o
avr-gcc  -Wl,-Map,8_8_LED_DOT_MATRIX_DISPLAY .out .map -mmcu=atmega8  -lm  -o 8_8_LED_DOT_MATRIX_DISPLAY .out  ../8_8_LED_DOT_MATRIX_DISPLAY.o 
avr-gcc: .out: No such file or directory
avr-gcc: .map: No such file or directory
avr-gcc: .out: No such file or directory 
```

这是我的makefile

```
#########  AVR Project Makefile Template   ######### 
######                                        ###### 
######    Copyright (C) 2003-2005,Pat Deegan, ###### 
######            Psychogenic Inc             ###### 
######          All Rights Reserved           ###### 
######                                        ###### 
###### You are free to use this code as part  ###### 
###### of your own applications provided      ###### 
###### you keep this copyright notice intact  ###### 
###### and acknowledge its authorship with    ###### 
###### the words:                             ###### 
######                                        ###### 
###### "Contains software by Pat Deegan of    ###### 
###### Psychogenic Inc (www.psychogenic.com)" ###### 
######                                        ###### 
###### If you use it as part of a web site    ###### 
###### please include a link to our site,     ###### 
###### http://electrons.psychogenic.com  or   ###### 
###### http://www.psychogenic.com             ###### 
######                                        ###### 
#################################################### 

##### This Makefile will make compiling Atmel AVR 
##### micro controller projects simple with Linux 
##### or other Unix workstations and the AVR-GCC 
##### tools. 
##### 
##### It supports C, C++ and Assembly source files. 
##### 
##### Customize the values as indicated below and : 
##### make 
##### make disasm 
##### make stats 
##### make hex 
##### make writeflash 
##### make gdbinit 
##### or make clean 
##### 
##### See the http://electrons.psychogenic.com/ 
##### website for detailed instructions 

#################################################### 
#####                                          ##### 
#####              Configuration               ##### 
#####                                          ##### 
##### Customize the values in this section for ##### 
##### your project. MCU, PROJECTNAME and       ##### 
##### PRJSRC must be setup for all projects,   ##### 
##### the remaining variables are only         ##### 
##### relevant to those needing additional     ##### 
##### include dirs or libraries and those      ##### 
##### who wish to use the avrdude programmer   ##### 
#####                                          ##### 
##### See http://electrons.psychogenic.com/    ##### 
##### for further details.                     ##### 
#####                                          ##### 
#################################################### 

#####         Target Specific Details          ##### 
#####     Customize these for your project     ##### 

# Name of target controller 
# (e.g. 'at90s8515', see the available avr-gcc mmcu 
# options for possible values) 
MCU=atmega8 

# id to use with programmer 
# default: PROGRAMMER_MCU=$(MCU) 
# In case the programer used, e.g avrdude, doesn't 
# accept the same MCU name as avr-gcc (for example 
# for ATmega8s, avr-gcc expects 'atmega8' and 
# avrdude requires 'm8') 
PROGRAMMER_MCU=m8 

# Name of our project 
# (use a single word, e.g. 'myproject') 
PROJECTNAME=8_8_LED_DOT_MATRIX_DISPLAY 

# Source files 
# List C/C++/Assembly source files: 
# (list all files to compile, e.g. 'a.c b.cpp as.S'): 
# Use .cc, .cpp or .C suffix for C++ files, use .S 
# (NOT .s !!!) for assembly source code files. 
PRJSRC=../8_8_LED_DOT_MATRIX_DISPLAY.c 

# additional includes (e.g. -I/path/to/mydir) 
INC= 

# libraries to link in (e.g. -lmylib) 
LIBS= 

# Optimization level, 
# use s (size opt), 1, 2, 3 or 0 (off) 
OPTLEVEL=s 

#################################################### 
#####                Config Done               ##### 
#####                                          ##### 
##### You shouldn't need to edit anything      ##### 
##### below to use the makefile but may wish   ##### 
##### to override a few of the flags           ##### 
##### nonetheless                              ##### 
#####                                          ##### 
#################################################### 

##### Flags #### 

# HEXFORMAT -- format for .hex file output 
HEXFORMAT=ihex 

# compiler
CFLAGS=-I. $(INC) -g -mmcu=$(MCU) -O$(OPTLEVEL) \
    -fpack-struct -fshort-enums             \
    -funsigned-bitfields -funsigned-char    \
    -Wall -std=gnu99 -DF_CPU=8000000               \
    -Wa,-ahlms=$(firstword                  \
    $(filter %.lst, $(<:.c=.lst)))

# assembler 
ASMFLAGS =-I. $(INC) -mmcu=$(MCU)        \
    -x assembler-with-cpp            \
    -Wa,-gstabs,-ahlms=$(firstword   \
        $(<:.S=.lst) $(<.s=.lst))

# linker 
LDFLAGS=-Wl,-Map,$(TRG).map -mmcu=$(MCU) \
    -lm $(LIBS)

##### executables #### 
CC=avr-gcc 
OBJCOPY=avr-objcopy 
REMOVE=rm -f 

##### automatic target names #### 
TRG=$(PROJECTNAME).out 
HEXROMTRG=$(PROJECTNAME).hex 
HEXTRG=$(HEXROMTRG) $(PROJECTNAME).ee.hex 

# Define all object files. 

# Start by splitting source files by type
#  C
CFILES=$(filter %.c, $(PRJSRC))
#  Assembly
ASMFILES=$(filter %.S, $(PRJSRC))

# List all object files we need to create
OBJDEPS=$(CFILES:.c=.o)    \
    $(ASMFILES:.S=.o)

.SUFFIXES : C .o .out .s .S \
    .hex .ee.hex .h .hh .hpp

.PHONY: writeflash clean stats gdbinit stats 

# Make targets: 
# all, disasm, stats, hex, writeflash/install, clean 
all: $(TRG) 

#disasm: $(DUMPTRG) stats 

#stats: $(TRG)
#   $(OBJDUMP) -h $(TRG)
#   $(SIZE) $(TRG) 

hex: $(HEXTRG) 

#writeflash: hex 
#install: writeflash 

#$(DUMPTRG): $(TRG) 
#   $(OBJDUMP) -S  $< > $@

$(TRG): $(OBJDEPS) 
    $(CC) $(LDFLAGS) -o $(TRG) $(OBJDEPS)

#### Generating assembly ####
# asm from C
%.s: %.c
    $(CC) -S $(CFLAGS) $< -o $@

# asm from (hand coded) asm
%.s: %.S
    $(CC) -S $(ASMFLAGS) $< > $@

# asm from C++ 
#.cpp.s .cc.s .C.s : 
#   $(CC) -S $(CFLAGS) $(CPPFLAGS) $< -o $@ 

#### Generating object files #### 
# object from C
.c.o: 
    $(CC) $(CFLAGS) -c $< -o $@

# object from C++ (.cc, .cpp, .C files) 
#.cc.o .cpp.o .C.o : 
#   $(CC) $(CFLAGS) $(CPPFLAGS) -c $< -o $@ 

# object from asm 
.S.o :
    $(CC) $(ASMFLAGS) -c $< -o $@

#### Generating hex files #### 
# hex files from elf 
#####  Generating a gdb initialisation file    ##### 
.out.hex:
    $(OBJCOPY) -j .text                    \
        -j .data                       \
        -O $(HEXFORMAT) $< $@

.out.ee.hex:
    $(OBJCOPY) -j .eeprom                  \
        --change-section-lma .eeprom=0 \
        -O $(HEXFORMAT) $< $@

#### Cleanup #### 
clean:
    $(REMOVE) $(TRG) $(TRG).map $(DUMPTRG)
    $(REMOVE) $(OBJDEPS)
    $(REMOVE) $(LST) $(GDBINITFILE)
    $(REMOVE) $(GENASMFILES)
    $(REMOVE) $(HEXTRG)

#####                    EOF                   ##### 
```

任何帮助我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:11:15.240

您的定义中有一个尾随空格`PROJECTNAME`，因此`TRG`变量被设置为`8_8_LED_DOT_MATRIX_DISPLAY .out`并且您的链接命令最终引用了该文件`.out`（以及该文件`.map`，因为在定义中似乎也有一个尾随空格`TRG`）。这是“没有这样的文件”错误和循环依赖的罪魁祸首。

循环依赖错误的原因有点微妙：由于尾随空格，规则

```
$(TRG) : $(OBJDEPS)
    <command> 
```

结果是

```
% : %.out
    <command> 
```

由于您的`all`目标未标记为`.PHONY`，因此在检查是否必须重建`make`时考虑此规则。`all`另一方面，`.out`是一个内置的后缀并且`make`有一个内置的规则

```
%.out : %
    @rm -f $@
    cp $< $@ 
```

结合以上，这会导致`all`. 这同样适用于`Makefile`，因为`make`总是尝试重建它处理的每个文件。

tl;dr：删除`PROJECTNAME`and中的尾随空格`TRG`。

# memory-leaks - 使用 EPPLus 库生成文件时内存使用率高

> ID：15289409
> 
> 赞同：2
> 
> 时间：2013-03-08T08:09:54.843
> 
> 标签：memory-leaks, epplus, red-gate-ants

![探查器快照](../Images/7d0a47357bd1290e877c97c9faa26935.png)

大家好，

使用 ANTS 内存分析器，我注意到在 IIS 上使用 EPPLUS(3.5 MB) 创建 Excel 文件的过程中，向 IIS 工作进程 (w3wp.exe) 添加了更多内存 (150MB)。下载完成后内存计数不会减少。我使用与此代码几乎相同的代码：[http](http://epplus.codeplex.com/SourceControl/changeset/view/c5783b32e89e#SampleApp/Sample1.cs) ://epplus.codeplex.com/SourceControl/changeset/view/c5783b32e89e#SampleApp/Sample1.cs 。

EPPLus 拥有我需要的一切。除了这个小问题。我还看到了一些“内存不足”的线程，但似乎都没有得到解决。如果有人遇到同样的问题并解决了，请告诉我。

第 2 代持有大量物品。

**问题：ExcelCell 对象保留在第 2 代。如何在不调用 GC.Collect() 的情况下清除它**

谢谢你。

# r - 从数据框中查找最近的经纬度和 Z 值

> ID：15289410
> 
> 赞同：0
> 
> 时间：2013-03-08T08:10:07.717
> 
> 标签：r

我有数据框：

```
data <- data.frame(long = c( 50.75  80.75   0.75  65.75  70.75  75.75 100.75 105.75 110.75         
                  -4.25  65.75,100.55), lat=c(13.3 13.8 13.8 13.8 13.8 13.8 13.8 13.8 13.8 
                   13.8 13.8,14.8), XCh4 c(1739.9 1737.5 1740.5 1715.7 1728.5 1745.0 1724.6
                   1734.2 1733.4 1713.6 1716.3 1725.3)) 
```

我有车站价值，即

```
lon<- 100.60

lat <-13.4 
```

那么我应该如何提取最接近车站的纬度和经度并获得z值呢？
我努力了：

```
lat.match   <- which(abs(data[[3]]$lat - 13.04) == min(abs(data[[3]]$lat - 14.04)))[1]

lon.match   <- which(abs(data$long - 100.60)== min(abs(data$long- 100.60)))[1]

data[data$long[lon.match] & data$lat[lat.match],] 
```

我没有得到准确的纬度经度对，假设是 lat = 13.8 和 longitude = 100.75。

有人可以告诉我如何得到我的答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:36:47.830

编辑以承认纬度收缩减少了经度差异以及代码计算的不是“距离”而是“度数平方”的事实：

```
data$degr.sqrd <- ( (lon-data$long)*cos(90*data$lat ) )^2 + (lat-data$lat)^2
 which.min(data$degr.sqrd)
#[1] 7
data[ which.min(data$degr.sqrd), "XCh4"]
#[1] 1724.6

data[ which.min(data$degr.sqrd), ]
#    long  lat   XCh4 degr.sqrd
#7 100.75 13.8 1724.6 0.1651696 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:11:02.850

当心！你有经纬度坐标。不要使用假设坐标是平面的方法，即在垂直和水平方向上的测量单位是相同的，而地理坐标则不是这样。在示例数据中，它没有任何区别，但如果您有大量跨较大规模的数据，它可能会有所作为。相反，您应该考虑计算大圆距离（或它的一些导数）。试试这个：

```
r <- 6371 # radius of the Earth
#Coordinates need to be in radians
data$longR <- data$long * pi/180
data$latR <- data$lat * pi/180
lon <- 100.60 * pi/180
lat <- 13.4 * pi/180
data$dist <- acos(sin( lat ) * sin( data$latR ) + cos( lat ) * cos( data$latR) * cos( data$longR -lon ) ) * r
data[ which.min( data$dist ) , ]
    long  lat   XCh4    longR      latR    dist
7 100.75 13.8 1724.6 1.758419 0.2408554 47.3403 
```

距离度量与地球半径的比例相同（在这种情况下为 47.3 公里）。[这里](http://www.r-bloggers.com/great-circle-distance-calculations-in-r/)有一篇关于不同距离计算方法的精彩博客文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:00:13.467

另一种使用的解决方案`dist`，

```
mat <- dist(cbind(c(data$lat,lat),c(data$long,lon)))
n <- attr(mat,'Size')
i <- 1:n
j <- n
v <- mat[n*(i-1) - i*(i-1)/2 + j-i]
data[which.min(v),]
long  lat   XCh4   dist
7 100.75 13.8 1724.6 0.1825 
```

这里的好处，你可以改变距离，例如：

```
mat <- dist(cbind(c(data$lat,lat),c(data$long,lon)),meath='minkowski')

data[which.min(v),]
    long  lat   XCh4   dist
7 100.75 13.8 1724.6 0.1825  ## not really representative , we get the same result:) 
```

# java - 在 Java 中读取 csv 文件 CSVReader 或 RandomAccessFile 哪个更有效？

> ID：15289412
> 
> 赞同：-1
> 
> 时间：2013-03-08T08:10:26.120
> 
> 标签：java, performance, csv, random-access, memory-efficient

我想读取一个包含行和列的巨大数据文件（csv 格式）。我想按顺序阅读和处理各个列。哪种方法在速度和内存利用率方面更有效？我应该使用 Java 的 CSVReader 或随机访问文件功能吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:14:48.180

如果性能和效率是您最关心的问题，请使用[内存映射文件和 NIO](https://stackoverflow.com/questions/9122558/memory-mapped-file-java-nio)并编写您自己的 CSV 解析器。

但大多数情况下，这只是浪费您的时间。所以我建议你首先尝试`CSVReader`，只有当你发现这对你不起作用时，你才编写自己的 CSV 解析器。

另请注意， a`BufferedReader`通常会比 快`RandomAccessFile`。

# cakephp - CakePHP 中的身份验证：不使用默认的“用户”表

> ID：15289415
> 
> 赞同：1
> 
> 时间：2013-03-08T08:10:58.377
> 
> 标签：cakephp, authentication, default

我正在一个 cakephp 项目中实现身份验证。但我不想使用默认的“用户”表。我想使用“system_admins”表。我在这里阅读了一个教程：http: [//book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)。

这是我的控制器（SysemAdminController.php）

```
<?php
App::uses('AppController', 'Controller');

class SystemAdminsController extends AppController {
    // index, add, edit, delete actions
    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->authenticate = array(
            AuthComponent::ALL => array('userModel' => 'SystemAdmin'),
            'Form',
            'Basic'
       );
    }

    public function login() {
        if($this->request->is('post')) {
            if($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());
            }
            else {
                $this->Session->setFlash(__('Invalid username or password, try again'));
            }
        }
    }
} 
```

这是模型（SystemAdmin.php）

```
<?php
App::uses('AppModel', 'Model');
App::uses('AuthComponent', 'Controller/Component');
// validates options
public function beforeSave($options = array()) {
    if(isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
} 
```

这是视图（login.ctp）

```
<div class="users form">
<?php echo $this->Session->flash('auth'); ?>
<?php echo $this->Form->create('SystemAdmin'); ?>
<fieldset>
<legend><?php echo __('Please enter your username and password'); ?></legend>
<?php echo $this->Form->input('username');
      echo $this->Form->input('password');
?>
</fieldset>
<?php echo $this->Form->end(__('Login')); ?>
</div> 
```

但是每当我尝试访问[http://mydomain.com/system_admins/login](http://mydomain.com/system_admins/login) 时，它总是将我重定向到[http://mydomain.com/users/login](http://mydomain.com/users/login)并向我显示错误消息：“找不到用户控制器。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:03:31.130

您尚未定义默认登录页面。默认情况下，用户模型是`User`，所以默认登录页面是`/users/login`。

您需要定义[loginAction](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent%3a%3a%24loginAction)： `$this->Auth->loginAction = '/system_admins/login';`

并且可能允许`login`未经身份验证的用户使用该页面： `$this->Auth->allow('login');`

# cloud - Hyperic HQ 5.0 服务器未运行

> ID：15289417
> 
> 赞同：0
> 
> 时间：2013-03-08T08:11:16.700
> 
> 标签：cloud, monitoring, hyperic

**我已经完成了以下步骤在 ubuntu 12.04（64 位）机器上安装 hyperic hq（5.0 开源），即使我遵循了到处提到的步骤，它仍然给出以下错误（尽管商业版本安装正确）：**

```
Is there any can provide his comments ?

**[Step-1]**
esumit@esumit-HVM-domU:~/HQ$ sudo chown -R esumit:esumit /home/esumit/HQ
esumit@esumit-HVM-domU:~/HQ$ 
esumit@esumit-HVM-domU:~/HQ$ 

**[Step-2]**
esumit@esumit-HVM-domU:~/HQ$ ls
hyperic-hq-installer-5.0.0  hyperic-hq-installer-x86-64-linux-5.0.0.tar.gz
esumit@esumit-HVM-domU:~/HQ$ cd HQ
bash: cd: HQ: No such file or directory
esumit@esumit-HVM-domU:~/HQ$ ls
hyperic-hq-installer-5.0.0  hyperic-hq-installer-x86-64-linux-5.0.0.tar.gz
esumit@esumit-HVM-domU:~/HQ$ ls
hyperic-hq-installer-5.0.0  hyperic-hq-installer-x86-64-linux-5.0.0.tar.gz
esumit@esumit-HVM-domU:~/HQ$ cd hyperic-hq-installer-5.0.0/
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ ls
COPYING.txt                                 LICENSE.txt          setup.sh
hyperic-hq-agent-x86-64-linux-5.0.0.tar.gz  server-5.0.0.tar.gz
installer                                   setup.bat

**[Step-3]**
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ 
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ 
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ ./setup.sh -full
Unpacking JRE to temporary directory /tmp/jre
Please ignore references to missing tools.jar
Unable to locate tools.jar. Expected to find it in /tmp/lib/tools.jar
Loading taskdefs...
Taskdefs loaded
Initializing Hyperic HQ 5.0.0 Installation...
Choose which software to install:
1: Hyperic HQ Server
2: Hyperic HQ Agent
You may enter multiple choices, separated by commas.
1
HQ server installation path [default '/home/hyperic']:

What port should the HQ server's web-based GUI listen on for http communication? [default '7080']:

What port should the HQ server's web-based GUI listen on for secure https communication? [default '7443']:

Choices:
    1: Yes
    2: No
Would you like to use your own java keystore? [default '2']:

Enter the base URL for the HQ server's web-based GUI [default 'http://192.168.30.207:7080/']:

Enter the fully qualified domain name of the SMTP server that HQ will use to send email messages [default '192.168.30.207']:

Enter the email address that HQ will use as the sender for email messages [default 'hqadmin@168.30.207']:

Choices:
    1: HQ Built-in Database
    2: PostgreSQL
The HQ built-in database is provided for EVALUATION PURPOSES ONLY. For production purposes use vPosgreSQL. What backend database should the HQ server use? [default '1']:

What port should HQ's built-in database use? [default '9432']:

Choices:
    1: Yes
    2: No
Would you like to use an auto generated encryption key to encrypt the database password? [default '1']:

What should the username be for the initial admin user? [default 'hqadmin']:

What should the password be for the initial admin user?: 
(again): 
What should the email address be for the initial admin user? [default 'hqadmin@168.30.207']:

Loading install configuration...
Install configuration loaded.
Preparing to install...
Validating server install configuration...
Checking server webapp port...
Checking server secure webapp port...
Verifying admin user properties
Validating server DB configuration...
Installing the server...
Unpacking server to: /home/hyperic...
Creating server configuration files...
Using "small" installing profile...
Copying binaries and libraries to server installation...
Copying server configuration file...
Copying server db-upgrade files...
Copying server libs...
Setting up server database...

Now login to another terminal as root and execute this script:

    /home/esumit/HQ/hyperic-hq-installer-5.0.0/installer/data/hqdb/tune-os.sh

This script sets up the proper shared memory settings to run the
built-in database.

Press Enter after you run the script to continue this installation.

Setting up JDBC driver...
Copying database files...
Configuring database...
Loading taskdefs...
Taskdefs loaded
Starting repopulation of configuration table...
Starting built-in database...
Waiting for built-in database to start (on port 9432)...
Preparing database...
Loading taskdefs...
Taskdefs loaded
Loading taskdefs...
Taskdefs loaded
Loading taskdefs...
Taskdefs loaded
Waiting for server to stop...
Stopping built-in database...
Built-in database stopped.
Installing the server JRE ...
Unpacking JRE amd64-linux-1.6_33.tar.gz to: /home/hyperic/server-5.0.0...
Setting permissions on /home/hyperic/server-5.0.0...
Setting permissions on server binaries...
Fixing line endings on text files...
--------------------------------------------------------------------------------
Installation Complete:
  Server successfully installed to: /home/hyperic/server-5.0.0
--------------------------------------------------------------------------------

 You can now start your HQ server by running this command:

  /home/hyperic/server-5.0.0/bin/hq-server.sh start

 Note that the first time the HQ server starts up it may take several minutes
 to initialize.  Subsequent startups will be much faster.

 Once the HQ server reports that it has successfully started, you can log in
 to your HQ server at: 

  http://192.168.30.207:7080/
  username: hqadmin
  password: sumit123

 To change your password, log in to the HQ server, click the "Administration"
 link, choose "List Users", then click on the "hqadmin" user.

Setup completed.
A copy of the output shown above has been saved to:
  /home/esumit/HQ/hyperic-hq-installer-5.0.0/installer/logs/hq-install.log

Deleting temporary JRE

**[Step-4]**
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh start
-e Starting HQ Server...

**[Step-5]**
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh status
HQ Server is running (PID:2814).
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh status
HQ Server is running (PID:2814).
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh status
HQ Server is running (PID:2814).

**[Step-6]**
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh status
HQ Server is running (PID:2814).

**[Step-7]**
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh status
**HQ Server is not running.**
esumit@esumit-HVM-domU:~/HQ/hyperic-hq-installer-5.0.0$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:55:30.270

根据 Hyperic 文档 - 1\. Hyperic 服务器应以非 root 用户身份运行。2\. Hyperic 代理可以在 root 用户下运行。

永远不要以 root 身份运行 Hyperic 服务器。如果这样做，请以 root 身份停止它，在整个 Hyperic 服务器目录上运行“chown”命令以确保所有 Hy[eric 服务器文件都归非 root 用户所有，然后以非 root 用户身份启动它。

下次遇到 Hyperic 服务器问题时，请先检查 Wrapper 日志。包装器日志 (wrapper.log) 包含所有基本的启动/启动信息。服务器日志（server.log）包含常规操作信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:18:13.237

上面的所有步骤都很好，我实际上在启动服务器时犯了什么错误：

sudo /home/hyperic/server-5.0.0/bin/hq-server.sh 开始

我使用的命令如下：（**不带 sudo）** /home/hyperic/server-5.0.0/bin/hq-server.sh start

它有效

esumit@esumit-HVM-domU:/home/hyperic/server-5.0.0/logs$ sudo /home/hyperic/server-5.0.0/bin/hq-server.sh status **HQ 服务器正在运行 (PID:7374)** . esumit@esumit-HVM-domU:/home/hyperic/server-5.0.0/logs$

# javascript - 是否有任何本地方法可以对浏览器中公开的点的有序列表进行三角测量？

> ID：15289418
> 
> 赞同：1
> 
> 时间：2013-03-08T08:11:22.557
> 
> 标签：javascript, performance, browser, webgl

在过去的几个月里，我一直在涉足 WebGL。[greggman 的WebGL Fundamentals](http://games.greggman.com/game/webgl-fundamentals/)一步一步地创建了一个熟悉的像素空间。`(0, 0)`是左上角，矩阵支持缩放、旋转和平移等。这让我想到的一件事是在 gl 上下文中创建更多的二维[简单多边形](http://en.wikipedia.org/wiki/Simple_polygon)`canvas2d`——与or不太相似`svg`。

为了做到这一点，我在网上收集了各种资源来对要在浏览器中呈现的点数组进行三角测量。点数组经过：

1.  **Catmull Rom 曲线计算**采用点数组并将句柄坐标`u, v`属性添加到每个点。
2.  **自适应细分**可将曲线分成直线段，同时肉眼看起来仍然是弯曲的。
3.  **Line Segment Intersection**用于检查带有环的形状并将其分离为单独的简单多边形。
4.  **细分**最终应用于每个分离的形状。返回一个最终的三角形数组以由 WebGL 渲染。

## 可以在[此处](http://jonobr1.github.com/two.js/tests/webgl-shapes.html)找到这些操作的工作示例。（需要启用 WebGL 的浏览器）

## [`svg`](http://jonobr1.github.com/two.js/tests/svg-shapes.html)和中的相同示例[`canvas2d`](http://jonobr1.github.com/two.js/tests/canvas-shapes.html)。

现在这一切都发生在 JavaScript 中，我同意你的想法，*“这看起来和听起来都非常昂贵。”* 如此之多，以至于在更新循环上更改顶点时，`requestAnimationFrame`它的运行速度比`canvas2d`or慢得多`svg`。这部分与我转录高效算法的能力有关。但是，它必须与浏览器供应商通过编写我在较低级别概述的一组类似算法来创建可供性和性能提升的能力有关。

所以我的问题是：**浏览器供应商是否有任何方法用于渲染`canvas2d`并`svg`公开给开发人员使用？**

*这可能听起来很幼稚，这可能是因为它是。但是请听我说，如果 WebGL 要成为 Web 开发人员更多本机访问和控制的示例 api，为什么其他一些与它齐头并进的方法不可用呢？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:24:27.250

如果你只对凸多边形感兴趣，一个简单`TRIANGLE_FAN`的 WebGL 就足够了。如果要绘制凹多边形，可以使用 WebGL 中的[模板缓冲区技巧](http://www.glprogramming.com/red/chapter14.html#name13)。但是，您的一句话问题标题的答案是“否”。

有时 JavaScript 的速度会出奇的快。例如，这里有一个可以处理凹多边形的多边形镶嵌算法，[它](http://github.prideout.net/polygon.js/)以交互速率运行。

# objective-c - 如何设置委托以从不同的方法访问

> ID：15289422
> 
> 赞同：0
> 
> 时间：2013-03-08T08:11:33.590
> 
> 标签：objective-c, macos, delegates, nswindow

我有一些代码试图用一种方法显示我的 prefwindow，但我删掉了其余部分并留下了窗口 init 和其他方法。那么如何跨方法访问对象呢？

```
#import <Foundation/Foundation.h>
#import <Cocoa/Cocoa.h>
@interface hello : NSObject <NSApplicationDelegate> {
    NSWindow *prefwindow;
}

@property (assign) IBOutlet NSWindow *window;

-(void)openPrefs;

@end

@implementation hello;
@synthesize window;

int main (int argc, const char * argv[]) {
    hello *self = [[hello alloc] init]; 
    [NSAutoreleasePool new];
    [NSApplication sharedApplication];

    id prefwindow = [[[NSWindow alloc] initWithContentRect:NSMakeRect(0, 0, 350, 150)
                                                 styleMask:(NSTitledWindowMask | NSClosableWindowMask) backing:NSBackingStoreBuffered defer:NO]
                     autorelease];
    [prefwindow center];
    [prefwindow setTitle:appName];
    [prefwindow setDelegate:self];
    [self openPrefs];

    [NSApp setDelegate:self];
    [NSApp run];
    return 0;
}

-(void)openPrefs {
    [NSApp activateIgnoringOtherApps: YES];
    [prefwindow makeKeyAndOrderFront: self];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:45:48.563

您无权访问主函数内“hello”类的“prefwindow”变量。它超出了范围。为了改变变量，我相信你会想写

```
self.prefwindow = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:22:25.520

与`id prefwindow =`您一起声明一个名为`prefWindow`. 如果您想使用您在标题中声明的那个，请不要再次声明它。只做：

```
prefwindow = [[[NSWindow alloc] initWithContentRect:NSMakeRect(0, 0, 350, 150)
                                             styleMask:(NSTitledWindowMask | NSClosableWindowMask) backing:NSBackingStoreBuffered defer:NO]
                 autorelease]; 
```

您所做的只是声明一个新对象，其名称与您在标题中声明的对象相同。

# sql - 我可以在 sqlserver 2012 上创建 bak 2008 吗？

> ID：15289423
> 
> 赞同：-3
> 
> 时间：2013-03-08T08:11:35.193
> 
> 标签：sql, sql-server, sql-server-2008

我在 sqlserver2012 中创建了一个数据库。我想创建它的备份以在 sqlserver 2008 中使用。

是否可以创建用于 sqlserver2008 的备份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:21:35.600

提前道歉......我应该将此作为评论添加到以下帖子之一。

如果您问是否可以备份 SQL 2012 数据库并将其还原到 SQL 2008（或任何更低版本），答案是否定的。脚本将是做到这一点的唯一方法。请记住，并非 2012 年的所有功能都将在较低版本中提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:13:33.470

Tasks/Generate Script/Advanced 对话框包含一个下拉菜单，用于选择要为其编写脚本的目标 SQL Server 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:17:52.207

是的，当然可以，请查看此答案以了解如何操作：

[在 SQL Server Management Studio 中生成脚本](https://stackoverflow.com/questions/9429902/generate-script-in-sql-server-management-studio/9429970#9429970)

# javascript - 如何在无头模式下运行浏览器（chrome、IE 和 firefox）？

> ID：15289425
> 
> 赞同：9
> 
> 时间：2013-03-08T08:11:50.380
> 
> 标签：javascript, js-test-driver, headless-browser

我想将 JSTestDriver 与 jenkins-CI 集成。问题是构建服务器没有显示。有没有办法无头运行浏览器？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T18:32:17.667

如前所述，如果您的服务器是 Linux，则无法运行 IE。但是您可以运行其他浏览器，例如 Firefox。诀窍是在你的 Jenkins 服务器上安装 XVFB，它允许 Firefox 无头运行。我已经使用了这个设置并且效果很好。

[http://www.alittlemadness.com/2008/03/05/running-selenium-headless/](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-06T14:53:03.767

Firefox，从 Linux 上的 55 版和 Windows 和 macOS 上的 56 版开始，[现在有一个内置的无头模式](https://www.ghacks.net/2017/09/01/first-look-at-firefoxs-headless-mode/)。

目前（2017 年 9 月）我正在使用基于 GNU/Linux 的发行版和 Firefox 55，并且像这样的控制台命令可以正常工作：`firefox --headless http://www.wikipedia.org`，这不是很有用，但它可以工作，因为我看到相应的操作系统Firefox 的进程继续运行。

此功能将随着时间的推移逐渐改进，因此建议阅读[官方开发人员文档](https://developer.mozilla.org/en-US/Firefox/Headless_mode)，特别是对于那些对自动化测试和持续集成计划感兴趣的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-06T19:09:48.480

Google Chrome 现在（[Mac 和 Linux 的 Chrome 59，Windows](https://www.chromestatus.com/feature/5678767817097216)的 Chrome 60 ）内置了无头模式。它可以跨平台工作，并且不需要任何显示设备、虚拟机或类似的东西。您可以在此处找到[Eric Bidelman 撰写的精彩入门文章](https://developers.google.com/web/updates/2017/04/headless-chrome)，但这里是最关键的点：

您必须使用标志启动 Chrome 二进制文件（在 macOS 上它位于目录中的`Google Chrome.app`包内）。目前*还*需要加flag，因为GPU加速在headless模式下不能正常工作。`Contents/MacOS``--headless`*`--disable-gpu`*

 *```
chrome --headless --disable-gpu [url/path/flags...] 
```

与标准的非无头 Chrome 一样，如果`--remote-debugging-port=[SOME_PORT]`标志启用，您的测试运行程序可以使用开发工具接口与 Chrome 通信。但是，如果您只想自己快速测试它，您可以使用`--screenshot`或`--dump-dom`标志在加载后检查页面内容。

```
chrome --headless --disable-gpu --dump-dom https://stackoverflow.com/ 
```*

# c# - HttpWebRequest 检查允许的域

> ID：15289427
> 
> 赞同：0
> 
> 时间：2013-03-08T08:12:18.613
> 
> 标签：c#, httpwebrequest

我有一个关于允许用户连接只允许的域名的问题。

所以我想到的是：我有一个域名列表，比如 *.domain1.com；*.domain2.com 等...

然后在代码中的某个地方，我必须检查请求或响应是否真的来自那种域，如果不是，我应该抛出一条消息。

这里我有我现在拥有的代码：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create("url");
        using (WebResponse response = request.GetResponse())
        {
            using (Stream stream = response.GetResponseStream())
            {
                if (stream == null)
                {
                    return null;
                }
                return stream;
            }
        } 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:45:05.487

使用`ResponseUri`属性：

```
HashSet<String> allowedDomains = new HashSet<String>()
                                 {
                                         "domain1.com",
                                         "domain2.com"
                                 };

HttpWebRequest request = (HttpWebRequest)WebRequest.Create("url");
using (WebResponse response = request.GetResponse())
{
    if (!allowedDomains.Contains(response.ResponseUri.Host))
    {
        throw new IllegalDomainException();
    }
    using (Stream stream = response.GetResponseStream())
    {
        if (stream == null)
        {
            return null;
        }
        return stream;
    }
} 
```

您可能需要修改比较：例如，`request.ResponseUri.Host.Split(".")`将每个部分依次与 allowedDomains 值中的等效项进行比较的结果向后迭代，并且您可能想考虑检查在哪里完成：您是否希望允许重定向？如果是这样，从用户输入创建一个 Uri 对象，并检查它的`Host`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:43:02.790

通常这是使用*UrlReferer* HTTP 标头获取的，但此标头不是强制性的：可以设置或不设置。这取决于 HTTP 服务器。

可以使用以下[`HttpWebResponse.Headers`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.headers.aspx)属性访问整个标头：

```
((HttpWebResponse)response).Headers["Referer"] 
```

老实说，我想建议您最好的解决方案是使用*应用程序密钥*（任意标识符）。例如 a `Guid`（它可能适用于非常简单的情况）。

在 Web 服务器中，您可以定义默认标头（如果您的网站是使用 ASP.NET 开发的，[则可以在*web.config*](http://www.iis.net/configreference/system.webserver/httpprotocol/customheaders)中进行），因此来自整个服务器的任何请求都将包含带有*appkey*的任意 HTTP 标头。

也就是说，您可以定义一个可以识别来自您的网站的 HTTP 响应的任意标头。例如：**MySite_AppKey**。使用这种方法，您应该验证任何 HTTP 响应是否包含整个**MySite_AppKey**并检查整个 appkey 是否*在*某个*白名单*中被允许。

示例伪代码：

```
if(AppAuthorizationManager.IsAuthorized(response.Headers["MySite_AppKey]))
{
     // Do stuff for the authorized request
} 
```

*请注意，我正在描述一个非常简单的实现*。

# php - Sendmail 配置在接收者不存在时发送通知电子邮件

> ID：15289429
> 
> 赞同：1
> 
> 时间：2013-03-08T08:12:22.053
> 
> 标签：php, email, notifications, sendmail

我正在为我的一位客户托管一个脚本，该脚本正在向他的客户发送通知电子邮件。现在我的客户希望，如果客户电子邮件地址无效或无法传递消息，脚本会向他发送一封通知电子邮件。

我知道如果邮件无法传递或地址未知，或者我的邮件服务器应该提供的功能，某些邮件服务器会发回电子邮件？我正在使用 sendmail 和 php 邮件功能来发送电子邮件，但我不知道如果无法传递消息时如何提供通知....

也许我的英语没有我想的那么好，否则我想我已经在谷歌上找到了一些结果......因为我认为这个问题必须有解决方案......

谢谢你的帮助！

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:09:23.203

如果无法传递邮件，邮件服务器会自动完成退回，您不必在脚本中执行此操作。但是，在大多数情况下，默认情况下，php 脚本使用信封发件人，其中没有人真正看到退回邮件（例如 www-data@yourhostingserver.example.net）。

解决方案是将您的 php 脚本配置为使用现有的电子邮件地址作为退回地址。如果您使用 mail() 函数，这可以[通过添加 -f 参数](https://stackoverflow.com/questions/179014/how-to-change-envelope-from-address-using-php-mail#179061)来完成。但是，-f 不适用于所有托管服务提供商。或者，您可以使用像[phpmailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)这样的库，它允许设置发件人地址。

# c# - 显示类别是否有线程

> ID：15289436
> 
> 赞同：1
> 
> 时间：2013-03-08T08:13:07.773
> 
> 标签：c#, sql, select, join

我正在尝试进行 SQL 查询，该查询显示类别以及该类别中有多少线程的计数。

这就是我得到的：

```
SELECT categories.category_name, categories.category_id, COUNT(*) 
AS 'threadCount' FROM threads 
    RIGHT OUTER JOIN categories 
    ON categories.category_id = threads.thread_category_id
GROUP BY categories.category_name, categories.category_id 
```

它有点工作，但是 threadCount 的结果总是大于或等于 1，即使那里没有线程。

![在此处输入图像描述](../Images/dba5ed2af2adb81a3175eec1e2fa5457.png)

正如您在上图中所见，每个类别似乎都附有一个线程。但问题是，只有“类别 1”有线程，所有其他类别都有 0 个线程，所以它们应该显示 0 而不是 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:22:51.843

连接上的`Outer`包含所有类别，即使是未与任何线程连接的类别，这就是为什么您至少有 1 个。

```
SELECT categories.category_name, categories.category_id, COUNT(*) 
AS 'threadCount' FROM threads 
    RIGHT OUTER JOIN categories 
    ON categories.category_id = threads.thread_category_id
GROUP BY categories.category_name, categories.category_id 
```

我会做到的，

```
SELECT categories.category_name, categories.category_id, 
    (SELECT COUNT(*) FROM threads WHERE 
      categories.category_id = threads.thread_category_id) AS 'threadCount' 
FROM categories 
```

我直接计算每个类别的线程，而不连接它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:20:45.373

因为您正在执行右外连接，所以当您没有相应的线程时，null 也被计为 1。按以下方式运行您的查询以查看我的意思

```
SELECT categories.category_name, categories.category_id
AS 'threadCount' FROM threads 
    RIGHT OUTER JOIN categories 
    ON categories.category_id = threads.thread_category_id 
```

或者您可以通过更改这样的查询来排除计为 1 的空值，

```
SELECT categories.category_name, categories.category_id, COUNT(threads.thread_category_id) 
AS 'threadCount' FROM threads 
    RIGHT OUTER JOIN categories 
    ON categories.category_id = threads.thread_category_id
GROUP BY categories.category_name, categories.category_id 
```

# c# - Web 响应状态代码

> ID：15289440
> 
> 赞同：11
> 
> 时间：2013-03-08T08:13:32.923
> 
> 标签：c#, httpwebrequest

我有这个简单的函数来获取 HTML 页面并将其作为字符串返回；虽然有时我会收到 404。如何仅在请求成功时才返回 HTML 字符串，并返回类似于`BadRequest`404 或任何其他错误状态代码的内容？

```
public static string GetPageHTML(string link)
{
    using (WebClient client= new WebClient())
    {
        return client.DownloadString(link);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-08T08:15:16.203

您可以捕获 WebException：

```
public static string GetPageHTML(string link)
{
    try
    {
        using (WebClient client = new WebClient())
        {
            return client.DownloadString(link);
        }
    }
    catch (WebException ex)
    {
        var statusCode = ((HttpWebResponse)ex.Response).StatusCode;
        return "An error occurred, status code: " + statusCode;
    }
} 
```

当然，在调用代码中捕获此异常，甚至不尝试解析 html，而不是将 try/catch 放在函数本身中会更合适。

# sql-server - Integration Services Catalog 使用哪些用户凭据来执行包？

> ID：15289442
> 
> 赞同：36
> 
> 时间：2013-03-08T08:13:38.363
> 
> 标签：sql-server, ssis, sql-server-2012, etl

我们有一个 SSIS 包，它从共享网络目录中读取文本文件。当我在 SSDT 中执行这个包时，它工作正常。但是，当我们将项目部署到*`Integration Services Catalog`*并尝试从那里运行相同的包时，我收到一个错误，表明对目录的访问被拒绝。

我一直认为，当我登录数据库并从 Integration Services 目录执行 SSIS 包时，它使用我的用户凭据，因此可以访问有问题的目录，因为我的用户配置文件可以访问它.

不是这样吗？SQL Server 是否使用不同的用户来执行 IS 目录中的包？有选择*`run as another user`*吗？任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-08T14:12:29.260

## 包执行：

### SQL Server 数据工具：

正在运行的用户凭据*`SQL Server Data Tools (SSDT)`*将用于执行在 SSDT 中执行的包。

在 Windows 开始\所有程序\Microsoft SQL Server 2012 下，如果您单击 SQL Server Data Tools，它将在您的凭据下运行。要在不同的用户帐户下运行，您可以按`Ctrl`+`Shift`选择**`Run as different user`**选项。

![从 SSDT 执行包](../Images/3199c89a8b04433ebc753c30261a633b.png)

### 集成目录服务：

当您右键单击下面的包*`Integration Services Catalog \ SSISDB \ <Folder name> \ Projects \ <Project name> \ Packages \ <Package name>`*并选择`Execute...`运行包时。该包将在用于连接到 SQL Server Management Studio 的凭据下运行。

请注意，如果您尝试使用 SQL Server 身份验证运行包，您将收到以下错误消息：

> 使用 SQL Server 身份验证的帐户无法启动该操作。使用使用 Windows 身份验证的帐户启动操作。

![执行](../Images/a92ab617db6ec01cf75640d38532837a.png)

按 后`Execute...`，`SQL Server`旋转一个进程`ISServerExec.exe`，启动一个`Console Window Host`进程：

![在 SSIS 目录执行引擎下](../Images/635950a9f703d222deb41c27d06c15cc.png)

`ISServerExec.exe`是一个在 SSIS 目录中执行包的程序。在这种情况下，它是在从 SQL Server Management Studio 执行 SSIS 包的同一用户下启动的。

### 没有代理的 SQL Server 代理作业：

从*SQL Server 代理作业*中运行 SSIS 包时，作业步骤默认在*`SQL Server Agent Service Account`*. 可以通过导航找到与 SQL Server 代理服务关联的用户帐户*`Windows Start \ Administrative Tools \ Services`*，查找服务 SQL Server 代理 ( `Your Instance Name`) 并找到下面列出的用户帐户*`Log On As`*

### 使用代理的 SQL Server 代理作业：

您还可以通过创建代理帐户在不同的凭据下运行 SQL Server 代理作业。当作业步骤在代理帐户下执行时，作业步骤中的包将在代理帐户上指定的凭据下执行。

下面的 SO 答案提供了创建代理帐户以运行 SQL Server 代理作业的分步说明。

[如何在我的 SQL Server 代理作业中创建一个将运行我的 SSIS 包的步骤？](https://stackoverflow.com/questions/6712811/how-do-i-create-a-step-in-my-sql-server-agent-job-which-will-run-my-ssis-package/6713464#6713464)

## 如何验证：

### 示例 SSIS 2012 包：

这是我为验证上述关于用于包执行的用户帐户所做的陈述。

*   打开 SQL Server Data Tools 并创建名为*`SO_15289442.dtsx`*.

*   创建一个名为`ExecutionUser`data type的变量`String`。将表达式分配`@[System::UserName]`给变量。*`UserName`*是一个系统变量，提供执行包的用户的信息。

*   *将发送邮件任务*拖放到*数据流*选项卡上。

*   创建一个 SMTP 连接并将其分配给*`SmtpConnection`*发送邮件任务编辑器 - 邮件页面上的。

*   指定*`From`*电子邮件*`To`*地址。

*   *将MessageSourceType*更改为*`Variable`*.

*   设置*`MessageSource`*为*`User::ExecutionUser`*。

*   右键单击包并选择部署以将项目部署到您选择的服务器上可用的集成服务目录。

### 包执行

*   在 SSDT 中运行包。

*   使用 Run as different user 选项打开 SSDT。提供与您不同的凭据并再次运行该程序包。

*   从集成服务目录运行包。

*   创建 SQL Server 代理作业以使用 SQL Server 代理服务帐户运行包。

*   创建 SQL Server 代理作业以使用代理帐户运行包。

对于上面提到的每次执行，您都会收到一封电子邮件，其中包含用于执行包的用户帐户。

## 您的问题：

在您的情况下，如果您右键单击并选择从集成服务目录执行，该包将在您的帐户下执行（*假设您使用您的凭据访问 SSISDB ）。*确保该帐户有权访问网络路径。

如果您从 SQL Server 代理作业中运行包，则代理帐户是`run as another user`您正在查看的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-03T17:59:19.843

听起来您没有在 SQL Server 上配置 Kerberos（双跳问题）。

这是使用 MS 记录的问题，现已修复。 [https://connect.microsoft.com/SQLServer/feedback/details/767088/with-the-new-ability-to-execute-ssis-packages-from-tsql-kerberos-delegation-should-be-supported](https://connect.microsoft.com/SQLServer/feedback/details/767088/with-the-new-ability-to-execute-ssis-packages-from-tsql-kerberos-delegation-should-be-supported)

这是一篇关于此细节的精彩博客文章： [http ://www.sqlscientist.com/2014/01/setup-kerberos-authentication-for-sql.html](http://www.sqlscientist.com/2014/01/setup-kerberos-authentication-for-sql.html)

配置完成后，您应该能够使用本地计算机上的存储过程或 SSMS 远程启动作业。如果配置正确，它将传递您的凭据，当然您必须确保您具有访问网络资源的适当权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T17:04:29.850

这是一个旧线程，但我想您遇到的问题实际上是文件路径。您使用的是 UNC 名称还是驱动器号。也就是说，您的文件路径是否类似于“Z:\path\to\file.csv”或“\server\share\path\to\file.csv”？

如果它是驱动器号，它会在您的本地计算机上正常工作，因为您已映射该驱动器，但由于驱动器号未映射，它将在服务器上失败。

# asp.net-mvc-3 - 视图模型不识别扩展方法？

> ID：15289445
> 
> 赞同：2
> 
> 时间：2013-03-08T08:14:12.593
> 
> 标签：asp.net-mvc-3, extension-methods

我的视图中有一个 Html.GlobalisedPageLinks 扩展方法，但得到一条红线，说明我的视图模型不包含该方法并且我有一些无效的参数？

这里的行：

```
<div class="actions-left">
  <%= Html.GlobalisedPageLinks(Amico.Web.Mvc.Extensions.Enums.PageLinksFormat.Empty, Model.CurrentPage, Model.PageSize, Model.Total, x => Url.Action("Index", "Scorm", new { area = "Admin", page = x }))%>
</div> 
```

扩展方法：

```
public static string GlobalisedPageLinks(this HtmlHelper html, Amico.Web.Mvc.Extensions.Enums.PageLinksFormat format, int currentPage, int pageSize, int totalResults, Func<int, string> pageUrl)
{
  int totalPages = Math.Max(Convert.ToInt32(Math.Ceiling((double)totalResults / pageSize)), 1);

  int startresult = ((Math.Max(1, currentPage) - 1) * pageSize) + 1;
  int endresult = Math.Min(startresult + (pageSize - 1), totalResults);

  string pagesText = html.Resource(Resources.Global.PageLinks.PageLinksFormatPages, currentPage, totalPages);
  string resultsText = html.Resource(Resources.Global.PageLinks.PageLinksFormatResults, startresult, endresult, totalResults);
  string firstText = html.Resource(Resources.Global.PageLinks.First);
  string previousText = html.Resource(Resources.Global.PageLinks.Previous);
  string nextText = html.Resource(Resources.Global.PageLinks.Next);
  string lastText = html.Resource(Resources.Global.PageLinks.Last);

  return "<span class='page-links'>" + html.PageLinks(format, currentPage, pageSize, totalResults, pageUrl,
    pagesText, resultsText, firstText, previousText, nextText, lastText) + "</span>";
} 
```

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:18:19.650

您需要在视图中将 using 语句添加到包含扩展方法的类中：

```
@using Amico.Web.Mvc.Extensions.YourExtensionClass 
```

如果您需要在许多视图中访问此扩展类，您还可以在您的视图文件夹内的 web.Config 中将其命名空间添加为已知命名空间（此示例适用于 MVC3，对于 MVC4，主机将不同）：

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="Amico.Web.Mvc.Extensions" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

# dart - 有没有更好的方法来解析 Dart 中的 int

> ID：15289447
> 
> 赞同：12
> 
> 时间：2013-03-08T08:14:15.403
> 
> 标签：dart

这是 Dart 中关于 int.parse 的几个问题......

我知道在 Dart 中，我们可以将字符串解析为 int 并使用以下方法捕获异常：

```
try {
  n = int.parse(input.value);
  // etc.
} on FormatException {
  // etc.
} 
```

（这很好。）

在文档中，对 int.parse 有如下描述：

```
int parse(String source, int radix, int onError(String source)) 
```

但是，当我尝试将 int.parse 与多个参数一起使用时，我收到了编辑的投诉，称我使用了额外的参数。我误解了文档吗？例如，如何设置基数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2018-05-08T09:22:28.590

In Dart 2, [int.tryParse](https://api.dartlang.org/dev/2.0.0-dev.53.0/dart-core/int/tryParse.html) is available.

It returns null for invalid inputs instead of throwing. You can use it like this:

```
int val = int.tryParse(text) ?? defaultValue; 
```

The `onError` parameter in `int.parse` is deprecated.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-08T09:22:13.683

[`Int.parse`](http://api.dartlang.org/docs/releases/latest/dart_core/int.html#parse)使用命名的可选参数。

接口：

```
int parse(String source, {int radix, int onError(String source)}) 
```

参数列表中的`{ }`周围参数表示这些是**可选的命名**参数。（如果您`[ ]`在参数列表中有周围的参数，这些将是**可选的位置**参数）

示例用法：

```
int.parse("123");
int.parse("123", radix:16);
int.parse("123", onError:(source) => print("Source"));
int.parse("123", radix:16, onError:(source) => print(source)); 
```

# php - 数组：读取比创建快？

> ID：15289448
> 
> 赞同：1
> 
> 时间：2013-03-08T08:14:21.320
> 
> 标签：php, arrays

我需要一个预先填充有数值的多维，这样；

```
for($m = 0; $m <= 149; $m++){
    for($n = 0; $n <= 99; $n++){
            $pitchDef[$m][$n] = 999;
    }
 } 
```

但是 PHP 简单地读取预先填充的数组会更快吗？

换句话说，php读取或创建数组是否更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:20:22.587

```
array_fill(0, 150, array_fill(0, 100, 999)); 
```

我很确定这是你能得到的最快速度.. 它比两个 for 循环*快得多*，但在单独运行时两者仍然非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:21:38.353

这可能会帮助你 [array_fill()](http://php.net/manual/en/function.array-fill.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T08:22:01.933

每次给内存分配一个新变量都需要首先找出内存是如何需要的，然后从系统中分配它，然后再写入。在这三个步骤中，写入本身（最后一个操作）与读取的时间相同（我想），但是整个作业更长，因为它还有两个步骤。

如果你有你的数组，在这个例子中，你甚至没有说数组有多大，所以每次编写 PHP 都需要改变整个数组的结构，然后为一个元素分配内存然后写入它。

至少你可以像 ExplesionPills 写的那样在一开始就为数组分配内存，然后访问数组。

最好的想法是通过让它们运行多次（“many”是例如 100 万次）来比较（“基准”）两种方法并查看执行时间。

# gwt - DataGrid 在浏览器调整大小时调整大小（不是真的工作）？

> ID：15289449
> 
> 赞同：0
> 
> 时间：2013-03-08T08:14:28.263
> 
> 标签：gwt

dataGrid (GWT 2.5) 不会在浏览器窗口调整大小时调整大小。布局为 DockLayoutPanel center -> DockLayoutPanel center -> dataGrid，页面的 DOCTYPE ist 'standard'。当页面被渲染并且我调整浏览器的大小时，网格的高度没有相应地调整。我必须单击网格才能调整其大小。
欢迎任何帮助

TIA 给定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:24:15.370

确保您在所有布局层次结构中使用 RequireResize 面板。IE

> 仅使用从 RootLayOutPanel 开始的布局面板

.

# mysql - MySQL 语句两次返回同一行

> ID：15289452
> 
> 赞同：1
> 
> 时间：2013-03-08T08:14:31.273
> 
> 标签：mysql

我有一个带有多连接的 select 语句，如下所示：

```
SELECT * 
FROM   supplements 
       LEFT JOIN tutorials 
              ON supplements.id = tutorials.supplement_id 
       LEFT JOIN brands 
              ON supplements.brand_id = brands.id 
WHERE  supplements.id = '75' 
```

当我运行它时，它会返回 id 为 75 的行两次！

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:16:21.817

这是因为您的子表`tutorials`或`brands`可能有多个`supplements.id`= 75的值

# android - Android开发：如何使使用权限起作用？

> ID：15289454
> 
> 赞同：0
> 
> 时间：2013-03-08T08:14:37.203
> 
> 标签：android, android-permissions

我想知道如何使使用权限有效？事实上，我正在尝试通过一个简单的代码拨打电话，但在电话应用程序中，我必须按下绿色电话来确认通话。为了使应用程序电话自动我尝试介绍

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

在 AndroidManifest.XML 但它不会改变任何东西。使用权限是否存在都没有关系，我必须确认通话。

我在许可方面做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:31:23.823

确保您已添加

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

manifest.xml中的外侧`application`标记和内侧标记`manifest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:19:56.230

我正在使用以下权限（在 AndroidManifest.xm 中）：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

有了这个权限，我可以使用：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + phoneNumber));
 callIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

 startActivity(callIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:22:04.550

要从您的应用程序进行调用，您必须`CALL_PHONE`在清单文件中添加权限，如下所示：

> ```
>  <uses-permission android:name="android.permission.CALL_PHONE" /> 
> ```

# excel - 根据其他单元格的内容允许单元格填充

> ID：15289462
> 
> 赞同：-1
> 
> 时间：2013-03-08T08:15:11.277
> 
> 标签：excel, validation

我正在将数据验证规则应用于我的数据，并且我想完成以下操作：

`X`如果另一个单元格填充了 value ，则将value 设置为一个单元格`Y`。例如，如果在一个单元格中我有`Not a Product Owner`，我希望将下一个单元格设置为`N/A`并且不可用于编辑。如果第一个单元格包含一个不同于 的值，`Not a Product Owner`则下一个单元格应该可用于编辑（根据我设置的验证规则允许的值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:51:20.023

这是一种VBA方式。

您需要将此代码放入`Worksheet_Change`工作簿相关工作表中的事件模块中。

简而言之，如果将 A 列中的单元格更改为`Not a product owner`then`n/a`将添加到 B 列中，并且该单元格被锁定以进行编辑。如果有其他情况，则会添加数据验证列表并解锁单元格。

请注意，这种方法需要对工作表进行密码保护。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim Options As String
    Options = "1\. Choice1, 2\. Choice2, 3\. Choice3" //Change this options

    ActiveSheet.Unprotect Password:="Your Password"
    Application.EnableEvents = False

    If Not Intersect(Range("A:A"), Target) Is Nothing Then
        If Target = "Not a product owner" Then
            Target.Offset(0, 1).Validation.Delete
            Target.Offset(0, 1) = "n/a"
            Target.Offset(0, 1).Locked = True
        Else
            Target.Offset(0, 1).Locked = False
            Target.Offset(0, 1).Validation.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, Formula1:=Options
        End If
    End If

    Application.EnableEvents = True
    ActiveSheet.Protect Password:="Your Password"
End Sub 
```

# java - 如何在java中将结果“保存”到文本文件中

> ID：15289464
> 
> 赞同：0
> 
> 时间：2013-03-08T08:15:25.753
> 
> 标签：java, file-io

我想将输出结果保存到文本文件并随时检索它。为了将输出写入 .txt，我使用了以下代码。

```
 import java.io.*;

    class FileOutputDemo {  

        public static void main(String args[])
        {              
                FileOutputStream out; // declare a file output object
                PrintStream p; // declare a print stream object

                try
                {
                        // Create a new file output stream
                        // connected to "myfile.txt"
                        out = new FileOutputStream("myfile.txt");

                        // Connect print stream to the output stream
                        p = new PrintStream( out );

                        p.append ("This is written to a file");

                        p.close();
                }
                catch (Exception e)
                {
                        System.err.println ("Error writing to file");
                }
        }
    } 
```

它工作正常，并且编写了预期的文本文件。但是每当我重新编译程序时，都会写入新的输出，而删除之前的输出。有没有办法保存先前编写的文件的输出并从先前的文本文件停止的地方继续（重新编译后）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:17:37.653

试试这个：

```
out = new FileOutputStream("myfile.txt", true); 
```

Javadoc：[FileOutputStream.append（字符串名称，布尔值追加）](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:18:41.903

参见类[的构造函数中记录的](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#constructor_summary)`new FileOutputStream(file, true);`（或`fileName`作为名称而不是`file`对象）。

## 更多提示

### 1\. 报告

改变：

```
catch (Exception e)
{
    System.err.println ("Error writing to file");
} 
```

到：

```
catch (Exception e)
{
    e.printStackTrace();
} 
```

后者以更少的输入提供更多信息。

### 2.图形界面

如果这个应用程序。是有一个 GUI，文本通常由用户在`JTextArea`. 该组件从中扩展`JTextComponent`，提供了几乎用于保存和加载文本的“单行”：

1.  [`read(Reader, Object)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)
2.  [`write(Writer)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)

# c# - 使用相同的参数回调 2 次

> ID：15289466
> 
> 赞同：0
> 
> 时间：2013-03-08T08:15:29.417
> 
> 标签：c#, function, interface, callback, call

我在代码审查期间遇到了这段 C# 代码。不知何故，使用相同的参数（在捕获内）回调 2 次似乎很奇怪。

```
public interface IMyExceptionHandler
{
    void Handle_1(Exception ex);

    void Handle_2(Exception ex);
}

public class SpecialException : Exception {}

public class MyBusinessLogic
{
    private readonly IMyExceptionHandler _handler;

    public MyBusinessLogic(IMyExceptionHandler handler)
    {
        _handler = handler;
    }

    public void DoMagic()
    {
        try
        {
            // ommitted.
        }
        catch (SpecialException ex)
        {
            _handler.Handle_1(ex);
            _handler.Handle_2(ex);

            // 3rd way to handle ex somehow.
        }
    }
} 
```

有什么好的理由不用更特殊的处理方法来增强界面吗？

# android - 如何在 Ubuntu 上的 Eclipse 中将 Valgrind 与 android 应用程序一起使用，以在运行时查找 android 本机代码内存泄漏？

> ID：15289471
> 
> 赞同：5
> 
> 时间：2013-03-08T08:15:43.483
> 
> 标签：android, memory, memory-leaks, valgrind, native-code

如何在 Ubuntu 上的 Eclipse 中将 Valgrind 与 android 应用程序一起使用，以在运行时查找 android 本机代码内存泄漏。

# c++ - 从 unsigned char*(freeimage) 创建 fipImage*？

> ID：15289473
> 
> 赞同：2
> 
> 时间：2013-03-08T08:15:56.437
> 
> 标签：c++, opengl, freeimage

```
unsigned char * image_data;
int bytes; // size

format:
RGBA , UNSIGNED_BYTE.
(opengl-glGetTexImage()): 
```

如何从这些数据中创建 fipImage*？

C++。

* * *

```
unsigned char * image_data;
int w = 1000;
int h = 1000; 
```

此函数写入 image_data

```
glGetTexImage(GL_TEXTURE_2D, 0 , GL_RGBA , GL_UNSIGNED_BYTE , image_data); 
```

我想从 image_data 创建 fipImage

```
fipImage image;
something like this
image.load(image_data ,w , h); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T15:48:23.533

您可以通过以下方式从原始像素创建 FreeImage 对象：

```
FIBITMAP* Bitmap = FreeImage_Allocate( Width, Height, BitsPP, 0, 0, 0 );

memcpy( FreeImage_GetBits( Bitmap ), image_data, Width * Height * ( BitsPP / 8 ) ); 
```

# android - Android本地化阿拉伯语

> ID：15289474
> 
> 赞同：2
> 
> 时间：2013-03-08T08:15:58.543
> 
> 标签：android, localization

android 中有各种语言字符串的本地化版本。我需要本地化阿拉伯语的布局。示例：在英语中，我的布局是：名称（TextField）：名称（EditText）但对于阿拉伯语它将是：名称（EditText）：名称（TextField）在android中有没有办法，或者我必须做一个不同的布局以本地化阿拉伯语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:17:58.773

似乎您正在寻找最近添加到 Android 中的内容： [http ://android-developers.blogspot.de/2013/03/native-rtl-support-in-android-42.html](http://android-developers.blogspot.de/2013/03/native-rtl-support-in-android-42.html)

可能是早期版本的 Android，您需要自己在这里实现一些逻辑。请参阅此处的下一个链接以获取建议：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

这样你就可以有一个特定于阿拉伯语的布局，在“设计一个灵活的布局”部分进行了解释。有关本地化代码，请参见以下网站：http: [//colincooper.net/blog/2011/02/17/android-supported-language-and-locales/](http://colincooper.net/blog/2011/02/17/android-supported-language-and-locales/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-06T13:24:54.223

要利用 RTL 布局镜像，只需对您的应用程序进行以下更改：

在您的应用清单中声明您的应用支持 RTL 镜像。具体来说，将 android:supportsRtl="true" 添加到清单文件中的元素。

将应用的所有“左/右”布局属性更改为新的“开始/结束”等效项。如果您将应用程序定位到 Android 4.2（应用程序的 targetSdkVersion 或 minSdkVersion 为 17 或更高版本），那么您应该使用“start”和“end”而不是“left”和“right”。例如，android:paddingLeft 应该变成 android:paddingStart。如果您希望您的应用程序使用低于 Android 4.2 的版本（应用程序的 targetSdkVersion 或 minSdkVersion 为 16 或更低），那么您应该在“left”和“right”之外添加“start”和 end”。例如，您将同时使用 android:paddingLeft 和 android:paddingStart。为了在 LTR 和 RTL 模式下更精确地控制您的应用 UI，Android 4.2 包含以下新 API 来帮助管理 View 组件：

android:layoutDirection — 用于设置组件布局方向的属性。android:textDirection — 用于设置组件文本方向的属性。android:textAlignment — 用于设置组件文本对齐方式的属性。getLayoutDirectionFromLocale() — 获取指定区域设置方向的方法 您甚至可以创建自定义版本的布局、可绘制对象和其他资源，以便在使用从右到左的脚本时显示。只需使用资源限定符“ldrtl”来标记您的资源，即“布局方向从右到左”。为了调试和优化自定义从右到左的布局，HierarchyViewer 现在允许您查看层次结构中所有视图的开始/结束属性、布局方向、文本方向和文本对齐方式。

# unix - 在 OSX 中应该在哪里安装 optipng for HTML5 Boilerplate

> ID：15289478
> 
> 赞同：1
> 
> 时间：2013-03-08T08:16:10.893
> 
> 标签：unix, html5boilerplate

我已经在 user/bin 目录中安装了 optipng。cd 到 user/bin 并运行 optipng -? 显示 opting 已安装。

运行 ant minify，会出现这个错误：

```
[echo] You have optipng installed and your version is: 
 [echo] *** optipng NOT INSTALLED. SKIPPING OPTIMIZATION OF PNGs.
 [echo] *** Install optipng to enable png optimization. 
```

这是否意味着 HTML5Boilerplate 需要将 optipng 安装在不同的目录中，如果是，是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:07:24.803

OptiPng 只需要在您的路径中。如果它在你的路径中，你应该没问题。如果您可以从安装目录之外的命令行运行 optipng，它就在您的路径中。

实际问题在于版本检查。这是一种 hack，所以它不是很健壮。我想尝试自动化版本检查，结果证明它完全是防弹的。真可惜。我将把它移到一个手动标志和wiki中的一个页面（基本上构建脚本中的一个功能依赖于 optipng 7+，它会在 < 7 中出错，因此版本测试。人们只需要标记它自己。）

# sql - 外键允许引用字段中不存在的值

> ID：15289483
> 
> 赞同：1
> 
> 时间：2013-03-08T08:16:21.630
> 
> 标签：sql, sql-server, foreign-keys

我以这种方式创建了一个表（简化）：

```
CREATE TABLE [dbo].[values](
    [id] [uniqueidentifier] NOT NULL,
    [parentId] [uniqueidentifier] NULL
)

ALTER TABLE [dbo].[values] ADD CONSTRAINT [x] FOREIGN KEY([parentId])
REFERENCES [dbo].[values] ([id]) 
```

此表包含 3000 行。

如果我执行以下查询：

```
SELECT *
FROM values
WHERE parentId IS NOT NULL
AND parentId NOT IN (SELECT id FROM values) 
```

我得到 800 个结果。

这怎么可能呢 ？

插入数据时，外键有效，无法插入表中找不到的parentId的东西。但是为什么允许已经存在的数据不连贯呢？

我想外键是用表中已经存在的数据添加的，但是在添加时，它不应该因为一致性原因而被拒绝吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:23:25.163

数据是使用`BULK INSERT`或其他未检查约束的方式插入的吗？如果是这样，则可能出于性能原因允许通过数据，并且您可能有*不受信任的约束*。

您可以使用以下查询查看所有不受信任的约束：

```
SELECT name, OBJECT_NAME(parent_object_id) AS TableName, 
    OBJECT_NAME(referenced_object_id) AS ReferencedTableName
FROM sys.foreign_keys
WHERE is_not_trusted = 1 
```

* * *

批量插入后，您需要手动重新检查并信任使用的约束`ALTER TABLE [values] WITH CHECK CHECK CONSTRAINT [x]`（或`ALTER TABLE [values] WITH CHECK CHECK CONSTRAINT ALL`重新检查并信任表的所有约束）。

# ruby - `next` 和 `:_next` 之间的区别

> ID：15289486
> 
> 赞同：2
> 
> 时间：2013-03-08T08:16:36.780
> 
> 标签：ruby

由于我的其他要求，我正在用 . 行搜索另一个符号`p( Symbol.all_symbols )`。那个时候，我也进了`:_next`我的IRB，但不知道。我在用：

```
C:\>ruby -v
ruby 1.9.3p374 (2013-01-15) [i386-mingw32] 
```

您可以使用以下代码进行检查：

```
Arr = Symbol.all_symbols 
Arr.include?(:_next) #=> true 
```

任何人都可以帮助我了解`next`功能上的区别`:_next`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:13:17.223

该符号通常不存在。

但是使用您的代码创建它.. 只需提及它。

在 irb 中尝试：

```
arr = Symbol.all_symbols
arr.include? :_next                       # => false
arr = Symbol.all_symbols
arr.include? :_next                       # => true 
```

或者（使用新实例）试试这个：

```
Symbol.all_symbols.map(&:to_s).include?('_next') # => false
:_next
Symbol.all_symbols.map(&:to_s).include?('_next') # => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:22:11.193

我现在已经在我的 Mac 上的 ruby​​ 1.9.3-p374、ruby 1.9.3-p385、ruby 1.9.3-p392 和 ruby​​ 2.0.0-p0 中对此进行了测试。我无法重现这一点。我总是假的。

您是否在任何其他版本的 Ruby 上尝试过它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:35:35.013

`next`是一个Ruby方法，`:_next`是一个符号。

假设你有一个数组 = `[1,2,3]`。运行以下命令将打印 [2, 6]

```
[1,2,3].each{ |n| next if n.even? ; puts 2*n } 
```

`next`作为符号将接收者转换为字符串，然后将 String#next 的结果作为符号返回。

示例：`"gender".to_sym.next`将返回`:gendes`

# java - JNI 和旧的 C++ 代码

> ID：15289492
> 
> 赞同：3
> 
> 时间：2013-03-08T08:17:37.870
> 
> 标签：java, c++, android-ndk, java-native-interface

我现在正在编写我今年早些时候编写的旧 c/c++ 代码的 JNI 版本，以包含在我的 android 应用程序中。我写了一个桌面应用程序，相当于我用 Java 和 C++ 编写的，性能差异很突出，因此我想利用 ndk。

我对 JNI 非常陌生，而且我理解事物的方式，似乎我必须做一些类型映射；`jdouble`替换`double`，`jint`替换`int`，等等。问题是，我已经尝试过不改变运行一些旧代码，而且效果很好！我什至包含了一些 STL 库（`list`和`vector`），我没有遇到任何问题。我刚刚包含`APP_STL := stlport_static`在 Android.mk 文件中。

所以我的问题是：这样做有性能损失吗？还有其他我应该注意的风险吗？在我的 jni 中使用 C/C++ 原始类型有什么缺点？我可以让代码运行得更快，还是我不应该打扰？

谢谢，

纳克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:22:47.727

JNI ( `jint`, ...) 中的原生类型只是`typedef`C 类型的别名。当内部 Java 表示与 C 不完全匹配时，它们的存在是为了代码可移植性，即关于位大小。因此，混合它们不应该有任何性能开销。

混合它们的风险或缺点是，如果它们在某些平台上具有不同的位大小，则在来回转换时可能会丢失位。因此，您可能希望在构建代码时进行一些额外的检查以确保其安全。

# javascript - 通过 JSONP 获取 OAuth 请求令牌

> ID：15289498
> 
> 赞同：1
> 
> 时间：2013-03-08T08:17:55.050
> 
> 标签：javascript, jquery, oauth, twitter, twitter-oauth

我正在尝试制作一个纯 JavaScript Twitter 应用程序。我不担心涉及令牌的安全性，因为这是供内部使用的。

目前，我的代码如下所示：

```
 $.ajax({
        url: 'https://api.twitter.com/oauth/request_token',
        type: 'post',
        data: {
            oauth_callback: callbackurl
        },
        dataType: "jsonp",
        headers: {
            "oauth_nonce": nonce1,
            "oauth_callback": callbackurl,
            "oauth_signature_method": "HMAC-SHA1",
            "oauth_timestamp": Math.round(new Date().getTime()/1000),
            "oauth_consumer_key": "IQKbtAYlXLripLGPWd0HUA",
            "oauth_signature": "Pc%2BMLdv028fxCErFyi8KXFM%2BddU%3D", //generate
            "oauth_version": "1.0"
        },
        success: function(data)
        {
            console.info(data);
        }
    }); 
```

此代码相当不完整，但目标是获取 Twitter 返回的内容（请求令牌）。显然，此代码无法正常工作，因为它违反了跨源策略。不过，我听说纯 JavaScript 可以做到这一点。我需要发送 Twitter 标题（至少，我认为它们必须是标题）然后检索它们返回的内容。

有解决方法吗？

# android - Android Serversocket 似乎不接受模拟器上的连接

> ID：15289503
> 
> 赞同：2
> 
> 时间：2013-03-08T08:18:08.883
> 
> 标签：android, sockets, client

我一直在尝试在两个 Android 模拟器之间实现一个简单的套接字通信，但似乎无法实现。

**我的服务器：**

```
public void run() {     
    if (SERVERIP != null) {
        try {
            serverStatus.setText("My IP: " + SERVERIP);
            serverSocket = new ServerSocket(6798);
            serverStatus.setText("ServerSocket Created");
        }
        catch(Exception e) {
            e.printStackTrace();
        }

        try {
            while (true) {   
                serverStatus.setText("waiting for client");
                Socket client = serverSocket.accept();
                serverStatus.setText("Connected.");
                BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                String line = in.readLine();

                serverStatus.setText(line);
                in.close();
                client.close();
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
    }
    else
        serverStatus.setText("Couldn't detect internet connection.");
} 
```

**我的客户：**

```
try {
    InetAddress ina = InetAddress.getByName("10.0.2.2");
    socket = new Socket(ina, 6789); 
}
catch (Exception e) {
    e.printStackTrace();
}

try {
    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
    out.println("Hey Server!");
    dispText.setText("sent");
}
catch (Exception e) {
    e.printStackTrace();
} 
```

客户端继续显示“已发送”消息，但服务器并未超出“等待客户端”（卡在阻塞状态`accept()`）。我在我的 Windows 机器上使用 telnet 将服务器模拟器控制台上的端口 6789 重定向到 6798。我还尝试关闭我的防火墙，并在此处提出的类似问题上发布了其他建议。请帮助，因为似乎无法理解它，并且觉得我犯了一个非常愚蠢的错误。

另外，任何人都可以告诉我，如果服务器仍然卡在`accept()`. 或者，只要它正在侦听端口，服务器没有响应对客户端来说无关紧要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:33:04.617

Android 模拟器被设计为放置在虚拟防火墙/路由器后面，即使它们在同一个网络上，也无法看到彼此。Google 的模拟器文档中的“[使用网络重定向](http://developer.android.com/tools/devices/emulator.html#redirection)”以及“互连模拟器实例”部分解释了如何与模拟器实例通信。

至于你的最后一个问题。对套接字使用空构造函数，然后使用[指定 timeout 的连接调用](http://developer.android.com/reference/java/net/Socket.html#connect%28java.net.SocketAddress,%20int%29)。

# security - 屏蔽码头请求日志中的部分 URL

> ID：15289505
> 
> 赞同：0
> 
> 时间：2013-03-08T08:18:15.687
> 
> 标签：security, logging, jetty, jetty-8

我想在 Jetty 中记录所有 HTTP 请求，该请求有据可查，但我找不到任何资源，如何屏蔽某些参数。

例如：

`json/users/detail?id=dsgrw543`

应记录为：

`json/users/detail?id=********`

或类似的。

主要动机是我可以提供这些日志进行分析，而不必担心我们用户的隐私可能会受到损害。理想情况下是在线的，不使用批处理或其他脚本。

请注意，我使用其他身份验证机制（cookies/所有写入方法都是 POST/等）并且我无法更改现有 URL。

到目前为止，我唯一的想法是将其实现为 NCSARequestLog 之上的一个类：http: [//download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/NCSARequestLog.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/NCSARequestLog.html)

这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:47:15.807

你可以像这样写一个简单的工具，在你记录的任何地方使用它

```
 Enumeration<String> s = request.getParameterNames();
    String q = "";
    while(s.hasMoreElements()){
        q += s.nextElement() + "=***&";
    }
    String url = request.getServletPath()+(q.length()>0?"?"+q:""); 
```

或者可以`request.getRequestedURI()`代替`getServletPath`

# java - 在 Spring 中自动装配出现错误：自动装配依赖项的注入失败

> ID：15289508
> 
> 赞同：0
> 
> 时间：2013-03-08T08:18:26.060
> 
> 标签：java, spring, autowired

我收到此错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'newStep2Controller': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void projecthealth.web.NewStep2Controller.setUserService(projecthealth.service.UserService); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [projecthealth.service.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) 
```

控制器类

```
 @Controller
  @RequestMapping("/newStep2.htm")
  @SessionAttributes("user")
  @ComponentScan("projecthealth.service")
 public class NewStep2Controller
 {
 protected final Log logger = LogFactory.getLog(getClass());
 private UserService userService;

@Autowired
public void setUserService(UserService userService) {
    this.userService = userService;
}
   @RequestMapping(method = RequestMethod.GET)
public String showUserForm(ModelMap model)
{
    model.addAttribute("user");

    return "userForm";
} 
```

服务存在：

```
 public interface UserService {

void createUser(User user)  throws ServiceException;

/**
 * 
 * @param userId (email is user id)
 * @return
 * @throws ServiceException
 */
User getUserById(String userId)  throws ServiceException;

void deleteUser(String userId)  throws ServiceException;

/**
 * 
 * @param newUserObject
 * @param userId (email is user id)
 * @return
 * @throws ServiceException
 */
User updateUser(User newUserObject, String userId)  throws ServiceException;
 } 
```

我已将此添加到 xml

```
 <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/> 
```

我添加了 UserServiceImpl

```
 public class UserServiceImpl extends BaseServiceImpl<User> implements UserService{

public static final String FIELD_EMAIL = "email";

public void createUser(User user) throws ServiceException {
    insert(user);
}

public User getUserById(String userId) throws ServiceException {
    return (User) findOne(User.class, FIELD_EMAIL, userId);
}

public void deleteUser(String userId) throws ServiceException {
    delete(User.class, FIELD_EMAIL, userId);
}

public User updateUser(User newUserObject, String oldEmail) throws ServiceException {
    MongoTemplate template = getTemplate();
    User userObject = getUserById(oldEmail);

    List<DietCategory> dietaryPreferences = newUserObject.getDietaryPreferences();

    if(dietaryPreferences != null){
        userObject.setDietaryPreferences(dietaryPreferences);
    }
    userObject.setEmail(newUserObject.getEmail());
    userObject.setFirstname(newUserObject.getFirstname());
    userObject.setHeight(newUserObject.getHeight());
    userObject.setLastname(newUserObject.getLastname());
    userObject.setPassword(newUserObject.getPassword());
    userObject.setWeight(newUserObject.getWeight());
    template.save(userObject);
    return newUserObject;
}

public List<User> getAllUser() throws ServiceException {
    return findAll(User.class);
} 
```

stackoverflow 正在添加更多文本，因为我的帖子中有太多代码。您可以忽略此评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:22:02.020

如果您提供 UserService 的实现会更好。

确保使用@Service 注释实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:05:03.230

@ComponentScan 仅适用于 javaConfig。您可以使用 Javaconfig 或 xml 配置，但无论如何您都需要将服务作为 spring bean 来管理！

来源：[http ://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/ComponentScan.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/ComponentScan.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:21:52.407

您需要在 xml 中创建一个 bean UserService。

或者你的控制器找不到它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:22:11.267

您的服务的实施情况如何？您是否使用 @Service 注释注释了您的 UserService 类和 UserService 的实现类？您也可以跳过 Controller 中的 getter&setter 并将 @Autowired 注释设置到您的字段，我知道它有效，但我不知道如何。

您还必须指示 Spring 在指定的包中搜索这些注释，这就是我的做法：

```
 <context:annotation-config/>
    <context:component-scan base-package="your_package"/>
    <mvc:annotation-driven/> 
```

# list - Jasper 报告：作为交叉表列列出

> ID：15289512
> 
> 赞同：0
> 
> 时间：2013-03-08T08:18:42.277
> 
> 标签：list, jasper-reports, crosstab

有没有办法可以使用 List 的参数作为我的交叉表列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:07:59.907

是的，您可以在 Ireport 中执行此操作，您可以通过两种方式执行此操作，或者创建一个新的交叉表报告，在创建交叉表时，您可以为行和列值选择参数，或者编辑报告并选择您想要参数的列值，您可以通过编辑表达式更改列。

# javascript - 使用 Javascript 提交到特定按钮？

> ID：15289515
> 
> 赞同：1
> 
> 时间：2013-03-08T08:19:12.767
> 
> 标签：javascript, regex, replace

我有一个用户脚本，它检查正则表达式并在出现时替换它。这是一个 MyBB 论坛，所以当我发布一个帖子时，有 2 个按钮：

发表回复 | 预阅帖子

如果我按 Post Reply，脚本将不起作用，但如果我按 Preview Post，正则表达式将被替换。

这是代码： [http ://userscripts.org/scripts/review/161320](http://userscripts.org/scripts/review/161320)

谁能告诉我当我按下帖子回复而不是预览帖子时如何让它替换？或者两者都很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:24:46.537

而不是调用`form._submit();`你想找到按钮并调用它的`click()`方法。

在 jquery 中它看起来像：

```
$("#id_of_button").click(); 
```

# jquery - Jquery - 在每个中使用 $(this)

> ID：15289520
> 
> 赞同：0
> 
> 时间：2013-03-08T08:19:28.383
> 
> 标签：jquery, this, each

我是法国人，所以请原谅一些翻译错误...

我有一个代码，使用 Jquery 和 Ajax 调用，但我不明白以下问题。

我有一张桌子，第一行。在行的末尾，有两个选项：有效和删除。当您单击有效图标时，会出现加载图标，出现新行，追加到表格，加载图标消失，并显示删除图标。

当您单击删除图标时，它会删除该行。

所以我的问题...

一开始，我直接在图标上实现了“onclick=valid()”和“onclick="delete()”。但现在，我发现使用a更干净：

```
$('#valid'+i).click(function(){
    valid(i);
});
$('#delete'+i).click(function(){
    delete(i);
}); 
```

问题出现了：当您单击时，例如在第 3 行的删除图标上，出现在第 4 行的是加载...

有代码

PHP/HTML

```
<?php
    include_once 'functions_sandbox.php';
?>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.0.min.js" type="text/javascript"></script>
    </head>
    <body>
    <script type="text/javascript">
        //Fonction qui charge les datepicker et les différentes options sur les champs
        function reload_jquery(){
            $('input[type=text][id*=tags]').each(function() {
                i = $(this).attr('num');
                $(this).css('border','thin blue solid');
                $('#valid'+i).click(function(){
                    valid_temps(i);
                });
                $('#delete'+i).click(function(){
                    delete_temps(i);
                });             
            });     
        }   
        function valid_temps(i){
            $('#loading'+i).show();
            $('#valid'+i).hide();
            var variables = 'mode=saisie_temps&j='+$('#j').val();
            $.ajax(
                {
                    // Define AJAX properties.
                    type: "POST",
                    url: "/dgi/ajax_sandbox.php",
                    data : variables,
                    dataType: "html",
                    timeout: 6000,

                    // Define the succss method.
                    success: function(data)
                    {
                        $('#data_retour').append(data);
                        $('#loading'+i).hide();
                        $('#delete'+i).show();                  
                        $('#j').val(parseInt($('#j').val())+1);
                        reload_jquery();
                    }
                }
            );      
        }
        function delete_temps(i){
            $('#loading'+i).show();
            $('#delete'+i).hide();
            $( "#confirm").dialog({
                resizable: false,
                height:160,
                width: 350,
                modal: true,
                buttons: {
                    "Oui": function() {
                        supp_temps(i);
                        $(this).dialog( "close" );
                    },
                    "Non": function() {
                        $('#loading'+i).hide();
                        $('#delete'+i).show();
                        $(this).dialog( "close" );
                    }
                }
            });
        }
        function supp_temps(i){
            $('#ligne'+i).hide('slow');
        }   

    $(function(){
        reload_jquery();
    });

    </script>
    <table id="data_retour" class="module">
        <?php echo ligne_saisie_sandbox(0); ?>
    </table>
    <div style="display:none" id="confirm" title="Confirmation">Voulez-vous vraiment supprimer ce temps ?</div> 
    <label>Indice J : </label>
    <input type="text" value="1" id="j" name="j" />
</body>
</html> 
```

“functions_sandbox.php”中的“ligne_saisie_sandbox”函数

```
function ligne_saisie_sandbox($j){
    $retour = '
    <tr id="ligne'.$j.'">
        <td class="cellule _light">
            <label>Attraction'.$j.' : </label>
            <input type="text" id="tags'.$j.'" num="'.$j.'" />

            <img src="/dgi/img/b_save.png" alt="Valid" title="Valider votre temps" title="Valider le temps" id="valid'.$j.'" style="margin-top:5px;float:right">
            <img src="/dgi/img/b_empty.png" alt="Supprimer" title="Supprimer votre temps" title="Supprimer le temps" id="delete'.$j.'" style="margin-top:5px;float:right;display:none">
            <img src="/dgi/img/ajax_clock_small.gif" alt="Load" id="loading'.$j.'" style="margin-top:5px;float:right;display:none;" />
        </td>           
    </tr>'; 
    return $retour;
} 
```

和“ajax_sandbox.php”中的 Ajax

```
include_once 'functions_sandbox.php';
switch ($_POST['mode'])
{
    case "saisie_temps":
        $j = $_POST['j'];
        $retour = ligne_saisie_sandbox($j);
        echo $retour;
    break;
} 
```

一张小图来说明问题

![](../Images/0d6497e2c82f3ba63f1a4e2ea04891f0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:22:06.030

出现您的问题是因为您忽略了`var`这一行：

```
i = $(this).attr('num'); 
```

通过离开`var`，您创建了`i`一个全局变量，这使得`i`您的回调 ( `delete_temps(i);`) 中的 s 都指向 global `i`，而不是 local `i`。

将该行更改为：

```
var i = $(this).attr('num'); 
```

它应该工作。我还建议不要使用自定义属性。使用 HTML5`data-`属性：

```
<input type="text" id="tags'.$j.'" data-num="'.$j.'" /> 
```

并使用`.data()`功能：

```
var i = $(this).data('num'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:43:26.610

您遇到的问题是 JavaScript 中的常见问题。这是一个关闭问题。您隐式声明了`i`在此行中调用的变量。

```
i = $(this).attr('num'); 
```

由于它是隐式声明的，它也是全局的。这将导致每次迭代都`.each()`使用相同的变量。

在您的情况下，您必须选择如何解决它。JavaScript 中的变量具有函数作用域，因为您永远不会覆盖 i 的值，您可以简单地像这样显式声明变量：

```
var i = $(this).attr('num'); 
```

通常建议显式声明变量，如果你像这样开始你的函数，你实际上可以让大多数 JS 引擎为你检查这个

```
function(){
  "use strict";
  //...
} 
```

另一种选择是对这种封闭问题的更一般的解决方案。在本节中 $('#valid'+i).click(function(){ valid_temps(i); }); $('#delete'+i).click(function(){ delete_temps(i); });

你可以把它改成

```
i = $(this).attr('num')       
(function(i){
  $('#valid'+i).click(function(){
      valid_temps(i);
  });
  $('#delete'+i).click(function(){
      delete_temps(i);
  });
})(i); 
```

不同之处在于，在您的代码中，直到调用该方法才对 i 进行评估，从而为您提供在最后一次迭代中写入 i 的值`.each()`。在上面的代码`i`中，立即评估。作为您面临的关闭问题的一个简单示例，您可以使用这段代码

```
var i,j, arr = [];

for(i=0;i<10;i += 1){
    //creates a function that closes over i
    arr[arr.length] = function(){console.log(i);}
}
for(j=0;j<10;j += 1){
   arr[j](); //They all output 9 to the console
} 
```

将第一个循环的主体更改为

```
arr[arr.length] = (function(k){function(){console.log(k);}})(i); 
```

导致大多数人期望的第一手行为，即 0..9 输出到控制台

在您的特定情况下，简单地在`i`本地声明可能是这两个选项中最易读的，但最好知道如何避免在一般情况下关闭变量。

# android - 全选方法在listview android中选择所有复选框不起作用

> ID：15289522
> 
> 赞同：3
> 
> 时间：2013-03-08T08:19:43.360
> 
> 标签：android, android-layout, android-listview, android-checkbox

我有自定义适配器来填充列表视图，其中包含每个项目的名称和复选框。现在我在列表顶部添加了一个按钮以启用选择所有项目，但不知何故它不起作用我无法弄清楚我错在哪里。它也没有抛出任何错误。这是我的代码。`

```
send_show12.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View view) {
    //              flag = !flag;
                    //lv = get
                    int size = lv.getCount();
                    `Log.d("This is count is at button listener", ""+size);

                    if(lv.isItemChecked(1)){
                        for(int i = 0; i<=size; i++){

                            lv.setItemChecked(i, true);
                        }
                    } else {
                        for(int i = 0; i<=size; i++){
                            lv.setItemChecked(i, false);
                        }
                    }
                }
            });` 
```

帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:09:21.020

> 当您使用复选框滚动列表视图时，项目的位置将发生变化，以便选中的项目可能未选中，未选中的项目可能已选中。因此，为什么所选列表项目无法正确显示。（您是否观察到此问题？？）解决这个问题你必须使用 ArrayAdapter 而不是 baseAdapter。 [请按照此链接解决问题。](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php#downloads)
> 
> 而不是 PlanetsActivity 类使用这个类，剩下的是一样的......

```
public class PlanetsActivity extends Activity {

private ListView mainListView;
//private Planet[] planets;
ArrayList<Planet> planets=new ArrayList<Planet>();
private ArrayAdapter<Planet> listAdapter;

/** Called when the activity is first created. */
@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Find the ListView resource.
    mainListView = (ListView) findViewById(R.id.listView1);

    // When item is tapped, toggle checked properties of CheckBox and
    // Planet.

    mainListView
            .setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View item,
                        int position, long id) {
                    Planet planet = listAdapter.getItem(position);
                    planet.toggleChecked();
                    PlanetViewHolder viewHolder = (PlanetViewHolder) item
                            .getTag();
                    viewHolder.getCheckBox().setChecked(planet.isChecked());
                }
            });

    Button bt=(Button)findViewById(R.id.yourbutton);
    bt.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            planets.clear();
            for(int i=1;i<15;i++){
                planets.add(new Planet(""+i,true));
            }

            listAdapter = new PlanetArrayAdapter(this, planets);
            mainListView.setAdapter(listAdapter);
        }
    });

    planets.add(new Planet("1", false));
    planets.add(new Planet("2", false));
    planets.add(new Planet("3", false));
    planets.add(new Planet("4", false));
    planets.add(new Planet("5", false));
    planets.add(new Planet("6", false));
    planets.add(new Planet("7", false));
    planets.add(new Planet("8", false));
    planets.add(new Planet("9", false));
    planets.add(new Planet("10", false));
    planets.add(new Planet("11", false));
    planets.add(new Planet("12", false));
    planets.add(new Planet("13", false));
    planets.add(new Planet("14", false));

    listAdapter = new PlanetArrayAdapter(this, planets);
    mainListView.setAdapter(listAdapter);
}

public Object onRetainNonConfigurationInstance() {
    return planets;
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:26:27.747

您正在尝试检查代表您的项目的视图。你说你有一个复选框和一个文本，所以我认为它是一个线性布局。LinearLayout 没有实现 Checkable，因此您无法检查它。

您可以实现实现 Checkable 的 LiearLayout 的子类（这不好玩，而且我见过的网络上的大多数免费解决方案要么被设计破坏，要么不完整，因此它们无法在所有情况下工作），或者您查找您的循环中 LinearLayout 内的 CheckBox。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T13:44:08.133

我使用 HashMap 来跟踪所选项目的 id

# c++ - 处理非常大的多语言项目

> ID：15289529
> 
> 赞同：5
> 
> 时间：2013-03-08T08:20:11.723
> 
> 标签：c++, visual-studio, ide, full-text-search

我正在处理一个非常大的多语言项目（1000+ 类 + 配置 + 脚本），文件分布在网络驱动器上。我无法通过代码进行战斗，因为可用的工具没有帮助。主要问题是找东西。对于 C++ 部分：带有 VAX 的 VS 只能找到解决方案中的文件和符号。其中很多都不是。Reshaper也有同样的问题。现在我一直在做未索引的字符串和文件搜索，这在网络驱动器上效率很低。我听说 SourceInsight 将是一个选项，因为它允许您只指定作为项目一部分的文件夹并为它们编制索引，但我的公司不会在它上面花钱。

所以我的问题是：有哪些工具可以用来处理大量令人难以置信的代码？如果可能的话，它们应该是低成本的，甚至是免费/开源的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:05:58.177

查看 -

1.  [ctags](http://ctags.sourceforge.net/)
2.  [示波器](ftp://ftp.eeng.dcu.ie/pub/ee454/cygwin/usr/share/doc/mlcscope-14.1.8/html/index.html)
3.  [实用工具](http://www.gnu.org/software/idutils/)
4.  [航海家](http://sourcenav.sourceforge.net/online-docs/userguide/tutorial.html)

在这些工具中的每一个中，您都必须投入（*）一些时间来阅读文档，然后构建您的索引。考虑切换到可以使用这些工具的编辑器。

(*)：我的意思是*投资*，因为一旦你这样做，它就会获得红利。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T15:26:53.603

如果您需要维护大量代码，您真的应该有一个源代码管理系统，其中很多会通过索引所有文件来帮助您查找文本

他们中的大多数人将使用各种语言。

否则，您可以安装一些索引器，如 Apache Lucene 并索引所有文件...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T04:11:50.213

你应该看看[LXR](http://lxr.sourceforge.net/en/index.shtml)。许多 Linux 内核源代码列表都使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T11:48:42.237

试试 ndexer [http://code.google.com/p/ndexer/](http://code.google.com/p/ndexer/)

承诺处理非常大的代码库！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T20:19:07.450

Perl 程序[ack](http://search.cpan.org/~petdance/ack-2.00b06/)也值得一看——把它想象成 类固醇上的多文件 grep。新版本（我称之为后期测试版）甚至允许您为要处理的文件指定正则表达式以及要搜索的正则表达式——这是我自推出以来就广泛使用的功能（我有一个子项目300 多个类中的 30k 行，此功能非常有用）。您甚至可以将新 ack 与自身链接起来，以便您可以子选择要处理的文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T06:39:08.747

> 带有 VAX 的 VS 只能找到解决方案中的文件和符号。其中很多都不是。

您可以添加所有不在您的解决方案中的文件，并将它们设置为不在设置中构建。您的 VS 构建不会受此影响，但现在 VS 知道这些文件，您可以将它们与 VS 原生文件一起搜索。

# mysql - 使用 MySQL 中另一个表中的数据填充表时，启动 auto_increment 值不起作用

> ID：15289532
> 
> 赞同：2
> 
> 时间：2013-03-08T08:20:20.677
> 
> 标签：mysql, primary-key, auto-increment

我想用另一个表中的数据创建一个表，以便将 id 设置为某个 auto_increment 起始值。

这是我想用另一个表中的数据填充的表：

```
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| id        | int(11)      | NO   | PRI | NULL    | auto_increment |
| city      | varchar(255) | YES  |     | NULL    |                |
| state     | varchar(255) | YES  |     | NULL    |                |
| state_id  | int(11)      | YES  |     | NULL    |                |
| city_slug | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+ 
```

执行此查询后：

```
alter table table_temp auto_increment = 40499; 
```

如果我做一个虚拟插入：

```
insert into table_temp (city, state, state_id, city_slug) values (1, 1, 1, 1); 
```

它做了它的预期，即 id 以值 40499 开头

```
select * from table_temp;

+-------+------+-------+----------+-----------+
| id    | city | state | state_id | city_slug |
+-------+------+-------+----------+-----------+
| 40499 | 1    | 1     |        1 | 1         |
+-------+------+-------+----------+-----------+ 
```

在截断表并再次执行 auto_increment 的 alter table 查询后，我尝试用另一个表中的数据填充同一个表：

```
insert into table_temp (city, state, state_id, city_slug) select city, state, state_id, city_slug from final_location; 
```

但是 id 以默认 id 值 1 开头：

```
select * from table_temp limit 10;

+----+---------+---------+----------+-------------------+
| id | city    | state   | state_id | city_slug         |
+----+---------+---------+----------+-------------------+
|  1 | Abatiá  | Paraná  |      242 | all-cidade-abatia |
+----+---------+---------+----------+-------------------+ 
```

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:26:29.003

我刚刚发现出了什么问题，在截断表格后，它似乎失去了对 auto_increment 起始值的引用。为了再次正确设置 auto_increment 值，我不得不再次执行 alter table 查询：

```
alter table table_temp auto_increment = 40499; 
```

# javascript - 用于从 XML 文件创建动态 HREF 和锚文本的 JavaScript 代码

> ID：15289537
> 
> 赞同：0
> 
> 时间：2013-03-08T08:20:34.953
> 
> 标签：javascript, html, xml-parsing, anchor, href

我希望能够通过访问包含目录结构的文件`href`在 div 中创建链接。我还想将文件名显示为每个链接的锚文本。链接将引用的（使用内联 JavaScript）、xml 文件和内容文件将自动从 Windows 服务器同步到平板电脑，因此不能使用服务器端代码。`JavaScript``XML``html``Android`

我设法在服务器上设置了一个自动化任务，该任务运行一些 Java 代码来创建 XML 文件/Windows 目录结构。然后将其连同内容和 html 文件同步到 Android 设备。
div 中显示的链接数量将随着新文件添加到文件夹和旧文件被删除而改变。

单击下面的链接可以访问 XML 文件的摘录。从一些研究看来我将不得不使用 xpath，因为从下面的 XML 我想为所有具有以开头的 absolutePath 属性的文件创建 href 链接

> “C:\MyFolder\Clients\Client1 (114)\Planograms\”。

然后，我希望链接的锚文本显示每个文档的文件名，以便用户知道哪个是哪个。

很感谢任何形式的帮助。

[示例 XML 文件](https://dl.dropbox.com/u/8673550/example.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:45:26.593

您应该在文件中添加一个有效的 XML 标头，例如`<?xml version="1.0"?>` 您是否使用浏览器来运行 Javascript？在这种情况下，您可能想要使用 jQuery ( [http://jquery.com](http://jquery.com) )。您的 HTML 和 Javascript 文件可能如下所示：

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
<ul id="filelist">
</ul>
    <script>
$.ajax({
url: "http://yourajaxservice",
cache: false
}).done(function( xml ) {
    xmlDoc = $.parseXML( xml );
    $xml = $( xmlDoc );
    $xml.find( "directory" ).each(function() {
            $(this).find("file").each(function() {
                    var currentFileName=$(this).attr("name");
                    var currentPath=$(this).attr("absolutePath");
                    if (currentPath.startsWith("C:\MyFolder\Clients\Client1 (114)\Planograms\")) {
                        $("#filelist").append("<li><a href='"+currentPath+"'>"+currentFileName+"</a></li>");
                   }
           });
   });

});

    </script>
    </body>
</html> 
```

# apache-camel - 在camel / fuseesb中部署时调试流口水

> ID：15289538
> 
> 赞同：2
> 
> 时间：2013-03-08T08:20:37.627
> 
> 标签：apache-camel, drools, fuseesb, spring-dm

我目前正在建立在这里找到的骆驼流口水示例：[https ://github.com/FuseByExample/camel-drools-example](https://github.com/FuseByExample/camel-drools-example)

路线如下：

```
<route trace="false" id="testRoute">
    <description>Example route that will regularly create a Person with a random age and verify their age</description>
    <from uri="timer:testRoute"/>
    <bean method="createTestPerson" ref="personHelper"/>
    <to uri="drools:node1/ksession1?action=insertBody" id="AgeVerification">
        <description>valid 'action' values are:
                'execute' that takes a 'Command' object (default)
                'insertBody' that inserts the Exchange.in.body, and executes rules
                'insertMessage' that inserts the Exchange.in (type org.apache.camel.Message), and executes rules
                'insertExchange' that inserts the Exchange (type org.apache.camel.Exchange), and executes rules
            </description>
    </to>
    <choice>
        <when id="CanDrink">
            <simple>${body.canDrink}</simple>
            <log logName="Bar" message="Person ${body.name} can go to the bar"/>
        </when>
        <otherwise>
            <log logName="Home" message="Person ${body.name} is staying home"/>
        </otherwise>
    </choice>
</route> 
```

我已经为我自己的项目扩展了这个示例，并添加了更复杂的规则和不同的事实，我现在想对其进行调试，但是我不知道如何让 Drools 调试在骆驼/熔断器环境中工作。

理想情况下，我希望看到 Drools IDE 提供的所有各种调试视图，例如议程视图、工作内存视图等（根据[http://docs.jboss.org/drools/release/5.5.0.Final/流口水专家文档/html/ch06.html#d0e8478](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html/ch06.html#d0e8478)）。我已将我的 Eclipse 项目转换为 Drools 项目。我创建了一个新的“Drools 应用程序”调试配置，但不知道在“主类”部分放置什么。我没有自己的主类，因为它是调用规则触发并将事实插入工作内存的骆驼。

我已经尝试将应用程序作为普通 Java 应用程序进行调试，因此我在执行应用程序的 drools 部分之前设置了断点。我遵循了 drools 文档，该文档说，如果您设置正常断点并单击应填充 drools“工作内存”或“议程”视图的 workingMemory 变量，但是我总是看到“选定的工作内存为空”，即使虽然我知道它不是。我已经从头到尾单步执行了所有可能的 WorkingMemory 变量的代码，但我仍然看到“选定的工作内存为空”错误。

有没有人能够在使用骆驼部署时成功调试口水？如果是这样，您采取了哪些步骤？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:14:42.503

我使用 KnowledgeRuntimeLogger 来帮助调试我的 camel/drools 应用程序。它创建了一个我在 Audit 视图中查看的日志文件（您可以将它拖到 eclipse 中的视图中）。

KnowledgeRuntimeLogger flogger = KnowledgeRuntimeLoggerFactory.newThreadedFileLogger(ksession,"c:/temp/wmlog");

如果您需要在 spring 中执行此操作，您可以将其创建为带有两个构造函数参数的 bean（或创建您自己的小 bean 来创建记录器）。

hth

# php - 在 HighCharts 中的饼图的图例单击上显示提示并选择饼图

> ID：15289545
> 
> 赞同：2
> 
> 时间：2013-03-08T08:22:03.013
> 
> 标签：php, javascript, jquery, function, highcharts

嗨朋友们，我想在鼠标悬停时显示带有图例的工具提示，并单击饼图的事件，就像我们悬停饼图时一样，我想显示选定的饼图（饼图像在饼图点选择上一样滑出）

这是默认图表，我已禁用图例 click for pie

```
 http://jsfiddle.net/LQS48/1/ 
```

谁能告诉我怎么做

正如你在这里看到的那样

```
http://livecoding.io/3433043 ( which is done with custom buttons i want to achive this with highcharts legends 
```

任何帮助将不胜感激 .. ：）

**更新 - 我在 steve 和 sebastian 的帮助下找到了解决方案，集成在下面的小提琴中**

```
http://jsfiddle.net/8T7Ew/1/ 
```

**最终更新 - 修复了我在 steve 和 sebastian 以及 highcharts 支持团队的帮助下发现的这个 Soltuion 中的一个错误，该团队集成在下面的小提琴中，现在可以完美地工作。**

好吧，我希望这成为一个 highcharts 功能，

```
 Final working Solution for me :: http://jsfiddle.net/8T7Ew/3/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:37:21.373

对于图例上的点击事件，您可以添加：

```
 this.select();
   chart.tooltip.refresh(this); 
```

到您的 legendItemClick 函数。[http://jsfiddle.net/8T7Ew/](http://jsfiddle.net/8T7Ew/)。

[对于鼠标悬停，highcharts 论坛http://highslide.com/forum/viewtopic.php?f=9&t=7094](http://highslide.com/forum/viewtopic.php?f=9&t=7094)上有一个讨论。第二页建议：http: [//jsfiddle.net/hfrntt/ArmRM/11661/](http://jsfiddle.net/hfrntt/ArmRM/11661/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:06:35.340

看一下示例，它介绍了当您将鼠标悬停在图例上时如何显示工具提示[http://jsfiddle.net/ArmRM/14892/](http://jsfiddle.net/ArmRM/14892/)

```
$('.highcharts-legend span, .highcharts-legend tspan').each(function(index, element) {
$(element).hover(function() {
    chart.tooltip.refresh(chart.series[0].data[index]);
},function() {
    chart.tooltip.hide();
}) 
```

});

# javascript - Flot 动画一条从一个点到另一个点的垂直线

> ID：15289554
> 
> 赞同：1
> 
> 时间：2013-03-08T08:22:32.097
> 
> 标签：javascript, jquery, flot

我陷入了一个问题。你们可能已经在许多应用程序中看到了类似于扫描仪的动画线条。好吧，我需要类似的东西，但我需要它在图表中。

我真正需要的是我需要绘制一条自动从一个点移动到另一个点的垂直线。

让我再解释一下： 1\. 我有一个按钮 2\. 我按下按钮，图形区域出现。3\. 在图形区域上，一条垂直线在该区域中滚动，就好像它正在扫描该区域一样。

我能够绘制这条线，但它有点倾斜。其背后的逻辑如下：

```
for(i=0;i<frequencyArray.length;i++){
                 myTestArray2.push([i,outFrequencyArray[i]]);
            }

plot.setData([
              {data:myTestArray2,lines:{fill:false,lineWidth:3},shadowSize:10}
                    ]);

function setUpflot(){
            // setup plot

             //console.log("setUpflot");
             var options = {
                // series  : { shadowSize: 0, splines: {show:true,lineWidth:1}},
                 series  : { },

                 yaxis   : { ticks: 5, tickColor:"rgba(148,129,151,0.5)", min: minGraphY, max:maxGraphY,show: true},
                xaxis   : { tickLength:0,  show: false },
                grid    : { borderWidth:0,markings:[
                                {yaxis: { from: 200.0, to: 240.0 },color: "rgba(140,2,28,0.5)"}
                        ]}
             }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T14:01:48.697

我把这个放在一起是为了回应昨天的评论。

[在这里](http://jsfiddle.net/RUKvk/26/)拉小提琴。

产生：

![在此处输入图像描述](../Images/f015ba8415911a7a874f6832012d0349.png)

```
plot = $.plot($("#placeholder"),
  [ { data: someData} ], {
  series: {
    lines: { show: true }
  },
  crosshair: { mode: "x" }, // turn crosshair on
  grid: { hoverable: true, autoHighlight: false },
  yaxis: { min: -1.2, max: 1.2 }
});

crossHairPos = plot.getAxes().xaxis.min;
direction = 1;

setCrossHair = function(){
   if (direction == 1){
     crossHairPos += 0.5;   
   }
   else
   {
       crossHairPos -= 0.5;
   }
   if (crossHairPos < plot.getAxes().xaxis.min){
       direction = 1;
       crossHairPos = plot.getAxes().xaxis.min;
   }
   else if (crossHairPos > plot.getAxes().xaxis.max)
   {
       direction = 0;
       crossHairPos = plot.getAxes().xaxis.max;
   }
  plot.setCrosshair({x: crossHairPos})
  setTimeout(setCrossHair,100);
}

// kick it off
setTimeout(setCrossHair,100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:59:32.433

```
var frequencyIndex = 0; //dynamic values stored intialised with 0.
var outFrequencyArray = [];

for(i=0;i<totalPoints;i++){

              outFrequencyArray.push(minGraphY-1);
          } 

opd=Math.tan(Math.PI/2);
outFrequencyArray.splice(frequencyIndex,0,opd);
frequencyIndex++;
for(i=0;i<frequencyArray.length;i++){
myTestArray2.push([i,outFrequencyArray[i]]);
        }

plot.setData([
          {data:myTestArray2,lines:{fill:false,lineWidth:3},shadowSize:10}
                ]);

function setUpflot(){
        // setup plot

         //console.log("setUpflot");
         var options = {
            // series  : { shadowSize: 0, splines: {show:true,lineWidth:1}},
             series  : { },

             yaxis   : { ticks: 5, tickColor:"rgba(148,129,151,0.5)", min: minGraphY, max:maxGraphY,show: true},
            xaxis   : { tickLength:0,  show: false },
            grid    : { borderWidth:0,markings:[
                            {yaxis: { from: 200.0, to: 240.0 },color: "rgba(140,2,28,0.5)"}
                    ]}
         }; 
```

# javascript - 错误：找不到模块'jade~'

> ID：15289558
> 
> 赞同：9
> 
> 时间：2013-03-08T08:22:43.823
> 
> 标签：javascript, node.js, pug, railway.js, compoundjs

我是节点 js 的新手。我使用 Compound Js 创建了一个 crud 操作。

该应用程序运行良好，直到我尝试提醒一个值，之后我收到错误

```
500 Error: Cannot find module 'jade~'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Module.require (module.js:362:17)
at require (module.js:378:17) 
```

如何解决这个问题

我的索引

```
#tabs
  ul
    li
      a(href='#tabs-1') New Leave
    li
      a(href='#tabs-2') Index of Leave
  #tabs-1
    .page-header
      h1 New employee

    - var form = formFor(employee, {action: pathTo.employees(), method: 'POST', id: "employee_form", class: 'form-horizontal'})

    != form.begin()
    != errorMessagesFor(employee) 
    .control-group
      != form.label("code", false, {class: "control-label"})
      .controls
        != form.input("code")
    .control-group
     != form.label("description", false, {class: "control-label"})
      .controls
        != form.input("description")
    .control-group
      != form.label("applicable", false, {class: "control-label"})
      .controls
        != form.input("applicable")
    .control-group
      != form.label("cForward", false, {class: "control-label"})
      .controls
        != form.checkbox("cForward")
    .control-group
      != form.label("limit", false, {class: "control-label"})
      .controls
        != form.checkbox("limit")
    .control-group
      != form.label("lop", false, {class: "control-label"})
      .controls
        != form.checkbox("lop")
    .control-group
      != form.label("od", false, {class: "control-label"})
      .controls
        != form.checkbox("od")
    .control-group
      != form.label("co", false, {class: "control-label"})
      .controls
        != form.checkbox("co")
    .control-group
      != form.label("lrevision", false, {class: "control-label"})
      .controls
        != form.checkbox("lrevision")
    .control-group
      != form.label("active", false, {class: "control-label"})
      .controls
        != form.checkbox("active")
    .form-actions
      != form.submit('<i class="icon-ok icon-white"></i>  Create employee', {class: 'btn btn-primary'})
      span= ' or '
      != linkTo('Cancel', pathTo.employees(), {class: 'btn'})
    != form.end()
  #tabs-2
    .page-header
      h1 Index of employees

    .row
      .span12
         p
            != linkTo('<i class="icon-plus icon-white"></i> New employee', path_to.new_employee(), {class: 'btn btn-primary'})

    - if (employees.length) {
    .row
      .span12
         table.table.table-striped
           thead
             tr
               th ID
               th.span3 Actions
           tbody
             - employees.forEach(function (employee) {
             tr
               td
                 != linkTo('employee #' + employee.id, path_to.employee(employee))
               td
                 != linkTo('<i class="icon-edit"></i> Edit', pathTo.edit_employee(employee), {class: 'btn btn-mini'}) + ' '
                 != linkTo('<i class="icon-remove icon-white"></i> Delete', pathTo.employee(employee), {class: 'btn btn-mini btn-danger', method: 'delete', remote: true, jsonp: '(function (u) {location.href = u;})'})
             - });
    - } else{
    .row
      .span12
         p.alert.alert-block.alert-info
            strong No employees were found.
    - } 
```

布局文件

```
!!! 5
html
  head
    title= title
    != stylesheetLinkTag('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/themes/base/jquery-ui.css', 'bootstrap', 'application', 'bootstrap-responsive')
    != javascriptIncludeTag('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.js', 'rails', 'application')
    script
      $(document).ready(function() {
        $("#tabs").tabs();
      });
    != csrfMetaTag()
  body
    .navbar
        .navbar-inner
            .container
               a.brand(href='#') Project name

    .container
      - var flash = request.flash('info').pop(); if (flash) {
        .alert.alert-info= flash
      - }

      - flash = request.flash('error').pop(); if (flash) {
        .alert.alert-error= flash
      - }

      != body

      hr
      footer
        p © Company 2012
  != contentFor('javascripts') 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-02-15T04:43:17.997

我在 nodeschool expressworks 教程中遇到了同样的问题。我通过在 package.json 中包含依赖项来解决它：

```
npm install --save express jade 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-25T03:47:53.710

我有完全相同的问题，但是“找不到模块'jade'”，而不是'jade~'；我很确定我已经做了“npm install jam”。经过一段时间的研究，我发现我的问题是因为我在全局安装express而在本地安装jade，参考了这个帮助[https://www.openshift.com/forums/express/nodejs-and-jade-error-cannot- find-module-jade](https://www.openshift.com/forums/express/nodejs-and-jade-error-cannot-find-module-jade)我解决了我的问题.. 我把它贴在这里，以为它可能会帮助一些与我面临同样问题的其他人:)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-12T19:00:09.270

对我来说，这是一个不同的问题。我在本地和全球都安装了玉和快递，希望他们能以某种方式找到对方，但快递仍然在抱怨玉。

我的错误如下所示：

```
Express server listening on port 3000
Error: Cannot find module 'jade'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:364:17)
    at require (module.js:380:17)
    at new View (/Users/ajeetganga/node_modules/express/lib/view.js:43:49)
    at Function.app.render (/Users/ajeetganga/node_modules/express/lib/application.js:488:12)
    at ServerResponse.res.render (/Users/ajeetganga/node_modules/express/lib/response.js:798:7)
    at exports.index (/Users/ajeetganga/Documents/WORKSPACE/TinyUrl/MyTinyUrl2/routes/index.js:7:7)
    at callbacks (/Users/ajeetganga/node_modules/express/lib/router/index.js:164:37)
    at param (/Users/ajeetganga/node_modules/express/lib/router/index.js:138:11) 
```

如果你观察这条线：

```
at new View (/Users/ajeetganga/node_modules/express/lib/view.js:43:49) 
```

你会看到它不是全局或本地 npm 安装的默认位置。所以作为一种解决方法，我在以下文件夹中安装了翡翠

```
cd /Users/ajeetganga/node_modules/
npm install jade 
```

我认为即使我从文件夹 /Users/ajeetganga/ 安装了翡翠，它也会起作用，但从未尝试过。:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-18T06:03:29.433

`The issue was with Fedora-16`我正在研究的。编辑时创建的临时文件，即'index.jade~'没有被清除，因此问题来了。

这个问题可以在 Fedora-16 中通过**删除临时文件 'index.jade~'**或**将节点模块 'jade' 重命名为 'jade~' 来解决**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T08:25:11.440

呃，你几乎可以肯定`require('jade~')`在你想要的地方有一个简单的错字`require('jade')`。检查您的快递`app.engine('jade')`线路作为另一个可能的嫌疑人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-13T06:04:36.187

用 Emacs 编辑一个玉文件后，我遇到了同样的问题。解决方法很简单：找到jade~文件并删除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-26T05:30:51.410

我遇到了同样的问题（我的 typescript + webpack 项目中的 jade-loader）。我通过将jade-loader 安装为对等依赖项来解决它。

# c# - 如何为泛型提供对引用类型的约束？

> ID：15289559
> 
> 赞同：2
> 
> 时间：2013-03-08T08:22:45.227
> 
> 标签：c#, generics

我有这种情况：

```
public class FOO<T> where T : IBar
{
    private T _xxx;
    public Y(T xxx)
    {
        if (xxx == null) throw new ArgumentNullException("xxx");
        _xxx = xxx;
    }
}

public interface IBar 
{
    string XString { get; }
} 
```

在构造函数中，我正在`T`检查`null`. 编译器正确地警告我，我正在检查`null`可能是值类型的东西，因为`IBar`它可以由结构实现。

如何约束`T`成为引用类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:23:54.510

典型的*神话*（甚至我之前得到的）是从接口派生的类型是隐式引用类型，但实际上并非如此。*结构*也可以有接口。

因此，您应该添加更多约束`class`以指示为引用类型

```
public class FOO<T> where T : class, IBar 
```

# jquery - 切换鼠标点击可选择的元素

> ID：15289561
> 
> 赞同：1
> 
> 时间：2013-03-08T08:22:59.100
> 
> 标签：jquery, jquery-ui, selectable, jquery-ui-selectable, jquery-ui-widget

我需要实现的是

1）我每次点击都可以选择几个元素。

2）当我再次单击所选元素时，它应该被取消选择

HTML 代码：

```
<ol id="selectable">
    <li class="ui-widget-content">Item 1</li>
     <li class="ui-widget-content">Item 2</li>
     <li class="ui-widget-content">Item 3</li>
     <li class="ui-widget-content">Item 4</li>
     <li class="ui-widget-content">Item 5</li>
     <li class="ui-widget-content">Item 6</li>
     <li class="ui-widget-content">Item 7</li>
</ol> 
```

代码：

```
#feedback {
    font-size: 1.4em; }
#selectable .ui-selecting {
     background: #FECA40; }
#selectable .ui-selected {
     background: #F39814;
     color: white; }
#selectable {
     list-style-type:
     none; margin: 0;
     padding: 0;
     width: 60%; }
#selectable li {
     margin: 3px;
     padding: 0.4em;
     font-size: 1.4em;
     height: 18px; } 
```

查询代码：

```
$(function() {
    $( "#selectable" ).selectable();
}); 
```

[在 jquery 站点中查看此代码](http://jqueryui.com/selectable/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:48:53.810

好的，我希望我的回答会有所帮助。在这里，您应该做的是将您的元键设置为[true](http://api.jquery.com/event.metaKey/) on `mouse down event`。在示例代码中，事件被[绑定](http://api.jquery.com/bind/)。我从 stackoverflow 本身[这里](https://stackoverflow.com/questions/5718493/how-to-implement-toggle-functionality-on-jquery-ui-selectable)得到了这个，[这里](https://stackoverflow.com/questions/3946462/jquery-ui-selectable-unselect-selected-item-on-click)。

现在针对您的具体问题，请单击以下链接 [JSFIDDLE](http://jsfiddle.net/arjuncc/nMrrW/)

# module - Sugar CRM - 如何将自定义模块添加到导航栏快捷方式？

> ID：15289565
> 
> 赞同：0
> 
> 时间：2013-03-08T08:23:21.770
> 
> 标签：module, sugarcrm

我创建了一个新的自定义模块 Customer。它目前在主页的所有部分中显示为快捷方式。我希望用户在将鼠标悬停在销售快捷方式上时能够选择客户（在客户、联系人、机会旁边显示客户）。

我该如何添加它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:51:49.090

您可以从页面将模块添加到不同的菜单组`Administration > Configure Module Menu Filters`。它将位于`Developer Tools`“管理”页面的部分中。

# python - Python列表，元组和字典到JSON？

> ID：15289566
> 
> 赞同：0
> 
> 时间：2013-03-08T08:23:23.727
> 
> 标签：python, json, serialization, simplejson, jsonserializer

将其显示为 JSON 的最佳方式是什么？

```
{'foo': 'bar'}
[1,2,3,4,5] 
```

* * *

我的部分解决方案：

```
import json

def json_tuple(*args, **kwargs):   
    if args:
        if kwargs:
            return json.dumps(args), json.dumps(kwargs)
        return json.dumps(args)

    return json.dumps(kwargs) 
```

提供：

```
>>> json_tuple(1,2,3,4,5, **{'foo': 'bar'}) 
```

```
('[1, 2, 3, 4, 5]', '{"foo": "bar"}') 
```

* * *

将`args`列表放入`kwargs`- 例如：在一个`args`键下 - 是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:27:16.790

如果您只是在寻找有效的 JSON，您可以将这些值放入顶级数组中：

```
import json

def jsonify(*args, **kwargs):
    return json.dumps((args, kwargs))  # Tuples are faster to create 
```

产生：

```
'[[1, 2, 3, 4, 5], {"foo": "bar"}]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:23:23.727

我的“丑陋”解决方案：

```
import json

def jsonify(*args, **kwargs):   
    if args:
        kwargs.update({'args': args})

    return json.dumps(kwargs) 
```

提供：

```
>>> jsonify(1,2,3,4,5, **{'foo': 'bar'}) 
```

```
'{"foo": "bar", "args": [1, 2, 3, 4, 5]}' 
```

# java - 如何通过单击 GUI 中的按钮来更改面板的内容？

> ID：15289570
> 
> 赞同：0
> 
> 时间：2013-03-08T08:23:28.040
> 
> 标签：java, swing, netbeans, jpanel, jbutton

呸。我在这个问题上卡了这么久。我正在做一个模拟流行测验的 GUI 程序。但是当我希望我的程序像这样时，我不知道要放什么代码......![启动](../Images/9225c0d55ed98486b07daabe641f3614.png)

当我点击开始按钮时，面板应该是这样的...... ![问题](../Images/0bcce8204dee2ac6a72dad79687849ee.png)

到目前为止，这就是我的启动菜单...

```
public static void main (String []args){
    JFrame f = new JFrame("Pop Quiz");
    f.setSize(400,300);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setLayout(null);
    f.setResizable(false);

    JPanel p1 = new JPanel();
    p1.setSize(400,100);
    p1.setLocation(0,0);
    p1.setLayout(new GridLayout(3,1));
    f.add(p1);

    JLabel l1 = new JLabel("Welcome to POP Quiz!");
    p1.add(l1);

    JLabel l2 = new JLabel("Enter your name:");
    p1.add(l2);

    final JTextField name = new JTextField ();
    p1.add(name);

    JPanel p2 = new JPanel();
    p2.setSize(400,50);
    p2.setLocation(0,225);
    f.add(p2);

    JButton start = new JButton ("Start");
    p2.add(start);

    start.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             String player = name.getText();
             //what should be added here to change the contents of the panel?
         }
    });

    f.show();
} 
```

而对于问题...

```
public static void main(String[] args){
    JFrame f = new JFrame("Pop Quiz");
    f.setSize(400,300);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setLayout(null);
    f.setResizable(false);

    JPanel p1 = new JPanel();
    p1.setSize(400,100);
    p1.setBackground(Color.PINK);
    f.add(p1);

    JLabel question = new JLabel();
    question.setText("In computers, what is the smallest and basic unit of information storage?");
    p1.add(question);

    JPanel p2 = new JPanel();
    p2.setSize(400,175);
    p2.setLocation(0,100);
    p2.setLayout(new GridLayout(2,4));
    f.add(p2);

    JButton a = new JButton("a. Bit");
    p2.add(a);

    JButton b = new JButton("b. Byte");
    p2.add(b);

    JButton c = new JButton("c. Data");
    p2.add(c);        

    JButton d = new JButton("d. Newton");
    p2.add(d);        

    f.show();
} 
```

我任何人都可以提供帮助，我将不胜感激。提前致谢！祝你今天过得愉快！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:32:09.833

使用[`CardLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html). 如图所示[。](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)

![游戏视图](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![高分视图](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

## 提示

### 布局

```
f.setLayout(null); 
```

*使用布局！* 我不能强调这一点。布局可能看起来很复杂，但它们是在旨在用于不同平台（PLAF、屏幕分辨率......）的 GUI 中布局复杂组件组的唯一可行解决方案。

### 控件

```
JButton a = new JButton("a. Bit");
p2.add(a);

JButton b = new JButton("b. Byte");
// .. 
```

鉴于用于按钮的字符串的性质，它们似乎最好是 a `JComboBox`、 a`JList`或 a 中的按钮`ButtonGroup`。

### 已弃用的方法

```
f.show(); 
```

此方法已被弃用，您的编译器应该警告您它已被弃用或有更多警告被忽略。查看此类警告，修复它们。方法被弃用是有原因的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:48:41.900

实现这一点的步骤：
1.创建一个**主**面板并添加到`JFrame`
2\. 将内容添加到**main**中的**welcomePanel**。 3\. 一旦用户按下**welcomePanel**中的“开始”按钮。调用主**容器**。4.在**main的****contentPanel**中 添加新内容并调用它将更新**main**。 **`JPanel`
**`removeAll()` ******`JPanel``revalidate()`**********

 ******注意：为此，您不需要单独的 jframe 实例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:30:17.237

试试 f.getContentPane().add(panel);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:42:21.920

```
Try this.. 

   public class test {
    public static void main(String[] args) {
        final JFrame f = new JFrame("Pop Quiz");
        f.setSize(400, 300);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLayout(null);
        f.setResizable(false);

        final JPanel p1 = new JPanel();
        p1.setSize(400, 100);
        p1.setLocation(0, 0);
        p1.setLayout(new GridLayout(3, 1));
        f.add(p1);

        JLabel l1 = new JLabel("Welcome to POP Quiz!");
        p1.add(l1);

        JLabel l2 = new JLabel("Enter your name:");
        p1.add(l2);

        final JTextField name = new JTextField();
        p1.add(name);

        final JPanel p2 = new JPanel();
        p2.setSize(400, 50);
        p2.setLocation(0, 225);
        f.add(p2);

        JButton start = new JButton("Start");
        p2.add(start);

        start.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                String player = name.getText();
               p1.setVisible(false);
               p2.setVisible(false);
                JPanel testPanel = new JPanel();
                testPanel.setSize(400, 100);
                testPanel.setBackground(Color.PINK);
                f.add(testPanel);

                JLabel question = new JLabel();
                question.setText("<html>In computers, what is the smallest and basic unit<br/> of information storage?</html>");
                testPanel.add(question);

                JPanel p2 = new JPanel();
                p2.setSize(400, 175);
                p2.setLocation(0, 100);
                p2.setLayout(new GridLayout(2, 4));
                f.add(p2);

                JButton a = new JButton("a. Bit");
                p2.add(a);

                JButton b = new JButton("b. Byte");
                p2.add(b);

                JButton c = new JButton("c. Data");
                p2.add(c);

                JButton d = new JButton("d. Newton");
                p2.add(d);

                f.show();
            }
        });

        f.show();
    }
} 
```******

# python - 非英文文本python不可读

> ID：15289584
> 
> 赞同：1
> 
> 时间：2013-03-08T08:24:07.047
> 
> 标签：python, http, unicode, encoding

我正在编写爬虫并获取非英文网站的标题。当我在控制台中打印标题时，会变成这样：

```
à¦¶à§à¦°à§à¦²à¦à§à¦à¦¾à¦° à¦­à¦¾à¦²à§ à¦¸à§à¦à¦¨à¦¾
à¦«à¦à¦¿à¦°à¦¾à¦ªà§à¦²à§ à¦¹à¦¾à¦¤à¦¬à§à¦®à¦¾ à¦¬à¦¿à¦¸à§à¦«à§à¦°à¦£, à¦à¦à¦ à§§à§¬
à¦¦à§à¦ à¦¬à¦¾à¦à¦²à¦¾à¦¦à§à¦¶à¦¿à¦à§ à¦¨à¦¿à§à§ à¦à§à¦à§ à¦¬à¦¿à¦à¦¸à¦à¦«
à¦à¦¾à¦®à¦¾à§à¦¾à¦¤ à¦¨à§à¦¤à¦¾ à¦¸à§à¦²à¦¿à¦®à¦¸à¦¹ à¦¦à§à¦à¦¨ à¦à§à¦°à§à¦ªà§à¦¤à¦¾à¦° 
```

我不知道如何从上述字符串中获取正确的文本。

任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:32:50.163

这看起来像是 UTF-8 编码的孟加拉语文本，其中散布着 HTML 字符引用，被错误地解释为 windows-1252 字符。也可能是其他任何事情，真的。

在抓取网页时，您应该大致按照浏览器和一般搜索引擎在决定字符编码时所做的事情。这远非微不足道。在 HTML5 RC 中，第 8.2.2.1 节[确定字符编码](http://www.w3.org/TR/html5/syntax.html#determining-the-character-encoding)是描述该过程的尝试。

# java - 具有通配符上下文的泛型

> ID：15289585
> 
> 赞同：-4
> 
> 时间：2013-03-08T08:24:08.837
> 
> 标签：java, generics

在一次关于泛型的采访中，面试官问一个问题，有两个列表，一个列表是字符串类型（即一个数组列表是字符串类型），我们在其中添加一些字符串，现在创建第二个数组列表，它将是您创建的第一个列表的类型，意味着第二个 ararylist 将接受创建的第一个列表的对象类型他给我提示它可以通过泛型实现，请告知如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:59:53.980

根据你的描述猜测，

```
List<String> firstList = new ArrayList<String>();

public <T> List<T> createSecondList(List<T> firstList)
{
   return new ArrayList<T>();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:35:09.260

好像是这样问的

```
 List<String> list1 = new ArrayList<String>();
    List<List<String>> list2 = new ArrayList<List<String>>(); 
```

# php - [PHP]外部客户端使用 JAXL 在 Facebook 上发送消息

> ID：15289586
> 
> 赞同：1
> 
> 时间：2013-03-08T08:24:09.143
> 
> 标签：php, facebook

我正在使用 JAXL 3.x 编写一个模块，允许我向另一个 facebook 用户发送消息。

```
public function sendTo($id = null, $name = null, $user = null){
    if(!$id)
        throw new NotFoundException(__('Invalid user id'));
    if(!$name)
        throw new NotFoundException(__('Invalid name'));
    if(!$user)
        throw new NotFoundException(__('Invalid user'));
    $this->set('mess',$_POST['mess']);
    $this->set('id',$id);
    $this->set('name',$name);

    $config = new Config();
    $client = new JAXL(array(
            // (required) credentials
            'jid' => $id,
            'fb_app_key' => $config->fb_app_id,
            'fb_access_token' => $config->fb_access_token,

            // force tls (facebook require this now)
            'force_tls' => true,
            // (required) force facebook oauth
            'auth_type' => 'X-FACEBOOK-PLATFORM',

            // (optional)
            //'resource' => 'resource',

            'log_level' => JAXL_INFO
    ));

    //
    // add necessary event callbacks here
    //

    $client->add_cb('on_auth_success', function() {
        echo "got on_auth_success cb, jid ".$client->full_jid->to_string();
    });

        $client->add_cb('on_auth_failure', function($reason) {
            $client->send_end_stream();
            echo "got on_auth_failure cb with reason $reason";
        });

            $client->add_cb('on_chat_message', function($stanza) {

                // echo back incoming message stanza
                $stanza->to = $id;
                $stanza->from = $client->full_jid->to_string();
                $client->send($stanza);
            });

                $client->add_cb('on_disconnect', function() {
                    echo "got disconnected";
                });

                    //
                    // finally start configured xmpp stream
                    //
                    $client->start();
                    echo "done\n";
} 
```

但在输入“on_auth_success”后，我发现一个空 $client 错误。但是正如您在代码中看到的那样，在创建 $client 之后，我尝试通过 print_r($client); 打印出它的内容；结果是：

```
JAXL Object ( [cfg] => Array ( [jid] => -to_some_one@chat.facebook.com [fb_app_key] => appid [fb_access_token] => access_token [force_tls] => 1 [auth_type] => X-FACEBOOK-PLATFORM [log_level] => 4 [host] => chat.facebook.com [port] => 5222 ) [ev:protected] => JAXLEvent Object ( [common:protected] => Array ( ) [reg] => Array ( ) ) [xeps] => Array ( [0030] => XEP_0030 Object ( [jaxl:protected] => JAXL Object *RECURSION* ) [0115] => XEP_0115 Object ( [jaxl:protected] => JAXL Object *RECURSION* ) ) [roster] => Array ( ) [manage_roster] => 1 [manage_subscribe] => none [log_level] => 4 [priv_dir] => C:\xampp\htdocs\cake\app\Lib\Facebook/.jaxl [tmp_dir] => C:\xampp\htdocs\cake\app\Lib\Facebook/.jaxl/tmp [log_dir] => C:\xampp\htdocs\cake\app\Lib\Facebook/.jaxl/log [pid_dir] => C:\xampp\htdocs\cake\app\Lib\Facebook/.jaxl/run [sock_dir] => C:\xampp\htdocs\cake\app\Lib\Facebook/.jaxl/sock [sock:JAXL:private] => [cli:JAXL:private] => [local_ip] => 172.17.1.137 [pid] => 4736 [mode] => apache2handler [status] => [features] => Array ( ) [category] => client [type] => bot [lang] => en [retry] => 1 [retry_interval:JAXL:private] => 1 [retry_attempt:JAXL:private] => 0 [retry_max_interval:JAXL:private] => 32 [full_jid] => [jid] => XMPPJid Object ( [node] => -ffff[domain] => chat.facebook.com [resource] => [bare] => -fffff@chat.facebook.com ) [pass] => [resource] => jaxl#f2991f0002fbd1af8df4754c1df8683c [force_tls] => 1 [trans:protected] => JAXLSocketClient Object ( [host:JAXLSocketClient:private] => [port:JAXLSocketClient:private] => [transport:JAXLSocketClient:private] => [stream_context:JAXLSocketClient:private] => [blocking:JAXLSocketClient:private] => [fd] => [errno] => [errstr] => [timeout:JAXLSocketClient:private] => 10 [ibuffer:JAXLSocketClient:private] => [obuffer:JAXLSocketClient:private] => [compressed:JAXLSocketClient:private] => [recv_bytes:JAXLSocketClient:private] => 0 [send_bytes:JAXLSocketClient:private] => 0 [recv_cb:JAXLSocketClient:private] => Array ( [0] => JAXLXmlStream Object ( [delimiter:JAXLXmlStream:private] => \ [ns:JAXLXmlStream:private] => [parser:JAXLXmlStream:private] => Resource id #93 [stanza:JAXLXmlStream:private] => [depth:JAXLXmlStream:private] => -1 [start_cb:JAXLXmlStream:private] => Array ( [0] => JAXL Object *RECURSION* [1] => start_cb ) [stanza_cb:JAXLXmlStream:private] => Array ( [0] => JAXL Object *RECURSION* [1] => stanza_cb ) [end_cb:JAXLXmlStream:private] => Array ( [0] => JAXL Object *RECURSION* [1] => end_cb ) ) [1] => parse ) [recv_chunk_size:JAXLSocketClient:private] => 1024 [writing:JAXLSocketClient:private] => ) [xml:protected] => JAXLXmlStream Object ( [delimiter:JAXLXmlStream:private] => \ [ns:JAXLXmlStream:private] => [parser:JAXLXmlStream:private] => Resource id #93 [stanza:JAXLXmlStream:private] => [depth:JAXLXmlStream:private] => -1 [start_cb:JAXLXmlStream:private] => Array ( [0] => JAXL Object *RECURSION* [1] => start_cb ) [stanza_cb:JAXLXmlStream:private] => Array ( [0] => JAXL Object *RECURSION* [1] => stanza_cb ) [end_cb:JAXLXmlStream:private] => Array ( [0] => JAXL Object *RECURSION* [1] => end_cb ) ) [last_id:protected] => 0 [state:protected] => setup ) 
```

这意味着 $client 成功连接到 XMPP 服务。有什么帮助吗？

\\\\\\\\添加评论\\\\\\\\\\

我在开发网络应用程序时使用 cakephp。

# java - android java.io.IOException：传输端点未连接

> ID：15289588
> 
> 赞同：1
> 
> 时间：2013-03-08T08:24:17.247
> 
> 标签：java, android, bluetooth

我需要向蓝牙设备发送一个字符串。但是在发送时，我`java.io.IOException: Transport endpoint is not connected`在`java.io.OutputStream.write(byte[])`方法上得到了一个例外。

代码如下所示。该代码只是从配对设备列表中搜索特定设备并发送字符串。

```
public class MainActivity extends Activity {

    TextView out;
    private static final int REQUEST_ENABLE_BT = 1;
    private BluetoothAdapter btAdapter;
    private ArrayList<BluetoothDevice> btDeviceList = new ArrayList<BluetoothDevice>();
    private ArrayAdapter<String> mPairedDevicesArrayAdapter;
    private ArrayAdapter<String> mNewDevicesArrayAdapter;
    BluetoothDevice device1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        out = (TextView) findViewById(R.id.out);
        btAdapter = BluetoothAdapter.getDefaultAdapter();
        ListpairedDevices();
    }

    /* This routine is called when an activity completes. */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == REQUEST_ENABLE_BT) {
            CheckBTState();
        }
    }

    public void ListpairedDevices() {
        Set<BluetoothDevice> pairedDevices = btAdapter.getBondedDevices();

        // If there are paired devices, add each one to the ArrayAdapter
        if (pairedDevices.size() > 0) {
            out.append("\nPaired Devices \n");
            for (BluetoothDevice device : pairedDevices) {
                out.append("\n  Device123: " + device.getName() + "," + device);
                //mPairedDevicesArrayAdapter.add("\n  Device123: " + device.getName() + "," + device);
                String dv=device.toString();
                if(dv.contains("00:1B:EE:82:31:1E"))
                {
                device1=device;
                }
            }
        } else {
            out.append("\nNo Pared Device");
        }
        out.append("\nDiscovered Devices");
    }

    public void sendtext(View v) {//button click

    Set<BluetoothDevice> bd=btAdapter.getBondedDevices();
    sendDataToPairedDevice("message1");
    }
    private void sendDataToPairedDevice(String message ){       
        byte[] toSend = message.getBytes();
        try {
         UUID applicationUUID = UUID.fromString("8ce255c0-200a-11e0-ac64-0800200c9a66");
         BluetoothSocket socket = device1.createInsecureRfcommSocketToServiceRecord(applicationUUID);
         OutputStream mmOutStream = socket.getOutputStream();
         mmOutStream.write(toSend);
     } catch (IOException e) {
         Log.e( "Exception during write", e.toString());
     }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:45:19.727

编辑：

您需要连接到套接字，在此之前您需要取消发现

```
 btAdapter.cancelDiscovery();
 socket.connect(); 
```

为 Kiran KJ 工作的 UUID 是

00001105-0000-1000-8000-00805F9B34FB

* * *

你还没有得到蓝牙适配器，你刚刚声明了它。

使用静态工厂方法获取这样的蓝牙适配器

在 onCreate 中添加这个

```
btAdapter=BluetoothAdapter.getDefaultAdapter(); 
```

# c# - View Model 或 Controller 中的 MVC 级联属性

> ID：15289589
> 
> 赞同：1
> 
> 时间：2013-03-08T08:24:35.367
> 
> 标签：c#, asp.net-mvc, model-view-controller, separation-of-concerns

我使用 MVC 并且有一个问题，构建串联视图模型属性的最佳实践是什么？`FullName`我可以在两个地方构建连接字段（ ）：

1.  在这样的模型视图中

    ```
     public class User
        {
           public string FirstName { get; set; }
           public string LastName { get; set; }
           public string FullName { get {return FirstName+LastName;} }  
        }

    public ActionResult Users()
    {
     var model = new User
                 {
                    FirstName = "Tomas",   
                    LastName = "Saint",     
                  });

     return View(model);
    } 
    ```

2.  在控制器中

    ```
    public class User
    {
       public string FullName { get; set; }
    }

    public ActionResult Users()
    {
     var model = new User
                 {
            FullName = "Tomas" + "Saint";   
                  });

     return View(model);
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:34:10.913

如果计算/函数与视图的格式相关联，那么我会继续将功能放在视图模型中，就像你的全名属性一样，这在视图模型中是正确的。但是，如果您有任何需要域逻辑的功能/计算，那么我认为视图模型不适合这样做，并且可以驻留在域模型中以实现可重用性，或者驻留在业务逻辑层中的其他位置。

所以简短的答案 - 视图模型中的视图格式，其他地方的任何域逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:35:05.300

为显示目的计算值的任何方法或属性（例如您的示例中的 FullName）都属于 ViewModel。这样做可以为您提供一种干净、类型安全的方式将数据传递给视图，并允许视图以一致的方式访问属性。这种方法还具有使该属性在使用该特定 ViewModel 的任何地方都可用的优点。如果您将属性添加到控制器，情况就不会如此。

下面使用 Razor 语法的示例：

```
@model MvcApplication.Models.User
...
<div class="editor-label">
    @Html.LabelFor(m => m.FullName)
</div>
<div class="editor-field">
    @Html.DisplayFor(m => m.FullName)
</div> 
```

# javascript - 用新链接替换网站上的大量旧链接？（客户端）

> ID：15289591
> 
> 赞同：1
> 
> 时间：2013-03-08T08:24:40.887
> 
> 标签：javascript, jquery, content-management-system, greasemonkey

我们目前正在将文章从旧 CMS 迁移到新 CMS。问题是旧文章中的链接是硬编码的，并且引用的是旧站点。

我们迁移者无法访问数据库，因此所有文章和所有链接都必须手动更改。
我有旧的站点地图和新的站点地图，并且想编写一个 Greasemonkey/jQuery 脚本来单击一个按钮，该脚本会将所有旧 cms 链接更改为新 cms 链接。

在这种情况下，最好/最优雅的解决方案是什么？使用数组？有500多个网站/文章...

您建议记住什么，只允许客户端脚本？

目前我有这个小片段，它用 ! 标记所有旧链接。

```
$("#links").click(function() 
{
    $('a[href*="pattern-of-old-cms"]')
        .append('<span class="attention" style="font-size: 25px; color:red;">!</span>');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:33:16.823

```
$("a[href='http://www.google.com/']").attr('href', 'http://www.live.com/'); 
```

一种解决方案是对所有链接执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:43:45.930

不要运行 500 多个`.attr()`语句！使用更有效的方式处理页面。

像这样创建两个文件：

old_URLs.js：

```
var oldUrlArray = [
    "Old address 1",
    "Old address 2",
    "Old address 3",
    // etc., etc.
] 
```

new_URLs.js：

```
var newUrlArray = [
    "New address 1",
    "New address 2",
    "New address 3",
    // etc., etc.
] 
```

并将它们放在与您的 gm`.user.js`文件相同的文件夹中。

然后你的脚本变成：

```
// ==UserScript==
// @name     _Mass link replacer remapper
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  old_URLs.js
// @require  new_URLs.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/
var oldLinks = $('a[href*="pattern-of-old-cms"]');

while (oldLinks.length) {
    var firstHref = oldLinks[0].href;
    var hrefIndex = oldUrlArray.indexOf (firstHref);

    if (hrefIndex >= 0) {
        var toReplace   = oldLinks.filter ("[href='" + firstHref + "']");
        toReplace.attr ("href", newUrlArray[hrefIndex]);

        oldLinks = oldLinks.not (toReplace);
    }
    else {
        alert ("I don't know how to map the link: " + firstHref);
        break;
    }
} 
```

# dbus - 服务器和客户端中不同的 Dbus 绑定

> ID：15289602
> 
> 赞同：0
> 
> 时间：2013-03-08T08:25:26.180
> 
> 标签：dbus, qdbus

我正在尝试实现 Dbus 客户端。Dbus 服务器实际上是由第三方实现的，我不知道它使用什么绑定（但我猜是 gdbus）。现在我可以在我的客户端应用程序中使用 QDbus 绑定，而不管 Dbus 服务器中使用什么绑定吗？如果是这样，如何在服务器（例如 glib 类型）和客户端（例如 qt 类型）之间管理数据类型（wrt 复杂数据类型/用户定义的结构）？对此概念的解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:08:33.330

DBus 上的所有类型都有 DBus 类型，绑定只是将它们转换为自己的格式。例如，一个`uint32`类型`unsigned int`在 C/C++ 中是一个，而在 Java 绑定中它是一个`UInt32`.

基本上，所有实现都需要知道消息的有线格式。只要他们理解这种格式，翻译成什么高级数据类型都没有关系。我不会真正称它们为复杂数据类型，因为您只能通过总线发送基本数据类型。

# vb.net - Visual Basic（代码错误）

> ID：15289603
> 
> 赞同：0
> 
> 时间：2013-03-08T08:25:29.800
> 
> 标签：vb.net, visual-studio-2012

我是 Visual Studio 的新手。我尝试在 Visual Basic 中编写一个简单的程序，该程序从文本框中获取一个 13 位数字并将其数字写入数组。然后它写入数组的第二个成员（第二个数字数字）到另一个文本框，但它不起作用。这是代码：

```
Public Class Form1

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim array(12) As Integer
        Dim index As Integer = 11
        Dim code As Long = TextBox1.Text
        Do While index >= 0
            array(index) = code Mod 10
            code /= 10
            index -= 1
        Loop
        TextBox2.Text = array(1)
    End Sub
End Class 
```

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:43:16.943

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim array(12) As Integer
    Dim index As Integer = 11
    Dim code As Char() = TextBox1.Text.ToCharArray()

    For i As Integer = 0 To code.Count - 1
        array(i) = Integer.Parse(code(i))
    Next

    TextBox2.Text = array(1)
End Sub 
```

# ios - iOS，在不使用 segue 的情况下为场景设置委托

> ID：15289606
> 
> 赞同：1
> 
> 时间：2013-03-08T08:25:39.053
> 
> 标签：ios, delegates, storyboard, segue, scene

我正在尝试在不使用 segue 的情况下导航到场景。我正在使用的代码如下所示：

```
UIStoryboard * storyboard = [UIStoryboard storyboardWithName:storyboardName bundle:nil];
MyViewController * controller = (MyViewController *)[storyboard instantiateViewControllerWithIdentifier:viewControllerID];
[self presentViewController:controller animated:YES completion:nil]; 
```

我的问题是为这个场景设置委托。通常我会做以下事情：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Check the segue identifier
    if ([[segue identifier] isEqualToString:@"showDetail"])
    {
        [[segue destinationViewController] setDelegate:self];
    }
} 
```

但我不想使用segues。谁能告诉我如何为场景设置代表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:39:34.650

```
UIStoryboard * storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
DetailViewController * controller = (DetailViewController *)[storyboard instantiateViewControllerWithIdentifier:@"DetailView"];
controller.delegate = self;
[self presentViewController:controller animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:36:51.087

您可以为正在加载的场景设置委托。

您的“destinationViewController”将有一个方法“ViewWillAppear”。在那里，您可以将委托设置为自我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:37:02.740

因为您已经有了对新控制器的引用，所以您不需要`prepareForSegue:sender:`在以下行之后实现该方法：

```
MyViewController * controller = (MyViewController *)[storyboard instantiateViewControllerWithIdentifier:viewControllerID]; 
```

只需添加：

```
[controller setDelegate:self]; 
```

# c - stderr 未声明的标识符

> ID：15289613
> 
> 赞同：9
> 
> 时间：2013-03-08T08:26:02.107
> 
> 标签：c

```
void
argmatch_valid (const char *const *arglist,
            const char *vallist, size_t valsize)
{
  size_t i;
  const char *last_val = NULL;

  fprintf (stderr, _("Valid arguments are:"));
  for (i = 0; arglist[i]; i++)
    if ((i == 0)|| memcmp (last_val, vallist + valsize * i, valsize))
    {
      fprintf (stderr, "\n  - `%s'", arglist[i]);
      last_val = vallist + valsize * i;
    }
    else
    {
      fprintf (stderr, ", `%s'", arglist[i]);
    }
  putc ('\n', stderr);
} 
```

尽管我在 .c 文件中包含了 stdio.h，但我得到以下信息

```
警告 C4013：“fprintf”未定义；假设 extern 返回 int

错误 C2065：“stderr”：未声明的标识符

警告 C4013：“putc”未定义；假设 extern 返回 int

```

我想通过#pragma warning(disable :4013) 禁用警告，但想将代码编译干净。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T08:33:16.737

虽然 stdio.h 应该可以工作，但有时您还需要包含 stdlib.h。包括以下这些：

```
#include <stdio.h>
#include <stdlib.h> 
```

**在同一个**.C 文件的顶部声明这两个包含，您上面的 argmatch_valid 函数已定义。

我的水晶球表明您认为您包含的 stdio.h 被注释或另一个被清除的预处理器部分所包裹。也许您可以发布整个源文件。有人可能会发现真正的错误。

# matlab - 如何在 Matlab simulink 中显示调制信号

> ID：15289615
> 
> 赞同：0
> 
> 时间：2013-03-08T08:26:11.743
> 
> 标签：matlab, simulink

我想在 simulink 中显示信号调制，但我不知道如何制作 ![在此处输入图像描述](../Images/db1665a77c653e3eb787a866fa8447b7.png) ![在此处输入图像描述](../Images/29088f098e2ddbb9af640427665724f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:27:04.773

Spectrum Scope 计算输入信号的 FFT。在您的模型中，您试图采用 fft 的 fft。（尽管您并没有完全这样做，因为 FFT 块的输入需要被缓冲，以便 FFT 有一个数据向量来计算 FFT。）

移除您的 FFT 和 Abs 模块，并将信号直接馈送到 Spectrum Scope。使用模块的对话框设置您要使用的缓冲区和 FFT 长度。

菲尔。

# c# - com.google.zxing.binarybitmap 处理位图图像时出错

> ID：15289616
> 
> 赞同：0
> 
> 时间：2013-03-08T08:26:19.283
> 
> 标签：c#, winforms, qr-code, zxing

我有这种方法可以读取位图图像以解码文档中某个区域的 qr 码（查看 qr 码的四个角）由于我的代码方式，它总是会遇到错误消息，我知道它不能找到位图，但我想接受这个错误并以执行我剩余代码的方式进行翻译，即旋转文档并再次查找 qr 位图图像。

**代码：**

```
Bitmap[] corners = new Bitmap[] { bandImg1, bandImg2, bandImg3, bandImg4 };
                    string QRinfo = "";
                    for (int i = 0; i < corners.Length; ++i)
                    {
                        string tempQRinfo = Process(corners[i]);
                        if (tempQRinfo == null)
                        {
                            QRinfo = tempQRinfo;
                            switch (i)
                            {
                                case 0: break; //upper left
                                case 1: fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone); break;
                                case 2: fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone); break;
                                case 3: fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone); break;
                            }
                            break;
                        }
                    } 
```

**找不到图像时导致错误的处理方法。**

```
 public string Process(Bitmap bitmap)
    {
        var reader = new com.google.zxing.qrcode.QRCodeReader();

        try
        {
            LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            return reader.decode(binBitmap).Text;
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

**帮助：**我想翻译错误消息，让文档在所有四个具有 qr 代码的角落进行搜索，然后如上所示旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:27:59.830

**在`Process`方法中：**

```
public string Process(Bitmap bitmap)
{
    var reader = new com.google.zxing.qrcode.QRCodeReader();

    try
    {
        LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
        var binarizer = new HybridBinarizer(source);
        var binBitmap = new BinaryBitmap(binarizer);
        return reader.decode(binBitmap).Text;
    }
    catch (Exception e)
    {
        //catch the exception and return null instead
        return null;
    }
} 
```

**然后在其他代码中：**

```
Bitmap[] corners = new Bitmap[] { bandImg1, bandImg2, bandImg3, bandImg4 };
string QRinfo = null;
for (int i = 0; i < corners.Length; ++i)
{
    string tempQRinfo = Process(corners[i]);
    if (tempQRinfo != null) //if the string is NOT null, then we found the QR. If it is null, then the for loop will continue searching if it has more corners to look at
    {
        QRinfo = tempQRinfo;
        switch (i)
        {
            case 0: break; //upper left
            case 1: fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone); break;
            case 2: fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone); break;
            case 3: fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone); break;
        }
        break;
    }
}

if(QRinfo == null)
{
    //we never found the QR!
    MessageBox.Show("Error! No QR found!");
}
else
{
    //here is the QR we found!
    MessageBox.Show(QRinfo);
} 
```

所以这一切所做的就是将图像的角落放在一个数组中。应该保存 QR 信息的字符串设置为`null`. 数组被循环，每个角都被传递给该`Process`方法，以查看该角是否是带有 QR 码的角。在该`Process`方法中，QR 阅读器尝试读取图像。如果抛出错误，则将其捕获，并且该方法返回`null`. 如果没有错误，则该方法返回正确的字符串。一旦`Process`方法完成，我们检查返回的字符串以确保它不是`null`. 如果不是`null`，则找到了 QR，我们将 QR 字符串提供给 QRinfo，然后根据 QR 图像的哪个角落旋转 fullImg。如果字符串是`null`，然后它将继续循环遍历图像，直到找到带有 QR 的图像，或者没有剩余图像。

循环完成后，我们检查`QRinfo`. 如果它仍然是，`null`那么在任何角落都没有找到 QR。如果不是`null`，则找到一个 QR，并显示 QR 字符串。

因此，这可以满足您的要求。它吞下错误，并继续寻找 QR，以便您可以旋转和显示 QR。

*注意：*我改变了

```
string QRinfo = ""; 
```

至

```
string QRinfo = null; 
```

# php - php和mysql中的多个搜索值

> ID：15289618
> 
> 赞同：1
> 
> 时间：2013-03-08T08:26:27.903
> 
> 标签：php, mysql, search-engine

我正在尝试在 php 和 mysql 中创建一个搜索引擎。搜索引擎应该能够接受多个值并显示所有可能的结果，我检查了这个线程[php/mysql search for multiple values](https://stackoverflow.com/questions/5759529/php-mysql-search-for-multiple-values)，但我需要在所在的地方使用全局变量`LIKE '$search%'`。这就是我的 sql 语句的样子，

```
SELECT name FROM product WHERE name LIKE '%$search% 
```

变量搜索已正确声明，现在当我专门搜索时一切正常，例如金链将显示金链。但是当我一起搜索另一个名称时，例如金链衬衫，其中衬衫是另一个产品的名称，结果未显示。我应该如何更改我的 sql 命令以从搜索的多个值中获取多个结果？很抱歉，我之前没有告诉我被要求在 3 层编程中做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:36:47.323

[这里](http://www.iamcal.com/publish/articles/php/search/)有一篇不错的文章，它将向您介绍如何使用 PHP 搜索 MySQL，但基本上您要做的是将搜索短语分成几部分，然后在 MySQL 查询中使用它们。例如：

```
<?php
  $search = 'Gold Chain Shirt';
  $bits = explode(' ', $search);

  $sql = "SELECT name FROM product WHERE name LIKE '%" . implode("%' OR name LIKE '%", $bits) . "%'"; 
```

以上将生成此查询：

```
SELECT name FROM product WHERE name LIKE '%Gold%' OR name LIKE '%Chain%' OR name LIKE '%Shirt%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:34:35.750

您确实需要查看[FULLTEXT](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)索引，然后阅读有关[FULLTEXT Query Expressions](http://dev.mysql.com/doc/refman/5.0/en/fulltext-query-expansion.html)的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:35:11.117

如果我理解正确，您想搜索所有具有“金链”或“衬衫”价值的物品。在这种情况下，当您将问题标记为“php”时，您可以通过更改`$search`整个 WHERE 子句来做到这一点。我这样做（示例显示不同的条件来解释这个想法）：

```
$search_array=array('name LIKE "%Gold Chain%"', 'price > 5');
$where=implode($search_array,' OR '); // you might wish ' AND '

some_function_to_query('SELECT name FROM product WHERE '.$where); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:37:59.830

您可以通过执行以下操作来改进搜索： '%$search' 仅从字符串的开头进行搜索以获得更多结果。

比，如果你想从一个句子中搜索每个单词，你可以这样做：

```
$search = 'Gold Chain Shirt';
$searches = explode(' ', $search);
$query = "SELECT * FROM product WHERE name ";
foreach($searches as $word) {
    $query .= "LIKE '%{$word}' OR ";
} 
```

# c# - 从数组算法中的当前数中找到最大的正确数

> ID：15289621
> 
> 赞同：2
> 
> 时间：2013-03-08T08:26:31.167
> 
> 标签：c#, performance, algorithm, big-o

我的算法应该从 input 中的*当前*数字中找到**最大**的正确数字，例如，给定以下输入：*`array``int[]`*

 *> 5、9、6、1、3、2

我的算法将输出：

> 9、6、3、3、2、2

这是我当前的代码：

```
public static int[] FindGreatestRightNumber(int[] input)
{
    var output = new int[input.Length];
    for (var i = 0; i < input.Length; i++)
    {
        int maxRightNumber = (i == input.Length - 1 ? input[i] : 0);

        for (var j = i+1; j < input.Length; j++)
        {
            var currentNumber = input[j];
            if (maxRightNumber < currentNumber)
                maxRightNumber = currentNumber;
        }
        output[i] = maxRightNumber;
    }

    return output;
} 
```

我被告知它可以更快，如何？任何的想法？

**更新：**请不要`LINQ`在您的答案中使用，我想熟悉使用**简单代码**、否`LINQ`、`IEnumerable`扩展方法等更快地解决问题的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T08:37:07.170

您可以从右侧一次通过。诀窍是实现*maxRightVal(n) = max(maxRightVal(n+1), values(n+1))*：

```
var output = new int[input.Length];
output[input.Length-1] = input[input.Length-1];

for(int i = input.Length - 2; i >= 0; i--)
    output[i] = output[i+1] > input[i+1] ? output[i+1] : input[i+1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:28:56.370

如果您想跳过某些项目并搜索最大值，则非常简单

```
int[]arr = {5, 9, 6, 1, 3, 2};
int currentIndex = 2;
int currentValue = 6;
int max = arr.Skip(currentIndex).Where(f => f > currentValue).Max(); 
```

**编辑**如果你想简单地对一个数组进行排序，那么：

```
 int[] sorted = arr.OrderByDescending(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T08:29:46.977

为什么不直接使用[`Enumerable.Max()`](http://msdn.microsoft.com/en-us/library/bb292667.aspx)方法？

> 返回 Int32 值序列中的最大值。

```
int[] input = new int[] { 5, 9, 6, 1, 3, 2 };
int biggest = input.Max();
Console.WriteLine(biggest); // 9 
```

这是一个**[演示](http://ideone.com/htgUNo)**。

因为，我现在更好地看到了这个问题，所以 VLad 的[答案](https://stackoverflow.com/a/15289655/447156)看起来是正确的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T10:36:24.183

从第 (n-2) 个元素开始，维护一个用第 n 个元素初始化的当前最大数组。如果当前元素大于 max 数组中的元素，则继续更新它。继续此操作，直到到达第一个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T08:39:43.263

这取每个元素右侧的最大值；

```
 int[] input = {5, 9, 6, 1, 3, 2};
 int[] output = input
            .Take(input.Length-1)
            .Select( (x,i) => input.Skip(i+1).Max()).ToArray(); 
```*

# c++ - 使用 unsigned long long 而不是 float 来防止换行

> ID：15289625
> 
> 赞同：-2
> 
> 时间：2013-03-08T08:26:37.400
> 
> 标签：c++, algorithm, floating-point, long-integer

我有一个应用程序，其中我正在使用某个类，该类具有将当前经过时间返回给我的方法。

```
unsigned long long getCurrentElapsedTime(){
} 
```

`Unsigned long long`使用而不是`float`在上述类中，因为`float`在运行一段时间（约 1 小时）后包装（更改为 expo 形式）。早些时候，我为`float`我的程序使用了返回秒数（1.112、1.336 等）的类中的方法。

```
float getElapsedTime(){
} 
```

我在我的程序中使用了上述方法，如下所示：

```
float startTime, deltaTime;
starttime = getElapsedTime();

On Some event
deltaTime = getElapsedtime() - startTime;
if(deltaTime > 1.0f){
//do something
} 
```

我现在有这个`getCurrentElapsedTime()`方法，它返回`unsigned long long`整数给我，直到很长时间才被包装。我必须在我的应用程序中以与使用 float 类似的方式使用此方法，但我很困惑我应该如何转换`unsigned long long`，`float`以免得到指数格式的数字。对于我的应用程序，我之前使用`float`具有以下格式数字（1.123、2.345、3.737 等）

如果我尝试将一个很长的`unsigned long long`数字转换为浮点数，我可能会再次遇到同样的问题（并且浮点数将采用博览会形式）我该如何解决这个问题？有没有类似的小数点，我可以在`unsigned long long`不涉及包装问题的情况下转换成小数点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:31:58.873

Float 不会“更改”为任何“expo fo”。事实上，一个`unsigned long long`意志会在某个时候溢出并返回到 0。A*不会*`float`。如果您添加的增量太小，它将不再与之前的浮点值不同。浮点数是有损的，但它可以表示诸如“无限”之类的值。long 是无损的，但是是有限的。

可能是您的*输出函数*以一定比例更改格式。但这是你如何*打印*数字的问题！

```
# Don't mind the python syntax, please:
print "Different format strings: %.3f %e %f" % (1.0, 1.0, 1.0)
Different format strings: 1.000 1.000000e+00 1.000000 
```

**相同的编号，不同的输出**

但是，**您的时间来源是**什么？使用*时间源的本机类型*（可能是 a `long`）您不能仅通过将其转换为另一种类型来提高精度。

# javascript - 如何使用 CoffeeScript 在同一个循环中创建两个数组？

> ID：15289627
> 
> 赞同：7
> 
> 时间：2013-03-08T08:26:37.257
> 
> 标签：javascript, arrays, coffeescript, push

我想同时创建两个数组 b 和 c。我知道两种可以实现它的方法。第一种方法是

```
b = ([i, i * 2] for i in [0..10])
c = ([i, i * 3] for i in [0..10])

alert "b=#{b}"
alert "c=#{c}" 
```

这种方法对于只创建一个数组非常方便。我不能成为获得更好计算性能的更好方法。

第二种方法是

```
b = []
c = []
for i in [0..10]
  b.push [i, i*2]
  c.push [i, i*3]

alert "b=#{b}"
alert "c=#{c}" 
```

这种方法看起来对计算效率很好，但是必须先写两行 b = [] c = []。我不想写这 2 行，但我还没有找到答案的好主意。如果没有初始化 b 和 c 的数组，我们就不能使用 push 方法。

存在存在运算符 ? 在 Coffeescript 中，但我不知道在这个问题中使用它很热。您是否有更好的方法来创建 b 和 c 的数组而无需显式初始化？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:53:28.713

您可以使用`underscore`（或任何其他提供`zip`类似功能的库）的帮助：

```
[b, c] = _.zip ([[i, i * 2], [i, i * 3]] for i in [0..10])... 
```

执行后我们有：

```
coffee> b 
[ [ 0, 0 ],
  [ 1, 2 ],
  [ 2, 4 ],
  [ 3, 6 ],
  [ 4, 8 ],
  [ 5, 10 ],
  [ 6, 12 ],
  [ 7, 14 ],
  [ 8, 16 ],
  [ 9, 18 ],
  [ 10, 20 ] ]

coffee> c
[ [ 0, 0 ],
  [ 1, 3 ],
  [ 2, 6 ],
  [ 3, 9 ],
  [ 4, 12 ],
  [ 5, 15 ],
  [ 6, 18 ],
  [ 7, 21 ],
  [ 8, 24 ],
  [ 9, 27 ],
  [ 10, 30 ] ] 
```

有关更多详细信息和示例，请参阅CoffeeScript 文档中[关于 splats 的部分。](http://coffeescript.org/#splats)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:26:10.250

使用存在运算符怎么样：

```
for i in [0..10]
    b = [] if not b?.push [i, i*2]
    c = [] if not c?.push [i, i*3]

console.log "b=#{b}"
console.log "c=#{c}" 
```

或者更容易理解：

```
for i in [0..10]
    (if b? then b else b = []).push [i, i*2]
    (if c? then c else c = []).push [i, i*3]

console.log "b=#{b}"
console.log "c=#{c}" 
```

**编辑：来自评论：**

> 好的，但是你必须编写这么多乏味的代码。` (b = b or []).push [i, i*2] 也是同样的原因

这很乏味，所以我们可以将它包装在一个函数中（但要注意变量现在将是全局的）：

```
# for node.js
array = (name) -> global[name] = global[name] or []

# for the browser
array = (name) -> window[name] = window[name] or []

for i in [0..10]
    array('b').push [i, i*2]
    array('c').push [i, i*3]

console.log "b=#{b}"
console.log "c=#{c}" 
```

# android - Google Play 商店从免费升级到付费应用的用户体验查询

> ID：15289630
> 
> 赞同：-4
> 
> 时间：2013-03-08T08:26:39.523
> 
> 标签：android

我对在 Google Play 商店从免费应用升级到付费应用的用户体验有疑问。

我们正在开发一个 Android 应用程序，我们需要在 Google Play 商店中同时拥有该应用程序的免费和付费版本。

1.  当用户从免费版升级到付费版时，最好的用户体验是什么？

    一个。选项 1：安装付费应用程序，然后向 Android 操作系统发送消息以删除免费应用程序（这必须以编程方式完成，因为包名称不同）。注意：要在 Play Store 上发布的应用程序包名称必须是唯一的。

    湾。选项 2：安装付费应用，不要删除免费应用。然后，用户可以手动删除免费应用程序。

2.  即使我们以编程方式尝试删除免费应用程序，Android 操作系统也会提示确认消息，寻求用户删除免费应用程序的许可。如果用户拒绝该权限，则不会卸载免费应用程序，用户将再次拥有这两个应用程序。

有什么方法可以在没有得到用户确认的情况下以编程方式卸载应用程序（在没有根的设备上）？由于这两个应用程序都是由我们发布的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:44:33.413

> 当用户从免费版升级到付费版时，最好的用户体验是什么？

也没有，真的。您应该使用应用内计费来解锁高级功能。

> 有什么方法可以在没有得到用户确认的情况下以编程方式卸载应用程序（在没有根的设备上）？由于这两个应用程序都是由我们发布的。

不。

# jquery - Jquery 对话框关闭 IE

> ID：15289631
> 
> 赞同：1
> 
> 时间：2013-03-08T08:26:41.470
> 
> 标签：jquery, internet-explorer-9

我将对话框用作搜索区域。用户单击添加图标，会弹出带有文本框和小搜索图标的对话框。单击搜索图标或在文本框中按 Enter 时，我想开始搜索。

在 FF 19 中完美运行，但在 IE 9 中，当我按下回车按钮时对话框关闭。我测试了一个独立的 HTML 页面和简单的对话框，带有文本框，IE 9 工作正常。所以我的代码中有一些东西会触发 IE 9 来关闭对话框。

我没有`form`打开对话框。它对结果进行 AJAX 调用，当结果返回时，对话框上有一个“添加”按钮，可通过复选框将选定的结果添加到主页下方的列表框中。

我在这里阅读了几个关于堆栈溢出问题的查询，对话框上的一个按钮绑定到输入按钮等，所以我删除了“添加”按钮。我也删除了文本框的 .keypress 代码（这会触发搜索 AJAX 功能），但仍然在按下回车按钮对话框关闭时。

我`beforeClose: function( event, ui )`在对话框中做了一个，并提醒了一些事件信息，当提醒框打开时，我看到`close button (x)`对话框上有焦点。

当我按下回车键时，我将如何追溯触发关闭按钮的原因？我试图在 IE 调试器、beforeClose 和 beforeClose 函数中设置断点，但 IE 根本不会在那里中断。而且我无法在具有更好调试器的 FF 中重新创建问题。

我的代码片段如下：

```
$('#dialog_add_assign_to').dialog({  
        autoOpen: false, 
        closeOnEscape: false,
        /*open: function(event, ui) { $(".ui-dialog-titlebar-close", $(this).parent()).hide(); },*/

        modal: true,  
        resizable: true,
        minWidth: 600,
        buttons: {  
            "Add": function() {
                $('.dialog_add_assign_to_result_checkboxes').each(function() { 
                    if ($(this).is(':checked') ) {
                        $('#' + $('#dialog_add_assign_to').data("type") + '_id').append('<option value="' + $(this).attr('id') + '">' + $(this).attr('ref_name') + ' (' + $(this).attr('ref_country') + ')</option>'); 
                    }
                 });
            },
            "cancel": function() {
                $(this).dialog( "close" );
            }
        },
        beforeClose: function( event, ui ) {
            $('#dialog_add_assign_to_result > tbody:last').empty();
            alert(event.originalEvent.originalEvent  );
            event.preventDefault();
        }
    });  

    //When user presses enter, fire off the search function (search icon click)
    $("#txt_search").keypress(function(e) {
        if (e.keyCode == $.ui.keyCode.ENTER) {
              $("#search_assigned_to").click();
        }
    });

    //Click on the icon to start AJAX search call
    $("#search_assigned_to").click(function () {           
        $('#dialog_add_assign_to_result > tbody:last').empty();

        $.ajax({
            type :'GET',
            url : 'get_ajax_data.php?type=search_' + $('#dialog_add_assign_to').data("type") + '&search_text=' + $("#txt_search").val(),
            dataType : 'xml',
            success : function(xml_results) {
                $('#dialog_add_assign_to_result > tbody:last').append('<tr><td><?=_NAME?></td><td><?=_COUNTRY?></td><td></td></tr>');
                console.log(xml_results);
                $(xml_results).find('search_' + $('#dialog_add_assign_to').data("type")).each(function(){
                    var int_id = $(this).find("id").text();
                    var str_name = $(this).find("name").text();
                    var str_country = $(this).find("country_name").text();

                    if (int_id == '----') {
                        var str_tmp =  '';
                    } else {
                        var str_tmp = '<input type="checkbox" class="dialog_add_assign_to_result_checkboxes" ref_name="' + str_name + '" ref_country="' + str_country + '"  id="' + int_id + '" />';
                    }

                    $('#dialog_add_assign_to_result > tbody:last').append('<tr><td>' + str_name + '</td><td>' + str_country + '</td><td>' + str_tmp + '</td></tr>');
                });

            }
        });
    }); 
```

对话框 HTML：

```
<div id="dialog_add_assign_to">
    <input type="text" id="txt_search" name="txt_search" /><img class="img_16" id="search_assigned_to" src="/images/tray/magnify.gif" />
    <table id="dialog_add_assign_to_result"><tbody></tbody></table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:09:52.430

首先你可以试试“event.preventDefault();” 在“beforeClose”函数中查看是否停止关闭。在使用 chrome 调试器检查“beforeClose”函数中的“event.originalEvent.originalEvent”时，我看到当我使用“Esc”键时，它添加了“27”的“keyCode”属性和“keydown”的“type”属性. 当您单击右上角的“x”时，它会添加“click”的“type”属性，它会告诉您“srcElement”是什么，并且它显然是一个 mouseevent。

我建议你在那里寻找线索，应该告诉你到底是什么关闭了对话框。您提到 IE 不会在“beforeClose”事件中中断？您可以登录以控制来自该事件的任何数据或发出任何警报吗？

# highcharts - highcharts 显示饼图的异常“c 未定义”

> ID：15289632
> 
> 赞同：0
> 
> 时间：2013-03-08T08:26:42.483
> 
> 标签：highcharts, gxt

我在 GXT 应用程序中使用 highcharts。GXT折叠面板有2个图表，一个是柱形图，一个是饼图，总是弹出异常显示

```
(TypeError): c is undefined
 fileName: http://127.0.0.1:8888/js/highcharts.js
 lineNumber: 118
 columnNumber: 0 
```

为饼图注入json数据时（柱形图正常工作）。

有人可以帮我检查一下吗？

这是饼图的 JSON 数据

```
{
  "title" : {
    "text" : "pie chart"
  },
  "chart" : {
    "type" : "pie",
    "renderTo" : "container",
    "events" : {
      "load" : function(event) { this.id = 'chart320002'; $wnd.registerChart(this, true);}
    }
  },
  "series" : [ {
    "name" : "COUNT",
    "data" : [ [ "A", 37 ], [ "B", 23 ], [ "C", 21 ], [ "D", 21 ], [ "E", 23 ], [ "F", 19 ], [ "G", 20 ] ]
  } ],
  "exporting" : {
    "buttons" : {"printButton":{"enabled":false}},
    "type" : "img/png",
    "url" : "http://127.0.0.1:8888/export/hiChart"
  },
  "credits" : {
    "enabled" : false
  },
  "plotOptions" : {
    "pie" : {"dataLabels":{"formatter":function(){return this.point.name+': '+$wnd.Highcharts.numberFormat(this.percentage,2)+'%';}}}
  },
  "xAxis" : {
    "title" : {
      "text" : "Compliant"
    }
  },
  "yAxis" : {
    "title" : { }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:57:37.620

**更新：**包括来自 Highcharts 网站的代码，即[http://code.highcharts.com/highcharts.js](http://code.highcharts.com/highcharts.js)。当我这样做时，我得到饼图！哇！

我使用不同的数据有同样的问题。所有基于线的图表都正确绘制。

我将您的 JSON 复制到 jsfiddle 并运行。然后我将你的 JSON 粘贴到我的项目中，同样的错误，“c 未定义”。

我能看到的唯一区别是，当我这样做时：

```
$('#chart').highcharts({...}); 
```

我得到 $(...).highcharts 不是一个函数，所以我正在使用：

```
var chart = Highcharts.Chart({...}); 
```

生成相同错误的饼图代码。

```
 var piechart = new Highcharts.Chart({
        chart: {
            borderColor: '#000000',
            borderWidth: 2,
            margin: 32,
            renderTo: 'piechart',
            type: chartType
        },
        series: [{
            name: 'Channel',
            data: [{
                name: 'Web',
                y: 75.6
            },{
                name: 'Mail',
                y: 24.4
            }]
        }],
        title: {
            text: 'Revenue'
        },
    }); 
```

它也在 jsfiddler 作为 $('#piechart').highcharts ... 运行，但不是我的网页。

# iphone - Objective c 无法定义宏

> ID：15289641
> 
> 赞同：3
> 
> 时间：2013-03-08T08:27:50.513
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我有这个

```
#define sud [NSUserDefaults standardUserDefault] 
```

然后我使用 [sud integerForKey: key]

编译警告：

```
Class method '+standardUserDefault' not found (return type defaults to 'id') 
```

运行时错误：

```
+[NSUserDefaults standardUserDefault]: unrecognized selector sent to class 0x3c0bc850 
```

但我可以在没有任何警告的情况下使用另一个：

```
#define man [Manager sharedManager] 
```

其中'man'是存储游戏分数等的游戏经理（单例）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T08:31:04.403

它是`standardUserDefaults`（带 s）。

两种风格说明：

*   Cocoa 不鼓励使用缩写。
*   您应该考虑删除宏，因为它们会降低代码的可读性和可理解性，正如您的拼写错误所证明的那样。

# php - 使用 / 正斜杠作为参数

> ID：15289642
> 
> 赞同：1
> 
> 时间：2013-03-08T08:27:53.527
> 
> 标签：php, apache, url

我有一个单页 index.php。我想接受表单中的参数`/value`。现在，如果我在 a 之后添加任何内容`/`，则假定我正在尝试访问单独的文件并出现错误。有没有办法我可以通过添加来接受参数`/value`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:32:02.677

Maby你可以看看[Silex](http://silex.sensiolabs.org/)。这是一个轻量级的框架，可以满足你所有的 url 需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:11:24.290

您必须使用 apache 的重写模块。检查`rewrite_module`是否处于活动状态。`.htaccess`然后你可以在你的目录中放置一个简单的文件，并遵循以下规则来完成这项工作：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_URI} !-d 
RewriteRule (.*) index.php?value=$1 [L,NS] 
```

此规则使用激活重写引擎并将之后的所有内容`/`放入`value`变量中。

查看重写[文档](http://httpd.apache.org/docs/2.2/rewrite/)，然后将规则调整为您自己的。

# flash - 在浏览器中循环播放音频的最佳方法？

> ID：15289643
> 
> 赞同：0
> 
> 时间：2013-03-08T08:27:56.760
> 
> 标签：flash, audio, html5-audio, soundmanager2

我正在制作一个涉及大量多轨音频循环的网站。我想知道在（使用javascript等）中实现这些的最佳方法是什么？

我应该使用：-flash 还是一些相关的 flash 库

或者

-html5 音频

或者是其他东西？

音频循环是无缝的非常重要

有什么好的图书馆呢？过去我使用过声音管理器。这些文件将主要是 mp3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:56:14.253

如果您不介意使用 Flash，您可以导入音频，监听 COMPLETE 事件，然后再次播放...

```
import flash.events.Event; 
import flash.media.Sound; 
import flash.net.URLRequest; 

var snd:Sound = new Sound(); 
var req:URLRequest = new URLRequest("smallSound.mp3"); 
snd.load(req); 

var channel:SoundChannel = snd.play(); 
channel.addEventListener(Event.SOUND_COMPLETE, onPlaybackComplete); 

public function onPlaybackComplete(event:Event) 
{ 
    trace("The sound has finished playing.");
    snd.play(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:34:22.797

如果您满足于坚持使用 WebKit 浏览器，则可以使用 Web Audio API。

这是一些样板“抽象”代码，可以帮助您入门。需要服务器。

```
<!DOCTYPE html>
<meta charset="UTF-8">
<title></title>

<div id="kickDrum"> </div>    // click and will loop
<div id="snareDrum"></div>    // Won't loop

 <script>
 var kickDrum = new audioApiKey("kickDrum","kick.mp3",true);     // first argument is the div name, the next is the audio file name & url the last parameter is loop on/off. true means loop on

 var snareDrum = new audioApiKey("snareDrum","snare.mp3", false);

 // Below is the abstracted guts.

 var context = new webkitAudioContext();

 function audioApiKey(domNode,fileDirectory,loopOnOff) {
    this.domNode = domNode;
    this.fileDirectory = fileDirectory;
    this.loopOnOff = loopOnOff;                      
    var bufferFunctionName = bufferFunctionName;
    var incomingBuffer;
    var savedBuffer;
    var xhr;
       bufferFunctionName = function () {
       var source = context.createBufferSource();
       source.buffer = savedBuffer;
       source.loop = loopOnOff;
       source.connect(context.destination);
       source.noteOn(0); // Play sound immediately
       };
    var xhr = new XMLHttpRequest();
    xhr.open('get',fileDirectory, true);
    xhr.responseType = 'arraybuffer';
    xhr.onload = function () {
    context.decodeAudioData(xhr.response,
       function(incomingBuffer) {
       savedBuffer = incomingBuffer;
       var note = document.getElementById(domNode);
       note.addEventListener("click", bufferFunctionName , false);
         }
      );
   };
 xhr.send();
 };

 </script> 
```

**CSS**

```
<style>

#kickDrum {
   background-color:orange;
   position:absolute;
   top:25%;
   left:25%;
   width: 200px;
   height:200px;
   border-radius:120px;
   border-style:solid;
   border-width:15px;
   border-color:grey;
 } 

#snareDrum {
   background-color:orange;
   position:absolute;
   top:25%;
   left:50%;     
   width: 200px;
   height:200px;
   border-radius:120px;
   border-style:solid;
   border-width:15px;
   border-color:grey;
 }

</style> 
```

# c++ - C++ 模板参数自动使用类名

> ID：15289652
> 
> 赞同：-1
> 
> 时间：2013-03-08T08:28:29.593
> 
> 标签：c++, templates, inheritance, classname

我有一个三重层次结构类：

```
template<class T> class Singleton;

class Base;

class Sub : public Base, public Singleton<Sub>; 
```

我使用底层自动指针，这就是为什么 Singleton 是一个模板类，而 Sub 将自己作为模板参数传递。我正在开发 Singleton 和 Base，公共 API 允许任何人添加自己的子类。我实际上想要一个像这样的真正的三重层次结构：

```
template<class T> class Singleton;

class Base : public Singleton<Base>;

class Sub : public Base; 
```

这样外部开发人员就不必担心模板和复杂性。这样做的问题是，我在 Singleton 中的实现现在将在我创建 Sub 的实例时调用 Base 的构造函数（因为模板参数是 Base）。

我想知道这是否可以通过预处理器宏来完成：

```
template<class T> class Singleton;

class Base : public Singleton<__CLASS_NAME__>;

class Sub : public Base; 
```

`__CLASS_NAME__`将被预处理器替换的类名在哪里。理论上这应该是可能的，因为`__PRETTY_FUNCTION__`宏实际上返回了类名。问题是无法进行字符串操作以从`__PRETTY_FUNCTION__`.

关于如何实现这一点的任何想法，以便 Sub 类不知道从`Singleton<template>`类继承？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T09:04:02.410

> 这样外部开发人员就不必担心模板和复杂性。

不可能的。您可以设计 Base 和 Singleton 以消除将模板参数传递给 Singleton 的要求的唯一方法是将其传递给 Base，这没有任何改进。

此外，可以合理预期 C++ 开发人员将能够使用 CRTP。

最后，单身人士以最可怕的方式吸吮。如果您重视自己的理智，请立即删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:00:46.180

我对 CRTP ( [http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern) ) 不是很熟悉，但是让 Base 本身成为模板怎么样？

`template<class T> class Singleton;`

`template<class T> class Base : public Singleton<T>;`

`class Sub : public Base<Sub>;`

# c++ - 使用 std::list 的段错误

> ID：15289662
> 
> 赞同：0
> 
> 时间：2013-03-08T08:29:21.100
> 
> 标签：c++, list, segmentation-fault, push-back

我是使用 C++ 的 Java 用户，我很难理解这句话出了什么问题。我的程序在我放置`push_back`命令的任何地方都出现了段错误。所以我想知道到底发生了什么。

```
class Process {
  public:
    int nice;
    int arrivalTime;
    int cpuBursts;
    list<int> burstList;

    Process() {
      burstList.push_back(10); // Segfaults here...
   }  
}; 
```

这是完整的代码：

```
#include<iostream>
#include<stdlib.h>
#include<fstream>
#include<list>
#include<string.h>

using namespace std;

int calcTimeslice(int priority);
int calcOriginalPrio(int nice);
int readFile(int ,char **);
int calcPrioBonus(int,int);
void tokenizeAndAdd(char *);

class Bursts {
  public:
    int isCPUBurst;
    int time;

    Bursts() {}
    // Constructor to make it easier to add to list
    Bursts(int tempIsCPU, int tempTime) {
      isCPUBurst = tempIsCPU;
      time = tempTime;
    }

};

class Process {
  public:
    int nice;
    int arrivalTime;
    int cpuBursts;
    list<int> burstList;

    Process() {
      burstList.push_back(10);
   }
};

int main(int arg, char **argv) {

  // This is if the file was not correctly read into the program
  // or it doesnt exist ...
  if(readFile(arg,argv)==-1) {
    cout << "File could not be read. \n";
    return -1;
  }
  //cout << "Original Calc Whatever: " << calcOriginal(19) << '\n';
  return 0;

}

/*
 *  Calculates the timeslice based on the priority
 */
int calcTimeslice(int priority) {
  double finalCalc;

  // This is the given function in the prompt
  finalCalc = ( (1 - (priority / 140)) * 290 + (.5) ) + 10;

  // Cast to int, this will be a truncate
  return ((int)finalCalc);
}

int readFile(int arg, char **argv) { 
  char *temp,*pointer;
  int endOfFile = 1;

  // While its not the end of the file
  while(endOfFile) {
    // Read in the input from stdin
    fgets(temp,256,stdin);

    // Check to see if this line had a * in it
    if(*temp =='*')
      endOfFile = 0;
    else
      tokenizeAndAdd(temp);
  }

  return 0; 

}

void tokenizeAndAdd(char *string) {
  char *token = strtok(string," \n"); 
  int i = 0;
  Process p;

  while(token != NULL) {
    cout << token << endl;
    if(i>2) {  // If it is odd (CPU burst)
      if(i%2 == 1) {
        int tempInt = atoi(token);
        //p.burstList.push_back(tempInt); 
      }
      else { // If it is even (IO burst)
        int tempInt = atoi(token);
        //p.burstLis.push_back(tempInt); 
      }      
    }
    else if(i==0)
      p.nice = atoi(token);
    else if(i==1)
      p.arrivalTime = atoi(token);
    else if(i==2)
      p.cpuBursts = atoi(token);

    token = strtok(NULL," \n");
    i++;
  }

  //cout << p.nice << " " << p.arrivalTime << " " << p.cpuBursts << "\n";
  //i = 0;
  //cout << p.burstList.size() << "\n";
  //  cout << 
  //}
  return;
}

/*
 *  Calculates and returns the original priority based on the nice number
 *    provided in the file.
 */
int calcOriginalPrio(int nice) {
  double finalCalc;

  // This is the given function from the prompt
  finalCalc = (( nice + 20 ) / 39 ) * 30 + 105.5;

  // Cast to int, this is a truncate in C++
  return ((int)finalCalc);
}

/* 
 * Calculates the bonus time given to a process
 */
int calcPrioBonus(int totalCPU, int totalIO) {
  double finalCalc;

  // How to calculate bonus off of the prompt
  if(totalCPU < totalIO)
    finalCalc = ( (1 - (totalCPU / (double)totalIO)) * (-5)) - .5;
  else
    finalCalc = ( (1 - (totalIO / (double)totalCPU)) * 5) + .5;

  // Cast to int
  return ((int)finalCalc);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:42:14.647

您`temp`在以下代码中使用未初始化：

```
char *temp;
...
while(endOfFile) {
  fgets(temp,256,stdin);
  ... 
```

这可能会产生任何副作用，因为它很可能会破坏您的堆栈或部分堆内存。它可能会立即失败（调用`fgets()`函数时），它可能会在稍后失败（如您的示例中），甚至可能运行良好 - 可能直到您升级操作系统、编译器或其他任何东西，或者直到您想要运行相同的可执行文件在另一台机器上。这称为**未定义行为**。

您需要为`temp`变量分配空间，而不仅仅是指针。使用类似的东西

```
char temp[256];
...
while(endOfFile) {
  fgets(temp,256,stdin);
  ... 
```

有关详细信息，请参阅[`fgets()`](http://www.cplusplus.com/reference/cstdio/fgets/)文档。第一个参数是一个指向 char 数组的指针 - 这是`fgets()`存储已读取字节的位置。在您的代码中，您传递了一个未初始化的指针，这意味着`fgets()`它将把字节存储到一个未定义的内存位置——这被操作系统捕获，它以分段错误终止您的应用程序。

* * *

顺便说一句：您应该在编译时考虑启用迂腐警告 - 我编译时使用

```
g++ -Wall -pedantic -o list list.cpp 
```

这给了我以下警告：

```
list.cpp: In function 'int readFile(int, char**)':
list.cpp:76:26: warning: 'temp' may be used uninitialized in this function [-Wuninitialized] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:44:13.370

这可能不是您报告的错误的实际代码。但这是给你 UB 的问题之一。

```
 char *temp,*pointer; // uninicialized pointer  char temp[1000]; could work?
  int endOfFile = 1;

  // While its not the end of the file
  while(endOfFile) {
    // Read in the input from stdin
    fgets(temp,256,stdin); 
```

最后一个函数调用将从标准输入读取最多 256 个字节，并将其写入指针 tmp 指向的内存中。因此，您需要首先“准备”该内存。但是用 char *tmp; 您只定义一个没有定义值的指针，即指向一些可能不存在或非法/不可访问的内存。相反，char tmp[1000]; 将在“堆栈内存”中定义一个 1000 字节的块，您可以使用简单的变量 tmp 来指向。希望这对你来说很清楚。
编辑：

```
I don't know why that would change the behavior of the list, 
```

你说的对。那是未定义的行为（UB）。当您写入一些未知内存（由未初始化的指针指向）时，您可能会覆盖数据甚至代码，这些数据甚至会以无法预料的方式破坏程序的正确功能。您将需要了解有关指针的更多信息，但最好使用 std::string，并查看如何使用 string 和[stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)解析文件。这将为你管理记忆，

# typescript - 无效分配缺少 TSC 警告

> ID：15289663
> 
> 赞同：4
> 
> 时间：2013-03-08T08:29:40.937
> 
> 标签：typescript, tsc

我正在尝试为[node-serialport](https://github.com/voodootikigod/node-serialport)库编写一个 TypeScript 类型定义文件。该库导出`parsers`具有两个函数的变量，`raw`并且`readline`. 后者不能直接用作解析器——它在调用时会产生一个解析器。这是我第一次尝试类型定义文件的片段：

```
/// <reference path="./node.d.ts" />
declare module "serialport" {

    import events = module("events");
    export interface ParserFunc {
        (eventEmitter: events.NodeEventEmitter, buffer: NodeBuffer): void;
    }

    interface Parsers {
        raw: ParserFunc;
        readline(delimiter?: string): ParserFunc;
    }

    export var parsers: Parsers;
} 
```

我遇到的问题是，如果我分配`parsers.readline`给类型变量，tsc 不会发出警告`ParserFunc`。为了说明，请考虑以下 TypeScript 文件：

```
import sp = module("serialport");

var a: number = sp.parsers.raw; // not ok
var b: number = sp.parsers.readline; // not ok
var c: sp.ParserFunc = sp.parsers.raw; // ok!
var d: sp.ParserFunc = sp.parsers.readline; // not ok 
```

当我使用 tsc 编译/转译这个文件时，我得到：

```
test1.ts(3,16): Cannot convert 'sp.ParserFunc' to 'number'
test1.ts(4,16): Cannot convert '(delimiter?: string) => sp.ParserFunc' to 'number' 
```

但是没有警告分配给`d`！如果我通过删除所需的`delimiter`参数，我得到：`readline``?`

```
test1.ts(3,16): Cannot convert 'sp.ParserFunc' to 'number'
test1.ts(4,16): Cannot convert '(delimiter: string) => sp.ParserFunc' to 'number'
test1.ts(6,23): Cannot convert '(delimiter: string) => sp.ParserFunc' to 'sp.ParserFunc': Call signatures of types '(delimiter: string) => ParserFunc' and 'ParserFunc' are incompatible:
    Type 'String' is missing property 'addListener' from type 'NodeEventEmitter' 
```

所以现在它检测到分配`d`无效。但为什么不是以前呢？

这是我第一次接触 TypeScript，所以请温柔一点。谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:30:37.333

这对我来说确实像一个错误。看起来编译器假设您在调用该函数，而实际上您没有调用该函数。

我可以使用简化的示例重新创建它：

```
declare module serialport {

    export interface ParserFunc {
        (eventEmitter: number, buffer: string): void;
    }

    interface Parsers {
        raw: ParserFunc;
        readline(delimiter?: string): ParserFunc;
    }

    export var parsers: Parsers;
}

var c: serialport.ParserFunc = serialport.parsers.raw; // ok!
var d: serialport.ParserFunc = serialport.parsers.readline; // not ok 
```

因此，如果实际调用了 readline，这将是有效的 - 但实际上 readline 正在被传递而没有被调用，因此它应该显示错误。

您可以在[TypeScript Codeplex 网站](http://typescript.codeplex.com/)上提出错误。

# angularjs - 指令如何通过控制器进行通信？

> ID：15289670
> 
> 赞同：18
> 
> 时间：2013-03-08T08:29:54.167
> 
> 标签：angularjs, angularjs-directive

在本文档：[http](http://docs.angularjs.org/guide/directive) ://docs.angularjs.org/guide/directive中，它说指令可以通过控制器相互通信。

> **控制器**- 控制器构造函数。控制器在预链接阶段之前被实例化，如果它们按名称请求它，它会与其他指令共享（参见 require 属性）。**这允许指令相互通信并增强彼此的行为。**

我不太明白，他们是如何与控制器通信的？是否有任何示例或演示？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-08T09:00:54.453

也许您将在路由更改发生时创建的控制器与指令控制器混淆了。该部分仅讨论指令控制器，因此该部分的意思是，如果您在同一个 HTML 元素上有两个指令，它们可以通过要求彼此的控制器进行通信。

一个很好的例子是，如果您创建一个需要与`ng-model`. 由于`ng-model`公开了一个控制器，您可以像这样要求它：

```
myApp.directive('myDirective', function() {
    return {
        require: 'ngModel',
        link: function($scope, elem, attrs, ngModelCtrl) {
            // Here you can listen to different DOM events, and
            // call ngModelCtrl when the model value needs to update
        }
    }
}); 
```

和 HTML：

```
<input type="text" ng-model="myModel" my-directive> 
```

您的指令可以通过在指令函数返回的对象中实现控制器来公开控制器，如下所示：

```
myApp.directive('myDirective1', function() {
    return {
        link: function($scope, elem, attrs) {

        },
        controller: function() {
            this.sayHello = function() {
                alert("hello!");
            }
        }
    }
});

myApp.directive('myDirective2', function() {
    return {
        require: 'myDirective1',
        link: function($scope, elem, attrs, myDirective1Ctrl) {
            myDirective1Ctrl.sayHello();
        }
    }
}); 
```

和 HTML：

```
<input type="text" my-directive2 my-directive1> 
```

您还可以通过编写来要求父指令中的指令控制器`require: '^myParentDirective'`，如下所示：

```
myApp.directive('myDirective1', function() {
    return {
        link: function($scope, elem, attrs) {

        },
        controller: function() {
            this.sayHello = function() {
                alert("hello!");
            }
        }
    }
});

myApp.directive('myDirective2', function() {
    return {
        require: '^myDirective1',
        link: function($scope, elem, attrs, myDirective1Ctrl) {
            myDirective1Ctrl.sayHello();
        }
    }
}); 
```

和 HTML：

```
<div my-directive1>
    <div my-directive2></div>
</div> 
```

# c# - 根据当前用户 id 接收实体

> ID：15289671
> 
> 赞同：0
> 
> 时间：2013-03-08T08:29:54.637
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-4

```
public ActionResult Index()
{
      var user = db.UserProfiles.FirstOrDefault(x => x.UserId == WebSecurity.CurrentUserId);
      var allCategories = db.ProfitCategories
          .Where(x => x.IdUser.UserId==user) 
```

我希望我的索引视图只显示当前用户写入的记录。我从这里得到当前的用户 ID

```
var user = db.UserProfiles.FirstOrDefault(x => x.UserId == WebSecurity.CurrentUserId); 
```

并且 `x.IdUser.UserId`是从`db.ProfitCategories`to的外键`db.UserProfiles`。编译时出现以下错误：无法应用运算符`==`类型 `int`和 `Models.UserProfiles`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:32:28.537

也许你应该尝试：

```
 public ActionResult Index()
 {
       var user = db.UserProfiles.FirstOrDefault(x => x.UserId == WebSecurity.CurrentUserId);
       var allCategories = db.ProfitCategories
           .Where(x => x.IdUser.UserId==user.UserId) 
```

您需要根据 UserId 而不是类检查 UserId。

**编辑**

我认为您根本不需要获取用户：

```
public ActionResult Index()
{
   var allCategories = db.ProfitCategories
       .Where(x => x.IdUser.UserId==WebSecurity.CurrentUserId) 
```

由于您已经保存了用户 ID，因此`WebSecurity.CurrentUserId`您不需要从数据库接收用户（至少不需要获取其 ID）。当然，如果您需要它来执行其他操作（我不知道，因为您提供了一段代码），请随时接收用户 :)

# php - tableselect drupal 7中的空记录

> ID：15289672
> 
> 赞同：0
> 
> 时间：2013-03-08T08:29:57.010
> 
> 标签：php, drupal

嗨，我正在创建一个类似于 drupal 7 中的用户表的 tableselect。我在屏幕上显示“没有可用的插件”的空消息。即使正在数组中获取记录。这是我的代码

```
function massignite_menu() {
$items = array();
$items['massig/manage'] = array(
'page callback' => 'massignite_selector',
'file' => 'manage.inc',
'access arguments' => array('access content'),
'type' => MENU_CALLBACK,
);
return $items;
}

function massignite_selector() {
include('massrpc.php');
$header = array(
'plugin' => t('Plugin'),
'status' => t('Status'),
);

$params = array(
'username' => "foo",
'password' => "bar",
);
$pluginsRecords = xmlGetPlugins($params);
foreach ($pluginsRecords as $key=>$plugin) {
 $options[$key] = array(
  'plugin' => $plugin['Name'],
  'status' =>  $plugin['is_active']?'Activated':'Deactivated',
);
}
$form['table'] = array(
'#type' => 'tableselect',
'#header' => $header,
'#options' => $options,
'#empty' => t('No plugins available.'),
'#multiple' => TRUE,
);
$form['submit'] = array(
'#type' => 'submit',
'#value' => t('Activate'),
);
$form['pager'] = array('#markup' => theme('pager'));
return $form;

} 
```

我按照[这里](http://www.jaypan.com/tutorial/themeing-drupal-7-forms-tables-checkboxes-or-radios)给出的教程进行操作。任何帮助将不胜感激

编辑： - 解决了它！显然，我通过 menu_hook 错误地调用了我的函数。正确的做法是这样的。

```
function massignite_menu() {
$items = array();
$items['massig/manage'] = array(
'title' => 'Plugins',
'page callback' => 'drupal_get_form',                             
'page arguments' => array('massignite_table_form'),
'file' => 'manage.inc',
'access arguments' => array('access content'),
'type' => MENU_CALLBACK,
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T09:27:08.083

您需要使用 hook_formID_form 在您的自定义模块中制作一个真实的表单，

看这个[教程](https://drupal.org/node/1419390)

# ruby-on-rails - 在参数修复中使用 & 的 rails redirect_to

> ID：15289673
> 
> 赞同：0
> 
> 时间：2013-03-08T08:30:07.490
> 
> 标签：ruby-on-rails, url, redirect, url-encoding

我在我的一个参数中有 &：重定向操作：

```
format.html {redirect_to :action => 'index',:flag => params[:flag], :tip_type => params[:tip_type], :tip_topic_name => params[:tip_topic_name]} 
```

输出：

```
Started GET "/admin/answer_reviews?flag=tip_filter&tip_topic_name=Flu+&+Cold&tip_type=Haiku" for 127.0.0.1 at 2013-03-08 13:53:38 +0530
Processing by Admin::AnswerReviewsController#index as HTML
Parameters: {"flag"=>"tip_filter", "tip_topic_name"=>"Flu ", " Cold"=>nil, "tip_type"=>"Haiku"} 
```

但我希望它是：

```
Parameters: {"flag"=>"tip_filter", "tip_topic_name"=>"Flu & Cold", "tip_type"=>"Haiku"} 
```

我也试过：

```
format.html {redirect_to :action => 'index',:flag => params[:flag], :tip_type => Rack::Utils.escape(params[:tip_type]), :tip_topic_name => Rack::Utils.escape(params[:tip_topic_name])} 
```

但它导致：

```
Started GET "/admin/answer_reviews?flag=tip_filter&tip_topic_name=Flu+%2526+Cold&tip_type=Do%2527s+And+Don%2527ts" for 127.0.0.1 at 2013-03-08 14:01:37 +0530
Processing by Admin::AnswerReviewsController#index as HTML
Parameters: {"flag"=>"tip_filter", "tip_topic_name"=>"Flu %26 Cold", "tip_type"=>"Do%27s And Don%27ts"} 
```

我可以在重定向之前使用 '$' gsub '&'，然后在重定向操作中再次使用 '&' 使用 '$'，但是必须有一些不那么老套的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:42:27.520

你能试试这个：

```
:tip_topic_name => raw(params[:tip_topic_name]) 
```

**编辑：**

在得到反馈和我在下面的评论之后，我认为你应该采用你的方法

```
format.html {redirect_to :action => 'index',:flag => params[:flag], :tip_type => Rack::Utils.escape(params[:tip_type]), :tip_topic_name => Rack::Utils.escape(params[:tip_topic_name])} 
```

然后在返回到带有 html_safe 的控制器时解析字符串`"Flu %26 Cold"`，但在此之前检查它是否不是 nul

您可以在 before_filter 中执行此操作，例如，仅用于索引页面

**编辑2：**

返回参数时如何对字符串进行转义。它不会那么hacky。

```
Rack::Utils.unescape 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:53:52.913

虽然使用 get 请求而不是 post 不是一个好习惯，但根据您的要求，只有一种 hack 方法可以转义特殊字符，如下所示：

```
require 'uri'
tip_topic_name= URI.escape(tip_topic_name)
url = "http://myurl.com/#{tip_topic_name}"
result = open(url).read 
```

还要检查具有转义表示的[文档。](http://rdoc.info/stdlib/uri/1.9.2/URI/Escape%3aescape)

# c# - RadGrid 内的组合框

> ID：15289675
> 
> 赞同：2
> 
> 时间：2013-03-08T08:30:15.287
> 
> 标签：c#, asp.net, telerik, radgrid

在插入/更新我的网格时，我正在努力在我的 RadGrid 中添加一个 ComboBox。因此，当我的网格进入编辑模式时，我希望显示一个 ComboBox。

这是我的 aspx 页面：

```
<telerik:radgrid id="radManageMembers" runat="server" cssclass="GridView" width="96%"
    autogeneratecolumns="true" onUpdateCommand="radManageMembers_UpdateCommand" Skin="WebBlue"
    onNeedDataSource="radManageMembers_NeedDataSource" OnDeleteCommand="radManageMembers_DeleteCommand"
    OnInsertCommand="radManageMembers_InsertCommand" OnItemCreated="radManageMembers_ItemCreated" OnItemCommand="radManageMembers_ItemCommand">
    <MasterTableView EditMode="InPlace" AutoGenerateColumns="false"
        TableLayout="Fixed" DataKeyNames="MemberID" CommandItemDisplay="TopAndBottom" Skin="WebBlue">
        <Columns>

            <telerik:GridBoundColumn DataField="MemberID" Display="false">
            </telerik:GridBoundColumn>

            <telerik:GridButtonColumn UniqueName="DeleteColumn" CommandName="Delete" ButtonType="PushButton" Text="Delete">
            </telerik:GridButtonColumn>

            <telerik:GridBoundColumn DataField="MemberName" UniqueName="MemberName" HeaderText="MemberName">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="FirstName" UniqueName="FirstName" HeaderText="FirstName">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="LastName" UniqueName="LastName" HeaderText="LastName" >
            </telerik:GridBoundColumn>                
            <telerik:GridBoundColumn DataField="Title" UniqueName="Title" HeaderText="Title">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="AdditionalNumber" UniqueName="AdditionalNumber" HeaderText="AdditionalNumber">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Telephone" UniqueName="Telephone" HeaderText="Telephone">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="IDNumber" UniqueName="IDNumber" HeaderText="IDNumber">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="BusinessName" UniqueName="BusinessName" HeaderText="BusinessName">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Email" UniqueName="Email" HeaderText="Email">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="LanguageCode" UniqueName="LanguageCode" HeaderText="LanguageCode">
            </telerik:GridBoundColumn>     

            <telerik:GridEditCommandColumn ButtonType="PushButton" UniqueName="EditCommandColumn">
                <HeaderStyle Width="85px"></HeaderStyle>
            </telerik:GridEditCommandColumn>

        </Columns>
            <EditFormSettings CaptionFormatString="Edit details for employee with ID {0}" CaptionDataField="EmployeeID">
            <FormTableItemStyle Width="100%" Height="29px"></FormTableItemStyle>
            <FormTableStyle GridLines="None" CellSpacing="0" CellPadding="2"></FormTableStyle>
            <FormStyle Width="100%"></FormStyle>
            <EditColumn ButtonType="ImageButton">
            </EditColumn>
        </EditFormSettings>
    </MasterTableView>
    <ClientSettings>
        <ClientEvents OnRowDblClick="RowDblClick"></ClientEvents>
    </ClientSettings> 
```

我知道您必须使用 ItemCreated 事件，但我无法让它完全正常工作。

这就是我在 ItemCreate 中的内容，但这段代码不起作用：

```
if (e.Item.OwnerTableView.IsItemInserted && e.Item is GridCommandItem)
{
      GridCommandItem insertItem = (GridCommandItem)e.Item;
      RadComboBox combo = (RadComboBox)insertItem.FindControl("Title");
} 
```

我看过这里的例子 - [http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/editmodes/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/editmodes/defaultcs.aspx)

但是这个 ComboBox 并没有从数据库中填充不同的值，似乎有重复项，我觉得在 ComboBox 中毫无意义。

我愿意看看是否有其他方法可以做到这一点或解决这个问题的正确方法。

**编辑**

ComboBox 的值来自数据库，并且所有值都是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T06:17:32.947

在您的代码中，您没有添加 Combobox。所以请在 EditItemTemplate 中添加组合框并尝试以下代码来访问组合框

```
protected void grid1_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
    {
       if (e.Item is GridEditableItem && e.Item.IsInEditMode)
       {
            GridEditableItem item = (GridEditableItem)e.Item;
            RadComboBox combo = ((RadComboBox)item.FindControl("RadComboBoxValore"));
            combo.DataSource = SqlDataSource2;
            combo.DataValueField = "EmployeeID";
            combo.DataTextField = "EmployeeID";
            combo.DataBind();   
        }
    } 
```

或添加**GridDropDownColumn**

# c++ - 在编译时计算第 n 个素数

> ID：15289678
> 
> 赞同：6
> 
> 时间：2013-03-08T08:30:20.487
> 
> 标签：c++, c++11, template-meta-programming, compile-time, constexpr

在我看来，C++11 特性`constexpr`以及模板参数包应该足够强大，可以执行一些相当复杂的计算。我有一个实际应用的一个可能示例是在编译时计算第 n 个素数。

**我正在寻求实现这种计算的方法。**如果提出了多个解决方案，比较它们可能会很有趣。

为了让您了解我的性能期望：我希望在合理的桌面硬件上，一些代码可以在不到一秒的编译时间内找到第 512 个素数（即 3671）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T21:50:08.383

我实现了最简单的方法，根本不使用模板，它可以工作：

```
constexpr bool isPrimeLoop(int i, int k) {
    return (k*k > i)?true:(i%k == 0)?false:isPrimeLoop(i, k + 1);
}

constexpr bool isPrime(int i) {
    return isPrimeLoop(i, 2);
}

constexpr int nextPrime(int k) {
    return isPrime(k)?k:nextPrime(k + 1);
}

constexpr int getPrimeLoop(int i, int k) {
// i - nr of primes to advance
// k - some starting prime
    return (i == 0)?k:getPrimeLoop(i - 1, nextPrime(k + 1));
}

constexpr int getPrime(int i) {
    return getPrimeLoop(i, 2);
}

static_assert(getPrime(511) == 3671, "computed incorrectly"); 
```

它需要增加 constexpr-depth 一点，但它很容易适应时间：

```
$ time g++ -c -std=c++11 vec.cpp -fconstexpr-depth=600

real    0m0.093s
user    0m0.080s
sys 0m0.008s 
```

以下技巧将`getPrimeLoop`递归深度减少到对数，因此 g++ 可以使用默认深度完成（没有可测量的时间损失）：

```
constexpr int getPrimeLoop(int i, int k) {
    return (i == 0)?k:
        (i % 2)?getPrimeLoop(i-1, nextPrime(k + 1)):
        getPrimeLoop(i/2, getPrimeLoop(i/2, k));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T20:12:25.643

我怀疑您的 1 秒目标是否在任何没有安全防护的硬件的范围内。但是我相信以下元程序可以关闭它很多：

```
#include <type_traits>

template<unsigned N>
using boolean = std::integral_constant<bool,N>;

template<unsigned N>
constexpr bool is_co_prime()
{
    return true;
};

template<unsigned N, unsigned D>
constexpr bool is_co_prime()
{
    return N % D != 0;
};

template<unsigned N, unsigned D0, unsigned D1, unsigned ...Di>
constexpr bool is_co_prime()
{
    typedef typename std::conditional<
        is_co_prime<N,D1>(),
        typename std::conditional<
            is_co_prime<N,Di...>(),
            boolean<is_co_prime<N,D0>()>,
            std::false_type
        >::type,
        std::false_type
    >::type type;
    return type::value;
};

template<unsigned N>
constexpr unsigned inc()
{
    return N == 2 ? 3 : N + 2;
}

template<unsigned Counter, unsigned Candidate, unsigned ...Primes>
struct nth_prime;

template<unsigned Candidate, unsigned Prime, unsigned ...Primes>
struct nth_prime<0,Candidate,Prime,Primes...>
{
    static const unsigned value = Prime;
};

template<unsigned Counter, unsigned Candidate = 2, unsigned ...Primes>
struct nth_prime
{
    typedef typename std::conditional<
        is_co_prime<Candidate,Primes...>(),
        nth_prime<Counter - 1,inc<Candidate>(),Candidate,Primes...>,
        nth_prime<Counter,inc<Candidate>(),Primes...>
    >::type type;
    static const unsigned value = type::value;
};

#include <iostream>

using namespace std;

int main()
{
    cout << nth_prime<512>::value << endl;
    return 0;
} 
```

我将把这个元程序*称为 MyNthPrime*并将你的一个*称为 YourNthPrime*。

你的硬件似乎比我的要重得多，当然内存也更多。我有一个常规的联想 ThinkPad T420，4 核 i5，8GB RAM，8GB 交换，运行 Linux Mint 14，内核 3.5.0。你报告它需要你 3 分钟。构建您的*YourNthPrime*。按`time`命令测量，我需要 35 分钟。构建*YourNthPrime*，除了终端和系统监视器之外没有运行任何应用程序。

编译器是 GCC 4.7.2，命令行选项是：

```
-Wall -O0 -std=c++11 -ftemplate-depth=1200 
```

经过的时间分解为：

```
real    34m2.534s
user    3m40.414s
sys     0m33.450s 
```

构建*MyNthPrime*需要 1.5 分钟，其中：

```
-Wall -O0 -std=c++11 -ftemplate-depth=2100 
```

并且经过的时间分解为：

```
real    1m27.832s
user    1m22.205s
sys     0m2.612s 
```

这`-ftemplate-depth=2100`不是换位错字。很快就会有更多。

*MyNthPrime*并不比*YourNthPrime*快 23 倍。分解的时间表明*MyNthPrime*在用户时间上实际上是*YourNthPrime*的 2.75 倍左右。但它们也表明*YourNthPrime*的构建确实实时丢失了农场。它为它存在的 9/10 的无结果做了什么？交换，当然。

两种构建都在 45 秒内嘲笑了我 8GB 系统 RAM 的 95%，但*MyNthPrime* 在那里达到顶峰并且没有交换。*YourNthPrime*继续占用高达 3.9GB 的交换空间，而在那之前，我所有的 CPU 都在打瞌睡。

*当您考虑到MyNthPrime* 需要两倍于`-ftemplate-depth`YourNthPrime*的*事实时，这一点是值得注意的。民间智慧是，奢侈`-ftemplate-depth`是元程序构建时间的毁灭之路，因为它等同于奢侈的内存消耗，它只需要滑入大量交换并且你正在看着油漆干涸。但是*YourNthPrime*和*MyNthPrime*的决胜并没有证明这一点 - 恰恰相反。我得到的教训是，你必须实例化递归模板的*深度*并不总是一个很好的*数量衡量标准*你必须做的模板实例化，它的数量对你的内存资源很重要。

虽然它们看起来并不相似，*但 MyNthPrime*和*YourNthPrime*都实现了质数生成的试除算法。*MyNthPrime* 的速度要快得多，仅仅是因为它的编码更加精明，可以节省递归模板实例化以及它们吞噬的内存。

*YourNthPrime*为计算提供 4 个递归模板，*都使用相同的递归可变参数模板参数列表*。 *MyNthPrime*字段 2：它只是为编译器提供了大约一半的巨大实例化。

*YourNthPrime*（正如我所读的那样）感知到按手头素数升序进行试除的潜在效率 - 因为成功除法的机会向较小的素数增加；一旦手中的素数超过被除数的 1/2，机会为 0。首先击中最有可能的除数，然后优化快速判断和退出的前景。但是利用这种效率的一个障碍是，手头的素数由可变参数模板参数列表表示，*最大*的 总是在它的头部。为了克服这个障碍， *YourNthPrime*部署了递归可变参数模板函数`lastArg<>()`，有效地反转了手头素数在除法中的消耗顺序。

`lastArg<>()`将手中的素数呈现给模板函数：

```
template<unsigned i, unsigned head, unsigned... tail>
constexpr bool isPrime() {
    return i % head && isPrime<i, tail...>();
} 
```

按升序对下一个候选`i` 除以素数进行递归试除`head, tail...`。在这里，我认为你希望`lastArg<>()` 通过确保`head`他永远是让你摆脱代价高昂的右手边的下一个最佳前景来付出代价`&&`。

但要实现这一点，`lastArg<>()`它本身会在每次调用时递归遍历手头的整个素数列表，甚至在您有机会对`i`. `isPrime<>()` 因此，只需要尽可能地遍历手头的素数，进行测试`i`，省去`lastArg<>()`并保存其所有递归实例，就会更便宜。

`isPrime<>()`在*YourNthPrime*中完成的工作- 递归试验部门 - 在*MyNthPrime*中由以下人员完成：

```
template<unsigned N, unsigned D0, unsigned D1, unsigned ...Di>
constexpr bool is_co_prime()
{
    typedef typename std::conditional<
        is_co_prime<N,D1>(),
        typename std::conditional<
            is_co_prime<N,Di...>(),
            boolean<is_co_prime<N,D0>()>,
            std::false_type
        >::type,
        std::false_type
    >::type type;
    return type::value;
}; 
```

`is_co_prime<>()`需要 10 行来完成`is_prime<>()`一项工作，我也可以在一行中完成：

```
return is_co_prime<N,D0>() && is_co_prime<N,D1,Di...>(); 
```

可能是函数的主体。但是在这里，丑陋的东西在效率上胜过漂亮的东西。每次`is_prime<>()`都必须递归到尾部，该尾部仅比以前短一个素数。每次 `is_co_prime<>()`都必须做同样的事情，尾巴比以前短了*两个素数。*它的尾递归在最坏的情况下比那些更浅，`is_prime<>()`并且只有一半。

`is_co_prime<>()`将候选数除以`N`任何一对可用除数的右手边（最小和最可能的）*first*，并在成功时返回无素数；否则递归到仍然在该对右侧的任何除数，并继续对下一个除数进行尝试除法，直到成功或用尽。只有在用尽时，它才会诉诸原始对中较大的除数 - 它尝试过的任何除数中最不可能的除数。同样，在每个中间较小的递归中，最不可能的除数最后被尝试。

尽管可以看到该算法可以快速找到 的较小和更可能的除数`N`，但仍然会坚持首先直接找到其中最小的除数，并按照真实的降序尝试它们`lastArg<>()`。我们必须通过认识到任何“直接到最小”的方式，当它位于列表的尾部时，将是一个元函数，它必须在我们开始之前在整个列表上递归。与审判部门。的实施`is_co_prime<>()`使我们在“一次两步”的情况下进行试验划分。

诚然，有时它会不幸地“越过”`N` 第一次的最大除数，然后不会再次找到它，除非它触底并在列表中向后递归。但是一旦`N`大到足以让它变得重要，在右边大部分将至少有一个更小的除数，错过所有这些真的很不幸。因此，在下降过程中跳过最大的风险没什么大不了的。 还要记住，在我们到达终点之前，在下降的过程中不会有*任何除数。*`N/2`这意味着通过在向下的过程中跳过一些唯一除数来浪费递归的最坏情况`N`仅限于从该点开始的列表尾部。

您推测 Sieve of Erathothenes 元程序可能编译得更快，您是对的。作为素数生成器，Sieve 比 Trial Division 具有更好的理论复杂性。[Peter Simons](http://cryp.to/)的 一个优雅的模板元程序实现[在这里](http://cryp.to/prime-sieve/)，可以追溯到 2006 年或更早。（正如 Peter Wood 评论的那样，一个非终止的 Erathothenes 元程序筛子爆料说 C++ 模板系统是图灵完备的。）有了 C++11 设施，Simons 的元程序可以大大简化，但我不知道。 t认为变得更有效率。就目前而言，Simons Sieve 可以在编译时在 9 秒内生成直到第 512 个素数的所有素数。在我的 ThinkPad 上。它需要`-ftemplate-depth=4000`或者差不多要这样做，但只有大约 0.5GB 的内存 - 一个更引人注目的反例，与大模板深度 == 大内存使用的民间智慧相比。

因此，埃拉托色尼的筛子让审判部门在尘埃中挣扎。可悲的是，为了您的锻炼目的，Sieve 没有用。它被称为*筛子*，因为我们必须输入一个整数上限`U`，它会从 2 和 之间的合数中筛出`U`，留下素数。因此，要将其应用于准确地找到第 N 个素数 =`Pn`而不可能是其他任何素数，无论如何您必须`Pn`以其他方式计算，给 Sieve 一个上限`Pn + 1`（或`Pn + 2`, for `Pn > 2`），然后丢弃所有`Pi, 2 <= Pi < Pn`返回给您的 ,并只保留`Pn`你已经计算过的。这是一个无操作。

一些评论者指出，您可能通过编译时元编程生成的任何第 N 个素数的身份都将是预先知道的，或者可以通过更简单和更快的方式预先计算。我不能不同意，但我支持您的一般观点，即使用 C++11 工具，TMP 朝着非常值得探索的实际实用程序迈出了一大步 - 更何况现在需要一分钟的时间来编译十年内的第二次。

同时，即使不离开我们极其复杂的 C++ 编译器，面对这样的 TMP 问题，我们仍然可以体验到对早期计算机进行编程的本质，其时钟速度和内存在 K 中，采用紧密建模的“语言”——但在神秘的约束范围内！- 关于经典递归函数理论。这就是为什么你真的要爱他们！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:51:05.050

我自己尝试过，并编写了以下实现：

```
template<unsigned... args> constexpr unsigned countArgs();
template<> constexpr unsigned countArgs() { return 0; }
template<unsigned head, unsigned... tail>
constexpr unsigned countArgs() { return 1 + countArgs<tail...>(); }

template<unsigned last>
constexpr unsigned lastArg() { return last; }
template<unsigned head, unsigned next, unsigned... tail>
constexpr unsigned lastArg() { return lastArg<next, tail...>(); }

template<unsigned i> constexpr bool isPrime() { return true; }
template<unsigned i, unsigned head, unsigned... tail>
constexpr bool isPrime()
{ return i % head && isPrime<i, tail...>(); }

template<bool found, unsigned i, unsigned... primesSoFar> struct nextPrime
{ static constexpr unsigned val =
    nextPrime<isPrime<i + 2, primesSoFar...>(), i + 2, primesSoFar...>::val; };
template<unsigned i, unsigned... primesSoFar> struct
nextPrime<true, i, primesSoFar...> { static constexpr unsigned val = i; };

template<unsigned n, unsigned... primesSoFar> struct nthPrimeImpl
{ static constexpr unsigned val = nthPrimeImpl<n - 1, primesSoFar...,
    nextPrime<false, lastArg<primesSoFar...>(), primesSoFar...>::val>::val; };
template<unsigned... primesSoFar> struct nthPrimeImpl<0, primesSoFar...>
{ static constexpr unsigned val = lastArg<primesSoFar...>(); };

template<unsigned n>
constexpr unsigned nthPrime() {
  return n == 1 ? 2 : nthPrimeImpl<n - 2, 3>::val;
}

constexpr unsigned p512 = nthPrime<512>();
static_assert(p512 == 3671, "computed incorrectly"); 
```

这需要将最大模板深度`gcc`增加到超过默认值 900（在我的 gcc 4.7.2 中），例如通过传递`-ftemplate-depth=1200`. 而且*太慢了*：在我的硬件上大约需要 3*分钟。*所以我非常希望在不同的答案中有一些更有效的代码。

在计算方法方面，上面做了类似[试验除法](http://en.wikipedia.org/wiki/Trial_division)的事情。[Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)的筛子可能会表现得更好，但到目前为止，我想不出一种方法来以与 constexpr 兼容的方式编写它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T22:50:26.720

[Mike Kinghan](https://stackoverflow.com/a/15454201/1468366)的回答让我按照我以前从未想过的思路思考。如果模板实例化是一个导致如此严重的内存消耗的问题，我们该如何减少呢？我最终想出了一个方案，在这个方案中，我使用了一系列类型，每个类型都引用了之前的类型，而不是迄今为止找到的所有素数的参数包，以及这些类型中的静态函数链，这些类型可以使用类型中的那些前。

我将在下面粘贴的结果仍然比[zch 建议的](https://stackoverflow.com/a/15455090/1468366)要慢很多，但我发现它很有趣，可以分享，因为它可能是其他应用程序的有用方法。

```
template<unsigned N> struct NthPrime {
  typedef NthPrime<N - 1> previous;
  static constexpr unsigned prime = previous::nextPrime();
  static constexpr unsigned nextPrime() { return nextCoprime(prime + 2); }
  static constexpr unsigned nextCoprime(unsigned x) {
    // x is a candidate. We recurse to obtain a number which is
    // coprime to all smaller primes, then check that value against
    // the current prime.
    return checkCoprime(previous::nextCoprime(x));
  }
  static constexpr unsigned checkCoprime(unsigned x) {
    // if x is coprime to the current prime as well, then it is the
    // next prime. Otherwise we have to try the next candidate.
    return (x % prime) ? x : nextCoprime(x + 2);
  }
};

template<> struct NthPrime<1> {
  static constexpr unsigned prime = 2;
  static constexpr unsigned nextPrime() {
    return 3;
  }
  static constexpr unsigned nextCoprime(unsigned x) {
    return x; // x is guaranteed to be odd, so no need to check anything.
  }
};

template<unsigned n>
constexpr unsigned nthPrime() {
  return NthPrime<n>::prime;
}

constexpr unsigned p512 = nthPrime<512>();
static_assert(p512 == 3671, "computed incorrectly"); 
```

上面的野兽需要修改 constexpr 深度和模板深度。以下值是我的编译器的明确界限。

```
time g++-4.7.2 -c -fconstexpr-depth=519 -ftemplate-depth=2042 -std=c++11 foo.cc

real    0m0.397s
user    0m0.368s
sys     0m0.025s 
```

# c++ - 确定 NFS 服务器中已提交作业的状态

> ID：15289683
> 
> 赞同：0
> 
> 时间：2013-03-08T08:30:38.400
> 
> 标签：c++, linux, nfs

我们能否确定提交到 NFS 服务器的作业的状态。我需要处理 NFS 作业完成的条件，而不是遵循新步骤之后。我们在 c++（unix 系统）中是否有任何库和系统调用来确定 NFS 作业状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:30:21.183

方法是：确定 NFS 服务器中的作业状态，并在 1 分钟后获取状态。作业完成后，它将删除 NFS 服务器并假定作业已完成，您可以继续进行下一步操作

# networking - Windows Phone 8 Emulator - 从主机 PC 上的主机文件访问域？

> ID：15289685
> 
> 赞同：4
> 
> 时间：2013-03-08T08:31:06.187
> 
> 标签：networking, windows-phone-8, windows-phone-8-emulator

我对 Windows Phone 开发还很陌生，我正在尝试完成一些我认为相当简单的事情。

每当我使用 ASP.NET 进行开发时，我总是在 IIS 中创建一个站点，并为开发版本创建一个域，我将其添加到我的主机文件中的本地 IP 点（例如：www.mysite.local 指向 127.0.0.1 ）。直接在我的机器上开发和测试时，这很好用。

但是，我目前正在构建一个将由 Windows Phone 8 应用程序使用的 API（使用 URL api.mysite.local） - 我很好奇是否有任何方法可以使用模拟器来模拟相同的东西。我原以为模拟器（或它运行的 Hyper-V）可能会在后台使用 Windows 主机文件，但似乎没有。似乎也没有任何方法可以专门为其添加主机文件映射。

这不可能吗？我能够完成它的唯一方法是使用 IP 地址。但这意味着我现在对不同的应用程序有不同的虚拟目录（例如：[http://xx.xx.xx.xx/api](http://xx.xx.xx.xx/api)、[http://xx.xx.xx.xx/website](http://xx.xx.xx.xx/website)等）——我没有真的很喜欢。理想情况下，我希望使用相同的完整 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:07:32.943

我还没有尝试过，但是应该有一种方法可以使用 Fiddler 来做到这一点。

首先安装 Fiddler，并在启动模拟器**之前启动它。**从那里，模拟器将自动使用 Fiddler 作为代理。由于 Fiddler 在您的计算机上运行，​​它应该使用您的主机文件，为您提供所需的结果。如果没有，您可以使用主机重新映射来强制它（在“工具”菜单中，单击“HOSTS”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:34:56.493

您应该将 PC 上的 DNS 配置更改为指向 127.0.0.1

然后安装[Acrylic](http://mayakron.altervista.org/wikibase/show.php?id=AcrylicHome)、[Maradns](http://www.maradns.org/download.html)、[pDNS](http://www.freewarefiles.com/pDNS_program_77875.html)或其他一些本地 DNS 服务器/代理，并使用您的主机名对其进行配置。（尤其是 pDNS 非常简约。）

# c# - HttpWebResponse 多文件下载

> ID：15289690
> 
> 赞同：0
> 
> 时间：2013-03-08T08:31:19.233
> 
> 标签：c#, .net, multithreading, .net-2.0

我使用此代码从 url 下载文件。

```
Stream stm = myHttpResponse.GetResponseStream();
byte[] buff = new byte[4096];
Stream fs = new FileStream("c:\\file1.txt", FileMode.Append , FileAccess.Write);
int r = 0;

while((r = stm.Read(buff, 0, buff.Length)) > 0)
{
    fs.Write(buff, 0, r);
} 
```

如果我想同时下载 20 个文件（来自不同的 url），可以使用少于 20 个线程来完成吗？

编辑

HttpWebResponse 没有异步方法。我希望有一些流的 BeginRead/BeginWrite 示例。我认为他们不消耗线程池中的线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:43:25.277

您可以为此使用[`Task Parallel Library`（TPL）](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。并设置[`Degree of Parallelism`](http://msdn.microsoft.com/en-us/library/dd383719.aspx). 在你的情况下。将其设置为 19。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:54:31.400

不，在少于 20 个线程中同时拥有 20**个**下载流是不可能的。您可以使用 ThreadPool.QueueUserWorkItem 并限制线程的计数，但这不是同时的 IMO。无论如何，您最好使用 WebClient 类及其[DownloadFileAsync](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfileasync.aspx)方法。

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("username", "password");
client.DownloadFileAsync(uriString,fileName); 
```

# jsp - 根据jsp输入更新数据库

> ID：15289692
> 
> 赞同：0
> 
> 时间：2013-03-08T08:31:27.907
> 
> 标签：jsp, jdbc

我有一个如下的jsp。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>JSP Page</title>
        </head>
        <body>
            <form name="a" action="abc.jsp" method="post">
            <input type="abc" id="abc" name="abc">
            <input type="def" id="def" name="def"></form>
        </body>
    </html>

and the jsp that it is redirected is as below 

        <%@include file="DBCon.jsp" %>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <%try
            {
           int s;
        String a=request.getParameter("a");
        String b=request.getParameter("b");
        String c=request.getParameter("Ship_ID");
        ps=con.prepareStatement("select TSI_QUERY,TSI_R,TSI_C,SI_QUERY,SI_R, SI_C from topical");
        rs=ps.executeQuery();
        if(rs.next()){
        if(rs.getString("TSI_Query")==null && rs.getString("SI_Query")!=null)
        {
            String p="update topical set SI_Query='"+a+"', SI_R='x',SI_C='y' where Job_ID='"+c+"'";
            System.out.print(p);
            /*ps1=con.prepareStatement("update topical set TSI_Query=?, TSI_R=?,TSI_C=?");
            ps1.setString(1, a);
            ps1.setString(2, "x");
            ps1.setString(3, "y");
            s=ps1.executeUpdate();
            if(s!=0){
                String redirectURL= "a.jsp";
                response.sendRedirect(redirectURL);
            }*/
        }
              else if(rs.getString("SI_Query")==null && rs.getString("TSI_Query")!=null)
        {
            String p="update topical set SI_Query='"+b+"', SI_R='x',SI_C='y'where Job_ID='"+c+"'";
            System.out.print(p);

            /*ps1=con.prepareStatement("update topical set SI_Query=?, SI_R=?,SI_C=?");
            ps1.setString(1, b);
            ps1.setString(2, "x");
            ps1.setString(3, "y");
            s=ps1.executeUpdate();
            if(s!=0){
            String redirectURL= "a.jsp";
            response.sendRedirect(redirectURL);}*/
        }
               else if(rs.getString("SI_Query")==null && rs.getString("TSI_Query")==null){
                   if(a==null && b!=null)
                                             {
                 String p="update topical set TSI_Query='"+a+"', TSI_R='x',TSI_C='y'where Job_ID='"+c+"'";
            /* ps1=con.prepareStatement("update topical set TSI_Query=?, TSI_R=?,TSI_C=?");
            ps1.setString(1, a);
            ps1.setString(2, "x");
            ps1.setString(3, "y");
            s=ps1.executeUpdate();
             if(s!=0){
                String redirectURL= "a.jsp";
                response.sendRedirect(redirectURL);
                               }
              */     }
                 else if(b==null && a!=null){
            String p="update topical set SI_Query='"+b+"', SI_R='x',SI_C='y'where Job_ID='"+c+"'";
            System.out.print(p);
                     /*
            ps1=con.prepareStatement("update topical set SI_Query=?, SI_R=?,SI_C=?");
            ps1.setString(1, b);
            ps1.setString(2, "x");
            ps1.setString(3, "y");
            s=ps1.executeUpdate();
            if(s!=0){
                String redirectURL= "a.jsp";
                response.sendRedirect(redirectURL);
                               }*/
                 }
               }
               }

        }
        catch(Exception e)
        {
        out.println(e);
        }
        %>
    </body>
</html> 
```

在这里，我想用接收到的非空值更新我的数据库表，并且另一列不应更新为空，因为该列可能会在其他时间更新。但是，它显示的是一个空白页面，而不是任何查询字符串，请告诉我如何显示该查询字符串。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:09:25.147

如果我尝试理解您的代码，您似乎遇到了三种情况

情况1

```
TSI_Query == null && SI_Query != null
//print something 
```

案例2

```
SI_Query ==null && TSI_Query != null
//print something 
```

案例3

```
SI_Query ==null && TSI_Query == null
  // check values of a and b, and print only if b==null && a!=null 
```

所以你有效地，*没有*遵循所有可能的路径！难怪你没有任何输出。请注意，您也可能是其他问题。

# c# - 使用 MVC 和 Linq to XML 读取多个 RSS 提要

> ID：15289693
> 
> 赞同：4
> 
> 时间：2013-03-08T08:31:30.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq-to-xml

在编码方面，我真的很生疏，并且一直在努力寻找答案，但现在我已经筋疲力尽了。

我的网站有一个存储 RSS URL 的数据库。对于我的生活，我无法弄清楚如何循环并显示所有 RSS 提要数据。

我可以让一个提要显示得很好，但是显示所有提要，我只是不知道该怎么做才能让它们全部显示。任何帮助将不胜感激！

**型号：** RSS.cs

```
namespace MyWebsite.Models
{
    public class RSS
    {
        public string Link    { get; set; }
        public string Title         { get; set; }
        public string Description   { get; set; }
        public string PubDate       { get; set; }
        public string Date          { get; set; }
    }
} 
```

**型号：** RSSReader.cs

```
namespace MyWebsite.Models
{
    public class RSSReader
    {
        private static string _URL = "";

        public static IEnumerable<RSS> GetRSSFeed()
        {
            IEnumerable<RSS> feeds = null;
            XDocument feedXml = null;
            XNamespace rss = "http://purl.org/rss/1.0/";
            XNamespace dc = "http://purl.org/dc/elements/1.1/";
            int count = 0;

            foreach (var url in BansheeData.GetURL(count))
            {
                _URL = url.url1;
                feedXml = XDocument.Load(_URL);

                    feeds = from feed in feedXml.Descendants(rss + "item")
                            select new RSS
                            {
                                Title = feed.Element(rss + "title").Value,
                                Link = feed.Element(rss + "link").Value,
                                Date = feed.Element(dc + "date").Value.Remove(10)
                            };

                count++;
            }

            return feeds;
        }
    }
} 
```

**控制器：** RSSController.cs

```
public ActionResult Index()
{
      var urlFeed = MyWebsite.Models.RSSReader.GetRSSFeed();
      return View(urlFeed);
} 
```

**查看：** _RSSFeed.cshtml

```
@model IEnumerable<MyWebsite.Models.RSS>

@foreach (var item in Model) { 
    <section>
        <header class="overflow">
            <h1>
                <a href="@item.Link" target="_blank" class="alt overflow">
                    <span class="fl">@Html.Raw(item.Title)</span>
                    <span class="ref fr">Source, @Html.Encode(item.Date)</span>
                </a>
            </h1>
        </header>
    </section>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:08:56.837

我想我在你的代码中发现了一个问题。您缺少为每次迭代将项目添加到列表中。

所以而不是：

```
 foreach (var url in BansheeData.GetURL(count))
            {
                _URL = url.url1;
                feedXml = XDocument.Load(_URL);

                feeds = from feed in feedXml.Descendants(rss + "item")
                            select new RSS
                            {
                                Title = feed.Element(rss + "title").Value,
                                Link = feed.Element(rss + "link").Value,
                                Date = feed.Element(dc + "date").Value.Remove(10)
                            };

                count++;
            }

            return feeds; 
```

您尝试`AddRange`在每次迭代的列表中执行以下操作：

```
 var rssList = new List<RSS>;

        foreach (var url in BansheeData.GetURL(count))
        {
            _URL = url.url1;
            feedXml = XDocument.Load(_URL);

            feeds = from feed in feedXml.Descendants(rss + "item")
                        select new RSS
                        {
                            Title = feed.Element(rss + "title").Value,
                            Link = feed.Element(rss + "link").Value,
                            Date = feed.Element(dc + "date").Value.Remove(10)
                        };

            rssList.AddRange(feeds);

            count++;
        }

        return rssList; 
```

这应该会有所帮助。现在你应该得到完整的 RSS 列表。核心逻辑是当您迭代并在每个迭代周期中获得所需的项目时，您应该记住它们。这意味着将它们保存在临时列表中。

# html - CSS：body {}选择器不工作

> ID：15289696
> 
> 赞同：14
> 
> 时间：2013-03-08T08:31:56.423
> 
> 标签：html, css

这是整个文档：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title</title>

    <style type="text/css">
        body‌ {
            font-family: Tahoma;
            font-size: 8px;
            background: #f00;
        }
    </style>
</head>

<body>
    Sample Text
    <p>Another Text</p>
</body>
</html> 
```

在 jsfiddle 中：http: [//jsfiddle.net/HDBqZ/](http://jsfiddle.net/HDBqZ/)

为什么它不起作用？我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T08:38:03.453

在您的选择器中似乎有一些[垃圾](http://www.fileformat.info/info/unicode/char/200c/index.htm)：`y``body {`

```
>>> u'body‌'
u'body\u200c' 
```

删除您的`body`行并手动重新编写。你的文本编辑器也应该有一些工具来自动删除这些东西。

# android - 什么需要更多的虚拟机？

> ID：15289701
> 
> 赞同：-1
> 
> 时间：2013-03-08T08:32:06.227
> 
> 标签：android, static, bitmap, bytearray, virtual-machine

我的应用程序中有一些静态位图，因此它们可以在不同的类之间使用，并且它们会使 VM 过载，如果我将这些相同的位图转换为 byte[] 会解决问题吗？

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:36:52.780

我怀疑这会有所帮助，因为`Bitmap`对象也`byte[]`用于存储实际数据。相反，我建议您更好地使用您的`Bitmaps`: 仅在需要时加载它们，并在它们变得不必要时立即回收。[这是](http://developer.android.com/training/displaying-bitmaps/index.html)来自 Android 培训的一个很好的话题，它讨论了如何有效地处理大型`Bitmaps`. 希望这可以帮助。

# mvvm - 在 WinRT XAML UserControl 中访问 DataContext 的位置

> ID：15289708
> 
> 赞同：5
> 
> 时间：2013-03-08T08:32:46.730
> 
> 标签：mvvm, windows-runtime, windows-store-apps, winrt-xaml

我有`UserControlViewModel`一个引发事件的事件：

```
public event EventHandler<EventArgs> StuffDone; 
```

`UserControlViewModel`在内部创建并初始化一个对象`MainPageViewModel`：

```
this.userControlViewModel = new UserControlViewModel(); 
```

`MainPageViewModel`是 的视图模型`MainPage`。

在 MainPage.xaml 中，我有以下代码可以放入`UserControlView` `UserControl`并`MainPage`初始化它`DataContext`：

```
<views:UserControlView DataContext="{Binding userControlViewModel, Mode=OneWay}" IsHitTestVisible="False"></views:UserControlView> 
```

到目前为止一切正常。

现在我想订阅`StuffDone`里面的事件`UserControlView`。我想到的第一件事是在`Loaded`事件处理程序中进行`UserControlView`；但是，`DataContext`此时仍然是`null`. 扫描其余的`UserControl`事件根本没有给我任何线索。

那么，获取`DataContext`和订阅其事件的正确位置在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:47:15.187

**更新**：Windows 8.1 的 WinRT 支持[DataContextChanged事件。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.datacontextchanged.aspx)仅当您针对 WinRT for Windows 8 或任何不支持`DataContextChanged`.

似乎没有直接的方法可以做到这一点，[Will](https://stackoverflow.com/users/1228/will)在他的评论中建议的解决方法是最简单的方法。

以下是适用于我的解决方法版本：

在 IDataContextChangedHandler.Generic.cs 中：

```
using Windows.UI.Xaml;

namespace SomeNamespace
{
    public interface IDataContextChangedHandler<in T> where T : FrameworkElement
    {
        void DataContextChanged(T sender, DependencyPropertyChangedEventArgs e);
    }
} 
```

在 DataContextChangedHelper.Generic.cs 中：

```
using Windows.UI.Xaml;
using Windows.UI.Xaml.Data;

namespace SomeNamespace
{
    public sealed class DataContextChangedHandler<T> where T : FrameworkElement, IDataContextChangedHandler<T>
    {
        private readonly DependencyProperty internalDataContextProperty =
            DependencyProperty.Register(
                "InternalDataContext",
                typeof(object),
                typeof(T),
                new PropertyMetadata(null, DataContextChanged));

        private static void DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            var control = sender as T;

            if (control == null) { return; }

            control.DataContextChanged(control, e);
        }

        public void Bind(T control)
        {
            control.SetBinding(this.internalDataContextProperty, new Binding());
        }
    }
} 
```

在 UserControlView.xaml.cs 中：

```
using Windows.UI.Xaml;

namespace SomeNamespace
{
    public sealed partial class UserControlView : IDataContextChangedHandler<UserControlView>
    {
        private readonly DataContextChangedHandler<UserControlView> handler = new DataContextChangedHandler<UserControlView>();

        public UserControlView()
        {
            this.InitializeComponent();

            this.handler.Bind(this);
        }

        public void DataContextChanged(UserControlView sender, DependencyPropertyChangedEventArgs e)
        {
            var viewModel = e.NewValue as UserControlViewModel;

            if (viewModel == null) { return; }

            viewModel.SomeEventRaised += (o, args) => VisualStateManager.GoToState(this, "TheOtherState", false);
        }
    }
} 
```

希望有帮助。

# javascript - 模式窗口内的 URL 重定向

> ID：15289717
> 
> 赞同：0
> 
> 时间：2013-03-08T08:33:13.697
> 
> 标签：javascript, jsp, redirect, modal-dialog

我的 webapp 可以“自行”运行，也可以由另一个 webapp 在模态窗口中打开...

当用户关闭窗口时，我必须清理一些数据，以便捕获关闭窗口的事件并重定向到如下某个操作：

```
 <script language="JavaScript">
        window.onbeforeunload = function() {
            if ((window.event.clientX < 0) || (window.event.clientY < 0) || (window.event.clientX < -80) || window.event.altKey == true) { // close button or ALT+F4
                window.location.assign('<%=request.getContextPath()%>/borraSemaforo.do');
            }
        };
    </script> 
```

当 web 应用程序在非模态窗口中运行但不在模态窗口内时，此方法有效。

我无法控制在模式窗口中打开我的应用程序，因此我无法对窗口的打开方式进行任何更改......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:42:07.623

对于应用程序在模式窗口中加载的情况：

一种方法是：

您可以在 onbeforeunload 事件处理程序的窗口中创建一个隐藏的 iframe。在 iframe 中放置动作的 url。

其他方式 -

创建一个指向 url 路径的小模式窗口。在该 url 路径的响应中，发送一个小的 javascript 来关闭模态窗口。

打开 iframe 的代码 - 基本 js

```
 var i = document.createElement('iframe');
            i.style.display = "none";
            var d = new Date();
            i.id = d.getTime();
    i.onload = function(){
/*Task complete*/
 alert('frame loaded')}
            i.name = "exp" + d.getTime();
            i.src = window.location.protocol + "//" + window.location.host + '<path>';
            document.body.appendChild(i); 
```

# android - 如何在android中单击xml时从音频数组播放音频

> ID：15289719
> 
> 赞同：0
> 
> 时间：2013-03-08T08:33:15.177
> 
> 标签：android

```
 public void getSound(String file) {
                    MediaPlayer mp;
                        try{
                            String SoundFile=file;
                            System.out.println("Here is the File"+SoundFile);
                            mp = MediaPlayer.create(getActivity().getBaseContext(),Uri.parse("android.resource://himanshu.sound/raw/"+file)); 
                            mp.start(); 
                            System.out.println("PLAYED");
                        }catch(Exception e){
                            System.out.println("Exception->"+e);
                        }   
                } 
```

这是我的代码文件名是来自资产的 game.mp3。

现在我想播放音频

这是我的xml

```
 <ImageView
                        android:id="@+id/soundbtn"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:clickable="true"
                        android:gravity="right"
                        android:onClick="getSound"
                        android:paddingLeft="5dp"
                        android:paddingRight="15dp"
                        android:paddingBottom="5dp"
                        android:src="@drawable/audio" />

mp = MediaPlayer.create(getActivity().getBaseContext(),Uri.parse("android.resource://himanshu.sound/raw/"+file)); 
```

在这一行我有错误

getActivity().getBaseContext() 我认为必须有合适的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:41:07.430

你最好有一个 ImageButton

```
 <ImageButton
                    android:id="@+id/soundbtn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:clickable="true"
                    android:gravity="right"
                    android:onClick="onClick"
                    android:paddingLeft="5dp"
                    android:paddingRight="15dp"
                    android:paddingBottom="5dp"
                    android:src="@drawable/audio" /> 
```

并且 OnClick 方法必须具有不同的签名

```
public final void onClick(View v) {

    // todo ............
     } 
```

# android-layout - mono for android - 动态添加布局到滚动视图

> ID：15289726
> 
> 赞同：1
> 
> 时间：2013-03-08T08:33:45.373
> 
> 标签：android-layout, xamarin.android, scrollview

我想将布局动态添加到 ScrollView 中。我尝试了我在谷歌和这里找到的所有东西，但没有机会！它们中的大多数会导致“对象引用”错误。这是代码之一：

```
LayoutInflater layoutInflater = (LayoutInflater) this.GetSystemService(Context.LayoutInflaterService);    
View view = new View(this);
view = layoutInflater.Inflate(Resource.Layout.MYLAYOUT, null);
MYSCROLLVIEW.AddView(view); 
```

但它会导致“对象引用未设置为对象的实例”。

之后，我想使用 MYLAYOUT 中的控件（视图），例如：

MYLAYOUT.textView1.Text = "示例";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:34:19.307

我所做的只是作弊，并将我的动态布局添加到 ScrollView 内的现有布局中。这是一个带有 Horizo​​ntalScrollView 的示例：

```
<HorizontalScrollView
    android:layout_width="739dp"
    android:layout_height="match_parent"
    android:id="@+id/horizontalMessageScrollView"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="15dp"
    android:scrollbars="none">
    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/messageHolder" />
</HorizontalScrollView> 
```

然后在我的代码中我使用以下内容：

```
LinearLayout messageListView = FindViewById<LinearLayout>(Resource.Id.messageHolder);

foreach (var object in objects) {  
    // create your dynamic views here.      

    View view = new View(this);
    view = layoutInflater.Inflate(Resource.Layout.MYLAYOUT, null);

    TextView internalTextView= view.FindViewById<TextView>(Resource.Id.internalTextView);
    internalTextView.SetText("Hello world!", TextView.BufferType.Normal);
    messageListView.AddView(view);
} 
```

# mule - 我怎样才能使骡子配置轮询

> ID：15289734
> 
> 赞同：0
> 
> 时间：2013-03-08T08:34:00.730
> 
> 标签：mule, polling

我是骡子的新手。

我正在使用骡子 3.2

这是我的 xml 文件。

```
 <model name="polltest">
    <service name="poll">
        <inbound>
            <tcp:inbound-endpoint host="localhost" port="35466" exchange-pattern="one-way"/>
        </inbound>
        <outbound>
            <pass-through-router>
                <tcp:outbound-endpoint host="localhost" port="45511" connector-ref="tcplengthProtocol" exchange-pattern="one-way"/>
            </pass-through-router>
        </outbound>
    </service>
</model> 
```

我必须每 5 分钟轮询一次“检查消息”字符串消息到端口 45511 我怎么能这样做？

帮助一些示例代码 T ^ T

谢谢。

# html - HTML/CSS :使用 css 制作标签

> ID：15289735
> 
> 赞同：4
> 
> 时间：2013-03-08T08:34:03.523
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:37:19.820

是的，而不是以这种方式`div`使用`a`元素：

```
a.phone-number {
    display: block;
    width: ...;
    height: ...;
    background: url(...);
} 
```

然后你的 html 将是

```
<a href="#url#" class="phone-number"></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:46:58.403

不，您不能使用 CSS 创建链接。CSS 用于呈现建议，而不是用于增强功能或添加新元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T08:38:28.323

而不是`div`使其成为`a`下面示例的背景图像

hmtl

```
<a href="#">phone</a> 
```

css

```
a.{
float:left;
width:100px; 
height:200px;
text-indent:-5000px;
background: url(images/sample.jpg);
} 
```

希望它有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:37:51.897

像这样的东西？

```
<div class="number"></div> 
```

* * *

```
.number{ /* mention the div class name or id here */
    display:inline;
    cursor: pointer;
    cursor: hand; /*for cross-browser support */
    border-bottom: 1px solid blue; /* give your own color */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T09:09:59.717

您将需要使用`<a>`标签。是语义上正确的`<a>`元素，用于赋予您的标记更多意义。

使用 HTML5，您应该像这样标记您的电话链接。

```
<a href="tel:+13174562564">317-456-2564</a> 
```

这允许 iPhone 和 Android 等移动设备将其识别为电话号码，并在触摸时发起电话呼叫。

# kendo-ui - 使用复选框获取剑道网格中列的值

> ID：15289737
> 
> 赞同：0
> 
> 时间：2013-03-08T08:34:12.907
> 
> 标签：kendo-ui, kendo-grid

我有一个带复选框的网格

```
 @(Html.Kendo().Grid<Re.Web.ReService>()
                    .Name("ServiceList")
                        .Columns(columns =>
                        {
                            columns.Bound(p => p.PKiServiceID)
                            .ClientTemplate("<input name=\"selectedIds\" type=\"checkbox\" value=\"#=PKiServiceID#\" class=\"chk\"/>")
                            .HeaderTemplate("<input type=\"checkbox\" class=\"selectAll\" />")
                            .Width(30);
                            columns.Bound(p => p.SServiceName).Width(200);
                            columns.Bound(p => p.MServicePrice).Width(80);
                            columns.Bound(p => p.BStatus).Width(70).ClientTemplate("#if(BStatus){# #='Y'# #} else {# #='N'# #}#");
                            columns.Bound(p => p.SDescription);
                        })
                    .Selectable()
                    .Pageable()
                    .DataSource(dataSource => dataSource
                        .Ajax()
                        .Model(model => model.Id(p => p.PKiServiceID))
                        .Read(read => read.Action("ServiceRead", "Home"))
                    )
                    ) 
```

和 javascript

```
 $(document).ready( function () {
    var grid = $("#ServiceList").data("kendoGrid");

    //handle the click of the header checkbox
    grid.table.on("change", ".selectAll", function () {
        var checkbox = $(this);
        if (checkbox.is(':checked')) {
            grid.table.find("tr")
                .find("td:first input")
                .attr("checked", checkbox.is(":checked"));

        }
        else {
            grid.table.find("tr")
                .find("td:first input")
                .attr("checked", checkbox.is(":checked"));
        }
    });
}); 
```

我可以选中/取消选中网格中的所有行现在我想要如果我单击全选复选框，我会获取列 MServicePrice 的所有值，以便我可以计算总值。我尝试使用`$(this).closest('tr')`但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:42:02.803

在 check all 处理程序内部意味着将检查 Grid 中的所有项目，所以您问如何基本上获取所有项目的值？

您可以使用 dataSource 并遍历 view() 集合。

例如

```
function checkAll(ele) {        
    var grid = $('#gridName').data().kendoGrid;
    var total = 0;
    $.each(grid.dataSource.view(), function () {           
        total += this.Salary;            
    });
    alert(total);        
} 
```

# css - 如何改变 在css下拉子菜单上可变宽度

> ID：15289739
> 
> 赞同：1
> 
> 时间：2013-03-08T08:34:18.313
> 
> 标签：css, drop-down-menu, menu, html-lists

我有一个固定宽度的 css 下拉菜单，并希望滑出的子菜单根据“li”中文本的宽度是可变宽度。

![可变宽度](../Images/973bb35220424d2076229e7f613e4216.png)

我试过这个： [使所有 <li> 的宽度与最宽的宽度相同，](https://stackoverflow.com/questions/8824232/make-all-li-same-width-as-the-widest) 但没有用。我在谷歌上搜索的所有示例都谈到了使用 float:left;width:100%;position:relative 但我插入的所有地方都没有改变。

代码链接：http: [//jsfiddle.net/Bqh9a/1/](http://jsfiddle.net/Bqh9a/1/)

我的 CSS 是：

```
<style type="text/css">
.pipe {margin-top:4px;}
.li_hover {color: #002398;}
.bottom_li {margin-bottom:6px;margin-top:2px;}
ul#nav li .bottom_li:hover > a{background:#E0E0E0;}
ul#nav, ul#nav ul {width:300px;list-style:none;margin:0;padding:0;position:absolute;z-index:9;border:1px solid #297BCE;}
ul#nav li li:hover > a{border:none;}
ul#nav li {position:relative;float:left;zoom:1; /*Needed for IE*/}
ul#nav li:hover > a{background:#E0E0E0;color:#297BCE;border-left:1px solid #297BCE;border-right:1px solid #297BCE;border-top:1px solid #E0E0E0;border-bottom:1px solid #E0E0E0;text-decoration:underline;}
ul#nav li:hover > ul{display:block;}
ul#nav li a{border:1px solid #FFFFFF;display:block;padding:4px 6px 4px 6px;color:#297BCE;font-weight:bold;font-family:Arial, Times New Roman, Tahoma;font-size:13px;text-decoration:none;}
ul#nav ul {padding-left:8px;padding-top:2px;display:none;position:absolute;width:150px;border:1px solid #297BCE;background:#E0E0E0;left:0;border-top:none;}
ul#nav ul li{background:#E0E0E0;color:#000;border:none;float:none;}
ul#nav ul li a{border:none;width:100%;padding:0;display:block;color:#000000;line-height:145%;font-size:12px;font-weight:normal;} 
ul#nav ul li a:hover{border:none;width:150px;color:#297BCE;>}
ul#nav ul ul{position: absolute;top: 0;left: 100%;margin-left:-3px;display: none;}
ul#nav ul ul{padding-left:8px;position:absolute;width:150px;border:1px solid #297BCE;background:#E0E0E0;}
ul#nav ul li:hover ul{display: block;}
</style> 
```

我的 HTML 是：

```
<ul id="nav">
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
<li class="pipe">|</li>
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
<li class="pipe">|</li>
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
</ul> 
```

感谢您提供指导我正确方向的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:47:08.840

我拿了你的小提琴并添加了一个新的 CSS 类“snug”来申请年份列表。基本上“舒适”将使列表与其最宽的列表元素一样宽。看看：http: [//jsfiddle.net/2fc3W/1/](http://jsfiddle.net/2fc3W/1/)

```
// the CSS

ul#nav ul.snug{
    width: auto;
}
ul#nav ul.snug li a{
    display: inline;
    padding-right: 6px;
    width: auto;
}

// the HTML snippet

<ul id="nav">
<li><a href="/ueber_uns.htm">About Us</a>
    <ul>
        <li><a href="#">Who We Are</a>
        </li>
        <li><a href="#">Our Goals</a>
        </li>
        <li><a href="#">Our Team</a>
        </li>
        <li><a href="#">Press</a>
            <ul class="snug">
                <li><a href="#">2006</a>
                </li>
                <li><a href="#">2007</a>
                </li>
                <li><a href="#">2008</a>
                </li>
            </ul>
        </li>
        <li><a href="#">Impressum</a>
        </li>
        <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a>
        </li>
    </ul>
</li>
... 
```

# jquery - jQuery ui按钮图像不显示

> ID：15289740
> 
> 赞同：1
> 
> 时间：2013-03-08T08:34:21.537
> 
> 标签：jquery, image, jquery-ui, jquery-ui-button

我尝试使用带有图像的 jQuery Ui 按钮。所以我写了以下代码：

```
$("#analyse_button").button({ icons: { primary: "fb-icon" } });

.fb-icon {
    background-image: url(./fb-icon.png);
} 
```

正如您在下面的屏幕截图中看到的，背景图像被标准 ui-icon 背景图像覆盖，但即使我删除它，我的图像仍然没有显示。

[在此处查看图片](http://i.stack.imgur.com/mbWbi.png)

我做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:38:04.087

为了提高 CSS 规则的优先级，应该这样定义：

```
.ui-state-default .fb-icon {
    background-image: url(./fb-icon.png);
} 
```

# visual-studio-2012 - Visual Studio 2012 - 如何将文件链接添加到同一项目中的文件

> ID：15289743
> 
> 赞同：6
> 
> 时间：2013-03-08T08:34:31.993
> 
> 标签：visual-studio-2012, nuget, nuget-package

当我使用“添加现有项目”对话框中的“添加为链接”选项将另一个 Visual Studio 2012 项目中的文件添加到当前项目时。文件链接创建得很好，一切都很好。

**当我对同一个**VS2012 项目（但位于另一个文件夹中）中的现有文件重复相同的技巧时，不会创建链接。Visual Studio 只是忽略该操作。为什么这不可能？有没有解决方法，所以我可以将文件链接添加到同一个项目中的文件？

背景信息：我想使用 NuGet 包及其更新机制，但 NuGet 只是将所有内容转储到我不想使用的文件夹结构（如“脚本”和“内容”文件夹）中。我使用“libs”文件夹来存放外部内容。但是当我移动 NuGet 导入的文件时，它会破坏更新机制，所以我想创建文件链接（在 libs 文件夹下面）到位于“脚本”文件夹等中的导入文件。

我已经尝试手动编辑 .csproj 文件，但链接定义仍然被忽略。我能想到的唯一解决方案是为 NuGet 包创建另一个项目，并在我的另一个项目中添加指向这些导入文件的链接，但这在我看来有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-30T12:31:51.963

这是不可能的。

csproj 文件只是一个 msbuild 文件，它告诉构建过程哪些文件和引用构成了项目，以及在构建等方面要做什么。

如果您查看 csproj 文件的组合方式，您会注意到存在 ItemGroup 元素。这些 ItemGroup 元素的功能之一是将文件组合在一起。在“文件组”中，每个项目（无论标记为 Compile 还是 None 或其他）都引用具有 Include 属性的文件，例如 Include="filename.ext"。当您将文件添加到解决方案时，它将创建这些元素之一，并将 Include 属性适当地设置为文件相对于项目的路径。但在此之前，它会检查项目中是否已经存在具有匹配路径的文件，如果存在则忽略它。

所以你看，你想要做的是添加一个重复的文件，而 VS 不允许这样做。

- 编辑 -

现在，至于解决方法。如果您要使用符号链接，则可以这样做。在命令窗口中，键入以下命令：

```
mklink Link Target 
```

其中 Link 指定新的符号链接名称，Target 指定新链接引用的路径（相对或绝对）。

然后，您应该能够根据需要将该文件添加到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-07T16:34:26.077

您可以编辑 .csproj 文件。例如，替换

```
<Content Include="fonts\fontawesome-webfont.woff" /> 
```

经过

```
<Content Include="fonts\fontawesome-webfont.woff" >
   <Link>newPath\fonts\fontawesome-webfont.woff</Link>
</Content> 
```

新路径将隐藏在解决方案资源管理器中，但会被复制（在 VS2015 CTP6 中测试）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-06T23:39:00.580

Visual Studio 与硬链接和软链接不兼容

# android - 如何分析android应用程序的电池使用情况并进行优化？

> ID：15289746
> 
> 赞同：3
> 
> 时间：2013-03-08T08:34:38.313
> 
> 标签：android, optimization, battery, measurement

我想分析我的应用程序的电池使用情况，我的意思是应用程序的各个部分，例如广播接收器、侦听器、服务等。电池使用量。我需要一份详细清单，我想从清单中优化电池使用情况。

方法类似于使用内存分析器（[http://android-developers.blogspot.hu/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.hu/2011/03/memory-analysis-for-android.html)）有什么工具吗？我使用了一些来自 PlayStore 的电池跟踪应用程序，但应用程序的全球电池使用量还不够。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-15T09:10:54.243

这个问题很老了，但是，我想仍然是相关的。

电池消耗是一个非常大的问题，到目前为止还没有解决，所以只有“努力”的工作和学习才能帮助你。没有公共 API 可以帮助您查看电池，也没有“付费” sdk 可以为您提供电池分析，但是，您可以从运行ADB的[电池统计命令中学到很多东西。](https://developer.android.com/studio/command-line/dumpsys.html#battery)

从您的终端运行此命令：`adb shell dumpsys batterystats > results.txt`

文件中要观察的几件事`results.txt`：

1.  结果是从您将手机从充电器上拔下时开始的（如果达到 100%）

2.  如果您已完全（或几乎）充电，则电池统计信息将被删除，因此如果您遇到问题并且无法处理统计信息，请不要为设备充满电，直到您可以从计算机运行此命令.

3.  我们发现使用[唤醒锁](https://developer.android.com/training/scheduling/wakelock.html)是一个巨大的电池消耗。您可以检查结果，应用程序具有唤醒锁的时间。因此，例如，如果我看到这一行： `Wake lock *sync*/com.android.contacts/com.whatsapp/WhatsApp: 128ms partial (4 times) realtime`我可以从中了解到 WhatsApp 正在运行 128 毫秒的唤醒锁，这没关系，但是，如果运行时间是几个小时，这将很糟糕，并且会耗尽我的电池。
4.  Wifi Lock - 您还可以检查 wifi 是否让您的设备保持运行，如果您看到这些线路，而且时间很长，它应该看起来很可疑。

    `Wifi Running: 3h 23m (87.0%) Full Wifi Lock: 2h 3m (91.0%) Wifi Scan: 1h 54m (79.0%) 44x`

5.  检查您的 CPU 时间：例如：

    `Proc com.android.phone: CPU: 3h 34m 12s 910ms usr + 7s 250ms krn ; 0ms fg`

    这意味着，电话应用程序工作了 3 多个小时，这是很多（除非用户一直在说话）

6.  检查你的蓝牙

    `1002: Wake lock bluedroid_timer: 3m 29s 892ms partial (158 times) realtime Foreground for: 8h 1m 2s 834ms Active for: 8h 1m 3s 546ms Total cpu time: u=48m 38s 350ms s=29s 752ms p=204mAh Proc com.android.bluetooth: CPU: 23m 25s 230ms usr + 22s 520ms krn ; 0ms fg 211 starts Proc *wakelock*: CPU: 0ms usr + 2ms krn ; 0ms fg Apk com.android.bluetooth: Service com.android.bluetooth.gatt.GattService: Created for: 1h 13m 52s 667ms upt`

    **8小时对于蓝牙来说是很多的。**

7.  您的服务运行了多长时间？

    `Service com.google.location.nearby.direct.service.NearbyDirectService: Created for: 17m 50s 232ms uptime Starts: 212, launches: 212`

8.  在此文件的末尾，您可以看到设备上运行的所有应用程序的摘要。它非常好，让您了解每个 apk 消耗了多少时间/cpu/wifi/网络/服务。例如，

    `u0a1091: Mobile network: 14.96KB received, 17.10KB sent (packets 120 received, 183 sent) Mobile radio active: 4m 30s 136ms (10.5%) 18x @ 892 mspp Active for: 8h 1m 3s 546ms Total cpu time: u=520ms s=210ms p=0.0653mAh Proc org.telegram.messenger: CPU: 670ms usr + 260ms krn ; 0ms fg`

**在这个文件中还有很多选项要处理，而且需要一段时间才能弄清楚更多**，这是我从研究中学到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T01:51:30.037

你试过[ATT ARO](http://developer.att.com/developer/forward.jsp?passedItemId=13800096)吗？这是一个非常简洁的工具，可为您的应用程序提供更多可视化诊断。

![在此处输入图像描述](../Images/d37cdb8a47c1ca21682efdec2774d309.png)

# xml - 使用 R 将 XML 代码强制转换为数据框时如何删除或重新标记自闭合 XML 标记

> ID：15289747
> 
> 赞同：1
> 
> 时间：2013-03-08T08:34:39.323
> 
> 标签：xml, r

我正在尝试使用[这个出色的示例](https://stackoverflow.com/questions/2067098/how-to-transform-xml-data-into-a-data-frame)将一些 XML 代码转换为 R 数据框。不幸的是，自闭合标签似乎阻止了这种转换，我对 XML（和 R XML 包）的理解充其量只是新手。

根据[w3schools 上的这个页面，](http://www.w3schools.com/xml/xml_syntax.asp)自关闭标签在 XML 中似乎是合法的，所以我试图解析的代码并不是非常不正常。

下面的 R 代码将产生我遇到的问题。如果您删除`<AlternateText/>`标签，代码将按我的预期工作。

此外，奇怪的是，如果您将其更改为`<AlternateText xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>`，那么它也可以工作。这种行为是预期的吗？

我想要么简单地从对象中删除所有自闭合标签，`x`要么我想重新标记它们，这样它们就不会导致错误——有效地`<AlternateText/>`变成类似`<AlternateText></AlternateText>`.

```
x <- 
    '<outer>
        <ProviderURL>
          <URLCode>Valid</URLCode>
          <URLAddress>http://mypage.com</URLAddress>
          <AlternateText/>
        </ProviderURL>
    </outer>'

library( plyr )
library( XML )

y <- 
    xmlTreeParse( 
        x , 
        asText = TRUE , 
        useInternalNodes = TRUE
    )

ldply( xmlToList( y ) , data.frame ) 
```

这段代码给了我：

```
Error in data.frame(URLCode = "Valid", URLAddress = "http://mypage.com",  : 
  arguments imply differing number of rows: 1, 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:09:43.617

当您使用示例中的代码解析 xml 时，您正在寻找的标签就在那里。我不认为这是给你的问题

```
y <- xmlTreeParse(x, asText=TRUE, useInternalNodes=TRUE)

xmlToList(y)

# $ProviderURL
# $ProviderURL$URLCode
# [1] "Valid"

# $ProviderURL$URLAddress
# [1] "http://mypage.com"

# $ProviderURL$AlternateText  
# NULL    <~~~~~~~~~~~~~~~~~~~~~ It's Right There 
```

* * *

### 这应该有助于：

```
y.list <- xmlToList(y)
y.list$ProviderURL$AlternateText <- NA
ldply(y.list, data.frame) 
```

* * *

问题*不*在于自闭合标签。问题是您有一个带有 NULL 值的列表，这与 ldply 混淆了。通常列表没有 NULL 值（即，分配 NULL 通常会消除列表中的值）。

因此，如果您改为分配一个替代值， ldply 就可以了。或者，如果您将其分配为 NULL，它将从您的列表中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:15:18.287

正如@RicardoSaporta 在他上一次编辑中提到的那样，问题是因为您的列表元素之一有一个 NULL。作为替代，你可以使用一个 data.frame`unlist`

```
 unlist(xmlToList( y ))
   ProviderURL.URLCode ProviderURL.URLAddress 
               "Valid"    "http://mypage.com" 
```

或使用`xmlToDataFrame`

```
xmlToDataFrame(y)

  URLCode        URLAddress AlternateText
1   Valid http://mypage.com 
```

*附言*

注意`xmlTreeParse`with`useInternalNodes = TRUE`可以用一个简单的替换`xmlParse`

```
y <- 
    xmlParse( 
        x , 
        asText = TRUE  
    ) 
```

# html - 响应式设计无法正常工作

> ID：15289750
> 
> 赞同：2
> 
> 时间：2013-03-08T08:34:46.467
> 
> 标签：html, css, responsive-design, media-queries

我的任务是对给定页面使用响应式设计。但它无法正常工作。在案例下拉列表中，它不支持该设计。我的html页面是

```
<style type="text/css"> 
.body
{
width:100%;
}  
#wrapper
{
    width:100%;
}
#container
{
    width:100%;
}
    #frmEnergyEfficiency
    {
        width:100%;
        height:900px;       
        margin:0px auto;        
    }
    .leftalign
    {
      text-align:left;
      padding-left:2px;
    }
    .rightalign
    {
     float:right;   
     padding-right:2px;
    }
    .alignment
    {
     float:right;   
     padding-right:0px;
    }
    .divTable{
  display:table;         
  width:790px;                 
  border-spacing:5px;
}
.divRow{
  display:table-row;
  width:790px;
  clear:both;
}
.divCell{
  float:left;
  display:table-column;         
  width:155px;        
}
.divAlign
{
   text-align:left;
   width:400px;
}

.divAlign1
{
    text-align:left;
   width:670px;
}
.align
{
    width:150px;
}
</style>
<link rel="stylesheet" media="only screen and (max-width:724px)" href="ipad.css">
<link rel="stylesheet" media="only screen and (max-width:424px)" href="ipad1.css">
</head>
<body>
<div id="wrapper">
<div id="container">
<h3><center>Energy Efficiency</center></h3><br />
<form id="frmEnergyEfficiency" method="post" action="EnergyEfficiency">
<h4><center>EE loan overview</center></h4>
<div class="divAlign">
<div>
    <label class="leftalign">Country</label>
    <select name="ddlCountry"id="ddlCountry"class="rightalign"style="width:150px;">
             <option>Select Country</option>
            <option value="INDIA">INDIA</option>
            <option value="AMERICA">AMERICA</option>
            <option value="CHINA">CHINA</option>
            <option value="RUSSIA">RUSSIA</option>
            <option value="PAKISTHAN">PAKISTHAN</option>
            <option value="SINGAPORE">SINGAPORE</option>
            <option value="GERMANY">GERMANY</option>
            <option value="MEXICO">MEXICO</option>
            <option value="ITALY">ITALY</option>
    </select>
</div><br />
<div>
    <label class="leftalign">City (or nearby city)</label>
    <select name="ddlCity"id="ddlCity" class="rightalign"style="width:150px;">
            <option value="Select">Select City</option>
            <option value="NEW YORK">NEW YORK</option>
            <option value="BANGALORE">BANGALORE</option>
            <option value="MEXICO CITY">MEXICO CITY</option>
            <option value="LONDON">LONDON</option>
            <option value="HYDERABAD">HYDERABAD</option>
            <option value="HONG KONG">HONG KONG</option>
            <option value="LAHORE">LAHORE</option>
            <option value="LOS ANGLES">LOS ANGLES</option>          
    </select>
</div><br />

<div>
    <label class="leftalign">Industry sector of borrower</label>
   <input type="text" name="txtIndustrySector"id="txtIndustrySector"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign">EE component of loan</label>
   <input type="text" name="txtEEComponent"id="txtEEComponent"class="rightalign"/>
</div><br />

<div>
   <label class="leftalign">Total project cost</label>
   <input type="text" name="txtProjectCost"id="txtProjectCost"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign">Tenor of financing</label>
   <input type="text" name="txtTenorFinancing"id="txtTenorFinancing"class="rightalign"/>
</div><br />

</div>
<div class="divAlign1">
<h4><center>Technical data</center></h4>
<div>
    <label class="leftalign">Is the EE loan for process or non-process?</label><span>*</span>
   <span class="alignment">
        <input type="radio" name="radEESold" value="Non-Process"/>Non-Process
        <input type="radio" name="radEESold" value="Process"/>Process
   </span>
</div><br />

<div>
    <label class="leftalign">Pre-loan equipment/project description(e.g. coal fired boiler,efficiency 66%)</label><span>*</span>
   <input type="text" name="txtPreLoanEquipment"id="txtPreLoanEquipment"class="rightalign"/>
</div><br />
<div>
    <label class="leftalign">Post-loan equipment/project description(e.g. gas boiler,efficiency 78%)</label><span>*</span>
   <input type="text" name="txtPostLoanEquipment"id="txtPostLoanEquipment"class="rightalign"/>
</div><br />

</div>
<div class="divTable">
             <div class="divRow">
                <div class="divCell"><b>Form of Energy</b><span>*</span></div>
                <div  class="divCell"><b>Current pre-loan consumption</b><span>*</span></div>
                <div  class="divCell"><b>Units</b><span>*</span></div>
                <div  class="divCell"><b>Expected post-loan consumption</b><span>*</span></div>
                <div  class="divCell"><b>Units</b></div>
             </div>

            <div class="divRow">
                <div class="divCell">Electricity</div>                
                <div class="divCell"><input type="text" name="txtPreLoanElectricity"id="txtPreLoanElectricity"/></div>
                <div class="divCell">
                    <select name="ddlElectricityUnits"id="ddlElectricityUnits"class="rightalign"style="width:150px;">             
                        <option value="kWh/yr">kWh/yr</option>
                        <option value="MWh/yr">MWh/yr</option>                                  
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanElectricity"id="txtPostLoanElectricity"/></div>
                <div class="divCell"><label id="txtElectricityUnitss"></label></div>
            </div>  

            <div class="divRow">
                <div class="divCell">Heat</div>                       
                <div class="divCell"><input type="text" name="txtPreLoanHeat"id="txtPreLoanHeat"/></div>
               <div class="divCell">
                    <select name="ddlHeatUnits"id="ddlHeatUnits"class="rightalign selection" style="width:150px;">             
                        <option value="btu/yr">btu/yr</option>
                        <option value="GJ/yr">GJ/yr</option>
                        <option value="kcal/yr">kcal/yr</option>                                    
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanHeat"id="txtPostLoanHeat"/></div>
                <div class="divCell"><label id="txtHeatUnitss"></label></div>
            </div> 

             <div class="divRow">
               <div class="divCell">Natural Gas</div>                                    
                <div class="divCell"><input type="text" name="txtPreLoanNaturalGas"id="txtPreLoanNaturalGas"/></div>
                <div class="divCell">
                    <select name="ddlNaturalGasUnits"id="ddlNaturalGasUnits"class="rightalign"style="width:150px;">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                  
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanNaturalGas"id="txtPostLoanNaturalGas"/></div>
                <div class="divCell"><label id="txtNaturalGasUnitss"></label></div>
            </div> 

             <div class="divRow">
                <div class="divCell">Crude Oil</div>                           
                <div class="divCell"><input type="text" name="txtPreLoanCrudeOil"id="txtPreLoanCrudeOil"/></div>
                <div class="divCell">
                    <select name="ddlCrudeOilUnits"id="ddlCrudeOilUnits"class="rightalign"style="width:150px;">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanCrudeOil"id="txtPostLoanCrudeOil"/></div>
                <div class="divCell"><label id="txtCrudeOilyUnitss"></label></div>
            </div>   

            <div class="divRow">
                <div class="divCell">Gasoline</div>                                            
                <div class="divCell"><input type="text" name="txtPreLoanGasoline"id="txtPreLoanGasoline"/></div>
               <div class="divCell">
                    <select name="ddlGasolineUnits"id="ddlGasolineUnits"class="rightalign"style="width:150px;">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanGasoline"id="txtPostLoanGasoline"/></div>
                <div class="divCell"><label id="txtGasolineUnitss"></label></div>
            </div> 

            <div class="divRow">
                <div class="divCell">Diesel</div>                                       
                <div class="divCell"> <input type="text" name="txtPreLoanDiesel"id="txtPreLoanDiesel"/></div>
               <div class="divCell">
                    <select name="ddlDieselUnits"id="ddlDieselUnits"class="rightalign"style="width:150px;">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanDiesel"id="txtPostLoanDiesel"/></div>
                <div class="divCell"><label id="txtDieselUnitss"></label></div>
            </div> 

            <div class="divRow">
                <div class="divCell">Biodiesel</div>                                                           
                <div class="divCell"><input type="text" name="txtPreLoanBiodiesel"id="txtPreLoanBiodiesel"/></div>
                <div class="divCell">
                    <select name="ddlBiodieselUnits"id="ddlBiodieselUnits"class="rightalign"style="width:150px;">             
                        <option value="kg/yr">kg/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                                          
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanBiodiesel"id="txtPostLoanBiodiesel"/></div>
                <div class="divCell"><label id="txtBiodieselUnitss"></label></div>
            </div>   

            <div class="divRow">
                <div class="divCell">Coking Coal</div>                                           
                <div class="divCell"><input type="text" name="txtPreLoanCoakingCoal"id="txtPreLoanCoakingCoal"/></div>
                <div class="divCell">
                    <select name="ddlCokingCoalUnits"id="ddlCokingCoalUnits"class="rightalign"style="width:150px;">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                  
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanCoakingCoal"id="txtPostLoanCoakingCoal"/></div>
                <div class="divCell"><label id="txtCoakingCoalUnitss"></label></div>
            </div>   

            <div class="divRow">
                <div class="divCell">Compressed natural gas</div>                                                                      
                <div class="divCell"><input type="text" name="txtPreLoanCompressed"id="txtPreLoanCompressed"/></div>
                <div class="divCell">
                    <select name="ddlCompressedUnits"id="ddlCompressedUnits"class="rightalign"style="width:150px;">             
                        <option value="kg/yr">kg/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanCompressed"id="txtPostLoanCompressed"/></div>
                <div class="divCell"><label id="txtCompressedUnitss"></label></div>
            </div>  

            <div class="divRow">
                <div class="divCell">Liquified petroleum gas</div>                                                   
                <div class="divCell"><input type="text" name="txtPreLoanLiquifiedGas"id="txtPreLoanLiquifiedGas"/></div>
                <div class="divCell">
                    <select name="ddlLiquifiedGasUnits"id="ddlLiquifiedGasUnits"class="rightalign"style="width:150px;">             
                        <option value="kg/yr">kg/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanLiquifiedGasy"id="txtPostLoanLiquifiedGas"/></div>
                <div class="divCell"><label id="txtLiquifiedGasUnitss"></label></div>               
            </div>        
</div>
<div class="divTable">
             <div class="divRow">
                <div class="divCell"><b>Form of Energy</b><span>*</span></div>
                <div  class="divCell"><b>Current pre-loan consumption</b><span>*</span></div>
                <div  class="divCell"><b>Units</b><span>*</span></div>
                <div  class="divCell"><b>Expected post-loan consumption</b><span>*</span></div>
                <div  class="divCell"><b>Units</b></div>
             </div>

            <div class="divRow">
                <div class="divCell">Electricity</div>                
                <div class="divCell"><input type="text" name="txtPreLoanElectricity"id="txtPreLoanElectricity" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlElectricityUnits"id="ddlElectricityUnits"class="rightalign align">             
                        <option value="kWh/yr">kWh/yr</option>
                        <option value="MWh/yr">MWh/yr</option>                                  
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanElectricity"id="txtPostLoanElectricity" class="respowidth"/></div>
                <div class="divCell"><label id="txtElectricityUnitss"></label></div>
            </div>  

            <div class="divRow">
                <div class="divCell">Heat</div>                       
                <div class="divCell"><input type="text" name="txtPreLoanHeat"id="txtPreLoanHeat" class="respowidth"/></div>
               <div class="divCell">
                    <select name="ddlHeatUnits"id="ddlHeatUnits"class="rightalign align">             
                        <option value="btu/yr">btu/yr</option>
                        <option value="GJ/yr">GJ/yr</option>
                        <option value="kcal/yr">kcal/yr</option>                                    
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanHeat"id="txtPostLoanHeat" class="respowidth"/></div>
                <div class="divCell"><label id="txtHeatUnitss"></label></div>
            </div> 

             <div class="divRow">
               <div class="divCell">Natural Gas</div>                                    
                <div class="divCell"><input type="text" name="txtPreLoanNaturalGas"id="txtPreLoanNaturalGas" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlNaturalGasUnits"id="ddlNaturalGasUnits"class="rightalign align">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                  
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanNaturalGas"id="txtPostLoanNaturalGas" class="respowidth"/></div>
                <div class="divCell"><label id="txtNaturalGasUnitss"></label></div>
            </div> 

             <div class="divRow">
                <div class="divCell">Crude Oil</div>                           
                <div class="divCell"><input type="text" name="txtPreLoanCrudeOil"id="txtPreLoanCrudeOil" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlCrudeOilUnits"id="ddlCrudeOilUnits"class="rightalign align">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanCrudeOil"id="txtPostLoanCrudeOil" class="respowidth"/></div>
                <div class="divCell"><label id="txtCrudeOilyUnitss"></label></div>
            </div>   

            <div class="divRow">
                <div class="divCell">Gasoline</div>                                            
                <div class="divCell"><input type="text" name="txtPreLoanGasoline"id="txtPreLoanGasoline" class="respowidth"/></div>
               <div class="divCell">
                    <select name="ddlGasolineUnits"id="ddlGasolineUnits"class="rightalign align">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanGasoline"id="txtPostLoanGasoline" class="respowidth"/></div>
                <div class="divCell"><label id="txtGasolineUnitss"></label></div>
            </div> 

            <div class="divRow">
                <div class="divCell">Diesel</div>                                       
                <div class="divCell"> <input type="text" name="txtPreLoanDiesel"id="txtPreLoanDiesel" class="respowidth"/></div>
               <div class="divCell">
                    <select name="ddlDieselUnits"id="ddlDieselUnits"class="rightalign align">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanDiesel"id="txtPostLoanDiesel" class="respowidth"/></div>
                <div class="divCell"><label id="txtDieselUnitss"></label></div>
            </div> 

            <div class="divRow">
                <div class="divCell">Biodiesel</div>                                                           
                <div class="divCell"><input type="text" name="txtPreLoanBiodiesel"id="txtPreLoanBiodiesel" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlBiodieselUnits"id="ddlBiodieselUnits"class="rightalign align">             
                        <option value="kg/yr">kg/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                                          
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanBiodiesel"id="txtPostLoanBiodiesel" class="respowidth"/></div>
                <div class="divCell"><label id="txtBiodieselUnitss"></label></div>
            </div>   

            <div class="divRow">
                <div class="divCell">Coking Coal</div>                                           
                <div class="divCell"><input type="text" name="txtPreLoanCoakingCoal"id="txtPreLoanCoakingCoal" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlCokingCoalUnits"id="ddlCokingCoalUnits"class="rightalign align">             
                        <option value="litre/yr">litre/yr</option>
                        <option value="m3/yr">m3/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                  
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanCoakingCoal"id="txtPostLoanCoakingCoal" class="respowidth"/></div>
                <div class="divCell"><label id="txtCoakingCoalUnitss"></label></div>
            </div>   

            <div class="divRow">
                <div class="divCell">Compressed natural gas</div>                                                                      
                <div class="divCell"><input type="text" name="txtPreLoanCompressed"id="txtPreLoanCompressed" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlCompressedUnits"id="ddlCompressedUnits"class="rightalign align">             
                        <option value="kg/yr">kg/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanCompressed"id="txtPostLoanCompressed" class="respowidth"/></div>
                <div class="divCell"><label id="txtCompressedUnitss"></label></div>
            </div>  

            <div class="divRow">
                <div class="divCell">Liquified petroleum gas</div>                                                   
                <div class="divCell"><input type="text" name="txtPreLoanLiquifiedGas"id="txtPreLoanLiquifiedGas" class="respowidth"/></div>
                <div class="divCell">
                    <select name="ddlLiquifiedGasUnits"id="ddlLiquifiedGasUnits"class="rightalign align">             
                        <option value="kg/yr">kg/yr</option>
                        <option value="tonne/yr">tonne/yr</option>                                      
                    </select>
                </div>
                <div class="divCell"><input type="text" name="txtPostLoanLiquifiedGasy"id="txtPostLoanLiquifiedGas" class="respowidth"/></div>
                <div class="divCell"><label id="txtLiquifiedGasUnitss"></label></div>               
            </div>        
</div>

<div class="divAlign">
<h4><center>Production details</center></h4>
<div>
   <label class="leftalign">Production units<br />(e.g.Tonnes,Kg,m3,or widgets etc.)</label><span>*</span>
   <input type="text" name="txtProductionUnit"id="txtProductionUnit"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign">Annual pre-loan production</label><span>*</span>
   <input type="text" name="txtAnnualPreProduction"id="txtAnnualPreProduction"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign">Annual post-loan production</label><span>*</span>
   <input type="text" name="txtAnnualPostProduction"id="txtAnnualPostProduction"class="rightalign"/>
</div><br />
</div>

<div class="divAlign">
<h4><center>Eligibility results</center></h4>
<div>
    <label class="leftalign">Pre-loan specific energy use</label>
   <input type="text" name="txtPreSpecificEnergyUse"id="txtPreSpecificEnergyUse"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign">Post-loan specific energy use</label>
   <input type="text" name="txtPostSpecificEnergyUse"id="txtPostSpecificEnergyUse"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign"><b>Eligibility indicator</b></label>
   <input type="text" name="txtEligibilityIndicator"id="txtEligibilityIndicator"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign"></label>
    <label class="alignment"><b>Project Eligible</b></label>
</div><br />

<div>
    <label class="leftalign"><b>Annual energy savings</b></label>
   <input type="text" name="txtAnnualEnergySavings"id="txtAnnualEnergySavings"class="rightalign"/>
</div><br />

<div>
    <label class="leftalign"><b>Enter optional EE loan details?</b></label>
   <span class="alignment">
        <input type="radio" name="radEELoanDetails" value="Yes"/>Yes
        <input type="radio" name="radEELoanDetails" value="No"/>No
   </span>
</div>

</div><br />

<div>
    <input type="button" id="btnSave" name="btnSave" value="Save" />
    <input type="button" id="btnValidate" name="btnValidate" value="Validate & Next" />
    <input type="button" id="btnSubmit" name="btnSubmit" value="Submit" />
</div>
</form>
</div>
</div> 
```

我的 ipad.css 文件是

```
.body
{
width:100%;
}  
#wrapper
{
    width:100%;
}
#container
{
    width:100%;
}
    #frmEnergyEfficiency
    {
        width:100%;
        height:900px;       
        margin:0px auto;        
    }
    .leftalign
    {
      text-align:left;
      padding-left:2px;
    }

     .rightalign
    {
     float:right;   
     padding-right:2px;
    }
    .alignment
    {
    width:100%;
     float:right;   
     padding-right:0px;
    }
    .divTable{
  display:table;         
  width:790px;                 
  border-spacing:5px;
}
.divRow{
  display:table-row;
  width:790px;
  clear:both;
}
.divCell{
  float:left;
  display:table-column;         
  width:100%;        
}
.divAlign
{
   text-align:left;
   width:400px;
}

.divAlign1
{
    text-align:left;
   width:100%;
}
.align
{
    width:100px;
} 
```

我的 ipad1.css 文件是

```
.body
{
width:100%;
}  
#wrapper
{
    width:100%;
}
#container
{
    width:100%;
}
    #frmEnergyEfficiency
    {
        width:100%;
        height:900px;       
        margin:0px auto;        
    }
    .leftalign
    {width:100%;
      text-align:left;
      padding-left:2px;
    }
    .rightalign
    {width:100%;
     float:right;   
     padding-right:2px;
    }
    .respowidth
    {
     width:100%;    
    }
    .alignment
    {width:100%;
     float:right;   
     padding-right:0px;
    }
    .divTable{
  display:table;                         
  border-spacing:5px;
}
.divRow{
  display:table-row;
  width:100%;
  clear:both;
}
.divCell{
  float:left;
  display:table-column;         
  width:100%;        
}
.divAlign
{
   text-align:left;
   width:100%;
}

.divAlign1
{
    text-align:left;
   width:100%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:41:44.090

确保在您的设计中使用“%”而不是“px”...这意味着对于具有填充或边距的 100% 内部元素的容器应以百分比表示...

百分比将使您的工作快速完成...

也尝试在标题上实现视口脚本，

```
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1"> 
```

例如，

```
.class1 {
    width:100%;
    float:right;
    padding-right:2px;
}
.class2 {
    width:600px;
} 
```

可以写成，

```
.class1 {
    width:99%;
    float:right;
    padding-right:1%;
}
.class2 {
    width:70%;
} 
```

还要替换 css 链接，

```
<link rel="stylesheet" media="only screen and (max-width:724px)" href="ipad.css">
<link rel="stylesheet" media="only screen and (max-width:424px)" href="ipad1.css"> 
```

对此

```
<link href="ipad.css" rel="stylesheet" type="text/css" media="all and (min-width: 481px) and (max-width: 800px)" /> //For Tablet
<link href="ipad1.css" rel="stylesheet" type="text/css" media="all and (min-width: 0px) and (max-width: 480px)" /> //For mobile 
```

对于输入框，尝试浮动表单元素，

例如，

```
<div class="form-contain"><label>Name</label><div class="input-contain"><input type="text" /></div></div>

.form-contain { overflow:hidden; }
.form-contain label { width:30%; text-align:right; float:left; }
.form-contain .input-contain { width:70%; float:left; }
.form-contain .input-contain input { width:100%; } 
```

对于移动设备，将宽度保持为 100%....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:46:12.563

**用于您的 html 页面的 head 部分**

像这样

```
<head>
<meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
</head> 
```

# xml - 使用 XPath contains() 得到太多结果

> ID：15289758
> 
> 赞同：0
> 
> 时间：2013-03-08T08:35:19.780
> 
> 标签：xml, xpath

我有一个 XML 文件，其中一些子树标有 ID-Tags

```
<root>
  <A>
    <someid>5</someid>
    ...
  </A>
  <B>
    <someid>15</someid>
    ...
  </B>
</root> 
```

如果我尝试在 XPath 的帮助下通过这个 id 找到一个子树，`contains()`我显然会遇到像 5 和 15 这样的数字的麻烦：

```
//someid[ contains( text(), "5" ) ] 
```

我尝试使用`matches()`但不支持。

任何想法如何在没有比赛的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:57:28.757

```
//someid[text()="5"] 
```

我不确定您使用的是哪种语言，所以我将在 PHP 中进行演示：

```
$str=<<<XML
<root>
  <A>
    <someid>5</someid>
  </A>
  <B>
    <someid>15</someid>
  </B>
</root>
XML;
$xml=simplexml_load_string($str);
foreach($xml->xpath('//someid[text()="5"]') as $node)
{
    echo $node;
} 
```

输出`5`。

[现场演示](http://3v4l.org/9jljb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:06:58.147

如果您的 ID 都是数字，则可以使用

```
//someid[number()=5] 
```

您也可以使用 matches() 和正则表达式

```
//someid[matches(text(),"^5$")] 
```

# mongodb - mongodb按字段匹配排序

> ID：15289761
> 
> 赞同：0
> 
> 时间：2013-03-08T08:35:35.357
> 
> 标签：mongodb

我希望根据匹配的字段对结果进行排序。鉴于我有一个包含这样的文档的集合：

```
{
   "foo": "orange",
   "bar": "apple",
   "baz": "pear",
}

{
   "foo": "kiwi",
   "bar": "orange",
   "baz": "banana",
} 
```

如何按匹配的字段对 foo、bar 或 baz 中匹配“橙色”的文档的结果进行排序，即在字段 foo 上匹配的所有文档都应出现在结果中，在字段 bar 等文档之前？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:16:10.143

您需要按以下顺序列出的文档：

*   其中 foo = "橙色"
*   其中bar =“橙色”
*   其中baz =“橙色”

这不能用单个 find().sort() 命令来完成，因为没有办法按字段的键（名称）排序，只能按其内容。

但是，使用聚合（）是可能的：

```
> db.xx.find()
{ "_id" : 1, "bar" : "apple", "baz" : "pear", "foo" : "orange" }
{ "_id" : 2, "foo" : "banana", "bar" : "apple", "baz" : "orange" }
{ "_id" : 3, "foo" : "banana", "bar" : "orange", "baz" : "pear" }
{ "_id" : 4, "foo" : "banana", "bar" : "apple", "baz" : "pear" }
{ "_id" : 5, "foo" : "orange", "bar" : "apple", "baz" : "pear" }
>     db.xx.aggregate([
...         { $match: { $or: [ { foo: "orange" }, { bar: "orange" }, { baz: "orange" } ] } },
...         { $project: { "_id": 1,
...                       "which": { "$cond": [{ "$eq": [ "$foo", "orange" ]}, "01foo", 
...                                { "$cond": [{ "$eq": [ "$bar", "orange" ]}, "02bar", "03baz" ] }
...                       ] }
...         } },
...         { $group: { _id: { which: "$which", _id: "$_id" } } },        
...         { $sort: { "_id.which": 1, "_id._id": 1 } },
...         { $project: { which: { $substr: ["$_id.which", 2, -1] }, _id: "$_id._id" } },        
...     ]);
{
    "result" : [
        {
            "_id" : 1,
            "which" : "foo"
        },
        {
            "_id" : 5,
            "which" : "foo"
        },
        {
            "_id" : 3,
            "which" : "bar"
        },
        {
            "_id" : 2,
            "which" : "baz"
        }
    ],
    "ok" : 1
} 
```

你是对的，如果你认为聚合太复杂了。如果您的数据以不同的方式组织起来会更容易，例如

```
{ type: "foo", value: "orange" } 
```

并具有可排序的类型名称-例如“ba1”、“ba2”、“ba3”而不是“foo”、“bar”、“baz”

有关聚合的更多信息，请参阅[http://docs.mongodb.org/manual/reference/aggregation](http://docs.mongodb.org/manual/reference/aggregation)和[http://docs.mongodb.org/manual/tutorial/aggregation-examples/](http://docs.mongodb.org/manual/tutorial/aggregation-examples/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:33:49.030

试试下面的查询：

```
 db.test.find({$or:[{'foo':"orange"},{'bar':"orange"}]}).sort({'foo':-1,'bar':-1}) 
```

# php - 将字符串（包含换行符）传递给 PHP 中的 jar

> ID：15289763
> 
> 赞同：0
> 
> 时间：2013-03-08T08:35:53.143
> 
> 标签：php, shell, sms

我正在使用外部 java 库发送 SMS。我过去发送的代码是这样的：

```
$command = "java -jar vigsyssmscom4.jar \"1\" \"$phoneNum\" \"$message\"";
$apiOutput = shell_exec($command . "\n"); 
```

但是，此代码不允许 $message 包含任何换行符，因为它将立即执行命令。无论如何，我可以通过命令行传递带有换行符的字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:41:06.987

你想看看 escapeshellarg：http: [//php.net/manual/en/function.escapeshellarg.php](http://php.net/manual/en/function.escapeshellarg.php)

```
$message = "hello\nworld";
$command = "echo ".escapeshellarg($message);
$apiOutput = shell_exec($command);
var_dump($apiOutput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:59:43.880

我已经修改了 jar 文件和相关类，以将所有选定的字符替换为消息变量中的新行。这有助于避免在消息参数中传递换行符。

# jquery - UserPicker 输入元素，如 GMAIL

> ID：15289765
> 
> 赞同：6
> 
> 时间：2013-03-08T08:36:07.980
> 
> 标签：jquery, user-interface, input, gmail, label

我正在搜索一个看起来像 Gmail 的用户选择器，当您添加“收件人”地址时，它会变成标签，或者当您添加标签时就像 StackOverflow

我找到了这个插件： [http](http://htmlpreview.github.com/?https://github.com/ErikNoren/entitypicker/blob/master/entitypickerdemo.html) ://htmlpreview.github.com/?https://github.com/ErikNoren/entitypicker/blob/master/entitypickerdemo.html 但我想找到更多的插件来比较...

就我而言，就我而言，我需要在一个标签中转换两个值（邮件和电话）......我该怎么做？

非常感谢你！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T08:39:38.570

我目前选择的自动完成插件是 Select2。

你可以在这里找到它 [http://ivaynberg.github.io/select2/](http://ivaynberg.github.io/select2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-27T11:07:39.190

我使用 typeahead.js 和 jquery 创建了一个小提琴。请看一看。 [https://jsfiddle.net/Rohith_KP/k73msa47/](https://jsfiddle.net/Rohith_KP/k73msa47/)

```
! function(source) {
  function extractor(query) {
    var result = /([^,]+)$/.exec(query);
    if (result && result[1])
      return result[1].trim();
    return '';
  }

  function tagTmpl(item) {
    return '<div class="selected">' +
      '<span class="value-wrapper">' +
      '<div class="value">' + item + '</div>' +
      '<div class="value-close"></div>' +
      '</span>' +
      '</div>'
  }
  <!--init  -->
  var initData = ["Alabama", "Alaska", "Arizona", "Arkansas"],
    tagTmpls = '';
  $.each(initData, function(index, item) {
    tagTmpls += tagTmpl(item);
  })
  $('.multiselect').before(tagTmpls);
  $('.multiselect-display').text(initData.join(', '));
  $('.multiselect').data({
    "selectedValues": initData
  });
  <!-- end init -->
  $('.multiselect').typeahead({
    source: source,
    updater: function(item) {
      var tmpl = tagTmpl(item);
      this.$element.before(tmpl);
      var dataToSend = this.$element.data("selectedValues");
      dataToSend = dataToSend ? dataToSend : [];
      dataToSend.push(item);
      this.$element.data({
        "selectedValues": dataToSend
      })
      return '';
    },
    matcher: function(item) {
      var tquery = extractor(this.query);
      if (!tquery) return false;
      return ~item.toLowerCase().indexOf(tquery)
    },
    highlighter: function(item) {
      var query = extractor(this.query).replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
      return item.replace(new RegExp('(' + query + ')', 'ig'), function($1, match) {
        return '<strong>' + match + '</strong>'
      })
    }
  });

  $('.multiselect-wrapper').off('click').on('click', '.value-close', function() {
    $this = $(this);
    var text = $this.siblings('.value').text();
    var selectedValues = $(event.currentTarget).find('.multiselect').data("selectedValues");
    removeStringFromArray(selectedValues, text);
    $this.parents('.selected').hide();
    window.setTimeout(function() {
      $this.parents('.selected').remove();
    }, 0)
  })
  $('.multiselect-wrapper').off('click', multislctWrprClickHndlr).on('click', multislctWrprClickHndlr)

  function multislctWrprClickHndlr(e) {
    $("body").off('click', bodyClickHandler).on('click', bodyClickHandler);
    if (!$(e.target).is('.selected')) {
      $('.multiselect').focus()
    }
  };
  $('.multiselect-display').off('click', multislctDsplyClickHndlr).on('click', multislctDsplyClickHndlr)

  function multislctDsplyClickHndlr() {
    $(this).hide()
    $('.multiselect-wrapper').trigger('click').show();
  };

  function bodyClickHandler(e) {
    debugger;
    if ($(e.target).is('.multiselect-wrapper') || $(e.target).parents('.multiselect-wrapper').length || $(e.target).is('.multiselect-display') || $(e.target).parents('.multiselect-display').length) {
      e.preventDefault();
      return;
    }
    $("body").off('click', bodyClickHandler);
    $('.multiselect-wrapper').hide();
    $('.multiselect-display').text($('.multiselect').data("selectedValues").join(', ')).show()
  }

  function removeStringFromArray(array, search_term) {
    for (var i = array.length - 1; i >= 0; i--) {
      if (array[i] === search_term) {
        array.splice(i, 1);
        break;
      }
    }
  }
}(["Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut"]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-01T05:13:50.830

我发现这个插件可以满足要求。享受。

[UserPicker 输入元素，如 GMAIL](http://tagedit.webwork-albrecht.de/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-22T21:31:11.163

试试这个。一个为电子邮件相关应用程序设计的 jQuery 插件，允许访问者在单个文本字段中添加/删除多个逗号分隔的电子邮件地址。具有使用正则表达式的基本电子邮件地址验证功能。

[https://github.com/pierresh/multiple-emails.js](https://github.com/pierresh/multiple-emails.js)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-29T10:21:00.983

如今，使用插件让事情变得更容易了。

查看[https://github.com/jshjohnson/Choices](https://github.com/jshjohnson/Choices)

该插件与`text input`,`select`和`multiple select`

使用这个 JS 插件，您甚至可以在添加到列表之前验证项目。

```
For example:

 1\. You can write your own validation rules
 2\. You can use Regex among other awesome things 
```

它更容易初始化：

```
var choice = new Choices(document.getElementById('itemID'), {
  option1:option, 
  option2: option
} 
```

它甚至有几个回调，例如；等`removingItems`_`addingItems`

示例实现：

[![在此处输入图像描述](../Images/9fb232ec1fc2d265767dc36710ccebf6.png)](https://i.stack.imgur.com/TzJn1.png)

# git - GitHub 提交未记录在“您的贡献”日历中

> ID：15289768
> 
> 赞同：133
> 
> 时间：2013-03-08T08:36:18.173
> 
> 标签：git, github

我一直在`GitHub`从我的 linux shell 对我的 repos 进行连续提交，它们在网站上很好地显示，就像它们应该的那样。唯一的问题是“您的贡献”部分没有显示任何最近的活动。我在 11 月的某一天有一个绿色方块，我不知道我是怎么得到的，但所有其他贡献都没有出现在日历中（但同样，它们**确实** 出现在他们的回购中。
我在这里错过了什么？

[我的 github 网站](https://github.com/roey-angel)

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-10-04T14:22:42.673

对我来说，这个问题是由于我在我的 gitconfig 中使用不同电子邮件的工作计算机提交的。将我的工作电子邮件地址添加到我的 github 帐户并没有使过去的提交显示在摘要中，但是现在新的提交按应有的方式显示。

您可以找到用于存储库的电子邮件地址`git config user.email`。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-10-15T14:45:20.133

来自 git

> 我刚刚看过您对 GoTime2 存储库的贡献，您似乎一直在将提交推送到布局分支。
> 
> 这些贡献没有出现的原因是我们只跟踪提交到存储库的默认分支或 gh-pages 分支的贡献：
> 
> [https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile#which-contributions-are-counted](https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile#which-contributions-are-counted)
> 
> 一旦您的贡献被合并到默认页面或 gh-pages 中，您将在您创作它们的日期获得它们的信用。

**所以在我的情况下，我必须将我的“布局”分支与“主”分支合并，才能看到“你的贡献”出现在日历中。**

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2013-03-08T09:40:57.857

这是一个 Github 问题，有时它们的更新机制不起作用，它会变成“陈旧的缓存”。这没什么大不了的，只需向 support@github.com 发送电子邮件描述问题，他们会立即解决。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2014-12-20T21:07:16.183

一个可能的原因：

> **提交是在分叉中进行的**
> 
> 分叉中的提交将不计入您的贡献。

[https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/](https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-09-04T08:30:26.443

这成功了！我刚用过`$ git config user.email "my email address used on my git repo"`，效果很好。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2015-06-23T15:53:47.257

“您必须使用登录 github 帐户时使用的相同电子邮件 ID 提交更改”

**怎么解决：**

*   使用以下命令更改所有存储库的全局电子邮件 ID。

> git config --global user.email abc@xyz.com

*   或更改一个特定存储库的电子邮件 ID。从特定存储库内部运行以下命令

> git config user.email abc@xyz.com

*   或者在存储库中打开 .git/config 文件并编辑

> 电子邮件 = abc@xyz.com 名称 = abc

其他原因可以在这里找到 [https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/](https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-08-04T03:44:05.753

确保您的本地电子邮件与帐户中的电子邮件完全相同。

转到终端并在要推送提交的文件夹中，运行：

```
git config --global user.email
  #=> TRICULI.TO@MAIL.com

git config --system user.email
  #=> 

git config --local user.email
  #=> triculito@mail.com 
```

类似的事情发生在我身上。我帐户中的电子邮件是--global 中的电子邮件，但我的--local 略有不同，它没有'.'。

（在 Gmail 中，这些电子邮件之间没有区别，它们的工作方式完全相同）。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-12-01T05:21:07.717

所以这通常是由于很多因素造成的，你必须访问这个[GitHub 帮助](https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/#which-contributions-are-counted)

***我发现的最常见的错误是：***

1.  本地计算机上未正确配置电子邮件。（您的笔记本电脑/个人电脑）。
2.  分叉。
3.  不使用默认或 gh-pages 分支进行提交。

我个人最近遇到了问题 1，为此我去了**终端/cmd/cli**并通过运行此命令在本地配置我的电子邮件地址

```
git config --global user.email yourname@email.address 
```

完成后，尝试再次运行此配置，如下所示：

```
git config --global user.email 
```

您应该能够看到：

```
yourname@email.address 
```

*如果这是正确的，那么您已经成功地为您的本地计算机配置了您的全局公共存储库。现在您的下一次提交将记入您的日历。*

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-03-03T09:59:27.223

也许 Github 已经解决了这个问题。有一种简单的方法，去 github.com 邮箱设置：[https ://github.com/settings/emails](https://github.com/settings/emails)

> 个人设置 --> 电子邮件

**您可以在那里添加电子邮件地址，并通过发送验证链接验证您的新电子邮件地址，然后您会发现您之前的提交都记录在“您的贡献”日历中。**并且此电子邮件验证还可以让您接收来自 GitHub 的通知和密码重置。

您的新电子邮件地址将用于与帐户相关的通知（例如帐户更改和账单收据）以及任何基于 Web 的 GitHub 操作（例如编辑和合并）。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2018-03-11T17:17:39.367

我在用于 iOS 开发的 Xcode 9 中遇到了同样的问题。

在 Github 中，我注意到一位非提交者作者。 [![在此处输入图像描述](../Images/6e1b925bb80d05c6d061c6fb4b36a3ae.png)](https://i.stack.imgur.com/66zYa.png)

即使我在 Xcode 中进行了提交。“您的贡献”日历中没有任何贡献。

解决方案：

**全局更改提交者名称和电子邮件**
**用于提交的电子邮件地址必须与您的 GitHub 帐户相关联。**

在终端：

```
$ git config --global user.name "Full Name"
$ git config --global user.email "fullname@gmail.com" 
```

另请参阅 GitHub 帮助：[在 Git 中设置提交电子邮件地址](https://help.github.com/articles/setting-your-commit-email-address-in-git/)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-03-09T13:19:04.073

在我的许多提交发生后（新提交正确显示）并且只能通过从我的个人资料中删除电子邮件地址来显示它们然后重新添加相同的电子邮件地址。

这样做似乎解决了 GitHub 中的缓存问题。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-10-22T11:51:25.893

原来我之前在 GitHub 上更改了我的电子邮件地址，我也忘了更改本地的。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2021-05-10T11:10:11.910

**我通过进行两次更改来解决它**

1.  我使用命令配置了我的本地机器`git config --global user.email "your github email"`
2.  `main to master`我从使用 github 网站 @ [https://github.com/your-username/your-repo-name/settings/branches](https://github.com/your-username/your-repo-name/settings/branches)更改了我的项目 repo 的默认分支

`

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-07-07T22:40:30.987

`git config`即使配置了正确的电子邮件地址，我也不得不手动将我的电子邮件添加到 SourceTree 设置中。只有在这样做之后，GitHub 才开始将我的提交记录到我的贡献图中。

![SourceTree 设置截图](../Images/5c19b14c753494783a36afb2e7615301.png)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-10-02T08:42:25.393

我遇到了同样的问题，原来是因为我本地 git 上的电子邮件与我的 GitHub 帐户上的电子邮件不匹配。

要更新本地计算机上的电子邮件：

```
git config --global user.email "your.email@email.com" 
```

验证您的所有提交是否已在您的 github 上更新，如果没有，您可以通过单击提交并将“.patch”添加到提交 url 的末尾来检查单个提交以查看提交关联的电子邮件，如下所示：

```
https://github.com/username/repoName/commit/9fbe83f71cfc3503.patch 
```

现在您所要做的就是将您看到的电子邮件添加到您的帐户中。（不需要验证）

再次检查提交，您应该会看到您的用户名和信用:)

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-03-17T10:08:16.867

我刚刚通过命令行再次添加了我的电子邮件，它解决了这个问题：

```
$ git config user.email "myemil@mydomain.com" 
```

另一个问题是关于你的分支的。如果您在 maser 旁边创建另一个分支并尝试推送该分支，则可能会出现此问题。就我而言，我已经开始努力掌握并得到解决方案。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-01-05T13:42:58.320

我遇到了同样的问题，这对我有用：GitHub 贡献检查器，链接如下。安装后，该程序会检查您最近提交的有效性并为您提供规则列表，其中未满足的规则/规则以红色显示。

我的问题是 GitHub 使用 Cygwin 终端名称作为电子邮件地址，所以我只是将 Cygwin 终端名称添加到我的个人资料中，并且所有最近的提交都添加到了我的 GitHub 日历中。

**您的提交不会被视为贡献！检查以下详细信息：** [https ://github.com/jdennes/contribution-checker](https://github.com/jdennes/contribution-checker)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-02-10T01:25:30.873

您可以转到[https://github.com/settings/emails](https://github.com/settings/emails) 并使用 git config --global user.email 添加您正在使用的电子邮件

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2020-02-11T01:34:34.173

有同样的问题，我的通过设置邮箱解决了

```
git config --global user.email jonathan.m2ndoza@gmail.com 
```

希望这可以帮助。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2020-05-30T13:15:49.973

我有同样的问题，解决方案非常简单。我为全局电子邮件配置设置了错误的电子邮件

```
git config --global user.email "email@yourmail.com" 
```

> 只需确保上述电子邮件和您的 GitHub 帐户电子邮件相同

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2020-06-02T18:13:18.947

github 上的“贡献日历”或“活动概览”仅记录与 github 帐户中记录的邮件地址相关的提交。

## 更改所有未来提交的邮件地址

正如该线程中的许多其他人已经指出的那样，通过以下方式查找当前本地保存的电子邮件地址：

```
git config user.email 
```

如果它与 github 上的邮件不匹配，请使用以下命令进行更改：

```
git config --global user.email my_email@gmail.com 
```

这将全局更改所有未来提交的邮件地址，但不会影响过去提交的“贡献概述”。您可以按照[官方文档](https://help.github.com/en/github/setting-up-and-managing-your-github-user-account/setting-your-commit-email-address)进行详细说明。

## 更改邮件地址以更新过去提交的概述

你意识到你过去的许多提交没有正确记录在 Github “贡献概述”中： [![在此处输入图像描述](../Images/3692b343728cb463f03da69aabd952d9.png)](https://i.stack.imgur.com/sbmxg.png)

[要更改它，您可以按照官方 github 文档中](https://help.github.com/en/github/using-git/changing-author-info)解释的步骤更改存储库的作者信息。

一个简短的总结：

1.  打开 git bash
2.  克隆一个裸仓库

    ```
    git clone --bare https://github.com/user/repo.git
    cd repo.git 
    ```

3.  更改变量后将以下代码粘贴到 git bash 控制台中`OLD_EMAIL`，`CORRECT_NAME`并且`CORRECT_EMAIL`：

    ```
    #!/bin/sh

    git filter-branch --env-filter '

    OLD_EMAIL="your-old-email@example.com"
    CORRECT_NAME="Your Correct Name"
    CORRECT_EMAIL="your-correct-email@example.com"

    if [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]
    then
    export GIT_COMMITTER_NAME="$CORRECT_NAME"
    export GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"
    fi
    if [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]
    then
    export GIT_AUTHOR_NAME="$CORRECT_NAME"
    export GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"
    fi
    ' --tag-name-filter cat -- --branches --tags 
    ```

4.  按回车键运行脚本

5.  将更正后的历史推送到 github

    ```
    git push --force --tags origin 'refs/heads/*' 
    ```

此过程应更新“贡献概述”，现在还显示以前未显示的提交： [![在此处输入图像描述](../Images/118454ade23dabf9530f898f980a4aa5.png)](https://i.stack.imgur.com/RLkHq.png)

**警告**：*此操作会破坏您的存储库的历史记录。如果您正在与其他人在存储库上进行协作，那么重写已发布的历史记录被认为是不好的做法。你应该只在紧急情况下这样做。*

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2020-06-30T17:06:41.840

[GitHub 在帮助](https://help.github.com/en/github/setting-up-and-managing-your-github-profile/why-are-my-contributions-not-showing-up-on-my-profile)中明确说明了他们如何衡量您的贡献：

*   ***问题和拉取请求：***

    *   仅当它们在独立存储库中打开时，而不是在 fork 中打开
*   ***提交：***
    仅当它们满足以下所有条件时：

    *   用于提交的电子邮件地址与您的 GitHub 帐户相关联

    *   提交是在独立存储库中进行的，而不是分叉

    *   提交是：

        *   在存储库的默认分支中（通常是 master）
        *   在 gh-pages 分支中（用于带有项目站点的存储库）

    此外，以下至少一项必须为真：

    *   您是存储库的协作者或拥有该存储库的组织的成员
    *   您已经分叉了存储库
    *   您已在存储库中打开拉取请求或问题
    *   您已为存储库加注星标

***注意：***在提交满足要求的提交后，您可能需要等待长达 24 小时才能看到贡献出现在您的贡献图表上

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2021-03-06T03:10:31.100

**我就同样的问题联系了 Github 团队**，这是他们的回复，希望对你们中的一些人有所帮助

如果满足某些标准，则计算贡献，如下所述：

[https://docs.github.com/github/setting-up-and-managing-your-github-profile/why-are-my-contributions-not-showing-up-on-my-profile](https://docs.github.com/github/setting-up-and-managing-your-github-profile/why-are-my-contributions-not-showing-up-on-my-profile)

您可以使用此应用程序找出为什么对公共存储库的特定提交不计为贡献：

[https://contribution-checker.herokuapp.com/](https://contribution-checker.herokuapp.com/) 这个贡献检查器非常有用，它解决了我的问题

人们经常发现他们缺少贡献，因为他们的提交是由与他们的 GitHub 帐户无关的电子邮件地址创作的，如下所述：

[https://docs.github.com/github/committing-changes-to-your-project/why-are-my-commits-linked-to-the-wrong-user](https://docs.github.com/github/committing-changes-to-your-project/why-are-my-commits-linked-to-the-wrong-user)

您可以通过将 .patch 添加到提交 URL 的末尾来检查提交的作者，如下所示：

[https://github.com/github/linguist/commit/cfd5cbaba00122fceea1cfb108c5bdc3d451065a.patch](https://github.com/github/linguist/commit/cfd5cbaba00122fceea1cfb108c5bdc3d451065a.patch)

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2020-09-04T18:12:39.040

我通过在本地环境中使用 GitHub 配置文件的用户名作为我的 git 用户名解决了类似的问题。

例如，

> [https://github.com/susithrj](https://github.com/susithrj)

在本地 git 配置中将全局用户名设置为**susithrj**。

> git config --global user.name "susithrj"

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-08-24T16:19:50.793

我最近不得不恢复我的笔记本电脑并且忘记将我的电子邮件重新配置为 git。我的笔记本电脑用户名看起来与我的 git 用户名相似，所以我只是盲目地认为我的提交被正确归因。如发布的那样，您可以更改全局电子邮件设置。但是，如果您想更正项目中未归因的提交，您可以使用此运行此脚本来创建一个别名`gca`，您可以在您的 git 项目目录中运行该别名来更改您过去提交的作者身份。

从您的`~`目录中，添加：

```
$ cat <<EOF >> ~/.aliases
 function git_change_authorship {
 git filter-branch -f --env-filter "
  GIT_AUTHOR_NAME=\"\$1\"
  GIT_AUTHOR_EMAIL=\"\$2\"
  GIT_COMMITTER_NAME=\"\$1\"
  GIT_COMMITTER_EMAIL=\"\$2\"
 "
 }
 alias gca=git_change_authorship
 EOF

 $ source ~/.aliases 
```

然后在你的 git 项目目录中运行`gca <git username> <git email address>`

小心！我只在我自己的个人项目中使用过这个，我是唯一的提交者。还没有机会通过小组项目对其进行测试，因此请谨慎进行。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-06-23T18:34:02.913

我检查了我的存储库的“见解”部分/选项卡，而不是我当前的用户，有一个匿名用户（也是我），所以我将当前计算机中的电子邮件配置更改为我使用 github 的配置如上所述。

[![洞察力](../Images/9924312eb648cc0f310783adfe7d74c6.png)](https://i.stack.imgur.com/cfNYD.png)

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2019-09-23T09:27:07.550

您可以将您的电子邮件保密，并且仍然会在您的日历中显示贡献。您可以选择将您的电子邮件地址从[*github 电子邮件设置*](https://github.com/settings/emails)中保密，并在您的 git 配置中 使用*github noreply 电子邮件地址。*

```
git config user.email "xxxxxxxxxxx@users.noreply.github.com" 
```

**笔记**

对我来说，我选择将我的电子邮件从*github 电子邮件设置*中保密。这给了我一个错误

```
Your push would publish a private email address. 
```

在尝试推送到我的仓库时。我删除了电子邮件。在这之后推动是成功的，但贡献没有记录在我的日历中。

正如 GitHub 在电子邮件设置页面中提到的

> 在执行基于 Web 的 Git 操作（例如编辑和合并）并代表您发送电子邮件时，我们将删除您的公开个人资料电子邮件并使用 xxxxxxxxxxx@users.noreply.github.com。如果您希望命令行 Git 操作使用您的私人电子邮件，您必须[在 Git 中设置您的电子邮件](https://help.github.com/articles/setting-your-email-in-git)。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2020-08-09T20:16:44.680

确保使用用户标志。例如 `git push -u origin` ，而不是 `git push`

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2021-06-08T12:13:38.430

我遇到了同样的问题，并发现我没有推送到 origin/main 分支，而是推送到其他分支。我通过合并两个分支来解决它。此外，即使两个分支合并，如果`origin/main`分支落后于多个提交，贡献部分仍然不会更新。仍然需要进行合并（某种）以确保`origin/main`始终更新分支，请执行以下操作：

*注意：（此解决方案很容易适用于从一个远程提取并推送到不同目标存储库（problamacic 一个）的本地存储库）*

1.  `git pull origin main:temp`

    *   这会将主分支拉到一个临时分支（temp 是本地分支），但`origin/main`如果一个推送多个分支系统，分支仍然落后于多个提交。我们需要检查到临时分支以合并/向前移动它（可以这么说）
2.  `git checkout temp`

    *   它将从：`(origin/main, origin/HEAD, temp)` to->>>>>>>>`(HEAD -> temp, origin/main, origin/HEAD)`这意味着现在 HEAD 指向`temp`分支，所以我们可以让它向前移动（可以这么说）几个提交（或合并，无论哪种情况）。
3.  `git merge branch-second`

    *   现在我们要在`(origin/branch-second, main, branch-second)` 本地合并到 branch-second:，这是合并后高于 temp 的几个提交，如下所示：`(HEAD -> temp, origin/branch-second, main, branch-second)`
4.  `git push origin temp:main`

    *   现在将 temp 推送到 origin 中的 main （origin 表示远程）：
5.  `git log --all --decorate --oneline --graph`显示：

    *   `(HEAD -> temp, origin/main, origin/HEAD, origin/branch-second, main, branch-second)`

##### 因此，origin/main 被合并并推送到第二分支，并且都处于同一级别，并且贡献开始出现:) 希望它可以节省您的时间

查看我的中号文章： [Medium](https://yogender027mae.medium.com/commits-are-not-visible-on-the-github-contribution-section-of-my-github-profile-717c03a6ef80)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-01-25T20:13:30.180

对我来说是项目中的文件：

```
/.git/config

...
[user]
    name = your user
    email = user@host.com
... 
```

在块 [user] 内仔细检查“电子邮件”是否正确（我的不正确）并且名称是唯一的（我的重复了）。

仔细检查贡献者正在增加使用：

```
git shortlog -sn 
```

进行推送，检查哪个正在增加计数器，并且该名称应该是块内的名称 [用户]

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-10-15T01:35:04.303

对于那些在 git config 中输入正确的（您认为的）电子邮件和名称后仍然无法使其工作的人：

**删除包裹电子邮件和名称的引号。**

这对我有用，粗心的我..

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2022-02-27T19:40:20.237

我通过以下方式解决了我的错误：

我已经使用以下方式上传了回购： `git remote add url "my-repo-link"` `git push url master`

即使在 push 之后，使用**url 而不是 origin**也没有显示任何绿点，所以，我创建了另一个 repo，然后重新初始化并提交，这次我写： `git remote add origin "my-repo-link"` `git push origin master`

我之前对前回购的所有承诺也都添加到了我的新回购中……节省了我的工作和时间

# c# - windows phone 侧边栏菜单

> ID：15289770
> 
> 赞同：0
> 
> 时间：2013-03-08T08:36:19.230
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我的 Android 上有一些应用程序。其中一些应用程序在左侧有不可见的菜单。当用户单击表单顶部的图标时，它会在左侧显示菜单但不关闭当前表单。这是来自适用于 android 的 GooGLE+ 应用程序的图片。

我想像在 Google+ 应用程序中一样使用左侧菜单创建应用程序，但适用于 Windows Phone 7.X

我安装了 Visual Studio 2010、Silverlight 4 和 Silverlight 5。我使用 C# 作为一种语言

![左侧的 Google+ 菜单](../Images/dcc412c85786b32c36c027f15e9ea93a.png)

更新（澄清）：我的问题是 WP 平台中图片中菜单的替代方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:54:34.003

好吧，没有像 iOS 那样简单的方法来做到这一点。但是您可以使用 Visual State Manager。

基本上，塑造比您的舞台更大的屏幕。然后，您需要创建一个状态，将您的屏幕在舞台上向左移动一点，您可以使用一个按钮。您需要在按钮的单击方法上调用状态。

PS：不要使用情节提要。使用 States 是最简单的方法。

# php - PHP 将 html 转换为空格，> 转换为 > 等

> ID：15289772
> 
> 赞同：16
> 
> 时间：2013-03-08T08:36:25.303
> 
> 标签：php, html

我想将所有 html 标签（  > < 等）转换为文本格式；我试过

```
html_entity_decode() 
```

但它会回来吗？如果 。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-06T07:59:32.330

使用`htmlspecialchars_decode`是相反的`htmlspecialchars`。
PHP 文档页面中的示例：

```
 $str = '<p>this -&gt; &quot;</p>';
    echo htmlspecialchars_decode($str); 
    //Output: <p>this -> "</p> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T08:38:29.223

[html_entity_decode()与](http://php.net/manual/en/function.html-entity-decode.php)[htmlentities()](http://www.php.net/manual/en/function.htmlentities.php)的相反之处在于它将字符串中的所有 HTML 实体转换为其适用的字符。

```
$orig = "I'll \"walk\" the <b>dog</b> now";

$a = htmlentities($orig);

$b = html_entity_decode($a);

echo $a; // I'll &quot;walk&quot; the &lt;b&gt;dog&lt;/b&gt; now

echo $b; // I'll "walk" the <b>dog</b> now 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-08T08:40:52.663

利用

```
html_entity_decode()
```

代替

```
html_entity_encode()
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-06T21:45:49.000

如果您查看[html_entity_decode()](http://php.net/manual/en/function.html-entity-decode.php)手册：

> 你可能想知道为什么 trim(html_entity_decode(' ')); 不会将字符串缩减为空字符串，这是因为 ' ' 实体不是 ASCII 码 32（由 trim() 剥离）而是默认 ISO 8859-1 字符集中的 ASCII 码 160 (0xa0)。

您可以将 html_entity_decode() 函数嵌套在[str_replace()](http://ca3.php.net/manual/en/function.str-replace.php)到 ASCII #160 到空格中：

```
<?php

echo str_replace("\xA0", ' ', html_entity_decode('ABC &nbsp; XYZ') );

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-29T19:02:03.253

我知道我的答案来得太晚了，但我认为它可能对其他人有所帮助。我发现提取所有特殊字符的最佳方法是在 php.ini 中使用[utf8_decode()](http://php.net/manual/en/function.utf8-decode.php)。甚至用于处理`&nbsp;`或任何其他表示空格的特殊字符`utf8_decode()`。

使用后`utf8_decode()`可以直接在代码中操作这些字符。例如，在以下代码中，函数 clean() 替换`&nbsp;`为空白。然后它使用单个空格替换所有额外的空格`preg_replace()`。使用 删除前导和尾随空格`trim()`。

```
function clean($str)
{       
    $str = utf8_decode($str);
    $str = str_replace("&nbsp;", "", $str);
    $str = preg_replace("/\s+/", " ", $str);
    $str = trim($str);
    return $str;
}

$html = "&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;Hello world! lorem ipsum.";
$output = clean($html);
echo $output; 
```

> 你好世界！lorem ipsum。

# android - Android：来自相机和图库运行时异常的图片

> ID：15289774
> 
> 赞同：2
> 
> 时间：2013-03-08T08:36:31.770
> 
> 标签：android, android-camera, android-gallery

以下是我的错误的日志猫：

```
 03-08 13:20:36.193: E/AndroidRuntime(9486): FATAL EXCEPTION: main
   03-08 13:20:36.193: E/AndroidRuntime(9486): java.lang.RuntimeException: Unable to    resume activity {com.example.camtest1/com.example.camtest1.MainActivity}: android.database.StaleDataException: Attempted to access a cursor after it has been closed.
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at  android.app.ActivityThread.performResumeActivity(ActivityThread.java:2639)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2667)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1279)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.os.Handler.dispatchMessage(Handler.java:99)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.os.Looper.loop(Looper.java:137)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.app.ActivityThread.main(ActivityThread.java:4935)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at java.lang.reflect.Method.invokeNative(Native Method)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at java.lang.reflect.Method.invoke(Method.java:511)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at dalvik.system.NativeStart.main(Native Method)
  03-08 13:20:36.193: E/AndroidRuntime(9486): Caused by: android.database.StaleDataException: Attempted to access a cursor after it has been closed.
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.database.BulkCursorToCursorAdaptor.throwIfCursorIsClosed(BulkCursorToCursorAdaptor.java:64)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.database.BulkCursorToCursorAdaptor.requery(BulkCursorToCursorAdaptor.java:133)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.database.CursorWrapper.requery(CursorWrapper.java:186)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.app.Activity.performRestart(Activity.java:5246)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.app.Activity.performResume(Activity.java:5272)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2629)
  03-08 13:20:36.193: E/AndroidRuntime(9486):   ... 10 more 
```

我无法确定我的代码哪里出错了。以下是我尝试在三星处理完成后从图库中捕获或选择图片的代码：

```
 import java.io.ByteArrayOutputStream;
   import android.app.Activity;
   import android.app.AlertDialog;
   import android.content.DialogInterface;
   import android.content.Intent;
   import android.database.Cursor;
   import android.graphics.Bitmap;
   import android.graphics.BitmapFactory;
   import android.net.Uri;
   import android.os.Bundle;
   import android.provider.MediaStore;
   import android.view.View;
   import android.widget.Button;
   import android.widget.ImageView;
   import android.widget.Toast;

 public class MainActivity extends Activity {

String picturePath;
private static int RESULT_LOAD_IMAGE = 1;
private static final int PICK_FROM_GALLERY = 2;
int CAMERA_PIC_REQUEST = 1337; 
Bitmap thumbnail = null; 
private static final int OG=4; 

private static final int CAMERA_IMAGE_CAPTURE = 0;
Uri u;
ImageView imgview;
//int z=0;
String z=null;
byte b[];
String largeImagePath = "";
Uri uriLargeImage;
Uri uriThumbnailImage;
Cursor myCursor;

 public void imageCam(Bitmap thumbnail){
        Bitmap photo = thumbnail; 
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        photo.compress(Bitmap.CompressFormat.JPEG, 70, bos);
        b = bos.toByteArray();
        ImageView imageview = (ImageView)findViewById(R.id.imageView1);
    //  Bitmap bt=Bitmap.createScaledBitmap(photo, 200, 400, false);  
        imageview.setImageBitmap(photo);

    }

  @Override
  public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button bt = (Button)findViewById(R.id.button1);
    bt.setOnClickListener(onBTN);
    if( savedInstanceState != null ) {
        //if()
        Bitmap Zatang; 
        String B1 = savedInstanceState .getString("message");
        Toast.makeText(this, "SavedYeah"+B1, Toast.LENGTH_LONG).show();
        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inSampleSize = OG;
        // thumbnail = (BitmapFactory.decodeFile(picturePath));
        Zatang = BitmapFactory.decodeFile((B1), opts);
        System.gc();
        if(Zatang != null){
             Toast.makeText(this, "Success Zatang"+B1, Toast.LENGTH_LONG).show();
             imageCam(Zatang);

         }
        String B12 = savedInstanceState .getString("Gallerymessage"); 
        if(B12 != null){
            Toast.makeText(this, "Recreated on Gallery", Toast.LENGTH_LONG).show();
            BitmapFactory.Options opts1 = new BitmapFactory.Options();
            opts.inSampleSize = OG;
           // thumbnail = (BitmapFactory.decodeFile(picturePath));
            thumbnail = BitmapFactory.decodeFile((B12), opts1);
            System.gc();
            imageCam(thumbnail);

        }

}

}

private View.OnClickListener onBTN = new View.OnClickListener(){
    public void onClick(View v){
        openNewGameDialog();
    }
};
String []B = {"Camera", "Gallery"};

private void openNewGameDialog(){
            new AlertDialog.Builder(this).setItems(B,new       DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialoginterface,int i){
                if(i==0){
                    String BX1 =  android.os.Build.MANUFACTURER;

                    if(BX1.equalsIgnoreCase("samsung")){
                    Toast.makeText(getApplicationContext(), "Device man"+BX1, Toast.LENGTH_LONG).show();
                    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(intent, CAMERA_IMAGE_CAPTURE);

                    }
                    else {
                         Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                         startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
                    }
                }

                else if (i==1){
                     // Intent in = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                     // startActivityForResult(in, RESULT_LOAD_IMAGE);

                      Intent intent = new Intent(Intent.ACTION_PICK);
                      intent.setType("image/*");
                      startActivityForResult(intent, RESULT_LOAD_IMAGE);
                }

           }
           })
           .show();
   }

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        super.onActivityResult(requestCode, resultCode, data);
         if(requestCode==CAMERA_IMAGE_CAPTURE && resultCode==Activity.RESULT_OK){

        // Describe the columns you'd like to have returned. Selecting from the Thumbnails location gives you both the Thumbnail Image ID, as well as the original image ID
         String[] projection = {
         MediaStore.Images.Thumbnails._ID,  // The columns we want
         MediaStore.Images.Thumbnails.IMAGE_ID,
         MediaStore.Images.Thumbnails.KIND,
         MediaStore.Images.Thumbnails.DATA};
         String selection = MediaStore.Images.Thumbnails.KIND + "="  + // Select only mini's
         MediaStore.Images.Thumbnails.MINI_KIND;

         String sort = MediaStore.Images.Thumbnails._ID + " DESC";

        //At the moment, this is a bit of a hack, as I'm returning ALL images, and just taking the latest one. There is a better way to narrow this down I think with a WHERE clause which is currently the selection variable
        myCursor = this.managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, selection, null, sort);

        long imageId = 0l;
        long thumbnailImageId = 0l;
        String thumbnailPath = "";

        try{

            myCursor.moveToFirst();
            imageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));
            thumbnailImageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
            thumbnailPath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
            }
        finally{
            myCursor.close();
            }

            //Create new Cursor to obtain the file Path for the large image

                String[] largeFileProjection = {
                MediaStore.Images.ImageColumns._ID,
                MediaStore.Images.ImageColumns.DATA
                };

                String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
                myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);
                largeImagePath = "";

                try{
                    myCursor.moveToFirst();

                    //This will actually give yo uthe file path location of the image.
                    largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
                }
                finally{myCursor.close();}
                // These are the two URI's you'll be interested in. They give you a handle to the actual images
                uriLargeImage = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(imageId));
                uriThumbnailImage = Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, String.valueOf(thumbnailImageId));

                // I've left out the remaining code, as all I do is assign the URI's to my own objects anyways...
                // Toast.makeText(this, ""+largeImagePath, Toast.LENGTH_LONG).show();
                // Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();
                // Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();

                if(largeImagePath != null ){
                    Toast.makeText(this, "LARGE YES"+largeImagePath, Toast.LENGTH_LONG).show();

                     BitmapFactory.Options opts = new BitmapFactory.Options();
                     opts.inSampleSize = OG;
                     // thumbnail = (BitmapFactory.decodeFile(picturePath));
                     thumbnail = BitmapFactory.decodeFile((largeImagePath), opts);
                     System.gc();
                     if(thumbnail != null){
                         Toast.makeText(this, "Try Without Saved Instance", Toast.LENGTH_LONG).show();
                         imageCam(thumbnail);
                     }

                }if(uriLargeImage != null){

                    Toast.makeText(this, ""+uriLargeImage, Toast.LENGTH_LONG).show();

                }if(uriThumbnailImage != null){

                    Toast.makeText(this, ""+uriThumbnailImage, Toast.LENGTH_LONG).show();

                }

         }
         if( requestCode == 1337 && resultCode== RESULT_OK){
                Bundle extras = data.getExtras();
                //  if (extras!=null){  
                if (extras.keySet().contains("data") ){

                        BitmapFactory.Options options = new BitmapFactory.Options();
                        // options.inSampleSize = 1;
                        // options.inPurgeable = true;
                        // options.inInputShareable = true;
                        thumbnail = (Bitmap) extras.get("data");
                        //  image(thumbnail);
                        if (thumbnail != null){
                        Toast.makeText(this, "YES Thumbnail", Toast.LENGTH_LONG).show();
                            BitmapFactory.Options opt = new BitmapFactory.Options();
                            // options.inSampleSize = 1;
                            // options.inPurgeable = true;
                            // options.inInputShareable = true;
                            thumbnail = (Bitmap) extras.get("data");
                            imageCam(thumbnail);
                        }

                    }else{

                    Uri imageURI = getIntent().getData();
                    ImageView imageview = (ImageView)findViewById(R.id.imageView1);
                    imageview.setImageURI(imageURI);

                    if(imageURI != null){
                    Toast.makeText(this, "YES Image Uri", Toast.LENGTH_LONG).show();

                    }

                       // Toast.makeText(CreateProfile.this, "Picture NOt taken", Toast.LENGTH_LONG).show();
                    }
                super.onActivityResult(requestCode, resultCode, data);  
         }
         if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data){
                Uri selectedImage = data.getData();

                    String[] filePathColumn = { MediaStore.Images.Media.DATA };
                    Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
                    cursor.moveToFirst();
                    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                    String picturePath = cursor.getString(columnIndex);
                    cursor.close();
                    BitmapFactory.Options opts = new BitmapFactory.Options();
                    opts.inSampleSize = OG;
                   // thumbnail = (BitmapFactory.decodeFile(picturePath));
                    thumbnail = BitmapFactory.decodeFile((picturePath), opts);
                    System.gc();
                    imageCam(thumbnail);

             }

                 else
                 {
                    // imgview.setBackgroundResource(R.drawable.bbtb);
                 }

         }
    @Override
    public void onSaveInstanceState(Bundle outState) {
       super.onSaveInstanceState(outState);
       outState.putString("message",largeImagePath );
       outState.putString("Gallerymessage",picturePath );

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:14:10.560

我遇到了同样的问题，当使用相机意图时，在某些设备/API 级别上，onDestroy() 被调用。在我的 onDestroy 中，我像往常一样关闭了游标和数据库。

您可以通过检查数据库是否为 .open 和 cursor==null 来解决此问题：onActivityResult 或 onResume，然后在需要时重新打开并更新游标。

```
if (!database.isOpen() || database==null) {
    patternsdb helper = new patternsdb(main.this);
    database = helper.getWritableDatabase();
} 
```

# ruby - Cap 任务在本地获取内容

> ID：15289775
> 
> 赞同：1
> 
> 时间：2013-03-08T08:36:33.003
> 
> 标签：ruby, linux, capistrano

我想这部分有问题。

```
check = %x( cat '/etc/apache2/ports.conf' ) 
```

我想从 /etc/apache2/ports.conf 获取内容并检查端口 8581 是否已经被监听，这是我的代码，它是部署后的上限任务。

```
desc "Ports Updation"
task :portsUpdation do
   # Editing /etc/apache2/ports.conf
    ports_file = "/etc/apache2/ports.conf"
    run "#{try_sudo} chmod -R 0777 #{ports_file}" 

    check = %x( cat '/etc/apache2/ports.conf' )
    puts check

    unless /Listen 8581/.match check
        run "#{try_sudo} sed -i '$ a\Listen 8581\n' #{ports_file}"
    end
    run "#{try_sudo} chmod -R 0644 #{ports_file}"
end 
```

我运行了这个上限任务，变量“检查”总是打印我本地的 ports.conf。我想要的是来自服务器的内容。

当我运行这个上限任务时，我被问到服务器密码。我也尝试过 cap deploy。结果相同。可能是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:15:12.583

如果您想远程执行命令，您需要`run`像在所有其他地方一样调用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:02:54.273

```
check = capture("cat /etc/apache2/ports.conf") 
```

成功了。此方法 capture() 返回传递的 cmd 的结果。

# java - 在 JDBC 中捕获 PL/SQL 错误

> ID：15289786
> 
> 赞同：1
> 
> 时间：2013-03-08T08:37:14.450
> 
> 标签：java, oracle, jdbc, plsql, oracle11g

我正在创建一个 Java 应用程序，它通过 JDBC 连接到 Oracle 数据库，并且能够在其中执行脚本。有点像蟾蜍。我创建它的原因是因为我们不能在封闭的工作空间中使用 Toad 或 SQLplus。

一切都很好，直到我谈到程序、函数、触发器、包……（要说的最重要的项目）。

我可以通过 JDBC 驱动程序发送它们，但它总是说它是成功的，即使它不是。在 SQLplus 中，您会收到一条消息“...创建时出现编译错误”，因此实际上它也不是真正的错误。但是你可以显示错误。

有没有办法`show errors`通过 JDBC 访问你遇到的那些错误？所以我至少现在发生了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:21:53.350

您可以使用系统视图`ALL_ERRORS`

例子：

```
select * 
from ALL_ERRORS  
where owner = 'your_schema' 
and name = 'your_package_name' 
and type = 'PACKAGE BODY' 
order by sequence 
```

# vb.net - 捕获一个矩形

> ID：15289788
> 
> 赞同：2
> 
> 时间：2013-03-08T08:37:20.193
> 
> 标签：vb.net

这行得通。它在面板上绘制一个简单的 Rectangle：

```
 Dim g As Graphics
    Dim fPen As Pen
    g = aPanel.CreateGraphics()

    fPen = New Pen(Color.Blue)
    Dim PointX As Point = New Point(10, 20)
    Dim PointY As Point = New Point(50, 50)

    g.DrawRectangle(fPen, PointY.X, PointY.Y, 50, 50) 
```

一切都是一个对象 - 但我如何引用这个 ractangle？
稍后在代码中创建椭圆时，我想将此矩形用作参数之一（即在矩形中绘制椭圆） - 为什么我不能执行以下操作？

```
 Dim g As Graphics
    Dim fPen As Pen
    g = aPanel.CreateGraphics()

    fPen = New Pen(Color.Blue)
    Dim PointX As Point = New Point(10, 20)
    Dim PointY As Point = New Point(50, 50)

    Dim r As Rectangle
    r = New Rectangle(g.DrawRectangle(fPen, PointY.X, PointY.Y, 50, 50)) '<<<errors here
    g.DrawEllipse(fPen, r) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:46:46.557

对象上的[`DrawRectangle`方法](http://msdn.microsoft.com/en-us/library/x6hb4eba.aspx)`Graphics`不返回任何值，因为它是一个`Sub`.

您首先必须创建 的实例，[`Rectangle`](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.aspx)稍后您可以使用它来绘制矩形和椭圆。

```
Dim pointY As New Point(50, 50)
Dim rectSize As New Size(50, 50)
Dim rect As New Rectangle(pointY, rectSize)

g.DrawRectangle(fPen, rect)
g.DrawEllipse(fPen, rect) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:45:13.597

声明你的矩形并使用它的值：

```
Dim r As New Rectangle(10, 50, 50, 50)

g.DrawRectangle(fPen, r.Location.X, r.Location.Y, r.Width, r.Height)
g.DrawEllipse(fPen, r) 
```

# php - 如何使用 Button Manager API 更新托管的 paypal 按钮的价格？

> ID：15289792
> 
> 赞同：2
> 
> 时间：2013-03-08T08:37:36.887
> 
> 标签：php, button, paypal, shopping-cart

我真的是 PayPal 的新手，我一直在 PayPal 网站上跋涉，但是虽然它有大量的参考资料，但它们似乎并没有在一个完全工作的背景模板中附带简单的代码片段，而且我已经花了好几天的时间尝试他们的一些东西无济于事！我知道如何通过 PayPal 商家帐户添加按钮，但这还不够。

**我需要做的只是动态更新托管 PayPal 按钮的“金额”变量。**就这些。客户使用此按钮上传聚合购物车，这是我用 PHP 定制的。它不是现有的第三方购物车。

1- 我需要将其`cmd`从“_s-xclick”更改为“_cart”吗？为什么我不能根据当前购物车的总数动态设置按钮的价格？

2-最重要的是，无论如何，无论如何我如何动态设置按钮的价格？我正在尝试使用 ButtonManager API 来动态更改我通过我的 PayPal 卖家帐户创建的按钮。我以为我正在使用此链接进行某些操作：[https](https://www.x.com/developers/paypal/documentation-tools/BM/integration-guide/NVP/ButtonMgrOverview#id093PD0M07HS) ://www.x.com/developers/paypal/documentation-tools/BM/integration-guide/NVP/ButtonMgrOverview#id093PD0M07HS但现在它需要第三方的用户名API。我没有第三方用户名，因为我自己制作了这个简单的购物车。我要去哪？这太复杂了，我的时间真的很短！我不会使用 IPN。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:51:21.767

如果您想要更改托管按钮的数量，则必须通过 2 种方式中的 1 种方式完成。要么您必须登录创建按钮的帐户并从帐户内调整金额。第二个选项是使用 BMUpdateButton API 通过 API 更新按钮数量。但是，为了能够更新按钮，您需要创建按钮的 PayPal 帐户的 API 凭据，或者您需要让该帐户的帐户持有人授予您的 API 3rd 方权限才能执行对其帐户的 API 调用。

这里有一个可用变量的列表，可以通过这个 API 传递，这[也](https://www.x.com/developers/paypal/documentation-tools/api/bmupdatebutton-api-operation-nvp)可能对您有用。就代码而言，您可以在[此处](https://www.x.com/paypal-apis-dodirectpayment-php-5.3/nvp)查看 DoDirectPayment 示例。这不是您将使用的同一 API 调用的示例，但您只需要修改代码以传递不同的变量和值。

希望这可以帮助。:)

# c - 从 jna 调用依赖于其他 dll 的 dll

> ID：15289798
> 
> 赞同：0
> 
> 时间：2013-03-08T08:38:02.610
> 
> 标签：c, dll, jna, libxml2

我制作了一个 dll，其中包含使用 libxml2 解析 xml 的函数，这个 dll 包括 libxml2、zlib、iconv 库，并且还需要它们各自的库。我使用 _stdcall 导出函数我的 dll，现在当我从我的 dll 访问函数时，在 jna 中出现错误“线程主线程中的执行，java.lang.unsatisfied.error，无法加载 parser.dll”

请建议该怎么做

问候普里亚

# c# - Web API、IQueryable、OData 和 HttpResponseMessage 作为返回类型？

> ID：15289801
> 
> 赞同：4
> 
> 时间：2013-03-08T08:38:06.700
> 
> 标签：c#, asp.net-web-api, odata, httpresponse, iqueryable

在过去的几天里，我看到了一些很好的例子，说明了如何使用 HttpResponseMessage 类型作为 Web API 操作的返回类型。这使得单元测试变得更加容易，因为它可以“伪造”整个 HttpMessage在任何正常情况下，您都需要在单元测试中使用 WebClient 或类似的操作再次实际执行实际请求，并且还需要运行两个 Visual Studio 实例。

无论如何..可以说我想将这种方法与 HttpResponseMessage.. 但我也想使用新的 IQueryable-OData-thingy .. 这是否可能.. 因为我想我会查询一堆 HttpResponseMessages ..至少据我所知，应该只有一个...

所以 HttpResponseMessage 方法会用 IQueryable 和 OData 来“打破”整个想法。或者我是对的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:16:14.293

如果 response.Content 是 ObjectContent 并且包含`IQueryable<T>`or ，则 Queryable 将起作用`IEnumerable<T>`。如果您使用`Request.CreateResponse`帮助程序创建响应，则查询将起作用。此外，作为仅供参考，`Task<IQueryable<T>>`也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T09:18:39.563

我设法让 web api 返回一个 HttpResponseMessage 并且仍然可以通过设置`[EnableQuery]`属性来使用 OData：

```
[EnableQuery]
public HttpResponseMessage Get(MyModel model)
{
    if (!ModelState.IsValid) return Request.CreateResponse((HttpStatusCode)422, "Unprocessable Entity");

    //your-code-here

    return Request.CreateResponse(HttpStatusCode.OK, myEnumerable);
} 
```

# sql - BCP命令在将数据导出到sql server中的CSV时为具有xml字符（<，>，\）的数据添加换行符

> ID：15289803
> 
> 赞同：0
> 
> 时间：2013-03-08T08:38:21.213
> 
> 标签：sql, sql-server-2008

这是我用来将数据导出到 SQL Server 2008 中的 CSV 文件的 BCP 命令：

```
EXEC master..xp_cmdshell 'BCP "exec ESB_ADT_DB.dbo.ProcTest" queryout "D:\outputfile.csv" -q -T -w -t,' 
```

问题在于表中的第一列包含此数据的 xml 字符 (<,>,)，它在写入文件后添加了换行符。如何停止 bcp 命令以将换行符添加到写入文件的数据中。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T00:06:20.530

我碰巧使用输出流的 proc 来执行此操作，因此我只是在调用 BCP 命令的动态 sql 的末尾添加了一个 -r \0 。（我也添加了 -a 选项，但不确定它是否会影响任何东西。此外，代码最初也是使用 -c 选项编写的）。

命令字符串现在执行此操作：

设置@sql='bcp "exec my_xml_proc" QUERYOUT "outputfile.xml" -S 服务器 -U 用户 -P 密码 -c -a 65535 -r \0";

执行@sql;

-r \0 似乎有效。当我指定一个常规字符（-r #）时，我注意到更改行终止符会在结束文档标记的末尾产生一个带有指定字符的流，但最终用途需要一个格式良好的 XML 文档，所以我改变了到-r \0。

# javascript - 使用获取请求预先输入

> ID：15289804
> 
> 赞同：0
> 
> 时间：2013-03-08T08:38:22.930
> 
> 标签：javascript, jquery, typeahead, bootstrap-typeahead

我的引导输入有问题，这是我的代码：

```
 $('#search').typeahead({
     source: function (typeahead, query) {
         $.get('search.php?value=' + query, function (data) {
             return typeahead.process(data);
         });
     }
 }); 
```

它会触发 get 请求，当我在 Chrome 中查看网络窗口时，我会得到想要的结果。但是只有当我的搜索字段为空时才会触发 get 请求的回调函数，这很奇怪.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:52:25.827

根据[文档](http://twitter.github.com/bootstrap/javascript.html#typeahead)AJAX 源应该以这种方式使用：

```
$('#search').typeahead({
    source: function (query, process) {
        $.get('search.php?value=' + query, process);
    }
}); 
```

# jquery - 在哪个 scieno 我需要在 Jquery Ajax 方法中使用 async: false 或 async: true

> ID：15289807
> 
> 赞同：0
> 
> 时间：2013-03-08T08:38:33.003
> 
> 标签：jquery, html, ajax

我想知道我需要在哪里使用`async: false, or async: true` Jquery Ajax 方法

我有一个带有字段的表单，当我单击按钮时，我正在调用 jquery ajax 方法以将值从该字段保存到服务器

```
$.ajax({
                        url: "../Member/Home.aspx/SaveClient",
                        type: "POST",
                        async: false,
                        dataType: 'json',
                        contentType: 'application/json; charset=utf-8',
                        data: "{'projectSoid': '" + $("#hdnValueProjectSoid").val()
                            + "', 'name': '" + Name
                            + "', 'industry ': '" + Industry
                            + "', 'descriptions ': '" + Descriptions
                            + "', 'employment ': '" + Employment
                            + "', 'email  ': '" + Email
                            + "', 'phone  ': '" + Phone + "'}",
                        success: function (response) {
                            if (response.d != null) {

                        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:47:05.000

Async ：您尝试获取的 ajax 响应与您正在执行的下一个任务无关。

同步：您尝试接收的 ajax 响应依赖于您正在执行的下一个任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:41:08.877

这是用例。从文档。

> 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用成功/错误/完成回调选项而不是 jqXHR 对象的相应方法，例如 jqXHR.done() 或已弃用的 jqXHR.success()。

异步

1.  当您进行跨域请求时。
2.  这是 $.ajax 的默认设置。

同步 ：

1.  当您要完成ajax调用的请求时，即意味着一个又一个请求。这是不推荐的。

[jQuery中的异步](https://stackoverflow.com/questions/1478295/what-does-async-false-do-in-jquery-ajax)

# java - 在listview中点击item后如何传递字符串并获取它们的数据，它必须根据点击item来获取它们各自的数据

> ID：15289809
> 
> 赞同：0
> 
> 时间：2013-03-08T08:38:44.683
> 
> 标签：java, android

我有一个列表视图，如果单击一个项目，则在该列表视图中，它必须选择它们各自的数据并显示它，如何将数据作为字符串传递以及如何获取该数据？对我来说，我传递了名称参数，它必须比较名称并获取数据以显示它。

如何在 FirstActivity.java 中传递字符串？

```
public class SouthIndianvegrecipes1  extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<Recipedetails> image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                Recipedetails obj_itemDetails = (Recipedetails)o;
                Toast.makeText(SouthIndianvegrecipes1.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
                 Intent newActivity = new Intent(SouthIndianvegrecipes1.this, 
                            SouthIndianvegmanualrecipes.class );  
                newActivity.putExtra("name", obj_itemDetails.getName());
                            startActivity(newActivity);

            } 
        });
    }

    private ArrayList<Recipedetails> GetSearchResults(){
        ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

        Recipedetails item_details = new Recipedetails();
        item_details.setName("Godhumai veg adai");
        item_details.setItemDescription("This is very good for dibets people");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(12);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soyamore koozh");
        item_details.setItemDescription("Tasty to have this as main dish");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(13);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Tomato kulambu");
        item_details.setItemDescription("Good side dish for rice and dinner");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(14);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Tomato upma");
        item_details.setItemDescription("Evening time  dinner for kids");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(15);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Navratri special vada");
        item_details.setItemDescription("Good snacks at the function");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(16);

        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Egg kurma");
        item_details.setItemDescription("Wonderful dish made by egg");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(17);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Milagu kuzhambu");
        item_details.setItemDescription("Good for digestion purpose");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(18);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Rasam");
        item_details.setItemDescription("Last and famous dish in lunch,good for health also");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(19);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Vegetable kootu");
        item_details.setItemDescription("Nice and healthy one");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(20);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Avial");
        item_details.setItemDescription("Easy to prepare and lots of vegetable");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(21);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("kothavarangaicurry");
        item_details.setItemDescription("Tamilnadu special and healthy too");
        //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber(22);
        results.add(item_details);

        return results;
    } 
```

}

第二次活动

```
public class SouthIndianvegmanualrecipes  extends Activity {

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.recipe_manual);
            Intent intent = getIntent();
            String value = intent.getStringExtra("name");

           if(value.equals("Godhumai veg adai"))
        {
            Recipedetails2 item_details = new Recipedetails2();
            item_details.setName("Godhumai veg adai");
            item_details.setIngredients("This is very good for dibets people");
            item_details.setMethods("This is very good for dibets people");

        }
        else if(value.equals("Soyamore koozh"))
        {
            Recipedetails2 item_detail1 = new Recipedetails2();
            item_detail1.setName("Soyamore koozh");
            item_detail1.setIngredients("Tasty to have this as main dish");
            item_detail1.setMethods("This is very good for dibets people");
        }
        else if(value.equals("Tomato kulambu"))
        {
            Recipedetails2 item_detail3 = new Recipedetails2();
            item_detail3.setName("Tomato kulambu");
            item_detail3.setIngredients("Good side dish for rice and dinner");
            item_detail3.setMethods("This is very good for dibets people");

        }
        else if(value.equals("Navratri special vada"))
        {
            Recipedetails2 item_detail5 = new Recipedetails2();
            item_detail5.setName("Navratri special vada");
            item_detail5.setIngredients("Good snacks at the function");
            item_detail5.setMethods("This is very good for dibets people");

        }
        else if(value.equals("Egg kurma"))
        {
            Recipedetails2 item_detail6 = new Recipedetails2();
            item_detail6.setName("Egg kurma");
            item_detail6.setIngredients("Wonderful dish made by egg");
            item_detail6.setMethods("This is very good for dibets people");

        }
        else if(value.equals("Milagu kuzhambu"))
        {
            Recipedetails2 item_detail7 = new Recipedetails2();
            item_detail7.setName("Milagu kuzhambu");
            item_detail7.setIngredients("Good for digestion purpose");
            item_detail7.setMethods("This is very good for dibets people");

        }

        else if(value.equals("Rasam"))
        {
            Recipedetails2 item_detail8 = new Recipedetails2();
            item_detail8.setName("Rasam");
            item_detail8.setIngredients("Last and famous dish in lunch,good for health also");
            item_detail8.setMethods("This is very good for dibets people");

        }

        else if(value.equals("Vegetable kootu"))
        {
            Recipedetails2 item_detail9 = new Recipedetails2();
            item_detail9.setName("Vegetable kootu");
            item_detail9.setIngredients("Nice and healthy one");
            item_detail9.setMethods("This is very good for dibets people");

        }

        else if(value.equals("Avial"))
        {
            Recipedetails2 item_detail10 = new Recipedetails2();
            item_detail10.setName("Avial");
            item_detail10.setIngredients("Easy to prepare and lots of vegetable");
            item_detail10.setMethods("This is very good for dibets people");

        }

        else 
        {
            Recipedetails2 item_detail11 = new Recipedetails2();
            item_detail11.setName("kothavarangaicurry");
            item_detail11.setIngredients("Tamilnadu special and healthy too");
            item_detail11.setMethods("This is very good for dibets people");

        }

        }
    } 
```

在这里我需要根据我的布局放置或存储字符串功能以放置它们的名称和图像以及成分和方法，在 if 函数之后我输入了错误的代码 layout.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"

  android:orientation="vertical"

  >

  <ImageView
    android:id="@+id/photo"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_gravity="top"
    android:padding="20dp"
    android:scaleType="center"
  ></ImageView>

  <TextView android:id="@+id/name"
        android:textSize="14sp" 
        android:textStyle="bold" 
        android:textColor="#32cd32" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/photo"/>

  <TextView
      android:text="Ingredients:"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="left" />

  <TextView android:id="@+id/itemIngredients"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:scaleType="center" />

   <TextView
      android:text="Method:"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="left" />

  <TextView android:id="@+id/methods"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:scaleType="center" />

</LinearLayout> 
```

如何传递字符串以及如何比较、获取和显示它？或者你能提供一些链接如何做到这一点？

**是我的代码在比较吗，为什么它不显示他们的数据，它只显示默认布局**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:46:18.430

**朋友这是正确的代码**

```
 public class SouthIndianvegmanualrecipes  extends Activity {
TextView itemName,itemIngredients,methods;
ImageView itemImage;
String value;

private Integer[] imgid = {
        R.drawable.vegeterian,
        R.drawable.nonveg,
        R.drawable.pickels,
        R.drawable.soup,
        R.drawable.sweets,
        R.drawable.cakes,
        R.drawable.icecreams,
        R.drawable.chinesevegdishes,
        R.drawable.chinesenonveg,
        R.drawable.chinesenoodles,
        R.drawable.chinesesoup,
        R.drawable.godhumaivegadai,
        R.drawable.soyamorekoozh,
        R.drawable.tomatokulambu,
        R.drawable.tomatoupma,
        R.drawable.vadanavratrispecial,
        R.drawable.eggkurma,
        R.drawable.milagu,
        R.drawable.rasam,
        R.drawable.vegetablekootu,
        R.drawable.avial,
        R.drawable.kothavarangaicurry,
        };

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.recipe_manual);
            Intent intent = getIntent();
             value = intent.getStringExtra("name");
                itemName = (TextView) findViewById(R.id.name);
                itemIngredients = (TextView) findViewById(R.id.itemIngredients);
                methods = (TextView) findViewById(R.id.methods);
                itemImage = (ImageView) findViewById(R.id.photo);

           if(value.equals("Godhumai veg adai"))
        {
            Recipedetails2 item_details = new Recipedetails2();
            item_details.setName("Godhumai veg adai");
            item_details.setIngredients("This is very good for dibets people");
            item_details.setMethods("This is very good for dibets people");
            item_details.setImageNumber(12);
            setUIScreen(item_details.getName(),item_details.getIngredients(),item_details.getMethods(),item_details.getImageNumber() );
        }
        else if(value.equals("Soyamore koozh"))
        {
            Recipedetails2 item_detail1 = new Recipedetails2();
            item_detail1.setName("Soyamore koozh");
            item_detail1.setIngredients("Tasty to have this as main dish");
            item_detail1.setMethods("This is very good for dibets people");
            item_detail1.setImageNumber(13);
            setUIScreen(item_detail1.getName(),item_detail1.getIngredients(),item_detail1.getMethods(),item_detail1.getImageNumber() );
        }
        else if(value.equals("Tomato kulambu"))
        {
            Recipedetails2 item_detail3 = new Recipedetails2();
            item_detail3.setName("Tomato kulambu");
            item_detail3.setIngredients("Good side dish for rice and dinner");
            item_detail3.setMethods("This is very good for dibets people");
            item_detail3.setImageNumber(14);
            setUIScreen(item_detail3.getName(),item_detail3.getIngredients(),item_detail3.getMethods(),item_detail3.getImageNumber() );

        }
        else if(value.equals("Tomato upma"))
        {
            Recipedetails2 item_detail4 = new Recipedetails2();
            item_detail4.setName("Tomato upma");
            item_detail4.setIngredients("Good side dish for rice and dinner");
            item_detail4.setMethods("This is very good for dibets people");
            item_detail4.setImageNumber(14);
            setUIScreen(item_detail4.getName(),item_detail4.getIngredients(),item_detail4.getMethods(),item_detail4.getImageNumber() );

        }

        else if(value.equals("Navratri special vada"))
        {
            Recipedetails2 item_detail5 = new Recipedetails2();
            item_detail5.setName("Navratri special vada");
            item_detail5.setIngredients("Good snacks at the function");
            item_detail5.setMethods("This is very good for dibets people");
            item_detail5.setImageNumber(15);
            setUIScreen(item_detail5.getName(),item_detail5.getIngredients(),item_detail5.getMethods(),item_detail5.getImageNumber() );
        }
        else if(value.equals("Egg kurma"))
        {
            Recipedetails2 item_detail6 = new Recipedetails2();
            item_detail6.setName("Egg kurma");
            item_detail6.setIngredients("Wonderful dish made by egg");
            item_detail6.setMethods("This is very good for dibets people");
            item_detail6.setImageNumber(16);
            setUIScreen(item_detail6.getName(),item_detail6.getIngredients(),item_detail6.getMethods(),item_detail6.getImageNumber() );
        }
        else if(value.equals("Milagu kuzhambu"))
        {
            Recipedetails2 item_detail7 = new Recipedetails2();
            item_detail7.setName("Milagu kuzhambu");
            item_detail7.setIngredients("Good for digestion purpose");
            item_detail7.setMethods("This is very good for dibets people");
            item_detail7.setImageNumber(17);
            setUIScreen(item_detail7.getName(),item_detail7.getIngredients(),item_detail7.getMethods(),item_detail7.getImageNumber() );
        }

        else if(value.equals("Rasam"))
        {
            Recipedetails2 item_detail8 = new Recipedetails2();
            item_detail8.setName("Rasam");
            item_detail8.setIngredients("Last and famous dish in lunch,good for health also");
            item_detail8.setMethods("This is very good for dibets people");
            item_detail8.setImageNumber(18);
            setUIScreen(item_detail8.getName(),item_detail8.getIngredients(),item_detail8.getMethods(),item_detail8.getImageNumber() );
        }

        else if(value.equals("Vegetable kootu"))
        {
            Recipedetails2 item_detail9 = new Recipedetails2();
            item_detail9.setName("Vegetable kootu");
            item_detail9.setIngredients("Nice and healthy one");
            item_detail9.setMethods("This is very good for dibets people");
            item_detail9.setImageNumber(19);
            setUIScreen(item_detail9.getName(),item_detail9.getIngredients(),item_detail9.getMethods(),item_detail9.getImageNumber() );
        }

        else if(value.equals("Avial"))
        {
            Recipedetails2 item_detail10 = new Recipedetails2();
            item_detail10.setName("Avial");
            item_detail10.setIngredients("Easy to prepare and lots of vegetable");
            item_detail10.setMethods("This is very good for dibets people");
            item_detail10.setImageNumber(20);
            setUIScreen(item_detail10.getName(),item_detail10.getIngredients(),item_detail10.getMethods(),item_detail10.getImageNumber() );
        }

        else
        {
            Recipedetails2 item_detail11 = new Recipedetails2();
            item_detail11.setName("kothavarangaicurry");
            item_detail11.setIngredients("Tamilnadu special and healthy too");
            item_detail11.setMethods("This is very good for dibets people");
            item_detail11.setImageNumber(21);
            setUIScreen(item_detail11.getName(),item_detail11.getIngredients(),item_detail11.getMethods(),item_detail11.getImageNumber() );
        }

        }

public void setUIScreen(String i1, String i2, String i3, int n1){
itemName.setText(i1);
 itemIngredients.setText(i2);
 methods.setText(i3);
 itemImage.setImageResource(imgid[n1 - 1]);
}

} 
```

# ios - 自 IBAction 和发件人

> ID：15289817
> 
> 赞同：3
> 
> 时间：2013-03-08T08:39:07.413
> 
> 标签：ios, objective-c, self, ibaction, sender

我是一个新手 iOS 程序员，这是我的问题：我有 mapview 和分段控件，还有在 UIControlEventValueChanged 发生时调用的 changeMapType 函数，像这样

```
// change map type with segmented control
- (IBAction)changeMapType:(id)sender
{
    NSInteger i = [mapTypeControl selectedSegmentIndex];
    if (i == 0){
        [worldView setMapType:MKMapTypeStandard];
    }
    if (i == 1) {
        [worldView setMapType:MKMapTypeSatellite];
    }
    if (i == 2) {
        [worldView setMapType:MKMapTypeHybrid];
    }
} 
```

在 viewDidLoad 我想调用这个方法来设置哪个地图类型是第一个。

```
[mapTypeControl setSelectedSegmentIndex:2];
[self changeMapType:nil]; 
```

上面的代码工作正常，但下面的代码工作正常

```
[mapTypeControl setSelectedSegmentIndex:2];
[self changeMapType:self]; 
```

最后，作为 SENDER 传递什么？哪个是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:44:10.640

从概念上讲，没有一个是正确的，在实践中，两者都很好。

`sender`是（或至少应该是）`UIControl`启动操作的实例（在您的情况下为分段控件）。事实上，你应该像这样开始你的方法：

```
- (IBAction)changeMapType:(UISegmentedControl *)sender
{
    NSInteger i = [sender selectedSegmentIndex];

    // etc.
} 
```

并且手动调用时，应该传入分段控件：

```
[self changeMapType:mapTypeControl]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:42:36.283

由于您并没有真正使用“ `sender`”（被传递到您的 IBAction 方法）做任何事情，因此您几乎可以传递任何您想要的东西。

使用 " `self`" 或 " `nil`" 应该没问题。

如果您***最终***在`sender`任何 IBAction 中使用“”，那么您确实需要关心您以编程方式发送的内容。当您单击与您的操作相关的用户界面中的按钮或某个对象时，将发送对该对象的引用。

ps这里就像一个回答派对！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:43:36.407

两者都可以，因为您甚至没有在您的方法中使用 sender ......它通常在那里，以防方法需要知道什么对象使用了该函数，这样您就可以去`if([sender isKindOfClass:[SomeObject class]])`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:43:59.870

对于`IBAction`，发送者是发送消息调用的接口对象。在您的实例中，以编程方式触发它，没有这样的对象，因此您应该通过`nil`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T02:39:23.380

我同意其他答案——因为你不使用`sender`，你可以通过任何你想要的。

实际上，我建议您将方法更改为根本不带`sender`参数。

```
- (IBAction)changeMapType 
```

控制动作可以有 3 个可能的签名：

```
- (IBAction)changeMapType
- (IBAction)changeMapType:(id)sender
- (IBAction)changeMapType:(id)sender forEvent:(UIEvent *)event 
```

最好仅在使用附加参数时才采用它们。

一旦你摆脱了那个参数，你就不必担心要传递什么。这个解决方案实际上是正确的——你没有传递一些不是真正的发件人的东西。

如果你传入一些随机的东西，比如`nil`，你可能有一天决定使用该`sender`参数，而忘记了你在一个地方传入了垃圾，从而导致问题。但是，如果您完全删除了参数，那么当您需要使用该`sender`参数时，您将需要更改方法名称，这涉及更改所有调用它的地方（否则它将无法编译，因为方法名称已更改）。所以你不能不小心搞砸了。

# sql - 使用 Windows 身份验证连接到 SQL 的应用程序的登录异常

> ID：15289829
> 
> 赞同：0
> 
> 时间：2013-03-08T08:40:07.807
> 
> 标签：sql, vb.net

我们有一个 Windows 应用程序使用 Windows 身份验证连接到 SQL Server 的情况（类似于[How to add Active Directory user group as login in SQL Server](https://stackoverflow.com/questions/5029014/how-to-add-active-directory-user-group-as-login-in-sql-server)）。将使用该应用程序的所有 Active Directory 用户都已添加到 AD 组（我们称之为 GroupX）

然后在 GroupX 的 SQL 实例上创建了一个登录名。只有“公共”服务器角色已分配给此登录。在数据库本身上为 GroupX 创建了一个用户。“db_Owner”角色权限已分配给该组用户。我们需要“db_Owner”权限，因为应用程序需要读/写访问权限以及进行架构更改的权限。

当桌面应用程序尝试连接到数据库时，我们得到一个异常：“无法打开登录请求的数据库 z。登录失败。用户 y 登录失败。

SQL 安全领域对我来说有点新，因为我习惯于在我自己的 SQL 实例上担任系统管理员，我根据该实例进行开发，并且在那种环境中一切正常。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:54:32.477

您能否确保数据库中的用户组显示 db_owner 权限？

> 转到 SQL Server >> 安全 >> 登录并右键单击组 X 并选择属性
> 
> 在新打开的登录属性屏幕中，转到“用户映射”选项卡。然后，在“用户映射”选项卡上，选择所需的数据库——尤其是显示此错误消息的数据库。在下方屏幕上，检查角色 db_owner。单击确定。

来源：http: [//blog.sqlauthority.com/2009/08/20/sql-server-fix-error-cannot-open-database-requested-by-the-login-the-login-failed-login-failed- for-user-nt-authoritynetwork-service/](http://blog.sqlauthority.com/2009/08/20/sql-server-fix-error-cannot-open-database-requested-by-the-login-the-login-failed-login-failed-for-user-nt-authoritynetwork-service/)

# java - 发现 try-finally 块的 finally 部分是否抛出异常

> ID：15289831
> 
> 赞同：4
> 
> 时间：2013-03-08T08:40:15.370
> 
> 标签：java, try-finally

我有一个简单的问题，一个简单的代码部分，一些基本`try-finally`块：

```
try {
  // Some code which can throw an Exception
} finally {
  // Some code which also can throw an Exception
} 
```

我的主要问题是：有什么方法可以发现是在`finally`块中抛出异常而不使用`catch`和一些局部变量在块之间传递信息？

我在少数情况下这很有用，我不想添加一些丑陋的不必要`catch`的块来设置一些变量`throw Exception`。第一个例子是，如果我在一些 Spring 或容器管理的事务方法中，并且发生了`try`阻塞`Exception`。在这种情况下，我需要创建新事务`finally`以使用数据库。第二个例子是我不想让我的原件`Exception`被`Exception`扔进`finally`块掩盖，但如果没有，`Exception`我会把它扔掉`finally`（如果有的话）。

我知道这一切都可以完成，`catch`但是还有其他方法吗，Java 中的一些元数据或其他任何方法？如果我们可以假设这将被一次性执行，那么它可能会有所帮助`Thread`，所以也许有一些方法可以发现 Exception bounded to current `Thread`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T08:44:36.810

这是让我长期感到沮丧的事情。

我通常在顶部声明一个变量 exceptionThrown=true 并在返回之前将其设置为 false 。然后你可以在 finally 处理程序中测试它。我认为这比捕获和重新抛出要好，因为后一种方法会弄乱堆栈跟踪。

我很惊讶 Java 和 C# 都没有更好的方法来处理这个问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T08:53:34.607

如果您使用的是 Java 7，那么[try-with-resource](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)可能会为您提供帮助。

它可以处理关闭事务，因此您不需要`finally`块。然后您可以将异常处理代码（例如创建新事务）放在一个`catch`块中。最后，如果从`try`块中抛出异常并且在释放资源时也抛出`try`异常，则可以通过调用`Throwable.getSuppressed`关闭事务时抛出的异常来获得异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T08:48:27.713

我建议尽可能使用新的自动资源管理功能：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

Java 7 还通过“抑制异常”增强了 Throwable：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html#suppressed-exceptions](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html#suppressed-exceptions)

# azure - Azure 虚拟机上的 FQDN

> ID：15289835
> 
> 赞同：1
> 
> 时间：2013-03-08T08:40:35.403
> 
> 标签：azure, azure-virtual-machine

我很好奇 FQDN 是否在 Azure 中的虚拟机上持久存在，以及是否有人可以发布一个示例，这会是什么样子。

IE`myhost-abc.vm.windows.net`

坚持我的意思是它永远是一样的，永远不会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-08T21:57:44.570

1.  使用远程桌面 (RDP) 连接到您的虚拟机
2.  打开命令提示符
3.  键入此命令：（`hostname`显示机器名称）
4.  键入此命令：（`nslookup "MACHINE_NAME"`其中“MACHINE_NAME”是在上一步中获得的）

结果显示名称（FQDN）和地址，在我的例子中：`MYSERVER.MYDOMAIN.f5.internal.cloudapp.net`总是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:35:19.213

创建 Windows Azure 虚拟机（或 Windows Azure 云服务）时，您首先为您的服务选择一个名称，然后根据您的服务名称为您分配一个 DNS 名称。例如，您选择了服务名称（VM 或 CS）“​​myservice”，只要您删除此服务，您的 DNS 名称将永远保持不变：

```
http://myservice.cloudapp.net 
```

现在，当创建服务中的虚拟机（或将您的云应用程序部署到此云服务）时，您将有一个 VIP（面向外部）分配给您的服务，并取决于您的服务端点配置，您的服务将与外部交互。只要您不删除虚拟机或部署，这些 IP 地址将保持不变。

如果您出于任何原因将 myservice 更改为 myservice1，您也可以使用 CNAME 设置（或 DNS 记录）将 www.myservice.com 调用路由到 myservice.cloudapp.net，在设置正确的 CNAME 后，您的 www.myservice.com 调用仍然可以进行到您的 Azure 服务（VM 或 CS）。

```
http://www.myservice.com  ==>> http://myservice.cloudapp.net or http://myservice1.cloudapp.net 
```

如您所见，选择 myservice 或 myservice1 作为服务名称并不重要，通过设置正确的 CNAME/DNS 设置，您可以将实际的 DNS 路由到 Azure 服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-11T12:09:54.370

只是一个补充。对于 Linux，请执行以下操作：

`nslookup "$(hostname)"`

# java - Android 在地图上显示用户

> ID：15289840
> 
> 赞同：0
> 
> 时间：2013-03-08T08:41:06.087
> 
> 标签：java, geolocation, android-mapview, locationmanager

在 iOS 上，我创建了一个应用程序，用户可以在其中分享他的位置，而其他用户可以在`MapView`.

我通过使用位置管理器获取位置来做到这一点，每当它改变**x**米时，然后使用 PHP 脚本将带有设备 ID 的纬度/经度写入数据库。然后，其他用户可以通过从数据库中检索此数据来按下按钮以在地图上显示位置。

现在这是我的问题。首先，我认为这是制作这样的应用程序的方法。如果您认为有更有效的方法，请告诉我。

更新此数据以在地图上显示用户的最佳方法是什么？

对于我的 iOS 应用程序，我使用了一个计时器，它每隔 30 秒左右从数据库中获取纬度/经度，但我不认为这是最有效或最好的方法。即使另一个用户没有改变他的位置，该应用程序也必须每秒加载一次数据。

您能否将我推向正确的方向，让我了解如何将图钉从旧位置设置为新位置的动画？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:25:59.203

因为没有答案，我使用了旧方法，即使用计时器来更新数据库中的 latt / long。顺便说一句，工作正常，但想知道是否有更好的方法。

# django - 我如何处理 NoReverseMatch？

> ID：15289844
> 
> 赞同：0
> 
> 时间：2013-03-08T08:41:09.113
> 
> 标签：django, django-urls

我有一个功能，

```
def show_checkout(request,id):
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if request.method == 'POST':
        resto = Restaurant.objects.get(pk=id)
        form = forms.CheckoutForm(request.POST,instance=restaurant)
        if form.is_valid():
            order_created = create_order(request,resto)
            .....
    return render(request,'checkout/checkout.html',context) 
```

在下一个视图中，我尝试提交表单，

```
def show_order(request):
    if request.method == 'POST':
        postdata = request.POST.copy()
        if postdata['submit'] == 'checkout':
            checkout_url = checkout.get_checkout_url(request)
            return HttpResponseRedirect(checkout_url) 
```

上面的视图在 checkout.py 中调用了这个视图

```
def get_checkout_url(request):
    return urlresolvers.reverse('checkout') 
```

urls.py `url(r'^checkout/(?P<id>\w+)$',show_checkout,name="checkout"),`

毕竟我得到了错误， `Reverse for 'checkout' with arguments '()' and keyword arguments '{}' not found.` 我以为我在正确的轨道上，我想我不是。

在`show_order`我做的编辑

```
def show_order(request,id):
    resto = Restaurant.objects.get(pk=id)
    ...
        if postdata['submit'] == 'checkout':
#           checkout_url = checkout.get_checkout_url(request)
            return HttpResponseRedirect(urlresolvers.reverse('checkout',kwargs={'id':resto})) 
```

在网址中我确实`url(r'^your_order/(?P<id>\w+)$',show_order,name="order_index"),` 会引发错误`page not found`

完整的 urls.py

```
from .views import show_item,show_checkout,show_order,get_category,homepage,reciept
from f4l import settings
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('',
    url(r'^$',homepage,name="homepage"),
    url(r'^menu/(\d+)$',get_category, name="f4l_menu"),
    url(r'^your_order/(?P<id>\w+)$',show_order,name="order_index"),
    url(r'^item/(?P<id>\w+)/$',show_item, name="item_order"),
    url(r'^checkout/(?P<id>\w+)$',show_checkout,name="checkout"),
    url(r'^reciept/$',reciept,name="checkout_reciept"), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:46:55.953

您不需要此 get_checkout_url 函数，需要为 url 传递 id 参数。

而不是`return HttpResponseRedirect(checkout_url)`试试这个：

```
HttpResponseRedirect(urlresolvers.reverse('checkout',kwargs={'id':your_id})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:21:05.493

你应该使用而`resto.id`不是仅仅喜欢`resto``reverse()`

```
return HttpResponseRedirect(urlresolvers.reverse('checkout',kwargs={'id':resto.id})) 
```

代替

```
return HttpResponseRedirect(urlresolvers.reverse('checkout',kwargs={'id':resto})) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:15:12.700

```
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('live.views',
    url(r'^$', 'homepage', name="homepage"),
    url(r'^menu/(\d+)/$', 'get_category', name="f4l_menu"),
    url(r'^your_order/(?P<id>\d+)/$', 'show_order', name="order_index"),
    url(r'^item/(?P<id>\d+)/$', 'show_item', name="item_order"),
    url(r'^checkout/(?P<id>\d+)/$', 'show_checkout', name="checkout"),
    url(r'^reciept/$', 'reciept', name="checkout_reciept"),

def show_order(request,id):
    resto = Restaurant.objects.get(pk=id)
    ...
        if postdata['submit'] == 'checkout':
            return HttpResponseRedirect(reverse('live:order_index',kwargs={
                'id':id})) 
```

# r - 如何将 predict() 与 newdata =var_i 一起使用？

> ID：15289846
> 
> 赞同：1
> 
> 时间：2013-03-08T08:41:13.507
> 
> 标签：r, prediction

我正在处理一个大数据，我把它分成块，所以它可以由 ram 管理，像这样：（这是一个我有更多块的例子）

```
var_1<-all_modell [c(1:150000)     ,]; save(var_1,file="~/var_1.Rdata");rm(var_1);
var_2<-all_modell [c(150001:300000),]; save(var_2,file="~/var_2.Rdata");rm(var_2);
var_3<-all_modell [c(300001:450000),]; save(var_3,file="~/var_3.Rdata");rm(var_3); 
```

这个想法是每次迭代都会加载一个块，用于预测然后擦除，因此 ram 可以自由处理下一个块：

```
for (i in 1:n_chunks)
{
name<-sprintf('var_%i',i); path<-sprintf('~/var_%i.Rdata',i)
load(path)
predicted     <- predict(Model, newdata =name, type = "prob") #here is the problem
value         <- as.numeric(lapply(predicted,"[[",2))
namef         <- sprintf('~/predicted%i.Rdata',i)
save(value,file=namef)
rm(list= ls()[!(ls()%in% Model)])
} 
```

我想知道的是如何通过`newdata=name`名称变化的地方......我也试过这个，但它没有用：

`predicted <- predict(Model, parse(text=sprintf(sprintf('newdata=var_%i',i))), type="prob")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:54:45.213

用于`get()`执行此操作。这是一个最小的例子：

```
x <- 1:100

x_1 <- x[1:50]
x_2 <- x[51:100]

for(i in 1:2){
  var <- sprintf('x_%i',i)
  print(sum(get(var)))
} 
```

这导致：

```
[1] 1275
[1] 3775 
```

* * *

有关`?get`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:54:59.010

使用单独的环境来保存你的块而不是使用可能会更干净一些`get`（尽管这`get`是简单的答案，并且是常见问题解答 7.21 的一部分）。

您的代码的可能修改：

```
myenv <- new.env()

for (i in 1:n_chunks) {
  name<-sprintf('var_%i',i); path<-sprintf('~/var_%i.Rdata',i)
  load(path, env=myenv)
  predicted     <- predict(Model, newdata =myenv[[name]], type = "prob")
  value         <- as.numeric(lapply(predicted,"[[",2))
  namef         <- sprintf('~/predicted%i.Rdata',i)
  save(value,file=namef)
  rm(list= ls(env=myenv), envir=myenv)
} 
```

# c# - 这两个演员的区别

> ID：15289848
> 
> 赞同：3
> 
> 时间：2013-03-08T08:41:23.320
> 
> 标签：c#, class, object, interface

我对选角真的不是很熟悉。因此，请随时对我的问题进行编辑或评论更改。

假设我有一个实现接口的类：

```
public class Class1: Interface1
{
} 
```

这两者有什么区别？：

```
Interface1 myObject = new Class1(); 
```

和

```
Class1 myClassObject = new Class1();
Interface1 myObject = (Interface1) myClassObject; 
```

第一个也是一种铸造形式吗？

编辑：

每个人是做什么的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:53:06.937

第一个确实是隐式演员表。引用微软：

> 对于引用类型，始终存在从类到其任何一个直接或间接基类或接口的隐式转换。不需要特殊语法，因为派生类总是包含基类的所有成员。

第二个转换是显式转换，如上所述，由于上述原因，不需要。当某些信息在转换过程中可能/将会丢失并告诉编译器如何处理时，显式转换是必要的。

微软有一篇关于铸造的好文章：http: [//msdn.microsoft.com/en-us/library/ms173105.aspx](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:44:54.757

第一个是多态特性（尽管仍然是隐式转换），因为 Class1 实现了 Interface1 。第二个是显式转换，并且不是必需的，因为 MyClass1 已经是一个 Interface1（说出来的问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T08:45:01.477

第一种情况这个概念叫做[多态](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)

> 在计算机科学中，多态性是一种编程语言特性，允许使用统一接口处理不同数据类型的值。参数多态性的概念适用于数据类型和函数。可以计算或应用于不同类型值的函数称为多态函数。可以看起来是通用类型的数据类型（例如，具有任意类型元素的列表）被指定为多态数据类型，就像进行这种专门化的通用类型一样。

# asp-classic - 突出显示经典 ASP 中的关键字

> ID：15289849
> 
> 赞同：0
> 
> 时间：2013-03-08T08:41:24.583
> 
> 标签：asp-classic, highlight

我有这句话，“那个人出去了”。

我也有 4 个搜索条件，我想获得高分（忽略括号），[went|"an WeNT o"|a|t] 和 [span id="something"][/span]。

我已经尝试了很多东西，但我不知道如何在经典的 ASP 中做到这一点！？如果我在文本中的某处插入一个，它也会在 HTML 代码中搜索 SPAN，这很糟糕，或者它不会找到文本，因为它已经被 HTML 代码弄乱了。我还尝试插入原始文本中的所有位置，甚至使用一些我不理解但无法正常工作的神奇正则表达式：-/

搜索的东西被划分为 | 并且可以是 1 到 20 个要搜索的东西。

谁能帮我解决如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:12:14.600

我找到并调整了一些代码，它非常适合我：

```
Function highlightStr (haystack, needles)

' Taken (and tweaked) from these two sites:
' http://forums.aspfree.com/asp-development-5/asp-highlight-keywords-295641.html
' http://www.eggheadcafe.com/forumarchives/scriptingVisualBasicscript/Jul2005/post23377133.asp
'    
' INPUT: haystack = search in this string
' INPUT: needles = searches divided by |... example: this|"is a"|search
' OUTPUT: HTML formatted highlighted string
'
If Len(haystack) > 0 Then

  ' Delete the first and the last array separator "|" (if any)
  If Left(needles,1) = "|" Then needles = Right(needles,Len(needles)-1)
  If Right(needles,1) = "|" Then needles = Mid(needles,1,Len(needles)-1)

  ' Delete a multiple seperator (if any)
  needles = Replace(needles,"||","|")

  ' Delete the exact-search chars (if any)
  needles = Replace(needles,"""","")

  ' Escape all special regular expression chars
  needles = Replace(needles,"(","\(")
  needles = Replace(needles,")","\)")
  needles = Replace(needles,".","\.")

  If Len(needles) > 0 Then
    haystack = " " & haystack & " "
    Set re = New RegExp
    re.Pattern = "(" & needles & ")"
    re.IgnoreCase = True 
    re.Global = True 
    highlightStr = re.Replace(haystack,"<span style='background-color:khaki;'>$&</span>")
  Else
    highlightStr = haystack
  End If

Else
  highlightStr = haystack
End If

End Function 
```

# javascript - 获取 div 内的所有元素，这些元素可以按 dom 树顺序排列

> ID：15289851
> 
> 赞同：0
> 
> 时间：2013-03-08T08:41:26.527
> 
> 标签：javascript, jquery, html

我需要处理 DIV 中的所有元素。元素必须是可选项卡的。我正在尝试这样

```
jQuery("#container a,:input:not(:hidden)") 
```

但它正在获取页面上的所有输入元素。如何获取`elements(a,:input:not(:hidden))`这个 div 的内部。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:43:27.920

当你在做：

```
jQuery("#container a,:input:not(:hidden)")
        ^ (1)        ^ (2) 
```

1.  您在容器中搜索 a 元素。
2.  您在整个页面中搜索不隐藏：输入（伪类输入确实存在？）！

试试这个：

```
jQuery("#container a, #container input:not(:hidden)") 
```

# mysql - 绑定Mysql 4.12

> ID：15289852
> 
> 赞同：0
> 
> 时间：2013-03-08T08:41:33.573
> 
> 标签：mysql, binding

我在绑定 MySQL 连接时遇到问题。我有一个使用 MySQL 5.5 的专用服务器。因为我需要一个旧版本，所以我下载、编译并安装了 MySQL 4.12。

一切正常，除了绑定。我无法绑定连接。

我什至创建了一个允许特定 IP 的新用户，但任何其他 IP 也可以连接到它。

```
GRANT ALL PRIVILEGES ON *.* TO 'newuser'@'1.1.1.1' IDENTIFIED BY 'password' WITH GRANT OPTION; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:57:16.537

使用反引号而不是引号。

像这样：

```
`newuser`@`1.1.1.1` 
```

# android - 在 Android 布局 XML 中创建的按钮不显示在 findViewById(R.id

> ID：15289856
> 
> 赞同：-3
> 
> 时间：2013-03-08T08:41:50.137
> 
> 标签：android, button

我在 Androids Layout 文件夹的 XML 文件中创建了一个按钮，现在我想添加一个 OnClickListener。问题是 findViewById(R.id.addNewMission) 不被接受。拼写是 100% 正确的。我已经清理了项目。现在做什么？

最好的祝福

这是一个片段。

```
 <?xml version="1.0" encoding="utf-8"?>
                        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical" >

                            <TextView
                                android:id="@+id/textView1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Create new Mission" />

                            <TableLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content" >

                                <TableRow
                                    android:id="@+id/tableRow1"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <LinearLayout
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content" >

                                        <TextView
                                            android:id="@+id/textView2"
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:text="Missionname" />
                                    </LinearLayout>
                                </TableRow>

                                <TableRow
                                    android:id="@+id/tableRow2"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <EditText
                                        android:id="@+id/editText1"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:ems="10" />
                                </TableRow>

                                <TableRow
                                    android:id="@+id/tableRow3"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >
                                </TableRow>

                                <TableRow
                                    android:id="@+id/tableRow4"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" >

                                    <LinearLayout
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:orientation="vertical" >

                                        <TextView
                                            android:id="@+id/textView4"
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:text="Target Person" />

                                        <EditText
                                            android:id="@+id/editText5"
                                            android:layout_width="match_parent"
                                            android:layout_height="wrap_content"
                                            android:ems="10" >

                                            <requestFocus />
                                        </EditText>

                                        <Button
                                            android:id="@+id/choosepic2"
                                            android:layout_width="110dp"
                                            android:layout_height="wrap_content"
                                            android:text="Choose Picture" />

                                    </LinearLayout>
                                </TableRow>
                            </TableLayout>

                            <Button
                                android:id="@+id/addNewMission"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:text="Add Mission" />

                        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:02:55.420

在你的`Fragment`：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

             View lView = inflater.inflate(R.layout.fragment_layout, container, false);
             mButton = (Button) lView.findViewById(R.id.button_name);
             mButton .setOnClickListener(...);

        return lView;
} 
```

# ajax - ajax请求后的跨域重定向

> ID：15289857
> 
> 赞同：3
> 
> 时间：2013-03-08T08:41:54.473
> 
> 标签：ajax, cross-domain, custom-headers, easyxdm

我只需要使用 jQuery 的 load() 函数加载一个跨域的 asp.net 页面，但是这个页面可以触发重定向（我可以访问服务器和客户端页面）。

加载的页面是一个 asp.net 页面，我从服务器使用：

```
Response.Redirect("http://www.google.it") 
```

但是chrome取消了重定向请求。我已经在谷歌上搜索了很多关于此的内容，很多人说“使用 CORS”，我不能，因为 IE7 不支持 cors，我需要支持该浏览器。

我尝试使用自定义标头，但似乎我无法从跨域读取这些标头，即使服务器在 web.config 中有这个：

```
 <customHeaders>
    <add name="Access-Control-Allow-Headers" value="*" />
    <add name="Access-Control-Allow-Origin" value="http://10.0.0.158" />
    <add name="Access-Control-Allow-Methods" value="*" />
    <add name="Access-Control-Allow-Credentials" value="true" />
    <add name="Access-Control-Expose-Headers" value="*"/>
  </customHeaders> 
```

是的，`http://10.0.0.158`是我的本地“客户页面”IP。经过一番谷歌搜索后，我阅读了有关[easyXDM](http://easyxdm.net/wp/ "易XDM")库的信息，但我仍然不确定它们是否能做到这一点。我可以用那些吗？如何？我有其他选择吗？

Ps：我得到了这个标题：

```
jQuery('body').bind('ajaxSuccess',function(event,request,settings){
                console.log("ajaxSuccess triggered: "+request.getAllResponseHeaders());
}); 
```

它只写这个：

```
Content-Type: text/html; charset=utf-8
Cache-Control: private 
```

使用提琴手，我所有的自定义标题都更大。

# java - Java String Tokenize 从向后

> ID：15289862
> 
> 赞同：0
> 
> 时间：2013-03-08T08:42:09.083
> 
> 标签：java, string

我有一个字符串

```
ContactPerson.BusinessPartner.name1,ContactPerson.BusinessPartner.name2,ContactPerson.fullname 
```

在这里，我需要根据逗号打破字符串，我已经做到了

```
ContactPerson.BusinessPartner.name1
ContactPerson.BusinessPartner.name2
ContactPerson.fullname 
```

但是我需要从最后再次标记它，即我需要提取 name1 并应将其存储为与 Businesspartner 相对应。名称 2 的情况相同。它应与 Busineespartner 相对应地存储。对于全名，我还应该提取全名并将其存储到相应的联系人。所以我需要将字符串从我首先遇到 (.) 的位置向后拆分，并且应该将字符串分成两部分并存储与之前的字符串相对应的字符串。我举的例子很简单。通常我们得到

Contactperson.Customer.Company.Businesspartner.name1 等字符串，因此 name1 应与业务伙伴相对应地存储。任何人都可以帮助我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:50:20.113

你可以像这样得到最后的部分：

```
String input = "ContactPerson.BusinessPartner.name1,ContactPerson.BusinessPartner.name2,ContactPerson.fullname";
String[] parts = input.split(",");
for (String part : parts) {
    String[] subparts = part.split("\\.");
    String last = subparts[subparts.length - 1];
} 
```

`last`然后将包含`name1`, `name2`, ...

详情请参阅[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:53:51.927

尝试

```
 String s = "ContactPerson.BusinessPartner.name1";
    String name = s.replaceAll(".+\\.([^.]+)", "$1"); 
```

# java - 对 String 数组进行排序，其字符串表示 int

> ID：15289863
> 
> 赞同：19
> 
> 时间：2013-03-08T08:42:09.360
> 
> 标签：java, sorting

我有`String[]`类似的数组

```
{"3","2","4","10","11","6","5","8","9","7"} 
```

我想按数字顺序排序，而不是按字母顺序。

如果我使用

```
Arrays.sort(myarray); 
```

我得到

```
{"10","11","2","3","4","5","6","7","8","9"} 
```

代替

```
{"2","3","4","5","6","7","8","9","10","11"} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T08:48:30.413

尝试自定义`Comparator`，如下所示：

```
 Arrays.sort(myarray, new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
        }
    }); 
```

希望你喜欢！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T08:46:22.227

我认为迄今为止将`String`s转换为s的最简单和最有效的方法`int`：

```
int[] myIntArray = new int[myarray.length];

for (int i = 0; i < myarray.length; i++) {
    myIntArray[i] = Integer.parseInt(myarray[i]);
} 
```

然后对整数数组进行排序。如果你真的需要，你可以随时转换回来：

```
for (int i = 0; i < myIntArray.length; i++) {
    myarray[i] = "" + myIntArray[i];
} 
```

另一种方法是使用[Comparator](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Comparator.html)接口来准确指定元素的比较方式，但这可能相当于将每个`String`值转换为`int`反正 - 使上述方法更加有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-24T11:07:02.360

我发现这篇关于通过数字排序对字符串进行排序的文章也适用于可能包含或不包含数字的字符串：

[字母算法](http://www.davekoelle.com/alphanum.html)

本文链接了一个 Java 实现示例。使用该类，您应该能够像这样对数组进行数字排序：

```
Arrays.sort(myarray, new AlphanumComparator()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T09:07:01.817

如果它只包含字符串格式的数字，你可以使用 sol-1。

## 解决方案-1：-

```
String []arr = {"3","2","4","10","11","6","5","8","9","7"};
        Set<Integer> set = new TreeSet<Integer>();
        Arrays.sort(arr);
        for(String s:arr){
            System.out.print(s+"  ");
            set.add(Integer.parseInt(s));
        }
        System.out.println(set);
        Integer i = new Integer("4f");
        System.out.println(i); 
```

## 解决方案-2：-

```
String []arr = {"3","2","4","10","11","6","5","8","9","7","jgj","ek"};
        Set<Integer> intSet = new TreeSet<Integer>();
        Set<String> strSet = new TreeSet<String>();
        Arrays.sort(arr);
        for(String s:arr){
            try {
                int i = Integer.parseInt(s);
                intSet.add(i);
            } catch (NumberFormatException e) {
                strSet.add(s);
            }
        }
        List<String> result = new ArrayList<String>();
        for(int val:intSet){
            result.add(val+"");
        }
        result.addAll(strSet);
        System.out.println(result);
    } 
```

## 解决方案-3：-

编写一个 CustomComparator 类并将其传递给 sort() 方法。

```
public class CustomComparator implements Comparator<String>{

    @Override
    public int compare(String s1, String s2) {
        Integer i1=null;
        Integer i2=null;
        try {
            i1 = Integer.parseInt(s1);
        } catch (NumberFormatException e) {
        }

        try {
            i2 = Integer.parseInt(s2);
        } catch (NumberFormatException e) {
        }

        if(i1!=null && i2!=null){
            return i1.compareTo(i2);
        }else{
            return s1.compareTo(s2);
        }
    }

} 
```

```
public static void main(){
String []arr = {"3","2","4","10","11","6","5","8","9","7","jgj","ek"};
Arrays.sort(arr, new CustomComparator());
        for(String s:arr){
            System.out.print(s+"  ");
        }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-01T06:33:37.153

如果您的 String 数组中的所有元素都表示数字，并且数字始终为正数，那么有一种简单的方法可以按数字排序，而不受数字值的限制。

这是基于这样一个事实，在这种情况下，具有较大位数的数字总是高于具有较小位数的数字。

您首先比较位数，然后（仅当位数相同时）按字母顺序比较值：

```
Arrays.sort(array,
            Comparator.comparing(String::length).thenComparing(Function.identity())); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-24T08:39:26.950

在 jdk8 中，您可以使用 lambda 编写此代码。

```
 List<String> list = Arrays.asList("3", "2", "4", "10", "11", "6", "5", "8", "9", "7");
        list.sort(Comparator.comparingInt(Integer::valueOf));
        list.forEach(System.out::println); 
```

尤其是输入

```
String[]{"3.b", "2.c", "4.d", "10.u", "11.a", "6.p", "5.i", "8.t", "9.e", "7.i"} 
```

您可以使用 string.subString 来选择您真正想要排序的值。
像

```
 files.sort(Comparator.comparingInt(a -> Integer.valueOf(a.substring(0, a.indexOf("."))))); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-08T08:53:38.057

您所需的输出包含字符串的相应整数的数字顺序。因此**，您无法避免将**字符串转换为整数。作为 vikingsteve 的替代比较器，您可以使用它：

```
Arrays.sort(array, new Comparator<String>() {
    @Override
    public int compare(String str1, String str2) {
        return Integer.parseInt(str1) - Integer.parseInt(str2);
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T08:58:11.900

```
public class test1 {

    public static void main(String[] args) 
    {
        String[] str = {"3","2","4","10","11","6","5","8","9","7"};
        int[] a = new int[str.length];
        for(int i=0;i<a.length;i++)
        {
            a[i]=Integer.parseInt(str[i]);
        }
        Arrays.sort(a);
        for(int i=0;i<a.length;i++)
        {
            str[i]=String.valueOf(a[i]);
        }
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-01T21:47:31.263

这是我能想到的最好的解决方案，当字符串很大时我们无法转换为整数，这种方法对字符串数组进行排序

```
public static void sortListOfStringsAsNumbers(List<String> unsorted) {        
    String min = "";
    for (int i = 0; i < unsorted.size(); i++){
        min = unsorted.get(i);
        int indexMin = i;
        for (int j = i + 1; j < unsorted.size(); j++){
            if (unsorted.get(j).length() < min.length()){
                min = unsorted.get(j);
                indexMin = j;
            }else if (unsorted.get(j).length() == min.length()){
                for (int x = 0; x < unsorted.get(j).length(); x ++){
                    if (unsorted.get(j).charAt(x) < min.charAt(x)){
                        min = unsorted.get(j);
                        indexMin = j;
                    }else if (unsorted.get(j).charAt(x) > min.charAt(x)){
                        break;
                    }
                }
            }
        }
        if (indexMin != i){
            String temp = unsorted.get(i);
            unsorted.set(i, min);
            unsorted.set(indexMin, temp);
        }

    }

} 
```

# c - 打印一个呼叫后

> ID：15289868
> 
> 赞同：0
> 
> 时间：2013-03-08T08:42:32.383
> 
> 标签：c, debugging, printf

我正在尝试调用一个似乎不起作用的函数。所以我添加了一些 printf() 这就是结果。

```
if (rc > 0) {
            bzero(buffer,256);
            n = read(sockfd,buffer,255);
            if (n < 0) 
                 error("ERROR reading from socket");
            printf("ListenPort() got this: %s",buffer);
            useEvent("maybe this works"); //ONLY a print statement.
            printf("Test");
        } 
```

在第一次调用这个函数时，我只得到：

```
ListenPort() got this: A 
```

在第二个电话我得到：

```
useEvent() Test ListenPort() got this: A 
```

来自先前调用的两个打印语句和来自新调用的 1 个。这意味着直到第二次调用或类似的东西，useEvent() 才会以某种方式运行。

我希望您不需要更多代码，但请告诉我，我会发布它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:45:00.123

默认情况下，标准输出是行缓冲的。`fflush(stdout);`在块的末尾添加`if`。

# javascript - JS IE8、7、9 错误'attr(..)' 为空或不是对象

> ID：15289874
> 
> 赞同：2
> 
> 时间：2013-03-08T08:42:52.967
> 
> 标签：javascript, object, drop-down-menu, internet-explorer-8, null

我想在 div 展开时显示 box-shadow 。我正在添加一个在扩展 div 案例中具有 box-shadow 类的类。它在所有浏览器中都运行良好。我面临的问题是 IE 8 显示错误：-'attr(...)' 为空或不是对象。

我需要你的帮助来解决这个问题。请建议。

这就是我所做的：

```
<script type="text/javascript">
animatedcollapse.addDiv('navDrop', 'fade=0,speed=100,')
animatedcollapse.addDiv('needHelp', 'fade=10,speed=300,')
animatedcollapse.ontoggle=function($, divobj, state){ //fires each time a DIV is expanded/contracted
    //$: Access to jQuery
    //divobj: DOM reference to DIV being expanded/ collapsed. Use "divobj.id" to get its ID
    //state: "block" or "none", depending on state
    jkmegamenu.render($);
        if($(".needHelpBox").attr('class').indexOf("shadow") > 0)
    {
        $(".needHelpBox").attr('class',$(".needHelpBox").attr('class').replace("shadow",""));
    }
    else
    {
        $(".needHelpBox").addClass('shadow');
    }

}
animatedcollapse.init()
</script> 
```

请帮忙..！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:44:52.290

你正在使用 jQuery！使用这里为您准备的方法：

```
var helpBox = $(".needHelpBox");
if(helpBox.hasClass('shadow')){
    helpBox.removeClass('shadow');
} else {
    helpBox.addClass('shadow');
} 
```

Bergi 的解决方案更简单，因为它利用了该`toggleClass`方法。

您面临的问题也可能在选择器中 `$(".needHelpBox")` 您确定 html 元素具有正确的类 (needHelpBox) 属性吗？您使用的是什么版本的 jQuery？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:01:09.650

看来您想使用该[`toggleClass()`方法](http://api.jquery.com/toggleClass/)（如果您使用 jQuery）：

```
$(".needHelpBox").toggleClass("shadow"); 
```

或[`toggleClassName`方法](http://api.prototypejs.org/dom/Element/toggleClassName/)（您使用 Prototype，在没有 时似乎更有可能`attr`）：

```
$(".needHelpBox").toggleClassName("shadow"); 
```

# c++ - vector::clear() 导致段错误

> ID：15289875
> 
> 赞同：1
> 
> 时间：2013-03-08T08:42:56.140
> 
> 标签：c++, stl

我有一个 std::vector 导致一些非常奇怪的段错误

```
//A.h
class A{
private:
  std::vector<float> data;
public:
  void set(const std::vector<float>& data);
};
//A.cpp
void A::set(const vector<float>& data){
  this->data.clear(); // crashes on this line
  for(float f : data) this->data.push_back(f);
} 
```

在什么情况下 vector::clear() 会导致段错误？我最初有

```
void A::set(const vector<float>& data){
  this->data = data;
} 
```

并有同样的问题。我切换到上面进行调试。这是在 gcc 4.7.2、x86_64 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:58:36.730

**如果**它恰好在调用“data.clear”时崩溃（我的意思是，正好在这一行，而不是在 clear 内的某个地方），那么一定要检查你的`this`指针在故障行。

如果由于先前错误的累积影响，您的 $this 以某种方式为 null 或垃圾值，则此行的行为可能类似。

另一方面，（几乎），如果它实际上在 clear 内的某个地方崩溃了，而您只是切断了堆栈跟踪以使问题描述更简洁，那么仍然有可能是相同的原因。

您可以在调试器中轻松检查“this”指针是否为 NULL。此外，检测垃圾值并不难：在`A`类中添加一些测试字段，在构造函数中填充一些可预测但不是常量的值，当应用程序崩溃时，检查 this->mytestvalue 是否正常。如果 $this 被丢弃，那么指定的测试值通常几乎是随机的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:47:11.887

这可能是由于其他地方发生的堆栈/内存损坏。您应该使用内存检查器运行您的程序，例如[Valgrind](http://valgrind.org)使用该`memcheck`工具来查看发生了什么。

# mysql - 从日志表中为每个用户选择最后一个条目

> ID：15289880
> 
> 赞同：1
> 
> 时间：2013-03-08T08:43:17.077
> 
> 标签：mysql, sql

您好，我的 sql 有问题，假设为许多用户选择每个用户的最后一个日志条目。这是我的桌子的样子

```
user_id |   date
--------------------
    1       2013-03-06 10:00:00
    17      2013-03-06 11:00:00
    2       2013-03-06 10:00:00
    5       2013-03-06 10:00:00
    1       2013-03-06 11:00:00
    17      2013-03-06 13:00:00
    17      2013-03-06 13:01:00
    2       2013-03-06 14:01:00
    2       2013-03-06 15:00:00
    2       2013-03-06 18:01:00 
```

这个查询的结果应该是

```
user_id |   date
--------------------
    1       2013-03-06 11:00:00
    2       2013-03-06 18:01:00
    5       2013-03-06 10:00:00
    17      2013-03-06 13:01:00 
```

现在我正在使用这个查询

```
SELECT 
    a.user_id,
    (SELECT b.date FROM alerts.alerts_log as b WHERE b.user_id = a.user_id ORDER BY b.date DESC LIMIT 1) as date
FROM 
    alerts.alerts_log  as a
WHERE 
    a.user_id IN  (1,2,5,17) 
GROUP BY a.user_id 
```

但我不认为它是最好的，因为对于许多记录来说太慢了……你能推荐我更好的吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:45:30.803

```
SELECT user_id , MAX(date)
FROM alerts.alerts_log
GROUP BY user_id; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T08:44:47.487

如果表中只有两列，下面的查询将满足您的需求，

```
SELECT  user_ID, MAX(date) max_date
FROM    tableName
GROUP   BY user_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/02ddf/1)

但如果不是，并且您想获取行内的所有列，则需要有子查询，它分别获取每个`user_ID`.

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  user_ID, MAX(date) max_date
            FROM    tableName
            GROUP   BY user_ID
        ) b ON a.user_ID = b.user_ID AND
                a.date = b.max_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/27dd5/1)

# function - 如何将代码从 amenu 改编为 vimscript？

> ID：15289887
> 
> 赞同：1
> 
> 时间：2013-03-08T08:43:29.127
> 
> 标签：function, vim

我想在 vimscript 中创建一个函数，该函数必须读取外部文档并使用缓冲区中的文本对其进行测试。

这是在 :amenu 中运行良好的代码（在 menu.vim 中）
`/^\%(.*\<\%(<C-r>=join(readfile('d:\database.txt'),'\\|')<CR>\)\>\)\@!.*$<CR>`

我想在函数中使用相同的代码，但不知道如何调整它。
上面的代码包含 2`<CR>`在函数中不起作用。

**1）**我怎样才能适应上面的代码，使它在vimscript函数中工作？

将使用输入对话框插入外部文档

`function! s:CheckWithDocument()`
`if !exists("docinput")`
`let docinput = "Document to match with?"`
`endif`
`let a = inputdialog(docinput)`
`let @/ .....`
`return`
`endfunction`

我在菜单中调用它：`:call <SID>CheckWithDocument()<CR>`

**2）**如何插入`'a'`上面的vimscript代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:01:28.650

换一种方式其实更难。他们使用表达式寄存器`<C-r>=`来插入一些任意的 vimscript，而您可以将其附加到您的搜索字符串中。

```
let @/ = "/^\\%(.*\\<\\%(".join(readfile('d:\database.txt'),'\\\\|')."\\)\\>\\)\\@!.*$" 
```

使用相同的方法将`a`变量附加到您想要的位置。

# c# - 从类库中读取连接字符串

> ID：15289890
> 
> 赞同：1
> 
> 时间：2013-03-08T08:43:44.760
> 
> 标签：c#, winforms, connection-string, app-config, class-library

我目前正在努力`App.config`从我的类库（和单元测试）中读取我的 WinForms 应用程序内部的连接字符串。

`App.config`我在;中添加了一个“测试”条目

```
<connectionStrings>
     <add name="MyConnString" connectionString="Test;" />
</connectionStrings> 
```

我的 TestMethod 看起来像这样；

```
 [TestMethod]
    public void TestConnection1()
    {
        string connString = "";

        if (ConfigurationManager.ConnectionStrings["MyConnString"] != null)
        {
            connString = ConfigurationManager.ConnectionStrings["MyConnString"].ConnectionString;
        }

        string expected = "Test;";
        string actual = connString;

        Assert.AreEqual(expected, actual);
    } 
```

这显然失败了。`Actual`的值为空。我究竟做错了什么？

![在此处输入图像描述](../Images/5912528a9436af3f671e5fed40bca14a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:52:11.110

您还需要将连接字符串键添加到测试项目的配置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:14:18.653

关于您对 DJ Kraze 的评论：“ @DJ *KRAZE，如果我将 0 作为索引，它会返回一个 SQLExpress“aspnetdb.mdf”的连接字符串。如果我将 1 作为索引，我会得到一个异常 ( `IndexOutOfRangeException`)，所以很明显我的字符串没有找到。”*

问题是您忘记了配置元素。例如：

引用自 MSDN：[存储和检索连接字符串](http://msdn.microsoft.com/en-US/library/ms254494%28v=vs.80%29.aspx)

```
<?xml version='1.0' encoding='utf-8'?>
  <configuration>
    <connectionStrings>
      <clear />
      <add name="Name" 
       providerName="System.Data.ProviderName" 
       connectionString="Valid Connection String;" />
    </connectionStrings>
  </configuration> 
```

machine.config 文件还包含一个`<connectionStrings>`部分，其中包含 Visual Studio 使用的连接字符串。**在 Windows 应用程序的app.config**文件中按提供程序名称检索连接字符串时，首先加载 machine.config 中的连接字符串，然后是**app.config**中的条目。在 connectionStrings 元素之后立即添加 clear 会从内存中的数据结构中删除所有继承的引用，以便仅考虑本地**app.config**文件中定义的连接字符串。

# jquery - 为什么通过选择器使用 Jquery 加载所有内容

> ID：15289891
> 
> 赞同：0
> 
> 时间：2013-03-08T08:43:57.207
> 
> 标签：jquery

`load`所有，我对 jquery方法的使用有一点问题。请帮助审查它。假设您有如下所示的源 html（url 是 Templetes/templetesList.html）。

```
<html>
<head></head>
<body>
    <ol id="layoutol">
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/e6a9bb54da25102b9a032db401e887ec.PNG" /></li>
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/a709bb54da25102b9a032db401e8aded.PNG" /></li>
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/cad4bb54da25102b9a032db401e855a.PNG" /></li>
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/12344bb54da25102b9a032db401edddd.PNG" /></li>
    </ol>
</body>
</html> 
```

脚本如下所示。

```
$("#layoutol").load("templetes/templetesList.html li",function(data){alert(data);}); 
```

正如文档所说，数据将是响应文本。

但是为什么我得到了所有的 html 内容而不是`li`内容？我的意思是我只需要那个`li`部分。

```
 <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/e6a9bb54da25102b9a032db401e887ec.PNG" /></li>
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/a709bb54da25102b9a032db401e8aded.PNG" /></li>
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/cad4bb54da25102b9a032db401e855a.PNG" /></li>
        <li class="ui-state-default"><img alt=""
            src="templetes/thumbnails/12344bb54da25102b9a032db401edddd.PNG" /></li> 
```

我错过了什么 ？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:51:07.367

以这种方式发布选择器`.load`确实只会将所选内容加载到您的目标中，但响应文本仍将是完整请求的响应文本。发生的情况是提交了对整个文档的请求，并且与您的选择器匹配的内容被事后过滤掉了。这不会影响响应文本的内容。

[演示](http://jsfiddle.net/mMeLS/)

请注意如何仅将`li`元素加载到列表中，但整个源都已登录`console.log`

# perl - 具有多个元素的 WWW::Mechanize::Firefox CSS 选择器？

> ID：15289894
> 
> 赞同：0
> 
> 时间：2013-03-08T08:44:04.990
> 
> 标签：perl, www-mechanize-firefox

用于[`WWW::Mechanize::Firefox`](HTTPS://metacpan.org/module/WWW%3a%3aMechanize%3a%3aFirefox)选择项目时，是否可以遍历多个具有相同名称的选择器？

我使用以下代码：

```
my $un = $mech->selector('input.normal', single => 1); 
```

响应是`2 elements found for CSS selector`。有没有办法使用 XPath 或更好的方法，或者是否可以循环遍历结果？

加分项：输入输入，即使它不在表单元素中（即使用 JavaScript）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:28:03.590

使用`single`您指定的选项，应该有一个与选择器匹配的元素。这就是为什么在找到两个匹配项时会收到错误消息的原因。

该方法将返回一个匹配列表，您可以使用`one => 1`代替`single => 1`，如果没有至少一个匹配，这将引发 van 错误，或者您可以完全不使用该选项，它只会返回它的所有内容发现。

```
my @inputs = $mech->selector('input.normal') 
```

`@inputs`将用匹配元素列表填充数组`<input>`，无论有多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:35:00.290

模块文档包含以下示例：

```
my $link = $mech->xpath('//a[id="clickme"]', one => 1);
# croaks if there is no link or more than one link found

my @para = $mech->xpath('//p');
# Collects all paragraphs 
```

# java - 在 android http post 中转换“php 脚本以发送推送通知”

> ID：15289898
> 
> 赞同：3
> 
> 时间：2013-03-08T08:44:17.383
> 
> 标签：java, android, push-notification, google-cloud-messaging

我想将**php 脚本**（在 android 设备中发送推送通知）转换**为 android http post**代码。

**php脚本（工作正常）**：

**打印响应：**

{"multicast_id":7657471480142898452,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1362731818787207%38894628f9fd7ecd"}]}

```
 <?php
 $registrationIds = array("APA91bH1-35qLot...."); //device registration id

$apiKey = "AIzaSyCrKrzFl...";   //"YOUR_BROWSER_API_KEY";

$response = sendNotification($apiKey,$registrationIds,array('message' => $message, 'tickerText' => $tickerText, 'contentTitle' => $contentTitle, "contentText" => $contentText) );

echo $response;

function sendNotification( $apiKey, $registrationIdsArray, $messageData ) {
$headers = array("Content-Type:" . "application/json", "Authorization:" . "key=" . $apiKey);
$data = array(
'data' => $messageData,
'registration_ids' => $registrationIdsArray
);

$ch = curl_init();

curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers );
curl_setopt( $ch, CURLOPT_URL, "https://android.googleapis.com/gcm/send" );
curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 0 );
curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, 0 );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode($data) );

$response = curl_exec($ch);
curl_close($ch);

return $response;

}

?> 
```

**安卓代码（不工作）：**

**打印响应：**

```
<HTML>
<HEAD>
<TITLE>Unauthorized</TITLE>
</HEAD>
 <BODY BGCOLOR="#FFFFFF" TEXT="#000000">
 <H1>Unauthorized</H1>
<H2>Error 401</H2>
 </BODY>
 </HTML>

public boolean sendMessage() {

        String serviceUrl = "https://android.googleapis.com/gcm/send";

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("registration_ids", "APA91bH1-35qLotyb......"));
        nameValuePairs.add(new BasicNameValuePair("data", "this is a test message"));

        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(serviceUrl);
            httpPost.setHeader("Authorization", "AIzaSyCrKrzFlPbauq......");
            httpPost.setHeader("Content-Type", "application/json");
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            json_str = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            json_str = "Can't connect to server";
        } catch (MalformedURLException e) {
            json_str = "Can't connect to server";
        } catch (IOException e) {
            json_str = "Can't connect to server";
        }

        Log.i("***sendMessage", json_str);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:37:16.323

您忘记了`key=`API 密钥之前的前缀。应该

```
httpPost.setHeader("Authorization", "key=AIzaSyCrKrzFlPbauq......"); 
```

这就是您收到 401 错误的原因。你有更多的错误。即使您的内容类型声明为 JSON，您也不会发送 JSON 字符串。

# erlang - Erlang：解释一段代码

> ID：15289899
> 
> 赞同：0
> 
> 时间：2013-03-08T08:44:21.397
> 
> 标签：erlang

有人可以帮我理解这段 Erlang 代码吗

```
to_price_file(Line, OutputFile) ->
  Fields = csv:parse_line(Line),
  [SupplierID, ProductCode, Description, DeliveryDate, CostPrice, UnitCount] = Fields,
  Product = calculate_product(list_to_integer(SupplierID),list_to_integer(ProductCode),
                              Description, **date_utils:parse_date(DeliveryDate)**,
                              list_to_integer(CostPrice), list_to_integer(UnitCount)),
  ok = write_pricefile(Product, OutputFile),
  ok. 
```

调用另一个子函数 parse_date（如下）。

```
parse_date(DateString) ->
  Tokens = string:tokens(DateString, "/"),
  **[Year, Month, Day] = [list_to_integer(Str) || Str <- Tokens],
  {Year, Month, Day}.** 
```

我不明白，**粗体**字母的命令在子功能中做了什么。

谢谢， 阿尼什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:37:30.043

该函数`parse_date/1`假定日期字符串的格式为`"Year/Month/Day"`：

```
parse_date(DateString) ->
    Tokens = string:tokens(DateString, "/"),
    [Year, Month, Day] = [list_to_integer(Str) || Str <- Tokens],
    {Year, Month, Day}. 
```

它首先调用`string:tokens/2`其中返回的单独字段列表，`"/"`是分隔符字符串。然后它对调用中的每个元素进行*列表*推导并返回值列表。然后它使用模式匹配将列表拆分为单独的部分，并返回一个包含值的*元组*。示例运行中的变量值可能是：`Tokens``list_to_integer/1`

 *```
DateString = "2013/03/08"
Tokens = ["2013","03","08"]
[Year,Month,Date] = [2013,3,8]
{2013,3,8} 
```

列表推导式非常常见，并且通常是一种非常简洁的方式，可以将操作应用于列表中的每个元素，例如`lists:map/2`，带有过滤选项（此处未使用）。

请注意，在 ISO 标准中，日期应写为 2013-03-08。:-)*

# kendo-ui - kendo ui treeview 复选框不适用于无序列表？

> ID：15289900
> 
> 赞同：2
> 
> 时间：2013-03-08T08:44:29.493
> 
> 标签：kendo-ui, kendo-treeview

我的数据已经在嵌套的无序列表中。我正在尝试为每个节点添加复选框。这似乎不起作用。这是一个小小提琴。 [http://jsfiddle.net/ge3Qg/](http://jsfiddle.net/ge3Qg/)

```
$("#treeview2").kendoTreeView({
    dataSource: items,
    checkboxes: {
        checkChildren: true
    },
    dataTextField: ["CategoryName", "ProductName"]
});

$("#treeview").kendoTreeView({
    checkboxes: true

}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:56:00.150

实际上，`checkboxes`配置选项依赖于客户端模板，当内容从服务器呈现时，这些模板不会被考虑在内。在较新版本的 Kendo (2012.Q3+) 中，您可以渲染列表中的复选框，它们将正确对齐。请参阅[更新的小提琴](http://jsfiddle.net/ge3Qg/1/)。

# java - 如何声明这样的变量——ArrayList LinkedhashMap

> ID：15289905
> 
> 赞同：-4
> 
> 时间：2013-03-08T08:44:48.357
> 
> 标签：java, scjp

![在此处输入图像描述](../Images/fe15eb59770f05464ea9cbc7312c3452.png)

如何声明这样的变量——ArrayList LinkedhashMap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:48:40.707

```
Map<String, ArrayList<LinkedHashMap<KeyType, ValueType>> maps; 
```

`KeyType`并且`ValueType`是占位符，我不知道真正的类型。真正的声明应该使用接口。但这是最接近你的问题的答案。

（更好的声明：

```
Map<String, List<Map<KeyType, ValueType>> maps; 
```

我们将映射列表映射到字符串值。这就是这个数据结构的解释）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:55:54.220

**好吧，如果您使用的是 Java 1.5 或更高版本，则可以使用泛型**

```
//This approach is type safe.
List<LinkedHashMap<KeyType,ValueType>> myListOfMaps  = ArrayList<LinkedHashMap<KeyType, ValueType>>(); 
```

**对于小于 1.5 的 Java，请使用普通的 Arraylist。**

```
List myListOfMaps  = new ArrayList (); //But with this approach its not type safe , 
                                    //because any object type can be inserted 
```

**现在创建 ListsofMaps 的地图**

```
Map<String, List<Map<KeyType, ValueType>> maps = new HashMap <String, List<Map<KeyType, ValueType>>();
maps.put("rows",myListOfMaps  ); 
```

这个链接会给你[为什么使用泛型？](http://docs.oracle.com/javase/tutorial/java/generics/why.html)

查看此[通用教程](http://docs.oracle.com/javase/tutorial/java/generics/)以获取更多信息

# php - 如何使用滑块图像及其拇指图像在 php 代码中转换滑块库

> ID：15289909
> 
> 赞同：0
> 
> 时间：2013-03-08T08:44:52.387
> 
> 标签：php

我正在使用这个滑块库。我在显示图像的拇指时遇到问题。当我在拇指后结束 while 循环时，我只在 UL 和 li 标签上使用了 while 循环。它将在主图像框中显示所有图像.. 谁能告诉我如何在我的 php 代码中使用这个画廊

```
 <div class="image-gallery">
     <?php  if($pic_count > 0){ ?>
      <div id="wowslider-container1">
        <div class="ws_images">
          <?php while(!$rs_img_gallery->EOF) { ?>
          <ul>
            <li><img src="<?php echo MYSURL;?>img.gallery/<?php echo $rs_img_gallery->fields['image'] ?>" alt="" id="wows1_0"/></li>
         </ul>
            <?php $rs_img_gallery->MoveNext();
                } // end while(!$rs_dc_gallery->EOF) ?> 
              </div>
                <div class="ws_thumbs">
                <div>
                    <a href="#"><img src="<?php echo MYSURL;?>img.gallery/<?php echo $rs_img_gallery->fields['image'] ?>" alt="" width="120" height="90"/></a>      
                </div>
                </div>
              </div>
           <?php  }else{
            echo "<div class='notification information png_bg' style='width:90%;'>
     <div>
            ".$infomsg['msg164']."
             </div>
             </div>";
            }?>
           </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:54:05.787

您应该将 <UL> 从 while 循环中取出

```
 <div class="ws_images">
    <ul>
    <?php   while(!$rs_img_gallery->EOF) { ?>
        <li>
            <img src="<?php echo MYSURL;?>img.gallery/<?php echo $rs_img_gallery->fields['image'] ?>" alt="" id="wows1_0"/>
        </li>
    <?php 
    $rs_img_gallery->MoveNext();
    } // end while(!$rs_dc_gallery->EOF)
    ?>
    </ul> 
 </div> 
```

# maven-3 - 声纳 Pitest 插件

> ID：15289915
> 
> 赞同：6
> 
> 时间：2013-03-08T08:45:02.490
> 
> 标签：maven-3, sonarqube, mutation-testing, pitest

我想整合一些[突变测试](http://en.wikipedia.org/wiki/Mutation_testing)来确保我的junit测试的质量。我想在我的项目的[声纳](http://www.sonarsource.org/)仪表板中获得结果。

[声纳 ptest 插件](https://github.com/SonarQubeCommunity/sonar-pitest)似乎可以满足我的要求，但是 maven 3 存在一些问题，它仍在开发中。

有人试过这个插件吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T12:10:06.433

我相当确定声纳没有其他突变测试插件。

我自己并没有真正尝试过pit sonar插件，但我知道maven 3的问题可以解决

看

[https://groups.google.com/forum/?fromgroups=#!topic/pitusers/bkDD13iBtHU](https://groups.google.com/forum/?fromgroups=#!topic/pitusers/bkDD13iBtHU)

PIT maven 插件本身已经相当成熟，并且正在生产中成功使用。如果您遇到声纳插件问题，您可以从 CI 服务器发布 maven 报告。

请反馈您遇到的任何问题 - 我相信 Alexandre 会很乐意解决这些问题。

# actionscript-3 - CameraRoll addBitmapData() 到文件夹

> ID：15289917
> 
> 赞同：0
> 
> 时间：2013-03-08T08:45:04.923
> 
> 标签：actionscript-3, apache-flex, air

我知道使用 AIR AS3`CameraRoll addBitmapData()`我可以将拍摄的图像存储到设备的专用媒体库中。

现在的问题是：有没有办法为我的应用程序创建一个单独的可浏览文件夹，以使用该方法添加图像？或者有没有其他方法可以将我想要存储的图像与其他图像分开？

编辑：所以这就是我最终完成它的方式：

```
var imageFile:File = File.documentsDirectory.resolvePath("DCIM/yourfolder/");
if(!imageFile.exists) imageFile.createDirectory();
imageFile = imageFile.resolvePath("yourfile.jpg");

var fileStream:FileStream = new FileStream();
fileStream.open(imageFile, FileMode.WRITE);
fileStream.writeBytes(byteArray);
fileStream.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:24:46.087

AIR 将允许您访问本地文件系统。您可以使用`File`具有一系列特定于空气的参数的 flash 本机类，以允许在没有对话框的情况下保存和移动文件，并且安全限制要少得多。标准`save`功能将在没有空气的情况下工作，但坚持一个对话框。

官方文档在这里： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)

我已经在我写的一个旧的照相亭应用程序中实现了这一点......我会尝试挖掘它并发布我所拥有的。

编辑：

首先，库如下：

```
adobe.air.filesystem.*;
adobe.air.filesystem.events.*; 
```

这是 AIR 工具的样子：

```
function saveMyFile(){

var imgFile:String 
// however you define your filename;
var f:File=File.desktopDirectory.resolvePath("myfolder/" + imgFile); 
//defines the directory, attaches the filename
var s:FileStream=new FileStream();
//creates the filestream

s.open(f, FileMode.WRITE);
s.writeBytes(jpgStream); 
// in this case jpgStream was bitmapData var compiled from a screenshot
s.close();
} 
```

我只需要导航到桌面上的一个文件夹，但我确信有更彻底的方法可以深入挖掘。

# android - 自定义键盘和默认键盘

> ID：15289920
> 
> 赞同：1
> 
> 时间：2013-03-08T08:45:12.663
> 
> 标签：android, android-layout, android-keypad, android-input-method

好的，所以我有一个自定义键盘视图，可以在编辑文本上的触摸事件上打开，但是当我在设备上使用它时，默认键盘会显示并且它与我的自定义键盘重叠，所以我必须单击后退按钮才能使默认键盘向下和让我的自定义键盘实际显示在屏幕上。我尝试过 Inputmethodmanager 方法来隐式隐藏默认键盘。当我启用物理键盘输入但不在全触摸设备上时，它隐藏在模拟器上。请帮帮我。

# actionscript-3 - 如何在运行时更新八哥电影剪辑中的纹理

> ID：15289922
> 
> 赞同：0
> 
> 时间：2013-03-08T08:45:15.580
> 
> 标签：actionscript-3, flash-builder, starling-framework

我正在开发一个原型，其中我使用了 Starling 框架。我使用了八哥电影剪辑，我们必须在其中提供纹理作为构造函数参数。

```
var demoMc:MovieClip = new MovieClip(textures:Texture, fps:Number = 12); 
```

但是我必须在运行时提供该纹理参数，因为我必须更改纹理运行时，有什么方法可以为它提供运行时纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T04:38:44.957

如果我们想在运行时更新starling movieClip 中的纹理，那么我们可以使用starling movieClip 的addframe() 方法，或者我们可以动态加载该纹理并将其提供给movieClip。

如果我们通过movieClip的方法，我们会找到答案。

# javascript - 如何仅使用 JavaScript 获取下一个元素？

> ID：15289932
> 
> 赞同：7
> 
> 时间：2013-03-08T08:45:40.980
> 
> 标签：javascript, prepend

假设我们有这个标记：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf8" />
<title>project.js</title>
<script src="project.js"></script>
<script>

</script>
</head>

<body>
<h1>some project &mdash; javascript & html tests</h1>
<hr />

    <p>
        testing 123
    </p>
</body>
</html> 
```

我知道有`.prependChild()`, `.appendChild()`, `.innerHTML`, 等属性和方法，但我正在寻找的是如何在`</body>`标签关闭后添加（附加）内容？

我需要这个，**而不使用 jQuery——**这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T08:50:45.323

如果你使用'id'。你可以使用这些属性：

```
document.getElementById('id').nextSibling; 
document.getElementById('id').previousSibling; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:07:39.190

它在某些浏览器中不起作用，因为之后的内容`body`不是“合法的”。无论如何，这将是：

```
document.body.parentNode.appendChild(document.createTextNode('text after body'));
document.body.parentNode.appendChild(document.createComment('comment after body')); 
```

[http://jsfiddle.net/yVKk6/](http://jsfiddle.net/yVKk6/)并检查结果框架。

# java - 在容器外运行的 Java Web 服务仅允许一个用户在启用身份验证时进行连接

> ID：15289936
> 
> 赞同：2
> 
> 时间：2013-03-08T08:46:02.933
> 
> 标签：java, web-services, jax-ws

我正在通过 web 服务为一些游戏构建一个框架，由于各种原因需要在没有应用程序容器的情况下运行。

在这一点上，我所追求的是每个玩家都将进行身份验证，并点击登录服务。在所有玩家都登录之前，登录服务不会返回，因此玩家知道一旦他们的呼叫完成，他们就可以开始玩了。

我遇到的问题是，这在没有身份验证的情况下可以正常工作，但是一旦我启用身份验证，第一个玩家就会进行身份验证并正确连接，但是只要第一个玩家正在等待登录服务，第二个玩家就无法连接返回。

服务如下所示：

```
public void login()
{
    Game game = Game.getInstance();
    while (game.getStatus() != Status.RUNNING)
    {
        try
        {
            Thread.sleep(10);               
        } 
        catch (InterruptedException e)
        {
            // swallow it, doesn't matter
        }
    }
} 
```

客户端看起来像（精简到连接逻辑）：

```
public void clientLogin()
{
    Authenticator.setDefault(new Authenticator()
    {
        @Override
        protected PasswordAuthentication getPasswordAuthentication()
        {
            return new PasswordAuthentication(getUsername(), getPassword());
        }
    });

    QName qName = new QName("http://namespace/", "ChallengeService");
    URL url = new URL(endPoint);
    ChallengeService wsClient = new ChallengeService(url, qName);
    System.out.println("Got Client");
    wsPort = wsClient.getChallengePort();
    wsPort.login();
} 
```

服务器启动：

```
public void startServer()
{
    server.start();
    endpoint = Endpoint.create(new ChallengeService());
    server = HttpServer.create(new InetSocketAddress(7070), 5);
    context = server.createContext("/Challenge/ChallengeService");
    context.setAuthenticator(new StandaloneAuthenticator("Challenge")); // disabling this works
    endpoint.publish(context);
} 
```

有任何想法吗？

# directx - 为什么我的网格每隔一帧才显示一次？

> ID：15289942
> 
> 赞同：0
> 
> 时间：2013-03-08T08:46:29.557
> 
> 标签：directx, render, mesh, directx-11

我正在尝试使用 SharpDX (DX11) 在屏幕上绘制一个三角形。无论出于何种原因，三角形似乎仅每隔一帧绘制一次。我的设备初始化代码如下所示：

```
public void Init()
    {
        renderForm = new RenderForm(Engine.GameTitle);
        renderForm.ClientSize = new Size(Engine.Settings.Screen.Width, Engine.Settings.Screen.Height);
        renderForm.MaximizeBox = false;

        var desc = new SwapChainDescription()
        {
          BufferCount = 2,
          ModeDescription = new ModeDescription(renderForm.ClientSize.Width, renderForm.ClientSize.Height, new Rational(60, 1), Format.R8G8B8A8_UNorm),
          IsWindowed = true,
          OutputHandle = renderForm.Handle,
          SampleDescription = new SampleDescription(1, 0),
          SwapEffect = SwapEffect.Sequential,
          Usage = Usage.RenderTargetOutput
        };  

        Device.CreateWithSwapChain(DriverType.Hardware, DeviceCreationFlags.Debug, desc, out device, out swapChain);
        deviceContext = device.ImmediateContext;  

        var factory = swapChain.GetParent<Factory>();
        factory.MakeWindowAssociation(renderForm.Handle, WindowAssociationFlags.IgnoreAll); 

        backBuffer = Texture2D.FromSwapChain<Texture2D>(swapChain, 0);
        renderView = new RenderTargetView(device, backBuffer);

        backBuffer.Dispose();

        deviceContext.OutputMerger.SetTargets(renderView);

        deviceContext.Rasterizer.SetViewports(new Viewport(0, 0, renderForm.ClientSize.Width, renderForm.ClientSize.Height, 0.0f, 1.0f));

        ProjectionMatrix = Matrix.PerspectiveFovLH(
            (float)(Math.PI / 4),
            (float)(renderForm.ClientSize.Width / renderForm.ClientSize.Height),
            nearPlane,
            farPlane);

        WorldMatrix = Matrix.Identity;

        renderForm.Location = new Point(Screen.PrimaryScreen.Bounds.Width / 2 - Engine.Settings.Screen.Width / 2, Screen.PrimaryScreen.Bounds.Height / 2 - Engine.Settings.Screen.Height / 2);
    } 
```

渲染三角形的代码如下所示：

```
public void Render()
{
    DeviceContext context = D3DRenderer.Instance.GetDevice().ImmediateContext;

    context.InputAssembler.SetVertexBuffers(0, new VertexBufferBinding(VertexBuffer, Utilities.SizeOf<Vertex>(), 0));
    context.InputAssembler.SetIndexBuffer(IndexBuffer, Format.R32_UInt, 0);
    context.InputAssembler.PrimitiveTopology = PrimitiveTopology.TriangleList;
}

public void RenderShader(int indexCount)
{
    device.ImmediateContext.DrawIndexed(indexCount, 0, 0);
} 
```

而 Render() 在 RenderShader() 之前被调用。除 Direct3D 警告外，任何函数均未返回错误消息：

D3D11：警告：ID3D11DeviceContext::DrawIndexed：顶点着色器单元插槽 0 处的常量缓冲区的大小太小（提供 64 字节，预计至少 192 字节）。

我的 MatrixBuffer 结构如下所示：

```
[StructLayout(LayoutKind.Sequential)]
internal struct MatrixBuffer
{
    public Matrix world;
    public Matrix view;
    public Matrix projection;
} 
```

我一直在用不同的颜色每隔一帧清除一次后台缓冲区，以确保不正确交换后台缓冲区不是问题。这工作正常。

我很困惑为什么这现在不起作用。我希望有人知道这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:42:52.653

女士们先生们，今天吸取教训..永远不要复制和粘贴教程代码。曾经。原来问题出在着色器渲染代码中。我复制声明的教程（并没有在这里发布，否则对你们来说可能已经很明显了）的世界/视图/投影矩阵声明如下：

```
public Matrix WorldMatrix { get; private set; } 
```

然后我尝试这样做：

```
D3DRenderer.Instance.WorldMatrix.Transpose(); 
```

目前明显的原因是行不通的。有趣的是，它似乎每隔一帧都有效。为什么会这样我不知道。但是在将矩阵定义从私有集更改为设置后，现在一切正常。

# iphone - 在 iOS 中查看 .gfx 文件

> ID：15289948
> 
> 赞同：2
> 
> 时间：2013-03-08T08:46:51.990
> 
> 标签：iphone, ios, ipad, file

我不得不使用 .gfx 文件，但我没有太多关于 gfx 文件的信息。我的问题是：

1.  .gfx 文件格式的文件包含什么？是任何类型的图像文件或视频文件。
2.  我在哪里可以获得 .gfx 示例文件进行测试？
3.  iOS SDK 中是否有任何支持 .gfx 的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:58:26.237

1)

据谷歌称，[GFX 被用作至少五种不同文件的扩展名](http://www.ehow.com/facts_5489786_file-extension-gfx.html)。我的第一个猜测是[您正在考虑一种 3D 模型/场景格式](http://www.cs.duke.edu/courses/fall01/cps124/code/gfx_reader/docs/gfx_format.html)，可能会在某些类型的游戏中使用。

2)

我提到的最后一个网页[列出了一个示例 .gfx 文件](http://www.cs.duke.edu/courses/fall01/cps124/code/gfx_reader/docs/gfx_format.html#sample)。

3)

这个答案取决于在 eHow 页面上列出的五种不同类型的文件中，哪种文件是您想要使用的文件。

# windows - “编辑”不是 cmd.exe 中的有效命令？

> ID：15289951
> 
> 赞同：5
> 
> 时间：2013-03-08T08:46:56.030
> 
> 标签：windows, cmd, editor

我正在尝试为 bcc32 编译器创建一个 .cfg 文件，并且我正在按照说明进行操作。我已正确安装并按照说明放置了环境路径，但是当我在命令提示符中键入“edit bcc32.cfg”时，它说编辑不是有效命令？我应该做些什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-16T13:46:51.690

您还可以创建一个 .bat 文件**edit.bat**来替换 16 位编辑程序（已删除，因为 x64 windows 版本无法运行它），它将启动您最喜欢的编辑器。

```
@echo off
notepad %1
@echo on 
```

这就是我最后做的一个简单的补丁，所以我可以继续我大部分时间里一直有的方式。只需输入：

```
edit myfile.ext 
```

在命令提示符下使用它。

注意：记事本不是我最喜欢的编辑器——这只是一个适用于库存窗口的示例。

注意 2：为清楚起见，显示了 @echo off 和 @echo on。您也可以通过省略 echo 语句并简单地将 @ 放在要静音的命令之前来缩短此时间。

```
@notepad %1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-06T22:05:32.417

我只是从命令窗口中使用记事本（因为他们取出了编辑命令），如下所示：

```
 C:\Borland\BCC55\bin> notepad bcc32.cfg 
```

该文件将在记事本中打开以进行编辑。完成文件编辑后，保存并完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-23T22:44:21.273

我发现这适用于在 64 位机器上查看完整文件的窗口内文本。在 cmd 提示符中设置路径后，键入单词 type... 后跟“文件名”，您是否看到我如何仅在文件名周围使用引号！

```
type "filename" 
```

您像这样键入它（更改文件名的文件名），您将能够在 cmd 窗口中看到整个文件文本。不知道如何从这里开始编辑，但也许有人可以从这里弄清楚并告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T08:54:34.193

假设您使用的是 Windows 7（其中`edit.exe`并`edlin.exe`已被删除）：使用`powershell.exe`而不是`cmd`- 因此`edit`将可通过命令行使用。

看看：[http ://en.wikipedia.org/wiki/Windows_PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T00:22:28.313

简单的答案....如果您使用旧版本的 Windows（xp 等），您将能够使用编辑，但由于您使用新版本的 Windows，Microsoft 已经更新并删除了他们认为不相关的命令，例如. （味精，编辑）取决于它是 bit32 bit64 还是 bit82 ...

# sql - 这个 sql where 子句中的“&”是什么意思？

> ID：15289955
> 
> 赞同：1
> 
> 时间：2013-03-08T08:47:08.293
> 
> 标签：sql, tsql

这里的“&”是什么意思：

```
select pt.TrTp, sum(pt.TrTp)
from ProdTr pt
where TransSt & 16 <> 16  // this is the row that i don´t understand..
group by pt.TrTp 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T08:54:59.437

它被称为位掩码。它用于数字中的各个位具有不同含义的情况，而不是仅表示数字本身的数字（例如，如果您将年龄保存到数据库中）。

当您想象任何二进制形式的数字并想要测试该数字中的某个位是否已设置时，您可以使用二进制 AND 运算符与您要测试的数字和位一起测试它，如下所示：

```
if (number & 16 == 16) 
```

在二进制中，这意味着以下内容（假设您的号码是 25）：

```
if (00011001 & 00010000 == 00010000) 
```

在这里你可以看到，第 5 位的数字（从下往上数）都是 1，因此得到的数字在该位有 1。由于没有其他 1，因此当两个数字在该位置都为 1 时，结果数字就是 16。

我想补充一点：将不同的含义编码到一个数据库字段中通常是一种不好的做法。很难通过索引进行索引和检索，并且取决于您的 DBMS，甚至可能完全没有索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:49:59.830

这是按位的`AND`。它只是检查 value 中的第 4 位是否未设置。

我会将这个表达式重写为`TransSt & 16 = 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:49:15.543

这是一个按位与。

> & 按位运算符在两个表达式之间执行按位逻辑与，取两个表达式的每个对应位。当且仅当输入表达式中的两个位（对于正在解析的当前位）的值都为 1 时，结果中的位设置为 1；否则，结果中的位设置为 0。

来自[http://msdn.microsoft.com/en-us/library/ms174965.aspx](http://msdn.microsoft.com/en-us/library/ms174965.aspx)

在这种情况下，它与标志一起使用，其中多个值存储在一个字段中，然后按位与运算用于检查特定状态 - 或者在这种*特殊*情况下 - 检查该字段是否不包含指定的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:50:19.880

它是按位与。请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms174965.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T08:50:20.690

这是一个按位与运算符。

> 按位运算在一个或多个位模式或二进制数字的各个位级别上进行操作。它是处理器直接支持的快速、原始的操作，用于操作值以进行比较和计算。在简单的低成本处理器上，按位运算通常比除法快得多，比乘法快几倍，有时比加法快得多。尽管现代处理器由于其较长的指令流水线和其他架构设计选择，通常执行加法和乘法运算的速度与按位运算一样快，但由于资源使用减少，按位运算通常使用较少的功率/性能。

来自[http://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

# node.js - layout.ejs 未呈现 - Node.js, Express

> ID：15289960
> 
> 赞同：2
> 
> 时间：2013-03-08T08:47:18.053
> 
> 标签：node.js, express, ejs

我正在尝试使用 EJS 模板执行 node.js 的简单示例。无论我做什么，Node，或者更确切地说是 express 都无法使用 layout.ejs 呈现索引页面，如下面的代码所示。

这是 app.js

```
var express = require('express')
  , routes = require('./routes')
  , http = require('http');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 8001);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.set('view options', {layout: 'views/layout.ejs'});
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

布局.ejs

```
<!DOCTYPE html>
<html>

 <head> <title><%= title %></title> </head>

 <body> <%- body %> </body>

</html> 
```

而在 index.ejs 中，就是这样

```
<p> Some Text </p> 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-09T03:38:32.643

```
app.set('view options', { layout:'layout.ejs' }); 
```

删除视图/它应该可以工作。

# css - 如何避免两个大 iframe 的换行？

> ID：15289963
> 
> 赞同：2
> 
> 时间：2013-03-08T08:47:28.463
> 
> 标签：css

两个iframe应该强制显示为cols，可以用css完成吗？

示例代码：

```
<!-- if I inc width to "800", the iframes should still be as cols, (regardless of window size) !-->
<div style="width:100%;overflow-x:scroll;">
<iframe width="200" height="200" src="http://www.slashdot.net"></iframe>
<iframe width="200" height="200" src="http://freshmeat.net"></iframe>
</div> 
```

请参阅：http: [//jsfiddle.net/7rCSu/](http://jsfiddle.net/7rCSu/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:55:01.797

添加`white-space:nowrap;font-size:0`到包含`<div>`将强制`<iframe>`s 彼此相邻呈现。

`font-size:0`删除 s 底部`<iframe>`和容器之间的空白空间，并停止`white-space:nowrap`浏览器添加中断以填充行框。

或者您可以删除`font-size:0`并将`<iframe>`元素放在标记中的同一行。不过，您仍然需要`white-space:nowrap`规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:54:18.890

尝试将 div 设置为不换行：

```
<div style="width:100%;overflow-x:scroll;white-space: nowrap;">
<iframe width="800" height="200" src="http://www.slashdot.net"></iframe>
<iframe width="800" height="200" src="http://freshmeat.net"></iframe>
</div> 
```

（在 Firefox 上测试：http: [//jsfiddle.net/7rCSu/2/](http://jsfiddle.net/7rCSu/2/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:54:15.090

虽然不完全[跨浏览器兼容](http://caniuse.com/flexbox)，但您可以使用[CSS 灵活框](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_flexible_boxes)将它们显示在单行中。

```
div {
    display: -webkit-flex;
    -webkit-flex-direction: row;

    display: flex;
    flex-direction: row;
} 
```

[JSF](http://jsfiddle.net/7rCSu/1/)中。

# jquery - SVG 动画在 IE9/IE10 中不起作用，但在 Firefox 和 chrome 中起作用

> ID：15289970
> 
> 赞同：1
> 
> 时间：2013-03-08T08:48:00.537
> 
> 标签：jquery, svg, jquery-svg

请参考以下代码。

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <clipPath id="curtainClip">
            <rect id="clipRect" x="0" y="0" width="100" height="100"/>
        </clipPath>
    </defs>

    <animate xlink:href="#clipRect"
        attributeName="width" 
        dur="15s"
        from="0" 
        to="100" />

    <path clip-path="url(#curtainClip)" stroke="red" d="M 0 0 L 100 100"/>
</svg> 
```

SVG 动画元素在 IE 浏览器中不起作用。我怎样才能解决这个问题 ？无论是 IE10 浏览器中的错误还是我需要添加任何进一步的代码才能在 IE 浏览器中工作。

我已经提到了以下链接。

[无法使用 ie9 和 firefox 制作 SVG 动画](https://stackoverflow.com/questions/15010056/cant-make-svg-animation-work-with-ie9-and-firefox)

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:52:17.530

您正在使用[Internet Explorer 不支持的](http://caniuse.com/svg-smil)SMIL（声明性）动画。据我所知，微软没有计划支持它。从[这个](http://msdn.microsoft.com/en-us/library/ie/gg193979%28v=vs.85%29.aspx#example1)页面，

> “基于脚本的动画打开了简单和复杂动画可能性的大门。因此，以及其他原因（例如 CSS 动画），IE9 不支持声明性动画。”

Microsoft 真的希望您使用基于脚本的动画。因此，如果您希望您的 SVG 在所有当前浏览器中都具有动画效果，则需要使用 Javascript 来实现。或者，正如 Microsoft 所暗示的，您可以使用[CSS 动画](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)。在我看来，CSS 动画将是您示例中简单动画的最佳选择。

# sencha-touch - Sencha Touch - this.getParent() 返回无法调用未定义的方法 'getParent'

> ID：15289983
> 
> 赞同：1
> 
> 时间：2013-03-08T08:48:41.970
> 
> 标签：sencha-touch, sencha-touch-2.1

我试图在 View 中获取父组件，但总是收到此错误：

`Cannot call method 'getParent' of undefined`

这是代码：

```
initialize: function() {
    this.callParent();
    this.loadMates();
},
loadMates: function() {

    var store = Ext.create('App.store.user.Mates');
    store.getProxy().setExtraParam('userId', this.getParent().getUserId());
    this.setStore(store);
} 
```

我不知道为什么初始化的 View 是`undefined`. 我试图将“this”作为参数推送，但没有成功。

提前非常感谢。

**编辑**：

我在这里找到了某事： [http ://www.sencha.com/forum/showthread.php?174406-this.parent-and-this.getParent()-always-return-undefined-in-initialize](http://www.sencha.com/forum/showthread.php?174406-this.parent-and-this.getParent%28%29-always-return-undefined-in-initialize)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:50:53.473

好吧，我已经把所有的逻辑都移到了 Controller 中。其中`refs`有指向父视图和实际视图的链接。现在我可以轻松访问父母的属性。在实际视图被推送后立即调用加载函数。

# linux - Bash 脚本在 /bin 中时忽略参数

> ID：15289985
> 
> 赞同：0
> 
> 时间：2013-03-08T08:48:48.420
> 
> 标签：linux, bash, arguments, bin

我有这个 bash 脚本，最多可以传递三个参数。当我从目录调用它时，它就像一个魅力，`./script -h`但是当我将同一个文件复制到 /bin 并从任何地方调用它时`script -h`，它似乎忽略了传递的参数。

为什么？或者更重要的是：我能做些什么来改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:52:02.423

`script`是一个非常有用的标准实用程序，它获取当前会话的副本（查找名为 的文件`typescript`）。它创建了另一个 shell 接口，所以您可能没有注意到它正在运行。

编写新程序时，请使用命名约定，例如`script.sh`.

编辑：

如果您不喜欢使用文件后缀（因为它看起来太像 Windows），那很好，但使用其他命名约定可以确保您的脚本名称不会与现有命令冲突。 `test`例如，另一个最爱。您可以使用`type`来检查命令，但仅检查您当前的环境，例如，当您从不同的用户名运行时，您可能仍然会遇到名称冲突。

# class - Puppet：在清单/模块更改后，“找不到类”*经常*一次

> ID：15289988
> 
> 赞同：4
> 
> 时间：2013-03-08T08:49:00.883
> 
> 标签：class, module, manifest, puppet

我不知道这是一个错误还是某种滥用/错误配置。希望有人可以提供帮助。谢谢！

如果我更改模块或清单目录中的文件，这通常会导致错误，主要是以下几种

*   在节点上找不到类

*   在节点上找不到定义类

当 puppet 模块/清单更改时会发生这些错误 - 但它只发生一次。如果发生这种情况，受影响的 puppet 代理将使用他们的缓存目录一次。**下次这些代理请求目录时，它会完美编译，一切都会像魅力一样工作**——所有错误都消失了。问题是我们有大型目录的代理。他们的目录运行可能需要超过一分钟，因此应用更改所需的时间将加倍，最多需要 2 甚至 3 分钟。

通常模块/清单的更改由“git pull”执行。但是通过简单的“触摸”操作很容易重现这些错误信息。这里有一些有趣的日志观察和它们的[共性]。是的 AFAICS 他们总是以三胞胎出现。很少发生修改后根本没有这样的问题。

> 触摸 /opt/xxx/dev/puppet/manifests/site.pp

```
[often] puppet-master[12498]: Could not find class <class> for <node> on <node>
[often] puppet-master[12498]: Could not find class <class> for <node> on <node>
[often] puppet-master[12498]: Could not find class <class> for <node> on <node> 
```

> 触摸 /opt/xxx/dev/puppet/puppet.conf

```
[often] puppet-master[12498]: Could not find class <class> for <node> on <node>
[often] puppet-master[12498]: Could not find class <class> for <node> on <node>
[often] puppet-master[12498]: Could not find class <class> for <node> on <node>

[sometimes] puppet-master[12498]: Cannot find definition Class on node <node>
[sometimes] puppet-master[12498]: Cannot find definition Class on node <node>
[sometimes] puppet-master[12498]: Cannot find definition Class on node <node>

[rare] puppet-master[12498]: Puppet::Parser::AST::Resource failed with error ArgumentError: Invalid resource type <own custom type> at <class file> on node <node>
[rare] puppet-master[12498]: Puppet::Parser::AST::Resource failed with error ArgumentError: Invalid resource type <own custom type> at <class file> on node <node>
[rare] puppet-master[12498]: Puppet::Parser::AST::Resource failed with error ArgumentError: Invalid resource type <own custom type> at <class file> on node <node> 
```

> 触摸/opt/xxx/dev/puppet/modules/dispatcher/manifests/init.pp

```
[often] puppet-master[12498]: Could not find class <class not even part of module dispatcher> for <node not even affected by module dispatcher> on <node not even...>
[often] puppet-master[12498]: Could not find class <class not even part of module dispatcher> for <node not even affected by module dispatcher> on <node not even...>
[often] puppet-master[12498]: Could not find class <class not even part of module dispatcher> for <node not even affected by module dispatcher> on <node not even...> 
```

受影响的类和节点似乎是随机选择的。

运行环境：

```
> ll /etc/puppet
lrwxrwxrwx 1 root root   34 Mar  7 10:01 auth.conf -> /opt/xxx/dev/puppet/auth.conf
lrwxrwxrwx 1 root root   38 Mar  7 10:01 autosign.conf -> /opt/xxx/dev/puppet/autosign.conf
lrwxrwxrwx 1 root root   40 Mar  7 10:01 fileserver.conf -> /opt/xxx/dev/puppet/fileserver.conf
lrwxrwxrwx 1 root root   36 Mar  7 10:01 puppet.conf -> /opt/xxx/dev/puppet/puppet.conf

> ls -A /opt/xxx/dev/puppet/
auth.conf  autosign.conf  fileserver.conf  .git  .gitignore  manifests  modules  .project  puppet.conf  scripts

> cat /etc/puppet/puppet.conf # on puppetmaster
[main]
 logdir = /var/log/puppet
 rundir = /var/run/puppet
 ssldir = $vardir/ssl
 modulepath = /opt/xxx/dev/puppet/modules
 manifestdir = /opt/xxx/dev/puppet/manifests
 manifest = /opt/xxx/dev/puppet/manifests/site.pp

[agent]
 classfile = $vardir/classes.txt
 localconfig = $vardir/localconfig
 server = <puppetmaster host>
 report = true
 splaylimit = 0
 runinterval = 30

[master]
 certname=<puppetmaster host>
 reports = http,log
 reportdir = /var/lib/puppet/reports/upload
 reporturl = http://<puppetmaster host>:3000/reports

> cat /opt/xxx/dev/puppet/manifests/site.pp 
  import 'nodes.pp'
  $puppetserver = <puppetmaster host>

> rpm -qa | egrep "puppet|ruby"
  rubygem-rake-0.8.7-2.1.el6.noarch
  ruby-mysql-2.8.2-1.el6.x86_64
  libselinux-ruby-2.0.94-5.3.el6.x86_64
  puppet-3.1.0-1.el6.noarch
  rubygem-fastthread-1.0.7-2.el6.x86_64
  rubygem-mongrel-1.1.5-3.el6.x86_64
  ruby-1.8.7.352-7.el6_2.x86_64
  ruby-irb-1.8.7.352-7.el6_2.x86_64
  ruby-augeas-0.4.1-1.el6.x86_64
  ruby-shadow-1.4.1-13.el6.x86_64
  puppetlabs-release-6-6.noarch
  rubygems-1.3.7-1.el6.noarch
  puppet-server-3.1.0-1.el6.noarch
  rubygem-gem_plugin-0.2.3-3.el6.noarch
  rubygem-daemons-1.0.10-2.el6.noarch
  puppet-dashboard-1.2.22-1.el6.noarch
  ruby-libs-1.8.7.352-7.el6_2.x86_64
  ruby-rdoc-1.8.7.352-7.el6_2.x86_64
  rubygem-json-1.4.6-1.el6.x86_64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:11:23.670

切换到 Apache/Passenger/Rack 解决方案（并转储 WEBrick）似乎可以解决这个问题。附加信息：[http ://projects.puppetlabs.com/issues/19642](http://projects.puppetlabs.com/issues/19642)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:23:46.130

当我重命名 Puppet 模块/类时发生了这种情况，这导致：

```
Error: Could not retrieve catalog from remote server: Error 400 on SERVER: Could not find class foo for example on node myhost.example.com
Warning: Not using cache on failed catalog
Error: Could not retrieve catalog; skipping run 
```

我在 Apache + [Foreman](http://theforeman.org)上为 Passenger 服务了 Puppet ，所以我找到的解决方案是重新启动 httpd 和 foreman-proxy：

```
sudo service httpd restart
sudo service foreman-proxy restart 
```

此外，如果您使用代码版本控制系统（应该是 :)），如 git 或 svn，请确保您确实将更新推送到 puppet master。换句话说，检查您的模块是否确实存在于 Puppet 正在寻找它的位置，例如`/etc/puppet/modules/foo`. 我已经为此绊倒了几次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T09:39:13.057

就我而言，这是 puppet master 的语言环境问题（我的一些清单包含本地化注释），因此 Puppet 3.8 默默地无法编译它们。

检查`locale`控制台中的命令输出（不应抱怨任何事情）。

`sudo dpkg-reconfigure locales`我通过运行并插入下一行来修复它`/etc/default/locale`：

```
LC_ALL="ru_RU.UTF-8"
LANG="ru_RU.UTF-8"
LANGUAGE="ru_RU:ru:en" 
```

此外，我使用 apache2 和乘客来运行 Puppet master，所以我还需要替换下一个字符串`/etc/init.d/apache2`：

```
ENV="env -i LANG=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin" 
```

到：

```
ENV="env -i LANG=ru_RU.UTF-8 LC_ALL=ru_RU.UTF-8 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin" 
```

事实证明，在 C 语言环境下启动的 Ruby 要求所有文件都采用 ASCII 编码。

# jquery - 如何制作具有响应式布局的横向滚动网站...？

> ID：15289990
> 
> 赞同：0
> 
> 时间：2013-03-08T08:49:10.207
> 
> 标签：jquery, scroll, responsive-design

我希望我的网站内容可以横向滚动。换句话说，当单击链接时，我希望该页面从侧面“滚动到”视口。

很像这个页面：[http ://s3.sitepoint.com/examples/sidescroll/demo4.html](http://s3.sitepoint.com/examples/sidescroll/demo4.html)

但是，我还希望每个“页面”（或 div）的内容能够响应并适合视口。在演示中，当页面缩小时，文本会被截断（除其他外）。

我正计划制作一个非常宽的 div 并使用 JQuery 动画滚动到各个点，但如果有更好的方法，请告诉我。另外，我打算将包装溢出设置为“隐藏”，以禁用滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:53:10.240

JQuery mobile 具有您需要的开箱即用的功能。它具有某种横向滚动功能并广泛使用 ajax。但是，如果您也以桌面为目标，它可能并不准确，但它可能对您有用。它对响应式设计有很大的支持。[http://jquerymobile.com/](http://jquerymobile.com/)

# matlab - Matlab中如何改变实例的属性

> ID：15289992
> 
> 赞同：2
> 
> 时间：2013-03-08T08:49:23.467
> 
> 标签：matlab, matlab-class

我是 MATLAB 新手，我想编写一个更改该对象属性的类的方法：

```
classdef Foo

  properties
    a = 6;
  end
  methods
    function obj = Foo()
    end

    function change(obj,bar)
      obj.a = bar
    end
  end
end

foo = Foo()

foo.change(7) //here I am trying to change the property to 7 
```

原来属性还是6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:00:33.270

*MATLAB 在值类*和*句柄类*之间有所区别。值类的实例在赋值上被隐式复制（因此表现得像普通的 MATLAB 矩阵），句柄类的实例不是（因此表现得像其他 OOP 语言中的实例）。

因此，您必须为值类返回修改后的对象：

```
classdef ValueClass
    properties
        a = 6;
    end
    methods
        function this = change(this, v)
            this.a = v;
        end
   end
end 
```

像这样称呼它：

```
value = ValueClass();
value = value.change(23);
value.a 
```

或者，您可以从类派生您的`handle`类：

```
classdef HandleClass < handle
    properties
        a = 6;
    end
    methods
        function change(this, v)
            this.a = v;
        end
   end
end 
```

并这样称呼它：

```
h = HandleClass();
h.change(23);
h.a 
```

[MATLAB 文档](http://www.mathworks.de/de/help/matlab/matlab_oop/comparing-handle-and-value-classes.html)中有更多信息。

# r - 如何在 R 中获得帮助？

> ID：15289995
> 
> 赞同：44
> 
> 时间：2013-03-08T08:49:40.540
> 
> 标签：r, r-faq

可用于 R 包的可能文档有哪些？例如，我尝试了解`sp`包。

除了`help(sp)`，还有哪些帮助和文档搜索的功能？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-08T09:11:07.953

### 获得有关您知道名称的功能的帮助

使用[`?`](http://www.inside-r.org/r-doc/utils/Question)或，等效地，[`help`](http://www.inside-r.org/r-doc/utils/help)。

```
?mean
help(mean) # same 
```

对于非标准名称，请使用[引号](http://www.inside-r.org/r-doc/base/Quotes)或反引号；请参阅[R 简介：获得有关功能和特性的帮助](https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Getting-help)：

> 对于特殊字符指定的特征，参数必须用双引号或单引号括起来，使其成为“字符串”：这对于一些具有句法含义的单词也是必要的，包括`if`，`for`和`function`。”

```
?`if`
?"if"       # same
help("if")  # same 
```

还有数据集、一般主题和一些包的帮助页面。

```
?iris
?Syntax
?lubridate 
```

使用该[`example`](http://www.inside-r.org/r-doc/utils/example)功能查看如何使用它的示例。

```
example(paste)
example(`for`) 
```

该[`demo`](http://www.inside-r.org/r-doc/utils/demo)函数给出了如何使用函数的更长时间的演示。

```
demo()                           # all demos in loaded pkgs
demo(package = .packages(all.available = TRUE)) # all demos
demo(plotmath)
demo(graphics) 
```

* * *

### 找到一个你不知道名字的函数

使用`??`或，等效地，[`help.search`](http://www.inside-r.org/r-doc/utils/help.search)。

```
??regression
help.search("regression") 
```

同样，需要引用非标准名称和短语。

```
??"logistic regression" 
```

[`apropos`](http://www.inside-r.org/r-doc/utils/apropos)在当前会话空间（但不在已安装但未加载的包中）中查找与正则表达式匹配的函数和变量。

```
apropos("z$") # all fns ending with "z" 
```

[`rseek.org`](http://rseek.org)是一个带有[Firefox 插件](http://mycroftproject.com/search-engines.html?name=rseek.org)的 R 搜索引擎。

[`RSiteSearch`](http://www.inside-r.org/r-doc/utils/RSiteSearch)直接从 R 搜索多个站点。

[`findFn`](http://www.inside-r.org/packages/cran/sos/docs/findFn)in`sos`包装`RSiteSearch`将结果作为 HTML 表返回。

```
RSiteSearch("logistic regression")

library(sos)
findFn("logistic regression") 
```

* * *

### 寻找包裹

[`available.packages`](http://www.inside-r.org/r-doc/utils/available.packages)告诉您通过设置的存储库中可用的所有包[`setRepositories`](http://www.inside-r.org/r-doc/utils/setRepositories)。 [`installed.packages`](http://www.inside-r.org/r-doc/utils/installed.packages)告诉您所有已安装在[`.libPaths`](http://www.inside-r.org/r-doc/base/.libPaths). [`library`](http://www.inside-r.org/r-doc/base/library)（不带任何参数）类似，返回已安装包的名称和标签行。

```
View(available.packages())
View(installed.packages())
library()
.libPaths() 
```

同样，[`data`](http://www.inside-r.org/r-doc/utils/data)不带参数告诉您机器上有哪些数据集可用。

```
data() 
```

[`search`](http://www.inside-r.org/r-doc/base/search)告诉你哪些包已经被加载。

```
search() 
```

[`packageDescription`](http://www.inside-r.org/r-doc/utils/packageDescription)显示包`DESCRIPTION`文件的内容。同样[`news`](http://www.inside-r.org/r-doc/utils/news)读取`NEWS`文件。

```
packageDescription("utils")    
news(package = "ggplot2") 
```

* * *

### 获得有关变量的帮助

[`ls`](http://www.inside-r.org/r-doc/base/ls)列出环境中的变量。

```
ls()                 # global environment
ls(all.names = TRUE) # including names beginning with '.'
ls("package:sp")     # everything for the sp package 
```

可以使用[`str`](http://www.inside-r.org/r-doc/utils/str)或检查大多数变量[`summary`](http://www.inside-r.org/r-doc/base/summary)。

```
str(sleep)
summary(sleep) 
```

[`ls.str`](http://www.inside-r.org/r-doc/utils/ls.str)就像 和 的`ls`组合`str`。

```
ls.str()
ls.str("package:grDevices")
lsf.str("package:grDevices")  # only functions 
```

对于大型变量（尤其是数据框），该[`head`](http://www.inside-r.org/r-doc/utils/head)函数可用于显示前几行。

```
head(sleep) 
```

[`args`](http://www.inside-r.org/r-doc/base/args)向您显示函数的参数。

```
args(read.csv) 
```

* * *

### 关于 R 的一般学习

[信息页面](https://stackoverflow.com/tags/r/info)是一组非常全面的免费 R 资源链接。

R 中的许多主题都通过[`vignette`](http://www.inside-r.org/r-doc/utils/vignette)s 记录，并以[`browseVignettes`](http://www.inside-r.org/r-doc/utils/browseVignettes).

```
browseVignettes()
vignette("intro_sp", package = "sp") 
```

通过与 结合`vignette`，[`edit`](http://www.inside-r.org/r-doc/utils/edit)您可以在编辑器中获取其代码块。

```
edit(vignette("intro_sp",package="sp")) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-08T12:06:32.917

[这个答案](https://stackoverflow.com/a/15290370/3924118)已经为您提供了一个非常全面的列表。

我要补充一点，如果您对要查找的内容只有一个想法/关键字并且还没有考虑到包或功能，那么 [`findFn("some search terms")`](https://www.rdocumentation.org/packages/sos/versions/2.0-0/topics/findFn)in package非常有帮助。`sos`

还有[关于 CRAN 的任务视图](https://cran.r-project.org/web/views/)：不是一个真正的搜索过程，而是一个你想知道的好地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-28T19:07:59.293

该线程包含许多很好的建议。让我再补充一个。

对于查找加载了哪些包以及额外的好东西，[?sessionInfo](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/sessionInfo.html)非常好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-29T09:10:18.553

通常多个包使用相同的函数名。要从特定包中获取有关功能的帮助，请使用：

```
help(aggregate, package="stats")
help(aggregate, package="sp") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-10T17:13:43.063

`help(package="<package-name>")`其中当然`<package-name>`是您需要帮助的包的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-25T10:56:14.053

在[RStudio IDE](https://www.rstudio.com)中，您可以单击任何函数名称并按`F1`，这将直接在其窗格中打开关联的函数帮助文本。就像你会打电话给`help()`or一样`?fun()`。

# javascript - 浏览器中音频播放的变速控制？

> ID：15289999
> 
> 赞同：3
> 
> 时间：2013-03-08T08:49:58.827
> 
> 标签：javascript, flash, audio, audio-streaming, html5-audio

有没有办法改变浏览器中音频的播放速度？什么是最好的完成这个任务，html5 音频，或者 flash，或者别的什么？是否有任何特定的库可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:52:46.790

使用网络音频 API。

在以下代码中，我回答了您的其他问题。

[在浏览器中循环播放音频的最佳方法？](https://stackoverflow.com/questions/15289643/best-way-to-loop-audio-in-the-browser)

将我上面答案中的代码修改为播放速度示例，如下所示。

正下方

```
source.loop = loopOnOff; 
```

添加

```
source.playbackRate.value = 1; // change number to between 0.10 to 10 (or larger/smaller) to test. 
```

您还可以通过网络音频api运行html音频标签并添加效果处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:03:10.983

有趣的问题，

HTMl5 将有播放器速度控制将有速度控制..

一些值得注意的即将推出的功能是playbackRate 和defaultPlaybackRate。正如您可能想象的那样，这些家伙让我们改变了播放的速度和方向。此功能可用于快进和快退功能，或者允许用户调整播放速度，以便他们可以在一天中容纳更多播客。

audio.playbackRate 以正常速度返回 1，并作为应用于播放速率的倍数。例如，将playbackRate 设置为2 将使速度加倍，而将其设置为-1 将向后播放媒体。audio.defaultPlaybackRate 是您暂停并重新启动媒体（或为此发出任何事件）后音频播放的速率。

* * *

Flash Player 可能会有所帮助（但它将是您可以创建的自定义播放器，使用流缓冲区，一旦缓冲区有要播放的内容，您需要定义播放器速度。

听起来很简单，但需要付出很多努力，请参阅 VLC opesource 以获得更好的想法，它与 ffmpeg 一起记录，可与音频一起使用，并与客户端软件一起使用，在浏览器中 ti 会很重，请参阅只是为了有想法。

我希望这可能会有所帮助:)