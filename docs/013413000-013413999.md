# StackOverflow 问答 13413000-13413999

# ruby-on-rails - 如何使用逗号 gem 创建一个包含两个模型的 CSV 文件？

> ID：13413005
> 
> 赞同：1
> 
> 时间：2012-11-16T08:35:57.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, fastercsv

我想在我的 ruby​​ 3.2.8 应用程序中创建一个包含两个带有逗号 gem 的模型的 CSV 文件。也许这个问题的答案是微不足道的，但这是我第一次使用这个宝石。我知道如何根据模型创建文件，但我不知道如何匹配两个。

我有一个意见\参与者\索引：

```
<%= link_to 'Download CSV', '/participants.csv' %> 
```

控制器：

```
def index
 @participants = Participant.all
 respond_to do |format|
   format.html # index.html.erb
   format.json { render json: @participants }
   format.csv  { send_data @participants.to_comma }
 end
end 
```

参与者型号：

```
require 'comma'
class Participant < ActiveRecord::Base
  comma do
    id
    token
  end
end 
```

和字段模型：

```
require 'comma'
class Field < ActiveRecord::Base
  comma do
   name
   value
   id_participant
  end
end 
```

在数据库中我有：

```
Participant1 = ["id" => 1 , "token" => "a"]
Participant2 = ["id" => 2 , "token" => "b"] 
Field1= ["id_participant" => 1, "name" => "p1_exams1", "value" =>5]
Field2= ["id_participant" => 1, "name" => "p1_exams2", "value" =>3]
Field3= ["id_participant" => 2, "name" => "p2_exams1", "value" =>2]
Field4= ["id_participant" => 2, "name" => "p2_exams2", "value" =>3] 
```

我想要一个这样的文件：

```
id   token
 1     a

id_p  name            value
 1   p1_c1_exams1      5
 1   p1_c1_exams2      3

id   token
 2     b

id_p  name            value
 2   p1_c1_exams1      2
 2   p1_c1_exams2      3 
```

我在控制器中尝试了这个：

```
def index
@participants = Participant.all
@fields = Field.all
require 'csv'
csv_string = CSV.generate do |csv|
    @participants.each do |p|
        csv << ["id","token","last_ip_address","start_date","last_transition_date","completion_date","completed","total_time_survey","created_at"]
        csv << [ p.id, p.token , p.last_ip_address, p.start_date, p.last_transition_date, p.completion_date, p.completed, p.total_time_survey, p.created_at]
        @fields.each do |f|
            if String(f.id_participant) == String(p.id)
                csv << ["id","name","value","id_participant","id_survey","created_at"]
                csv << [f.id,f.name, f.insert_value, f.id_participant, f.id_survey, f.created_at]
            end
        end
    end
end

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @participants }
  format.csv  { send_data csv_string,
    :type => "text/csv; charset=iso-8859-1; header=present",
    :disposition => "attachment; filename=Database.csv" }
end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:53:12.467

您也可以为此使用 fastercsv 我认为这将帮助您了解您在参与者和字段之间有很多关系我已经编写了一些代码您可以根据需要对其进行自定义

```
@participants = Participant.all
  csv_string = FasterCSV.generate do |csv|
     @participants.each do |i|
     csv << ["id","token"]
     csv << [ i.id, i.token ]
     i.fields.each do |j|
      csv << ["id_p","name", "value"]
      csv << [i.id,j.name, j.value]
     end
     end
     end
 send_data csv_string,
          :type => "text/csv; charset=iso-8859-1; header=present",
          :disposition => "attachment; filename=anyName.csv" 
```

# razor - 复选框选中的值未按预期设置

> ID：13413008
> 
> 赞同：4
> 
> 时间：2012-11-16T08:36:15.507
> 
> 标签：razor, asp.net-mvc-4, html-helper, html.checkbox

> **可能重复：**
> [ASP.NET MVC：为什么 CheckBoxFor 会呈现额外的输入标记以及如何使用 FormCollection 获取值](https://stackoverflow.com/questions/2860940/asp-net-mvcwhy-does-the-checkboxfor-render-an-additional-input-tag-and-how-can)

我需要创建一个复选框并将模型绑定到该复选框。假设我只是分配 false 作为值而不是模型值。代码如下。

```
 @Html.CheckBox("abcd",false) 
```

输出：

```
<input id="abcd" name="abcd" type="checkbox" value="true" />
<input name="abcd" type="hidden" value="false" /> 
```

生成的 HTML 的输出如上所示。我确实理解为什么剃刀视图引擎会放置隐藏的复选框。我的问题是，如果该值为 false，那么可见的复选框应该是`value="false"`（未选中）。

为什么它已经放`value="true"`（检查）。同样适用于checkboxfor helper。出了什么问题，或者您能解释一下如何实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:46:19.807

您应该考虑通过模型传递值：

```
@Html.CheckBoxFor(model => model.abcd) 
```

如果您需要将其设置为“false”，则可以通过在返回视图之前将控制器中的 abcd 属性设置为 false 来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:51:23.830

复选框没有不同的选中/未选中值，它们只有一个选中值。如果你明白为什么 razor 会输出隐藏字段，那么你就会明白这一点。

想象一下它*确实*有`value='false'`。当您选中复选框时会发生什么？你会期望值改变吗？（提示：你不应该）。你会有一个选中的复选框`value='false'`。那有什么意思？然后，在发布时，您将发布`false`为您的价值，那将是无稽之谈。

所以。复选框值属性不会改变。如果你需要编写使用该值的代码，不要寻找它的值，寻找它是否被检查。

# django - 使用 Markdown 时如何突出显示网页上的代码

> ID：13413011
> 
> 赞同：0
> 
> 时间：2012-11-16T08:36:30.560
> 
> 标签：django, tinymce, markdown, highlight

我想使用[highlight.js](http://softwaremaniacs.org/soft/highlight/en/)我也有 grappelli 和 tinymce。我想添加 highlight.js 但我有降价编辑器。

在使用 markdown 编辑器时如何添加 highlight.js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:43:20.857

HTML 是有效的降价，您应该像使用 HTML 一样简单地插入链接标签。

# node.js - 如何使用 express 访问 ejs 中的调试器？

> ID：13413020
> 
> 赞同：2
> 
> 时间：2012-11-16T08:37:10.923
> 
> 标签：node.js, express, ejs

我似乎在某些 ejs 代码中存在一个错误，该错误由 express 提供。我一般使用优秀的 node-inspector 包在 express 和 node.js 中调试。但它似乎在 ejs 中不可用。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:23:31.647

在您的路线中：

```
res.locals.inspect = inspect; 
```

那么在你看来：

```
<%= inspect(data) %> 
```

# iphone - 如何从从 web 服务作为字节数组传回的图像在 iphone 上创建图像视图

> ID：13413021
> 
> 赞同：1
> 
> 时间：2012-11-16T08:37:12.890
> 
> 标签：iphone, image, web-services, uiimage, uikit

我正在尝试`UIImage`从 a创建一个`byte array`，我从`web service`. 字节数组嵌入在 XML 和方法中

```
 -(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
   } 
```

我将它附加到`currentElementValue`. 然后我将转换为然后`currentElementValue`转换`NSData`为`image`。

```
 content = currentElementValue;
 NSData * imageData = [content dataUsingEncoding: NSUTF8StringEncoding];
 UIImage *image = [[UIImage alloc] initWithData:imageData]; 
```

现在我不知道我应该如何将它附加到 a`UIImageView`以及如何显示它。另外，如果有人知道，我会很感激找出如何将其保存`image`在文件中并从该文件中显示出来。

如果这是一个愚蠢的问题，我很抱歉，但我在书籍和谷歌上搜索，我没有找到适合我的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:39:07.037

设置 UIImageView 的`image`属性：

```
self.imageView.image = image; 
```

这假定您已经`UIImageView`以编程方式或使用 NIB 创建了一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:42:46.210

创建一个新的 UIImageView，并将其添加到视图中：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
[imageView setFrame:CGRectMake(x,y,w,h)];
[view addSubview:imageView]; 
```

或在现有 UIImageView 上使用“setImage”

```
[imageView setImage:image]; 
```

# actionscript-3 - Actionscript 3 将当前帧位置保存到本地硬盘驱动器？

> ID：13413027
> 
> 赞同：0
> 
> 时间：2012-11-16T08:37:33.793
> 
> 标签：actionscript-3, actionscript, local-shared-object

前段时间我问过类似的问题，但我正在制作一个新的问题，以通过一些例子来更具体地解决我的问题！

我从谷歌搜索中找到了这个代码片段/教程，但我似乎无法弄清楚如何根据我的需要修改它：

```
// open a local shared object called "myStuff", if there is no such object - create a new one
var savedstuff:SharedObject = SharedObject.getLocal("myStuff");
// manage buttons
btnSave.addEventListener(MouseEvent.CLICK, SaveData);
btnLoad.addEventListener(MouseEvent.CLICK, LoadData);

function SaveData(MouseEvent){
 savedstuff.data.username = nameField.text // changes var username in sharedobject
 savedstuff.flush(); // saves data on hard drive
 }
function LoadData(MouseEvent){
 if(savedstuff.size>0){ // checks if there is something saved
 nameField.text = savedstuff.data.username} // change field text to username variable
 }

// if something was saved before, show it on start
if(savedstuff.size>0){
nameField.text = savedstuff.data.username} 
```

所以我想弄清楚如何做是将用户当前帧保存到本地硬盘驱动器，因为我的闪存进度是基于帧位置的。是的，那么我该如何修改它以存储当前帧的数据？以及电影剪辑中的当前帧如何，如果这会让事情有所不同？

帮助MUUUCH赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:53:15.463

在您的示例中，它看起来已经将某些内容保存到共享对象中：

```
savedstuff.data.username = nameField.text; 
```

只需将其替换为影片剪辑帧值（并且可能在“用户名”之外的不同属性名称下）。

然后在加载时，还有另一行加载数据：

```
nameField.text = savedstuff.data.username; 
```

这将是相同的方式，除了用您选择的任何属性名称替换“用户名”。然后你可能不得不再次解析成一个 int 并使用它来恢复进度，无论你设置它的方式。

# android - 将 SimpleCursorAdapter 与 Spinner 一起使用？

> ID：13413030
> 
> 赞同：4
> 
> 时间：2012-11-16T08:37:45.697
> 
> 标签：android, android-cursor, simplecursoradapter

我有一个带有 2 列“id”、“sampletext”的表“mytable”的数据库我想查询 sampletext 的不同值并使用 SimpleCursorAdapter 提供给 Spinner。

这是尝试过的

```
String[] cols=new String[]{"sampletext"};
int[] lbls=new lbls[]{android.R.id.text1};
mycursor=sdb.query(true,"mytable", cols,null,null,null,null,null,null);
sca=new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, mycursor, cols,lbls,0);
sca.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spn.setAdapter(sca); 
```

当我运行它时，我在第 4 行得到错误：id 不存在。当我将第一行更改为“id”时，微调器填充了 id 值。但我需要“sampletext”，我做错了什么？感谢任何建议

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T09:02:15.560

```
what am i doing wrong 
```

您没有阅读文档...

有两个带列的字符串数组：第一个用于查询，第二个用于适配器构造函数（您只使用了一个数组）

第一个告诉sqlite哪些列应该被带到Cursor，第二个告诉Adapter哪些应该被显示/映射到单行中的视图......

下一个`CursorAdapter`需要`Cursor`名为列的`_id`

所以现在很明显我们应该这样做：

```
String[] queryCols=new String[]{"_id", "sampletext"};
String[] adapterCols=new String[]{"sampletext"};
int[] adapterRowViews=new int[]{android.R.id.text1};
mycursor=sdb.query(true,"mytable", queryCols,null,null,null,null,null,null);
sca=new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, mycursor, adapterCols, adapterRowViews,0);
sca.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spn.setAdapter(sca); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T19:41:13.633

这是一个原始查询的示例。请注意，查询返回的第一个 ID 列应标记为`_id`。

我的数据库.java：

```
public class MyDatabase extends SQLiteAssetHelper {
     ...
    public Cursor getListNamesForDropDown() {
        SQLiteDatabase db = getReadableDatabase();
        String sql = "select ID _id, Name from MyTable order by Name ";
        Cursor c = db.rawQuery(sql, null);
        c.moveToFirst();
        return c;
    } 
```

我的活动.java：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
....    
           Cursor cursorTest =  db.getListNamesForDropDown();
           android.widget.SimpleCursorAdapter  adapter = new android.widget.SimpleCursorAdapter(this, 
                   android.R.layout.simple_spinner_item,
                    cursorTest, 
                    new String[] {"Name"}, 
                    new int[] {android.R.id.text1}, 0);       
           adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
           spinnerTest.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T08:28:35.147

```
android.widget.SimpleCursorAdapter adapter = new android.widget.SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item,
            cursor,
            new String[] { DBOpenHelper.ACCOUNT_BANK },
            new int[] { android.R.id.text1 }, 0);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# php - Google Drive API - PHP 客户端库 - 将 uploadType 设置为可恢复上传

> ID：13413036
> 
> 赞同：10
> 
> 时间：2012-11-16T08:38:14.440
> 
> 标签：php, google-drive-api, google-api-php-client

我在使用新的 google drive API 客户端库的文档时遇到了严重问题。看起来这应该很容易回答，而不必将其放在 stackoverflow 上。我正在认真考虑在这个上推出我自己的，一个“正常工作”的 64 页库到目前为止是一个“令人头疼的问题”

您如何将uploadType 设置为“可恢复”而不是默认的“简单”。我已经在图书馆中搜索了一种方法来做到这一点，但它似乎不存在。他们唯一的提示是他们的示例上传页面上的代码[https://developers.google.com/drive/quickstart-php](https://developers.google.com/drive/quickstart-php)

```
//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$data = file_get_contents('document.txt');

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => 'text/plain',
    )); 
```

这里没有设置uploadType ...？？？

他们在另一个页面上的[文档](https://developers.google.com/drive/manage-uploads)只是将 uploadType 作为地址的一部分显示为 GET：[https](https://www.googleapis.com/upload/drive/v2/files)`?uploadType=resumable` ://www.googleapis.com/upload/drive/v2/files但是当您使用时`$service->files->insert`，库会设置地址。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T19:20:00.533

以下示例适用于最新版本的 Google API PHP 客户端 ( [https://code.google.com/p/google-api-php-client/source/checkout](https://code.google.com/p/google-api-php-client/source/checkout) )

```
if ($client->getAccessToken()) {
  $filePath = "path/to/foo.txt";
  $chunkSizeBytes = 1 * 1024 * 1024;

  $file = new Google_DriveFile();
  $file->setTitle('My document');
  $file->setDescription('A test document');
  $file->setMimeType('text/plain');

  $media = new Google_MediaFileUpload('text/plain', null, true, $chunkSizeBytes);
  $media->setFileSize(filesize($filePath));

  $result = $service->files->insert($file, array('mediaUpload' => $media));

  $status = false;
  $handle = fopen($filePath, "rb");
  while (!$status && !feof($handle)) {
    $chunk = fread($handle, $chunkSizeBytes);
    $uploadStatus = $media->nextChunk($result, $chunk);
  }

  fclose($handle);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-08T17:38:13.050

这可能是一个较新的参考，但这里是谷歌对这个问题的官方看法：[https ://developers.google.com/api-client-library/php/guide/media_upload](https://developers.google.com/api-client-library/php/guide/media_upload)

*来自文章：*

> # 可恢复文件上传
> 
> 也可以将上传拆分为多个请求。这对于较大的文件很方便，并且可以在出现问题时恢复上传。可恢复上传可以与单独的元数据一起发送。
> 
> ```
> $file = new Google_Service_Drive_DriveFile();
> $file->title = "Big File";
> $chunkSizeBytes = 1 * 1024 * 1024;
> 
> // Call the API with the media upload, defer so it doesn't immediately return.
> $client->setDefer(true);
> $request = $service->files->insert($file);
> 
> // Create a media file upload to represent our upload process.
> $media = new Google_Http_MediaFileUpload(
>   $client,
>   $request,
>   'text/plain',
>   null,
>   true,
>   $chunkSizeBytes
> );
> $media->setFileSize(filesize("path/to/file"));
> 
> // Upload the various chunks. $status will be false until the process is
> // complete.
> $status = false;
> $handle = fopen("path/to/file", "rb");
> while (!$status && !feof($handle)) {
>   $chunk = fread($handle, $chunkSizeBytes);
>   $status = $media->nextChunk($chunk);
>  }
> 
> // The final value of $status will be the data from the API for the object
> // that has been uploaded.
> $result = false;
> if($status != false) {
>   $result = $status;
> }
> 
> fclose($handle);
> // Reset to the client to execute requests immediately in the future.
> $client->setDefer(false); 
> ```

# c# - 调试时从数据行获取所有列名/列值

> ID：13413038
> 
> 赞同：2
> 
> 时间：2012-11-16T08:38:23.547
> 
> 标签：c#, visual-studio-2010, debugging

我正在为我的一个数据行创建一个模拟实例以进行测试。

我试图从我们的数据库中复制的行包含具有不同变量的 37 列。

调试时是否有机会以纯文本形式获取信息以简单编辑我的模拟对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-18T08:49:38.090

我不得不调整 Nikhil 的演员阵容：

```
var colNames = dr.Table.Columns.Cast<DataColumn>().Select(x => x.ColumnName).ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T08:41:02.380

怎么样

```
var colNames = dr.Table.Columns.Cast(Of DataColumn)
                               .Select(x => x.ColumnName).ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:14:54.690

像这样解决它，因为我无法让 Nikhils 代码工作。

```
 int i = 0;
        while(i<looprow.Table.Columns.Count)
        {
            Debug.WriteLine(looprow.Table.Columns[i].ColumnName);
            i++;
        } 
```

# sql - SQL 不明确的列

> ID：13413041
> 
> 赞同：0
> 
> 时间：2012-11-16T08:38:45.430
> 
> 标签：sql

我在这里使用两张桌子。

![在此处输入图像描述](../Images/eba114fb1605101766499a958e688837.png)

采用这些表格并显示课程编号、课程名称、先决条件和先决条件名称的想法。

但是，如您所见，我必须处理歧义。

到目前为止，我运行了这个查询

```
SELECT c.course_name, p.course_number, course_name AS "prereq_course",prereq
FROM rearp.course  c, rearp.prereq  p
WHERE c.course_number = p.course_number; 
```

并得到了这个...

![在此处输入图像描述](../Images/ef8f321bad408e8a26e22f156cc1b09f.png)

看起来一切都很好，只是您可能会注意到先决条件的课程名称只是课程的副本。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:42:52.247

我*猜*你想查找先修课程并获得它的名字。

您需要再次加入课程表：

```
SELECT c.course_name, p.course_number, c2.course_name AS "prereq_course",p.prereq
FROM
   rearp.course  c
      inner join
   rearp.prereq  p
      ON c.course_number = p.course_number
      inner join
   rearp.course c2
      on
         p.prereq = c2.course_number 
```

（我也切换到 ansi join 语法，而不是`,`风格）

# android - 如何在从数据库中取出数据之前过滤数据？

> ID：13413047
> 
> 赞同：-4
> 
> 时间：2012-11-16T08:39:14.180
> 
> 标签：android

我用`cursor`get data from database，但是里面有一些不必要的数据。我想知道如何准确显示我想显示的数据，而不是我从数据库中获取的所有数据，我在查询数据库时无法判断这个，拿到数据后才能处理，希望app能在拿到数据后自动过滤数据。

**新编辑**

我考虑过将所有数据放在一个列表中，将列表用作数据源。（我在应用程序中使用listView），但是已经有一个`cursoradapter`和一些方法，如`bindView`。如果我添加一个新的适配器，代码会太复杂和杂项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:24:41.013

你可以试试类似...

```
private static final Uri SMS_URI = Uri.parse("content://sms");
private static final String[] COLUMNS = new String[] {"date", "address", "body", "type"};
private static final String WHERE = "type = 2";
private static final String ORDER = "date DESC";

// ...
ContentResolver cr = getContentResolver();
Cursor cursor = cr.query(SMS_URI, COLUMNS, WHERE + " AND date > " +
            timeLastChecked, null, ORDER); 
```

这使您可以在您描述的地方查询`content://sms`并仅返回`COLUMNS`符合您`WHERE`条件的您想要的`ORDER`内容。`null`用于替换`?`您在查询中使用的 （如 Java 的）`PreparedStatement`。

更多信息：http: [//developer.android.com/reference/android/content/ContentResolver.html](http://developer.android.com/reference/android/content/ContentResolver.html)

# php - php preg_replace 以 * 开头的文本。并以 \r 或 \n 结尾

> ID：13413048
> 
> 赞同：1
> 
> 时间：2012-11-16T08:39:17.173
> 
> 标签：php, regex

我在 php 中有 2 个文本字符串，我想将它们更改为 html 标签

第一的 ：

```
*.some text
* some text 
```

第二：

```
#.sometext
# sometext 
```

我想更改以`'*.' or '* '`to开头并以or`<li>`结尾的第一个字符串`'\r'``'\n'``</li>`

我想更改以`'#.' or '# '`to开头并以or`<ol>`结尾的第二个字符串`'\r'``'\n'``</ol>`

我写了这个正则表达式代码但不起作用：

```
$regex1 = "#([*.])(.*)([\n])#e";
$text = preg_replace($regex1,"('<li>$2</li>')",$text);

$regex2 = "#([#.])(.*)([\n])#e";
$text = preg_replace($regex2,"('<ol>$2</ol>')",$text); 
```

我该怎么办？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:06:12.877

我建议对您的代码进行相当多的更改，我将在下面解释。

首先是代码：

```
<?php
$text = "
first :

*.some text
* some text

and second :

#.sometext
# sometext
";

$regex1 = "#\*(.| )(.*?)\n#";
$text = preg_replace($regex1,"<li>$2</li>\n",$text);

$regex2 = "#\#(.| )(.*?)\n#";
$text = preg_replace($regex2,"<ol>$2</ol>\n",$text);

echo $text; 
```

和输出

```
first :

<li>some text</li>
<li>some text</li>

and second :

<ol>sometext</ol>
<ol>sometext</ol> 
```

变化：

*   您不需要`e`在正则表达式中使用修饰符
*   为了匹配`*.`and `*`，只需指定`*`(escaped to ，以及(escaped to ) and`\*`的 OR 条件。`.``\.`
`*   使用 的非贪婪版本`.*`，即`.*?`你只吃尽可能少的文本。`

 `PS：这可能不是你想要的（ol 有这个结构：`<ol><li>...</li><li>...</li></ol>`，但我把代码写到你问题的规范中。你应该可以修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:28:40.670

```
$str=<<<STR
abc
*.some text
* some text
def
STR;

echo preg_replace('/[\r\n]+<\/li>/i',"</li>",preg_replace('/\*[\.\s](.*)$/im',"<li>$1</li>",$str)); 
```

以上将输出：

```
abc
<li>some text</li>
<li>some text</li>
def 
```

可以进行类似的更改来完成您的第二个要求。

我使用两个正则表达式的原因是，如果你的字符串看起来像

```
$str=<<<STR
abc
*.some text
* some text
STR; 
```

不会有 last-newline，所以最后一行可能不匹配。所以我使用`m`修饰符，并`$`匹配每个行尾。

但是测试结果显示 using only`$`会变成这样：

```
abc
<li>some text
</li>
<li>some text</li> 
```

所以为了避免这种情况，我添加了另一个正则表达式来修复`[newline]</li>`.`

# iphone - 解除分配 CCTMXTiledMap 时出错

> ID：13413050
> 
> 赞同：0
> 
> 时间：2012-11-16T08:39:26.520
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我知道 CCTMXTiledMap 是一个自动释放对象。我也知道 CCTMXTiledMap 不应该重新初始化。但是，我怎样才能改变场景？

更改场景时，我在 TMXTiledMap 对象上遇到了解除分配错误。这里是场景1的属性和dealloc方法。

```
@interface MapObj : NSObject {
CCTMXTiledMap *theMap;
CCTMXLayer *bgLayer;
CCTMXLayer *terrainLayer;
NSMutableArray *virtualMap;
NSUInteger h, w;
}

 @property (nonatomic, retain) CCTMXTiledMap *theMap;
 @property (nonatomic, retain) CCTMXLayer *bgLayer;
 @property (nonatomic, retain) CCTMXLayer *terrainLayer;
 @property (nonatomic, assign) NSMutableArray *virtualMap;

-(void) dealloc {

[bgLayer release];    //self.bgLayer = [theMap layerNamed:@"bg"];
self.bgLayer = nil;
[terrainLayer release];  //self.terrainLayer = [theMap layerNamed:@"pl"];
self.terrainLayer = nil;

[theMap release];  //self.theMap = [CCTMXTiledMap tiledMapWithTMXFile:@"newmaptest.tmx"];
self.theMap = nil;

[virtualMap release];   //just an array, not related to TMX
self.virtualMap = nil;
[super dealloc]; } 
```

我在场景更改时出错（场景 1 的释放不成功）

```
- (void) dealloc
{
CCLOGINFO( @"cocos2d: deallocing %@", self);

// attributes
[camera_ release];

[grid_ release];

// children
CCNode *child;
CCARRAY_FOREACH(children_, child)
    child.parent = nil; <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<EXC_BAD_ACCESS

[children_ release];

[super dealloc];} 
```

这是日志

```
2012-11-16 16:37:10.402 VerBeta[4876:307] cocos2d: deallocing <CCScene = 0024F5D0 | Tag = -1>
2012-11-16 16:37:10.405 VerBeta[4876:307] cocos2d: deallocing <CCArray = 00233F80> = ( <Playground = 0022C880 | Tag = -1>, )
2012-11-16 16:37:10.408 VerBeta[4876:307] cocos2d: deallocing <CCTexture2D = 002373B0 | Name = 2 | Dimensions = 128x32 | Coordinates = (0.60, 0.88)>
2012-11-16 16:37:10.412 VerBeta[4876:307] cocos2d: deallocing <CCLabelTTF = 0023A220 | FontSize = 20.0>
2012-11-16 16:37:10.416 VerBeta[4876:307] cocos2d: deallocing <CCTexture2D = 00230B90 | Name = 11 | Dimensions = 128x32 | Coordinates = (0.76, 0.88)>
2012-11-16 16:37:10.419 VerBeta[4876:307] cocos2d: deallocing <CCLabelTTF = 00245040 | FontSize = 20.0>
2012-11-16 16:37:10.422 VerBeta[4876:307] cocos2d: deallocing <CCTMXTilesetInfo: 0x249e70>
2012-11-16 16:37:10.425 VerBeta[4876:307] cocos2d: deallocing <CCSprite = 0024B0B0 | Rect = (0.00,0.00,32.00,32.00) | tag = -1 | atlasIndex = 149>
2012-11-16 16:37:10.428 VerBeta[4876:307] cocos2d: deallocing <CCTextureAtlas = 00249C00 | totalQuads =  150>
2012-11-16 16:37:10.433 VerBeta[4876:307] cocos2d: deallocing <CCArray = 00249FB0> = ( )
2012-11-16 16:37:10.436 VerBeta[4876:307] cocos2d: deallocing <CCTMXLayer = 0024ADC0 | Tag = 0>
2012-11-16 16:37:10.439 VerBeta[4876:307] cocos2d: deallocing <CCArray = 00249BA0> = ( )
2012-11-16 16:37:10.442 VerBeta[4876:307] cocos2d: deallocing <CCTMXTilesetInfo: 0x24a150>
2012-11-16 16:37:10.445 VerBeta[4876:307] cocos2d: deallocing <CCSprite = 0024BC00 | Rect = (32.00,0.00,32.00,32.00) | tag = -1 | atlasIndex = 149>
2012-11-16 16:37:10.448 VerBeta[4876:307] cocos2d: deallocing <CCTextureAtlas = 0024B560 | totalQuads =  150>
2012-11-16 16:37:10.452 VerBeta[4876:307] cocos2d: deallocing <CCArray = 002494C0> = ( )
2012-11-16 16:37:10.455 VerBeta[4876:307] cocos2d: deallocing <CCTMXLayer = 0024B400 | Tag = 1>
2012-11-16 16:37:10.457 VerBeta[4876:307] cocos2d: deallocing <CCArray = 00248DD0> = ( )
2012-11-16 16:37:10.461 VerBeta[4876:307] cocos2d: deallocing <CCTMXTiledMap = 002474A0 | Tag = -1> 
```

我试过不发布*theMap*。比如注释掉这两行

```
//[theMap release];
//self.theMap = nil; 
```

但是错误仍然发生，日志在这里

```
2012-11-16 16:34:21.000 VerBeta[4850:307] cocos2d: deallocing <CCScene = 00242580 | Tag = -1>
2012-11-16 16:34:21.003 VerBeta[4850:307] cocos2d: deallocing <CCArray = 00226F30> = ( <Playground = 0021F830 | Tag = -1>, )
2012-11-16 16:34:21.007 VerBeta[4850:307] cocos2d: deallocing <CCTexture2D = 00225190 | Name = 2 | Dimensions = 128x32 | Coordinates = (0.60, 0.88)>
2012-11-16 16:34:21.010 VerBeta[4850:307] cocos2d: deallocing <CCLabelTTF = 0022D1D0 | FontSize = 20.0>
2012-11-16 16:34:21.014 VerBeta[4850:307] cocos2d: deallocing <CCTexture2D = 0022D0A0 | Name = 3 | Dimensions = 128x32 | Coordinates = (0.76, 0.88)>
2012-11-16 16:34:21.017 VerBeta[4850:307] cocos2d: deallocing <CCLabelTTF = 00237FF0 | FontSize = 20.0>
2012-11-16 16:34:21.021 VerBeta[4850:307] cocos2d: deallocing <CCTMXTilesetInfo: 0x23ce20>
2012-11-16 16:34:21.024 VerBeta[4850:307] cocos2d: deallocing <CCSprite = 0023E060 | Rect = (0.00,0.00,32.00,32.00) | tag = -1 | atlasIndex = 149>
2012-11-16 16:34:21.027 VerBeta[4850:307] cocos2d: deallocing <CCTextureAtlas = 0023CBB0 | totalQuads =  150>
2012-11-16 16:34:21.030 VerBeta[4850:307] cocos2d: deallocing <CCArray = 0023CF60> = ( )
2012-11-16 16:34:21.034 VerBeta[4850:307] cocos2d: deallocing <CCTMXLayer = 0023DD70 | Tag = 0>
2012-11-16 16:34:21.038 VerBeta[4850:307] cocos2d: deallocing <CCArray = 0023CB50> = ( )
2012-11-16 16:34:21.041 VerBeta[4850:307] cocos2d: deallocing <CCTMXTilesetInfo: 0x23d100>
2012-11-16 16:34:21.044 VerBeta[4850:307] cocos2d: deallocing <CCSprite = 0023EBB0 | Rect = (32.00,0.00,32.00,32.00) | tag = -1 | atlasIndex = 149>
2012-11-16 16:34:21.047 VerBeta[4850:307] cocos2d: deallocing <CCTextureAtlas = 0023E510 | totalQuads =  150>
2012-11-16 16:34:21.050 VerBeta[4850:307] cocos2d: deallocing <CCArray = 0023C470> = ( )
2012-11-16 16:34:21.053 VerBeta[4850:307] cocos2d: deallocing <CCTMXLayer = 0023E3B0 | Tag = 1>
2012-11-16 16:34:21.056 VerBeta[4850:307] cocos2d: deallocing <CCArray = 0023BD80> = ( )
VerBeta(4850,0x3e29f898) malloc: *** error for object 0x23b660: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:21:59.413

如果您没有将 ivar 分配给属性，则不应调用`[propertyName release]`，而应使用`[_propertyName release];`

# javascript - 函数中的 if 语句中的 Javascript 全局变量——到处都是？

> ID：13413052
> 
> 赞同：1
> 
> 时间：2012-11-16T08:39:38.267
> 
> 标签：javascript, if-statement, onclick, global-variables, scope

原始问题：我一直对应该是一个非常简单的 JavaScript 问题感到头疼，我一直在寻找解决方案，但每个人都在做和我一样的事情，除了他们的脚本似乎正在工作。我意识到函数中 if 语句的范围与函数的范围不同，但我似乎无法弄清楚，也找不到解决方案：/

```
<head>
<script type="text/javascript">
var globalch = 1;
function chk()
{
if(chicken){
globalch = 3;
}else{
globalch = 3;
}
}
</script>
</head>
<body>
<a href="#" onclick="alert(globalch)">What is the variable?</a><br />
<a href="#" onclick="chk">Change the variable to 3</a>
</body> 
```

这意味着完全按照它所说的那样做，但事实并非如此。if 语句对任何一个条件都做同样的事情，所以这没有问题。我也尝试过使用 window.globalch、window['globalch'] 和其他一些建议，但无济于事。我错过了什么？我确信这是显而易见的事情，它将成为其中之一“哦，是的！” 时刻.. 谢谢大家！

* * *

**编辑：**

我现在已经编辑了这个问题，因为我意识到这不是范围问题。这现在更深了。出于某种原因，函数**checkdetails();** 工作得**很好**，但是**当它试图改变全局变量 done 时，什么也没有发生**。这是脚本：

```
<script type="text/javascript">
var done = "false";
function checkdetails(done){
var name = document.getElementById("name").value;
var address = document.getElementById("address").value;
var postcode = document.getElementById("postcode").value;
var city = document.getElementById("city").value;
var number = document.getElementById("number").value;
var email = document.getElementById("email").value;
if(name==""){
noty({text: "You need to enter your name."});
}else if(!address){
noty({text: "You need to enter your address."});
}else if(!city){
noty({text: "You need to enter your city."});
}else if(!postcode){
noty({text: "You need to enter your postcode."});
}else if(!number){
noty({text: "You need to enter your contact number."});
}else if(!email){
noty({text: "You need to enter your email address."});
} else {
done="true";
noty({text: "Your details have been submitted!"});
}

}
function payp(done){
if(done="false"){
noty({text: 'Please submit your details before proceeding to pay.'});
} else {
document.goandpay.submit();
}
} 
```

这是调用该函数的对象：

```
<a href="#" id="paypalpay" onclick="payp()">
<img src="images/paypalpay.png" style="margin-bottom:5px" alt="Proceed to the paypal payment gateway" name="Image1" width="265" height="53" border="0" id="Image1" />
</a> 
```

两个函数都调用得很好，表单检查有效，当所有内容都“提交”时会出现通知，唯一的问题是变量**done 没有改变**。感谢您到目前为止的所有帮助，有人能发现我在哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:44:18.863

您的电话`"chk"`根本没有执行该功能。您需要通过添加来调用它`()`

```
<a href="#" onclick="chk()"
                         ^ needed to execute function 
```

另外，**chicken 没有定义**，所以在修复它之后会抛出一个错误。

```
Uncaught ReferenceError: chicken is not defined 
```

**[(JSFiddle)](http://jsfiddle.net/sLDTE/)**

* * *

> 我意识到函数中 if 语句的范围与函数的范围不同

那**不是**真的。该函数的范围适用于其中的所有块。JS 没有**[块作用域](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements)**。

* * *

**编辑：您问题的第 2 部分**

```
if(done="false")
       ^ should be == 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:44:50.050

我认为您应该在 onclick 属性内的函数名称后加上括号：

```
<a href="#" onclick="chk()">Change the variable to 3</a> 
```

# c - Libcurl 在 C 代码中返回“从对等方接收数据时失败”

> ID：13413056
> 
> 赞同：2
> 
> 时间：2012-11-16T08:39:53.880
> 
> 标签：c, libcurl

我正在编写一个使用 libcurl 发送 HTTP POST 请求的 C 程序。使用下面这两种方法，我可以在不同的时间上传两个不同的文件。我可以在 Windows 7 中执行此操作，并且以某种方式在 Windows XP SP3 中运行时，它会返回一个错误：

> 从对等方接收数据时失败。

```
void sendFile()
{
    struct curl_httppost *post=NULL;
    struct curl_httppost *last=NULL;
    CURL *curlfile;
    CURLcode response;

    // Get a curl handle
    curlfile = curl_easy_init();
    curl_easy_setopt(curlhash, CURLOPT_URL, URL);

    curl_formadd(&post, &last,
        CURLFORM_COPYNAME, "file1",
        CURLFORM_FILECONTENT, "C:\\file1.txt",
        CURLFORM_END
        );

    curl_easy_setopt(curlfile, CURLOPT_HTTPPOST, post);

    response = curl_easy_perform(curlfile);
    curl_formfree(post);
    curl_easy_cleanup(curlfile);
}

void sendFileTwo()
{
    CURL *curlpost;
    CURLcode response;
    struct curl_httppost *post=NULL;
    struct curl_httppost *last=NULL;

    // Get a curl handle
    curlpost = curl_easy_init();
    curl_easy_setopt(curlpost, CURLOPT_URL, URL);

    curl_formadd(&post, &last,
        CURLFORM_COPYNAME, "File2", 
        CURLFORM_FILE, "C:\\file2.txt", 
        CURLFORM_END
        );

    curl_easy_setopt(curlpost, CURLOPT_HTTPPOST, post);
    response = curl_easy_perform(curlpost);
    curl_formfree(post);
} 
```

# jquery - 如何在 Bootstrap 的弹出窗口中插入关闭按钮

> ID：13413057
> 
> 赞同：78
> 
> 时间：2012-11-16T08:40:07.313
> 
> 标签：jquery, twitter-bootstrap, popover

**JS：**

```
$(function(){
  $("#example").popover({
    placement: 'bottom',
    html: 'true',
    title : '<span class="text-info"><strong>title</strong></span> <button type="button" id="close" class="close">&times;</button>',
    content : 'test'
  })
  $('html').click(function() {
    $('#close').popover('hide');
  });
}); 
```

**HTML：**

```
<button type="button" id="example" class="btn btn-primary" ></button> 
```

我在写你的代码没有显示你的弹出窗口。

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-16T09:22:42.467

你需要使标记正确

```
<button type="button" id="example" class="btn btn-primary">example</button> 
```

然后，一种方法是将关闭处理程序附加到元素本身内部，以下工作：

```
$(document).ready(function() {
    $("#example").popover({
        placement: 'bottom',
        html: 'true',
        title : '<span class="text-info"><strong>title</strong></span>'+
                '<button type="button" id="close" class="close" onclick="$(&quot;#example&quot;).popover(&quot;hide&quot;);">&times;</button>',
        content : 'test'
    });
}); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-11-10T15:28:13.117

我需要找到适用于多个弹出框和 Bootstrap 3 的东西。

这是我所做的：

我有多个元素想要使用弹出框，所以我不想使用 id。

标记可能是：

```
<button class="btn btn-link foo" type="button">Show Popover 1</button>
<button class="btn btn-link foo" type="button">Show Popover 2</button>
<button class="btn btn-link foo" type="button">Show Popover 3</button> 
```

弹出框内保存和关闭按钮的内容：

```
var contentHtml = [
    '<div>',
        '<button class="btn btn-link cancel">Cancel</button>',
        '<button class="btn btn-primary save">Save</button>',
    '</div>'].join('\n'); 
```

以及所有 3 个按钮的 javascript：

**当容器默认不附加到主体时，此方法有效。**

```
$('.foo').popover({
    title: 'Bar',
    html: true,
    content: contentHtml,
    trigger: 'manual'
}).on('shown.bs.popover', function () {
    var $popup = $(this);
    $(this).next('.popover').find('button.cancel').click(function (e) {
        $popup.popover('hide');
    });
    $(this).next('.popover').find('button.save').click(function (e) {
        $popup.popover('hide');
    });
}); 
```

**当容器连接到“body”时**

然后，使用 aria- describeby 找到弹出窗口并将其隐藏。

```
$('.foo').popover({
    title: 'Bar',
    html: true,
    content: contentHtml,
    container: 'body',
    trigger: 'manual'
}).on('shown.bs.popover', function (eventShown) {
    var $popup = $('#' + $(eventShown.target).attr('aria-describedby'));
    $popup.find('button.cancel').click(function (e) {
        $popup.popover('hide');
    });
    $popup.find('button.save').click(function (e) {
        $popup.popover('hide');
    });
}); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-01-23T09:27:12.267

我发现其他答案要么不够通用，要么太复杂。这是一个应该始终有效的简单方法（对于引导程序 3）：

```
$('[data-toggle="popover"]').each(function () {
    var button = $(this);
    button.popover().on('shown.bs.popover', function() {
        button.data('bs.popover').tip().find('[data-dismiss="popover"]').on('click', function () {
            button.popover('toggle');
        });
    });
}); 
```

`data-dismiss="popover"`然后只需在关闭按钮中添加属性。还要确保不要`popover('hide')`在代码中的其他地方使用，因为它隐藏了弹出窗口，但没有在引导代码中正确设置其内部状态，这将在您下次使用`popover('toggle')`.

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-06-09T00:34:17.967

**前面的例子有两个主要缺点：**

1.  “关闭”按钮需要以某种方式了解引用元素的 ID。
2.  需要在 'shown.bs.popover' 事件上添加一个 'click' 监听器到关闭按钮；这也不是一个好的解决方案，因为每次显示“popover”时，您都会添加这样的监听器。

**下面是一个没有这些缺点的解决方案。**

默认情况下，'popover' 元素会立即插入到 DOM 中的引用元素之后（然后请注意，引用元素和弹出框是直接兄弟元素）。因此，当单击“关闭”按钮时，您可以简单地查找其最近的“div.popover”父元素，然后查找该父元素的前一个兄弟元素。

只需在“关闭”按钮的“onclick”处理程序中添加以下代码：

```
$(this).closest('div.popover').popover('hide'); 
```

**例子：**

```
var genericCloseBtnHtml = '<button onclick="$(this).closest(\'div.popover\').popover(\'hide\');" type="button" class="close" aria-hidden="true">&times;</button>';

$loginForm.popover({
    placement: 'auto left',
    trigger: 'manual',
    html: true,
    title: 'Alert' + genericCloseBtnHtml,
    content: 'invalid email and/or password'
}); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-07-15T12:58:29.473

![在此处输入图像描述](../Images/406d89d7c256b8b0bfd367dac74500be.png)

以下是我刚刚在我的项目中使用的。希望它可以帮助你

```
<a id="manualinputlabel" href="#" data-toggle="popover" title="weclome to use the sql quer" data-html=true  data-original-title="weclome to use the sql query" data-content="content">example</a>

$('#manualinputlabel').click(function(e) {
              $('.popover-title').append('<button id="popovercloseid" type="button" class="close">&times;</button>');
              $(this).popover();

          });

      $(document).click(function(e) {
         if(e.target.id=="popovercloseid" )
         {
              $('#manualinputlabel').popover('hide');                
         }

      }); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-12-05T00:07:25.160

我已经检查了许多提到的代码示例，对我来说，Chris 的方法运行良好。我在此处添加了我的代码以进行工作演示。

我已经使用 Bootstrap 3.3.1 对其进行了测试，但我还没有使用旧版本对其进行测试。但它绝对不适用于 2.x，因为该`shown.bs.popover`事件是在 3.x 中引入的。

```
$(function() {

  var createPopover = function (item, title) {

        var $pop = $(item);

        $pop.popover({
            placement: 'right',
            title: ( title || '&nbsp;' ) + ' <a class="close" href="#">&times;</a>',
            trigger: 'click',
            html: true,
            content: function () {
                return $('#popup-content').html();
            }
        }).on('shown.bs.popover', function(e) {
            //console.log('shown triggered');
            // 'aria-describedby' is the id of the current popover
            var current_popover = '#' + $(e.target).attr('aria-describedby');
            var $cur_pop = $(current_popover);

            $cur_pop.find('.close').click(function(){
                //console.log('close triggered');
                $pop.popover('hide');
            });

            $cur_pop.find('.OK').click(function(){
                //console.log('OK triggered');
                $pop.popover('hide');
            });
        });

        return $pop;
    };

  // create popover
  createPopover('#showPopover', 'Demo popover!');

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"/>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<button class="btn btn-primary edit" data-html="true" data-toggle="popover" id="showPopover">Show</button>

<div id="popup-content" class="hide">
    <p>Simple popover with a close button.</p>
    <button class="btn btn-primary OK">OK</button>
</div>
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-04-30T16:14:02.127

**诀窍是使用.data('bs.popover').tip()**获取当前的 Popover ：

```
$('#my_trigger').popover().on('shown.bs.popover', function() {
    // Define elements
    var current_trigger=$(this);
    var current_popover=current_trigger.data('bs.popover').tip();

    // Activate close button
    current_popover.find('button.close').click(function() {
        current_trigger.popover('hide');
    });
}); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-05-15T21:12:00.860

这适用于多个弹出框，我还添加了一些额外的 JS 来处理重叠弹出框时发生的 z-index 问题：

[http://jsfiddle.net/erik1337/fvE22/](http://jsfiddle.net/erik1337/fvE22/)

JavaScript：

```
var $elements = $('.my-popover');
$elements.each(function () {
    var $element = $(this);

    $element.popover({
        html: true,
        placement: 'top',
        container: $('body'), // This is just so the btn-group doesn't get messed up... also makes sorting the z-index issue easier
        content: $('#content').html()
    });

    $element.on('shown.bs.popover', function (e) {
        var popover = $element.data('bs.popover');
        if (typeof popover !== "undefined") {
            var $tip = popover.tip();
            zindex = $tip.css('z-index');

            $tip.find('.close').bind('click', function () {
                popover.hide();
            });

            $tip.mouseover(function (e) {
                $tip.css('z-index', function () {
                    return zindex + 1;
                });
            })
                .mouseout(function () {
                $tip.css('z-index', function () {
                    return zindex;
                });
            });
        }
    });
}); 
```

HTML：

```
<div class="container-fluid">
    <div class="well popover-demo col-md-12">
        <div class="page-header">
             <h3 class="page-title">Bootstrap 3.1.1 Popovers with a close button</h3>

        </div>
        <div class="btn-group">
            <button type="button" data-title="Popover One" class="btn btn-primary my-popover">Click me!</button>
            <button type="button" data-title="Popover Two" class="btn btn-primary my-popover">Click me!</button>
            <button type="button" data-title="Popover Three (and the last one gets a really long title!)" class="btn btn-primary my-popover">Click me!</button>
        </div>
    </div>
</div>
<div id="content" class="hidden">
    <button type="button" class="close">&times;</button>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
</div> 
```

CSS：

```
/* Make the well behave for the demo */
 .popover-demo {
    margin-top: 5em
}
/* Popover styles */
 .popover .close {
    position:absolute;
    top: 8px;
    right: 10px;
}
.popover-title {
    padding-right: 30px;
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-10-31T20:48:30.057

只是想更新答案。根据 Swashata Ghosh，以下是一种适用于 moi 的更简单方法：

HTML：

```
<button type="button" class="btn btn-primary example">Example</button> 
```

JS：

```
$('.example').popover({
   title: function() {
      return 'Popup title' +
             '<button class="close">&times</button>';
   },
   content: 'Popup content',
   trigger: 'hover',
   html: true
});

$('.popover button.close').click(function() {
   $(this).popover('toggle');
}); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-12-01T12:26:06.293

我一直在努力解决这个问题，这是最简单的方法，3行js：

1.  在弹出框的标题中添加一个叉号
2.  使用 js 片段显示弹出框并通过单击标题关闭
3.  使用一点 css 让它变得更好

[![在此处输入图像描述](../Images/ceb4568e8ec8bc2752d074f90efb2142.png)](https://i.stack.imgur.com/5jka0.png)

```
$(document).ready(function() {
  // This is to overwrite the boostrap default and show it allways
  $('#myPopUp').popover('show');
  // This is to destroy the popover when you click the title
  $('.popover-title').click(function(){
    $('#myPopUp').popover('destroy');
  });
});
```

```
@import "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css";

/* Just to align my example */
.btn {
  margin: 90px auto;
  margin-left: 90px;
}

/* Styles for header */
.popover-title {
  border: 0;
  background: transparent;
  cursor: pointer;
  display: inline-block;
  float: right;
  text-align: right; 
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<button id="myPopUp" class="btn btn-success" data-toggle="popover" data-placement="top" data-title="×" data-content="lorem ipsum content">My div or button or something with popover</button> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-01-21T17:37:28.457

尝试这个：

```
$(function(){
  $("#example")
      .popover({
      title : 'tile',
      content : 'test'
    })
    .on('shown', function(e){
      var popover =  $(this).data('popover'),
        $tip = popover.tip();

      var close = $('<button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>')
        .click(function(){
          popover.hide();
        });
      $('.popover-title', $tip).append(close);
    });
}); 
```

与其将按钮添加为标记字符串，不如使用 jQuery 包装的按钮更容易，因为这样您可以更整齐地绑定。Bootstrap 代码中确实缺少这一点，但这种解决方法对我有用，如果需要，实际上可以扩展以适用于所有弹出框。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-06-15T21:54:41.627

这是一个“作弊”的解决方案：

[按照通常的指示进行可关闭的弹出窗口。](https://getbootstrap.com/docs/4.0/components/popovers/#dismiss-on-next-click)

然后用 CSS 在框中打一个“X”。

**CSS：**

```
.popover-header::after {
    content: "X";
    position: absolute;
    top: 1ex;
    right: 1ex;
} 
```

**查询：**

```
$('.popover-dismiss').popover({
    trigger: 'focus'
}); 
```

**HTML：**

```
<a data-toggle="popover" data-trigger="focus" tabindex="0"  title="Native Hawaiian or Other Pacific Islander" data-content="A person having origins in any of the original peoples of Hawaii, Guam, Samoa, or other Pacific Islands.">?</a> 
```

从技术上讲，如果有人单击“X”以外的其他内容，则可以将其解雇，但至少在我的情况下这不是问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-11-21T11:00:06.500

```
 $('.tree span').each(function () {
        var $popOverThis = $(this);
        $popOverThis.popover({
            trigger: 'click',
            container: 'body',
            placement: 'right',
            title: $popOverThis.html() + '<button type="button" id="close" class="close" ">&times;</button>',
            html: true,
            content: $popOverThis.parent().children("div.chmurka").eq(0).html()
        }).on('shown.bs.popover', function (e) {
            var $element = $(this);
            $("#close").click(function () {
                $element.trigger("click");
            });
        });
    }); 
```

当您单击**元素**并显示弹出窗口时，接下来您可以引发事件 shown.bs.popover 在此您将获得触发单击以关闭弹出窗口的**元素。**

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-03-13T05:25:12.283

```
$popover = $el.popover({
  html: true
  placement: 'left'
  content: 'Do you want to a <b>review</b>? <a href="#" onclick="">Yes</a> <a href="#">No</a>'
  trigger: 'manual'
  container: $container // to contain the popup code
});

$popover.on('shown', function() {
  $container.find('.popover-content a').click( function() {
    $popover.popover('destroy')
  });
});

$popover.popover('show')' 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-04-25T04:26:46.093

```
$(function(){ 
  $("#example").popover({
    placement: 'bottom',
    html: 'true',
    title : '<span class="text-info"><strong>title!!</strong></span> <button type="button" id="close" class="close">&times;</button></span>',
    content : 'test'
  })

  $(document).on('click', '#close', function (evente) {
    $("#example").popover('hide');
  });
  $("#close").click(function(event) {
    $("#example").popover('hide');
  });
});

<button type="button" id="example" class="btn btn-primary" >click</button> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-27T20:56:41.660

FWIW，这是我正在使用的通用解决方案。我正在使用 Bootstrap 3，但我认为一般方法也应该适用于 Bootstrap 2。

该解决方案使用通用 JS 代码块启用弹出框并为所有由“rel="popover"' 标记标识的弹出框添加一个“关闭”按钮。除了存在 rel="popover" 标记的（标准）要求之外，您可以在页面上放置任意数量的弹出框，并且您不需要知道它们的 ID——实际上它们不需要 ID一点也不。您确实需要使用“data-title”HTML 标记格式来设置弹出框的标题属性，并将 data-html 设置为“true”。

我发现必要的技巧是建立一个对弹出对象（“po_map”）的引用的索引映射。然后我可以通过 HTML 添加一个“onclick”处理程序，该处理程序通过 JQuery 为我提供的索引（“p_list['+index+'].popover(\'toggle\')”）引用 popover 对象。这样我就不需要担心弹出框对象的 id，因为我有一个对象本身的引用映射，其中包含 JQuery 提供的唯一索引。

这是javascript：

```
var po_map = new Object();
function enablePopovers() {
  $("[rel='popover']").each(function(index) {
    var po=$(this);
    po_map[index]=po;
    po.attr("data-title",po.attr("data-title")+
    '<button id="popovercloseid" title="close" type="button" class="close" onclick="po_map['+index+'].popover(\'toggle\')">&times;</button>');
    po.popover({});
  });
}
$(document).ready(function() { enablePopovers() }); 
```

这个解决方案让我可以轻松地在我网站上的所有弹出窗口上放置一个关闭按钮。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-09-11T20:10:44.690

我发现下面的代码非常有用（取自[https://www.emanueletessore.com/twitter-bootstrap-popover-add-close-button/](https://www.emanueletessore.com/twitter-bootstrap-popover-add-close-button/)）：

```
$('[data-toggle="popover"]').popover({
  title: function(){
    return $(this).data('title')+'<span class="close" style="margin-top: -5px">&times;</span>';
  }
}).on('shown.bs.popover', function(e){
  var popover = $(this);
  $(this).parent().find('div.popover .close').on('click', function(e){
    popover.popover('hide');
  });
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-05-09T03:32:16.957

把它放在你的标题弹出构造函数中......

```
'<button class="btn btn-danger btn-xs pull-right"
onclick="$(this).parent().parent().parent().hide()"><span class="glyphicon
glyphicon-remove"></span></button>some text' 
```

...在右上角获得一个小的红色“x”按钮

```
//$('[data-toggle=popover]').popover({title:that string here}) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-05-20T06:55:25.103

悬停时粘滞，HTML：

```
<a href="javascript:;" data-toggle="popover" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." title="Lorem Ipsum">...</a> 
```

Javascript：

```
$('[data-toggle=popover]').hover(function(e) {
  if( !$(".popover").is(':visible') ) {
      var el = this;
      $(el).popover('show');
      $(".popover > h3").append('<span class="close icon icon-remove"></span>')
                        .find('.close').on('click', function(e) {
                            e.preventDefault();
                            $(el).popover('hide');
                        }
      );
  }
}); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-01-28T18:11:25.413

对于仍然有点困惑的人：

这是在显示弹出框后切换弹出框的工作原理，选择用于触发它的相同按钮并在其上调用 .popover('toggle') 。

在这种情况下，要关闭弹出框，代码将是：

$('#example').popover('toggle');

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-03-16T12:40:46.647

对我来说，这是在弹出窗口中添加关闭按钮的最简单解决方案。

**HTML：**

```
 <button type="button" id="popover" class="btn btn-primary" data-toggle="popover" title="POpover" data-html="true">
                    Show popover
    </button>

    <div id="popover-content" style="display:none"> 
       <!--Your content-->
       <button type="submit" class="btn btn-outline-primary" id="create_btn">Create</button>
       <button type="button" class="btn btn-outline-primary" id="close_popover">Cancel</button>  
    </div> 
```

**Javascript：**

```
 document.addEventListener("click",function(e){
        // Close the popover 
        if (e.target.id == "close_popover"){
                $("[data-toggle=popover]").popover('hide');
            }
    }); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-11-18T22:02:00.243

这是一个基于上述@Chris 回答的工作解决方案，但已修复，因此在触发元素的后续单击时，您不必单击该元素两次。

如评论中所述，使用`.popover('hide)`手动会弄乱引导程序的内部状态。

```
var closePopover = function(eventShown) {
   // Set the reference to the calling element
   var $caller = $('#' + this.id);

   // Set the reference to the popover
   var $popover = $('#' + $(eventShown.target).attr('aria-describedby'));

       // Unbind any pre-existing event handlers to prevent duplicate clicks
       $popover.find('.popover-close').off('click');

       // Bind event handler to close button
       $popover.find('.popover-close').on('click', function(e) {

          // Trigger a click on the calling element, to maintain bootstrap's internal state
          $caller.trigger('click');
        });
 }

$('.popoverTriggerElement').popover({
   trigger: 'click'
})
.on('shown.bs.popover', closePopover) 
```

现在，您可以使用关闭按钮而无需重复单击事件，并检查引导程序内部状态，使其按预期工作。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-04-20T18:33:43.617

For a specific popover, you can just add a onclick event on the close button:

```
onclick="$('#my-popover').popover('hide'); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-04-16T14:52:40.180

作为一个非常简单的解决方案，我做了以下事情：

1）添加以下CSS：

```
.sub_step_info .popover::after {
    content:url('/images/cross.png');
    position:absolute;
    display:inline-block;
    top:15px;
    right:5px;
    width:15px;
    text-align:center;
    cursor:pointer;
} 
```

2）`data-trigger="manual"`在popover触发元素上设置

3）然后基于[https://github.com/twbs/bootstrap/issues/16802](https://github.com/twbs/bootstrap/issues/16802)：

```
$('[data-trigger="manual"]').click(function() {
    $(this).popover('toggle');
}).blur(function() {
    $(this).popover('hide');
}); 
```

这使用了弹出框上的任何位置都可以点击的基础，但是通过关注十字架，您将鼓励您所追求的行为。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-11-11T21:29:48.190

当单击关闭按钮时，我遇到了工具提示做一些时髦的东西的问题。为了解决这个问题，我使用 a`span`而不是使用按钮。此外，当单击关闭按钮时，我必须在关闭后单击工具提示两次才能再次打开它。为了解决这个问题，我简单地使用了该`.click()`方法，如下所示。

`<span tabindex='0' class='tooltip-close close'>×</span>`

```
$('#myTooltip').tooltip({
    html: true,
    title: "Hello From Tooltip",
    trigger: 'click'
});    

$("body").on("click", ".tooltip-close", function (e) {
    else {
        $('.tooltip').remove();
        $('#postal-premium-tooltip').click();
    }
}); 
```

* * *

## 回答 #26

> 赞同：-3
> 
> 时间：2012-11-16T09:11:24.690

```
<script type="text/javascript"  src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.popover-1.1.2.js"></script>

<script type="text/javascript">
$(function(){ 
$("#example").popover({
        placement: 'bottom',
        html: 'true',
        title : '<span class="text-info"><strong>title</strong></span> <button     type="button" id="close" class="close">&times;</button></span>',
        content : 'test'
    })

$("#close").click(function(event) {

$("#example").popover('hide');
});
});
</script>

<button type="button" id="example" class="btn btn-primary" >click</button> 
```

# sql - HQL 等效于 SQL 分页查询

> ID：13413059
> 
> 赞同：1
> 
> 时间：2012-11-16T08:40:14.503
> 
> 标签：sql, hibernate, hql

谁能帮我将以下用于获取分页结果的 SQL 查询转换为 HQL？

```
SELECT *
FROM REPORDER repairorde0x_
INNER JOIN REPREPAIRDEVICE repairdevi1x_
ON repairorde0x_.ID=repairdevi1x_.REPORDERID
WHERE repairorde0x_.ID IN
    (SELECT id
    FROM
       (SELECT row_.id,
       rownum rownum_
       FROM
          (SELECT DISTINCT repairorde0_.ID
          FROM REPORDER repairorde0_
          INNER JOIN REPREPAIRDEVICE repairdevi1_
          ON repairorde0_.ID=repairdevi1_.REPORDERID
          ) row_
       WHERE rownum <= 550
       )
    WHERE rownum_ > 500
    ) ; 
```

我无法转换为 HQL 的部分是子选择，其中选择了要获取的维修订单的 ID。我不知道在这种情况下如何处理 rownum 和随后的几个子选择语句。

我需要 HQL 查询以便在数据库级别进行分页，而不是在 Java 的内存中进行。（对于 JOIN FETCH HQL 查询的 Query.setMaxResults、Query.setFirstResult 问题警告：“使用集合提取指定的 firstResult/maxResults；在内存中应用！”）

只是为了提示实体的 Java 模型：

```
class RepairOrder{
    private int id;
    private String orderNumber;
    private List<RepairDevice> repairDevices;
}

class RepairDevice{
    private int id;
    private int repairOrderId;
    private String deviceName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:35:36.620

最简单的方法是只分页维修订单并使用附加查询加载设备，使用批量大小来避免 N+1：

```
orders = session
  .CreateQuery("from RepairOrder")
  .SetFirstResult(500)
  .SetMaxResult(50); 
```

此 xml 映射将一次加载 50 个订单的设备（使 1+N 成为 1+(N/50)）。

```
<bag name="RepairDevices" batch-size="50" ... 
```

# php - 如何在 php 中使用 ldap_sasl_bind 连接到 ldap

> ID：13413062
> 
> 赞同：0
> 
> 时间：2012-11-16T08:40:46.983
> 
> 标签：php, ldap, openldap

我在 LDAP 上有这个用户：uid=user,ou=People,dc=ex,dc=com 我连接到 LDAP 服务器

```
$con = ldap_connect('ldap://ex.com');
ldap_set_option($con, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($con, LDAP_OPT_REFERRALS, 0); 
```

我尝试使用 ldap_sasl_bind 进行绑定：

```
ldap_sasl_bind($con, 'uid=user,ou=People,dc=ex,dc=com', 'secret', 'DIGEST-MD5'); 
```

不工作 - “无效的凭据”

```
ldap_sasl_bind($con, NULL, 'secret', 'DIGEST-MD5', NULL, 'uid=user,ou=People,dc=ex,dc=com'); 
```

同样的结果 - “无效的凭据”

```
ldap_bind($con, 'uid=user,ou=People,dc=ex,dc=com', 'secret') 
```

工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:44:03.120

[当使用像DIGEST-MD5](https://www.rfc-editor.org/rfc/rfc2831)这样的低安全性[SASL](https://www.rfc-editor.org/rfc/rfc4422)方法时，服务器必须能够从以可分辨名称命名的条目中获取明文密码。这意味着密码必须以明文或可逆加密存储（这会降低条目的安全性，这是 DIGEST-MD5 应考虑低安全性并避免使用的原因之一，除非 LDAP 客户端要求；LDAP 客户端应该更喜欢使用简单的身份验证安全连接）。

检查以确保该条目`uid=user,ou=People,dc=ex,dc=com`具有`secret`可供服务器使用的密码，也就是说，密码存储方案是明文或如上所述的可逆加密。如果使用可逆加密，则应该使用最强的方法，我认为是[AES](http://en.wikipedia.org/wiki/AES)。

# symfony - SqlFormatter 在 Symfony2 中不可用

> ID：13413063
> 
> 赞同：0
> 
> 时间：2012-11-16T08:40:51.470
> 
> 标签：symfony, doctrine-orm

我是 Symfony2 的新手。我刚刚下载了 Symfony 2.1.3 标准并且正在创建我的测试项目（博客）。我想看看哪些 sql 查询被发送到数据库中。在工具栏中，我可以看到已执行的请求计数，但是当我单击工具栏按钮以查看有关 sql 查询的详细信息时，我得到异常致命错误：在 vendor/doctrine/doctrine-bundle/Doctrine/ 中找不到类“SqlFormatter” Bundle/DoctrineBundle/Twig/DoctrineExtension.php。

此类是否位于教义分发中，还是应该将其添加到 composer.json 并单独下载？

神话冲刺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:16:42.077

只需通过 Composer 更新依赖项。

# android - 如何以编程方式从“Drawable”文件夹中删除图像？

> ID：13413065
> 
> 赞同：1
> 
> 时间：2012-11-16T08:41:05.250
> 
> 标签：android, drawable

我有一个将图像加载到“Drawable”文件夹中的源代码

```
private void drawable_from_url(String url, String src_name) throws java.net.MalformedURLException, java.io.IOException {
    android.graphics.drawable.Drawable.createFromStream(((java.io.InputStream)new java.net.URL(url).getContent()), src_name);
} 
```

**但我怎样才能删除它们？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:17:02.433

您没有写入“res/drawable”文件夹。您正在从流中创建一个新的 android.graphics.drawable.Drawable 对象。任何资源文件在 apk 上都是“硬编码”的，您不能触摸它们，除非使用它们的 id 加载它们。

# html - Flex 到 HTML5 - 表示层（画布、div、？？？）

> ID：13413072
> 
> 赞同：2
> 
> 时间：2012-11-16T08:41:30.257
> 
> 标签：html, actionscript-3, apache-flex, flex3

我的问题是关于从 Flex3 迁移到 HTML5。我实际上想迁移自己而不是应用程序。问题是，什么方向是最好的，最类似于弹性知识。也许我会重新实现一些我已经在我的 flex 库中的自定义组件。我认为我必须在 HTML5 中实现一些有用的 flex 组件——例如 AdvancedDataGrid 或 Tree。

现在我可以看到两种可能性：

*   假设页面（或大 DIV）作为应用程序主类，并基于扩展 DIV 功能实现其他组件 - 并将 DIV 放在 DIV 中的 DIV 中 - 如 AS3 使用 UIComponent。它为我提供了浏览器环境事件处理或 DIV 移动和重绘等的支持。
*   假设一个 CANVAS 组件作为应用程序主类。使用所有者绘图控件等构建自己的类树。我想我需要为我的内部可视组件实现事件处理和调度。我还需要自己实现所有 UI 操作（如移动、重绘）。

我假设，我将开始构建自己的类/组件库以供将来长期使用。问题是什么对知识和工作投资更好？

了解对这个问题的广泛意见将是一件好事。你可以在这里给你的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:01:33.437

根据经验，我们可以说编写 DataGrid 组件是一项非常艰巨的任务。我们已经在 DataGrid 组件上工作了 3 年，而且我们仍在添加功能。与其编写自己的 ADG 之类的组件，不如考虑使用 JS 框架。以下是一些：

*   DOJO（RIA 企业应用程序开发的优秀框架，免费！）

*   Sencha（相当不错，但商业化）

*   JQuery（非常流行，但高度分散）。

它们中的每一个都带有自己的网格组件。Senchas 网格非常好，但一些 jquery 网格也是如此。例如，请参见： [最佳动态 JavaScript/JQuery 网格](https://stackoverflow.com/questions/8677298/best-dynamic-javascript-jquery-grid)

底线，不要重新发明轮子。那里有许多出色的付费和免费版本，选择一个适合您并使用它运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T07:38:20.503

免责声明：我是 Web Atoms JS 的作者

Web Atoms JS 旨在引入 Flex、Silverlight 和 XUL 的所有概念。这些技术中的每一个都使用了更多的 XML 标记来实现非常高级的 UI 控件。屏幕变得复杂，当它不断变化时，将它们可视化变得很痛苦。

使用 Web Atoms，您将编写比任何其他框架更少的代码。Web Atoms 附带了所有基本的 flex 组件，并且还会有更多。

这是 Web Atoms JS 中一切皆有可能的示例。

这是文档的链接。 [http://webatomsjs.neurospeech.com/docs](http://webatomsjs.neurospeech.com/docs)

![在此处输入图像描述](../Images/601f500a83e36f91dc95f5bff5f1e75f.png)

# blackberry - Blackberry Webworks 应用程序类未找到错误

> ID：13413073
> 
> 赞同：0
> 
> 时间：2012-11-16T08:41:43.643
> 
> 标签：blackberry, blackberry-webworks

当我尝试在黑莓设备上部署我的黑莓应用程序时，我在运行应用程序时遇到以下错误：class net.rim.device.api.compress。gzipoutputstream not found 知道为什么我会收到此错误吗？我是一个新手，因此这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:29:03.073

您使用的是哪个 SDK？我相信 net.rim.device.api.compress 是一个 Java 类，但您已将您的帖子标记为使用 JavaScript、HTML 和 CSS 来创建应用程序的 blackberry-webworks。

如果这是您正在制作的 WebWorks 应用程序，那么您不能使用这样的 Java API。

但是，您可以创建自定义扩展来公开此功能。您可以在此处了解有关为 BlackBerry 智能手机创建扩展的更多信息：[https ://developer.blackberry.com/html5/documentation/using_javascript_extensions_1866976_11.html](https://developer.blackberry.com/html5/documentation/using_javascript_extensions_1866976_11.html)

# android - Android系统资源动态获取文本

> ID：13413074
> 
> 赞同：0
> 
> 时间：2012-11-16T08:41:43.910
> 
> 标签：android, settings, system

我想在我的应用程序中设置一些特定的android系统设置。是否可以通过代码获取文本以及设置资源的描述？

例如，我想允许更改此设置：

android.provider.Settings.System.SCREEN_BRIGHTNESS 在 android 设置中出现亮度。这个资源也是本地化的，所以我不想在我的应用程序中做同样的事情。如果可能的话，我想创建一个按钮并动态插入文本。

如果有人有提示要查看，请提供帮助。

此致，

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:07:20.067

> android.provider.Settings.System.SCREEN_BRIGHTNESS 在 android 设置中出现亮度。这个资源也是本地化的，所以我不想在我的应用程序中做同样的事情。

请参阅：[Settings.System](http://developer.android.com/reference/android/provider/Settings.System.html#putInt%28android.content.ContentResolver,%20java.lang.String,%20int%29)。如果您希望值本地化，请在具有语言和/或区域设置限定符的文件夹中使用整数资源。请参阅[整数资源](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)和[替代资源](http://developer.android.com/guide/topics/resources/localization.html#creating-alternatives)

> 如果可能的话，我想创建一个按钮并动态插入文本。

在 xml 中定义尽可能多的布局，在 xml 文件的名称上调用 setContentView()。然后可以在调用 (Button)findViewById() 后使用 xml 中给出的 id 来引用该按钮。然后，您可以动态设置文本并在代码中进一步修改小部件。请参阅[Layouts](http://developer.android.com/guide/topics/ui/declaring-layout.html)和[TextView setText](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)，它适用于 Button，因为 Button 扩展了 TextView。

希望这可以帮助。

# login - 在第一个面板中单击按钮后，在同一选项卡面板中打开另一个视图

> ID：13413078
> 
> 赞同：1
> 
> 时间：2012-11-16T08:41:57.090
> 
> 标签：login, views, sencha-touch-2, tabpanel

我有一个主视图，我在其中创建了三个选项卡，单击登录选项卡，登录成功后打开一个登录表单，我需要在同一个登录选项卡面板中加载另一个视图（登陆）。我使用以下代码行加载视图，但它不会在同一个标​​签面板中打开它，而是作为独立视图加载。如何在同一个标​​签面板中打开它。

应用程序主视图

```
Ext.define("SenchaTest.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: [
        'Ext.TitleBar',

    ],
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                    title: 'Home',
                    iconCls: 'home',
                    html: [
                        '<img src="http://staging.sencha.com/img/sencha.png" />',
                        '<h1>Welcome to Sencha Touch</h1>',
                        "<p>This demonstrates how ",
                        "to use tabs, lists and forms to create a simple app</p>",
                        '<h2>Sencha Touch (2.0.0)</h2>'
                    ].join("")
                },

                {
                title: 'Log In',
                    iconCls: 'user',
                    xtype: 'formpanel',
                    url: 'contact.php',
                    layout: 'card',
            id:"loginForm",
                items: [
                    {
                        xtype: 'fieldset', 
            title: 'Log In',    
            id:"submitForm",                        
                        instructions: 'Enter username and password to login.',
                        defaults: {
                        required: true,
                        labelAlign: 'left',
                        labelWidth: '45%'
                    },
            items: [
                    {
                        xtype: 'textfield',
                        name : 'username',
                        label: 'User Name',
            allowBlank:false, 
                        useClearIcon: true              
                    }, {
                        xtype: 'passwordfield',
                        name : 'password',
                        label: 'Password',
            allowBlank:false, 
                        useClearIcon: false

                    },{
                            xtype: 'button',
                            text: 'Submit',
                            ui: 'confirm',
                        id: 'btnSubmitLogin'
                            //  this.up('formpanel').submit();
                            }]

                    }  

                ]
            }

        ]
    }
}); 
```

控制器代码

```
Ext.define("SenchaTest.controller.LoginForm", {
    extend : "Ext.app.Controller",
    config : {
        refs : {
            btnSubmitLogin : "#btnSubmitLogin",
            LoginForm : '#loginForm'
        },
        control : {
            btnSubmitLogin : {
                tap : "onSubmitLogin"
            }
        }
    },
    onSubmitLogin : function(btn) {
    alert("onSubmitLogin");
        console.log("onSubmitLogin");
        var values = this.getLoginForm().getValues();
        //alert(values.username);
        //alert(values.password);

         Ext.util.JSONP.request({ 

    url:'http://localhost:8092/returnjson.ashx',
                params:{                    callback:'callback',uname:values.username,password:values.password}, 
                callbackKey: 'callback', 
                success: function (result,request) 
                {     
                    if(result.status==true)
                    {
                     alert("Welcome " + result.UserName);

                                                          Ext.Viewport.setActiveItem(Ext.create('SenchaTest.view.Landing'));

                    }
                    else
                    {
                    alert("Username or Password is incorrect"); 
                    return;
                    }
                    console.log(result.UserName);

                    console.log(result);
                    alert(result); 

                    // Handle error logic 
                    if (result.error) { 
                        alert(response.error); 
                        return; 
                    } 
                } 
            }); 
    },
    launch : function() {
        this.callParent();
        console.log("LoginForm launch");
        Ext.Viewport.add(Ext.create('SenchaTest.view.Landing'));

    },
    init : function() {
        this.callParent();
        console.log("LoginForm init");
    }
}); 
```

登录登陆后要加载的视图

```
Ext.define("SenchaTest.view.Landing", {
    extend: "Ext.Container",
    xtype: 'landingScreen',
    requires: [
        "SenchaTest.view.Main"       
    ],
    config: {
        html: "Welcome to my app"  
    }
}); 
```

我用过...

```
Ext.Viewport.setActiveItem(Ext.create('SenchaTest.view.Landing')); 
```

加载登陆视图，但它不会在同一选项卡中加载，而是作为独立页面加载。请对此提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:16:37.740

以下代码允许您使用“替换”功能扩展 Sencha Touch，该功能允许您在同一面板中动态交换两个视图组件（我相信这就是您想要做的）： [http ://www.sencha.com /forum/showthread.php?134909-Replace-component-function&langid=4](http://www.sencha.com/forum/showthread.php?134909-Replace-component-function&langid=4)

另一种解决方案（不推荐）是创建第三个但隐藏的选项卡面板（“登陆”），然后在成功登录时创建并显示它，同时隐藏登录选项卡面板。

# php - 使用.htaccess 阻止对文件和子目录的访问？

> ID：13413080
> 
> 赞同：2
> 
> 时间：2012-11-16T08:41:58.877
> 
> 标签：php, .htaccess

我的目录中有近 30 个 php 文件，4 个子目录。我想阻止用户直接查看的一些 php 文件和子目录，例如 `http://bhavani.com/hai.php`

我的当前`htaccess`文件

```
## Enable Mod Rewrite, this is only required once in each .htaccess file
RewriteEngine On 
RewriteBase / 
## Test for access to includes directory
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /includes/ .*$ [NC] 
## Test that file requested has php extension 
RewriteCond %{REQUEST_FILENAME} ^.+\.php$ 
## Forbid Access 
RewriteRule .* - [F,NS,L] 
```

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T08:47:47.943

您可以像这样过滤文件

```
<Files ~ "\.php$">
  Deny from all
</Files> 
```

和这样的目录

```
<Directory "/subdirectory">
  Deny from all
</Directory> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T08:49:49.240

你不需要`mod_rewrite`完成这个。一个更简单的方法是使用`RedirectMatch`指令 from `mod_alias`：

```
RedirectMatch 403 ^.*/include/*\.php$ 
```

这将自动响应对子目录`403 Forbidden`中任何 PHP 文件的直接请求`include`，但是您仍然可以`include`从其他 php 文件中访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:46:52.383

我认为你可以只使用 RewriteRule 而没有 RewriteCond 例如： `RewriteRule ^/hai\.php - [F, NS, L]` 该规则禁止访问文件 hai.php 对于其他文件，您可以使用其他规则或使用掩码。

# xcode - 在 XCode 4.5.2 中，接口中没有定义自动 @synthesize-ing 属性

> ID：13413089
> 
> 赞同：1
> 
> 时间：2012-11-16T08:42:39.937
> 
> 标签：xcode

有没有办法让那些回来？我正在关注一些视频教程，其中将文本字段拖到 h 文件中会在 m 文件中创建一个属性和一个 @synthesize。在 xcode 4.5.2 中，未创建 @synthesize。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T08:45:47.793

在 XCode 4.5.2 中它不是强制性的，但您可以创建它们。如果没有`@synthesize`，这意味着`@synthesize myProp = _myProp;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:45:15.047

Xcode 4.5 包含默认合成的较新版本的 clang。`@synthesize`不再需要该指令。

# wordpress - 通过 PHP 代码在 wordpress 中显示帖子

> ID：13413098
> 
> 赞同：1
> 
> 时间：2012-11-16T08:43:13.830
> 
> 标签：wordpress

我准备了一个滚动条，需要显示在`wordpress`页面的页脚中。它为我提供了一个`ID`，无法在页脚文件中显示它，它的显示就像`code`我把它放在帖子页面中一样。使用下面的插件`http://www.gopiplus.com/work/2011/05/08/wordpress-plugin-image-horizontal-reel-scroll-slideshow/#.UKX1ie-0Ndg`

我在帖子中应用了代码`[ihrss-gallery type="gallery1" w="600" h="170" speed="1" bgcolor="#FFFFFF" gap="5" random="YES"]`

有什么帮助吗？

我正在使用下面的代码 -

```
<?php
$post_id = 11893;
$queried_post = get_post($post_id);
$title = $queried_post->post_title;
echo $queried_post->post_content;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:16:33.213

在使用 post_content 之前，您需要先使用循环

```
<?php if (have_posts()) : ?>
               <?php while (have_posts()) : the_post(); ?>    
               <!-- do stuff ... -->
               <?php endwhile; ?>
     <?php endif; ?> 
```

按照本指南 [http://codex.wordpress.org/The_Loop](http://codex.wordpress.org/The_Loop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:56:40.937

有关 get_post 的更多详细信息，请单击此链接 - [http://codex.wordpress.org/Function_Reference/get_post](http://codex.wordpress.org/Function_Reference/get_post)

```
$my_id = 297;
$post_id_7 = get_post($my_id);
$title_7 = $post_id_7->post_title;
echo $title_7;
$content_7 = $post_id_7->post_content;
echo $content_7; 
```

# java - 休眠 BeanCreationException

> ID：13413102
> 
> 赞同：0
> 
> 时间：2012-11-16T08:43:20.610
> 
> 标签：java, spring, hibernate

我正在尝试在我的 Spring 应用程序中使用 Hibernate，但我在项目的部署中遇到了错误

```
Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Initialization of bean failed; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert property value of type 'java.lang.String' to required type 'java.lang.Class' for property 'configurationClass'; nested exception is java.lang.IllegalArgumentException: Cannot find class [org.hibernate.cfg.AnnotationConfiguration]. 
```

这是我的调度程序-servlet 与 bean 会话工厂：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
  default-autowire="byName">

<context:component-scan base-package="hibernateTest" />

<context:annotation-config/>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
      p:prefix="/WEB-INF/jsp/" 
      p:suffix=".jsp" />

<bean id="propertyConfigurer" 
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
        </list>
    </property>
</bean> 

 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
</bean>

 <bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

还有我的 hibernate-cfg.xml ：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <mapping class="hibernateTest.web.InventoryController" />
</session-factory>     
</hibernate-configuration> 
```

我的类路径中有很多罐子，我认为它不会错过任何人。你能帮我找出一个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:55:46.947

您需要将 hibernate-annotations.jar 放在类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:55:08.683

找不到类 [org.hibernate.cfg.AnnotationConfiguration]

这就是原因，你能在类路径中检查这个类吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:01:10.977

`org.hibernate.cfg.AnnotationConfiguration`已弃用，

并且其所有功能都已移至`org.hibernate.cfg.Configuration`.

更改您的代码

```
 <property name="configurationClass">
            <value>org.hibernate.cfg.Configuration</value>
        </property> 
```

# drools - 流口水 guvnor 上传 POJO 模型 jar

> ID：13413105
> 
> 赞同：2
> 
> 时间：2012-11-16T08:43:26.137
> 
> 标签：drools, guvnor

我喜欢使用 REST API 用我的 java 代码创建包 POJO 模型资产。使用 Apache HttpClient 创建包很好，但是我在创建模型资产时遇到问题，现在我通过放置以下内容来创建“其他资产，文档”

```
<entry xml:base="http://localhost:9080/repository/packages/package1/assets">
<title>testAsset1</title>
<summary>desc1</summary>
</entry>" 
```

我如何使它成为模型资产？我尝试添加格式标签但失败了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:50:55.207

我认为您可以使用 REST API 来上传内容。向 URL 发送 PUT 请求，例如

```
http://{server}/guvnor/rest/packages/{package name}/assets/{asset name}/source 
```

其中资产名称是模型资产的名称。不确定 mime 类型应该是什么，快速谷歌搜索给出了“application/java-archive”

有关更多信息，请参阅[Guvnor REST API 文档](http://docs.jboss.org/drools/release/5.5.0.Final/drools-guvnor-docs/html/ch09.html#d0e3500)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T04:20:37.337

您需要将以下代码添加到 PackageResource.java 中的 createAssetFromBinary 方法

```
ContentHandler handler = ContentManager.getHandler( ai.getFormat() );
   if ( handler instanceof ICanHasAttachment ) {
       ((ICanHasAttachment) handler).onAttachmentAdded( ai );
   } 
```

您还可以探索使用独立编辑器来创建将直接存储在 guvnor 存储库中的模型和事实。

# c# - 使用 msbuild.exe 构建 C# 项目不会覆盖项目目标平台配置？

> ID：13413106
> 
> 赞同：1
> 
> 时间：2012-11-16T08:43:27.477
> 
> 标签：c#, msbuild, x86, 64-bit, platform

我有 ac# 项目，在解决方案中，平台目标是 AnyCPU。虽然我有一个构建程序，它将每天构建这个解决方案并且它使用 msbuild.exe。该命令喜欢：

MSBuild D:\my.sln /p:Configuration=Release /p:Platform=x86 /t:rebuild ....

这里我指定编译平台应该是x86。

我认为，msbuild.exe 应该覆盖解决方案配置，并且输出应该是 x86 exe 而不是任何 CPU 类型。

我在这个项目中尝试了这些代码：

```
 PortableExecutableKinds peKind;
        ImageFileMachine machine;

        Assembly.GetExecutingAssembly().ManifestModule.GetPEKind(out peKind, out machine); 
```

测试结果显示，exe是AnyCPU模式（ILOnly），不是预期的。在这种情况下，我怎么知道我的程序是通过 x86 还是 x64 编译的，通过代码？

谢谢。李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:53:28.653

我不喜欢构建 .sln 文件，而是使用带有 msbuild.exe 的小构建脚本

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Deploy" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<Target Name="BuildProjects" >

    <ItemGroup>      
        <BuildProjectsInputFiles Include="**\MainProject\*.??proj" />
        <BuildProjectsInputFiles Include="**\AnotherProject\*.??proj" />
    </ItemGroup>

    <MSBuild Projects="@(BuildProjectsInputFiles)" Properties="Configuration=$(Configuration);OutputPath=$(MSBuildProjectDirectory)\Deploy\bin\%(BuildProjectsInputFiles.FileName)">
        <Output TaskParameter="TargetOutputs"
                ItemName="BuildProjectsOutputFiles" />
    </MSBuild>

</Target>

</Project> 
```

Now I use msbuild with this call

```
msbuild.exe build.xml /p:OutputPath=bin\Debug;Configuration=Release;Platform=x86 /target:BuildProjects 
```

And that works

# python - 创建线出现在matplotlib图中的标签

> ID：13413112
> 
> 赞同：70
> 
> 时间：2012-11-16T08:43:51.237
> 
> 标签：python, matplotlib, labels

我有一个在 matplotlib （时间序列数据）中创建的图形，上面有一系列

```
matplotlib.pyplot.axvline 
```

线。我想在靠近这些垂直线的图上创建标签（可能在线的 RHS 和图的顶部）。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-16T14:14:34.487

你可以使用类似的东西

```
plt.axvline(10)
plt.text(10.1,0,'blah',rotation=90) 
```

您可能必须使用 x 和 y 值`text`才能使其正确对齐。[您可以在此处](http://matplotlib.org/users/text_props.html)找到更完整的文档。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-06-14T19:53:46.357

无需手动放置的解决方案是使用“混合转换”。

[变换](https://matplotlib.org/3.1.0/tutorials/advanced/transforms_tutorial.html)将坐标从一个坐标系转换到另一个坐标系。通过`transform`参数 of指定变换[`text`](https://matplotlib.org/3.1.0/api/_as_gen/matplotlib.pyplot.text.html)，可以给出轴坐标系中文本的`x`和`y`坐标（从 x/y 轴的左到右/从上到下分别从 0 到 1）。通过[混合变换](https://matplotlib.org/3.1.0/tutorials/advanced/transforms_tutorial.html#blended-transformations)，您可以使用混合坐标系。

这正是您所需要的：您拥有数据给出的 x 坐标，并且您希望将文本放置在 y 轴上相对于轴的某个位置，例如在中心。执行此操作的代码如下所示：

```
import matplotlib.transforms as transforms
import matplotlib.pyplot as plt

fig, ax = plt.subplots()

# the x coords of this transformation are data, and the
# y coord are axes
trans = ax.get_xaxis_transform()

x = 10
ax.axvline(x)
plt.text(x, .5, 'hello', transform=trans)

plt.show() 
```

# c# - 从另一个用户控件访问用户控件的方法

> ID：13413114
> 
> 赞同：0
> 
> 时间：2012-11-16T08:44:00.893
> 
> 标签：c#, winforms, user-controls

在我的表单上，我有 2 个继承 FadeControl 的用户控件（ButtonDiscount、ButtonAdvertisment）。FadeControl 继承 UserControl 类并用于对控件执行自定义操作，例如淡出。

我的 2 个用户控件每个都只有一个按钮，因此这两个名字没有想象力。

单击其中一个用户控件上的该按钮时，我需要从另一个用户控件访问 FadeControl 中的方法。另一个按钮则相反。

我已经完成了以下操作，点击 UserControl ButtonDiscount 中的事件：

```
private void button1_Click(object sender, EventArgs e)
{
    ButtonAdvertisment ba = (ButtonAdvertisment)this.Parent.Controls.Find("buttonAdvertisment1", true)[0];
    ba.FadeOut(true);
} 
```

它就像一个魅力，但我不认为这是正确的方法，是否有另一种方法可以从另一个 UserControl 的父类访问该方法？

我不能通过 UserControl 构造函数传递它，设计者每次都会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:54:43.817

您有 2 个独立的用户控件，它们彼此不知道，这很好，并且可以使您的代码保持松散耦合。现在你要做的是让他们以某种方式了解彼此并进行交流。让它们相互了解会破坏松散耦合，这是一个糟糕的设计。

我建议创建第三个控件，它将两者结合在一起并处理它们之间的所有通信。您的每个原始控件都将具有公共事件，父控件可以订阅和适当地处理这些事件。

检查中介模式以获取更多信息：[http ://en.wikipedia.org/wiki/Mediator_pattern](http://en.wikipedia.org/wiki/Mediator_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:55:11.833

您所做的很好 - 您可以通过公开单击这些控件中的按钮时触发的事件，然后相互传递引用（订阅这些，编写代码以淡化“this”控件）来做到这一点。

然而，对于一个简单的解决方案来说，这可能有点太多了。

关于您的解决方案，我想说的是，如果您要更改控件的名称，那么它就会停止工作。你可以改为：

```
var ba = this.Parent.Controls.OfType<ButtonAdvertisement>().FirstOrDefault(); 
```

这样，您就不再与控件名称相关联，而是与控件的类型相关联。你需要`using System.Linq;`在你的代码文件中使用它才能工作。当然，这依赖于这样一个事实，即父控件中只有一个该控件类型的其他实例。

如果您对我提到的第一个解决方案感兴趣 - 那么这个代码片段应该有助于演示：

```
public class FadeControl {
  public event EventHandler Clicked;

  public void FadeOut(bool b){

  }

  public void AttachTo(FadeControl other){
    //splitting this operation to a public and private allows us to 
    //initiate an attach publicly, but then recurse privately without 
    //causing a stack overflow
    AttachToInternal(other);
    other.AttachToInternal(this);
  }

  private void AttachToInternal(FadeControl other){
    other.Clicked += Attached_Clicked;
  }

  protected virtual void Attached_Clicked(object sender, EventArgs e)
  {
    //fade me out
    FadeOut(true);
  }

  // provides a way for the deriving class to raise the Clicked event
  protected void OnButtonClicked(){
    if(Clicked != null) Clicked(this, null);
  }
}

public class ButtonDiscount : FadeControl {
  Button _button;

  //omitted: designer code

  //this is your handler for the _button clicked event 

  private void _button_Clicked(object sender, EventArgs e){
    //call the base class' OnButtonClicked method - to raise the event
    OnButtonClicked();
    //TODO: do work.
  }
}

//omitted - code for the ButtonAdvertisement class 
```

一旦你完成了——在你的表单中，假设你的表单中有成员并且`_buttonAdvertisement`在*它们*被初始化之后——你只需执行以下操作：`_buttonDiscount`

 *```
_buttonAdvertisement.AttachTo(_buttonDiscount); 
```

这将立即将两个控件相互绑定。

注意 - 回应下面的评论 - 我已经`FadeControl`为另一个 FadeControl 的`Clicked`事件创建了事件处理程序，并且是受保护的和虚拟的 - 所以你可以覆盖它。*

# java - 通过eclipse插件执行ant Target

> ID：13413115
> 
> 赞同：2
> 
> 时间：2012-11-16T08:44:05.380
> 
> 标签：java, ant, eclipse-plugin

```
package testrunner.popup.actions;

import java.io.File;
import org.apache.tools.ant.BuildException;
import org.apache.tools.ant.Project;
import org.apache.tools.ant.ProjectHelper;
import org.apache.tools.ant.types.Path;
import org.eclipse.ui.console.ConsolePlugin;
import org.eclipse.ui.console.IConsole;
import org.eclipse.ui.console.IConsoleManager;
import org.eclipse.ui.console.MessageConsole;
import org.eclipse.ui.console.MessageConsoleStream;

public class AntExecuter {

    public boolean executeAntTask(String buildXmlFileFullPath,String className,String methodName,String mode) {

        System.getProperty("ANT_HOME");

        boolean success = false;

        MessageConsole myConsole = findConsole("Scenario Test");
        MessageConsoleStream out = myConsole.newMessageStream();

        MyLogger myLogger = new MyLogger();
        myLogger.setErrorPrintStream(System.err);
        myLogger.setOutputPrintStream(System.out);
        myLogger.setMessageOutputLevel(Project.MSG_INFO);

        Project project = new Project();
        File buildFile = new File(buildXmlFileFullPath);

        project.setUserProperty("ant.file", buildFile.getAbsolutePath());
        project.addBuildListener(myLogger);

        try {
            project.fireBuildStarted();
            project.init();
            ProjectHelper projectHelper = ProjectHelper.getProjectHelper();
            project.addReference("ant.projectHelper", projectHelper);

            projectHelper.parse(project, buildFile);
            project.setNewProperty("test", className.trim());
            if (!(methodName.equals(""))) {
                project.setNewProperty("method", methodName.trim());
            }
            if ("debug".equals(mode)) {
                project.setNewProperty("debug", "true");
            }   

            project.executeTarget("test");
            project.fireBuildFinished(null);
            project.getBuildListeners();
            out.println("------------- Start Run Test Case -------------");
            out.println( MyLogger.completeMessage);
            out.println("-------------  End Run Test Case  -------------");

            success = true;
        } catch (BuildException buildException) {
            project.fireBuildFinished(buildException);
        }

        return success;
    }

    private MessageConsole findConsole(String name) {
        ConsolePlugin plugin = ConsolePlugin.getDefault();
        IConsoleManager conMan = plugin.getConsoleManager();
        IConsole[] existing = conMan.getConsoles();
        for (int i = 0; i < existing.length; i++)
            if (name.equals(existing[i].getName()))
                return (MessageConsole) existing[i];
        MessageConsole myConsole = new MessageConsole(name, null);
        conMan.addConsoles(new IConsole[] { myConsole });
        return myConsole;
    }

} 
```

我使用上面的代码在给定的 build.xml 中运行 ant 目标。这个构建 xml 使用 ant-contrib-1.0b1.jar 中的一些任务。

projectHelper.parse(project, buildFile);

此解析方法返回以下异常

构建失败/home/sg40304/Projects/modularization/modules/core/system-testing/build.xml:19：执行此行时发生以下错误：/home/sg40304/Projects/modularization/project-properties.xml:183 ：执行此行时发生以下错误：/home/sg40304/Projects/modularization/project-deps.xml:17：执行此行时发生以下错误：/home/sg40304/Tools/build-tools/build/deps .xml:18：无法在 ${ant.home}/lib 中找到 ant-contrib（1.0b2 或更高版本）。ant-contrib 可从[http://ant-contrib.sourceforge.net/获得](http://ant-contrib.sourceforge.net/)

谁能帮我解决这个问题;(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:52:11.247

在机器中安装 ant-contrib。

教程在下面的链接中给出

[http://ant-contrib.sourceforge.net/](http://ant-contrib.sourceforge.net/)

# php - 将列表分成三列

> ID：13413122
> 
> 赞同：2
> 
> 时间：2012-11-16T08:44:39.953
> 
> 标签：php, mysql, list, loops, divide

我有要从数据库中获取的值列表。列表可能很长，所以如果它有超过 15 个项目，我想分成两列，如果超过 30 个，我想分成三列。我怎样才能把它分成 3 列。例如..

> 01 | 12 | 23
> 
> 02 | 13 | 24
> 
> 03 | 14 | 25
> 
> 04 | 15 | 26
> 
> 05 | 16 | 27
> 
> 06 | 17 | 28
> 
> 07 | 18 | 29
> 
> 08 | 19 | 30
> 
> 09 | 20 | 31
> 
> 10 | 21 |
> 
> 11 | 22 |

现在我正在使用表格，它在每个循环的开头都有巨大的 if-nest

```
 $result = mysql_query("SELECT namecount FROM table WHERE name='$myvar'");

        if (!$result)
            echo 'MySQL Error: ' . mysql_error();
        else
        {
            while ($row = mysql_fetch_array($result))
            {
                $namecount= $row['namecount'];
                for($i=1;$i<=$namecount;$i++)
                {
                    if($namecount>15)
                    {
                        if($i==1)
                            echo "\n<table><tr><td width=\"200px\">";

                        if($namecount%2==0)
                        {
                            if($i==$namecount/2)
                                echo "</td>\n<td>"; 
                        }
                        else
                        {
                            if($i==($sailiot+3)/2)
                                echo "</td>\n<td>";
                        }
                    }

                //Print content here

                if($namecount>15)
                    {
                        if($namecount%2!=0 && $i==$namecount)
                            echo "<h3>&nbsp;</h3><p>&nbsp;<br>&nbsp;</p>"; //if last item and count is odd, print empty item

                        if($i==$namecount)
                            echo "\n</td></tr></table>\n";                  
                    }
                }
            }
        } 
```

这（有点）适用于两列，但是三列呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:49:36.430

我会`<tr>, </tr>`从内部循环中提取出来，这样可以节省额外`if`的 s。对于拆分为多个列，您可以计算列中的项目数并引入第二个列内变量以跟踪：

```
while ($row = mysql_fetch_array($result)) {
    $namecount = $row['namecount'];

    // calculate items per column
    $columns = 1;
    if ($namecount > 15)
        $columns = 2;

    if ($namecount > 30)
        $columns = 3;

    $items = $namecount / $columns;
    if ($namecount % $columns > 0)
        ++$items;

    echo "\n<table><tr><td width=\"200px\">";
    for ($i = 1, $j = 1; $i <= $namecount; $i++, $j++) {
        if ($j > $items) {
            echo "</td>\n<td>";
            $j = 1; // reset for new column
        }

        // Print content here
    }

    if ($namecount % 2 != 0) {
         // if count is odd, print empty item
        echo "<h3>&nbsp;</h3><p>&nbsp;<br>&nbsp;</p>";
    }

    echo "\n</td></tr></table>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:52:27.920

使用[css3 多列属性](http://www.w3schools.com/css3/css3_multiple_columns.asp)

```
<style>
.namecount {
  -moz-column-count:3; /* Firefox */
  -webkit-column-count:3; /* Safari and Chrome */
  column-count:3;
}
</style>

<div class="namecount">
Long Text
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:10:33.023

你也许可以试试这个

```
 $result = mysql_query("SELECT namecount FROM table WHERE name='$myvar'");

    if (!$result)
        echo 'MySQL Error: ' . mysql_error();
    else
    {
        while ($row = mysql_fetch_array($result))
        {
         $namecount= $row['namecount'];

      for($i=1;$i<=$namecount;$i++)
            {
              if($namecount<=15){
                echo "<table><thead><tr><th>".$your_variable_data."</th></tr></thead>";}
   else if ($namecount >15 and $namecount <=30){
     echo "<thead><tr><th>".$your_variable_data."</th></tr></thead></table>";

       }
          }
       } 
```

它未经测试，但如果你想要更多，它应该适用于 3 列，只需添加 else if 。这里有一个演示它会如何 [http://jsfiddle.net/TCJjj/107/](http://jsfiddle.net/TCJjj/107/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T11:12:15.730

我发现 CSS3 多列在浏览器之间非常不一致，并且非常有问题（带有`float:left`,`white-space:nowrap`等的元素会导致它中断）。

所以我写了以下保留键=>值对的蛮力整理器。

```
// vars

    $list = array('a','b','c','d','e','f','g','h','i','j','k','l','m',
                    'n','o','p','q','r','s','t','u','v','w','x','y','z');
    $columns = 3;

// sort it

    $count = count($list);
    $base = ceil($count/$columns);

    $keys = array_keys($list);
    for ($i=0;$i<$columns;$i++) {
        for ($j=0;$j<$base;$j++) {
            if (!empty($keys)) {
                $col[$i][] = array_shift( $keys );
            }
        }
    }

    $sorted = array();
    for ($j=0;$j<$base;$j++) {
        for ($i=0;$i<$columns;$i++) {
            if (isset($col[$i][$j])) {
                $sorted[$col[$i][$j]] = $list[$col[$i][$j]];
            }
        }
    }

// check output

    echo '<div style="float:left;margin-right:20px"><h3>ORIGINAL</h3>';
    foreach ($list as $k=>$v) echo $k .' = '. $v.'<br>';
    echo '</div>';

    echo '<div style="float:left"><h3>SORTED</h3>';
    foreach ($sorted as $k=>$v) echo $k .' = '. $v .'<br>';
    echo '</div>'; 
```

# android - 以编程方式阻止 Android 设备的硬件访问

> ID：13413123
> 
> 赞同：0
> 
> 时间：2012-11-16T08:44:41.247
> 
> 标签：android, bluetooth, android-camera, android-wifi, android-hardware

我必须编写一个可以用作“设备硬件管理员”的应用程序。用户应该能够根据自己的喜好启用或禁用硬件的任何功能。我在下面添加应用程序 UI 的屏幕截图：

![应用程序界面](../Images/e67a5612fb2c108cd27df41704979b50.png)

这些设置存储在应用程序的本地数据库中。我设法做的如下：

第 1 步：我已经注册了广播接收器来检测所有这些动作。

```
<receiver android:name=".HardwareActionListener" >
    <intent-filter>
        <action android:name="android.intent.action.CAMERA_BUTTON" >
        </action>

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.media.action.STILL_IMAGE_CAMERA" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.hardware.action.NEW_PICTURE" >
        </action>
    </intent-filter>
    <intent-filter>
        <action android:name="android.media.action.IMAGE_CAPTURE" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.UMS_CONNECTED" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.UMS_DISCONNECTED" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.bluetooth.adapter.action.STATE_CHANGED" >
        </action>
    </intent-filter>
    <intent-filter>
        <action android:name="android.net.wifi.WIFI_STATE_CHANGED" >
        </action>
    </intent-filter>
    <intent-filter>
        <action android:name="android.net.wifi.WIFI_STATE_CHANGED_ACTION" >
        </action>
    </intent-filter>
    <intent-filter>
        <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />

            <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
    </intent-filter>
</receiver> 
```

我正在正确接收 Wifi 和蓝牙的广播。我没有收到有关相机动作或 USB 连接和断开的广播。

**问题 1**：我用于相机和 USB 检测的意图过滤器有什么问题吗？

第 2 步：我想阻止用户使用这些硬件。通过检测接收器类的 onReceive() 方法中的操作，我设法在用户启动蓝牙或 wifi 后禁用它。

```
if (intent.getAction().equalsIgnoreCase(
                "android.bluetooth.adapter.action.STATE_CHANGED")) {

    int extraBTState = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE,
                    BluetoothAdapter.ERROR);
    switch (extraBTState) {
        case BluetoothAdapter.STATE_CONNECTING:
            BluetoothAdapter mBluetoothAdapter = BluetoothAdapter
                        .getDefaultAdapter();
            mBluetoothAdapter.disable();
        break;
        case BluetoothAdapter.STATE_ON:

            BluetoothAdapter mBluetoothAdapter1 = BluetoothAdapter
                        .getDefaultAdapter();
            mBluetoothAdapter1.disable();
        break;
        case BluetoothAdapter.STATE_CONNECTED:

            BluetoothAdapter mBluetoothAdapter2 = BluetoothAdapter
                        .getDefaultAdapter();
            mBluetoothAdapter2.disable();
        break;
        case BluetoothAdapter.STATE_OFF:
            Toast.makeText(context, "Bluetooth access not allowed",
                        Toast.LENGTH_SHORT).show();
        break;
    }

} else if (intent.getAction().equalsIgnoreCase(
                "android.net.wifi.WIFI_STATE_CHANGED")) {
    int extraWifiState = intent.getIntExtra(
                    WifiManager.EXTRA_WIFI_STATE,
                    WifiManager.WIFI_STATE_UNKNOWN);
    switch (extraWifiState) {
        case WifiManager.WIFI_STATE_DISABLED:
            Toast.makeText(context, "Wifi enabling not allowed",
                        Toast.LENGTH_SHORT).show();
        break;

        case WifiManager.WIFI_STATE_ENABLED:

            WifiManager wifiManager1 = (WifiManager) context
                        .getSystemService(Context.WIFI_SERVICE);
            wifiManager1.setWifiEnabled(false);
        break;
        case WifiManager.WIFI_STATE_ENABLING:

            WifiManager wifiManager2 = (WifiManager) context
                        .getSystemService(Context.WIFI_SERVICE);
            wifiManager2.setWifiEnabled(false);
        break;

    }

} 
```

因此，它会检测到蓝牙或 WiFi 已打开或连接，并以编程方式将其关闭或断开连接。

但要求是用户根本不能启动蓝牙或 WiFi。这意味着禁用WiFi和蓝牙的按钮。

**问题2**：这可能吗？

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T06:05:17.710

相关 API 可用于 android-14 及更高版本：http: [//developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setCameraDisabled](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setCameraDisabled(android.content.ComponentName) (android.content.ComponentName , boolean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:31:01.663

> 我用于相机和 USB 检测的意图过滤器有什么问题吗？

是的。例如：

*   `<category>`通常不用于广播，绝对不是该`LAUNCHER`类别
*   `android.media.action.STILL_IMAGE_CAMERA`过滤器中的其他内容是活动操作，而不是广播操作

> 问题2：这可能吗？

从 SDK 应用程序，没有。欢迎您将源代码下载到 Android，对其进行修改以满足您的需要，从中编译和构建一个 ROM 模块，然后在任何设备上安装该 ROM 模块。

# android - 如何Proguard两个android项目？

> ID：13413124
> 
> 赞同：6
> 
> 时间：2012-11-16T08:44:42.937
> 
> 标签：android, proguard, jsr

我在Andriod系统中基于java A和B开发了两个项目，项目A中的代码依赖于项目B中的代码，项目B中的代码也依赖于项目A中的代码。我可以使用Proguard混淆A而不是混淆B ，A和B也能很好地工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:07:43.190

为了防止 B 被混淆，请包括以下内容：

```
-keep class com.projectB.package.** { *; } 
```

对于项目 B 中的所有包。这在使用这些文件的任何项目的 proguard.cfg 中。当 proguard 运行时，它将知道不混淆 B 中的任何内容，并且项目 A 将被混淆。

# c# - XML 占据一个元素的位置，并在下次使用时直接去那里

> ID：13413126
> 
> 赞同：4
> 
> 时间：2012-11-16T08:44:51.477
> 
> 标签：c#, xml, wikipedia

所以我有一个巨大的 XML 文件（维基百科转储 xml）。

我的学校项目要求说我应该能够对这个 xml 文件进行非常快速的搜索（所以不，不要将它导入 sql 数据库）

所以我当然想创建一个索引器，它将显示在一个单独的文件（可能是 xml）中，如下所示：[要搜索的内容]：[包含内容的 xml 节点开头的字节偏移量]

我的问题是如何获取元素的位置，如果搜索需要，我如何跳转到 xml 中的该位置？

该项目使用 C#。先感谢您。

稍后编辑：我正在尝试使用 XmlReader，但我愿意接受任何其他建议。

目前，这就是我为非索引搜索读取 XML 的方式

```
XmlReader reader = XmlReader.Create(FileName);

while (reader.Read())
{
    switch (reader.Name)
    {
        case "page":

            Boolean found = false;
            String title = "";
            String element = "<details>";
            readMore(reader, "title");
            title = reader.Value;

            if (title.Contains(word))
            {
                found = true;
            }
            readMore(reader, "text");
            String content = reader.Value;
            if (content.Contains(word) & !found)
            {
                found = true;
            }
            if (found)
            {
                element += "<summary>" + title + " (click)</summary>";
                element += content;
                element += "</details>";
                result.Add(element);
            }

            break;
    }
}
reader.Close();
if (result.Count == 0)
{
    result.Add("No results were found");
}
return result;

…

static void readMore(XmlReader reader, String name)
{
    while (reader.Name != name)
    {
        reader.Read();
    }
    reader.Read();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:10:01.283

正确的解决方案是使用中间二进制格式；但是如果你不能这样做，并且假设你使用 DOM，我看不到任何解决方案，只能将节点在 DOM 树中的位置存储为索引列表。

JavaScript 中的示例（在 C# 中应该几乎相同）：

```
function getPosition(node) {
  var pos = [], i = 0;
  while (node != document.documentElement) {
    if (node.previousSibling) {
      ++i;
      node = node.previousSibling;
    } else {
      pos.unshift(i);
      i = 0;
      node = node.parentNode;
    }
  }

  return pos;
}

function getNode(pos) {
  var node = document.documentElement;
  for (var i = 0; i < pos.length; ++i) {
    node = node.childNodes[pos[i]];
  }

  return node;
} 
```

# ios - 如果行数据与前一行匹配，则对 UITableView 中的行进行编号并复制行号

> ID：13413127
> 
> 赞同：0
> 
> 时间：2012-11-16T08:44:52.277
> 
> 标签：ios, uitableview

已经在这个（初学者）问题上停留了一段时间，所以现在寻求帮助:)

在我的`UITableView`中，我展示了一个表格，其中的行包含：1) 行 #、2) 一个人的姓名和 3) 他们的分数。

它看起来像这样：

```
1\. David     100
2\. Arron     92
3\. Cindy     90
4\. Gina      85
5\. Harry     85
6\. Daniel    82
... 
```

我在我的 UITableView 中使用此代码生成此代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:@"PersonCell"];

    cell.textLabel.text = [NSString stringWithFormat:@"%d. %@", indexPath.row+1,[topPersons objectAtIndex:indexPath.row]];
    cell.detailTextLabel.text = [[topPersonsScore objectAtIndex:indexPath.row] stringValue];

    return cell;
} 
```

但是，我试图通过复制行#s来解释并列分数，例如：

```
1\. David     100
2\. Arron     92
3\. Cindy     90
4T. Gina     85
4T. Harry    85
6\. Daniel    82
... 
```

所以吉娜和哈利现在并列第四而不是第四和第五，即使他们的分数相同。

这是我可以在`cellForRowtIndexPath`方法中做的事情吗？或者我应该在另一种方法中执行此操作，更新我`topPersons` `NSMutableArray`的行#/排名作为人名的一部分？

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:56:31.947

对于这种类型的逻辑，我不会滥用单元格视图或表格视图。我宁愿用另一种方法计算排名并将排名添加到 topPerson 的对象。

cellForRowAtIndexPath 没有按任何特定顺序调用。也不是以任何特定顺序调用单元视图的任何方法。这使得执行这样的计算变得困难。

您当然可以确定 (indexPath.row-1)th topPersons 对象是否具有相同的值，在这种情况下确定 (indexPath.row-2)th topPersons 对象是否也具有相同的值，在这种情况下确定是否(indexPath.row.2)th topPersons ...等等。但我不建议这样做。

# android - 如果活动是“singleTask”，如何获得额外的意图？

> ID：13413128
> 
> 赞同：33
> 
> 时间：2012-11-16T08:44:52.873
> 
> 标签：android, android-intent, android-activity

我有一个活动，它是一个单任务：

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        System.out.printf("### MyAcitvity.onCreate: " + getIntent().getExtras());
    }

    @Override
    protected void onResume() {
        super.onResume();
        System.out.println("### MyActivity.onResume: " + getIntent().getExtras());
    }

    public void toNext(View v) {
        startActivity(new Intent(this, AaaActivity.class));
    }
} 
```

和：

```
<activity android:name=".MyActivity" android:launchMode="singleTask" /> 
```

不，它已经启动，它启动了另一个名为`AaaActivity`.

```
public class AaaActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aaa);
    }

    public void jumpToFirst(View v) {
        Intent intent = new Intent(this, MyActivity.class);
        intent.putExtra("aaa","bbb");
        startActivity(intent);
    }

} 
```

在后一个中，有一个按钮将触发`jumpToFirst`方法启动第一个，并传递一个数据对`aaa=bbb`。由于`MyActivity`is `singleTask`，它不会创建一个新实例，而是会返回到现有`MyActivity`实例。

我的问题是：如何从`AaaActivity`in获取传递的额外数据`MyActivity`？

你可以看到我已经记录`onCreate`和`onResume`方法，但它打印空额外数据。

```
11-16 08:44:17.833: INFO/System.out(5171): ### MyAcitvity.onCreate: null
11-16 08:44:19.417: INFO/System.out(5171): ### MyActivity.onResume: null
11-16 08:44:26.041: INFO/System.out(5171): ### MyActivity.onResume: null
11-16 08:44:28.897: INFO/System.out(5171): ### MyActivity.onResume: null 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-11-16T08:51:52.917

尝试将您的*launchMode*类型设置`MyActivity`为**singleTop**，然后覆盖以下方法以查找新意图：

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    setIntent(intent);
    //now getIntent() should always return the last received intent
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T14:04:53.857

如果您必须有单个任务，请根据您的意图使用这些标志：

```
 resultIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

如果您也使用 PendingIntent ： PendingIntent.FLAG_CANCEL_CURRENT ：

```
pIntent = PendingIntent.getActivity(context, 0, resultIntent, PendingIntent.FLAG_CANCEL_CURRENT ); 
```

（也可以`onNewIntent`在你的活动中使用来处理额外的东西。）

# vb.net - 如何在 Visual Basic 中将文本框中的字符串检查为整数？

> ID：13413142
> 
> 赞同：3
> 
> 时间：2012-11-16T08:45:56.690
> 
> 标签：vb.net, string, textbox

我有 3 个文本框（日、月、年），我想检查输入是否是例如日必须从 1 到 31 等等。

我的代码是：

```
If InputDan.Text < "1" Or InputDan > "31" Then Warning.Text = "Not a valid day input." Else Warning.Text = "" 
```

此外，我将日期和月份输入限制为 2 个字符，年份限制为 4。它适用于从 10 到 31 的数字，并且当输入为 0 或 32 及以上时，它会正确发出警告消息。

这就是问题所在...

当我输入从 4 到 9 的数字时，它会显示一条警告消息，正如我后来发现的那样，程序将一个字符输入后的空白区域视为 0。因此，如果我输入 4，程序会将其读取为 40，依此类推。

我可以通过某种方式将 String 输入转换为 Int 来解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:59:59.530

您需要先将数字解析为整数，然后才能比较它们，否则`>"11"`将按字母顺序而不是按数字顺序进行比较。

```
Dim day As Integer
Dim valid As Boolean = Int32.TryParse(InputDan.Text, day) 
```

现在您知道该输入是否是正确的数字，如果不是，您可以显示警告。

我会建议一种不同的方法来检查输入是否是正确的日期，因为您必须考虑该月的天数（还有闰年、不同的日历等）。因此，使用当前[文化的日历](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.calendar.aspx)并以这种方式查看给定月份的天数是否正确：

```
Dim daysInMonth = CultureInfo.CurrentCulture.Calendar.GetDaysInMonth(year, month)
If day > daysInMonth OrElse day < 1 Then
    ' show warning '
End If 
```

（假设您已经检查了年份和月份部分`Int32.TryParse`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:52:48.830

比从后面的代码中执行此操作更好，asp.net 已经验证了这里是一个表示日期的文本框示例，它必须在 1 到 31 之间：

```
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>

<asp:RangeValidator ID="RangeValidator1" runat="server" 
    ErrorMessage="You have to insert a valid day" ControlToValidate="TextBox2" MaximumValue="31" MinimumValue="1"></asp:RangeValidator> 
```

看看这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:57:53.037

您的问题是，“9”（字符串）“大于”“31”。因为排序是在第一个字符上完成的，然后是第二个，依此类推。

```
 Dim Value As Integer
    ' is there an (integer) NUMBER in the textbox?
    If Integer.TryParse(InputDan.Text, Value) Then
        If Value > 0 AndAlso Value < 31 Then
            ' do something
        Else
            MessageBox.Show("please enter a number!")
        End If
    Else
        MessageBox.Show("please enter a number!")
    End If 
```

使用“TryParse”，您可以测试是否可以将 String 转换为 Integer（或 Double、Single，无论实现 TryParse 方法），如果可以转换，则将值存储在第二个参数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:32:31.073

您应该使用 Strict on" 来避免编码问题 - 基本上您是在将字符串相互比较。它们的行为不像整数进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T10:28:04.880

试试这样：（假设框架高于/或 3.5）

```
If Not IsNumeric(InputDan.Text) OrElse _
   Not Enumerable.Range(1, 31).Contains(CInt(InputDan.Text)) Then
    Warning.Text = "Not a valid day input."
Else
    Warning.Text = ""
End If 
```

它将首先验证输入必须是一个数字，然后验证它是否在 1 到 31 的范围内。我认为 Days 不能，`1.5`所以我称之为`CInt`。

`OrElse`就是我们所说`ShortCircuit`的。如果第一个条件失败，第二个条件将不会评估。

# asp.net - ASP.NET 2008 Express 不支持 CREATE TABLE SQL 构造或语句

> ID：13413145
> 
> 赞同：3
> 
> 时间：2012-11-16T08:46:08.340
> 
> 标签：asp.net, sql-server, sql-server-2008

使用 MS Visual Web Developer 2008 尝试将简单的 SQL 运行到查询中以创建表：

```
CREATE TABLE [dbo].[Category](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](max) NOT NULL,
    [ParentID] [int] NULL,
 CONSTRAINT [PK_Category] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

执行此查询后，我在消息窗口中收到以下错误：

```
The CREATE TABLE SQL construct or statement is not supported ASP.NET 
```

但是，表已创建。

你能帮我为什么会出现这个错误，以及为什么之后会创建表吗？

类似的错误信息显示在`ALTER`语句中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:02:42.877

一个快速的谷歌搜索产生了以下链接：

[http://forums.codeguru.com/showthread.php?428733-Create-Table-Visual-Studio-SQL-Compact-Vista](http://forums.codeguru.com/showthread.php?428733-Create-Table-Visual-Studio-SQL-Compact-Vista)

根据该线程，错误的最可能原因是您发出的语句无法以图形方式表示，但这不会阻止创建表。

# javascript - jquery多部分表单提交预防

> ID：13413149
> 
> 赞同：0
> 
> 时间：2012-11-16T08:46:32.907
> 
> 标签：javascript, jquery

jquery 表单提交预防使用`e.preventDefault()`在多部分表单提交中不起作用（当我使用 ajax 提交时）。有什么办法可以解决吗？

代码

```
$('.imgChange').submit( function(e){
    load('do_upload.php',$(this).serialize());
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:53:44.503

这也适用于多部分形式

HTML

```
<form id="form-id" action="/UploadFile" enctype="multipart/form-data" method="post">
    <input type="submit" value="Submit" />
</form> 
```

jQuery

```
$('#form-id').submit( function(e){
    e.preventDefault();
    alert('submit prevented');
    // rest of the code here
}); 
```

只要您没有其他任何东西像 an 那样覆盖它`onsubmit`，就没有理由`.preventDefault()`不处理多部分表单

这是一个[jsbin](http://jsbin.com/ifaqir/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:55:40.203

使用普通的 jQuery 库，不可能使用 ajax 发送多部分表单。还有许多其他插件。

我推荐[jQuery 表单插件](http://malsup.com/jquery/form/)

这是非常容易使用。只有你需要做的是在 jQuery 之后导入那个插件

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script> 
```

然后使用

```
$(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('#myForm').ajaxForm(function() { 
            alert("Thank you for your comment!"); 
        }); 
    }); 
```

# javascript - 在不使用 Google 帐户登录的情况下使用 Google Picker（使用 OAuth）

> ID：13413150
> 
> 赞同：4
> 
> 时间：2012-11-16T08:46:33.930
> 
> 标签：javascript, oauth, oauth-2.0, google-oauth, google-picker

是否可以向未使用 Google 帐户登录的用户展示[Google 选择器？](https://developers.google.com/picker/)我想让用户从我网站的 Google 帐户的共享 Google Drive 中选择文件。我可以在服务器上使用 OAuth 访问这些文件。但是是否也可以使用 Google Picker 呈现文件？也许用这种方法：

```
PickerBuilder.setOAuthToken(string) 
```

> 设置用于对当前用户进行身份验证的 OAuth 令牌。根据令牌的范围，只有某些视图会显示数据。有效范围是 Google 文档、云端硬盘和照片。当用户使用 OAuth 进行身份验证时，应使用此方法而不是 .setAuthUser。

[谷歌选择器 API 参考](https://developers.google.com/picker/docs/reference)

我已经尝试过了，我认为这是不可能的。或者是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:12:09.170

API 的这种方法确实有效（我目前使用它）。请注意，来自谷歌的身份验证令牌已过期，您可能需要刷新令牌，否则谷歌选择器在尝试从谷歌驱动器检索文件列表时将返回 401。

```
PickerBuilder.setOAuthToken(string) 
```

# c++ - QTreeView 的 Qt 样式表

> ID：13413156
> 
> 赞同：1
> 
> 时间：2012-11-16T08:47:02.070
> 
> 标签：c++, qt, model-view-controller, qtreeview, qtstylesheets

我目前面临关于 Qt 和 QTreeView 样式表的问题。我只是希望在树中选择的当前项目以粗体书写。我之前做过研究，很多论坛给出的解决方案是：

```
myView->setStyleSheet("QTreeView::item:selected {font: bold;}"); 
```

但这对我不起作用。我尝试`QTreeView {font: bold;}`了哪个有效（适用于每个项目）并且`QTreeView::item:selected {background-color:red;}`也有效。为什么字体不适用于所选项目？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-17T12:43:57.823

很老的问题，但也许有人会发现它很有用。我在使用 Qt 5.3 时遇到了同样的问题。

我在[qt-center](http://www.qtcentre.org/archive/index.php/t-54727.html)上发现了一些无法通过样式表完成的信息。

> 有没有办法更改 QListWidget 中所选项目的字体粗细（或最小字体大小）？不，因为这样的字体样式选项适用于 QWidgets，所以您可以将字体（或其他类似字体大小）样式选项应用于整个 QWidget（在本例中为 QListWidget），而不是派生 QWidget 的特殊行为，即 QListWidget 的选择项.

我认为它也适用于 QTreeView，因为我也无法更改它的样式。我可以更改边框、颜色、背景颜色，但不能更改字体。首先我认为我必须重新实现paintEvent函数，因为我正在重新实现QTreeView。这也没有奏效。

**解决方法：**

但是我发现了一些使用 QStyledItemDelegate 的解决方法。基本上你必须继承 QTreeView，然后继承 QStyledItemDelegate。也许它可以在没有子类化 QTreeView 的情况下工作，但是你必须以某种方式捕捉一些带有选定和取消选定项目的信号并调用 setItemDelegateForRow 和 setItemDelegateForColumn （它应该只改变相交的单元格）

以这种方式重新实现 QStyledItemDelegate::paint：

```
QStyledItemDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    QStyleOptionViewItemV4 editedOpt = option;
    editedOpt.font = QFont("Arial", 23, 500);
    initStyleOption( &editedOpt, index );
    QStyledItemDelegate::paint(painter, editedOpt, index);
} 
```

重新实现 QTreeView::selectionChanged(或普通 QTreeView 并捕获 QItemSelectionModel::selectionChanged) ：

```
void CustomTreeView::selectionChanged(const QItemSelection &selected, const QItemSelection &deselected)
{
    foreach(const QModelIndex &index, selected.indexes()) {
        setItemDelegateForRow(index.row(), new CustomDelegate(this));
        setItemDelegateForColumn(index.column(), new CustomDelegate(this));
    }
    foreach(const QModelIndex &index, deselected.indexes()) {
        setItemDelegateForRow(index.row(), new QStyledItemDelegate(this));
        setItemDelegateForColumn(index.column(), new QStyledItemDelegate(this));
    }
} 
```

# sql - 如何在 PostgresQL 中创建循环外键依赖项？

> ID：13413158
> 
> 赞同：0
> 
> 时间：2012-11-16T08:47:07.417
> 
> 标签：sql, postgresql

我一直在研究 PostgreSQL，但我遇到了这个问题：

有人可以指导我怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T09:05:40.373

您的问题尚不清楚，但我猜您无法弄清楚如何创建循环依赖项以对其进行测试。我不会给你确切的命令，因为这看起来像家庭作业，你没有努力解决你的问题，但这里有一个提示：

*   创建`first_table`，确保包含主键
*   创建`second_table`，确保包含一个主键和另一列，该列是对`first_table`的主键列的外键引用。
*   现在，添加一个新列，它是对主键列`ALTER TABLE first_table`的外键引用。`second_table`

现在，在其中一个中插入一行，或者尝试这样做。

我强烈建议您阅读手册：

*   [PostgreSQL 教程](http://www.postgresql.org/docs/current/static/tutorial.html)
*   [`CREATE TABLE`](http://www.postgresql.org/docs/current/static/sql-createtable.html)
*   [`ALTER TABLE`](http://www.postgresql.org/docs/current/static/sql-altertable.html)
*   [`SET CONSTRAINTS`](http://www.postgresql.org/docs/current/static/sql-set-constraints.html)
*   [`INSERT`](http://www.postgresql.org/docs/current/static/sql-insert.html)

请注意，您实际上*可以*通过创建一个或两个外键约束来在两个表中的行之间创建一个有效的循环依赖关系`DEFERRED`。见[`SET CONSTRAINTS`](http://www.postgresql.org/docs/current/static/sql-set-constraints.html)。*当您希望创建一个**必须存在*`1:n`的强制关系时，这会非常有用。*`n`*

# c# - 滚动到视图中的项目，但不要滚动到视图

> ID：13413162
> 
> 赞同：0
> 
> 时间：2012-11-16T08:47:44.823
> 
> 标签：c#, wpf, listview, select, scroll

我正在开发一个包含多个 ListView 的 WPF 应用程序。每个视图都有一个按钮，用户可以按下它来启动处理视图中项目的功能。项目数量通常以数千计，并且可能需要几分钟来处理。

现在，我希望选择当前正在处理的项目并将其滚动到，以便用户可以预知已处理了多少。这反过来也使用户很容易知道在发生错误时是什么项目导致处理停止，因为它被选中。

为此，我已将 ListView 的 SelectedIndex 绑定到我在处理函数中设置的 ScrollRow 属性。然后，我使用事件 SelectionChanged 滚动到选定的项目，该事件运行一个在选定项目上调用 ScrollToView 的函数。

我的窗口包含许多视图，因此在包含视图的主窗口上通常有一个滚动条。问题是，当我在视图中的一行上调用 ScrollToView 时，当用户想要查看窗口中更下方的另一个视图时，主窗口也会滚动到该视图。

我已经研究过直接设置滚动位置，但还没有找到任何方法来做到这一点。

当窗口中的视图滚动时，如何防止窗口滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:07:06.460

我不确定用户是否希望看到一个列表框为其他一千个项目设置动画。
而是一个关于当前处理的小信息面板，显示百分比进度，当前项目，时间......
但是但是......我不是在这里质疑你的设计选择:-)
所以你应该做的是让 scrollViewer您的 listView，并在其上调用 ScrollToVerticalOffset 以使内容滚动而不会窃取焦点。要找到滚动查看器，您可以使用我在这个问题中的回答： [如何获取 ListView 中可见项目的起始索引和数量？](https://stackoverflow.com/questions/372011/how-do-i-get-the-start-index-and-number-of-visible-items-in-a-listview/11193121#11193121)
如果您想寻求更多的 xaml/binding 解决方案，您可以使用这种解决方案公开 VerticalOffset：
[http://marlongrech.wordpress.com/2009/09/14/how-to-set-wpf-scrollviewer-verticaloffset-and-horizo​​ntal-offset/](http://marlongrech.wordpress.com/2009/09/14/how-to-set-wpf-scrollviewer-verticaloffset-and-horizontal-offset/)

# ios - 以编程方式旋转 UIView

> ID：13413173
> 
> 赞同：0
> 
> 时间：2012-11-16T08:48:21.663
> 
> 标签：ios, uiview, uiviewcontroller, mpmovieplayercontroller, uiinterfaceorientation

我有`UIViewController`它只支持纵向。

在这个 viewController 我有`MPMoviePlayerController`对象。默认情况下，影片控制器支持横向和纵向。

当它处于全屏模式并变成横向时，主视图控制器也会改变他的方向，退出全屏模式后，主视图不会改变他的方向。

如果我将设备设置为纵向，主视图会自动返回到正确的方向。问题是即使设备处于横向，我也不想旋转主视图。

当电影控制器以全屏模式旋转时，有什么方法可以防止主视图改变其方向？或者将主视图返回到纵向的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:58:16.407

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

必须返回 NO 是 iOS 5 或

```
- (NSUInteger)supportedInterfaceOrientations {
  return UIInterfaceOrientationMaskPortrait;
} 
```

在您的 ViewController 中的 iOS 6 中。

# c++ - 如何在 C 预处理器中合并符号名称和符号值

> ID：13413176
> 
> 赞同：0
> 
> 时间：2012-11-16T08:48:46.170
> 
> 标签：c++, c, casting, c-preprocessor

这个想法是创建自动施法者，它将根据给定的前缀和数字粘贴指向变量的指针。假设您有一些不断开发的界面，因此您每隔几周就会获得一些新的结构版本。因此，您可以只使用 SOME_DEFINE(thisStructure, version); 而不是写明确的“（结构1 *），（结构2 *）”等等。这将处理此案

我认为这可以解决问题

```
#define d1(x) x
#define d2(x,y) x##y

void someFunction()
{
    int temp = 3;
    d2(myStructure,d1(temp)) *thisStruct;
} 
```

我希望预处理器会嵌套自己并首先粘贴 d1 操作，然后将 d1 操作的结果与第一个 d2 参数合并。但是它不起作用，所以我的问题是，我怎样才能实现这一目标，因为它似乎是可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T08:55:33.360

我不确定您到底要做什么，但这里通常的问题是预处理器在其参数中进行宏替换之前会进行令牌粘贴和字符串化。因此，如果您编写如下内容：

```
#define PASTE(a,b) a ## b 
```

并称之为：

```
#define x 123
PASTE(A,x) 
```

，最后一行扩展为`Ax`，而不是`A123`。为了获得想要的结果，通常需要添加一个间接级别：

```
#define PASTEHELPER(a,b) a ## b
#define PASTE(a,b) PASTEHELPER(a,b) 
```

`PASTE`这是有效的，因为will 之前发生的参数的完整宏扩展`PASTEHELPER`被扩展，所以在`PASTE(A,x)`, 上面，参数`PASTEHELPER`will`A`和`123`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:00:09.497

```
#define d2(x,y) x ## y

void someFunction()
{
    int temp = 3;
    d2(myStructure,temp) *thisStruct;
} 
```

预处理器将其转换为：

```
void someFunction()
{
    int temp = 3;
    myStructuretemp *thisStruct;
} 
```

如果您想替换其中的“3”以便获得 myStructure3，那么您无法使用预处理器执行此操作——它对 C/C++ 变量或其值一无所知。

# java - 转换为 GeoPoint

> ID：13413177
> 
> 赞同：1
> 
> 时间：2012-11-16T08:48:49.693
> 
> 标签：java, android, maps

您好，我遇到了下一个奇怪的问题：我从 sql 服务器恢复坐标作为双精度，将其转换为浮点数，然后转换为 intE6。我设置了两张打印，一张在转换为 GeoPoint 之前，另一张在转换之后。好吧，第一个似乎打印好的值，但在第二个中，经度值的值失败了。

有一个例子：

```
float latitude = (float) json_data.getDouble("latitude");
float longitude = (float) json_data.getDouble("longitude");

Log.d("POINT",(int)(latitude*10E6)+" "+ (int)((longitude*10E6)));

GeoPoint p = new GeoPoint((int)(latitude*10E6), (int)(longitude*10E6));

Log.d("POINT", ""+p.getLatitudeE6()+" "+p.getLongitudeE6()); 
```

我在服务器中的值： -4.779396 ， 37.878901

打印值：

-4779360 378789024

-4779360 18789024

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:54:52.473

而 10E6 使用 1E6，因此将代码更改为以下内容：

```
GeoPoint p = new GeoPoint((int)(latitude*1E6), (int)(longitude*1E6)); 
```

因为 10E6 将得到与输入相同的数字，而 1E6 将数字乘以 10 提高到 6 次方。

# java - 添加的外部 jar 在谷歌应用引擎中不起作用

> ID：13413179
> 
> 赞同：1
> 
> 时间：2012-11-16T08:48:57.113
> 
> 标签：java, google-app-engine, jar

我正在使用 dom4j 解析一个 xml 文件，以获取一些我想在我的项目中使用的数据。我在本地测试了我的解析器，它工作正常。然后我从项目的属性中添加了 dom4j jar 作为外部 jar。我去了 Java Build Path Part 添加点击 Add External Jars。它没有给出任何错误，我也可以在 Google App Engine 上部署我的项目。当我转到页面并执行一些操作时，它会出现此错误：

```
Uncaught exception from servlet
java.lang.NoClassDefFoundError: org/dom4j/DocumentException 
```

你能帮我解决吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:51:36.397

在 WEB-INF/lib 中添加你的 jar 并部署

# c# - 无法接收 accessToken 甚至无法触发 getLoginStatus 事件？

> ID：13413181
> 
> 赞同：0
> 
> 时间：2012-11-16T08:48:58.720
> 
> 标签：c#, facebook-c#-sdk

嗨，我是 facebook APP 的新手。我正在研究 Facebook C# SDK 和 Javascript SDK。但问题是我无法获得 AccessToken，也无法调试代码。请找到以下代码

```
<div id="fb-root"></div> <!-- This initializes the FB controls-->   
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'XXXXXXXXXXXXXXX',   // App ID
            status: true,               // check login status
            cookie: true,               // enable cookies to allow the server to access the session
            xfbml: true                 // parse XFBML             
        });

        // Additional initialization code here
        alert("Additional initialization code here");
        FB.Event.subscribe('auth.login', function (response) 
        {
            debugger; ****//Debugger is not Raising****
            if (response.status === 'connected') {
                // connected
                alert("Connected");
            } else if (response.status === 'not_authorized') {
                // not_authorized
            } else {
                // not_logged_in
            }
        });

        FB.getLoginStatus(function (response) {
            if (response.session) {
                // logged in and connected user, someone you know
                alert("Connected");
            } else {
                // no user session available, someone you dont know
            }
        });

        FB.Event.subscribe('auth.authResponseChange', function (response) {
            alert("Additional initialization code here");
            if (response.status === 'connected') {
                alert("Bhuvan");  `// Event Not Raising`
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                debugger;
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                // TODO: Handle the access token

                // Do a post to the server to finish the logon
                // This is a form post since we don't want to use AJAX
                var form = document.createElement("form");
                form.setAttribute("method", 'post');
                form.setAttribute("action", 'FacebookLogin.aspx');

                var field = document.createElement("input");
                field.setAttribute("type", "hidden");
                field.setAttribute("name", 'accessToken');
                field.setAttribute("value", accessToken);
                form.appendChild(field);

                document.body.appendChild(form);
                form.submit();

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        });

    };

        // Load the SDK Asynchronously
        (function (d) {         
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));

</script> 
    <div class="fb-login-button"  data-show-faces="true" data-width="400" data-max-rows="1"></div> 
```

我能够登录，但我无法处理任何事件。我可以知道为什么我无法引发事件，以及为什么我无法检索访问代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:09:20.090

首先通过在脚本上方添加此代码块来异步加载 SDK，即在此行上方`window.fbAsyncInit = function () {`

添加这个：

```
// Load the SDK Asynchronously
(function(d) {
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) { return; }
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
ref.parentNode.insertBefore(js, ref);
} (document)); 
```

还在 FB.init({}); 中添加通道文件

```
channelUrl: '//' + window.location.hostname + '/Beta/channel.html', // Path to your Channel File LIVE 
```

在根文件夹 *文件内容中创建一个名为 channel.html 的 html 文件*

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <script src="//connect.facebook.net/en_US/all.js"></script>
</head>
<body>

</body>
</html> 
```

# django - django 日期过滤器 %z（一年中的哪一天），3 位数字

> ID：13413182
> 
> 赞同：2
> 
> 时间：2012-11-16T08:49:13.143
> 
> 标签：django, date, django-templates, django-template-filters

我正在使用 django 模板，我想使用以下格式“YYDDD”（有时称为朱利安日期格式）格式化日期，其中：

*   YY 是年份的最后 2 位数字
*   DDD 是 3 位数字格式的一年中的日期

我试图用日期过滤器来实现这一点：

```
{{ value|date:"yz" }} 
```

但是“z”不会将输出保留为 3 位数字，它会使用尽可能少的数量。如果天数是 3（1 月 3 日），它将打印 3 而不是 003。

例如，对于*2012 年 2 月 7 日*的日期，我期望**12038**但我得到**1238**（没有零填充）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:09:55.993

您可以编写[django 自定义过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)或使用[jcroft 的片段](http://djangosnippets.org/snippets/543/)：

```
{{ value|date:"y" }}{{ value|date:"z"|leading_zeros:"3" }} 
```

# matlab - nprtool 中的传递函数

> ID：13413186
> 
> 赞同：1
> 
> 时间：2012-11-16T08:49:41.453
> 
> 标签：matlab, neural-network

我可以知道 MATLAB nprtool 使用的传递函数是什么吗？谢谢您，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T01:58:23.647

如果您已经创建了神经网络，您可以通过在控制台中输入以下命令来查看任何层中正在使用的函数：

> > mynet.layers{i}.transferFcn

...其中“mynet”是您的网络名称，“i”是指向图层的整数。这适用于任何标准的多层架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:07:34.010

`tan-sigmoid`默认情况下。[更多信息在这里。](http://www.mathworks.in/help/nnet/gs/recognizing-patterns.html#f9-48630)

# matlab - 如何在 MATLAB 中设置 IMFREEHAND 句柄的位置？

> ID：13413188
> 
> 赞同：1
> 
> 时间：2012-11-16T08:49:41.893
> 
> 标签：matlab, roi

我保存了一个给定的位置数组并处理由 IMFREEHAND 定义的对象。将此数据加载回工作区后，我想再次将此 IMFREEHAND 对象设置到指定位置，类似于我可以通过参数设置位置的 IMRECT。我仍然没有找到这样的东西。有人有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T08:35:59.637

您可以使用补丁再次设置对象的位置

例子：

```
patch(Position_X ,Position_Y,1); 
```

# character-encoding - 字符编码 jruby 和普通 ruby

> ID：13413189
> 
> 赞同：1
> 
> 时间：2012-11-16T08:49:47.027
> 
> 标签：character-encoding, jruby, flash-message

我使用 Bootstrap Flash Message Gem 和 jruby 1.7.0 并且在 Flash Message 中遇到外来字符和变音符号的问题。

当我使用像 ruby​​-1.9.3 这样的“普通”红宝石时，一切正常。flash_messages.inspect 输出：“Felix Meier a été inscrit au sous-groupe 'Administrators'。”

但对于 jruby-1.7.0，完全相同的代码会产生：“Felix Meier a \xC3\xA9t\xC3\xA9 enlev\xC3\xA9 du sous-groupe 'Administrators'。” 我得到一个错误

```
ActionView::Template::Error (incompatible character encodings: UTF-8 and ASCII-8BIT): 
```

所以问题是：我做错了什么，是 jruby 做错了什么还是 Bootstrap Flash Message Gem 的问题？

我在控制台上尝试了一些东西，但无法重现问题（表明 Flash Message 是问题所在？）：

```
jruby-1.7.0 :005 >   q="Felix Meier a été inscrit au sous-groupe &#x27;Administrators&#x27;"
 => "Felix Meier a été inscrit au sous-groupe &#x27;Administrators&#x27;" 
jruby-1.7.0 :006 > CGI.unescape(q)
 => "Felix Meier a été inscrit au sous-groupe &#x27;Administrators&#x27;" 
jruby-1.7.0 :007 > CGI.unescape(q).encoding.name
 => "UTF-8" 
jruby-1.7.0 :008 > CGI.unescape(q).valid_encoding?
 => true 
jruby-1.7.0 :009 > r="Felix Meier a \xC3\xA9t\xC3\xA9 enlev\xC3\xA9 du sous-groupe &#x27;Administrators&#x27;"
 => "Felix Meier a été enlevé du sous-groupe &#x27;Administrators&#x27;" 
jruby-1.7.0 :010 > CGI.unescape(r)
 => "Felix Meier a été enlevé du sous-groupe &#x27;Administrators&#x27;" 
jruby-1.7.0 :011 > CGI.unescape(r).encoding.name
 => "UTF-8" 
```

# unit-testing - Grails：模拟休眠域操作 - beforeInsert

> ID：13413198
> 
> 赞同：2
> 
> 时间：2012-11-16T08:50:14.500
> 
> 标签：unit-testing, grails, grails-2.0, grails-domain-class

给定一个这样的域星座：

```
abstract class A { 
    def myService 
    def beforeInsert() { 
        myService.doIt() 
    } 
} 

class B extends A { 
    def beforeInsert() { 
        super.beforeInsert() 
    } 
} 
```

是否可以模拟以下方法： - B 中的 beforeInsert()？- 在 A 中的 beforeInsert()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-29T00:35:01.373

为了使单元测试的服务方法调用可选，最简单的方法是使用空安全方法调用：

```
abstract class A { 
    def myService 
    static transients = ['myService']
    def beforeInsert() { 
        myService?.doIt() 
    } 
} 

class B extends A { 
    def beforeInsert() { 
        super.beforeInsert() 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:28:59.413

保存 B 对象而不在单元测试中刷新或通过 metaClass 覆盖 beforeInsert：

```
B.metaClass.beforeInsert = {-> } 
```

# c# - 如何在 C# 中使用新的 Kinect SDK 缩放关节

> ID：13413200
> 
> 赞同：0
> 
> 时间：2012-11-16T08:50:24.810
> 
> 标签：c#, kinect

既然`ScaleTo()`已经从新的 Kinect SDK 中删除了，那么新的 SDK 将如何进行缩放？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:28:31.740

您可以使用 Coding4Fun Kinect 工具包：[http ://c4fkinect.codeplex.com/](http://c4fkinect.codeplex.com/)

`using`下载该库，将其包含在您的项目资源中，然后在您的语句中添加对它的引用。完成此操作后，您将拥有`scaleTo()`单个关节的功能。例如，`rightHand.scaleTo(640, 480)`。

图书馆网站上有一些关于使用它的信息。您还可以在 Channe9 的 Skeleton Tracking Fundamentals 帖子中找到有关使用该库的更多信息：http: [//channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)

# php - 无法使用 mail() PHP 覆盖 sendmail_path

> ID：13413201
> 
> 赞同：3
> 
> 时间：2012-11-16T08:50:31.047
> 
> 标签：php, email, path, sendmail

在 php.ini 中，sendmail_path 是：`-femail@site.com -t -i` 但是，在子域中，我需要与发件人一起发送电子邮件：`email@new.site.com`

我尝试使用 `ini_set('sendmail_path',-femail@new.site.com)`，但 sendmail_path 是系统的，所以没有附加任何内容。

我试图在 中定义发件人`mail()`，不起作用（在服务器的日志上，发件人仍然是email@site.com，但在电子邮件客户端中，发件人是可以的，但没关系）。

我试图定义第**5 个参数**，但函数只是停止工作（什么都不做，没有错误）。

有什么建议么 ？

谢谢，格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:50:28.413

想想邮件是如何在 PHP 中配置的——它只是一个 exec 调用的包装器（带有一些预定义的参数）。因此，通过 exec 替换您自己的参数来调用 sendmail 是微不足道的。[这](http://php.net/manual/en/mail.configuration.php)在描述 PHP 邮件配置的页面上的第一条评论中进行了描述。您只需要合成自己的标头（sendmail 从标头中提取收件人地址以填写信封，在转发电子邮件之前删除所有密件抄送行）。

另一种方法是使用支持 SMTP 的抽象层，例如 swiftmailer 或 phpmailer - 但如果将其配置为从属中继，您可能无法使用“localhost”。

# objective-c - AudioStreamBasicDescription 中是否需要 mBytesPerFrame？

> ID：13413202
> 
> 赞同：1
> 
> 时间：2012-11-16T08:50:33.747
> 
> 标签：objective-c, ios, audio, core-audio, audioqueueservices

在`AudioStreamBasicDescription`结构中：

```
struct AudioStreamBasicDescription {
    Float64 mSampleRate;
    UInt32  mFormatID;
    UInt32  mFormatFlags;
    UInt32  mBytesPerPacket;
    UInt32  mFramesPerPacket;
    UInt32  mBytesPerFrame;
    UInt32  mChannelsPerFrame;
    UInt32  mBitsPerChannel;
    UInt32  mReserved; 
}; 
```

如果我们知道 nChannelsPerFrame 和 mBitsPerChannels，我们可以这样计算 mBytesPerFrame：（ `mBytesPerFrame = mBitsPerChannels * mChannelsPerFrame / 8`如果我错了，请纠正我）

我相信所有领域的存在都是出于某种原因。mBytesPerFrame 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:58:56.660

是的。该字段可用于帮助描述 LPCM 样本数据/帧的打包和对齐。这对于描述一些外部 LPCM 表示也是强制性的。

例如，您可以指定 20 位样本大小，但实现可能倾向于使用 3 字节或 24 位（每个样本忽略 4 位）来表示/传输/存储它。

# objective-c - 为什么我们在 NSManagedObject 中需要临时 ID

> ID：13413206
> 
> 赞同：0
> 
> 时间：2012-11-16T08:51:00.273
> 
> 标签：objective-c, xcode4.5

一个简单的猜测是因为当我们最近添加我们不知道或没有特定信息来创建永久 ID 的对象时。

美好的。

然后我读到这个：obtainPermanentIDsForObjects:error:

将给定数组中对象的对象 ID 转换为永久 ID。- (BOOL)obtainPermanentIDsForObjects:(NSArray *)objects 错误:(NSError ** )error

该方法将objects中每个被管理对象的object ID转换为一个永久的ID。尽管该对象将具有一个永久 ID，但它仍会积极响应 isInserted**直到它被保存**。任何已经具有永久 ID 的对象都会被忽略。

任何尚未分配给存储的对象都基于 Core Data 在保存操作期间用于分配的相同规则进行分配（支持实体的第一个可写存储，并且适用于实例及其相关项）。特别注意事项

好的，所以我们在保存 NSManagedObject 之前获得了临时 ID。然而

保存 managedObjectContext 不会更新 NSManagedObjects 的 ID。它与此代码显示的相同：

```
PO([Catalogs convertEachElementToAnother:(id)^(id element) {
    BGCatalogData * data = (BGCatalogData*) element;
    NSManagedObjectID * theObjectID= data.objectID;
    return theObjectID;
}]);

NSError * error;
BOOL saveSuccesfully = [[BGMDCRManagedObjectContextThreadHandler managedObjectContext] save:&error];
PO([Catalogs convertEachElementToAnother:(id)^(id element){
    BGCatalogData * data = (BGCatalogData*) element;
    NSManagedObjectID * theObjectID= data.objectID;
    return theObjectID;
}]);' 
```

mod注意：我无法将以上内容转换为代码

结果是：

```
[Catalogs convertEachElementToAnother:(id)^(id element){ BGCatalogData * data = (BGCatalogData*) element; NSManagedObjectID * theObjectID= data.objectID; return theObjectID; }]: (
    "0x888a340 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A603>",
    "0x888d670 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A609>",
    "0x888ed50 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A615>",
    "0x888f690 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A621>"
)
2012-11-16 15:33:28.489 BadgerNew[26871:1d03] [Catalogs convertEachElementToAnother:(id)^(id element){ BGCatalogData * data = (BGCatalogData*) element; NSManagedObjectID * theObjectID= data.objectID; return theObjectID; }]: (
    "0x888a340 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A603>",
    "0x888d670 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A609>",
    "0x888ed50 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A615>",
    "0x888f690 <x-coredata:///BGCatalogData/t084E0F43-A129-4023-8190-2962D8D0930A621>"
) 
```

**在保存对象之前**，我们可以通过调用 gainPermanentIDsForObjects 为对象提供永久 ID 。

那么为什么IOS还要等到保存才能给出永久ID呢？为什么不马上呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:13:47.067

因为 CoreData 必须操纵底层持久存储来“阻止”其他对象的永久 ID（例如，增加一个计数器）。如果您在保存它之前不需要永久ID，这是一件不必要且可能很慢的事情（您可以仅临时使用您的物品并且永远不要保存它）

# objective-c - 重新加载 UIModalViewControllers

> ID：13413208
> 
> 赞同：0
> 
> 时间：2012-11-16T08:51:14.480
> 
> 标签：objective-c, ios, xcode, reload, modalviewcontroller

我有一个非常简单的 iPad 演示文稿，几乎没有模态视图。在每个 View 用户进行一个简单的操作（如拖动滑块）之后，会出现 UIButton“Next”，它会在之前的上方显示新的模态视图。最后一个视图中的按钮通过模态 segue 与第一个视图连接。所以应用程序需要以递归方式工作。但是在第一次演示结束后（从第二个循环开始），所有视图都呈现了其中完成的所有操作。所以我希望每次用户点击最后一个视图上的按钮时，所有应用程序 ModalViewControllers 都重新加载到默认状态。

我是否可以仅在最后一个 ModalViewController 的 UIButton 的 -prepareForSegue 中设置它，或者这是一个更全球性的问题？如果是这样，如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:29:21.143

`viewWillAppear`在every 中实施`ViewController`将使您有机会在视图到达屏幕之前重置视图。`ViewController`当您从另一个回到 a时`viewController`，`viewWillAppear`会被调用。

```
-(void)viewWillAppear:(BOOL)animated
{
    NSLog(@"viewWillAppear");

   [super viewWillAppear:animated]; 

    //Reset your view (i.e. hide next button etc.)

} 
```

# .net - 使用 Caliburn.Micro 进行配置的约定和 .NET 中的代码混淆

> ID：13413210
> 
> 赞同：1
> 
> 时间：2012-11-16T08:51:18.800
> 
> 标签：.net, obfuscation, caliburn.micro, convention-over-configur

我们正在考虑为我们的应用程序使用[Caliburn.Micro](http://caliburnmicro.codeplex.com/)和 Conventions over Configuration，但我担心代码混淆（我们需要分布式应用程序）会干扰命名约定。在没有实际尝试过的情况下，我认为我必须添加一组异常以避免重命名类/命名空间/字段/函数以启用约定。

您使用 Caliburn.Micro（或其他类似框架）进行混淆的经验是什么？是否有替代方法来使用在混淆上下文中更好地工作的命名约定（例如，创建类型的手动映射来进行映射）？

我们使用[Crypto Obfuscator for .Net](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)进行混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:50:55.863

我已经尝试了几种解决 WPF 中混淆问题的方法，但是无论我使用什么应用程序或框架，我都无法完成工作，因为绑定系统和 WPF 对名称的严重依赖（例如类名、属性名、你说出它的名字）所以我建议不要给自己增加负担，除非这是绝对要求。

# c++ - 为 QImage 设置 DPI

> ID：13413213
> 
> 赞同：2
> 
> 时间：2012-11-16T08:51:28.613
> 
> 标签：c++, qt, text, dpi, qimage

我在 QImage 上使用 QPainter 绘制文本，然后将其保存到 TIFF。

我需要将 DPI 增加到 300，这应该使文本在像素方面更大（对于相同的点大小）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T22:20:38.367

您可以尝试使用 QImage::setDotsPerMeterY() 和 QImage::setDotsPerMeterX()。DPI 的意思是“每英寸点数”。1 英寸等于 0.0254 米。因此，您应该能够转换为每米点数 (dpm)：

```
int dpm = 300 / 0.0254; // ~300 DPI
image.setDotsPerMeterX(dpm);
image.setDotsPerMeterY(dpm); 
```

它不会完全是 300DPI（实际上是 299.9994），因为这些函数只适用于整数值。但就所有意图和目的而言，它已经足够好了（我想说，299.9994 vs 300 相当不错。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-11T14:51:47.887

一米有39.37英寸。所以：

**环境：**

```
qimage.setDotsPerMeterX(xdpi * 39.37);
qimage.setDotsPerMeterY(ydpi * 39.37); 
```

**得到：**

```
xdpi = qimage.dotsPerMeterX() / 39.37;
ydpi = qimage.dotsPerMeterY() / 39.37; 
```

# c# - SSL Web 服务：无法创建 SSL/TLS 安全通道

> ID：13413214
> 
> 赞同：10
> 
> 时间：2012-11-16T08:51:28.987
> 
> 标签：c#, ssl, https

我的 C# .net 应用程序正在使用 HTTPS Web 服务。由于证书现在即将到期，我正在尝试使用我已获得的新证书（我已使用 javasdks 的 keytool 转换为 .p12 的 .jks 文件）对其进行更新。我认为这很容易，因为我知道该怎么做，但它就是不合作。

到目前为止我所做的：

*   将证书导入到 CURRENT_USER\Personal
*   将证书导入到 LOCAL_MACHINE\Personal
*   给定正确的用户（apppoolidentity）通过 winhttpcertcfg 工具访问证书的私钥。下面是证书的权限列表。
*   使用 findprivatekey 工具，我还找到了实际的密钥文件，并赋予 apppoolidentity 对其的访问权限。（绝望中）。

    C:\Program Files (x86)\Windows Resource Kits\Tools>winhttpcertcfg -l -c LOCAL_MACHINE\My -s "9000 - Blabla" Microsoft (R) WinHTTP 证书配置工具 版权所有 (C) Microsoft Corporation 2001。

    匹配证书：CN=9000 - Blabla C=NO L="c/o Blabla AS, Blablaaddress" OU=957839827 OID.1.2.240.111111.1.9.8=12345678 OID.1.2.240.111111.1.9.2=Blabla Test O= BlaBla AS OU=多重允许

    可以访问私钥的其他帐户和组包括： BUILTIN\Administrators NT AUTHORITY\SYSTEM IIS APPPOOL\ASP.NET v4.0 BUILTIN\Users NT AUTHORITY\NETWORK SERVICE DIGITROLLDMZ\IIS_WPG

我正在访问的网址如下所示：

```
https://test.blabla.com/blabla-5.0/services/Blabla?wsdl 
```

...如果我从服务器的网络浏览器访问它，我可以选择证书，我选择新的，它说没关系，绿色和 SSL 按顺序排列，但我的应用程序代码看起来像这样：

```
public static blabla.service.NettforhandlerService getNettforhandlerService(string applicationPath) 
    {
    blabla.service.NettforhandlerService service = new blabla.service.NettforhandlerService();
    if (System.Configuration.ConfigurationManager.AppSettings["CertificateSerialNumber"] != null && System.Configuration.ConfigurationManager.AppSettings["CertificateSerialNumber"].Length > 0)
    {
        string serviceurl = service.Url;
        X509Store store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
        store.Open(OpenFlags.ReadOnly);
        X509Certificate2Collection col = store.Certificates.Find(X509FindType.FindBySerialNumber, System.Configuration.ConfigurationManager.AppSettings["CertificateSerialNumber"], true);

        ServicePointManager.Expect100Continue = true;
        ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
        ServicePointManager.CertificatePolicy = new TrustHBSCertificatePolicy();

        service.ClientCertificates.Add(col[0]);

    }
    return service;
    } 
```

仅输出此错误：

```
The request was aborted: Could not create SSL/TLS secure channel. 
```

...我在 web.config 中添加了一些跟踪/调试信息，我从错误中发现的是：

```
[Public Key]
  Algorithm: RSA
  Length: 2048
  Key Blob: 30 82 01 0a 02 82 01 01 00 8e a6 72 c2 e1 67 16 e2 be be c3 30 89 8d bb 57 0b 48 f8 1d 09 b1 e3 26 42 c9 45 9e 02 b2 43 49 16 81 94 1b 18 d6 6d ef ....
System.Net Information: 0 : [15624] SecureChannel#32061089 - Certificate is of type X509Certificate2 and contains the private key.
System.Net Information: 0 : [15624] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)
System.Net Error: 0 : [15624] AcquireCredentialsHandle() failed with error 0X8009030D.
System.Net Information: 0 : [15624] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)
System.Net Error: 0 : [15624] AcquireCredentialsHandle() failed with error 0X8009030D.
System.Net.Sockets Verbose: 0 : [15624] Socket#38259205::Dispose()
System.Net Error: 0 : [15624] Exception in the HttpWebRequest#54558071:: - The request was aborted: Could not create SSL/TLS secure channel.
System.Net Error: 0 : [15624] Exception in the HttpWebRequest#54558071::GetResponse - The request was aborted: Could not create SSL/TLS secure channel.
System.Net Verbose: 0 : [15624] 
```

我知道这看起来像正确的用户/身份没有被授予对证书的访问权限（来自 winhttpcertcfg），但我很确定它有，这就是我在这里不知所措的原因，

希望有一些严肃的https-certificate/web-service -skills的人可以在这里帮助我:-)

谢谢。

问候， Jørgen E.

edit1：将标题更改为更精确的内容。编辑2：新信息：

```
In EventViewer/Windows Logs/Security there is an event "Audit Failure" connected to this:

Cryptographic operation.

Subject:
    Security ID:        IIS APPPOOL\ASP.NET v4.0
    Account Name:       ASP.NET v4.0
    Account Domain:     IIS APPPOOL
    Logon ID:       0x32498

Cryptographic Parameters:
    Provider Name:  Microsoft Software Key Storage Provider
    Algorithm Name: Not Available.
    Key Name:   {00E1A3F5-7400-41CA-8290-02983473AEAF}
    Key Type:   Machine key.

Cryptographic Operation:
    Operation:  Open Key.
    Return Code:    0x80090010 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T09:58:26.467

从日志中提取的内容不多，但是...

Google-fu 产生以下结果：0x80090010 很可能是证书访问错误。

由此，我很有可能得出结论，您需要为您的 SSL 证书私钥设置权限 - 以便 IIS 可以访问它。请参阅： http: [//www.dotnetnoob.com/2011/01/how-to-give-iis-access-to-private-keys.html](http://www.dotnetnoob.com/2011/01/how-to-give-iis-access-to-private-keys.html)

另一个选项的类似问题：[请求被中止：无法创建 SSL/TLS 安全通道](https://stackoverflow.com/questions/2859790/the-request-was-aborted-could-not-create-ssl-tls-secure-channel)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T13:40:17.330

问题解决了，似乎缺少中间证书，将其导入到 MMC 中的中间证书中，一切都很好:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-10T14:03:02.410

回复晚了，但我遇到了同样的问题，以下更改为我解决了这个问题。尝试更改行 ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 与下面的一个 - ServicePointManager.SecurityProtocol = (SecurityProtocolType)3072;

PS - 我在我的应用程序中使用 .Net framework 3.5。

# apache - apache重定向文档根目录：不知道将RewriteRule放在哪里

> ID：13413217
> 
> 赞同：0
> 
> 时间：2012-11-16T08:51:45.460
> 
> 标签：apache, httpd.conf

我正在尝试将文档根目录重定向到特定文件夹（例如 mysite.com 到 mysite.com/myfolder）。但是，当我尝试时，它仍然显示默认的 apache 主页。

我按照我放的例子[here](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)

```
RewriteEngine on
RewriteRule ^/$ /myfolder/ [R] 
```

在目录、目录“c:/wamp/www/”和 VirtualHost *:80 等几个部分中，但它不起作用。我已经打开了 rewrite_module。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:57:40.437

在 RewriteEngine 下，写

```
RewriteLog "logs/rewrite.log"
RewriteLogLevel 9 
```

并重新启动 apache 服务器。现在检查 rewrite.log 文件。

这将帮助您调试。

解决方案试试这个：

```
RewriteRule ^/$ /myfolder [R,L] 
```

把它写在你的虚拟主机条目中。

# jquery - 在 ASP.NET MVC 中的 Json 上显示错误消息

> ID：13413218
> 
> 赞同：3
> 
> 时间：2012-11-16T08:51:49.183
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-2, error-handling

我正在创建我的第一个 ASP.NET MVC2 项目，在客户端使用 jquery 和 ajax。

现在，当我进行 QA 测试应用程序并添加一些测试异常并将其从我的控制器传递给 json 时，如下所示：

控制器：

```
public JsonResult PopulateDetails(int id)
        {
                  ProductServiceClient client = new ProductServiceClient();
            try
            {
                if (id == 0)
                { throw new Exception("TEST ERROR."); }

                string name= "test";
                List<Product> product= client.GetPriductbyName(name);
                return Json(product);

            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

Jquery-Ajax 脚本：

```
$.ajax({
        type: "POST",
        url: url_ ,
        data: search,
        success: function(data) {   // data: Passed (Records) from the PopulateDetails controller
            displayDetails(data);   // after routing on Populate Details  converts the data to table
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert("error: " + XMLHttpRequest.responseText);
        },
        dataType: 'json'
    }); 
```

我注意到它将在下面返回此默认错误消息：

```
---------------------------
Windows Internet Explorer
---------------------------
error: <html>

    <head>

        <title>TEST ERROR.</title>

        <style>

         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 

         p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}

         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}

         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }

         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }

         pre {font-family:"Lucida Console";font-size: .9em}

         .marker {font-weight: bold; color: black;text-decoration: none;}

         .version {color: gray;}

         .error {margin-bottom: 10px;}

         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }

        </style>

    </head>

    <body bgcolor="white">

            <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>

            <h2> <i>TEST ERROR.</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

            <br><br>

            <b> Exception Details: </b>System.Exception: TEST ERROR.<br><br>

            <b>Source Error:</b> <br><br>

            <table width=100% bgcolor="#ffffcc">

               <tr>

                  <td>

                      <code><pre>

Line 64:             catch (Exception ex)

Line 65:             {

<font color=red>Line 66:                 throw ex;

</font>Line 67:             }

Line 68:         }</pre></code>

                  </td>

               </tr>

            </table>

            <br>

---------------------------
OK   
--------------------------- 
```

现在如何整齐地显示异常中的错误消息而不是整个 html 错误消息。类似于显示警告消息框 alert("TEST ERROR") 之类的简单操作。

有没有办法让它更简单？

我在 asp.net 上看到了这个链接，看起来不错[如何处理 jQuery 错误并在客户端上显示它们？](http://www.asp.net/ajaxlibrary/jquery_errors.ashx)

但我找不到 AjaxResponseViewModel() 的声明位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:08:09.213

在您的捕获中，您可能应该**记录错误**，然后返回一个**json 友好的结果**，例如

```
 catch (Exception ex)
 {
      //log.Error(ex); using whatever you use to log
      return Json(ex.Message);
 } 
```

或者

```
return Json("There has been an error, please contact support or read the log"); 
```

上面你抛出了异常，它将完整地返回错误视图。

# firefox - 如何知道面板是否显示

> ID：13413223
> 
> 赞同：1
> 
> 时间：2012-11-16T08:52:25.613
> 
> 标签：firefox, firefox-addon-sdk

所以。我遇到了一些问题，我的面板并不总是显示（尽管插件的其余部分似乎仍在工作）。我正在尝试写一些日志来找出发生这种情况的原因，但有些事情我不太明白。

为了进行实验，我制作了一个简单的附加组件

```
// main.js
const panels        = require("panel");
const {Cc, Ci}      = require("chrome");
const widgets       = require("widget");

var my_widget = widgets.Widget({
    id: "google-link",
    label: "Click me",
    contentURL: "http://google.com/favicon.ico",
    width: 20,
    height: 20,
    panel: my_panel,
    onClick: function() {
        my_panel.show();
        console.log('Panel displaying? ' + my_panel.isShowing);
    }
});

var my_panel = panels.Panel({
    width: 500,
    height: 500,
    contentURL: "http://google.com",
});

my_panel.port.on("show", function() {
    console.log('Panel emitted show');
}); 
```

首先发生的事情是：`isShowing`总是`false`，即使我清楚地看到面板。而且`show`事件似乎永远不会被触发（我真的很想抓住这个`error`事件，但这只是为了首先找到事件）。

细则：这是使用 SDK 1.6.1 和 Firefox 10ESR。也许这是在以后的版本中解决的问题，我不知道。无论哪种方式，我都想知道我是否在这里思考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:03:54.560

您的代码不太正确，请参阅以下变体：

```
// main.js
const panels        = require("panel");
const {Cc, Ci}      = require("chrome");
const widgets       = require("widget");

var my_widget = widgets.Widget({
    id: "google-link",
    label: "Click me",
    contentURL: "http://google.com/favicon.ico",
    width: 20,
    height: 20,
    panel: my_panel,
    onClick: function() {
        my_panel.show();
        // this is false because the panel is shown asynchronously
        console.log('Panel displaying? ' + my_panel.isShowing);
    }
});

var my_panel = panels.Panel({
    width: 500,
    height: 500,
    contentURL: "http://google.com",
});

// there is no port property on panel
my_panel.on("show", function() {
    console.log('Panel emitted show');
    // this is true...
    console.log('Panel displaying? ' + my_panel.isShowing);
}); 
```

代码在这里：

[https://builder.addons.mozilla.org/package/161691/latest/](https://builder.addons.mozilla.org/package/161691/latest/)

# mysql - 仅适用于 MyIsam 存储引擎的最常见和最重要的 SQL 命令？

> ID：13413226
> 
> 赞同：3
> 
> 时间：2012-11-16T08:52:43.033
> 
> 标签：mysql, sql, innodb, myisam, mariadb

最近在我们的一个讨论中提到，使用基于 MyISAM 的旧 MySQL 部署移动旧的遗留系统不能轻易地被基于 InnoDB 的 MySQL 或 MariaDB 部署取代。出现的原因是到处都有太多的 MyISAM only SQL 命令。我还没有看到代码，所以我想知道他们指的是什么 SQL 命令。

我只知道下面几个与表锁定相关的。它可能在理论上仍然可以与 InnoDB 一起使用，但更适合 MyISAM`MERGE`和`MEMORY`支持表锁定的存储引擎。

```
LOCK TABLES
UNLOCK TABLES 
```

如果还有更多，或者点我收藏一下。将不胜感激。

*- 编辑 -*

我会把我找到的所有其他东西都放在这条线下面。

```
MATCH (http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:30:27.727

您也可以`LOCK TABLES`使用 InnoDB 表，因此这不是 MyISAM 特定的。虽然没有必要锁定 InnoDB 表。最好使用事务、MVCC 和`SELECT...FOR UPDATE`.

有许多配置变量和状态变量仅与 MyISAM 相关，例如`key_buffer_size`将一些内存用于缓存索引。但这些不是命令。

InnoDB 不支持 MyISAM 表的一些特性。一种是分组自增主键：

```
CREATE TABLE foo (
  group_id INT, 
  position INT AUTO_INCREMENT,
  PRIMARY KEY (group_id, position)
); 
```

上表在`position`您插入行时递增，但对于 的每个不同值从 1 开始`group_id`。这仅适用于 MyISAM。

`CREATE FULLTEXT INDEX`，因此`MATCH()...AGAINST()`查询谓词目前仅在 MyISAM 中受支持。但是这些是在 MySQL 5.6 中为 InnoDB 实现的。

`CREATE SPATIAL INDEX`仅在 MyISAM 中受支持。

`CHECKSUM TABLE`仅适用于 MyISAM 表。

`OPTIMIZE TABLE`在某些方面特定于 MyISAM，但是当您对 InnoDB 表运行此命令时，它会自动转换为重新创建 + 分析操作。

`CREATE TABLE`仅 MyISAM 支持的选项：

*   AVG_ROW_LENGTH=nnn
*   DATA_DIRECTORY=路径
*   INDEX_DIRECTORY=路径
*   DELAY_KEY_WRITE=1
*   PACK_KEYS=1
*   ROW_FORMAT=固定

MERGE 存储引擎只能合并 MyISAM 表。

我最喜欢应用于 MyISAM 表的命令如下。:-)

```
ALTER TABLE tablename ENGINE=InnoDB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:14:36.390

我更喜欢创建一个“临时”表，插入/更新和删除，删除旧表，而不是将新表重命名为旧名称。

否则你可以在最后一步

```
TRUNCATE TABLE x;
INSERT INTO x SELECT * from temp_x; 
```

# php - 使用 PHP 合并和排序 2 个查询

> ID：13413232
> 
> 赞同：1
> 
> 时间：2012-11-16T08:53:09.220
> 
> 标签：php, arrays, codeigniter

我有来自 CodeIgniter 框架的两个查询的结果，我可以使用 for each 循环以这种方式访问​​每个查询

```
foreach ($query->result() as row){
       $data['email']= $row->email;
} 
```

我需要合并 2 个查询的数据，按电子邮件排序并在最后显示它们。

有人知道吗？我尝试使用 array_merge 但我可以走得很远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:03:56.147

为什么不在 mysql 查询中合并和排序并得到你想要的结果？当您合并数组时，您是否尝试[对数组进行排序](http://php.net/manual/en/array.sorting.php) ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:52:26.687

在 mysql 中使用[LEFT JOIN函数。](http://www.tizag.com/mysqlTutorial/mysqlleftjoin.php)

# regex - JSON 字符串的正则表达式

> ID：13413233
> 
> 赞同：0
> 
> 时间：2012-11-16T08:53:09.920
> 
> 标签：regex, json, sqlite

我将一个人对象作为 JSON 存储在我的 SQLite 数据库中。该表将有几条 1000 条人员对象记录。我需要的是根据“名称”属性查询人员。

经过调查，我发现使用 SQLite 的 GLOB 方法在 JSON 元素中执行 RegEx 类型的搜索。

我的示例 JSON 是这样的。

```
{"name":"john","age":"22","father-name":"jackson"} 
```

现在我想要一个正则表达式匹配器来获取与 JSON 中的 name 属性提供的 SubString 的一部分匹配的所有记录。它也应该不区分大小写。

例如：“ohn”搜索应该获取我约翰的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:09:59.043

虽然您可以存储 JSON 并使用正则表达式（在 SQLite 中相当有限）对其进行搜索，但这并不意味着您应该这样做。

相反，您应该真正考虑将 JSON 拆分为字段并将它们存储在普通的 SQLite 表中。这样做不仅可以让您执行更轻松的搜索，而无需每次都痛苦地解析数据，搜索也会更快（如果您添加必要的索引）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:18:04.600

如果您确实想走正则表达式路线，以下将提取记录：

```
/\{"name":"\w*ohn\w*[^\}]+\}/i 
```

这将匹配其中的每一个：

```
{"name":"john","age":"22","father-name":"jackson"}
{"name":"john","age":"22","father-name":"johnson"}
{"name":"johnny","age":"22","father-name":"smith"} 
```

但不是：

```
{"name":"fred","age":"22","father-name":"hall"},
{"name":"mike","age":"22","father-name":"johnson"}
{"name":"bob","age":"22","father-name":"todd"} 
```

# php - 用于单页管理的 CMS

> ID：13413236
> 
> 赞同：0
> 
> 时间：2012-11-16T08:53:21.290
> 
> 标签：php, content-management-system

我需要一点帮助。我有一个网站，上面有我们公司发布新职位空缺的职业页面。网站不在任何 CMS 上运行，但我只希望这个职位发布页面在 CMS 上运行，这样无需编辑 PHP 文件即可轻松发布职位。

你能帮助我使用一些开源 CMS 吗？该 CMS 将只运行该特定页面而不是整个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:01:48.893

你有编程经验吗？根据具体要求，使用您选择的脚本语言从头开始编写这可能会更容易和更有效，而不是使用可能无法完全满足您的需求的重型通用现成软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:06:35.597

我同意 Bobby 的观点——为此目的安装 CMS 是一个巨大的矫枉过正，尽管我同意你的观点，即对于非技术用户来说管理起来会容易得多。

我建议不要使用 wordpress（它会非常慢，并且需要大量工作才能优化速度）。

我的选择是 Joomla，（Drupal 也应该可以正常工作）。
我没有使用 Joomla 3.0，所以我不确定——但旧版本会运行得非常快并且易于使用（编辑新职位）。

# php - 想法这个输出意味着什么？

> ID：13413237
> 
> 赞同：0
> 
> 时间：2012-11-16T08:53:21.580
> 
> 标签：php, encoding, character

谁能告诉这是什么意思？这是什么编码？我在 PHP 中的错误日志提供了以下类型的代码：

```
\xc3\xb6m\xc3\xb6\xc3\xa4 
```

我应该搜索什么样的列表来解释这个输出？

感谢任何回复:)

# android - MD5 转换在 Java 和 Android 中的工作方式是否不同？

> ID：13413241
> 
> 赞同：3
> 
> 时间：2012-11-16T08:53:34.357
> 
> 标签：android, security, md5

```
public String generateKey(String title, String userName){
    char[] hexDigits = "0123456789abcdef".toCharArray();
    String source;
    String MD5 = null;
    byte[] digest = null;
    source = title + "balh" + userName ;
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        digest = md.digest(source.getBytes("UTF-16"));

        StringBuilder sb = new StringBuilder(32);
        for (byte b : digest)
        {
            sb.append(hexDigits[(b >> 4) & 0x0f]);
            sb.append(hexDigits[b & 0x0f]);
        }
        System.out.println("Gened KEY ===="+sb.toString());
        return sb.toString();
    } catch (Exception e) {
    }
    return "";
} 
```

我使用相同的代码在 android 和 Servlet 中生成密钥。但我得到不同的结果。我究竟做错了什么？或者，如果这些不兼容，那么如何制作它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:09:11.147

我在服务器和android客户端都使用了以下方法。有效。但不知道我遇到了什么问题。

[http://mobile.dzone.com/news/android-snippet-making-md5](http://mobile.dzone.com/news/android-snippet-making-md5)

# php - 如何获取网站当前活动的会话 ID（当前用户除外）

> ID：13413246
> 
> 赞同：1
> 
> 时间：2012-11-16T08:53:59.673
> 
> 标签：php, session, login, chat

我正在使用 PHP 开发一个聊天应用程序。在这里，我将一个登录信息保存`session_id`到我的数据库中。当用户注销时，我将其设置`session_id`为空。`session_id`因此，通过这种方式，我可以获取其他用户的登录信息。如果聊天框打开，我的脚本每 5 秒检查一次此消息和相应消息。

现在假设用户已经关闭了浏览器本身，那么如何将他从聊天框活动用户列表中删除？

当我们关闭浏览器时，会话将过期。有什么东西我可以追踪到哪些东西`session_id`当前在特定网站的服务器上都处于活动状态？

或者有没有办法在 PHP 中跟踪所有活跃用户的聊天应用程序？我没有得到我在这里缺少的参数。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:02:21.897

就像卢卡斯所说的那样。有一个时间戳字段，例如“last_seen”，每 5 秒通过 AJAX 更新一次（无论如何你现在正在做什么）。然后您可能会认为此查询返回的所有用户都处于活动状态：

```
SELECT * FROM user WHERE last_seen > CURRENT_TIMESTAMP - 30; 
```

并且所有其他人都处于离线状态（关闭浏览器或某事）。

在上面的查询中，我们假设如果用户有 30 秒没有被看到 - 他是离线的。此值可以更低，但必须高于 5 秒（您的刷新间隔），因为更新 last_seen 列时总会有一些延迟。

# arrays - 如何在线程中访问perl对象

> ID：13413249
> 
> 赞同：4
> 
> 时间：2012-11-16T08:54:15.783
> 
> 标签：arrays, multithreading, perl, object, initialization

我希望你们中的某个人能够帮助我解决我的问题。我试图在线程计算期间访问对象的全局共享数组，并且总是得到错误“使用未初始化的值”，尽管我可以打印它们的哈希值。

此外，由于使用来自 bioperl 的 seqio 对象，我无法更改我的对象。

以下示例显示了我的问题。

提前致谢。

对象类：

```
package obj;

use strict;
use warnings;
require Exporter;
our @ISA = qw(Exporter);

sub new(){
    my $class=shift;
    my $this = {};
    $this->{"data"} = ();   
    bless($this,$class);
    return($this);
}

sub getData(){
    my $this=shift;
    return $this->{"data"};
}

sub setData($){
    my $this=shift; 
    $this->{"data"}=shift;
} 
```

测试类：

```
use strict;
use warnings;
use threads;
use threads::shared;
use obj;

my @objs : shared;
foreach (0..2){
    my $o = obj->new();
    $o->setData($_);
    push @objs, share($o);  
}

my @threads=();
$#threads=3;

my $started;
for (my $i=0; $i<10; $i+=$started){
    $started=0;
    foreach (0..$#threads){
        if (not defined $threads[$_]){
            $threads[$_]=threads->new(\&run,(\@objs));
            $started++; 
        } elsif($threads[$_]->is_joinable()){
            $threads[$_]->join();
            $threads[$_]=threads->new(\&run,(\@objs));
            $started++;
        }           
    }   
}
my $running=1;
while ($running>0) {
    foreach (@threads) {    
        if (defined $_){
            $_->join if ($_->is_joinable());    
        }               
    }
    $running = scalar(threads->list(threads::running));       
}   

sub run($){
    my $objs=shift;

    print $_." " foreach (@{$objs});
#   print $_->getData()." " foreach (@{$objs}); try to access data

    print "\n";     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:47:25.867

线程::共享文档的[错误和限制部分](http://search.cpan.org/perldoc?threads%3A%3Ashared#BUGS_AND_LIMITATIONS)警告

> 当`share`用于数组、哈希、数组引用或哈希引用时，它们包含的任何数据都将丢失。
> 
> ```
> [...]
> 
> # Create a 'foo' object
> my $foo = { 'data' => 99 };
> bless($foo, 'foo');
> 
> # Share the object
> share($foo);        # Contents are now wiped out
> print("ERROR: \$foo is empty\n")
>     if (! exists($foo->{'data'})); 
> ```
> 
> 因此，在将这些变量声明为共享**后**填充这些变量。（标量和标量引用不受此问题的影响。）

您丢失了新创建的对象中的数据，并设置了以后的未初始化变量警告

```
for (0..2) {
    my $o = obj->new();
    $o->setData($_);
    push @objs, share($o);  # wipes out $o
} 
```

请注意threads::shared 文档中的另一个警告。

> 除非类本身已被编写为支持共享，否则共享对象通常是不明智的。例如，一个对象的析构函数可能会被调用多次，每个线程的作用域退出一次。另一个危险是，由于上述限制，基于散列的对象的内容将丢失。请参阅[`examples/class.pl`](http://cpansearch.perl.org/src/JDHEDDEN/threads-shared-1.42/examples/class.pl)（在本模块的 CPAN 分发版中）了解如何创建支持对象共享的类。

中的代码`obj.pm`变为

```
package obj;

use strict;
use threads;
use threads::shared;
use warnings;

sub new {
    my $class=shift;
    share(my %this);
    $this{"data"} = ();
    bless(\%this,$class);
    return(\%this);
}

sub getData {
    my $this=shift;
    lock($this);
    return $this->{"data"};
}

sub setData {
    my $this=shift;
    lock($this);
    $this->{"data"}=shift;
}

1; 
```

变化是

*   使用threads 和threads::shared 模块。
*   删除未使用的出口商咒语。
*   在构造函数中，创建一个空的共享哈希*，然后*初始化并祝福。
*   在访问器中添加调用`lock`。

`share`如果您忘记删除循环中的调用，您仍然会收到所有警告。将循环更改为

```
foreach (0..2){
    my $o = obj->new();
    $o->setData($_);
    push @objs, $o;  # already shared!
} 
```

得到以下输出。

```
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
0 1 2
```

# css - 用可用空间表示浮动元素旁边的 div 的宽度

> ID：13413250
> 
> 赞同：0
> 
> 时间：2012-11-16T08:54:22.873
> 
> 标签：css, css-float, width, percentage

在这个[jsfiddle 中](http://jsfiddle.net/3vmTJ/)，我想将`.four`div 的宽度表示为剩余屏幕空间的百分比，而不是总屏幕宽度。但是由于层次结构中的前三个 div 是浮动的，因此目前没有发生这种情况。

我需要做什么才能`.four`根据剩余的水平屏幕空间来定义 's 宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:02:18.493

只需从此类中删除宽度，`.four`它将自动覆盖剩余空间。并给出三个 div 之后开始`margin-left`的总`three div's`价值`fourth div`

**CSS**

```
.four{
background-color:black;
color:white;
margin-left:360px;    
} 
```

[演示](http://jsfiddle.net/3vmTJ/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:58:20.477

据我所知，您必须将其包装在占用剩余宽度 100% 的父元素中，以便您可以将 .four 占其中的百分比。

为了让父元素占据剩余空间，这并不漂亮，但最好的办法可能是使用表格显示样式。 [演示](http://jsfiddle.net/kBmbk/12/)

**标记**

```
<div class="menu-outer-outer">
    <div class="menu-outer">       
        <div class="menu one">first</div>
        <div class="menu two">second</div>
        <div class="menu three">third</div>
        <div class="four-container">
            <div class="four">helloworld</div>
        </div>
    </div>
</div> 
```

**风格**

```
.menu-outer-outer {
    display: table;
    width: 100%;
}
.menu-outer {
    display: table-row;
}
.menu{
    display: table-cell;
    height:240px;
    width:120px;
}
.one{
    background-color:red;
}
.two{
    background-color:blue;
}
.three{
    background-color:green;
}
.four-container {
    display: table-cell;
    width: auto;
}
.four {
    background-color:black;
    color:white;
    width: 60%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:02:17.290

绝对定位是一种解决方案，但一旦屏幕尺寸变小，您可能会遇到问题。 [http://jsfiddle.net/kudoslabs/HMydq/](http://jsfiddle.net/kudoslabs/HMydq/)

```
.four{
background-color:black;
color:white;
position: absolute;
left: 360px ;
right: 0;   
} 
```

# jquery - 使用 .text() jquery 在范围内显示文本

> ID：13413251
> 
> 赞同：1
> 
> 时间：2012-11-16T08:54:22.537
> 
> 标签：jquery, text, html

```
<!DOCTYPE html>
<html>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<div id="hel"></div>
<script>
txt="<script>alert('Test');</script>";
var headerIcon = '<div>hi</div>';
var messageBox = $("<div class='textDiv'><span class='sp'></span></div>");

$(document).ready(function(){
messageBox.text(txt);
//$(".textDiv .sp").text(txt);
$('#hel').append(headerIcon,messageBox);

});
</script>
</body>
</html> 
```

输出是

```
hi
<script>alert("Test");</script> 
```

但是如果我使用 $(".textDiv .sp").text(txt); 而不是 messageBox.text(txt); 输出只有 hi 当我使用 $(".textDiv .sp").text(txt); 时出了什么问题？

编辑：我不想注入 html。我只想显示为文本。但我只想知道为什么 messageBox.text(txt); 有效，但 $(".textDiv .sp").text(txt); 不

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:57:15.200

`text()`正在转义 html 标签，如果您需要将 html 注入到您的文档中，那么使用`html()` [http://api.jquery.com/html/](http://api.jquery.com/html/)

编辑：我认为`$(".textDiv .sp").text(txt);`它不起作用，因为在那个阶段该元素尚未注入 DOM，而您正试图从 DOM 中选择它

尝试`console.log( $(".textDiv .sp") )`，看看会返回什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:01:13.637

尝试这样的事情。据我了解，它应该会有所帮助：

```
$(document).ready(function(){
   $('#hel').append(headerIcon,messageBox);
   $(".textDiv .sp").text(txt);
} 
```

`$(".textDiv .sp")`调用时在消息框中`$(".textDiv .sp").text(txt)`，但不在 DOM 中。这就是为什么它什么也没找到（`$(".textDiv .sp")`只会搜索 DOM 中已经存在的元素）。另一种方法：

```
 $(document).ready(function(){
       $(".textDiv .sp", messageBox).text(txt);
       $('#hel').append(headerIcon,messageBox);       
    } 
```

`$(".textDiv .sp", messageBox).text('txt');`- 这里的第二个参数严格说 jQuery 应该在里面搜索`messageBox`。是等价的`to messageBox.find(".textDiv .sp").text("txt");`

就像其他用户提到的那样——如果你想被`"<script>alert("Test");</script>"`执行——你应该使用`.html`而不是`.text`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:01:23.870

代替

> $(".textDiv .sp").text(txt); ,

采用

> $(".textDiv .sp").html(txt);.

当您使用`.text()`浏览器时，您想要放置的任何内容都不会解析为 html。它将显示为简单的文本。所以就`.html()`改用吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T09:03:02.203

顺便说一句，您的报价失败：

```
 txt="<script>alert("Test");</script>"; 
```

您可以转义字符串中的斜杠或使用单引号

```
txt="<script>alert(\"Test\");</script>"; //or
txt="<script>alert('Test');</script>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T09:04:47.880

*检查test*周围的引号。您需要使用单引号而不是双引号对其进行转义。

```
txt="<script>alert('Test');</script>"; 
```

# android - 安卓应用黑屏

> ID：13413255
> 
> 赞同：3
> 
> 时间：2012-11-16T08:54:31.343
> 
> 标签：android, cocos2d-x

我正在使用显示背景图像（使用 cocos2d-x 框架）的 cpp 开发非常基本的 android 应用程序。

该应用程序编译良好，.apk 文件有我正在使用的 png 文件。但是在 Galaxy Note (Android 4.1) 上启动它时，它只显示黑屏。我还尝试添加背景声音，看看它是否播放，但没有运气。

我也尝试使用动态库而不是静态库，但没有运气。Android调试部分工作，所以我无法成功调试它。

谁能帮忙，我的设置有什么问题？对不起，长篇大论。

我的 Android 和应用程序 mk 文件看起来像这样 -

====================================

## ../类/Android.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_logic_static

LOCAL_MODULE_FILENAME := libgame_logic

LOCAL_SRC_FILES := AppDelegate.cpp \

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH) \
                        $(LOCAL_PATH)/../.. \

LOCAL_STATIC_LIBRARIES := png_static_prebuilt
LOCAL_STATIC_LIBRARIES += xml2_static_prebuilt
LOCAL_STATIC_LIBRARIES += jpeg_static_prebuilt
LOCAL_WHOLE_STATIC_LIBRARIES += cocos2dx_static
LOCAL_WHOLE_STATIC_LIBRARIES += cocosdenshion_static

include $(BUILD_STATIC_LIBRARY)

$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libpng)
$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libxml2)
$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libjpeg) 
```

====================================

## ../jni/Android.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

subdirs := $(addprefix $(LOCAL_PATH)/../../../,$(addsuffix /Android.mk, \
           cocos2dx \
           CocosDenshion/android \
              \
           ))

subdirs += $(LOCAL_PATH)/../../Classes/Android.mk $(LOCAL_PATH)/hellocpp/Android.mk

include $(subdirs) 
```

* * *

## ../jni/hellocpp/Android.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := main.cpp \
                   ../../../Classes/HelloWorldScene.cpp \

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH) \
                        $(LOCAL_PATH)/../../../../ \
                        $(LOCAL_PATH)/../../../../CocosDenshion/android \
                        $(LOCAL_PATH)/../../../../CocosDenshion/android/jni \
                        $(LOCAL_PATH)/../../../../CocosDenshion/include \

LOCAL_STATIC_LIBRARIES := png_static_prebuilt
LOCAL_STATIC_LIBRARIES += xml2_static_prebuilt
LOCAL_STATIC_LIBRARIES += jpeg_static_prebuilt
LOCAL_STATIC_LIBRARIES += curl_static_prebuilt
LOCAL_WHOLE_STATIC_LIBRARIES := game_logic_static
LOCAL_WHOLE_STATIC_LIBRARIES += cocos2dx_static
LOCAL_WHOLE_STATIC_LIBRARIES += cocosdenshion_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libcurl)
$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libpng)
$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libxml2)
$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libjpeg) 
```

* * *

## ../jni/Application.mk：

```
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti
APP_MODULES := cocos2dx_static cocosdenshion_static game_logic_static game_shared 
```

====================================

如果您对这些 mk 文件中的重复项有任何清理建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:53:47.793

您是否提供了背景精灵中使用的正确资源名称？

您还可以检查您正在访问的资源是否存在于您的资产中？

# android - 使用 ID 的字符串形式从 strings.xml 中获取字符串

> ID：13413256
> 
> 赞同：1
> 
> 时间：2012-11-16T08:54:36.243
> 
> 标签：android, xml, string

在 Android 中，要从`strings.xml`文件中访问字符串，我们使用`R.string.string_id`. 是否有可能有一种方法让我们使用 的字符串形式`string_id`？我的意思是我们可以有一个方法`GetString("string_id")`来检索`R.string.string_id`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:18:12.933

```
//Replace this with appropriate context
String name = "name_of_your_string_in_strings_xml_file_goes_here";
int resId = this.getResources().getIdentifier(name, "string", this.getPackageName());
String string = this.getResources().getString(resId); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T09:02:28.103

有可能的。您必须了解在 android 中固定到 xml 文件的任何数据都被视为应用程序的资源这一事实。android 资源只能通过我们提供给它们的唯一 ID 来访问。这些生成的 id 是**int**类型的，因此我们需要传递一个 int 参数来在运行时获取对这些资源的引用。

但是，访问它们的唯一默认方法是使用它们的 res 值，而是如果您知道字符串键的名称，您可以从那里找到 id，然后使用 int id 来执行此操作。

# python - 如何捕获尚未完全导入的模块的异常？

> ID：13413258
> 
> 赞同：10
> 
> 时间：2012-11-16T08:54:45.537
> 
> 标签：python, exception, try-catch

通常，如果我 import `socket`，我将能够轻松捕获异常：

```
>>> import socket
>>> try:
...     socket.gethostbyname('hello')
... except socket.gaierror:
...     print('oops')
...
oops 
```

但是，如果我只是 import `socket.gethostbyname`，它将无法正常工作：

```
>>> from socket import gethostbyname
>>> try:
...     gethostbyname('hello')
... except socket.gaierror:
...     print('oops')
...
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
NameError: name 'socket' is not defined 
```

`NameError`如果我尝试抓住，我也会得到一个`gaierror`。

有什么解决方法吗？`except 'socket.gaierror':`不能用字符串（例如。 ）捕获异常吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-16T09:00:02.010

如果您不想导入完整的模块，您也可以简单地导入异常。PEP8 声明您可以这样做。

```
from socket import gethostbyname, gaierror 
```

[http://www.python.org/dev/peps/pep-0008/#imports](http://www.python.org/dev/peps/pep-0008/#imports)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T08:57:12.990

在这种情况下，您应该使用 :`from socket import gethostbyname,gaierror`然后尝试：

```
except gaierror:
    print('oops') 
```

那是因为`from socket import gethostbyname`相当于：

```
import socket
gethostbyname=socket.gethostbyname
del socket 
```

所以`socket`从命名空间中删除，你得到了`NameError`.

# .net - MsmqIntegrationBinding 与 NetMsmqBinding

> ID：13413264
> 
> 赞同：7
> 
> 时间：2012-11-16T08:54:57.777
> 
> 标签：.net, wcf

我知道我们可以将上述绑定用于 MSMQ 应用程序。

这也是其他客户（.net除外）的消耗品吗？

有什么不同...？一些实时的例子会帮助我。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T09:13:06.757

它们是完全不同的绑定（即使它们在 .NET 中共享一个大的实现基础`MsmqBindingBase`）并且`NetMsmqBinding`只能与其他 .NET WCF 客户端一起使用。`MsmqIntegrationBinding`旨在用于当您的应用程序必须与使用 MSMQ 进行通信的旧应用程序（任何语言）互操作时，来自 MSDN：

> 此绑定 [MsmqIntegrationBinding] 可用于使 WCF 应用程序能够向使用 COM、本机 C++ API 或 System.Messaging 命名空间中定义的类型的现有 MSMQ 应用程序发送和接收消息。

这些绑定之间最明显的区别可以总结为`MsmqIntegrationBinding`缺乏：

*   安全支持非常微不足道（安全通道呢？）。
*   合同接口受到更多限制（因为它必须与非 .NET 应用程序互操作）。
*   地址的语法与其他 WCF 绑定不同（请`EndpointAddress`参阅 MSDN 中的示例）。
*   您不能使用所有消息的功能（例如编码）。

有关这方面的更多详细信息，请查看这篇关于[WCF 中 MsmqIntegrationBinding 的](http://consultingblogs.emc.com/simonevans/archive/2007/09/17/A-comprehensive-guide-to-using-MsmqIntegrationBinding-with-MSMQ-3.0-in-WCF.aspx)博客文章。

那么什么时候使用它们呢？我认为任何新的 WCF 应用程序都应该始终使用`NetMsmqBinding`，`MsmqIntegrationBinding`仅保留与现有应用程序的兼容性。来自 MSDN：

> NetMsmqBinding 绑定通过使用消息队列 (MSMQ) 作为传输来支持队列，并支持松散耦合的应用程序、故障隔离、负载均衡和断开连接的操作。

# delphi - 在 Delphi XE2 上使用 MSBuild 编译运行时包时出现编译器错误

> ID：13413267
> 
> 赞同：4
> 
> 时间：2012-11-16T08:55:07.120
> 
> 标签：delphi, continuous-integration, delphi-xe2

我正在将我们的构建服务器 (Jenkins) 升级到 Delphi XE2。编译运行时包时出现以下错误：

```
ComponentsR.vrc(61): error RC2135: file not found: ComponentsR_Icon4.ico 
```

此运行时包中没有图标或资源，因此我不知道如何处理此消息。顺便说一句，“vrc”文件是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:01:34.203

升级软件包的 dproj 文件时会发生这种情况。条目已创建，但 ico 文件未创建（无论如何都未使用）。

打开 dproj 文件，搜索 ico 名称并删除该条目。

# objective-c - 是什么减慢了 GKSession 的网络吞吐量？

> ID：13413271
> 
> 赞同：0
> 
> 时间：2012-11-16T08:55:17.043
> 
> 标签：objective-c, ios, networking, real-time, gksession

[我根据 Ray Wenderlich 的 GKSession教程](http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1)和 Matt Ghallagher 的音频流[教程](http://www.cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)实现了一个应用程序，它可以将音乐从一部 iPhone 实时广播到另一部 iPhone 。

一切都很完美……直到我们决定用我们自己的 UI 替换扑克游戏 UI。结果是网络吞吐量突然急剧下降。下面是服务器的分析器快照![这是服务器的分析器](../Images/12dda8fc7428f70fe9dfe3477d912ddc.png)

这是原始应用程序客户端的快照![在此处输入图像描述](../Images/9127ab03d2973b30cc9f1c5849be022b.png)

这是应用程序客户端的快照，其中包含更新的 UI（主机与旧的相同）： ![在此处输入图像描述](../Images/b4c514f384242276dddcf104998e5f03.png)

需要记住的一件事是，我们不仅更改了 UI.. 我们还更改了一些网络代码.. 我认为这会减慢速度（我在 UI 上做了很多性能测试。 . 消除所有的花里胡哨，我得到了同样的慢下来）..

有任何想法吗？一些人[建议](https://bugzilla.xamarin.com/show_bug.cgi?id=4910#c11)保持 GKSession 广播可用性会减慢速度。我确保在我的应用程序中不是这种情况。

**更新：** 查看网络分析（使用仪器）后，似乎某些未知进程有很多网络活动..有没有办法检测到那个未知进程？这是好应用程序的屏幕截图：![在此处输入图像描述](../Images/ecb54108b0749470d79241ff1ff27661.png)

这是坏应用程序的屏幕截图：![在此处输入图像描述](../Images/bc914b6f6967896dcee6ca5d74ad17cb.png)

注意两者之间的区别：其中一个*使用*比另一个更多的网络活动..想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:06:40.113

事实证明，我有两个不同的对象指向同一个 GKSession 实例变量..由于某些原因减慢了速度..令人沮丧的部分是 GKSession 是如此不透明，因此任何调试都几乎是猜测。经验教训..我下次直接使用bonjour。

# java - 具有弱值的 HashMap

> ID：13413272
> 
> 赞同：26
> 
> 时间：2012-11-16T08:55:19.353
> 
> 标签：java, android, hashmap, weak-references

我正在为持久存储的对象实现缓存。这个想法是：

*   方法`getObjectFromPersistence(long id); ///Takes about 3 seconds`
*   方法`getObjectFromCache(long id) //Instantly`

并有一个方法：`getObject(long id)`使用以下伪代码：

```
synchronized(this){
    CustomObject result= getObjectFromCache(id)
    if (result==null){
       result=getObjectFromPersistence(id);
       addToCache(result);
    }
    return result;
} 
```

但我需要允许垃圾收集器收集 CustomObject。到目前为止，我一直在使用一个`HashMap<Long,WeakReference<CustomObject>`实现。问题是随着时间的推移 HashMap 变得充满了 empty `WeakReferences`。

我检查了[WeakHashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/WeakHashMap.html)但那里的键很弱（并且值仍然是强引用），所以使用 Wea​​kReferences 的 long 没有任何意义。

解决此问题的最佳解决方案是什么？是否有一些“逆 WeakHashMap”或类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-16T09:06:37.233

您可以为此使用[番石榴：](https://code.google.com/p/guava-libraries/) [`MapMaker`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/MapMaker.html)

```
ConcurrentMap<Long, CustomObject> graphs = new MapMaker()
   .weakValues()
   .makeMap(); 
```

您甚至可以通过替换`makeMap()`以下内容来包含计算部分：

```
 .makeComputingMap(
       new Function<Long, CustomObject>() {
         public CustomObject apply(Long id) {
           return getObjectFromPersistence(id);
         }
       }); 
```

由于您正在编写的内容看起来很像缓存，因此更新、更专业的[`Cache`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/cache/Cache.html)（通过 a 构建[`CacheBuilder`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html)）可能与您更相关。它不`Map`直接实现接口，但提供了更多您可能需要的缓存控件。

您可以参考[这里](http://www.baeldung.com/guava-cache)详细了解如何为 CacheBuilder 工作，这里是一个快速访问的示例：

```
LoadingCache<Integer, String> cache = CacheBuilder.newBuilder()
   .maximumSize(100)
   .expireAfterWrite(10, TimeUnit.MINUTES)
   .build(
       new CacheLoader<Integer, String>() {
           @Override
           public String load(Integer id) throws Exception {
               return "value";
           }
       }
   ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T09:09:34.287

A在收集其引用时`WeakReference`添加到其[`ReferenceQueue`](https://docs.oracle.com/javase/8/docs/api/java/lang/ref/ReferenceQueue.html)提供的构建时间。

每当您访问缓存时，`poll`您都可以知道如果在队列中找到引用，则知道要删除哪个条目。`ReferenceQueue``HashMap<WeakReference<CustomObject>,Long>`

或者，如果缓存不经常使用，您可以在单独的线程中[查看队列。](http://docs.oracle.com/javase/8/docs/api/java/lang/ref/ReferenceQueue.html#remove())

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T09:10:27.363

您是否尝试过[`android.util.LruCache`](https://developer.android.com/reference/android/util/LruCache.html)（它是一个 SDK11 类，但它也在兼容包中[`android.support.v4.util.LruCache`](https://developer.android.com/reference/android/support/v4/util/LruCache.html)）。它没有实现`java.util.Map`，但像 Map 一样工作，您可以定义它需要多少内存，它会刷新旧的（未使用的缓存对象本身）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-17T19:02:11.693

您还可以从 jboss-common [http://docs.jboss.org/jbossas/javadoc/4.0.2/org/jboss/util/collection/WeakValueHashMap.java.html测试 WeakValueHashMap](http://docs.jboss.org/jbossas/javadoc/4.0.2/org/jboss/util/collection/WeakValueHashMap.java.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T08:59:03.290

你可以开始一个“清理” - 每隔一段时间线程。也许如果您的地图大小超过阈值，但最多每 5 分钟一次......类似的事情。

保持清理周期短，以免阻塞主要功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-13T23:13:04.213

我认为最好的选择（如果不希望依赖 Guava）是使用一个自定义的 WeakReference 子类来记住它的 ID，这样你的清理线程就可以在清理 WeakReferences 期间删除弱值。

弱引用的实现，以及必要的 ReferenceQueue 和清理线程看起来像这样：

```
class CustomObjectAccess {

    private static final ReferenceQueue<CustomObject> releasedCustomObjects = 
                                                                  new ReferenceQueue<>();

    static {
        Thread cleanupThread = new Thread("CustomObject cleanup thread")                  
            while (true) {
                CustomObjectWeakReference freed = (CustomObjectWeakReference) 
                                CustomObjectWeakReference.releasedCustomObjects.remove();
                cache.remove(freed.id);
            }
        };
        cleanupThread.start();
    }

    private Map<CustomObjectID, CustomObjectWeakReference> cache;

    public CustomObject get(CustomObjectID id) {
        synchronized(this){
            CustomObject result= getFromCache(id);
            if (result==null) {
                result=getObjectFromPersistence(id);
                addToCache(result);
            }
        }
        return result;
    }

    private addToCache(CustomObject co) {
        cache.put(CustomObject.getID(), new CustomObjectWeakReference(co));
    }

    private getFromCache(CustomObjectID id) {
        WeakReference<CustomObject> weak = cache.get(id);
        if (weak != null) {
            return weak.get();
        }
        return null;
    }

    class CustomObjectWeakReference extends WeakReference<CustomObject> {

        private final CustomObjectID id;

        CustomObjectWeakReference(CustomObject co) {
            super(co, releasedCustomObjects);
            this.id = co.getID();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-01T09:40:42.513

我需要存储标记的弱对象并计算而不是 using `WeakHashMap<String, T>`，我可以`WeakHashMap<T, String>`改为使用。

这是 Kotlin，但同样适用于 Java：

```
abstract class InstanceFactory<T> {
    @Volatile
    private var instances: MutableMap<T, String> = WeakHashMap<T, String>()

    protected fun getOrCreate(tag: String = SINGLETON, creator: () -> T): T =
        findByTag(tag)?.let {
            it
        } ?: synchronized(this) {
            findByTag(tag)?.let {
                it
            } ?: run {
                creator().also {
                    instances[it] = tag
                }
            }
        }

    private fun findByTag(tag: String): T? = instances.entries.find { it.value == tag }?.key

    companion object {
        const val SINGLETON = "singleton"
    }
} 
```

这可以按如下方式使用：

```
class Thing(private val dependency: Dep) { ... }

class ThingFactory(private val dependency: Dep) : InstanceFactory<Thing>() {

    createInstance(tag: String): Thing = getOrCreate(tag) { Thing(dependency) }

} 
```

简单的单例可以这样完成：

```
object ThingFactory {
    getInstance(dependency: Dependency): Thing = getOrCreate { Thing(dependency) }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-17T13:03:52.143

[Apache Commons Collections](https://commons.apache.org/collections/)中有[ReferenceMap](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/ReferenceMap.html)，这是一个带有硬键和软值的映射实现（与 WeakHashMap 相反）。

# sql - 为级联删除构建单个查询

> ID：13413284
> 
> 赞同：1
> 
> 时间：2012-11-16T08:55:54.003
> 
> 标签：sql

我有一个关于 SQL 中的 DELETE 查询的问题。我有 3 个子表说 B、C、D 和一个父表 A。A 的主键在其所有子表中共享。如果我必须从子表中删除一条记录，然后在单个 SQL 中从父表中删除，那么有可能吗？如果是的话，你能指导我一个 SQL 查询结构吗？如果不是，至少可以在单个查询中从子表中删除记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:12:41.963

如果您没有带有 ON DELETE CASCADE 的外键，那么您应该使用事务来执行此操作：

```
BEGIN;
  DELETE FROM B WHERE ...
  DELETE FROM C WHERE ...
  DELETE FROM D WHERE ...
COMMIT; 
```

添加：如果您使用 mysql 阅读[DELETE 文档](http://dev.mysql.com/doc/refman/5.0/en/delete.html)并在此处讨论[stackoverflow delete-from-two-tables-in-one-query](https://stackoverflow.com/questions/1233451/delete-from-two-tables-in-one-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:40:48.320

Nahue 的评论和 sufleR 的回答是正确的。如果您在外键关系上指定了 ON DELETE CASCADE，您将能够使用单个`DELETE`语句从所有这些表中删除。

如果您没有强制执行此约束，您可以使用`ALTER TABLE`语句强制执行它。我会将您的架构视为

```
A (a_pk, ...) -- PRIMARY KEY specified on a_pk
B (b_pk, a_fk, ...)
C (c_pk, a_fk, ...)
D (d_pk, a_fk, ...) 
```

然后，

```
ALTER TABLE b
ADD CONSTRAINT b_a_fk
a_fk REFERENCES a(a_pk) ON DELETE CASCADE;

ALTER TABLE c
ADD CONSTRAINT c_a_fk
a_fk REFERENCES a(a_pk) ON DELETE CASCADE;

ALTER TABLE d
ADD CONSTRAINT d_a_fk
a_fk REFERENCES a(a_pk) ON DELETE CASCADE; 
```

所有表都将对所有这些表强制执行`FOREIGN KEY`带有`ON DELETE CASCADE`引用的约束。

现在，如果你发出

```
DELETE FROM a WHERE a_pk = <some value> 
```

那么这将删除 B、C 和 D 中的记录，其中每个`a_fk = <some value>`.

请注意，我在查询中使用了 Oracle 语法。您必须将它们转换为适合您的 DBMS 语法，但我认为这没有必要，因为这是标准语法。

# java - 如何将数据从 Ext.FormPanel 保存到服务器？

> ID：13413287
> 
> 赞同：0
> 
> 时间：2012-11-16T08:56:05.747
> 
> 标签：java, javascript, extjs

我有一个商店和一个`FormPanel`。我想将数据从服务器发送`FormPanel`到服务器：

```
 var store_form=null;
 store_form = new Ext.data.Store({                
        url: url_servlet+"kadastr_zemform.jsp",
        reader: new Ext.data.XmlReader({
        totalProperty: "results", 
        record: "contact",
                        fields: [
       ]}),

    });    

});
store_form.load(); 
```

控制板

```
var podform = new Ext.FormPanel({
    labelAlign: 'left',
    id: 'tab_6',
    frame:true,
    title: 'Договоры подряда',
    bodyStyle:'padding:5px 5px 0',
    width: 600,
            reader: new Ext.data.XmlReader({}),
    listeners: {
        'activate' :  function(pod_form,records,options) {
        console.log("store:"+store_form);
        this.loaded = true;
        //alert("loaded");
        //console.log(store.getAt(0));
        var record = store_form.getAt(0);
        podform.getForm().loadRecord(record);
        }
    },
            fields[]
 });

podform.addButton({
    text: 'Submit',
    //disabled:true,
    handler: function(){
    podform.getForm().submit({url:url_servlet+'submit.jsp', waitMsg:'Saving Data...', submitEmptyText: false});
    }
}); 
```

在萤火虫中，我可以看到没有任何东西发送到服务器。我究竟做错了什么？另一个问题：我可以在服务器端做什么来获取这些数据？

**更新**

我忘了添加`XMLReader`表格。但一切都没有改变。

**更新2**

现在参数被发送到服务器：![在此处输入图像描述](../Images/b78f12ca1551fb2ae254a6b59feffd37.png) 但我收到一个错误：

```
SyntaxError: syntax error

...ayer=a;this.activate()}else{this.layer=a}},setTargets:function(b){this.targets=[... 
```

# java - 如何防止将 JLabel 拖到 JDesktopPane 边界之外？

> ID：13413288
> 
> 赞同：-2
> 
> 时间：2012-11-16T08:56:09.553
> 
> 标签：java, swing, drag-and-drop, jlabel, jdesktoppane

如何防止将 JLabel 拖到 JDesktopPane 边界之外？

我做过一个应用，里面有一个JLabel放在JDesktopPane里面，JLabel可以拖到任何地方，但是拖的时候问题是JLabel可以拖到JDesktopPane的边界外吗？谁能告诉我如何防止这种情况？

并且

在应用程序中，任何人都可以告诉我如何通过双击来编辑 JLabel 文本值。目前我已经通过**JOptionPane.showInputDialog()**完成了，我们可以通过双击来编辑 JLabel 的文本并以任何其他方式编辑它而不是使用**JOptionPane.showInputDialog**

我的代码是这个

```
import java.awt.Point;
import javax.swing.*;

public class Testing extends javax.swing.JFrame {
private int clicX = 0,clicX1 = 0;
private int clicY = 0,clicY1 = 0;
private boolean drag = false,drag1 = false;

    public Testing() {
        initComponents();
        headlabel.setVisible(false);
        footlabel.setVisible(false);
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code"> 
```

//自动生成的代码

```
 private void initComponents() {
            head = new javax.swing.JCheckBox();
            jDesktopPane1 = new javax.swing.JDesktopPane();
            headlabel = new javax.swing.JLabel();
            footlabel = new javax.swing.JLabel();
            foot = new javax.swing.JCheckBox();
            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
            head.setText("Head");
            head.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    headActionPerformed(evt);
                }
            });       jDesktopPane1.setBackground(javax.swing.UIManager.getDefaults().getColor("Button.background"));
            headlabel.setBackground(new java.awt.Color(255, 255, 255));
            headlabel.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
            headlabel.setForeground(new java.awt.Color(255, 255, 255));
            headlabel.setText("Heading");
            headlabel.addMouseListener(new java.awt.event.MouseAdapter() {
                public void mouseClicked(java.awt.event.MouseEvent evt) {
                    headlabelMouseClicked(evt);
                }
                public void mousePressed(java.awt.event.MouseEvent evt) {
                    headlabelMousePressed(evt);
                }
                public void mouseReleased(java.awt.event.MouseEvent evt) {
                    headlabelMouseReleased(evt);
                }
            });
            headlabel.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
                public void mouseDragged(java.awt.event.MouseEvent evt) {
                    headlabelMouseDragged(evt);
                }
            });
            headlabel.setBounds(80, 20, 100, 20);
            jDesktopPane1.add(headlabel, javax.swing.JLayeredPane.DEFAULT_LAYER);

            footlabel.setBackground(new java.awt.Color(255, 255, 255));
            footlabel.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
            footlabel.setForeground(new java.awt.Color(255, 255, 255));
            footlabel.setText("Foot");
            footlabel.addMouseListener(new java.awt.event.MouseAdapter() {
                public void mouseClicked(java.awt.event.MouseEvent evt) {
                    footlabelMouseClicked(evt);
                }
                public void mousePressed(java.awt.event.MouseEvent evt) {
                    footlabelMousePressed(evt);
                }
                public void mouseReleased(java.awt.event.MouseEvent evt) {
                    footlabelMouseReleased(evt);
                }
            });
            footlabel.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
                public void mouseDragged(java.awt.event.MouseEvent evt) {
                    footlabelMouseDragged(evt);
                }
            });
            footlabel.setBounds(100, 280, 100, 20);
            jDesktopPane1.add(footlabel, javax.swing.JLayeredPane.DEFAULT_LAYER);

            foot.setText("Foot");
            foot.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    footActionPerformed(evt);
                }
            });

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(head, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(foot, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 52, Short.MAX_VALUE)
                    .addComponent(jDesktopPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 264, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jDesktopPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 305, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(layout.createSequentialGroup()
                            .addGap(52, 52, 52)
                            .addComponent(head)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(foot)
                            .addGap(0, 0, Short.MAX_VALUE)))
                    .addContainerGap())
            );

            pack();
}// </editor-fold> 
```

// 函数定义

```
 private void headlabelMouseClicked(java.awt.event.MouseEvent evt) {                                       
            if (evt.getClickCount() == 2) {
            String str = JOptionPane.showInputDialog(null, "Enter text : ", "Enter text", 1);

             Point location = headlabel.getLocation();

             headlabel.setLocation(location);
             headlabel.setText(str);
            }

    }                                      

    private void headlabelMouseReleased(java.awt.event.MouseEvent evt) {                                        
                // drag = false;
    }                                       

    private void headlabelMousePressed(java.awt.event.MouseEvent evt) {                                       
                drag = true;
                if (evt.getSource() == headlabel) {
                }
                if (evt.getSource() == headlabel) {
                clicX = evt.getX();
                clicY = evt.getY();
                }
    }                                      

    private void headlabelMouseDragged(java.awt.event.MouseEvent evt) {                                       
                if (evt.getSource() == headlabel) {

                javax.swing.JComponent jc = (javax.swing.JComponent)evt.getSource();
                jc.setLocation(jc.getX()+evt.getX()-clicX, jc.getY()+evt.getY()-clicY);

                }
    }                                      

    private void headActionPerformed(java.awt.event.ActionEvent evt) {                                     
             if (head.isSelected()) {
                    headlabel.setVisible(true);
                } else {
                    headlabel.setVisible(false);
                }
    }                                    

    private void footlabelMouseClicked(java.awt.event.MouseEvent evt) {                                       
               if (evt.getClickCount() == 2) {
            String str = JOptionPane.showInputDialog(null, "Enter text : ", "Enter text", 1);

             Point location = footlabel.getLocation();

             footlabel.setLocation(location);
             footlabel.setText(str);
            }
    }                                      

    private void footlabelMousePressed(java.awt.event.MouseEvent evt) {                                       
                 drag1 = true;
                if (evt.getSource() == footlabel) {
                }
                if (evt.getSource() == footlabel) {
                clicX1 = evt.getX();
                clicY1 = evt.getY();
                }
    }                                      

    private void footlabelMouseReleased(java.awt.event.MouseEvent evt) {                                        
                // TODO add your handling code here:
    }                                       

    private void footlabelMouseDragged(java.awt.event.MouseEvent evt) {                                       
               if (evt.getSource() == footlabel) {

                javax.swing.JComponent jc = (javax.swing.JComponent)evt.getSource();
                jc.setLocation(jc.getX()+evt.getX()-clicX1, jc.getY()+evt.getY()-clicY1);
                }
    }                                      

    private void footActionPerformed(java.awt.event.ActionEvent evt) {                                     
               if (foot.isSelected()) {
                    footlabel.setVisible(true);
                } else {
                    footlabel.setVisible(false);
                }
    }                                    

    public static void main(String args[]) 
    {
                try {
                    for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            javax.swing.UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (ClassNotFoundException ex) {
                    java.util.logging.Logger.getLogger(Testing.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
                } catch (InstantiationException ex) {
                    java.util.logging.Logger.getLogger(Testing.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
                } catch (IllegalAccessException ex) {
                    java.util.logging.Logger.getLogger(Testing.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
                } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                    java.util.logging.Logger.getLogger(Testing.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
                }

                java.awt.EventQueue.invokeLater(new Runnable() {

                    public void run() {
                        new Testing().setVisible(true);
                    }
                });
            }
            // Variables declaration - do not modify
            private javax.swing.JCheckBox foot;
            private javax.swing.JLabel footlabel;
            private javax.swing.JCheckBox head;
            private javax.swing.JLabel headlabel;
            private javax.swing.JDesktopPane jDesktopPane1;
            // End of variables declaration
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:39:25.000

基本思想是防止组件超出其父边界。因此，在更改标签位置时，在鼠标侦听器/拖动器中，您应该验证标签的边界是否保持在标签父级的边界内。如果不是，那么您应该“修复”边界，以便标签保持在其父组件的边界内。

这是一个示例（它不使用 JDesktopPane，但解决方案应该类似）。它缺少一些小的调整，但基本上效果很好：

```
import java.awt.Component;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class TestLimitedDrag {

    public static class MouseDragger extends MouseAdapter {
        private Point startPoint;
        private Component draggedObject;

        @Override
        public void mousePressed(MouseEvent e) {
            draggedObject = (Component) e.getSource();
            startPoint = SwingUtilities.convertPoint(draggedObject, e.getPoint(), draggedObject.getParent());
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            Point location = SwingUtilities.convertPoint(draggedObject, e.getPoint(), draggedObject.getParent());
            if (draggedObject.getParent().getBounds().contains(location)) {
                Point newLocation = draggedObject.getLocation();
                newLocation.translate(location.x - startPoint.x, location.y - startPoint.y);
                newLocation.x = Math.max(newLocation.x, 0);
                newLocation.x = Math.min(newLocation.x, draggedObject.getParent().getWidth() - draggedObject.getWidth());
                newLocation.y = Math.max(newLocation.y, 0);
                newLocation.y = Math.min(newLocation.y, draggedObject.getParent().getHeight() - draggedObject.getHeight());
                draggedObject.setLocation(newLocation);
                startPoint = location;
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            startPoint = null;
            draggedObject = null;
        }

        public void makeDraggable(Component component) {
            component.addMouseListener(this);
            component.addMouseMotionListener(this);
        }

    }

    private void initUI() {
        JFrame frame = new JFrame(TestLimitedDrag.class.getSimpleName());
        frame.setLayout(null);
        MouseDragger dragger = new MouseDragger();
        JLabel labelToDrag = new JLabel("Drag me");
        dragger.makeDraggable(labelToDrag);
        frame.add(labelToDrag);
        labelToDrag.setSize(labelToDrag.getPreferredSize());
        labelToDrag.setLocation(50, 50);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestLimitedDrag().initUI();
            }
        });
    }

} 
```

# c - 通过更改c中的权限制作文件夹锁定软件

> ID：13413292
> 
> 赞同：0
> 
> 时间：2012-11-16T08:56:52.797
> 
> 标签：c, security, permissions, dos

我正在创建更改文件夹权限的 ac 可执行文件。

```
#include<stdio.h>
#include<dos.h>
main()
{
system("cacls foldername /e /p everyone:n");
} 
```

它会生成一个文件，该文件应该存在于文件夹所在的位置，我们必须在编译时添加文件夹名称。但是当我这样做时

```
char foldername[15];
printf("Enter the foldername");
scanf("%s",foldername);
system("cacls %s /e /p everyone:n"); 
```

然后它不工作......！请在这件事上给予我帮助 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:04:16.483

你的电话`system()`根本没有用`foldername`。您需要制作命令字符串，然后调用`system()`：

```
char foldername[15];
printf("Enter the foldername");
scanf("%s", foldername);

char command[100];
sprintf(command, "cacls %s /e /p everyone:n", foldername);
system(command); 
```

当然，这段代码容易受到缓冲区溢出的影响：如果用户在其文件夹名称中输入超过 14 个字符，则调用`scanf()`写入`foldername`缓冲区之外，导致未定义的行为——可能会崩溃，也可能不会。您的问题被标记为 C++，它`std::string`为您管理安全的动态内存分配：

```
using namespace std;

string foldername;
cout << "Enter the folder name: ";
getline(cin, foldername);

ostringstream command;
command << "cacls " << foldername << " /e /p everyone:n";
system(command.str().c_str()); 
```

如果您确实在使用 C++，我更喜欢更安全的方法。

# android - 如何在 android 2.3 之前的平台上使用 android 4.0 中新增的 Animator 框架？

> ID：13413293
> 
> 赞同：1
> 
> 时间：2012-11-16T08:57:10.487
> 
> 标签：android, objectanimator

如何在 android 2.3 之前的平台上使用 android 4.0 中新增的 Animator 框架？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:26:00.787

使用[NineOldAndroids](http://nineoldandroids.com/)，Jake Wharton 对动画框架的支持。

# web-services - 在前端的数据库中检索 Magento 购物车商店？

> ID：13413297
> 
> 赞同：3
> 
> 时间：2012-11-16T08:57:26.197
> 
> 标签：web-services, magento, checkout, cart, shopping

我有 2 个网站：一个运行 Magento 的主要电子商务商店。另一个是手工自制店，我用的是第一个网站的magento产品。

在第二个网站上，我使用 magento 网络服务构建了一个购物车。我的购物车运行良好，但是当需要进行结帐时，我想在 magento 主网站上重定向以支付命令。

我的麻烦在这里：如何在购物车似乎存储在会话中的主要 magento 商店上使用 web 服务检索我的购物车构建？我发现购物车使用存储在“sales_quotes”表中的 Web 服务构建。如何让他们在前端？

问候，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:45:08.900

看看 mangento 如何通过传递会话 id 来处理多商店，如果您可以从您的 api/其他商店获取会话 id，那么您可以完成此操作。您也可以在重新创建购物车时尝试获取报价 ID 并将其转发到 magento 商店。

如果您使用商店 url 将产品添加到购物车（例如 http://magentoserver.com/checkout/cart/add?product=13&qty=1&options[12]=57）然后将它们重定向回您的其他商店，可能会更容易。这样您就不必尝试获取会话 ID。

# java - Java GUI 矩形图形

> ID：13413311
> 
> 赞同：1
> 
> 时间：2012-11-16T08:58:22.170
> 
> 标签：java, swing, graphics, jframe, paint

谁能解释在框架上绘制图形的正确方法？我查看了其他示例，这应该有效，但它没有。请参阅“绘画”方法。我试图画一个正方形（矩形），但它没有出现在我的框架上。

问候

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Colors extends javax.swing.JFrame {

    public Colors() {
        initComponents();
        addSliderListeners();
        addSliderLabels();
    }
    public void Paint(Graphics g){
        Graphics2D g2 = (Graphics2D)g;
        g2.setColor(Color.BLUE);
        g2.draw(new Rectangle(25,25,200,200));
    }
    private void addSliderListeners(){
        sliderRed.addChangeListener(new ChangeListener() {
            public void stateChanged(ChangeEvent e) {
                updateImage();
            }
        });
        sliderGreen.addChangeListener(new ChangeListener() {
            public void stateChanged(ChangeEvent e) {
                updateImage();
            }
        });
        sliderBlue.addChangeListener(new ChangeListener() {
            public void stateChanged(ChangeEvent e) {
                updateImage();
            }
        });
    }

    private void updateImage(){
        lblRedDec.setText(""+sliderRed.getValue());
        lblRedDec.setForeground(new Color(sliderRed.getValue(),0,0));
        lblRedHex.setText(Integer.toHexString(sliderRed.getValue()));
        lblRedHex.setForeground(lblRedDec.getForeground());
//Color textColor = new Color(    255-lblRedDec.getForeground().getRed(),
//                                255-lblRedDec.getForeground().getGreen(),
//                                255-lblRedDec.getForeground().getBlue()
//                            );
//jLabel1.setBackground(textColor);

        lblGreenDec.setText(""+sliderGreen.getValue());
        lblGreenDec.setForeground(new Color(0,sliderGreen.getValue(),0));
        lblGreenHex.setText(Integer.toHexString(sliderGreen.getValue()));
        lblGreenHex.setForeground(lblGreenDec.getForeground());

        lblBlueDec.setText(""+sliderBlue.getValue());
        lblBlueHex.setText(Integer.toHexString(sliderBlue.getValue()));
        lblBlueDec.setForeground(new Color(0,0,sliderBlue.getValue()));
        lblBlueHex.setForeground(lblBlueDec.getForeground());

    }

    private void addSliderLabels() {
        sliderRed.setPaintLabels(true);
        sliderGreen.setPaintLabels(true);
        sliderBlue.setPaintLabels(true);
    }
/**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        sliderRed = new javax.swing.JSlider();
        lblRed = new javax.swing.JLabel();
        lblRedHex = new javax.swing.JLabel();
        lblRedDec = new javax.swing.JLabel();
        sliderGreen = new javax.swing.JSlider();
        lblGreen = new javax.swing.JLabel();
        lblGreenHex = new javax.swing.JLabel();
        lblGreenDec = new javax.swing.JLabel();
        sliderBlue = new javax.swing.JSlider();
        lblBlue = new javax.swing.JLabel();
        lblBlueHex = new javax.swing.JLabel();
        lblBlueDec = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setResizable(false);

        sliderRed.setMajorTickSpacing(15);
        sliderRed.setMaximum(255);
        sliderRed.setMinorTickSpacing(5);
        sliderRed.setOrientation(javax.swing.JSlider.VERTICAL);
        sliderRed.setPaintTicks(true);
        sliderRed.setSnapToTicks(true);
        sliderRed.setToolTipText("");
        sliderRed.setValue(212);
        sliderRed.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        sliderRed.setName(""); // NOI18N

        lblRed.setText("Red");

        lblRedHex.setText("hex");

        lblRedDec.setText("dec");

        sliderGreen.setMajorTickSpacing(15);
        sliderGreen.setMaximum(255);
        sliderGreen.setMinorTickSpacing(5);
        sliderGreen.setOrientation(javax.swing.JSlider.VERTICAL);
        sliderGreen.setPaintTicks(true);
        sliderGreen.setSnapToTicks(true);
        sliderGreen.setToolTipText("");
        sliderGreen.setValue(35);
        sliderGreen.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        sliderGreen.setName(""); // NOI18N

        lblGreen.setText("Green");

        lblGreenHex.setText("hex");

        lblGreenDec.setText("dec");

        sliderBlue.setMajorTickSpacing(15);
        sliderBlue.setMaximum(255);
        sliderBlue.setMinorTickSpacing(5);
        sliderBlue.setOrientation(javax.swing.JSlider.VERTICAL);
        sliderBlue.setPaintTicks(true);
        sliderBlue.setSnapToTicks(true);
        sliderBlue.setToolTipText("");
        sliderBlue.setValue(218);
        sliderBlue.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        sliderBlue.setName(""); // NOI18N

        lblBlue.setText("Blue");

        lblBlueHex.setText("hex");

        lblBlueDec.setText("dec");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblRedHex)
                            .addComponent(lblRed)
                            .addComponent(lblRedDec))
                        .addGap(25, 25, 25))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(26, 279, Short.MAX_VALUE)
                        .addComponent(sliderRed, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(sliderGreen, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblGreenHex)
                            .addComponent(lblGreen)
                            .addComponent(lblGreenDec))
                        .addGap(25, 25, 25)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(sliderBlue, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblBlueHex)
                            .addComponent(lblBlue)
                            .addComponent(lblBlueDec))
                        .addGap(25, 25, 25)))
                .addGap(6, 6, 6))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblBlueDec)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblBlueHex)
                        .addGap(18, 18, 18)
                        .addComponent(lblBlue)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(sliderBlue, javax.swing.GroupLayout.PREFERRED_SIZE, 285, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblGreenDec)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblGreenHex)
                        .addGap(18, 18, 18)
                        .addComponent(lblGreen)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(sliderGreen, javax.swing.GroupLayout.PREFERRED_SIZE, 285, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblRedDec)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblRedHex)
                        .addGap(16, 16, 16)
                        .addComponent(lblRed)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(sliderRed, javax.swing.GroupLayout.PREFERRED_SIZE, 285, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Colors.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Colors.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Colors.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Colors.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Colors().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel lblBlue;
    private javax.swing.JLabel lblBlueDec;
    private javax.swing.JLabel lblBlueHex;
    private javax.swing.JLabel lblGreen;
    private javax.swing.JLabel lblGreenDec;
    private javax.swing.JLabel lblGreenHex;
    private javax.swing.JLabel lblRed;
    private javax.swing.JLabel lblRedDec;
    private javax.swing.JLabel lblRedHex;
    private javax.swing.JSlider sliderBlue;
    private javax.swing.JSlider sliderGreen;
    private javax.swing.JSlider sliderRed;
    // End of variables declaration

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:38:27.020

它是油漆（带有小写“p”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T16:58:42.503

正如CAMOBAB在评论中所说

在此方法之前更改`public void Paint(Graphics g)`并`public void paint(Graphics g)`添加注释`@Override`

# android - 插入关系

> ID：13413312
> 
> 赞同：0
> 
> 时间：2012-11-16T08:58:24.880
> 
> 标签：android, greendao

我有一个关系：一个订单包含许多订单项目。我想插入一条语句，而不是：插入订单，获取生成的订单 ID，为每个订单项目设置订单 ID，最后插入订单项目。

例如：

```
Order newOrder = new Order();
o.setItems(orderItems);
o.insert(); 
```

代替：

```
Order newOrder = new Order();
newOrder.insert();
foreach orderItems : orderItem.setOrderId(newOrder.getId());
orderItems.insert(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:26:34.830

greenDAO 不支持这个。

更新相关实体的列表并非易事，因为可以添加、更新或删除项目。greenDAO 不是 Hibernate，因此您需要手动执行这些操作。

# scrollbar - 在 Microsoft Access2007 中使用滚动条显示连续表单

> ID：13413318
> 
> 赞同：1
> 
> 时间：2012-11-16T08:58:44.443
> 
> 标签：scrollbar, ms-access-2007, continuous-forms

我有一个连续的表格，其中有许多控制元素排列在两列中。窗体使用 WindowMode 'acDialog' 打开。

当我在台式计算机上查看此表格时，没有问题。但我也想在我的笔记本电脑上使用该应用程序。当我在笔记本电脑上打开表单时，我只看到第一个条目，而不再看到其他条目。不幸的是，我还没有找到在我的表单中使用滚动条的机会。

我发现的是这个（没有用）： [添加或删除滚动条](http://office.microsoft.com/en-us/access-help/add-or-remove-scroll-bars-HP005187903.aspx)

编辑：视图应如下所示： ![右视图](../Images/2318a8fed4ceda6bbad0f7c23183c4a1.png)

但在我的笔记本电脑上它看起来像： ![错误的看法](../Images/ef908228faaf28fab162b0f5d8f45eb0.png)

所以我想要滚动条。滚动条属性设置为两个方向。

编辑 20121126，设计视图。蓝色部分是标题，txt 位于详细视图中，按钮位于页脚中： ![设计视图](../Images/0f2d7e71712171f1925b2a1bcd8947db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:43:08.703

这个问题之前一直困扰着我。如果屏幕设置为不同于 100% 的“缩放”，Access 不够智能。因此，Access 认为整个表单都在您的屏幕上，而实际上并非如此。

这实际上仅适用于您拥有 Windows 7 甚至 8 的情况，但我对此一无所知。如果您转到显示属性（右键单击桌面并选择“个性化”，然后在弹出窗口的左下角显示。）

如果您未设置为 100%，则访问会丢失 25-50% 的屏幕。访问会关闭分辨率中设置的像素，但是当使用 125% 时，Windows 会将所有内容扩展 25%，这可以将内容从屏幕上推开。表单不需要滚动条来适应您的屏幕，只需将缩放设置为 100%。

我通过将“控制栏”设置为距左侧 x-250 像素（其中 x 是从左到右的总像素）来发现这一点。但是，一台计算机永远看不到控制栏，这是因为屏幕为 +125%。我一直无法弄清楚如何从 Windows 获取当前的“缩放”。我已经搜索了各种 API。我希望这是您正在寻找的解决方案！祝你好运！！

# matlab - 创建用于出版的数字 - 出口的人工制品

> ID：13413319
> 
> 赞同：5
> 
> 时间：2012-11-16T08:58:45.437
> 
> 标签：matlab, pdf, latex, figure, eps

现在我已经尝试了几个小时从 3D matlab 图获得令人满意的矢量化输出。我在下图中说明了生成的 pdf 导出的人工制品（使用 export_fig -> -r2000 创建）。我知道这个问题在某种程度上与 pdf 查看器有关，但是没有解决方案可以为所有查看器获得兼容的输出吗？

此外，我尝试过像 plot2svg 和 matlab2tikz 这样的库，但它们似乎对我的一些表面图有问题，导致完全不同的问题。

如果没有其他方法可以创建图形的矢量化输出，您对高质量位图图形（尤其是关于字体模糊）有什么建议吗？

![Matlab 3D 人工制品](../Images/e2f406d264dae09c9e44747f68105ae9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:13:30.833

根据我的经验，导出 matlab 数字的结果并不令人满意。就个人而言，我更喜欢将数据导出到其他程序并在那里创建图。Excel 在处理多种类型的图形方面做得很好。你也可以试试 gnuplot。我知道这并不完全是您正在寻找的答案，但有时与其与 Matlab 抗争，不如将这份工作留给更适合的软件。

# javascript - JavaScript 只接受 0 到 255 范围内的数字

> ID：13413320
> 
> 赞同：2
> 
> 时间：2012-11-16T08:58:46.270
> 
> 标签：javascript

我的要求是验证 ip 范围，我需要创建一个 JavaScript 函数来仅接受数字，并且它必须只允许 0 到 255 之间的范围。如果输入超出该范围的任何内容，它必须发出一条消息。

我目前正在使用以下功能

```
<script language="JavaScript"> 

function allownums(a) 
{ 

if(a <48 ||a > 57) 
alert("invalid") 
else 
alert("vaild") 
} 

</script> 
<input type='text' id='numonly' onkeypress='allownums(event.keycode)'> 
```

我是 JavaScript 新手，需要一些专家建议来解决我的要求。请建议我

谢谢苏迪尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:03:44.103

目前你有测试

```
(a < 48) || (a > 57) 
```

对于无效值。所以我会改变那些：

```
(a < 0 ) || (a > 255) 
```

您可能还需要考虑如何处理 2.3 之类的非整数输入 - 将其舍入或将其视为无效。

目前，正如 Kelvin Mackay 指出的那样，您正在对 keypress 事件而不是输入值执行验证，因此将 onkeypress 更改为`allownums(this.value)`.

我建议将警报更改为 div 中的警告，并使用验证来启用/禁用提交按钮，因为弹出窗口在几乎所有情况下都很烦人。

在输入无效条目时清除输入（如评论中要求的那样）会使用户感到相当烦人；一旦按下一个键添加一个数字并使输入无效，整个输入被清除。但是，代码将是：

```
if(!validnum(this.value)) 
    this.value=""; 
```

在输入标签中，因此：

```
<input type='text' id='numonly' 
      onkeyup='if(!validnum(this.value)) this.value="";'> 
```

功能更改为：

```
function validnum(a) { 
    if(a < 0 || a > 255) 
        return false;
    else 
        return true;
} 
```

或更简洁地说：

```
function validnum(a) {
    return ((a >= 0) && (a <= 255));
} 
```

编辑：要提醒并清除该框，如果您必须：

```
function validOrPunchTheUser(inputElement) {
    if(!validnum(inputElement.value)) {
        window.alert('badness'); // punch the user
        inputElement.value = ""; // take away their things
    }
}

<input type='text' id='numonly' 
      onkeyup='validOrPunchTheUser(this)'> 
```

但是，阅读其他答案，显然您正在寻找验证八位字节（例如在 IP 地址中）。如果是这样，请在问题中说明这一点，因为它今天从我身边经过。对于八位字节：

```
function validateIPKeyPress(event) {
    var key = event.keyCode;
    var currentvalue = event.target.value;
    if(key < 96 || key > 105)
    {
        event.preventDefault();
        window.alert('pain');
        return false;
    }
    else if(currentvalue.length > 2 ||
            (currentvalue.length == 2 &&
             key > 101)) {
        window.alert('of death');
        event.preventDefault();
        event.target.value = event.target.value.substring(0,2);
    }
    else
        return true;
} 
```

使用输入标签：

```
<input type='text' id='octet'
          onkeydown='validateIPKeyPress(event)'> 
```

除非请不要使用警报。如果您取出警报线，它将默默地防止无效输入。请注意现在使用 onkeydown 的更改，以便我们可以捕获无效的按键并完全防止值更改。如果您必须清除输入，请执行`if(!validateIPKeyPress(event)) this.value = "";`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:41:30.147

我宁愿立即去验证整个 IP 地址。允许输入数字和点，通过 REGEX 模式解析它们。

您可以在此处获取模式使用示例： [http ://www.darian-brown.com/validate-ip-addresses-javascript-and-php-example/](http://www.darian-brown.com/validate-ip-addresses-javascript-and-php-example/)

代码本身看起来像：

```
<input type='text' id='numonly' value="" onkeypress='allowIp(event)' onkeyup='javascript:checkIp()'> 
```

```
function allowIp(e){
if((e.keyCode < 48 || e.keyCode > 57) && e.keyCode != 46)  // both nubmer range and period allowed, otherwise prevent.
  { 
      e.preventDefault();
  }
}

function checkIp() 
{ 
  var ip = $("#numonly").val();

    /* The regular expression pattern */
  var pattern = new RegExp("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.)(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.)(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.)([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$");

  /* use  javascript's test() function to execute the regular expression and then store the result - which is either true or false */
  var bValidIP = pattern.test(ip);

  if(bValidIP){
     // IP has ok pattern
     $("#numonly").css("background", "green");
  }
  else {
     $("#numonly").css("background", "red");
  }
} 
```

您可以在小提琴 [http://jsfiddle.net/Indias/P3Uwg/上查看它](http://jsfiddle.net/Indias/P3Uwg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-19T02:55:32.563

### 单整数

您可以使用以下解决方案来检查**单个整数**的用户输入是否介于 0 - 255 之间：

```
document.getElementById('example').addEventListener('input', event => {
  const input = event.target.value;
  console.log(/^\d+$/.test(input) && input > -1 && input < 256);
});
```

```
<input id="example" type="text" placeholder="Enter single integer" />
```

* * *

### IP地址

或者，您可以使用下面的代码来验证**IP 地址**的每个部分是否介于 0 - 255 之间：

```
document.getElementById('example').addEventListener('input', event => {
  const input = event.target.value;
  console.log(input === new Uint8ClampedArray(input.split('.')).join('.'));
});
```

```
<input id="example" type="text" placeholder="Enter IP address" />
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:03:52.700

您需要验证输入的当前值，而不是最后按下的键：

```
<input type='text' id='numonly' onkeypress='allownums(this.value)'> 
```

然后您的函数只需修改为：`if(a < 0 || a > 255)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T09:05:50.507

像这样的功能应该做到这一点：

```
function allownums(value){
   var num = parseInt(value,10);
   if(num <0 || num>255)
      alert('invalid')      
} 
```

然后让你的 html 看起来像：

```
<input type='text' id='numonly' onblur='allownums(this.value)'> 
```

现场示例：http: [//jsfiddle.net/USL3E/](http://jsfiddle.net/USL3E/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T09:35:43.810

*更新*
我已经设置了[一个小提琴](http://jsfiddle.net/USL3E/1/)，它可以进行一些基本的 IP 格式化并检查天气或并非所有输入都在范围内（0 - 255）等......随意使用它，改进它，研究它......我'我还更新了此处的代码片段以匹配小提琴

有几件事你没有考虑到。首先也是最重要的一点是，*并非所有浏览器都`keycode`在事件对象上设置了属性*。您最好将整个事件对象传递给函数，并在那里处理 X 浏览器问题。
其次，您正在检查一个又一个键，但在任何时候您都没有检查输入字段获得的*实际*值。还有一些事情，比如使用`onkeypress`html 属性（我真的不喜欢看到使用），以及未定义的返回值，但这会让我们走得太远......这就是我的建议 - HTML：

```
<input type='text' id='numonly' onkeypress='allowNums(event)'> 
```

JS：

```
function allowNums(e)
{
    var key = e.keycode || e.which;//X-browser
    var allow = '.0123456789';//string the allowed chars:
    var matches,element = e.target || e.srcElement;
    if (String.fromCharCode(key).length === 0)
    {
        return e;
    }
    if (allow.indexOf(String.fromCharCode(key)) === 0)
    {//dot
        element.value = element.value.replace(/[0-9]+$/,function(group)
        {
            return ('000' + group).substr(-3);
        });
        return e;
    }
    if (allow.indexOf(String.fromCharCode(key)) > -1)
    {
        matches = (element.value.replace(/\./g) + String.fromCharCode(key)).match(/[0-9]{1,3}/g);
        if (+(matches[matches.length -1]) <= 255)
        {
            element.value = matches.join('.');
        }
    }
    e.returnValue = false;
    e.cancelBubble = true;
    if (e.preventDefault)
    {
        e.preventDefault();
        e.stopPropagation();
    }
}​ 
```

现在这段代码仍然需要*做很多*工作，这只是为了让你继续前进，并希望鼓励你研究*事件对象*、JS 事件处理程序如何工作以及其他所有内容。顺便说一句，既然你是 JS 新手，[这个网站值得收藏](http://www.quirksmode.org/js/introevents.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-20T09:04:52.947

```
 function fun_key()
    {
    var key=event.keyCode;
    if(key>=48 && key<=57)
    {
    return true;
    }
    else
    {
    return false;
    alert("please enter only number");
    }
    }

    and you can call this function on keypress event like:
    <asp:textbox id="txtphonenumber" runat="server" onkeypress="return fun_key()">                </asp"textbox> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-11T12:34:31.187

我已经看到许多答案忽略了两个可能无法在按键上验证范围号的重要因素：

1.  **当输入文本框中的值**未选择时，真正的结果应该是`(input.value * 10) + parseInt(e.key)`而不是简单`input.value + parseInt(e.key)`的。这应该是`* 10`因为您在按键期间在后面添加了一位数字，例如`10`变为`109`.
2.  **当输入文本框中的值**被选中时，您可以简单地检查是否`Number.isInteger(parseInt(e.key))`因为当`255`被选中时，按下`9`不会变成`2559`而是`9`。

所以首先，编写一个简单的函数来检查输入值是否被用户选择：

```
function isTextSelected (input) {
    if (!input instanceof HTMLInputElement) {
        throw new Error("Invalid argument type: 'input'. Object type must be HTMLInputElement.");
    };
    return document.getSelection().toString() != "" && input === document.activeElement;
} 
```

接下来，这将是您的 on keypress 事件处理程序，它考虑了上述两个因素：

```
$("input[type='number']").on("keypress", function (e) {
     if (!Number.isInteger(parseInt(e.key)) || (($(this).val() * 10) + parseInt(e.key) > 255 
         && !isTextSelected($(this)[0]))) {
         e.preventDefault();
     };
}); 
```

在另一个括号中注意这个条件，它本身就是一个完整的条件：

`(($(this).val() * 10) + parseInt(e.key) > 255 && !isTextSelected($(this)[0]))`

对于这种`< 0`情况，您甚至不需要它，因为负号`(-)`将被自动阻止，因为符号本身**不是 integer**。

**已知问题：**但是，上述解决方案并不能解决用户将光标移动到的**开始位置**`29`并按的情况`1`，它会变成`129`。这是因为`29 * 10 = 290`, 已经超过`255`, 阻止用户进入`129`, 这是有效的。输入时的**起始位置**特别难追踪`type="number"`。但它应该足以解决整数范围字段的正常输入方式。欢迎任何其他更好的解决方案。

# android - 错误 androidmanifest.xml

> ID：13413321
> 
> 赞同：-1
> 
> 时间：2012-11-16T08:58:51.343
> 
> 标签：android, android-manifest

在我的 android 应用程序中它崩溃并显示此消息，我在 androidmanifest 中添加了活动但同样的错误！

```
11-16 08:56:00.077: E/AndroidRuntime(622): FATAL EXCEPTION: main
11-16 08:56:00.077: E/AndroidRuntime(622): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.upnpexample/com.example.androidhive.CustomizedListView}; have you declared this activity in your AndroidManifest.xml? 
```

编辑Androidmanifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.upnpexample"
  android:versionCode="1"
  android:versionName="1.0">
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
 <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"></uses-      permission>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
 <uses-permission android:name="android.permission.WAKE_LOCK" />
 <uses-permission android:name="android.permission.GET_TASKS" />
 <uses-sdk android:minSdkVersion="7"></uses-sdk>
 <application android:icon="@drawable/appicon" android:label="@string/app_name" android:name=".UpnpControlApplication">
 <activity android:name=".MainActivity" android:theme="@android:style/Theme.NoTitleBar" android:configChanges="orientation|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"></action>
            <category android:name="android.intent.category.LAUNCHER"></category>
        </intent-filter>
    </activity>
    <activity android:name=".BrowseActivity"
              android:label="@string/app_name">

    </activity>
    <activity android:name=".BrowseServerActivity" android:label="@string/app_name"></activity>
    <service android:name=".BrowserUpnpService"></service>
    <activity android:label="@string/list_player" android:name=".EPGview"/>
    <activity android:label="@string/list_player" android:name=".Playsimplevideo"/>
    <activity android:label="@string/list_player" android:name=".Streaming"/>
    <activity android:label="@string/list_player" android:name=".LazyAdapter"/>
    <activity android:label="@string/list_player" android:name=".CustomizedListView"/>
</application> 
```

**编辑 2**

我将它们放在同一个包中，现在它显示此错误

```
11-16 09:21:18.076: D/AndroidRuntime(710): Shutting down VM
11-16 09:21:18.076: W/dalvikvm(710): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-16 09:21:18.086: E/AndroidRuntime(710): FATAL EXCEPTION: main
11-16 09:21:18.086: E/AndroidRuntime(710): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.upnpexample/com.upnpexample.CustomizedListView}: java.lang.NullPointerException 
```

* * *

我把它们放在同一个包中，现在它显示这个错误

```
11-16 09:21:18.076: D/AndroidRuntime(710): Shutting down VM
11-16 09:21:18.076: W/dalvikvm(710): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-16 09:21:18.086: E/AndroidRuntime(710): FATAL EXCEPTION: main
11-16 09:21:18.086: E/AndroidRuntime(710): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.upnpexample/com.upnpexample.CustomizedListView}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:22:09.507

将类 CustomizedListView 中的包更改为：

```
package com.example.androidhive; 
```

至：

```
package com.upnpexample; 
```

# c# - 如何分配 16 字节对齐的内存？

> ID：13413323
> 
> 赞同：8
> 
> 时间：2012-11-16T08:58:52.153
> 
> 标签：c#, memory, unmanaged

我`Marshal.GlobalHAlloc`用来分配内存。如文档所述：“此方法从 Kernel32.dll 公开 Win32 LocalAlloc 函数。”。`GlobalAlloc`的文档说它将是 8 字节对齐的，但`LocalAlloc`没有说任何关于对齐的内容。

例如，我想分配 1024 字节并确保它与 16 对齐。当我分配 1024+16 字节然后检查指针 % 16 时它会起作用吗？如果结果为 0，则表示内存已对齐，当它不为 0 时，我只是增加指针以符合我的期望。问题是我不知道，如果我有对齐的指针，它真的在物理内存中对齐了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T11:59:46.433

所有 Windows 堆分配器都对齐 8。您可以通过过度分配和调整指针来解决这个问题，如下所示：

```
 var rawptr = Marshal.AllocHGlobal(size + 8);
    var aligned = new IntPtr(16 * (((long)rawptr + 15) / 16));
    // Use aligned
    //...
    Marshal.FreeHGlobal(rawptr); 
```

# c# - C# 的随机图生成器

> ID：13413324
> 
> 赞同：2
> 
> 时间：2012-11-16T08:58:55.630
> 
> 标签：c#

我想知道是否有一些像[这样](http://networkx.lanl.gov/reference/generators.html)的 C# 随机图形生成器？这样做的缺点是它仅适用于 Python。

图表是指具有起始节点和结束节点的节点的随机互连以及节点之间的密集互连，[本文有一个算法](http://www.edbt.org/Proceedings/2011-Uppsala/papers/edbt/a30-nobari.pdf)。也许有一个免费实现的 C# 版本？

# android - 使用 `ndk-build` 代替 `make` 的优势

> ID：13413328
> 
> 赞同：0
> 
> 时间：2012-11-16T08:59:07.403
> 
> 标签：android, android-ndk

`ndk-build`使用 NDK 构建系统和`Android.mk`构建 ndk 项目而不是使用独立的工具链和`Makefile`/是否有任何优势`make`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:54:55.933

`ndk-build`只是一个包装`make`。您可以在其[源代码](https://android.googlesource.com/platform/ndk/+/d689a0cb82f61d8b49dc858fa7a61744b8d56907/ndk-build)中看到：

```
This really is a tiny wrapper around GNU Make. 
```

然而它确实为你处理了很多小问题，所以除非你有一些奇怪的设置，否则你应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:55:05.507

如果您还没有 make 文件，或者不打算为其他平台（iOS、Windows、Mac、Linux...）构建项目，我建议您使用`ndk-build`.

`Android.mk`更容易构建和维护，尤其是在 Android **NDK**的下一次升级方面。很难预见未来，但瞄准新的 Android 版本、采用 NEON、v7 或 x86 和 MIPS 的新处理器是很简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:48:02.440

当然不。或者至少我找不到。ndk-build 可能更容易在小规模应用程序上使用。但是当需要一个真实的大型构建系统时 - 只需使用您自己的并确保使用 android-ndk 文件夹中的工具链

# android - 删除系列指标/情节图例 AndroidPlot

> ID：13413333
> 
> 赞同：5
> 
> 时间：2012-11-16T08:59:35.067
> 
> 标签：android, android-ui, androidplot

我意识到 AndroidPlot 有一个论坛，但它不是最活跃的，所以我会在这里碰碰运气......

我正在尝试使用 AndroidPlot 库从我的 XY 图中删除系列指标或图例。我不想从情节本身中删除该系列，只是传说。

我已经在 AndroidPlot 示例上看到它完成了，但是由于文档有限，很难找到方法来完成诸如删除图例之类的事情

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T09:28:56.930

好的，我有以下代码来执行此操作。这没有在最新版本上进行测试，但希望仍然很好。

```
 if (!mKeyOn)
        mDynamicPlot.getLayoutManager()
                .remove(mDynamicPlot.getLegendWidget());
    if (!mDomainLabelOn)
        mDynamicPlot.getLayoutManager().remove(
                mDynamicPlot.getDomainLabelWidget()); 
```

看起来诀窍是获取 layoutManager。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-02T01:09:03.547

您还可以将 Androidplot 的[XML 样式与 Configurator 一起](http://androidplot.com/docs/xml-styling-with-configurator/#Usage)使用，并且由于反射，只需在 XML 布局文件中指定它的可见性即可删除图例，如下所示：

```
<com.androidplot.xy.XYPlot
...
    androidPlot.legendWidget.visible="false"
... /> 
```

如果不需要动态更改您的图例，我认为最好将这样的样式放在 XML 文件中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-16T22:03:00.893

查看代码，[setLegendWidget](https://androidplot.jira.com/source/browse/~br=trunk/ANDROIDPLOT/trunk/AndroidPlot-Core/src/main/java/com/androidplot/xy/XYPlot.java?r1=146&r2=146&u=3#to832)仅更新 LegendWidget 的本地句柄，但不更新 LayoutManager，这是在进行绘图时实际调用的内容。如果您实施 Ifor 的（赞成）建议，您应该会成功，因为它直接与 LayoutManager 交互：

```
plot.getLayoutManager().remove(plot.getDomainLabelWidget()); 
```

另一种选择是像这样隐藏图例：

```
plot.getLegendWidget().setVisible(false); 
```

前提是（根据上面的信息）您没有尝试用之前调用 setLegendWidget() 来替换/删除图例小部件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-20T21:36:22.887

如果您只想从图例小部件中删除**一个**（或特定）系列图例，只需使用：

```
yourSeriesFormater.setLegendIconEnabled(false); 
```

这对我有用。

# php - 无法使用 facebook 的 api 登录网站

> ID：13413334
> 
> 赞同：0
> 
> 时间：2012-11-16T08:59:35.787
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有一些在我的旧服务器上运行良好的 php 代码。我已将 php 代码移至新服务器，现在我无法再使用 facebook api 使用 facebook 登录来登录我的网站。

以下是新服务器上发生的情况的屏幕截图：

![在此处输入图像描述](../Images/f0d136547a1fff31eb2a617fc5141bec.png) 更大的版本[在这里](https://i.stack.imgur.com/LYSzZ.png)。

我检查了 apache 的 error.log 文件，没有看到任何错误消息。

为什么这会发生在新服务器上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T12:10:57.117

这件事情是由很多原因导致的

*   检查*域*在代码和设置中是否匹配
*   检查*url*在代码和设置中是否匹配
*   检查用于身份验证的*登录 URL*是否匹配
*   检查*应用程序机密*是否未更改
*   检查*沙盒模式*是否关闭
*   检查来自开发者帐户而不是测试帐户的应用程序访问权限
*   检查您带用户访问的网址是否包含所有必需的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:31:39.607

如果它是移动环境（即从测试到上线），那么它将是您的站点 URL。转到[http://developers.facebook.com/apps/](http://developers.facebook.com/apps/)上的应用程序设置页面，并在其中更新您的站点 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:50:43.237

它不应该与 apache 有任何关系，请添加您的代码的某些部分。您还确定新服务器的画布 url 和应用程序 ID 设置吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:41:12.767

转到应用程序>>您的应用程序>>编辑应用程序查看提供的网址是否正确

检查 appId 和 appSecret 是否正确

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:58:37.700

在应用设置中检查您的网站 url，同时它包含正确的服务器协议，如 http:// 或 https://

# javascript - 如何将 jQuery UI 可排序元素与数组链接？

> ID：13413344
> 
> 赞同：1
> 
> 时间：2012-11-16T09:00:12.473
> 
> 标签：javascript, jquery, arrays, jquery-ui

所以，基本上，我如何将 jQuery UI 可排序元素与数组链接，以便为每个可排序元素在数组中放置某种索引，并且当它们被移动时，数组会相应地排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:53:30.253

您可以考虑在元素移动后获取索引列表。

```
var listOfId = $("#sortable").sortable("toArray"); 
```

参考： [http ://api.jqueryui.com/sortable/#method-toArray](http://api.jqueryui.com/sortable/#method-toArray)

# command-line - 如何将多个 visio 文件 (.vsd) 转换为 png

> ID：13413348
> 
> 赞同：2
> 
> 时间：2012-11-16T09:00:36.530
> 
> 标签：command-line, batch-file, automation, converter, visio

我有很多 Visio 文件，并希望以编程方式将它们全部转换为 png 格式。

我找到了几个解决方案，但无法让它们中的任何一个起作用。

如何通过命令行或类似方式轻松地将 .vsd 文件批量转换为 .png？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:38:12.603

使用内置的 Visual Basic

像这样：自己修复路径部分。

```
Sub a()

   Dim docs As New Collection
   ' add the paths of your documents here, use more script if you want wildcard etc
   docs.Add ("C:\Users\[username]\Desktop\New folder (4)\drawing2.vsd")
   docs.Add ("C:\Users\[username]\Desktop\New folder (4)\drawing3.vsd")

   For Each d In docs    
      Dim doc As Document     
      Set doc = Documents.Add(d)

      Dim p As Page

        For Each p In doc.Pages       
        Dim n As String

        ' change this for the output path and format of your choice      
        n = "C:\Users\[username]\Desktop\New folder (4)\" & doc.Name & " " & p.Index & ".png"      
        p.Export (n)

        Next
    Next

End sub 
```

# android - 如何在没有 ID 的情况下创建新对象并将其插入到我的数据库中？

> ID：13413349
> 
> 赞同：2
> 
> 时间：2012-11-16T09:00:42.100
> 
> 标签：android, greendao

我们的团队对创建新数据库对象有些困惑。

如果创建了 idproperty，greendao orm 生成器将创建一个标准构造函数，该构造函数将 id 作为第一个值。对于我们的大多数数据库，我们不想自己创建 id，而只是让数据库创建 id。

目前大多数团队成员将 -1L 作为 id 传递。这似乎有效。

我找不到记录在案的方法来创建没有 id 的新对象。

创建这样一个对象的正确方法是什么，在这种情况下，在插入数据库期间会生成一个新的 id 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:13:42.840

快速浏览一下[Greendao](http://greendao-orm.com/documentation/how-to-get-started/)的文档就会发现：

> 现在看看 addNote 方法，你如何在数据库中插入一个新的笔记：

```
Note note = new Note(null, noteText, comment, new Date());
noteDao.insert(note);
Log.d("DaoExample", "Inserted new note, ID: " + note.getId()); 
```

> 只需创建一个 Java 对象并在 DAO 上调用 insert。当 insert 方法返回时，刚刚插入的便笺的数据库 id 已经分配给该对象，如您在日志语句中所见。

看起来`null`是你想要的答案。

# objective-c - 在 C 或 Obj-C 中使用 X509 和 PKCS#8 编码的 OpenSSL RSA 密钥对

> ID：13413350
> 
> 赞同：2
> 
> 时间：2012-11-16T09:00:54.157
> 
> 标签：objective-c, c, openssl, x509, pkcs#8

我已经苦苦挣扎了好几天，在互联网上找不到任何准确的示例/教程，所以现在我在这里寻求帮助。

我有一个创建 RSA 密钥对的 Java 应用程序。此密钥对用于加密和解密对称密钥。（但首先要测试我想使用一个简单的文本字符串）。生成密钥对后，对密钥进行编码。

```
PublicKey publicKey = KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(pbKey)); 
```

和

```
PKCS8EncodedKeySpec ks = new PKCS8EncodedKeySpec(pvBytes); 
```

现在我正在 iOS 上创建一个应用程序。我想在 iOS（C 或 Objective-C）中使用 OpenSSL 做同样的事情。

有人可以帮我吗？

我正在创建这样的密钥

```
RSA_generate_key_ex(rsa, modulus, e, NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:47:48.857

# tabs - VFP 多行标题选项卡

> ID：13413351
> 
> 赞同：1
> 
> 时间：2012-11-16T09:00:54.923
> 
> 标签：tabs, visual-foxpro

我正在使用带有一堆选项卡的 VFP 9.0 中的页框控件。我正在尝试在每个选项卡中实现多行标题，如下面的屏幕所示，但我不知道该怎么做。

我试过这些，但没有运气。

```
.Caption = 'Watch 1' + chr(13)+chr(10) + '(00~04)'  
.Caption = 'Watch 1' + chr(13)+ '(00~04)' 
```

![在此处输入图像描述](../Images/812499741326219fa4b459de3d38b833.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:22:45.997

如果没有一些花哨的高级烟雾和镜子，VFP 不会在页面框控件中执行多行选项卡文本......而且我一直在使用 VFP，因为它与 VFP3 早在 1993 年首次发布时。

至于你的“接受率”为零。此帮助论坛感谢反馈以了解问题何时得到解决，以便那些寻找类似问题的人知道哪个答案“解决了”最初提出的问题，而不是猜测最终解决了哪个问题。我建议回到您的其他问题，看看是否有任何此类答案有帮助，如果有，请单击答案左侧的复选标记，表明它已解决。

# c# - 实体框架有时不会将结果返回到列表

> ID：13413352
> 
> 赞同：2
> 
> 时间：2012-11-16T09:00:58.863
> 
> 标签：c#, asp.net, entity-framework

我对 EF 有一些问题。所以，我的 mysql 表中有 1000000 条记录。我需要有限制的查询。例如，我使用跳过 50000 进行查询

```
var listRoutes = (from c in context.Routes
                          where c.Alias != ""
                          orderby c.Alias ascending 
                          select c).Skip(50000).Take(500).ToList(); 
```

listRoutes 有 500 条记录。如果我用跳过 100000 查询

```
var listRoutes = (from c in context.Routes
                              where c.Alias != ""
                              orderby c.Alias ascending 
                              select c).Skip(100000).Take(500).ToList(); 
```

或者

```
List<Route> listRoutes = context.Routes.Where(x => x.Alias != "").OrderBy(a => a.Alias).Skip(100000).Take(500).ToList(); 
```

listRoutes 有 0 条记录。但是，如果我通过跳过 100000 或更多来查询

```
List<Route> listRoutes = context.Database.SqlQuery<Route>("SELECT * FROM testcmsdatamap.routes WHERE alias != '' order by alias asc limit 500000, 500").ToList(); 
```

listRoutes 也有 500 个...有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:08:39.930

问题已解决。问题在于大数据超时。EF 构建错误的 SQL。为 INDEX 构建了简单的 SQL 查询。所以，我有其他问题[实体框架与 Mysql 索引](https://stackoverflow.com/questions/13414464/entity-framework-with-mysql-index)

# image - gwt CellTree 更改打开/关闭项目图像动态

> ID：13413356
> 
> 赞同：1
> 
> 时间：2012-11-16T09:01:16.967
> 
> 标签：image, gwt, dynamic

嗨，我有一个具有可选 RootItems 的 CellTree。

我想更改选定 RootItem 的打开/关闭项目图像

是否可以更改图像动态？

我正在使用 GWT 2.5 thx :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:10:09.363

这为时已晚，但我希望它能帮助其他谷歌人。首先，定义一个接口：

```
public interface TreeResources extends CellTree.Resources {

@ImageOptions(flipRtl = true)
@Source("cellTreeClosedArrow.gif")
ImageResource cellTreeClosedItem();

 /**
 * An image indicating an open branch.
 */
@ImageOptions(flipRtl = true)
@Source("cellTreeOpenArrow.gif")
ImageResource cellTreeOpenItem();
} 
```

其中 cellTreeClosedArrow.gif 和 cellTreeOpenArrow.gif 是自定义图像的名称（路径）。接下来就是实例化上面的接口（在你看来）：

```
CellTree.Resources treeResource = GWT.create(TreeResources.class); 
```

最后要做的是将 treeResource 与您的树相关联：示例：

```
tree = new CellTree(myTreeViewModel , null,treeResource); 
```

我希望这是你需要的。

干杯

# iphone - 如何更改 ios 表格组边框？

> ID：13413358
> 
> 赞同：1
> 
> 时间：2012-11-16T09:01:23.907
> 
> 标签：iphone, ios, ios6

我想摆脱这个白色边框或将其着色为黑色。

正如您在图像上看到的，我想更改红色圆圈中显示的白色边框。

我怎样才能改变它？

![在此处输入图像描述](../Images/479ac40d12e9233111105c4a141c82fd.png)

将此 cote 添加到 tableview 控制器的 viewDidLoad 方法后；

```
[self.tuzukCell.contentView.layer setBorderColor:[UIColor blackColor].CGColor];
[self.tuzukCell.contentView.layer setBorderWidth:2.0f]; 
```

生成的边框是：

![在此处输入图像描述](../Images/3745f6b1fe3b8155d19d0e526731940e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:55:36.167

对于静态单元格..所有这些方法..必须在情节提要文件中设置..

所以..单击情节提要文件/表格视图/分隔符“无”/并选择所需的颜色..

![在此处输入图像描述](../Images/eac89999745ec1a53967063bf2344edd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:15:10.367

`UITableViewCell` `contentView's`潜在的`CALayer`

首先导入`QuartzCore`

```
#import <QuartzCore/QuartzCore.h> 
```

`cellForRowAtIndexPath`在`UITableView`委托方法中添加这个

```
[cell.contentView.layer setBorderColor:[UIColor blackColor].CGColor]; //any color u want to....
[cell.contentView.layer setBorderWidth:2.0f]; //set its width here 
```

**编辑**：如果 tableview 是静态的，则根据要求使用此属性：

```
separatorStyle  property
separatorColor  property
backgroundView  property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:19:49.013

以下代码将更改分隔符颜色，这意味着它将更改单元格和边框本身之间的分隔线。

试试这个把它改成黑色：

```
tableView.separatorColor = [UIColor blackColor]; 
```

或删除它：

```
tableView.separatorColor = [UIColor clearColor]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:16:46.837

在`CellForRowAtIndexPath`，试试这个（在你初始化你的单元格之后）：

```
cell.layer.borderColor = [UIColor blackColor].CGColor; 
```

当然，您可以更改`blackColor`为任何其他 UIColor。

你也可以这样做：

```
cell.layer.borderWidth = 0; 
```

如果你只是想隐藏它。

# jquery - 如何在鼠标悬停时更改滑块项目

> ID：13413359
> 
> 赞同：0
> 
> 时间：2012-11-16T09:01:32.613
> 
> 标签：jquery, wordpress

我已经开始在我的 wordpress 项目中使用我朋友的 jquery 滑块。但是当我将鼠标悬停在滑块项目编号上时，我希望滑块项目在鼠标悬停时更新。

**截屏 ;**

![jQuery 滑块。](../Images/7b36f2c347c2da89230650864507ce89.png)

这是**HTML 代码**；

```
<div class="PozManset">
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
  <div><a href="#"><img src="assets/demo/xfactor.jpg" class="manset_f" /><span class="manset_h">Haber - Yazı Başlığı 1</span> </a></div>
</div>
<div style="margin:3px 0px 0px 0px"><span id="sayfa_no"></span></div>
<div style="float:left;width:101px;background:#8169A7;margin-left:1px;height:24px;color:#fff;line-height:20px;">Bütün manşetler</div> 
```

这是**CSS代码**；

```
.PozHeadline {float:left;width:630px;height:340px;margin:20px 10px 5px 10px;}
.PozManset {cursor:pointer;width:630px; height:300px;display:none;background:#fff;}
.PozManset div{ width:630px; height:300px;overflow:hidden;}
.PozManset div img {float:left;width:630px;padding:0px;border:0px;}
.sayfa{float:left;padding:2px 0;margin:0 2px 0 0;color:#fff;cursor:pointer;font-family:calibri;font-size:14px;border:solid 1px #8169A7; width:20px;height:18px;line-height:20px; text-align:center;}
.manset_f{float:left;border:0;}
.manset_h{float:left;text-align:left;padding:0px 0px 0px 10px;background-color:#F669B0;color:#fff;width:620px;margin:-100px 0px 5px 0px;height:40px;line-height:40px;font-size:20px;color:#fff;font-weight:bold;}
.PozManset a{text-decoration:none;cursor:pointer;} 
```

这是**jquery代码**；

```
 var aktif = 1; var timer; var adet;
  $(document).ready(function(){
    $(".PozManset").show();
    $(".PozManset div").hide();
    $(".PozManset div:first").show();
    adet = $(".PozManset div").length;
    sayfalar();
    renk(1);
    timer = setInterval(degistir,5000);
  });
  function degistir()
  {
    $(".PozManset div:nth-child("+aktif+")").slideUp(100);
    aktif = (aktif + 1) % adet;
    if(aktif == 0) aktif = adet;
    $(".PozManset div:nth-child("+aktif+")").slideDown(200);
    renk(aktif);
  }
  function tikla(deger)
  {
    renk(deger);
    $(".PozManset div:nth-child("+aktif+")").slideUp(100);
    aktif = deger;
    $(".PozManset div:nth-child("+aktif+")").slideDown(200);
    clearInterval(timer);
    timer = setInterval(degistir,5000);
  }
  function renk(deger)
  {
    $("#sayfa_no span").css("background-color","#8169A7")
    $("#sayfa_no span:nth-child("+deger+")").css("background-color","#F776B6");
  }
  function sayfalar()
  {
    var sayfa_no = "";
    for(var i = 1; i <= adet; i++)
    {
      sayfa_no += "<span class='sayfa' onclick=tikla("+i+")>"+i+"</span>"
    }
    $("#sayfa_no").html(sayfa_no);
  } 
```

现在，当您单击可以看到的数字时，滑块项目正在发生变化。我想改变它，而不是当我在特定数字上使用鼠标光标时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:19:46.750

而不是这个..

```
sayfa_no += "<span class='sayfa' onclick=tikla("+i+")>"+i+"</span>" 
```

用这个....

```
 sayfa_no += "<span class='sayfa' onmouseover=tikla("+i+")>"+i+"</span>" 
```

# java - 正则表达式匹配一个单词但不匹配另一个单词

> ID：13413372
> 
> 赞同：1
> 
> 时间：2012-11-16T09:02:20.210
> 
> 标签：java, regex

我需要一个匹配字符串的正则表达式，如果它以开头`http://www.xyzabc.com`但字符串不应包含单词“getJobId”。

例如：

```
http://www.xyzabc.com/abc          <--- should return true 
http://www.xyzabc.com/getJobId=9   <--- should return false 
```

我尝试使用以下正则表达式：

`^(http://www\.xyzabc\.com)((?!getJobId).)*$`

但它没有用。有人可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:05:26.520

我只是拿走了你的代码并运行它（删除多余的括号和锚点）：

```
final String regex = "http://www\\.xyzabc\\.com((?!getJobId).)*";
System.out.println("http://www.xyzabc.com".matches(regex));
System.out.println("http://www.xyzabc.com/abc".matches(regex));
System.out.println("http://www.xyzabc.com/getJobId=9".matches(regex)); 
```

印刷

```
true
true
false 
```

看起来正是你想要的，不是吗？

## 更新

在您编辑的答案中，您有单反斜杠而不是双反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:09:30.003

一个更好的正则表达式将是

`^(http://www.xyzabc.com)(?!.*?getJobId).*$`

`(?!.*?getJobId)`将检查 getJobId 是否退出，如果退出则不匹配！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:10:49.643

使用这个正则表达式`http://www\.xyzabc\.com((?!getJobId)\S)*(?=\s|$)`

`http://www\.xyzabc\.com`silded const

`((?!getJobId)\S)*`不包含 getJobId 但能够有符号

`(?=\s|$)`下一个符号空间或匹配是最后一个单词

# javascript - 在javascript中测试2个字符串之间的常用词

> ID：13413377
> 
> 赞同：2
> 
> 时间：2012-11-16T09:02:27.150
> 
> 标签：javascript, string, pattern-matching

我必须匹配至少一个单词相同的 2 个字符串，我需要给出一个成功的消息。

```
var str1 = "Hello World";
var str2 = "world is beautiful"; 
```

我需要匹配/比较这两个字符串，在这两个字符串中都是匹配的，所以我需要打印一条成功消息。我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:05:27.700

以下代码将输出两个字符串中的所有匹配词：

```
var words1 = str1.split(/\s+/g),
    words2 = str2.split(/\s+/g),
    i,
    j;

for (i = 0; i < words1.length; i++) {
    for (j = 0; j < words2.length; j++) {
        if (words1[i].toLowerCase() == words2[j].toLowerCase()) {
           console.log('word '+words1[i]+' was found in both strings');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:28:17.540

您可以通过对每个单词进行排序并消除重复项来避免将一个列表中的所有单词与另一个列表中的所有单词进行比较。改编[bjornd 的答案](https://stackoverflow.com/a/13413417/36537)：

```
var words1 = str1.split(/\s+/g),
    words2 = str2.split(/\s+/g);

var allwords = {};
// set 1 for all words in words1
for(var wordid=0; wordid < words1.length; ++wordid) {
    var low = words1[wordid].toLowerCase();
    allwords[low] = 1;
}
// add 2 for all words in words2
for(var wordid=0; wordid < words2.length; ++wordid) {
    var current = 0;
    var low = words2[wordid].toLowerCase();
    if(allwords.hasOwnProperty(low)) {
        if(allwords[low] > 1) {
            continue;
        }
    }
    current += 2;
    allwords[low] = current;
}
// now those seen in both lists have value 3, the rest either 1 or 2.
// this is effectively a bitmask where the unit bit indicates words1 membership
// and the 2 bit indicates words2 membership
var both = [];
for(var prop in allwords) {
    if(allwords.hasOwnProperty(prop) && (allwords[prop] == 3)) {
        both.push(prop);
    }
} 
```

这个版本应该相当有效，因为我们使用字典/散列结构来存储关于每组单词的信息。整个事情在 javascript 表达式中是 O(n)，但不可避免地字典插入不是，所以在实践中期望像 O(n log n) 这样的东西。如果您只关心单个单词匹配，您可以在第二个 for 循环中提前退出；代码原样将找到所有匹配项。

这大致相当于对两个列表进行排序，将每个列表减少为唯一的单词，然后在两个列表中查找对。在 C++ 等中，您可以通过两组来完成，因为您可以在不使用字典的情况下完成，并且在排序之后比较将是 O(n)。在 Python 中，因为它易于阅读：

```
words1 = set(item.lower() for item in str1.split())
words2 = set(item.lower() for item in str2.split())
common = words1 & words2 
```

这里的排序（与任何集合一样）发生在单词计数 n 上插入集合 O(n log n) 时，然后交集 (&) 在集合长度 m 上是有效的 O(m)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:53:39.937

只需使用真正的位掩码调整@Phil H 的代码：

```
var strings = ["Hello World", "world is beautiful"]; // up to 32 word lists
var occurrences = {},
    result = [];
for (var i=0; i<strings.length; i++) {
    var words = strings[i].toLowerCase().split(/\s+/),
        bit = 1<<i;
    for (var j=0, l=words.length; j<l; j++) {
        var word = words[j];
        if (word in occurrences)
            occurrences[word] |= bit;
        else
            occurrences[word] = bit;
    }
}
// now lets do a match for all words which are both in strings[0] and strings[1]
var filter = 3; // 1<<0 | 1<<1
for (var word in occurrences)
    if ((occurrences[word] & filter) === filter)
        result.push(word); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T10:08:42.547

我刚刚在[WriteCodeOnline](http://writecodeonline.com/javascript/)上试过这个，它在那里工作：

```
var s1 = "hello world, this is me";
var s2 = "I am tired of this world and I want to get off";
var s1s2 = s1 + ";" + s2;
var captures = /\b(\w+)\b.*;.*\b\1\b/i.exec(s1s2);

if (captures[1])
{
   document.write(captures[1] + " occurs in both strings");
}
else
{
  document.write("no match in both strings");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T10:59:09.277

好的，简单的方法：

```
function isMatching(a, b)
{
  return new RegExp("\\b(" + a.match(/\w+/g).join('|') + ")\\b", "gi").test(b);
}

isMatching("in", "pin"); // false
isMatching("Everything is beautiful, in its own way", "Every little thing she does is magic"); // true
isMatching("Hello World", "world is beautiful"); // true 
```

...理解？

我基本上转换`"Hello, World!"`为正则表达式`/\b(Hello|World)\b/gi`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T09:12:15.183

这样的事情也可以：

```
isMatching = function(str1, str2) {
    str2 = str2.toLowerCase();
    for (var i = 0, words = str1.toLowerCase().match(/\w+/g); i < words.length; i++) {
        if (str2.search(words[i]) > -1) return true;
    } 
    return false;
};

var str1 = "Hello World";
var str2 = "world is beautiful";
isMatching(str1, str2); // returns true
isMatching(str1, 'lorem ipsum'); // returns false 
```

# programming-languages - NSIS 指令 - 一些词汇问题

> ID：13413379
> 
> 赞同：0
> 
> 时间：2012-11-16T09:02:43.860
> 
> 标签：programming-languages, installation, stack, nsis, cpu-registers

我正在阅读文档来编写 NSIS 安装程序。我跌倒在[这些线上](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9)：

> NSIS 用于编写脚本的指令是 PHP 和程序集之间的一种交叉。没有真正的高级语言结构，但指令本身（大部分）是高级的，并且您拥有方便的字符串功能（即您不必担心连接字符串等）。您基本上有 25 个寄存器（20 个通用寄存器，5 个专用寄存器）和一个堆栈。

一种语言有 25 个寄存器和一个堆栈是什么意思？这些是数据结构。IMO 这些与内存管理有关，而不是语言语法或结构。这与语言结构/语法有什么关系？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:29:36.407

该文档是指寄存器

*   `$0`..`$9`
*   `$R0`..`$R9`
*   `$CMDLINE`
*   `$INSTDIR`
*   `$OUTDIR`
*   `$EXEDIR`
*   `$LANGUAGE`

您也可以将它们称为变量，它们只是预先存在的内置全局变量。前 20 个是一般使用变量，最后一个在 nsis 脚本中有专门的用法。

关于堆栈，您实际上可以在安装程序（或卸载程序）执行期间`push`ing 和`pop`ing 任意值，但它在某种程度上是*高级*堆栈，因为您不仅可以推送数字寄存器，还可以推送字符串。您可以通过交换值来玩堆栈，就像使用 Forth 或 HP 计算器的 RPL 语言一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:29:49.860

寄存器只是始终存在的变量（`var`稍后添加了创建更多变量的能力。）

```
StrCpy $0 $windir 1
MessageBox mb_ok "The first character is $0" 
```

在内部，NSIS 解释器的工作方式有点像 CPU，有一个指令指针，您可以进行相对跳转等。没有语法糖来隐藏您将参数传递给函数的方式，这就是您必须修改 NSIS 堆栈的原因直接地：

```
Function DoMagic
pop $0 ; $0 now contains the value that was on top of the stack
; Do something with $0
FunctionEnd

...

push 0xf00ba5
call DoMagic

push "Hello world"
call DoMagic 
```

[wiki 上](http://nsis.sourceforge.net/Pop,_Push,_Exch..._The_Stack)有堆栈的迷你指南...

# matlab - 解决matlab代码中的一个错误

> ID：13413380
> 
> 赞同：0
> 
> 时间：2012-11-16T09:02:45.777
> 
> 标签：matlab

我在 Matlab (R2009a) 中遇到了这个错误，我试图找到一个没有成功的解决方案，这个错误不应该存在，因为我使用的是我下载的源代码，因此它应该可以正常工作。知道为什么不工作吗？

错误信息：

> ？？？'char' 类型的输入参数的未定义函数或方法 'fittype'。
> 
> ==> ChIPnorm 在 132 英尺处出错_ = fittype('smoothingspline');

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:21:35.107

可能您没有安装曲线拟合工具箱。或者该功能可能是在 R2009a*之后*添加的（我无法查看该版本的文档，但我可以告诉您 R2010a 可用）。

# linux - 转换日期时给出输入格式

> ID：13413383
> 
> 赞同：1
> 
> 时间：2012-11-16T09:03:00.610
> 
> 标签：linux, date, format

我从文件中读取日期到变量中。日期的格式为 ddmmyyyy。它必须转换为 yyyy-mm-dd 我已经搜索了这个论坛并得到了这个： date -d '$DATE' +%F 问题是输入格式无法识别。有什么方法可以指定输入日期格式吗？在另一个论坛上，我发现： date -d "${OLD_DATE}" -D "%d%m%Y" +%F 其中 -D 应该指定输入格式，但这不起作用。但是 -D 是未知的。

感谢您的帮助，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:13:49.267

你可以这样：

```
echo "DDMMYYYY" | awk 'BEGIN {OFS="-"} {print substr($1,5,4), substr($1,3,2), substr($1,1,2)}' 
```

输出：

```
YYYY-MM-DD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:16:25.510

是的，`date`理解很多格式`-d`，但是当它只有 8 个数字时，它会解释为`YYYYmmdd`. 我不确定您是否可以强制它以不同的方式阅读，但在这种情况下，您可以使用简单的编辑器，例如`awk`or`sed`代替：

```
$ OLD_DATE='08032011'
$ echo $OLD_DATE | sed -r 's/(.{2})(.{2})(.{4})/\3-\2-\1/'
2011-03-08 
```

这将适用于`GNU sed`. 请注意，它不检查输入（为简洁起见）。

# watir - Watir 和 Rspec 脚本什么都不做

> ID：13413391
> 
> 赞同：1
> 
> 时间：2012-11-16T09:03:37.623
> 
> 标签：watir

我是 Watir 的新手，Rspec 测试，我刚刚熟悉它。我在互联网上找到了一项测试，Rspec 和 watir 的组合，但 id 什么也没做。它抛出错误要求“规范”不存在。我安装了 rspec 2.12。我在这里错过了什么吗，我需要安装一些东西吗？Rspec 脚本和 watir 一样有效，但这种组合不能。

```
require 'watir'
require 'spec'

describe "Google" do

  before :all do
    @browser = Watir::Browser.new
    @browser.goto "http://google.com"
  end

  it "has word 'Google' on main page" do
    @browser.text.should include("Google")
  end

  it "has word 'Bing' as it's title" do
    @browser.title.should == "Bing"
  end

  after :all do
    @browser.close
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:23:01.313

“我在互联网上找到了一项测试”没有帮助。请提供该页面的链接。

另外，您没有说明如何运行脚本。据我记得，要运行 RSpec 1.x 脚本，你必须这样做`spec file_name.rb`，而使用 RSpec 2.x，你必须这样做`rspec file_name.rb`。这可能是问题所在。

# asp.net - Log4net 仅针对 1 个特定用户详细说明

> ID：13413392
> 
> 赞同：1
> 
> 时间：2012-11-16T09:03:41.703
> 
> 标签：asp.net, log4net

我正在使用 log4net 为我们的网站记录错误/信息，效果很好。

是否可以根据登录的用户/sessionid 或类似的东西来控制日志记录的级别。IE。一个用户打电话给我们一个问题，我们只为他们打开详细的日志记录，这样我们就可以进行故障排除，但只能通过详细的日志记录减慢该用户的速度？

显然我可以显式编码，但我想知道 log4net 中是否内置了任何东西？也许通过使用具有全局属性的过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:31:40.920

你应该看看过滤器，也许写你自己的。或者制作您自己的日志附加程序，为您进行过滤。

筛选：

```
 <filter type="YourNameSpace.UserFilter">
     <user value="myusername"/>
 </filter> 
```

然后将[SkeletonFilter](http://logging.apache.org/log4net/release/sdk/log4net.Filter.FilterSkeleton.html)类实现为 YourNameSpace.UserFilter

如果您使用窗口身份验证和模拟，您还可以使用[log4net.Filter.PropertyFilter](http://logging.apache.org/log4net/release/sdk/log4net.Filter.PropertyFilter.html)，它允许您过滤消息中的属性。用户可以通过 UserId 属性找到：

```
<filter type="log4net.Filter.PropertyFilter">
   <key value="UserID" />
   <stringToMatch value="MyUserName" />
</filter> 
```

# objective-c - 为什么保存数据后 NSManagedObjectID 没有改变？

> ID：13413394
> 
> 赞同：0
> 
> 时间：2012-11-16T09:03:45.553
> 
> 标签：objective-c, xcode, nsmanagedobject

我尝试在不同的线程中从网上获取东西。

1.  我使用了一个新的托管对象上下文。我将主线程的 managedobjectcontext 设置为父线程。
2.  我保存新的托管对象上下文
3.  我收集 managedobjectid （现在应该是永久的）

好吧，问题是它不是永久性的。的`objectID`保持`managedObjectModel`不变。

```
 PO([Catalogs convertEachElementToAnother:(id)^(id element){
        BGCatalogData * data = (BGCatalogData*) element;
        NSManagedObjectID * theObjectID= data.objectID;
        return theObjectID;
    }]);
    NSError * error;
    BOOL saveSuccesfully = [[BGMDCRManagedObjectContextThreadHandler managedObjectContext] save:&error];
    PO([Catalogs convertEachElementToAnother:(id)^(id element){
        BGCatalogData * data = (BGCatalogData*) element;
        NSManagedObjectID * theObjectID= data.objectID;
        return theObjectID;
    }]); 
```

这里，PO 与 类似`NSLog`。`ConvertEachElementToAnother`将简单地遍历数组并将每个元素转换为数组到其他东西。在另一个数组中返回其他东西。

结果：

```
[Catalogs convertEachElementToAnother:(id)^(id element){ BGCatalogData * data = (BGCatalogData*) element; NSManagedObjectID * theObjectID= data.objectID; return theObjectID; }]: (
    "0x8d26df0 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18603>",
    "0x8d24fe0 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18609>",
    "0x8d24930 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18615>",
    "0x8d23520 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18621>"
)
(lldb)  po error
(NSError *) $1 = 0xb0102d28 [no Objective-C description available]
2012-11-16 15:57:18.763 BadgerNew[29395:1d03] [Catalogs convertEachElementToAnother:(id)^(id element){ BGCatalogData * data = (BGCatalogData*) element; NSManagedObjectID * theObjectID= data.objectID; return theObjectID; }]: (
    "0x8d26df0 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18603>",
    "0x8d24fe0 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18609>",
    "0x8d24930 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18615>",
    "0x8d23520 <x-coredata:///BGCatalogData/tA2D6533A-00E2-4BD7-8A68-49944BC4DD18621>"
) 
```

在这里，`objectID`的`NSManagedObject`根本没有改变。

我检查了错误为零。该代码可以正常工作。只是偶尔。我只是好奇为什么保存后ID没有改变。数据相当大。其实这是我第一次这样做。我应该期望 data.ObjectID 在保存时发生变化吗？我问的原因是 managedObject 上下文的父级是 managedObject 上下文，并且持久存储在“内存中”

# sencha-touch-2 - Sencha Touch 2 - 将面板动画添加到 HBox

> ID：13413396
> 
> 赞同：0
> 
> 时间：2012-11-16T09:03:50.110
> 
> 标签：sencha-touch-2, hbox

我有一个容器（布局为 HBox），并希望在它的左侧动态滑入一个面板（面板不应使用全屏宽度，但例如它的 1/3）。

我无法让它工作。

这是我尝试过的：

```
Ext.define('MegatheriumProject.view.MainContainer', {
    extend: 'Ext.Container',
    alias: 'widget.maincontainerview',
    requires: ['Ext.Container', 'Ext.TitleBar'],

    config: {
            layout: {
                    type: 'hbox',
                    animation: {
                            type: 'slide', 
                            direction: 'right'
                    }
            },
            items: [
                    {
                            flex: 3,
                            xtype: 'titlebar',
                            title: 'Megatherium',
                            docked: 'top',
                            items: [
                                    // some items
                            ]
                    }
            ],
            // some other configuration, listeners aso 
```

这是我的 NavigationPanel，应该滑入容器：

```
Ext.define('MegatheriumProject.view.NavigationPanel', {
    extend: 'Ext.form.Panel',
    alias: 'widget.navigationpanelview',
    requires: ['Ext.form.Panel'],

    config: {
        flex: 1,
        // some other config 
```

这是我尝试添加它的方法：

```
showNavigation: function() {
    this.getMainContainerView().add(this.getNavigationPanelView());
}, 
```

...但事实证明它出现但没有动画并且不使用 flex。

有什么帮助吗？

最好的问候，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:14:05.447

这是一种方法：

[http://www.senchafiddle.com/#Qh35F](http://www.senchafiddle.com/#Qh35F)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:53:10.717

感谢 TDeBailleul，它以这种方式工作，但不是我想要的确切的东西；）。

我希望标题栏也可以动画并滚动。

wnielson的[导航侧边栏](http://www.sencha.com/forum/showthread.php?173990-Sliding-Side-Menu)为我做了这件事 :)。

# jquery - 在 HTML 字符串中查找元素

> ID：13413399
> 
> 赞同：20
> 
> 时间：2012-11-16T09:03:55.460
> 
> 标签：jquery, dom

假设我有

```
var testHTML = "<div id='demo_div'></div>"; 
```

我想将**div**作为 JQuery 对象来操作它。我尝试通过以下方式找到它：

```
 var found = $(testHTML).find("#demo_div"); 
```

与：

```
 var found = $(testHTML).find("div"); 
```

两者都没有运气。我有空的*发现*变量。我做错了什么？

**PS**是的，我知道我可以直接访问我的**div**

```
$("#demo_div") 
```

但在我的情况下我不能这样做 - 我需要从将分配给某个变量的纯 HTML 中获取它，就像在我的*testHTML示例中一样* var 的示例中一样。

**更新：** 即使我没有像这里这样的根**div**元素：

```
var testHTML = "<html><div id='demo_div'></div></html>"; 
```

我不能使用*find*来导航*div*元素。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-16T09:05:26.427

问题是你`div`是集合中的根元素，所以你需要使用[`.filter()`](http://api.jquery.com/filter/)代替[`.find()`](http://api.jquery.com/find/)（它只查看后代元素）：

```
var found = $(testHTML).filter("#demo_div"); 
```

我假设你的实际 HTML 字符串比问题中的更复杂，否则你不需要做任何事情`$(testHTML)`，你将拥有一个包含该单个元素的 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-07T04:59:41.730

您可以使用[`.search()`](https://www.w3schools.com/jsref/jsref_search.asp)javascript 本身的功能。

```
testHTML.search('demo_div')>-1 
```

# knockout.js - 使用带有foreach绑定和'afterAdd'的knockout.js时如何停止初始加载的动画

> ID：13413406
> 
> 赞同：0
> 
> 时间：2012-11-16T09:04:43.820
> 
> 标签：knockout.js, knockout-2.0

我已经指定了一个 afterAdd 绑定，因此当我将一个项目添加到 observableArray 时，我会得到一个漂亮的 slideDown 效果。效果很好，看起来很酷。

问题出在初始负载上。我正在从数据源加载并将 observableArray 设置为返回的 json 数据。想象一下屏幕上的 20 个项目同时向下滑动。不是很酷。我怎样才能阻止这种情况发生？

滑动功能：

```
vm.addItem = function (elem) {
    if (elem.nodeType === 1) { $(elem).hide().slideDown(); }
}; 
```

添加单个项目时看起来不错：

```
vm.postComment = function () {
    $.post('Place/PostComment', { placeId: vm.placeId(), comment: vm.comment() }, function (comment) {
        vm.comments.push(comment);
        vm.comment('');
    });
}; 
```

设置初始值时不太好。每个添加的向下滑动：

```
vm.loadPlace = function () {
    $.getJSON('Place/GetComments', { placeId: vm.placeId() }, function (data) {
        vm.comments(data.Comments);
    });
}; 
```

**更新 2012 年 11 月 16 日上午**

根据 Vyacheslav Voronchuk 的建议，我的 HTML 如下所示：

```
<ul id="placeComments" data-bind="foreach: { data: comments, afterAdd: addItem, afterRender: renderedComments, beforeRemove: removeItem }"> 
```

Javascript 看起来像这样：

```
vm.renderedComments = function () {
    loading = false;
};

vm.addItem = function (elem) {
    if (!loading) {
        if (elem.nodeType === 1) {
            $(elem).hide().slideDown();
        }
    }
};

vm.loadPlace = function () {
    $.getJSON('Place/GetPlace', { placeId: vm.placeId() }, function (data) {
        loading = true;
        vm.comments(data.Comments);
    });
}; 
```

还在看动图。使用调试器我可以看到它两次进入 addItem 函数。

在旁注中，我猜这就是文档使用fadeIn而不是slideDown的原因。也许我应该换...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:14:36.393

```
vm.loadPlace = function () {
    $.getJSON('Place/GetComments', { placeId: vm.placeId() }, function (data) {
         vm.loading = true;
         vm.comments(data.Comments);
    });
};

vm.addItem = function (elem) {
   if (elem.nodeType === 1) { 
      if(!vm.loading) {
         $(elem).hide().slideDown(); 
      }
   }
}; 
```

在您的视图中，添加`afterRender`您将设置的位置`vm.loading = false`。

# c# - Interop.Excel 0x800A03EC - 内存不足错误代码 7

> ID：13413410
> 
> 赞同：0
> 
> 时间：2012-11-16T09:04:54.697
> 
> 标签：c#, excel, excel-interop

我正在尝试循环浏览 excel 工作簿并将粘贴值复制到该工作簿中每个工作表的顶部。但是当我转到下一张纸时，我在网上遇到了一个内存问题：ws.select(true)。

遇到的错误：

来自 HRESULT 的异常：0x800A03EC：当我此时关闭工作簿时，excel 抛出：内存不足（错误 7）

附加信息：

> 文件大小 3mb，20 个选项卡和大量从 olap 数据库 TM1 读取的数据库公式。微软办公 2007

我正在运行的代码如下。有没有更有效的运行方法可以防止内存不足错误或者这是不同的东西？

任何帮助将非常感激！

#

```
 public bool wbCopyValueOnly(string workBook) 
    { 

    Workbook wb = excel.ActiveWorkbook;
    Worksheet ws;
    Range rng;

    int WS_Count = wb.Sheets.Count;
    for (int i = 0; i < WS_Count; i++)
    {
        try
        {
            ws = wb.Sheets[i + 1];
            ws.Activate();
            ws.Select(true);
            //ws.Select(Type.Missing);
            //ws.Cells.Select();
            ws.UsedRange.Select();

            //ws.Cells.Copy();
            ws.UsedRange.Copy(Type.Missing);
            ws.UsedRange.PasteSpecial(Excel.XlPasteType.xlPasteValues, Excel.XlPasteSpecialOperation.xlPasteSpecialOperationNone, false, false);
            // select of range to get around memory issue
            excel.Application.CutCopyMode = (Excel.XlCutCopyMode)0;
            //rng = ws.get_Range("A1");
            //rng.Select();
            NAR(ws);

        }
        catch (System.Runtime.InteropServices.COMException err)
        {

            cLogging.write(LogLevel.Error, err.Message);
            Debug.Print(err.Message);
            return false;
        }

    }
    NAR(wb);
    return true;

    }

    private void NAR(object o)
    {
        try
        {
            while (System.Runtime.InteropServices.Marshal.ReleaseComObject(o) > 0) ;
        }
        catch { }
        finally
        {
            o = null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:34:52.993

我有一个程序可以从多达 100 个选项卡复制回第一个摘要页面，我发现使用 .Copy() 会导致几个问题。特别是如果您的程序运行了一段时间；当前用户无法使用复制粘贴功能而没有奇怪的结果。我建议使用变量来存储您需要的内容，然后写入预期的范围。如果您需要更改范围的格式，录制宏非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:26:42.333

```
ws.Activate();
ws.Select(true);
ws.UsedRange.Select(); 
```

我认为这些代码是不必要的。

你可以录制一个 Marco 来学习如何修改你的代码。

# android - 通过安卓应用邀请 Facebook 好友

> ID：13413413
> 
> 赞同：1
> 
> 时间：2012-11-16T09:05:14.393
> 
> 标签：android, facebook

Facebook 邀请朋友 - 我尝试[通过 android 应用程序向 facebook 朋友发送邀请，](https://stackoverflow.com/questions/5210655/send-an-invite-through-android-application-to-facebook-friends)但在 column71:EntityRef:expecting ';' 行出现错误 在对话框中。

# android - 在android中避免OutOfMemoryError

> ID：13413414
> 
> 赞同：0
> 
> 时间：2012-11-16T09:05:25.430
> 
> 标签：android

将图像加载到 xml 中的 ImageView 会占用更多内存？

我有一个包含大约 7 个图像视图的活动（就像任何 android 手机中的应用程序托盘一样。）

我正在为 xml 中的每个图像视图加载图像。这会导致 OutOfMemoryError 吗？

有没有办法回收这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:27:16.617

是的，可以附加`drawable`图像，`ImageView`并且可以在需要时将其删除。

```
imageview.setBackgroundResource(R.drawable.image);
                or    
imageview.setImageDrawable(drawable); 
```

它不会导致任何内存不足问题。[链接到文档](http://developer.android.com/reference/android/widget/ImageView.html#setImageDrawable%28android.graphics.drawable.Drawable%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:24:54.880

我在加载图像时遇到了这个问题。有时此错误只能在 Android 模拟器中看到，有时这也会使移动设备中的应用程序崩溃。

我通过以下两个步骤解决了这个问题：

1.  如果分辨率太高，请重新调整图像大小。

2.  没有同时打开太多图像对象。

    您也可以通过在不再需要时将图像对象分配为 NULL 来帮助垃圾收集器。

除非有必要，否则我会防止同时打开太多图像。

您必须重新调整大小的因素将取决于图像的实际大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:05:47.290

解决 Android 内存问题的几个小技巧：

1）。切勿使用局部变量专门在循环中存储大数据/位图，因为它会创建不必要的对象。在这种情况下，我更喜欢类/实例变量。除非需要，否则尽量不要持久化数据。

2）。尽可能避免调用 View.findViewById(..)。Romain Guy 在[Google I/O 2010](http://www.youtube.com/watch?v=wDBM6wVEO70)中明确指出此方法成本高（运行需要一些 KB 的内存），因此请巧妙地调用此方法，就像使用 ViewHolder 一样会消耗更少的内存。

3) 有效使用字符串池，在对字符串进行繁重操作时使用 StringBuilder/StringBuffer。确保您知道何时必须使用 StringBuffer，因为它是同步的，并且与 StringBuilder 相比再次昂贵。

# perl - Perl：文件大于 2 GB 的 glob 的奇怪行为

> ID：13413418
> 
> 赞同：11
> 
> 时间：2012-11-16T09:05:33.773
> 
> 标签：perl, aix, glob

我只是想获取给定带有通配符的路径的文件名列表。

```
my $path = "/foo/bar/*/*.txt";
my @file_list = glob($path);
foreach $current_file (@file_list) {
   print "\n- $current_file";
} 
```

大多数情况下，这工作得很好，但如果有一个大于 2GB 的文件，在 /foo/bar/* 子路径之一的某个地方，glob 返回一个空数组，没有任何错误或警告。

如果我删除文件文件或添加这样的字符/括号序列：

```
my $path = "/foo/bar/*[0-9]/*.txt"; 
```

或者

```
my $path = "/foo/bar/*1/*.txt"; 
```

然后 glob 再次工作。

更新：

这是一个示例（出于业务政策的考虑，我必须屏蔽路径名）：

```
[root]/foo/bar # ls -lrt
drwxr-xr-x    2 root     system         256 Oct 11 2006  lost+found
drwxr-xr-x    2 root     system         256 Dec 27 2007  abc***
drwxr-xr-x    2 root     system         256 Nov 12 15:32 cde***
-rw-r--r--    1 root     system  2734193149 Nov 15 05:07 archive1.tar.gz
-rw-r--r--    1 root     system     6913743 Nov 16 05:05 archive2.tar.gz
drwxr-xr-x    2 root     system         256 Nov 16 10:00 fgh***
[root]/foo/bar # /home/user/test.pl
[root]/foo/bar # 
```

删除 >2GB 文件（或使用“/foo/bar/[acf] */* ”而不是“/foo/bar/ */* ”进行通配）

```
[root]/foo/bar # ls -lrt
drwxr-xr-x    2 root     system         256 Oct 11 2006  lost+found
drwxr-xr-x    2 root     system         256 Dec 27 2007  abc***
drwxr-xr-x    2 root     system         256 Nov 12 15:32 cde***
-rw-r--r--    1 root     system     6913743 Nov 16 05:05 archive2.tar.gz
drwxr-xr-x    2 root     system         256 Nov 16 10:00 fgh***

[root]/foo/bar # /home/user/test.pl
- /foo/bar/abc***/heapdump.phd.gz
- /foo/bar/cde***/javacore.txt.gz
- /foo/bar/fgh***/stuff.txt
[root]/foo/bar # 
```

有什么建议吗？

我正在使用：Perl 5.8.8 Aix 5.3 文件系统是本地 jfs。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:12:29.887

在没有正确答案的情况下，您将需要解决方法。我猜你在 5.8.8 的 glob() 实现中遇到了一些特定于平台的错误

我快速浏览了 CPAN 上的源代码，但我的 C 太生锈了，无法发现任何有用的东西。

不过，该模块已经发生了很多变化，因此很可能已经报告并修复了一个错误。您甚至还没有使用 5.8 的最后一个版本——那里有一个 5.8.9，其中提到了对 AIX 兼容性和 File::Glob 的更新。

如果你还没有安装[local::lib](https://metacpan.org/module/local%3a%3alib)，我会测试这个，然后可能是[cpanm](https://metacpan.org/module/cpanm)并尝试更新 File::Glob - 看看它做了什么。您可能需要从[此处手动下载文件](http://cpansearch.perl.org/src/NWCLARK/perl-5.8.9/ext/File/Glob/)

如果这解决了问题，那么您可以将更新部署到所需的系统，或者您必须重新实现所需的 glob() 位。这将取决于你的模式有多复杂。

如果它不能解决问题，那么至少您可以将一些 printf 粘贴到代码中并查看它在做什么。

希望有人会在我单击“发布您的答案”后大约 5 分钟发布一个真正的答案并使其变得多余。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-16T14:00:11.590

我以前从未使用过新的 Glob 函数，所以我无法评论好处/问题，但似乎很多人在使用它时遇到了问题：请参阅 => [https://stackoverflow.com/search?q=perl +glob&submit=搜索](https://stackoverflow.com/search?q=perl%20glob&submit=search)一些问题和可能的解决方案。

如果您不介意尝试其他方法：这是我在无数项目中使用过的久经考验的“老派”perl 解决方案：

```
my $path = "/foo/bar/";
my @result_array = qx(find $path -iname '*.txt'); #run the system find command 
```

如果您 - 出于某种原因不想从脚本中运行系统命令，请改为查找内置的 Find::Perl 模块：[http ://search.cpan.org/~dom/perl-5.12.5/lib /文件/查找.pm](http://search.cpan.org/~dom/perl-5.12.5/lib/File/Find.pm)

祝你好运

# c++ - 参数化构造函数不是副本

> ID：13413419
> 
> 赞同：1
> 
> 时间：2012-11-16T09:05:36.187
> 
> 标签：c++, constructor

假设我们有一个类 A 包含作为同一类的成员：

```
Class A{
   const A &a;
} 
```

我想创建一个传递该成员值的参数化构造函数，但我不想定义该类的复制构造函数。

```
A(const A& memberA): a(memberA)     {} 
```

怎么能指示编译器这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:07:52.803

您可以将此构造函数定义为`explicit`.

（对于可以使用一个参数调用的所有构造函数，这是一个很好的规则。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T09:23:28.850

可以只引用它所构造的类的构造函数*是*复制构造函数，无论您是否希望它是一个。复制构造函数是这样定义的：

> 如果非模板构造`class X`函数的第一个参数是、或类型`X&`，并且没有其他参数，或者所有其他参数都有默认参数，那么它就是一个复制构造函数。`const X&``volatile X&``const volatile X&`

您可以声明它`explicit`以限制如何复制类（`A a = A()`例如防止），但只要它具有该签名，它仍然是一个复制构造函数。

# objective-c - ObjC 协议可能无用

> ID：13413423
> 
> 赞同：1
> 
> 时间：2012-11-16T09:05:43.350
> 
> 标签：objective-c, protocols, type-safety

在 ObjC 中，我们可以使用协议来限制`id`行为，因此我们可以声明类似的东西 ，直到我们提供一个值或一个非变量 as`-(void)aMethod:(id<aProtocol>)aVar`之前，它工作得很好，但这完全被破坏了，因为我们可以传递一个没有协议说明符的泛型变量。 .. 这正常吗？有什么解决方法吗？我错过了什么吗？`id``aVar``id`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:09:30.457

您没有理解 Objective-C 中的类型是在运行时确定的，而不是在编译时确定的。仅仅因为你说一个对象将是类型`id<aProtocol>`并不意味着在运行时它一定是这样的。

指定某些东西的想法`id<aProtocol>`是为了帮助您作为开发人员和使用您的代码的人。它可以帮助您作为开发人员，因为如果您尝试对编译器可以确定它认为在其假定类型的实例上不存在的东西调用方法（不包括转发，这可能意味着实例响应编译器无法确定的内容）。它可以帮助人们使用您的代码，因为它告诉他们在与您的代码交互时应该遵守的合同。

所以，在你的问题中，你说：

> 但是如果我们传递一个没有协议说明符的通用 id 变量，这将被完全破坏

好吧，编译器会警告并告诉您您正在尝试传递不符合该协议的内容，除了传递`id`. 这就是为什么您通常应该尝试更精确地键入内容，而不仅仅是`id`.

如果您有这样定义的方法：

```
- (void)aMethod:(id<aProtocol>)aVar 
```

然后`aVar`可以是`SomeSubclass`这样定义的类型：

```
@interface SomeSubclass : NSObject <aProtocol> 
```

然后你可以`aMethod`像这样使用：

```
SomeSubclass *obj = [SomeSubclass new];
[other aMethod:obj]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T09:16:57.117

只需使用`id`less，并尽可能使用正确的类型声明变量和参数。就是说：不要乱传`id`s。如果您正在实现一个集合类（例如），那么`id`' 通常很有用。

我的方法是指定类型，并在源代码中尽可能地引入该类型。所以我省略`id`并添加了类型，当（例如）我从集合中获取引用时，我创建了一个变量：

```
MONType<MONProtocol>* thing = [array objectAtIndex:idx];
// now thing is correctly typed. use thing. 
```

同样，如果我有一个`id`参数，我声明一个新变量：

```
- (IBAction)someAction:(id)sender
{
  NSButton * button = sender;
  // now use button, not sender 
```

协议*非常*有用。很多时候，比子类化更好/更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T21:28:20.993

我（终于）发现使用 Objective-C++ 是可行的方法。假设我希望能够传递`NSString`or `NSNumber`（而不是使用过多的泛型`id`，而不是使用变得无用的传递`id`值的协议）：好吧，我可以创建一个具有两个不同构造函数的 C++ 类，一个用于每个 ObjC 类，所以传递`id`值不能再做（几乎直接）。例如，让我们看一下

```
class NSStringOrNSNumber{
    public:
        NSStringOrNSNumber(NSString *);
        NSStringOrNSNumber(NSNumber *);
}; 
```

最大的优点是带`NSStringOrNSNumber`参数的方法/函数可以直接获取 NSString/NSNumber 值，因为构造函数充当隐式强制转换。换句话说，如果我们有

```
void aFunction(NSStringOrNSNumber param); 
```

以下调用是完全有效的：

```
aFunction(@"Hello!");
aFunction(@25); 
```

唯一的（小）缺点是，如果我们想取回传递给构造函数的值，我们需要类来实现一个函数。

使用 C++ 类构造函数来获得类似的东西`id<NSCoding>`仍然比`id<NSCoding>`直接使用更好：事实上，如果我们执行以下操作

```
@class classOne, classTwo;

class NSCodingClass{
    private:
        NSCodingClass(classOne *);
        NSCodingClass(classTwo *);
    public:
        NSCodingClass(id<NSCoding>);
} 
```

我们将无法将泛型`id`作为参数传递（因为它会模棱两可：编译器无法知道在两个私有构造函数中调用哪个构造函数）

# javascript - IE 中的 kendoui 拆分器错误

> ID：13413430
> 
> 赞同：2
> 
> 时间：2012-11-16T09:06:23.790
> 
> 标签：javascript, internet-explorer, kendo-ui

我的单页应用程序中有一个剑道拆分器。在某种情况下，我想删除并清除包含拆分器的容器的内容。但是在我清除容器并重新调整浏览器窗口大小后在 IE 上，出现错误：

`SCRIPT5007: Unable to get value of the property 'offsetHeight': object is null or undefined`

我通过 清除内容`$('#container').html('')`。

jsfiddle：http: [//jsfiddle.net/H5Ef6/2/](http://jsfiddle.net/H5Ef6/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:48:01.873

在[官方文档](http://docs.kendoui.com/api/web/splitter)中，他们向`destroy`拆分器提出了建议。但是使用您拥有的 kendo ui 库，此方法不存在。但它主要做的是去除`resize`这个分离器上的绑定。

因此，当您清除容器时，您应该像这样取消绑定此事件：

```
$("#vertical").data("kendoSplitter").unbind("resize"); 
```

（见这个[小提琴](http://jsfiddle.net/LLcfE/1/)）。

# python - 将 typedef 与 SWIG 一起使用

> ID：13413434
> 
> 赞同：2
> 
> 时间：2012-11-16T09:06:35.033
> 
> 标签：python, c, swig

我有一个 C 头文件，其中包含带有 typedef 的结构定义，以及一个带有 typedef 的 char 定义数组：

```
/* File: test.h */

typedef struct
{
    char *key;
    void *value;
    int size;
} cti_pair;

typedef char FOO[CONST]; 
```

SWIG 接口文件包含以下几行：

```
/* File: test.i */
%module test

%{
#define SWIG_FILE_WITH_INIT
#include "/home/users/jdoe/workspace/project/src/lib-cti/test.h"
...
%}

#ifndef CTI_TYPES_H_
#define CTI_TYPES_H_
#include "cti_const.h"

typedef char FOO[CONST];

typedef struct
{
    char *key;
    void *value;
    int size;
} cti_pair; 
```

问题是我可以访问 cti_pair 结构，但不能在我的 python 脚本中使用 FOO （它没有定义）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:49:56.413

好吧，只要弄清楚问题是什么。实际上，我在接口文件的另一部分使用了 %extend 。但是这个关键字只能用在结构上，不能用在基本的 typedef 上（如果我们以错误的方式使用 %extend，SWIG 不会显示任何错误消息）。

事实上，FOO 是被定义的。问题根本与此无关。谢谢！

# java - 如何从我的网络域向收件箱文件夹发送电子邮件

> ID：13413436
> 
> 赞同：0
> 
> 时间：2012-11-16T09:07:07.917
> 
> 标签：java, email

我们正在为我们的公司做一个电子邮件活动，但是在从我们的域发送电子邮件时，它会被发送到垃圾邮件文件夹，而我们想要发送到收件箱。
如果有人有解决方案，请分享给我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:43:45.867

您是否意识到是接收端决定您的电子邮件是否进入收件箱、垃圾邮件文件夹或其他地方（CD。Outlook 和其他电子邮件客户端中的规则）？

您的电子邮件营销活动邮件可能始终以垃圾邮件文件夹结尾的原因有大约一百万个，其中一些是：

*   内容是垃圾邮件。
*   您正在发送收件人：或抄送：列表中超过 20 人的电子邮件
*   您的 SMTP 框可能会列在各种 RBL 中（尽管这很可能会导致完全拒绝）

我建议您获取其中一封带有垃圾邮件标记的电子邮件，并查看一路上由各种检查器（通常`X-Spam-*`或类似）添加的标题，以找出您的问题所在。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:21:01.637

There are a whole bunch of techniques modern mail servers use to detect spam. Not all of them are about the content of the messages.

1.  The receiver looks up the reverse-DNS of the sending server. If the reverse-DNS is different from the part after the @, then that's a big strike against the email.

2.  Add an [SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework) record to your DNS record.

3.  [Start signing your outbound mail](http://en.wikipedia.org/wiki/DomainKeys)

# android - 压缩和加密文件。

> ID：13413440
> 
> 赞同：0
> 
> 时间：2012-11-16T09:07:23.873
> 
> 标签：android, file, zip

我想做的是加密和压缩文件并将它们存储在设备的 SD 卡上。

我以前没有使用过原始文件或压缩文件，所以我不知道从哪里开始。

可以在安卓上做吗？我使用的是 4.0.3，是否可以像 1 gb 文件夹一样压缩？还是我必须将它们分成可管理的块？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:22:03.967

您可以使用[ZipInputStream](http://developer.android.com/reference/java/util/zip/ZipInputStream.html)和[ZipOutput](http://developer.android.com/reference/java/util/zip/ZipOutputStream.html)流来读写 Zip 文件。Java 文档页面也有用于阅读和写作的示例代码。您可以使用android加密库进行加密/解密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:54:54.120

```
import java.io.*;import java.util.zip.*;
public class Zip {

  public static void main(String[] arg)
  {
    String[] source = new String[]{"C:/Users/MariaHussain/Desktop/hussain.java","C:/Users/MariaHussain/Desktop/aa.txt"};
    byte[] buf = new byte[1024];
    try {
        String target = "C:/Users/MariaHussain/Desktop/target1.zip";
        ZipOutputStream out = new ZipOutputStream(new FileOutputStream(target));
        for (int i=0; i<source.length; i++) {
            FileInputStream in = new FileInputStream(source[i]);

            // Add ZIP entry to output stream.
            out.putNextEntry(new ZipEntry(source[i]));

            // Transfer bytes from the file to the ZIP file
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }

            // Complete the entry
            out.closeEntry();
            in.close();
        }

        // Complete the ZIP file
        out.close();
    } catch (IOException e) {

    }

  }

} 
```

# ruby-on-rails - Ruby on Rails 法语闪现消息

> ID：13413441
> 
> 赞同：2
> 
> 时间：2012-11-16T09:07:28.960
> 
> 标签：ruby-on-rails, encoding, utf-8, localization, ruby-on-rails-3.2

使用法语的 Rails 应用程序工作，但是每当我在 Flash 消息中添加重音时，它都会破坏网站。

例如

```
format.html {redirect_to @message.annonce, notice:"Votre message a été envoyé"}
format.html {redirect_to @message.annonce, notice:"Votre email n'a pas pu être envoyer à cause d'une erreur."} 
```

我的 config/application.rb 看起来像这样

```
 config.i18n.default_locale = :fr
 config.encoding = "utf-8" 
```

怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:08:42.177

您应该添加`# encoding: UTF-8`为文件的第一行以在其中添加重音。

如果这不起作用，请给我们提出的异常。

# html - css 选择器，带有子元素（及其子元素）的父元素

> ID：13413451
> 
> 赞同：0
> 
> 时间：2012-11-16T09:08:10.193
> 
> 标签：html, css, css-selectors

谁能解释为什么这不起作用？在*div> **ol** :first-child*上？

```
div>ul:first-child
{
    background:yellow;
} 
```

顶部的样式适用于 ul。高亮它。如果我将 >ul 更改为 >ol.. 没有任何反应

```
<div>
<ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Coca Cola</li>
</ul>
<ol>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Coca Cola</li>
</ol>
</div> 
```

[http://jsfiddle.net/mFMuq/](http://jsfiddle.net/mFMuq/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:14:45.127

来自 w3schools.com[的第一个孩子选择器](http://www.w3schools.com/cssref/sel_firstchild.asp)：

```
The :first-child selector is used to select the specified selector, only if it is the first child of its parent. 
```

ol 不是它的父母的第一个孩子，实际上它是它的父母的第一个 ol 并不重要。如果您交换 ol 和 ul ，则 ol 有效，但 ul 无效。

如果你想定位第一个 ol 然后使用 :first-of-type 选择器。[JSFiddle](http://jsfiddle.net/ReyGu)

# c++ - QFile::open 使用 unicode 文件名失败

> ID：13413453
> 
> 赞同：1
> 
> 时间：2012-11-16T09:08:20.260
> 
> 标签：c++, qt, unicode, filenames

我想用 QFile::Open 打开一个文件，其中我的文件名是 unicode：

```
 QString fname(QFile::decodeName("D:/أحدالأنشطة.txt"));
           QFile qFile(fname);

           bool b=qFile.open(QIODevice::ReadOnly);
           if(b)
           {
               FILE* filedesc = fdopen(qFile.handle(), "rb");
               if(filedesc!=NULL)
               {
                   char* nb=(char*)malloc(2*sizeof(char));
                   qDebug()<<"opened ";
                   size_t size=fread(nb,sizeof(char),2,filedesc);
                   fclose(filedesc);
                   qDebug()<<"filedesc closed size "<<size<<"nb "<<QString::fromAscii(nb,2);
                   nb=NULL;
                   free(nb);

               }else qDebug()<<"filedesc failed   error"<<strerror(errno);

            }else
                qDebug()<<"qFile failed   error"<<strerror(errno); 
```

它失败了，我得到：

```
qFile failed   error No error 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:23:03.357

如果您的源文件是 UTF-8 编码的，那么您可以这样做：

```
QString fname(QString::fromUtf8("D:/أحدالأنشطة.txt")); 
```

如果是 UTF-16，那么：

```
QString fname(QString::fromUtf16("D:/أحدالأنشطة.txt")); 
```

如果源文件既不是 UTF-8 也不是 UTF-16，请尝试以下操作：

```
QString fname(QString::fromLocal8Bit("D:/أحدالأنشطة.txt")); 
```

如果这也不起作用，那么您需要找出您的编辑器正在使用的字符集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:13:14.453

如果数据在`WCHAR`数组中，则不仅仅是使用`QString filename((QChar*) yourWcharData);`

# php - 在打印窗口javascript代码中另存为pdf

> ID：13413455
> 
> 赞同：0
> 
> 时间：2012-11-16T09:08:36.590
> 
> 标签：php, javascript, html, pdf, printing

帮助..如何在javascript代码的打印窗口中另存为pdf

如何更改此代码？

```
<a href="javascript:window.print()">PDF</a> 
```

我需要让我的链接打开打印窗口，但自动将目的地设置为“另存为 pdf”而不是“打印”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:16:28.817

您不能通过 javascript 执行此操作。

你可以这样做：

```
<a href="/getpdf.php">PDF</a> 
```

通过 TCPDF 或其他方式以 getpdf 形式的 pdf 文件

# java - 如何通过提供的地址（如 0x3790f200）使用 mat 识别指定对象

> ID：13413456
> 
> 赞同：0
> 
> 时间：2012-11-16T09:08:39.797
> 
> 标签：java, memory-leaks, jvm

我使用内存分析器工具来检测内存泄漏。我通过 java.util.WeakHashMap$Entry 类 java.lang.Class @ 0x3790f200 System Class 得到结果，Native Stack 保留了大部分堆空间。如何识别这是哪个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:47:50.930

如果要查找该特定对象（地址为 0x3790f200），请单击内存分析器工具工具栏上的放大镜图标并输入地址。看到对象后，右键单击它并选择“显示保留集”。这将打开一个新的直方图表，显示由第一个对象 (@0x3790f200) 保存在内存中的所有对象（按其类型分组）。您可以选择“计算最小保留大小”（从工具栏或上下文菜单），将保留堆列附加到表中。单击列标题对表格进行排序，以便您可以查看哪些对象保留了大块内存。

从那时起，您可以使用上下文菜单中的命令（例如“列出具有传出引用的对象”）通过查看单个对象来进一步调查。检查器窗口对于检查单个对象的字段也很有用。希望这个对你有帮助。

# c# - C#中的并行编程如何分离数据

> ID：13413457
> 
> 赞同：0
> 
> 时间：2012-11-16T09:08:40.037
> 
> 标签：c#, parallel-processing, multiprocessing, simulator

在学校，我们上周开始使用多线程，现在我们已经在使用多处理了，我对它有点迷茫，所以我要向你解释这个问题。对于一个练习，我们必须制作一个模拟 10000 场游戏的赌场游戏模拟器，以便我们知道赌场赢得游戏的频率。所以我编写了模拟器，我有 5 种方法来运行游戏：

```
static void game(Croupier croupier)
{
    croupier.createNewCardDeck();
    croupier.shuffleCards();
    croupier.giveCardsToPlayers();
    croupier.countPlayerPoints();
    croupier.displayResults();
} 
```

如果我在 10000 次迭代的经典 for 循环中调用游戏，它运行正常，大约需要 2 秒，银行赢了 50% 的时间。

如果我使用 Parallel.For，它会在 shuffleCards 上崩溃，因为（我认为）多个进程正在尝试同时编辑同一组卡片。

我的第一个想法是在我的 shuffleCards 上放置一个 Mutex，但它会减慢模拟速度，而使用并行编程的目的是提高速度。所以我想在不同的过程中分离数据（所以我不是 10000 次迭代，而是在 4 个过程中进行 2500 次，每个循环都有自己的荷官、玩家、卡片等......）

您认为解决此问题的最佳方法是什么？您是否有任何简单的教程来解释如何处理使用相同数据的并行工作？您会选择哪种解决方案？谢谢

编辑：ShuffleCard 方法

```
 List<Card> randomList = new List<Card>();

        Random r = new Random();
        int randomIndex = 0;

        while (_cards.Count > 0)
        {
            randomIndex = r.Next(0, _cards.Count); //Choose a random object in the list
            randomList.Add(_cards[randomIndex]); //add it to the new, random list
            _cards.RemoveAt(randomIndex); //remove to avoid duplicates
        }
        return randomList; 
```

所以是的 _cards 是荷官的私有财产（调用 this._cards = shuffleCards() ，每个进程都有相同的卡片列表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T09:13:16.173

你的想法是要走的路：给每个“处理单元”（即线程、任务）自己的游戏桌（荷官、玩家、卡片）。就像在真正的赌场中一样，您可以拥有任意数量的游戏桌，同时玩所有游戏，彼此独立，因为它们不共享任何数据。每当游戏结束时，结果都会转移到银行（您只有一个）。因此，唯一必须同步的（与关键部分）是将结果汇总到银行中。

这个例子是并行编程的完美小例子，因为现实世界可以相当直观地建模成相应的类和算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:22:08.023

要么给每个线程它自己的集合集，要么实现一个[并发集合](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)来实现它自己的线程锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:28:24.317

前面的答案确实是对的，目标是拆分工作以便尽快运行它。简而言之：将您的代码设计为并发的，以便它可以并行运行。

在每次运行中，我们有：

*   荷官
*   正在玩的游戏
*   每位荷官一次只能玩一场游戏。
*   比赛结果

我们需要做出的关于并发性的两个主要决定是

*   我们如何在游戏之间共享或分发荷官？
*   结果如何共享？

以下是荷官的不同选项：

*   如果我们只有一个 Croupier，我们最终将没有并发。一次只能玩一种游戏。
*   我们每场比赛可以有一名荷官。这样我们理论上可以同时运行每个游戏。
*   每个处理单元可以有一个庄家。这将允许尽可能多的游戏运行，但这可能不会像每场游戏一个庄家一样平衡，因为在原始处理之外可能还有其他因素。想象一下，如果写入结果是一个冗长的 IO 操作，但不是 CPU 密集型操作。我们可以运行更多游戏，但荷官正在等待结果完成。

对于结果，我们可以：

*   在我们收到结果时将结果输出到某个流。如果这是一个控制台，输出很容易变得乱码。
*   将结果输出给依次处理结果的消费者。这是更好的选择，因为它允许在不影响游戏的情况下返回结果状态。

因此，总体决策应该始终围绕：如何使我的代码尽可能地友好，以允许托管系统尽可能地运行事物。

对于下面的示例，我为每个处理单元选择了一个 Croupier，不是因为它更好，而是因为其他答案中没有说明。

以下是一些示例代码，说明了其中一些想法：

```
void Main()
{
    const int NUMBER_OF_GAMES = 10000;

    // this is how we have a Croupier per thread.
    var threadLocalCroupier = new ThreadLocal<Croupier>(() => new Croupier());

    var results = from gameNumber in Enumerable.Range(0, NUMBER_OF_GAMES).AsParallel()
                let croupier = threadLocalCroupier.Value
                select game(croupier, gameNumber);

    foreach (var result in results) {
        Console.WriteLine("Game done {0}", result.GameNumber);
        // display or analyse results.
    }
}

static ResultOfGame game(Croupier croupier, int gameNumber)
{
    croupier.createNewCardDeck(gameNumber);
    croupier.shuffleCards();
    croupier.giveCardsToPlayers();
    croupier.countPlayerPoints();
    var results = croupier.getResults();

    return results;
}

class ResultOfGame {

    public int GameNumber { get; private set; }

    public ResultOfGame(int gameNumber) 
    {
        this.GameNumber = gameNumber;
    }

}

// Define other methods and classes here
class Croupier {

private int currentGame;

    public void createNewCardDeck(int gameNumber) {this.currentGame = gameNumber;}
    public void shuffleCards() {}
    public void giveCardsToPlayers() {}
    public void countPlayerPoints() {}
    public ResultOfGame getResults() {
        return new ResultOfGame(this.currentGame);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:08:53.277

> 所以我不是 10000 次迭代，而是在 4 个进程上执行 2500 次

可以同时使用任务和数据并行，例如，

```
 int noOfProcess = 4;
        Task[] t = new Task[noOfProcess];
        for (int i = 0; i < noOfProcess; i++)
        {
           t[i]= Task.Factory.StartNew(() =>
            {
                Parallel.For(0, 2500, (v) => game(..));
            });
        }
        Task.WaitAll(t); //If Synchronous is needed. 
```

避免写入共享内存位置[。在使用并行编程时检查这个 msdn 以了解一些陷阱。](http://msdn.microsoft.com/en-us/library/dd997392.aspx)

# android - 调用 DownloadManager->addCompletedDownload 方法的权限被拒绝

> ID：13413459
> 
> 赞同：0
> 
> 时间：2012-11-16T09:08:45.600
> 
> 标签：android, download

当我的应用程序完成下载时，我想向 DownloadManager 发送通知。

我在 DownloadManager 中找到了一个名为[addCompletedDownload](http://developer.android.com/reference/android/app/DownloadManager.html)的方法。

因此，我在清单中添加了以下使用权限：

```
<uses-permission android:name="android.permission.ACCESS_DOWNLOAD_MANAGER"/>
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"/> 
```

并设置活动“android:exported="true"”</p>

但是这种方法行不通。

这是日志：

> ```
> W/ActivityManager(238): Permission denied: checkComponentPermission() owningUid=10026
> W/ActivityManager(238): Permission Denial: broadcasting Intent { 
>   act=android.intent.action.MEDIA_MOUNTED dat=file:///mnt/sdcard flg=0x10 } from
>   com.skymobi.browser (pid=19850, uid=10134) is not exported from uid 10026 due to
>   receiver com.android.providers.downloads/com.android.providers.downloads.DownloadReceiver 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:21:40.543

我认为您也应该在清单中添加它：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# php - php中数组中重复元素的计数

> ID：13413465
> 
> 赞同：9
> 
> 时间：2012-11-16T09:09:02.703
> 
> 标签：php, multidimensional-array

嗨，我们如何找到 a 中重复元素的数量`multidimensional array`？

我有一个这样的数组

```
Array
(
    [0] => Array
        (
            [lid] => 192
            [lname] => sdsss
        )

    [1] => Array
        (
            [lid] => 202
            [lname] =>  testing
        )

    [2] => Array
        (
            [lid] => 192
            [lname] => sdsss
        )

    [3] => Array
        (
            [lid] => 202
            [lname] =>  testing
        )

) 
```

如何找到每个元素的计数？

即，具有 id 的条目`192`数`202`等

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T09:20:33.113

你可以采用这个技巧；将数组的每个项目（本身就是一个数组）映射到其各自的`['lid']`成员，然后用于`array_count_value()`为您进行计数。

```
array_count_values(array_map(function($item) {
    return $item['lid'];
}, $arr); 
```

另外，它是单线的，因此增加了精英黑客的地位。

### 更新

从 5.5 开始，您可以将其缩短为：

```
array_count_values(array_column($arr, 'lid')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:17:59.563

```
foreach ($array as $value) 
{
    $numbers[$value[lid]]++;
}
foreach ($numbers as $key => $value) 
{
    echo 'numbers of '.$key.' equal '.$value.'<br/>';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-26T12:32:05.360

以下代码将计算数组的重复元素。请查看并尝试此代码

```
 $arrayChars=array("green","red","yellow","green","red","yellow","green");

    $arrLength=count($arrayChars);
    $elementCount=array();
  for($i=0;$i<$arrLength-1;$i++)
    {
       $key=$arrayChars[$i];
      if($elementCount[$key]>=1)
       {
          $elementCount[$key]++;
       } else  {
          $elementCount[$key]=1;
       }

   }

   echo "<pre>";
   print_r($elementCount); 
```

输出：
数组（[绿色] => 3 [红色] => 2 [黄色] => 2）

您还可以在以下链接 [http://solvemyquest.com/count-duplicate-element-array-php-without-using-built-function/上查看与数组处理类似的问题](http://solvemyquest.com/count-duplicant-element-array-php-without-using-built-function/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:16:32.720

以下代码将获取所有这些的计数 - 最后任何 > 1 的内容都将重复。

```
<?php
$lidCount = array();
$lnameCount = array();

foreach ($yourArray as $arr) {

  if (isset($lidCount[$arr['lid']])) {
    $lidCount[$arr['lid']]++;
  } else {
    $lidCount[$arr['lid']] = 1;
  }

  if (isset($lnameCount [$arr['lname']])) {
    $lnameCount [$arr['lname']]++;
  } else {
    $lnameCount [$arr['lname']] = 1;
  }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T09:17:02.003

```
$array = array('192', '202', '192', '202');
print_r(array_count_values($array)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T09:21:37.837

```
$orders = array(
 array(
    'lid' => '',
    'lname' => '',

  ))....
$foundIds = array();
foreach ( $orders as $index => $order )
{
  if ( isset( $foundIds[$order['lid']] ) )
  {
    $orders[$index]['is_dupe'] = true;
    $orders[$foundIds[$order['lid']]]['is_dupe'] = true;
  } else {
    $orders[$index]['is_dupe'] = false;
  }
  $foundIds[$order['lid']] = $index;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T09:34:56.853

试试这个代码：

```
$array_count = array();
foreach ($array as $arr) :
    if (in_array($arr, $array_count)) {
        foreach ($array_count as $key => $count) :
            if ($key == $arr) {
                $array_count[$key]++;
                break;
            }
        endforeach;
    } else {
        $array_count[$arr] = 1;
    }
endforeach; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-16T09:35:38.677

检查`in_array()`功能。

# java - 如何对数据库访问/ORM 实体进行单元测试？

> ID：13413466
> 
> 赞同：0
> 
> 时间：2012-11-16T09:09:08.250
> 
> 标签：java, unit-testing, testing

通常在单元测试中，使用对象的模拟；但是如果 EntityManager 被模拟，应该如何为 JPA 实体编写单元测试？实际测试的是什么？

编辑：假设我想测试一个对象是否持久化；在生产代码中，为了持久性，可以使用容器提供的 EntityManager。对于这种类型的测试，是否应该模拟此 EntityManager，它应该是用于测试的资源本地测试，还是应该在容器中运行测试（测试运行由 Java 代码触发）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:25:02.883

实体代表数据。它可以有一些方法（除了 getter 和 setter），可以像任何其他方法一样进行单元测试。

如果你想测试实体是否可以被持久化并从数据库中检索（即它的映射被正确定义），那么你不应该模拟任何东西。有一个使用真实实体管理器和一个充满测试数据的数据库的测试，并尝试持久化和/或检索实体的实例。

在进行此类测试之前，您可以使用[DbSetup](http://dbsetup.ninja-squad.com/)（是的，此处为自我推销）在数据库中填充测试数据。

# python - 当元素有多个类时，BeautifulSoup SoupStrainer 不起作用？

> ID：13413470
> 
> 赞同：1
> 
> 时间：2012-11-16T09:09:21.883
> 
> 标签：python, beautifulsoup

我试试

```
necessaryStuffOnly = SoupStrainer("table",{"class": "views-table"})
soup = BeautifulSoup(vegetables,parse_only=necessaryStuffOnly) 
```

在这样的桌子上没有运气：

```
<div class="view-content">
  <table class="views-table sticky-enabled cols-20">
    <thead>
      <tr>
        <td>blablaba</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>more blablabla</td>
      </tr>
    </tbody>
  </table>
</div> 
```

这确实适用于 div

```
SoupStrainer("div",{"class": "view-content"}) 
```

不能像这样过滤具有多个类的元素的 SoupStrainer 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:28:37.743

使用的比较是文字相等检查，因此以下工作：

```
soup('table', {'class': "views-table sticky-enabled cols-20"}) 
```

您可以通过将函数传递给过滤器来使其匹配：

```
soup('table', {'class': lambda L: 'views-table' in L.split()}) 
```

可能值得检查您正在使用的版本，因为我觉得这不应该是这种情况了......更新：是的，你去[https://bugs.launchpad.net/beautifulsoup/+bug/ 410304](https://bugs.launchpad.net/beautifulsoup/+bug/410304)

# javascript - Javascript睡眠功能可行吗？

> ID：13413474
> 
> 赞同：-2
> 
> 时间：2012-11-16T09:09:34.073
> 
> 标签：javascript, jquery, html, sleep

> **可能重复：**
> [在 Javascript 中休眠](https://stackoverflow.com/questions/758688/sleep-in-javascript)
> [如果我想要一个 JavaScript 版本的 sleep()，我该怎么办？](https://stackoverflow.com/questions/951021/what-do-i-do-if-i-want-a-javascript-version-of-sleep)

是否可以在 Javascript 中实现睡眠功能？

我有这个代码：

```
var state = true;
$('#changeState').click(function(){
  if (state == true)
    state = false
  else
    state = true
})
while() {
  //do something
  if (state == false){
    sleep();
  }
} 
```

可行吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:16:03.203

如果您尝试让浏览器“忙等待”，它将变得无响应，并且可能会产生相应的警告。

您**必须**允许正常的事件处理循环继续，否则您的`click`处理程序将永远不会被调用。

# java - ArrayList.add(int index, E element) 线程不安全吗？

> ID：13413481
> 
> 赞同：4
> 
> 时间：2012-11-16T09:10:01.813
> 
> 标签：java, multithreading, arraylist, thread-safety

我的[上一个问题](https://stackoverflow.com/questions/13411845/java-5-getting-null-pointer-exception-when-trying-to-use-an-object-retrieved-usi)使我想到了这个问题。

ArrayList线程的[add函数](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)安全吗？

我用以下类制作了一个示例应用程序

```
import java.util.ArrayList;
import java.util.List;

public class ThreadTest
{
    public static List<DummyObject> list = null;
    public static boolean isLoaded = false;
   public static void main(String [] args)
   {
      MyThread t1 = new MyThread(1);
      MyThread t2 = new MyThread(2);

      t1.start();
      t2.start();
   }

   public static void loadObject(){
       if(isLoaded){
           return;
       }
       isLoaded = false;
       try{
       list = new ArrayList<DummyObject>();
       for(int i=0;i<10;i++){
           list.add(i,new DummyObject());
       }}
       catch(Exception e){
           e.printStackTrace();
       }
       isLoaded = true;
   }
} 
```

这些是我的主题

```
public class MyThread extends Thread
{
   int threadNumber ;
   public MyThread(int threadNumber)
   {
      this.threadNumber = threadNumber;
   }

   @Override
   public void run()
   {
       try {
        sleep(10-threadNumber);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
     System.out.println("Running Thread: " + threadNumber);
     ThreadTest.loadObject();
     if(ThreadTest.isLoaded){
         System.out.println(ThreadTest.list);
         for(int i=0;i<ThreadTest.list.size();i++){
             if(ThreadTest.list.get(i)==null){
                 throw new NullPointerException();
             } 
         }
     }else {
         try {
                sleep(10);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
         }
   }
} 
```

这是我的虚拟班

```
public class DummyObject {

} 
```

即使我无法复制`Null Pointer Exception`我在上[一个问题](https://stackoverflow.com/questions/13411845/java-5-getting-null-pointer-exception-when-trying-to-use-an-object-retrieved-usi)中得到的内容，我有时也会收到此错误

```
Exception in thread "Thread-1" java.lang.IndexOutOfBoundsException: Index: 1, Size: 10
    at java.util.ArrayList.add(ArrayList.java:367)
    at ThreadTest.loadObject(ThreadTest.java:25)
    at MyThread.run(MyThread.java:20) 
```

表单 ArrayList 代码这是引发错误的行：

```
if (index > size || index < 0)
        throw new IndexOutOfBoundsException(
        "Index: "+index+", Size: "+size); 
```

但正如我们从 Exception **index 为 1 和 size 为 10**中看到的那样，因此无法满足 if 条件。那么我的假设是否正确，即 arrayList 的 add 函数是线程不安全的，还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:13:52.787

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)中：

> （这个类大致相当于 Vector，只是它是不同步的。）

您需要自己实现同步，或者更好的是，使用像[Vector](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)这样的同步容器。

对于您的代码，您有 2 个线程运行同一段代码 ( `loadObject`)，其中访问/修改了几个静态值。您需要确保每次访问都以同步方式完成。您有 2 个线程，因此您分配了两次该`ThreadTest.list`字段，因此其中一个分配是无用的，但更重要的是，在该列表丢失之前可能会在该列表中插入一些值，因此这些值也会丢失。

您应该确保在分配列表之前未分配列表。

您也可能对 isLoaded 字段有问题，导致列表中有超过 10 个元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T09:17:43.073

简短的回答，不，它不是线程安全的。来自[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

> 请注意，此实现不同步。如果多个线程同时访问一个 ArrayList 实例，并且至少有一个线程在结构上修改了列表，则必须在外部进行同步。（结构修改是添加或删除一个或多个元素，或显式调整后备数组大小的任何操作；仅设置元素的值不是结构修改。）这通常通过同步一些自然封装的对象来完成列表。如果不存在这样的对象，则应使用 Collections.synchronizedList 方法“包装”该列表。这最好在创建时完成，以防止对列表的意外不同步访问：
> 
> ```
> List list = Collections.synchronizedList(new ArrayList(...)); 
> ```

一般来说，Java 中的现代集合都不是线程安全的。如果您只是想让它们不会爆炸，您可以`Collections.synchronizedList`按照 JavaDoc 中的建议使用。然而值得注意的是，这仅仅意味着一次只有一个线程可以访问该集合。这确实使它安全，但可能导致线程被阻塞的问题。

如果你想获得高并发，那么你真的想看看[`java.util.concurrent`package](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)。这为您提供了很好的类，例如，[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)这使得这种线程切换非常容易。更好的是，看看[`Executor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html)可以为您处理很多这种复杂性的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:23:22.807

我已经放置了类`add`方法的实际代码`ArrayList`。

```
/**
     * Inserts the specified element at the specified position in this
     * list. Shifts the element currently at that position (if any) and
     * any subsequent elements to the right (adds one to their indices).
     *
     * @param index index at which the specified element is to be inserted
     * @param element element to be inserted
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    public void add(int index, E element) {
        rangeCheckForAdd(index);

        ensureCapacityInternal(size + 1);  // Increments modCount!!
        System.arraycopy(elementData, index, elementData, index + 1,
                         size - index);
        elementData[index] = element;
        size++;
    } 
```

这里这个方法声明它不是线程安全的，`elementData`因为

```
 private transient Object[] elementData; 
```

，这是更新的，在多线程环境中它可能会导致至关重要的问题。

# ide - 从 JDK 中删除 jar 以便仅显示我实际使用的包的代码完成？

> ID：13413482
> 
> 赞同：0
> 
> 时间：2012-11-16T09:10:04.323
> 
> 标签：ide, intellij-idea, java

我正在使用 IntelliJ Idea，并希望利用内置的代码完成等功能。但是，JDK 中存在数千个对象，但我不知道它们是什么，并且可能永远不会使用。是否可以进入项目结构 - SDK 并删除 SDK 1.7 类路径下列出的大部分 jar 文件？我想这样做的原因是没有代码完成等包括这些对象。如果是，我必须保留哪些（即 rt.jar 等？）谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:14:32.497

文件 -> 设置

在搜索字段中输入自动导入

查找“从导入和完成中排除”框并在此处添加您不想看到的类

# git - 错误：致命：不是 git 存储库：'。' 当我使用 gitolite Hooks post-receive 自动部署代码时

> ID：13413485
> 
> 赞同：1
> 
> 时间：2012-11-16T09:10:33.277
> 
> 标签：git, ubuntu, hook, autodeploy

我的英文不是很好。请多多包涵。

我在stackoverflow和google上搜索过这个问题。但也无法解决这个问题。

我只是想通过 git hooks 构建一个自动部署环境。但它不起作用。

我在一台计算机上使用 Ubuntu 12.04 服务器作为服务器，我称之为***PC-Ser***。我在另一台计算机上使用 Windows 7 PC 作为客户端，我称之为***PC-C***。

我在***PC-Ser***上安装 gitolite ：

> 1.  apt-get 安装 gitolite
> 2.  addgroup gitolite
> 3.  adduser --disabled-password --home /home/gitolite --ingroup gitolite gitolite
> 4.  su gitolite
> 5.  gl-setup /tmp/user.pub

然后我

```
"git clone gitolite@PC-Ser:gitolite-admin" 
```

在***PC-C***上。

我通过编辑 gitolite.conf 文件创建了一个名为 autoDeploy 的存储库并推送它。这是**gitolite.conf**：

```
repo    gitolite-admin
        RW+ = admin

repo    autoDeploy
        RW+ = @all 
```

之后，我在***PC-Ser***上做了一些事情：

```
cd /var/www
git clone /home/gitolite/repositories/autoDeploy.git 
```

然后我编辑**/home/gitolite/repositories/autoDeploy.git/hooks/post-receive**：

```
#!/bin/bash
cd /var/www/autoDeploy
pwd >> /log/pwd.log
git push /home/gitolite/autoDeploy>> /log/push.log 2>&1
echo "finish" >> /log/finish.log
whoami >> /log/user.log 
```

然后，我在***PC-C*** .autoDeploy 上创建了一个 test.txt 并推送它。

但是 /var/www/autoDeploy 没有拉。它不起作用。

***PC-Ser***的日志上有这个：

/log/pwd.log：

```
/var/www/autoDeploy 
```

/log/push.log：

```
fatal: Not a git repository: '.' 
```

/log/finish.log：

```
finish 
```

/log/user.log：

```
gitolite 
```

我尝试通过 root 运行 /home/gitolite/repositories/autoDeploy.git/hooks/post-receive，它成功了，/var/www/autoDeploy 已撤消。

然后我“su gitolite”并运行/home/gitolite/repositories/autoDeploy.git/hooks/post-receive，它也是成功的。没有错误。/var/www/autoDeploy 已经成功。

请帮助我。非常感谢！

# php - Symfony2 class_parents() 类不存在错误

> ID：13413487
> 
> 赞同：1
> 
> 时间：2012-11-16T09:10:35.010
> 
> 标签：php, symfony, orm, doctrine

我正在尝试从 Symfony2 应用程序中使用 Doctrine 2 的表中获取数据。在我的开发机器上运行的代码在部署到生产服务器时会引发错误。这是我的控制器之一。

```
public function listEntitiesAction($entity, Request $request)
{       
    $repository = $this->getDoctrine()->getRepository('AALCOInventoryBundle:' . $entity);
    $metadata = $this->getDoctrine()->getEntityManager()->getClassMetadata('AALCOInventoryBundle:' . $entity);
    $dataTable = new Datatable( $request->query->all(), $repository, $metadata, $this->getDoctrine()->getEntityManager());  
    $dataTable->makeSearch();   
    $view = $this->view($dataTable->getSearchResults(), 200)
            ->setFormat('json');
    return $this->get('fos_rest.view_handler')->handle($view);
} 
```

上面的代码适用于我本地开发机器中的 linux 服务器。实体之一如下。

```
<?php
namespace AALCO\InventoryBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
/**
 * AALCO\InventoryBundle\Entity\Uom
 *
 * @ORM\Table(name="uoms")
 * @ORM\Entity
 */
class Uom
{
    // entity stuff
} 
```

我在 config.yml 上有教义的默认设置，这是错误。

```
request: ErrorException: Warning: class_parents() [<a href='function.class-parents'>function.class-parents</a>]: Class AALCO\InventoryBundle\Entity\uom does not exist and could not be loaded in 
/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php line 40 (uncaught exception) at 
/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php line 40 
```

为所有实体运行`php app/console doctrine:mapping:info`返回`OK`。我已经检查了关于此类错误的其他答案，但没有一个符合我的具体问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:17:42.733

Symfony2 使用自动加载来加载带有类的文件。当您要求`uow`上课时，它会查找 uow.php 文件。文件名在 linux 服务器上区分大小写，因此 uow.php 和 Uow.php 是不同的文件。

您需要`ucfirst`在`$entity`.

# php - Paypal、Masspay：10321 - 资金不足

> ID：13413493
> 
> 赞同：2
> 
> 时间：2012-11-16T09:11:01.637
> 
> 标签：php, curl, paypal, nvp, masspay

我想使用 Paypal API 中的 Masspay 方法。我在沙盒中有一个业务帐户，余额超过了我需要支付的金额。因此，我尝试为 masspay 发出 cURL 请求，如下所示（仅用于测试）：

```
 $url = "https://api-3t.sandbox.paypal.com/nvp";  
 $params = "METHOD=MassPay&VERSION=".urlencode("64.0")."&currencyID=".urlencode("GBP")."&RECEIVERTYPE=EmailAddress&".
           "USER=".urlencode("stroke_1351502951_biz_api1.gmail.com")."&PWD=1351502971&SIGNATURE=".urlencode("AVtOG4sGbXNumu.aVFTqmP5CzdzZA-um-.BsYD-VZyNXmAeWkq1Jqf.S")."&".
           "L_EMAIL0=".urlencode("stroke_1351584447_per@gmail.com")."&L_Amt0=".urlencode("3")."&".
           "L_EMAIL1=".urlencode("stroke_1351584447_per@gmail.com")."&L_Amt1=".urlencode("1").
           "&CURRENCYCODE=".urlencode("GBP");

 $ch = curl_init();  

 curl_setopt($ch, CURLOPT_URL,$url);
 curl_setopt($ch, CURLOPT_VERBOSE, 1);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
 curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_POST, 1);
 curl_setopt($ch, CURLOPT_POSTFIELDS, $params);

 $result = curl_exec($ch);
 curl_close($ch); 
```

我得到的结果是：

> TIMESTAMP=2012-11-16T08:16:55Z&CORRELATIONID=dabb7bd62605b&ACK=失败&VERSION=64.0&BUILD=4181146&L_ERRORCODE0=10321&L_SHORTMESSAGE0=资金不足&L_LONGMESSAGE0=账户资金不足，无法进行批量支付&L_SEVERITYCODE0=错误

我有两种货币的资金：美元和欧元，当我使用它们付款时一切都很好，但是当我选择 GBR 时，例如 API 告诉我我没有足够的资金。在 x.com 论坛上寻找答案并没有给我带来有用的实际信息。所以问题是：我可以使用美元账户以欧元或其他货币或仅以美元进行批量付款吗？如果可能的话，我应该在哪里设置它？

谢谢。

# java - 侦听器 - 通知已完成的事件流

> ID：13413496
> 
> 赞同：0
> 
> 时间：2012-11-16T09:11:14.163
> 
> 标签：java, listener

我有许多向主事件生成服务注册的侦听器。但是，我想通知听众，在某个时候事件流会结束。您会通过简单地调用侦听器上的方法来做到这一点，比如说`finish()`还是有一个单独的事件方法`streamFinished(EmptyEvent e)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:44:28.967

我认为答案取决于您没有提到的事情，例如是否已经存在不同类型的事件和不同类型的事件侦听器。

但是，您使用哪种方式可能并不重要。

我的建议是选择对你来说最合适的方法……或者如果你不能决定就扔硬币。不要过度思考问题。（如果你弄错了，你总是可以重新审视你的决定……前提是你的 API 没有被嵌入到其他人的代码中。）

# c# - 如何将整数值存储在wp7的隔离存储中？

> ID：13413497
> 
> 赞同：1
> 
> 时间：2012-11-16T09:11:18.673
> 
> 标签：c#, windows-phone-7

我想在 wp7 的隔离存储中存储一个整数值，以便当我再次关闭并打开应用程序时，应该保留该值。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:33:44.990

如果要存储单个整数值，最简单的方法是使用[`IsolatedStorageSettings.ApplicationSettings`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.applicationsettings%28v=vs.95%29.aspx)：

```
// Store the value
IsolatedStorageSettings.ApplicationSettings["Whatever"] = yourValue;

// Retrieve it
yourValue = (int)IsolatedStorageSettings.ApplicationSettings["Whatever"]; 
```

# json - 如果响应发送 json 对象，应该为 contentType 设置什么

> ID：13413500
> 
> 赞同：0
> 
> 时间：2012-11-16T09:11:31.873
> 
> 标签：json, contenttype

我正在进行 ajax 调用，这里我没有发送任何数据，我正在获取数据作为响应，之前的请求已经设置了这些数据。在服务器端，我正在构建 jsonObject 并发送，我应该使用 application/x-json 或 text/x-json 的 contentType 是什么，因为我的所有数据都是文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:16:17.803

这应该很容易搜索到您，但无论如何： [正确的 JSON 内容类型是什么？](https://stackoverflow.com/questions/477816/the-right-json-content-type)

（**TL；DR：** JSON 文本的 MIME 媒体类型是`application/json`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:37:32.920

在服务器端，您应该返回：**MediaType.APPLICATION_JSON**（如果您使用的是 jersey java）。

在客户端（js）上，您应该使用**数据类型：“JSON”。** （不是 content type ，因为 content type 用于指定您发送到服务器的数据类型，而 datatype 是您期望服务器响应的数据类型）。

例子：

**1.服务器端（jersey java-JAX-RS）：**

```
@GET
@Path("/yourpath.json")
@Produces(MediaType.APPLICATION_JSON)
public returnSomething functionName(){
    ...
    ...
} 
```

**2.客户端（ajax调用）：**

```
$.ajax({
type: "GET",
url: ajaxUrl,
datatype:"JSON",
success: function(jsonData){
    //Do something
},
error: function(jqXHR, textStatus){
    //handle connection errors
}}); 
```

即使您的 json 包含普通文本，这也将起作用。

# html - 如何浮动在另一个div中对齐的div垂直中心

> ID：13413505
> 
> 赞同：0
> 
> 时间：2012-11-16T09:11:40.873
> 
> 标签：html, css

我有一个幻灯片。我还有一个上一个和下一个按钮。幻灯片会根据其显示的屏幕尺寸重新调整大小。我需要上一个和下一个按钮始终位于幻灯片的中心。如果我添加`position: absolute;`它在更大的屏幕上看起来不正确。

html:

```
<div class="slideshow" style="position: relative;">
    </div>
    <div id="prev"></div>
    <div id="next"></div> 
```

CSS：

```
#prev, #next
{
    position: absolute;
    z-index: 20;
    width: 41px;
    height: 80px;
    cursor: pointer;
    top: 300px;
}

#prev
{
    left: 0;
    background-image: url("img/prev.png");
    background-position: 0 0;
    background-repeat: no-repeat;
}

#next
{
    right: 0;
    background-image: url("img/next.png");
    background-position: 0 0;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:21:37.977

我假设幻灯片是全屏的，因为上一个/下一个元素在幻灯片之外。

[http://jsfiddle.net/kudoslabs/aFJze/](http://jsfiddle.net/kudoslabs/aFJze/)

您需要将顶部定位到 50% 并偏移锚点的高度。

```
#prev, #next{
top: 50%;
margin-top: -20px ; /*half the height of the element, assuming 40px*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:15:34.733

正如我所见，它没有正确定位，因为

```
 <div id="prev"></div>
   <div id="next"></div> 
```

没有包装器有相对位置，我看到幻灯片有它，把它放在里面并定位它应该没问题

这个

```
<div class="slideshow" style="position: relative;">
    </div>
    <div id="prev"></div>
    <div id="next"></div> 
```

对此

```
<div class="slideshow" style="position: relative;">
    <div id="prev"></div>
    <div id="next"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:20:23.590

试试这个，你应该稍微调整一下css，特别是margin-left，让它们看起来并排正确

演示[演示](http://jsbin.com/ukasek/1/edit)

```
#prev
{
    position: absolute;
    z-index: 20;
    width: 41px;
    height: 80px;
    cursor: pointer;
    top: 50%;
    left : 50%;
    margin-left:0px;
    margin-top:-40px;
} 

#next
{
    position: absolute;
    z-index: 20;
    width: 41px;
    height: 80px;
    cursor: pointer;
    top: 50%;
    left : 50%;
    margin-left:-60px;
    margin-top:-40px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:22:37.537

```
<div id="prev"></div>
<div id="next"></div> 
```

这些应该在里面

```
<div class="slideshow" style="position: relative;">
</div> 
```

然后在css里面

```
#prev, #next{position:absolute;top:50%} 
```

我希望它能解决你的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T09:35:28.583

我希望你看起来像这样：-[演示](http://tinkerbin.com/Qr5a6Pl5)

**HTML**

```
<div id="slideshow">
    <div id="prev"></div>
    <div id="next"></div>
 </div> 
```

**CSS**

```
#slideshow {
    position: relative;
    border:1px solid red;
}

#prev, #next
{
    position: absolute;
    width:70px;
    height: 70px;
    cursor: pointer;
    background-position: 0 0;
    background-repeat: no-repeat;

}

#prev
{
    left:50%;
    background-image: url("http://www.mouserunner.net/free_games/Right_Arrow_Icon_Black.png");
}

#next
{
    right:50%;
    background-image: url("http://www.mouserunner.net/free_games/Right_Arrow_Icon_Black.png");
    background-position: 0 0;
} 
```

# javascript - 将调用者的引用添加到封闭构造函数

> ID：13413510
> 
> 赞同：1
> 
> 时间：2012-11-16T09:11:55.700
> 
> 标签：javascript, closures, prototype

好的，我正在为另一个函数创建一个闭包内的构造函数对象（以将其隐藏在可能与之冲突的其他脚本中）（这将在稍后变得清晰）。有没有办法将调用函数的引用添加到封闭的构造函数：

```
// this can be located anywhere within a script
(function() {
    function SomeConstructor(param) { this.param = param; }
    SomeConstructor.prototype.doSomething = function(a) { this.param = a; return this; }
    SomeConstructor.prototype.getParam = function() { return this.param }
    // SomeConstructor.prototype.someFunct = ???

    return function someFunct(param) {
        if (param instanceof SomeConstructor) {
            return param;
        }
        else if (param) {
            return new SomeConstructor(param);
        }
    }
}()); 
```

我需要引用的原因是我可以在 someFunct 和它的构造对象之间进行链接：

```
someFunct("A").doSomething("a").someFunct("B").doSomething("a").getParam(); 
```

请注意我需要保留`instanceof`支票，所以指定以下功能：

```
// 1: The inner call creates a new instance of SomeConstructor
// 2: The 2nd(wrapping) call returns the inner calls instance
//        instead of creating a new isntance
var a = someFunct(someFunct("b")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:58:22.060

先把函数赋值给原型的属性，然后返回这个属性：

```
(function() {
  function SomeConstructor(param) { this.param = param; }
  SomeConstructor.prototype.doSomething = function(a) { this.param = a; return this; }
  SomeConstructor.prototype.getParam = function() { return this.param }
  SomeConstructor.prototype.someFunct = function someFunct(param) {
     if (param) {
          return new SomeConstructor(param);
     }
   }

   return SomeConstructor.prototype.someFunct; 
 }()); 
```

# sql - SQL - 选择是否存在具有此值的列的现有行

> ID：13413511
> 
> 赞同：0
> 
> 时间：2012-11-16T09:11:59.843
> 
> 标签：sql, row

我想检查是否存在具有此值的列的现有行。我正在尝试使此代码正常工作：

```
IF COUNT(SELECT * FROM RENTALHISTORY WHERE RESMID=10380 AND RTHDISPLAYBIT='1') = 1
BEGIN
    PRINT 'HELLO'
END
ELSE
BEGIN
    PRINT 'HI'
END 
```

我想检查`rentalhistory`表中是否有`resmid`10380 和`rthdisplaybit`1 的行。我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:14:06.567

您可以使用`exists`以下子句：

```
IF exists(SELECT 1 
          FROM RENTALHISTORY 
          WHERE RESMID=10380 
          AND RTHDISPLAYBIT='1') 
  BEGIN
    PRINT 'HELLO'
  END
ELSE
  BEGIN
    PRINT 'HI'    
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:19:22.693

你就不能这样算吗？

```
if (SELECT count(*) FROM RENTALHISTORY WHERE RESMID=10380 AND RTHDISPLAYBIT='1') = 1
BEGIN
    PRINT 'HELLO'
  END
ELSE
  BEGIN
    PRINT 'HI'    
  END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:15:35.297

您可以使用`If exists`：

```
IF EXISTS (SELECT * FROM RENTALHISTORY WHERE RESMID=10380 AND RTHDISPLAYBIT='1')
    Print 'Found'
ELSE
    Print 'Not found' 
```

# reporting-services - Windows 服务在使用 System.Net.WebException 以 PDF 格式发送报告时失败：请求失败，HTTP 状态 401：未经授权

> ID：13413512
> 
> 赞同：0
> 
> 时间：2012-11-16T09:12:08.053
> 
> 标签：reporting-services, windows-services, sql-server-2008-r2

我正在尝试从 Windows 服务以 PDF 格式发送 SSRS 报告。这在我的本地机器和登台设置上对我来说很好，但我在生产环境中遇到错误。这对我来说似乎是一些权限问题，但我无法确定确切的问题。以下是 Windows 服务日志中出现的错误：

```
<log4j:event logger="MyProjectNamespace.Logger" timestamp="1352927717254" level="ERROR" thread="377">  
    <log4j:message>The request failed with HTTP status 401: Unauthorized.  </log4j:message>
    <log4j:properties>  
        <log4j:data name="log4net:UserName" value="NT AUTHORITY\SYSTEM" />  
        <log4j:data name="log4jmachinename" value="<My server machine name>" />  
        <log4j:data name="log4japp" value="<My windows service exe name>" />  
        <log4j:data name="log4net:HostName" value="<My host name>" />  
    </log4j:properties>  
    <log4j:throwable> 
```

System.Net.WebException：请求失败，HTTP 状态为 401：未经授权。在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）

```
From stacktrace, line which is producing error is below:
    Rse2005.ExecutionInfo ei = rsExec.LoadReport(reportPath, historyID);

here "rsExec" is object of type "Rse2005.ReportExecutionService", historyId is NULL 
```

我创建报告 PDF 的代码如下：

```
private static void RenderReport(string reportFormat, string reportPath, string parameterLanguage, Rse2005.ParameterValue[] rptParameters, string outputFilePath)
        {
            string historyID = null;
            string deviceInfo = null;
            string encoding = String.Empty;
            string mimeType = String.Empty;
            string extension = String.Empty;
            Rse2005.Warning[] warnings = null;
            string[] streamIDs = null;

            Rse2005.ReportExecutionService rsExec = new Rse2005.ReportExecutionService();
            rsExec.Credentials = System.Net.CredentialCache.DefaultCredentials;

            Rse2005.ExecutionInfo ei = rsExec.LoadReport(reportPath, historyID);
            rsExec.SetExecutionParameters(rptParameters, parameterLanguage);
            Byte[] results = rsExec.Render(reportFormat, deviceInfo, out extension, out encoding, out mimeType, out warnings, out streamIDs);

            File.WriteAllBytes(outputFilePath, results);
        } 
```

此方法获取报告路径，如“文件夹名称/报告名称”。

我还使用来自 webApp（在同一台服务器上）的 reportViewer 控件显示相同的报告，并且它运行良好。我的报表服务器、windows服务和webApp都在同一台服务器上

我试图在报告站点设置中授予用户“NT AUTHORITY\SYSTEM”权限，并将reportPath 更改为带有服务器名称的完整路径（如http:///reportserver/folderName/ReportName），但这些都没有帮助。请建议我还能检查和修复什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:51:57.933

`NT Authority\System`是本地系统帐户。它无法访问另一台机器上的资源，有时会保护本地资源以防止该帐户访问。因此，如果您在另一台机器（例如 SQL 服务器）上授予此帐户权限，那么它与运行您的服务的帐户实际上并不是同一个帐户。

尝试使用域用户的凭据运行您的服务。在 SSRS 中为该用户设置适当的权限。

# asp.net-mvc - 如何更改剑道网格的加载方式

> ID：13413514
> 
> 赞同：0
> 
> 时间：2012-11-16T09:12:17.720
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 mvc kendo razor grid：

```
@(Html.Kendo().Grid<Aditro.Foundation.Dashboard.Web.Models.test>()
.Name("testGrid")
.Columns(columns =>
{
    columns.Bound(c => c.Title).Width(120);
    columns.Bound(c => c.Body).Width(180);
    columns.Bound(c => c.LinkText).Width(100);
    columns.Bound(c => c.LinkUrl).Width(170);
    columns.Command(command => { command.Edit(); command.Destroy(); }).Width(120);
})
.DataSource(source =>
{
    source.Ajax().Read(read => read.Action("GetAnnouncements", "Settings")).Batch(false)
        .Create(read => read.Action("AnnouncementAddEdit", "Settings"))
        .Update(read => read.Action("AnnouncementAddEdit", "Settings"))
        .Destroy(read => read.Action("AnnouncementDelete", "Settings"))
        .Model(model => { model.Id("AnnouncementId"); model.Field(x => x.Genus_List_Action).Editable(true); model.Field(x => x.Genus_List_Select).Editable(false); model.Field(x => x.Created).Editable(false); });
})
.ToolBar(toolbar => toolbar.Create())
.Pageable(pageable =>
{
    pageable.Enabled(true);
    pageable.PageSizes(new[] { 5, 10, 15, 20, 25 });
})
.Editable(editable => editable.Mode(GridEditMode.InLine))
.Selectable(action => action.Mode(GridSelectionMode.Single))
.Sortable(sort => sort.SortMode(GridSortMode.MultipleColumn))
.Resizable(resizable => resizable.Columns(true))

) 
```

我的疑问是..有没有办法改变使用剑道网格的内置功能加载图像。否则我必须为它更改 kendo.web.js 文件。

请提出一些好的意见谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:08:56.817

与一些 mvc 组件不同的是，剑道 mvc 组件的更改非常灵活。为此，您可以更改相关的 css 或 JavaScript 文件，也可以手动修改加载图像以满足您的需求。Kendo API 以最简单的方式编写，只有它的程序集是关闭的。因此，您可以轻松更改界面和功能。

# python - Windows 上的 CURL 精度

> ID：13413516
> 
> 赞同：0
> 
> 时间：2012-11-16T09:12:21.173
> 
> 标签：python, windows, curl, libcurl

在 Windows 中，pycurl 将计时精度精确到小数点后 3 位，有没有办法将其改进为更精确的东西？

```
> print c.getinfo(pycurl.CONNECT_TIME)
> 0.265 
```

例如，Linux 将其精确到小数点后 7 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:10:45.197

查看 pycurl 的源代码，它只是调用底层 cURL 函数：

```
case CURLINFO_CONNECT_TIME: // other cases [snip]ped
        /* Return PyFloat as result */
        double d_res = 0.0;

        res = curl_easy_getinfo(self->handle, (CURLINFO)option, &d_res);
        if (res != CURLE_OK) {
            CURLERROR_RETVAL();
        }
        return PyFloat_FromDouble(d_res);
    } 
```

反过来做

```
case CURLINFO_CONNECT_TIME:
    *param_doublep = data->progress.t_connect;
    break; 
```

并由`t_connect`_

```
data->progress.t_connect = Curl_tvdiff_secs(now, data->progress.t_startsingle); 
```

哪些引用`t_startsingle`，由 分配`Curl_tvnow`，在 Windows 下定义为

```
struct timeval curlx_tvnow(void)
{
  /*
  ** GetTickCount() is available on _all_ Windows versions from W95 up
  ** to nowadays. Returns milliseconds elapsed since last system boot,
  ** increases monotonically and wraps once 49.7 days have elapsed.
  */
  struct timeval now;
  DWORD milliseconds = GetTickCount();
  now.tv_sec = milliseconds / 1000;
  now.tv_usec = (milliseconds % 1000) * 1000;
  return now;
} 
```

也就是毫秒精度。

如此短的修补和重新编译 cURL 以使用更高精度的计时器，然后针对它编译 pyCURL，不。对不起！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:14:39.743

恐怕这是底层 libcurl 代码的限制。它使用 Windows 中的 GetTickCount() 函数调用，[文档如下](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)：

> GetTickCount 函数的分辨率受限于系统计时器的分辨率，通常在 10 毫秒到 16 毫秒的范围内。

# multithreading - 如何访问 QTcpServer 中的 QThread

> ID：13413517
> 
> 赞同：1
> 
> 时间：2012-11-16T09:12:20.457
> 
> 标签：multithreading, qt, qthread, qtcpserver

我刚刚自己实现了 QTcpServer 并重载了该`incomingConnection`函数。

```
void Server::incomingConnection(int handle) //Server inherits from QTcpServer
{
    qDebug()<<"Server::incomingConnection"<<handle;
    Thread *thread = new Thread(handle,this);
    connect(thread,SIGNAL(finished()),this,SLOT(deleteLater()));
    thread->start();
} 
```

在线程中，我做了以下事情：

```
void Thread::run()
{
    qDebug() << m_socketDescriptor << "Starting Thread";
    m_socket = new QTcpSocket();
    if(!m_socket->setSocketDescriptor(m_socketDescriptor))
        return;

    connect(m_socket,SIGNAL(readyRead()),this,SLOT(readyRead()));
    connect(m_socket,SIGNAL(disconnected()),this,SLOT(disconnected()));

    qDebug() << m_socketDescriptor << "Client connected";

    exec();
} 
```

现在我有一个多线程服务器。

**但是我怎样才能访问连接的客户端并通过它们发送数据。一个gui？**

先感谢您！

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:56:26.813

您需要使用一些 ' [QIODevice](http://qt-project.org/doc/qt-4.8/qiodevice.html) ' 功能，例如`write`或`<<`向位于 QTCPSocket 另一端的客户端发送数据。

因此，如果您将网页提供给浏览器客户端，那么您首先要监听（或使用读取命令）他们的[请求](http://www.tcpipguide.com/free/t_HTTPRequestMessageFormat.htm)，然后按照您使用的协议发送适当的[响应。](http://www.tcpipguide.com/free/t_HTTPResponseMessageFormat.htm)

所以我会先在你电脑的 80 端口上设置这个服务器，然后用浏览器打开`http://localhost`. 然后使用 qDebug 打印来自浏览器的请求。

```
void Thread::readyRead()
{
    qDebug() << Q_FUNC_INFO;
    qDebug() << m_socket.readAll();
} 
```

在你完成这项工作之后，决定你将如何解析请求，然后你将如何响应，或者你想要提供哪些数据。

此外，请务必查看另请参阅 QTCPSocket 中的[TCP](http://qt-project.org/doc/qt-4.8/qtcpsocket.html#details)[示例](http://qt-project.org/doc/qt-4.8/qtcpsocket.html#details)。

希望有帮助。

# c - 有什么理由不使用固定宽度的整数类型（例如 uint8_t）？

> ID：13413521
> 
> 赞同：62
> 
> 时间：2012-11-16T09:13:02.740
> 
> 标签：c, integer, byte, sizeof, c99

假设您使用的是支持 C99（甚至只是 stdint.h）的编译器，是否有任何理由不使用 uint8_t 等固定宽度整数类型？

我知道的一个原因是，`char`在处理字符时使用 s 比使用 s更有意义`(u)int8_t`，正如[这个问题](https://stackoverflow.com/questions/1725855/uint8-t-vs-unsigned-char)中提到的那样。

但是如果你打算存储一个数字，你什么时候想使用一个你不知道它有多大的类型呢？即在什么情况下，您希望在`unsigned short`不知道它是 8、16 还是 32 位的情况下将数字存储在中，而不是使用 a `uint16t`？

在此之后，使用固定宽度整数或使用普通整数类型并且从不假设任何内容并`sizeof`在需要知道它们使用多少字节的任何地方使用是否被认为是更好的做法？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-16T09:38:08.683

实际上，在不需要知道类型的确切大小的情况下存储数字是很常见的。我的程序中有很多数量我可以合理地假设不会超过 20 亿，或者强制它们不超过。但这并不意味着我需要一个精确的 32 位类型来存储它们，任何可以计数到至少 20 亿的类型对我来说都可以。

如果您尝试编写非常可移植的代码，则必须记住，固定宽度类型都是*可选*的。

在 C99 实现中， where`CHAR_BIT`大于`8`no `int8_t`。该标准禁止它存在，因为它必须具有填充位，并且`intN_t`类型被定义为没有填充位（7.18.1.1/1）。`uint8_t`因此也被禁止，因为（谢谢，ouah）不允许定义`uint8_t`没有`int8_t`.

因此，在非常可移植的代码中，如果您需要一个能够保存高达 127 值的有符号类型，那么您应该使用、`signed char`或根据您是否要要求编译器制作它：`int``int_least8_t``int_fast8_t`

*   在 C89 (`signed char`或`int`)中工作
*   避免在算术表达式中出现令人惊讶的整数提升 ( `int`)
*   小（`int_least8_t`或`signed char`）
*   快（`int_fast8_t`或`int`）

对于高达 255 的无符号类型也是如此，带有`unsigned char`、和.`unsigned int``uint_least8_t``uint_fast8_t`

如果您需要在非常可移植的代码中进行模 256 运算，那么您可以自己取模、屏蔽位或使用位域玩游戏。

实际上，大多数人从不需要编写可移植的代码。目前`CHAR_BIT > 8`只出现在专用硬件上，您的通用代码不会在它上面使用。当然，这在未来可能会改变，但如果确实如此，我怀疑有太多代码对 Posix 和/或 Windows（两者都保证`CHAR_BIT == 8`）做出假设，那么处理代码的不可移植性将只是其中的一小部分将代码移植到该新平台的巨大努力。任何这样的实现都可能不得不担心如何连接到互联网（它处理八位字节），早在它担心如何让你的代码启动和运行之前:-)

如果您无论如何都假设，`CHAR_BIT == 8`那么我认为`(u)int8_t`除了您希望代码在 C89 中工作之外，没有任何特别的理由可以避免。`stdint.h`即使在 C89 中，为特定实现找到或编写一个版本也不是那么难。但是，如果您可以*轻松地*将代码编写为只要求类型可以保持`255`，而不是要求它*不能*保持`256`，那么您不妨避免对`CHAR_BIT == 8`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-16T20:49:29.663

尚未提及的一个问题是，虽然使用固定大小的整数类型意味着如果编译器对`int`、`long`等使用不同的大小，变量的大小不会改变，但它不一定保证*即使定义了大小*，该代码在具有各种整数大小的机器上的行为也会相同。

例如，给定声明`uint32_t i;`，表达式`(i-1) > 5`when`i`为零时的行为将根据 a`uint32_t`是否小于而有所不同`int`。在例如`int`64 位（`uint32_t`类似于`long short`）的系统上，变量`i`将被提升为`int`; 减法和比较将按有符号执行（-1 小于 5）。在`int`32 位的系统上，减法和比较将被执行为`unsigned int`（减法将产生一个非常大的数字，大于五）。

我不知道有多少代码依赖于这样一个事实，即涉及无符号类型的表达式的中间结果即使在没有类型转换的情况下也需要包装（恕我直言，如果需要包装行为，程序员应该包含一个类型转换 `(uint32_t)(i-1) > 5`）但是标准目前没有任何余地。我想知道如果在没有类型转换或类型强制的情况下至少*允许*编译器将操作数提升为更长的整数类型的规则会带来什么问题[例如，给定`uint32_t i,j`，需要像这样的赋值`j = (i+=1) >> 1;`来切断溢出，就像`j = (uint32_t)(i+1) >> 1;`， 但`j = (i+1)>>1`不会]？或者，就此而言，编译器制造商很难保证任何整数类型表达式的中间结果都可以适合最大的有符号类型并且不涉及非常量的右移，将产生相同的结果结果好像所有计算都是在该类型上执行的？`int`对我来说，在32 位的机器上似乎很恶心：

```
  uint64_t a,b,c;
  ...
  一个 &= ~0x40000000;
  b &= ~0x80000000;
  c &= ~0x100000000;

```

`a`和的每个清除一位，但清除;`c`的前 33 位 `b`大多数编译器不会暗示第二个表达式有什么“不同”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-16T09:38:10.460

确实，标准整数类型的宽度可能会从一个平台更改为另一个平台，但不会更改其最小*宽度*。

例如，C 标准规定 an`int`至少是`16-bit`并且 a`long`至少是`32-bit`宽的。

如果您在存储对象时没有一些大小限制，您可以将其用于实现。例如，如果您的最大有符号值适合 a`16-bit`您可以只使用`int`. 然后，您让实现最终确定`int`实现所针对的体系结构的自然宽度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-16T09:48:34.397

代码应该向普通读者（和程序员他/她自己）揭示什么是重要的。它只是一些整数还是*无符号整数*，甚至是有*符号整数*。大小也是如此。某些变量默认为 16 位对算法来说真的很重要吗？或者这只是不必要的微观管理和失败的优化尝试？

这就是使编程成为一门艺术的原因——展示什么是重要的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-16T09:40:55.513

当您对宽度做出假设时，您应该只使用固定宽度类型。

`uint8_t`并且`unsigned char`在大多数平台上都相同，但并非在所有平台上都相同。使用`uint8_t`强调你假设一个 8 位架构`char`并且不会在其他架构上编译的事实，所以这是一个特性。

`typedef`否则我会使用诸如`size_t`,之类的“语义” `uintptr_t`，`ptrdiff_t`因为它们更好地反映了您对数据的想法。我几乎从不直接使用基本类型，`int`只用于错误返回，而且我不记得曾经使用过`short`.

*编辑：*在仔细阅读 C11 之后，我得出结论，如果它存在，即使该类型是无符号的`uint8_t`，它也必须是`unsigned char`并且不能只是。`char`这来自于 7.20.1 p1 中的要求，即所有`intN_t`且`uintN_t`必须是*相应*的有符号和无符号类型。唯一这样的字符类型对是`signed char`and `unsigned char`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-02-15T11:21:41.360

人们想要使用的原因有很多，我们将它们称为*语义*类型，例如`int`或`char`固定宽度类型，例如`uint8_t`：

## 匹配现有 API

标准 C 库`char*`随处使用。为什么在与该 API 交谈时使用不同的类型来混淆用户（并引入可能的错误？）？

类似地，`printf()`格式字符串是根据这些语义类型定义的。如果要打印固定大小的类型，则需要使用诸如`PRIu64`etc.之类的宏`stdint.h`来获得正确的格式字符串，以便使用旧格式字符串打印固定大小的类型`printf`。

## 速度

通常选择语义类型，以便它们最适合当前 CPU 的性能特征。它们可能会被撞到比您选择的尺寸稍大的尺寸，因为这是您 CPU 上的寄存器大小，并且会为您节省不必要的转换等。

现在，这是一个有争议的答案......这是最初的意图，但由于`stdint`早期的 C/C++ 中不可用，许多平台（如 32 位 Windows 或 macOS X）只是保证大小`int`和`long`. 因此，在 64 位移动期间，其中一些大小保持不变（导致有趣的新类型，例如`long long`，等等）。这就是我们得到`least`and`fast`类型的原因。

## 代码可移植性

语义类型在 64 位平台上可能比在 32 位平台上更大（例如，允许数组索引填满所有内存）。因此，如果您在不同的平台上运行，使用语义类型（根据我的定义将包括`size_t`可用的）而不是固定的意味着您正在利用更好的硬件而不是添加任意限制。

当然，这只会使您的算法具有可移植性。如果您需要将数据序列化为字节并在不同平台之间进行交换，这可能会使您的代码可移植，但不会使您的网络数据包或输出文件。因此，在这种情况下，您实际上希望坚持使用固定类型，以便数据保持可移植性，但代价是您的代码运行速度非常慢或无法在某些平台上编译。

**评论：**不要问我为什么他们没有引入格式字符串`int64_t`等`int32_t`。也许他们没有字母？也许太多的代码库定义了自己的格式字符串并且会损坏？

# ruby-on-rails - 浮动读数，丢失所有小数位。回报率 2.3.8

> ID：13413526
> 
> 赞同：0
> 
> 时间：2012-11-16T09:13:33.630
> 
> 标签：ruby-on-rails, csv, floating-point

我想从 csv 文件中读取一个浮点数：我的浮点数是：0,1660，现在我只得到第一个数字：0

在这里您可以看到我的阅读方式，浮点字符位于数组行的第四个位置：

```
CSV.foreach(path, {:col_sep => @seperator}) do |row|

            r = Route.new
            ......
            ....
            r.rate = row [3] 
```

我怎样才能得到整数？我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:19:39.453

你可以这样写“0.1660”而不是“0,1660”。Ruby 不能通过逗号处理十进制数。

```
[1] pry(main)> 0.111
=> 0.111
[2] pry(main)> 0,111
SyntaxError: unexpected ',', expecting $end
0,111 
```

# string - visualstudio - 如何将对象内容转换为字符串

> ID：13413529
> 
> 赞同：0
> 
> 时间：2012-11-16T09:13:43.120
> 
> 标签：string, visual-studio, object, visual-studio-2012

我想显示目录，但消息框显示：**system.__ComObject**

```
 Public Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        filesystem = CreateObject("Scripting.FileSystemObject")
        ThisDir = filesystem.GetFolder("F:\-=Temporal=-\Documentos\DVD Temazos\")

       '1st try
        MessageBox.Show(ThisDir.ToString())

       '2nd try
       Dim a As String = CType(ThisDir, String)
       MessageBox.Show(a)
  end sub 
```

我做错了什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:18:45.960

如果您真的想使用 FileSystemObject，您必须调用该`Name`属性来获取文件夹的名称：

```
MessageBox.Show(ThisDir.Name) 
```

但我建议在命名空间中使用 .NET 类，`System.IO`例如`System.IO.Directory`

# asp.net-mvc-3 - Autofac - InstancePerHttpRequest 模棱两可的调用

> ID：13413535
> 
> 赞同：3
> 
> 时间：2012-11-16T09:14:09.997
> 
> 标签：asp.net-mvc-3, autofac

我需要在我的 MVC3 项目中同时引用 dll`Autofac.Integration.Mvc`和dll，并且遇到与该方法的以下命名冲突：`Autofac.Integration.Web``InstancePerHttpRequest()`

> 此调用在 Autofac.Integration.Mvc 和 Autofac.Integration.Web 之间不明确

我需要引用两个 dll，因为我的项目是 MVC3，但元素正在集成 SQL SSRS 报告，这些报告需要使用 ASPX 页面，因为`ReportViewer`需要控制。我需要解析我的服务类以从后面的 APSX 代码调用功能。有什么想法可以解决这个命名冲突吗？或者这完全不兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:27:50.267

`InstancePerHttpRequest`是一个扩展方法，因此它在类`Autofac.Integration.Web.RegistrationExtensions`和`Autofac.Integration.Mvc.RegistrationExtensions`.

解决方案是显式调用该方法：

```
Autofac.Integration.Web.RegistrationExtensions
         .InstancePerHttpRequest(yourBuilder.Register(c => ...) 
```

或者只包括这两个命名空间之一（它不是引起歧义的引用）：

```
using Autofac.Integration.Web;
using Autofac.Integration.Mvc; 
```

# python - python: ..."none" 类型，预期整数

> ID：13413536
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:14:24.297
> 
> 标签：python, compiler-errors, integer

我一直在关注[python教程](http://cscircles.cemc.uwaterloo.ca/13-lists/#pybox4)并遇到了一个问题：

```
def middle(L):
   calc1 = (len(L))//2
   print(L[calc1])
   return 
```

分级机/编译器给了我

> “运行中间（[8, 0, 100, 12, 1]）......错误：中间（[8, 0, 100, 12, 1]）的类型错误“无”类型，预期为整数”

我要做的是 print() 一个位于列表中间的元素。虽然它确实输出了*100*。解决方案一定很简单，但我才刚刚开始学习python，更不用说编码了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:17:55.537

您正在打印该值但不返回它。不知道您的调用代码在做什么，但它显然希望您这样做`return L[calc1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:18:07.313

该函数`middle`返回`None`（因为`return`它自己的意思`return None`）。

您正在使用返回的值做一些事情，例如`int(middle(L))`，这是无法用`None`.

[请注意，您不必`return`在函数末尾编写；它会`None`自动返回。]

# c# - 检查表中是否已存在数据

> ID：13413537
> 
> 赞同：0
> 
> 时间：2012-11-16T09:14:25.907
> 
> 标签：c#, asp.net

我有一个名为的表`brand`，字段是：

*   `BrandId`
*   `BrandName`.

然后我有一个添加品牌的表格。如果我们添加一个品牌名称（例如：*Acer*）。那么如果我们再次添加相同的品牌，则会检查表中是否已经存在该名称。我如何在 asp.net 中检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:20:54.373

`If`你想插入新记录而不是使用

```
if exists(select brandName from [brand] where brandName <> @pbrandName) 
-- insert statement 
```

`Else if`您想要更新现有记录而不是使用..（通过使用现有记录 ID）

```
if exists(select brandName from [brand] where BrandId <> @pBrandId and brandName <> @pbrandName) 
-- update statement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:17:34.447

如果您使用的是 Sql 服务器

```
declare @Exist INT=0
    Select @Exist= COUNT(BrandName)
    From TableName
    Where BrandId= IdValue
    Group By(BrandName)  
 IF(@Exist=0)
   BEGIN
     --Insert
   END 
```

# php - DQL symfon2 中的 DATE_FORMAT

> ID：13413541
> 
> 赞同：1
> 
> 时间：2012-11-16T09:14:36.360
> 
> 标签：php, mysql, symfony, doctrine-orm

我想在我的 QueryBuilder 中使用一些 MySQL 函数，例如 DATE_FORMAT。

我看到这篇文章完全不明白我应该如何实现它： [SELECT DISTINCT YEAR Doctrine](https://stackoverflow.com/questions/10768347/select-distinct-year-doctrine)

```
class SubmissionManuscriptRepository extends EntityRepository
{
    public function findLayoutDoneSubmissions( $fromDate, $endDate, $journals )
    {
        if( true === is_null($fromDate) )
            return null;

        $commQB = $this->createQueryBuilder( 'c' )
                    ->join('c.submission_logs', 'k')
                    ->select("DATE_FORMAT(k.log_date,'%Y-%m-%d')")
                    ->addSelect('c.journal_id')
                    ->addSelect('COUNT(c.journal_id) AS numArticles');

        $commQB->where("k.hash_key = c.hash_key");
        $commQB->andWhere("k.log_date >= '$fromDate'");
        $commQB->andWhere("k.log_date <= '$endDate'");
        if( $journals != null && is_array($journals) && count($journals)>0 )
        $commQB->andWhere("c.journal_id in (" . implode(",", $journals) . ")");
        $commQB->andWhere("k.new_status = '20'");
        $commQB->orderBy("k.log_date", "ASC");
        $commQB->groupBy("c.hash_key");
        $commQB->addGroupBy("c.journal_id");
        $commQB->addGroupBy("DATE_FORMAT(k.log_date,'%Y-%m-%d')");

        return $commQB->getQuery()->getResult();
    }
} 
```

实体提交手稿

```
/**
 * MDPI\SusyBundle\Entity\SubmissionManuscript
 *
 * @ORM\Entity(repositoryClass="MDPI\SusyBundle\Repository\SubmissionManuscriptRepository")
 * @ORM\Table(name="submission_manuscript")
 * @ORM\HasLifecycleCallbacks()
 */
class SubmissionManuscript
{
    ...

    /**
         *   @ORM\OneToMany(targetEntity="SubmissionManuscriptLog", mappedBy="submission_manuscript")
         */
     protected $submission_logs;

        ...
} 
```

实体提交稿件日志

```
/**
 * MDPI\SusyBundle\Entity\SubmissionManuscriptLog
 *
 * @ORM\Entity(repositoryClass="MDPI\SusyBundle\Repository\SubmissionManuscriptLogRepository")
 * @ORM\Table(name="submission_manuscript_log")
 * @ORM\HasLifecycleCallbacks()
 */
class SubmissionManuscriptLog
{
    ...

    /**
     * @ORM\ManyToOne(targetEntity="SubmissionManuscript", inversedBy="submission_logs")
     * @ORM\JoinColumn(name="hash_key", referencedColumnName="hash_key")
     */
    protected $submission_manuscript;

    ...
} 
```

任何帮助我都会非常感激。

编辑 1

我现在可以成功添加自定义函数 DATE_FORMAT。但是现在如果我尝试使用我的 Group By，我会收到以下错误：

```
[Semantical Error] line 0, col 614 near '(k.logdate,'%Y-%m-%d')': Error: Cannot group by undefined identification variable. 
```

有人知道吗？

# c++ - 在 std::string 变量中存储使用 boost 库的文件名

> ID：13413546
> 
> 赞同：1
> 
> 时间：2012-11-16T09:14:54.593
> 
> 标签：c++, boost, boost-filesystem

我想使用 boost::filesystem 获取目录中所有文件的列表

我可以使用打印文件名，`cout`但我无法将文件名存储在字符串变量中。我也尝试过类型转换和 strcpy，但这些方法都不起作用。

以下是代码：

```
char dir[100] = "/home/harsh/";
namespace fs = boost::filesystem;

fs::directory_iterator start = fs::directory_iterator(dir);
fs::directory_iterator di = start;

for (; di != fs::directory_iterator(); ++di)
{
    std::cout << "hello .. " << di->path() << std::endl;

    //std::string strHarsh = di->path(); //Error
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:16:24.247

尝试`di->leaf()`它应该转换为字符串

此外，这取决于您的 boost 版本，如果您使用的是文件系统 v3，它将是： `di->path().filename().string()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:18:32.620

您可以使用 a[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)作为中间：

```
std::ostringstream os;
os << di->path();

std::string path = os.str(); 
```

# iphone - iOS 6 应用程序在请求访问日历时崩溃

> ID：13413548
> 
> 赞同：0
> 
> 时间：2012-11-16T09:15:03.833
> 
> 标签：iphone, crash, calendar, ios6

它在线崩溃：

```
eventStoreQueue = dispatch_queue_create("com.example.nativecalexample", NULL); 
```

// 代码

```
- (id)init
{
    if ((self = [super init])) {
        eventStore = [[EKEventStore alloc] init];
        if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
        {
            [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
             {
                 events = [[NSMutableArray alloc] init];
                 items = [[NSMutableArray alloc] init];
                 eventStoreQueue = dispatch_queue_create("com.example.nativecalexample", NULL);
                 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(eventStoreChanged:) name:EKEventStoreChangedNotification object:nil];
             }];
        }
    }

    return self;
}

- (void)presentingDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)delegate
{
  // asynchronous callback on the main thread
  [events removeAllObjects];
  //NSLog(@"Fetching events from EventKit between %@ and %@ on a GCD-managed background thread...", fromDate, toDate);
  dispatch_async(eventStoreQueue, ^{
    NSDate *fetchProfilerStart = [NSDate date];
    NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:fromDate endDate:toDate calendars:nil];
    NSArray *matchedEvents = [eventStore eventsMatchingPredicate:predicate];
    dispatch_async(dispatch_get_main_queue(), ^{
      //NSLog(@"Fetched %d events in %f seconds", [matchedEvents count], -1.f * [fetchProfilerStart timeIntervalSinceNow]);
      [events addObjectsFromArray:matchedEvents];
      [delegate loadedDataSource:self];
    });
  });
} 
```

编辑：当应用程序崩溃时，我在该行得到 EXC_BAD_ACCESS，截图：http: [//i45.tinypic.com/2kzeu.png](http://i45.tinypic.com/2kzeu.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:06:58.763

检查`eventStoreQueue`是否有效创建：

```
eventStoreQueue = dispatch_queue_create("com.example.nativecalexample", NULL);
NSLog(@"Created eventStoreQueue: %x", eventStoreQueue); 
```

如果是，还要确保在进入之前任何时候都没有释放它`presentingDatesFrom`。

# c# - 线程被中止 - 同时循环了很多行

> ID：13413549
> 
> 赞同：4
> 
> 时间：2012-11-16T09:15:05.653
> 
> 标签：c#, asp.net, web-config, timeout, response

我加载了一个具有 aprox 的数据表。60.000 行。

我循环这些，然后像这样写它们来构建一个文件：

```
 HttpContext.Current.Response.Write(lineItem);
                HttpContext.Current.Response.Write(Environment.NewLine); 
```

当我迭代 ~15-25.000 行时，它会在 5 秒内工作，并且文件会完美生成。但是，似乎有一个限制，它突然需要很长时间然后超时（？）。

我得到错误：

> System.Threading.ThreadAbortException：线程被中止。
> 在 System.AppDomain.GetId() 在 System.Threading.Thread.get_CurrentCulture() 在 System.String.IndexOf(String value) 在 Modules.DownloadReports.RemoveTags(String s) 在 Modules.DownloadReports.WriteProductData(DataTable products)

我在 web.config 中的超时时间是 3600 秒，适用于应用程序和 SQL 调用。

我的代码：

```
private void WriteProductData(DataTable products)
        {
            StringBuilder bld = new StringBuilder();
            try
            {
                //Column names
                const string str = "OrderId; ProductId; ProductName; SeriesName; BrandName; PrimaryCategory; Content; ContentUnit; Quantity; ListPrice; PlacedPrice; Status";
                bld.AppendLine(str);
                bld.AppendLine(Environment.NewLine);

                //Data
                string trackingNumber, productId, productName, seriesName, brandName, prodCategory, content, contentUnit, quantity, listPriceUnit, placedPriceUnit, status;
                string lineItem;
                string errorString = string.Empty;

                foreach (DataRow product in products.Rows)
                {
                  // initialize all the different strings

                  lineItem = string.Format("{0};{1};{2};{3};{4};{5};{6};{7};{8};{9};{10};{11};",
                                                trackingNumber, productId, productName, seriesName, brandName,
                                                prodCategory, content, contentUnit, quantity, listPriceUnit,
                                                placedPriceUnit, status);
                    //bld.AppendLine(lineItem);
                    //bld.AppendLine(Environment.NewLine);
                    HttpContext.Current.Response.Write(lineItem);
                    HttpContext.Current.Response.Write(Environment.NewLine);
                }
            }
            catch (Exception ex)
            {
                Logger.ErrorFormat(ex, "An exception occured during writing of product data to BI report");
                throw;
            }
            finally
            {
                //Response.Write(bld.ToString());
            }
        } 
```

**我试过什么...**

我已经尽可能地优化了循环，所以唯一剩下的就是构建一个字符串，通过 string.format 连接。

我也尝试过使用 Stringbuilder 来构建大字符串，然后在最后写出来。

所以我的问题是...

*   为什么我什至会得到 Thras 被中止异常？它需要大约 75 秒才能给我错误，而不是 5 分钟
*   ~15-25.000 行需要 5 秒，所以我的逻辑说 60.000 应该最多需要 15 秒。这里有什么问题？

更新：

我通过消除长时间操作的原因解决了这个问题。有一个字符串操作非常慢。当它被调用 3 次 pr row 时，它让一切都变得非常慢。

但是，这不是问题的根源。这只是一个实用的修复方法，直到数据负载非常大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:21:48.680

尝试在 Web 配置中添加 maxRequestLength="1048576" 这也可能导致您遇到错误。

# php - 在 PHP 中，如何动态引用变量名？

> ID：13413551
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:15:08.837
> 
> 标签：php, variables

最好用一个例子来问这个。我有一个表格，其中包含 ID、MeterA1、MeterA2、MeterA3、ReadingA1、ReadingA2、ReadingA3 等字段（在您询问之前，我没有将这个表格设置得如此反规范化）。

我不想检查每个字段的值，而是想创建一个基于缩写数组的变量变量并通过它访问字段。什么是正确的方法，因为这不起作用：

```
$array = array('A1', 'A2', 'A3');

while($row = $rec->fetch_object()) { // db record fetch
    foreach($array as $meter) {
        $result[$row->Meter{$meter}] = $row->Reading{$meter};
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:17:16.057

```
$array = array('A1', 'A2', 'A3');

while($row = $rec->fetch_object()) { // db record fetch
    foreach($array as $meter) {
        $key1 = "Meter{$meter}";
        $key2 = "Reading{$meter}";
        $result[$row->$key1] = $row->$key2;
    }
} 
```

# android - 滑动 ViewPager 时如何清除片段相关状态

> ID：13413553
> 
> 赞同：1
> 
> 时间：2012-11-16T09:15:19.103
> 
> 标签：android, android-viewpager, contextual-action-bar

在我的 android 应用程序中，我使用 ViewPager 和 Action Bar 来布局主要活动。PagerAdapter 是 FragmentStatePagerAdapter。

我的第一个片段包含一个启用了批处理上下文操作的 ListView。当 CAB 在屏幕上时，我滑动到下一个片段，它仍然处于打开状态。实际上，它保存在所有片段中。刷卡的时候怎么去掉？

滑动时可能会保留其他状态。如何将它们全部删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:40:00.133

1.  使您的活动实施`ViewPager.OnPageChangeListener`
2.  将`OnPageChangeListener`你`ViewPager`的设置为活动
3.  在您覆盖的 onPageSelected(int position) 方法中，关闭您的 CAB

# python - 在 Twython 中执行搜索时收到异常

> ID：13413557
> 
> 赞同：1
> 
> 时间：2012-11-16T09:15:45.873
> 
> 标签：python, twitter, twython

我刚刚开始使用 twython，但在第一个示例中：

```
from twython import Twython
t = Twython()
t.search(q='python') 
```

我收到了一个例外：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/twython-2.5.2-py2.7.egg/twython/twython.py", line 367, in search
    return self.get('https://api.twitter.com/1.1/search/tweets.json', params=kwargs)
  File "/usr/local/lib/python2.7/dist-packages/twython-2.5.2-py2.7.egg/twython/twython.py", line 238, in get
    return self.request(endpoint, params=params, version=version)
  File "/usr/local/lib/python2.7/dist-packages/twython-2.5.2-py2.7.egg/twython/twython.py", line 233, in request
    content = self._request(url, method=method, params=params, files=files, api_call=url)
  File "/usr/local/lib/python2.7/dist-packages/twython-2.5.2-py2.7.egg/twython/twython.py", line 210, in _request
    retry_after=response.headers.get('retry-after'))
twython.twython.TwythonError: 'Bad Request: The request was invalid. An accompanying error message will explain why. This is the status code will be returned during rate limiting. -- An error occurred processing your request.' 
```

有谁知道是什么导致了这个异常？

谢谢，

大号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:27:59.197

对 Twitter API 的未经身份验证的调用。在这里阅读 - [https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:40:47.760

从[核心示例](https://github.com/ryanmcgrath/twython/tree/master/core_examples)：

```
from twython import Twython

""" Instantiate Twython with no Authentication """
twitter = Twython()
search_results = twitter.search(q="python", rpp="50")

for tweet in search_results["results"]:
    print "Tweet from @%s Date: %s" % (tweet['from_user'].encode('utf-8'),tweet['created_at'])
    print tweet['text'].encode('utf-8'),"\n" 
```

我已经尝试过了，它有效。

# c# - 基于 REST 的 WCF 身份验证

> ID：13413561
> 
> 赞同：2
> 
> 时间：2012-11-16T09:16:04.507
> 
> 标签：c#, .net, wcf, wcf-security

我一直在研究这个问题，断断续续，几个星期，到目前为止还没有找到真正的、具体的解决方案——所以我想知道我是否可以激发一些关于其他人如何解决这个问题的想法，如果有的话。

**设想**

*   网站通过 AJAX 调用 WCF 服务（通过充当代理的 WebAPI，或直接，相同的最终结果）。
*   网站希望以 JSON 格式返回结果。
*   网站和 WCF 服务可能不在同一个盒子上，所以是跨域的。我知道可以在这里使用 WebAPI 来解决这个问题，但是，这并不总是可能的。
*   WCF 服务**只能**从该单一网站（或具有身份验证详细信息的网站）调用，我不希望任何机器人向它发送垃圾邮件以获取数据。

很简单，对吧？错误的。

**主要问题**

*   基本身份验证 - 解决所有问题，对吗？不，如果您要跨域，则必须使用 JSONP 来获取 JSON 结果，其中您无法修改请求标头，因此无法通过标头中的身份验证详细信息发送。使用 [http://test:test@url.com](http://test:test@url.com)在某些主流浏览器 (IE) 中不起作用，CORS 也不起作用。

OAuth，可能是一个解决方案吗？我遇到的问题是，如果用户没有登录网站，那么如何进行双向握手，任何其他网站都不能简单地获取在查询字符串中发送的 API 密钥到服务？而且，如果 API 密钥有密码，它仍然只是以明文形式发送吗？我是否误解了这个过程，它对我的​​场景是否可行？

我看到这个看起来很有希望：http: [//www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH](http://www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH)

但是，它的最后部分显示该服务仍被称为服务器端，而不是通过 jQuery。

拜托，拜托，对于我和可能在同一条船上的成千上万的其他人，那里有解决方案吗？

**更新**

最后，我确实最终使用了：http: [//www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH](http://www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH)并沿着 OAuth 路由在请求之间进行身份验证。代码隐藏工作只是将参数和签名值注入页面上的 JavaScript 变量，然后通过 AJAX 请求将这些发送到服务。现在效果很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:54:46.500

因此，您希望从站点 B 上的网站访问站点 A 上的服务？从 B 到 A 的请求需要经过身份验证？

然后，您可以在站点 B 上实现一个代理，该代理对站点 A 上的服务进行经过身份验证的调用。此身份验证可以采用任何形式，但基本身份验证 + HTTPS 是可行的。或查看客户端证书。你必须配置一次，它不应该改变。现在没有人可以访问站点 A 上的服务，除非他们拥有基本身份验证凭据或客户端证书（或您提供的其他凭据）。

然后从站点 B 上的网站向站点 B 上的代理发出请求，该代理使用（服务器端）配置的凭据将请求重定向到站点 A 上的服务。

If you want everyone to be able to call the proxy on site B from the website on site B, even when not logged in on the website, but from nowhere else, you could let the website create a token (serverside), which is registered with the proxy. Then if the website issues a request to the proxy, it sends its token. A token could be valid for a limited amount of time or requests (perhaps even one request).

# javascript - 在javascript中查找两个日期时间之间的差异

> ID：13413568
> 
> 赞同：1
> 
> 时间：2012-11-16T09:16:21.440
> 
> 标签：javascript, datetime

问题陈述：我必须验证具有“开始日期”和“结束日期”字段的表单。

验证约束：这两个日期之间的差不得少于 24 小时。

示例：无效案例：SDate：“01-10-2012 11:59” EDate：““02-10-2012 00:00”

日期：“2012 年 1 月 10 日 02:20” 日期：“2012 年 2 月 10 日 02:00”

有效案例：

日期：“2012 年 1 月 10 日 02:20” 日期：“2012 年 2 月 10 日 03:30”

注意：这两个日期对象也有时间值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:22:11.050

看看[moment.js](http://momentjs.com/)。它几乎肯定会做你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:24:37.260

一旦你解析了 2 个字符串并创建了相应的`Date`对象，你只需要使用：

```
function isValid(startDate, endDate) {
  return endDate - startDate > 24 * 60 * 60 * 1000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:23:12.060

```
 function(start, end, unit){
            var denom = 1,
                diff = end.getTime() - start.getTime();

            if(unit == 's'){ 
                denom = 1000;
            }
            else if(unit == 'm'){
                denom = 1000*60;
            }
            else if(unit == 'h'){
                denom = 1000*60*60;
            }
            return Math.round(diff/denom);
        } 
```

单位可以是's' - 秒，'m' - 分钟，'h' - 天。您可以根据自己的选择扩展它：天、月等。

您还应该`Date`首先将日期解析为 javascript 对象。你需要帮助吗？

从您的格式解析日期：

```
var p = "01-10-2012 05:30".match(/(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2})/);
parsedDate = new Date(parseInt(p[3]) - 1900, parseInt(p[2]) - 1, p[1], p[4], p[5]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:26:36.050

您可以使用它来计算差异并执行验证：

```
 Date.daysBetween = function( date1, date2 ) {
  //Get 1 day in milliseconds
  var one_day=1000*60*60*24;

  // Convert both dates to milliseconds
  var date1_ms = date1.getTime();
  var date2_ms = date2.getTime();

  // Calculate the difference in milliseconds
  var difference_ms = date2_ms - date1_ms;
  //take out milliseconds
  difference_ms = difference_ms/1000;
  var seconds = Math.floor(difference_ms % 60);
  difference_ms = difference_ms/60; 
  var minutes = Math.floor(difference_ms % 60);
  difference_ms = difference_ms/60; 
  var hours = Math.floor(difference_ms % 24);  
  var days = Math.floor(difference_ms/24);

  return days + ' days, ' + hours + ' hours, ' + minutes + ' minutes, and ' + seconds + ' seconds';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T09:28:18.603

困难的部分是将字符串转换为有效`Date`对象，特别是因为您使用的是非标准日期格式。

我建议使用可以处理该格式的第三方库，或者使用简单的字符串操作并使用`Data`构造函数的版本，该版本为每个*(year, month, date, hour, minute, seconds)*获取六个单独的字段。

完成此操作后，测试两个 JavaScript`Date`对象是否相隔超过 24 小时很容易 - 只需获取它们的数值并检查它是否超过 86400000（一天中的毫秒数）。

```
var t1 = new Date(Y1, M1, D1, hh1, mm1, ss1);
var t2 = new Date(Y2, M2, D2, hh2, mm2, ss2);

var valid = (t2 - t1) >= 86400000; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T10:17:55.477

```
 /** Method: getDateObject
   * 
   * Description: 
   * gives date object from string 
   * @param dateString
   * @param separator used
   * @returns corresponding date object 
   */

function getDateObject(dateString, parseFormat) {
//This function return a date object after accepting

 if(dateString!=null && dateString!=undefined && dateString!="")
 {
  var dateFormat = sessvars.currentUser.options.dateFormat;
  if(parseFormat.length==0)
      parseFormat = [dateFormat + " HH:mm:ss", dateFormat + " HH:mm",dateFormat];

  var dtObject = Date.parseExact(dateString, parseFormat);  
  return dtObject;
 }
else
  return dateString;
} 
```

好的，非常感谢您的宝贵意见和建议。我有一个混合了你的想法的解决方案。

解决方案：

1.制作了一个自定义函数，根据指定的格式返回日期对象。

2.现在 getTime() 给出毫秒值。

3.SDate.getTime() - EDate.getTime() < 24*3600*1000

例子 ：

getDateObject("01-10-2012 05:30",[]).getTime() - getDateObject("02-10-2012 05:30",[]).getTime() < 24*3600*1000

# php - json解码返回空字符串

> ID：13413572
> 
> 赞同：1
> 
> 时间：2012-11-16T09:16:30.457
> 
> 标签：php, curl, json

这是我的原始代码：

```
$returnArray=array(
    'loginUrl'=>$url."/?page_id=2732",
    'clientNumber'=>$clientNumber,
    'clientName'=>$_SESSION['userName']
);
echo json_encode($returnArray); 
```

这是我的接收端代码：

```
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

$result = trim(curl_exec($ch));

curl_close($ch);

$result = json_decode($result,true); 
```

最后是`$result`var_dump

```
string(194) "
{"loginUrl":"http:\/\/www.xxxxxxxxxxxx.co.il\/chtsystem\/?page_id=2732","clientNumber":"11111","clientName":"\u05d0\u05d1\u05d9 \u05d4\u05de\u05d3\u05d1\u05d9\u05e8 - www.yyy-yyyyyyy.co.il"}" 
```

`$result`从解码中出来`null`，当打印我可以看到的 json 错误`"JSON_ERROR_SYNTAX"`时

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:29:36.307

在 JSON 字符串中使用前导新行并没有错。但是您可能有一个 UTF-8 BOM 并且`json_decode()`无法应对。

BOM 最可能的来源是您的 IDE 或文本编辑器。验证其设置并确保 UTF-8 文件在没有 BOM 的情况下保存。这样的 BOM 不是强制性的，它通常只会产生类似这样的问题。

**更新：**

你可以替换这个：

```
var_dump($result); 
```

... 有了这个：

```
var_dump(bin2hex($result)); 
```

...以获得更准确的 JSON 字符串内容视图。[UTF-8 BOM](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)将显示为：

```
efbbbf... 
```

# android - android启动器图形的高度和宽度不相等可以吗？

> ID：13413573
> 
> 赞同：0
> 
> 时间：2012-11-16T09:16:32.233
> 
> 标签：android

作为我所有活动的背景图形的图形在高度和宽度上是不相等的。例如 25*35dp。我想拥有与启动器图标相同的图形。

这些是我必须在各种可绘制文件夹中提供的尺寸

```
LDPI - 36 x 36
MDPI - 48 x 48
HDPI - 72 x 72
XHDPI - 96 x 96
WEB - 512 x 512 
```

.

我将如何缩放我的图形以适应每个文件夹？或者如果尺寸不相等也没关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:33:58.360

尝试使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)创建图标...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:51:40.327

要为不同密度创建替代位图可绘制对象，您应该遵循四个通用密度之间的 3:4:6:8 缩放比例。例如，如果您有一个 48x48 像素的用于中等密度屏幕（启动器图标的大小）的可绘制位图，则所有不同的大小应该是：

36x36 用于低密度

48x48 用于中等密度

72x72 用于高密度

96x96 用于超高密度

详情：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# spring - 创建新的 Maven 项目时出现奇怪的失败

> ID：13413578
> 
> 赞同：2
> 
> 时间：2012-11-16T09:16:56.230
> 
> 标签：spring, model-view-controller, maven, spring-roo, pom.xml

我正在使用 Spring Tool Suite（最新版本），每当我执行**New project -> Maven Project**并选择**maven-archetype-webapp**作为我的原型时，我的 pom 文件中都会出现以下奇怪的错误。

```
Failure to transfer org.codehaus.plexus:plexus-components:pom:1.1.18 from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.codehaus.plexus:plexus-components:pom:1.1.18 from/to central (http://repo.maven.apache.org/maven2): No response received after 60000 
```

此外，这是生成的非常简短的 pom.xml 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>Tset</groupId>
    <artifactId>Tset</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>Tset Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>Tset</finalName>
    </build>
</project> 
```

我是这些方面的新手，所以我可能只是遗漏了一些明显的东西。

我通过从 ROO 生成的新项目中获取 POM 文件解决了这个问题，但我真的很好奇是什么原因造成的以及如何解决它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T09:53:31.853

根据我的经验，这种情况有时会发生在 maven 的下载损坏或当 maven 尝试下载此工件或出于任何原因时没有可用的 Internet 连接时。

Try to delete the artifact in your .m2 directory, e.g. by deleting the folder `C:\Users\yourname\.m2\repository\org\codehaus\plexus\plexus-components`.

# ruby - 与嵌套类共享范围

> ID：13413583
> 
> 赞同：2
> 
> 时间：2012-11-16T09:17:05.947
> 
> 标签：ruby, nested-class

如何在 Ruby 中获得这种类似 Java 的效果？

```
class Outer {
  final boolean switch
  public Outer(boolean someSwitch) {
   switch = someSwitch
  }

  class Inner {
    public void doSomething() {
      if (switch) {
        //behave like this
      } else {
        //behave like that
    }
  }
} 
```

没关系，切换必须是最终的；在 Scala 中，它没有。反正。我的 Inner 类位于 Outer 实例的范围内，这就是我喜欢的方式。而且我不必将开关传递给每个单独的内部实例。

在 Ruby 中，我可以将一个类嵌套在另一个类中，但这并不意味着除了命名空间之外的任何东西。怎样才能得到我想要的效果？我知道这个问题有点模糊，所以即使你不确定，也可以随意尝试一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:38:58.930

Ruby 中没有嵌套类，更多信息[在这里](https://stackoverflow.com/questions/4903533/how-can-a-nested-class-access-a-method-in-the-outer-class-in-ruby)。但是 Ruby 非常棒，如果它有帮助，你可以做到这一点。

```
module M
  class Outer
    attr_accessor :foo

    def say_hello()
      puts "Hello Outer '#{@foo}'"
      Inner.new(self).say_hello()
    end

    private

    class Inner

      def initialize(parent)
        @parent = parent
      end
      def say_hello()
        puts "Hello Inner '#{@parent.foo}'"
      end
    end
  end
end

instance = M::Outer.new
instance.foo = "foo values"
instance.say_hello

#=> Hello Outer 'foo values'
#=> Hello Inner 'foo values' 
```

# python - 如何删除某一列中值为 NaN 的 Pandas DataFrame 行

> ID：13413590
> 
> 赞同：1163
> 
> 时间：2012-11-16T09:17:22.947
> 
> 标签：python, pandas, dataframe, nan

我有这个`DataFrame`，只想要`EPS`列不是的记录`NaN`：

```
>>> df
                 STK_ID  EPS  cash
STK_ID RPT_Date                   
601166 20111231  601166  NaN   NaN
600036 20111231  600036  NaN    12
600016 20111231  600016  4.3   NaN
601009 20111231  601009  NaN   NaN
601939 20111231  601939  2.5   NaN
000001 20111231  000001  NaN   NaN 
```

...即类似于`df.drop(....)`得到这个结果数据框的东西：

```
 STK_ID  EPS  cash
STK_ID RPT_Date                   
600016 20111231  600016  4.3   NaN
601939 20111231  601939  2.5   NaN 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1224
> 
> 时间：2012-11-16T09:34:38.297

不要放弃，只取 EPS 不是 NA 的行：

```
df = df[df['EPS'].notna()] 
```

* * *

## 回答 #2

> 赞同：1109
> 
> 时间：2012-11-17T20:27:33.253

这个问题已经解决了，但是...

...还要考虑 Wouter 在[其原始评论](https://stackoverflow.com/questions/13413590/how-to-drop-rows-of-pandas-dataframe-whose-value-of-certain-column-is-nan/13434501#comment18328797_13413590)中建议的解决方案。处理缺失数据的能力，包括`dropna()`，明确地内置在 pandas 中。除了与手动操作相比可能会提高性能外，这些功能还带有各种可能有用的选项。

```
In [24]: df = pd.DataFrame(np.random.randn(10,3))

In [25]: df.iloc[::2,0] = np.nan; df.iloc[::4,1] = np.nan; df.iloc[::3,2] = np.nan;

In [26]: df
Out[26]:
          0         1         2
0       NaN       NaN       NaN
1  2.677677 -1.466923 -0.750366
2       NaN  0.798002 -0.906038
3  0.672201  0.964789       NaN
4       NaN       NaN  0.050742
5 -1.250970  0.030561 -2.678622
6       NaN  1.036043       NaN
7  0.049896 -0.308003  0.823295
8       NaN       NaN  0.637482
9 -0.310130  0.078891       NaN 
```

* * *

```
In [27]: df.dropna()     #drop all rows that have any NaN values
Out[27]:
          0         1         2
1  2.677677 -1.466923 -0.750366
5 -1.250970  0.030561 -2.678622
7  0.049896 -0.308003  0.823295 
```

* * *

```
In [28]: df.dropna(how='all')     #drop only if ALL columns are NaN
Out[28]:
          0         1         2
1  2.677677 -1.466923 -0.750366
2       NaN  0.798002 -0.906038
3  0.672201  0.964789       NaN
4       NaN       NaN  0.050742
5 -1.250970  0.030561 -2.678622
6       NaN  1.036043       NaN
7  0.049896 -0.308003  0.823295
8       NaN       NaN  0.637482
9 -0.310130  0.078891       NaN 
```

* * *

```
In [29]: df.dropna(thresh=2)   #Drop row if it does not have at least two values that are **not** NaN
Out[29]:
          0         1         2
1  2.677677 -1.466923 -0.750366
2       NaN  0.798002 -0.906038
3  0.672201  0.964789       NaN
5 -1.250970  0.030561 -2.678622
7  0.049896 -0.308003  0.823295
9 -0.310130  0.078891       NaN 
```

* * *

```
In [30]: df.dropna(subset=[1])   #Drop only if NaN in specific column (as asked in the question)
Out[30]:
          0         1         2
1  2.677677 -1.466923 -0.750366
2       NaN  0.798002 -0.906038
3  0.672201  0.964789       NaN
5 -1.250970  0.030561 -2.678622
6       NaN  1.036043       NaN
7  0.049896 -0.308003  0.823295
9 -0.310130  0.078891       NaN 
```

还有其他选项（请参阅[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.dropna.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.dropna.html)上的文档），包括删除列而不是行。

很方便！

* * *

## 回答 #3

> 赞同：139
> 
> 时间：2014-04-23T05:37:45.533

我知道这已经得到了回答，但只是为了这个特定问题的纯粹熊猫解决方案，而不是 Aman 的一般描述（这很棒），以防其他人发生这种情况：

```
import pandas as pd
df = df[pd.notnull(df['EPS'])] 
```

* * *

## 回答 #4

> 赞同：106
> 
> 时间：2017-08-02T16:28:41.573

你可以使用这个：

```
df.dropna(subset=['EPS'], how='all', inplace=True) 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2017-11-23T12:08:11.147

**最简单的解决方案：**

```
filtered_df = df[df['EPS'].notnull()] 
```

> 上述解决方案比使用 np.isfinite() 好得多

* * *

## 回答 #6

> 赞同：41
> 
> 时间：2020-06-18T07:42:24.143

> ## 如何删除某一列中值为 NaN 的 Pandas DataFrame 行

这是一个老问题，已经被打死了，但我相信在这个线程上有一些更有用的信息可以浮出水面。如果您正在寻找以下任何问题的答案，请继续阅读：

*   如果行的任何值具有 NaN，我可以删除行吗？如果它们都是 NaN 怎么办？
*   删除行时，我只能查看特定列中的 NaN 吗？
*   我可以删除具有特定 NaN 值计数的行吗？
*   如何删除列而不是行？
*   我尝试了上述所有选项，但我的 DataFrame 不会更新！

* * *

# [`DataFrame.dropna`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dropna.html): 用法和例子

已经有人说这`df.dropna`是从 DataFrames 中删除 NaN 的规范方法，但是在此过程中没有什么比一些视觉提示更能提供帮助的了。

```
# Setup
df = pd.DataFrame({
    'A': [np.nan, 2, 3, 4],  
    'B': [np.nan, np.nan, 2, 3], 
    'C': [np.nan]*3 + [3]}) 

df                      
     A    B    C
0  NaN  NaN  NaN
1  2.0  NaN  NaN
2  3.0  2.0  NaN
3  4.0  3.0  3.0 
```

以下是最重要的论点及其工作原理的详细信息，以常见问题解答格式排列。

* * *

## 如果行的任何值具有 NaN，我可以删除行吗？如果它们都是 NaN 怎么办？

这就是`how=...`论证派上用场的地方。它可以是其中之一

*   `'any'`（默认） - 如果至少一列有 NaN，则删除行
*   `'all'`- 仅当所有列都有 NaN 时才删除行

<!_ ->

```
# Removes all but the last row since there are no NaNs 
df.dropna()

     A    B    C
3  4.0  3.0  3.0

# Removes the first row only
df.dropna(how='all')

     A    B    C
1  2.0  NaN  NaN
2  3.0  2.0  NaN
3  4.0  3.0  3.0 
```

> **注意**
> 如果您只想查看哪些行为空（IOW，如果您想要行的布尔掩码），请使用 [`isna`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.isna.html)：
> 
> ```
> df.isna()
> 
>        A      B      C
> 0   True   True   True
> 1  False   True   True
> 2  False  False   True
> 3  False  False  False
> 
> df.isna().any(axis=1)
> 
> 0     True
> 1     True
> 2     True
> 3    False
> dtype: bool 
> ```
> 
> 要获得此结果的反转，请 [`notna`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.notna.html#pandas.DataFrame.notna) 改用。

* * *

## 删除行时，我只能查看特定列中的 NaN 吗？

这是`subset=[...]`参数的一个用例。

指定一个列列表（或带有 的索引`axis=1`）告诉 pandas`axis=1`在删除行（或带有`axis=1`.

```
# Drop all rows with NaNs in A
df.dropna(subset=['A'])

     A    B    C
1  2.0  NaN  NaN
2  3.0  2.0  NaN
3  4.0  3.0  3.0

# Drop all rows with NaNs in A OR B
df.dropna(subset=['A', 'B'])

     A    B    C
2  3.0  2.0  NaN
3  4.0  3.0  3.0 
```

* * *

## 我可以删除具有特定 NaN 值计数的行吗？

这是`thresh=...`参数的一个用例。将 NON-NULL 值的最小数量指定为整数。

```
df.dropna(thresh=1)  

     A    B    C
1  2.0  NaN  NaN
2  3.0  2.0  NaN
3  4.0  3.0  3.0

df.dropna(thresh=2)

     A    B    C
2  3.0  2.0  NaN
3  4.0  3.0  3.0

df.dropna(thresh=3)

     A    B    C
3  4.0  3.0  3.0 
```

这里要注意的是，您需要指定要*保留*多少个 NON-NULL 值，而不是要*删除*多少个 NULL 值。这是新用户的痛点。

幸运的是，修复很简单：如果您有 NULL 值的计数，只需从列大小中减去它即可获得函数的正确 thresh 参数。

```
required_min_null_values_to_drop = 2 # drop rows with at least 2 NaN
df.dropna(thresh=df.shape[1] - required_min_null_values_to_drop + 1)

     A    B    C
2  3.0  2.0  NaN
3  4.0  3.0  3.0 
```

* * *

## 如何删除列而不是行？

使用`axis=...`参数，它可以是`axis=0`or `axis=1`。

告诉函数您是要删除行 ( `axis=0`) 还是删除列 ( `axis=1`)。

```
df.dropna()

     A    B    C
3  4.0  3.0  3.0

# All columns have rows, so the result is empty.
df.dropna(axis=1)

Empty DataFrame
Columns: []
Index: [0, 1, 2, 3]

# Here's a different example requiring the column to have all NaN rows
# to be dropped. In this case no columns satisfy the condition.
df.dropna(axis=1, how='all')

     A    B    C
0  NaN  NaN  NaN
1  2.0  NaN  NaN
2  3.0  2.0  NaN
3  4.0  3.0  3.0

# Here's a different example requiring a column to have at least 2 NON-NULL
# values. Column C has less than 2 NON-NULL values, so it should be dropped.
df.dropna(axis=1, thresh=2)

     A    B
0  NaN  NaN
1  2.0  NaN
2  3.0  2.0
3  4.0  3.0 
```

* * *

## 我尝试了上述所有选项，但我的 DataFrame 不会更新！

`dropna`, 与 pandas API 中的大多数其他函数一样，返回一个新的 DataFrame（带有更改的原始副本）作为结果，因此如果您想查看更改，应该将其分配回去。

```
df.dropna(...) # wrong
df.dropna(..., inplace=True) # right, but not recommended
df = df.dropna(...) # right 
```

* * *

# 参考

[https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dropna.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dropna.html)

> ```
> DataFrame.dropna(
>     self, axis=0, how='any', thresh=None, subset=None, inplace=False) 
> ```
> 
> [![在此处输入图像描述](../Images/20f569b0d2920574ef1d809777d3919d.png)](https://i.stack.imgur.com/77fqu.png)

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2019-01-22T08:26:39.203

**简单易行的方法**

`df.dropna(subset=['EPS'],inplace=True)`

来源：[https ://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.dropna.html](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.dropna.html)

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2015-12-04T07:01:56.243

您可以使用数据框方法[notnull](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.notnull.html)或[isnull](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.isnull.html)或[numpy.isnan](http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.isnan.html)的反函数：

```
In [332]: df[df.EPS.notnull()]
Out[332]:
   STK_ID  RPT_Date  STK_ID.1  EPS  cash
2  600016  20111231    600016  4.3   NaN
4  601939  20111231    601939  2.5   NaN

In [334]: df[~df.EPS.isnull()]
Out[334]:
   STK_ID  RPT_Date  STK_ID.1  EPS  cash
2  600016  20111231    600016  4.3   NaN
4  601939  20111231    601939  2.5   NaN

In [347]: df[~np.isnan(df.EPS)]
Out[347]:
   STK_ID  RPT_Date  STK_ID.1  EPS  cash
2  600016  20111231    600016  4.3   NaN
4  601939  20111231    601939  2.5   NaN 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2017-04-20T21:15:56.967

另一个使用以下事实的解决方案`np.nan != np.nan`：

```
In [149]: df.query("EPS == EPS")
Out[149]:
                 STK_ID  EPS  cash
STK_ID RPT_Date
600016 20111231  600016  4.3   NaN
601939 20111231  601939  2.5   NaN 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-02-08T07:59:30.153

另一个版本：

```
df[~df['EPS'].isna()] 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-03-15T15:33:31.850

可以添加'&'可以用于添加附加条件，例如

```
df = df[(df.EPS > 2.0) & (df.EPS <4.0)] 
```

请注意，在评估语句时，pandas 需要括号。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-12-14T04:23:27.593

在具有大量列的数据集中，最好查看有多少列包含空值以及有多少列不包含。

```
print("No. of columns containing null values")
print(len(df.columns[df.isna().any()]))

print("No. of columns not containing null values")
print(len(df.columns[df.notna().all()]))

print("Total no. of columns in the dataframe")
print(len(df.columns)) 
```

例如，在我的数据框中，它包含 82 列，其中 19 列至少包含一个空值。

此外，您还可以根据哪个具有更多空值**自动删除列和行**
这是智能执行此操作的代码：

```
df = df.drop(df.columns[df.isna().sum()>len(df.columns)],axis = 1)
df = df.dropna(axis = 0).reset_index(drop=True) 
```

**注意：**上面的代码删除了所有空值。如果您想要空值，请先处理它们。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-08T06:17:35.513

以下方法对我有用。如果上述方法都不起作用，那将有所帮助：

```
df[df['colum_name'].str.len() >= 1] 
```

基本思想是仅当长度强度大于 1 时才拾取记录。这在处理字符串数据时特别有用

最好的！

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2022-02-21T19:55:01.587

您可以尝试：

```
df['EPS'].dropna() 
```

# db2 - 无法在 DB2 for i 上调用具有 CHAR 参数的用户定义函数

> ID：13413596
> 
> 赞同：1
> 
> 时间：2012-11-16T09:17:42.370
> 
> 标签：db2, ibm-midrange, params, create-function

我以这种方式在 DB2（6.01 版）中创建了一个函数：

```
CREATE FUNCTION myschema.test_c_c(param CHAR(1)) RETURNS CHAR(1) RETURN param; 
```

并获得一条成功消息，“System i Navigator”向我展示了 myschema 下的该功能。但是当我尝试以这种方式调用此函数时：

```
SELECT myschema.test_c_c('X') FROM SYSIBM.SYSDUMMY1; 
```

我收到以下消息：

```
[SQL0204] TEST_C_C der Art *N in myschema nicht gefunden. 
[SQL State=42704, DB Errorcode=-204] 
```

“nicht gefunden”等于“未找到”。

**错误代码-204的解释**（部分，[完整的错误代码描述在这里](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.codes/src/tpc/n204.htm)）

“由名称标识的对象未在 DB2® 子系统中定义。”

最后，使用 INT 参数一切正常：

```
CREATE FUNCTION myschema.test_i_ri(param INT) RETURNS INT RETURN param;
SELECT myschema.test_i_ri(4711) FROM SYSIBM.SYSDUMMY1;
CREATE FUNCTION myschema.test_ii_ri(param1 INT, param2 INT) RETURNS INT RETURN param1 +param2;
SELECT myschema.test_ii_ri(800, 15) FROM SYSIBM.SYSDUMMY1; 
```

我在哪里错过了重点？

[我使用SQL Workbench/J](http://www.sql-workbench.net/)执行所有 statmentens （我觉得这非常有用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:38:34.070

经过数小时的尝试错误和研究后，我提出了这个问题，然后 30 分钟后，我自己找到了答案。

问题在于 DB2 中重载函数的解决方法。打电话时

```
SELECT myschema.test_c_c('X') FROM SYSIBM.SYSDUMMY1; 
```

这样，DB2 将“X”解释为 VARCHAR，但我没有带有 VARCHAR 参数的 test_c_c 版本。什么是工作

```
SELECT CESDTA.TEST_C_C(CAST('X' AS CHAR(1))) FROM SYSIBM.SYSDUMMY1; 
```

或者声明一个 VARCHAR 函数：

```
CREATE FUNCTION cesdta.test_v_v(param VARCHAR(1)) RETURNS VARCHAR(1000) RETURN param;
SELECT cesdta.test_v_v('X') FROM SYSIBM.SYSDUMMY1; 
```

# moose-technology - 在 Roassal 中应用布局后是否有任何事件立即触发？

> ID：13413602
> 
> 赞同：0
> 
> 时间：2012-11-16T09:18:10.683
> 
> 标签：moose-technology

我想在应用布局后立即定义动画。当在 Glamour 浏览器的上下文中定义可视化时，这一点很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:03:44.680

使用蒙德里安 DSL，您可以使用：

查看节点：（1 到：20）。查看 Horizo​​ntalLineLayout on: ROLayoutEnd do: [:event | ...]。

使用 Roassal API，您可以使用： ROHorizo​​ntalLineLayout on: ROLayoutEvent do: [ :event | 事件添加：事件]；应用：你的元素

# c# - 代码分析：TableCell如何攻克CA2000

> ID：13413603
> 
> 赞同：0
> 
> 时间：2012-11-16T09:18:10.343
> 
> 标签：c#, .net, code-analysis

我有以下带有三个 CA2000 警告的代码。对于 cellFirst 变量，我可以通过使用“使用”块来克服这个问题。但是对于其他两个 headercells，控件是在辅助函数中创建的。

> CA2000：Microsoft.Reliability：在方法 GetTableCell(string, int, string, string) 中，对象“lnkHide”并未沿所有异常路径进行处理。在对对象“lnkHide”的所有引用超出范围之前调用 System.IDisposable.Dispose。
> 
> CA2000：Microsoft.Reliability：在方法 GetTableCell(string, int, string, string) 中，对象“ltlText”并未沿所有异常路径进行处理。在对对象“ltlText”的所有引用超出范围之前调用 System.IDisposable.Dispose。
> 
> CA2000：Microsoft.Reliability：在方法 GetTableCell(string, int, string, string) 中，对象“newCell”并未沿所有异常路径进行处理。在对对象“newCell”的所有引用超出范围之前调用 System.IDisposable.Dispose。

**代码**

```
 protected void grdTransactions_RowCreated(object sender, GridViewRowEventArgs e)
    {

        if (e != null)
        {
            if (e.Row.RowType == DataControlRowType.Header)
            {
                GridViewRow newHeaderRow = null;
                try
                {

                    newHeaderRow = new GridViewRow(-1, -1, DataControlRowType.Header, DataControlRowState.Normal);

                    using (TableHeaderCell cellFirst = new TableHeaderCell())
                    {
                        cellFirst.ColumnSpan = 1;
                        cellFirst.Text = "FIRST";
                        newHeaderRow.Cells.Add(cellFirst);
                    }

                    //Associate 
                    #region Associate

                    TableHeaderCell cellAssociate = GetTableCell("tableColGroupAssociate", 4, "associateHide", "Associate Transaction Info");

                    #endregion

                    //Financial 
                    #region Financial

                    TableHeaderCell cellFinancial = GetTableCell("tableColGroupTransaction", 5, "financialHide", "Financial Transaction Info");

                    #endregion

                    newHeaderRow.Cells.Add(cellAssociate);
                    newHeaderRow.Cells.Add(cellFinancial);
                    ((GridView)sender).Controls[0].Controls.AddAt(0, newHeaderRow);

                }
                finally
                {
                    if (newHeaderRow != null)
                    {
                        newHeaderRow.Dispose();
                        newHeaderRow = null;
                    }
                }

            }
        }

    }

    private static TableHeaderCell GetTableCell(string cssClassName, int colSpan, string hideClassName, string displayName)
    {
        TableHeaderCell newCell = new TableHeaderCell();
        newCell.ColumnSpan = colSpan;
        newCell.CssClass = cssClassName;

        LiteralControl ltlText = new LiteralControl();
        ltlText.Text = displayName;
        newCell.Controls.Add(ltlText);

        HyperLink lnkHide = new HyperLink();
        lnkHide.Text = SupportToolUIResource.HideLinkText;
        lnkHide.CssClass = hideClassName;
        lnkHide.Target = SupportToolUIResource.HideLinkTarget;
        newCell.Controls.Add(lnkHide);

        return newCell;
    } 
```

**参考**：

1.  [处置或不处置 (CA2000)](https://stackoverflow.com/questions/4264986/to-dispose-or-not-to-dispose-ca2000)

**更新代码**

*使用块来克服警告*

```
 using (TableHeaderCell cellAssociate = new TableHeaderCell())
                    {
                        GetTableCell(cellAssociate,"tableColGroupAssociate", 4, "associateHide", "Associate Transaction Info");
                        newHeaderRow.Cells.Add(cellAssociate);
                    }

     private static void GetTableCell(TableHeaderCell cellAssociate, string cssClassName, int colSpan, string hideClassName, string displayName)
    {
        cellAssociate.ColumnSpan = colSpan;
        cellAssociate.CssClass = cssClassName;

        using (LiteralControl ltlText = new LiteralControl())
        {
            ltlText.Text = displayName;
            cellAssociate.Controls.Add(ltlText);
        }

        using (HyperLink lnkHide = new HyperLink())
        {
            lnkHide.Text = SupportToolUIResource.HideLinkText;
            lnkHide.CssClass = hideClassName;
            lnkHide.Target = SupportToolUIResource.HideLinkTarget;
            cellAssociate.Controls.Add(lnkHide);
        }

    } 
```

**问题**

应用程序“使用”块（如更新的代码所示）中是否有任何陷阱来克服警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:43:04.290

请阅读[在 Web 控件上使用“使用”块有什么问题？](https://stackoverflow.com/questions/13448986/whats-wrong-with-use-of-using-block-on-webcontrols)以获得对此的一些见解。另请参阅[为什么我需要在 ASP.NET 控件上调用 dispose？](https://stackoverflow.com/questions/3150735/why-would-i-need-to-call-dispose-on-asp-net-controls/3151072#3151072)

一些兴趣点是（来自上面的帖子）：

1.  我们需要做的是确保添加的新控件在 Controls 的集合中，以便在释放 Page 时释放它。
2.  控件对象实现 IDisposable 接口。每个父控件都可以对其所有子控件调用 Dispose
3.  任何实现 IDisposable 并具有在处置过程中实际清理的状态数据的正确编写的对象，如果在处置后访问其任何公共/受保护/内部属性或方法，则应抛出 ObjectDisposedException。（假设 Dispose 被调用后处于无效状态。）如果它们实际上没有任何要清理的内容，则某些类型将忽略此规则，并且不必担心无效状态。

# java - 为什么在尝试填充数组时，我会收到 NullPointerException？

> ID：13413605
> 
> 赞同：0
> 
> 时间：2012-11-16T09:18:20.980
> 
> 标签：java, arrays, bitset

我正在尝试使用有关 int 数组的信息填充 BitSet 数组

```
 //ar is a SIZE*SIZE 1-D int array, SIZE is a constant

    //decare BitSet array
    BitSet bs[] = new BitSet[SIZE];

    //initialize BitSet array
    for (BitSet x:bs)
        x = new BitSet();

    //populate BitSet array
    for (int i = 0 ; i < ar.length ; i++)
        if (ar[i] > 0)
            bs[(i/SIZE)].set(SIZE-(i%SIZE)); 
```

最后一行似乎是问题所在，但我看不出逻辑有什么问题。有任何想法吗？

为了更清楚一点，如果我有一个像 0,3,4,5,0,1,0,0,1,2,7,0,2,3,0,3,2,0 这样的数组， 0,0,2,1,5,8,0,0,0,0,0,1,0,0,0,6,0,0

我想得到一个可以表示为 011101,001110,110110,001111,000001,000100 的位集数组

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T09:24:07.677

您的问题是对增强的 for 循环的理解缺失。基本上：

```
for (BitSet x:bs)
    x = new BitSet(); 
```

只是一块合成糖。编译器将其扩展为以下内容：

```
for (int i = 0; i < bs.length; i++) {
    BitSet x = bs[i];
    x = new BitSet();
} 
```

在此扩展中，很明显您只是将新的位集分配给`x`并将其丢弃。您实际上根本没有修改数组。您需要按如下方式初始化数组：

```
for (int i = 0; i < bs.length; i++) {
    bs[i] = new BitSet();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T09:24:04.930

在java中，你的'foreach'结构是这样工作的：

```
for (BitSet x:bs)
  x = new BitSet();

// is the same as:

for (int i = 0; i < bs.length; i++) {
  BitSet x = bs[i];
  x = new BitSet();
} 
```

你的问题是你没有分配回数组，并且没有办法用'foreach'构造来做到这一点。您必须使用普通的“for”循环：

```
for (int i = 0; i < bs.length; i++) {
  bs[i] = new BitSet();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:24:19.440

您正在将新创建的对象分配给临时变量`x`

试试下面的东西..

```
 int i=0;
        for (BitSet x:bs)
            {
                x = new BitSet();
                bs[i++] = x; //This will initialize the array elements
            } 
```

# c# - Javascript和clientId问题

> ID：13413606
> 
> 赞同：0
> 
> 时间：2012-11-16T09:18:24.257
> 
> 标签：c#, javascript, asp.net

大家好，我有一个用户控件：

```
<input type="text" id="datepicker" runat="server" readonly="readonly" />
 <img src="../images/remove.png" id="test" onclick="ClearFeild()" runat="server" /> 
```

我的 aspx 页面如下所示：

```
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolderBody" runat="server">

    <uc:Calendar ID="calSample" runat="server" ChangeMonth="false" ChangeYear="false"
        DateFormat="dd-M-yy" TextBoxWidth="75px" Enabled="true" />
    <uc:Calendar ID="Calendar1" runat="server" ChangeMonth="false" ChangeYear="false"
        DateFormat="dd-M-yy" TextBoxWidth="75px" Enabled="true" />
</asp:Content> 
```

在用户控件上，我有一个在 img onclick 上调用的 javascript 函数：

```
 function ClearFeild()
    {     
       debugger; 
       $("#<%=datepicker.ClientID %>").val() = "";
    } 
```

但价值

> $("#<%=datepicker.ClientID %>");

总是 ：

> $("#ContentPlaceHolderBody_Calendar1_datepicker");

这是第二个用户控件，即使我单击第一个控件。

请协助我如何克服这个问题。

CLearFeild 函数在单击按钮以清除 datepicker 字段时被调用。

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:20:11.570

您需要将源对象传递给您的函数

**[现场演示](http://jsfiddle.net/Nrq8b/1/)**

```
onclick="ClearFeild(this)"

function ClearFeild(source) {        
    obj = $('#' + source.id)
    prevInput = obj.prev('input[type=text]')
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:24:35.317

原因是您的 js 调用将到达最近的可用 javascript 方法。

由于它在用户控制之下，它可能会被渲染两次。所以你正在接近第二种方法。

渲染输出看起来像

```
function ClearField(){$("#ContentPlaceHolderBody_calSample_datepicker")}
function ClearField(){$("#ContentPlaceHolderBody_Calendar1_datepicker")} 
```

和**你的 HTML 输出在这里**。

尝试使用**此**关键字传递图像引用，然后找到具有类的输入文本框

```
 <input type="text" class="datepicker-box" id="datepicker" runat="server" readonly="readonly" />
 <img src="../images/remove.png" id="test"
        onclick="ClearFeild(this)" runat="server" />

 function ClearFeild(img)
    {     

        var dateTextBox= $(img).closest('input.datepicker-box');
    } 
```

# xml - 使用 XML 进行 XLIFF 转换

> ID：13413607
> 
> 赞同：1
> 
> 时间：2012-11-16T09:18:25.083
> 
> 标签：xml, xslt, xliff

我正在尝试使用以下代码将 XLIFF 文件转换回正确的 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="//body">
      <xliff xmlns="urn:oasis:names:tc:xliff:document:1.1" version="1.1">
        <file source-language="en-US" datatype="plaintext" target-language="de">
            <body>
                <xsl:for-each select="//trans-unit">
                    <xsl:element name="string">
                        <xsl:attribute name="name"><xsl:value-of select="@id"/></xsl:attribute>
                        <xsl:value-of select="target"/>
                    </xsl:element>      
                </xsl:for-each>
            </body>
        </file>
    </xliff>
    </xsl:template>
</xsl:stylesheet> 
```

但它得到的只是包含在`<source>`and`<target>`标记中的字符串。我做错了什么或者我错过了一些特殊的标签？

我能够使用一个简单的 XSLT 脚本成功创建一个 XLIFF 文件，但我正在努力将其转换回来。

任何想法表示赞赏。

问候，托马斯

这是 xliff 文件的示例

```
<?xml version='1.0' encoding='utf-8'?>
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.1" version="1.1">
  <file source-language="en" datatype="plaintext" target-language="de">
    <body>
      <trans-unit xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xsl:space="preserve" approved="yes" id="firstrun_textview_language_array_names1">
        <source>English</source>
        <target>Englisch</target>
      </trans-unit>
      <trans-unit xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xsl:space="preserve" approved="no" id="firstrun_textview_language_array_names2">
        <source>Chinese (traditional)</source>
        <target>i dont know</target>
      </trans-unit>
    </body>
  </file>
</xliff> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T09:48:42.447

这里的问题是命名空间。在您的 XLIFF 示例中，您定义了一个默认命名空间

```
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.1" version="1.1"> 
```

这意味着 this 下的所有元素都将属于此命名空间（除非被另一个命名空间覆盖）。

但是，您还没有在 XSLT 中声明此名称空间，因此无论它在哪里寻找元素，它都在 NO 名称空间中寻找元素，并且找到的橱柜是空的。在这种情况下，内置模板会启动，最终只输出所有文本值。

为了解决这个问题，首先添加一个与 XML 匹配的 XLIFF 命名空间的声明

```
<xsl:stylesheet version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    
   xmlns:xliff="urn:oasis:names:tc:xliff:document:1.1" 
   exclude-result-prefixes="xliff"> 
```

然后，在查找元素时使用此前缀。例如

```
<xsl:template match="//xliff:body"> 
```

这是完整的 XSLT。请注意，实际上不需要使用带有静态元素名称的**xsl:element ，直接输出元素即可。**（还要注意使用属性值模板而不是使用**xsl:attribute**）。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xliff="urn:oasis:names:tc:xliff:document:1.1" exclude-result-prefixes="xliff">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="//xliff:body">
        <xliff xmlns="urn:oasis:names:tc:xliff:document:1.1" version="1.1">
            <file source-language="en-US" datatype="plaintext" target-language="de">
                <body>
                   <xsl:for-each select="//xliff:trans-unit">
                      <string name="{@id}">
                         <xsl:value-of select="xliff:target"/>
                      </string>      
                   </xsl:for-each>
                </body>
            </file>
        </xliff>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<xliff version="1.1" xmlns="urn:oasis:names:tc:xliff:document:1.1">
   <file source-language="en-US" datatype="plaintext" target-language="de">
      <body>
        <string name="firstrun_textview_language_array_names1">Englisch</string>
        <string name="firstrun_textview_language_array_names2">i dont know</string>
     </body>
   </file>
</xliff> 
```

# c# - 逆变泛型修饰符

> ID：13413613
> 
> 赞同：4
> 
> 时间：2012-11-16T09:18:48.703
> 
> 标签：c#, generics

```
 public interface IOInitializable<in ItemType> 
```

什么是逆变：从较窄（圆形）转换为较宽（形状）

接口的意思？

后果和危害是什么？

我已阅读[http://msdn.microsoft.com/en-us/library/dd469484.aspx](http://msdn.microsoft.com/en-us/library/dd469484.aspx)但这对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:24:18.070

我建议阅读 Tomas 的解释：

> [C# 4 中协变和逆变背后的理论](http://tomasp.net/blog/variance-explained.aspx)

归结为一个事实，如果您有一个传递多个“圆”的方法调用，则可以使用一个接受多个“形状”的函数，只要它不返回“形状”（因为可能是也可能不是“圆圈”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T10:11:15.613

IComparer 是一个很好的例子来证明这一点。IComparer 看起来像这样：

```
IComparer<in T> 
```

采取以下措施：

```
IComparer<Primate>
IComparer<Chimpanzee> 
```

在哪里`Chimpanzee : Primate`（当然）。需要 an 的方法`IComparer<Chimpanzee>`可以将 an`IComparer<Primate>`作为参数，因为**如果比较器可以比较灵长类动物，它也可以比较黑猩猩，因为它使用两种类型的共同特征来影响比较**。

考虑这一点的一个好方法是在功能方面。协方差允许传递实现核心功能的更复杂的对象（例如为对象传递字符串）。逆变做了类似的事情......比较所有灵长类动物比只比较黑猩猩更复杂。它允许您将特定类型的比较器替换为比较更通用类型的比较器。从这个意义上说，“in”比传递的实际类型更适用于方法的功能。

# php - PHP：使用数组的所有重复项创建单个数组

> ID：13413621
> 
> 赞同：0
> 
> 时间：2012-11-16T09:19:50.540
> 
> 标签：php, arrays, duplicates

我创建了一些数组，其中包含一些以前数组的所有副本。例如：

```
[475] => string(9) "038231370" 
[5135] => string(9) "038231370" 
[13236] => string(9) "038231370" 
[5575]=> string(9) "038231370" 
[4357]=> string(9) "038293950" 
[10509]=> string(9) "038293950" 
[6031]=> string(10) "0038303163" 
[5529]=> string(10) "0038303163" 
[534]=> string(10) "0038303163" 
[5303] ... 
```

正如您所见，一些重复项不止一次加倍。我想要做的是创建不同的数组，这些数组将包含相同的值及其键。

```
function compare($array) {
    $per_array = array();
    $old_key    = NULL;
    $old_value    = NULL;
    foreach($array as $key => $value){

        if ($old_value === $value) {
            $per_array[$old_key]    = $old_value;
            $per_array[$key]        = $value;
        }   
        else {(DO SOME TESTS)unset($per_array);}

        $old_value  = $value;
        $old_key    = $key; 

    }   
} 
```

但我似乎错过了什么。请任何帮助都很重要。

那么我预期的数组的一个例子是：

> per_array(4) = { [475] => 字符串(9) "038231370" [5135] => 字符串(9) "038231370" [13236] => 字符串(9) "038231370" [5575]=> 字符串(9 ) "038231370" }
> 
> per_array(3) = { [4357]=> 字符串(9) "038293950" [10509]=> 字符串(9) "038293950" }

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:36:23.013

这是一个简单的例子

*   独特的价值观
*   重复值与它们的键

代码

```
$a = $u = $d = array();

// Build Temp Data with duplicates
for($i = "A"; $i < "M"; $i ++) {
    $a[$i] = mt_rand(0, 3);
}

//Simple Loop
foreach ( $a as $k => $v ) {
    in_array($v, $u) ? $d[$k] = $v : $u[$k] = $v;
}

var_dump($a); // Original array
var_dump($u); // Unique
var_dump($d); // Duplicate with their keys 
```

输出

```
array (size=12)
  'A' => int 0
  'B' => int 2
  'C' => int 1
  'D' => int 2
  'E' => int 3
  'F' => int 3
  'G' => int 3
  'H' => int 2
  'I' => int 3
  'J' => int 1
  'K' => int 0
  'L' => int 0

array (size=4)
  'A' => int 0
  'B' => int 2
  'C' => int 1
  'E' => int 3

array (size=8)
  'D' => int 2
  'F' => int 3
  'G' => int 3
  'H' => int 2
  'I' => int 3
  'J' => int 1
  'K' => int 0
  'L' => int 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:47:09.353

试试这个代码：

```
$array_count = array();

foreach ($array as $key => $arr) :
    $array_count[$arr][] = $key;
endforeach; 
```

# xml - XSLT 使用 Skip and Take like 方法拆分 XML 文件

> ID：13413622
> 
> 赞同：1
> 
> 时间：2012-11-16T09:20:03.863
> 
> 标签：xml, xslt

我们的订单以 XML 形式出现，我们的一位客户现在正在发送大量圣诞节订单（25mb xml 文件），这几乎使我们的系统陷入停顿！我需要找到一种体面的方法来将此文件拆分为多个 x 大小或 y 个订单的文件。我可以用一个简单的控制台应用程序来做到这一点，但我想知道我是否可以用 XSLT 来做到这一点？

对于此示例，我想一次选择 2 个元素。有没有一种跳过并采取风格的方法？

订单文件示例：

```
<order>
    <customerName>Customer 1</customerName>
    <orderID>001</orderID>
    <orderItem>
        <itemID>001</itemID>
        <quantity>12</quantity>
    </orderItem>
    <orderItem>
        <itemID>002</itemID>
        <quantity>15</quantity>
    </orderItem>
    <orderItem>
        <itemID>003</itemID>
        <quantity>120</quantity>
    </orderItem>
    <orderItem>
        <itemID>004</itemID>
        <quantity>1223</quantity>
    </orderItem>
    <orderItem>
        <itemID>005</itemID>
        <quantity>22</quantity>
    </orderItem>
    <orderItem>
        <itemID>006</itemID>
        <quantity>78</quantity>
    </orderItem>
</order> 
```

我想将其拆分为每个包含 2 个 orderItems 的 XML 文档：

文件 1：

```
<order>
    <customerName>Customer 1</customerName>
    <orderID>001</orderID>
    <orderItem>
        <itemID>001</itemID>
        <quantity>12</quantity>
    </orderItem>
    <orderItem>
        <itemID>002</itemID>
        <quantity>15</quantity>
    </orderItem>
</order> 
```

文件 2：

```
<order>
    <customerName>Customer 1</customerName>
    <orderID>001</orderID>
    <orderItem>
        <itemID>003</itemID>
        <quantity>120</quantity>
    </orderItem>
    <orderItem>
        <itemID>004</itemID>
        <quantity>1223</quantity>
    </orderItem>
</order> 
```

文件 3：

```
<order>
    <customerName>Customer 1</customerName>
    <orderID>001</orderID>
    <orderItem>
        <itemID>005</itemID>
        <quantity>22</quantity>
    </orderItem>
    <orderItem>
        <itemID>006</itemID>
        <quantity>78</quantity>
    </orderItem>
</order> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:26:23.027

我的理解是您仅限于 XSLT 1.0。

在这种情况下，您可以使用**[MVP-XML 项目及其 EXSLT.NET 组件](http://mvpxml.codeplex.com/wikipage?title=EXSLT.NET&referringTitle=Home)**。

更具体地说，您将使用**[`<exsl:document>`](http://exslt.org/exsl/elements/document/index.html)**扩展元素从同一个转换中生成多个输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:36:57.410

如果应用此 XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes" method="xml"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<!-- split file up into order elements -->
<xsl:template match="orderItem[position() mod 2 = 1]">
    <order>
        <xsl:copy-of select=".|following-sibling::orderItem[not(position() > 1)]"/>
    </order>
</xsl:template>

<xsl:template match="orderItem"/>

</xsl:stylesheet> 
```

到您的源 XML，您将获得以下输出 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<order>
<customerName>Customer 1</customerName>
<orderID>001</orderID>
<order>
    <orderItem>
        <itemID>001</itemID>
        <quantity>12</quantity>
    </orderItem>
    <orderItem>
        <itemID>002</itemID>
        <quantity>15</quantity>
    </orderItem>
</order>
<order>
    <orderItem>
        <itemID>003</itemID>
        <quantity>120</quantity>
    </orderItem>
    <orderItem>
        <itemID>004</itemID>
        <quantity>1223</quantity>
    </orderItem>
</order>
<order>
    <orderItem>
        <itemID>005</itemID>
        <quantity>22</quantity>
    </orderItem>
    <orderItem>
        <itemID>006</itemID>
        <quantity>78</quantity>
    </orderItem>
</order>
</order> 
```

问题是您的系统是否支持这种拆分。我正在使用的那个支持它并`<?xml version="1.0" encoding="UTF-8"?>`自动添加，因此拆分订单将是单独的 XML，并且这些订单会被一一处理。

# facebook-graph-api - Facebook PHP SDK：在没有 PAGE_ID 的情况下发布签到

> ID：13413633
> 
> 赞同：0
> 
> 时间：2012-11-16T09:20:52.520
> 
> 标签：facebook-graph-api, facebook-php-sdk

我想知道是否可以使用 PHP 在 Facebook 上添加签到但没有任何页面 ID。

因为我有一个包含很多地方的数据库，但我没有相应的 Facebook 页面 ID。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:53:10.170

据我所知，没有`page_id`.

你可以参考[如何在checkin前获取place_id？](https://stackoverflow.com/questions/11828940/how-to-get-place-id-before-checkin/11882689#11882689)了解如何为您的地点获取 Facebook 主页 ID。

# android - AndEngine 挂起

> ID：13413636
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:21:20.727
> 
> 标签：android, andengine

我正在使用andengine 开发游戏。在我的场景中，我只有 3 个精灵在同一个方向移动。所以问题是它有时会在不到一秒钟后挂起，有时不会。接口没有响应。Logcat 显示完全没有问题。看起来它挂在和引擎内部的某个地方，但我无法弄清楚。我只是设法通过在线实体类的 OnManagedUpdate 方法中的步骤来追踪它

entity.get(i).onUpdate(pSecondsElapsed);

当我跨过它时，它只是挂起，我无法踏入它。

有人遇到过这样的问题吗？它可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:22:10.167

我发现了这个错误 - 精灵动画速率是随机生成的，有时它会得到负值。对于这样一个模糊的问题，我真的很抱歉，只是项目足够大，需要花费大量时间来隔离问题代码部分。

# plsql - 用 for 循环打开隐式游标

> ID：13413640
> 
> 赞同：1
> 
> 时间：2012-11-16T09:21:43.983
> 
> 标签：plsql, oracle11g

我有一个具有以下 pl/sql 块的存储过程。此块在 for 语句中使用 select 查询，但我需要将该静态变量更改为动态查询。当我改变它时，它有错误。有什么方法可以在隐式游标中使用 FOR LOOP 变量。

```
 declare
      sql_query varchar2(32767) := 'select ctlchar ';
      kpiNameQuery varchar2(600);
      isWg boolean := true;
    begin
          IF isWG then
             kpiNameQuery := 'select distinct KPI_NAME from weeklykpi where kpi_name in (select kpi_wg from auxillary.kpi_types) order by 1';

      Else
        kpiNameQuery := 'select distinct KPI_NAME from weeklykpi where kpi_name in (select kpi_wg1 from auxillary.kpi_types) order by 1';
      End IF;         

     for KPI_NAME in kpiNameQuery
      loop
          sql_query := sql_query || ' , min(case when KPI_NAME = '''||x.KPI_NAME||''' then KPI_VALUE end) as '||x.KPI_NAME;
          dbms_output.put_line(sql_query);
      end loop;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:08:34.327

不幸[的是，文档指出](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#i13057)：

> 如果动态 SQL 语句是返回多行的 SELECT 语句，则本机动态 SQL 为您提供以下选择：
> 
> *   使用带有 BULK COLLECT INTO 子句的 EXECUTE IMMEDIATE 语句。
> *   使用 OPEN FOR、FETCH 和 CLOSE 语句。

因此，您将不得不使用 REF 游标（或`EXECUTE IMMEDIATE`遍历结果）。

顺便说一句，在您的情况下，您可以使用静态 SQL 并具有相当的性能：

```
BEGIN
   FOR cc IN (SELECT DISTINCT KPI_NAME
                FROM weeklykpi
               WHERE kpi_name IN (SELECT CASE WHEN l_variable = 1
                                                  THEN kpi_wg
                                              ELSE kpi_wg1
                                         END
                                    FROM auxillary.kpi_types) LOOP
               ORDER BY 1
      -- do something
   END LOOP;
END; 
```

您必须使用除布尔值之外的其他类型，因为 SQL 不知道它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:10:01.713

您可以使用以下光标实现类似的功能

```
declare
      type t_cursor is ref cursor;
      c_cursor t_cursor;
      l_sql varchar2(512);
      l_var number;
   begin
     l_sql := 'select count(*) from emp';  -- do dynamic check before here for    
   -- correct sql
     open c_cursor for l_sql;
     loop
       fetch c_cursor 
        into l_var;           
       exit When c_cursor%notfound;
       DBMS_OUTPUT.put_line ('val '||l_var);           
     end loop;  
     close c_cursor;
  end; 
```

# javascript - Javascript 函数 swfobject.setImage

> ID：13413646
> 
> 赞同：1
> 
> 时间：2012-11-16T09:22:10.053
> 
> 标签：javascript, html, flash

我有 javascript 代码，其中 SWF 对象的背景图像会根据按钮单击进行更改。

单击 javascript 调用时，**swfobject.setImage(imageURL)**

此代码适用于 .JSPA 页面，但不适用于 html 页面（两者使用相同的代码）

在 HTML 中单击它时会在 IE 中引发错误“SCRIPT438：对象不支持属性或方法‘setImage’”

Firefox 中的“.setImage 不是函数”，

Chrome 中的“未捕获的 TypeError：对象 # 没有方法‘setImage’”

# php - 来自某个id的php回显数据

> ID：13413648
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:22:13.233
> 
> 标签：php, row, echo

编辑：对不起，我不清楚，这次我试着解释一下。

我在一个名为 tMenu 的数据库表中有这些数据：

**id page_nl 文本**
1 index_1 index1_text
2 index_2 index2_text
3 index_3 index3_text

这些是我网站上的 3 个页面，在本例中称为 index_1、index_2 和 index_3。我已经编写了这样一种方式，即每页都显示 index1_text。

我现在想要的是在菜单中显示 page_nl。我现在的代码是：

```
$qh = mysql_query('SELECT id, page_nl FROM tMenu ORDER BY id');
$row = mysql_fetch_array($qh);
$id = 'id';

<a href="index_1.php"><? echo $row['page_nl']; $id=="1" ;?></a>
<a href="index_2.php"><? echo $row['page_nl']; $id=="2" ;?></a>
<a href="index_3.php"><? echo $row['page_nl'];?></a> 
```

现在它只显示来自 id 1 的 page_nl，但我希望下一个链接显示来自 id 2 的 page_nl。我希望我的问题现在更清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:27:17.817

您的问题不是很清楚-您是否要求这样的东西

```
$sql = "select * from yourtable where id = 1";
$result = mysql_query($sql);
//I am assuming there are more than 1 rows for ID 1
while($row = mysql_fetch_assoc($result)) { 
echo $row['page_nl'];
} 
```

或者 =============================

```
$sql = "select * from yourtable"; //Select All
$result = mysql_query($sql);
while($row = mysql_fetch_assoc($result)) { 
    if($row['id'] == 1) 
    {
         echo $row['page_nl'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:27:54.587

假设您的意思是数据库表，您需要一个例程来连接到数据库然后获取信息：

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "databasename"); // database name

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * FROM table_name"; // put table name here
$result = $mysqli->query($query);

/* numeric array */

/* associative array */
$row = $result->fetch_array(MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["id"], $row["page_nl"]);

/* free result set */
$result->free();

/* close connection */
$mysqli->close();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:24:53.983

您需要使用`foreach($var as $key =>$value)`循环

# symfony - jw player 6 使用 Symfony 找不到 jwplayer.flash.swf

> ID：13413649
> 
> 赞同：3
> 
> 时间：2012-11-16T09:22:17.493
> 
> 标签：symfony, jwplayer

我开始使用 JW Player Free 5.9 开发我的网络电视。

我使用 Symfony2 作为使用动态路由的 php 框架，现在我必须下载播放器的第 6 版。

当我加载页面时，播放器不起作用（我还更改了包含播放器的方式，如快速入门指南中所述），因为它搜索文件 jwplayer.flash.swf

```
www.mywebsite/category/product/jwplayer.flash.swf 
```

而不是在

```
www.mywebsite/jwplayerPro/jwplayer.flash.swf 
```

我知道问题出在 symfony 的路由机制上，但是我能告诉玩家 jwplayer.flash.swf 文件在哪里，就像在第 5 版中一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:58:23.367

使用参数“base”来配置您的 swf 文件。

```
<script type="text/javascript">
    jwplayer("flash_video").setup({
      base: "<?php echo $this->config->item('base_url'); ?>jwplayer/",
      file: "<?php echo video; ?>",
      height: 234,
      width: 362,
   });
</script> 
```

# objective-c - 如何将自定义背景图像设置为标签栏？

> ID：13413651
> 
> 赞同：0
> 
> 时间：2012-11-16T09:22:22.877
> 
> 标签：objective-c, rubymotion

我正在编写一个 Rubymotion 应用程序，我想自定义 TabBar。在 NSScreencasts.com 上，他们解释了如何在 Objective-C 中执行此操作，但我如何将以下代码转换为 Ruby？

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        [self customize];        
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self customize];
    }
    return self;
}

- (void)customize {
    UIImage *tabbarBg = [UIImage imageNamed:@"tabbar-background.png"];
    UIImage *tabBarSelected = [UIImage imageNamed:@"tabbar-background-pressed.png"];
    [self setBackgroundImage:tabbarBg];
    [self setSelectionIndicatorImage:tabBarSelected];
}

@end 
```

*这是我的尝试：*

```
class CustomTabbar < UITabBarController
  def init
    super
    customize
    self
  end

  def customize
    tabbarBg = UIImage.imageNamed('tabbar.jpeg')
    self.setBackgroundImage = tabbarBg
  end
end 
```

*但是，如果我运行它，我会收到此错误：*

```
Terminating app due to uncaught exception 'NoMethodError', reason: 'custom_tabbar.rb:5:in `init': undefined method `setBackgroundImage=' for #<CustomTabbar:0x8e31a70> (NoMethodError) 
```

**更新**

*这是我的 app_delete 文件：*

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    first_controller = FirstController.alloc.init
    second_controller = SecondController.alloc.init

    tabbar_controller = CustomTabbar.alloc.init
    tabbar_controller.viewControllers = [first_controller, second_controller]

    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)
    @window.rootViewController = tabbar_controller
    @window.makeKeyAndVisible
    true
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:42:52.927

根据我们的“聊天”，在我看来，您对视图和控制器的正确层次结构感到非常困惑。控制器是拥有视图的对象，但控制器没有任何视觉属性。视图具有视觉效果（如背景图像）。因此，例如，当您有一个标签栏时，您实际上有： 1) TabBarController 2) TabBar（视图）。

现在，TabBar 是一个视图，它有一个名为“backgroundImage”的属性，您可以通过它更改背景。当然，TabBarController 没有这样的东西，但它有一个“内部”控制器列表。

让我向您展示一些您想要的代码。它在 Obj-C 中，但将其重写为 Ruby 应该很简单。我在 AppDelegate 的 didFinishLaunchingWithOptions 方法中有这个：

```
UITabBarController *tbc = [[UITabBarController alloc] init];

UIViewController *v1 = [[UIViewController alloc] init];
UIViewController *v2 = [[UIViewController alloc] init];

tbc.viewControllers = @[v1, v2];
tbc.tabBar.backgroundImage = [UIImage imageNamed:@"a.png"];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window.rootViewController = tbc;
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

请注意，TabBarController 有一个属性“viewControllers”——这是一个内部控制器列表。它还有一个属性“tabBar”，它是对视图 UITabBar 的引用。我访问它并设置背景图像。

# ios - 与 Core Data 同步的一种方式

> ID：13413656
> 
> 赞同：0
> 
> 时间：2012-11-16T09:22:36.387
> 
> 标签：ios, core-data, sync

我即将构建一个仅限内部的 iOS 应用程序来存储简单的业务数据。数据存储将仅包含一个实体，每天一个条目。首先将有大约两年的数据（约 750 个条目）。

我想将应用程序设置为仅进行单向同步。即只有一个人可以输入数据，但其他人可以读取它。iCloud 已退出，因为它仅适用于单个用户帐户。

是否有一种轻量级的方法可以将此数据存储从单个写入用户同步到其他读取用户？对于这种情况，设置一个完整的同步系统似乎是多余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:06:18.443

您可以使用[Parse.com](http://www.parse.com)或[Simperium](http://www.simperium.com)等在线后端之一，而不是 iCloud 。它们将允许您使用数据库共享数据并提供用户帐户、身份验证等。如果您想在本地运行服务器，您可以调查[DataKit](https://github.com/eaigner/DataKit/)。

# javascript - jquery在有序堆栈中添加非dom元素（in-dom元素）

> ID：13413658
> 
> 赞同：2
> 
> 时间：2012-11-16T09:22:37.337
> 
> 标签：javascript, jquery

我有一个意想不到的问题。

**HTML**

```
<div id="div1" class="myDiv"></div>
<div id="div2" class="myDiv"></div>
<div id="div3" class="myDiv"></div>
<div id="div5" class="myDiv"></div>
<div id="div6" class="myDiv"></div> 
```

**JS**

```
$(function() {
    var $divs = $('.myDiv');
    // create new div not in tree
    var $div = $('<div/>').attr("id","div4").addClass('myDiv');
    // insert #div4 in right position. Only in stack, not in dom tree.
    $divs = $divs.slice(0,3).add($div).add($divs.slice(3));

    console.log($divs);
}); 
```

**输出**

> [div#div1.myDiv, div#div2.myDiv, div#div3.myDiv, div#div5.myDiv, div#div6.myDiv, *div#div4.myDiv* ]

**警告：我不想将它插入到 dom 树中（例如`$div.appendBefore($divs[3])`），我只想将它附加到我的堆栈`$divs`中。**

我认为这个堆栈是一个有序列表。因此，我的目标是动态创建 a`#div4`并将其插入 `$divs`堆栈而不将其插入 DOM 树中。插入有效，但 jquery 似乎忽略了给定的顺序。

对于这个问题，我还有其他解决方案（即在 dom 中附加，但不显示），好的.. 但是：

**我的问题是：为什么？**这是一些缓存优化的错误，还是记录在案的功能？

我也试过：

```
var $newDivs = $();
$divs.each(function(i,e) {
    if(i==3) 
        $newDivs = $newDivs.add($div);
    $newDivs = $newDivs.add(e);
});
console.log($newDivs); 
```

但输出是一样的。

编辑：只是为了完整性：这只是对复杂代码的快速破解。我知道目的不干净

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:41:52.470

这不是 jQuery 对象的目的。保持你的数据结构正确；我不确定“堆栈”的概念是如何出现的。使用常规的内置 JS 数组（保持项目有序）：

```
$(function() {
    // make an array of existing divs
    var divs = $('.myDiv').toArray();

    // create new div
    var newDiv = $('<div/>').attr("id","div4").addClass('myDiv').get(0);

    // insert newDiv at index 4 in array
    divs.splice(4, 0, newDiv);

    // Rejoice.
    console.log(divs);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T09:47:04.340

nbrooks 答案的另一种变体

```
// get regular array of matched DOM nodes
var divs = $('.myDiv').toArray(); 
// require you to find out on which position you need to put your new div
divs.splice(2, 0, $('<div/>').attr("id","div4").addClass('myDiv').get(0))
// again wrap in jQuery to get what you need
divs = $(divs); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T09:35:06.137

*从 jQuery 1.4 开始，来自 .add() 的结果将始终按文档顺序返回（而不是简单的串联）。*

这是记录在案的行为，它不是一个正常的数组。

[http://api.jquery.com/add/](http://api.jquery.com/add/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T09:43:20.330

真的似乎不是 jquery 行为，而是更多 javascript 浏览器的本机代码实现，因为我得到这些结果，具体取决于使用的浏览器（windows7）：

*   **Firefox 和IE9**：1、2、3、5、6、4
***   野生动物园：**1,2,3,4,5,6***   铬：**4** ,1,2,3,5,6**

# rule-engine - 自定义规则引擎中的 esper

> ID：13413666
> 
> 赞同：3
> 
> 时间：2012-11-16T09:23:04.977
> 
> 标签：rule-engine, esper, complex-event-processing

我需要使用 ESPER实现一个**规则引擎**
为此我必须准备查询规则（如果有任何其他优化方式，请提出建议）。规则在运行时必须是**可声明的和可修改的**。
此外，我将不得不创建一个 UI 来定义规则。
**请建议任何更好和优化的方法。**
一个例子：
![例子](../Images/1668494aadf8e5f65342b4fe22bbe213.png)
可以在运行时定义更多的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T02:37:49.087

可以参考的上下文非常少，但一个简单的解决方案是简单地保持每个订单和每个价格的最新状态，并将每个规则作为引擎订阅来实现。您的引擎可以使用以下 EPL 语句进行初始化：

```
/* Minimal schema-s */
create schema LiveOrder (user string, orderid string, quantity, double, symbol string);
create schema LivePrice (symbol string, price double);

/* create two windows to store the latest order by orderid, and latest price by symbol */
create window LiveOrders.std:unique(orderid) as select * from LiveOrder;
create window LivePrices.std:unique(symbol) as select * from LivePrice;

/* insert data into the windows when data arrives */
insert into LiveOrders select * from LiveOrder;
insert into LivePrices select * from LivePrice; 
```

此时，您将存储所有订单和价格，因此可以轻松地将它们“加入”不同的规则。如果用户在下单和订购数量 > 100 时需要警报，您只需创建以下 EPL 语句并将一个监听器附加到它会发送警报：

```
select * from LiveOrders where user='U1' and quantity > 100; 
```

要在任何交易品种的订单金额超过 10000 时创建警报，您对这个 EPL 执行相同操作：

```
select LiveOrders.symbol as symbol, LiveOrders.quantity*LivePrices as total from LiveOrders
inner join LivePrices on LiveOrders.symbol=LivePrices.symbol
where LiveOrders.quantity*LivePrices > 10000 
```

每当不再需要警报时，您只需删除侦听器并销毁 EPL 语句。

# f# - 在 F# 中添加额外的方法作为类型扩展

> ID：13413678
> 
> 赞同：5
> 
> 时间：2012-11-16T09:24:14.213
> 
> 标签：f#, extension-methods

我有一个已经实现`.Item`方法的 .Net 库，例如

```
namespace Library2
type A() = 
    member m.Item with get(a: string) =   printfn "get a string"
    member m.Item with get(a: int) =   printfn "simple slice" 
```

在使用这个库的代码中，我想添加一个额外的同名方法（因此它是`optional extensions`）：

```
#r @"Library2.dll"
open Library2
type A with
    member m.Item with get(a: bool) =
        printfn "get a bool" 
```

以下示例的最后一行无法编译：

```
let a = new A()
a.["good"]    
a.[10]
a.[true] 
```

[F# 文档](http://msdn.microsoft.com/en-us/library/dd233211.aspx)说：

> 扩展方法不能是虚拟或抽象方法。它们可以重载其他同名方法，但在调用不明确的情况下，编译器会优先使用非扩展方法。

这意味着我不能`.ToString/.GetHashCode`使用相同的类型签名进行扩展，但在这里我使用了不同的类型签名。为什么不能扩展新方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:54:22.993

我认为，问题是由于扩展方法实现如下（C#）引起的：

```
public static class MyModule
{
    public static void Item(this A a, bool b)
    {
        // whatever
    }
} 
```

编译器正在寻找`.Item(...)`方法，在原始`Library2.A`类中找到它，并且无法搜索任何扩展方法。

请注意，如果*所有* `.Item(...)`重载都是扩展方法，则一切正常：

```
module Library2 =
    type A() = 
        member m.dummy = ()

open Library2
type A with
    member m.Item with get(a: string) =   printfn "get a string"
    member m.Item with get(a: int) =   printfn "simple slice"
    member m.Item with get(a: bool) = printfn "get a bool" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:32:55.623

这似乎是编译器中的一个错误。扩展方法就在那里，并且可以在您放弃索引器附带的漂亮语法糖时调用，即：

图书馆：

```
namespace TestLibrary

type A() = 
    member m.Item with get(a: string) = "string"
    member m.Item with get(a: int)    = "int" 
```

主要的：

```
open TestLibrary

type A with
    member m.Item with get(a: bool) = "bool"

[<EntryPoint>]
let main argv = 
    let a = new A()
    printfn "%s" (a.get_Item "a")
    printfn "%s" (a.get_Item 1)
    printfn "%s" (a.get_Item true)
    System.Console.ReadLine() |> ignore
    0 
```

我的第一个直觉是索引器不能`unit`作为返回类型，但这并不是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-20T05:20:19.883

奇怪，我在 LinqPad 中创建了一个类似的东西，它按你的预期工作。

```
module ModuleA =

    type A() = 
        member m.Item with get(a: string) = printfn "get a string"
        member m.Item with get(a: int) = printfn "simple slice"

module ModuleB = 
    open ModuleA

    type A with
        member m.Item with get(a: bool) = printfn "get a bool"

open ModuleB

let a = new ModuleA.A()
a.["good"]    
a.[10]
a.[true]

// get a string
// simple slice
// get a bool 
```

# php - 在 php 邮件功能中包含 cc

> ID：13413684
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:24:29.457
> 
> 标签：php, html-email, email-formats

当我尝试使用 php 邮件功能插入 cc 时，我只收到带有 HTML 部分的消息。

我正在使用以下代码

```
 $headers  = "From:someone@gmail.com\r\n";
      $headers .= "CC:test@gmail.com\r\n"; 
  $headers .= "Content-type: text/html\r\n"; 
  $to ="$x_email";
  $subject ="Your Order Confirmation";
      $bodyadmin=$messageadmin;
  $sentmail=mail($to, $subject, $bodyadmin, $headers); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:28:45.380

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:28:08.137

```
$headers = "From: $from_email\r\nReply-To: $from_email";
$headers .= 'Cc: test@test.com\r\n';
$headers .= "Content-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
```

# c++ - 访问向量的通用迭代器

> ID：13413688
> 
> 赞同：5
> 
> 时间：2012-11-16T09:24:41.383
> 
> 标签：c++, iterator, stdvector

我想知道是否可以使用通用迭代器来访问向量中的元素。我有不同的向量，但只有一个函数来显示元素。如果我可以拥有一个通用迭代器，那么我的方法就可以顺利进行。可以的话请指教。

Point2,Point3,Line2,Line3 是 4 个不同的类。该方法接受我在另一种方法中创建的矢量对象。

```
template <typename VecObject>
void Display(VecObject v) {

    if (filterCriteria == "Point2") {
        vector<Point2>::iterator it;
    } else if (filterCriteria == "Point3") {

    } else if (filterCriteria == "Line2") {

    } else if (filterCriteria == "Line3") {

    }

    for ( it = v.begin(); it!=v.end(); ++it) {
        cout << *it << endl;
    }
} 
```

这是我以前做过的事情，它可以找到。我现在需要使用迭代器来实现

```
//for (int i = 0; i < v.size(); i++) {
// cout << v[i];
// } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:31:31.023

您可以通过and访问 a`vector`的迭代器类型，因此无需切换：`iterator``const_iterator`

```
template <typename VecObject>
void Display(const VecObject& v) {
    typename VecObject::const_iterator it;
    for ( it = v.begin(); it!=v.end(); ++it) {
        cout << *it << endl;
    }
} 
```

请注意，我将签名更改为采用 const 引用而不是值。使用原始签名，每次调用函数时都将不必要地复制向量。

或者，您可以实现该函数以采用两个迭代器：

```
template <typename Iterator>
void Display(Iterator first, Iterator last) {
    for (Iterator it = first; it!=last; ++it) {
        cout << *it << endl;
    }
} 
```

并这样称呼它：

```
Display(v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T09:31:57.247

```
template<typename VectorObject>
void Display(VecObject v) {
   typename VectorObject::const_iterator it = v.begin();
   for (; it!=v.end(); ++it) {
      cout << *it << endl;
   }
} 
```

假设您`VectorObject`实现了迭代器，您可以直接访问它的`iterator`类型。

用法：

```
int main()
{
  std::vector<int> intv(2, 5);
  std::vector<float> fv(2, 10);
  Display(intv);
  Display(fv);
  return 0;
} 
```

# winapi - 将 StdPicture 透明度颜色转换为白色

> ID：13413690
> 
> 赞同：0
> 
> 时间：2012-11-16T09:24:43.257
> 
> 标签：winapi, vb6, bitmap, png, bitblt

我正在使用[CodeJock ImageManager 组件](http://www.codejock.com//products/commandbars/tour_52.asp?platform=com)来保存各种图像。我想将这些图像之一放入 FlexGrid 单元格。

我拥有的图像是 Png 格式并且具有透明背景，因此当我将图像加载到网格中时，如下所示：

```
Grid.Cell(flexcpPicture, 123, 4) = _
ImageManagerControl.Icons.GetImage(ImageNum, 16).CreatePicture(xtpImageNormal) 
```

原始图像中透明的背景现在是黑色的：（ ![在此处输入图像描述](../Images/2ce19f2749ee9dc82ab19d4995b70de1.png)如果我使用上述方法将图像加载到 PictureBox 中，也会发生同样的情况）

根据文档`CreatePicture`返回一个[StdPicture](http://msdn.microsoft.com/en-us/library/aa267231%28v=vs.60%29.aspx)对象，有什么方法可以转换这个图像（也许使用 BitBlt），以便黑色是白色的？我不确定这是否可能？

我只需要使用大约三个图像来执行此操作，因此如果我必须先将它们加载到 ImageList 或其他东西中，那就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:03:24.050

我不确定这是否有帮助，但我一直在玩 PictureBox。我在一个表单上放了两个图片框，放了一个 bmp 文件（这只适用于 bmp 文件，所以它可能对你没有帮助），然后这样做：

```
Picture2.PaintPicture Picture1.Picture, 0, 0, opcode:=vbNotSrcCopy 
```

这成功地反转了位图。以下是 RasterOp 常量： http: [//msdn.microsoft.com/en-us/library/aa243035 (v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa243035(v=vs.60).aspx)

# java - No need to close the window, If I press the cancel button in confirmation box?

> ID：13413693
> 
> 赞同：0
> 
> 时间：2012-11-16T09:24:53.040
> 
> 标签：java, javascript, ajax, jsp, servlets

In my chat application,I need an confirmation box to logout when closing the window.

Ok button in confirmation box works fine.but,

If i press, cancel in the confirmation box,I dont need to close the browser window..

In my case if i press cancel ,My browser window was closed...Please help me...

```
window.onunload = function () {

    var confirmation = confirm("Are you Sur want to logout the session ?");
    if (confirmation == true)
      {
        if((sessionId != null)&&(sessionId!="null")&& (sessionId != ""))
            logout();
     // confirmation = "You pressed OK!";
      }
    else
      {
     // confirmation = "You pressed Cancel!";

      }
}; 
```

In logout code,

```
function logout(){
    //alert("<---------->"+userId+";"+secureKey+";"+name);
    clearInterval(timer);
    document.getElementById("button3").style.display = "none";
    document.getElementById("message").innerText = "";
    try
    {
        xmlhttp.onreadystatechange=function()
        {
            //alert("Status : "+xmlhttp.status+"\nreadyState : "+xmlhttp.readyState);
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                //alert("<---------->"+userId+";"+secureKey+";"+name);
                //alert(xmlhttp.responseText.toString());
            }
        };
        xmlhttp.open("POST","LogoutAction?&userId="+userId+"&secureKey="+secureKey+"&nickname="+name,true);
        xmlhttp.send();
    }
    catch(err)
    {
        alert(err.description);
    }
} 
```

In LogoutAction Servlet,

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        secureKey = request.getParameter("secureKey");
        userId = request.getParameter("userId");
        //nickname = request.getParameter(nickname);
        protocol = ApplicationInfo.flexProtocol;

        logout = new Logout();
        logout.requestLogout(secureKey, userId, null, protocol);
        //out.println(secureKey+";"+userId+";"+nickname);
    } 
```

In java code,

```
public class Logout {
public void requestLogout(String secureKey, String userId, String nickname, FlexChatProtocol protocol) {

        RequestLogout logout = null;

        Message resp  = null;
        logout = RequestLogout.create();
        logout.setSecureKey(secureKey);
        logout.setUserId(userId);
            try {

            resp = protocol.request(logout);
            System.out.println(resp);

        } catch (ProtocolException e) {

        } catch (IllegalStateException e) {

        } 
    }
} 
```

Thanks in advance..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:25:38.437

you should use onbeforeunload.. like this:

```
window.onbeforeunload = function () {

var confirmation = confirm("Are you Sur want to logout the session ?");
if (confirmation == true)
  {
    if((sessionId != null)&&(sessionId!="null")&& (sessionId != ""))
        logout();
 // confirmation = "You pressed OK!";
  }
else
  {
 // confirmation = "You pressed Cancel!";

  } 
```

};

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:27:54.967

You can't prevent a user closing a window. This is actually a feature of browsers to prevent malicious sites keeping a window open. Think of what would happen with pop-up advertisements if you couldn't close the window.

Unload handlers can prevent the user navigating away, but not closing the window.

# sql-server - 多于 2 个表上的多个 JOIN

> ID：13413694
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:24:54.403
> 
> 标签：sql-server, sql-server-2008-r2

我有 3 张桌子：

```
Cars
-----------------
CarBrand | Amount
 Honda   |  0
 Mitsu   |  5
 Ford    |  7

CarParts
--------------------
CarPartID | CarBrand
 001      |  Honda
 002      |  Mitsu
 003      |  Ford
 004      |  Ford
 005      |  Ford

Drivers
-----------------------
DriverName  |  CarBrand
 Tom        |  Ford
 John       |  Mitsu
 Mark       |  Mitsu 
```

我需要以下数据：

汽车品牌 | 零件数量 | DriversAmount

是否可以？完全加入后的计数在那里不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:42:53.353

这里有几种方法可以做你想做的事：[SQLFiddle](http://sqlfiddle.com/#!6/1de40/2)

```
select c.CarBrand, j.parts, k.drivers
from
   Cars c
cross apply
(
    select count(*)
    from CarParts cp
    where cp.CarBrand = c.CarBrand
) j (parts)
cross apply
(
    select count(*)
    from Drivers d
    where d.CarBrand = c.CarBrand
) k (drivers); 
```

或者

```
select
  c.CarBrand,
  (select count(*) from CarParts cp where cp.CarBrand = c.CarBrand) as Parts,
  (select count(*) from Drivers d where d.CarBrand = c.CarBrand) as Drivers
from
  Cars C 
```

你可以吗？

# .net - NullReferenceException：.NET 结构中的线程？

> ID：13413700
> 
> 赞同：1
> 
> 时间：2012-11-16T09:25:16.550
> 
> 标签：.net, vb.net, multithreading, structure, dispatcher

每当我调用以下的构造函数`Structure`（*参数设置为* `True`）时，我都会得到一个 NullReferenceException：

```
Imports System.Threading
Imports System.Windows.Threading

Public Structure Test

  Private MyDispatcher As Dispatcher
  Private MyResetEvent As ManualResetEvent

  Public Sub New(ByVal newThread As Boolean)
    If newThread Then
      MyResetEvent = New ManualResetEvent(False)
      Dim thread As New Thread(AddressOf Start)
      thread.Start()
      MyResetEvent .WaitOne()

      ' NullReferenceException below:
      MyDispatcher.BeginInvoke(New Action(AddressOf DoSomething))
    End If
  End Sub

  Private Sub Start()
    MyDispatcher = Dispatcher.CurrentDispatcher
    MyResetEvent.Set()
    Dispatcher.Run()
  End Sub

  Private Sub DoSomething()
  End Sub
End Structure 
```

`MyDispatcher`is `Nothing`，这会导致 NullReferenceException。但是使用 a`Class`而不是 a`Structure`就可以了。为什么？

**编辑**：什么解决方法是可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:34:28.303

问题是您使用`AddressOf`. 委托是使用`Object`引用构造的（例如实例方法）。该结构必然在作为 a 传递时`Object`被装箱，并且在被调用之前将被拆箱`Start`。方法突变的正是您的结构的第二个未装箱*副本。*`Start`

您的原始代码仍然使用未装箱的原始结构，不会看到任何修改。

# xml - 使用 xslt 从 SOAP Envelope 获取属性

> ID：13413702
> 
> 赞同：0
> 
> 时间：2012-11-16T09:25:22.083
> 
> 标签：xml, xslt, soap

您好，我有以下 XML

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" ... someID="ID123">
    <SOAP-ENV:Header xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><endpoints>
... 
```

假设出于某种奇怪的原因，我在 SOAP-ENV:Envelope 根标记中有这个属性“someID”。是否可以使用 XSLT 1.0 读取该属性的内容（我想要“ID123”）？如果是，如何？

亲切的问候阿列克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:37:13.540

也许我遗漏了一些东西，但这应该很简单。要获取 SOAP:Envelope 元素上的属性值，您可以这样做

```
<xsl:value-of select="/SOAP-ENV:Envelope/@someID" /> 
```

不过，您需要确保在 XSLT 中定义了**SOAP-ENV名称空间前缀。**

如果你想让它更通用，而不用担心根元素（或命名空间）是什么，你也可以这样做

```
<xsl:value-of select="/*/@someID" /> 
```

如果你已经定位在根元素上，它会变得更简单......

```
<xsl:template match="/*">
   <xsl:value-of select="@someID" />
</xsl:template> 
```

# c# - 中继器控件未使用 ItemCommand 更新

> ID：13413704
> 
> 赞同：0
> 
> 时间：2012-11-16T09:25:28.543
> 
> 标签：c#, asp.net, repeater

我有一个`Repeater`控件，现在我只需要在单击相关按钮时更改文本框中的文本。
然而，这并没有发生。

到目前为止，这是我的代码：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <div>
                    <asp:Repeater ID="rptPdfList" runat="server" OnItemCommand="rptPdfList_ItemCommand">
                        <HeaderTemplate>
                            <table>
                                <tr>
                                    <td>File Name</td>
                                    <td></td>
                                </tr>
                        </HeaderTemplate>
                        <ItemTemplate>
                            <tr>
                                <td>
                                    <asp:Label ID="lblName" runat="server" Text=<%#Eval("FileName") %>></asp:Label>
                                </td>
                                <td>
                                    <asp:Button ID="btnLoad" runat="server" Text="Load" CommandName="LoadDoc"/>
                                </td>
                            </tr>
                        </ItemTemplate>
                        <FooterTemplate>
                            </table>
                        </FooterTemplate>
                    </asp:Repeater>
                    <br />
                    <asp:Button ID="btnLoad" runat="server" Text="Load" OnClick="btnLoad_Click" /><br />
                    <iframe runat="server" id="pdfHolder"></iframe>
                    <br />
                    <asp:Label ID="lblTest" runat="server" Text="Label"></asp:Label>
                </div>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

代码背后：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        GetFiles();
    }

    private void GetFiles()
    {
        rptPdfList.DataSource = Pdf();
        rptPdfList.DataBind();
    }

    protected void rptPdfList_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem) return;

        Label lblName = (Label)e.Item.FindControl("lblName");

        switch (e.CommandName)
        {
            case "LoadDoc":
                //xpdfHolder.Attributes.Add("src", "PDF/" + lblName.Text);
                lblTest.Text = "test";
                lblName.Text = "oops";
                break;
        }
    }

    public static List<PdfList> Pdf()
    {
        string pdfDir = HostingEnvironment.MapPath("~") + @"PDF\";

        DirectoryInfo directory = new DirectoryInfo(pdfDir);
        FileInfo[] pdfFiles = directory.GetFiles("*.pdf", SearchOption.AllDirectories);

        List<PdfList> pdfLists = pdfFiles.Select(pdfFile => new PdfList
            {
                FileName = pdfFile.Name
            }).ToList();

        return pdfLists;
    }

}
public class PdfList
{
    public string FileName { get; set; }
} 
```

谁能看到我哪里出错了？

**编辑，添加所有代码**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:10:19.410

我正在像这样绑定你的中继器，它对我来说很好，只需将你的绑定功能放在

```
 if (!Page.IsPostBack) 
```

健康）状况 ：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        using (DataClassesDataContext dc = new DataClassesDataContext())
        {
            var v = (from s in dc.t_employees select s).ToList();
            rptPdfList.DataSource = v;
            rptPdfList.DataBind();
        }
    }
}

protected void rptPdfList_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem) return;

    Label lblName = (Label)e.Item.FindControl("lblName");

    switch (e.CommandName)
    {
        case "LoadDoc":
            //xpdfHolder.Attributes.Add("src", "PDF/" + lblName.Text);
            lblTest.Text = "test";
            lblName.Text = "oops";
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:13:34.203

改变这个：

```
protected void Page_Load(object sender, EventArgs e)
    {
        GetFiles();
    } 
```

对此：

```
protected void Page_Load(object sender, EventArgs e)
    {
if (!IsPostBack)
        GetFiles();
    } 
```

`GetFiles()`您每次都在调用，所以它总是返回到初始状态。

# google-app-engine - XMPP 取消订阅 - 删除 Google App Engine 上的好友

> ID：13413706
> 
> 赞同：1
> 
> 时间：2012-11-16T09:25:33.923
> 
> 标签：google-app-engine

我的机器人使用 XMPP 服务定期发送添加 xmpp 请求。

```
// Get XMPP service
    XMPPService xmpp = XMPPServiceFactory.getXMPPService();

    // Send Invitation
    xmpp.sendInvitation(toJid, fromJid); 
```

在一段时间内，名册变得非常庞大。

我没有看到从名册中取消订阅用户的价值。

有没有办法从名册中删除用户？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:23:08.097

如果我正确理解你的问题，很遗憾答案是否定的。我相信您要问的是“我可以取消先前授予的订阅请求吗？”。

答案（目前）是我们不支持。不过，您可能想为[这个问题](https://code.google.com/p/googleappengine/issues/detail?id=7953)加注星标。

# c# - 如何从谷歌翻译下载文本到语音数据？

> ID：13413711
> 
> 赞同：3
> 
> 时间：2012-11-16T09:25:59.107
> 
> 标签：c#, google-translate, text-to-speech

我正在尝试创建一个说希腊语的应用程序。但是由于微软不支持将希腊语作为一种口语，而且我关于如何创建自己的词典的指南的问题（[这里](https://stackoverflow.com/questions/13102319/i-need-help-creating-a-lexicon-for-speechsynthesizer-a-template-of-some-kind-so)）我问这个：

如何下载包含我在运行时发送给谷歌翻译并使用 C# 播放的文本的 mp3（或只是数据无关紧要）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:03:39.630

只需使用此链接下载 MP3：

```
http://translate.google.com/translate_tts?tl=el&q=%22hello%22 
```

编辑：请注意，某些浏览器（例如 Firefox）将 %22 替换为 " 并且链接不起作用，因此您需要复制它并且无法单击它！

如何下载文件： [http ://www.csharp-examples.net/download-files/](http://www.csharp-examples.net/download-files/)

[http://msdn.microsoft.com/en-us/library/ez801hhe.aspx](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)

如何播放 MP3：http: [//msdn.microsoft.com/en-us/library/4y171b18.aspx](http://msdn.microsoft.com/en-us/library/4y171b18.aspx)

```
using System.Media;

String strTextYouWantAsMp3 = "Hello";
WebClient webClient = new WebClient();
webClient.DownloadFile("http://translate.google.com/translate_tts?tl=el&q=%22" + strTextYouWantAsMp3 + "%22", @"c:\audio.mp3");

SoundPlayer simpleSound = new SoundPlayer(@"c:\audio.mp3");
simpleSound.Play(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-28T14:05:35.013

此链接现已损坏，您可以在此处参考 Chris Cirefice 的答案： [Google Text-To-Speech API](https://stackoverflow.com/questions/9893175/google-text-to-speech-api)

正如建议的那样，您需要针对以下 URL **[http://translate.google.com/translate_tts?tl=en&q=Hello%20World&client=t](http://translate.google.com/translate_tts?tl=en&q=Hello%20World&client=t)**提出获取请求， 其中`q={your word you want to translate}`和`tl={your language}`

# python - 奇怪的数组索引语法

> ID：13413712
> 
> 赞同：-3
> 
> 时间：2012-11-16T09:26:06.347
> 
> 标签：python, arrays, syntax, char

我必须将脚本翻译成 php，但我似乎无法理解这一行的作用。

```
text = re.split(stop_char, (row[0]+". "+row[1][0:NB_CARAC_MSG]).lower()) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:29:47.393

`row`是某种列表/数组类型。`row[1]`可能是一个字符串。

`0:NB_CARAC_MSG`表示“从 0 到`NB_CARAC_MSG-1`（包括两者）的子字符串。

# sql - 在 generate_series() 上加入计数查询并将 Null 值检索为“0”

> ID：13413715
> 
> 赞同：13
> 
> 时间：2012-11-16T09:26:22.880
> 
> 标签：sql, postgresql, join, postgresql-9.1, generate-series

我想使用每月计算 ID `generate_series()`。此查询适用于 PostgreSQL 9.1：

```
SELECT (to_char(serie,'yyyy-mm')) AS year, sum(amount)::int AS eintraege FROM (
    SELECT  
       COUNT(mytable.id) as amount,   
       generate_series::date as serie   
       FROM mytable  

    RIGHT JOIN generate_series(     
       (SELECT min(date_from) FROM mytable)::date,   
       (SELECT max(date_from) FROM mytable)::date,  
       interval '1 day') ON generate_series = date(date_from)  
       WHERE version = 1   
       GROUP BY generate_series       
       ) AS foo
GROUP BY Year   
ORDER BY Year ASC; 
```

这是我的输出：

```
"2006-12" | 4  
"2007-02" | 1  
"2007-03" | 1 
```

但我想要得到的是这个输出（一月份的'0'值）：

```
"2006-12" | 4  
"2007-01" | 0  
"2007-02" | 1  
"2007-03" | 1 
```

`id`尽管如此，应该列出没有的月份。
任何想法如何解决这个问题？

样本数据：

```
drop table if exists mytable;
create table mytable(id bigint, version smallint, date_from timestamp);
insert into mytable(id, version, date_from) values
(4084036, 1, '2006-12-22 22:46:35'),
(4084938, 1, '2006-12-23 16:19:13'),
(4084938, 2, '2006-12-23 16:20:23'),
(4084939, 1, '2006-12-23 16:29:14'),
(4084954, 1, '2006-12-23 16:28:28'),
(4250653, 1, '2007-02-12 21:58:53'),
(4250657, 1, '2007-03-12 21:58:53')
; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T10:31:23.363

解开，简化和固定，它可能看起来像这样：

```
SELECT to_char(s.tag,'yyyy-mm') AS monat
     , count(t.id) AS eintraege
FROM  (
   SELECT generate_series(min(date_from)::date
                        , max(date_from)::date
                        , interval '1 day'
          )::date AS tag
   FROM   mytable t
   ) s
LEFT   JOIN mytable t ON t.date_from::date = s.tag AND t.version = 1   
GROUP  BY 1
ORDER  BY 1; 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=26fa8baaa6552167eca50cb02049d33c)*

在所有噪音、误导性标识符和非常规格式中，实际问题隐藏在这里：

```
WHERE version = 1 
```

您正确使用了[`RIGHT [OUTER] JOIN`](https://www.postgresql.org/docs/current/queries-table-expressions.html#id-1.5.6.6.5.6.4.3.2.4.1.3.1.2). 但是添加一个`WHERE`需要现有行 from 的子句会有效地`mytable`将 the 转换`RIGHT [OUTER] JOIN`为 an `[INNER] JOIN`。

将该过滤器移动到`JOIN`条件中以使其工作。

我在做的时候简化了一些其他的事情。

### 更好，但

```
SELECT to_char(mon, 'yyyy-mm') AS monat
     , COALESCE(t.ct, 0) AS eintraege
FROM  (
   SELECT date_trunc('month', date_from)::date AS mon
        , count(*) AS ct
   FROM   mytable
   WHERE  version = 1     
   GROUP  BY 1
   ) t
RIGHT JOIN (
   SELECT generate_series(date_trunc('month', min(date_from))
                        , max(date_from)
                        , interval '1 mon')::date
   FROM   mytable
   ) m(mon) USING (mon)
ORDER  BY mon; 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=26fa8baaa6552167eca50cb02049d33c)*

先聚合后加入要便宜得多——每月加入一行而不是每天加入一行。

以value 为基础`GROUP BY`而不是 render更便宜。`ORDER BY``date``text`

`count(*)`比 ,快一点，而在*这个*查询中是`count(id)`等价的。

 *`generate_series()`基于`timestamp`而不是`date`. 看：

*   [在 PostgreSQL 中生成两个日期之间的时间序列](https://stackoverflow.com/questions/14113469/generating-time-series-between-two-dates-in-postgresql/46499873#46499873)*

# google-plus - 如何使用 Google Plus Social Graph 提出授权请求

> ID：13413716
> 
> 赞同：1
> 
> 时间：2012-11-16T09:26:25.767
> 
> 标签：google-plus, access-token

我正在开发与 Google Plus 通信的 PHP 应用程序。要获取有关圈子中的人的信息，我向此链接发送请求：https: [//plus.google.com/u/0/_/socialgraph/lookup/visible?o=%5Bnull ,null,%22GOOGLE_USER_ID%22%5D&rt= j](https://plus.google.com/u/0/_/socialgraph/lookup/visible?o=%5Bnull,null,%22GOOGLE_USER_ID%22%5D&rt=j)它会为我检索特定用户的圈子中的人员列表。

在我的应用程序中，我想检查我的朋友列表（圈子中的人）中的每个用户，如果他/她也有我在圈子中，这意味着我们是朋友。但是，如果某人已阻止公开列出圈子中的人，那么尽管他/她是我的朋友，但我会得到空数组作为响应。所以我想知道，如何使用此链接发送授权请求。例如如何包含访问令牌。

因为现在它只显示公共数据并且表现得就像我没有登录一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:03:42.600

使用：[https](https://developers.google.com/+/api/latest/people/list) ://developers.google.com/+/api/latest/people/list并要求用户登录，然后您将能够获得他们的同意并检索他们关注的人员列表。

# android - 在 Android 中启动第 3 方应用程序的安装

> ID：13413722
> 
> 赞同：1
> 
> 时间：2012-11-16T09:26:54.650
> 
> 标签：android, android-intent, google-play

如果 zxing 条码扫描器不可用，我希望提示我的应用用户安装它。这是我用来加载对话框并要求用户下载应用程序的代码，但它当前返回与“未找到活动”相关的错误：

显现：

```
<activity
    android:name=".FrontActivity"
    android:label="@string/title_activity_front"
    android:screenOrientation = "portrait" 
    android:theme="@style/NoTitleBar" >

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <intent-filter> 
        <action android:name="android.intent.action.VIEW" />  
        <category android:name="android.intent.category.DEFAULT" />  
    </intent-filter> 

</activity> 
```

爪哇：

```
public class FrontActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.front_activity);

        isScannerInstalled();
    }

    private void isScannerInstalled()
    {
        try
        {
            ApplicationInfo info = 
                getPackageManager().
                getApplicationInfo("com.google.zxing.client.android",0);
        } 

        catch (PackageManager.NameNotFoundException e)
        {
            AlertDialog.Builder alertDialogBuilder = 
                new AlertDialog.Builder(FrontActivity.this);

            alertDialogBuilder.setTitle("Warning");
            alertDialogBuilder.setMessage("Please install the Barcode Scanner.");
            alertDialogBuilder.setCancelable(false);

            alertDialogBuilder.setNeutralButton
            (
                "OK", 
                new DialogInterface.OnClickListener() 
                {
                    public void onClick(DialogInterface dialog, int whichButton) 
                    {
                          Uri uri = Uri.parse(
                          "market://search?q=pname:com.google.zxing.client.android"
                          );

                          startActivity(new Intent(Intent.ACTION_VIEW, uri));
                    }
                }
            );

            alertDialogBuilder.show();
        }
    }
} 
```

错误：

```
11-16 08:37:37.716: E/AndroidRuntime(12694): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://search?q=pname:com.google.zxing.client.android }
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.app.Activity.startActivityForResult(Activity.java:2817)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.app.Activity.startActivity(Activity.java:2923)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at test.app01.FrontActivity$1.onClick(FrontActivity.java:140)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.os.Looper.loop(Looper.java:123)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at java.lang.reflect.Method.invokeNative(Native Method)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at java.lang.reflect.Method.invoke(Method.java:521)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-16 08:37:37.716: E/AndroidRuntime(12694):    at dalvik.system.NativeStart.main(Native Method) 
```

谁能看到问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:31:50.533

试试这个

```
public void onClick(DialogInterface dialog, int whichButton) 
                    {
                          try 
                          {
                               startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+packageName)));
                              }
                         catch (android.content.ActivityNotFoundException err) 
                         {
                             startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id="+packageName)));
                             }
                    } 
```

并在设备上进行测试...因为模拟器不会有市场应用程序..

# uiactionsheet - 无法识别的选择器发送到实例 UIActionSheet

> ID：13413723
> 
> 赞同：1
> 
> 时间：2012-11-16T09:26:55.517
> 
> 标签：uiactionsheet

尝试显示 ActionSheet 时收到以下错误...

2012-11-16 04:07:03.878 MKS WebTech[814:c07] -[mksWorkOrderViewController _presentActionSheet:asPopoverFromBarButtonItem:orFromRect:inView:withPreferredArrowDirections:passthroughViews:backgroundStyle:animated:]: 无法识别的选择器发送到实例 0x75a5950

```
- (IBAction)ActionClick:(id)sender {

    popupSheet = [[UIActionSheet alloc] init];

    [popupSheet setDelegate:self];
    [popupSheet addButtonWithTitle:@"Contact List"];
    [popupSheet addButtonWithTitle:@"Zone Descriptions"];
    [popupSheet addButtonWithTitle:@"Zone Testing"];
    [popupSheet addButtonWithTitle:@"Panels"];
    [popupSheet addButtonWithTitle:@"Time Sheet"];
    [popupSheet addButtonWithTitle:@"Inventory"];
    [popupSheet addButtonWithTitle:@"Other Appt."];
    [popupSheet addButtonWithTitle:@"Alarm History"];
    [popupSheet addButtonWithTitle:@"Service History"];
    [popupSheet addButtonWithTitle:@"Complete"];
    [popupSheet addButtonWithTitle:@"Cancel"];
    [popupSheet setCancelButtonIndex:10];
    // Prepare your action sheet
    [popupSheet showFromBarButtonItem:bntAction animated:NO];

    [popupSheet release];
} 
```

错误发生“showFromBarButtonItem：bntAction”我也尝试使用发件人但结果相同

canPerformAction 也可以毫无问题地触发...

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:04:35.763

我曾经遇到过这个问题，情况不一样，但对我来说，这有效：

1.  转到界面生成器
2.  检查所有对象，对我来说问题是我将一个对象连接到一个后来删除的变量，所以它不存在。

结论：我已将一个对象连接到一个不存在的变量。

否则，代码看起来不错:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T20:54:27.893

对于将来遇到这种情况的任何其他人（就像我刚才所做的那样）：问题是 UIActionSheet 会在每个响应者链上调用 -canPerformAction:@selector(_presentActionSheet:asPopover... etc etc)。

因此，由于控制器错误地响应 YES，UIActionSheet 继续并尝试调用该方法，实现不存在，并且您遇到了错误。

正确的解决方法是重新实现您的 -canPerformAction:withSender: 以仅对您实际处理的事情返回 YES。

# url - NSURLRequest 知道 URL 类型是文件还是链接

> ID：13413726
> 
> 赞同：0
> 
> 时间：2012-11-16T09:27:01.093
> 
> 标签：url, types, nsurlrequest

我在我的应用程序中使用了 UIWebView 并想下载该文件。我已经提到了这个[SO question](https://stackoverflow.com/questions/7377565/how-to-download-files-from-uiwebview-and-open-again)

我想知道是否有办法知道 NSURLRequest 是普通链接还是下载文件的链接。

问候，尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T06:16:36.533

NSURL 有一个方法'isFileURL'

```
[request.URL isFileURL] 
```

# c# - 在悬停时定位元素 - WPF - C# - 动态数据显示

> ID：13413731
> 
> 赞同：2
> 
> 时间：2012-11-16T09:27:16.960
> 
> 标签：c#, wpf, dynamic-data-display

在动态数据显示中，有一个名为 MarkerPointsGraph 的类。这派生自 FrameWorkElement（通过一系列其他类，最直接的父类是 PointsGraphBase）并覆盖 OnRenderMethod 以在图表上绘制一组标记。

它通过为屏幕上渲染的每个点调用一次适当标记类型（例如，三角形、圆形等）的渲染方法来完成此操作。我需要找到一种方法来识别鼠标何时悬停在这些标记之一上，以便我可以为该标记设置工具提示。

我有一组方法允许我将一个点从屏幕位置转换为视口位置，再转换为数据位置并返回。即，将屏幕值转换为相应的数据值或视口值，反之亦然。

我还有关于这个框架元素的工具提示打开事件和每个标记的像素大小。只要用户悬停在特定标记上，我就需要确定他悬停在哪个点上，并让 markerpointsgraph 设置工具提示值。

但是，用于转换值的变换和方法似乎无法正常工作，尤其是在 x 方向上。y 方向似乎没问题。

下面是一些示例代码，将解释这个想法：

```
 double selectedPointX = 0;
                    double selectedPointY = 0;

                    CoordinateTransform transformLocal = this.primaryPlotter.Transform;

                    if (series.SeriesDescription.YAxisAffinity == AxisAffinity_Y.Y1)
                    {
                        selectedPointX = Mouse.GetPosition(this.primaryPlotter).ScreenToViewport(transformLocal).X; //Getting the mouse positions
                        selectedPointY = Mouse.GetPosition(this.primaryPlotter).ScreenToViewport(transformLocal).Y;
                    }
                    else if (series.SeriesDescription.YAxisAffinity == AxisAffinity_Y.Y2 && injSecondaryAxis != null)
                    {
                        transformLocal = injSecondaryAxis.Transform;

                        selectedPointX = Mouse.GetPosition(this.injSecondaryAxis).ScreenToViewport(transformLocal).X;
                        selectedPointY = Mouse.GetPosition(this.injSecondaryAxis).ScreenToViewport(transformLocal).Y;
                    }
                    else if (series.SeriesDescription.YAxisAffinity == AxisAffinity_Y.Y3 && injTertiaryAxis != null)
                    {
                        transformLocal = injTertiaryAxis.Transform;

                        selectedPointX = Mouse.GetPosition(this.injTertiaryAxis).ScreenToViewport(transformLocal).X;
                        selectedPointY = Mouse.GetPosition(this.injTertiaryAxis).ScreenToViewport(transformLocal).Y;
                    }

                    foreach (var item in SeriesList)
                    {
                        if (item.Key == GraphKey)
                        {
                            for (int i = 0; i < item.Value.Collection.Count; i++)
                            {
//Calculate the size of the marker on the screen and allow for some level of inaccuracy in identifying the marker i.e anywhere within the marker is allowed. 
                                double xlowerBound = item.Value.Collection[i].DataToViewport(transformLocal).X - series.MarkerSize;
                                double xUpperBound = item.Value.Collection[i].DataToViewport(transformLocal).X + series.MarkerSize;
                                double ylowerBound = item.Value.Collection[i].DataToViewport(transformLocal).Y - series.MarkerSize;
                                double yUpperBound = item.Value.Collection[i].DataToViewport(transformLocal).Y + series.MarkerSize;

                                //If point is within bounds
                                if (!(selectedPointX < xlowerBound || selectedPointX > xUpperBound || selectedPointY < ylowerBound || selectedPointY > yUpperBound))
                                {
                                    strToolTip = item.Value.Collection[i].X + ", " + item.Value.Collection[i].Y; //This point is set as the tooltip
                                    break;
                                }
                            }

                            break;
                        }
                    } 
```

这里，injSecondary 和 injTertiary 是两个注入式绘图仪，提供两个垂直 Y 轴。它们的行为与主图表绘图仪非常相似。

这里有什么问题吗？由于某种原因，实际点击点之前的点正在通过缓冲区子句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:21:37.653

嗯，看起来你对我来说是错误的方式。如果您深入研究 D3 的源代码，您可以打开其中一个标记类并直接在那里编辑工具提示。每个 System.Windows.Shapes 元素都有一个 Tooltip 属性，您可以在标记类中分配该属性。您需要做的就是确定工具提示包含哪些数据。

示例 - CircleElementPointMarker 类：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Shapes;

namespace Microsoft.Research.DynamicDataDisplay.PointMarkers
{
/// <summary>Adds Circle element at every point of graph</summary>
public class CircleElementPointMarker : ShapeElementPointMarker {

    public override UIElement CreateMarker()
    {
        Ellipse result = new Ellipse();
        result.Width = Size;
        result.Height = Size;
        result.Stroke = Brush;
        result.Fill = Fill;
        if (!String.IsNullOrEmpty(ToolTipText))
        {
            ToolTip tt = new ToolTip();
            tt.Content = ToolTipText;
            result.ToolTip = tt;
        }
        return result;
    }

    public override void SetMarkerProperties(UIElement marker)
    {
        Ellipse ellipse = (Ellipse)marker;

        ellipse.Width = Size;
        ellipse.Height = Size;
        ellipse.Stroke = Brush;
        ellipse.Fill = Fill;

        if (!String.IsNullOrEmpty(ToolTipText))
        {
            ToolTip tt = new ToolTip();
            tt.Content = ToolTipText;
            ellipse.ToolTip = tt;
        }
    }

    public override void SetPosition(UIElement marker, Point screenPoint)
    {
        Canvas.SetLeft(marker, screenPoint.X - Size / 2);
        Canvas.SetTop(marker, screenPoint.Y - Size / 2);
    }
}
} 
```

你可以在这个类中看到我们有内置的代码来处理工具提示。ToolTipText 是派生自父类 - ShapeElementPointMarker 的属性。您所要做的就是为该属性分配您需要显示的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:38:53.817

使用绘图仪上的光标坐标图代替 Mouse.GetPosition 以获得正确的屏幕位置并避免 ScreenToViewport 转换。此外，在创建边界时使用 DataToScreen。

# clojure - 对 Noir 的特殊 REPL 支持？

> ID：13413733
> 
> 赞同：1
> 
> 时间：2012-11-16T09:27:21.773
> 
> 标签：clojure, read-eval-print-loop, noir, counterclockwise

我正在使用带有逆时针插件的eclipse。

如果我编辑文件，更改不会反映，直到我按`ctrl+alt+s`。例如，如果我更改`(def foo 1)`为`(def foo 2)`并输入`foo`repl，它会`1`在`2`我按 之前打印`ctrl+alt+s`。

但是，如果我更改`(defpage "/" [] "test")`为`(defpage "/" [] "changed")`，只需刷新浏览器即可立即看到更改，而无需按`ctrl+alt+s`。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:33:58.837

在开发模式下，noir 使用[ring.middleware.reload](https://github.com/noir-clojure/noir/blob/master/src/noir/server/handler.clj#L59)重新加载更改的文件。这并不完美。例如，如果插入新的或删除中间件。但是页面之类的东西并不是一直都在使用中，所以它可以重新加载命名空间并获取新的例程。

# html - 根据 ASP.NET MVC 中的主题更改图像

> ID：13413735
> 
> 赞同：0
> 
> 时间：2012-11-16T09:27:31.530
> 
> 标签：html, asp.net-mvc, dependency-injection

根据所选主题更改图像来源的最佳方法是什么？理想情况下，您将为每个主题设置一个 CSS，并将图像设置为例如背景（这就是我目前所做的）。

然而我现在需要做的是使用一个实际的图像，它是功能性的并且是演示的一部分，它不仅仅是一个作为设计一部分的图像。根据主题，此图像看起来会略有不同。

我正在保存每个用户在数据库中选择的主题。当用户根据数据库中的主题请求页面时，我希望能够更改图像的来源。我正在使用依赖注入 (StructureMap)、MVC 4 和 EF 5。我想以某种方式在我的 _Layout 页面中为 ViewBag.MyImagePath 分配值，然后所有页面都只有 src="@ViewBag.MyImagePath"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:38:32.210

您可以编写一个主题感知图像助手：

```
public static class HtmlExtensions
{
    public static IHtmlString ThemeAwareImage(
        this HtmlHelper htmlHelper, 
        string image, 
        string alt = ""
    )
    {
        var context = htmlHelper.ViewContext.HttpContext;
        var theme = context.Session["theme"] as string;
        if (string.IsNullOrEmpty(theme))
        {
            // the theme was not found in the session 
            // => go and fetch it from your dabatase
            string currentUser = context.User.Identity.Name;
            theme = GetThemeFromSomeDataStore(currentUser);

            // cache the theme in the session for subsequent calls
            context.Session["theme"] = theme;
        }

        var urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext);
        var img = new TagBuilder("img");
        img.Attributes["alt"] = alt;
        img.Attributes["src"] = urlHelper.Content(
            string.Format("~/images/{0}/{1}", theme, image)
        );
        return new HtmlString(img.ToString(TagRenderMode.SelfClosing));
    }
} 
```

可以在您的视图中使用它来渲染这些图像：

```
@Html.ThemeAwareImage("foo.jpg", "This is the foo image") 
```

作为使用`Session`存储当前用户主题的更好选择，您可以将其缓存在 cookie 中，甚至更好地将其作为您的路线的一部分，在这种情况下，您的网站将更加 SEO 友好。

# android - 滚动时带有图像的按钮不响应 onclick 侦听器

> ID：13413741
> 
> 赞同：1
> 
> 时间：2012-11-16T09:27:56.913
> 
> 标签：android, button, imagebutton, horizontalscrollview

我是一名 android 初学者，我在线性布局中动态添加了图像，它将从右向左滚动。问题是图像正在正确移动/滚动，但是当我单击它时，不会调用单击侦听器。

实际上，当移动图像时，图像按钮正在移动，但点击位置不会根据图像滚动而改变。

```
public class ImageLayoutsActivity extends Activity {

    int ImageInt, fromXDelta, toXDelta;
    int PosInt, myHarizantalLayoutInt, aDisplayInt, aDisplayDiv = 0;

    AnimationSet myAnimation = new AnimationSet(true);

    LinearLayout myHarizantalLayout;
    HorizontalScrollView myHorizontalScroll;

    View myView;
    Intent myIntent;

    private Button clickedButton = null;
    public int currentimageindex = 0;
    TranslateAnimation myTranslateAnimation = null;

    private String[] imgArr = { "icn01", "icn02" };

    private String[] URLArray = { "http://www.google.co.in/",
            "http://in.yahoo.com/?p=us" };

    LinearLayout.LayoutParams Parems;

    Display aDisplay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        View aView = LayoutInflater.from(GroupActivity.myGroup).inflate(
                R.layout.horizantal, null);
        setContentView(aView);

        GroupActivity.myGroup.setTitle("---CII---");

        aDisplay = getWindowManager().getDefaultDisplay();

        aDisplayInt = aDisplay.getWidth();

        aDisplayDiv = aDisplayInt / 5;

        Log.i("value##########################", String.valueOf(aDisplayDiv));

        Log.i("aDisplayInt##########################",
                String.valueOf(aDisplayInt));

        // define xml layout here
        myHarizantalLayout = (LinearLayout) findViewById(R.id.horiztonal_outer_layout_id);

        myHorizontalScroll = (HorizontalScrollView) findViewById(R.id.horiztonal_scrollview_id);

        // Button aBtnOne = (Button) findViewById(R.id.BtnOneId);

        // Hide HorizantalLayout scroll bar
        myHorizontalScroll.setHorizontalScrollBarEnabled(false);

        myHorizontalScroll.isSmoothScrollingEnabled();

        myHarizantalLayout.measure(aDisplay.getWidth(), aDisplay.getHeight());

        Log.v("EmailActivity@@@@@@@@@", myHarizantalLayout.getMeasuredHeight()
                + ", " + myHarizantalLayout.getMeasuredWidth());

        int aLayoutInt = myHarizantalLayout.getMeasuredWidth();

        Log.i("aLayoutInt@@@@@@@@@@@", String.valueOf(aLayoutInt));

        // Add images in for loop
        for (int i = 0; i < imgArr.length; i++) {

            // int aVal=myHarizantalLayout.getChildCount();

            Log.i("ImageInt@@@@@@@@@@@@@@@@@@@@@@@@@@@@", "=====Inside the loop======");

            // create button instance
            final Button aImgBtn = new Button(this);

            // myButton.setOnClickListener(null);

            // add background image resource files
            ImageInt = getResources().getIdentifier(imgArr[i], "drawable",
                    getPackageName());

            Log.i("ImageInt@@@@@@@@@@@@@@@@@@@@@@@@@@@@", "ImageInt");

            // add integer image values to drawable control
            Drawable aDrawable = this.getResources().getDrawable(ImageInt);

            Log.i("aDrawable$$$$$$$$$$$$$$$$$$$$$$$$$", "aDrawable");

            // add drawable file to button instance
            aImgBtn.setBackgroundDrawable(aDrawable);

            aImgBtn.measure(aDisplay.getHeight(), aDisplay.getWidth());

            Log.i("aButton################@@@@@@@@@@@@@", "aButton");

            Parems = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.WRAP_CONTENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT);

            Parems.setMargins(10, 0, 5, 0);

            Log.i("Parems%%%%%%%%%%%%%%%%%%%%%%%%%%", "Parems");

            // int aParemIn = Parems.width;

            // Log.i("aparemIn$$$$$$$$$$$$", String.valueOf(aParemIn));

            myHarizantalLayout.measure(aDisplay.getHeight(),
                    aDisplay.getWidth());

            int myHarizantalLayoutInt = myHarizantalLayout.getMeasuredWidth();

            Log.i("myHarizantalLayoutInt$$$$$$$$$$$$",
                    String.valueOf(myHarizantalLayoutInt));

            myTranslateAnimation = new TranslateAnimation(aDisplayInt - 300,
                    -myHarizantalLayoutInt - aDisplayDiv, 0, 0);
            myTranslateAnimation.setDuration(20000);
            myTranslateAnimation.setRepeatCount(-1);
            myTranslateAnimation.setRepeatMode(1);
            myAnimation.addAnimation(myTranslateAnimation);

            Log.i("myAnimation###########################", "myAnimation");

            aImgBtn.setLayoutParams(Parems);
            myHarizantalLayout.addView(aImgBtn);

            Log.i("myHarizantalLayout&&&&&&&&&&&&&&&&&&&&&&&&&",
                    "myHarizantalLayout");

            // add animation to HarizantalLayout
            myHarizantalLayout.startAnimation(myTranslateAnimation);

            // Call webview based on image button click event
            aImgBtn.setOnClickListener(new OnClickListener() {

                public void onClick(View view) {

                    Log.i("view$$$$$$$$$$$$@@@@@@@@@@@@@", "---btn clicked -----");

                    int aVal = myHarizantalLayout.indexOfChild(view);

                    Log.i("indexOfChild*************************",
                            "indexOfChild");

                    if (view == aImgBtn) {

                        Log.i("aButton%%%%%%%%%%%%%%%%%%%%%%%%", "aButton");
                        aImgBtn.setId(aVal);

                        String aUrlStr = URLArray[aVal];

                        Log.i("aUrlStr$$$$$$$$$$$$@@@@@@@@@@@@@", aUrlStr);

                    }

                    // Log.i("aUrlStr$$$$$$$$$$$$@@@@@@@@@@@@@", aUrlStr);

                    // Pass values to webview activity

        }

    }

} 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:gravity="bottom" android:background="#00f">

    <LinearLayout android:layout_below="@+id/RelativeLayout"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:orientation="horizontal" android:gravity="bottom">

        <ImageView android:id="@+id/barImageId"
            android:layout_width="150dp" android:layout_height="58dp" 
            android:background="@drawable/cii" android:layout_alignParentRight="true" />

        <HorizontalScrollView android:layout_width="fill_parent"
            android:layout_height="58dp" android:id="@+id/horiztonal_scrollview_id"
            android:fadingEdge="none" android:background="#000" >

            <LinearLayout android:id="@+id/horiztonal_outer_layout_id"
                android:fadingEdge="none" android:layout_height="fill_parent" android:gravity="center_vertical"
                android:layout_width="fill_parent" android:background="#f00">

            </LinearLayout>
        </HorizontalScrollView>

    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:57:28.020

尝试使用 Pager 而不是 Horizo​​ntalScrollView，此链接可能会有所帮助[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# java - 创建自定义 java 打印服务属性

> ID：13413742
> 
> 赞同：0
> 
> 时间：2012-11-16T09:27:56.857
> 
> 标签：java, service, printing

我需要创建自定义 javax.print.attributes.Attribute 并将其传递给打印机。

Java 手册告诉我如何创建自己的属性——这真的很容易。但是我的属性不会传递给打印服务，直到它们在 getSupportedAttributeCategories() 列表中。

我应该如何将我的属性类别添加到 getSupportedAttributeCategories()？我应该在打印机的 .ppd 中添加一些东西还是编写自己的自定义打印机驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:21:15.180

好吧，我发现，实际上**我不能**在我的情况下添加自定义属性类别（JPS + Cups），因为所有属性类别都已经在 IPPPrintService 类（与 Cups 通信的那个）中**硬编码**，你不能添加你自己。

不过，您当然可以向现有的 11 个类别添加自定义属性。

# javascript - 是否可以让 Head JS 的 ready() 函数等待两个脚本？

> ID：13413749
> 
> 赞同：10
> 
> 时间：2012-11-16T09:28:20.133
> 
> 标签：javascript, head.js

我在我的网页上加载了三个脚本，我想在其中两个完成加载后触发一个函数。

```
 head.js(
     { webfont: 'http://ajax.googleapis.com/ajax/libs/webfont/1.0.31/webfont.js' },
     { jquery: 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js' },
     { analytics: 'http://www.google-analytics.com/ga.js' }
 ); 
```

理想情况下，我希望能够执行以下操作，但根据[文档](http://headjs.com/#usage)（请参阅脚本组织），似乎无法让 head.ready() 等待两个脚本加载。

```
head.ready('jquery', function() {
    // Code that requires jQuery.
});

// This is not supported. :-(
head.ready('jquery', 'analytics', function() {
    // Code that requires both jQuery and Google Analytics.
    // ...
}); 
```

那么我应该如何解决这个问题呢？如果我嵌套了准备好的方法，我可以确定我的代码会被触发，还是只有在 jquery 在分析之前完成加载时才会触发？

```
head.ready('jquery', function() {
   // Code that requires jQuery.
   // ...
   head.ready('analytics', function() {
       // Code that requires both jQuery and Google Analytics.
       // ...
   });
}); 
```

另一种解决方案可能是将加载语句分成两部分，就像这样。但是我仍然会从脚本的异步加载中充分受益，还是会在 jquery 和分析之前完成加载 webfont？

```
 head.js(
     { webfont: 'http://ajax.googleapis.com/ajax/libs/webfont/1.0.31/webfont.js' }
 );

 head.js(
     { jquery: 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js' },
     { analytics: 'http://www.google-analytics.com/ga.js' },
     function() {
         // Code that requires both jQuery and Google Analytics.
         // ...
     }
 );

 head.ready('jquery', function() {
     // Code that requires jQuery.
     // ...
 }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T10:25:44.770

由于脚本是按顺序执行的（即使是并行加载的），您可以等待“最后一行”的脚本

```
head.js(
    { webfont  : 'http://ajax.googleapis.com/ajax/libs/webfont/1.0.31/webfont.js' },
    { jquery   : 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js' },
    { analytics: 'http://www.google-analytics.com/ga.js' }
);

 head.ready('analytics', function() {
    // when this triggers, webfont & jquery will have finished loading too
 }); 
```

# user-interface - Visual FoxPro - 表格网格

> ID：13413750
> 
> 赞同：1
> 
> 时间：2012-11-16T09:28:22.563
> 
> 标签：user-interface, grid, visual-foxpro

我怎样才能实现这种网格？我应该使用哪些控件/工具？任何想法？

![在此处输入图像描述](../Images/174f98d670f38bcc72951c1332399835.png)

此屏幕截图来自[Baplie Viewer](http://www.geocities.ws/milatovicd/baplie.html)应用程序。我猜这是船长在航行时使用视觉 foxpro 完成的。

**[编辑]**
它是现成的，列宽将被固定。它是一种类似于 Grid 的表格格式生成的报告，但我认为我们不能使用原生的 Grid 控件。并且可能需要动态生成。我的意思是我们将无法在设计时使用形状工具、线条工具等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T05:16:08.350

这不是网格控件，也不是任何类型的 FoxPro 控件。（或者，至少，这不是获得这种效果的最佳方式。）它是一个绑定到 HTML 网页的 webview 控件，在后台生成，然后很可能通过临时文件显示。

在 FoxPro 应用程序中实现效果的最简单方法是使用 CUROSRTOXML 函数和 XSLT 转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:56:18.270

网格是可编辑的吗？还是只读的？

VFP 网格控件可以将任何 VFP 控件作为列控件源。例如，“总计”行可能是两列。第二列可以包含另一个 VFP 网格作为它的控制源。而第一列只是一个文本框或标签。

或者，此网格可以是只读的，并通过使用 Line 或 Shape 控件、为其区域着色并使用标签来表示数据来创建。

如果您对使用这样的第三方控件感兴趣，我会推荐 DBI-Technologies。他们有大量可与 VFP 一起使用的自定义控件。

# mongodb - 使用 mongodb 优化每小时统计检索

> ID：13413751
> 
> 赞同：1
> 
> 时间：2012-11-16T09:28:31.630
> 
> 标签：mongodb, optimization, pymongo, database

我在我的 mongodb 数据库中收集了大约 10 个 mio 文档，这些文档跨越几个星期，我希望能够计算一些简单的统计数据并输出它们。我试图获得的统计数据是一个时间跨度内每个文档的平均评分，以一小时为间隔。

要了解我正在尝试做什么，请遵循以下 sudo 代码：

```
var dateTimeStart;
var dateTimeEnd;

var distinctHoursBetweenDateTimes = getHours(dateTimeStart, dateTimeEnd);

var totalResult=[];

foreach( distinctHour in distinctHoursBetweenDateTimes )
    tmpResult = mapreduce_getAverageRating( distinctHour, distinctHour +1 )
    totalResult[distinctHour] = tmpResult;

return totalResult; 
```

我的文档结构类似于：{_id, rating, topic, created_at}

Created_at 是我收集统计数据的日期（插入时间和创建时间并不总是相同）

我在 created_at 字段上创建了一个索引。

以下是我的mapreduce：

```
map = function (){ 
    emit( this.Topic , { 'total' : this.Rating , num : 1 } ); 
};

reduce = function (key, values){  
    var n = {'total' : 0, num : 0}; 
    for ( var i=0; i<values.length; i++ ){ 
        n.total += values[i].total; 
        n.num += values[i].num; 
    } 
    return n; 
};

finalize = function(key, res){ 
    res.avg = res.total / res.num; 
    return res; 
}; 
```

我很确定这可以更有效地完成 - 可能通过让 mongo 做更多的工作，而不是连续运行几个 map-reduce 语句。

在这一点上，每个 map-reduce 大约需要 20-25 秒，因此几天内所有时间的统计数据突然占用了很长时间。

我的印象是 mongo 应该适合这种工作 - 因此我显然做错了什么。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:46:46.670

我假设时间是您正在 MapReducing 文件的一部分？

当您在所有文档上运行 MapReduce 时，确定 map 函数中的小时并将其添加到您发出的键中，您可以在单个 MapReduce 中完成所有这些操作。

# c# - 添加后如何删除单个画布的单个子级？

> ID：13413752
> 
> 赞同：0
> 
> 时间：2012-11-16T09:28:30.937
> 
> 标签：c#, wpf

我有一个 WPF 项目，我必须在画布上创建一些椭圆。我创建了两个复选框，当我选中第一个复选框时，红色椭圆将显示在画布上。如果我取消选中第一个复选框，椭圆将消失......第二个复选框将通过创建一个蓝色椭圆来具有相同的功能。

所以这是我的情况，当两个复选框被选中时，会出现一个蓝色和一个红色的椭圆。要清除画布上的椭圆，我使用`myCanvas.children.clear()`. 但是当我取消选中其中一个复选框时，两个椭圆都将被删除。

```
private void redCB_Checked(object sender, RoutedEventArgs e)
    {
       drawRedCircle();
    }

private void redCB_Unchecked(object sender, RoutedEventArgs e)
    {
       myCanvas.Children.Clear();
    }

private void blueCB_Checked(object sender, RoutedEventArgs e)
    {
       drawBlueCircle();
    }

private void blueCB_Unchecked(object sender, RoutedEventArgs e)
    {
       myCanvas.Children.Clear();
    }

private void drawRedCircle()
    {
        Ellipse myCircle = new Ellipse();
        myCircle.Stroke = Brushes.Red;
        myCircle.Width = 30;
        myCircle.Height = 30;
        myCircle.StrokeThickness = 2;

        Canvas.SetLeft(myCircle, 10);
        Canvas.SetRight(myCircle, 10);
        Canvas.SetBottom(myCircle, 10);
        Canvas.SetTop(myCircle, 10);

        myCanvas.Children.Add(myCircle);
    }

 private void drawBlueCircle()
    {
        Ellipse myCircle = new Ellipse();
        myCircle.Stroke = Brushes.Blue;
        myCircle.Width = 30;
        myCircle.Height = 30;
        myCircle.StrokeThickness = 2;

        Canvas.SetLeft(myCircle, 20);
        Canvas.SetRight(myCircle, 20);
        Canvas.SetBottom(myCircle, 20);
        Canvas.SetTop(myCircle, 20);

        myCanvas.Children.Add(myCircle);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:12:08.127

如果您为添加的圆圈命名，您可以在未选中复选框时找到它，然后很容易将其删除。

```
private string redCircleName = "redCircle";
private string blueCircleName = "blueCircle";

private void redCB_Checked(object sender, RoutedEventArgs e)
{
    drawRedCircle();
}

private void redCB_Unchecked(object sender, RoutedEventArgs e)
{
    RemoveCircleByName(redCircleName);
}

private void blueCB_Checked(object sender, RoutedEventArgs e)
{
    drawBlueCircle();
}

private void blueCB_Unchecked(object sender, RoutedEventArgs e)
{
    RemoveCircleByName(blueCircleName);
}

private void RemoveCircleByName(string name)
{
    var circle = (UIElement)LogicalTreeHelper.FindLogicalNode(myCanvas, name);
    myCanvas.Children.Remove(circle);
}

private void drawRedCircle()
{
    Ellipse myCircle = new Ellipse();
    myCircle.Stroke = Brushes.Red;
    myCircle.Width = 30;
    myCircle.Height = 30;
    myCircle.StrokeThickness = 2;

    //Give it a name here so we can find it later
    myCircle.Name = redCircleName;

    Canvas.SetLeft(myCircle, 10);
    Canvas.SetRight(myCircle, 10);
    Canvas.SetBottom(myCircle, 10);
    Canvas.SetTop(myCircle, 10);

    myCanvas.Children.Add(myCircle);
}

private void drawBlueCircle()
{
    Ellipse myCircle = new Ellipse();
    myCircle.Stroke = Brushes.Blue;
    myCircle.Width = 30;
    myCircle.Height = 30;
    myCircle.StrokeThickness = 2;

    //Give it a name here so we can find it later
    myCircle.Name = blueCircleName;

    Canvas.SetLeft(myCircle, 20);
    Canvas.SetRight(myCircle, 20);
    Canvas.SetBottom(myCircle, 20);
    Canvas.SetTop(myCircle, 20);

    myCanvas.Children.Add(myCircle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:34:48.477

我认为`unchecked`事件调用稍后，这意味着由事件创建的圆圈被`checked`事件清除`unchecked`。

一种解决方案是将创建和清除圆圈的逻辑移至单个方法，并且仅注册`checked`事件。

```
private void drawCircle()
{
       myCanvas.Children.Clear();

       if(redCB.Checked) drawRedCircle();
       if(blueCB.Checked) drawBlueCircle();     
}

private void redCB_Checked(object sender, RoutedEventArgs e)
{
   drawCircle();
}

private void blueCB_Checked(object sender, RoutedEventArgs e)
{
   drawCircle();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:53:25.933

而不是添加/删除为什么不使用椭圆的可见性（IsVisible）？将它们绑定到通知布尔属性，并且您还将复选框绑定到该属性。

```
// ellipse1Visible is a notifying boolean 
Binding ellipseBinding = new Binding("ellipse1Visible");
ellipseBinding .Source = ??? ;   // set your binding source here (? this ?)
myEllipse.SetBinding(Ellipse.IsVisibleProperty, ellipseBinding );
myRelatedCheckBox.SetBinding(CheckBox.IsCheckedProperty, ellipseBinding) 
```

如果要使用任意数量的椭圆，则必须使用“通知布尔值”的 Array/List/ObservableColection，语法为：

```
 // i is a valid index in the ellipseVisible collection of notifying boolean.
 Binding ellipseBinding = new Binding("ellipseVisible[" & i & "]");
 // the rest of the code is the same 
```

您可以在 StackPanel/listBox/... 附近添加复选框，同时在画布中添加相关椭圆。

无需添加/删除椭圆，也无需使用此解决方案处理选中/取消选中。

Rq ：如果您打算不使用每个椭圆的可见性，您甚至可以以更简单的方式做到这一点：没有布尔值，而是直接将可见性绑定到 CheckBox 的 IsChecked 属性：

```
// ... we just created myEllipse and myCheckBox
// ...  and inserted them into canvas/stackPanel 
Binding ellipseBinding = new Binding("IsChecked");
ellipseBinding.Source  = myCheckBox; 
myEllipse.SetBinding(Ellipse.IsVisibleProperty, ellipseBinding);
// and that's all 
```

# sql - 无法访问的 SQL 代码中的错误

> ID：13413757
> 
> 赞同：0
> 
> 时间：2012-11-16T09:28:49.530
> 
> 标签：sql, sql-server, tsql

以下 tsql 失败：

```
IF OBJECT_ID('FDSCorp.XLFILES') IS NOT NULL
BEGIN 
    DELETE FROM FDSCorp.XLFILES;

    INSERT INTO FDSCorp.XLFILES 
       SELECT DISTINCT * FROM dbo.XLFILES;
END
ELSE 
    exec sp_changeobjectowner XLFILES, FDSCorp; 
```

错误：

> *图像数据类型不能选择为 DISTINCT，因为它不可比较。*

Yes`XLFilES`有一个`image`列，但在这种情况下`FDSCorp.XLFILES`不存在，因此不同的代码永远不会运行。

此代码是为数据库中的每个表生成的，我知道这部分代码永远不会在可能由于不同问题而失败的表上运行。

如果这种情况在真实情况下永远不会发生，我真的不想让代码检查我无法使用 distinct 的类型过于复杂。

有什么方法可以绕过这个检查吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:42:57.580

避免该错误的唯一方法是防止服务器“看到”您不希望它编译的代码。在执行开始之前，每个批次都被完全编译（包括每个语句，忽略控制流）：

```
IF OBJECT_ID('FDSCorp.XLFILES') IS NOT NULL
BEGIN 
    DELETE FROM FDSCorp.XLFILES;

    exec sp_executesql N'INSERT INTO FDSCorp.XLFILES 
       SELECT DISTINCT * FROM dbo.XLFILES;';
END
ELSE 
    exec sp_changeobjectowner XLFILES, FDSCorp; 
```

现在，当这个批次被编译时，它不会尝试编译`INSERT`，因为就这个批次而言，它只是一个字符串文字。

# php - 调用变量 php / mysql

> ID：13413759
> 
> 赞同：0
> 
> 时间：2012-11-16T09:29:09.133
> 
> 标签：php, javascript, mysql

我得到以下代码：

```
if($allegati_tab) $DIV_ALLEGATI_LINK .= "<a href=\"javascript:;\" onclick=\"openWindow('add.attach.php?t='+tabella_alias+'&amp;id='+localIDRecord,'Allegati',70);\" id=\"href_tab_allegati\">"._("upload/change image")." (0)</a><br />"; 
```

创建此链接

```
.../vfront/add.attach.php?t=attendees&id=15 
```

现在我只需要在这里调用 15 (localIDRecord)

```
$tabella =($data_tab['table_name']);

$id = I NEED IT HERE; 
```

那么如何将 $id 定义为 LocalIDRecord？我只需要那里的号码。（这一切都发生在同一个文件中，因此不需要包含其他任何内容）

这是完整的代码段

```
$tabella =($data_tab['table_name']);

$id = 14;

$qa=$vmsql->query("SELECT * FROM "._TABELLA_ALLEGATO."
            WHERE tipoentita='$tabella'
            AND codiceentita='$id'
            ORDER BY nomefileall, lastdata");

 $matrice_info_allegati=$vmsql->fetch_assoc_all($qa);

for($i=0;$i<count($matrice_info_allegati);$i++){

                    $estensione=substr($matrice_info_allegati[$i]['nomefileall'],-3,3);

        if($estensione=='gif' || $estensione=='jpg' || $estensione=='png' || 
        $estensione=='GIF' || $estensione=='JPG' || $estensione=='PNG'){

            $immagine='<img src="thumb.php?id='.$matrice_info_allegati[$i]['codiceallegato'].'" alt="'.$matrice_info_allegati[$i]['nomefileall'].'" class="thumb" />';
        }
        else{

            $immagine = img_filetype($matrice_info_allegati[$i]['nomefileall']);
        }

        echo "

            <div class=\"allegato-img\">".$immagine." 
```

这是完整文件的链接：[http ://www.hc-wg.com/code.zip](http://www.hc-wg.com/code.zip)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:30:45.173

只需使用[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)：

```
$id = (isset($_GET["id"]) ? intval($_GET["id"]) : false);
var_dump($id); 
```

如果未指定 ID，则默认值为`false`.

但是，如果您在 MySQL 中使用它，请记住转义您的输入。

如果你正在使用[`PDO`](http://php.net/manual/en/book.pdo.php)or [`MySQLi`](http://php.net/manual/en/book.mysqli.php)（你应该 -**不要使用 mysql_* 函数！** [看看为什么在这里](http://www.stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)），那么你应该使用准备好的语句。

PDO： http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

MySQLi：[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:43:47.500

```
$id = $_GET['id']; /*referring to add.attach.php?t=attendees&id=15 */
if(isset($id)) {$id= $id; }
else {$id= ''; }  /*add a default number or leave it blank */

$t = $_GET['t'];
if(isset($t)) {$t= $t; }
else {$t= ''; }  /*add a default number or leave it blank */ 
```

# sql - 数据库关系混乱

> ID：13413760
> 
> 赞同：2
> 
> 时间：2012-11-16T09:29:15.900
> 
> 标签：sql

假设我创建了 table1 如下

```
Table1(t1id,tname) 
```

和表2如下

```
Table2(t2id,tdescription,t1id) 
```

其中 Table2 的 t1id 与 table1 和 Table2（外键）相关 现在我在两个表中都插入了 1 行，如下所示

```
Table1:->1,piklu
Table2->0,goodboy,1 
```

现在假设如果我们删除第一个表的行，第二个故事的相应行会被删除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:33:50.910

这取决于级联选项，您可以在[mysql 官方文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)中阅读更多信息。例如，如果要自动删除相关条目，可以 `ON DELETE CASCADE`在 FK 声明后使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:35:15.310

如果您`ON DELETE CASCADE`为外键指定：

[http://msdn.microsoft.com/en-US/library/ms186973(v=sql.105).aspx](http://msdn.microsoft.com/en-US/library/ms186973(v=sql.105).aspx)

# c# - 在应用程序启动时根据变量重定向到某些页面

> ID：13413763
> 
> 赞同：0
> 
> 时间：2012-11-16T09:29:28.367
> 
> 标签：c#, windows-phone-7, xaml

> **可能重复：**
> [如何更改 WP7 应用程序的启动页面](https://stackoverflow.com/questions/9247908/how-to-change-startup-page-on-wp7-application)

默认情况下，当您的应用启动时，Windows Phone 应用会导航到“MainPage.xaml”。如何通过基于某些变量重定向到其他页面来进行干预。

例如，如果 var a 为真，则转到 page1.xaml，否则转到 page2.xaml...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:20:32.787

我要做的是这个 i app.xmal.cs 文件`

```
 private void Application_Launching(object sender, LaunchingEventArgs e)
    {
        SetupDefautPage();
    }

    private void Application_Activated(object sender, ActivatedEventArgs e)
    {            
        SetupDefautPage();
    }` 
```

我的 void`SetupDefautPage`看起来像这样：

```
 void SetupDefautPage()
    {
        if ((DefaultPage !=false)&&(DefaultPage !=true)) 
        {
            (Application.Current as App).DefaultPage = false;
        }

        if (DefaultPage==false)
         {
            ((App)Application.Current).RootFrame.Navigate(new Uri("/TermUsePage.xaml", UriKind.Relative));
         }
        else if(DefaultPage==true)
         {
           ((App)Application.Current).RootFrame.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
         }

    } 
```

这只是一个想法，我希望它对你有好处

# mysql - 扫描一个mysql表，为什么逐行获取结果集比完全在内存中检索要快得多？

> ID：13413765
> 
> 赞同：5
> 
> 时间：2012-11-16T09:29:31.237
> 
> 标签：mysql, resultset

我们有一个包含 12,000,000 多条记录的 innodb 表。

`SELECT *`我使用JDBC使用两种方法从这个表中获取。

```
Statement stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,java.sql.ResultSet.CONCUR_READ_ONLY);
stmt.setFetchSize(Integer.MIN_VALUE); 
```

这种方式让驱动程序可以逐行流式传输结果集，并且需要 7 秒才能完成扫描。

`Statement stmt =conn.createStatement();`

结果集被完全检索并存储在内存中。这种方式需要 21 秒！

只是感到困惑，为什么逐行获取结果集比将完成的结果集检索到客户端内存中要快？逐行的方式不应该花费更多的时间进行网络传输吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:28:07.377

只是为了扩展我对 OP 的评论

这很可能是内存问题 - 将 12m 结果读入内存可能会导致分页，除非客户端有大量 RAM。一旦你开始颠簸磁盘，性能就会大大下降。值得注意的是，如果您确实开始增加 RAM，JVM 在处理 >32G 的地址（它切换到 64 位指针）方面会出现一些问题，这意味着当您过渡到超过 32G 时，您实际上会丢失可用内存并且可能会出现其他问题，具体取决于关于你的代码是如何编写的。

从长远来看，我们目前正在使用弹性搜索来索引大约 6000 万个文档。诚然，在处理索引、缓存等时，内存使用会更加复杂……但我们不会考虑为其提供少于 16G 的 RAM 以获得高性能响应。我遇到过使用每个分片大于 100G 来获得非常大的记录集的人。

# javascript - JQM 复选框在点击时被选中，然后在 android 上立即变为未选中

> ID：13413771
> 
> 赞同：2
> 
> 时间：2012-11-16T09:29:38.250
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 JQM 进行移动 Web 应用程序开发。我正在尝试根据复选框状态隐藏/显示表单的一部分。这在 iphone 上运行良好，但在 android 手机上表现得很奇怪，比如当用户选择复选框时，它会显示该表单块，但会立即隐藏起来并自动取消选中。我是 JQM 的新手，如果我错过了这里要提及的内容，请告诉我。

```
 $('form #addsp').click(function () {
    if ($('form #addsp').is(':checked')) {
        $('#addDetail').show()

    } else {
        $('#addDetail').hide()
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:26:15.763

$("input[type='checkbox']")[0].attr("checked",true).checkboxradio("refresh");
您需要刷新复选框以选中它。
你可以在这里阅读更多：http:
[//jquerymobile.com/test/docs/forms/checkboxes/methods.html](http://jquerymobile.com/test/docs/forms/checkboxes/methods.html)

# ruby-on-rails - Rails - 向脚手架创建的控制器添加操作

> ID：13413772
> 
> 赞同：0
> 
> 时间：2012-11-16T09:29:41.143
> 
> 标签：ruby-on-rails, controller, routes, action

我正在尝试向控制器添加一个称为回滚的操作。正如我所见，我唯一应该做的就是编写新动作：

```
def rollback
    puts "ROLLBACK!"
    respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @components }
end 
```

修改 routes.rb 文件：

```
resources :components do
   collection do
      post :rollback, :as => 'rollback'
   end
end 
```

并从某种角度调用动作：

```
<%= link_to 'Rollback', rollback_components_path %> 
```

但我收到以下错误：

```
Couldn't find Component with id=rollback
app/controllers/components_controller.rb:18:in `show' 
```

那是因为控制器没有执行回滚操作，而是认为我们正在尝试“显示”到 id 为“回滚”的组件。

对我来说似乎很奇怪的是，调用“新”动作 rails 使用 new_component_path （不带 s，单数），但如果我写 rollback_component_path 它会给我一个错误，我看不到视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:41:27.557

在您的路线中，您需要 a `POST`，只需单击链接默认为 a `GET`，所以要么写

```
resources :components do
  collection do
    get :rollback
  end
end 
```

然后`link_to`将按预期工作。

我假设回滚操作不是幂等的，所以`POST`在这种情况下 a 在语义上更好。

如果您按如下方式编写链接，那么 rails 将为您创建一个内联表单：

```
link_to 'Rollback', rollback_components_path, :method => 'post' 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:47:57.090

这将起作用

路线.rb

```
resources :components
match "components/rollback" => "components#rollback",  :as => :rollback 
```

在视图中

```
<%=link_to 'Rollback', rollback_path%> 
```

# android - APK 扩展文件。测试样品

> ID：13413773
> 
> 赞同：2
> 
> 时间：2012-11-16T09:29:43.653
> 
> 标签：android, apk-expansion-files

我阅读[了创建 APK 扩展文件的步骤](https://stackoverflow.com/questions/11715855/steps-to-create-apk-expansion-file)，
运行`SampleDownloaderActivity`并得到：“下载失败，因为找不到资源”

如何创建一个`Test Project`（简单项目>50MB 大图片）然后将其上传到 Google Play 并测试 APK 扩展文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T15:04:09.607

这有点晚了，但我目前正在这样做......

我正在按照以下说明进行操作： https: [//support.google.com/googleplay/android-developer/answer/2481797?hl=en](https://support.google.com/googleplay/android-developer/answer/2481797?hl=en)

这里有更多信息：http: [//developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

您必须上传 APK 并发布应用程序以测试扩展文件。使用 ALPHA 选项，以便应用程序对每个人都不可见。

应用程序发布后，您可以正确测试您的扩展文件。如果您正在计划付费应用程序，而不是直接从 Eclipse 或 Android Studio 上传您的 APK 而不是付费。

至于你的错误。在您可以访问扩展文件进行测试之前，您必须确保“发布”并且该应用程序在 Play 商店中可见。

我还阅读了许多其他帖子，您可以在草稿模式下测试扩展文件。这现在是 FALSE。在这里解释[https://support.google.com/googleplay/android-developer/answer/6062777?hl=en](https://support.google.com/googleplay/android-developer/answer/6062777?hl=en)

# vb.net - 使扩展方法本地化到文件范围

> ID：13413775
> 
> 赞同：1
> 
> 时间：2012-11-16T09:29:48.133
> 
> 标签：vb.net, scope, extension-methods

目前，我使用以下技巧通过将扩展方法隐藏在唯一命名的命名空间中来使文件本地化。它并没有真正隐藏它，但只要没有其他人导入命名空间，那就很酷了。但是图案很丑。下面的代码只是为了说明扩展方法的技巧。不要试图对我对 ISubject 所做的事情下任何结论；）

```
MyFancyComponent.cs 
```

--

```
Import MyFancyComponentMixins
Namespace MyFancyComponentMixins
    Module X
        <Extension>
        Public Function Format(s As ISubject(Of Double)) as ISubject(Of String)
            Return s.LocalizeLengthUnits().
                Select(
                parser:=Function(x) Double.Parse(x),
                formatter:=Function(x) x.ToString("0.00"))

        End Function
    End Module
End Namespace

class MyFancyComponent
    Inherits ReactiveUserControl(of MyFancyViewModel)

    Public Overrides Iterator Function  MakeReactiveBindings() as IEnumerable(of IDisposable)
        Yield Me.ViewModel.
            PropertySubject(Function(x) x.Height).
            Format().
            BindToControl(Me.HeightTextBox)
        Yield Me.ViewModel.
            PropertySubject(Function(x) x.Width).
            Format().
            BindToControl(Me.WidthTextBox)
    End Function

end class 
```

# jquery - jQuery datepicker 在一行中显示月份和年份组合

> ID：13413777
> 
> 赞同：0
> 
> 时间：2012-11-16T09:30:03.483
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我想让用户在两个组合框中选择年份和月份。问题是它们被显示在另一个之下，而不是一个并排显示。

我要这个：

![在此处输入图像描述](../Images/45c57d4be134f84a64e4f588b3c81b26.png)

我明白了：

![在此处输入图像描述](../Images/5520141425b64868c7cd0100c935a183.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:49:33.920

解决了更改此 css 类表单 jquery-ui.css

```
.ui-datepicker select.ui-datepicker-month .ui-datepicker select.ui-datepicker-year { width: 30%;} 
```

30% 确保在我的情况下两个选择都将显示在一行中。我使用 IE 开发者工具找到了 css 类：

![在此处输入图像描述](../Images/9c6a47cbf3444a0d1f2702b0e0ccbdbb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:50:34.530

无论 CSS 怎么说，改变宽度的最佳方法是：

1.  找到有datapicker的js文件（一般是jquery.ui.datepicker.js）
2.  寻找`var origyearshtml, numMonths = this._getNumberOfMonths(inst) ...`
3.  就在那条线或同一条线下，您会注意到`width=17`；
4.  将其更改为您喜欢的宽度。

这是使用多个月时唯一对我有用的解决方案。

# slider - Sencha touch 2滑块事件连续变化事件

> ID：13413779
> 
> 赞同：1
> 
> 时间：2012-11-16T09:30:07.607
> 
> 标签：slider, sencha-touch-2

是否也有可能获得 sencha 触摸滑块的正常 html5 更改事件？Sencha touch 2 提供了一个更改事件，该事件仅在滑块被放下时触发。

我想用它来平滑地打开和关闭灯，滑块应该是连续的。是否有捷径可寻？

我们在纯 html 中执行此操作，我们通过在 0-100 滑块中添加 10 步来限制事件。我希望我不必构建自己的组件。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:10:30.447

您可以在[`drag`](http://docs.sencha.com/touch/2-1/#!/api/Ext.field.Slider-event-drag)上使用该事件`Ext.field.Slider`。

# android - 如何在我的应用程序中播放 vimeo 视频？

> ID：13413783
> 
> 赞同：8
> 
> 时间：2012-11-16T09:30:23.757
> 
> 标签：android, vimeo, vimeo-android

我想在我的应用程序中播放 vimeo 视频。我能够从频道获取视频并在浏览器或 vimeo 应用程序中播放，但我希望在我的应用程序中播放视频。有没有类似开放 youtube 的 API。请帮助我这样做。

现在我正在使用它在 vimeo 应用程序或浏览器中播放视频。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://player.vimeo.com/video/"+vid_id))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:41:19.307

据我所知，您只需要一个 webview。

网址将类似于：

```
http://player.vimeo.com/video/<VIDEO_ID_GOES_HERE>?player_id=player&title=0&byline=0&portrait=0&autoplay=1&api=1 
```

编辑：Vimeo 提供了一个 html5 播放器，请参见此处：http: [//vimeo.com/blog/post](http://vimeo.com/blog/post:268) :268 这样您应该能够读取文件名并在您的应用程序中播放它。

编辑 2：html5 不再可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T19:01:19.303

另一种选择是获取 Pro 帐户，然后您可以直接在本机播放器中加载视频。

有关详细信息，请参阅此答案：[https ://stackoverflow.com/a/29498705/958651](https://stackoverflow.com/a/29498705/958651)

Vimeo 的 API 可在此处找到：[https](https://developer.vimeo.com/api) ://developer.vimeo.com/api和此处[https://developer.vimeo.com/api/endpoints](https://developer.vimeo.com/api/endpoints)

# php - php将字符串传递给array()函数

> ID：13413784
> 
> 赞同：0
> 
> 时间：2012-11-16T09:30:31.530
> 
> 标签：php, function

有没有办法将字符串变量传递给 array() 函数：

```
$ints = '112233,112234';
$arr = array($ints);

//instead of

$arr = array(112233,112234); 
```

我知道还有很多其他方法，但传递字符串是我唯一的选择：

```
$stArr = array();
foreach($dataTeacherAssWr[0]->getStudents() as $student) {
    $stArr[] = $student->getIdUser();
}
MyCacheManager::clearAssignmentCacheOnHomepageForUsers($_SESSION['id_user'], $stArr);

and the method:

public static function clearAssignmentCacheOnHomepageForUsers($teacherId, $studentId) {
    return self::clearAssignmentCacheOnHomepage(
        Array(
            'teacherIds' => array($teacherId),
            'studentIds' => array($studentId)
        )
    );
} 
```

如您所见，我可以将 $studentId 作为字符串中的“平面”ID 传递

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:32:14.923

尝试使用explode函数将用逗号分隔的数字拆分为一个数组...

```
explode(',', $ints); 
```

以你的例子...

```
$ints = '112233,112234';
$arr = explode(',', $ints); 
```

产生以下输出：

```
Array ( [0] => 112233 [1] => 112234 ) 
```

* * *

如果您希望将字符串传递给语言构造 array()，则根本无法完成。例如，您可以给它一个逗号分隔的列表，`array(112233, 112234);`但不能给它`array("112233,112234");`array [() 文档](http://uk1.php.net/manual/en/function.array.php "数组（）文档")将解释它将接受什么语法。

它不会知道逗号分隔整数列表并且您希望将其拆分。它只关心你给了它一个字符串，所以它会创建一个包含字符串的数组。它不是读心器，因此您需要自己区分这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:32:39.543

你可以使用**[`explode()`](http://php.net/manual/en/function.explode.php)**

```
$array = explode(",", $string); 
```

* * *

**输入：**

```
$string = '112233,112234';
$array = explode(",", $string);
var_dump($array); 
```

**输出：**

```
array(2) { [0]=> string(6) "112233" [1]=> string(6) "112234" } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:32:41.570

如果您必须将数据放在逗号分隔的字符串中，则可以简单地[`explode`](http://php.net/manual/en/function.explode.php)将其放在逗号上以获取数组：

```
$ints = '112233,112234';
$arr = explode(',', $ints); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T10:11:32.317

这是另一种方式：

```
 $separator=",";
    $str="112233,112234,112235,112236,112237";
    $arr = explode($separator, $str);
    //print_r($arr); 
```

# symfony - 为什么 Composer 中的依赖项更新如此缓慢？

> ID：13413788
> 
> 赞同：69
> 
> 时间：2012-11-16T09:31:08.030
> 
> 标签：symfony, dependencies, composer-php

我正在使用 composer ( [http://getcomposer.org/](http://getcomposer.org/) ) 来管理`Symfony2`(symfony v 2.1.3) 中已安装的包。作曲家的版本是`de3188c`.

我有一个问题，当我将新包添加到 composer.json 并执行它时，显示有关更新依赖项的消息的时间非常少。

我在 composer.json 中有这些数据（见下文），执行时间大约是 20 分钟！！！互联网连接速度足够快，我可以非常快地下载大文件......

有什么技巧可以让它更快吗？

```
{
"name": "symfony/framework-standard-edition",
"description": "The \"Symfony Standard Edition\" distribution",
"autoload": {
    "psr-0": { "": "src/" }
},
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.1.*",
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "1.0.*",
    "twig/extensions": "1.0.*",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.1.*",
    "symfony/monolog-bundle": "2.1.*",
    "sensio/distribution-bundle": "2.1.*",
    "sensio/framework-extra-bundle": "2.1.*",
    "sensio/generator-bundle": "2.1.*",
    "jms/security-extra-bundle": "1.2.*",
    "jms/di-extra-bundle": "1.1.*",
    "doctrine/doctrine-fixtures-bundle": "dev-master",
    "webignition/doctrine-migrations-bundle": "dev-master"
},
"scripts": {
    "post-install-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
    "post-update-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
},
"minimum-stability": "dev",
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web"
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-16T09:37:06.407

尝试为 composer.json 中的每个依赖项指定一个版本，并`--prefer-dist`在调用 composer.json 时使用该选项。它将从存储库（如果可用）而不是单个文件下载 ZIP 文件。

```
php composer.phar install --prefer-dist 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-25T00:32:42.987

既然你接受了一个答案，看起来这解决了你的问题。以防万一其他人偶然发现这个问题（就像我在搜索时所做的那样），就我而言，一个非常慢的 Composer 安装与我的 PHP 版本有关（警告，我是一个完整的 Composer 新手） ，尽管 Composer 通过了标准检查并表示一切正常。我运行 Ubuntu 12.04 LTS，并且懒得从 Precise 存储库中的默认 PHP 5.3.10（您正在运行的相同版本）升级。

通过 Composer 安装 Twig 最初花了我大约 30 分钟。在花了一个多小时后，我放弃了安装 Doctrine。我升级到 5.4.17（使用这个 PPA [https://launchpad.net/~ondrej/+archive/php5](https://launchpad.net/~ondrej/+archive/php5)）并且安装 Doctrine 在几秒钟内完成。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-08-05T22:57:35.427

我发现它也很慢，在几十分钟内慢。

对我来说，我添加`-vvv`并发现它挂在类似的东西上 `Downloading https://packagist.org/p/provider-active$53cdf887c8d2925b3501f47d6980fb7bda2310716369bf7a84857c6e62bbab0f.json`

然后我转到浏览器并尝试下载该 JSON 文件，果然如此。缓慢的原因是 packagist.org。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-07-07T01:43:15.923

就我而言，上述建议没有任何作用。所做的是将`HTTPS`协议用于`packagist`：

```
php composer.phar config --global repo.packagist composer https://packagist.org 
```

或者

```
composer config --global repo.packagist composer https://packagist.org 
```

取决于您的设置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T08:57:07.927

为了诊断这种用法，我使用了带有**-vvv**属性的**require**命令。

 **```
composer require larapack/dd -vvv 
```

就我而言，我发现 composer 速度慢是因为 fxp/composer-asset-plugin。

```
composer global show
composer global remove fxp/composer-asset-plugin 
```

瞧**

# c++ - 指向函数的指针？

> ID：13413789
> 
> 赞同：3
> 
> 时间：2012-11-16T09:31:08.633
> 
> 标签：c++, pointers

说我有

```
class B{   //base class

}

class A : public B{ //derived class
} 
```

我还有一个返回指向 B 类的指针的函数

```
B* returnB(){
    B * object = new A; //pointer of base class allocate object of derived class
    return object;
} 
```

现在，当我尝试创建指向函数 B* 的指针时，出现错误

```
B* (*randomFunction)();
randomFunction = returnB; 
```

Visual Studios 不会编译。

```
1   IntelliSense: a value of type "B*(MediaFactory::*)()" cannot be assigned to an entity of type "B*(*)()" c:\Users\...\mediafactory.cpp   35 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:34:20.360

您似乎正在尝试将指向类的成员函数的指针分配给`MediaFactory`可以保存非成员函数的变量。这些实体不兼容。使用 boost`bind`或将函数指针变量更改为`B* (MediaFactory::*)()`类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:34:14.033

您正在将指向成员函数的指针分配给函数指针。

您的类的方法，除非是静态的，否则具有不同的签名和调用方法。简单的函数声明不考虑类表示（例如隐式`this`）。

见这里： http: [//www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html](http://www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html)

# ldap - 如何列出 ldap 组的所有组成员？

> ID：13413795
> 
> 赞同：0
> 
> 时间：2012-11-16T09:31:32.053
> 
> 标签：ldap, plone, python-ldap

我有带 LDAP 的 Plone 3，里面有很多组和用户。我想获取特定组的所有组成员。

```
groupe_id = "mygroup"
gtool = getToolByName(self, 'portal_groups')
group = gtool.getGroupById(groupe_id)
members = group.getAllGroupMembers() 
```

这里的成员总是返回`[]`，但实际上，我的组中确实有一些用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T06:13:28.647

我不了解 plone，但它基于 posix 结构，您可以轻松地做到这一点。

```
import ldap

con = ldap.initialize('ldap://127.0.0.1')
con.simple_bind_s('cn=myuser', 'oh_yeah')
groups = con.search_s('dc=rkf,dc=org',
                      ldap.SCOPE_SUBTREE,
                      'objectclass=posixgroup',
                      ['memberuid'])

for a in groups:
    print 'Group:', a[0]
    print 'Members:', a[-1].get('memberuid') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:35:55.167

简短的回答可能是：你不能。

当您（或 Plone）向 ldap 询问用户列表时，ldap 可能会认为它找到了太多结果，而只是简单地返回一个空列表。出于这个原因，通常最好更改用户和组控制面板中的设置并打开“许多用户”，也可能打开“许多组”。例如，这确保不显示“显示所有用户”按钮。

在[collect](https://github.com/zestsoftware/collective.setdefaulteditor/blob/master/collective/setdefaulteditor/utils.py#L41) _

（顺便说一下，这不会搜索特定组中的成员。）

它真的很难看，所以我希望有一个更好的答案，以便我可以更新这个工具。:-)

# css - 第三级 没有响应 CSS

> ID：13413796
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:31:40.317
> 
> 标签：css, navigation, html-lists

嗨，所以我有这段代码，但我无法发现它为什么不响应我提供的 css，我尝试了 jsfiddle，但我不知道要查找什么。

这是css也许有人可以告诉我为什么第3和第2级ul没有响应

```
.nav-menus {height:auto;float:right;position:absolute;display:block;right:0;clear:both;}
#access {float:right;margin: 0px;right:0;height:78px;   }
#access .menu-header, div.menu {margin-left: 12px;background-color: #fff;}
#access .menu-header ul, div.menu ul {list-style: none outside none;margin: 0;padding: 0;}
#access .menu-header li, div.menu li {display: inline;list-style: none outside none;float: left;margin: 0 .5px;position: relative;}
ul#menu-header-menu li a {display: block;height:43px;padding:30px 15px 0 15px;}
ul#menu-header-menu li a:hover {  box-shadow: 0 20px 40px 0 rgba(255, 255, 255, 0.1) inset, 0 1px 1px 0 rgba(255, 255, 255, 0.05) inset;background-color:#fafafa;}
#access a {display: block;position: relative;height:68px;text-decoration:none;}
#access ul.sub-menu li:first-child {border:none;}
#access ul.sub-menu li { background: linear-gradient(to bottom, rgba(255, 255, 255, 0.04) 0%, rgba(0, 0, 0, 0.04) 100%) repeat scroll 0 0 transparent;box-shadow: 0 1px 1px rgba(255, 255, 255, 0.03) inset; margin-bottom: 1px;border-top:1px solid #ddd;font-size:11.5px;margin:0;line-height:18px; }
#access ul.sub-menu li:last-child {border-bottom:none;}
#access ul ul ul.sub-menu {border:1px solid #ddd;border-radius:2px;margin-left:5px;}
#access ul.sub-menu {border-bottom-left-radius:2px;border-bottom-right-radius:2px;border:1px solid #ddd;display:none;left: 0;position: absolute;top: 78px;} 
#access ul ul {position: absolute;top: -9999em;}
#access ul ul li:hover ul { margin-left:180px;top:0; }
#access ul ul li {min-width: 160px;}
#access ul ul li ul { right: 100%; top: -2px; }
#access ul ul ul {right:160px;top: 0;position:relative;}
#access ul ul a {line-height: 1em;padding: 10px;min-width: 160px;font-weight:normal;text-transform:capitalize;height: auto;display:block;}
#access ul.sub-menu li:hover > a {background-color:#F9f9f9;}
#access ul li:hover > ul {display: block;}
#access ul.sub-menu li.current-menu-item > a, #access ul.sub-menu li.current-page-item > a, #access ul.sub-menu li.current-ancestor-item > a, #access ul.sub-menu li.current-menu-parent > a, #access ul.sub-menu li.current-menu-ancestor > a, #access ul.sub-menu li > a:hover {border-top:1px solid #ececec;border-bottom:1px solid #ececec ;border-right:none;border-left:none;}
#access ul li.current_page_item > a, #access ul li.current-menu-ancestor > a, #access ul li.current-menu-item > a, #access ul li.current-menu-parent > a {z-index:10;  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);background-color:#fafafa;border-top:1px solid #eee;border-right:1px solid #ddd;border-left:1px solid #ddd;}
* html #access ul li.current_page_item a, * html #access ul li.current-menu-ancestor a, * html #access ul li.current-menu-item a, * html #access ul li.current-menu-parent a, * html #access ul li a:hover {} 
```

这是小提琴

[http://jsfiddle.net/qbr8c/](http://jsfiddle.net/qbr8c/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:36:27.383

3 级和 2 级 UL 发生了什么？他们是否继承了第一届 UL 的风格？

这可能是特异性的问题。

```
#access .menu-header ul 
```

比更具体

```
#access ul ul 
```

# c++ - 在 C++11 中是否有等效于 boost::interprocess::null_mutex 的东西（例如 std::null_mutex）？

> ID：13413798
> 
> 赞同：7
> 
> 时间：2012-11-16T09:31:41.447
> 
> 标签：c++, c++11, mutex

当我在某些情况下不想要同步开销而在其他情况下不想要真正的互斥锁时，我发现插入`null_mutex`（当前）的能力非常有用。`boost::interprocess::null_mutex`

我正在尝试使用新的 c++11`mutex`类，但我没有看到等效的`null_mutex`- 这让我感到困惑..

是的，我知道实施起来很简单（或者我可以继续使用 boost，但我尽可能地尝试坚持标准并且似乎是一个小小的遗漏？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T09:41:40.983

您可以通过创建概念的“空”实现来相当简单地做到这一点[`Lockable`](http://en.cppreference.com/w/cpp/concept/Lockable)：

```
struct null_mutex
{
     void lock() {}
     void unlock() noexcept {}
     bool try_lock() { return true; }
}; 
```

这将适用于 std::lock_guard：

```
null_mutex mux;
std::lock_guard<null_mutex> guard(mux); 
```

# android - 当活动在选项卡中时，何时调用 onCreateOptionsMenu？

> ID：13413803
> 
> 赞同：0
> 
> 时间：2012-11-16T09:31:56.550
> 
> 标签：android, android-actionbar, android-tabhost, actionbarsherlock

我有一个 tabHost 并向选项卡添加活动。

> 意图 myIntent = new Intent(this, MyActivity.class);
> mySpec.setContent(myIntent);

但 MyActivity 的 onCreateOptionsMenu 没有被调用。

当我的活动在选项卡中时，如何将项目添加到 actionBar？

我想在不同的选项卡（活动）中向 actionBar 添加不同的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:54:49.163

自引入 ActionBar 以来，选项卡 API 发生了很大变化。选项卡主机现在已弃用选项卡主机内的选项卡不会影响操作栏。

我建议完全放弃 TabHosts 并使用[ActionBarSherlock](http://actionbarsherlock.com/)在 Android 3.2 之后的设备上获取本机 ActionBar

通过这种方式，您可以在所有设备上获得更好看的标签，并且菜单可以正确显示在 Android 4.x 手机上

# eclipse - Eclipse / RAP / Tabris：是否可以在客户端本地调用代码？

> ID：13413804
> 
> 赞同：1
> 
> 时间：2012-11-16T09:31:57.810
> 
> 标签：eclipse, eclipse-rap

我希望能够在客户端上使用服务发现 API（例如 jmdns）来查找在***客户端本地网络***上运行的服务（在桌面应用程序中）。

不了解 RAP 架构的大量信息，代码实际运行在服务器上，这是否意味着不可能做到这一点？API 调用是否只会发现运行在服务器端的服务？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:54:41.730

这是正确的。使用服务发现 API（例如 jmdns）只会发现在服务器端运行的服务。适用于 iOS 的 Tabris 客户端是用纯 Objective-C 编写的，仅呈现在服务器上运行的 Java 应用程序的 UI，并提供对 iOS 设备上本机功能的访问。

# sql - 存储过程 OUTPUT 参数始终返回 NULL

> ID：13413805
> 
> 赞同：3
> 
> 时间：2012-11-16T09:32:11.293
> 
> 标签：sql, sql-server, sql-server-2008

我确实有问题。我正在尝试通过 OUTPUT 参数从存储过程返回。

```
alter procedure dbo.UDP_GET_OUT
@P_PARAM XML OUTPUT
WITH EXECUTE AS CALLER
as
BEGIN
SET @P_PARAM =
(
select 
name,system_type_id
from sys.types
FOR XML PATH('Type'),ROOT('ROOT'),ELEMENTS
)
/*SELECT @P_PARAM*/
END 
```

然后我调用该过程并分配输出参数。

```
declare @xml XML
exec dbo.UDP_GET_OUT @xml
select @xml 
```

现在棘手的部分 - 结果始终为 NULL。有人可以指出我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T09:33:54.830

必须将参数作为 OUTPUT 传入：

```
declare @xml XML;
exec dbo.UDP_GET_OUT @xml OUTPUT;
select @xml; 
```

# asp.net - 如何从 xml 动态创建 asp.net 页面控件？

> ID：13413817
> 
> 赞同：0
> 
> 时间：2012-11-16T09:32:50.927
> 
> 标签：asp.net, xml

对于我们的 Web 应用程序项目，我想从 XML 动态创建对网页的控件。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:36:50.473

这一切都取决于您的项目需求，关于所需的配置

创建一个控件工厂，通过读取 XML 配置按需生成控件。

您可以参考这篇[How to create controls dynamic in MVC 3 based on an XML file](https://stackoverflow.com/questions/6329461/how-to-create-controls-dynamically-in-mvc-3-based-on-an-xml-file)

但它是为 MVC 编码的，你开始考虑为 Web 窗体创建

# delphi - 将构建服务器从 Delphi XE 迁移到 Delphi XE2

> ID：13413818
> 
> 赞同：6
> 
> 时间：2012-11-16T09:32:53.830
> 
> 标签：delphi, continuous-integration, delphi-xe2, delphi-xe

如何将我的构建服务器从 Delphi XE 迁移到 Delphi XE2？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T09:39:57.480

首先要注意的是，参数在 Delphi XE2 中`DelphiWin32LibraryPath`更改了名称。`DelphiLibraryPath`所以你必须改变你的构建脚本，比如

```
msbuild /p:DelphiWin32LibraryPath="..." ... 
```

至

```
msbuild /p:DelphiLibraryPath="..." ... 
```

[其次，当从 XE 迁移项目时，Delphi XE2 向项目文件添加了一些资源引用，这些引用不会在构建服务器上编译（正如Uwe Raabe 的这个答案](https://stackoverflow.com/a/13413360/62391)所指出的那样）。要解决此问题，请`dproj`在文本编辑器中打开文件并删除引用`ico`名为“ProjectName_Icon4.ICO”之类的文件的行。

第三件令人讨厌的事情是 XE2 中引入的命名空间。这将导致构建服务器停止编译并显示错误消息，例如

```
File "Windows.dcu" not found 
```

该文件现在称为“Winapi.Windows”。为了避免必须更改项目中的所有使用子句，您可以告诉编译器自动隐式添加一些命名空间：

```
msbuild /p:Namespace="System;System.Win;Winapi;Vcl;Vcl.Imaging;Data;Xml" ... 
```

您可能需要添加更多在项目中使用的命名空间。

# php - Magento $this->_productCollection 如何使用 foreach 重新排列

> ID：13413819
> 
> 赞同：0
> 
> 时间：2012-11-16T09:33:11.070
> 
> 标签：php, magento

我对 magento 很陌生，请查看下面的代码，我正在尝试在不同的基础上重新排列 productCollection。

```
$this->_productCollection = $layer->getProductCollection();   
$rearraggedProductCollection=array();

foreach($this->_productCollection as $product)
{

  if($product->getTypeId()=="simple")
  {   
     array_push($rearraggedProductCollection,$product); 
  }

 }
$this->_productCollection = $rearraggedProductCollection; 
```

但这不起作用，任何人的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:01:39.503

为什么不对集合应用过滤器？

```
$this->_productCollection->addAttributeToFilter('type_id', array('eq' => 'simple')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:29:51.147

我认为您正在寻找的是[PHP Clone](http://php.net/manual/en/language.oop5.cloning.php)。

```
foreach($this->_productCollection as $product) {

    if($product->getTypeId()=="simple") {   
        array_push($rearraggedProductCollection, clone $product); 
    }

} 
```

我怀疑以下陈述，我不确定您是否可以重置这样的对象。

```
$this->_productCollection = $rearraggedProductCollection; 
```

您能否确认您的数组设置正确，将对象视为数组可能会导致一些奇怪的行为。

[var_dump](http://php.net/var_dump)每个阶段并尝试找出出错的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:41:57.620

谢谢大家帮我解决这个问题。

我找到了解决方案，它很简单，并且有一个 addItem() 可以轻松帮助将新产品添加到 _productCollection 对象。

我唯一的窍门是加载一个空集合

```
//load an empty collection (filter-less collections will auto-lazy-load everything)
$merged = Mage::getModel('catalog/product')->getCollection()->addFieldToFilter('entity_id',-1); 
```

并且在将产品添加到空表时，我们需要检查产品 ID 不重复，magento 不允许将重复的产品添加到产品集合中

```
if(!$merged->getItemById($product->getId())) 
{
  $merged->addItem($product);
} 
```

根据我的要求，整个代码如下

```
$this->_productCollection = $layer->getProductCollection();

//load an empty collection (filter-less collections will auto-lazy-load everything)
$merged = Mage::getModel('catalog/product')->getCollection()->addFieldToFilter('entity_id',-1);

                /**** Sorting the backorder product first ****/
                foreach($this->_productCollection as $product)
                {
                   if($product->getTypeId()=="simple" && $product->isSaleable())
                    {
                       if(!$merged->getItemById($product->getId())) 
                        {
                            $merged->addItem($product);
                        }        
                    }
                }

                /**** Sorting the avilable product second ****/
                foreach($this->_productCollection as $product)
                {
                   if($product->getTypeId()=="configurable" && $product->isSaleable())
                    {
                       if(!$merged->getItemById($product->getId())) 
                        {
                            $merged->addItem($product);
                        }        
                    }
                }

                 /**** Sorting the sold out product last ****/
                foreach($this->_productCollection as $product)
                {
                   if(!$product->isSaleable())
                    {
                       if(!$merged->getItemById($product->getId())) 
                        {
                            $merged->addItem($product);
                        }        
                    }
                } 

                /* Now assigning to the mergerd collection to the product Collection */
                $this->_productCollection = $merged; 
```

# box-api - 我们是否有一个 API 可以为我们上传的文档添加标签？

> ID：13413824
> 
> 赞同：1
> 
> 时间：2012-11-16T09:33:26.893
> 
> 标签：box-api

就像在 CMIS 中我们有属性及其对应的值一样，我在某处读到我们在 BOX 中有标签。我们是否有一个用于添加 Box 标签的 API，它可以作为我们正在上传/创建的文件/文件夹的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T17:08:53.080

V2 API 中也提供了标签：http: [//developers.box.com/#files](http://developers.box.com/#files) 或[http://developers.box.com/#folders](http://developers.box.com/#folders)。它们与文件或文件夹相关联，并根据需要在 /files/ 或 /folders/ 资源上使用 PUT 操作进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:36:18.443

标签在 V1 API 中可用：http: [//developers.box.net/w/page/12923921/ApiFunction_add_to_tag](http://developers.box.net/w/page/12923921/ApiFunction_add_to_tag)

# class - 如何设计一个版本转换器（Json.net），将非常旧的版本处理为新版本而没有太多代码污点

> ID：13413831
> 
> 赞同：2
> 
> 时间：2012-11-16T09:33:55.840
> 
> 标签：class, serialization, architecture, versioning, json.net

我的要求是创建一个高效的版本转换器设计。让我们假设在每个版本中都进化了以下类。

//版本1

```
 internal class PatientV1
    {
        public string FullName { get; set; }
        public string PatientNr { get; set; }
        public GenderV1 Gender { get; set; }
    }

    internal enum GenderV1
    {
        MALE,
        FEMALE
    } 
```

//版本2

```
 internal class PatientV2
    {
        public Name FullName { get; set; }
        public string PatientNr { get; set; }
        public GenderV2 Gender { get; set; }
    }

    internal class Name
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Title { get; set; }
    }

    internal enum GenderV2
    {
        MALE,
        FEMALE,
        UNKNOWN
    } 
```

//版本3

```
 internal class PatientV3
    {
        public IPerson Person { get; set; }
        public string PatientNr { get; set; }
    }

    internal interface IPerson
    {
        Name Name { get; set; }
        GenderV3 Gender { get; set; }
    }

    internal class Person : IPerson
    {
        public Name Name { get; set; }
        public GenderV3 Gender { get; set; }
    }

    internal enum GenderV3
    {
        MALE,
        FEMALE,
        MALE_TO_FEMALE_CONVERSION_INPROGRESS,
        FEMALE_TO_CONVERSION_INPROGRESS,
        UNKNOWN
    } 
```

我创建了 JsonConverter 以将一个版本反序列化为另一个版本。这增加了许多转换器组合（（n-1）！），例如。

1.  PatientV1ToV2Converter 从版本 1 转换到版本 2
2.  PatientV1ToV3Converter 从版本 1 转换到版本 3
3.  PatientV2ToV3Converter 从版本 2 转换到版本 3

因此，我希望 PatientV1ToV3Converter 调用 PatientV1ToV2Converter 将患者从 PatientV1 带到 PatientV2，然后 PatientV1ToV3Converter 在 PatientV2 上工作以使其成为 PatientV3，而不是这个。

所有这些我都希望在应用程序目录中不存在任何旧版本的 Patient（PatientV1 和 PatientV2）。

任何设计，无论是否有旧的 dll 限制，我都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:46:54.547

我在我的项目中做了类似的事情

我已经设定

```
serializerSettings.Converters = new List<JsonConverter>() { new MyAppVersionConverter() }; 
```

在此`MyAppVersionConverter`，我重写`ReadJson`并编写了以下代码

```
JObject jObjectV = JObject.Load( reader );
//Get the type information from JObject by getting the "$type" property and strip it to get the version
string objectVersion = GetVersion(jObjectV.GetValue("$type")); 
```

现在要么通过添加或删除属性来修改现有`jObjectV`的以转换为所需的版本，然后

例如从我的代码

```
JProperty firstNameProp = new JProperty( "FirstName", firstName );
JProperty lastNameProp = new JProperty( "LastName", lastName );
JProperty typeProperty = new JProperty( "$type", "MyDetailV2.EmployeeDetail, MyDetailV2, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" );

JObject jObjectV2 = new JObject();
jObjectV2.Add( typeProperty );
jObjectV2.Add( firstNameProp );
jObjectV2.Add( lastNameProp );

return jObjectV2.ToObject<EmployeeDetail>(); 
```

我还在提炼东西。完成完整更改后，我将发布。

如果您在这方面有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:52:07.193

你的方法是合理的。其他一些项目也使用类似的方法来处理升级。

例如，MythTV 项目使用相同的想法如何从任何旧版本实时升级数据库模式。到目前为止，他们已经能够无缝处理[300 多个修订](http://code.mythtv.org/trac/browser/mythtv/mythtv/libs/libmythtv/dbcheck.cpp)。

# php - 在 Sphinx 中使用 SPH_SORT_RELEVANCE 时，同等权重的结果如何排序？

> ID：13413835
> 
> 赞同：1
> 
> 时间：2012-11-16T09:33:58.993
> 
> 标签：php, mysql, sphinx

我正在使用以下代码从 Sphinx 检索搜索结果：

```
$sphinx = new SphinxClient();
$sphinx->SetMatchMode(SPH_MATCH_EXTENDED2);
$sphinx->SetRankingMode(SPH_RANK_SPH04);
$result = $sphinx->Query($query, $index); 
```

这使用 的默认排序`SPH_SORT_RELEVANCE`。一切都很好。

我想知道的是，当所有结果的权重相等时（例如，通过使用过于笼统的搜索词），Sphinx 在使用时返回的顺序是`SPH_SORT_RELEVANCE`什么？这是将文档添加到索引中的顺序（例如，在索引期间由 mysql 返回的顺序）？还有什么命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:13:09.237

它相当于这个

```
@weight DESC, @id ASC 
```

（扩展排序模式字符串）

# android - 如何使用 Android 应用程序管理会话

> ID：13413839
> 
> 赞同：1
> 
> 时间：2012-11-16T09:34:13.420
> 
> 标签：android, cookies

我有一个 Android 应用程序，我将 Multipart 帖子发送到 Servlet。但我需要将呼叫限制为每 5 分钟一次。通过网络表单，我可以使用 cookie。对于 android 应用程序，它不能那样工作。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:03:32.450

要保持与服务器的 http 会话，您可以遵循以下方法（假设您使用 HttpClient 进行通信）：

每次服务器启动一个新会话时，它都会发送一个 cookie 名称`Set-Cookie`，其值包含可用作服务器会话 ID 的 jessionid。因此，每次对服务器进行网络调用时，请在代码中检查响应中的此 cookie。如果这个 cookie 存在，那么检查它是否也有 jessionid。以下代码可用于检查和解析 Set-Cookie 标头中的 jessionid。

```
HttpResponse response = httpClient.execute(get);

switch (response.getStatusLine().getStatusCode()) {
            case 200:
                          parseSessionID(response);
                          //process the response
                         break; 
}

private void parseSessionID(HttpResponse response) {
    try {

        Header header = response.getFirstHeader("Set-Cookie");

        String value = header.getValue();
        if (value.contains("JSESSIONID")) {
            int index = value.indexOf("JSESSIONID=");

            int endIndex = value.indexOf(";", index);

            String sessionID = value.substring(
                    index + "JSESSIONID=".length(), endIndex);

            Logger.d(this, "id " + sessionID);

            if (sessionID != null) {
                classStaticVariable= sessionID;
            }

        }
    } catch (Exception e) {
    }

} 
```

将解析后的 id 存储在以后可以访问的某个地方。我通常在我的网络管理器中创建一个静态字段并将 jessionid 存储在该字段中。

现在，当您发出网络请求时，请按照以下代码设置 jessionid 所需的 cookie：

```
private void setDefaultHeaders(HttpUriRequest httpRequest, Request request) {

        if (classStaticVariable!= null) {
            httpRequest.setHeader("Cookie", "JSESSIONID=" + classStaticVariable);
        }

    } 
```

在调用 HttpClient 执行方法之前调用此方法..

注意：我只使用基于 java 的服务器对其进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:35:57.853

您是否尝试过使用：

1.  `SharedPreferences`，更容易的一个，和
2.  `AccountManager`

# javascript - MVC4 Bundle 缩小不适用于 javascript 保留字

> ID：13413844
> 
> 赞同：14
> 
> 时间：2012-11-16T09:34:31.167
> 
> 标签：javascript, asp.net-mvc-4, bundling-and-minification, asp.net-optimization

使用最新版本的 MVC4 当它包含保留字作为键名时，我无法缩小 javascript！

请参阅下面的错误，其中包含应缩小的有效 javascript。

有谁知道如何解决这个没有重写 javascript 以使用 [""] 符号的问题？

PS 有问题的代码有几千行，所以它不是一个选项！

```
/* Minification failed. Returning unminified contents.
(3,9-15): run-time warning JS1010: Expected identifier: delete
(4,9-13): run-time warning JS1010: Expected identifier: case
(5,9-11): run-time warning JS1010: Expected identifier: if
(3,9-15): run-time error JS1137: 'delete' is a new reserved word and should not be used as an identifier: delete
(4,9-13): run-time error JS1137: 'case' is a new reserved word and should not be used as an identifier: case
(5,9-11): run-time error JS1137: 'if' is a new reserved word and should not be used as an identifier: if
 */
var context = {};

context.delete = {};
context.case = {};
context.if = {}; 
```

问题是没有其他选项，如节点、盒式磁带、梳子、服务堆栈等

我们如何让 MVC4 与保留字打球。

我很难相信在 6 个月后没有对此的支持！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T14:49:05.170

刚试过这个，它的工作原理。对不起，但丑陋的代码。它将替换您命名的成员`delete`及其用途。

```
public class CustomBundle : ScriptBundle
{
    public CustomBundle(string virtualPath) : base(virtualPath)
    {
        this.Builder = new CustomBuilder();
    }
    public CustomBundle(string virtualPath, string cdnPath) : base(virtualPath, cdnPath) {}
}

public class CustomBuilder : IBundleBuilder {
    public string BuildBundleContent(Bundle bundle, BundleContext context, IEnumerable<FileInfo> files)
    {
        var content = new StringBuilder();
        foreach (var fileInfo in files)
        {
            var parser = new Microsoft.Ajax.Utilities.JSParser(Read(fileInfo));
            parser.Settings.AddRenamePair("delete", "fooDelete");
            content.Append(parser.Parse(parser.Settings).ToCode());
            content.Append(";");
        }

        return content.ToString();
    }

    private string Read(FileInfo file)
    {
        using(var r = file.OpenText())
        {
            return r.ReadToEnd();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-18T17:12:34.043

希望还不算太晚。您可以实现自己的缩小变换并忽略这些错误。

```
var bundle = new ScriptBundle("~/bundles/xxxbundle", null, new JsMinifyIgnoreReservedWordError()).
    Include("~/Scripts/xxx.js");

private class JsMinifyIgnoreReservedWordError : IBundleTransform
{
    private const string JsContentType = "text/javascript";

    public void Process(BundleContext context, BundleResponse response)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }
        if (response == null)
        {
            throw new ArgumentNullException("response");
        }
        if (!context.EnableInstrumentation)
        {
            Minifier minifier = new Minifier();

            string result = minifier.MinifyJavaScript(response.Content, new CodeSettings
            {
                EvalTreatment = EvalTreatment.MakeImmediateSafe,
                PreserveImportantComments = false,
                        IgnoreErrorList = "JS1137" // ignore 'is a new reserved word and should not be used as an identifier' error
                    });

            if (minifier.ErrorList.Count > 0)
            {
                GenerateErrorResponse(response, minifier.ErrorList);
            }
            else
            {
                response.Content = result;
            }
        }
        response.ContentType = JsContentType;
    }

    private static void GenerateErrorResponse(BundleResponse bundle, IEnumerable<object> errors)
    {
        StringBuilder stringBuilder = new StringBuilder();

        stringBuilder.Append("/* ");
        stringBuilder.Append("Minification failed. Returning unminified contents.").AppendLine();

        foreach (object error in errors)
        {
            stringBuilder.Append(error).AppendLine();
        }

        stringBuilder.Append(" */").AppendLine();
        stringBuilder.Append(bundle.Content);

        bundle.Content = stringBuilder.ToString();
    }
} 
```

# setfocus - 启动网页时在文本框上设置焦点

> ID：13413847
> 
> 赞同：0
> 
> 时间：2012-11-16T09:34:45.420
> 
> 标签：setfocus

当网页加载时，焦点是 URL 而不是文本框。

使用的代码：在页面加载时： `TextBox1.Focus();`和`SetFocus(TextBox1);`- 都不起作用

在 asp 方面尝试过的内容：defaultfocus="TextBox1"

和`OnLoad="Focus_Textbox"` 调用函数

```
protected void Focus_Textbox(object sender, EventArgs e) {
  TextBox1.Focus();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:51:52.110

试试这个：

```
Focus_Textbox(object sender, EventArgs e)
{ 
   TextBox1.SetFocus;
} 
```

我认为这适用于.Net 4.0 ..

# sql-server - 平衡 SQL Server 写入性能与读取性能所需的输入

> ID：13413855
> 
> 赞同：2
> 
> 时间：2012-11-16T09:35:16.980
> 
> 标签：sql-server

我有一个正在运行的服务，它可以转换数据并将转换后的（几百万行）数据写入 SQL Server。前端从这些表中读取。

自然，我们的目标是尽可能快地写入这些数据，但不牺牲读取性能。

我目前的方法是编写单独的行，一次一个服务器调用。这似乎最大限度地减少了锁定，但写入速度并不是最佳的。不受限制，我们可能达到每秒几千行。

我也尝试批量加载数据，但我遇到了死锁和超时。我假设这是由于插入/更新时的锁升级（我将提交分批成 256 行）。

关于在不牺牲读取性能的情况下更快地将记录提交到数据库的任何想法？

一些细节：

*   转换后的数据驻留在许多不同的表中，所有表都编入索引以最大限度地提高读取性能。
*   我使用一个持续打开的连接来写入数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:55:13.973

这假设您使用的是 SQL Server 2008+，但如果您使用的是，那么我会考虑使用接受表值参数的存储过程。然后，您可以使用所需的任何批处理大小调用该过程，并且锁定只会在插入这些行所花费的时间内保留。当您运行批量复制时，在复制期间会保留锁定，因此更改批量大小不会对锁定持续时间产生重大影响（当然，更改整体批量复制时间除外） .

我写了一篇带有帮助类的博客文章，用于[在此处](http://www.atlantis-interactive.co.uk/blog/post/2011/05/21/A-generic-list-for-passing-table-valued-parameters-to-SQL-Server.aspx)轻松地将数据作为 TVP 提交。[您可以在此处](http://msdn.microsoft.com/en-us/library/bb510489.aspx)阅读 MSDN 上有关使用 TVP 参数创建程序的信息。也值得一读 Bob B 的博客文章，这些文章在[这里](http://www.sqlskills.com/BLOGS/BOBB/post/The-interesting-case-of-TVPs-and-plan-compilation.aspx)和[这里](http://www.sqlskills.com/BLOGS/BOBB/post/TVPs-and-plan-compilation-the-reprise.aspx)（也在我的博客文章中引用）。

# php - Chamilo 1.8 的“启用时间控制”在亚洲地区有问题吗？

> ID：13413858
> 
> 赞同：1
> 
> 时间：2012-11-16T09:35:25.107
> 
> 标签：php, timezone

我正在评估 Chamilo 1.8.*，我发现启用时间控制无法正常工作。会发生什么：

*   对于 2 分钟的时间控制测试，计时器具有 32 分钟的倒数计时器
*   然而，在测试持续 2 分钟后，测试在 30:00 分钟结束。

我注意到这个问题是特定于从亚洲地区登录的人，因为即使在 Chamilo 自己的测试服务器[http://chamilodev.beeznest.com/](http://chamilodev.beeznest.com/)上我也遇到过这个问题，开发团队没有遇到任何问题，并且可以不要复制它。

确切地说，我的问题与此相同：http:
[//support.chamilo.org/issues/4707](http://support.chamilo.org/issues/4707)

但是来自美洲的开发团队似乎无法复制这个问题。
有没有来自印度/巴基斯坦/孟加拉德什/亚洲地区的人遇到过这个问题？

我已确保

1.  我的服务器时间设置为我的本地时区。
2.  我的 Chamilo 安装服务器时间（Chamilo 中的选项）设置为我的本地时区。

这里有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:10:51.207

解决问题的更快方法是升级到更高版本的 Chamilo（例如 1.9.2）或升级 Epiclock 库的版本，如报告中所建议的那样。如果升级到 1.9.2 没有帮助，它至少可以让开发人员在官方支持的版本上帮助您（这将增加您修复它的机会）。

顺便说一下，Chamilo 开发团队本身主要由欧洲人组成（我是“美洲”中唯一的人）。

您是否尝试将您的时区更改为与您的时区仅相差 1/2 小时的其他时区？我想您与您附近的某些区域必须有 30 分钟的差异，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:56:57.387

检查您的时区 PHP 设置：

```
date.timezone = "Asia/Shanghai" 
```

[http://php.net/manual/fr/datetime.configuration.php](http://php.net/manual/fr/datetime.configuration.php)

顺便说一句，您应该使用[http://stable.chamilo.org](http://stable.chamilo.org)（下一个稳定版本 Chamilo 1.9.4 的最新代码）而不是 chamilodev。

# android - Android：如何从设备获取日志？

> ID：13413860
> 
> 赞同：2
> 
> 时间：2012-11-16T09:35:30.010
> 
> 标签：android

对于测试应用程序，我想添加功能收集数据并通过电子邮件发送。我google了很多，发现只有这种方法：

```
 String cmd = String.format("logcat -d '%s:I' '*:S'", Schema.TAG);
    Process process = Runtime.getRuntime().exec(cmd);
    BufferedReader reader = new BufferedReader( 
            new InputStreamReader(process.getInputStream()));
    while((line = reader.readLine()) != null) {
        builder.append(line);
        builder.append(separator);
    } 
```

但是当我执行这个命令时，我从输入流中得到一个空字符串。

你能建议我如何从设备获取日志吗？

ps 我想避免使用 google analitycs

# c# - Windows Phone 是否有 SyndicationFeed 类？

> ID：13413862
> 
> 赞同：0
> 
> 时间：2012-11-16T09:35:38.040
> 
> 标签：c#, windows-phone, windows-phone-8

是否有`SyndicationFeed`适用于 Windows Phone 的课程？原来的存在于`System.ServiceModel.Syndication`命名空间中，然后在命名空间中有一个适用于 Windows 8 的新的`Windows.Web.Syndication`。但是，我没有在电话中看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:34:29.807

我在这个文件夹中找到了DLL...

C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Libraries\Client

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T13:48:13.557

该 dll 不适用于 WP8

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:11:45.603

此类在库中可用： Silverlight 4.0 的**System.ServiceModel.Syndication.dll**，可以在 WP7 项目中引用（不确定 WP8），但它与 WinRT 中的实现有很大不同。

# android - android无法获取视图位置坐标

> ID：13413873
> 
> 赞同：0
> 
> 时间：2012-11-16T09:36:32.577
> 
> 标签：android, position

我试图获得`textView`使用`getTop()`和`getLeft()`方法的位置，但它们总是返回 0。我从 onCreate() 调用此方法

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView textView = (TextView) findViewById(R.id.hello);

    int top = textView.getLeft();
    int left = textView.getLeft();
    int height = textView.getHeight();

    Log.i("top", "top = " + top);
    Log.i("left", "left = " + left);
    Log.i("height", "height = " + height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:51:20.613

我找到了答案。只需使用`getViewTreeObserver().addOnGlobalLayoutListener`并在此方法中调用 getLeft、getTop 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-10T19:21:18.273

布局传递完成后，将触发布局侦听器。它与特定的活动生命周期无关，因此您必须将观察者添加到布局过程中。

```
 view.getViewTreeObserver().addOnGlobalLayoutListener(
            new ViewTreeObserver.OnGlobalLayoutListener()
            {
                @Override
                public void onGlobalLayout()
                {
                    // Now you may get the left/top/etc. 
                    getCoordsFromView(view);
                    // Optionally remove the listener so future layouts don't change the value
                    view.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                }
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:40:04.890

此时文本视图尚不可见。您需要在活动的生命周期中**稍后**调用它们（请参阅下面的文档）。

引用**[生命周期文档](http://developer.android.com/training/basics/activity-lifecycle/starting.html)**：

> 一旦 onCreate() 完成执行，系统会快速连续调用 onStart() 和 onResume() 方法。您的活动永远不会处于 Created 或 Started 状态。从技术上讲， 当调用 onStart() 时，活动**对用户可见**，但 onResume() 很快就会出现，并且活动保持在 Resumed 状态，直到发生某些事情来改变它

![一些图像](../Images/f19e9cf953b34249173a62947a7b86ef.png)

# sql - 分组值并将分组名称放在列名中

> ID：13413874
> 
> 赞同：1
> 
> 时间：2012-11-16T09:36:47.987
> 
> 标签：sql

有一个问题。我有这个：

```
代码 | 数字
-------------
一个 |1
一个 |2
一个 |3
b |3
b |4

```

我需要让它看起来像：

```
一个 | b
---------
1 | 3
2 | 4
3 | 空值

```

现在我有这个解决方案：

```
SELECT CASE Code WHEN 'a' THEN Number END AS a,
    案例代码 WHEN 'b' THEN Number END AS b
FROM表CN

```

但它给了我这个：

```
一个 | b
---------
1 | 空值
2 | 空值
3 | 空值
空 | 3
空 | 4

```

当然，我在真实表格中有更多的代码和数字。

如果有人有任何建议？我很感激任何帮助！
感谢您的时间。

### 更新1：

伟大的！以前从未见过`PIVOT`功能。但是您已经硬编码了代码：

```
( MAX(Number) FOR 代码输入 ([a],[b]))
```

.

我试着：

```
( MAX(Number) FOR 代码 IN (
选择代码
  FROM 测试表
  按代码分组
))

```

我想我根本不明白发生了什么=（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:52:28.383

这个想法是使用 PIVOT，但由于您在表中没有唯一键，您需要生成一个才能使用 ROW_NUMBER() 输出您的记录集：

此示例将动态执行，[http](http://sqlfiddle.com/#!3/8c592/20) ://sqlfiddle.com/#!3/8c592/20 ：

```
 DECLARE @SQL NVARCHAR(MAX)

  DECLARE @Pivot NVARCHAR(MAX)

  SELECT @Pivot = (SELECT 
                     DISTINCT '['+CODE +'],'
                  FROM
                    tblTest
                  FOR XML PATH(''))

  SET @SQL = '
              SELECT 
                pvt.a, pvt.b
              FROM
                (SELECT Code, Number, ROW_NUMBER() OVER (Partition BY code ORDER BY Number) rn FROM tblTest)
                 tblTest
              PIVOT
                ( MAX(Number) FOR Code IN ('+LEFT(@Pivot,LEN(@Pivot)-1)+'))
                PVT
              '

  EXEC sp_Executesql @statement = @SQL 
```

这段代码会做到这一点，[http](http://sqlfiddle.com/#!3/8c592/11) ://sqlfiddle.com/#!3/8c592/11 ：

```
 SELECT 
     rn,pvt.*
 FROM
    (
      SELECT Code, Number, ROW_NUMBER() OVER (Partition BY code ORDER BY Number) rn 
      FROM tblTest
     )
   tblTest
PIVOT
  ( MAX(Number) FOR Code IN ([a],[b]))
PVT 
```

这是与您的确切输出相匹配的代码，[http](http://sqlfiddle.com/#!3/8c592/14) ://sqlfiddle.com/#!3/8c592/14 ：

```
 SELECT 
    pvt.a, pvt.b
  FROM
    (   
       SELECT Code, Number, ROW_NUMBER() OVER (Partition BY code ORDER BY Number) rn 
       FROM tblTest
    )
     tblTest
  PIVOT
    ( MAX(Number) FOR Code IN ([a],[b]))
    PVT 
```

# r - 作为向量的迭代

> ID：13413876
> 
> 赞同：0
> 
> 时间：2012-11-16T09:36:53.370
> 
> 标签：r

我正在从表单的一系列子集中进行一系列复制

```
pseudo = replicate(10, sample(sub_data$Y1,10)) 
```

我能够获得一个data.frame，其中每次迭代都是一列

```
sub_data     iteration 1    iteration2    iteration...10  
a
a
a
a
a
b
b
b
b
b 
```

但我需要它的形式

```
sub_data  ITERATION      Y1
a          1 
a          1
a          2
a          2
a          3
a          3
b          1 
b          1
b          2
b          2
b          3
b          3 
```

有什么简单的方法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:48:28.430

从你第一次`data.frame`使用`melt from the`reshape2` 包“重塑”它就可以做到这一点。

```
melt(yourdata, id.vars='sub_data') 
```

查看`?melt.data.frame`一些其他命名参数的帮助。

您也可以为此使用 base R，但我发现语法更难。

# objective-c - 在 NSString 中显示时如何使 CGFloat 值更短？

> ID：13413880
> 
> 赞同：3
> 
> 时间：2012-11-16T09:37:07.270
> 
> 标签：objective-c, ios, cgfloat

我是objective-c的新手。我想在 NSString 中显示较短的 CGFloat 值。我知道在 C 中它很容易。但我不知道如何在 Objective-c 中做到这一点。例如，

```
 CGFloat value = 0.333333;
 NSLog(@"%f%%",value*100); 
```

它将显示 33.3333%。但我想让它达到 33.33%。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T09:40:11.117

```
CGFloat value = 0.333333;
NSLog(@"%.2f%%",value*100); 
```

将导致在`33.33%`日志中。

[这](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)是 Apple 文档中的相关部分。Objective-C 格式说明符非常接近（甚至可能与您可能从 C 中知道的相同）。`NSLog()`自动接受格式说明符。要对 any 执行此操作`NSString`，请使用`[NSString stringWithFormat:@"myString", arg1, arg2..]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:41:01.460

或者，如果您愿意，可以`printf()`在 C 中使用 like。

# php - 在 PHP 中屏蔽信用卡号

> ID：13413886
> 
> 赞同：12
> 
> 时间：2012-11-16T09:37:36.173
> 
> 标签：php

我有信用卡号，我想屏蔽如下：

```
$cc = 1234123412341234

echo cc_masking($cc)

1234XXXXXXXX1234

function cc_masking($number) {.....} 
```

请为此建议正则表达式。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-16T09:39:39.277

这应该使用`substr`：

```
function ccMasking($number, $maskingCharacter = 'X') {
    return substr($number, 0, 4) . str_repeat($maskingCharacter, strlen($number) - 8) . substr($number, -4);
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-16T09:51:05.117

您可以使用`substr_replace`

```
$var = '1234123412341234';
$var = substr_replace($var, str_repeat("X", 8), 4, 8);
echo $var; 
```

输出

```
1234XXXXXXXX1234 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-16T09:40:40.447

```
<?php
echo 'XXXX-XXXX-XXXX-'.substr($cc,-4);
?> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-14T16:22:39.323

我的 5 美分。

示例：
371449635398431 => XXX-XXXX-XXXX-8431
4111111111111111 => XXXX-XXXX-XXXX-1111

```
public function maskCreditCardNumber($cc, $maskFrom = 0, $maskTo = 4, $maskChar = 'X', $maskSpacer = '-')
{
    // Clean out
    $cc       = str_replace(array('-', ' '), '', $cc);
    $ccLength = strlen($cc);

    // Mask CC number
    if (empty($maskFrom) && $maskTo == $ccLength) {
        $cc = str_repeat($maskChar, $ccLength);
    } else {
        $cc = substr($cc, 0, $maskFrom) . str_repeat($maskChar, $ccLength - $maskFrom - $maskTo) . substr($cc, -1 * $maskTo);
    }

    // Format
    if ($ccLength > 4) {
        $newCreditCard = substr($cc, -4);
        for ($i = $ccLength - 5; $i >= 0; $i--) {
            // If on the fourth character add the mask char
            if ((($i + 1) - $ccLength) % 4 == 0) {
                $newCreditCard = $maskSpacer . $newCreditCard;
            }

            // Add the current character to the new credit card
            $newCreditCard = $cc[$i] . $newCreditCard;
        }
    } else {
        $newCreditCard = $cc;
    }

    return $newCreditCard;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-21T18:25:03.273

假如说：

*   信用卡号可能包含在包含更多内容的更大字符串中
*   使用 Luhn 算法对所有主要信用卡进行总和检查[https://en.wikipedia.org/wiki/Luhn_algorithm](https://en.wikipedia.org/wiki/Luhn_algorithm)

这就是我所做的：

*   我通过正则表达式检测字符串是否包含由空格和连字符分隔的数字链。
*   对于每场比赛，我将其从非数字值中剥离并检查是否是有效的 Luhn。
*   对于每场比赛，用替换字符（通常是“*”）替换我想要的部分。

代码是这样的：

```
public function mask($string)
{
    $regex = '/(?:\d[ \t-]*?){13,19}/m';

    $matches = [];

    preg_match_all($regex, $string, $matches);

    // No credit card found
    if (!isset($matches[0]) || empty($matches[0]))
    {
        return $string;
    }

    foreach ($matches as $match_group)
    {
        foreach ($match_group as $match)
        {
            $stripped_match = preg_replace('/[^\d]/', '', $match);

            // Is it a valid Luhn one?
            if (false === $this->_util_luhn->isLuhn($stripped_match))
            {
                continue;
            }

            $card_length = strlen($stripped_match);
            $replacement = str_pad('', $card_length - 4, $this->_replacement) . substr($stripped_match, -4);

            // If so, replace the match
            $string = str_replace($match, $replacement, $string);
        }
    }

    return $string;
} 
```

您将看到对 $this->_util_luhn->isLuhn 的调用，这是一个执行此操作的函数：

```
public function isLuhn($input)
{

    if (!is_numeric($input))
    {
        return false;
    }

    $numeric_string = (string) preg_replace('/\D/', '', $input);

    $sum = 0;

    $numDigits = strlen($numeric_string) - 1;

    $parity = $numDigits % 2;

    for ($i = $numDigits; $i >= 0; $i--)
    {
        $digit = substr($numeric_string, $i, 1);

        if (!$parity == ($i % 2))
        {
            $digit <<= 1;
        }

        $digit = ($digit > 9)
            ? ($digit - 9)
            : $digit;

        $sum += $digit;
    }

    return (0 == ($sum % 10));
} 
```

这就是我在[https://github.com/pachico/magoo/](https://github.com/pachico/magoo/)中实现它的方式。希望你觉得它有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-13T21:01:29.720

带正则表达式

```
function cc_masking( $number, $maskChar = 'X' ) {
    return preg_replace(
        '/^(....).*(....)$/',
        '\1' . str_repeat( $maskChar, strlen( $number ) - 8) . '\2',
        $number );
} 
```

您保留前四个字符（和后四个字符），用 X 替换其他字符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-19T16:01:05.487

如果您只想显示最后 4 位数字，这是一种动态方式。适用于信用卡、ACH 号码或任何东西：

[https://gist.github.com/khoipro/815ea292e2e87e10771474dc2ef401ef](https://gist.github.com/khoipro/815ea292e2e87e10771474dc2ef401ef)

```
 $variable = '123123123';
    $length = strlen($variable);
    $output = substr_replace($variable, str_repeat('X', $length - 4), 0, $length - 4);
    echo $output; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-16T09:38:47.250

不需要正则表达式。只需在开头取n个数字，在结尾取n个数字，然后在中间加上X即可完成。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-16T09:45:35.317

不是优雅的方式，但它有效

```
<?php
     $cc = "1234123412341234";
     function cc_masking($number) {
     $int_first = 4;
     $int_last = 4;
     $chars = strlen($number);
     $repeater = "x";
     $repeates = $chars-$int_first-$int_last;
     // echo "<p>Org: $number</p>";
     $mask = substr($number,0,4).str_repeat($repeater,$repeates).substr($cc,-4);
     // echo "<p>Mask: $mask";
         return $mask;
      }
     echo cc_masking($cc);
  ?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-10T17:00:03.730

我正在寻找一些类似的代码。所以我找到了下面的代码。我希望能有所帮助。

```
function mask($val, $mask)
{
    $maskared = '';

    $k = 0;

    for ($i = 0; $i <= strlen($mask) - 1; $i++) {
        if ($mask[$i] == '#') {
            if (isset($val[$k]))
                $maskared .= $val[$k++];
        } else {
            if (isset($mask[$i]))
                $maskared .= $mask[$i];
        }
    }

    return $maskared;
} 
```

样本：

```
echo mask(11111111111, "###.###.###-##"); // 111.111.111-11
echo mask(11111111111, "#####-###"); // 111111-111
echo mask(11111111111, anything); // 111111-111 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-08T17:58:34.143

```
str_pad(substr($value,-4),strlen($value), "X", STR_PAD_LEFT); //output: XXXXXXXXXXXX9494 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-10-12T14:16:39.917

```
$accNum = "1234123412341234";

$accNum1 = substr($accNum,2,2);

$accNum1 = '**'.$accNum1;

$accNum2 = substr($accNum,6,100);

$accNum2 = '**'.$accNum2;

$accNum = $accNum1.$accNum2;

echo $accNum; 
```

# android - Android：SensorEventListener 的时间戳

> ID：13413889
> 
> 赞同：1
> 
> 时间：2012-11-16T09:37:49.703
> 
> 标签：android, android-sensors

当我摇动设备时，我使用 sensorevenetlistner 触发了一个意图，问题只是一点点摇动，意图正在触发，但我希望它仅在我摇动设备 3 次或一定次数的摇动时触发

```
private void getAccelerometer(SensorEvent event) {
    float[] values = event.values;
    // Movement
    float x = values[0];
    float y = values[1];
    float z = values[2];

    float accelationSquareRoot = (x * x + y * y + z * z)
        / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
    long actualTime = System.currentTimeMillis();
    if (accelationSquareRoot >= 2) //
    {
      if (actualTime - lastUpdate < 200) {
        return;
      }
      lastUpdate = actualTime;
      //Toast.makeText(this, "Device was shuffed", Toast.LENGTH_SHORT)
         // .show();

      Intent myIntent = new Intent(SensorTestActivity.this, passwordActivity.class);
      startActivity(myIntent);
  }
}; 
```

下面是我的完整代码

[http://pastebin.com/1WtHYH6z](http://pastebin.com/1WtHYH6z)

我很震惊..任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:45:36.627

使用字段

```
int _shaken; 
```

在你的 SensorEvent 中：（我不知道正确的函数名，但我猜你知道..）

```
OnEvent(){
shaken++;
if(_shaken>=3){
doAction();
_shaken = 0;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:20:01.720

考虑到 Goot 的回答，您的程序应该类似于：

```
int count = 0;
private float mAccel; // acceleration apart from gravity
private float mAccelCurrent; // current acceleration including gravity
private float mAccelLast; // last acceleration including gravity

private void getAccelerometer(SensorEvent event) {
    float[] values = event.values;
    // Movement
    float x = values[0];
    float y = values[1];
    float z = values[2];

    mAccelLast = mAccelCurrent;
    mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
    float delta = mAccelCurrent - mAccelLast;
    mAccel = mAccel * 0.9f + delta; // perform low-cut filter

    //adjust the mAccel > certain_value (adjust this to change the sensitivity of the       
        //shake) 
    if(mAccel > 5) {
    Toast.makeText(SensorTestActivity.this, "Device is shaking!",      
            Toast.LENGTH_SHORT).show();

        count++;
        if(count >= 3) {
            Intent myIntent = new Intent(SensorTestActivity.this,    
                passwordActivity.class);
            startActivity(myIntent);
            count = 0; //if you want to reset the counter after performing the action
        }
    }
} 
```

# iframe - iframe 内容在 Safari 中无法正常工作

> ID：13413895
> 
> 赞同：1
> 
> 时间：2012-11-16T09:38:12.973
> 
> 标签：iframe, safari

我正在尝试在 html 页面中显示 iframe。iframe 在 safari 上无法正常工作。它

在 Firefox 上完美运行，即 Chrome。

代码：

```
<div id="my-div">
<iframe id="my-iframe" scrolling="no" src="http://weather.yahoo.com/"></iframe></div>
<style type="text/css">
#my-div
{
width    : 200px;
height   : 200px;
overflow : hidden;
position : relative;
}

#my-iframe
{
position : absolute;
top      : -300px;
left     : -400px;
width    : 1280px;
height   : 1200px;
}   
</style> 
```

任何解决方案？

# javascript - 显示弹出窗口的最佳方式

> ID：13413896
> 
> 赞同：0
> 
> 时间：2012-11-16T09:38:18.313
> 
> 标签：javascript, asp.net, ajax

我有一个页面，在单击其中一个链接时，我会显示一个弹出窗口。

为了显示该弹出窗口，我使用了一个带有 iframe 的隐藏 div 来加载远程 URL，并使用一个 JavaScript 函数将其显示在页面中心。

什么是最好的选择？

我希望 AJAX 请求调用远程 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:46:04.610

1.  [jQuery UI 对话框](http://jqueryui.com/dialog/#modal-form)
2.  [花式盒子](http://fancybox.net/)
3.  [彩盒](http://www.jacklmoore.com/colorbox)
4.  [灯箱](http://leandrovieira.com/projects/jquery/lightbox/)
5.  [厚盒 - 过时](http://thickbox.net/)

[还有 Google 在 Stack Over Flow 中](https://www.google.com/search?q=using%20webrequest%20asp.net&oq=using%20webrequest%20asp.net&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=en&tbo=d&sclient=psy-ab&q=site%20stackoverflow.com%20jquery%20popup&oq=site%20stackoverflow.com%20jquery%20pop&gs_l=serp.3.0.33i21.749204.751124.6.752692.10.10.0.0.0.0.320.2634.2-9j1.10.0.les;..0.0...1c.1.756ksFfCRvI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=8d44242ae547b3f7&bpcl=38625945&biw=1280&bih=935)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:43:49.923

我总是使用漂亮的照片库，它使您能够打开：

1.  照片库
2.  闪光
3.  内容
4.  框架
5.  YouTube视频
6.  内嵌内容
7.  外部网站

在这里检查：[http ://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:42:02.597

你也可以使用[jQuery 对话框](http://jqueryui.com/dialog/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:42:05.463

您可以只使用 jQuery 插件来帮助您以简单的方式创建和显示弹出窗口。例如，[颜色框](http://www.jacklmoore.com/colorbox)。检查这个例子：[http ://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)

# c++ - C++：当我添加看似无关的代码行时，分段错误消失了

> ID：13413908
> 
> 赞同：1
> 
> 时间：2012-11-16T09:38:48.750
> 
> 标签：c++, vector, iterator, initialization, segmentation-fault

我正在使用 C++ 中附带的指针向量和迭代器。我最初编写它的方式会导致段错误，但是通过看似微不足道的更改，声明和初始化一个未使用的变量，段错误就会消失。有谁知道为什么？

这是段错误的代码。成功执行的最后一行是第 8 行（通过 printf 语句找到）和取消注释的第 4 行摆脱了段错误：

```
1 Intersect RayTracer::closestShape(Ray r){
2    vector<Shape *>::iterator itStart = scene.getShapes().begin();
3    vector<Shape *>::iterator itEnd = scene.getShapes().end();
4    //vector<Shape *> sceneShapes = scene.getShapes();  This is the unused line that will cause the code to run successfully if I uncomment it.
5    Intersect closest = Intersect();
6    for(;itStart != itEnd; itStart++){
7       Intersect currentIntersect = (*itStart)->intersect(r);
8      if(currentIntersect.isHit()){
9          if(currentIntersect.getT() < closest.getT()){
10              closest = currentIntersect;
            }
        }
     }
     return closest;
} 
```

这是不再出现段错误的工作版本：

```
1 Intersect RayTracer::closestShape(Ray r){
2    vector<Shape *> sceneShapes = scene.getShapes();
3    vector<Shape *>::iterator itStart = sceneShapes.begin();
4    vector<Shape *>::iterator itEnd = sceneShapes.end();
5    Intersect closest = Intersect();
6    for(;itStart != itEnd; itStart++){
7       Intersect currentIntersect = (*itStart)->intersect(r);
8      if(currentIntersect.isHit()){
9          if(currentIntersect.getT() < closest.getT()){
10              closest = currentIntersect;
            }
        }
     }
     return closest;
} 
```

如果有人可以澄清为什么会发生这种情况，那将不胜感激！如果我可以添加任何内容来澄清我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T09:42:07.380

`vector<Shape *> sceneShapes = scene.getShapes();`在堆栈上创建持久对象。 `itStart`并`itEnd`指向有效内存。在您的第一个示例中，迭代器指向无效内存，因为它们指向来自调用的临时对象，`scene.getShapes()`该对象已立即被销毁并使您的迭代器无效。

当您取消注释您的`//vector<Shape *> sceneShapes = scene.getShapes();`行时，它返回的向量是英尺到与临时相同的内存边界，并且迭代器再次有效！但它不是 100% 的机会是相同的，您必须非常小心以避免此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:02:30.147

这个功能：

```
scene.getShapes() 
```

可能是按值返回，这意味着当您在第一个示例中调用它时`begin()`，`end()`您是在尚未绑定的临时对象上调用它们。

如果您无法将函数更改为通过引用返回，则可以将 const 引用绑定到它，然后调用`begin()`const`end()`引用，这也将起作用（除了制作您修复的正确副本）。

如果您可以将函数更改为通过引用返回，那就更好了。理想情况下是 const 参考。

注意：返回 const 引用意味着您无法调整向量的大小或更改其中的指针，但指针指向的内容仍然可以更改。这些是指向形状的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:20:05.287

由于已经回答了崩溃的原因，让我尝试回答为什么取消注释您提到的行可能会导致崩溃消失。从函数返回的临时未命名向量将存储在堆栈上，其中将包含指向堆上后备存储的指针（对于在您的情况下是指向 Shape 对象的指针的元素），并且可能很少有人提及大小或结束等等

当迭代器指向后备存储（开始和结束）不再有效时会出现问题，因为临时向量将在语句结束时被销毁（实际上是 2 次）以及内存的后备存储（其中包含指向 Shape 对象的指针）返回给堆管理器。当在堆栈上创建命名向量对象时（当您取消注释已注释掉的行时），向量代码可能会从堆管理器中获取相同的内存块 - 未命名向量得到 - 通过制作迭代器（指针）有效，因此避免了崩溃。在没有命名向量的情况下，堆管理器最终可能会将块分解或将其与大块组合并分配给其他可能随后调用的调用者。

# php - URL 参数消失

> ID：13413909
> 
> 赞同：0
> 
> 时间：2012-11-16T09:38:49.387
> 
> 标签：php, wordpress, url-parameters

我正在创建一个链接，它将像这样添加一个 URL 参数

```
<?php 
    $cat = 10;
    $childcats = get_categories('child_of=' . $cat);
    foreach ($childcats as $childcat) {
        $catName = $childcat->cat_name;
        $catID = $childcat->cat_ID;
?>
    <li <?php if($selectedCat == $catID){?> class="selected" <?php } ?> >
        <a href="<?php echo site_url('/lookbook/'); ?>?cat=<?php echo $catName ?>"><?php echo $catName ?></a>
    </li>
<?php
    }
?> 
```

但是，当我单击链接时，页面会在没有附加参数的情况下重新加载，这意味着我的参数依赖功能不起作用。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:06:40.027

$catName 来自哪里？

这些页面之一可能有助于用您需要的内容填充 $catName：

[http://codex.wordpress.org/Function_Reference/get_cat_name](http://codex.wordpress.org/Function_Reference/get_cat_name)

或者

[http://codex.wordpress.org/Function_Reference/get_the_category](http://codex.wordpress.org/Function_Reference/get_the_category)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:19:02.627

请使用与 不同的查询参数`cat`。我几乎 100% 确定您的问题是由`cat`WordPress 中的内置查询参数引起的，因此 WordPress 会解析该参数并将您重定向到正确的 URL（如果您使用的是漂亮的永久链接），或者修改当前查询。有关`WP_Query`接受的参数列表（我不确定，是否可以从 URL 设置所有参数），请参阅[Class Reference/WP Query](http://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)。

我建议您使用例如`_cat`：

```
<?php 
    $cat = 10;
    $childcats = get_categories('child_of=' . $cat);
    foreach ($childcats as $childcat) {
        $catName = $childcat->cat_name;
        $catID = $childcat->cat_ID;
?>
    <li <?php if($selectedCat == $catID){?> class="selected" <?php } ?> >
        <a href="<?php echo site_url('/lookbook/'); ?>?_cat=<?php echo $catName ?>"><?php echo $catName ?></a>
    </li>
<?php
    }
?> 
```

# windows-8 - 如何在 Windows 8 上启用 WebDAV 的基本身份验证

> ID：13413914
> 
> 赞同：5
> 
> 时间：2012-11-16T09:39:10.497
> 
> 标签：windows-8, webdav, basic-authentication

以前，我曾经能够`http://`在 Windows XP Professional 笔记本电脑上的 Excel（2003 版）中仅使用基本身份验证（用户名/密码）作为文本文件从 URL 访问外部数据。

我最近购买了一台运行 Excel 2010 的新 Windows 8 笔记本电脑，但现在我无法访问相同的外部数据。显然 Windows 8 上 WebDAV 的基本身份验证默认情况下未启用。

在互联网上搜索，我只找到了为 Windows 8 之前的 Windows 版本启用 WebDAV 基本身份验证的解决方案。

谁有一个“简单”的解决方案来解决这个问题？请注意，我不是开发人员，只是用户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T06:01:23.763

遇到同样的问题。在这里找到了一个解决方案，即使这篇文章是针对 Windows 7 的。它的工作原理是一样的。

[http://www.yeehawup.com/2011/07/mapping-a-network-drive-to-webdav-share-in-windows-7/](http://www.yeehawup.com/2011/07/mapping-a-network-drive-to-webdav-share-in-windows-7/)

博文中的相关信息（令我震惊的是四年后仍然存在）是设置注册表DWORD

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\
Parameters\BasicAuthLevel 
```

到 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T20:29:57.900

这是包含注册表项的[WebDav 重定向器](https://www.iis.net/learn/publish/using-webdav/using-the-webdav-redirector#004)的 Microsoft 文档。基本上 2 允许您强制允许没有 HTTPS 的基本身份验证（这是一个糟糕的选择，不要这样做）。

# java - 如何在html的td标签中传递Java变量值

> ID：13413921
> 
> 赞同：-4
> 
> 时间：2012-11-16T09:39:43.723
> 
> 标签：java, html

字符串 TC_Status="PASS";

如何在 html 的 td 标签中传递 TC_Status 值“PASS”

```
 File f = new File("source.htm");
        BufferedWriter bw = new BufferedWriter(new FileWriter(f));
        bw.write("<html>");
        bw.write("<body>");
        bw.write("<table cellspacing="+50+">");
        bw.write("<tr>");
        bw.write("<td>S.No</td>");
        bw.write("<td>TestCaseDescription</td>");
        bw.write("<td>Status</td>");
        bw.write("<td>Screenshot</td>");
        bw.write("</tr>");

        bw.write("<tr>");
        bw.write("<td>1</td>");
        bw.write("<td>Login</td>");
        bw.write("<td></td>");     ---------------------------------- HERE PASS is to be displayed

        bw.write("<td></td>");      
        bw.write("</tr>");

        bw.write("</table>");
        bw.write("</body>");
        bw.write("</html>");
        bw.close(); 
```

请帮助完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:41:56.377

这应该工作

```
bw.write("<td>"+TC_Status+"</td>"); 
```

# matlab - matlab中的音频信号处理

> ID：13413922
> 
> 赞同：-3
> 
> 时间：2012-11-16T09:39:47.703
> 
> 标签：matlab, audio, signals, filtering, processing

我对matlab中音频文件的信号处理有疑问。

我想要做的是以下内容：

*   我将记录呼吸努力并将其保存在 wav 文件中。
*   在matlab中读取wav文件，只取[200-800]Hz之间的频率。
*   绘制此频段 [200-800]Hz 的信号

谁能告诉我如何在matlab中编写这些步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:02:08.957

在 Windows 中，Matlab 对音频有很好的支持（至少比 Linux/Mac 好）。查看`audiorecorder`, `audiowrite`, `wavread`, `filter`（结合`firls`或任何其他可以进行带通滤波的滤波器设计函数）和`plot`。

# android - 受密码保护的安卓应用

> ID：13413923
> 
> 赞同：5
> 
> 时间：2012-11-16T09:39:49.513
> 
> 标签：android, security

我想制作一个安全应用程序，万一被盗或丢失，我的应用程序必须在没有密码的情况下卸载。是的，可以制作这样一个可以在卸载之前获取密码的应用程序。我的朋友[Aditya Nikhade](https://stackoverflow.com/users/1397348/aditya-nikhade)制作了这个应用程序 :)。但他没有给我这个秘密食谱:( 从谷歌 Play 安装这个应用程序[Findroid](https://play.google.com/store/apps/details?id=com.idroid.findroid&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5pZHJvaWQuZmluZHJvaWQiXQ..)。在这个应用程序首先你需要解锁你的应用程序然后只有你可以卸载它。所以请帮助我如何破解这种技术..我搜索并得到了一些不完整的答案，因为我们可以声明一个**PACKAGED_REMOVED**类型的接收器，但我想知道如何如果我的应用程序正在被卸载，我会停止。我离解决方案有点近。我正在[设备管理员上工作/学习](http://developer.android.com/guide/topics/admin/device-admin.html#sample). 如果有人有，请粘贴代码片段。非常感谢您提前....!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:33:49.177

不幸的是，`ACTION_PACKAGE_REMOVED`意图将发送给除您自己之外的所有接收者。

我认为最接近您所寻找的是 2.2 中引入的设备管理功能。

应用程序注册为设备管理员后，除非未注册，否则无法卸载。这将防止应用程序被卸载。

虽然设备管理 API 不允许对此特定功能进行密码保护，但您可以对应用程序进行密码保护，以防止有人篡改应用中的设备管理功能。

因此，每当用户尝试更改设备管理功能时，您都可以提示用户输入密码。

当试图篡改您的应用的设备管理员权限时，将这些操作添加到您的清单以触发应用

```
 <intent-filter>
        <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        <action android:name="android.app.action.DEVICE_ADMIN_DISABLED" />
    </intent-filter> 
```

在此操作上，您可以使用密码保护！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:17:32.327

我认为它应该运行后台服务。否则，未运行的应用程序将没有任何机会发现自己发生了什么。我不确定如何捕捉“PACKAGE_REMOVED”事件，但它应该来自作为系统服务运行的其他元素。因此，强制该服务停止的系统可能会被捕获。

# mathematica-8 - 将mathematica循环的输出存储在文件中

> ID：13413924
> 
> 赞同：2
> 
> 时间：2012-11-16T09:39:49.463
> 
> 标签：mathematica-8

我在相对精细的网格上为不同的参数化运行数学中的 for 循环。该循环相当耗时，我想将其自动化，以便我可以在夜间运行它。因此，我将在参数向量上创建另一个 for - 循环。但我不知道如何将该循环的每次运行的输出存储在单独的文件中。基本上，我希望mathematica 创建一个标有参数值的文件夹，并将for 循环的输出存储在该文件夹中。这可能吗，谁能告诉我如何编程？

# mysql - 组合两个查询而不省略行

> ID：13413925
> 
> 赞同：2
> 
> 时间：2012-11-16T09:39:50.540
> 
> 标签：mysql

我有两个表，我需要这两个表中的记录。

# 查询 1

```
SELECT SUM(rec_issued) AS issed,
       regen_id,
       YEAR(issue_date) AS iYear,
       MONTH(issue_date) AS iMonth
FROM `view_rec_issued`
WHERE `regen_id` = 2
GROUP BY YEAR(issue_date) DESC, MONTH(issue_date) DESC
ORDER BY issue_date ASC 
```

给出这个结果：

```
| issed | regen_id | iYear | iMonth |
-------------------------------------
|   424 |        2 |  2011 |      3 |
|  4340 |        2 |  2011 |      4 |
|  4235 |        2 |  2011 |      5 |
| 10570 |        2 |  2012 |      2 |
|  4761 |        2 |  2012 |      3 |
|  5000 |        2 |  2012 |      4 |
|  3700 |        2 |  2012 |      5 |
|  3414 |        2 |  2012 |      6 |
|  3700 |        2 |  2012 |      7 |
|  2992 |        2 |  2012 |      8 |
|   995 |        2 |  2012 |     10 | 
```

# 查询 2

```
SELECT SUM(total_redem) AS redemed,
       regen_id,
       YEAR(redemption_date) AS rYear,
       MONTH(redemption_date) AS rMonth
FROM `recredem_month_wise`
WHERE `regen_id` = 2
GROUP BY YEAR(redemption_date) DESC, MONTH(redemption_date) DESC
order by redemption_date ASC 
```

给出这个结果：

```
| redemed | regen_id | rYear | rMonth |
---------------------------------------
|     424 |        2 |  2011 |      3 |
|     260 |        2 |  2011 |      4 |
|    6523 |        2 |  2011 |      5 |
|    1070 |        2 |  2011 |      6 |
|     200 |        2 |  2011 |     10 |
|     500 |        2 |  2011 |     11 |
|    9750 |        2 |  2012 |      2 |
|    5000 |        2 |  2012 |      3 |
|    5500 |        2 |  2012 |      4 |
|    3803 |        2 |  2012 |      5 |
|    3700 |        2 |  2012 |      7 |
|    3000 |        2 |  2012 |      8 | 
```

# 期望的结果

但我想要这样：

```
|  issed | regen_id |  iYear | iMonth | redemed | regen_id |  rYear | rMonth |
-------------------------------------------------------------------------------
|    424 |        2 |   2011 |      3 |     424 |        2 |   2011 |      3 |
|   4340 |        2 |   2011 |      4 |     260 |        2 |   2011 |      4 |
|   4235 |        2 |   2011 |      5 |    6523 |        2 |   2011 |      5 |
|   NULL |     NULL |   NULL |   NULL |    1070 |        2 |   2011 |      6 |
|   NULL |     NULL |   NULL |   NULL |     200 |        2 |   2011 |     10 |
|   NULL |     NULL |   NULL |   NULL |     500 |        2 |   2011 |     11 |
|  10570 |        2 |   2012 |      2 |    9750 |        2 |   2012 |      2 |
|   4761 |        2 |   2012 |      3 |    5000 |        2 |   2012 |      3 |
|   5000 |        2 |   2012 |      4 |    5500 |        2 |   2012 |      4 |
|   3700 |        2 |   2012 |      5 |    3803 |        2 |   2012 |      5 |
|   3414 |        2 |   2012 |      6 |    NULL |     NULL |   NULL |   NULL |
|   3700 |        2 |   2012 |      7 |    3700 |        2 |   2012 |      7 |
|   2992 |        2 |   2012 |      8 |    3000 |        2 |   2012 |      8 |
|    995 |        2 |   2012 |     10 |    NULL |     NULL |   NULL |   NULL | 
```

在这些表中`regen_id`是唯一的，我需要数据`YEAR`和`MONTH`. 如果一个表在特定月份和年份中没有任何记录，那么它应该检索零或`NULL`。

但在每一个创纪录的年份和月份都应该像这样 -

```
 iYear = rYear and iMonth = rMonth 
```

所以我们可以合并两个字段 - 不需要显示年份和月份两次

```
iYear and rYear = year
iMonth and rMonth = month 
```

* * *

# 更新

我试过这个查询，几乎解决了这个问题，但记录不是以“YEAR DESC，MONTH DESC”的形式排序的。

```
SELECT DISTINCT A.issed, A.regen_id, A.iYear AS yrs, A.iMonth AS mnt, B.redemed, B.regen_id, B.rYear AS yrs, B.rMonth AS mnt
FROM(SELECT SUM(rec_issued) AS issed, regen_id, YEAR(issue_date) AS iYear, MONTH(issue_date) AS iMonth  
FROM `view_rec_issued` 
WHERE `regen_id` = 2 
GROUP BY YEAR(issue_date) DESC, MONTH(issue_date) DESC 
ORDER BY issue_date ASC) AS A 
LEFT JOIN 
(SELECT SUM(total_redem) AS redemed, regen_id, YEAR(redemption_date) AS rYear, MONTH(redemption_date) AS rMonth
FROM `recredem_month_wise` 
WHERE `regen_id` = 2 
GROUP BY YEAR(redemption_date) DESC, MONTH(redemption_date) DESC 
ORDER BY redemption_date ASC) AS B ON A.iYear = B.rYear AND A.iMonth = B.rMonth

UNION

SELECT DISTINCT A.issed, A.regen_id, A.iYear AS yrs, A.iMonth AS mnt, B.redemed, B.regen_id, B.rYear AS yrs, B.rMonth AS mnt
FROM(SELECT SUM(rec_issued) AS issed, regen_id, YEAR(issue_date) AS iYear, MONTH(issue_date) AS iMonth  
FROM `view_rec_issued` 
WHERE `regen_id` = 2 
GROUP BY YEAR(issue_date) DESC, MONTH(issue_date) DESC 
ORDER BY issue_date ASC) AS A 
RIGHT JOIN 
(SELECT SUM(total_redem) AS redemed, regen_id, YEAR(redemption_date) AS rYear, MONTH(redemption_date) AS rMonth 
FROM `recredem_month_wise` 
WHERE `regen_id` = 2 
GROUP BY YEAR(redemption_date) DESC, MONTH(redemption_date) DESC 
ORDER BY redemption_date ASC) AS B ON A.iYear = B.rYear AND A.iMonth = B.rMonth 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:57:37.970

您所描述的称为 a ：您想要两个表中的所有行，如果未找到匹配项，则`FULL OUTER JOIN`填充另一个表。`NULL`不幸的是，MySQL 不提供完整的外部连接，因此您必须模拟它们。

另请参阅[MySQL 中的完全外部联接](https://stackoverflow.com/questions/4796872/full-outer-join-in-mysql)。

# 模拟完全外连接的规范方式

编写此方法的一种方法如下，它`NULL`为丢失的匹配项生成。

```
(SELECT I.iYear AS `year`, I.iMonth AS `month`, I.issed, R.redeemed
 FROM (
  SELECT SUM(rec_issued) AS issed,
         regen_id,
         YEAR(issue_date) AS iYear,
         MONTH(issue_date) AS iMonth
  FROM `view_rec_issued`
  WHERE `regen_id` = 2
  GROUP BY YEAR(issue_date), MONTH(issue_date)
 ) I
 LEFT JOIN (
  SELECT SUM(total_redem) AS redemed,
         regen_id,
         YEAR(redemption_date) AS rYear,
         MONTH(redemption_date) AS rMonth
  FROM `recredem_month_wise`
  WHERE `regen_id` = 2
  GROUP BY YEAR(redemption_date), MONTH(redemption_date)
 ) R
 ON (I.iYear = R.rYear AND I.iMonth = R.rMonth)
)
UNION DISTINCT
(SELECT R.iYear AS `year`, R.iMonth AS `month`, I.issed, R.redeemed
 FROM (
  SELECT SUM(total_redem) AS redemed,
         regen_id,
         YEAR(redemption_date) AS rYear,
         MONTH(redemption_date) AS rMonth
  FROM `recredem_month_wise`
  WHERE `regen_id` = 2
  GROUP BY YEAR(redemption_date), MONTH(redemption_date)
 ) R
 LEFT JOIN (
  SELECT SUM(rec_issued) AS issed,
         regen_id,
         YEAR(issue_date) AS iYear,
         MONTH(issue_date) AS iMonth
  FROM `view_rec_issued`
  WHERE `regen_id` = 2
  GROUP BY YEAR(issue_date), MONTH(issue_date)
 ) I
 ON (I.iYear = R.rYear AND I.iMonth = R.rMonth)
)
ORDER BY `year` ASC, `month` ASC 
```

您可以通过为其包含的子查询编写视图来缩短它，但如果您希望能够更改`regen_id`，那么这仍然是相当庞大的代码。

# 与零联合

您可以通过完全避免外部连接来使事情变得更容易，而是使用不同的联合，将零填充到如下所示的行中：

```
SELECT YEAR(`date`) AS `year`, MONTH(`date`) AS `month`,
       SUM(rec_issued) AS issued, SUM(total_redem) AS redeemed
FROM (
    SELECT issue_date AS `date`, rec_issued, 0 AS total_redem
    FROM view_rec_issued WHERE regen_id = 2
  UNION ALL
    SELECT redemption_date AS `date`, 0 AS rec_issued, total_redem
    FROM redemption_month_wise WHERE regen_id = 2
  ) AS U
GROUP BY EXTRACT(YEAR_MONTH FROM `date`) ASC 
```

# 左加入所有子查询查找月份

下表进行外连接模拟只是为了查找出现在任一表中的日期。然后它会进行左连接来计算总和。因此，它将返回零而不是`NULL`缺失值。

```
SELECT LEFT(DI.ym, 4) + 0 AS `year`, RIGHT(DI.ym, 2) + 0 AS `month`,
       DI.issed, SUM(R.total_redem) AS redeemed
FROM
 (SELECT D.ym, SUM(I.rec_issued) AS issed
  FROM
   (SELECT DISTINCT EXTRACT(YEAR_MONTH FROM issue_date) as ym
    FROM view_rec_issued
    WHERE regen_id = 2
   UNION DISTINCT
    SELECT DISTINCT EXTRACT(YEAR_MONTH FROM redemtion_date) AS ym
    FROM recredem_month_wise
    WHERE regen_id = 2
   ) AS D
  LEFT JOIN view_rec_issued AS I
         ON I.regen_id = 2
        AND EXTRACT(YEAR_MONTH FROM I.issue_date) = D.ym
 ) AS DI
LEFT JOIN recredem_month_wise AS R
       ON R.regen_id = 2
      AND EXTRACT(YEAR_MONTH FROM R.redemtion_date) = DI.ym
GROUP BY DI.ym ASC 
```

这将不得不比上面的查询多看一次每个表，所以它可能会更慢。如果您担心性能，只需尝试两者并对其进行基准测试。就代码长度而言，这里的这个查询要紧凑得多，我相信也更具可读性。

*请注意*，上述查询在[这篇文章的过去修订版中](https://stackoverflow.com/posts/13415184/revisions)有所不同。该版本省略了子查询`DI`。结果更容易阅读，但不幸的是**错误**的：如果一个月内有两个问题和三个赎回，那么连接将把这个月的六行合并，因此每个问题计算三次，每个赎回计算两次。

到目前为止，所有查询都未经测试。如果您的问题在[http://sqlfiddle.com/](http://sqlfiddle.com/)上附带了一些示例数据，那么在将它们发布到此处之前，我会在那里尝试我的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:37:38.150

按以下顺序试一试：

```
SELECT * FROM 
(SELECT DISTINCT A.issed, A.regen_id, A.iYear, A.iMonth, B.redemed, B.regen_id, B.rYear, B.rMonth
FROM (SELECT SUM(rec_issued) AS issed, regen_id, YEAR(issue_date) AS iYear, MONTH(issue_date) AS iMonth  
FROM `view_rec_issued` 
WHERE `regen_id` = 2 
GROUP BY YEAR(issue_date) DESC, MONTH(issue_date) DESC 
ORDER BY issue_date ASC) AS A 
LEFT JOIN 
(SELECT SUM(total_redem) AS redemed, regen_id, YEAR(redemption_date) AS rYear, MONTH(redemption_date) AS rMonth 
FROM `recredem_month_wise` 
WHERE `regen_id` = 2 
GROUP BY YEAR(redemption_date) DESC, MONTH(redemption_date) DESC 
ORDER BY redemption_date ASC) AS B ON A.iYear = B.rYear AND A.iMonth = B.rMonth
UNION 
SELECT DISTINCT A.issed, A.regen_id, A.iYear, A.iMonth, B.redemed, B.regen_id, B.rYear, B.rMonth
FROM (SELECT SUM(rec_issued) AS issed, regen_id, YEAR(issue_date) AS iYear, MONTH(issue_date) AS iMonth  
FROM `view_rec_issued` 
WHERE `regen_id` = 2 
GROUP BY YEAR(issue_date) DESC, MONTH(issue_date) DESC 
ORDER BY issue_date ASC) AS A 
RIGHT JOIN 
(SELECT SUM(total_redem) AS redemed, regen_id, YEAR(redemption_date) AS rYear, MONTH(redemption_date) AS rMonth 
FROM `recredem_month_wise` 
WHERE `regen_id` = 2 
GROUP BY YEAR(redemption_date) DESC, MONTH(redemption_date) DESC 
ORDER BY redemption_date ASC) AS B ON A.iYear = B.rYear AND A.iMonth = B.rMonth) AS C
ORDER BY iYear DESC, iMonth DESC 
```

# matlab - 将行向量更改为列向量

> ID：13413930
> 
> 赞同：10
> 
> 时间：2012-11-16T09:40:12.800
> 
> 标签：matlab, vector

目前，所有 750 个条目都在一行上，如何将其更改为一列？

```
p = normal(1:750)-1; 
```

我试过了：

```
columns = 1;
p = normal(1:750)-1;
p = p(1:columns); 
```

我也试过：

```
rows = 1000;
p = normal(1:750)-1;
p = p(1:rows)'; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-16T10:57:48.180

MATLAB 中的常见做法是使用[`colon`](http://www.mathworks.com/help/matlab/ref/colon.html)运算符`:`将*​​任何内容*转换为列向量。在不知道或关心`normal`是行向量还是列向量的情况下，您可以强制`p`成为列向量，如下所示：

```
p = p(:); 
```

在此之后，**保证**`p`是一个列向量。

 *** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T09:42:46.773

我想你可以转置：

```
p = (normal(1:750)-1)' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-26T03:45:31.250

环境

```
p = p(:); 
```

确实是最好的方法，因为它会可靠地创建列向量。

小心使用`'`操作符进行转置。我已经看到它失败了很多次。用于非共轭转置的 matlab 运算符实际上是`.'`这样的：

```
p = p.' 
```

如果您想在不采用复共轭的情况下进行转置。**

# css - 如何使输入元素显示与块元素相同？

> ID：13413932
> 
> 赞同：0
> 
> 时间：2012-11-16T09:40:18.303
> 
> 标签：css, input

我想在他附近用固体制作通用流体元素并将它们排成一行：

```
// wrapper starts here
[=(XX%)=solid=] [---------------------(auto)-fluid-]
[=(XX%)=solid====================] [--(auto)-fluid-]
[-(auto)-fluid---------------------] [=(XX%)=solid=]
[-(auto)-fluid--] [=(XX%)=solid====================]
// wrapper ends here 
```

但是当我尝试使用“float：”样式属性的传统变体时 - 在“input”元素上失败：http: [//jsfiddle.net/iegik/pMRD8/](http://jsfiddle.net/iegik/pMRD8/)

还尝试了类似问题中提供的 hack：[是什么让我的输入元素无法像块元素一样显示？](https://stackoverflow.com/questions/3424800/whats-keeping-my-input-element-from-displaying-like-a-block-element)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:56:52.487

可以使用一点 javascript 和数学：

```
var b = $("#mainWrap").css('padding').split('p')[0];
$("#fluidInput").width($("#mainWrap").width() - $("#btn1").width() - (b * 2)); 
```

[http://jsfiddle.net/TNCodeMonkey/pMRD8/4/](http://jsfiddle.net/TNCodeMonkey/pMRD8/4/)

# php - 带有条件的左连接中的查询问题

> ID：13413933
> 
> 赞同：1
> 
> 时间：2012-11-16T09:40:32.897
> 
> 标签：php, mysql

我有这个查询可以帮助我获得当前用户的积分，现在，我在设置条件时遇到了问题......

```
$query4 =  'SELECT u.*, SUM(c.ts) AS total_sum1, SUM(r.bv) AS total_sum 
FROM users u 
LEFT JOIN 
 (SELECT user_id ,SUM(points) AS ts FROM coupon GROUP BY user_id) c 
 ON u.user_id=c.user_id AND u.user_id="'.$_SESSION['user_name'].'"
LEFT JOIN 
 (SELECT user_id ,SUM(basket_value) AS bv FROM retailer GROUP BY user_id) r 
ON u.user_id=r.user_id 
GROUP BY u.user_id'; 
```

我的问题是`AND u.user_id="'.$_SESSION['user_name'].'"`

我需要找到这个特定用户的积分。我做错了什么吗？我的意思是，我知道我是，但是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:51:35.670

像这样写你的查询

```
$query4 =  'SELECT u.*, SUM(c.ts) AS total_sum1, SUM(r.bv) AS total_sum 
FROM users u 
LEFT JOIN 
 (SELECT user_id ,SUM(points) AS ts FROM coupon GROUP BY user_id) c 
 ON u.user_id=c.user_id 
LEFT JOIN 
 (SELECT user_id ,SUM(basket_value) AS bv FROM retailer GROUP BY user_id) r 
ON u.user_id=r.user_id 
where u.user_id="'.$_SESSION['user_name'].'"
GROUP BY u.user_id'; 
```

# java - Java 连续循环（无需等待的循环）

> ID：13413934
> 
> 赞同：1
> 
> 时间：2012-11-16T09:40:35.563
> 
> 标签：java, iterator, while-loop

我希望有一个连续运行的循环，而无需等待循环中的内容。例如，在下面的示例中，我想迭代一个列表并调用一个名为 doSomething() 的方法，一旦调用了 doSomething() 方法，我希望循环继续到第二个项目，第三个项目，以此类推……</p>

```
 while(it.hasNext())
 {
    MyObject obj = (MyObject)it.next();
    doSomething(obj);
 } 
```

它可以用轮询器来完成，但我不想用轮询器来做。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:49:25.493

为此，您需要运行多个线程，以便多个调用可以并行运行。您可以手动执行此操作，但最好使用现有的实用程序，例如[`ThreadPoolExecutor`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html). 这需要`Runnables`并并行运行它们。

例如

```
// Create an executor that can run up to 10 jobs in parallel.
ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 10, 5, TimeUnit.Seconds, new LinkedBlockingQueue());
while(it.hasNext()) {
    // NB: Final is needed so that this can be accessed within the anonymous inner class
    final MyObject obj = (MyObject)it.next();
    // Queue up the doSomething to be run by one of the 10 threads
    executor.execute(new Runnable() {
        public void run() {
            doSomething(obj);
        }
    }
} 
```

使用这段代码，循环所做的就是安排 doSomething 方法的执行。之后，它继续执行下一次执行。实际的 doSomething 由`ThreadPoolExecutor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:49:06.050

我通常会建议生成一个新线程，它会为你“做某事”，但这真的取决于“做某事”的作用，你要迭代多少个对象等等......

# android - 如何检查设备是否有闪光灯 LED android

> ID：13413938
> 
> 赞同：24
> 
> 时间：2012-11-16T09:40:44.703
> 
> 标签：android, android-camera

如何检查设备是否有 LED 摄像头（手电筒）。我说的是安卓操作系统的设备？

我已经看到了一些解决方案，这些解决方案讨论了如何打开和关闭 LED，但是如果设备甚至没有 LED 会发生什么。

打开我正在使用的相机`camera.open()`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-25T21:01:28.083

其他答案

```
boolean hasFlash = this.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH); 
```

不适用于新的 2013 Nexus 7。以下代码将起作用：

```
public boolean hasFlash() {
        if (camera == null) {
            return false;
        }

        Camera.Parameters parameters;
        try {
            parameters = camera.getParameters();
        } catch (RuntimeException ignored)  {
            return false;
        }

        if (parameters.getFlashMode() == null) {
            return false;
        }

        List<String> supportedFlashModes = parameters.getSupportedFlashModes();
        if (supportedFlashModes == null || supportedFlashModes.isEmpty() || supportedFlashModes.size() == 1 && supportedFlashModes.get(0).equals(Camera.Parameters.FLASH_MODE_OFF)) {
            return false;
        }

        return true;
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T09:44:19.610

`getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)`如果设备有闪存，则返回 true。有关更多详细信息，请参阅[此](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#hw-features)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T09:44:29.297

您应该能够通过检查系统功能来检查闪存是否可用：

```
boolean hasFlash = this.getPackageManager()
                       .hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH); 
```

（前提是你在一个`Activity`）。如果不是，则使用某种`context`代替`this`.

PS 请注意，如果您实际尝试搜索，则很容易找到此信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T09:50:46.693

```
PackageManager pm = context.getPackageManager();
        if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Log.e("err", "Device has no camera!");
            return;
        }       
        camera = Camera.open();
        p = camera.getParameters();
        flashModes = p.getSupportedFlashModes();
if(flashModes==null){
                        Toast.makeText(getApplicationContext(), "LED Not Available",Toast.LENGTH_LONG).show();
                }else
                {
Toast.makeText(getApplicationContext(), "LED  Available",Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-06T12:28:45.660

这就是我检查 LED 闪光灯是否可用的方法。此外，您不需要拥有相机权限即可运行此方法。

```
private fun isLedFlashAvailable(context: Context): Boolean {
    // method 1
    if (context.packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) {
        return true
    }

    // method 2
    val cameraManager = context.getSystemService(Context.CAMERA_SERVICE) as CameraManager
    for (id in cameraManager.cameraIdList) {
        if (cameraManager.getCameraCharacteristics(id).get(CameraCharacteristics.FLASH_INFO_AVAILABLE) == true) {
            return true
        }
    }

    return false
} 
```

# android - 如何通过更好的 OO 使 Android 活动更小

> ID：13413939
> 
> 赞同：0
> 
> 时间：2012-11-16T09:40:46.653
> 
> 标签：android, android-fragments, android-activity

我经常遇到一个问题，我的活动变成了难以阅读和维护的庞大的类。例如，如果我有一个搜索表单活动，就会发生很多事情。一些字段填充了来自 Web 服务调用的数据，一些字段响应对其他字段的操作、保存状态、恢复状态、处理用户输入等。

正如我所看到的，有几个选项可以改善这一点：

1.  将活动分成几个片段，每个片段控制一组相关字段。这种方法有几个优点。这些片段可以很容易地在其他活动中重复使用，例如，如果您有一个基本搜索活动和一个高级搜索活动，则基本搜索片段可以在高级搜索活动中重复使用。您还可以获得生命周期挂钩，因此片段可以负责保存和恢复它自己的状态以及暂停和重新启动服务器调用等。这种方法的一个缺点是您不能在片段中包含片段。例如，如果您想使用片段视图分页器，则不能将这些较小的片段嵌套在较大的容器片段中以进入视图分页器。另外我不确定这是否符合片段的设计理念。

2.  实施控制一组相关字段的自定义视图组。同样，这将具有从活动中删除与这些字段相关的大量代码的优势，并且您最终将获得一个可重用的 UI 组件。它还具有保存和恢复自身状态的能力。这样做的一个缺点是它仍然会与活动绑定以控制生命周期事件。此外，我不确定这些自定义视图组是否适合从 Web 服务或数据库调用中检索自己的数据、处理用户输入等。对我来说，自定义视图组应该只负责在 UI 上显示数据。

3.  实现一个定制的 MVC 类型框架，其中活动从布局中获取视图并创建 POJO 控制器的集合，这些控制器负责填充字段、执行 Web 服务和数据库调用以及处理用户输入。这种方法的另一个缺点是活动仍将负责传播生命周期事件，以便控制器保存和恢复状态等。

我对其他人如何处理和解决这个问题很感兴趣？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:14:56.740

如果我打算将部分 UI 用于手机和平板电脑，我喜欢使用 Fragments 来对这些职责进行分组。由于 Android 4.2 Fragments 的发布具有[getChildFragmentManager](http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager%28%29)方法，这允许嵌套片段，并且此方法也可通过支持库获得。

对于所有其他情况，我创建使用它们处理的 ViewGroup 创建的 POJO 控制器。如果他们需要来自 Activity 的特殊回调，您必须将此方法传递给控制器​​。这有时令人厌烦，但仍然比在活动生命周期回调方法中包含所有代码更干净。

# facebook - FB 分享未在 IE8 中显示

> ID：13413940
> 
> 赞同：1
> 
> 时间：2012-11-16T09:40:48.973
> 
> 标签：facebook, facebook-javascript-sdk, facebook-sharer

此代码在 FireFox 中运行良好，但在 IE8 fbshare 按钮中未显示。

```
 <div style='float: left;'>
  <script src='http://static.ak.fbcdn.net/connect.php/js/FB.Share' type='text/javascript'></script>
    <a name='fb_share'></a>
 </div> 
```

[http://codebins.com/bin/4ldqp6l](http://codebins.com/bin/4ldqp6l)

检查上面的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:03:38.273

我认为这已被弃用，这已经在这些线程中得​​到了回答：

[FB Share 按钮不再显示](https://stackoverflow.com/questions/11548493/fb-share-button-is-not-being-displayed-anymore)

[IE8 中的 FB 分享按钮 Javascript 错误](https://stackoverflow.com/questions/11594442/fb-share-button-javascript-error-in-ie8)

# javascript - Sencha Touch 2 中有哪些可用的事件监听器？

> ID：13413942
> 
> 赞同：-1
> 
> 时间：2012-11-16T09:40:57.787
> 
> 标签：javascript, extjs, touch

我对 Sencha Touch 2 和 Ext JS 有一点经验。我很难在框架中找到可用的 eventlinsteners（例如点击、显示、隐藏等）及其描述。任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:59:16.827

好吧，看看文档中的[列表](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-cfg-listeners)[`listeners`](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-cfg-listeners)，它有一个配置。
在此配置中，您可以指定诸如`itemtap`或之类的事件`hide`。

让我们看看事件[`itemtap`](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-event-itemtap)：

```
itemtap( this, index, target, record, e, eOpts ) 
```

它有 6 个参数可供您使用。参数`this`和`eOpts`对于每个事件都是通用的。
在您的代码中，它看起来像这样：

```
Ext.create('Ext.List', {
  fullscreen: true,
  itemTpl: '{title}',
  data: [
    { title: 'Item 1' },
    { title: 'Item 2' },
    { title: 'Item 3' },
    { title: 'Item 4' }
  ],
  listeners: {
    itemtap: function(cmp, index, target, record, e, eOpts){
      alert('Tapped on index: '+index);
    }
  }
}); 
```

当您点击列表中的某些内容时，这将提醒一条消息，祝您好运:)。

# android - Android 模拟器中的网络摄像头：“无法启动摄像头”和“结果太大”

> ID：13413943
> 
> 赞同：5
> 
> 时间：2012-11-16T09:40:59.230
> 
> 标签：android, android-emulator, android-camera

我有一个需要使用相机的 Android 4.1.2 AVD。我尝试在模拟器中使用我的网络摄像头作为替代品，但出现此错误：

> [2012-11-16 10:35:37 - 模拟器] 模拟器：错误：_camera_client_query_start：无法为 NV21 [640x480] 启动相机“AndroidEmulatorVC0”：结果太大

如何修复此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T19:45:49.307

要解决这个问题。只需转到 AVD Manager，编辑您的设备。在 SD 卡部分，将大小从空白增加到一定数量。我放了我的 64MiB，它运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:19:25.930

转到窗口 -> AVD 管理器 -> 选择您的 AVD 名称 -> 单击编辑按钮 -> 抽象 LCD 密度单击值下拉值选择 160。

要在您的 Android 模拟器中启用相机，只需在 AVD 的 config.ini 文件中添加以下突出显示的代码。您可以在您的用户目录/.android 文件夹下找到 config.ini 文件。

文件：~/.android/config.ini

```
hw.lcd.density=160
skin.name=HVGA
skin.path=platforms\android-9\skins\HVGA
hw.cpu.arch=arm
abi.type=armeabi
vm.heapSize=24
image.sysdir.1=platforms\android-9\images\
hw.camera=yes
sdcard.size=64M
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-24T11:20:12.840

AVD 管理器高级设置中有这个选项“EMULATED”（以及 NO CAMERA 和 WEBCAM0），它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T10:13:05.233

也许生成的图像或视频实际上太大而无法用于智能手机或平板电脑？无论如何，如果您需要测试与硬件相关的功能，例如相机，直接在设备上进行测试是明智之举。您不能假设计算机或网络摄像头中的摄像头与智能手机中的摄像头行为相同。

# android - android - 如何从 API 4 禁用自动亮度模式？

> ID：13413945
> 
> 赞同：0
> 
> 时间：2012-11-16T09:41:07.463
> 
> 标签：android, api, brightness

我可以从 api 8 级开始禁用自动亮度。旧版本呢？如何从 API 4 禁用自动亮度模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:54:54.353

根据 Google [android 仪表板](http://developer.android.com/about/dashboards/index.html)，只有 0.3% 的设备处于 API 级别 4。感染只有 3.5% 的设备低于 API 级别 7。所以我想你不必担心 API 级别 4 或任何低于 API 级别 8 的东西有点浪费时间...

![安卓仪表板](../Images/56252a451e0ce7d9a4b97db4f8c98371.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:21:25.983

```
private static final String SCREEN_BRIGHTNESS_MODE = "screen_brightness_mode";
private static final int SCREEN_BRIGHTNESS_MODE_MANUAL = 0;
private static final int SCREEN_BRIGHTNESS_MODE_AUTOMATIC = 1; 

Settings.System.putInt(resolver, SCREEN_BRIGHTNESS_MODE, mode); 
Settings.System.putInt(resolver, Settings.System.SCREEN_BRIGHTNESS, lev); 
```

# php - 防止通过刷新重新获取数据

> ID：13413951
> 
> 赞同：1
> 
> 时间：2012-11-16T09:41:32.123
> 
> 标签：php, mysql

我正在创建一个在线测验。我正在从数据库中获取随机问题并将其显示给用户。通过刷新页面将发出另一个请求，用户将得到一组不同的问题。如何防止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:18:03.480

根据[Nemoden 的评论](https://stackoverflow.com/questions/13413951/prevent-refetching-of-data-by-refresh#comment-18329163)：

```
<?php
// start session
session_start();

// if questions were not fetched for this session yet...
if( !isset( $_SESSION[ 'questions' ] ) )
{
    // fetch questions and put in $_SESSION[ 'questions' ]
    $_SESSION[ 'questions' ] = fetchRandomQuestionsFromDatabase();
}

// loop through $_SESSION[ 'questions' ] and do something with each question
foreach( $_SESSION[ 'questions' ] as $question )
{
    // print question, or something
} 
```

# magento - 在 Magento 中更改评分的星数

> ID：13413952
> 
> 赞同：0
> 
> 时间：2012-11-16T09:41:33.377
> 
> 标签：magento, magento-1.7

有什么方法（通过管理系统或模块）来更改产品评分的星数吗？显然默认值是 5，我想将其更改为 10。

我想要这个，以便我可以在评论详细信息中输出五颗星的“半星”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T10:00:28.163

这很简单。你只需要增加你的评级框宽度。这是CSS。您必须将宽度增加到 140 像素。通过增加评级框的宽度，您可以拥有尽可能多的星星。

```
//Style.css    
.rating-box {
        background: url("../images/bkg_rating.gif") repeat-x scroll 0 0 transparent;
        font-size: 0;
        height: 13px;
        line-height: 0;
        overflow: hidden;
        text-indent: -999em;
        width: 140px;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T10:04:01.357

在

> app\design\friendend\你的主题\template\review\form.phtml

你会发现这样的代码

```
<table class="data-table" id="product-review-table">
                    <col />
                    <col width="1" />
                    <col width="1" />
                    <col width="1" />
                    <col width="1" />
                    <col width="1" />
                    <thead>
                        <tr>
                            <th>&nbsp;</th>
                            <th><span class="nobr"><?php echo $this->__('1 star') ?></span></th>
                            <th><span class="nobr"><?php echo $this->__('2 stars') ?></span></th>
                            <th><span class="nobr"><?php echo $this->__('3 stars') ?></span></th>
                            <th><span class="nobr"><?php echo $this->__('4 stars') ?></span></th>
                            <th><span class="nobr"><?php echo $this->__('5 stars') ?></span></th>
                        </tr>
                    </thead>
                    <tbody>
                    <?php foreach ($this->getRatings() as $_rating): ?>
                        <tr>
                            <th><?php echo $this->escapeHtml($_rating->getRatingCode()) ?></th>
                        <?php foreach ($_rating->getOptions() as $_option): ?>
                            <td class="value"><input type="radio" name="ratings[<?php echo $_rating->getId() ?>]" id="<?php echo $this->escapeHtml($_rating->getRatingCode()) ?>_<?php echo $_option->getValue() ?>" value="<?php echo $_option->getId() ?>" class="radio" /></td>
                        <?php endforeach; ?>
                        </tr>
                    <?php endforeach; ?>
                    </tbody> 
```

**请对代码进行一些更改，如下所示**

**再加 5 个** `<col width="1" />` 和

**再加5个**

```
<th><span class="nobr"><?php echo $this->__('5 stars') ?></span></th> 
```

进入相应的地方

它会起作用的

# python - 长方程或分解方程在 Python 中哪个更快？

> ID：13413955
> 
> 赞同：1
> 
> 时间：2012-11-16T09:41:47.807
> 
> 标签：python, optimization, equation

假设我有以下代码：

```
qwe = 1.5    

def jkl(l):
    result = 2*(math.pi/l)
    return result

def asd(b, l):
    result = (abs(((jkl(l)**2)*(qwe**2))-(b**2))**(0.5)
    return result 
```

现在，在 asd def 中使用那个长方程是否更有效，或者如果将其分解，计算速度会更快：

```
def asd(b, l):
    z1=jkl(l)**2
    z2=qwe**2
    z3=b**2
    z4=(z1*z2)-z3
    z5=abs(z4)
    z6=z5**(0.5)
    return z6 
```

由于我的代码可能会被第三方使用和修改，因此分解的示例很容易理解，但是创建所有这些函数内变量是否会比在一行中完成所有操作更慢？它需要尽可能快，因为该函数将被其他更复杂的函数调用数百次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:47:54.510

没有测量就无法判断。幸运的是，Python 附带了可以做到这一点的[模块`timeit`](http://docs.python.org/2/library/timeit.html)。

只需运行这两个函数`timeit.timeit()`，它就会告诉你哪个更快。

我的直觉是紧凑的单行形式更快，但我可能错了。

你可能想`2*math.pi`用一个常量替换`PI2`：

```
PI2 = 2*math.pi
def jkl(l): return PI2 / l 
```

并且由于函数调用很昂贵，因此您应该将此代码内联到`asd()`

PS：希望真实代码中的函数名更具可读性。:-) 当我看到`asd()`某人的代码时，我感到一阵强烈的愤怒。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:02:52.907

正如许多人建议使用 python 的`timeit`模块来测试速度：

```
print timeit.timeit('asd(2,2)','from __main__ import asd')
print timeit.timeit('asd_split(2,2)','from __main__ import asd_split')

>>>0.93675494194
>>>1.0719628334 
```

正如预期的那样，*非拆分*版本似乎更快。

# soap - PHP：什么是最快的 SOAP、file_get_contents 或 Curl？

> ID：13413960
> 
> 赞同：7
> 
> 时间：2012-11-16T09:42:02.347
> 
> 标签：soap, curl, file-get-contents

我有网站 A 在每个页面加载时向网站 B 发送请求。B 服务器正在 mysql 中进行一些内部搜索，需要向服务器 A 返回一些数据，该数据将根据该响应显示一些内容。

在这两个服务器之间进行通信的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T09:31:16.660

最快和最简单的方法是 cURL，而且 cURL 返回的数据也很容易解析。get_file_contents 的使用完全专用于读取文件，而 cURL 完全专用于两个服务器之间的数据通信。

# html - 带有可点击链接的 DTAttributedTextCell

> ID：13413961
> 
> 赞同：3
> 
> 时间：2012-11-16T09:42:04.443
> 
> 标签：html, ios, core-text, dtcoretext

我正在尝试通过可点击的链接重用 DTAttributedTextCell。我可以获取属性字符串，但我不确定如何获取文本框架，以便创建 DTLinkBut​​ton。

下面是来自 Demoapp 的示例代码：

```
- (void)configureCell:(DTAttributedTextCell *)cell forIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *snippet = [_snippets objectAtIndex:indexPath.row];

    NSString *title = [snippet objectForKey:@"Title"];
    NSString *description = [snippet objectForKey:@"Description"];

    NSString *html = [NSString stringWithFormat:@"<h3>%@</h3><p><a href='http://apple.com'><font color=\"gray\">%@</font>Test</a></p>", title, description];

    [cell setHTMLString:html];

    cell.attributedTextContextView.shouldDrawImages = YES;
} 
```

任何指针都会很棒。

# c - Flex中的“{”标记之前的预期标识符或“（”

> ID：13413966
> 
> 赞同：4
> 
> 时间：2012-11-16T09:42:39.923
> 
> 标签：c, compiler-errors, yacc, flex-lexer

我正在尝试使用`flex`和`yacc`解析“C”源代码。不幸的是，我在第 1、12、13、14 行收到错误“expected identifier or '(' before '{' token”...。有什么想法吗？

这是我的 flex 文件（称为 mini.l）：

```
%{

%}
digit [0-9]
letter [a-zA-Z]
number (digit)+
id (letter|_)(letter|digit|_)*
integer (int)
character (char)
comma [,]
%%
{integer} {return INT;}
{character} {return CHAR;}
{number} {return NUM;}
{id} {return IDENTIFIER;}
{comma} {return ',';}
[-+*/] {return *yytext;}
. {}
%%
main()
{
   yylex();
} 
```

对应的yacc文件（名为my_yacc.y）如下图：

```
%{
#include <ctype.h>
#include <stdio.h>
/* #include "myhead.h" */
#include "mini.l"
#define YYSTYPE double
# undef fprintf
%}

%token INT
%token CHAR
%token IDENTIFIER
%token NUM
%token ','
%left '+' '-'
%left '*' '/'
%right UMINUS

%%

lines:lines expr '\n' {printf("%g\n",$2);}
      |lines '\n'
      |D
      |     
      ;
expr :expr '*' expr {$$=$1*$3;}
     |expr '/' expr {$$=$1/$3;}
     |expr '+' expr {$$=$1+$3;}
     |expr '-' expr {$$=$1+$3;}
     |'(' expr ')' {$$=$2;}
     |'-' expr %prec UMINUS {$$=-$2;}
     |IDENTIFIER {}
     |NUM   {}  
     ;
T    :INT {}
     |CHAR {}
     ;
L    :L ',' IDENTIFIER {}
     |IDENTIFIER {}
     ;
D    :T L {printf("T is %g, L is %g",$1,$2);}
     ;

%%
/*void yyerror (char *s)
{
  fprintf (stderr, "%s\n", s);
}  
*/ 
```

我正在使用以下命令编译生成的代码：

```
flex mini.l
yacc my_yacc.y
gcc y.tab.c -ly 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T20:53:06.063

您看到的错误来自 C 编译器，是由于您对 flex 和 yacc 如何协同工作的误解造成的。当我通过与您相同的工具运行它时，我收到以下错误，正如您所做的那样，正如@KeithThompson 所指出的：

```
In file included from my_yacc.y:5:0:
mini.l:1:1: error: expected identifier or '(' before '%' token
 %{
 ^
mini.l:5:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before' letter'
 letter [a-zA-Z]
 ^
mini.l:12:11: error: expected identifier or '(' before '{' token
 {integer} {return INT;}
           ^
... elided the rest ... 
```

尽管您使用了命令`flex`，`yacc`并且`gcc`以正确的顺序，但您已将该文件包含`mini.l`在您的野牛输入中。这是不正确的。您应该包括从*创建*的 flex的**输出**。该文件名为. 还必须在 yacc 输入文件*的末尾包含此内容。*（这是因为如果你不这样做，你会得到@flolo 发现的错误）。如果您对文件进行必要的更改，您将拥有：*`mini.l``lex.yy.c`*`yacc`**

 **```
%{
#include <ctype.h>
#include <stdio.h>
/* #include "myhead.h" */
/* #include "mini.l" */

#define YYSTYPE double
# undef fprintf
%}

%token INT
%token CHAR
%token IDENTIFIER
%token NUM
%token ','
%left '+' '-'
%left '*' '/'
%right UMINUS

%%

lines:lines expr '\n' {printf("%g\n",$2);}
      |lines '\n'
      |D
      |     
      ;
expr :expr '*' expr {$$=$1*$3;}
     |expr '/' expr {$$=$1/$3;}
     |expr '+' expr {$$=$1+$3;}
     |expr '-' expr {$$=$1+$3;}
     |'(' expr ')' {$$=$2;}
     |'-' expr %prec UMINUS {$$=-$2;}
     |IDENTIFIER {}
     |NUM   {}  
     ;
T    :INT {}
     |CHAR {}
     ;
L    :L ',' IDENTIFIER {}
     |IDENTIFIER {}
     ;
D    :T L {printf("T is %g, L is %g",$1,$2);}
     ;

%%
void yyerror (char *s)
{
  fprintf (stderr, "%s\n", s);
}  

#include "lex.yy.c" 
```

如果您现在在此运行命令序列，您会发现它既可以编译又可以运行，并且还能正确处理 C 语言输入。

您犯的错误是新用户对工具`flex`和`yacc`.**

# struts2 - 在 Struts2 中使用 bean 默认值预填充表单的文本字段

> ID：13413967
> 
> 赞同：0
> 
> 时间：2012-11-16T09:42:41.080
> 
> 标签：struts2

在 Struts 1.x 中，我使用带有默认值的表单 bean 预先填充了表单文本字段，如下所示，

```
<html:form action="/actions/signup1">
First name: <html:text property="firstName"/><BR> 
```

在表单bean中，我的默认值如下...

```
public class ContactFormBean {
private String firstName = "First name"; 
```

但是在 Struts 2.x 中，当我尝试如下使用 struts-tags 文本字段时，它没有从 bean 中预填充默认值，

```
<s:form action="signup1">
    <s:textfield name="formBean.firstName" label = "First Name" /> 
```

我在我的 Action 类中使用适当的 getter 和 setter 方法声明了 formBean...

```
public class SignupAction1 extends ActionSupport {
private ContactFormBean formBean;
@Override
    public String execute() throws Exception {
....
}
    public ContactFormBean getFormBean(){
        return formBean;
    }
    public void setFormBean(ContactFormBean fb){
        formBean = fb;
    }
} 
```

请让我知道这是否可以在请求级别而不是在会话级别完成。提前致谢。

<--已编辑-->

**struts.xml**

```
<struts>

    <constant name="struts.devMode" value="true" />

    <package name="basicstruts2" extends="struts-default">

        <action name="index">
            <result>/index.jsp</result>
        </action>
        <action name="signup">
            <result>/SignUp.jsp</result>
        </action>

    <action name="signup1" class="coreservlets.action.SignupAction1" method="execute">
    <result name="success">/SignUp-Confirmation.jsp</result>
    <result name="error">/SignUp.jsp</result>

  </action>

    </package>

</struts> 
```

**注册.jsp**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Sign UP</title>
</head>
<body>
<H1 ALIGN="CENTER">Sign Up</H1>
<s:form>
    <s:textfield name="formBean.firstName" label = "First Name" />
    <s:textfield name="formBean.lastName" label = "Last Name" />
    <s:textfield name="formBean.email" label = "Email Address" />
    <s:textfield name="formBean.faxNumber" label = "Fax Number" />
    <s:submit action="signup1" method="loginAfterSubmit" value="Click here to Submit"/>
</s:form>
</body>
</html> 
```

**ContactFormBean.java**

```
public class ContactFormBean {
    private String firstName = "First name";
    private String lastName = "Last name";
    private String email = "user@host";
    private String faxNumber = "xxx-yyy-zzzz";

    public String getFirstName() {
    return this.firstName;
    }
    public void setFirstName(String firstName) {
    this.firstName = firstName;
    }
    public String getLastName() {
    return(lastName);
    }
    public void setLastName(String lastName) {
    this.lastName = lastName;
    }
    public String getEmail() {
    return(email);
    }
    public void setEmail(String email) {
    this.email = email;
    }
    public String getFaxNumber() {
    return(faxNumber);
    }
    public void setFaxNumber(String faxNumber) {
    this.faxNumber = faxNumber;
    }
public boolean isMissing(String value) {
        if ((value == null) || (value.trim().equals(""))) {
        return(true);
        } else {
        for(int i=0; i<defaultValues.length; i++) {
        if (value.equals(defaultValues[i])) {
        return(true);
        }
        }
        return(false);
        }
        }

} 
```

**SignupAction1.java**

```
public class SignupAction1 extends ActionSupport {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private ContactFormBean formBean;

    @Override
    public String execute() throws Exception {
        this.formBean = new ContactFormBean();
        return SUCCESS;

    }

    public String loginAfterSubmit() {

        String firstName = formBean.getFirstName();
        String lastName = formBean.getLastName();
        String email = formBean.getEmail();
        String faxNumber = formBean.getFaxNumber();
        if (formBean.isMissing(firstName)) {
        return ERROR;
        } else if (formBean.isMissing(lastName)) {
        return ERROR;
        } else if ((formBean.isMissing(email)) ||
        (email.indexOf("@") == -1)) {
        return ERROR;
        } else if (formBean.isMissing(faxNumber)) {
        return ERROR;
        } else {
        return SUCCESS;
        }
    }

    public ContactFormBean getFormBean(){
                return this.formBean;
    }
    public void setFormBean(ContactFormBean fb){
        formBean = fb;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:19:48.807

`signup`将您的操作声明更改为

```
<action name="signup" class="coreservlets.action.SignupAction1">
   <result>/SignUp.jsp</result>
</action> 
```

并`signup1`_

```
<action name="signup1" class="coreservlets.action.SignupAction1" method="signup1"> 
```

`signup1`在您的`SignupAction1`操作类中创建方法并将您的逻辑`execute`移至其中。然后创建你的`execute`新实例。`ContactFormBean`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:54:04.097

将默认值放入构造函数：

```
public class ContactFormBean {
    private String firstname;
    public ContactFormBean (){
        this.firstName = "First name";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:19:22.727

您正在`formBean`使用该方法返回一个空对象`getFormBean`，然后构造函数永远不会被调用，并且尝试访问 formBean 属性`firstName`会给出错误（因为它被 JSP 上的 Struts2 标记包装，所以没有显示。

你可以

1）在您的执行方法上实例化它：

```
public String execute() throws Exception {
   this.formBean = new ContactFormBean();
} 
```

2）在你的吸气剂上懒惰地实例化它：

```
public ContactFormBean getFormBean(){
    if (formBean==null) 
       this.formBean = new ContactFormBean();
    return this.formBean;
} 
```

* * *

编辑（由于您的评论）：

我不知道您是如何构建 Web 应用程序的；

但是，如果您在 JSP 上，则在呈现 JSP 之前调用 Action（及其 execute() 方法或其他方法，如果指定）。

因此，无论您是否有 ActionOne 加载内容并在提交后调用 ActionTwo，或者 ActionOne 加载内容并在提交后调用 ActionOne 的另一个方法，您都可以知道您是处于“pre-JSP”状态还是处于“post-submit”状态状态...

也就是说，如果您要公开一个 Object，并且希望它的值或其属性不同于`null`，则必须以上述方式之一实例化它。

显然，您的对象应该包含其属性的 getter 和 setter，并且它们必须已绑定到您的 JSP 对象。

在您的示例中，您可以：

联系FormBean：

```
public class ContactFormBean {
   private String firstName = "First name";
   public String getFirstName(){
      return this.firstName;
   }
   public String setFirstName(String firstName){
      this.firstName = firstName;
   }
} 
```

你的行动：

```
public class SignupAction1 extends ActionSupport {
    private ContactFormBean formBean;

    public ContactFormBean getFormBean(){
        return formBean;
    }
    public void setFormBean(ContactFormBean fb){
        formBean = fb;
    }

    @Override
    public String execute() throws Exception {
       /* this method is executed before showing the JSP */

       /* first time initialization */
       this.formBean = new ContactFormBean();
       return SUCCESS;
    }

    public String loginAfterSubmit() throws Exception {
       /* this method is executed after the submit button was pressed */

       /* i don't initialize nothing here, 
          ContactFormBean is coming from the page */ 

       System.out.println("ContactFormBean's firstName value is: " +
                          this.formBean.getFirstName());
       return "goSomewhereElse";
    }

} 
```

并在您的 JSP 中：

```
<s:form>
   <s:textfield name="formBean.firstName" label = "First Name" />
   <s:submit action="signup1" method="loginAfterSubmit" value="Press here to submit" />
</s:form> 
```

您可以通过将execute() 和loginAfterSubmit() 方法拆分为两个不同Action 的两个execute() 方法来使用两个Action；

然后你必须在两个动作中都有你的formBean，至少第一个是getter，第二个是setter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T15:04:44.803

您还可以在执行方法中设置 bean 中的 Name 值，它将在您的 JSP 页面中填充它。示例是：

```
public String execute() throws Exception {
    this.formBean = new ContactFormBean();
    //Set your Name value here        
    formBean.setName("John Doe");
    return SUCCESS;
} 
```

填充 JSP 后，您将在名称文本框中找到该值。希望这会有所帮助。

塔班

# android - android phonegap 下载器插件 2.2

> ID：13413968
> 
> 赞同：2
> 
> 时间：2012-11-16T09:42:43.093
> 
> 标签：android, cordova, plugins

我正在开发一个需要 Android Downloader 插件的 phonegap 应用程序：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader)

不幸的是，使用最新的cordova（2.2）似乎失败了。我花了几个小时试图升级代码：

下载器.js

```
cordova.define(
    "cordova/plugin/downloader",
    function(require, exports, module)
    {
        var exec = require("cordova/exec");

        var Downloader = function() {};

        Downloader.prototype.downloadFile = function(fileUrl, params, successCallback, failureCallback)
        {
            // Make params hash optional.
            if (!failureCallback) win = params;

            return exec(
                successCallback,
                failureCallback,
                'Downloader', 
                'downloadFile',
                [fileUrl, params]);
        };

        var downloader = new Downloader();
        module.exports = downloader;
    }
); 
```

下载器.java

```
package org.apache.cordova.plugins.Downloader;

import org.apache.cordova.api.CordovaInterface;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
[more imports...]

public class Downloader extends Plugin 
{
etc. 
```

配置文件

```
<plugins>
<plugin name="App" value="org.apache.cordova.App"/>
[...]
<plugin name="Downloader" value="org.apache.cordova.plugins.Downloader"/>
</plugins> 
```

HTML JS 调用

```
downloader = cordova.require("cordova/plugin/downloader");

downloader.downloadFile(... 
```

该应用程序在 Eclipse 中编译得很好，但是在执行下载器代码时我得到：ALERT Class not found。日志猫说：

W/System.err(4035): java.lang.ClassNotFoundException: org.apache.cordova.plugins.Downloader ... 添加插件 org.apache.cordova.plugins.Downloader 时出错。

你能帮我解决什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:14:15.217

我在 js 文件中做了一些更改，而不是由您完成，一切正常。

```
function Downloader() {}

Downloader.prototype.downloadFile = function(fileUrl, params, win, fail) {  
    //Make params hash optional.
    if (!fail) win = params;
    PhoneGap.exec(win, fail, "Downloader", "downloadFile", [fileUrl, params]);
};

   PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("downloader", new Downloader());
    PluginManager.addService("Downloader", "com.phonegap.plugins.downloader.Downloader");
});

if(!window.plugins) {
    window.plugins = {};
}   
if (!window.plugins.downloader) {
    window.plugins.downloader = new Downloader();
} 
```

# scala - 在 Scala 中调用注释“方法”

> ID：13413969
> 
> 赞同：3
> 
> 时间：2012-11-16T09:42:44.700
> 
> 标签：scala, annotations

在Java中，我可以做以下事情：

`String table = Foo.class.getAnnotation(Table.class).name();`

如何在 Scala 中存档？甚至在 Java 中定义的注解似乎也没有那些“name()”方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:32:26.743

这应该可以解决问题：

```
val table = classOf[Foo].getAnnotation(classOf[Table]).name() 
```

如果你有这样的东西，那就行了：

```
@java.lang.annotation.Retention(java.lang.annotation.RetentionPolicy.RUNTIME)
@java.lang.annotation.Target({java.lang.annotation.ElementType.ANNOTATION_TYPE})
public @interface Table {
    public String name();
} 
```

这是应该存在于 Java 源文件中的注释定义。

和 Foo 类：

```
@Table(name="hello")
class Foo {

} 
```

# c# - Keydown 事件和计时器不能很好地协同工作

> ID：13413972
> 
> 赞同：1
> 
> 时间：2012-11-16T09:42:47.690
> 
> 标签：c#, windows, timer, keydown

我对代码中的 Keys 事件和计时器有点陌生，但由于某种原因，存在这个奇怪的错误。（阅读最后的编辑）

```
public partial class Form1 : Form
{
    bool start = false;
    Snake ormen = new Snake(10);
    short direction = 3;
    public Form1()
    {
        InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e)
    {
        button1.Hide();
        timer1.Enabled = true;
        start = true;
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        Graphics g = e.Graphics;
        if (start)
        {
            ormen.rita(g);
        }
    }
    private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Up:
                direction = 3;
                break;
            case Keys.Down:
                direction = 1;
                break;
            case Keys.Left:
                direction = 2;
                break;
            case Keys.Right:
                direction = 0;
                break;
            default:
                break;
        }
    }
    private void timer1_Tick(object sender, EventArgs e)
    {
        ormen.flytta(direction);
        Invalidate();
    }
}
} 
```

我还尝试在关键事件中使用调试，但它甚至在该时间段之后才激活。谁能告诉我为什么？另外，如果有任何明显的错误，如果您能提及它们，我将不胜感激。我还尝试使计时器间隔更高，以检查程序是否跟不上但可以。（阅读最后的编辑）

[编辑] 我认为这不会有帮助，但这里是“Snake”类的代码。我怀疑那里有问题，但无论如何。

```
 private short diameter = 0;
    //0 = Right, 1 = Down, 2 = Left, 3 = Up
    public Snake(short diameter)
    {
        this.diameter = diameter;
        ormensPlatser.Enqueue(new Point(0, 0));
        ormensPlatser.Enqueue(new Point(0 + diameter, 0));
        ormensPlatser.Enqueue(new Point(0 + diameter + diameter, 0));
    }
    Queue<Point> ormensPlatser = new Queue<Point>();
    public void rita(Graphics g)
    {
        Point temp;
        for (int i = 0; i < ormensPlatser.Count; i++)
        {
            temp = ormensPlatser.Dequeue();
            g.FillEllipse(new SolidBrush(Color.Red), temp.X, temp.Y, diameter, diameter);
            ormensPlatser.Enqueue(temp);
        }
    }
    private void ormNäraKant(short direction,ref Point ormBit)
    {
        switch (direction)
        {
            case 0:
                ormBit.X = ormBit.X + diameter >= 380 ? 0 : ormBit.X + diameter;
                break;
            case 1:
                ormBit.Y = ormBit.Y + diameter >= 360 ? 0 : ormBit.Y + diameter;
                break;
            case 2:
                ormBit.X = ormBit.X - diameter < 0 ? 370 : ormBit.X - diameter;
                break;
            case 3:
                ormBit.Y = ormBit.Y - diameter < 0 ? 350 : ormBit.Y - diameter;
                break;
        }
    }
    public void flytta(short direction)
    {
        Point temp;
        int temp1 = ormensPlatser.Count - 1;
        for (int i = 0; i < ormensPlatser.Count; i++)
        {
            if (i == temp1)
            {
                switch(direction)
                {
                    case 0:
                        temp = ormensPlatser.Dequeue();
                        ormNäraKant(0, ref temp);
                        ormensPlatser.Enqueue(temp);
                        break;
                    case 1:
                        temp = ormensPlatser.Dequeue();
                        ormNäraKant(1, ref temp);
                        ormensPlatser.Enqueue(temp);
                        break;
                    case 2:
                        temp = ormensPlatser.Dequeue();
                        ormNäraKant(2, ref temp);
                        ormensPlatser.Enqueue(temp);
                        break;
                    case 3:
                        temp = ormensPlatser.Dequeue();
                        ormNäraKant(3, ref temp);
                        ormensPlatser.Enqueue(temp);
                        break;
                }
            }
            else
            {
                ormensPlatser.Dequeue();
                temp = ormensPlatser.Peek();
                ormensPlatser.Enqueue(temp);
            }
        }
    }
} 
```

}

[EDIT2] 好吧，显然不是关于时间或类似的东西，代码有效，但我认为这与 slawekwin 在评论中所说的程序启动时的焦点有关。所以问题仍然是一样的，但是如果我 ALT+tab 到另一个程序然后回到蛇程序它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:40:20.380

所以我终于弄明白了，我认为问题出在定时器事件和键输入事件一起工作时，但我的假设是错误的。所以我所做的是，我检查了表单的所有属性，我发现了一个名为“KeyPrevied”的设置，它是假的，所以我尝试将它设置为真，它工作:)。

# visual-studio-2010 - Sharepoint 2010：内置活动的错误详细信息

> ID：13413975
> 
> 赞同：0
> 
> 时间：2012-11-16T09:43:03.960
> 
> 标签：visual-studio-2010, sharepoint, sharepoint-2010, workflow

我尝试使用 CopyItemActivity 在 Visual Studio 2010 中创建一个简短的简单工作流。当我运行工作流时，我得到“发生错误”状态。我想我放了一个错误的参数......但是没有任何细节，调试起来非常困难。有没有办法获得更多细节？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:52:53.340

您可以在 Web 应用程序的 web.config 中关闭自定义错误。此外，您可以启用调用堆栈以获取更多信息。

*在/Configuration/SharePoint/SafeMode*中设置`CallStack`为 true ：

 *```
<SafeMode MaxControls="200" CallStack="true" ... /> 
```

*在/Configuration/system.web/customErrors*中设置`mode`为 Off ：

 *```
<customErrors mode="Off" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:20:34.990

所有工作流错误都记录在 ULS 日志中（如果已配置），存储在`C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\Logs`. 您可以查找`Unexpected`日志条目。不需要对 web.config 进行其他更改。这些信息无法通过网站设计获得。或者，您可以使用 PowerShell 查询服务器上的日志。像这样的东西（没有测试，但我希望它会工作）：

```
Get-SPLogEvent -StartTime "16/09/2012 6:00" -EndTime "16/09/2012 18:00" 
| Where-Object {$_.Level -eq "Unexpected"} 
| select timestamp, process, level, message, correlation  
| Format-Table –Wrap 
```**

# javascript - 如何返回位于调用 javascript 的弹出窗口内的网格的值？

> ID：13413976
> 
> 赞同：1
> 
> 时间：2012-11-16T09:43:05.537
> 
> 标签：javascript, jquery, ajax

我有一个包含网格的弹出窗口。我在我的javascript中调用了这个弹出窗口，如下所示：

```
popupWindow = window.open('gridjsp1.jsp', "_blank", "directories=no, status=no, menubar=no, scrollbars=yes, resizable=no,width=600, height=280,top=200,left=250");
if(popupWindow && !popupWindow.closed)
    popupWindow.focus(); 
```

`gridjsp1.jsp`包含网格的代码。这将在网格单击时返回一个值。我需要将此值返回给调用 javascript 函数，即。弹出窗口的写入位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:48:30.053

在弹出窗口中使用`window.opener`获取父窗口的引用对象。更多[在这里](https://developer.mozilla.org/en-US/docs/DOM/window.opener)。

像这样的东西应该工作：

父窗口：

```
function setGridValue (gridValue) {
    alert(gridValue);
} 
```

从弹出窗口调用如下：

```
window.opener.setGridValue("YOUR_NEW_VALUE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:50:18.457

你读过[window.parent](http://www.w3schools.com/jsref/prop_win_parent.asp)吗？

# c# - 我可以在 C# 中将 C 标头用于协议吗

> ID：13413977
> 
> 赞同：7
> 
> 时间：2012-11-16T09:43:11.793
> 
> 标签：c#, c++, visual-c++, tcp, typedef

我正在开发的新 C# 程序遇到技术问题。在这个项目中，我需要与 TCP/IP 网络上的另一个非 Windows 系统进行通信。所有在其他系统上编写的软件都是用 C 完成的，任何其他未来的开发也将用 C/C++ 完成。协议全部由另一位工程师在 C 中完成，协议的定义全部使用 C typedef 结构定义所有变量并使用 memcpy 提取/放置对 C 非常有用的数据包。我所有的协议都作为 C 标头提供包含所有 typedef 和 struct 的文件以及将来对协议所做的任何更改都将以相同的方式完成。

我的问题是，是否有任何方法可以在 C# 中使用它们？

我试图将它们作为一个类编译到 DLL 库中，但由于 C# 只能使用托管 C dll，所以无法正常工作。如果我尝试编译为托管 C 类，它就会变得一团糟，因为协议中有很多数组，并且因为 C 代码必须符合一堆工厂规范，所以许多变量都是 typedef' d。现在我可以去重做 C# 中的所有结构，但这会花费很多时间，而且每次进行更改或向协议中添加某些内容时，我都必须重做。更不用说每次我这样做时都会出现错误的危险。

它与我的 C 项目的工作方式是，其他工程师只会向我提供更新的头文件。

那么有什么方法可以直接在 C# 中使用这些头文件，或者每次协议更新时我都可以进行自动转换？好吧，我基本上需要使用这个头文件从来自 TCP/IP 连接的数据流中提取数据（开始无法使用 memcpy）

使用 C# 的原因是因为我在 WPF 中使用了很多图形，而 Visual C++ 不支持 WPF

任何帮助或建议将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:51:39.983

我曾经不得不在 C# 中使用 C 标头来获取通过 TCP/IP 发送的编组结构的定义。我们使用的方法是通过 T4 Text Template 解析头文件。虽然这是一项有点冗长的任务，但您必须为您的标头编写足够好的 C 解析器并使用它来生成 .cs 文件，因此会有很多字符串混乱。对我们来说，这是一个足够好的解决方案，因此它也可能对您有所帮助。

在此处查看 T4：http: [//msdn.microsoft.com/en-us/library/bb126445.aspx](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:59:52.677

不是真正的答案，更像是一种可能的好解决方案：

创建一个包含现在 C 头文件中的信息的定义文件。然后使用它来生成 .h 标头和合适的 C# 源代码。

如果数据相当简单，那么也可以使用简单的键值文件格式，甚至是 csv 文件。但如果比较复杂，那么最好使用 XML，这样更容易以编程方式解析。

如果对拥有独立于语言的定义文件有抵抗力，那么您可以尝试让 .c 头文件遵循一些字符串格式规则，这样您就可以简单地解析它并从中生成 C# 代码（只需确保编写 .h 可以理解，它不再是 C，它实际上是您自己的类 C 定义语言，任何额外的 C 内容都必须转到另一个文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:01:34.590

您不能也不能在 C# 中使用头文件，您需要将其编译为 dll 并从 c#

在 c 文件中，您需要定义`#define DLLAPI __declspec(dllexport)`和定义如下所示的方法，`DLLAPI *return-value-data-type function-name*` 并且从 c# 中您需要像下面这样调用它

```
[DllImport(@"*dll-path*")]
        public static extern *return-value-datatype function-name* 
```

如果需要，您可以对如下数据类型进行编组

```
[DllImport(@"*dll-path*")]
        public static extern void InitParam([MarshalAs(UnmanagedType.LPWStr)] string inputFile,
            [MarshalAs(UnmanagedType.LPWStr)] string outputFile,
            [MarshalAs(UnmanagedType.LPWStr)] string templateFile,
            [MarshalAs(UnmanagedType.LPWStr)] string userName,
            [MarshalAs(UnmanagedType.LPWStr)] string manifestFilePath,
            [MarshalAs(UnmanagedType.LPWStr)] string usersRightList);

        [DllImport(@"*dll-path*")]
        public static extern Int32 ProtectDocument(
            [MarshalAs(UnmanagedType.LPStr)]string validToDate);

        [DllImport(@"*dll-path*")]
        public static extern void DebugGeneratedFiles(
            [MarshalAs(UnmanagedType.LPWStr)] string singedIssuenceLicenseFilePath,
            [MarshalAs(UnmanagedType.LPWStr)] string encryptedContentOutputFilePath); 
```

# ios - 缓慢的初始加载屏幕 iOS Web 应用程序

> ID：13413984
> 
> 赞同：4
> 
> 时间：2012-11-16T09:43:50.493
> 
> 标签：ios, web-applications, mobile-safari, loading, iphone-standalone-web-app

我正在使用一个为 webkit 浏览器构建的 web 应用程序，它非常依赖于 javascript。该应用程序在 safari 浏览器中运行相当流畅，在我的 3g 网络上初始加载时间约为 1.5-2 秒（iPhone 4s iOS 6）。但是，当我从主屏幕启动应用程序时，启动画面会停留 5-6 秒，有时甚至更长（有报告说它可以停留大约 10 秒）。

我想知道差异怎么会这么大？可以做些什么来减少这种负载？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:09:49.463

如果您使用加载 WebApp 的 UIWebView，则您使用的 WebKit 版本不支持 JS 的 JIT 优化（[源](http://ariya.ofilabs.com/2012/06/nitro-javascriptcore-and-jit.html)）

我会将应用程序分解成更小的部分，并尝试尽快向用户展示一些内容，然后继续在后台加载您的 JS。我知道这不好，但如果你的问题是一个沉重的 JS 应用程序，你就会被非 JIT WebKit 引擎（AKA UIWebView）卡住

看看 WWDC 2012 Session 601：Optimizing Web Content in UIWebViews and Websites on iOS（你需要成为一名注册的 iOS 开发者），并收听[Cocoanetics 播客的这一集](http://www.cocoanetics.com/2012/05/podcast-36-google-currents/)

不过，很想知道一些优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:30:24.130

从主屏幕启动的 Web 应用程序比从 Safari 内部启动的应用程序慢，因为主屏幕应用程序没有利用 Safari 的 Nitro Javascript 引擎。

资料来源：[http ://thenextweb.com/apple/2011/03/17/apple-admits-to-slower-performance-in-ios-web-apps/](http://thenextweb.com/apple/2011/03/17/apple-admits-to-slower-performance-in-ios-web-apps/)

是的，这篇文章有点过时了，但我找不到任何信息表明情况不再如此。

# python - 将cherrypy用于HTTP和HTTPS

> ID：13413986
> 
> 赞同：2
> 
> 时间：2012-11-16T09:43:59.370
> 
> 标签：python, http, blackberry, https, cherrypy

我使用cherrypy设置了一个http（s）上传服务器，用于通过黑莓应用程序[上传内容。](http://docs.cherrypy.org/stable/progguide/files/uploading.html)我使用[此](http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME)代码将数据发送到服务器，但我总是收到错误请求 (400) 错误。它没有提供其他调试信息或任何帮助。有什么想法可能是错误的，或者我可以做些什么来了解更多关于这个问题的信息？

这个错误行是这样的：

`{My IP} - - [16/Nov/2012:11:35:32] "POST /upload HTTP/1.1" 400 1225 "" ""`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:14:28.400

如果服务器只返回 400 条消息，没有任何其他信息，您可以将“engine.autoreload_on”配置选项设置为 True，这应该会在出现问题时为您提供详细的错误消息 + 回溯。另一种选择是为 log.access_file 和 log.error_file 指定文件名，以将它们的输出重定向到特定文件。

# sql - 使用“Is Null”作为基于表单的条件

> ID：13413987
> 
> 赞同：2
> 
> 时间：2012-11-16T09:44:04.130
> 
> 标签：sql, forms, ms-access, criteria

如果勾选了表单上的单选框，我试图让我的查询只返回空记录。如果我在查询中手动包含条件 Is Null ，它就可以正常工作，而其他地方则如

```
IIf([Forms]![Reports]![Status - Active]=True,"Active") 
```

工作得很好。

然而，

```
IIf([Forms]![Reports]![Status - Null]=True,"Is Null") 
```

只是忽略它（我假设是因为它实际上是在寻找文本“Is Null”而不是空记录）和

```
IIf([Forms]![Reports]![Status - Null]=True,Is Null) 
```

失败是因为它太复杂了。有什么方法可以实现我想要实现的目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:49:44.133

例如，您可以通过多种方式解决问题。

```
SELECT t.atext
FROM Table1 t
WHERE IsNull([atext])=[Forms]![Reports]![Status - Null] 
```

顺便说一句，Immediate If (IIf) 需要三个参数。

# java - Java：UI线程未在双线程应用程序中恢复

> ID：13413996
> 
> 赞同：4
> 
> 时间：2012-11-16T09:45:10.617
> 
> 标签：java, multithreading, bluetooth

我目前正在使用两个线程构建一个 Java 应用程序：

第一个线程是关于应用程序的 UI，以及通过蓝牙线程接收到的命令的处理。

蓝牙线程是等待机器人连接并处理通信的蓝牙服务器。

截至目前，UI 线程处于 wait() 状态，直到蓝牙线程收到要处理的新消息。

问题是，我可以从蓝牙线程跟踪 notify/notifyAll 调用，但我的 UI 没有恢复它的活动。

我现在确定我误解了管理同步线程的正确方法，但我无法弄清楚我的软件有什么问题。

这是 UI 的代码：

```
package mapper;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTable;

public class MapperUI extends JFrame implements Runnable {

private ArrayList<String> messageArray;

public MapperUI(){
        super();        
        build();
        this.setVisible(true);
        new Thread(this).start();
}

private void build(){
    setTitle("SLAM Mapper");
    setSize(600,500);
    setLocationRelativeTo(null);
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setContentPane(buildContentPane());
}   
private JPanel buildContentPane(){
    JPanel main = new JPanel();
    main.setLayout(new BorderLayout());

    //TODO Implements auto-generated map after bluetooth communication
    MapPanel map = new MapPanel();
    main.add(map,BorderLayout.CENTER);

    //TODO This fields will be buildt with stored message
    JTable positions = new JTable(15,2);
    main.add(positions,BorderLayout.EAST);

    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new FlowLayout());

    JButton bouton = new JButton("Start");
    buttonPanel.add(bouton);

    JButton bouton2 = new JButton("Send");
    buttonPanel.add(bouton2);

    main.add(buttonPanel,BorderLayout.SOUTH);

    return main;
}

public synchronized void run(){
    MapperCom bt = new MapperCom();
    while(true){
        try {
            System.out.println("Mapper is Waiting......");
            wait();
            String message = bt.getMessage();
            this.messageArray.add(message);
            bt.setNextCommand(processMessage(message));
            notifyAll();
            System.out.println("Mapper Notify");
            build();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
}

public String processMessage(String message){
    String command = "";
    //TODO Build a response
    command = "fffff\n";
    return command;
}
} 
```

这是蓝牙服务：

```
package mapper;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;

import javax.bluetooth.DiscoveryAgent;
import javax.bluetooth.LocalDevice;
import javax.bluetooth.UUID;
import javax.microedition.io.Connector;
import javax.microedition.io.StreamConnection;
import javax.microedition.io.StreamConnectionNotifier;

public class MapperCom extends Thread {
public final UUID uuid = new UUID(                              
        "27012f0c68af4fbf8dbe6bbaf7aa432a", false);
public final String name = "Server";                       
public final String url  =  "btspp://localhost:" + uuid         
                            + ";name=" + name 
                            + ";authenticate=false;encrypt=false;";
private LocalDevice local ;
private StreamConnectionNotifier server ;
private StreamConnection conn ;
private DataInputStream din ;
private DataOutputStream dout ;

private String command;
private String message;

public MapperCom(){
     try {
        this.command = "";
        this.message = "";

        System.out.println("Setting device to be discoverable...");
        local = LocalDevice.getLocalDevice();
        local.setDiscoverable(DiscoveryAgent.GIAC);
        System.out.println("Start advertising service...");

        server = (StreamConnectionNotifier)Connector.open(url);
        System.out.println("Waiting for incoming connection...\n");

        conn = server.acceptAndOpen();
        System.out.println("Client Connected...");
        din = new DataInputStream(conn.openInputStream());
        dout = new DataOutputStream(conn.openOutputStream());

        new Thread(this).start();

        } catch (Exception  e) {
            System.out.println("Exception Occured: " + e.toString());
        }
}

@Override
public synchronized void run(){
    System.out.println("Bluetooth Thread Started");
    while(true){
        try {
            String cmd = "";
            char c;
            System.out.println("Waiting for message");
            while (((c = din.readChar()) > 0) && (c!='\n') ){
                System.out.println("Char received :"+c);
                cmd = cmd + c;
            }

            storeMessage(cmd);

            System.out.println("Bt Notify......");
            notifyAll();
            System.out.println("Bt is Waiting for a command from mapper......");
            wait();
            sendResponse();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

public void sendResponse(){
    try {
        dout.writeChars(command);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public synchronized String getMessage(){
    return this.message;
}

public synchronized void storeMessage (String data){
    this.message = data;
    System.out.println("Received " + data);
}
public synchronized int setNextCommand (String data){
    int result = -1;
    //TODO Implement proper protocol
    this.command = data;
    System.out.println("Sending " + data);

    return result;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:49:55.770

我想当你打电话时`notifyAll()`，它会打电话`this.notifyAll()`。在同一个类中没有其他元素在等待。所以你可以做的是你在两个类上共享同一个对象并调用`obj.wait()`and `obj.notifyAll()`。它会起作用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:03:01.333

下面是一个示例程序。如果您想使用等待和通知进行通信，基本上需要在 2 个线程之间进行一些通用锁定。

```
package ravi.tutorial.java.threads;

public class TestThreads {

    /**
     * @param args
     */
    public static void main(String[] args) {
        CommonLock commonLock = new CommonLock();
        Thread1 thread1 = new Thread1(commonLock);
        Thread2 thread2 = new Thread2(commonLock);
        thread1.start();
        thread2.start();
    }
}

/*
 * Common monitor lock between both threads, used for communication using wait
 * notify.
 */
class CommonLock {

}

// Extending Thread instead of Runnable as its just a test
class Thread1 extends Thread {

    private CommonLock commonLock;

    public Thread1(CommonLock commonLock) {
        this.commonLock = commonLock;
    }

    public void run() {
        System.out.println("Started thread 1");
        System.out.println("waiting thread 1");
        try {
            // TO wait on commonLock, first need to get lock on commonLock. SO
            // put synchronized block of commonLock.
            synchronized (commonLock) {
                commonLock.wait();
            }

        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("DONE waiting thread 1 as I got notification from THread 2");
    }

}

class Thread2 extends Thread {

    private CommonLock commonLock;

    public Thread2(CommonLock commonLock) {
        this.commonLock = commonLock;
    }

    public void run() {
        System.out.println("Running thread 2");

        try {
            System.out.println("Sleeping thread 2");
            // Just take gap of 2 sec before notifying.
            Thread.sleep(2000);

            // TO notify on commonLock, first need to get lock on commonLock. SO
            // put synchronized block of commonLock.
            synchronized (commonLock) {
                System.out.println("Notifying thread 2");
                commonLock.notifyAll();
            }
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:52:48.740

看这个：[线程教程](http://www.java-samples.com/showtutorial.php?tutorialid=306)

> *   wait() 告诉调用线程放弃监视器并进入
>     睡眠状态，直到其他线程进入同一个监视器并调用
>     notify()。
>     
>     
> *   notify() 唤醒对同一对象调用 wait() 的第一个线程。
>     
>     
> *   notifyAll() 唤醒所有在同一个对象上调用 wait() 的线程。最高优先级的线程将首先运行。

这是对 Java 中线程概念的主要误解。

# asp.net - 如果我从代码中添加它们，如何访问 DropDownList 控件

> ID：13413998
> 
> 赞同：0
> 
> 时间：2012-11-16T09:45:22.550
> 
> 标签：asp.net

从代码隐藏中添加它们后，我试图在 div 中访问 DropDownList。如果我像这样将 DropDownList 添加到我的 .aspx 页面：

```
<div id="FiltersDiv" runat="server">
                <asp:DropDownList ID="DropDownListMenu" runat="server" 
                      DataTextField="name" DataValueField="id"
                    AutoPostBack="true" 
                      onselectedindexchanged="DropDownListMenu_SelectedIndexChanged" >
                </asp:DropDownList> 
```

我可以在任何情况下访问

```
protected void AddButton_Click(object sender, EventArgs e)
 {
   var dl = addProductLocationFiltersDiv.Controls.OfType<DropDownList>();
 } 
```

但如果我从代码中添加

```
var ddl = new DropDownList();
 ddl.DataSource = flist;
 ddl.DataTextField = "name";
 ddl.DataValueField = "id";
 ddl.DataBind();
 FiltersDiv.Controls.Add(ddl); 
```

我需要添加几个 DropDownList，我现在不知道会有多少。所以，我需要循环。我错过了一些属性还是我需要怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:47:46.467

当您通过代码添加控件时，您可以通过变量名访问它。

如果您需要访问其中的几个，请考虑将 then 放入`List<DropDownList>`（或者`List<Control>`如果您有不同类型的控件）。

如果您需要在后面的代码中跨方法*共享*这些，请使用字段而不是局部变量。

请注意，由于[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的工作方式，您可能需要在每次回发时重新创建它们，否则您将无法访问它们。动态重新创建此类控件的最佳位置是在`OnInit`处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:53:03.117

```
foreach(DropDownList ddl in FiltersDiv.Controls.OfType<DropDownList>())
{
    Trace.Write(ddl.SelectedValue);
} 
```

这不是我的想法，因此您可能需要将 FiltersDiv 转换为下拉列表 - 如前所述，您需要确保在控件数据之前尽快在页面上重新创建控件写或读。

如果您过早尝试此操作，或者尚未创建控件，您将不会得到任何结果。