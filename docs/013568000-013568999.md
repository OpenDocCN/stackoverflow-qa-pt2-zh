# StackOverflow 问答 13568000-13568999

# mysql - Mysql左连接自我或类似

> ID：13568002
> 
> 赞同：0
> 
> 时间：2012-11-26T15:32:55.620
> 
> 标签：mysql, left-join, self

我有一个这样的查询：

```
SELECT SUM(spend.price) AS total, WEEKDAY(spend.date) AS weekday
FROM spend
WHERE spend.date BETWEEN '2012-11-01' AND '2012-11-07'
GROUP BY WEEKDAY(spend.date) ; 
```

现在查询只给了我用户有一些付款的日子。

```
total weekday
60    2
10    3
3     5
3     6 
```

但相反，我想在没有付款的情况下每天给我 0（零）。

```
total weekday
0     1
60    2
10    3
0     4
3     5
3     6
0     7 
```

表架构[在这里](http://sqlfiddle.com/#!2/9d1ec)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:39:45.000

这是原始语法：

```
SELECT SUM(spend.price) AS total, day AS weekday
FROM (SELECT price, WEEKDAY(date) as day FROM spend WHERE date BETWEEN '2012-11-01' AND '2012-11-07'
UNION ALL
SELECT 0,0
UNION ALL
SELECT 0,1
UNION ALL
SELECT 0,2
UNION ALL
SELECT 0,3
UNION ALL
SELECT 0,4
UNION ALL
SELECT 0,5
UNION ALL
SELECT 0,6
) spend
GROUP BY day ; 
```

这是缩短的：

```
CREATE TEMPORARY TABLE tmp ( `price` int, `day` int );
INSERT INTO tmp VALUES (0,0),(0,1),(0,2),(0,3),(0,4),(0,5),(0,6);
SELECT SUM(spend.price) AS total, day AS weekday
FROM (SELECT price, WEEKDAY(date) as day FROM spend WHERE date BETWEEN '2012-11-01' AND '2012-11-07'
UNION ALL
SELECT * FROM tmp
) spend
GROUP BY day ; 
```

这是一个演示：[http ://sqlfiddle.com/#!2/8c323/3/0](http://sqlfiddle.com/#!2/8c323/3/0)

# paypal - 贝宝验证第一次付款或 initamt 在定期付款中计费

> ID：13568003
> 
> 赞同：9
> 
> 时间：2012-11-26T15:32:58.773
> 
> 标签：paypal, subscription, recurring-billing

我希望我的用户能够订阅定期付款（使用快速结帐 api） 第一次付款需要在用户订阅后立即计费，并且我需要在授予他们访问权限之前知道他们已经成功计费。

有没有直接的方法来做到这一点？

我已经尝试过创建一个带有 INITAMT 集的定期付款配置文件，但是，不清楚是否正在向用户收费（使用沙箱时），并且没有返回 txn_id（或等效项）以表明计费已已完成。我确实收到了 IPN 确认，但是在创建配置文件后“一段时间”会出现，这使得很难提供出色的用户体验。

我尝试添加一次性付款，使用 DoExpressCheckoutPayment 对其进行身份验证，然后在一次性付款有效时设置定期配置文件，但是身份验证也失败了，此时我已经放弃了（尽管可能还有一些这种方法中的腿）。

无论如何，我想我会在这里问专家。有没有一种简单的方法来设置定期付款，每月一次付款，立即支付第一笔付款（）并通过 API 确认第一笔付款，而无需等待未知的时间来获得 IPN 确认消息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-07T09:04:18.750

这可以根据您的需要完成，我已经对其进行了测试并且可以正常工作。关键是您需要使用相同的 Express Checkout 流程同时处理标准数字商品付款和经常性付款，即要求用户一次性付款并批准订阅。你会想要设置 s

1.  按照说明设置付款：[https ://developer.paypal.com/webapps/developer/docs/classic/express-checkout/ht_ec-basicDigGoodsPayment-curl-etc/](https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/ht_ec-basicDigGoodsPayment-curl-etc/)

2.  添加为定期付款指定的字段： [https ://developer.paypal.com/webapps/developer/docs/classic/express-checkout/ht_ec-recurringPaymentProfile-curl-etc/](https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/ht_ec-recurringPaymentProfile-curl-etc/)

3.  处理“DoExpressCheckoutPayment”，如果成功，“CreateRecurringPaymentsProfile”，开始日期为您的第一个“续订”日期。

您现在应该拥有一次性付款的交易 ID，以及定期付款的配置文件 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:30:30.663

我会坚持使用 INITAMT 处理第一笔付款的第一个选项，但将 FAILEDINITACTION 设置为 CancelOnFailure。

这样，如果初始付款不成功，配置文件将立即设置为暂停状态而不是活动状态。

然后，在您的登录系统或您用来保护订阅者内容的任何系统中，您可以使用[GetRecurringPaymentsProfileDetails](https://www.x.com/developers/paypal/documentation-tools/api/getrecurringpaymentsprofiledetails-api-operation-nvp)来获取订阅配置文件的当前状态。如果它不是“活动”，您可以相应地向用户发送消息并拒绝他们访问内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-03T09:40:49.687

首次创建配置文件时，PayPal 会发送一个名为“recurring_payment_profile_created”的 IPN。此 IPN 包含一个字段“initial_payment_txn_id”。您可以使用 GetTransactionDetails 来查找此 ID 并确定该事务是否已完成。确保您将该交易 ID 标记为已处理，以便您的代码在发送该交易的 IPN 时不会重复发送（如果这与您相关）。这个例子类似于我们在 IPN 监听器中的处理方式（用 Ruby 编写，针对[PayPal 的官方 Merchant SDK gem](https://github.com/paypal/merchant-sdk-ruby "GitHub 上的 paypal-sdk-merchant gem")）：

```
case params[:txn_type]
  when 'recurring_payment_profile_created'
    # The profile has been created.  Perform any action, if necessary...

    initial_txn = params[:initial_payment_txn_id]
    return if ProcessedTransaction.exists?(initial_txn)

    request = api.build_get_transaction_details({
        :TransactionID => initial_txn
    })

    resp = api.get_transaction_details(request)
    if resp.success? and resp.PaymentTransactionDetails.PaymentInfo.PaymentStatus == 'Completed'
        # The initial payment is completed, perform the action...
        # Add this ID to your ProcessedTransaction table so you don't double-process...
    end
  # other 'when' statements for other transaction types, etc go here
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T18:55:06.123

我发现的唯一解决方案（很差）是接受最多 24 小时延迟通知第一个月的订阅已计费。我们现在正在研究 Google checkout 和 Braintree Payments 作为 paypal 的替代品，以便我们可以摆脱它。

# java - 如何移动 JPanel 的所有内容？

> ID：13568013
> 
> 赞同：0
> 
> 时间：2012-11-26T15:33:23.803
> 
> 标签：java, swing, scroll, jpanel, graphics2d

我有一个继承自`JPanel`. 它被调用`DrawingPanel`，在这个类中我使用绘制线条和形状，`Graphics2D`并使用用户鼠标的位置对这些形状进行一些操作。

面板中的图纸会占用屏幕很大的空间（例如我可能会从 (-200, -300) 到 (2000, 1000) 画线），所以实际上我只看到了一部分图纸。这就是为什么我希望能够通过滚动来移动面板中绘制的所有内容。

是否有一个简单而优雅的解决方案来做到这一点，并且不需要对我的代码进行太多更改？

编辑：实际上我的问题是我不知道一种优雅的方式来滚动`JPanel`使用`Graphics2D`. 我试图将我的添加`JPanel`到 a`JScrollPane`但它没有奏效。实际上，我应该在我的代码中添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:51:21.470

将您的绘图代码放在一个单独的方法中，称为（例如）`draw`，它接受 1 个参数，一个 Graphics 对象。
在`paintComponent`方法中，您`translate()`应该根据绘图的 tonwhoch 区域显示 Graphics 对象，然后将其传递给您的`draw`方法。

# python - 我可以使用 SQLPlus 执行 .sql 文件吗？

> ID：13568014
> 
> 赞同：2
> 
> 时间：2012-11-26T15:33:31.550
> 
> 标签：python, oracle, sqlplus

我有一个带有以下代码的 .sql 文件：

```
delete from stalist
where stalistid=4944
/
insert into stalist
(stalistid, staid)
(select distinct 4944, staid
from staref
Where staid in(
3797,3798,
3870,4459,
3871,3872,
3876,3877,
0
))
/
commit
/ 
```

我想使用 Python 从 SQLPlus 执行这个文件。这可能吗？我在这类工作中没有任何 python 经验，可以使用一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:40:09.400

请参阅本教程： http: [//moizmuhammad.wordpress.com/2012/01/31/run-oracle-commands-from-python-via-sql-plus/](http://moizmuhammad.wordpress.com/2012/01/31/run-oracle-commands-from-python-via-sql-plus/)

IE

```
from subprocess import Popen, PIPE

#function that takes the sqlCommand and connectString and retuns the output and #error string (if any)

def runSqlQuery(sqlCommand, connectString):

session = Popen(['sqlplus', '-S', connectString], stdin=PIPE, stdout=PIPE, stderr=PIPE)
session.stdin.write(sqlCommand)
return session.communicate() 
```

应该这样做（其中 sqlCmmand 是“@scriptname.sql”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:00:10.500

以下是如何执行此操作的示例。您需要读取文件并将整个字符串作为命令传递。

```
(username, password, host) = ("user","password","host") 

conn_string = " %s/%s@%s "% (username,password,host)
session = Popen(['sqlplus','-S', conn_string], stdin=PIPE, stdout=PIPE, stderr=PIPE)
logging.info("Starting sqlplus")

sql_file = '%s/%s' % (sql_folder, file)
logging.info("Running " + sql_file)
f= open(sql_file,'r')
cmd = f.read()
session.stdin.write(cmd)

stdout, stderr = session.communicate() 
```

# java - Maven 程序集插件：无法使用以下命令检索数字文件属性：'/bin/sh -c ls -1nlaR

> ID：13568017
> 
> 赞同：6
> 
> 时间：2012-11-26T15:33:39.153
> 
> 标签：java, maven, parallels

我在我的 OSX 10.7.5 上与 Debian 并行运行，并且我已经将一个包含来自 OSX 的 Java 源代码的目录链接到虚拟 Debian 机器（使用 Parallels 工具，它将目录挂载到`/media/psf/`.

编译工作正常，我唯一的问题是 Maven Assembly 插件：它抱怨：

```
Failed to retrieve numeric file attributes using: '/bin/sh -c ls -1nlaR 
```

我用谷歌搜索了以下问题：http: [//jira.codehaus.org/browse/MASSEMBLY-588](http://jira.codehaus.org/browse/MASSEMBLY-588)

他们建议使用`<directory>${baseDir}</directory>`in `jarlib.xml`。通过这个修改，代码可以编译，但是当检查内容时`jar tf file.jar`，它完全丢失了所有编译的源代码，只添加了 maven 库。

在本地文件系统上正常工作的文件是：

```
<assembly>
  <id>jar-with-dependencies</id>
  <formats>
    <format>jar</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <fileSets>
    <fileSet>
      <directory>target/classes</directory>
      <outputDirectory>/</outputDirectory>
    </fileSet>
  </fileSets>
  <dependencySets>
    <dependencySet>
      <outputDirectory>/lib</outputDirectory>
      <unpack>false</unpack>
      <scope>runtime</scope>
    </dependencySet>
  </dependencySets>
</assembly> 
```

有没有办法克服这个问题？

编辑：

```
Apache Maven 2.2.1 (rdebian-4)
Java version: 1.6.0_26
Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux" version: "2.6.32-5-amd64" arch: "amd64" Family: "unix" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-17T22:59:24.497

/bin/sh -c ls -1nlaR {directory_structure/file}
我通过重命名目录结构中具有撇号（'）的文件夹来解决它。

之所以会出现此问题，是因为执行命令 /bin/sh -c ls -1nlaR {directory_structure/file} 时 maven 程序集没有转义撇号（'）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-17T14:21:43.707

> `<outputDirectory>/lib</outputDirectory>`

您可以像下面的代码一样发出“/”，然后重试。

```
<outputDirectory>lib</outputDirectory> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T13:27:37.527

在我们的系统上，这是通过使用最新版本的 maven-assembly-plugin 解决的。

似乎根本问题在于称为 Plexus 的依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T14:56:00.330

我在这里发布了对这个相当烦人的问题的回复，以防其他人正在寻找解决方案（在我的情况下，我在从 Ubuntu 12.04 LTS 上的 maven 移动到 Ubuntu 14.04LTS 上的 maven 后第一次遇到了这个问题）。首先是关于我的环境和一些解决方法：

(a) 我的环境是 Ubuntu 14.04LTS/amd64 和最新的 maven，Java 7 (OpenJDK)。(b) 未检索其文件信息的相关文件位于导入到我正在处理的机器中的 NFS 文件系统上（尽管这看起来可能不是问题）。(c) 如果我做了 an`ls -1nlaR <long pathname on NFS mounted directory>/web.xml`然后`mvn war:war`再做一次，它不会产生任何错误（即`BUILD SUCCESS`for `mvn war:war`）。

解决方法是安装`libmaven-shared-utils-java`：

```
$ apt-cache search plexus | grep maven
libmaven-shared-utils-java - Replacement for plexus-utils in Maven 
```

您可能已经通过谷歌搜索了解了这个问题，plexus 是罪魁祸首，而 Ubuntu 上的 Maven 似乎决定从 plexus 继续前进。安装上述共享实用程序后，我的 Maven 构建正在按应有的方式进行。

# deployment - WCF 数据服务部署问题

> ID：13568023
> 
> 赞同：1
> 
> 时间：2012-11-26T15:33:51.507
> 
> 标签：deployment, wcf-data-services

我已经构建了一个 WCF 数据服务，当我在我的开发机器上运行它时它可以工作，但是当我将它移动到在 Azure 上运行的 Windows 2008 VM 时，当我尝试导航到 .svc URL 时出现以下错误：

> **请求错误**
> **服务器在处理请求时遇到错误。异常消息是“'System.Data.Services.Providers.ResourceType' 的类型初始化程序引发了异常。”。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：**
> 
> 在 System.Data.Services.Providers.ResourceType.get_PrimitiveResourceTypeMap() 在 System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary `2 knownTypes, IDictionary`2 childTypes, IDictionary 1.CreateMetadataAndQueryProviders `2 entitySets) at System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() at System.Data.Services.DataService`(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) 在系统.Data.Services.DataService`1.CreateProvider() at System.Data.Services.DataService`1.HandleRequest() 在 System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) 在 SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) 在 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[ ] 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 的输入，Object[]& 输出) ) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

我通过在服务器上的默认网站下创建一个 Web 应用程序并将我的文件直接复制到文件夹中来进行部署。同一位置的 .aspx 页面按预期工作。

我发现[了这篇](http://johonline.wordpress.com/2012/07/24/wcf-data-services-5-0-request-error/)文章，这表明服务器上没有正确的 DLL 文件是一个问题。除了特定于我的服务的 DLL 之外，我的 bin 文件夹还包含以下 DLL，但它仍然不起作用：

EntityFramework.dll 5.0.0.net40
Microsoft.Data.Edm.dll 5.0.0.50808
Microsoft.Data.OData.dll 5.0.0.50808
Microsoft.Data.Services.Client.dll 5.0.0.50808
Microsoft.Data.Services.dll 5.0.0.50808
System.Spatial.dll 5.0.2.50815

我已经用尽了我有限的知识和我认为相当不错的搜索能力，所以如果有人能指导我正确的方向，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:59:25.187

为什么 System.Spatial 有不同的版本？请确保 System.Spatial 的版本也是 5.0.0.50808。那应该可以解决问题。

基本上，所有的程序集都应该是相同的版本。

# javascript - 如何从数组中获取javascript中的列表

> ID：13568028
> 
> 赞同：1
> 
> 时间：2012-11-26T15:34:01.787
> 
> 标签：javascript, jquery, underscore.js

```
['string1', 'string2'].join(',') // "string1,string2" 
```

如何获得以下结果？

```
"string1", "string2" 
```

我正在使用下划线和 jquery。

我的目标是做这样的事情：

```
_.without(['string1', 'string2', 'string3'], "string1", "string2");
=> ['string3'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:54:59.113

对于您的情况，您不需要“免费”元素列表。
您只需要使用`_.difference`而不是`_.without`.

```
 _.difference(['string1', 'string2', 'string3'], ["string1", "string2"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:37:27.567

你不能有一个“免费”的元素列表。这不是 Javascript 的工作方式。你总是处理数组、集合之类的东西。

我不太了解 Underscore.js，但试试这个：

```
var a = ['string1', 'string2', 'string3'],
    b = ['string1', 'string2'];
_.without.apply(_, [a].concat(b)); 
```

的目的`apply`是调用具有动态数量的动态参数的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:41:25.273

你可以像这样得到它：

`var something = '"' + ['string1', 'string2'].join('", "') + '"';`

这将导致：`"string1", "string2"`

或者你可以使用`JSON.stringify(['string1', 'string2'])`

这将导致：`["string1","string2"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:44:45.387

另一种方法是编写一个简单的函数，从另一个中删除一个字符串数组，比如

```
var arr = ["str1","str2","str3"];

   function removeStrings(a,strs) {
     strs.forEach(function(e) {
       a.splice(a.indexOf(e),1);
     });
   }

removeStrings(arr,["str2","str1"]);
console.log(arr);//["str3"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T16:45:30.750

差异看起来更适合 [http://underscorejs.org/#difference](http://underscorejs.org/#difference)

```
var rem, orig, val;
rem = ['string1', 'string2'];
orig = ['string1', 'string2', 'string3'];

val = _.difference(orig, rem); // ['string3']; 
```

[http://jsbin.com/eyegoh/1/edit](http://jsbin.com/eyegoh/1/edit)

或者使用 jQuery 稍长一点，使用 [http://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)和[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

```
var rem, orig, val;
rem = ['string1', 'string2'];
orig = ['string1', 'string2', 'string3'];

val = $.grep(orig, function(el, ix) {
    return $.inArray(el, rem) == -1;
}); 
```

[http://jsbin.com/uhihid/1/edit](http://jsbin.com/uhihid/1/edit)

# android - 使用 Android 兼容库

> ID：13568033
> 
> 赞同：2
> 
> 时间：2012-11-26T15:34:25.347
> 
> 标签：android, android-support-library, android-compatibility

我在 Android 兼容性库上做了很多工作，并且一直使用库中的类而不是 Android jar 中的类来确保向后兼容性。

这是正确的使用方法吗？

我有一个想法，为使用该库的类提供一个接口。这样我可以从该类型构建 2 个类。1个使用ACL，另一个使用Android jar。使用 roboguice 我可以自动使用正确的类型。

这样做有什么好处或坏处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:10:52.177

最大的缺点是在使用实际的 android jar 与兼容性库时可能会有轻微的实现变化。这就是为什么兼容性库在 3.0 及更高版本上运行时不会切换实现，即使它可以。

为了保持一切一致并避免令人头疼的问题，请在全局范围内保持支持库实现，除非您正在实现特定于一个 api 版本的某些东西。

# java - 在 JNA 中找不到 Kernel32.INSTANCE.ReadProcessMemory

> ID：13568049
> 
> 赞同：4
> 
> 时间：2012-11-26T15:35:12.817
> 
> 标签：java, jna, kernel32

```
 import com.sun.jna.Native;
       import com.sun.jna.Memory;
       import com.sun.jna.Pointer;
       import com.sun.jna.ptr.*;
       import com.sun.jna.platform.win32.Kernel32;
       import com.sun.jna.platform.win32.User32;
       import com.sun.jna.platform.win32.WinDef;
       import com.sun.jna.platform.win32.WinDef.HWND;
       import com.sun.jna.platform.win32.*;

public class apples {

       public static void main(String[] args) {

           IntByReference pid = new IntByReference();
           int offset = 0x7AF5DBDC;
           int buffer = 32;
           Memory output = new Memory(buffer);

HWND hwnd = User32.INSTANCE.FindWindow("notepad", null);   
    if (hwnd != null)
    {
    System.out.println("i got the handle");
    User32.INSTANCE.GetWindowThreadProcessId(hwnd, pid);
    System.out.println("PID is " + pid.getValue());
    WinNT.HANDLE hProc =  Kernel32.INSTANCE.OpenProcess(0, false, pid.getValue());

    Output: 
    i got the handle
    PID is 752 
```

接下来，我想使用 Kernel32.INSTANCE.ReadProcessMemory();

但是，我无法在 Kernel32 中找到该函数。这个功能被删除了吗？如果是这样，还有其他方法可以做 ReadProcessMemory 吗？

我正在使用 Java 并使用 JNA Lib。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-15T10:39:31.613

该问题最初是在2012年提出的。该功能于[2014年6月29日](https://github.com/java-native-access/jna/commit/b0546cda7601ee85936a82d945dc2edfc78aa254)`ReadProcessMemory`添加到`jna.platform.win32.Kernel32`界面中，这意味着该功能在询问时还没有映射。

JNA 4.2.0 及更高版本附带该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T16:00:51.103

您可能需要在调用它的函数之前定义 Kernel32 实例。

```
Kernel32 kernel32 = (Kernel32) Native.loadLibrary(Kernel32.class, W32APIOptions.UNICODE_OPTIONS);
int memValue = kernel32.ReadProcessMemory(WinNT.HANDLE, pointer, pointer, int, IntByReference); 
```

# jekyll - 在 Liquid 中过滤或分组集合

> ID：13568052
> 
> 赞同：3
> 
> 时间：2012-11-26T15:35:19.087
> 
> 标签：jekyll, liquid

对于一个简单的个人 Jekyll 博客，我想按, lang （语言）`site.posts`上的属性对我进行分组。`post`这是“en”、“nl”或 nil。

然后我想呈现两个帖子列表。目前我有：

```
<section lang="nl">
<h2>Nederlandse Artikelen</h2>
<ul class="posts">
  {% for post in site.posts limit:50 %}
    {% if post.lang == "nl" %}
      {% include li_for_post_with_date.yml %}
    {% endif %}
  {% endfor %}
</ul>
<a href="archief.html">Archief »</a>
</section>
<section lang="en">
<h2>English Articles</h2>
<ul class="posts">
  {% for post in site.posts limit:50 %}
    {% if post.lang == nil or post.lang == "en" %}
      <li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ BASE_PATH }}{{ post.url }}">{{ post.title }}</a></li>
    {% endif %}
  {% endfor %}
</ul> 
```

这有两个问题：

1.  最烦人的；在最后 50 个帖子中，有 47 个 lang=en 和 3 个 lang=nl，我现在得到一个倾斜的列表。我想要 25 个 lang=en 和 25 个 lang=nl 条目。
2.  循环遍历了两次，这让我觉得无能为力。

有没有办法在 Liquid 中分配或准备一个集合？这样我就可以循环`site.posts`一次并准备一个嵌套集合，例如`site.grouped_posts[en]`.

还是另一种伎俩？

**解决方案**

正如[汤姆克拉克森](https://stackoverflow.com/a/13586001/73673)指出的那样，保持柜台是正确的方向。然而，增加计数器只出现在最近的 Liquid 版本中，在 Github 上运行的版本（我的 Liquid 在这里编译）具有 2.2.2，无法增加计数器。Toms 解决方案本身也不起作用，因为 Liquid 将变量`counter`转换为字符串，无法与`<`.

我通过附加一个字符串并计算字符来创建一个 hack。

```
{% assign counter = '.' %}
{% for post in site.posts %}
  {% if counter.size <= 25 and post.lang == "nl" %}
    {% capture counter %}{{ counter | append:'.' }}{% endcapture %}
    {% include li_for_post_with_date.yml %}
  {% endif %}
{% endfor %} 
```

如前所述，丑陋，所以如果有更清洁的解决方案，请添加解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-26T21:57:56.420

不幸的是，Liquid 的过滤器不能`for`循环工作。但是，它们确实适用于变量赋值。

```
{% assign posts_by_lang = site.posts | group_by: "lang" %}
{% for lang in posts_by_lang %}
  {{ lang.name }}
  {% for post in lang.items limit: 25 %}
    {{ post.title }}
  {% endfor %}
{% endfor %} 
```

`name`和`items`属性由 生成`group_by`，其余一切照旧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:07:13.400

我不认为您可以在不制作插件或自定义过滤器的情况下创建过滤后的集合，但您可以计算已为该组收集的帖子数量，而不是使用限制。

```
{% for post in site.posts %}
    {% if counter < 25 and post.lang == nil or post.lang == "en" %}
        {% capture counter %}{{ counter | plus:1 }}{% endcapture %} 
        <li></li>
    {% endif %}
{% endfor %} 
```

该代码未经测试，但应该可以使用相当相似的代码。

# asp.net - 将 CSS 样式关联到 ASP.Net 控件

> ID：13568055
> 
> 赞同：0
> 
> 时间：2012-11-26T15:35:30.757
> 
> 标签：asp.net, css

所以我知道我可以通过使用 CSS-class 或 CSS-id 关联来设计 HTML 控件的样式。

例如，HTML：

CSS：

```
div
{
    position: absolute;
}

    div#divHeader
    {
        left: 1px;
        right: 1px;
        top: 5px;
        min-width: 90%;
        height: 100px;
        text-align: center;
    } 
```

HTML：

```
 <div id="divHeader">
...
        </div> 
```

### 问题：

我可以为 ASP.Net 控件使用相同的关联，还是必须隐式声明与 CSSClass 属性的关联？

CSS：

```
#lblTitle
{
    width: 100px;
} 
```

HTML：

```
 ...
  <td id="tdTitle">
    <asp:Label ID="lblTitle" Style="font-size: 46pt; vertical-align: middle;" runat="server" />
  </td>
  ... 
```

我认为它会起作用，但需要一些验证。如果我必须使用 CSSclass 属性，我会但宁愿将该属性保留用于其他通用样式开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:12:25.753

你有几个选择：

1.  使用类或匹配 ID 定义 CSS
2.  确定呈现的 HTML 元素类型（span、input、div 等）并围绕它构建样式。

选项 1 在使用类时不会成为真正的问题，除了必须将 class="yourclass" 放在您的控件标签上。我倾向于远离 ID 标签，除非有明确的理由来设计这一个元素。

选项 2：您必须深入了解如何根据表单中呈现的 HTML 分层定义 css；在渲染时弄清楚“”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:28:07.483

我可以为 ASP.Net 控件使用相同的关联，还是必须隐式声明与 CSSClass 属性的关联？

答案是肯定的。
但正如您可能会说的那样，它`div#divHeader`是一个 id css。它将应用于每个`div`具有 id 的人`divHeader`。
但是您也应该知道 a`html-control`和之间的区别`asp.net control`。

asp.net 中的`id`属性在运行时发生变化，这可能是由于许多原因。

1.  您正在使用`master`和`content pages`。
2.  您正在使用`user controls`.
3.  如果您正在使用`gridview`或类似的控件。

在这种情况下`1`，如果您使用的是 asp.net 4.o 及更高版本，则`2`可以使用`static id`如下。

```
 ClientIDMode =static 
```

但是在gridview的情况下，您可以使用父子或herical方法。您将必须了解 html 在浏览器上的呈现。
只有这样你才能创建一个好的 css 类。

# c# - 在 C# 字典的键中搜索部分单词并更新其 bool 值

> ID：13568056
> 
> 赞同：0
> 
> 时间：2012-11-26T15:35:32.257
> 
> 标签：c#, .net, winforms

我已经通过以下方式声明了一本字典：

```
public static Dictionary<string,bool> Features {get;set;} 
```

填充此字典后，它具有以下值：

```
**[Key],[Value]**
module1.add,true
module1.update,true
module1.delete,true
module1.save,true
module1.clear,true
module2.add,true
module2.update,true
module2.delete,true
module2.save,true
...
module10.add,true
module10.update,true
module10.delete,true
module10.save,true 
```

填充后，我需要遍历字典键并更新字典值。

例如：无论我有 .add 和 .delete 键，它的值都需要更新为 false。

更新后应该是这个样子

```
module1.add,false
module1.update,true
module1.delete,false
module1.save,true
module1.clear,true
module2.add,false
module2.update,true
module2.delete,false
module2.save,true
...
module10.add,false
module10.update,true
module10.delete,false
module10.save,true 
```

让我知道如何遍历字典并更新 C# 中的值。感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T15:42:22.007

这将获取所有以 .add 或 .delete 结尾的键，并将它们的值更新为 false。

```
Features.Keys.Where(v => v.EndsWith(".add") || v.EndsWith(".delete"))
    .ToList().ForEach(v => Features[v] = false); 
```

* * *

这里没有 linq：

```
var targetFeatuers = new List<string>();
foreach (var feature in Features.Keys)
{
    if (feature.EndsWith(".add") || feature.EndsWith(".delete"))
    {
        targetFeatuers.Add(feature);
    }
}

foreach (var feature in targetFeatuers)
{
    Features[feature] = false;
} 
```

请注意，您必须创建单独的键列表以避免在枚举时修改集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:39:27.497

```
foreach (var item in Features) {
    if (item.Key.Contains("delete") || item.Key.Contains("add"))
        Features[item.Key] = false;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T15:40:20.787

这就是您更新特定字典中的值的方式。

```
bool newValue = true;
if (myDictionary.ContainsKey("module10.add")) {
    myDictionary["module10.add"] = newValue;
} 
```

这就是您遍历字典中所有项目的方式。

```
foreach (string key in myDictionary.Keys) {
    myDictionary[key] = newValue;
} 
```

# facebook-ads-api - 为什么出价估算波动如此之大？

> ID：13568057
> 
> 赞同：1
> 
> 时间：2012-11-26T15:35:38.073
> 
> 标签：facebook-ads-api

我目前正在使用 Facebook 广告 API 的到达率估算，详细信息在这里 -

[https://developers.facebook.com/docs/reference/ads-api/reachestimate/](https://developers.facebook.com/docs/reference/ads-api/reachestimate/)

我进行了一项测试，以 20 到 30 秒的间隔测量出价估算值的变化。查看 CPC 最大值，查询之间的许多变化在 +/- 5% 之间，有些变化高达 +/- 14%。

我知道这些是估算值，但任何人都可以深入了解这些出价估算值的快速波动，并推荐克服这些波动的策略吗？

# ios5 - 未从子 didSelectRowAtIndexPath 调用父协议委托方法

> ID：13568063
> 
> 赞同：1
> 
> 时间：2012-11-26T15:35:53.907
> 
> 标签：ios5, protocols

我只为 iOS 开发了几个月，并且在很多场合都使用过协议，但是我已经被这个问题困扰了几天。

这是我的代码

子头文件：QuoteSelections.h

```
@protocol myDelegate
 @optional -(void)selectedValueIs:(NSString *)value;   
@end

@interface QuoteSelections : UITableViewController<UITableViewDataSource, UITableViewDelegate> {

}

@property (retain, nonatomic) NSMutableArray *ArrDetails;

@property (assign) id<myDelegate> delegate;

@end 
```

子方法文件：QuoteSelections.m

```
@implementation QuoteSelections
@synthesize delegate;

(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *valueString = @"Test";

    [self.delegate selectedValueIs:valueString];

    [self.navigationController popViewControllerAnimated:YES]; } 
```

我`selectedValueIs`用测试字符串调用了委托方法。

这是父头文件：newQuoteSec.h

```
@interface newQuoteSec : UITableViewController <myDelegate>  {
    QuoteSelections *quoteSelections;  } 
```

这是我的父方法文件：newQuoteSec.m

```
(void)viewDidLoad {
    [super viewDidLoad];

    quoteSelections = [[QuoteSelections alloc]init];
    quoteSelections.delegate = self; }

(void)selectedValueIs:(NSString *)value {
    ddlPurposeOfLoan.text = value; } 
```

我已经在 中设置了子控制器的委托`viewDidLoad`，我认为这应该足以调用我的`selectedValueIs`方法，但事实并非如此。为什么？

* * *

这是 Yogesh 推荐的编辑版本

目的是在第二个视图控制器中设置所选项目的值以填充第一个视图控制器中的文本字段

QuoteSelections.h

```
@protocol myDelegate

    @optional -(void)selectedValueIs:(NSString *)value;

@end

@interface QuoteSelections : UITableViewController<UITableViewDataSource, UITableViewDelegate>
{

}

@property (assign) id<myDelegate> myDelegate; 
```

QuoteSelections.m

```
#import "QuoteSelections.h"

@interface QuoteSelections ()

@end

@implementation QuoteSelections

@synthesize myDelegate;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *valueString = @"Test";

    [self.myDelegate selectedValueIs:valueString];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

newQuoteSec.h

```
@interface newQuoteSec : UITableViewController <STComboTextDelegate, STDateTextDelegate, JSONRPCServiceDelegate, UITextFieldDelegate, UITableViewDelegate, myDelegate>
{
    QuoteSelections *quoteSelections;
} 
```

newQuoteSec.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    quoteSelections = [[QuoteSelections alloc]init];
    quoteSelections.myDelegate = self;
}

-(void)selectedValueIs:(NSString *)value
{
    ddlPurposeOfLoan.text = value;
} 
```

编辑...

我在设置委托之前插入了一个 NSLog

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *valueString = @"Test";

    NSLog(@"Showing the delegate didSelectRowAtIndexPath%@", self.myDelegate);

    selectedValue = valueString;

    [self.myDelegate selectedValueIs:valueString];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

输出窗口显示空

2012-11-27 10:23:59.562 miLoan[18225:c07] 显示代理 didSelectRowAtIndexPath(null)

任何想法为什么？其他一切看起来都不错。

我也在使用故事板！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:45:35.370

更改 QuoteSelections Controller 类中的委托名称，因为它已经有一个委托 (UITableViewDelegate) 属性。

改变

```
@property (assign) id<myDelegate> delegate; 
```

至

```
@property (assign) id<myDelegate> myDelegate; 
```

并在所有其他地方进行更改。

# html - LimeSurvey 邮件联系信息

> ID：13568064
> 
> 赞同：-2
> 
> 时间：2012-11-26T15:35:59.833
> 
> 标签：html, css

我正在尝试提出一个如下图所示的问题......我将如何创建一个标签集，其中框彼此相邻并且都在同一个问题下

![在此处输入图像描述](../Images/e50b95a68f2936ec8fb89c38e87035e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:48:33.310

使用一张桌子。

使用浮动 CSS...

和许多其他选择。

# android - Android DatagramSocket 错误消息：EADDRINUSE（地址已在使用中）

> ID：13568066
> 
> 赞同：21
> 
> 时间：2012-11-26T15:36:00.383
> 
> 标签：android, sockets, networking, chat

我正在尝试编写一个简单的 android 聊天应用程序。我创建了一个处理所有网络通信的服务类。DatagramSocket 绑定在一个单独的线程中。有一次我收到此错误并且应用程序崩溃：

```
java.net.BindException: bind failed: EADDRINUSE (Address already in use)
at libcore.io.IoBridge.bind(IoBridge.java:89)
at java.net.PlainDatagramSocketImpl.bind(PlainDatagramSocketImpl.java:68)
at java.net.DatagramSocket.createSocket(DatagramSocket.java:133)
at java.net.DatagramSocket.<init>(DatagramSocket.java:78) 
```

这是产生它的代码。错误发生在**新的DatagramSocket**线上如何避免这个错误？谢谢你。

```
private class ComThread extends Thread {

        private static final int BCAST_PORT = 8779;
        DatagramSocket mSocket;
        InetAddress myBcastIP, myLocalIP;

        public ComThread() {

            try {
                myBcastIP = getBroadcastAddress();
                if (D)
                    Log.d(TAG, "my bcast ip : " + myBcastIP);

                myLocalIP = getLocalAddress();
                if (D)
                    Log.d(TAG, "my local ip : " + myLocalIP);

                if (mSocket == null) {
                    mSocket = new DatagramSocket(BCAST_PORT);
                    mSocket.setReuseAddress(true);
                    mSocket.setBroadcast(true);
                }           

            } catch (IOException e) {
                Log.e(TAG, "Could not make socket", e);
            }
        } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-22T14:44:41.283

由于 Sean 要求提供代码，因此我将 Nikola 的答案翻译成以下代码，这与我在应用程序中使用的代码类似，以防万一：

```
if (mSocket == null) {
    mSocket = new DatagramSocket(null);
    mSocket.setReuseAddress(true);
    mSocket.setBroadcast(true);
    mSocket.bind(new InetSocketAddress(BCAST_PORT));
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-26T16:16:43.510

您需要`SO_REUSEADDR`在绑定之前进行设置。不要在构造函数中指定端口 - 创建未绑定的套接字[`DatagramSocket(null)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/DatagramSocket.html#DatagramSocket%28java.net.SocketAddress%29)，然后设置选项，然后[`bind()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/DatagramSocket.html#bind%28java.net.SocketAddress%29)显式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T11:57:00.307

**我面临的另一个原因，**

如果您从外部线程访问使用套接字的方法，则必须确保该线程不会在同一时间多次访问该方法（或者换句话说，不会创建多个套接字time)，尽管[DatagramSocket 的 send 和 receive 方法是线程安全](https://stackoverflow.com/a/3108730/1638739)的，但对象的构造`DatagramSocket`不是，因此您只需同步能够创建`DatagramSocket`套接字的方法：

```
synchronized public void my_datagram_socket() throws Exception{

  // create the socket
  // operations through the socket
  // whatever you want

} 
```

# algorithm - 人工智能、导航、地图绘制、寻路算法概述

> ID：13568069
> 
> 赞同：1
> 
> 时间：2012-11-26T15:36:13.503
> 
> 标签：algorithm, artificial-intelligence, robotics

我想从人工智能和自主机器人的话题开始。你推荐什么书（或网页？）来概述这个领域的当今方法？我想了解正在使用的算法，了解它们的优缺点等。我知道这里有很多讨论这个主题的线程，但我在讨论中发现的是特定的算法和对它们的一些引用。我想要一个提供方法概述的来源，以便我可以更好地想象整个活动领域。有什么建议么？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:10:25.073

维基[百科关于 AI](http://en.wikipedia.org/wiki/Artificial_inteligence)的文章是一个很好的起点。请记住查看每篇文章末尾的“另见”、“参考”、“进一步阅读”和“外部链接”部分。这将帮助您从广泛的 AI 主题开始，并将引导您阅读有关特定算法等的更详细的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:26:54.953

您的主题之一：

> Mark De Berg：计算几何，第 13 章：机器人运动规划

# java - 使用错误类的开销

> ID：13568071
> 
> 赞同：0
> 
> 时间：2012-11-26T15:36:18.120
> 
> 标签：java, android

此应用程序导入 android.graphics.Point。

在应用程序中的某个时刻，我需要一个 ArrayList<Integer, Integer> 来表示和排序几个（索引、值）对，因此我使用 ArrayList<Point> 作为快速修复。

我想知道这是否有任何开销。Point 方法已经在内存中的某个地方，Point 只有两个字段，x 和 y，因此不会为字段占用额外的内存。

我是否正确假设我所做的事情都是丑陋的 - 因为我将一个类用于其目的之外的其他事情，并且实际上很有用，因为如果我不创建/导入一个具有两个 it 字段的类，那么开销会更少？

最后，任何人都可以建议好好阅读这些问题吗？

此致

# ios - 如何在测试框架中测试 NSLog（默认 iOS）

> ID：13568075
> 
> 赞同：3
> 
> 时间：2012-11-26T15:36:23.720
> 
> 标签：ios, unit-testing

有谁知道如何为`NSLog`功能编写单元测试？
我正在为我的所有框架组件编写单元测试，测试日志记录是否在各种场景中发生对我来说非常重要。

例如：允许框架用户启用或禁用日志记录的配置。如果他们启用了日志记录，则很重要，但这很难在单元测试中验证。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:30:20.757

简单的测试方法是，执行 NSLog，然后检查控制台日志。和代码来检查

```
 NSMutableArray *consoleLog = [NSMutableArray array];

aslclient client = asl_open(NULL, NULL, ASL_OPT_STDERR);

aslmsg query = asl_new(ASL_TYPE_QUERY);
asl_set_query(query, ASL_KEY_MSG, NULL, ASL_QUERY_OP_NOT_EQUAL);
aslresponse response = asl_search(client, query);

asl_free(query);

aslmsg message;
while((message = aslresponse_next(response)))
{
    const char *msg = asl_get(message, ASL_KEY_MSG);
    [consoleLog addObject:[NSString stringWithFormat:@"%s" , msg]];
}

NSLog(@"Console: %@", consoleLog); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-25T01:34:54.933

我建议为 NSLog 编写一个包装器并彻底测试该包装器。示例：您有一个`URLStringValidator`用于验证 url 字符串的类。

如果传入一个空，您想记录一条消息`String`。您将制定一个协议来代表您的记录器。

```
protocol Logging {
    func log(_ message: String, args: CVarArg...)
}

struct Logger: Logging {
    func log(_ message: String, args: CVarArg...) {
        NSLog(message, args)
    }
}

class URLValidator {
    let logger: Logging

    init(logger: Logging = Logger()) {
        self.logger = logger
    }

    func isEmpty(urlString: String) -> Bool {
        guard !urlString.isEmpty else {
            logger.log("Don't pass an empty string")
            return false
        }
        return true
    }
} 
```

现在您可以使用 fake 而不是`Logger`. 我还认为您需要一个额外的测试来断言 logger 具有正确类型的具体实现。前任：

```
class FakeLogger: Logging {
    var capturedMessage: String?

    func log(_ message: String, args: CVarArg...) {
        capturedMessage = message
    }
}

class URLValidatorTests {
    func testLoggerDefaults() {
        XCTAssertTrue(URLValidator().logger is Logger,
                      "A url validator should use the correct concrete class for its logger")
    }

    func testValidatingEmptyString() {
        let fakeLogger = FakeLogger()
        let validator = URLValidator(logger: fakeLogger)

        validator.isEmpty(urlString: "")
        XCTAssertNil(fakeLogger.capturedMessage)

        validator.isEmpty(urlString: "Not Empty")
        XCTAssertEqual(fakeLogger.capturedMessage, "Don't pass an empty string")
    }
} 
```

现在您可以测试您的逻辑（您关心并应该测试的部分）并`NSLog`作为配置细节保留。您可以轻松使用`os_log`或写入自定义文件。

# android - 如何将多个适配器添加到单个 listview android？

> ID：13568076
> 
> 赞同：1
> 
> 时间：2012-11-26T15:36:25.067
> 
> 标签：android, listview, adapter

我已将 2 个适配器添加到单个视图以显示单个建议列表，并在获得具有不同列表的结果后。我不感兴趣在单个活动中创建 2 个列表视图。只需要修改适配器。

例子 ：

```
wordsList.setAdapter(new ArrayAdapter<String>(this,R.layout.list_item, R.id.listItem, matchedWordsList)); 
```

在做某事后需要使用另一个适配器来更改相同的列表视图

```
wordsList.setAdapter(new CustomAdapter(this, mList)); 
```

我已经在处理程序中编写了这一步，给了我以下错误

> 只有创建视图层次结构的原始线程才能接触其视图。

我知道这个错误。但我的问题是 --- 可以将多个适配器添加到单个列表视图吗？如果有的话，请给我代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:39:38.760

尝试在您的处理程序中使用以下代码

```
runOnUiThread(new Runnable() {
     public void run() {

      wordsList.setAdapter(new CustomAdapter(this, mList));

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:39:54.053

是的，您可以这样做，第一个适配器的内容将被第二个适配器的内容替换。您的错误与您设置多个适配器的事实无关

# functional-programming - 参考透明度/功能纯度是最佳实践还是取决于偏好？

> ID：13568077
> 
> 赞同：0
> 
> 时间：2012-11-26T15:36:35.297
> 
> 标签：functional-programming, referential-transparency

我想知道对于功能纯度是否被认为是最佳实践或者它是否取决于偏好或编程风格是否存在共识。换句话说，这是有争议的，还是有效地确定了？我能找到的所有信息都表明这是一种没有缺点的美德。这是真的？

我想为我们当地的实践社区编制一份最佳实践列表，并且我想知道应该在多大程度上包含这些实践。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:09:26.363

最好避免突变和其他副作用，就像最好避免 goto 一样。也就是说，在某些情况下它是有用的，但更多时候不是它可以被消除并被更结构化的解决方案所取代，而不会有太大的困难。

当然，这在很大程度上取决于您使用的语言和库。无副作用编程在不是为它设计的语言（即几乎所有主流语言）中*非常不方便。*

独立于特定的语言约束，也可能存在在不改变 big-O 复杂性类的情况下难以用函数式替代的可变数据结构或命令式算法的情况。在大多数相关案例中，现在都知道好的解决方案，但有时它们很棘手，在某些情况下，需要积极研究。

话虽如此，你可以在不失去纯度的情况下产生副作用。参见例如 Haskell 对 monad 的使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T21:21:57.510

作为一般规则，您应该减少代码中的无意复杂性。这是无可争议的。

降低复杂性的最佳方法之一是限制代码中的信息通道——信息可以从一个组件“泄漏”到另一个组件的方式。这使您的代码更简单、更模块化、更易于测试、更易于使用和更易于维护。

根据定义，可变变量和其他副作用是信息通道，与通常的函数参数和结果通道相比，这些通道相对“隐藏”。带有它们的代码就像一个筛子，信息通过可变变量以瞬态的、时间相关的方式泄漏进出代码。

全局可见的可变变量是最糟糕的，因为它们（可能）在整个代码库中泄漏信息，从而增加了许多需要管理的复杂信息通道。局部范围的可变变量最多只泄漏几行的时间信息。你应该避免前者，小心后者。

因此，在最小化复杂性和增加模块化的目标中，您应该避免泄漏的副作用，因为它们会以不必要的复杂性污染您的代码。避免可变变量和其他副作用是一个很好的经验法则。

# qt - Gtk(mm) 网格布局控制

> ID：13568089
> 
> 赞同：0
> 
> 时间：2012-11-26T15:37:23.313
> 
> 标签：qt, grid, gtk, gtkmm

Gtk(mm) 是否包含类似于 WPF 的 XAML Grid 的任何内容？原因是我想制作一个能够在 Linux、Windows 等平台上运行的应用程序。唯一可行的解​​决方案是 Gtk 或 Qt，但它们没有 WPF 对 XAML 的布局文档。

因为我从不在 WPF 中使用设计器，所以我只编写 XAML 代码，我可以应付。

所以我的问题是：是否有用于 Gtk 或 Qt（最好是 Gtk）的布局设计器，或者是否有用于 Gtk 或 Qt（最好是 Gtk）的类似网格的布局控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:09:18.837

是的，GTK 有 Glade 用户界面设计器（[主页](http://glade.gnome.org/)），它可以生成 XML 布局文档。

GTK 还有一个 Grid 控件（[C API 文档](http://developer.gnome.org/gtk3/stable/GtkGrid.html)，[C++ API 文档](http://developer.gnome.org/gtkmm/unstable/classGtk_1_1Grid.html)）。

# php - 匹配模式，但不返回所有模式

> ID：13568091
> 
> 赞同：3
> 
> 时间：2012-11-26T15:37:32.817
> 
> 标签：php, regex

我对正则表达式很陌生。假设我有一个这样的字符串：

```
UPDATE table_name SET column = :column WHERE column IN(:column_32, :column_34, :column_347) 
```

然后假设我有一个数组：

```
$arr = array(
    'column' => 'Test',
    'column_32' => 'Tester',
    'column_34' => 'Faux data',
    'column_347' => 'Column data'
); 
```

我想要做的是用数组中的相应值替换占位符（：column，：column_32 等）。问题是，str_replace 不会削减它，因为将 :column 替换为 'Test' 将导致 :column_32 变为 :Test_32 等。

所以，我开始写一些自定义的正则表达式。这是我一直在运行的测试脚本：

```
foreach($arr as $k => $v){
    var_dump(preg_match_all('(:'.$v.'[^_])', $str, $matches));
} 
```

它匹配正确的字符串。问题是，它还返回 "," 和 ")" 作为匹配的一部分。我在这里忽略了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:49:35.233

这可能有点小技巧，但是您如何按从最长到最短的键长度对数组进行排序。然后，任何可以是另一个键的子字符串的键都将在其包含的字符串之后进行检查。所以你像这样重新排列你的数组：

```
$arr = array(
    'column_347' => 'Column data'
    'column_32' => 'Tester',
    'column_34' => 'Faux data',
    'column' => 'Test',
); 
```

当然，您也可以自动执行此操作。从 PHP 5.3.0 开始，如下所示：

```
uksort($arr, function($a, $b) {
    if(strlen($a) > strlen($b))
        return -1;
    else
        return 0;
}); 
```

在 5.3.0 以下，您可以使用它（从 PHP 4.0.1 开始）：

```
uksort($arr, create_function('$a, $b', '
    if(strlen($a) > strlen($b))
        return -1;
    else
        return 0;
')); 
```

或者（如果您不能使用漂亮的匿名函数语法，或者如果您在 4.0.1 之前使用 PHP，这可能更可取）：

```
function compare($a, $b) {
    if(strlen($a) > strlen($b))
        return -1;
    else
        return 0;
}

uksort($arr, "compare"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:51:46.577

基本上，您要避免`_`关键字后面的所有非字符。`[^_]`在你的变量意味着“找到一个不是下划线的单个字符”之后，因此你的正则表达式正确地抓住了逗号和右括号。

为什么不尝试查找标识符？例如搜索`:column_347`就可以了。您可能希望在占位符之后搜索单词边界，以告诉您的正则表达式“如果此（例如列）不是一个完整的单词，请不要停止。

这是通过替换`[^_]`单词`\b`边界来获得的。[此链接](http://rubular.com/r/s3pOMn3E9r)显示了它是如何工作的，请注意正则表达式仅匹配第一个“列”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T16:00:43.700

这不能回答您的正则表达式问题，但我还是想提供`PDO`实现：

```
<?php

    $sql = 'UPDATE table_name SET column = :column WHERE column IN(:column_32, :column_34, :column_347)'

    $arr = array(
        'column' => 'Test',
        'column_32' => 'Tester',
        'column_34' => 'Faux data',
        'column_347' => 'Column data'
    );

    $sth = $dbh->prepare($sql);

    foreach ($arr as $k => $v) {
        $sth->bindParam(':' . $k, $v);
    }

    $sth->execute();

?> 
```

如果您正在使用其他人的代码并且不知道`PDO`，那么这可能是正确的方法，原因有很多（包括防止注入攻击）。但是，如果您知道`PDO`并希望有一个替代的、基于正则表达式的实现，那么@m.buettner 和@Gabber 都会提供合理的建议。

# c# - 使用 C# 添加行的 Gridview

> ID：13568093
> 
> 赞同：1
> 
> 时间：2012-11-26T15:37:36.700
> 
> 标签：c#, asp.net

我想在我的网格视图中添加一行。我成功添加了文本框，但我无法提取值它一直告诉我对象引用未设置为对象的实例。在这一行它停止

```
string acc = Convert.ToString(((TextBox)GridView1.FooterRow.FindControl("accountID")).Text); 
```

请问我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:49:17.057

1.  您不需要将字符串转换为字符串（[`TextBox.Text`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.text%28v=vs.110%29.aspx)返回已经是字符串）。

您是如何以及在何处添加`TextBox`到页脚行的？

> 我将 TextBox 添加到页脚行`GridView1_RowDataBound`

`RowDataBound`不是动态控件的正确方法，因为它仅在数据绑定时调用，而不是在每次回发时调用。但是需要在每次回发时重新创建动态控制。

因此，请改用[`RowCreated`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcreated.aspx)动态创建控件并用于`RowDataBound`数据绑定它们。

```
protected void GridView1_RowCreated(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Footer)
    {
        TextBox tb = new TextBox();
        tb.ID = "accountID";
        e.Row.Cells[indexOfColumn].Controls.Add(tb);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:56:15.063

好的，首先检查它是否是页脚行，然后在其中找到文本框

```
protected void grdAccounts_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.Footer)
  {
   //get text box value here
  }
} 
```

**在按钮点击**

尝试这个

```
GridViewRow row = GridView1.FooterRow; 
firstName = ((TextBox)row.FindControl("TextBox1")).Text; 
```

# jquery - 如何让jQuery datetimepicker的“现在”按钮关闭小部件，就像“完成”按钮一样

> ID：13568094
> 
> 赞同：2
> 
> 时间：2012-11-26T15:37:39.390
> 
> 标签：jquery, events, datepicker, datetimepicker

我希望 datetimepicker 上的“现在”按钮在单击时关闭小部件。就目前而言，用户必须单击“现在”和“完成”。

我的应用程序有很多时间戳，所以这最终很乏味。谢谢。

有谁知道这是可配置的，还是我需要破解 jQuery 插件代码（请说前者）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:39:29.673

只需使用[`onSelect`](http://api.jqueryui.com/datepicker/#option-onSelect)事件触发完成按钮（或关闭对话框）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T11:49:27.507

我完成了在 Trent （版本 1.6.1）中添加`closeOnNowClick`设置和更改：`_gotoToday``jquery-ui-timepicker-addon.js`

```
$.datepicker._gotoToday = function (id) {
    var inst = this._getInst($(id)[0]);

    // ***: added to hide dialog on Now click
    var closeOnNowClick = this._get(inst, 'closeOnNowClick');
    if (typeof(closeOnNowClick) == 'boolean' && closeOnNowClick === true) {
        this._hideDatepicker(); 
    }

    this._base_gotoToday(id);
    var tp_inst = this._get(inst, 'timepicker');
    var tzoffset = parseInt($.timepicker.timezoneOffsetNumber(tp_inst.timezone)); // ***: added parseInt here
    var now = new Date();
    now.setMinutes(now.getMinutes() + now.getTimezoneOffset() + tzoffset);
    this._setTime(inst, now);
    this._setDate(inst, now);
    tp_inst._onSelectHandler();
}; 
```

示例用法：

```
$('#somedate')
    .datetimepicker({'dateFormat':'yy-mm-dd',
    'timeFormat':'HH:mm',
    'timeInput': true,
    'closeOnNowClick': true
}); 
```

I also noticed that sometimes `tzoffset` is returned as string, and `now.getMinutes() + now.getTimezoneOffset() + tzoffset` results in absolutely weird values. So I have added the `parseInt` call to convert `tzoffset` to int.

# c# - 如何解决 XAML 解析错误？

> ID：13568100
> 
> 赞同：7
> 
> 时间：2012-11-26T15:37:58.383
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有一个具有 XAML UserControl 的 XAML (Windows 8 WinRT XAML) + C# 应用程序。在设计器中，我没有看到任何问题（没有红色下划线或类似内容）。该项目也编译没有任何错误。当我运行应用程序时，应用程序`InitializeComponent()`以“XAML 解析错误”中断。我不知道如何调试此类问题。识别问题的步骤是什么？是的，XAML 用户控件或资源字典有问题，但是如何以结构化的方式处理这种错误？

**[编辑]**

好的，看来跟踪错误似乎是 WinRT 的正确方法。

顺便提一句。我发现了**“我的”**代码的问题。

我的项目名为“Pegasus.Core”，在`CalenderControl.g.i.cs`Visual Studio 生成的文件中，路径是这样的：`"ms-appx:///Pegasus_Core/View/CalendarControl.xaml"`-> 替换为“。” 和 ”_”

[修复网址](http://support.microsoft.com/kb/2739194)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:21:59.793

有时，如果您观察异常对象，异常会很好地提示您在哪一行失败。除此之外 - 删除和重新添加 XAML 片段是我在这种情况下经常做的事情。这只是平台中错误报告的一个限制，如果改进它会很好，但我们必须应对版本 1，直到下一个版本希望能改进一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:02:31.850

好的，我明白了。当您的 XAML 标记采用下一行时，会出现此异常。要更具体地查看您的 XAML 并检查是否有任何 UI 控件定义进入第二行？示例 这不应该是这样。将所有内容移到一行中

# php - 链接不触发到 IE 中的 PHP

> ID：13568101
> 
> 赞同：0
> 
> 时间：2012-11-26T15:38:01.180
> 
> 标签：php, html, header

我有一个链接到 php 页面的 href 标记，我可以从用户单击的内容动态下载文件。

下载适用于 Chrome 和 Firefox，但不适用于 Internet Explorer。

这是我的标签。

```
<p class='order-item-list'><a href='singleDownload.php?download=".$x['id']."&type=".$x['fileType']."' target='_blank'><input id='downloadSingle' type='image' src='images/download-single.png' alt='Submit' value='download' /></a></p> 
```

我将它包含在 p 标签中以用于样式设置。

我尝试使用输入的 GET 参数直接访问文件，它适用于 IE。只是链接由于某种原因没有触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:39:38.993

使用[验证器](http://validator.w3.org/)，您的 HTML 中有错误。

如果您想要包含图像的链接，请使用`<a>`包含`<img>`.

如果您想要服务器端图像映射，请使用 a`<input type="image">`而不要使用`<a>`.

# sql - 用最小日期更新临时表

> ID：13568103
> 
> 赞同：2
> 
> 时间：2012-11-26T15:38:07.713
> 
> 标签：sql, sql-server-2008, tsql

仅当存在较早的插入日期时，我才尝试更新表`InsertDate`中所有不同的`AccId`和`AccNameHolder`组合的。`#tmpResults`

表模式是这样的：

**#tmpResults**

```
Trans | AccId | AccountNameHolder | EarlyDate | CardType 
```

**位置集合**

```
Id | AccId | InsertDate | BtchId 
```

**卡错误**

```
AccId | AccNameHolder | BtchId | TransId 
```

这是我到目前为止所尝试的：

```
UPDATE  RES  
SET     EarlyDate = pc.InsertDate   
FROM  ( dbo.PositionCollection pc    
        LEFT JOIN dbo.CardErrors ce ON ce.BtchId = pc.BtchId AND pc.id =     ce.Transid  )    
    INNER JOIN #tmpResults RES   
ON      RES.AccId = pc.AccId    
AND     RES.AccNameHolder = ce.AccNameHolder    
WHERE   RES.EarlyDate = (SELECT MIN(InsertDate) FROM PostionCollection)    
AND     RES.AccId = pc.AccId    
AND     RES.AccNameHolder = ce.AccNameHolder 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:38:23.763

在 UPDATE 语句中使用派生表

```
UPDATE x
SET x.EarlyDate = x.InsertDate  
FROM  ( 
       SELECT RES.EarlyDate, pc.InsertDate
       FROM dbo.PositionCollection pc
         LEFT JOIN dbo.CardErrors ce ON ce.BtchId = pc.BtchId AND pc.id = ce.Transid
         INNER JOIN #tmpResults RES ON RES.AccId = pc.AccId
           AND RES.AccNameHolder = ce.AccNameHolder
       WHERE RES.EarlyDate = (SELECT MIN(InsertDate) FROM PostionCollection) AND RES.AccId = pc.AccId
         AND RES.AccNameHolder = ce.AccNameHolder
       ) x 
```

更新 27.11.2012

```
UPDATE x
SET x.EarlyDate = x.InsertDate
FROM  (
       SELECT RES.EarlyDate, m.InsertDate
       FROM dbo.PositionCollection pc
         LEFT JOIN dbo.CardErrors ce ON ce.BtchId = pc.BtchId AND pc.id = ce.Transid
         INNER JOIN #tmpResults RES ON RES.AccId = pc.AccId AND RES.AccNameHolder = ce.AccNameHolder
         INNER JOIN (SELECT MIN(InsertDate) AS InsertDate FROM PostionCollection) m
           ON RES.EarlyDate = m.InsertDate 
       ) x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:24:54.080

这是一些更通用的解决方案，对于 InsertDate 为空的情况，您可以将它们与 DateDiff 一起使用，以将条件更改为较早、较晚或其他或类似的

```
OldInstDate <= COALESCE(NewInstDate, OldInstDate) 
```

条件更新可以在 select 语句中实现，所以......

```
SET InsertDate = COALESCE(InsertDate, NewInsertDate) WHERE... 
```

或者

```
SET InsertDate = CASE WHEN InsertDate IS NULL THEN NewInsertDate 
                      ELSE InsertDate END 
```

或者

```
WHERE ...
AND InsertDate IS NULL 
```

有关子查询的真正明确帮助 [http://allenbrowne.com/subquery-01.html](http://allenbrowne.com/subquery-01.html) 我认为这可能是我见过的最好的，[http://allenbrowne.com/subquery-02.html](http://allenbrowne.com/subquery-02.html)用于故障排除

# jquery - 使用另一个元素的 className 按 ID 查找元素

> ID：13568106
> 
> 赞同：2
> 
> 时间：2012-11-26T15:38:18.840
> 
> 标签：jquery

我有一个菜单 - 每个菜单项都有一个类名。当我单击菜单项时，我正在使用 JQuery 查找具有匹配 ID 名称的 div。问题是搜索并不严格。如果某些东西有一个像 elo-1 这样的类名，并且我有 div ID 名称 elo-1 和 elo-11，那么就没有办法（我这样做的方式）只得到 elo-1。

我想得到一个完全匹配的。我想点击elo-1，只得到elo-1，而不是elo-1、elo-11、elo-12等。有人有什么想法吗？

这是我正在使用的代码：

```
 $(document).ready(function() {

    var myLayoutId = $(this).attr("layoutId");

    $("#start_page").show().siblings().hide();
    $("#navBar").hide();
    $("#refs").hide();

    $("li").click(function() {
        var thisID = $(this).attr("class");
        $("#mainBdy div:#"+thisID).show().siblings().hide();
        $('#mainBdy div[id^="'+thisID+'"]').show();

        $("#mainBdy div:#"+thisID).css("width","30%");
        $("#mainBdy div:#"+thisID).css("margin-left","-80px");
        $("#mainBdy div:#"+thisID).css("margin-top","-50px");
        $("#mainBdy div:#"+thisID).css("float","left");

    });

    $("#start_page_accept").click(function() {
        $("#navBar").show();
        $("#refs").show();
        $("#start_page").hide().next().show();
    });

    $("#menu").collapsible({
        effect: "slide",             // The effect to use when expanding and collapsing the menu. 
        initialCollapse: true       // When true, collapses the menu when the page loads.
    });

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T15:42:26.573

替换这个：

```
 $("#mainBdy div:#"+thisID).show().siblings().hide();
    $('#mainBdy div[id^="'+thisID+'"]').show();

    $("#mainBdy div:#"+thisID).css("width","30%");
    $("#mainBdy div:#"+thisID).css("margin-left","-80px");
    $("#mainBdy div:#"+thisID).css("margin-top","-50px");
    $("#mainBdy div:#"+thisID).css("float","left"); 
```

有了这个：

```
$('#' + thisID).show().css({
    'width': '30%',
    'margin-left': '-80px',
    'margin-top': '-50px',
    'float': 'left'
}).siblings().hide(); 
```

几点注意事项：

*   jQuery 中的链接非常强大，如果您要对同一个元素执行多项操作，可以避免重新查询 DOM。您同样可以存储 jQuery 搜索的结果，执行类似的`var $div = $('#' + thisID);`操作 - 在任何一种情况下，您都不想一遍又一遍地执行相同的选择器。
*   ID 在文档中应该是唯一的，所以我假设文档中只有一个 ID 为“elo-1”的元素。如果这是真的，它应该是这样的，做一个复杂的选择器`'#mainBdy div[id^="'+thisID+'"]'`只是阻止 jQuery 能够使用原生的`getElementById`，这是一个更有效的倍数（更不用说更清洁了）。
*   如您所见，`css`接受一个对象，因此您不必多次调用它。我个人会简单地向菜单项添加一个类并在我的样式表中处理样式。从可维护性的角度来看，这要容易得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T15:42:20.917

修改您的选择器以避免开始匹配：

```
$('#mainBdy div[id^="'+thisID+'"]').show(); 
```

*这匹配以您的值开头的*任何内容，这不是您想要的：

```
$('#mainBdy div[id="'+thisID+'"]').show(); 
```

*这仅匹配 id 属性等于*您的值的那些项目。

### 附加建议

另请注意，您正在绑定到单个列表项：

```
$("li").click(); 
```

这可能会成为您的应用程序的任务，因为您正在为页面上的每个新列表项添加事件处理程序。*事件委托*是一种更好的方法，它包括向祖先元素添加一个事件处理程序，使用事件冒泡来响应嵌套项上的事件。

```
<ul id="list">
    <li class="edo-1">Edoine Mashlup</li>
</ul> 
```

假设这是我们的标记（另外 100 个列表项作为衡量标准），以下将是我们的事件委托指令：

```
$("#list").on("click", "li", function () {
    $("#" + this.className).show().css({
        width:      '30%',
        marginLeft: '-80px',
        marginTop:  '-50px',
        float:      'left'
    })
    .siblings().hide();
}); 
```

*每当在我们的元素上*或*在*我们的元素内发生点击事件时`#list`，我们将评估目标（接收点击的元素）是否与我们的选择器匹配`li`。如果是，我们触发我们的函数 - 否则，我们忽略它并让它在 DOM 中冒泡。

# php - 从 php echo 开始时缩进语法荧光笔

> ID：13568107
> 
> 赞同：0
> 
> 时间：2012-11-26T15:38:22.207
> 
> 标签：php, javascript, formatting, syntax-highlighting, syntaxhighlighter

我正在使用 Alex Gorbatchev 的[Syntax Highlighter](http://alexgorbatchev.com/SyntaxHighlighter/)输出一些代码，但我遇到了一个问题，如果我以 php echo 开始该行，它不会保留初始缩进。例如，我期望以下内容：

```
<pre class="brush: php;">
    <?php
        echo $variable->getScope() . " ";
        echo $variable->getName();
    ?>;
</pre> 
```

输出以下内容：

```
 protected $variable; 
```

它改为输出以下内容：

```
protected $variable; 
```

失去缩进的四个空格。如果我在上面的行上添加一段静态文本，它会按预期保留空格。

我还尝试将第三行更改为以下内容：

```
echo "    ".$variable->getScope() . " "; 
```

这也没有效果。这是我正在初始化语法荧光笔的 javascript：

```
SyntaxHighlighter.defaults['gutter'] = false;
SyntaxHighlighter.defaults['toolbar'] = false;
SyntaxHighlighter.all() 
```

澄清一下，荧光笔在其他所有方面都按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:42:53.367

语法高亮器将缩进代码，它会看到你的代码没有括号，所以它不会缩进。例如，函数中的代码会缩进。

# android - 从其他应用程序接收内容

> ID：13568108
> 
> 赞同：3
> 
> 时间：2012-11-26T15:38:30.727
> 
> 标签：android, android-intent

我想注册我的应用程序以接收来自其他应用程序的文件（任何类型，而不仅仅是图像）。我正在关注[从其他应用程序接收内容](http://developer.android.com/training/sharing/receive.html)教程。

我有：

1.  更新了应用的清单：

    ```
     <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter> 
    ```

2.  实现了`onCreate()`活动的方法：

    ```
    Intent intent = getIntent();
    String action = intent.getAction();
    String type = intent.getType();

    if (Intent.ACTION_SEND.equals(action) && type != null) {            
        this.handleSend(intent);
    } 
    ```

3.  实现了我的私有`handleSend()`方法：

    ```
    void handleSend(Intent intent) {
        Uri fileUri = (Uri)intent.getParcelableExtra(Intent.EXTRA_STREAM);

        if (fileUri != null) {
             // OK, now?
        }
    } 
    ```

如果我打印`fileUri`，它就像`content://downloads/all_downloads/5`. 但是我怎样才能访问它的内容呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:53:35.537

正如@Selvin 所指出的，使用它`getContentResolver().openInputStream(fileUri);`来获取`InputStream`that 的内容`ContentProvider` `Uri`。MIME 类型应该在`Intent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T05:57:32.893

改变方法如下

```
void handleSend(Intent intent) {
        try {
            Uri imageUri = (Uri) intent.getParcelableExtra(Intent.EXTRA_STREAM);
            imageShare.setImageURI(imageUri);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

# windows - 程序执行要求

> ID：13568109
> 
> 赞同：0
> 
> 时间：2012-11-26T15:38:37.583
> 
> 标签：windows, winapi, architecture

我使用 Microsoft Windows SDK for windows7 (7.1.7600.0.30514) (*86) 在 OS 64b (windows 7) 下编译的 Qt(Qt SDK 版本 4.8.1) 实现了一个应用程序。我的问题是客户端机器支持我的程序的最低要求是什么（因此它可以成功执行）

PS：我使用了 winapi(windows.h,process.h,Shlwapi.h...) 中的一些函数，对于 Qt 库，我静态运行我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:50:09.813

找出答案的最可靠方法是测试它。首先，对您的应用进行发布构建。然后进行 Windows 的全新安装（如果可以，在 VM 上）。在不向该机器添加任何其他内容的情况下，安装您的应用程序。它运行吗？如果没有，找出缺少的内容并添加。应用运行后，对您打算支持的每个 Windows 版本重复该过程。完成后，您应该列出所需的一切。

更快的方法是使用[Dependency Walker](http://www.dependencywalker.com/)；但是，它只会显示相关的 DLL。它不会捕获您的应用程序依赖的其他资源（文件、目录、注册表项等），也不会捕获您动态加载的 DLL。如果您正在构建应用程序的 32 位和 64 位版本，请确保下载这两个版本的 Depends。

编辑：dependencywalker.com 的服务器似乎已关闭。 [这](http://support.microsoft.com/kb/256872)是它的另一个来源。

# c# - MonoDevelop 调试器崩溃，没有错误消息，使用 Dijkstra 的算法和 2D 数组

> ID：13568114
> 
> 赞同：1
> 
> 时间：2012-11-26T15:38:53.173
> 
> 标签：c#, ios, xamarin.ios, monodevelop, xcode-instruments

我正在使用 C# 和 MonoDevelop 在 Monotouch 中制作 iOS 游戏。我有一个非常奇怪的崩溃。

**背景信息**：制作 2D 战争游戏。我已经实现了**Dijkstra 的算法**来计算从源到目的地的最短路径，中间有对象（例如：从这里到那里，但自动绕过汽车/树木/建筑物/或任何挡路的东西）。我的崩溃似乎与我为这个 Dijkstra 算法的实现创建的二维字节数组有关。如果您从未听说过 Dijkstra 的算法，请查看此图片[http://en.wikipedia.org/wiki/File:Dijkstras_progress_animation.gif](http://en.wikipedia.org/wiki/File:Dijkstras_progress_animation.gif)

基本上，我的**2D 数组**中的节点越多，士兵在战场上的动作就越详细。如果我在二维数组中使用 2,400 个节点，则一切正常/加载正常。但是，如果我将节点数增加到 4,266 以获得更详细的坐标，则程序在计算节点距离时会崩溃。它在崩溃之前完成了大约 30%。

**有关崩溃的更多详细信息：** **它仅在**我使用 Debug/iPhone 模式或 Release/iPhone 模式时才会崩溃。当我使用调试/iPhone 模拟器时，它工作正常。还有一点需要注意的是，当我构建应用程序并使用 Debug/iPhone 模式将其传输到我的手机时，然后停止调试器，打开 XCode Instruments，它工作正常！我不知道为什么它可以在模拟器和 XCode Instruments 中工作，但不能在 Monodevelop Debug/iPhone 模式下工作。XCode Instruments 是否正在做一些“修补”问题的事情？还是 MonoDevelop 的调试器正在做一些事情来“破坏”程序？

![这是在 XCode Instruments 中运行的程序的屏幕截图：](../Images/c185588fe4c4f9ed1c022462435f767c.png)

让我解释一下您在屏幕截图中看到的内容。我的应用程序被称为“战争游戏”。查看时间线，CPU 使用率约为 100%，从大约 2 秒到大约 35 秒。当 CPU 使用率下降到零时，它就完成了加载。因此，加载 2D 节点数组并用距离填充它们实际上花了大约 33 秒。

请记住，在这种情况下，崩溃有 4,266 个节点，这意味着 2D 数组是一个字节 [4266, 4266] 数组。所以这是二维数组中的 18,198,756 个字节。并且在 XCode Instruments 运行时加载成功，在 MonoDevelop 的 Debug/iPhone Simulator 中运行时加载成功。但在我的 iPhone 4s 上以 Debug/iPhone 模式运行时，它会崩溃且没有错误消息。从屏幕截图中可以看出，此应用程序的内存使用量约为 60.73MB。

在没有崩溃的实例中，有 2,400 个节点，这意味着 2D 数组是一个字节 [2400, 2400] 数组。所以这是 2D 数组中的 5,760,000 字节。那个在任何地方都工作得很好。

问题显然是，当我将节点数增加到大约 4,266 或更多时，程序崩溃了。但我没有收到错误消息，它只是在加载时突然停止...... **这可能是垃圾收集问题吗？** 你会认为我会收到一条错误消息吗？ **这可能是“内存不足”问题吗？** 但是当它使用 XCode 的 Instruments 加载时，它说我只使用了 60MB，而且我之前在这个应用程序中使用了多达 150MB 作为测试，所以我知道在它崩溃之前我至少可以达到 150MB 的内存使用量“内存不足错误”。

![这是 XCode Instruments 的内存分配截图](../Images/100f7df5b8be1798498ddb2e72f7016d.png) 这是 XCode Instruments 的内存分配截图

![这是 XCode Instruments 的内存泄漏页面截图](../Images/d44235e447542031c0643f045bdb969b.png) 这是 XCode Instruments 的内存泄漏页面截图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:04:27.083

这很奇怪。它看起来像一个调试器错误，可能是使用调试器时内存不足的情况（因为这将需要比*正常*构建更多的内存）。

但是，您应该能够手动启动**发布**构建而不会出现问题......就像使用 Xcode 的 Instruments 一样。

我怀疑有不止一个问题在起作用。例如，启动您的应用程序需要很长时间，并且看门狗会杀死它（用于发布构建）。从 Xcode 的 Instrument 开始时这仍然有效，因为它会使看门狗*静音。*

如果没有更多信息（不适合stackoverflow），我无法更精确。我建议您打开一个[错误报告](http://bugzilla.xamarin.com)并附上调试版本（由 MonoDevelop 启动）和发布版本（手动启动）的崩溃日志。

# android - android广告全屏弹出布局

> ID：13568115
> 
> 赞同：0
> 
> 时间：2012-11-26T15:38:58.550
> 
> 标签：android, layout, admob

抱歉，我只知道广告横幅。

我见过一些其他的应用程序，一旦应用程序启动，它会显示一个全屏广告弹出窗口（就像一个对话框，右上角有一个 X）。

怎么可能做到这一点？会有例子吗？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:32:29.750

Ad mob 在插页式广告之后调用您所在的广告类型。他们有一个完全内置的广告，`x`顶角有一个，因此用户可以关闭它。这里有一个教程（您必须选择 android 选项卡）-

*   [https://developers.google.com/mobile-ads-sdk/docs/admob/advanced#android](https://developers.google.com/mobile-ads-sdk/docs/admob/advanced#android)

# sql - SQL 使用列值作为 IF 条件

> ID：13568118
> 
> 赞同：2
> 
> 时间：2012-11-26T15:39:09.100
> 
> 标签：sql, sql-server, tsql, if-statement

我有一个看起来像这样的条件表：

`Conditions`

*   条件ID
*   映射ID
*   变量ID
*   比较变量 ID
*   条件运算符（可以是 == 或 <> ）
*   连接运算符（可以是 && 或 || ）
*   连词令

现在我有一个 SP，我想根据 MappingID 实现这些条件。

如果选择了 MappingID，则应在我的 SP 发生任何事情之前检查所有映射条件。

```
SELECT * 
FROM Conditions
WHERE MappingID = @MappingID
ORDER BY ConjunctionOrder 
```

例如，如果某`MappingID`个人在表中有三行，`Conditions`那么：

```
IF VARIABLEID CONDITIONOPERATOR COMPARETOVARIABLEID CONJUNCTIONOPERATOR --row1
VARIABLEID CONDITIONOPERATOR COMPARETOVARIABLEID CONJUNCTIONOPERATOR  --row2
VARIABLEID CONDITIONOPERATOR COMPARETOVARIABLEID --row3 (ignore ConjunctionOperator for last row)
BEGIN
   --my code goes here
END
ELSE
BEGIN
   --my code here
END 
```

我想知道如何实现 IF 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:43:58.817

一种方法是这样的（这些是存储过程中的步骤）

1.  将您的条件从`Conditons`表格中删除，并从中生成一个特殊的布尔表达式。您可以通过在帖子中的查询上使用[光标](http://msdn.microsoft.com/en-us/library/ms180169.aspx)来完成此操作。`SELECT`您应该转换您的变量 ID，以便它们不会与变量值混合（稍后您会看到我的意思）。假设您的查询返回：

```
|------------------------------------------------- ------------------------------------------|
|VariableID |COMpareToVariableID |ConditionOperator |ConjunctionOperator |ConjunctionOrder|
|-----------|--------------------|---- --|--------------------|----------------|
|A |B |== |&& |1 |
|C |D |>> (东北) | |2 |
|-----------|--------------------|---- --|--------------------|----------------|

```

您的表达式（保存在本地 SP 变量中）应该是：

```
选择 1 其中 #A# = #B# 和 #C# >> #D#

```

换句话说，您`SELECT 1 WHERE`在开头添加和 relpace 条件运算符`==`与'AND'`=`和连词运算符，并与 'OR'`&&``||`

1.  现在您对`Variables`表进行游标查询。在每个循环中，您将变量的名称[替换](http://msdn.microsoft.com/en-us/library/ms186862.aspx)为其值（即#A# 替换为A 值）。最后，您的表达式应类似于“SELECT 1 WHERE 1=2 AND 3<>3”。

2.  您使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)执行动态创建的查询。您可以将输出放在 OUTPUT 参数中，并`IF`在您的 SP 中的语句中检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:51:43.890

这是您想要的基本示例：

```
IF EXISTS (SELECT * FROM sys.tables WHERE name = '{0}') Select 1 ELSE SELECT 0 
```

你也可以试试：

```
IF (SELECT ConditionID FROM Conditions)=COMPARETOVARIABLEID 
BEGIN
---Do your thing
END
GO 
```

# c# - MVC 路由摆脱 URL 中的 /Index

> ID：13568119
> 
> 赞同：5
> 
> 时间：2012-11-26T15:39:09.850
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, optional-parameters

我有一个在运行时生成的动态链接列表，如下所示：

```
@Html.ActionLink(x.Name, "Index", "User", new { x.ID }, null) 
```

所以我在用户控制器上点击 Index 方法。

我的 RouteConfig.cs（它是一个 MVC4 应用程序）也设置如下：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "User", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

这给了我链接`server/application/User/Index/1`列表中的链接。

我需要在列表生成和/或路由文件中做什么才能将其更改为`server/application/User/1`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T16:12:38.333

添加不需要操作但不会与其他路由冲突的路由

```
routes.MapRoute("User", "User/{id}", 
                         new { controller = "User", action = "Index" }); 
```

# c# - WPF GarbageCollection 中的高级调试建议

> ID：13568120
> 
> 赞同：13
> 
> 时间：2012-11-26T15:39:11.493
> 
> 标签：c#, wpf, garbage-collection, finalizer, memory-profiling

**情况**

我们正在运行一个大型 WPF 应用程序，该应用程序在很长一段时间内都不会释放内存。这不是真正的内存泄漏，因为内存最终会被释放。我知道通常情况下，这不会被认为是一个问题。不幸的是，它与 WPF 命令基础架构一起成为性能问题。有关更详细的说明，请参见下文。

**发现**

我们有执行典型用例的自动化测试。有些情况下工作正常并及时释放内存。其他人正在占用内存，直到客户端最小化、打开新窗口或发生触发 Gen2 收集的其他情况。

• 在ANTS 中，我们看到对象没有GC Root，但有很多对其他需要终结的对象的引用。

• WinDbg 不显示任何准备完成的对象。

• 运行几个`GC.Collect()`，`GC.WaitForPendingFinalizers()`完全释放内存。

• 我们知道哪个 UI 操作导致了高内存状况，但我们无法识别任何可疑代码。

**问题**

我们将不胜感激有关调试此类问题的任何建议。

* * *

**WPF CommandManager 背景**

`_requerySuggestedHandlers`WPF CommandManager 拥有用于引发`CanExecuteChanged`事件的 WeakReferences ( ) 的私有集合。处理`CanExecuteChanged`成本相当高（尤其是为 找到 EventRoute `CanExecute`，显然是 a `RoutedEvent`）。每当 CommandManager 想要重新查询命令是否可以执行时，它都会遍历此集合并`CanExecuteChanged`在相应的命令源上调用事件。

只要有被引用对象的 GC 句柄，WeakReferences 就不会从该集合中删除。虽然尚未收集对象，但 CommandHelper 会继续处理`CanExecute`这些元素（ButtonBase 或 MenuItems）的事件。如果有很多垃圾（如我们的例子），这可能会导致大量调用 CanExecute 事件处理程序，从而导致应用程序非常滞后。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T12:53:44.303

我的一个应用程序也有同样的问题。在每次打开窗户时，我都会调用：

```
GC.GetTotalMemory(true); 
```

这将强制 GC 立即清理内存而无需等待。您可以在此处阅读有关此方法的更多信息：

[http://msdn.microsoft.com/en-us/library/system.gc.gettotalmemory.aspx](http://msdn.microsoft.com/en-us/library/system.gc.gettotalmemory.aspx)

关于调用 CanExecute 的问题，由于同样的性能问题，我尽量避免使用它们。相反，我在视图模型中使用属性并将 XAML 中可视元素的**IsEnabled**属性绑定到视图模型中的属性。通过这种方式，整体性能得到了提高，并且 CanExecute 调用消失了。

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:19:58.270

试试 CLRProfiler，这里是[下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=16273)。它显示了分配、处置和存活的事件处理程序。我相信您可以通过使用此工具来追查根本原因。Advanced .NET Debugging 这本书列出了一些很好的调试工具，你可以阅读它以获得一些帮助。

# php - 有多个表单并将内容插入 MySQL

> ID：13568124
> 
> 赞同：0
> 
> 时间：2012-11-26T15:39:24.687
> 
> 标签：php, forms, insert

我面前没有实际的代码，但我会尽力解释这一点。

对于加拿大的每个省，我都有几页。每个省页面都有一个非常简单的 HTML 表单，其中包含两个字段，艺术家和歌曲。基本上它是让用户发布他们最喜欢的艺术家和歌曲。现在，我在每个省的每个页面上使用这个 HTML 表单。

对于如何使表格适用于每个省份，以便内容不会插入错误的省份页面，我有点困惑。

我需要为每个省建立一个数据库吗？

非常感谢任何帮助建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:43:51.023

我认为最简单的解决方案是`hidden`在您的表格中添加一个代表省份的字段，并且在插入数据库时​​也只需添加此值，这样您就可以知道哪些歌曲/艺术​​家来自哪个省份

对于不列颠哥伦比亚省：

```
<input type="hidden" name="Province" value="BC"> 
```

对于阿尔伯塔：

```
<input type="hidden" name="Province" value="AB"> 
```

ETC...

**编辑：** 我们将使用隐藏变量将数据从 传递`form`到`php script`. 通过隐藏，它是用户无法修改的值。如果您希望用户修改它，您可能会使用组合框来选择省。话虽如此，在您的脚本中，您现在可以访问`$_GET['Province']`将保存`HTML`. 如果您为每个省份创建了不同的页面，则必须相应地手动设置该值。

我建议你`Province`在你的数据库中有一个字段以及艺术家/歌曲。在数据库中插入艺术家/歌曲时，只需添加新字段`Province`. 例如，这将允许您`SELECT * WHERE Province='ON'`从 Ontarians 获取所有用户输入。

如果仍然不清楚，请随时要求更多说明。

# android - Java 压缩文件夹和文件

> ID：13568128
> 
> 赞同：1
> 
> 时间：2012-11-26T15:39:30.227
> 
> 标签：android, zip, directory, fileinputstream, zipfile

我想压缩一个文件夹。其实我做到了。但是有一个问题。如果我的目录中有一个空文件夹，则该空文件夹不会在我的 zip 文件中创建例如我的目录是：

/文件夹

/文件夹/temp.txt

/文件夹/空文件夹

当我用我的代码压缩这个目录时，我的压缩文件中不存在空文件夹。我发现问题。问题是 files.length == 0 所以 for 循环不起作用。但我没有找到解决方案。如何在我的 zip 文件中创建空文件夹？

```
 private static final void zip(File directory, File base,
      ZipOutputStream zos) throws IOException {

    File[] files;
    if(directory.isDirectory()) // folder
    {

        files = directory.listFiles(); 

    }else
    {
        files = new File[1]; // file
        files[0] = directory;
    }

    byte[] buffer = new byte[8192];
    int read = 0;

    for (int i = 0, n = files.length; i < n; i++)
    {
      if (files[i].isDirectory())
      {
        zip(files[i], base, zos);
      }
      else
      {

              FileInputStream in = new FileInputStream(files[i]);
              ZipEntry entry = new ZipEntry(files[i].getPath().substring(
                      base.getPath().lastIndexOf("/") + 1));
              zos.putNextEntry(entry);
              while (-1 != (read = in.read(buffer)))
              {
                  zos.write(buffer, 0, read);
              }

              in.close();               

      }
    } 
```

# cross-compiling - 我应该使用哪些路径来安装交叉编译的包？

> ID：13568134
> 
> 赞同：1
> 
> 时间：2012-11-26T15:39:44.387
> 
> 标签：cross-compiling, mingw-w64

我已将 MinGW-W64 安装到`$HOME/mingw32`：

```
~$ ls -l mingw32
insgesamt 32
drwxr-xr-x  2 js js 4096 16\. Aug 16:41 bin
drwxr-xr-x 10 js js 4096 26\. Nov 14:49 i686-w64-mingw32
drwxr-xr-x  2 js js 4096 16\. Aug 16:28 include
drwxr-xr-x  3 js js 4096 16\. Aug 16:41 lib
drwxr-xr-x  3 js js 4096 16\. Aug 16:36 libexec
drwxr-xr-x 14 js js 4096 16\. Aug 16:41 licenses
drwxr-xr-x  4 js js 4096 26\. Nov 15:17 QtWin32
drwxr-xr-x  6 js js 4096 16\. Aug 16:41 share
~$ 
```

`i686-w64-mingw32-gcc-4.7.1-2-release-linux64_rubenvb.tar.xz.tar`这是由于在我的 linux64 构建系统上为 windows32 主机提取和安装了交叉编译的各种软件。例如`libpng`：

```
$ ./configure --prefix=$HOME/mingw32/i686-w64-mingw32 --host=i686-w64-mingw32 
```

要使用已安装的工具，我必须添加`$HOME/mingw32/i686-w64-mingw32/bin`到我的`PATH`环境变量中。但是，我不愿意这样做，因为这个二进制目录包含

```
$ ls $HOME/mingw32/i686-w64-mingw32/bin
ar g++ gcc ld nm objcopy ranlib strip # much more 
```

因此，我认为将交叉编译包安装到的正确位置可能是`$HOME/mingw32`，这样我就可以省略添加`$HOME/mingw32/i686-w64-mingw32/bin`到我的`PATH`. 但是，这不起作用，因为`./configure`当这些标头安装到`$HOME/mingw32/include`. 当我将它们安装到 时`$HOME/mingw32/i686-w64-mingw32/include`，它们被`./configure`脚本找到了。

我需要做一些特别的事情来告诉交叉编译器`$HOME/mingw32/include`作为内置包含路径吗？我的意思是，就像`/usr/include`原生编译器内置的一样。

因此，我不确定要使用的正确前缀是什么。有人可以解释正确的路径和 and 的确切含义`$HOME/mingw32/`吗`$HOME/mingw32/i686-w64-mingw32`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:50:05.730

使用 Cygwin MinGW-w64 安装到`/usr`，例如

```
/usr/bin/i686-w64-mingw32-gcc 
```

所以我会推荐使用这个，或者也许`/usr/local`. 就包含而言，您可以像这样计算出正确的路径

```
$ touch a.c

$ i686-w64-mingw32-gcc -v a.c |& awk '/#include/,/End/'
#include "..." search starts here:
#include <...> search starts here:
 /usr/lib/gcc/i686-w64-mingw32/4.5.3/include
 /usr/lib/gcc/i686-w64-mingw32/4.5.3/include-fixed
 /usr/i686-w64-mingw32/sys-root/mingw/include
End of search list. 
```

[**资源**](http://mingw.org/wiki/IncludePathHOWTO)

# ruby-on-rails-3 - 我怎样才能在heroku中运行oink？

> ID：13568139
> 
> 赞同：2
> 
> 时间：2012-11-26T15:39:58.203
> 
> 标签：ruby-on-rails-3, memory-management, heroku, oink

我在 Heroku 的应用程序上运行 oink gem 时遇到问题。我已将它包含在我的 gemfile 和 gemfile.lock 中，上传它们，然后安装。它甚至创建了 oink.log（不幸的是，我无法查看）。当我跑

`heroku run bundle exec oink --threshold=0 log/* --app my_app`

我明白了

> 运行 bundle exec oink --threshold=0
> log/delayed_job.log log/development.log log/oink.log log/production.log log/test.log 附加到终端... up, run.3
> /app/.bundle /gems/ruby/1.8/gems/oink-0.9.3/bin/../lib/oink/cli.rb:88:in get_file_listing'：
> 无法
> 从 /app找到“log/delayed_job.log”（RuntimeError） /.bundle/gems/ruby/1.8/gems/oink-0.9.3/bin/../lib/oink/cli.rb:86:ineach'
> 来自 /app/.bundle/gems/ruby/1.8/gems/ oink-0.9.3/bin/../lib/oink/cli.rb:86:in get_file_listing'
> 来自 /app/.bundle/gems/ruby/1.8/gems/oink-0.9.3/bin/../ lib/oink/cli.rb:59:inprocess'
> 来自 /app/.bundle/gems/ruby/1.8/gems/oink-0.9.3/bin/oink:4
> 来自 /app/.bundle/gems/ruby/1.8 /bin/oink:19:in '加载'
> 来自 /app/.bundle/gems/ruby/1.8/bin/oink:19

我也尝试过运行每个单独的文件，并得到相同的结果。该命令在我的本地机器上运行良好。

在我的 production.rb 文件中，我有

> config.logger = Hodel3000CompliantLogger.new(config.paths.log.first)
> config.middleware.use(Oink::Middleware)

作为配置。

你能告诉我我在这里做错了什么吗？我的理解是日志是只读的，但我不知道这是否意味着它们只能通过`heroku logs`命令访问。如果有一种方法我也可以查看 oink.log 文件——知道如何做到这一点也值得赞赏，或者知道如何在实际的 Heroku 日志中使用`heroku logs`.

更新：上面显示的 oink 配置允许命令在我的本地主机上成功运行。

谢谢！

-安德鲁

# c# - C# - 在向 ListView 添加项目时更新标签

> ID：13568142
> 
> 赞同：2
> 
> 时间：2012-11-26T15:40:07.000
> 
> 标签：c#

我有一个 ListView，其中填充了很多项目，超过 3000 个。这可能需要 15 秒。每次我添加一个项目时，我都想更新一个标签，说明到目前为止已经添加了多少个项目。为此，我使用以下代码：

```
foreach (FileInfo f in dir.GetFiles("*.*", SearchOption.AllDirectories))
{
    DateTime dt = GetDateTakenFromImage(Path.Combine(f.Directory.ToString(), f.Name));
    count++;
    labelLoadedLeft.Text = "Loading " + count + " files so far";
    ListViewItem lSingleItem = lv.Items.Add(f.Name);

    lSingleItem.SubItems.Add(dt.ToString("dd MMMM yyyy"));
    lSingleItem.Tag = Path.Combine(f.Directory.ToString(), f.Name);
} 
```

不幸的是，直到所有项目都已加载，标签才会显示。

我知道这与我在 thr UI 线程上执行冗长的操作有关，并且我可能应该使用后台工作人员来完成这项工作。

有谁知道如何使用后台工作者的好和简单的例子。到目前为止，我发现的东西对我来说太复杂或太复杂了。

谢谢

克鲁兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:44:20.837

如果你只想更新你的标签，你应该更新它。

```
labelLoadedLeft.Text = "Loading " + count + " files so far";
labelLoadedLeft.Update(); 
```

您使用哪个版本的 VS/C#？使用 VS2012/C#5.0，您可以利用新的“等待”功能。它使代码易于阅读，无需调用等即可更新 UI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:49:40.013

您可以使用 BackgroundWorker 来完成，这是一个示例，[http://dotnetforum.net/topic/34729-how-to-cancel-backgroundworker-during-getfiles/](http://dotnetforum.net/topic/34729-how-to-cancel-backgroundworker-during-getfiles/)。

但是，在您获得所有文件的列表之前，UI 永远不会显示任何内容。正如你所说，这很慢。

使用`EnumerateFiles`方法[http://msdn.microsoft.com/en-us/library/dd383458(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd383458(v=vs.100).aspx)一次返回一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:49:41.817

假设您使用的是 .NET 4.0，后台工作人员最容易通过[TPL处理。](http://msdn.microsoft.com/en-us/library/dd460717.aspx)您可以使用如下代码在后台启动工作人员：

```
Task.Factory.StartNew( () =>
{
   // Background Worker Stuff goes here
}, TaskCreationOptions.LongRunning); 
```

然后，您可以将您的工作人员的工作放在另一个类/函数中，并`yield return`从 中获取其结果`DoWork()`，从而为您提供`IEnumerable<T>`返回的任何内容。`foreach`像这样使用你的循环：

```
foreach(var item in DoWork())
{
   // Update UI
} 
```

这意味着您可以在结果返回时更新 UI。 `Yield return`将允许您在整个可枚举返回之前处理项目。不过要小心——`yield return`在你的程序中隐式地设置了一个状态机，所以除非你需要这样的功能，否则使用这个习惯用法可能会非常浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:45:26.663

你可能不需要它。在 ListView 上使用 Begin/EndUpdate。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.beginupdate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.beginupdate.aspx)

这将阻止绘制项目，直到它们全部加载。你将无法保持计数，但我根本看不到这样做的好处，特别是如果这让它太快而无关紧要。

# ios - 核心数据轻量级迁移 - 何时发布版本？

> ID：13568144
> 
> 赞同：1
> 
> 时间：2012-11-26T15:40:13.237
> 
> 标签：ios, cocoa-touch, core-data, core-data-migration

我可以执行以下操作吗？

1.  从应用程序的 v1.0 开始。版本数据模型，将新版本指定为活动模式
2.  在 appDelegate 中设置正确的选项以使用轻量级迁移创建 NSPersistentStoreCoordinator
3.  对模型进行简单的更改并更新类。编译并验证一切正常。
4.  **在不更改版本的情况下再次更改数据模型，并再次更新类**

当然，当我运行时，数据模型将不兼容，因为我在没有版本控制的情况下更改了它。但由于我不会发布中间版本，我怀疑从 v1.0 更新到双更新数据模型时数据迁移应该可以正常工作。

这是准确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:48:09.043

只要满足以下条件，它就会起作用：

1.  您已经为每个步骤创建了一个新的模型版本；所以在你上面的例子中，最后应该有三个：原始、中间、最终。
2.  应用程序必须能够进行从 1 到 3 的轻量级迁移。如果不能，如果磁盘上的数据仍然是 1 的结构，则它不会经过 2。

如果这一切都是真的，那么它将起作用。您甚至可以在最终版本中不发布 v2（尽管它们很小，而且通常不值得付出努力）。

在开发过程中，我的建议是始终保留 v1 数据，只更改 v2 并在每次需要调整 v2 时重新迁移。那么就没有中间需要处理了。然而，在与 beta 测试人员打交道/工作时，这并不总是可行的。

# php - 无法在 Symfony2 中调用自定义存储库功能

> ID：13568146
> 
> 赞同：1
> 
> 时间：2012-11-26T15:40:22.380
> 
> 标签：php, symfony, orm

我们在 Symfony2 项目中从控制器调用某个自定义实体存储库函数时遇到问题。我们之前已经成功地与其他实体一起完成了它，所以我们可能遗漏了一些东西，我无法弄清楚它可能是什么。

我们的存储库类如下所示：

```
<?php

namespace OurSite\Bundle\OurBundle\Entity;
use Doctrine\ORM\EntityRepository;

class BlogRepository extends EntityRepository
{
    public function findPreviousPosts($limit = 6)
    {

        $q = $this->createQueryBuilder('q')
            ->where('q.category = :category')            
            ->setMaxResults($limit)                                                           
            ->add('orderBy', 'q.published ASC')
            ->getQuery();
        $res = $q->getResult();
        return $res;
    }
} 
```

实体：

```
<?php

namespace OurSite\Bundle\OurBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;

/**
* OurSite\Bundle\OurBundle\Entity\Blog
*
* @ORM\Table()
* @ORM\Entity(repositoryClass="OurSite\Bundle\OurBundle\Entity\BlogRepository")
*/
class Blog {
    // Non-relevant stuff here
} 
```

当我们这样调用方法时：

```
$em = $this->getDoctrine()->getEntityManager();
$previousPosts = $em->getRepository('OurSiteOurBundle:Blog')->findPreviousPosts(); 
```

我们得到这个：

```
Undefined method 'findPreviousPosts'. The method name must start with either findBy or findOneBy! 
```

如果我们这样做，就会按预期`echo get_class($em->getRepository('OurSiteOurBundle:Blog'));`输出。`BlogRepository`

什么可能导致问题？我们`bundle`在项目中有一个多余的目录，但我猜这不会导致它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T23:04:22.010

从您提供的来源来看，这可能不是您的问题，但它可能会为其他人节省一些搜索时间。

我遇到了同样的“必须以 findBy 或...开头”错误，结果在我的实体定义中我不小心两次调用了 @ORM\Entity 注释。第一次我正确使用它并设置了repositoryClass，但第二次我只是单独使用它（就像一个没有自定义存储库的实体一样），这样就覆盖了以前的repositoryClass定义。

```
 /**
 *
 * @ORM\Entity(repositoryClass="Company\TestBundle\Entity\MyEntityRepository")
 * @ORM\Table(name="testing_my_entity")
 * @ORM\Entity
 */

class MyEntity
{
etc...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T14:27:31.443

我有同样的问题。我看过很多关于这个的帖子，但没有解决它。

最后我发现那是因为我之前使用的是生成的 yml 文件，所以 Doctrine 没有读取映射的注解！

所以只要确保你没有任何 yml/xml Doctrine 文件。

接着 ：

```
app/console doctrine:cache:clear-metadata 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T07:43:37.840

如果您收到此错误：`The method name must start with either findBy or findOneBy!`这意味着您的自定义存储库未加载。

检查代码中的拼写错误，清除缓存，确保“OurSiteOurBundle”是实际的快捷方式名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T18:47:47.800

如果使用 xml 进行映射（通过测试）：更新 xml 或 yml 映射文件，添加存储库类属性：

```
<entity name="Ccd\Bundle\FrontendBundle\Entity\UvUpdatePageContent" table="uv_update_page_content" **repository-class="Ccd\Bundle\FrontendBundle\Entity\UvUpdatePageContentRepository"**> 
```

[http://doctrine-mongodb-odm.readthedocs.org/en/latest/cookbook/mapping-classes-to-orm-and-odm.html](http://doctrine-mongodb-odm.readthedocs.org/en/latest/cookbook/mapping-classes-to-orm-and-odm.html) 然后更新学说缓存：

```
php app/console doctrine:cache:clear-metadata 
```

使用 yml（未测试）：

```
Acme\DemoBundle\Entity\Post:
  type: entity
  table: posts
  RepositoryClass: Acme\DemoBundle\Entity\PostRepository 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T17:57:12.320

你以前用过这个实体吗？我看到博客的奇怪实体快捷方式

> OurSiteOurBundle:博客

但是您的博客有 OurSite\ **Bundle** \OurBundle\Entity 命名空间。我认为应该是

> OurSiteBundleOurBundle:博客

实体管理器将您指向错误的存储库类

# apache - 使用 .htaccess 替换域名

> ID：13568151
> 
> 赞同：0
> 
> 时间：2012-11-26T15:40:48.977
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个新网站[http://abc.com/case_studies/casstudy20/](http://abc.com/case_studies/casstudy20/)。我有一个旧网站[http://xyz.com/clients/home.php?client=myclient](http://xyz.com/clients/home.php?client=myclient)

在旧域名 xyz.com 下有大量案例研究和故事。现在我正在使用 abc.com 是否可以替换 URL，因此它显示 abc.com 但从同一个旧位置访问代码。

意思是当我的用户访问旧网站而不是 xyz.com 时。它应该说 [http://abc.com/clients/home.php?client=myclient](http://abc.com/clients/home.php?client=myclient)。但从同一个旧 xyz.com 运行。

是否可以使用 htaccess 来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:49:18.750

有点。您可以将来自 xyz.com 的所有流量重定向到 abc.com 上的正确路径，但这需要您保持对两个域的控制。

如果可以的话，实际上最好把它放在 xyz.com 的虚拟主机配置中，那么你根本不需要完整的配置。假设你有权限，它也可以在 .htaccess 中工作。

```
RedirectMatch ^(.*)$ http://www.abc.com$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:49:38.127

如果您可以控制两个域，那么您正在寻找 http 301 重定向。您可以通过将以下行添加到您的 htaccess 文件来重定向整个网站来做到这一点。如果不控制您的原始域，您的旧 xyz.com 网站就不可能被路由到适当的服务器，因此您的 htaccess 文件将永远不会有任何东西可以重定向。

```
redirect 301 / http://abc.com/ 
```

# php - Wordpress 显示页面内容和循环？

> ID：13568155
> 
> 赞同：2
> 
> 时间：2012-11-26T15:41:01.070
> 
> 标签：php, wordpress-theming, wordpress

我在页面模板中有一个自定义循环，可以通过给定类别和标签按类别显示帖子。它可以工作，但在循环上方我需要显示页面本身的内容，即正常输入到 Wordpress 仪表板的内容。

我应该在模板中添加什么来显示此内容？

我试过了：

```
 $id = $post->ID;
 get_page($id);
 // then my custom loop 
```

哪个确实获得了当前页面 ID，但没有内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T15:50:49.633

在 WordPress 中，调用

```
<?php the_content(); ?> 
```

只要它在循环内，就会从使用该模板的页面上的 WYSIWYG 编辑器中提取内容。

最基本的示例可能如下所示：

```
<?php while (have_posts()) : the_post();/* Start loop */ ?>
        <?php the_content(); ?>
<?php endwhile; /* End loop */ ?>

<!-- Enter your custom loop for displaying posts by category down here --> 
```

更多信息在这里：[http ://codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-12T03:54:26.103

就我而言，使用现代主题并使用古腾堡块，我必须在帖子循环之前对内容应用过滤器，如此处的线程所述：[获取页面内容的正确方法](https://stackoverflow.com/a/5318869/2517011)

按照其中一个示例，一个简单的工作解决方案将是：

```
<?php
    $id = 669; // page ID that has been assigned for posts
    $post = get_post($id);
    $content = apply_filters('the_content', $post->post_content);
    echo $content;
?>

<!-- Enter your custom loop for displaying posts by category down here --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:46:14.233

要显示页面的内容，使用`the_content()`函数。

在此函数调用之后添加了您的自定义循环。

# matlab - 计算 eigs 时出现神秘的 matlab 错误

> ID：13568158
> 
> 赞同：3
> 
> 时间：2012-11-26T15:41:08.297
> 
> 标签：matlab, runtime-error, eigenvector

我试图找到拉普拉斯算子的 2 个最小特征值的 2 个特征向量。我这样做是通过

```
[v,c]=eigs(L,M,2,'SM'); 
```

哪里`L`是 lapalcian 和`M`是质量矩阵。

结果我得到了错误

```
Error using eigs/checkInputs/LUfactorAminusSigmaB (line 1041)
The shifted operator is singular. The shift is an eigenvalue.
 Try to use some other shift please.

Error in eigs/checkInputs (line 855)
            [L,U,pp,qq,dgAsB] = LUfactorAminusSigmaB;

Error in eigs (line 94)
[A,Amatrix,isrealprob,issymA,n,B,classAB,k,eigs_sigma,whch, ... 
```

这是否意味着我做错了什么，或者这只是 matlab 为其迭代过程选择了错误的初始猜测？

我使用的矩阵应该有一个下降条件数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:37:10.937

我在实现标准化切割分割时遇到了同样的问题。条件数实际上是无限的，因为最小的特征值是 0，这基本上就是 MATLAB 的错误信息。它首先运行 LU 分解。

我刚刚将 I 的倍数 10*eps*speye 添加到归一化的拉普拉斯算子以改善条件反射并修复它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-04T06:28:28.213

我对 eigs 函数有同样的问题。所以我走了很长的路（也许是愚蠢的），但它为我完成了工作，因为我的问题不是那么大：（我会尽量保持你的符号）

% 使用全矩阵求解特征值问题

```
[v,c]=eig(full(L),full(M)); 
```

% 使用排序函数对特征值进行排序（“-”号是因为你想要最小的真实特征值的大小）

```
[E,P] = sort(real(c),'descend'); % Here I am assuming you know all the eigenvalues have` negative real parts 
```

% 现在 P 是一个向量，它包含（按顺序）由 % 函数 sort 操作的行排列的索引。% 为了得到两个最小特征值对应的两个特征向量：

```
for k = 1:2
  index = P(k);
  lambda(k) = c(index,index); % use this to check if c(index,index)=E(k,k)
  eigvec(:,k) = v(:,index); % corresponding eigenvector
end 
```

希望这可以帮助

G

# php - JavaScript 元素样式随动态 id 变化

> ID：13568160
> 
> 赞同：0
> 
> 时间：2012-11-26T15:41:20.483
> 
> 标签：php, javascript, html, css, forms

当检查旁边的复选框时，我正在尝试通过列表项目放置一行。我已经设法做到了，但我无法检查该框是否被选中。

**JS文件**

```
 if(document.getElementById(theID).checked){

document.getElementById(theID).setAttribute("style", "text-decoration:line-through");
} 
```

**HTML/PHP**

```
 echo'<ol>';
            foreach($to_do_XML->task as $item)
            {
                $theID = $item['id'];

            echo '<li id="'.$theID.'">'.$item.'</li>' ;?><form ><input  onclick="return cross('<?=$theID?>');" type="checkbox" name="done<?php $li_id_num_done ?>"/></form>
                 <?php     

            }
            echo '</ol>'; 
```

我还应该补充一点，列表项正在通过 xml 元素循环的 foreach 循环中添加

上面的代码没有任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:44:34.707

如果`$theID`是字符串，则需要在其周围加上引号：

```
 <input  onclick="return cross('<?php echo $theID; ?>');" type="checkbox" name="done<?php $li_id_num_done ?>"/> 
```

**还要从你的函数中删除它：**

```
got_elements_id 
```

这将导致引用错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:58:33.493

我相信这会更好：

```
echo '<li id="'.$theID.'">'.$item.'</li>' ;?>
<form >
    <input  onclick="return cross('<? echo $theID; ?>');" type="checkbox" name="done<?php $li_id_num_done ?>"/>
</form> 
```

和

```
function cross( id ){

    var element = document.getElementById( id );
    if( element.checked){

        element.style.textDecoration = "line-through";
    }
} 
```

甚至：

```
function cross( id ){

    var element = document.getElementById( id );        
    element.style.textDecoration = element.checked ? "line-through" : "";
} 
```

这还可以取消选中和删除 linethrough。

# css - Ruby on Rails - 在编译时执行代码

> ID：13568167
> 
> 赞同：0
> 
> 时间：2012-11-26T15:41:50.557
> 
> 标签：css, ruby-on-rails-3, compiler-construction, assets, execute

我想在编译时在 CSS 文件中使用 ruby​​ 代码并使其成为静态资产，然后可能会在之后将其缩小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:07:19.023

Rails 3.1+ 中的资产管道将根据其文件名通过一系列预处理器发送您的资产。例如，如果您有`stylesheet.css.scss`，则文件将通过 SASS 处理器发送以将其转换为 CSS。

当您将扩展链接在一起时，乐趣就开始了，以便通过多个处理器发送您的资产。在您的情况下，您可以命名您的资产`stylesheet.css.scss.erb`以首先通过 ERB 发送，然后是 SASS。这是一个可能看起来像的小例子：

```
.some_class {
  background-image: url(<%= asset_path('image.png') %>);
  color: <%= some_ruby_code_to_generate_a_color %>;
} 
```

因此，就像您在常规 ERB 视图模板中所做的那样，您可以简单地将标签之间的 Ruby 代码`<%= %>`放入您的资产中，这些代码将在资产被编译（或预编译）时运行。

关于缩小，这是资产管道通过一些配置选项简单地处理的事情。查看[资产管道的 Rails 指南以](http://guides.rubyonrails.org/asset_pipeline.html)获取更多详细信息。

# django - Django 1.5 自定义用户模型错误。“经理不可用；用户已被交换”

> ID：13568172
> 
> 赞同：20
> 
> 时间：2012-11-26T15:42:05.773
> 
> 标签：django, django-admin, django-users

我按照开发文档中的描述扩展了 django 用户模型。我不想保留大部分原始用户模型功能，所以我扩展了 AbstractUser 类。我在settings.py中定义：

```
AUTH_USER_MODEL = 'myapp.CustomUser' 
```

我的用户类：

```
class CustomUser(AbstractUser):
  custom_field = models.ForeignKey('OtherModel')
  objects = UserManager() 
```

一切似乎都很好，但是当我尝试让它由管理站点管理时：

```
admin.site.register(CustomUser, UserAdmin) 
```

我在管理自定义用户创建页面上收到此错误（在验证密码确认表单后）：

```
AttributeError: Manager isn't available; User has been swapped for 'myapp.CustomUser' 
```

关键是我需要这个由管理站点管理的模型，以便拥有与原始用户模型相同的创建过程（密码验证的两步过程）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T08:25:56.007

您只需要更改表单即可添加用户（覆盖 clean_username 并在 get_user_model() 上更改用户

完整的工作示例（如果您从 AbstractUser 继承）

```
from django.contrib.auth import get_user_model
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.forms import UserCreationForm, UserChangeForm

class MyUserChangeForm(UserChangeForm):

    class Meta:
        model = get_user_model()

class MyUserCreationForm(UserCreationForm):

    class Meta:
        model = get_user_model()

    def clean_username(self):
        username = self.cleaned_data["username"]
        try:
            get_user_model().objects.get(username=username)
        except get_user_model().DoesNotExist:
            return username
        raise forms.ValidationError(self.error_messages['duplicate_username'])

class MyUserAdmin(UserAdmin):
    form = MyUserChangeForm
    add_form = MyUserCreationForm
    fieldsets = (
        (None, {'fields': [('username', 'password'),]}),
        (_('Personal info'), {'fields': ('first_name', 'last_name', 'email')}),
        (_('Permissions'), {'fields': ('is_active', 'is_staff', 'is_superuser',
                                   'groups', 'user_permissions')}),
        (_('Important dates'), {'fields': ('last_login', 'date_joined')}),
        )

admin.site.register(MyUser, MyUserAdmin) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-08T00:40:16.310

我为这个错误苦苦挣扎了好几个小时。对我来说，我需要删除所有对

```
from django.contrib.auth.models import User 
```

然后将其替换为：

```
from myapp.models import MyUser as User 
```

这是假设您的自定义 User 模型位于名为的应用程序中`myapp`，并且您调用了 model `MyUser`。

我正在使用`as User`这样我就不必更改`User`从`django.contrib.auth.models`.

祝你好运！

艾伦

@aviars

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T10:56:47.903

您可能应该查看官方文档中的**完整示例：**

[https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example)

有一些未发现的问题（例如权限处理），但至少它是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:58:28.893

来自[Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/#specifying-a-custom-user-model)：

> 您还应该为您的用户模型定义一个自定义管理器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T17:02:41.190

子类`AbstractUser`已经`objects = UserManager()`为您处理（[此代码在 github](https://github.com/django/django/blob/master/django/contrib/auth/models.py#L293)上的第 327 行）。您无需再次在模型中定义它。

我不确定为什么会出现该错误。但下面的配置似乎适用于我最新的开发版本。

模型.py：

```
class CustomUser(AbstractUser):
  custom_field = models.ForeignKey('OtherModel')
  # remove : objects = UserManager() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T21:23:30.590

我找到了一个解决方案：我不使用 UserAdmin 在管理站点中注册 CustomUser，我使用自定义 ModelAdmin。

```
class CustomUserAdmin(admin.ModelAdmin):

  add_form = CustomUserCreationAdminForm
  add_fieldsets = (
    (None, {
        'classes': ('wide',),
        'fields': ('username', 'password1', 'password2')}
    ),
  )
  def get_fieldsets(self, request, obj=None):
    if not obj:
        return self.add_fieldsets
    return super(CustomUserAdmin, self).get_fieldsets(request, obj)

  def get_form(self, request, obj=None, **kwargs):
    defaults = {}
    if obj is None:
        defaults.update({
            'form': self.add_form,
            'fields': admin.util.flatten_fieldsets(self.add_fieldsets),
        })
    defaults.update(kwargs)
    return super(CustomUserAdmin, self).get_form(request, obj, **defaults) 
```

因为我想要一个不同于更新表单的创建表单，所以我重写了 Model Admin 的 get_form 函数，就像在[UserAdmin django code](https://github.com/django/django/blob/master/django/contrib/auth/admin.py#L66)中所做的那样。我还为我的自定义用户创建了一个自定义创建表单：CustomUserCreationForm

我在 django-users 邮件列表中收到了可能比我的更好的回复：从管理站点取消注册原始 User 类，然后使用 UserAdmin 注册 CustomUser：

```
admin.site.unregister(User)
admin.site.register(CustomUser, UserAdmin) 
```

尚未测试。

编辑：最后一个解决方案不起作用

问候

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T16:00:18.237

`UserAdmin``User`在 contrib/auth/admin.py 的末尾已经注册为 manage

```
admin.site.register(User, UserAdmin) 
```

鉴于您想注册`UserAdmin`，`CustomUser`我认为您首先必须取消注册`User`/`UserAdmin`对：

```
admin.site.unregister(User) 
```

然后注册您的新模型。鉴于模块加载顺序缺乏控制，您可以创建一个派生自它的类`UserAdmin`并使用它来管理您的用户模型。如果我思考得当，这将每次都有效。

# xcode - Xcode Archive 在子项目中找不到头文件

> ID：13568180
> 
> 赞同：8
> 
> 时间：2012-11-26T15:42:22.087
> 
> 标签：xcode, cocoalibspotify-2.0

现在对 XCode 感到非常沮丧。我可以完美地从代码构建和运行。但是，尝试存档是一场灾难。

我创建了一个项目，然后将 .xcodeproj 拖到项目导航器上的 XCode 中。显示很好，很酷。父项目构建设置：

`Other linker flags: -all_load, -ObjC`

`Target Dependencies : CocoaLibSpotify (subproject I'm incorporating)`

`Link Binary with Libraries : libCocoaLibSpotify.a`

当我构建我的项目时，以下几行有效

```
#import "CocoaLibSpotify.h"
#import <CocoaLibSpotify.h> 
```

但是，当我存档时，我的项目找不到这些文件。值得注意的是，子项目文件与父项目不在同一目录中。但是，这不是目标依赖/链接二进制文件与库的重点吗？为什么存档失败？这似乎应该比现在容易得多。

谢谢。

编辑：编译错误

```
In file included from /Users/ericharmon/Projects/teamsync/teamsync/TeamSync/AppDelegate.m:12:  
In file included from  /Users/ericharmon/Projects/teamsync/teamsync/TeamSync/Classes/GUI/ViewControllers/LoginViewControll er.h:9:
In file included from /Users/ericharmon/Projects/teamsync/teamsync/TeamSync/Classes/GUI/BaseViewController.h:10:
In file included from /Users/ericharmon/Projects/teamsync/teamsync/TeamSync/Classes/Model/Managers/Managers.h:9:
In file included from /Users/ericharmon/Projects/teamsync/teamsync/TeamSync/Classes/Model/Managers/AppLogicManager.h:11:
In file included from   /Users/ericharmon/Projects/teamsync/teamsync/TeamSync/Classes/Model/CoreData/CoreDataObjects.h:13:
/Users/ericharmon/Projects/teamsync/teamsync/TeamSync/Classes/Model/CoreData/Track.h:13:9: fatal error: 'CocoaLibSpotify.h' file not found
#import <CocoaLibSpotify.h>
    ^
1 error generated.` 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T10:37:37.357

Archive 在构建时使用不同的目录结构，这可能会很痛苦。`User Header Search Paths`通过将以下内容添加到应用程序目标的构建设置中，我找到了成功：

`"$(BUILD_ROOT)/../IntermediateBuildFilesPath/UninstalledProducts/include"`（包括引号）。

另外，请确保`Always Search User Paths`设置为`Yes`.

另外，我`$CONFIGURATION_BUILD_DIR/include`在我的`Header Search Paths`设置中有，但我认为这对存档没有帮助。

# php - PHP codeigniter，如何在 url 中创建不同的键，以便调用不同的控制器名称而不是实际的控制器名称？

> ID：13568188
> 
> 赞同：0
> 
> 时间：2012-11-26T15:42:50.720
> 
> 标签：php, codeigniter, url, routing, controller

可以说我的网址是：

[http://www.mysite.com/controller1/](http://www.mysite.com/controller1/)

我想做路由，所以它不会寻找控制器 1，它会搜索控制器 1 作为键。

所以我将为控制器提供一个类似数组的键

```
<?php
$controllers_mapArr = array(
   'controller1'=>'actual_controler_name',
);

?> 
```

它将执行控制器键“actual_controler_name”的值，但 URL 将显示 controller1 任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:41:39.157

您可以使用 codeigniter 的路由功能**轻松**完成此操作，您必须在`application/config/routes.php`文件中添加规则，以下是执行示例

```
$route['journals'] = "blogs"; 
```

如果您的网址类似于[http://example.com/journals](http://example.com/journals)那么您的网址将调用 blogs 控制器

```
$route['journals/joe'] = "blogs/users/34"; 
```

使用此规则，如果您访问您的网址[http://example.com/journals/joe](http://example.com/journals/joe)，那么它将调用 blogs 控制器的 users 方法，并将 34 作为函数参数的值。

在此处查看[详细文档](http://ellislab.com/codeigniter/user-guide/general/routing.html)或路由：http: [//ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:58:52.030

好的，在我朋友的帮助下找到答案实际上是 codeigniter 的基础知识之一，无论如何都有答案： [http ://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

# matlab - matlab图中的自定义x轴值

> ID：13568190
> 
> 赞同：10
> 
> 时间：2012-11-26T15:42:53.110
> 
> 标签：matlab, plot, axis, octave, figure

目前，当我绘制一个 9 x 6 数组时，该图的 x 轴只有 1、2、3 到 9。Y 轴显示正确的值。

我希望自定义 x 轴值而不是 1 到 9。他们应该是

> 100 200 400 1000 2000 5000 10000 20000 50000

反而。我试过

```
set(gca,'XTick', [100 200 400 1000 2000 5000 10000 20000 50000]) 
```

但这不是正确的方法。是否可以`Matlab`选择为 x 轴设置这些自定义值？为什么`Matlab`只使用 1 到 9 呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-25T12:06:00.630

如果您想保持 x 值之间的距离（例如 1:9）并且只更改标签（而不是 x 值之间的距离），请尝试以下操作：

```
y = rand(9,6);
labels = [100 200 400 1000 2000 5000 10000 20000 50000];
plot(y);
set(gca, 'XTick', 1:length(labels)); % Change x-axis ticks
set(gca, 'XTickLabel', labels); % Change x-axis ticks labels. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T15:46:34.423

您应该使用[xTickLabel](http://www.mathworks.com/help/matlab/ref/axes_props.html#XTickLabel)而不是`XTick`.

MATLAB 将每一列绘制为单独的曲线。因此，这意味着您有 6 条曲线和每条曲线的 9 个数据点。x 轴数据为 1-9，因为您没有提供任何数据供 MATLAB 进行绘图。

此外，您可能想要错误的东西。这样做会给你相等的间距。它只会用你的数组替换 1-9 。由于您的 x 轴数据不是等距的，因此会很奇怪。

你可能想这样做：

```
xdat = [100 200 400 1000 2000 5000 10000 20000 50000];
ydat = rand(9,6); % Your y-axis data
plot(xdat, ydat) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-23T05:06:35.377

尝试使用

```
x = [100 200 400 1000 2000 5000 10000 20000 50000];
y = rand(9,6); % Your y-axis data
plot(x, y);
set(gca,'XTick',x); % Change x-axis ticks
set(gca,'XTickLabel',x); % Change x-axis ticks labels to desired values. 
```

请注意，由于使用 un x 轴的值/大小非常不同，您可以获得一些非常接近（且不可读）的 x 标签

# php - 如何在运行 CLI 和 Apache2Handler 时将系统环境变量导入 PHP？

> ID：13568191
> 
> 赞同：47
> 
> 时间：2012-11-26T15:42:53.730
> 
> 标签：php, apache, environment-variables

我的系统是**Ubuntu**，我已将环境变量设置为`/etc/environment`.

如果我使用**CLI运行****PHP**脚本-可以识别来自的环境变量。**`/etc/environment`**

 **但是，如果我通过（即**apache2handler ）执行****PHP**脚本，则完全相同的脚本会打印出 NULL，这意味着未加载来自的环境变量。`http://domain/test.php`**`/etc/environment`**

 **我所做的修复是在其中添加变量`/etc/apache2/envvars`并解决了问题。

但这是两个不同的文件，它们必须保持同步。

如何使**PHP** / **Apache**`/etc/environment`从（系统）加载和识别环境变量？

编辑：为了澄清事情，当我说“未加载到 PHP 中”时，它意味着来自的变量`/etc/environment`未设置在`$_SERVER`,中`$_ENV`，`getenv()`并且不存在于`$GLOBALS`. 换句话说，“没有加载到 PHP 中”。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-05-13T15:09:34.493

我有完全相同的问题。`/etc/environment`为了解决它，我只是在内部采购`/etc/apache2/envvars`。

的内容`/etc/environment`：

```
export MY_PROJECT_PATH=/var/www/my-project
export MY_PROJECT_ENV=production
export MY_PROJECT_MAIL=support@my-project.com 
```

的内容`/etc/apache2/envvars`：

```
# Load all the system environment variables.
. /etc/environment 
```

现在，我可以在 Apache 虚拟主机配置文件和 PHP 中使用这些变量。

以下是 Apache 虚拟主机的示例：

```
<VirtualHost *:80>
  ServerName my-project.com
  ServerAlias www.my-project.com
  ServerAdmin ${MY_PROJECT_MAIL}
  UseCanonicalName On

  DocumentRoot ${MY_PROJECT_PATH}/www

  # Error log.
  ErrorLog ${APACHE_LOG_DIR}/my-project.com_error.log
  LogLevel warn

  # Access log.
  <IfModule log_config_module>
    LogFormat "%h %l %u %t \"%m %>U%q\" %>s %b %D" clean_url_log_format
    CustomLog ${APACHE_LOG_DIR}/my-project.com_access.log clean_url_log_format
  </IfModule>

  # DocumentRoot directory
  <Directory ${MY_PROJECT_PATH}/www>
    # Disable .htaccess rules completely, for better performance.
    AllowOverride None
    Options FollowSymLinks Includes
    Order deny,allow
    Allow from All

    Include ${MY_PROJECT_PATH}/config/apache/inc.mime-types.conf
    Include ${MY_PROJECT_PATH}/config/apache/inc.cache-control.conf

    # Rewrite rules.
    <IfModule mod_rewrite.c>
      RewriteEngine on
      RewriteBase /

      # Include all the common rewrite rules (for http and https).
      Include ${MY_PROJECT_PATH}/config/apache/inc.rewriterules-shared.conf
    </IfModule>
  </Directory>
</VirtualHost> 
```

这是一个如何使用 PHP 访问它们的示例：

```
<?php
header('Content-Type: text/plain; charset=utf-8');
print getenv('MY_PROJECT_PATH') . "\n" .
      getenv('MY_PROJECT_ENV') . "\n" .
      getenv('MY_PROJECT_MAIL') . "\n";
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T16:24:19.273

在 ubuntu 上，PHP 对常规进程和 CLI 进程使用不同的 ini 文件。

应该有几个 ini 文件，如`/etc/php5/cli/php.ini`,`/etc/php5/fpm/php.ini`或`/etc/php5/php.ini`. 打开相关的INI文件，修改

`variables_order = "GPCS"`

线到

`variables_order = "EGPCS"`.

之后，您将获得在使用 $_ENV['varname'] 之前设置的环境变量。

从 php.ini 关于`variables_order`：

```
Abbreviations for the following respective super globals: GET, POST, COOKIE,
ENV and SERVER. There is a performance penalty paid for the registration of
these arrays and because ENV is not as commonly used as the others, ENV is
is not recommended on productions servers. You can still get access to
the environment variables through getenv() should you need to. 
```

所以你可以尝试使用[getenv()](http://www.php.net/getenv)而不是 $_ENV[]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T20:19:07.660

最近我写了一个库来从环境变量中获取值并解析为 PHP 数据类型。该库可用于将环境变量解析为 PHP 数据类型（如转换为整数、浮点数、空值、布尔值），解析 JSON 字符串等复杂数据结构，以及更多社区的贡献。

该库可在此处获得：[https ://github.com/jpcercal/environment](https://github.com/jpcercal/environment)

重新启动 Apache 服务器并将环境变量加载到操作系统后，将环境变量放入“/etc/environment”和“/etc/apache2/envvars”：

```
# source /etc/environment
# source /etc/apache2/envvars 
```

并从环境变量（独立于环境 CLI、Apache、Nginx、PHP 内置服务器等）中获取值来执行此操作：

```
<?php
// ...
require "vendor/autoload.php";
// ...
var_dump(Cekurte\Environment\Environment::get("YOUR_ENV_VARIABLE_NAME")); 
```

好好享受。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-11-26T16:02:53.420

我认为您只能用于从 .htaccess 设置环境变量：

```
SetEnv greet hello 
```

PHP：

```
print $_SERVER["greet"]; 
```****

# ruby-on-rails - 如何使用命令提示符（不是 IDE）在 Rails Web 应用程序上运行我的 ruby

> ID：13568192
> 
> 赞同：1
> 
> 时间：2012-11-26T15:42:56.403
> 
> 标签：ruby-on-rails, command-line

我正在使用 Aptana 作为 IDE 来开发一个小型应用程序。为了测试应用程序，我使用了 Aptana 的命令提示符。

我使用的笔记本电脑具有**带有 ruby​​ 和 rails**但没有 aptana 的命令提示符。我所看到的只是一个**C:Sites>**。我尝试访问的应用程序位于不同的文件夹中。

我应该怎么做才能从提示符下运行 ruby​​ on rails 应用程序？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:49:49.450

这： `cd`到您的项目文件夹，然后`rails s`或`script/server`. 从您的浏览器
访问它。`localhost:3000`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:49:57.187

无法帮助您找到 Rails 应用程序的目录，但是当您这样做时，只需

```
rails server 
```

如果这不起作用，请尝试遵循[this](http://accidentaltechnologist.com/ruby-on-rails/running-rails-3-on-windows/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:49:07.040

**在环境模式下**

*   rails s OR rails server OR rails s -e development

**在生产模式下**

*   rails s -e production（不要忘记在运行前预编译你的资产）

如果您的平台是**jruby** ，则在 rails 命令的前面添加`jruby`ie `jruby -S rails s -e development`。

# oracle - Oracle 中的日期是如何存储的？

> ID：13568193
> 
> 赞同：16
> 
> 时间：2012-11-26T15:43:05.793
> 
> 标签：oracle, date

Oracle 中的日期是如何存储的？例如，我知道大多数系统使用 Epoch 时间来确定它是什么时间。通过计算距离 1970 年 1 月 1 日还有多少秒。Oracle 也这样做吗？

我问这个的原因是我注意到，如果你在 Oracle 中取两个日期并减去它们，你会得到一个浮点数，即两者之间的天数。

例子

```
(Sysdate - dateColumn) 
```

会返回这样的东西（取决于时间）

```
3.32453703703703703703703703703703703704 
```

现在是 Oracle 进行转换并吐出该格式，还是 Oracle 将日期存储在距离某个时间范围还有多少天？（如大纪元时间）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-26T15:52:28.963

有12和13两种

[http://oraclesniplets.tumblr.com/post/1179958393/my-oracle-support-oracle-database-69028-1](http://oraclesniplets.tumblr.com/post/1179958393/my-oracle-support-oracle-database-69028-1)

**13 型**

```
select dump(sysdate) from dual;
Typ=13 Len=8: 220,7,11,26,16,41,9,0

The format of the date datatype is

Byte 1 - Base 256 year modifier : 220
2      - Base 256 year : 256 * 7 = 1792 + 220 = 2012
3      - Month : 11
4      - Day : 26
5      - Hours : 16
6      - Minutes : 41
7      - Seconds : 09
8      - Unused 
```

2012-11-26 16:41:09

**12 型**

```
select dump(begindate) from tab;
Typ=12 Len=7: 100,112,2,7,1,1,1

The format of the date datatype is

byte 1 - century (excess 100)  100 - 100 = 00
byte 2 - year (excess 100)  112 - 100 = 12
byte 3 - month = 2
byte 4 - day = 7
byte 5 - hour (excess 1) 1 - 1 = 0
byte 6 - minute (excess 1) 1 - 1 = 0
byte 7 - seconds (excess 1) 1 - 1 = 0 
```

0012-02-07 00:00:00

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-17T11:46:08.803

> Oracle 中的日期是如何存储的？

这**两种数据类型** `12`有`13`两种不同的用途。

*   **类型 12** - 存储在表中的日期
*   **类型 13** - 由内部日期函数（如`SYSDATE`/ ）返回的日期，在使用**ANSI 日期文字**`CURRENT_DATE`将字符串文字转换为日期时也是如此。`TO_DATE` **`DATE 'YYYY-MM-DD'`**

 ****测试用例：**

**类型 12**的基本表设置：

```
SQL> CREATE TABLE t(col DATE);

Table created.

SQL> INSERT INTO t SELECT SYSDATE FROM dual;

1 row created.

SQL> COMMIT;

Commit complete. 
```

检查不同的情况：

```
SQL> SELECT DUMP(col) FROM t;

DUMP(COL)
--------------------------------------------------------------------------------
Typ=12 Len=7: 120,116,3,17,18,6,55

SQL> SELECT DUMP(SYSDATE) FROM dual;

DUMP(SYSDATE)
--------------------------------------------------------------------------------
Typ=13 Len=8: 224,7,3,17,17,5,54,0

SQL> SELECT DUMP(CURRENT_DATE) FROM dual;

DUMP(CURRENT_DATE)
--------------------------------------------------------------------------------
Typ=13 Len=8: 224,7,3,17,17,14,20,0

SQL> SELECT DUMP(TO_DATE('17-DEC-1980 12:12:12','DD-MON-YYYY HH24:MI:SS'))  FROM dual;

DUMP(TO_DATE('17-DEC-198012:12:12','
------------------------------------
Typ=13 Len=8: 188,7,12,17,12,12,12,0 
```

使用**ANSI Date 文字**，就像**TO_DATE**一样：

```
SQL> SELECT DUMP(DATE '2016-03-17') FROM dual;

DUMP(DATE'2016-03-17')
--------------------------------
Typ=13 Len=8: 224,7,3,17,0,0,0,0

SQL> INSERT INTO t SELECT to_date('17-DEC-1980 12:13:14','DD-MON-YYYY HH24:MI:SS') FROM dual;

1 row created.

SQL> COMMIT;

Commit complete.

SQL> SELECT DUMP(col) FROM t;

DUMP(COL)
--------------------------------------------------------------------------------
Typ=12 Len=7: 120,116,3,17,18,6,55
Typ=12 Len=7: 119,180,12,17,13,14,15

SQL> 
```

如您所见，在表中存储日期时，它使用**类型 12**。第二种**类型 13**用于使用日期函数将字符串文字转换为日期或当内部日期函数（如`SYSDATE`/ ）返回日期时`CURRENT_DATE`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T15:46:22.410

来自[http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#sthref151的手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#sthref151)

> *对于每个 DATE 值，Oracle 存储以下信息：年、月、日、小时、分钟和秒*

所以显然它没有存储一个时代值，这也得到[了手册的这一章的](http://docs.oracle.com/cd/E11882_01/server.112/e25789/tablecls.htm#CBBGJHJC)确认：

> *数据库在内部将日期存储为数字。日期存储在每个 7 字节的固定长度字段中，分别对应世纪、年、月、日、小时、分钟和秒***

# javascript - Javascript清除选择框的内容

> ID：13568194
> 
> 赞同：5
> 
> 时间：2012-11-26T15:43:08.373
> 
> 标签：javascript

作为填充选择框功能的一部分，我将清除填充选择框的内容，然后将选项插入一个空框。虽然选择框没有被正确清除并且很多选项没有被删除。我正在使用以下代码来清除选择框的内容：

```
for(var i = 0; i < document.getElementById(selectbox).options.length; i++)
    document.getElementById(selectbox).options[i] = null; 
```

为什么不从选择框中删除所有选项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T15:48:03.917

你可以简单地做

```
 document.getElementById(selectbox).options.length = 0; 
```

您也可以像您所做的那样一个一个地删除元素，但是您必须考虑`options`迭代时更改的长度这一事实。迭代时删除的正确方法是

```
for (var i=document.getElementById(selectbox).options.length; i-->0;)
    document.getElementById(selectbox).options[i] = null; 
```

但是第一个解决方案当然更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:54:50.327

```
var selectbox = document.getElementById(selectbox);

document.getElementById("emptyBox").innerHTML = selectbox.innerHTML;
selectbox.innerHTML = ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-20T00:59:08.140

作为清除选择列表的所有选项的另一种更简洁的方法，我们可以利用 JavaScript 的错误值零，然后简单地从 Dom 中删除该选项：

```
function clearSelectList(list) {
    // when length is 0, the evaluation will return false.
    while (list.options.length) {
        // continue to remove the first option until no options remain.
        list.remove(0);
    }
} 
```

用法将是：

```
var list = document.getElementById("selectbox");
clearSelectList(list); 
```

或者更简洁地说：

```
clearSelectList(document.getElementById("selectbox")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-17T14:10:15.593

此示例使用新一代 JavaScript。我建议使用。

```
[...cbrCenterSelectbox.options].forEach(option => option.remove()) 
```

# python - 如何从 Python 中的给定 URL 中提取主机名？

> ID：13568198
> 
> 赞同：0
> 
> 时间：2012-11-26T15:43:18.177
> 
> 标签：python

如何从中提取主机名：`hostname:/file_name`？例如`ngs.pradhi.com:/upload`，我想从中提取`ngs.pradhi.com`并通过 ssh.connect 对其进行测试。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:44:52.783

您示例中的字符串不是 URL，因此您将无法使用标准 URL 模块 ( `urlparse`) 对其进行解析。以下是您可以手动操作的方法：

```
In [43]: path = 'ngs.pradhi.com:/upload'

In [44]: path.split(':')[0]
Out[44]: 'ngs.pradhi.com' 
```

对于 SSH，请查看[`paramiko`](http://www.lag.net/paramiko/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:02:40.203

您应该考虑使用该[`urlparse`](http://docs.python.org/2/library/urlparse.html)模块：

> 该模块定义了一个标准接口来分解组件中的统一资源定位符 (URL) 字符串（寻址方案、网络位置、路径等），将组件组合回 URL 字符串，并将“相对 URL”转换为给定“基本 URL”的绝对 URL。</p>

例子：

```
>>> import urlparse
>>> urlparse.urlparse('http://ngs.pradhi.com/upload')
ParseResult(scheme='http', netloc='ngs.pradhi.com', path='/upload', params='', query='', fragment='') 
```

# ruby-on-rails - 嵌套表单 fields_for text_area 未显示

> ID：13568199
> 
> 赞同：0
> 
> 时间：2012-11-26T15:43:35.670
> 
> 标签：ruby-on-rails, nested-attributes

我有三层模型：

用户 has_many 询问 has_many 结果

在主页上，我希望用户能够在他们将结果标记为完成时将结果添加到他们的询问中。我正在尝试使用嵌套表单在 Ask 表单中显示结果描述，该表单还会更新完成标志和完成日期。

像这里的其他用户/问题一样，我无法在屏幕上显示嵌套表单。我已按照其他问题的说明进行操作，但嵌套字段仍未显示。我想知道是否有人可以在下面的代码中发现问题？

**询问模型**

```
class Ask < ActiveRecord::Base

  attr_accessible   :category, :description, :done, :followed_up, 
                    :helper, :public, :date_done, :date_followed_up, :user_id, :outcomes_attributes
  belongs_to :user, counter_cache: true
  has_many :outcomes
  accepts_nested_attributes_for :outcomes

end 
```

**询问控制器**

```
class AsksController < ApplicationController

  def new
    @ask = current_user.asks.build(params[:ask])
    @ask.outcomes.build
  end

  def create
    @ask = current_user.asks.build(params[:ask])
    if @ask.save!
      respond_to do |format|
        format.html { redirect_to edit_ask_path(@ask) }
        format.js
      end
    else
      flash[:error] = "Something is wrong. The Ask was not saved..."
    end
  end

  def edit
    @ask = current_user.asks.find(params[:id])
  end

  def update
    @ask = current_user.asks.find(params[:id])
    @ask.outcomes.build
    @ask.update_attributes(params[:ask])
    respond_to do |format|
      format.html { redirect_to edit_ask_path(@ask) }
      format.js
    end
  end
end 
```

**主页控制器** *（此表单在主页上）*

```
class StaticPagesController < ApplicationController

  def home
    if signed_in?
      @ask = current_user.asks.build(params[:ask])
      @ask.outcomes.build
    end
  end 
```

**表单部分呈现在首页**

```
<% if current_user.asks.any? %>
  <ul id="ask-list-items">
    <% current_user.asks.where(done: false).each do |a| %> 
          <%= form_for(a) do |f| %>
            <li><%= a.description %></li>
            <%= f.hidden_field :date_done, value: Date.today %>
            <%= f.hidden_field :done, :value=>true %>
            <%= f.submit "Mark as done", class: "btn btn-small hidden done_btn", id: "a-#{a.id}-done" %>

            <%= f.fields_for :outcomes do |builder| %> # << These fields are not showing up
              <%= builder.text_area :description, placeholder: "Describe the outcome...", id: "ask-message" %>
            <% end %>
            <%= f.submit "Save outcome", class: "btn btn-primary" %>
          <% end %>
    <% end %>
  </ul>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T23:09:47.883

在使用符号时`form_for`，`fields_for`Rails 会尝试使用同名的实例变量，例如`@outcomes`for `:outcomes`。所以尝试（对于现有的结果）：

```
<% @outcomes = a.outcomes %> 
```

在与`f.fields_for :outcomes...`.

对于新的结果：

```
<% @outcomes = a.outcomes.build %> 
```

（最后一个对问题所有者的贡献）

# xaml - xml代码不起作用-c#

> ID：13568201
> 
> 赞同：0
> 
> 时间：2012-11-26T15:43:49.167
> 
> 标签：xaml, c#-4.0

我有以下代码：

```
<DataTemplate DataType="{x:Type abc}">
                <StackPanel Orientation="Horizontal">
                    <CheckBox Margin="0,0,3,0" x:Name="CheckBox">
                        <CheckBox.IsChecked>
                            <Binding Path="IsSelected"
                                     Mode="TwoWay">
                                <Binding.RelativeSource>
                                    <RelativeSource Mode="Template" />
                                </Binding.RelativeSource>
                            </Binding>
                        </CheckBox.IsChecked>
                    </CheckBox>                                    
                    <TextBlock Text="{Binding}"
                               Margin="0,0,10,5" />
                    <TextBlock Text="{Binding Channel}"
                               Margin="7,0,0,0"
                               Visibility="{Binding Path=IsChannelVisible,ElementName=View, Converter={StaticResource BooleanToVisibile}}" />
                </StackPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Valid}" Value="true">
                        <Setter TargetName="CheckBox" Property="Foreground" Value="#000000"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Valid}" Value="false">
                        <Setter TargetName="CheckBox" Property="Foreground" Value="#999999"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
</DataTemplate> 
```

我想要实现的是更改复选框文本的颜色。但是上面的代码不起作用。谁能帮我解决这个问题？

来自 Tilak 的尝试代码：

```
<ControlTemplate x:Key="Template"
                             TargetType="ListViewItem">
                <StackPanel Orientation="Horizontal">
                    <CheckBox Margin="7,0,0,0" Foreground={Binding Valid, Converter={StaticResource ValidToColorConverter}} 
                              x:Name="CheckBox">
                        <CheckBox.IsChecked>
                            <Binding Path="IsSelected"
                                     Mode="TwoWay">
                                <Binding.RelativeSource>
                                    <RelativeSource Mode="Parent" />
                                </Binding.RelativeSource>
                            </Binding>
                        </CheckBox.IsChecked>
                    </CheckBox>                    
                    <ContentPresenter />
                    <DataTemplate.CheckBox>
                        <Intellivu:ValidToColorConverter x:Key="ValidToColorConverter" />
                    </DataTemplate.CheckBox>
                </StackPanel>
            </ControlTemplate> 
```

这不工作？难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:58:18.393

您可以使用转换器并直接绑定到 Foreground 属性。

按照以下步骤操作

创建 ValidToColorConverter

```
public class ValidToColorConverter : IValueConverter
{
    // This converts the DateTime object to the string to display.
    public object Convert(object value, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
      bool valid = value as bool;
      return valid ? Colors.Black : new SolidColorBrush(Colors.FromArgb(255,99,99,99));
    }

    // No need to implement converting back on a one-way binding 
    public object ConvertBack(object value, Type targetType, 
        object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在控件对应的资源中添加ValidToColorConverter作为静态资源

```
 <DataTemplate.Resources>
  <local:ValidToColorConverter x:Key="ValidToColorConverter" />
</DataTemplate.Resources> 
```

注意 - 应将本地添加到页面命名空间中（对应于定义转换器的命名空间）

请参阅复选框中的转换器

```
<CheckBox Margin="0,0,3,0" Foreground={Binding Valid, Converter={StaticResource ValidToColorConverter}} x:Name="CheckBox"> 
```

# visual-c++ - 输出 cvCalibrateCamera 的参数

> ID：13568205
> 
> 赞同：0
> 
> 时间：2012-11-26T15:43:52.117
> 
> 标签：visual-c++, opencv, camera-calibration

我正在使用 OpenCV calibrateCamera 函数来提取相机的内在末端外在参数。我对外部矩阵（旋转和平移）有一个大问题，因为旋转矩阵应该是一个 3x3 矩阵，它只是一个 3x1。有人知道我为什么有这个输出或者我该如何使用它？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:34:28.807

你得到一个向量，它实际上是你的旋转的[轴角表示](http://en.wikipedia.org/wiki/Axis-angle)。您可以使用 Rodrigues 公式将其转换为 3x3 旋转矩阵：

[维基百科上的罗德里格斯](http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula)

[罗德里格斯使用 OpenCV](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#rodrigues)

# ruby-on-rails - “rails new”命令出错（使用 rbenv）

> ID：13568208
> 
> 赞同：1
> 
> 时间：2012-11-26T15:43:59.823
> 
> 标签：ruby-on-rails, ruby, sqlite, rbenv

我安装了 rbenv、ruby 和 rails，但是创建新 rails 项目的命令导致 sqlite 出现异常。

```
rails new first_app
.
.
.
Using sass (3.2.3) 
Using sass-rails (3.2.5) 
Installing sqlite3 (1.3.6) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/home/alundgren/.rbenv/versions/1.9.3-p327/bin/ruby extconf.rb 
checking for sqlite3.h... no
sqlite3.h is missing. Try 'port install sqlite3 +universal'
or 'yum install sqlite-devel' and check your shared library search path (the
location where your sqlite3 shared library is located).
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/alundgren/.rbenv/versions/1.9.3-p327/bin/ruby
    --with-sqlite3-dir
    --without-sqlite3-dir
    --with-sqlite3-include
    --without-sqlite3-include=${sqlite3-dir}/include
    --with-sqlite3-lib
    --without-sqlite3-lib=${sqlite3-dir}/lib
    --enable-local
    --disable-local

Gem files will remain installed in /home/alundgren/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6 for inspection.
Results logged to /home/alundgren/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling. 
```

我试过安装`sqlite`gem 和 rehashing `rbenv`，但同样的错误。有没有人对如何解决这个问题有任何想法，确切的宝石名称是什么等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:53:57.687

我有同样的问题，我在 ubuntu 上安装了 sqlite 包：

```
apt-get install libsqlite3-dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T10:00:49.110

You do not seem to have *sqlite* installed on your box. The gem will not installed without the underlying being present.

Please do:

*   macosx: `brew install sqlite`
*   enterprise linux: `sudo yum install libsqlite3-dev`
*   ubuntu: `sudo apt-get install libsqlite3-dev`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:51:24.083

问题是您缺少编译 mysql 适配器所需的头文件。该错误提示“尝试'port install sqlite3 +universal'或'yum install sqlite-devel'并检查您的共享库搜索路径（您的sqlite3共享库所在的位置）”。我会先这样做，因为这将确保您的机器上有正确的头文件。一旦你有了它们，你可能必须向编译器指定文件的位置，“--with-sqlite3-include”指令可能会解决问题。

# android - Android：从登录活动返回主要活动 Onbackkeypressed

> ID：13568209
> 
> 赞同：0
> 
> 时间：2012-11-26T15:44:01.487
> 
> 标签：android, android-intent

当我在登录活动中按后退按钮时遇到问题，它会将我带回主要活动（在用户从主要活动中注销后）

我努力了 ..

`intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);`

请帮忙 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:09:38.167

重写[onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)方法并自己处理所需的“动作/意图”怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:49:04.357

为了帮助您，您应该向我们提供一些代码。但是在查看了您的问题描述后，您可能会在用户注销后开始一项新活动。然后当用户点击后退按钮时，他会回到上一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:49:45.633

`finish()`确保在开始登录活动后调用 MainActivity

# binary - 如何将 gdb 中 x 命令的输出转储到文件中？

> ID：13568215
> 
> 赞同：1
> 
> 时间：2012-11-26T15:44:36.807
> 
> 标签：binary, gdb

我正在检查 gdb 中的一些二进制数据，使用类似`x 450bc`查看它的 450 个连续字节的方法。有没有一种简单的方法可以将此输出以原始二进制形式转储到文件中，以便通过电子邮件向发件人查询？

我尝试了类似`dump binary filename x/450bc`的方法，但没有按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:20:05.453

也许你的意思是......

```
(gdb) p $pc
$1 = (void (*)()) 0x4004a7 <main+11>
(gdb) p $pc + 450
$2 = (void (*)()) 0x400669
(gdb) dump binary memory ./file $1 $2 
```

取决于起始地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:45:09.543

这是您正在寻找的命令的帮助：

```
(gdb) help dump binary memory
Write contents of memory to a raw binary file.
Arguments are FILE START STOP.  Writes the contents of memory
within the range [START .. STOP) to the specified FILE in binary format. 
```

这是如何使用此命令的示例：

```
(gdb) dump binary memory my_binary_file.bin 0x22fd8a 0x22fd8a+450 
```

# linux - 如何在 Linux 服务器上加密我的 Web 应用程序

> ID：13568222
> 
> 赞同：1
> 
> 时间：2012-11-26T15:45:00.287
> 
> 标签：linux, security, encryption

我的公司想在 LAN 网络上为客户的 Web 应用程序进行私有部署。我希望他们能够访问数据库，因为它是他们的所有数据，但我不希望他们能够访问代码，因为它具有我们公司的专有性和各种帐户的访问令牌。如果它在一个遥远的服务器上，限制他们的访问很容易，但由于他们有物理机器，我担心他们会破解硬盘。

有没有办法加密我的应用程序，但在运行时仍能正常运行？如果是的话，如何以及有什么工具可以做到这一点？如果重要的话，我正在使用 Rails 和 Apache Passenger。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:07:05.483

你需要找到一个字节码编译器。一个很好的例子是[Ruby 编码器](http://rubyencoder.com/)

# android - ArrayAdapter IndexOutOfBoundsException

> ID：13568223
> 
> 赞同：4
> 
> 时间：2012-11-26T15:45:10.353
> 
> 标签：android

我正在尝试通过 onclick 操作从列表视图中删除一个项目。但我得到了 arrayindexoutofbound 异常。我从 11 大小的数组中删除了项目，但它仍在尝试获取 11\. 项目。

```
 public void onClick(View v) {
            data.remove(getItemIndexByID(filteredData.get(position).getID()));
            filteredData.remove(position);      
            notifyDataSetChanged();

            flipMenu(lastHolder, 1);
            showPopup("Item Deleted"); 

        } 
```

日志：

```
 11-26 17:16:32.159: E/AndroidRuntime(26991): FATAL EXCEPTION: main
11-26 17:16:32.159: E/AndroidRuntime(26991): java.lang.IndexOutOfBoundsException: Invalid index 10, size is 10
11-26 17:16:32.159: E/AndroidRuntime(26991):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at java.util.ArrayList.get(ArrayList.java:304)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at com.innovationbox.passlocker.adapters.ListViewAdapter.getView(ListViewAdapter.java:100)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.widget.AbsListView.obtainView(AbsListView.java:2143)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.widget.ListView.makeAndAddView(ListView.java:1831)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.widget.ListView.fillDown(ListView.java:674)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.widget.ListView.fillGap(ListView.java:638)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4930)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:4087)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.view.Choreographer.doFrame(Choreographer.java:531)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.os.Handler.handleCallback(Handler.java:725)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.os.Looper.loop(Looper.java:137)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at android.app.ActivityThread.main(ActivityThread.java:5039)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at java.lang.reflect.Method.invokeNative(Native Method)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at java.lang.reflect.Method.invoke(Method.java:511)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-26 17:16:32.159: E/AndroidRuntime(26991):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T17:12:42.627

我注意到 ArrayAdapter 的 getcount 方法总是返回相同的值，我像这样覆盖了 getCount() 方法，它可以工作。

```
@Override
public int getCount() {
    return filteredData.size();
} 
```

# qt - 在 QML 中嵌入 Latex 的可能性

> ID：13568233
> 
> 赞同：6
> 
> 时间：2012-11-26T15:45:50.003
> 
> 标签：qt, latex, qml, text-rendering

我正在做一个类似于[这个](http://blog.qt.digia.com/blog/2011/05/30/a-qml-presentation-system/)的 QML（带有 C++ 后端）的演示系统。

我希望能够包含一些 Latex 代码来显示一些数学（只需要最低的 Latex 功能，例如总和、分数、超级和子带以及数学字体）。

我看到以下可能性：

*   使用*latex2e*：
    1.  将 Latex 代码编译为 DVI 文档（带`latex`）
    2.  将 DVI 转换为 SVG（使用`dvisvgm`）
    3.  使用`Image`QML 显示这个（它也支持 SVG）

*   使用*MathJax*：
    1.  将 Latex 代码包装在一个小的 HTML 文件中 + 包含 MathJax JS 库
    2.  `WebKit`使用QML显示此内容

*   自定义解决方案（C++）：
    1.  编写或包含现有的最小 Latex 数学解析器
    2.  `QDeclarativeItem`用自定义绘画写一个

还有其他我看不到的解决方案吗？我更喜欢第一个解决方案，因为第二个听起来太重了，第三个太难了。

**我看到数学公式的基线**存在以下问题：我希望能够包含内联公式（在一段内）。目前，文本段落是使用 QML Text 元素呈现的。是否有可能在具有*指定基线*的 Text 元素（可能使用 HTML img 元素）中包含图像？另外，如何确定渲染的 Latex 文档的基线？

注意：预渲染 Latex 代码的时间没有问题。我将缓存已经渲染的公式，因此在演示文档中包含的每个公式上调用`latex`+应该没有问题。`dvisvgm`

另请注意，我使用了预处理器（我不手动编写 QML 代码，而是生成它）。所以我不需要 Latex 代码的 QML 元素，但我可以生成一个带有 Image 元素的 QML 代码片段（对于第一个解决方案）。这应该简化嵌入渲染图像。

使用内联 Latex 时，我也不需要支持包装公式。（乳胶在编写内联公式时会这样做，但我只使用我不想被包装的小公式。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:36:12.533

我认为这是三个不错的选择，我想不出任何其他方法来做到这一点。

听起来您需要将公式与某些文本段落对齐，因此我认为选项 2 是一个很好的方法。

使用 WebKit 组件并不难。我不确定您所说的“太重”是什么意思。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T04:51:55.000

另一种选择是使用富文本 QML 组件，它也支持图像（例如 TextEdit）而不是图像 - 然后您可以将它们与普通文本内联。

# android - 如何限制在 PhoneGap 上捕获视频的持续时间？

> ID：13568240
> 
> 赞同：2
> 
> 时间：2012-11-26T15:46:20.487
> 
> 标签：android, ios, cordova, jquery-mobile, camera

我尝试使用 PhoneGap API 的 CaptureVideoOptions 来限制捕获视频的持续时间。但 Android 和 iOS 不支持 duration 参数。

我使用这段代码：

```
navigator.device.capture.captureVideo(onSuccess, onFail , {duration:30}); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T22:56:11.687

phonegap V3.3.0 支持持续时间选项。我已经在插件的 CDVCapture.m（插件的本机功能实现类）中验证了它。

如果您仍然无法工作，您可以使用以下插件“VideoCapturePlus-PhoneGap-Plugin” - [https://github.com/EddyVerbruggen/VideoCapturePlus-PhoneGap-Plugin](https://github.com/EddyVerbruggen/VideoCapturePlus-PhoneGap-Plugin)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-26T08:54:42.327

[http://docs.phonegap.com/en/2.2.0/cordova_media_capture_capture.md.html](http://docs.phonegap.com/en/2.2.0/cordova_media_capture_capture.md.html)

转到此链接，然后滚动..

写的很清楚，安卓、黑莓和IOS都不支持。

> **安卓怪癖**
> 
> 不支持持续时间参数。不能以编程方式限制记录长度。不支持 mode 参数。不能以编程方式更改视频大小和格式；但是，设备用户可以更改这些参数。默认情况下，视频以 3GPP ( `video/3gpp`) 格式录制。
> 
> **黑莓网络工程怪癖**
> 
> 不支持持续时间参数。不能以编程方式限制记录长度。不支持 mode 参数。不能以编程方式更改视频大小和格式；但是，设备用户可以更改这些参数。默认情况下，视频以 3GPP ( `video/3gpp`) 格式录制。
> 
> **iOS 怪癖**
> 
> 不支持limit参数。每次调用都会录制一个视频。不支持持续时间参数。不能以编程方式限制记录长度。不支持 mode 参数。视频大小和格式不能以编程方式更改。默认情况下，视频以 MOV ( `video/quicktime`) 格式录制。

# jar - 我在哪里可以获得 ArcSDE 10 的 jsde_sdk.jar？

> ID：13568246
> 
> 赞同：2
> 
> 时间：2012-11-26T15:46:35.763
> 
> 标签：jar, metadata, gis, geospatial

我的环境没有问题，`Geonetwork` `harvesting`元数据来自`ArcSDE` *9.3*。它是通过以下库完成的，从 ArcSDE 安装复制到 Geonerwork`lib`目录：

*   `jsde_sdk.jar`
*   `jpe_sdk.jar`
*   `concurrent.jar`
*   `icu4_3_2.jar`

升级到`ArcSDE`*10*后，收割停止工作。

这当然是因为我在*9.3*`*.jar`版本中使用 s ，同时拥有*v10*，但新安装没有那些s。 **`ArcSDE``jar`**

 **有谁知道在哪里可以得到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-22T20:14:54.303

我意识到这是一个老问题，但它仍然出现了很多。如果您当前对 Esri 进行维护，您可以向您的客户经理请求物理媒体。它们不再可在客户服务门户或 MyEsri 上下载。**

# java - 如何将对象二进制（反）序列化为/形成字符串？

> ID：13568248
> 
> 赞同：12
> 
> 时间：2012-11-26T15:46:48.510
> 
> 标签：java, string, serialization

我需要将对象序列化为字符串并反序列化。

我在 stackoverflow 上阅读了 sugestion 并编写了以下代码：

```
class Data implements Serializable {
int x = 5;
int y = 3;   
}

public class Test {
public static void main(String[] args) {

    Data data = new Data();

    String out;

    try {
        // zapis
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);

        oos.writeObject(data);

        out = new String(baos.toByteArray());
        System.out.println(out);

        // odczyt.==========================================

        ByteArrayInputStream bais = new ByteArrayInputStream(out.getBytes());

        ObjectInputStream ois = new ObjectInputStream(bais);

        Data d = (Data) ois.readObject();

        System.out.println("d.x = " + d.x);
        System.out.println("d.y = " + d.y);

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }

} 
```

}

但我得到错误：

```
java.io.StreamCorruptedException: invalid stream header: EFBFBDEF
at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:801)
at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
at p.Test.main(Test.java:37) 
```

为什么？我预计：dx = 5 dy = 3

怎么做才好？啊。我不想将此对象写入文件中。我必须以字符串格式保存它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-09T22:37:38.330

说转换为字符串会破坏数据并不完全正确。转换为“UTF-8”是因为它不是双射的（某些字符是 2 个字节，但并非所有 2 字节序列都允许作为字符序列），而“ISO-8859-1”是双射的（字符串的 1 个字符是字节，反之亦然）。

与此相比，Base64 编码不是很节省空间。

这就是我推荐的原因：

```
/**
 * Serialize any object
 * @param obj
 * @return
 */
public static String serialize(Object obj) {
    try {
        ByteArrayOutputStream bo = new ByteArrayOutputStream();
        ObjectOutputStream so = new ObjectOutputStream(bo);
        so.writeObject(obj);
        so.flush();
        // This encoding induces a bijection between byte[] and String (unlike UTF-8)
        return bo.toString("ISO-8859-1");
    } catch (Exception e) {
        e.printStackTrace();
    }
}
/**
 * Deserialize any object
 * @param str
 * @param cls
 * @return
 */
public static <T> T deserialize(String str, Class<T> cls) {
    // deserialize the object
    try {
        // This encoding induces a bijection between byte[] and String (unlike UTF-8)
        byte b[] = str.getBytes("ISO-8859-1"); 
        ByteArrayInputStream bi = new ByteArrayInputStream(b);
        ObjectInputStream si = new ObjectInputStream(bi);
        return cls.cast(si.readObject());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-26T15:51:06.653

使用
`ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());`而不是 `ByteArrayInputStream bais = new ByteArrayInputStream(out.getBytes());`，因为字符串转换会破坏数据（因为编码）。

如果您确实需要将结果存储在 String 中，则需要一种安全的方法将任意字节存储在 String 中。一种方法是对我们进行 Base64 编码。

一种完全不同的方法是不对此类使用标准的 Java 序列化，而是创建您自己的数据到/从字符串转换器。

# java - 不使用正则表达式的 Java 字符串解析

> ID：13568249
> 
> 赞同：1
> 
> 时间：2012-11-26T15:46:50.630
> 
> 标签：java, string, parsing

从服务器，我得到以下形式的字符串：

```
String x = "fixedWord1:var1 data[[fixedWord2:var2 fixedWord3:var3 data[[fixedWord4]    [fixedWord5=var5 fixedWord6=var6 fixedWord7=var7]]] , [fixedWord2:var2 fixedWord3:var3 data[[fixedWord4][fixedWord5=var5 fixedWord6=var6 fixedWord7=var7]]]] fixedWord8:fixedWord8"; 
```

（只有空格分隔成组的 word-var 对）稍后，我想将它们存储在 a `Hashmap`、 like`myHashMap.put(fixedWord1, var1);`等中。

**问题：**
在第一个*`"data[......]"`*-tag里面，其他-tag的个数*`"data[..........]"`*是可变的，事先不知道字符串的长度。

我不知道如何在不诉诸 的情况下处理此类字符串`String.split()`，我们的分配任务提供者（大学）不鼓励这样做。

我在互联网上搜索过，找不到合适的网站来解释这些事情。
如果有经验的人能给我一些网站链接或类似*“图表计划”*之类的东西，这样我就可以编写一些代码，那将是非常有帮助的。

**编辑：** 字符串出错（*off-topic-begin* "please don't lynch" *off-topic-end*），正确的字符串是（更改为 fixedWord7=var7 ---to---> fixedWord7=[var7]）：

```
String x = "fixedWord1:var1 data[[fixedWord2:var2 fixedWord3:var3 data[[fixedWord4]    [fixedWord5=var5 fixedWord6=var6 fixedWord7=[var7]]]] , [fixedWord2:var2 fixedWord3:var3 data[[fixedWord4][fixedWord5=var5 fixedWord6=var6 fixedWord7=[var7]]]]] fixedWord8:fixedWord8"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:32:57.860

问题不是很清楚，但可能这样的事情对你有用：

```
Pattern p = Pattern.compile("\\b(\\w+)[:=]\\[?(\\w+)");
Matcher m = p.matcher( x );
while( m.find() ) {
   System.out.println( "matched: " + m.group(1) + " - " + m.group(2) );
   hashMap.put ( m.group(1), m.group(2) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:35:28.187

我假设您的字符串遵循相同的模式，其中包含“数据”和“[”、“]”。并且变量名称/值不会包含这些字符串

1.  从原始字符串中删除字符串“data[”、“[”、“]”和“,”

    ```
    replaceAll("data[", "")
    replaceAll("[", "")
    etc 
    ```

2.  用空格分隔字符串：“”通过使用 StringTokenizer 或按字符循环遍历字符串。

3.  然后你会得到像这样的字符串数组

    ```
    fixedWorld1:var1
    fixedWorld2:var2
    ......
    fixedWorld4
    fixedWorld5=var5
    ...... 
    ```

4.  然后再次用“：”或“=”分隔子字符串。并将名称/值放入地图

# javascript - Slickgrid - 避免 jquery 冲突

> ID：13568252
> 
> 赞同：1
> 
> 时间：2012-11-26T15:47:01.397
> 
> 标签：javascript, jquery, slickgrid

我在一个我还必须使用 jquery 1.8 的网站上使用 slickgrid 和 jquery 1.7。如果我只包含 jquery 1.8。列大小调整不起作用。

因此我在问 slickgrid 是否支持 jquery 1.8。或者 slickgrid 中是否有一个选项来告诉 slickgrid 要使用哪个 jquery 版本。

这个问题也在[这个](https://groups.google.com/forum/?fromgroups=#!topic/slickgrid/aqkI0bG-UWw)谷歌组线程中被问到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:50:04.493

有[解决此问题的拉取请求](https://github.com/mleibman/SlickGrid/pull/462)。这是一个单行修复……超出我的理解，为什么它尚未被主分支接受。

# android - 如何在使用 achartengine 库时以相同或仅颜色的饼图显示图例

> ID：13568253
> 
> 赞同：0
> 
> 时间：2012-11-26T15:47:00.597
> 
> 标签：android, achartengine

我在我的应用程序中显示饼图。我想增加和减少饼图中图例的大小。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:50:48.867

图例项的颜色与切片颜色相同。你无法改变这一点。

# javascript - jquery 事件无法正常工作

> ID：13568255
> 
> 赞同：1
> 
> 时间：2012-11-26T15:47:06.077
> 
> 标签：javascript, jquery

我有一个发票表格和一个 jquery 函数。在发票中，如果我输入的数量大于可用数量，那么我必须提醒用户。

我的问题是：让最大数量为 5，如果我输入数据为 7（一位数>最大可用数量），那么我的代码工作正常。但是，如果我输入两个 digigist 号码，例如。17（两个digists>最大可用数量）然后我的警报框没有出现。我的意思是 onkeyup 我的功能仅适用于单个数字。

我怎样才能让它发生？请帮忙。

```
 $('input[name="quantity"]').keyup(function() 
       {  
    //problem is here
        var $tr = $(this).closest("tr");
        var unitprice = $tr.find('input[name^="unitprice"]').val();

        var q = $tr.find('input[name^="quantity"]').val();
        var cq = $tr.find('input[name^="checkquantity"]').val();

        if(q>cq)
      {
      alert("Error: Quantity value exceeds then available quantity..Max Quantity is "+cq);
          //this works fine only if single digit is entered in textbox quantity
       }

         //----below are some other stuffs -these are working fine
        $tr.find('input[name^="sprice"]').val($(this).val() * unitprice); 
        var totalPrice = 0;
        $('input[name="sprice"]').each(function()
        {
            totalPrice += parseFloat(this.value);
            $('[name=subtotal]').val(totalPrice);
        });  
    });  
    --------------
    ------------
   // Form containing the above textboxes
        <input type="submit" id="submitbtnId" value="Save"/>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:49:41.690

`q > cq`正在比较 2 个字符串，这不是您想要的。您正在尝试比较这些字符串的数值。

改用这个：

```
if ( +q > +cq)
{
    // alert your error
} 
```

请注意，通过在变量前面加上`+`符号，您将它们转换为数字。

* * *

更好的是，在获得值后立即将它们转换为数字：

```
var $tr = $(this).closest("tr");
var unitprice = +$tr.find('input[name^="unitprice"]').val();

var q = +$tr.find('input[name^="quantity"]').val();
var cq = +$tr.find('input[name^="checkquantity"]').val();

if ( q > cq )
{
    alert("Error: Quantity value exceeds then available quantity..Max Quantity is " + cq);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:49:33.133

您需要使用`parseInt()`以确保您比较的是整数，而不是字符串：

```
if (parseInt(q, 10) > parseInt(cq, 10)) {
    /* Rest of your code */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:50:31.090

您的值被比较为*string*。如果要比较数字，请使用：

`parseInt()`或者`parseFloat()`

或者

`[..].val() * 1`，但如果没有数字，这将返回“NaN”，而 parseInt() 和 parseFloat() 将返回 0

# android - Android：如何动态自定义 GridView 布局？

> ID：13568256
> 
> 赞同：0
> 
> 时间：2012-11-26T15:47:15.080
> 
> 标签：android, android-layout, android-gridview

我创建了一个生成 GridView 的应用程序。每个网格包含框。生成的框数取决于从数据库中检索到的名称的数量。

这是我的代码：main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

<GridView 
        android:id="@+id/gridview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:numColumns="auto_fit"
        android:columnWidth="90dp"
        android:horizontalSpacing="10dp"
        android:verticalSpacing="10dp"
        android:gravity="center"
        android:stretchMode="columnWidth" 
        android:orientation="horizontal"
        android:layout_marginTop="100dp"
 /> 
```

布局1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="10dp"
    android:layout_gravity="center"
>

<ImageView
    android:id="@+id/flag"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:src="@drawable/chair"
/>

</LinearLayout> 
```

main.class 的一部分

```
ArrayList<HashMap<String, String>> take = new ArrayList<HashMap<String, String>>();

try 
{
      JSONObject jArray = new JSONObject(result);

            JSONArray stud_info = jArray.getJSONArray("info");
            ca_list = new ArrayList<ViewGridObject>();

            for (int i = 0; i < info.length(); i++) 
            {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = stud_info.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("flag", Integer.toString(flags[0]));
                take.add(map);

                ca_list.add(new ViewGridObject(R.drawable.chair));
            }

            myadapter =  new AdapterViewGrid(main.this, list);
            gridView.setAdapter(myadapter);

        } catch (JSONException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

目前，它显示像这样的 GridView。![当前生成的 GridView](../Images/3e442919c5c5388d6d0a31639eceaf22.png)

但我想动态自定义gridview的布局。我希望它是这样的..

![所需的 GridView](../Images/9d60834b7f58333f989728d3d17c3900.png)

请。帮助..

# php - 仅使用给定的文件名在上传时验证文件名

> ID：13568258
> 
> 赞同：0
> 
> 时间：2012-11-26T15:47:21.007
> 
> 标签：php, codeigniter, phpexcel

上传例如 xyz.xlsx 为这个特定文件而不是其他文件时，我如何验证文件名？因此，当且仅当文件名为 xyz 且扩展名为 xlsx“xyz.xlsx”时，该文件才会被上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:52:43.693

[http://us2.php.net/manual/en/features.file-upload.post-method.php](http://us2.php.net/manual/en/features.file-upload.post-method.php)

当您使用 PHP 进行上传时，您会得到一个 $_FILES 数组（有点像 $_POST）。您将在 $_FILES['userfile']['name'] 中找到原始文件名。正如 MyGlass 在他的回答中所建议的那样，您可以验证这一点。

```
if($_FILES['uploadedfile']['name'] == "xyz.xlsx") 
```

此外，codeignitor 提供了一个文件上传类，可用于消除此处的一些文件上传样板：http: [//ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

使用 $this->upload->data() 获取带有文件名信息的数组（键是'file_name'）。

```
$data = $this->upload->data();
if($data['file_name'] == "xyz.xlsx") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:49:40.660

如果我了解您要查找的内容，请获取文件名并进行测试。

例子： `if($_FILES['uploadedfile']['name'] == "xyz.xlsx")`

# emacs - 永久改变一段代码的缩位显示状态？

> ID：13568262
> 
> 赞同：3
> 
> 时间：2012-11-26T15:47:30.947
> 
> 标签：emacs

在 Emacs Lisp 的 *scratch* 缓冲区中，当您评估了一个计算结果为复杂 Lisp 形式的表达式后，该形式是“缩写的”，即一些长列表或其内部部分被省略号替换。看起来像：

```
(let* ((--3 (make-hash-table)) d c (--5 (let ... ... ...)) (--6 0) (--0 (make-
hash-table)) b a (--1 0) --7) (catch (quote --2) (maphash (lambda ... ... ... 
... ... ... ...) --0)) (nreverse --7)) 
```

与扩展版本：

```
(let* ((--3 (make-hash-table)) d c (--5 (let (--4) (maphash (lambda (k v) 
(setq --4(cons k --4))) --3) (nreverse --4))) (--6 0) (--0 (make-hash-table)) 
b a (--1 0) --7) (catch (quote --2) (maphash (lambda (k v) (when (or (> --6 
150) (> --1 100)) (throw (quote --2) nil)) (setq a k b v) (setq c (car --5) d 
(gethash (car --5) --3) --5 (cdr --5)) (incf --6) (setq --7 (cons (list (cons 
a b) (cons c d)) --7)) (message "a: %s, b: %s, c: %s, d: %s" a b c d)) --0)) 
(nreverse --7)) 
```

`RET`如果我在展开或折叠状态下按下，它会将状态切换回来。显然，我的第一反应是尝试格式化输出，所以我按下`RET`! 然后它会折叠或扩展，取决于它所处的状态。如果我复制并粘贴整个内容，那么它会被视为普通文本，但有没有更快的方法呢？即我想永久扩展它，无需复制粘贴。

我找不到切换状态的函数（也许我调用不正确）。我花了一段时间才意识到无论如何都可以切换它（是的，它会在工具提示中显示它，但是谁在 Emacs 中使用鼠标？）。

另外，总的来说，我喜欢这个想法，是否也可以将其应用于其他语言？我在哪里可以阅读有关此功能的更多信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:08:32.503

两个变量控制结果的打印`eval-expression`。在`*scratch*`缓冲区中：

```
eval-expression-print-length
eval-expression-print-level 
```

您可以将它们设置为`nil`，结果将始终被扩展。

如果您只想`RET`切换到完全展开（而不是切换），您可以使用此建议去除启用显示状态切换的文本属性：

```
(defadvice last-sexp-toggle-display (after last-sexp-toggle-display-only-long-form activate)
  "After the function is called, check to see if the long form had been displayed, and if so, remove property enabling toggling"
  (save-restriction
    (widen)
    (let ((value (get-text-property (point) 'printed-value)))
      (when value
        (let ((beg (or (previous-single-property-change (min (point-max) (1+ (point)))
                                                        'printed-value)
                       (point)))
              (end (or (next-single-char-property-change (point) 'printed-value) (point)))
              (standard-output (current-buffer))
              (point (point)))
          (if (< (length (nth 1 value)) (length (nth 2 value)))
              (remove-text-properties beg end '(printed-value)))))))) 
```

# c# - 如何对 N 长度数组中的前 M 个元素进行排序？

> ID：13568266
> 
> 赞同：3
> 
> 时间：2012-11-26T15:47:35.350
> 
> 标签：c#, arrays, sorting

我有一些关于在 C# 中对数组进行排序的任务。我一直在尝试我能想到的一切——没有运气。

任务是通过已知的排序算法（插入、选择、冒泡、快速）对整数数组进行排序。问题是，我必须**只**对最小的`M`元素进行排序。

示例：我有一个包含 7 个元素的数组，`2 9 8 3 4 15 11`我需要对最小的 3 个元素进行排序，以便我的数组变为`2 3 4 9 8 15 11`.

请帮忙，我似乎无法在 SO 中找到任何东西，也无法通过 Google 找到任何东西。我不要求为我做所有的算法，我只需要其中一个来掌握这怎么可能。

E：谢谢你的想法。我已经查看了您的所有建议，并完成了这样的插入排序：

```
static int[] insertSort(int[] arr, out int swaps, out int checks) {
    int step = 0;
    swaps = 0;
    checks = 0;
    for (int i = 0; i < arr.Length; i++) {
        int min = arr[i], minind = i;
        for (int j = i + 1; j < arr.Length; j++) {
            checks++;
            if (arr[j] < min) {
                min = arr[j];
                minind = j;
            }
        }
        int temp = arr[minind];
        if (step < M) {
            for (int j = minind; j > i; j--) {
                swaps++;
                arr[j] = arr[j - 1];
            }
            arr[i] = temp;
            swaps++;
            step++;
        }
    }
    return arr;
} 
```

交换和检查 - 我的应用程序的要求。

PS我多次看到SO不喜欢为某人*做作业*。这就是为什么我没有要求提供代码，我只是询问了如何实现这一点的想法。

再次感谢那些在这里帮助过我的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:53:11.240

没有看到你的实现，这很难回答。有很多方法可以做到这一点，而且大多数都是直截了当的。

不过，这里有一些想法：

1.  创建一个“临时”数组，仅保存要排序的数字，对其进行排序，然后替换为原始数组（可能是次优解决方案）
2.  使用 for 循环迭代您需要的次数（3 或其他）。这可能是最好的解决方案
3.  在 SO 上发布您的代码，一些天真的人可能会给您一个解决方案，这样您就不必自己做功课。（这是一个懒惰且不合时宜的解决方案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:55:57.337

由于没有效率限制：

1.  将 i 设置为 0。
2.  在未排序的元素中寻找最小值。
3.  将其插入位置 i，移动数组。
4.  增量 i。
5.  重复 M 次。

复杂度为 O(N * M)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:16:13.210

我认为这就是您要查找的内容，这是基于特定索引的数组升序排序示例。

```
 int startIndex=2;
        int endIndex=5;
        int[] elements=new int[7];
        elements[0]=2; 
        elements[1]=9;
        elements[2]=8;
        elements[3]=3;
        elements[4]=4;
        elements[5]=15;
        elements[6]=11;
        for (int a=startIndex-1;a<endIndex;a++){
            for(int b=startIndex-1;b<endIndex;b++){
                if (elements[a]<elements[b]){
                    int temp =elements[a];
                    elements[a]=elements[b];
                    elements[b]=temp;
                }
            }
        }
        for (int c=0;c<elements.Length;c++){
            Console.Write(elements[c]+",");
        } 
```

如果要对它进行降序排序，只需将“<”更改为“>”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:54:11.730

你想看看你需要使用什么排序算法。例如，我们正在使用一个使用 for 循环的方法。大多数情况下你会看到这样的东西

for(int i = 0; i < arrayName.length(); i++) {}

在您的情况下，只需更改 for 循环的参数

for(int i = 0; i < M; i++) {}

其中 M 小于 arrayName.length(); 并且是您想要排序的从头开始的位置数。

阵列的其余部分，未触及，应该保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T15:57:36.043

夫妇的事情。大多数排序算法使用 array.length 作为最大范围。你可以用 m 代替吗？IE

```
for (int i = 0; i < m; i++) 
```

此外，您可以使用前 m 个字符的临时数组，对其进行排序，然后重新分配。

```
int[] temp; 
for (int i = 0; i < m; i++)
{
    temp[i] = realArray[i]; 
}
//sort, then
for (int i = 0; i < m; i++)
{
    realArray[i] = temp[i]; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T16:27:07.610

我会对整个数组进行排序并将其放入另一个数组中。

截断新数组以仅保留最小的 x 元素。从该数组中获取最大的数字（在您的示例中为 4）。

循环遍历初始数组并附加所有更高的数字。

* * *

输入：2 9 8 3 4 15 11
全部排序：2 3 4 8 9 11 15
截断：2 3 4

从此数组中获取最大值 (4)
循环遍历原始数组并追加

2 比 4 高吗？否
9 是否高于 4？是的，追加（我们现在有：2 3 4 9）
8 比 4 高吗？是的，追加（我们现在有：2 3 4 9 8）
3 比 4 高吗？否
4 是否高于 4？否
15 比 4 高吗？是的，追加（我们现在有：2 3 4 9 8 15）
11 比 4 高吗？是的，追加（我们现在有：2 3 4 9 8 11）

*这不是最有效的方法，如果您有重复的号码，可能会导致问题

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-26T16:02:21.500

关于使用 LINQ 的任何处方？

```
int a[] = new int[] {2, 9, 8, 3, 4, 15, 11}; 
const int M = 5;
a = a.Take(M).OrderBy(e => e).ToArray(); // EDIT: Added .ToArray() 
```

# safari - Safari 扩展 - 打开隐藏的选项卡

> ID：13568267
> 
> 赞同：1
> 
> 时间：2012-11-26T15:47:40.070
> 
> 标签：safari, safari-extension

Safari 扩展文档提到可以创建一个隐藏的浏览器选项卡：[https ://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html#//apple_ref/doc/ uid/TP40009977-CH17-SW1](https://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html#//apple_ref/doc/uid/TP40009977-CH17-SW1)

```
browserWindow.openTab()—creates a new tab at any point in the array. The tab can be hidden. 
```

但是，没有进一步提及如何实现它。

# listview - 是否可以使用 jQuery Mobile 在弹出窗口中创建滚动列表视图？

> ID：13568269
> 
> 赞同：0
> 
> 时间：2012-11-26T15:47:52.560
> 
> 标签：listview, jquery-mobile, popup

我想在这张照片的右边创建类似图像的东西：

[http://media.smashingmagazine.com/wp-content/uploads/2012/03/4.19_Walmart1.jpg](http://media.smashingmagazine.com/wp-content/uploads/2012/03/4.19_Walmart1.jpg)

基本上我希望弹出窗口填满我的屏幕，但当列表视图太大时不要向下延伸。它应该使用户能够在弹出窗口中滚动列表。目前我找不到限制弹出高度的解决方案。我正在使用最新的 jQuery Mobile。

任何建议都非常受欢迎！

问候，伊沃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:09:14.330

可以这样做，看看[这个](http://jsfiddle.net/Gajotres/caQY5/)例子。

在此示例中，您有 1 页作为主要内容，第二页将用作对话框的内容。

此 java 脚本将第二页显示为对话框：

```
$('#test').bind('click', function(e) {
    $.mobile.changePage( "#test-dialog", {transition: "none", role: "dialog"} );
}); 
```

还有一件事，我忘了你想要一个列表视图并且我使用了控制组，你仍然可以用另一个替换一个来实现所需的功能。还有一件事，与您的示例 jQM 不同，对话框周围没有不透明/透明效果。

# php - 如何在php的会话变量中推送数组键和值？

> ID：13568272
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:48:09.167
> 
> 标签：php, arrays, session

这是一个例子（请不要考虑下面的例子，它不是我程序的一部分）

```
array( 'agur' => 100,
       'agur' => 300,
       'babu' => 200 ); 
```

我想将上述数组值一次一个地插入到 SESSION 变量中。

问题不是我要插入的上述示例数组。实际脚本就像每次单击链接时，我想将查询字符串中的值插入到会话数组中。

我试过下面的代码这对我没有帮助！

```
if( !isset( $_SESSION['allmarks'] ) )
{
    $_SESSION['allmarks'] = array();
}
$name = $_GET['name']; //eg. agur
$mark = $_GET['mark']; //eg. 100

$_SESSION['allmarks'] ["$name"] = $mark; 
```

我得到的输出只是插入的最后一个值

```
'agur' => 300 
```

我也试过`array_push`了，但对我没有帮助！

当我 var_dumb 时，我想要下面的结果`SESSION['allmarks']`

```
'agur' => 100
'agur' => 300
'babu' => 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:51:45.580

您需要使用`foreach`和循环数组，

```
 $arr  = array( 'agur' => 100,  'agur' => 300,   'babu' => 200 ); 
  if( !isset( $_SESSION['allmarks'] ) )
  {
    $_SESSION['allmarks'] = array();
    foreach($arr as $k => $v)
     $_SESSION['allmarks'][$k] = $v; 
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:52:46.237

如果您只想为此数组设置会话密钥，则无需循环。

另外，不要忘记`session_start()`（常见错误）。

```
$array = array( 'agur' => 100,
       'agur' => 300,
       'babu' => 200 ); 

session_start();
$_SESSION['allmarks'] = $array; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:51:06.857

使用 foreach() 遍历数组

# c# - 将文件（或字节 []）转换为 ascii，然后将该 ascii 转换回原始文件

> ID：13568281
> 
> 赞同：1
> 
> 时间：2012-11-26T15:48:59.493
> 
> 标签：c#, ascii, radio, streamreader

我正在使用一种称为 RTTY 的旧技术通过无线电发送数据（基本上是花哨的摩尔斯电码）。

RTTY 只能传输 ascii 字符

我想要做的是将诸如小型`jpg`或类似文件之类的文件转换为`ascii`文本块，通过无线电发送字符，然后将远程端的字符转换回原始文件。

一些入门帮助会很棒。

我知道我需要使用`StreamReader`，但是如何将其`byte[]`转换为编码`ascii`字符串，然后我可以“解码”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:51:18.363

> 我知道我需要使用流式阅读器，但是我怎样才能将字节 [] 转换为编码的 ascii 字符串，然后我可以“解码”

基本上，您想使用[Base64](http://en.wikipedia.org/wiki/Base64)转换。它会扩大数据的大小，但它保证您能够往返原始二进制数据。

用于[`Convert.ToBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.tobase64string.aspx)将 a 转换`byte[]`为 a `string`，[`Convert.FromBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)反之亦然。

# c++ - OpenCV 中的侵蚀

> ID：13568283
> 
> 赞同：0
> 
> 时间：2012-11-26T15:49:10.170
> 
> 标签：c++, image, image-processing, opencv

我正在尝试使用 OpenCV 执行图像侵蚀。我想这样做：假设我有四个不同的元素

```
S1 = [ 0 1 0, 0 1 0, 0 1 0 ]
S2 = [ 0 0 0, 1 1 1, 0 0 0 ]
S3 = [ 0 0 1, 0 1 0, 1 0 0 ]
S4 = [ 0 1 0, 1 1 1, 0 1 0 ] 
```

我想在原始图像上使用这些元素执行四种不同的腐蚀：

```
E1 = I & S1 
E2 = I & S2 
E3 = I & S3
E4 = I & S4 
```

其中“I”是原始图像，为简单起见，我使用“&”表示腐蚀。然后我想通过添加这四个来获得最终的侵蚀：

```
E = E1 + E2 + E3 + E4 
```

但是在用opencv实现这些时，我在早期遇到了困难。我声明了这样的元素：

```
int S1[3][3] = { { 0, 1, 0 }, { 0, 1, 0 }, { 0, 1, 0 } };
int S2[3][3] = { { 0, 0, 0 }, { 1, 1, 1 }, { 0, 0, 0 } };
int S3[3][3] = { { 0, 0, 1 }, { 0, 1, 0 }, { 1, 0, 0 } }; 
int S4[3][3] = { { 0, 1, 0 }, { 1, 1, 1 }, { 0, 1, 0 } }; 
```

然后对于使用“cv::erode”，我对这些元素有困难，因为它们不是可接受的类型。我怎样才能使用这些元素来获得我想要的上述侵蚀？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:02:00.907

你可能需要`cv::Mat`从你想要的内核形状中创建一个，这些被称为结构元素，OpenCV 提供了[getStructuringElement](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=getstr#Mat%20getStructuringElement%28int%20shape,%20Size%20ksize,%20Point%20anchor%29)函数来创建一些常见的形状。

或者，您可以通过直接使用以下方法从数据创建新矩阵来形成自己的矩阵：

```
cv::Mat S1 = (cv::Mat_<uchar>(3,3) << 0, 1, 0, 0, 1, 0, 0, 1, 0); 
```

您可以通过在终端中显示来确认这是否正确：

```
std::cout << S1 << std::endl; 
```

找到矩阵后，还可以通过简单的算术运算轻松组合它们，例如：

```
cv::Mat E = E1 + E2 + E3 + E4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:16:12.253

使用[Mat](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat) -oject 作为内核。[InputArray](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=inputarray#inputarray)和[OutputArray](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=inputarray#outputarray)（参见[erode](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=erode#erode)文档）在大多数情况下可以是 Mats 或 std::vector 对象。

我认为您可以像这样初始化它（未经测试）：

```
int S1[3][3] = { { 0, 1, 0 }, { 0, 1, 0 }, { 0, 1, 0 } };
Mat mat1 = Mat(3, 3, CV_32SC1, S1); 
```

# javascript - 来自外部 json 文件的 D3js 条形图

> ID：13568303
> 
> 赞同：1
> 
> 时间：2012-11-26T15:49:52.533
> 
> 标签：javascript, json, d3.js, bar-chart

我一直在寻找如何将数据从 json 加载到条形图，但我无法让它工作。

我有一个如下所示的 JSON 文件（其中的一部分）：

```
[{
    "id":1,
    "geslacht":"Vrouw",
    "totaal punten":60,
    "project 1":9,
    "ucd":6,
    "internetstandaarden":7,
    "understanding design":7,
    "Teamproject deel 1":6,
    "Taal in context":6,
    "Vormgeving":7,
    "Marketing":6,
    "Students in Motion":7,
    "Teamproject deel 2":7,
    "H&C":6,
    "Programmeren":7,
    "M&I":7,
    "Project 3":6,
    "Mediageschiedenis":6,
    "Business Mapping":7,
    "Plug & Play":7,
    "SLC":7,
    "Studieregie":8,
},{
    "id":2,
    "geslacht":"Man",
    "totaal punten":43,
    "project 1":8,
    "ucd":6,
    "internetstandaarden":0,
    "understanding design":7,
    "Teamproject deel 1":6,
    "Taal in context":0,
    "Vormgeving":7,
    "Marketing":7,
    "Students in Motion":7,
    "Teamproject deel 2":7,
    "H&C":6,
    "Programmeren":7,
    "M&I":0,
    "Project 3":6,
    "Mediageschiedenis":0,
    "Business Mapping":7,
    "Plug & Play":7,
    "SLC":8,
    "Studieregie":6,
}] 
```

我怎样才能创建一个条形图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:10:07.703

我建议使用诸如[Highcharts](http://www.highcharts.com)之类的图表库。它使用起来非常简单，并提供了多种不同的图表类型。不过，您可能需要稍微不同地格式化 JSON 文件（我认为 - 乍一看）

# ruby-on-rails - Redmine 2.1.2 + Gitolite 设置 - “rake 中止！” 关于“rake db:migrate_plugins”

> ID：13568304
> 
> 赞同：1
> 
> 时间：2012-11-26T15:49:54.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redmine, ubuntu-12.04, redmine-plugins

我正在尝试使用 Redmine 和 GIT 设置测试服务器。我正在关注这一系列教程：

*   [设置集中式 Git 服务](http://paulsalcido.com/2012/06/15/setting-up-a-centralized-git-service/)
*   [设置 Redmine 前端](http://paulsalcido.com/2012/06/16/setting-up-the-redmine-front-end/)
*   [整合 Redmine 和 Gitolite](http://paulsalcido.com/2012/06/18/integrating-redmine-and-gitolite/)
*   [完全自动化 Redmine Gitolite 集成](http://paulsalcido.com/2012/06/24/fully-automating-the-redmine-gitolite-integration/)

我正在为 Redmine 安装 Gitolite 插件，但无法正常工作。我按照所有说明进行操作，但是当我运行时出现`rake db:migrate_plugins`此错误：

```
/usr/share/redmine# RAILS_ENV=production rake db:migrate_plugins --trace
rake aborted!
GONE
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:191:in `deprecate'
/usr/lib/ruby/vendor_ruby/rake/rdoctask.rb:4
/usr/lib/ruby/vendor_ruby/rails/tasks/documentation.rake:5:in `require'
/usr/lib/ruby/vendor_ruby/rails/tasks/documentation.rake:5
/usr/lib/ruby/vendor_ruby/rails/tasks.rb:15:in `load'
/usr/lib/ruby/vendor_ruby/rails/tasks.rb:15
/usr/lib/ruby/vendor_ruby/rails/tasks.rb:6:in `each'
/usr/lib/ruby/vendor_ruby/rails/tasks.rb:6
/usr/lib/ruby/vendor_ruby/rails/application.rb:292:in `require'
/usr/lib/ruby/vendor_ruby/rails/application.rb:292:in `initialize_tasks'
/usr/lib/ruby/vendor_ruby/rails/railtie.rb:184:in `instance_exec'
/usr/lib/ruby/vendor_ruby/rails/railtie.rb:184:in `load_tasks'
/usr/lib/ruby/vendor_ruby/rails/railtie.rb:184:in `each'
/usr/lib/ruby/vendor_ruby/rails/railtie.rb:184:in `load_tasks'
/usr/lib/ruby/vendor_ruby/rails/engine.rb:424:in `load_tasks'
/usr/lib/ruby/vendor_ruby/rails/application.rb:145:in `load_tasks'
/usr/lib/ruby/vendor_ruby/rails/railtie/configurable.rb:30:in `send'
/usr/lib/ruby/vendor_ruby/rails/railtie/configurable.rb:30:in `method_missing'
/usr/share/redmine/Rakefile:7
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in `load'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:581:in `raw_load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:87:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:86:in `load_rakefile'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:70:in `run'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/var/lib/gems/1.8/gems/rake-10.0.2/bin/rake:37
/usr/local/bin/rake:19:in `load'
/usr/local/bin/rake:19 
```

在此之前，我必须做一些变化：

*   我已经将插件安装到`/usr/share/redmine/plugins`而不是`/usr/share/redmine/vendor/plugins`.
*   我已经运行`bundle install`，所以它安装了一些缺少的依赖项。

而且我不知道接下来会发生什么。我一遍又一遍地阅读文档，但这似乎是我无法控制的 Ruby/Rails 版本控制问题。

我正在通过 PPA 在 Ubuntu 12.04 上运行 Rails 3.2.8、Redmine 2.1.2。也许我应该停止尝试这些版本，转而使用旧的好 Rails 2.3.14 和 Redmine 1.3.2？

# java - java正则表达式不起作用

> ID：13568307
> 
> 赞同：1
> 
> 时间：2012-11-26T15:50:00.820
> 
> 标签：java, regex

我正在尝试匹配来自用户的输入数据并搜索此输入是否匹配。例如，如果用户输入：A*B*C* 我想搜索所有以 A 开头并包含 B 和 B 的单词我尝试了这段代码，但它不起作用:(get output false)

```
public static void main(String[] args)
    {

        String envVarRegExp = "^A[^\r\n]B[^\r\n]C[^\r\n]";
        Pattern pattern  = Pattern.compile(envVarRegExp);
        Matcher matcher = pattern.matcher("AmBmkdCkk");
        System.out.println(matcher.find());

    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:54:43.177

您在这里并不需要正则表达式。简单`String`的类方法将起作用：-

```
String str = "AfasdBasdfCa";

if (str.startsWith("A") && str.contains("B") && str.contains("C")) {
    System.out.println("true");
} 
```

请注意，这并不能确保您的`B`和`C`处于特定顺序，我假设您不需要，因为您没有提及任何相关内容。

如果您希望它们按某种顺序排列（就像`B`之前一样，请`C`使用此正则表达式：-

```
if (str.matches("^A.*B.*C.*$")) {
    System.out.println("true");
} 
```

请注意，`.`将匹配除 之外的任何字符`newline`。所以，你可以用它代替`[^\r\n]`，它更清楚。并且您需要使用量词`*`，因为您需要匹配之前`B`或`C`找到的任何重复字符。

此外，`String.matches`匹配完整的字符串，因此匹配`anchors`末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:54:04.330

您需要在字符类中添加量词；

```
String envVarRegExp = "^A[^\r\n]*B[^\r\n]*C[^\r\n]*$"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T15:54:11.987

我认为您应该`*`像这样在您的正则表达式中使用修饰符（对于 A 和 B 之间以及 B 和 C 之间的 0 个或多个匹配项）：

```
String envVarRegExp = "^A[^\r\n]*B[^\r\n]*C"; 
```

**编辑：**您似乎正在处理来自用户的输入，用户可以`*`在输入中使用星号。如果是这种情况，请考虑：

```
String envVarRegExp = userInput.replace("*", ".*?"); 
```

`userInput`像这样的字符串在哪里：

```
String userInput = "a*b*c*d*e"; 
```

# sql-server - 综合指数建议

> ID：13568308
> 
> 赞同：4
> 
> 时间：2012-11-26T15:50:04.087
> 
> 标签：sql-server, tsql, indexing, sql-server-2012, composite-index

我有一个巨大的（数百万行）表，其中包含以下列：

```
[When] datetime2(0),
[What] tinyint,
[Who] bigint 
```

它基本上是一个事件表（“What”），一次发生在各种实体（“Who”）（“When”）。'What' 有大约 10 个不同的值——它是一个枚举。目前“谁”有大约 10,000 个值。

我希望能够查询此表，以询问某个时间之间一个或多个实体是否发生了某些事情。例如，[What = 0, 1, 2, 3] 在 [When = '2012-10-01' 到 '2012-11-01'] 之间是否发生在 [Who = 0, 1, 2, 3] 上。

我正在寻找有关如何最好地索引此表的建议。我相当确定复合索引是要走的路，但我不确定确切的配置。例如，列顺序应该是什么？我读过“最有选择性”的列应该放在左边，我认为在这种情况下应该是 [When]、[Who]、[What]。它是否正确？

抱歉，如果这个问题看起来含糊不清，但我将不胜感激。我正在使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:10:59.663

*关于把最有选择性的列放在左边*的神话是废话——对不起。

您的复合索引只有在您使用 n 个最左边的参数时才有用，例如，如果您有索引

```
(when, who, what) 
```

然后该索引可以回答询问的问题

```
(when) 
```

或大约

```
(when, who) 
```

甚至大约

```
(when, who, what) 
```

但它**不能**回答关于

```
(who, what) 
```

（*因为这里没有使用最左边的列*）。

**这应该**是您考虑的重点 - 以这样的方式对列进行排序，以便您可以使用这样的复合索引回答大部分问题。

# java - 基于 HTTP GET 的 JMeter HTTP POST

> ID：13568311
> 
> 赞同：0
> 
> 时间：2012-11-26T15:50:20.813
> 
> 标签：java, http, testing, jmeter

我正在使用 JMeter 进行一些测试。
我必须对像`www.acme.com/documents/next`.

这将返回一个文档 ID，然后我需要根据该文档 ID 进行 POST，例如 `www.acme.com/document/{document_id}`. 此文档 ID 应为前一个 GET 请求返回的 ID。

我需要在许多线程中运行它，所以如果需要一个变量来存储 GET 的结果，它应该存储在 ThreadLocal 之类的东西中，因为每个人在调用 GET 方法时都会获得一个唯一的 id .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:09:23.723

您应该使用后处理器来提取变量。您的测试计划将如下所示：

```
Thread Group
- GET request to /documents/next
--- Regular Expression Extractor (with reference name=variable)
- POST request to /document/${variable} 
```

# android - 在 GAEJ 和 Android 项目之间共享代码

> ID：13568314
> 
> 赞同：0
> 
> 时间：2012-11-26T15:50:27.797
> 
> 标签：android, google-app-engine

在 Eclipse 中：是否可以在 GAEJ 和 Android 项目之间共享代码？或者 GAEJ 和另一个 GAEJ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:57:32.290

在上一届 GoogleIO 2012 上有一个关于 GAE 和 Android 集成的精彩讨论：

[Google I_O 2012 - 为 Android、iOS 和 Web 构建移动应用引擎后端](http://www.youtube.com/watch?v=NU_wNR_UUn4)

他们展示了如何使用相同的数据结构在 Android 和 GAE 之间进行数据交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:03:44.420

如果您询问如何在 Eclipse 中进行设置，我使用 Java Build Path 的源选项卡中的“链接源”选项。这是一篇包含详细信息的博客文章：http: [//blog.christoffer.me/2011/01/sharing-code-between-multiple-java.html](http://blog.christoffer.me/2011/01/sharing-code-between-multiple-java.html)

如果你问它是否实用——从代码的角度来看——那就更棘手了。

当尝试与 GAE/JI 共享 Android 代码时，我发现我依赖于 android 包，例如 android.util.Base64。共享代码意味着放弃这样的东西并改用 3rd 方库。例如，Guava 库适用于 GAE/J 和 Android： [http ://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

日志记录是另一个问题。我的 GAE/J 代码正在写入 java.util.logging.Logger，而我的 Android 代码最终会记录到“android.util.Log.println”。如果您使用像 log4j 这样的通用库框架或只是写入 System.Out，我认为您将失去日志查看器中的功能 - 理想情况下，您将拥有一个映射到 java.util.logging.Logger 或 android.util 的日志库或 shim .Log.println 取决于平台。

# python-2.7 - 如何在 python Google-drive API 中获取 fileID 或 parentID ？

> ID：13568315
> 
> 赞同：0
> 
> 时间：2012-11-26T15:50:28.120
> 
> 标签：python-2.7, google-drive-api

例如从下面的这个例子 [https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)

我如何/在哪里可以检索 fileId 以使用此代码？该方法需要 fileId 作为其参数，但我不知道如何/从哪里得到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:10:40.200

您将使用 list() 函数查找域中的文件列表，可能指定 q 属性来搜索/查询某些文件： [https ://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

返回的文件资源有一个 id 参数，您可以使用它来获取单个文件并执行更新、共享等。

[https://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

# android - 通过连接到android中的mysql来显示另一个字符而不是波斯字符

> ID：13568323
> 
> 赞同：1
> 
> 时间：2012-11-26T15:50:52.537
> 
> 标签：android, mysql, persian

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

我想在 android 中编写一个 web 应用程序并使用 php 与 mysql 连接。这个应用程序是波斯语的。当我仅使用 php 连接到 mysql 时，我可以看到波斯语中的数据（因此我与 mysql 的连接是真的）但是当我在 android 应用程序中使用这个 php 连接到 mysql 时，我没有得到波斯语中的数据。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:03:11.437

你的表必须 charset UTF-8,

在插入和选择之前，您必须在连接后立即使用此查询：

```
SET CHARACTER SET utf8 
```

例如：

```
 $m_Handle = mysqli_connect('loaclhost',DATABASEUSERNAME,DATABASEPASSWORD,DATABASENAME) 
    or die ( mysqli_error($m_Handle) ); 

    $sSQL= 'SET CHARACTER SET utf8'; 

    mysqli_query($m_Handle,$sSQL) 
    or die ('Can\'t charset in DataBase'); 
```

我是波斯人，并对其进行更多次测试...

# javascript - 让 var 或 var 让

> ID：13568325
> 
> 赞同：15
> 
> 时间：2012-11-26T15:51:05.470
> 
> 标签：javascript, scope, var, let

在过去的几个月里，我学习了很多关于 JavaScript 的知识。多年来一直滥用这些语言，我敢说我现在对这门语言有了更好的理解，并且我开始*喜欢*它的功能性的好处。
最近我开始学习 Scheme，但这只是为了好玩。浏览[MDN 参考资料](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)，我注意到 JS 虽然缺少块作用域，但确实有一个关键字可用于声明给定块的局部变量，很像 Scheme 的`let`：

```
for (var i=0;i<someArray.length;i++)
{
    console.log(someArray[i]);
}
console.log(i);//will log someArray's length 
```

然而：

```
for (let i=0;i<someArray.length;i++)
{
    console.log(someArray[i]);
}
console.log(i);//undefined 
```

所以我现在想知道的是：为什么不`let`经常使用？它与 X 浏览器支持有关吗？它只是那些*鲜为人知的好东西*之一吗？
简而言之，使用`var`over`let`有什么好处，有什么注意事项？

据我所知，`let`如果有的话，它的行为更加一致（单个块中的双重声明引发 a `TypeError`，但函数体除外（ECMA6 草案解决了这个问题）。
老实说，除了这个特性/关键字不是很出名，我很难想到*任何*反对使用`let`for 循环的论点，或者任何使用临时变量的地方使代码更具可读性。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-26T15:52:45.420

是的，它完全与浏览器支持有关。目前只有 Firefox 实现了它*（因为它是他们的 ECMAScript 超集的一部分）*。

但它[即将出现在 ES6 中](http://wiki.ecmascript.org/doku.php?id=harmony%3alet)，所以有希望......

鉴于两者都得到支持，我怀疑是否可以说有很多好处`var`。`let`我认为口头禅将是*“`let`是新的`var`”*

# php - get_browser 的替代品？

> ID：13568329
> 
> 赞同：2
> 
> 时间：2012-11-26T15:51:16.670
> 
> 标签：php, httpbrowsercapabilities

我一直在使用 php 的`get_browser()`函数对我的用户进行一些简单的分析，主要用于调试。然而，似乎 browsercap.ini 的维护者，为 get_browser 提供动力的数据已经退出了该项目，虽然有些人似乎正在努力重新启动它，但数据变得非常陈旧。他们正在谈论彻底重写，所以我担心它需要很长时间才能再次开始。

有人知道不依赖 browsercap.ini 的替代方案吗？

**编辑：**我很抱歉我的问题含糊不清。我需要这个来*调试*，而不是分析。我在一个有很多跨浏览器错误的 Web 应用程序的“报告错误”工具中使用它，但我无法控制客户端机器。这是一个非常古老的应用程序（最初是为 IE6 构建的），我们一直在尽最大努力更新它，但有时很难找到跨浏览器问题。

再次感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T12:55:15.820

我就是这样做的：我已经包含了最常见的浏览器。

```
<?php

function get_browsername() {
if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== FALSE){
$browser = 'Microsoft Internet Explorer';
}elseif (strpos($_SERVER['HTTP_USER_AGENT'], 'Chrome') !== FALSE) {
$browser = 'Google Chrome';
}elseif (strpos($_SERVER['HTTP_USER_AGENT'], 'Firefox') !== FALSE) {
$browser = 'Mozilla Firefox';
}elseif (strpos($_SERVER['HTTP_USER_AGENT'], 'Opera') !== FALSE) {
$browser = 'Opera';
}elseif (strpos($_SERVER['HTTP_USER_AGENT'], 'Safari') !== FALSE) {
$browser = 'Apple Safari';
}else {
$browser = 'error'; //<-- Browser not found.
}
return $browser;
}

echo 'Browser is '. get_browsername(); //<-- Display the browser name

if(get_browsername() == 'Google Chrome') { 
// Use the function to check
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:07:26.953

我刚刚看了一下[Piwik](http://piwik.org/)，它是 Google Analytics 的开源替代品，它们依赖于`$_SERVER['HTTP_USER_AGENT'];`（[在此处](http://php.net/manual/en/reserved.variables.server.php)记录），但这与`get_browser`（[在此处](http://ca1.php.net/get_browser)记录）直接相关。另外，请记住，浏览器可能会谎报其用户代理，您应该准确描述您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:17:19.793

如果您只想获取有关访问者浏览器的信息，[https://github.com/ornicar/php-user-agent提供了一个相当最新的替代方案（最后一次更新是 5 个月前）。](https://github.com/ornicar/php-user-agent)

我用它来将 IE 锁定在我们工作的 Intranet 之外（因为我可以）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T16:20:45.950

```
function get_browsername($userAgent = $_SERVER['HTTP_USER_AGENT']){
    $browsers = array(
                    array("IE", "Microsoft Internet Explorer"),
                    array("Chrome", "Google Chrome"),
                    array("Firefox", "Mozzila Firefox"),
                    array("Opera", "Opera"),
                    array("Safari", "Apple Safari")
                );
    foreach($browsers as $browser){
        if (strpos($userAgent, $browser[0]) !== false)
        return $browser[1];
    }
    return "unknown";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-21T10:52:11.047

我认为您最好使用解析器库为您执行此操作，我推荐[ua-parser](https://github.com/tobie/ua-parser)。这个库可以解析你能遇到的大部分浏览器，但缺陷也很明显。这个库太重了……

# python - 更改 form.clean_data 中的数据

> ID：13568330
> 
> 赞同：1
> 
> 时间：2012-11-26T15:51:17.533
> 
> 标签：python, django, session, models

我已经为此苦苦挣扎了几天。

我正在使用 django Python，我的所有对象都有一个抽象对象，用户无法更改也无法在页面中看到，但他在登录时选择了。所以当他登录时，他输入用户、密码和选择此对象，我想确保页面内的所有内容都与该对象相关，因此当他使用另一个实例登录时看不到以前的实例。

这是我的模型：（如你所料，我所有的对象都有 commonObject）

```
class Model(models.Model):
    name = models.CharField(max_length=200)
    thing = models.IntegerField()
    commonObject = models.ForeignKey(commonObject, editable=False) 
```

现在我的问题是我无法保存`commonObject`. 请记住，我使用的是 django-smarter，这是`add_view`代码

```
action = self.action
form_kwargs = self.get_form_kwargs(action, request, *args, **kwargs)
if request.method == 'POST':
    form = self.get_form(action=action,
                        data=request.POST,
                        files=request.FILES,
                        **form_kwargs)
    if form.is_valid():
        form.cleaned_data['commonObject'] = pk.loads(request.session.get('commonObject'))
        print form.cleaned_data #Here the commonObject is the one that I want, but save doesn't seem to care
        instance = self.save_form(form)
        return self.add_success(request, instance)
else:
    form = self.get_form(action=action, **form_kwargs)
context = {'form': form}
return self.render_to_response(context) 
```

我的方法是：

1）保存`commonObject`在模型重写的`save()`方法中。这样做的问题是我无法访问请求对象（既不能将公共对象保存在会话中，也不能保存在用户对象的另一列中）。

2）改变`form.clean_data`似乎不起作用。在这种方法中，我尝试序列化对象，我成功地使用“pickable”完成了该操作，但`Models.py`将之前的形式而不是我更改的形式作为真实的形式。

3）使用`pre_save`and `post_save`，但我无权访问`Models.py`.

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:24:36.160

我认为您不能像您一样直接更改表单中的数据。您必须保存表单以创建数据实例但尚未提交它然后更改您想要的数据。更改所需的所有内容后，将其保存（通过提交）。

例如（未测试）

```
if form.is_valid():
    instance = form.save(commit=False)
    instance.commonObject = pk.loads(request.session.get('commonObject'))
    instance.save()
    return self.add_success(request, instance) 
```

# c# - 如何在 MVC 4.0 查看页面中打印它

> ID：13568332
> 
> 赞同：0
> 
> 时间：2012-11-26T15:51:18.997
> 
> 标签：c#, asp.net-mvc-4

我有一个班学生：

```
 public class Student
       {
          public int StudentId{get;set;}
          public string StudentName{get;set;}
          public int Age{get;set;}
          public List<Course> Courses{get;set;}
          public List<string> MobileNumbers{get;set;}
       } 
```

课程类是：

```
 public class Course
       {
         public int CourseId {get;set;}
         public string CourseName {get;set;}
         public List<Staff> Staff {get;set;}
       } 
```

Staff 类具有以下结构：

```
 public class Staff
      {
        public int StaffId {get;set;}
        public string StaffName {get;set;}
      } 
```

我已将数据放入 ViewBag ，但我无法弄清楚我应该如何使用 foreach 语句在以下视图中打印所有这些记录。看法：

```
 <table class="tableStyle" width="100%" border="0" cellspacing="0" cellpadding="0">

                        <thead>
                            <tr>
                                <th>Student Name</th>
                                <th>Courses</th>
                                <th>Staffs</th>
                                <th>Mobile Numbers</th>
                            </tr>
                        </thead>

                        @foreach (Student stud in ViewBag.students)
                        {       
                            <tr>
                                <td>@stud.StudentName</td>
                              foreach(Course course in ViewBag.courses)
                              {  
                                <td>@course.CourseName</td>

                              }
                              foreach(Staff staff in ViewBag.staff)
                              {
                                    <td>@staff.StaffName</td>
                              }

                            </tr>
                       }
                    </table> 
```

但是，这会打印所有学生为单个学生学习的课程，因为他们在第一个 foreach 循环中。请给我建议一种方法来做到这一点......！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:11:10.250

你不需要你的其他viewbags。您在学生对象中引用了您的课程和教职员工。

```
<table class="tableStyle" width="100%" border="0" cellspacing="0" cellpadding="0">

                        <thead>
                            <tr>
                                <th>Student Name</th>
                                <th>Courses - Staffs</th>
                                <th>Mobile Numbers</th>
                            </tr>
                        </thead>

                        @foreach (Student stud in Viewbag.students)
                        {       
                            <tr>
                                <td>@stud.StudentName</td>
                                <td>
                              foreach(Course course in stud.courses)
                              {  
                                foreach(Staff staff in course.staff)
                                {
                                  @course.CourseName - @staff.StaffName </br>
                                }
                              }
                                </td>

                            </tr>
                       }
                    </table> 
```

您可能还需要考虑通过添加以下内容使 IEnumerable 成为您页面的模型：

```
@model IEnumerable<myproject.Models.Student> 
```

到页面顶部。那么您将不需要使用 Viewbag。

# plugins - Microsoft Dynamics CRM 2011 - 创建插件屏幕

> ID：13568336
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:51:30.833
> 
> 标签：plugins, dynamics-crm-2011

我相信这是可能的，但我找不到任何教程或说明。

我想创建自己的屏幕（使用 C#），可以从 Dynamics 中的新菜单选项调用，这样就用户而言，他们只是使用另一个“Dynamics 屏幕”而不是自定义构建的屏幕。

这可行吗..？有谁知道这方面的好教程..？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:47:25.240

如果“自己的屏幕（使用 C#）”是指 ASP.NET 网页：

1.  将 IFRAME 添加到 CRM 表单。
2.  在此表单的功能区中添加一个按钮并将其挂接到表单上的 JavaScript 函数中。
3.  将 IFRAME 的 src 设置为您希望显示的“屏幕”。

[从这里](http://www.microsoft.com/en-gb/download/details.aspx?id=24004)下载 SDK并**好好**阅读。它还包括一些优秀的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:34:44.353

满足此要求的正确且受支持的方法（包括 C#）是创建 Silverlight 资源并将其作为 WebResource 部署到 CRM。将资源嵌入设置为隐藏的表单中，然后响应功能区上的按钮单击显示它。您还可以将 Silverlight WebResource 放置在 HTML 页面上，也部署为 WebResource 并使用基于功能区按钮单击的 JavaScript 在模式窗口中将其弹出。

推荐[此链接](http://blogs.msdn.com/b/crminthefield/archive/2011/06/23/how-to-create-a-silverlight-web-resource-that-interacts-with-crm-2011-forms.aspx)以帮助您入门。

# c# - 当逆变导致歧义时，没有警告或错误（或运行时失败）

> ID：13568337
> 
> 赞同：43
> 
> 时间：2012-11-26T15:51:34.567
> 
> 标签：c#, .net, undefined-behavior, contravariance, ambiguity

首先，请记住 .NET`String`既是.NET`IConvertible`又是`ICloneable`.

现在，考虑以下非常简单的代码：

```
//contravariance "in"
interface ICanEat<in T> where T : class
{
  void Eat(T food);
}

class HungryWolf : ICanEat<ICloneable>, ICanEat<IConvertible>
{
  public void Eat(IConvertible convertibleFood)
  {
    Console.WriteLine("This wolf ate your CONVERTIBLE object!");
  }

  public void Eat(ICloneable cloneableFood)
  {
    Console.WriteLine("This wolf ate your CLONEABLE object!");
  }
} 
```

然后尝试以下（在某些方法中）：

```
ICanEat<string> wolf = new HungryWolf();
wolf.Eat("sheep"); 
```

当一个人编译这个时，一个人*不会*得到编译器错误或警告。运行它时，看起来调用的方法取决于我的`class`声明中接口列表的顺序`HungryWolf`。（尝试交换逗号 ( `,`) 分隔列表中的两个接口。）

问题很简单：**这不应该给出编译时警告（或在运行时抛出）吗？**

我可能不是第一个提出这样的代码的人。我使用了接口的*逆变，但是你可以用接口的**协变*来做一个完全类似的例子。事实上[，利珀特先生](http://blogs.msdn.com/b/ericlippert/archive/2007/11/09/covariance-and-contravariance-in-c-part-ten-dealing-with-ambiguity.aspx)很久以前就是这样做的。在他博客的评论中，几乎所有人都同意这应该是一个错误。然而，他们默默地允许了这一点。**为什么？**

**---**

**扩展问题：**

上面我们利用a`String`既是`Iconvertible`（接口）又是`ICloneable`（接口）。这两个接口都不是从另一个派生的。

现在这是一个基类的例子，从某种意义上说，它有点糟糕。

请记住，a`StackOverflowException`既是`SystemException`（直接基类）又是`Exception`（基类的基类）。然后（如果`ICanEat<>`像以前一样）：

```
class Wolf2 : ICanEat<Exception>, ICanEat<SystemException>  // also try reversing the interface order here
{
  public void Eat(SystemException systemExceptionFood)
  {
    Console.WriteLine("This wolf ate your SYSTEM EXCEPTION object!");
  }

  public void Eat(Exception exceptionFood)
  {
    Console.WriteLine("This wolf ate your EXCEPTION object!");
  }
} 
```

测试它：

```
static void Main()
{
  var w2 = new Wolf2();
  w2.Eat(new StackOverflowException());          // OK, one overload is more "specific" than the other

  ICanEat<StackOverflowException> w2Soe = w2;    // Contravariance
  w2Soe.Eat(new StackOverflowException());       // Depends on interface order in Wolf2
} 
```

仍然没有警告、错误或异常。仍然取决于`class`声明中的接口列表顺序。但我认为它更糟糕的原因是，这一次有人可能会认为重载决议总是会选择`SystemException`，因为它不仅仅是`Exception`.

* * *

赏金开启前的状态：两位用户的三个回答。

赏金最后一天的状态：仍然没有收到新的答案。如果没有答案出现，我将不得不将赏金奖励给穆斯林 Ben Dhaou。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T17:08:10.583

我相信编译器在带有警告的 VB.NET 中做得更好，但我仍然认为这还不够。不幸的是，“正确的事情”可能需要禁止某些可能有用的东西（使用两个协变或逆变泛型类型参数实现相同的接口）或向语言引入新的东西。

就目前而言，除了类之外，编译器现在没有其他地方可以分配错误`HungryWolf`。这就是一个班级声称知道如何做一些可能模棱两可的事情的时候。它在说明

> 我知道如何以`ICloneable`某种方式吃一个，或任何实现或继承它的东西。
> 
> 而且，我也知道如何以`IConvertible`某种方式吃一个，或任何实现或继承它的东西。

但是，它从不说明如果它在它的盘子上收到**既是 an****又是 an 的东西****应该做什么**。如果给定一个 的实例，这不会给编译器带来任何痛苦，因为它可以肯定地说*“嘿，我不知道在这里做什么！”* . 但是当它被赋予实例时，它会给编译器带来痛苦。**编译器不知道变量中对象的实际类型是什么，只知道它确实实现了**.**`ICloneable``IConvertible`**`HungryWolf`*`ICanEat<string>`**`ICanEat<string>`***

 *不幸的是，当 a`HungryWolf`存储在该变量中时，它会模棱两可地两次实现完全相同的接口。所以当然，我们不能在尝试调用时抛出错误`ICanEat<string>.Eat(string)`，因为该方法存在并且对于可以放入`ICanEat<string>`变量中的许多其他对象完全有效（[batwad](https://stackoverflow.com/users/183217/batwad)已经在他的答案之一中提到了这一点）。

此外，尽管编译器可能会抱怨将`HungryWolf`对象分配给`ICanEat<string>`变量是不明确的，但它不能阻止它分两步发生。A`HungryWolf`可以分配给一个`ICanEat<IConvertible>`变量，该变量可以传递给其他方法并最终分配给一个`ICanEat<string>`变量。**这两个都是完全合法的赋值**，编译器不可能抱怨其中任何一个。

因此，**选项一是**禁止`HungryWolf`类同时实现`ICanEat<IConvertible>`和`ICanEat<ICloneable>`when`ICanEat`的泛型类型参数是逆变的，因为这两个接口可以统一。但是，这**消除了编写有用代码的能力，**而没有其他解决方法。

**不幸的是，**选项二****需要更改编译器**，包括 IL 和 CLR。它将允许`HungryWolf`类实现两个接口，但它也需要实现接口`ICanEat<IConvertible & ICloneable>`接口，其中泛型类型参数实现两个接口。这可能不是最好的语法（这个`Eat(T)`方法的签名是什么样的，`Eat(IConvertible & ICloneable food)`？）。可能，更好的解决方案是在实现类上自动生成泛型类型，以便类定义类似于：**

 **```
class HungryWolf:
    ICanEat<ICloneable>, 
    ICanEat<IConvertible>, 
    ICanEat<TGenerated_ICloneable_IConvertible>
        where TGenerated_ICloneable_IConvertible: IConvertible, ICloneable {
    // implementation
} 
```

然后必须更改 IL，以便能够像构造`callvirt`指令的泛型类一样构造接口实现类型：

```
.class auto ansi nested private beforefieldinit HungryWolf 
    extends 
        [mscorlib]System.Object
    implements 
        class NamespaceOfApp.Program/ICanEat`1<class [mscorlib]System.ICloneable>,
        class NamespaceOfApp.Program/ICanEat`1<class [mscorlib]System.IConvertible>,
        class NamespaceOfApp.Program/ICanEat`1<class ([mscorlib]System.IConvertible, [mscorlib]System.ICloneable>)!TGenerated_ICloneable_IConvertible> 
```

然后，CLR 必须通过为with`callvirt`构造一个接口实现作为 的泛型类型参数来处理指令，并检查它是否比其他接口实现匹配得更好。`HungryWolf``string``TGenerated_ICloneable_IConvertible`

对于协方差，所有这些都会更简单，因为需要实现的额外接口不必是具有约束的泛型类型参数，**而只是其他两种类型之间最衍生的基本类型**，这在编译时是已知的。

如果同一个接口被实现两次以上，那么需要实现的额外接口的数量呈指数级增长，但这将是在单个类上实现多个逆变（或协变）的灵活性和类型安全的成本。

我怀疑这是否会进入框架，但这将是我首选的解决方案，特别是因为新的语言复杂性对于希望执行当前危险操作的类而言始终是自包含的。

* * *

**编辑：**
感谢[Jeppe](https://stackoverflow.com/users/1336654/jeppe-stig-nielsen)提醒我**covariance 并不比 travariance 简单**，因为还必须考虑公共接口。在 和 的情况下`string`，`char[]`最大共性的集合是 { `object`, `ICloneable`, `IEnumerable<char>`} （被`IEnumerable`覆盖*）*`IEnumerable<char>`。

但是，这将需要接口泛型类型参数约束的新语法，以指示泛型类型参数只需要

*   从指定的类或实现至少一个指定接口的类继承
*   至少实现一个指定的接口

可能是这样的：

```
interface ICanReturn<out T> where T: class {
}

class ReturnStringsOrCharArrays: 
    ICanReturn<string>, 
    ICanReturn<char[]>, 
    ICanReturn<TGenerated_String_ArrayOfChar>
        where TGenerated_String_ArrayOfChar: object|ICloneable|IEnumerable<char> {
} 
```

这种情况下的泛型类型参数`TGenerated_String_ArrayOfChar`（一个或多个接口是通用的）总是必须被视为`object`，即使公共基类已经派生自`object`; 因为**公共类型可以实现一个公共接口而不继承公共基类**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T15:33:47.740

在这种情况下无法生成编译器错误，因为代码是正确的，并且它应该可以在所有不同时从两个内部类型继承的类型上正常运行。如果同时从类和接口继承，问题是一样的。（即`object`在您的代码中使用基类）。

出于某种原因，VB.Net 编译器会在这种情况下引发警告，类似于

> 由于 'Interface ICustom(Of In T)' 中的 'In' 和 'Out' 参数，接口 'ICustom(Of Foo)' 与另一个实现的接口 'ICustom(Of Boo)' 不明确

我同意 C# 编译器也应该发出类似的警告。检查这个[堆栈溢出问题](https://stackoverflow.com/questions/8647738/multiple-generics-ambiguity)。Lippert 先生确认运行时会选择一个，并且应该避免这种编程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T16:21:05.530

这是我刚刚提出的缺乏警告或错误的一种尝试，我什至没有喝酒！

进一步抽象你的代码，目的是什么？

```
ICanEat<string> beast = SomeFactory.CreateRavenousBeast();
beast.Eat("sheep"); 
```

你在喂东西。野兽实际上是如何把它吃掉的。如果给它汤，它可能会决定用勺子。它可能会用刀叉来吃羊。它可能会用牙齿把它撕成碎片。但关键是作为这个类的调用者，我们不在乎它如何吃，我们只希望它被喂食。

最终由野兽来决定如何吃它所给予的东西。如果野兽决定它可以吃 an`ICloneable`和 an`IConvertible`然后由野兽来决定如何处理这两种情况。为什么猎场看守人要关心动物如何进食？

如果它确实导致了编译时错误，那么您将实现一个新接口作为一项重大更改。例如，如果您发布`HungryWolf`为`ICanEat<ICloneable>`，然后几个月后添加`ICanEat<IConvertible>`，您会破坏使用实现这两个接口的类型的每个地方。

它是双向的。如果泛型参数只实现`ICloneable`它会很高兴与狼一起工作。测试通过，发货，非常感谢 Wolf 先生。明年您将`IConvertible`支持您的类型和 BANG！一个错误并没有多大帮助，真的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T11:29:05.830

另一种解释：没有歧义，因此没有编译器警告。

忍受我。

```
ICanEat<string> wolf = new HungryWolf();
wolf.Eat("sheep"); 
```

没有错误，因为`ICanEat<T>`只包含一个`Eat`使用这些参数调用的方法。但是这样说，你*会*得到一个错误：

```
HungryWolf wolf = new HungryWolf();
wolf.Eat("sheep"); 
```

`HungryWolf`是模棱两可的，不是`ICanEat<T>`。在预期编译器错误时，您要求编译器查看被调用时变量的值，`Eat`并确定它是否不明确，它不一定可以推断出来。考虑一个`UnambiguousCow`只实现`ICanEat<string>`.

```
ICanEat<string> beast;

if (somethingUnpredictable)
    beast = new HungryWolf();
else
    beast = new UnambiguousCow();

beast.Eat("dinner"); 
```

您希望在哪里以及如何引发编译器错误？***

# asp.net - 使用 Encoding.UTF8.GetBytes 会破坏 xls/视频文件？

> ID：13568339
> 
> 赞同：0
> 
> 时间：2012-11-26T15:51:42.633
> 
> 标签：asp.net, vb.net

我正在使用以下代码将文件上传到 FTP，文件被上传 - 问题在于 xls、pdf 和视频文件，它们已损坏。Txt，sql保持不变，我直接在FTP中检查了这个。我在想它与 UTF8.GetBytes 有关吗？代码如下

```
 Dim URI As String = Url & "/" & fileName
                Dim ftp As System.Net.FtpWebRequest = CType(FtpWebRequest.Create(URI), FtpWebRequest)
                ftp.Credentials = New System.Net.NetworkCredential(Username, Password)
                ftp.Proxy = Nothing
                ftp.KeepAlive = False
                ftp.UsePassive = False
                ftp.Method = System.Net.WebRequestMethods.Ftp.UploadFile

                Dim sourceStream As New StreamReader(file.InputStream)
                Dim fileContents As Byte() = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd())
                sourceStream.Close()

                ftp.ContentLength = fileContents.Length
                ftp.UsePassive = True

                Dim requestStream As Stream = ftp.GetRequestStream()
                requestStream.Write(fileContents, 0, fileContents.Length)
                requestStream.Close()

                Dim response As FtpWebResponse = DirectCast(ftp.GetResponse(), FtpWebResponse) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:53:36.607

这就是问题：

```
Dim fileContents As Byte() = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd()) 
```

您正在将流作为字符串读取，就好像它是 UTF-8 编码的文本一样，然后再次将其转换回字节。你为什么要这样做？有问题的文件*不是*UTF-8 编码的文本，所以你不应该那样对待它们。

从流中读取二进制数据，*切勿*将其转换为文本，除非您确定它确实*是*文本数据。目前尚不清楚`file`这里的类型是什么，但希望您可以在*不*将整个内容读入内存的情况下获得长度。然后你可以使用：

```
file.InputStream.CopyTo(requestStream) 
```

复制所有数据。请注意，您应该使用`Using`语句而不是手动关闭流，以避免在引发异常时使它们保持打开状态。

# facebook - 获取所有 Facebook 帖子 - 内部服务器错误

> ID：13568345
> 
> 赞同：0
> 
> 时间：2012-11-26T15:52:06.487
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-fql

我想获取特定用户的所有帖子..我知道它们是有限的，所以我每次都会收到 100 个帖子...

```
$total2 = 0;
try {
    for ($i = 0; $i < 2000; $i = $i + 100) {
        $fql2 = "SELECT post_id, comments, message 
                FROM stream
                WHERE source_id = me() 
                LIMIT " . $i . "," . ($i + 100);
        $param2 = array(
            'method' => 'fql.query',
            'query' => $fql2,
            'callback' => ''
        );
        $fqlResult2 = $facebook->api($param2);
        $total2 = $total2 + count($fqlResult2);
    }
} catch (Exception $o) {
    d($o);
} 
```

但是在运行时，服务器挂起，给出 500（内部服务器错误）..

当我将其设为 300 时，循环迭代器将不会挂起......

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:22:23.923

我相信你的 $parms2 数组应该是这样的：

```
 $param2 = array(
        'method' => 'fql.query',
        'access_token' => $access_token,
        'query' => $fql2,
        'callback' => ''
    ); 
```

我相信要获取用户的帖子，您需要一个访问令牌，以便您可以获得 access_token 有权访问的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:27:03.600

我建议使用批量请求：

> [https://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

您可以在批处理请求中堆叠多达 50 个调用，而且速度要快得多。

# jquery - 在 html 网站中显示 facebook 页面的画廊

> ID：13568355
> 
> 赞同：0
> 
> 时间：2012-11-26T15:52:46.270
> 
> 标签：jquery, html, facebook-graph-api, photo-gallery

我是 html、facebook graph api、jquery 的新手。

我有以下代码来获取 facebook 粉丝页面（不是一般个人资料）中的所有相册，以简单的格式显示它，我在 chrome 的开发者控制台中没有看到任何错误，但没有显示照片。关于如何查看 facebook 粉丝页面上的所有照片的任何想法？

```
<!DOCTYPE html>
<html>
 <head>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/
     1.4.2/jquery.min.js"></script>
 </head>
  <body onLoad="fbFetch()">

  <script>
     function fbFetch(){

      var url = "https://graph.facebook.com/160407767374259/photos?limit=5?callback=";

        $.getJSON(url,function(json){
           var html = "<ul>";

        $.each(json.data,function(i,fb){
          html += "<li><img alt='"+ fb.from.name +"' height='" + fb.height + "' width='" +
    fb.width + "' src='" + fb.picture + "'/></li><div style='clear:both;'>&nbsp;</div>";
});

html += "</ul>";

$('.facebookfeed').animate({opacity:0}, 500, function(){
 $('.facebookfeed').html(html);
 });
 $('.facebookfeed').animate({opacity:1}, 500);
 });
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:54:55.977

您缺少重要的 DOM 就绪包装器

```
<script>
$(function(){ 
    // code here
}); 
</script> 
```

[http://docs.jquery.com/Tutorials:Introducing_$(document).ready()](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

[**工作演示**](http://jsfiddle.net/YKbaG/1/)

# c# - 如何在 WPF 中的图像上制作透明画布？

> ID：13568360
> 
> 赞同：2
> 
> 时间：2012-11-26T15:53:09.527
> 
> 标签：c#, wpf, xaml

我想在 image1 图像之上制作 GameArea 画布。我尝试更改 ZIndex 并将画布手动拖到图像的顶部，但都没有成功，画布不断移回图像的右侧。

（对不起，如果我的英语比较笨拙，希望你明白我的意思）

下面是我的代码：

```
<Window x:Class="TugasBesarTAM_Moses_1072089.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Brickbreaker" Height="420" Width="375" Loaded="Window_Loaded"
    KeyDown="Window_KeyDown" ResizeMode="NoResize">
<DockPanel>      
    <Grid Width="350" Height="30"
          DockPanel.Dock="Top"
          ShowGridLines="True">

        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <TextBlock x:Name="txtLevel" 
                   Text="Level 00"
                   Grid.Column="0" Grid.Row="1"
                   FontSize="20" FontWeight="Medium"
                   HorizontalAlignment="Left"/>
        <TextBlock x:Name="txtScore" 
                   Text="0"
                   Grid.Column="1" Grid.Row="1"
                   FontSize="20" FontWeight="Medium"
                   HorizontalAlignment="Right"/>
    </Grid>
    <Image Height="300" Name="image1" Stretch="Fill" Width="320" Visibility="Visible" Source="/TugasBesarTAM_Moses_1072089;component/Images/Back1.jpg" Panel.ZIndex="1" />
    <Canvas x:Name="GameArea" DockPanel.Dock="Bottom" Width="320" Height="300" Panel.ZIndex="0">

    </Canvas>
</DockPanel> 
```

感谢您的关注和帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:55:29.600

Dockpanel 不是在这种情况下使用的合适面板。改用网格。某事喜欢：

```
<Grid>
    <Image  />
    <Canvas />
</Grid> 
```

# eclipse - PyDev（或 Eclipse）：当我选择一些文本时跳转到定义（？）

> ID：13568363
> 
> 赞同：1
> 
> 时间：2012-11-26T15:53:14.437
> 
> 标签：eclipse, pydev

我将 Eclipse 与 PyDev 一起使用，有时（实际上经常）当我选择一些文本时，编辑器会随机跳转到我选择的内容的定义或文件的开头。这不是我想要的行为，您知道如何解决吗？我检查了 PyDev 和 Python 设置，但找不到答案。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:06:52.983

嗯，有一些奇怪的东西... PyDev 只会在您执行 Ctrl+单击某些工作（即：按住 ctrl 然后单击一个单词）或按 F3 时执行此操作。

如果您愿意，您可以更改首选项中的 F3 绑定（窗口 > 首选项 > 通用键）。

# zend-framework - 在 Zend Framework 中过滤 URL 输入

> ID：13568365
> 
> 赞同：2
> 
> 时间：2012-11-26T15:53:18.813
> 
> 标签：zend-framework, zend-filter

在 Zend Framework中过滤 URL 输入（`$_GET`容器）的最佳方法是什么？

这是我当前的实现：我有一个`BookController`带有,和参数`indexAction`的 a 。首先，我获取这些参数并使用.`page``order``dir``_getParam()`

对于这些参数中的每一个，我在我的服务层中创建一个方法来验证和过滤特定参数。如果输入有效，则返回其过滤后的值，否则返回 FALSE。

在控制器中：

```
class BookController extends Zend_Controller_Action
{
    public function indexAction()
    {
        // Fetch params and define default values
        $page   = $this->getParam('page', 1);
        $order  = $this->getParam('order', 'id');
        $dir    = $this->getParam('dir', 'asc');

        // Instantiate service layer and validate individual parameters
        $service = new Service_Book;
        $page   = $bookService->validatePageFromUrl($page);
        $order  = $bookService->validateOrderFromUrl($order);
        $dir    = $bookService->validateDirFromUrl($dir);

        if ($page && $order && $dir)
        {
            // We're okay
        }
        else
        {
            // Redirect
        }
    }
} 
```

在服务层

```
class Service_Book
{
    public function validatePageFromUrl($page)
    {
        $filters = array(
            'page' => array(
                'HtmlEntities',
                'StripTags',
                'StringTrim'
                )
            );

        $validators = array(
            'page' => array(
                'int'
                )
            );

        $data['page'] = $page;

        $input = new Zend_Filter_Input($filters, $validators, $data);

        if ($input->isValid())
        {
            return $input->page;
        }
        else
        {
            return FALSE;
        }
    }

    public function validateOrderFromUrl($order)
    {
        $filters = array(
            'order' => array(
                'HtmlEntities',
                'StripTags',
                'StringTrim'
                )
            );

        $validators = array(
            'order' => array(
                array('InArray', 'haystack'  => $this->getColumnNames())
            )
        );

        $data['order'] = $order;

        $input = new Zend_Filter_Input($filters, $validators, $data);

        if ($input->isValid())
        {
            return $input->order;
        }
        else
        {
            return FALSE;
        }
    }

    public function validateDirFromUrl($dir)
    {
        $filters = array(
            'dir' => array(
                'HtmlEntities',
                'StripTags',
                'StringTrim'
                )
            );

        $validators = array(
            'dir' => array(
                array('InArray', 'haystack'  => array('asc', 'desc'))
            )
        );

        $data['dir'] = $dir;

        $input = new Zend_Filter_Input($filters, $validators, $data);

        if ($input->isValid())
        {
            return $input->dir;
        }
        else
        {
            return FALSE;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:06:08.297

我认为这`page`始终是 int 值。所以你可以使用`Zend_Filter_Int`. 因为`order`我也想用`InArray`。你的代码有点难。

# java - 用于@Autowired Singleton 线程安全的 Spring MVC 3

> ID：13568366
> 
> 赞同：3
> 
> 时间：2012-11-26T15:53:33.447
> 
> 标签：java, google-app-engine, spring-mvc, thread-safety, singleton

好吧，我在 MVC Spring 3 设计中从 Controller->Service->Repository 有 3 层。现在，我的问题是，由于默认范围定义为 Singleton，它们是线程安全的吗？

这是代码的样子：

用户控制器.java

```
@Controller
@RequestMapping("/users")
public class UserController extends ExceptionExtension {
     @Autowired
     private IUserService userService;

     @RequestMapping(value = { "/update", "/update/" }, method = RequestMethod.GET)
     public String updateUser(@RequestParam("email") String eMail, ModelMap model)
        throws Exception {

          if (eMail.isEmpty() || eMail == null) {
              throw new ArgumentIsEmptyException("Required String parameter 'email' is empty");
          } else {
              UserModel userModel = userService.setUser(eMail);

              if (userModel != null) {
                  model.put("roleList", userService.setRoleList());
                  model.put("title", "Update Existing User");
                  model.put("post", "/users/post/update");
                  model.put("userForm", userModel);

                  return "users.update";
              } else {
                  model.put("title", "Update Existing User");
                  model.put("result", "<font color='red'><u>" + eMail + "</u> does not exist in the database.</font>");
                  model.put("flag", "Error");

                  return "users.result";
              }
          }
     }
} 
```

用户服务.java

```
public class UserService implements IUserService {

    @Autowired
    private IUserManager userManager;

    public UserModel setUser(String eMail) {
        UserModel userModel = new UserModel();
        Entity userEntity = userManager.getUser(eMail);

        if (userEntity != null) {
            userModel.setEMail(eMail);
            userModel.setRole(userEntity.getProperty("role").toString());
            userModel.setEnable((Boolean)userEntity.getProperty("enable"));

            return userModel;
        } else {
            return null;
        }
    }
} 
```

假设用户 A 和用户 B 同时运行相同的 url 但参数不同。
用户 A 请求 =>“http://domain.com/users/update?user=myname1@domain.com”。
用户 B 请求 =>“http://domain.com/users/update?user=myname2@domain.com”。

由于控制器是单例的，用户 A 的电子邮件变量是否会与用户 B 重叠，反之亦然？

我很难理解单例线程安全在这种情况下是如何工作的。我的 @Service 和 @Repository 是否应该声明为 @Scope("prototype) 以便内部方法变量与新实例隔离？

====>

使用 Scope("request") 到我的 @Service 层，我遇到了这个错误消息：/

> 3328 [main] 错误 org.springframework.web.context.ContextLoader - 上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建名为“roleController”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 com.company.dashboard.service.IRoleService com.company.dashboard.controller.RoleController.roleService；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名称为“roleService”的 bean 时出错：范围“请求”对于当前线程无效；如果您打算从单例中引用它，请考虑为该 bean 定义一个作用域代理；嵌套异常是 java.lang.IllegalStateException：未找到线程绑定请求：您是指实际 Web 请求之外的请求属性，还是在原始接收线程之外处理请求？如果您实际上是在 Web 请求中操作并且仍然收到此消息，则您的代码可能在 DispatcherServlet/DispatcherPortlet 之外运行：在这种情况下，请使用 RequestContextListener 或 RequestContextFilter 来公开当前请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:01:14.527

这里线程安全取决于`userService`范围的内部锁定`singleton`

这就是最终发生的情况 => 相同的`userSpace`bean 用于两个请求并且两个请求同时访问`userService`bean。因此，`IUserService`需要线程安全才能使整个操作执行良好。

或者

> 把范围放到`request`.

在这种情况下，为每个请求分配一个新 bean，并且由于线程限制，整个操作是线程安全的。只要您在`IUserSpace`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:25:46.300

如果您制作任何层范围：原型，就像评论中建议的那样，您只是将问题再次移动到下面的层。

您需要决定您希望在哪里进行事务分界。通常，这是在对服务的调用级别完成的。Spring 可以为您处理。

控制器、服务和存储库通常应该以无状态方式实现，也就是说，这些类没有任何您的方法可以修改的实例变量。否则你将变得容易受到竞争条件的影响。最后，您的数据存储必须支持使用事务。

您使用 Google Appengine 数据存储。与任何 RDBMS 不同，它有一种非常具体的事务处理方法。要从 Java 应用程序与 appengine 交谈，我推荐使用“Objectify”。首先阅读 [关于它的概念]（以及底层 BigTable 数据存储[1](http://code.google.com/p/objectify-appengine/wiki/Concepts)的概念。

# git - git-describe 中的提交计数计算

> ID：13568372
> 
> 赞同：6
> 
> 时间：2012-11-26T15:53:47.080
> 
> 标签：git, branching-and-merging

谁能解释为什么 git describe 使用计数作为“将由 git log tag..input 显示的提交数” [来自[git-describe(1)](http://linux.die.net/man/1/git-describe) ]？

从概念上讲，我认为 git-describe 使用自标记以来的提交次数作为单调递增的计数器。但是，它似乎实际上使用了“输入”可达到的提交数减去“标签”可达到的提交数。这是为什么？

在这种特殊情况下，我创建了一个发布标签（“1.0.0”），然后在一个分支（“1.0”）上创建了一个补丁发布（“1.0.1”）。我已经合并 ​​[参见[http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html](http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html) ] 分支更改为 master。然而，当我在 master 上 git-describe 一个更新的提交时，计数与 git log tag..input 的输出相匹配。我希望它与 git log --ancestry-path tag..input 匹配。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:37:26.883

`git describe`是一种以`HEAD`有意义的方式进行交流的方式。这是对“我在历史上的什么位置”这个问题的简单回答。或“这是什么版本的代码？”

因此，当您运行命令时，它会从**您当前所在**的位置开始，无论是 的尖端`master`、其他标签还是随机提交。从这个起点开始，它通过提交向后计数，直到找到一个标签。从那里它将打印标签，计算的提交数，然后是简短的提交数。

# java - 如何在android触摸事件中绘制箭头？

> ID：13568377
> 
> 赞同：-4
> 
> 时间：2012-11-26T15:54:04.757
> 
> 标签：java, android, path, android-canvas

如何在android触摸事件中绘制箭头？

我试图绘制单独的直线和箭头。如何将箭头设置在正确的位置？

```
currentDrawingPath1.path.lineTo(motionEvent.getX()+5, motionEvent.getY());
currentDrawingPath1.path.lineTo(motionEvent.getX()-5, motionEvent.getY());
currentDrawingPath1.path.lineTo(motionEvent.getX(), motionEvent.getY()); 
```

上面的代码是画一个箭头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:35:13.087

我在下面的代码中尝试了这个。这对我有用，

```
enter code here

switch (event.getAction())
{
   case MotionEvent.ACTION_DOWN:
        mPath.reset();
    mPath.moveTo(x, y);
        mX = x;
        mY = y;
        startPoint = new PointF(event.getX(), event.getY());
        endPoint = new PointF();
        invalidate();

     //   isDrawing = true;
        break;
    case MotionEvent.ACTION_MOVE:
            float dx = Math.abs(x - mX);
        System.out.println("action move");
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE)
        {
        //  currentDrawingPath.path.quadTo(mX,mY,(x + mX)/2, (y + mY)/2);
        }
        mX = x;
        mY = y;
          endPoint.x = event.getX();
            endPoint.y = event.getY();
          isDrawing = true;

          invalidate();
        break;
    case MotionEvent.ACTION_UP:
           mPath.lineTo(mX, mY);
float deltaX =   endPoint.x-startPoint.x;
           float deltaY =   endPoint.y-startPoint.y;
           float frac = (float) 0.1;

           float point_x_1 = startPoint.x + (float) ((1 - frac) * deltaX + frac * deltaY);
           float point_y_1 = startPoint.y + (float) ((1 - frac) * deltaY - frac * deltaX);

           float point_x_2 = endPoint.x;
           float point_y_2 = endPoint.y;

           float point_x_3 = startPoint.x + (float) ((1 - frac) * deltaX - frac * deltaY);
           float point_y_3 = startPoint.y + (float) ((1 - frac) * deltaY + frac * deltaX);

           mPath.moveTo(point_x_1, point_y_1);
           mPath.lineTo(point_x_2, point_y_2);
           mPath.lineTo(point_x_3, point_y_3);
           mPath.lineTo(point_x_1, point_y_1);
           mPath.lineTo(point_x_1, point_y_1);

            mCanvas.drawPath(mPath, ppaint);
            endPoint.x = event.getX();
            endPoint.y = event.getY();
            isDrawing = false;

            invalidate();
        break;
    default:
        break;
} 
```

# javascript - 如何使用 Javascript 更改页面以进行键盘导航？

> ID：13568379
> 
> 赞同：0
> 
> 时间：2012-11-26T15:54:10.060
> 
> 标签：javascript, navigation, keyboard

我想允许照片库网站的键盘导航（一页，一张照片）。执行此操作的 Javascript 函数是什么？我使用下面的代码来管理键盘事件，我想知道如何实现“goToPage()”函数。谢谢你的帮助。

```
function checkKey(e)
{
  e = e || window.event;

  switch (e.key)
  {
    case "ArrowLeft":
      goToPage("page1.htm");
    break;

    case "ArrowRight":
      goToPage("page3.htm");
    break;
  }
}

document.onkeydown = checkKey; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:59:34.960

你需要一个[document.location](https://developer.mozilla.org/en-US/docs/DOM/document.location)：

```
function checkKeycode(e)
{
  var keycode;

  if (window.event)
    keycode = window.event.keyCode;
  else
    if (e) keycode = e.which;

  switch (keycode)
  {
    case 37:  // left arrow
      document.location = "page1.htm";
    break;

    case 39:  // right arrow
      document.location = "page3.htm";
    break;
  }
}

document.onkeydown = checkKeycode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:08:20.257

只要您的页面命名整齐，您就可以使用

```
document.location = "http://www.myURL" 
```

但是您的页面需要一个循环。有很多方法可以做到这一点，例如将数字附加到您传递的字符串：

```
var count = 0;
var html;
function previous(){
   html = "http://www.page" + count + ".htm"
   document.location = html;
}
function next(){
   var count +=1;
   html = "http://www.page" + count + ".htm"
   document.location = html;
} 
```

或将字符串存储在数组等中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T18:19:09.470

【2022更新版】

[document.location](https://developer.mozilla.org/en-US/docs/DOM/document.location)是我需要的功能：

```
function checkKey(e)
{
  e = e || window.event;

  switch (e.key)
  {
    case "ArrowLeft":
      document.location = "page1.htm";
    break;

    case "ArrowRight":
      document.location = "page3.htm";
    break;
  }
}

document.onkeydown = checkKey; 
```

# javascript - 将文本字段添加到 TextArea

> ID：13568382
> 
> 赞同：0
> 
> 时间：2012-11-26T15:54:17.707
> 
> 标签：javascript, jquery, textarea

我正在尝试开发应用程序，但无法填写 TextAreas：

```
var txt= window.localStorage.getItem("phrase");
var area=document.getElementById(window.localStorage.getItem("id_travail"));
$(area).val(txt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:57:27.463

也许您需要告诉 jQuery 该区域是一个 ID，除非您在 window.localStorage.getItem("id_travail") 中定义它

```
$("#"+area).val(txt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:05:51.173

您的代码工作正常（这是一个[功能小提琴](http://jsfiddle.net/zH2Na/)）。您的问题是：

1.  的返回值`window.localStorage.getItem("id_travail")`与页面上任何 textarea 的 ID 都不匹配。

2.  您的代码在 DOM 构建之前运行，因此`document.getElementById`无法找到 textarea，因为它尚不作为 DOM 元素存在。尝试将代码包装在 a`$(document).ready(function() { ... })`中，以便代码仅在构建 DOM 后运行。

# opengl - 将 FBO 复制到 VBO 时出错

> ID：13568383
> 
> 赞同：2
> 
> 时间：2012-11-26T15:54:24.970
> 
> 标签：opengl, vbo, fbo

在 GPU 上进行一些计算后，我想将存储在 FBO 中的结果复制到 VBO 以进行渲染。

*问题*：当我进行复制时，某些数据似乎已损坏。我已经检查了缓冲区的格式和大小，还检查了存储在 FBO 中的数据是否正确。

考虑以下初始化 FBO 的代码：

```
unsigned int verticesTextureId = AllocateTexture(GL_TEXTURE_RECTANGLE, mVBOSize, 1, GL_RGBA32F, GL_RGBA);
CHECK_FOR_OPENGL_ERRORS();

unsigned int normalsTextureId = AllocateTexture(GL_TEXTURE_RECTANGLE, mVBOSize, 1, GL_RGBA32F, GL_RGBA);
CHECK_FOR_OPENGL_ERRORS();

SetUpViewport(mVBOSize, 1);

glBindFramebuffer(GL_FRAMEBUFFER, mFBOId);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_RECTANGLE, verticesTextureId, 0);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_RECTANGLE, normalsTextureId, 0); 
```

以下代码初始化 VBO 并将数据从 FBO 复制到 VBO：

```
mVerticesBufferId = AllocateVBO();
CHECK_FOR_OPENGL_ERRORS();

glBindBuffer(GL_PIXEL_PACK_BUFFER, mVerticesBufferId);
glBufferData(GL_PIXEL_PACK_BUFFER, mVBOSize * 4 * sizeof(float), 0, GL_STATIC_DRAW);

mNormalsBufferId = AllocateVBO();
CHECK_FOR_OPENGL_ERRORS();

glBindBuffer(GL_PIXEL_PACK_BUFFER, mNormalsBufferId);
glBufferData(GL_PIXEL_PACK_BUFFER, mVBOSize * 4 * sizeof(float), 0, GL_STATIC_DRAW);

glReadBuffer(GL_COLOR_ATTACHMENT0);
glBindBuffer(GL_PIXEL_PACK_BUFFER, mVerticesBufferId);
glReadPixels(0, 0, mVBOSize, 1, GL_RGBA, GL_FLOAT, 0);

glReadBuffer(GL_COLOR_ATTACHMENT1);
glBindBuffer(GL_PIXEL_PACK_BUFFER, mNormalsBufferId);
glReadPixels(0, 0, mVBOSize, 1, GL_RGBA, GL_FLOAT, 0); 
```

在这里，我将 VBO 绑定为顶点/法线属性并调用绘图：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);

glBindBuffer(GL_ARRAY_BUFFER, mVerticesBufferId);
glVertexPointer(4, GL_FLOAT, 4 * sizeof(float), 0);

glBindBuffer(GL_ARRAY_BUFFER, mNormalsBufferId);
glNormalPointer(GL_FLOAT, 4 * sizeof(float), 0);

glDrawArrays(GL_POINTS, 0, mVBOSize);

glDisableClientState(GL_NORMAL_ARRAY);
glDisableClientState(GL_VERTEX_ARRAY); 
```

在此调用之后，大多数点都正确显示在屏幕上，但有些点却奇怪地显得格格不入。这似乎与信号或钳位无关，因为具有负数或大于 1 分量的顶点正在正确显示。

我附上了未正确渲染的*kosh 雪花（曲线）的图片。*

1）顶点呈现为点：

![Kosh Snowflake（错误的顶点用红色圆圈四舍五入）](../Images/ad4bc96ad97bb4856a9c07e65e0c585e.png)

2) 使用简单的几何着色器将顶点渲染为线条：

![Kosh Snowflake（错误的顶点以红色圈出）](../Images/2cb81394224d953c0f548596a97d1840.png)

参考图片：

![正确的科什雪花](../Images/9ae8cbda931bacd89c61314d53016de1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:02:47.430

使用 gDEBugger 我发现我的 VBO 上的数据也是正确的。问题是在片段着色器计算之后，我的向量的同质分量（w）上有垃圾，这对变换产生了不必要的影响。

# c - C 睡眠功能不工作

> ID：13568388
> 
> 赞同：13
> 
> 时间：2012-11-26T15:54:32.350
> 
> 标签：c, sleep, unistd.h

当从程序中包含睡眠功能时，`unistd.h`无限期挂起：

```
#include <stdio.h>
#include <unistd.h>

int main()
{
        int i;
        printf("0 ");
        for(i = 1; i <20; ++i)
        {
            sleep(2);
            printf("%d ", i);
        }
        printf("\n");

        return 0;
} 
```

其余的在`sleep(2)`被注释掉时运行良好，有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T15:57:32.530

代码没有问题，但请注意，在许多情况下，输出`printf`是缓冲的，这意味着只有当您显式调用`fflush(stdout)`、打印换行符或缓冲区已满时，输出才会出现在控制台上。由于您直到最后才打印换行符，因此您将在 40 秒内在 for 循环中看不到任何内容（因为`printf`打印的内容仍在缓冲区中）。然后，当执行命中时`printf("\n")`，所有内容都会在缓冲区被刷新时立即打印出来。

因此，底线是：要么在调用`fflush(stdout)`之前调用`sleep`以确保输出缓冲区中没有任何内容，要么等待 40 秒，最终您将在单个批次中获得输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T16:07:36.490

`hangs indefinitely`意味着它被卡住或不确定，并且不会发生。您的代码工作正常，在 38 秒 (19 *2) 后，它会转储从 0 到 19 计数的字符串。但是我怀疑这是您正在寻找它做的事情：

```
int main()
{
        int i;
        printf("0 ");
        fflush(stdout);  // Force the output to be printed
        for(i = 1; i <20; ++i)
        {
            sleep(2);
            printf("%d ", i);
            fflush(stdout); // Force the output to be printed
        }
        printf("\n");

        return 0;
} 
```

流是缓冲的`stdout`，并且只会在它遇到换行符时显示，`'\n'`或者如果您想在调用时“实时”查看它，`printf()`您需要强制它以一种或另一种方式刷新缓冲区。调用`fflush(stdout)`将执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:03:37.773

你是在 Windows 电脑上吗？如果是这样，包括`<windows.h>`在你的程序中，并暂停程序，写

```
Sleep(time_in_milliseconds) 
```

在你的情况下 time_in_milliseconds 应该是 2000。

另一方面，如果您使用的是基于 UNIX 的计算机，则代码看起来不错（不需要`<windows.h>`）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-15T22:47:51.727

在研究我在 Windows 上遇到的问题时，我遇到了你的问题。

我有一个命令行程序，它有 2 个线程，一个用于读取数据，另一个用于写入数据（在队列中）。

每隔 30 秒，阅读器（初始进程）会写出一条进度消息，并且似乎挂起，所以我按了 Ctrl-C 一次，发现我的程序实际上正在继续（Ctrl-C 一次并没有杀死它）。

无论如何，在尝试弄清楚发生了什么时，我启动了另一个控制台窗口并运行了命令：

```
for /l %g in () do @(dir & timeout /t 2) 
```

每隔一段时间它也会锁定，Ctrl-C 会释放它。

Windows 中似乎存在某种错误，当系统真的很忙时，睡眠功能不会返回（Ctrl-C 似乎可以解锁它）。

无论如何，希望对某人有所帮助。

# rendering - DirectX11 中的最佳顶点缓冲区处理

> ID：13568389
> 
> 赞同：3
> 
> 时间：2012-11-26T15:54:36.950
> 
> 标签：rendering, directx-11, sharpdx

我正在编写一些使用 D3D11（用于 WinRT 应用程序的 SharpDX）绘制 2D 精灵的代码。所有这些都有效，但速度并不快。这是我正在使用的一些代码：

```
 // Setup local variables
        var d3dDevice = App.deviceManager.DeviceDirect3D;
        var d3dContext = App.deviceManager.ContextDirect3D;

        var vertices = SharpDX.Direct3D11.Buffer.Create(App.deviceManager.DeviceDirect3D, BindFlags.VertexBuffer, new[]
        {
            // Position                                  Colour                      UV
            x0 - OFFSET, y0 - OFFSET, 0.0f, 1.0f ,       1.0f, 1.0f, 1.0f, 1.0f,     u, v,
            x1 - OFFSET, y1 - OFFSET, 0.0f, 1.0f ,       1.0f, 1.0f, 1.0f, 1.0f,     u2, v,
            x3 - OFFSET, y3 - OFFSET, 0.0f, 1.0f ,       1.0f, 1.0f, 1.0f, 1.0f,     u, v2,
            x2 - OFFSET, y2 - OFFSET, 0.0f, 1.0f ,       1.0f, 1.0f, 1.0f, 1.0f,     u2, v2,
        });

        textureView = new ShaderResourceView( App.deviceManager.DeviceDirect3D, texture );

        // Setup the pipeline
        d3dContext.InputAssembler.SetVertexBuffers( 0, vertexBufferBinding );
        d3dContext.InputAssembler.InputLayout = layout;
        d3dContext.InputAssembler.PrimitiveTopology = PrimitiveTopology.TriangleStrip;
        d3dContext.VertexShader.SetConstantBuffer( 0, constantBuffer );
        d3dContext.VertexShader.Set( vertexShader );
        d3dContext.PixelShader.Set( pixelShader );

        if( textureView != null )
            d3dContext.PixelShader.SetShaderResource( 0, textureView );

        // Draw the quad
        d3dContext.Draw( 4, 0 ); 
```

屏幕上渲染的每个精灵都会调用此代码。我不能保证每个精灵的寿命。他们可能在下一帧的相同位置或不同的位置。可以有更多，也可以更少。根据我的分析器，在渲染大量精灵时，SharpDX.Direct3D11.Buffer.Create 占用了整个帧的 50%。我认为有更好的方法可以做到这一点，但我正在努力弄清楚该怎么做。任何人都可以为此提供任何建议吗？

# asp.net-mvc - 来自客户端的 ASP.NET MVC 服务器端验证

> ID：13568393
> 
> 赞同：0
> 
> 时间：2012-11-26T15:55:00.710
> 
> 标签：asp.net-mvc, validation

我有完整的项目，我想使用 mvc 验证。

这是我在控制器中的 Save 方法，我使用 ajax 从 javascript 调用：

```
public void Save(Activity activity)
{
    using (ActivityManager manager = new ActivityManager())
    {
        manager.SaveActivity(activity);
    }
} 
```

由于我的 Save 方法无效，我不想使用 Model.IsValid 服务器端验证，因为由于 ajax 调用，我不能也不想返回 actionresult。

我需要一个使用服务器端模型属性的客户端验证，但我没有找到任何可行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:32:40.567

我相信您应该能够使用数据注释来装饰您的类，然后使用 jQuery 验证来进行客户端验证：

类定义：

```
public class Person{

[Required(ErrorMessage="This field is required")]
public int ID {get;set;}

} 
```

JS/jQuery 工作：

```
$("form").submit(function(){
    if($("form").valid()){
         return true;
    }else{
        return false;
    }
}); 
```

# c++ - C++ 结构模板

> ID：13568396
> 
> 赞同：7
> 
> 时间：2012-11-26T15:55:08.817
> 
> 标签：c++, templates, struct

我尝试使用模板和结构，但它们不起作用。我搜索了很多，但我找不到解决方案。

```
#include <iostream>

using namespace std;

template<struct S>
int add(S s) {
    return s.num + s.num2;
}

int main() {

    struct {
        int num = 10;
        int num2 = 20;
    } test;

    cout << add(test) << endl;
    return 0;
} 
```

使用 gcc 的错误是：

```
test.cpp:5:17: error: ‘struct S’ is not a valid type for a template non-type parameter
test.cpp: In function ‘int add(S)’:
test.cpp:6:5: error: ‘s’ has incomplete type
test.cpp:5:17: error: forward declaration of ‘struct S’
test.cpp: In function ‘int main()’:
test.cpp:13:19: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]
test.cpp:14:20: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]
test.cpp:17:21: error: no matching function for call to ‘add(main()::<anonymous struct>&)’
test.cpp:17:21: note: candidate is:
test.cpp:6:5: note: template<<declaration error> > int add(S)
test.cpp:6:5: note:   template argument deduction/substitution failed:
test.cpp:17:21: note:   cannot convert ‘test’ (type ‘main()::<anonymous struct>’) to type ‘S’ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:57:21.760

您不能在`struct`此处使用关键字。使用`class`or `typename`（您仍然可以使用 a 实例化您的模板`struct`）。

编辑：您的其他问题`struct`与`main`. 不记得我脑海中的规则（也许其他人可以解释它们），但无论如何这是一种非常奇怪的做事方式，所以我只提供一个工作版本：http: [//ideone.com/VGIogH](http://ideone.com/VGIogH)

有点相关：[我们可以有一个匿名结构作为模板参数吗？](https://stackoverflow.com/questions/4573090/can-we-have-an-anonymous-struct-as-template-argument)

再次编辑：您最初写的内容，匿名作品（在模板中替换后）带有`struct`，但*不是*没有（即c ++ 03）。`main``struct``--std=c++11`

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T15:58:25.730

在 C++ 中，a`struct`和 a`class`基本相同，只是默认访问说明符`public`在前者和`private`后者中。另一方面，定义模板类型参数的语法需要使用`class`or`typename`关键字（不要`class`在这里与 OO 意义上的*类*混淆，它可以是*任何*类型）。

```
template <typename S>          // equivalently class S
int add(S s) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:07:27.217

除了在模板中用 typename 替换 struct 之外，我的编译器（GCC）说你不能直接初始化你的 struct 成员，所以你可以这样做：

```
#include <iostream>

using namespace std;

template<typename S>
int add(S s) {
   return s.num + s.num2;

}

int main() {

   struct {
       int num;
       int num2;
   } test;

   test.num = 10;
   test.num2 = 20;

   cout << add(test) << endl;
   return 0;
} 
```

编辑：你必须让你的模板知道你的结构是什么：

```
#include <iostream>

using namespace std;

struct MyStruct {
   int num;
   int num2;
};
template<typename S>
int add(S s) {
   return s.num + s.num2;

}

int main() {

   MyStruct test;

   test.num = 10;
   test.num2 = 20;

   cout << add(test) << endl;
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:55:57.493

你的问题是你曾经看到有人写：

```
template<class A>
bool foo( A* a ) { 
  return *a;
} 
```

或类似的东西，并认为这`class`意味着 A 必须是`class`.

这里实际发生的是 C++ 语法有时很糟糕。回到最初编写模板时，他们`class`在模板参数列表中重用关键字 ( ) 来表示“类型”，而不是您可以传递给模板的其他内容（例如 an `int`）。

这是一个非常令人困惑的语法。碰巧，这相当于上面的：

```
template<typename A>
bool foo( A* a ) {
  return *a;
} 
```

除了它更清楚地表明 A 可以是*任何*类型。

但是，有很多 C++ 代码从什么时候`class`开始是在模板参数中指定“类型”的正确方法，所以 C++ 继续允许它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-26T15:59:22.507

它不适用于匿名类型，您必须在函数调用中指定类型：

```
#include <iostream>

using namespace std;

template<typename S>
int add(S s) {
    return s.num + s.num2;
}

int main() {

    struct A {
        int num = 10;
        int num2 = 20;
    } test;

    cout << add<A>(test) << endl;
    return 0;
} 
```*

# magento - 如何在 Magento 上按属性过滤

> ID：13568398
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:55:11.187
> 
> 标签：magento, magento-1.7

我一直在寻找这个问题的解决方案。我找到了一些信息，但我不知道编程的确切步骤。

我创建了属性：液压、电气、电池、灯。这些属性内部还有其他额外的属性，并且一个以上的类别可以有来自每个属性的产品。

我需要的是**按属性**过滤。如果我单击我创建的按钮，我需要按这四个属性（而不是类别）进行过滤。

我已经看到了解决方案，但我无法理解它们。我非常感谢有关特定说明的一些帮助。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:20:24.503

如果我得到您想要做的事情，那么当您转到属性设置并将“在分层导航中使用”设置为“可过滤”时，它应该默认工作吗？

# javascript - jQuery 历史和变量范围

> ID：13568399
> 
> 赞同：0
> 
> 时间：2012-11-26T15:55:13.527
> 
> 标签：javascript, jquery, history.js

我想使用 jQuery 的 history.js 插件。代码是：

```
// Global
var History = window.History;
$(document).ready(function() {
  History.Adapter.bind(window, 'statechange', function(){
    console.log('Yeeeeeeaah!');
  });
  window.History.pushState(null, null, '#42');  // Yeeeeeeaah!
});
function anotherFunc() {
  window.History.pushState(null, null, '#test');  // Nothing happens
} 
```

范围有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:04:22.700

你没有执行`anotherFunc`。

范围没有任何问题，但是您可以省略`var History = window.History`and just used `History`。

# php - Magento - 致命错误：类'Mage_Http：_Helper'

> ID：13568405
> 
> 赞同：2
> 
> 时间：2012-11-26T15:55:31.223
> 
> 标签：php, magento, mage

所有网页中都出现了一个致命错误：

> 致命错误：在第 521 行的 /web/htdocs/www.dolcefuoco.com/home/app/Mage.php 中找不到类“Mage_Http:_Helper”

该错误与以下功能有关：

```
public static function helper($name)
{
    if (strpos($name, '/') === false) {
        $name .= '/data';
    }

    $registryKey = '_helper/' . $name;
    if (!self::registry($registryKey)) {
        $helperClass = self::getConfig()->getHelperClassName($name);
        self::register($registryKey, new $helperClass);
    }
    return self::registry($registryKey);
} 
```

第 521 行是：

```
self::register($registryKey, new $helperClass); 
```

在日志警告下方：

```
2012-11-26T22:27:10+00:00 ERR (3): Warning: include(Mage/Http:/Helper.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory  in /web/htdocs/www.dolcefuoco.com/home/lib/Varien/Autoload.php on line 93
2012-11-26T22:27:10+00:00 ERR (3): Warning: include() [<a href='function.include'>function.include</a>]: Failed opening 'Mage/Http:/Helper.php' for inclusion (include_path='/web/htdocs/www.dolcefuoco.com/home/app/code/local:/web/htdocs/www.dolcefuoco.com/home/app/code/community:/web/htdocs/www.dolcefuoco.com/home/app/code/core:/web/htdocs/www.dolcefuoco.com/home/lib:.:/php5/lib/php/')  in /web/htdocs/www.dolcefuoco.com/home/lib/Varien/Autoload.php on line 93 
```

而这里的 autoload.php 函数正在产生问题：

```
 * Register SPL autoload function
 */
static public function register()
{
    spl_autoload_register(array(self::instance(), 'autoload'));
}

/**
 * Load class source code
 *
 * @param string $class
 */
public function autoload($class)
{
    if ($this->_collectClasses) {
        $this->_arrLoadedClasses[self::$_scope][] = $class;
    }
    if ($this->_isIncludePathDefined) {
        $classFile = $class;
    } else {
        $classFile = str_replace(' ', DIRECTORY_SEPARATOR, ucwords(str_replace('_', ' ', $class)));
    }
    $classFile.= '.php';
    //echo $classFile;die();
    return include $classFile;
} 
```

第 93 行是：

```
return include $classFile; 
```

我能做些什么来修复它？非常感谢任何建议，该网站已关闭！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:33:00.517

您的 config.xml 是否引用了任何帮助程序？（已进行的任何自定义添加/更改）

如果是这样，则其中的路径/设置可能不正确，或者可能缺少所需的内容。

# jquery - 动态对齐 div jquery

> ID：13568409
> 
> 赞同：0
> 
> 时间：2012-11-26T15:55:44.067
> 
> 标签：jquery, jquery-ui

我试图创建一个可以制作盒子的函数，与以下选项对齐

1.  `$("#roundbox").divAlign({vertical:"top",horizontal:"left"});`- 应该在它的父母左上角制作盒子，

2.  `$("#roundbox").divAlign({vertical:"top",horizontal:"center"});`- 应该在它的父母的顶部中心制作盒子，

3.  `$("#roundbox").divAlign({vertical:"top",horizontal:"right"});`- 应该在它的父母的右上角制作盒子，

4.  `$("#roundbox").divAlign({vertical:"center",horizontal:"left"});`

5.  `$("#roundbox").divAlign({vertical:"center",horizontal:"center"});`- 屏幕中心

6.  `$("#roundbox").divAlign({vertical:"center",horizontal:"right"});`- 居中但在右侧

你能指导我如何用更少的代码来实现，不像我在下面所做的那样。

```
(function($){
     $.fn.extend({
          divalign: function (options) {
               var options =  $.extend({ // Default values
                    inside:window, // element, center into window
                    vertical:'center',
                    horizontal:'center'
               }, options);
               return this.each(function() {
                        var props = {position:'absolute'};
                        if (options.vertical=="center" && options.horizontal=="center"){
                            var div_height = $(options.inside).height() / 2;
                            var div_width = $(options.inside).width() / 2;
                            $.extend(props, {top:'50%'},{left: '50%'},{'margin-top': div_height + 'px'},{'margin-left': div_width+'px'});
                        }else if(options.vertical=="top" && options.horizontal=="left"){
                            $.extend(props, {'margin-top':'5%'},{left: '2%'});
                        }
                    $(this).css(props);
                    return $(this);
               });
          }
     }); })(jQuery); 
```

视觉表现： ![在此处输入图像描述](../Images/7cea244f16a4915cae2fd5bc1b573505.png)

谢谢。

# c# - 如何访问 EPPlus 中的工作表？

> ID：13568411
> 
> 赞同：20
> 
> 时间：2012-11-26T15:55:52.957
> 
> 标签：c#, epplus

我正在使用 EPPlus 库的 3.1 版本来尝试访问 Excel 文件中的工作表。当我尝试以下任一方法时，我得到一个`System.ArgumentException : An item with the same key has already been added`.

```
using (ExcelPackage package = new ExcelPackage(new FileInfo(sourceFilePath)))
{
   var worksheet = package.Workbook.Worksheets[0];

   // OR

   foreach (var excelWorksheet in package.Workbook.Worksheets)
   ...
} 
```

异常堆栈：

```
System.ArgumentException : An item with the same key has already been added.
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at OfficeOpenXml.ExcelNamedRangeCollection.Add(String Name, ExcelRangeBase Range)
   at OfficeOpenXml.ExcelWorkbook.GetDefinedNames()
   at OfficeOpenXml.ExcelPackage.get_Workbook() 
```

这似乎是非常基本的功能已经被破坏了..我做错了什么吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-17T03:03:32.193

我相信 excel 的工作表来自索引 1 而不是索引 0

```
 var worksheet = package.Workbook.Worksheets[0]; 
```

应该

```
var worksheet = package.Workbook.Worksheets[1]; 
```

阅读第一个工作表。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-06T14:44:19.110

此外，您可以通过引用名称来管理它们：

```
var worksheet = package.Workbook.Worksheets["Sheet1"]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-24T10:16:08.117

至少对于 Epplus 3.1.3.0，您可以简单地使用以下内容访问第一个工作表。

```
ExcelWorksheet workSheet = excel.Workbook.Worksheets.First(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-26T18:10:39.847

有问题的工作簿已定义命名范围。这些导致了问题，所以我创建了一个新的 xlsx 文件，其中只包含我需要的数据并且它能够正常打开。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-25T11:03:06.403

确保使用 MS Excel（不是 OpenOffice、Libre Office 等）创建或保存的文档

# java - 如何在 Eclipse 中不在工作区中的文件中查找文本？

> ID：13568417
> 
> 赞同：0
> 
> 时间：2012-11-26T15:56:14.980
> 
> 标签：java, eclipse

我想在 Eclipse 中打开的文件中查找文本。但是该文件不包含在工作区中。我正在使用 Juno 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:05:17.477

`ctrl`+`f`确实有效:)

（`cmd`+`f`适用于 Mac 用户）

如前所述，此对话框可以通过菜单打开：`Edit -> Find`

# java - 在车队管理应用程序中使用 node.js

> ID：13568422
> 
> 赞同：3
> 
> 时间：2012-11-26T15:56:35.717
> 
> 标签：java, javascript, node.js, asynchronous, socket.io

我有一个 GPS 车队管理应用程序，我认为它会从使用 node.js 中受益匪浅。我刚开始研究 node.js，仍然认为我还有很多东西要学，但希望能得到您的建议和指导。

为了让您了解我们当前的设置：

> java 应用程序接收、编译和解析 gps 记录到 mySql db。通过我们的应用程序，用户每 6 秒查询一次数据库，以获取特定 gps 单元的最后一条记录。白天有大约 900 万条记录插入到数据库中。

所以我想做的是在我们的java应用程序中使用和包含node.js，并利用它将gps数据发送到客户端浏览器，而无需将其查询到数据库中。换句话说，我正在考虑做一个小功能来检查 gps id（总共约 5000 个 id）并与客户端 id（总共 200 个）进行比较，然后将其发送到所需的 node.js 通道。

如果我对 node.js 没有太多经验，如果您能告诉我我的逻辑是否合理并且 node.js 是正确的方法，我将不胜感激？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T03:41:01.010

如果您已经在使用 Java，为什么不使用 CometD（[http://cometd.org/](http://cometd.org/)）之类的东西，它具有与 Socket.io 相同（或相似）的推送功能，并且它已经基于 Java。如果您使用的是 Jetty 以外的 java 容器，Atmosphere ( [https://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere) ) 是另一个不错的选择，它有很多容器支持。

一般来说，我认为你的设计对于“实时”来说有点缺陷。当您获得更新时，如果他们已连接并且对信息有有效的“订阅”，您应该直接将它们推送给客户。您仍然可以更新数据库，但为什么数据库是“推送”模型中此信息的中央票据交换所？在并行更新数据库时，直接推送到某种 websocket 样式的解决方案会更有意义。然后查询数据库的唯一人是登录新会话以获取“最后历史点”的用户，并且所有后续更新都被推送而无需任何数据库查询。

有人有什么想法吗？

# jquery - 通过ajax添加字段后将jquery ui datepicker重新应用于类

> ID：13568424
> 
> 赞同：0
> 
> 时间：2012-11-26T15:57:00.643
> 
> 标签：jquery, jquery-ui, datepicker

我有一个包含主要数据的表单，用户可以通过下拉字段指定此模型的类别。当用户选择一种类型时，类型特定的字段将通过 ajax 加载。这工作得很好，但其中一些 `class="date"`应该添加日期选择器。当然，我知道只要我`datepicker`再次调用该方法，它就不会起作用。所以我再次这样做：

```
$(".date").datepicker({
  dateFormat: 'dd.mm.yy'
}); 
```

但它不起作用。这是我第一次应用日期选择器时使用的相同代码，但在第二次没有任何反应。有人在这里看到失败吗？

// 指定失败：它不像从工作字段中删除日期选择器，但它们只是简单地不适用于通过 ajax 加载的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:58:05.933

必须首先**销毁**日期选择器才能添加新的。

所以试试这个：

```
$(".date").datepicker("destroy").datepicker({
  dateFormat: 'dd.mm.yy'
}); 
```

# google-apps-script - 根据单元格值隐藏列

> ID：13568425
> 
> 赞同：7
> 
> 时间：2012-11-26T15:57:08.490
> 
> 标签：google-apps-script, google-sheets

在我的谷歌电子表格 A 中，我结合使用 TRANSPOSE 和 IMPORTRANGE 公式从日历电子表格 B 导入数据，以填写活动的工作时间表。因为在每个日期都有 3 个活动空档，但并不总是被填满，所以我收到了很多过时的专栏。

表布局：

```
row1:  01-01-2013  01-01-2013  01-01-2013  02-01-2013
row2:  Event_ID    Event_ID    Event_ID    Event_ID
row3:  Event_name  Event_name  Event_name  Event_name 
```

第 1 行和第 2 行包含自动生成的日期和 event_ID，因此它们永远不会为空。单元格编号。当没有事件添加到该插槽时，3 显示为空，但实际上那里有一个 CONTINUE 公式可以从单元格 A1 继续导入范围公式。

我正在寻找一个脚本来自动隐藏单元格 nr 中的列。3 不包含导入的数据。

不了解 JavaScript（但愿意学习），我尝试将现有脚本中的片段组合起来，但此时我无法理解这些代码......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:38:27.743

以下代码可以解决问题：

```
function onOpen() {
  // get active spreadsheet
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  // create menu
  var menu = [{name: "Hide columns", functionName: "hideColumn"},
    {name: "Show all columns", functionName: "showColumn"}];

  // add to menu
  ss.addMenu("Check", menu);
}

function hideColumn() {
  // get active spreadsheet
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  // get first sheet
  var sheet = ss.getSheets()[0];

  // get data
  var data = sheet.getDataRange();

  // get number of columns
  var lastCol = data.getLastColumn()+1;

  Logger.log(lastCol);

  // itterate through columns
  for(var i=1; i<lastCol; i++) {
     if(data.getCell(3, i).getValue() == '') {
        sheet.hideColumns(i);
     }
  }
}

function showColumn() {
  // get active spreadsheet
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  // get first sheet
  var sheet = ss.getSheets()[0];

  // get data
  var data = sheet.getDataRange();

  // get number of columns
  var lastCol = data.getLastColumn();

  // show all columns
  sheet.showColumns(1, lastCol);
} 
```

1.  打开文件时创建菜单
2.  第一个菜单选项，隐藏第 3 行为空的所有列
3.  第二个选项，显示所有隐藏的列

请参阅我准备观看的示例文件：[基于单元格值隐藏列](https://docs.google.com/spreadsheet/ccc?key=0AluAYY6ZHeWYdDlWUVgtUVJnOGVYVGkwVTRQUWRUN0E)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:08:24.807

除了 Jacob 的回答之外，还可以将过滤器写入公式本身，以仅显示第 3 行中包含数据的列。例如，如果您在 A1 中的 ImportRange 公式为：

`=ImportRange("key";"A1:Z3")`

你可以改用这个：

`=FILTER(ImportRange("key";"A1:Z3");LEN(ImportRange("key";"A3:Z3")))`

或者这个，它只使用一个 ImportRange 调用：

`=TRANSPOSE(QUERY(TRANSPOSE(ImportRange("key";"A1:Z3"));"select * where Col3 != ''"))`

# c++ - 随机未在范围内声明

> ID：13568426
> 
> 赞同：8
> 
> 时间：2012-11-26T15:57:18.530
> 
> 标签：c++, include

我收到错误消息：

> tester.cpp|20|错误：未在此范围内声明“rand”|

我错过了在这里包含一些东西吗？

```
void tester::volumeset(bool A_B, int i, int v)
{
    if (A_B == true)
    {
        A_volumn[i] = rand(v+1);
    }else{
        B_volumn[i] = rand(v+1);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T15:59:45.533

`random`不是标准的 C++ 函数；这是一个[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/random.html)函数，因此在 Windows 上不可用。改用[`rand`](http://en.cppreference.com/w/c/numeric/random)或更好地使用新的[C++11 随机库](http://en.cppreference.com/w/cpp/numeric/random)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-29T20:52:02.573

`rand`是的一部分`cstdlib`，请尝试将其包含`cstdlib`在您的代码中。

`#include <cstdlib>`

或者

`#include <stdlib.h>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T16:00:09.900

你想用`rand()`，没有`random()`。您可以在此处查看如何使用它的一些示例：[http ://www.cplusplus.com/reference/cstdlib/rand/](http://www.cplusplus.com/reference/cstdlib/rand/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-11T13:57:23.447

当我使用 Code::Blocks 编译我的代码时，我不需要`#include <cstdlib>`使用 DevC++，我只是添加了`#include <cstdlib>`它，它对我有用。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-01-09T17:20:42.483

`enter code here`仅包括#include 或#include 可能不起作用最好使用，例如当我使用rand(100) 时遇到挑战，但当我使用rand()%100 时它工作得很好。尝试并享受它。

```
for(i=0;i<cust;i++)
{

  rsr[i]=rand(100);
 }

it works when I change it to 
 for(i=0;i<cust;i++)
 {

  rsr[i]=rand()%100;
  } 
```

如果你想让它 1-100 使用下面但 0-99 使用上面

```
for(i=0;i<cust;i++)
 {

  rsr[i]=rand()%(100+1);
  }

for(i=0;i<cust;i++)
 {

  rsr[i]=rand()%100+1;
  } 
```

# lucene - Lucene 和\或 JFlex 中的字符转换规则

> ID：13568427
> 
> 赞同：0
> 
> 时间：2012-11-26T15:57:20.063
> 
> 标签：lucene, jflex

我是 Lucene 的新手，没有足够的时间浏览整个文档。我们正在使用 Lucene 荧光笔来突出显示匹配项。据我所知，Lucene 本身正在使用 JFlex 引擎。当前任务需要引入新的语言支持。根据要求，像 ειναι 这样的词应该匹配 είναι，反之亦然。人们在输入消息时通常会避免使用重音，因此带有重音的单词必须与没有重音的相同单词匹配。所以，我的问题是我们是否可以在 Lucene 或 JFlex 字符转换规则中指定某处，如 U+038A->U+03B9 ？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:41:19.180

不确定角色转换......但你可以做几件事：

*   应用 ISOLatin1AccentFilter（在您的分析器中），以便在非重音搜索中将重音词视为匹配项。 [http://www.dotlucene.net/documentation/api/Lucene.Net.Analysis.ISOLatin1AccentFilter.html](http://www.dotlucene.net/documentation/api/Lucene.Net.Analysis.ISOLatin1AccentFilter.html)

*   使用 Lucene 模糊搜索 [http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Fuzzy](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Fuzzy) Searches

从我使用的情况来看，这不是一个简单的配置设置。Solr 可能有类似的东西。Lucene 是一个裸库，通常可以让您灵活地确定“业务逻辑所在”的位置……在搜索、分析器/过滤器或索引设计本身中。

# excel - 根据开始和结束日期格式化单元格？

> ID：13568429
> 
> 赞同：1
> 
> 时间：2012-11-26T15:57:26.197
> 
> 标签：excel, vba

我有两列`Start`和`Finish`（两个日期），我想将它们用于条件格式。在开始和结束列的右侧，我基本上有一个日历，每列代表一个月（例如，J 代表一月，F 代表二月，M、A 等）。在这个日历中，我想填写指示开始日期和结束日期的两个单元格。例如，如果我的`Start`值是 2013 年 1 月，而我的`Finish`值是 2013 年 3 月，它会将填充应用于这些相应的单元格。

我已经探索了“条件格式”菜单，我假设我必须使用一个公式，但我不确定如何实现一个公式。这是最好的方法吗？还有其他方法吗？VB 会简化这个任务吗？

我假设我可以对每个单元格应用条件格式，类似于以下伪代码：

```
=IF(startDate is January 2013) then use the formatting defined in this dialog box
=IF(startDate is February 2013) then use the formatting defined in this dialog box 
```

每个日期依此类推。但是，我对语法持谨慎态度。Per [Tech on the Net](http://www.techonthenet.com/excel/formulas/if.php)，它定义了`=IF`如下语法：

```
IF( condition, [value_if_true], [value_if_false] ) 
```

显然，`condition`它与日期匹配，而 value_if_true 和 value_if_false 对我来说真的没有意义，因为我没有返回值，我只是有条件地格式化单元格。

谢谢！

更新：这里是大体布局的图片，也就是每个任务有一行，对应日历。

![电子表格](../Images/87f7db394ce7006f8c6c6abe2dbc6d9b.png)

这是我尝试用于条件格式的公式：

```
=MONTH($B6)=COLUMNS($D6:AM6) 
```

我想我需要以不同的方式设置我的列标题几个月。现在，为了简洁起见，它们只是作为文本的单个字母，但我将输入日期并正确格式化标题。会随着进度更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:14:45.130

你是说每个月只有一个单元格吗？如果是这样，那么假设 A2 中的开始日期，B2 中的结束日期，然后 D2:O2 中的 12 个月单元格，然后试试这个：

选择 D2:O2 并在条件格式中应用此公式

`=MONTH($A2)=COLUMNS($D2:D2)`

应用所需格式 > 确定

# android - Android 谷歌地图在长按/长按上获取位置/坐标/地理点

> ID：13568431
> 
> 赞同：0
> 
> 时间：2012-11-26T15:57:27.303
> 
> 标签：android, google-maps, latitude-longitude, long-press

当用户长按谷歌地图时，我花了很多时间将纬度和经度作为地理点。我找到了一个解决方案，我将其作为答案分享。如果有人有其他或更好的，也请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:57:27.303

解决方案可以在[这里找到](http://www.kind-kristiansen.no/2011/android-handling-longpresslongclick-on-map-revisited/)

# c# - C#过滤列表使用动态查询库？

> ID：13568432
> 
> 赞同：1
> 
> 时间：2012-11-26T15:57:27.490
> 
> 标签：c#, dynamicquery

我正在使用一个通用函数来过滤记录列表。

功能如下：

```
 class FilterRecords
{

    public static object ParseExpression(string Condition, string FilterColumn)
    {
        string _operator = "";
        string _condition = "";                       

        if (Condition.Substring(0, 1) == "<" || Condition.Substring(0, 1) == ">")
        {
            _operator = Condition.Substring(0, 1);

            if (Condition.Substring(1, 1) == "=")
            {
                _operator += "=";
                _condition = Condition.Substring(2);
            }
            else
            {
                _condition = Condition.Substring(1);
            }
            _operator = "=";
            return (dbContext.OrdsRlsds.AsQueryable().Where(FilterColumn + " " + _operator + " " + " @0", _condition).ToList());
        }
        else
        {
            if (Condition.Contains(','))
            {
                string[] conds = Condition.Split(',');
                return (dbContext.OrdsRlsds.AsQueryable().Where(FilterColumn + " >= @0 && " + FilterColumn + " <= @1", conds).ToList());

            }
            else
            {
                return (dbContext.OrdsRlsds.AsQueryable().Where(FilterColumn + " == @0", Condition).ToList());
            }
        }
    }
} 
```

该函数使用动态查询库。目前，它只过滤一种类型的记录——OrdsRlsds。我需要使它成为一个通用过滤器，以便我可以传递任何集合，然后返回过滤后的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:54:27.630

你在使用实体框架吗？如果是这样，那么你可以用泛型做这样的事情吗？

```
public static IList<T> ParseExpression<T>(string Condition, string FilterColumn) where T:class
{
  var query = dbContext
              .CreateObjectSet<T>()
              .AsQueryable();

  //add filters etc.

  return query.ToList();
} 
```

然后，您必须将所需的实体类型作为类型参数传递给您的方法，如下所示：

```
FilterRecords.ParseExpression<OrdsRlsd>(condition, filterColumn); 
```

# c++ - 如何在 C++ 和 QML 应用程序中使用 qrc？

> ID：13568437
> 
> 赞同：12
> 
> 时间：2012-11-26T15:57:34.263
> 
> 标签：c++, qt, qml, deploying

我在 Windows7 上用 c++ qnd Qt Creator(QML) 编写了一个 Qt Quick Desktop 应用程序。现在我必须部署它，我需要隐藏 qml 文件和图像（意味着：将它们放入资源等中）

我读到有一种很好的方法可以使用 .qrc 文件来做到这一点。我阅读了有关这些文件的文档，并为我的应用程序创建了一个，如下所示：

```
<RCC>
<qresource prefix="/">
    <file>qml/GenericHostApplicationQML/myMain.qml</file>
    <file>qml/GenericHostApplicationQML/content/PressAndHoldButton.qml</file>
    <file>qml/GenericHostApplicationQML/content/TextButton.qml</file>
    <file>qml/GenericHostApplicationQML/content/pics/advancedsettings.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/cnruninstall.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/dialog_cancel.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/folder_explore.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/gnome_session_switch.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/mail2_send.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/Picture1.png</file>
    <file>qml/GenericHostApplicationQML/content/pics/Picture2.png</file>
</qresource> 
```

在 main.cpp 中，我正在加载 Main.qml 文件，如：

```
int main(int argc, char *argv[])
{
   QApplication app(argc, argv);
   QDeclarativeView view;
   view.setSource(QUrl::fromLocalFile("qml/GenericHostApplicationQML/myMain.qml"));
   view.show();
   return app.exec();
} 
```

我试图从 Resources.qrc 中读取 myMain.qml 文件，例如：

```
view.setSource(QUrl(":/qml/GenericHostApplicationQML/myMain.qml"));//I added the ":/" 
```

但我有这个错误：

```
file:///qml/GenericHostApplicationQML/myMain.qml: File not found 
```

当我尝试这个时：

```
view.setSource(QUrl::fromLocalFile(":/qml/GenericHostApplicationQML/myMain.qml")); 
```

我得到这个：

```
file:///C:/Users/ayalafre/Desktop/ghaQML/GenericHostApplicationQML-build-desktop-Qt_4_7_4_for_Desktop_-_MinGW_4_4__Qt_SDK__Release/:/qml/GenericHostApplicationQML/myMain.qml: File not found 
```

似乎我的 Qt 不知道如何处理：“：/”。

我必须在以下位置使用 .qrc 文件：

*   加载 myMain.qml 文件
*   在 myMain.qml 中使用对 qml 文件的导入
*   在我的 qml 文件中使用图像

你能给我解释一下有什么问题吗？？为了在 c++ 和 qml 中使用 .qrc 我必须做什么？

非常感谢：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T16:23:31.533

你试试这个：

```
view.setSource(QUrl("qrc:/qml/GenericHostApplicationQML/myMain.qml")); 
```

当你这样做时：

```
QUrl(":/qml/GenericHostApplicationQML/myMain.qml"); 
```

路径是“file:///qml/GenericHostApplicationQML/myMain.qml”

# php - 在 PHP 中检索图像方向

> ID：13568440
> 
> 赞同：18
> 
> 时间：2012-11-26T15:57:56.603
> 
> 标签：php, image, orientation

如何在 PHP 中获取图像（JPEG 或 PNG）的图像方向（横向或纵向）？

我创建了一个用户可以上传图片的 php 站点。在我将它们缩小到更小的尺寸之前，我想知道图像是如何定位的以便正确缩放它。

感谢您的回答！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-26T16:04:08.440

我一直这样做：

```
list($width, $height) = getimagesize('image.jpg');
if ($width > $height) {
    // Landscape
} else {
    // Portrait or Square
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T16:05:32.937

```
list($width, $height) = getimagesize("path/to/your/image.jpg");

if( $width > $height)
    $orientation = "landscape";
else
    $orientation = "portrait"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T16:00:48.217

我想你可以检查图像宽度是否比横向和纵向的长度长，如果长度比宽度长。

你可以用一个简单的`IF / ELSE`语句来做到这一点。

您还可以使用以下功能：`Imagick::getImageOrientation`

[http://php.net/manual/en/imagick.getimageorientation.php](http://php.net/manual/en/imagick.getimageorientation.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:00:34.030

简单的。只需检查宽度和高度并比较它们以获得方向。然后相应地调整大小。真是直截了当。如果你想保持纵横比，但适合一些方形框，你可以使用这样的东西：

```
public static function fit_box($box = 200, $x = 100, $y = 100)
{
  $scale = min($box / $x, $box / $y, 1);
  return array(round($x * $scale, 0), round($y * $scale, 0));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T16:03:38.817

我使用了一个通用的缩小算法，比如 . ..

```
 function calculateSize($width, $height){

            if($width <= maxSize && $height <= maxSize){
                $ratio = 1;
            } else if ($width > maxSize){
                $ratio = maxSize/$width;
                } else{
                    $ratio = maxSize/$height;
                    }

        $thumbwidth =  ($width * $ratio);
        $thumbheight = ($height * $ratio);
        } 
```

这里的 max size 是我为 height 和 width 初始化为 120px 的那个。. . 使缩略图不超过该大小。. ..

这适用于我，无论横向或纵向方向如何，都可以普遍应用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-29T10:07:07.093

我正在使用这个速记。共享以防万一有人需要单线解决方案。

```
$orientation = ( $width != $height ? ( $width > $height ? 'landscape' : 'portrait' ) : 'square' ); 
```

首先它检查图像是否不是 1:1（正方形）。如果不是，则确定方向（横向/纵向）。

我希望有人觉得这很有帮助。

# c# - NHibernate在反编译项目中查找SQL select

> ID：13568444
> 
> 赞同：1
> 
> 时间：2012-11-26T15:58:06.180
> 
> 标签：c#, .net, sql, nhibernate

我有一个在 IlSpy 中反编译的项目和下面的代码。在哪里可以找到原始 SQL 查询？criteria.List() 如何知道选择使用哪个？

```
 protected object ListOne(ISession session, DbBaseArgs args)
    {
            ICriteria criteria = session.CreateCriteria(((DbListArgs)args).DbType);
            criteria.SetMaxResults(1);
            for (int i = 0; i < ((DbListArgs)args).DbExpressions.Count; i++)
            {
                if (((DbListArgs)args).DbExpressions[i] is Order)
                {
                    criteria.AddOrder((Order)((DbListArgs)args).DbExpressions[i]);

                }
                else
                {
                    criteria.Add((ICriterion)((DbListArgs)args).DbExpressions[i]);

                }
            IList results = criteria.List();
            object result;
            if (results != null && results.Count > 0)
            {
                result = results[0];
            }
            else
            {
                result = null;
            }
            return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:14:10.813

你的选择是

1.  [运行您的应用程序并查看日志](http://nhforge.org/wikis/howtonh/configure-log4net-for-use-with-nhibernate.aspx)。
2.  [编写一些代码来生成要生成的 SQL](https://stackoverflow.com/questions/10704462/how-can-i-have-nhibernate-only-generate-the-sql-without-executing-it)。
3.  试试[NHProf](http://www.hibernatingrhinos.com/products/NHProf)

（来自链接的答案）：

```
public String GetGeneratedSql(ICriteria criteria)
{
    var criteriaImpl = (CriteriaImpl) criteria;
    var sessionImpl = (SessionImpl) criteriaImpl.Session;
    var factory = (SessionFactoryImpl) sessionImpl.SessionFactory;
    var implementors = factory.GetImplementors(criteriaImpl.EntityOrClassName);
    var loader = new CriteriaLoader((IOuterJoinLoadable) factory.GetEntityPersister(implementors[0]), factory, criteriaImpl, implementors[0], sessionImpl.EnabledFilters);

    return loader.SqlString.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:01:23.430

反编译并不能帮助您找到原始 SQL 查询。您可以尝试为在调试级别命名的记录器添加日志， `NHibernate.SQL`并且您应该在附加程序中看到配置了向数据库发出的查询。例如，在日志配置中添加如下内容：

```
<logger name="NHibernate.SQL" additivity="false">
    <level value="ALL"/>
    <appender-ref ref="NHibernateSQLFileLog"/>
</logger> 
```

# core-data - 使用 setRelationshipKeyPathsForPrefetching 在 CoreData 中获取故障关系对象

> ID：13568445
> 
> 赞同：1
> 
> 时间：2012-11-26T15:58:11.327
> 
> 标签：core-data, nsfetchrequest, fault

我有一个包含许多实体“B”的实体“A”：

我想检索项目“B”的列表：

A 包含 B 的 NSSet，称为“b_list”

```
NSEntityDescription *selectEntityDescription = [NSEntityDescription
                                                    entityForName:@"A" inManagedObjectContext:self.managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:selectEntityDescription];
    [fetchRequest setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObject:@"B"]];
    [fetchRequest setReturnsObjectsAsFaults:NO];

    NSPredicate *whereForFetch = [NSPredicate predicateWithFormat:@"id == %@", object_id];
    [fetchRequest setPredicate:whereForFetch];

    NSError *error = nil;
    NSArray *array = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
    A *a = nil;
    if (array != nil && [array count] > 0){
        NSLog(@"A exist"); //return "A exist"
        a = [array objectAtIndex:0];
        NSLog(@"a b_list %@",a.b_list); //return a Fault result
        NSLog(@"a b_list count %d",a.b_list.count); //return 0
        for (B *b in a.b_list){ //not executed
            NSLog(@"b %@",b.name);
        }
    } 
```

我不明白为什么它仍然返回错误结果而不是对象列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:06:47.253

如果 B 为空，它将返回错误。由于您没有看到 for 循环中的代码，因此很有可能它是空的。

# vb.net - 运行时错误：对象预期在 if 语句中不起作用

> ID：13568447
> 
> 赞同：6
> 
> 时间：2012-11-26T15:58:13.867
> 
> 标签：vb.net, visual-studio-2010, jscript

当我删除外部 if 语句时，`addmessage`将创建一个链接，单击该链接将跳转到该`txtBillTxtSetSrc`字段。在 if 语句中，链接显示

> Microsoft JScript 运行时错误：预期对象”。

它可以在没有 if 语句的情况下工作。为什么它*不能*与它一起工作？

```
If Me.txtBillTxtSetSrc.Text.Trim.Length > 0 Then
  validateExpression = "^[BCGHJSR][0-9][0-9]"
  ismatch = Regex.IsMatch((txtBillTxtSetSrc.Text).ToUpper, validateExpression)

  If ismatch = False Then
    tempErrorMsg = LASPBS_Classes.Errors.MainframeError.getError("281W") ' Text Set Must be B01-B99, etc.
    Me.MessageCenter.addMessage(tempErrorMsg, "#", "txtBillTxtSetSrc", "form1", "E")
    Me.MessageCenter.Visible = True
  End If
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T18:54:59.117

检查以确保 txtBillTxtSetSrc 在使用时有效。如果它是 Nothing(null) 那么你不能访问 .Text 属性等等。此外，如果它是某种东西，它可能是属性之一。我会检查他们一个。

```
 If Not (Me.txtBillTxtSetSrc is Nothing) andalso (Me.txtBillTxtSetSrc.Text.Trim.Length > 0) Then 
    validateExpression = "^[BCGHJSR][0-9][0-9]"
    ismatch = Regex.IsMatch((txtBillTxtSetSrc.Text).ToUpper, validateExpression)

    If ismatch = False Then
      tempErrorMsg = LASPBS_Classes.Errors.MainframeError.getError("281W") ' Text Set Must be B01-B99, etc.
      Me.MessageCenter.addMessage(tempErrorMsg, "#", "txtBillTxtSetSrc", "form1", "E")
      Me.MessageCenter.Visible = True
  End If
 End If 
```

# php - 四个使用 PHP 的 2x2 最新图像

> ID：13568448
> 
> 赞同：2
> 
> 时间：2012-11-26T15:58:16.387
> 
> 标签：php, html

我正在尝试重用我在此处找到的一些 PHP，但我对 PHP 没有太多经验并陷入困境。

从相机上传图像时，我希望能够在不滚动的情况下尽可能大地显示 4 张最新图像。2宽2高：将全屏分辨率分为4个象限。最初的 PHP 将它们打印在一个列中（通过在循环中的每个图像后添加一个中断），我现在也让它们水平打印。但是，它们太小而无法从远处合理地观察。我不知道如何打印两个，创建一个换行符，然后打印最后两个。或者，如果有一种方法可以使用表格并在每个表格中都有一个图像`td`

这是我现在的位置：

```
<?php

$images = glob('images/*.{jpg,jpeg}', GLOB_BRACE); //formats to look for

$num_of_files = 4; //number of images to display

foreach($images as $image)
{
     $num_of_files--;

     if($num_of_files > -1) 
       echo "<img src="."'".$image."'".">"; 
     else
       break;
}
?> 
```

我正在使用一些 CSS 来添加 z-index，但这是基本代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:18:34.533

打印 2 然后换行然后 2 你可以使用

```
 foreach($images as $image) {
     $num_of_files--;

     if($num_of_files > -1){
       echo '<img src="' . $image . '" id="png' . $num_of_files . '" width="50%">';
       if($num_of_files % 2 == 0)
         echo "<br />";
     }
     else
       break; 
  } 
```

并查看有关对 glob glob() 进行排序的 SO 帖子 [- 按日期排序](https://stackoverflow.com/questions/124958/glob-sort-by-date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:00:32.493

添加一些CSS；

```
img {
    border: 0px;
    margin: 0px;
    display: inline;
    width: 50%;
} 
```

会是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:25:01.600

我试图清理您的代码并使其更通用：

```
<?php

$images = glob('images/*.{jpg,jpeg}', GLOB_BRACE); //formats to look for
$images_printed = 0;
$images_per_row = 2;

foreach($images as $image) {
   echo "<img src="."'".$image."'".">";
   $images_printed++;
   if ($images_printed % $images_per_row == 0) {
      echo "<br/>";
   }
} 
```

请注意，`?>`在代码文件的末尾省略将防止意外包含可能会导致格式化的空白字符。

# ruby-on-rails - 为什么 rails 不使用 rabl 作为 json 响应的模板引擎？

> ID：13568452
> 
> 赞同：1
> 
> 时间：2012-11-26T15:58:32.390
> 
> 标签：ruby-on-rails, rabl

我仍然对 Rails 不太熟悉，所以这可能是我忽略的一件简单的事情。我已经安装了 rabl 并在开发服务器上工作，我刚刚在 prod 服务器上尝试过，但它不工作。每台机器上的环境都相同。

轨道 2.3.14，拉布尔 0.7.6

我看到的错误是 ActionView::MissingTemplate （在视图路径 app/views 中缺少模板asset_links/index.erb）：

在我的控制器中，我有 require 'rabl' ，在控制台中定义了 ::Rabl 。在我调用渲染的控制器的索引操作中

```
 :rabl => @asset_links 
```

因为模板rails正在寻找的是index.erb而不是index.rabl，这让我相信Rabl没有以某种方式注册？

几个月前，我在我的开发服务器上安装了 rabl，但不记得让它呈现 json 所需的任何额外步骤。关于有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:56:32.843

您的生产服务器可能还没有选择 rabl gem。确保您的服务器上安装了 rabl，并确保您的服务器已重新启动。如果您将 unicorn 与 rvm 一起使用，那么 unicorn 很可能不会拾取您期望的 gemset

# r - 如何优化升级 RStudio 和 R 并保留项目文件和所有设置（Windows 机器）？

> ID：13568454
> 
> 赞同：14
> 
> 时间：2012-11-26T15:58:33.727
> 
> 标签：r

许多人使用 R 和 RStudio，他们需要跟上升级的步伐。

如果一个人希望所有 RStudio 项目都被“记住”。有可能吗？两者的无缝升级......

是否应该先安装新的 R 版本，然后将 RStudio 安装到同一文件夹中。（最好的步骤顺序是什么？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T16:06:19.840

更新 RStudio 没问题。您只需转到菜单中的“帮助”>“检查更新”，RStudio 将负责其余的工作。它还可以识别您计算机上最新安装的 R 版本，因此只需安装新的 R 就足够了。请注意，项目文件保存在您的计算机上，当然可以使用您安装的新版本的 RStudio 打开。

关于保留 R 版本的设置，请参见：

[安装新版本 R 的无痛方式？](https://stackoverflow.com/questions/1401904/painless-way-to-install-a-new-version-of-r-on-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:03:28.957

[Gabor Grothendieck在 Google Code](https://code.google.com/p/batchfiles/)以及[CRAN 的额外目录](http://cran.r-project.org/contrib/extra/batchfiles/)中有一个包“batchfiles” 。

# .htaccess - 301 重定向异常不工作

> ID：13568461
> 
> 赞同：1
> 
> 时间：2012-11-26T15:58:56.800
> 
> 标签：.htaccess, redirect, http-status-code-301

我现在真的很坚持，所以会很感激任何帮助。

我正在尝试将站点重定向到另一个域，但有一些例外。这是我现在在 .htaccess 文件中的代码

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !/sitemap/
RewriteCond %{REQUEST_URI} !/contact-us/
RewriteRule ^.*$ http://www.newsite.com/folder/$0 [R=301,L]

Redirect 301 /sitemap/ http://www.newsite.com/sitemap/
Redirect 301 /contact-us/ http://www.newsite.com/contact-us/ 
```

任何想法为什么这可能不起作用？

主页和站点地图以及联系我们页面重定向正常，但所有其他页面均未重定向。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:48:44.120

将重定向行移高

```
RewriteEngine On
Redirect 301 /sitemap/ http://www.newsite.com/sitemap/
Redirect 301 /contact-us/ http://www.newsite.com/contact-us/
RewriteBase /
RewriteCond %{REQUEST_URI} !/sitemap/
RewriteCond %{REQUEST_URI} !/contact-us/
RewriteRule ^.*$ http://www.newsite.com/folder/$0 [R=301,L] 
```

我在我的 apache 服务器上尝试了这个并且它有效

```
http://www.oldsite.com/sitemap/ => http://www.newsite.com/sitemap/
http://www.oldsite.com/contact-us/ => http://www.newsite.com/contact-us/
http://www.oldsite.com/test => http://www.newsite.com/folder/test 
```

# c++ - 如何使跨平台库在 XCode/Visual Studio 之间保持同步

> ID：13568462
> 
> 赞同：2
> 
> 时间：2012-11-26T15:58:57.553
> 
> 标签：c++, xcode, visual-studio-2010, cross-platform

我正在开发一个系统，它将有一个 PC（Windows）组件和一个 iPad 组件。我想在 iPad 和 PC 之间共享一些 C++ 代码。有没有办法在项目之间自动同步源文件？换句话说，如果我在 PC 上工作并添加一个新的 .h/.cpp 对，我可以让 xcode 项目识别新文件并将它们添加到 xcode 项目中吗？让 Visual Studio 识别 PC 端的新文件也是如此。

如果这不可能，那么在 Mac 和 PC 上为这个共享库使用 Eclipse 是否有意义？我应该考虑在 Apple 和 Windows 开发环境中维护项目的其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:32:38.990

首先，您需要一个针对所有目标平台的通用构建配置。当然，这意味着您不能使用与您的 IDE（Visual Studio、XCode 等）绑定的构建配置。您需要一个跨平台的构建系统。IMO 的最佳候选者是[CMake](http://www.cmake.org/). 在该系统中，CMakeLists.txt 文件是您项目的主要配置文件。任何新的源文件/头文件都必须添加到该配置文件（或其中之一）。它可能比使用 in-IDE 工具添加头/源对方便一点，但优点是您只需将源文件添加到构建配置 (CMakeLists.txt) 一次，它将适用到您正在使用的所有操作系统和 IDE。CMake 可用于为大多数 IDE 生成项目文件，以便它们可以轻松使用，并且一些更好的 IDE 还直接支持 CMake 构建配置（这使得它更加方便）。就个人而言，我不

其次，您需要一种在两个系统之间同步文件的方法，我认为这两个系统在物理上是分开的（即，不在虚拟盒子或其他任何地方）。有像 rsync 这样的简单程序和其他更多的 GUI 程序来同步文件夹及其所有底层文件。但是，对于源代码，使用版本控制系统要方便得多。个人推荐[Git](http://git-scm.com/)，尤其是对于个人项目。版本控制系统有很多功能，但最基本的是它为您提供了一种简单的方法来保持源文件夹同步并跟踪对代码所做的更改（例如，允许回溯，如果最新改动中突然出现bug）。即使您一个人工作，使用这样的系统仍然是完全值得的（即使您并不真正需要它，它也可以让您体验使用它）。Git 是一个去中心化的系统，这意味着您不需要中央服务器来进行版本控制，它对存储库的每个副本都是本地的。这使您可以拥有（就像我对一些简单项目所做的那样），一组完全本地的存储库，例如，我有两台我使用的计算机，每台计算机上都有一个存储库的副本，加上外部硬盘驱动器上的存储库副本，因此所有同步都在计算机和外部驱动器之间本地完成（加上不断更新的所有内容的三重备份）。您还可以使用中央服务器，例如[github](https://github.com/)，更方便。

# android - Android Internet 连接广播接收器

> ID：13568463
> 
> 赞同：1
> 
> 时间：2012-11-26T15:59:02.660
> 
> 标签：android, broadcastreceiver

我的应用程序在后台运行（作为服务），需要一直连接到远程服务器才能接收和发送消息。

该服务运行一个管理与服务器的连接的线程（使用套接字）

我正在尝试编写一个互联网连接广播接收器，它将在每次互联网状态更改时运行，并检查状态是否已连接或断开连接。

我的问题如下：当我连接到 Wi-Fi 网络时，广播接收器意图被触发了几次，在所有这些中，互联网连接的状态都是真实的（每次火灾之间没有断开连接，这意味着我很少new Threads 使用 Socket 连接服务器。

我如何确保我获得了正确的互联网状态，并且正确的意思是当且仅当连接已连接时，.isConnected() 方法才会返回？

这是我的代码：

```
public void onReceive(Context context, Intent intent) 
{       
    action = intent.getAction();
    app = (AppVariables) context.getApplicationContext();       
    if (app.isApplicationInitilized())
    {   
        if (action.equals(action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)))
        {
            networkInfo = intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
            if (networkInfo.isConnected())
                app.getServerConnectionManager().startServer();
        }
        else if(action.equals(ConnectivityManager.CONNECTIVITY_ACTION))
        {
            networkInfo = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);                
            if(networkInfo.getType() == ConnectivityManager.TYPE_WIFI && !networkInfo.isConnected())
                app.getServerConnectionManager().stopServer(false);
            else if (networkInfo.getType() == ConnectivityManager.TYPE_MOBILE && !networkInfo.isConnected())
                app.getServerConnectionManager().stopServer(false);
            else
                app.getServerConnectionManager().startServer();
        }           
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:10:55.543

我的一个应用程序也遇到了同样的问题，我们部署（成功）的模式如下：

```
onReceive():
   if( networkInfo.isConnected() ) 
       fireTimerForSecondaryCheck();
   else
       not connected;

SecondaryCheck:
     if( loadKnownUrl() )
          is connected.
          fire long timer for secondary check
     else
          fire short timer for secondary check 
```

基本上，一旦网络管理员报告 wifi 已启动，它就会尝试访问互联网。如果它接收到预期的内容，则网络连接已启动并正常工作，我将在两分钟后再次检查。如果我没有收到预期的内容，这意味着网络连接未完全建立，无法连接到互联网，或者 wifi 可能有 TOS 或类似的登录页面。在这种情况下，我会在 10 秒后再次检查。

FWIW，我的 NetworkMonitorService 广播与我的应用程序的连接，该应用程序为其注册，并根据需要更新 UI。

这是在 2.3.3 中开发的，我相信较新的 Android 版本（4+）在网络状态上具有更精细的粒度，但我还没有看到在生产中需要调整此代码。它从 2.2 设备一直到 4.2 都运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:15:20.060

如果我理解正确，您需要知道连接状态。您可以通过使用 networkInfo 状态来获取它：

状态状态 = networkInfo.getState();

if (state == State.CONNECTED) do_something

# c - 与hiredis重新建立联系

> ID：13568465
> 
> 赞同：1
> 
> 时间：2012-11-26T15:59:17.097
> 
> 标签：c, redis

我正在尝试在断开连接时重新连接到 Redis 服务器。

我正在使用 redisAsyncConnect 并且在断开连接时设置了回调。在回调中，我尝试使用在程序开始时使用的相同命令重新连接以建立连接，但它不起作用。似乎无法重新连接。

谁能帮我举个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:17:05.047

使用事件循环时，异步管理 Redis（重新）连接有点棘手。

这是一个实现连接到 Redis 实例列表的小型 zset 轮询守护程序的示例，该守护程序对断开连接事件具有弹性。使用了ae事件循环（它是Redis自己使用的）。

[http://gist.github.com/4149768](http://gist.github.com/4149768)

检查以下功能：

*   连接回调
*   断开回调
*   检查连接
*   如果需要重新连接

仅当连接可用时，主守护程序循环才会执行其活动。每秒一次，第二次发起的回调检查是否必须重新建立某些连接。我们发现这种机制非常可靠。

注意：为简洁起见，此示例中的错误管理很粗略。真正的生产代码应该以更优雅的方式管理错误。

处理多个异步连接时的一个棘手点是，没有用户定义的上下文数据作为相应回调的参数传递。在断开连接事件后清理与连接关联的数据可能有点困难。

# asp.net-mvc - 如何将 AD 用户与 MS Membership Provider 关联到他们的条目？

> ID：13568466
> 
> 赞同：1
> 
> 时间：2012-11-26T15:59:21.247
> 
> 标签：asp.net-mvc, active-directory, asp.net-membership

我的公司刚刚切换到 Active Directory，我一直在将我们的旧应用程序（mvc、silverlight、asp.net）转换为使用 asp.net 会员提供程序通过 AD 进行身份验证。

我们有一个应用程序，用户输入并存储表单条目数据，这些数据永远与他们的用户名相关联，该应用程序从提供者的“user.name”获取。问题是每当有人更改他们的姓名（婚姻等）时，必须更新应用程序以将他们现有的条目更改为他们的新姓氏。

AD 中是否有一个一致的字段可以通过 asp.net 会员提供程序获得，可用于与条目关联？或处理此类事情的最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:52:45.750

如果您希望您的 ASP.NET 应用程序针对 Active Directory 进行身份验证，您需要一个 Active Directory 成员资格提供程序。有关详细信息，请参阅本文：http: [//msdn.microsoft.com/en-us/library/ff650308.aspx](http://msdn.microsoft.com/en-us/library/ff650308.aspx)。

# math - 计算度数是否在其他 2 个度数的范围内

> ID：13568471
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:59:29.787
> 
> 标签：math, geometry

我在画布上有显示标题的矢量。我还计算了用户移动鼠标的当前方向。

当他在向量上移动时，我只想选择那些与用户鼠标移动的标题相匹配的向量。

例如，考虑向量 1 具有 180 度的航向，用户移动他的鼠标并且具有大约 170 的航向。

由于用户不能完全匹配向量标题，我想添加一个边距。

例如，向量的标题在 (170 - 45) 和 (170 + 45) 之间吗？

当矢量具有例如 350 的标题并且用户鼠标的标题为 10 时会出现问题 - 这将在 (10-45) 和 (10+45) 之间 - 现在显然 -35 不好所以我再次添加 360 度, 在这种情况下 325 < 350 但 350 不 > 55

我显然需要更深入地了解如何计算这种情况。

**tldr：**

给定 X 度，如果你想象一个圆，如何测量它是否在 A 度和 B 度之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:06:30.800

使用差异。从您想要的标题中减去实际标题。答案是`<=-180`或`>180`时，酌情加减`360`。然后将结果与您的误差带进行比较（在您的示例中`>-45, <45`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:29:18.907

我不会比较角度，而是比较向量的[点积](http://en.wikipedia.org/wiki/Dot_product#Inner_product)。如果向量有分量`v=[vx,vy]`并且我想将它与鼠标方向进行比较，`m=[mx,my]`那么我计算以下

```
t = ACOS( (mx*vx+my*vy)/(SQRT(mx^2+my^2)*SQRT(vx^2+vy^2)) ) 
```

然后检查`t`以弧度为单位的角度是否在您想要的公差范围内。例如 6° 的代码是

```
IF t<=6*(π/180) THEN ... 
```

# java - JPA 和默认锁定模式

> ID：13568475
> 
> 赞同：25
> 
> 时间：2012-11-26T15:59:38.340
> 
> 标签：java, jpa, transactions

使用 JPA，我们可以使用手动`OPTIMISTIC`或`PESSIMISTIC`锁定来处理事务中的实体更改。

如果我们不指定这两种模式之一，我想知道 JPA 如何处理锁定？没有使用锁定模式？

如果我们不定义显式锁定模式，数据库完整性会丢失吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T17:07:49.917

我浏览了[Java Persistence API 2.0 Final Release规范的第 3.4.4 节](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec)*锁定模式*，虽然我找不到任何*具体*的东西（它没有说明*这*是默认设置或类似的东西），但有一个脚注说如下。

 **> 锁定模式类型 NONE 可以指定为锁定模式参数的值，并且还为注释提供默认值。

该部分是关于[`LockModeType`](http://docs.oracle.com/javaee/6/api/javax/persistence/LockModeType.html)可用值的种类及其用法，并描述了哪些方法采用这种类型的参数和诸如此类的参数。

所以，正如它所说`LockModeType.NONE`的是注释的默认值（JPA，注释左右）我猜当你使用`EntityManager.find(Class, Object)`默认值时`LockModeType`。

还有一些其他*微妙*的提示可以加强这一点。第 3.1.1 节*EntityManager 接口*。

> find 方法（假设它在没有锁的情况下调用或使用 LockModeType.NONE 调用）和 getReference 方法不需要在事务上下文中调用。

这说得通。例如，如果您使用 MySQL 作为数据库并且您选择的数据库引擎是 InnoDB，那么（默认情况下）您的表将使用[`REPEATABLE READ`](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read)，如果您使用其他一些 RDBMS 或其他数据库引擎，这可能会改变。

现在我不确定隔离级别与 JPA 锁定模式有什么关系（尽管看起来是这样），但我的观点是不同的数据库系统不同，所以 JPA 无法为你做出决定（至少根据规范）默认使用什么锁定模式，所以`LockModeType.NONE`如果你不指示它会使用它。

我还找到[了一篇关于隔离级别和锁定模式的文章](http://en.wikibooks.org/wiki/Java_Persistence/Locking#Isn.27t_database_transaction_isolation_all_I_need.3F)，您可能想阅读它。

哦，回答你的最后一个问题。

> 如果我们不定义显式锁定模式，数据库完整性会丢失吗？

这*取决于*，但如果您有并发事务，那么答案可能*是肯定*的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-09T05:23:37.733

由于 JPA 2.1 FR

> 3.2 版本属性
> 
> 持久性提供程序使用 Version 字段或属性来执行乐观锁定。它由持久性提供者在对实体实例执行生命周期操作的过程中访问和/或设置。**如果实体具有使用版本映射映射的属性或字段，则会自动启用乐观锁定。**

因此，如果实体是版本化对象，例如已指定 @Version，则默认持久性提供程序将执行乐观锁定。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-20T09:11:28.750

在规范 persistence_2.0，第 89 页：

> 如果版本化对象以其他方式更新或删除，则实现必须确保满足 LockModeType.OPTIMISTIC_FORCE_INCREMENT 的要求，即使没有对 EntityManager.lock 进行显式调用。**

# ios - 故事板转场

> ID：13568476
> 
> 赞同：0
> 
> 时间：2012-11-26T15:59:42.593
> 
> 标签：ios, xcode

我添加了这段代码来执行 segue：

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"groupselection"];
    [self.navigationController pushViewController:controller animated:YES]; 
```

然后我给故事板中的视图控制器这个ID：groupselection

但是没有执行segue！有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:06:17.127

是的，您不会在情节提要中推送视图控制器，因此不要使用 PushViewController。

你用

```
[self performSegueWithIdentifier:@"Identifier you gave your segue"]; 
```

然后你通过控制拖动连接故事板内的segue。确保从现有控制器（控制器下方带有正方形的黄色圆圈）拖动到新控制器，然后选择您想要的类型（推送、模态、替换）

![在此处输入图像描述](../Images/74bc51a137cfa2607c2c26c2921eae74.png)

然后你会看到连接两个控制器的电线。单击中间的圆圈，当故事被放大到一路。在右侧的身份检查器中，给这个 seugue 一个标识符。这就是您将在代码中使用的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:05:01.373

从技术上讲，这不是一个 segue，而只是将一个新的控制器推到你的导航堆栈上。如果您使用情节提要，只需创建一个真正的转场。您将不得不为我们发布更多代码来解决此问题。你什么时候推送这个视图控制器？您的故事板视图控制器是否具有该 ID 的子类？

# jquery - Jquery Fullcalendar 标头

> ID：13568477
> 
> 赞同：3
> 
> 时间：2012-11-26T15:59:43.333
> 
> 标签：jquery, fullcalendar

例如，我如何格式化周文本，`Dom 11/25`我喜欢在哪里显示`Dom 25/11`。我无法从文档中找到解决方案。

![在此处输入图像描述](../Images/ef9ea791b0ce1814eeab58b80edd9883.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T16:24:45.443

您可以在 fullcalendar.js 中更改它。

寻找这部分：

```
columnFormat: {
    month: 'ddd',
    week: 'ddd M/d',
    day: 'dddd M/d'
} 
```

并像这样更改它，例如：

```
columnFormat: {
    month: 'ddd',
    week: 'ddd d/M',
    day: 'dddd d/M'
} 
```

编辑：

您也可以在初始化时将其作为参数传递（也许是更清洁的方式）：

```
$('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        columnFormat: {
            month: 'ddd',    
            week: 'ddd d/M', 
            day: 'dddd d/M'  
        }
    }); 
```

# javascript - 在 html5 播放器上创建 js 弹出窗口

> ID：13568478
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:59:43.897
> 
> 标签：javascript, html, html5-video, video.js, popcornjs

我想在html5播放器（video.js）进度条上添加自定义标记，播放视频时会自动弹出一个js对话框，有点像soundcloud.com评论系统，它不会从前端编辑，只添加了一次硬编码的评论，类似于章节，但具有弹出功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:51:49.647

popcornjs 就是这样做的方法。

您可以使用他们的编辑器来促进它：[https ://popcorn.webmaker.org/](https://popcorn.webmaker.org/)

问候

# symfony - 在捆绑包上包装 PHPWord

> ID：13568491
> 
> 赞同：1
> 
> 时间：2012-11-26T16:00:18.273
> 
> 标签：symfony, composer-php, phpword

我只想将 PHPWord 用于 Symfony 2。但我是 Symfony 2 的新手。

我将 PHPWord 源代码粘贴到我的 util 文件夹包中，但从 PHPWord 加载自动加载器类时出错...

问题很简单，如何将代码（在本例中为 PHPWord）“包装”到捆绑中？或者我可以使用它。

有什么解决办法吗？

* * *

感谢您的回答，这给了我一些启发。虽然，这对我不起作用。我下载了composer.phar，并按照您的说法编辑了我的composer.json：在我的需求区域中添加“phpword/phpword”：“0.6.2”并创建新的存储库phpword ...

不起作用，我运行“php composer.phar”命令，但它没有下载任何东西......

有任何教程或提示可以使这项工作吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-17T07:49:42.250

`composer require phpoffice/phpword dev-master`为我做了这项工作。

它应该下载并安装在 Symfony2 安装文件夹下的安装 PhpOffice\PHPWord `vendor`（除了自动修改您的 composer.json）。

在控制器中，您将要使用`use`PhpWord：

`use PhpOffice\PhpWord\PhpWord;`

在动作内部，您可以创建一个新实例，如下所示：

`$doc = new PhpWord();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:28:31.337

您不应该自己复制源代码。使用 composer 安装 PHPWord。

由于 PHPWord 还没有使用 composer，你需要在 composer.json 中定义一个存储库：

```
{
    "require": {
        "phpword/phpword": "0.6.2"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "phpword/phpword",
                "version": "0.6.2",
                "dist": {
                    "url": "http://download-codeplex.sec.s-msft.com/Download/Release?ProjectName=phpword&DownloadId=138035&FileTime=129545976016270000&Build=19692",
                    "type": "zip"
                },
                "autoload": {
                    "classmap": ["."]
                }
            }
        }
    ]
} 
```

你可以在 Symfony 项目中使用 PHPWord（实际上是任何 PHP 项目）：

```
$word = new PHPWord();
$writer = new PHPWord_Writer_Word2007($word);
$writer->save('test.doc'); 
```

**更新**：我刚刚意识到随着时间的推移下载更改的 URL。最好用不变的东西替换它（如果可能的话，或者自己在某个地方托管）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:20:08.667

随着 URL 的变化，如果您对开发版本没有问题，可以使用 github 存储库：

```
{
    "require": {
        "phpword/phpword": "dev"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "phpword/phpword",
                "version": "dev",
                "dist": {
                    "url": "https://github.com/PHPOffice/PHPWord/archive/develop.zip",
                    "type": "zip"
                },
                "autoload": {
                    "classmap": ["."]
                }
            }
        }
    ]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-06T10:26:14.557

您可以使用这个简单的包作为 PhpWord 的包装器： [https ://packagist.org/packages/ggggino/wordbundle](https://packagist.org/packages/ggggino/wordbundle)

# python - 将条目插入mysqldb，条目值存储为字典python

> ID：13568492
> 
> 赞同：0
> 
> 时间：2012-11-26T16:00:23.013
> 
> 标签：python, mysql, mysql-python

我已将要插入数据库的条目存储为字典，字典键与字段名称相同。是否有任何简单的命令可以直接执行此操作？

目前这是我使用的命令

```
cursor.execute('INSERT INTO jobs (title, description, country, state, city) 
VALUES (%(title)s, %(description)s, %(country)s, %(state)s, %(city)s)', (job_data.get_parsed_dictionary())) 
```

很多时候，python 有很多优雅的库方法来处理各种各样的事情。我希望有一个这样的命令可以使它更简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:04:04.150

您可以生成列名：

```
data = job_data.get_parsed_dictionary()

columns = ', '.join(data.keys())
parameters = ', '.join(['%({0})s'.format(k) for k in data.keys()])
query = 'INSERT INTO jobs ({columns}) VALUES ({parameters})'.format(columns=columns, parameters=parameters)

cursor.execute(query, data) 
```

您*确实*需要确保`.get_parsed_dictionary()`结果中的键可以安全地插入到 SQL 查询中（请记住您的 SQL 注入攻击向量）。如果您手边有一个可能的列名列表，我当然会检查以过滤掉您可能在其中找到的任何杂散的“额外”键`dict`。

# asp.net-mvc - MVC 条件依赖注入

> ID：13568493
> 
> 赞同：1
> 
> 时间：2012-11-26T16:00:23.933
> 
> 标签：asp.net-mvc, dependency-injection, ninject

我试图找出通过 Ninject 使用 DI 设计 MVC4 应用程序的最佳方法。

当用户进入系统时，他们会看到一个登录名，他们可以在其中选择许多数据库之一。每个数据库都是数据库服务器上的一个单独目录。我需要做的是在用户登录后注入一个包含数据库连接详细信息的存储库。存储库的类型不会改变，只是连接详细信息。

我找到[了这篇](https://stackoverflow.com/questions/12675977/can-a-ninject-binding-be-based-on-a-url-route-value/12676101#12676101)我可以制作的帖子，但我不确定这是否是适合我情况的最佳方法。人们还成功使用了哪些其他选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:11:18.237

问题解决了。因为我希望在我的具体存储库的构造函数中传递连接字符串，所以我可以使用以下 Ninject WithConstructorArgument：

```
IBindingWithOrOnSyntax<T> WithConstructorArgument(string name, Func<Ninject.Activation.IContext, object> callback); 
```

使用此重载，每次创建对象时都会调用回调。所以我的代码看起来像这样，每次都会调用 MakeConnectionString 方法。

```
_Kernel = new StandardKernel();
_Kernel.Bind<ISomeItemRepository>().To<FakeSomeItemRepository>()
    .WithConstructorArgument("connectionString", (c) =>
        {
            MakeConnectionString();
        }); 
```

# php - Zend Session、Zend_Session_SaveHandler_DbTable 和异步请求

> ID：13568498
> 
> 赞同：3
> 
> 时间：2012-11-26T16:00:37.203
> 
> 标签：php, zend-framework, session

我以以下方式使用 Zend Session 与 Zend_Auth 和 Session 命名空间：

**应用程序.ini**

```
 resources.session.saveHandler.class = "Zend_Session_SaveHandler_DbTable"
    resources.session.saveHandler.options.name = "session"
    resources.session.saveHandler.options.primary = "id"
    resources.session.saveHandler.options.modifiedColumn = "modified"
    resources.session.saveHandler.options.dataColumn = "data"
    resources.session.saveHandler.options.lifetimeColumn = "lifetime" 
```

**引导程序**

```
 /**
     * Start session 
     */
    public function _initCoreSession() {
        $this->bootstrap('db');
        $this->bootstrap('session');
        Zend_Session::start();
    } 
```

虽然 Zend_Auth 似乎工作正常，但其他会话名称空间似乎表现得很奇怪。

我使用了几个异步请求（使用 jQuery）。

-Init（将数组初始化到会话中）

```
 $ns = new Zend_Session_Namespace('scanner');
    $ns->unsetAll();
    $ns->pages = array(); 
```

-Loop（将东西放入数组，这部分被调用1到n次）

```
 //Fetch the Session Namespace
    $ns = new Zend_Session_Namespace('scanner');
    //Set scanned page to true
    $ns->pages[$this->getRequest()->getParam('nextUrl')] = true; 
```

-Finalize（处理数组）

```
 //Fetch the Session Namespace
    $ns = new Zend_Session_Namespace('scanner');
    //Do stuff with $ns->pages 
```

然而，在循环调用的某个地方，pages 变量似乎被重置（因此为空）。

这适用于默认会话行为，但是当我设置 Zend_Session_SaveHandler_DbTable 时它开始失败。

****编辑****

作为对第一个答案的回应（因为它需要一个代码块）

我正在使用 $.post 向我的应用程序发出请求。它向应用程序发送带有数据（URL）的请求，并接收状态更新和下一步请求的 url。这个循环直到它没有收到下一个 url。

**使用的 jQuery 代码**

```
 function scanUrl(url)
    {
        $.post("http://www.example.com/scan/scanurl", { nextUrl: url },
       function(data) 
       {
         updateView(data);

         if(data.nextUrl != null)
             scanUrl(data.nextUrl);
         else
             finalize();
       });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:51:46.280

您是否通过异步请求传递了会话 ID？如果我没有误解并且您正在调用这样的东西：

$.ajax({ 'url' : 'http://something', ... })

您需要在其中添加一个“数据”部分：

sessionIdVariable=你的当前会话 ID

# javascript - SQLite 成功回调在事务完成之前触发

> ID：13568502
> 
> 赞同：0
> 
> 时间：2012-11-26T16:00:49.837
> 
> 标签：javascript, asp.net, sqlite, web-sql

在我的 ASP.NET Web 表单应用程序中，我需要执行一些 JQuery 操作来收集表单数据，然后遍历表单数据以保存到 SQLite 数据库，并在成功完成后关闭当前窗口。如果窗口保持打开状态，保存操作可以完美运行，但是一旦我将 window.close 添加到我的 SQLite 事务中的成功回调中，窗口似乎在保存操作有时间完成之前关闭。

```
function save(closeWindow)
{
  //Gathering form data and creating the checkListInsert string containing my bulk insert statement  (i.e. Insert Into Table Select .... Union Select...)

  db.transaction(function (tx) {

                tx.executeSql(checkListInsert.substring(0, checkListInsert.length - 6), [], function (tx, result) {
                    if (closeWindow == "Yes") {
                        //window.close();  If left uncommented the data will not save.  When left commented the save occurs but of course the window is still open
                    }
                }, onSQLError);
        });
} 
```

编辑：如果我将 window.close() 放在 window.setTimeout() 内 1 秒，一切正常。所以这绝对是一个时间问题。似乎在事务完成之前回调不应该触发？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:50:20.387

使用表单中的行数作为预期插入的行数。将其与`rowsAffected`by 结果进行比较以验证事务是否完成：

```
if (closeWindow == "Yes") 
  {
  if (result.rowsAffected === /*Number of rows inserted*/)
    {
    window.close();
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T22:14:05.103

您应该等待事务完成，而不是 executeSql：

```
function save(closeWindow) {
    db.transaction(function (tx) {
        tx.executeSql(checkListInsert.substring(0, checkListInsert.length - 6), []);
    }, function () { }, function () {
        if (closeWindow == "Yes") {
            window.close();
        }
    });
} 
```

# c# - 编写/编译通用 Ninject 绑定的问题

> ID：13568505
> 
> 赞同：2
> 
> 时间：2012-11-26T16:01:13.897
> 
> 标签：c#, generics, ninject, metaprogramming

我有以下类，用于对数据库进行特定查询并创建数据的表示模型以传回客户端浏览器。

```
public class SpecificFooQuery: IPresentationQuery<FooRequest, FooResult>
{
    public SpecificFooQuery(ILogger logger, DbContext context)
    {
        this.logger = logger;
        this.context = context;
    }

    public FooResult Get(FooRequest request)
    {
        return new FooResult { ... };
    }
} 
```

它实现了以下通用接口

```
public interface IPresentationQuery<TRequest, TResult>
    where TRequest : class
    where TResult : class
{
    TResult Get(TRequest request);
} 
```

但是我在编写将为我创建对象的 ninject 实例时遇到问题。这不起作用，但到目前为止我还没有真正做到这一点。

```
kernel.Bind<IPresentationQuery<FooResult, FooRequest>>().To<SpecificFooQuery>(); 
```

任何人都可以帮我解决这个问题，我不确定我哪里出错了，或者我需要做什么才能完成这项工作。

* * *

```
Error   1   
The type 'SpecificFooQuery' cannot be used as type parameter 
'TImplementation' in the generic type or method   
'Ninject.Syntax.IBindingToSyntax<T1>.To<TImplementation>()'. 
There is no implicit reference conversion from 
'SpecificFooQuery' to 'IPresentationQuery<FooResult,FooRequest>'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:46:16.963

我知道这个问题是关于 Ninject 的，但如果你正在做这种通用的把戏，你可能想试试[Simple Injector](https://simpleinjector.codeplex.com/)。它允许您`IPresentationQuery<TRequest, TResult>`在一行代码中注册所有实现，如下所示：

```
container.RegisterManyForOpenGeneric(
    typeof(IPresentationQuery<,>),
    typeof(IPresentationQuery<,>).Assembly); 
```

[RegisterManyForOpenGeneric](https://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Batch_Registration)是[SimpleInjector.Extensions](http://nuget.org/packages/SimpleInjector.Extensions)项目的扩展方法，可以像 Simple Injector 一样从 NuGet 下载。

并且用通用装饰器包装所有这些实现也将是单行的：

```
container.RegisterDecorator(
    typeof(IPresentationQuery<,>),
    typeof(ValidationPresentationQueryDecorator<,>)); 
```

Simple Injector 的优点在于它的速度非常快，即使在处理通用装饰器时也是如此。Simple Injector 甚至尊重您的泛型类型约束。您将泛型类型约束添加到装饰器以防止它被包装到某些类型。如果这是不可能的，你也可以像这样注册一个条件装饰器：

```
container.RegisterDecorator(
    typeof(IPresentationQuery<,>),
    typeof(ValidationPresentationQueryDecorator<,>),
    context => NeedsValidation(context.ImplementationType)); 
```

即使这个注册被优化并且提供的谓词只会被每个封闭的泛型类型调用一次。[RegisterDecorator](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Generic_Decorators)方法是同一个扩展项目的一部分`RegisterManyForOpenGeneric`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:05:58.460

看来您的类型参数的顺序是错误的。您尝试绑定`IPresentationQuery<FooResult, FooRequest>`到`IPresentationQuery<FooRequest, FooResult>`.

# python - Python：MySQL：处理超时

> ID：13568508
> 
> 赞同：5
> 
> 时间：2012-11-26T16:01:26.960
> 
> 标签：python, mysql, timeout

我正在使用 Python 和 mySQL，查询之间有很长的延迟。结果，我收到一个“MySQL 连接已消失”错误，即超出了 wait_timeout。

这已经在 [优雅地处理“MySQL 已经消失”中进行了讨论](https://stackoverflow.com/questions/1987701/gracefully-handling-mysql-has-gone-away)

但这并没有具体回答我的查询。

所以我处理这个问题的方法 - 我已经将我所有的 sql 执行语句包装在一个方法中 -

```
 def __execute_sql(self,sql,cursor):
    try:
        cursor.execute(sql)

    except MySQLdb.OperationalError, e:            
        if e[0] == 2006:
            self.logger.do_logging('info','DB', "%s : Restarting db" %(e))
            self.start_database() 
```

我在代码中有几个地方调用了这个查询。问题是，我也有几个游标，所以方法调用看起来像 -

```
self.__execute_sql(sql,self.cursor_a)
self.__execute_sql(sql,self.cursor_b) 
```

等等

我需要一种在数据库启动后优雅地重新执行查询的方法。我可以将调用包装在 if 语句中，然后重新执行，这样就可以了

```
def __execute_sql(self,sql,cursor):
    try:
        cursor.execute(sql)
        return 1
except MySQLdb.OperationalError, e:            
    if e[0] == 2006:
        self.logger.do_logging('info','DB', "%s : Restarting db" %(e))
        self.start_database()
        return 0 
```

接着

```
if (self.__execute_sql(sql,self.cursor_a) == 0):
   self.__execute_sql(sql,self.cursor_a) 
```

但这很笨拙。有一个更好的方法吗？谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-06T18:02:07.643

我尝试了 Crasched 的方法，这让我遇到了一个新的 OperationalError：

`OperationalError: (2013, 'Lost connection to MySQL server during query')`

我的最终解决方案是首先尝试 ping，如果引发另一个 OperationalError，则使用新连接重新连接并重新创建游标，如下所示：

```
try:
    self.connection.ping(True)
except MySQLdb.OperationalError:
    self.connection = MySQLdb.connect(
        self.db_host,
        self.db_user,
        self.db_passwd,
        self.db_dbase,
        self.db_port)
    # reconnect your cursor as you did in __init__ or wherever    
    self.cursor = self.connection(
        MySQLdb.cursors.DictCursor) 
```

回到工作！

Python 2.7、MySQL 5.5.41

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:07:13.270

我有同样的问题，想包装异常来捕获它，但我使用以下方法解决了它。在调用执行之前，调用
self.con.ping(TRUE)

[http://www.neotitans.com/resources/python/mysql-python-connection-error-2006.html](http://www.neotitans.com/resources/python/mysql-python-connection-error-2006.html) [http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

我再也找不到我从中找到的原始源材料，但这立即解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T03:46:32.107

我遇到了令人费解的“MySQL 服务器已消失”错误，这是我的解决方案。

此解决方案将让您重试 MySQL 错误，处理几乎任何类型的查询，在查询 str 或单独的元组中包含查询变量，并收集并返回您在此过程中遇到的所有成功和错误消息：

```
def execute_query(query_str, values=None):
  # defaults
  num_affected_rows = 0
  result_rows = None
  success = False
  message = "Error executing query: {}".format(query_str)
  # run the query
  try:
    mysql_conn = get_existing_mysql_connection()
    cur = mysql_conn.cursor()
    if values == None or len(values) < 1:
      num_affected_rows = cur.execute(query_str)
    else:
      num_affected_rows = cur.execute(query_str, values)
    result_rows = cur.fetchall() # only relevant to select, but safe to run with others
    cur.close()
    mysql_conn.commit()
    success = True
    message = "Mysql success for query: {}".format(query_str)
  except BaseException as e:
    message = "Mysql error: {}; for query: {}".format(repr(e), query_str)
  return (success, num_affected_rows, result_rows, message)

def execute_query_with_retry(query_str, values=None, num_tries=3, message=""):
  # defaults
  success = False
  num_affected_rows = 0
  result_rows = None
  this_message = "Error executing query: {}".format(query_str)
  # should we still try?
  if num_tries < 1:
    this_message = "Ran out of tries for query: {}".format(query_str)
    return (False, 0, None, message + '; ' + this_message)
  num_tries_after_this = num_tries - 1
  # try to execute query
  try:
    (success, num_affected_rows, result_rows, this_message) = execute_query(query_str, values)
  except BaseException as e:
    success = False
  # handle success or failure
  if success == True:
    return (True, num_affected_rows, result_rows, message + '; ' + this_message)
  else:
    open_new_mysql_connection() # reconnect using password etc.
    return(execute_query_with_retry(query_str, values=values, num_tries=num_tries_after_this, message=(message + '; ' + this_message))) 
```

# python - 计算平均值的最pythonic方法

> ID：13568509
> 
> 赞同：1
> 
> 时间：2012-11-26T16:01:30.893
> 
> 标签：python

我在 3d 字典中有数据：

```
 movieid, date,customer_id,views
 0, (2011,12,22), 0, 22
 0, (2011,12,22), 1, 2
 0, (2011,12,22), 2, 12
 .....
 0, (2011,12,22), 7, 2
 0, (2011,12,23), 0, 123 
```

..所以基本上数据代表了每个客户每天观看一部电影的次数..每个客户（只有 8 个客户）..

现在，我想计算……**平均**每位顾客观看一部电影的次数。

所以基本上

```
 movie_id,customer_id, avg_views
     0, 0, 33.2
     0, 1 , 22.3

  and so on 
```

解决这个问题的pythonic方法是什么。

塔肯

编辑：

```
 data = defaultdict(lambda : defaultdict(dict))
 date = datetime.datetime(2011,1,22)
 data[0][date][0] = 22
 print data
defaultdict(<function <lambda> at 0x00000000022F7CF8>, 
 {0: defaultdict(<type 'dict'>, 
 {datetime.datetime(2011, 1, 22, 0, 0): {0: 22}})) 
```

假设只有 2 位客户、1 部电影和 2 天的数据

```
 movie_id, date, customer_id,views
 0 , 2011,1,22,0,22
 0 , 2011,1,22,1,23
 0 , 2011,1,23,0,44 
```

注意：客户 1 没有在 1 月 23 日观看 id 0 的电影现在答案是

```
 movie_id,customer_id,avg_views
  0   , 0 ,    (22+44)/2
  0,    1,      (23)/1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:24:05.653

我的愿景是：

```
pool = [
    (0, (2011,12,22), 0, 22),
    (0, (2011,12,22), 1, 2),
    (0, (2011,12,22), 2, 12),
    (0, (2011,12,22), 7, 2),
    (0, (2011,12,23), 0, 123),
]

def calc(memo, row):
    if (row[2] in memo.keys()):
        num, value = memo[2]
    else:
        num, value = 0, 0

    memo[row[2]] = (num + 1, value + row[3])
    return memo

# dic with sum and number
v = reduce(calc, pool, {})
# calc average
avg = map(lambda x: (x[0], x[1][1] / x[1][0]), v.items())

print dict(avg) 
```

其中`avg`- 是 key = customer_id 的字典，而 value - 视图的平均值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:17:18.923

`sum`让这很容易。在我的原始版本中，我使用`dict.keys()`了很多，但在字典上迭代会默认为您提供键。

此函数计算单行结果：

```
def average_daily_views(movie_id, customer_id, data):
    daily_values = [data[movie_id][date][customer_id] for date in data[movie_id]]
    return sum(daily_values)/len(daily_values) 
```

然后你可以循环它以获得你想要的任何形式。也许：

```
def get_averages(data):
    result = [average_daily_views(movie, customer, data) for customer in 
              data[movie] for movie in data] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:40:27.680

我认为你应该稍微重组你的数据，以更好地服务于你的目的：

```
restructured_data = collections.defaultdict(lambda: collections.deafualtdict(collections.defaultdict(int)))
for movie in data:
    for date in data[movie]:
        for customer,count in date.iteritems():
            restructured_data[customer_id][movie_id][date] += count

averages = collections.defaultdict(dict)
for customer in restructured_data:
    for movie in restructured_data[customer]:
        avg = sum(restructured_data[customer][movie].itervalues())/float(len(restructured_data[customer][movie]))
        averages[movie][customer] = avg

for movie in averages:
    for customer, avg in averages[movie].iteritems():
        print "%d, %d, %f" %(movie, customer, avg) 
```

希望这可以帮助

# xcode - 如何使用Xcode设计界面iosopendev？

> ID：13568511
> 
> 赞同：1
> 
> 时间：2012-11-26T16:01:43.933
> 
> 标签：xcode, storyboard, jailbreak

我的系统上安装了 Xcode 4.4.1。我最近安装了 iosopendev 来开发越狱应用程序。它集成得很好，现在我可以在新项目菜单中看到 iosopendev 的选项。

我的问题是，我如何在视觉上设计界面，例如使用故事板越狱应用程序，我应该为此选择哪个模板？对于初学者，我选择了 Cocoa Touch Library Template，但它没有情节提要或 xib。

如果有人可以详细说明使用 Xcode 直观地设计越狱应用程序的步骤和方法，我将不胜感激。

PS-我在互联网上搜索了很多并没有找到任何有用的东西，因此作为最后的手段在这里发布了一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:48:39.290

您可以通过两种方式在 Xcode 中创建可与 iOSOpenDev 一起使用的 UI 应用程序：

**(1)**选择一个Xcode模板，参考[https://github.com/kokoabim/iOSOpenDev/wiki/Convert-to-iOSOpenDev-Project](https://github.com/kokoabim/iOSOpenDev/wiki/Convert-to-iOSOpenDev-Project)将其转换为iOSOpenDev。

..或者..

**(2)**选择一个 iOSOpenDev 模板（生成一个 bundle 二进制文件），添加 XIB 文件，创建一个 Copy Bundle Resources Build Phase 并拖放新的 Build Phase 使其位于 Run Script Build Phase 之上运行`iosod`脚本。

# r - 从索引值列表中查询 RJDBC

> ID：13568515
> 
> 赞同：2
> 
> 时间：2012-11-26T16:02:03.103
> 
> 标签：r, vector, rjdbc

我正在尝试执行查询或表单：

```
SELECT a.col1, b.col2 FROM tbl1 a, tbl2 b 
WHERE a.col2 = b.col1
AND a.col3 = df$x
AND a.col4 = df$y 
```

在使用 RJDBC 的 Oracle 数据库上。我有一个数据框，其中 x 和 y 列标识。我找不到有关如何为数据框中的各个值生成和执行查询的任何详细信息。

我的数据框是以下形式：

```
df <- data.frame(x=c("LIB258", "LIB258", "LIB359"), y=c("A01", "B03", "C08")) 
```

所以我需要一种方法来生成并顺序运行三个不同的查询，然后将结果收集到一个数据框中。

在 R 中是否有一种优雅的方法可以做到这一点？我知道我可以使用一些`paste`魔法来构建单个查询，但是如何运行它们并将结果返回到数据框？

谢谢哈桑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:23:12.077

我不知道 RJDBC，但我使用过 RODBC。您可以使用一点`paste`or`paste0`来创建查询：

```
query.list <- paste0("
  SELECT a.col1, b.col2 FROM tbl1 a, tbl2 b 
  WHERE a.col2 = b.col1
  AND a.col3 = ",df$x,"
  AND a.col4 = ",df$y) 
```

然后使用`lapply`，类似

```
result.set <- lapply(query.list,dbGetQuery,conn=con) 
```

这应该返回一个数据框列表。然后您可以将它们全部重新组合在一起

```
final.df <- do.call(rbind,result.set) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:51:09.737

使用 plyr 和粘贴

```
library(plyr)
dff <- data.frame(x=c("LIB258", "LIB258", "LIB359"), y=c("A01", "B03", "C08"))
ddply(dff,.(x,y),
          function(rr){
          query <- paste("SELECT a.col1, b.col2 FROM tbl1 a, tbl2 b ",
                         "WHERE a.col2 = b.col1",
                         paste("AND a.col3 = ",rr$x,sep=''),
                         paste("AND a.col4 = ",rr$y,sep=''),sep ='\n')

          result <- dbGetQuery(conn, query)
          })

this should retuen something like : 

     x   y col1 col2
1 LIB258 A01    4    3
2 LIB258 A01    3    2
3 LIB258 A01    1    1
4 LIB258 B03    1    3
5 LIB258 B03    4    1
6 LIB258 B03    3    4
7 LIB359 C08    6    5
8 LIB359 C08    3    1
9 LIB359 C08    1    4 
```

# javascript - 使用 Javascript 中的值删除父 JSON

> ID：13568516
> 
> 赞同：0
> 
> 时间：2012-11-26T16:02:08.470
> 
> 标签：javascript, json

需要一些 JSON 帮助。我正在使用与此类似的 JSON：

```
{
    GreatGrandfather: {
        GrandFather: {
            Father: [
                {
                    Son: [
                        {
                            Name: "Abu Nazir",
                            Detail: {
                                Class: "3rd Grade"
                            }
                        },
                        {
                            Name: "Dexter",
                            Detail: {
                                Class: "6th Grade"
                            }
                        },
                        {
                            Name: "Rick",
                            Detail: {
                                Class: "11th Grade"
                            }
                        }
                    ]
                },
                {
                    Son: [
                         {
                            Name: "Tom Walker",
                            Detail: {
                                Class: "3rd Grade"
                            }
                        },
                        {
                            Name: "Sgt Bastisa",
                            Detail: {
                                Class: "6th Grade"
                            }
                        },
                        {
                            Name: "The Governer",
                            Detail: {
                                Class: "11th Grade"
                            }
                        }
                    ]
                }
            ]
        }
    }
} 
```

我的问题是如何删除 Class 值为“3rd Grade”的 Sons？所以阿布纳齐尔和汤姆沃克都将被删除，每个父亲都只有两个儿子？

另外，我如何将儿子添加到两个父亲中？

```
{Name: "Stewie",Detail: {Class:"Kindergarden"}} 
```

和

```
{Name: "Peter",Detail: {Class:"1st Grade"}} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:13:11.720

```
var obj = JSON.parse(jsonstring);
obj.GreatGrandFather.GrandFather.Father.forEach(function(father) {
    var sons = father.Son.filter(function(son) {
        return son.Details.Class != "3rd Grade";
    });
    sons.push({Name: "Stewie",Detail: {Class:"Kindergarden"}});
    sons.push({Name: "Peter",Detail: {Class:1st Grade}});
    father.Son = sons;
});
var newjson = JSON.stringify(obj); 
```

当然，您可以使用循环而不是 ES5.1 迭代器函数来实现，但我认为您明白了这个概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:14:45.077

在 javascript 中，您`JSON.parse`可以将 JSON 字符串转换为 javascript 对象，并对其进行操作：

```
var parsed = JSON.parse(JSONString);
var fathers = parsed.GreatGrandfather.GrandFather.Father;

// loop through the father array, removing sons in 3rd grade
for (var i = 0; i < fathers.length; i++) {
    var sons = fathers[i].Son;

    for (var j = 0; j < sons.length; j++) {
        // remove the 3rd graders
        if (sons[j].Detail.Class === '3rd Grade') {
            sons.splice(j, 1);
        }
    }
}

// add some sons
var newSon = {
    Name: "Stewie",
    Detail: {
        Class: "Kindergarden"
    }
};

fathers[0].Son.push(newSon); 
```

# php - cakephp 组件和助手破坏了 oop 逻辑！我应该如何进行？

> ID：13568533
> 
> 赞同：1
> 
> 时间：2012-11-26T16:03:16.223
> 
> 标签：php, class, cakephp, cakephp-2.0

我在视图和控制器中也需要一个字符串操作类！我看到 cake 在这种情况下重用组件和帮助程序中的代码，我认为这会破坏 OOP 逻辑（例如 Session->read）！

我没有这样做，而是创建了一个在 StringsHelper 和 StringsComponent 中导入的供应商类。然后我创建了一个相同的函数来实例化 Vendor/String 类并从相应的函数返回结果。这不是完全继承并且仍然是多余的，但是如果我更改类中的代码，它会随处更改。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:17:49.097

您不需要将此类类包装在 Helper 或 Component 中。

`APP/Lib`您可以简单地使用静态方法创建一个类，然后像 Mark 提到的那样将其放入。

```
<?php
class StringTool{

  public static function manipulate($string){
   ...
  }

} 
```

然后在你需要的任何类中使用它，无论是在组件、助手、模型等中。

```
<?php
$s2 = StringTool::manipulate($s1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:11:47.723

我以前问过同样的问题。最好的地方是在 app/Libs 中，你可以在其中放置一个带有静态辅助函数的类，这些函数可以在应用程序的任何地方使用，包括控制器和视图。

使用导入类`App::import('Lib', 'YourClass')`

[CakePHP - 在我的应用程序结构中放置自定义实用程序类的最佳位置在哪里？](https://stackoverflow.com/questions/7307083/cakephp-where-is-the-best-place-to-put-custom-utility-classes-in-my-app-struct)

# android - Android相机预览处理

> ID：13568535
> 
> 赞同：3
> 
> 时间：2012-11-26T16:03:18.457
> 
> 标签：android, performance, filter, camera, preview

我知道已经有类似的问题，但它们对我没有帮助。

目前，我正在玩相机预览，我想应用一些自定义过滤器。但是，性能真的很差。我找到了很多方法，但没有任何效果。

*   [这种方法](https://stackoverflow.com/questions/8371055/apply-custom-filters-to-camera-output)有效，但正如答案所述，性能真的很差
*   我已经用[这篇文章](http://www.41post.com/3470/programming/android-retrieving-the-camera-preview-as-a-pixel-array)中的方法将上面的YUV转换为RGB ，但结果是一样的。性能很差。
*   我也尝试过 Play 商店中的[OpenCV](http://opencv.org/platforms/android.html)示例，但性能没有我希望的那么好。此外，使用 NDK 会增加复杂性。

那么应用过滤器的最佳方法是什么？我知道许多其他应用程序可能提供良好的质量和性能，例如[Camera MX](https://play.google.com/store/apps/details?id=com.magix.camera_mx&feature=search_result)和[Cartoon Camera](https://play.google.com/store/apps/details?id=com.fingersoft.cartooncamera&feature=search_result)。他们是如何做到的呢？

感谢您的提示。

# python - Python中递归期间的内存使用

> ID：13568537
> 
> 赞同：1
> 
> 时间：2012-11-26T16:03:23.150
> 
> 标签：python, memory, memory-management, recursion

我已经实现了一个递归函数，它以一个 numpy 数组为参数。这里是简化版：

```
 def rec(arr):

     rec(arr[indices]) 
```

在每个递归调用中，我使用由一些索引索引的数组的一部分。

我的问题是关于内存负载：python 如何处理这个？它是否在每次调用时复制数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:06:07.040

这取决于`indices`. 如果是切片，则没有副本。另一方面，如果您使用[花哨的索引](http://www.scipy.org/Tentative_NumPy_Tutorial#head-0dffc419afa7d77d51062d40d2d84143db8216c2)，则制作一个副本。

我建议阅读NumPy 教程中的[副本和视图](http://www.scipy.org/Tentative_NumPy_Tutorial#head-1529ae93dd5d431ffe3a1001a4ab1a394e70a5f2)（即使该部分不包括花哨的索引）。

# java - 循环遍历结果 来自 jOOQ

> ID：13568538
> 
> 赞同：2
> 
> 时间：2012-11-26T16:03:28.270
> 
> 标签：java, jsp, jstl, jooq

有没有办法`Result<Record>`从 jOOQ 中循环`<c:forEach>`？

这是getter方法：

```
public Vector<Map<String, String>> getUsers() {
    Factory sql = new Factory(Database.getInstance().connect(), SQLDialect.MYSQL);
    Result<Record> results = sql.select().from("users").fetch();

    Vector<Map<String, String>> v = new Vector<Map<String, String>>();
    for(Record item: results) {
        Map<String, String> m = new HashMap<String, String>();
        m.put("login", item.getValueAsString("login"));
        // other columns
        v.add(m);
    }
    return v;
} 
```

这是视图：

```
<c:forEach var="u" items="${users}">
   ${u.login} <br />
</c:forEach> 
```

有没有办法让我的getter方法更简单，比如：

```
public Result<Record> getUsers() {
    Factory sql = new Factory(Database.getInstance().connect(), SQLDialect.MYSQL);
    reutrn sql.select().from("users").fetch();
} 
```

但正如前面提到的，我不知道如何循环遍历它`<c:forEach>`，或者它是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:29:21.447

似乎您想对记录进行操作，就好像它们是地图一样。以下是使用 jOOQ 实现此目的的方法：

```
public List<Map<String, Object>> getUsers() {
  Factory sql = new Factory(Database.getInstance().connect(), SQLDialect.MYSQL);
  return sql.select().from("users").fetchMaps();
} 
```

在此处查看相关的 Javadocs：

*   [`ResultQuery.fetchMaps()`](http://www.jooq.org/javadoc/latest/org/jooq/ResultQuery.html#fetchMaps%28%29)
*   [`Result.intoMaps()`](http://www.jooq.org/javadoc/latest/org/jooq/Result.html#intoMaps%28%29)
*   [`Record.intoMap()`](http://www.jooq.org/javadoc/latest/org/jooq/Record.html#intoMap%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:05:54.560

```
public List<String> getUsers() {
  Factory sql = new Factory(Database.getInstance().connect(), SQLDialect.MYSQL);
  Result<Record> results = sql.select().from("users").fetch();

  return results.getValues(loginFieldIndex);
} 
```

并且您将返回的列表放入请求属性（例如属性名称“用户”）和 jsp 中：

```
<c:forEach var="u" items="${users}">
  ${u} <br />
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T06:37:20.900

这是“jooq jsp”的最佳 Google 答案，因此（经过一些实验）这是将 JOOQ 与 JSP 结合起来的另一种方式，同时保留了 JOOQ 的类型安全和性能。

```
<%@ page isELIgnored="false" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ page import="static com.example.jooq.tables.TblCats.*" %>
<%@ page import="org.jooq.Result, org.jooq.Record" %>

<h2>Length: ${fn:length(cats)}</h2>

<c:forEach var="cat" items="${cats}">
 <% Record cat = (Record) pageContext.getAttribute("cat"); %>

 <%= cat.getValue(TBL_CATS.TITLE) %>,
 <%= cat.getValue(TBL_CATS.POSITION) %>

 <br>

</c:forEach> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-03T00:40:15.980

[如果你经常将JOOQ](http://docs.oracle.com/javaee/5/api/javax/el/ELResolver.html)与 JSP 一起使用，那么添加一个可以理解`Record`.

这是一个简单的实现：[https ://gist.github.com/dbichko/074641915157ac21996c](https://gist.github.com/dbichko/074641915157ac21996c)

然后您需要向 JSP 引擎注册它。在一个`ServletContextListener`和任何地方一样好的地方：

```
public void contextInitialized(ServletContextEvent sce) {
    ServletContext ctx = sce.getServletContext();
    JspFactory.getDefaultFactory()
        .getJspApplicationContext(ctx).addELResolver(new RecordResolver());
} 
```

有了它，您可以将记录字段用作属性：

```
<c:forEach var="user" items="${users}">
  ${user.login} <br />
</c:forEach> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T16:14:35.530

我会使用像 Hibernate 这样的 ORM 库，所以你只需遍历一个简单的对象列表。

如果您只是执行 JDBC 操作，它可能看起来有点重，但看起来您已经到达了对您有用的地方。像这样的东西...

```
@Entity
@Table(name = "users")
class User {
    private String login;
    ...
} 
```

然后像这样的DAO类......

```
public List<Users> getUsers() {
    return (List<Users>)sessionFactory.getCurrentSession().createQuery("from Users").list();
} 
```

显然，有很多设置可以将 Hibernate 带入您的项目，但我认为好处超过了这一点。

编辑：我不认为 JOOQ 可以做 ORM，但它似乎有一个行映射系统。如果您想坚持使用 JOOQ，请尝试创建一个`RecordHandler`并使用`fetchInto()`方法。

# datetime - 如何指定 JAXB 编组 xsd:dateTime 时使用的日期格式？

> ID：13568543
> 
> 赞同：91
> 
> 时间：2012-11-26T16:03:36.770
> 
> 标签：datetime, jaxb, format, marshalling, milliseconds

当 JAXB 将日期对象 ( `XMLGregorianCalendar`) 编组为 xsd:dateTime 元素时。如何指定生成的 XML 的格式？

例如：默认数据格式使用毫秒`<StartDate>2012-08-21T13:21:58.000Z</StartDate>` 我需要省略毫秒。 `<StartDate>2012-08-21T13:21:58Z</StartDate>`

如何指定我希望它使用的输出表单/日期格式？我`javax.xml.datatype.DatatypeFactory`用来创建`XMLGregorianCalendar`对象。

```
XMLGregorianCalendar xmlCal = datatypeFactory.newXMLGregorianCalendar(cal); 
```

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-11-26T17:04:31.027

您可以使用`XmlAdapter`自定义日期类型写入 XML 的方式。

```
package com.example;

import java.text.SimpleDateFormat;
import java.util.Date;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateAdapter extends XmlAdapter<String, Date> {

    private final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    @Override
    public String marshal(Date v) throws Exception {
        synchronized (dateFormat) {
            return dateFormat.format(v);
        }
    }

    @Override
    public Date unmarshal(String v) throws Exception {
        synchronized (dateFormat) {
            return dateFormat.parse(v);
        }
    }

} 
```

然后，您使用`@XmlJavaTypeAdapter`注释来指定`XmlAdapter`应该用于特定字段/属性。

```
@XmlElement(name = "timestamp", required = true) 
@XmlJavaTypeAdapter(DateAdapter.class)
protected Date timestamp; 
```

使用 xjb 绑定文件：

```
<xjc:javaType name="java.util.Date" xmlType="xs:dateTime"
        adapter="com.example.DateAdapter"/> 
```

将产生上述注释。
（通过最终添加`xjc`命名空间`xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"`：）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-29T23:08:09.283

我使用 SimpleDateFormat 创建 XMLGregorianCalendar，例如在此示例中：

```
public static XMLGregorianCalendar getXmlDate(Date date) throws DatatypeConfigurationException {
    return DatatypeFactory.newInstance().newXMLGregorianCalendar(new SimpleDateFormat("yyyy-MM-dd").format(date));
}

public static XMLGregorianCalendar getXmlDateTime(Date date) throws DatatypeConfigurationException {
    return DatatypeFactory.newInstance().newXMLGregorianCalendar(new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(date));
} 
```

第一种方法创建 XMLGregorianCalendar 的实例，该实例由 XML 编组器格式化为有效的 xsd:date，第二种方法产生有效的 xsd:dateTime。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-28T08:36:56.213

对我来说非常简单的方法。格式化 XMLGregorianCalendar 以在 java 中编组。

我只是以良好的格式创建我的数据。这`toString`将被称为产生良好的结果。

```
public static final XMLGregorianCalendar getDate(Date d) {
    try {
        return DatatypeFactory.newInstance().newXMLGregorianCalendar(new SimpleDateFormat("yyyy-MM-dd").format(d));
    } catch (DatatypeConfigurationException e) {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-31T10:22:58.840

[https://www.baeldung.com/jaxb](https://www.baeldung.com/jaxb)

```
public class DateAdapter extends XmlAdapter<String, Date> {

    private static final ThreadLocal<DateFormat> dateFormat 
      = new ThreadLocal<DateFormat>() {

        @Override
        protected DateFormat initialValue() {
            return new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        }
    }

    @Override
    public Date unmarshal(String v) throws Exception {
        return dateFormat.get().parse(v);
    }

    @Override
    public String marshal(Date v) throws Exception {
        return dateFormat.get().format(v);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-31T11:14:08.597

用法：

```
import com.company.LocalDateAdapter.yyyyMMdd;

//...

@XmlElement(name = "PROC-DATE")
@XmlJavaTypeAdapter(yyyyMMdd.class)
private LocalDate processingDate; 
```

本地日期适配器

```
import javax.xml.bind.annotation.adapters.XmlAdapter;
import org.joda.time.LocalDate;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

public class LocalDateAdapter extends XmlAdapter<String, LocalDate> {

  public static final class yyyyMMdd extends LocalDateAdapter {
    public yyyyMMdd() {
      super("yyyyMMdd");
    }
  }

  public static final class yyyy_MM_dd extends LocalDateAdapter {
    public yyyy_MM_dd() {
      super("yyyy-MM-dd");
    }
  }

  private final DateTimeFormatter formatter;

  public LocalDateAdapter(String pattern) {
    formatter = DateTimeFormat.forPattern(pattern);
  }

  @Override
  public String marshal(LocalDate date) throws Exception {
    return formatter.print(date);
  }

  @Override
  public LocalDate unmarshal(String date) throws Exception {
    return formatter.parseLocalDate(date);
  }
} 
```

# sql - Oracle SQL+ 查询

> ID：13568545
> 
> 赞同：-2
> 
> 时间：2012-11-26T16:03:42.873
> 
> 标签：sql, oracle

我正在为我正在建立的商店创建一个租赁系统。我需要的查询之一是找到在过去 12 个月中租用最多的客户。我有 date_out 和 date_in 列以及一个代表客户租金数量的数字。

表格：客户（列：姓名、电话）和交易（date_out、date_in）

我用 TO_DATE 插入日期。

有谁知道我会怎么做？

编辑：目前它只显示 1 作为rent_count，而不是我为 num_of_rents 输入的 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:07:12.820

这些是您的实际表格吗，如果它们不适合用途，至少您需要在两者之间建立某种联系。

至少你需要一些类似的东西。

```
CREATE TABLE customers (customer_id number(8), customer_name VARCHAR2(30), phone VARCHAR2(10));

CREATE TABLE rents (customer_id number(8), rent_id number(8), date_from DATE, date_to DATE);

INSERT INTO customers (customer_id, customer_name, phone) VALUES (1, 'Test Customer', '1234');

INSERT INTO rents (customer_id, rent_id, date_from, date_to) VALUES (1,1,TO_DATE('01/03/2011','DD/MM/YYYY'), TO_DATE('02/03/2011','DD/MM/YYYY'));
INSERT INTO rents (customer_id, rent_id, date_from, date_to) VALUES (1,1,TO_DATE('01/04/2012','DD/MM/YYYY'), TO_DATE('05/04/2012','DD/MM/YYYY'));
INSERT INTO rents (customer_id, rent_id, date_from, date_to) VALUES (1,2,TO_DATE('16/08/2012','DD/MM/YYYY'), TO_DATE('17/08/2012','DD/MM/YYYY'));

SELECT customer_name, count(rent_id) FROM customers 
  JOIN rents on customers.customer_id = rents.customer_id 
 WHERE DATE_TO BETWEEN SYSDATE-365 AND SYSDATE
 GROUP BY customer_name; 
```

您将需要调整 WHERE 子句取决于在您的上下文中构成租金的内容，即刚开始在该期间的租金，在该期间结束的租金或两者兼而有之。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:06:54.993

```
select customer_name, count(num_of_rents) as rent_count
from customers
where (SYSDATE - customer_DOB) <= 365
group by customer_name
order by rent_count desc 
```

# spring - Spring Custom Scoped Bean - 销毁回调

> ID：13568552
> 
> 赞同：1
> 
> 时间：2012-11-26T16:04:15.650
> 
> 标签：spring, callback, scope

我在我的应用程序中创建了一个自定义范围，它实现了`org.springframework.beans.factory.config.Scope`.

作为其中的一部分，我必须实现下面的方法，以便在我的自定义范围 bean 上正确调用 PreDestroy 方法。

```
public void registerDestructionCallback(String name, Runnable callback) {
} 
```

该方法上的 javadocs 不是那么清楚，我似乎不知道应该在该方法中编写什么代码。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:34:24.663

这取决于您的自定义范围实际上做了什么，以及您是否将此范围用于 DisposableBean、具有销毁方法的 bean 和 DestructionAwareBeanPostProcessor。

在最简单的情况下，您不需要做任何事情或只记录不支持回调的警告。

在更复杂的情况下，您需要处理常规自定义范围生命周期之外的对象销毁。例如。当对象被销毁时，基于它的过期或类似的东西（不像对`Scope.remove(String name)`方法的显式调用）。

例如，对于会话范围的 bean，此回调与[HttpSessionListener.sessionDestroyed(..)](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html#sessionDestroyed%28javax.servlet.http.HttpSessionEvent%29)事件挂钩。查看`org.springframework.web.context.request.SessionScope`课程的来源。

# netbeans - linux 无法连接到端口 9000 上的 XDebug

> ID：13568555
> 
> 赞同：2
> 
> 时间：2012-11-26T16:04:25.323
> 
> 标签：netbeans, xdebug

我目前正在尝试将 Netbeans 作为 IDE 来处理 PHP 文件。部分工作是让 Xdebug 正常运行。我已经让 Xdebug 在 Windows 机器上工作，但这是我在 Linux 上的第一次尝试。

我得到了正确的模块，我按照[http://xdebug.org/wizard.php上的说明进行操作](http://xdebug.org/wizard.php)

我也有一个正确的 phpinfo() 输出，带有 Xdebugsection pressent 和所有内容。我无法发布我的 phpinfo() 的输出，但那里一切似乎都很好。我的 php.ini 文件中的配置如下：

```
 [XDebug]
 zend_extension="/usr/lib/php5/20090626+lfs/xdebug.so"
 xdebug.remote_enable=on
 xdebug.remote_log="/var/log/xdebug.log"
 xdebug.remote_handler=dbgp
 xdebug.remote_mode=req
 xdebug.remote_host=localhost
 xdebug.remote_port=9101

 [ZendModules]
 Xdebug 
```

我只希望能够连接到端口 9101（Xdebug 监听的端口）。我从网站上获得了以下小脚本来执行此操作。

```
 <?php
 $address = '127.0.0.1';
 $port = 9101;
 print $port . " " .$address . "\n";
 $sock = socket_create(AF_INET, SOCK_STREAM, 0);
 print "sock = " . $sock . "\n";
 socket_bind($sock, $address, $port) or die('Unable to bind');
 print "socket bind worked \n";
 socket_listen($sock);
 print "listening on sock\n";
 $client = socket_accept($sock);
 echo "connection established: $client";
 socket_close($client);
 socket_close($sock);
 ?> 
```

当我运行这个脚本时，我得到以下输出：

```
michael@michael-Inspiron-N5030:~$ php5 testXdebug.php 
9101 127.0.0.1
sock = Resource id #4
socket bind worked 
listening on sock 
```

这意味着脚本不会完成运行，它只是停在那里，没有其他任何事情发生。

有人知道可能导致这种情况的原因吗？

# if-statement - idl elseif 问题/混乱

> ID：13568557
> 
> 赞同：2
> 
> 时间：2012-11-26T16:04:29.953
> 
> 标签：if-statement, idl-programming-language

我正在尝试在 IDL 中添加一个简单的 elseif 语句，并且我玩得很开心。matlab 代码看起来像这样。

```
a = 1
b = 0.5

diff = a-b
thres1 = 1
thres2 = -1

if diff < thres1 & diff > thres2  
  'case 1'
elseif diff > thres1 
  'case 2'
elseif diff < thres2
  'case 3'
end 
```

但是 IDL 代码并不是那么简单，我在语法正确时遇到了麻烦。帮助说明：语法 IF 表达式 THEN 语句 [ELSE 语句] 或 IF 表达式 THEN BEGIN 语句 ENDIF [ELSE BEGIN 语句 ENDELSE]

但没有给出如何使用多个表达式和 elseif 的示例。我已经尝试了很多变化，但似乎无法做到正确。

有人有建议吗？以下是我尝试过的一些事情：

```
if (diff lt thres1) and (diff gt thres2) then begin
  print, 'case 1'
endif else begin
if (diff gt thres1) then
  print, 'case 2'
endif else begin
if (diff lt thres2) then
  print, 'case 3'
endif 

if (diff lt thres1) and (diff gt thres2) then begin
  print, 'case 1'
else (diff gt thres1) then
  print, 'case 2'
else (diff lt thres2) then
  print, 'case 3'
endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:51:14.030

IDL中没有`elseif`声明。尝试：

```
a = 1
b = 0.5

diff = a - b
thres1 = 1
thres2 = -1

if (diff lt thres1 && diff gt thres2) then begin
  print, 'case 1'
endif else if (diff gt thres1) then begin
  print, 'case 2'
endif else if (diff lt thres2) then begin
  print, 'case 3'
endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:09:56.137

所以我想通了。对于我们这些不熟悉 IDL 语言的人。

在我看来，IDL 对于每个 if 语句只能处理 2 种情况，所以我不得不在另一个“if”块中编写。

希望这可以帮助那里的人。

```
a = 1;
b = 2.5;

diff = a-b;
thres1 = 1;
thres2 = -1;

if diff gt thres1 then begin
  print,'case 1'
endif

if (diff lt thres2) then begin
  print,'case 2'
  endif else begin
  print,'case 3'
endelse 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T17:14:13.777

mgalloy 的回答是正确的，但您可能还会看到一些人（比如我），当只有一行时不使用 begin/endif。（当然，如果有人回去尝试插入一行，却没有意识到你做了什么，这会导致问题，所以迈克尔的方法可能更好......这只是为了当你看到这种格式时，你意识到它正在做一样：

```
if (diff lt thres1 && diff gt thres2) then $
  print, 'case 1' $
else if (diff gt thres1) then $
  print, 'case 2' $
else if (diff lt thres2) then $
  print, 'case 3' 
```

或可能使某人不太容易插入的格式：

```
if      (diff lt thres1 && diff gt thres2) then print, 'case 1' $
else if (diff gt thres1)                   then print, 'case 2' $
else if (diff lt thres2)                   then print, 'case 3' 
```

# mysql - 每行的mysql额外计数字段

> ID：13568565
> 
> 赞同：0
> 
> 时间：2012-11-26T16:05:26.633
> 
> 标签：mysql, count, row, field, duplicate-data

我在这里有一个查询，任何人都可以帮我计算重复字段的总数吗？

```
SELECT *
FROM item
    INNER JOIN itemgroup on item.itemgroupid = itemgroup.itemgroupid    
    INNER JOIN status on status.statusid = item.status
    INNER JOIN owner on owner.ownerid = item.owner
    INNER JOIN 
    (
      SELECT code  //, (SELECT count(*) FROM item WHERE ....) as 'total_duplicateds'
      FROM item
      GROUP BY code
      HAVING count(code) > 1
    ) dup ON item.code = dup.code 
```

项目总数：500 重复代码的项目总数：149

现在我总共返回了 149 个字段，如何将其作为新字段添加到每一行？斜线之后是我学会做它的方式，但这对我来说有点高..

有人可以帮我吗？

**更具体地说** ，我想得到的回报是：

```
itemid | code| itemname | itemgroup | owner | total_duplicateds
   1     1000      X          1         1            3
   2     1000      X          2         2            3
   3     1001      A          1         1            3
   4     1000      B          3         1            3
   5     1002      U          2         1            3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:07:47.390

添加`COUNT`聚合和`GROUP BY`您感兴趣的所有列。

# asp.net-mvc-3 - 从数据库更新模型始终显示在 EF 4 中添加下的表

> ID：13568569
> 
> 赞同：2
> 
> 时间：2012-11-26T16:05:42.310
> 
> 标签：asp.net-mvc-3, entity-framework

我有一个使用 EF4 和数据库优先设计的现有 MVC3 项目。所有实体和 edmx 均已正确生成。

问题是当我向表中添加列或对数据库进行任何更改时。进行更改后，我会回到 VS2010 并打开我的 edmx 文件。当我右键单击并选择“从数据库更新模型”时，它会在“添加”下显示我的所有表，而不是仅显示我在“刷新”下所做的更改。我到处寻找原因，但无济于事。任何帮助都会很棒。

# java - ListView 适配器如何跳过数据

> ID：13568576
> 
> 赞同：0
> 
> 时间：2012-11-26T16:06:16.350
> 
> 标签：java, android, android-listview

我有一个扩展 BaseAdapter 的适配器，我已经成功映射了项目，但我想如果文件名以“.php”结尾，它没有显示任何数据。我为此使用以下代码

```
 public View getView(int position, View convertView, ViewGroup parent) {
    View row=convertView;
    row = inflater.inflate(R.layout.custom_row_view, parent, false);
    if(data.get(position).name.endsWith(".php"))
    row.setVisibility(View.GONE);
    } 
```

但这会在该列表视图中留下空白空间。

有什么方法我在 listView 上检查它没有映射名称以“.php”结尾的数据，此时不希望出现空白屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:09:41.477

由于您已经在扩展`BaseAdapter`，因此无论您使用哪种方法添加项目，请先浏览它们，不要添加您不想要的那些。

# .net - 如何拦截 WCF 序列化期间发生的异常？

> ID：13568579
> 
> 赞同：0
> 
> 时间：2012-11-26T16:06:22.107
> 
> 标签：.net, wcf, serialization, error-handling

我有一个具有所有数据合同/数据成员属性的合法数据对象。由于某种原因，WCF 服务在操作完成后崩溃，结果作为返回值传递。我相信这与 WCF 无法正确序列化该结果有关。测试客户端没有说任何具体的内容：

```
The underlying connection was closed: The connection was closed unexpectedly.

Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at IFacade.PickSecurities(String pattern, Int32 atMost)
   at FacadeClient.PickSecurities(String pattern, Int32 atMost)

Inner Exception:
The underlying connection was closed: The connection was closed unexpectedly.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) 
```

我可以使用定制的服务主机工厂来控制创建服务的实例。

我知道我可以设置跟踪侦听器并检查日志，但是这样做很麻烦。所以我宁愿在它发生的时候在服务器上明确地处理它。

那么我如何**以编程方式拦截该异常**并返回适当的故障信息？

**更新**

对于那些主张使用 system.diagnostics 跟踪日志进行故障排除的人。您能通过查看以下日志条目告诉我有什么问题吗？

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2012-11-26T16:20:41.8343508Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{2d6e8a90-a784-4add-a9b6-9fd9c37b7b0f}" />
<Execution ProcessName="WebDev.WebServer40" ProcessID="5104" ThreadID="10" />
<Channel />
<Computer>WASWK060</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>4eaf36d4-1-129984204415953508</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.ProtocolException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>There is a problem with the XML that was received from the network. See inner exception for more details.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.ProtocolException: There is a problem with the XML that was received from the network. See inner exception for more details. ---&gt; System.Xml.XmlException: The body of the message cannot be read because it is empty.
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Xml.XmlException, System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The body of the message cannot be read because it is empty.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.Xml.XmlException: The body of the message cannot be read because it is empty.</ExceptionString>
</InnerException>
</Exception>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

另一个

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2012-11-26T16:20:41.8383508Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{2d6e8a90-a784-4add-a9b6-9fd9c37b7b0f}" />
<Execution ProcessName="WebDev.WebServer40" ProcessID="5104" ThreadID="10" />
<Channel />
<Computer>WASWK060</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>4eaf36d4-1-129984204415953508</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.ProtocolException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Content Type application/soap+xml; charset=utf-8 was sent to a service expecting text/xml; charset=utf-8\.  The client and service bindings may be mismatched.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpInput.ThrowHttpProtocolException(String message, HttpStatusCode statusCode, String statusDescription)
at System.ServiceModel.Channels.HttpInput.ValidateContentType()
at System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(Exception&amp; requestException)
at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.ProtocolException: Content Type application/soap+xml; charset=utf-8 was sent to a service expecting text/xml; charset=utf-8\.  The client and service bindings may be mismatched.</ExceptionString>
<DataItems>
<Data>
<Key>System.ServiceModel.Channels.HttpInput.HttpStatusCode</Key>
<Value>UnsupportedMediaType</Value>
</Data>
<Data>
<Key>System.ServiceModel.Channels.HttpInput.HttpStatusDescription</Key>
<Value>Cannot process the message because the content type 'application/soap+xml; charset=utf-8' was not the expected type 'text/xml; charset=utf-8'.</Value>
</Data>
</DataItems>
</Exception>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

我无法这样做。现在，当我知道问题出在哪里时，我可以告诉您，此日志记录不会为您提供任何可以引导您解决问题的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:20:17.713

看看这篇文章：- [http://www.creativecodedesign.com/node/58](http://www.creativecodedesign.com/node/58)

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SomeServiceServiceBehavior">      
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

includeExceptionDetailInFaults 是我认为你需要的。

更新对于您遇到的错误

> 内容类型应用程序/soap+xml；charset=utf-8 被发送到需要 text/xml 的服务；字符集=utf-8。客户端和服务绑定可能不匹配。

看起来您的服务器和客户端绑定不匹配。并不是您的 XML 格式不正确，而是它没有以服务器根据服务器端绑定配置所期望的格式发送。您需要确保服务器和客户端都使用相同的绑定类型（例如 basicHttpBinding 或 wsHttpBinding）。

[客户端和服务绑定不匹配](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/f29cd9c8-3c89-43d2-92ae-d2a270ab86b9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T13:03:51.700

在 IIS 中，将您的设置`Application Pool Identity`为`Local System`.

它对我有用。

# oracle - 在报告列链接中传递超过 3 个项目

> ID：13568586
> 
> 赞同：1
> 
> 时间：2012-11-26T16:06:48.050
> 
> 标签：oracle, oracle-apex

我有一个列出学生的报告，我想要一个列来编辑学生。我已经按照这个答案这样做了：

[如何在 Oracle APEX 的报表中为每一行添加一个编辑按钮？](https://stackoverflow.com/questions/1075550/how-do-you-add-an-edit-button-to-each-row-in-a-report-in-oracle-apex)

但是，我似乎只能通过 3 个项目，并且没有添加更多项目的选项。我截取了一个截图来解释更多：

![在此处输入图像描述](../Images/572d629a24faa56708786fbabeff2a00.png)

我需要传递 8 个值，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:47:44.813

通常，为此您只会传递主键列（此处仅看起来像 #RECORD_NUMBER#）。然后，您将人发送到的页面将仅基于主键查找加载表单。如果多个用户正在使用此应用程序，您可能希望编辑表单始终检索数据库的当前值，而不是当特定人员运行某个报告时屏幕上发生的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:13:24.443

将目标类型更改为 URL。Apex 会将已有的内容格式化为一个 URL 文本字段，该字段神奇地出现在 Tem3 和 Page Checksum 之间。您需要做的就是在 URL 的适当位置添加新项目和值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T14:22:54.350

我找到了一种解决方法，至少它对我的场景很有用。我有一个 IR 页面，查询返回 4 列，比如说：ID、DESCRIPTION、SOME_NUMBER、SOME_NUMBER2。
ID NUMBER(9)、描述 VARCHAR2(30)、SOME_NUMBER NUMBER(1)、SOME_NUMBER2 NUMBER(3)。我所做的是，以这种方式设置项目：
`P11_ITEM1-->#ID#`
`P11_ITEM2-->#DESCRIPTION#`
`P11_ITEM3-->#SOME_NUMBER##SOME_NUMBER2#`

以前的数据已发送到第 11 页。
在第 11 页中，所有项目都是仅显示项目。
而 P11_ITEM3 实际上收到了两个连接的值。
例如，调用页面有列 SOME_NUMER=4 和 SOME_NUMBER2=150
所以，在第 11 页，P11_ITEM3 显示 4150
在第 11 页中，我创建了一个 Before Footer 进程（pl/sql 表达式）
来设置新项目，例如 P11_N1 作为源SUBSTR(P11_ITEM3,1,1)
和项目 P11_N2 作为源 SUBSTR(P11_ITEM3,2,3)
所以，我从调用 IR 页面获得了具有相应值的那些项目。

我没有只为新的查找访问传递主键的原因是因为我不想强调数据库执行新查询，因为所有数据都已经加载到页面项中。我已经做了 20 年的 Oracle DBA，我知道如果您已经在其他地方获得了信息，则无需重新执行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T20:11:26.670

对于自称为 RAD 工具的产品来说，这些变通方法不是很有用。只需在 select 语句中包含一个单引号单词（从表 1 中选择 col1、'Randomword'、col2；）然后将该列定义为链接和宾果游戏！超过 3 个项目可供选择。

# c - 在调用 socket() 之前将未来的文件描述符设置为 0

> ID：13568593
> 
> 赞同：1
> 
> 时间：2012-11-26T16:07:20.630
> 
> 标签：c, sockets, file-descriptor

在 C 中的套接字编程中，我在一个简单的客户端/服务器示例中看到，在调用 之前，将保存套接字文件描述符`socket()`的变量设置为 0。`int`

```
int fds;
fds = 0;
fds = socket (AF_INET, SOCK_DGRAM, 0);
if (fds == -1) {
     perror("Socket():");
     exit(-1);
} 
```

这有什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:10:17.490

不，没有。`socket`将始终返回一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:10:09.187

只要您`fds`在写入变量之前不访问该变量，就没有真正的理由。

但是，如果您在定义和赋值之间有一定的距离，则设置`fds`为“无效”值可能会很有用，例如`-1`：

```
int fds = -1;
[ lots of code which might accidentally use fds ]
fds = socket (AF_INET, SOCK_DGRAM, 0);
if (fds == -1) {
     perror("Socket():");
     exit(-1);
} 
```

现在，想象一下我不小心在和`fds`之间的代码中使用了，由于使用无效，我肯定会得到一个错误。`int fds = -1;``fds = socket(...)`

另一方面，如果我没有设置`fds`为`-1`，它可能有任何值，也许是我们流程中有效的 FD 值。如果我`read()`对这个文件执行操作——或者更糟糕的是：write()`，我可能会以损坏的数据结构结束。

# html - 浏览器外的鼠标事件

> ID：13568598
> 
> 赞同：1
> 
> 时间：2012-11-26T16:07:30.120
> 
> 标签：html, mouseevent, dom-events

当指针在窗口外时，谷歌地图可以以某种方式处理鼠标事件。在地图拖动过程中可以看到此功能。我尝试做同样的事情，但当指针位于浏览器窗口之外时，我无法捕捉到任何事件。

如何像谷歌地图那样处理鼠标？

不要告诉我“不可能”，只要打开谷歌地图，看看拖动行为。

# html - 水平控制列表项的位置

> ID：13568600
> 
> 赞同：0
> 
> 时间：2012-11-26T16:07:40.633
> 
> 标签：html, css, position, html-lists, css-position

我有一个`<ul>`项目，悬停时会变大（带有动画）。现在我已经让它们位于屏幕的右侧（使用 CSS`right:0em`作为`<li>`类），并且我已经将`<li>`on hove 的位置设置为固定，这样只有它会随着它的增长而向左移动，并且所有的对象在将停留在右边。问题是，因此，当我将鼠标悬停在它上面时，下一个项目会在它“下方”。我该如何改变呢？（也许有办法只控制`<li>`悬停时的水平位置属性？）

**代码：**

[http://jsfiddle.net/KBprd/2/](http://jsfiddle.net/KBprd/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:36:24.027

没有任何代码来启动它有点难以帮助。但根据我收集到的信息，您希望所有项目都与菜单右侧齐平；只有“悬停”的元素从容器的右侧移开。我已经拍了一个如何做到这一点的例子。如果这不是您想要的，请在评论中提供更多代码或详细信息，我们可以从那里开始......

[这是更新的小提琴](http://jsfiddle.net/TNCodeMonkey/KBprd/13/)

CSS：

```
.navigation{
    position:fixed;
    z-index:1;
    top:3em;
    right:0em;

}
.navigation li.slide{
    color:#000000;
    display:block;
    padding: 0 10px;
    line-height:30px;
    margin-bottom:2px;
    font-weight:light;
    background:#00C9FF;
    -webkit-transition: all .2s ease-in-out;
    text-align:right;
    width:53px;
    float:right;

}
.navigation li:hover,.active{
    font-size:25px;
    cursor:pointer;
    width:100px!important;
    background:#5C0CE8;
}
.navigationClear {
    clear:both;
    height:1px;
     margin-bottom:-1px;  
}​ 
```

HTML：

```
<ul class="navigation">
        <li data-slide="1" class="slide">Slide 1</li>
        <li class="navigationClear"></li>
        <li data-slide="2" class="slide">Slide 2</li>
        <li class="navigationClear"></li>
        <li data-slide="3" class="slide">Slide 3</li>
        <li class="navigationClear"></li>
        <li data-slide="4" class="slide">Slide 4</li>
        <li class="navigationClear"></li>
</ul>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:30:10.970

您的悬停元素隐藏下面元素的原因是因为您已将“位置：固定”赋予悬停元素。我通过给 ul 元素一个宽度来解决您的问题，以便 li 元素不会排列。我还删除了悬停元素的固定位置。然后右浮动里。这样你也不需要在每个元素之后加上“clearNavigation”。

这是你的小提琴代码。

```
<ul class="navigation">
    <li data-slide="1">Slide 1</li>
    <li data-slide="2">Slide 2</li>
    <li data-slide="3">Slide 3</li>
    <li data-slide="4">Slide 4</li> 
```

​</p>

```
.navigation{
position:fixed;
z-index:1;
top:3em;
right:0em;
width:53px;
} 

.navigation li{
color:#000000;
display:block;
padding: 0 10px;
line-height:30px;
margin-bottom:2px;
font-weight:light;
background:#00C9FF;
-webkit-transition: all .2s ease-in-out;
text-align:right;
width:53px;
position:relative;
right:0em;
float:right;
}

.navigation li:hover,.active{
font-size:25px;
cursor:pointer;
width:100px!important;
background:#5C0CE8;
right:0em;
} 
```

# json - CakePHP - 使用 JSON 作为数据源

> ID：13568604
> 
> 赞同：0
> 
> 时间：2012-11-26T16:07:48.080
> 
> 标签：json, cakephp, datasource

我是新来的，所以如果我违反任何规则，请提前道歉。我正在尝试在 cakephp 中使用 json 数据源。自从查看 cake 文档中的 twitter 示例后，我几乎没有什么进展。我可以让 /model/ 列表工作，但关联不会填充，而且我通常是盲目的。我想知道是否有人有任何好的资源可以指导我，因为我能找到的在线参考资料似乎很少而且相差甚远。

谢谢。

更新：我的参考资料是：[http ://book.cakephp.org/2.0/en/models/datasources.html](http://book.cakephp.org/2.0/en/models/datasources.html)

令人尴尬，但我突然想到这段代码几乎不关心关联。它解决了“如何在 cakephp 应用程序中将来自 twitter 的数据作为模型呈现？”的问题。不关心其他相关模型之间的关联。不完全是它所呈现的“自动”，但经过更深入的研究，可以肯定地说不应该有任何开始。

如果我弄清楚了，我会在这里发布代码。我将捎带 dbosource 文件以及它的读取函数如何处理关联。

# css - 无图像、自定义样式的搜索栏

> ID：13568606
> 
> 赞同：0
> 
> 时间：2012-11-26T16:07:54.393
> 
> 标签：css

我正在与设计师合作，他向我发送了我们网页上搜索栏的以下设计：

![在此处输入图像描述](../Images/43dce4a3dd631d4bd15d329820b04734.png)

除非完全必要，否则我非常反对在网页设计中使用图像，所以我希望我可以在 CSS 中重新创建整个搜索栏小部件。我知道如何做边界半径、渐变、盒子阴影等，所以这不是问题。

**问题：**假设 CSS3 浏览器兼容，我怎样才能重新创建实际的搜索按钮（放大镜部分）具有双曲线边缘和左下角的轻微阴影？

**想法：**我最初的感觉是搜索按钮将是圆形且独立的，然后与搜索输入 div 以负的左边距重叠，但后来我不确定如何获得那个阴影。

**编辑：**我并不完全反对使用放大镜的图像，但我之前在 CSS 中看到过[**类似的图标。**](http://nicolasgallagher.com/pure-css-gui-icons/)图像与纯 CSS 最终会以相同的速度加载，还是我应该在纯 CSS 中尽我所能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:38:49.153

以不同的方式解决问题，您可以使用字体来渲染放大镜。[这里](http://sixrevisions.com/resources/free-icon-fonts/)有一些免费的，您可以通过 JS 或通过使用[FontSquirrel 之](http://www.fontsquirrel.com/)类的服务创建 @font-face 来加载。这个附带了所有必要的文件，它包括指向任一方向的放大镜：[http ://www.tenbytwenty.com/sosa.php](http://www.tenbytwenty.com/sosa.php)

从那里，您应该能够使用 CSS 对其进行样式设置，以使其看起来像您的设计师想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:02:11.123

这样的事情会管理

```
<style type="text/css">
form {
    background-image: url(1noty.png);
    height: 50px;
    width: 240px;
}
input {
    background-image: url(bg.png);
    margin-top: 15px;
    margin-right: 15px;
    margin-bottom: 15px;
    margin-left: 17px;
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
}
</style> 
```

# php - Magento 1.7.0.2 致命错误：在非对象上调用成员函数 getInputType()

> ID：13568607
> 
> 赞同：1
> 
> 时间：2012-11-26T16:07:54.233
> 
> 标签：php, magento-1.7, magento

我刚刚升级到 Magento 1.7.0.2 并且遇到了两个我认为相关的问题。

(1) 在编辑或添加产品时，我收到以下消息：

```
 Fatal error: Call to a member function getInputType() on a non-object in /home/.../public_html/app/code/core/Mage/Catalog/Model/Product.php on line 995 
```

我打开了开发人员调试分析器，它为我提供了以下附加信息：

```
 {{{Images}}{{Images}}{{Images}}{{Mage_Catalog}}}

    {{{Image type and information need to be specified for each store view.}}{{Image type and information need to be specified for each store view.}}{{Image type and information need to be specified for each store view.}}{{Mage_Catalog}}} 
```

在致命错误消息中引用的product.php中，第995行附近的代码如下：

```
 ** Media API
     */
        /**
         * Retrive attributes for media gallery
         *
         * @return array
         */
         public function getMediaAttributes()
        {
            if (!$this->hasMediaAttributes()) {
                $mediaAttributes = array();
                foreach ($this->getAttributes() as $attribute) {
                    if($attribute->getFrontend()->getInputType() == 'media_image') {
                        $mediaAttributes[$attribute->getAttributeCode()] = $attribute;
                    }
                }
                $this->setMediaAttributes($mediaAttributes);
            }
            return $this->getData('media_attributes');
        } 
```

目录看起来不错；销售看起来不错；我已经重新索引并清空了缓存（多次）。我没有任何扩展（还）；我已经安装了一个主题，但是在一个商店中将其设置为默认值并且遇到了同样的问题。我使用插件域方法进行了多商店安装，并且所有商店都出现了相同的问题。

(2) 我遇到的另一个问题是，在前端，所有产品页面都会导致 404 错误。（目录、cms 甚至搜索都可以 - 它看起来只是产品页面。）

我更像是一个“狂热的程序员”，有点不知所措。我想我很接近但被卡住了。非常感谢您提供的任何帮助或建议。

干杯! 一分钱

# html - 自动完成文本输入

> ID：13568609
> 
> 赞同：34
> 
> 时间：2012-11-26T16:07:54.743
> 
> 标签：html, forms, autocomplete

我知道有很多 JavaScript 解决方案，但是有没有一种 HTML5 方法可以让文本输入带有自动完成功能？datalist 元素几乎就是我所追求的，除了它允许您输入自定义值而不是将您限制在列表中的内容。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-11-04T23:06:44.753

你应该试试这个`datalist`元素。[它在W3C HTML5 Recommendation](http://www.w3.org/TR/html5/forms.html#the-datalist-element)中明确定义，可能是目前和不久的将来桌面上的最佳选择。

> datalist 元素使用[输入](http://www.w3.org/TR/html5/forms.html#the-input-element)元素上的 list 属性连接到输入元素。
> 
> 作为 datalist 元素的后代、未被禁用且其值为非空字符串的字符串的每个选项元素表示建议。每个建议都有一个[值](http://www.w3.org/TR/html5/forms.html#concept-option-value)和一个 [标签](http://www.w3.org/TR/html5/forms.html#concept-option-label)。

Google chrome 和基于[chromium](https://www.chromium.org/)的浏览器从 v21.x 开始支持它（截至 2014 年 12 月，当前版本为 39，[在此处查看其他浏览器](http://beta.caniuse.com/#search=datalist)的兼容性状态）**Firefox**和**Opera**也长期支持。Modern(!) IE 版本*部分支持*datalist。

**演示：** Eiji Kitamura的一个出色的[工作数据列表实现](http://demo.agektmr.com/datalist/)。

**Polyfill**：还可以查看[RelevantDropdown](http://css-tricks.com/examples/RelevantDropdown/)。它是一个依赖于 jQuery 和 Modernizr 的 HTML5 数据列表 polyfill。

尝试运行此示例：

```
<input type="search" list="languages" placeholder="Pick a programming language..">

<datalist id="languages">
  <option value="PHP" />
  <option value="C++" />
  <option value="Java" />
  <option value="Ruby" />
  <option value="Python" />
  <option value="Go" />
  <option value="Perl" />
  <option value="Erlang" />
</datalist>
```

W3 参考：[https ://www.w3.org/TR/html5/forms.html#the-datalist-element](https://www.w3.org/TR/html5/forms.html#the-datalist-element)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-09T20:46:23.770

HTML5 有一个`autocomplete`属性，可以指定为任一字段`on`或`off`字段。

这是一个例子：

```
<form action="/form.php" autocomplete="on">
  First name:<input type="text" name="first_name"><br>
  Last name: <input type="text" name="last_name"><br>
  E-mail: <input type="email" name="email" autocomplete="off">
  <input type="submit">
</form> 
```

它的工作方式是，您第一次提交的值将在您随后访问`keyup`每个字段的此页面时向您建议。

*   决定使用此功能的**关键问题是浏览器兼容性之一。**您最好的选择是检查多个浏览器以确保其正常工作。[caniuse.com](http://caniuse.com/forms)使支持看起来很糟糕，但我认为使用它来帮助那些拥有现代浏览器的人没有任何害处。

`autocomplete`来自[W3Schools](http://www.w3schools.com/html/html5_form_attributes.asp)的其他事实，在这种情况下不要讨厌，因为它确实涵盖了基础知识：

*   启用自动完成后，浏览器会根据用户之前输入的值自动完成值。
*   可以为表单设置“开启”自动完成功能，为特定输入字段设置“关闭”功能，反之亦然。
*   自动完成属性适用于以下类型：文本、搜索、网址、电话、电子邮件、密码、日期选择器、范围和颜色。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-01-31T18:42:13.460

这个问题已经很老了，但我有**2017 年的更新答案**！

[这是官方***当前 WHATWG HTML 标准***的链接，用于启用自动完成功能。](https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete)

***以下答案来自我在这里的原始答案：[https ://stackoverflow.com/a/41965106/1696153](https://stackoverflow.com/a/41965106/1696153)***

要触发自动完成，您现在要做的就是`input`正确命名您的标签。

Google为开发对移动设备友好的 Web 应用程序编写了一个[非常好的指南。](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)他们有一节介绍如何命名表单上的输入以轻松使用自动填充。尽管它是为移动设备编写的，但这适用于桌面和移动设备！

# 如何在 HTML 表单上启用自动完成

以下是有关如何启用自动完成功能的一些要点：

*   **将 a`<label>`用于所有`<input>`字段**
*   **`autocomplete`**为您的标签**添加一个****属性**`<input>`并使用本[指南](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)进行填写。
*   **为所有标签正确命名您的`name`和`autocomplete`属性`<input>`**
*   ***示例***：

    ```
    <label for="frmNameA">Name</label>
    <input type="text" name="name" id="frmNameA"
    placeholder="Full name" required autocomplete="name">

    <label for="frmEmailA">Email</label>
    <input type="email" name="email" id="frmEmailA"
    placeholder="name@example.com" required autocomplete="email">

    <!-- note that "emailC" will not be autocompleted -->
    <label for="frmEmailC">Confirm Email</label>
    <input type="email" name="emailC" id="frmEmailC"
    placeholder="name@example.com" required autocomplete="email">

    <label for="frmPhoneNumA">Phone</label>
    <input type="tel" name="phone" id="frmPhoneNumA"
    placeholder="+1-555-555-1212" required autocomplete="tel"> 
    ```

# 如何命名您的`<input>`标签

为了触发自动完成，请确保正确命名标签中的`name`和`autocomplete`属性。`<input>`这将自动允许在表单上自动完成。确保也有一个`<label>`！也可以在[此处](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)找到此信息。

以下是如何命名您的输入：

*   *姓名*
    *   将这些中的任何一个用于**`name`**：`name fname mname lname`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   `name`（全名）
        *   `given-name`（对于名字）
        *   `additional-name`（中间名）
        *   `family-name`（对于姓氏）
    *   例子：`<input type="text" name="fname" autocomplete="given-name">`
*   *电子邮件*
    *   将这些中的任何一个用于**`name`**：`email`
    *   将这些中的任何一个用于**`autocomplete`**：`email`
    *   例子：`<input type="text" name="email" autocomplete="email">`
*   *地址*
    *   将这些中的任何一个用于**`name`**：`address city region province state zip zip2 postal country`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   对于一个地址输入：
            *   `street-address`
        *   对于两个地址输入：
            *   `address-line1`
            *   `address-line2`
        *   `address-level1`（州或省）
        *   `address-level2`（城市）
        *   `postal-code`（邮政编码）
        *   `country`
*   *电话*
    *   将这些中的任何一个用于**`name`**：`phone mobile country-code area-code exchange suffix ext`
    *   将这些中的任何一个用于**`autocomplete`**：`tel`
*   *信用卡*
    *   将这些中的任何一个用于**`name`**：`ccname cardnumber cvc ccmonth ccyear exp-date card-type`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   `cc-name`
        *   `cc-number`
        *   `cc-csc`
        *   `cc-exp-month`
        *   `cc-exp-year`
        *   `cc-exp`
        *   `cc-type`
*   *用户名*
    *   将这些中的任何一个用于**`name`**：`username`
    *   将这些中的任何一个用于**`autocomplete`**：`username`
*   *密码*
    *   将这些中的任何一个用于**`name`**：`password`
    *   将这些中的任何一个用于**`autocomplete`**：
        *   `current-password`（用于登录表格）
        *   `new-password`（用于注册和密码更改表格）

# 资源

*   [当前用于自动完成的 WHATWG HTML 标准。](https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete)
*   [来自 Google 的“创建惊人的表单”](https://developers.google.com/web/fundamentals/design-and-ui/input/forms/#recommended_input_name_and_autocomplete_attribute_values)。好像几乎天天更新。优秀的阅读。
*   2015 年[来自 Google 的“使用自动填充功能帮助用户更快结帐” 。](https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-03T17:51:48.047

使用 HTML5，无需任何 Javascript 即可实现 google 建议样式的自动完成输入！

请参阅这篇文章： [HTML5 风格的“Google Suggest”](http://dev.opera.com/articles/view/an-html5-style-google-suggest/)

但是，它还没有得到足够的支持。文章中的示例目前仅适用于 Opera。

目前，最好只使用一个经过良好测试且具有广泛浏览器支持的库，例如具有[自动完成](http://jqueryui.com/autocomplete/)小部件的 JQuery UI。

# ios - iOS 上文件选择器的缩略图

> ID：13568614
> 
> 赞同：12
> 
> 时间：2012-11-26T16:08:08.417
> 
> 标签：ios, filepicker.io

当使用 iOS 的内置 UIImagePicker 时，开发人员可以访问选择器中使用的缩略图。是否可以访问 Filepicker 使用的缩略图或以其他方式访问 Filepicker 使用的 ALAsset 库 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:55:11.597

我就是这样做的，但我必须警告你它很慢（ish），并且需要的框架是内存密集型的，因为它遍历 ALAssetsLibrary 寻找海报图像。这在后台线程上，因此 UI 更改被发送到主线程进行渲染。

```
 self.assetsLibrary = [[ALAssetsLibrary alloc] init];

    NSUInteger groupTypes = ALAssetsGroupAlbum | ALAssetsGroupSavedPhotos | ALAssetsGroupPhotoStream;
    [self.assetsLibrary enumerateGroupsWithTypes:groupTypes
                                  usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
                                      if (group.posterImage != nil) {
                                          dispatch_async(dispatch_get_main_queue(), ^{
                                              self.pictureLayer.contents = (__bridge_transfer id) CGImageCreateCopy(group.posterImage);
                                              [self.layer setNeedsDisplay];
                                              self.assetsLibrary = nil;
                                              *stop = YES;
                                          });
                                      }
                                  }
                                failureBlock:^(NSError *error) {
                                    self.assetsLibrary = nil;
                                    NSLog(@"AssetLib error:%@",error);
                                }]; 
```

# javascript - ExtJs 没有正确刷新

> ID：13568621
> 
> 赞同：0
> 
> 时间：2012-11-26T16:08:28.860
> 
> 标签：javascript, ajax, extjs

在 ExtJs 中，我有一个附加到按钮的处理程序，它`submit()`调用`Ext.form.Panel`. 然后，我有一个要刷新的组件（存储和查看）。我发现，`submit`组件耗时太长，刷新执行得太早。我想知道在这种情况下是否有任何方法可以等到呼叫响应？我的代码如下所示：

```
handler: function() {
                   new_folder_panel.submit();
                   win2.hide();
                   store_dir.load()
                   tree_dir.getView().refresh();
                   console.log("It is here");
                } 
```

我确实尝试过使用纯javascript `window.setTimeout`，并强制刷新等待哪个有效，但我希望有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:27:53.933

是的，你必须使用如下的成功回调：

```
handler: function() {
    new_folder_panel.submit({
        success : function(){
           win2.hide();
           store_dir.load()
           tree_dir.getView().refresh();
           console.log("It is here");
        }
    });
} 
```

我没有测试它，但这是要走的路。

祝你好运！

# java - Tomcat 安装目录无效。它缺少预期的文件或文件夹 lib/jasper-el.jar

> ID：13568623
> 
> 赞同：7
> 
> 时间：2012-11-26T16:08:43.673
> 
> 标签：java, eclipse, tomcat, liferay, liferay-ide

我已经下载了与 tomcat 捆绑的 Liferay Portal 6.1 社区版。然后我下载了liferay的SDK。当我到达第 4 步时，按照本[网站中给出的步骤使用 liferay 配置 eclipse，我收到以下错误。](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE+Getting+Started+Tutorial)
![在此处输入图像描述](../Images/6479f9638f8580be79f5b0f36ba80ca1.png)

所有相关[线程](https://stackoverflow.com/questions/1356616/configuring-tomcat-6-with-eclipse-in-ubuntu)都特定于 ubuntu。但我使用的是 Windows 7 64 位。我不知道如何解决这个问题。所有文件都存在然后为什么它向我显示这个错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:08:48.283

您似乎正在尝试创建一个`Liferay v6.0 Tomcat Runtime`然后将目录指向 Liferay v6.1 Tomcat 运行时（注意安装路径中的 6.1.1）。所以回到上一个屏幕并选择`Liferay v6.1 Tomcat Runtime`。如果您没有 v6.1，那么您需要确保安装了最新版本的[Liferay IDE](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE)（最新版本是 1.6.1）。

# android - Android中的自动对话框关闭

> ID：13568627
> 
> 赞同：3
> 
> 时间：2012-11-26T16:09:09.387
> 
> 标签：android, view, dialog, dismiss

我正在创建一个 Android 应用程序，我在其中管理一些剩余部分。我希望当某个事件发生时显示对话框，这对我来说不是问题。但我希望如果用户在两分钟内没有做出任何响应，对话框会自动关闭。我该如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:16:55.860

```
static AlertDialog alert = ....;

alert.show();

Runnable dismissRunner = new Runnable() {
    public void run() {
        if( alert != null )
            alert.dismiss();            
    };
new Handler().postDelayed( dismissRunner, 120000 ); 
```

不要忘记`alert = null`在您的常规对话框中关闭代码（即按钮 onClick）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-10T09:01:22.643

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.game_message);
        game_message = builder.create();
        game_message.show();

        final Timer t = new Timer();
        t.schedule(new TimerTask() {
            public void run() {
                game_message.dismiss(); // when the task active then close the dialog
                t.cancel(); // also just top the timer thread, otherwise, you may receive a crash report
            }
        }, 5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:14:28.303

您应该能够使用 Timer 做到这一点：

[http://developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

[安卓计时器？如何？](https://stackoverflow.com/questions/4597690/android-timer-how)

stackoverflow 链接描述了如何使用它来运行重复发生的任务，但您也可以使用它来运行一次性任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-01T06:41:41.073

```
final Timer t = new Timer();
                t.schedule(new TimerTask() {
                    public void run() {
                        alert.dismiss(); 
                        t.cancel(); 
                    }
                }, 2000); 
```

# c# - 将参数传递给定时器事件

> ID：13568634
> 
> 赞同：1
> 
> 时间：2012-11-26T16:09:32.187
> 
> 标签：c#, wpf

我正在尝试创建一个动画，在我的应用程序布局中跨画布移动一些图像。

画布被命名`layout`，属于主窗口，计时器正在调用事件`Animation.Clouds(layout, 1)`。尝试此操作时，我收到有关该对象由另一个线程拥有的错误。这让我相信原因是计时器无法传递 的上下文`layout`，从而导致错误。

我将如何解决此问题并传递`layout`给计时器以使动画正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:11:29.910

改用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)，它会在它创建的调度程序线程中触发一个滴答声

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:12:29.183

问题是您只能在 UI 线程上更新 UI 元素**。**Timer 事件在不同的线程上被调用。

在 Windows.Forms 中，您可以使用`BeginInvoke`. 我确信 WPF 有类似的东西。

# sql - 当有分组时从两个表中提取列

> ID：13568635
> 
> 赞同：0
> 
> 时间：2012-11-26T16:09:33.723
> 
> 标签：sql, oracle

我有一个查询，它返回具有多个四数的 custref（1 到 n 映射）

```
select *
  from cdsheader
 where custref in(select custref
                    from(select *
                           from cdsheader h,custandaddr c
                          where h.custref = c.cwdocid
                            and c.addresstype = 'C')
                   group by custref
                  having count(distinct( tetranumber )) > 1) 
```

计数 5144

我的目标是将匹配的地址详细信息与上述结果一起提取，但我想我在这里遗漏了一些东西。

就像是...

```
select a.cworderid,a.cwcreated,a.organisationtype,a.custref,a.tetranumber,
       b.buildingname,b.streetname,b.posttown,b.postcode,b.country
  from cdsheader a,custandaddr b
 where custref in (select custref
                     from cdsheader h,custandaddr c
                    where h.custref = c.cwdocid
                      and c.addresstype = 'C')
                    group by custref
                   having count(distinct( tetranumber )) > 1)
 order by a.custref,a.tetranumber,a.cworderid; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:26:52.503

而不是扫描你的表两次，创建一个内联视图并使用分析函数获取结果。请测试

```
SELECT     inner.cworderid,
           inner.cwcreated,
           inner.organisationtype,
           inner.custref,
           inner.tetranumber,
           inner.buildingname,
           inner.streetname,
           inner.posttown,
           inner.postcode,
           inner.country
FROM(           
  SELECT   h.cworderid,
           h.cwcreated,
           h.organisationtype,
           h.custref,
           h.tetranumber,
           c.buildingname,
           c.streetname,
           c.posttown,
           c.postcode,
           c.country,
           COUNT(DISTINCT tetranumber) OVER(PARTITION BY h.custref) cnt
    FROM   cdsheader h, custandaddr c
    WHERE  h.custref = c.cwdocid 
       AND c.addresstype = 'C'
      )inner
  WHERE inner.cnt>1 
 ORDER BY inner.custref, inner.tetranumber, inner.cworderid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:46:45.773

通过修改查询（包括另外一个连接）它对我有用......但 Gaurav 答案是一种更好的方法

```
select 
     a.cworderid,a.cwcreated, a.organisationtype, a.custref, a.tetranumber, b.buildingname,     b.streetname, b.posttown, b.postcode, b.country
    from custandaddr b, cdsheader a where b.cwdocid = a.custref and custref in(
    select custref from(
    select * from cdsheader h, custandaddr c where h.custref=c.cwdocid and c.addresstype = 'C')
    group by custref having count(distinct(tetranumber))>1)
    order by a.custref, a.tetranumber, a.cworderid 
```

# mysql - 5GB MYISAM 表的 my.cnf MySQL 性能

> ID：13568637
> 
> 赞同：1
> 
> 时间：2012-11-26T16:09:39.010
> 
> 标签：mysql, performance, optimization, my.cnf

我有一台专用服务器 - Intel Xeon L5320，配备 8GB RAM 和 2 x 500GB 7200RMP HDD

我需要优化 mysql 以应对大型 5Gb MyISAM 表 + 大约 25 - 30 个较小的数据库，目前它看起来像这样：

```
key_buffer = 3G
thread_cache_size = 16
table_cache = 8192
query_cache_size = 512M 
```

因为它是服务器真的很挣扎，我会继续收到 tmp disk full 警告，请你帮我/建议我的服务器的最佳 my.cnf 配置和或任何其他可以提高性能的设置更改。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:30:44.417

如果`/tmp`正在填满，则您正在某处运行一些大型、低效的查询，这些查询正在回退到 FILESORT。编写良好、高效的查询通常不需要这个——打开慢查询日志（如果还没有的话）并检查日志以查看需要优化的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:18:08.417

我建议您使用**mytop**和**mysqltuner**来分析使用 mysql 资源（RAM 和 CPU）。

也启用记录**慢查询**的选项：

```
log_slow_queries = /var/log/mysql/mysql-slow.log
long_query_time = 3 
```

并查看有关**ntpd**服务的这篇文章：

[MySQL 高 CPU 使用率](https://stackoverflow.com/questions/1282232/mysql-high-cpu-usage)

最后，我将您留在一个设置中，即我有一个专用服务器来处理高交易率。

```
max_allowed_packet=16M
key_buffer_size=8M
innodb_additional_mem_pool_size=10M
innodb_buffer_pool_size=512M
join_buffer_size=40M
table_open_cache=1024
query_cache_size=40M
table_definition_cache=256
innodb_additional_mem_pool_size=10M
key_buffer_size=16M
max_allowed_packet=32M
max_connections = 300
query_cache_limit = 10M
log_slow_queries = /var/log/mysql/mysql-slow.log
long_query_time = 3 
```

问候。

# jquery - jQuery 对话框 UI 在 IE 中不起作用

> ID：13568649
> 
> 赞同：2
> 
> 时间：2012-11-26T16:10:27.703
> 
> 标签：jquery, jquery-ui

我有以下使用 FF 或 Chrome 在我的 .aspx 页面中运行良好的 Jquery 代码。但是，在 IE9 中，当我单击应该打开对话框的按钮时，它似乎只是刷新了整个页面而没有任何反应。

我正在使用这些版本：

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

这是我的jQuery：

```
$(function () {
    $("#btnSearch").click(function () {
        $("#gvBox").show();
    });
    $("#dialog-form").dialog({
        autoOpen: false,
        height: 400,
        width: 650,
        modal: true,
        buttons: {
            "Transfer": function () {
                var bValid = true;
                allFields.removeClass("ui-state-error");
                if (bValid) {
                    $(this).dialog("close");
                }
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        },
        close: function () {
            allFields.val("").removeClass("ui-state-error");
        },
        open: function () {
            {
                $(this).parent().appendTo($("form:first"));
            }
        }
    });
    $("#btnTransfer").button().click(function () {
        $("#dialog-form").dialog("open");
        return false;
    });
    return false;
}); 
```

这是我打开对话框的按钮：

```
<button id="btnTransfer">Transfer Ownership</button>&nbsp; 
```

有什么技巧可以让它与 IE 一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:19:29.857

试试这个：

```
$("#btnTransfer").button().on('click', function (e) {
    e.preventDefault();
    $("#dialog-form").dialog("open");
}); 
```

...代替`return false;`

# asp.net - ASP.Net IIS 7 中未处理的异常

> ID：13568653
> 
> 赞同：0
> 
> 时间：2012-11-26T16:10:39.077
> 
> 标签：asp.net, iis-7, unhandled-exception

**IDE：VS 2010
操作系统：Windows 7
IIS：7.5
模式：集成。
.Net：4
语言：C#**

我有一个 asp.net 应用程序（不是 MVC），我正在尝试捕获所有未处理的异常。

我尝试过使用 global.asax -> Application_Error，但由于集成模式，我读到了 -> 我不能这样做。

我会很感激一些帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:58:21.150

不确定您是否已经找到解决方案，但如果没有 - 或者其他人有同样的问题 - 看看 Elmah ( [https://code.google.com/p/elmah/](https://code.google.com/p/elmah/) )。实现简单，使用方便。使用完整的详细信息捕获所有未处理的异常。

# c - C中的指针持久性？

> ID：13568655
> 
> 赞同：3
> 
> 时间：2012-11-26T16:10:45.100
> 
> 标签：c, pointers, scope

```
#include <stdio.h>
int main(int argc, char * argv[])
{
    int *ip;
    printf("%d\n", *ip);
    ip=NULL;

        if (1)
        {
            int i=300;
            printf("Inside If Block \n");
            ip=&i;
            printf("*ip=%d----------\n", *ip);
        }
    //printf("i=%d\n", i); /* Now this will cause an error, i has Block scope, fair enough */
    printf("*ip=%d\n", *ip);    
    return 0;
} 
```

最后一个如何`printf()`返回正确的值`i`？
是因为即使`i`超出范围，内存位置仍然保留该值？它是如何工作的 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:12:43.757

局部变量`i`超出范围，因此无法访问，但碰巧它在堆栈上的内存位置（存储在 中`ip`）未被覆盖。你绝对不能依赖这种行为，但在实践中你会发现它在许多平台上都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:14:36.610

这是因为`ip`它保留了它的值，即使它指向的变量不存在。

你应该非常小心地这样做，因为在像这样的星座中

```
#include <stdio.h>
int main(int argc, char * argv[])
{
    int *ip;
    printf("%d\n", *ip);
    ip=NULL;

        if (1)
        {
            int i=300;
            printf("Inside If Block \n");
            ip=&i;
            printf("*ip=%d----------\n", *ip);
        }

    {
        float j=400.0;
    }

    //printf("i=%d\n", i); /* Now this will cause an error, i has Block scope, fair enough */
    printf("*ip=%d\n", *ip);    
    return 0;
} 
```

变量`i`，并且`j`可能共享它们的位置，因为它们从不共存。如果`ip`指向那里，`j`' 值可能会损坏。

# asp.net - 正则表达式 CSV 电子邮件

> ID：13568657
> 
> 赞同：0
> 
> 时间：2012-11-26T16:10:48.130
> 
> 标签：asp.net, regex, csv

我需要有关 .net 验证的正则表达式的帮助。我需要验证电子邮件的 CSV 列表。我们目前使用：`[\w\.\-]+@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]{1,})*(\.[a-zA-Z]{2,4}){1,2}`来验证电子邮件。我还必须`[0-9]+(,[0-9]+)*`验证数字 CSV：10 或 1、3、5 等。

将两者组合`[\w\.\-]+@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]{1,})*(\.[a-zA-Z]{2,4}){1,2}+(,[\w\.\-]+@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]{1,})*(\.[a-zA-Z]{2,4}){1,2}+)`成一个嵌套量词+。我想不出一个合适的正则表达式来验证电子邮件和 csv 列表。

单独拆分和验证不是一个简单的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:38:41.010

发疯并使用[RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.4.1)语法 »

```
^(?:(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])(?:,(?=.))?)+$ 
```

![在此处输入图像描述](../Images/8b4f0ba090e910401ccfdea818a7b578.png)

# xml - XSLT：显示尾随零

> ID：13568659
> 
> 赞同：3
> 
> 时间：2012-11-26T16:10:53.663
> 
> 标签：xml, xslt, zero

我在 XSD 中定义了一个十进制变量，例如可以包含值 1,5；1,50；1,550；1,500；...因此，它可以有未知的小数位数，甚至由零组成。现在我已经编写了一个 XSLT (2.0) 并将使用 Saxon 执行。

问题是我想“按原样”显示 XML 中的值，唯一的区别是我想使用正确的、依赖于语言的小数分隔符。

format-number 选项只允许我使用字符（# 或 0），无论是删除尾随零，还是在后一种情况下“硬编码”零的数量......

是否有任何可用的选项允许我做我需要的事情，而无需回退到小数分隔符的字符串替换，因为我觉得这将是格式数字功能的严重短缺？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:33:13.577

编写一个函数来为您创建格式数字格式，该格式考虑到原始值中使用的小数位数。

```
format-number(., concat('###,###.', substring('0000000000000', 1, concat(string-length(substring-after(., ','))))), euro) 
```

对语言依赖格式使用十进制格式：

```
<xsl:decimal-format name="euro" decimal-separator="," grouping-separator="."/> 
```

# html - 不同机器上的 IE 8 不呈现相同的颜色

> ID：13568665
> 
> 赞同：1
> 
> 时间：2012-11-26T16:10:57.707
> 
> 标签：html, css, internet-explorer, background-color

考虑两个不同的客户端机器：

*   两者都使用 Internet Explorer 8
*   两者都使用 Windows XP
*   两者都是 32 位机器
*   两者都访问同一个 Intranet 站点（我已经建立）

为什么，在一台机器上，背景颜色正常渲染，因为它应该，而在另一台机器上，它没有在主 wrapperDiv 中渲染正确的颜色（也就是说，它只是采用父元素的颜色，`<body>`） .

我用于`<div id="wrapperDiv">`元素的完整 CSS 规则如下所示：

```
#wrapperDiv
{
    background-color: rgba(0, 148, 255, 0.50);
    width: 900px;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    border-radius: 25px 25px 25px 25px;
    -moz-border-radius: 25px 25px 25px 25px;
    -ms-border-radius: 25px 25px 25px 25px;
    border-color: #000;
    border-style: outset;
    border-width: 2px;
    padding-bottom: 40px;
    behavior: url(PIE.htc);
} 
```

如您所见，我正在使用[PIE](http://css3pie.com/)，但是，我认为这与此问题无关。

如果他们使用不同的浏览器（或同一浏览器的不同版本）、不同的操作系统（或同一操作系统的不同版本）等，我会理解差异，但是为什么当浏览器和操作系统相同时，为什么颜色不在其中一台机器上渲染？（例如，它只是采用父背景颜色）。这是一个普遍的问题，还是我这里有某种罕见的疯狂情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:16:39.743

这在我看来是不可能的......我在这里看到的唯一问题可能是其他系统上的缓存，其他系统上的有点 IE 必须缓存旧的 CSS 文件，要么按下`ctrl+f5`硬刷新，要么清除临时文件，看看是否有用..

我只是为您阅读信息 IE 8 不支持`rgba`所以这样做...

```
background-color: #/*RGBA Equivalent HEX*/;
background-color: rgba(0, 148, 255, 0.50); 
```

# nginx - Windows Server 2008 64 位中不存在 config.nt

> ID：13568666
> 
> 赞同：2
> 
> 时间：2012-11-26T16:10:58.687
> 
> 标签：nginx

我有一个高流量的服务器，高峰时间大约 20K 请求/秒，正常时间 5~10k 请求/秒

但我有一个严重的问题，我在 windows server 2008 标准版 64bit 中安装 nginx，但我收到此错误消息

> 2012/11/26 05:29:23 [错误] 2496#2004: *3976 select() 支持的最大描述符数为 1024，同时读取客户端请求行，客户端：XXXX，服务器：0.0.0.0:8080

当我搜索时，我发现这个问题是关于 dos 应用程序文件句柄限制的，我可以在 c:\windir\system32\Config.nt 上更改它，但 config.nt 不存在我也听说，在 64 位操作系统版本中，这个文件不存在所以我如何更改 Windows Server 2008 - 64Bit 中的文件句柄？

# c# - .Net 将 Windows 表单导出为 PDF

> ID：13568671
> 
> 赞同：1
> 
> 时间：2012-11-26T16:11:16.543
> 
> 标签：c#, .net, pdf, printform

有没有办法在 C# 中将 Windows 表单直接导出为 PDF？我使用 ZedGraph 创建了一些漂亮的图，将它们添加到 Windows 窗体并希望将它们导出为 PDF。如果有某种方法可以将目的地选择为 PDF，PrintForm 看起来很有希望。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:15:40.607

您可以设置像 BullZip 这样的 PDF 打印机，并使用 PrintForm 进行打印。如果您希望它完全编程并封装在您的程序中（没有“环境”依赖项，如已安装的打印机），我推荐 iTextSharp，它是一个提供 PDF 合成功能的 .NET 托管库。在这种情况下，您可以通过使用 Bitmap 的 CopyFromScreen 方法捕获表单的图像、创建新的 PDF 文档并使用 iTextSharp 粘贴到图像中来使用它。这里有一些关于这个主题的阅读：http: [//www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images](http://www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images)

# paypal - PayPal Express Checkout - 稍后获取交易数据

> ID：13568672
> 
> 赞同：3
> 
> 时间：2012-11-26T16:11:19.590
> 
> 标签：paypal, express-checkout

我实施了 PayPal Express Checkout - 效果很好。对于某些交易，我希望稍后（一两周后）获得地址状态（已验证或未验证）。我怎样才能在 PHP 中做到这一点？（我已在结帐时保存了令牌 transactionId）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:17:37.383

您可以为此使用[GetTransactionDetails](https://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp)。

如果您将大量使用 PayPal 服务，我建议您查看我[的 PayPal PHP 类库](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)。它使他们所有的 API 调用变得轻而易举。

# hibernate - 这个 HQL 左连接查询有什么问题？

> ID：13568676
> 
> 赞同：1
> 
> 时间：2012-11-26T16:11:43.953
> 
> 标签：hibernate

有人可以帮我构建我需要的休眠查询吗？

我有两个表：**Areas**和**AreasLocal**。第一个结构为包含应用程序菜单的树表，第二个用作区域名称的 i18n 存储库。

我想根据所选语言（idLocal 属性）**尽可能优化整个区域菜单树（急切地使用尽可能少的查询）。**

在下一个查询中，我正确绘制了区域树菜单，**除了**本地化名称，它们看起来是混合的（一些区域名称是西班牙语，其他区域名称是英语等）：

```
Query query = this.sessionFactory.getCurrentSession().createQuery(
    "select distinct areas" +
    " from Areas areas" +                       
    " left join fetch areas.children childs " +
    " left join fetch areas.locales locales" +
    " where areas.visible = 1 and areas.parent.idArea = :idArea" +  
    " and areasLocal.id.idLocal = :idLocal " +
    " order by areas.orden ");

query.setParameter("idArea", idArea);
query.setParameter("idLocal", idLocal); 

public class Areas implements Serializable {

    private Integer idArea;
    private Areas parent;
    private Integer idTipoAreas;
    private Boolean visible;
    private Integer orden;
    private Set<Areas> children = new HashSet<Areas>(0);
    private Set<AreasLocal> locales = new HashSet<AreasLocal>(0);

    //setters getters ommited       
}

public class AreasLocal implements Serializable {

    private AreasLocalId id;
    private String name;

    //setters getters ommited       
}

public class AreasLocalId implements Serializable {

    private int idArea;
    private int idLocal;

    //setters getters ommited       

}

<hibernate-mapping>
    <class name="Areas" table="areas">
        <id name="idArea" type="java.lang.Integer">
            <column name="ID_AREA" />
        </id>
        <many-to-one name="parent" class="Areas" fetch="select">
            <column name="ID_PARENT"/>
        </many-to-one>
        <property name="idTipoAreas" type="java.lang.Integer">
            <column name="ID_TIPO_AREAS" not-null="true" />
        </property>
        <property name="visible" type="java.lang.Boolean">
            <column name="ES_VISIBLE" not-null="true" sql-type="bit" />
        </property>
        <property name="orden" type="java.lang.Integer">
            <column name="ORDEN" />
        </property>
        <set name="children" table="areas" inverse="true" lazy="false" fetch="select" order-by="ID_AREA">
            <key>
                <column name="ID_PARENT"/>
            </key>
            <one-to-many class="Areas" />
        </set>                
        <set name="locales" table="areas_local" inverse="true" lazy="false" fetch="select">
            <key>
                <column name="ID_AREA"/>
            </key>
            <one-to-many class="AreasLocal" />
        </set>
    </class>
</hibernate-mapping>

<hibernate-mapping>
    <class name="AreasLocal" table="areas_local">
        <composite-id name="id" class="AreasLocalId">
            <key-property name="idArea" type="java.lang.Integer">
                <column name="ID_AREA" />
            </key-property>
            <key-property name="idLocal" type="java.lang.Integer">
                <column name="ID_LOCAL" />
            </key-property>
        </composite-id>
        <property name="name" type="string">
            <column name="NAME" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

我已经意识到**HQL 不允许递归连接**。

因此，您必须执行以下操作：但也无法按预期工作，并且仅检索具有子项的较深菜单。

```
Query query = this.sessionFactory.getCurrentSession().createQuery(
    "select distinct areas0" +
    " from Areas areas0" +      

    " left join fetch areas0.children areas1" +
    " left join fetch areas0.locales areas0Locales" +

    " left join fetch areas1.children areas2" +
    " left join fetch areas1.locales areas1Locales" +               

    " left join fetch areas2.children areas3" +
    " left join fetch areas2.locales areas2Locales" +               

    " left join fetch areas3.children areas4" +
    " left join fetch areas3.locales areas3Locales" +               

    //"..." +

    " where areas0.esVisible = 1" +
    " and areas0.parent.idArea = :idArea" +

    " and areas0Locales.id.idLocal = :idLocal " +       
    " and areas1Locales.id.idLocal = :idLocal " +           
    " and areas2Locales.id.idLocal = :idLocal " +           
    " and areas3Locales.id.idLocal = :idLocal " +           

    //"..." +

    " order by areas0.orden "); 
```

任何帮助将不胜感激

# c++ - 这个 C++ 代码是如何工作的？

> ID：13568680
> 
> 赞同：1
> 
> 时间：2012-11-26T16:12:13.950
> 
> 标签：c++, string, parsing, integer

```
enum STR2INT_ERROR { SUCCESS, OVERFLOW, UNDERFLOW, INCONVERTIBLE };

STR2INT_ERROR str2int (int &i, char const *s, int base = 0)
{
    char *end;
    long  l;
    errno = 0;
    l = strtol(s, &end, base);
    if ((errno == ERANGE && l == LONG_MAX) || l > INT_MAX) {
        return OVERFLOW;
    }
    if ((errno == ERANGE && l == LONG_MIN) || l < INT_MIN) {
        return UNDERFLOW;
    }
    if (*s == '\0' || *end != '\0') {
        return INCONVERTIBLE;
    }
    i = l;
    return SUCCESS;
} 
```

我正在尝试编写一个程序，该程序可以将从文件中读取的字符串解析为整数值。在寻找执行此操作的方法时，我在 stackoverflow 帖子上找到了上面的这段代码：

[如何在 C++ 中将字符串解析为 int？](https://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c)

但是，我无法理解它是如何工作的。具体来说，如果 errno 被赋值为 0，程序员为什么要检查 errno == ERANGE？（ERANGE 是特殊值吗？）

其次，参数列表中的“char const *s”是什么意思？

PS：我对 C++ 编程不是很有经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:22:59.900

该代码使用 strtol() 进行解析。这是一个标准的 C 库函数。您可以在其他地方找到有关 strtol() 的文档：

[die.net 上的 strtol() 手册页](http://linux.die.net/man/3/strtol)

errno 变量是标准 C 库定义的特殊全局变量。如果函数遇到错误，则将其设置为错误代码。因此，虽然在例程开始时将 errno 分配为零，但 strtol() 函数将在遇到错误时为 errno 分配一个新值。以下 if 语句检查上溢和下溢错误情况。

`char const *s`参数是要解析的字符串。它是一个指向常量（只读）字符串的指针。按照惯例，字符串以 NULL 字节结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:19:08.980

每当我在 C++ 中完成字符串到 int 的转换时，我都会使用 atoi 方法。网上应该有很多适合你想做的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:19:52.300

`errno`是库提供的全局变量，`strtol`（以及其他库函数）用于指示错误情况。在上面的代码`strtol`中`errno`，用户将其设置为`0`. `ERANGE`确实是标准库提供的一个命名常量，它代表一些特殊的值，用来`strtol`表示超出范围的错误。

你的`char const *s`问题太模糊了。你具体有什么不明白的？该`const`部分表示`str2int`不允许里面的用户代码修改 指向的字符串`s`。编译器将尽最大努力防止对指向的字符串进行任何修改（或可能修改）操作`s`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:20:31.810

这里的大部分特殊性是 with `errno`，而不是被比较的值。

`errno`是一些（尤其是较旧的）库函数用来发出错误信号的全局变量。您将 0 分配给它（这隐含意味着没有问题）。然后，如果它遇到问题，库函数可以为其分配一些非零值来告诉你想要出错。

在调用库函数之后，您通常会检查 1) 它现在是否非零，以及 2) 如果是，它具有什么值。根据分配的值，您可以对出现的错误类型做出反应。

但是，我应该补充一点，许多用途`errno`大多是不可移植的。C 标准说`errno`存在，没有库函数将 0 分配给`errno`，但仅此而已。它没有指定任何特定函数可以分配给它的非零值（好吧，它指定了*某些函数分配的**一些*非零值，但不限制对这些值或那些函数的分配）。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T16:21:50.773

首先，这显然是一个伪装成 C++ 的 C 程序。

`strtol`是标准 C 库中的一个函数，它执行实际工作。它的文档可以在那里访问：http: [//linux.die.net/man/3/strtol](http://linux.die.net/man/3/strtol)

所有其他事情都只是初步和检查。

`errno`是 C 库中的一个特殊全局变量，可以由标准函数修改以设置适当的错误代码（是的，它是 C 遗留的，这不是线程安全的）。它的值可以设置为标准头文件“errno.h”中定义的值。*

# ios - NSMutableDictionary setObject:forKey (ios 6 without ARC) 结果为 NULL

> ID：13568682
> 
> 赞同：2
> 
> 时间：2012-11-26T16:12:16.727
> 
> 标签：ios, nsmutabledictionary

以下代码在升级到 iOS 6 之前工作。它也可以在 5.1 iPhone 模拟器中工作，但在 6.0 模拟器和设备上失败。

试图在 NSMutableDictionary 的循环中设置对象：forKey。已尝试在循环中添加（如下面的代码所示），并尝试使用对象和键的数组进行初始化，这会导致相同的失败。另一个奇怪的信息是，有时它有效，但大部分时间都失败了。添加的对象是 UILocalNotification，键是表示 WeekDay 的对象（不仅仅是一个简单的字符串）。运行的输出如下图所示。UILocalNotifications 和键显然不是 NULL，但 MutableDictionary 中添加的对在大多数情况下对于某些对象具有 NULL。大多数情况下，它是最后添加的日期（键），其对象为空。我完全不知道这是如何打破的，在此先感谢您的帮助！

WeekDay 的复制方法（NSCopying 协议）：

```
- (id)copyWithZone:(NSZone *)zone
{
    WeekDay * copy = [[WeekDay alloc] initWithDay:self.day];
    return copy;
} 
```

使用 setObject:forKey 的代码片段：

```
NSMutableDictionary * newAlarmsDictionary = [[NSMutableDictionary alloc] init];
NSArray * theDayKeys = [[_daysEnabledDict allKeys] sortedArrayUsingSelector:@selector(compare:)];

NSMutableArray * tempNotifyArray = [[NSMutableArray alloc] init];
UILocalNotification * theAlarm = nil;
WeekDay * theWeekDay = nil;

for (int i=0; i < [theDayKeys count]; i++) {

    if ([[_daysEnabledDict objectForKey:[theDayKeys objectAtIndex:i]] boolValue] == TRUE) {

        theWeekDay = [theDayKeys objectAtIndex:i];

        NSDate * now = [NSDate date];

... deleted lines setting up fire date for UILocalNotification, not significant to problem ...

        theAlarm = [[UILocalNotification alloc] init];
        theAlarm.fireDate = itemDate;
        theAlarm.repeatInterval = NSWeekCalendarUnit;
        theAlarm.timeZone = [NSTimeZone localTimeZone];
        theAlarm.soundName = UILocalNotificationDefaultSoundName;
        theAlarm.applicationIconBadgeNumber = 0;

        [newAlarmsDictionary setObject:theAlarm forKey:theWeekDay];
        [tempNotifyArray addObject:theAlarm];
        [theAlarm release];
        }
    }
}
NSLog(@"--Debug: tempNotifyArray---- %@ -------------", tempNotifyArray);
NSLog(@"--Debug: newAlarmsDictionary ====== %@ =============", newAlarmsDictionary); 
```

这是代码片段末尾的两个 NSlog 语句的输出。这个特殊的运行增加了 4 个通知，从周三到周六。放入 tempNotifyArray 的“警报”是有效的，但在添加到字典（在本例中为一个）时为空。

```
2012-11-26 11:07:01.087 MedTrack[9728:11303] --Debug: tempNotifyArray---- (

"<UIConcreteLocalNotification: 0x7277940>{fire date = Wednesday, November 28, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Wednesday, November 28, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}",

"<UIConcreteLocalNotification: 0x8883280>{fire date = Thursday, November 29, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Thursday, November 29, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}",

"<UIConcreteLocalNotification: 0x75c6590>{fire date = Friday, November 30, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Friday, November 30, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}",

"<UIConcreteLocalNotification: 0x75c83e0>{fire date = Saturday, December 1, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Saturday, December 1, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}" 
```

) -------------

```
2012-11-26 11:07:01.097 MedTrack[9728:11303] --Debug: newAlarmsDictionary ====== {

"[WeekDay] 6 (Sat)" = (null);

"[WeekDay] 3 (Wed)" = "<UIConcreteLocalNotification: 0x7277940>{fire date = Wednesday, November 28, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Wednesday, November 28, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}";

"[WeekDay] 4 (Thu)" = "<UIConcreteLocalNotification: 0x8883280>{fire date = Thursday, November 29, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Thursday, November 29, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}";

"[WeekDay] 5 (Fri)" = "<UIConcreteLocalNotification: 0x75c6590>{fire date = Friday, November 30, 2012, 11:06:00 AM Eastern Standard Time, time zone = America/Toronto (EST) offset -18000, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Friday, November 30, 2012, 11:06:00 AM Eastern Standard Time, user info = {\n    Temp = Fred;\n}}"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:18:03.333

这里的问题是你实施了`-copyWithZone:`，但你没有实施`-isEqual:`。在不知道对象的完整结构的情况下，我无法回答应该如何实现，但这是一个很好的基础：

```
- (BOOL)isEqual:(id)otherObject;
{
    if ([otherObject isKindOfClass:[self class]]) {
        WeekDay *otherWeekDay= (WeekDay *)otherObject;
        if (self.day != [otherWeekDay day]) return NO;
        if (self.name != [otherWeekDay name]) return NO;
        return YES;
    }
    return NO;
}

- (NSUInteger) hash;
{
    return self.day ^ [self.name hash];
} 
```

# javascript - 是否可以从 JavaScript 注入的内联样式中减去一个数字？

> ID：13568687
> 
> 赞同：5
> 
> 时间：2012-11-26T16:12:37.883
> 
> 标签：javascript, jquery, html

我在 HTML 中添加了一个内联样式，例如`style="left: 10px;"`. 我可以加/减那个数字吗？

我想创建一个规则，`8px`无论该号码是什么，我都可以从该号码中删除。

我尝试使用丑陋的`!important`hack 来覆盖它，但是当初始值改变时这并没有帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T16:14:43.453

从 1.6 开始，您可以使用方便的：

```
$('#myelem').css('left','-=8px') 
```

如果由于某种奇怪的原因您被困在过去，请使用：

```
$('#myelem').css('left', function(i,v) {
    return v - 8;
}); 
```

对于 jQuery 1.4 以上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T16:15:46.550

也许你可以`margin-left -8px`改用。我不知道您在寻找什么，但它可能会在没有 JavaScript 的情况下解决问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T16:16:39.320

没有这样的[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)规则。但是，您可以使用[JavaScript](http://en.wikipedia.org/wiki/JavaScript)做同样的事情。

假设你有，

```
.my_left {
   left: 10px;
} 
```

和下面的[HTML](http://en.wikipedia.org/wiki/HTML)元素，

```
<div class="my_left">My Div</div>
<div class="my_left">My Div</div> 
```

然后使用以下脚本，您可以`8px`从其当前`left`值中删除：

```
$(function () {
   $('.my_left').css('left', function (i, ov) {
       return ov - 8;
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:16:28.993

您可以为其使用变量，以便能够添加或减去：

```
var x=10;

x=x-parseInt(5);

x=x+parseInt(5);

<div id='something' style="left: "+x+"px"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:00:10.580

我最近在[css-tricks](http://css-tricks.com/override-inline-styles-with-css/)上发现你可以覆盖内联 css

```
.myClassName[style] {
   left:5px!important;
} 
```

[http://css-tricks.com/override-inline-styles-with-css/](http://css-tricks.com/override-inline-styles-with-css/)

# css - 当浏览器缩放时，我完美放置的图块会移动。有没有办法在不重新开始的情况下解决它？

> ID：13568694
> 
> 赞同：1
> 
> 时间：2012-11-26T16:13:37.720
> 
> 标签：css

我整个上午都在重新创建 Windows 8 瓷砖，不知何故我只使用 CCS2 让它工作。到目前为止，它适用于较新版本的 Chrome、IE 和 Firefox，但它适用于 100% 和 25% 的浏览器缩放级别。

我真的不想重新开始，所以无论如何我可以解决这个问题吗？

**HTML**

```
<div id="tile-wrap">
  <div class="wide x3-long red fR"></div>
  <div class="x2-wide long orange fR"></div>
  <div class="wide long yellow fR"></div>
  <div class="wide long green fR"></div>
  <div class="wide long blue fR"></div>
  <div class="x3-wide long purple fR"></div>
  <div class="x5-wide long gray fR"></div>
  <div class="x4-wide x2-long black fR"></div>
  <div class="wide x2-long white fR"></div>
  <div class="x6-wide long yellow fR"></div>
</div> 
```

**CSS**

```
.fL {
    float:left;
}

.fR {
    float:right;
}

.fCL {
    clear:left;
}

.fCR {
    clear:right;
}

.fC {
    clear:both;
}

.iB {
    display:inline-block;
}

div {
/* prevent content from spilling out of tiles */  
    overflow:hidden;
    word-wrap:break-word;
}

/*** sizes ***/

.wide { width:150px; }

.x-wide { width:250px; }

.x2-wide { width:327px; }

.x3-wide { width:504px; }

.x4-wide { width:680px; }

.x5-wide { width:680px; }

.x6-wide { width: 855px; }

.long { height:150px; }

.x-long { height:250px; }

.x2-long { height:327px; }

.x3-long { height:502px; }

.x4-long { height:650px; }

.x5-long { height:650px; }

.wide, .x-wide, .x2-wide, .x3-wide, .x4-wide, .x5-wide, .x6-wide {
    margin-left:10px;
    margin-right:10px;
}

.long, .x-long, .x2-long, .x3-long, .x4-long, .x5-long {
    margin-top:10px;
    margin-bottom:10px;
}

/*** color ***/

.red {
    background-color:#AE1F23;
    border:3px solid #AE1F23;
}

.orange {
    background-color:#CD4900;
    border:3px solid #CD4900;
}

.yellow {
    background-color:#FFC40D;
    border:3px solid #FFC40D;
}

.green {
    background-color:#01A31C;
    border:3px solid #01A31C;
}

.blue {
    background-color:#0072BC;
    border:3px solid #0072BC;
}

.purple {
    background-color:#4F1ACB;
    border:3px solid #4F1ACB;
}

.gray {
    background-color:#555;
    border:3px solid #555;
}

.black {
    background-color:#000000;
    border:3px solid #000000;
}

.white {
    background-color:#FFFFFF;
    border:3px solid #FFFFFF;
}

.red:hover, .red:focus, 
.orange:hover, .orange:focus,
.yellow:hover, .yellow:focus,
.green:hover, .green:focus,
.blue:hover, .blue:focus,
.purple:hover, .purple:focus,
.gray:hover, .gray:focus,
.black:hover, .black:focus {
    border:3px solid #FFFFFF;
}

.white:hover, .white:focus {
    border:3px solid #555;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:03:49.670

好的，所以我想通了。我在每个图块上都使用 float right，但是当我切换到 float left 和 float right 之间交替时，它适用于所有 3 个主要浏览器的每个缩放级别，并且通过正确的数学，我可以制作一些非常复杂的布局。让它与 IE 一起工作是一个这样的婊子。尺寸完全不同，所以我不得不创建一个额外的 CSS 表来覆盖宽度和高度。

最好的部分是它都是 CSS2！我尝试弄乱 CSS3 的 flex-box，但它过于复杂并且在 IE 中根本不起作用。

如果有人想在这里使用我的 CSS，它是：

```
* {

    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
}

.fL {
    float:left;
}

.fR {
    float:right;
}

.fCL {
    clear:left;
}

.fCR {
    clear:right;
}

.fC {
    clear:both;
}

.iB {
    display:inline-block;
}

div {
/* prevent content from spilling out of tiles */  
    overflow:hidden;
    word-wrap:break-word;
}

/*** size selectors ***/
.wide { width:156px; }

.x-wide { width:300px; }

.x2-wide { width:332px; }

.x3-wide { width:475px; }

.x4-wide { width:684px; }

.x5-wide { width:827px; }

.x6-wide { width: 1003px; }

.long { height:156px; }

.x-long { height:300px; }

.x2-long { height:332px; }

.x3-long { height:475px; }

.x4-long { height:684px; }

.x5-long { height:827px; }

.x6-long { height: 1003px; }

.wide, .x-wide, .x2-wide, .x3-wide, .x4-wide, .x5-wide, .x6-wide {
    margin-left:10px;
    margin-right:10px;
}

.long, .x-long, .x2-long, .x3-long, .x4-long, .x5-long, .x6-long {
    margin-top:10px;
    margin-bottom:10px;
}

/*** colors ***/

.red {
    background-color:#AE1F23;
    border:3px solid #AE1F23;
}

.orange {
    background-color:#CD4900;
    border:3px solid #CD4900;
}

.yellow {
    background-color:#FFC40D;
    border:3px solid #FFC40D;
}

.green {
    background-color:#01A31C;
    border:3px solid #01A31C;
}

.blue {
    background-color:#0072BC;
    border:3px solid #0072BC;
}

.purple {
    background-color:#4F1ACB;
    border:3px solid #4F1ACB;
}

.gray {
    background-color:#555;
    border:3px solid #555;
}

.black {
    background-color:#000000;
    border:3px solid #000000;
}

.white {
    background-color:#FFFFFF;
    border:3px solid #FFFFFF;
}

.red:hover, .red:focus, 
.orange:hover, .orange:focus,
.yellow:hover, .yellow:focus,
.green:hover, .green:focus,
.blue:hover, .blue:focus,
.purple:hover, .purple:focus,
.gray:hover, .gray:focus,
.black:hover, .black:focus {
    border:3px solid #FFFFFF;
}

.white:hover, .white:focus {
    border:3px solid #555;
} 
```

然后 IE 覆盖 CSS：

```
.wide { width:156px; }

.x-wide { width:300px; }

.x2-wide { width:308px; }

.x3-wide { width:452px; }

.x4-wide { width:634px; }

.x5-wide { width:816px; }

.x6-wide { width: 1003px; }

.long { height:156px; }

.x-long { height:300px; }

.x2-long { height:336px; }

.x3-long { height:517px; }

.x4-long { height:701px; }

.x5-long { height:883px; }

.x6-long { height: 1036px; } 
```

这是 HTML：（确保 #tile-wrap 具有设定的宽度并居中，因为此 html 实际上嵌套在具有其他 css 的母版页中）

此外，请确保添加额外的 IE 工作表。

```
 <link href="css/tiles.css" rel="stylesheet" type="text/css" />
  <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="css/tiles-IE.css" />
  <![endif]-->

    <div id="tile-wrap">
      <div class="wide x2-long red fL"></div>
      <div class="wide x2-long orange fR"></div>
      <div class="x3-wide long yellow fL"></div>
      <div class="wide long green fR"></div>
      <div class="x-wide long blue fL"></div>
      <div class="x2-wide long purple fR"></div>
      <div class="wide long gray fL"></div>
      <div class="x2-wide long black fR"></div>
      <div class="x3-wide long white fL"></div>
      <div class="x6-wide long yellow fR"></div>
    </div> 
```

这是当前 HTML + CSS 产生的结果：

![](../Images/2565e8df3a3de201a335dbb75cd2bfbf.png)

如您所见，只要有至少 3 个空格，任何加起来最多为 6 个的组合都有效，因为我没有考虑填充。

我知道有更好的方法可以做到这一点，但我只是想我还是会发布它。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:37:20.813

您可以尝试的一件事（尽管我还无法对其进行广泛测试）是添加

```
* {
       -webkit-box-sizing: border-box;
       -moz-box-sizing:    border-box;
       box-sizing:         border-box;
    } 
```

到您的样式表，以便将其更改为 IE 框模型（这意味着宽度包括填充和边框，而不是事后将它们添加到宽度中）。

我在你的（在 Firebug 中）尝试了它，然后更新了框的宽度和高度值以添加 6（每边 3 个边框），它至少在 Firefox 中可以缩放。

同样，我无法在其他浏览器上对其进行测试，但这是一个相当简单的更改，您可以对其进行测试并查看它是否可行。

有关盒子模型更改的更多信息，我建议在[此处](http://paulirish.com/2012/box-sizing-border-box-ftw/)阅读。如果您不想在页面上的每个元素上处理它，也可以将其添加到这些元素中。

**编辑**（因为它不起作用）

它看起来像另一个关于同一主题的问题，并且似乎已经找到了解决方案。[在这里](https://stackoverflow.com/questions/7835287/zoom-changes-the-design-layout)查看。我曾希望有另一种解决方法，但看起来最终您需要将设置的像素宽度/高度调整为可以在不破坏像素的情况下放大和缩小的数字，或者您需要切换到更流畅的测量，如百分比。

# javascript - 使用 Jade 和 Express 的脚本的意外令牌

> ID：13568695
> 
> 赞同：0
> 
> 时间：2012-11-26T16:13:45.177
> 
> 标签：javascript, node.js, express, pug

我是 Jade 的新手，我在使用脚本时遇到了一些问题。

在其中一些中，我得到了 Unexpected Token 错误......这是一个例子：

```
script
    $(document).ready({

        $('#answer').keyup(function(e) {
            $('#preview').html($('#answer').val());
        });

    }); 
```

这在普通 HTML 中应该可以正常工作，但是对于 Jade，它说：

未捕获的语法错误：意外的令牌（

我必须对 Jade 使用任何特殊语法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-11T11:20:25.410

在翡翠中，脚本后面应该跟着.（点）

像 => 脚本。（或）脚本（type="text/javascript"）。

# serialization - 无法在 WinRT 单元测试中打开文件

> ID：13568704
> 
> 赞同：0
> 
> 时间：2012-11-26T16:14:28.257
> 
> 标签：serialization, windows-runtime, storagefile

我正在编写一个单元测试来验证对象的序列化，并且我能够成功保存文件而没有任何问题。我什至可以浏览文件并验证内容是否正确。但是，当我尝试打开文件进行阅读时，我总是收到 UnauthorizedAccess 异常。

这是用于保存项目的代码：

```
 public static async Task SaveItem<T>(string folderName, T item)
        where T : BaseBusinessItem
    {
        if (string.IsNullOrEmpty(folderName))
        {
            throw new ArgumentNullException("folderName");
        }

        if (item == null)
        {
            throw new ArgumentNullException("item");
        }

        try
        {
            var folder = await ApplicationData.Current.LocalFolder
                                             .CreateFolderAsync(folderName, CreationCollisionOption.OpenIfExists);
            var file =
                await
                folder.CreateFileAsync(item.UniqueID.GetHashCode().ToString(), CreationCollisionOption.ReplaceExisting);
            var stream = await file.OpenAsync(FileAccessMode.ReadWrite);
            using (var outStream = stream.GetOutputStreamAt(0))
            {
                var serializer = new DataContractJsonSerializer(typeof(T));
                serializer.WriteObject(outStream.AsStreamForWrite(), item);
                await outStream.FlushAsync();
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.ToString());
        }
    } 
```

这是用于恢复项目的代码：

```
 public static async Task<T> RestoreItem<T>(string folderName, string hashCode)
        where T : BaseBusinessItem, new()
    {
        if (string.IsNullOrEmpty(folderName))
        {
            throw new ArgumentNullException("folderName");
        }

        if (string.IsNullOrEmpty(hashCode))
        {
            throw new ArgumentNullException("hashCode");
        }

        var folder = await ApplicationData.Current.LocalFolder.GetFolderAsync(folderName);
        var file = await folder.GetFileAsync(hashCode);
        var inStream = await file.OpenSequentialReadAsync();
        var serializer = new DataContractJsonSerializer(typeof(T));
        var retVal = (T)serializer.ReadObject(inStream.AsStreamForRead());
        return retVal;
    } 
```

和单元测试：

```
 [TestMethod]
    public async Task TestFileSaveLoad()
    {
        await _ds.SaveItem("TestFolder");
        Guid ID = _item.UniqueID;
        _ds = await ItemDataSource.LoadItem("TestFolder", ID.GetHashCode().ToString());
    } 
```

我可能遗漏的任何想法或故障排除步骤。单元测试应用清单包括以下功能：文档库、Internet（客户端）。以下声明已到位：文件打开选择器、文件保存选择器和文件类型关联。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:44:23.630

这个代码片段帮助我实现了我的目标。希望这对其他人有帮助：

[http://codepaste.net/gtu5mq](http://codepaste.net/gtu5mq)

# css - WP 中的 Akzidenz-Grotesk 字体

> ID：13568705
> 
> 赞同：0
> 
> 时间：2012-11-26T15:58:13.357
> 
> 标签：css

[我正在寻找更改我博客上的字体并在这里](http://www.webdesignerdepot.com/2011/08/the-most-popular-fonts-used-by-designers/)遇到了建议。

我想知道在我的博客中指定使用 Akzidenz-Grotesk 字体的正确方法是什么。例如，我知道要让帕拉蒂诺家族继续前进，我需要将以下行添加到我的`style.css`:

```
font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif; 
```

这种字体的等效版本是什么？我试过了

```
body, input, textarea {
    color: #373737;
    font: 15px  "Akzidenz-Grotesk", "Akzidenz-Grotesk", Akzidenz-Grotesk, serif;
    font-weight: 300;
    line-height: 1.625;
} 
```

这（不出所料）不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:47:42.163

要在`font-family`值中使用的名称是字体的全名或 PostScript 名称。它们可以在字体名称表中找到，对应于`nameID`值 4 或 6。这些值可以使用 DTL OTMaster Light 程序确定，当然前提是您的计算机中有可用的字体。

但是，世界上大多数计算机都没有这种字体。此外，字体名称仅在考虑到商业发行时才作为商标受到保护，因此可能有一些免费字体，例如“Akzident Grotesk”，与您脑海中的字体没有相似之处。

重复相同的名称，或者先用引号再写，然后再不用引号，都无济于事。尝试不同的拼写，例如`Akzidenz Grotesk`，可能会产生影响。

我想知道为什么你会使用`serif`它作为无衬线字体的后备字体，即使它的名字也是如此，或者为什么你会为它使用非常大的行高。仅当您希望字体系列在访问者的计算机中包含一个字重为 300 或其他一些小于正常字重 (400) 的字体时，使用像 300 这样的字重才有意义。

如果您通过声明字体来解释您期望实现的目标，那可能是最好的。

# mysql - MySQL infile 忽略标题行

> ID：13568707
> 
> 赞同：13
> 
> 时间：2012-11-26T16:14:32.527
> 
> 标签：mysql, load-data-infile

通过 INFILE 命令导入时，试图让 MySQL 忽略特定行。本质上，它是 CSV 文件中的“标题”行。

```
LOAD DATA LOCAL INFILE 'C:\myfile.txt' REPLACE INTO TABLE my_db.my_table; 
```

我已经查看了忽略命令，但那是为了忽略重复的键。有没有办法忽略 .txt 文件中的特定条目/行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T16:28:34.313

`IGNORE``LOAD DATA INFILE`在一个语句中有两个含义。第一个是重复键错误时的替换/忽略。第二个意思是你要找的那个。完整的陈述是`IGNORE n LINES`

您不能跳过随机行，但可以在输入文件的开头跳过 n 行，如下所示：

```
LOAD DATA LOCAL INFILE 'C:\myfile.txt' REPLACE INTO TABLE my_db.my_table IGNORE 5 LINES; 
```

这将忽略前 5 行，其中行尾`EOL`默认为`\n`并且可以设置为使用任何字符`LINES TERMINATED BY 'CHR'`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-26T16:25:03.517

将此选项添加到您的语句中：

```
IGNORE 1 LINES 
```

# java - 在哪里可以找到 javadoc

> ID：13568712
> 
> 赞同：0
> 
> 时间：2012-11-26T16:14:39.593
> 
> 标签：java, eclipse

我正在为java使用eclipse。当我调试时，'source not found'出来了，是因为javadoc吗？在我的桌面哪里可以找到**javadoc ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:16:20.167

您的调试器似乎进入了一个库类，而 Eclipse 找不到该库类的源代码。

您必须告诉 Eclipse 源文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:18:36.033

这与 javadoc 无关

当您调试时，当您进入一个方法内部进行调试时，如果您通过 jar 文件调用该方法，您将得到这个“找不到源”。如果您可以使用源代码而不是那个 jar，您将不会得到它，它将引导您到该方法中所需的源代码行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:29:45.810

Eclipse 告诉您这`source is not found`与 javadoc 无关，而是与实际的 java 文件有关。

很可能你没有配置你的项目有一个配置了源文件夹的 java 项目。要配置项目源文件夹，请执行以下操作：

1.  在导航器视图中右键单击您的项目名称
2.  选择属性
3.  转到 Java 构建路径 -> 源

确保所有源文件夹都在那里。确保正确配置所有源文件夹后，您应该转到调试视图，并在调试时：

1.  右键单击附加的过程
2.  选择编辑源查找
3.  确保您的项目在列表中，否则添加它。

也可能发生 Eclipse 试图向您显示一个源文件，该源文件不是来自您的项目，而是来自您正在使用的其他 jar 或来自实际 Java 运行时。

如果是这种情况，并且您仍想调试该源代码，则必须下载源代码（您正在使用的正确版本）并使用调试视图中的前 3 个步骤将该源代码添加到您的调试环境中。

# linux - ping 或 curl 无效域重定向到 Linux 上的本地服务器

> ID：13568713
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:14:40.317
> 
> 标签：linux, curl, dns, ping

当我尝试 ping 或检索无效域时，我会重定向到本地服务器上的默认域。例如：试图从我的服务器 s1.mylocaldomain.com ping www.invaliddomainnameexample.com

```
~: ping www.invaliddomainnameexample.com
PING www.invaliddomainnameexample.com.mylocaldomain.com (67.877.87.128) 56(84) bytes of data.
64 bytes from mylocaldomain.com (67.877.87.128): icmp_seq=1 ttl=64 time=0.040 ms
64 bytes from mylocaldomain.com (67.877.87.128): icmp_seq=2 ttl=64 time=0.039 ms 
```

或使用卷曲

```
~: curl -I www.invaliddomainnameexample.com
HTTP/1.1 301 Moved Permanently
Date: Mon, 26 Nov 2012 16:09:57 GMT
Content-Type: text/html
Content-Length: 223
Connection: keep-alive
Keep-Alive: timeout=10
Location: http://mylocaldomain.com/ 
```

我的 resolve.conf

```
~: cat /etc/resolv.conf 
nameserver 8.8.8.8
nameserver 8.8.4.4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:54:24.713

会不会是您的 /etc/resolv.conf 还包含一个 `search mylocaldomain.com` 声明，并且您的域有一个“*” DNS A RR？

因为随后应用了搜索列表，* 记录匹配，瞧！

尝试`ping www.invaliddomainnameexample.com.`附加一个点以将域名标记为 FQDN，从而阻止应用搜索列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:09:32.777

看来解决此问题的唯一方法是禁止 Http 服务器处理未知主机。虽然我只为本地 IP 这样做

我使用 Nginx，所以配置是

```
#list of server and local IPs
geo $local {
    default 0;
    34.56.23.0/21 1;
    127.0.0.1/32 1;
}
#Deny access to any host other  
server {
   listen 80 default_server;
   server_name  _;

   if ( $local = 1 ){
       return 405;
   }

   rewrite ^(.*) http://mylocaldomain.com$1 permanent;
} 
```

# actionscript-3 - 使用 AS3 检查 PNG 图像是否包含（半）透明像素

> ID：13568717
> 
> 赞同：2
> 
> 时间：2012-11-26T16:14:48.883
> 
> 标签：actionscript-3, image-processing, png, pixel, transparent

我想使用 AS3 检查（32 位 ARGB）PNG 图像，看看它是否包含任何（半）透明像素（返回`true`或`false`）。最快的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:33:54.240

很久以前，我一直在寻找相同的东西，并尝试使用循环来检查每个像素。但这需要花费**大量**时间并消耗大量 CPU。幸运的是，我们有一个[`BitmapData.compare()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#compare%28%29)方法，如果比较的 BitmapData 对象有任何差异，它会输出一个 Bitmapdata。

还有一个[`BitmapData.transparent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#transparent)属性，它实际上直接给你一个布尔值的答案。但是我自己从来没有直接在加载的图像上使用它。

```
import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.Event;
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.geom.Point;

var ldr:Loader = new Loader();
var req:URLRequest = new URLRequest('someImage.png');
ldr.contentLoaderInfo.addEventListener(Event.COMPLETE,imgLoaded);
ldr.load(req);

function imgLoaded(e:Event):void {
    var l:Loader = e.target.loader,
    bmp:Bitmap = l.content as Bitmap,
    file:String = l.contentLoaderInfo.url.match(/[^\/\\]+$/)[0];
    trace(bmp.bitmapData.transparent);
    // I think this default property should do it but
    // in case it does not, here's another approach:
    var trans:Boolean = isTransparent(bmp.bitmapData);
    trace(file,'is'+(trans ? '' : ' not'),'transparent');
}

function isTransparent(bmpD:BitmapData):Boolean {
    var dummy:BitmapData = new BitmapData(bmpD.width,bmpD.height,false,0xFF6600);
    // create a BitmapData with the size of the source BitmapData
    // painted in a color (I picked orange)
    dummy.copyPixels(bmpD,dummy.rect,new Point());
    // copy pixels of the original image onto this orange BitmapData
    var diffBmpD:BitmapData = bmpD.compare(dummy) as BitmapData;
    // this will return null if both BitmapData objects are identical
    // or a BitmapData otherwise
    return diffBmpD != null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:09:04.377

不幸的是，我知道的唯一方法是手动操作。可能有一种内置的方法，但我猜它会使用下面描述的相同方法

```
var bytes:ByteArray = ( loader.content as Bitmap ).bitmapData.getPixels(); //that getter may be incorrect. I'd verify the property names are correct first
var bLength:Number = bytes.length; //you'll gain considerable speed by saving the length to memory rather than accessing it repeatedly
for ( var i:Number = 0; i < bLength; i++ ) {
    var alpha:uint = bytes[i] >> 24 & 255;
    if ( alpha > 0 && alpha < 255 ) {
        //put code in here that will run if it is semi transparent
    }
    if ( alpha == 255 ) {
        //put code in here that will run if it is entirely opaque
    }
    if ( alpha == 0 ) {
        //put code in here that will run if it is entirely transparent
    }
} 
```

请记住，`ByteArray`每个像素都有 32 位（或 4 字节（每字节 8 位））的数据。`bytes.clear();`循环完成后，为了记忆，你绝对应该做一个循环，你也应该`break;`在你达到你想要的第二个循环（否则它将继续运行，直到它检查图像中的每个像素。一个 256x256 的图像将运行 65,536次，为了比较）。

只是为了清楚起见：

*   RGBA/ARGB 的测量值为 0-255
*   0 为黑色 (0x000000)，255 为白色 (0xffffff)
*   alpha 字节越黑，越透明
*   我们使用简单的按位移位来获取该字节的实际值（位 24-32）并将其设置为 0 到 255 之间的值
*   您也可以对 RGB 通道执行此操作。B 是`>> 0 & 255`, G 是`>> 8 & 255`, R 是`>> 16 & 255`

# c# - 用 C# 中的自定义滚动条替换组合框滚动条

> ID：13568719
> 
> 赞同：0
> 
> 时间：2012-11-26T16:14:58.213
> 
> 标签：c#, windows, combobox, scrollbar

我们可以用自定义滚动条替换组合框中的默认滚动条吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:42:02.880

呼应安德里诺的评论“不，不容易”

但是，有一些免费的非商业库可以使用改进的 WinForms 控件，例如[VIBlend](http://www.viblend.com/)。这可能会提供您希望自己添加的一些功能。

[MSDN Gallery](http://visualstudiogallery.msdn.microsoft.com/site/search?f%5B0%5D.Type=RootCategory&f%5B0%5D.Value=controls&f%5B0%5D.Text=Controls&f%5B1%5D.Type=CostCategory&f%5B1%5D.Value=Free&f%5B1%5D.Text=Free)上提供了更多控件

# php - 将 _GET 变量传递给 mysqli 查询时，这仍然有效吗？

> ID：13568720
> 
> 赞同：1
> 
> 时间：2012-11-26T16:14:58.353
> 
> 标签：php, mysql, mysqli

这是我在 MySQL_ 中用于从搜索表单中传递变量的代码。我现在正在使用 MySQLi_，我想知道传递变量的正确方法是什么。

我目前有：

```
//Get the "Term" from the search box
    $query=mysql_real_escape_string($_GET['query']);

    $page_str = "SELECT * FROM $tblname WHERE name like '%$query%' or clan like '%$query%'";

    $page_query = mysqli_query($con,$page_str)or die(mysql_error($con)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:17:18.870

不，您应该改用它`mysqli_real_escape_string`来完成这项工作。

由于您在使用时不会`mysql_*`打开数据库连接，因此无法正常工作。`mysqli``mysql_real_escape_string`

但是，我建议您切换到带有绑定变量的准备好的语句，而不是您根本不需要该行。

# oracle - Crystal Reports 将字符串转换为数字的问题

> ID：13568721
> 
> 赞同：0
> 
> 时间：2012-11-26T16:14:58.603
> 
> 标签：oracle, crystal-reports

我有一个把电脑扔出窗外的日子。

我正在处理一个涉及 Crystal Reports（版本 10）和 Oracle 数据库（11g）的问题。

我从数据库中获取一个返回字符串 (varcahr2(50)) 的视图，该字符串实际上是一个数字，当在此视图上运行基本的 SELECT * 查询时，我以 000000000000100.00 的格式返回数字。

然后在 Crystal Reports 中使用此视图时，我可以查看字段数据，但我无法汇总数据，因为它不是数字。

我开始尝试在该字段上使用 ToNumber，Crystal 的回应是该字符串不是数字文本。好吧，公平地说，我回到视图并运行 TO_NUMBER，然后在水晶中使用它时它没有返回任何结果。我还尝试在视图上运行 TO_CHAR，以便希望将字段作为文本导入，然后执行 ToNumber，但与 TO_NUMBER 相同，没有显示任何记录。

我已经开始了新的报告，我已经开始了新的观点。徒劳无功。

这似乎与我如何检索视图数据有关。

简单来说，我从表中提取数据，查看两个字段：外键和值字段。

```
SELECT PRIMARY_KEY, 
       NVL(MAX(DECODE(FOREIGN_KEY, FOREIGN_KEY_OF_VALUE_I_NEED, VALUE_FIELD)), 0)
    FROM MY_TABLE  
    GROUP BY PRIMARY_KEY 
```

当我尝试使用 TO_NUMBER 或 TO_CHAR 修改结果时，我在 VALUE_FIELD 本身和整个表达式周围使用了它，当在 SQL 语句中运行时，凋谢方式有效。但是，当使用视图时，对语句的任何 TO_NUMBER 或 TO_CHAR 修改都不会在 Crystal Reports 中返回任何结果。

整个问题有点像我忽略的勾选框或等效项。

任何有关如何解决此问题或我可以去哪里寻找答案的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:40:42.470

我在 SQL Developer 中运行了这个查询：

```
SELECT xxx, to_number(xxx) yyy
FROM  (
  SELECT '000000000000100.00' XXX FROM DUAL
  ) 
```

结果是：

```
XXX                 YYY
000000000000100.00  100 
```

如果您的字段是真正的数字，您可以创建一个 SQL 表达式字段来进行转换：

```
-- {%NUMBER_FIELD}
TO_NUMBER(TABLE.VALUE_FIELD) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:34:03.893

事实证明，Crystal Reports 如何处理来自数据库的查询是一个问题。我需要做的就是在另一个 Select 语句中包含我的 SQL 语句，并在该列实例上应用 TO_NUMBER，以便 Crystal Reports 将列值识别为数字。

希望这可以帮助某人，因为这是一个下午的可怕浪费。

# peoplesoft - 在 Peoplesoft 中使用 CreateJavaObject 编写输出文件

> ID：13568724
> 
> 赞同：1
> 
> 时间：2012-11-26T16:15:12.813
> 
> 标签：peoplesoft, peoplesoft-app-engine

我正在尝试编写一个将生成输出文件的应用程序引擎程序。我的目标是使用 PeopleSoft 函数“CreateJavaObject”来编写这个文件。我试过这个：

```
Local string &msg;
Local JavaObject &jFile, &writeFile;

&msg = "Hello World!";

&jFile = CreateJavaObject("java.IO.File", "c:\temp\log.txt");
&writeFile = CreateJavaObject("java.IO.BufferedWriter", &jFile);

&writeFile.writeFile(&msg); 
```

当我运行应用程序引擎程序时，程序异常终止并且错误出现在对象 java.IO.BufferedWriter 上，它表示传递了错误的参数。

在 peoplesoft 中是否有任何方法可以使用 java 函数处理文件 I/O。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:31:16.550

我已经解决了这个问题。这是代码

```
Local JavaObject &jFile;
Local JavaObject &msg;
&msg = CreateJavaObject("java.lang.String", "Hello World!");

Local JavaObject &buf = &msg.getBytes();
Local number &byteCount = &buf.length;
&jFile = CreateJavaObject("java.io.FileOutputStream", "C:\Temp\java.txt", True);
&jFile.write(&buf, 0, &byteCount);
&jFile.close(); 
```

# gwt - @UiHandler 方法中的 GWT Null 对象

> ID：13568729
> 
> 赞同：0
> 
> 时间：2012-11-26T16:15:28.970
> 
> 标签：gwt, mvp, uibinder

我正在使用 GWT 2.4 和 MVP。这是我的视图对象：

```
public class LoginWidget extends Composite implements LoginWidgetView {

interface Binder extends UiBinder<Widget, LoginWidget> {
}

private static final Binder BINDER = GWT.create(Binder.class);

@UiField Anchor settings;

public LoginWidget() {
    initWidget(BINDER.createAndBindUi(this));
}

@UiHandler("settings")
void handleSettingsClick(ClickEvent e) {
    presenter.showSettings();
}

private Presenter presenter;

@Override
public void setPresenter(Presenter presenter) {
    this.presenter = presenter;
} 
```

}

我正在设置视图的演示者

```
...
getLoginWidget().setPresenter(new LoginWidgetPresenter(placeController)); 
```

LoginWidgetPresenter 当然实现了视图的 Presenter 接口。但是当我点击设置锚点时，presenter 引用仍然为 null，因此 presenter.showSettings() 会抛出 NullPointerException。我想在调用 LoginWidget 的构造函数并通过以下方式初始化小部件之后

```
initWidget(BINDER.createAndBindUi(this)); 
```

我的@UiHandler("settings") 方法中的点击处理代码忽略了对已使用对象的更改，例如我的演示者对象？有没有办法在调用 initWidget() 方法后设置 Presenter 对象？或者是否可以自定义 @UiHandler/initWidget()-behaviour 我可以在之后设置我的演示者？

谢谢，曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:56:21.263

有很多事情，可能会出错。最简单的方法是尝试通过放置断点`handleSettings`和“setPresenter”方法来调试代码。我的猜测是正在发生以下情况之一：

*   `setPresenter`实际上从未被调用

或者

*   `getLoginWidget()`总是返回一个新的小部件实例，很可能您在登录小部件的一个实例上设置演示者，但显示完全不同的小部件实例

或者

*   `getLoginWidget().setPresenter(null)`你的代码中有某个地方

或任何其他猜测。调试起来要容易得多，并亲自查看演示者实例的传递位置和方式。无论如何，`UiBinder`不​​会抹去你的字段值（除非被别人修改来取笑你）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:44:57.180

我以另一种方式实现 MVP，而 UIBinder 为我工作。也许如果您在 LoginWidget 构造函数中传递 LoginWidgetPresenter 它可以工作。

```
public LoginWidget(Presenter presenter) {
    this.presenter = presenter;
    initWidget(BINDER.createAndBindUi(this));
}
...
getLoginWidget(new LoginWidgetPresenter(placeController)); 
```

# visual-studio-2012 - Is the NuGet Package Manager "Last Updated" field wrong?

> ID：13568730
> 
> 赞同：1
> 
> 时间：2012-11-26T16:15:29.200
> 
> 标签：visual-studio-2012, nuget, nuget-package

I really hope this is a duplicate and that the issue is not just me. When I open the NuGet Package Manager in VS 2012, the "Last Updated" field is always showing today's date for every package in the official online gallery. I know this isn't right because it's showing that for my own packages which I haven't updated in weeks.

Is this a bug in the package explorer?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:28:39.667

Update: i tried 2.2 from nuget ci server ci.nuget.org and looks like this has been fixed for the upcoming 2.2 release

It seems to be duplicate of [http://nuget.codeplex.com/workitem/2173](http://nuget.codeplex.com/workitem/2173) ...

# security - 应用手动 AES 加密而不是使用 HTTPS

> ID：13568731
> 
> 赞同：0
> 
> 时间：2012-11-26T16:15:30.180
> 
> 标签：security, ssl, https, webserver, aes

由于我的主机存在一些问题，我无法在我的服务器上使用 SSL 证书（我还没有准备好更改提供商），因此无法使用 HTTPS。该服务器将与几台客户端计算机进行通信，并将传输有些保密的数据。

**简单地使用 AES 加密（发送前在客户端加密，处理前在服务器上解密）**而不是 HTTPS 是否****合理？****

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:43:40.267

这取决于您的部署环境。

用您自己的加密协议替换 SSL/TLS（和 HTTPS）以供 Web 浏览器使用总是一个坏主意，因为它依赖于不安全地交付的 JavaScript 代码（有关详细信息，请参见[Security.SE 上的这个问题](https://security.stackexchange.com/a/24433/2435)，例如）。

如果客户端不是 Web 浏览器，您可以使用更多选项。特别是，您可以实现消息级安全性而不是传输级安全性（HTTPS 使用的安全性）。

有许多尝试使用 HTTP 标准化消息级别的安全性。例如：

*   [HTTPsec](http://en.wikipedia.org/wiki/HTTPsec)有一个公共规范（[仍然在 WebArchive 上可用](http://web.archive.org/web/20100726024942/http://www.httpsec.org/1.0/)），但它是一个商业实现。我不确定这是否已被广泛审查。

*   [WS-Security](http://en.wikipedia.org/wiki/WS-Security)，面向 SOAP 世界。

或许更简单地说，如果您想重用现有工具，您可以使用 S/MIME 或 PGP（以与电子邮件相同的方式）来加密 HTTP 消息实体。与 HTTPS 不同，这不会保护 URL 或 HTTP 标头，但如果您不在那里放置任何敏感数据，这可能就足够了。

您自己使用“原始加密”越深入（例如，直接使用 AES），您就越有可能必须手动实现其他方面的安全性（通常，验证远程方的身份并处理预先共享密钥）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:43:49.473

如果您有一小部分不经常更改的客户端，您可以使用 SSH 实现自己的 SSL-Tunnel。对客户做一个；

```
ssh -D 4444 nulluser@example.com -N 
```

where`nulluser`上没有外壳或文件访问权限`example.com`。

然后添加 foxyproxy 白名单设置 - 以便`example.com`客户端浏览器使用`localhost:4040`代理。

这是一个 hack，它完全不可扩展，但正如我所说，它适用于少量静态的客户端，并且它的优点是在完全安全的同时不重新发明任何轮子。****

# silverlight - Silverlight 气泡图

> ID：13568732
> 
> 赞同：1
> 
> 时间：2012-11-26T16:15:40.380
> 
> 标签：silverlight, bubble-chart

有人可以告诉我在哪里可以找到 silverlight 平台中合适的气泡图教程吗？我在网上发现很少，但它们并不适合初学者。我刚刚开始在这个平台上工作。提前致谢。

# java - 向使用 GridLayout 的 Composite 添加滚动条

> ID：13568736
> 
> 赞同：2
> 
> 时间：2012-11-26T16:15:51.213
> 
> 标签：java, eclipse, swt, jface

我想在下面的代码中添加垂直滚动条。你能建议怎么做吗？

```
public class SampleDialog extends TrayDialog {

public SampleDialog(final Shell shell) {
    super(shell);
    this.shell = shell;

}

@Override
public void create() {
    super.create();

}

@Override
protected Control SampleDialog(final Composite parent) {
    final GridLayout layout = new GridLayout();
    layout.numColumns = 1;
    parent.setLayout(layout);

    createSampleText(parent);

    createSampleCombo(parent);
}
} 

where:
org.eclipse.jface.dialogs.TrayDialog;
org.eclipse.swt.layout.GridLayout; 
```

org.eclipse.swt.widgets.Composite；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:25:01.170

您可以使用 a[`ScrolledComposite`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/ScrolledComposite.html)作为对话框中所有子控件的主父级。

一些有用[的片段可以在这里找到](http://www.eclipse.org/swt/snippets/#scrolledcomposite)。

# jquery - jQuery 为 preventDefault 选择元素

> ID：13568737
> 
> 赞同：0
> 
> 时间：2012-11-26T16:15:55.180
> 
> 标签：jquery, html

```
$('input[name=boxes], .item_add a ').on('click', function(e) {
  e.preventDefault();
 //do stuff inherent to both 
} 
```

有没有办法在我单击链接时阻止默认滚动操作`[.item add a]`，但仍然保留选中和取消选中复选框的默认操作，而`input[name=boxes]`不会将这两个分解为单独的 onclick 函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T16:18:12.633

```
$('input[name=boxes], .item_add a ').on('click', function(e) {
   this.tagName == 'A' && e.preventDefault();
   //do stuff inherent to both 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T16:17:52.273

```
$('input[name=boxes], .item_add a ').on('click', function(e) {
     if($(e.target).is('a')) e.preventDefault(); //if it is a link then prevent

     //do stuff inherent to both 
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:17:19.760

检查目标元素

```
if($(this).is('.item_add a')) e.preventDefault(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:18:26.600

```
$('input[name=boxes], .item_add a ').on('click', function(e) {
  if (this.tagName == "A"){
    e.preventDefault();
  }

//do stuff inherent to both 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T16:17:37.933

您可以将其保留在一个函数中，但是在函数内部进行检查？

```
if(!$(this).is(':checkbox')) {
   e.preventDefault();
   return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T16:18:21.490

试试这个：

```
$('input[name=boxes], .item_add a ').on('click', function(e) {
    if (!$(this).is(':checkbox') {
        e.preventDefault();
    }

    //do stuff inherent to both 
} 
```

# sql-server - 我们可以将审计数据存储在客户端机器上而不是客户端数据库中的表上吗？

> ID：13568739
> 
> 赞同：0
> 
> 时间：2012-11-26T16:16:01.697
> 
> 标签：sql-server, tsql

我正在使用触发器来审计客户数据库中的表数据。触发器将 DML 语句完成的所有更新存储在 TransDetailAudit 表中。

有没有办法直接在客户端机器上存储审计数据而不是 TransDetailAudit 表？

如果是的话请指导！！！

客户不希望将审计数据存储在表中。

# puppet - 带有apt源的依赖循环

> ID：13568748
> 
> 赞同：6
> 
> 时间：2012-11-26T16:16:25.343
> 
> 标签：puppet

我正在尝试在[https://github.com/dwerder/puppet-mongodb安装 puppet 模块](https://github.com/dwerder/puppet-mongodb)

它工作的要求之一是设置 mongodb 存储库。由于我试图在 Debian 上部署它，所以我尝试使用以下类来添加源代码：

```
class mongodb::apt::repo {
  include apt

  apt::source { '10gen':
    location   => 'http://downloads-distro.mongodb.org/repo/debian-sysvinit',
    release     => 'dist',
    repos       => '10gen',
    key         => '7F0CEB10',
    key_server  => 'keyserver.ubuntu.com',
    include_src => false
  }
} 
```

但是，在尝试安装模块时（在测试节点上），我得到以下输出：

```
root@debian:/etc/puppet/modules# puppet agent --test
info: Caching catalog for debian.lan
info: Applying configuration version '1353946258'
err: Could not apply complete catalog: Found 1 dependency cycle:
(Exec[apt_update] => Class[Apt::Update] => Anchor[apt::source::10gen] => Anchor[apt::source::10gen] => Apt::Source[10gen] => Class[Mongodb::Apt::Repo] => Package[mongodb-10gen] => Anchor[mongodb::install::end] => Anchor[mongodb::install::end] => File[10gen.list] => Apt::Source[10gen])
Try the '--graph' option and opening the resulting '.dot' file in OmniGraffle or GraphViz 
```

注意：完成目录运行时间为 0.06 秒

该类包含在模块的安装类中，位于[https://github.com/dwerder/puppet-mongodb/blob/master/manifests/install.pp](https://github.com/dwerder/puppet-mongodb/blob/master/manifests/install.pp)

我不太清楚为什么会发生这种依赖循环，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T16:17:57.997

您的最后一次更改是什么（这可能是您添加循环的那一刻）。

尝试生成图表的建议。将生成的点文件作为 gist 发布，以便我们进一步调查。

看看[Debugging cycle or missing dependency](http://mestachs.wordpress.com/2013/03/05/puppet-vagrant-smarter-better-stronger/)。

请注意，某些依赖项是显式的（需要，->）或隐式的（资源提供者自己添加依赖项）......查看点文件应该会有所帮助。

# php - 如何将二进制文件从android存储到mysql

> ID：13568750
> 
> 赞同：2
> 
> 时间：2012-11-26T16:16:31.480
> 
> 标签：php, android, mysql, binary, blob

我想将发送的文件从 android 存储到 mysql 但 blob 字段为空。

这是我在 php 中的代码

```
<?php

    $target_path  = "./";
    $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {

    $fileName = $_FILES['uploadedfile']['name'];
    $tmpName = $_FILES['uploadedfile']['tmp_name'];
    $fileSize = $_FILES['uploadedfile']['size']; // file size
    $data = file_get_contents($_FILES['uploadedfile']['tmp_name']);
    mysql_connect('localhost','root','');
    @mysql_select_db('client') or die("<b>Unable to specified database</b>");

    $query = "INSERT INTO files            (Username,f_id,PathFilename,DateSent,File,Filesize)
    VALUES ('d',' ','$fileName',' ',' $data','$fileSize')";
    mysql_query($query) or die('Error, query failed');
    }
    else
    {
   echo  "Weak here";
    }

?> 
```

这是我在android中的代码

```
 Log.e(Tag, "Inside second Method");

        FileInputStream fileInputStream = new FileInputStream(new File(
                exsistingFileName));

        // open a URL connection to the Servlet

        URL url = new URL(urlString);

        // Open a HTTP connection to the URL

        conn = (HttpURLConnection) url.openConnection();

        // Allow Inputs
        conn.setDoInput(true);

        // Allow Outputs
        conn.setDoOutput(true);

        // Don't use a cached copy.
        conn.setUseCaches(false);

        // Use a post method.
        conn.setRequestMethod("POST");

        conn.setRequestProperty("Connection", "Keep-Alive");

        conn.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);

        DataOutputStream dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos .writeBytes("Content-Disposition: post-data; name=uploadedfile;filename="
                        + exsistingFileName + "" + lineEnd); // ito ung file

        dos.writeBytes(lineEnd);

        Log.e(Tag, "Headers are written");

        // create a buffer of maximum size

        int bytesAvailable = fileInputStream.available();
        int maxBufferSize = 1000;
        // int bufferSize = Math.min(bytesAvailable, maxBufferSize);
        byte[] buffer = new byte[bytesAvailable];

        // read file and write it into form...

        int bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);

        while (bytesRead > 0) {
            dos.write(buffer, 0, bytesAvailable);
            bytesAvailable = fileInputStream.available();
            bytesAvailable = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);
        }

        // send multipart form data necesssary after file data...

        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // close streams
        Log.e(Tag, "File is written");
        fileInputStream.close();
        dos.flush();
        dos.close();
    } catch (MalformedURLException ex) {
        Log.e(Tag, "error: " + ex.getMessage(), ex);
    }
    catch(Exception e){
    dialog.dismiss();
    System.out.println("Exception : " + e.getMessage());
    }

    try {
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn
                .getInputStream()));
        String line;
        while ((line = rd.readLine()) != null) {
            Log.e("Dialoge Box", "Message: " + line);
        }
        rd.close();

    } catch (IOException ioex) {
        Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex);
    }
} 
```

从android上传的文件已成功上传，文件的名称和大小已插入数据库但是文件（字段）的blob字段显示0B ..请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:07:49.003

尝试：

```
$data = mysql_real_escape_string(file_get_contents($_FILES['uploadedfile']['tmp_name'])); 
```

也许这会有所帮助

# php - 使用 PHP/SQL - 如何单击列表中的项目以显示与单击的项目相关联的另一个项目列表

> ID：13568753
> 
> 赞同：3
> 
> 时间：2012-11-26T16:16:37.920
> 
> 标签：php, javascript, mysql, ajax

> **可能重复：**
> [当我的主选择使用 AJAX 更改时，如何刷新详细选择列表](https://stackoverflow.com/questions/5914993/how-can-i-refresh-a-detail-select-list-when-my-master-select-changes-using-ajax)

我只是在一段时间后再次学习 PHP，环顾四周后认为我需要使用 JS/ajax 来实现这一点，我打算在我对 PHP 更加熟悉之后了解更多。我想学习如何为我现在正在做的一些事情做这件事。

我有一个父项目表，我将其显示为链接列表。单击父项时，我希望单击的父项的子项显示在另一个列表中。我可以使用简单的查询来显示 2 个列表，我只是不知道如何在单击时更新页面/sql 查询。

```
<?php require ('connection.inc.php'); ?>

<div id="lists">
    <h3>Lists</h3>
     <?php      
    $lists = mysql_query("SELECT * FROM lists") 
    or die(mysql_error());
    while($info = mysql_fetch_array( $lists )) 
    {  
    echo "<a href=\"#\">".$info['ListName']."</a><br />";
    } 
    ?>      
</div>  

<div id='listitems'>
    <h3>List <?php $parent=2; echo $parent?> Items</h3> 
     <?php
    $listitems = mysql_query("SELECT * FROM listitems WHERE parent=$parent") 
    or die(mysql_error()); 
    while($info = mysql_fetch_array( $listitems )) 
    { 
    echo $info['itemName']."<br />";
    }   
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:41:00.840

除了代码问题（mysql_* == mucho deprecato），您需要检查请求是否为 AJAX 并输出列表项。

我使用 jquery 来简化 ajax 请求。

```
<?php
require ('connection.inc.php');

/* AJAX request */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && 
        strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
{
    $query = sprintf('SELECT * FROM listitems WHERE parent=%d',
            mysql_real_escape_string($_REQUEST['parent']));
    $listitems = mysql_query($query)
            or die(mysql_error()); 
    printf('<h3>List %d Items</h3>', $_REQUEST['parent']);
    while($info = mysql_fetch_array( $listitems )) 
    { 
        echo $info['itemName']."<br />";
    }
    exit;
}

/* Normal request */
?>

<div id="lists">
    <h3>Lists</h3>
    <?php      
    $lists = mysql_query("SELECT * FROM lists") 
            or die(mysql_error());
    while($info = mysql_fetch_array( $lists )) 
    {  
        echo "<a href=\"#\">".$info['ListName']."</a><br />";
    } 
    ?>      
</div>  

<div id='listitems'>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
jQuery(function($)){
     $('#lists').delegate('a', 'click', function(){
         $('#listitems').load(window.location.pathname, {parent: $(this).text()});
         return false;
     });
}
</script> 
```

# objective-c - 在一个 NSOperationQueue 上抢占 NSOperation 并将 NSOperation 放置到一个单独的 NSOperationQueue 上？

> ID：13568756
> 
> 赞同：2
> 
> 时间：2012-11-26T16:16:47.623
> 
> 标签：objective-c, ios, concurrency

我有一个应用程序，其中一个长时间运行的进程（> 1 分钟）被放置到 NSOperationQueue（队列 A）上。当队列 A 操作运行时，UI 完全响应，正如预期的那样。

但是，我有一种用户可以执行的不同类型的操作，它在完全独立的 NSOperationQueue（队列 B）上运行。

当 UI 事件触发在队列 B 上放置操作时，它必须等到队列 A 上当前执行的操作完成之后**。**这发生在 iPod Touch (MC544LL) 上。

相反，我希望看到的是，放置在队列 B 上的任何操作都会或多或少地立即开始与队列 A 上的操作并行执行。这是我在模拟器上看到的行为。

我的问题是两个部分：

*   根据可用文档，我在设备上看到的行为是否符合预期？
*   使用 NSOperation/NSOperationQueue，我如何使用队列 B 上的新操作抢占队列 A 上当前正在运行的操作？

注意：我可以通过使用队列 A/B 的 GCD 队列来获得我所追求的行为，所以我知道我的设备能够支持我正在尝试做的事情。但是，我真的非常想使用 NSOperationQueue 因为这两个操作都需要取消。

我有一个简单的测试应用程序：

![在此处输入图像描述](../Images/f8f76479e751c11f5e0dcf88e21e76f2.png)

视图控制器是：

```
//
//  ViewController.m
//  QueueTest
//

#import "ViewController.h"

@interface ViewController ()

@property (strong, nonatomic) NSOperationQueue *slowQueue;
@property (strong, nonatomic) NSOperationQueue *fastQueue;

@end

@implementation ViewController

-(id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder]) {
        self.slowQueue = [[NSOperationQueue alloc] init];
        self.fastQueue = [[NSOperationQueue alloc] init];
    }

    return self;
}

-(void)viewDidLoad
{
    NSLog(@"View loaded on thread %@", [NSThread currentThread]);
}

// Responds to "Slow Op Start" button
- (IBAction)slowOpStartPressed:(id)sender {
    NSBlockOperation *operation = [[NSBlockOperation alloc] init];

    [operation addExecutionBlock:^{
        [self workHard:600];
    }];

    [self.slowQueue addOperation:operation];
}

// Responds to "Fast Op Start" button
- (IBAction)fastOpStart:(id)sender {    
    NSBlockOperation *operation = [[NSBlockOperation alloc] init];

    [operation addExecutionBlock:^{
        NSLog(@"Fast operation on thread %@", [NSThread currentThread]);
    }];

    [self.fastQueue addOperation:operation];
}

-(void)workHard:(NSUInteger)iterations
{
    NSLog(@"SlowOperation start on thread %@", [NSThread currentThread]);

    NSDecimalNumber *result = [[NSDecimalNumber alloc] initWithString:@"0"];

    for (NSUInteger i = 0; i < iterations; i++) {        
        NSDecimalNumber *outer = [[NSDecimalNumber alloc] initWithUnsignedInteger:i];

        for (NSUInteger j = 0; j < iterations; j++) {
            NSDecimalNumber *inner = [[NSDecimalNumber alloc] initWithUnsignedInteger:j];
            NSDecimalNumber *product = [outer decimalNumberByMultiplyingBy:inner];

            result = [result decimalNumberByAdding:product];
        }

        result = [result decimalNumberByAdding:outer];
    }

    NSLog(@"SlowOperation end");
}

@end 
```

我在第一次按下“Slow Op Start”按钮后看到的输出是大约 1 秒后按下“Fast Op Start”按钮：

```
2012-11-28 07:41:13.051 QueueTest[12558:907] View loaded on thread <NSThread: 0x1d51ec30>{name = (null), num = 1}
2012-11-28 07:41:14.745 QueueTest[12558:1703] SlowOperation start on thread <NSThread: 0x1d55e5f0>{name = (null), num = 3}
2012-11-28 07:41:25.127 QueueTest[12558:1703] SlowOperation end
2012-11-28 07:41:25.913 QueueTest[12558:3907] Fast operation on thread <NSThread: 0x1e36d4c0>{name = (null), num = 4} 
```

如您所见，第二个操作直到第一个操作完成后才开始执行，尽管它们是两个独立的（并且可能是独立的）NSOperationQueues。

我已阅读[Apple Concurrency Guide](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1)，但找不到任何描述这种情况的内容。我还阅读了有关相关主题（[链接](https://stackoverflow.com/questions/11533955/two-simultaneous-background-tasks-using-nsoperationqueue)、[链接](https://stackoverflow.com/questions/2018119/nsoperationqueue-not-reusing-thread-on-iphone)）的两个 SO 问题，但似乎都没有触及我所看到的问题的核心（先发制人）。

我尝试过的其他事情：

*   在每个 NSOperation 上设置 queuePriority
*   在每个 NSOperation 上设置 queuePriority，同时将两种类型的操作放在同一个队列中
*   将两个操作放在同一个队列中

此问题经过多次编辑，可能会使某些评论/答案难以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:30:53.550

我怀疑您遇到的问题是两个操作队列都在底层默认优先级调度队列上执行它们的块。因此，如果在快速操作之前将几个慢速操作排入队列，那么您可能会看到这种行为。

为什么不为慢速操作设置 NSOperationQueue 实例，使其在任何给定时间只执行一个操作（即，将此队列的 maxConcurrentOperationCount 设置为 1），或者如果您的操作都是块，那么为什么不直接使用 GCD 队列呢？例如

```
static dispatch_queue_t slowOpQueue = NULL;
static dispatch_queue_t fastOpQueue = NULL;

static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    slowOpQueue = dispatch_queue_create("Slow Ops Queue", NULL);
    fastOpQueue = dispatch_queue_create("Fast Ops Queue", DISPATCH_QUEUE_CONCURRENT);
});

for (NSUInteger slowOpIndex = 0; slowOpIndex < 5; slowOpIndex++) {
    dispatch_async(slowOpQueue, ^(void) {
        NSLog(@"* Starting slow op %d.", slowOpIndex);
        for (NSUInteger delayLoop = 0; delayLoop < 1000; delayLoop++) {
            putchar('.');
        }

        NSLog(@"* Ending slow op %d.", slowOpIndex);
    });
}

for (NSUInteger fastBlockIndex = 0; fastBlockIndex < 10; fastBlockIndex++) {
    dispatch_async(fastOpQueue, ^(void) {
        NSLog(@"Starting fast op %d.", fastBlockIndex);
        NSLog(@"Ending fast op %d.", fastBlockIndex);
    });
} 
```

至于根据您关于需要操作取消设施等的评论使用 NSOperationQueue ，您可以尝试：

```
- (void)loadSlowQueue
{
    [self.slowQueue setMaxConcurrentOperationCount:1];
    NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@"begin slow block 1");

        [self workHard:500];

        NSLog(@"end slow block 1");
    }];

    NSBlockOperation *operation2 = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@"begin slow block 2");

        [self workHard:500];

        NSLog(@"end slow block 2");
    }];

    [self.slowQueue addOperation:operation];
    [self.slowQueue addOperation:operation2];
} 
```

因为我认为您添加到慢队列上的操作的两个块正在默认队列上并行执行，并阻止您的快速操作被安排。

编辑：

如果您仍然发现默认的 GCD 队列令人窒息，为什么不创建一个 NSOperation 子类来执行块而不使用 GCD 来处理您的慢速操作，这仍然会为您提供不为每个操作创建单独的子类的声明性便利，但是使用常规 NSOperation 的线程模型。例如

```
#import <Foundation/Foundation.h>

typedef void (^BlockOperation)(NSOperation *containingOperation);

@interface PseudoBlockOperation : NSOperation

- (id)initWithBlock:(BlockOperation)block;
- (void)addBlock:(BlockOperation)block;

@end 
```

然后是实施：

```
#import "PseudoBlockOperation.h"

@interface PseudoBlockOperation()

@property (nonatomic, strong) NSMutableArray *blocks;

@end

@implementation PseudoBlockOperation

@synthesize blocks;

- (id)init
{
    self = [super init];

    if (self) {
        blocks = [[NSMutableArray alloc] initWithCapacity:1];
    }

    return self;
}

- (id)initWithBlock:(BlockOperation)block
{
    self = [self init];

    if (self) {
        [blocks addObject:[block copy]];
    }

    return self;
}

- (void)main
{
    @autoreleasepool {
        for (BlockOperation block in blocks) {
            block(self);
        }
    }
}

- (void)addBlock:(BlockOperation)block
{
    [blocks addObject:[block copy]];
}

@end 
```

然后在您的代码中，您可以执行以下操作：

```
PseudoBlockOperation *operation = [[PseudoBlockOperation alloc] init];
[operation addBlock:^(NSOperation *operation) {
    if (!operation.isCancelled) {
        NSLog(@"begin slow block 1");

        [self workHard:500];

        NSLog(@"end slow block 1");
    }
}];

[operation addBlock:^(NSOperation *operation) {
    if (!operation.isCancelled) {
        NSLog(@"begin slow block 2");

        [self workHard:500];

        NSLog(@"end slow block 2");
    }
}];

[self.slowQueue addOperation:operation]; 
```

请注意，在此示例中，添加到同一操作的任何块都将按顺序执行而不是同时执行，以同时执行每个块创建一个操作。这比 NSBlockOperation 的优势在于您可以通过更改 BlockOperation 的定义将参数传递到块中 - 这里我传递了包含操作，但您可以传递任何其他需要的上下文。

希望有帮助。

# phpmyadmin - 将一个表中的字段合并到另一个表中

> ID：13568759
> 
> 赞同：0
> 
> 时间：2012-11-26T16:17:01.740
> 
> 标签：phpmyadmin

我有两张表，一张有一个需要合并到另一个表中的字段。困扰我的问题是一个人的数据需要与另一个人的正确现有数据相对应。一个示例：表 1 包含字段 Customer、Ticket 和 Department。表 2 包含字段 Customer、Ticket 和 Price。我需要将现有的 Department 字段从表 1 复制到表 2，并使其正确匹配现有的 Ticket 字段，这在两个表中都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:52:35.747

我刚刚看到你有一个 phpmyadmin 标签，所以在 mysql 中你可以根据你的表名和字段编写以下修改。

```
create view finalTable as
select a.customer, a.ticket, b.price, a.department
from table1 as a
join table2 as b on a.ticket=b.ticket and a.customer = b.customer 
```

# tomcat - 找不到类 java apache Tomcat

> ID：13568761
> 
> 赞同：0
> 
> 时间：2012-11-26T16:17:13.097
> 
> 标签：tomcat, servlets, netbeans

我需要你的帮助。我正在使用 Apache Tomcat 服务器在 NetBeans 中开发一个 Web 应用程序。我做了很多研究来找出解决方案。我发现了一些类似的问题，但我无法解决。请您帮我解决以下错误图像。

```
HTTP Status 500 - Error instantiating servlet class Registration

type Exception report

message Error instantiating servlet class Registration

description The server encountered an internal error that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Error instantiating servlet class Registration
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
root cause

java.lang.ClassNotFoundException: Registration
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.33 logs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:26:45.673

据我从您提供的信息中可以看出，默认包中没有您的课程。

错误说：

```
java.lang.ClassNotFoundException: Registration 
```

您的`Registration`类必须在默认包中并映射`web.xml`或使用[WebServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)注释进行注释（适用于 Tomcat 7）。

# cakephp-2.0 - 如何从另一个 angularjs 页面打开 angularjs 页面作为弹出窗口

> ID：13568763
> 
> 赞同：2
> 
> 时间：2012-11-26T16:17:16.170
> 
> 标签：cakephp-2.0, angularjs

我有 2 个 CakePHP 页面。他们都使用angularjs。这是一个片段。

/items/items.ctp

```
<div id="ng-app" ng-app>`
    <div ng-controller="ItemController">
        <a href="#" ng-click="showAddPopup">Add</a>
    </div>
</div> 
```

函数 showAddPopup 定义如下

```
$scope.showAddPopup = function() {
    $.colorbox({href:'/items/add/' + $scope.order.id,open:true,close : "x", onClosed:function(){}});
} 
```

/items/add.ctp

```
<div id="ng-app" ng-app>`
    <div ng-controller="AddController">
        <h2>{{order.label}}<h2>
    </div>
</div> 
```

现在，当我从项目视图中单击添加链接时，我会看到一个包含 add.ctp 内容的弹出窗口。但问题是，不是显示订单标签说“我的订单”，而是显示 h2 标签`{{order.label}}`

当我从不使用 angularjs 的页面打开添加视图时，我得到了正确的结果。我究竟做错了什么。请帮忙。我已经为此浪费了很多天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T22:54:14.807

如果您使用的是引导程序，那么[angular-ui](http://angular-ui.github.io/bootstrap/)将是上述场景的绝佳选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:34:14.680

如果问题是嵌套的 ng-apps，也许通过设置 iframe 打开颜色框可能是解决方案。

```
$.colorbox({inline:false; iframe:true;href:'/items/add/'...}); 
```

# xpages - 保留视图面板复选框的选择？

> ID：13568768
> 
> 赞同：0
> 
> 时间：2012-11-26T16:17:25.610
> 
> 标签：xpages

我搜索并找到了一些解决方案，但没有一个看起来很有吸引力。

分页视图时，列复选框中的先前选择将丢失。

有没有人想出一个简单的方法来保留以前的选择。

这是视图面板的一个非常烦人的功能，将来有可能修复它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:37:38.080

请参阅[http://hasselba.ch/blog/?p=1062](http://hasselba.ch/blog/?p=1062)获取 xSnippet，它可以满足您的要求

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T10:12:42.973

var viewPanel = getComponent("viewPanel2");

viewPanel.getSelectedIds().toString();

它将返回所选文档的 NotesID。

# visual-studio-2010 - 如何使用 Qt VS 插件向 Visual Studio 中的 Qt 项目添加新配置？

> ID：13568770
> 
> 赞同：2
> 
> 时间：2012-11-26T16:17:26.933
> 
> 标签：visual-studio-2010, qt, configuration, moc

我需要向使用 QT Visual-Studio-add-in 创建的 Visual Studio 项目添加新配置（除调试和发布之外）。

问题是 moc 文件不会自动添加到项目中。

QT Visual-Studio-add-in在哪里存储了基于现有头文件添加moc_file的配置规则？

如果我生成像 Release_Special 这样的新配置，则在包含文件的项目中应该有一个新的过滤器 Release_Special

moc_Test1.cpp moc_Test2.cpp

具有正确的排除规则。

我正在使用 VS2010 和 qt 4.8.3。

谢谢你，最好的问候MS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:18:52.007

花了一段时间，但我设法弄清楚了。

1.  您需要在不丢失任何 Qt 插件自定义添加的东西的情况下创建新配置。打开配置管理器并创建配置，但请务必在“从...复制设置”下拉列表中选择“调试”或“发布”。假设您将新配置命名为“Debug-foo”，并使用了预先存在的 Debug 配置中的设置。
2.  构建项目。所有必要的文件都将被 moc'd 并且输出将出现在 GeneratedFiles\Debug-foo 目录中（它将自动创建）。然后构建将尝试处理来自 Debug 配置的 moc 文件，这显然不是我们想要的，因此一旦构建完成 moc'ing，您就可以终止它。
3.  在解决方案资源管理器中的 Generated Files 下添加一个名为“Debug-foo”的新过滤器，然后 Add->Existing item to that，从 GeneratedFiles\Debug-foo 中选择所有 moc_(...).cpp 文件刚刚创建.
4.  最后但同样重要的是，选择 Generated Files\Debug 过滤器中的所有文件，选择 Properties 并将“Excluded from build”设置为 true，否则构建将包含来自 Debug 和 Debug-foo 的 moc_ 文件。

希望这将在某些新版本的加载项中得到修复。也许已经是了，谁知道呢（我在插件 1.1.10 中遇到了这个问题）。

至于您关于 moc_ 生成规则的存储位置的部分问题；将配置创建为现有配置的副本可以省去添加自定义构建指令以为每个需要它的文件调用 moc 的麻烦。这些存储在单个头文件的属性中，如果您想检查它们，则需要在“自定义构建工具”下进行 moc'ing。

# ios - iPhone 和 iPad 上的照明传感器是否会自动调整 RGB 值？

> ID：13568771
> 
> 赞同：0
> 
> 时间：2012-11-26T16:17:32.833
> 
> 标签：ios, image-processing, opengl-es, avcapturesession, avcapturedevice

iPhone 和 iPad 有不同的 AvCaptureDevice 方法来锁定或设置自动：白平衡和曝光设置。

我试图了解后置摄像头和现在前置摄像头上“背面照明传感器”的机制，以及它是否调整白平衡和曝光设置，如果是这种情况，是否会锁定 WB 和曝光模式会干扰与“背面照明传感器”工作。

或者，“背照式传感器”是否简单且仅在弱光下提高像素的 RGB 值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:21:07.033

我认为您对“背照式传感器”一词在这里的含义有些困惑。这只是新 iPhone（和其他手机）中使用的一种 CMOS 传感器。它声称比旧的 CMOS 成像器具有更好的低光性能，但它只是捕捉照片和视频的功能，而不是用于检测光照水平的单独传感器。设备正面有一个光传感器，但这只是为了根据光照条件调整屏幕的亮度。

根据我的经验，iPhone 所做的所有自动曝光和增益校正都是基于相机拍摄的场景的平均亮度。当我完成整个图像亮度平均时，我发现 iPhone 相机几乎总是保持 50% 左右的平均亮度。这似乎表明它使用传感器捕获的图像来确定相机的曝光和增益设置（也可能是白平衡调平）。

# android-notifications - notificationcompat setDefaults 和设置

> ID：13568776
> 
> 赞同：1
> 
> 时间：2012-11-26T16:17:54.237
> 
> 标签：android-notifications

我正在向我的 android 项目添加通知：

```
mBuilder.setContentTitle("title");
mBuilder.setContentText("Text");
mBuilder.setSmallIcon(R.drawable.icon);
mBuilder.setDefaults(Notification.DEFAULT_LIGHTS | Notification.DEFAULT_VIBRATE);
mBuilder.setSound(Uri.parse("android.resource://com.my.package/" + R.raw.sound));
mBuilder.setOnlyAlertOnce(true); 
```

现在，我想要一个“设置视图”，用户可以在其中决定他/她是否想要振动或声音。

我应该如何存储此设置并更新 setDefaults 和 setSound？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:17:48.043

[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html)是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-04T19:29:04.780

从@dsandler，我给你一个更详细的例子：

```
builder = new NotificationCompat.Builder(this).setContentTitle(contentTitle).setContentText(contentText).setSmallIcon(R.drawable.ic_launcher)
            .setAutoCancel(true).setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher))
            .setStyle(new NotificationCompat.BigTextStyle().bigText(contentText));

    int notificationDefault = NotificationCompat.DEFAULT_SOUND;

    // Check vibrate
    boolean isVibrate = mPreferences.getBoolean(mKeyPrefNotifications[1], true);
    if (isVibrate) {
        notificationDefault = notificationDefault | NotificationCompat.DEFAULT_VIBRATE;
    }

    // Check light
    boolean isLight = mPreferences.getBoolean(mKeyPrefNotifications[2], true);
    if (isLight) {
        notificationDefault = notificationDefault | NotificationCompat.DEFAULT_LIGHTS;
    }

    // Check sound
    Uri sound = null;
    if (!mPreferences.contains(mKeyPrefNotifications[3])) {
        sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    } else {
        String soundPref = mPreferences.getString(mKeyPrefNotifications[3], "");
        if (soundPref.isEmpty()) {
            sound = null;
        } else {
            sound = Uri.parse(soundPref);
        }
    }

    builder.setDefaults(notificationDefault);
    builder.setSound(sound); 
```

# c# - Page.IsValid 检查内部？

> ID：13568777
> 
> 赞同：3
> 
> 时间：2012-11-26T16:17:54.287
> 
> 标签：c#, javascript, asp.net, .net-4.0

我想知道，如何`Page.IsValid`获得它的价值。

如果页面有验证器并且正在提交，asp.net 引擎如何知道页面是否有效？

*   客户端的结果是否保存在隐藏字段中？（我不这么认为，因为它们不会生成任何隐藏字段）。另外，我不认为它保持在视图状态。原因客户端可以添加到视图状态。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:21:09.757

验证实际上是在服务器级别完成的。当您点击提交时，所有表单值都会被回发。并调用每个控件的服务器端验证器来检查其用户输入值的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:53:42.673

如果你想要实际的代码：

```
[Browsable(false), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public bool IsValid
{
    get
    {
        if (!this._validated)
        {
            throw new HttpException(SR.GetString("IsValid_Cant_Be_Called"));
        }
        if (this._validators != null)
        {
            ValidatorCollection validators = this.Validators;
            int count = validators.Count;
            for (int i = 0; i < count; i++)
            {
                if (!validators[i].IsValid)
                {
                    return false;
                }
            }
        }
        return true;
    }
} 
```

它基本上会遍历页面上的所有验证器并检查它们是否都返回`IsValid = true`。如果其中任何一个无效，则返回 false。

# matlab - Matlab：按每个唯一值出现的次数对向量进行排序

> ID：13568780
> 
> 赞同：3
> 
> 时间：2012-11-26T16:18:02.753
> 
> 标签：matlab, unique, octave

我们有 pe`i = 1:25`迭代。每个迭代结果都是一个`1xlength(N)`元胞数组，其中`0<=N<=25`.

```
iteration 1: 4     5     9    10     20     
iteration 2: 3     8     9    13     14      6
...
iteration 25:  1     2    3 
```

我们将所有迭代的结果评估为一个根据频率排序的矩阵，每个值按降序重复，如下例所示：

```
Matrix=
  Columns 1 through 13
    16    22    19    25     2     5     8    14    17    21     3    12    13
     6     5     4     4     3     3     3     3     3     3     2     2     2
  Columns 14 through 23
    18    20     1     6     7     9    10    11    15    23
     2     2     1     1     1     1     1     1     1     1 
```

结果说明：第 1 列：`N == 16`出现在 6 次迭代中，第 2 列：`N == 22`出现在 5 次迭代中，等等。如果在任何迭代`N`中都没有显示数字（在该范例`N == 4`中`N == 24`），则也不会以频率索引为零列出。

我想将每个迭代 ( `i`) 与第一个迭代相关联，`N`它显示 pe`N == 9`仅在第一次迭代中出现`i = 1`，而不出现在`i = 2`太中，`N == 3`只出现在`i = 2`而不出现在`i = 25`太等，直到所有`i`' 都唯一关联到`N`'。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:42:58.637

这是一种使用`unique`R2012a 中引入的功能（即，它将索引返回到第一个值）的方法

```
%# make some sample data
iteration{1} = [1 2 4 6];
iteration{2} = [1 3 6];
iteration{3} = [1 2 3 4 5 6];
nIter= length(iteration);

%# create an index vector so we can associate N's with iterations
nn = cellfun(@numel,iteration);
idx = zeros(1,sum(nn));
idx([1,cumsum(nn(1:end-1))+1]) = 1;
idx = cumsum(idx); %# has 4 ones, 3 twos, 6 threes

%# create a vector of the same length as idx with all the N's
nVec = cat(2,iteration{:});

%# run `unique` on the vector to identify the first occurrence of each N
[~,firstIdx] = unique(nVec,'first');

%# create a "cleanIteration" array, where each N only appears once
cleanIter = accumarray(idx(firstIdx)',firstIdx',[nIter,1],@(x){sort(nVec(x))},{});

cleanIter = 
    [1x4 double]
    [         3]
    [         5]

>> cleanIter{1}
ans =
     1     2     4     6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:44:16.710

这是另一个使用`accumarray`. 评论中的解释

```
% example data (from your question)
iteration{1} = [4     5     9    10     20  ];
iteration{2} = [3     8     9    13     14      6];
iteration{3} = [1     2    3];
niterations = length(iteration);

% create iteration numbers 
% same as Jonas did in the first part of his code, but using a short loop
for i=1:niterations
    idx{i} = i*ones(size(iteration{i}));
end

% count occurences of values from all iterations
% sort them in descending order
occurences = accumarray([iteration{:}]', 1);
[occ val] = sort(occurences, 1, 'descend');

% remove zero occurences and create the Matrix
nonzero = find(occ);
Matrix = [val(nonzero) occ(nonzero)]'

Matrix =

 3     9     1     2     4     5     6     8    10    13    14    20
 2     2     1     1     1     1     1     1     1     1     1     1

% find minimum iteration number for all occurences
% again, using accumarray with @min function
assoc = accumarray([iteration{:}]', [idx{:}]', [], @min);
nonzero = find(assoc);
result = [nonzero assoc(nonzero)]'

result =

 1     2     3     4     5     6     8     9    10    13    14    20
 3     3     2     1     1     2     2     1     1     2     2     1 
```

# wpf - 如何同步两个TextBlock的背景？

> ID：13568781
> 
> 赞同：2
> 
> 时间：2012-11-26T16:18:09.300
> 
> 标签：wpf, background, triggers, sync

我想同步两个TextBlockes的背景。例如，如果鼠标在任何文本块上，我想将两个文本块的背景颜色更改为相同。我知道我可以使用这个触发器来改变一个背景：

```
 <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Background" Value="LightGray"/>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Gray"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

但是如何同步它们？

更新：这也不起作用：

```
<UserControl.Resources>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Background" Value="LightGray"/>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Gray"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <TextBlock Grid.Column="0" Background="{Binding Path=Background, ElementName=tbHeader, Mode=TwoWay}" Text="A"/>
    <TextBlock x:Name="tbHeader" Grid.Column="1" Text="B"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:47:25.257

如果您正在寻找“正确”的 MVVM 方式，则应将鼠标悬停事件/属性绑定到视图模型的同一属性，并将背景再次绑定到同一属性，并使用转换器将其转换为适当的颜色（或带有模板的样式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:44:44.220

您可以通过将它们放入`ContentControl`并像这样应用触发器来同步它`ControlTemplate`-

```
 <Grid>
    <ContentControl>
        <ContentControl.Template>
            <ControlTemplate>
                <StackPanel>
                    <TextBlock Text="Rohit" x:Name="txt1"/>
                    <TextBlock Text="Vats" x:Name="txt2"/>
                </StackPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="TextBlock.IsMouseOver" SourceName="txt1" 
                             Value="True">
                        <Setter Property="TextBlock.Background" Value="Red" 
                                TargetName="txt1"/>
                        <Setter Property="TextBlock.Background" Value="Red" 
                                TargetName="txt2"/>
                    </Trigger>
                    <Trigger Property="TextBlock.IsMouseOver" SourceName="txt2" 
                             Value="True">
                        <Setter Property="TextBlock.Background" Value="Red" 
                                TargetName="txt1"/>
                        <Setter Property="TextBlock.Background" Value="Red" 
                                TargetName="txt2"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </ContentControl.Template>
    </ContentControl>
  </Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:28:42.490

尝试[元素到元素绑定](http://www.rhyous.com/2010/04/13/tutorial-binding-one-element-property-to-another/)

```
<TextBlock x:Name=textBlock1>
<TextBlock.Style>
<Style TargetType="{x:Type TextBlock}">
        <Setter Property="Background" Value="LightGray"/>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Gray"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</TextBlock.Style>
</TextBlock>

<TextBlock Background={Binding Path=Background ElementName=textBlock1/><!--Background gets set from textBlock1--> 
```

# python - 有没有办法在 Windows 中不加载 Python 来查看 cPickle 或 Pickle 文件内容？

> ID：13568790
> 
> 赞同：33
> 
> 时间：2012-11-26T16:18:26.887
> 
> 标签：python, pickle

我使用 cPickle 保存程序每次运行的数据集。由于我有时需要在不运行代码的情况下查看数据的轮廓，因此我想要一种简单的方法，只需双击文件即可快速查看内容。我试图避免每次都加载终端并将python指向一个文件，只是为了运行一些`print`脚本。

我寻找 Notepad++ 插件，但找不到任何东西。

有一些简单的方法可以做到这一点吗？有没有人有什么建议？

注意：我运行的是 Windows 7。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-12-24T17:32:34.993

对于 Python 3.2+/2.7+，您可以`__repr__`从命令行查看（的）泡菜：

```
$ python -c "import pickle; pickle.dump({'hello': 'world'}, open('obj.dat', 'wb'))"
$ python -mpickle obj.dat
{'hello': 'world'} 
```

将它集成到 Windows shell 中应该很容易。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-26T16:32:30.907

我*真的*怀疑有什么办法可以做到这一点，因为有了`pickle`，你几乎可以打包任何东西。取消腌制时，您需要能够加载在腌制对象时加载的模块等。换句话说，一般来说，为了能够`unpickle`做某事，python 需要能够重现程序的“环境”（或至少足够接近的近似值）——加载的模块、全局命名空间中的类等。 . 一般来说，如果没有用户的帮助，这是不可能的。考虑：

```
import pickle
class Foo(object): pass

a = Foo()
with open('data.pickle','wb') as f:
    pickle.dump(a,f) 
```

现在，如果您尝试在单独的脚本中恢复它，python 无法知道 a 的`Foo`样子，因此它无法恢复该对象（除非您`Foo`在该脚本中定义了合适的对象）。这实际上不是一个可以在没有一些人为干预的情况下完成的过程。

当然，可以尝试一个可以说是有用的特殊情况，即您只是从标准库中腌制内置对象和事物……但我认为您不能编写通用的 unpickler 扩展。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-27T13:54:49.063

您还可以在终端上创建别名，例如：

```
alias pvw="python -mpickle " 
```

就我而言：

```
pvw obj.dat                                   
         ID    A_ID   B_ID   PAST_ID
    0    20    1008   4771     425  
    1    20    2000   4771     425  
    2    20    2015   4771     425 
```

# java - Eclipse 中无用的恼人警告

> ID：13568792
> 
> 赞同：2
> 
> 时间：2012-11-26T16:18:28.450
> 
> 标签：java, eclipse, warnings

在我的代码中，我对“死代码”有很多警告。问题是我有这样的代码

```
public void myMethod(final String text) {
    if(CONST_FLAG && something == true) {
       doMyMethod(text);
    }
} 
```

CONST_FLAG 是一个构建配置常量。当 CONST_FLAG 为假时，我会收到死代码的警告。如果我说我想抑制警告，当标志为真时，我会看到“不必要的抑制”警告。

有没有办法避免它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:21:02.360

您可以使用以下路径将 Eclipse 配置为在某些情况下不向您显示警告，例如`Dead Code`,`Unused Imports`等：-

> 转到 Windows -> 首选项 -> Java -> 编译器 -> 错误/警告 -> 潜在的编程问题 -> 设置**`Dead Code`**为忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:32:03.003

当您的 CONST_FLAG 为假时，您不能在其他部分进行工作。像这样

当您像下面这样说时，我收到了死代码警告

```
if(false) {
       doMyMethod(text);
    } 
```

但就像下面我没有收到那个警告，

```
 private static final boolean CONST_FLAG = false;

if(CONST_FLAG) {
       doMyMethod(text);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:04:50.060

这就是我修复它的方法：

```
public void myMethod(final String text) {
   boolean shouldDotit = something == true && CONST_FLAG;
   if(shouldDoIt) {
      doMyMethod(text);
   }
} 
```

所以我需要使用局部变量并反转布尔检查的顺序

# python - clonedigger忽略文件

> ID：13568796
> 
> 赞同：1
> 
> 时间：2012-11-26T16:18:34.800
> 
> 标签：python, django

如何让 clonedigger 忽略文件？

我正在运行这个命令：

```
clonedigger --cpd-output src/apps/api/ -o ${basedir}/clonedigger.xml 
```

但我需要它来忽略 tests.py 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:10:37.387

```
clonedigger --ignore-dir=IGNORE_DIRS . 
```

或者，使用`clonedigger --file-list`并传入一组您*确实*想要处理的文件。如有必要，您可以使用 UNIX 工具（如`find`耦合`grep -v`）过滤掉名称包含`test`.

# qt - 首次安装后向 Qt5 添加插件

> ID：13568797
> 
> 赞同：1
> 
> 时间：2012-11-26T16:18:47.670
> 
> 标签：qt, qt5

我设法在我的 Ubuntu 机器上构建/配置/安装 qt5，但我没有设置 xcb 支持。现在我想添加对这个平台的支持。有没有办法只添加这个插件而不必重新配置/重新编译/安装整个 qt5 的东西？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:38:17.420

应该足以：

```
cd <your_qt_sources>/qtbase/src/plugins/platforms/xcb
<your_qt_install_dir>/bin/qmake
make -j<n> 
```

<> 表示根据您的系统替换为值。构建完成后，您会被告知插件的放置位置。然后将其放入：

```
<your_qt_install_dir>/plugins/platforms/ 
```

您需要满足依赖关系（几个 xcb 库）。

# java - 使用 PATH 列出 MediaStore 中的所有音乐

> ID：13568798
> 
> 赞同：32
> 
> 时间：2012-11-26T16:18:51.980
> 
> 标签：java, android, media, mediastore

好的，所以我已经在这个项目上工作了几天，我的大部分时间都在研究如何在列表视图或其他东西中列出设备上的所有音乐，我现在已经搜索了几天并且这正在杀了我。我确实在一个文件夹中显示所有音乐的时候如此接近，但由于大多数人都会有诸如 artiest 和专辑之类的子文件夹，我需要一种方法来搜索 MP3 或音乐文件的子文件夹。

这是我迄今为止收集的音乐：

```
package com.androidhive.musicplayer;

import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.HashMap;

import android.provider.MediaStore;

public class SongsManager {
// SDCard Path
final String MEDIA_PATH = new String(MediaStore.Audio.Media.getContentUri("external").toString());
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

// Constructor
public SongsManager(){

}

/**
 * Function to read all mp3 files from sdcard
 * and store the details in ArrayList
 * */
public ArrayList<HashMap<String, String>> getPlayList(){
    File home = new File(MEDIA_PATH);

    if (home.listFiles(new FileExtensionFilter()).length > 0) {
        for (File file : home.listFiles(new FileExtensionFilter())) {
            HashMap<String, String> song = new HashMap<String, String>();
            song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
            song.put("songPath", file.getPath());

            // Adding each song to SongList
            songsList.add(song);
        }
    }
    // return songs list array
    return songsList;
}

/**
 * Class to filter files which are having .mp3 extension
 * */
class FileExtensionFilter implements FilenameFilter {
    public boolean accept(File dir, String name) {
        return (name.endsWith(".mp3") || name.endsWith(".MP3"));
    }
}

} 
```

感谢任何能提供帮助的人。:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-01-24T12:49:42.103

虽然这篇文章很旧，但对于像我这样的其他人来说，如果想用他们的文件路径创建一个音乐列表，我在这里添加了解决方案。`MediaStore.Audio.Media.DATA`列实际上包含媒体文件路径。您可以使用以下代码段获取必要的信息：

```
ContentResolver cr = getActivity().getContentResolver();

Uri uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
String selection = MediaStore.Audio.Media.IS_MUSIC + "!= 0";
String sortOrder = MediaStore.Audio.Media.TITLE + " ASC";
Cursor cur = cr.query(uri, null, selection, null, sortOrder);
int count = 0;

if(cur != null)
{
    count = cur.getCount();

    if(count > 0)
    {
        while(cur.moveToNext())
        {
            String data = cur.getString(cur.getColumnIndex(MediaStore.Audio.Media.DATA));
            // Add code to get more column here

            // Save to your list here
        }

    }

    cur.close();
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-27T09:07:03.040

[您可以使用此代码](http://www.androidsnippets.com/list-all-music-files)列出所有音乐文件

```
//Some audio may be explicitly marked as not being music
String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

String[] projection = {
        MediaStore.Audio.Media._ID,
        MediaStore.Audio.Media.ARTIST,
        MediaStore.Audio.Media.TITLE,
        MediaStore.Audio.Media.DATA,
        MediaStore.Audio.Media.DISPLAY_NAME,
        MediaStore.Audio.Media.DURATION
};

cursor = this.managedQuery(
        MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
        projection,
        selection,
        null,
        null);

private List<String> songs = new ArrayList<String>();
while(cursor.moveToNext()) {
        songs.add(cursor.getString(0) + "||" 
                    + cursor.getString(1) + "||" 
                    + cursor.getString(2) + "||"
                    + cursor.getString(3) + "||"
                    + cursor.getString(4) + "||" 
                    + cursor.getString(5));
} 
```

我没有尝试过这段代码，但它似乎是正确的。你会走在正确的轨道上。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-06T18:16:44.363

我现在正在做同一个项目并且已经解决了这个问题。

您将需要一个自定义类来存储您的歌曲数据：

```
package YOUR_PACKAGE;

public class Songs
{
    private long mSongID;
    private String mSongTitle;

    public Songs(long id, String title){
        mSongID = id;
        mSongTitle = title;
    }

    public long getSongID(){
        return mSongID;
    }

    public String getSongTitle(){
        return mSongTitle;
    }
} 
```

然后，您必须使用列表视图在活动中定义 ArrayList，您将使用数据填充：

```
private ArrayList<Songs> arrayList; 
```

在 onCreate 中：

```
arrayList = new ArrayList<Songs>(); 
```

然后你必须从你的设备中检索数据：

```
public void YOUR_METHOD_NAME(){
    ContentResolver contentResolver = getContentResolver();
    Uri songUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    Cursor songCursor = contentResolver.query(songUri, null, null, null, null);

    if(songCursor != null && songCursor.moveToFirst())
    {
        int songId = songCursor.getColumnIndex(MediaStore.Audio.Media._ID);
        int songTitle = songCursor.getColumnIndex(MediaStore.Audio.Media.TITLE);

        do {
            long currentId = songCursor.getLong(songId);
            String currentTitle = songCursor.getString(songTitle);
            arrayList.add(new Songs(currentId, currentTitle, currentArtist));
        } while(songCursor.moveToNext());
    }
} 
```

然后从 onCreate 调用这个方法：

```
YOUR_METHOD_NAME(); 
```

最后，您必须创建自定义适配器类，在 onCreate 中定义此适配器（在使用 ListView 的活动中）并将此适配器设置在您的 ListView 对象上。

我看到它是 3 年前提出的，我认为问题已经解决了，但也许它对某人有用。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-08T04:41:49.403

这是一个简单的函数，它为您提供文件对象中的所有音频文件。

```
 public static List<File> getAllAudios(Context c) {
    List<File> files = new ArrayList<>();
    String[] projection = { MediaStore.Audio.AudioColumns.DATA ,MediaStore.Audio.Media.DISPLAY_NAME};
    Cursor cursor = c.getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, null, null, null);
    try {
        cursor.moveToFirst();
        do{
            files.add((new File(cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)))));
        }while(cursor.moveToNext());

        cursor.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return files;
} 
```

# javascript - jquery Tipsy 工具提示不适用于 d3.js 圈子

> ID：13568802
> 
> 赞同：1
> 
> 时间：2012-11-26T16:19:10.150
> 
> 标签：javascript, jquery, canvas, d3.js, tipsy

这是我的 d3.js 代码

```
var circles = vis.selectAll("circle").data(data)
circles
    .enter()
        .append("svg:circle")
            .attr("stroke", "black")
            .attr("cx", function (d) { return xRange(d.year); })
            .attr("cy", function (d) { return yRange(d.count); })
            .style("fill", function(d,i){return color(i);})
        .append("svg:title")
            .text(function (d) { return d.corpus; }) 
```

最后，我在圆圈中附加了一个工具提示。我尝试将 jquery 提示工具提示附加到圆圈但没有工作。这就是我的做法（我跟着`http://bl.ocks.org/1373263`）

```
var circles = vis.selectAll("circle").data(data)
circles
    .enter()
        .append("svg:circle")
            .attr("stroke", "black")
            .attr("cx", function (d) { return xRange(d.year); })
            .attr("cy", function (d) { return yRange(d.count); })
            .style("fill", function(d,i){return color(i);})
        $('svg circle').tipsy({ 
                            gravity: 'w', 
                            html: true, 
                            title: function (d) {
                            return d.corpus;
                          }
                       }); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T07:38:21.990

你错过了这个。**数据**

```
$('svg circle').tipsy({ 
                            gravity: 'w', 
                            html: true, 
                            title: function (d) {
                               var d = this.__data__;
                               return d.corpus;
                          }
                       }); 
```

# cuda - CUDA 内核未在 CudaDeviceSynchronize 之前启动

> ID：13568805
> 
> 赞同：2
> 
> 时间：2012-11-26T16:19:18.727
> 
> 标签：cuda

![cuda分析器输出：](../Images/e1ecfeba595ad17f9bcb0360b1b087ad.png)

我在并发 CUDA 方面遇到了一些问题。看一下附加的图像。内核在标记点启动，即 0.395 秒。然后是一些绿色的 CpuWork。最后，调用了 cudaDeviceSynchronize。在 CpuWork 之前启动的内核不会在同步调用之前启动。理想情况下，它应该与 CPU 工作并行运行。

```
void KdTreeGpu::traceRaysOnGpuAsync(int firstRayIndex, int numRays, int rank, int buffer)
{
    int per_block = 128;
    int num_blocks = numRays/per_block + (numRays%per_block==0?0:1);

    Ray* rays = &this->deviceRayPtr[firstRayIndex];
    int* outputHitPanelIds = &this->deviceHitPanelIdPtr[firstRayIndex];

    kdTreeTraversal<<<num_blocks, per_block, 0>>>(sceneBoundingBox, rays, deviceNodesPtr, deviceTrianglesListPtr, 
                                                firstRayIndex, numRays, rank, rootNodeIndex, 
                                                deviceTHitPtr, outputHitPanelIds, deviceReflectionPtr);

    CUDA_VALIDATE(cudaMemcpyAsync(resultHitDistances[buffer], deviceTHitPtr, numRays*sizeof(double), cudaMemcpyDeviceToHost));
    CUDA_VALIDATE(cudaMemcpyAsync(resultHitPanelIds[buffer], outputHitPanelIds, numRays*sizeof(int), cudaMemcpyDeviceToHost));
    CUDA_VALIDATE(cudaMemcpyAsync(resultReflections[buffer], deviceReflectionPtr, numRays*sizeof(Vector3), cudaMemcpyDeviceToHost));
} 
```

内存副本是异步的。结果缓冲区是这样分配的

```
unsigned int flag = cudaHostAllocPortable;

CUDA_VALIDATE(cudaHostAlloc(&resultHitPanelIds[0], MAX_RAYS_PER_ITERATION*sizeof(int), flag));
CUDA_VALIDATE(cudaHostAlloc(&resultHitPanelIds[1], MAX_RAYS_PER_ITERATION*sizeof(int), flag)); 
```

希望对此有解决方案。尝试了很多事情，包括不在默认流中运行。当我添加 cudaHostAlloc 时，我意识到异步方法返回到 CPU。但是，当内核在稍后调用 deviceSynchronize 之前没有启动时，这无济于事。

`resultHitDistances[2]`包含两个分配的内存区域，因此当 CPU 读取 0 时，GPU 应该将结果放入 1。

谢谢！

编辑：这是调用 traceRaysAsync 的代码。

```
int numIterations = ceil(float(this->numPrimaryRays) / MAX_RAYS_PER_ITERATION);
int numRaysPrevious = min(MAX_RAYS_PER_ITERATION, this->numPrimaryRays);
nvtxRangePushA("traceRaysOnGpuAsync First");
traceRaysOnGpuAsync(0, numRaysPrevious, rank, 0);
nvtxRangePop();

for(int iteration = 0; iteration < numIterations; iteration++)
{

    int rayFrom = (iteration+1)*MAX_RAYS_PER_ITERATION;
    int rayTo = min((iteration+2)*MAX_RAYS_PER_ITERATION, this->numPrimaryRays) - 1;
    int numRaysIteration = rayTo-rayFrom+1;

    // Wait for results to finish and get them

    waitForGpu();
    // Trace the next iteration asynchronously. This will have data prepared for next iteration

    if(numRaysIteration > 0)
    {
        int nextBuffer = (iteration+1) % 2;
        nvtxRangePushA("traceRaysOnGpuAsync Interior");
        traceRaysOnGpuAsync(rayFrom, numRaysIteration, rank, nextBuffer);
        nvtxRangePop();
    }
    nvtxRangePushA("CpuWork");

    // Store results for current iteration

    int rayOffset = iteration*MAX_RAYS_PER_ITERATION;
    int buffer = iteration % 2;

    for(int i = 0; i < numRaysPrevious; i++)
    {
        if(this->activeRays[rayOffset+i] && resultHitPanelIds[buffer][i] >= 0)
        {
            this->activeRays[rayOffset+i] = false;
            const TrianglePanelPair & t = this->getTriangle(resultHitPanelIds[buffer][i]);
            double hitT = resultHitDistances[buffer][i];

            Vector3 reflectedDirection = resultReflections[buffer][i];

            Result res = Result(rays[rayOffset+i], hitT, t.panel);
            results[rank].push_back(res);
            t.panel->incrementIntensity(1.0);

            if (t.panel->getParent().absorbtion < 1)
            {
                numberOfRaysGenerated++;

                Ray reflected (res.endPoint() + 0.00001*reflectedDirection, reflectedDirection);

                this->newRays[rayOffset+i] = reflected;
                this->activeRays[rayOffset+i] = true;
                numNewRays++;

            }
        }

    }

    numRaysPrevious = numRaysIteration;

    nvtxRangePop();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:32:58.807

这是具有 WDDM 驱动程序模型的 Windows 上的预期行为，其中驱动程序尝试通过尝试批处理内核启动来减轻内核启动开销。尝试`cudaStreamQuery(0)`在内核调用之后直接插入，以在批处理已满之前触发内核的提前启动。

# jquery - 移动设备上的 jticker.js 和自动滚动

> ID：13568808
> 
> 赞同：0
> 
> 时间：2012-11-26T16:19:30.223
> 
> 标签：jquery, mobile, scroll

我正在使用 jticker.js 打印我的数据。

在大屏幕上一切正常，但在小屏幕上我希望滚动继续打印数据，我的问题是移动设备的高度填满后没有滚动。

如何将自动滚动添加到我的代码中，它会知道滚动数据？

这是我的代码演示：

[http://jsfiddle.net/e8c8G/](http://jsfiddle.net/e8c8G/)

这是我的代码：

```
 <title>jticker | Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css" media="screen, projection">

      #ticker
        {height: auto; padding: 0.6em 0; margin: 0 0 1.8em 0; border-top:3px solid #efefef; border-bottom:3px solid #efefef; position: relative;}
      #ticker .cursor
        {display: inline-block; background: #565c61; width: 0.6em; height: 1em; text-align: center;}
      #ticker p
        {margin-bottom: 0.8em;}
      #ticker code
        {margin: 0.4em 0.4em; display: block;}
      #ticker .next 
        {position: absolute; bottom: 1em;}
    </style>
    <script type="text/javascript" src="./jticker3   Demo_files/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="./jticker3   Demo_files/jquery.jticker.js"></script>
    <script type="text/javascript">

      jQuery(document).ready(function(){
        // Instantiate jTicker 
        jQuery("#ticker").ticker({
            cursorList:  " ",
            rate:        10,
            delay:       4000
        }).trigger("play").trigger("stop");

        // Trigger events 
        jQuery(".stop").click(function(){
            jQuery("#ticker").trigger("stop");
            return false;
        });

        jQuery(".play").click(function(){
            jQuery("#ticker").trigger("play");
            return false;
        });

        jQuery(".style").click(function(){
            jQuery("#ticker")
            .trigger({
                type: "control",
                cursor: jQuery("#ticker").data("ticker").cursor.css({width: "4em", background: "#efefef", position: "relative", top: "1em", left: "-1em"})
            })
            return false;
        });

      });

    </script>

    </head>

    <body cz-shortcut-listen="true">

    <div id="content">

      <h2 style="text-align:center;">Demo</h2>
      <div id="ticker">
        <div>
            <h3>Cart:</h3>
            <ul style="margin-bottom:40px;">
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>
                    <li>Price : 100 euro</li>           
            </ul>

                    <a class="next" href="http://www.thepixelart.com/demo/jticker/#" >Total: 109$</a>
        </div>
      </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:29:46.570

好的，我找到了答案：

我刚刚将其添加到我的代码中：

```
 $('html, body').animate({
         scrollTop: $(document).height()
        },
       4000); 
```

这是完整的代码，您可以在移动设备或小屏幕上查看它以查看自动滚动的运行情况：

[http://jsfiddle.net/e8c8G/](http://jsfiddle.net/e8c8G/)

# jquery - 使用 jQuery 更改控件类型的属性

> ID：13568809
> 
> 赞同：1
> 
> 时间：2012-11-26T16:19:36.637
> 
> 标签：jquery

我有一个带有 5 个网格和 1 个按钮的网页。我想对页面进行编程以允许用户单击一个按钮并更改 5 个网格上的文本大小。我如何使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:23:33.137

以下是具有单个按钮的一种实现，该按钮在页面上特定区域的某些预定字体大小之间循环：

```
// Our fontsizes, and cached selectors
var fontsizes = ['10px', '16px', '20px', '30px'],
    $buttonEl = $("#modify"),
    $affected = $("#affected"),
    index;

// When our button is clicked
$buttonEl.on("click", function () {
    // Determine new font-size for the affected region
    $affected.css("font-size", function (index, size) {
       // Get index of current size in our array
       index = $.inArray(size, fontsizes);
       // Return the next font size in the list (wraps)
       return fontsizes[++index % fontsizes.length];
    });
}); 
```

演示：http: [//jsfiddle.net/MLVAJ/1/](http://jsfiddle.net/MLVAJ/1/)

# java - 如何针对特定场景正确使用 Apache Camel？

> ID：13568810
> 
> 赞同：1
> 
> 时间：2012-11-26T16:19:40.483
> 
> 标签：java, asynchronous, apache-camel, internal

**问题概述**

我正在使用 apache camel 2.4，并被要求在我们的一个 maven/spring 项目中设置一个内部消息传递系统。这可能看起来有点奇怪，但这是因为他们计划在以后将一些功能分离出来，并希望已经涵盖了集成方面。

**所需的功能**

基本上我有一个 bean (A) 进行一些处理并创建一个可序列化的对象。我有另一个 bean (B)，它接受所述可序列化对象并执行我们希望异步发生的一些额外处理。

计划是让 bean (A) 通过 Camel 的 SEDA 组件生成一条消息，并让 bean (B) 在内部使用它。

**我做了什么**

到目前为止，我已经通过以下方式实现了这一点；

- 创建一个定义路由的 RouteBuilder 实现。

- 在春季配置我的 CamelContext 以使用所述路线构建器。

- 创建一个以 CamelContext 作为属性的“生产者”类，并使用它创建一个用于发送消息的 ProducerTemplate。- 由 bean (A) 使用。

- 将 bean (B) 定义为消费者（通过配置的 RouteBuilder 中的“bean:beanB”）。

**问题**

这可行，但是，作为骆驼的新手，我不确定这是否是实现所需功能的好方法。进一步查看 Camel 文档后，似乎有很多不同的方法可以做同样的事情（在 spring 中配置路由，而不是定义 RouteBuiler 实现，使用 SedaEndpoint 实现，在 spring 中定义 ProducerTemplate 并将其用作依赖而不是 CamelContext 本身.....）。

实现所需功能的标准做法/最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:14:26.240

您可以通过各种方式将事物连接在一起，但是您所描述的内容非常标准...

也就是说，您可以考虑以下...

*   不要为生产者的每次调用创建一个新的 ProducerTemplate（重用它等）
*   [注意生产者/消费者的预期消息传递速率，并可能使用camel-seda](http://camel.apache.org/seda.html) concurrentConsumers 属性启用多线程消费
*   使用比 2.4 更新的 Camel 版本（当前为 2.10.2）

# c# - 在 C# 中定义使用属性（作为属性？）的警告

> ID：13568812
> 
> 赞同：2
> 
> 时间：2012-11-26T16:19:46.483
> 
> 标签：c#, attributes, warnings, obsolete

如果代码中使用了某些属性，我想发出警告。我可以使用过时的属性。但是使用的属性并没有过时，因此给出过时的警告是不正确的。当使用该属性时，如何为编译期间打印的某些属性定义自己的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:42:05.107

1.  为什么不使用过时的属性？
2.  您可以使用带有评论的任务列表。只需使用此处定义的关键字 ![VS2008 选项](../Images/73f082544913fbbcc8b411b5f0998ea7.png) ![VS2008 编辑器](../Images/5360f479ecc7cc75dac9666a3912a9a3.png)

# entity-framework-4 - Entity Framework Power Tools Beta 2 出错网站

> ID：13568813
> 
> 赞同：0
> 
> 时间：2012-11-26T16:19:49.300
> 
> 标签：entity-framework-4, ef-power-tools

我的站点运行良好，然后我安装了 Entity Framework Power Tools Beta 2，现在该站点不再运行。看来这一定是运行时错误，因为VS 2012 IDE中没有错误。有 40 个与它创建的存储过程有关的警告，例如：

```
(EXISTS (SELECT name FROM sysobjects WHERE (name = N'vw_aspnet_WebPartState_User') AND (type = 'V'))) ) 
```

它指出：警告 1 SQL71502：过程：[dbo].[aspnet_AnyDataInTables] 对对象 [dbo].[sysobjects].[type] 的引用未解析。C:\xxxxx\documents\visual studio 2012\Projects\MyProjectName\dbo\Stored Procedures\aspnet_AnyDataInTables.sql 51 94 MyProjectAzure

它不喜欢“名称”、“sysObjects”和“类型”。在上面的代码行中。这发生在我反向工程名称时。但我似乎无法找出该网站出错的地方。其他人遇到过这个问题吗？

# jdbc - IBM DB2 对重复键的批量更新行为

> ID：13568817
> 
> 赞同：0
> 
> 时间：2012-11-26T16:19:59.090
> 
> 标签：jdbc, db2, spring-batch, jdbctemplate

我目前正在编写一个 Java 应用程序并在自动提交模式下使用批量插入。我的问题是，如果我在批处理中插入 4 行并抛出 BatchUpdateException，因为批处理的第二行触发了重复键违规！DBC 驱动程序是否继续处理剩下的 2 行离开数据库并插入 3 行？还是在第 2 行停止，留下 1 个插入行的数据库？或者它回滚整个批次，留下 0 个插入行的数据库状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:17:54.430

它是这样工作的：

您有步骤中提到的块大小。例如，块大小为 10。

因此，每次将提交一批 10 个项目。

比如说，在一批 10 个项目中，第 4 个项目会像您的情况一样引发重复键异常。

在这种情况下，整个批次将被拒绝并且作业将停止（如果未实施跳过策略）。

但是，所有先前已提交的正确块都不会回滚。

进一步补充说，如果在删除不正确的数据之后，如果重新启动相同的作业，那么该作业将完全从它最后出错的块开始。

因此，已经写入的数据没有任何反应。

# php - 在 php 和 mysql 中从 Wikipedia 中提取描述和关键字

> ID：13568818
> 
> 赞同：0
> 
> 时间：2012-11-26T16:19:59.017
> 
> 标签：php, mysql, web-crawler, wikipedia, wikidata

我有一个网页，其中包含来自维基百科的精选文章的所有链接，并且我提取了所有这些文章的标题、描述和关键字。但是我有一个问题，当网络爬虫开始提取文章的内容时，我的数据库中的字段描述保持为空，关键字显示“数组数组数组”。

如何提取维基百科文章的描述和关键字？

网络爬虫是用 php 和 mysql 编写的，这是实际代码：

```
<?php
error_reporting(E_ALL | E_STRICT);
set_time_limit(0);
$server_link = mysql_connect("localhost", "root", "");
if (!$server_link) {
    die("Fall&oacute; la Conexi&oacute;n " . mysql_error());
}
$db_selected = mysql_select_db("test", $server_link);
if (!$db_selected) {
    die("No se pudo seleccionar la Base de Datos " . mysql_error());
}
@mysql_query("SET NAMES 'utf8'");
function storeLink($titulo, $descripcion, $url, $keywords) {
    $query = "INSERT INTO webs (webTitulo, webDescripcion, weburl, webkeywords) VALUES ('$titulo', '$descripcion', '$url', '$keywords')";
    mysql_query($query) or die('Error, falló la inserción de datos');
}
function extraer($url, $prof, $patron) {
    $userAgent = 'Interredu';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(("Accept-Language: es-es,en")));
    curl_setopt($ch, CURLOPT_FAILONERROR, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 2);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $html = curl_exec($ch);
    // La salvo de Entrada, para que no se me corra en la entrada a la base de datos
    saveUrl($url, $prof, $patron, $html);
    // Mando error pero no corto porque si una url esta mal formada termina con la
    // ejecucion
    if (!$html) {
        echo "<br />cURL error number:" . curl_errno($ch);
        echo "<br />cURL error:" . curl_error($ch);
    }
    $dom = new DOMDocument();
    $dom->loadHTML($html);
    $xpath = new DOMXPath($dom);
    $hrefs = $xpath->evaluate("/html/body//a");
    for ($i = 0;$i < $hrefs->length;++$i) {
        $href = $hrefs->item($i);
        $url2 = $href->getAttribute('href');
        $var = strstr($url2, '#', true);
        if ($var !== false) {
            $url2 = $var;
        }
        // Me aseguro que este bajo nuestro sitio.
        if (strpos($url2, $patron) === false) {
            continue;
        }
        // Me aseguro que ya no este ingresada, para no iterar sobre ella misam
        if ($url2 != $url && $url2 != '') {
            // Se podria agregar un campo timestap para luego reescanera paginas
            // que tuvieran una fecha menor.
            // URL Unica para que falle y como es mysql poner INSERT INTO ...... ON DUPLICATE KEY ... en la funcion de guardado
            $busqueda = mysql_query("SELECT weburl FROM webs WHERE weburl='$url2'");
            $cantidad = mysql_num_rows($busqueda);
            if (150 >= $prof && 0 == $cantidad) {
                extraer($url2, ++$prof, $patron);
            }
        }
    }
}
function saveUrl($url, $prof, $patron, $html) {
    $retorno = false;
    $pos = strpos($url, $patron);
    if ($prof >= 1) {
        preg_match_all("(<title>(.*)<\/title>)siU", $html, $title);
        $metas = get_meta_tags($url, 1);
        $title = $title[1][0];
        $titulo = html_entity_decode($title, ENT_QUOTES, 'UTF-8');
        $descripcion = isset($metas["description"])?$metas["description"] : '';
        $keywords = isset($metas["keywords"])?$metas["keywords"] : '';
    if (empty($descripcion)){
obtenerMetaDescription($html);
    }
    if (empty($keywords)){
    preg_match_all("#<\s*h1[^>]*>[^<]+</h1>#is", $html, $encabezado);
    preg_match_all("#<\s*b[^>]*>[^<]+</b>#is", $html, $negrita);
    preg_match_all("#<\s*i[^>]*>[^<]+</i>#is", $html, $italica);
    if(!empty($encabezado)){
    $h1 = $encabezado[0];
    }
    if(!empty($negrita)){
    $bold = $negrita[0];
    }
    if(!empty($italica)){
    $italic = $italica[0];
    }
    $keys .= $bold;
    $keys .= " ";
    $keys .= $h1;
    $keys .= " ";
    $keys .= $italic;
    $keywords = substr(strip_tags($keys), 0, 200);
}
        storeLink($titulo, $descripcion, $url, $keywords, $prof);
        $retorno = true;
    }
    return $retorno;
}
function obtenerMetaDescription($html) {
    preg_match_all('#<p>(.*)</p>#Us', $html, $parraf);
    if(!empty($parraf)){
    $descripcion = substr(strip_tags($parraf[1][0]), 0, 200);
    }
    }
$url = "http://www.mywebsite.with.articlesofwikipedia";
$patron = "http://es.wikipedia.org/wiki/";
$prof = 150;
libxml_use_internal_errors(true);
extraer($url, 1, $patron);
$errores = libxml_get_errors();
libxml_clear_errors();
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-25T17:20:50.683

放弃时髦的屏幕抓取和正则表达式，使用 Wikidata 获取来自 Wikipedia 的结构化数据：[https ://www.wikidata.org/wiki/Wikidata:Data_access](https://www.wikidata.org/wiki/Wikidata:Data_access)

MediaWiki API 有多个 PHP 库：[https ://www.mediawiki.org/wiki/API:Client_code#PHP](https://www.mediawiki.org/wiki/API:Client_code#PHP)

要查找功能文章，您必须查询[相应的徽章](https://meta.wikimedia.org/wiki/Wikidata/Development/Badges)，然后您可以从项目描述中获取简短描述，并从语句中获取其他信息。

# java - 光线投射拾取不完美：让我选择了错误的立方体

> ID：13568820
> 
> 赞同：0
> 
> 时间：2012-11-26T16:20:16.397
> 
> 标签：java, opengl

我在 JOGL 中编写了一个简单的拾取演示。有 27 个立方体，放置在魔方中。但问题是采摘很少选择好的立方体。那么对于这种情况，光线投射是最好的方法吗？否则，如果立方体有不同的旋转（例如，并不总是蓝色面对我们），我应该使用哪种方法？

TheGLEventListener.java（我删除了一些实现的方法，因为它们没有被使用）

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.views;

public class TheGLEventListener implements GLEventListener,MouseListener,MouseMotionListener {

    @Override
    public void init(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();
        gl.glEnable(GL2.GL_DEPTH_TEST);
        gl.glClearColor(0.67f, 0.16f, 0.51f, 0.0f);

        cubesLocations = new ArrayList<>();
        for (int i = 0; i < 3; i++){
            for (int j = 0; j < 3; j++){
                for (int k = 0; k < 3; k++){
                    cubesLocations.add(new Vector3f((float) (-3.0 + 3.0 * i), (float) (-3.0 + 3.0 * j), (float) (-3.0 + 3.0 * k)));
                }
            }
        }
    }

    @Override
    public void display(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();

        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();

        glu.gluLookAt(
                0.0f, 0.0f, 20.0f,
                0.0f, 0.0f, 0.0f,
                0.0f, 1.0f, 0.0f
        );

        if (pendingEvent != null){
                    // Mouse pressed event
            if (pendingEvent.getID() == MouseEvent.MOUSE_PRESSED) {
                Ray rayFromMousePointer = Ray.fromMouseCoords(pendingEvent.getX(), pendingEvent.getY(),
                        gl);

                Vector3f cubeCenter = null;
                mouseIntersection = null;

                            // for each cube, we look for intersection
                for (int cubeIndex = 0; cubeIndex < cubesLocations.size(); cubeIndex++) {
                    cubeCenter = cubesLocations.get(cubeIndex);

                                    // ray cast intersection computed here
                                    mouseIntersection = rayFromMousePointer.intersectionWithSphere(cubeCenter, 1.0f * 1.414f);

                                    // if there is an intersection
                    if (mouseIntersection != null){
                        selectedCubeIndex = cubeIndex;
                        mouseOffsetInCube = mouseIntersection.clone().sub(cubeCenter);
                        break;
                    }
                }

                pendingEvent = null;
            }
            else if (pendingEvent.getID() == MouseEvent.MOUSE_DRAGGED){
                if (selectedCubeIndex >= 0) {
                    Ray rayFromMousePointer = Ray.fromMouseCoords(
                            pendingEvent.getX(), pendingEvent.getY(), gl);
                    Vector3f newLocation = rayFromMousePointer
                        .getPointWhoseZ_Is(mouseIntersection.z);
                    mouseIntersection = newLocation;
                    cubesLocations.set(selectedCubeIndex, mouseIntersection.clone().sub(mouseOffsetInCube));
                }
            }
            else if (pendingEvent.getID() == MouseEvent.MOUSE_RELEASED){
                selectedCubeIndex = -1;
            }
        }

        drawScene(gl);
    }

    private void drawScene(GL2 gl) {
        for (Vector3f place : cubesLocations) {
            gl.glPushMatrix();
            gl.glTranslatef(place.x, place.y, place.z);
            GLLittleCube.draw(gl);
            gl.glPopMatrix();
        }
    }

    @Override
    public void reshape(GLAutoDrawable drawable, int x, int y, int width,
            int height) {
        GL2 gl = drawable.getGL().getGL2();
        gl.glViewport(0, 0, width, height);

        gl.glMatrixMode(GL2.GL_PROJECTION);
        gl.glLoadIdentity();
        glu.gluPerspective(60.0, width * 1.0f / height, 0.1, 40);
        gl.glMatrixMode(GL2.GL_MODELVIEW);
    }

    private GLU glu = new GLUgl2();

    @Override
    public void mousePressed(MouseEvent e) {
        pendingEvent = e;
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        pendingEvent = e;
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        pendingEvent = e;
    }

    private MouseEvent pendingEvent;
    private ArrayList<Vector3f> cubesLocations;
    private int selectedCubeIndex = -1;
    /**
     * Distance from the center of the selected cube, to its
     * clicked point.
     */
    private Vector3f mouseOffsetInCube;

    /**
     * The original clicked point, in the selected cube : it is this point which is
     * moved when dragging mouse (and not the cube center) !!! Otherwise, I get a strange effect
     * in the beginning.
     */
    private Vector3f mouseIntersection;

} 
```

GLLittleCube.java（我只是放了一张脸的代码）

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.logic;

import javax.media.opengl.GL2;

public class GLLittleCube {

    /**
     * Draws a little cube bounds within [-1.0 and 1.0] for the three directions x,y and z.
     * @param gl - GL2
     */
    public static void draw(GL2 gl){
        gl.glBegin(GL2.GL_QUADS);

          //FRONT face (BLUE)
          gl.glColor3f(0.0f, 0.13f, 0.66f); 
          gl.glVertex3f(-1.0f, -1.0f, +1.0f);
          gl.glVertex3f(+1.0f, -1.0f, +1.0f);
          gl.glVertex3f(+1.0f, +1.0f, +1.0f);
          gl.glVertex3f(-1.0f, +1.0f, +1.0f);

              // similar code for other faces

          gl.glEnd();
    }

} 
```

雷.java

```
package com.gmail.bernabe.laurent.java_opengl.picking_test.logic;

import javax.media.opengl.GL2;
import javax.media.opengl.glu.GLU;
import javax.media.opengl.glu.gl2.GLUgl2;

public class Ray {
    private Vector3f origin, direction;

    public Ray(Vector3f origin, Vector3f direction) {
        this.origin = origin;
        this.direction = direction;
    }

    public Vector3f getOrigin() {
        return origin;
    }

    public Vector3f getDirection() {
        return direction;
    }

    /**
     * Returns the point, belonging to this ray, whose x coordinate is given.
     * @param soughtX - float
     * @return - Vector3f
     */
    public Vector3f getPointWhoseX_Is(float soughtX){
        float period = (float) (soughtX - origin.x) / direction.x; 
        return origin.clone().add(direction.clone().scale(period));
    }

    /**
     * Returns the point, belonging to this ray, whose y coordinate is given.
     * @param soughtY - float
     * @return - Vector3f
     */
    public Vector3f getPointWhoseY_Is(float soughtY){
        float period = (float) (soughtY - origin.y) / direction.y; 
        return origin.clone().add(direction.clone().scale(period));
    }

    /**
     * Returns the point, belonging to this ray, whose z coordinate is given.
     * @param soughtZ - float
     * @return - Vector3f
     */
    public Vector3f getPointWhoseZ_Is(float soughtX){
        float period = (float) (soughtX - origin.z) / direction.z; 
        return origin.clone().add(direction.clone().scale(period));
    }

    /**
     * Returns the intersection point : the closest one from the ray origin.
     * @param sphereCenter - Vector3f
     * @param sphereRadius - float
     * @return Vector3f
     */
    public Vector3f intersectionWithSphere(Vector3f sphereCenter, float sphereRadius){
        // sphere center values
        double scx, scy, scz;

        // sphere radius
        double sr;

        //ray direction values
        double rdx, rdy, rdz;

        //ray origin values
        double rox, roy, roz;

        //quadratic equation values
        double b,c, delta, t0, t1;

        sr = sphereRadius;
        scx = sphereCenter.x;
        scy = sphereCenter.y;
        scz = sphereCenter.z;

        rdx = direction.x;
        rdy = direction.y;
        rdz = direction.z;

        rox = origin.x;
        roy = origin.y;
        roz = origin.z;

        b = 2 * (rdx * (rox - scx) + rdy * (roy - scy) + rdz * (roz - scz));
        c = (rox - scx)*(rox - scx) + (roy - scy)*(roy - scy) + (roz - scz)*(roz - scz) - sr*sr;
        delta = b*b - 4*c;

        if (delta < 0){
            return null;
        }
        else {
            t0 = (-b-Math.sqrt(delta))/2;
            t1 = (+b-Math.sqrt(delta))/2;

            // Must be the smallest POSITIVE root between t0 and t1
            float t;

            if (t0 < 0 && t1 < 0)
                return null;
            else if (t0 > 0 && t1 > 0){
                t = t0 > t1 ? (float) t0 : (float) t1;
            }
            else if (t0 > 0)
                t = (float) t0;
            else 
                t = (float) t1;

            return origin.clone().add(direction.clone().scale(t));
        }
    }

    public static Ray fromMouseCoords(int mouseX, int mouseY, GL2 gl){
        int viewport [] = new int[4];
        float modelViewMatrix [] = new float[16];
        float projectionMatrix [] = new float[16];
        float objectPos[] = new float[3];

        gl.glGetIntegerv(GL2.GL_VIEWPORT, viewport, 0);
        gl.glGetFloatv(GL2.GL_MODELVIEW_MATRIX, modelViewMatrix, 0);
        gl.glGetFloatv(GL2.GL_PROJECTION_MATRIX, projectionMatrix, 0);

        float winY = viewport[3] * 1.0f - mouseY;
        float winX = mouseX * 1.0f;     

        glu.gluUnProject(winX, winY, 0.0f, modelViewMatrix, 0, projectionMatrix, 0, viewport, 0, objectPos, 0);
        Vector3f tempOrigin = new Vector3f(objectPos[0], objectPos[1], objectPos[2]);

        glu.gluUnProject(winX, winY, 1.0f, modelViewMatrix, 0, projectionMatrix, 0, viewport, 0, objectPos, 0);
        Vector3f tempDest = new Vector3f(objectPos[0], objectPos[1], objectPos[2]);

        Vector3f tempDirection = tempDest.clone().sub(tempOrigin).normalize();

        return new Ray(tempOrigin, tempDirection);
    }

    public String toString(){
        return String.format("Ray{\norigin = %s,\ndirection = %s\n}", origin, direction);
    }

    private static GLU glu = new GLUgl2();
} 
```

# iphone - NSString stringWithFormat 很慢

> ID：13568822
> 
> 赞同：4
> 
> 时间：2012-11-26T16:20:21.930
> 
> 标签：iphone, objective-c, ios, c, nsstring

在 Objective-C 中，该方法`stringWithFormat:`似乎非常慢，实际上是我们的一个应用程序中的一个很大的瓶颈（我们使用分析器来发现这一点）。有没有办法优化它或使用一些更快的 C 代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T17:10:42.537

是`sprintf`的，在 c [http://www.cplusplus.com/reference/cstdio/sprintf/](http://www.cplusplus.com/reference/cstdio/sprintf/) 中使用，然后将 char* 推送到 NSString 中`[NSString stringWithUTF8:];`

例子：

```
char cString[255];
sprintf (cString, "%d", 36);
NSString* OCstring = [[NSString alloc] initWithUTF8String:cString]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T17:15:35.737

If you're doing extensive string manipulations and operations - it sounds like you might well be doing so, and `NSString` really is becoming a bottleneck for your app, I recommend trying to use C++ for your string needs rather then C.

Apple admits that while `NSString` is great, it is top level, in fact, to make their autocorrect algorithm's for iOS they ran into a similar problem, `NSString` was too slow to compute and compare so many things. They then switched to C++ and got all the performance they needed.

Just a suggestion. You should definitely put up some code, I am surprised this is happening to you unless you're doing some awesome new feature !

# asp-classic - 是否可以使用 VB / Classic ASP 检测没有扩展名的图像的文件类型？

> ID：13568830
> 
> 赞同：1
> 
> 时间：2012-11-26T16:20:54.967
> 
> 标签：asp-classic, mime, fso

我正在使用脚本从远程 URL 中提取图像，但是有些没有任何扩展名。

有没有办法使用 vb 检测 Mime 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T09:15:08.410

从文件中读取几个第一个字节。而不是将其与模式匹配，lile：

GIF89 -- 用于 GIF

%PNG——用于PNG

# php - 以日期为缅因州标题的循环数据

> ID：13568831
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:21:00.237
> 
> 标签：php, mysql

我是 php 新手，我刚刚开发了一个查看一些教程的代码。

```
<?php
ini_set('display_errors',1); 
 error_reporting(E_ALL);
include 'db_connect.php';

$query  = "SELECT id, date, ip, website FROM response";
$result = mysql_query($query);
$dateArray=array();

while($row = mysql_fetch_array($result)  or die (mysql_error()))
{
echo "Date :{$row['date']} <br>" .
     "IP : {$row['ip']} <br>" .
     "Url : {$row['website']} <br><br>";
}

?> 
```

这以这种格式显示记录

```
Date :2012-11-23 17:07:57
IP : 198.169.127.145
Url : 2webdesign.com

Date :2012-11-25 21:45:11
IP : 198.169.127.145
Url : 2webdesign.com

Date :2012-11-25 21:45:51
IP : 198.169.127.145
Url : www.sarcan.ca 
```

我想显示日期在顶部并且数据显示在日期下方的记录

例如

```
Date: 25 November 2012
Url 
IP

URl
IP

Date 26 Nov 2012
URL
IP

URL
IP 
```

其次，我还希望可以选择将其导出到 Excelsheet。

任何人都可以看看代码并帮助我。

我知道这是非常基本的代码，因为我只有一个基本的想法哦 php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:51:30.940

请记住对您原始帖子的所有评论，因为它们都是有效的。这是您问题第一部分的可能解决方案（未经测试，因此可能需要稍作修改）：

```
<?php
$query  = "SELECT DATE(date) as date, id, date as fulldate, ip, website FROM response ORDER BY date";

// do query...

$previousDate = "";
while($row = mysql_fetch_assoc($result)) {
    // check to see if the previous date is different to this date
    if($previousDate != $row['date']) { // date is different; start a new heading
    ?>
<div>Date :<?php echo $row['date']; ?></div>
    <?php } ?>
<ul>
   <li>IP :<?php echo $row['ip']; ?></li>
   <li>Url :<?php echo $row['website']; ?></li>
</ul>
<?php 
    // assign current date to the $previousDate variable.
    $previousDate = $row['date'];
} ?> 
```

# ruby-on-rails - Errbit 是否开箱即用地记录延迟作业错误？

> ID：13568834
> 
> 赞同：1
> 
> 时间：2012-11-26T16:21:08.387
> 
> 标签：ruby-on-rails, delayed-job, errbit

Errbit 是否可以立即使用延迟工作？我们在生产环境中有一些失败的作业，我们可以在 delay_job.log 文件中看到一些任务失败以及它们的错误消息，但我们没有收到任何关于它的错误信息。

它是开箱即用的，还是我们应该使用 DJ 的挂钩将它与 Errbit 连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:43:50.217

由于 errbit 使用与 Airbrake 相同的通知程序，因此您可以使用延迟作业自述文件[https://github.com/collectiveidea/delayed_job#hooks](https://github.com/collectiveidea/delayed_job#hooks)中示例挂钩中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T12:02:41.640

如果您不想费心编写自己的钩子，可以使用[延迟插件空气制动](http://rubygems.org/gems/delayed-plugins-airbrake)gem。这只需要在一个简单的初始化程序中安装和注册，以便轻松捕获延迟作业中发生的所有错误。

# tomcat - tomcat 不检查整个证书链

> ID：13568837
> 
> 赞同：1
> 
> 时间：2012-11-26T16:21:27.570
> 
> 标签：tomcat, truststore

我有一个在 tomcat6 中运行的服务器，它需要信任客户端证书。我已经通过 HttpConnector“truststoreFile”属性配置了一个信任库。

客户端证书由中间证书签名，中间证书由根证书签名。这三个都是使用 openssl 创建的示例证书。

我在服务器的信任库中只包含了客户端证书和中间证书，客户端只能通过这两个证书与服务器通信。根证书是否需要在服务器的信任库中才能使服务器信任客户端证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-20T10:47:02.937

如果您已经将该根证书添加到您的客户端应用程序（例如浏览器）或操作系统可信证书，您的客户端可能会信任 Tomcat 提供的中间证书和客户端证书。

# php - jquery 错误 NS_ERROR_XPC_BAD_CONVERT_JS：在 FF 中有效但在 Chrome 上无效

> ID：13568838
> 
> 赞同：1
> 
> 时间：2012-11-26T16:21:32.840
> 
> 标签：php, javascript, jquery

我正在使用 jquery 向表单添加字段，使用“添加更多”按钮的“可重复”字段

代码是

```
 $(".add-attacker-scores").click(function() { 

            count = count + 1;

            $('#atacker_score_items').append('<li><span class="sort hndle"><label>team :<input type="text" name="attacker_scores[' + count + '][team]" size="30" value=""/></label><label>flags :<input type="text" name="attacker_scores[' + count + '][flags]" size="10" value=""/></label><label>phone homes :<input type="text" name="attacker_scores[' + count + '][phone]" size="10" value=""/></label><label>Injects :<input type="text" name="attacker_scores[' + count + '][injects]" size="10" value=""/></label><span class="remove">Remove</span></li>');

            var temp = <? echo implode('',explode("\n",Print_attacker_scores('count') )); ?>;
                temp = temp.replace(/count/g, count);
                $('#atacker_score_items').append(temp);

            return false;
        }); 
```

Print_attacker_scores 的代码是

```
function Print_attacker_scores($cnt, $p = null) {
if ($p === null){
    $a = $b = $c = $d = '';
}else{
    $a = $p['team'];
    $b = $p['flags'];
    $c = $p['phone'];
    $d = $p['injects'];
}
return  <<<HTML
<li><span class="sort hndle"></span>
    <label>team :
    <input type="text" name="attacker_scores[$cnt][team]" size="30" value="$a"/>
    </label>

    <label>flags :
    <input type="text" name="attacker_scores[$cnt][flags]" size="10" value="$b"/></label>

    <label>phone homes :
    <input type="text" name="attacker_scores[$cnt][phone]" size="10" value="$c"/></label>

    <label>injects :
    <input type="text" name="attacker_scores[$cnt][injects]" size="10" value="$d"/></label>

    <span class="remove">Remove</span>
</li>
HTML
;
} 
```

在 Firefox 中它可以工作，但在 chrome 中它不起作用。

然后我意识到它抛出了一个错误： NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMDocumentFragment.appendChild]

为什么会这样？我已经从网上复制了代码，但我可以修复它，因为我不明白这些行：

```
var temp = <? echo implode('',explode("\n",Print_attacker_scores('count') )); ?>;
                temp = temp.replace(/count/g, count); 
```

所以这是读取由 Print_scores_function 生成的 html 并为每一行创建一个数组。然后生成一个包含数组中所有项目的字符串。然后替换计数¿？我不明白它为什么这样做。也许还有另一种更简单的方法？

(/count/g, count) 是正则表达式吗？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:31:53.990

这不是一个完整的答案，因为我无法重现 jQuery 错误。但是，就目前而言，您似乎是从 JavaScript 调用 PHP，因为脚本语言存在于堆栈的不同部分，所以这将不起作用。

在我看来，有两种方法可以做到这一点。

**PHP方式**

有一个生成 JavaScript 函数的 PHP 文件，如下所示：

```
<?php
function Print_attacker_scores($cnt, $p = null) {
  if ($p === null){
    $a = $b = $c = $d = '';
  } else{
    $a = $p['team'];
    $b = $p['flags'];
    $c = $p['phone'];
    $d = $p['injects'];
  }

  $html = <<<HTML
<li><span class="sort hndle"></span>
<label>team :<input type="text" name="attacker_scores[$cnt][team]" size="30" value="$a"/></label>
<label>flags :<input type="text" name="attacker_scores[$cnt][flags]" size="10" value="$b"/></label>
<label>phone homes :<input type="text" name="attacker_scores[$cnt][phone]" size="10" value="$c"/></label>
<label>injects :<input type="text" name="attacker_scores[$cnt][injects]" size="10" value="$d"/></label>
<span class="remove">Remove</span>
</li>
HTML;

  return preg_replace('/\s\s+/', ' ', $html);
}
?>
<script type="text/javascript">
var count = 0;

$(".add-attacker-scores").click(function() {
  count++;

  var temp = '<? echo Print_attacker_scores('count'); ?>';
  temp = temp.replace(/count/g, count);
  $('#atacker_score_items').append(temp);

    return false;
});
</script> 
```

`var temp =`因为您需要将标记作为 JavaScript 字符串，所以我在作业周围添加了引号。该函数现在还删除任何换行符，因为该函数返回了无效的多行 JavaScript 字符串 - 请参阅[从字符串中删除新行](https://stackoverflow.com/questions/3760816/remove-new-lines-from-string)

您是正确的，正在用JavaScript 变量替换单词“count”的`temp.replace(/count/g, count)`所有出现（部分），每次调用函数时都会递增。`g``count`

此 PHP 脚本在由带有 PHP 处理器模块的 Web 服务器提供服务时会生成有效的 JavaScript：

```
<script type="text/javascript">
var count = 0;
$(".add-attacker-scores").click(function() {
  count ++;

  var temp = '<li><span class="sort hndle"></span> <label>team :<input type="text" name="attacker_scores[count][team]" size="30" value=""/></label> <label>flags :<input type="text" name="attacker_scores[count][flags]" size="10" value=""/></label> <label>phone homes :<input type="text" name="attacker_scores[count][phone]" size="10" value=""/></label> <label>injects :<input type="text" name="attacker_scores[count][injects]" size="10" value=""/></label> <span class="remove">Remove</span> </li>';
  temp = temp.replace(/count/g, count);
  $('#atacker_score_items').append(temp);

    return false;
});
</script> 
```

我在 HTML 中使用过的

```
<ul id="atacker_score_items" class="custom_repeatable ui-sortable"></ul>
<a href="#" class="add-attacker-scores">add more</a>​ 
```

创建[**这个演示**](http://jsfiddle.net/xjwr9/1/)

**（纯）JavaScript 方式**

使用已经包含生成的 HTML 并处理“计数”→数字变量替换的现有函数。在这个版本中，您不需要 PHP 函数调用或正则表达式。

```
var count = 0;

$(".add-attacker-scores").click(function() { 
    count++;

    $('#atacker_score_items').append('<li><span class="sort hndle"><label>team :<input type="text" name="attacker_scores[' + count + '][team]" size="30" value=""/></label><label>flags :<input type="text" name="attacker_scores[' + count + '][flags]" size="10" value=""/></label><label>phone homes :<input type="text" name="attacker_scores[' + count + '][phone]" size="10" value=""/></label><label>Injects :<input type="text" name="attacker_scores[' + count + '][injects]" size="10" value=""/></label><span class="remove">Remove</span></li>');

    return false;
});​ 
```

希望这可以帮助！如果您仍然收到 JavaScript 错误，请告诉我，因为我无法重现该问题。

# javascript - 通过 javascript 处理登录（单点登录）

> ID：13568840
> 
> 赞同：1
> 
> 时间：2012-11-26T16:21:42.953
> 
> 标签：javascript

目前，我正在使用自由职业者通过网络应用程序构建单点登录（登录集成）。

我的自由职业者使用 javascript 来处理和传输数据，我有点担心，因为 javascript 是客户端脚本。目前，我已经使用 SSL。他使用 javascript 构建的一些“交易”： - 在后台通过 javascript 获取数据（他通过 url 参数发送密码和用户名） - 在 javascript 中的函数之间发送用户名和密码

想听听你的意见，安全吗？SSL 是否保护通过 javascript 传输的数据？

只是有点担心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:33:09.270

它发送的方法不太相关。我想你是通过 AJAX 来做的，对吧？只确保使用 POST 方法，不要使用 GET 方法。

# jquery - 为什么我可以在 Chrome 中访问 JSON 对象，但不能在 Firefox 中访问？

> ID：13568841
> 
> 赞同：0
> 
> 时间：2012-11-26T16:21:47.980
> 
> 标签：jquery, json, firefox, google-chrome

我有以下查询字符串：

```
query = 'https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20Precinct%20FROM%201Kj-5ett9nIpkr2-gkof0cUGiaZm1BDVZx9zv-iQ%20WHERE%20ST_INTERSECTS(geometry,%20RECTANGLE(LATLNG(40.7549937,%20-73.98841900000002),%20LATLNG(40.7549937,%20-73.98841900000002)))&key=AIzaSyBJ1SHkB7EWWVSyDiPUA1mWZDEKt7gISDk' 
```

这将返回以下带有 HTTP GET 请求的对象：

```
{
 "kind": "fusiontables#sqlresponse",
 "columns": [
  "Precinct"
 ],
 "rows": [
  [
   "76"
  ]
 ]
} 
```

所以我正在尝试使用 jQuery 将其获取到网络浏览器中。这在 Firefox 和 Chrome 中运行良好：

```
$.get(precinctQuery, function(data){console.log(data)}); 
```

但 Firefox 不喜欢这样：

```
$.get(precinctQuery, function(data){console.log(data.rows[0][0])}); 
```

或这个：

```
$.get(precinctQuery, function(data){console.log(data.['rows'][0][0])}); 
```

两次，Firefox 都说结果是未定义的。Chrome 返回预期结果“76”。

Chrome 是否在幕后修复此代码以使其正常工作？为什么 Firefox 不喜欢它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:33:02.723

您需要`json`在函数上添加优势`$.get`，如下所示：

```
$.get(precinctQuery, function(data)
{
    console.log(data)
}, 'json'); 
```

这将确定数据的格式，`json`过滤器将为您解析 JSON，然后将其返回为`data`. `$.getJSON`会使代码更短，但它是上述代码的快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:28:56.987

您忘记将 JSON 数据解析为可读对象，以下代码可以正常工作：

```
query = 'https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20Precinct%20FROM%201Kj-5ett9nIpkr2-gkof0cUGiaZm1BDVZx9zv-iQ%20WHERE%20ST_INTERSECTS(geometry,%20RECTANGLE(LATLNG(40.7549937,%20-73.98841900000002),%20LATLNG(40.7549937,%20-73.98841900000002)))&key=AIzaSyBJ1SHkB7EWWVSyDiPUA1mWZDEKt7gISDk';
$.get(query, function(data)
    {
        var obj = jQuery.parseJSON(data);
        console.log(obj.rows[0][0]);
    }
); 
```

# excel - 这个if语句怎么有太多参数

> ID：13568842
> 
> 赞同：2
> 
> 时间：2012-11-26T16:21:48.273
> 
> 标签：excel, excel-formula

我下面的*IF*语句不断出错，指出参数太多。

为什么是这样？任何人都可以在下面的声明中看到任何错误吗？

```
=IF(G7="EUR",H7/1.15,L7,IF(G7="USD",H7/1.35,L7,IF(G7="AUD",H7/1.35,L7,IF(G7="CAD",H7/1.35,L7,IF(G7="NOK",H7/8.8,L7))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:25:32.443

中频格式：

```
IF(test, exec if true, exec if false) 
```

您所有的 IF 都有 4 个参数。

如果我了解您要做什么，您应该尝试：

```
=IF(G7="EUR",H7/1.15,IF(G7="USD",H7/1.35,IF(G7="AUD",H7/1.35,IF(G7="CAD",H7/1.35,IF(G7="NOK",H7/8.8,L7))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:25:52.727

你所有的 IF 都有太多的参数 - `",H7/1.15,L7,IF`- 的结构`if`是：

```
=If(condition, If True, If False) 
```

只允许 2 个逗号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:24:47.003

它们都有 4 个参数。这太多了。他们应该只有三个。

我不知道您是如何计划的，但我的猜测是解决方案是：

`=IF(G7="EUR",H7/1.15,IF(G7="USD",H7/1.35,IF(G7="AUD",H7/1.35,IF(G7="CAD",H7/1.35,IF(G7="NOK",H7/8.8,L7)))))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:59:57.393

在这些情况下使用 VLOOKUP 函数可能更简单 - 在工作表的某处设置一个两列表，第 1 列中的货币和第 2 列中每种货币的除数/转换金额 - 将表命名为 CurrTable 然后你可以使用这个公式

`=IFERROR(H7/VLOOKUP(G7,CurrTable,2,0),L7)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T16:26:46.713

您的`IF`陈述似乎包含太多参数，应该只有一个条件，一个真值和一个假值。请参阅[MSDN](http://office.microsoft.com/en-gb/excel-help/if-HP005209118.aspx)。

# .net - IEnumerator 的意义何在？

> ID：13568845
> 
> 赞同：0
> 
> 时间：2012-11-26T16:22:02.170
> 
> 标签：.net, for-loop, ienumerator

[这是一个很好的视频](http://www.youtube.com/watch?v=jd3yUjGc9M0)，解释了它是什么以及它们之间的区别，但它似乎有一个根本性的缺陷，你不能跳过这个列表；它甚至缺少 Previous() 方法。

如果找到匹配项，我将列表发送到函数，而不是原始的 for...next 从下一个索引开始，我只是返回在函数中找到下一个匹配项的行，因为它有已经完成了一个辅助循环来读取每个“Hello”块之间的所有行。

我不能用像 IEnumerator 这样的迭代类来做这些。我错过了什么吗？

```
For row As Integer = 0 To dataList.Count - 1
    If row <> -1 Then
       If dataList.Item(row) = "Hello" Then row = SayHello(row)
    End If
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:25:13.707

> 你不能跳过列表

你说这是一个缺陷。这不是当您不想允许跳过列表时。

人们对列表所做的第一件事就是迭代它们——这是所有类型集合的最低公分母。

如果您确实需要跳过，如您的示例所示，请不要使用`IEnumerator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:30:42.470

IEnumerator 的要点是一次只服务一个对象，这意味着您可以节省内存和/或时间。要使用列表，您需要先填写列表。即使您并不真正需要完整列表，但在每次迭代时始终使用单个项目。

```
Private Iterator Function AllIntegers() As IEnumerable(Of Integer)
    Dim i = Integer.MinValue
    While i < Integer.MaxValue
        Yield i
    End While
End Function 
```

现在你可以做

```
For each i in AllIntegers 
```

现在尝试将所有这些整数放入 List(Of Integer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:26:33.677

接口（和伴随的`IEnumerable`接口）的目的是提供一种只进的机制来迭代一个集合（或类似的结构）。鉴于此，我认为说它有“根本缺陷”并不公平，因为你不能跳过或倒车，就像说紧凑型汽车有根本缺陷是公平的，因为你可以' t 用它来运输大型农场动物。

或者，对于那些可能不喜欢汽车类比的人来说，这类似于说香蕉有一个根本缺陷，因为它（在普通的、未冷冻的状态下）不能用来敲钉子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:28:41.107

枚举的定义就是一一提及。枚举是从顶部开始并查看列表中的每个项目。这就是枚举。因此，可枚举的东西将是您可以从顶部一一查看的东西。IEnumerable 这个名字非常合适。

# plugins - CAKEPHP 1.2/1.3 中的前缀路由和插件

> ID：13568847
> 
> 赞同：1
> 
> 时间：2012-11-26T16:22:07.320
> 
> 标签：plugins, routes, cakephp-1.3, prefix, cakephp-1.2

`routes.php`有没有人有在 CakePHP 中使用插件和前缀路由时设置表的示例

例如

商店控制器，使用`manage`前缀为卖家访问某些管理功能。

所以`/manage/shops/edit`映射`manage_edit`到`shops_controller.php`

然后把它放在 `/plugins/shops`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:33:50.977

在您`core.php`有一个名为的配置值：`Routing.prefixes`您需要在那里设置**管理**前缀：

`Configure::write('Routing.prefixes', array('admin', 'manage'));`

*现在对/manage/controllerName/actionName*等 URL 的所有调用都将转到：`controllerName::manage_actionName`

*并且对/admin/controllerName/actionName*等 URL 的所有调用都将转到： `controllerName::admin_actionName`

对于`routes.php`文件中的插件路由：

```
Router::connect('/shops/edit', array('plugin' => 'pluginName', 'controller' => 'shops', 'action' => 'edit')); 
```

这就是所有需要的。

# html5-video - 如何在 android 中从 HTML 5 访问谷歌驱动器

> ID：13568851
> 
> 赞同：0
> 
> 时间：2012-11-26T16:22:29.237
> 
> 标签：html5-video, google-drive-api

我有一个 HTML 5 可以打开 android 相机并拍照，我需要将这张照片存储在 Google 驱动器中并取回唯一的 URL（用于 google 文档）。怎么做到呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:45:41.407

适用于 Android 的 Drive 快速入门示例说明了如何编写一个使用设备相机拍照然后自动将这些照片上传到 Drive 的应用程序：

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

这并不完全符合您的要求，但我认为这就是您开始使用它所需的全部内容。

# security - symfony2 security.yml 仅在开发环境中工作

> ID：13568853
> 
> 赞同：1
> 
> 时间：2012-11-26T16:22:34.470
> 
> 标签：security, symfony, environment

在我的第一个 symfony 项目上工作时，我遵循了关于安全机制的教程。我开始在我的防火墙中使用“http_basic”模式。奇怪的是它只能在开发模式下工作，而不是在生产模式下工作。这是我的`security.yml`：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                    test: {password: test, roles: [ 'ROLE_USER'] }
                    admintest: { password: admintest, roles: [ 'ROLE_ADMIN' ] }

    firewalls:

        prod:
            pattern: ^/
            http_basic:
                realm: "Secured B2B Area"
            security: true

    access_control:
        - { path: ^/B2B, roles: ROLE_USER }
        - { path: ^/, roles: ROLE_ADMIN } 
```

我用 NetBeans 创建了这个项目。

我看到的是，如果我使用 path:`app_dev.php/B2B`我可以看到 login/pwd 界面并且一切正常，但是如果我使用 path `app.php`，我可以直接访问我的站点而无需任何授权请求。进行任何`security.yml`更改后，我使用以下命令清除了缓存：`php console cache:clear --env=prod --no-debug`

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:28:52.760

DEV 和 PROD 环境使用相同的会话上下文。因此，您必须退出（从任何环境）才能看到登录表单。

# php - 在 Symfony2 应用程序中添加翻译功能时出现会话错误

> ID：13568857
> 
> 赞同：0
> 
> 时间：2012-11-26T16:22:40.827
> 
> 标签：php, session, symfony, translation

在我的 Symfony 应用程序中添加翻译功能时出现错误：这是错误：

> 致命错误：在第 41 行调用 C:\wamp\www\Symfony2\src\MyApp\FilmothequeBundle\Controller\DefaultController.php 中未定义的方法 MyApp\FilmothequeBundle\Controller\DefaultController::get()

第 41 行是：

```
$this->container->get('session')->setLocale($langue); 
```

它在这个控制器功能中：

```
public function choisirLangueAction($langue = null)
{
    if($langue != null)
    {
        // On enregistre la langue en session
        $this->container->get('session')->setLocale($langue);
    }
    // on tente de rediriger vers la page d'origine
    $url = $this->container->get('request')->headers->get('referer');
    if(empty($url)) {
        $url = $this->container->get('router')->generate('myapp_accueil');
    }
    return new RedirectResponse($url);
} 
```

当我按下此链接时出现错误：

```
<a href="{{ path('myapp_choisir_langue', {'langue' : 'fr'}) }}">FR</a> 
```

这是匹配的路由文件的一部分：

```
myapp_choisir_langue:
   pattern: /choisir-langue/{langue}
   defaults: { _controller: MyAppFilmothequeBundle:Default:choisirLangue, _locale: fr} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:01:25.150

你可以`->get('service_name')`直接从你的控制器调用[symfony2 doc](http://symfony.com/doc/2.0/book/controller.html#accessing-other-services)。

# c - epoll_wait 总是设置 EPOLLOUT 位？

> ID：13568858
> 
> 赞同：16
> 
> 时间：2012-11-26T16:22:46.593
> 
> 标签：c, linux, sockets, epoll

在侦听套接字上，我设置了`EPOLLIN`位，但是在客户端连接上，我将`EPOLLIN | EPOLLOUT`位设置为`struct epoll_event`：

```
struct epoll_event ev;

ev.data.fd = fd;
ev.events = EPOLLIN | EPOLLOUT;
if (epoll_ctl(evs->epoll_fd, EPOLL_CTL_ADD, fd, &ev) < 0)
     ... 
```

这就是我测试位的方式：

```
if ((events & EPOLLIN) == EPOLLIN)
     ...
if ((events & EPOLLOUT) == EPOLLOUT)
     ... 
```

我也尝试过：

```
if (events & EPOLLIN)
     ...
if (events & EPOLLOUT)
     ... 
```

两种方式总是正确的！

然而，每当我在我的 epoll fd 上调用 epoll_wait 时，返回的活动文件描述符总是设置两个位，即使 send() 没有返回 EAGAIN，但是当我尝试 recv() 时它返回 EAGAIN。

我不知道当 recv() 返回 EAGAIN 时我应该做什么，我应该删除`EPOLLOUT`标志还是什么？

@Nikolai N Fetissov 要求的更多代码：

```
static int get_active_fd(events *evs, int index, sstate_t *flags)
{
    uint32_t events = evs->events[index].events;
    int fd = evs->events[index].data.fd;;

    if ((events & EPOLLERR) == EPOLLERR || (events & EPOLLHUP) == EPOLLHUP) {
        close(fd);
        return -1;
    }

    if (events & EPOLLIN)
        *flags |= DATA_IN;

    return fd;
}

void sockset_add(events *evs, int fd)
{
    struct epoll_event ev;
    ...
    ev.data.fd = fd;
    ev.events = EPOLLIN;
    if (epoll_ctl(evs->epoll_fd, EPOLL_CTL_ADD, fd, &ev) < 0)
        eprintf("sockset_add(): epoll_ctl(%d) returned an error %d(%s)\n",
                fd, errno, strerror(errno));
} 
```

然后稍后我调用 epoll_wait()：

```
if (flags & DATA_IN) {
       /* try to read which is impossible because this is never set.  */ 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-26T16:27:49.887

我想你把它弄反了。`EPOLLOUT`除非您从写入尝试中获得，否则不要包含`EAGAIN`，并在您成功将字节写入套接字时将其删除。

这基本上意味着只要套接字在内核发送缓冲区中有空间，套接字就*始终是可写的。*

### 编辑0：

您有两个数据流——*输入*和*输出*。

`EPOLLIN`您正在通过包含在标志中来等待输入。如果从该标志返回时`epoll_wait(2)`未设置，则某个事件发生在某个其他套接字上，或者该套接字有其他事件。将标志保留在事件中，除非您遇到错误（这意味着您仍然对套接字上的输入感兴趣）。

您不必等待输出（因为这是您的操作），您只需写入套接字，但如果溢出套接字发送缓冲区，您`EAGAIN`将从`send(2)`or获得`write(2)`。在这种情况下，您开始等待输出成为可能（内核耗尽套接字发送缓冲区，从而为您发送更多空间）包括`EPOLLOUT`. 一旦你得到它，将你的挂起输出字节写入套接字，如果你成功，`EPOLLOUT`从事件中删除。

现在`EPOLLET`表示*边缘触发的*等待，这意味着每次状态更改时您所需的事件只会发出一次信号（例如从“无输入”到“有输入”）。在这种模式下，您应该循环读取输入字节，直到获得`EAGAIN`.

希望这可以帮助。

# c - 二叉树中的插入错误或指针错误

> ID：13568867
> 
> 赞同：2
> 
> 时间：2012-11-26T16:23:14.210
> 
> 标签：c, pointers, binary-tree

当我尝试将一个数字添加到我的二叉树中时，会出现著名的**Segmentation Fault**。

我猜错误是函数中的指针`inserir_no`。也许我应该使用指针辅助。

```
#include <stdio.h>
#include <stdlib.h>

/* create a node */

struct no {
   int info;
   struct no *esq;
   struct no *dir;
};

/* function prototypes */

void inserir_no(struct no *arv, int x);

void inserir_no(struct no *arv, int x)
{
    if(arv == NULL) {
        printf("foi");
        arv = (struct no *) calloc(1, sizeof(struct no));
        arv->info = x;
        arv->esq = NULL;
        arv->dir = NULL;
    }
    else if(x < arv->info) {
        inserir_no(arv->esq, x);
    }
    else {
        inserir_no(arv->dir, x);
    }
}

int main(void)
{
    struct no *a;
    int valor;

    a = NULL;

    /* fazer um menu depois */
    scanf("%d", &valor);
    inserir_no(a, valor);

    printf("\nDADOS:\n%d", a->info);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:26:04.830

`arv`问题是您在插入功能中所做的更改

```
if(arv == NULL) {
    printf("foi");
    arv = (struct no *) calloc(1, sizeof(struct no));
    arv->info = x;
    arv->esq = NULL;
    arv->dir = NULL;
} 
```

不要更改调用者中传入的指针。该函数接收的是存储在调用者变量中的地址的副本，因此在您`calloc`记忆时只有副本被覆盖。

要使函数更改调用者中的变量，请使其接受指向指针的指针，

```
void inserir_no(struct no **arv, int x); 
```

并传递指针的地址。

```
inserir_no(&a, valor); 
```

在`main`, 和

```
else if(x < arv->info) {
    inserir_no(&(*arv)->esq, x);
}
else {
    inserir_no(&(*arv)->dir, x);
} 
```

在递归调用中，以及

```
if(*arv == NULL) {
    printf("foi");
    *arv = (struct no *) calloc(1, sizeof(struct no));
    (*arv)->info = x;
    (*arv)->esq = NULL;
    (*arv)->dir = NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:27:38.523

Check the value of `a` right before the last `printf()` in `main()`, it's still `NULL`. You need to pass a reference of `a` to the function for the memory you allocated to be use able back in `main()`

In the function `inserir_no()`, you need to update to take a pointer to a pointer to a `struct no`:

```
void inserir_no(struct no **arv, int x) 
```

In the function itself you need to update each reference to `arv` for a single deference:

```
if(*arv == NULL) {
    printf("foi");
    *arv = (struct no *) calloc(1, sizeof(struct no));
    (*arv)->info = x;
    //... and the rest, just didn't want to finish it off 
```

Then In `main()` you pass the address of your struct:

```
inserir_no(&a, valor); 
```

Two other notes for you:

1.  You have a memory leak right now, you need to `free()` your allocated memory before you leave
2.  You don't need the extra prototype if the function is declared before it's used. (in this case you declared it at the top, then used it below in `main()` so that's unneeded)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:31:04.480

call as `inserir_no(&a, valor);`

and change the signature of function to `inserir_no(struct no **arv , int x)`

then it will work because of passing address rather than value of pointer.

`*arv` will be the `pointer to struct no`so use that at every place instead of only `arv`

# dialog - 如何单击弹出对话框窗口

> ID：13568869
> 
> 赞同：3
> 
> 时间：2012-11-26T16:23:17.550
> 
> 标签：dialog, automation, window, applescript

我在编写代码以自动运行 DiskWarrior 时遇到问题。问题是当我打开应用程序时，会弹出一个安全代理对话框并询问我的用户名和密码，我不知道如何“单击”进入安全代理窗口，以便输入用户名和密码。我知道如何对名称/密码进行编码，但我不知道如何“单击”进入 SercuirtyAgent 窗口。我曾尝试使用 UI 检查器，但到目前为止还没有运气。有谁知道如何编写“单击”SecurityAgent 窗口的代码

任何/所有帮助和反馈将不胜感激。

这是我到目前为止所拥有的，仍在试图弄清楚：

```
tell application "DiskWarrior"
    open
end tell
delay 1
tell application "System Events"
    tell process "SecurityAgent"
        click text field 1
        delay 3
        keystroke "a user name"
                delay 3
                keystroke tab
                delay 3
                keystroke "a password"
                delay 3
                keystroke return
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:41:00.967

您可以使用`set frontmost to true`或聚焦它`activate application "SecurityAgent"`。

```
tell application "System Events" to tell process "SecurityAgent"
    set frontmost to true
end 
```

您还可以使用 UI 脚本设置密码字段的值，然后单击确定按钮：

```
tell application "System Events" to tell process "SecurityAgent"
    set value of text field 2 of scroll area 1 of group 1 of window 1 to "password"
    click button 2 of group 2 of window 1
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T06:00:48.120

对于 Yosemite，SecurityAgent 对话框有所不同

```
tell application "DiskWarrior"
    open
end tell
delay 1
tell application "System Events"
    tell process "SecurityAgent"
        set value of text field 2 of window 1 to "yourPassword"
        click button 2 of window 1
    end tell
end tell 
```

# ruby-on-rails - Rails：如果在 check_box_tag 中没有选择任何内容，则默认选择

> ID：13568872
> 
> 赞同：1
> 
> 时间：2012-11-26T16:23:32.503
> 
> 标签：ruby-on-rails, ruby, checkbox, controller, action

我有一个应用程序，用户可以在其中将项目输入数据库。

有一个选项，他们可以为他们的项目选择多种不同的技术。目前，如果用户未选择至少 1 项技术，应用程序会标记错误。

我想改变这一点，这样如果他们不选择一种技术，它就会自动下降为“其他”。

**这是我的项目控制器操作，新建和创建：**

```
def new
    @project = Project.new
        @technol = Technol.new(params[:tech])

        @all_technols = Technol.order('tech ASC') 
        @all_technols = Technol.all
        tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

        @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

def create  
    @project = Project.new(params[:project])
        @project.client = params[:new_client] unless params[:new_client].blank?
        @project.industry = params[:new_industry] unless params[:new_industry].blank?
        @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

if !params[:technols].nil?

            params[:technols][:id].each do |tech|

                if !tech.empty?

                    @project_technol = @project.projecttechnols.build(:technol_id => tech) 
                    end
            end

end 
```

**这是技术领域的新观点**

```
<ul> 

<% @all_technols.each do |technol| %> 

<li class="split"> 
<%= check_box_tag "project[technol_ids][]", technol.id,  @project.technols.include?(technol) %> 
<%= technol.tech %> 
</li> 

<% end %>
</ul> 
```

技术表中“其他”的技术 ID 为“18”。那么有没有办法说，如果没有选择技术，那么`:technol_id => ["18"]`。

我之前得到了帮助，有人建议我添加这个：

```
def create
  ...
  technol_ids = params[:technol_ids].blank? ? [18] : params[:technol_ids]
  technol_ids.each do |id|
  ...
  end
  ...
end 
```

I am having trouble getting this to work. I don't think I am putting it in the right bit of my code. I'm still new to rails, so please remember this when trying to help. Thanks very much

**EDIT**

With no technols_id selected

```
Processing by ProjectsController#create as HTML
  Parameters: {"utf8"=>"Ô£ô", "authenticity_token"=>"8Hgc1GXqNhWkzO3Wgkfpf6z+fdImf6QvAv0XLbP0a5g=", "project"=>{"project
_name"=>"Test", "archive"=>"0", "username"=>"test", "status"=>"Active", "exception_pm"=>"", "client"=>"", "business_d
iv"=>"", "project_owner"=>"", "start_date"=>"11-12-2012", "first_name"=>"test", "last_name"=>"test", "fullname"=>
"test test", "entry_date"=>"2012-11-26", "end_date"=>"19-12-2012", "techinfo"=>"Test", "role"=>"", "industry"=>""
, "summary"=>"Test", "lessons_learned"=>"Test", "customer_benefits"=>"Test", "financials"=>"┬ú500,000 - ┬ú999,999 "}, "n
ew_exception_pm"=>"Test", "new_client"=>"Test", "new_business_div"=>"Test", "new_project_owner"=>"Test", "new_role"=>"Te
st", "new_industry"=>"Test", "commit"=>"Save New Project"} 
```

**With 1 technols_id**

```
Started POST "/projects" for 192.168.16.127 at 2012-11-26 16:47:27 +0000
Processing by ProjectsController#create as HTML
  Parameters: {"utf8"=>"Ô£ô", "authenticity_token"=>"8Hgc1GXqNhWkzO3Wgkfpf6z+fdImf6QvAv0XLbP0a5g=", "project"=>{"project
_name"=>"Test", "archive"=>"0", "username"=>"Test", "status"=>"Active", "exception_pm"=>"", "client"=>"", "business_d
iv"=>"", "project_owner"=>"", "start_date"=>"11-12-2012", "first_name"=>"Test", "last_name"=>"McLaughlin", "fullname"=>
"Test Test", "entry_date"=>"2012-11-26", "end_date"=>"20-12-2012", "technol_ids"=>["1"], "techinfo"=>"Test", "rol
e"=>"", "industry"=>"", "summary"=>"Test", "lessons_learned"=>"Test", "customer_benefits"=>"Test", "financials"=>"┬ú250,
000 - ┬ú499,999 "}, "new_exception_pm"=>"Test", "new_client"=>"Test", "new_business_div"=>"Test", "new_project_owner"=>"
Test", "new_role"=>"Test", "new_industry"=>"Test", "commit"=>"Save New Project"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:46:28.807

First of all, the name of the field should be used to get the parameters, use like my example. You are receiving an array of tech ids, right? So instead of using if to check nil, use this:

```
 params[:project][:technol_ids] ||= [18] 
```

It will turn this parameter into array if it is nil.

```
params[:project][:technol_ids].each do |tech_id|
   @project_technol = @project.projecttechnols.build(:technol_id => tech)
end 
```

# ruby - 如何使用“wget”安装 RVM？

> ID：13568877
> 
> 赞同：2
> 
> 时间：2012-11-26T16:23:44.673
> 
> 标签：ruby, curl, rvm, wget

我想将 RVM 安装到我的主文件夹，并且所有安装说明或脚本都使用`curl`，但无法`curl`在系统上安装（权限不足）。

是否可以安装 RVM `wget`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:32:42.337

可能吗？当然，您可以克隆存储库并在 Wayne 的代码中进行所有必要的更改。它*只是*一个 bash 脚本。

但它被列为一项要求，并在内部使用，因此可能比您愿意为此做的更多。这是他的 RVM 安装程序文件中的一个片段，向您展示了他如何使用它，以及最初的 curl 命令来启动，让您了解需要更改的内容。

```
{
  curl -s https://api.github.com/repos/wayneeseguin/rvm/tags |
    sed -n '/"name": / {s/^.*".*": "\(.*\)".*$/\1/; p;}' |
    sort -t. -k 1,1n -k 2,2n -k 3,3n -k 4,4n -k 5,5n |
    GREP_OPTIONS="" \grep "^${1:-}" | tail -n 1
} 
```

# javascript - 使用 jquery 将类设置为元素

> ID：13568879
> 
> 赞同：0
> 
> 时间：2012-11-26T16:23:45.220
> 
> 标签：javascript, jquery, css

我得到以下HTML：

```
<ul class="specs">
        <li>
            <div class="trigger">› City (2)</div>
            <div class="cityByLocation">
                <ul>
                    <li class="cityInfo">
                        <div class="cityName" style="float: left;">
                            › New York
                        </div>
                        <div class="cityDistance" style="float: left;">
                            430 miles
                        </div>
                        <div class="btn-take"></div>
                    </li>
                    <li class="cityInfo">
                        <div class="cityName" style="float: left;">
                            › Chicago
                        </div>
                        <div class="cityDistance" style="float: left;">
                            430 miles
                        </div>
                        <div class="btn-take"></div>
                    </li>
                </ul>
            </div>
        </li>
<ul> 
```

当我单击“City (2)”时，会出现下面的两个 div。但是，我想为他们添加一个类。

这是我现在的js：

```
$('.trigger').click(function ()
    {
        $(this).siblings('div').eq($(this).index()).toggle();

        $(this).eq($(this).index()).toggleClass("locationSelected");

        return false;
    }); 
```

这在名称“City (2)”后面添加了蓝色背景，但不是我想要的底层 div。

它是类“cityByLocation”的 div，我想将类 locationSelected 添加到。

编辑：

我最终使用

> $('.trigger').click(function () { $(this).siblings('div').eq($(this).index()).toggle(); $(this).toggleClass(" locationSelected"); $(this).siblings('div').eq($(this).index()).toggleClass("locationSelected");
> 
> ```
> return false; }); 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:25:29.353

而不是使用`toggleClass`，使用`addClass`

```
$(this).eq($(this).index()).addClass("locationSelected"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:26:39.283

```
$(this).siblings('.cityByLocation').addClass("locationSelected"); 
```

如果您只想添加类，请使用它，但`toggleClass`如果您想在交替点击时将其删除，请使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:31:06.053

我建议，假设您想将类名添加到`div`嵌套在相邻元素中的元素`div`中`ul`：

```
$(this).next('.cityByLocation').find('div').addClass('locationSelected'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:25:02.630

```
.addClass("locationSelected"); 
```

# ios - 在不使用当前位置的情况下使用 Titanium MapView - iOS

> ID：13568880
> 
> 赞同：0
> 
> 时间：2012-11-26T16:23:45.513
> 
> 标签：ios, location, titanium, android-mapview, appcelerator

我正在使用 Titanium 2.1.4 SDK 开发 iOS 应用程序。我在以服务器发送的位置为中心的 MapView 上显示了几个注释。我不想知道用户的位置。但是，当带有 MapView 的窗口打开时，iPhone 会显示一个对话框，说明应用程序想要知道用户位置，即使在向 Mapview 添加**userLocation:false**参数之后也是如此。

如何禁用该弹出对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:58:45.557

不幸的是，没有办法摆脱这个弹出窗口。它使用本机核心功能，它会在您打开地图后立即出现..

# actionscript-3 - 未定义的方法 playVideo (actionScript)

> ID：13568881
> 
> 赞同：0
> 
> 时间：2012-11-26T16:23:51.677
> 
> 标签：actionscript-3, flash

我想通过 javascript 控制我的视频（Flash 播放器），

但是我的动作脚本部分有问题，请你帮帮我

这是我的动作脚本：

```
import flash.external.ExternalInterface;
import fl.video.FLVPlayback;

ExternalInterface.addCallback("playMyVideo", playVideoFromJavaScript);
ExternalInterface.addCallback("pauseMyVideo", pauseVideoFromJavaScript); 
```

第 8 行

```
function playVideoFromJavaScript():void {
flvPlayer.playVideo();
} 
```

第 12 行

```
function pauseVideoFromJavaScript():void {
flvPlayer.pauseVideo();
} 
```

这是错误：

场景 1，图层“动作”，第 1 帧，第 8 行 1061：通过静态类型 fl.video:FLVPlayback 的引用调用可能未定义的方法 playVideo。

场景 1，图层“动作”，第 1 帧，第 12 行 1061：通过静态类型 fl.video:FLVPlayback 的引用调用可能未定义的方法 pauseVideo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:32:30.127

`fl.video:FLVPlayback`没有`playVideo()`nor`pauseVideo()`方法。

使用`play()`and`pause()`代替。

[http://livedocs.adobe.com/flash/9.0_it/ActionScriptLangRefV3/fl/video/FLVPlayback.html](http://livedocs.adobe.com/flash/9.0_it/ActionScriptLangRefV3/fl/video/FLVPlayback.html)

# google-apps-script - 如何阻止 Apps 脚本运行？

> ID：13568884
> 
> 赞同：5
> 
> 时间：2012-11-26T16:24:02.567
> 
> 标签：google-apps-script, triggers

我不断收到邮件，一行一行地写着以下内容：

> 2012 年 11 月 24 日下午 7:06 timeDriven 找不到工作表：FormEmailer（第 656 行）基于时间的 2012 年 11 月 24 日下午 7:06

我想停止这些电子邮件，显然正在运行脚本“FormEmailer 的副本”。我已经删除了正在使用它的工作表，但我无法让它停止运行。我不再想要这些电子邮件，也不知道如何阻止它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:09:22.870

基本上，计划的触发器正在继续运行。

电子邮件中是否有链接可以让您查看所有触发器？那应该列出触发器，您应该可以在那里删除它们。我有一段时间没有看到一个，忘记了所有的细节。

如果没有，那么更手动的方法是 -

1.  访问[http://script.google.com](http://script.google.com)
2.  单击开始脚本按钮
3.  选择空白项目模板
4.  在编辑器菜单中，转到 Resources -> All Your Triggers
5.  应该看到“timeDriven”，你应该可以删除它。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-21T16:25:58.493

查看 -> 执行
然后将鼠标悬停在正在运行的任务上，单击三点并单击“终止”。

# c# - windows phone，从 txt 文件读取级别

> ID：13568888
> 
> 赞同：0
> 
> 时间：2012-11-26T16:24:19.133
> 
> 标签：c#, windows-phone-7, xna-4.0, filereader

我正在开发一个 windows phone 7 游戏，我已经将关卡保存在一个文本文件中，我想将它加载到一个二维数组中，但是没有 txt 文件的内容导入器，我使用了隔离存储管理器

```
protected void read_lvl()
    {
        IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
        IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("myFile.txt", FileMode.Open, FileAccess.Read);
        using (StreamReader reader = new StreamReader(fileStream))
        {    //Visualize the text data in a TextBlock text

            while (!reader.EndOfStream)
            {
                //for each row
                for (int i = 0; i < rows; i++)
                {
                    //read in the line
                    string myLine = reader.ReadLine();
                    //take out the commas
                    string[] row = myLine.Split(',');

                    //convert to string to ints
                    //and feed back into array
                    int[] nRow = new int[row.Length];
                    for(int r=0; r<columns;r++){
                        nRow[r] =Convert.ToInt32(row[r]);
                        myreadArray[i, r] = nRow[r];
                    }

                }
            }

        }
    } 
```

这对于加载保存的游戏状态等很好但是我想在多个`.txt`文件中有多个级别并尝试使用它来代替：

```
 //stream from file
        Stream stream = TitleContainer.OpenStream("myFile.txt");
        //make a stream reader from the stream
        using (StreamReader sreader = new StreamReader(stream)) 
```

但它抛出了同样的错误：没有处理这种文件类型的进口商。

做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:32:53.617

you can do that with isolated storage only just by changing the name of file "myfile1.txt" and change the attribute FileMode.OpenOrCreate if you are not having it already.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:34:31.970

不知道这是否会对您有所帮助，但这就是我将游戏地图加载到我的游戏中的方式（x 和 y 是我的网格坐标）：

```
var assembly = System.Reflection.Assembly.GetExecutingAssembly();
var stream = assembly.GetManifestResourceStream("View.Maps.Breakout_" + _breakoutSelection + ".txt");

using (var streamReader = new StreamReader(stream))
{
    int y = 0;

    while (!streamReader.EndOfStream)
    {
        string data = streamReader.ReadLine();

        int x = 0;

        foreach (var mapSquare in data)
        { code here }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:29:05.163

您应该能够添加文件，将“构建操作”设置为“无”，并将“复制到输出目录”设置为“如果较新则复制”并使用加载它

```
XDocument.Load(TitleContainer.OpenStream(@"path-to-file.txt")); 
```

[如此处](http://xboxforums.create.msdn.com/forums/p/50321/303431.aspx)所示。

希望这可以帮助！

# java - 使用词性标注器计算每个词性的数量

> ID：13568895
> 
> 赞同：0
> 
> 时间：2012-11-26T16:24:37.467
> 
> 标签：java, string, text-parsing, part-of-speech

我想计算例如副词，但不同类型有不同的标签，“_RB”、“_RBR”和“_RBS”。我尝试使用 3 个序列中的子字符串，但这消除了找到更长标签的可能性 - “_RB”与“_RBS”。我在 Java 中使用斯坦福 POS 标记器，但我不知道如何计算每种类型的标记。这是我到目前为止所拥有的：

```
 int pos = 0;
  int end = tagged.length() - 1;

  int nouns = 0;
  int adjectives = 0;
  int adverbs = 0;

  while (pos < (end - 1)){
      pos++;
      String sequence = tagged.substring(pos - 1, pos + 2);
      //System.out.println(sequence);
      if (sequence.equals("_NN")){
          nouns++;
      }
      if (sequence.equals("_JJ")){
          adjectives++;
      }
      if (sequence.equals("_RB")){
          adverbs++;
      }
  } 
```

tagged 是标记的字符串。

这是一个示例标记字符串：

```
This_DT is_VBZ a_DT good_JJ sample_NN sentence_NN ._. Here_RB is_VBZ another_DT good_JJ sample_NN sentence_NN ._. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:41:34.933

在您的情况下，以下（尽管不是最佳）代码可以作为指导

```
public class Main {
    public static void main(final String[] args) throws Exception {
        final String tagged = "World_NN Big_RBS old_RB stupid_JJ";

        int nouns = 0;
        int adjectives = 0;
        int adverbs = 0;

        final String[] tokens = tagged.split(" ");

        for (final String token : tokens) {
            final int lastUnderscoreIndex = token.lastIndexOf("_");
            final String realToken = token.substring(lastUnderscoreIndex + 1);
            if ("NN".equals(realToken)) {
                nouns++;
            }
            if ("JJ".equals(realToken)) {
                adjectives++;
            }
            if ("RB".equals(realToken) || "RBS".equals(realToken)) {
                adverbs++;
            }
        }

        System.out.println(String.format("Nouns: %d Adjectives: %d, Adverbs: %d", nouns, adjectives, adverbs));
    }
} 
```

和一个[小提琴](http://ideone.com/DWAbAY)。

# java - Eclipse 使用包的问题

> ID：13568901
> 
> 赞同：3
> 
> 时间：2012-11-26T16:24:52.020
> 
> 标签：java, eclipse, git

伙计们，我正在为小组项目开发一个编译器，我遇到了一些问题。我正在使用 git 进行版本控制。自昨天以来，在合并之后已经有很多次了。我的日食弄乱了我的包裹。我有一个 src 文件夹和两个包，eclipse 将两个包都显示为 src。. 这导致我在这两个包中的所有类中都出现错误。有谁知道为什么会这样？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:50:35.477

通常，除非您使用默认包（不推荐），否则您的包是 /src 的子目录。我将从检查实际目录开始，看看文件的实际结构是什么。如果实际上只有一个文件夹，那么问题不是git，而是eclipse。检查项目属性 -> 构建路径 -> 源，这是配置了源文件夹。删除无用的条目。

把 .classpath 和 .project 文件放在 GIT 中是可以的，我通常这样做，因为在我添加库等时配置每个人的环境是浪费时间。只要确保只使用相对路径即可。

如果您提供更多信息或屏幕截图，我可能会提供更好的帮助。

# java - 在 java 中的任意位置使用背景绘制在自定义 JPanel 上进行绘制

> ID：13568905
> 
> 赞同：1
> 
> 时间：2012-11-26T16:24:58.347
> 
> 标签：java, swing, paintcomponent

我正在使用`JPanel`带有背景图像的自定义。我通过覆盖面板的`paintComponent()`方法放置了背景图像。面板的布局设置为`GridBagLayout`。现在我正在尝试向其中添加另一个 JPanel，我正在其上绘制一个矩形。

当我试图这样做时，矩形被绘制在任意位置，并且它的副本也被绘制。当我删除第一个面板的背景图像时，一切正常。

如何解决这个问题？

# bash - 在 EPS 中创建一个像素的空白边框

> ID：13568910
> 
> 赞同：1
> 
> 时间：2012-11-26T16:25:07.813
> 
> 标签：bash, latex, gnuplot, eps

我正在尝试生成一个 eps 以包含在一个 LaTeX 文档中，该文档的边框为图形内容周围的 1 像素空白。该图是我使用 postscript 终端使用 gnuplot 制作的图：

```
set terminal postscript enhanced eps color colortext 14 size 19cm,15cm font 'Courier-Bold,30' 
```

这个数字有很多空白，我想把它减少到 1 个像素。我可以使用该`epstool`实用程序将其裁剪为零空白边框：

```
epstool --bbox --copy input.eps output.eps 
```

如果不手动编辑 .eps 文件来更改边界框，我找不到添加 1 个像素的空白的方法。`-l`像( `--loose`)这样的实用程序的一个选项会很好`ps2eps`，它完全符合我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:42:08.550

（最后一分钟添加：刚刚看到你的答案，所以你可能不需要这个）

这很容易做到`awk`：

```
awk '/^%%(HiRes)?BoundingBox:/{print $1, $2-1, $3-1, $4+2, $5+2;next}{print}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:24:24.500

我最终编写了一个 python 函数来进行边界框扩展：

```
def expand_boundingbox(epsfile, outfile):
    with open(epsfile, 'r') as f:
        with open(outfile, 'w') as o:
            lines = f.readlines()
            for line in lines:
                line = line.split()
                if line[0] == '%%BoundingBox:':
                    line[1] = str(int(line[1]) - 1)
                    line[2] = str(int(line[2]) - 1)
                    line[3] = str(int(line[3]) + 2)
                    line[4] = str(int(line[4]) + 2)
                if line[0] == '%%HiResBoundingBox:':
                    line[1] = str(float(line[1]) - 1.0)
                    line[2] = str(float(line[2]) - 1.0)
                    line[3] = str(float(line[3]) + 2.0)
                    line[4] = str(float(line[4]) + 2.0)
                line = ' '.join(line)
                o.write(line+'\n') 
```

# salesforce - 编辑时缺少 VisualForce 页面长文本区域

> ID：13568913
> 
> 赞同：0
> 
> 时间：2012-11-26T16:25:18.593
> 
> 标签：salesforce, visualforce

我有一个“长文本区域”字段，我放在页面上（在编辑模式下），如下所示：

```
<apex:form>
    <apex:pageBlock title="monkeys" mode="edit">
        <apex:inputField value="{!opportunity.JobIdRequestComments__c}"/>
        <apex:inputField value="{!opportunity.LostDescription__c}"/>
    </apex:pageBlock>
</apex:form> 
```

两个字段中的第二个显示得很好，但第一个没有出现。知道要看什么吗？我在字段定义中看不到这些字段之间的任何区别，并且在使用不带扩展名的标准控制器时问题仍然存在。

作为另一个测试，我在同一页面上创建了一个 <apex:inputTextArea>，当我输入 value="{!opportunity.JobIdRequestComments__c}" 时，它不会被渲染，但是当它离开时，它会渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:49:46.323

*转换为答案（容易获得声誉；））*

您是否检查了个人资料的字段级别安全性等基本内容？Visualforce 基于此限制字段可见性，即使您是系统管理员，并且如果您仅部署了没有配置文件的字段/对象定义，它们通常会留空。

如果您`{!$ObjectType.Opportunity.fields.JobIdRequestComments__c.accessible}`在页面的某个位置放置会发生什么？

# hibernate - HQL 中的日期操作

> ID：13568914
> 
> 赞同：8
> 
> 时间：2012-11-26T16:25:20.337
> 
> 标签：hibernate, date, hql

我想使用 HQL 从表中获取过期实体。像这样的东西：

```
select id, name from entity_table where date_creation + 10_minutes < current_time() 
```

我不知道如何用 HQL 做到这一点。我不想进行额外的查询，在 java 代码中处理日期等等。这必须在 HQL 级别上完成。

你能帮我么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T21:49:47.123

根据您的数据库，这可能非常简单。HQL 支持内置的特定于供应商的特性和功能，它还支持通过注册新功能来扩展方言的能力（如果 HQL 尚不支持这些功能）。

假设您正在使用 SQLServer（或 Sybase）。SQLServer 有一个名为“DATEADD”的函数，它可以很容易地做你喜欢的事情。格式为：

```
DATEADD (datepart, number, date) 
```

您可以通过首先在您自己的 Hibernate Dialect 中注册该函数来直接在 HQL 中使用该函数。为此，您只需扩展您当前使用的方言。这是一个非常简单的过程。

首先，创建您自己的方言类（将“SQLServer2008Dialect”替换为您自己的数据库供应商）：

```
public class MySQLServerDialect extends SQLServer2008Dialect {

  public MySQLServerDialect() {
    registerFunction("addminutes", new VarArgsSQLFunction(TimestampType.INSTANCE, "dateadd(minute,", ",", ")"));
  }

} 
```

接下来，修改您的休眠配置以使用这个新类：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    ...
    <property name="hibernate.dialect">com.mycompany.MySQLServerDialect</property>
    ...
</hibernate-configuration> 
```

现在只需使用该功能：

```
select x from MyEntity x where addminutes(x.creationDate, 10) < current_time() 
```

（这假设您的实体名为 MyEntity，并且 creation_date 字段映射到名为 creationDate 的属性）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T20:25:21.423

HQL does not support arithmetic with date and time, so it is not possible without extending HQL. Easiest path is probably to register database vendors SQL dialect function for such a calculation. Other possibility is to implement and register [interceptor](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Interceptor.html) (method to override is `onPrepareStatement`), if syntax with plus and minus signs is preferred.

When solution does not have to be purely in HQL and time from the JVM host is enough easiest solution is to calculate date that is 10 minutes in past and give it as an argument. If database time is preferred, that can be achieved by querying it in separate query and then decrementing 10 minutes from it.

# firefox - Firefox 不显示 SVG

> ID：13568915
> 
> 赞同：2
> 
> 时间：2012-11-26T16:25:22.853
> 
> 标签：firefox, svg, opera

我有一个使用 SVG 制作图像映射的页面。

在 IE9 和 Chrome 中运行良好，但 FireFox 和 Opera 正在裁剪图像 - 尽管翻转仍然有效。

该网站在这里：[http ://www.kollegetown.com](http://www.kollegetown.com)

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:36:27.290

只需将此（或等效的）添加到您的样式表中：

```
svg { 
  height: 100%;
  width: 100%;
} 
```

# xsd - 带有“xlink:”和属性“ref”的 Tridion“复杂架构”升级问题

> ID：13568916
> 
> 赞同：3
> 
> 时间：2012-11-26T16:25:25.117
> 
> 标签：xsd, tridion, xlink

我们正在升级当前用于将内容从 3rd 方系统导入 Tridion 的应用程序。当前的 CMS 是 Tridion 2009，新实例是 Tridion 2011 SP1 HR1。

我们遇到的挑战是我们无法验证复杂的模式。我在下面包含了一个工作示例（即在 2009 年工作），这在 SDL Tridion 2009 中得到了验证。但是，当我尝试通过 Tridion 2011 中的 CME 创建相同的模式时，当我选择“验证”指示时出现错误那

> 'ref' 属性的值无效 = 'xlink:href' 是 'ref' 属性的无效值。

我花了一些时间阅读（这是一个流传下来的复杂模式，已经有相当多的内容被压在它上面！）你相信吗？我们不能只保留名称和类型（或以某种方式在本地定义这个“全局”参数 - 如果我们可以的话 - 这不是“*不太好*”的做法吗？我相信这可以通过更新 XML 来解决（来自[<attribute ref="..."> 的 xml 问题](https://stackoverflow.com/questions/3476784/xml-problem-with-attribute-ref)）但这是我们无法修改的。

任何评论/指针都会很棒！谢谢

```
<xs:schema targetNamespace="http://www.ccc.com/tridion/pelements" elementFormDefault="qualified" xmlns:tcm="http://www.tridion.com/ContentManager/5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tcmapi="http://www.tridion.com/ContentManager/5.0/TCMAPI" xmlns="http://www.ccc.com/tridion/pelements" xmlns:mstns="http://tempuri.org/XMLSchema.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:import namespace="http://www.w3.org/1999/xlink" schemaLocation="cm_lnk.xsd"/>
    <!--maps to DITA element: xref -->
    <xs:element name="link" type="reference"/>
  <xs:complexType name="reference">
    <xs:sequence>
      <xs:element name="title" minOccurs="1" maxOccurs="1" type="xs:string"/>
      <xs:choice>
        <xs:element name="internal">
          <xs:complexType>
            <xs:attribute ref="xlink:href" use="required"/>
            <xs:attribute ref="xlink:title" use="optional"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="external">
          <xs:complexType>
            <xs:attribute name="href" use="required"/>
          </xs:complexType>
        </xs:element>
      </xs:choice>
      <xs:element name="text" minOccurs="0" maxOccurs="1" type="xs:string"/>
    </xs:sequence>
    <xs:attribute name="type" type="referenceType" use="required"/>
  </xs:complexType>
  <!-- ******************** Enumerations ************************** -->
  <xs:simpleType name="referenceType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="normal"/>
      <xs:enumeration value="binary"/>
      <xs:enumeration value="embedded"/>
      <xs:enumeration value="reusable"/>
      <xs:enumeration value="component"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

**更新：** 为了能够继续，我们对 xsd 模式进行了更改：

```
<xs:attribute ref="xlink:href" use="required"/>
<xs:attribute ref="xlink:title" use="optional"/> 
```

至

```
<xs:attribute name="href" type="xs:anyURI" use="required"/>
<xs:attribute name="title" type="xs:string" use="optional"/> 
```

这实际上来自2011 版本的*cm_lnk.xsd 。*ref 实际上应该是对 xlink:href 属性的引用，所以这可能仍然是不正确的 - 任何人都知道我们可能测试/关注的此更改的任何陷阱吗？

**更新（来自 CS）** CS 已经表示他们将通过研发来调查这个问题，并且似乎已经同意它在 2009 年是一个有效的模式，现在它在 2011 年无效。票已经关闭，但跟进这件事会很有趣，看看如果这是在 2013 年解决还是被接受为不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:01:34.847

使用

```
<xs:attribute name="href" type="xs:anyURI" use="required"/>
<xs:attribute name="title" type="xs:string" use="optional"/> 
```

代替

```
<xs:attribute ref="xlink:href" use="required"/>
<xs:attribute ref="xlink:title" use="optional"/> 
```

完全没问题，正如您打算参考的那样`cm_lnk.xsd`，它只是意味着如果`cm_lnk.xsd`会发生变化，您也应该相应地更改您的架构。但这只是理论上的，因为`cm_lnk.xsd`模式永远不会改变它的定义。

更有趣的是您提到这在 2009 版本中确实有效，这表明 2011 版本似乎无法处理您的导入

```
<xs:import namespace="http://www.w3.org/1999/xlink" schemaLocation="cm_lnk.xsd"/> 
```

所以正如 Dominic 已经提到的，我确实会为此提出一张 CS 票，以便对其进行查看。您的解决方法是完全有效的，但报告缺陷以便在将来的版本中修复它们总是好的。

# c# - 以特定格式将数据写入 excel 文件

> ID：13568917
> 
> 赞同：1
> 
> 时间：2012-11-26T16:25:26.910
> 
> 标签：c#, excel

嗨，我正在从 Sql Server 获取数据，例如

![在此处输入图像描述](../Images/df56d4b3dee488d262f347babcbd06ad.png)

约1000家门店。

我需要将数据放入 excel 文件中，如

![在此处输入图像描述](../Images/3b389d8d438d8a09fa4fa2a8c4c65173.png)

依此类推，直到现在我已经设法像控制台应用程序一样编写代码

```
if (reader.HasRows) {
    while (reader.Read()) {
        SqlDataAdapter da = new SqlDataAdapter("StoresWithProduct", connection);
        da.SelectCommand.CommandType = CommandType.StoredProcedure;
        da.SelectCommand.Parameters.AddWithValue("@StoreID", reader.GetInt32(0));
        DataSet ds = new DataSet();
        da.Fill(ds, "table1");
        foreach (DataRow dr1 in ds.Tables["table1"].Rows) {
            Console.Write("Store Code:" + dr1["StoreCode"] + "\t");
            foreach (DataRow dr in ds.Tables["table1"].Rows)
            {
                Console.Write(dr["itemNumber"]+"-" + dr["quantity"]+"\t\n");
            }
            break;
        }
    }
} else {
    Console.WriteLine("No rows found.");
}
Console.ReadLine();
reader.Close();
connection.Close(); 
```

但无法以我想要的方式放入 excel 文件，任何指针都会被应用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:44:15.120

如果您将输出写入文本文件，那么您所做的应该可以工作。使用 CSV（[维基百科](http://en.wikipedia.org/wiki/Comma-separated_values)），您可以轻松地将数据导出到 Excel。看到[这个链接](http://en.wikipedia.org/wiki/Comma-separated_values#Lack_of_a_standard)，由于缺乏标准，`tabs`像你一样使用应该可以。

`,`您只需使用分隔符（通常是,`;`或）逐行输出数据`tab`并使用 a`new line`定义新行。

Excel 支持 CSV 文件作为`Text Files`. 我在这台 PC 上没有 Excel，但通常有一个导入向导来帮助您创建列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:45:05.147

我建议看看[EPPlus](http://epplus.codeplex.com/)

我们已经广泛使用这个库来生成复杂的 Excel 工作簿，包括数据透视表。使用非常简单，在 codeplex 网站上有大量示例和帮助。

我希望这有帮助！

# php - Symfony2：第一个错误时验证停止

> ID：13568922
> 
> 赞同：3
> 
> 时间：2012-11-26T16:25:39.870
> 
> 标签：php, validation, symfony

如果返回类`$validator->validate( $class );`，Symfony2[验证服务](http://symfony.com/doc/current/book/validation.html)似乎会运行所有验证检查。`$error`这通常没问题，但我正在寻找`halt_on_failure`功能，因为一旦特定属性失败，它会`PHP`在正在进行的验证检查中触发错误。

在 Symfony-1 中有很好的记录，`halt_on_error`但我不确定这在 Symfony2 中是如何工作的。我找到了对它的引用，但没有示例。

这是一个[类似的问题](https://stackoverflow.com/questions/10135345/how-to-stop-validation-on-constraint-failure-in-symfony2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:10:49.003

# 为这个问题找到了两个解决方案。

1.  **使用组**。[Richard Miller](http://richardmiller.co.uk/2012/06/15/symfony2-using-validation-groups/) 写了一篇关于 SF2 Validation with Groups 的精彩总结。从本质上讲，我所做的只是标记了初始验证步骤， `Step1`而将其余步骤单独保留。然后，您向 Validator 服务发出请求，如下所示：

    $this->validator->validate($class, array('step1', 'Default'));

2.  **附加 IF 语句**。在我的情况下，我使用 API 进行验证，所以我想确保输入是准确的，这样我就不会浪费 API 请求。IF 语句可用于切断 API 请求和`return false`.

## 我选择做什么以及为什么

我选择执行第 2 步。虽然第 1 步可能更好地使用了验证技术，但我并不热衷于需要添加的其他组参数。这是代码维护责任。在 Symfony2.2 中似乎会有一个`halt_on_error`特性，这个解决方案应该到时候更新。

# java - 在 Spring MVC 中的两个页面上保留状态

> ID：13568923
> 
> 赞同：2
> 
> 时间：2012-11-26T16:25:42.900
> 
> 标签：java, spring, jsp, spring-mvc

我有一个 Spring MVC 3 应用程序，其中有两个页面。一页用户选择一些数据，这些数据被发布到控制器并构建第 2 页。然后在第 2 页获取其值后，我想将第一页的值用于数据库操作。

到目前为止我尝试过的事情：

我看着`ModelAttribute`

首先是第一个控制器的帖子：

```
@RequestMapping(value = "/firstPage")
public ModelAndView firstPageSubmit(String valuePage1, String valuePage2) {
     return new ModelAndView("secondPage", "readonlySettings", new ReadonlySettings( valuePage1, valuePage2 );
} 
```

我希望，春天会保存这个对象，并再次把它交给我：

```
@RequestMapping(value = "/secondPage")
public ModelAndView secondPage(@ModelAttribute("readonlySettings") ReadonlySettings settings, String valuePage2) {
     //Store stuff in the database
     doa.save(settings.getValuePage1(), settings.getValuePage2(), valuePage2);
} 
```

但是没有骰子..所有的值都是空的。

`ReadonlySettings`顺便说一句：我对 jsp 本身的对象什么也没做。所以没有隐藏字段或其他什么，因为我不喜欢这个解决方案。人们可以更改隐藏字段，这是我真正希望避免的事情。

有谁知道如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:52:57.487

You can tell Spring to keep the object around associated with the user's web session on the server side by using @SessionAttributes.

```
@Controller
@SessionAttributes("readonlySettings")
public class MyController {

@RequestMapping(value = "/firstPage")
public ModelAndView firstPageSubmit(String valuePage1, String valuePage2, ModelMap map) {
    map.addAttribute("readonlySettings", new ReadonlySettings( valuePage1, valuePage2 );
    return new ModelAndView("secondPage");
} 

@RequestMapping(value = "/secondPage")
public ModelAndView secondPage(ModelMap map, SessionStatus status, String valuePage2, ) {
    ReadonlySettings settings = map.getAttribute("readonlySettings");
    doa.save(settings.getValuePage1(), settings.getValuePage2(), valuePage2);
    status.setComplete();
} 
```

Now obviously this is fairly primitive. Depending on the context of the operation you may need to add handling for when someone loads the second page directly via a link and has no object in their session. Also the object will be left hanging there until the session is cleaned up if someone never completes the second step. (May be tolerable in the case of just two strings.) If your actual use case is significantly more complicated than this, you may want to look in to something like web flow rather than re-inventing.

# php - 将 MongoCursor 移回来？

> ID：13568926
> 
> 赞同：0
> 
> 时间：2012-11-26T16:25:53.040
> 
> 标签：php, mongodb, cursor, cursor-position

[MongoCursor](http://www.php.net/manual/en/mongocursor.getnext.php)有一个获取下一个对象的方法，访问上一个项目的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:33:53.457

[MongoCursor](http://php.net/manual/en/class.mongocursor.php)实现了预定义的[Iterator](http://www.php.net/manual/en/class.iterator.php)接口，并且没有诸如 previous() 等方法。要将光标移动到结果集的开头，只需使用：

```
$object->rewind(); 
```

有关预定义接口文档的更多信息，请参见此处：

[http://www.php.net/manual/en/reserved.interfaces.php](http://www.php.net/manual/en/reserved.interfaces.php)

# oracle - 在 Oracle 中更新 CLOB 字段

> ID：13568932
> 
> 赞同：5
> 
> 时间：2012-11-26T16:26:10.697
> 
> 标签：oracle, clob

我在 Oracle 数据库中有一个表，其中包含数据类型的字段`CLOB`。字段的名称是`XMLString`。我正在为每条记录存储 10,000 个字符长的 XML 字符串。我在这个表中有超过 100, 000 条记录。

我需要在特定位置更新每条记录上的 XML 字符串段。例如，我需要使用“我的新文本”之类的字符串更新第 14 位的每条记录。此替换文本的长度为 11 个字符。所以这只是意味着它将替换从第 14 个字符开始的 11 个字符。

我尝试使用`DBMS_LOB.FRAGMENT_REPLACE`，但这并不是我想要的。

有没有简单的命令

```
Replace(XMLString, 14, ‘My New text’) 
```

这样我就可以做下面的事情了？

```
UPDATE MYTABLE 
SET MyClobField = Replace(MyClobField, 14, 'My New text')
WHERE MyTableID>5000 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T16:35:41.010

SQL 使用

```
UPDATE MYTABLE 
SET MyClobField = substr(MyClobField, 1, 10) || to_clob('MyNewtext')||substr(MyClobField, 10+length('MyNewtext')+1)
where.. 
```

只需将“10”的 2 次出现更改为偏移量。

或者在这样的 PL/SQL 中使用 DBMS_LOB.WRITE API（这比上面的要快）

```
SQL> create table foo(c clob);

Table created.

SQL> insert into foo values ( 'this is a test string ' || rpad('x', 20, 'x'));

1 row created.

SQL> commit;

Commit complete.

SQL> select * from foo;

C
--------------------------------------------------------------------------------
this is a test string xxxxxxxxxxxxxxxxxxxx

SQL> declare
  2    v_lob clob;
  3  begin
  4
  5    for r_lob in (select c
  6                    from foo
  7                    for update)
  8    loop
  9      dbms_lob.write(r_lob.c, 6, 16, 'phrase'); -- ie write at offset 16, 6 bytes
 10    end loop;
 11  end;
 12  /

PL/SQL procedure successfully completed.

SQL> select * from foo;

C
--------------------------------------------------------------------------------
this is a test phrase xxxxxxxxxxxxxxxxxxxx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T09:19:19.123

试试这个 ：-

更新表集列=替换（列，'你好'，'abcded'）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-12-22T18:31:54.710

试试这个 ：-

```
DECLARE
      str varchar2(32767);
    BEGIN
      str := '<big-string>';
      update <table-name> set <col-name-1>= str where <col-name-2>= ;
    END; 
```

# c# - 使用 HTMLAgilityPack 登录网站

> ID：13568933
> 
> 赞同：12
> 
> 时间：2012-11-26T16:26:22.470
> 
> 标签：c#, login, html-agility-pack, login-script

在下面的代码中，我可以使用 HTMLAgilitypack 设置用户名和密码的值，但我无法调用登录按钮的单击事件（按钮源代码中的 id 为“s1”）。

无论如何要这样做吗？我不使用的原因`WebBrowser`是因为我需要 HTMLAgilityPack 从源代码中没有 ID 的页面检索数据。

```
var doc = new HtmlWeb().Load("http://MYURL.com");
doc.DocumentNode.SelectSingleNode("name").SetAttributeValue("value", "MyUsername");
doc.DocumentNode.SelectSingleNode("password").SetAttributeValue("value", "MyPassword"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T16:31:28.097

> 无论如何要这样做吗？

不是 HTML Agility Pack (HAP) 库提供的——不是直接的。

HAP 非常适合获取单个页面并对其进行解析，但它不是为持续交互而设计的。缺少的东西是 cookie 管理、JavaScript 交互等等。

为了登录，您可能需要向服务器发送一个 HTTP POST，包括您想要的数据——HAP 对此无能为力。

您将需要使用类似的类`WebRequest`来发布帖子 - 我建议查看[fiddler](http://www.fiddler2.com/fiddler2/)并使用它来查看请求的外观并相应地构建它，尽管这可能只是第一步。

您可能想要研究使用 web 自动化工具，例如[selenium](http://seleniumhq.org/)或[WatiN](http://watin.org/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-24T18:19:17.200

您需要通过 fiddler 观察 POST 请求并查看其结构。例如 ：

```
 {"userName":"you","password":"pwd"} 
```

通常，网站会通过在您的请求中接收他们的 cookie 来识别您已登录。

[默认情况下， HttpClient](https://msdn.microsoft.com/en-us/library/system.net.http.httpclient(v=vs.118).aspx)将从特定域接收到的 cookie 与每个顺序请求一起发送到该域（直到您处置该 HttpClient 实例）

1) 创建一个 cookie 容器并将其分配给您的 HttpClient 实例。

2) 使用 HttpClient 发出登录 POST 请求。

3) 使用 HttpClient 进行数据 GET 请求。

4) 从响应中读取 html 字符串。

5) 使用 HtmlAgilityPack HtmlDocument 从 html 字符串加载文档，而不是从网络加载文档（如大多数示例所示）。

```
 string baseUrl = "https://www.yourwebsite.com";
 string loginUrl = "/Account/LogOn"; 
 string sessionUrl = "/Data";

 var uri = new Uri(baseUrl);

 CookieContainer cookies = new CookieContainer();
 HttpClientHandler handler = new HttpClientHandler();
 handler.CookieContainer = cookies;

 using (var client = new HttpClient(handler))
 {
       client.BaseAddress = uri;

       var request = new { userName = "you", password = "pwd" };
       var resLogin = client.PostAsJsonAsync(loginUrl,request).Result;
       if (resLogin.StatusCode != HttpStatusCode.OK)
            Console.WriteLine("Could not login -> StatusCode = " + resLogin.StatusCode);

       // see what cookies are returned   
      IEnumerable<Cookie> responseCookies = cookies.GetCookies(uri).Cast<Cookie>();
      foreach (Cookie cookie in responseCookies)
            Console.WriteLine(cookie.Name + ": " + cookie.Value);

      var resData = client.GetAsync(dataUrl).Result;
      if(resSession.StatusCode != HttpStatusCode.OK)
            Console.WriteLine("Could not get data html -> StatusCode = " + resSession.StatusCode);

       var html = resSession.Content.ReadAsStringAsync().Result;

       var doc = new HtmlDocument();
       doc.LoadHtml(html);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:41:12.730

我不知道你是否使用 WPF WebBrowser 控件，但如果你是，你可以使用类似的东西

```
doc.GetElementById("submit_signin").Click(); 
```

这对我有用。

# c# - 列表框不显示项目？

> ID：13568936
> 
> 赞同：0
> 
> 时间：2012-11-26T16:26:24.577
> 
> 标签：c#, visual-studio-2010, express

好的，所以我在一种形式中有两个列表框，其中一个的内容取决于在另一个中选择了哪个项目。基本上 listbox1 是雇主列表，而 listbox2 是所选雇主的雇员列表。当我选择没有雇员的雇主时，listbox2 中没有预期的项目。但是由于某种原因，当我在选择没有雇员的雇主之后选择另一个雇主时，listbox2 拒绝再次填充雇员列表。我在 listbox2 旁边有一个标签，它会根据 listbox2 中的选定项目自动更新其文本，并且当我单击 listbox2 中的项目应该在的位置时更新。几乎就像计算机在呈现列表框时遇到问题一样。我尝试了 listbox2.Refresh() 之类的方法，但我什至不知道它的作用。所以基本上，列表框工作，它只是没有显示任何东西。以下是一些相关代码：

更改 listbox1 中选定索引时的代码：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        listBox1.DataSource = Program.MEmployerList;
        listBox1.DisplayMember = "Name";
        Employer temps = (Employer)listBox1.SelectedItem;
        listBox2.DataSource = temps.Employees();
        listBox2.DisplayMember = "Name";
        listBox2.Refresh();
        label5.Text = temps.CompanyName() + " (" + temps.EmployerID() + ")";
        label4.Text = "Phone Number: " + temps.PhoneNumber() + "\nCell Number: " + temps.CellNumber() + "\nAdress: " + temps.StreetAdress() + " - " + temps.City() + ", " + temps.State() + " " + temps.ZipCode() + "\nContact Person: " + temps.ContactPerson();
        if (listBox2.Items.Count != 0 && listBox1.Items[0] != null)
        {
            Employee temped = (Employee)listBox2.SelectedItem;
            label4.Text = label4.Text + "\n\nSelected Employee Info: " + temped.Name + "\nPhone Number: " + temped.PhoneNumber() + "\nCell Number: " + temped.CellNumber() + "\nAddress: " + temped.StreetAdress() + " - " + temped.City() + ", " + temped.State() + " " + temped.ZipCode();
        }
    } 
```

以下是更改 listbox2 中选定索引时的代码：

```
private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        listBox1.DataSource = Program.MEmployerList;
        listBox1.DisplayMember = "Name";
        Employer temps = (Employer)listBox1.SelectedItem;
        listBox2.DataSource = temps.Employees();
        listBox2.DisplayMember = "Name";
        listBox2.Refresh();
        label5.Text = temps.CompanyName() + " (" + temps.EmployerID() + ")";
        label4.Text = "Phone Number: " + temps.PhoneNumber() + "\nCell Number: " + temps.CellNumber() + "\nAdress: " + temps.StreetAdress() + " - " + temps.City() + ", " + temps.State() + " " + temps.ZipCode() + "\nContact Person: " + temps.ContactPerson();
        if (listBox2.Items.Count != 0 && listBox1.Items[0] != null)
        {
            Employee temped = (Employee)listBox2.SelectedItem;
            label4.Text = label4.Text + "\n\nSelected Employee Info: " + temped.Name + "\nPhone Number: " + temped.PhoneNumber() + "\nCell Number: " + temped.CellNumber() + "\nAddress: " + temped.StreetAdress() + " - " + temped.City() + ", " + temped.State() + " " + temped.ZipCode();
        }
    } 
```

让我知道是否有任何其他代码可以帮助解决此问题。

更新：请记住，程序正在记录我在 listbox2 中选择不同项目的事实，这些项目只是没有显示，这让我相信这是一个渲染问题。我单击 listbox2 中的条目应该在哪里，并且 label4 更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:30:45.927

你最后错过了这个吗？

```
listBox1.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:10:20.370

弄清楚了。

我只需要隐藏控件然后再次显示它以强制重新绘制和重新填充它。似乎是一个渲染问题，因为列表内容正在更改但未重新绘制。

```
listbox1.Hide();
listbox1.Show(); 
```

# android - 应用对象和服务

> ID：13568939
> 
> 赞同：0
> 
> 时间：2012-11-26T16:26:38.437
> 
> 标签：android, service

我知道可以在没有活动的情况下启动服务，...我的问题是：如果我将服务作为前台启动（调用 startForegorund()），应用程序对象是否总是被实例化？

或者在某些情况下可能 getApplication() == null ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:45:53.347

我想说`Application`的是每当您的应用程序运行时创建，无论它是活动、前台还是后台服务。所以你不应该`null`在 call 时得到`getApplication`。

# vb.net - ajax调用webservice返回不正确的json

> ID：13568941
> 
> 赞同：1
> 
> 时间：2012-11-26T16:26:38.913
> 
> 标签：vb.net, json, jquery

我正在创建一个网页，以使用 ajax、vb 和 .net 使用 High Charts 动态创建图形和图表。我目前可以调用运行并返回 json 的 web 服务，但是我无法获得正确的 json。我用来返回 json 的函数可以对一个对象进行很好的序列化，但是我设置它的方式不止一个不正确。

```
<OperationContract()>
<WebMethod()>
Public Function DoWork() As String
    ' Add your operation implementation here

    Dim prod As New product

    Dim strConnString As String = ConfigurationManager.ConnectionStrings("STEMConnectionString").ConnectionString
    Dim myConnection As SqlConnection

    myConnection = New SqlConnection(strConnString)

    myConnection.Open()

    Dim strData As String = "SELECT Student_Survey_Response_Fact.StudentID,  Student_Survey_Response_Fact.SurveyID, " & _
    "Survey_ItemR.SurveyQuestionText, Student_Survey_Response_Fact.ResponseText, Survey_ItemR.SurveyResponseNo, Student_Lite.Gender " & _
    "FROM Student_Survey_Response_Fact INNER JOIN " & _
    "Survey_ItemR ON Student_Survey_Response_Fact.ResponseNo = Survey_ItemR.SurveyResponseNo INNER JOIN " & _
    "Student_Lite ON Student_Survey_Response_Fact.StudentID = Student_Lite.StudentId INNER JOIN " & _
    "Survey_Item ON Student_Lite.SchoolYear = Survey_Item.SchoolYear " & _
    "WHERE (Student_Survey_Response_Fact.ResponseText <> 'NULL')"

    Dim Command As New SqlCommand(strData, myConnection)

    Dim reader As SqlDataReader

    reader = Command.ExecuteReader

    Dim stream As New MemoryStream

    Dim jsonSerializer As New DataContractJsonSerializer(GetType(product))

    While reader.Read
        prod.stuID = reader("StudentID").ToString
        prod.gender = reader("Gender").ToString
        prod.surveyID = reader("SurveyID").ToString
        prod.surveyQ = reader("SurveyQuestionText").ToString
        prod.surveyR = reader("ResponseText").ToString
        prod.surveyNum = reader("SurveyResponseNo").ToString
        jsonSerializer.WriteObject(stream, prod)
    End While

    stream.Position = 0

    Dim streamRead As New StreamReader(stream)

    Return streamRead.ReadToEnd() 
```

我知道它为什么会这样，但我不知道如何解决它。我把它放在`jsonSerializer.WriteObject(stream, prod)`循环中，所以它为每个对象创建一个 json 字符串。问题是客户端的输出如下所示：

```
d:{"gender":"M","stuID":"005716305","surveyA":null,"surveyID":"201202","surveyNum":"Resp 09","surveyQ":"Please indicate how you feel about the following statement: - I would like to enter a science competition or science fair in the future.","surveyR":"Disagree"}{"gender":"M","stuID":"005716305","surveyA":null,"surveyID":"201202","surveyNum":"Resp 10","surveyQ":"Please indicate how you feel about the following statement: - The science in school is not related to my everyday life.","surveyR":"Agree"}{"gender":"F","stuID":"005716310","surveyA":null,"surveyID":"201202","surveyNum":"Resp 03","surveyQ":"Which subjects do you most like to study in school? Rank them from like it a lot to don't like it at all. - Science","surveyR":"like it a lot"}{"gender":"F","stuID":"005716310","surveyA":null,"surveyID":"201202","surveyNum":"Resp 06","surveyQ":"Please indicate how you feel about the following statement: - I would rather find out why something happens by doing an experiment than being told.","surveyR":"Agree"} 
```

哪个没有正确的 json 语法。

我的客户端 ajax 调用如下所示：

```
success: function (result) {
    $.parseJSON(result);
    $.each(result, function (key, value) {
        $('body').append(key + ': ' + value);
    });
} 
```

我不确定我是否正确调用它，但我知道 webService 不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:49:47.380

这是答案[的链接。](http://www.codeproject.com/Articles/144241/Converting-a-generic-list-into-a-JSON-string-and-t)我几乎完全按照这个例子直接完成了它是缺少一个列表来保存对象。

# php - 在数组中的值结束后输出新的 html 行

> ID：13568949
> 
> 赞同：0
> 
> 时间：2012-11-26T16:26:54.550
> 
> 标签：php, codeigniter, codeigniter-2

我有一个数组，其中包含带有分类的用户数据。我尝试在最后一个分类组的末尾通过数组的末尾输出总和

```
array(22) {
  [0]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "4334"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(20) "tregfdgfd"
    ["classifi"]=>
    string(2) "1A"
    ["total_sum"]=>
    string(5) "45000"
  }
  [1]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "4336"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(19) "ewrtgfgdfg"
    ["classifi"]=>
    string(2) "1A"
    ["total_sum"]=>
    string(5) "45000"
  }
  [2]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "4340"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(16) "ihjkhjbmgy"
    ["classifi"]=>
    string(2) "1A"
    ["total_sum"]=>
    string(5) "45000"
  }
  [3]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "4394"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(20) "ertgfbfjghj"
    ["classifi"]=>
    string(2) "1B"
    ["total_sum"]=>
    string(5) "30000"
  }
  [4]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "4396"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(21) "dwerdsfdf"
    ["classifi"]=>
    string(2) "1B"
    ["total_sum"]=>
    string(5) "30000"
  }
  [5]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "3496"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(23) "rergfdg"
    ["classifi"]=>
    string(2) "3A"
    ["total_sum"]=>
    string(5) "35000"
  }
  [6]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "3796"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(19) "ghjyuytuyt"
    ["classifi"]=>
    string(2) "3A"
    ["total_sum"]=>
    string(5) "35000"
  }
  [7]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "3797"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(25) "qeevvf"
    ["classifi"]=>
    string(2) "3B"
    ["total_sum"]=>
    string(5) "35000"
  }
  [8]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "3827"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(17) "qvfrrere"
    ["classifi"]=>
    string(2) "3B"
    ["total_sum"]=>
    string(5) "35000"
  }
  [9]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "1921"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(28) "ewrewrsdf"
    ["classifi"]=>
    string(2) "6A"
    ["total_sum"]=>
    string(5) "37000"
  }
  [10]=>
  array(5) {
    ["reg_numb"]=>
    string(4) "2324"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(23) "abcdddsf"
    ["classifi"]=>
    string(2) "6A"
    ["total_sum"]=>
    string(5) "37000"
  }
  [11]=>
  array(5) {
    ["months"]=>
    string(2) "10"
    ["reg_numb"]=>
    string(4) "1922"
    ["month"]=>
    string(10) "2012-01-01"
    ["name"]=>
    string(22) "test123"
    ["classifi"]=>
    string(2) "6B"
    ["total_sum"]=>
    string(5) "37000"
  } 
```

前锋：

```
 <?php  foreach ($infos as $info):?>
 <tr>
      <td colspan = "2"><?php echo $info['reg_numb']?></td>
        <td><?php echo $info['name']?></td>
        <td><?php echo $info['classifi']?></td>
        <td style="text-align: center"><?php echo $info['months']?>Months</td>

    if its the last row in a classfi grpup out put the below row with total for that classifi
    <tr>
      <td colspan = "3">Total</td>
      <td style="text-align: right"><hr /><?php echo $info[total_sum]?> </td>
    </tr>

    begin the next classifi group
    <?php endforeach;?> 
```

所以我会得到一个包含用户数据列表和总数的表格，然后是另一组用户。

关于如何实现这一目标的任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:50:58.870

尝试如下

```
<?php
   $new_data = array();
   foreach ($infos as $key => $info):
      $new_data[$info['classifi']][] = $info;
   endforeach;
?>

<?php foreach ($new_data as $key1 => $arrinfo):?>
<?php  foreach ($arrinfo as $key => $info):?>
 <tr>
      <td colspan = "2"><?php echo $info['reg_numb']?></td>
        <td><?php echo $info['name']?></td>
        <td><?php echo $info['classifi']?></td>
        <td style="text-align: center"><?php echo $info['months']?>Months</td>

//    if its the last row in a classfi grpup out put the below row with total for that classifi

   // Check everytimg is it last record
   <?php if($key==count($arrinfo)-1) {?>
    <tr>
      <td colspan = "3">Total</td>
      <td style="text-align: right"><hr /><?php echo $info[total_sum]?> </td>
    </tr>
   <?php } ?>   
   // begin the next classifi group
<?php  endforeach;?>
<?php endforeach;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:36:45.867

如果您的数组索引顺序正确，则在 foreach 循环中使用计数器变量或 foreach ($array as $key=>$val) 然后检查

```
if ($key > 0 and ($array[$key-1]['classifi'] != $val['classifi'] 
    or $key == count($array) - 1)) { } 
```

然后输出总行并将组总和设置为0

# jquery - 当用户单击按钮或按钮外部时隐藏 DIV - 几乎就在那里

> ID：13568950
> 
> 赞同：0
> 
> 时间：2012-11-26T16:27:00.930
> 
> 标签：jquery

我的网页上有一个“选项”按钮。当用户单击该按钮时，会出现一个小子菜单。

当我在该菜单之外单击时，它会关闭。到现在为止还挺好。

**我的问题是，当我再次单击选项按钮（菜单可见时）时，菜单保持打开状态。它应该关闭。**

这是管理“点击外部”功能的代码

```
$j(document).mouseup(function(e) {
   var container = $j('.playlist-menu');

   if (container.has(e.target).length === 0) {
      container.hide();
   }
}); 
```

和按钮上的事件

```
$j('#options').click(function() {   
    $j('.playlist-menu').toggle();
}); 
```

HTML结构：

```
<button id="options" class="float-left" title="Options" type="button">
<div class="playlist-menu display-none">
   <ul>
       ...
   </ul>
</div> 
```

我不明白为什么当我第二次单击选项按钮时它没有关闭，该按钮的 e.target 不是“播放列表菜单”，那么为什么菜单没有关闭？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:39:30.460

这是因为当您单击按钮时，菜单被绑定到文档的事件处理程序隐藏，但是，选项按钮上的事件处理程序也会被触发。这会触发菜单切换它的状态，使其可见。

为了克服这个问题，如果事件目标不是选项按钮也不是菜单中的元素，请检查绑定到文档的事件处理程序。

所以，像这样

```
$(document).mouseup(function(e) {
   var container = $('.playlist-menu');
   $target = $(e.target); 
   if (container.has( $target ).length === 0 && !$target.is('#options') ) {
       container.hide();
   }
}); 
```

希望这是有道理的。

# wix - Heat.exe 生成的 Wix 注册表文件具有本地文件路径

> ID：13568951
> 
> 赞同：1
> 
> 时间：2012-11-26T16:27:02.493
> 
> 标签：wix, heat

我有一个目录，我用热量成功地收获了。

```
Heat.exe dir "$(ProjectDir)\..\source\DataInterface" -v -cg DataInterfaceFiles -gg -scom -sreg -sfrag -srd -dr DATAINTERFACEFOLDER -var wix.DataInterface.Source -out "$(ProjectDir)\Product\DataInterface\DataInterfaceFiles.auto.wxs" 
```

其中一个文件是需要注册 COM 互操作的 dll。

```
<Component Id="cmpXXXXXX" Guid="{GUID}">
  <File Id="filXXXXX4" KeyPath="yes" Source="!(wix.DataInterface.Source)\MyCompany.Ofd.InterfaceLog.dll" />
</Component> 
```

Heat 正在正确生成所需的 .reg 文件，但是，`CodeBase`此文件中的值设置为构建服务器上的相对路径：

```
...
[HKEY_CLASSES_ROOT\CLSID\{GUID}\InprocServer32\2.10.8.1]
"Class"="MyCompany.Ofd.EventLogger"
"Assembly"="MyCompany.Ofd.InterfaceLog, Version=2.10.8.1, Culture=neutral, PublicKeyToken=xxx"
"RuntimeVersion"="v1.1.4322"
"CodeBase"="file:///H:/Installer/source/Services/DataInterface/MyCompany.Ofd.InterfaceLog.dll"
... 
```

这意味着在安装到用户计算机时，由于路径不正确，文件未注册。

我尝试通过加热重新运行这个 reg 文件，看看它是否会做任何事情，但这没有帮助。相对路径仍然存在。

有没有办法用可以安装的文件路径生成 reg 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T12:51:12.923

我有一个类似的问题，我（相信）我通过使用 -directoryid 开关来指定可以找到文件的已安装机器（例如，INSTALLDIR）上目录的 ID 来解决它。

# javascript - 将 Google 地图标记置于其位置的中心

> ID：13568955
> 
> 赞同：1
> 
> 时间：2012-11-26T16:27:13.040
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我创建了一个嵌入了[RichMarker](https://google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/docs/reference.html)的 Google Maps JavaScript，它放置在任意坐标*50.85, 4.35*处。我在下面的屏幕截图中用绿点近似地标记了这个坐标。

![标记位于其 LatLng 位置上方。](../Images/fcacb83009d39bdc43545320552b0b95.png)

如您所见，标记的内容位于坐标上方。这不是我正在寻找的行为。相反，我希望标记以坐标为中心，如下所示：

![标记以其位置为中心。](../Images/a7122155ec9d4eeda4293d44c755d142.png)

有没有一种简单的方法可以使用标准的 Google Maps API、插件或 jQuery 来强制执行这种类型的放置？我正在使用 API 的 v3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:04:50.433

您需要将 RichMarker 的锚点设置为图像的中心（而不是底部中心）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:34:40.370

您可以使用 infobox 插件来简化此操作。

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)

# python - 在重定向的 asp 表单上使用 urllib2 时出现错误 500

> ID：13568956
> 
> 赞同：0
> 
> 时间：2012-11-26T16:27:27.490
> 
> 标签：python, urllib2, urllib

因此，如果我直接访问该地址，它会重定向并加载我想要的页面，但如果我尝试使用下面的代码执行此操作，则会给出错误代码 500；

```
import urllib, urllib2

import sys

if len(sys.argv) > 1:
    molecule = sys.argv[1]
else:
    print "Error: no molecule requested"
    sys.exit()

# Created handler
redirectionHandler = urllib2.HTTPRedirectHandler() 

# 2 apply the handler to an opener
opener = urllib2.build_opener(redirectionHandler)

# 3\. Install the openers
urllib2.install_opener(opener)

request = urllib2.Request("http://cccbdb.nist.gov/getform.asp", data=urllib.urlencode({'formula':molecule, "submit1": "Submit"}))
response = urllib2.urlopen(request) 
```

只需执行类似的操作即可使用该程序`python program.py ch4`，它会抛出错误。但是，只需访问链接就可以了；

例如[http://cccbdb.nist.gov/getform.asp?formula=ch4](http://cccbdb.nist.gov/getform.asp?formula=ch4)

我想做的是在[这个](http://cccbdb.nist.gov/geom1.asp)页面填写表格，然后加载结果页面。该页面有这个：

```
<FORM action="getform.asp" method=POST id=form1 >
<INPUT type="text" id=text1 name=formula
VALUE='CH4'
></P>
<INPUT type="submit" value="Submit" id=submit1 name=submit1>
</FORM> 
```

当我将帖子数据直接提交到该页面时，它正是我想要的。当我使用 urllib2 执行此操作时，它会给出错误 500。我尝试简单地执行此操作，而不设置重定向内容，并且还尝试在获取任何内容时捕获错误并忽略它（根据[另一个](https://stackoverflow.com/questions/8404938/i-get-http-500-error-when-use-python-urllib2-open)答案）。

`$ wget http://cccbdb.nist.gov/getform.asp?formula=ch4`也不行。

**如何在 python 中获取此页面的内容？**

编辑：我也尝试过使用它`mechanize`，我得到了同样的错误；

```
import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import html2text

import sys

if len(sys.argv) > 1:
    molecule = sys.argv[1]
else:
    print "Error: no molecule requested"
    sys.exit()

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
#br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent (this is cheating, ok?)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

# The site we will navigate into, handling it's session
br.open('http://cccbdb.nist.gov/geom1.asp')

# Select the first (index zero) form
br.select_form(nr=0)

br.form["formula"] = molecule

br.submit() 
```

# c# - 如何从数据库中加载选定的数据并以另一种形式显示在文本框中

> ID：13568957
> 
> 赞同：1
> 
> 时间：2012-11-26T16:27:30.433
> 
> 标签：c#, sql, database, winforms, selectedindex

所以我有两种形式。一个是包含交付列表框的主表单，其中数据从数据库加载。另一种形式是交付表单，当用户从列表框中选择交付时，其详细信息应显示在交付表单中。到目前为止，我已经设法加载数据并设法在我的交付表单中显示一些文本。但是，我无法让我的交付表单显示列表框中所选交付的数据。

这是我的一些代码：

```
private void FrmDelivery_Load(object sender, EventArgs e)
{
SqlConnection con = new SqlConnection(@"Data  Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\visits.mdf;Integrated  Security=True;User Instance=True");
con.Open();

SqlCommand cmd = new SqlCommand("SELECT CustomerName, CustomerAddress, ArrivalTime FROM   tblVisits", con);
SqlDataReader sdr = cmd.ExecuteReader();
while (sdr.Read())
{
this.txtCustomerName.Text = sdr["CustomerName"].ToString(); 
this.txtCustomerAddress.Text = sdr["CustomerAddress"].ToString();
this.txtArrivalTime.Text = sdr["ArrivalTime"].ToString();
}

sdr.Close();

if (theDelivery != null)
{
txtCustomerName.Text = theDelivery.customerName;
txtCustomerAddress.Text = theDelivery.customerAddress;
txtArrivalTime.Text = theDelivery.arrivalTime;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T13:20:08.823

我会用这种方式：

```
public string Get_Field(SqlConnection con, string Table,string Field,string where)
{

       DataSet RS_Temp = new DataSet();
       SqlDataAdapter DA;
       string SqlStr = "SELECT " &  Field &  " FROM " & Table;

       //Add an "If statment" if there is a where condition....

       DA = new OleDbDataAdapter(SqlStr, con);
       DA.Fill(RS_Temp, Table_Name);

            if (RS_Temp.Tables[Table_Name].Rows.Count == 0)
            {
                return ("");
            }
            if (System.Convert.IsDBNull(RS_Temp.Tables[Table_Name].Rows[0][0]))
            {
                return ("");
            }

            if (RS_Temp.Tables[Table_Name].Rows.Count != 0)
            {
                return (RS_Temp.Tables[Table_Name].Rows[0][0].ToString());
            }
            return ("");

} 
```

当然不要忘记添加 Try & catch ：

```
YOURTEXTBOX.Text = Get_Field(...) 
```

# android - Android：如何获取在 GridView 上单击的特定项目的 x 和 y 点

> ID：13568958
> 
> 赞同：-5
> 
> 时间：2012-11-26T16:27:31.793
> 
> 标签：android, android-gridview, geopoints

我有一个网格视图。我想在单击某个项目时显示特定项目的 x 和 y 点。tnx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:38:45.230

呼叫`getTop()`,`getLeft()`在项目上。这应该返回`y`和`x`该项目相对于其父项。

# php - 使用php函数从表中转换值数据

> ID：13568959
> 
> 赞同：0
> 
> 时间：2012-11-26T16:27:33.320
> 
> 标签：php, mysql, function

假设我有一个如下的 mysql 表：

```
CREATE TABLE `jurnal`(
`IDJurnal` INT(11)NOT NULL AUTO_INCREMENT,
`volume` VARCHAR(255)NOT NULL,
`nomor` VARCHAR(255)NOT NULL,
`bulan` INT(2)NOT NULL,
`tahun` INT(4)NOT NULL,
`halaman` INT(4)NOT NULL,
`issn` VARCHAR(255)NOT NULL,
`pengantar` text NOT NULL,
`redaksi` text NOT NULL,
`cover` VARCHAR(255)NOT NULL,
`created_time` datetime NOT NULL,
`created_by` VARCHAR(255)NOT NULL,
`updated_time` datetime NOT NULL,
`updated_by` VARCHAR(255)NOT NULL,
PRIMARY KEY(`IDJurnal`))ENGINE = INNODB AUTO_INCREMENT = 2 DEFAULT CHARSET = utf8; 
```

例如，“bulan”列中的值数据为“11”

如何将它们转换为这样的字符串：

```
November 
```

使用php函数？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:45:52.123

简单的

```
echo DateTime::createFromFormat("m",11)->format("F");
                                    ^---------------------- Month Value 
```

输出

```
November 
```

[经测试`PHP 5.3.0 - 5.4.9`](http://3v4l.org/Ujbmh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:32:58.190

使用 php strtotime 和 date 函数。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

如果您知道要检索一个月，请将其放入一个真实的日期，例如 2012-11-01 **，**然后使用 php 的 date 函数将该日期时间字符串转换为单词月份

date('F',strtotime('2012- **11** -01')) 将返回 'November'

# mysql - MySQL 查询如何从单行返回多条记录？

> ID：13568963
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:27:49.833
> 
> 标签：mysql

我有一个表，其中包含 3 个字段（除其他外），每个字段都等于 1，我需要查询来返回记录。
因此，如果所有 3 个字段都等于 1，则查询应该给出 3 条记录。
如果两个字段（三个字段中的任何一个）等于 1，则查询应返回 2 条记录，依此类推。

这样的查询看起来如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:30:31.497

这应该做你需要的：

```
SELECT * from table WHERE field1=1
UNION ALL
SELECT * from table WHERE field2=1
UNION ALL
SELECT * from table WHERE field3=1 
```

逻辑是我们为每个条件一一选择我们需要的行，然后创建它们的并集。然而，这是真的，这并不能很好地扩展......再说一次，我从来没有遇到过“野外”这个要求......

# javascript - 让 jQuery 移动日期框运行（TypeError：a.mobile.datebox 未定义）

> ID：13568969
> 
> 赞同：0
> 
> 时间：2012-11-26T16:28:09.940
> 
> 标签：javascript, jquery, jquery-mobile, datepicker, datebox

我无法让 jQueryMobile - DateBox 运行。它根本没有显示，我得到一些 JS 错误。这是我的代码：

标题：

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<link rel="stylesheet" href="css/jquery.mobile.structure-1.2.0.min.css" />
<link rel="stylesheet" href="css/jqm-datebox-1.1.0.min.css" />
<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" src="js/jqm-datebox-1.1.0.mode.calbox.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile.datebox.i18n.de.utf8.js"></script> 
```

身体：

```
<form id="formular" name="formular" method="post" action="enquiry.php">
  <table>
    <tr>
      <td>Arrival</td>
      <td><input name="arrival" id="frm_arrival" type="date" data-role="datebox" data-options='{"mode": "calbox"}' value="<?php echo $arrival; ?>" /></td>
    </tr>
    <!-- .... -->
  </table>
</form> 
```

日期选择器未显示，Firebug 给我以下错误：

```
TypeError: a.mobile.datebox is undefined
TypeError: jQuery.mobile.datebox is undefined 
```

错误应该在第 11 行`jquery.mobile.datebox.i18n.de.utf8.js`。这是行：

```
jQuery.extend(jQuery.mobile.datebox.prototype.options.lang, { 
```

我找不到错误。这是一个jQuery冲突吗？我使用`jQueryMobile - DateBox`错误的方式吗？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:30:21.497

切换这两行，我猜第一行取决于第二行：

```
<script type="text/javascript" src="js/jqm-datebox-1.1.0.mode.calbox.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile.datebox.i18n.de.utf8.js"></script> 
```

对此：

```
<script type="text/javascript" src="js/jquery.mobile.datebox.i18n.de.utf8.js"></script>
<script type="text/javascript" src="js/jqm-datebox-1.1.0.mode.calbox.min.js"></script> 
```

**编辑**

您需要在标题中包含实际的日期框文件。德语版本只是一个翻译。它不包含 datebox 插件本身。

像这样排列你的脚本标签：

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" src="jquery.mobile.datebox-something-something.js"></script>
<script type="text/javascript" src="jqm-datebox-1.1.0.mode.calbox.min.js"></script>
<script type="text/javascript" src="jquery.mobile.datebox.i18n.de.utf8.js"></script> 
```

# linux - robots.txt - 禁止没有查询字符串的页面

> ID：13568970
> 
> 赞同：2
> 
> 时间：2012-11-26T16:28:13.083
> 
> 标签：linux, seo, lamp, redhat, robots.txt

我有一个提供动态内容的页面

```
/for-sale 
```

页面应始终至少有一个参数

```
/for-sale?id=1 
```

我想禁止

```
/for-sale 
```

但允许

```
/for-sale?id=* 
```

不影响机器人抓取网站的能力或对 SERP 产生负面影响的可能性。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:33:43.443

你想要的不能使用`robots.txt`：

1.  `Allow:`尽管 M. Koster 编写的 RFC 建议如此（并且*一些*爬虫似乎支持它） ，但在机器人排除标准中没有这样的东西。
2.  不支持查询字符串或通配符之类的东西，因此禁止“裸”版本将禁止所有内容。肯定不是你想要的。
3.  里面的任何东西`robots.txt`都是完全可选的，只是一个提示。机器人根本不需要请求该文件或尊重您所说的任何内容。
4.  您几乎肯定会发现一个或多个网络爬虫，其中任何或所有上述内容都是错误的，而您无法知道。

要解决实际问题，您可以将重写规则放入 Apache 配置文件中。有现成的代码可用于将带有查询字符串的 URL 转换为普通 URL（来自快速网络搜索的[示例）。](http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/)

（或者，您可以将`id`查询字符串留在原处。占您流量的 85% 的一个搜索引擎可以很好地吃掉它们，而占非 Google 流量的 90% 的另外两个搜索引擎也可以。
所以你的恐惧实际上只与没人使用的搜索引擎和垃圾邮件收割机有关。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:40:10.210

我认为这应该有效

```
Disallow: /for-sale    
Allow: /for-sale?id=*&*
Allow: /for-sale?id=* 
```

# silverlight - Silverlight - 选项卡

> ID：13568975
> 
> 赞同：0
> 
> 时间：2012-11-26T16:28:43.960
> 
> 标签：silverlight

使用 Silverlight5。

```
 <sdk:TabControl >
        <sdk:TabItem Header="Num1" IsSelected="True">
            <UserControls:Tab1Data />
        </sdk:TabItem>

        <sdk:TabItem Header="Num2" >
            <UserControls:Tab2Data />
        </sdk:TabItem>

    </sdk:TabControl> 
```

为什么在运行时调用非选定选项卡上的构造函数？

```
public partial class Tab2Data : UserControl
{
    public Tab2Data()
    {
        InitializeComponent();
        var x = 1; //set a breakpoint here and it hits when debugging the app
    }
} 
```

我读过设计选项卡只有在按下时才会“运行”。

如果这是设计使然，我需要在每个构造函数中弄清楚如何判断它是否已被“选择”，以便我可以调用昂贵的数据库操作。我不希望整个应用程序在启动时加载其数据库相关数据（主要是下拉菜单）

EDIT2：我已经连接了一个选定的检查，它提供了所需的功能..

```
private void TabOverallMain_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
{
    var selectedItem = (TabItem)e.AddedItems[0];

    if (selectedItem.Header.ToString() == "Num2") {
        tab2Data.PopulateDropDowns();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:41:09.283

AFAIK 不建议在控件构造函数中做繁重的工作人员（从数据库等加载）。对导航页面使用 'loaded' 事件或 'NavigatedTo'。不要忘记 DesignerProperties.IsInDesignTool 属性。

# java - Java - 没有运算符的计算器无法正常工作而不显示任何错误

> ID：13568982
> 
> 赞同：1
> 
> 时间：2012-11-26T16:28:58.457
> 
> 标签：java

我正在尝试构建一个没有任何与我尝试解决的操作本身相关的运算符的计算器（比较运算符和带有运算符的循环很好）。问题是，Eclipse 在控制台中显示了这个：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: ""
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at Calculator.addOne(Calculator.java:22)
at Calculator.add(Calculator.java:78)
at Program.main(Program.java:8) 
```

这是我的代码 - 计算器类： http: [//pastebin.com/jLGe6atB](http://pastebin.com/jLGe6atB)

我的 main() 方法：

```
public class Program {
public static void main(String[] args) {
    Calculator calculator1 = new Calculator(8135, 6);
    calculator1.add();
}
} 
```

有人可以告诉我有什么问题吗？（请不要问我为什么这样做，只是为了好玩）

感谢并为您的时间感到抱歉。

请求：“请在此处发布 add() 和 addOne()：

```
 public int addOne(int DigitArray)
    {
            String stringNum1 = Integer.toString(DigitArray);
            String[] arrNum1 = stringNum1.split("");
            int[] newArrNum1 = new int[arrNum1.length];
               for (int i = 0; i < arrNum1.length; i++) {
                  newArrNum1[i] = Integer.parseInt(arrNum1[i]);
               }
            int lastDigit = newArrNum1[newArrNum1.length-1];
            switch(lastDigit)
            {
            case 0:
                    lastDigit = 1;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 1:
                    lastDigit = 2;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 2:
                    lastDigit = 3;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 3:
                    lastDigit = 4;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 4:
                    lastDigit = 5;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 5:
                    lastDigit = 6;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 6:
                    lastDigit = 7;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 7:
                    lastDigit = 8;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 8:
                    lastDigit = 9;
                    System.out.println(lastDigit);
                    return lastDigit;
            case 9:
                    lastDigit = 0;
                    updateNumberPlus(lastDigit, arrNum1, newArrNum1);
                    System.out.println(lastDigit);
                    return lastDigit;
            default:
                    return lastDigit;
            }
    }
    public int add()
    {
            int i = 0;
            while(i <= num2)
            {
                    i++;
                    this.addOne(num1);
                    if(i == num2)
                    {
                            result = 0;
                            System.out.print(result);
                            return result;
                    }
            }
            return result;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:32:53.963

当您执行 a 时，`String.split("")`您将获得一个空`String`元素作为`Array`.

然后，您遍历数组，调用`Integer.parseInt()`每个元素，这在空字符串元素上失败。

一个简单的技巧是将您的`for`循环更改为看起来像；

```
for(int i = 1; i < arrNum1.length - 1; i++) { 
```

虽然有点丑:P

# iphone - JSON响应显示在警报vview中？

> ID：13568984
> 
> 赞同：0
> 
> 时间：2012-11-26T16:29:00.427
> 
> 标签：iphone, objective-c, ios, ios5

我是 iphone 开发的新手，我有一个要求，例如我需要在警报视图中显示 JSON 响应（例如：当我提供错误详细信息时，我有一个登录页面我从服务器获得响应我需要在警报视图中显示响应）here我的代码是

```
-(IBAction)signin:(id)sender{

            requestSelect = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: @"http://abc....?"]];

            NSString *requestString = [NSString stringWithFormat:@"request_parameter={\"EmailId\":\"%@\",   \"Password\":\"%@\"}",email.text,password.text,nil];

            NSLog(@"requestString in subarea %@",requestString);
            NSMutableData *requestData =[NSMutableData dataWithBytes: [requestString UTF8String] length: [requestString length]];

            [requestSelect setHTTPMethod: @"POST"];

            [requestSelect setHTTPBody: requestData];

            connection=[[NSURLConnection alloc] initWithRequest:requestSelect delegate:self];

               }

               - (void)connection:(NSURLConnection *)connection didReceiveResponse:            (NSURLResponse       *)response{
                receiveddata = [[NSMutableData alloc]init ];
             }
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)aData{
                 [ receiveddata appendData:aData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection{

                  jsonString = [[NSString alloc] initWithData:receiveddata 
                                               encoding:NSUTF8StringEncoding];
            dictServerData = [jsonString JSONValue];

            valueForKey:@"result"]valueForKey:@"data"] objectAtIndex:0]valueForKey:@"service_status" ]);

            arr_login= [[NSArray alloc]initWithArray:[[[[[dictServerData valueForKey:@"webservice"] valueForKey:@"result"]valueForKey:@"data"] objectAtIndex:0]valueForKey:@"service_status" ]];

          objectForKey:@"webservice"]objectForKey:@"result"]objectForKey:@"data"]objectAtIndex:0]objectForKey:@"userdetails" ]objectAtIndex:0]);

              NSMutableDictionary *DetailsDict=[NSMutableDictionary dictionaryWithObject:[   [[[[[dictServerData             objectForKey:@"webservice"]objectForKey:@"result"]objectForKey:@"data"]objectAtIndex:0]objec          tForKey:@"userdetails" ]objectAtIndex:0] forKey:@"data"];

            NSLog(@"details dict : %@",DetailsDict);

            defaults = [NSUserDefaults standardUserDefaults];
            [defaults setObject:DetailsDict forKey:@"details"];

            UpdateDetail *updt =[[UpdateDetail alloc]initWithNibName:@"UpdateDetail" bundle:Nil];
            [self.navigationController pushViewController:updt animated:YES];
            [updt release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:37:35.773

如果您只想显示带有消息的警报视图，请执行以下操作：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Your Title" 
                                          message: @"Your message"
                                  delegate: nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
[alert show];
[alert release]; 
```

这将打开一个模式警报视图（即，在您点击确定之前，不会通过它传递任何触摸）按钮。

所以只需将 JSON 响应放入消息中（如果需要，将其转换为可读字符串）

# php - 获取特定文档的下一个和上一个文档

> ID：13568985
> 
> 赞同：0
> 
> 时间：2012-11-26T16:29:01.980
> 
> 标签：php, mongodb, database

在 mongoDB 中，仅使用其获取文档的下一个和上一个文档的最佳实践是什么`_id`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:30:37.267

如果您想按创建顺序对文档进行排序，可以按文档 _id 进行排序。

IE

```
db.mycollection.find().sort({_id:-1}); 
```

参见： [http ://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Sortbyidtosortbyinsertiontime](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Sortbyidtosortbyinsertiontime)

# android - AdMob 似乎只适用于某些设备。不适用于galaxy s，s2

> ID：13568988
> 
> 赞同：1
> 
> 时间：2012-11-26T16:29:09.423
> 
> 标签：android, admob

我已经制作了一个应用程序并在其中嵌入了 AdMob，如教程中所示。

它似乎在我的三星 S3 上工作正常，也可以在模拟器上显示。

在三星 S 和 S2 上试用时，广告根本不显示..

知道为什么吗？

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calc);
        Intent intent = getIntent();
        match = intent.getStringExtra(StartActivity.EXTRA_MESSAGE);
        adView = new AdView(this, AdSize.BANNER, "a150b2362fba949");
        LinearLayout layout = (LinearLayout)findViewById(R.id.calcL);
        layout.addView(adView);
        adView.loadAd(new AdRequest()); }

    and XML:

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/calcL"
    android:layout_gravity="top"
    android:gravity="top"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="10"
     >
<LinearLayout 
        android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:layout_weight="8" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="30sp"
            android:scaleType="fitXY"
            android:src="@drawable/calc" />

     </LinearLayout>

     <LinearLayout 

        android:layout_height="wrap_content"
         android:layout_width="match_parent"
         android:layout_weight="2" />

</LinearLayout> 
```

谢谢！！！

# java - 如何删除节点和所有相关节点不仅是关系——neo4j cypher 1.8

> ID：13568991
> 
> 赞同：1
> 
> 时间：2012-11-26T16:29:11.590
> 
> 标签：java, spring, jakarta-ee, neo4j

如何删除节点和所有相关节点不仅关系例如

```
account-[:GGroup]-group,
group-[:GEvent]-event,
group-[:GMember]-member,
group-[:GAlbum]-album,
album-[:GPhoto]-photo, 
```

所以我想删除所有相关节点（事件和专辑（和照片））的组，这是我的工作......我正在使用java。

```
 START group = node:GGroup('dbId:1') 
    MATCH group-[gp:privacy]-gPrivacy,
            group-[gm:GroupMember]-(),
            group-[ge:GroupEvent]-event,
            event-[ep:privacy]-gePrivacy,
            event-[eep:EventParticipant]-(),
            event-[ea:EventAlbum]-eventAlbum,
            eventAlbum-[ap:privacy]-geaPrivacy,
            eventAlbum-[aph:AlbumPhoto]-eventAlbumPhoto,
            eventAlbumPhoto-[ept:PhotoTag]-eventAlbumPhotoTag,
            event-[ev:EventVideo]-eventVideo,
            eventVideo-[vp:privacy]-gevPrivacy,
            group-[ga:GroupAlbum]-groupAlbum,
            groupAlbum-[gap:privacy]-gaPrivacy,
            groupAlbum-[aphoto:AlbumPhoto]-groupAlbumPhoto,
            groupAlbumPhoto-[gpt:PhotoTag]-groupAlbumPhotoTag,
            group-[gf:GroupFile]-groupFile 
            delete group,gm,ge,event,ep,gePrivacy,eep,ea,eventAlbum,ap,geaPrivacy
            ,aph,eventAlbumPhoto,ept,eventAlbumPhotoTag,ev,eventVideo,vp,gevPrivacy,ga,
            groupAlbum,gap,gaPrivacy,aphoto,groupAlbumPhoto,gpt,groupAlbumPhotoTag,gf,
            groupFile,gp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:57:48.470

```
START g=node({id_of_group_node})
MATCH acc-[ag:GGroup]-g
     ,g-[ge:GEvent]-e
     ,g-[gm:GMember]-m
     ,g-[ga:GAlbum]-a
     ,a-[ap:GPhoto]-p
DELETE g, ge, e, gm, m, ga, a, ap, p, ag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:47:20.633

如果您想删除所有相关节点，则无需在 MATCH 阶段将它们一一显式匹配。您可以简单地找到除了起始的所有内容（+专辑照片）：

```
START account=node(...)
MATCH account-[:GGroup]-group,
      group-[r1]-all,
      group-[:GAlbum]-()-[r2]-photo
WHERE Id(all)<>Id(account)
DELETE group, r1, all, r2, photo. 
```

# sql-injection - 这是否容易受到 SQL 注入的影响？

> ID：13568992
> 
> 赞同：3
> 
> 时间：2012-11-26T16:29:14.067
> 
> 标签：sql-injection

我们正在使用引用 MSSQL 中的存储过程的第三方产品。这个存储过程看起来像这样：

```
CREATE PROCEDURE [dbo].[example]
 @a nvarchar(255)
 AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @strSQL nvarchar(3000)
  SET @strSQL = 'SELECT * FROM test WHERE x = ''1'''

  IF IsNull(@a, '') <> ''
    SET @strSQL = @strSQL + ' AND a = ''' + @a + ''''
  EXEC(@strSQL)
END 
```

这个存储过程实际上并没有将其结果输出到网站，但我仍然确定它容易受到 SQL 注入的攻击。我可以输入 t' + 'est 并得到与输入 test 相同的结果。

我们显然需要让他们改变这一点，但我需要首先证明这是一个问题。如何通过将 SQL 作为@a 传入来执行诸如在表中插入行之类的操作？如果我做

```
'; INSERT INTO blah VALUES('test') 
```

然后我得到：

```
Incorrect syntax near ';'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:32:09.953

是的，它很容易受到攻击，但是您碰巧注入了错误的文本，从而产生了语法错误：

```
SELECT * FROM test WHERE x = "1" AND a =; INSERT INTO blah VALUES('test')
                                        ^--your syntax error 
```

如果您的注入文本是：

```
a; INSERT blah blah blah
^--- 
```

那么你最终会得到两个有效的查询并`test`在你的 blah 表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:36:31.263

是的，您可以将您的 @ 设置为具有一个 secape 字符，从而创建多个 Execs 最终导致 execcmd 格式 C: 或其他 - 谷歌 SQL 注入攻击

然而：

创建 proc db.eg @a nvarchar(255)

开始

更新 Mytable SET Mycol = @a WHERE Con​​dition 等。

结尾

由于字符串直接进入表列，因此未对 SQL 注入开放，它是 nt exec'd

# c# - N个线程异步获取/执行任务

> ID：13568994
> 
> 赞同：4
> 
> 时间：2012-11-26T16:29:26.897
> 
> 标签：c#, multithreading, asynchronous, threadpool, semaphore

我在某处的数据库队列中有无限数量的任务。让程序在 n 个不同线程上同时处理 n 个任务的最佳方法是什么，在完成旧任务时启动新任务？当一个任务完成时，另一个任务应该异步开始。当前运行的计数应始终为 n。

我最初的想法是使用线程池，但考虑到要处理的任务将在各个线程中检索，这似乎没有必要。换句话说，每个线程将自己去获取下一个任务，而不是让主线程获取任务然后分发它们。

我看到了多种选择，但我不知道应该使用哪一种来获得最佳性能。

1）线程池 - 鉴于不一定有任何等待线程，我不确定这是必要的。

2) 信号量 - 与 1 相同。如果没有等待由主线程分配的任务，信号量有什么好处？

3) 永远相同的线程 - 用 n 个线程启动程序。当一个线程完成工作时，它会自己获得下一个任务。主线程只是监视以确保 n 个线程仍然处于活动状态。

4) 事件处理 - 与 3 相同，除了当线程完成任务时，它会在死亡前触发 ImFinished 事件。ImFinished 事件处理程序启动一个新线程。这看起来就像 3，但开销更大（因为不断创建新线程）

5) 别的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:33:43.133

[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)使整个事情变得微不足道：

```
var queue = new BlockingCollection<Action>();

int numWorkers = 5;

for (int i = 0; i < numWorkers; i++)
{
    Thread t = new Thread(() =>
    {
        foreach (var action in queue.GetConsumingEnumerable())
        {
            action();
        }
    });
    t.Start();
} 
```

然后，您可以让主线程在启动工作程序之后（或之前，如果需要）将项目添加到阻塞集合中。您甚至可以生成多个生产者线程以将项目添加到队列中。

请注意，更传统的方法是使用`Tasks`而不是直接使用`Thread`类。我首先不建议这样做的主要原因是您特别要求运行的线程的确切数量（而不是最大数量），并且您对`Task`对象的运行方式没有太多控制（这很好；它们可以代表您进行优化）。如果该控制不像您所说的那么重要，那么以下可能最终会更可取：

```
var queue = new BlockingCollection<Action>();

int numWorkers = 5;

for (int i = 0; i < numWorkers; i++)
{
    Task.Factory.StartNew(() =>
    {
        foreach (var action in queue.GetConsumingEnumerable())
        {
            action();
        }
    }, CancellationToken.None, TaskCreationOptions.LongRunning, TaskScheduler.Default);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:55:47.533

这可以通过[TPL 数据流库](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)轻松实现。

首先，假设您有一个[`BufferBlock<T>`](http://msdn.microsoft.com/en-us/library/hh160414.aspx)，这是您的队列：

```
var queue = new BufferBlock<T>(); 
```

然后，您需要对块执行的操作，这由[`ActionBlock<T>`类](http://msdn.microsoft.com/en-us/library/hh194684.aspx)表示：

```
var action = new ActionBlock<T>(t => { /* Process t here */ },
    new ExecutionDataflowBlockOptions {
        // Number of concurrent tasks.
        MaxDegreeOfParallelism = ..., 
    }); 
```

请注意上面的构造函数，它需要一个实例[`ExecutionDataflowBlockOptions`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.aspx)并将[`MaxDegreeOfParallelism`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism.aspx)设置为您希望同时处理的多个并发项目。

在表面之下，Task Parallel Library 用于处理为任务分配线程等。TPL Dataflow 旨在成为更高级别的抽象，它允许您调整所需*的*并行度/节流/等。

例如，如果您不希望缓冲任何项目`ActionBlock<TInput>`（希望它们存在于 中）`BufferBlock<T>`，您还可以设置[`BoundedCapacity`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.boundedcapacity.aspx)`ActionBlock<TInput>`正在处理的项目，以及保留的项目）：

```
var action = new ActionBlock<T>(t => { /* Process t here */ },
    new ExecutionDataflowBlockOptions {
        // Number of concurrent tasks.
        MaxDegreeOfParallelism = ..., 

        // Set to MaxDegreeOfParallelism to not buffer.
        BoundedCapacity ..., 
    }); 
```

此外，如果您想要一个新的、新鲜的[`Task<TResult>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)实例来处理每个项目，那么您可以将[`MaxMessagesPerTask`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.maxmessagespertask.aspx)设置为一个，表示每个都`Task<TResult>`将处理一个项目：

```
var action = new ActionBlock<T>(t => { /* Process t here */ },
    new ExecutionDataflowBlockOptions {
        // Number of concurrent tasks.
        MaxDegreeOfParallelism = ..., 

        // Set to MaxDegreeOfParallelism to not buffer.
        BoundedCapacity ..., 

        // Process once item per task.
        MaxMessagesPerTask = 1,
    }); 
```

请注意，根据您的应用程序正在运行的其他任务数量，这可能对您来说是最佳的，也可能不是最佳的，您可能还需要考虑为通过`ActionBlock<TInput>`.

从那里开始，通过调用[方法](http://msdn.microsoft.com/en-us/library/hh462727.aspx)`BufferBlock<T>`将 链接到是一件简单的事情：`ActionBlock<TInput>`[`LinkTo`](http://msdn.microsoft.com/en-us/library/hh462727.aspx)

```
IDisposable connection = queue.LinkTo(action, new DataflowLinkOptions {
    PropagateCompletion = true;
}); 
```

您在此处将该[`PropogateCompletion`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowlinkoptions.propagatecompletion.aspx)设置为 true ，以便在等待 时`ActionBlock<T>`，将完成发送到`ActionBlock<T>`您可能随后等待的（如果/当没有更多项目要处理时）。

请注意，如果您希望删除块之间的链接，您可以在调用返回的[接口实现上调用该](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)[`Dispose`方法。](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)`LinkTo`

[`Post`最后，您使用以下方法](http://msdn.microsoft.com/en-us/library/hh194836.aspx)将项目发布到缓冲区：

```
queue.Post(new T()); 
```

当你完成（如果你曾经完成），你调用[`Complete`方法](http://msdn.microsoft.com/en-us/library/hh160278.aspx)：

```
queue.Complete(); 
```

然后，在操作块上，您可以通过等待[属性](http://msdn.microsoft.com/en-us/library/hh194800.aspx)[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)公开的实例等到它完成：[`Completion`](http://msdn.microsoft.com/en-us/library/hh194800.aspx)

```
action.Completion.Wait(); 
```

希望它的优雅是显而易见的：

*   您不必管理新`Task`实例/线程/等的创建来管理工作，这些块会根据您提供的设置为您完成（这是基于*每个块的*）。
*   更清晰的关注点分离。缓冲区与动作分离，所有其他块也是如此。您构建块，然后将它们链接在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:49:18.357

我喜欢模型#3，并且以前使用过它；它减少了启动和停止的线程数量，并使主线程成为真正的“主管”，减少了它必须做的工作。

正如 Servy 所指出的， System.Collections.Concurrent 命名空间有一些在这里非常有价值的结构。ConcurrentQueue 是一种线程安全的 FIFO 集合实现，旨在用于此类模型；一个或多个“生产者”线程将元素添加到队列的“输入”端，而一个或多个“消费者”从另一端取出元素。如果队列中没有任何内容，则获取项目的调用仅返回 false；您可以通过退出任务方法来对此做出反应（然后主管可以决定是否启动另一个任务，可能通过监视队列的输入并在更多项目进入时加速）。

如果队列没有任何内容，BlockingCollection 添加了导致线程在尝试从队列中获取值时等待的行为。它还可以配置为具有最大容量，超过该容量将阻止“生产者”线程添加更多元素，直到有可用容量为止。BlockingCollection 默认使用 ConcurrentQueue，但您可以根据需要将其设置为 Stack、Dictionary 或 Bag。使用此模型，您可以让任务无限期地运行；当无事可做时，它们会简单地阻塞，直到至少有一个可以处理，因此主管必须检查的只是任务出错（任何强大的线程工作流模式的关键元素）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T16:47:12.767

我是一个VB的人，但你可以很容易地翻译：

```
Private Async Sub foo()

    Dim n As Integer = 16
    Dim l As New List(Of Task)
    Dim jobs As New Queue(Of Integer)(Enumerable.Range(1, 100))

    For i = 1 To n
        Dim j = jobs.Dequeue
        l.Add(Task.Run((Sub()
                            Threading.Thread.Sleep(500)
                            Console.WriteLine(j)
                        End Sub)))
    Next

    While l.Count > 0
        Dim t = Await Task.WhenAny(l)
        If jobs.Count > 0 Then
            Dim j = jobs.Dequeue
            l(l.IndexOf(t)) = (Task.Run((Sub()
                                             Threading.Thread.Sleep(500)
                                             Console.WriteLine(j)
                                         End Sub)))
        Else
            l.Remove(t)
        End If
    End While

End Sub 
```

有一篇来自 Stephen Toub 的文章，为什么你不应该以这种方式使用 Task.WhenAny ......有一个大的任务列表，但是对于“一些”任务，你通常不会遇到问题

这个想法很简单：您有一个列表，您可以在其中添加尽可能多的（正在运行的）任务，以并行运行。然后你（a）等待第一个完成。如果队列中仍有作业，则将作业分配给新任务，然后 (a) 再次等待。如果队列中没有作业，您只需删除已完成的任务。如果你的任务列表和队列都是空的，你就完成了。

Stephen Toub 文章：http: [//blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)

# sql - MSSQL 备份 - 我可以编写一个脚本来检查数据库是否在备份之前被修改过？

> ID：13568997
> 
> 赞同：2
> 
> 时间：2012-11-26T16:29:32.427
> 
> 标签：sql, sql-server, database-administration

问题确实在标题中，我想知道我是否可以检查自上次备份以来数据库是否已被修改，因为我的公司非常零星地更改数据，我们最终得到了很多完全相同的备份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:35:27.787

您可以查询对任何索引的最后更改。这包括对表的更改，因为表存储为一种特殊形式的索引（集群或堆）：

```
select  max(last_user_update)
from    sys.dm_db_index_usage_stats ius
join    sys.databases db
on      ius.database_id = db.database_id
where   db.name = 'YourDbName' 
```

这些统计信息在服务器重新启动后重置。您可以通过以下方式找到服务器重新启动时间：

```
select  create_date
from    sys.databases
where   database_id = 2 -- tempdb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:37:15.503

最简单的方法是使用“上次更新”字段在您的架构中跟踪这一事实。*您可以有一个“全局”值（这在您可能没有任何*变化的情况下很有用，但如果有*任何*变化，您应该备份它）和/或每个表中的一列。您可以使用触发器管理此字段，因此您的任何应用程序都不必关心该字段是否存在，但如果您的应用程序在没有实际更改数据的情况下对记录执行更新，您可能会得到误报。

然后很简单；将备份设置为计划作业，基于查询检查任何和所有“上次更新”字段以查看它们是否比上次备份日期更新（您也可以将其放在架构中的某个位置以供快速参考）。

# asp.net - 将现有实体框架添加到新的 asp.net 应用程序

> ID：13568998
> 
> 赞同：0
> 
> 时间：2012-11-26T16:29:34.137
> 
> 标签：asp.net, entity-framework

我有一个在一个应用程序中创建的实体框架模型，我想将它导入（？）到一个新的 asp.net 应用程序中。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:34:15.960

我喜欢将我的 EF 模型保存在他们自己的类库项目中。然后，您可以在希望包含模型的任何新解决方案中打开现有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:52:50.763

例如，如果您使用 Class Libary 项目来制作您的 EF 模型，您可以使用“项目参考”将此项目添加到另一个项目

# javascript - 从 iframe 关闭父弹出窗口

> ID：13568999
> 
> 赞同：2
> 
> 时间：2012-11-26T16:29:35.250
> 
> 标签：javascript, html, iframe

在 domain1.com 上，我有一个链接可以打开 domain2.com 的弹出窗口。弹出窗口中有一个 iframe，也托管在 domain2.com 上。在 iframe 中，我试图关闭弹出窗口。我似乎对如何做到这一点感到困惑。从 iframe 中，我是否调用弹出窗口中定义的 javascript 函数来关闭窗口？我可以直接从 iframe 关闭窗口吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T16:33:51.290

使用 this:`parent.window.close();`或 this:`top.window.close();` 你应该可以关闭它。