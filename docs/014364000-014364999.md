# StackOverflow 问答 14364000-14364999

# winforms - 如何显示访问附件中的图像并在 radgridview 中列出它们

> ID：14364000
> 
> 赞同：0
> 
> 时间：2013-01-16T17:17:23.757
> 
> 标签：winforms, ms-access, telerik, radgridview

我有以下代码

```
string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + txtFileLocation.Text;

using (DbConnection conn = new OleDbConnection(connectionString))
        {
            conn.Open();

            DbCommand command = conn.CreateCommand();
            string idfield = txtIDField.Text;                
            string picfield = txtPictureField.Text;              

            command.CommandText = "select " + idfield + ", " + picfield + " from " + selectedTable;
            command.CommandType = CommandType.Text;

            DbDataReader reader = command.ExecuteReader();    
            gridResults.DataSource = reader;                

            conn.Close();

        } 
```

该数据库是您可能从连接字符串中看到的访问数据库，我提供的数据库也将它们的图像存储在数据库中，作为图像附件。

每当我加载网格时，它都会显示随机的东西:(例如。 ![一个随机的时刻](../Images/483b76604d64a7a61a0ccf2587dd1e7a.png) ![其他](../Images/43cb0f01d176668ed58993cd655383a5.png) ![呜呜……还有一个](../Images/4f7f820635cc3cdbe45ec5ac881e6123.png)

我不熟悉数据库的连接，所以这可能是一个简单的问题，如何在我的表单中启用我的图片列表？

# javascript - 评估 ajax 响应中的脚本

> ID：14364001
> 
> 赞同：0
> 
> 时间：2013-01-16T17:17:24.620
> 
> 标签：javascript, asp.net-mvc, jquery

我有以下代码：

```
$.ajax({
    type: 'POST',
    url: urlData,
    data: { OwnerId: ownerIdData, Text: textData },
    success: function (data) {
        $('#post-container').prepend(data);
    },
    error: function () {
    }
}); 
```

现在我想`eval`在成功函数中包含变量数据的脚本。我该怎么做？提前致谢。

编辑

我有以下表格：

```
<form class="new-post-form">

    <textarea id="post-creation-text-input" name="Text" rows="10"> Write something ... </textarea>
    <input type="hidden" value="@Model.OwnerId" id="post-creation-id-input"/>
    <input type="submit" value="Post" id="post-creation-submit-input" />

    <script type="text/javascript">
        $('#post-creation-submit-input').click(function (event) {
            event.preventDefault();
            var textData = $('#post-creation-text-input').val();
            var ownerIdData = $('#post-creation-id-input').val();
            var urlData = '@Url.Action("Create", "Posts")';

            $.ajax({
                type: 'POST',
                url: urlData,
                data: { OwnerId: ownerIdData, Text: textData },
                success: function (data) {

                    $('#post-container').prepend(data);

                    });
                },
                error: function () {
                }
            });

        });
    </script>

</form> 
```

现在ajax响应如下图：

```
@using Facebook.Presentation.Web.Utils
@model Facebook.Presentation.Web.ViewModels.Posts.PostViewModel

<div class="post" id ="last-post">
    <h3>@Html.UserName(Model.Author)</h3>
    <br/>
    <div>
        @Html.DisplayFor(model => model.Text)
    </div>
    <br/>
    @{
        Html.RenderPartial("_CommentsPartial", Model.Comments, new ViewDataDictionary { { "ActionName", "Comment" }, { "ControllerName", "Posts" } });
    }  
</div> 
```

此响应还包含必须评估的脚本。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:20:42.310

使用`jQuery.getScript()`功能。文档：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# java - 关于 .jar 文件和通过 PHP 运行 java 程序的问题

> ID：14364002
> 
> 赞同：0
> 
> 时间：2013-01-16T17:17:26.607
> 
> 标签：java, php, jar, exec

我正在构建一个网站，该网站将使用文件来呈现社交图。这些文件由 JAVA 的后端创建。这个 JAVA 程序由 4 个类和 4 个库组成。我知道为了通过 PHP 运行 JAVA 程序，我需要使用“exec”命令调用它，但我看到的所有示例都有 .jar 可执行文件，而不是语法中的 .java 文件。所以，我想问两个问题：

1.  是否可以在不创建 .jar 文件的情况下仅从 PHP 调用 .java 主类？如果是这样，“exec”命令的语法是什么？
2.  如果我必须创建 .jar 可执行文件，我是否只需将其放在网站文件夹中并调用它？我的意思是，.jar 文件是否包含程序所需的所有类和库？我不谈论 JAVA 库，我有 4 个特定的库（MongoDB、Neo4j、GEXF 解析器和 Lucene DB），它们不是 Java 默认值的一部分。提前致谢，请原谅我的语法和拼写错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:26:24.917

您必须至少将 .java 文件编译成 .class 文件。如果它们在 jar 文件中会更容易，但这不是必需的。

1) a) java -cp /location/to/.class/files

b) java -jar /location/to/the.jar

2) jar 文件不必是可执行的，但如果这样更容易，请正确设置清单，然后就可以了。

当您说库时，您是指其他 .jar 文件还是本机 .dll 或 .so 库？如果是后者，您必须设置库路径才能找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:26:12.733

SourceForge 上有一个[PHP-Java 桥接](http://php-java-bridge.sourceforge.net/doc/how_it_works.php)项目。此外，您可以通过将后端进程作为 servlet 运行来公开后端进程，这可能是正确的做法。如果一切都失败了，你可以“执行”它。

# java - 作为字节数组而不是字符串接收的 MQ 消息

> ID：14364003
> 
> 赞同：1
> 
> 时间：2013-01-16T17:17:29.663
> 
> 标签：java, jms, ibm-mq

我正在使用 Websphere MQ 并使用 Spring 集成和 jms 适配器从队列中读取消息。

当我手动将消息添加到队列时，应用程序正在读取它们并将数据作为 a 读取`String`，一切都很好。

但是，当外部方将消息添加到队列时，应用程序会将它们作为字节数组读取，然后抛出此异常：

```
Caused by: java.lang.ClassCastException: [B cannot be cast to java.lang.String 
```

这些消息在 MQExplorer 中对我来说是一样的。

虽然我注意到了一个 Format 列，其中作为字符串处理`MQSTR`的消息具有值，而作为 Byte[] 处理的消息在其中没有任何内容。这可能有关系吗？如果有任何想法如何设置消息的“格式”？

有谁知道是什么决定了消息的有效负载内容类型，这样我至少可以重新创建问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:51:23.500

我以前也遇到过这种情况。外部方可能没有使用 JMS，但可能正在使用 MQI 或用于 Java 的 Websphere MQ 类。

这意味着您可能会以字节消息的形式接收消息。

[本文](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaw.doc/jm25524_.htm)介绍 MQ 消息到 JMS 消息的转换。

我会与外部方交谈并询问他们如何发送消息。他们可能必须向您提供他们正在设置的 MQMD 属性的详细信息。您可能必须在 MessageListener 中检索这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-29T00:41:58.560

在本地 MQ 消息发送方，设置 mqmd["Format"] = 'MQSTR' 将确保消息以 jms_text 格式发送，否则默认为字节格式。

我让它在 Python2.7 中与 Pymqi 一起工作。

# java - WSO2 Carbon 管理控制台异常

> ID：14364004
> 
> 赞同：2
> 
> 时间：2013-01-16T17:17:33.127
> 
> 标签：java, web-services, wso2, wso2esb, wso2carbon

我正在使用 WSO2Carbon 4.0.3 版，并通过安装 WSO2 WSAS 应用程序服务器和 WSO2 ESB 对其进行了配置。

我创建了一个 RESTful (JAX-RS) 示例 Web 服务并将其部署到 WSO2 Application Aerver (WSO2 AS)。我使用浏览器测试了部署的服务，它工作正常。

在进行试验时，我决定使用 WSO2 ESB 与示例 Web 服务进行交互。我使用 WSO2 Carbon 管理控制台成功创建了 Web 服务的端点。

现在，当我尝试查看使用管理控制台上的菜单创建的端点时，只显示一个空白页面。查看 wso2server 控制台日志，我看到每次尝试访问端点时都会抛出此异常：

```
[2013-01-16 11:07:43,064] ERROR {org.apache.tiles.jsp.context.JspTilesRequestContext} -  JSPException while including path '/endpoints/index.jsp'. 
javax.servlet.jsp.JspException: ServletException while including page.
    at org.apache.tiles.jsp.context.JspUtil.doInclude(JspUtil.java:102)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:88)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:82)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:465)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:140)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:117)
    at org.apache.tiles.jsp.taglib.RenderTagSupport.execute(RenderTagSupport.java:171)
    at org.apache.tiles.jsp.taglib.RoleSecurityTagSupport.doEndTag(RoleSecurityTagSupport.java:75)
    at org.apache.tiles.jsp.taglib.ContainerTagSupport.doEndTag(ContainerTagSupport.java:80)
    at org.apache.jsp.admin.layout.template_jsp._jspx_meth_tiles_insertAttribute_7(template_jsp.java:539)
    at org.apache.jsp.admin.layout.template_jsp._jspService(template_jsp.java:290)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.eclipse.equinox.http.servlet.internal.RequestDispatcherAdaptor.forward(RequestDispatcherAdaptor.java:30)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor$RequestDispatcherAdaptor.forward(ContextPathServletAdaptor.java:258)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:198)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:185)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:419)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:370)
    at org.wso2.carbon.ui.action.ActionHelper.render(ActionHelper.java:52)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:101)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

谁能帮我解决这个异常？

WSO2 文档非常模糊，缺乏，我看到分散在各个博客中的示例/信息。我发现很难拼凑和收集有关 WSO2 ESB 设置、理解序列、中介、它们如何相互交互、为什么必须配置它们等的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:02:14.650

我已经看到当配置中出现一些错误时会发生异常。您可以尝试转到 Service Bus -> Source View 并查看您创建的内容是否确实存在 - 如果您可以看到它，请尝试将其删除，这可能会消除异常。如果您无法删除以这种方式创建的端点，请尝试通过以下方式删除它：

```
$ESB_HOME/repository/deployment/server/synapse-configs/default/endpoints/ 
```

如果您发布您正在尝试的端点配置可能会有所帮助 - 以便重现错误。

# c# - 在 .net gridview 中，模板字段可以填充下拉列表

> ID：14364007
> 
> 赞同：0
> 
> 时间：2013-01-16T17:17:48.573
> 
> 标签：c#, asp.net, .net, gridview

我有数据从动态数据库返回到`Gridview`.net 中，其中一个字段有一长串以分号分隔的值。我能够使用换行符代替分号来显示这些数据，但是由于该字段中可能有多达 20 个值，我确信有更好的显示方式。

我使用以下代码来创建和修改模板字段：

```
<asp:TemplateField HeaderText="Amalgamation"
                    SortExpression="Amalgamation">
                    <ItemTemplate>
                        <%# Eval("Amalgamation").ToString().Replace(";", "<br />")%>
                    </ItemTemplate>
                </asp:TemplateField> 
```

将填充此字段的数据示例是：`100001;100002;600001;600006`。

**更新：**我试过这个但没有快乐。在 html 中：

`<%#PopulateArray((string)(Eval("Amalgamation")))%> <asp:DropDownList ID="ddlStrings" AutoPostBack="true" runat="server"></asp:DropDownList>`

那么这个函数在后面的代码中：

```
public object PopulateArray(string s) 
{ 
string[] sArray = s.Split(';'); 
DropDownList ddl = new DropDownList(); 
ddl = (DropDownList)this.Page.FindControl("ddlStrings"); 
ddl.DataSource = sArray; 
ddl.DataBind();
return sArray;
} 
```

我得到一个 NullReferenceException 就行了：ddl.DataSource = sArray

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:38:42.903

我假设您只想显示此数据。如果您希望用户能够编辑数据但能够将其重新组合成一个分隔字符串，这是一个更复杂的问题——以至于您可能需要重新考虑如何将数据存储在数据库中.

将分隔字符串转换为字符串数组的最简单方法是使用以下`String.Split`方法：

```
string s = "111;333;555;";
string[] sParts = s.Split(";"); 
```

但是，您可能必须在代码隐藏中执行此操作，而不是在绑定表达式中，因为您不仅需要拆分字符串，还可能希望将其绑定到某些东西。有许多选项：您可能喜欢`BulletedList`Web 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:22:56.620

绑定到下拉列表似乎是一个好主意...如果您需要在其中编辑它`<EditItemTemplate>`，为了显示目的，这已经足够了...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:34:55.693

好的，我已经知道了。我引用的是 Dropdown 的 ID，而不是引用它的每一行实例。我使用参数将代码放在gridview的行创建事件中：

```
onrowcreated="ArrayDataView_RowCreated" 
```

每次在表中创建一行时，我都使用分号分隔符拆分结果。我还使用用于数据库的对象类（“MyData”）转换每个结果。然后我不得不使用“if”语句过滤掉gridview的页眉和页脚数据行。这是后面代码中的行创建代码：

```
 protected void ArrayDataView_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DropDownList ddl = (DropDownList)e.Row.FindControl("ddlStrings");
            ddl.DataSource = (e.Row.DataItem as MyData).Amalgamation.Split(';');
        }       
    }
} 
```

我在 aspx 页面中删除了 eval 函数，并且 gridview 中的项目模板被简化为容纳下拉列表：

```
<ItemTemplate>
<asp:DropDownList ID="ddlStrings" AutoPostBack="false" runat="server"></asp:DropDownList></ItemTemplate> 
```

感谢所有帮助过的人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:43:22.927

我认为你可以这样做，但如果它只是为了显示，你就不必绑定到下拉列表。您可以只添加标记来制作标准的 html 下拉列表。

如果您想花哨，那么返回一些带有显示前几个项目的html的函数怎么样，如果还有更多，还有一些脚本来扩展它以显示整个列表， 或类似的东西？

# python - 用户的 GAE 数据存储实体 ReferenceProperty()？

> ID：14364019
> 
> 赞同：0
> 
> 时间：2013-01-16T17:18:35.517
> 
> 标签：python, google-app-engine, google-cloud-datastore

```
class User(db.Model):
    username = db.StringProperty(required=True)
    password = db.StringProperty(required=True)
    email_address = db.StringProperty()

class TaskPost(db.Model):
    user = db.ReferenceProperty(User, collection_name='taskposts')
    category = db.StringProperty()
    title = db.StringProperty(required=True) 
```

尝试使用与实体的一对多关系。如果您添加帖子，它将与用户相关联。

```
user = User(username=self.request.cookies.get("username"))
TaskPost(user=user,others=others).put()

  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 641, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property password is required 
```

因此，这似乎不是将用户表与帖子相关联的最佳方式，因为用户在发布时不应输入密码。有人有更好的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:06:22.703

您的第一行不是检索用户，而是创建一个新用户。如果您想将帖子与现有用户关联，您需要先查找您的用户，然后再关联他们。尝试这样的事情：

```
q = User.all()
q.filter("username =", self.request.cookies.get('username'))
user = q.get()
TaskPost(user=user,others=others).put() 
```

# oracle11g - 第一次无法连接Oracle 11g

> ID：14364030
> 
> 赞同：1
> 
> 时间：2013-01-16T17:18:58.570
> 
> 标签：oracle11g, windows-7-x64

我刚刚在 Windows 7 上安装了 Oracle 11g 64 位。由于我是第一次使用 Oracle 11g，然后我才在 windows xp 上使用 oracle 9i，所以遇到了一些问题。当我打开 SQL Plus 时，会出现这样的屏幕 SQL*PLUS: Release Copyright Enter user-name: 现在我想知道这个屏幕的用户名和密码。我尝试了 scott/tiger 但没有工作。实际上它得到的错误信息是 ORA-12560: TNS: protocol adapter error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:07:40.267

用户名：系统

password : 你在安装 oracle 时给的密码

我猜斯科特默认锁定在 11g 中。

# javascript - “Uncaught TypeError: Object [object Object] has no method” 是什么意思

> ID：14364031
> 
> 赞同：0
> 
> 时间：2013-01-16T17:18:58.710
> 
> 标签：javascript, jquery

所以这是一个更普遍的问题。关于为什么这个和那个返回这个错误有数百个问题，但我想更深入地了解以更快地解决这些问题。或者只是学习一些新东西。如果有人能找到解释的参考，我很乐意结束这个问题，但我就是找不到。

1.  缺少什么？
2.  是浏览器 javascript 编译器抛出错误还是 jQuery？
3.  什么是对象[对象对象]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:29:23.903

> 缺少什么？

您正在尝试调用不存在的对象的方法。例如：

```
var foo = {};
foo.bar(); 
```

如果该属性确实存在，但不是函数，您将收到类似于以下内容的错误：

> `TypeError: Property 'bar' of object #<Object> is not a function`

*注意：*不同的浏览器显示不同的错误信息，这个来自 Chrome。

* * *

> 是浏览器 javascript 编译器抛出错误还是 jQuery？

它是 JavaScript 运行时引擎。它与 jQuery 无关。

* * *

> 什么是对象[对象对象]？

`[object Object]`是对象的默认字符串表示。尝试：

```
alert({}); 
```

您可以通过实现以下`toString`方法来覆盖它：

```
var foo = {
    toString: function() {
        return "I'm a boring object.";
    }
};
alert(foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:30:19.410

[object Object] 是对象的默认 toString 方法返回的内容。当您看到此错误时，这意味着您正在尝试调用一个对象上的方法，该对象没有具有该名称的属性，并且尚未覆盖其 toString 方法。

如果您看到此消息，您应该使用 firebug 或其他调试工具检查它发生在哪一行，并尝试了解为什么消息中“方法”之后的属性名称在调用对象上不存在。

This has nothing in particular to do with jQuery. It is simply the default error thrown when a property doesn't exist on an object.

# ssas - 定义分区切片器时出现任意形状的集合错误

> ID：14364033
> 
> 赞同：0
> 
> 时间：2013-01-16T17:19:09.053
> 
> 标签：ssas, ssas-2008

我正在尝试调整在我的多维数据集中为关联分区设计切片器的概念。这是我通常避免的一种做法，因为我熟悉 Auto-Slice 概念，其中创建 Slicers 更多地被视为选项而不是适当的设计。

然而，这个错误正变得令人烦恼，如果没有人可以为臭名昭著的“当前上下文中不允许任意形状的集合”错误提供合理的解决方案，我正在考虑回过头来避免使用它们。

尝试使用使用日历日期层次结构的切片器处理我的多维数据集时收到此错误。这是分区切片器之一的示例：

```
{[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-01T00:00:00]
,[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-02T00:00:00]
,[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-03T00:00:00]
,[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-04T00:00:00]
,[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-05T00:00:00]
,[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-06T00:00:00]
,[Calendar Dates].[Calendar Dates].[Calendar Year].&[2007].&[QUARTER NUMBER 2].&[APRIL].&[2007-04-07T00:00:00]} 
```

我的第一个不满是我必须手动指定集合的​​每个成员，因为禁止使用范围 (:) 运算符。我维护的立方体的大小是巨大的，仅仅创建所需的分区数量本身就是一项极端的任务，所以不使用范围运算符只是恕我直言的一个糟糕的限制。我看到 MSConnect 上有一个更正此设计问题的请求，但我注意到的最后一个响应是 SQL2008 R2 为时已晚。没有提到打算在以后的版本中解决它。

请参阅：[https ://connect.microsoft.com/SQLServer/feedback/details/339861/automatically-resolve-arbitrary-shape-sets-to-subcubes](https://connect.microsoft.com/SQLServer/feedback/details/339861/automatically-resolve-arbitrary-shaped-sets-to-subcubes)

通过我的抱怨会话，我看不到我定义的集合在哪里或为什么会创建任意形状。此外，查看关于什么构成任意形状集的示例，我看不出任何相关性表明我的集合属于该类别。

我需要做些什么来规避问题并避免烦人的错误？

非常欢迎任何意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:21:50.223

想通了。

在我查看的所有可能导致此错误的示例中，尝试在分区上定义一个切片，该切片需要跨不同维度的交叉连接导致错误，“在当前上下文中不允许任意形状的集合”。

尽管我定义的集合没有使用跨不同维度的显式交叉连接，但集合的元素是用户定义层次结构的产物，因此生成切片需要隐式交叉连接。

为了减轻隐式交叉连接，我将我的集合中的成员重新创建为基本属性级别，瞧！

所以修改后的集合现在是：

```
{[Calendar Dates].[Dates].&[2007-04-01T00:00:00]
,[Calendar Dates].[Dates].&[2007-04-02T00:00:00]
,[Calendar Dates].[Dates].&[2007-04-03T00:00:00]
,[Calendar Dates].[Dates].&[2007-04-04T00:00:00]
,[Calendar Dates].[Dates].&[2007-04-05T00:00:00]
,[Calendar Dates].[Dates].&[2007-04-06T00:00:00]
,[Calendar Dates].[Dates].&[2007-04-07T00:00:00]} 
```

并且错误已解决。

# git - repo.path 即使在创建初始化坚固的 repo 后也不返回任何内容

> ID：14364034
> 
> 赞同：0
> 
> 时间：2013-01-16T17:19:13.300
> 
> 标签：git, libgit2, rugged

我使用下面的代码创建了一个 git 存储库。

```
require 'rugged'
$repopath='D:\Test12'
Rugged::Repository.init_at($repopath, true)
repo = Rugged::Repository.new($repopath)
puts repo.path 
```

但是，当我将上述代码作为 ruby​​ myfile.rb 执行时，我没有得到任何输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:19:46.033

反斜杠应该加倍：`$repopath='D:\\Test12'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:41:17.413

反斜杠没有帮助..下载了 0.17.0.b7 并且它工作了.. 之前在 0.16 上工作..

# jquery - 将 jQuery 添加到 WordPress

> ID：14364037
> 
> 赞同：1
> 
> 时间：2013-01-16T17:19:17.203
> 
> 标签：jquery, wordpress

我只是想知道是否有人可以帮助我解决这个问题。

在我的 WordPress 主题中，在我在 jQuery 中添加的 functions.php 文件中，就像这样......

```
wp_register_script(‘jquery’, ‘http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'); 
```

我已经这样做了一段时间，但是今天它停止了工作，为了解决这个问题，我不得不将其更改为以下内容，请注意 1.8.3 版本号。

```
wp_register_script(‘jquery’, ‘http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'); 
```

谁能告诉我为什么会发生这种情况以及这种情况是否可能再次发生，如果是这样，我能做些什么来阻止它发生吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:29:16.680

它今天停止工作的原因是 JQuery 1.9 昨天刚刚发布，这弃用了一些您可能一直在使用的功能。将`https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js`始终链接到最新发布的代码点，因此您在不知不觉中从以前的版本切换到 1.9 并且您的一些功能停止工作。通过使用`http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js`，您将始终使用相同版本的 jquery，即使 jquery 2.0 在接下来的几周（或几天或几个月）内发布，您的代码也会更加稳定。我在您的问题评论中提供的链接更深入地说明了为什么自动使用最新版本是不好的。[http://www.impressivewebs.com/linking-to-jquery/](http://www.impressivewebs.com/linking-to-jquery/)。

这是 1.9 版本说明的链接，它解释了您意外实施的更改 - [http://jquery.com/upgrade-guide/1.9/#changes-of-note-in-jquery-1-9](http://jquery.com/upgrade-guide/1.9/#changes-of-note-in-jquery-1-9)

这是 1 月 15 日关于 1.9 和 2.0 的 jquery 博客文章 - [http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-发布/](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:22:36.747

请不要注册您自己的 jQuery 副本，甚至不要从 CDN 注册。你需要非常小心地做这些事情，否则你会**破坏事情**然后需要寻求帮助......就像现在一样！

如果您想使用 CDN 托管的 jQuery 副本、jQuery-ui 和其他一些 Google 托管的脚本，请使用插件[Use Google Libraries](http://wordpress.org/extend/plugins/use-google-libraries/)。它将使用与您的 WordPress 副本相同的版本，因此您将避免使用较新*或较旧*的版本。

# c++ - PDCurses resize_term 任意失败或成功

> ID：14364041
> 
> 赞同：1
> 
> 时间：2013-01-16T17:19:22.390
> 
> 标签：c++, resize, curses, pdcurses

我正在尝试调整使用 PDCurses 打印的终端窗口的大小。它只是有时有效。否则它只是将自己设置为默认大小，甚至不返回错误。

有效尺寸示例：

```
resize_term(50, 50);
resize_term(100, 100);
resize_term(51, 100);
resize_term(50, 51);
resize_term(2, 60); 
```

不起作用的尺寸示例：

```
resize_term(51, 51);
resize_term(51, 50);
resize_term(100, 51);
resize_term(60, 2); 
```

有谁知道为什么这些特定的尺寸范围不起作用？

（另外，请记住 resize_term 将宽度作为*第二个*参数，而不是第一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T22:31:31.410

我注意到当curses“认为”它可能超出（物理，现实世界）屏幕的范围时，它不会调整终端的大小。

抱歉缺少细节，我不知道这种行为的潜在机制。

**编辑**：
这是来自 PDCurses 文档的引用：

“resize_term() 实际上是两个函数：当使用 nlines 和 ncols 的非零值调用时，它会**尝试**将屏幕大小调整为给定大小。[...]”

显然强调了“尝试”，但没有提供任何进一步的信息......

# c# - EF5 的身份生成错误

> ID：14364043
> 
> 赞同：2
> 
> 时间：2013-01-16T17:19:30.303
> 
> 标签：c#, entity-framework, entity-framework-5

在我的 DbContext 中，我重写了 SaveChanges 方法来为要添加到数据库的实体生成 Guid。除了在共享主键的情况下，这工作正常。

它生成不同的 ID，而不是由实体共享的 ID。有没有办法检查关系的类型？

```
 public override int SaveChanges()
  {
      foreach (var entry in ChangeTracker.Entries().Where(e => e.State == EntityState.Added))
      {
          var t = entry.Entity.GetType();
          if (t.GetProperty("Id") == null)
              continue;

          var info = t.GetProperty("Id").GetCustomAttributes(typeof (DatabaseGeneratedAttribute), true).Cast<DatabaseGeneratedAttribute>();
          if (!info.Any() || info.Single().DatabaseGeneratedOption != DatabaseGeneratedOption.Identity)
          {
              if (t.GetProperty("Id").PropertyType == typeof(Guid) && (Guid)t.GetProperty("Id").GetValue(entry.Entity, null) == Guid.Empty)
                  t.GetProperty("Id").SetValue(entry.Entity, Guid.NewGuid(), null);
          }
      }
      return base.SaveChanges();
  } 
```

# mysql - 来自 MYSQL 的谷歌图表

> ID：14364048
> 
> 赞同：0
> 
> 时间：2013-01-16T17:19:43.623
> 
> 标签：mysql, graph

我在 MYSQL 中有一个查询，它返回如下表：

```
Name |    Date    | Amount
--------------------------
Peter| 2012-03-01 | 7
Marc | 2012-03-01 | 2
Marc | 2012-03-02 | 1
Peter| 2012-03-03 | 2
Peter| 2012-03-07 | 9
Marc | 2012-03-07 | 3
Jake | 2012-03-09 | 5 
```

我想将此信息显示为谷歌折线图，如何将此查询结果转换为谷歌图表的数据源，以显示每个日期每个人的值？是否也可以制作一个累积图，例如：彼得在 2012 年 3 月 3 日的值是 9 (7+2)。

提前致谢！

# apache - Apache HTACCESS 路由与 Codeigniter 在似乎是根级文件夹下

> ID：14364051
> 
> 赞同：0
> 
> 时间：2013-01-16T17:19:47.590
> 
> 标签：apache, .htaccess, codeigniter

我有一个有趣的问题，我似乎无法解决。我们有一个 URL，该 URL 已设置为将该 URL 的所有请求（通过另一台服务器上的 nginx）路由到我的 Codeigniter 应用程序（存在于另一台服务器上）。例如，URL 是这样的：

[http://www.site.com/myappname/controller/function/parameter](http://www.site.com/myappname/controller/function/parameter)

在 Codeigniter 中的正常情况下，它将尾部正斜杠之后的第一个元素路由到控制器类，然后将第二个元素路由到类中的函数，第三个/等作为该函数的参数。

我需要它做的是忽略 URL 中的“myappname”并让它通过 URL 发送而不发送。“myappname”不是服务器上的文件夹。

我不是 100% 确定是否需要添加新的 HTACCESS 规则，或者是否可以通过 Codeigniter 以编程方式执行此操作。

我当前的 HTACCESS 文件：

```
RewriteEngine on

RewriteCond $1 !^(index\.php|sitemap\.xml|robots\.txt|public|favicon\.ico)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这是所有 Codeigniter 应用程序的基本且直接的 HTACCESS 设置，但是，使用此设置并使用上面的结构，如果我去[http://www.site.com/myappname](http://www.site.com/myappname)，带有“http://www .site.com/myappname”在 Codeigniter 配置中设置为我的 base_url，然后 Codeigniter 将其翻译为：

```
http://www.site.com/myappname/myappname 
```

所以……有人可以帮忙吗？我还尝试将以下代码添加到我的 config/routes.php 文件的顶部：

```
$_SERVER['REQUEST_URI'] = str_ireplace('/verified', '', $_SERVER['REQUEST_URI']); 
```

这实际上是部分工作的，但是现在当我从根目录请求 CSS/JS 文件时，它并没有正确地拉入这些文件，因为我使用内置的 site_url() 函数来构建基于站点的“base_url”属性的动态链接。我不认为我可以在 Codeigniter 中以编程方式 100% 执行此操作（通过覆盖系统级函数），因为我的 CSS/JS/etc 存在于我的应用程序根目录的 /public 文件夹中（这显然不包括通过我的 RewriteCond 路由） .

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:04:28.993

尝试添加[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)到您的`htaccess`：

```
RewriteEngine On
RewriteBase /myappname/
RewriteCond $1 !^(index\.php|sitemap\.xml|robots\.txt|public|favicon\.ico)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# java - 将字节（java 数据类型）值转换为位（仅包含 8 位的字符串）

> ID：14364054
> 
> 赞同：4
> 
> 时间：2013-01-16T17:19:52.500
> 
> 标签：java, byte

我需要将声明为字节数据类型的值转换为 8 位字符串。是否有任何 Java 库方法可以做到这一点？例如，它应该输入 -128 并输出“10000000”。此外，输入 -3 应该给出“11111101”。（我手动转换了这些。）

*在您认为这已被多次回答之前，请让我解释一下为什么我感到困惑。*

*“字节”这个名字有点模棱两可。因此，很难遵循其他答案。对于我的问题，`byte`指的是占用 8 位并且其值范围从 -128 到 127 的**java 数据类型**。我也不是指“字节数组”。我的问题是将单个值仅转换为其 8 位表示。而已。*

我试过这些：

```
byte b = -128;  //i want 10000000
Integer.toBinaryString(b); //prints 11111111111111111111111110000000
Integer.toString(b, 2); //prints -10000000 
```

如果没有内置方法，您能否提出任何方法（可能是位移）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T17:22:22.993

尝试

```
Integer.toBinaryString(b & 0xFF); 
```

这给出了一个浮动长度格式，例如`4`-> `100`。似乎没有获得固定长度格式的标准解决方案，即`4`-> `00000100`。这是一个单行自定义解决方案（前面带有`0b`）

```
String s ="0b" + ("0000000" + Integer.toBinaryString(0xFF & b)).replaceAll(".*(.{8})$", "$1"); 
```

# c# - 尝试创建 PrincipalContext 时代码崩溃

> ID：14364056
> 
> 赞同：2
> 
> 时间：2013-01-16T17:19:58.600
> 
> 标签：c#, wpf, principal

每当我调用此方法时，我都会崩溃。

```
 public bool findSAMAccountByName(string environmentUserName)
    {
        try
        {
            const string Domain = "someserver";
            // set up domain context
            PrincipalContext ctx = new PrincipalContext(ContextType.Domain, Domain);

            // find a user
            UserPrincipal user = UserPrincipal.FindByIdentity(ctx, environmentUserName);

            if (user != null)
            {
                // do something here....     
                string samAccountName = user.SamAccountName;
                return true;
            }
            return false;
        }

        catch (Exception e)
        {
            e.ToString();
        }
        return false;
    } 
```

内部异常说

> {“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”}

StackTrace 是

```
 at System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.GetEx(String bstrName, Object& value)
   at System.DirectoryServices.PropertyValueCollection.PopulateList()
   at System.DirectoryServices.PropertyValueCollection..ctor(DirectoryEntry entry, String propertyName)
   at System.DirectoryServices.PropertyCollection.get_Item(String propertyName)
   at System.DirectoryServices.AccountManagement.PrincipalContext.DoLDAPDirectoryInitNoContainer()
   at System.DirectoryServices.AccountManagement.PrincipalContext.DoDomainInit()
   at System.DirectoryServices.AccountManagement.PrincipalContext.Initialize()
   at System.DirectoryServices.AccountManagement.PrincipalContext.get_QueryCtx()
   at System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue, DateTime refDate)
   at System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithType(PrincipalContext context, Type principalType, String identityValue)
   at System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, String identityValue)
   at ActiveRecord.MainWindow.findSAMAccountByName(String environmentUserName) in MainWindow.xaml.cs:line 60
   at ActiveRecord.MainWindow..ctor() in MainWindow.xaml.cs:line 39 
```

* * *

我对这个方法的调用导致了崩溃

```
 if (findSAMAccountByName(Environment.UserName))
                {
                    Console.WriteLine("Username found");
                } 
```

如果我删除/注释代码，它会编译并运行良好。

* * *

## 更新：听从 DJ KRAZE 的建议后

```
const string Domain = "someserver"; 
```

将 PrincipalContext 更改为接受 2 个参数后，新的 StackTrace 为

```
 at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:39:47.607

像这样的可可开发应该可以工作..

```
const string Domain = "SomeServer.Foo.Bar.com";
const string Username = "someUserSamAccountName";

PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, Domain);
UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(principalContext,  Username); 
```

替换为您的值，如果找到用户，这应该返回。我每天与 AD 一起工作，只是用我的帐户凭据进行测试，希望这会有所帮助，如果这样更改您的方法以传递字符串 samAccount ，字符串 DomanName;

您可以遵循的硬编码示例

```
const string Domain = "SLO1.Foo.Bar.biz:389";
const string Container = @"DC=Foo,DC=Bar,DC=biz";
const string Username = @"cocoadev";//replace with actual samAccountName
PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, Domain, Container);
UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(principalContext,  username); 
```

# assembly - x86 汇编器中断代码

> ID：14364057
> 
> 赞同：1
> 
> 时间：2013-01-16T17:20:03.047
> 
> 标签：assembly, x86, interrupt, keyboardinterrupt

```
 #include <studio.h>
    #include <dos.h>
    void interrupt (*int9save) (void)
    void interrupt eliminate_multiple_press(void)
    {
    int9save=getvect(9);
    setvect(9,eliminate_multiple_press);
    asm {
    MOV AH,0
    int 16h
    MOV scan_temp,AH
    CMP ZF,0
    }
    }
    void interrupt uneliminate_multiple_press()
    {
    setvect(9,int9save);
    }
    void main(void)
    {
    char str[100];
    int check=1;
    char scan_temp;
    unsigned int scan_code ;
    eliminate_multiple_press();
    printf("enter a word\n");
    scanf("%s",str);
    scan_code=(unsigned int) scan_temp;
    printf("the word is:\n");
    printf("%s",str);
    uneliminate_multiple_press();
    return ;
    } 
```

嘿，我正在编写汇编代码.. 我正在尝试解决一个中断问题，该问题要求我将一个长按钮视为一个按钮，而我被困在这里！所以请有人可以帮助我或给我一个方向如何继续......当我按下按钮 ZF==0 并且当我离开按钮 ZF==1 这可能会有所帮助，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:47:39.270

在你自己的键盘中断处理程序中，你可以有这样的东西（这是在 YASM/NASM 语法中，未经测试）：

**编辑：**重写代码，添加注释和链接。

```
@my_int9:
    cli
    push ax     ; push ax (you can create a stack frame too, if you wish).
    push bx     ; push bx.

    in al,0x60  ; read scancode from keyboard port 60h to al.

    cmp al,[cs:last_scancode] ; compare the current and last scancodes.
    je @ready                 ; jump if its the same scancode, nothing to do.

    test al,0x80              ; test highest bit of al to see if it's release
                              ; or not.
                              ; test does logical AND without saving the result,
                              ; it only updates the flags
                              ; (and al,0x80 would be OK too).

    jnz @key_released         ; jump if it's a released key.

    ; OK, we have a new key.

@new_key:
    movzx bx,al               ; copy the scancode from al to bx.

    mov [cs:last_scancode],al ; store the current scancode into memory.

    ; Do something with the new key here.

    ; This is an example.

    mov al,1
    mov [cs:bx+keys_pressed],al ; set the corresponding byte of array to 1
                                ; (pressed).
    mov [cs:something_to_do],al ; set the flag "something to do" to 1.
                                ; (so that the main code needs to scan through
                                ; keys_pressed array only when there's at least
                                ; 1 key that hasn't been handled yet).

@key_released:
    ; Do something here upon the key release if you wish...
    ; This really depends on what do you want to if with released keys.

    ; If you want that keypresses are handled even after the corresponding key
    ; is  are released and that the the key release shouldn't cause any action,
    ; (in the case you don't poll that repeatedly), don't do anything here.
    ;
    ; If you want that keypresses are _not_ handled after the release, then set
    ; the corresponding byte of keys_pressed array to 0
    ; (uncomment the 3 lines below):
    ;
    ; and al,0x7F                     ; clear the highest bit.
    ; movzx bx,al                     ; copy the scancode from al to bx.
    ; mov [cs:bx+keys_pressed],byte 0 ; mark the key as not pressed.

@ready:
    mov al,0x20             ; write byte 20h to port 20h to inform PIC.
    out 0x20,al             ; (programmable interrupt controller) that it's OK
                            ; to continue sending interrupts.
    pop bx
    pop ax
    sti
    iret

last_scancode db 0

keys_to_handle db 0           ; in the main code you can poll for this.
                              ; After handling the keys, set this to 0.

keys_pressed times 128 db 0   ; db 128 dup 0 in some other assemblers
                              ; In the main program code scan through this if
                              ; keys_to_handle is not zero, and set the
                              ; corresponding byte to 0 to not handle it twice. 
```

主要代码（不属于中断控制器）：

```
@main_code_loop:
    test [cs:keys_to_handle], byte 0xFF ; check if there are keys to handle.
    jz @no_keys_to_handle               ; no, nothing to do.

    ; here scan through entire keys_pressed array and set handled keys'
    ; corresponding bytes to 0.
    ; remember to loop through the entire array, there can be several keys to handle.

    mov [cs:keys_to_handle], byte 0     ; set keys_to_handle byte to 0.

@no_keys_to_handle:
    ; do something else 
```

一些有用的链接：

[OSDev：中断](http://wiki.osdev.org/Interrupts)：一篇关于中断的有用文章。

[OSDev：“8042”PS/2 控制器](http://wiki.osdev.org/%228042%22_PS/2_Controller)：有关键盘处理的有用信息。

[OSDev：8259 PIC](http://wiki.osdev.org/PIC)：有关 8259 可编程中断控制器的信息。

# list - 根据“分配给”字段共享点 2007/2010 将列表项从一个列表复制/移动到另一个列表

> ID：14364062
> 
> 赞同：0
> 
> 时间：2013-01-16T17:20:13.983
> 
> 标签：list, sharepoint

我有一个要求，用户使用 sharepoint 2007 中的票务列表输入票证，IT 经理根据票证描述等将列表项/票证分配给程序员/网络管理员等 现在我们的网络团队要求我创建一个网络用户无权创建的列表，而是当 IT 经理将其分配给特定人员时，此列表从帮助台工单列表中获取其项目。当工单分配给人员 x（在网络团队中）时，工单应自动移动到网络列表。当网络团队处理此票证并将其关闭或任何其他状态更改时，应直接通知用户。

我使用sharepoint 2007。

# mysql - mysql infile 将字符串转换为时间格式

> ID：14364065
> 
> 赞同：3
> 
> 时间：2013-01-16T17:20:28.747
> 
> 标签：mysql, sql, time, load-data-infile

我有一个 TSV，我正试图将其放入 mySQL 表中。有几列是时间格式，但它们与 的标准时间格式不匹配`HH:MM:SS`，而是看起来像`HH:MM AM/PM`

我已经看到使用 PHP 执行此操作的示例，但我希望有一种方法可以使用 mysql`str_to_date`

这是我到目前为止所做的工作。

```
LOAD DATA LOCAL INFILE 
'C:\\SINGLE_PROP\\open_houses.txt' 
REPLACE INTO TABLE singleprop.jos_openhouse 
IGNORE 1 LINES
SET OHSSTARTTM = STR_TO_DATE('%g:%i %a', '%g:%i:%s'); 
```

我不断收到不正确的时间格式错误。这是桌子的外观。

```
CREATE TABLE `jos_openhouse` (
  `OHSSTARTDT` DATE NOT NULL,
  `OHSHOSTBID` varchar(14) NOT NULL,
  `OHSMLSNO` int(7) NOT NULL,
  `OHSSTARTTM` TIME NOT NULL,
  `OHSENDTM'` TIME NOT NULL,
  `OHSREMARK` TEXT,
  `OHSTYPE` TEXT,
  `OHSUPDTDT` TIMESTAMP,
PRIMARY KEY (`OHSMLSNO`))
ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8; 
```

是否应该先将列创建为“TEXT”，以便 infile 可以将数据放在那里，然后在导入后将其转换为时间格式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T17:24:49.057

尝试这个：

```
SELECT STR_TO_DATE('11:15 PM', '%h:%i %p') ; 
```

**输出**

```
TIME
--------
23:15:00 
```

尝试这个：

```
LOAD DATA LOCAL INFILE 
'C:\\SINGLE_PROP\\open_houses.txt' 
REPLACE INTO TABLE singleprop.jos_openhouse (col1, col2, ..., @OHSSTARTTM)
IGNORE 1 LINES
SET OHSSTARTTM = STR_TO_DATE(@OHSSTARTTM, '%h:%i %p'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:23:20.690

```
 SET OHSSTARTTM = STR_TO_DATE('%g:%i %a', '%g:%i:%s'); 
```

考虑

> [时间（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time)

因为你使用时间

# android - android + eclipse + maven + actionbarsherlock

> ID：14364067
> 
> 赞同：5
> 
> 时间：2013-01-16T17:20:33.857
> 
> 标签：android, maven, actionbarsherlock, android-support-library

我读了很多关于 actionbarsherlock、maven、android 的东西，但我见过的解决方案都没有为我工作:(

我确定我非常接近解决方案，但我不明白，我需要一些帮助:)

所以这是我的问题，我尝试创建一个依赖于 Actionbarsherlock 的 android maven 项目......看起来很简单，但我总是有这些错误

```
[2013-01-16 18:10:28 - Dex Loader] Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl;
[2013-01-16 18:10:28 - greennfc-samples] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl;
[2013-01-16 18:10:50 - Dex Loader] Unable to execute dex: Multiple dex files define Lorg/hamcrest/Description;
[2013-01-16 18:10:50 - greennfc-samples] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lorg/hamcrest/Description; 
```

这是我的配置：

Eclipse Juno M2e 1.2.0 ADT 21 Maven 3.0.4

这是父 pom ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>org.sonatype.oss</groupId>
    <artifactId>oss-parent</artifactId>
    <version>7</version>
</parent>

<groupId>com.greennfc.tools</groupId>
<artifactId>greennfc</artifactId>
<version>1.0.0-SNAPSHOT</version>
<name>Green NFC - Parent</name>
<description>Android Nfc library for an easer management of NFC features</description>
<packaging>pom</packaging>
<url>https://github.com/binomed/greennfc</url>
<inceptionYear>2013</inceptionYear>

<!-- 
<scm>
    <connection>scm:git:ssh://git@github.com/octo-online/robospice.git</connection>
    <url>git:ssh://git@github.com/octo-online/robospice.git</url>
    <developerConnection>scm:git:ssh://git@github.com/octo-online/robospice.git</developerConnection>
    <tag>HEAD</tag>
</scm>
 -->

<licenses>
    <license>
        <name>Apache 2</name>
        <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
    </license>
</licenses>

<issueManagement>
    <system>Github Issue Tracker</system>
    <url>https://github.com/octo-online/robospice/issues</url>
</issueManagement>

<developers>
    <developer>
        <id>JFG</id>
        <name>Jean-Francois Garreau</name>
        <email>jean.francois.garreau@binomed.fr</email>
    </developer>
</developers>

<!-- 
<mailingLists>
    <mailingList>
        <name>RoboSpice Forum/Mailinglist</name>
        <post>http://groups.google.com/group/robospice</post>
        <subscribe>http://groups.google.com/group/robospice/subscribe</subscribe>
        <unsubscribe>https://groups.google.com/group/robospice/subscribe</unsubscribe>
    </mailingList>
</mailingLists>

<ciManagement>
    <system>jenkins</system>
    <url>https://robospice.ci.cloudbees.com/job/Build%20RoboSpice/</url>
</ciManagement>
 -->

<modules>
    <!-- core library -->
    <module>greennfc-core</module>

    <!-- Base librairies elements -->
    <module>greennfc-filters</module>

    <!-- extensions -->

    <!-- Demo -->
    <module>greennfc-samples</module>
</modules>

<properties>
    <android.version>4.1.1.4</android.version>
    <android-platform.version>14</android-platform.version>
    <android-annotations.version>4.1.1.4</android-annotations.version>
    <android-support.version>r7</android-support.version>
    <android-maven-plugin.version>3.5.0</android-maven-plugin.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    <github.global.server>github</github.global.server>
    <maven.javadoc.skip>true</maven.javadoc.skip>
</properties>

<!-- TODO : remove this when android maven plugin 3.4.2 is out -->
<pluginRepositories>
    <pluginRepository>
        <id>oss.sonatype.org-jayway-snapshots</id>
        <name>Jayway OpenSource SNAPSHOTs on Sonatype.org</name>
        <url>http://oss.sonatype.org/content/repositories/jayway-snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>annotations</artifactId>
            <version>${android-annotations.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${android.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <version>${android.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>provided</scope>
        </dependency>

        <!-- https://stackoverflow.com/questions/5591811/ignoring-innerclasses-attribute-warning-is-killing-eclipse -->
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
    </dependencies>
</dependencyManagement>

<build>
    <pluginManagement>
        <plugins>
            <!-- https://stackoverflow.com/questions/13040788/how-to-elimate-the-maven-enforcer-plugin-goal-enforce-is-ignored-by-m2e-wa -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.maven.plugins</groupId>
                                    <artifactId>maven-enforcer-plugin</artifactId>
                                    <versionRange>[1.0.0,)</versionRange>
                                    <goals>
                                        <goal>enforce</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore />
                                </action>
                            </pluginExecution>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.maven.plugins</groupId>
                                    <artifactId>maven-dependency-plugin</artifactId>
                                    <versionRange>[1.0.0,)</versionRange>
                                    <goals>
                                        <goal>copy-dependencies</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>${android-maven-plugin.version}</version>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
            </plugin>
            <plugin>
                <artifactId>maven-deploy-plugin</artifactId>
                <version>2.7</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.7</version>
                <configuration>
                    <links>
                        <link>http://commons.apache.org/lang/api</link>
                        <link>http://java.sun.com/j2se/1.5.0/docs/api</link>
                    </links>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <version>2.1.2</version>
            </plugin>

            <!-- deploy artifacts to github for downloads -->
            <plugin>
                <groupId>com.github.github</groupId>
                <artifactId>downloads-maven-plugin</artifactId>
                <version>0.6</version>
                <configuration>
                    <description>${project.version} release of ${project.name}</description>
                    <override>true</override>
                    <includeAttached>true</includeAttached>
                    <includes>
                        <include>${project.artifactId}-${project.version}.jar</include>
                    </includes>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>upload</goal>
                        </goals>
                        <phase>deploy</phase>
                    </execution>
                </executions>
            </plugin>

            <!-- deploy javadoc and maven site to github -->
            <plugin>
                <groupId>com.github.github</groupId>
                <artifactId>site-maven-plugin</artifactId>
                <version>0.7</version>
                <configuration>
                    <message>Creating site for ${project.version}</message>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>site</goal>
                        </goals>
                        <phase>site</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <reportPlugins>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-project-info-reports-plugin</artifactId>
                            <version>2.2</version>
                            <configuration>
                                <dependencyDetailsEnabled>true</dependencyDetailsEnabled>
                                <dependencyLocationsEnabled>true</dependencyLocationsEnabled>
                            </configuration>
                        </plugin>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-javadoc-plugin</artifactId>
                            <version>2.7</version>
                        </plugin>
                    </reportPlugins>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-gpg-plugin</artifactId>
                <version>1.1</version>
                <executions>
                    <execution>
                        <id>sign-artifacts</id>
                        <phase>verify</phase>
                        <goals>
                            <goal>sign</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <autoVersionSubmodules>true</autoVersionSubmodules>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

<profiles>
    <profile>
        <id>sign</id>
        <activation>
            <property>
                <name>performRelease</name>
                <value>true</value>
            </property>
        </activation>
        <properties>
            <maven.javadoc.skip>false</maven.javadoc.skip>
        </properties>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-gpg-plugin</artifactId>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

这是我项目的 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>com.greennfc.tools</groupId>
    <artifactId>greennfc</artifactId>
    <version>1.0.0-SNAPSHOT</version>
</parent>

 <artifactId>greennfc-samples</artifactId>
  <packaging>apk</packaging>
 <name>Green Nfc - Samples</name>
 <properties>
    <notificationcompat2.version>1.1.2</notificationcompat2.version>
    <actionbarsherlock.version>4.2.0</actionbarsherlock.version>
    <roboguice.version>2.0</roboguice.version>
    <robosherlock.version>1.4</robosherlock.version>
    <google.http.client.version>1.12.0-beta</google.http.client.version>
    <simplexmlserializer.version>2.6.6</simplexmlserializer.version>
    <jackson.version>1.9.9</jackson.version>
</properties>

<dependencies>
    <!-- Green Nfc dependencies -->
    <dependency>
        <groupId>com.greennfc.tools</groupId>
        <artifactId>greennfc-core</artifactId>
        <version>${project.version}</version>
    </dependency>

    <!-- Other libs -->
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.google.android</groupId>
      <artifactId>support-v4</artifactId>
        <version>${android-support.version}</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.actionbarsherlock</groupId>
      <artifactId>actionbarsherlock</artifactId>
      <version>${actionbarsherlock.version}</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>${actionbarsherlock.version}</version>
        <type>apklib</type>
        <scope>provided</scope>
    </dependency>
</dependencies>  

<build>
    <sourceDirectory>src/</sourceDirectory>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>${android-platform.version}</platform>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

我在这里尝试：

[带有测试套件的 Maven Android 项目](https://stackoverflow.com/questions/9591245/maven-android-project-with-test-suite) [http://v.zasadnyy.com/blog/abs-maven-eclipse-integration/](http://v.zasadnyy.com/blog/abs-maven-eclipse-integration/)

作为actionbarsherlock项目，我使用的是git仓库的head，我复制了库目录，粘贴到和我的父项目相同的文件夹中，并根据{groupId}-{artifactId}-{version}重命名

我真的很愿意从头开始重新开始并找到一种正确的方法，因为我不明白为什么它不起作用...... :(

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T20:31:33.423

这是我修复它的方法。这是由于 Maven 在 Eclipse 也在导出其 Android 依赖项时尝试导出其依赖项：

1.  项目->属性->Java构建路径
2.  转到“订购和导出”选项卡。
3.  取消选中“Maven Dependencies”，这样它们就不会被双重导出。
4.  清理并尝试运行它。
5.  如果它仍然不起作用，请取消选中“Android Dependencies”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T13:23:01.313

我在使用*Maven*、*Eclipse*和*ActionBarSherlock*时遇到了非常相似的问题。问题是支持库被两次放入构建路径，使 dexopt 对多个声明感到困惑。

通过**更改**`pom.xml`for *ActionBarSherlock*从_

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>support-v4</artifactId>
</dependency> 
```

至

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>support-v4</artifactId>
    <scope>provided</scope>
</dependency> 
```

确保在保存此更改后清理项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T23:17:23.290

您需要确定 pom.xml 中的哪些依赖项包含 Dalvik 编译器抱怨的类。

1.  在 Eclipse 中，您可以通过 Open Type（在 mac Command-T 上）识别有问题的类属于哪个 jar。

2.  [然后，通过在maven central](http://search.maven.org/)中查找每个直接依赖项来确定对这些 jar 的传递依赖项。并查看项目 pom.xml。

3.  一旦确定，您需要将排除子句添加到项目 pom.xml 中的相应依赖项配置中。

项目 pom.xml：

```
<dependencies>
<dependency>
        <groupId>...</groupId>
        <artifactId>...</artifactId>
        <exclusions>
            <exclusion>
                <artifactId>org.hamcrest</artifactId>
                <groupId>hamcrest</groupId>
            </exclusion>
        </exclusions>
    </dependency>
</dependencies> 
```

还有一种蛮力的方法可以做到这一点。只需在 Eclipse 中打开项目，在项目查看器中展开“Maven 依赖项”，然后将排除子句一一添加到项目 pom 中的每个直接依赖项，每次点击保存。android maven 配置插件将重新计算“Maven Dependencies”下的依赖关系，您会看到有问题的 jar 消失了。一旦你得到所有这些，你的 Dalvik 错误也会消失。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T13:46:14.533

我努力让 ActionBarSherlock lib 项目与 Maven 一起工作，但我失败了。类似的问题。所以我删除了 lib 项目中的 maven 依赖项，改用 libs/android-support-v4.jar 。顺便说一句，测试文件夹也被删除了。然后我运行我自己的项目，并引用 lib 项目。事情进展顺利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T13:12:59.600

好的，谢谢大家的回答，对我有用的是：

1.  从 actionbarsherlock 中删除 supportv4 库
2.  注释actionbarsherlock项目中junit的导入，以避免产生这一代

# javascript - JQuery：淡入/淡出效果

> ID：14364070
> 
> 赞同：0
> 
> 时间：2013-01-16T17:20:36.257
> 
> 标签：javascript, jquery

我是 JQuery 的新手，希望有人能帮我解决我遇到的问题。

我设置了一个 JSFiddle 页面来解决我遇到的问题，以便于帮助我：http: [//jsfiddle.net/66Bwp/](http://jsfiddle.net/66Bwp/)

问题：当我单击“测试 1”或“测试 2”按钮，然后单击生成的黑色叠加层时，叠加层会消失，但是淡入的内容会保留在页面上，直到“取消”按钮按下。

有趣的旁注：如果我单击“测试 1”或“测试 2”按钮来产生内容效果，然后单击取消，一切都会按预期工作（覆盖和内容淡出），然后如果我单击按钮“再次测试 1”或“测试 2”，无需重新加载页面，然后单击覆盖，一切正常。

Javascript 文件：

```
$(document).ready(function(){
    lbHide();
})

function lbShow( idName ) {
    $("#lbOverlay, #" + idName).fadeIn(300);
}

function lbHide( idName ) {
    $("#lbOverlay, #" + idName).fadeOut(300);
    $("#lbOverlay").click(function() {
        $("#lbOverlay, #" + idName).fadeOut(300);
    })
} 
```

CSS 文件：

```
#lbOverlay{
    display:none;
    background:#000000;
    opacity:0.4;
    filter:alpha(opacity=90);
    position:absolute;
    top:0px;
    left:0px;
    min-width:100%;
    min-height:100%;
    z-index:1000;
}
#lbExampleOne{
    display:none;
    position:fixed;
    top:100px;
    left:50%;
    margin-left:-200px;
    width:400px;
    background:#FFFFFF;
    padding:10px 15px 10px 15px;
    border:2px solid #CCCCCC;
    z-index:1001;
}
#lbExampleTwo{
    display:none;
    position:fixed;
    top:100px;
    left:50%;
    margin-left:-200px;
    width:400px;
    background:#FFFFFF;
    padding:10px 15px 10px 15px;
    border:2px solid #CCCCCC;
    z-index:1001;
} 
```

HTML 文件：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

        <title>Lightbox Test</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="js/lightbox.js"></script>
        <link type="text/css" rel="stylesheet" href="css/master.css" />
    </head>
    <body>
        <button id="show-panel" onClick="lbShow('lbExampleOne')">Test 1</button>
        <button id="show-panel" onClick="lbShow('lbExampleTwo')">Test 2</button>
        <div id="lbExampleOne">
            <h2>Example Content One</h2>
        <p><button type="reset" id="close-panel" onClick="lbHide('lbExampleOne')">Cancel</button>
        </div>
        <div id="lbExampleTwo">
            <h2>Example Content Two</h2>
            <p><button type="reset" id="close-panel" onClick="lbHide('lbExampleTwo')">Cancel</button></p>
        </div>
        <div id="lbOverlay"></div>
    </body>
</html> 
```

我不确定问题可能是什么。有没有人有什么建议？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:31:21.450

将您的 lbHide 函数更改为：

```
function lbHide(idName) {
  $("#lbOverlay, #" + idName).fadeOut(300);
  $("#lbOverlay").click(function () {
    $("#lbOverlay, #lbExampleOne, #lbExampleTwo").fadeOut(300);
  })
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/66Bwp/2/)**

当你的覆盖被点击时，没有`idName`参数被传递给它，所以只是淡出 div。您可能应该为它们提供类以使它们更易于参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:30:59.170

这是因为当您单击覆盖时，您正在调用您分配给它的单击事件。问题是点击事件使用了此时没有值的 idName 变量。

因此覆盖消失但不是你的其他元素

# wordpress - 我们如何在 wordpress 中同时搜索分类和关键字搜索？

> ID：14364072
> 
> 赞同：3
> 
> 时间：2013-01-16T17:20:38.487
> 
> 标签：wordpress

我已经创建了一个自定义帖子类型，它具有三种分类法。我想使用关键字（按用户类型）和三个分类下拉列表框创建一个搜索表单。

只有三个列表框搜索给了我正确的搜索结果。当我添加用户类型文本框时购买。现在有结果了。

下面的代码不起作用。

```
$list = array();
  $item = array(); 
  foreach($_GET as $key => $value){
  if($key == 's'){
  $item['s'] = htmlspecialchars($key);
  $item['keyword'] = htmlspecialchars($value);
  $list[] = $item;
  }
  if($value != '' && $key != 's'){
  $item['taxonomy'] = htmlspecialchars($key);
  $item['terms'] = htmlspecialchars($value);
  $item['field'] = 'slug';
  $list[] = $item;
  } 
  } 
  $cleanArray = array_merge(array('relation' => 'AND'), $list);
  $args['post_type'] = 'listings';
  $args['showposts'] = 12;
  $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
  $args['paged'] = $paged; 
  $args['tax_query'] = $cleanArray; 
$the_query = new WP_Query( $args ); //data is sanitized inside wp_query class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:36:14.463

我通过改变我的代码得到了答案，如下所示。

```
global $query_string;

$query_args = explode("&", $query_string);
$search_query = array();

foreach($query_args as $key => $string) {
    $query_split = explode("=", $string);
    $search_query[$query_split[0]] = $query_split[1];
} // foreach
$args = array(
    'post_type' => 'listings',
    's' => $search_query['s'],

    'tax_query' => array(
        'relation' => 'AND',
        array(
            'taxonomy' => 'type',
            'field' => 'slug',
            'terms' => $search_query['type']
        ),
        array(
            'taxonomy' => 'rooms',
            'field' => 'slug',
            'terms' => $search_query['rooms']
        )
    )
);
$the_query = new WP_Query($args); 
```

# php - 从 mysqli 语句结果中检索关联数组

> ID：14364075
> 
> 赞同：2
> 
> 时间：2013-01-16T17:20:45.080
> 
> 标签：php, mysqli

我有以下代码。

```
public function fetch_questions($count=null)
{
    $stmt = $this->mysqli->prepare("SELECT question,question_title FROM questions order by id");
    $stmt->execute();

    $stmt->bind_result($question,$question_title);

    $arr = array();
    while ($stmt->fetch()) {
        $arr = array('question_title'=>$question_title,'question'=>$question);
    }
    $stmt->close();

    return $arr;
} 
```

输出仅内容一行，即最后一行。如何检索所有记录？

```
$questions = $db->fetch_questions();
var_dump($questions); 
```

var_dump 的输出：

```
 array
  'question_title' => string 'aaaaaa' (length=6)
  'question' => string 'aaaaaaaaaaaaaaaaaaaa' (length=20) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:04:16.980

您需要*附加*到`$arr`via 上`[]`，而不是直接分配其值。否则，您将在每次循环迭代时覆盖它。

```
while ($stmt->fetch()) {
    $arr[] = array('question_title'=>$question_title,'question'=>$question);
    //-^^^^
} 
```

# java - 乘以字符串

> ID：14364076
> 
> 赞同：2
> 
> 时间：2013-01-16T17:20:50.677
> 
> 标签：java, string, integer

例如，如果您有一个字符串：

```
String = "Hello world"; 
```

你如何让它打印出（n）次？

例如

```
System.out.print("Hello world" * 5); 
```

给出输出：

```
Hello world
Hello world
Hello world
Hello world
Hello world 
```

现在显然我不能像我所做的那样将一个字符串乘以 5。

我知道我必须将字符串转换为整数可以使用的东西？但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T17:24:15.287

你会使用一个循环：

```
for(int i = 0; i < 5; i++) {
   System.out.println("Hello world");
} 
```

但我认为你需要在这里学习你的编程基础——一本关于 java 的好书对你来说比在 SO 上发布这样的问题更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:40:51.613

在 Python（我认为也是 Ruby）中，您可以通过将字符串“乘以”数字来连接字符串：

```
>>> print "Hello" * 5
HelloHelloHelloHelloHello 
```

在 Java 中，有很多方法可以做到这一点，从循环开始。顺便说一句，您可以在 Java 中多次连接字符串：

```
package test;

public class test {

public static void main(String[] args) {

    String s1 = "hello";
    for (String s = s1; s.length() <= 5 * s1.length(); s = s + s1)
        System.out.println(s);
}

} 
```

现在，上面是一个坏主意。:-) 如果重复，不要这样做，bc 每次连接字符串并分配一个新字符串时，都会创建一个新字符串并丢弃旧字符串 - 如果您多次这样做，效率会非常低。

总的来说，之前的海报是对的：选择一本关于 Java 的书——更好的是 Python——然后学习！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:27:14.183

您可以创建一个方法来获取字符串和需要打印字符串的值，例如：

```
public String multiplyString(String s,int i){
   String result="";
   for(;i<0;i--){
       result += " "+result;   //for appending strings
   }
return result;
} 
```

然后调用这个方法：

```
System.out.print(multiplyString("Hello wrold",5)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:40:50.307

嘿，也学习一下递归方法

```
public static void main(String[] args) throws IOException {

    test("Hello World ",5);

}

public static void test(String s,int x){

      if(x==0)return;
          System.out.println(s);
      test(s,--x);

} 
```

输出

```
Hello World 
Hello World 
Hello World 
Hello World 
Hello World 
```

# java - 由于 XOR 按位 ^ 运算符，Java 中的 JavaScript 表达式的返回值类型不正确

> ID：14364078
> 
> 赞同：1
> 
> 时间：2013-01-16T17:21:12.657
> 
> 标签：java, javascript, bit-manipulation, xor, scriptengine

我正在尝试评估这个表达式：

```
ScriptEngineManager sem = new ScriptEngineManager () 
ScriptEngine scriptEngine = sem.getEngineByName("js") ;
String expr = "true ^ true";
Boolean obj = (Boolean) scriptEngine.eval(expr); 
```

然而返回的结果是java Double。我尝试了 String expr 的各种选项，例如：

`String expr = "0x1 ^ 0x0";` `String expr = "1 ^ 0";`

基本上我希望能够使用 JavaScript 引擎来评估可能看起来像这样的各种表达式：

```
"ture && false || false (true || false && true || false XOR true)" 
```

所有其他运算符，如 && 或 || 当我评估这样的表达式并返回布尔值时工作得很好，但是当它出现 XOR（它具有 JavaScript 等效的按位 ^ 运算符）时，它返回 Double。我真的不想将表达式转换为将 XOR 替换为某些逻辑运算符（例如 ((true || false) && !(true && false)) ），因为那时我必须解析整个表达式字符串才能转换 XOR成上面的逻辑表达式。我评估这个表达式的重点是让我能够在不必解析它的复杂性的情况下进行评估。

任何帮助都感激不尽！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:37:19.593

从这里引用：http: [//www.howtocreate.co.uk/xor.html](http://www.howtocreate.co.uk/xor.html)

“不幸的是，JavaScript 没有逻辑 XOR 运算符。它有一个按位 XOR 运算符 ^ 可以执行两个数字的按位比较，但是当您想要获得两个表达式的 XOR 的结果时，这无济于事，这样做不返回数字。

可以使用以下方法模拟 XOR 运算符：

```
if( ( foo && !bar ) || ( !foo && bar ) ) {
  ...
} 
```

或者使用以下命令少做一次操作（取决于 foo 和 bar 的值）：

```
if( ( foo || bar ) && !( foo && bar ) ) {
  ...
} 
```

或者使用三元运算符使其更小：

```
if( foo ? !bar : bar ) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:31:01.620

您可以使用双重否定在 JavaScript 代码中强制强制转换为布尔值：

```
Boolean obj = (Boolean) scriptEngine.eval("!!(" + expr + ")"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:03:58.013

在没有任何明确替代方案的情况下，我正在实施此解决方案：

```
 boolean useDouble = false;
    String expr = "true ^ false";
    if(expr.contains("^"))
    {
        useDouble = true;
    }
            ...
            if(useDouble)
         {
             Double d = (Double) scriptEngine.eval(expr); 
             boolean r = (d != 0.0);
             System.out.println(" result: " + r);
         }
         else
         {
             Boolean b = (Boolean)scriptEngine.equals(expr);
             System.out.println(b.getClass().getName() + "result:" + b);
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:26:28.123

与其使用 XOR，不如编写更自然的方法，`!=` 例如`true != false` ，如果这在 Javascript 中不起作用，我会感到惊讶。

# css - 引导工具提示导致按钮跳转

> ID：14364079
> 
> 赞同：61
> 
> 时间：2013-01-16T17:21:13.057
> 
> 标签：css, twitter-bootstrap, tooltip

当我将鼠标悬停在按钮上并出现工具提示时，按钮会跳转。如果我禁用工具提示，它不会跳转。此外，右边的按钮失去了圆边。我怎样才能防止这种情况发生？

```
<div class="btn-group">
    <a rel="tooltip" class="btn" href="#" data-title="View Details"><i class="icon-list-alt"></i></a>
    <a rel="tooltip" class="btn" href="#" data-title="Delete"><i class="icon-trash">    </i></a>
</div> 
```

Javascript：

```
$('[rel=tooltip]').tooltip(); 
```

工作版...

[http://jsfiddle.net/BA4zM/147/](http://jsfiddle.net/BA4zM/147/)

这是一个无需跳跃即可运行的网站...

[http://wrapbootstrap.com/preview/WB005S479](http://wrapbootstrap.com/preview/WB005S479)

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-02-08T10:16:18.730

为避免跳转，需要设置容器属性。这是记录在案的。

> 当使用带有 Bootstrap 输入组的工具提示和弹出框时，您必须设置容器选项以避免不必要的副作用。

尝试以下操作：

```
$('[rel=tooltip]').tooltip({container: 'body'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-31T11:14:53.893

正如 Howie 在[https://stackoverflow.com/a/14770263/7598367](https://stackoverflow.com/a/14770263/7598367)所说，有必要将“容器”添加到工具提示中。

这并没有解决我的问题（我遇到了同样的问题），还需要在.tooltip() 初始化之前在 JS 文件中声明，这样**：**

```
$('[data-toggle=tooltip]').tooltip({container: 'body'});
$('[data-toggle="tooltip"]').tooltip(); 
```

如果将来有人遇到同样的问题，希望这会有所帮助。

# javascript - executeSql() 销毁脚本

> ID：14364082
> 
> 赞同：0
> 
> 时间：2013-01-16T17:21:31.020
> 
> 标签：javascript, jquery, sqlite, cordova

我对以下 javascript 有一点问题。tx.executeSql() 似乎是错误的。注释掉后，脚本可以正常工作（当然，除了 SQL 部分）。一旦我删除评论，整个脚本什么都不做。这是我的代码：

```
function createDb() {

// Datenbank mit allen Tabellen erstellen
var db = window.openDatabase("DBN", "1.0", "DBN", 10000000);
db.transaction(populateRaumbezeichnung, errorCB, successCB);

}

function populateRaumbezeichnung(tx){
  $.ajax({
    type: "GET",
    url: "URL",
    data: "{}",
    contentType: "application/json",
    dataType: "json",
    success: function(json) {

    $.each(json, function(index, result) {
        tx.executeSql('insert into raumbezeichnung values ("'+result.IDRaumbezeichnung+'","'result.Raumbezeichnung'")');
    });
  },
      failure: function(msg) {
         alert("Datenabruf fehlgeschlagen");
    }
});
} 
```

# c# - 在 ASP.NET 中继器内动态创建具有唯一 ID 的控件

> ID：14364084
> 
> 赞同：0
> 
> 时间：2013-01-16T17:21:34.217
> 
> 标签：c#, asp.net, asp.net-4.0

我有一个文件列表（存储在数据库中），我希望用户能够在异步回调中上传这些文件。

我已经在我期望的每个文件的名称旁边显示 AJAX 控件工具包的[AsyncFileUpload控件：](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx "异步文件上传")

```
<asp:Repeater ID="SourceTables" runat="server">
    <ItemTemplate>
        <tr>
            <td>
                <%#DataBinder.Eval(Container.DataItem, "LongName")%>
            </td>
            <td>
                <ajax:AsyncFileUpload runat="server" ClientIDMode="AutoID" />
            </td>
        </tr>
    </ItemTemplate>
</asp:Repeater> 
```

所有这些异步上传控件最终都会在后面的代码中调用相同的方法，这很好，但是当我保存文件时，我需要一些方法来确定哪个控件导致回发（即几个文件中的哪个刚刚已上传）。但是，我无法在中继器内动态设置 ID（我相信这只能从后面的代码中实现）。

显然这不起作用：

```
<ajax:AsyncFileUpload ID=<%#DataBinder.Eval(Container.DataItem, "ShortName")%> runat="server" ClientIDMode="AutoID" /> 
```

有没有另一种方法可以在转发器（或其他方式）内动态设置每个上传控件的 ID，或者我可以采取另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:44:41.897

您可以在转发器的“ItemDatabound”事件中动态添加控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:25:46.057

您不能绑定`ID`控件的属性。您将需要在后面的代码中创建控件并将其添加到转发器。

例子：

```
protected void GridDataBind(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow) {
        IEnumerable list = PremiumUnitFees.PremiumAmenities.ObtainFeesForProject(IntranetUser.Current.ProjectId);
        foreach (PremiumUnitFees.PremiumAmenities feature in list) {
            e.Row.Cells(3).Controls.Add(new CheckBox {
                ID = feature.Id.ToString(),
                Text = feature.NickName,
                Checked = PremiumUnitFees.PremiumUnitView.IsUnitPremium(feature.Id, Convert.ToInt64(DataBinder.Eval(e.Row.DataItem, "Id")))
            });
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:31:41.230

您如何处理回发事件？

如果使用**AsyncFileUpload控件的***UploadedComplete*事件，则通过**AsyncFileUploadEventArgs**对象获取上传的文件。

 ****您还可以将**sender**强制转换为**AsyncFileUpload**控件，然后通过**PostedFile**属性获取文件。

```
 protected void AsyncFileUpload1_UploadedComplete(object sender, AsyncFileUploadEventArgs e)
 {
     string savePath = MapPath("~/Uploads/" + Path.GetFileName(e.filename));
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:33:49.133

像这样的东西

```
 <ajax:AsyncFileUpload runat="server" id="afuMyUpload" ClientIDMode="AutoID" OnClientUploadComplete="MyFunction" />

   foreach (Control c in SourceTables.Items)
   {
        var myUpload = c.FindControl("afuMyUpload") as AsyncFileUpload;
        //Do stuff with your control
   } 
```****

# android - 从捕获的 DownloadManager 意图中检索文件路径

> ID：14364091
> 
> 赞同：11
> 
> 时间：2013-01-16T17:22:15.203
> 
> 标签：android, android-intent, download-manager

从 Android 4.2 开始，如果用户在浏览器中下载某些文件，则使用 DownloadManager。如果用户单击“下载完成”通知，则 Intent 将始终启动。在 Android 4.2 之前，intent 曾经在内容中包含下载文件的路径，例如：

```
intent.getData() 
```

将返回一个字符串，例如`file:///storage/emulated/0/Download/some_file.ext`. 但是，从 Android 4.2 开始，下载管理器使用方案广播和意图`content`，例如`content://downloads/all_downloads/2334`.

如何检索下载文件的本地文件路径？

我尝试了以下方法：

```
public static String getRealPathFromURI(Uri contentUri, Activity activity) {
    DownloadManager downloadManager = (DownloadManager) activity.getSystemService(Activity.DOWNLOAD_SERVICE);
    String[] contentParts = contentUri.getEncodedPath().split("/");
    Cursor q = downloadManager.query(new DownloadManager.Query().setFilterById(Integer.parseInt(contentParts[contentParts.length - 1])));
    if (q == null) {
        // Download no longer exists
        return null;
    }
    q.moveToFirst();
    return q.getString(q.getColumnIndex(DownloadManager.COLUMN_LOCAL_FILENAME));
} 
```

但是游标永远不会返回任何行（`q.getCount() == 0`因此最后一条`return`语句会引发异常）。此外，通过从 Uri 解析下载文件 id 的破解似乎很奇怪。

**更新：**我也试过：

```
input = getActivity().getContentResolver().openInputStream(contentUri); 
```

~~但这会返回一个错误说明~~

~~权限拒绝：从 pid=30950、uid=10064 读取 com.android.providers.downloads.DownloadProvider uri content://downloads/all_downloads/2334 需要 android.permission.ACCESS_ALL_DOWNLOADS 或 grantUriPermission()~~

~~显然我无法通过`ContentProvider`.~~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:42:38.397

这是有效的。首先，您不能（也不应该）得到 botteaap 正确指出的文件路径。（归功于他让我走上了正确的道路。）相反，您会自动获得访问文件内容的**临时权限，使用：**

```
InputStream input = getContentResolver().openInputStream(intent.getData()); 
```

您可以像阅读`InputStream`Java 中的任何其他内容一样阅读此内容。似乎没有办法获取文件名。如果需要文件，首先将输入流写入（临时）文件。

当`SecurityException`您的临时访问权限被撤销时抛出。这发生在我之前尝试错误阅读的一些文件上，特别是当 Intent 在我的 Acticity 中被拾取时`onNewIntent`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:55:31.323

通过内容解析器获取它是正确的。并非每个内容 url 都会成为一个文件。例如，Gallery 应用程序会根据来源为您提供转换为网络调用或本地文件的 uri。

即使您访问了真实的文件路径，由于文件权限，您也可能无法读取它，尽管幸运的是它位于外部存储上。~~您是否尝试过`android.permission.ACCESS_ALL_DOWNLOADS`像异常提示的那样添加到您的应用程序中？~~ [那行不通，因为权限处于签名级别:(](https://github.com/android/platform_packages_providers_downloadprovider/blob/master/AndroidManifest.xml#L43)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-22T11:28:45.533

我只想补充@erickok 的答案，因为我花了几个小时才弄清楚这一点。正如@jcesarmobile 所述，您只能保证能够获取文件的名称和大小，而不是完整路径。

您可以按如下方式获取名称和大小，然后保存到临时文件：

```
String filename = null;
Long filesize = null;
Cursor cursor = null;
try {
    cursor = this.getContentResolver().query(intent.getData(), new String[] {
        OpenableColumns.DISPLAY_NAME, OpenableColumns.SIZE}, null, null, null );
    if (cursor != null && cursor.moveToFirst()) {
        filename = cursor.getString(0);
        filesize = cursor.getLong(1);
    }
} finally {
    if (cursor != null)
        cursor.close();
} 
```

# recursion - Prolog 中的递归和列表

> ID：14364100
> 
> 赞同：4
> 
> 时间：2013-01-16T17:22:35.630
> 
> 标签：recursion, prolog

在**Prolog**中列出附加实现-

```
append([],X,X). 
append([H|T1],X,[H|T2]) :- 
    append(T1,X,T2). 
```

这给出了 -

```
append([a,b,c],[d,e,f],X). 
```

输出 -

```
X = [a,b,c,d,e,f]. 
```

我想知道它是如何工作的，我试图跟踪函数调用，但我不明白`T2`，它是列表的尾部，如何可以作为调用`X`中`append([a,b,c],[d,e,f],X)`尚未定义的尾部。你能为我清除这个递归吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:54:03.257

归结为统一在 Prolog 中的工作方式。基本上：

*   原子只有在它们相同时才会统一
*   变量与任何事物统一并且
*   当每个成分可以统一时，化合物统一

所以你打电话：`append([a, b, c], [d, e, f], Y)`这是你的第一个目标。请注意，为了让事情更容易看到，我将您的变量名从 X 更改为 Y。

这必须与一个事实或规则统一：让我们看看它是否会与 append([], X, X) 统一？

```
 (1)  append([a, b, c], [d, e, f], Y)
      (2)  append([], X, X) 
```

(1) 和 (2) 都具有相同的函子（附加），所以这很好，它们都有 3 个参数，所以也很好。但要统一每个相应的论点必须统一。所以（1）中的第一个列表 [a, b, c] 将尝试与（2）中的空列表统一，但它们不能，因为（1）中的列表不是空列表。所以统一失败。

然后我们可以尝试用 append([H|T1],X,[H|T2]) 来统一。

```
 (1)   append([a, b, c], [d, e, f], Y)
      (2)   append([H|T1],X,[H|T2]) 
```

这一次 (1) 中的列表 [a, b, c] 将尝试与 (2) 中的列表 [H|T1] 统一。为了使这成为可能，变量 H 可以与原子 a (H -> a) 绑定，并且列表 T1 可以与 (1) 中列表的尾部绑定，T1 -> [b, c]。所以第一个论点有效，所以我们拥有的是：

```
 (1)   append([a, b, c], [d, e, f], Y)
      (2)'   append([a, b, c],X,[a|T2]) 
```

第二个参数也将统一，因为 X 是一个变量并且将绑定到任何东西。X -> [d, e, f] 所以我们有：

```
 (1)   append([a, b, c], [d, e, f], Y)
      (2)''   append([a, b, c],[d, e, f],[a|T2]) 
```

最后最后一个参数统一，因为 Y -> [a|T2]。因此，既然它与规则的头部统一，我们需要制定规则的主体：我们现在最终以`append([b, c], [d, e, f], T2)`目标为目标。

再次从第一个事实开始，我们寻找这个目标将绑定到的子句。通过上面相同的解释，它不会与第一个子句统一，但会与第二个子句通过绑定统一：H -> b, T1 -> [c], X -> [d, e, f] 和 T2 -> [ b|T2']。

我们剩下的目标是：append([c], [d, e, f], T2')。同样，它不与第一个子句统一，而是通过绑定与第二个子句统一：H -> c, T1 -> [], X -> [d, e, f], T2' -> [c|T2'' ]。

现在的目标是：append([], [d, e, f], T2'')。

让我们看看当我们尝试将其与第 1 条统一时会发生什么：

```
 (1)   append([], [d, e, f], T2'')
     (2)   append([],X,X) 
```

两个空列表统一，X -> [d, e, f] 并且因为 T2''->X 然后 T2'' -> [d, e, f]。现在棘手的部分是跟踪到目前为止的递归调用，现在沿着递归返回以查看最终结果。回想一下 T2' -> [c | T2''] 所以 T2' 实际上是 [c, d, e, f]。回想一下 T2 -> [b| T2'] 所以 T2 实际上是 [b, c, d, e, f]。

最后 Y -> [a|T2] 所以 Y 是 [a, b, c, d, e, f]。由于 Y 是外部变量，因此现在显示原始目标已满足。

# excel - 将 Excel 文件名打印到文本文件 - 为什么我会出错？

> ID：14364108
> 
> 赞同：0
> 
> 时间：2013-01-16T17:22:55.150
> 
> 标签：excel, vba

这是我写的小脚本：

```
 Option Explicit
Dim strFileFullName As String
Sub saveToText()
Open "PATH\File.txt" For Append As #1
Print #1, strFileFullName = ActiveWorkbook.FullName
Print #1, Sheets("Overview").Range("D14").Text
Close #1
End Sub 
```

此外，我想在 .txt 文件中添加一些不在 excel 工作簿中的额外文本。我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:27:36.603

VB 没有比较运算符和赋值运算符的区别。也就是说，它们都是`=`. 在这种情况下，它被解释为返回 false 的比较运算符。（将此与 C 进行比较，其中比较运算符`==`和赋值运算符是`=`；您在这里尝试做的事情将在 C 中作为内联分配工作）

看起来你不需要额外的变量，所以你应该能够做到：

```
Print #1, ActiveWorkbook.FullName 
```

或者，使用两个语句（VB 会将其理解为赋值，而不是比较）：

```
strFileFullName = ActiveWorkbook.FullName
Print #1, strFileFullName 
```

* * *

添加文本就像添加另一个打印语句一样简单：

```
Print #1, "Lorem ipsum dolor" 
```

# ruby - 带块的动态类定义

> ID：14364113
> 
> 赞同：7
> 
> 时间：2013-01-16T17:23:02.530
> 
> 标签：ruby, metaprogramming

所以我遇到了这种情况，我想以编程方式定义一堆类。我在下面使用的方法工作正常，除了我从这里继承的第 3 方类不喜欢该类是匿名定义的事实（基本上，它没有它需要的信息，即.类名，在“继承”钩子中，在我有机会将匿名类设置为常量之前）。

```
['one', 'two', 'three'].each do |model|
    cls = Class.new(ThirdPartyClass) do
        define_method :model do
            model
        end
    end
    ThirdPartyClass.const_set(model.capitalize, cls)
end 
```

我可以简单地使用 eval 并定义类，例如：

```
['one', 'two', 'three'].each do |model|
    eval "class ThirdPartyClass::#{model.capitalize} < ThirdPartyClass; ...; end"
end 
```

但我不喜欢它，因为它是混乱的字符串插值。从美学上讲，基于块的方法似乎“更好”。

有什么方法可以使用基于块的语法非匿名地定义该类（即从一开始就有一个名称），还是我注定要留在 eval 混乱的字符串输入领域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:52:38.900

创建类`Class#inherited`时调用回调。当实例化一个匿名类时，这总是在类可以被分配给常量之前，给它一个名字。我看不到任何解决此问题的方法。您可以通过使用 eval 使用特殊的类语法创建一个空类来*最小化*字符串 eval 中的代码量，该类语法使名称在之前可见`inherited`，然后以块形式跟进 class_eval 来定义您的方法。

```
class Super
  def self.inherited(child)
    puts "#{self.name} inherited by #{child.inspect} named '#{child.name}'"
  end
end

# Your way, inherited can't see name
['one', 'two', 'three'].each do |model|
  klassname = model.capitalize
  klass = Class.new(Super) do
    puts "defining #{model} inheriting from Super"
    define_method :model do
      model
    end
  end
  Super.const_set(klassname, klass)
end

# this way inherited sees name because we use special class definition syntax in minimal string eval
['four', 'five', 'six'].each do |model|
  klassname = model.capitalize

  eval %Q{
    class Super::#{klassname} < Super
      puts %Q[defining Super::#{klassname} inheriting from Super]
    end
  }

  Super.const_get(klassname).class_eval do
    puts "defining methods for Super::#{klassname} inheriting from Super"
    define_method :model do
      model
    end
  end
end

# produces:
Super inherited by #<Class:0x0000010084c988> named ''
defining one inheriting from Super
Super inherited by #<Class:0x0000010084c640> named ''
defining two inheriting from Super
Super inherited by #<Class:0x0000010084c320> named ''
defining three inheriting from Super
Super inherited by Super::Four named 'Super::Four'
defining Super::Four inheriting from Super
defining methods for Super::Four inheriting from Super
Super inherited by Super::Five named 'Super::Five'
defining Super::Five inheriting from Super
defining methods for Super::Five inheriting from Super
Super inherited by Super::Six named 'Super::Six'
defining Super::Six inheriting from Super
defining methods for Super::Six inheriting from Super 
```

# mysql - 从两个表中插入一个表的 SQL 语句（使用另一个不带连接条件的 id）

> ID：14364118
> 
> 赞同：1
> 
> 时间：2013-01-16T17:23:28.780
> 
> 标签：mysql, sql, subquery

我有两张桌子：

```
CREATE TABLE `data_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `data` longtext NOT NULL,
  `created` datetime NOT NULL,
  `updated` datetime NOT NULL,
  `data_item_type` varchar(255) NOT NULL,
  `data_source_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_AFA125D21A935C57` (`data_source_id`),
  CONSTRAINT `FK_AFA125D21A935C57` FOREIGN KEY (`data_source_id`) REFERENCES `data_sources` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7192 DEFAULT CHARSET=utf8; 
```

和

```
CREATE TABLE `map_locations` (
  `id` int(11) NOT NULL,
  `latitude` decimal(9,6) DEFAULT NULL,
  `longitude` decimal(9,6) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `address` varchar(255) DEFAULT NULL,
  `status` varchar(255) NOT NULL,
  `message_codes` longtext NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `FK_B28E0DE7BF396750` FOREIGN KEY (`id`) REFERENCES `data_items` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我正在尝试完成一个两步过程。第一个查询工作正常：

```
INSERT INTO data_items (`data`, created, updated, data_item_type, data_source_id) SELECT data_items.data, now(), now(), data_items.data_item_type, 2
    FROM data_items
    WHERE data_items.data_source_id = 1 
```

--> 1 和 2 是示例值

现在，我想从'data_items'（刚刚创建的自动incs）中获取每个id，并在'map_locations'表中插入每个新的（对应的行）时使用这些id。

所以，

```
data_items
id | data_source_id
1 | 1
2 | 1
3 | 2
4 | 2

map_locations
id | content
1 | aaa
2 | bbb
.... 
3 | aaa
4 | bbb 
```

我需要复制行 (1, 2)，使用 data_items (3,4) 中的 id 并插入这些行。

希望这是有道理的..它相当混乱。TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:40:18.620

1.  您需要新创建`data_items`的引用其原始对应项；最简单的方法是修改架构，使表包含自引用外键：

    ```
    ALTER TABLE data_items
      ADD COLUMN underlying_id INT(11) NULL,
      ADD FOREIGN KEY (underlying_id) REFERENCES data_items (id) 
    ```

2.  插入`data_items`then 变为：

    ```
    INSERT INTO data_items
      (underlying_id, data, created, updated, data_item_type, data_source_id)
    SELECT id, data, NOW(), NOW(), data_item_type, 2
    FROM   data_items
    WHERE  data_source_id = 1 
    ```

3.  现在可以执行自连接以获得新创建`id`的 s：

    ```
    INSERT INTO map_locations
      (id, content)
    SELECT new.id, map_locations.content
    FROM   map_locations
      JOIN data_items old USING (id)
      JOIN data_items new ON new.underlying_id = old.id
    WHERE  old.data_source_id = 1 
    ```

    确保您在与先前插入相同的事务中执行此查询，使用（默认）`REPEATABLE READ`事务隔离级别，以确保对`data_items`表的任何并发更改不会导致不一致的状态。

4.  同样，在同一事务中，清除`underlying_id`引用：

    ```
    UPDATE data_items SET underlying_id = NULL 
    ```

# php - PHP变量不加在一起

> ID：14364126
> 
> 赞同：0
> 
> 时间：2013-01-16T17:23:45.227
> 
> 标签：php, variables, while-loop

代码非常简单，但是它并没有按照预期的方式运行，基本上是在末尾添加数字以继续 while 循环。但他们只是没有添加，`$two`那`$i`就是

PHP：

```
$i=1;
$two=2;
$add=9;
$count=1;
while($i<=7488){
    echo $count;
    echo $exploded[$two];
    echo "<br>count=".$count."<br>";
    echo "<br>two=".$two."<br>";
    echo "<br>i=".$i."<br>";
    $count++;
    $two+$add;
    $i+$add;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T17:24:31.143

这个怎么样：

```
$two += $add;
$i += $add; 
```

`$two + $add`只是一个返回两个变量之和的表达式；它实际上并没有做任何事情或改变任何状态。

`$two += $add`(`+=`是*加法赋值运算符*) 等价于`$two = $two + $add`. 其他算术运算（例如，等）也存在类似的运算`*=`符`-=`。

这种模式适用于所有类 C 语言（据我所知）以及许多其他语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T17:24:40.060

它不是那样工作的。$two+$add 有一个返回值。您需要将其分配给某些东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T17:25:02.397

您必须将`$two+$add;`,分配`$i+$add;`给某个 var。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T17:25:04.203

您不修改此变量：

```
$two+$add;
$i+$add; 
```

也许你需要：

```
$two+=$add;
$i+=$add; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T17:25:19.610

您不会在任何地方保存您的添加：

```
$two+$add;
$i+$add; 
```

所以加法的结果被简单地扔掉了。

尝试：

```
$two = $two + $add;
or
$two += $add; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T17:27:01.300

期限

```
$i+$add; 
```

产生一个结果，但你把那个结果扔掉了。如果您想再次保存结果`$i`，您应该尝试

```
$i = $i + $add; 
```

或者

```
$i += $add; 
```

（两个语句的作用相同，后者只是一个捷径。）其他变量也是如此。

# c# - If vs 重载 vs 反射

> ID：14364129
> 
> 赞同：3
> 
> 时间：2013-01-16T17:23:55.023
> 
> 标签：c#, reflection, polymorphism

我有**很多**具有以下属性的类：

```
class C1
{
    [PropName("Prop1")]
    public string A {get;set;}

    [PropName("Prop2")]
    public string B {get;set;}

    [PropName("Prop3")]
    public string C {get;set;}
} 

class C2
{
    [PropName("Prop1")]
    public string D {get;set;}

    [PropName("Prop2")]
    public string E {get;set;}

    [PropName("Prop3")]
    public string F {get;set;}
} 
```

该属性告诉实际属性是什么，但 C# 属性的名称并不总是匹配。在 C1 和 C2 的情况下，C1.A 与 C2.D 具有相同的属性。

这些类不是任何继承链的一部分，我无法控制它们，因此我无法更改它们。

“Prop1”，“Prop2”，...，“PropN”有一些常见的操作。在没有太多代码重复但仍使其可维护的情况下编写这些操作的最佳解决方案是什么？

解决方案 #1（if 语句 - 很多）

```
void OperationWithProp1(object o)
{
    string prop1;        

    C1 class1 = o as C1;
    if (class1 != null)
        prop1 = class1.A;

    C2 class2 = o as C2;
    if (class2 != null)
        prop1 = class2.D;

    // Do something with prop1
} 
```

解决方案＃2（重载 - 很多）

```
void OperationWithProp1(string prop1)
{
    // Do something with prop1
}

void RunOperationWithProp1(C1 class1)
{
    OperationWithProp1(class1.A);
}

void RunOperationWithProp1(C2 class2)
{
    OperationWithProp1(class2.D);
} 
```

解决方案＃3（反射）-我担心性能，因为这些操作中的每一个都会被调用数千次，并且有数百个操作

```
void OperationWithProp1(object o)
{
     // Pseudo code:
     // Get all properties from o that have the PropName attribute
     // Look if any attribute matches "Prop1"
     // Get the value of the property that matches
     // Do something with the value of the property
} 
```

您会选择哪种解决方案，为什么？你有其他的模式吗？

* * *

编辑澄清：

很多类意味着几十个

很多属性意味着 30-40 个属性/类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:37:07.617

您可以创建一个包装类来公开您需要的属性，并包装实际和类的*实例。*一种方法是通过代表：`C1``C2`

```
interface WithProperties {
   string A {get;set;}
   string B {get;set;}
   string C {get;set;}
}
class WrappedCX<T> : WithProperties {
    private readonly T wrapped;
    private readonly Func<T,string> getA;
    private readonly Action<T,string> setA;
    private readonly Func<T,string> getB;
    private readonly Action<T,string> setB;
    private readonly Func<T,string> getC;
    private readonly Action<T,string> setC;
    public WrappedCX(T obj, Func<T,string> getA, Action<T,string> setA, Func<T,string> getB, Action<T,string> setB, Func<T,string> getC, Action<T,string> setC) {
        wrapped = obj;
        this.getA = getA;
        this.setA = setA;
        this.getB = getB;
        this.setB = setB;
        this.getC = getC;
        this.setC = setC;
    }
    public string A {
        get {return getA(wrapped);}
        set {setA(wrapped, value);}
    }
    public string B {
        get {return getB(wrapped);}
        set {setB(wrapped, value);}
    }
    public string C {
        get {return getC(wrapped);}
        set {setC(wrapped, value);}
    }
} 
```

现在您可以执行以下操作：

```
C1 c1 = new C1();
C2 c2 = new C2();
WithProperties w1 = new WrappedCX(c1, c => c.A, (c,v) => {c.A=v;}, c => c.B, (c,v) => {c.B=v;}, c => c.C, (c,v) => {c.C=v;});
WithProperties w2 = new WrappedCX(c2, c => c.D, (c,v) => {c.D=v;}, c => c.E, (c,v) => {c.E=v;}, c => c.F, (c,v) => {c.F=v;}); 
```

此时，`w1`和`w2`都实现了通用`WithProperties`接口，因此您可以在不检查它们的类型的情况下使用它们。

为了花哨，将七参数构造函数替换为带单个`obj`参数的构造函数，通过反射获取其类，检查您定义的自定义属性的属性，并创建/编译对应于 getter 和 setter 的 LINQ 表达式`A`,`B`和的属性`C`。这将让您`WrappedCX`在调用中没有丑陋的 lambdas 的情况下构建您的。这里的权衡是现在 lambdas 将在运行时构建，因此缺少属性的可能编译错误将成为运行时异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:40:46.270

您可以使用属性化的“PropName”名称动态生成访问正确成员的代理类。您还想在生成对它们的调用之前检测属性是否实际实现了 get/set。也可能是一种更复杂的方法来保证生成的代理的唯一类型名称......

有关用法，请参见 Main()，下面 main 是 OperationWithProp1() 的实现

（这里有很多代码）

```
public interface IC
{
    string Prop1 { get; set; }
    string Prop2 { get; set; }
    string Prop3 { get; set; }
}

public class C1
{
    [PropName("Prop1")]
    public string A { get; set; }

    [PropName("Prop2")]
    public string B { get; set; }

    [PropName("Prop3")]
    public string C { get; set; }
}

public class C2
{
    [PropName("Prop1")]
    public string D { get; set; }

    [PropName("Prop2")]
    public string E { get; set; }

    [PropName("Prop3")]
    public string F { get; set; }
}

public class ProxyBuilder
{
    private static readonly Dictionary<Tuple<Type, Type>, Type> _proxyClasses = new Dictionary<Tuple<Type, Type>, Type>();

    private static readonly AssemblyName _assemblyName = new AssemblyName("ProxyBuilderClasses");
    private static readonly AssemblyBuilder _assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(_assemblyName, AssemblyBuilderAccess.RunAndSave);
    private static readonly ModuleBuilder _moduleBuilder = _assemblyBuilder.DefineDynamicModule(_assemblyName.Name, _assemblyName.Name + ".dll");

    public static void SaveProxyAssembly()
    {
        _assemblyBuilder.Save(_assemblyName.Name + ".dll");
    }

    public static Type GetProxyTypeForBackingType(Type proxyInterface, Type backingType)
    {
        var key = Tuple.Create(proxyInterface, backingType);

        Type returnType;
        if (_proxyClasses.TryGetValue(key, out returnType))
            return returnType;

        var typeBuilder = _moduleBuilder.DefineType(
            "ProxyClassProxies." + "Proxy_" + proxyInterface.Name + "_To_" + backingType.Name,
            TypeAttributes.Public | TypeAttributes.Sealed,
            typeof (Object),
            new[]
            {
                proxyInterface
            });

        //build backing object field
        var backingObjectField = typeBuilder.DefineField("_backingObject", backingType, FieldAttributes.Private);

        //build constructor
        var ctor = typeBuilder.DefineConstructor(MethodAttributes.Public, CallingConventions.Standard, new[] {backingType});
        var ctorIL = ctor.GetILGenerator();
        ctorIL.Emit(OpCodes.Ldarg_0);
        var ctorInfo = typeof (Object).GetConstructor(types: Type.EmptyTypes);
        ctorIL.Emit(OpCodes.Call, ctorInfo);
        ctorIL.Emit(OpCodes.Ldarg_0);
        ctorIL.Emit(OpCodes.Ldarg_1);
        ctorIL.Emit(OpCodes.Stfld, backingObjectField);
        ctorIL.Emit(OpCodes.Ret);

        foreach (var targetPropertyInfo in backingType.GetProperties(BindingFlags.Public | BindingFlags.Instance))
        {
            var propertyName = targetPropertyInfo.Name;
            var attributes = targetPropertyInfo.GetCustomAttributes(typeof (PropName), true);

            if (attributes.Length > 0 && attributes[0] != null)
                propertyName = (attributes[0] as PropName).Name;

            var propBuilder = typeBuilder.DefineProperty(propertyName, PropertyAttributes.HasDefault, targetPropertyInfo.PropertyType, null);

            const MethodAttributes getSetAttrs =
                MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig | MethodAttributes.Final | MethodAttributes.Virtual;

            //build get method
            var getBuilder = typeBuilder.DefineMethod(
                "get_" + propertyName,
                getSetAttrs,
                targetPropertyInfo.PropertyType,
                Type.EmptyTypes);

            var getIL = getBuilder.GetILGenerator();
            getIL.Emit(OpCodes.Ldarg_0);
            getIL.Emit(OpCodes.Ldfld, backingObjectField);
            getIL.EmitCall(OpCodes.Callvirt, targetPropertyInfo.GetGetMethod(), Type.EmptyTypes);
            getIL.Emit(OpCodes.Ret);
            propBuilder.SetGetMethod(getBuilder);

            //build set method
            var setBuilder = typeBuilder.DefineMethod(
                "set_" + propertyName,
                getSetAttrs,
                null,
                new[] {targetPropertyInfo.PropertyType});

            var setIL = setBuilder.GetILGenerator();
            setIL.Emit(OpCodes.Ldarg_0);
            setIL.Emit(OpCodes.Ldfld, backingObjectField);
            setIL.Emit(OpCodes.Ldarg_1);
            setIL.EmitCall(OpCodes.Callvirt, targetPropertyInfo.GetSetMethod(), new[] {targetPropertyInfo.PropertyType});
            setIL.Emit(OpCodes.Ret);
            propBuilder.SetSetMethod(setBuilder);
        }
        returnType = typeBuilder.CreateType();
        _proxyClasses.Add(key, returnType);
        return returnType;
    }

    public static TIProxy CreateProxyObject<TIProxy>(object backingObject, out TIProxy outProxy) where TIProxy : class
    {
        var t = GetProxyTypeForBackingType(typeof (TIProxy), backingObject.GetType());
        outProxy = Activator.CreateInstance(t, backingObject) as TIProxy;
        return outProxy;
    }

    private static void Main(string[] args)
    {
        var c1 = new C1();
        IC c1Proxy;
        CreateProxyObject(c1, out c1Proxy);
        var c2 = new C2();
        IC c2Proxy;
        CreateProxyObject(c2, out c2Proxy);

        c1Proxy.Prop1 = "c1Prop1Value";
        Debug.Assert(c1.A.Equals("c1Prop1Value"));

        c2Proxy.Prop1 = "c2Prop1Value";
        Debug.Assert(c2.D.Equals("c2Prop1Value"));

        //so you can check it out in reflector
        SaveProxyAssembly();
    }

    private static void OperationWithProp1(object o)
    {
        IC proxy;
        CreateProxyObject(o, out proxy);

        string prop1 = proxy.Prop1;

        // Do something with prop1
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:55:19.957

为了获得最佳性能，您应该为每个属性编写一对静态方法，格式如下：

```
[PropName("Prop1")]
static string Prop1Getter(thisType it) { return it.WhateverProperty; }
[PropName("Prop1")]
static string Prop1Setter(thisType it, string st) { it.WhateverProperty = st; } 
```

我建议您然后使用反射来生成委托，并使用静态泛型类来缓存它们。实际上，您将拥有一个私有静态类`PropertyAccessors<T>`，其委托声明如下：

```
const int numProperties = 3;
public Func<T, string>[] Getters;
public Action<T, string>[] Setters; 
```

然后静态构造函数将执行以下操作：

```
Getters = new Func<T, string>[numProperties];
Setters = new Action<T, string>[numProperties];
for (int i = 0; i< numProperties; i++)
{
  int ii = i;  // Important--ensure closure is inside loop
  Getters[ii] = (T it) => FindSetAndRunGetter(ii, it);
  Setters[ii] = (T it, string st) => FindSetAndRunSetter(ii, it, st);
} 
```

该`FindSetAndRunGetter(ii,it)`方法应该搜索一个合适的属性getter，并且——如果找到——设置`Getters[ii]`为指向合适的属性getter，运行一次，然后返回结果。 应该同样使用属性设置器，将其作为参数`FindSetAndRunSetter(ii, it, st)`运行一次。`st`

使用这种方法将结合使用反射的多功能性和“自动升级”（意味着在未来类中自动查找方法的能力），其速度与硬编码方法相当（如果不是更好的话）。一个烦恼是需要定义如上所述的静态方法。可能可以使用`Reflection.Emit`自动生成包含此类方法的静态类，但这超出了我的专业水平。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T17:28:31.143

IMO，为了清晰/可维护性而使用重载。如果有很多重叠代码，请将其分解为单独的方法。

话虽如此，我假设您首先关心可维护性，因为您没有提到速度。

# asp.net - ConnectionString 错误 webconfig asp.net

> ID：14364131
> 
> 赞同：0
> 
> 时间：2013-01-16T17:24:04.867
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7

我已经在 Windows Server 2003 上配置了 IIS 6.0，很好地运行了 ASP 和 HTML，我已经配置了一个 FTP 站点以通过 Visual Studio 2010 更新 asp.net，VStudio 使发布在网站文件夹中创建这些文件变得很好：

```
 Web.config
 Site.Master
 Site1.Master
 Global.asax
 Default.aspx
 About.aspx
 Styles
 Scripts
 bin
 Account 
```

当我尝试运行 default.aspx 时出现此错误：

分析器的消息错误：部分无法识别：'connectionStrings'

```
 Line 9:  
 Line 10: <configuration>
 Line 11:   <connectionStrings>
 Line 12:     <add name="ApplicationServices"      
 Line 13:          connectionString="data source= 192.168.1.2;  ;Initial Catalog  =ifdcontroladoria3;uid =sa;pwd = admin2012" 
```

这是 webconfig 的代码

```
 <?xml version="1.0"?>
  <configuration>
  <connectionStrings>
  <add name="ApplicationServices"      
      connectionString="Data Source=192.168.1.2 ;Initial Catalog =ifdcontrol;uid =sa;pwd = evita"
     providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

服务器 192.168.1.2 或 MAQ001 在 IIS 6.0 的同一台计算机上，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-30T23:22:18.493

```
<connectionStrings>  

<add name="ConnectionString" providerName="MySql.Data.MySqlClient" 
 connectionString="Data Source=127.0.0.1; port=3306; Initial Catalog=*DbName*; 
uid=root; pwd=*password*;"/>

</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:16:06.380

确保您已将应用程序池的 ASP.NET 版本设置为 2.0 或更高版本。看起来你有这个问题 - [http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/f3df53fe-666b-4a98-92d2-d6e4ba52552a/](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/f3df53fe-666b-4a98-92d2-d6e4ba52552a/)。

# api - 请求模块出错

> ID：14364137
> 
> 赞同：1
> 
> 时间：2013-01-16T17:24:21.787
> 
> 标签：api, node.js, bitcoin

我正在查询 mtgox 服务器。这是 API [https://en.bitcoin.it/wiki/MtGox/API/HTTP/v1](https://en.bitcoin.it/wiki/MtGox/API/HTTP/v1)。我的代码成功访问服务器，但几次后弹出此错误：

```
events.js:115
      listeners[i].apply(this, args);
                   ^
TypeError: Cannot call method 'apply' of undefined
    at EncryptedStream.EventEmitter.emit (events.js:115:20)
    at SecurePair.destroy (tls.js:896:22)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我很确定这不是来自 API 调用限制。

//以下函数以美元返回一般代码信息。这包括高、低和音量...

```
exports.market_data = function(req, res, next){
  console.log("test");
  options = {
    uri: 'http://mtgox.com/api/1/BTCUSD/ticker',
    headers: {
      'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/555.55 (KHTML, like Gecko) Chrome/55.5.5555.55 Safari/555.55'
    }
  };
  try {
    request(options, function (err, response, body) {
      // console.log(body);
      APIResponder.respond(res, response);
    });
  } catch(err) {
      console.log(err);
      console.log("Gangnam style");
    throw err;
  }
}; 
```

抱歉耽搁了，互联网死了。这是查询 MTGox 的代码。希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:39:02.970

我不知道您的*请求*功能是什么，但如果它是*http.request*的快捷方式，您应该记住响应是分块到达的。您不知道是否可以以与**响应**获取块相同的速度写入**res** ，因此您的 APIResponder.respond 应该将响应通过管道传输到 res: res.pipe(response)，或者您可以手动处理：

 **```
response.on('data',function(data){
    var flushed = res.write(data);
    if(!flushed) response.pause();
})
res.on('drain',function(){
    response.resume();
}) 
```**

# matlab - Matlab Canny边缘检测器中的最小阈值

> ID：14364139
> 
> 赞同：0
> 
> 时间：2013-01-16T17:24:33.983
> 
> 标签：matlab, edge-detection, threshold

**Matlab 版本：7.8.0(R2009a)**

我在 Matlab 中使用 Canny 边缘检测器来查找边缘，但是对于我的问题，我需要一些 X 数量的边缘。我需要更多不。边缘然后通过将阈值设置为0来返回。例如在下图中：`bw = edge(lena,'canny',0); imshow(bw)`

![莉娜，Highthresh = 0](../Images/a1a929d8acf2b9ff879f74783b14f686.png)
我仍然得到一些黑色区域。我想在这些地区获得更多优势。那么，canny 可以采用的阈值最小值是多少？我已经给零了。

**注意：**有趣的是，Matlab 不会对阈值的负值给出错误。但它仍然具有相同的优势。`[bw1 t]= edge(j(:,:,2),'canny',-7577908988800);`给 t 作为`-3.0312 -7.5779`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:47:30.453

指定的[官方](http://www.mathworks.com/help/images/ref/edge.html)`edge`文档

> `thresh`是一个**双元素** `vector`，其中第一个元素是低阈值，第二个元素是高阈值。如果您指定`scalar`for `thresh`，则此`scalar`值用于**高**阈值...

尝试明确设置较低的阈值，而不仅仅是高阈值：

```
[bw1 t]= edge(j(:,:,2),'canny',[-inf SomethingBig]) 
```

# android - Android视频帧处理

> ID：14364144
> 
> 赞同：17
> 
> 时间：2013-01-16T17:24:46.347
> 
> 标签：android, video, image-processing, camera, computer-vision

我正在开发对相机帧进行一些实时图像处理的应用程序。为此，我使用预览回调的方法`onPreviewFrame`。
这适用于支持分辨率至少为 640x480 或更大的预览帧的相机。但是当相机不支持如此大的相机预览分辨率时，应用程序被编程为拒绝处理此类帧。现在，我遇到的问题是像`Sony Xperia`Go 这样的手机。这是一款非常不错的设备，可以录制分辨率高达 1280x720 的视频，但不幸的是，最大的相机预览尺寸为 480x320，这对于我的需求来说太小了。

我想知道的是如何获得这些`larger camera frames`（高达 1280x720 或更高）？显然它必须是可能的，因为相机应用程序能够以该分辨率录制视频 - 因此这个应用程序必须能够以某种方式访问​​那些更大的帧。如何从我的应用程序中执行相同操作？

应用程序必须支持 Android 2.1 及更高版本，但即使我只找到适用于 Android 4.0 或更高版本的问题的解决方案，我也会非常高兴。

这个问题类似于`http://stackoverflow.com/questions/8839109/processing-android-video-frame-by-frame-while-recording`，但我不需要保存视频 - 我只需要那些高分辨率视频帧......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-27T07:11:50.540

看来您唯一能做的就是从 MediaRecoder 数据中解码帧。您可以使用 ffmpeg 从 LocalSocket 解码记录器数据。

希望以下开源项目能有所帮助：

ipcamera-for-android：[https ://code.google.com/p/ipcamera-for-android/](https://code.google.com/p/ipcamera-for-android/)

spydroid-ipcamera: [https://code.google.com/p/spydroid-ipcamera/](https://code.google.com/p/spydroid-ipcamera/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T13:15:07.907

您可能应该看看[OpenCV](http://opencv.org/platforms/android/opencv4android-samples.html)库。它具有允许您接收完整帧的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T00:23:18.910

我有一个印象：视频预览尺寸小，而且速度慢，比设置的视频录制帧率慢。

我曾经试图寻找解决方案。似乎更好的方法是从录像机中获取视频流，然后直接处理来自视频流的数据。

您可以在 Android ip-camera 上找到一些示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-26T12:14:13.493

你可以使用这个库：

[https://github.com/natario1/CameraView](https://github.com/natario1/CameraView)

该库具有函数中具有参数`addFrameProcessor`的侦听器。`process``Frame`

如果需要在帧处理的同时录制视频，则需要使用 from 的`takeVideoSnapshot`功能`CameraView`。`takeVideo`在我测试的最新版本 2.6.4 中停止帧处理，直到完成视频录制。

# functional-programming - 是否可以在 OCaml 中使其完全多态？

> ID：14364145
> 
> 赞同：4
> 
> 时间：2013-01-16T17:24:47.843
> 
> 标签：functional-programming, ocaml

在 OCaml 中

```
 let nth_diff_type i (x, y, z) =
        match i with
         1 -> x
        |2 -> y
        |3 -> z
        |_ -> raise (Invalid_argument "nth") 
```

所以当前的类型是`int->('a,'a,'a)->'a`，对吧？

这意味着 x、y、z 必须具有相同的类型。

所以我的问题是，**是否可以给它最大多态性**，以便 x, y, z 不需要具有相同的类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T17:49:23.690

不，不是。

OCaml 中的函数应该只有一种返回类型。如果你的返回类型是唯一的，你可以有不同的参数类型：

```
let nth_diff_type i (x, y, z) =
    match i with
    | 1 -> `Fst x
    | 2 -> `Snd y
    | 3 -> `Thd z
    |_ -> raise (Invalid_argument "nth")

// val nth_diff_type :
//   int -> 'a * 'b * 'c -> [> `Fst of 'a | `Snd of 'b | `Thd of 'c ] = <fun> 
```

如果您想为三元组创建一些实用函数，不幸的是您必须单独定义它们：

```
let fst3 (x, _, _) = x
let snd3 (_, y, _) = y
let thd3 (_, _, z) = z 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T05:34:24.330

如果您的函数要将任意函数`f`应用于元组的任意元素，例如该函数`f`具有正确的类型，那么您可以在某种程度上使这个多态性。

换句话说，如果你考虑一下你可以用你的函数做什么，你会得出结论，你需要一个正确类型的函数来将它应用到 的结果`nth_diff_type`，无论该类型可能是什么。

如果我们假设某个瞬间`nth_diff_type`适用于任何元组，那么它的结果可能是任何类型。您可能会得到一个`int`、一个`string`或更复杂数据类型的实例。我们称之为类型`t`。那么你能用 type 的值做什么`t`呢？您只能将其传递给接受`t`.

所以现在的问题是选择正确的函数，并且该选择肯定会根据与元组中元素的等级非常相似的标准来完成。如果是这样，为什么不简单地传递您的元组，以及可以应用于的函数的元组`nth_diff_type`，并让它自己执行应用程序？

```
let nth_diff_type i (a,b,c) (fa,fb,fc) =
    match i with
        | 1 -> fa a
        | 2 -> fb b
        | 3 -> fc c
        | _  -> failwith "out of range"

-: val nth_diff_type : int -> ( 'a * 'b * 'c) -> (('a -> 'd) * ('b -> 'd) * ('c -> 'd)) -> 'd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T01:17:50.273

代码在非依赖类型系统中已经是完全多态的。您可以迁移到依赖类型系统（但您可能不希望，因为复杂性成本），其中类型类似于：

```
(n : int) -> (a * b * c) -> (match n with 1 -> a | 2 -> b | 3 -> c | _ -> Error) 
```

除了填充建议之外，您可能还希望使用记录或对象类型来进行直接的“外投影”操作，而不必先通过模式匹配来定义它。

```
type ('a, 'b, 'c) triple = { nth1 : 'a; nth2 : 'b; nth3 : 'c } 

(* replace *) nth_diff_type 2 v (* by *) v.nth2 
```

使用对象类型（这增加了不必事先定义类型的结构风味）

```
 (* replace *) nth_diff_type 2 v (* by *) v#nth2 
```

请注意，这些替换仅适用于常量整数（因为否则您需要整数-> 类型依赖项）。您可以使用 GADT 和存在类型来支持传递特定选择，但是您将不得不为某些事情付出巨大的复杂性成本，这很可能是由于对现有简单类型系统不够熟悉而无法理解如何你真的很想做的事情。

# iphone - 在页面上发布的 Facebook URL 方案

> ID：14364151
> 
> 赞同：0
> 
> 时间：2013-01-16T17:25:16.077
> 
> 标签：iphone, objective-c, xcode, facebook

是否可以在带有 url 方案的页面上发布？

我目前有这个，fb://profile/325899700848032

但这只会打开页面。我的意思是这样的 fb://profile/325899700848032/PostMessage/"test message" 或 ../PostImage/image

这样的事情有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:34:55.020

要在 Facebook 页面上发帖，您需要先获得著名的`manage_pages`授权。一旦你有了它，你就可以在 openGraph 上创建一个 FBRequest，`me/accounts`它会返回一个当前用户页面和其他应用程序的数组。您为每个页面解析此 json，然后选择`token_access`和`id`. 然后，您在您的 facebook 管理器上设置页面令牌访问权限，然后您可以将例如图片发布到页面，其中`"{id}/photos"`POST 图请求`{id}`是页面 ID。

# security - 合理的退避算法？

> ID：14364152
> 
> 赞同：0
> 
> 时间：2013-01-16T17:25:16.660
> 
> 标签：security

我想减缓攻击者的速度，这些攻击者会暴力破解我的应用程序中泄露帐户信息的部分。（例如，如果您使用正在使用的用户 id 访问注册页面，页面响应会告诉您该用户 id 将有利于随后的字典攻击。）

什么是使连续失败的尝试**越来越慢的合适****算法**？现实世界的例子是 iPhone 上连续的错误密码。

 **我在 PHP 中实现，但任何伪代码响应将不胜感激。答案的关键部分是：

在尝试失败 N 时，将响应延迟 X。

一个非常好的答案将包括：

M 次尝试在我们对人为错误的容忍范围内，因此曲线“曲棍球棒”接近 M+1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:25:16.660

简单的几何图形对于拥有普通名字的人来说感觉**太苛刻了。**（John Smith 可能需要几次尝试才能找到未占用的用户 ID。）

`sleep(pow(2,$failed_attempts));`

也许我选择了一个愚蠢的常数？**

# c# - 在数据集中搜索项目并将其显示在组合框中

> ID：14364153
> 
> 赞同：-2
> 
> 时间：2013-01-16T17:25:18.573
> 
> 标签：c#

我已经在表单加载时完成了组合框绑定。我想加载包含众多产品的 ComboBox，然后基于条形码我想在 ComboBox 中选择相应的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:36:36.510

如果我理解正确，您想加载`ComboBox`大量产品，那么您想根据条形码在`ComboBox`. 尝试以下操作：

```
productname_tb.Items.IndexOf("<YOUR BARCODE>"); 
```

这对你有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:50:29.553

我相信你正在寻找这个：

```
DataTable products = new DataTable();
products.Columns.Add("Product_Name");
products.Columns.Add("Product_BarCode");

products.Rows.Add("test1", 123456);
products.Rows.Add("test", 923456);
products.Rows.Add("test8", 823456);
products.Rows.Add("test", 723456);
products.Rows.Add("test0", 023456);

productname_tb.DataSource = products;
productname_tb.DisplayMember = "Product_Name";
productname_tb.ValueMember = "Product_BarCode";

// select the "test8" item by using it's Product_BarCode value of 823456
for (int i = 0; i < productname_tb.Items.Count; i++)
{
    if (((System.Data.DataRowView)(productname_tb.Items[i])).Row.ItemArray[1].ToString() == "823456")
    {
        productname_tb.SelectedItem = productname_tb.Items[i];
        break;
    }
} 
```

# regex - 正则表达式排除字符不起作用

> ID：14364156
> 
> 赞同：2
> 
> 时间：2013-01-16T17:25:34.750
> 
> 标签：regex, powershell, powershell-2.0, regex-negation

我有一个简单的正则表达式可以将所有匹配项从文本文件返回到文件：

```
\\Root_Dir.*？
```

它们以“ `\Root_dir`”开头并以单引号结尾。它工作正常，但问题是我想排除扩展名为`.rep`. 根据我阅读的内容，我尝试了：

```
\\Root_Dir.*?(?!\.rep)'
```

这仍然包括像`\Root_dir\nextdir\happy.rep`.

如果可能，我还想在返回的内容中排除结束单引号

我正在使用 PowerShell 2.0，我相信它支持外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:32:22.790

你应该使用**否定**的lookbehind ..ie你需要在单引号后面寻找任何出现的`.rep`

```
\\Root_dir[^']*(?<!\.rep)(?=') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:38:27.390

```
\\Root_Dir.*?(?!\.rep)'
```

*考虑在字符串中的同一位置*（在 之后`.*?`）要求的内容：

 **   匹配单引号
*   所以不匹配`\.rep`

显然，在示例中这将是正确的，因为`.*?`with 匹配`.rep`并因此满足了负面展望。

由于 .NET 支持可变宽度环视¹，因此您需要先在预视中执行可变宽度部分，然后再单独执行引用：

```
\\Root_Dir(?!.*?\.rep).*?'
```

但是，我很想将其分解为：

1.  以前缀开头：`$value.StartsWith("\\Root_Dir")`
2.  如果 #1 为真，则使用正则表达式，后面带有否定的外观：（`(?<!\.rep)'$`即，前面没有...的引号）。

* * *

¹没有人告诉 PM/dev 其他人认为这太难了。*

# node.js - 从 Mongoose 的嵌套数组中提取值

> ID：14364157
> 
> 赞同：0
> 
> 时间：2013-01-16T17:25:37.367
> 
> 标签：node.js, mongodb, mongoose

我是第一次与 Mongoose 合作，我正在努力完成看似简单的任务。我有一个包含`clients`属性的用户文档，该属性由一组客户端 ID 组成。例如，我的文档如下所示：

```
{
  email: "nick@movementstrategy.com",
  password: "$2a$10$xZVzMYgyoyT.biOMDrBlRe3HNHY5A6lXga6uc8b/cnIAX/khQ7ep2",
  modified: ISODate("2013-01-16T00:13:56.894Z"),
  created: ISODate("2013-01-16T00:13:56.894Z"),
  _id: ObjectId("50f5f0c4d6bbbcc6ce000002"),
  clients: [
    "50f6e118e0ccf9a1e9000001",
    "50f6e12be0ccf9a1e9000002"
  ],
  __v: 0
} 
```

我创建了一个中间件，当我调用 remove(); 时删除客户端的依赖项；

```
clientSchema.pre('remove', function(next) {

    Sweepstakes.remove({client_id: this._id}).exec();
    Submission.remove({client_id: this._id}).exec();

    // find users with this._id present in clients, and remove from array

    next();

}); 
```

现在，我只需要找到所有在 中存在客户端 ID`clients`的用户，删除该 ID，然后更新用户。

我知道我可以轻松地查询所有存在 id 的用户，然后循环遍历并单独保存每个用户......但这似乎效率低下，我的直觉告诉我有更好的方法来完成我正在尝试的事情要做 - 只是很难在文档中找到它。

使用 Mongoose 最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:40:50.803

大概是这样的：

```
Users.update({condition}, {$pull : { clients: this._id} }, function(err, numAffected) {
    //handle errors and whatever
    next();
}); 
```

您可以添加`clients : {$in : [this._id]}`as`condition`以限制更新。

# asp.net - 在服务器上的 asp.net 中为多项选择测试存储什么数据结构

> ID：14364159
> 
> 赞同：0
> 
> 时间：2013-01-16T17:25:40.283
> 
> 标签：asp.net, data-structures

这些是好的答案吗？

*   字符串数组
*   数据表
*   自定义类

最好的方法是什么？

**编辑：**

假设它是多项选择题（A、B、C、D），并且一次只给出一个这样的问题很少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:59:34.523

一组自定义类适合一组多项选择题。伪代码：

```
class Question {
   public string QuestionText { get; set; }
   public List<Answer> answers {get; set; }
}

class Answer {
    public string AnswerText {get; set;}
    public bool isTheRightAnswer {get; set;} //or something like that or some other properties
} 
```

因此，如果您想发送多个问题，您可以发回

```
List<Question> 
```

# javascript - 在画布中随机生成对象，不重复或重叠

> ID：14364161
> 
> 赞同：4
> 
> 时间：2013-01-16T17:25:48.477
> 
> 标签：javascript, arrays, html, canvas

如何在地图上生成对象，而不会占用相同的空间或在 HTML5 画布上重叠？

X坐标在一定程度上是随机生成的。我想检查数组内部是否已经存在，以及之后的 20 个值（以考虑宽度），但没有运气。

```
var nrOfPlatforms = 14,
platforms = [],
platformWidth = 20,
platformHeight = 20;
var generatePlatforms = function(){
  var positiony = 0, type;
  for (var i = 0; i < nrOfPlatforms; i++) {
    type = ~~(Math.random()*5);
    if (type == 0) type = 1;
    else type = 0;
    var positionx = (Math.random() * 4000) + 500 - (points/100);
    var duplicatetest = 21;
    for (var d = 0; d < duplicatetest; d++) {
      var duplicate = $(jQuery.inArray((positionx + d), platforms));
      if (duplicate > 0) {
        var duplicateconfirmed = true;
      }
    }
    if (duplicateconfirmed) {
      var positionx = positionx + 20;
    }
    var duplicateconfirmed = false;
    platforms[i] = new Platform(positionx,positiony,type);
  }
}(); 
```

我最初通过让它们在大约 4000 大的区域中生成来进行作弊修复，降低了几率，但我想随着游戏的进行增加难度，通过让它们看起来更在一起，使其更难。但随后它们重叠。

以粗略的图片形式，我想要这个

```
....[]....[].....[]..[]..[][]... 
```

不是这个

```
......[]...[[]]...[[]]....[].... 
```

我希望这是有道理的。

作为参考，这里是数组检查和难度之前的代码，只是便宜的距离黑客。

```
var nrOfPlatforms = 14,
platforms = [],
platformWidth = 20,
platformHeight = 20;
var generatePlatforms = function(){
  var position = 0, type;
  for (var i = 0; i < nrOfPlatforms; i++) {
    type = ~~(Math.random()*5);
    if (type == 0) type = 1;
    else type = 0;
    platforms[i] = new Platform((Math.random() * 4000) + 500,position,type);
  }
}(); 
```

**编辑 1**

经过一些调试，重复返回为 [object Object] 而不是索引号，但不知道为什么

**编辑 2**

问题是对象在数组平台中，而 x 在数组对象中，那么我该如何再次搜索呢？，这就是它之前失败的原因。感谢 firebug 和 console.log(platforms);

```
platforms = [Object { image=img,  x=1128,  y=260,  more...}, Object { image=img,  x=1640,  y=260,  more...} etc 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T17:32:17.533

您可以实现一个 while 循环，该循环尝试插入一个对象并在它发生碰撞时静默失败。然后添加一个计数器并在放置所需数量的成功对象后退出 while 循环。如果对象靠得很近，则此循环可能会运行更长的时间，因此您可能还想给它一个最长的寿命。或者你可以实现一个'是否甚至可以将 z 对象放在 x 和 y 的地图上'以防止它永远运行。

这是一个示例（[演示](http://jsfiddle.net/vwW5h/2/)）：

```
//Fill an array with 20x20 points at random locations without overlap
var platforms = [],
    platformSize = 20,
    platformWidth = 200,
    platformHeight = 200;

function generatePlatforms(k) {
  var placed = 0,
      maxAttempts = k*10;
  while(placed < k && maxAttempts > 0) {
    var x = Math.floor(Math.random()*platformWidth),
        y = Math.floor(Math.random()*platformHeight),
        available = true;
    for(var point in platforms) {
      if(Math.abs(point.x-x) < platformSize && Math.abs(point.y-y) < platformSize) {
        available = false;
        break;
      }
    }
    if(available) {
      platforms.push({
        x: x,
        y: y
      });
      placed += 1;
    }
    maxAttempts -= 1;
  }
}

generatePlatforms(14);
console.log(platforms); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:51:02.257

以下是实现网格捕捉哈希的方法：http: [//jsfiddle.net/tqFuy/1/](http://jsfiddle.net/tqFuy/1/)

```
var can = document.getElementById("can"),
    ctx = can.getContext('2d'),
    wid = can.width,
    hei = can.height,
    numPlatforms = 14,
    platWid = 20,
    platHei = 20,
    platforms = [],
    hash = {};

for(var i = 0; i < numPlatforms; i++){
  // get x/y values snapped to platform width/height increments
  var posX = Math.floor(Math.random()*(wid-platWid)/platWid)*platWid,
    posY = Math.floor(Math.random()*(hei-platHei)/platHei)*platHei;

  while (hash[posX + 'x' + posY]){
    posX = Math.floor(Math.random()*wid/platWid)*platWid;
    posY = Math.floor(Math.random()*hei/platHei)*platHei;
  }

  hash[posX + 'x' + posY] = 1; 
  platforms.push(new Platform(/* your arguments */));
} 
```

请注意，我正在连接 x 和 y 值并将其用作哈希键。这是为了简化检查，并且只是一个可行的解决方案，因为我们将 x/y 坐标捕捉到特定的增量。如果我们不捕捉，碰撞检查会更复杂。

对于大型集合（根据您的标准似乎不太可能），使用排除方法可能会更好：生成所有可能位置的数组，然后对于每个“平台”，从数组中随机选择一个项目，然后将其删除从数组。这类似于你如何洗牌。

**编辑**——要注意的一件事是`numPlatforms <= (wid*hei)/(platWid*platHei)`必须评估为真，否则 while 循环将永远不会结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:57:39.393

我使用这段代码搜索数组中的对象，找到了另一个问题（[在 JavaScript 数组中搜索对象）的答案](https://stackoverflow.com/questions/3624741/searching-for-objects-in-javascript-arrays)

```
function search(array, value){
    var j, k;
    for (j = 0; j < array.length; j++) {
        for (k in array[j]) {  
            if (array[j][k] === value) return j;
        }
    }
} 
```

我最终还重写了一堆代码，以在其他地方加速它并更好地回收平台。

它有效，但缺点是我的平台较少，因为它真的开始变慢了。最后这就是我想要的，但这样做不再可行。

```
var platforms = new Array();
    var nrOfPlatforms = 7;
    platformWidth = 20,  
    platformHeight = 20;
    var positionx = 0;
    var positiony = 0;
    var arrayneedle = 0;
    var duplicatetest = 21;

    function search(array, value){
        var j, k;
        for (j = 0; j < array.length; j++) {
            for (k in array[j]) {  
                if (array[j][k] === value) return j;
            }
        }
    }

    function generatePlatforms(ind){  
        roughx = Math.round((Math.random() * 2000) + 500);
        type = ~~(Math.random()*5);  
        if (type == 0) type = 1;  
        else type = 0;  

        var duplicate = false;

        for (var d = 0; d < duplicatetest; d++) {
            arrayneedle = roughx + d;
            var result = search(platforms, arrayneedle);
            if (result >= 0) {
                duplicate = true;
            }
        }

        if (duplicate = true) {
            positionx = roughx + 20;
        }
        if (duplicate = false) {
            positionx = roughx;
        }
        platforms[ind] = new Platform(positionx,positiony,type);  
    }  

    var generatedplatforms = function(){
        for (var i = 0; i < nrOfPlatforms; i++) {
            generatePlatforms(i);
        };
    }(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-19T14:09:11.623

您使用大数据，生成所有可能性，将每个可能性存储在一个数组中，打乱数组，修剪前 X 个项目，这是您的非启发式算法。

# javascript - 如何在 WebMatrix 站点的服务器端使用 JavaScript

> ID：14364166
> 
> 赞同：1
> 
> 时间：2013-01-16T17:26:09.687
> 
> 标签：javascript, razor, webmatrix

我有一个简单的网站，只有 1 个页面，其中的表单只有 1 个字段和一个提交按钮。

它要求提供电话号码并使用表单中捕获的电话号码的值调用存储过程。提交后，它会反馈用户说该号码已提交，并停留在页面上，以便用户输入另一个电话号码。

所以我创建了一个如下所示的 cshtml 文件：

```
@{
string pn=Request.Form["pn"]
and then my code to call the stored procedure with pn as a parameter
} 
```

我遇到的问题是，当我转到此页面时，服务器端会抛出一个错误，指出存储的 proc 需要一个未提供的参数。

因此，我想创建一个 JavaScript 函数，该函数将运行`onload`页面，如果`pn`有一个值，它将只调用存储的过程。

我该怎么做，我应该在哪里放置代码（JS在`@{}`块内？）

顺便说一句，截至目前，我有 2 页。第一个，没有任何服务器端代码，第二个是副本，加上服务器端代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:01:59.557

首先，您不需要 JavaScript 函数来验证您的输入客户端，而是需要一个服务器端代码来测试表单是否已提交以及您的字段中是否有有效值。

就像是：

```
@{
    if (IsPost)
    {
        string pn=Request.Form["pn"];
        if (!string.IsNullOrEmpty(pn)){
            /* your code to call the stored procedure */
        }
    }
} 
```

如果您想深入了解这个主题，请查看本教程：[在 ASP.NET 网页 (Razor) 站点中使用数据库简介](http://www.asp.net/web-pages/tutorials/data/5-working-with-data)。

# cmake - 如何将 ANTLR 与 CMake 集成？

> ID：14364168
> 
> 赞同：2
> 
> 时间：2013-01-16T17:26:14.160
> 
> 标签：cmake, antlr

我试图让 CMake 用 ANTLR 生成源文件但没有成功。

这里我用来生成这些文件的命令：

```
$ antlr grammar/MyGrammar.g -fo src/parser 
```

我的可执行目标是在 中定义的`PROJECT/src/CMakeLists.txt`，而不是`PROJECT/CMakeLists.txt`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:45:44.457

如果您说要从内部执行此命令`PROJECT/src/CMakeLists.txt`，则以下内容应该有效：

```
execute_process(COMMAND antlr grammar/MyGrammar.g -fo src/parser
                WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/..) 
```

### 编辑

根据您的评论，您似乎想在每次构建可执行文件时调用它。

要将 antlr 调用与您的可执行文件联系起来，您可以使用[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command)

```
add_custom_command(TARGET MyExe PRE_BUILD
                   COMMAND antlr grammar/MyGrammar.g -fo src/parser
                   WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/..) 
```

这只会在 MyExe 目标过期时执行 antlr 调用。如果更改了 MyGrammar.g，但不需要重建 MyExe，则 antlr 不会运行。

如果您有多个依赖于正在运行的 antlr 的目标，或者您希望能够随时调用 antlr 命令，则可以改用[`add_custom_target`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_target). 这会将 antlr 命令添加为新的伪目标。如果你只是构建这个目标，它所做的只是调用 antlr。对于依赖它的每个目标，请使用[`add_dependencies`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_dependencies)：

```
add_custom_target(Antlr 
                  COMMAND antlr grammar/MyGrammar.g -fo src/parser
                  WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/..
                  SOURCES ../grammar/MyGrammar.g)
add_dependencies(MyExe Antlr)
add_dependencies(MyOtherExe Antlr) 
```

和以前一样，只有在需要重建依赖目标之一或者您明确构建新的自定义目标“Antlr”时才会调用 antlr。（您不需要*调用*中的`SOURCES`参数`add_custom_target`，但此便利功能将 MyGrammar.g 添加到目标文件中，在 MSVC 等 IDE 中可见）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:01:55.160

有点离题，但也许对你有用。 [在这里](https://tora.svn.sourceforge.net/svnroot/tora/trunk/tora/src/libantlr3c-3.3/CMakeLists.txt "这里")，您将找到 ANTLR C 运行时库的 CMake 构建文件。

生成的源与从元数据生成的任何其他源相同。您可以使用 QT 的 UIC 编译器宏作为示例：

```
    宏（QT4_WRAP_UI 输出文件）
    QT4_EXTRACT_OPTIONS(ui_files ui_options ${ARGN})
    FOREACH (它 ${ui_files})
      GET_FILENAME_COMPONENT（输出文件 ${it} NAME_WE）
      GET_FILENAME_COMPONENT(infile ${it} ABSOLUTE)
      SET（输出文件 ${CMAKE_CURRENT_BINARY_DIR}/ui_${输出文件}.h）
         ADD_CUSTOM_COMMAND（输出 ${outfile}
         命令 ${QT_UIC_EXECUTABLE}
         ARGS ${ui_options} -o ${outfile} ${infile}
         MAIN_DEPENDENCY ${infile} VERBATIM)
      SET(${outfiles} ${${outfiles}} ${outfile})
    ENDFOREACH (它)
    ENDMACRO (QT4_WRAP_UI)

```

# css - 将文本叠加到img中时删除剩余的空白，（html，css）

> ID：14364171
> 
> 赞同：0
> 
> 时间：2013-01-16T17:26:33.950
> 
> 标签：css, html

我是 html、css 的新手，我正在尝试为移动应用程序做一个菜单，其中包含一些彼此相邻的垂直对齐的图像，我想在这些图像上叠加一些文本。例如，假设一个体育信息相关应用的主菜单，它包含 5 个背景图像，足球图像、篮球图像、高尔夫图像……每个图像的底部都有文字。

为了解决这个问题，我制作了以下 html 代码：

```
<body onload="onBodyLoad()">
    <div id="cabecera">

        <h1></h1>
    </div>
    <div id="menu-opciones">
        <div class="opcion-menu">
            <img src="../img/tarta.jpg" alt="">
            <a href="./web/Acercade.html"></a>
            <h2><span>Sobre txorierri y Erandio</span></h2>
        </div>
        <div class="opcion-menu">
            <img src="../img/tarta.jpg" alt="">
            <a href="./web/LugaresDeInt.html"></a>
            <h2><span>Lugares de interes</span></h2>
        </div>
        <div class="opcion-menu">
            <img src="../img/tarta.jpg" alt="">
            <a href="./web/DondeComer.html"></a>
            <h2><span>Dónde comer</span></h2>
        </div>
        <div class="opcion-menu">
            <img src="../img/tarta.jpg" alt="">
            <a href="./web/DondeDormir.html"></a>
            <h2><span>Dónde dormir</span></h2>
        </div>
        <div class="opcion-menu">
            <img src="../img/fronton.jpg" alt="">
            <a href="./web/TiempoLibre.html"></a>
            <h2><span>Tiempo libre</span></h2>
        </div>
    </div>
</body> 
```

这样我得到图像，然后是文本，然后是另一个图像，然后是另一个文本......所以通过 css 我重新定位了文本以覆盖每个图像。问题是现在我得到了之前文本所在的空白空间，我希望图像彼此相邻。摆脱那个空白空间的最佳方法是什么？请注意，由于这是针对移动应用程序，我想避免在 css 上使用像素，并尝试做所有相关的 %。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T17:30:39.077

不是 100% 确定你想要达到什么目标，但我认为你可以清理你的 html 并实现你想要的。您可以将每个列表项包装在一个中并获得相同的效果。例如：

```
<div class="opcion-menu">
            <img src="../img/tarta.jpg" alt="">
            <a href="./web/Acercade.html"></a>
            <h2><span>Sobre txorierri y Erandio</span></h2>
</div> 
```

改成：

```
<div class="opcion-menu">
<a href="./web/Acercade.html"><img src="../img/tarta.jpg" alt=""><span>Sobre txorierri y Erandio</span></a>
</div> 
```

然后设置 to position:relative 和 to position:absolute 以将其从文档流中取出。这也将消除该空白，您可以使用 left:-9999; 相对于您的图像定位或隐藏它；和不透明度：0；

希望对你有所帮助。

# ruby-on-rails - Rails 关系“Has_none_or_one”

> ID：14364172
> 
> 赞同：0
> 
> 时间：2013-01-16T17:26:34.230
> 
> 标签：ruby-on-rails, model, associations, slim-lang

我有一个问题，我有一个“用户”模型和一个“专业”模型。在 Professional 模型中，指定它属于一个用户。

但是，用户模型中没有书面关系。应该是这样并没有错，用户可以拥有专业人士（感谢belongs_to），但并非总是如此。

问题是：我不能执行“User.find(49).professional”来测试用户 n°49 是否是专业人士（它应该返回一个布尔值）。

但是我可以执行“Professional.find(65).user”，如果专业 n°65 是用户，则返回 true，如果不是，则返回 false。

在某些用户视图中，我有这个不起作用，因为：

```
- if @user.professional?
  div class="page-header"
    h1 Professional info
  ul style="list-style: none"
  // Id
  li
    strong
      = model_class.human_attribute_name(:id)
      ' :
    = @user.professional.id
  // Country
  li
    strong
      = model_class.human_attribute_name(:country)
      ' :
    = @user.professional.country

[...] 
```

我有一个广泛的“li”列表。因此，if 条件不起作用，@user.professional.someprofessionalattributes 也不起作用。

我首先想到的是我应该在User模型中写“has_none_or_one”，但是当我查看官方文档时它并不存在。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:30:26.317

`has_one` *是*有或无的关系。如果用户没有相应的专业人士，则其专业人士为`nil`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:45:43.523

用于“has_one”，例如：

建立这种关系

在模型用户中：

```
class User < ActiveRecord::Base
 has_one :professional, :dependent => :destroy
end 
```

在模型专业

```
class User < ActiveRecord::Base
 #add this parameter in yours attributes
 attr_accessible :user_id

 belongs_to :user
end 
```

将索引用户添加到专业模型（创建迁移）。

```
rails g migration addIdUserToProfesional 
```

在创建的迁移中添加这个

```
class addIdUserToProfesional < ActiveRecord::Migration
  def change
    add_column :professionals, :user_id, :integer
    add_index :professionals, :user_id
  end
end 
```

**pdt：对不起，我的英语还不是很好，问候。**

# javascript - Google Map Pin Points 从 Javascript 刷新？

> ID：14364179
> 
> 赞同：1
> 
> 时间：2013-01-16T17:26:54.107
> 
> 标签：javascript, google-maps, refresh

通过使用在 Google 地图上显示`refresh`的最佳方式是什么？就像当我按下一个按钮然后地图将通过不再加载页面而生成另一个不同的一样。`Pin Points``Javascript``pins`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:59:10.787

您正在寻找的神奇词汇是“AJAX”（异步 Javascript 和 Xml）。有关描述，请参见Mike Williams 的 Google Maps API v2 教程或 Google“AJAX”[中的“AJAX 哲学”页面](http://econym.org.uk/gmap/basic11.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:15:53.397

这个问题很模糊，没有适当的上下文很难说“最好”。如果页面加载后数据库中的点正在更新，您可以使用附加到按钮的 ajax 调用。

# objective-c - 嵌套 NSMutableDictionary 效率和替代方案

> ID：14364182
> 
> 赞同：0
> 
> 时间：2013-01-16T17:27:04.357
> 
> 标签：objective-c, nsmutabledictionary, performance

我需要存储大量嵌套字符串并使用一些简单的格式（例如，'my.data.object.path'）访问所有数据。

例如，如果我有以下结构：

```
- object1
- object2
-- nested1
-- nested2
--- nestednested1 
```

例如，我需要检查是否`object2.nested2.nestednested1`存在。有时我也必须检查是否`object2.nested2`和`object2`也存在。

使用嵌套的 NSMutableDictionary 对象是否有效，或者我应该从头开始编写一些更有效的数据存储模型？也许您可以建议针对此问题的现成的第 3 方解决方案。

* * *

我也在考虑将所有`my.variable.path`路径存储在一个 中`NSMutableDictionary`，因此我可以简单地设置变量`[storage setObject:object forKey:@"my.variable.path"]`并通过定义一个自定义方法来提取它们，该方法按点分割传入路径并尝试找到最短的路径块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:35:45.040

字典是哈希映射的，它比数组快。

以及它嵌套的级别，您可以通过它访问它`[dict valueForKeyPath.@"key1.key2...."]`

最多 3 级就可以了，但如果你超出了这个范围，那么你可以考虑设计一个类结构来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:46:08.637

我会认真考虑为此使用 Core Data。

*   它适用于大量数据。
*   它的内存效率非常高，即使数据量很大，因为它会根据需要加载。
*   您可以像在示例中一样访问它。
*   它是内置的成熟技术。

涵盖它的主要 Apple 文档是[Core Data Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。
他们还有[适用于 iOS 的核心数据教程，](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)它更短一些，可以帮助您入门。

网上也有很多非 Apple 教程。我最喜欢的一本是 Ran Wenderlich：[iOS 5 核心数据教程：入门](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。他还有其他关于 Core Data 的教程链接自那篇文章和[此处](http://www.raywenderlich.com/tag/core-data)。

# asp.net - 在 aspnet 会员中更改密码格式后更改密码

> ID：14364186
> 
> 赞同：0
> 
> 时间：2013-01-16T17:27:35.763
> 
> 标签：asp.net, sql-server, asp.net-membership, password-protection

我正在使用[aspnet 会员](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)提供程序，默认情况下在幕后使用 HASHED 密码格式，最近我发现使用该格式无法检索密码。所以我需要将密码格式更改为 CLEAR OR ENCRYPTED 但是在这样做之后

有没有办法通过数据库更改现有数据的密码？或者我需要删除所有记录并从头开始创建？

还有如何处理需要将密码格式从清除更改为加密的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T21:59:07.743

不，您将无法解密散列密码。根据定义，散列是单向的。可用的双向选项是加密选项或清除。

散列密码的主要功能是单向加密。即使在内部比较值时，它们也会作为散列值进行比较。

[好吧，从技术上讲，*可以*解密散列值，但这进入了黑客、彩虹表、盐值的领域，我认为你不想去那里]

更多信息[请看这里](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)

# c# - 将属性绑定到验证器以进行 SpecFlow 单元测试

> ID：14364195
> 
> 赞同：0
> 
> 时间：2013-01-16T17:28:04.320
> 
> 标签：c#, asp.net-mvc-3, unit-testing, validation, specflow

因此，我正在使用我的团队正在使用 SpecFlow 测试的 MVC 应用程序。[我使用这里](http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx)`[RequiredIf(prop, val)]`描述的一个实现。

然而，我发现了一个“小”问题——虽然验证在网页上工作得很好，但它们破坏了我们的单元测试！经过调查，我发现在我们的单元测试中直接调用了属性的 IsValid() 方法……可能是因为属性没有绑定到验证器。

在那个博客上，我按照设置步骤向验证器注册了RequiredIf 属性。但是，出于某些单元测试的目的，我需要找出在测试设置中绑定验证的位置。

我尝试了一些或多或少的逻辑选项：

```
[Binding]
public class TestSteps
{
     // Every test has to call this helper to load up the controller...
     private void GoToHome()
     {
         // SNIP: Unimportant
         DataAnnotationsViewModelValidatorProvider.RegisterAdapter(..., ...);
     }
} 
```

...以及在测试套件文件中...

```
// See attribute for why I figured this may be a logical choice.
[BeforeScenario]
public void Setup()
{
    DataAnnotationsViewModelValidatorProvider.RegisterAdapter(..., ...);
} 
```

...然而，由于某种原因，这两个位置都不会导致`RequiredIf()`绑定到它的`RequiredIfValidator()`.

问题：对于单元测试，我应该将 Attribute -> Validator 绑定放在哪里，这样我的单元测试才能正确验证装饰 if 的属性`RequiredIf()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:47:37.683

我不得不承认我不熟悉 MVC 验证，所以这可能会也可能不会。

但是，我猜如果你单独使用 NUnit，你可能想做这样的事情

```
[FixtureSetup]
public void ....()
{
    DataAnnotationsViewModelValidatorProvider.RegisterAdapter(..., ...);
} 
```

目前，您实际上是通过绑定添加验证，这是一个完整的反射跳。

但是，如果您查看自动生成的 xxxxx.feature.cs 文件，您可以看到该类实际上定义为

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("TechTalk.SpecFlow", "1.8.1.0")]
[System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
[NUnit.Framework.TestFixtureAttribute()]
[NUnit.Framework.DescriptionAttribute("xxxxx")]
public partial class xxxxxFeature
{ 
```

显然我们不能编辑它，但是我们可以创建另一个文件来实现我们在部分类中喜欢的任何东西。

在 xxxxx.partial.cs

```
public partial class xxxxxFeature
{
     [FeatureSetup]
     .... 
```

如果不出意外，您还有更多地方可以尝试。祝你好运。

# knockout.js - 淘汰赛：过滤数组中的数组

> ID：14364196
> 
> 赞同：1
> 
> 时间：2013-01-16T17:28:07.243
> 
> 标签：knockout.js, knockout-2.0, knockout-mvc

我有一个命名项目数组，其中每个都包含其他命名项目数组（某种树）。我需要在两个数组中实现按名称过滤。

所以我检查名称第一个数组的每个项目：

*   如果名称合适，我会显示整个分支。
*   如果名称不合适，我正在检查子数组：
    *   如果子数组不包含合适的命名项，我不会显示分支。
    *   如果子数组包含合适的命名项目，我只显示包含合适项目的分支。

我已经通过以下方式实现了它：

```
ko.utils.stringStartsWith = function (string, startsWith) {
    if (startsWith.length > string.length)
        return false;

    return string.substring(0, startsWith.length) === startsWith;
};

$(function () {
    var vm = {
        search: ko.observable(''),
        items: ko.observableArray([])
    };

    //jsonData - my data
    $.each(jsonData, function (i, jItem) {
        var item = {
            name: jItem.Name,
            search: ko.observable(''),
            subItems: ko.observableArray([])
        };

        $.each(jItem.Items, function (j, jsubItem) {
            var subItem = {
                name: jsubItem.Name,
            };

            item.subItems.push(subItem);
        });

        item.filteredSubItems = ko.computed(function () {
                var self = this;

                return ko.utils.arrayFilter(this.subItems(), function (fsubItem) {
                    if (self.search().length == 0
                        || ko.utils.stringStartsWith(fsubItem.name.toLowerCase(), self.search().toLowerCase())) {
                        return true;
                    }

                    return false;
                });
            }, item);
        vm.items.push(item);
    });

    vm.filteredItems = ko.computed(function () {
        var self = this;

        return ko.utils.arrayFilter(this.items(), function (fitem) {
            if (self.search().length == 0
                || ko.utils.stringStartsWith(fitem.name.toLowerCase(), self.search().toLowerCase())) {
                fitem.search('');
                return true;
            }

            fitem.search(self.search());

            if (fitem.filteredSubItems().length != 0)
                return true;

            return false;
        });
    }, vm);

    ko.applyBindings(vm);
}); 
```

所以它运作良好，但计算`filteredItems`看起来对我来说是丑陋的解决方法。此外，我关心我的解决方案的性能。

有人知道更多的林间空地解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T20:05:18.100

我半年前问过这个问题，我忘了说我找到了这个问题的答案。不错且简单的解决方案是[Knockout Mapping](http://knockoutjs.com/documentation/plugins-mapping.html)。

# iphone - 在 iPhone 中加载 XML 文件作为资产 - 目标 c

> ID：14364197
> 
> 赞同：0
> 
> 时间：2013-01-16T17:28:13.420
> 
> 标签：iphone, objective-c, xml

有没有办法以邮件附件或网络下载的形式打开 XML 文件并将其加载到 iPhone 应用程序中？

我希望我的应用程序能够将 XML 文件作为邮件附件打开，然后进行解析。我知道如何进行解析，但我不知道如何加载 XML 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:22:18.113

您将需要查看[文档交互](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010403)，您可以[注册您的应用程序以接收某些类型的文件](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)，您的文件是 .xml。

[打开支持的文件类型](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/OpeningSupportedFileTypes.html#//apple_ref/doc/uid/TP40010412-SW1)

# requestreduce - 切换到 https 后，request reduce 模块停止工作

> ID：14364201
> 
> 赞同：0
> 
> 时间：2013-01-16T17:28:29.083
> 
> 标签：requestreduce

基本上我们已经使用下面的链接几个月了，没有任何问题。基本上将 ddl 添加到 bin 中，然后将 2 行添加到 web.config 中，然后它就消失了。

[https://github.com/mwrock/RequestReduce](https://github.com/mwrock/RequestReduce)

当我们完成自签名证书进行测试并将所有页面重定向到 https 时，问题就出现在我们的上线前环境中。基本上请求减少模块停止输出文件。

有人有这个问题吗？

查看仪表板后，出现一个命令异常，即“底层连接已关闭 - 无法为 SSL/TLS 安全通道建立信任关系”

还是卡住了。。

谢谢罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T10:17:53.767

我认为您必须使用与 HTTPS 证书中指定的名称相同的主机名来访问您的页面。

例如：如果

*   您在域 LAN 中工作
*   你在你的机器上进行测试（“mymachine”）
*   对于 HTTPS，您在 IIS 中提供了为“mymachine.mylocaldomain”颁发的证书

那么您必须使用`https://mymachine.mylocaldomain...`（而不是`https://mymachine...`！）访问该站点

（如上所述`https://github.com/mwrock/RequestReduce/wiki/RequestReduce-is-not-working.-I-don't-see-any-spriting-or-minification.-How-can-I-troubleshoot-this%3F`：“如果您的站点在 HTTPS 上运行，并且您在开发环境中使用自签名证书，请确保该证书具有与您正在使用的主机名匹配的通用名称，并且驻留在受信任的证书颁发机构证书中店铺。 ”

# python - 当你不是超级用户时如何安装 numpy？

> ID：14364203
> 
> 赞同：2
> 
> 时间：2013-01-16T17:28:36.630
> 
> 标签：python, numpy, installation

我已经下载了 python 二进制文件，然后在我的主文件夹中使用

```
tar xzvf Python-2.7.3.tgz 
```

这似乎有效，当我跑步时

```
~/Python-2.7.3/python 
```

效果很好。但是，当我尝试导入 numpy 时，显然它不包括在内。我已经下载了 numpy 二进制文件并在我的主目录中打开它，但 python 仍然找不到它。是否有什么特别的地方我必须放置 numpy 文件夹以便 Python 找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:35:52.453

使用[pythonbrew](https://github.com/utahta/pythonbrew)将 Python 安装到您的 $HOME 文件夹中：

```
$ pythonbrew install 2.7.2 
```

然后切换您当前的 shell 以使用您的本地 Python 安装：

```
$ pythonbrew use 2.7.2 
```

现在你应该可以安装 NumPy 了：

```
$ pip install numpy 
```

# regex - 正则表达式模式 - 从字符串中提取数字

> ID：14364205
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:28:56.260
> 
> 标签：regex

由于对正则表达式知之甚少，我不得不寻求专家的帮助来制作正则表达式模式，以便从以下字符串中提取数字**63600 ：**

```
Amount - < span style="color:#333">63600</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:33:27.360

很简单

```
>(/d+)< 
```

可以做这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:33:38.420

如果它是该字符串中唯一的数字，请使用`\d+`. `\d`匹配一个数字，`+`意味着它必须是 1 个或多个数字。

编辑：

OP编辑了一个问题。现在，如果它是标签之间的唯一数字，您可以这样处理：

```
>\d+< 
```

# javascript - 获取 CSS 转换值

> ID：14364206
> 
> 赞同：3
> 
> 时间：2013-01-16T17:28:57.520
> 
> 标签：javascript, jquery, css

我有这个 CSS

```
#main .timer img.hand {
    position: absolute;
    left: 0;
    bottom: 0;
    transform: rotate(90deg); -moz-transform: rotate(90deg); -o-transform: rotate(90deg); -webkit-transform: rotate(90deg); -ms-transform: rotate(90deg);
    transition: transform 1.25s ease-out 0s; -webkit-transition: -webkit-transform 1.25s ease-out 0s; -moz-transition: -moz-transform 1.25s ease-out 0s; -o-transition: -o-transform 1.25s ease-out 0s;
    transform-origin: 50% 98% 0; -webkit-transform-origin: 50% 98% 0; -moz-transform-origin: 50% 98% 0; -o-transform-origin: 50% 98% 0; -ms-transform-origin: 50% 98% 0;
} 
```

我正在尝试在 JS 中提取转换值。

```
var $timer = $('<img>', {'class': 'hand', 'src': 'images/timer-hand.png'});

console.log($timer.css('transition')) // returns an empty string 
```

我也尝试过'-moz-transition' - 结果相同。

```
$timer.css({'transition': 'none'}); // works fine 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:51:36.863

过渡 - 将四个过渡属性设置为单个属性的简写属性。

转换属性转换持续时间转换时间函数转换延迟

设置属性之一：

```
console.log($timer.css('transition-property'));
console.log($timer.css('transition-delay')); 
```

# vb.net - 将多个视频保存和检索到本地存储？

> ID：14364209
> 
> 赞同：0
> 
> 时间：2013-01-16T17:29:10.363
> 
> 标签：vb.net, windows-phone-8

我在这里使用微软的示例应用程序：

[http://msdn.microsoft.com/en-us/library/hh394041(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394041(v=vs.92).aspx)

作为开发应用程序的起点，该应用程序允许用户将应用程序中的多个视频录制到一个集合中。

实现这一目标的最佳方法是什么？我注意到该示例使用 fileSink 对象来指定隔离存储中的捕获源和文件名。

```
 Private Sub StartVideoRecording()
    Try
        ' Connect fileSink to captureSource.
        If captureSource.VideoCaptureDevice IsNot Nothing AndAlso captureSource.State = CaptureState.Started Then
            captureSource.Stop()

            ' Connect the input and output of fileSink.
            fileSink.CaptureSource = captureSource
            fileSink.IsolatedStorageFileName = isoVideoFileName
        End If

        ' Begin recording.
        If captureSource.VideoCaptureDevice IsNot Nothing AndAlso captureSource.State = CaptureState.Stopped Then
            captureSource.Start()
        End If

        ' Set the button states and the message.
        UpdateUI(ButtonState.Recording, "Recording...")

        ' If recording fails, display an error.
    Catch e As Exception
        Me.Dispatcher.BeginInvoke(Sub() txtDebug.Text = "ERROR: " & e.Message.ToString())
    End Try
End Sub 
```

然后我将如何查询该集合并允许用户选择该视频以在列表视图中查看？有没有办法指定一个文件夹来组织视频文件？

只是寻找一些关于最佳实践的建议来完成这项工作。我想使用一个视频选择器，允许用户从他们的相册中选择一个视频，但 Windows Phone 目前不允许这样做.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:39:56.643

那么，有必要使用文件夹吗？没有人可以浏览 ISO 存储，所以我认为不需要文件夹 :)。

使用该教程，创建了两个文件：“CameraMovie.mp4”和“CameraMovie.mp4.jpg”（jpg 至少是在我的手机上创建的，使用 ISETool 查看 ISO 存储的内容）。

要录制多个视频，您必须每次重命名文件名

```
private string isoVideoFileName = "CameraMovie.mp4";

// reset the name when the recording starts
isoVideoFileName = DateTime.Now.ToString("yyyy-MM-dd_HH_mm") + ".mp4"; 
```

只需在开始录制时更改该变量即可。

在每次录制结束时，将视频名称添加到列表中，添加视频后，保存列表（也保存到 ISO 存储中）。在加载应用程序时，您从 ISO 加载列表，使用 jpg 来制作视频图块（或者您想用它来做；））

希望这会对您有所帮助，如果您还没有找到解决方案。

请注意，我很抱歉使用 C#，而您使用 VB。然而，我对 VB 的了解还不够，无法随意输入；）

# c - fprintf 不工作

> ID：14364210
> 
> 赞同：3
> 
> 时间：2013-01-16T17:29:11.733
> 
> 标签：c, io

我正在测试它的用法，`fprintf()`但它不起作用。当我第一次编写代码时，我忘记在`\n`里面添加`fprintf()`它并且它起作用了。但是，当我`\n`在“test 1 2”开始时添加它时，它停止了工作。

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
    FILE* f = fopen("test.txt", "r+");
    if( f == NULL) return 0;

    char str[4][10];

    for(int a = 0; a <= 3; ++a)
    {
        fscanf(f, " %[^\t\n]s", str[a]);
        printf("%s\n", str[a]);
    }

    fprintf(f, "\ntest 1 2\n");

    fclose(f);
    system("pause");
    return 0;
} 
```

并且我的 test.txt 包含（而不是`\t`我`\n`按 tab 并输入文件，但我无法在这里管理它）

> ab\tcd\te\n fg

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T17:48:40.537

> 对于为追加而打开的文件（包含“+”号的文件），在这些文件上允许输入和输出操作，应在写入操作之后刷新（fflush）或重新定位（fseek、fsetpos、rewind）流读取操作或未到达文件末尾的读取操作，然后是写入操作。

[来源](http://www.cplusplus.com/reference/cstdio/fopen/)

所以添加这个：

```
fflush(f); 
```

如果您`fprintf`想在不删除其先前内容的情况下附加到文件，或者这样：

```
rewind(f); 
```

如果您想覆盖内容，如您的评论所指出的那样。

# python - 发布后如何更新数据库驱动的应用程序？

> ID：14364214
> 
> 赞同：1
> 
> 时间：2013-01-16T17:29:18.690
> 
> 标签：python, database, migration, sqlalchemy

我正在开发一个非常依赖数据库驱动的网络应用程序。我即将发布初始版本，因此我已锁定此版本的功能，但在发布后将实施许多其他功能。这些功能不可避免地需要对数据库模型进行一些修改，因此我担心在每个版本中迁移数据库的复杂性。我想知道的是，我应该在多大程度上关注现在锁定一个可靠的数据库设计以便我可以快速发布，而不是现在尝试预测某些功能以便我可以在发布之前将其构建到数据库中？我也预计会发现我当前模型的缺陷，然后可能想要对其进行更改，但如果我发布应用程序然后数据开始进入，我想迁移数据将是一项艰巨的任务。是否有解决此类问题的常规方法？指向正确方向的点将非常有用。

对于一些背景知识，我正在为 CG 制作管道开发资产管理系统。如此多的数据，它们之间有很多联系。它是基于网络的，完全用 Python 编写，它使用带有 SQLite 引擎的 SQLAlchemy。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:03:42.727

为生产应用程序管理数据库的一些想法：

1.  每晚进行备份。这是至关重要的，因为如果您尝试进行更新（对数据或架构）并且您搞砸了，您将需要能够恢复到更稳定的东西。

2.  创建环境。您应该拥有一个用于开发的本地数据库副本、一个供其他人在上线之前查看和测试的暂存数据库，当然还有一个您的实时系统指向的生产数据库。

3.  在本地开始开发之前，请确保所有三个环境都同步。通过这种方式，您可以跟踪一段时间内的变化。

4.  开始编写脚本并为它们发布版本。确保将它们存储在源代码控制系统（SVN、Git 等）中。您只需要更改历史记录以及需要在给定版本中运行的一小部分脚本。只是帮助您保持井井有条。

5.  对本地数据库进行更改并进行测试。确保您有执行两件事的脚本，1) 修改数据或架构的脚本，2)*撤消*您所做工作的脚本，以防出现问题。在本地反复测试这些。运行脚本，测试然后回滚。事情还好吗？

6.  在 staging 上运行脚本，看看是否一切正常。再次证明您的工作是好的，如果需要，您可以撤消更改。

7.  一旦暂存良好并且您感到有信心，请在生产数据库上运行您的脚本。请记住，您有更改数据的脚本（更新、删除语句）和更改架构的脚本（添加字段、重命名字段、添加表）。

一般来说，慢慢来，在你的行动中非常谨慎。你越自律，你就会越自信。更新数据库可能很可怕，所以不要着急，写下你的行动计划，然后测试、测试、测试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:25:00.273

我看到（并且喜欢）的一种方法是一个名为的表`versions`，它只包含一个 id。

然后有`updates.sql`一个结构类似于这样的脚本：

```
DELIMITER $$

CREATE PROCEDURE IF NOT EXISTS DBUpdate()
BEGIN

IF (SELECT id FROM versions) = 1 THEN
  CREATE TABLE IF NOT EXISTS new_feature_table(
     id INT PRIMARY KEY AUTO-INCREMENT,
     blah VARCHAR(128) ...,
  );

IF (SELECT id FROM versions) = 2 THEN
  CREATE TABLE IF NOT EXISTS newer_feature_table(
     id INT PRIMARY KEY AUTO-INCREMENT,
     blah VARCHAR(128) ...,
  );

END$$

DELIMITER ;

CALL PROCEDURE DBUpdate(); 
```

然后，您编写一个 python 脚本来检查存储库的更新，连接到数据库，并通过此过程运行对模式的任何更改。这很好，因为您只需要一个`versions`具有适当 id 值的表来构建整个数据库（即没有数据；请参阅[ryan1234](https://stackoverflow.com/a/14364804/881224)关于数据备份的答案）。

# asp.net-mvc - 一个字段拒绝使用 EF 更新

> ID：14364219
> 
> 赞同：0
> 
> 时间：2013-01-16T17:29:37.707
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我有一个不寻常的问题。数据库中的一个字段 (FK_ItemType) 不会自行更新。我进入了 vs 调试，并检查了 int ItemType 是否已分配，它是否在数据库中找到了一条记录，它是否将该记录分配给 item.FK_ItemType，并且该记录一直保持连接`db.SaveChanges()`（我使用了一个断点检查 item.FK_ItemType 的值`db.Entry(item).State = EntityState.Modified;`

为了更加确定，在我注释掉我的重定向并从数据库中提取记录并检查值是什么之后，立即返回它而不是重定向。它返回正确的值。

但是，当我查看数据库或转到我的列表页面时，新更新的 ItemType 不存在（在数据库中仍然为 NULL）。更令人费解的是，添加记录时一切正常。

这是我的控制器和模型的相关部分

```
 [HttpPost]
    public ActionResult Edit(Item item, int Company = 0, int Service = 0, int ItemType = 0)
    {
        if (Request.Form["doDelete"] == "true")
            return Delete(item);
        //Get, assign foreign keys
        Company c = db.Companies.Find(Company);
        Service s = db.Services.Find(Service);
        ItemType i = db.ItemTypes.Find(ItemType);
        if (c != null)
            item.FK_Company = c;
        if (s != null)
            item.FK_Service = s;
        if (i != null)
            item.FK_ItemType = i;
        //Force revalidate
        ModelState.Clear();
        //TryUpdateModel(item);
        TryValidateModel(item);

        if (ModelState.IsValid)
        {
            if (item.ItemID == 0) //add
                db.Items.Add(item);
            else
            {
                db.Entry(item).State = EntityState.Modified;
            }
            db.SaveChanges();
            Item i2 = db.Items.Find(item.ItemID);
            Response.Write(i2.FK_ItemType.Name);
            return null;
            // Return to the listing page, and show the user the filters they were looking at before editing.
            return Redirect("~/" + Request.RequestContext.RouteData.Values["Controller"].ToString() + "/Index/" + Request.Form["ref"]);
        }
        // There was a validation error
        if (item.ItemID != 0)
            return Update(item);
        else
            return Add(item);
    } 
```

模型

```
public class Item
{
    public int ItemID { get; set; }

    ...

    [Required]
    [Display(Name="Company")]
    public virtual Company FK_Company { get; set; }
    [Required]
    [Display(Name="Service")]
    public virtual Service FK_Service { get; set; }
    [Display(Name="Item Type")]
    public virtual ItemType FK_ItemType { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:49:02.463

尽管名称如此，但`FK_ItemType`该属性不是 FK（外键）属性。它是一个导航属性，当您将状态设置为 时，导航属性表示的关系不会更新`Modified`。（同样适用于`FK_Company`和`FK_Service`。）

您可以引入“真实”外键属性...

```
[ForeignKey("FK_ItemType")]
public int RealFK_ItemType { get; set; }
public virtual ItemType FK_ItemType { get; set; }

// please give those properties better names..., like "ItemTypeID" and "ItemType" 
```

...然后`RealFK_ItemType`直接使用 FK 来改变关系。

`Item`或者您必须先从数据库中加载原始数据（包括相关实体）才能通过设置导航属性来更改关系。UPDATE 的代码是这样的：

```
var itemIdDb = db.Items
    .Include(i => i.Company)
    .Include(i => i.Service)
    .Include(i => i.ItemType)
    .Single(i => i.ItemID == item.ItemID);

Company c = db.Companies.Find(Company);
Service s = db.Services.Find(Service);
ItemType i = db.ItemTypes.Find(ItemType);
if (c != null)
    itemInDb.FK_Company = c;
if (s != null)
    itemInDb.FK_Service = s;
if (i != null)
    itemInDb.FK_ItemType = i;

db.Entry(itemInDb).CurrentValues.SetValues(item);
db.SaveChanges(); 
```

# php - 回显到php中的文本框

> ID：14364220
> 
> 赞同：0
> 
> 时间：2013-01-16T17:29:40.643
> 
> 标签：php

我正在尝试做一些简单的事情来学习如何进行查询，然后将答案放入框中。我有一个看起来像这样的 HTML 文件：

```
<html>
<head>
<title>Test</title>
</head>
<body>
<form action="results.php" method="post">Search: <input name="term" type="text" /><br />    
<input name="submit" value="Submit" type="submit" />
<p>Answer: <input name="answer" type="text" /></p>
</form>
</body>
</html> 
```

php代码是：

```
<?php
$hostname = 'host.com';
$username = 'ratetable';
$password = 'mypassword';
$term = (int) $_GET['term'];

try 
{
   $db = new PDO("mysql:host=$hostname;dbname=ratetable", $username, $password);
   //echo 'Connected to database<br />';

   foreach($db->query('SELECT * FROM rates WHERE mileage<= ' . $term . ' ORDER BY mileage DESC LIMIT 1') as $row) {
       echo "<input type='text' name='answer' value='" . $row['ratepermile'] . "'>";
   }
}         
catch (PDOException $e) {
       echo $e->getMessage();
       throw($e);
   }
?> 
```

所以我试图将ratepermile（数据库中的一个字段）放入“答案”文本框中。我得到的是屏幕清除，但没有表单也没有结果，即使在我注释掉“连接到数据库”回显行并使用我知道数据库中存在的东西之后。

如何将表单保留在屏幕上并回显到文本框？

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:33:11.647

您的表单正在`POST`输入数据 ( `method="post"`)，但您的 PHP 脚本正在查找`$_GET`数据。

您需要从中获取数据`$_POST`。

```
$term = (int) $_POST['term']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:13:13.693

您可以使用 $_REQUEST 来避免这些混淆。无论你使用method="post" 还是method="get"，都可以通过这个获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:36:56.317

以及上面的 POST 问题。如果您希望将表单保留在页面上并且不重新加载您需要查看[AJAX](http://www.w3schools.com/ajax/default.asp "AJAX")的页面。

# c++ - 在 Unix 终端中打开程序时，有没有办法让程序名称和它的输入在同一行？

> ID：14364223
> 
> 赞同：1
> 
> 时间：2013-01-16T17:29:53.730
> 
> 标签：c++, unix, terminal

我有一个接受三个输入的 C++ 程序：宽度整数、高度整数和文件名。现在，我像这样编译并运行程序（假设我将其命名为 prog）：

```
>prog
// hit enter
>128 128 output.ppm 
```

这会导致输出成功，但程序描述说正确的命令行语法是：

```
>prog w h filename 
```

这就是它所说的。这是否意味着我的程序应该能够在同一行启动？也许它隐含地意味着您在输入程序名称后按回车键，但如果没有，有没有办法真正做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:31:44.227

您的程序需要解析命令行参数。查看规范，预期的工作流程是

```
>prog 128 128 output.ppm
//hit enter after the parameters 
```

看[这里](https://stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean)了解更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T17:38:31.860

您正在错误地解决问题。`std::cin`在您的程序启动后，您正在接受您的输入。您的程序规范声明输入应该*作为命令的一部分*给出。考虑一个类似的命令`ls -l`- 它`-l`是命令的一部分，并被传递给程序以进行解析和操作。

您需要允许`prog 128 128 output.ppm`运行类似的命令，以便用户键入该命令，然后按 Enter 键运行程序。如何访问 C++ 程序中的命令行参数？嗯，这就是函数的`argc`和`argv`参数的`main`用途。您的主要功能应如下所示：

```
int main(int argc, char* argv[]) { ... } 
```

The `argc` argument gives you the number of arguments passed in the command line (it will be 4, in the example given) which is also the size of the `argv` array. Each element is an argument from the command. For example, `argv[0]` will be `"prog"`, `argv[1]` will be `"128"`, and so on. You need to parse these values and, depending on their values, change the functionality of your program.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T17:37:17.500

您可以通过主函数中的参数传递命令：

```
int main(int argc, char *argv[]) {
} 
```

`argc`是参数的数量并且`argv`是参数的数组。

# ios - iOS 警告 GLES-Render 和其他

> ID：14364225
> 
> 赞同：2
> 
> 时间：2013-01-16T17:29:58.063
> 
> 标签：ios, cocos2d-iphone

我在 GLES-Render 中收到 8 个警告，所有警告都是一样的：

`setUniformForModelViewProjectionMatrix`已弃用。

正是在这里：

```
[mShaderProgram setUniformForModelViewProjectionMatrix]; 
```

其他警告是：

这个函数内部：

```
-(void) incrementOffset:(CGPoint)offset forChild:(CCNode*)node
{
    for( unsigned int i=0;i < parallaxArray_->num;i++) {
        CGPointObject *point = parallaxArray_->arr[i];
        if( [[point child] isEqual:node] ) {
            [point setOffset:ccpAdd([point offset], offset)];
            break;
        }
    }
} 
```

警告是：`Instance method '-child- not found (return type defaults to 'id')`

同样在库中：XMLSupport，在`GDataXMLNode`我得到这个警告格式指定类型'id'但参数有类型`'const xmlChar *'`（又名'const unsigned char *'）

在这一行：

```
NSCAssert1(result == 0, @"GDataXMLNode XPath namespace %@ issue", prefix); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-07T00:11:21.440

根据@conciliator 的评论（以及关于 CCGLProgram.h 中弃用的评论），`setUniformForModelViewProjectionMatrix`现在是`setUniformsForBuiltins`

关于“未找到子实例方法”——CGPointObject 似乎不是公共接口（它在 CCParallaxNode.m 中声明和定义）。

# asp.net - MVC 4 Html.Editor 忽略 EditorTemplate

> ID：14364226
> 
> 赞同：0
> 
> 时间：2013-01-16T17:30:01.013
> 
> 标签：asp.net, razor, asp.net-mvc-4, mvc-editor-templates

我正在尝试实现一些自定义 EditorTemplates，但它们仅由我的 Create 视图呈现，而不是 Edit 视图。

**模型**

```
public class Page {
    public int PageID { get; set; }
    [DataType(DataType.Html)]
    [AllowHtml]
    // I tried including [UIHint("Html")] but this made no difference
    public string Content { get; set; }
    ...
} 
```

**/Views/Shared/EditorTemplates/Html.cshtml**

```
@model string
@Html.TextArea("", Model, new { @class = "html"}) 
```

**/Views/Shared/EditorTemplates/Object.cshtml**

```
@if (ViewData.TemplateInfo.TemplateDepth > 1)
{
    @ViewData.ModelMetadata.SimpleDisplayText

} else {

    @Html.ValidationSummary(false)

    foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForEdit
                         && !ViewData.TemplateInfo.Visited(pm)))
    {
        if (prop.HideSurroundingHtml) {
            @Html.Editor(prop.PropertyName)
            @prop.DataTypeName
        } else {
            <div class="form-field">
                @if (!String.IsNullOrEmpty(Html.Label(prop.PropertyName).ToHtmlString())) {
                    @Html.Label(prop.PropertyName)
                }
                @Html.Editor(prop.PropertyName)
            </div>
        }
    }
} 
```

**/Views/Page/Create.cshtml**（正确呈现`Html.cshtml`）

```
@model MvcDisplayTemplates.Models.Page

@using (Html.BeginForm()) {
    @Html.EditorForModel(Model)
    <p><input type="submit" value="Create" /></p>
} 
```

**/Views/Page/Edit.cshtml**（这只是呈现默认的单行文本编辑器）

```
@model MvcDisplayTemplates.Models.Page

@using (Html.BeginForm()) {
    @Html.EditorForModel(Model)
    <p><input type="submit" value="Save" /></p>
} 
```

有趣的是，如果我使用`EditorFor`on `Edit.cshtml`then`Html.cshtml`实际上是渲染的。例如

```
@Html.EditorFor(model => model.Content) 
```

**更新：**如果我删除`object.cshtml`then`Html.cshtml`也会正确呈现。所以这似乎是一个问题`Object.cshtml`。它在一个视图上工作但在另一个视图上工作似乎很奇怪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:02:39.400

我通过显式设置模板来修复`Object.cshtml`

```
@Html.Editor(prop.PropertyName, prop.TemplateHint ?? prop.DataTypeName) 
```

仍然不清楚为什么它以前在一种视图中有效，但在另一种视图中无效。

# licensing - 用于数据的 GNU GPL？

> ID：14364231
> 
> 赞同：8
> 
> 时间：2013-01-16T17:30:28.983
> 
> 标签：licensing, gpl

GNU 通用公共许可证 (GPL) 用于软件，而 GNU 自由文档许可证 (FDL) 用于文档——是否有类似 GNU 的数据许可证？具体来说，我想要一个许可，它允许与 GPL 软件具有相同类型的权限（例如，再分发、访问），但对数据而言。

GPL：[http ://www.gnu.org/copyleft/gpl.html](http://www.gnu.org/copyleft/gpl.html)

FDL：[http ://www.gnu.org/copyleft/fdl.html](http://www.gnu.org/copyleft/fdl.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T17:57:29.353

检查[Open Data Commons](http://opendatacommons.org/)以获取许可数据，特别是检查[Open Database License](http://opendatacommons.org/licenses/odbl/summary/)。您可能还想检查[OpenStreeMap 如何以及为何从 CC 移动到 ODBL](http://wiki.openstreetmap.org/wiki/Open_Database_License)。

# c - 在同一个内存块 C 中加载数千个文件

> ID：14364234
> 
> 赞同：0
> 
> 时间：2013-01-16T17:30:34.123
> 
> 标签：c

盒子：Linux，gcc。

问题 ：

通过递归扫描该文件夹，找出包含数千个项目的主文件夹的文件签名。

到目前为止完成：

使用`mmap()`系统调用加载每个文件的前 1k 字节并检查文件幻数。该方法的缺点是，对于遇到的每个文件，我都必须进行两次系统调用（例如`mmap()`and `munmap()`）。

如果可能的话，最好的解决方案：

我想分配一块内存，将每个文件（连续）加载到这个唯一的缓冲区中，并在处理完成后释放它，这意味着对于扫描的每个文件夹，我只会使用两个系统调用。

我不知道使用哪个系统调用来实现这一点，即使这个解决方案是现实的！

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:57:38.500

在您知道这还不够之前，不要担心性能。您的时间比程序运行时间的收益更有价值（极少数情况除外）。当性能不够时，在深入研究之前进行*测量*。有许多关于“性能优化”的战争故事完全是浪费（如果不是积极有害的话）。

# c# - ASP.NET C# 中的 PHP $_POST 模拟

> ID：14364235
> 
> 赞同：0
> 
> 时间：2013-01-16T17:30:40.217
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

> **可能重复：**
> [在 ASP.net 中获取 POST 变量](https://stackoverflow.com/questions/2162495/getting-a-post-variable-in-asp-net)

我只想打印所有发布的变量及其值。

`Request.Form`只给我没有值的名称，并`Request.InputStream`给我“*此流不支持超时。* ”错误。

我怎样才能像`$_POST`in一样获得所有发布的值`PHP`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T17:33:39.803

[`Request.Form`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)是一个`NameValueCollection`，您可以像这样访问发布的数据：

```
string postedName = Request.Form["name"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:32:54.647

只需使用`Request`，就像这样：

```
var tmp = Request["formfield"]; // gets the value of 'formfield' from the request 
```

但是，与 PHP 不同，请记住该`Request`变量将包含 GET 和 POST 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:56:32.247

如果要查看所有表单键值对进行调试，可以执行以下操作：

```
var dict = new Dictionary<string, string>();
foreach (string key in Form.Keys)
    dict.Add(key, Form[key]); 
```

然后在循环后设置断点并检查字典。

# matlab - 在imagesc之后获取矩阵？

> ID：14364239
> 
> 赞同：2
> 
> 时间：2013-01-16T17:30:56.190
> 
> 标签：matlab

> **可能重复：**
> [imagesc 绘制到 matlab 中的矩阵 将矩阵](https://stackoverflow.com/questions/14111371/imagesc-plot-to-matrix-in-matlab)
> [缩放到新范围](https://stackoverflow.com/questions/14363723/scale-matrix-to-a-new-range)

我有：

```
I = imread('image.tif'); 
```

此时，我可以通过执行 I(100,100) 轻松打印带有线 100,100 的像素
现在我缩放到图像以适应范围`0.5...0.9`

```
imagesc(I,[0.5 0.9]);
colormap('gray'); 
```

有没有办法得到新的矩阵 I ？（像素值从 0.5 到 0.9）

如果我做

```
I  = imagesc(I,[0.5 0.9]); 
```

我只得到图像对象的处理程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:41:40.277

您可以通过以下方式从图像图中获取图像数据：

```
A = rand(100,100);
I = imagesc(A, [.5 .9]);
B = get(I, 'CData'); 
```

根据您之前的问题进行预测：将[矩阵缩放到一个新的范围](https://stackoverflow.com/questions/14363723/scale-matrix-to-a-new-range)，我希望这`B`不是您想要的。实际上`B`将与`A`. 这可以通过以下方式验证：

```
all(all(A==B)) 
```

的第二个参数`imagesc`不缩放提供的矩阵中的值，而是缩放颜色图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:43:59.380

试试`getimage` [命令](http://www.mathworks.com/help/images/ref/getimage.html)：

```
A = rand(100,100);
I = imagesc(A, [.5 .9]);
B = getimage(gca); 
```

# java - Java OpenGL Texture2d 非法参数异常

> ID：14364243
> 
> 赞同：1
> 
> 时间：2013-01-16T17:31:05.927
> 
> 标签：java, opengl, illegalargumentexception

我正在做一些简单的 3d opengl 工作，只是试图加载 2d 纹理以显示在某些墙壁上。到目前为止，我正确加载了纹理（我认为），将其放入 ByteBuffer，然后尝试将其放入 opengl。我不断收到非法参数异常，我不明白为什么。这是控制台中打印的内容：

```
Exception in thread "main" java.lang.IllegalArgumentException: Number of remaining buffer elements is 0, must be at least 676\. Because at most 676 elements can be returned, a buffer with at least 676 elements is required, regardless of actual returned element count
at org.lwjgl.BufferChecks.throwBufferSizeException(BufferChecks.java:162)
at org.lwjgl.BufferChecks.checkBufferSize(BufferChecks.java:189)
at org.lwjgl.BufferChecks.checkBuffer(BufferChecks.java:230)
at org.lwjgl.opengl.GL11.glTexImage2D(GL11.java:2811)
at RPG.Main.setUpGraphics(Main.java:156)
at RPG.Main.main(Main.java:462) 
```

这是我试图加载文件的代码：

```
floorTexture = glGenTextures();
FileInputStream in = null;
try {
    in = new FileInputStream(new File("res/textures/floor.png"));
    byte[] data = new byte[in.available()];
    boolean next = true;
    byte nextByte;
    int i = 0;
    while(next) {
        nextByte = (byte) in.read();
        if(nextByte != 0) {
            data[i] = nextByte;
            i++;
        }
        else {
            next = false;
        }
    }
    ByteBuffer buffer = ByteBuffer.wrap(data);
    buffer.flip();
    glBindTexture(GL_TEXTURE_2D, floorTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (int)Math.sqrt(buffer.capacity()),    (int)Math.sqrt(buffer.capacity()), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    glBindTexture(GL_TEXTURE_2D, 0);
}
catch (FileNotFoundException e) {
    close(true, e);
}
catch (IOException e) {
    close(true, e);
}
finally {
    if (in != null) {
        try {
            in.close();
        }
        catch (IOException e) {
            close(true, e);
        }
    }
} 
```

发生了什么事，我做错了什么？

编辑：好的，所以我修复了它，使其没有任何错误，但是它不显示纹理文件中的内容。这是新代码：

```
int texture = glGenTextures();

    BufferedImage bufferedImage = ImageIO.read(new File(imageLocation));

    ColorModel glAlphaColorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB), new int[] { 8, 8, 8, 8 }, true, false, Transparency.TRANSLUCENT, DataBuffer.TYPE_BYTE);
    WritableRaster raster = Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE, bufferedImage.getWidth(), bufferedImage.getHeight(), 4, null);
    BufferedImage texImage = new BufferedImage(glAlphaColorModel, raster, true, new Hashtable());

    // copy the source image into the produced image
    Graphics g = texImage.getGraphics();
    g.setColor(new Color(0f, 0f, 0f, 0f));
    g.fillRect(0, 0, 256, 256);
    g.drawImage(bufferedImage, 0, 0, null);

    // build a byte buffer from the temporary image
    // that be used by OpenGL to produce a texture.
    byte[] data = ((DataBufferByte) texImage.getRaster().getDataBuffer())
            .getData();

    ByteBuffer imageBuffer = ByteBuffer.allocateDirect(data.length);
    imageBuffer.order(ByteOrder.nativeOrder());
    imageBuffer.put(data, 0, data.length);
    imageBuffer.flip();

    glBindTexture(GL_TEXTURE_2D, texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, bufferedImage.getWidth(), bufferedImage.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, imageBuffer);
    glBindTexture(GL_TEXTURE_2D, 0); 
```

图片是16位的。当程序运行时，它只显示一种纯色，即图片大部分的颜色，但不显示图片的任何特征。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:47:39.167

这里有几个可能的问题。

首先，您正在加载看起来像 PNG 文件的文件，但您只是将所有字节加载到缓冲区中，而不是实际解析图像格式。充其量你会有一个标题妨碍像素，最坏的情况是它会被压缩并且看起来不像你期望的那样。

其次，然后通过取字节数的平方根来计算图像的尺寸，如果它是一个每像素一个字节的方形纹理，这可能是接近的，但通常只是错误的。

然后你告诉 GL 将该纹理加载为 32 位纹理，此时它会期望每个像素有 4 个字节，这比你给它的要多得多，因为你计算出的尺寸就像它是字节。

您确实需要使用可以理解 PNG 文件的内容加载该图像，然后从中获取图像格式、尺寸等。

# jboss - 如果 -ds.xml 中没有设置最大池连接，最大池连接大小是多少？

> ID：14364247
> 
> 赞同：0
> 
> 时间：2013-01-16T17:31:16.237
> 
> 标签：jboss

有谁知道 -ds.xml 文件中最大池大小的默认值是多少？正如您在下面看到的，我们只有最小值设置为 0，没有最大值。我担心配置这个的供应商认为没有最大条目意味着无限。我想知道是否没有条目采用 Jboss 分配的默认值。我不确定那个值是什么。

我担心的原因是因为我收到了这个错误：

Njavax.transaction.TransactionRolledbackException：获取连接时出错：org.jboss.util.NestedSQLException：在配置的阻塞超时（30000 [ms]）内没有可用的ManagedConnections；- 嵌套的 throwable：（javax.resource.ResourceException：在配置的阻塞超时（30000 [ms]）内没有可用的 ManagedConnections）；

我的 -ds.xml 文件

```
datasources>
<local-tx-datasource>
<jndi-name>SabaSite</jndi-name>
<connection-url>saba:jdbc:JSQLConnect://********/database=######/asciiStringParameters=false</connection-url>
<driver-class>com.saba.mssql.SabaJNETMSSQLDatabaseDriver</driver-class>
<min-pool-size>0</min-pool-size>
<exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
</local-tx-datasource>
</datasources> 
```

谢谢，

贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:27:53.040

[您可以在JMX Console](https://community.jboss.org/wiki/JMXConsole)的帮助下自己检查实际的数据源属性。

请参阅[如何检查 JBoss 中的数据源？](https://stackoverflow.com/questions/5212284/how-to-check-datasource-in-jboss)

# c - Linux 共享内存同步

> ID：14364253
> 
> 赞同：9
> 
> 时间：2013-01-16T17:31:30.237
> 
> 标签：c, linux, posix, shared-memory, performance

我已经实现了两个使用 POSIX 共享内存 API（即`shm_open`）共享数据的应用程序。一个进程更新存储在共享内存段中的数据，另一个进程读取它。我想使用某种互斥锁或信号量来同步对共享内存区域的访问。最有效的方法是什么？我正在考虑的一些机制是

*   存储在共享内存段中的 POSIX 互斥锁（需要设置 PTHREAD_PROCESS_SHARED 属性）
*   使用创建 System V 信号量`semget`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:44:02.873

而不是 System V 信号量，我会使用一个名为 POSIX 的信号量 using`sem_open()`等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:57:29.643

不妨把这个作为答案。

您可以使用带true 的[sem_init](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_init.html)`pshared`在共享内存空间中创建 POSIX 信号量。我过去成功地使用过它。

至于这比共享互斥锁和条件变量快还是慢，只有分析才能告诉你。在 Linux 上，我怀疑它们都非常相似，因为它们依赖于“futex”机器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:49:18.523

如果效率很重要，我会使用进程共享的互斥锁和条件变量。

AFAIR，每个带有信号量的操作都需要一个系统调用，所以无争用互斥量应该比以类似互斥量的方式使用的信号量 [ab] 更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:00:18.103

首先，真正进行基准测试以了解性能是否重要。这些东西的成本往往被高估。因此，如果您没有发现对控制结构的访问与写入的数量级相同，则只需采用语义上最适合您的用例的任何构造。如果每次访问控制结构需要写入大约 100 个字节，通常就是这种情况。

否则，如果控制结构是瓶颈，您或许应该避免使用它们。C11 具有新的`_Atomic`类型和操作概念，可用于在访问数据时存在竞争的情况。C11 尚未广泛实现，但可能所有现代编译器都已经具有实现这些功能的扩展。

# jquery - 调用ajax并将href值传递给php脚本

> ID：14364254
> 
> 赞同：0
> 
> 时间：2013-01-16T17:31:31.297
> 
> 标签：jquery, html

根据链接名称我想处理数据并在经过php脚本处理后检索一个值。一切正常，除了我相信只要我可以用 chrome 检查 ajax 功能就不会被取消。

我可以做这样的事情：

HTML

```
<a href="test0" class="link">click 0</a>
<a href="test1" class="link">click 1</a> 
```

JS脚本：

```
$(".link").live('click', function(){
       $.ajax({
            type: 'POST',
            url: '/ajax/file.php',
            data: {
                link : $(this).attr('href'),
            },error: function(xhr, error){
                console.debug(xhr); console.debug(error);
            },success: function(data){
                alert(data);
            }
        });
}); 
```

![开发工具截图](../Images/4d9eaaad6d3e97843c0414631dcd9b37.png)

非常感谢。

更新：

我这样做的原因是为了根据用户的选择从网络服务器获取数据（文件），但我意识到这不能用这种技术来实现。最好的方法是使用`<a href="/download.php?file=myfile&token=asdasdlkjsd" page="_blank">file</a>`

然后从服务器端，我们必须使用标题和正确的 mime 类型。

如果可以通过 ajax 传输文件并让用户决定是否打开、保存或关闭它，那么我想知道如何:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:36:02.353

`live()`已弃用，请使用`on()`. `event.preventDefault()`另外，您需要在事件处理程序中防止默认浏览器行为[即跟随 href] 。

```
$(document).on('click', '.link', function(event){

  event.preventDefault();

     $.ajax({
          type: 'POST',
          url: '/ajax/file.php',
          data: {
              link : $(this).attr('href'),
          },
          success: function(data){
              alert(data);
          }
      });

}); 
```

编辑：原谅我，固定。

# bash - 如果未设置 sertain 参数，如何在 bash 中检查 args 并执行某些命令？

> ID：14364257
> 
> 赞同：0
> 
> 时间：2013-01-16T17:31:41.913
> 
> 标签：bash

我知道如何为 bash 中的参数提供默认值，或者如果未设置，如何以错误消息退出。（从[这里](http://linuxgazette.net/18/bash.html)）

我想检查是否设置了参数，如果没有设置，则执行一些代码并退出。

```
if [$1 is not set]; then
  execute command
fi 
```

我正在为另一个命令编写一个包装器。如果没有设置第一个参数（它实际上是一个输入文件名），它有它自己的使用信息。它还有我现在正在硬编码的其他输入。bash 脚本中的实际命令类似于：

```
command $1 12 3124 534 
```

如果没有 $1 发送到脚本，我想调用它自己的帮助消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:35:19.407

只需检查参数的长度：

```
if (( $# < 1 )); then
    echo 'There are no arguments, so you can bet that $1 was not set.'
fi 
```

检查变量在 shell 中是否具有非空值通常很简单：

```
[ -n "$val" ] 
```

但是，如果您想确定一个名称是否已被*声明*，我会向您[推荐 BashFAQ 83](http://mywiki.wooledge.org/BashFAQ/083)

# elasticsearch - 我应该使用嵌套对象还是普通字段？

> ID：14364262
> 
> 赞同：1
> 
> 时间：2013-01-16T17:32:01.387
> 
> 标签：elasticsearch

我一直在逐步使用 Elasticsearch，在研究一个单独的问题时，我遇到了[这个问题。](https://stackoverflow.com/questions/8140651/how-to-search-nested-objects-with-elastic-search)在这里，swatkins 询问有关查询嵌套对象的问题，一位响应者指出，鉴于他的模型，嵌套对象不是必需的。我在这里复制了模型，并进行了一些更改以反映我的特定问题：

```
[{
    id:4635,
    description:"This is a test description",
    author:"John",
    author_id:51421,
    meta: {
        title:"This is a test title for a video",
        description:"This is my video description",
        url:"/url_of_video"
        awesomeness-level: "pretty-awesome"
        kung-fu: true
    }
},
{
    id:4636,
    description:"This is a test description 2",
    author:"John",
    author_id:51421,
    meta: {
        title:"This is an example title for a video",
        description:"This is my video description2",
        url:"/url_of_video2"
        kung-fu:false
        monsters:true
        monsters-present: "Dracula, The Mummy"
    }
}] 
```

我们的应用程序允许用户定义自定义元数据，因此我们使用嵌套对象来表示该数据。乍一看，它看起来类似于 swatkins 的模型，所以我想也许我们不应该使用嵌套对象。

最大的区别是每个对象的元数据可能不同，请注意第二个视频有专门关于“怪物电影”的元数据，而第一个视频引用了一个“令人敬畏的级别”。那么，我应该使用嵌套对象，还是仅将元数据映射为普通字段？如果我们做后者，第一个视频会有空的元数据字段吗？这真的很重要吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:53:56.213

假设您的示例代表两个弹性搜索文档，看起来您不需要制作`meta`嵌套对象。当一个父对象有多个嵌套对象并且您的搜索涉及嵌套对象的多个字段时，使用嵌套对象是有意义的。例如，如果您有这样的记录：

```
{
  "name": "apple",
  "attributes": [
     {
       "color": "yellow",
       "size": "big"
     },
     {
       "color": "red",
       "size": "small"
     }
  ]
} 
```

并且您希望在搜索时找到此记录，`color:yellow AND shape:big`或者`color:red AND shape:small`不希望在搜索时返回它，制作嵌套对象`color:yellow AND shape:small`是有意义的。`attributes`它将允许您独立索引和搜索每个属性，然后获取匹配属性的父对象。

# javascript - 将前端的变量集拉到节点后端

> ID：14364263
> 
> 赞同：0
> 
> 时间：2013-01-16T17:32:01.080
> 
> 标签：javascript, node.js, express

我正在写一个评论部分，我的网络应用程序的前端有关于每个评论的线程级别的信息。我需要在提交评论时将此信息传递给后端，以便我可以组装所有线程和在节点中对它们进行排序，然后将它们传递回前端。

现在，信息作为变量存储在 script.js 文件中，尽管它也可以作为一个类添加到用户提交评论的表单中。这些方法之一是否被认为是更好的形式？

所以这是html中的评论回复表单，从jade转换后：

```
<form id="commentReply" class="sbBox jEgC97D 2" action="/comment" method="post" style="display: block;">
<h1>Post a Comment</h1>
<textarea name="comment" type="text" style="height: 349px;"></textarea>
<input type="submit" value="Post">
</form> 
```

class="sbBox jEgC97D 2" 是我想要的。我如何将它放入节点以便我可以处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:40:36.843

您有两个选择：

1.  作为表单帖子的一部分发送额外信息（线程级别）。
2.  启动另一个 ajax 请求以发送此信息。

选项 1 是有意义的，因为它会很有效 - 如果您将所有这些都存储在数据库中，那么它会很有效 - 1 次访问服务器，大概 1 次访问数据库。

选项 2 会产生非常昂贵且非常低效的做事方式。您进行 1 次服务器调用（您的 ajax 请求），然后再进行一次调用以更新数据库以获得适当的评论。

# sql - SQL - 满足两个条件时不显示行

> ID：14364265
> 
> 赞同：1
> 
> 时间：2013-01-16T17:32:08.390
> 
> 标签：sql, tsql, sql-server-2005

起初我以为我可以在`WHERE`查询的子句中使用 a `CASE`（见下文）来完成此操作，但我在获得所需的结果时遇到了一些麻烦。此查询用于获取数据库中客户的产品信息。如果某个客户订购了某个产品，我根本不需要返回行。问题是如果我删除该产品，那么任何其他拥有该产品的客户都会出现，因为任何客户都可以订购该产品。我很难做到这一点。

```
Select
   OrderNumber, Client, Product From Orders
WHERE
  Product not in(CASE WHEN client = 'client_a' and product = 'product_1' THEN Product   END) 
```

希望看到这样的结果，重点是为除 client_a 之外的所有客户端显示 product_1：

```
ordernumber client          product
123         client a    product 2
456         client b    product 1
789         client b    product 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:38:36.100

我认为您将非常简单的事情复杂化了，您不只是想要：

```
SELECT
   OrderNumber, Client, Product 
FROM Orders
WHERE Product != 'product_1' 
  AND client = 'client_a' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:39:20.997

这是因为工作方式`NOT IN`。如果列表中的任何值为 NULL，则它将不返回任何结果。例如

```
SELECT  [TestColumn] = 3
WHERE   3 NOT IN (1, 2, NULL) 
```

将不返回任何结果，而不是 3。

如果将示例扩展为等效的 OR 语句，您将看到原因：

```
WHERE   3 != 1
AND     3 != 2
AND     3 != NULL 
```

由于`3 != NULL`Evaluates 为 false，因为没有任何内容等于 NULL，因此该语句返回 false。

您可以通过 3 种方式完成所需的结果。

1）`ELSE`在您的案例陈述中使用以确保没有`NULL`结果

```
SELECT  OrderNumber, Client, Product
FROM    Orders
WHERE    Product not in(CASE WHEN client = 'client_a' and product = 'product_1' THEN Product ELSE '' END) 
```

2）更改`IN`为不等于，因为您的 case 语句无论如何只会返回 1 个值

```
SELECT  OrderNumber, Client, Product 
FROM    Orders
WHERE   Product != (CASE WHEN client = 'client_a' and product = 'product_1' THEN Product END) 
```

3）修改你的逻辑，这可以重写为

```
SELECT  OrderNumber, Client, Product 
FROM    Orders
WHERE   NOT (Product = 'product_1' AND Client = 'Client_a') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:37:23.057

尝试这个 ：

```
SELECT OrderNumber, Client, Product
FROM Orders
WHERE Client != 'client_a' 
OR Product != 'product_1'
; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T17:35:30.313

```
SELECT OrderNumber, Client, Product
FROM Orders
WHERE Client <> 'client_a' OR Product <> 'product_1' 
```

或者，在语义上等价，也许更容易理解为什么会这样：

```
SELECT OrderNumber, Client, Product
FROM Orders
WHERE NOT (Client = 'client_a' AND Product = 'product_1') 
```

# performance - Sharepoint 2013 网络爬虫

> ID：14364267
> 
> 赞同：1
> 
> 时间：2013-01-16T17:32:12.607
> 
> 标签：performance, sharepoint, sharepoint-2010, web-crawler, sharepoint-2013

我的小组一直在使用 Sharepoint 2010 抓取大量外部网站。

Sharepoint 网络爬虫没有提供足够的可配置性，所以我们一直在使用 FAST 网络爬虫来运行我们的爬虫。

但是，在 Sharepoint 2013 中，FAST 网络爬虫似乎已被弃用/与 Sharepoint 网络爬虫合并。

我找不到有关如何配置 2013 Web Crawler 组件的重要文档。是不是比 2010 年的 Sharepoint 爬虫更厉害？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:22:43.480

[Microsoft TechNet on SP 2013 Crawler](http://technet.microsoft.com/en-us/library/ff607742.aspx)

# ios - UIButton 在 iOS 5 中不调用操作，但在 iOS 6 中有效

> ID：14364272
> 
> 赞同：20
> 
> 时间：2013-01-16T17:32:30.487
> 
> 标签：ios, ios5, ios6, uibutton, uicontrol

我有一个`UIButton`从 xib 文件加载的作为`IBOutlet`视图控制器的属性。`viewDidLoad`我在视图控制器的按钮上附加了一个选择器：

```
[_myButton addTarget:self action:@selector(mySelector) forControlEvents:UIControlEventTouchUpInside]; 
```

在 iOS 6 中一切正常，但是当我在 iOS 5.0 的模拟器上运行时，不会调用选择器。该按钮在被触摸时会突出显示。

另一件需要注意的事情是，该按钮位于添加了一个的`UIView`a 中`UITapGestureRecognizer`。当`UITapGestureRecognizer`点击按钮时，在 iOS 5.0 中会调用 for 此视图（在 iOS 6 中不会调用它，而是调用按钮的选择器）。

我没有运行 iOS 5 的设备，所以我没有在设备上进行测试，只是模拟器。

有谁知道这里发生了什么，以及如何解决？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T17:40:29.170

您已经很好地解释了问题的原因。在 iOS 5 上，按钮超级视图上的 UITapGestureRecognizer 会干扰按钮的操作。在 iOS 6 上，他们解决了这个问题：他们引入了一个 UIView 事件`gestureRecognizerShouldBegin:`，并且一个按钮会自动为附加到超级视图的点击手势识别器返回 NO。

对于 iOS 5，您需要在点击手势识别器上使用委托方法来阻止它识别点击的视图是否是按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:47:25.473

在我的例子中，当用户点击主视图上的任意位置时，我还使用通用`UITapGestureRecognizer`来关闭由文本字段打开的键盘。

我通过仅在键盘出现时添加手势识别器来解决此问题（请参阅

`- (void)keyboardWillShow:(NSNotification *)n`或者

`- (BOOL)textFieldShouldBeginEditing:(VDTextFieldWithError *)textField`)

然后在隐藏键盘时移除手势识别器（从而移除识别器本身的选择器方法中的选择器）

# razor - 重新加载错误时使用数据加载视图

> ID：14364274
> 
> 赞同：1
> 
> 时间：2013-01-16T17:32:43.617
> 
> 标签：razor, asp.net-mvc-4

我有一个加载产品数据的视图。当我按下“添加到购物篮”按钮时，我希望再次重新加载同一页面，但出现以下错误：

```
Object reference not set to an instance of an object. 
```

看法：

```
@model List<Ecommerce.Models.HomeModels.Product>

@foreach (Ecommerce.Models.HomeModels.Product product in Model)
{ // above error points here!!!!!!!!!!!
    using (Html.BeginForm())
    {                                               
        <input type="hidden" name="productId" value="@product.ID" />                    
        <input type="submit" value="Add to Basket"/> 
    }
} 
```

控制器：

```
public ActionResult BuyProducts()
        {

            List<Models.HomeModels.Product> products = new List<Models.HomeModels.Product>();

            using (var reader = command.ExecuteReader()) 
            {
                while (reader.Read())
                {
                   //Method to load data into products
                }
            }

            TempData["products"] = products; 

            return View(products);
        }

        [HttpPost]
        [AllowAnonymous]
        public ActionResult BuyProducts(string productID)
        {
            string id = productID;
            return View(TempData["products"]);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:35:49.560

`TempData`仅针对一个请求存在，因此在您尝试将其发回时它已经消失（这就是您收到错误的原因 -`TempData["products"]`是`null`）。无论哪种方式，您都应该使用 post redirect get 模式，如下所示：

```
[HttpPost]
[AllowAnonymous]
public ActionResult BuyProducts(string productID)
{
    string id = productID;
    return RedirectToAction("BuyProducts");
} 
```

主要原因是如果用户刷新页面并且你从post返回了一个视图，数据将被第二次发布导致重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:35:56.223

`TempData`不会跨请求持久化。您可以使用`Session`或`ViewData`保存`"products"`

尝试其中一种，看看是否能解决您的问题。

# javascript - JavaScript 颜色解析器

> ID：14364279
> 
> 赞同：0
> 
> 时间：2013-01-16T17:33:21.903
> 
> 标签：javascript, html, css, colors

我想知道如何在找到文本 ^1 时使用正则表达式创建一个跨度元素，然后将文本分组并将其包含在创建的跨度元素中

这个想法是你有一个聊天框，当有人提交这样的消息时：（没有任何意义）

" ^1你好 ^3怎么样.. "

将输出为“Hello there” <- 将显示为红色 “hows it goin..” <- 将显示为绿色

代码将是：

*   ^1 - 红色
*   ^2 - 黑色
*   ^3 - 绿色
*   ^4 - 黄色
*   ^5 - 蓝色
*   ^6 - 浅蓝色
*   ^7 - 紫色
*   ^8 - 深绿色
*   ^9 - 灰色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:12:00.827

是的，您可以使用正则表达式。例如：

```
\^(\d+)([^^]+) 
```

这匹配前面有一个插入符号的数字和它后面的任何内容，直到找到一个新的插入符号。

# asp.net - 尝试使用 MVC 4 自定义错误页面找出一个奇怪的行为。有时我的自定义错误页面在 404 上被绕过

> ID：14364281
> 
> 赞同：3
> 
> 时间：2013-01-16T17:33:30.303
> 
> 标签：asp.net, asp.net-mvc, iis, asp.net-mvc-4, iis-7.5

在大多数情况下，我的 404 错误自定义错误页面被正确调用。但是，一些 url 跳过我的自定义错误页面并调用 iis 404 错误页面。为什么会这样？

这是一个在 IIS 7.5 上运行的 MVC 4 项目

```
//This invokes my Custom 404 error page.
http://192.168.1.10/test1/test2/test3

//This bypasses my Custom 404 and invokes the iis 404 error page.
http://192.168.1.10/test1/test2/test3/test4

//Web.config
<system.web>
  <customErrors mode="On" defaultRedirect="Error">
    <error statusCode="404" redirect="Error404" />
  </customErrors>
...

//Route
routes.MapRoute(
    name: "Error404",
    url: "error404",
    defaults: new { controller = "Error", action = "Error404" }
);

//Error Controller
public ActionResult Error404()
{
    Response.StatusCode = 404;
    Response.TrySkipIisCustomErrors = true;

    return View();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:50:18.827

我也不确定为什么您的自定义错误有时似乎会绕过，但让我向您展示我在 MVC4 网站上所做的事情。

第一，我`RouteCollection`在 RouteConfig.cs 中创建了一个包罗万象的路由：

```
routes.MapRoute(
   name: "CatchAll",
   url: "{*catchall}",
   defaults: new { controller = "Error", action = "Index", statusCode = 404, error = new HttpException(404, "Route not found via RouteConfig.") }); 
```

第二，我创建了一个`Controller`名为`Error`. 唯一的工作是处理网站中抛出的异常：

```
public class ErrorController : Controller
    {
        public ActionResult Index(int statusCode, Exception error)
        {
            ErrorViewModel vm = new ErrorViewModel();
            vm.CurrentException = error;
            vm.InnerException = error.InnerException ?? null;
            vm.StatusCode = statusCode;

            Response.StatusCode = statusCode;
            Response.TrySkipIisCustomErrors = true;

            return View(vm);
        }
    } 
```

我正在使用 ErrorViewModel 来显示 HTML 源代码中的详细错误。

第三，在 中`Global.asax`，我重写了`Application_Error`捕获网站中每个异常的方法，并通过`Error`在步骤 1 中创建的控制器处理它们：

```
protected void Application_Error(object sender, EventArgs e)
        {
            Exception exception = Server.GetLastError();
            Server.ClearError();

            RouteData routeData = new RouteData();
            routeData.Values.Add("controller", "Error");
            routeData.Values.Add("action", "Index");
            routeData.Values.Add("error", exception);

            if (exception.GetType() == typeof(HttpException))
            {
                routeData.Values.Add("statusCode", ((HttpException)exception).GetHttpCode());
            }
            else
            {
                routeData.Values.Add("statusCode", 500);
            }

            IController controller = new ErrorController();
            controller.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
        } 
```

就是这样，我从 web.config 中删除了 CustomErrors 节点。这个答案的很大一部分是在这篇[博文中找到的](http://thirteendaysaweek.com/2012/09/25/custom-error-page-with-asp-net-mvc-4/)。

这

> Response.TrySkipIisCustomErrors = true;

是覆盖 IIS 404 页面的关键。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T18:38:47.733

所以我自己做了这个练习，这就是我所做的。

1.  安装了 Magical Unicorn Mvc Error Toolkit @ [http://nuget.org/packages/MagicalUnicorn.MvcErrorToolkit/](http://nuget.org/packages/MagicalUnicorn.MvcErrorToolkit/)（我用过 nuget）
2.  按照自述文件中的设置说明@ [https://github.com/PureKrome/WorldDomination.Web.Mvc.ErrorHandling](https://github.com/PureKrome/WorldDomination.Web.Mvc.ErrorHandling)
3.  您的（我们的）应用程序由于一个非常具体的原因而失败：**传入的请求与任何路由（包括“默认”路由）不匹配，并且由于错误而落入 IIS**。您需要做的是在“默认”路由下方的 RouteConfig.cs（对于 MVC4）的最底部添加以下路由：

    ```
     routes.MapRoute(
            name: "Catchall",
            url: "{*url}",
            defaults: new { controller = "Error", action = "404" }
        ); 
    ```

这样做的目的是防止执行返回错误并返回 IIS，并让您的应用程序有最后一次机会弹出 404。

一个示例 url：http: [//yoursite.com/some/fake/route](http://yoursite.com/some/fake/route)将按预期命中您的默认路由和 404（假设您没有带有接受参数 Route 的 Fake 操作的 Some 控制器）。

一旦您添加了一个 url 段，例如[http://yoursite.com/some/fake/route/die](http://yoursite.com/some/fake/route/die)，您需要全部捕获来处理它。

路由定义中的 * 允许您捕获输入的尽可能多的 url 段，而不必为每种可能的情况添加一个（这也是不可能的）。请记住，这是一般情况下的解决方案......您可能有其他路由（超过 3 个 url 段）并且可能需要稍微调整它（例如，这些路由声明需要在 RouteConfig.cs 中更高比包罗万象）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T08:07:09.813

这是项目源，可能对您有所帮助[https://github.com/13daysaweek/Mvc4CustomErrorPage](https://github.com/13daysaweek/Mvc4CustomErrorPage)

# java - 将泛型类注释为 JSF 托管 bean

> ID：14364285
> 
> 赞同：4
> 
> 时间：2013-01-16T17:33:46.310
> 
> 标签：java, jsf, generics

我遇到了以下类型的代码：

```
@ManagedBean
@SessionScoped
SomeClass<T> {
    ... blah-blah
} 
```

由于框架将其实例化为没有类型信息的通用**SomeClass**对象，您是否看到此类代码有任何好处？还是您会将其归类为代码异味？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:22:29.243

泛型是编译时语法糖（因此在运行时完全不存在）。JSF 在运行时实例化 bean（通过反射方式）。所以，是的，这绝对是代码异味。`SomeClass`仅当托管 bean 扩展自基类时才有意义（但它本身根本不是托管 bean）。

例如

```
public abstract class CrudBean<T extends SomeBaseEntity> {
    private List<T> entities;
    // ...
} 
```

和

```
@ManagedBean
public class ProductsBean extends CrudBean<Product> {
    // ...
} 
```

# javascript - 试图将结果四舍五入到小数点后 2 位

> ID：14364288
> 
> 赞同：0
> 
> 时间：2013-01-16T17:33:54.603
> 
> 标签：javascript, forms, decimal

> **可能重复：**
> [JavaScript：格式化数字正好有两位小数](https://stackoverflow.com/questions/1726630/javascript-formatting-number-with-exactly-two-decimals)
> [在javascript中四舍五入到小数点后两位](https://stackoverflow.com/questions/11832914/round-up-to-2-decimal-places-in-javascript)

```
<form name="shippingForm" method="post" action="">
<h2>Product Cost</h2>
<ul>
<li><input type="text" name="YourValue" id="YourValue" value=""/></li>
<li><label>VAT @ 17.5% +</label></li>
<li><input type="text" name="costShipping" id="costShipping" value=""/></li>
<li><label>Currency conversion rate: 1.98</label></li>
<li><div id="totalPrice"></div></li>
<li><input type="button" value="Calculate" name="calculate" id="calculate"/></li>
</ul>
</form> 
```

以上是表格。这样做是要求用户输入 2 个值，但第二个值是可选的。然后计算并显示结果。

```
<script type="text/javascript">
var button = document.getElementById('calculate');
button.onclick = function() {
var YourValue = parseInt(document.getElementById('YourValue').value);
var LocalTax = 17.5/100 * YourValue;
var costShipping = parseInt(document.getElementById('costShipping').value);
var convCurrency = 1.98;
var totalPrice = document.getElementById('totalPrice');

if (document.getElementById('costShipping').value === "") {
    totalPrice.innerHTML = "= $"+(YourValue + LocalTax + 0) * convCurrency;
}

else {
    totalPrice.innerHTML = "= $"+(YourValue + LocalTax + costShipping) * convCurrency;
}
};
</script> 
```

我想做的是将 totalPrice 结果四舍五入到小数点后两位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:35:46.600

不要重新发明轮子。

看看accounting.js：-

[http://josscrowcroft.github.com/accounting.js/](http://josscrowcroft.github.com/accounting.js/)

# javascript - 从 jQuery UI 选项卡内容访问 JavaScript 函数

> ID：14364289
> 
> 赞同：0
> 
> 时间：2013-01-16T17:33:56.240
> 
> 标签：javascript, jquery, jquery-ui

我在我的 Web 应用程序中使用 jQuery UI 选项卡，并且我正在通过 Ajax 动态加载每个选项卡的内容。这样，我可以将每个选项卡的内容保存在单独的 HTML 页面中：

```
<div id="tabs">
  <ul>
    <li><a href="ajax/content1.html">Tab 1</a></li>
    <li><a href="ajax/content2.html">Tab 2</a></li>
    <li><a href="ajax/content3.html">Tab 3</a></li>
    <li><a href="ajax/content4.html">Tab 4</a></li>
  </ul>
</div> 
```

用于实例化选项卡的 JavaScript 在我的 index.js 中，而 HTML 在 index.html 中。

现在，我想在 index.js 中创建一个 addTabs() 函数，可以从任何选项卡内容页面（content1.html、content2.html 等）调用该函数。

我怎样才能做到这一点？我尝试在 index.js 中创建函数并简单地使用`var id = addTab();`. 但是，这不起作用，因为我收到一个错误：“ *Uncaught ReferenceError: addTab is not defined* ”。这是功能：

```
function addTab(tabTitle) {
   // Add tab code          
   return id;
} 
```

我也尝试使用`$.getScript()`which 将调用该函数，但我无法访问函数`var id`外部返回的内容`$.getScript()`（我只能在函数内访问它）。

对于此事，我将不胜感激。

* * *

这是 index.js 文件：

```
$(document).ready(

function () {

    var tabs = $("#tabs").tabs();

    tabs.tabs('option', 'selected', 2);

    var tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>";
    var tabCounter = 4;

    function addTab(tabTitle) {

        var label = tabTitle;
        var id = "tabs-" + tabCounter;
        var li = $(tabTemplate.replace(/#\{href\}/g, "#" + id).replace(/#\{label\}/g, label));

        // 3 fixed tabs + 5 dynamic tabs
        if (tabCounter > 8) {
            $("#dialog").html(
                    'You have reached the maximum number of tabs allowed.').dialog(
                    "open");
            return -1;
        }

        $("#tabId").replaceWith(
                '<input type="hidden" name="tabId" id="tabId" value="' + id
                        + '" />');

        tabs.find(".ui-tabs-nav").append(li);
        tabs.append("<div id='" + id + "'></div>");

        tabs.tabs("refresh");
        tabCounter++;

        return id;
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:43:47.900

addTab 函数应该在 document.ready 之外，以便其他文件可以访问它

# actionscript-3 - AS3 Video & NetStream : MP4 视频不显示 appendBytes

> ID：14364290
> 
> 赞同：1
> 
> 时间：2013-01-16T17:34:03.157
> 
> 标签：actionscript-3, video, mp4

我正在尝试使用 NetStream 和 netStream.appendBytes 方法在 Air 应用程序的 Video 组件中流式传输一些 MP4 视频。源视频来自一个套接字，所以我需要附加字节，但它不起作用。所以我尝试从系统读取的文件中追加字节，它仍然可以正常工作。我尝试将该文件作为 VideoPlayer 元素的源，它确实有效。

然后我尝试了 appendBytes 方法从系统中打开一个 flv 文件，它确实有效，所以我知道我在我的过程中没有做错什么。当我使用 appendBytes 方法时，VideoPlayer 做了什么我不做的，这会让它像我想要的那样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:37:56.597

[您不能使用 appendBytes 和 mp4 容器](http://forums.adobe.com/message/4008099)。AppendBytes 仅适用于 FLV 帧。

# java - JPanel 渐变背景

> ID：14364291
> 
> 赞同：10
> 
> 时间：2013-01-16T17:34:05.213
> 
> 标签：java, swing, awt, jpanel, gradient

我用谷歌搜索，但找不到正确的答案。我有一个`JPanel`，我希望它有一个从上到下的渐变。我只会使用两种颜色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T17:44:43.713

干得好：

```
import java.awt.Color;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestPanel extends JPanel {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        int w = getWidth(), h = getHeight();
        Color color1 = Color.RED;
        Color color2 = Color.GREEN;
        GradientPaint gp = new GradientPaint(0, 0, color1, w, h, color2);
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                TestPanel panel = new TestPanel();
                frame.add(panel);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T17:42:15.543

你可以使用这个：

```
JPanel contentPane = new JPanel() {
        @Override
        protected void paintComponent(Graphics grphcs) {
            super.paintComponent(grphcs);
            Graphics2D g2d = (Graphics2D) grphcs;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON);
            GradientPaint gp = new GradientPaint(0, 0,
                    getBackground().brighter().brighter(), 0, getHeight(),
                    getBackground().darker().darker());
            g2d.setPaint(gp);
            g2d.fillRect(0, 0, getWidth(), getHeight()); 

        }

    }; 
```

希望有所帮助；您还可以返回此文章获取更多帮助： [任何 jcomponent 的渐变背景](http://www.javarichclient.com/how-to-add-a-gradient-background-to-any-jcomponent/)

# coldfusion - ColdFusion 在 cffunction 中有多个 cfqueries

> ID：14364292
> 
> 赞同：0
> 
> 时间：2013-01-16T17:34:16.567
> 
> 标签：coldfusion

我正在尝试为一项调查编写一个函数，从数据库中提取问题。问题是既有活跃的问题也有不活跃的问题。当有人查看旧调查的结果时，我需要显示较旧的问题。

这是我在 CFC 中尝试的代码：

```
<cffunction name="getAllQuestions" access="public" returntype="query">
    <cfargument name="survey" default=0>
    <cfif len(#survey#) gt 0>
    <cfquery name="getsdate" datasource="blah.database">
    select * from past_survey
    where survey_id = #survey#
    </cfquery>
    <cfreturn getsdate>
    </cfif>
    <cfquery name="getquestions" datasource="blah.database">
        select * from pool_questions
        <cfif len(#survey#) eq 0> 
        where active_flag='Y'
        <cfelse>
        where <cfqueryparam value="#dateformat 
                       (getsdate.survey_date, "yyyy/mm/dd")#"> BETWEEN start_date AND  
                       end_date
        </cfif>   
        order by qtn_nb
    </cfquery>
    <cfreturn getquestions>
</cffunction> 
```

`#survey#`是表单生成的调查 ID。我想要做的是如果`survey`有一个值来运行查询getsdate。然后无论是否`survey`有值，第二个查询都会运行。如果没有价值，它应该拉出所有活跃的问题。如果有一个值，那么它应该检查调查日期是否在过去问题的开始日期和结束日期之间。

任何有关如何使这项工作的建议将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:23:11.677

```
 <cffunction name="getAllQuestions" access="public" returntype="struct">
        <cfargument name="survey" required="true" default="0" type="numeric">

        <cfset var qryReturn                    = ""> <!---Always var scope your variables to prevent them from leaking to other functions --->
        <cfset var structReturn                 = structNew()>
        <cfset structReturn.pastSurvey          = "">
        <cfset structReturn.surveyQuestions     = "">

        <cfif survey GT 0>
            <cfquery name="qryReturn" datasource="blah.database">
                SELECT * 
                FROM   past_survey
                <!--- Always cfqueryparam to prevent SQL injection attacks & also always reference the scope to prevent confusion --->
                WHERE  survey_id = <cfqueryparam cfsqltype="cf_sql_integer" value="#arguments.survey#">
            </cfquery>
            <cfset structReturn.pastSurvey = qryReturn>
       <cfelse>
            <cfquery name="qryReturn" datasource="blah.database">
                 SELECT *
                 FROM pool_questions
                 <cfif arguments.survey EQ 0>
                     WHERE active_flag = 'Y'
                 <cfelse>
                     WHERE <cfqueryparam value="#dateformat 
                       (getsdate.survey_date, "yyyy/mm/dd")#"> BETWEEN start_date AND  
                       end_date
                 </cfif>
                 ORDER BY qtn_nb
             </cfquery>
             <cfset structReturn.surveyQuestions = qryReturn>
        </cfif>

        <cfreturn structReturn>
    </cffunction> 
```

您可能应该在两个单独的函数中执行此操作，但我会尝试回答您的问题。

我的代码将返回一个查询结构（如果您愿意，您可以更改为一个数组），它返回一个过去的调查和调查问题

注意：在您的示例代码中，您有一些不好的做法。

1.  您正在检查调查值的长度，而不是检查值本身。
2.  如果要确保无论是否通过，调查始终具有值，请设置`requried=true`并赋予其默认值。
3.  用于`cfqueryparam`防止sql注入攻击
4.  在函数中创建的任何变量都需要`var`限定范围，以防止它们泄漏到同一 cfcomponent 中的其他 cffunctions。我总是在顶部这样做。是的，即使您给 cfquery 提供的名称也需要 var 作用域。
5.  由于您在第一次查询后进行返回，因此如果调查值大于 0，它将永远不会到达进行日期检查的第二次查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:24:02.817

我看到您需要解决以下问题。

首先，您的调查参数的默认值为 0，并且您正在对其长度进行条件逻辑。“0”的长度为 1，因此该条件将始终返回 true。

接下来，您声明无论第一个查询是否运行，您都希望第二个查询运行，但您在第二个查询中引用来自第一个查询的值。这意味着如果第一个查询没有运行，第二个查询将由于未定义的变量而崩溃。

接下来，dateformat 返回一个字符串。以您在第二个查询中的方式应用它充其量是不必要的，更糟糕​​的是，它表明您将开始和结束日期存储在 pool_questions 中作为字符串。如果您试图在第一个查询中去除日期字段的时间部分，ColdFusion 有一个 cast() 函数。

此外，确定变量的范围。即-而不是`<cfif len(survey)`，这样做`<cfif len(arguments.survey)`。

另外，var 你的局部变量。在这种情况下，它是您的两个查询的名称。

那应该让你开始。

# git - 管理 GIT 权限 - 多个存储库

> ID：14364294
> 
> 赞同：5
> 
> 时间：2013-01-16T17:34:26.550
> 
> 标签：git, svn, version-control, multiple-repositories

我们有几个开发团队，每个团队开发多个项目（通常超过 10 个）。我们目前正在 CVS 中评估是否迁移到 SVN 或 GIT。我倾向于 GIT，但我不确定我们如何有效地管理权限。例如。

我们有开发团队 A、开发团队 B、开发团队 C。每个团队都有 12 名开发人员。每个开发团队至少有 10 个独立的项目。A队可以看到每个人的代码，B队和C队只能看到他们的代码。此外，一些开发人员只有只读访问权限，而其他开发人员具有完全访问权限。

所以在 CVS 中，我们有三个存储库，每个团队一个。所以它就像：

```
/cvsroot/TeamARepos/project1
/cvsroot/TeamARepos/project2

/cvsroot/TeamBRepos/project1
/cvsroot/TeamBRepos/project2 

/cvsroot/TeamCRepos/project1
/cvsroot/TeamCRepos/project2 
```

等等。我可以管理整个存储库，并说 John Doe 对 A 具有只读访问权限，但对 B 具有写访问权限，对 C 没有访问权限 - 因此我不必让他显式访问每个项目（而且它们经常被添加，所以我不必每次都将每个人都添加到每个新项目中）。

我对 GIT 的理解是每个项目都有一个存储库。因此，没有一种真正合乎逻辑的方式可以说“A 团队的所有代码都在这里，这些用户可以写入”和“B 团队的所有代码都在这里，这些用户可以阅读”并像这样分开。

我不确定我什至知道如何正确地提出这个问题——但我认为迁移到 GIT 是一场管理噩梦。

我们还使用 ant 脚本从 CVS 中检查代码、进行构建并部署到服务器。我刚开始看，但我希望 ant 在这个意义上也能很好地与 GIT 配合使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:18:34.973

我建议使用 git 而不是 svn，因为它的速度、分布式版本控制模型和整体上理智的做事方式。我们在工作中使用 SVN 有几年了，与 git 相比，这真的很痛苦。我看到 SVN 的唯一优势是它与 Windows 的集成，例如 TortoiseSVN。但这只是在您喜欢受 GUI 约束并且不愿意学习更强大的命令行的情况下。

使用 git，您显然需要[gitolite](http://sitaramc.github.com/gitolite/master-toc.html "石榴石")来处理访问控制。使用此模型，您可以为每个项目设置不同的存储库。Gitolite 配置文件允许您将开发人员分组到团队中，然后您可以为每个存储库、分支甚至工作树路径设置非常细粒度的访问控制。您可以按照最适合您的方式指定团队或个人的权限。

如果您需要代码审查，您还应该检查[gerrit](http://code.google.com/p/gerrit/ "格瑞特")是否适合您。您不需要两者，使用 gitolite 或 gerrit。

有时人们发现 git 很难学习。为此，我建议向开发人员介绍一本好书，例如[this](http://git-scm.com/book "混帐书")。它也有印刷版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:21:47.657

Subversion 对您来说可能是一种更顺畅的方式（至少在稍后的迁移和管理领域）。

“Merge Hell”是一个被大肆宣传的神话和来自 Git 男孩和懒惰的不合格 SVN 用户的忌讳。好吧，它**确实存在于某种条件下**（以“重构地狱”的形式适用于任何质量的团队），您只需要检测这种条件是否适用于您的工作流程。

您对现有的服务器操作系统和基础设施一无所知，在某些情况下它很重要。Git 服务器和 Win 下的一些前端是真正的噩梦和恐怖，fe，对于 Linux 端，我找不到这样紧凑且可用的 Subversion over http 解决方案，如适用于 Windows 的 VisualSVN 服务器（企业版）（UberSVN 从我的 POV 来看过于臃肿） ）。如果您在服务器上有 Java，您可以考虑（对于您的团队的规模和 repos 的数量）关于 SCM-manager（对于*任何*选定的 SCM - 它支持 Git、SVN、Hg 从一个盒子）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:36:48.410

如果您想在多个项目中查看所有团队 A 的代码，您可以创建一个包含所有存储库的远程的包罗万象的存储库`git fetch --all`，然后进行分析。

[Gitolite](https://github.com/sitaramc/gitolite)使管理（到自定义挂钩）变得轻而易举。它使您可以控制谁可以读取或写入分支。您甚至可以实现自己的 git 挂钩来实施其他自定义安全措施，例如确保每个人在每个提交消息中都包含票证参考。在过去的 2 年中，我一直在使用它，非常棒。

我们从 SVN 迁移到 Git 是因为解决冲突的痛苦、速度和许多其他原因，其中之一是 git 的采用率。在 rerere 中存储分辨率可以轻松混合和匹配特征。Hooks 很容易编写，我们可以在某些包含代码合约的 repos 上强制执行 OCP。所有这些在 SVN 中都非常麻烦——如果不是不可能的话。

根据 CI 流程，git 在命令行中运行良好，因此您可以在任何自动构建工具中执行您喜欢的操作。现在对所有此类主要工具的支持都是开箱即用的。

这是我们使用 git 在每个存储库中遵循的过程：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# c++ - 在大型 MFC 仅限 Windows 的应用程序中使用 Qt 会加快开发速度吗？

> ID：14364295
> 
> 赞同：5
> 
> 时间：2013-01-16T17:34:29.043
> 
> 标签：c++, qt, mfc

我知道有很多 Qt 与 MFC 的问题，但我会尝试非常具体。

我们有一个针对利基行业的大型（10 年开发）C++ MFC 应用程序。它应该永远保持仅限 Windows 和仅限英语。但是我们需要添加一堆新的设计师绘制的 GUI 和 GUI 控件（对话框、按钮、自定义列表……）。

我们可以聘请 1 或 2 名新的 GUI 开发人员来构建这些新界面，因此我们可以负担得起选择与 MFC 不同的技术。

Qt 似乎最有希望并且最适合与 MFC 并行运行（哦，不，我们不是从头开始重新构建应用程序）。

似乎大多数引用的 Qt 优势是无关紧要的：跨平台开发、易于国际化、开源、非 GUI 库（我们不需要网络并且大多数其他功能已经实现）。

但 Qt 也因其良好的 OO 设计而闻名，他们最近推出了 QtQuick。我想给它一个机会，所以问题是

*   **在一个仅限 Windows 的商业项目中，**从纯 MFC 迁移到 MFC+Qt 有哪些实质性优势，值得学习 Qt，将其集成到我们的构建/部署过程中，并可能支付商业许可证费用？
*   **特别是，如果我们在 Qt 中构建新的 GUI 并通过 QWinWidget 将它们合并到应用程序中**，是否会加快开发速度？****

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:44:12.280

可能不是。

如果 gui 和业务逻辑很好地分离，那么逐渐将 gui 移动到 Qt 或在 Qt 中实现新部分可能是有意义的 - 但我们都知道 gui/逻辑将是一个可怕的混合在一起的混乱

如果您正在重写（这就是 Qt 最终的结果），那么如果它是一个常规的业务类型应用程序，那么使用 C#/.net 可能更容易。

如果性能至关重要，并且您在定义明确且分离良好的 c++ 库中拥有大量领域知识，那么 Qt 前端将是值得的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:55:36.717

基本上不能回答问题，但可能会有所帮助。我认为另一种使用较新工具进行 GUI 的方法是使用 ActiveX 和 COM。我相信您可以轻松地在 MFC 应用程序中使用 ActiveX 组件。还有很多方法可以创建这样的控件。我正在使用 Delphi 来完成在 .NET WinForms 应用程序中成功使用的控件，但据我所知，这样的控件可以在 .NET 环境中轻松创建。**

# java - Android 应用程序在尝试从 Helper 类调用方法时获取 NullPointerException

> ID：14364296
> 
> 赞同：1
> 
> 时间：2013-01-16T17:34:33.777
> 
> 标签：java, android

我现在只开发 Android 两个星期，并且已经对我遇到的这个问题进行了很多谷歌搜索，但似乎无法解决任何问题。

我有一个助手类，它有一种设置`DatePicker`限制等的方法。

```
public class AlarmHelper extends Activity {

    public void setupDatePicker(){
        long maxTime = 52560000;
        final Calendar cal = Calendar.getInstance();
        DatePicker dp = (DatePicker)findViewById(R.id.datePicker);
        dp.setMinDate(cal.getTimeInMillis() - 1000);
        dp.setMaxDate(cal.getTimeInMillis() + maxTime);
    }

} 
```

然后我尝试像这样`setupDatePicker()`从方法`MainActivity`中调用。`onCreate()`

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    AlarmHelper helper = new AlarmHelper();
    helper.setupDatePicker();

    setContentView(R.layout.activity_main);
} 
```

当我运行应用程序时，我得到一个`NullPointerException`. 我相信它与上下文有关，但我不知道如何在我的助手类中实现它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:36:58.293

目前您正在尝试`findViewById`在设置活动布局之前将您的活动`onCreate`代码更改为：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

       // your code here...
    setContentView(R.layout.activity_main);   //<< set layout for Activity here

    AlarmHelper helper = new AlarmHelper(MainActivity.this);
    helper.setupDatePicker();

} 
```

并且在您的 AlarmHelper 中，如果它不是 Activity ，则无需扩展 Activity 类。更改您的`AlarmHelper`类，因为要从其他非 Activity 类访问 UI 元素，您需要传递活动上下文：

```
public class AlarmHelper  {

Activity activity;

public AlarmHelper(Activity activity){
  this.activity=activity;
}

    public void setupDatePicker(){
        long maxTime = 52560000;
        final Calendar cal = Calendar.getInstance();
        DatePicker dp = (DatePicker)activity.findViewById(R.id.datePicker);
        dp.setMinDate(cal.getTimeInMillis() - 1000);
        dp.setMaxDate(cal.getTimeInMillis() + maxTime);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:39:00.327

解决方案：将 setContentView() 移到 setupDatePicker() 之前

```
 super.onCreate(savedInstanceState);
 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,    WindowManager.LayoutParams.FLAG_FULLSCREEN);
 setContentView(R.layout.activity_main);

 AlarmHelper helper = new AlarmHelper();
 helper.setupDatePicker(); 
```

反正在activity里面创建一个activity是很可怕的！

# java - 从 Eclipse RCP 应用程序制作 jar

> ID：14364300
> 
> 赞同：1
> 
> 时间：2013-01-16T17:34:57.327
> 
> 标签：java, jar, eclipse-rcp

如何从 RCP 应用程序（例如邮件模板）制作可运行的 Jar。在导出 -> 导出向导下的 MAINFEST.MF 中，我可以将项目导出为 JAR 文件。当我尝试

```
java -jar mail_1.0.0.201301161746.jar 
```

它说

```
Failed to load Main-Class manifest attribute from mail_1.0.0.201301161746.jar 
```

因为那里没有 Main-Class:xyzclass 条目（因为它是一个 rcp 应用程序）。

那么我在那里添加什么或者我怎样才能让它可以运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:12:03.720

我不认为你需要。配置/开发/标记应用程序后，您可以将其导出为 Eclipse 产品。为此，右键单击项目 > 导出 > 插件开发 > Eclipse 产品 您将需要一个配置文件来执行此操作。您可以通过单击 Eclipse > 插件开发 > 产品配置上的新项目按钮来创建它 我建议您将文件命名为 config.ini。

有关更多信息，请参阅： [http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Feditors%2Fproduct_editor%2Fconfiguration.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Feditors%2Fproduct_editor%2Fconfiguration.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:33:05.127

RCP 应用程序在[Equinox](http://www.eclipse.org/equinox/)（OSGi 的一种实现）中运行，因此无法进行单罐导出。

OSGi 的整个概念是提供**模块化**架构。

# phpfox - phpFox 模板更改

> ID：14364302
> 
> 赞同：2
> 
> 时间：2013-01-16T17:34:59.827
> 
> 标签：phpfox

我已经安装了 phpFox，并且我有 HTML（只有 html、css、js）模板。我想更改为我自己的 html 模板而不是默认模板！我可以完成这个任务！请帮我将默认模板更改为我自己的 html 模板。phpFox 3.3.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:35:57.863

转到您的管理区域。

然后

1.  在这里创建一个新主题。

    [http://yousite.com/index.php?do=/admincp/theme/add/](http://yousite.com/index.php?do=/admincp/theme/add/)

2.  现在在这里创建一个新样式并选择你的主题

    [http://yousite.com/index.php?do=/admincp/theme/style/add/](http://yousite.com/index.php?do=/admincp/theme/style/add/)

    在此处添加新样式

3.  现在转到文件夹

    你的网站/主题/前端/

    复制 cosmic 文件夹并将其重命名为您在创建样式时在管理员中提供的名称。

    还将此文件夹中的文件夹 cosmic 重命名为新文件夹名称。

4.  现在您可以更改html

    你的文件夹/模板/template.html.php

5.  您还可以更改 CSS

    前端\你的文件夹\样式\你的文件夹\css\custom.css

6.  激活您的主题

    [http://yousite.com/index.php?do=/admincp/theme/](http://yousite.com/index.php?do=/admincp/theme/)

    并使您的主题默认

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T09:44:46.470

首先，您告诉我们您想要修改或更改的内容。例如，如果您想更改用户配置文件头信息，您应该从模块“用户”中找到相关的模板文件。无论如何，在这样做之前，我建议您备份原始文件。如果您只想创建具有新样式的模板，请按照 KESHU VAT 的方式进行。

# asp.net - SQL Server，连接池与特殊情况下的静态连接

> ID：14364304
> 
> 赞同：1
> 
> 时间：2013-01-16T17:35:05.993
> 
> 标签：asp.net, sql-server, database, multithreading, connection-pooling

我有点知道这个问题的答案，但无法真正掌握基本概念。我知道您现在总是被指示使用连接池。但是想象一下这种情况。

我需要从一个数据库和一张表中多次读取数据。

连接池将注入微秒级的开销，但为什么不通过对所有内容使用单个连接并锁定它来消除它呢？

因为它是一个数据库，一个表。我们不太可能从多线程连接池中获得任何性能提升吗？

只是希望在这里有所澄清。也许一些简单的资源可以解释为什么，连接池总是更好。

谢谢。我知道这不是最大的问题，我很感谢你的时间。我专门在.net环境中，但这是跨编程的基本概念对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:30:04.550

1.  使用一个全局连接，您需要准备好处理虚假连接失败。这些*总是*会发生（网络打嗝，...）。
2.  当对单个表使用多个并发语句时，您绝对*会获得并发性。*SQL Server 通常不会以独占方式锁定表（非常罕见）。
3.  您将忘记在某处使用同步协议（到处锁定）。您最终会弄错，并且必须参加比赛。
4.  如果您有一个会阻塞整个应用程序的慢速失控查询。它将在浏览器中显示为“挂起”。
5.  您在全局锁上序列化所有 HTTP 请求。您只使用一个 CPU。你根本不会扩展。您的应用无法很好地处理突发事件。

拥有单一的全球连接确实是个坏主意。为什么不直接使用池化？这为您节省了使用同步的开发工作。工作量就更少了。

当然，池化并不*总是*更好。您可以构建不是的病理案例。不过，我从未遇到过需要将连接保持打开的时间超过当前 HTTP 请求的情况。

# asp.net-mvc - 是否可以让 SimpleMembership 调用 Web 服务？

> ID：14364306
> 
> 赞同：0
> 
> 时间：2013-01-16T17:35:13.553
> 
> 标签：asp.net-mvc, simplemembership

我的 Web 数据库服务器正在从 DMZ 移动到公司 LAN（不要问为什么！）。这样做的缺点是我的 MVC 4 网站现在必须与具有 Web 服务（或 Web api）的应用服务器通信才能访问数据库。这对我的大多数东西来说并不是一个令人头疼的问题，但我正在使用 SimpleMembershipProvider 进行用户身份验证，这似乎需要直接访问数据库。
有什么方法可以让 SimpleMembership 与 Web 服务对话，还是我必须使用自定义会员提供程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T16:50:55.277

我面临同样的情况，虽然我还没有编写或测试代码，但我将编写一个从 SimpleMembershipProvider 继承的类，并覆盖从服务（web api）调用方法的方法。

这是您最终使用的方法吗？

# performance - 具有中间值的融合优化

> ID：14364311
> 
> 赞同：4
> 
> 时间：2013-01-16T17:35:29.830
> 
> 标签：performance, haskell, optimization, ghc

GHC 是否会像没有中间值一样有效地转换具有中间值的表达式？

例如

```
main = print $ f ["aa", "bb", "cc"]

f x = 
   let a = map (map toUpper) x
       b = filter (\z -> 'C' /= head z) a
       c = foldl1 (++) b
   in c 
```

似乎有非常不同的核心输出 (with `-ddump-simple`) 与 with

```
f x = foldl1 (++) $ filter (\z -> 'C' /= head z) $ map (map toUpper) x 
```

具有中间值的表达式是否需要（显着）更长的时间来评估？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:22:31.220

中间绑定的线性使用`let`等同于`(.)`在值之间放置。

GHC 将通过这样的管道进行融合。从结果中可以看出`-ddump-simpl-stats`

使用 let 绑定：

```
15 RuleFired
    1 ++
    1 Class op /=
    1 Class op show
    1 Class op showList
    1 filter
    1 fold/build
    1 foldr/app
    1 map
    1 neChar#->case
    3 unpack
    3 unpack-list 
```

使用管道：

```
15 RuleFired
    1 ++
    1 Class op /=
    1 Class op show
    1 Class op showList
    1 filter
    1 fold/build
    1 foldr/app
    1 map
    1 neChar#->case
    3 unpack
    3 unpack-list 
```

和同一个融合的工人：

使用 let 绑定：

```
Main.main_go =
  \ (ds_aAz :: [[GHC.Types.Char]]) ->
    case ds_aAz of _ {
      [] -> GHC.Types.[] @ [GHC.Types.Char];
      : y_aAE ys_aAF ->
        case GHC.Base.map
               @ GHC.Types.Char @ GHC.Types.Char GHC.Unicode.toUpper y_aAE
        of wild1_azI {
          [] ->
            GHC.List.badHead
            `cast` (UnsafeCo (forall a_azK. a_azK) [[GHC.Types.Char]]
                    :: (forall a_azK. a_azK) ~ [[GHC.Types.Char]]);
          : x_azM ds1_azN ->
            case x_azM of _ { GHC.Types.C# c2_aAa ->
            case c2_aAa of _ {
              __DEFAULT ->
                GHC.Types.: @ [GHC.Types.Char] wild1_azI (Main.main_go ys_aAF);
              'C' -> Main.main_go ys_aAF
            } 
```

管道：

```
Main.main_go =
  \ (ds_aAA :: [[GHC.Types.Char]]) ->
    case ds_aAA of _ {
      [] -> GHC.Types.[] @ [GHC.Types.Char];
      : y_aAF ys_aAG ->
        case GHC.Base.map
               @ GHC.Types.Char @ GHC.Types.Char GHC.Unicode.toUpper y_aAF
        of wild1_azB {
          [] ->
            GHC.List.badHead
            `cast` (UnsafeCo (forall a_azD. a_azD) [[GHC.Types.Char]]
                    :: (forall a_azD. a_azD) ~ [[GHC.Types.Char]]);
          : x_azF ds1_azG ->
            case x_azF of _ { GHC.Types.C# c2_aA3 ->
            case c2_aA3 of _ {
              __DEFAULT ->
                GHC.Types.: @ [GHC.Types.Char] wild1_azB (Main.main_go ys_aAG);
              'C' -> Main.main_go ys_aAG
            }
            } 
```

你忘了用 -O2 编译吗？

# asp.net-mvc - 在 PartialView 中时 Telerik MVC 网格错误 404

> ID：14364313
> 
> 赞同：0
> 
> 时间：2013-01-16T17:35:35.177
> 
> 标签：asp.net-mvc, vb.net, telerik, telerik-grid, telerik-mvc

部署到服务器后，我遇到了 mvc 网格问题。

我的网格：

```
Html.Telerik().Grid(Of PortalColaborador.DisciplinasViewModel)() _
            .Name("GridDisciplinas") _
            .DataKeys(Sub(k)
                              k.Add("idPedidoDocumentacao")
                              k.Add("idLDisciplina").RouteKey("idLDisciplina")
                      End Sub) _
            .Columns(Sub(column)
                             column.Bound(Function(item) item.idPedidoDocumentacao).Visible(False)
                             column.Bound(Function(item) item.descricao).Width("80%").Title("Descrição")
                     End Sub) _
            .Editable(Function(e) e.Mode(GridEditMode.InLine)) _
            .DataBinding(Function(dtb) dtb.Ajax().Select("BindDisciplinas", "Disciplinas", New With {.idPedidoDocumentacao = Model.idPedidoDocumentacao})).Render() 
```

位于`ListaDisciplinas`另一个 partialView( `detalheEstatuto`) 中的 partialView() 内。

我正在像这样渲染 Partial

```
Html.RenderAction("ListaDisciplinas", "Disciplinas", Model) 
```

我在我的布局页面中注册 Telerik 脚本。

在我的机器上测试它时它工作正常，但是在部署到服务器后，当网格尝试获取数据时，我开始收到**错误 404**`BindDisciplinas`。如果不是渲染部分视图，而是直接将网格复制到`detalheEstatuto`它，即使在服务器上也可以正常工作。

局部视图的深度是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:36:59.993

因为我实际上并不需要在第二部分 ( `ListaDisciplinas`) 上使用另一个模型，所以我使用了它`Html.Partial("listaDocumentacaoAnexa", Model)`，并且一切正常，但我不明白为什么会发生这种情况。有什么想法吗？

# javascript - MooTools：不可见选择上的 getChildren() 在 Chrome 中返回一个空数组

> ID：14364317
> 
> 赞同：1
> 
> 时间：2013-01-16T17:35:40.830
> 
> 标签：javascript, google-chrome, mootools

我有一些代码试图获取 select: 的子选项`$('mySelect').getChildren()`。

有时选择可见，有时不可见，这在 Firefox 中似乎没有什么不同，`.getChildren()`返回一个带有选择选项的数组。但是，我注意到在 Chrome 中，如果选择不可见，完全相同的调用将返回一个空数组。

一旦选择变得可见`.getChildren()`，即使它再次不可见，也会返回选择选项。

有没有办法绕过 Chrome 中的这个初始空数组？

谢谢。

编辑：

我的实际代码是一个相当大的应用程序的一部分，但我尝试构建一个 jsfiddle 以提供足够的信息来解决这个问题，[http://jsfiddle.net/6Szua/3/](http://jsfiddle.net/6Szua/3/)，但实际上重现错误并没有运气。这就像不是返回 0 和一个对象数组，而是返回 -1 和 [ ]。在我们的代码中，-1 属于特殊情况，因此不同浏览器的行为是不同的。

如果我在 Chrome 的开发人员工具中运行调试器，我可以跟踪正在构建的选择选项，但是一旦调用完成，就好像它们从未存在过一样。

幸运的是，我能够为这种情况想出一个解决方法，但如果其他人以前遇到过类似的事情，我仍然有兴趣了解它。

# javascript - Facebook 分享按钮呈现不正确

> ID：14364323
> 
> 赞同：0
> 
> 时间：2013-01-16T17:35:54.153
> 
> 标签：javascript, facebook, firefox, facebook-javascript-sdk

我使用以下代码获取 Facebook 分享按钮、Facebook 赞、Facebook 发送和 Google +1：

```
 <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ar_AR/all.js#xfbml=1&appId=<?php echo Configure::read('FBappId');?>";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    </script>

<!-- FaceBook SHARE BUTTON HERE -->
    <a name="fb_share"></a>
<!-- End FACEBOOK SHARE -->
    <div class="fb-send" data-href="<?php echo $URL;?>" data-font="tahoma"></div>

    <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
            type="text/javascript">
    </script>
    <div class="fb-like" data-send="false" data-layout="button_count" data-width="" data-show-faces="false" data-font="tahoma"></div>
    <span>
    <!-- Place this tag where you want the +1 button to render -->
    <g:plusone size="medium"></g:plusone>

    <!-- Place this render call where appropriate -->
    <script type="text/javascript">
      window.___gcfg = {lang: 'ar'};

      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    </span> 
```

**问题是**Facebook 分享按钮在宽度和高度为 1000 像素的 iframe 中呈现，并且呈现超出预期的视图范围。下面的屏幕截图会解释得更清楚： ![在此处输入图像描述](../Images/9e5845c56497cdfedcebe7a89602d083.png) **顺便说一句：**文档是 RTL 方向，分享按钮应该放在其他按钮旁边。屏幕截图是使用 FireFox 18.0 拍摄的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:33:13.657

`<fb:share-button type="box_count"></fb:share-button>`仅在要显示共享按钮的地方使用此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:01:18.257

两天前我的“使用 Facebook 登录”按钮也发生了同样的事情，不确定这是否是 FB 的错误？

无论如何，我已经使用 CSS hack 来修复它......不理想！

```
.fb_iframe_widget iframe{width:auto!important; height:auto!important} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:09:33.500

此问题的最终解决方案在以下**[链接](http://quran.2index.net/viewAyah/1933)**中进行了演示。基本上，这取决于在 Facebook 上创建指向 sharer.php 的直接链接。当然，我删除了**RohitKumarChoudhary**答案中所认为的额外 Javascipt 链接标签。如下：

```
<div class="socials">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ar_AR/all.js#xfbml=1&appId=xxxxxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-send" data-href="http://quran.2index.net/viewAyah/1933" data-font="tahoma"></div>
<!--<a name="fb_share"></a>--> 
<a href="http://www.facebook.com/sharer.php?app_id=xxxxxxxxxx&sdk=joey&u=http://quran.2index.net/viewAyah/1933&display=popup" target="_blank"><img src="/img/../images/facebook16.png" alt="" />مشاركة</a>

<div class="fb-like" data-send="false" data-layout="button_count" data-width="" data-show-faces="false" data-font="tahoma"></div>
....
</div> 
```

# selenium - 如何专注于 IDE 页面底部的特定项目

> ID：14364327
> 
> 赞同：0
> 
> 时间：2013-01-16T17:36:07.547
> 
> 标签：selenium

我正在尝试在页面底部的页面中选择特定项目。我想验证该元素是否存在，同时我想专注于该特定项目。如何在 Selenium IDE 中执行此操作？

我尝试了 storeEval，但它的具体协调是我不想要的。我正在寻找一些动态命令。我尝试使用`css:.groupTile:contains("Concentrated")`，但焦点不是那个特定的项目（集中）。

有人可以帮我指挥、目标和价值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T08:07:43.213

CSS 选择器有多种格式

i) 使用 ID。把它放在目标中：css=tag#id

tag = 被访问元素的 HTML 标签，id = 被访问元素的 ID

ii) 使用类。把它放在目标中：css=tag.class

tag = 被访问元素的 HTML 标签，class = 被访问元素的类

在值中输入项目的名称。

# sublimetext2 - sublime text-“列出包含'find'字符串的行

> ID：14364329
> 
> 赞同：14
> 
> 时间：2013-01-16T17:36:19.610
> 
> 标签：sublimetext2

如何列出包含来自“查找”命令的匹配项的行？即，我想在一个单独的窗口中列出所有匹配的行。目前只能转到下一个/上一个“查找”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T18:37:32.233

尝试“在文件中查找”（在 Mac 上为 + +，在 PC 上可能`Cmd`为`Shift`+ + ）。`F``Ctrl``Shift``F`

搜索结果将显示在新选项卡中，您可以双击任何结果以跳转到匹配文件中的该行。

*   要仅搜索打开的文件，`<open files>`请输入 Where 字段。
*   要仅显示匹配的行而不显示上下文周围的行，请切换“显示上下文”选项（位于“查找全部”面板的左侧）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-02T04:19:11.053

1.这是一个参考：[如何在 Sublime Text 2 中过滤包含字符串的行的文件？](https://superuser.com/questions/452189/how-can-i-filter-a-file-for-lines-containing-a-string-in-sublime-text-2)

*   按 Ctrl+F(⌘+F) 以“**查找所有**”出现；
*   按 Ctrl+L 将所有选择**扩展到行。**
*   然后可以 Ctrl+C(⌘+C) 或 Ctrl+Shift+K(⌃＋⇧＋K) **复制/删除**行。

2.现在有一个过滤行的插件： [https](https://github.com/davidpeckham/FilterLines) ://github.com/davidpeckham/FilterLines 它允许基于字符串或正则表达式的过滤和代码折叠。 ![filterlines 插件：Edit->Line->Filter](../Images/ce8e79cdcf2eadccccee46cbd3983b01.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-27T11:47:02.473

我认为最简单的方法就是搜索这样的行 -> **".*find_this_string.*"**并确保勾选**正则表达式**。然后您可以单击**“查找全部”（alt+enter）**，然后将所有结果复制并粘贴到新窗口中。

# c# - 动态控制的事件处理程序的工作

> ID：14364332
> 
> 赞同：1
> 
> 时间：2013-01-16T17:36:23.963
> 
> 标签：c#, asp.net, .net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:55:39.657

I would suggest detecting what causes the PostBack in Page_Load Event [On postback, how can I check which control cause postback in Page_Init event](https://stackoverflow.com/questions/3175513/on-postback-how-can-i-check-which-control-cause-postback-in-page-init-event) and then

```
 if (Page.IsPostBack && *PostBackControl.Name=="btnAdd"*)
            {
if (DateTime.Now.Second < 30)
        {
                LinkButton lnk1 = new LinkButton();
                lnk1.ID = "D1";
                lnk1.Text = "A";
                //Event handler must be registered in the Page_Load/Page_Init
                lnk1.Click += new EventHandler(LinkButton_Click);
                plhDynamicLinks.Controls.Add(lnk1);

                LinkButton lnk2 = new LinkButton();
                lnk2.ID = "D2";
                lnk2.Text = "B";
                lnk2.Click += new EventHandler(LinkButton_Click);
                plhDynamicLinks.Controls.Add(lnk2);
    } else
        {
                LinkButton lnk3 = new LinkButton();
                lnk3.ID = "D3";
                lnk3.Text = "C";
                lnk3.Click += new EventHandler(LinkButton_Click);
                plhDynamicLinks.Controls.Add(lnk3);

                LinkButton lnk4 = new LinkButton();
                lnk4.ID = "D4";
                lnk4.Text = "D";
                lnk4.Click += new EventHandler(LinkButton_Click);
                plhDynamicLinks.Controls.Add(lnk4);
    }
            }
        } 
```

# javascript - JavaScript - 如何从脚本内容中检索 src="" url？

> ID：14364333
> 
> 赞同：2
> 
> 时间：2013-01-16T17:36:31.310
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 查询字符串](https://stackoverflow.com/questions/647259/javascript-query-string)

我想访问附加到我的脚本 url 的查询变量。例如：

```
<script type="text/javascript" src="http://mysite.com/app.js?var1=value1&var2=value2"></script> 
```

在 app.js 中，如何访问 var1 和 var2 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:43:40.593

[此页面描述了](http://web.archive.org/web/20170806020457/posheika.net/?p=42)获取这些值的方法：

```
<script type="text/javascript"
        src="scriptaculous.js?load=effects,builder"></script> 
```

和javascript：

```
function getJSvars(script_name, var_name, if_empty) {
    var script_elements = document.getElementsByTagName(‘script’);

    if(if_empty == null) {
        var if_empty = ”;
    }

    for (a = 0; a < script_elements.length; a++) {
       var source_string = script_elements[a].src;
           if(source_string.indexOf(script_name)>=0) {

           var_name = var_name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
           var regex_string = new RegExp("[\\?&]"+var_name+"=([^&#]*)");
           var parsed_vars = regex_string.exec(source_string);
           if(parsed_vars == null) { return if_empty; }
           else { return parsed_vars[1]; }

          }
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:46:03.217

解析`src`属性，大致如下：

```
var src=document.getELementById("script-id").getAttribute("src");
var query=src.substring(src.indexOf("?"));
var query_vals=query.split("&");
var queries={};
for (var i=0;i<query_vals.length;i++) {
  var name_val=query_vals.split("=");
  queries[name_val[0]]=name_val[1];
}
console.log(queries.var1, queries.var2); 
```

但是，有一些库，例如 url.js，可以更好地执行此操作，并且在 URL 编码等方面更加健壮。

# parameters - 无状态检票口页面仍然附加页面版本 URL 参数 - 如何调试？

> ID：14364340
> 
> 赞同：1
> 
> 时间：2013-01-16T17:36:43.883
> 
> 标签：parameters, wicket, stateless

我正在尝试使我的项目的页面完全无状态（更多页面来）并摆脱页面版本号，例如`/mypage/?0`

页面设置`statelessHint`为 true，我也验证了`onBeforeRender`返回`isStateless`true。我还使用`@StatelessComponent`注释来确保页面及其子组件真的是无状态的。

所以，似乎一切都是无状态的，但是版本参数仍然附加到 URL

我无法附上代码，因为它是一个包含许多组件和大量继承的庞大结构。当然，我不希望任何人告诉我哪里有问题，而是希望有人给我一个提示，什么时候在 Wicket 的源中放置断点以找出问题所在。例如，谁能告诉我哪个 Wicket 类负责决定是否附加版本参数？

在此先感谢，彼得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:32:35.107

要验证页面是无状态的，您必须调用`Page#isPageStateless`而不是`Page#isStateless`.

为了完整起见，我还要提到它`@StatelessComponent`本身什么也不做，但你必须安装`StatelessChecker`with

```
getComponentPreOnBeforeRenderListeners().add(new StatelessChecker()); 
```

在`Application#init`. 我认为它工作得很好，它应该找到任何有状态的组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:44:29.937

显然，`@StatelessComponent`在所有子组件中并不总是可靠的:(

您可以通过将日志级别设置为`org.apache.wicket.Page`to来调试它`DEBUG`，这会在控制台输出中添加大量行。Grep 表示“不是无状态的，因为”来查找有关渲染的有状态组件的消息。

就我而言，它是一个`Image`，其`getStatelessHint()`方法返回`false`（不知道为什么）。

# sql - 从 SQL 存储过程中一一读取 CSV 文件数据

> ID：14364341
> 
> 赞同：0
> 
> 时间：2013-01-16T17:36:45.107
> 
> 标签：sql, sql-server, sql-server-2008

需要一一读取CSV文件信息。即如果文件中的客户存在于客户表中，则插入明细表，否则插入错误表。所以我不能使用批量插入方法。

如何从 CSV 文件中逐一读取记录？如何给路径？批量插入方法在这里不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:07:41.490

一种选择是使用`INSTEAD OF INSERT`触发器选择性地将行放入正确的表中，然后使用您的正常`BULK INSERT`选项`FIRE_TRIGGERS`。

接近的东西；

```
CREATE TRIGGER bop ON MyTable INSTEAD OF INSERT AS
BEGIN
    INSERT INTO MyTable
    SELECT inserted.id,inserted.name,inserted.otherfield FROM inserted
    WHERE inserted.id IN (SELECT id FROM customerTable);

    INSERT INTO ErrorTable
    SELECT inserted.id,inserted.name,inserted.otherfield FROM inserted
    WHERE inserted.id NOT IN (SELECT id FROM customerTable);
END;

BULK INSERT MyTable FROM 'c:\temp\test.sql' 
    WITH (FIELDTERMINATOR=',', FIRE_TRIGGERS);

DROP TRIGGER bop; 
```

如果您定期导入文件，您可以创建一个具有相同架构的表 (ImportTable)，在其上设置触发器并`MyTable`通过批量导入到`ImportTable`. 这样您就可以保留触发器，并且只要您要导入到`ImportTable`，就不需要为每次导入执行任何特殊的设置/过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:40:52.007

使用批量插入加载到临时表中，然后逐行处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-10T07:01:52.017

```
CREATE TABLE #ImportData
(
    CVECount varchar(MAX), 
    ContentVulnCVE varchar(MAX),
    ContentVulnCheckName varchar(MAX)
)

BULK INSERT #ImportData
FROM 'D:\test.csv'
WITH
(
    FIRSTROW = 2,
    FIELDTERMINATOR = ',',  --CSV field delimiter
    ROWTERMINATOR = '\n',   --Use to shift the control to next row
    TABLOCK
)
select * from #ImportData
//Here you can write your script to user read data one by one
DROP TABLE #ImportData 
```

# qt - QDockWidget::setWidget() 在 Windows 上调用 QAbstractItemModel::rowCount 但在 Linux 上不调用

> ID：14364350
> 
> 赞同：1
> 
> 时间：2013-01-16T17:37:09.033
> 
> 标签：qt, qtreeview, rowcount, qdockwidget

考虑以下 QAbstractItemModel 子类：

```
class MyItemModel : public QAbstractItemModel {
Q_OBJECT
public:
    (...)
    virtual int rowCount(const QModelIndex& parentIdx = QModelIndex()) const override;
    (...)
}; 
```

还有一个用于显示 QTreeView 的简单 QDockWidget

```
class DockWidget : public QDockWidget {
Q_OBJECT
public:
    DockWidget() {
         view = new QTreeView();
         setWidget(view);
    }
private:
    QTreeView *view;
} 
```

如果我在 Windows **MyItemModel::rowCount()**上调用 DockWidget 构造函数，则会被调用。如果我在 Linux 上使用此代码，则不会调用**MyItemModel::rowCount() 。**这个对吗？

我怀疑 Qt for Windows 在调用**QDockWidget::setWidget(** ) 时会触发 rowCount() ，这在 Linux 上是不必要的。但这只是一个猜测。

> Qt 版本 4.8.3，
> Windows 7 64 位，
> Ubuntu 32 和64 位

# php - 我的网址末尾的 / 如何影响 css 文件的包含？

> ID：14364351
> 
> 赞同：1
> 
> 时间：2013-01-16T17:37:11.513
> 
> 标签：php, css, mime-types

我是新手，但本周成功地编写了适用`"/?page=2"`于`$_GET[]`.

为了速度和方便，我一直在调用我的文件`index.php`，所以 url 是`testdomain`or`testdomain/`或`testdomain/?page=2`.

今天我将文件名更改为`multi.php`. 现在，如果 URL 中有任何内容，我会收到错误消息

```
"The stylesheet 'http://testdomain/multi.php/mystyle.css' was not loaded because its MIME type, "text/html", is not "text/css". 
```

所以 URL`testdomain/multi.php`可以完美运行，`testdomain/multi.php/`但不能。我已经尝试了尽可能多的关于该错误的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:43:47.717

'/' 字符在这样的字符串中用于表示目录。您的代码正在查看文件`multi.php`，但将其视为目录。

如果您的文件位于 testdomain 中，请执行以下操作：

```
http://testdomain/mystyle.css 
```

`.php`表示该项目是文件而不是目录。但是，您实际上可能有一个`multi`目录，在这种情况下您可以像下面这样访问它：

```
http://testdomain/multi/mystyle.css 
```

仔细检查您的文件结构以验证您的路径是否正确。

希望这可以帮助。

# mysql - MySQL查询排序高分

> ID：14364352
> 
> 赞同：1
> 
> 时间：2013-01-16T17:37:12.573
> 
> 标签：mysql

我试图从一个名为 games 的表中选择前 3 个条目，该表具有玩家的外键和 2 个用于主机和对手的个人分数的整数。

查询：

```
SELECT 
   games.id, games.host_score, games.opponent_score, player.name 
FROM games, player 
WHERE player.id = games.host_player_id 
      || player.id = games.opponent_player_id 
ORDER BY games.host_score, games.opponent_score DESC LIMIT 3 
```

查询完成，但又出现乱序：

```
id  host_score  opponent_score  name
17  0           0               Temp2
17  0           0               Temp0
16  770         930             Temp0 
```

当我运行没有 OR 的查询时，它可以工作。我怎样才能使这种方法起作用？

还有一种方法可以将 LIMIT 设置为 50 但不计算重复项？例如，如果我想要 2 的限制，但 3 人的得分为 50，而 2 人的得分为 20，它将返回：

```
id  host_score  opponent_score  name
17  50          0               Temp2
17  50          0               Temp0
17  50          0               Temp1
17  20          0               Temp3
17  20          0               Temp4 
```

或者在php中将它作为单独的问题运行会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:08:48.993

我认为您的查询是错误的，因为一场比赛将分两排进行——一场给东道主，一场给对手。

您想同时获取主机名和对手名，因此您需要加入两次`player`表：

```
SELECT g.id, g.host_score, g.opponent_score, hp.name as HostName, op.name as OpponentName
FROM games g join
     player hp
     on hp.id = g.host_player_id join
     player op
     on op.id = g.opponent_player_id 
ORDER BY g.host_score, g.opponent_score DESC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:39:54.820

如果要从最高到最低排序，则需要为每个字段指定它

```
ORDER BY games.host_score DESC, games.opponent_score DESC 
```

因为当您不指定顺序时，它假定您想要升序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:46:19.357

您应该在 SQL 中使用 OR（而不是 ||），还应添加括号以使其可读。

```
WHERE (player.id = games.host_player_id) OR (player.id = games.opponent_player_id) 
```

通过分数值获得前 50 位分数，尽管返回的总行数可能更高。使用下面的准系统查询并根据您的需要进行调整。

```
SELECT g1.id, g1.host_scores, COUNT(g2.host_scores) AS Rank
FROM games g1
WHERE Rank <= 50
JOIN games g2 ON (g1.host_scores < g2.host_scores) OR (g1.host_scores=g2.host_scores) 
GROUP BY g1.id, g1.host_scores
ORDER BY g1.host_scores DESC; 
```

我必须补充一点，为了避免复杂性，您还可以将数据获取到您的应用程序中，并使用 Java、PHP 等编程语言轻松完成此操作。这可能会导致您进行多个查询，但更简单和更多随着时间的推移可维护。

# google-chrome - 没有特定关键字的 Chrome 多功能框事件？

> ID：14364358
> 
> 赞同：3
> 
> 时间：2013-01-16T17:37:41.913
> 
> 标签：google-chrome, google-chrome-extension

我确实想检查用 Chrome 多功能框编写的内容并重定向到正确的页面。

尽管如此，我还是不能使用特定的关键字，因为我确实想将诸如[http://bugs.example.com/BUG-1234](http://bugs.example.com/BUG-1234)`BUG-1234`之类的东西重定向到

我确实有一个正则表达式（因为该`BUG`部分可以有很多值）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:06:11.007

在 Omnibox 的帮助下，Chrome 扩展程序可以为您提供帮助。

如果我在您输入并点击 Omnibox 时理解正确，`BUG-1234`您[的](http://dev.chromium.org/user-experience/omnibox)网页 URL 应该是`Enter``http://bugs.example.com/BUG-1234`

# 示范

我使用关键字作为

> “关键字”：“错误”

BUG，您可以根据功能更改它。因此，当您在[chrome Omnibox](http://dev.chromium.org/user-experience/omnibox)中输入`B`++时，搜索提供程序会添加一个自定义层，如下所示`U``G`

图 1)

![开始画面](../Images/17458a755ba57fcac140c90efee2d6bd.png)

当您输入 1234 并 在[Omnibox中点击](http://dev.chromium.org/user-experience/omnibox)`Enter` **或**选择建议的 URL时，如下所示`Open Bug %s ?`

图 2)

![在此处输入图像描述](../Images/81e8a0b10dbd956b7714bd02cb13e5ce.png)

它会打开一个带有 URL 的网页，如此处所示，我在其中用作`http://bugs.example.com`测试 URL，可以进一步扩展。

图 3)

![在此处输入图像描述](../Images/413f9c9bf0f17bb02a584374a4d66cd1.png)

### 清单.json

使用 Chrome 扩展注册后台页面和[多功能框，并添加相关权限。](http://dev.chromium.org/user-experience/omnibox)

```
{
    "name": "Bug Tracker",
    "description": "This integrates chrome omnibox with bug search",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "omnibox": {
        "keyword": "BUG"
    },
    "permissions": [
        "<all_urls>"
    ]
} 
```

### 背景.js

自定义建议脚本

```
//Set Text to show for custom suggested URL(s)
chrome.omnibox.setDefaultSuggestion({
    "description": "Open Bug %s ?"
});

//Fired when Enter or a suggested Link is selected
chrome.omnibox.onInputEntered.addListener(function (bugId) {
    //Use your custom URL
    chrome.tabs.update({
        "url": "http://bugs.example.com/BUG-" + bugId
    }, function () {
        console.log("Bug Page is open");
    });
    console.log("Input Entered is " + bugId);
}); 
```

# 参考

*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [多功能框 API](https://developer.chrome.com/extensions/omnibox.html)
*   [清单文件](https://developer.chrome.com/extensions/manifest.html)

# asp.net - 区域内的 ASP.NET MVC 4 区域不会呈现主项目中的 Shared _Layout.vbhtml

> ID：14364359
> 
> 赞同：2
> 
> 时间：2013-01-16T17:37:41.943
> 
> 标签：asp.net, razor, asp.net-mvc-4, viewengine, areas

好的，我有这个有趣的 ASP.NET MVC 4 解决方案/项目结构，它创建可插入的应用程序模块。我按照这种技术创建了它：

[http://geekswithblogs.net/cokobware/archive/2013/01/15/asp.net-mvc-4-pluggable-application-modules.aspx](http://geekswithblogs.net/cokobware/archive/2013/01/15/asp.net-mvc-4-pluggable-application-modules.aspx)

结果，我在项目中有一个带有空区域文件夹的主应用程序。我还有一个插件项目，它位于磁盘上主应用程序的区域文件夹中，它还将其构建输出文件夹设置为主应用程序`\bin`文件夹。

在我的可插拔模块应用程序中，我决定在其中创建一个区域部分，并创建了一个名为 Test 的区域。默认情况下，ASP.NET MVC 4 视图引擎不支持将其作为可插入模块，因为它会尝试在不正确的位置查找视图。

所以从概念上讲，我们有：

```
Main             <- Main application folder
   Areas         <- Main application folder
      Plugin     <- Plugin module application folder
         Areas   <- Plugin module application folder
            Test <- Plugin module application folder 
```

为了解决这个问题，我创建了一种方法来解释`AreaName`自定义`RazorViewEngine`类中的属性，以重写视图引擎正在寻找的 URL，以在这些可插入模块区域中查找视图文件。

首先，我使用以下约定为属于我的可插拔模块的测试区域定义我的区域注册类：

```
Namespace Areas.Plugin
    Public Class PluginAreaRegistration
        Inherits AreaRegistration

        Public Overrides ReadOnly Property AreaName() As String
            Get
                Return "Plugin.Test"
            End Get
        End Property

        Public Overrides Sub RegisterArea(ByVal context As System.Web.Mvc.AreaRegistrationContext)
            context.MapRoute( _
                "Plugin_default", _
               "Plugin/Test/{controller}/{action}/{id}", _
                New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional},
                {"Plugin.Test.Controllers"}
            )
        End Sub
    End Class
End Namespace 
```

然后我继承`RazorViewEngine`并覆盖了一些方法来解析和生成可插入模块的区域文件夹中的视图路径：

```
Public Class MyExtendedRazorViewEngine
Inherits RazorViewEngine

' set the location format strings
Public Sub New()
    MyBase.PartialViewLocationFormats = _
        {
        "~/Views/{1}/{0}.cshtml",
        "~/Views/{1}/{0}.vbhtml",
        "~/Areas/{2}/Views/{1}/{0}.cshtml",
        "~/Areas/{2}/Views/{1}/{0}.vbhtml",
        "~/Views/Shared/{0}.cshtml",
        "~/Views/Shared/{0}.vbhtml",
        "~/Areas/{3}/Areas/{2}/Views/{1}/{0}.cshtml",
        "~/Areas/{3}/Areas/{2}/Views/{1}/{0}.vbhtml",
        "~/Areas/{1}/Views/Shared/{0}.cshtml",
        "~/Areas/{1}/Views/Shared/{0}.vbhtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.cshtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.vbhtml"
        }

    MyBase.AreaViewLocationFormats = {
        "~/Areas/{2}/Views/{1}/{0}.cshtml",
        "~/Areas/{2}/Views/{1}/{0}.vbhtml",
        "~/Areas/{2}/Views/Shared/{0}.cshtml",
        "~/Areas/{2}/Views/Shared/{0}.vbhtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.cshtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.vbhtml"
    }

    MyBase.AreaMasterLocationFormats = {
        "~/Areas/{2}/Views/{1}/{0}.cshtml",
        "~/Areas/{2}/Views/{1}/{0}.vbhtml",
        "~/Areas/{2}/Views/Shared/{0}.cshtml",
        "~/Areas/{2}/Views/Shared/{0}.vbhtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.cshtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.vbhtml"
    }

    MyBase.AreaPartialViewLocationFormats = {
        "~/Areas/{2}/Views/{1}/{0}.cshtml",
        "~/Areas/{2}/Views/{1}/{0}.vbhtml",
        "~/Areas/{2}/Views/Shared/{0}.cshtml",
        "~/Areas/{2}/Views/Shared/{0}.vbhtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.cshtml",
        "~/Areas/{2}/Areas/{1}/Views/{0}.vbhtml"
    }

    MyBase.ViewLocationFormats = {
        "~/Views/{1}/{0}.cshtml",
        "~/Views/{1}/{0}.vbhtml",
        "~/Views/Shared/{0}.cshtml",
        "~/Views/Shared/{0}.vbhtml"
    }

    MyBase.MasterLocationFormats = {
        "~/Views/{1}/{0}.cshtml",
        "~/Views/{1}/{0}.vbhtml",
        "~/Views/Shared/{0}.cshtml",
        "~/Views/Shared/{0}.vbhtml"
    }

    MyBase.PartialViewLocationFormats = {
        "~/Views/{1}/{0}.cshtml",
        "~/Views/{1}/{0}.vbhtml",
        "~/Views/Shared/{0}.cshtml",
        "~/Views/Shared/{0}.vbhtml"
    }

End Sub

Protected Overrides Function CreatePartialView(controllerContext As ControllerContext, partialPath As String) As IView

    Dim area As String = controllerContext.RouteData.DataTokens.Item("Area")
    Dim areaname As String()
    Dim pp As String = partialPath

    If Not area Is Nothing Then
        areaname = area.Split(".")
        If areaname.Length > 1 Then
            pp = pp.Replace(area, areaname(0) & "/Areas/" & areaname(1))
        End If
    End If

    Return MyBase.CreatePartialView(controllerContext, pp)
End Function

Protected Overrides Function CreateView(controllerContext As ControllerContext, viewPath As String, masterPath As String) As IView

    Dim area As String = controllerContext.RouteData.DataTokens.Item("Area")
    Dim areaname As String()
    Dim vp As String = viewPath
    Dim mp As String = masterPath
    If Not area Is Nothing Then
        areaname = area.Split(".")
        If areaname.Length > 1 Then
            vp = vp.Replace(area, areaname(0) & "/Areas/" & areaname(1))
            mp = mp.Replace(area, areaname(0) & "/Areas/" & areaname(1))
        End If
    End If

    Return MyBase.CreateView(controllerContext, vp, mp)
End Function

Protected Overrides Function FileExists(controllerContext As ControllerContext, virtualPath As String) As Boolean

    Dim area As String = controllerContext.RouteData.DataTokens.Item("Area")
    Dim areaname As String()
    Dim vp As String = virtualPath
    If Not area Is Nothing Then
        areaname = area.Split(".")
        If areaname.Length > 1 Then
            vp = vp.Replace(area, areaname(0) & "/Areas/" & areaname(1))
        End If
    End If
    Return MyBase.FileExists(controllerContext, vp)
End Function
End Class 
```

我已经修改了主应用程序`Global.asax`文件以获取新的视图引擎：

```
Imports System.Web.Http
Imports System.Web.Optimization

Public Class MvcApplication
    Inherits System.Web.HttpApplication

    Sub Application_Start()
        AreaRegistration.RegisterAllAreas()

        WebApiConfig.Register(GlobalConfiguration.Configuration)
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters)
        RouteConfig.RegisterRoutes(RouteTable.Routes)
        BundleConfig.RegisterBundles(BundleTable.Bundles)

        ViewEngines.Engines.Clear()
        ViewEngines.Engines.Add(New MyExtendedRazorViewEngine())
    End Sub
End Class 
```

启动浏览器并为我的主应用程序调用 Home 控制器后，我看到了正确的页面和布局渲染。当我转到我的插件模块的索引的 Home 控制器操作时，索引视图再次正确呈现，`_Layout.vbhtml`并从主应用程序中获取。

但是，当我为插件测试区的索引视图调用 Home 控制器操作时，我只能看到索引页面视图呈现，但`_Layout.vbhtml`主应用程序中没有包含主控。

为了让插件可插入模块下方的区域视图呈现主应用程序的主布局模板，我缺少什么？

# visual-studio-2008 - 具有多个同名源文件的 VisualStudio 项目？

> ID：14364362
> 
> 赞同：13
> 
> 时间：2013-01-16T17:38:00.607
> 
> 标签：visual-studio-2008, visual-c++, filenames

我有一个较大的 C++ 项目，源文件组织在多个文件夹中（在文件系统上）。

在其中两个文件夹中，我有同名的文件。例如

```
\MyProject\foo\Blurp.cpp
\MyProject\foo\File.cpp
\MyProject\bar\File.cpp
\MyProject\bar\Knoll.cpp 
```

该项目是跨平台的，我在 linux 和 OSX 上使用 autoconf，但必须在 W32 上使用 MSVC（由于我在 W32 上使用的一些第 3 方 C++ 库以及跨编译器的 C++ 二进制接口不兼容）

在 MSVC 方面，该项目也被组织成多个“过滤器”（那些虚拟文件夹）（名称大致对应于文件所在的目录），所以我可以区分它们。

现在的问题是，当我构建项目时，MSVC 将目标文件放在一个平面目录中，我最终得到：

```
\MyProject\Release\Blurp.obj
\MyProject\Release\File.obj
\MyProject\Release\Knoll.obj 
```

可以看出，只有一个`File.obj`，所以缺少一个二进制对象。显然，链接器会抱怨，因为它找不到在那个丢失的目标文件中定义的类/函数/...。

*有没有办法告诉 MSVC 根据这些文件所在的目录（或过滤器）创建具有唯一名称的目标文件？*

我想像：

```
\MyProject\Release\foo\Blurp.obj
\MyProject\Release\foo\File.obj
\MyProject\Release\bar\File.obj
\MyProject\Release\bar\Knoll.obj 
```

或者

```
\MyProject\Release\foo-Blurp.obj
... 
```

管他呢。我知道的所有其他构建系统（CMake、autotools）都能够处理多个同名文件。

这个问题类似于[3729515](https://stackoverflow.com/questions/3729515)，但我目前坚持使用 VS2008。（为 VS2008 建议的解决方案 - 为每个有问题的文件设置对象目录 - 在理论上确实有效，但出于实际原因我想避免）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-08T11:54:08.457

也许您可以将项目范围的“对象文件名”（配置属性->C/C++->输出文件）设置为

```
$(IntDir)%(RelativeDir) 
```

它使用源文件的相对源文件夹。注意`%`, 但是如果你的源文件位于你的项目目录之外，这会变得很难看，包含`..\`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-17T07:01:00.000

您可以为冲突的一个（或两个）文件设置*特定于文件的*项目设置，并将“对象文件名”属性设置为：

```
$(InputDir)\$(IntDir)\ 
```

只需右键单击文件名而不是项目名称即可仅为该文件设置属性。

例如，如果您这样做，`\MyProject\foo\File.cpp`则该源文件的目标文件将转到，`\MyProject\foo\Release\File.obj`因此它不会与`\MyProject\bar\File.cpp`.

这样做的缺点是它可能会使您的源代码树与编译器输出混淆（但希望不会太多），而且 - 更糟糕的是 - 特定于文件的项目设置往往会被遗忘/隐藏，因为它们没有被调用IDE。如果某个时候你（或其他人）需要改变一些东西，那么为什么构建对于特定文件的行为如此奇怪，直到有人用它搞砸了半天，直到他们明白发生了什么，这可能是一个谜在。

我个人更喜欢项目范围的设置`$(InputDir)\$(IntDir)\`会导致目标文件转到相对于源文件的目录，但实际上它作为项目级别设置根本无法正常工作。在那种情况下，VS 仍然只设置一次输出目录，它最终相对于列表中的第一个源文件。然后链接器对它应该在哪里查找目标文件感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-09T19:39:37.707

采用

```
$(IntDir)%(Directory) 
```

作为“对象文件路径”。

`%(Directory)`包含没有卷和文件名本身的文件的绝对路径。该解决方案至少应该在 VS 2019 中工作，并且可以直接应用于项目。

# html - 从 SquareSpace 迁移的网站的许可/提取字体

> ID：14364364
> 
> 赞同：1
> 
> 时间：2013-01-16T17:38:07.737
> 
> 标签：html, css, fonts, font-face, squarespace

我们正在将 SquareSpace 网站迁移到另一个 CMS。我们保持相同的网站设计和代码。该网站似乎使用的是通过 fonts.com 获得许可的字体。确定这些字体是什么并正确许可它们以在 Squarespace 之外使用的最佳方法是什么？一些定义的字体我找不到对应的字体。例如，我知道该网站使用以下字体：

*   Gill Sans W01 培养基
*   Gill Sans W01 灯
*   .. 可能还有更多

任何人都可以提供的任何帮助都会很棒。

# primefaces - Primefaces 阻止/禁用计划中的编辑

> ID：14364366
> 
> 赞同：1
> 
> 时间：2013-01-16T17:38:23.893
> 
> 标签：primefaces, schedule

您如何防止在日程表上编辑/移动事件？我可以重置 moveEvent() 上的日期，但这不会阻止某人拖动它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:52:31.753

1) 拖动：使用可拖动属性`<p:schedule>`将其设置为 false 或将其绑定到 bean 属性。

2）编辑：从eventSelect中移除监听器。

```
<p:schedule value="#{scheduleController.eventModel}" draggable="false" widgetVar="myschedule">
    <p:ajax event="dateSelect" listener="#{scheduleController.onDateSelect}" oncomplete="eventDialog.show()" />
 <!--   <p:ajax event="eventSelect" listener="NOBODY" update="NOTHING"  Oncomplete="REMOVE ME" /> -->
    <p:ajax event="eventMove" listener="#{scheduleController.onEventMove}" update="formNotificacao" />
    <p:ajax event="eventResize" listener="#{scheduleController.onEventResize}" update="formNotificacao" />
</p:schedule> 
```

PS：您没有指定 PF 版本，我使用的是 3.3.1
PS2：如果您留下注释行，您的 JSF 可能会抛出错误[www.mkyong.com/jsf2/how-to-use-comments-in-jsf-2 -0/](http://www.mkyong.com/jsf2/how-to-use-comments-in-jsf-2-0/)

# algorithm - 两个纬度/经度点之间的谷歌地图距离计算？

> ID：14364369
> 
> 赞同：0
> 
> 时间：2013-01-16T17:38:30.937
> 
> 标签：algorithm, google-maps, distance, calculator, postal-code

什么是最好的方法（或）是否有谷歌的方法已经可以计算`Straight Line`两点之间的简单距离，基于 Lat/Lng 甚至邮政/邮政编码是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:29:08.103

我自己从其他地方找到了答案。

是的，谷歌已经有一个本地解决方案，在： [https ://developers.google.com/maps/documentation/javascript/reference?hl=en-US#spherical](https://developers.google.com/maps/documentation/javascript/reference?hl=en-US#spherical)

我需要做的就是调用该方法：'google.maps.geometry.spherical.computeDistanceBetween (latLngA, latLngB);'

（当然我还需要包含附加/必需的“.js”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:45:43.433

“最佳”是一个相当模糊的标准。如果您能够假设地球是一个完美的球体，那么您需要一个简单的大圆距离公式。参见例如[Wikipedia 文章](http://en.wikipedia.org/wiki/Great-circle_distance)。有了这个假设，您的距离可能会偏离不到 0.5 个百分点。

地球的实际形状实际上是一个略呈[扁圆形的球体](http://en.wikipedia.org/wiki/Figure_of_the_Earth)。这种形状的表面距离计算起来更复杂。请参阅[Ed Williams](http://williams.best.vwh.net/gccalc.htm)在 javascript 中的工作。也许他会让你使用他的代码。如果没有，他会给出相关的参考资料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:03:31.217

免费解决方案位于[http://ezcmd.com/apps/app_ezip_locator#ezip_locator_api](http://ezcmd.com/apps/app_ezip_locator#ezip_locator_api)

可以帮助您以英里或公里为单位查找两个经纬度坐标之间的距离。

或者，您可以尝试[http://ezcmd.com/apps/app_geo_postal_codes#geo_postal_codes_api](http://ezcmd.com/apps/app_geo_postal_codes#geo_postal_codes_api)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T17:51:39.410

“最佳”方式取决于几件事。您能否提供更多关于准确度和/或所需应用程序的背景信息？google.maps.DirectionsService 类将允许您使用 javascript 计算客户端的行驶距离，但如果您想要准确的直线距离，您可以使用 postgresql + postgis 服务器端。根据所涉及的点和距离的范围，使用 lat/lng 计算准确的距离***可能***会因地球的不同投影而变得棘手。

# c# - TPL 数据并行问题

> ID：14364374
> 
> 赞同：1
> 
> 时间：2013-01-16T17:38:39.520
> 
> 标签：c#, .net-4.0, task-parallel-library

我有一种情况是并行处理这组数据，最后我想知道总共有多少个数据处理成功了。[我按照http://msdn.microsoft.com/en-us/library/dd460703.aspx](http://msdn.microsoft.com/en-us/library/dd460703.aspx)和[http://reedcopsey.com/2010/01/22/parallelism-in-net](http://reedcopsey.com/2010/01/22/parallelism-in-net-part-4-imperative-data-parallelism-aggregation/)上的示例提供了以下虚拟代码[-part-4-imperative-data-parallelism-aggregation/](http://reedcopsey.com/2010/01/22/parallelism-in-net-part-4-imperative-data-parallelism-aggregation/)

```
 public void DoWork2()
    {
        int sum = 0;
        Parallel.For<int>(0, 10,
            () => 0,
            (i, lockState, localState) =>
            {
                DummyEntity entity = DoWork3(i);
                if (entity != null)
                {
                    Console.WriteLine("Processed {0}, sum need to be increased by 1.", i);
                    return 1;
                }
                else
                {
                    Console.WriteLine("Processed {0}, sum need to be increased by 0.", i);
                    return 0;
                }
            },
            localState =>
            {
                lock (syncRoot)
                {
                    Console.WriteLine("Increase sum {0} by {1}", sum, localState);
                    sum += localState;
                }
            }
            );
        Console.WriteLine("Total items {0}", sum);
    }

    private DummyEntity DoWork3(int i)
    {
        if (i % 2 == 0)
        {
            return new DummyEntity();
        }
        else
        {
            return null;
        }
    } 
```

但是，每次我运行时结果都会发生变化。我认为代码有问题。但无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:56:22.473

您的问题是您在重载中的选择。您已经存储了本地状态信息以最大限度地减少全局状态的使用，但您没有使用本地状态。

`localState`如果您从给出的示例中注意到他们在循环主体中使用小计（您所称的）：

```
subtotal += nums[j];
return subtotal; 
```

将此与您的代码进行比较（更简洁一些）：

```
if (entity != null)
{
    return 1;
}
else
{
    return 0;
} 
```

没有提及`localState`，因此您实际上已经丢弃了一些答案。如果您将其更改为阅读：

```
if (entity != null)
{
    return localState + 1;
}
else
{
    return localState;
} 
```

您将在命令行上找到以下答案（对于这个给定的问题）：

```
Total items 5 
```

使用*本地状态*是为了减少对共享状态的访问。

这是使用 0..50 作为范围的片段：

```
Processed 22, sum need to be increased by 1.
Processed 23, sum need to be increased by 0.
Increase sum 0 by 1
Processed 8, sum need to be increased by 1.
Processed 9, sum need to be increased by 0.
Processed 10, sum need to be increased by 1.
Processed 11, sum need to be increased by 0.
Increase sum 1 by 2
Increase sum 3 by 8
Increase sum 11 by 10
Processed 16, sum need to be increased by 1.
Processed 17, sum need to be increased by 0.
Processed 18, sum need to be increased by 1.
Increase sum 21 by 4
Total items 25 
```

# javascript - 加载后获取 iframe 的内容

> ID：14364377
> 
> 赞同：0
> 
> 时间：2013-01-16T17:38:45.800
> 
> 标签：javascript, jquery

我想实现休闲目标。我想通过单击一个按钮来获取在一个输入中输入的域名并将其加载到 iframe 中。我遇到的问题是在 iframe 中加载特定站点后，如何在 iframe 中获取已加载站点的 DOM？我需要通过单击它来保存我从 iframe 中新加载的站点中选择的元素的确切路径。任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:50:19.510

您可以通过属性访问`<iframe>`的内容。`contentDocument`

```
var iFrameContent = $('myIFrame')[0].contentDocument;
$(iFrameContent).find('.mySelector').text(); 
```

我还应该指出，`<iframe>`只有当 的 与您的脚本来自同一个域时，才能访问 的`src`内容`<iframe>`。如果`src`来自`<iframe>`任何其他域，浏览器将拒绝访问`<iframe>`内容。

这是一个[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)考虑因素。

**更新：**

要绕过 CORS 限制，您必须为属于 的 URL 编写一个服务器端代理`src`（`<iframe>`这可能非常简单）。

如果我要在 ASP.Net 中做这样的事情（例如），我会编写一个 Web 服务：

1.  将实际 URL 作为`String`参数。
2.  使用`HTTPWebRequest`对象（或类似对象）获取 URL 内容。
3.  将其返回给浏览器。

然后您可以将您的设置`<iframe>` `src`为“ `http://mysite.com/getURLService?url=www.lalala.com`”并获取内容，因为内容现在由“http://mysite.com”提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:40:51.227

你用`.contents()`

`like $("iframe").contents().find();`ETC

# jquery-ui - jQueryUI Sortable - 如果包含和句柄设置，则无法将大元素拖动到顶部或底部

> ID：14364379
> 
> 赞同：5
> 
> 时间：2013-01-16T17:38:52.933
> 
> 标签：jquery-ui, jquery-ui-sortable

对于我要解决的问题，我有一个表格，每一行都有唯一的内容。允许通过句柄对行重新排序，并且每行的内容并不总是具有统一的高度。有时会在一行中出现大量文本和/或图像。

还可以有多个表的行可以重新排序，因此我使用包含属性来防止拖到其他区域以及在拖到所需区域之外时发生的其他问题。

问题是当我尝试将“高”行拖到订单的顶部或底部时，而顶部和底部相比之下是“短”的。本质上，我不允许将高大的行拖到这些位置。我一直在寻找解决方案，但发现不足。任何帮助，将不胜感激。

这里的工作示例：http: [//jsfiddle.net/jeffvoigt/XyPzf/](http://jsfiddle.net/jeffvoigt/XyPzf/)

中间的两行都不能拖到列表的顶部或底部。

HTML：

```
<div class="container">
<table id="sortable">
  <tr class="odd">
    <td><p>[=]</p></td>
    <td>Single Line of Text</td>
  </tr>
  <tr class="even">
    <td><p>[=]</p></td>
    <td>Aenean porta, tellus quis auctor elementum, risus ante ornare augue, eu elementum nunc libero ut nisi. Pellentesque sed vestibulum tellus. Proin convallis enim eget felis iaculis viverra vestibulum lorem semper. Aliquam imperdiet viverra lorem, ut dignissim felis laoreet vel. Suspendisse fermentum neque eu est vestibulum bibendum. Maecenas dignissim egestas tempor. Ut tincidunt metus sed felis ornare nec sollicitudin risus gravida. Duis vitae mauris quis risus ultricies malesuada. Nulla facilisi. Phasellus fringilla, arcu eget congue sollicitudin, lorem elit ullamcorper ante, non fermentum orci mauris at tellus. Maecenas suscipit sodales molestie. Mauris luctus porta dui non volutpat.</td>
  </tr>
  <tr class="odd">
    <td><p>[=]</p></td>
    <td><img src="http://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></td>
  </tr>
  <tr class="even">
    <td><p>[=]</p></td>
    <td>Single Line of Text</td>
  </tr>
</table>
</div> 
```

Javascript：

```
$( "#sortable tbody" ).sortable({
  axis: "y",
  containment: ".container",
  cursor: "move",
  handle: "p"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:21:28.017

问题是你的句柄的位置决定了排序相对于它上面的句柄的 Y 位置。因此，为了演示，请转到 jsFiddle 并将 valign=top 添加到您的大文本区域。句柄移动到可排序元素的顶部，当您将其拖到短文本行的顶部时，它将卡入到位，但您无法将其排序到底部。但是，如果您将 fiddle 更新为 valign=bottom，您可以将其捕捉到底部而不是顶部。

解决方案是使您的整个内容区域成为可排序的句柄，或者将句柄移到内容的左侧（仅使“可排序”区域）并仅拖动句柄（而不是内容），然后允许内容区域以根据新排序进行更新。

基本上，它需要进行一些重新设想或设计以使其正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T12:24:36.740

我遇到了同样的问题。这是快速解决方案：

```
 $('.collections').sortable({
  handle: 'h3',
  axis: 'y',
  containment: 'parent',
  items: '.collection',
  cursor: 'move',
  tolerance: 'pointer',
  scroll: true,
  beforeStop: function(event, ui) {
    var lastElemTop = $('.collections .collection:last-child').position().top;
    var currElemTop = ui.position.top;
    var currElemHeight = ui.item.height();
    if (currElemTop + currElemHeight * 2 > lastElemTop) {
      $('.collections .collection:last-child').insertBefore(ui.item);
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T20:23:45.193

我遇到了同样的问题。似乎只有在 jQuery 可排序列表下方没有内容或间距时才会发生这种情况。

只需添加一些间距（例如`<div id="end-of-page-spacer" style="height: 500px;"></div>`），我就可以将大行拖到位于列表底部的较小行下方。

# c# - Enum 类型字段上的 EntityObjectDatasource 和 where 子句

> ID：14364384
> 
> 赞同：2
> 
> 时间：2013-01-16T17:39:09.923
> 
> 标签：c#, asp.net, entity-framework

我的`Entity`模型中有一个`Enumeration`类型属性。

我将 a`Gridview`与 an绑定`EntityDataSource`到它。到现在为止，一切都很好。

但是如何`WHERE`在 a 上指定一个子句`MyEntity.MyEnumProperty`？

这是我到目前为止所尝试的：

```
Convert.ToInt32(it.MyEnumProperty) = @MyParam // Does not work
CONVERT(it.MyEnumProperty AS INT) = @MyParam // Still does not work 
```

我也尝试将这两个值都设置`Int32`为`DbType`my ，但它失败了。`params`另外，我尝试将其绑定到控件或指定默认值，但总是失败，说无法将`String`值转换为`MyEnum`.

我知道这可能很简单，但我对谷歌的所有研究都没有给出答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:42:47.097

最后很简单。

最简单的方法是手动指定我的 where 子句并转换它。我在某个地方找到了这个答案，说这是不可能的。不是，但仅在以前的版本中，但与 EF4 完美配合。

这是我的 where 子句：

```
<asp:EntityDataSource [...]
    Where="CAST(it.MyEnumProperty AS System.Int32) = @MyParamInWhereClauseWith">
    <WhereParameters>
        <asp:Parameter Name="MyEnumProperty" DbType="Int32" DefaultValue="1" />
    </WhereParameters>
</asp:EntityDataSource> 
```

# sql - 如何以不同的日期时间格式搜索字符串值？

> ID：14364387
> 
> 赞同：0
> 
> 时间：2013-01-16T17:39:16.530
> 
> 标签：sql, sql-server-2008, tsql

我尝试执行下面给出的 SQL 选择查询。Tarih 是一个`datetime`领域。表中的 Tarih：`2013-01-09 00:00:00.000` 但我的搜索值为`09.01.2013`.

```
select * from [BankaEntegrasyonEslesmeyenler] as x  where x.Tarih='09.01.2013' 
```

> 99 6631 220220059 BÜLENT ÖZCAN
> 28.3200 2831.5500 **2013-01-09 00:00:00.000** TL 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:42:30.863

将您的日期值作为参数或以通用 ISO 格式（例如 yyyymmdd）传递，例如

'20130109'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:00:51.570

试试这个

```
SELECT * FROM [BankaEntegrasyonEslesmeyenler] AS x  WHERE CONVERT (CHAR(10), x.Tarih, 104) = '09.01.2013' 
```

格式化日期`dd.mm.yyyy`并比较没有时间的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:46:09.353

```
SELECT CONVERT(VARCHAR(8), GETDATE(), 3) AS [DD/MM/YY] 
```

`dd/mm/yy`以格式选择日期

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:16:03.027

您对它的存储方式感到困惑。2013-01-09 00:00:00.000 只是默认的显示格式。

如果你想要那种格式，那么试试这个

```
select CONVERT ( char(10) , getdate() , 104 )

select CONVERT ( char(10) , x.Tarih , 104 ) from .... 
```

[转换和转换 (Transact-SQL)](http://msdn.microsoft.com/en-US/library/ms187928%28v=SQL.90%29.aspx)

# android - android：将文件保存到特定文件夹以供以后检索

> ID：14364391
> 
> 赞同：6
> 
> 时间：2013-01-16T17:39:30.867
> 
> 标签：android, outputstream

我正在处理绘图部分，并编写了以下代码将图像保存到指定的相机文件夹。但是，我宁愿使用应用名称创建一个新文件夹并将图像保存到该文件夹​​中。怎么可能做到这一点？

我还想稍后从该特定文件夹中检索图像文件。

谢谢！

## 当前代码：

```
 String fileName = "ABC";

      // create a ContentValues and configure new image's data
      ContentValues values = new ContentValues();
      values.put(Images.Media.TITLE, fileName);
      values.put(Images.Media.DATE_ADDED, System.currentTimeMillis());
      values.put(Images.Media.MIME_TYPE, "image/jpg");

      // get a Uri for the location to save the file
      Uri uri = getContext().getContentResolver().insert(Images.Media.EXTERNAL_CONTENT_URI, values);

      try 
      {                                               
         OutputStream outStream = getContext().getContentResolver().openOutputStream(uri);

         bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);

         outStream.flush(); // empty the buffer
         outStream.close(); // close the stream 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T17:48:44.650

试试这个可能对你有帮助。

```
public void saveImageToExternalStorage(Bitmap image) {
    String fullPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/directoryName";
    try
    {
        File dir = new File(fullPath);
        if (!dir.exists()) {
        dir.mkdirs();
        }
        OutputStream fOut = null;
        File file = new File(fullPath, "image.png");
        if(file.exists())
            file.delete();
        file.createNewFile();
        fOut = new FileOutputStream(file);
        // 100 means no compression, the lower you go, the stronger the compression
        image.compress(Bitmap.CompressFormat.PNG, 100, fOut);
        fOut.flush();
        fOut.close();
    }
    catch (Exception e)
    {
        Log.e("saveToExternalStorage()", e.getMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-10T06:57:57.120

经过多次尝试，此方法有效。

```
private String getFilename() {
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath,AUDIO_RECORDER_FOLDER);

    if(!file.exists()){
            file.mkdirs();
    }

    return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + ".mp3");
} 
```

# c# - 与类型推断有关的界限是什么？

> ID：14364392
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:39:33.247
> 
> 标签：c#, generics

> **可能重复：**
> [谁最后决定什么是通用类型？](https://stackoverflow.com/questions/9149389/who-actually-last-decide-what-is-the-generic-type)

正如我的问题标题所说，任何人都可以向我解释**什么是界限（上限、下限、精确界限）以及它们如何通过示例在类型推断中发挥作用？**

考虑简单的代码：

```
void func<T> ( T firstparam , T secondparam) { } 
```

来电者称它为

```
func( 23 , 23.23 ); 
```

类型推断过程发生时的界限是什么以及推断过程如何使用它们？如果我提出的示例是微不足道的并且没有任何上限等，请包括您自己的示例来代表这个想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T17:51:51.390

在您的示例中，类型推断没有界限。如果你这样称呼它

```
 func( 23 , 23.23 ); 
```

那么类型的候选者将是`int`and `double`。`Int`可以隐式转换为`double`但不能反之亦然，因此固定类型`T`为`double`. 这与边界无关，而是类型兼容性。

但是，如果你这样称呼它

```
func( new object() , 23.23 ); 
```

那么上限为`T`，`object`下限为`double`。在这种情况下，固定类型`T`将是`object`.

Eric Lippert在博客文章**“**[我们如何确保方法类型推断终止？](http://blogs.msdn.com/b/ericlippert/archive/2012/10/02/how-do-we-ensure-that-method-type-inference-terminates.aspx)

Jon Skeet在他的精彩书籍 C# in Depth中详细描述了类型推断的过程**9.4.3 两阶段类型推断。**请仔细阅读他对清单**9.11类型推断的描述**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:46:10.357

我不知道您所说的*类型 bounds*是什么意思，但在您的示例中，`23`is an `int`，`23.23`是 double ，并且 an`int`可以自动转换为 a `double`。因此，由于编译器可以将两个参数视为相同的类型 ( `double`)，因此它推断`T`为`double`。

# java - ListView 和 getView 的简单片段

> ID：14364395
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:39:46.117
> 
> 标签：java, android, listview

我想要一个简单的 a 片段，`ListView`它由从也使用`getView()`方法的数据集数组中获取的项目组成。`ListView`仅包含与文本和图像不同的文本条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:41:56.650

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

```
 <TextView android:id="@+id/txtTitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:textStyle="bold"
    android:textSize="22dp"
    android:textColor="#000000"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" /> 
```

@Override public View getView(int position, View convertView, ViewGroup parent) { View row = convertView; WeatherHolder持有人=空；

```
 if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new WeatherHolder();
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

        row.setTag(holder);
    }
    else
    {
        holder = (WeatherHolder)row.getTag();
    }

    Weather weather = data[position];
    holder.txtTitle.setText(weather.title);

    return row;
} 
```

# file - 用 bash 读取文本文件的前 8 个字符

> ID：14364397
> 
> 赞同：45
> 
> 时间：2013-01-16T17:39:51.757
> 
> 标签：file, bash, character

我想只读取文本文件的前 8 个字符并将其保存到 bash 中的变量中。有没有办法只使用 bash 来做到这一点？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-16T17:47:05.727

您可以要求`head`读取多个字节。对于您的特定情况：

```
$ head -c 8 <file> 
```

或者在一个变量中：

```
foo=$(head -c 8 <file>) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T17:47:34.350

在 bash

```
help read 
```

你会看到你可以：

```
read -r -n 8 variable < .the/file 
```

如果你想阅读前 8 个，独立于分隔符，

```
IFS= read -r -n 8 variable < .the/file 
```

但避免使用

```
.... | while IFS= read -r -n 8 variable 
```

因为，在 bash 中，“|”之后的部分 在子shell中运行：“变量”只会在该子shell中更改，并且在返回到当前shell时会丢失新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:45:16.100

您可以在 bash 中使用数组并仅选择第一个字符。Advanced Bash Scripting guide有很好的例子如何使用数组。

# css - 首字母下沉/首字母大写

> ID：14364399
> 
> 赞同：0
> 
> 时间：2013-01-16T17:39:58.173
> 
> 标签：css

我试图在标题上获得首字下沉（或首字母大写；无论你怎么称呼它）效果。这是我想要完成的一个例子。

![例子](../Images/fed176d4f9b4ea0dab15b358f835052f.png)

我发现使用浮动的内联跨度标签取得了成功，但是当标题换行到第二行时，段落部分会中断到自己的行上。请参阅this jsfiddle以获取示例并调整查看窗口以查看我所指的效果。[http://jsfiddle.net/fEn4U/](http://jsfiddle.net/fEn4U/)

前两个 jsfiddle 示例中的结构（带有`h1`and`p`标记）是我希望拥有 html 的方式。但如果这是唯一的解决方案，我可以`span`在标签中解决。`p`如您所见，与使用 span 和 p 标签相比，我离使用 h1、p 结构的解决方案更远。

另请注意，容器将是固定宽度，其中的内容将是动态的，因此我不能总是依赖标题分成两行或停留在一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:43:13.110

尝试制作小文本`inline-block`并设置最大尺寸。

[http://jsfiddle.net/fEn4U/2/](http://jsfiddle.net/fEn4U/2/)

```
p {
  display: inline-block;
  max-width:150px;
} 
```

# android - 数据传输时出现未知主机异常

> ID：14364400
> 
> 赞同：5
> 
> 时间：2013-01-16T17:39:58.767
> 
> 标签：android

我需要向 PHP 服务器发送一个文件和一些数据。我为此使用一个线程和一个每 15 分钟执行一次的服务。当网络可用时它工作正常。但是当不在网络中时它停止发送文件（如果文件的大小相对较大）。在应用日志后，我看到，没有获取来自服务器的响应。它得到了 struk。此外，它在第一次尝试发送文件时发送 Unknownhost 异常。什么可以是问题吗？请帮忙。

这是代码： -

```
public void run(){

    while (keepRunning){
        isRunning = true;

        SystemClock.sleep(900000);

        File tempFile = new File(Environment.getExternalStorageDirectory() + "/Android/data/com.wherephone.helloandroid/log_files/", "barcode_log");
        File tempFile1 = new File(Environment.getExternalStorageDirectory() + "/Android/data/com.wherephone.helloandroid/log_files/", "data_log.txt");

        if(tempFile.exists())
        {           

        Log.d(TAG," in keep running");  

        String[] files =  (new File(Environment.getExternalStorageDirectory() + PATH)).list();

        Log.d(TAG," below file list");  

        SimpleDateFormat df3 = new SimpleDateFormat("yyyyMMdd_HHmmss");
        Date curDate = new Date();
        String s= "data_log";//df3.format(curDate);

        Log.d("log",files[0]);

        File file = new File(Environment.getExternalStorageDirectory() + "/Android/data/com.wherephone.helloandroid/log_files/","barcode_log");

        String new_file_name =s+".txt";
        // File (or directory) with new name
        File file2 = new File(Environment.getExternalStorageDirectory() + "/Android/data/com.wherephone.helloandroid/log_files/",new_file_name);
        // Rename file (or directory)
        if(!tempFile1.exists()){

            boolean success = file.renameTo(file2);
            Log.d(TAG," file name created");

            if (success) {
                // File was not successfully renamed

                Log.d(TAG," file rename success");
            }
            else
            {
                Log.d(TAG," file not rename success");
            }
        } 

        ts.writeBarcodeToFile(" S L", "");
        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        String pathToOurFile = Environment.getExternalStorageDirectory() + "/Android/data/com.wherephone.helloandroid/log_files/"+new_file_name;//zipName;
        String urlServer = "http://xyz.com/xyz.php?fname="+s+".txt";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary =  "V2ymHFg03ehbqgZCaKO6jy";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 2*1024*1024;

        FileInputStream fileInputStream=null;

        try
        {

        ts.writeBarcodeToFile(" in try sl", "");
        fileInputStream = new FileInputStream(new File(pathToOurFile) );

        InetAddress iAddr = InetAddress.getByName("http://xyz.com");
        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);

        connection.setConnectTimeout(20000);

        outputStream = new DataOutputStream( connection.getOutputStream() );
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        ts.writeBarcodeToFile("before while sl ", "");
        while (bytesRead > 0)
        {
        outputStream.write(buffer, 0, bufferSize);
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        ts.writeBarcodeToFile("after while sl ", "");
        // Responses from the server (code and message)

        try{
        int serverResponseCode = connection.getResponseCode();
        String serverResponseMessage = connection.getResponseMessage();
        if(serverResponseCode==200)
        {
            ts.writeBarcodeToFile("in if server response ", "");
            //ts.writeBarcodeToFile("L S", ""); 
            tempFile1.delete();
        }
        else
        {
            ts.writeBarcodeToFile("in else server response ", "");
            ts.writeBarcodeToFile(serverResponseCode+"", "");

        }

        }
        catch(Exception e)
        {
            try{

                outputStream.flush();
                outputStream.close();
                }
                catch(Exception ex)
                {

                }

            ts.writeBarcodeToFile("in url catch response "+e.toString(), "");
            connection.disconnect();

        }

        ts.writeBarcodeToFile("after server  sl ", "");
        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
        ts.writeBarcodeToFile("after close  sl ", "");
        }
        catch (java.net.SocketTimeoutException e) {
            try{
                fileInputStream.close();
            outputStream.flush();
            outputStream.close();
            }
            catch(Exception ex)
            {

            }
            ts.writeBarcodeToFile("in socketex  sl "+e.toString(), "");
            connection.disconnect();
            } 
        catch (java.io.IOException e) 
            {
            try{
                fileInputStream.close();
                outputStream.flush();
                outputStream.close();
                connection.disconnect();
                }
                catch(Exception ex)
                {

                }
            ts.writeBarcodeToFile("in ioex  sl "+e.toString(), "");

            }
        catch (Exception ex)
        {
            try{
                fileInputStream.close();
                outputStream.flush();
                outputStream.close();
                }
                catch(Exception exy)
                {

                }
            ts.writeBarcodeToFile("in catch  sl "+ex.toString(), "");
            connection.disconnect();
        //Exception handling
        }

        //System.gc();
        }

    }
    isRunning = false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:05:22.270

此问题与连接有关。我也看到当我们在 wifi 上时，我们没有遇到未知主机异常错误（除非我拔下设备）。当设备仅在 3g/4g 上时，我们遇到了未知的主机异常错误。

[您可以尝试使用 HTTP](https://stackoverflow.com/questions/1830130/resume-uploads-using-http)上传类似线程恢复上传的可恢复支持吗？

或编写您自己的协议（块上传）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:21:39.840

You need to use AsyncTask for network operations for android versions 3.x and above..You can not use network operations in main thread....and If file size is big you may have to use wake_lock on service....and if network is not available than simply close your AsyncTask and than again check after 15 min as you are saying in service...use this code for checking network availability in [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

```
public boolean isOnline() {
   if(MyService.CONTEXT !=null){
       ConnectivityManager cm = (ConnectivityManager) MyService.CONTEXT.getSystemService(Context.CONNECTIVITY_SERVICE);
       NetworkInfo netInfo = cm.getActiveNetworkInfo();
       if (netInfo != null && netInfo.isConnectedOrConnecting()) {
       return true;
       }
    }
  return false 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:49:01.617

Android 更高版本必须要快得多。最好在免费方法中使用`AsynTask`do。

```
protected class GetTask extends AsyncTask<Void, Void, Integer> {

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(MainActivity.this,
                "Loading", "Please wait");
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub

        /// Do your stuf

        return 0;
    }

    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);

    }
} 
```

我遇到了同样的问题。我在后台使用过现在工作正常

# c# - 使用 wshttpbinding 在 Internet 上使用 WCF 服务？

> ID：14364406
> 
> 赞同：1
> 
> 时间：2013-01-16T17:40:11.827
> 
> 标签：c#, wcf, wcf-binding, wcf-security, wcf-client

[基本上我在这里](http://www.codeproject.com/Articles/318810/WCF-Service-Method-Level-Security-using-Message-Co)遵循了本教程

并在我的本地机器上启动并运行并正常工作。我已将它部署在 IIS 中并允许必要的防火墙端口，因此我转到位于不同域中的客户端 PC。

我在这台机器上启动了 WCF 测试客户端并输入了 WSDL 的 URL，我能够查看服务调用没有问题。唯一的事情是当我实际尝试使用该方法并发送我的值时，我得到以下响应

**“呼叫者未经服务认证”**

奇怪 - 即使它仍然在本地工作，它也不会在另一台机器上工作。有没有一种特定的方法可以根据我在做什么来配置客户端？

这是我的 web.config

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WCF33.Service1">
        <endpoint address ="" binding="wsHttpBinding" contract="WCF33.IService1" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/WCF33/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

我遵循的教程在消息头中传递了一个密钥并基于该密钥进行身份验证，但这不是问题。我认为它与 wshttp 绑定有关，但我确实需要这种类型的加密。

谁能给我有关如何解决此问题的任何信息/建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:45:45.157

> 我遵循的教程在消息头中传递了一个密钥并基于该密钥进行身份验证，但这不是问题。

您是否在通话中传递了密钥？如果您正在运行的代码期望身份验证标头中有某些内容，并且它不存在可能导致该错误返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:51:09.573

好的，我现在已经解决了这个问题，我有两个主要问题，这个问题实际上最终成为我的第一个障碍。

使用 wshttpbinding，我必须以编程方式配置客户端，创建 wshttpbinding 并将其附加到服务实例。我还必须通过 Windows 凭据。一旦我这样做了，呼叫者已通过身份验证消息就消失了。

错误的下一阶段是应用程序/xml 错误，其中预期的响应与soap 1.2 格式不匹配。这很奇怪，因为出于某种原因，即使绑定服务器端是 wshttp，它在部署时默认为 basichttp。为了解决这个问题，wcf 配置编辑器中有一个映射部分，您可以在其中将协议映射到绑定。在此，http 设置为 basichttp，只需将其更改为 wshttp 即可：)

希望这对某人有所帮助，因为这两个错误似乎无处不在，根本没有答案！

# ruby - 从数组创建对？

> ID：14364407
> 
> 赞同：1
> 
> 时间：2013-01-16T17:40:14.033
> 
> 标签：ruby, arrays

有没有一种简单的方法可以从数组创建对？

例如，如果我有一个数组，`[1,2,3,4]`我将如何尝试返回这个数组？

```
[[1,2], [1,3], [1,4], [2,1], [2,3], [2,4], [3,1], [3,2], [3,4], [4,1], [4,2], [4,3]] 
```

每个元素都与除自身之外的所有其他元素配对，并且允许重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:44:06.893

您可以为此使用[Array#permutation](http://ruby-doc.org/core-1.9.2/Array.html#method-i-permutation)：

```
[1,2,3,4].permutation(2).to_a
# => [[1, 2], [1, 3], [1, 4], [2, 1], [2, 3], [2, 4], [3, 1], [3, 2], [3, 4], [4, 1], [4, 2], [4, 3]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:44:11.030

```
[1,2,3,4].permutation(2).map{ |n| "(#{ n.join(",") })" }
# => ["(1,2)", "(1,3)", "(1,4)", "(2,1)", "(2,3)", "(2,4)", "(3,1)", "(3,2)", "(3,4)", "(4,1)", "(4,2)", "(4,3)"] 
```

# xcode - 我没有获得 iOS 版本 6.0 我如何获得这个？

> ID：14364409
> 
> 赞同：1
> 
> 时间：2013-01-16T17:40:19.213
> 
> 标签：xcode

我的 Xcode 版本是 4.3.2，它显示 Deployment Target max 是 5.1 现在我要如何获得 6.0？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:43:02.193

我不是 IOS 开发人员，但在我看来，您需要 XCode 4.5 来开发 IOS 6 应用程序：

[https://developer.apple.com/devcenter/ios/checklist/](https://developer.apple.com/devcenter/ios/checklist/)

# asp.net-mvc - 级联 DropDownList 的 using 语句中应包含哪个文件？

> ID：14364412
> 
> 赞同：0
> 
> 时间：2013-01-16T17:40:29.323
> 
> 标签：asp.net-mvc, asp.net-mvc-2, html-select

哪个文件应该包含在用于 MVC2 级联 DropDownList 的 using 语句中？

由于参考问题，我收到了一些编译错误。我指的是这篇文章。

[http://stephenwalther.com/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax.aspx](http://stephenwalther.com/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax.aspx)

# php - 扩展 PiP 算法的 MySQL 实现？

> ID：14364417
> 
> 赞同：13
> 
> 时间：2013-01-16T17:40:37.053
> 
> 标签：php, mysql, raycasting, point-in-polygon

我需要*在多边形*MySQL 查询中指出一点。

我已经找到了这两个很好的解决方案：

[http://forums.mysql.com/read.php?23,286574,286574](http://forums.mysql.com/read.php?23,286574,286574)

[光线投射算法的MySQL实现？](https://stackoverflow.com/questions/7573881/mysql-implementation-of-ray-casting-algorithm)

但是这些函数只能检查一个点是否在多边形内。我有一个查询，其中画中画部分应该只是查询的一部分，并检查多边形内的 x 点。

像这样的东西：

`$points = list/array/whatever of points in language of favour`

```
SELECT d.name
FROM data AS d
WHERE d.name LIKE %red%
// just bla bla

// how to do this ?
AND $points INSIDE d.polygon
AND myWithin( $points, d.polygo ) // or 
```

**更新**

我用这样的**MBR**函数进行了尝试：

```
SET @g1 = GeomFromText('Polygon((13.43971 52.55757,13.41293 52.49825,13.53378 52.49574, 13.43971 52.55757))');
SET @g2 = GeomFromText('Point(13.497834 52.540489)');
SELECT MBRContains(@g1,@g2); 
```

G2 不应该在 G1 内，但**MBR**说它是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:11:04.833

所以实际上你的问题是你如何将相同的函数应用于多个值，并且只有当所有对函数的调用都返回 true 时才返回 true。这不是很难。

如果是我，我会将点（以及可选的多边形 - 示例中未显示）放入表中，然后编写一个 MySQL 函数以将光线投射方法应用于每个点 - 如果任何一个交互返回 false，则返回 false，然后返回 true。在下面的示例中，我假设多边形是从 yourpolygon 中获取并由主键标识的，而点由外键标识（使用 zarun 的 mywithin 函数）：

```
 DECLARE FUNCTION allwithin(
     pointSetKey INT) 
 RETURNS INT(1)  
 BEGIN 

 DECLARE current POINT;

 DECLARE check CURSOR FOR SELECT p.point
     FROM yourpoints p
     WHERE p.set=pointSetKey;

 OPEN check;

 nextPoint: LOOP

    FETCH check INTO current;

    IF (0=mywithin(current, yourpolygon)) THEN
         RETURN 0;
    END IF;

 END LOOP;

 RETURN 1;

 END;

 INSERT INTO yourpoints (pointsetkey, point)
 VALUES (
      128,
      GeomFromText('Point(13.497834 52.540489)')
 ),
 (
      128,
      GeomFromText('Point(13.6 52.1)')
 ),
 ....
 ;

 SELECT allwithin(128
 , GeomFromText('Polygon((13.43971 52.55757,13.41293 52.49825,13.53378 52.49574, 13.43971 52.55757))')
 ); 
```

或者...

```
 SELECT COUNT(*)
 FROM yourpoints p
 WHERE p.set=128
 AND mywithin(p.point
      , GeomFromText('Polygon((13.43971 52.55757,13.41293 52.49825,13.53378 52.49574, 13.43971 52.55757))')
      ); 
```

将为您提供不在多边形内的点数（当您只想知道是否没有点在外面时，这是相当昂贵的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T12:59:20.357

如果你这样做怎么办

```
SET @g1 = GEOMFROMTEXT('Polygon((13.43971 52.55757,13.41293 52.49825,13.53378 52.49574, 13.43971 52.55757))');
SET @g2 = GEOMFROMTEXT('Point(13.497834 52.540489)');
SELECT  ST_Contains(@g1,@g2); 
```

而不是 MBRContains？据我了解 MySQL 空间文档。MBR* 函数是最小边界矩形函数，因此它会显示您的点是否在几何体上的最小矩形内，但不在几何体本身内（如果它是不规则多边形并且点在 MBR 内而不是在多边形）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T20:35:19.470

在我看来如下：您需要测试多个点是否在多边形中。如果都是，那么它们的凸包也是如此。找出它们的凸包（基本上：顺时针或逆时针排列它们），这将创建一个多边形。现在测试新多边形是否在 d.polygon 内。

# windows - 最新版本 Chromium Embedded Framework 3

> ID：14364425
> 
> 赞同：2
> 
> 时间：2013-01-16T17:41:06.310
> 
> 标签：windows, delphi, delphi-xe2, chromium, chromium-embedded

在哪里可以找到适用于 Delphi 的 Chromium Embedded Framework 3 的最新版本？我使用 TortoiseSVN 从这个页面下载了它：

[http://code.google.com/p/dcef3/](http://code.google.com/p/dcef3/)

因为CEF1出了太多问题，而且是很老的版本，有一个24版本的下载，但是最新版本是823，请问哪里可以找到Delphi-XE2的最新版本？

非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T20:02:34.047

这里提到了三个项目：

*   [铬嵌入](https://bitbucket.org/chromiumembedded/)，最新版本 996
*   [delphichromiumembedded](http://code.google.com/p/delphichromiumembedded/)，最新版本 147
*   [dcef3](https://github.com/hgourvest/dcef3) , 最新版本 24

这是三个不同的项目。您无法跨项目比较修订号。这是一个苹果和橘子的比较。您将 dcef3 的修订版 24 与其他项目的修订版 823 进行比较。这种比较简直毫无意义。

我怀疑有些混乱是因为 dcef3 和 delphichromiumembedded 项目依赖于 chromiumembedded。因此，您可能会看到，在 dcef3 和 delphichromiumembedded 项目中，提到了 chromiumembedded 修订号。这确实令人困惑，您在浏览这些项目时需要保持清醒的头脑。

您感兴趣的项目是 dcef3。所以你应该使用最新的版本，截至今天，版本 24。

我不得不说这是一个了不起的项目。令人难以置信的是，我们可以从 svn 存储库中提取此代码，立即构建源代码，并在不到一分钟的时间内在 VCL 表单中拥有一个正常运行的 Chromium Web 浏览器，我可以从中编辑这篇文章。太棒了！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T19:22:26.003

[Delphi Chromium Embedded 3 项目](http://code.google.com/p/dcef3/)的最新版本可从项目的 Google Code Subversion 存储库中获得。项目的[源码签出页面](http://code.google.com/p/dcef3/source/checkout)有命令行方式获取源码的说明，项目主页有使用TortoiseSVN的说明。截至目前，这是[r24](http://code.google.com/p/dcef3/source/detail?r=24)，从 2012 年 11 月开始。

该项目基于[Delphi Chromium Embedded 项目](http://code.google.com/p/delphichromiumembedded/)，最新版本为[r147](http://code.google.com/p/delphichromiumembedded/source/detail?r=147)，从 2012 年 7 月开始。该项目的下载提到的版本号高于此。但是，它们不是该项目的修订号。相反，它们是[Chromium Embedded Framework 项目](http://code.google.com/p/chromiumembedded/)的修订号，其中最近的修订是昨天的[r996](http://code.google.com/p/chromiumembedded/source/detail?r=996)。Delphi 项目提供的下载是来自[CEF 的 r306 的](http://code.google.com/p/chromiumembedded/source/detail?r=306)二进制文件，*而不是*Delphi 项目本身的二进制文件；您需要自己编译 Delphi 代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T17:44:47.583

由于后面有一个 VCS（SUBversion），您可以从中获取最新的源代码/修订版本`trunk`

[SVN 中继](http://code.google.com/p/dcef3/source/browse/#svn/trunk%253Fstate%253Dclosed)

修订版 24 不是很旧（2012 年 11 月 20 日）

# facebook-graph-api - 如何将我的应用生成的照片存储在子文件夹/子相册中

> ID：14364426
> 
> 赞同：1
> 
> 时间：2013-01-16T17:41:08.140
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, photos

我正在创建一个示例应用程序来使用 Javascript 使用 FB Graph API 进行锻炼。

我想要做的是，让用户在日记上添加一个文本条目，并附上一张图片。我会将文本条目存储在我的服务器上，并将图像（或多张图像）发布在默认应用相册上。

但是，我不希望我所有的应用程序图片都被组合在一起，我想对它们进行分类。

即我想发布关于我的花园的条目，以及我拥有的每棵树/花的专辑。你知道我是否（如果是，如何）我可以通过应用相册在里面创建一个子相册吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:37:43.600

没有这样的“子专辑”功能，但您的应用没有理由不能通过常规 API 创建不同的专辑并将其用于上传

# javascript - Facebook like box - 无法检索指定页面？

> ID：14364428
> 
> 赞同：0
> 
> 时间：2013-01-16T17:41:13.973
> 
> 标签：javascript, html, facebook, facebook-like, facebook-javascript-sdk

问题：

我从[这里](http://www.xeniaonline.com)复制了下面的代码。
现在我将 appid 更改为我的，并将用户名更改为 MyUserName。如果我只更改 appid，那么它可以工作，当我将用户名更改为 MyUserName 时，它​​会显示此错误：

```
Could not retrieve the specified page. Please verify correct href was passed in. 
```

如果我在浏览器中输入 URL `http://www.facebook.com/MyUser.Name`，则它会正确显示配置文件。

有什么我必须在 facebook 个人资料中切换的吗？

```
<body>
<div id="fb-root"></div>

<script type="text/javascript">
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1&appId=MY_APP_ID";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script>

...

<div id="facebook-box">
    <div class="fb-like-box" data-header="false" data-stream="false" data-show-faces="false" data-height="100" data-width="220" data-href="http://www.facebook.com/MyUserName">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:05:07.347

错误消息告诉您错在哪里，您传递的 FB 个人资料 URL 是错误的。您需要提供 facebook 页面的 URL（您想要喜欢的）而不是您的个人资料的 URL，请尝试以下操作代码：

```
<div class="fb-like-box" data-header="false" data-stream="false" data-show-faces="false" data-height="100" data-width="220" data-href="http://www.facebook.com/the URL of the Facebook Page you want to like"> 
```

# android - 渲染到纹理：最大数量？

> ID：14364429
> 
> 赞同：2
> 
> 时间：2013-01-16T17:41:18.543
> 
> 标签：android, framebuffer, texture2d

我在一个 Android 应用程序中有一个类，它保存一个字节数组作为纹理的数据源。我使用 Framebuffer 将一些东西渲染到该纹理上，然后在屏幕上渲染纹理。这完美地工作。

但是，我只能使用 151 个纹理来做到这一点。实例 #152 生成此错误：

```
:0: PVRSRVAllocDeviceMem: Error 1 returned
:0: ComputeFrameBufferCompleteness: Can't create render surface. 
```

**这是代码片段（构造函数）：**

```
// Texture image bytes
   imgBuf=ByteBuffer.allocateDirect(TEXEL_X*TEXEL_Y*3);
   imgBuf.position(0);

// Fill the texture with an arbitrary color, so we see something
   byte col=(byte)(System.nanoTime()%255);
   for (int ii=0; ii<imgBuf.capacity(); ii+=3)
   {  imgBuf.put(col);
      imgBuf.put((byte)(col*3%255));
      imgBuf.put((byte)(col*7%255));
   }
   imgBuf.rewind();

// Generate the texture
   GLES20.glGenTextures(1,textureID,0);
   GLES20.glBindTexture(GLES20.GL_TEXTURE_2D,textureID[0]);

   GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,GLES20.GL_TEXTURE_WRAP_S,
    GLES20.GL_CLAMP_TO_EDGE);
   GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T,
    GLES20.GL_CLAMP_TO_EDGE);

   GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,
    GLES20.GL_TEXTURE_MIN_FILTER,GLES20.GL_LINEAR);

   GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,GLES20.GL_TEXTURE_MAG_FILTER,
    GLES20.GL_LINEAR);

// Associate a two-dimensional texture image with the byte buffer
   GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D,0,GLES20.GL_RGB,TEXEL_X,
    TEXEL_Y,0,GLES20.GL_RGB,GLES20.GL_UNSIGNED_BYTE,imgBuf);

   GLES20.glBindTexture(GLES20.GL_TEXTURE_2D,0);

// Get framebuffer for later rendering to this texture
   GLES20.glGenFramebuffers(1,frameBufID,0); 
```

**这就是问题所在（渲染到纹理）**

如果我省略这部分，显示数百个这样的纹理效果很好，但是我不能在纹理上渲染任何东西:(如果我保留它，它可以很好地处理 151 个纹理。

```
// Bind frame buffer and specify texture as color attachment
   GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER,frameBufID[0]);
   GLES20.glFramebufferTexture2D(GLES20.GL_FRAMEBUFFER,GLES20.GL_COLOR_ATTACHMENT0,GLES20.GL_TEXTURE_2D,textureID[0],0);

// Check status
   int status=GLES20.glCheckFramebufferStatus(GLES20.GL_FRAMEBUFFER);
   Log.i(TAG,texNum+":"+status);

// Render some stuff on the texture
// ......
// (It does not matter. The status check fails even without rendering anything here)

   GLES20.glFramebufferTexture2D(GLES20.GL_FRAMEBUFFER,GLES20.GL_COLOR_ATTACHMENT0,GLES20.GL_TEXTURE_2D,0,0);
   GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER,0); 
```

我希望有人可以阐明这一点。谢谢，鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-27T21:48:47.353

您很可能正在使用带有 PowerVR SGX540 GPU 的设备，他们在 android 上遇到了这个问题。不在 iOS 上，所以这似乎是一个驱动程序问题，尽管他们的支持在他们的论坛上说了什么：

[http://forum.imgtec.com/discussion/3026/glcheckframebufferstatus-returns-gl-framebuffer-unsupported-when-creating-too-many-fbo](http://forum.imgtec.com/discussion/3026/glcheckframebufferstatus-returns-gl-framebuffer-unsupported-when-creating-too-many-fbo)

如果您确实需要渲染超过 152 个纹理，那么您必须使用 glReadPixels() 读取像素，删除纹理和 fbo，并通过向 glTexImage2D 提供数据来创建新纹理

# encoding - 处理单个文件中的多个编码

> ID：14364430
> 
> 赞同：1
> 
> 时间：2013-01-16T17:41:25.140
> 
> 标签：encoding, xml-parsing, html-parsing

我遇到了一些奇怪的编码问题。我需要解析来自网络的 HTML 文档，并且我正在使用“Content-Type”字符集元数据来确定编码类型。一页给我带来了麻烦，并由“Shift_jis”（日语）编码 - 解析器结果包含一些乱码。

当我使用 UTF-8 解析同一个文档时，之前乱码的字符被正确解析，但现在其他所有字符都是乱码。

我假设文档包含两种不同编码类型的文本。

无论如何，我可以正确解析此文档吗？

另外，我不知道，但所有浏览器似乎都很好地处理了这个问题，并且很好地呈现了页面。

非常感谢您对此的任何想法。

我需要解析的页面：http: [//ao.recruit.co.jp/form.html](http://ao.recruit.co.jp/form.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:11:04.673

首先，浏览器看到的是：

```
莨夂､ｾ讎りｦ 
```

`text-indent: -9999px`由于 CSS和[覆盖在其上的背景图像](http://ao.recruit.co.jp/img/nav/company.png)，呈现的 html 中显示的内容并不相同。但它就在那里。[删除它们将显示文本浏览器正在查看](http://i.imgur.com/kE0Ij.png)。

开箱即用，解码为 Shift-Jis 应该会给你`莨夂､ｾ讎りｦ?`，但如果你想要与浏览器中相同的结果，你应该使用自定义`CharsetDecoder`with `IGNORE`：

```
URL url = new URL( "http://ao.recruit.co.jp/form.html");
BufferedInputStream bis = new BufferedInputStream(url.openStream());
CharsetDecoder decoder = Charset.forName("Shift-Jis").newDecoder();

decoder.onMalformedInput(CodingErrorAction.IGNORE);
decoder.onUnmappableCharacter(CodingErrorAction.IGNORE);

Reader inputReader = new InputStreamReader(bis, decoder);

String result = IOUtils.toString(inputReader);
System.out.print(result); 
```

这将为您提供与浏览器相同的结果。当然，它不会解析图像文件中的文本。

# python - Django：用于为上传的图像添加标题的表单集

> ID：14364431
> 
> 赞同：4
> 
> 时间：2013-01-16T17:41:31.240
> 
> 标签：python, django, image, django-forms

我正在使用 Django 并尝试实现，我认为这是图像上传中相当常见的功能。我想生成一个`formset`（也许`modelformset`？）为用户刚刚上传的每个图像添加标题（类似于“查看您刚刚上传的图像”页面）。

**这是基本思想：**

我有一个用于一次提交一个或多个图像的简单表单：

```
class UploadImageForm(forms.Form):
    images = forms.FileField(widget=forms.ClearableFileInput(attrs={'multiple': 'multiple'})) 
```

它产生这个：

![在此处输入图像描述](../Images/c4af9d8ef9bf2604d1f76c5194409b09.png)

然后，在视图中，我对来自 POST 的每个图像进行一些处理/处理，并将图像的调整大小版本存储为模型的实例，称为`ImageItem`：

```
class ImageItem(models.Model):
    resized_img = models.ImageField(upload_to=img_get_file_path)
    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add=True)
    last_modified = models.DateTimeField(auto_now=True)      
    caption = models.CharField(max_length=1000,
                               blank=True) 
```

（这里是`UploadImage`视图，供参考......请注意，一旦表单被验证并且图像已经保存在*handle_uploaded_image*函数中，它就会重定向到一个视图，以便为所有图像添加标题。）

```
def UploadImageToLibrary(request):
    if request.method == 'POST':
        form = UploadImageForm(request.POST, request.FILES)
        if form.is_valid():
            handle_uploaded_image(form) # creates new sizes of images, saves resized version as ImageItem instances
            return AddInfoForImage(request) # SEND USER TO A PAGE FOR ADDING CAPTIONS TO EACH IMAGE...not sure what this next view should contain...?
    else:
        form = UploadImageForm()
    return render_to_response('upload_item.html', {'form': form}, context_instance=RequestContext(request)) 
```

* * *

*好的，现在是我需要帮助的部分......*

图像保存后，我希望下一个视图为已上传的每个图像生成一个表单，以便用户可以为图像添加标题。当他们完成将所有信息添加到所有新图像时，他们点击`submit`，并且每个标题都保存到适当的 ImageItem 实例中。我不知道应该创建多少个表单，这取决于用户上传了多少张图片。下面是我希望表单集做什么的可视化表示（忽略其他内容，我们可以继续使用简单的标题作为示例）：

![在此处输入图像描述](../Images/9726a4e15a82e8b919dc40bcb1470924.png)

* * *

具体来说，这是我需要帮助的东西：

*   `CaptionForm`根据用户刚刚上传的图片数量，我不知道如何提供适当数量的s。
*   我不知道如何将适当`ImageItem.resized_img`的放置在模板中它引用的表单的左侧。
*   我不知道如何确保`CaptionForm`提交 s 后，我将字幕保存到适当的`ImageItem`实例中。

我想所有这三点都可以在一个`formset`或解决方案中以某种方式`modelformset`解决？

* * *

***就像我说的，这似乎是一种非常普遍的情况。如果有人知道执行此操作的任何现有代码，请告诉我。谢谢！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:05:11.527

我认为您需要使用[模型表单集](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#model-formsets)并在模板中访问调整大小的图像`{{ form.instance.resized_img }}`

# algorithm - 编程：只需 1 遍即可找到文件中的第一个唯一字符串

> ID：14364432
> 
> 赞同：3
> 
> 时间：2013-01-16T17:41:31.817
> 
> 标签：algorithm, data-structures

给定一个很长的产品名称列表，找到第一个唯一的产品名称（恰好出现一次）。您只能在文件中迭代一次。

我正在考虑采用哈希图并将（键，计数）存储在双向链表中。基本上一个链接的哈希图可以任何人优化这个或提供更好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:56:47.007

由于您只能迭代列表一次，因此您必须存储

*   每个字符串只出现一次，因为它可能是输出
*   它们在列表中的相对位置
*   每个出现多次的字符串（或者它们的哈希，如果你不害怕的话）

值得注意的是，您不必存储多次出现的字符串的相对位置。

你需要

*   字符串集的有效存储。哈希集是一个很好的候选者，但根据字符串集，trie 可以提供更好的压缩。
*   按值高效查找。这排除了一个简单的列表。哈希集是明显的赢家，但 trie 也表现良好。您可以将树的叶子存储在哈希集中。
*   有效查找最小值。这要求一个链表。

结论：

对字符串集使用链接的哈希集，并使用一个标志来指示它们是否是唯一的。如果您正在为记忆而战，请使用链接的特里。如果链接的 trie 太慢，则将 trie 叶存储在哈希图中以供查找。仅包括链表中的唯一字符串。

总的来说，您的节点可能如下所示：`Node:{Node[] trieEdges, Node trieParent, String inEdge, Node nextUnique, Node prevUnique}; Node firstUnique, Node[] hashMap`

如果您努力实现易于实施，则可以使用两个哈希集（一个链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:56:48.450

以下算法在 O(N+M) 时间内解决它。在哪里

N=字符串数

M = 放在所有字符串中的字符总数。

步骤如下：

```
`1\. Create a hash value for each string`

`2\. Xor it and find the one which didn't have a pair` 
```

Xor 有一个有用的属性，如果你执行 a xor a=0 和 b xor 0=b。

为字符串生成哈希值的提示：使用 27 基数系统，并给 aa 值 1，ba 值为 2，依此类推，直到 z 得到 26，所以如果字符串是 "abc"，我们计算哈希值如： H=3*(27 power 0)+2*(27 power 1)+ 1(27 power 2) =786 您可以使用模运算符使散列值足够小以适合 32 位整数。如果您这样做留意冲突，这基本上是两个不同的字符串，但由于模运算而获得相同的哈希值。大多数情况下，我猜你不会需要它。

所以计算每个字符串的哈希，然后从第一个哈希开始并保持异或，结果将保存没有一对的字符串的哈希值。 *注意*：这仅在字符串成对出现时才有用。这仍然是一个好主意，这就是我回答它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:03:17.377

使用链接的哈希图是显而易见的。否则，您可以使用 TreeMap 样式的数据结构，其中字符串按计数排序。因此，一旦您完成读取输入，如果存在唯一字符串，则树的根是唯一的。与链接的哈希映射不同，插入最多需要 O(log n) 而不是 O(n)。您可以阅读 TreeMaps，了解如何将基本的 TreeMap 扩充为您需要的内容。同样在您的链接哈希图中，您可能需要花费 O(n) 才能找到您的第一个唯一键。使用 TreeMap 样式的数据结构，您的查找是 O(1) - 根。即使存在更多唯一键，您遇到的第一个键也将是根。随后的将是根的孩子。

# javascript - Javascript insertAfter & insertBefore

> ID：14364433
> 
> 赞同：0
> 
> 时间：2013-01-16T17:41:32.113
> 
> 标签：javascript, jquery, javascript-events

我正在使用 javascript 函数 insertAfter 和 insertBefore，但是我正在尝试 insertAfter 和 insertBefore 2 个元素。

例如，考虑以下 HTML

```
<table>
    <tbody>
        <tr>
            <td>
                Item 1
            </td>
            <td>
                <div class="moveUpDown">
                    <div class="up">
                    </div>
                    <div class="down">
                    </div>
                    <div>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table>
                    <tr>
                        <td>
                            1
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                Item 2
            </td>
            <td>
                <div class="moveUpDown">
                    <div class="up">
                    </div>
                    <div class="down">
                    </div>
                    <div>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table>
                    <tr>
                        <td>
                            1
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
</table> 
```

然后我有这个javascript代码片段

```
var row = $(this).parents("tr:first");
if ($(this).is(".up")) {
    row.insertBefore(row.prev());
} else {
    row.insertAfter(row.next());
} 
```

基本上，当 Up 类被调用时，前一行向上移动，当 Down 类被调用时，当前行向下移动一行。

我想要做的是将行向上/向下移动 2 行......意思是 row.prev().prev() 或 row.next().next() 但这似乎不起作用。

有没有简单的方法解决这个问题？

谢谢，将不胜感激任何帮助/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:44:28.410

上去

```
row.prev().prev().before(row) 
```

往下走

```
row.next().next().after(row) 
```

显然 tr 必须存在 prev/next 必须存在

注意，您将行缓存为第一个 tr 元素，因此每次第一个 tr 元素更改时，行都会更改

听事件

```
$("table").on("click","tr > td > span.moveup", function() {
  var row = $(this).parent().parent();

 if (row.prev().prev().get(0)) row.prev().prev().before(row)

}) 
```

# grails - 如何自动将在 resources.groovy 中声明的 Grails 组件注入到我的 IntegrationSpecs 中？

> ID：14364436
> 
> 赞同：1
> 
> 时间：2013-01-16T17:41:50.957
> 
> 标签：grails, groovy, spock

使用 Spock (0.7) Grails (2.1.2) 插件，您可以编写自动注入 Grails 原型（如服务）的集成规范。但是，我想对仅在我的`resources.groovy`. 例如：

```
beans = {
    simpleBean(SimpleBean) {
        // load some dependencies
    }
} 
```

在`src/groovy`文件夹中声明 SimpleBean 的位置。如果这是一个 Grails 服务，我可以在我的文件夹中编写如下内容`test/integration`::

```
import grails.plugin.spock.IntegrationSpec

class SimpleBeanSpec extends IntegrationSpec {

    def simpleBean

    def "should"() {
        when:
            data = simpleBean.load()
        then:
            assert simpleBean
    }

} 
```

但是上面的调用会引发`NullPointerException`对`simpleBean.load()`. 有什么方法可以让 Spock/Grails 创建 simpleBean 依赖项，以便它`resources.groovy`像 Grails 服务一样拥有所有已配置的依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:06:11.283

Grails 自动将所有 bean 注入到集成测试中，包括 Spock 测试。在中声明的 Bean`resources.conf`应该与人工制品一样工作。您的 IntegrationSpecs 是否位于下面`test/integration`？

# django - WebSocket在django常用中间件中产生错误

> ID：14364441
> 
> 赞同：3
> 
> 时间：2013-01-16T17:42:24.623
> 
> 标签：django, websocket, haproxy, gevent-socketio

我正在使用 Django + gevent-socketio + Haproxy。所有套接字功能都可以正常工作，但在后台会生成如下所示的错误。似乎 Haproxy 的套接字标头具有非常有限的属性，不包含“status_code”，因此它失败并发送错误消息。有什么线索可以让我添加 status_code 吗？也许解决方案是在 Haproxy 配置中。谢谢！

我使用 Gunicorn 服务器作为后端

```
Traceback (most recent call last):

  File "/home/young/.virtualenvs/test_project/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 188, in get_response
    response = middleware_method(request, response)

  File "/home/young/.virtualenvs/test_project/local/lib/python2.7/site-packages/django/middleware/common.py", line 94, in process_response
    if response.status_code == 404:

AttributeError: 'dict' object has no attribute 'status_code'

<WSGIRequest
path:/socket.io/1/xhr-polling/313746855815,
GET:<QueryDict: {u't': [u'1358323855701']}>,
POST:<QueryDict: {}>,
COOKIES:{'csrftoken': 'K7YePbx5UF5yE7sDpX98bU4fyKChooZC',
 'sessionid': 'f9806590317a86d5300a67d195a34139'},
META:{'CSRF_COOKIE': 'K7YePbx5UF5yE7sDpX98bU4fyKChooZC',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'HTTP_ACCEPT_CHARSET': 'utf-8, iso-8859-1, utf-16, *;q=0.7',
 'HTTP_ACCEPT_ENCODING': 'gzip,deflate',
 'HTTP_ACCEPT_LANGUAGE': 'en-US',
 'HTTP_COOKIE': 'sessionid=f9806590317a86d5300a67d195a34139; csrftoken=K7YePbx5UF5yE7sDpX98bU4fyKChooZC',
 'HTTP_HOST': '192.168.1.13',
 'HTTP_REFERER': 'https://192.168.1.13/dashboard/',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.34 Safari/534.24',
 'HTTP_X_NETWORK_TYPE': 'WIFI',
 'PATH_INFO': u'/socket.io/1/xhr-polling/313746855815',
 'QUERY_STRING': 't=1358323855701',
 'REMOTE_ADDR': '127.0.0.1',
 'REQUEST_METHOD': 'GET',
 'SCRIPT_NAME': u'',
 'SERVER_NAME': 'ubuntu',
 'SERVER_PORT': '8001',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'SERVER_SOFTWARE': 'gevent/0.13 Python/2.7',
 'socketio': <socketio.virtsocket.Socket object at 0x27cb950>,
 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x7fdc847aa270>,
 'wsgi.input': <gevent.pywsgi.Input object at 0x27cb8d0>,
 'wsgi.multiprocess': True,
 'wsgi.multithread': False,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}> 
```

# git - 部分分支或部分合并或其他方式来帮助我同步点文件？

> ID：14364444
> 
> 赞同：4
> 
> 时间：2013-01-16T17:42:32.607
> 
> 标签：git, shell, mercurial, dotfiles

我不知道如何使我的要求在标题中简短，如果没有意义，对不起。我将在这里解释：

许多人将他们的 dotfiles 放在 bitbucket 或 github 上，以方便以后的安装或配置，在不同的 pc 上同步。我也做了同样的事情，但是我想做一些特别的事情，我不确定 mecurial/git 有什么帮助。

**是）我有的：**

我有 3 台机器，比如 Home、Office 和 Client，都是 linux 操作系统（可能是不同的发行版）。为了使示例简单，假设我只想将一个文件`.zshrc`放入 repo。问题是，三个操作系统具有不同的系统变量（或其他设置）。例如

*   Office 已安装 JBOSS，然后`.zshrc`我需要导出 JBOSS_HOME var。
*   客户端安装了 Oracle，然后导出不同的变量集。
*   Office 必须导出 HTTP_PROXY，但 HOME 不需要，客户端也需要它，但代理值不同等。

现在我所做的是，我将那些特定于机器的设置（主要是导出、别名语句）提取到另一个文件中，比如`myVar.sh`. 并在`.zshrc`.

所以 3 台机器有共同的部分（相同`.zshrc`）和不同的部分（`myVar.sh`）。

**我想要的是：**

*   在任何机器上，如果我发现一些不错的设置，我会更改`.zshrc`文件（公共部分）并推送。更改应该很容易同步到其他机器（例如，通过拉取）

*   如果我更改了`myVar.sh`HOME 上的（不同部分）并推送，`myVar.sh`如果我在 Office 机器上拉动，它不应该影响 Office。

**我在做什么：**

现在我在 bitBucket 上有一个 Repo 和三个分支（H、O、C）。在 Home PC 上，我只玩 Home 分支。办公室，客户也是如此。

问题是，如果我在一台电脑上更改了通用部分，则更改在其自己的分支中，与其他两台同步有点困难。因为我永远不会合并这些分支。

我还考虑为不同的电脑创建不同的目录。例如

```
/.zshrc
|--/HOME/myVar.sh
|--/Office/myVar.sh
|--/Client/myVar.sh 
```

并编写 shell 脚本，例如检查 $HOST 以决定写入`myVar.sh`哪个目录。但我怀疑这是否是实现我目标的最佳方式。当我查看我的 dotfiles 目录时，我看到了所有 3 个设置。我应该小心并输入正确的读取文件。

在现实世界中，公共部分包含的内容远不止 .zhsrc (tmux,vimrc,xdefault..)，不同部分也是如此。

我不知道我们能否以某种方式制作部分分支或在存储库上进行部分合并......

**我用 hg 比 git 多，如果 hg 能解决我更喜欢 hg，如果不能，git 也可以。除了克隆、推送、拉取、向上、合并、ci 之外，我没有太多的 git 经验。**

现在，**我该怎么办**？

并且，感谢您阅读本文...

* * *

**编辑**更多关于不同部分

我会感谢大家给我答案。正如我上面所说，我的真机中的不同部分并不像`myVar.sh`. 例如，我将我的公司笔记本电脑（Office）带到不同的客户端（大约有 6 个客户端，并非所有客户端都为我们提供 PC，这很好，因为我可以在任何地方使用 Linux），并为每个客户端配置打印机。我也会把这些配置放在 Repo 中。因为如果有一天我必须刷新我的系统，或者硬盘出现故障，我可以很容易地设置这些打印机。其他属于不同部分但我不能简单地像“source xxx”这样的东西

*   跟踪点的 Xorg.conf

*   .hgrc 文件（因为在公司我们有自己的 repo、uid、pwd、proxy..）

*   一些预配置的 systemd 模块，基本上是 .conf 文件。但特定于机器，例如 radeon.conf 仅适用于我的家用笔记本电脑。客户端 pc 根本没有安装 systemd。

    这就是为什么我考虑为 PC 设置不同的目录。

正如我现在所说，我有 3 个分支方式，并且`myConf`在这个目录中有一个目录`getConf.sh`，用于将点文件、不同的 confs 等复制到`myConf`. 事实上，它`getConf.sh`也属于不同的部分，因为所有电脑的脚本都不相同。

因此，我认为`if-else/switch`then`source`在这种情况下可能不起作用。

昨天我刚拿了.zshrc，并尝试使示例简单。如果误导了各位，请见谅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:03:28.387

我首选的方法是在同一个目录中为每个文件都有一个特定于主机的版本——类似于你的同一个文件多个目录，然后通过变量插值将它包含在我的主文件中。这`~/.bashrc`里面有这个：

```
if [ -f ~/.bashrc-$HOSTNAME ] ; then
     source ~/.bashrc-$HOSTNAME
fi 
```

据推测，这在 zsh 中甚至更漂亮，但想法是如果存在特定于主机的文件，则最后将其源，当然，适用于所有机器的任何内容都放在主 ~/.bashrc 本身中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:46:41.757

您可以在自己的分支中管理每个设置。您可以添加一个子模块（存储库中的存储库）来跟踪每个子模块中的公共文件。要同步它们，您可以

```
git checkout otherbranch -- path/to/common/script && git submodule update 
```

要进行设置，请执行以下操作：

在您的主目录中添加一个 .gitignore 文件。忽略带 * 的所有内容。在该条目之后，排除您要使用 !.ssh/ 保留的点文件。

现在把它变成一个回购很容易。

```
git init repostart
mv repostart/.git .
rm -rf repostart
git add .gitignore .ssh
git commit -m "initial start of syncing my settings" 
```

这现在将跟踪 .ssh/ 中的每个更改。在您的情况下，您可以根据需要排除 .bashrc 和 .bash_profile 或任何其他路径。

现在，您可以按照标准程序从 github 或 bitbucket（免费私人仓库）推拉。

```
git remote add origin <url to bitbucket repo>
git push -u origin master 
```

现在你已经在服务器上设置好了。在你的另一台机器上：

```
cd ~
git clone <path to your settings> settings
mv settings/.git . 
rm -rf settings
git pull origin master -t 
```

-t 和 -u 选项设置跟踪，因此您可以

```
git push
git pull 
```

当您需要从 bitbucket 服务器获取或保存设置时。

现在为了让你的 repo 的公共部分同步，你可以在 progit.org/book 中阅读这个关于子模块的简短章节。见第 6 章第 6 节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:08:50.390

我有一个类似的问题，并通过在相应的文件中分支来解决它。

这是一个小例子，展示了我如何`PATH`为我的 Mac 和其他计算机（内部`.bashrc`）导出不同的值：

```
MAC=0
if [ -x "/System/Library/CoreServices/Finder.app/Contents/MacOS/Finder" ]; then
  MAC=1
fi

if [ $MAC -eq 1 ]; then
  export PATH=~/bin/:/sw/bin:$PATH
else
  export PATH=~/bin/:/sbin/:$PATH
fi 
```

如果您`.zshrc`允许类似的东西，这可能会有所帮助。如果没有，我会为每台计算机使用不同的文件并单独更新它们（也许使用基于某些共享部分生成这些文件的脚本？）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T23:02:59.517

好吧，纯粹的以 Mercurial 为中心的解决方案

1.  经典分支

每个主机的分支，从额外的“香草”分支开始（您将在那里存储共享代码）。在每个分支中执行特定于主机的更改之后。常见的更改（并且**只有 common**）必须出现在 Vanilla 分支中并合并到其余部分

1.  MQ 补丁

单个分支，目的与 p.1 中的 Vanilla 相同（“变更集包含公共基础”）。所有可变的特定于主机的更改都存储在一组 mq-patch 的队列中（或者，对于新的 Mercurial，可能在*队列*中）。如何组织补丁堆栈完全是您的职责范围：

*   您可以为每个主机使用一个队列和全套补丁（基于名称的分隔），即使某些不同的补丁是另一个补丁的克隆。结果：为主机准备实际文件​​集的简单操作，您必须应用所有 NAME-* 补丁
*   功能分离：每个补丁都服务于单个任务（BOSS、ORACLE、PROXY、PROXY-CONFIG...）。结果：更少的补丁，块文件的逻辑组合，可扩展为更广泛的主机集而不改变内部逻辑
*   单独的队列：每个主机都有自己的队列。结果：“外来”补丁永远不会应用于主机，缺点 - 队列之间更难（或不可能）的补丁交换，功能克隆，如版本“完整集”（实际上它是“完整集”的变体，具有更强的分离）

# xml - XML 没有收到 标签

> ID：14364447
> 
> 赞同：4
> 
> 时间：2013-01-16T17:42:53.460
> 
> 标签：xml, spring, apache-camel, xml-namespaces

这可能是一个简单的错误配置问题，但我的 xml 文档获取我的标签时遇到问题。我收到错误

“在此行找到多个注释：-cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素“camelContext”的声明。-无法找到架构的元素“camelContext”的 Spring NamespaceHandler命名空间“http://activemq.apache.org/camel/”

但是当我在命名空间中添加时，我收到以下错误：

在此行找到多个注释： - cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素“camelContext”的声明。- schema_reference.4: 无法读取架构文档 'http://activemq.apache.org/camel/schema/spring/camel-spring.xsd'，因为 1) 找不到该文档；2) 文件无法读取；3) 文档的根元素不是 . - 无法找到架构命名空间“http://activemq.apache.org/camel/schema/spring”的元素“camelContext”的 Spring NamespaceHandler

谁能帮我弄清楚为什么我会遇到这两个问题？我不是 xml 或骆驼方面的专家，所以任何帮助将不胜感激。下面是我的简单 xml 文档：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://activemq.apache.org/camel/schema/spring     http://activemq.apache.org/camel/schema/spring/camel-spring.xsd
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
      http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

   <bean id="myrouter"      class="org.apache.camel.example.reportincident.ReportIncidentRoutes"/>

<!-- Camel Configuration -->

 <camelContext id="camel" xmlns="http://activemq.apache.org/camel/schema/spring">
    <routeBuilderRef ref="myrouter"/>

 </camelContext>

</beans> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T07:45:59.937

在 Camel 1.x 中，XML 的命名空间是以 activemq 开头的，例如

```
xmlns="http://activemq.apache.org/camel/schema/spring" 
```

在 Camel 2.x 中，XML 的命名空间是纯 Camel，例如

```
http://camel.apache.org/schema/spring 
```

由于 Camel 1.x 已停产，我假设您使用的是 Camel 2.x。如果是这样，您需要将 <camelContext> 标记中的命名空间更改为 2.x 样式。并删除 XML 文件顶部的旧引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T20:22:45.747

谢谢！我有旧版本的 JBoss Fuse 6.2.1，我的路线运行良好。但在 JBoss Fuse 6.2.1 中，我得到了**XML 没有拾取 <camelContext> 标签**。在我将[http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) [http://camel.apache.org/schema/spring/camel-spring.xsd](http://camel.apache.org/schema/spring/camel-spring.xsd)添加到 xsi:schemaLocation 之后，它就可以工作了！！！

# jsp - JSP 请求的资源不可用

> ID：14364449
> 
> 赞同：0
> 
> 时间：2013-01-16T17:42:54.347
> 
> 标签：jsp

当我启动 loginPage.jsp 表单并输入用户名和密码时出现此错误：

```
type Status report

message /WHFM/LoginServlet.java

description The requested resource is not available. 
```

我错过了什么？我读过关于同样问题的文章，但我认为区分大小写是正确的，在这里。

```
 <form name="loginForm" method="Post" action="LoginServlet.java">
    <table>
    <tr>
    <td>Username:</td>
    <td><input type="text" name="uname"></td></tr>

    <tr><td>Password:</td>
    <td><input type="password" name="pass"></td>
    </tr>
    <tr><td></td><td><input type="submit" value="submit" name="submit"></td></tr>
    </table>

    </form> 
```

和servlet是：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    DBConnection connString = new DBConnection();
    String query = "";
    String username= request.getParameter("uname");
    String password = request.getParameter("pass");
    int counter= 0;

    try {
         response.setContentType("text/html");
            PrintWriter out=response.getWriter();
        connString.getConnection();
        query="Select * from user where username='"+username+"' and password='"+password+"' ";
        System.out.println(query);
        Statement st = connString.getConnection().createStatement();
        ResultSet rs= st.executeQuery(query);
        while(rs.next()){
            counter++;
        }
        if(counter>0){
            response.sendRedirect("welcome.jsp");
        }
        else{
            response.sendRedirect("LoginPage.jsp");
        } 
```

这是我的 XML：

```
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>WHFM</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
     </welcome-file-list>

<servlet>

<servlet-name>LoginServlet</servlet-name>
<servlet-class>servlets.LoginServlet</servlet-class>
</servlet>

<servlet-mapping>

<servlet-name>LoginServlet</servlet-name>
<url-pattern>/LoginServletPath</url-pattern>
</servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:02:46.063

`<form action>`URL 不能指向 servlet 类的类文件名。它必须指向一个可由网络浏览器公开访问的 URL，正是您需要在浏览器地址栏中输入的 URL。

您已将 servlet 映射到 的 URL 模式`/LoginServletPath`，因此它可以通过 使用`http://localhost:8080/WHFM/LoginServletPath`，因此您需要`<form action>`相应地修复您的 URL：

```
<form action="LoginServletPath"> 
```

或者，如果您希望能够在任何地方移动 JSP 文件而不用担心相对 URL，

```
<form action="${pageContext.request.contextPath}/LoginServletPath"> 
```

* * *

**与具体问题无关**，[您的 JDBC 代码正在泄漏资源](https://stackoverflow.com/questions/9428573/is-it-safe-to-use-a-static-java-sql-connection-instance-in-a-multithreaded-syste/9431863#9431863)。我会尽快解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:58:43.583

确保您在 webapp 文件夹中找到所有类，并且映射您的“servlet”和“servlet-mapping”在您的 web.xml 中

喜欢 ：

`<servlet>`

```
<servlet-name>HelloWorld</servlet-name>
<servlet-class>your.package.name.HelloWorld</servlet-class> 
```

`</servlet>`

`<servlet-mapping>`

```
<servlet-name>HelloWorld</servlet-name>
<url-pattern>/hello</url-pattern> 
```

`</servlet-mapping>`

这篇文章可能会有所帮助：[Invoker Servlet](http://www.coderanch.com/how-to/java/InvokerServlet)

# java - 日食：gwt +maven +hibernate

> ID：14364452
> 
> 赞同：0
> 
> 时间：2013-01-16T17:43:05.387
> 
> 标签：java, hibernate, gwt, maven

我真的很困惑。我一直在与休眠作斗争很长时间，但没有成功通过运行时间。当我尝试单独运行它时出现运行时异常。然后我决定我应该尝试将它与 gwt（原始项目是一个没有休眠的 gwt）和 maven 集成。我通过更新站点安装了gwt和hibernate插件，并通过市场为eclipse wtp安装了maven我已经完成了右键单击并将gwt + hibernate项目转换为maven项目现在我收到以下错误应该设置项目的输出目录到 /BGUSched/war/WEB-INF/classes 这是我自动生成的 pom.xml（位于顶级目录 - BGUSched）

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>BGUSched</groupId>
  <artifactId>BGUSched</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <testSourceDirectory>test</testSourceDirectory>
    <resources>
      <resource>
        <directory>src</directory>
        <excludes>
          <exclude>**/*.java</exclude>
        </excludes>
      </resource>
    </resources>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

我的类路径：-hibernate（作为用户库）：
-antlr-2.7.6.jar
-commons-collections-3.1.jar
-dom4j-1.6.1.jar
-hibernate3.jar
-hibernate-jpa-2.0-api-1.0。 0.Final.jar
-javassist-3.9.0.GA.jar
-slf4j-api-1.5.8.jar
-slf4j-simple-1.5.8.jar

gwt：

-appengine-api-1.0-sdk-1.6.3
- appengine-api-1.0-sdk-1.6.4
-appengine-api-1.0-sdk-1.7.0
-appengine-api-labs-1.6.3
-appengine-api-labs-1.6.4
-appengine-jsr107cache-1.6。 3
-appengine-jsr107cache-1.6.4
-appengine-local-runtime-shared
-appengine-tools-api
-BGUSched.jar（我项目的 jar）
-commons-codec-1.3
-commons-fileupload-1.2.2
-commons-io-2.1
-commons-logging-1.03
-datanucleus-appengine-1.0.10.final
-datanucleus-core-1.1.5
-datanucleus-jpa-1.1.5
-el-api
-facebook4gwt-1.0.8
-geronimo -jpa_3.0_spec-1.1.1
-geronimo-jta_1.1_spec-1.1.1
-guice-2.0
-gwt-cal-0.9.3（嵌入在我的一些其他项目）
-gwt-dev
-gwt-dnd-3.1.2
-gwt-log-3.1.8-javadoc
-gwt-plus-v1-0.2-alpha
-gwt-servlet
-gwt-user
-httpclient-4.0
-httpcore-4.0.1
-jdo2-api-2.3-eb
-JOpenId-1.08 -sources
-jsp-api
-jsr107cache-1.1
-nekohtml-1.9.14
-openid4java-0.9.6
-repackaged-appengine-ant-1.7.1
-repackaged-appengine-ant-launcher-1.7.1
-repackaged-appengine-jasper-6.0.29
repackaged-appengine-jasper-el-6.0.29
repackaged-appengine-tomcat-juli -6.0.29
servlet-api
spring4gwt-0.0.1
validation-api-1.0.0.GA
validation-api-1.0.0.GA-sources
xercesImpl-2.8.1

GWT SDK (2.5.0)
gwt-user
gwt-dev
validation-api-1.0.0.GA-sources
validation-api-1.0.0.GA

其他 jars：
junit
mysql-connector-java-5.1.6-bin
ojdbc5

希望我不会在这里弄得一团糟，希望你们能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:03:13.593

您可以使用以下原型：

[Mojo gwt-maven-插件](http://mojo.codehaus.org/gwt-maven-plugin/)

然后在 pom.xml 中添加 Hibernate 依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:47:34.403

只需右键单击您的项目 - 导航到构建路径 - 配置 -> Java 构建路径 -> 源选项卡 -> 将默认输出文件夹设置为**BGUSched/war/WEB-INF/classes**

![在此处输入图像描述](../Images/9b40869f23fc317295584fe5b2c05bff.png)

# jquery - 表格行切换上的 Jquery 更改图标

> ID：14364454
> 
> 赞同：0
> 
> 时间：2013-01-16T17:43:15.437
> 
> 标签：jquery, css

现在我有以下 Jquery，当单击表格行时，它会关闭它下面的行。

```
<script type="text/javascript">
$(function () {
    $("tr.spaceUnder").hide();
    $('tr:not(.spaceUnder)').click(function () {
        $(this).nextUntil('tr:not(.spaceUnder)').toggle();
    });
}); 
```

现在我想要的是当我单击切换其下的行的行时，显示一个打开/关闭图标或 +/- 任何东西。

这就是上面有开关的行的样子。

```
<tr class="countryRow categoryHeader">
        <td colspan="3" class="">
            <span class="listItemHeader">
                <%#((Item)Container.DataItem)["Name"]%>
            </span>
        </td>
        <td>
            <a href="#" style="float: right;"><img width="20"  src="/Images/sBackTopPic.png"></a>
        </td>
    </tr> 
```

因此，在切换时，我想更改行中第二个 td 中 a href 的 css 类，因此在初始加载时显示关闭图标，然后单击打开图标..然后再次单击关闭图标。所以我想知道如何使用我当前的切换逻辑在我的 href 上添加 css 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:34:21.780

您正在尝试做什么令人困惑。但是在您的点击功能下方，它会检查锚点以查看它是否具有类一，如果有，则删除该类并添加另一个类。如果不做相反的事情。

```
$(function () {
        $("tr.spaceUnder").hide();
        $('tr:not(.spaceUnder)').click(function () {
            $(this).nextUntil('tr:not(.spaceUnder)').toggle();
            if($('a', this).hasClass("class-one"))
            {
              $('a', this).removeClass("class-one");
              $('a', this).addClass("class-two");
            {
            else
            {
              $('a', this).removeClass("class-two");
              $('a', this).addClass("class-one");
            }
        });
    }); 
```

# authentication - Web Service 客户端在哪里设置用户名和密码？

> ID：14364456
> 
> 赞同：0
> 
> 时间：2013-01-16T17:43:20.673
> 
> 标签：authentication, wsdl, axis, eclipse-wtp, wsdl2java

我得到了这个 WSDL，我必须为它开发一个客户端（我一直在这里提出问题，哈哈）。

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="urn:ManterFornecedor" xmlns:s0="urn:ManterFornecedor" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <wsdl:types>
    <xsd:schema elementFormDefault="qualified" targetNamespace="urn:ManterFornecedor">
        <xsd:element name="Novo" type="s0:InputMapping1"/>
        <xsd:complexType name="InputMapping1">
            <xsd:sequence>
                <xsd:element name="NO_FORNECEDOR" type="xsd:string"/>
                <xsd:element name="DE_CONTRATO" type="xsd:string"/>
                <xsd:element name="DH_INICIO" nillable="true" type="xsd:dateTime"/>
                <xsd:element name="DH_FIM" nillable="true" type="xsd:dateTime"/>
                <xsd:element name="NO_PRODUTO" type="xsd:string"/>
                <xsd:element name="IC_STATUS" type="s0:IC_STATUSType" nillable="true"/>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:simpleType name="IC_STATUSType">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="Ativo"/>
                <xsd:enumeration value="Inativo"/>
            </xsd:restriction>
        </xsd:simpleType>
        <xsd:element name="NovoResponse" type="s0:OutputMapping1"/>
        <xsd:complexType name="OutputMapping1">
        <xsd:sequence>
            <xsd:element name="Id" type="xsd:string"/>
        </xsd:sequence>
        </xsd:complexType>
        <xsd:element name="AuthenticationInfo" type="s0:AuthenticationInfo"/>
        <xsd:complexType name="AuthenticationInfo">
        <xsd:sequence>
            <xsd:element name="userName" type="xsd:string"/>
            <xsd:element name="password" type="xsd:string"/>
            <xsd:element minOccurs="0" name="authentication" type="xsd:string"/>
            <xsd:element minOccurs="0" name="locale" type="xsd:string"/>
            <xsd:element minOccurs="0" name="timeZone" type="xsd:string"/>
        </xsd:sequence>
        </xsd:complexType>
    </xsd:schema>
    </wsdl:types>

    <wsdl:message name="NovoSoapOut">
        <wsdl:part element="s0:NovoResponse" name="parameters"></wsdl:part>
    </wsdl:message>

    <wsdl:message name="ARAuthenticate">
        <wsdl:part element="s0:AuthenticationInfo" name="parameters"></wsdl:part>
    </wsdl:message>

    <wsdl:message name="NovoSoapIn">
        <wsdl:part element="s0:Novo" name="parameters"></wsdl:part>
    </wsdl:message>

    <wsdl:portType name="PortPortType">
      <wsdl:operation name="Novo">
        <wsdl:input message="s0:NovoSoapIn"></wsdl:input>
        <wsdl:output message="s0:NovoSoapOut"></wsdl:output>
      </wsdl:operation>
    </wsdl:portType>

    <wsdl:binding name="PortSoapBinding" type="s0:PortPortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <wsdl:operation name="Novo">
            <soap:operation soapAction="urn:ManterFornecedor/Novo" style="document"/>
            <wsdl:input>
                <soap:header message="s0:ARAuthenticate" part="parameters" use="literal"></soap:header>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>

    <wsdl:service name="ManterFornecedorService">
        <wsdl:documentation>Fornecedor</wsdl:documentation>
        <wsdl:port binding="s0:PortSoapBinding" name="PortSoap">
            <soap:address location="http://somewhere&amp;webService=ManterFornecedor"/>
        </wsdl:port>
    </wsdl:service>

</wsdl:definitions> 
```

我提供了完整的 WSDL，但问题的重要部分是

```
 <soap:operation soapAction="urn:ManterFornecedor/Novo" style="document"/>
    <wsdl:input>
        <soap:header message="s0:ARAuthenticate" part="parameters" use="literal"></soap:header>
        <soap:body use="literal"/>
    </wsdl:input> 
```

如您所见，输入在其标头中有一条 ARAuthenticate 消息，即

```
<wsdl:message name="ARAuthenticate">
    <wsdl:part element="s0:AuthenticationInfo" name="parameters"></wsdl:part>
</wsdl:message>

<xsd:element name="AuthenticationInfo" type="s0:AuthenticationInfo"/>
<xsd:complexType name="AuthenticationInfo">
<xsd:sequence>
    <xsd:element name="userName" type="xsd:string"/>
    <xsd:element name="password" type="xsd:string"/>
    <xsd:element minOccurs="0" name="authentication" type="xsd:string"/>
    <xsd:element minOccurs="0" name="locale" type="xsd:string"/>
    <xsd:element minOccurs="0" name="timeZone" type="xsd:string"/>
</xsd:sequence>
</xsd:complexType> 
```

我使用 Eclipse 的 Web 服务资源管理器创建了一个 WS 客户端来测试这个 Web 服务，它成功了！此客户端具有要设置的用户名和密码字段。

好的，现在我需要使用这个客户端示例代码，并实现一个独立的（不是 Web UI）解决方案来收集信息并使用客户端将其发送到服务器。但它失败了，我相信这是因为身份验证。

我看到设置的用户名和密码的唯一地方是 PortSoapBindingStub.createCall()：

```
 org.apache.axis.client.Call _call = super._createCall();
    if (super.maintainSessionSet) {
        _call.setMaintainSession(super.maintainSession);
    }
    if (super.cachedUsername != null) {
        _call.setUsername(super.cachedUsername);
    }
    if (super.cachedPassword != null) {
        _call.setPassword(super.cachedPassword);
    }
    if (super.cachedEndpoint != null) {
        _call.setTargetEndpointAddress(super.cachedEndpoint);
    }
    if (super.cachedTimeout != null) {
        _call.setTimeout(super.cachedTimeout);
    }
    if (super.cachedPortName != null) {
        _call.setPortName(super.cachedPortName);
    } 
```

但是，这些缓存的东西是从哪里来的？我尝试编辑此代码并手动设置它们，但不断收到错误：

```
Exception in thread "main" AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: java.lang.ArrayIndexOutOfBoundsException: -1
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}hostname:myhost

java.lang.ArrayIndexOutOfBoundsException: -1
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown Source)
    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.transport.http.HTTPSender.readFromSocket(HTTPSender.java:796)
    at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:144)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at ManterFornecedor.PortSoapBindingStub.novo(PortSoapBindingStub.java:174)
    at ManterFornecedor.PortPortTypeProxy.novo(PortPortTypeProxy.java:50)
    at caixa.pedes.br.ManterFornecedor.main(ManterFornecedor.java:43) 
```

这是我的代码：

```
import java.net.MalformedURLException;
import java.rmi.RemoteException;
import javax.xml.rpc.ServiceException;
import org.apache.axis.AxisFault;
import org.apache.axis.client.Call;

import ManterFornecedor.*;

public class ManterFornecedor {

    public static void main(String[] args) throws RemoteException, ServiceException, MalformedURLException {

        InputMapping1 parameters = new InputMapping1(
                "fornecedor","contrato",java.util.Calendar.getInstance(), java.util.Calendar.getInstance(),
                "produto",IC_STATUSType.Ativo
                );

        java.net.URL endpoint = new java.net.URL("http://somewhere&amp;webService=ManterFornecedor");

        PortPortTypeProxy proxy = new PortPortTypeProxy();

        ManterFornecedorServiceLocator locator = new ManterFornecedorServiceLocator();
        ManterFornecedor.PortPortType port = locator.getPortSoap();

        PortSoapBindingStub client = new PortSoapBindingStub(endpoint,locator);

        ManterFornecedor.OutputMapping1 response = proxy.novo(parameters);

        System.out.println(response);

    }

} 
```

编辑：如您所见，我是 Web 服务的新手，我有点迷路了。我不知道确切的原因，但是在 Proxy、Locator 和 Stub 中都可以使用 novo() 方法。我将阅读更多关于这些设计模式的信息，因为我对它们也很陌生，而同时使用这三种设计模式更加麻烦。

用于调用 WSDL 生成的运算符的最佳对象是什么？不幸的是，在 Eclipse 中创建的客户端代码使用 JSP 来接收参数，并且我无法将示例代码正确地隔离到真实客户端，以便我可以开发我的代码并调用客户端的操作员。

如果客户端被封装在一个唯一的类中，我只需要提供它的配置（端点、身份验证等）然后调用操作员就会容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-11T11:18:47.383

你必须把这段代码放在`setRequestHeaders(_call);`课堂`PortTypeSoapBindingStub`上

```
 try {
        SOAPHeaderElement sopElement = new SOAPHeaderElement("urn:AuthenticationInfo","AuthenticationInfo") ;
        sopElement.addChildElement("userName").addTextNode("XXXXX") ;
        sopElement.addChildElement("password").addTextNode("XXXX");
        sopElement.addChildElement("authentication").addTextNode("");
        sopElement.addChildElement("locale").addTextNode("");
        sopElement.addChildElement("timeZone").addTextNode("");

        _call.addHeader(sopElement);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-22T10:10:53.953

我也努力实现同样的目标，后来我发现在服务器上使用的 mac 机器中没有启用 NTLM 身份验证以下代码对我有用

```
public static void testNavisionMicrosoft() {
    static String baseURL = "file:C://locapath//customer.wsdl";
    URL url = null;
    try {
        url = new URL(baseURL);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

    URL url2 = null;
    try {
        url2 = new URL("http://localhost:8080/customer?wsdl");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

    try {
        final String username = "user";
        final String password = "paswd";
        Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password
                        .toCharArray());
            }
        });

        QName qname = new QName("search for soapActionin your wsdl file",
                "search for service name in wsdl file");

        Service service = Service.create(url, qname);
        CRMCustomerPort proxy = service.getPort(CRMCustomerPort.class);
        Map<String, Object> requestContext = ((BindingProvider) proxy)
                .getRequestContext();
        requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
        requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);

        Map<String, List<String>> headers = new HashMap<String, List<String>>();
        headers.put("Timeout", Collections.singletonList("10000"));
        requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, headers);

        CRMCustomer data = proxy.read("AIL0003190");
    } catch (Exception e) {
        e.printStackTrace();
        throw new RuntimeException(
                "Error occurred in operations web service client initialization",
                e);
    }
} 
```

# c# - Windows Phone 8 - 以更高分辨率运行 XNA

> ID：14364457
> 
> 赞同：0
> 
> 时间：2013-01-16T17:43:22.560
> 
> 标签：c#, .net, xna, windows-phone-8, windows-phone

我们有一个 XNA 游戏，它可以在 Windows Phone 8 和 7.1 上运行。

游戏中的所有内容都可以在 WXGA 等更高分辨率的手机上运行，​​但我们的游戏以 800x480 运行，因为这是 WP7 唯一支持的尺寸。

有没有办法为 XNA 检测更高分辨率的手机`PreferredBackBufferWidth`并适当地设置和`PreferredBackbufferHeight`？

或者基本上没有办法通过 Windows Phone 8 上可用的 XNA 支持来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:58:35.817

XNA 可能不支持这一点，但看起来 MonoGame（适用于 WP8 的 XNA 的开源端口）将支持更高的分辨率。有关入门，请参阅[诺基亚关于 MonoGame 和 WP8 的主题](http://www.developer.nokia.com/Community/Wiki/XNA_Games_On_Windows_Phone_8_with_Monogame)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:44:32.390

您需要将游戏移植到 DirectX for WP8 以支持更高的分辨率。

# sql - 在不知道其中一个字段的情况下选择唯一组合

> ID：14364460
> 
> 赞同：2
> 
> 时间：2013-01-16T17:43:23.347
> 
> 标签：sql, sql-server-2008

为了解决这个问题，我稍微简化了一点。涉及更多表，但这是问题的核心：

所以我在 MSSQL 2008 中有一个只有 2 列的表。

```
GroupID   |  Culture
1         |  en-gb
2         |  fr-fr
3         |  en-gb
3         |  fr-fr
4         |  en-gb
4         |  fr-fr
4         |  es-es 
```

我不知道组 ID 是什么，但我希望能够执行以下操作：

1) 仅选择 en-gb - 返回 GroupID 为 1 的唯一行，而不是 GroupID 3 和 4 的行
2) 选择 en-gb AND fr-fr 给我 GroupID 3

我确实环顾四周寻找任何这样的例子 - 但它可能我什至没有想到正确的搜索词。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:50:09.147

这个问题并不完全清楚；如果您只是想要第一个符合您的条件的组，请使用以下内容：

1.  只需选择匹配的第一个组 id：

    ```
    SELECT TOP 1 GroupID 
    FROM myTable 
    WHERE Culture = 'en-gb' 
    ORDER BY GroupID 
    ```

2.  有点棘手，但遵循相同的概念并找到包含*两者*的组：

    ```
    SELECT TOP 1 GroupID
    FROM
    (
        SELECT GroupID
        FROM myTable
        WHERE Culture = 'en-gb'
        INTERSECT
        SELECT GroupID
        FROM myTable
        WHERE Culture = 'fr-fr'
    ) x
    ORDER BY GroupID 
    ```

* * *

如果您正在寻找*完全*且*完全*符合您的条件的组，即没有额外行的组，您可以简单地执行以下操作：

```
SELECT GroupID
FROM myTable
WHERE Culture IN (<your criteria list>)
GROUP BY GroupID
HAVING COUNT(DISTINCT Culture) = <count of cultures in your criteria list>
EXCEPT
SELECT GroupID
FROM myTable
WHERE Culture NOT IN (<your criteria list>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:47:30.540

假设您在`'en-gb','fr-fr'`下面搜索。

单程

```
SELECT GroupID
FROM   T
GROUP  BY GroupID
HAVING COUNT (CASE
                WHEN Culture IN ( 'en-gb', 'fr-fr' ) THEN Culture
              END) = 2
       AND COUNT(Culture) = 2 
```

（编辑：`DISTINCT`在确认存在唯一约束以保证不需要此约束后删除）

# jquery - 非常简单的内容滑块

> ID：14364462
> 
> 赞同：0
> 
> 时间：2013-01-16T17:43:25.690
> 
> 标签：jquery

我正在尝试从 [http://tympanus.net/codrops/2010/04/28/pretty-simple-content-slider-with-jquery-and-css3/](http://tympanus.net/codrops/2010/04/28/pretty-simple-content-slider-with-jquery-and-css3/)实现非常简单的内容滑块 但是当我尝试把第二个模块两次相同的代码不起作用。

有任何想法吗？谢谢

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
     <html>
     <head>
    <title>Pretty Simple Content Slider with jQuery and CSS3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Pretty Simple Content Slider with jQuery and CSS3" />
    <meta name="keywords" content="jquery,css3, content slider, slide, auto-play"/>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>

    <style>
        *{
            margin:0;
            padding:0;
        }
        body{
            font-family:Arial;
            background:#C1C7D5 url(title.png) no-repeat top center;
        }
        a.back{
            background:transparent url(back.png) no-repeat top left;
            position:fixed;
            width:150px;
            height:27px;
            outline:none;
            bottom:0px;
            left:0px;
        }
        #content{
            margin:150px auto 10px auto;
        }
        .reference{
            clear:both;
            width:800px;
            margin:30px auto;
        }
        .reference p a{
            text-transform:uppercase;
            text-shadow:1px 1px 1px #fff;
            color:#666;
            text-decoration:none;
            font-size:10px;
        }
        .reference p a:hover{
            color:#333;
        }
    </style>
</head>
<body>
    <div id="content">
        <a class="back" href=""></a>

        <div class="rotator">
            <ul id="rotmenu">
                <li>
                    <a href="rot1">Portfolio</a>
                    <div style="display:none;">
                        <div class="info_image">1.jpg</div>
                        <div class="info_heading">Our Works</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident... 
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot2">Services</a>
                    <div style="display:none;">
                        <div class="info_image">2.jpg</div>
                        <div class="info_heading">We serve</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident...
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot3">Contact</a>
                    <div style="display:none;">
                        <div class="info_image">3.jpg</div>
                        <div class="info_heading">Get in touch</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident...
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot4">Experiments</a>
                    <div style="display:none;">
                        <div class="info_image">4.jpg</div>
                        <div class="info_heading">We do crazy stuff</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident...
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot5">Applications</a>
                    <div style="display:none;">
                        <div class="info_image">5.jpg</div>
                        <div class="info_heading">Working things</div>
                        <div class="info_description">
                            At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium 
            voluptatum deleniti atque corrupti quos dolores et 
            quas molestias excepturi sint occaecati cupiditate 
            non provident... 
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
            </ul>
            <div id="rot1">
                <img src="" width="800" height="300" class="bg" alt=""/>
                <div class="heading">
                    <h1></h1>
                </div>
                <div class="description">
                    <p></p>

                </div>    
            </div>
        </div>
    </div>
    <div class="reference">
        <p><a href="http://www.flickr.com/photos/jrparis/106493273/">1 http://www.flickr.com/photos/jrparis/106493273/</a></p>
        <p><a href="http://www.flickr.com/photos/aussiegall/2104652119/">2 http://www.flickr.com/photos/aussiegall/2104652119/</a></p>
        <p><a href="http://www.flickr.com/photos/intherough/4396089594/">3 http://www.flickr.com/photos/intherough/4396089594/</a></p>
        <p><a href="http://www.flickr.com/photos/lightknight/628680053/">4 http://www.flickr.com/photos/lightknight/628680053/</a></p>
        <p><a href="http://www.flickr.com/photos/nguyendai/404631197/">5 http://www.flickr.com/photos/nguyendai/404631197/</a></p>
    </div>
    <div id="content">
        <a class="back" href=""></a>

        <div class="rotator">
            <ul id="rotmenu">
                <li>
                    <a href="rot1">Portfolio</a>
                    <div style="display:none;">
                        <div class="info_image">1.jpg</div>
                        <div class="info_heading">Our Works</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident... 
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot2">Services</a>
                    <div style="display:none;">
                        <div class="info_image">2.jpg</div>
                        <div class="info_heading">We serve</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident...
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot3">Contact</a>
                    <div style="display:none;">
                        <div class="info_image">3.jpg</div>
                        <div class="info_heading">Get in touch</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident...
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot4">Experiments</a>
                    <div style="display:none;">
                        <div class="info_image">4.jpg</div>
                        <div class="info_heading">We do crazy stuff</div>
                        <div class="info_description">
             At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium
            voluptatum deleniti atque corrupti quos dolores et
            quas molestias excepturi sint occaecati cupiditate
            non provident...
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="rot5">Applications</a>
                    <div style="display:none;">
                        <div class="info_image">5.jpg</div>
                        <div class="info_heading">Working things</div>
                        <div class="info_description">
                            At vero eos et accusamus et iusto odio
            dignissimos ducimus qui blanditiis praesentium 
            voluptatum deleniti atque corrupti quos dolores et 
            quas molestias excepturi sint occaecati cupiditate 
            non provident... 
                            <a href="#" class="more">Read more</a>
                        </div>
                    </div>
                </li>
            </ul>
            <div id="rot1">
                <img src="" width="800" height="300" class="bg" alt="" style="left: 0px; top: 0px"/>
                <div class="heading">
                    <h1></h1>
                </div>
                <div class="description">
                    <p></p>

                </div>    
            </div>
        </div>
    </div>

    <!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>
    <script type="text/javascript">

        $(function() {
            var current = 1;

            var iterate     = function(){
                var i = parseInt(current+1);
                var lis = $('#rotmenu').children('li').size();
                if(i>lis) i = 1;
                display($('#rotmenu li:nth-child('+i+')'));
            }
            display($('#rotmenu li:first'));
            var slidetime = setInterval(iterate,3000);

            $('#rotmenu li').bind('click',function(e){
                clearTimeout(slidetime);
                display($(this));
                e.preventDefault();
            });

            function display(elem){
                var $this   = elem;
                var repeat  = false;
                if(current == parseInt($this.index() + 1))
                    repeat = true;

                if(!repeat)
                    $this.parent().find('li:nth-child('+current+') a').stop(true,true).animate({'marginRight':'-20px'},300,function(){
                        $(this).animate({'opacity':'0.7'},700);
                    });

                current = parseInt($this.index() + 2);

                var elem = $('a',$this);

                    elem.stop(true,true).animate({'marginRight':'0px','opacity':'1.0'},300);

                var info_elem = elem.next();
                $('#rot1 .heading').animate({'left':'-420px'}, 500,'easeOutCirc',function(){
                    $('h1',$(this)).html(info_elem.find('.info_heading').html());
                    $(this).animate({'left':'0px'},400,'easeInOutQuad');
                });

                $('#rot1 .description').animate({'bottom':'-270px'},500,'easeOutCirc',function(){
                    $('p',$(this)).html(info_elem.find('.info_description').html());
                    $(this).animate({'bottom':'0px'},400,'easeInOutQuad');
                })
                $('#rot1').prepend(
                $('<img/>',{
                    style   :   'opacity:0',
                    className : 'bg'
                }).load(
                function(){
                    $(this).animate({'opacity':'1'},600);
                    $('#rot1 img:first').next().animate({'opacity':'0'},700,function(){
                        $(this).remove();
                    });
                }
            ).attr('src','images/'+info_elem.find('.info_image').html()).attr('width','800').attr('height','300')
            );
            }
        });
    </script>
</body> 
```

# javascript - 在 JQuery 函数中保存本地数据

> ID：14364463
> 
> 赞同：0
> 
> 时间：2013-01-16T17:43:26.803
> 
> 标签：javascript, jquery

我想创建两个 JQuery 函数。其中一个将使用在另一个函数中创建的数据。说：

```
jQuery.fn.myScroller = function (child) {
    var $moveable = this.children(child);
    var $children = this.children(child).children();

    posl = posl.replace('px', '');
    post = post.replace('px', '');
    var varList = [];
    $children.each(function () {
        var currVar = {};
        currVar.w = $(this).width();
        varList.push(currVar);
    });
    // I want to save varList variable somehow.
    this.varList = varList; // (1)
};

jQuery.fn.scrollUnitLeft = function () {
    // Now I need to use this varList if this function called
    // But the following returns undefined.
    // However, I've saved it inside this at (1)
    console.log(this.varList)
// More code...
}

$('#main_div').myScroller("#dummydiv");
$('#main_div').scrollUnitLeft(); 
```

正如我在代码中的注释中解释的那样，这不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:49:39.027

按照建议创建名称空间或全局变量对我来说看起来并不干净。您已经在扩展 jQuery，因此将其设为 jQuery 变量：

```
jQuery.fn.varList = varList; 
```

编辑：我真的不知道 jQuery 内部。如果`fn`仅用于函数，则将其放入`jQuery`自身或编写getter

```
jQuery.fn.getVarList = function () {
    return varList;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:48:47.500

您对`this`我的理解看起来有点错误（请原谅我，您可能比我更有经验）！`this`指函数的调用者。两次都是 div `main_div`。尝试使用在两个函数之外声明的全局变量或`data`在第一个函数中的 div 上使用属性，并在第二个函数中访问该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:55:42.667

当您运行 jQuery 函数时，`this`指的是每种情况下使用的 jQuery 对象实例。

在您的代码中，您创建了两个 jQuery 对象实例（每个`$(...)`调用一个），因此数据在第一个实例中设置，因此对第二个实例不可用。

如果您要在同一个 jQuery 对象实例上运行这两种方法，它们将按预期工作。

```
jQuery.fn.mySet = function(){
  this.myVar = this.attr('id');
};

jQuery.fn.myGet = function(){
  console.log(this.myVar);
}

$('#a_div').mySet();
$('#a_div').myGet(); // outputs 'undefined'

var $other_div = $('#other_div');
$other_div.mySet();
$other_div.myGet(); // outputs 'other_div' 
```

为了实现您的意图，您必须将数据保存在 jQuery 对象实例之外的其他地方。jQuery 提供了一种通过该方法执行此操作的`.data()`方法。此方法允许您将数据附加到 DOM 元素。检查其[文档](http://api.jquery.com/data/)。

```
jQuery.fn.myRealSet = function(){
  this.data('myVar', this.attr('id'));
};

jQuery.fn.myRealGet = function(){
  console.log(this.data('myVar'));
}

$('#final_div').myRealSet();
$('#final_div').myRealGet(); // outputs 'final_div' 
```

你可以在这里测试这个片段：http: [//jsfiddle.net/HPjYn/](http://jsfiddle.net/HPjYn/)

**编辑：**我还不能评论其他人的答案，但是按照建议添加一个 jQuery 原型变量将使数据可以从任何 jQuery 对象实例中获得，我认为这不是它的本意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T17:47:26.993

您可以在全局范围内创建命名空间：

```
window.yourNamespace = {}; 
```

然后将您的`varList`变量放在该名称空间中：

```
yourNamespace.varList = []; //Whatever you want here 
```

这样，变量将可用于您的两个函数（或任何函数）。

# bash - 如何使用 AWK 从系统日期计算年龄>

> ID：14364475
> 
> 赞同：0
> 
> 时间：2013-01-16T17:44:10.677
> 
> 标签：bash, shell, awk

> **可能重复：**
> [bash 计算人的年龄并读取到 csv 文件？](https://stackoverflow.com/questions/14348843/bash-calculate-age-of-person-and-read-to-csv-file)

我正在从 CSV 文件中的出生日期计算参与者的年龄。我正在使用此代码，并将 DOB 与当前系统时间进行比较并计算年龄：

```
echo "Dave,ws245f,09/12/1982"|awk -F'/|,' '{b=mktime($5" "$4" "$3" 00 00 00 00");a=(systime()-b)/(365*24*60*60);a=a==int(a)?a:int(a)+1;print $0","a}' 
```

输出是

```
Dave,ws245f,09/12/1982,31 
```

期望的输出

```
Dave,ws245f,09/12/1982,30 
```

注意：用户在 12 月 12 日 dd/mm/yyyy 之前不是 30 岁，因此计算错误。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:29:56.160

试试这个：

```
echo "Dave,ws245f,09/12/1982"|awk -F'/|,' '{b=mktime($5" "$4" "$3" 00 00 00 00");a=(systime()-b)/(365*24*60*60);a+=a<0?-0.5:0.5;a=int(a);print $0","a}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:52:25.643

替换`a=a==int(a)?a:int(a)+1`为怎么样`a=a==int(a)?a:int(a)`？如果你有 0.5 年，你没有 1 年，而是 0 年（和 6 个月）

这意味着你可以说：`a=int(a)`

# http-status-code-404 - 命令行 HTML 效果

> ID：14364477
> 
> 赞同：0
> 
> 时间：2013-01-16T17:44:11.217
> 
> 标签：http-status-code-404

我正在寻找 HTML 命令行效果。

基本上，我正在创建一个 404 页面，并且我想输入一个假命令行，每隔一两秒显示一次新文本。这是可能的，还是我在浪费时间？

我可能需要使用 Flash 执行此操作，但我不想这样做。

有任何想法吗？

FS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:53:51.603

Javascript 将是微不足道的，就像：

```
<html>
<head>
<script type="text/javascript">
<!--
function refreshparentclose()
{
 window.opener.location.reload();
 window.close();
}

-->
</script>

</head>
<body onload="setTimeout('refreshparentclose();', 3000);" >
<br>
Boo!

</body> 
```

将“window.close”替换为生成“命令”以显示。Flash在这里是矫枉过正的。

# android - 通过静态按钮更改活动的动态片段

> ID：14364479
> 
> 赞同：0
> 
> 时间：2013-01-16T17:44:14.250
> 
> 标签：android, android-fragments

我将首先展示我想用图片做什么，请看一下

![在此处输入图像描述](../Images/862d04026db262d62ef77d5894fc884e.png)

如您所见，我在主活动中有三个按钮，当我按下 BTN_1 时，我希望片段初始化一个活动，让我们称之为 Activity_A ，它具有自己的布局和功能，与 BTN_2 和 BTN_3 相同，每个按钮开始一个不同的活动，按钮是静态的，它们永远留在那里。

基本上它的一个活动是静态的，其中包含一个动态片段，该片段动态更改为不同的活动

我有点迷路了，所以任何帮助都将不胜感激：教程，代码示例，提示

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:51:28.207

假设您使用的是 API11+，我认为“带有选项卡式导航的操作栏”模式将为您提供很好的服务。[谷歌在此处](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)解释了这种模式，并附有示例代码。

如果您需要支持比 Honeycomb 更早的版本，您可以使用[ActionBarSherlock](http://actionbarsherlock.com/)做同样的事情。

基本思想是您有一个带有选项卡的活动，这些选项卡会根据屏幕大小自动适当放置。当一个选项卡被点击时，您可以通过将适当的 Fragment 加载到应用程序的内容区域来处理和响应。

# css - 为什么在 CSS 百分比宽度中使用长小数点值？

> ID：14364485
> 
> 赞同：18
> 
> 时间：2013-01-16T17:44:32.310
> 
> 标签：css, width, decimal, responsive-design, fluid

我在自己的工作中注意到，当宽度设置为 33.333% 而不是仅 33% 时，3 个流体列可以更好地填充其父元素。在研究各种 CSS 框架（即 bootstrap.css）时，我还注意到它们的列宽指定了 14 位小数！这似乎是过度或聪明......但我不知道哪个。

那么有这么多小数位的价值/好处是什么？根据我收集到的信息，关于您是否应该避免使用小数位或利用小数位存在公开辩论，我想知道我是否应该对此感兴趣，或者只是不担心。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T12:11:32.893

在某些情况下是必需的。我正在使用 Twitter Bootstrap 的网站上工作，该网站有 6 个 div 延伸整个网站的宽度。如果我只是让每个 16.66% 的宽度在最后留下一个明显的间隙，如果我让宽度 16.67% 一个 div 被推到下面的行。这意味着让 div 填充整个空间，我必须将宽度设置为 16.6667%，这在 Chrome 和 Firefox 中完美运行，但似乎 Safari 和 IE 将小数点四舍五入到 2 位，所以我只剩下一个使用它们时的间隙。所以有时它可能看起来过度，但有时它实际上是需要的。

戴夫

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-21T00:38:27.517

您可能会争辩说，小数点后 4 位对于当前技术来说是明智的。

使用`width: 33.33%`3 列就可以了——即使是 4k 屏幕也不会显示间隙（4096px 的 99.99% = 4,095.5px，四舍五入为 4096px，因此没有间隙）

但其他比率可能。

4k 屏幕上的 1 像素是 1/4096 = `width: 0.00024%`，因此 4 dp 可以保证没有间隙。[8k 屏幕](https://en.wikipedia.org/wiki/8K_resolution#Resolutions)也是安全的……事实上，如果您的尺寸精确到 4 dp，则需要 20,000 像素宽的屏幕才有可能出现间隙

…… 浏览器支持允许，当然！有些人已经注意到一些浏览器会截断到 2 dp，破坏运动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T18:10:26.873

因为`33 ≠ 33.33333`.

如果您将一个 3 设置`div`为 33%，则还有 1% 需要填充。这只是合乎逻辑的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-26T17:17:03.060

尽管浏览器可能舍入不同，但实际上不需要 14 位小数，因为最终转换为像素的值可能是相同的，无论使用 14 位还是 3 位小数。

**14 位小数的原因很可能是因为开发人员正在使用 css 预处理器（如 less），其中 div 的宽度计算如下
`width: 100% / @columns;`**

他们的预处理器可能只是使用它计算的完整浮点数作为实际的 css 值，包括所有小数位，而不是截断它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-20T01:09:59.220

把它写成其他答案并没有真正使用任何具体的事实或数据。

制作 Sass 必须实际实现此功能的人可能是一个很好的榜样。

node-sass 的默认精度级别是小数点后 5 位，这显然是他们做出的决定，因为 JS 浮点数可以超过 5 位。

[https://github.com/sass/node-sass#precision](https://github.com/sass/node-sass#precision)

dart-sass 项目还提到：

> Dart Sass 默认为所有现有浏览器提供足够高的精度，并且使这种可定制性会大大降低代码效率。

5 位小数似乎就足够了，因为浏览器视口通常会达到数千 (<10^4)，并且子像素精度不超过小数点后一位 (<10^(-1))

10^4 / 10^(-1) = 10^5，所以小数点后 5 位应该足够了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-21T09:34:05.307

Bootstrap 4.3 使用 6 位小数。这符合 float32 标准。（32 位标准）

# wordpress - 自定义 wp_query 上的 Wordpress 分页（next_posts_link）未显示

> ID：14364488
> 
> 赞同：4
> 
> 时间：2013-01-16T17:44:43.683
> 
> 标签：wordpress, pagination

有人问过类似的问题，但我无法弄清楚我想念什么！

我有一个自定义类型字段的静态页面，类似于常规存档或类别页面，但我无法使分页工作。
如果我*手动*转到第 2 页（即添加到链接 .../page/2），我会得到“较新的帖子”链接，但**不是**在旧帖子的第一页上！next_posts_link() 似乎不存在（没有注入 div 或任何东西）

这是我的代码：

```
 $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

  $query_args = array (
        'post_type' => 'bb_articoli',
        'meta_key' => 'bb_data-pubblicazione',
        'orderby' => 'meta_value_num',
        'order' => 'DESC',
        'posts_per_page' => 2,      //for testing purposes
        'paged' => $paged,
        'meta_query' => array(
            array('key' => 'bb_fonte-pubblicazione',
                  'value' => 2,
                  'compare' => '='
                  )
        )
  );

  $query = new WP_Query($query_args);

    if ( $query->have_posts() ) :
       while ( $query->have_posts()) :
             $query->the_post();
             get_template_part( 'content' , get_post_format());
       endwhile;

     next_posts_link();
     previous_posts_link();

     else :
         get_template_part( 'content', 'none' );
 endif; 
```

任何帮助是极大的赞赏。谢谢
乙

仅供参考：在 22 日使用儿童主题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T10:19:57.517

您的解决方案有效的原因是您正在覆盖全局 $wp_query 变量。更好的解决方案是将 $query->max_num_pages 添加到 next_posts_link()。

```
next_posts_link('&laquo; Older Entries', $query->max_num_pages) 
```

其中 $query 是您新创建的对象的名称。这样您就可以保留 $wp_query。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T16:51:56.377

好的，想通了，所以想分享以供将来参考：

**由于某些未知原因 next_posts_link() 和 previous_posts_link() 只有在调用查询对象时才能正常工作`$wp_query`！**

因此，相应地更改您的查询对象可以使整个工作正常：

```
$wp_query = new WP_Query($query_args);

if ( $wp_query->have_posts() ) :
   while ( $wp_query->have_posts()) :
         $wp_query->the_post();
           // do something
   endwhile;

 next_posts_link();
 previous_posts_link(); 
```

对我有用，但我没有彻底测试过。据我所知，这在任何地方都没有记录，当然也没有在法典中。[在 madhavaji 的评论 4 中](http://wordpress.org/support/topic/wp_query-amp-pagination-not-working)找到了答案。

干杯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-03T14:11:22.623

我遇到过同样的问题。我尝试了所有解决方案，但没有一个对我有帮助。

因此，对于那些无法通过上述解决方案解决此问题的人，我所做的是：

```
<?php
    global $wp_query, $paged;

    if( get_query_var('paged') ) {
        $paged = get_query_var('paged');
    }else if ( get_query_var('page') ) {
        $paged = get_query_var('page');
    }else{
        $paged = 1;
    }

    $wp_query = null;
    $args = array(
        'post_type' => array("fashion", "tv", "sport"),
        'orderby'=>'date',
        'order'=>'DESC',
        'posts_per_page' => 5,
        'paged' => $paged
    );
    $wp_query = new WP_Query();
    $wp_query->query( $args );

    while ($wp_query->have_posts()) : $wp_query->the_post();
        /* YOUR CONTENT HERE */
    endwhile;

    next_posts_link('next');
    previous_posts_link('previous');

    wp_reset_query();
?> 
```

**重要**的是使用全局变量开始您的代码，因为`next_posts_link()`and`previous_posts_link()`函数正在读取`global $paged`and`$wp_query`值。

我希望我能帮上忙！

# sql - SQL Server - 来自具有相同 WHERE 子句的多个表的多个计数

> ID：14364495
> 
> 赞同：0
> 
> 时间：2013-01-16T17:45:04.997
> 
> 标签：sql, sql-server, count, sum, subquery

我需要来自多个表的多个计数，但所有表都与相同的表连接并且具有相同的 where 子句。我得到了正确的结果，但是，在一个非常大而且很慢的查询中，我想学习如何改进它。

我必须从表中计算：

*   奥科伦西亚斯
*   跟进
*   商业建议书
*   Propostas DeLocacao
*   PedidosDeVendas

和 3 SUM，全部来自 PedidosDeVendas 表。

所有这些查询都与： - Empresas - PedidosDeVendaXItens

并且所有查询都有相同的 WHERE 子句： - WHERE SolicitanteID = {User ID} AND Data >= '{Initial Date}' AND Data <= '{Final Date}'

这是返回我需要的所有结果的查询：

```
SELECT U.[ID] AS UniqKey, U.NomeCompleto, R.Regiao,    

(SELECT Count(*)    
FROM Ocorrencias O    
INNER JOIN Nomes N ON (O.ClientesID = N.Codigo AND O.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
WHERE O.UsuariosID = U.[ID]    
AND MR.ID_Regiao = R.uniqKey    
AND O.Data >= '2012-12-01 00:00:00' AND O.Data <= '2012-12-31 23:59:59') AS Ocorrencias,    

(SELECT Count(*)    
FROM FollowUp F    
INNER JOIN Nomes N ON (F.ClienteID = N.Codigo AND F.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
WHERE SolicitanteID = U.[ID]    
AND MR.ID_Regiao = R.uniqKey    
AND Data >= '2012-12-01 00:00:00' AND Data <= '2012-12-31 23:59:59') AS FollowUps,    

(SELECT Count(*)    
FROM v_PropostaComercial PC    
INNER JOIN Nomes N ON (PC.ClienteID = N.Codigo AND PC.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
WHERE PC.SolicitanteID = U.[ID]    
AND MR.ID_Regiao = R.uniqKey    
AND PC.Data >= '2012-12-01 00:00:00' AND PC.Data <= '2012-12-31 23:59:59') AS PropostasComerciais,                  

(SELECT Count(*)    
FROM PropostaDeLocacao PL    
INNER JOIN Nomes N ON (PL.ClienteID = N.Codigo AND PL.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
WHERE PL.ResponsavelID = U.[ID]    
AND MR.ID_Regiao = R.uniqKey    
AND PL.Data >= '2012-12-01 00:00:00' AND PL.Data <= '2012-12-31 23:59:59') AS PropostasDeLocacao,    

(SELECT Count(*)    
FROM PedidosDeVenda PV    
INNER JOIN Nomes N ON (PV.ClienteID = N.Codigo AND PV.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
WHERE PV.SolicitanteID = U.[ID]    
AND MR.ID_Regiao = R.uniqKey    
AND PV.Data >= '2012-12-01 00:00:00' AND PV.Data <= '2012-12-31 23:59:59') AS PedidosDeVenda,                   

(SELECT SUM(PVI.Valor)    
FROM PedidosDeVenda PV    
INNER JOIN Empresas N ON (PV.ClienteID = N.Codigo AND PV.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
INNER JOIN PedidosDeVendaXItens PVI ON PVI.PedidoDeVendaID = PV.[ID]    
INNER JOIN Modelos M ON PVI.ProdutoID = M.[ID]    
WHERE PV.SolicitanteID = U.[ID]    
AND MR.ID_Regiao = R.uniqKey
AND PV.Data >= '2012-12-01 00:00:00' AND PV.Data <= '2012-12-31 23:59:59') As TotalPedidosDeVenda,    

(SELECT SUM(PVI.Valor)    
FROM PedidosDeVenda PV    
INNER JOIN Nomes N ON (PV.ClienteID = N.Codigo AND PV.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
INNER JOIN PedidosDeVendaXItens PVI ON PVI.PedidoDeVendaID = PV.[ID]    
INNER JOIN Modelos M ON PVI.ProdutoID = M.[ID]    
WHERE PV.SolicitanteID = U.[ID]    
AND N.TipoEmpresa = 'PU'    
AND PV.ClienteID <> U.ClienteID    
AND MR.ID_Regiao = R.uniqKey    
AND PV.Data >= '2012-12-01 00:00:00' AND PV.Data <= '2012-12-31 23:59:59') As TotalVendasPublicas,    

(SELECT SUM(PVI.Valor)    
FROM PedidosDeVenda PV    
INNER JOIN Nomes N ON (PV.ClienteID = N.Codigo AND PV.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
INNER JOIN PedidosDeVendaXItens PVI ON PVI.PedidoDeVendaID = PV.[ID]    
INNER JOIN Modelos M ON PVI.ProdutoID = M.[ID]    
WHERE PV.SolicitanteID = U.[ID]    
AND N.TipoEmpresa = 'PR'    
AND PV.ClienteID <> U.ClienteID    
AND MR.ID_Regiao = R.uniqKey    
AND PV.Data >= '2012-12-01 00:00:00' AND PV.Data <= '2012-12-31 23:59:59') As TotalVendasPrivadas,    

(SELECT SUM(PVI.Valor)    
FROM PedidosDeVenda PV    
INNER JOIN Nomes N ON (PV.ClienteID = N.Codigo AND PV.SubCadastro = N.SubCadastro)    
INNER JOIN Municipios_Regiao MR ON N.ID_Municipio = MR.ID_Municipio    
INNER JOIN PedidosDeVendaXItens PVI ON PVI.PedidoDeVendaID = PV.[ID]    
INNER JOIN Modelos M ON PVI.ProdutoID = M.[ID]    
WHERE PV.SolicitanteID = U.[ID]    
AND PV.ClienteID = U.ClienteID    
AND MR.ID_Regiao = R.uniqKey    
AND PV.Data >= '2012-12-01 00:00:00' AND PV.Data <= '2012-12-31 23:59:59') As TotalVendasProprias    

FROM Usuarios U    
INNER JOIN Regioes_Usuario RU ON U.[ID] = RU.ID_Usuario    
INNER JOIN Regioes R ON RU.ID_Regiao = R.uniqKey    
WHERE U.Representante = 64        
ORDER BY R.Regiao, U.NomeCompleto; 
```

有什么技巧可以让我的查询更快更短吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:05:42.553

您不应该在主查询内的 select 内进行密集的嵌套查询，因为我相信每次在外部发生连接时都会执行每个嵌套查询。

而是考虑先声明变量并分配这些变量。

像

```
declare @outsidepredicate int, @Count1 int, @Count 2 int;

select @outsidepredicate = value from sharedtable for expressions

select @Count1 = count(*) 
from table1 t (nolock) 
 join table2 tt (nolock) on t.idshared = tt.idshared
where outsidepredicatecolumn = @outsidepredicate

select @Count2 = count(*) 
from table3 t (nolock) 
 join table4 tt (nolock) on t.idshared = tt.idshared
where outsidepredicatecolumn = @outsidepredicate 
```

然后你可以像这样进行常规测试：

```
select 
    @Count1
,   @Count2
,   valuefrommain
from tableMain m (nolock) 
 join tableSide s (nolock) on m.idshared = s.idshared 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T12:05:33.977

因此，在深入研究了查询之后，我认为最好的办法是减少对相同表的重新查询。

如果有错字，请原谅.. 有趣的是不理解名称...

试试这个：

```
SELECT 
    U.[ID] AS UniqKey, 
    U.NomeCompleto, 
    R.Regiao,    
    COUNT(O.ClientesID) Ocorrencias,
    COUNT(F.ClienteID) FollowUps,
    COUNT(P.SolicitanteID) PropostasComerciais,
    COUNT(PL.ResponsavelID) PropostasDeLocacao,
    COUNT(PV.SolicitanteID) PedidosDeVenda,
    COUNT(PVTotal.SolicitanteID) TotalPedidosDeVenda,
    SUM(PVTotalVendasPublicas.Valor) TotalVendasPublicas,
    SUM(PVTotalVendasPrivadas.Valor) TotalVendasPrivadas,
    SUM(PVTotalVendasProprias.Valor) TotalVendasProprias 
FROM Usuarios U    
    JOIN Regioes_Usuario RU 
        ON U.[ID] = RU.ID_Usuario    
    JOIN Regioes R 
        ON RU.ID_Regiao = R.uniqKey     
    JOIN Municipios_Regiao MR 
        ON MR.ID_Regiao = R.uniqKey    
    LEFT JOIN Nomes N 
        ON N.ID_Municipio = MR.ID_Municipio
    LEFT JOIN Ocorrencias O 
        ON O.ClientesID = N.Codigo 
        AND O.SubCadastro = N.SubCadastro 
        AND O.UsuariosID = U.[ID]
    LEFT JOIN FollowUp F
        ON F.SolicitanteID = U.[ID]
        AND F.ClienteID = N.Codigo    
        AND F.SubCadastro = N.SubCadastro
    LEFT JOIN v_PropostaComercial PC
        ON PC.SolicitanteID = U.[ID] 
        AND PC.ClienteID = N.Codigo 
        AND PC.SubCadastro = N.SubCadastro
    LEFT JOIN PropostaDeLocacao PL
        ON PL.ResponsavelID = U.[ID]
        AND PL.ClienteID = N.Codigo 
        AND PL.SubCadastro = N.SubCadastro
    LEFT JOIN PedidosDeVenda PV
        ON PV.SolicitanteID = U.[ID]
        AND PV.ClienteID = N.Codigo 
        AND PV.SubCadastro = N.SubCadastro
    LEFT JOIN PedidosDeVenda PVTotal
            ON PVTotal.SolicitanteID = U.[ID]
        JOIN PedidosDeVendaXItens PVI 
            ON PVI.PedidoDeVendaID = PVTotal.[ID]    
        JOIN Modelos M 
            ON PVI.ProdutoID = M.[ID]         
        JOIN Empresas N1 
            ON PVTotal.ClienteID = N1.Codigo 
            AND PVTotal.SubCadastro = N1.SubCadastro
        LEFT JOIN Municipios_Regiao MRTotal 
            ON R.uniqKey = MRTotal.ID_Regiao
            AND N1.ID_Municipio = MRTotal.ID_Municipio
    LEFT JOIN PedidosDeVenda PVTotalVendasPublicas    
            ON PVTotalVendasPublicas.SolicitanteID = U.[ID]    
            AND PVPVTotalVendasPublicas.ClienteID <> U.ClienteID  
            AND PVTotalVendasPublicas.ClienteID = N.Codigo 
            AND PVTotalVendasPublicas.SubCadastro = N.SubCadastro    
            AND N.ID_Municipio = MR.ID_Municipio 
            AND N.TipoEmpresa = 'PU' 
        JOIN PedidosDeVendaXItens PVI 
            ON PVI.PedidoDeVendaID = PVTotalVendasPublicas.[ID]    
        JOIN Modelos M 
            ON PVI.ProdutoID = M.[ID]    
  LEFT JOIN PedidosDeVenda PVTotalVendasPrivadas
        ON PVTotalVendasPrivadas.SolicitanteID = U.[ID]
        AND PVTotalVendasPrivadas.ClienteID <> U.ClienteID 
        AND PVTotalVendasPrivadas.ClienteID = N.Codigo 
        AND PVTotalVendasPrivadas.SubCadastro = N.SubCadastro
        AND N.TipoEmpresa = 'PR'
        JOIN PedidosDeVendaXItens PVI 
            ON PVI.PedidoDeVendaID = PVTotalVendasPrivadas.[ID]    
        JOIN Modelos M 
            ON PVI.ProdutoID = M.[ID]    
    LEFT JOIN PedidosDeVenda PVTotalVendasProprias    
            ON PVTotalVendasProprias.SolicitanteID = U.[ID]    
            AND PVTotalVendasProprias.ClienteID = U.ClienteID
            AND PVTotalVendasProprias.ClienteID = N.Codigo 
            AND PVTotalVendasProprias.SubCadastro = N.SubCadastro
        JOIN PedidosDeVendaXItens PVI 
            ON PVI.PedidoDeVendaID = PVTotalVendasProprias.[ID]    
        JOIN Modelos M 
            ON PVI.ProdutoID = M.[ID]  
WHERE U.Representante = 64
    AND O.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND F.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PC.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PL.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PV.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PVTotal.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PVTotalVendasPublicas.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PVTotalVendasPrivadas.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
    AND PVTotalVendasProprias.Data BETWEEN '2012-12-01 00:00:00' AND '2012-12-31 23:59:59'
GROUP BY U.ID, U.NameCompleto, R.Regiao
ORDER BY R.Regiao, U.NomeCompleto; 
```

# php - Javascript 在 PHP 中的“逃逸”

> ID：14364496
> 
> 赞同：2
> 
> 时间：2013-01-16T17:45:05.367
> 
> 标签：php, javascript, validation, url, hyperlink

我的图像主机有一个 Google Chrome 扩展程序，它会向我的网站发送一个 URL。该 URL通过 Javascript 的方法进行*编码。*`escape`

由 编码的 URL`escape`如下所示：

```
http%253A//4.bp.blogspot.com/-xa4Krfq2V6g/UF2K5XYv3kI/AAAAAAAAAJg/8wrqZQP9ru8/s1600/LuffyTimeSkip.png 
```

我需要以某种方式通过 PHP 使 URL 恢复正常，所以我可以检查它，`filter_var($the_url, FILTER_VALIDATE_URL)`如果 URL 像上面那样，它显然会失败。

这是 Javascript 的样子：

```
function upload(img) {
    var baseurl="http://imgit.org/remote?sent-urls=1&remote-urls=" + escape(img.srcUrl);
    uploadImage(baseurl);
}
function uploadImage(imgurl) {
        chrome.tabs.create({
        url: imgurl,
        selected: true
    });
}

var title = "Upload this image to IMGit";
var id = chrome.contextMenus.create({"title": title, "contexts": ['image'], "onclick": upload}); 
```

这就是我在 PHP 中所做的：

```
if (!filter_var($file, FILTER_VALIDATE_URL) || !filter_var(urldecode($file), FILTER_VALIDATE_URL))
{
    throw_error('The entered URLs do not have a valid URL format.', 'index.php#remote'); break;
} 
```

坦率地说，`urldecode()`不适合我。如您所见，我通过`$_GET`.

处理这种情况的最佳方法是什么？

**实际问题：**如何在 PHP 中*取消转义*URL？有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:54:55.487

您将要使用`encodeURIComponent`而不是`escape`：

```
function upload(img) {
    var baseurl="http://imgit.org/remote?sent-urls=1&remote-urls=" + encodeURIComponent(img.srcUrl);
    uploadImage(baseurl);
} 
```

然后，您可以`urldecode`在 PHP 内部使用来获得您想要的结果。

有关vs. vs.的解释，请参阅[此问题](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)。`escape``encodeURI``encodeURIComponent`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:31:42.673

**在 Javascript 中发送：**

```
var baseurl="http://imgit.org/remote?sent-urls=1&remote-urls=" + encodeURIComponent(img.srcUrl); 
```

**在 PHP 代码中**

```
$url = urldecode($_GET["my_url"]) 
```

# android - 如何在 Android 中正确加载存档网页？

> ID：14364501
> 
> 赞同：4
> 
> 时间：2013-01-16T17:45:25.813
> 
> 标签：android, mobile, android-webview

我想将网页保存到本地。

我发现有一种方法可以将网页保存为存档文件。

```
public void saveWebArchive (String filename) 
```

但是，当我加载文件时，除了乱码什么也没有。

```
WebView webView = (WebView) rootView.findViewById(R.id.webview_layout);
String url = "http://www.yahoo.com";
webView.loadUrl(url);
String path = getFilesDir().getAbsolutePath() + File.separator + "yahoo" + ".html";
webView.saveWebArchive(path);
webView.loadUrl("file://" + path); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:15:46.597

WebArchive 是一种特殊的文件格式，a 不能直接读取`WebView`（尽管它很乐意以这种格式保存页面）。

如果您尝试将页面的 HTML 内容保存到您的设备上，这里描述了一种[方法](https://stackoverflow.com/questions/4531062/how-to-programmatically-download-an-html-page-in-android-and-get-its-html)。

如果您真的想将页面保存为 WebArchive 文件，请尝试[这篇文章](https://stackoverflow.com/questions/12872043/android-webview-display-webarchive)。如果您需要存储与页面关联的图形、CSS 和其他非文本，此方法可能很有用。

# oauth - LDAP Provider over OpenID (Google OAuth) 后端

> ID：14364503
> 
> 赞同：4
> 
> 时间：2013-01-16T17:45:42.327
> 
> 标签：oauth, ldap, openid, citrix

LDAP Provider 是否存在于 OpenID（OpenID 身份验证）上作为后端？

让我解释一下，我使用 Citrix 的 Vdi-in-a-box，我的用户唯一的身份验证提供程序是 LDAP（VDI-in-a-box 默认身份验证系统不支持密码，只需登录，没有安全性）。

但是我所有的用户都有 Google App 帐户，这就是为什么我正在寻找一个可以使用 OpenID (Google OAuth) 作为后端的 LDAP 提供者。

我找到了[openid-ldap](https://github.com/adrianheine/openid-ldap)，但这与我想要的完全相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T13:27:50.620

看看[Forgrock 的 OpenAM](https://wikis.forgerock.org/confluence/pages/viewpage.action?pageId=14942413)，这可能是您想要做的。

# jquery - IE8 jquery中的多行省略号错误

> ID：14364507
> 
> 赞同：0
> 
> 时间：2013-01-16T17:45:47.107
> 
> 标签：jquery

我的小多行省略号 jquery (...) 不想在 IE8 中按原样工作。它在 IE9、Firefox、Chrome 中运行良好。我需要帮助解决 IE8 的这个问题。

如果你能帮助我，我创建了一个 jsfiddle 给你一个演示：http: [//jsfiddle.net/9GSWY/](http://jsfiddle.net/9GSWY/)

```
var myTag = $('.description').text();
if (myTag.length > 100) {
var truncated = myTag.trim().substring(0, 100).split(" ").slice(0, -1).join(" ") + "...";
$('.description').text(truncated); // truncate multiline blog viewlet with ellipsis 
} 
```

使用 IE8，它返回此错误“选项不支持此属性或方法”并指向此行：

```
var truncated = myTag.trim().substring(0, 100).split(" ").slice(0, -1).join(" ") + "..."; 
```

**JSFIDDLE** [http://jsfiddle.net/9GSWY/](http://jsfiddle.net/9GSWY/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:49:59.510

我进入`Object doesn't support property or method 'trim'`IE8，没有`.trim()`工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:01:34.310

`String.prototype.trim`在 IE8 中不支持，而是尝试使用 jQuery 的内置修剪：

```
$.trim(myTag).substring(0, 100).split(" ").slice(0, -1).join(" ") + "..." 
```

# c# - 以正确格式将 Ajax 数据转换为 FLOT 图表？

> ID：14364512
> 
> 赞同：2
> 
> 时间：2013-01-16T17:46:00.620
> 
> 标签：c#, ajax, flot

我知道有几篇关于此的帖子，但我认为我遗漏了一些东西。我在 ajax 调用中返回下面的数据，但它似乎不是 FLOT 的正确格式。有没有更好的格式来返回数据或者应该改变什么让 FLOT 识别它？TIA

```
<script type="text/javascript">
     $(document).ready(function() {
         // Add the page method call as an onclick handler for the div.
         $("#Result").click(function() {
             $.ajax({
                 type: "POST",
                 url: "WebTest.aspx/GetData",
                 data: "{}",
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
                 success: function(msg) {
                     // Replace the div's content with the page method's return.

                     var jsObj = []
                     jsObj.push($.parseJSON(msg.d));

                     $.plot($("#Result"), jsObj, {
                         grid: {
                             backgroundColor: "#E5E5E5",

                             mouseActiveRadius: 20
                         }

                     }
                 );
                 }
             });
         });
     });
</script>

[WebMethod]
public static string GetData()
{

    DataLines dataLine1 = new DataLines();
    DataLines dataLine2 = new DataLines();

    int[] lineA_Point1 = new int[] { 4, 6 };
    int[] lineA_Point2 = new int[] { 2, 10};

    List<int[]> dataA = new List<int[]>();
    dataA.Add(lineA_Point1);
    dataA.Add(lineA_Point2);

    dataLine1.data = dataA;
    dataLine1.label = "DataLine1";

    JavaScriptSerializer js = new JavaScriptSerializer();

    string Line1 = js.Serialize(dataLine1);

    return Line1;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T19:31:23.907

1.) 将 JSON 字符串转换回 javascript 中的 javascript 对象：

```
var jsObj = $.parseJSON(d); // using jquery method 
```

2.) 在您的 GetData 方法中，您的

```
dataLine1.data = "[[1356328800000,5],[1356933600000,3]]"; 
```

行不通。这将使您的数据元素成为 JSON 中的字符串，而不是 javascript 数组。最好在您的 WebMethod 中解决此问题：

```
DataLines dataLine1 = new DataLines();
dataLine1.data = new List<int[]>();
dataLine1.data.Add(new int[] {1356328800000,5});
dataLine1.data.Add(new int[] {1356933600000,3}); 
```

这是完全未经测试的（我以前从未使用`JavaScriptSerializer`过，但类似的代码适用于 ServiceStack 序列化程序。

# python - 如何使用matplotlib在python中绘制直方图

> ID：14364514
> 
> 赞同：0
> 
> 时间：2013-01-16T17:46:04.340
> 
> 标签：python, matplotlib, histogram

> **可能重复：**
> [Matplotlib - 标记每个 bin](https://stackoverflow.com/questions/6352740/matplotlib-label-each-bin)

我无法完全理解它是如何工作的......而且，还有`hist`-`bar`对`bar`我来说更清楚，但是......我如何绘制`histogram`，其中一个值是字符串？输入数据如下：

```
cars 1000
bikes 1500
buses 100 
```

另外，我必须将它用于 Web 应用程序，所以我需要将图像保存为字节或类似的东西

# php - cakephp - $fields 数组在 $this->Model->read($fields, $id) 中的样子是什么

> ID：14364516
> 
> 赞同：0
> 
> 时间：2013-01-16T17:46:07.770
> 
> 标签：php, cakephp, parameter-passing

使用 cakephp 2。

我有一个模型叫做学生

```
$hasMany = array('PupilAction', 'TransientAction', 'TriageEvent') 
```

和

```
$belongsTo = array('FormClass') 
```

在我的 PupilsController 中，我烤好了

```
$this->set('pupil', $this->Pupil->read(null, $id)); 
```

我想通过每个名为 date. 我还想包含全部信息，我不想限制返回任何字段，只是为了让这三个表按日期排序。

我找不到一个很好的例子来说明如何使用 read() - 大多数人似乎都在使用 find 但我想弄清楚这个 read 一个。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:23:35.173

如果您总是需要按日期排序的数据，那么在每个模型的 PHP 文件中添加 $ [order 变量](http://book.cakephp.org/2.0/en/models/model-attributes.html#order)。

> 公共 $order = '日期';

或者

> 公共 $order = 'PupilAction.date ASC';

这将确保这些模型默认返回关联、分页和查找的有序结果。

否则，您可以将 order 键用于可包含行为。确保将*[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)*行为添加到每个模型的 $actAs（或在您的 AppModel.php 中）

```
$record = $this->Pupil->find('first',array(
   'conditions'=>array('Pupil.id'=>$id),
   'contain'=>array('PupilAction'=>array('order'=>'PupilAction.date'))
)); 
```

# vba - Excel VBA确定上升或下降趋势

> ID：14364519
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:46:09.403
> 
> 标签：vba, excel

我正在尝试创建一个程序来指定一组数字所处的趋势类型。上升趋势、下降趋势或无趋势。请在下面查看我的 excel 样式表，以便您可以跟随下一部分。

程序需要计算第 3 行。第 3 行将要么有一个 U（代表向上）或一个 D（代表向下），要么什么都没有。下面我将解释如何指定 U 或 D aka 这就是我希望 VBA 程序为我做的事情。

让我们从 C 列开始。C1 列的值为 34.92，C2 的值为 +（因为 34.92 大于前一天的 33.02）。现在我们转到前面的第一个“+”，中间至少有一个相反的符号（在本例中为“-”）。因此，在这种情况下，即为 A 列（B 列下方中间有一个“-”）。现在，如果 C1 (34.92) 中的数值大于 A (33.12) 中的数值，那么我们在 C3 中指定一个“U”。如果它不是更大，我们将在 C3 中留下一个空单元格。

让我们进入 D 列。D1 列的值为 35.19，大于 C1 的值 34.92，这就是 D2 有“+”的原因。接下来我们转到前面的第一个“+”，中间至少有一个相反的符号（在本例中为“-”）。因此，在这种情况下，这又是 A 列。由于 D1 (39.19) 中的数值大于 A1 (33.12) 中的数值，因此 D3 得到一个 U。

移动到 F 列 (32.97)。32.97 比 35.19 (D1) 少，这就是为什么 F2 是“-”。接下来，我们转到前一个“-”，中间至少有一个相反的符号（在本例中为“+”）。所以在这种情况下，这是 B 列（中间有两个“+”号）。现在因为我们这次处理的是“-”符号，所以我们看看 F1 中的数值是否小于 B1 中的数值……它是，所以在 F3 中输入了一个“D”。如果 F1 大于 B1，则该单元格将为空。

在 G 列 (35.21) 上。这大于 32.97 (F1)，因此在 G2 中获得“+”。接下来我们转到前面的第一个“+”，中间至少有一个相反的符号（在本例中为“-”）。所以在这种情况下，这是 D 列（中间有一个“-”）。由于 G1 的数值大于 D1 的数值，我们指定为“U”。如果它不是更大，我们会将单元格留空。

```
表 1：程序前的初始表
        ABCDFGHI
        1月1日 1月2日 1月3日 1月4日 1月5日 1月6日 1月7日 1月8日
1 33.12 33.02 34.92 35.19 32.97 35.21 35.60 35.90
2 (+) (-) (+) (+) (-) (+) (+) (+)
3 ? ? ? ? ? ?

表 2：带答案的决赛桌
        ABCDFGHI
        1月1日 1月2日 1月3日 1月4日 1月5日 1月6日 1月7日 1月8日
1 33.12 33.02 34.92 35.19 32.97 35.21 35.60 35.90
2 (+) (-) (+) (+) (-) (+) (+) (+)
3 呜呜呜

```

```
Sub Comparison()

For Each Cell In Range("A3:I3")
currentSign = cell.Value
' Find out what the sign is in the cell before it
previousSign = Cell.Offset(0, -1).Value
'Variable used to find the first cell with an
'Opposite sign as the current cell
oppositeSign = Cell.Offset(0, -2).Value
'Variable to associate the numberical number above the first Opposite Sign Cell
oppositeNumericalCell = Cell.Offset(-1, -2).Value
' Create a Variable for Target Cell
Set targetSignCell = Cell.Offset(1, 0)
If currentSign.Value = "+" And currentSign.Value <> previousSign.Value And oppositeSign.Value = currentSign.Value And currentNumericalCell.Value > oppositeNumericalCell.Value Then
targetSignCell = "U"
ElseIf currentSign.Value = "-" And currentSign.Value <> previousSign.Value And oppositeSign.Value = currentSign.Value And currentNumericalCell.Value < oppositeNumericalCell.Value Then
targetSignCell = "D"
Else
End If
Next Cell
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:07:50.710

轻微测试....

```
Sub tester()
    Dim c As Range
    'loop through the +/- range...
    For Each c In ActiveSheet.Range("A3:H3")
        CheckCell c
    Next c
End Sub

Sub CheckCell(c As Range)

    Dim pm As String, v As Double, v2 As Double
    Dim pm_opp As String, c2 As Range
    Dim oppFound As Boolean, pm_tmp As String

    v = c.Offset(-1, 0).Value        'value
    pm = c.Value       'sign
    pm_opp = IIf(pm = "+", "-", "+") 'opposite sign

    If c.Column = 1 Then Exit Sub

    Set c2 = c.Offset(0, -1)

    Do While c2.Value <> ""
        Debug.Print oppFound
        pm_tmp = c2.Value
        If Not oppFound Then
            oppFound = (pm_tmp = pm_opp)
        Else
            If pm_tmp = pm Then
                v2 = c2.Offset(-1, 0).Value
                If pm = "+" And (v2 < v) Then c.Offset(1, 0) = "U"
                If pm = "-" And (v2 > v) Then c.Offset(1, 0) = "D"
                Exit Do
            End If
        End If
        If c2.Column = 1 Then Exit Do
        Set c2 = c2.Offset(0, -1)
    Loop

End Sub 
```

# c# - ASP.NET 在引号前向字符串添加斜杠

> ID：14364521
> 
> 赞同：2
> 
> 时间：2013-01-16T17:46:15.797
> 
> 标签：c#, php, asp.net, database

我习惯用 PHP 编写，但我最近有一个学校项目，我必须在该项目上使用 ASP.NET 和 C#。

因此，在 php 中，每次我必须从数据库 (mysql) 中插入或更新某些内容时，我都会使用一个名为addslashes() 的 php 函数，它在引号前添加斜杠以防止任何 mysql 错误（我使用 strip_tags 隐藏 html 标签以防止用户弄乱页面）。

现在我想知道是否有某种函数可以像 php 一样完美地完成这项工作，但在 C# (ASP.NET) 中。

附加信息：我使用 Access 作为数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:50:05.700

两件小事：

*   当你使用 addlashes 时你错了，正确的功能是`mysqli_real_escape_string`.

*   使用 C#，使用准备好的语句真的很容易，所以看看[这里](http://prepared-statement.blogspot.fr/2006/02/c-data-access-prepared-statements.html)：

    String sql = "SELECT count(username) FROM login where username=@USERNAME and pwd=@PWD"; commandObj.Parameters.Add("@USERNAME", SqlDbType.VarChar, username.Length).Value = username; commandObj.Parameters.Add("@PWD", SqlDbType.VarChar, pwd.Length).Value = pwd;

# mono - OsmDroid 的 Monodroid Jar 绑定问题

> ID：14364522
> 
> 赞同：2
> 
> 时间：2013-01-16T17:46:17.893
> 
> 标签：mono, xamarin.android, porting, osmdroid

我正在尝试从 OsmDroid 移植主干版本（3.0.9-SNAPSHOT：[http](http://code.google.com/p/osmdroid/source/browse/) ://code.google.com/p/osmdroid/source/browse/ ）。以前我使用 xamarin 示例的移植版本 3.0.8。在版本 3.0.9 中解决了我面临的一个错误，所以我真的必须移植 OsmDroid 的主干版本。

我目前遇到三个错误：

```
Error CS0535: 'OsmDroid.Views.SafeCanvas.SafeTranslatedCanvas' does not implement interface member 'OsmDroid.Views.SafeCanvas.ISafeCanvas.DrawColor(int)' (CS0535) (OsmDroid)
Error CS0535: 'OsmDroid.Views.SafeCanvas.SafeTranslatedCanvas' does not implement interface member 'OsmDroid.Views.SafeCanvas.ISafeCanvas.DrawColor(int, Android.Graphics.PorterDuff.Mode)' (CS0535) (OsmDroid)
Error CS0535: 'OsmDroid.Views.SafeCanvas.SafeTranslatedCanvas' does not implement interface member 'OsmDroid.Views.SafeCanvas.ISafeCanvas.Save(int)' (CS0535) (OsmDroid) 
```

据我发现，这三个缺少的接口成员是 Android.Canvas 的成员。这三个方法在生成可移植代码后不移植，但在原始 jar 文件（[SafeTranslatedCanvas.java](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/views/safecanvas/SafeTranslatedCanvas.java)和[ISafeCanvas.java](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/views/safecanvas/ISafeCanvas.java)）中可见。

如何解决 Metadata.xml 中的这些问题？

提前致谢。问候，法科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T13:00:54.613

我设法通过添加部分类来编译 osmdroid 3.0.9 (& 3.0.10)：

```
using Android.Graphics;

namespace Org.Osmdroid.Views.Safecanvas
{
    partial class SafeTranslatedCanvas
    {
        public void DrawColor(int color)
        {
            this.WrappedCanvas.DrawColor(new Color(color));
        }

        public void DrawColor(int color, Android.Graphics.PorterDuff.Mode mode)
        {
            this.WrappedCanvas.DrawColor(new Color(color), mode);
        }

        public int Save(int SaveFlags)
        {
            return this.WrappedCanvas.Save((Android.Graphics.SaveFlags)SaveFlags);
        }
    }
} 
```

我还必须解决另外两个与可见性有关的错误：

```
Error   30  'OsmDroid.Views.Overlay.SafeDrawOverlay.Draw(Android.Graphics.Canvas, OsmDroid.Views.MapView, bool)': cannot change access modifiers when overriding 'public' inherited member 'OsmDroid.Views.Overlay.Overlay.Draw(Android.Graphics.Canvas, OsmDroid.Views.MapView, bool)' C:\Users\K\Desktop\LodzKieruje\LodzKieruje\OsmDroidBinding\obj\Debug\generated\src\OsmDroid.Views.Overlay.SafeDrawOverlay.cs    111 27  OsmDroid
Error   34  'OsmDroid.Views.Overlay.ScaleBarOverlay.DrawSafe(Org.Osmdroid.Views.Safecanvas.ISafeCanvas, OsmDroid.Views.MapView, bool)': cannot change access modifiers when overriding 'protected' inherited member 'OsmDroid.Views.Overlay.SafeDrawOverlay.DrawSafe(Org.Osmdroid.Views.Safecanvas.ISafeCanvas, OsmDroid.Views.MapView, bool)'  C:\Users\K\Desktop\LodzKieruje\LodzKieruje\OsmDroidBinding\obj\Debug\generated\src\OsmDroid.Views.Overlay.ScaleBarOverlay.cs    388 24  OsmDroid 
```

这已通过在 Metadata.xml 中添加以下行来解决

```
 <attr path="/api/package[@name='org.osmdroid.views.overlay']/class[@name='SafeDrawOverlay']/method[@name='draw']" name="visibility">public</attr>
  <attr path="/api/package[@name='org.osmdroid.views.overlay']/class[@name='ScaleBarOverlay']/method[@name='drawSafe']" name="visibility">protected</attr> 
```

我的项目现在启动并且地图是可见的，但是它没有响应 - 它既不缩放也不滚动。我想知道你是否会有同样的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:08:09.347

您是否看过包含 OsmDroid 示例的[Xamarin 示例存储库？](https://github.com/xamarin/monodroid-samples/tree/master/OsmDroidBindingExample)

# xslt - LibreOffice：生成幻灯片的 XSLT 样式表？

> ID：14364524
> 
> 赞同：1
> 
> 时间：2013-01-16T17:46:23.200
> 
> 标签：xslt, slideshow, openoffice.org, libreoffice

**libreoffice**文档是一个zip 文件，其中包含（除其他外）一些 XML 文件。

```
s$ unzip -t test.odp
Archive:  test.odp
    testing: mimetype                 OK
    testing: Configurations2/statusbar/   OK
    testing: Configurations2/accelerator/current.xml   OK
    testing: Configurations2/floater/   OK
    testing: Configurations2/popupmenu/   OK
    testing: Configurations2/progressbar/   OK
    testing: Configurations2/menubar/   OK
    testing: Configurations2/toolbar/   OK
    testing: Configurations2/images/Bitmaps/   OK
    testing: content.xml              OK
    testing: styles.xml               OK
    testing: meta.xml                 OK
    testing: settings.xml             OK
    testing: META-INF/manifest.xml    OK
No errors detected in compressed data of test.odp. 
```

我想使用**XSLT**（和 xsltproc + element `<xsl:document/>`）从一个看起来像这样的 xml 文件动态生成 ODP 幻灯片：

```
<slideshow>

  <slide>
    <title>Slide 1</title>
    <content>blablablablablablablabal</content>
  </slide>
  <!-- (....) --->
  <slide>
    <title>Slide N</title>
    <content>blablablablablablablabal</content>
  </slide>
</slidesho> 
```

是否有任何现有的 XSLT 样式表？

文件**content.xml**很复杂，odp 的最小内容是什么，一个 HelloWorld.odp，可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:41:59.387

一个最小的有效演示文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<office:document-content xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0">
  <office:body>
    <office:presentation/>
  </office:body>
</office:document-content> 
```

一个包含一些基本内容的简单文件是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<office:document-content office:version="1.2"
    xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0"
    xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0"
    xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0"
    xmlns:presentation="urn:oasis:names:tc:opendocument:xmlns:presentation:1.0"
    xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0">
  <office:body>
    <office:presentation>
      <draw:page draw:master-page-name="">
        <draw:frame presentation:style-name="" svg:width="25.199cm"
          svg:height="3.506cm" svg:x="1.4cm" svg:y="0.837cm" presentation:class="title">
          <draw:text-box>
            <text:p>Title</text:p>
          </draw:text-box>
        </draw:frame>
        <draw:frame presentation:style-name="" svg:width="24.639cm"
          svg:height="12.178cm" svg:x="1.4cm" svg:y="4.914cm" presentation:class="subtitle">
          <draw:text-box>
            <text:p>My Text</text:p>
          </draw:text-box>
        </draw:frame>
      </draw:page>
    </office:presentation>
  </office:body>
</office:document-content> 
```

I'd suggest getting an XML editor like [oXygen](http://www.oxygenxml.com/) that supports ODF to play with this. Having the [specifications and RNG](http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=office) for the ODF version that you want to use might help, too.

# javascript - 有没有办法在没有 jQuery 的情况下制作同样的东西，并且只使用 CSS3 和 HTML5

> ID：14364531
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:46:46.840
> 
> 标签：javascript, jquery, html, css

我对网页设计非常陌生，尤其是像 css3 和 html5 这样的技术，我想建立一个尽可能多地使用 CSS3 和 HTML5 并尽可能少地使用 JavaScript 的网站。

所以我想只使用 CSS/HTML 来获得几乎相同的行为。

```
$(document).ready(function () {
    $("#wrapper section").click(function() {
        var bcn = $(this).next('.box-content');
        if ($('.box-content').is(':visible')) {
            $('.box-content').hide();
            bcn.show();
        }
        else {
            $('.box-content').hide();
            bcn.slideToggle(200);
        }
    });
}); 
```

这就是我想在没有 JS 的情况下做的：http: [//jsfiddle.net/8BLD7/7/](http://jsfiddle.net/8BLD7/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:04:44.327

并非所有浏览器都支持`CSS3`和的所有功能`HTML5`。您冒着创建一个功能分散在支持它们的浏览器周围的网站的风险。

您可能想尝试以下策略：

[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)

它建立在当前浏览器的基础之上，并为支持它的浏览器添加了新功能。这样一来，您就不会得到一个在所有浏览器中都具有部分功能的网站。

祝你好运，编码愉快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:13:35.410

这大致近似于您那里的代码，显然正如其他人所说，这仅适用于现代浏览器 - 我不建议纯粹使用这个系统 - 但它可以作为渐进增强工作，如战争10ck。

[http://jsfiddle.net/3VQ9X/](http://jsfiddle.net/3VQ9X/)

有关其工作原理以及需要注意的问题的更多信息，请阅读以下链接：

*   [http://css-tricks.com/on-target/](http://css-tricks.com/on-target/)
*   [http://reference.sitepoint.com/css/pseudoclass-target](http://reference.sitepoint.com/css/pseudoclass-target)
*   [http://blog.teamtreehouse.com/stay-on-target](http://blog.teamtreehouse.com/stay-on-target)

这是涉及的标记和CSS。

**标记**

```
<div id="wrapper">
  <nav>
    <h3><a href="#content-1">App 1</a><h3>
    <h3><a href="#content-2">App 2</a><h3>
  </nav>
  <section class="main">
    <section class="box-content" id="content-1">
      <p> This is content 1 </p>
    </section>
    <section class="box-content" id="content-2">
      <p> This is content 2 </p>
    </section>
  </section>
</div> 
```

**css（基本元素设置，可以随意修改）**

```
nav {
  border: 1px solid black;
  float: left;
}

section.main {
  position: relative; /* this is important */
  overflow: hidden; /* as is this, but everthing else can be modified */
  float: left;
  border: 1px solid red;
  width: 500px; /* having fixed dimensions will make things easier */
  height: 500px;
} 
```

**css（魔法位）**

```
section.box-content {
  position: absolute;
  left: 0;
  top: 0;
  -webkit-transition: all 1.0s ease-in-out;
  -moz-transition: all 1.0s ease-in-out;
  -ms-transition: all 1.0s ease-in-out;
  -o-transition: all 1.0s ease-in-out;
  transition: all 1.0s ease-in-out;
  -webkit-transform: translate(0,-500px);
  -moz-transform: translate(0,-500px);
  -ms-transform: translate(0,-500px);
  -o-transform: translate(0,-500px);
  transform: translate(0,-500px);
}

/* the pseudo selector :target only comes into effect when
   an anchored link has been clicked that targets a specific
   element by id. If the element with the id has this pseudo
   selector applied, then the css will be applied. Tie this
   together with transformations, and you have interactive 
   dynamic css :) */

section.box-content:target {
  -webkit-transform: translate(0,0);
  -moz-transform: translate(0,0);
  -ms-transform: translate(0,0);
  -o-transform: translate(0,0);
  transform: translate(0,0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:26:11.493

War10ck 是正确的。但是，如果您希望以任何一种方式使用 CSS3 和 HTML5，您可以查看`CSS3 :target Selector`. `:target`当 URL 中的哈希值和元素的 id 相同时，CSS 中的伪选择器匹配。

[您可以在http://css-tricks.com/on-target](http://css-tricks.com/on-target)找到有关它的更多信息。

这是一个示例[http://jsfiddle.net/_omi/yDWzA/6/](http://jsfiddle.net/_omi/yDWzA/6/)

# c# - 有人可以向我解释一个简单的数据绑定行为吗 C# Silverlight 4.0

> ID：14364532
> 
> 赞同：3
> 
> 时间：2013-01-16T17:47:03.920
> 
> 标签：c#, silverlight, data-binding

这是场景：

中有`XAML` `textbox`一个属性的绑定`view model`。

行为 1 -

如果直接从代码将值分配给属性。

1)`SET`在绑定属性上调用。

2) 属性的私有字段被更新（`value`根据条件可能更新为 ，也可能更新为其他值）。

3)`RaisePropertyChange("xx")`被调用。

4)`GET`被调用。

5) 属性在视图中更新。任何存储在属性私有字段中的值都会显示在 UI 中。

行为 2 -

`property`如果用户在 中输入文本为分配了值`textbox`：

1)`SET`在边界上调用`property`。

2)`properties`私有字段被更新（`value`根据条件可能更新为 ，也可能更新为其他值）。

3)`RaisePropertyChange("xx")`被调用。

就是这样。我的问题是为什么第 4 步和第 5 步不会发生在场景 2 中？`RaisePropertyChange`正在被调用，所以不应该在`GET`不久之后调用该方法吗？有人可以解释为什么它不是..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:53:21.700

BindingMode 将播放触发的事件。声音链接您的绑定模式是 OneWay（默认）并且您期望 TwoWay 行为。只需将其设置为双向。

```
<TextBlock Text="{Binding MyTextProperty, Mode=TwoWay}" ... 
```

请参阅[绑定模式属性](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:06:11.080

在场景 2 中，只有当该属性绑定到的不仅仅是文本框时，才会发生 GET 调用。由于文本框正在更新其绑定值，因此无需调用 GET，因为没有其他任何内容订阅它。

# emacs - emacs中ansi-term中的奇怪字符

> ID：14364533
> 
> 赞同：2
> 
> 时间：2013-01-16T17:47:03.917
> 
> 标签：emacs, elisp, ascii, emacs23, emacs24

我写了一个 c++ 程序，当我在 ansi-term 中使用 g++ 编译它时，显示了一些奇怪的字符：

![在此处输入图像描述](../Images/c50bdde7026c68c84d55ca5745c5b6ce.png)

如果需要，错误是我没有声明变量 n。我该如何纠正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:12:11.800

啊! 测试了这个...

```
 (setq locale-coding-system 'utf-8)
(set-terminal-coding-system 'utf-8-unix)
(set-keyboard-coding-system 'utf-8)
(set-selection-coding-system 'utf-8)
(prefer-coding-system 'utf-8) 
```

问题解决了！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T07:49:08.530

看起来`gcc`输出包含 UTF-8“智能引号”，并且您的终端未设置为显示 UTF-8。简单的解决方法是`locale`在 Emacs 中使用不支持智能引号的 a，它应该强制`gcc`回退到纯简 ASCII 引号；更复杂的修复方法是修复 Ansi-Term 缓冲区中的终端模式以正确显示这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:51:28.067

这些很可能是颜色转义序列。emacs 有一种模式，您可以使用该`ansi-color-for-comint-mode-on`功能启用该模式。

# c++ - 如何执行此 DirectFB 示例？

> ID：14364535
> 
> 赞同：4
> 
> 时间：2013-01-16T17:47:10.760
> 
> 标签：c++, g++, directfb

[我从教程](http://directfb.org/docs/DirectFB_Tutorials/)中获得了以下 directFB 示例代码：

```
#include <stdio.h>
#include <unistd.h>

#include <directfb/directfb.h>

static IDirectFB *dfb = NULL;
static IDirectFBSurface *primary = NULL;
static int screen_width = 0;
static int screen_height = 0;
#define DFBCHECK(x...)                                         \
  {                                                            \
    DFBResult err = x;                                         \
                                                               \
    if (err != DFB_OK)                                         \
      {                                                        \
        fprintf( stderr, "%s <%d>:\n\t", __FILE__, __LINE__ ); \
        DirectFBErrorFatal( #x, err );                         \
      }                                                        \
  }
int main(int argc, char **argv) {

    DFBSurfaceDescription dsc;
    DFBCHECK(DirectFBInit (&argc, &argv));
    DFBCHECK(DirectFBCreate (&dfb));
    DFBCHECK(dfb->SetCooperativeLevel (dfb, DFSCL_FULLSCREEN));
    dsc.flags = DSDESC_CAPS;
    dsc.caps = DSCAPS_PRIMARY | DSCAPS_FLIPPING;
    DFBCHECK(dfb->CreateSurface( dfb, &dsc, &primary ));
    DFBCHECK(primary->GetSize (primary, &screen_width, &screen_height));
    DFBCHECK(primary->FillRectangle (primary, 0, 0, screen_width, screen_height));
    DFBCHECK(primary->SetColor (primary, 0x80, 0x80, 0xff, 0xff));
    DFBCHECK(primary->DrawLine (primary, 0, screen_height / 2, screen_width - 1, screen_height / 2));
    DFBCHECK(primary->Flip (primary, NULL, 0));
    sleep(5);
    primary->Release(primary);
    dfb->Release(dfb);
    return 23;
} 
```

我正在尝试编译并得到错误（来自 gnome 终端）：

```
$ g++ Test01HorizontalLine.cpp -I /usr/local/include/directfb/
Test01HorizontalLine.cpp: In function ‘int main(int, char**)’:
Test01HorizontalLine.cpp:27: error: invalid conversion from ‘int’ to ‘DFBSurfaceCapabilities’
Test01HorizontalLine.cpp:33: error: invalid conversion from ‘int’ to ‘DFBSurfaceFlipFlags’ 
```

我正在使用 DFB 1.4.11（我无法更新我当前的项目）。我怎样才能使这个示例运行？（新手）

**- 更新**

更新行后（如@jclin所述）：

```
dsc.caps = DFBSurfaceCapabilities(DSCAPS_PRIMARY | DSCAPS_FLIPPING);  
...  
primary->Flip(primary, NULL, DFBSurfaceFlipFlags(0)); 
```

结果是：

```
$ g++ Test01HorizontalLine.cpp -I /usr/local/include/directfb/
/tmp/cc6iUS1W.o: In function `main':
Test01HorizontalLine.cpp:(.text+0x1c): undefined reference to `DirectFBInit'
Test01HorizontalLine.cpp:(.text+0x61): undefined reference to `DirectFBErrorFatal'
Test01HorizontalLine.cpp:(.text+0x6d): undefined reference to `DirectFBCreate'
Test01HorizontalLine.cpp:(.text+0xb2): undefined reference to `DirectFBErrorFatal'
Test01HorizontalLine.cpp:(.text+0x111): undefined reference to `DirectFBErrorFatal'
Test01HorizontalLine.cpp:(.text+0x188): undefined reference to `DirectFBErrorFatal'
Test01HorizontalLine.cpp:(.text+0x1ef): undefined reference to `DirectFBErrorFatal'
Test01HorizontalLine.cpp:(.text+0x26d): undefined reference to `DirectFBErrorFatal'
/tmp/cc6iUS1W.o:Test01HorizontalLine.cpp:(.text+0x2e4): more undefined references to `DirectFBErrorFatal' follow
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T02:59:00.093

下面的代码适用于我的测试 ubuntu12，我可能与你有不同的 directfb，但应该是相似的：

```
#include <stdio.h>
#include <unistd.h>

#include <directfb/directfb.h>

static IDirectFB *dfb = NULL;
static IDirectFBSurface *primary = NULL;
static int screen_width = 0;
static int screen_height = 0;
#define DFBCHECK(x...)                                         \
  {                                                            \
    DFBResult err = x;                                         \
                                                               \
    if (err != DFB_OK)                                         \
      {                                                        \
        fprintf( stderr, "%s <%d>:\n\t", __FILE__, __LINE__ ); \
        DirectFBErrorFatal( #x, err );                         \
      }                                                        \
  }
int main(int argc, char **argv) {

    DFBSurfaceDescription dsc;
    DFBCHECK(DirectFBInit (&argc, &argv));
    DFBCHECK(DirectFBCreate (&dfb));
    DFBCHECK(dfb->SetCooperativeLevel (dfb, DFSCL_FULLSCREEN));
    dsc.flags = DSDESC_CAPS;
    dsc.caps = DFBSurfaceCapabilities(DSCAPS_PRIMARY | DSCAPS_FLIPPING);
    DFBCHECK(dfb->CreateSurface( dfb, &dsc, &primary ));
    DFBCHECK(primary->GetSize (primary, &screen_width, &screen_height));
    DFBCHECK(primary->FillRectangle (primary, 0, 0, screen_width, screen_height));
    DFBCHECK(primary->SetColor (primary, 0x80, 0x80, 0xff, 0xff));
    DFBCHECK(primary->DrawLine (primary, 0, screen_height / 2, screen_width - 1, screen_height / 2));
    primary->Flip(primary, NULL, DFBSurfaceFlipFlags(0));
    sleep(5);
    primary->Release(primary);
    dfb->Release(dfb);
    return 23;
} 
```

使用以下命令行构建：

```
 g++ -o testHorizonLine  Test01HorizontalLine.cpp -I/usr/include \
 -I/usr/include/directfb -L/usr/lib/i386-linux-gnu -ldirectfb 
```

要查找 libdirectfb.so 的位置，您可以使用 linux`find`命令，然后将`-L`选项添加到 g++ 命令以包含库路径并添加`-ldirectfb`到链接 libdirectfb.so 文件。

```
$ find /usr/lib -name libdirectfb.so 
```

运行 testhorizo​​nLine 输出：

```
 ~~~~~~~~~~~~~~~~~~~~~~~~~~| DirectFB 1.2.10 |~~~~~~~~~~~~~~~~~~~~~~~~~~
        (c) 2001-2008  The world wide DirectFB Open Source Community
        (c) 2000-2004  Convergence (integrated media) GmbH
      ----------------------------------------------------------------

(*) DirectFB/Core: Single Application Core. (2012-05-21 06:43)
(!) Direct/Util: opening '/dev/fb0' failed
    --> Permission denied
(!) DirectFB/FBDev: Error opening framebuffer device!
(!) DirectFB/FBDev: Use 'fbdev' option or set FRAMEBUFFER environment variable.
(!) DirectFB/Core: Could not initialize 'system_core' core!
    --> Initialization error!
Test01HorizontalLine.cpp <24>:
        (#) DirectFBError [DirectFBCreate (&dfb)]: Initialization error! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:46:03.557

你能试试这个吗，因为我现在没有这样的版本。

```
dsc.caps = DFBSurfaceCapabilities(DSCAPS_PRIMARY | DSCAPS_FLIPPING);  
...  
primary->Flip(primary, NULL, DFBSurfaceFlipFlags(0)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T12:19:31.830

如果您在项目中使用库，包括标题只是工作的一半。您还必须显示实际库（在您的情况下为**libdirectfb.so**）的位置，以便它可以链接到您的代码。通过传递**-L**和**-l**选项来做到这一点（另**请注意**，前缀 lib- 和 externsion .so 都不是必需的）：

```
g++ your_source_file.cpp -I /path/to/include -L/path/to/lib -ldirectfb 
```

关于如何在项目中使用库有很多主题，即您可能想从[这里](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)和[这里开始](https://stackoverflow.com/questions/1142103/how-do-i-load-a-shared-object-in-c)

**PS 使用-Wall**选项来查看正在发生的事情的更多信息总是一个好主意。

# jquery-mobile - jQuery mobile 自定义选择菜单，带有不同样式的选项

> ID：14364538
> 
> 赞同：0
> 
> 时间：2013-01-16T17:47:26.633
> 
> 标签：jquery-mobile

是否可以在 jquery 移动自定义选择菜单（http://jquerymobile.com/demos/1.2.0/docs/forms/selects/custom.html）中设置不同选项的样式？

我的项目需要不同选项的背景是不同的颜色。我一直在寻找一段时间，但没有遇到解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:43:18.003

该方法始终相同，即使用`nth-child`选择器选择`<li>`您想要的 s（然后更改其中的`<div>`s）。您可以将它与 CSS3（更好）或 jQuery 一起使用。您必须`nth-child`与元素的子元素结合`ul.ui-listview`。像这样的东西：

```
ul.ui-listview > li:nth-child(2n) > div {background-color: green}
ul.ui-listview > li:nth-child(2n+1) > div {background-color: red} 
```

或使用 jQuery：

```
$('ul.ui-listview > li:nth-child(2n) > div').css('background-color', 'green');
$('ul.ui-listview > li:nth-child(2n+1) > div').css('background-color', 'red'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:09:41.363

这是我解决这个问题的方法。

这是我的选择菜单：

```
 <select data-inline="true" data-native-menu="false" data-theme="d" data-val="true" data-val-number="The field DropletId must be a number." data-val-required="The DropletId field is required." id="Droplet" name="Plan.DropletId" style="margin-right:0px;">
    <option value="1">Ultra Coarse (UC)</option>
    <option value="2">Extra Coarse (XC)</option>
    <option selected="selected" value="3">Very Coarse (VC)</option>
    <option value="4">Coarse (C)</option>
    <option value="5">Medium (M)</option>
    <option value="6">Fine (F)</option>
    <option value="7">Very Fine (VF)</option>
    <option value="8">Extra Fine (XF)</option>
   </select> 
```

CSS：

```
 #Droplet-menu li:nth-child(1) >  div{background-color:Red; }
    #Droplet-menu li:nth-child(1) >  div > div > a {color: #FFFFFF !important;   text-shadow: #3373A5 0px 1px 1px}

    #Droplet-menu li:nth-child(2) > div{background-color:Blue;}
    #Droplet-menu li:nth-child(2) >  div > div > a {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px}

    #Droplet-menu li:nth-child(3) > div{background-color:Green;}
    #Droplet-menu li:nth-child(3) >  div > div > a {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px}

    #Droplet-menu li:nth-child(4) >  div{background-color:Yellow;}
    #Droplet-menu li:nth-child(4) >  div > div > a {color: #333333 !important;}

    #Droplet-menu li:nth-child(5) > div{ background-color:Black;}
    #Droplet-menu li:nth-child(5) >  div > div > a {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px}

    #Droplet-menu li:nth-child(6) > div{background-color: Fuchsia;}
    #Droplet-menu li:nth-child(6) >  div > div > a {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px}

    #Droplet-menu li:nth-child(7) > div{background-color:Aqua;}
    #Droplet-menu li:nth-child(7) >  div > div > a {color: #333333 !important;}

    #Droplet-menu li:nth-child(8) > div{background-color:Olive;}
    #Droplet-menu li:nth-child(8) >  div > div > a {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px} 
```

尽管这为 jQuery Mobile 自定义选择添加了不同的样式，但选择后的选定项目丢失了所需的样式。

所以，更多的CSS：

```
 .droplet1 {background-color:Red; color: White; text-shadow: #3373A5 0px 1px 1px;}
    .droplet2 {background-color:Blue; color: White; text-shadow: #3373A5 0px 1px 1px;}
    .droplet3 { background-color:Green; color: White; text-shadow: #3373A5 0px 1px 1px;}
    .droplet4 { background-color:Yellow; color: Black;}
    .droplet5 { background-color:Black; color: White; text-shadow: #3373A5 0px 1px 1px;}
    .droplet6 { background-color: Fuchsia; color: White; text-shadow: #3373A5 0px 1px 1px}
    .droplet7 {background-color:Aqua; color: Black;}
    .droplet8 { background-color:Olive; color: White; text-shadow: #3373A5 0px 1px 1px;} 
```

...和一个小 jquery：

```
 var prevClass = "";

    $(document).ready(function () {
    var selDroplet = $("#Droplet option:selected").attr('value');
    var dropletCssClass = "droplet" + selDroplet;
    $('#Droplet-button span:nth-of-type(1)').addClass(dropletCssClass);
  });

    $("#Droplet").change(function () {
    var str = "";

    $("#Droplet option:selected").each(function () {
    str = "droplet" + $(this).attr('value');

    $("#SelectedDroplet").val($(this).attr('value'));
    $('#Droplet-button span:nth-of-type(1)').removeClass(prevClass);
    $('#Droplet-button span:nth-of-type(1)').addClass(str);
    prevClass = str;
  });

})
.change(); 
```

此代码已经过测试，可在 iPad 和三星 Galaxy 10.1 平板电脑上运行。

演示：http: [//jsfiddle.net/Debarupa/7TsVM/](http://jsfiddle.net/Debarupa/7TsVM/)

希望它会帮助别人。

感谢 Aurelio De Rosa 为我指明了正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T20:24:12.280

在 jQuery Mobile 1.4.5 中生成的结构发生了一些变化，因此您必须通过以下方式更改 CSS 以使其正常工作：

```
#Droplet-menu li:nth-child(1) .ui-btn {background-color:Red; }
#Droplet-menu li:nth-child(1) .ui-btn {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px}

#Droplet-menu li:nth-child(2) .ui-btn {background-color:Blue;}
#Droplet-menu li:nth-child(2) .ui-btn {color: #FFFFFF !important; text-shadow: #3373A5 0px 1px 1px}
... 
```

# python - scipy：如何获取每一行的所有非零值索引？

> ID：14364551
> 
> 赞同：1
> 
> 时间：2013-01-16T17:48:03.897
> 
> 标签：python, numpy, scipy

我找不到有关 scipy.sparse 索引的更多信息，除了 SciPy v0.11 参考指南，它说

```
lil_matrix 类支持基本的切片和花式索引，其语法与 NumPy 数组类似。
```

. 我已经阅读了关于索引的numpy文档，但我没有清楚地理解它，例如，

```
Asp = sparse.lil_matrix((3,3))
Asp.setdiag(zeros(3))
Asp[0, 1:3] = 10
print Asp.todense() 
```

1.为什么输出是

```
[[ 0\. 10\. 10.]
 [ 0\. 0\. 0.]
 [0\. 0\. 0.]]
```

[0,1:3] 是什么意思？如果我使用

```
Asp[0, 1:2,3] = 10 
```

有一个错误：

```
IndexError：无效索引
```

，我不知道原因。

2.获取每行所有非零值的最快方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T04:28:35.680

对于第二个问题，请使用该`nonzero()`方法。我不得不挖掘[源代码](https://github.com/scipy/scipy/blob/v0.11.0/scipy/sparse/base.py#L415)才能找到它，因为我在任何参考文档中都找不到它。

```
def nonzero(self):
    """nonzero indices

    Returns a tuple of arrays (row,col) containing the indices
    of the non-zero elements of the matrix.

    Examples
    --------
    >>> from scipy.sparse import csr_matrix
    >>> A = csr_matrix([[1,2,0],[0,0,3],[4,0,5]])
    >>> A.nonzero()
    (array([0, 0, 1, 2, 2]), array([0, 1, 2, 0, 2]))

    """ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:02:21.440

> 是什么`[0,1:3]`意思？

这意味着：第 0 行，元素`1`到`3`（不包括）。由于 Numpy 和 Scipy 使用从零开始的索引，因此第 0 行是第一行，`1:3`表示第一列和第二列。

`Asp[0, 1:2,3]`无效，因为您有三个索引`0`,`1:2`和`3`. 矩阵只有两个轴。

这都是标准的 Numpy 东西；阅读有关该软件包的任何好的教程。

# c++ - decltype - “定义为引用的变量不被视为它所引用对象的同义词的唯一上下文”？

> ID：14364552
> 
> 赞同：6
> 
> 时间：2013-01-16T17:48:07.347
> 
> 标签：c++

我正在阅读 C++ Primer，第 5 版，第 5 页。71 他们首先给出了这个代码示例：

```
const int ci = 0, &cj = ci;
decltype(ci) x = 0;
decltype(cj) y = x;
decltype(cj) z; //error 
```

然后他们说：

> 值得注意的是，这`decltype`是唯一一个定义为引用的变量不被视为它所引用的对象的同义词的上下文。

他们这是什么意思？我不明白。那里`y`是指。`x`那么有什么问题呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T17:51:55.900

我相信他们试图说这`decltype(cj)`不会给你`cj`引用的对象的类型（即，`const int`），但会给你`cj`它本身的类型。`y`也会如此`const int&`。

与之比较的情况是在表达式中使用引用的名称。标准说：

> 如果表达式最初具有类型“对 T 的引用”（8.3.2、8.5.3），则在任何进一步分析之前将类型调整为 T。表达式指定引用表示的对象或函数，表达式是左值或 x 值，具体取决于表达式。

也就是说，当在表达式中使用引用的名称时，所作用的不是引用，而是它所引用的对象。这就是为引用类型提供“别名”功能的原因。

# ruby-on-rails - 如何防止 Rails `exists?` 调用`after_find`？

> ID：14364556
> 
> 赞同：2
> 
> 时间：2013-01-16T17:48:26.533
> 
> 标签：ruby-on-rails, ruby, callback

我正在将一个项目从 Rails 2.3.2 升级到 2.3.15。似乎`exists?`现在可以将其视为查找器，这意味着诸如`after_find`现在是来自`exists?`.

在 2.3.2`exists?`中没有触发回调到`after_find`. 除了在 github 上明确命名此策略更改的提交之外，我无法找到可读的更改日志。

有人可以确认在 2.3.2`exists?`中没有调用`after_find`（应该存在）并且在 2.3.15 中调用了吗？

如果是这种情况，是否有一种干净的 Rails 方法来隔离`after_find`调用？我需要在真正找到之后执行一些代码，而不是在`exists?`.

作为临时解决方法，我正在尝试将其作为模型中的第一行`after_find`：

```
return unless self.has_attribute?(:some_attrib_your_model_uses_in_after_find) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:25:00.287

我发现了三种方法可以做到这一点，它们都不令人满意，但至少有两种方法可以可靠地工作，即使它们在设计上令人惊讶并且可能会在未来产生一些非常微妙的错误。

### A）如果您将使用的属性丢失，则返回

```
def after_find
  # What a flaky way to ruin your code:
  return unless self.has_attribute?(:some_attrib_your_model_uses_in_after_find)
  @amazing_pain = @some_attrib_your_model_uses_in_after_find + 1
end 
```

### B) Grep 整个调用栈

*（祈祷存在？因为你认为它在里面）*

我很惭愧将其作为一个选项发布，但很高兴看到您可以使用可用于`caller`. 让我们只希望`caller`不会改变格式。

从控制台使用 2.3.15，我模型的 after_find() 的调用堆栈是：

```
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/callbacks.rb:347:in `send'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/callbacks.rb:347:in `callback'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:1687:in `send'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:1687:in `instantiate'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:665:in `find_by_sql'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:665:in `collect!'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:665:in `find_by_sql'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:1582:in `find_every'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:1539:in `find_initial'
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.15/lib/active_record/base.rb:696:in `存在？
(irb):2:in `irb_binding'
/usr/lib/ruby/1.8/irb/workspace.rb:52:in `irb_binding'
/usr/lib/ruby/1.8/irb/workspace.rb:52

```

### C) 使模型 Eager-Load

有些人可能想要这样做，2.3.15 ActiveRecord README 提示它：

```
after_find :eager_load, 'self.class.announce(#{id})' 
```

我不想给数据库带来更多的负担。在许多情况下调用`exists?`的目的是进行简单的单列查找。执行整个模型的预加载以及可能的关联只是为了进行`exists?`调用将导致性能下降。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:53:50.523

这个答案对你有帮助吗？

[升级到 rails3 后 after_find 回调中断](https://stackoverflow.com/questions/3661376/after-find-callback-broken-after-upgrade-to-rails3)

head rails 2.3 分支应该接近于 rails 3 中存在的内容。我认为很多类似的重大变化发生在 2.3.12 或 2.3.14 前后。IIRC 这样做是为了简化对 Rails 3 的升级。

# glassfish-3 - Glassfish 管理控制台可以拥有多个具有特定权限的用户吗？

> ID：14364558
> 
> 赞同：1
> 
> 时间：2013-01-16T17:48:43.373
> 
> 标签：glassfish-3, user-permissions

我是 Glassfish (3.1.2.2) 的新手，想知道是否可以使用仅具有修改 JNDI 属性的权限的用户登录管理控制台。我找不到任何地方说您可以或不可以拥有多个具有不同权限的管理控制台用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:57:34.657

您可以为 Admin Console 创建多个用户，但无法通过 Admin Console 修改访问权限。
看起来可以创建具有只读访问权限的用户。[此处](http://logicoy.com/logicoyblog/?p=109)对其进行了描述。也许可以扩展此方法以适合您的用例。

# c++ - minMaxLoc 数据类型

> ID：14364563
> 
> 赞同：6
> 
> 时间：2013-01-16T17:48:56.513
> 
> 标签：c++, image-processing, opencv, computer-vision

我被这件事难住了很长一段时间。您能否帮我知道，Opencv 中的 minMaxLoc() 在查找 Mat 变量的最大值、最小值时考虑了什么数据类型？我从函数中得到了某个值，但我不知道该值实际代表什么，以及在什么数据类型中？

```
 Laplacian(src_gray,dst,ddepth,kernel_size,scale,delta,BORDER_DEFAULT);
    minMaxLoc(dst,&min,&estimate,&minLoc,&maxLoc,noArray()); 
```

'estimate' 的值在 1000 左右，而如果我尝试访问 'dst' Mat 变量的值，使用

```
 dst.at<datatype>(k,l) 
```

如果我使用 long int，我会得到模糊的值，从 124、uchar 的 125 到 2、xxx、xxx、xxx。minMaxLoc 函数实际给出的值是多少？请帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T19:08:41.957

min 和 estimate 应该是 double 类型，我想它们是正确的。问题可能在于您访问

```
dst.at<datatype>(k,l) 
```

正如 Abhishek Thakur 提到的，输出取决于您的输入。如果您对矩阵的类型感到困惑，您可以查看 dst.type() 它返回一个整数，该整数对应于从第 557 行开始的[types_c.h](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/core/include/opencv2/core/types_c.h?rev=3837)中定义的列表。单通道类型或“深度”的定义是

```
#define CV_8U   0
#define CV_8S   1 
#define CV_16U  2
#define CV_16S  3
#define CV_32S  4
#define CV_32F  5
#define CV_64F  6 
```

您可以在第 573 行看到用于计算其他类型标识符的公式

```
#define CV_CN_SHIFT   3
#define CV_DEPTH_MAX  (1 << CV_CN_SHIFT)

#define CV_MAT_DEPTH_MASK       (CV_DEPTH_MAX - 1)
#define CV_MAT_DEPTH(flags)     ((flags) & CV_MAT_DEPTH_MASK)

#define CV_MAKETYPE(depth,cn) (CV_MAT_DEPTH(depth) + (((cn)-1) << CV_CN_SHIFT)) 
```

例如

```
#define CV_8UC4 CV_MAKETYPE(CV_8U,4) 
```

有类型

```
0+((4-1) << 3) == 24 
```

因此对于 4 通道的 uchar 图像，type() 将返回 24。从上面可以看出，类型的深度由整数类型的最后 3 位表示。如果您想要的只是深度（您不在乎它有多少个频道），您可以直接使用 dst.depth()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T10:21:20.013

[锤子](https://stackoverflow.com/a/14365886/433685)的答案非常清楚，它向您展示了一个很好的提示：始终检查数据类型并注意`types_c.h`，每次需要时都检查一下！

无论如何， minMaxLoc 返回一个 double 但它已经为你做了演员。如果您将 uchar Mat 对象作为输入数组，它将在 0-255 范围内（uchar 范围！）将 2 个双精度变量设置为双精度。

看这个例子：

```
#include <opencv2/core/core.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main(int /*argc*/, char** /*argv*/) {

    double m, M;
    Point p_min, p_max;
    Mat img;

    // let's do with uchar Mat
    img = (Mat_<uchar>(3,3) << 0,1,2,3,4,5,6,7,255); 
    cout << img << endl;
    minMaxLoc(img, &m, &M, &p_min, &p_max);
    cout << "min: " << m << " at " << p_min << endl;
    cout << "max: " << M << " at " << p_max << endl;
    cout << (int)img.at<uchar>(p_max.y, p_max.x) << endl; // cast to int otherwise cout will print an ASCII (uchar)

    // now with float Mat
    img = (Mat_<float>(3,3) << 0.1f,1.2f,2,3000.2f,4,5,6,7,255); 
    cout << img << endl;
    minMaxLoc(img, &m, &M, &p_min, &p_max);
    cout << "min: " << m << " at " << p_min << endl;
    cout << "max: " << M << " at " << p_max << endl;
    cout << img.at<float>(p_max.y, p_max.x) << endl;

    return 0;
} 
```

现在，在您发布的代码中，您在`ddepth`. 您可以将`ddepth`数据类型指定为 opencv 常量，例如：

```
ddepth = CV_8UC1 
```

在这种情况下， cv::Laplacian 将返回一个 uchar Mat。

因此，请始终注意您要处理的数据类型。如果您正在使用彩色图像，您可能会更好地使用`Mat::at<Scalar>()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T18:22:31.867

这取决于你想要什么价值。对于灰度图像，如果您输入具有 uchar 数据类型的 Mat，您将得到一个介于 0 到 255 之间的值。

# c# - 消除“打印文档的第 1 页”消息

> ID：14364564
> 
> 赞同：1
> 
> 时间：2013-01-16T17:49:11.053
> 
> 标签：c#, windows, winforms, printing

我有这个打印标签的例程，无论是在屏幕上的预览模式下还是在标签打印机上。在每个打印操作开始之前，屏幕上会短暂显示一个令人讨厌的对话框，该对话框标有“正在打印”，并且在正文中显示“文档的第 1 页”和“取消”按钮。我发现一个参考资料说我可以在打印之前使用如下语句来消除这种情况：

```
MyPowderlabel.PrintController = new System.Drawing.Printing.StandardPrintController(); 
```

这似乎没有任何效果。

这是代码：

```
private void PrintLabel(object sender, EventArgs e)
{   // This routine starts up the print operation for the current label
try
{
   PrintDocument MyPowderlabel;
   MyPowderlabel = new PrintDocument();
   PaperSize PS = null; //Label dimensions for printer are in units of .01"
   PS = new PaperSize("Custom Size", 134, 118 );  // 3.4 cm wide x 3 cm high
   MyPowderlabel.DefaultPageSettings.PaperSize = PS;
   MyPowderlabel.DefaultPageSettings.Landscape = false;
   MyPowderlabel.PrintPage += new PrintPageEventHandler(MyPowderlabel_PrintPage);
   MyPowderlabel.PrinterSettings.PrinterName = printersList.Text;
   //  Display the label in the print preview box
   printPreviewControl1.Document = MyPowderlabel;
   printPreviewControl1.Document.PrintController = new System.Drawing.Printing.StandardPrintController();

   printPreviewControl1.Show();

   //The next statement is needed to insure that the label preview will be displayed for at least
   //a short time before it gets erased before the next barcode is processed.
   Application.DoEvents();
   if (!ckPrintPreview.Checked)
    {
      // Send the label to the selected (hard copy) printer 
      MyPowderlabel.PrintController = new System.Drawing.Printing.StandardPrintController();
      MyPowderlabel.Print();
    }
}
catch (Exception EX)
{
    MessageBox.Show("Error while trying to send label to printer\r\n" + EX.Message);
}
} 
```

# java - 哪个类加载器加载了特定的 Java 类

> ID：14364566
> 
> 赞同：0
> 
> 时间：2013-01-16T17:49:19.257
> 
> 标签：java, classloader

> **可能重复：**
> [找到加载特定类的 ClassLoader](https://stackoverflow.com/questions/9721559/find-the-classloader-loading-a-specific-class)

有没有办法确定哪个类加载器加载了特定的 Java 类？

# javascript - PHP @move_uploaded_file 使用 Resumable.js 返回 false

> ID：14364571
> 
> 赞同：1
> 
> 时间：2013-01-16T17:49:27.307
> 
> 标签：javascript, php, resumablejs

我正在尝试使用 PHP 后端实现 Resumable.js，并且正在使用提供的示例后端：[示例后端](https://github.com/23/resumable.js/blob/master/samples/Backend%20on%20PHP.md)

我通过以下方式从我的 javascript 页面拨打电话：

```
var r = new Resumable({
        target:'backend.php',
        chunkSize:1*1024*1024,
        simultaneousUploads:4,
        testChunks:false,
        throttleProgressCallbacks:1
      }); 
```

但是，当它到达 PHP 文件中的这一行时，它似乎记录了这个错误

```
if (!@move_uploaded_file($file['tmp_name'], $dest_file)) {
    _log('Error saving (move_uploaded_file) chunk '.$_POST['resumableChunkNumber'].' for file '.$_POST['resumableFilename'].'tmp_name: '.$file['tmp_name']); 
```

这是日志

```
16.01.2013: Error saving (move_uploaded_file) chunk 1 for file Invoice-2010-04-30.xls tmp_name/tmp/phpqggZ0O 
```

有什么具体原因吗？我正在使用的 PHP 与上面的链接完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:35:15.440

我通过修改 PHP 文件使用的目录解决了这个问题。很多时候它会使用不正确的，或者只是不合适的目录。一旦修复，它工作正常。

# django - slug url 和更多页面之后

> ID：14364572
> 
> 赞同：0
> 
> 时间：2013-01-16T17:49:35.670
> 
> 标签：django, slug

我不明白如何在 slug 字段之后生成 url，输入 stop another page as django ago 以保存 slug 字段值或应该转到 views.py 的值

我在models.py

```
from django.db import models
from django.db.models import permalink

class Blog(models.Model):
    title =     models.CharField(max_length=100, unique=True)
    slug =      models.SlugField(max_length=100, unique=True)
    body =      models.TextField()
    posted =    models.DateField(db_index=True, auto_now_add=True)
    category =  models.ForeignKey('blog.Category')

    def __unicode__(self):
        return '%s' % self.title

    @permalink
    def get_absolute_url(self):
    return ('view_blog_post', None, {'slug': self.slug}) 
```

视图.py

```
def index(request):
        return render_to_response('index.html', {'categories':Category.objects.all(), 'posts': Blog.objects.all()[:5]})

def view_post(request, slug):
        return render_to_response('view_post.html', {'post':get_object_or_404(Blog, slug=slug)})

def view_details(request, slug):
            return render_to_response('view_details.html', {'post':get_object_or_404(Blog, slug=slug)}) 
```

网址.py

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',

    url(r'^$', 'blog.views.index', name='index'),
    url(r'^blog/view/(?P<slug>[^\.]+)', 'blog.views.view_post', name='view_blog_post'),
    url(r'^blog/view/(?P<slug>[^\.]+)'/details, 'blog.views.view_details', name='view_blog_details'),
) 
```

索引.html

```
{% extends 'base.html' %}
{% block titulo %} My blog {% endblock %}

{% block content %} 
<h2>posts</h2>
    {% if posts %}
        <ul>
        {% for post in posts %}
        <li><a href="{{ post.get_absolute_url }}">{{post.title}}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No hay post's</p>
    {% endif%}
{% endblock %} 
```

view_post.html

```
{% extends 'base.html' %}
{% block head_title %} {{post.title}} {% endblock %}
{% block title %} {{post.title}} {% endblock %}

{% block content %}
    {{post.body}}
{% endblock %} 
```

我不能做一个像这样的网址

本地主机：8000/field-slug/details

这个网址不起作用有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:05:17.663

尝试更改 slug 模式并将 $ 添加到 url 的末尾：

```
urlpatterns = patterns('',
    url(r'^$', 'blog.views.index', name='index'),
    url(r'^blog/view/(?P<slug>[-\w]+)/$', 'blog.views.view_post', name='view_blog_post'),
    url(r'^blog/view/(?P<slug>[-\w]+)/details/$', 'blog.views.view_details', name='view_blog_details'),
) 
```

# asp.net-mvc - 为 MVC 会话创建唯一记录

> ID：14364577
> 
> 赞同：0
> 
> 时间：2013-01-16T17:49:57.710
> 
> 标签：asp.net-mvc, duplicates, httprequest

我有一个要求，我需要在我的 MVC 4 网站上的用户会话开始时创建一个数据库记录。

入口点控制器的轮廓如下所示：

```
public ActionResult Index(int userId, int requestId) {
   var userInfo = db.GetUserInfo(userId, requestId);

   if (userInfo == null) {
      userInfo = db.CreateUserInfo(userId, requestId);
   }

   // rest of code
 } 
```

我发现此代码并不完全可靠，因为偶尔会创建重复记录（通常具有相同的创建日期 - 至少到最接近的毫秒）。我只能假设（外部）网页/客户端生成两个几乎同时的请求。

请注意，如果用户稍后返回站点（使用相同的查询字符串参数），那么我希望他们获取现有的 userInfo 记录。

我知道我可以通过向表中添加唯一索引来“解决”问题，无论如何我可能都需要这样做，但我想知道是否有更好的模式可以遵循？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:58:38.373

当用户注册并将其存储在`userInfo`数据库的表中时，为用户会话生成一个随机字符串。当用户稍后访问该站点时，您只需检查用户名和密码以进行身份​​验证，如果成功，则您将从数据库中为该用户获取先前存储的唯一随机字符串并将其放入会议。这样，您可以在用户的​​整个生命周期中使用相同的随机字符串。希望这可以帮助

# jquery - Ajax 登录 Rails

> ID：14364587
> 
> 赞同：0
> 
> 时间：2013-01-16T17:50:13.407
> 
> 标签：jquery, ruby-on-rails

我需要为登录实现类似 Ajax 的行为：

我有这个控制器：

```
def login
    if request.post?  
      @frontendu = Frontenduser.authenticate(params[:email], params[:login_password], params[:store_id])
      if @frontendu
        session[:frontend_user] = @frontendu.id
        @fuser=Frontenduser.find(session[:frontend_user])
        @fuser.update_attributes(:is_logged =>true)
        @fuser.save
        flash[:message]  = "Login successful."
        redirect_to :back
      else
        redirect_to :back
      end 
  end
  end 
```

我有这个表格：

```
<form accept-charset="UTF-8" action="/frontendusers/login" id="signin_form" method="post">
  <div class="field">
    <%= text_field_tag :email %>
  </div>
  <div class="field">
    <%= password_field_tag :login_password %>
    <%= hidden_field_tag :store_id, store_id %>
  </div>
  <div class="forget uppercalse">
    <a href="#">Forget Username?</a>
  </div>
  <div class="forget uppercalse">
    <a href="#">Forget Password?</a>
  </div>
  <div class="login-button">
    <input type="submit" value="Log In"></input>
  </div>
</form> 
```

这可行，但我想保留登录表单并简单地显示登录失败的某个地方（我将放置适当的 div）。如果它没有失败，那么重定向就可以了。

我是 Rails 的初学者，但我的任务是这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:57:06.787

如果您使用的是 Rails 3，我建议您查看本指南[http://guides.rubyonrails.org/ajax_on_rails.html](http://guides.rubyonrails.org/ajax_on_rails.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:45:49.453

虽然这很丑...

```
def login
  if request.post?  
    @frontendu = Frontenduser.authenticate(params[:email], params[:login_password], params[:store_id])
    if @frontendu
      session[:frontend_user] = @frontendu.id
      @fuser=Frontenduser.find(session[:frontend_user])
      @fuser.update_attributes(:is_logged =>true)

      # change this part
      if @fuser.save
        flash[:message]  = "Login successful."
        redirect_to :back
      else 
        # do something here
      end

      # original function
    else
      redirect_to :back
    end 
  end
end 
```

我建议您搭建一个示例控制器并将其用作示例。

```
rails g controller TestyMcTest 
```

您还应该利用发生请求的上下文。这将是脚手架控制器的格式部分。您可以根据请求的类型做不同的事情。

# javascript - 5s后删除一个div

> ID：14364588
> 
> 赞同：1
> 
> 时间：2013-01-16T17:50:16.650
> 
> 标签：javascript, jquery, ajax

我有这个 AJAX 表单：

```
function form(){

        var icao = document.getElementById('icao').value;
        var name = document.getElementById('name').value;
        var weightempty = document.getElementById('weightempty').value;
        var weightfull = document.getElementById('weightfull').value;
        var cargofull = document.getElementById('cargofull').value;
        var cruisespeed = document.getElementById('cruisespeed').value;
        var range = document.getElementById('range').value;
        var price = document.getElementById('price').value;
        var firstclassseats = document.getElementById('firstclassseats').value;
        var businessclassseats = document.getElementById('businessclassseats').value;
        var economyclassseats = document.getElementById('economyclassseats').value;
        ajax.open("POST","new_aircraft_process.php",true);
        ajax.onreadystatechange=function(){
            if(ajax.readyState==4)
            {
            var respuesta=ajax.responseText;

            document.getElementById('result').innerHTML=ajax.responseText;
            $("#newaircraftdialog").dialog('close');

            refreshTable(function(){$("#loadingdialog").dialog('close');});
            }
        }
    ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    ajax.send("icao="+icao+"&name="+name+"&weightempty="+weightempty+"&weightfull="+weightfull+"&cargofull="+cargofull+"&cruisespeed="+cruisespeed+"&range="+range+"&price="+price+"&firstclassseats="+firstclassseats+"&businessclassseats="+businessclassseats+"&economyclassseats="+economyclassseats);
    $("#loadingdialog").dialog('open');
    } 
```

我想要的是在结果 div 中显示结果时（它是一个显示“成功表单”的文本），它是否仅可见 5 秒然后消失。我找到了各种方法，但不想删除 div。因为如果我想再次制作表单，结果将不得不再次显示在 div 中，并在 5 秒后消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:51:20.193

```
$('.myDiv').fadeIn(); // Show the div to start.
// All your other code here.
setTimeout(function() { $('.myDiv').fadeOut() }, 5000); // hide the div after we're done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:53:46.743

您可以使用`delay()`

```
$('divtoremove').delay(5000).fadeOut('fast'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:54:12.597

您可以[隐藏](http://api.jquery.com/hide/)div 并在稍后重新提交表单时[显示它。](http://api.jquery.com/show/)

```
ajax.onreadystatechange=function(){
    if(ajax.readyState==4)
    {
        var respuesta=ajax.responseText;

        var $result = $('#result');
        $result.html(ajax.responseText);
        $result.show();
        setTimeout(function() { $result.hide() }, 5000);
        $("#newaircraftdialog").dialog('close');

        refreshTable(function(){$("#loadingdialog").dialog('close');});
    }
} 
```

您也可以稍后使用[分离](http://api.jquery.com/detach/)并将其重新附加到 DOM。

# java - 在 FireFox 16、17、18 + 中使用 java

> ID：14364591
> 
> 赞同：2
> 
> 时间：2013-01-16T17:50:23.640
> 
> 标签：java, firefox, liveconnect

我在我的 FireFox 扩展中使用 Java，但由于 Mozilla 在 FireFox 16,17,18 中停止支持 Java，我无法使用。所以我发现以前可以使用 LiveConnect，但现在不行了。

有办法解决吗？我想在版本 16 及更高版本的 FF 扩展中使用 Java，因为人们不想轻易降级到版本 15。

到目前为止，我已经像这样使用过java。

```
function createFile(folder,file)
{

destinationDir = new java.io.File(folder).mkdirs();
file = new java.io.File(folder,file);
file.createNewFile();
} 
```

而且效果很好。但这在我提到的 FF 中不再有效。

我在这里找到了这个问题。

[无法使用 Liveconnect 将 Java 加载到 Firefox 16 扩展中](https://stackoverflow.com/questions/13241173/unable-to-load-java-into-firefox-16-extension-using-liveconnect)

但是没有人回复。

请不要因此而降低我的声誉，我为此而努力。如果问题没有被正确提出，那么只需关闭它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:54:21.323

这是我在工作中用来替换 Java 的函数示例。

```
var string = '\u5909\u63db\u30c6\u30b9\u30c8';
file.initWithPath('C:\\temp\\temp.txt');
file.create(file.NORMAL_FILE_TYPE, 0666);
var charset = 'EUC-JP';
var fileStream = Components
.classes['@mozilla.org/network/file-output-stream;1']
.createInstance(Components.interfaces.nsIFileOutputStream);
fileStream.init(file, 2, 0x200, false);
var converterStream = Components
.classes['@mozilla.org/intl/converter-output-stream;1']
.createInstance(Components.interfaces.nsIConverterOutputStream);
converterStream.init(fileStream, charset, string.length,
Components.interfaces.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);
converterStream.writeString(string);
converterStream.close();
fileStream.close(); 
```

在[mozilla 开发人员文档](https://developer.mozilla.org/en-US/docs/Firefox_addons_developer_guide/Using_XPCOM%E2%80%94Implementing_advanced_processes)中，您可以找到有关此 XPCOM 的更多信息，该 XPCOM 可用于读取/写入文件和类似过程。所以我用这个代替Java。

# lambda - 使用 lambda 表达式从自定义类的通用列表中仅获取某些属性

> ID：14364593
> 
> 赞同：0
> 
> 时间：2013-01-16T17:50:32.827
> 
> 标签：lambda, generic-list

认为

```
class Person
{
string FirstName;
string LastName;
int Age;
} 
```

和一份清单

```
List<Person> listPerson; 
```

获取此列表中所有人的名字的可能方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:08:52.723

我认为你最简单的方法是

`List<string> firstNames = listPerson.Select(p => p.FirstName).ToList()`

但为了做到这一点，您需要公开这些属性。

# php - 在 Heredoc 中输出变量

> ID：14364595
> 
> 赞同：2
> 
> 时间：2013-01-16T17:50:48.850
> 
> 标签：php

我有一些跨越 EOF 的 html：

```
$message = <<<EOF

<p style="font-size: 9px; font-family: Verdana, Helvetica; width: 100%; text-align:left;">Clcik to remove <a href="http://www.mysite.com/remove.php?email=' $email '">clicking here.</a></p>

EOF; 
```

我试过单引号，单引号和 . 转义双引号。似乎找不到合适的组合。任何帮助表示赞赏。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:58:35.503

```
<?php

$email="test@example.com";

$message = <<<EOF
<p style="font-size: 9px; font-family: Verdana, Helvetica; width: 100%; text-align:left;">Click to remove <a href="http://www.mysite.com/remove.php?email=$email">clicking here.</a></p>
EOF;

echo $message;

?> 
```

但是，从您的示例中，我看不到 HEREDOC 的目的。为什么不只是：

```
<p style="font-size: 9px; font-family: Verdana, Helvetica; width: 100%; text-align:left;">Click to remove <a href="http://www.mysite.com/remove.php?email=<?=$email?>">clicking here.</a></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:35:12.810

您的代码应该可以工作，但是使用 Heredocs [实际上是这种语法的名称]，您通常不需要转义任何内容或使用特定的引号。@showdev 的第一个例子就是这样。

但是，使用[`sprintf()`](http://ca2.php.net/manual/en/function.sprintf.php).

```
$email1 = "bill@example.com";
$email2 = "ted@example.com";

$message_frame = '<p>Click to remove <a href="http://www.mysite.com/remove.php?email=%s">clicking here.</a></p>';

$message .= sprintf($message_frame, $email1);
$message .= sprintf($message_frame, $email2);

/* Output:
<p>Click to remove <a href="http://www.mysite.com/remove.php?email=bill@example.com">clicking here.</a></p>
<p>Click to remove <a href="http://www.mysite.com/remove.php?email=ted@example.com">clicking here.</a></p>
*/ 
```

最后：大型的内联`style=""`声明确实违背了 CSS 的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:46:01.313

Heredoc 通常用于较长的字符串，甚至可能是多个想法，您可能希望将其分段为单独的行。

正如[tuxradar](http://www.tuxradar.com/practicalphp/2/6/3)所说：“为了让人们可以轻松地在 PHP 中编写大量文本，而不需要不断地逃避事情，因此开发了 heredoc 语法”

```
<?php
$mystring = <<<EOT
    This is some PHP text.
    It is completely free
    I can use "double quotes"
    and 'single quotes',
    plus $variables too, which will
    be properly converted to their values,
    you can even type EOT, as long as it
    is not alone on a line, like this:
EOT;
?> 
```

在您的情况下，简单地回显您的字符串会更有意义。

```
$message = '<p style="font-size: 9px; font-family: Verdana, Helvetica; width: 100%; text-align:left;">Clcik to remove <a href="http://www.mysite.com/remove.php?email=' $email '">clicking here.</a></p>';

echo $message; 
```

# actionscript-3 - flash netstream appendBytes 和 .mp4

> ID：14364599
> 
> 赞同：1
> 
> 时间：2013-01-16T17:51:08.930
> 
> 标签：actionscript-3, flash, video-streaming, netstream, osmf

我可以`NetStream.appendBytes()`与 mp4 文件一起使用吗？似乎有几种选择，但我不确定它们是否有效：

1.  osmf HTTPNetStream - [http://sourceforge.net/adobe/osmf/svn/2487/tree/osmf/trunk/framework/OSMF/org/osmf/net/httpstreaming/HTTPNetStream.as#l191](http://sourceforge.net/adobe/osmf/svn/2487/tree/osmf/trunk/framework/OSMF/org/osmf/net/httpstreaming/HTTPNetStream.as#l191)

2.  flowplayer psuedoNetStream 显然需要服务器端操作。 [http://flash.flowplayer.org/demos/plugins/streaming/mp4-pseudostreaming.html](http://flash.flowplayer.org/demos/plugins/streaming/mp4-pseudostreaming.html)

我正在寻找客户端解决方案，即它会自行从服务器获取字节数组。

我认为`appendBytes()`只支持 flv 但有没有办法使用 FLVtag 来操纵它？解析mp4的元数据可能有问题。我想我需要知道如何附加 mp4 的片段。

# triggers - 未找到相关名称“N”

> ID：14364601
> 
> 赞同：1
> 
> 时间：2013-01-16T17:51:16.773
> 
> 标签：triggers, sqlanywhere

我做了这个触发器：

```
插入后更改触发器“isok”
在“dba”上订购 1。“orderz”
将新引用为 N
对于每个声明
开始
    插入评论 (order_id,user_id,com_content) 值 (N.order_id,1,'OK');
结尾

```

并且 SQL Anywhere 在我保存它时没有显示错误，但现在当我想在`orderz`表中插入一些东西时它会显示：

> 未找到相关名称“N”

我的代码可能是错误的，但我搜索了触发器，但我不知道如何解决这个问题。我要做的就是在`comments`表中创建一个新行，其中包含新订单`ID`。

有人能告诉我如何写一个可以覆盖它的表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:43:05.900

你需要更换

```
FOR EACH STATEMENT 
```

和

```
FOR EACH ROW 
```

如果您使用`STATEMENT`，则没有要引用的行，因为即使您一次插入十行，触发器也只会触发一次。

# ruby - 比较运算符 `<=>` 和布尔值

> ID：14364604
> 
> 赞同：2
> 
> 时间：2013-01-16T17:51:21.157
> 
> 标签：ruby

`<=>`运算符不能很好地处理布尔值。

```
true <=> true # => 0
true <=> false # => nil 
```

这种行为是设计意图还是我遗漏了什么？我预计：

```
true <=> false # => 1
false <=> true # => -1 
```

* * *

**编辑** 这就是我要找的：

```
false.to_i <=> true.to_i # => -1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:59:39.540

`<=>`运算符并不是真正的“组合布尔值” ；*如果*它们定义了订单，则它用于*订购*同一类的项目。数字是有序的；大于和小于。布尔值没有固有的顺序；不大于或反之亦然。*`1``0``0``8675309``true``false`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T17:54:48.293

他们不是同一个班级。`true`是 的单例`TrueClass`，而`false`是 的单例`FalseClass`。您正在比较苹果和橙子（或者，`true <=> true`如果一个苹果与同一个苹果）。

出于好奇，您为什么认为`true <=> false`应该相等`1`？编辑：被sawa打败了*

# apache-camel - 如何将来自外部系统的所有传入消息保存在 Camel 中

> ID：14364610
> 
> 赞同：2
> 
> 时间：2013-01-16T17:51:39.740
> 
> 标签：apache-camel, soap-client, interception

亲爱的骆驼骑士！

我想问你是否知道任何推荐的方法如何保存/存储来自肥皂、休息等的所有传入消息......

使用当前拦截器：

```
a) org.apache.camel.spi.InterceptStrategy
b) tag  interceptFrom 
```

我有问题要区分，传入消息是来自主路由（由外部客户端调用）还是嵌套路由。

此外，类 UnitOfWork 方法不提供对父级 originalInMessage 的任何访问，因此在处理器中我也遇到了困难。

这是我想要实现的一个小的视觉解释： ![消息流](../Images/dce5f63d6fd2d38a6ed6e5fceb110b12.png)

感谢您的任何建议，安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:03:59.410

除非您尝试针对具有大量路由的现有应用程序进行重构，否则我不会使用拦截器...

相反，只需将原始消息保留在 Exchange 属性或消息头（以及任何其他消息源属性等）中，并创建一个简单的 KEEP 处理器来检索数据等。

# wpf - 在绑定之前设置 WPF 用户控件属性

> ID：14364613
> 
> 赞同：1
> 
> 时间：2013-01-16T17:51:56.960
> 
> 标签：wpf, binding, properties, user-controls

我正在制作一个日历用户控件。它有一个开始日期和一个结束日期，就像这样的属性

```
public DateTime StartDate { get; set; }
public DateTime EndDate { get; set; } 
```

这样我就可以像这样调用用户控件

```
<Local:CalendarControl StartDate="7/1/2013" EndDate="8/11/2013">
</Local:CalendarControl> 
```

现在在用户控件中，我需要计算开始日期和结束日期之间的周数和日期。为此，我自然需要使用选定的开始日期和结束日期。但是在计算绑定时，尚未设置属性。

所以被绑定的属性看起来像这样：

```
public List<DateTime> Dates
{
    get
    {
        var dateTimes = new List<DateTime>();
        for (var currentDate = StartDate; currentDate <= EndDate; currentDate = currentDate.AddDays(1))
            dateTimes.Add(currentDate);
        return dateTimes;
    }
}

public List<int> Weeks
{
    get
    {
        var weeks = new List<int>();
        if (DateTimeFormatInfo.CurrentInfo != null)
        {
            var cal = DateTimeFormatInfo.CurrentInfo.Calendar;

            foreach (var dateTime in Dates)
            {
                var weekNum = cal.GetWeekOfYear(dateTime, CalendarWeekRule.FirstDay, DayOfWeek.Monday);
                if (weeks.All(f => f != weekNum))
                {
                    weeks.Add(weekNum);
                }
            }
        }
        return weeks;
    }
} 
```

在 XAML 中，它绑定了 DATES 和 WEEKS 属性。但它们取决于首先设置的 StartDate 和 EndDate。

如何确保在绑定属性时设置属性。或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:29:56.127

将您的 StartDate 和 EndDate 属性更改为 DependencyProperties 并在其属性更改回调中引发日期和周的属性更改事件：

[如何在依赖属性上引发属性更改事件？](https://stackoverflow.com/questions/2480366/how-to-raise-property-changed-events-on-a-dependency-property)

# arrays - 数组作为matlab中向量的索引

> ID：14364616
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:06.913
> 
> 标签：arrays, matlab, matrix-indexing

我偶然发现了一些matlab代码，其中一维向量（比如长度为100的“信号”）由一个3D矩阵（比如尺寸为10x10x10的“距离”）索引，结果（“信号（距离）”）是一个3D矩阵与索引的 3D 矩阵完全相同的尺寸 10x10x10。

matlab实际上在那里做什么？向量的元素去哪了？你知道要搜索的关键字吗？

我用“索引”等关键字搜索了stackoverflow和mathworks帮助页面，但我没有找到任何有用的东西......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:56:38.430

在我[的另一个答案中](https://stackoverflow.com/a/13093242/1336150)，我在“使用矩阵下标的线性索引”部分解释了也可以使用另一个矩阵进行索引。

下标矩阵被简单地转换为列向量，并用于线性索引。然而，生成的矩阵总是与下标矩阵*具有相同的维度。*

例如，假设：

```
A = [10 20 30 40 50 60 70 80 90];
I = [1 3; 1 2]; 
```

在这种情况下`A(I)`与写作相同`reshape(A(I(:)), size(I))`。结果是：

```
ans = 
    10    70
    10    40 
```

# android - 如何在 ListView 中为 TextView 的背景颜色添加渐变效果？

> ID：14364617
> 
> 赞同：41
> 
> 时间：2013-01-16T17:52:07.707
> 
> 标签：android, gradient, textview

关于这些问题：

[在 ListView 中为 TextView 添加渐变效果会生成 NPE](https://stackoverflow.com/questions/14361772/adding-gradient-effect-to-textview-in-a-listview-generates-npe)

和

[如何在 ListView 上更改颜色和字体](https://stackoverflow.com/questions/7361135/how-to-change-color-and-font-on-listview)

我想知道如何`TextView`在`ListView`渐变效果中设置 a 的背景？

在上面的一个问题中，我最终将渐变效果添加到`TextView`. 在浏览第二个问题后，似乎我只能添加固定的背景颜色。

如何为背景添加渐变？我应该做一个`CustomListAdapter`吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-01-16T17:56:51.000

您只需要创建一个可绘制资源（参见下面的示例），并将其添加到您为 ListItem 创建的布局中。

可绘制对象（在您的 res\drawable 文件夹中 - 将其命名为 - listgrad.xml for ex）可能如下所示：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
      android:startColor="@color/gradient_start"
      android:endColor="@color/gradient_end"
      android:angle="-270" /> 
</shape> 
```

您可以将其添加到列表项的布局（为此定义的 layout.xml 文件），如下代码片段：

```
<TextView
        android:id="@+id/ranking_order"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/list_grad"
        />
... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-09T13:29:21.700

一旦你创建了一个渐变，你可以将它应用到几乎任何东西上，比如 textView、layout 或 button。

要了解如何创建和使用渐变，请参阅[**此链接**](http://www.singhajit.com/gradient-color-in-android/)。

要创建渐变，您需要将其添加到以下目录

[![在此处输入图像描述](../Images/87163a0250f5ff485d46c55d648ff3d5.png)](https://i.stack.imgur.com/rMyQX.png)

渐变代码将是这样的 -

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <gradient
                android:startColor="#ff2d9a59"
                android:centerColor="#ff42959a"
                android:endColor="#ff23729a"
                android:angle="135"/>
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-15T02:21:53.980

从这里引用：[如何在 Android 中创建带圆角的 ListView？](https://stackoverflow.com/questions/1683185/how-do-i-create-a-listview-with-rounded-corners-in-android/1683195#1683195) （我发现它非常有用。）

将以下内容添加到文件中（比如 gradient.xml），然后将其放在 (res/drawable/gradient.xml) 目录中。

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <gradient 
         android:startColor="#SomeGradientBeginColor"
         android:endColor="#SomeGradientEndColor" 
         android:angle="270"/> 

    <corners 
         android:bottomRightRadius="7dp" 
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp" 
         android:topRightRadius="7dp"/> 
</shape> 
```

完成创建此文件后，只需通过以下方式之一设置背景：

通过代码：`listView.setBackgroundResource(R.drawable.customshape);`

通过 XML，只需将以下属性添加到容器（例如：LinearLayout 或任何字段）：

```
android:background="@drawable/customshape" 
```

# java - 理论：如何结合 servlet 和 iphone 应用程序

> ID：14364619
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:09.223
> 
> 标签：java, objective-c, xcode, jsp, ios6

可能你们都问为什么我在那个问题中标记了 Java、jsp、Objective-c、xCode...，实际上这是我的问题，如何有效地结合它们？我在 localhost 中运行了两个 servlet，一个处理“客户端”，另一个处理“专业人员”。在这两个 servlet 中，我可以进行注册并要求从数据库中查询，我使用的是 SQL 数据库。我想使用这个 servlet 编写一个 iOS 6 应用程序，并做同样的事情，那么我怎样才能编写一个使用现有代码而不复制现有代码的应用程序？所有的逻辑都存在于 servlet 中，注册、询问价格、写关于专业人士的评论……我怎样才能编写一个使用这个网站的应用程序？

我举三个例子：

1.  在客户或专业人士的注册中，他输入了他的电话号码，因此在应用程序中我不需要输入电话号码；我想有一个可以带电话号码的功能。所以我们只需要在特定的文本字段中插入电话号码。
2.  在客户网站我有一个命令：客户的专业人士，所以，在应用程序中，我希望客户的地点将发送给专业人士，使用他当前的 GPS 位置。

3.  当客户订购专业人士时，我希望应用程序使用 apns（Apple Push Notification）发送推送通知，以“唤醒”专业应用程序并上传管理订单的现有页面。

我想这个问题之前已经出现过，并由经验丰富的程序员解决了。因此，也许有一种简单的方法可以不复制我在 servlet 中的现有代码。只能使用它。你能给我一个起点吗？参考？指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:02:35.493

移动应用程序与服务器交互的典型方式是通过 Web 服务，通常是 REST（或类似的）服务。

输出 HTML 的 Servlet 在这种情况下是无用的，您应该避免使用它们，因为您正在传输大量不需要的信息。我说的是通过网络传递的所有 HTML 和 CSS。正如您可能想象的那样，减少网络流量是移动应用程序的首要任务。

考虑开发一个 REST Web 服务，或者至少是一个输出和接收有意义的 JSON 对象的 servlet。这些只是原始数据，没有填充无用的格式化相关流量。您可以重用一些代码来构建和返回这些对象。

我希望我理解你的情况。

# html - TD背景不显示

> ID：14364623
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:19.830
> 
> 标签：html, css

我有这个 CSS 样式：

```
table.shadowed {
    border-spacing: 0px;
}

table.shadowed td {
    padding: 0px;
}

table.information {
    width: 500px;
}

table.information td.ul {
    background-image: url('img/information_bg_upper_left.png');
    background-position: bottom;
    background-repeat: no-repeat;
    width: 10px;
    height: 36px;
}

table.information td.u {
    background-image: url('img/information_bg_upper.png');
    background-position: bottom;
    background-repeat: repeat-x;
} 
```

和这个 HTML 代码片段：

```
<table class="shadowed information">
    <tr>
        <td class="ul"></td>
        <td class="u"></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

问题在于，对我来说，中心 TD 的背景在 Firefox 中可以很好地看到，但在 Chrome 或 Opera 中则不能。

这很有趣，因为我设置了`repeat-x`.

那么你有什么答案吗，为什么会这样？如何在不设置具体大小的情况下为表格单元格设置背景？

谢谢，阿龙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:59:45.080

为了使背景可见，单元格必须填充诸如文本之类的内容，或者设置宽度和高度，否则它会折叠并且无法看到背景。

# ruby-on-rails - HTML5 离线功能在 Heroku 服务器上不起作用，尽管它在开发机器上完美运行

> ID：14364624
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:21.110
> 
> 标签：ruby-on-rails, html, heroku, asset-pipeline, offline-caching

下面是相关的源代码：

```
offline = Rack::Offline.configure :cache_interval => 120 do      
 Rails.application.assets.each_logical_path.select{|e| not e.include? ".pdf"}.
    each {|e| cache "assets/" + e}
 network "/"  
end   
match "/application.manifest" => offline 
```

生成的[清单](https://muster-apotheke.splettville.com/application.manifest)似乎很好，资产也是如此，但它会在 Chrome 上显示以下消息，随机停止下载/缓存资产：`https://muster-apotheke.splettville.com/application.manifest`

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:47:41.273

通过使用asset_path 辅助方法，我可以在缓存清单中引用生产资产：

```
 if Rails.env.production?
    offline = Rack::Offline.configure :cache_interval => 120 do      
      cache ActionController::Base.helpers.asset_path("application.css")
      cache ActionController::Base.helpers.asset_path("application.js")
      network "/"  
    end
    match "/application.manifest" => offline  
  else
    offline = Rack::Offline.configure :cache_interval => 120 do      
      Rails.application.assets.each_logical_path.select{|e| not e.include? ".pdf"}.each {|e| cache "assets/" + e}
      network "/"  
    end    
    match "/application.manifest" => offline  
  end 
```

# php - YouTube API 搜索准确短语

> ID：14364626
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:25.447
> 
> 标签：php, search, youtube-api, feed

我正在使用 YouTube PHP API 来检索搜索确切术语“超级碗广告”的提要。

但是，有时我会在提要中看到不相关的视频。

$searchTerms 存储搜索查询。

```
$searchTerms2 = str_replace(" ","+",$searchTerms);
$searchTerms2 = '"' . $searchTerms2 . '"';

$query->setVideoQuery($searchTerms2); 
```

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:08:26.373

来自参考：`To search for an exact phrase, enclose the phrase in quotation marks. For example, to search for videos matching the phrase "spy plane", set the q parameter to %22spy+plane%22.`

所以你`urlencode`你的引号？

# c - 鼠标点击改变图片

> ID：14364627
> 
> 赞同：3
> 
> 时间：2013-01-16T17:52:28.190
> 
> 标签：c, gtk, gtk2

我已经能够做到以下几点：

```
 for (int i = 0; i < NUM_LEDS; ++i) {
    ledoff = gtk_image_new_from_file("./ledoff.png");
      leds[i].pos=ledpos[i];
      gtk_layout_put(GTK_LAYOUT(layout), ledoff, leds[i].pos.x, leds[i].pos.y);
      leds[i].status=OFF;
  } 
```

基本上，这会将一堆“ledoff”图像加载到某个窗口上。

我需要的是每次单击时将图像`ledoff`更改为, 。一开始我以为这只是加载一个新图像并替换以前的图像，但由于这将完成数千次，我认为我每次都在“malloc'ing”一个新文件！这是真的？还是我只是替换文件而不添加新文件？`ledon``leds[i].pos.x``leds[i].pos.y``gtk_image_new_from_file`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:39:23.083

这是一个工作示例，它在窗口中创建一个 50x50“LED”阵列，并允许您通过单击它们来切换它们的状态。它并不是那么有效，正如我在评论中指出的那样，您最好自己将图像直接绘制到 GtkLayout 上，但这至少可以作为概念证明。

**编辑：**我已经更新了示例代码，以考虑[liberforce 的建议](https://stackoverflow.com/questions/14364627/gtk2-changing-image-on-mouse-click-in-c/14367406#comment19993554_14367406)，这使事情变得更清洁，内存效率更高。

```
#include <gtk/gtk.h>

#define ICON_WIDTH 16
#define ICON_HEIGHT 16
#define NUM_LEDS 2500

typedef enum {
    ON,
    OFF
} led_status;

typedef struct {
    GtkWidget *img;
    struct {
        gint x;
        gint y;
    } pos;
    led_status status;
} led;

static led leds[NUM_LEDS];
static GdkPixbuf *led_on;
static GdkPixbuf *led_off;

static gboolean click_handler(GtkWidget *widget,
                              GdkEvent *event,
                              gpointer user_data)
{
    led *info = user_data;

    if (info->status == ON) {
        gtk_image_set_from_pixbuf(GTK_IMAGE(info->img), led_off);
        info->status = OFF;
    } else {
        gtk_image_set_from_pixbuf(GTK_IMAGE(info->img), led_on);
        info->status = ON;
    }

    return TRUE;
}

int main(int argc, char** argv)
{
    GtkWidget *window, *layout;
    int i = 0, x, y;

    gtk_init(&argc, &argv);

    /* Load our images (ignoring errors - as any good sample code would) */
    led_on  = gdk_pixbuf_new_from_file("led-on.png", NULL);
    led_off = gdk_pixbuf_new_from_file("led-off.png", NULL);

    /* Initialize our array */
    for (x = 0; x < 50; x++) {
        for (y = 0; y < 50; y++) {
            leds[i].img = gtk_image_new();
            leds[i].pos.x = x * ICON_WIDTH;
            leds[i].pos.y = y * ICON_HEIGHT;
            leds[i].status = OFF;

            /* Initialize our image from the pixbuf we've already loaded */
            gtk_image_set_from_pixbuf(GTK_IMAGE(leds[i].img), led_off);
            i++;
        }
    }

    /* Create a window */
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title(GTK_WINDOW(window), "LEDs");
    gtk_signal_connect(GTK_OBJECT(window),
                       "destroy",
                       G_CALLBACK(gtk_main_quit),
                       NULL);

    /* Create the widget */
    layout = gtk_layout_new(NULL, NULL);

    for (i = 0; i < NUM_LEDS; i++) {
        /*
         * A GtkImage doesn't have a window, so we need to put it inside
         * a GtkEventBox so we can capture events.
         */
        GtkWidget *eb = gtk_event_box_new();
        g_signal_connect(G_OBJECT(eb),
                         "button_press_event",
                         G_CALLBACK(click_handler),
                         &leds[i]);
        gtk_container_add(GTK_CONTAINER(eb), leds[i].img);
        gtk_layout_put(GTK_LAYOUT(layout), eb, leds[i].pos.x, leds[i].pos.y);
    }

    gtk_container_add(GTK_CONTAINER(window), layout);
    gtk_widget_show_all(window);

    gtk_main();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:40:30.683

一种解决方案是`GtkImage`为每个有 LED 的位置创建一个。不要使用`gtk_image_new_from_file`，因为它每次都会加载图像文件。反而：

*   调用`gdk_pixbuf_new_from_file`您的 2 个图像文件中的每一个
*   调用`gtk_image_new`以创建每个图像小部件，并立即使用正确的像素缓冲区初始化它们 `gtk_image_set_from_pixbuf`
*   当需要更改显示的图像时，只需获取之前创建的对应`GtkImage`，并更改显示的图像`gtk_image_set_from_pixbuf`

这确保了低内存消耗：您只分配了 2 个像素缓冲区（并从 GtkImage 实例中计数），并且您只为每个 LED 创建一个 GtkImage（而不是在每次更改显示的图像时销毁/创建一个）。

**编辑：**这是对 Sean Bright 提交的改进，其中我修复了一些错误。

```
#include <gtk/gtk.h>

#define MAX_LEDS_PER_LINE 50
#define NUM_LEDS 2500

static GdkPixbuf * led_on;
static GdkPixbuf * led_off;

static gboolean click_handler(GtkWidget *widget,
        GdkEvent *event,
        gpointer user_data)
{
    gboolean *is_led_on = user_data;
    GList * children = gtk_container_get_children (GTK_CONTAINER (widget));

    *is_led_on = ! *is_led_on; /* invert led state */
    gtk_image_set_from_pixbuf (GTK_IMAGE(children->data), (*is_led_on) ? led_on : led_off);
    g_list_free (children);
    return TRUE; /* stop event propagation */
}

int main(int argc, char** argv)
{
    GtkWidget *window, *table;
    gboolean leds[NUM_LEDS];
    int i = 0;

    gtk_init(&argc, &argv);

    /* Create a window */
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title(GTK_WINDOW(window), "LEDs");
    gtk_signal_connect(GTK_OBJECT(window),
            "destroy",
            G_CALLBACK(gtk_main_quit),
            NULL);

    /* Load leds on/off images */
    led_on = gdk_pixbuf_new_from_file ("on.png", NULL);
    led_off = gdk_pixbuf_new_from_file ("off.png", NULL);

    /* Create the container */
    int n_rows = (NUM_LEDS / MAX_LEDS_PER_LINE) + 1;
    int n_cols = (NUM_LEDS / MAX_LEDS_PER_LINE) + 1;
    table = gtk_table_new (n_rows, n_cols, FALSE);

    /* Create the leds */
    for (i = 0; i < NUM_LEDS; i++)
    {
        leds[i] = FALSE; /* FALSE means OFF, TRUE means ON */

        /*
         * A GtkImage doesn't have a window, so we need to put it inside
         * a GtkEventBox so we can capture events.
         */
        GtkWidget *image = gtk_image_new ();
        gtk_image_set_from_pixbuf (GTK_IMAGE(image), led_off);
        GtkWidget *eb = gtk_event_box_new();
        g_signal_connect(G_OBJECT(eb),
                "button-press-event",
                G_CALLBACK(click_handler),
                &leds[i]);
        gtk_container_add(GTK_CONTAINER(eb), image);
        int row = i / MAX_LEDS_PER_LINE;
        int col = i % MAX_LEDS_PER_LINE;
        gtk_table_attach (GTK_TABLE(table),
                eb,
                row, row + 1,
                col, col + 1,
                0,
                0,
                0,
                0);
    }

    gtk_container_add(GTK_CONTAINER(window), table);
    gtk_widget_show_all(window);

    gtk_main();

    return 0;
} 
```

在这里，我实现了我的第一句话，并改进了一些事情：

*   我修复了`click_handler`回调的签名
*   我修复了`click_handler`回调的返回值
*   我删除了结构，因为我们只需要一个布尔值来了解 LED 状态。它甚至可以是存储在 GtkImage 中的一个属性，但将后端逻辑与用户界面分开通常是个好主意。
*   我使用 GtkTable 而不是 GtkLayout，因为我认为不需要像素精确地放置 LED。不过，在 GTK 3 中，GtkTable 被 GtkGrid 取代。然而，GtkTable 在使用 gtk_table_add_defaults 时遇到了困难，因为调整窗口大小会导致重新计算 2500 个小部件的大小，所以我只使用了最简单的大小计算选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:04:13.283

我不确定这一点，但您应该将 2 张图像放在屏幕上的相同位置，然后显示您需要的一张并隐藏您不需要的一张。我不知道这是否是一个好方法，但我很确定你没有使用这种方式分配东西。

```
gtk_widget_hide(your_image2);
gtk_widget_show(your_image1); 
```

希望能帮助到你。

问候，

# ios - For 循环中的 ObjC/ARC ByRef

> ID：14364629
> 
> 赞同：1
> 
> 时间：2013-01-16T17:52:36.910
> 
> 标签：ios, objective-c, ios6, automatic-ref-counting, pass-by-reference

我有一个 for 循环，然后将迭代对象传递给带有 byref 参数的方法并得到以下错误：

```
Implicit conversion of an Objective-C pointer to 'FOO *__autoreleasing *' is disallowed with ARC 
```

和警告：

```
Incompatible pointer types sending 'Foo *const __strong' to parameter of type 'Foo *__autoreleasing *' 
```

循环：

```
for (Foo *obj in objArray) {
    FooTableCell *newCell = [self createFooCellWithItem:obj];
} 
```

方法签名：

```
-(FooTableCell *)createFooCellWithItem:(Foo **)newObj; 
```

我已按照[此 SO q&a](https://stackoverflow.com/questions/8814718/handling-pointer-to-pointer-ownership-issues-in-arc/8829294#8829294)中的建议进行操作，但无济于事。

**编辑**

在 obj 之前添加 & 会给我以下错误：

```
Sending 'Foo *const __strong *' to parameter of type 'Foo *__autoreleasing *' changes retain/release properties of pointer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:57:41.410

作为聊天中讨论和发现的简历，这里有几个注意事项。

您似乎正在尝试：

1.  快速迭代数组；尽管

2.  替换从循环内部调用的方法中的每个数组元素；

编译器不允许这样做。它至少会打破关于不修改枚举中的数组的快速枚举合同。

因此，我的建议是在您的方法中明确指定一个外参数`shouldAddObject`，例如：

```
NSMutableArray *newArray = [[NSMutableArray alloc] initWithCapacity:[objArray count]]; 
for (Foo *obj in objArray) {
    Foo* newObject = nil;
    RETYPE* ret = [self shouldAddObject:obj newObject:&newObject]; 
    [newArray addObject:newObject];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:02:14.067

如果我记得数组都是指针的集合，那么您可能已经这样做了，在这种情况下，您只需要更改您的`shouldAddObject`：

```
 -(void)shouldAddObject:(Foo *)newObj {
      // Do your thing
 } 
```

或使用标志关闭该文件的 ARC `-fno-objc-arc`。

但是，如果不是这种情况，您可以使用 ARC 执行此操作：

```
 - (void)swapObjCPointers:(id*)ptrA with:(id*)ptrB {

     // Puts pointer B into pointer A
     id this = *ptrB;
     *ptrB = *ptrA;
     *ptrA = this;

 } 
```

例子：

```
@implementation MyARCFile

 - (void)swapObjCPointers:(id*)ptrA with:(id*)ptrB {

     // Puts pointer B into pointer A
     id this = *ptrB;
     *ptrB = *ptrA;
     *ptrA = this;

 }

- (void)example {

     id objA = [NSObject new];
     id objB = @"String";

     NSLog(@"\n"
           @"a: %p\n"
           @"b: %p\n",
           objA,
           objB);

     [self swapObjCPointers:&objA with:&objB];

     NSLog(@"\n"
           @"a: %p\n"
           @"b: %p\n",
           objA,
           objB);
 }

 @end 
```

有什么帮助吗？

# android - 使用 BroadcastReceiver 更新活动的 Activity UI

> ID：14364632
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:47.727
> 
> 标签：android, android-intent, android-broadcast

我使用以下[示例实现了重复警报](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)

但是，一旦警报“响起”/收到，我想`ListView`在活动活动中更新我的。我只有一个带有`ListView`.

收到警报后，如何在主活动类中执行更新 UI 方法？您如何`onReceive()`在`AlarmReceiver`( `extends BroadcastReceiver`) 类中调用它

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T18:11:12.430

最简单的方法是让您的 AlarmReceiver 成为您活动的内部类。这样，它将可以访问您活动的所有字段和方法。如果您不在其他任何地方使用它，它也可能是匿名的。要使其仅在活动时更新您的活动，请在 中注册您的接收器`onResume()`并在 中取消注册`onPause()`。请注意您将响应的`IntentFilter`指定意图操作。`BroadcastReceiver`

例子：

```
private BroadcastReceiver updateReceiver;

//...

@Override
protected void onResume() {
    super.onResume();

    updateReceiver=new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            //your list update code here
        }
    };
    IntentFilter updateIntentFilter=new IntentFilter("update");
    registerReceiver(updateReceiver, updateIntentFilter);
}

@Override
protected void onPause() {
    super.onPause();

    if (this.updateReceiver!=null)
        unregisterReceiver(updateReceiver);
} 
```

如果您仍然希望您的 AlarmReceiver 是一个单独的类，请在初始化期间将某种回调传递给它：

```
public interface AlarmReceiverCallback {
    public void onAlarmReceived(Intent intent);
}

//in your AlarmReceiver class:
private AlarmReceiverCallback callback;

public AlarmReceiver(AlarmReceiverCallback callback) {
    this.callback=callback;
}

@Override
public void onReceive(Context context, Intent intent) {
    callback.onAlarmReceived(intent);
} 
```

您的初始化`AlarmReceiver`将如下所示：

```
updateReceiver=new AlarmReceiver(new AlarmReceiverCallback() {
    @Override
    public void onAlarmReceived(Intent intent) {
        //your list update code here
    }     
}); 
```

# fortran - 如何从我的 fortran 子例程中使用的模块打印数据

> ID：14364634
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:47.363
> 
> 标签：fortran

提前感谢您的帮助.. 我想在 FORTRAN 主程序的输出文件中打印数据，这些数据在模块中定义，我已经在主程序中声明使用该模块。但是我在主程序和模块中都无法获得写语句。

```
MODULE model 
IMPLICIT NONE
 SUBROUTINE model_initialize 
 IMPLICIT NONE
 INTEGER a,dim REAL(float) :: E,nu 
 REAL(float) :: lambda,mu 
 E=5000 lambda = E*nu/(1.d0+nu)/(1.d0-2.d0*nu) 
 mu = E/2.d0/(1.d0+nu) 
 RETURN 
 END SUBROUTINE model_initialize 
 Write (6,)'Lambda',lambda 
 Write (6,)'mu',mu 
 END MODULE model 
 SUBROUTINE XXXX 
 USE model 
 IMPLICIT NONE 
 CALL model_initialize 
 Write (6,)'Lambda',lambda 
 Write (6,)'mu',mu 
 END SUBROUTINE XXX 
```

当我将写语句放在模块或主子程序中时，我无法在输出中看到它们。

非常感谢Msekh的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:40:23.080

Mgilson 已经为您提供了一个应该可以工作的示例，但是您发布的代码将无法编译。这就是为什么：

*   您的子程序`model_initialize`位于模块的“规范部分”中。它应该是外部的（如`xxxx`）或模块内部的（在这种情况下，您必须提供`contains`声明）。
*   中的变量`model_initialize`是子程序的本地变量，在子程序之外无法访问。
*   您不能`write`在模块的规范部分中有可执行代码（如 ），只能在内部过程中。
*   `float`不是原生的 Fortran 类型，您必须使用数字参数（通常为 4、8、16），定义您自己的，或使用`iso_fortran_env`模块中的定义。

也就是说，如果您只需要定义一些要使其可访问的数据，您可以简单地将其直接放入模块中，如下所示：

```
module model
  use iso_fortran_env 
  implicit none

  integer :: A, dim 
  real(real32) :: E, nu, lambda, mu

  E = 5000
  lambda = E*nu/(1.d0+nu)/(1.d0-2.d0*nu)   ! <-- nu is undefined
  mu = E/2.d0/(1.d0+nu)

contains

  subroutine xxxx 
    write (6,*) 'lambda', lambda 
    write (6,*) 'mu', mu 
  end subroutine xxxx
end module model 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:30:54.100

你的意思是这样的：

```
module material
  real :: stress = 6.0
  save
end module material

subroutine xxx()
  use material, only: stress
  write(6,*) stress
end subroutine

program main
call xxx()
end program main 
```

这会将压力值写入与单元 6 连接的类文件对象（通常这是标准输出，但它可能会`fort.6`根据编译器和环境设置创建一个名为的新文件）。

# jquery - 使用 jQuery 摆脱 html

> ID：14364635
> 
> 赞同：0
> 
> 时间：2013-01-16T17:52:50.663
> 
> 标签：jquery, html

我想知道如何制作以下内容。

假设我有 4 个（或更多）问题。每个问题都有 1 个或多个子问题和一个复选框。html会是这样的

```
<div class="question>
    <p>What kind of fruit do you like?</p>
    <div class="subquestions">
        <p>I like bananas</p><input checkbox>
        <p>I like apples</p><input checkbox>
        <p>I like strawberrys</p><input checkbox>
    </div>
</div>

<div class="question>
    <p>What kind of class do you like?</p>
    <div class="subquestions">
        <p>I like math</p><input checkbox>
        <p>I like biology</p><input checkbox>
    </div>
</div>

<div class="question>
    <p>What kind of sport do you like?</p>
    <div class="subquestions">
        <p>I like football</p><input checkbox>
        <p>I like cricket</p><input checkbox>
        <p>I like tennis</p><input checkbox>
        <p>I like basketball</p><input checkbox>
    </div>
</div>

<div class="question>
    <p>What kind of games do you like?</p>
    <div class="subquestions">
        <p>I like call of duty</p><input checkbox>
        <p>I like battlefield 3</p><input checkbox>
    </div>
</div> 
```

如您所见，html 重复了 4 次，只有问题和子问题发生了变化，所以我想知道是否有办法使用 jQuery 来摆脱 html。

```
<div class="question>
    <p><question_text></p>
    <div class="subquestions">
        <p><subquestion_text></p><input checkbox>
    </div>
</div> 
```

我在想也许我可以制作一个函数，在其中我有这个 html 标记，然后使用变量来放入数据。但是我仍然在学习很多关于 jQuery 的知识，所以我无法自己弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:27:02.140

我在工作中遇到了类似的问题。我通过将问题和答案放入存储在数据库中的 JSON 格式来解决它，如下所示：

```
QuestionTable
=====================================
QuestionID  QuestionField   JSONField 
```

JSON 包含所有默认属性。在您的情况下，您的第一个问题将被格式化（它有点长，但我希望它能传达这个想法）：

```
var objToStringify = {
    "question": "What kind of fruit do you like?",
    "answers": [
        {
            "label": "I like bananas",
            "type": "input",
            "attributes": {
                "type": "checkbox",
                "value": "bananas"
            }
        },
        {
            "label": "I like apples",
            "type": "input",
            "attributes": {
                "type": "checkbox",
                "value": "apples"
            }
        },
        {
            "label": "I like strawberries",
            "type": "input",
            "attributes": {
                "type": "checkbox",
                "value": "strawberries"
            }
        },
    ]
} 
```

然后构建问题的 jQuery 如下所示：

```
var addQuestion = function addQuestion(parsedJSON) {
    var div = $('<div />'),
        p = $('<p />'),
        label = $('<label />'),
        q = div.clone().addClass('question'),
        a = div.clone().addClass('subquestions'),
        ans = {},
        i = 0;
    q.append(p.clone().text(parsedJSON.question));
    if (parsedJSON.answers) {
        for (i = 0; i < parsedJSON.answers; i += 1) {
            ans = parsedJSON.answers[i];
            a.append(
                p.clone().append(
                    label.clone().text(ans.label)
                ).append(
                    $(document.createElement(ans.type)).attr(ans.attributes)
                )
            );
        }
    }
    q.append(a);
    $('#someDOMElement').append(q);
}; 
```

这是模板的一种方法，还有其他方法。事实上，有一些库可以处理这个问题（例如，[Moustache.js](http://mustache.github.com/)）。

此外，如果您的用户禁用了 JavaScript，他们将无法参加您的调查/测验。我可以摆脱我所做的事情，因为它部署在企业环境中，由于组策略，用户无法禁用 JavaScript。如果您没有遇到类似情况，您可能需要考虑使用服务器端语言来生成 HTML。PHP 和 ASP.Net 在这方面都表现出色（我相信其他人也一样，但这是我有经验的两个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:03:20.627

您可以像这样为问题和子问题定义一个虚拟对象（更像是“答案”？）

```
var questionDummy = '<div class="question">'
                  + '<p>[question]</p>'
                  + '<div class="subquestions">[subquestions]</div>'
                  + '</div>',
    subquestionDummy = '<p>[label]</p><input checkbox>'; 
```

下一步是使用这些假人。出于性能原因，我们将首先准备它们并一次性输出它们。假设您有包含您的问题和所有内容的数组（可以从代码中看到结构——这只是一个示例）：

```
var questions = new Array(yourQuestions.length);
for (var i = 0; i < questions.length; i++) {
    var subquestions = new Array(yourQuestions[i].subquestions.length);
    for (var j = 0; j < subquestions.length; j++) {
        subquestions[j] = subquestionDummy.replace('[label]', yourQuestions[i].subquestions[j].label);
    }

    questions[i] = questionDummy
        .replace('[question]', yourQuestions[i].question)
        .replace('[subquestions]', subquestions.join(''));
} 
```

现在你可以输出它了。如果你想使用 jQuery（只有在你使用它的情况下才有意义——否则使用纯 JavaScript；仅出于这个原因不需要加载这么大的库！），这是一种方法：

```
$('#someDivThatWrapsAllQuestions').html(questions.join('')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:26:55.777

可以使用 jQuery 或 JavaScript 来做到这一点。但是，如果您决定使用 jQuery 或 JavaScript 来执行此操作，请弄清楚您节省了多少时间，而不是它会在前端“花费”您的一切：将处理负担放在用户各自的客户端和机器上，其中一些可能动力不足；确保您的代码可供移动设备使用；保持 jQuery 更新，以便它在三年后继续工作；确保它在所有浏览器中显示相同......并且甚至不会触及可访问性问题。

哪个将是您最明智的整体解决方案？对我来说，这似乎并不是真正的节省，只是为了玩代码玩具而过度设计。但我可能不了解您项目的所有参数。（有时，玩代码玩具就足够了，特别是如果它是为了爱好而不是客户服务网站或项目:)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:02:36.580

这是非常糟糕的做法，因为如果客户端禁用了 JavaScript，代码将无法呈现。

[相反，使用PHP](http://php.net)等后端语言进行研究

# c# - ASP.NET MVC - 在不编写 DOM 代码的情况下将 DropDownLists 刷新到 ViewModel

> ID：14364636
> 
> 赞同：1
> 
> 时间：2013-01-16T17:52:56.523
> 
> 标签：c#, asp.net-mvc-3, jquery, asp.net-ajax

我的应用程序中有一个 ViewModel，如下所示：

```
public class ItemViewModel {
    public string Name { get; set; }

    public string SelectedType { get; set; }
    public IEnumerable<Type> Types { get; set; }

    public string SelectedSubtype { get; set; }
    public IEnumerable<Subtype> Subtypes { get; set; }
} 
```

我创建了一个视图来公开这些属性：

```
@Html.TextBoxFor(m => m.Name)

@Html.DropDownListFor(m => m.SelectedType,
    new SelectList(Model.Types, "ID", "Description"),
    "Select a type")

@Html.DropDownListFor(m => m.SelectedSubtype,
    new SelectList(Model.Subtypes, "ID", "Description"),
    "Select a subtype") 
```

好吧，当我想刷新我的子类型下拉列表时，我必须编写大量 DOM 代码来生成新选项。

```
$('#SelectedType').change(function() {
    $.get('/json/GetSubtypesFromType', { 'type': $(this).val() }, function(result) {

        var options = '';
        for (var count = 0; count < result.length; count++) {
            options += "<option value='" + result[count].ID + "'>" + result[count].Description + "</option>";
        }

        $('#SelectedSubtype').html(options);
    });
}); 
```

有没有办法将新选项绑定到可枚举的子类型，`ViewModel`而不是编写此代码以生成选项。我需要在发布表单时检索新的可枚举，但我想将新值绑定到`ViewModel`集合中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:15:07.853

**观察：**您正在使用 AJAX 获取值，并希望将新值添加到您的 DropDownList 助手中。

**建议1：** *创建一个自定义的Ajax Drop Down List Helper。*

[在http://www.codeproject.com/Articles/421640/Creating-a-custom-AJAX-Helper](http://www.codeproject.com/Articles/421640/Creating-a-custom-AJAX-Helper)上阅读这篇文章

另一个很好的参考[如何使@Ajax.DropDownList 等效？](https://stackoverflow.com/questions/7206066/how-to-make-the-equivalent-of-ajax-dropdownlist)

特别有价值的参考 [http://www.mikeyd.com.au/2009/08/22/dynamically-populate-a-selectdrop-down-list-using-aspnet-mvc-jquery-and-json/](http://www.mikeyd.com.au/2009/08/22/dynamically-populate-a-selectdrop-down-list-using-aspnet-mvc-jquery-and-json/)

**建议 2：** *使用部分操作来创建您的下拉列表* 执行为`@Html.Action("{Action}", {Controller}", new { id = {param})`

或者从 jquery as`$('#dropdowndiv').load('/{Controller}/{Action}')`开始，action partials 首先调用一个 action 方法，然后渲染一个局部视图。这非常适合您想要动态创建选择*列表*的情况

# ruby-on-rails - Ruby on rails 验证

> ID：14364637
> 
> 赞同：0
> 
> 时间：2013-01-16T17:53:12.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想出了一种方法来进行验证。我发现在模型内部，我需要添加这些行

`validates_presence_of :name` `validates_uniqueness_of :name`

**例如，我想要实现**的是，我不希望用户`:;!@#$%^&*()`在我的文本输入中添加 [或特殊字符]。需要对此进行一些输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T17:58:30.057

您可以使用[format_of](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_format_of)：

```
validates_format_of :name, :with => /\A[a-zA-Z]+([a-zA-Z]|\d)*\Z/ 
```

或创建您自己的验证：

```
validates :name,
   :presence   => true,
   :format     => { :with => regex } # Here you can set a 'regex' 
```

# youtube - 是否有另一种方法可以在 youtube api 中获取视频标签/关键字

> ID：14364642
> 
> 赞同：1
> 
> 时间：2013-01-16T17:53:24.397
> 
> 标签：youtube, youtube-api

基于[http://youtubecreator.blogspot.com/2012/08/tags-removed-from-video-watch-pages.html](http://youtubecreator.blogspot.com/2012/08/tags-removed-from-video-watch-pages.html)，youtube 在 youtube api 中也将 media:keywords 元素设为空。

但是，对于我的应用程序来说，扫描标签/关键字很重要。我是否有替代解决方案来获取视频的标签/关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:23:38.600

此博客文章提供了与开发人员相关的信息：http: [//apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

如果您被认证为视频的所有者，则可以获取标签。否则，不，目前不可能。

# jquery - create.js.erb 在浏览器上显示其代码而不是执行代码

> ID：14364643
> 
> 赞同：0
> 
> 时间：2013-01-16T17:53:28.567
> 
> 标签：jquery, ruby-on-rails, ruby, ajax

我正在使用 ruby​​ 1.8.7 和 rails 2.3.11。我有一个简单的表单，我想在 create.js.erb 中添加一些 ajax：

```
alert('call from ajax'); 
```

在我的控制器中，我更改了创建操作：

```
def create
  @weburl = Weburl.new(params[:weburl])

  respond_to do |format|
    if @weburl.save
      format.js
      format.html { redirect_to(@weburl, :notice => 'Weburl was successfully created.') }
    else
      format.html { render :action => "new" }
      format.xml  { render :xml => @weburl.errors, :status => :unprocessable_entity }
    end
  end
end 
```

我的表格部分

```
<% form_remote_for(weburl) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :url %><br />
    <%= f.text_field :url %>
  </p>
  <p>
   <%= f.submit 'Save' %>
  </p>
<% end %> 
```

我的 new.html.erb 文件是

```
<h1>New weburl</h1>
<%= render :partial => 'form', :locals=>{:weburl=>@weburl}%>
<%= link_to 'Back', weburls_path %> 
```

当我提交表单时，它会显示在浏览器上：

```
alert('call from ajax'); 
```

而不是 javascript 弹出警报消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:46:05.930

请提供更多代码。问题是，您的 javascript 代码没有在客户端执行。如果可能，将响应放入 eval() 中。看看这个[w3schools 教程](http://www.w3schools.com/jsref/jsref_eval.asp)：

# android - AIR for Android 检查互联网连接问题 (actionscript 3)

> ID：14364647
> 
> 赞同：4
> 
> 时间：2013-01-16T17:53:36.987
> 
> 标签：android, flash, actionscript, air

我正在为我的学校开发一个简单的应用程序，它将向您展示网站上的最新更新，但在 AIR 中检查互联网连接似乎有点问题。

我会更具体：

*   我正在使用 Adob​​e Flash CS6 开发应用程序（使用 AIR for android）

*   该应用程序包含一个菜单和“互联网框架”，其中的代码实际上不起作用。

*   我已经尝试了几件事：URLMonitor(like is available = true)、URLLoader(如果在没有互联网连接时发生 IOError) 和 HTMLLoader 之类的东西(很久以前:P，没有成功)

*   URLLoader 工作“正常”，但我还需要知道当有活动的互联网连接时网页是否不可用（404），但在这两种情况下，它只会抛出相同的“流错误”，所以我可以区分它们。这就是为什么它不适合我的需求。

*   URLMonitor 也可以“正常”工作，但问题来了：

在模拟器上测试应用程序时，它可以毫无问题地检测到没有互联网连接。但是，当导出到 .apk 并在我的 android 设备上运行时，它无法成功检测到互联网连接。

这是我的代码：

```
var monitor:URLMonitor = new URLMonitor(new URLRequest("http://www.google.nl"));
monitor.addEventListener(StatusEvent.STATUS, netConnectivity);
monitor.start();

function netConnectivity(e:StatusEvent):void 
{
    if(e.target.available)
    {
      //checking the content
      output_txt.text += "\ninternet available";
      loader = new URLLoader(new URLRequest(webURL));
      loader.addEventListener(IOErrorEvent.IO_ERROR, onIOErrorLoader);
      loader.addEventListener(Event.COMPLETE, onCompleteLoader);
    }
    else
    {
      //
      //
      //     NO INTERNET CONNECTION AVAILABLE!
      //
      //
      output_txt.text += "\nno internet available";
      popupnoconnection_mc.alpha = 100;
      popupnoconnection_mc.play();
      popupnoconnection_mc.addEventListener(MouseEvent.MOUSE_DOWN, BackToMenu);
    }
    monitor.stop();
} 
```

如您所见，它向 URLMonitor 添加了一个 EventListener，开始检查，该函数检查 Internet 连接的可用性。适用于模拟器，不适用于我的设备。

**更有趣的是：** 在我的设备上起作用的是互联网连接时。它只会在我的输出字段中显示文本，但在没有互联网连接时不会！此外，在设置了互联网连接的情况下启动应用程序，然后进入此框架，然后返回主菜单，然后关闭互联网，然后再次进入此框架，此代码突然运行良好！

所以它必须与 URLMonitor 的创建有关，并且我猜想在同一帧检查连接，但我需要一点帮助！

**我认为这不会太难！**

非常感谢您！（抱歉有错别字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T06:58:50.610

您可以使用[NetworkInfo](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetworkInfo.html)来检测是否有互联网连接 - 它适用于 Android。

# c++ - 声明模板时指向成员函数语法的指针

> ID：14364653
> 
> 赞同：1
> 
> 时间：2013-01-16T17:53:48.020
> 
> 标签：c++, templates, member-function-pointers

这就是我试图实现的目标：

```
class MyClass
{
    public:
    template<typename T>
    void whenEntering( const std::string& strState, 
                       T& t, 
                       void T::(*pMemberFunction)(void)) /// compilation fails here
    {
        t.(*pMemberFunction)(); // this line is only an example
    }
} 
```

*它是一种回调系统，用于对我收到的某些事件做出反应。*

但是 Visual 2010 给了我以下编译错误：

```
 error C2589: '(' : illegal token on right side of '::' 
```

我可能对指向成员的语法有误...但我也担心我可能不会以这种方式定义模板...您有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:56:47.363

你要`void (T::*pMemberFunction)(void)`

另一个问题可能只是您的示例用法中的拼写错误，但调用成员函数`.*`用作单个运算符；你不能`(`在它们之间有一个中间，甚至是空白。我猜这是一个错字，因为它几乎是处理指向成员运算符的奇怪运算符优先级的正确方法：

```
(t.*pMemberFunction)(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:58:18.513

您的代码中有几个问题。特别是，声明指向成员函数的指针的语法是`void (T::* pMemberFunction)(void)`：

总的来说，你的代码应该是这样的：

```
class MyClass
{
    public:
    template<typename T>
    void whenEntering( const std::string& strState,
                       T& t,
                       void (T::* pMemberFunction)(void)
                               ) /// this fails
    {
        t.*pMemberFunction(); // this line is only an example
    }
}; 
```

# php - 用户可以操纵 cookie 吗？

> ID：14364654
> 
> 赞同：7
> 
> 时间：2013-01-16T17:53:50.730
> 
> 标签：php, cookies

我有一个关于将 cookie 用于标准登录目的的问题。假设我的 php 脚本在他每次登录时都会将 cookie 保存到用户计算机中。cookie 值是他在网站上的用户名后面的“Mike”。该用户能否以某种方式在其浏览器中操纵该 cookie 以将值更改为“管理员”，如此突然他可以访问网站的管理权限？

如果发生这种情况如何解决这样的安全风险？

--

另外...如果有人要从我的浏览器中复制 cookie，他会盯着我的电脑屏幕并将 cookie 和值复制到他的计算机中，或者这样的入侵者可以通过 JavaScript 从我的浏览器中窃取 cookie。

这是怎么照顾的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T17:57:33.983

是的，这是一个安全问题，它延伸到客户提供的任何信息。

Cookies 存储在用户的机器上。它们可以以任何方式进行修改。事实上，cookie 可以即时创建并通过多个实用程序发送以发出 HTTP 请求。这甚至不是浏览器的问题。

永远不要相信来自客户端的任何数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T17:55:44.367

是的，如果 cookie 存储在他们的计算机上，用户可以对其进行操作。使用[会话](http://php.net/manual/en/book.session.php)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-11T03:11:41.410

“会话”是连接相关信息的服务器端存储，通过来回传递的变量链接到用户，通常是 cookie，但是从逻辑上讲，如果您的客户端和服务器都可以处理，任何地方都可以处理它。

此“会话”通常由客户端和服务器都知道的整数表示。

问题是，如果另一个客户端在服务器上打开了一个会话，我们（作为客户端）可以通过用随机 id 替换我们给定的 id 直到找到一个来“劫持”这个会话。服务器现在会相信我们实际上是另一个用途，并且可以让我们访问他们的私人信息。

因此，我们有“钥匙”。密钥是唯一的，通常是字母数字的代码，在与服务器的每个请求-响应对上都会更改，以确保只有拥有最新密钥的人才能获得访问权限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T17:56:03.357

**是的**

他们可以操纵、编辑、修改、创建和删除 cookie。

您应该只存储您在服务器上使用的散列密钥，以便在数据库中查找任何应该安全的内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T17:56:04.267

是的，用户可以操纵 cookie。处理它的最佳方法是不要以这样的方式存储用户凭据，即他们可以通过更改用户名来获得管理员访问权限。

如何做到这一点的细节非常深入，但一个好的开始是只存储用户的会话标识符。这有其自身的问题，但不会让人们如此轻易地破坏事物。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T11:19:17.620

是的，用户只需转到所有流行浏览器提供的烹饪选项即可轻松操作 cookie

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T17:58:08.443

Cookies 是客户端的，这意味着它们可以被客户端读取、写入和删除。cookie 管理器插件可以更轻松地更改 cookie 值。

> [http://www.ehow.com/how_7149468_edit-cookies-computer.html](http://www.ehow.com/how_7149468_edit-cookies-computer.html)

# java - 比较哈希图数据

> ID：14364655
> 
> 赞同：0
> 
> 时间：2013-01-16T17:53:51.183
> 
> 标签：java, hashmap

我想知道是否可以将多个 hashMaps 中的项目相互比较：

```
HashMap<String,String> valueMap = new HashMap<String, String>();
HashMap<String,Integer> formulaMap = new HashMap<String, Integer>(); 
```

我基本上想做的是：

```
if(the second string in valueMap is the same as the first string in formulaMap){
} 
```

有没有一种简单的方法来实现这一点，或者我必须在将字符串包含到 hashMaps 之前比较它们。在程序的这个阶段，我的 Integer 需要取一个**空**值。我可以使用多维数组来实现我的目标，但这样的解决方案会更优雅且耗时更少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:03:57.233

通过使用 a`LinkedHashMap`您可以拥有一个尊重不同值的插入顺序的地图。您所要做的就是遍历`entrySet`地图，直到到达您要查找的位置。

另外：如果您还需要订购，您可以查看`TreeMap`根据您定义的标准按顺序插入元素的内容（您可以将 a`Comparator`作为地图的参数传递）。

此顺序将适用于映射的键，因此如果您需要值排序，您将不得不提出一个更复杂的解决方案（如直接对条目集进行排序并将值添加到另一个映射中，例如例子）。

# command-line - 在 Tesseract 中禁用字典

> ID：14364662
> 
> 赞同：5
> 
> 时间：2013-01-16T17:54:06.347
> 
> 标签：command-line, tesseract

运行 Tesseract for English 时如何禁用字典更正？

我目前正在将 tesseract 作为子进程运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T20:55:00.607

尝试将这些变量（将它们放在配置文件中）设置为 false：

```
load_system_dawg 
load_freq_dawg
load_punc_dawg
load_number_dawg
load_unambig_dawg
load_bigram_dawg
load_fixed_length_dawgs 
```

[https://groups.google.com/forum/?fromgroups=#!searchin/tesseract-ocr/Disable$20dictionary$20​​in$20Tesseract/tesseract-ocr/5nvIo1DJxHE/f3gBi2pTKykJ](https://groups.google.com/forum/?fromgroups=#!searchin/tesseract-ocr/Disable$20dictionary$20in$20Tesseract/tesseract-ocr/5nvIo1DJxHE/f3gBi2pTKykJ)

另请阅读[如何增加对字典的信任/强度？](https://github.com/tesseract-ocr/tesseract/wiki/FAQ#how-to-increase-the-trust-instrength-of-the-dictionary)在常见问题解答中。从中：

> 对于 tesseract-ocr < 3.01，尝试将 dict/permute.cpp 中的 NON_WERD 和 GARBAGE_STRING 提高到 3 甚至 5。
> 
> 对于 tesseract-ocr >= 3.01，请尝试在配置文件中增加变量**language_model_penalty_non_freq_dict_word**和**language_model_penalty_non_dict_word 。**默认情况下，它们分别为 0.1 和 0.15。

# javascript - jQuery - 检查或未检查的值？过滤

> ID：14364666
> 
> 赞同：-1
> 
> 时间：2013-01-16T17:54:34.890
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何检查此示例中是否选中了复选框（javascript/jQuery。）](https://stackoverflow.com/questions/8391084/how-to-check-if-check-box-is-checked-in-this-example-javascript-jquery)

我的复选框遇到了问题。如果单击按钮，我正在尝试触发一个事件，这与是否选中它的操作不同。

这是我的代码

```
$(document).ready(function(){

$('.pointBox').click(function(event){
    var operator = $(this).find('input').attr('operator');
    var pointNum = parseInt($(this).find('input').val());
    var pointsFromHtml = $('#newPoints').val();
    var currentPoints;
    var newPoints;

    if(pointsFromHtml.charAt(0) == '+'){
        currentPoints = parseInt(pointsFromHtml.substring(1));
    } else {
        return;
    }

    switch(operator){

        case 'addition':
            if(!$(this).attr('checked')){
                newPoints = currentPoints + pointNum;
            }
            if($(this).attr('checked')){
                alert();
                newPoints = currentPoints - pointNum;
            }
            break;
        case 'subtraction':
            newPoints = currentPoints - pointNum;
            break;
    }

    $('#futurePoints').text('+' + newPoints);
    $('#newPoints').attr('value', newPoints);

});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:58:24.137

假设问题是 if 语句不起作用，我已经成功了

```
 if($("#something").is(":checked")){
//do something
} 
```

以防万一，对于未经检查的情况

```
is(":not(:checked)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:57:30.020

改为使用`this.checked`。

```
newPoints = this.checked ? currentPoints - pointNum
                         : currentPoints + pointNum; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:09:52.640

我很抱歉不清楚......我想出了如何解决这个问题。

通过在单击按钮时更改运算符值，减去它可以解决问题，以便下次单击将减少点。这很可能对其他人没有帮助..但它确实解决了问题。

# memory - Ascii 表的物理位置在哪里

> ID：14364667
> 
> 赞同：3
> 
> 时间：2013-01-16T17:54:45.503
> 
> 标签：memory, architecture, ascii

我参加了一些计算机课程，老师说 ASCII 表位于非常远的内存通道。在我看来，它必须位于非常接近 CPU 的地方，因为它将字符转换为十六进制机器可读序列，并且即使没有操作系统，您也可以读取字母。我发现它确实在 BIOS（基本输入输出系统）中，有人可以详细说明 ASCII 表的物理位置吗？它可能在CPU中吗？以及它确实与计算机体系结构中的 CPU 有多接近。

如果我犯了任何错误，请纠正我，我们在这里学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:02:09.683

ASCII 表不是由 BIOS 管理的，而是由操作系统管理的。所以它没有任何物理位置。

现在他们不一定使用ASCII，而是使用UNICODE。

# java - 从 ARIN RESTful Web 服务读取信息的 java 应用程序

> ID：14364674
> 
> 赞同：2
> 
> 时间：2013-01-16T17:55:23.703
> 
> 标签：java, rest, service, web, restlet

我正在尝试创建一个 java 应用程序来使用 IP 地址从 ARIN 读取信息。我看到 ARIN 正在使用 RESTful Web 服务来获取 IP 信息，但我不确定我需要做什么才能开始。有些人在谈论`RESTLET`，其他人在谈论`JAX-RS`等等。你能帮我把我带到正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:25:11.767

Restlet 还有一个客户端 API 可以与远程 RESTful 应用程序交互。有关更多详细信息，请参阅类 Client、ClientResource。为此，您需要从 Restlet 分发中获得以下 jar 文件：

*   org.restlet：主要的 Restlet jar
*   org.restlet.ext.xml：对 XML 的 Restlet 支持
*   org.restlet.ext.json：对 JSON 的 Restlet 支持。在这种情况下，还需要库文件夹中的 JSON jar。

如果我使用位于此地址[https://www.arin.net/resources/whoisrws/whois_api.html#whoisrws](https://www.arin.net/resources/whoisrws/whois_api.html#whoisrws)的文档。这是您可以使用的简单 Restlet 代码：

```
ClientResource cr = new ClientResource("http://whois.arin.net/rest/poc/KOSTE-ARIN");
Representation repr = cr.get();
// Display the XML content
System.out.println(repr.getText()); 
```

或者

```
ClientResource cr = new ClientResource("http://whois.arin.net/rest/poc/KOSTE-ARIN.txt");
Representation repr = cr.get();
// Display the text content
System.out.println(repr.getText()); 
```

Restlet 还在 XML 级别提供了一些支持。因此，您可以通过简单的方式访问 XML 中包含的提示，如下所述：

```
ClientResource cr = new ClientResource("http://whois.arin.net/rest/poc/KOSTE-ARIN");
Representation repr = cr.get();
DomRepresentation dRepr = new DomRepresentation(repr);
Node firstNameNode = dRepr.getNode("//firstName");
Node lastNameNode = dRepr.getNode("//lastName");
System.out.println(firstNameNode.getTextContent()+" "+lastNameNode.getTextContent()); 
```

请注意，您最终可以处理内容协商 (conneg)，因为您的 REST 服务似乎支持它：

```
ClientResource cr = new ClientResource("http://whois.arin.net/rest/poc/KOSTE-ARIN");
Representation repr = cr.get(MediaType.APPLICATION_JSON); 
```

在这种情况下，您的表示对象包含 JSON 格式的数据。与 DomRepresentation 一样，有一个 JsonRepresentation 来检查这个表示内容。

希望它可以帮助你。蒂埃里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:08:43.003

问题是您似乎不太了解 REST 是什么（对不起，如果我弄错了！）。Restlet 和 JAX-RS 都与服务器端相关。

您可能需要类似[jersey-client 的](http://jersey.java.net/nonav/documentation/latest/client-api.html)东西。这是一个帮助与 RESTful Web 服务交互的库。您还可以使用普通的 Java 库对 Web 服务进行 HTTP 调用。REST 与其实现协议紧密结合。这意味着如果 web 服务是用 HTTP 实现的（很可能是），你不需要任何花哨的东西来与之交互。只是 HTTP。

我强烈建议您更多地了解 REST 和 HTTP 本身。

# java - Swig java c ++传递包含c ++结构的向量向量

> ID：14364676
> 
> 赞同：2
> 
> 时间：2013-01-16T17:55:37.700
> 
> 标签：java, c++, stl, vector, swig

我一直在寻找相关问题，但我无法摆脱痛饮指针。

基本上我有一个简单的结构

```
typedef struct mbuf{
 int date
 int time
} 
```

在我的班级中，我定义了一个向量的向量

```
class Profile {

private:

    std::vector<std::vector<mbuf> > mbufArray;

    std::vector<std::vector<mbuf> > getMbufArray() const {
        return mbufArray;
    }

    void setMbufArray(std::vector<std::vector<mbuf> > mbufArray) {
        this->mbufArray = mbufArray;
    }

} 
```

get 和 set 函数已为我自动生成。我已经使用来自其他问题的信息生成了 swig java 类

```
%{
  define SWIG_JAVA_EXTRA_NATIVE_CONTAINERS 
%}

%include "std_vector.i"
%{ 
 include <vector> 
%} 

%template(ProfileVector) std::vector<std::vector<mbuf> >;

%typemap(out) std::vector<std::vector<mbuf> >::value_type { 
$result = SWIG_NewPointerObj(SWIG_as_voidptr(&$1), $descriptor(std::vector<mbuf>), 0 |  0 ); 
} 

%typemap(out) std::vector<std::vector<mbuf> >::value_type & { 
    $result = SWIG_NewPointerObj(SWIG_as_voidptr($1), $descriptor(std::vector<mbuf>), 0 |  0 ); 
} 
```

我的问题是我仍然收到一个 SWIGTYPE_p_std__vectorT_mbuf_t 用于我的 set 和 get 类型，我可以创建给我元素的函数，但我真正需要的是更自然地访问 java 中的向量元素。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:04:34.193

好的，我发现我缺少实际向量的 typedef。

我现在可以通过将行添加到我的 .i 文件来访问 mbuf 类型

```
%template(ProfileVector) std::vector<mbuf>;
%template(VectorProfileVector) std::vector<std::vector<mbuf> >; 
```

# mustache - 我的 Hogan.js 模板数据有什么问题（从纯 Mustache 迁移）？

> ID：14364678
> 
> 赞同：0
> 
> 时间：2013-01-16T17:55:40.653
> 
> 标签：mustache, hogan.js

我一直在使用 Mustache.js，出于性能原因想尝试 Hogan.js。虽然切换会很简单，但似乎适用于 Mustache.js 的数据格式不适用于 Hogan.js。

这是旧（工作）版本：

```
var outputH = Mustache.render(this.options.templates.headers, headers);
this.$(".data-table thead").html(outputH);

var outputB = Mustache.render(this.options.templates.records, view);
this.$(".data-table tbody").html(outputB); 
```

我认为将代码更改为此会起作用：

```
var compiledHeaders = Hogan.compile(this.options.templates.headers);
var jsonHeaders = JSON.stringify(headers);
this.$(".data-table thead").html(compiledHeaders.render( jsonHeaders ));

var compiledView = Hogan.compile(this.options.templates.records);
var jsonRecords = JSON.stringify(view);
this.$(".data-table tbody").html(compiledView.render( jsonRecords )); 
```

但表格无法正确呈现。

[可以的，旧版](http://i.stack.imgur.com/nrv1f.png)

[不好，新版本](http://i.stack.imgur.com/GPSQe.png)

这是标题模板：

```
<script type=\"text/mustache\" id=\"template-list-headers\">
 <tr>
  {{#.}}
   <th>
    <a class=\"sortheader\" href=\"#{{id}}\">
     {{label}}
     {{#asc}}
      <img border=\"0\" alt=\"sort asc\" src=\"images/sort_asc.gif\">
     {{/asc}}
     {{#desc}}
      <img border=\"0\" alt=\"sort desc\" src=\"images/sort_desc.gif\">
      {{/desc}}
     </a>
    </th>
   {{/.}}
   <th class=\"pull-right\">action</th>
  </tr>
 </script> 
```

这是数据模板：

```
 <script type=\"text/mustache\" id=\"template-list-records\">
  {{#.}}
   <tr>
    <td>{{airport_code}}</td>
    <td>{{city_code}}</td>
    <td class=\"pull-right\">
     [<a href=\"result.mics?m_uid={{airport_code}}\" class=\"listlink\">details</a>]
    </td>
   </tr>
  {{/.}}
  </script> 
```

这是标题数据：

```
"[{"label":"Airport code","id":"airport_code","url":"staff.mics?sort=airport_code&amp;ord=asc&amp;op=list","ord":"asc","class":"","asc":true,"desc":false},{"label":"City code","id":"city_code","url":"staff.mics?sort=city_code&amp;ord=asc&amp;op=list","ord":"asc","class":"","asc":false,"desc":false}]" 
```

这是记录数据：

```
"`[{"id":"1","airport_code":"AAA","city_code":"AAA"},{"id":"2","airport_code":"AAB","city_code":"AAB"},{"id":"3","airport_code":"AAC","city_code":"AAC"},{"id":"4","airport_code":"AAE","city_code":"AAE"},{"id":"5","airport_code":"AAF","city_code":"AAF"},{"id":"6","airport_code":"AAI","city_code":"AAI"},{"id":"7","airport_code":"AAJ","city_code":"AAJ"},{"id":"8","airport_code":"AAK","city_code":"AAK"},{"id":"9","airport_code":"AAL","city_code":"AAL"},{"id":"10","airport_code":"AAM","city_code":"AAM"},{"id":"11","airport_code":"AAN","city_code":"AAN"},{"id":"12","airport_code":"AAO","city_code":"AAO"},{"id":"13","airport_code":"AAP","city_code":"HOU"},{"id":"14","airport_code":"AAQ","city_code":"AAQ"},{"id":"15","airport_code":"AAR","city_code":"AAR"},{"id":"16","airport_code":"AAS","city_code":"AAS"},{"id":"17","airport_code":"AAT","city_code":"AAT"},{"id":"18","airport_code":"AAU","city_code":"AAU"},{"id":"19","airport_code":"AAV","city_code":"AAV"},{"id":"20","airport_code":"AAX","city_code":"AAX"},{"id":"21","airport_code":"AAY","city_code":"AAY"},{"id":"22","airport_code":"ABA","city_code":"ABA"},{"id":"23","airport_code":"ABD","city_code":"ABD"},{"id":"24","airport_code":"ABE","city_code":"ABE"},{"id":"25","airport_code":"ABF","city_code":"ABF"},{"id":"26","airport_code":"ABG","city_code":"ABG"},{"id":"27","airport_code":"ABH","city_code":"ABH"},{"id":"28","airport_code":"ABI","city_code":"ABI"},{"id":"29","airport_code":"ABJ","city_code":"ABJ"},{"id":"30","airport_code":"ABK","city_code":"ABK"},`

.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:49:26.237

设法解决了这个问题，似乎需要进行一些小调整：

在模板中：

```
Change {{#.}} to e.g. {{#items}} and {{/.}} to {{/items}} 
```

在渲染代码中添加带有 eg Item 元素的 eg Stuff 数组：

```
// render headers
var compiledHeaders = Hogan.compile(this.options.templates.headers);
var stuff = {}; 
stuff.items = headers;
this.$(".data-table thead").html(compiledHeaders.render(stuff));

// Render the table
var view = this.getRecords();
var otherStuff = {}; 
otherStuff.items = view;
var compiledView = Hogan.compile(this.options.templates.records);
this.$(".data-table tbody").html(compiledView.render(otherStuff)); 
```

# ruby-on-rails - 从 Ruby Gem 返回 HTML

> ID：14364681
> 
> 赞同：0
> 
> 时间：2013-01-16T17:55:44.667
> 
> 标签：ruby-on-rails, rubygems, gem

我正在尝试创建一个返回 html 标记的 Ruby gem，如下所示：

```
class Hola
    def self.hi(name = "world")
        "hello #{name}"
    end

    def self.hi_with_markup(name = "world")
        "<strong>hello #{name}</strong>"
    end
end 
```

但是，每当我尝试在 test.html.erb 文件中使用它时，如下所示：

```
<%= Hola.hi_with_markup(", please work!") %> 
```

它返回带有打印标签的字符串，而不是实际呈现 html。如何从 gem 方面解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:06:10.400

在 Rails 3 中，对于任何被认为不安全的字符串，默认值从“不”转义 HTML 更改为转义 HTML（即，将 '>' 转换为 >）；这通常是任何可能包含用户字符的字符串，包括 gem 的输出。有两种方法可以解决这个问题`raw()`和`.html_safe`。

这是一个全面的答案：[raw vs. html_safe vs. h to unescape html](https://stackoverflow.com/questions/4251284/raw-vs-html-safe-vs-h-to-unescape-html)

简短的回答是这样做：

```
<%= Hola.hi_with_markup(", please work!").html_safe %> 
```

或者

```
<%= raw(Hola.hi_with_markup(", please work!")) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:57:59.770

尝试这个：

```
class Hola
    def self.hi(name = "world")
        "hello #{name}"
    end

    def self.hi_with_markup(name = "world")
        "<strong>hello #{name}</strong>".to_html
    end
end 
```

# web - ping 服务器的 404 错误会导致类似于拒绝服务攻击的问题吗？

> ID：14364685
> 
> 赞同：0
> 
> 时间：2013-01-16T17:56:06.153
> 
> 标签：web, webserver, ping, denial-of-service

有一个处理餐厅预订的第三方网站，我想在我的应用程序中提供一个链接。因此，如果人们正在我的应用程序中查看餐厅，则可以使用链接将他们发送到预订服务。

问题是该应用程序不提供允许开发人员生成指向特定餐厅的链接的 API。

然而，我在他们的 URL 中确定了 5 或 6 种不同的模式，根据餐厅名称，它们最终将链接到正确的餐厅。

我创建了一个脚本来尝试这些模式中的每一个，如果收到 404 错误，它会转到下一个模式来尝试。如果没有收到 404 错误，那么我已经确定了正确的链接。

潜在地，如果我实现了这个解决方案，并且用户在我的应用程序中浏览了一堆餐馆，它可能会多次 ping 服务器出现 404 错误。如果有一百个人在使用该应用程序，它可能会 ping 服务器数千次。

我不知道是否收到数千次 404 错误会导致拒绝服务。因为如果是这样，我必须想出另一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T07:18:14.823

这取决于您所访问的服务器的可用资源以及您使用的模式。确实，您应该与所有者联系以回答这个问题，因为通过提出许多可能无效的请求，您可能会在最坏的情况下对它们进行 DDoSing，或者如果没有潜在地花费他们的服务器/连接开销。如果这不可能，您可能会看到合理的结果，使用 curl 脚本搜索餐厅名称以及预订网站名称并遵循第一个结果。它不是很干净，但它会阻止你敲打他们的网站。

# html - 在没有 iframe 的页面上显示 url 的内容？

> ID：14364689
> 
> 赞同：0
> 
> 时间：2013-01-16T17:56:17.350
> 
> 标签：html, url, iframe

我听说 iframe 将在较新版本的浏览器中消失。我可能错了。我有一个应用程序，您可以在其中输入内容页面的 url，我们将为您显示该内容。

使用或不使用 iframe 将如何实现？iframe 会带来哪些安全风险或其他问题？有没有办法在没有 iframe 的情况下做到这一点？（最后我检查这不是 90 年代）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:00:16.650

iframe 不会消失，它是用于隔离页面内容的便捷工具。同源策略阻止 iframe 内容与父页面交互。

显示异地内容的另一种方法是对充当代理的服务器进行 AJAX 调用，以获取页面内容并将其发送回客户端。在这种情况下，AJAX 加载内容中的脚本可以以任何可能的方式与主机页面交互。

# html - 在浏览器窗口中将图片与右下角对齐

> ID：14364695
> 
> 赞同：0
> 
> 时间：2013-01-16T17:56:36.830
> 
> 标签：html

我试图标记一张图片以显示在网页的右下角。

如果我将页面的整体宽度设置为 100%，并且我将图片设置为在底部右侧浮动，它会完美地实现这一技巧，但上面提到的图片是一个更大宽度的图片，大约 1600 像素，所以当你打开页面时小窗口浏览器然后浮动图片对齐但滚动条出现并滚动到页面的整个宽度而没有浮动图片..

```
body{width:100%;}
thepicture{width: 1289px;
height: 446px;
position:relative;
float:right;} 
```

所以第二种方法：使 body 或 wrapper div 固定宽度大于上面提到的图片：

> 身体{最小宽度：1600px;}

在有人的屏幕大于 1600 像素之前看起来很棒……浮动以 1600 像素结束；

第一个解决方案需要调整，但我无法弄清楚如何，一些响应式浮动可能会很棒 jquery？感谢转发

问题是珍珠:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:02:59.980

听起来您需要在这里使用背景图像。将背景放在 100% 宽度的 div 上，并将背景位置设置为`right bottom`.

```
div.background{background: url('images/bg.png') no-repeat right bottom; width: 100%} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:14:18.623

试试看`position: fixed; z-index: -1;`，它完全符合您的要求。 [例子](https://tinker.io/f2f3e/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:17:45.147

**更新**

可能是这项工作：

```
body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%
    min-width: 1648px; /* the width of the longest element */
}

#bottomwrap {
    /* replace with your background color */
    background: url(path/to/picture) bottom right no-repeat;
    width: 100%;
} 
```

记住重置`body` `margin`，`padding`归零并设置`body` `height`为 100%

**更新：**

我已经为您的案例更新了解决方案，修改了 HTML 结构，您可以在此处查看[http://jsbin.com/ulatis/1/edit](http://jsbin.com/ulatis/1/edit)

# android - Android：是否可以加速 AutoCompleteTextView 的下拉选择列表的出现？

> ID：14364704
> 
> 赞同：0
> 
> 时间：2013-01-16T17:57:13.080
> 
> 标签：android, autocompletetextview

我使用 AutoCompleteTextView 来提供地址条目。街道名称被定义并作为 ArrayAdapter 提供以提供街道选择。这行得通。不幸的是，下拉列表出现得很晚，因为它包含超过 6000 个街道名称。我已经尝试将阈值从 2 修改为 6 左右，但并没有那么快。

我想如果可能的话，我必须覆盖算法或其他东西，或者可能有另一种方法来解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:08:53.550

您可以提供一个[`ListAdapter`](http://developer.android.com/reference/android/widget/ListAdapter.html)实现[`Filterable`](http://developer.android.com/reference/android/widget/Filterable.html). 通过创建您自己的[`Filter`](http://developer.android.com/reference/android/widget/Filter.html)，您可以设计一个比默认的运行速度更快的。

# php - Soundcloud 解决问题

> ID：14364705
> 
> 赞同：1
> 
> 时间：2013-01-16T17:57:13.480
> 
> 标签：php, api, curl, soundcloud

我正在为 SoundCloud 开发一个应用程序，用 PHP 编写，我使用 php-soundcloud 库。

成功实例化 Services_Soundcloud 实例后，我可以进行如下调用：

```
echo $soundcloud->get('me');
echo $soudcloud->get('users/12345678'); 
```

但是，以下调用不起作用：

```
echo $soundcloud->get('resolve', array('url' => 'https://soundcloud.com/webfordreams')); 
```

我得到的错误是：

> Services_Soundcloud_Invalid_Http_Response_Code_Exception：请求的 URL 在 Services_Soundcloud->_request() 中以 HTTP 代码 302 响应（../php-soundcloud/Services/Soundcloud.php 的第 933 行）。

经过几个小时的调试，我决定寻求帮助，因为我真的不明白我做错了什么。

谁能帮助我并告诉我如何得到正确的回应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T06:51:45.620

您得到的“HTTP/1.1 302”响应是根据[api](http://developers.soundcloud.com/docs/api/reference#resolve)的适当响应。如果你检查完整的 php 异常，你会在响应正文中得到这个：

```
[httpBody:protected] => {"status":"302 -Found","location":"https://api.soundcloud.com/users/25071103"} 
```

为了允许 CURL 跟随重定向，您需要在调用 soundcloud 的 get() 函数时传递 CURLOPT_FOLLOWLOCATION 选项。

```
$result = $scloud->get('resolve', array('url' => 'https://soundcloud.com/webfordreams'), array(CURLOPT_FOLLOWLOCATION => TRUE )); 
```

虽然我不太确定语法，但你最终想要在 Soundcloud 的 _request() 函数中得到类似这样的东西：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

希望在这方面有更多经验的人会出现并为您提供正确的语法，而不是您必须修补 SoundCloud SDK 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T21:31:25.570

从 Francis.G 所说的开始你正在寻找的语法是：

```
$soundcloud->get('resolve', array('url' => 'https://soundcloud.com/webfordreams'), array(CURLOPT_FOLLOWLOCATION => true); 
```

唯一的变化是 curl-ops 数组的`get()`定义作为第三个参数传递给函数。

# c# - 使用位域以获得更易读的代码

> ID：14364706
> 
> 赞同：1
> 
> 时间：2013-01-16T17:57:14.950
> 
> 标签：c#, asp.net, .net

我正在开发一个用 .NET 编写的遗留 Web 应用程序。在应用程序启动时，它会检查登录的用户类型，并根据用户类型确定要显示的 UI 元素。

现在实现的方式是一系列 if 语句来处理每个用户类型的情况，然后是一个函数调用，以根据用户类型将各种 UI 元素设置为可见或不可见。问题是函数调用有点混乱。大约有 500 行以下内容：

```
setTabsVisible(true, true, true, true, true, true, true, true, true, true, false, false);
if (!locked)
{
    setActionButtonsVisibile(true, false, true, "Submit", "");
    script += setTabsReadOnly(false, false, false, false, false, false, true, false, false, false, true, true);
    script += setSubTabsReadOnly(true, true, false, true, true, true, false, false, true, true, false, true);
}
script += setSubTabsVisible(false, false, false, false, false, false, true, false, false, true, true); 
```

乍一看，所有这些真、真、假、真等都不是很可读。要查看正在打开或关闭的内容，您必须将鼠标悬停在函数上并将布尔值与参数列表匹配。

所以我在想一个更好的解决方案可能是一个位字段，它是由按位或一起的常量构建的。这样一个函数调用可能看起来更像这样：

```
setTabsReadOnly(notesTab | documentsTab | signoffTab | etc); 
```

但是，C# 似乎不支持位域。有更好的解决方案吗？或者它甚至值得改变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T17:58:28.303

```
[Flags]
public enum MyFlags : short
{
    Foo = 0x1,
    Bar = 0x2,
    Baz = 0x4
}

public static class Program
{
    public static void Main()
    {
        CheckFlags(MyFlags.Bar | MyFlags.Baz);
    }

    public static void CheckFlags(MyFlags flags)
    {
        if (flags.HasFlag(MyFlags.Foo))
            Console.WriteLine("Item has Foo flag set");

        if (flags.HasFlag(MyFlags.Bar))
            Console.WriteLine("Item has Bar flag set");

        if (flags.HasFlag(MyFlags.Baz))
            Console.WriteLine("Item has Baz flag set");
    }
} 
```

如上例所示，您应该使用 Flag Enums 来简化您的代码。有关 Enums 的更多信息，请查看[此参考](http://msdn.microsoft.com/en-us/library/cc138362.aspx)。因此，在您的情况下，您将拥有：

```
public static void setTabsReadOnly(YourEnum flags)
{
    // Your Code
} 

setTabsReadOnly(YourEnum.NotesTab | YourEnum.DocumentsTab | YourEnum.SignoffTab); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T17:58:39.683

听起来您需要创建一个`Flags Enum`. 您可以将方法修改为仅具有枚举参数，然后使用要应用的枚举类型调用该方法：

```
public void MyMethod(MyEnumeration myEnum) { ... }
...
MyMethod(MyEnumeration.First | MyEnumeration.Second | MyEnumeration.Third); 
```

来自 MSDN 的示例：

> 您可以使用枚举类型来定义位标志，这使枚举类型的实例能够存储枚举器列表中定义的值的任意组合。

```
[Flags]
enum Days2
{
    None = 0x0,
    Sunday = 0x1,
    Monday = 0x2,
    Tuesday = 0x4,
    Wednesday = 0x8,
    Thursday = 0x10,
    Friday = 0x20,
    Saturday = 0x40
}
class MyClass
{
    Days2 meetingDays = Days2.Tuesday | Days2.Thursday;
} 
```

[http://msdn.microsoft.com/en-us/library/cc138362.aspx](http://msdn.microsoft.com/en-us/library/cc138362.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T17:58:28.740

> 但是，C# 似乎不支持位域。有更好的解决方案吗？

[`Flags`](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)枚举基本上是一个位域。

> 表示可以将枚举视为位域；即一组标志。

```
[FlagsAttribute] 
enum MultiHue : short
{
    Black = 0,
    Red = 1,
    Green = 2,
    Blue = 4
};

// Black and Red:
MultiHue mh = MultiHue.Black & MultiHue.Red; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T18:00:23.370

您想要的是使用带有 Flags 属性的 Enum，

```
[Flags]
enum TabOptions
{
    notesTab = 0x01,
    documentsTab = 0x02,
    signoffTab = 0x04
} 
```

然后，您可以按照您描述的方式将值或枚举值组合在一起。

```
void setTabsReadOnly(TabOptions options)
{
   //do stuff
} 
```

setTabsReadOnly(notesTab | documentsTab | signoffTab)

# git - git track 忽略的文件夹

> ID：14364708
> 
> 赞同：0
> 
> 时间：2013-01-16T17:57:28.127
> 
> 标签：git

我用 .gitignore 从 git 中排除了一个特定文件夹。今天我需要跟踪里面的文件，但似乎删除 .gitignore 中的行不起作用。
我试图这样做，`git update-index --no-assume-unchanged -R folder`但 -R 不起作用，当我这样做时，`git update-index --no-assume-unchanged folder`他告诉我`fatal: Unable to mark file media`，因为他期待的是文件而不是文件夹。

那么如何跟踪这些文件呢？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:11:44.237

如果你得到`fatal: Unable to mark file media`，该文件可能不在 repo 中。试试`git ls-files -o`。这将告诉您哪些文件不在存储库中。如果它在那里列出，那么你必须这样做`git add folder`。如果它给您带来任何问题，您可以添加`git add -f folder`以强制添加，尽管忽略设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:03:45.213

您有权在 .gitignore 文件中删除将其排除在外的行的第一步。承诺。现在`git add path/to/your/file`提交。现在应该跟踪该文件。

如果仍然没有，请检查您是否没有在配置中设置可能执行此操作的排除模式。

# c++ - 关于 std::thread 中的 C++ 自动类型转换行为

> ID：14364713
> 
> 赞同：4
> 
> 时间：2013-01-16T17:57:40.973
> 
> 标签：c++, multithreading, c++11, rvalue-reference

我创建了两个类`cl1`，`cl2`并且`cl1`有一个带`cl2&`参数的构造函数。我有三个函数，一个`cl1`作为参数，一个`cl1&&`作为参数，一个`cl1&`作为参数。

```
#include <thread>
#include <iostream>

class cl1;
class cl2;

class cl2 {
public:
    int y;
    cl2(int y) : y(y)   {}                  //ctor
};

class cl1 {
public:
    int x;
    cl1(int x) : x(x) {}                 //ctor
    cl1(cl2& ob1) : x(ob1.y * 2) {}      //ctor for automatic conversion of cl2& to cl1, x = y*2
};

void do_work_with_cl(cl1 ob) {              //This works as usual by actually copying the object through the conversion constructor
    std::cout << "The x of ob is " << ob.x << std::endl;
}

void do_work_with_cl_rref(cl1&& ob) {       //I guess this works because it takes an rvalue and the automatic
                                            //conversion ctor of cl1 does just that
    std::cout <<"Inside the function that takes cl1 as rvalue, x of ob is"  << ob.x << std::endl;
}

void do_work_with_cl_lref(cl1& ob) {        //This doesn't work as ob is non-const lvalue reference
    std::cout << "lvalue referenced but the object created through implicit conversion is temporary(i.e rvalue)" << std::endl;
}   

int main() {
    //Normal non-threaded calls
    cl2 ob(100);                //create a cl2 object
    do_work_with_cl(ob);            //This is ok
    do_work_with_cl_rref(ob);   //This too works
    //do_work_with_cl_lref(ob)  //This fails, as suspected

    std::cout << "Thread part" << std::endl

    //Now calling the functions through a thread
    std::thread t1(do_work_with_cl_rref, ob);   //Thought this could work here, but doesn't
                                                //The other functions also don't work, but I can understand why.
    t1.join();                                              
} 
```

在 ideone.com ：[http://ideone.com/MPZc4C](http://ideone.com/MPZc4C)，因为我要问这个问题，所以这个例子有效。但是使用 g++-4.7 我收到如下错误：

```
In file included from /usr/include/c++/4.7/ratio:38:0,
             from /usr/include/c++/4.7/chrono:38,
             from /usr/include/c++/4.7/thread:38,
             from main.cpp:1:
/usr/include/c++/4.7/type_traits: In instantiation of ‘struct std::_Result_of_impl<false, false, void (*)(cl1&&), cl2>’:
/usr/include/c++/4.7/type_traits:1857:12:   required from ‘class std::result_of<void (*(cl2))(cl1&&)>’
/usr/include/c++/4.7/functional:1563:61:   required from ‘struct std::_Bind_simple<void (*(cl2))(cl1&&)>’
/usr/include/c++/4.7/thread:133:9:   required from ‘std::thread::thread(_Callable&&, _Args&& ...) [with _Callable = void (&)(cl1&&); _Args = {cl2&}]’
main.cpp:13:44:   required from here
/usr/include/c++/4.7/type_traits:1834:9: error: invalid initialization of reference of type     ‘cl1&&’ from expression of type ‘cl2’
make: *** [main.o] Error 1 
```

我真的不知道实现或代码是否有任何问题。我只是在学习 C++ 中的线程和东西，所以我这样做没有实际理由。请让我知道问题是什么，以及我在代码注释中是否正确。（代码中的注释“This works...”意味着当从 main() 将对象作为参数（而不是对它的引用）调用它们时它们很好。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:56:17.917

C++ 标准的第 30.3.1.2/3 段说：

*“要求：F 和 Args 中的每个 Ti 应满足 MoveConstructible 要求。INVOKE ( `DECAY_COPY(std::forward<F>(f)), DECAY_COPY(std::forward<Args>(args))...)`(20.8.2) 应为有效表达式”*。

该表达式`DECAY_COPY(x)`又在 30.2.6 中定义：

*“在本条款的几个地方`DECAY_COPY(x)`使用了操作。所有这些使用都意味着调用函数`decay_copy(x)`并使用结果，其中`decay_copy`定义如下：”*

```
template <class T> typename decay<T>::type decay_copy(T&& v)
{ return std::forward<T>(v); } 
```

由于该`decay`操作从对象中删除了 cv 限定符，因此需要有一个**普遍有效**的转换构造函数或从 type`cl1`到 type的转换运算符`cl2`。为了检查这一点，转发机制`std::thread`显然会生成右值引用`cl1`并尝试从中获取实例`c2`。这会失败，因为右值引用不能绑定到转换构造函数中的**非常量**左值引用。

如果您将构造函数的签名从更改`cl1(cl2& ob1)`为`cl1(cl2 const& ob1)`它适用于 GCC 4.7.2，因为右值引用可以绑定到对`const`.

# file - 从二进制文件中读取结构没有按应有的方式显示

> ID：14364715
> 
> 赞同：0
> 
> 时间：2013-01-16T17:57:46.040
> 
> 标签：file, struct, binary

我已经用数据填充了一个结构并将其写入二进制文件。问题是，当我尝试读回它时，它没有正确显示结构！这是代码...

```
#define MAXS 30
 typedef struct {
    char  id[50];
    int pct1, pct2;
    } TStudd;

int ReadStruct(FILE* f, TStudd as ){
 int i=0;
 while (i < MAXS && fscanf(f, "%s" , as.id) == 1) 
 {
     fscanf (f, "%i %i", &as.pct1, &as.pct2);
     i++;
     } 
return i;//total number of read people
}

int WriteBinary(FILE* f, TStudd as){
 int pct1, pct2, i;
 pct1 = as.pct1;
 pct2 = as.pct2;
 i = fwrite(as.id, sizeof(as.id), 1,f);
 if( i != 1) return -1;
 i = fwrite(&pct1, sizeof(pct1), 1,f);
 if( i != 1) return -2;
 i = fwrite(&pct2, sizeof(pct2), 1,f);
 if( i != 1) return -3;
 return 0;
 }

int ReadBinary(FILE* f){
 char  id [50];
 int pct1, pct2, i;
 i = fread(id, sizeof(id), 1,f);
 if( i != 1) return -1;
 printf("%s", id);
 i = fread(&pct1, sizeof(pct1), 1,f);
 if( i != 1) return -2;
 printf("%i", pct1);
 i = fread(&pct2, sizeof(pct2), 1,f);
 if( i != 1) return -3;
 printf("%i", pct2);
 return 0;
 }

 g = fopen(sursa, "rt");

   v = ReadStruct(g, ps);
 printf("%i\n", v);
 f = fopen(dest, "w+b");

}
if ( ReadBinary(f, ps) < 0){
   printf("Eroare scriere\n");
   return 1;
   }
if ( WriteBinary(f) < 0 ){
   printf("Eroare citire\n");
   return 1;
   };
  fclose(g);
 fclose(f); 
```

我应该改变什么？谢谢！
平台是 Windows 7 64 位，文件不受任何转换（只是从中写入和读取内容）

# c# - 更快的算法来改变位图中的色相/饱和度/亮度

> ID：14364716
> 
> 赞同：2
> 
> 时间：2013-01-16T17:57:49.623
> 
> 标签：c#, .net, bitmap, hsl

我正在尝试过滤位图图像以增加或减少色相、饱和度和亮度值。

我的代码运行良好，但**速度很慢**。

我将两个位图锁定在内存中，即原始源和当前目标。用户可以移动各种**轨迹栏**控件来修改每个值，然后将其转换为 HSL 值。例如，轨迹栏上的值对应于 -1.0 到 1.0 的范围。

每次引发跟踪栏值更改的事件时，我都会运行一个函数来锁定目标位图并将 HSL 值应用于源位图，然后将结果存储在目标位图中。完成后，我解锁目标位图并在屏幕上绘制图像。

以前我对其他过滤器使用**查找表**，因为我正在执行每字节操作。但是我不知道如何使用 HSL 来应用它。这是我正在使用的代码：

```
byte red, green, blue;

for (int i = 0; i < sourceBytes.Length; i += 3)
{
    blue = sourceBytes[i];
    green = sourceBytes[i + 1];
    red = sourceBytes[i + 2];

    Color newColor = Color.FromArgb(red, green, blue);

    if (ModifyHue)
        newColor = HSL.ModifyHue(newColor, Hue);

    if (ModifySaturation)
        newColor = HSL.ModifySaturation(newColor, Saturation);

    if (ModifyLightness)
        newColor = HSL.ModifyBrightness(newColor, Lightness);

    destBytes[i] = newColor.B;
    destBytes[i + 1] = newColor.G;
    destBytes[i + 2] = newColor.R;
} 
```

这是我的 ModifyBrightness 函数：

```
public static Color ModifyBrightness(Color color, double brightness)
{
    HSL hsl = FromRGB(color);
    hsl.L *= brightness;
    return hsl.ToRGB();
} 
```

所以基本上如果他们的亮度滑块在最中间，它的值将是 0，当我将它传递给函数时，我会将其转换为“1.0”，因此它将亮度乘以 1.0，这意味着它不会改变。如果他们将滑块一直拖到右侧，它的值将是 100，这将导致修改器为 2.0，因此我将亮度值乘以 2.0 使其翻倍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:14:12.843

我最终研究了 ImageAttributes 和 ColorMatrix，发现性能非常好。

这是我为**饱和度和亮度**过滤器实现它的方法：

```
// Luminance vector for linear RGB
const float rwgt = 0.3086f;
const float gwgt = 0.6094f;
const float bwgt = 0.0820f;

private ImageAttributes imageAttributes = new ImageAttributes();
private ColorMatrix colorMatrix = new ColorMatrix();
private float saturation = 1.0f;
private float brightness = 1.0f;

protected override void OnPaint(object sender, PaintEventArgs e)
{
    base.OnPaint(sender, e);

    e.Graphics.DrawImage(_bitmap, BitmapRect, BitmapRect.X, BitmapRect.Y, BitmapRect.Width, BitmapRect.Height, GraphicsUnit.Pixel, imageAttributes);
}

private void saturationTrackBar_ValueChanged(object sender, EventArgs e)
{
    saturation = 1f - (saturationTrackBar.Value / 100f);

    float baseSat = 1.0f - saturation;

    colorMatrix[0, 0] = baseSat * rwgt + saturation;
    colorMatrix[0, 1] = baseSat * rwgt;
    colorMatrix[0, 2] = baseSat * rwgt;
    colorMatrix[1, 0] = baseSat * gwgt;
    colorMatrix[1, 1] = baseSat * gwgt + saturation;
    colorMatrix[1, 2] = baseSat * gwgt;
    colorMatrix[2, 0] = baseSat * bwgt;
    colorMatrix[2, 1] = baseSat * bwgt;
    colorMatrix[2, 2] = baseSat * bwgt + saturation;

    imageAttributes.SetColorMatrix(colorMatrix, ColorMatrixFlag.Default, ColorAdjustType.Bitmap);

    Invalidate();
}

private void brightnessTrackBar_ValueChanged(object sender, EventArgs e)
{
    brightness = 1f + (brightnessTrackBar.Value / 100f);

    float adjustedBrightness = brightness - 1f;

    colorMatrix[4, 0] = adjustedBrightness;
    colorMatrix[4, 1] = adjustedBrightness;
    colorMatrix[4, 2] = adjustedBrightness;

    imageAttributes.SetColorMatrix(colorMatrix, ColorMatrixFlag.Default, ColorAdjustType.Bitmap);

    Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:11:04.903

您需要分析您的应用程序并查看问题所在。

随机建议：

*   使用每像素 32 位格式来避免未对齐的读取。（并将整个 32 读取为单个操作）
*   避免多次 RGB <-> HSL 转换

# c# - 如何在代码中模拟网页按钮点击

> ID：14364718
> 
> 赞同：0
> 
> 时间：2013-01-16T17:57:59.877
> 
> 标签：c#, .net, button, onclick, simulate

我正在尝试在我的程序中模拟按钮单击，以便从服务器获取响应。问题是网页“onclick”激活了该页面中的脚本

html 看起来像这样：

```
<script language=javascript>
    function frmsubmit(id)
    {
        document.all("HistoryData1_hiddenID").value=id;
        document.all("Form1").submit();  
    }
</script>
<input type="button" id="btnGo" value="Go" Class="RegularButton" onclick="frmsubmit('0')" > 
```

我使用了我见过的这段代码：

```
WebBrowser wb = new WebBrowser();
wb.Navigate(url);
while (wb.ReadyState != WebBrowserReadyState.Complete)
{
    Application.DoEvents();
}
wb.Document.GetElementById("btnGo").InvokeMember("click"); 
```

什么都没发生。在真实的网页中，我得到一个包含我需要的数据的 html。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:03:26.420

你可以像使用 jquery

```
$("#btnGo").click(); 
```

在您的 .cs 中，您将像使用它一样

```
StringBuilder sb = new StringBuilder();
sb.AppendLine("$(document).ready(function() {");
sb.AppendLine("$('#btnGo').click();");
sb.AppendLine(" });");
Page.ClientScript.RegisterStartupScript(this.GetType(), "Script", sb.ToString(), true); 
```

就是这样，当然你必须将 jquery 库添加到 html 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:59:51.717

尝试调用 doPostBack

```
__doPostBack("btnGo', '<event argument here>'); 
```

[http://wiki.asp.net/page.aspx/1082/dopostback-function/](http://wiki.asp.net/page.aspx/1082/dopostback-function/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:04:42.043

使用 jQuery [trigger()](http://api.jquery.com/trigger/)函数（或[triggerHandler](http://api.jquery.com/triggerHandler/)，取决于您的目的）。IE

```
$('#<%=btnGo.ClientID%>').trigger('click'); 
```

# ruby-on-rails - Rails gem fork 问题

> ID：14364721
> 
> 赞同：0
> 
> 时间：2013-01-16T17:58:14.850
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, ruby-on-rails-2

我正在为我的 2.3.15 rails 分支应用补丁，以解决最新的安全问题之一。

以前在我的 gem 文件中，我有 -

```
gem 'rails', '2.3.15' 
```

一切都按预期工作。但是对于我的叉子，我有

```
gem 'rails', '2.3.15', :git => 'git@github.com:myrepo/rails.git', :branch => 'CVE-2013-0155-fix' 
```

在进行捆绑安装，然后像往常一样使用捆绑执行 ruby​​ 脚本/服务器运行我的应用程序后，我收到此错误 -

```
| ./script/../config/boot.rb:64:in `require': no such file to load -- initializer (LoadError) 
```

我想也许我只是把我的叉子弄乱了，但是当我将我的 gemfile 指向 rails git repo 时，我遇到了同样的问题。

```
gem 'rails', '2.3.15', :git => 'git@github.com:rails/rails.git', :tag => 'v2.3.15' 
```

谁能向我解释发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:34:21.980

在这里找到一篇关于这个问题的优秀博文 - [http://robanderson123.wordpress.com/2013/01/05/applying-backported-security-patches-to-rails-2-3/](http://robanderson123.wordpress.com/2013/01/05/applying-backported-security-patches-to-rails-2-3/)

最大的问题是 rails/2-3-stable 在 repo 中没有任何 gemspecs。长话短说，做了一个`bundle install`设置为 2.3.15 的导轨。将用于 activerecord 的 rails gemspecs 从规范目录中复制到`bundle show rails`我的 rails 分支中的每个相应目录中。除了我复制到 railties 目录的 rails gemspec 之外。

之后`gem 'rails', '2.3.15', :git => 'git@github.com:myrepo/rails.git', :branch => 'my-2-3-branch'`按预期工作。

# ios - 如何使用 IBAction 清除 UITextField 中的文本？

> ID：14364727
> 
> 赞同：1
> 
> 时间：2013-01-16T17:58:34.660
> 
> 标签：ios, uitextfield, ibaction

我认为这会很简单，但显然不是，至少对我来说不是。我`UITextField`在我的`.h`文件中声明并声明了它的属性，以及`IBAction`清除字段中的文本。

```
IBOutlet UITextField *textField1;
@property(nonatomic, retain) UITextField *textField1;
-(IBAction)clearText:(id)sender 
```

然后在我的实现文件（`.m`）中，这就是我编写清除文本的方法的方式。

```
-(IBAction)clearText:(id)sender {
   textField1.text = NULL;
} 
```

但是当我按下模拟器中的按钮时没有任何反应。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:05:14.580

你真的连接了插座吗？

我也建议使用`nil`or`@""`代替`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:11:23.647

这必须有效：

```
textField1.text = @""; 
```

进一步检查textFiel1的outled是否连接（XCode中的黑色实心圆圈）
添加日志语句

```
-(IBAction)clearText:(id)sender {
   NSLog(@"clearText");
   textField1.text = @"";
} 
```

看看它是否被调用。
如果它没有被调用，`clearText:(id)sender`也检查 outled 。

# javascript - CSS3 过渡动画

> ID：14364735
> 
> 赞同：2
> 
> 时间：2013-01-16T17:58:44.303
> 
> 标签：javascript, jquery, html, css

我对 CSS/HTML/JS 很陌生，所以我对 CSS 过渡没有太多经验。

我正在尝试为我的页面上的 div 元素设置动画，但到目前为止我无法达到预期的结果。

这是我的问题：

在我的 HTML 中，我有一个 div 容器元素，其中包含 5 个 div 元素。它们看起来像位于屏幕中间的简单框，目前不可见。我在屏幕一角也有 5 个按钮。

我想做的是：

当我单击一个按钮（例如按钮 3）时，左侧的 3 个 div 应该消失并移到屏幕边缘的左侧，而 2 个 div 也应该这样做，但向右移动。之后，我希望右侧的 3 个 div 滑回屏幕，右侧的 2 个 div 也应该滑回。所以看起来他们彼此滑动到他们最初开始的位置。

我正在尝试使用 CSS 转换（转换： translateX(Npx);) 来实现此效果。所以在我的 JS 文件中我有这样的东西：

```
$(document).ready(function() {

    $(".button").click(function(){

    // PART 1
       // move 3 divs to the left using transform: translateX(Npx) (no animation)
       // move 2 divs to the left using transform: translateX(Npx) (no animation)

    // PART 2
       // slide 3 divs to the left using transform: translateX(Npx) (with animation)
       // slide 2 divs to the left using transform: translateX(Npx) (with animation)

    }); 
```

所以问题是，在这种情况下，**只有第一部分有效，第二部分似乎不起作用**.....如果我将代码部分附加到不同的事件......就像另一个点击按钮......它只是工作美好的。

**所以我的问题是这两个转换是否可以在一个事件下完成？！？！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:27:49.743

我做了这个，这样的效果可以很好看。如果我正确理解您的问题，您的问题是您在移动 div 之后运行动画，因此您的动画功能使用了错误的起点。

你需要的是：

1.  确保你有一个 CSS position:relative; 在您的 div 上设置，以便动画可以工作。
2.  运行动画函数，将 div 相对于它们的当前位置（即顶部、左侧）移动，并包含一个成功回调。您可能需要首先使用 offset() 和一些数学来计算行进的距离。
3.  完成动画（成功回调）后，将 div 的相对位置更改回 0px（或之前的任何值），同时执行函数，使用 insertBefore() 将 div 实际移动到 DOM 中的新位置. 我从未见过闪烁，因为这些功能几乎是即时的，但是如果您发现问题，您可以在重置位置并移动 div 时将可见性设置为隐藏，然后再重置可见性

您甚至可以在动画期间为您的 div 设置自定义 z-index，并在成功回调上重置，从而允许您确定 div 越过/越过哪些元素，或者如果它们相互交叉，则指定哪些元素在顶部。

# iphone - 为什么我的观察员未注册？

> ID：14364736
> 
> 赞同：0
> 
> 时间：2013-01-16T17:58:44.903
> 
> 标签：iphone, ios, key-value-observing

我正在查看我在 TestFlight 中的崩溃报告，最常见的崩溃是：

> 无法从“ListArchiver 0x1d5b83b0”中删除关键路径“batchImageDownloadingInProgress”的观察者“ListViewController 0x1d590500”，因为它没有注册为观察者。

在`ListViewController`：

```
- (void)viewWillAppear:(BOOL)animated
{
    ...

    [[WanderlistArchiver sharedArchiver] addObserver:self forKeyPath:@"batchImageDownloadingInProgress" options:NSKeyValueObservingOptionNew context:nil];
}

// **** the error happens in here ****
- (void)viewWillDisappear:(BOOL)animated
{
    ...

    [[WanderlistArchiver sharedArchiver] removeObserver:self forKeyPath:@"batchImageDownloadingInProgress"];
} 
```

如果我在其中设置了观察者`viewWillAppear`（并且不要在代码中的其他任何地方触摸它），为什么它在运行时仍未注册`viewWillDisappear`？这在过去 90 天内只发生了 5 次，但我仍然想了解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:15:42.217

最有可能的问题是`viewWillDisappear:`每次调用`viewWillAppear:`. 由于这种情况似乎很少发生，因此一定有一些奇怪的事件序列导致了这种情况的发生。

如果您无法重现该问题，一种可能的解决方法是添加`BOOL`ivar。`viewWillAppear:`添加观察者时将其设置为 YES 。在`viewDidAppear:`中，检查它是否已设置。如果设置，则将其设置为 NO 并移除观察者。如果没有设置，那么你就知道不要移除观察者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:16:20.743

你应该确保`context`是相同的。在您的删除语句中，您使用的是不使用上下文的方法。使用上下文变量代替`nil`并确保它在 add 和 remove 语句中是相同的。

查看[这个问题](https://stackoverflow.com/questions/9231896/kvo-how-to-check-if-an-object-is-an-observer)以获得更详细的解释。

# c++ - 使用受保护的继承

> ID：14364737
> 
> 赞同：4
> 
> 时间：2013-01-16T17:59:03.693
> 
> 标签：c++

在准备考试时，我正在查看一项旧考试，并且有一个问题我找不到答案。我没有正确的答案，我的老师已经有一段时间了。这个问题最初不是英文的。

假设 CI 类继承自 Sup 类，例如：`class CI : protected Sup {`。为什么这不是分类继承？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:09:48.193

> 为什么这不是分类继承？

一般来说，继承为各种对象提供了一种自然的分类机制，允许对对象的共性进行显式建模。当类*公开*`D`继承类时，类之间的关系变为`B`

 *```
D is a B 
```

这建立了一个分类：“所有`D`s 都是`B`s”。

但是，当继承是私有的或受保护的时，`D`不会变成`B`，因此无法在 之上建立额外的分类`D`。本质上，私有或受保护的继承可以被认为是实现的细节，而不是接口的细节。*

# coldfusion - CF 日期字段 - 加载数据时日历图标不会触发日期选择器

> ID：14364741
> 
> 赞同：0
> 
> 时间：2013-01-16T17:59:11.573
> 
> 标签：coldfusion, datefield, cfinput

我在页面顶部使用 CF 输入日历日期字段，该页面从查询中呈现巨大的数据集。这个庞大查询的输出对于每个循环迭代也有一些相当繁重的代码。所以，我有一个非常缓慢的加载页面。

问题是 - 虽然加载了大量数据（在 cfform 之后使用 cfflush），但会显示日历图像按钮，但在加载整个数据集之前它不会触发 datepicker 覆盖。

有什么想法吗？

# c++ - 使用对象进行 C++ 深度复制

> ID：14364745
> 
> 赞同：7
> 
> 时间：2013-01-16T17:59:44.237
> 
> 标签：c++, deep-copy, return-by-value

早上好。我无法理解在共享项目中使用 C++ 中的对象进行深浅复制背后的逻辑，因此我创建了以下示例。

```
int main() {
    ObjectAType* objecta = ObjectAType::New();
    ObjectBType* objectb = ObjectBType::New();

    // some operation to populate data members of object a
    objecta->Operation();

    // assume I have accessors to return datamembers of object a
    // I wish to make a deep copy of SOME of those data members into object b
    objectb->AlignWithA(objecta);

    objecta->Delete();
    objectb->Delete();

    return 0;
} 
```

现在给定对象b类函数如下：

```
public:
void ObjectBType::AlignWithA(ObjectAType* objecta) {
    this->ObjectBDataMember = objecta->DataAccessor();
}
protected:
int ObjectBDataMember; 
```

数据访问器在类 def 中就是这样的，

```
public:
int ObjectAType::DataAccessor() {
    return this->ObjectADataMember;
}
protected:
int ObjectADataMember; 
```

我有几个由此产生的问题。

1) 由于在对象 b 中，数据成员被声明为

```
int ObjectBDataMember; 
```

而不是作为

```
int *ObjectBDataMember; 
```

为什么数据成员被访问为

```
this->ObjectBDataMember 
```

而不是作为

```
this.ObjectBDataMember 
```

?

2）这是深拷贝还是浅拷贝？

如果我遗漏了重要的部分，我深表歉意。我不是一个程序员，所以这样的事情很容易让我感到困惑。文学让我更加困惑。感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:13:40.027

1.  在 C++ 中，`this`被定义为指向当前对象的（不可修改的）指针。因此，您使用`this->aMember`访问`aMember`. 这与拥有的类型无关`aMember`。（注意：只要没有使用同名的局部变量或函数参数，使用`this->aMember`就等同于使用）。`aMember`

2.  因为`ObjectBDataMember`是一个 int，所以复制它不称为浅或深。这些概念仅在复制指针的上下文中使用。

例如：

```
ObjectBType* b1 = new ObjectBType();

ObjectBType* b2 = b1; // shallow copy. b1 and b2 refer to the same object.
ObjectBType* b3 = new ObjectBType(*b1); /* deep copy. b1 and b3 refer to 
  different objects that happen to have the same value. */ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T18:11:21.920

*“为什么数据成员被访问为`this->ObjectBDataMember`而不是`this.ObjectBDataMember`？”*

那是因为`this`是一个指针，并且`->`操作符跟随它*之前*的指针来访问它*之后*的成员。

*“这是深拷贝还是浅拷贝？”*

如果您指的是整数变量的副本，则可以将其称为浅副本，但无需对其进行限定，因为`int`它不是数据结构。

术语“*深度复制*”是指**递归复制**与被复制对象关联的所有对象：如果数据结构包含作为**指针**`S`的成员变量，则将 (say, )的实例深度复制到( say, ) 的另一个实例中意味着递归复制由变量指向的每个对象，以便与这些对象的*副本*相关联，而不是与关联的*相同*对象相关联（浅复制就是这种情况）。**`S``s1``S``s2``s1``s2`**`s1`****

 ****在这里，您没有任何指针成员变量，因此“深”与“浅”复制的概念在这种情况下失去了意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:20:06.613

1.  当你`->`有一个指针，`.`当你有一个引用时，你就使用它。访问数据成员是`this->ObjectBDataMember`因为`this`它是指向自身的不可修改的指针。因此，您需要`->`(offset) 运算符来访问其`ObjectBDataMember`. 应该注意的是，您不必使用自引用`this`指针来访问对象自己的数据成员。它只是一种用于强调代码正在访问对象自己的数据成员的样式。当您访问另一个对象的数据成员并且它们具有相同的成员（由于是相同的对象类型）时很有用。

2.  这些对象没有分配对象，只有普通的旧数据类型。所以它是一个浅拷贝。对象的浅拷贝复制其值但不分配任何新对象。它只复制指向任何已分配对象的指针。深层复制会复制所有值类型成员，并创建自己分配的对象（通常复制源复制对象子对象中的值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:10:15.283

`this->ObjectBDataMember`与深拷贝或浅拷贝无关。 `this`是一个指针，所以它的成员总是通过`->`. 好吧，你可以做到`(*this).ObjectBDataMember`。

和...之间的不同

```
int ObjectBDataMember; 
```

和

```
int *ObjectBDataMember; 
```

如果你想设置它的值，你会这样做：

```
this->ObjectBDataMember = 5; 
```

对比

```
*(this->ObjectBDataMember) = 5; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T18:11:54.500

1.  因为`this`是`ObjectBType*`（指针），所以要访问它的成员，您需要指定`->`. 顺便说一句，`this`是成员函数中的隐式变量，您可以省略它：`ObjectBDataMember = objecta->DataAccessor();`
2.  ObjectADataMember 的类型是 int，它是基本类型（不是复合类型），所以它只是一个副本。临时“深拷贝”适用于复合类型。

我建议首先完成任何好的 C++ 书籍，这将解决大量像这样的潜在问题****

# xaml - 如何避免在 TFS 2012 构建结果中包含（或删除）PDB 文件

> ID：14364752
> 
> 赞同：3
> 
> 时间：2013-01-16T17:59:57.533
> 
> 标签：xaml, tfsbuild

从 Visual Sturdio 2012（和 TFS 2012 服务器）使用 DefaultTemplate 时，PDB 文件包含在构建目录中。我不想要他们。

有没有办法在构建过程中不生成这些文件？

或者

我怎样才能删除这些文件？

我[发现这个关于删除的线程](http://social.msdn.microsoft.com/Forums/en/tfsbuild/thread/57966cbb-87f4-45f4-84a3-ca415a4e4df6)，但似乎有点奇怪（没有删除活动？）也有[这个答案](https://stackoverflow.com/questions/2091898/how-to-recursively-delete-wildcard-files-in-tfs-build)，但不涉及 XAML 模板。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T12:36:50.040

PDB 文件包含有关您的代码的调试信息，不建议禁用它们，它们是有效的输出，因此部署不应该弄乱它们。您可以在 Visual Studio 项目 Properties> Build > Advanced > Debug Info = none 中禁用它们的生成。如果您绝对希望它们消失，请禁用它们以构建特定配置（发布等）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T15:59:24.507

默认情况下，构建服务器会执行解决方案（sln）告诉它的任何事情。默认情况下是进行“调试”构建并创建 PDB。您可以告诉构建执行“发布”构建，默认情况下不会创建任何 PDB...

![添加构建配置](../Images/9eea881af497337d68123e204c8151a0.png) **图：添加构建配置**

但是，我建议不要这样做，因为 PDB 包含您甚至在生产系统中也需要的信息。考虑一下，您在生产中有一个 DLL，而客户遇到了问题。你让他们创建一个 InteliTrace 日志，以便你可以在本地调试它（或者他们让你在他们的环境中调试），突然你试图在 Visual Studio 不了解可执行文件和源代码之间的关系的情况下进行调试。所以没有调试...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:23:05.307

由于我无法找到禁用 PDB 文件生成的构建选项，因此我随后将其删除。

没有简单的方法来删除文件。我做了：

1.  使用带有通配符 *.pdb 的[FindMatchingFiles Activity](http://msdn.microsoft.com/en-us/library/gg265783#Activity_FindMatchingFiles)，它返回 pdb 文件的完整路径
2.  使用 Foreach 循环
3.  使用 InvokeMethod Activity 在循环中为每个文件[调用 DotNet 方法，目标类型 System.IO.File 和方法为“Delete”](http://social.msdn.microsoft.com/Forums/en/tfsbuild/thread/57966cbb-87f4-45f4-84a3-ca415a4e4df6)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T23:12:04.697

在以前的版本（Visual Studio 2010）中，当我们构建**/release**时，它​​不会生成 PDB，当我们仅使用**/debug:full**或**/debug:pdbonly**构建时会创建 PDB 文件，如果需要，我们使用**/debug:pdbonly**为我们不希望可调试的发布版本生成 PDB。

这在 Visual Studio 2012 中不是这种情况，我检查了它，发现它在**/debug**和**/release中都生成了 PDB**

Visuals Studio 2012 没有文档。

# c++ - 无法保持我的 CToolBar 子类的大小正确

> ID：14364754
> 
> 赞同：0
> 
> 时间：2013-01-16T18:00:04.837
> 
> 标签：c++, mfc, toolbar

我的目标是拥有一个 CToolBar 衍生产品，它有一个单独的控件（CMFCShellTreeCtrl）。

就像是：

```
class CFileTreeBar : public CToolBar 
```

每当它被要求计算它的大小时，我想回答它要么是一个固定的最小值，要么是它所停靠的停靠栏的客户区域的大小。换句话说，它应该占用停靠栏的整个高度 + 一个固定宽度（停靠在左侧 - 就像资源管理器在左侧布置其文件夹树一样）。

因此，在 CFileTreeBar::CalcFixedLayout 中，它以基于 GetParent()->GetWindowRect(rect) 的高度和 250pix 的宽度响应。

然后在 OnSize 中，CFileTreeBar 调整其 CMFCShellTreeCtrl 的大小以使用我们的客户端 rect（最大化我们唯一的控制）。

这在最初显示控制栏时效果很好。通过拖动角来调整窗口大小时效果很好。CaclFixedLayout 返回与其先前值不同的值（因为窗口大小已更改），因此它计算出它应该消耗整个垂直空间，最终我收到一条 WM_SIZE 消息，告诉我的控制栏调整大小，这导致我更新大小CMFCShellTreeCtrl 的。

我挣扎的地方是点击 CFrameWnd 上的“最大化”按钮。在这种情况下，由于我不太了解的原因，调用了 CalcFixedLayout 但停靠栏具有旧尺寸（尚未根据最大化而更新为新尺寸）。这导致我的代码响应大小应该与以前相同 - 这导致 MFC 框架不发出调整大小（我们已经是我们声称需要的大小）。

因此，片刻之后，停靠栏被扩展以占用整个垂直空间，但我的控制栏及其底层外壳树没有调整大小 - 而是留下了陈旧的大小。

从最大化到恢复时也会出现问题。此时对 CalcFixedLayout 的调用表明我们应该和最大化的窗口一样高（它的当前大小），现在框架启动了调整大小的代码，最终使我们比停靠栏更大（一旦它被缩小恢复大小），然后我们消失在停靠栏的底部下方（被它的最大垂直范围剪裁）。

## 问题

1.  是否有一个很好的教程或白皮书显示停靠栏和控制栏应该如何在 MFC 中交互的概述？即这个框架应该如何正确挂在一起的完整描述？了解这些部分如何组合在一起并旨在连贯地工作将大大有助于避免破解它来工作，让我可以写一些圆形的东西来适应圆孔，可以这么说。
2.  是否有任何人都知道的与此类似的示例项目？必须弄清楚这个垃圾是非常耗时的——如果有一个例子可以做到这一点，那就太好了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:36:26.147

可停靠和可调整大小的工具栏的代码相当复杂，codeproject 中有一个非常好。你可以研究一下源代码，看看作者是怎么做的。

[http://www.codeproject.com/Articles/6/CSizingControlBar-a-resizable-control-bar](http://www.codeproject.com/Articles/6/CSizingControlBar-a-resizable-control-bar)

# orchardcms - 了解 Orchard placement.info 文件

> ID：14364760
> 
> 赞同：2
> 
> 时间：2013-01-16T18:00:21.130
> 
> 标签：orchardcms, orchardcms-1.6

我是果园开发的新手，上周研究了它。我很难理解一些概念，例如placement.info 文件。

我已经阅读了来自项目站点的文章[了解放置信息](http://docs.orchardproject.net/Documentation/Understanding-placement-info)以及与之相关的“果园启动和运行”一书中的部分。

我的理解：

*   展示位置信息文件适用于内容项级别。它用于重新排序字段和内容部分的呈现；

*   这个文件有三个主要标签：placement（基本上是一个包装器），match（定义规则是否将应用于摘要或详细显示）和place（有效地定义放置规则）；

我不明白的是：

*   如何定义标签的顺序？在“地点”标签中，我看到“内容：之前”、“内容：After.7”、“内容：2.9”和其他一些规则。定义“Place Parts_Tags_ShowTags="Header:after.7"/”是什么意思？放置文件是否能够将零件移动到不同的区域？

* * *

使用它我有点沮丧。我不知道我是否使用了正确的材料（它们看起来非常简短和/或过时）。如果是这样，有人可以建议我一些链接吗？

我真的很感谢一些帮助，伙计们..提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:24:37.893

属性的名称是形状名称（通常由零件驱动程序返回），值是发送该形状的位置。它是一个区域名称，后跟一个冒号，然后是排序。如果要定位顶级区域（在 Layout.cshtml 文件中定义），区域名称可以以斜杠开头，如下所示：`/AsideSecond:1`. 排序可以是一个特殊的数字，也可以是一个点序列。例如，1.1 在 1 之后但在 2 之前。1.1.1 将在 1.1 之后和 1.2 之前等等。之后和之前也可以用于在其他所有内容之后或之前发送形状。

我希望这有帮助。

# python - 在python nltk中计算n-gram频率

> ID：14364762
> 
> 赞同：31
> 
> 时间：2013-01-16T18:00:23.907
> 
> 标签：python, nltk, n-gram

我有以下代码。我知道我可以使用`apply_freq_filter`函数来过滤掉少于频率计数的搭配。但是，在我决定为过滤设置什么频率之前，我不知道如何获取文档中所有 n-gram 元组（在我的情况下为双元组）的频率。如您所见，我正在使用 nltk collocations 类。

```
import nltk
from nltk.collocations import *
line = ""
open_file = open('a_text_file','r')
for val in open_file:
    line += val
tokens = line.split()

bigram_measures = nltk.collocations.BigramAssocMeasures()
finder = BigramCollocationFinder.from_words(tokens)
finder.apply_freq_filter(3)
print finder.nbest(bigram_measures.pmi, 100) 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-19T10:05:38.807

NLTK 自带`bigrams generator`，还有一个方便的`FreqDist()`功能。

```
f = open('a_text_file')
raw = f.read()

tokens = nltk.word_tokenize(raw)

#Create your bigrams
bgs = nltk.bigrams(tokens)

#compute frequency distribution for all the bigrams in the text
fdist = nltk.FreqDist(bgs)
for k,v in fdist.items():
    print k,v 
```

一旦您可以访问 BiGram 和频率分布，您就可以根据需要进行过滤。

希望有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-21T01:22:09.850

该`finder.ngram_fd.viewitems()`功能有效

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-08T18:02:56.680

```
from nltk import FreqDist
from nltk.util import ngrams    
def compute_freq():
   textfile = open('corpus.txt','r')

   bigramfdist = FreqDist()
   threeramfdist = FreqDist()

   for line in textfile:
        if len(line) > 1:
        tokens = line.strip().split(' ')

        bigrams = ngrams(tokens, 2)
        bigramfdist.update(bigrams)
compute_freq() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-01T09:11:44.047

我尝试了以上所有方法并找到了一个更简单的解决方案。NLTK 带有一个简单的最常见的频率 Ngram。

filters_sentence 是我的单词标记

```
import nltk
from nltk.util import ngrams
from nltk.collocations import BigramCollocationFinder
from nltk.metrics import BigramAssocMeasures

word_fd = nltk.FreqDist(filtered_sentence)
bigram_fd = nltk.FreqDist(nltk.bigrams(filtered_sentence))

bigram_fd.most_common() 
```

这应该给出如下输出：

```
[(('working', 'hours'), 31),
 (('9', 'hours'), 14),
 (('place', 'work'), 13),
 (('reduce', 'working'), 11),
 (('improve', 'experience'), 9)] 
```

# python - 在极坐标图上插值数据后 matplotlib 中的轮廓线伪影

> ID：14364764
> 
> 赞同：3
> 
> 时间：2013-01-16T18:00:24.543
> 
> 标签：python, numpy, matplotlib, scipy

我在圆形区域的各个点以极坐标格式获取了少量不规则间隔的数据。我需要进行插值以在规则间隔的网格上获取数据，然后我想使用等高线图绘制它们。

我已经设法进行插值并绘制结果，但我必须从极坐标转换为直角坐标才能进行插值，当我将数据转换回极坐标时，我会在极坐标图上得到伪影。

以下代码演示了我到目前为止所拥有的内容，并将数据绘制在极坐标图和矩形图上：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.interpolate import Rbf

# inputs as 1D arrays
r = np.array([0, 1, 1, 1, 1, 2, 2, 2, 2])
theta = np.radians(np.array([0, 90, 180, 270, 0, 90, 180, 270, 0]))
# z = f(theta, r)
z = np.array([8, 7, 6, 4, 5, 2, 2, 2, 2])

# convert to rect
x = r * np.cos(theta)
y = r * np.sin(theta)

# create RBF for smoothing
rbf = Rbf(x, y, z)

# create grid to smooth over
xi, yi = np.mgrid[-2:2:10j, -2:2:10j]
# smooth
zi = rbf(xi, yi)

# convert back to polar
ri = np.sqrt(xi*xi + yi*yi)
ti = np.arctan2(yi, xi)

# polar plot
fig = plt.figure()
ax = plt.subplot(121, polar=True)
cax = ax.contour(ti, ri, zi, 10, linewidths=0.5, colors='k')
cax = ax.contourf(ti, ri, zi, 10, cmap=plt.cm.Spectral)
ax.set_rmax(2)

# rect plot
ax = plt.subplot(122)
cax = ax.contour(xi, yi, zi, 10, linewidths=0.5, colors='k')
cax = ax.contourf(xi, yi, zi, 10, cmap=plt.cm.Spectral)

plt.show() 
```

**剩下的问题是：**

*   我可以修复轮廓线伪影吗？
*   Scipy 是否提供更合适的插值算法，适用于包含极坐标的此类小型数据集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:54:41.427

您可能也想阅读[此](https://stackoverflow.com/questions/6548556/polar-contour-plot-in-matplotlib)内容，但就极坐标中的等高线图而言，`matplotlib`预计**半径和角度中**的规则网格数组，因此您可以很好地绘制所有内容：

```
# polar plot
ri, ti = np.mgrid[0:2:100j, 0:2*np.pi:100j]
zi = rbf(ri*np.cos(ti), ri*np.sin(ti))

fig = plt.figure()
ax = plt.subplot(121, polar=True)
cax = ax.contour(ti, ri, zi, 10, linewidths=0.5, colors='k')
cax = ax.contourf(ti, ri, zi, 10, cmap=plt.cm.Spectral)
ax.set_rmax(2)

# rect plot
xi, yi = np.mgrid[-2:2:100j, -2:2:100j]
zi = rbf(xi, yi)

ax = plt.subplot(122, aspect='equal')
cax = ax.contour(xi, yi, zi, 10, linewidths=0.5, colors='k')
cax = ax.contourf(xi, yi, zi, 10, cmap=plt.cm.Spectral)
plt.show() 
```

![在此处输入图像描述](../Images/c505f210aadb836bb3b8bc4697dc7b4c.png)

我对您使用`Rbf`. 你到底想做什么，为什么要使用那个插值器？

# c - WinAPI win32 编程 - 按钮不可见

> ID：14364770
> 
> 赞同：1
> 
> 时间：2013-01-16T18:00:55.847
> 
> 标签：c, windows, winapi

我已经使用`GetLastError()`并`FormatMessage()`确定按钮已成功创建。但是，当我运行程序时它不可见。我最初在 winMain 中创建了按钮，但在网上发现帖子说不要这样做，所以我将其注释掉并将创建添加到`WM_CREATE`. 请注意，所有 ID 等都定义在一个`resource.h`文件中，并且`void ErrorExit()`是从 MSDN 中获取的，以便在像我这样的相对较新的 winApi 程序员上使用`GetLastError()`和轻松。`FormatMessage()`我的代码如下：

```
#define WIN32_LEAN_AND_MEAN
#define _WIN32_IE 0x0900
#define _WIN32_WINNT 0x0900

#include <strsafe.h>
#include <windows.h>
#include <CommCtrl.h>
#include <iostream>
#include <ShlObj.h>
#include <cstring>
#include "resource.h"

HWND main_hwnd, tab_hwnd, tab0_hwnd, tab1_hwnd, tab2_hwnd, tab3_hwnd, tab4_hwnd;
HINSTANCE tab_hinst;
TCHAR HomePath[MAX_PATH*2], SavePath[MAX_PATH*2];
WNDCLASSEX wc;
bool success=FALSE;
MSG msg;
HWND button;
static HWND text;
TCITEM tie;
int focus = 0, NotifyCase = 0;

void ErrorExit(LPTSTR lpszFunction) 
{ 
    // Retrieve the system error message for the last-error code

    LPVOID lpMsgBuf;
    LPVOID lpDisplayBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );

    // Display the error message and exit the process

    lpDisplayBuf = (LPVOID)LocalAlloc(LMEM_ZEROINIT, 
        (lstrlen((LPCTSTR)lpMsgBuf)+lstrlen((LPCTSTR)lpszFunction)+40)*sizeof(TCHAR)); 
    StringCchPrintf((LPTSTR)lpDisplayBuf, 
        LocalSize(lpDisplayBuf) / sizeof(TCHAR),
        TEXT("%s failed with error %d: %s"), 
        lpszFunction, dw, lpMsgBuf); 
    MessageBox(NULL, (LPCTSTR)lpDisplayBuf, TEXT("Error"), MB_OK); 

    LocalFree(lpMsgBuf);
    LocalFree(lpDisplayBuf);
    ExitProcess(dw); 
}

// Step 4: The Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch(Msg)
    {
        case WM_CREATE:
            {
                if(tab0_hwnd!=NULL)
                    button = CreateWindow("Button","Navigate to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,42,100,25,tab0_hwnd,(HMENU)ID_B_HOME,(HINSTANCE)GetWindowLong(tab0_hwnd, GWL_HINSTANCE),0);
                /*if(tab0_hwnd!=NULL)
                    button = CreateWindow("Button","Save to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,92,100,25,tab0_hwnd,(HMENU)ID_B_SAVE,(HINSTANCE)GetWindowLong(tab0_hwnd, GWL_HINSTANCE), NULL);
                */HMENU hMenu, hSubMenu;

                hMenu = CreateMenu();

                hSubMenu = CreatePopupMenu();
                AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "&File");
                AppendMenu(hSubMenu, MF_STRING, ID_FILE_EXIT, "&Exit");

                hSubMenu = CreatePopupMenu();
                AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "&Help");
                AppendMenu(hSubMenu, MF_STRING, ID_HELP_ABOUT, "&About");

                SetMenu(hwnd, hMenu);
            }
            break;
        case WM_NOTIFY:
            switch(((LPNMHDR)lParam) ->code)
            {
                case TCN_SELCHANGING:
                    switch(TabCtrl_GetCurFocus(tab_hwnd))
                    {
                        case 0:
                            ShowWindow(tab0_hwnd,SW_HIDE);
                            break;
                        case 1:
                            ShowWindow(tab1_hwnd,SW_HIDE);
                            break;
                        case 2:
                            ShowWindow(tab2_hwnd,SW_HIDE);
                            break;
                        case 3:
                            ShowWindow(tab3_hwnd,SW_HIDE);
                            break;
                        case 4:
                            ShowWindow(tab4_hwnd,SW_HIDE);
                            break;
                        default:
                            return DefWindowProc(hwnd, Msg, wParam, lParam);
                            break;
                    }
                    break;
                case TCN_SELCHANGE:
                    switch(TabCtrl_GetCurFocus(tab_hwnd))
                    {
                        case 0:
                            ShowWindow(tab0_hwnd,SW_SHOW);
                            break;
                        case 1:
                            ShowWindow(tab1_hwnd,SW_SHOW);
                            break;
                        case 2:
                            ShowWindow(tab2_hwnd,SW_SHOW);
                            break;
                        case 3:
                            ShowWindow(tab3_hwnd,SW_SHOW);
                            break;
                        case 4:
                            ShowWindow(tab4_hwnd,SW_SHOW);
                            break;
                        default:
                            return DefWindowProc(hwnd, Msg, wParam, lParam);
                            break;
                    }
                    break;
                default:
                    return DefWindowProc(hwnd, Msg, wParam, lParam);
            }
            break;
        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_FILE_EXIT:
                    PostMessage(hwnd, WM_CLOSE, 0, 0);
                    break;
                case ID_HELP_ABOUT:
                    return MessageBox(0, "This program is an alteration of...", "About", MB_OK);
                    //return DefWindowProc(hwnd2,0,0,0);
                case ID_B_HOME:
                    MessageBox(tab0_hwnd,"HERE","OKAY",NULL);
                    break;
                case ID_B_SAVE:
                    break;
                case ID_B_BLANK:
                    break;
                default:
                    return DefWindowProc(hwnd, Msg, wParam, lParam);
            }
            break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;  
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd, Msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    tab_hinst = hInstance;

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = "Home";
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
        MessageBox(NULL, "Window Registration Failed!", "Error!", MB_ICONEXCLAMATION | MB_OK);

    // Step 2: Creating the Window
    main_hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        "Home",
        "The Home page",
        WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX,
        CW_USEDEFAULT, CW_USEDEFAULT, 700, 400,
        NULL, NULL, hInstance, NULL);

    tab_hwnd = CreateWindowEx(
        0,
        "SysTabControl32",
        "",
        WS_CHILD|WS_CLIPSIBLINGS,
        CW_USEDEFAULT, CW_USEDEFAULT, 681, 338,
        main_hwnd, NULL, tab_hinst, NULL);

    tab0_hwnd = CreateWindowEx(
        0,
        "SysTabControl32",
        "",
        WS_CHILD|WS_CLIPSIBLINGS,
        1, 22, 679, 315,
        tab_hwnd, NULL, tab_hinst, NULL);

    text = CreateWindow("Static","Home Directory",WS_CHILD | WS_VISIBLE,0,50,150,50,tab0_hwnd, 0, tab_hinst,0);
    text = CreateWindow("Static","C:\\",WS_CHILD | WS_VISIBLE,200,50,150,50,tab0_hwnd, 0, tab_hinst,0);
    //button = CreateWindow("Button","Navigate to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,42,100,25,tab0_hwnd,(HMENU)ID_B_HOME,tab_hinst,0);    
    text = CreateWindow("Static","Save Directory",WS_CHILD | WS_VISIBLE,0,100,150,50,tab0_hwnd, 0, tab_hinst,0);
    text = CreateWindow("Static","C:\\",WS_CHILD | WS_VISIBLE,200,100,150,50,tab0_hwnd, 0, tab_hinst,0);
    //button = CreateWindow("Button","Save to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,92,100,25,tab0_hwnd,(HMENU)ID_B_SAVE,tab_hinst,0);

    tab1_hwnd = CreateWindowEx(
        0,
        "SysTabControl32",
        "",
        WS_CHILD|WS_CLIPSIBLINGS,
        1, 22, 679, 315,
        tab_hwnd, NULL, tab_hinst, NULL);

    tab2_hwnd = CreateWindowEx(
        0,
        "SysTabControl32",
        "",
        WS_CHILD|WS_CLIPSIBLINGS,
        1, 22, 679, 315,
        tab_hwnd, NULL, tab_hinst, NULL);

    tab3_hwnd = CreateWindowEx(
        0,
        "SysTabControl32",
        "",
        WS_CHILD|WS_CLIPSIBLINGS,
        1, 22, 679, 315,
        tab_hwnd, NULL, tab_hinst, NULL);

    tab4_hwnd = CreateWindowEx(
        0,
        "SysTabControl32",
        "",
        WS_CHILD|WS_CLIPSIBLINGS,
        1, 22, 679, 315,
        tab_hwnd, NULL, tab_hinst, NULL);

    tie.mask = TCIF_TEXT;
    tie.pszText = "Paths";
    TabCtrl_InsertItem(tab_hwnd, 0, &tie);
    tie.pszText = "Output";
    TabCtrl_InsertItem(tab_hwnd, 1, &tie);
    tie.pszText = "Parameters";
    TabCtrl_InsertItem(tab_hwnd, 2, &tie);
    tie.pszText = "Configurations";
    TabCtrl_InsertItem(tab_hwnd, 3, &tie);
    tie.pszText = "Run";
    TabCtrl_InsertItem(tab_hwnd, 4, &tie);

    if(main_hwnd == NULL) {
        MessageBox(NULL, "Window Creation Failed!", "Error!", MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(main_hwnd, nCmdShow);
    ShowWindow(tab_hwnd, nCmdShow);
    ShowWindow(tab0_hwnd,nCmdShow);
    UpdateWindow(main_hwnd);
    UpdateWindow(tab_hwnd);
    UpdateWindow(tab0_hwnd);
    // Step 3: The Message Loop
    do{
        PeekMessage(&msg, NULL, NULL, NULL, PM_REMOVE);
        /* Translate virtual-key messages into character messages */
        TranslateMessage(&msg);
        /* Send message to WindowProcedure */
        DispatchMessage(&msg);
    } while(msg.message!=WM_CLOSE && msg.message!=WM_QUIT);
    return msg.wParam;
} 
```

我也很好奇`UpdateWindow()`，如果我不画画，我需要打电话给这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:12:26.153

在[WM_CREATE 描述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632619%28v=vs.85%29.aspx)中，我们读到*消息是在函数返回之前发送的*。

因此`WM_CREATE`for`main_hwnd`总是发生在`tab0_hwnd`分配之前。

现在让我们看看您的代码处理`WM_CREATE`：

```
if(tab0_hwnd!=NULL)
   /* you would create the button here, but it does not happen. */ 
```

现在，如果`tab0_hwnd`is产生错误消息`NULL`而不是默默地忽略错误不是更好吗？

*这不一定是代码的唯一问题，但如果没有可编译*的示例，我不会更进一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:13:49.037

在创建窗口之前运行的`WM_CREATE`情况下创建按钮的调用。 在它调用窗口类之前不会返回，所以你的代码顺序是这样的：`WndProc``tab0_hwnd``CreateWindow``WndProc``WM_CREATE`

1.  创建主窗口：`main_hwnd`
2.  在 WM_CREATE 的情况下运行代码`WndProc`
3.  创建选项卡控件`tab_hwnd`
4.  创建选项卡控件`tab0_hwnd`

因此，您需要重新排序代码，以便在创建选项卡之前不会创建按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-01T19:16:13.917

也许你失踪了`WS_VISIBLE`？它是必需的，否则您将看不到它。

# mysql - SQL QUERY-在 GROUP BY 中使用时，多个 COUNT 返回错误（相同）的结果

> ID：14364771
> 
> 赞同：1
> 
> 时间：2013-01-16T18:01:08.483
> 
> 标签：mysql, select, count, group-by

我将简化这一点：

我有两个可以正常工作的 SQL 表达式：

第一的：

```
select count(*) as number1
 from T1
where DATE1>'2012-01-01' and DATE2<'2012-12-31' 
```

结果：13

```
select  count(*) as number2 
from T1
where DATE3>DATE2 and CURDATE()>DATE2 
```

结果：5

但是当我尝试在 GROUP BY 中插入这两个 COUNTS 时，我得到的结果总是 13 ！！！

```
SELECT NAME,
 COUNT(case when DATE1>'2012-01-01' and DATE2<'2012-12-31' then 1 else 0 end) as number1, 
COUNT (case when (DATE3>DATE2 and CURDATE()>DATE2) then 1 else 0 end) as number 2
from T1 
```

我得到的结果是：

```
NAME  NUMBER1  NUMBER2
A       5         5
B       4         4
C       4         4 
```

但我应该得到：

```
NAME  NUMBER1  NUMBER2
A       5         4
B       4         0
C       4         1 
```

这样列的总和为 13 和 5，就像前两个查询一样。我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:23:02.437

`COUNT(expression)`不计入空表达式。您可以通过更改`ELSE 0`to`ELSE NULL`或删除它来修改您的查询（`ELSE NULL`隐含在`CASE`表达式中）：

```
SELECT name,
    COUNT(CASE WHEN date1 > '2012-01-01' AND date2 < '2012-12-31' 
              THEN 1 END
         ) AS number1, 
    COUNT(CASE WHEN date3 > date2 AND CURDATE() > date2 
              THEN 1 END
         ) AS number2
FROM T1 
GROUP BY name ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:05:32.843

尝试：

```
SELECT NAME,
(select count(*) from T1 where DATE1>'2012-01-01' and DATE2<'2012-12-31') AS number1,
(select count(*) from T1 where DATE3>DATE2 and CURDATE()>DATE2) AS number2
FROM T1
GROUP BY NAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:21:24.867

尝试这个：

```
SELECT name, 
       SUM(CASE WHEN DATE1>'2012-01-01' AND DATE2<'2012-12-31' THEN 1 ELSE 0 END) AS number1, 
       SUM(CASE WHEN (DATE3>DATE2 AND CURDATE()>DATE2) THEN 1 ELSE 0 END) AS number2 
FROM T1 GROUP BY name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T18:03:35.937

此处不要使用计数。使用 Sum。如果要使用计数，则将 null 放入 else 而不是 0

# tfs - 将解决方案检查到 TFS 中，引用在第二台机器上中断

> ID：14364772
> 
> 赞同：0
> 
> 时间：2013-01-16T18:01:08.767
> 
> 标签：tfs, asp.net-4.5

我一直在开发一个 Web 应用程序（ASP.NET 4.5 Web 窗体），然后将其添加到 TFS 以使客户端可以访问源代码。我将它添加到 TFS 没有问题，但是当我在另一台机器（而不是我开发的机器）上测试 TFS 是否正常工作时，我遇到了一堆关于 EntityFramework 等基本内容的参考错误， Microsoft.ScriptManager、System.Web.Optimization。客户在退房时遇到了同样的问题。

问题是，如果我在这台机器上创建一个新的 Web 应用程序项目，它具有所有相同的引用，但它们工作正常。

我已经看到建议将实际的 DLL 添加到 /lib 文件夹中的项目中，然后引用它们，但我认为这不是这些基本的内置程序集的正确做法。

还有一件事——当我发布到 Azure 时，它​​工作得很好。

有什么线索可以让这些参考文献正常工作吗？

完整的参考文献列表：

```
- AspNet.ScriptManager.jQuery
- AspNet.ScriptManager.jQuery.IO.Combined
- EntityFramework
- Microsoft.AspNet.Membership.OpenAuth
- Microsoft.Aspnet.Web.Optimization.WebForms
- Microsofot.ScriptManager.MSAjax
- Microsoft.ScriptManager.WebForms
- System.Web.Optimization 
```

编辑：我终于弄明白了。显然，甚至这些关键程序集也会生成到项目所在的“包”文件夹中。我将此文件夹添加到源代码管理中，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:18:10.887

右键单击其中一个引用（在您的机器上）选择属性，然后检查程序集所在位置的完整路径。

如果它们位于解决方案下名为 packages 的文件夹中，则它们是未内置在程序集中的 NuGet 包。这意味着您要么需要将包文件夹检查到源代码管理中，要么右键单击解决方案并启用包还原模式。

如果它们是程序文件，那么它们也不是真正内置在程序集中的，它们很可能是由您安装在该机器上的其他东西安装的。

# spring - JPA(OpenJPA) 在多个数据源上搜索时非常慢

> ID：14364774
> 
> 赞同：0
> 
> 时间：2013-01-16T18:01:20.987
> 
> 标签：spring, jakarta-ee, jpa, ejb, openjpa

我们有一个在 OpenJPA/Oracle 上运行的 Spring 应用程序。它需要处理三个persistenceUnit，但所有三个都在同一个oracle实例上，因此每个单元的事务类型为“RESOURCE_LOCAL”。

问题是，当使用非常基本的方法执行搜索时`finder`，例如按部门搜索员工（不是主键，也没有索引，但员工表只有一千条记录），响应结果需要很长时间。在 SQLplus 上，相同的查询只需要 0.089 秒。因此，打开此线程以讨论问题的主要原因以及可能的解决方案是什么？

提前致谢。

# asp-classic - 如何判断网络访问者是否是机器人

> ID：14364776
> 
> 赞同：2
> 
> 时间：2013-01-16T18:01:30.927
> 
> 标签：asp-classic, robot, server-variables

在 ASP 网站上，有没有办法判断访问者是否是机器人？

我认为`ServerVariables`集合中可能有一个可以使用的参数，其方式类似于`HTTP_X_FORWARDED_FOR`并且`REMOTE_ADDR`可以用于获取访问者的 IP 地址。

迄今为止，谷歌上的搜索几乎没有产生什么线索。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:03:41.923

没有防弹方法，因为标题和来源可以被欺骗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:06:14.270

我的建议是尝试

```
HTTP_USER_AGENT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:40:44.640

如果访问者访问 robots.txt，则很可能是蜘蛛。如果主机或用户代理信息中没有任何内容，或者访问中没有引用 URL 或 IP 地址更改，或者如果日志行一起出现在日志文件中的不间断块中，则很可能是机器人流量。

谢谢

# asp.net-mvc-3 - asp.net mvc 3 应用程序中的默认 sessionState 是什么？

> ID：14364779
> 
> 赞同：6
> 
> 时间：2013-01-16T18:01:49.980
> 
> 标签：asp.net-mvc-3, web-config, session-state

我正在考虑使用`<sessionState mode="InProc" timeout="45" />`，因为有些用户重复登录，我想为他们节省一些时间。但是，在我将它添加到我的`web.config`文件之前，我想确保不会有副作用。

我阅读了`sessionState`版本，虽然我已经相当了解发生了什么，但我很想知道应用程序的默认设置是什么，因为此时我的内部`asp.net mvc 3`没有定义。`sessionState``system.web`

我知道应用程序可以在`Session["key"]`没有声明的情况下访问，尽管我尽量避免将这种类型的负载放在 Session 上。我假设我的应用程序正在继承 IIS 7 中的一个设置（此应用程序位于共享托管环境中）。

我知道如果我为会话使用专用数据库或服务器可能会出现问题，但这只是一个基本设置，没什么特别的。

`sessionState`asp.net mvc 3有默认设置吗？只是遗传吗？`web.config`如果在 IIS 的其他地方定义了它，是否会因为在 my 中覆盖它而产生副作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:25:37.573

截至目前，默认值`Timeout`= 20 分钟。

[这些](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)是 .Net Framework 4 的默认值。我认为它们不会因为 MVC 3 而改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T14:25:14.950

接受的答案是正确的，但可能 OP 实际上是要询问身份验证超时，即 30 分钟。

我知道这很旧，但重要的是要澄清会话状态与身份验证无关。OP 没有说明正在使用哪种形式的身份验证。假设表单身份验证，则默认超时为 30 分钟，并`<authentication...<forms`在 web.config 中的元素中进行控制。我发现在使用进程内会话时，最好将您的身份验证超时设置为小于会话超时。我倾向于使用进程外会话作为首选项，因为它保留了来自应用程序池回收的会话数据。

# qt - GDB 调试警告

> ID：14364781
> 
> 赞同：3
> 
> 时间：2013-01-16T18:01:53.990
> 
> 标签：qt, gdb, libc

当我尝试在 Qt 中或直接从终端通过 gdb 调试我的核心转储时，它给了我一堆如下所示的警告。因此我的回溯无法正常工作。

> 警告：无法找到与inferior线程库匹配的libthread_db，将无法进行线程调试。
> 
> 警告：无法找到与inferior线程库匹配的libthread_db，将无法进行线程调试。
> 
> 警告：无法为 ) 加载共享库符号。你需要“set solib-search-path”还是“set sysroot”？

这是因为我的可执行文件是在没有调试符号的情况下构建的，还是 glibc 的问题？你有什么解决方案来解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:52:28.937

> 这是因为我的可执行文件是在没有调试符号的情况下构建的，还是 glibc 的问题？

这与您的可执行文件无关。

GDB 需要一个`libthread_db.so.1`与您的 匹配的版本，但`libpthread.so.0`没有找到这样的版本。

可能的原因（从最可能到最不可能）：

*   你已经剥离了 libpthread.so.0 （*不要那样*做）。
*   您已升级 glibc，但升级不完整且未更新`libthead_db.so.1`
*   您正在使用某种交叉编译环境，并且确实*需要*或`set solib-search-path`这样`set libthread-db-search-path`GDB 才能找到匹配的`libthread_db.so.1`

你可以看到`libthread_db`GDB 的哪个版本正在尝试使用`set debug libthread-db 1`.

# .net - 如何在 Web 服务中传递复杂对象以供所有客户端使用

> ID：14364782
> 
> 赞同：0
> 
> 时间：2013-01-16T18:01:56.033
> 
> 标签：.net, web-services

我需要在 .net 中创建一个 Web 服务，允许客户端将复杂的应用程序信息传递到服务中。该服务将验证所有信息，然后将信息输入数据库或向客户端返回错误列表，以便他们可以更正并重新提交应用程序。

Web 服务需要能够被任何客户端使用（意味着 java、php .net ...）

如果我只使用 .net 客户端，我可以将我的类对象作为公共类提供给客户端，并且它们可以访问对象中的所有属性、枚举和结构。如 ：

```
' Add Personal info and set property
  tempPersonalClass = New IDVerifyWebService.clsPersonal 
```

在上面的示例中，clsPersonal 类可以包含多个属性、枚举甚至子类。客户端应该能够实例化这个类并迭代所有级别。

我的问题是我可以以什么方式（XML、JSON 或其他类型）将我的类对象传递给客户端，以便他们能够使用它来填充值并返回它？

# ruby-on-rails - Rails - 在加入时放置条件包含

> ID：14364790
> 
> 赞同：0
> 
> 时间：2013-01-16T18:02:31.057
> 
> 标签：ruby-on-rails, join, rails-activerecord

我正在使用 Rails 3.2.9 并尝试将表的所有结果返回到由联接上的 department_id 过滤的`categories`表的任何匹配结果。`incomes`SQL 查询相当简单：

```
SELECT * FROM categories LEFT OUTER JOIN incomes ON incomes.category_id = categories.id AND dept_id = 86 
```

现在我已经能够通过以下方式达到预期的结果`joins`：

```
Category.joins('LEFT OUTER JOIN incomes ON incomes.category_id = categories.id AND incomes.dept_id = 86') 
```

但我不知道为什么我不能让它与`include`. 以下是我的模型：

**类别**

```
class Category < ActiveRecord::Base
  attr_accessible :cat_code, :cat_ds
  has_many :incomes, :conditions => ['dept_id = ?', 86]                   
end 
```

**收入**

```
class Income < ActiveRecord::Base
  attr_accessible :category_id, :year_id,:dept_id, :note
  belongs_to :category
end 
```

我尝试了许多不同的方法来获得所需的结果，但我将用上述模型说明我最近的尝试。

```
@cat_inc = Category.find(:all, :include => [:incomes]) 
```

但是我`undefined method each for nil:NilClass`在尝试`debug(@cat_inc)`

我很困惑为什么上面没有产生上面的 SQL 语句。有任何想法吗？

**编辑** 也许是一种更好的表达方式，我怎样才能有条件加入？就像上面的 SQL 语句有：`AND dept_id = 86`

我能得到的最接近的是：

```
Category.includes(:incomes).where("incomes.dept_id = ?", 86) 
```

这给了我 LEFT OUTER JOIN 但在`AND dept_id = 86`加入后执行条件。

```
SELECT "categories"."id" AS t0_r0, "categories"."cat_code" AS t0_r1, "categories"."cat_ds" AS t0_r2, "incomes"."id" AS t1_r0, "incomes"."category_id" AS t1_r1, "incomes"."year_id" AS t1_r2, "incomes"."chart_id" AS t1_r3, "incomes"."dept_id" AS t1_r4, "incomes"."note" AS t1_r5, "incomes"."jan" AS t1_r6, "incomes"."feb" AS t1_r7, "incomes"."created_at" AS t1_r8, "incomes"."updated_at" AS t1_r9 FROM "categories" LEFT OUTER JOIN "incomes" ON "incomes"."category_id" = "categories"."id" WHERE (incomes.dept_id = 86) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:25:51.567

我认为 has_many 应该有复数的类词。查看[Rails 指南](http://guides.rubyonrails.org/association_basics.html)

# java - 错误：公共类型 TodoListItemView 必须在其自己的文件中定义。安卓。蚀

> ID：14364796
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:03:08.077
> 
> 标签：java, android, xml

错误：公共类型 TodoListItemView 必须在其自己的文件中定义。（行`public class TodoListItemView extends TextView {`：）

```
 package com.kisinivan.todolist;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.widget.TextView;

public class MainActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);
          ListView myListView = (ListView)findViewById(R.id.myListView);
          final EditText myEditText = (EditText)findViewById(R.id.myEditText);
          final ArrayList<String> todoItems = new ArrayList<String>();
        final ArrayAdapter<String> aa;
        aa = new ArrayAdapter<String>(this,
                                      android.R.layout.simple_list_item_1,
                                      todoItems);
        myListView.setAdapter(aa);
           myEditText.setOnKeyListener(new OnKeyListener() {
             public boolean onKey(View v, int keyCode, KeyEvent event) {
               if (event.getAction() == KeyEvent.ACTION_DOWN)
                 if (keyCode == KeyEvent.KEYCODE_ENTER){
                   todoItems.add(0, myEditText.getText().toString());
                   aa.notifyDataSetChanged();
                   myEditText.setText("");
                   return true;
                 }
               return false;
        } });
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

}

public class TodoListItemView extends TextView {
      public TodoListItemView (Context context, AttributeSet ats, int ds) {
        super(context, ats, ds);
        init();
    }
      public TodoListItemView (Context context) {
        super(context);
        init();
    }
      public TodoListItemView (Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
      private void init() {
      }
      @Override
      public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:07:56.047

Eclipse 正在应用一个*可选*的（但非常常见的）限制。来自 Java 语言规范，[第 7.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.6)：

> 当且仅当包存储在文件系统中（第 7.2 节）时，如果在由类型名称组成的名称下的文件中未找到类型，则主机系统可能会选择强制执行它是编译时错误的限制如果满足以下任一条件，则加上扩展名（例如 .java 或 .jav）：
> 
> *   该类型由声明该类型的包的其他编译单元中的代码引用。
>     
>     
> *   该类型被声明为公共的（因此可以从其他包中的代码中访问）。

修复很简单......其中之一：

*   将课程设为非公开
*   使其成为嵌套类型（例如 within `MainActivity`）
*   将它放在自己的文件中，名称与类的名称匹配

除非您要嵌套它，否则*即使*您也将其设为非公开，我也会将其移动到自己的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:05:21.917

Eclipse 不喜欢你创建一个类，除非它有自己的文件。只需制作另一个名为 TodoListItemView 的文件并将您的课程放在那里。或者，如果您仅在一项活动中使用该类，则可以将其设为私有。

感谢 Jon skeet，我现在知道你也可以这样做

如果你想要一个公共课程，你仍然可以通过将它放在你的活动中来制作一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:06:02.717

不同的类需要在自己的文件中定义。在同一个文件中定义两个类是行不通的。

# mysql - 将一个表中的多行分配给第二个表中的单元格（MySQL）

> ID：14364806
> 
> 赞同：0
> 
> 时间：2013-01-16T18:03:52.903
> 
> 标签：mysql, normalization, multiple-value

好的，所以我们有`Table 1`(T1) 和`Table 2`(T2)

结构：

```
T1 (main table):
ID (Auto-Increment)
Name
Properties

T2 (properties table):
ID
Property Name 
```

假设`table 1`有两个条目。`Table 2`有4个属性。我想要做的是将条目 1 in 的属性设置`table 1`为映射到属性 1、2 和 3 in `table 2`。对于表 1 中的条目 2，我想将其映射到表 2 中的属性 2、3 和 4。

例如，假设我们有两个产品，一个 BALL 和一个 CUBE。这些将列在`table 1`. 现在假设`table 2`拥有所有可用的颜色。

```
Table 2:
ID COLOR
1  RED
2  BLUE
3  GREEN
4  YELLOW

Table 1:
ID NAME AVAILABLE_COLORS
1  BALL (TABLE 2 ENTRY 1, TABLE 2 ENTRY 2, TABLE 2 ENTRY 3, in other words RED BLUE GREEN)
2  CUBE (TABLE 2 ENTRY 2, TABLE 2 ENTRY 3, TABLE 2 ENTRY 4, in other words BLUE GREEN YELLOW) 
```

我如何让可用颜色指向颜色表？基本上我想确保如果我更改一个属性（比如颜色红色->黑色），它会自动更改所有表 1 条目。

通常，如果我只需要为一个项目分配一种颜色，并且该颜色不能在另一个项目中使用，我只需在`table 2`“属于”或类似的内容中添加一个列，这样我就可以将多种颜色设置为匹配中的相同条目`table 1`，但是，我只能以这种方式为一个条目分配颜色...我不能将每个说红色分配给球和立方体。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:23:12.560

我通常做的是创建第三个表来跟踪哪些产品有哪些颜色。比方说一个目录表。它只存储一个主 ID、产品 ID 和颜色 ID。

```
Table 3:  Catalog
ID ColorsID ProductsID
1 1 1  // row one connects with colors and products and this is a red ball 
2 2 1  // blue ball
3 1 2  // red cube
4 4 2  // yellow cube 
```

通过这种方式，您可以根据需要将尽可能多的属性连接到产品。它需要更多的工作来跟踪您的目录，但从长远来看会使事情变得更容易。从产品中删除可用颜色，并仅将产品 ID 和产品名称存储在该表中。任何其他标准的描述，不一定会随颜色而变化。这样，如果您将可用颜色从 3 更改为 10，则无需添加新字段进行跟踪。您还可以获取目录并添加额外的字段，例如跟踪产品当前是否有该颜色的有效或库存。在目录中，您还可以存储库存编号。如果您的价格因颜色而异怎么办？白球更便宜？数据正常的所有充分理由。

规范化是为了确保每个表都有唯一的最小字段并摆脱依赖关系。查看这个公认的答案，以便在理论水平上很好地解释归一化。 [MYSQL 中的规范化](https://stackoverflow.com/questions/1258743/normalization-in-mysql)

然后，您可以使用 JOINS 将它们全部连接起来以遍历目录表。

```
SELECT Colors.ColorID as Color, Products.ProductID as Product
FROM Catalog
    INNER JOIN Colors
        ON Catalog.ColorsID = Colors.ColorID
    INNER JOIN Products 
        ON Catalog.ProductsID = Products.ProductID 
```

更多关于 JOINS 的信息可以在这里找到 - [http://en.wikipedia.org/wiki/Join_%28SQL%29](http://en.wikipedia.org/wiki/Join_%28SQL%29)

# .net - 在 Silverlight 5.0 中使用 Async Targeting Pack 时缺少异常堆栈跟踪信息

> ID：14364807
> 
> 赞同：1
> 
> 时间：2013-01-16T18:03:54.810
> 
> 标签：.net, silverlight-5.0, stack-trace, async-await

我在 Silverlight 5.0 应用程序中使用 Async Targeting Pack。当某些异步方法中发生未处理的异常时（假设来自异步“状态机”），异常的堆栈跟踪仅包含：

在 System.Runtime.CompilerServices.AsyncMethodBuilderCore.b__0（对象状态）

结束而不是任何其他代码位置。

# mysql - SQL查询错误#1064

> ID：14364809
> 
> 赞同：0
> 
> 时间：2013-01-16T18:03:55.283
> 
> 标签：mysql, sql, database

这是我写的查询：

```
SELECT students.name, subjects.sub
FROM students INNER JOIN (subjects INNER JOIN test ON subjects.IDsub = test.IDsub) ON  students.IDstu = test.IDstu
WHERE ((test.date)=#1/21/2013#); 
```

每次执行此查询时，我都会收到以下消息：

> '#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 'LIMIT 0, 30' 附近使用正确的语法

我认为问题出在日期格式上，因为如果我执行这个：

```
SELECT students.name, subjects.sub
FROM students INNER JOIN (subjects INNER JOIN test ON subjects.IDsub = test.IDsub) ON students.IDstu = test.IDstu
WHERE ((test.IDsub)=4); 
```

一切正常！

数据库中有 3 个表：“students”、“test”、“subjects”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:07:00.830

日期应该是这样的，即而不是`#`利用`'`

```
SELECT students.name, subjects.sub
FROM students INNER JOIN 
(subjects INNER JOIN test ON subjects.IDsub = test.IDsub) 
  ON  students.IDstu = test.IDstu
WHERE ((test.date)='1/21/2013'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:08:11.677

[str_to_date](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

```
SELECT students.name, subjects.sub
FROM students INNER JOIN (subjects INNER JOIN test ON subjects.IDsub = test.IDsub) ON  students.IDstu = test.IDstu
WHERE ((test.date)=str_to_date('1/21/2013'); 
```

我看到的另一个问题是使用井号`#`不是在 mysql 中创建字符串查找的有效方法。你想使用单引号`'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:10:13.317

PhpMyAdmin 为每个命令添加一段 SQL 以限制返回的记录数。

```
LIMIT 0, 30 
```

我会从查询末尾删除分号，否则，SQL 会认为这个额外的片段是另一个查询。

```
WHERE ((test.date)=#1/21/2013#) 
```

另外，我从未见过这样`#`的查询中使用的符号，您可能在那里遇到问题。

编辑：根据其他所有人（忽略实际 SQL 错误...）的说法，`#`无效，请改用引号。

另一个编辑：实际上，这个`#`符号似乎是有效的。

[选择带有日期条件的查询](https://stackoverflow.com/questions/4183180/select-query-with-date-condition)

# c# - 当一个动作完成时，如何在 ASP.NET MVC 中将某人从一个动作重定向到另一个动作？

> ID：14364814
> 
> 赞同：0
> 
> 时间：2013-01-16T18:04:13.550
> 
> 标签：c#, asp.net, asp.net-mvc, azure

在我的 webapp（正在进行中）中，我现在尝试让新客户注册到我的 webapp。我在 Azure 中部署。

我正在研究的想法：

**www.[mysite].com/Register**

该注册页面允许“新”用户注册他的新租户。

**客户。[mysite].com/Register**

这在代码中几乎如下所示

```
 public ActionResult Register()
    {
        var url = Request.ServerVariables["HTTP_HOST"];
        var tenantNameParser = new TenantNameParser(url);

        if (!TenantRepository.Exists(tenantNameParser.TenantName))
        {
            return RedirectToAction("NewCustomer");
        }

        return View();
    } 
```

在上面的代码片段中，我检查租户是否存在，如果不存在，则重定向到新客户。

```
 [HttpPost]
    public ActionResult NewCustomer(Customer model)
    {
        if (ModelState.IsValid)
        {
            var tenant = new Tenant
                {
                    Name = model.TenantName,
                    Guid = Guid.NewGuid().ToString()
                };

            TenantRepository.Add(tenant);
            // TODO create a new user new tenant repository to do this stuff as 1 atomic action

            if (!UserRepository.Exists(model.AccountableEmailAddress))
            {
                // Attempt to register the user
                var createStatus = MembershipService.CreateUser(
                    model.AccountableUser,
                    model.Password,
                    model.AccountableEmailAddress);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    FormsService.SignIn(model.AccountableUser, false);
                    return RedirectToAction("Index", "Home");
                }

                throw new Exception("crappy implemenation, improve");
            }
            FormsService.SignIn(model.AccountableUser, false);

            // TODO figure out how to redirect to tenant.site.com
            return RedirectToAction("Index", "Home");
        }

        return View(model);
    } 
```

上面的代码创建了一个新客户，最后我的 //todo 就是这个问题的内容。如何以tenant.domain.com 的形式重定向到包含实际租户的URL？

我不知道这种“处理租户的方式”是否是一种不好的做法，如果是，请随意说。

问题：如何重定向到租户 URL ([tenantname.[mysite].com/Index/Home)。像： Redirect("tenantname", "Index", "Home") 会很棒，但当然不存在。我用谷歌搜索了一下，但没有遇到有用的链接（这主要是我认为我设计“错误的东西”的原因）。

建议会很棒！非常感谢您提前考虑！

如果我因为不清楚我的要求而需要重新措辞，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:09:15.300

只是我的2美分，如果错了，请纠正我。

我的理解是，您无法在代码中控制 [tenant name].yoursite.com 中的租户名称，因为它超出了 ASP.NET MVC 的范围。它是域名 yoursite.com 的 CNAME。所以下面我的一些想法。

1.  我猜你需要一个可编程的域提供者，这意味着你可以从你的代码中创建 CNAME。然后，当新客户注册时，实际 URL 可能是 yoursite.com/[租户名称]/。然后将其映射到新的 CNAME [租户名称].yoursite.com。

2.  我不确定 URL 重写是否可以帮助您。这意味着您创建一个新规则，如果传入的 URL 是 [tenant name].yoursite.com，则将其映射到 yoursite.com/[tenant name]/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:13:00.120

为此，您需要查看 ASP .NET MVC 的[域路由](http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx)。

# c# - 会员提供商使用情况

> ID：14364821
> 
> 赞同：0
> 
> 时间：2013-01-16T18:04:32.393
> 
> 标签：c#, asp.net, asp.net-membership, membership-provider

我有我的会员提供者。我的应用程序包含几个项目 - UI、DAL、Services、BusinessLogic。如果我在 UI 项目中使用 Membership.GetUser() 函数，那么我会得到当前登录用户的实例。如果我在服务项目中编写相同的代码，我会得到空值。有人可以建议我可能的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:18:54.633

我总是依赖，`Membership.GetUser(username)`因为也经历过`.GetUser()`回归`null`。我假设你有你的服务层引用`System.Web`命名空间，否则你必须现在做。

我的回答没有告诉你为什么会发生这种情况，但我希望你能有其他选择。`Membership.GetUser()`而不是在 UI (.aspx)中使用which works，而是使用 this

```
string currentUsername = HttpContext.Current.User.Identity.Name;
MembershipUser currentUser = Membership.GetUser(currentUsername); 
```

我相信这应该有效。

# javascript - 带有“HTML 自定义”类型标签的 Google 跟踪代码管理器无法识别服务器变量

> ID：14364825
> 
> 赞同：0
> 
> 时间：2013-01-16T18:04:52.773
> 
> 标签：javascript, google-analytics, google-tag-manager

我想在我的网页上放置一个 GTM 容器，只是为了添加脚本而不修改我的页面的 html（我将不再拥有访问权限）。

1）目前，我只是将 GTM 代码放在后面，在我的 GTM 帐户上创建了一个标签（标签类型 = GA），添加了我的 GA 帐户的 UA-XXXXX-Y：它的工作，我可以从我的 GA 帐户中看到访问。

2）然后，我尝试更改在 GTM 上创建的标签的类型：我选择自定义 HTML 类型，然后输入 GA 给出的代码（使用正确的 UA）

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-Y']);
_gaq.push(['_setDomainName', 'example.com']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

它也可以，我看到来自 GA 界面的访问

3）我想修改GA给出的代码，特别是添加带有参数的trackPageview（使用服务器变量，这是我的问题......）

所以我只是修改了我在 2) 中使用的代码，只需添加：

```
_gaq.push(['_trackPageview', '/Page1/$!{VAR}/Page2/$']); 
```

它不起作用。

我做错什么了吗？我应该使用宏吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:07:26.180

服务器端变量不适用于 GTM（因为代码是通过 javascript 从不同的服务器插入的）所以是的，宏是要走的路。

创建一个数据层（在 GTM 标记之前的开始正文标记之后插入的 JSON 变量：

```
<script>
dataLayer = [{    
    'myVar': '{VALUE INSERTED BY SERVER }'

}];
</script> 
```

现在您可以在 GTM ( "{{myVar}}" ) 中将 myVar 作为宏访问：

```
_gaq.push(['_trackPageview', '{{myVar}}']); 
```

这也适用于 GTM 中的 GA 标签模板（有一个插入虚拟 url 的选项，您可以在那里使用宏）。

# ruby-on-rails - 使用 link_to 将对象添加到 HABTM 关系表中

> ID：14364827
> 
> 赞同：0
> 
> 时间：2013-01-16T18:04:58.447
> 
> 标签：ruby-on-rails, has-and-belongs-to-many, link-to

在我的应用程序中，我有列表对象和问题对象，列表由问题组成，问题可以属于许多列表。我在两个类上都使用了 HABTM，并且我已经创建了他们的连接表，如下所示：

```
class AddTableListsProblems < ActiveRecord::Migration
  def up
    create_table :lists_problems, :id => false do |t|
    t.references :list
    t.references :problem
    t.timestamps
end
  end

  def down
    drop_table :lists_problems
  end
end 
```

现在，在我的列表的显示视图中，我打算显示所有问题的列表并提供一个“link_to”来将此问题添加到当前显示的列表中，但我似乎无法弄清楚如何去做。我是 RoR 的新手，所以解决方案可能很简单，尽管我似乎无法绕过它。

这是我目前拥有的代码。

```
 <% @problems.each do |problem| %>
      <%= render problem %>
          | <%= link_to "Add to current list", <How do I access the List.problems method to add the problem and create a relation?> %>
    <% end %> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:19:59.173

假设你有一个`ListController`. 您将为其添加一个`add_problem`操作。

```
def add_problem
  list    = List.find(params[:id])
  problem = Problem.find(params[:problem_id])

  list.problems << problem # This appends and saves the problem you selected

  redirect_to some_route # change this to whatever route you like
end 
```

您需要为此创建一条新路线。假设您正在使用资源丰富的路线，您可能会有类似的东西

```
resources :list do
  member do
    put "add-problem/:problem_id", action: :add_problem, as: :add_problem
  end
end 
```

这将生成以下路线

```
add_problem_list PUT    /list/:id/add-problem/:problem_id(.:format)    list#add_problem 
```

在你看来，你会改变你的`link_to`

```
<% @problems.each do |problem| %>
  <%= render problem %>
      | <%= link_to "Add to current list", add_problem_list_path(list: @list, problem_id: problem.id), method: :put %>
<% end %> 
```

* * *

**注意**这只是一个例子；您想在该`add_problem`方法中进行授权/验证/等...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:15:39.557

查看[rails source 中的示例](https://github.com/rails/rails/blob/master/activerecord/test/models/lesson.rb)，您似乎只需要创建一个新的`Problem`并将其添加到`List.problems`数组中，然后保存/更新`List`.

# android - Achartengine 自动跟随 - y 轴上的额外空间

> ID：14364832
> 
> 赞同：1
> 
> 时间：2013-01-16T18:05:20.720
> 
> 标签：android, diagram, achartengine

我是 achartengine 的新手，我喜欢它。很好！

我正在使用带有动态添加点的折线图。如果我不碰它，自动缩放和跟随功能就可以正常工作。但是我想在 y 轴顶部有一些额外的空间（见截图）。我怎样才能做到这一点？我不希望这些点触及图表的上边缘。

这是我的代码：

```
public Linegraph() {
        mDataset.addSeries(dataset);

        renderer.setColor(Color.BLUE);
        renderer.setPointStyle(PointStyle.TRIANGLE);
        renderer.setFillPoints(true);

        // enable zoom
        mRenderer.setZoomButtonsVisible(true);
        mRenderer.setXTitle("Value #");
        mRenderer.setYTitle("Value");
        mRenderer.setLabelsTextSize(25);
        mRenderer.setLegendTextSize(25);
        mRenderer.setChartTitleTextSize(25);
        mRenderer.setAxisTitleTextSize(25);
        mRenderer.setYLabelsAlign(Align.LEFT);
        mRenderer.setXLabelsColor(Color.RED);
        mRenderer.setYLabelsColor(0, Color.RED);
        mRenderer.addSeriesRenderer(renderer);
        mRenderer.setYAxisMin(-1);
        mRenderer.setXAxisMin(-1);

    }

    public GraphicalView getView(Context context) {
        return ChartFactory.getLineChartView(context, mDataset, mRenderer);
    }

    public void addNewPoint(Point p) {
        dataset.add(p.getX(), p.getY());
    } 
```

手动触摸和移动视图后，如何重新启用自动跟随功能？

**截屏：**

![在此处输入图像描述](../Images/19dfb68acd65dd8758b3cc2c806e729a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:43:36.707

一个选项是始终知道数据范围并将可见区域设置为包含范围并添加一些小空间的内容。例如，如果 X 轴上的数据范围在 0 到 100 之间，Y 轴上的数据范围在 5 到 10 之间，那么这样的事情会很好：

```
renderer.setXAxisMin(-0.5);
renderer.setXAxisMax(100.5);
renderer.setXAxisMin(4.75);
renderer.setXAxisMax(10.25); 
```

对于第二个问题：

```
renderer.initAxisRange(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T10:33:58.017

至于我对你的问题的理解，你应该给出泛限制

`mRenderer.setMargins(new int[] { 60, 120, 60, 60 });`

# c# - DataGridView 排序抛出异常：控件必须绑定到 IBindingList

> ID：14364852
> 
> 赞同：2
> 
> 时间：2013-01-16T18:06:36.747
> 
> 标签：c#, winforms, entity-framework, sorting, datagridview

我正在使用实体框架 (EF)，并且`BindingList`可以从上下文中获取一个（使用[DbExtensions.ToBindingList](http://msdn.microsoft.com/en-us/library/gg696575%28v=vs.110%29.aspx)方法），并且我有一个带有`DataGridView`.

目的是在 上显示 EF 表的内容，因此我*在表单的构造函数中*`DataGridView`有以下代码将's设置为 a和 that 's到from EF：*`DataGridView``DataSource``BindingSource``BindingSource``DataSource``BindingList`*

 *```
categoryBindSrc.DataSource = _context.Categories.Local.ToBindingList();
categoryDataGrid.Sort(categoryDataGrid.Columns["categorySortIdColumn"], ListSortDirection.Ascending); 
```

在此之前，在 Form 生成的代码中，存在以下几行：

```
categoryDataGrid.DataSource = categoryBindSrc;
categorySortIdColumn.DataPropertyName = "SortId"; 
```

这段代码在表单的构造函数中，但是当我运行它时，我得到以下异常（我截断了堆栈跟踪）：

```
System.InvalidOperationException was unhandled
HResult=-2146233079
Message=DataGridView control must be bound to an IBindingList object to be sorted.
Source=System.Windows.Forms
StackTrace:
    at System.Windows.Forms.DataGridView.SortDataBoundDataGridView_PerformCheck(DataGridViewColumn dataGridViewColumn)
    at System.Windows.Forms.DataGridView.SortInternal(IComparer comparer, DataGridViewColumn dataGridViewColumn, ListSortDirection direction)
    at System.Windows.Forms.DataGridView.Sort(DataGridViewColumn dataGridViewColumn, ListSortDirection direction) 
```

据我了解，`BindingList`确实实施`IBindingList`了，所以这不应该是问题。[Sort](http://msdn.microsoft.com/en-us/library/vstudio/0868ft3z.aspx)方法说`DataGridView`必须是数据绑定的（它是）并且设置了按列排序的属性`DataPropertyName`（它是）*这导致列的`IsDataBound`属性返回 true（调试时它在监视窗口中显示为 false）*

似乎问题在于`IsDataBound`没有得到更新，但我不知道`SortDataBoundDataGridView_PerformCheck`确切检查什么（引发异常的方法），或者为什么`IsDataBound`不设置。

我试图提供您理解问题所需的所有代码，但如果您需要更多代码，请告诉我。我还检查了几个关于 S/O 的相关问题——没有一个答案有帮助。

**编辑：**看来我可以从构造函数以外的任何其他方法调用 Sort 。这可能是线程问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:23:01.887

看起来该行`categoryBindSrc.DataSource = _context.Categories.Local.ToBindingList();`必须在调用 Sort 时调用另一个尚未完成的线程，因此`SortDataBoundDataGridView_PerformCheck`尚未更新检查的几个属性。

因此，解决方案是在该线程完成后调用该方法。一个很好的放置它的地方是通过覆盖表单的 OnLoad 方法并在那里调用 Sort 来实现在用户看到它们之前对数据成员进行排序的效果。*

# c# - 在 C# 中执行 drush 站点安装

> ID：14364855
> 
> 赞同：1
> 
> 时间：2013-01-16T18:06:58.763
> 
> 标签：c#, windows, drupal-7, windows-server-2008, drush

> **可能重复：**
> [在 C# 中使用 Drush Site-Install](https://stackoverflow.com/questions/14366489/using-drush-site-install-in-c-sharp)

我正在尝试使用 C# 中的 Drush 进行 Drupal 站点安装，作为使用 MSI 的完整 Windows Server 站点安装的一部分。我正在使用的 Drush 命令是

```
C:\ProgramData\Drush\Drush.bat -y si application_name --db-url=sqlsrv://admin_name:password(local)\SQLEXPRESS:/database_name --account-name=admin --account-mail=name@test.com --account-pass=Password1234 --site-mail="admin@company.com" --site-name="Site Name" install_configure_form.site_default_country=GB install_configure_form.date_default_timezone="Europe/London" 
```

当在工作目录（inetpub\application_name）中从 cmd.exe 运行时，这非常有效

当将上述内容放入代码并在安装过程中执行时会出现问题，并且总是导致以下错误（每次使用不同的文件名）

*无法解压 C:\ProgramData\Drush\lib\druFD63.tmp.gz*

用于执行该命令的 c# 代码如下：

```
public static ActionResult Drush_Configuration(Session session)
    {       
        string strArgs = "C:\ProgramData\Drush\Drush.bat -y si application_name --db-url=sqlsrv://admin_name:password(local)\SQLEXPRESS:/database_name --account-name=admin --account-mail=name@test.com --account-pass=Password1234 --site-mail="admin@company.com" --site-name="Site Name" install_configure_form.site_default_country=GB install_configure_form.date_default_timezone="Europe/London";
        string strExeCmd = @"C:\ProgramData\Drush\Drush.bat ";
        strExeCmd = strExeCmd + strArgs;
        string strLocation = @"C:\inetpub\application_name";

        session.Log("Starting Drush Configuration");
        session.Log("Command line is: " + strExeCmd + " " + strArgs);

        int exitCode;
        ProcessStartInfo processInfo;
        Process process;
        try
        {
            processInfo = new ProcessStartInfo("cmd.exe", "/c " + strExeCmd);
            processInfo.WorkingDirectory = strLocation;
            processInfo.WindowStyle = ProcessWindowStyle.Normal;
            processInfo.CreateNoWindow = true;
            processInfo.UseShellExecute = false;
            // *** Redirect the output ***
            processInfo.RedirectStandardError = true;
            processInfo.RedirectStandardOutput = true;

            process = Process.Start(processInfo);
            process.WaitForExit();

            // *** Read the streams ***
            string output = process.StandardOutput.ReadToEnd();
            string error = process.StandardError.ReadToEnd();

            exitCode = process.ExitCode;

            session.Log("output>>" + (String.IsNullOrEmpty(output) ? "(none)" : output));
            session.Log("error>>" + (String.IsNullOrEmpty(error) ? "(none)" : error));
            session.Log("ExitCode: " + exitCode.ToString(), "ExecuteCommand");
            process.Close();
        }
        catch (Exception e)
        {
            session.Log("Error: " + e);
            return ActionResult.Failure;
        }

        session.Log("Drush Configuration completed successfully");
        return ActionResult.Success;
    } 
```

如上所述，这总是会导致“无法解压缩”错误。

有没有人使用过 c# 在 Drush 中运行 Site-Install？有谁知道为什么以这种方式执行时可能会失败？

任何想法或建议将不胜感激。

Drush 版本：Drush-5.8-2012-12-10-Installer-v1.0.20

# sql-server - 存储过程和联合

> ID：14364859
> 
> 赞同：0
> 
> 时间：2013-01-16T18:07:09.160
> 
> 标签：sql-server, stored-procedures, union

我正在为数据验证创建一个非常简单的存储过程。我有几个我希望运行的 sql 语句并简单地显示结果以与源进行比较。我将 sql 语句与 union 组合在一起，但您不能将不同数据类型的列联合在一起。希望有人会对更好的方法提出建议吗？

```
USE [employee_data]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[data_employee]

AS
BEGIN

declare @LtYear as varchar(10)
set @LtYear = '2012'

SELECT 'Sum of total salary for ' + @LtYear as title, sum([Total_Salary]) as Salary
From [employee_data].[dbo].[employee]
where year = @LtYear

UNION
select 'Overall Average Salary ' + @LatestYear as title, avg([Total_Salary]) as     'Average Salary'
From [employee_data].[dbo].[employee]
where year = @LtYear

SELECT 'Employee Name - 1' as title, first_name+' '+last_name 
From [employee_data].[dbo].[employee]
where year = 2012 --@LtYear
and [First_Name] = 'first'
and [Last_Name] = 'last'

UNION
SELECT 'Individual Employee Experience ' + @LtYear as title, cast([work_Exp]as varchar) as 'Work Experience'
From [employee_data].[dbo].[employee]
where year = @LtYear
and [First_Name] = 'first'
and [Last_Name] = 'last' 
```

我想看到如下结果：

总工资总和：50000000
总体平均工资：37000
员工姓名 - 1：
2012 年第一个最后一个个人员工经验：12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:34:28.200

为什么不横向翻转，这样您就不必使用联合，您只需横向扫描数据：

```
SELECT [Year] = @LtYear,
  [Sum of Total Salary] = s.s, 
  [Average Salary] = s.a,
  [Employee Name] = e.first_name + ' ' + e.last_name,
  [Work Experience] = CONVERT(VARCHAR(12), e.work_Exp
FROM employee_data.dbo.employee AS e
CROSS JOIN
(
  SELECT SUM(Total_Salary), AVG(Total_Salary)
  FROM employee_data.dbo.employee
  WHERE [Year] = @LtYear
) AS s(s,a)
WHERE e.[Year] = @LtYear
AND e.First_Name = @first_name
AND e.Last_Name = @last_name; 
```

不确定您是否真的要进行硬编码`'first'`，`'last'`但我怀疑这些作为参数会更好，特别是如果您要多次引用它们。

鉴于您的要求是由 Excel 驱动的，也许可以尝试：

```
DECLARE @y CHAR(4);
SET @y = CONVERT(CHAR(4), @LtYear);

SELECT col1 = 'Sum of total salary for ' + @y, 
  col2 = CONVERT(NVARCHAR(255), sum(Total_Salary) as Salary)
  From employee_data.dbo.employee
  where [year] = @LtYear
UNION ALL
SELECT 'Overall Average Salary ' + @y, 
  CONVERT(NVARCHAR(255), avg(Total_Salary))
  From employee_data.dbo.employee
  where [year] = @LtYear
UNION ALL
SELECT 'Employee Name - 1', 
  CONVERT(NVARCHAR(255), first_name+' '+last_name)
  From employee_data.dbo.employee
  where [year] = @LtYear
  and First_Name = 'first'
  and Last_Name = 'last'
UNION ALL
SELECT 'Individual Employee Experience ' + @y, 
  CONVERT(NVARCHAR(255), work_Exp)
  From employee_data.dbo.employee
  where [year] = @LtYear
  and First_Name = 'first'
  and Last_Name = 'last'; 
```

注意一些变化：

*   删除了所有别名-无论如何，在联合中的第一条语句之后它们都会被忽略。
*   使用显式将第二列转换为希望兼容的数据类型。
*   正确地将所有关键字（例如`year`）括在方括号中。删除了那些不必要的——它们只会使查询更难阅读。
*   创建了 year 参数的字符串版本，以便可以将其附加到第一列而无需执行任何转换。

现在，你已经把问题简化了，还有更多我们看不到的查询。但我仍然认为更好的方法是放弃对基表的联合并以这种方式执行它（特别是如果您对同一个表有 10 或 15 个以上的查询）。这不一定会执行任何不同的操作，但维护起来会容易得多*。*

```
;WITH x AS 
(
  SELECT 
    y = CONVERT(CHAR(4), @LtYear),
    [ss] = CONVERT(NVARCHAR(255), s.s), 
    [as] = CONVERT(NVARCHAR(255), s.a),
    [en] = CONVERT(NVARCHAR(255), e.first_name + ' ' + e.last_name),
    [we] = CONVERT(NVARCHAR(255), e.work_Exp)
  FROM employee_data.dbo.employee AS e
  CROSS JOIN
  (
    SELECT SUM(Total_Salary), AVG(Total_Salary)
    FROM employee_data.dbo.employee
    WHERE [Year] = @LtYear
  ) AS s(s,a)
  WHERE e.[Year] = @LtYear
  AND e.First_Name = @first_name
  AND e.Last_Name = @last_name
)
SELECT 'Sum of total salary for ' + y, [ss] FROM x
UNION ALL
SELECT 'Overall average salary for ' + y, [as] FROM x
UNION ALL
SELECT 'Employee Name - 1', [en] FROM x
UNION ALL
SELECT 'Individual Employee Experience ' + y, [we] FROM x; 
```

除此之外，我认为您的方法首先非常麻烦。您真的是通过将这些查询拼凑在一起并将结果手动粘贴到 Excel 中来执行数据验证吗？当然有一种更自动化的方法可以做到这一点，而不是尝试定制笨拙的 SQL 查询以符合您的流程，您应该改进流程......

# java - Java中的日期转换错误

> ID：14364863
> 
> 赞同：0
> 
> 时间：2013-01-16T18:07:21.453
> 
> 标签：java, date-format

我正在尝试将类型为“Mon Jan 14 00:00:00 GMT-12:00 2013”​​的日期转换为 java.sql.Date yyyy/MM/dd 类型，我编写了以下代码。在尝试执行以下代码时，我收到“无法解析的日期”错误。请帮助我解决以下问题。

```
 DateFormat df = new SimpleDateFormat("yyyy/MM/dd");
     try{
               java.sql.Date xdate=new java.sql.Date(df.parse("Mon Jan 14 00:00:00 GMT-12:00 2013").getTime());
System.out.println(xdate.toString());

            }catch(Exception x)
            {
                System.out.println(x.getMessage());
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:22:02.393

与其他答案一样，您使用错误的模式来解析您获得的日期字符串。

实际上，您将需要该模式，但要将`Date`对象转换为所需的模式。但首先您需要获取`Date`给定日期字符串的对象。为此，您需要构建与您拥有的字符串完全匹配的模式。

日期格式有两个方面：-

*   *解析*- 日期字符串到日期对象
*   *格式化*- 将日期对象格式化为日期字符串

因此，您首先需要使用[`DateFormat#parse()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)，然后[`DateFormat#format()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)使用不同的模式。

因此，这是您需要的代码：-

```
String fromDate = "Mon Jan 14 00:00:00 GMT-12:00 2013";
Date date = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy").parse(fromDate);

java.sql.Date toDate = new java.sql.Date(date.getTime());

System.out.println(new SimpleDateFormat("yyyy/MM/dd").format(toDate)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:11:06.250

你正在使用

```
new SimpleDateFormat("yyyy/MM/dd") 
```

因此`yyyy/MM/dd`，在尝试以格式解析日期时，`Mon Jan 14 00:00:00 GMT-12:00 2013` 将您要解析的日期字符串转换为`yyyy/MM/dd`格式，它将被解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:11:06.560

好吧，您提供的日期不是您提供的格式。您有一个 ISO 字符串作为参数，但您的格式化程序需要“yyyy/MM/dd”。你为什么期望这会起作用？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T18:13:38.553

您需要以下简单日期格式

```
DateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy"); 
```

**更多日期和时间模式：** [简单日期格式](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#Date%20and%20Time%20Patterns)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T18:27:37.557

尝试

```
DateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyyy", Locale.US); 
```

如果您的本地语言不是英语并且您要解析`Mon`和.Locale.US 是必需的`Jan`。日期解析器可能是语言敏感的，就像我们的例子一样

# c# - 存在从“float”和“float”以及从“float”到“float”的隐式转换

> ID：14364864
> 
> 赞同：14
> 
> 时间：2013-01-16T18:07:25.393
> 
> 标签：c#, compiler-errors, unity3d

这可能是我一段时间以来收到的最好的错误消息，我很好奇出了什么问题。

原始代码

```
float currElbowAngle = LeftArm ? Elbow.transform.localRotation.eulerAngles.y 
                               : 360f - Elbow.transform.localRotation.eulerAngles.y 
```

我正在使用 Unity3d 和 C#；LeftArm 是一种`bool`类型，根据[文档](http://docs.unity3d.com/Documentation/ScriptReference/Vector3-y.html) `Elbow.transform.localRotation.eulerAngles.y`返回一个`float`值。

这段代码给了我错误：

> 存在从“float”和“float”以及从“float”到“float”的隐式转换

这修复了它：

```
float currElbowAngle = LeftArm ? (float) Elbow.transform.localRotation.eulerAngles.y 
                               : 360f - Elbow.transform.localRotation.eulerAngles.y 
```

所以我的问题是：试图沟通的错误是什么，实际上出了什么问题？

**更新 1：** Elbow 是 a`GameObject`并且此错误在 Visual Studio 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T00:34:05.780

三元 (e?a:b) 运算符对于类型系统来说稍微复杂一些，因为双方都需要给出相同的返回类型。如果那里有一个微妙的错误，我不会感到惊讶。编译器偶尔让我们发笑是件好事。

这可能也解决了它：

```
float currElbowAngle = LeftArm ? 0.0f + Elbow.transform.localRotation.eulerAngles.y 
                               : 360f - Elbow.transform.localRotation.eulerAngles.y 
```

我推测问题在于你的真分支是左值，而假分支是右值。我的解决方法使两个分支都成为右值。

# java - spring dispatcher-servlet.xml 不工作

> ID：14364865
> 
> 赞同：2
> 
> 时间：2013-01-16T18:07:26.170
> 
> 标签：java, spring, spring-mvc

如果我有线条

```
<context:component-scan base-package="uni.inso" />
<mvc:annotation-driven /> 
```

在我的 dispatcher-servlet.xml 中，我会从我的 tomcat 中得到这个错误消息：

```
WARN "http-bio-8080"-exec-1 servlet.PageNotFound:1108 - No mapping found for HTTP request with URI [/inso/home] in DispatcherServlet with name 'dispatcher' 
```

但是，如果我的 web-application-config 中有这两行，它就可以正常工作。此外，InternalViewResolver 在 dispatcher-servlet-xml 中不起作用，但在 web-application-config 中起作用。为什么会这样？

我得到了以下 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>        
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/web-application-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是我的 dispatcher-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"
    default-lazy-init="true">
    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Scans within the base package of the application for @Components to configure as beans -->
    <!-- @Controller, @Service, @Configuration, etc. -->
    <context:component-scan base-package="uni.inso" />

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
  </bean>
</beans> 
```

这是我的 web-application-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="org.postgresql.Driver"/>
    <property name="url" value="jdbc:postgrsql://localhost:8080/open"/>
    <property name="username" value="po"/>
    <property name="password" value="ha"/>
  </bean>

  <bean id="mySessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
        </props>
    </property>
  </bean> 
</beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:24:01.240

也许你真的想在你的 web.xml 中做这样的事情：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/web-application-config.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:44:13.763

好吧，我认为您尚未在包中定义任何控制器 servlet，因此它无法为任何 URL 找到任何类型的映射。

```
@Controller
public class HelloController{
    @RequestMapping(value = "/hello", method = RequestMethod.GET)
     public String printHello(ModelMap model) {
        model.addAttribute("message", "Hello Spring MVC Framework!");
      return "hello";
     }
} 
```

您也可以参考本[教程](http://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T13:40:16.717

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd ">

       <mvc:annotation-driven></mvc:annotation-driven>

    <context:component-scan base-package="com.neel" />

    <bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/pages/" />
        <property name="suffix" value=".jsp" />
    </bean>

<mvc:resources location="/WEB-INF/resources/" mapping="/resources/**"/>
</beans> 
```

# git - 从另一个目录将文件添加到 repo

> ID：14364872
> 
> 赞同：0
> 
> 时间：2013-01-16T18:08:07.690
> 
> 标签：git, heroku

如何从计算机上的另一个目录将文件添加到存储库？我一直在尝试推送 Heroku，但它说我需要从另一个文件夹运行 bundle install 然后上传 Gemfile.lock

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:18:02.833

如果您想跟踪文件但将其显示在系统的其他位置，请尝试使用硬链接。(ln.exe)

# iphone - 从另一个选项卡点击按钮后如何更改自定义选项卡栏按钮状态

> ID：14364874
> 
> 赞同：1
> 
> 时间：2013-01-16T18:08:09.867
> 
> 标签：iphone, ios, uitabbarcontroller

我的应用程序中有一个自定义标签栏。我在标签栏的中间使用了一个凸起的自定义按钮。在用户从第一个选项卡点击按钮后，此自定义中间按钮应更改为选定状态。

第一个选项卡上的按钮操作是：

```
[self.tabBarController setSelectedIndex:1]; 
```

我正在使用我自己的 Tabbar Controller 类，所以我可以在中间绘制自定义按钮。我有按钮在手动选择时更改状态，但是当按钮从第一个选项卡发生时，我需要它来更改状态并将所选索引设置为中间选项卡栏按钮。

让我知道我是否可以提供更多信息。感谢您忍受新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:51:45.970

我通过将 self.tabBarController 转换为我的自定义 tabBarController 解决了这个问题：

```
customTabBarController *tabBarController = (customTabBarController *)self.tabBarController; 
```

然后引用按钮并设置选择我只是做了：

```
[tabBarController.button setSelected:YES]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T18:16:36.237

我了解您关于自定义标签栏的问题，您可以自定义您的标签栏。

这是一些示例代码和想法。检查此链接[自定义标签栏自定义](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)

我希望它可以帮助你。

# c# - 将 protobuf-net 与 WCF 和 Silverlight 一起使用

> ID：14364875
> 
> 赞同：2
> 
> 时间：2013-01-16T18:08:09.323
> 
> 标签：c#, wcf, silverlight-5.0, protobuf-net

我们已经尝试了各种方法，但 Protobuf 似乎是最轻量级和最快的。现在我们的问题是我们使用 Silverlight 作为客户端，这使得将默认序列化程序换出 WCF 变得很容易。

protobuf-net 在这方面有什么改进吗？

或者在我们如何加快我们的网络服务方面还有其他建议吗？

我喜欢 WCF 在客户端生成的 WDSL，所以我想坚持下去。然而手动执行请求也很好，尽管更换旧服务需要相当长的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:10:07.577

我们基本上最终将数据作为`Byte[]`数组传递并手动处理序列化/反序列化。这样做有一些额外的工作，但最终，它给了我们更好的灵活性（尤其是 Protobuf 并不想序列化的一些问题对象）。

# ruby-on-rails - rspec 中的 Capybara 和 before(:all)

> ID：14364879
> 
> 赞同：4
> 
> 时间：2013-01-16T18:08:17.130
> 
> 标签：ruby-on-rails, rspec, capybara, bdd

这是我的完整规格：

```
require 'spec_helper'

describe "Idea page", js: true do

  subject { page }

  before(:all) do
    create(:idea)
    visit root_path
    click_link "Log In"
  end

  context "Single idea" do
    before do
      page.find(:xpath, '//*[@id="accordion"]/div/div[1]/a').click
    end

    it { should have_selector('a',text:'Claim') }
    it "should have a button for reporting the idea"
    it "should have a button for opening all links"

    describe "Claiming" do
      before do
        click_link "Claim"
      end
      it {should have_selector('a', text:'Claimed')}
    end

  end
end 
```

没有`(:all)`（即，当它只是`before`在第一个块中），浏览器打开，单击登录链接，转到正确的页面，然后单击链接。好的。

但是在尝试单击第二个链接（“Claim”）之前，它会再次执行此操作，这既耗时又容易出错。所以我试图用`before(:all)`.

但是现在，它只是弹出打开 Firefox，等待片刻，然后再次关闭它，什么也不做。测试失败说：

```
Failures:

  1) Idea page Single idea 
     Failure/Error: page.find(:xpath, '//*[@id="accordion"]/div/div[1]/a').click
     Capybara::ElementNotFound:
       Unable to find xpath "//*[@id=\"accordion\"]/div/div[1]/a"
     # ./spec/features/ideas_spec.rb:15:in `block (3 levels) in <top (required)>'

  2) Idea page Single idea Claiming 
     Failure/Error: page.find(:xpath, '//*[@id="accordion"]/div/div[1]/a').click
     Capybara::ElementNotFound:
       Unable to find xpath "//*[@id=\"accordion\"]/div/div[1]/a"
     # ./spec/features/ideas_spec.rb:15:in `block (3 levels) in <top (required)>' 
```

显然，由于浏览器页面是空白的。

我错过了什么？谢谢你。

**编辑：**也许有一些我不明白的基本内容。以下`before(:each)`是测试试图做的事情：

1) 登录到 webapp，确保有一个“Claim”按钮。

*2)再次*登录 webapp ，*再次*打开手风琴，现在单击“Claim”按钮，看看会发生什么。

 *所以每一步的开始都是完全相同的，浏览器一次又一次地做同样的事情。这就是它应该的样子吗？

如果是这样，为什么我这样做时会出错？具体来说，`before(:each)`我得到了这个：

```
Failures:

  1) Idea page Single idea Claiming 
     Failure/Error: it {should have_selector('a', text:'Claimed')}
     Selenium::WebDriver::Error::UnhandledAlertError:
       Modal dialog present
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/command_processor.js:10287:in `nsCommandProcessor.execute'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/driver_component.js:7328:in `Dispatcher.executeAs/<'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/driver_component.js:7488:in `Resource.handle'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/driver_component.js:7435:in `Dispatcher.dispatch'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/driver_component.js:10119:in `WebDriverServer/<.handle'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/httpd.js:1935:in `unknown'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/httpd.js:2261:in `ServerHandler.handleResponse'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/httpd.js:1168:in `Connection.process'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/httpd.js:1616:in `RequestReader._handleResponse'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/httpd.js:1464:in `RequestReader._processBody'
     # [remote server] file:///tmp/webdriver-profile20130116-3734-lw7267/extensions/fxdriver@googlecode.com/components/httpd.js:1333:in `RequestReader.onInputStreamReady'
     # ./spec/features/ideas_spec.rb:26:in `block (4 levels) in <top (required)>' 
```

即使我看到浏览器单击按钮，将其变为“已声明”，并且没有显示模式对话框。

**编辑2：**我的立场是正确的！毕竟那里有一个模态对话框**！**我修复了 JS 以停止显示它，现在测试通过了。我仍然认为框架必须在每一步都从头开始重复整个序列（似乎是浪费工作），但这很奇怪，但无论如何。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:12:14.440

这是因为测试数据，包括 capybara 会话数据（例如登录状态）和创建的模型`create(:idea)`在规格之间被清除了。

你想用`before(:each)`not `:all`，即使它更耗时。*

# c# - 使用 PDFSharp 检索 PDF 图形元素的坐标

> ID：14364882
> 
> 赞同：1
> 
> 时间：2013-01-16T18:08:25.307
> 
> 标签：c#, pdf, pdfsharp

我实际上已经问过这个问题了[从 PDF 中提取图形元素及其坐标，](https://stackoverflow.com/questions/14296898/extract-graphical-elements-and-its-coordinate-from-pdf)但我应该用**Java**编写项目......不幸的是，没有这个功能。请看链接。我想知道**PDFSharp**是否具有提取矩形等图形元素坐标的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:01:29.900

PDFsharp 可以打开和修改 PDF 文件，但它不能显示它们并且它不提供对页面元素的访问。

找到绘制元素的坐标并不是一项简单的任务，因为转换可能适用于绘图指令。我从未使用过 iText，所以我不知道它是否可以做到。PDFsharp 不能。

PDFsharp 无法渲染 PDF 文件。如果它可以很容易地确定图形对象的坐标，它就可以很容易地渲染 PDF 文件。

# c# - 从活动目录中获取用户的组织

> ID：14364890
> 
> 赞同：0
> 
> 时间：2013-01-16T18:09:01.677
> 
> 标签：c#, asp.net, powershell, active-directory

我正在使用以下代码从 Active Directory 的“结果”中获取所有 OU。

```
 pipeline = runspace.CreatePipeline();
 var command = new Command("Get-OrganizationalUnit");
 pipeline.Commands.Add(command);
 results = pipeline.Invoke(); 
```

但真正的任务是找到用户的 OU，而不是计算机或其他人。我无法获得解决方案。

# html - HTML5 必需的属性更改Chrome 上 Times New Roman 的选项字体 当向 <select>元素添加所需的属性时，当我们提交表单时，选择选项会使用 Times new Roman 字体显示。我在这里做了一个jsfiddle。首先单击选择但不要选择任何内容，只需注意 Arial 字体。然后单击“GO”按钮，然后在所需的表单拒绝您提交后再次选择，您会看到选项字体已更改。我试过用 !important 在选择选项上强迫他们，但它不起作用......有什么想法吗？这 ID：14364892 赞同：3 时间：2013-01-16T18:09:11.453 标签：html, required 回答 #1 赞同：0 时间：2013-02-01T17:08:36.010 把它放在你的 .js 中： $(document).ready(Inicio); function Inicio() { $('#select').live("mouseover",function() { $('select option').css("font-family","Arial"); }); }</select>

# python - 在Python类中，mysql连接在哪里定义？

> ID：14364894
> 
> 赞同：1
> 
> 时间：2013-01-16T18:09:21.073
> 
> 标签：python, mysql, debugging, attributeerror

所以，我今天才开始使用 python。我安装了，`python-mysql.connector`所以我可以开始编写一些查询并在 python 中处理结果，然后将一些数据输出到液晶屏幕。

知道这就是我所拥有的......

```
#!/usr/bin/python

import Adafruit_CharLCD
import mysql.connector

class LCDTests:

    def __init__(self):

        self.lcd = Adafruit_CharLCD;
        #self.lcd.begin(16,1);

        try:
            cnx = mysql.connector(user = '', password='' database='', host='')
        except mysql.connector.Error, e:
            try:
                print "MySQL Error [%d]: %s" % (e.args[0], e.args[1])
            except IndexError:
                print "MySQL Error: %s" % str(e)            
        else:
                cnx.close()

    def run(self):
            print('alex')
            #lcd.message('loading...');

test = LCDTests()
test.run() 
```

但是每当我跑步时，`./test.py`我都会不断得到以下输出：

```
Traceback (most recent call last):
  File "./test.py", line 31, in <module>
    test = LCDTests()
  File "./test.py", line 16, in __init__
    cnx = mysql.connector(user = '...', password='...', database='...', host='...')
TypeError: 'module' object is not callable 
```

在搜索问题时，我发现什么都没有真正帮助我解决问题......问题可能出在哪里的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:12:45.917

`mysql.connector.connect(...)`不是`mysql.connector(...)`

[模块文档](http://dev.mysql.com/doc/connector-python/en/myconnpy_example_connecting.html)对您来说可能是一个很好的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:12:13.790

正确的[语法](http://dev.mysql.com/doc/connector-python/en/myconnpy_example_connecting.html)是`mysql.connector.connect(user, password, host, database)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:42:24.743

你有一个错字。当前，您引用的是模块 mysql.connector 而不是模块中的 Connect 类。尝试

```
mysql.connector.Connect(...) 
```

# javascript - jquery 执行本机浏览器验证

> ID：14364896
> 
> 赞同：3
> 
> 时间：2013-01-16T18:09:39.777
> 
> 标签：javascript, jquery, html, forms, validation

如何使用 jquery / javascript 执行本机浏览器表单验证，就好像用户正在尝试提交表单一样？

```
<form id="myform">
    <input type="text" name="myinput" required />
    <input type="email" name="myemail" required />
</form>

<div id="externalcheck">click to validate</div>

<script type="text/javascript">
   $("#externalcheck").click(function(){
     // how to run html5 browser's validation ?
   });
</scrpipt> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T09:53:39.827

我的 ajax 示例。

```
var $form = $('form');

$form.find(':submit').on('click', function (evt) {
    // If the validation fails, return true and the form is processed as standard
    if($form[0].checkValidity() === false) {
      return true;
    }

    evt.preventDefault();

    $.post('/', $form.serialize(), function (response) {
        // Handling the response
    })
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:54:40.953

看这个演示：http: [//jsfiddle.net/3JeZ6/10/](http://jsfiddle.net/3JeZ6/10/)

这是它的 HTML：

```
 <style>
      .valid { color: #0d0; }
      .invalid { color: #d00; }
   </style>       
   <form id="testform" action="/">
      <label>Required:
        <input id="required_input" required="">
      </label><br>
      <label>Pattern ([0-9][A-Z]{3}):
        <input id="pattern_input" pattern="[0-9][A-Z]{3}">
      </label><br>
      <label>Min (4):
        <input id="min_input" type="number" min="4">
      </label><br>
        <input type="submit" value="Submit Button" id="sbmt" />
    </form>
    <input type="button" value="Trigger click on submit button" id="test">
    <input type="button" value="Trigger form submit" id="test1">
    <input type="button" value="Run checkValidity" id="test2"> 
```

对我来说这很疯狂，但简单`form.submit()`真的行不通。但是，如果您触发点击提交按钮 - 一切正常：

```
$("#test").click(function(){
  $("#sbmt").click(); // works fine
})
$("#test1").click(function(){
  $("#testform").submit();// does not work 
})
$("#test2").click(function(){
  alert($("#testform")[0].checkValidity() ? "valid": "not valid"); // result looks to be correct, but it does not highlight fields that are not valid
}) 
```

我在最新的 Chrome 和 FireFox 中确认了以下行为

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T18:27:11.687

您可以遍历输入并检查它们是否有效。

```
$("#externalcheck").click(function () {
    $('#myform input').each(function () {
        if (!this.checkValidity()) {
            alert($(this).prop('name') + ' is not valid');
        }

    });
}); 
```

[http://jsfiddle.net/sWxE9/](http://jsfiddle.net/sWxE9/)

# opengl - OpenGL 片段着色器 VS DirectX 片段着色器

> ID：14364897
> 
> 赞同：0
> 
> 时间：2013-01-16T18:09:46.063
> 
> 标签：opengl, directx, shader

在 DirectX 中，我知道我可以做这样的事情。

```
struct GBufferVertexOut
{
    float4 position     : POSITION0;
    float4 normal       : TEXCOORD0;
    float2 texCoord     : TEXCOORD1;
};

GBufferFragOut GBuffersFS(GBufferVertexOut inVert)
{
    GBufferFragOut buffOut;
    buffOut.normal = normalize(inVert.normal);
    buffOut.normal = ( buffOut.normal + 1 ) * .5;
    buffOut.diffuse = tex2D( diffuseSampler, inVert.texCoord );
    buffOut.diffuse.a = tex2D( ambientSampler, inVert.texCoord ).r;
    buffOut.specular = float4( 1, 1, 1, 1 );

    return buffOut;
} 
```

所以我的片段结果是我试图将openGL着色器转换为类似的信息的集合

但你能做到吗？除了用于“片段颜色”的 vec4 之外，我之前从未返回过任何其他内容，而且我似乎找不到任何可以告诉我可以返回更多信息的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:17:08.483

在 opengl 中，您在主函数之外定义输出变量，然后在该函数中设置它们的值。所以相当于你拥有的 hlsl 代码会是这样的（片段着色器）

```
layout (location = 0) out vec4 diffuse;     //these are the outputs
layout (location = 1) out vec4 normal;
layout (location = 2) out vec4 specular;

in vec4 in_position;    //these are the inputs from the vertex shader
in vec4 in_normal;
in vec2 in_tex_coord;

void main()
{
    normal = normalize(in_normal);
    normal = (normal + vec4(1.0, 1.0, 1.0, 1.0)) * 0.5; 
    diffuse = texture(diffuseSampler, in_tex_coord);
    ambient = texture(ambientSampler, in_tex_coord);
    specular = vec4(1.0, 1.0, 1.0, 1.0);
} 
```

然后，在您的应用程序中，您需要确保已绑定一个帧缓冲区对象，该对象具有正确数量和类型的要写入的附件。

# geolocation - 获取 lat long range 内的 Cell ID

> ID：14364900
> 
> 赞同：0
> 
> 时间：2013-01-16T18:09:55.883
> 
> 标签：geolocation, latitude-longitude, cellid

是否可以通过提供特定的纬度和经度范围来获取所有网络的小区 ID？

例如，如果我给出 10 到 30 的纬度范围和 70 到 80 的经度范围，则输出必须显示所有单元格 id 代码以及 mcc、mnc、lac 代码。

# c - socket.io 的 C 客户端

> ID：14364901
> 
> 赞同：3
> 
> 时间：2013-01-16T18:10:01.390
> 
> 标签：c, websocket, socket.io

我正在尝试使用 socket.io 建立从 C 中的程序到节点服务器的连接。

我能想出的唯一方法是从 C 程序向节点服务器发出 http 请求，所以我对它的部分有所了解。

现在我需要从 C 程序的节点服务器接收一些信息。

是否有任何 c 客户端库可以让我这样做？如果它不存在，你能给我一些想法让它工作吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T16:43:00.643

你也可以试试 cellophane.io：

[https://github.com/ikeralbeniz/cellophane.io](https://github.com/ikeralbeniz/cellophane.io)

它仍然是错误的，所以它只是 fot 测试或 POC ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T08:48:40.687

新的 C++ 客户端

基于 Boost 和 WebSocket++，这个功能齐全的 Socket.IO 1.0 客户端具有在多个平台上工作的基本优势。

[http://socket.io/blog/socket-io-cpp/](http://socket.io/blog/socket-io-cpp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:27:01.583

如果您正在寻找库和示例，请尝试[libwebsockets](http://git.warmcat.com/cgi-bin/cgit/libwebsockets/)

它同时具有客户端和服务器功能，我希望它的文档和示例能很好地帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:10:20.920

你可以改用 C++ 吗？如果是这样，

[https://github.com/ebshimizu/socket.io-clientpp](https://github.com/ebshimizu/socket.io-clientpp)

# oop - 如何在 Silverlight 中增加动态创建的弧的大小？

> ID：14364903
> 
> 赞同：1
> 
> 时间：2013-01-16T18:10:08.553
> 
> 标签：oop, silverlight-4.0

我在 Silverlight 中动态创建了 arcsegements。我在 for 循环中调用它来创建许多弧线，比如彩虹，比如 10 条弧线，当滑块 1 移动时。现在我想在另一个slider2值更改时增加所有这10个弧的大小。但我的问题是，要在我的新函数中访问这些弧段（以增加大小），弧段对象应该全局声明。但是当我喜欢它时，它只生成 1 个弧，并在slider1change 上使用新值。这个问题怎么解决？？？...

我的代码——

```
private void drawShell()
        {
            // Path
                double a=slider1.value;
            Path displayPath = new Path();
            displayPath.Stroke = _brush;
            displayPath.StrokeThickness = 7;

            PathGeometry pathGeometry = new PathGeometry();
            PathFigureCollection figureCollection = new PathFigureCollection();
            PathFigure pathFigure = new PathFigure();
            PathSegmentCollection segmentCollection = new PathSegmentCollection();
            ArcSegment arc = new ArcSegment();

            // Start Point
            pathFigure.StartPoint = new Point(0, 66);
            // End point
            arc.Point = new Point(50+a, 150-a);
            arc.Size = new Size(200-a, 125-a);
            arc.RotationAngle = 0;
            arc.SweepDirection = SweepDirection.Counterclockwise;
            arc.IsLargeArc = false;

            segmentCollection.Add(arc);
            pathFigure.Segments = segmentCollection;
            figureCollection.Add(pathFigure);
            pathGeometry.Figures = figureCollection;

            displayPath.Data = pathGeometry;
            LayoutRoot.Children.Add(displayPath);
        } 
```

# image-processing - ImageMagick - 在什么条件下使用 GPU？

> ID：14364907
> 
> 赞同：5
> 
> 时间：2013-01-16T18:10:15.900
> 
> 标签：image-processing, imagemagick

我们每天需要调整许多图像的大小。我在想我们应该买两个像样的 GPU，然后把它们放在一台旧的台式电脑上。

但是，Image Magick 可能无法在 Windows 上使用 GPU（我看不到它使用 DirectX）。它可能无法在 Linux 上使用 GPU，因为 Linux 可能没有所需的操作系统挂钩。它可能只能在 Mac 上使用 GPU。

我只是猜测。

有谁确切地知道哪个操作系统最适合这个工具？

谢谢！卢克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-18T21:16:25.577

显然这个*图形*工具默认不使用*图形*处理单元。

[https://superuser.com/questions/718556/imagemagick-for-windows-not-listing-opencl-as-enabled?rq=1](https://superuser.com/questions/718556/imagemagick-for-windows-not-listing-opencl-as-enabled?rq=1)

您必须学习如何使用特殊开关在 Linux 上编译源代码才能使该工具擅长任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:13:03.803

ImageMagick 使用[OpenCL](http://www.khronos.org/opencl/)库进行任何 GPU 调用，它们确实为所有标准操作系统（Windows/Mac/Linux）提供了驱动程序。因此，对于 GPU 驱动程序的兼容性，您选择的任何操作系统都不成问题。

# php - 使用php和mysql查找具有坐标的两个位置之间的距离

> ID：14364908
> 
> 赞同：0
> 
> 时间：2013-01-16T18:10:26.127
> 
> 标签：php, mysql

> **可能重复：**
> [找到两个纬度/经度点之间距离的最快方法](https://stackoverflow.com/questions/1006654/fastest-way-to-find-distance-between-two-lat-long-points)

我有一个数据库，其中包括城镇名称和经度和纬度坐标号。我有一个系统，用户在想租一辆公共汽车时输入接送地点和目的地。我能够查询 mysql 数据库以从正在招聘的人员中提取两个位置，但无法获取存储在数据库另一个表中的两个位置的坐标。我很确定计算两个位置之间距离的代码可以正常工作，因为它只在前面放数字而不是变量，但我不知道我做错了什么。任何帮助表示赞赏，谢谢。

```
$result = mysql_query("SELECT hireid FROM hire ORDER BY customerid DESC LIMIT 1");

while ($row = mysql_fetch_assoc($result)){

$hireid = $row['hireid'];
}
echo "hireid: " . $hireid . "<br/>";

$result = mysql_query("SELECT pickuplocation, destination FROM hire WHERE     hireid='$hireid'");

while ($row = mysql_fetch_assoc($result)){

$pickuplocation = $row['pickuplocation'];
$destination = $row['destination'];

}

echo "pickuplocation: " . $pickuplocation . "<br/>";
echo "destination: " . $destination . "<br/>";

$result = mysql_query("SELECT longitude, latitude FROM coordinates WHERE  town='$pickuplocation'") or die ('Error: '.mysql_error ());

while ($row = mysql_fetch_array($result)){

$long1 = $row['longitude'];
$lat1 = $row['latitude'];

}
"<br/>";
echo "Location1 longitude: " . $long1 . "<br/>";
echo "Location1 latitude: " . $lat1 . "<br/>";

$result = mysql_query("SELECT longitude, latitude FROM coordinates WHERE     town='$destination'") or die ('Error: '.mysql_error ());

while ($row = mysql_fetch_array($result)){

$long2 = $row['longitude'];
$lat2 = $row['latitude'];

}
"<br/>";

echo "Location2 longitude: " . $long2 . "<br/>";
echo "Location2 latitude: " . $lat2 . "<br/>";

function getDistanceBetweenPointsNew($lat1, $long1, $lat2, $long2) {
$theta = $long1 - $long2;
$miles = (sin(deg2rad($lat1)) * sin(deg2rad($lat2))) + (cos(deg2rad($lat1)) *   cos(deg2rad($lat2)) * cos(deg2rad($theta)));
$miles = acos($miles);
$miles = rad2deg($miles);
$miles = $miles * 60 * 1.1515;
$feet = $miles * 5280;
$yards = $feet / 3;
$kilometers = $miles * 1.609344;
$meters = $kilometers * 1000;
return compact('miles') . "<br/>";
}

$point1 = array('lat' => $lat1, 'long' => $long1);
$point2 = array('lat' => $lat2, 'long' => $long2);
$distance = getDistanceBetweenPointsNew($point1['lat'], $point1['long'],     $point2['lat'], $point2['long']);
foreach ($distance as $unit => $value) {
echo $unit.': '.number_format($value,4).'<br />';
} 
```

# ios - 为什么我的 UITextView 在我使用 frame 属性时出现，但在我使用约束时却没有？

> ID：14364916
> 
> 赞同：0
> 
> 时间：2013-01-16T18:10:40.413
> 
> 标签：ios, objective-c, xcode, constraints, autolayout

我是使用约束的新手，所以我对我做错了什么并不感到惊讶，但我不知道我做了什么和/或如何解决它。

这是我使用该`frame`属性的方法；它工作正常，文本视图显示：

```
-(void)displayFeedbackText {
    feedback = [[UITextView alloc] init];
    feedback.backgroundColor = [UIColor clearColor];
    feedback.font = [UIFont fontWithName:@"Helvetica Neue" size:14];
    NSString *t = @"If you have any problems with the" + 16; //Longest line of text view + padding.
    float textWidth = [t sizeWithFont:[UIFont fontWithName:@"Helvetica Neue" size:14]].width;
    float textHeight = [t sizeWithFont:[UIFont fontWithName:@"Helvetica Neue" size:14]].height;
    feedback.text=@"Thank you for buying My Haiku! \nIf you have any problems with the \napp, or if you want to share any \nthoughts or suggestions, please \nemail me at joel@xxxxx.com.";
    feedback.editable=NO;
    feedback.frame = CGRectMake(screenWidth/2-textWidth/2, (screenHeight/2-tabBarHeight) - (textHeight*6)/2, textWidth, textHeight*6);
    feedback.dataDetectorTypes=UIDataDetectorTypeAll;
    [self.view addSubview:feedback];
} 
```

这是使用约束的方法（我已设置`self.view.translatesAutoresizingMaskIntoConstraints`为`NO`in `viewDidLoad`）。什么都没有显示：

```
-(void)displayFeedbackText {
    feedback = [[UITextView alloc] init];
    feedback.backgroundColor = [UIColor clearColor];
    feedback.font = [UIFont fontWithName:@"Helvetica Neue" size:14];
    feedback.text=@"Thank you for buying My Haiku! \nIf you have any problems with the \napp, or if you want to share any \nthoughts or suggestions, please \nemail me at joel@xxxxx.com.";
    feedback.editable=NO;
    feedback.dataDetectorTypes=UIDataDetectorTypeAll;
    NSLayoutConstraint *constraintX = [NSLayoutConstraint constraintWithItem:feedback attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1 constant:0];
    NSLayoutConstraint *constraintY = [NSLayoutConstraint constraintWithItem:feedback attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    [self.view addConstraint:constraintX];
    [self.view addConstraint:constraintY];
    [self.view addSubview:feedback];
} 
```

我做错了什么，我该如何解决？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:21:34.887

我认为它没有出现，因为你没有大小限制，所以它的大小可能为零。尝试设置显式大小约束或相对于超级视图的约束。如果它们是显式约束，你可以这样做（同样使用高度约束）：

```
NSLayoutConstraint *widthCon = [NSLayoutConstraint constraintWithItem:feedback attribute:NSLayoutAttributeWidth relatedBy:0 toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1  constant:320];
[feedback addConstraint:widthCon]; 
```

# c# - 帮助我在 xaml 中定义 UI

> ID：14364917
> 
> 赞同：-5
> 
> 时间：2013-01-16T18:10:46.933
> 
> 标签：c#, wpf

这是我将 tabitem 动态添加到 tabcontrol 的代码：

```
TabItem newTab = new TabItem();
newTab.Header = ncn.courseName;
newTab.FontSize = 20;
TextBox textbox = new TextBox();
textbox.HorizontalAlignment = HorizontalAlignment.Stretch;
textbox.VerticalAlignment = VerticalAlignment.Stretch;
textbox.FontSize = 12;
textbox.AcceptsReturn = true;
newTab.Content = textbox;
this.Courses.Items.Add(newTab);
this.Courses.SelectedItem = newTab; 
```

我认为可能有更好的方法来做到这一点（即，在 xaml 中定义 UI）。我是 WPF 的新手，无法弄清楚模板是如何工作的。所以请帮助我！

注意：tabcontrol 一开始是空的（什么都不显示，没有 tabitem，没有文本框）！我只想在单击“添加”按钮时添加新标签。

* * *

有人帮助我并弄清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:03:41.427

第一件事是：在 99% 的情况下，用 XAML 编写 UI 是最好的和可能的。

其次，您应该告知自己 WPF 指示什么以及如何使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)。如果你不这样做，你应该留在 Windows 窗体！

所以现在：

你ViewModel：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using PB.Base;

namespace DynTabItems
{
    public class MainWindowViewModel
    {
        public MainWindowViewModel()
        {
            AddItemCommand = new DelegateCommand(AddItem, CanAddItem);
            RemoveItemCommand = new DelegateCommand(RemoveItem, CanRemoveItem);
        }

        public DelegateCommand AddItemCommand { private set; get; }
        public DelegateCommand RemoveItemCommand { private set; get; }

        ObservableCollection<MyModel> _yourBehaviorClass = new ObservableCollection<MyModel>();
        MyModel _selectetItem;

        public MyModel SelectetItem
        {
            get { return _selectetItem; }
            set { _selectetItem = value; }
        }

        public ObservableCollection<MyModel> YourBehaviorClass
        {
            get { return _yourBehaviorClass; }
            set { _yourBehaviorClass = value; }
        }

        private void AddItem(object obj)
        {
            YourBehaviorClass.Add(new MyModel());
        }

        private bool CanRemoveItem(object obj)
        {
            return SelectetItem != null;
        }

        private bool CanAddItem(object obj)
        {
            return true;
        }

        private void RemoveItem(object obj)
        {
            YourBehaviorClass.Remove(SelectetItem);
        }
    }
} 
```

现在你的 XAML 代码：

```
<Window x:Class="DynTabItems.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Button Content="Add" Command="{Binding AddItemCommand}"/>
        <Button Content="Remove" Command="{Binding RemoveItemCommand}"/>
        <TabControl ItemsSource="{Binding YourBehaviorClass}" SelectedItem="{Binding SelectetItem}">
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="Header" Value="{Binding YourHeader, UpdateSourceTrigger=PropertyChanged}"/>
                    <Setter Property="Content">
                        <Setter.Value>
                            <StackPanel>
                                <TextBox Text="{Binding YourText, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
                                    <ToolTipService.ToolTip>
                                        <TextBlock Text="{Binding Error}"/>
                                    </ToolTipService.ToolTip>
                                </TextBox>
                            </StackPanel>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.ItemContainerStyle> 
        </TabControl>
    </StackPanel>
</Window> 
```

最后但并非最不重要的 MyModel：

```
using PB.Base;
using PB.Interfaces;
using PB.ValidationError;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DynTabItems
{
    public class MyModel : ViewModelBaseEx<MyModel>
    {
        public MyModel()
        {
            YourHeader = "You header String";
            ListOfExistingErrors = new ObservableCollection<IValidationErrorInfo<MyModel>>();
            ListOfExistingErrors.Add(new Error<MyModel>() { ErrorIndicator = "YourText", ErrorText = "Your Error Text", Predicate = s => string.IsNullOrEmpty(s.YourText) });
        }

        string _yourText;
        string _yourHeader;

        public string YourHeader
        {
            get { return _yourHeader; }
            set
            { 
                _yourHeader = value;
                SendPropertyChanged(() => YourHeader);
            }
        }

        public string YourText
        {
            get { return _yourText; }
            set 
            { 
                _yourText = value;
                SendPropertyChanged(() => YourText);
            }
        }

        public override ObservableCollection<IValidationErrorInfo<MyModel>> ListOfExistingErrors
        {
            get;
            set;
        }
    }
} 
```

如果您需要示例项目，请联系我。

# ruby-on-rails - 迭代器为 Mongoid 文档返回一个额外的对象

> ID：14364924
> 
> 赞同：0
> 
> 时间：2013-01-16T18:11:16.320
> 
> 标签：ruby-on-rails, ruby, iterator, mongoid

使用 Rails 和 Mongoid。

放下代码进行解释会更容易：

```
foo = User.all.to_a 
```

尝试在我的 Javascript 中格式化为可接受的数据。但在我的迭代中：

```
var dump = []
<%= foo.each do |boop| %>
   dump.push( /*some formatted data using boop/*)
<% end %> 
```

结果**转储**包含可接受的格式，除了文档对象也添加到数组的末尾。

例如，使用 rails 控制台：

```
foo.each do |boop|
   print "#{boop.email}\n"
end 
```

打印出电子邮件。然后在最后，在一行中打印出每个文档对象。

我直接从上面的输出：

```
hobbes203@gmail.com
...
// Prints out emails until end

[#<User _id: 50edd7fe021823ea20000001, _type: nil, email: "hobbes203@gmail.com", password_digest: "$2a$10$xXixV8MlqGco0Qq7j5jQaOkXBWQ9cLgQ7yEOtQruxq.HiYg8GOJ4y", phone: nil, firstName: nil, lastName: nil, employNum: nil, dateMade: nil, role_id: "50edd7da021823db20000001">, ... #prints out rest of users in line. 
```

db 中的数组大小和计数相同。我还使用 last 检查了数组。我正在考虑通过仅获取数组的长度来使用计数迭代器，但我很好奇为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:36:10.940

您看到的打印输出是操作的返回值。例如。

```
> Object.save 
=> true 
```

您可以通过在块结束后传递“;0”来抑制这一点，它仍然会打印输出但会将返回值更改为零。

```
foo.each {|boop| puts "#{boop.email}\n" };0 
```

# python - Python 不调用外部程序第 2 部分

> ID：14364928
> 
> 赞同：0
> 
> 时间：2013-01-16T18:11:24.493
> 
> 标签：python, postgresql

我在运行 python 程序（真的是 plpython3u）作为 postgres（9.2）的触发器时遇到问题。触发器使用以下语句调用 python 程序： perform scalesmyone(new.id);

python 程序成功地将某些内容写入文件（这向我表明触发器正在工作），然后尝试在我的 Windows 7 机器上的 C: 驱动器上运行程序。它失败并出现以下错误：错误：WindowsError：[错误5]访问被拒绝。我现在正在使用子进程调用，但以前我尝试过子进程调用，但没有奏效。[你可以在这里](https://stackoverflow.com/questions/14278109/python-not-calling-external-program)看到

这是代码：

```
CREATE or replace FUNCTION scalesmyone (thename text)
RETURNS int
AS $$
a=5
f = open('C:\\JUNK\\frompython.txt','w')
f.write(thename)
f.close()
import subprocess
return_code = subprocess.call(["C:\\Users\\Jim\\Desktop\\BATfiles\\run_addcust.bat", '"hello"'])
$$ LANGUAGE plpython3u; 
```

文件在那里。

吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:51:26.767

该错误表明运行 Postgres/plpython 的用户对该 .bat 文件没有执行权限（至少这是我在普通 Python 程序中得到的）。这可能不是子进程本身的问题。

# image - 接收图像作为输入并输出图像中的内容的服务？

> ID：14364929
> 
> 赞同：0
> 
> 时间：2013-01-16T18:11:26.333
> 
> 标签：image, api, image-processing

我正在寻找可以提交图像的服务/API，该服务将输出图像的描述符。例如：

输入：

![在此处输入图像描述](../Images/6c99b824a66ad927c0d778dd28f6e9bb.png)

输出：

```
{
    "author": "Leonardo da Vinci",
    "title": "Mona Lisa",
    "published": "0000-00-00 00:00:00",
    "descriptors": [
        "woman",
        "female",
        "hands",
        "face",
        "portrait",
        "Lisa Gherardini",
    ]
} 
```

这样的事情存在吗？关于如何实现这一点的任何创意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T16:17:29.353

有一种叫做 Kooaba 的东西，它有一个做图像识别的 API。您确实发送了一张图片，然后得到了回复，其中包括标题和其他一些内容。

文档在[这里](http://docs.kooaba.com/api-reference/4-query-api-v4/)

LTU 技术还有一个 API，但据我所知，它更多地用于匹配而不是实际描述内容。[您仍然可能想在他们的网站上](http://www.ltutech.com/technology/ltu-engine/)查看它。显然，这为 iPhone 应用程序提供了动力[http://www.lookthatup.com](http://www.lookthatup.com)

# c# - 在asp.net webforms中使用JQuery为隐藏的表单字段赋值

> ID：14364930
> 
> 赞同：0
> 
> 时间：2013-01-16T18:11:30.423
> 
> 标签：c#, jquery, asp.net, webforms

我有一个正在使用网络表单进行的项目，我遇到了一个障碍，试图为隐藏的表单字段分配一个值，然后从后面的代码中访问它；这导致空值。我通常在 MVC 应用程序上工作，所以我有点困惑。

这是jQuery：

```
$('.button-submit').click(function () {
    var foo = 'bar';
    $('#hiddenField').val(foo);
}); 
```

这是我的表格：

```
<form id="form1" runat="server">

    <input type="hidden" id="hiddenField" value="" />

    <asp:Button ID="ButtonSubmit" runat="server" OnClick="ButtonSubmit_Click" Text="Add New"  class="button-submit" />

</form> 
```

这是在后面的代码中：

```
protected void ButtonSubmit_Click(object sender, EventArgs e)
{
    string hiddenFormValue = Request.Form["hiddenField"];
} 
```

`Request.Form["hiddenField"]`是`null`。我也试过`Request.Params`并得到了一个`null`. 关于如何修复此代码或推荐更好的实现方式的任何想法？我还尝试使用一个`asp:HiddenField`控件，它正在获取分配的值（用 测试`alert($('#hiddenField').val()`）；但在后面的代码中仍然以空字符串结尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:15:10.323

如果你使用`asp:HiddenField`控制，js应该是这样的：

```
$('.button-submit').click(function () {
    var foo = 'bar';
    $('#<%=controlID.ClientID%>').val(foo);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:38:42.007

javaScript 应该使用像 AV sujested 这样的 aspx 引用

```
$('.button-submit').click(function () {
var foo = 'bar';
$('#<%=hiddenField.ClientID%>').val(foo);
}); 
```

然后就可以直接访问了

```
protected void ButtonSubmit_Click(object sender, EventArgs e) 
{
    string hiddenFormValue = hiddenField.Value; 
} 
```

尽管这可能不是实现这一目标的最佳方式

也许试试这个：

```
<form id="form1" runat="server">

    <asp:hiddenfield  id="hiddenField" runnat="server" />

    <asp:Button ID="ButtonSubmit" runat="server" OnClick="javascript:FOO()" Text="Add New"   />

</form> 
```

用脚本

```
function FOO() {
    var foo = 'bar';
    $('#<%=hiddenFeild.ClientID %>').val(foo);
__doPostBack('<%=form1.ClientID %>', '');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:17:14.530

我真的不明白你为什么不使用 Asp hidden controll 但即使你仍然想按照自己的方式做我建议添加名称

```
<form id="form1" runat="server">

    <input type="hidden" name="hiddenField" id="hiddenField" value="" />

    <asp:Button ID="ButtonSubmit" runat="server" OnClick="ButtonSubmit_Click" Text="Add New"  class="button-submit" />

</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:50:33.897

您需要告诉它在服务器上运行才能访问它。您可以很好地访问客户端的值，这就是为什么`alert($("#<%=hiddenField.ClientID%>").val());`会起作用。如果要读取服务器上的值，则需要在服务器上运行它。

```
<input type="hidden" id="hiddenField" runat="server" value="" /> 
```

很确定这会解决你的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T18:42:49.140

添加`ClientIDMode="Static"`隐藏字段。

请参阅此链接：[https](https://stackoverflow.com/a/20903213/175111) ://stackoverflow.com/a/20903213/175111 。

# php - 使用 jQuery 和 PHP 更新 JSON - json_decode() 返回空

> ID：14364934
> 
> 赞同：0
> 
> 时间：2013-01-16T18:11:47.060
> 
> 标签：php, jquery, ajax, json

我正在尝试将 json 发布到 txt 文件，但我的数据存在一些问题。每当我检查要在 jQuery 中发送的数据时，它看起来都很好，但是如果我在 php 中将其打印出来，我会看到转义斜杠并且 json_decode 将该数据返回为空。这是代码片段：

**jQuery**

```
$.ajax({
    type : 'POST',
    url : 'update-json.php',
    dataType : 'json',
    data : {json : JSON.stringify([{'name':'Bob'},{'name':'Tom'}])},
    success : function(){
        console.log('success');
    },
    error : function(){
        console.log('error');
    }
}); 
```

**PHP**

```
<?php
    $json = $_POST['json'];
    $entries = json_decode($json);

    $file = fopen('data-out.txt','w');
    fwrite($file, $entries);
    fclose($file);
?> 
```

**PHP ECHO $json**

```
[{\"name\":\"Bob\"},{\"name\":\"Tom\"}] 
```

**PHP ECHO $条目**

```
//EMPTY 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:15:20.507

看起来你在 PHP 中打开了 magic_quotes。通常你应该关闭它以避免这样的问题。如果你不能这样做，你需要调用`stripslashes()`你的传入字符串。

您还可以检查`json_last_error()`以找出无法解码的原因。

编辑：这是你输入的方式`stripslashes`

```
$json = stripslashes($_POST['json']);
$entries = json_decode($json);

if( !$entries ) {
     $error = json_last_error();
     // check the manual to match up the error to one of the constants
}
else {

    $file = fopen('data-out.txt','w');
    fwrite($file, $json);
    fclose($file);
} 
```

# c++ - 为什么在初始化和调整对象向量时调用析构函数？

> ID：14364937
> 
> 赞同：6
> 
> 时间：2013-01-16T18:11:59.357
> 
> 标签：c++, vector

我的程序中发生了一些事情，我找不到它是否应该发生。如果是的话，我不明白为什么..

这是代码：

```
#include <iostream>
#include <vector>

using namespace std;

class A{
  public:
    A();
    ~A();
};

A::A(){
  cout << "creating" << endl;
}

A::~A(){
  cout << "deleting" << endl;
}

int main(void){
  vector<vector<A > > vec;

  vec.resize(5);
  for(int i = 0; i < 5; ++i){
    vec[i].resize(5);
  }

  cout << "END" << endl;

  return 0;
} 
```

这是输出：

```
creating
deleting
creating
deleting
creating
deleting
creating
deleting
creating
deleting
END
deleting
deleting
[..more deleting here] 
```

我理解为什么在“END”消息之后调用析构函数，但在此之前，我不知道。我以为当向量调整大小时，会调用类的构造函数，但是为什么要调用析构函数呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T18:14:20.840

在 C++03`vector<A>::resize()`中有一个默认参数，带有默认值`A()`。破坏的就是这个暂时的。向量的元素是由它复制构造的。

这在 C++11 中是“固定的”，其中有两个`resize`. 一个具有单个参数，并对任何附加元素进行值初始化。另一个有两个参数，并从提供的值复制初始化每个附加元素。在 C++11 中，该程序具有以下行为：

```
creating
creating
creating
<repeated for a total of 25 "creating"s>
creating
creating
creating
END
deleting
deleting
deleting
<repeated for a total of 25 "deleting"s>
deleting
deleting
deleting 
```

在 C++03 中，如果一个实例的`A`构造成本如此之高以至于值得将其数量最小化，那么您可以将其从 5 个无参数- + 25 个复制构造减少到 1 个无参数- 和 25 个复制-像这样的结构：

```
A default_value;
for (int i = 0; i < 5; ++i) {
   // same end result as vec[i].resize(5)
   if (vec[i].size() >= 5) {
       vec[i].erase(vec.begin() + 5, vec.end());
   } else while(vec[i].size() < 5) {
       vec[i].push_back(default_value);
   }
} 
```

您可能可以稍微不同地编写它，显然对于您的示例代码，您不需要“if”案例。但是我没有太多机会说“其他时间”，所以我接受了。

# c# - 从 Web 应用程序调用 Web 服务时拒绝连接从 localhost 可以正常工作

> ID：14364939
> 
> 赞同：0
> 
> 时间：2013-01-16T18:11:59.730
> 
> 标签：c#, .net, web-services

NET Web 应用程序，它调用远程 Web 服务来获取一些信息。当我将 Web 应用程序部署到本地计算机的 IIS 并运行时，它能够正常访问远程 Web 服务。但是，如果我将 Web 应用程序部署到其中一台实时服务器，我会得到 System.Net.Sockets.SocketException：

**无法建立连接，因为目标机器主动拒绝它 87.224.86.167:8080**

我用来发出请求的 C# 代码非常简单：

```
using (var client = new System.Net.WebClient())
{
    string data = "{\"operation\":\"logon\", \"username\":\"" + hwCommUsername + "\", \"password\":\"" + hwCommPassword + "\"}";
    byte[] response = client.UploadData(uri, "PUT", Encoding.UTF8.GetBytes(data));
    string jsonResponse = Encoding.UTF8.GetString(response);
    object decoded = EncoderHelper.JsonDecode(jsonResponse);
} 
```

知道为什么吗？

更新：我正在访问的示例 Uri 是：[http](http://a23416.loco-pos.net) ://a23416.loco-pos.net这是一个有效的 URI，其中传入了正确的凭据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:20:06.527

参考this StackoverFlow Posting [No connection could be made because the target machine主动拒绝它](https://stackoverflow.com/questions/2972600/no-connection-could-be-made-because-the-target-machine-actively-refused-it)

“主动拒绝它”意味着当您尝试连接时主机发送了重置而不是确认。因此，这在您的代码中不是问题。防火墙阻止了连接，或者托管服务的进程没有在该端口上侦听，这可能是因为它根本没有运行，或者因为它正在侦听不同的端口。

启动托管服务的进程后，请尝试`netstat -anb`（需要管理员权限）以验证它是否正在运行并在预期的端口上侦听。

# c# - C#/MS Word - 使用字体大小或颜色查找文本

> ID：14364940
> 
> 赞同：0
> 
> 时间：2013-01-16T18:12:01.730
> 
> 标签：c#, ms-word, interop, find

我有一个`HTML`需要在 MS Word 中打开的文档。它在每 2-3 页后有带有特定字体/颜色的标题文本（比如说 13.5pt 和颜色代码是#ff11ff），我希望找到标题文本所在的页码。

`HTML`在 MS Word 环境中检测特定文本的存在时，哪些标签可以派上用场？据我所知，我们可以使用 find 方法检测文本，但我不知道是否有任何方法可以搜索特定的“字体/字体颜色”，

我需要这个来创建一个索引页面，该页面将具有标题的名称和找到它们的页码。所以它是这样的：

1.  查找特定字体大小的文本。
2.  获取该页面的当前页码。

更新：似乎我必须迭代 doc 的每个文本并检查它的字体，然后执行类似的操作

```
Microsoft.Office.Interop.Word._Application word = new Microsoft.Office.Interop.Word.Application();
                Microsoft.Office.Interop.Word._Document document;

                while (word.Selection.Find.Execute(ref findStr, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull, ref objNull))
                {

                    float fontSize = word.Selection.Font.Size;

                    if (fontSize == 13.5)
                    {
                        Range rng = word.Selection.Range;
                        int pageNp = (int)rng.get_Information(WdInformation.wdActiveEndPageNumber);
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:47:34.237

您可以采取几种不同的方法；好像您忽略 Microsoft Word。jQuery 可以轻松地查明特定的 Html 或样式表标签。

如果您尝试编写一个简单的 C# 应用程序来识别这两个请求。您可以使用正则表达式；它们非常强大，专门设计用于过滤和解析大量数据。

由于您的问题中缺乏信息，我无法进一步指出您，但我希望对您有所帮助。[您可以在此处](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)找到有关正则表达式的更多信息：该备忘单应该为您指出几个功能。

我会采取的方法：

*   如果你必须使用单词；利用一种方法来解析文档。
*   使用正则表达式方法搜索特定标签。
*   然后简单地定义方法以返回找到条件的当前页面。

显然，这是一种非常通用的方法。但希望这能为你指明一个好的方向。我不熟悉你的任务或目标；所以这可能会击中头部或不击中钉子。

因此，如果它含糊不清，我深表歉意，但我们不了解您的项目，因此难以回复。如果你不介意我问；你能用你当前的迭代或方法更新你的问题吗？所以我们可以分析代码，也许你想要的目标？

# jquery - 跟踪更改

> ID：14364946
> 
> 赞同：1
> 
> 时间：2013-01-16T18:12:15.663
> 
> 标签：jquery, watch

> **可能重复：**
> [使用 jQuery 检测 div 的高度何时发生变化](https://stackoverflow.com/questions/172821/detecting-when-a-divs-height-changes-using-jquery)

我想知道是否有任何功能可用于跟踪元素的更改？我想跟踪`height`一个元素，如果达到`max-height`，那么`addClass`一些东西。

跟踪我的意思是连续的，否则我只会写一个 if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:17:34.200

如果您控制对元素的更改将发生的方式（例如，因为您提供了进行这些更改的接口），您应该实现自己的回调系统，或者在发生更改时运行一个函数。

如果您不控制它们，则必须定期监视元素并检查更改，使用`setInterval`或递归调用`setTimeout`. 当您不再需要监视更改或元素变得不可用时，请记住清除间隔/中断超时循环。如果不这样做，则回调中引用的任何对象都不会被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:15:13.853

使用 a `setInterval`，像这样：

```
var maxHeight = 0;
setInterval(function() {
    if($("#myelement").height() >= maxHeight) {
        // do stuff when div is too tall
    }
}, 50); 
```

# php - 在菜单中显示子类别而不是根目录

> ID：14364950
> 
> 赞同：0
> 
> 时间：2013-01-16T18:12:27.637
> 
> 标签：php, css, magento, drop-down-menu

在域名转移之前我的菜单看起来像

![在此处输入图像描述](../Images/40613ddba6f6ce1741ea9dac4283c905.png)

我无法理解域转移期间发生了什么，现在菜单看起来像

![在此处输入图像描述](../Images/a8de3c8c39260c3898efb92e98c3fcde.png)

我的类别结构是

![在此处输入图像描述](../Images/2236dc0931d1df131268400b82822d22.png)

我正在尝试恢复域转移之前的菜单，我已经尝试了我之前关于[SO](https://stackoverflow.com/questions/14115028/hiding-root-category-and-showing-sub-categories-as-menu)的问题的所有选项，但没有成功......

尝试了将近一个星期，但不能..

任何想法？有什么指导方针吗？如何恢复域名转移前的菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:36:25.523

在后端，转到目录-> 管理类别，然后单击您的根类别（“类别”）。在底部有一个字段“包含在导航菜单中”。将其设置为“否”并重新索引。然后看看你的问题是否解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:47:10.553

我在这个问题上工作了一个多星期，终于找到了解决方案..

事实上，这是来自 SO question 的指南，位于[此处](https://stackoverflow.com/questions/5232879/how-to-get-sub-categories-of-a-specific-parent-category)

我编辑了文件

```
app/design/frontend/default/YOU_TEMPLATE/template/catalog/navigation/top.phtml 
```

我的新代码是

```
<?php $_menu = ''?>
<?php
$children = Mage::getModel('catalog/category')->getCategories(2);

?>
<?php foreach ($children as $_category): ?>
    <?php $_menu .= $this->drawItem($_category) ?>
<?php endforeach ?>
<?php if ($_menu): ?>
        <?php echo $_menu; ?>
<?php endif; ?> 
```

要获取特定根类别的子类别，您可以这样做

```
$children = Mage::getModel('catalog/category')->getCategories(2); 
```

对于像我这样有麻烦的人，它可能会有所帮助..

谢谢大家

# javascript - JQuery：如何获取以相同ID字符开头的多个元素的特定属性类型计数？

> ID：14364959
> 
> 赞同：0
> 
> 时间：2013-01-16T18:13:04.987
> 
> 标签：javascript, jquery, html

HTML：

```
....<span id="elem_id0" style="....color:blue...">some text</span>
....<span id="elem_id1" style="....color:blue...">some text</span>
....<span id="elem_id2" style="....color:black...">some different text</span>
....<span id="elem_id3" style="....color:blue...">some text</span>
... 
```

我正在使用javascript动态更改颜色。最重要的是，我想计算所有 id 以“elem_id”开头且颜色为“蓝色”的元素。

我正在尝试跟随。（尝试了许多变化）。总数是正确的，但蓝色计数总是为 0。不知道为什么....

```
var blues = $('#[id^="elem_id"][font-color="blue"]').length;            
var total = $('#[id^="elem_id"]').length; 
```

请建议。

***********更新****** ** *** *******

 **删除了之前的更新。失败是由于添加 attr 的拼写错误（在颜色前添加了一个空格）。因此在匹配时失败（这里没有空格......）。

我现在已经纠正了我的错误。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:16:17.003

试试这个：

```
var blues = $('[id^="elem_id"][style*="color:blue"]').length; 
```

**[jsfiddle 示例](http://jsfiddle.net/j08691/gpK5G/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:15:31.370

这是因为元素上没有属性 font-color 。

```
var blues = $('[id^=elem_id]').filter(
  function() {
     var color = jQuery(this).css("color");
     return color==="rgb(0, 0, 255)" || color==="blue";    
  }
);
console.log(blues.length); 
```

[JSFiddle](http://jsfiddle.net/DCkyV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:17:03.270

尝试使用过滤器.. 见下文，

```
$('span[id^=elem_id]').filter(function () {
    return this.style.color == 'blue';
}).length 
```

**演示：http:** [//jsfiddle.net/braQw/](http://jsfiddle.net/braQw/)**

# java - 如何为 listview 实现 getview()

> ID：14364962
> 
> 赞同：0
> 
> 时间：2013-01-16T18:13:24.737
> 
> 标签：java, android, listview, font-face

如何为已经创建的列表视图（下面的代码）实现 getView() （如何创建 getview() ）。这样我就可以更改 textVIew 项目的字体和进一步的属性 stylig

**MainActivity.java**

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

ListView listView1 = (ListView) findViewById(R.id.listView1);

String[] items = { "some", "fancy", "items", "to", "show" };

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.listitem, items);

 listView1.setAdapter(adapter);
 } 
```

**activity_main.xml**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
 tools:context=".MainActivity" >

<ListView 
  android:id="@+id/listView1" 
  android:layout_height="fill_parent"
  android:layout_width="fill_parent" />

 </RelativeLayout> 
```

**列表视图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:textSize="20sp"
android:padding="22dp"
android:gravity="center_horizontal"
/> 
```

**更改 MainActivity.java**

```
 public class MainActivity extends Activity {
   Context context;
    ArrayAdapter<String> adapter;
     String[]  items = { "some", "fance", "rock", "shot", "trance" };
   @Override
   protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView listView1 = (ListView) findViewById(R.id.listView1);

    adapter = new ArrayAdapter<String>(this,
                R.layout.genre_list, items);

    listView1.setAdapter(adapter);}
    public View getView(int position, View convertView, ViewGroup parent) {

    View row;

    if (null == convertView) {
         LayoutInflater mInflater = (LayoutInflater) context
                 .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    row = mInflater.inflate(R.layout.genre_list, null);

    } else {

    row = convertView;

    }

    TextView tv = (TextView)row.findViewById(android.R.id.title);
    Typeface font = Typeface.createFromAsset(getAssets(),"roboto.ttf");  
    Toast.makeText(getApplicationContext(), "font fetched!",  
         Toast.L  ENGTH_LONG).show();
    tv.setText(items[position]);
    tv.setTypeface(font);
    return row;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:23:02.373

`getView()`是适配器类中的一个方法，如 ArrayAdapter 和 SimpleCursorAdapter。您必须扩展一个适配器类，在您的情况下为 ArrayAdapter，才能访问`getView()`.

这个由 Android 首席程序员 Romain Guy 撰写的[Google Talk](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)详细讨论了扩展适配器的最佳实践。

* * *

也就是说，您可以通过 XML 更改字体和许多其他样式属性，您不一定需要创建自定义适配器。

*   [如何更改 TextView 上的字体？](https://stackoverflow.com/q/2888508/1267661)
*   [风格和主题](http://developer.android.com/guide/topics/ui/themes.html)和[`android:textAppearance`](http://developer.android.com/reference/android/widget/TextView.html#attr_android:textAppearance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:24:05.393

要更改 TextView 的字体，您需要创建自定义 ArrayAdapter。但是你可以通过重写默认的 getView 方法来做到这一点：

```
Typeface font = Typeface.createFromAsset(getAssets(),
                                 "yourfontname.ttf");

listView1.setListAdapter(new 
              ArrayAdapter<string>(this,R.layout.listitem, items) {

@Override

public View getView(int position, View convertView, 
                                       ViewGroup parent) {

View row;

if (null == convertView) {

row = mInflater.inflate(R.layout.listitem, null);

} else {

row = convertView;

}

TextView tv = (TextView)row.findViewById(android.R.id.text1);

tv.setText(items[position]);
tv.setTypeface(font);
return row;

}

}); 
```

# c# - 使用转换后的 VB 到 C# 代码

> ID：14364964
> 
> 赞同：2
> 
> 时间：2013-01-16T18:13:28.547
> 
> 标签：c#, vb.net, datatable

我有以下 VB 代码：

```
Dim dt As DataTable = DAL.WMS_Collaboration_Fetch(0).Tables(0)

If dt.Rows.Count > 0 Then
    'Bind Dataset to Gridview
    Dim _WMS_CollaborationInfo As New WMS_CollaborationInfo
    With _WMS_CollaborationInfo
        .CollaborationName = dt.Rows(0).Item["CollaborationName").ToString
        .CollaborationID = dt.Rows(0).Item("CollaborationID").ToString
    End With 
```

将其转换为 C# 代码，如下所示：

```
DataTable dt = DAL.WMS_Collaboration_Fetch(0).Tables(0);

if (dt.Rows.Count > 0) {
    //Bind Dataset to Gridview
    WMS_CollaborationInfo _WMS_CollaborationInfo = new WMS_CollaborationInfo();
    {
        _WMS_CollaborationInfo.CollaborationName  = dt.Rows[0].Item["CollaborationName"].ToString;
        _WMS_CollaborationInfo.CollaborationID = dt.Rows[0].Item["CollaborationID"].ToString;
    } 
```

但是，我无法运行 C# 代码。在 VB 中，使用 DataTable 的表列是通过传入列名来访问的（嗯，我对 VB 不太了解），例如“CollaborationID”

```
dt.Rows(0).Item("CollaborationID").ToString 
```

请问使用DataTable从表中读取数据的C#等价物是什么？我的意思是如何重新编写我的 C# 代码以使其正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:14:36.150

[C# 中的索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)使用方括号 - `[]`. 您也不需要访问`.Item`：

```
_WMS_CollaborationInfo.CollaborationID = 
           dt.Rows[0]["CollaborationID"].ToString(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T18:15:14.600

在 C# 中，方法和索引器是有区别的。第一个使用括号，第二个使用方括号。在从 VB 迁移到两者都使用括号时，我花了一段时间才掌握。

尝试：

```
dt.Rows[0].Item["CollaborationID"].ToString() 
```

**编辑：VB.NET 和 C# 比较**

我曾经一直参考这个备忘单，查看数组部分： [http ://www.harding.edu/fmccown/vbnet_csharp_comparison.html](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)

# android - 使用 HTTP Android 访问 Web 服务器

> ID：14364965
> 
> 赞同：0
> 
> 时间：2013-01-16T18:13:32.103
> 
> 标签：android, android-asynctask

我正在尝试使用 AsyncTask 和默认 Http 客户端访问位于 Web 服务器上的 php 文件。

我不断收到此错误：

**无法解析主机“主机名”：没有与主机名关联的地址**

这是我尝试访问它的活动：

```
public class MainActivity extends Activity {

Button b1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b1 = (Button)findViewById(R.id.button1);
    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            new HTTPTask().execute();
        }
    });
}

private class HTTPTask extends AsyncTask<String, Void, Boolean>{

    @Override
    protected Boolean doInBackground(String... params) {

        //location of file to retrieve
        String url = "http://hostname/12345/db_connect.php";
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        try{
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(url);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            httpclient.execute(httppost);
            return true;
        }catch(Exception e){
            Log.e("log_tag", "Error in Connection " + e.toString());
            return false;
        }

    }

    @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        if(result){
            Toast.makeText(getApplicationContext(), "Connection Established!", Toast.LENGTH_SHORT).show();
        }else{
            Toast.makeText(getApplicationContext(), "Connection Failed!", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Toast.makeText(getApplicationContext(), "Connection initiating...", Toast.LENGTH_SHORT).show();
    }

} 
```

}

我还在清单文件中添加了以下内容：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我只是想不出它会是什么？我在大学里用一台机器工作，我猜这可能是大楼里的保安？任何帮助深表感谢！

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.dbconnectiontest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:21:27.337

检查此解决方案

希望它能解决你的问题。

将此行添加到您的`AndroidManifest.xml`文件中，就在`<manifest>`标签之后和标签之前`<application>`：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**编辑 ：**

如果它不起作用，那么这是最常见的原因`UnknownHostException error message`。另一个可能的原因是您的互联网连接实际上已关闭，您可以使用“ `ping`”命令进行测试。

# jsf-2 - Primefaces inputtext 焦点在文本末尾

> ID：14364966
> 
> 赞同：1
> 
> 时间：2013-01-16T18:13:34.143
> 
> 标签：jsf-2, primefaces

这是我的 JSF 的一个片段：

```
<p:tabView id="tabView" var="tab" value="#{data.tabs}" widgetVar="tabViewWidget"
                activeIndex="#{data.newActiveTabIndex}">

                <p:ajax event="tabClose" listener="#{logic.closeTab}" />

                <p:tab title="#{tab.content.title != null ? tab.content.title : '&amp;lt;new&amp;gt;'}"
                    closable="#{tab.isClosable and data.tabs.size() > 2}">
                    <h:outputText value="#{tab.id} Test" />

                    <p:focus rendered="#{data.componentIdToFocus != null}" for="#{data.componentIdToFocus}" />

                    <p:inputText id="test" value="#{tab.content.title}">
                        <p:ajax event="keyup" listener="#{logic.setFocusingComponent}" update=":form:tabView" />
                    </p:inputText>
                </p:tab>

            </p:tabView> 
```

目的是在每个选项卡中都有一个文本字段，用于在编写时更新选项卡的标题。除了 p:focus 将光标放在已写入文本的开头之外，给定的代码段有效。我希望将光标放在已写文本的末尾。这样用户就可以键入，并且在他/她键入时，标题会自动适应。

我希望我的案子很清楚。有人有解决方案吗？

最好的问候，弗洛里安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T19:38:51.343

您可以使用该`onfocus="this.value=this.value"`技巧“取消选择”该值，以便光标自动结束在该值的末尾。这应该适用于它，`<p:inputText>`因为它基本上只生成一个`<input type="text">`元素。

```
<p:inputText ... onfocus="this.value=this.value" /> 
```

### 也可以看看：

*   [使用 JavaScript 将光标放在文本输入元素中的文本末尾](https://stackoverflow.com/questions/511088/use-javascript-to-place-cursor-at-end-of-text-in-text-input-element)

* * *

**与具体问题无关**，我不会在 keyup 事件和整个 tabview 的更新中使用 ajax 等。这似乎相当昂贵。我宁愿在这里通过 JS/jQuery 做一个简单的 HTML DOM 遍历和操作。

例如

```
<p:inputText ... onkeyup="updateTitle(this)" /> 
```

和

```
function updateTitle(inputInTab) {
    var panelId = $(inputInTab).closest(".ui-tabs-panel").attr("id");
    $("a[href='#" + panelId + "']").text(inputInTab.value);
} 
```

# c++ - 将特定记录添加到二进制文件c ++

> ID：14364971
> 
> 赞同：1
> 
> 时间：2013-01-16T18:13:52.553
> 
> 标签：c++

假设我有一个所有记录工作者的二进制文件和文本文件。默认的总月小时数全部设置为 0。我如何实际访问二进制文件中的特定月份并将其更改为所需的值？

这是文本文件格式

```
ID 名称 JFM
 1 简 0 0 0
 2 标记 0 0 0
 3 开尔文 0 0 0

```

至

```
ID 名称 JFM
 1简0 0 25
 2 标记 0 0 30
 3 开尔文 0 0 40

```

25 实际上是三月份的工作时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:34:30.407

我认为这里的第一个问题是“二进制”是什么意思。您是否按字面意思显示文件的格式？换句话说，在输入时，字符是“0”还是“\0”？完成后，您希望文件包含两个数字“3”和“0”还是单个字符“\25”、“\30”或“\40”？

如果您正在处理每个记录中已知偏移量处的单个字符以供输入，并希望将其替换为单个字符作为结果，那么事情很容易：在文件中寻找正确的偏移量，写入一个字节，寻找下一个偏移量，然后继续，直到您更新了所有记录。

如果输入文件包含字符串，那么当您更新值时，它的长度会（可能）发生变化，那么您几乎会陷入读取数据、在内存中修改数据以及将新数据写回（通常是新文件）。这也很容易，但如果您的文件很大，可能会很慢。

如果你在一个真正的程序中这样做，我会三思而后行。我会考虑使用类似[SQLite](http://www.sqlite.org/)的东西来处理数据。这不仅可以让您简化代码，还可以让您的客户的生活更加美好。它使用[已知/记录的文件格式](http://www.sqlite.org/fileformat.html)，因此其他工具可以处理数据、进行备份等。它支持事务、日志记录、回滚等。简而言之，它们得到了一个强大的解决方案，而不是另一个脆弱的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:18:46.730

文件是字节流。您可以使用 c 系列函数 fopen fread fwrite 访问文件。或者通过 c++ iostream 操作。在每种情况下，您通常需要通过知道其位置然后读取和写入该记录来找到该记录。如果记录不是固定大小，您将不得不处理移动所有后续记录。

# javascript - jQuery 选择器和智能克隆

> ID：14364973
> 
> 赞同：0
> 
> 时间：2013-01-16T18:14:02.740
> 
> 标签：javascript, jquery, wordpress, jquery-selectors

我很难找到解决这个问题的方法。我有 Wordpress 的这个 ul-menu 输出：

```
<ul class="menu">
    <li>
        <a href="#">Page 1</a>
    </li>
    <li>
        <a href="#">Page 2</a>
    </li>
</ul> 
```

但我希望最终结果是这样的 - 克隆并附加锚并在下面放置一个克隆：

```
<ul class="menu">
    <li>
        <a href="#">Page 1</a>
        <a href="#">Page 1</a>
    </li>
    <li>
        <a href="#">Page 2</a>
        <a href="#">Page 2</a>
    </li>
</ul> 
```

我使用过 jQuery——但在 2 小时的反复试验中，我一点运气都没有。这是我能得到的最接近的。但这是错误的。

```
/*jQuery*/
$('.menu li a:first-child').eq(0).clone().insertAfter('.menu li a:first-child'); 
```

在这里小提琴：http: [//jsfiddle.net/67jXz/1/](http://jsfiddle.net/67jXz/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:17:11.400

你不应该这样做`.eq(0)`；这会将其限制为`a`匹配的第一个元素，因此将在每个后续元素之后克隆和插入`a`，从而生成“第 1 页”的副本。

相反，您需要通过迭代来为*每个单独的元素*`.each()`执行克隆和插入，如下所示：

```
$('.menu li a:first-child').each(function() {
    $(this).clone().insertAfter(this);
}); 
```

注意`.insertAfter(this)`部分是指在选择器匹配到*的原始元素之后*`.menu li a:first-child`插入克隆的元素；与引用匹配的元素相同`this`。`$(this)`

[更新的小提琴](http://jsfiddle.net/BoltClock/67jXz/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:19:04.813

试试这个代码：

```
$(function(){
  $('.menu li a:first-child').each(function(k,v){
    $(v).clone().insertAfter(v);
  });
}); 
```

[jsfiddle](http://jsfiddle.net/yoku2010/VbWXj/)

# fonts - 我如何在我的代码中写第二个@font-face？

> ID：14364975
> 
> 赞同：0
> 
> 时间：2013-01-16T18:14:05.907
> 
> 标签：fonts, font-face

我为我的网站使用了两种@font-face 字体。第一个“vera”出现在所有浏览器中。第二个“存在”显示在我的 mac（safari）上，但没有显示在任何其他浏览器上。我想是因为我在本地有字体。我猜我的代码有问题。我以相同的方式上传了两种字体，但我不知道如何编写代码。这是网站和我写的。第一个字体显示，第二个不显示：

[http://swarthmorebahais.org/](http://swarthmorebahais.org/)

```
@font-face {
    font-family: 'vera'; src:
            url('vera-webfont.eot') format('eot'), 
            url('vera-webfont.woff') format('woff'), 
            url('vera-webfont.ttf') format('truetype');
}

    {
    font-family: 'existence'; src:
            url('existence-light-webfont.eot') format('eot'), 
            url('existence-light-webfont.woff') format('woff'), 
            url('existence-light-webfont.ttf') format('truetype');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:22:20.887

您应该包含一个额外的 src: 行，其中包含您从中获取字体的 url。或者它托管在您的服务器上的位置。

```
 e.g  src: url('../urw_vera-webfont.eot'); 
```

# maven - 如何更改本地 Maven 存储库的 updatePolicy？

> ID：14364986
> 
> 赞同：4
> 
> 时间：2013-01-16T18:14:50.983
> 
> 标签：maven, maven-3

我知道如何为外部存储库执行此操作，但不知道如何为我的本地存储库执行此操作，因为我`<repository>`的`settings.xml`.

**我为我的子项目使用快照版本，所以当我重新构建父项目时，我希望 maven不仅每天一次**从我的本地存储库中获取所有子项目的快照版本（这似乎是默认情况下发生的情况）但总是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:27:09.023

如果我理解您的评论，我认为@FrVaBe 可能有正确的答案。当您在开发机器上更改子项目的代码时，由您来重建快照并将其放入本地工件存储库（通过`mvn install`），以便父项目可以使用它。

但是，如果您希望您的父项目构建能够提取您的团队成员所做的更改并每天多次发布到公司远程存储库，请继续阅读。

[这里](https://stackoverflow.com/a/9440427/944849)总结了 Maven 中心（和 kin）、远程存储库（例如 Nexus 或 Artifactory 的公司实例）和本地存储库如何协同工作。如果您总是希望在每次构建时下载最新版本的快照，请进入您的`settings.xml`文件，找到`<snapshot>`包含所需快照的存储库，然后将`<updatePolicy>`值更改为“始终”。`mvn`就我个人而言，我很少这样做，当我想确保从远程仓库获得最新版本的快照时，我只需在命令行中添加“-U”选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T16:15:30.873

**本地存储库没有更新策略！**

本地存储库只是一堆文件。当您`install`访问本地存储库时，您的本地项目已经直接引用了工件。除了可能需要刷新 IDE 以获取较新的文件外，无需执行任何更新。

通过这种方式，您可以整天构建本地快照，而无需担心版本控制、不需要更新，也不会留下旧的工件。如果您是 Maven 的新手并且仍然掌握所有这些存储库及其花哨的更新机制，那么它很好而且很干净，但不是那么明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T21:17:43.133

我想你误会了什么。Maven 将始终从您的本地存储库中获取最新/最新的 SNAPSHOT。但是在您的项目设置（[项目继承](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance)）中，如果您更改了某些内容，则需要自行构建子项目。

子项目的自动构建仅发生在[项目聚合](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Aggregation)布局上。

[文档的项目继承与项目聚合](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance_vs_Project_Aggregation)部分解释了差异。

# javascript - JavaScript 文件随机中断？

> ID：14364987
> 
> 赞同：1
> 
> 时间：2013-01-16T18:14:51.990
> 
> 标签：javascript, wordpress

我一个月前完成了我的[网站](http://avuedesigns.com)，一切都很好。自发布以来，我没有在后端更新任何内容。今天我去查看它，我注意到一些 javascript 没有运行。

当我查看萤火虫时，我突然注意到 5 个 javascript 文件有问题，`Uncaught TypeError`但我从来没有碰过它们，两天前一切都运行得很完美。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:25:34.150

您正在使用两个 jquery.js（不同版本），请尝试仅使用最新、更新和使用的插件。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
...
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?ver=1.0'></script> 
```

1-尝试验证您的 HTML。

2-避免不必要的插件。

3-遵循这些做法： [http ://blog.monitis.com/index.php/2011/05/15/30-tips-to-improve-javascript-performance/](http://blog.monitis.com/index.php/2011/05/15/30-tips-to-improve-javascript-performance/)

# jquery - ajax 文件异步上传

> ID：14364989
> 
> 赞同：0
> 
> 时间：2013-01-16T18:15:06.707
> 
> 标签：jquery, python, ajax, fastcgi

我正在尝试将文本文件上传到 python 脚本。如果我只是上传表单数据并使用

```
form_contents = $(this).serialize() + "&async=true"; 
```

然后表单将保留在网页上并显示结果。如果我使用

```
var formData = new FormData($('form')[0]); 
```

它提交表单和数据文件，但不会停留在网页上。如何添加 +`&async=true`以使其保留在网页上。还是有其他方法可以做到这一点？

停留在网页上但不上传文件：

> ```
>  $('#upload').submit(function () {
>       form_contents = $(this).serialize() + "&async=true";
>       form_action = $(this).attr('action');
> 
>       $.ajax({
>       type: 'post',
>           data: formData,
>       url: form_action,
>       success: function (result) {
>       $('#upload').html(result);
>       } 
>       });
>       return false;
>   }); 
> ```

不停留在网页上，但上传文件：

```
$('#upload').submit(function () {
    var formData = new FormData($('form')[0]);
    form_action = $(this).attr('action');

    $.ajax({
    type: 'post',
    xhr: function() {
        myXhr = $.ajaxSettings.xhr();
        if(myXhr.upload){ 
        myXhr.upload.addEventListener('progress',progressHandlingFunction, false);
    }
    return myXhr;
    },
    data: formData,
    url: form_action,
    success: function (result) {
        $('#upload').html(result);
    }
    });
    return false;
    }); 
```

谢谢你的帮助，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T05:59:44.330

你不会只是简单地在表单中添加一个隐藏的输入元素吗？
`<input type=hidden name="async" value="true">`
...那么这个值将自动成为您序列化数据的一部分`formData`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:23:40.040

您还需要将 contentType 和 processData 参数设置为 false。

```
$('#upload').submit(function () {
  var formData = new FormData($('form')[0]);
  form_action = $(this).attr('action');

  $.ajax({
    type: 'post',
    xhr: function () {
      myXhr = $.ajaxSettings.xhr();
      if (myXhr.upload) {
        myXhr.upload.addEventListener('progress', progressHandlingFunction, false);
      }
      return myXhr;
    },
    data: formData,
    url: form_action,
    processData: false,
    contentType: false,
    success: function (result) {
      $('#upload').html(result);
    }
  });
  return false;
}); 
```

但是，如果发生错误，表单将继续提交，因为它永远不会到达`return false;`. 要停止它以便您可以看到错误，请使用 event.preventDefault。

```
$('#upload').submit(function (e) {
  e.preventDefault();
  var formData = new FormData($('form')[0]);
  form_action = $(this).attr('action');

  $.ajax({
    type: 'post',
    xhr: function () {
      myXhr = $.ajaxSettings.xhr();
      if (myXhr.upload) {
        myXhr.upload.addEventListener('progress', progressHandlingFunction, false);
      }
      return myXhr;
    },
    data: formData,
    url: form_action,
    processData: false,
    contentType: false,
    success: function (result) {
      $('#upload').html(result);
    }
  });
}); 
```

# javascript - 同步 AJAX 调用如何导致内存泄漏？

> ID：14364992
> 
> 赞同：34
> 
> 时间：2013-01-16T18:15:14.413
> 
> 标签：javascript, ajax, jquery

我理解[这个](https://stackoverflow.com/questions/2088318/is-there-any-reason-to-use-a-synchronous-xmlhttprequest/3144550#3144550)反对使用同步 ajax 调用的一般建议，因为同步调用会阻塞 UI 渲染。

**通常给出的另一个原因是同步**AJAX的内存泄漏问题。

从[MDN](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests)文档 -

> 注意：您不应该使用同步 XMLHttpRequests，因为由于网络固有的异步特性，使用同步请求时内存和事件可能会以多种方式泄漏。唯一的例外是同步请求在 Workers 内部运行良好。

同步调用如何导致内存泄漏？

我正在寻找一个实际的例子。任何指向有关该主题的任何文献的指针都会很棒。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-17T14:51:42.677

[如果 XHR按照规范](http://www.w3.org/TR/XMLHttpRequest/#garbage-collection)正确实现，那么它不会泄漏：

> 如果一个 XMLHttpRequest 对象的状态是 OPENED 并且设置了 send() 标志，它的状态是 HEADERS_RECEIVED，或者它的状态是 LOADING，并且以下情况之一为真，则不得对 XMLHttpRequest 对象进行垃圾回收：
> 
> 它注册了一个或多个事件侦听器，其类型为 readystatechange、progress、abort、error、load、timeout 或 loadend。
> 
> 上传完成标志未设置，并且关联的 XMLHttpRequestUpload 对象注册了一个或多个事件侦听器，其类型为进度、中止、错误、加载、超时或加载结束。
> 
> 如果一个 XMLHttpRequest 对象在其连接仍处于打开状态时被垃圾收集，则用户代理必须取消该对象打开的任何获取算法实例，丢弃为它们排队的所有任务，并丢弃从网络接收到的任何进一步数据。

因此，在您点击`.send()`XHR 对象（以及它引用的任何东西）之后，就会对 GC 免疫。但是，[任何错误或成功都会使 XHR 进入 DONE 状态](http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send%28%29-method)，并再次成为 GC 的对象。XHR 对象是同步还是异步都没有关系。如果再次出现长同步请求，这并不重要，因为您只会停留在发送语句上，直到服务器响应。

然而，根据[这张幻灯片](https://docs.google.com/presentation/d/1OFG81taxgjOGU43sv9WHvPZkt5--KnM6gSijWN8NMcU/edit?disco=AAAAAECHbXY&pli=1#slide=id.g16a8b8ed_0_140)，它至少在 2012 年的 Chrome/Chromium 中没有正确实现。根据规范，没有必要调用`.abort()`，因为 DONE 状态意味着 XHR 对象应该已经是正常的 GCd。

我找不到任何证据来支持 MDN 的声明，我已经通过推特联系了作者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-17T12:31:18.333

我认为内存泄漏的发生主要是因为垃圾收集器无法完成它的工作。即你有一个东西的引用，GC 不能删除它。我写了一个简单的例子：

```
var getDataSync = function(url) {
    console.log("getDataSync");
    var request = new XMLHttpRequest();
    request.open('GET', url, false);  // `false` makes the request synchronous
    try {
        request.send(null);
        if(request.status === 200) {
            return request.responseText;
        } else {
            return "";
        }
    } catch(e) {
        console.log("!ERROR");
    }
}

var getDataAsync = function(url, callback) {
    console.log("getDataAsync");
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, true);
    xhr.onload = function (e) {
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                callback(xhr.responseText);
            } else {
                callback("");
            }
        }
    };
    xhr.onerror = function (e) {
        callback("");
    };
    xhr.send(null);
}

var requestsMade = 0
var requests = 1;
var url = "http://missing-url";
for(var i=0; i<requests; i++, requestsMade++) {
    getDataSync(url);
    // getDataAsync(url);
} 
```

除了同步函数阻塞了很多东西之外，还有另一个很大的区别。错误处理。如果您使用*getDataSync*并删除 try-catch 块并刷新页面，您将看到抛出错误。那是因为 url 不存在，但现在的问题是当抛出错误时垃圾收集器是如何工作的。它是否清除了与错误相关的所有对象，是否保留了错误对象或类似的东西。如果有人对此有更多了解并在这里写信，我会很高兴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-22T07:00:45.877

从 GC 同步 XHR 块线程执行和该线程的函数执行堆栈中的所有对象。

例如：

```
function (b) { 
  var a = <big data>;
  <work with> a and b
  sync XHR
} 
```

变量 a 和 b 在这里被阻塞（以及整个堆栈）。因此，如果 GC 开始工作，则同步 XHR 已阻塞堆栈，所有堆栈变量将被标记为“幸存 GC”并从早期堆移动到更持久的堆。并且即使单个 GC 也不应该存在的对象的基调将存在许多垃圾收集，甚至来自这些对象的引用也将存在 GC。

关于声明堆栈块 GC，并且该对象被标记为长寿命对象：请参阅 [Clawing Our Way Back To Precision](https://blog.mozilla.org/javascript/2013/07/18/clawing-our-way-back-to-precision/)中的 Conservative Garbage Collection 部分。此外，在通常的堆被 GC**之后**，“标记”的对象被 GC，并且**通常只有**在仍然需要释放更多内存时（因为收集标记和清除的对象需要更多时间）。

更新：这真的是泄漏，而不仅仅是早期堆无效的解决方案？有几件事情需要考虑。

*   请求完成后这些对象将被锁定多长时间？
*   同步 XHR 可以无限期阻塞栈，XHR 没有超时属性（在所有非 IE 浏览器中），网络问题并不少见。
*   有多少 UI 元素被锁定？如果它仅在 1 秒内阻塞 20M 内存 == 在 2 分钟内领先 200k。考虑许多背景选项卡。
*   考虑单个同步阻塞资源的音调并且浏览器转到交换文件的情况
*   当另一个事件试图改变 DOM 可能被同步 XHR 阻塞时，另一个线程被阻塞（整个它也是堆栈）
*   如果用户重复导致同步 XHR 的操作，**整个**浏览器窗口将被锁定。浏览器使用 max=2 线程来处理窗口事件。
*   即使没有阻止，这也会消耗大量操作系统和浏览器内部资源：线程、关键部分资源、UI 资源、DOM ......想象一下，您可以打开（由于内存问题）10 个带有使用同步 XHR 的站点的选项卡和 100 个带有站点的选项卡使用异步 XHR。是不是这个内存泄漏。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-22T13:11:33.507

如果同步调用在完成之前被中断（即由用户事件重新使用 XMLHttpRequest 对象），则未完成的网络查询可能会挂起，无法被垃圾收集。

这是因为，如果在请求返回时发起请求的对象不存在，则返回无法完成，但（如果浏览器不完善）保留在内存中。您可以轻松地使用 setTimeout 在发出请求后但在它返回之前删除请求对象。

我记得在 2009 年左右，我在 IE 中遇到了一个大问题，但我希望现代浏览器不会受到它的影响。当然，现代库（即 JQuery）防止了它可能发生的情况，允许在不考虑它的情况下发出请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-16T16:34:30.637

使用同步 AJAX 请求的内存泄漏通常由以下原因引起：

*   使用 setInterval/setTimout 导致循环调用。
*   XmlHttpRequest - 当引用被删除时，xhr 变得不可访问

当浏览器出于某种原因没有从不再需要的对象中释放内存时，就会发生内存泄漏。

这可能是由于浏览器错误、浏览器扩展问题以及更罕见的是我们在代码架构中的错误。

这是在新上下文中运行 setInterval 时导致内存泄漏的示例：

```
var
Context  = process.binding('evals').Context,
Script   = process.binding('evals').Script,
total    = 5000,
result   = null;

process.nextTick(function memory() {
  var mem = process.memoryUsage();
  console.log('rss:', Math.round(((mem.rss/1024)/1024)) + "MB");
  setTimeout(memory, 100);
});

console.log("STARTING");
process.nextTick(function run() {
  var context = new Context();

  context.setInterval = setInterval;

  Script.runInContext('setInterval(function() {}, 0);',
                      context, 'test.js');
  total--;
  if (total) {
    process.nextTick(run);
  } else {
    console.log("COMPLETE");
  }
}); 
```

# jquery - 为 div 设置不同的 id

> ID：14364994
> 
> 赞同：-3
> 
> 时间：2013-01-16T18:15:17.257
> 
> 标签：jquery

我想用 jquery 为我的 div 设置不同的 id。例如我有 5 个 div；

```
<div class="mydivs"></div>
<div class="mydivs"></div>
<div class="mydivs"></div>
<div class="mydivs"></div>
<div class="mydivs"></div> 
```

我希望它们在 jquery 之后如下所示。

```
<div id="1" class="mydivs"></div>
<div id="2" class="mydivs"></div>
<div id="3" class="mydivs"></div>
<div id="4" class="mydivs"></div>
<div id="5" class="mydivs"></div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:22:58.313

```
$(".mydivs").each(function (i) {
    this.id = i;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:20:24.097

也许是这样的？

```
$(".mydivs").each(function(index){
    $(this).attr("id",index);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:21:58.500

虽然可以这样做：

```
$('.mydivs').each(function(){
    $(this).attr('id','mydiv'+$(this).index());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T18:30:52.130

```
$('.mydivs').prop('id', function(i) {
     return ++i;
}) 
```

# android - 软窗口键盘隐藏编辑文本

> ID：14364996
> 
> 赞同：1
> 
> 时间：2013-01-16T18:15:27.360
> 
> 标签：android, android-layout

我正在使用具有 10 个 editext 字段的布局充气机对布局进行充气，当我单击 edittext 软键盘时，如果我不充气布局并放置在 setcontentview 中，它会隐藏edittext，它工作正常。如果一个 put requestfocus 标签膨胀布局会使应用程序崩溃。请找到以下代码并帮助我解决此问题。

JAVA代码

```
LayoutInflater inflater = LayoutInflater.from(this);
scrollView = (MyHorizontalScrollView) 
inflater.inflate(R.layout.horz_scroll_with_list_menu, null);
setContentView(scrollView);// if i comment this and add inflatelayout SetContentView(R.layout_details) works fine.

menu = inflater.inflate(R.layout.horz_scroll_menu, null);
app = inflater.inflate(R.layout.details, null);// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:21:04.673

您可能需要更改清单（针对您的活动）中的属性来处理此问题。将此行放在您的 AndroidManifest.xml 中（在您用于定义 Activity 的标签内）

```
android:windowSoftInputMode="adjustResize" 
```