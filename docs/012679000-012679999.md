# StackOverflow 问答 12679000-12679999

# regex - 使用 PowerShell 删除 AutoIt 脚本中未使用的函数

> ID：12679009
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:37:26.697
> 
> 标签：regex, powershell, powershell-2.0, autoit

好吧..

所以我正在编辑一个 AutoIt 脚本，其中包含许多未使用的功能。原作者认为从他/她的包含文件中添加所有功能是合适的。

起初我尝试使用 AutoIt/SciTe 中的工具来删除未使用的函数，但是由于某些奇怪的原因，这使得脚本/编译文件无用。所以现在我认为最好写一个函数移除器。

到目前为止，这是我所拥有的：搜索带有“Func _”的行计数该函数在文件中出现的次数。如果 1 次则选择字符串

```
$FileName=".\FILENAME.au3"
$File=Get-Content $FileName
$Funcs=$File|Select-String "Func _"
foreach ($Func in $Funcs) {
    $FuncName=$Func.ToString().Split('( ')[1]
    $Count=($File|Select-String $FuncName | Measure-Object).Count
    if ($count -eq 1) {
        $File|Select-String "Func _" $FuncName
    }
} 
```

我想做的是删除该函数，可能使用正则表达式。像这样：删除“Func _”$func *“EndFunc”

问题是这是一个跨越多行的搜索，从 Func _NAMEOFFUCTION 到 EndFunc。我不清楚 PowerShell 中的正则表达式是否可以做到这一点。并非所有正则表达式实现似乎都能够跨行搜索。正则表达式甚至是答案吗？我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:38:22.713

当您在 PowerShell 1.0 或 2.0 中使用 Get-Content 时，您只能返回一个字符串数组 - 每行一个。当您需要正则表达式跨越多行时，这将不起作用。使用这种方法将文件作为单个字符串读取：

```
$FileContent = [io.file]::ReadAllText($FileName) 
```

如果您使用的是 PowerShell V3，则可以使用该`-Raw`参数将文件作为单个字符串读取：

```
$FileContent = Get-Content $FileName -Raw 
```

然后，当您使用 Select-String 时，您将需要修改正则表达式以启用单行`s`（可能还有多行`m`）模式，例如：

```
$FileContent | Select-String "(?smi)$FuncName" -AllMatches 
```

请注意，`i`不区分大小写。使用`-AllMatches`参数匹配文件中的多个函数定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:29:05.030

这是一个应该匹配 AutoIt 函数定义的正则表达式。它假定`Func`and`EndFunc`关键字总是放在一行的开头并且它们是区分大小写的。函数名称在名为的组中捕获`FuncName`（在 C# 中，您可以通过 Groups["FuncName"] 访问它）；

```
"(?m)^Func\s+\b(?<FuncName>_\w+\b).*\n(?:(?!EndFunc\b).*\n)*EndFunc.*\n?" 
```

仅对于函数名称，您可以使用`"\b_\w+\b"`或者也许`"\b_[A-Za-z]+\b"`; 我不知道你需要多严格）。对 PowerShell 的使用经验几乎为零，我可能会使用`[regex]::Matches`并 `[regex]::Replace`完成这项工作。我不知道 PS 是否提供了更好的方法。

我假设您已按照@Keith 的建议将整个文件读入字符串，而不是像最初那样逐行读取。

# javascript - 如果我只在更新面板中为 DropDownList 设置了 AutoPostBack 页面，为什么它会尝试加载页面

> ID：12679012
> 
> 赞同：0
> 
> 时间：2012-10-01T18:37:32.193
> 
> 标签：javascript, jquery, asp.net

我在尝试获取用户输入的弹出窗口中有一个 DropDownList。我还有一个用于获取用户输入的“onselectedIndexChanged”。我将整个 DropDownList 放在 updatePanel 中，因此只有 DropDownList 得到更新。（弹出窗口是使用 JQuery/JS 构建的）我使用 JS 到 hiddenfield 值然后将其传递给另一个函数）这是我的代码：

```
<div id="ddlFiles">
    <label>
        Select new CaseFile:</label>
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:UpdatePanel runat="server" ID="UpdatePanel1">
        <ContentTemplate>
            <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
                DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="300px"
                AutoPostBack="true" OnSelectedIndexChanged="ddlCaseFilesNew_SelectedIndexChanged">
                <asp:ListItem>Item 1</asp:ListItem>
            </asp:DropDownList>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlCaseFilesNew" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel>
</div> 
```

这是我的 selectedIndexChanged：

```
<script runat="server">
    protected void ddlCaseFilesNew_SelectedIndexChanged(object sender, EventArgs e)
    {
        hidNewCaseFile.Value = ddlCaseFilesNew.SelectedItem.Value;
    }
</script> 
```

现在由于某种原因，只要我从列表中选择某些内容，它就会将我发送到“找不到资源”页面。我不知道为什么会这样。我的网址如下所示：

```
http://localhost:49355/base/Expenses/ViewExpenses.aspx?CaseFileID=2001 
```

当我尝试选择一个值时，它会打开该错误（找不到资源）页面并说我找不到链接。

这是错误的图片：![在此处输入图像描述](../Images/ab06011ba25da432e8760034a1d69b66.png)

页面加载：

```
Response.Cache.SetAllowResponseInBrowserHistory(false);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    if (!isLoggedIn())
        return;

    if (Request.QueryString["ExpenseID"] != null)
    {
        if (!IsPostBack)
        {
            ddlCaseFilesNew.DataSourceID = "dsCaseFiles";
            ddlCaseFilesNew.SelectedIndex = -1;
            ddlCaseFilesNew.DataTextField = "Display";
            ddlCaseFilesNew.DataValueField = "FileID";
            ddlCaseFilesNew.DataBind();
            if (Request.QueryString["CaseFileID"] != null)  // from view>casefiles>casefile#>notes
                hidCaseFile.Value = Request.QueryString["CaseFileID"].ToString();
        }
    }
    if (Request.QueryString["CaseFileID"] != null)  // from view>casefiles>casefile#>notes
        hidCaseFile.Value = Request.QueryString["CaseFileID"].ToString();
    else if (Request.QueryString["FileID"] != null && Request.QueryString["TaskID"] != null)    // from view>task>specific task notes
    {
        hidCaseFile.Value = Request.QueryString["FileID"].ToString();
        hidTaskID.Value = Request.QueryString["TaskID"].ToString();
    }
}

protected void ddl_PreRender(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    try
    {
        if (ddl.Items[0].Value != "-1")
            ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
    catch
    {
        ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:46:48.253

尝试为您的 UpdatePanel 设置 UpdateMode="Conditional"，然后再试一次。

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1" UpdateMode="Conditional"> 
```

# python - Python- 1 秒绘制连续演示

> ID：12679013
> 
> 赞同：0
> 
> 时间：2012-10-01T18:37:33.667
> 
> 标签：python, matplotlib

我有一本包含数据的字典。对于每个条目，我想显示 1 秒的图并移至下一个。要显示的图已经在外部脚本中编码。我想自动执行此操作。所以我遍历字典，显示第一组图[0]，关闭图[0]，显示图[1] 关闭图[1] ...我想设置显示时间，比如说 1 秒和将情节设置为全屏。在演示过程中我不想触摸电脑的问题。

```
import pylab as pl
import numpy as np

x = np.arange(-np.pi, np.pi, 0.1)         # only for the example purpose
myDict = {"sin":np.sin(x), "cos":np.cos(x), "exp":np.exp(x)}
for key in myDict:
    print myDict[key]
    pl.plt.plot(myDict[key])              # in origin coming from external function
    pl.plt.plot(x)                        # in origin coming from external function
    pl.plt.show() 
```

有谁知道上面应该使用什么功能以及如何修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:28:45.200

一个简单的方法是使用`plt.pause(1)`. 更复杂的方法是使用`matplotlib.animate`模块。请参阅[python 2、matplotlib 1.1.1 中的 pylab.ion() 以及在程序运行时更新绘图](https://stackoverflow.com/questions/12822762/pylab-ion-in-python-2-matplotlib-1-1-1-and-updating-of-the-plot-while-the-pro/12826273#12826273)

[例子](http://matplotlib.org/examples/animation/dynamic_image.html)，[api](http://matplotlib.org/api/animation_api.html)，[教程](http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:05:48.023

```
import time
import pylab as pl
import numpy as np

pl.ion()
x = np.arange(-np.pi, np.pi, 0.1)         # only for the example purpose
myDict = {"sin":np.sin, "cos":np.cos, "exp":np.exp}
for key in myDict:
    print myDict[key]
    pl.clf()
    y = myDict[key](x)
    pl.plt.plot(x, y, label=key)
    pl.plt.draw()
    time.sleep(1) 
```

# maven - CompilerMojo#execute() 导致链接错误 (java.lang.NoSuchMethodError) 并且可能已过期

> ID：12679014
> 
> 赞同：9
> 
> 时间：2012-10-01T18:37:35.540
> 
> 标签：maven, groovy, plexus

我搜索了谷歌并查看了 StackOverflow 上的答案，但似乎无法解决这个问题。我最近加入了这个项目，并在 POM 中添加了一些东西。作为 Maven 的相对新手，我没有抓住这个问题，我看到的回应也没有得到澄清。我怀疑这是在项目中添加了 Groovy。我想使用 Groovy & Spock 进行测试（希望最终也用于 prod）。

```
[INFO] Using Groovy-Eclipse compiler to compile both Java and Groovy files
[FATAL ERROR] org.apache.maven.plugin.CompilerMojo#execute() caused a linkage error (java.lang.NoSuchMethodError) and may be out-of-date. Check the realms:
[FATAL ERROR] Plugin realm = app0.child-container[org.apache.maven.plugins:maven-compiler-plugin:2.0.2]
urls[0] = file:/C:/Users/bill.turner/.m2/repository/org/apache/maven/plugins/maven-compiler-plugin/2.0.2/maven-compiler-plugin-2.0.2.jar
urls[1] = file:/C:/Users/bill.turner/.m2/repository/org/codehaus/groovy/groovy-eclipse-compiler/2.7.0-01/groovy-eclipse-compiler-2.7.0-01.jar
urls[2] = file:/C:/Users/bill.turner/.m2/repository/org/codehaus/groovy/groovy-eclipse-batch/2.0.4-02/groovy-eclipse-batch-2.0.4-02.jar
urls[3] = file:/C:/Users/bill.turner/.m2/repository/org/codehaus/plexus/plexus-compiler-api/1.5.3/plexus-compiler-api-1.5.3.jar
urls[4] = file:/C:/Users/bill.turner/.m2/repository/org/codehaus/plexus/plexus-utils/1.0.4/plexus-utils-1.0.4.jar
urls[5] = file:/C:/Users/bill.turner/.m2/repository/org/codehaus/plexus/plexus-compiler-manager/1.5.3/plexus-compiler-manager-1.5.3.jar
urls[6] = file:/C:/Users/bill.turner/.m2/repository/org/codehaus/plexus/plexus-compiler-javac/1.5.3/plexus-compiler-javac-1.5.3.jar
[FATAL ERROR] Container realm = plexus.core
urls[0] = file:/C:/Users/bill.turner/apache-maven-2.2.1/lib/maven-2.2.1-uber.jar
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] org.codehaus.plexus.compiler.CompilerConfiguration.getDebugLevel()Ljava/lang/String;
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.NoSuchMethodError: org.codehaus.plexus.compiler.CompilerConfiguration.getDebugLevel()Ljava/lang/String;
    at org.codehaus.groovy.eclipse.compiler.GroovyEclipseCompiler.createCommandLine(GroovyEclipseCompiler.java:343)
    at org.codehaus.groovy.eclipse.compiler.GroovyEclipseCompiler.compile(GroovyEclipseCompiler.java:218)
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:493)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:114)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T21:12:36.847

我找到了我的答案。我必须向 maven-compiler-plugin 添加一个版本。为其他可能为此苦苦挣扎的人回答我自己的问题。线索是[http://jira.codehaus.org/browse/MSITE-233](http://jira.codehaus.org/browse/MSITE-233)

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <!-- added version here -->
    <version>2.5.1</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <compilerId>groovy-eclipse-compiler</compilerId>
    </configuration>
    <dependencies>
        <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy-eclipse-compiler</artifactId>
        <version>2.7.0-01</version>
    </dependency>
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-batch</artifactId>
            <version>1.8.6-01</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T09:28:08.257

我遇到了同样的问题，但后来我找到了非常简单的解决方案。

[step1 - 从http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)下载所需的 maven 文件夹（我已经下载了 Maven 2.2.1 (Binary tar.gz)）

第 2 步 - 提取 tar 并将文件夹放到您想要的位置（即 /usr/lib/）

step3 - 更新你使用它的maven路径（在我的例子中是.bashrc）

基本上问题是您的 Maven 已损坏，您需要按照上述步骤来解决它。:)

# android - 开发安卓和iphone应用

> ID：12679016
> 
> 赞同：2
> 
> 时间：2012-10-01T18:37:37.750
> 
> 标签：android, iphone

我要为安卓和苹果手机开发一个小应用程序。该应用程序将包含一个简单的小型在线杂志。我以前没有做过任何应用程序。我使用 asp.net c# 开发网页，我熟悉 java。所以我是移动应用程序方面的初学者，现在我想知道如何开始以及在哪里可以找到有关基本应用程序开发的好信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:43:51.880

如果您没有构建任何复杂的东西而只想显示一些东西，那么一个好的解决方案可能是[PhoneGap](http://phonegap.com/)。您可以使用 HTML、CSS 和 Javascript 进行开发并部署到多个平台。

但是，如果您想为 Android 开发本机应用程序，则可以遵循[Vogella](http://www.vogella.com/articles/Android/article.html)教程。他提供了一套从初级到中级的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:46:22.770

有很多路线可以走。我将尝试在下面列出一些：

1.  Java / Objective C。你需要知道如何用这些语言中的每一种编程（java 用于 droid 和 Obj C 用于 iphone）。使用适用于相应平台的 SDK。

2.  跨平台移动平台 - 您可以使用 Rhodes、Sensa touch 等框架。这将让您一次编写代码并为 android、iphone 等构建包。

3.  Web - 您可以使用 HTML5、CSS、Javascript 等 Web 技术编写应用程序，并且有一些工具可以将它们打包为 Android / Iphone 应用程序。否则，您可以在 Android 中使用 WebView（它基本上会在您的应用程序中创建类似浏览器的体验）。

由您决定最佳路线。网上有大量信息（stackoverflow 和 Android/Iphone sdk 网站）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:39:27.490

我建议您查看[http://developer.android.com/](http://developer.android.com/)以获取有关 android 开发的指导

# git - 在 Git 中选择提交对象

> ID：12679017
> 
> 赞同：0
> 
> 时间：2012-10-01T18:37:38.640
> 
> 标签：git, github

如何从远程存储库的分支中仅选择一个提交并将其合并到本地存储库的当前分支？

我在谷歌上环顾四周，发现了 git cherry-pick。但这似乎只是为了跨同一存储库中的分支执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:39:40.880

获取另一个仓库：

```
git fetch http://github.com/otherguy/forkedproject.git 
```

这会从该存储库下载所有历史记录，但不会更改`HEAD`或您的暂存区域。

然后，`cherry-pick`提交。

# qt - setCentralWidget 未在范围内声明

> ID：12679018
> 
> 赞同：0
> 
> 时间：2012-10-01T18:37:42.177
> 
> 标签：qt, qt4

```
#include <QtGui>
#include <QWidget>
#include "notepad.h"

notepad::notepad()
{
    textField = new QTextEdit;
    setCentralWidget(textField);
    setWindowTitle(tr("The building of a notepad...."));
} 
```

这是我的 Qt 项目之一的文件。setCentralWidget 部分存在一些错误。错误是它没有在范围内声明。但是我已经包含了 QWidget 类，它被包含在其中。错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:44:12.123

`setCentralWidget`是一种方法`QMainWindow`。它不是顶级功能。`notepad`如果您的类派生自，它只会在此处的范围内`QMainWindow`，我猜它一定不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:55:46.573

正如其他人所说，`setCentralWidget(..)`它只是[QMainWindow](http://doc.qt.digia.com/qt/qmainwindow.html)的成员。我认为您正在寻找的行为可以通过向您的[QWidget](http://doc.qt.digia.com/qt/qwidget.html)添加布局然后将您的[QTextEdit](http://doc.qt.digia.com/qt/qtextedit.html)添加到布局来实现。我建议使用[QPlainTextEdit](http://doc.qt.digia.com/qt/qplaintextedit.html)，因为它设置用于编辑文本文档的多行。[QTextEdit](http://doc.qt.digia.com/qt/qtextedit.html)通常用于单行输入。这是一些示例代码：

```
notepad::notepad()
{
    QVBoxLayout *layout = new QVBoxLayout();
    QPlainTextEdit *textBox = new QPlainTextEdit();
    layout->addWidget(textBox);
    this->setLayout(layout);
    setWindowTitle(tr("The building of a notepad...."));
} 
```

布局可以是[QVBoxLayout](http://doc.qt.digia.com/qt/qvboxlayout.html)、[QHBoxLayout](http://doc.qt.digia.com/qt/qhboxlayout.html)、[QGridLayout](http://doc.qt.digia.com/qt/qgridlayout.html)等。这完全取决于您想要通过表单布局实现的目标。您还可以通过使用`this->addWidget(QWidget*)`而不是使用新创建的布局来添加到现有布局。我希望这有帮助。

# arrays - 为什么 perl 不允许我将散列引用的成员取消引用到数组中？

> ID：12679019
> 
> 赞同：6
> 
> 时间：2012-10-01T18:37:42.233
> 
> 标签：arrays, perl

Perl 术语让我感到困惑，它不是我的母语，所以请耐心等待。我会尝试使用正确的术语，但我会举一个例子来确保。

所以我在变量 $foo 中有一个哈希引用。假设 $foo->{'bar'}->{'baz'} 是一个数组引用。也就是说，我可以通过将 $foo->{'bar'}->{'baz'}->[0] 分配给标量来获取数组的第一个成员。

当我这样做时：

```
foreach (@$foo->{'bar'}->{'baz'})
{
    #some code that deals with $_
} 
```

我收到错误“在 script.pl 第 41 行不是数组引用”

但是当我这样做时，它会起作用：

```
$myarr = $foo->{'bar'}->{'baz'};
foreach (@$myarr)
{
    #some code that deals with $_
} 
```

有什么我不明白的吗？有没有办法让第一个例子工作？我尝试将表达式用括号括起来，并在外面加上 @，但这没有用。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T18:45:32.833

这只是一个优先级问题。

```
@$foo->{'bar'}->{'baz'} 
```

方法

```
( ( @{ $foo } )->{'bar'} )->{'baz'} 
```

`$foo`不包含数组引用，因此错误。如果不省略引用表达式周围的可选花括号，则不会出现优先级问题。

```
@{ $foo->{'bar'}->{'baz'} } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-01T18:41:48.420

```
$myarr = $foo->{'bar'}->{'baz'};
foreach (@$myarr)
{
    #some code that deals with $_
} 
```

如果你**`$myarr`**用它的 RHS 替换你的 in for 循环，它看起来像： -

```
foreach (@{$foo->{'bar'}->{'baz'}})
{
    #some code that deals with $_
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T18:40:19.450

它应该看起来像

```
foreach (@{$foo->{'bar'}->{'baz'}})
{
    #some code that deals with $_
} 
```

# html - 如何强制图像在 Squarespace 中跨越 100% 宽度？

> ID：12679021
> 
> 赞同：0
> 
> 时间：2012-10-01T18:37:48.657
> 
> 标签：html, css, squarespace

这是我的[网站。](http://speakingwithpictures.com/about/)

我正在尝试使图像在浏览器的顶部跨度为 100% 宽度。

但是，我希望文本保持现在的 800 像素宽度 - 并保持居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:41:07.780

在第一个标志你需要检查所有`margin and padding`。并设置所有父节点`width:100%`

从你的CSS我看到

```
#site {
       margin: 0 auto;
       padding: 50px;
} 
```

每边至少有 50 像素

# ruby-on-rails - 可以在没有“heroku 运行控制台”的情况下在 Heroku 上运行单个 Rails 命令吗？

> ID：12679022
> 
> 赞同：6
> 
> 时间：2012-10-01T18:37:54.223
> 
> 标签：ruby-on-rails, heroku

我经常需要在 Heroku 上运行命令“Rails.cache.clear”，而我发现这样做的唯一方法是先运行“heroku run console”，然后运行该命令。有什么方法可以一步完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T02:33:47.307

这似乎有效：

```
echo "Rails.cache.clear; exit" | heroku run console 
```

没有出口，它似乎出于某种原因挂起，至少对我来说是这样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T21:05:32.057

我想这就是你要找的：

```
heroku run rails runner -e production Rails.cache.clear 
```

如果不设置环境，将使用开发。

如果是清除缓存之类的常见任务，请执行 rake 任务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T22:28:10.113

使用命令创建一个 rake 任务。例如文件 lib/tasks/cache.rake

```
namespace :cache do
  desc 'Clear memcache'
  task :clear => :environment do
    Rails.cache.clear
  end
end 
```

然后你可以运行命令

`heroku run rake cache:clear`

# wampserver - Wamp, 外部 IP, 禁止

> ID：12679026
> 
> 赞同：2
> 
> 时间：2012-10-01T18:37:59.223
> 
> 标签：wampserver

首先，我使用的是 Windows 7 Ultimate Sp1 x64，问题：无法通过我的外部 IP 访问我的 wamp 服务器，直到今天我使用的是：

**WAMPSERVER（64 位和 PHP 5.4）2.2E**

**Apache 2.2.22** – Mysql 5.5.24 – PHP 5.4.3 XDebug 2.1.2 XDC 1.5 PhpMyadmin 3.4.10.1 SQLBuddy 1.3.3 webGrind 1.0

在这个版本中，一切都很好，一切正常，我能够访问 localhost/127.0.0.1 我的内部/外部 IP，直到我将此版本替换为这个版本：

**WAMPSERVER（64 位和 APACHE 2.4）2.2E**

**Apache 2.4.2** – Mysql 5.5.24 – PHP 5.4.3 XDebug 2.1.2 XDC 1.5 PhpMyadmin 3.4.10.1 SQLBuddy 1.3.3 webGrind 1.0

如果您可以看到 Apache 版本不一样，那么再次使用此版本我无法访问我的外部 IP，

我做了什么：

端口 80 是打开的，我没有更改端口，防火墙允许 HTTP 服务器和 Wamp（即使它允许我关闭防火墙只是为了确定），

我确实测试了这个[链接](http://dnhome.wordpress.com/2011/10/14/apache-403-forbidden-you-dont-have-permission-to-access-on-this-server/)

在我按照链接上的指南进行操作后，我可以使用我的地址但不能使用我的 IP 访问，问题出在新的 apache 版本上，所以如果有人在这个新版本（**Apache 2.4.2**）之前看到这个问题，可以请帮助我我将非常感激，谢谢大家，祝你有美好的一天。

# javascript - 字符串文字在 Chrome、Firefox 中导致“意外令牌非法”

> ID：12679028
> 
> 赞同：1
> 
> 时间：2012-10-01T18:38:14.613
> 
> 标签：javascript, syntax-error, string-literals

以下是在 Firefox 和 Chrome 中导致错误的整个文档：

```
<!DOCTYPE html>
<html>
<head>
    <script>
        var strs = [], scripts = ['harbl.js'], s = 0;
        strs.push('<script src="' + scripts[s] + '"></script>');
    </script>
</head>
<body>
    <p>buh...</p>
</body>
</html> 
```

[http://jsfiddle.net/cryptoquick/J4zZT/](http://jsfiddle.net/cryptoquick/J4zZT/)

我得到的错误是：

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

这让我真的很困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T18:39:24.020

`</script>`文字由浏览器解析，因为它在遍历代码时不知道上下文。你必须像这样逃避它：`<\/script>`。这是一个已知问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T18:40:55.277

将其更改为：

```
strs.push('<script src="' + scripts[s] + '"></s' + 'cript>'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T19:00:54.447

前斜线`'/'`被视为特殊字符。这是错误的原因。

```
strs.push('<script src="' + scripts[s] + '"><\/script>'); 
```

请阅读这篇文章以获取更多信息 [JavaScript 和字符串中的正斜杠](https://stackoverflow.com/questions/6117886/two-part-question-on-javascript-forward-slash)。

# arrays - Mathematica 中的等值表

> ID：12679029
> 
> 赞同：2
> 
> 时间：2012-10-01T18:38:27.117
> 
> 标签：arrays, wolfram-mathematica, element

我有两个数组，它们是，

```
 aa={a,b} 
 bb={1,4} 
```

我只能玩数组`aa`和`bb`. 我怎样才能使`a=1`和`b=4`？这意味着如果我输入`a`（然后按`shift`- `enter`），输出为 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:56:13.413

你可以`MapThread`这样使用：

```
aa={a,b}
bb={1,4}
MapThread[Set, {aa,bb}] 
```

这将与通过并将它们设置为一和一相同，例如`a = 1`and `b = 4`。

# ruby-on-rails - 如何设置 Ember.Router 以使用 Rails 自定义路由？

> ID：12679034
> 
> 赞同：1
> 
> 时间：2012-10-01T18:38:40.807
> 
> 标签：ruby-on-rails, ember.js, ember-data

从下面的代码中，如何从 Ember.js 路由器调用我的 Rails AssetsController 的自定义路由“dynamicSearch”？

导轨侧：

控制器 > assets_controller.rb

```
class AssetsController < ApplicationController
  #caches_page :index

  # GET /assets
  # GET /assets.json
  def index
     begin
       params[:foo] ||= "bar"

       assets = Asset.all(params: {foo: params[:foo]})

       respond_to do |format|
         format.html # index.html.erb
         format.json { render json: assets }
       end
    end
  end

  def dynamic_search
     params[:bar] == "bar"
     assets =  Asset.all(params: {bar: params[:bar]})

     respond_to do |format|
       format.json { render json: assets }
     end
  end
end 
```

Ember.js 路由 - 动态搜索是从 Ember 视图中的按钮调用的操作。

```
assets: Em.Route.extend({
  route: '/assets',

  connectOutlets: function(router) {
    router.get('applicationController').connectOutlet('assets', router.get('store').findAll(App.Asset));
  },

  dynamicSearch: function(router) {
    // How do I connect this to my Assets#dynamicSearch route in the Rails controller?
  },

  index: Ember.State.extend({
    route: '/',
    connectOutlets: function(router) {
      router.get('applicationController').connectOutlet('assets');
    }
  })

}) // assets route 
```

# mysql - 使用 Perl DBI Mysql 在查询中获取最大行字符长度

> ID：12679035
> 
> 赞同：1
> 
> 时间：2012-10-01T18:38:49.153
> 
> 标签：mysql, perl, dbi

使用：Perl v5.10.1、MySQL 5.5.15、DBI。

我需要通过电子邮件从数据库中提供最终用户的输出。他们不希望这是一种依恋，而是在身体中。

我想在 ascii 表中提供数据，并且在确定 DBI 是否具有执行此操作的内置函数时遇到问题（输出类似于从命令行查询 MySQL）。

或者，如果我可以确定最长的行字符长度，我可以使用它来构建表格。我有一种方法可以获取数组中的最大项目长度，但是我无法用查询结果来解决这个问题。

```
my $spacer_length = (reverse sort { $a <=> $b } map { length($_) } @array)[0]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:35:19.797

假设一个通用的 DBI 循环，你可以这样做：

```
use List::Util qw(max);

...
my @output;
my $max;
while (my @foo = $dbi->fetchrow_array) {
    $max = max($max // (), map length, @foo);
    push @output, \@foo;           # save data for email attachment
} 
```

使用“定义或”运算符`//`来避免`undef`在负值的情况下发出警告和可能的污染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:16:27.987

我不确定您到底要什么，但如果您正在寻找查询结果的给定列的“最大行字符长度”，您可以使用 SQL 来做到这一点：

```
SELECT MAX(CHAR_LENGTH(col1)) FROM t1 
```

或者，如果您希望所有行按 col1 值的长度排序：

```
SELECT col1,col2 from t1 ORDER BY CHAR_LENGTH(col1) DESC 
```

您可以像这样使用 DBI 执行这些查询：

```
# $mysql is your DBI connection info
my $query = $mysql->prepare("SELECT col1,col2 from t1 ORDER BY CHAR_LENGTH(col1) DESC");
$query->execute(); 
```

然后遍历结果行：

```
while ( my @result = $query->fetchrow_array ) {

    my ($col1,$col2) = @result;
    # do stuff with the values

} 
```

您可以根据需要打印值，包括命令行 mysql 客户端的输出。

# java - 使用JRuby直接调用Android Java Methods

> ID：12679037
> 
> 赞同：7
> 
> 时间：2012-10-01T18:39:05.977
> 
> 标签：java, android, jruby, nfc, sl4a

我最近一直在探索如何通过 SL4A 中的 JRuby 访问 Android 的库。我知道可以使用 Ruboto 设计应用程序，但我只想修改一个简单的脚本来访问当前 SL4A 不提供的 API。我可以导入普通的罐子等，但我无法获得 Android 的 API。具体来说，我想访问“android.nfc”。有没有办法做到这一点，我还没有想出或者有可能不工作；SL4A 确实声明 JRuby 提供了一个直接的 API 桥。

谢谢，克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:14:44.577

你能包括你的Jruby代码吗？您是否正确构建了类路径，然后也执行了 java_import ？

我有一个 ruby​​ 文件，仅用于将我的 jar 加载到我在每个名为 java_jars.rb 的 .rb 文件中需要的类路径中，它包含以下内容：

```
Dir["target/dependency/\*.jar"].each { |jar| require jar } 
```

然后在主 ruby​​ 文件中执行以下操作：

```
include Java
require 'java_jars'
java_import 'com.package.name.blah.ApiClassName'

def methodName
    apiObject = com.package.name.blah.ApiClassName.new
    # don't forget methodName becomes method_name in JRuby
    apiObject.method_name
end 
```

# vim - 如何在 Mountain Lion 中使用 vim 利用系统剪贴板

> ID：12679038
> 
> 赞同：2
> 
> 时间：2012-10-01T18:39:19.700
> 
> 标签：vim

我正在尝试让 VIM 访问系统剪贴板。在我看来，这是我的选择：

1.  [根据这篇文章](https://superuser.com/questions/235505/compiling-vim-with-xterm-clipboard-support)，重新编译 VIM 并指定对剪贴板的访问权限。
2.  [根据这篇文章](https://stackoverflow.com/questions/12234837/how-to-fix-vim-system-clipboard-usage-in-mountain-lion)，使用自制软件安装较新版本的 VIM 。

我宁愿做第二种选择。有谁知道这是否真的可以解决我遇到的问题？此外，还有其他未在此处列出的复制/粘贴问题的解决方案吗？

我的解决方案：我最终安装了 MacVim 并将其设为默认 Vim。我发现[这篇文章](https://apple.stackexchange.com/questions/59375/how-do-i-install-macvim)很有帮助。我运行了这个命令：

```
brew install macvim --override-system-vim 
```

然后修改了我的 .bash_profile 就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:00:41.517

你可能正在使用一个不支持剪贴板的 Vim 版本。*当然*，解决这个“问题”的方法是使用支持剪贴板的 Vim 版本。

说什么`$ vim --version`？

**SO**上有很多答案描述您的选项，与Ruby或Python支持或剪贴板支持有关。解决方案每次都是一样的：安装正确的构建。只需选择您最熟悉的流程即可。

最简单的解决方案是安装 MacVim 并使用捆绑的`mvim`脚本在命令行上运行 MacVim。它完全无痛并且*保证*有效。

我不建议从源代码构建，因为这可能是一项不必要的令人沮丧的任务。

Homebrew 和 MacPorts 也是不错的选择，但我不喜欢 Homebrew 的所有符号链接。YMMV。

您已经在 17 分钟前提出了这个问题。有足够的时间尝试所有选项。你真的*尝试*过吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:38:04.637

您可以尝试使用[fakeclip](http://www.vim.org/scripts/script.php?script_id=2098)插件。

# ios - 将文本设置为没有选择的下划线

> ID：12679042
> 
> 赞同：5
> 
> 时间：2012-10-01T18:39:30.277
> 
> 标签：ios, ios6, nsattributedstring, underline

我试图让用户能够将他们键入的文本设置为下划线，而无需当前选择文本。这适用于 iOS 6 应用程序，在 UITextView 中输入文本。它将被保存为 NSAttributedString。粗体和斜体工作正常。下划线的一些东西使它无法工作。

```
UITextView *textView = [self noteTextView];
NSMutableDictionary *typingAttributes = [[textView typingAttributes] mutableCopy];
[typingAttributes setObject:[NSNumber numberWithInt:NSUnderlineStyleSingle] forKey:NSUnderlineStyleAttributeName];
NSLog(@"attributes after: %@", typingAttributes);
[textView setTypingAttributes:typingAttributes];
NSLog(@"text view attributes after: %@", [textView typingAttributes]); 
```

我的初始日志语句表明它设置为下划线：

```
attributes after: {
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0xa9c5e30> font-family: \"Verdana\"; font-weight: normal; font-style: normal; font-size: 17px";
    NSKern = 0;
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
    NSUnderline = 1;
} 
```

但是紧随其后的日志语句没有显示 nsunderline 属性。删除 textView setTypingAttributes 行没有影响。

```
text view attributes after: {
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0xa9c5e30> font-family: \"Verdana\"; font-weight: normal; font-style: normal; font-size: 17px";
    NSKern = 0;
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} 
```

我很难过为什么我让它为粗体和斜体工作，而不是下划线。还有为什么它似乎最初获得属性，然后忘记它。请分享您可能有的任何见解。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T01:42:23.893

我认为您发现了一个错误，或者至少是一些未记录的行为。如果我将打字属性设置为红色，我可以这样做：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range
        replacementString:(NSString *)string {
    NSDictionary* d = textField.typingAttributes;
    NSLog(@"%@", d);
    NSMutableDictionary* md = [NSMutableDictionary dictionaryWithDictionary:d];
    // md[NSUnderlineStyleAttributeName] = @(NSUnderlineStyleSingle);
    md[NSForegroundColorAttributeName] = [UIColor redColor];
    textField.typingAttributes = md;
    return YES;
} 
```

使用该代码，所有用户的新输入都会显示为红色。但是，如果我取消注释注释行，尝试在键入属性中添加下划线，它会破坏整个事情 - 我没有下划线，我也没有得到红色！

但是，您的问题的另一部分的答案*已*记录在案。您必须按照我的方式进行操作，在用户输入时重新声明输入属性，因为正如文档明确指出的那样，“当文本字段的选择发生更改时，字典的内容会自动清除”（这就是你问的“忘记”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:47:15.813

从 iOS 6 开始，UITextView 现在声明了属性属性文本，它允许您通过创建 NSAttributedString 来为文本添加下划线。这是修改后的代码：

```
UITextView *textView = [self noteTextView];
NSMutableDictionary *typingAttributes = [[textView typingAttributes] mutableCopy];
[typingAttributes setObject:[NSNumber numberWithInt:NSUnderlineStyleSingle] forKey:NSUnderlineStyleAttributeName];
NSLog(@"attributes after: %@", typingAttributes);
textView.attributedText = [[NSAttributedString alloc] initWithString:[textView text] attributes:typingAttributes];
NSLog(@"text view attributes after: %@", [textView typingAttributes]); 
```

通过使用此代码，键入的任何其他文本也将符合 NSAttributedString 中设置的格式，例如下划线

希望这可以帮助！

# couchdb - CloudFoundry 中的 CouchDB - 第 2 部分：用户添加失败

> ID：12679043
> 
> 赞同：0
> 
> 时间：2012-10-01T18:39:32.430
> 
> 标签：couchdb, cloud-foundry

根据 CloudFoundry 中的这篇文章[CouchDB？](https://stackoverflow.com/questions/12458058/couchdb-in-cloudfoundry)，我尝试了同样的事情，但是当我运行时，我`vmc create-service couchdb`在 couchdb_node.log 中报告了以下错误：

```
[2012-10-01 11:31:47.335301] couchdb_node_0 - pid=22864 tid=dfcc fid=c5c1   INFO -- Creating credentials: ue26fa08a-e8d1-4043-8ba4-71f7d779ce08/pa1cdc5d8-2e92-41ef-b2f1-bdb61b8ce693 for database d73a7c8d1-9b5e-411c-ab92-09f96c7875c2
[2012-10-01 11:31:47.338018] couchdb_node_0 - pid=22864 tid=dfcc fid=c5c1  ERROR -- Failed add user ue26fa08a-e8d1-4043-8ba4-71f7d779ce08: 401 Unauthorized
[2012-10-01 11:31:47.342074] couchdb_node_0 - pid=22864 tid=dfcc fid=c5c1   INFO -- Deleting user ue26fa08a-e8d1-4043-8ba4-71f7d779ce08
[2012-10-01 11:31:47.344598] couchdb_node_0 - pid=22864 tid=dfcc fid=c5c1  ERROR -- Failure deleting user ue26fa08a-e8d1-4043-8ba4-71f7d779ce08: 401 Unauthorized
[2012-10-01 11:31:47.349463] couchdb_node_0 - pid=22864 tid=dfcc fid=c5c1   WARN -- Exception at on_provision 401 Unauthorized: {"error":"unauthorized","reason":"Name or password is incorrect."}\n 
```

在客户端它报告错误 503。我需要做什么才能添加用户？我在 Linux Ubuntu 10.04 上以 root 身份运行 CF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:46:24.853

这是另一个版本的 CouchDB 在后台运行的问题。杀死它之后，我克服了这个错误。

# jquery - 使用父类设置数据图标值

> ID：12679049
> 
> 赞同：1
> 
> 时间：2012-10-01T18:39:57.187
> 
> 标签：jquery, icons, attr, inheritance

我正在努力解决这个问题 - 我是 Jquery 的新手。我试图给每个元素一个基于其父类的图标 - 用于投资组合过滤器（即网络项目有网络图标，图形项目有图形图标，等等）。

这是我到目前为止所做的（简化）：

```
<!-- Project Thumbnails -->

<ul id="thumbs">
    <li class="web">
        <a name="div1"><span aria-hidden="true" data-icon=""></span><img src="img/project1.png" /></a>
    </li>
    <li class="graphics">
        <a name="div2"><span aria-hidden="true" data-icon=""></span><img src="img/project2.png" /></a>
    </li>
    <li class="photography">
        <a name="div3"><span aria-hidden="true" data-icon=""></span><img src="img/project3.png" /></a>
    </li>
</ul> 
```

这是Jquery：

```
// Determine span class by parent class
$("#thumbs li a").each(function(){
    $this = $(this);
    $thisparent = $(this).parent();
    $span = $(this).children('span');

    $span.addClass($thisparent.attr('class'));  
}); 
```

所以，我可以给每个跨度一个类，从它的父级继承——允许我对每个项目类别进行不同的样式设置。但是如何设置数据图标值？

我正在使用[Icomoon](http://icomoon.io/)嵌入我的图标，所以显然数据图标值将类似于`&#x0037;`- 因此每个过滤器类别（网络、摄影、图形）都必须以某种方式链接到特定的数据图标值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:56:01.483

试试这个

```
$("#thumbs li a span").each(function(){
    var cls=$(this).closest('li').attr('class');
    $(this).attr({'class':cls, 'data-icon':cls });
}); 
```

[**演示**](http://jsbin.com/iyagit/1/edit)。通过浏览器的检查器工具查看源代码。

**结果：**

```
<span aria-hidden="true" data-icon="web" class="web"></span>
<span aria-hidden="true" data-icon="graphics" class="graphics"></span>
<span aria-hidden="true" data-icon="photography" class="photography"></span> 
```

**更新：**您也可以将图标的名称保存在预定义的对象中，然后使用它，即

```
var icons={'web':'globe', 'graphics':'picture','photography':'photo'};
$("#thumbs li a span").each(function(){
    var cls=$(this).closest('li').attr('class');
    $(this).attr({'class':cls, 'data-icon':icons[cls] });
}); 
```

[**DEMO**](http://jsbin.com/iyagit/2/edit) .通过浏览器的inspector工具查看源码。

**结果：**

```
<span aria-hidden="true" data-icon="globe" class="web"></span>
<span aria-hidden="true" data-icon="picture" class="graphics"></span>
<span aria-hidden="true" data-icon="photo" class="photography"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:42:45.283

试试这个

```
$("#thumbs li a").each(function(){
    var $this = $(this);
    var $thisparent = $(this).parent();
    var $span = $thisparent.find('span');

    $span.addClass($thisparent.attr('class'));  
    $span.data('icon',$thisparent.attr('class')); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:43:08.900

这应该适合你

```
// Determine span class by parent class
$("#thumbs li a").each(function(){
    $this = $(this);
    $thisparent = $(this).parent();
    $span = $(this).children('span');

    $span.addClass($thisparent.attr('class')); 
    $span.data('icon',$thisparent.attr('class')); 
}); 
```

# c# - FormsAuthentication 和 WebSecurity 之间的区别

> ID：12679050
> 
> 赞同：16
> 
> 时间：2012-10-01T18:40:01.277
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我正在 Visual Studio 的示例 Web 应用程序中探索 ASP.NET MVC 的可能性，WebMatrix.WebData.WebSecurity 用于成员资格（创建帐户，并指定用户登录以查看特定页面等）。但经过一番搜索，我发现还有一个 System.Web.Security.FormsAuthentication 类可以用于 Membership。

有人知道这两个课程之间的区别/优点和缺点吗？以及何时使用 WebSecurity 以及何时使用 FormsAuthentication？（也许是 FormsAuthentication 的一个明显例子）

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T18:42:20.887

`WebSecurity`在 WebMatrix 2 和 ASP.NET MVC 4 中引入。它依赖于`SimpleMembershipProvider`. 在它`FormsAuthentication`用来管理 cookie 的幕后。所以我想如果你开始一个新项目，如果这个模型符合你的需要，你会选择新模型。请记住，`SimpleMembershipProvider`与原始提供程序相比，公开的功能更少。

最初的成员​​资格提供程序使用 SqlMembershipProvider，而后者又使用普通的 ADO.NET 来查询数据库。

SimpleMembershipProvider 使用`Database`WebMatrix 中引入的新类来查询 SQL 数据库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T19:29:04.780

这篇好文章解释了旧的 ASP.NET 成员资格提供程序和 SimpleMembershipProvider 之间的主要区别 - [http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and -the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

使用 SimpleMembershipProvider (WebMatrix.WebData.WebSecurity) 比旧的 ASP.NET Membership Provider（或 Universal Providers）更好

# javascript - 当其中一个使用 Ajax 调用时，页面上的其余菜单未正确加载

> ID：12679062
> 
> 赞同：0
> 
> 时间：2012-10-01T18:40:38.790
> 
> 标签：javascript, jquery, ajax, menu

我有一个从 MySql 数据库填充的动态菜单。当单击此菜单上的其中一项时，将发出 Ajax 请求，并相应地根据传递给 Ajax 请求的 id 突出显示树结构（产品类别及其各自的子类别）。

菜单的维护很简单`<ul><li></li></ul>`，当鼠标按钮悬停在菜单上的某个项目上时，会调用一些 jQuery 函数来弹出（下拉）子项目。进展顺利。

由于某些原因，需要在同一页面上显示相同类型的菜单（其中只有一个菜单使用 Ajax。其余的不需要使用 Ajax）。

问题是我必须加载 jQuery 函数才能分别弹出菜单项。在页面加载和 Ajax 请求上一次。否则，它不会弹出菜单。因此，在我看来，浏览器上激活了两个 JavaScript，它们阻止了同一页面上的其余菜单正确显示。

需要注意的是，当鼠标按钮悬停时。如果没有发出 Ajax 请求（通过上面提到的唯一使用 Ajax 调用的菜单），所有菜单都会正确显示。

我希望你能明白我的意思。很抱歉，我不能让我的问题比这更明确。为什么会这样？有针对这个的解决方法吗。

~~**编辑：**~~

我有这个用于弹出菜单的 jQuery 代码。

```
var arrowimages_new={down:['downarrowclass', 'category_parent_css_js/images/down.gif', 3], right:['rightarrowclass', 'category_parent_css_js/images/right.gif']}

var jqueryslidemenu_new={

    animateduration: {over: 200, out: 100}, //duration of slide in/ out animation, in milliseconds

    buildmenu_new:function(menuid, arrowsvar){
        jQuery(document).ready(function($){
            var $mainmenu=$("#"+menuid+">ul")
            var $headers=$mainmenu.find("ul").parent()
            $headers.each(function(i){
                var $curobj=$(this)
                var $subul=$(this).find('ul:eq(0)')
                this._dimensions={w:this.offsetWidth, h:this.offsetHeight, subulw:$subul.outerWidth(), subulh:$subul.outerHeight()}
                this.istopheader=$curobj.parents("ul").length==1? true : false
                $subul.css({top:this.istopheader? this._dimensions.h+"px" : 0})
                $curobj.children("a:eq(0)").css(this.istopheader? {paddingRight: arrowsvar.down[2]} : {}).append(
                    '<img src="'+ (this.istopheader? arrowsvar.down[1] : arrowsvar.right[1])
                    +'" class="' + (this.istopheader? arrowsvar.down[0] : arrowsvar.right[0])
                    + '" style="border:0;" />'
                )

                $curobj.hover(
                    function(e){
                        var $targetul=$(this).children("ul:eq(0)")
                        this._offsets={left:$(this).offset().left, top:$(this).offset().top}
                        var menuleft=this.istopheader? 0 : this._dimensions.w
                        menuleft=(this._offsets.left+menuleft+this._dimensions.subulw>$(window).width())? (this.istopheader? -this._dimensions.subulw+this._dimensions.w : -this._dimensions.w) : menuleft
                        if ($targetul.queue().length<=1) //if 1 or less queued animations
                            $targetul.css({left:menuleft+"px", width:this._dimensions.subulw+'px'}).slideDown(jqueryslidemenu.animateduration.over)
                    },
                    function(e){
                        var $targetul=$(this).children("ul:eq(0)")
                        $targetul.slideUp(jqueryslidemenu.animateduration.out)
                    }
                ) //end hover
            }) //end $headers.each()
            $mainmenu.find("ul").css({display:'none', visibility:'visible', zIndex:'99999'})
            $mainmenu.find("ul li").css({zIndex:'99999'})
        }) //end document.ready
    }
} 
```

* * *

`<script></script>`已经使用加载页面时使用的标记的 src 属性导入了相同的 jQuery 。

这是使用 Ajax 调用的函数。

```
function getParentId(parentId)
{
    $.ajax({
        datatype:"html",
        type: "GET",
        url: "ajax/ParentId.php",
        data: "ed_id=" + parentId+"&t="+new Date().getTime(),
        success: function(response)
        {       
            $('#originalMenu').html(response);
            jqueryslidemenu_new.buildmenu_new("myslidemenu", arrowimages_new); 
            // The above function is called from here.              
        },
        error: function(e)
        {
            alert('Error: ' + e);
        }
    });
    document.getElementById("txt_parent").value=parentId;   
} 
```

 ~~* * *

**编辑：**

以下是包含js的完整HTML代码（只是为了演示）。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test Menu</title>
<link rel="stylesheet" type="text/css" href="category_parent_css_js/cat_parent.css" />
<script src="js/jquery-1.6.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript" src="category_parent_css_js/cat_parent_js.js"></script>
<script type="text/javascript" language="javascript">

    //This code is used to pop up menu after an Ajax request is made.
    //On page load, exactly the same code which is an external js in on of preceding script tags is used. 

    var arrowimages_new={down:['downarrowclass', 'category_parent_css_js/images/down.gif', 3], right:['rightarrowclass', 'category_parent_css_js/images/right.gif']}

    var jqueryslidemenu_new={

        animateduration: {over: 200, out: 100}, //duration of slide in/ out animation, in milliseconds

        buildmenu_new:function(menuid, arrowsvar){
            jQuery(document).ready(function($){
                var $mainmenu=$("#"+menuid+">ul")
                var $headers=$mainmenu.find("ul").parent()
                $headers.each(function(i){
                    var $curobj=$(this)
                    var $subul=$(this).find('ul:eq(0)')
                    this._dimensions={w:this.offsetWidth, h:this.offsetHeight, subulw:$subul.outerWidth(), subulh:$subul.outerHeight()}
                    this.istopheader=$curobj.parents("ul").length==1? true : false
                    $subul.css({top:this.istopheader? this._dimensions.h+"px" : 0})
                    $curobj.children("a:eq(0)").css(this.istopheader? {paddingRight: arrowsvar.down[2]} : {}).append(
                        '<img src="'+ (this.istopheader? arrowsvar.down[1] : arrowsvar.right[1])
                        +'" class="' + (this.istopheader? arrowsvar.down[0] : arrowsvar.right[0])
                        + '" style="border:0;" />'
                    )

                    $curobj.hover(
                        function(e){
                            var $targetul=$(this).children("ul:eq(0)")
                            this._offsets={left:$(this).offset().left, top:$(this).offset().top}
                            var menuleft=this.istopheader? 0 : this._dimensions.w
                            menuleft=(this._offsets.left+menuleft+this._dimensions.subulw>$(window).width())? (this.istopheader? -this._dimensions.subulw+this._dimensions.w : -this._dimensions.w) : menuleft
                            if ($targetul.queue().length<=1) //if 1 or less queued animations
                                $targetul.css({left:menuleft+"px", width:this._dimensions.subulw+'px'}).slideDown(jqueryslidemenu.animateduration.over)
                        },
                        function(e){
                            var $targetul=$(this).children("ul:eq(0)")
                            $targetul.slideUp(jqueryslidemenu.animateduration.out)
                        }                                               
                    ) //end hover
                }) //end $headers.each()
                $mainmenu.find("ul").css({display:'none', visibility:'visible', zIndex:'99999'})
                $mainmenu.find("ul li").css({zIndex:'99999'})
            }) //end document.ready
        }
    }

    //This function just sends an Ajax request.

    function getParentId(parentId)
    {
        $.ajax({
            datatype:"html",
            type: "GET",
            url: "ajax/ParentId.php",
            data: "ed_id=" + parentId+"&t="+new Date().getTime(),
            success: function(response)
            {       
                $('#originalMenu').html(response);
                jqueryslidemenu_new.buildmenu_new("myslidemenu", arrowimages_new);              
                //This calls the above function to pop up the menu.
            },
            error: function(e)
            {
                alert('Error: ' + e);
            }
        });
    }
</script>
</head>

<body>
<form action="" id="dataForm" name="dataForm" method="post">
  <table width="970" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
      <td align="center" valign="middle" class="menu"><div id="header_top_menu">
          <div id="myslidemenu" class="jqueryslidemenu">
            <ul>
              <li>
                <div style='width:auto;cursor:hand;text-align:left; background-color:white; border:none; color:black; font-size:small;'>Menu 1</div>
                <ul>
                  <li><a href="#" onclick="getParentId(19); return false;">Menu Item 1</a>
                    <ul>
                      <li><a href="#" onclick="getParentId(21); return false;">Child Item 1</a></li>
                      <li><a href="#" onclick="getParentId(20); return false;">Child Item 2</a></li>
                      <li><a href="#" onclick="getParentId(20); return false;">Child Item 3</a></li>
                      <li><a href="#" onclick="getParentId(20); return false;">Child Item 4</a></li>
                      <li><a href="#" onclick="getParentId(20); return false;">Child Item 5</a></li>
                    </ul>
                  </li>
                </ul>
            </ul>
          </div>
        </div></td>
  </table>

  <br/><br/><br/><br/><br/>

  <table width="970" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
      <td align="center" valign="middle" class="menu"><div id="header_top_menu">
          <div id="myslidemenu" class="jqueryslidemenu">
            <ul>
              <li>
                <div style='width:auto;cursor:hand;text-align:left; background-color:white; border:none; color:black; font-size:small;'>Menu 2</div>
                <ul>
                  <li><a href="#" onclick="getParentId(19); return false;">Menu Item 1</a>
                    <ul>
                      <li><a href="#">Child Item 1</a></li>
                      <li><a href="#">Child Item 2</a></li>
                      <li><a href="#">Child Item 3</a></li>
                      <li><a href="#">Child Item 4</a></li>
                      <li><a href="#">Child Item 5</a></li>
                    </ul>
                  </li>
                </ul>
            </ul>
          </div>
        </div></td>
  </table>
</form>
</body>
</html> 
```

此 HTML 显示两个菜单，`Menu 1`和`Menu 2`. 当一个项目`Menu 1`被点击时，一个 Ajax 请求被发送到一个在这个演示中什么都不做的 URL。在发出 Ajax 请求之前，这两个菜单都会正确显示。[菜单 1](https://i.stack.imgur.com/RxFzY.png)如下所示。

![在此处输入图像描述](../Images/6afe65db853d3dbe6769487ffa64a9ea.png)

[菜单 2](https://i.stack.imgur.com/ZzBPg.png)如下所示（与菜单 1 相同）。

![在此处输入图像描述](../Images/e2bbf16b0e2841cf4d995c8a887b3e68.png)

**菜单 1**负责发送一个 Ajax 请求，该请求在单击一个项目时发生`Menu 1`（在这种情况下，它什么也不做。在这种情况下，这个 Ajax 请求发送到的页面**完全留空**。这只是一个演示）。

在这两种情况下，当鼠标指针悬停在 上时`Menu Item 1`，它会打开一个子菜单，其中包含`Child Item 1`......`Child Item 5`

发出 Ajax 请求后，如果我将鼠标悬停在`Menu Item 1`of上`Menu 2`，它将无法正常运行，并且[看起来](https://i.stack.imgur.com/tQiDo.png)如下所示。

![在此处输入图像描述](../Images/44f21b8dc5bb677ee349dfee9a100c83.png)

选择`Menu Item 1`打开时，*该父菜单*( )**的最后一个子菜单**会立即出现。为什么会这样？`Menu 2`***`Menu Item 1`***

 ***在页面加载时用于弹出菜单的 js 代码如下导入代码中所述。

```
<script type="text/javascript" language="javascript" src="category_parent_css_js/cat_parent_js.js"></script> 
```

这与代码片段中提到的js代码完全相同。此片段中的 js 代码用于在发出 Ajax 请求后弹出菜单。

* * *

如果您需要 CSS，如下所示，由以下标签链接。

```
<link rel="stylesheet" type="text/css" href="category_parent_css_js/cat_parent.css" /> 
```

* * *

```
.jqueryslidemenu{font:bold 9px Tahoma, Verdana, sans-serif;color:#fff;width: 100%;text-align:left;z-index:99999}
.jqueryslidemenu ul{margin: 0;padding: 0px;list-style-type: none;z-index:99999}
.jqueryslidemenu ul li{position: relative;display: inline;float: left;z-index:auto}
.jqueryslidemenu ul li a{font:bold 12px Tahoma, Verdana, sans-serif;display: block;background:#000;color: #fff;padding: 3px 3px;text-decoration: none;z-index:99999}
* html .jqueryslidemenu ul li a{display: inline-block;z-index:99999}
.jqueryslidemenu ul li a:link, .jqueryslidemenu ul li a:visited{color: #fff;text-decoration: none;z-index:99999}   
.jqueryslidemenu ul li a:hover{background:#000;text-decoration:none;color: #03C;z-index:99999}
.jqueryslidemenu ul li ul{position: absolute;left: 0;display: block;visibility: hidden;z-index:99999}
.jqueryslidemenu ul li ul li{display: list-item;float: none;z-index:99999}
.jqueryslidemenu ul li ul li ul{top:0;z-index:99999}
.jqueryslidemenu ul li ul li a{font:bold 9px Tahoma, Verdana, Geneva, sans-serif;width: 140px;margin: 0;padding: 6px;border-top-width: 0;border-bottom: 1px solid gray;z-index:99999}
.jqueryslidemenuz ul li ul li a:hover{color:#fff; background:#000;z-index:99999}
.downarrowclass{position: absolute;top: 8px;right: 7px;display:none;z-index:99999}
.rightarrowclass{position: absolute;top: 6px;right: 5px;z-index:99999} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:56:05.090

我查看了您的 HTML、Javascript 和 CSS 代码。我纠正了我的 IDE 突出显示的所有错误，并将您的所有代码归结为 1 个单个文件以进行测试。我创建了一个 ajax 方法来只返回你试图替换的菜单的 HTML，我不得不重命名一些变量。此外，我并没有真正触及您的设置。我确实相信您正在尝试使事情变得更复杂，但是没有完整的情景草图，也没有更多时间为您制作概念证明，因此我向您展示了以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test Menu</title>
    <style type="text/css">
        .jqueryslidemenu
        {
            font: bold 9px Tahoma, Verdana, sans-serif;
            color: #fff;
            width: 100%;
            text-align: left;
            z-index: 99999;
        }

            .jqueryslidemenu ul
            {
                margin: 0;
                padding: 0px;
                list-style-type: none;
                z-index: 99999;
            }

                .jqueryslidemenu ul li
                {
                    position: relative;
                    display: inline;
                    float: left;
                    z-index: auto;
                }

                    .jqueryslidemenu ul li a
                    {
                        font: bold 12px Tahoma, Verdana, sans-serif;
                        display: block;
                        background: #000;
                        color: #fff;
                        padding: 3px 3px;
                        text-decoration: none;
                        z-index: 99999;
                    }

                    * html .jqueryslidemenu ul li a
                    {
                        display: inline-block;
                        z-index: 99999;
                    }

                        .jqueryslidemenu ul li a:link, .jqueryslidemenu ul li a:visited
                        {
                            color: #fff;
                            text-decoration: none;
                            z-index: 99999;
                        }

                        .jqueryslidemenu ul li a:hover
                        {
                            background: #000;
                            text-decoration: none;
                            color: #03C;
                            z-index: 99999;
                        }

                    .jqueryslidemenu ul li ul
                    {
                        position: absolute;
                        left: 0;
                        display: block;
                        visibility: hidden;
                        z-index: 99999;
                    }

                        .jqueryslidemenu ul li ul li
                        {
                            display: list-item;
                            float: none;
                            z-index: 99999;
                        }

                            .jqueryslidemenu ul li ul li ul
                            {
                                top: 0;
                                z-index: 99999;
                            }

                            .jqueryslidemenu ul li ul li a
                            {
                                font: bold 9px Tahoma, Verdana, Geneva, sans-serif;
                                width: 140px;
                                margin: 0;
                                padding: 6px;
                                border-top-width: 0;
                                border-bottom: 1px solid gray;
                                z-index: 99999;
                            }

        .jqueryslidemenuz ul li ul li a:hover
        {
            color: #fff;
            background: #000;
            z-index: 99999;
        }

        .downarrowclass
        {
            position: absolute;
            top: 8px;
            right: 7px;
            display: none;
            z-index: 99999;
        }

        .rightarrowclass
        {
            position: absolute;
            top: 6px;
            right: 5px;
            z-index: 99999;
        }
    </style>
    <script src="/Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script type="text/javascript" language="javascript">

        var arrowimages_new = { down: ['downarrowclass', 'category_parent_css_js/images/down.gif', 3], right: ['rightarrowclass', 'category_parent_css_js/images/right.gif'] };

        var jqueryslidemenu_new = {
            animateduration: { over: 200, out: 100 }, //duration of slide in/ out animation, in milliseconds

            buildmenu_new: function (menuid, arrowsvar) {
                jQuery(document).ready(function ($) {
                    var $mainmenu = $("#" + menuid + ">ul");
                    var $headers = $mainmenu.find("ul").parent();
                    $headers.each(function (i) {
                        var $curobj = $(this);
                        var $subul = $(this).find('ul:eq(0)');
                        this._dimensions = { w: this.offsetWidth, h: this.offsetHeight, subulw: $subul.outerWidth(), subulh: $subul.outerHeight() };
                        this.istopheader = $curobj.parents("ul").length == 1 ? true : false;
                        $subul.css({ top: this.istopheader ? this._dimensions.h + "px" : 0 });
                        $curobj.children("a:eq(0)").css(this.istopheader ? { paddingRight: arrowsvar.down[2] } : {}).append(
                            '<img src="' + (this.istopheader ? arrowsvar.down[1] : arrowsvar.right[1])
                                + '" class="' + (this.istopheader ? arrowsvar.down[0] : arrowsvar.right[0])
                                + '" style="border:0;" />'
                        );

                        $curobj.hover(
                            function (e) {
                                var $targetul = $(this).children("ul:eq(0)");
                                this._offsets = { left: $(this).offset().left, top: $(this).offset().top };
                                var menuleft = this.istopheader ? 0 : this._dimensions.w;
                                menuleft = (this._offsets.left + menuleft + this._dimensions.subulw > $(window).width()) ? (this.istopheader ? -this._dimensions.subulw + this._dimensions.w : -this._dimensions.w) : menuleft;
                                if ($targetul.queue().length <= 1) //if 1 or less queued animations
                                    $targetul.css({ left: menuleft + "px", width: this._dimensions.subulw + 'px' }).slideDown(jqueryslidemenu_new.animateduration.over);
                            },
                            function (e) {
                                var $targetul = $(this).children("ul:eq(0)");
                                $targetul.slideUp(jqueryslidemenu_new.animateduration.out);
                            }
                        ); //end hover
                    }); //end $headers.each()
                    $mainmenu.find("ul").css({ display: 'none', visibility: 'visible', zIndex: '99999' });
                    $mainmenu.find("ul li").css({ zIndex: '99999' });
                }); //end document.ready
            }
        };

        //This function just sends an Ajax request.

        function getParentId(parentId) {
            $.ajax({
                datatype: "html",
                type: "GET",
                url: "/Home/Test2",
                data: "ed_id=" + parentId + "&t=" + new Date().getTime(),
                success: function (response) {
                    $('#myslidemenu').replaceWith(response);
                    jqueryslidemenu_new.buildmenu_new("myslidemenu", arrowimages_new);
                    //This calls the above function to pop up the menu.
                },
                error: function (e) {
                    alert('Error: ' + e);
                }
            });
        }

        $(function () {
            jqueryslidemenu_new.buildmenu_new("myslidemenu", arrowimages_new);
            jqueryslidemenu_new.buildmenu_new("myslidemenu2", arrowimages_new);
        });
    </script>
</head>

<body>
    <form action="" id="dataForm" name="dataForm" method="post">
        <table width="970" border="0" align="center" cellpadding="0" cellspacing="0">
            <tr>
                <td align="center" valign="middle" class="menu">
                    <div id="header_top_menu">
                        <div id="myslidemenu" class="jqueryslidemenu">
                            <ul>
                                <li>
                                    <div style='width: auto; cursor: pointer; text-align: left; background-color: white; border: none; color: black; font-size: small;'>Menu 1</div>
                                    <ul>
                                        <li><a href="#" onclick="getParentId(19); return false;">Menu Item 1</a>
                                            <ul>
                                                <li><a href="#" onclick="getParentId(21); return false;">Child Item 1</a></li>
                                                <li><a href="#" onclick="getParentId(20); return false;">Child Item 2</a></li>
                                                <li><a href="#" onclick="getParentId(20); return false;">Child Item 3</a></li>
                                                <li><a href="#" onclick="getParentId(20); return false;">Child Item 4</a></li>
                                                <li><a href="#" onclick="getParentId(20); return false;">Child Item 5</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </td>
            </tr>
        </table>

        <br />
        <br />
        <br />
        <br />
        <br />

        <table width="970" border="0" align="center" cellpadding="0" cellspacing="0">
            <tr>
                <td align="center" valign="middle" class="menu">
                    <div id="header_top_menu2">
                        <div id="myslidemenu2" class="jqueryslidemenu">
                            <ul>
                                <li>
                                    <div style='width: auto; cursor: pointer; text-align: left; background-color: white; border: none; color: black; font-size: small;'>Menu 2</div>
                                    <ul>
                                        <li><a href="#" onclick="getParentId(19); return false;">Menu Item 1</a>
                                            <ul>
                                                <li><a href="#">Child Item 1</a></li>
                                                <li><a href="#">Child Item 2</a></li>
                                                <li><a href="#">Child Item 3</a></li>
                                                <li><a href="#">Child Item 4</a></li>
                                                <li><a href="#">Child Item 5</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

我相信解决您的问题的最重要修复是删除双 ID（这会混淆您的 javascript 选择）并正确确保所有 HTML 标记都已关闭（这使得浏览器难以理解您想要构建的内容）。也没有必要双重加载你的脚本。一旦它出现在页面上，您就可以重复使用它。

如果您有任何问题，请告诉我。

**编辑**

为了完成起见，我将您看到的 AJAX 调用的返回 HTML 添加到“/Home/Test2”：

```
<div id="myslidemenu" class="jqueryslidemenu">
    <ul>
        <li>
            <div style='width: auto; cursor: pointer; text-align: left; background-color: white; border: none; color: black; font-size: small;'>Menu 1</div>
            <ul>
                <li><a href="#" onclick="getParentId(19); return false;">Menu Item 1</a>
                    <ul>
                        <li><a href="#" onclick="getParentId(21); return false;">Child Item 1</a></li>
                        <li><a href="#" onclick="getParentId(20); return false;">Child Item 2</a></li>
                        <li><a href="#" onclick="getParentId(20); return false;">Child Item 3</a></li>
                        <li><a href="#" onclick="getParentId(20); return false;">Child Item 4</a></li>
                        <li><a href="#" onclick="getParentId(20); return false;">Child Item 5</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:25:19.450

**更新：**这个回答是基于[jessegavin 的回答](https://stackoverflow.com/questions/2420970/how-can-i-get-selector-from-jquery-object)

这类问题通常与元素在 ajax 调用后分离的事实有关。尝试更改`.hover()`with `.on()`，如果我没记错的话应该是这样的：

```
 //add the following javascript function:
            function getSelector(e){
               var selector = e.parents()
               .map(function() { return this.tagName; })
               .get().reverse().join(" ");

               if (selector) { 
                 selector += " "+ e[0].nodeName;
               }

               var id = e.attr("id");

               if (id) { 
                 selector += "#"+ id;
               }

               var classNames = e.attr("class");
               if (classNames) {
                 selector += "." + $.trim(classNames).replace(/\s/gi, ".");
               } 
               return selector;
            }

            $('body').on({
                mouseenter:
                function(e){
                    var $targetul=$(this).children("ul:eq(0)")
                    this._offsets={left:$(this).offset().left, top:$(this).offset().top}
                    var menuleft=this.istopheader? 0 : this._dimensions.w
                    menuleft=(this._offsets.left+menuleft+this._dimensions.subulw>$(window).width())? (this.istopheader? -this._dimensions.subulw+this._dimensions.w : -this._dimensions.w) : menuleft
                    if ($targetul.queue().length<=1) //if 1 or less queued animations
                        $targetul.css({left:menuleft+"px", width:this._dimensions.subulw+'px'}).slideDown(jqueryslidemenu.animateduration.over)
                },
                mouseleave:
                function(e){
                    var $targetul=$(this).children("ul:eq(0)")
                    $targetul.slideUp(jqueryslidemenu.animateduration.out)
                }
            },getSelector($curobj)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:51:16.297

改变你`hover(enterHandler,exitHandler)`的

```
$(body).on('mouseenter', $curobj, enterHandler);
$(body).on('mouseleave', $curobj, exitHandler); 
```

其中`enterHandler`和`exitHandler`分别是进入和退出处理程序***~~

# oracle - 在 Unix 上的 SQL Plus 中执行多行语句

> ID：12679063
> 
> 赞同：4
> 
> 时间：2012-10-01T18:40:40.603
> 
> 标签：oracle, oracle11g, sqlplus

我正在尝试编写一个简单的游标并在 Unix、SQL Plus 上的命令行 Oracle 客户端中运行它。我大部分时间都在使用单行语句，一旦写完就找不到执行多行语句的方法。有人可以帮忙吗？

这是我的代码：

```
DECLARE 
   TYPE array_t IS varray(4) OF varchar2(10); 
   ARRAY array_t := array_t('foo', 'bar', 'stack', 'overflow');
BEGIN 
   FOR i IN 1..array.count loop
       dbms_output.put_line(array(i)); 
   END loop; 
END; 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T18:43:35.837

要在 SQL*PLUS 中执行 PL/SQL 块，请在 PL/SQL 块的末尾添加斜杠：

```
SQL> DECLARE
  2     TYPE array_t IS varray(4) OF varchar2(10);
  3     ARRAY array_t := array_t('foo', 'bar', 'stack', 'overflow');
  4  BEGIN
  5     FOR i IN 1..array.count loop
  6         dbms_output.put_line(array(i));
  7     END loop;
  8  END;
  9  / 
```

# javascript - 我是否在创建内存泄漏？

> ID：12679064
> 
> 赞同：11
> 
> 时间：2012-10-01T18:40:41.050
> 
> 标签：javascript, memory-leaks

我有一个 JavaScript 闭包，我会在我的 Web 应用程序的整个生命周期中不断重新创建它（单个完整的 ajax 页面）。

我想知道它是否会造成内存泄漏。

这是一个示例[JSFIDDLE](http://jsfiddle.net/bqqjU/)

有问题的代码：

```
function CreateLinks() {

    var ul = $("<ul></ul>").appendTo('div#links');

    for (var i in myLinks) {

        var li = $('<li>' + myLinks[i].name + '</li>').appendTo(ul);

        //closure starts here
        (function (value) {
            li.click(function (e) {
                $('div#info').append('<label>' + value + '</label><br />');
                RecreateLinks();
            });
        })(myLinks[i].value);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:06:07.587

如果您确保避免`click`在`RecreateLinks()`函数中绑定多个处理程序，您应该没问题；这可以通过显式解除绑定现有节点、删除 DOM 节点或确保您不会添加多个`click`处理程序来完成。

浏览器在内存分配策略方面做得越来越好，但你不应该假设太多。如果内存使用是一个大问题，请尽量避免创建太多您不确定它们是否会被垃圾收集的闭包。一种这样的方法是用于`.data()`存储您的值对象，然后使用通用的单击处理程序而不是闭包。

分析 JavaScript 并不是那么简单；Chrome 确实有一个 Profile 工具，可以监控 CPU 和数据性能。这可以让您很好地衡量预期的内存消耗，但 Chrome 并不是所有的浏览器，请记住这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:17:08.680

根据浏览器的智能程度，最好在您的属性上添加“myLinks[i].value”，`<li>`而不是通过闭包传递。当事件处理程序从其范围之外引用变量时，某些愚蠢的浏览器会出现收集垃圾的问题。JavaScript 和 DOM 运行两种不同的 GC，而 JS 一个没有意识到 DOM 元素/事件处理程序已经消失并且变量不再使用。这个问题可以通过通过 javascript 正确删除事件处理程序来解决，而不是仅仅处理它所附加的元素。

类似于：

```
li.attr('lvalue',myLinks[i].value);
...
var value = $(this).attr('lvalue'); 
```

此设置还允许您使用

```
$('#links > ul > li').live('click',function(){...}); 
```

这将消除每次添加单个事件的需要。

# dll - AC_SEARCH_LIBS 当函数名不同时

> ID：12679072
> 
> 赞同：0
> 
> 时间：2012-10-01T18:41:28.607
> 
> 标签：dll, makefile, autoconf

我有一个使用`boost_regex`. 该库`boost_regex`有一个未定义的符号，其名称与我使用的 boost 版本不同。例如，当我使用 boost 版本 1.49 时，`libboost_regex.so`包含一个未定义的符号，称为`u_tolower_49`. 这个符号可以在 中找到`libicuuc.so`。

显然，如果没有 icu 的用户编译我的程序，链接阶段将失败，因为缺少该符号。所以我决定将它添加到 configure.ac 以便在开始编译之前配置阶段失败。

**配置.ac**

```
...
AC_SEARCH_LIBS([u_tolower_49],[icuuc], , AC_MSG_ERROR([Unable to find icuuc, make sure ICU is installed.]))
... 
```

现在我的问题是，当用户的 boost 版本为 48 时，符号不再命名`u_tolower_49`，而是`u_tolower_48`.

我如何调整 configure.ac 以确保配置失败，而不管用户的 boost 版本如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:31:47.723

嵌套检查：

```
AC_SEARCH_LIBS([u_tolower_49],[icuuc],[],[
    AC_SEARCH_LIBS([u_tolower_48],[icuuc],[],[
        AC_MSG_ERROR([Unable to find icuuc, make sure ICU is installed.])
    ])
]) 
```

# c# - 具有异步套接字的 C# 游戏客户端

> ID：12679073
> 
> 赞同：1
> 
> 时间：2012-10-01T18:41:41.127
> 
> 标签：c#, sockets, asynchronous, client

我正在用 C# 开发一个小型在线游戏。目前我正在使用简单的同步 TCP 套接字。但是现在（因为这是某种“学习项目”）我想转换为异步套接字。在客户端我有方法：`byte[] SendAndReceive(Opcode op, byte[] data)`. 但是当我使用异步套接字时，这不再可能了。例如，我的`MapManager`班级首先检查地图是否在本地文件夹中（校验和），如果不是，则将从服务器下载地图。

所以我的问题是：有没有什么好的方法可以发送一些数据并获得答案，而无需将接收到的数据保存到某种缓冲区并轮询直到该缓冲区不为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:48:17.627

查看 IO Completion Ports 和随附的 SocketAsyncEventArgs。它会在数据传输时引发事件，但您仍然需要一个缓冲区。只是没有投票。它快速且非常有效。

[http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)

和 MSDN 上的另一个例子

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:46:04.220

您所拥有的代码示例会有所帮助，但我建议为每个带有线程管理器的套接字连接使用一个新线程。Lmk 如果这有意义或适用于此。:)

# c - *几乎*完美的 C 壳管道

> ID：12679075
> 
> 赞同：14
> 
> 时间：2012-10-01T18:41:47.383
> 
> 标签：c, linux, shell, pipe

我正在用 C 编写一个小型 linux shell，并且非常接近完成。我接受用户的命令并将其存储在**args**中，由空格分隔。在以下示例中，假设 args 包含以下内容：

`args[] = {"ls", "-l", "|", "wc"};`

我的函数接受**args**并接受有多少个**管道**。我已经尽可能多地注释了我的代码。这里是：

```
int do_command(char **args, int pipes) {
    // The number of commands to run
    const int commands = pipes + 1;
    int i = 0;

    int pipefds[2*pipes];

    for(i = 0; i < pipes; i++){
        if(pipe(pipefds + i*2) < 0) {
            perror("Couldn't Pipe");
            exit(EXIT_FAILURE);
        }
    }

    int pid;
    int status;

    int j = 0;
    int k = 0;
    int s = 1;
    int place;
    int commandStarts[10];
    commandStarts[0] = 0;

    // This loop sets all of the pipes to NULL
    // And creates an array of where the next
    // Command starts

    while (args[k] != NULL){
        if(!strcmp(args[k], "|")){
            args[k] = NULL;
            // printf("args[%d] is now NULL", k);
            commandStarts[s] = k+1;
            s++;
        }
        k++;
    }

    for (i = 0; i < commands; ++i) {
        // place is where in args the program should
        // start running when it gets to the execution
        // command
        place = commandStarts[i];

        pid = fork();
        if(pid == 0) {
            //if not last command
            if(i < pipes){
                if(dup2(pipefds[j + 1], 1) < 0){
                    perror("dup2");
                    exit(EXIT_FAILURE);
                }
            }

            //if not first command&& j!= 2*pipes
            if(j != 0 ){
                if(dup2(pipefds[j-2], 0) < 0){
                    perror("dup2");
                    exit(EXIT_FAILURE);
                }
            }

            int q;
            for(q = 0; q < 2*pipes; q++){
                    close(pipefds[q]);
            }

            // The commands are executed here, 
            // but it must be doing it a bit wrong          
            if( execvp(args[place], args) < 0 ){
                    perror(*args);
                    exit(EXIT_FAILURE);
            }
        }
        else if(pid < 0){
            perror("error");
            exit(EXIT_FAILURE);
        }

        j+=2;
    }

    for(i = 0; i < 2 * pipes; i++){
        close(pipefds[i]);
    }

    for(i = 0; i < pipes + 1; i++){
        wait(&status);
    }
} 
```

我的问题是，虽然程序可以正确执行，但它的行为很*奇怪*，我希望你能帮助我。

例如 hen 我运行**ls | wc**，输出是**ls | wc**，但它也会在其下方打印一个简单的**ls**的输出，即使它应该只是输出的**wc**。

作为另一个例子，当我尝试**ls -l | wc ，** **wc**的第一个数字出现，但随后**ls -l**的输出显示在它的下方，即使它应该只是输出的**wc**。

提前致谢！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T19:17:37.830

好的，我发现了一个小错误。这个

```
 if( execvp(args[place], args) < 0 ){ 
```

应该

```
 if( execvp(args[place], args+place) < 0 ){ 
```

您的版本将 args 用于所有其他命令的第一个命令。除此之外，它对我有用。

# ruby-on-rails - 如何处理 UTC 时间和 Rails/ActiveRecord

> ID：12679084
> 
> 赞同：0
> 
> 时间：2012-10-01T18:42:33.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone, ruby-on-rails-3.2, utc

我正在使用 Rails 3.2.8。当我生成带有时间字段或日期时间字段的脚手架时。HTML 表单字段预先填充了 UTC 中的当前日期/时间。很好，它预先填充了当前的日期/时间，但因为它是 UTC，我们必须每次将时间改回 7 小时（有时也需要将日期设置回 1，也可能是月份和年份）。然后似乎UTC时间存储在数据库中，所以如果我在本地时间记录它，我也会在显示/编辑它时遇到问题。

我查看[了表单助手的 Ruby 文档以更好地处理本地时间](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select)，但我没有看到任何相关内容。

在 Rails 中处理和显示日期和时间的最佳方法是什么？

***更新***：为了澄清，我喜欢将 UTC 时间存储在数据库中的想法。我只希望`time_select`和`datetime_select`表单助手编辑用户本地时区的时间。而且，当然，我想轻松地显示用户本地时区的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:12:05.747

您必须将时区设置为在`before/around_filter`. 这必须像这样完成：

```
Time.zone = "Kyiv" 
```

可以在其 API 中找到一个示例：http: [//api.rubyonrails.org/classes/Time.html#method-c-zone-3D](http://api.rubyonrails.org/classes/Time.html#method-c-zone-3D)。

运行`rake time:zones:all`以查看所有这些。

所有的转换都必须在幕后为您处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:31:56.633

这在过去帮助了我。您可以执行以下操作：

```
Time.now.in_time_zone("Central Time (US & Canada)") 
```

请参阅[Rails：将 UTC DateTime 转换为另一个时区](https://stackoverflow.com/questions/2695837/rails-convert-utc-datetime-to-another-time-zone)

# node.js - Meteor JS 中如何实现热重载？

> ID：12679087
> 
> 赞同：4
> 
> 时间：2012-10-01T18:42:44.527
> 
> 标签：node.js, socket.io, reload, meteor

我很想知道当文件更改时他们使用什么样的策略将代码推送到浏览器，但我在互联网上没有找到任何关于它的信息。我还在他们的[GitHub 存储库](https://github.com/meteor/meteor)中搜索了代码，但无济于事。

那么，Meteor 中的热重载是如何实现的呢？有没有其他选择？是否可以在 Node 中使用 SocketIO 实现代码和资产重新加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:40:11.657

你可以从[这里](http://docs.meteor.com/#meteor_deps)开始：

> Meteor 的响应式实现简短而甜蜜，大约 50 行代码。您可以使用 Meteor.deps 模块自行添加新的反应式上下文或数据源。
> 
> Meteor 有一个简单的依赖跟踪系统，因此它可以在修改 Session 变量或数据库查询更改时自动重新渲染模板等。
> 
> 与大多数其他系统不同，您不必手动声明这些依赖项——它“正常工作”。该机制简单高效。当您调用支持响应式更新的函数（例如，数据库查询）时，它会自动保存当前的“无效上下文”对象（如果有）（例如，正在呈现的当前模板。）稍后，当数据更改时，它可以“使" 这个上下文（告诉模板重新渲染自己。）整个实现大约有 50 行代码。
> 
> 开发人员，尤其是包作者，可以使用失效上下文来实现额外的响应式数据源或编写自动注册对响应式数据源的依赖关系的函数。

# ios - 我应该使用什么空间索引算法？

> ID：12679094
> 
> 赞同：9
> 
> 时间：2012-10-01T18:43:16.023
> 
> 标签：ios, algorithm, mkannotation, kdtree, spatial-index

我想为我的`MKAnnotations`. 目前，当我尝试根据距离标准过滤它们时，速度非常慢（3-4k 个位置，目前使用简单的双精度非常慢`for`......）。

我想创建`MKAnnotations`, 的集群来决定它是否靠近另一个。此外，这些位置在某种程度上是（创建）顺序，并且需要“上一个”/“下一个”功能来“跳转”（这不是必须的）。我已经阅读了`kd-tree`和`r-tree`结构，它们似乎都满足过滤/聚类的快速距离/邻居获取选项，但我不确定哪个最适合我，或者是否还有其他选项。我应该使用什么算法/数据结构？

**更新：**我将这些位置存储在核心数据数据库中，它们代表一条路径。当地图打开时，它们被提取到一个数组中，然后我只使用该数组进行距离计算和注释创建。当用户移动/缩放地图时，我会遍历它们并决定需要在地图上更改哪些内容，因此整个内容都是静态的。据我了解，如果我使用一棵树，我可以将位置存储在那里，当发生缩放/移动时，我只需搜索它并获取新区域中的位置。这是真的 ？

即使在动态情况下，当我可以向该数组添加新位置时，它也将是一次插入，并且很少发生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T21:02:40.433

这在很大程度上取决于您的*使用*模式（我的写入方式，例如，在内存中或在磁盘上）以及您的数据看起来如何（这就是它的分布方式）。

R-trees 很好，因为它们是*平衡*的，并且允许更新。根据我的经验，R*-tree 显然比其他变体更好，因为它具有拆分策略。好处是它比其他策略产生更多的方形页面，因此对于许多查询，您将需要扫描更少的页面。

如果您在内存中并且是静态的，kd-trees 就很好。更新它们非常糟糕，您需要经常重建索引。

如果您的数据不经常更改，则 R-tree 的批量加载效果非常好。您可以进行**Sort-Tile-Recursive**批量加载，这本质上需要（部分）交替对 X 和 Y 上的数据进行排序，因此`O(n log n)`构建树的成本很低；与批量加载 kd-tree 非常相似，不同之处在于您是多拆分而不是二进制拆分。这很受欢迎。

此外，您可以跟踪每个页面中的对象数量。在地图上显示内容时，当页面在屏幕上显示得太小（即小于标记）时，您可能希望尽早停止。此时，您不会扫描该页面，而只会获取对象的数量并将其显示为集群标记，直到用户放大。

对于具有有限值域的二维数据，不要忽视简单的事情。四叉树也可以很好地工作！简单性可以使优化事物变得更加容易。或经典的网格方法。如果您的用户倾向于将他们的注释分散在一个区域中（而不是将它们全部放在一个地方），您可以只计算整数 x,y 网格坐标，然后对它们进行散列并为每个网格单元制作一个列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:00:39.410

我不是 iOS 开发人员，但我查看了文档并发现了这一点：

> **MKMapView.annotationsInMapRect：**
> 
> 返回位于指定地图矩形中的注释对象。
> 
> `(NSSet *)annotationsInMapRect:(MKMapRect)mapRect`
> 
> **参数**
> 
> *   *mapRect*：您要搜索注释的地图部分。
> 
> **返回值** 位于 mapRect 中的注释对象集。
> 
> **讨论** 此方法提供了一种快速检索地图特定部分中的注释对象的方法。这种方法比你自己对 annotations 属性中的对象进行线性搜索要快得多。

这表明`NKMapView`已经在空间索引结构中组织了注释。这种方法能满足您的需求吗？

如果没有，我会寻找任何 2D 空间索引结构的现有开源实现，并选择具有最佳文档、最干净接口等的开源实现，而不用担心效率。如果您需要从头开始编写代码，我认为四叉树将是最容易实现的。另一方面，[关于 R-tree 的 Wikipedia 文章](http://en.wikipedia.org/wiki/R-tree)似乎比 KD Tree 或 Quadtree 更专门针对映射。

# filepicker.io - Filepicker.io - 禁用闪存回退

> ID：12679095
> 
> 赞同：4
> 
> 时间：2012-10-01T18:43:26.343
> 
> 标签：filepicker.io

我想知道是否可以禁用 Filepicker.io 中的闪存回退功能？如果您碰巧在浏览器中运行了 Flash 阻止程序，当文件选择器的模式出现时，您会看到一个难看的 Flash 图标。如果可以通过 Javascript 选项或仪表板禁用此功能，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:31:30.917

目前没有办法做到这一点。随时发送电子邮件至 contact@filepicker.io 并附上屏幕截图，以便我们了解下一步。

# file-io - Jena 的 I/O 编码问题

> ID：12679105
> 
> 赞同：1
> 
> 时间：2012-10-01T18:43:57.483
> 
> 标签：file-io, encoding, rdf, jena, utf

我正在使用[Jena](http://jena.apache.org/)生成一些 RDF 文件。整个应用程序使用 utf-8 文本。源代码也存储在 utf-8 中。

当我在控制台上打印一个包含非英文字符的字符串时，我得到了正确的格式，例如`Est un lieu généralement officielle assis...`.

然后，我使用 RDF 编写器输出文件：

```
Model m = loadMyModelWithMultipleLanguages()
log.info( getSomeStringFromModel(m) ) // log4j, correct output
RDFWriter w = m.getWriter( "RDF/XML" ) // default enc: utf-8
w.setProperty("showXmlDeclaration","true") // optional  
OutputStream out = new FileOutputStream(pathToFile)
w.write( m, out, "http://someurl.org/base/" )
// file contains garbled text 
```

RDF 文件以： 开头`<?xml version="1.0"?>`。如果我添加 utf-8 没有任何变化。

默认情况下，文本应编码为 utf-8。生成的 RDF 文件验证正常，但是当我使用任何编辑器/可视化器（vim、Firefox 等）打开它时，非英文文本都被弄乱了：`Est un lieu g√©n√©ralement officielle assis ...`或`Est un lieu g\u221A\u00A9n\u221A\u00A9ralement officielle assis...`. （无论哪种方式，从用户的角度来看，这显然是不可接受的）。Jena 支持的任何输出格式（RDF、NT 等）都会出现同样的问题。

我真的找不到一个合乎逻辑的解释。[官方文档](http://jena.sourceforge.net/IO/iohowto.html#encoding)似乎没有解决这个问题。

我可以运行任何提示或测试来弄清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:50:20.590

我的猜测是你的字符串搞砸了，你的`printStringFromModel()`方法只是碰巧以一种不小心使它们正确显示的方式输出它们，但是如果没有更多信息就很难说。

您正在指示 Jena 在 RDF/XML 文件中包含 XML 声明，但不要说明 Jena 在 XML 声明中声明的编码（如果有的话）。这将有助于了解。

您也没有展示如何在`printStringFromModel()`方法中打印字符串。

此外，在 Firefox 中，转到查看菜单，然后转到字符编码。选择什么编码？如果不是 UTF-8，那么当你选择 UTF-8 时会发生什么？选择其他编码时，您是否可以正确显示内容？

**编辑：**您在帖子中显示的片段看起来不错，应该可以工作。我最好的猜测是，将源字符串读入 Jena 模型的代码已损坏，并将 UTF-8 源读取为 ISO-8859-1 或类似的东西。您应该能够通过检查`length()`其中一个有问题的字符串来确认或取消确认：如果每个麻烦的字符`é`都算作两个，那么错误就在阅读中；如果它被正确地算作一个，那么它正在写作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:52:27.657

我的提示/答案是在 3 个地方检查字节序列：

1.  数据源。使用[十六进制编辑器](http://www.mobilefish.com/services/hex_editor/hex_editor.php)，确认源数据中的 é 字符由预期的 utf-8 十六进制序列 0xc3a8 表示。
2.  在记忆中。在调用 printStringFromModel 之后，立即设置断点并检查字符串中的字节（或[转换为十六进制并打印出来](https://stackoverflow.com/questions/923863/converting-a-string-to-hexadecimal-in-java)。
3.  输出文件。同样，使用十六进制编辑器检查字节序列是 0xc3a8。

这将准确地告诉字节在程序路径上发生了什么，以及它们偏离预期的 0xc3a8 的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:33:56.293

解决这个问题的最好方法是打包你能证明问题的最小代码单元，并在[Jena Jira](https://issues.apache.org/jira/browse/JENA)上提交一个完整的、可运行的测试用例作为票证。

# typescript - TypeScript 是否有专用的 VM，还是仅编译为 js？

> ID：12679107
> 
> 赞同：9
> 
> 时间：2012-10-01T18:44:02.787
> 
> 标签：typescript

如果没有，是否有提供服务器端和/或浏览器嵌入式 VM 的计划？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-01T18:47:51.503

不——没有专用的虚拟机，也没有开发虚拟机的计划。TypeScript 的目标是帮助我们所有人构建更好的 JS 应用程序，无论它们在哪里运行。随着 JS VM 的改进，我们也在改进 :)

# animation - Dojo Dialog onEnd() 动画异常

> ID：12679110
> 
> 赞同：3
> 
> 时间：2012-10-01T18:44:12.273
> 
> 标签：animation, dialog, hide, dojo

我在动画序列期间遇到了 Dojo Dijit Dialog .hide() 方法的问题。我正在使用带有 Tundra 主题的 Dojo 1.7。我的对话框中有一个取消按钮，用于关闭对话框。

```
 var global_welcome = new Dialog({
            id: 'global_welcome',
                style: "width: 750px",
            draggable: false,

        content: '<button type="button" id="global_welcomeCancel"> Cancel </button>',
        onShow : function () {
                                on(dojo.byId('global_welcomeCancel'), "click", function (evt) {
                                    dojo.stopEvent(evt);
                                    global_welcome.hide();   
                                   });              
                                 });
        }
    }); 
```

这会在 Firebug 上产生以下错误：

```
exception in animation handler for: onEnd                  fx.js (line 152)

TypeError: this._fadeOutDeferred is undefined
this._fadeOutDeferred.callback(true); 
```

先前对此错误的答案，但使用 destroyRecursive 而不是 hide 表明它与在动画完成之前被销毁的对话框有关。我尝试使用 dojo.hitch() 和 setTimeOut 但这似乎不起作用。另外令人费解的是，我第一次使用 global_welcome.show() （由另一个按钮调用）打开此对话框，然后按取消按钮，它可以正常工作。第二次和之后，它会产生上述错误消息。此外，右上角的 dojo 对话框的默认关闭按钮不会导致此错误。也许我可以让 onShow 调用关闭按钮调用的方法？

有人可以帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:49:27.953

问题出在你的`onShow`方法上。您连接到单击事件以隐藏，但永远不要断开它。当您再次打开对话框时，您连接 click 方法以再次隐藏对话框。结果是当您第二次尝试关闭对话框时，将调用 hide 两次。由于动画已被销毁，因此第二次调用 hide 会引发错误。

试试这个：

```
var signal = on(dojo.byId('global_welcomeCancel'), "click", function (evt) {
    dojo.stopEvent(evt);
    signal.remove();
    global_welcome.hide();   
}); 
```

# c# - 如何在 Windows 资源管理器中将 USB HID 设备视为驱动器

> ID：12679112
> 
> 赞同：0
> 
> 时间：2012-10-01T18:44:28.047
> 
> 标签：c#

我有 USB HID 微芯片。我得到了它的 VID、PID 和设备路径和设备句柄。为了写入它，我是否需要在 Windows 资源管理器中查看驱动器。当我调用写入函数时，我收到错误为“998”。这是什么意思。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:06:37.860

如果您想将 USB 设备视为驱动器，它必须实现 USB MSD（大容量存储设备）配置文件。USB HID（人机接口设备）配置文件适用于键盘和鼠标等设备。这与微芯片中的代码有关，与 PC 上的 c# 无关。

# c# - 通过 web 服务发送自定义对象错误

> ID：12679114
> 
> 赞同：0
> 
> 时间：2012-10-01T18:44:30.263
> 
> 标签：c#, web-services

```
 [WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public LoginResponse SignUp(string email, string password)
    {
        LoginResponse s = new LoginResponse();
        //s.Code = "123434";
        //s.Message = "Signup succeed";
        //s.UserId = "";
        return s;
    }

    [WebMethod]
    public SendCodeResponse SendCode(string userId, string barCode)
    {
        SendCodeResponse scr = new SendCodeResponse();
        scr.code = "";
        return scr;
    }

[Serializable]
    public class LoginResponse
    {
        string code;
        string message;
        string userId;

        [XmlElement(Type = typeof(string), ElementName = "Code")]
        public string Code
        {
            get { return code; }
            set { code = value; }
        }

        [XmlElement(Type = typeof(string), ElementName = "Message")]
        public string Message
        {
            get { return message; }
            set { message = value; }
        }

        [XmlElement(Type = typeof(string), ElementName = "UserId")]
        public string UserId
        {
            get { return userId; }
            set { userId = value; }
        }
    }

    [Serializable]
    public class SendCodeResponse
    {
        string code;
        [XmlElement(Type = typeof(string), ElementName = "Code")]
        public string Code
        {
            get { return code; }
            set { code = value; }
        }
    } 
```

当我运行此 Web 服务时，它会在“/”应用程序中出现服务器错误。

命名空间“http://tempuri.org/”中的 XML 元素“SendCodeResponse”引用了一个方法和一个类型。使用 WebMethodAttribute 更改方法的消息名称或使用 XmlRootAttribute 更改类型的根元素。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：命名空间“http://tempuri.org/”中的 XML 元素“SendCodeResponse”引用了一个方法和一个类型。使用 WebMethodAttribute 更改方法的消息名称或使用 XmlRootAttribute 更改类型的根元素。

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:40:21.583

更换这 2 个零件：

第1部分：

```
[Serializable]
public class SendCodeResponse
{
    string code;
    [XmlElement(Type = typeof(string), ElementName = "Code")]
    public string Code
    {
        get { return code; }
        set { code = value; }
    }
} 
```

第2部分：

```
[WebMethod]
public SendCodeResponse SendCode(string userId, string barCode)
{
    SendCodeResponse scr = new SendCodeResponse();
    scr.code = "";
    return scr;
} 
```

和：

新的第 1 部分：

```
[Serializable]
public class SendCodeResult
{
    string code;
    [XmlElement(Type = typeof(string), ElementName = "Code")]
    public string Code
    {
        get { return code; }
        set { code = value; }
    }
} 
```

新的第 2 部分：

```
[WebMethod]
public SendCodeResult SendCode(string userId, string barCode)
{
    SendCodeResult scr = new SendCodeResult();
    scr.code = "";
    return scr;
} 
```

由于您的 WebMethod 称为 SendCode，因此会自动创建类型 SendCodeResponse，因此您不能使用该名称创建类。

# java - 如何通过输入月份和年份的数字作为整数来查找特定月份？

> ID：12679115
> 
> 赞同：0
> 
> 时间：2012-10-01T18:44:37.607
> 
> 标签：java

我有涉及用户输入 2 个整数（月份和年份）的作业，我想知道如何做到这一点，我在日历类文档中进行了一些搜索，但没有找到我要搜索的内容。我要做的主要事情是打印一个日历，就像 Windows 中的日历一样，我从用户那里得到的唯一输入是月份和年份的数字，我需要找到一种方法来查找月份是 31 的天气、30、29 或 28 天以及该月的开始日期。 [http://lifehacker.com/assets/2006/06/vista-windows-calendar.jpg](http://lifehacker.com/assets/2006/06/vista-windows-calendar.jpg)这是我想做的，但作为文本而不打印其他月份的日子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:02:31.033

看看[DateFormatSymbols](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormatSymbols.html)。这具有检索月份的方法。然后您可以使用数组中的索引位置（月份号）来获取月份

```
 String[] months = new DateFormatSymbols(Locale.getDefault()).getMonths();
   System.out.println(months[0]);
   System.out.println(months[11]); 
```

因为这是家庭作业，我会让你弄清楚为什么`[0]`给 Januaray 和`[11]`给 December

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:51:20.783

你可以用`java.util.Date`这个：

```
int month = 3 ; // Input
int year = 2012 ; // Input
Date date = new Date() ;
date.setMonth(month) ;
date.setYear(year) ; 
```

但是由于`Date`已弃用，因此您必须`java.util.Calendar`改用。等效函数为：

```
Calendar.set(Calendar.MONTH, month) ;
Calendar.set(Calendar.YEAR, year) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:52:45.107

因为这是作业，我不会把所有的豆子都洒出来。你必须弄清楚其余的。

在不知道您尝试过什么或找到一个月是什么意思的情况下，我认为您想获得一个基于一年和一个月的 Date 对象。

这`Calendar`堂课是一个正确的开始。首先，您应该使用该`getInstance()`方法获取一个实例，特别考虑该`set(int field, int value)`方法来设置该日历的年份和月份。

如果您想知道如何知道您正在设置哪个字段，请尝试其`Calendar`自身定义的不同常量值（按照惯例，这些值以大写字母命名，以便您找到它们）。

最后，您只需要`Date`通过该`getTime()`方法获得它。

**编辑**

遵循`Calendar`类方法并使用集合，您可以得出您正在搜索的月份。

使用`getActualMaximum(int field)`with等方法`Calendar.DAY_OF_MONTH`。这实际上是答案之一。另一个是相似的，我把它留给你。

提示：创建一个日历并使用字段，尝试将月份中的日期设置为 1（第一天），将当前月份设置为您需要从中获取信息的月份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:56:19.413

```
import java.util.Calendar;
import java.text.SimpleDateFormat;

class PrintCalendar {
    public static void main(String args[]) {
        Calendar c = Calendar.getInstance();

        int month = 3;
        int year = 2011;

        c.set(year, month, 1); // Set c's time to first day of specified month/year

        // Day of week (by numerical index) can also be obtained programmatically with c.get(Calendar.DAY_OF_WEEK)
        System.out.println("First day of month falls on a " + new SimpleDateFormat("EEEE").format(c.getTime()));
        // "Actual maximum" means the maximum in the current timeframe; that is, it will return 29 for a February in a leap year
        System.out.println("Month has " + c.getActualMaximum(Calendar.DAY_OF_MONTH) + " days");
    }
} 
```

# c++ - 从 Win/MFC/C++ 应用程序支持 Web 服务

> ID：12679117
> 
> 赞同：0
> 
> 时间：2012-10-01T18:44:43.420
> 
> 标签：c++, windows, wcf, iis

我正在寻找将基于 REST 的 Web 服务的支持添加到 MFC C++ 应用程序的最佳方式。这是已经存在很长时间的遗留代码。

我需要让应用程序提供 Web 服务。我对此进行了研究，这些文章是关于在 C++ 应用程序中使用 Web 服务的。我设想必须监视一个端口并响应 HTTP 请求。与 WCF 和 IIS 结合可能更有意义，但我不确定如何继续前进。

我已经有了将这个应用程序“制作”成 Windows 服务的工具。我意识到拥有一个“真正的”应用程序会更好，这就是我必须使用的。这段代码中有太多的逻辑，而且我们的开发时间有限，所以我们采用了最快的方法。我们也不能使用 DCOM，因为 Web 服务将由基于 Linux 的系统调用。

任何建议的文章将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:58:38.847

对于 C++，您可以测试两个库[WSF/C](http://wso2.com/products/web-services-framework/c/)和[gSoap](http://www.cs.fsu.edu/~engelen/soap.html)，另一种选择是使用 C# 和 WCF 开发它，并使用 C++\CLI 在 C# 和 C++ 之间进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:25:05.367

我为此使用[Poco](http://pocoproject.org/) Net c++ 库，因为它同时支持 HTTP 客户端和服务器功能。我考虑了其他各种库，包括基于 Boost 的东西，但除了 Poco 之外，我很难在一个整洁的包中找到我需要的一切。它还具有一些易于使用的互斥体支持，一旦我将 Web 服务器前端添加到以前简单的单线程控制台应用程序中，这对我来说就变得必不可少。Poco 是跨平台的，但我主要在 windows 上使用它，迄今为止它对我的服务很好。我对 MFC 不是很了解，所以我不知道它在那个部门会如何发展。

# linux - Linux：如何在单一类型的所有文件中用另一个字符串替换所有实例

> ID：12679119
> 
> 赞同：2
> 
> 时间：2012-10-01T18:44:59.183
> 
> 标签：linux, replace, sed, find

例如，我想用文件夹中所有 .txt 文件中包含的“321”替换所有“123”实例（递归）。我想过这样做

```
sed -i 's/123/321/g' | find . -name \*.txt 
```

但在可能搞砸我所有的文件之前，我想问一下它是否可以工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T18:52:54.477

你有`sed`和从`find`后到前。使用 GNU`sed`和`-i`选项，您可以使用：

```
find . -name '*.txt' -type f -exec sed -i s/123/321/g {} + 
```

`find`查找带有扩展名的文件`.txt`并在它们的组上运行`sed -i`命令（这是`+`最后的；它是 POSIX 2008 中的标准，但并非所有版本都`find`必须支持它）。在这个示例替换中，不存在对命令的误解的危险，`s/123/321/g`因此我没有将其括在引号中。但是，为了简单和一般安全，最好尽可能将`sed`脚本用单引号括起来。

您还可以使用`xargs`（并再次使用 GNU 扩展`-print0`to `find`and`-0`和`-r`to `xargs`）：

```
find . -name '*.txt' -type f -print0 | xargs -0 -r sed -i 's/123/321/g' 
```

意思是“`-r`如果没有参数就不要运行”（所以`find`找不到任何东西）。`-print0`and协同工作，`-0`生成以 C 空字节`'\0'`而不是换行符结尾的文件名，并避免对包含换行符、空格等的文件名的误解。

请注意，在对真实数据运行脚本之前，您可以并且应该对其进行测试。创建一个虚拟目录（我通常称之为`junk`），将一些示例文件复制到垃圾目录中，将目录更改为垃圾目录，然后在这些文件上测试您的脚本。由于它们是副本，因此如果出现问题，也不会造成任何伤害。之后您可以简单地删除目录中的所有内容：`rm -fr junk`永远不会让您感到痛苦。

# java - 如何统计Java中mergesort和quicksort的操作？

> ID：12679121
> 
> 赞同：2
> 
> 时间：2012-10-01T18:45:17.487
> 
> 标签：java

我正在编写一个计算合并排序和快速排序操作的程序。我不知道我应该把count++放在哪里；（计算操作）。有人可以帮我吗？

以下是合并排序和快速排序的代码。

合并排序：

```
public void mergeSort(int [] data, int first, int n){

    int n1;
    int n2;

    if (n>1) {
        n1 = n/2;
        n2 = n-n1;           
        mergeSort(data,first,n1);
        mergeSort(data,first+n1,n2);
        merge(data,first,n1,n2);
    }

}//ends mergeSort method.

public void merge(int [] data, int first, int n1, int n2){
    int [] temp = new int[n1+n2];
    int copied = 0, copied1 = 0, copied2 = 0, i;

    while((copied1<n1) && (copied2<n2)){

        if(data[first+copied1] < data[first + n1 + copied2])
        temp[copied++] = data[first + (copied1++)];
        else
        temp[copied++] = data[first + n1 + (copied2++)];
    }

    while (copied1<n1)
        temp[copied++] = data[first + (copied1++)];
    while(copied2<n2)
        temp[copied++] = data[first + n1 + (copied2++)];

    for (i=0;i<n1+n2;i++)
        data[first+i] = temp[i];
}//ends merge method. 
```

这是快速排序的代码：

```
public void quickSort(int data[], int left, int right){

    int index = partition(data, left, right);
    if (left < index - 1){              
        quickSort(data, left, index - 1);    
    }
    if (index < right){              
        quickSort(data, index, right);
    }
}//ends quickSort method.

int partition(int data[], int left, int right){

    int i = left, j = right;
    int tmp;
    int pivot = data[(left + right) / 2];

    while (i <= j)
    {
        while (data[i] < pivot)
        i++;
        while (data[j] > pivot)
        j--;
        if (i <= j)
        {

            tmp = data[i];
            data[i] = data[j];
            data[j] = tmp;
            i++;
            j--;
        }
    }
    return i;
}//ends partition method. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:47:57.080

您应该将`++`“操作”放在任何地方。你所说的操作取决于你。我可以是一个比较，一个交换或每一行。你可以决定什么是适合你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:57:25.623

假设您正在进行“大 O”分析，您的“操作计数”是最内层循环的迭代次数。

*   对于您的 QuickSort 示例，这很简单：将您的计数器放在后面`while (i <= j)`
*   对于您的 MergeSort 示例，您需要将计数器放在每个`while`循环中（我没有仔细查看这些循环，但它们似乎做的远远超出了必要的范围）。

此计数不会*告诉*您正在执行的实际操作数，而只是“大 O”操作数。虽然 MergeSort 和 QuickSort 可能具有相同的“大 O”特征（因此应该具有相似的计数），但在最内层循环内完成的工作量会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:47:56.917

在**合并排序**中，下面的方法正是做这些事情的方法：-

```
merge(data,first,n1,n2); 
```

所以，把一个**计数++**放在那里..

**快速排序**..它是：-

```
partition(data, left, right) 
```

因此，在此处添加**count++** ..

您的其他方法调用： -`mergesort()`并且`quicksort()`只是**递归调用**..它们最终只会导致上述两个`methods`..

但最终这一切都取决于你的意思我的“计算操作”。你认为是什么`operation`是至关重要的。

它可能是一个`method execution`，或者`every statement`可以是一个操作..或者你的循环..它可以意味着任何东西..

# perl - Apache::Request（旧 perl/apache）与 HTTP::Request（新 perl/Apache）一样吗？

> ID：12679122
> 
> 赞同：0
> 
> 时间：2012-10-01T18:45:21.583
> 
> 标签：perl, apache, apache2, mod-perl, apache2-module

你好 Perl 战士。

我对这门语言完全陌生，并且被安排在一个有趣的项目中，将最初为 Apache 1.3（和较旧的 Perl）编写的应用程序移植到带有 Apache 2.2.x 和 mod_perl 的 RHEL / CentOS 6。

至于调用lib的：

是

Apache::Request (旧 perl/apache) 和 HTTP::Request (Apache2, mod_perl) 一样吗？

此外，如果有人在 perl 升级/移植项目期间发现任何资源特别有用，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:04:25.763

不，[HTTP::Request](https://www.metacpan.org/module/HTTP%3a%3aRequest)是[LWP](https://www.metacpan.org/module/LWP)生态系统的一部分，用于为 Perl HTTP 客户端构建客户端 HTTP 请求。

您可能正在寻找[Apache2::Request](https://www.metacpan.org/module/Apache2%3a%3aRequest)，它是 Apache 2 的 libapreq 发行版的一部分。

# php - 我需要使用 move_uploaded_file() 函数吗？

> ID：12679124
> 
> 赞同：0
> 
> 时间：2012-10-01T18:45:33.143
> 
> 标签：php, file-upload

我是否以某种方式强制使用`move_uploaded_file()`和/或删除临时文件？

我的应用程序只需要将文件内容加载到内存中（例如 via `file_get_contents()`）。我需要先将其移动到另一个目录吗？否则，我是否需要在脚本末尾删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:49:55.670

如果您不想将上传的文件保存在某处，则无需使用`move_uploaded_file()`. 随心所欲地从文件中读取；它会在请求结束时被 PHP 自动删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:50:09.193

是的，如果`open_basedir`或`safe mode`（希望`safe_mode`最终会过时）以其他方式阻止您从上传文件保存到的位置读取。知道这些`move_uploaded_file()`限制，但仅将它们强制执行到第二个参数，因此您可以将文件移出让说`/tmp/`，否则您将无法读取该目录。

# php - PHP 电子邮件脚本是否会在任何地方留下记录（例如在 cPanel 中？）

> ID：12679130
> 
> 赞同：1
> 
> 时间：2012-10-01T18:46:13.987
> 
> 标签：php, email, cpanel

标题基本上说明了一切。

我们有一个子域设置，其中每个子域都是相同的站点，但为不同的公司打上品牌。

有一个 PHP 脚本可以在提交表单时根据某些操作发送电子邮件。无论如何（可能在 cPanel 中）可以查看那些已发送电子邮件的记录吗？还是我必须在该脚本中编写一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:01:37.643

如果 mail() 遇到错误，这通常会在以下位置记录错误：/var/log/messages (unix path)

否则，在调用 mail() 函数时，日志记录就像添加几行额外的代码一样简单。

```
$file = "mail.log"; // log file name
$fh = fopen($file, 'a') or die("can't open file"); // create a handle
fwrite($fh, "to: ".$to.",subject: ".$subject.", body: ".$body."\n"); // log email sent
fclose($fh); // close file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:48:41.867

在您的应用程序本身中完成这项工作是最简单的。然后，您可以控制格式，并且可以在以后在您的应用程序中使用该数据（如有必要）。

# c# - 如何限制正则表达式中的数字

> ID：12679136
> 
> 赞同：2
> 
> 时间：2012-10-01T18:46:34.983
> 
> 标签：c#, regex

**我有一个正则表达式 ^[a-zA-Z0-9]{0,14}$** 只允许字母数字。但是有一个问题我不希望用户名只有数字，这个正则表达式只接受数字，也像 56426542 **所以如何只限制数字**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:57:29.253

你想要的正则表达式：

```
^((?=.*[a-zA-Z])[a-zA-Z0-9]{0,14})$ 
```

[正则表达式沙盒来玩它。](http://regexpal.com/?flags=gm&regex=%5E%28%28%3F%3D.%2a%5Ba-zA-Z%5D%29%5Ba-zA-Z0-9%5D%7B0%2C14%7D%29%24&input=a8dyh22312dc78%0A12345678901234%0Aabcdefg-ijklmn%0A1234567890123a%0Aabcdefghijklm1%0A1234567890123as%0A1234567890123a)

这不会强迫您必须以字母开头。用户名可以以字母或数字开头，确保用户名*不仅仅是*数字。

编辑：修复了长度检查。此外，您可能希望将 {0,14} 更改为 {1,14}。好吧，用您的最小长度要求替换第一个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:50:36.613

蒂姆托迪

最简单的解决方案是要求用户名以字母开头

`^[A-Za-z][A-Za-z0-9]{0,14}`

请记住，{0,14} 接受空字符串作为有效输入

**编辑** 前面的表达式接受 1 到 15 个字符的输入，更好的解决方案是：`^[A-Za-z][A-Za-z0-9]{0,13}`

但 Grommer 解决方案更好

# tfs - JIRA 与 TFS 2012 作为完整的 ALM 系统

> ID：12679138
> 
> 赞同：37
> 
> 时间：2012-10-01T18:46:49.210
> 
> 标签：tfs, jira, alm

我们正处于为我们公司选择完整 ALM 系统的研究阶段。我们考虑将 TFS 2012 和 JIRA 用于产品、项目管理、质量保证、支持和开发团队部门。要支持的东西是错误跟踪、工作流、项目图（例如错误计数、烧毁等）。有什么建议吗？价钱？据我所见，TFS 更适合使用 Visual Studio 的研发团队，而不适合 Eclipse。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-17T17:48:12.243

以下是 TFS 的优势：

1.  TFS 是一种应用程序生命周期管理 (ALM) 解决方案，但 Jira 只是一个问题跟踪器。Jira 不支持 TFS 的许多功能，例如源代码控制和自动构建，因此您应该使用其他解决方案，例如 Subversion 或 Bamboo。
2.  所有 TFS 组件，即源代码控制、问题跟踪器、构建自动化都是完全集成的。其他解决方案无法达到这种集成水平。
3.  它与 Visual Studio 完全集成。

以下是 Jira（和其他 Atlasian 解决方案）的优势：

1.  它已用于许多开源项目，例如[JBoss](https://issues.jboss.org/secure/Dashboard.jspa)、[Spring](https://jira.springsource.org/secure/Dashboard.jspa)等。
2.  要启动 TFS，您需要高端服务器、MS SQL 等。但 Jira 可以安装在普通 PC 上的开放 DBMS 上，例如我的 SQL。
3.  如果您使用 Java 技术，许多 Java IDE，例如 IntelliJ、Eclipse 和 Netbeans 都完全支持 Jira。我还没有看到对 TFS 的这么好的支持。
4.  Jira 有很多可用的插件。您可以在[这里](http://www.atlassian.com/software/jira/overview/add-ons)查看它们。
5.  如果您的团队很小，Jira 只需 10 美元。它真的很便宜。
6.  Atlasian 解决方案对 java 技术（Ant、Maven、junit 等）有更好的支持

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-18T15:06:56.343

我曾使用 JIRA / Subversion，现在使用 TFS 2010，我认为 JIRA / Subversion 是更好的工具。

我喜欢在一个集成包中拥有源代码控制、工作项控制、构建控制、测试控制的想法，但不知何故，TFS 只是[低于平均水平](http://www.derekhammer.com/2011/09/11/tfs-is-destroying-your-development-capacity.html)的所有实现（门控签入除外，因为这很酷）。

TFS 版本控制使用与 VSS 一样的绑定，因此对同一版本进行多次检出需要额外的努力。使用 TFS 搁置集暂停/恢复工作的能力是能够进行并发工作的官方解决方法。

TFS 有时会因为其 SQL 表锁而失控，因此它已重新启动。SQL 索引也随机损坏，因此突然显示文件夹历史记录需要几分钟时间。VS2010 中的 TFS 需要一直在线才能进行任何源代码编辑，尽管这在 VS2012 中已得到修复。但是 VS2012/VS2013 GUI 与 TFS 集成得如此紧密，所以如果 TFS-server 出现问题，那么 VS 中的一切都会变得迟缓。这在新的 VS2015 CodeLens 中非常明显，应该禁用所有 TFS WorkItem Lookup，否则 VS2015 会比平时更频繁地卡住。

Visual Studio 在一个工作周内会出现一两次无法获取最新源的情况（有时是静默）。如果您尝试再次获取最新版本，那么它会说您已经拥有最新版本。当您执行构建时，它当然会失败。解决方法是通过强制覆盖执行获取特定版本。

要为文档创建 wiki，则需要 SharePoint，而 2010 版是一个非常糟糕的 wiki 工具。

由于某些非常奇怪的原因，Microsoft System Center（非常昂贵）完全脱离了 TFS 解决方案，并且像老妇人一样徘徊。使事件与 TFS 工作项同步变得非常困难，并使用 System Center 部署 TFS 构建。VS2013 Update 4 现在包括几乎免费的 InCycles 发布管理，这应该可以使持续集成更好地工作（IIS 应用程序可以使用[Web Deploy](http://www.iis.net/downloads/microsoft/web-deploy)）。

如果您使用诸如发布分支之类的高级内容，那么您会惊讶于生成发布说明文档是多么困难（阅读需要不受支持的 3rd 方工具）。[合并](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2047315-merge-by-workitem)到发布分支时，工作项不会自动关联。如果你突然想要发布一个新的构建，那么创建一个发布报告，列出自上次发布的构建以来包含的更改/工作项将无济于事。

JIRA/Subversion 在 Visual Studio (VisualSVN) 中的集成要好得多（ankhsvn 是 VisualSVN 的替代开源版本）。仍然不明白为什么 Tfs-annotate 不能像 Svn-blame 那样跳转到下一个以前的版本。

我不知道设置 TFS 2010/2012 的难度，但是 JIRA / Subversion / CruiseControl.NET 非常简单且便宜（猜想现在有人会使用也支持[Gated Checkin的 Git 和](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Plugin)[Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/JIRA+Plugin)）。

VS2012 还包括对整个用户界面的重新设计，其中包括一个新的“改进的”TFS 团队资源管理器，作为开发人员使用它真的很痛苦（与 VS2010 相比）。微软已经宣布[Team Explorer 已在 VS2013 中修复](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2654486-window)，但事实并非如此。执行签入和关联 tfs-workitems 是鼠标单击地狱。

Visual Studio 2012 现在包括一个虚拟看板，但我会惊讶于这个功能没有添加到 JIRA。

当 Visual Studio 团队宣布他们将在 Visual Studio 2012 中实现 GIT 支持时感到非常惊讶。猜想这比尝试将 TFS 重写为分布式版本控制系统更容易。希望新的 GIT 集成能够达到 VisaulSVN 的标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T14:57:11.247

我们使用 JIRA 和 GreenHopper 来满足我们所有的开发任务、错误跟踪和产品管理需求。我们有一个由 46 名开发人员、测试人员和管理人员组成的团队。它与 Eclipse 完全集成。我强烈推荐它。

任务和工作流是完全可定制的，您可以添加字段、添加自动化（例如在任务更改状态时将任务分配给团队成员）、支持拖放附件等等。

JIRA 的价格刚刚下降到[托管主机](http://www.atlassian.com/software/jira/pricing)的显着水平。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T15:04:50.557

嗯，这基本上是关于市场趋势的，如果你从事开源技术特别是 java 的工作，大多数 java 专业人士都熟悉 JIRA，JIRA 几乎有所有类型的项目管理插件，SDLC，代码审查和错误跟踪。但是，如果您的员工使用 .net 或 microsoft 技术，他们就会对 TFS 感到满意。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T15:48:21.490

一般来说，如果您的项目是用 Java（或其他开源）构建的，请使用 JIRA。如果它是基于 .NET 技术构建的，请使用 TFS。

从理论上讲，您可以将其中一种与 Java 或 .NET 结合使用，但集成不会那么紧密，您必须使用插件才能使一切正常工作。

* * *

## 回答 #6

> 赞同：-10
> 
> 时间：2012-11-01T22:18:01.617

JIRA / Subversion / Bamboo 更加可配置，并与其他带有钩子和触发器的开源工具集成。TFS 不允许与任何东西集成。它不可扩展。您无法使用模块或插件或扩展来改进它。在我看来，TSF 相当乏味和乏味，也就是说，如果您认为源代码控制和变更管理是必要的邪恶，那么 TFS 适合您，但如果您从事配置管理或构建/发布工程师，JIRA 是一种方式去。

# asp.net - 如何同步两个控件？

> ID：12679140
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:01.450
> 
> 标签：asp.net, controls

我的页面中有两个确切的单选按钮列表，顶部和底部。如果我在顶部列表中选择一个单选按钮，我希望底部列表进行相同的更改。有什么办法可以实现这种同步？我的单选按钮列表位于内容页面中。

```
<asp:RadioButtonList ID="rblVerification1" runat="server" RepeatDirection="Horizontal">
                <asp:ListItem Value="V">Verified</asp:ListItem>
                <asp:ListItem Selected="True" Value="NV">Not Verified</asp:ListItem>
</asp:RadioButtonList> 
```

更新：我写了以下 javascript 函数，但它不起作用。第一个警报返回 34，一个奇怪的数字，我期待 2。第二个警报返回未定义。谁能告诉我做错了什么？

```
function rblVerificationClicked(source, destination) {
        alert(source.length);
        var selectedValue;
        for (var x = 0; x < source.length; x++) {
            if (source[x].checked) {
                selectedValue = source[x].value;
                break;
            }
        }
        alert(selectedValue);
        for (var x = 0; x < destination.length; x++) {
            destination[x].checked = false;
        }

        for (var x = 0; x < destination.length; x++) {
            if (destination[x].value == selectedValue) {
                destination[x].checked = true;
                break;
            }
        }
    } 
```

在 page_load 中，我添加了

```
rblVerification.Attributes.Add("OnClick", string.Format("rblVerificationClicked('{0}', '{1}');", rblVerification.ClientID, rblVerification1.ClientID));
rblVerification1.Attributes.Add("OnClick", string.Format("rblVerificationClicked('{0}', '{1}');", rblVerification1.ClientID, rblVerification.ClientID)); 
```

已解决：我找到了导致问题的原因。asp:RadioButtonList 呈现为 input type=”radio” HTML 元素。因此，要获取 asp:RadioButtonList 客户端 ID，请调用 getElementsByTagName(“input”)，它将返回一个单选按钮数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:08:01.283

最简单的方法是通过 JavaScript 来实现。我在下面创建了一些示例代码：

的HTML：

```
<div id="list1">
    <input id="item1" type="radio" name="list1"/>Item 1
    <input id="item2" type="radio" name="list1"/>Item 2
    <input id="item3" type="radio" name="list1"/>Item 3
<div>
<br/>
<div id="list2">
    <input id="item1" type="radio" name="list2"/>Item 1
    <input id="item2" type="radio" name="list2"/>Item 2
    <input id="item3" type="radio" name="list2"/>Item 3
<div>​ 
```

JavaScript：

```
$("input[name=list1]:radio").bind("change", function(e) {

    var chk = $("div#list2")
        .children("input[id=" + $(this).attr("id") + "]");

    chk.attr("checked", true);

}); 
```

​我还为它创建了一个[JsFiddle](http://jsfiddle.net/2eZkJ/)，以便您可以看到它的运行情况。

# nhibernate - NHibernate 更新列 = 列 - 1

> ID：12679141
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:47:07.153
> 
> 标签：nhibernate

我无法在 nhibernate 的上下文中执行以下更新。

```
using(ITransaction transaction = session.BeginTransaction())
{
    // FIRST I'm GETTING A LIST OF ITEMS IN A MANNER LIKE THIS
    var itemsToDelete = session.QueryOver<Item>()
                                   .Where(i => i.ReferenceObject.Id == otherIdValue)
                                   .List<Item>();

    // THEN I"M LOOPING THROUGH THEM
    for(itemToDelete in itemsToDelete)
    {

        session.Delete(itemToDelete);

        using (iDB2Command command = (iDB2Command)_session.Connection.CreateCommand())
        {
            command.CommandText = "update TABLE_NAME set sequence = (sequence - 1) where id = @someId and sequence > @sequenceNumberDeleted";
            command.DeriveParameters();
            command.Parameters["@someId"].Value = idValue;
            command.Parameters["@sequenceNumberDeleted"].Value = itemToDelete.Sequence;
        }
    }

    transaction.commit()
} 
```

问题似乎出在序列 = (sequence - 1) 上。每次调用例程时，NHibernate 都会抛出“意外的行数”异常。在研究我发现与此异常相关的大多数文章时，是由更新其他行的表上的触发器引起的。在这种情况下，表上没有任何触发器。此外，如果我替换 sequence = 5 或其他一些常量，更新语句将毫无问题地执行。

```
DATE TIME [10] ERROR App.Controllers.AController - Unexpected row count: 2; expected: 1
DATE TIME [10] ERROR App.Controllers.AController -    at NHibernate.AdoNet.Expectations.BasicExpectation.VerifyOutcomeNonBatched(Int32 rowCount, IDbCommand statement)
   at NHibernate.AdoNet.NonBatchingBatcher.AddToBatch(IExpectation expectation)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Int32 j, Object obj, SqlCommandInfo sql, ISessionImplementor session, Object[] loadedState)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Object obj, ISessionImplementor session)
   at NHibernate.Action.EntityDeleteAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   at NHibernate.Engine.ActionQueue.ExecuteActions()
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush()
   at NHibernate.Transaction.AdoTransaction.Commit()
   at App.Controllers.AController.AMethod(Int32[] otherIdValues, Int32 someIdValue, String someReferenceValue) in    <path>\App\Controllers\AController.cs:line 117 
```

有人可以帮我指出正确的方向吗？

编辑：迭戈是完全正确的。这就是我急于求成的结果。对该代码的实际调用是在事务内部，然后我在事务上调用提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:45:13.130

从那以后，我找到了问题的原因。实际的语句并没有像我想象的那样按顺序生成。相反，更新命令在删除命令之前执行，因此删除命令抛出了意外的行计数异常，而不是我之前认为的更新命令。

# jquery - jQuery动画高度直到最大值

> ID：12679142
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:07.830
> 
> 标签：jquery, css

我需要的是一些用于动画的“toggleDown”功能。我知道有一个`.slideDown()`，但这不会按我想要的方式工作。我需要 div 从当前高度扩展到全高（全高=div 的正常高度）！

```
$("div#one").animate({height: "toggleDown"}, 100); // something like that 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:53:11.407

*目前这还不能直接实现。*jQuery 需要知道最终的数字高度，以便能够正确地为元素的高度设置动画。您提到的`normal`or高度只有在渲染 DIV 后才能确定。`auto`充其量，您可以为您的 DIV 创建一个**不可见的克隆**（使用`visibility: hidden`, NOT `display: none`），获取其计算高度并使用它来为您的实际 DIV 设置动画。

# ruby-on-rails-3 - 浏览器不响应 Rails3 force_ssl (Rails 3, https)

> ID：12679146
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:16.347
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我的客户希望她的整个应用程序（所有链接）通过 HTTPS/SSL 运行。我放

```
config.force_ssl = true 
```

在 config/application.rb 中。然而，现在 Safari 和 Firefox 和 Opera 都在抱怨应用程序，并出现不同的错误。（来自 Firefox，“ssl_error_rx_record_too_long”）

我需要证书吗？还是有更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:15:55.527

事实证明，我需要执行以下操作才能使整个 Rails 3.2 应用程序通过 SSL 运行：

1) 在 config/application.rb 中，使用 gem 'rack-ssl-enforcer' 而不是 'config.force_ssl'，并且

```
config.middleware.use Rack::SslEnforcer 
```

2) 使用 openssl/mod-ssl (CentOS) 创建证书

3) 使用“thin”而不是 WEBrick - Thin 似乎更容易为 SSL 配置。Thin 配置为使用在步骤 2 中生成的证书文件。

# dreamweaver - 如何在 Dreamwever CS6 中创建全功能片段？

> ID：12679152
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:37.503
> 
> 标签：dreamweaver, code-snippets

如何在 中创建全功能片段`Dreamwever CS6`？（类似于在 Sublime 中创建片段`Text 2`- 就像在这个视频中一样：[这里](https://tutsplus.com/lesson/your-first-snippet/)）。我想创建一个包含两个或多个地方的片段，我可以在其中插入代码（并使用选项卡在这些地方之间切换）。里面可行`Dreamweaver`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:03:59.250

Dreamweaver 不支持可参数化的片段，您无法点击制表符，并且光标会移动到代码块中的下一个参数。将片段添加到页面后，它就可以像所有其他文本一样进行编辑。

获得类似参数化片段的唯一方法是创建 Dreamweaver 扩展用户界面（可能是对象或命令）。也许下面的文章可以帮助解决这个问题：[http ://www.dwfaq.com/tutorials/extensions/simple_object.asp](http://www.dwfaq.com/tutorials/extensions/simple_object.asp)

# vb.net - 如何通过 Web 服务向客户端提供自定义类

> ID：12679153
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:38.960
> 
> 标签：vb.net, web-services, .net-4.0, asmx

我在 net framework 4.0 中构建了一个简单的 Web 服务 (asmx)，它定义了多个自定义类。我想知道如何使这些类对客户可用。其中一个类将从方法返回，但其他类用于将信息传递给 Web 服务，因此客户端需要知道该类中包含什么。例如

```
Public Class clsAddress
Public AddressType As TypeAddress
Public Location As TypeLocation
Public Line1 As String
Public Line2 As String
Public City As String
Public State As String
Public ZipCode As String
Public ZipPlus4 As String 
```

结束类

所以客户端会做这样的事情来将信息发送到网络服务：

```
 Dim tempAddressInfo As New clsAddress
        tempAddressInfo.AddressType = cboAddressType.SelectedIndex 'TypeAddress.current
        tempAddressInfo.Location = cboLocation.SelectedIndex 'TypeLocation.USA
        tempAddressInfo.Line1 = txtAddress1.Text
        tempAddressInfo.Line2 = txtAddress2.Text
        tempAddressInfo.City = txtCity.Text
        tempAddressInfo.State = txtState.Text
        tempAddressInfo.ZipCode = txtZipCode.Text
        tempAddressInfo.ZipPlus4 = txtZipPlus4.Text
        mclsIdVerify.pAddressInfo = tempAddressInfo 
```

我看到了一些关于在返回类的方法中使用 XMLInclude 属性返回自定义类的内容。需要完成什么，以便客户端可以发送和接收自定义类。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:56:48.857

我通常会把这样的问题留给有更多知识的人，但由于没有人试图给你答案，我会试一试。

我认为能够将您的类转换为可以通过网络存储或传输的对象状态，它需要是可实现的。这允许它在另一端被重建。

尝试将 _ 放在您的类定义之上。

即使这无济于事，但希望它能给您一些研究。

# apache - 将 .htaccess 重定向到所有子目录到 www 版本的站点

> ID：12679155
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:42.347
> 
> 标签：apache, .htaccess, redirect, subdomain

`.htaccess`在我的域根目录的主文件中，我有以下代码：

```
RewriteEngine on
# If missing 'www'
RewriteCond %{http_host} ^example.com [nc]
# Redirect to 'www' version
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,nc]
# Remove 'index.php' from URL 
RewriteRule ^index.php$ http://www.example.com/ [R=301,nc] 
```

`.htaccess`然后我在每个目录中都有一个单独的文件，同时`index.php`从 URL 中删除 ，如下所示的`/products`目录中：

```
RewriteEngine on
RewriteRule ^index.php$ http://www.example.com/products/ [r=301,nc] 
```

当我（清除缓存后）访问`example.com`时，我会`www.example.com/`按预期重定向到。

但是，如果我`example.com/products`在地址栏中输入，页面会加载为`example.com/products/`并且我**不会**被重定向到该`www.example.com/products/`版本。我究竟做错了什么？请帮助...如果需要，我可以提供更好的解释/示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:22:15.517

当您在子目录的 htaccess 中打开重写引擎时，它会排除可能在其任何父目录中的 htaccess 文件中的所有重写规则，除非您使用：

```
RewriteOptions inherit 
```

子目录中的 htaccess 文件中的指令。由于您拥有的唯一规则`/products`只有重定向 for `index.php`，除非请求是 for `/products/index.php`，否则不会应用任何规则，因为父目录中的规则被忽略。

另请注意，在 Apache 2.2 中，该`inherit`选项将父级的重写规则放在子目录中的规则**之后。**

* * *

编辑：

继承的规则不起作用，因为基础不同。您只需要将重定向添加到其他任何地方的 www 规则即可。因此，将这些添加到您`/products/`目录中的 htaccess 文件中：

```
RewriteCond %{http_host} ^example.com [nc]
RewriteRule ^(.*)$ http://www.example.com/products/$1 [R=301,nc] 
```

* * *

或者，您可以保留`RewriteOptions inherit`但更改文档根目录中的 htaccess 规则：

```
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,nc] 
```

到：

```
RewriteRule ^(.*)$ http://www.example.com%{REQUEST_URI} [R=301,nc] 
```

# opencl - OSX 上的 OpenCL/OpenGL 互操作——有没有人共享过渲染缓冲区或纹理？

> ID：12679156
> 
> 赞同：4
> 
> 时间：2012-10-01T18:47:49.420
> 
> 标签：opencl

问题：当调用 clSetKernelArg() 时，尝试共享绑定到帧缓冲区的渲染缓冲区（或纹理）失败。在调用之前，彻底的错误检查不会报告任何问题。

我的程序为以 60fps（16.7ms 帧）运行的视频投影仪生成帧。

我的内核（通常）运行 24 毫秒，但每帧之间需要 50 毫秒。我假设一些额外的成本是因为我使用 GPU 来计算像素，然后将读取缓冲区排入队列以从 GPU 中提取数据*，*然后使用 glDrawPixels 将其*放回*GPU 上进行显示。尝试 OpenGL/OpenCL 互操作的完美情况，对吧？，以避免两个额外的复制操作。

有很多例子，我*已经*成功地与 OpenCL 共享了一个 VBO，并且可以写入它，但这对我没有帮助。我不想写顶点数据，只是一个计算出来的二维图像。

有两种不同方法的示例，它们都涉及 Framebuffer 对象。

您可以将渲染缓冲区附加到帧缓冲区，也可以将纹理附加到帧缓冲区。

然后你应该能够在 opencl 中写入该缓冲区并用 opengl 显示它，没有额外的副本。

我在代码中找到了一些这样的例子，我认为我正在按照例子所说的方式做所有事情，但也许它在 OSX 中被破坏了？..因为它不起作用。FBO 是“完整的”，一路上没有错误，直到我尝试执行 clSetKernelArg。该调用返回错误 -38，CL_INVALID_MEM_OBJECT。

*注意：我宁愿使用渲染缓冲区而不是纹理，因为我所做的只是制作我想要显示的二维 RGB 图像。但我绝望地尝试了纹理。仍然没有帮助。

我按照这个顺序执行这些步骤，中间还有一些其他的东西：

```
kCGLContext = CGLGetCurrentContext(); 
kCGLShareGroup = CGLGetShareGroup( kCGLContext );

glGenFramebuffers( 1, &fboid );
glBindFramebuffer( GL_FRAMEBUFFER, fboid );

glGenRenderbuffers( 1, &rboid );
glBindRenderbuffer( GL_RENDERBUFFER, rboid );
glRenderbufferStorage( GL_RENDERBUFFER, GL_RGBA, rb_wid, rb_hgt );

glboid = rboid;

glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rboid ); 
```

然后：

```
cl_context_properties ourprops[] = { CL_CONTEXT_PROPERTY_USE_CGL_SHAREGROUP_APPLE, (cl_context_properties)kCGLShareGroup, 0 };

contextZ = clCreateContext( ourprops, 1, &dev_idZ[0], clLogMessagesToStdoutAPPLE, NULL, &err );

clbo = clCreateFromGLRenderbuffer( contextZ, CL_MEM_WRITE_ONLY, glboid, &err ); 
```

然后 clCreateCommandQueue、clCreateProgramWithBinary、clBuildProgram、clCreateKernel，都没有错误

然后稍后：

```
glFinish();
clEnqueueAcquireGLObjects( queueZ, 1, &clbo, 0,0,0 );

err = clSetKernelArg( kernelZ, 1, sizeof(cl_mem), &clbo ); 
```

...失败并出现错误 -38，CL_INVALID_MEM_OBJECT。

clbo 是一个静态 cl_mem，就像互操作未打开时使用的缓冲区对象一样。不同之处在于它是使用 clCreateFromGLRenderbuffer 而不是 clCreateBuffer 创建的，并且它是在与 gl 共享组关联的上下文中创建的。

* * *

（我尝试添加第二个渲染缓冲区并将其附加到深度连接点，以防万一。没有帮助。）

（我用绑定到 FBO 的纹理尝试了同样的事情，但我在同一个地方得到了同样的错误。）

...有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:07:04.523

好的; 知道了！

问题是内核指定了一个 uint * 作为其输出参数，而不是 image2d_t。我认为这至少对 setkarg 调用无关紧要。它们都是主机端的 cl_mem（image2d_t 是 #defined 为 cl_mem）。但是，一旦您调用 clCreateFromGLTexture2D 或 clCreateFromGLRenderbuffer，该对象就会获取 ocl 知道的属性。当内核更改为指定 image2d_t 时，出现了更多有用的错误消息，现在它可以工作了。

额外的事实：您不能使用 write_imageui 写入 UNORM_INT8 图像；你必须使用 write_imagef。

# unix - 如何根据 sed 中前一行和当前行的匹配删除当前行？

> ID：12679162
> 
> 赞同：0
> 
> 时间：2012-10-01T18:47:57.350
> 
> 标签：unix, sed

给定一个这样的排序文件：

```
AAA 1 2 3
AAA 2 3 4
AAA 3 4 2
BBB 1 1 1
BBB 1 2 1 
```

和所需的输出

```
AAA 1 2 3
BBB 1 1 1 
```

用 sed 实现这一目标的最佳方法是什么？

基本上，如果 col 以与上一行相同的字段开头，我该如何删除它？其余数据必须保留在输出中。

我想必须有某种方法可以使用保持缓冲区、分支或测试命令来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:53:39.750

这可以通过 AWK 完成：

```
$ gawk '{if (last != $1) print; last = $1}' in.txt
AAA 1 2 3
BBB 1 1 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:59:30.453

awk 的另一种方式：

```
awk '!($1 in a){print;a[$1]}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:00:17.517

也许有一个更简单的方法`sed`，但是：

```
sed ':a;N;/\([[:alnum:]]*[[:space:]]\).*\n\1/{s/\n.*//;ta};P;D' 
```

这会产生输出

```
AAA 1 2 3
BBB 1 1 1 
```

这与问题中的不同，但与描述相匹配：

> 如果 col 以与上一行相同的字段开头，我该如何删除它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:22:55.623

这可能对您有用（GNU sed）：

```
sed -r ':a;$!N;s/^((\S+\s).*)\n\2.*/\1/;ta;P;D' file 
```

或者也许只是：

```
sort -uk1,1 file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T04:21:38.847

一种使用方式`GNU awk`：

```
awk '!array[$1]++' file.txt 
```

结果：

```
AAA 1 2 3
BBB 1 1 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T13:11:43.910

使用 sed：

```
#!/bin/sed -nf

P

: loop
s/\s.*//
N
/\([^\n][^\n]*\)\n\1/ b loop

D 
```

首先，我们必须将`-n`标志传递给 sed，以便它只打印我们告诉它的内容。

我们首先使用“P”命令打印该行，因为第一行将始终被打印，并且我们将强制 sed 仅在需要时执行该行。

现在我们将做一个循环。我们通过“:”命令定义一个带有起始标签的循环（在这种情况下，我们将标签命名为“loop”），必要时我们使用“b”命令（或“t”测试命令）。这个循环非常简单：

1.  删除除第一个字段以外的所有内容（将第一个空格字符及其后面的所有内容替换为空）
2.  追加下一行（将包含换行符）
3.  检查新行是否以我们隔离的字段开头。我们通过使用捕获来做到这一点。捕获被定义为“子匹配”，其匹配的输入将存储到一个特殊的“变量”中，按照捕获的顺序以数字方式命名。我们使用带反斜杠转义的括号指定捕获（以 开头`\(`和结尾`\)`）。在这种情况下，我们匹配所有不是换行符（即`[^\n]`）的字符，直到行尾。我们通过匹配至少一个非换行符和它们的任意序列来做到这一点。这可以防止在换行符之前匹配空字符串。捕获后，我们使用特殊变量匹配换行符和捕获结果`\1`，其中包含与第一次捕获匹配的输入。如果成功，我们有一行重复第一个字段，所以我们用“b”分支命令跳回到循环的开头。
4.  当我们退出循环时，我们发现一行具有不同的第一个字段，因此我们必须准备输入行并跳回脚本的开头。这可以通过“D” delete-first-line-and-restart-script 命令来完成。

这可以缩短为一行（注意我们已将“循环”标签重命名为“a”）：

```
sed -e 'P;:a;s/\s.*//;N;/\([^\n][^\n]*\)\n\1/ba;D' 
```

# c# - C# 4.0 中用于文件加载的多线程

> ID：12679165
> 
> 赞同：3
> 
> 时间：2012-10-01T18:48:14.670
> 
> 标签：c#, multithreading, performance, zip, zipfile

我需要压缩每个文本文件并复制到另一台服务器。文件大小可能从 500MB 到 8GB。每个文件都没有依赖关系。我有 35 个文件

我的常规代码为此花费了大约 3-4 小时。为了减少时间，我只是想为此实现线程。你觉得线程会减少时间还是有其他最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:24:13.500

.Net 4.0 有一个新的 Threading.Task 命名空间，这使得调度任务变得更加容易，而无需深入了解线程调度。

它允许您在前一个任务完成后将后续任务排队运行（无论成功或失败）。

[http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)

[http://www.codethinked.com/net-40-and-systemthreadingtasks](http://www.codethinked.com/net-40-and-systemthreadingtasks)

但是，正如之前的评论者所建议的那样，如果瓶颈不是 CPU 进行文件压缩，而是网络传输，那么它可能无济于事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:01:52.500

根据我处理大文件的经验，由于硬盘读/写本身和/或网络的限制，多线程不会加快处理速度。

您不仅要对硬盘进行大量读写操作，还要通过网络将大文件复制到另一台计算机。

如果您的平均文件大小为 4.25 GB，那么我们正在处理的存储空间为 148.75 GB（按 35 个文件计数）。这是一个很大的空间，你不仅要将所有空间读入内存（希望不是一次全部，否则虚拟内存将开始启动，它会向你的硬盘写入更多内容），你还写了一些该空间以 zip 文件的形式返回。

将该因素添加到通过网络传输文件时，如果您的网络是我必须处理的典型网络，我一点也不感到惊讶。兆位和千兆位的速度从来都不是他们声称的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:28:17.613

我建议您使用`Task.Factory.StartNew`它，因为它默认为每个内核创建 1 个线程并排队另一个线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:52:03.797

如果您使用外部实用程序进行压缩（即 7-zip），并且进程启动不是您的应用程序的问题，我会保持简单，只需 Process.Start() 尽可能多的 7-zip EXE （准）并行执行任务，或者一次执行一些任务，例如 5 个。由您决定。

# oracle - 没有插入权限的 Oracle 创建表

> ID：12679167
> 
> 赞同：1
> 
> 时间：2012-10-01T18:48:17.413
> 
> 标签：oracle, permissions, oracle10g

在 oracle dbms 中，用户是否有可能拥有创建表的权限，但没有权限在其中插入，尽管同一用户刚刚创建了它？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:22:41.003

### 简短的回答：

不，这不对。

### 更长的答案：

你几乎可以做任何你想做的事情。如果您想限制插入访问，通常的方法是在不同的模式中创建表。假设您`emp`在 schema 中有一个表`hr`，您想从 schema 'users` 访问它：

当[连接](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9013.htm#SQLRF01603) 为：`users`_`emp``hr`

```
grant select on emp to users 
```

或者，如果您还希望`users`能够 UPDATE `emp`：

```
grant select, update on emp to users 
```

最后，当连接为 时`users`，在表名前加上它所在的模式：

```
select * from hr.emps 
```

您现在可以从表中选择，但不能插入其中。

# javascript - 无限滚动主干视图

> ID：12679169
> 
> 赞同：3
> 
> 时间：2012-10-01T18:48:20.473
> 
> 标签：javascript, jquery, backbone.js, underscore.js, infinite-scroll

我想从 JSON 提要中呈现无限/无尽的滚动数据。我有兴趣使用 Backbone/Underscore/jQuery 完成类似于 Pinterest 或 Google Reader 的事情。

**如何将[infiniScroll.js](https://github.com/joneath/infiniScroll.js)模块应用到我的主干视图？**目标是在您滚动到页面末尾附近时获取并附加下一页的（“页面”URL 参数）推文。问题：到达页面底部时，会获取相同的 JSON 页面提要。如何将`page`URL 中的参数更改为`&page=2`等

**演示：** [http](http://dl.dropbox.com/u/19974044/test.html) ://dl.dropbox.com/u/19974044/test.html或[http://jsfiddle.net/k4rPP/3/](http://jsfiddle.net/k4rPP/3/)

```
// Define the model
Tweet = Backbone.Model.extend();

// Define the collection
Tweets = Backbone.Collection.extend({
    model: Tweet,
    // Url to request when fetch() is called
    url: 'https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&trim_user=false&count=10&screen_name=cnn&page=1&callback=?',
    parse: function (response) {
        return response;
    },
    // Overwrite the sync method to pass over the Same Origin Policy
    sync: function (method, model, options) {
        var that = this;
        var params = _.extend({
            type: 'GET',
            dataType: 'jsonp',
            url: that.url,
            processData: false
        }, options);

        return $.ajax(params);
    }
});

// Define the View
TweetsView = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, 'render');
        // create a collection
        this.collection = new Tweets;
        // Fetch the collection and call render() method
        var that = this;
        this.collection.fetch({
            success: function () {
                that.render();
            }
        });
        // infiniScroll.js integration
        this.infiniScroll = new Backbone.InfiniScroll(this.collection, {success: this.appendRender, param:'page', includePage:true});
    },
    // Use an extern template
    template: _.template($('#tweetsTemplate').html()),

    render: function () {
        // Fill the html with the template and the collection
        $(this.el).html(this.template({
            tweets: this.collection.toJSON()
        }));
    }
});

var app = new TweetsView({
    // define the el where the view will render
    el: $('body')
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:36:33.863

url 属性可以指定为函数而不是字符串。所以你可以用这样的东西替换它：

```
...
currentPage: 0,
url: function() {
  this.currentPage++;
  return 'https://path.to.url/?page=' + this.currentPage;
},
... 
```

# c# - Razor Jquery UI 日期选择器不工作

> ID：12679171
> 
> 赞同：2
> 
> 时间：2012-10-01T18:48:26.133
> 
> 标签：c#, jquery, asp.net-mvc-3, razor, datepicker

我已经阅读了很多关于 stackoverflow 的问题，尝试了一些示例，但仍然坚持为什么这不起作用。所以我问社区。

模型：

```
public class UploadModel
{
    public string PatientID { get; set; }
    public DateTime DrawDate { get; set; }
} 
```

控制器：

```
public class FileManagementController : Controller
{

    [HttpGet]
    public ActionResult UpLoad()
    {
        ViewData["message"] = String.Empty;
        UploadModel model = new UploadModel
        {
            PatientID = String.Empty,
            DrawDate = DateTime.Now,
        };
        return View(model);
    }
    [HttpPost]
    public ActionResult Upload(UploadModel model, HttpPostedFileBase MyFile)
    {
        if (ModelState.IsValid)
        {
            //Do Validation and Save here

        }
        UploadModel newmodel = new UploadModel
        {
            PatientID = model.PatientID,
            DrawDate = model.DrawDate,
        };

        ViewData["message"] = "data submitted";

        return View(newmodel);
    } 
```

看法：

```
<form action="" method="post" enctype="multipart/form-data" id="MyForm">
        @Html.EditorFor(m => m)
        <label for="MyDateTime">My Date Time:</label>
        <label for="MyFile">File:</label>
        <input type="file" name="MyFile" id="MyFile" /><br />
        <input id="submit" name="submit" type="submit" value="Save" />                       
    </form> 
```

从那里，我在 _Layout.cshtml 页面中添加了以下代码（所有代码都正确映射）

```
 <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/jquery-ui-1.7.2.custom.css")" rel="stylesheet" type="text/css" />
    <script src='@Href("~/Scripts/jquery-1.7.1.js")' type="text/javascript"  ></script>
    <script src='@Href("~/Scripts/jquery-ui-1.8.1.custom.min.js")'  type="text/javascript" ></script>
    <script type="text/javascript" src='@Href("~/Scripts/jquery.alphanumeric.pack.js")'></script>
    <script type="text/javascript" src='@Href("~/Scripts/jquery.watermark.min.js")'></script> 
```

然后在 Views -> Shared 我添加了一个 EditorTemplates 文件夹并创建了一个 DateTime.cshtml 页面，该页面具有：

```
@model DateTime

@Html.TextBox("", Model.ToString("dd/MM/yyyy"), 
new { @class = "date" })

<script type="text/javascript" >
 $(document).ready(function () {
     //set the date picker
     var dtp = '@ViewData.TemplateInfo.GetFullHtmlFieldId("")';
     dtp = dtp.replace("[", "_");
     dtp = dtp.replace("]", "_");
     //window.alert($(dtp).attr("value"));
     var hid = ($(dtp).attr("type") == "hidden");
     if (!hid) {
         $(dtp).datepicker({
             showOn: 'button', buttonImage: '@Href("~/Content/images/calendar.gif")%>', buttonImageOnly: true
           , changeMonth: true, changeYear: true
           , dateFormat: 'dd M yy'//, numberOfMonths: 2
         });
     }

 });

</script> 
```

这似乎是大多数教程的风格，但似乎不起作用。没有图标出现。在 Chrome 中，我得到了 html5 日历弹出窗口，但从来没有 jquery 一个。任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:26:09.827

选择器对我来说看起来不正确。你是代码：

```
var dtp = '@ViewData.TemplateInfo.GetFullHtmlFieldId("")'; 
```

会产生一个字符串：'my_id'，但你仍然需要告诉 jQuery 字符串是一个 ID，使用 # 符号，如下所示：

```
var dtp = '#@ViewData.TemplateInfo.GetFullHtmlFieldId("")'; 
```

附带说明一下，您真的要为模型中每个渲染的 DateTime 导出整个 Script 标签吗？对我来说似乎没有必要，但您可能已经考虑过这一点。我的建议是将您的 DateTime.cshtml 修改为：

```
@model DateTime

@Html.TextBox("", Model.ToString("dd/MM/yyyy"), new { @class = "date-picker" }) 
```

然后在您的页面或布局中的某个位置，例如：

```
<script type="text/javascript" >
 $(function () {
   $('.date-picker').datepicker({
             showOn: 'button', buttonImage: '@Href("~/Content/images/calendar.gif")%>', buttonImageOnly: true
           , changeMonth: true, changeYear: true
           , dateFormat: 'dd M yy'//, numberOfMonths: 2
   });
 });
</script> 
```

这样，只渲染一个脚本，所有的 DateTime 都得到处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:19:43.813

由于我是菜鸟，我无法发表评论（对不起！），但我能给出的唯一建议是确保从 @Html.EditorFor(m => m) 派生的 html 正是您需要的（此 html 因型号而异）。以下是有关此的更多信息：http: [//msdn.microsoft.com/en-us/library/ee402949 (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/ee402949(v=vs.98).aspx)

另外，我注意到在 javascript 部分的末尾有一个 %>：“@Href("~/Content/images/calendar.gif")%>" 看起来像一个错误。

# amazon-ec2 - 将 Amazon SES 与 Sendmail 集成到 EC2 服务器

> ID：12679172
> 
> 赞同：1
> 
> 时间：2012-10-01T18:48:27.620
> 
> 标签：amazon-ec2, amazon, sendmail

我正在尝试将 SES 与我的 EC2 服务器中的 Sendmail 集成。

我查看了这些文档并按照步骤操作，但没有成功。 [http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTA.Sendmail.html](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTAs.Sendmail.html)

我希望看到视频，但没有关于这个的任何内容。我什至找不到关于此的好文章或博客。

你能帮我吗？我只需要通过 SSH 设置 Sendmail。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:51:03.083

这现在是可能的——登录到您的 AWS 控制台、SES 仪表板，您将在左侧导航中看到一个标题为“SMTP 设置”的部分。在那里，您将找到创建您自己的 SMTP 凭证的说明和机制。

此时，您需要设置 Postfix 或 Sendmail 以充当出站邮件的中继，将其重定向到 AWS SES 服务 API。

*但是*有一些警告：

*   除非您要验证从您的实例发出的邮件的任何可能发件人，否则您将无法将其用作某些普通的 SMTP 网关或出站邮件主机。更理想的情况是供应商向其客户发送大量营销邮件，或者基于订阅或警报推送邮件的服务，所有这些都来自一个或少数几个地址。
*   此外，使用 SES 意味着您必须遵守 AWS 的阈值，即使您已请求生产访问权限。一位 AWS 工程师在培训中告诉我，他们通常会密切关注您的邮件流和任何退回或拒绝，以及对您的邮件的投诉，只要情况看起来不错，他们就会继续在这方面限制您。

祝你好运。

# iis-7 - 查看来自 IIS7 的 SMTP 流量

> ID：12679173
> 
> 赞同：0
> 
> 时间：2012-10-01T18:48:34.407
> 
> 标签：iis-7, smtp, windows-server-2008, virus

我遇到的情况是，带有 IIS7 的 2008 服务器已受到应用程序级别的攻击，并且正在从端口 25 发送垃圾邮件。我们已经运行了病毒扫描并删除了受感染的文件，但垃圾邮件仍在发送。

我们知道垃圾邮件来自本地文件，因为防火墙阻止了端口 25 的入站，并且 SMTP 日志显示了来自本地服务器的所有请求。我们已经对站点（有很多）运行了 LogParser 扫描，以查找服务器上文件的任何 POST 数据，但结果看起来都是真实的。在端口 25 上发送数据的 PID 只是 inetinfo.exe，所以这也没什么用。

我想确定发送这封电子邮件的文件是什么，有人能想出办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:52:19.520

您是否关闭了本地出站属性下的 smtp 服务器？意思是 127\. 等等...？另外，您是否查看了 inetpub 下的 que 文件夹以查看是否存在违规消息？在某些情况下，文件可以将 IIS 中 smtp 上的远程服务器更改为通过代理或其他服务发送，这样它就会忽略您的扫描。

此外，并非所有邮件都必须使用 25 端口来发送电子邮件。如果创建者告诉它，它可以访问任何端口。

# c# - groupeditemspage内的Windows 8项目索引

> ID：12679174
> 
> 赞同：0
> 
> 时间：2012-10-01T18:48:36.170
> 
> 标签：c#, windows-8, microsoft-metro

我正在尝试使用数据模板选择器为 GroupedItemsPage 模板的每组中的第一项创建不同的图块大小。有没有办法为每个项目获取组内的组索引和项目索引？如果不是，是使用该项目的自定义属性的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:52:15.347

快速回答是否定的。向模型添加索引属性。

[http://blog.jerrynixon.com/2012/08/windows-8-beauty-tip-using.html](http://blog.jerrynixon.com/2012/08/windows-8-beauty-tip-using.html)

# javascript - jquery全部替换 和

> ID：12679180
> 
> 赞同：3
> 
> 时间：2012-10-01T18:49:09.087
> 
> 标签：javascript, jquery, regex

鉴于以下 dom 结构，我想将有序列表转换为无序列表。

```
<div class="wrapper"> 
  <ol>
    <li><div>foo</div></li>
    <ol>
      <li><div>bar</div></li>
    </ol>
    <li><div>batz</div></li>
  </ol>
</div> 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:50:37.393

您应该使用[jQuery replaceWith](http://api.jquery.com/replaceWith/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T19:34:59.907

好的，我必须从内到外工作，只有 replaceWith 不起作用，因为它只替换了外部标签而没有替换内部标签，所以我这样解决了：

```
$($('.wrapper').find('ol').get().reverse()).each(function(){
  $(this).replaceWith($('<ul>'+$(this).html()+'</ul>'))
}) 
```

如果有人有更好的解决方案，我会很高兴听到它。

# objective-c - 设置部分插图时，带有 FlowLayout 的 UICollectionView 不滚动

> ID：12679182
> 
> 赞同：11
> 
> 时间：2012-10-01T18:49:14.520
> 
> 标签：objective-c, ios, ipad, uicollectionview

我正在以编程方式使用 UICollectionView。

我将其框架设置如下：

```
UICollectionView *collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(0, 100, self.view.frame.size.width, 3000) collectionViewLayout:flowLayout]; 
```

我`UICollectionViewFlowLayout`的部分插图设置为：

```
flowLayout.sectionInset = UIEdgeInsetsMake(20.0, 20.0, 100.0, 20.0); 
```

我也只有1节。

我已将高度设置为 3,000 以查看集合视图是否会滚动，但不会滚动。我将其设置为，因为当我插入新项目时集合视图似乎没有向上或向下滚动。

`UICollectionView`是从 a 子类化的`UIScrollView`，这意味着我可以继续重置滚动视图内容大小。这会正常工作吗？

唯一的问题是，如果我知道所有项目的大小，包括每行有多少项目，这将起作用。

如果每个项目的大小不同，我将如何找出每一行的大小？我需要它来添加所有行大小并增加`self.collectionView`.

**编辑**

即使我上面的建议，重置内容大小，也不能正常工作！更新我的收藏视图时，我尝试了以下操作：

```
 int numberOfRows = self.dataArray.count / 3;
self.collectionView.contentSize = CGSizeMake(self.view.frame.size.width, (numberOfRows * 200) + 300); 
```

不过，这很丑陋。这是因为它假设我所有的图像的大小都是 200x200px，每行适合 3 个图像（因此除以 3）。

此外，即使我有 +300，最后一行我也只能看到大约 3/4，而不是全部。我必须滚动更多，我才能看到它，但它又回到了 3/4。它有点像滚动刷新，只有当你拖动它时视图才会移动，当你离开它时，它会撞回原来的位置。为什么会这样？只是苹果设计`UICollectionView`的这么差吗？这有点荒谬...... UITableViews 根据他们的内容自动调整他们的滚动。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T19:06:41.603

在回答你关于 UICollectionView 的其他一些问题时，我创建了这个演示项目，它滚动得很好，所以我不知道你遇到了什么问题。为了使最后一行完全可见，我唯一需要做的就是将底部插图的大小增加到 90。我还在 performBatchUpdates:completion: 中添加了一个完成方法，以自动滚动以便最后添加的项目可见（请注意，我使用 performSelector;withObject:afterDelay:) 添加了一些额外的项目。我的图像是 48x48，我只是将我的收藏视图设置为控制器视图的边界。这是代码，因此您可以将其与您所拥有的进行比较：

```
@interface ViewController () <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout> {
NSMutableArray *newData;
}
 @property (nonatomic, retain) UICollectionView *collectionView;
 @property (nonatomic, retain) NSMutableArray *results;
 @end

@implementation ViewController

- (void)viewDidLoad {
    self.results = [NSMutableArray array];
    int i = 11;
    while (i<91) {
        UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"New_PICT00%d.jpg",i]];
        [self.results addObject:image];
        i++;
    }

    UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
    //flowLayout.scrollDirection =  UICollectionViewScrollDirectionHorizontal;

    self.collectionView = [[UICollectionView alloc] initWithFrame:self.view.bounds collectionViewLayout:flowLayout];
    self.collectionView.dataSource = self;
    self.collectionView.delegate = self;
    self.view.backgroundColor = [UIColor blackColor];
    [self.view addSubview:self.collectionView];
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"];
    //[self.collectionView registerClass:[RDCell class] forCellWithReuseIdentifier:@"myCell"];
    [self.collectionView reloadData];

    [self performSelector:@selector(addNewImages:) withObject:nil afterDelay:3];
}

-(void)addNewImages:(id)sender {
    newData = [NSMutableArray array];
    int i = 102;
    while (i<111) {
        UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"New_PICT0%d.jpg",i]];
        [newData addObject:image];
        i++;
    }
    [self addNewCells];
}

-(void)addNewCells {
    NSMutableArray *arrayWithIndexPaths = [NSMutableArray array];
    [self.collectionView performBatchUpdates:^{
        int resultsSize = [self.results count];
        [self.results addObjectsFromArray:newData];
        for (int i = resultsSize; i < resultsSize + newData.count; i++)
            [arrayWithIndexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
        [self.collectionView insertItemsAtIndexPaths:arrayWithIndexPaths];
    }
    completion: ^(BOOL finished){
        [self.collectionView scrollToItemAtIndexPath:arrayWithIndexPaths.lastObject atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:YES];
    }];
}

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section {
    return [self.results count];
}

- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView {
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    //cell.iv.image = [self.results objectAtIndex:indexPath.row];
    cell.backgroundColor = [UIColor colorWithPatternImage:[self.results objectAtIndex:indexPath.row]];
    return cell;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    UIImage *image = [self.results objectAtIndex:indexPath.row];
    return CGSizeMake(image.size.width, image.size.height);
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
    return UIEdgeInsetsMake(10, 10, 90, 10);
}

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Selected Image is Item %d",indexPath.row);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T04:24:21.550

将高度设置`UICollectionView`为 3000 会使您的滚动问题变得更糟。如果它的`UICollectionView`高度为 3000 像素，那么只有在其中包含超过 3000 像素的内容时才需要滚动。您应该将其设置为它所包含的视图的高度（与宽度相同）。

AFAIK 也不应该`contentSize`直接设置，而是您需要覆盖 的`- (CGSize)collectionViewContentSize`子类中的方法`UICollectionViewLayout`，但一般来说，您不需要更改正常使用的内容大小。

我不完全清楚你的问题是什么 - 当你添加超过一个屏幕的项目时你不能滚动？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T09:39:27.007

我遇到了同样的问题，因为我在 viewWillAppear 方法中初始化了我的 collectionView 的元素（即它的 DataSource）。

我最后只添加了一个`[self.collectionView reloadData];`，它工作得很好！

也许你是同样的情况。

# c# - .NET 中的取消订阅事件语法

> ID：12679183
> 
> 赞同：0
> 
> 时间：2012-10-01T18:49:29.360
> 
> 标签：c#, events, syntax, delegates

> **可能重复：**
> [在 C# 中附加事件处理程序的 2 种不同方式是否存在实际差异？](https://stackoverflow.com/questions/214346/is-there-an-actual-difference-in-the-2-different-ways-of-attaching-event-handler)

我正在开发一个 .NET 应用程序，但遇到了一个小的语法困境。我注意到有两种取消订阅活动的方法，我很好奇。两者之间有什么区别，还是相等？是否有任何情况，当他们可能会采取不同的行动？编译器似乎对其中任何一个都没有问题。

```
object.myEvent += new EventHandler(callback_function);
object.myEvent -= new EventHandler(callback_function); 
```

和

```
object.myEvent += new EventHandler(callback_function);
object.myEvent -= callback_function; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:51:37.730

将委托包装在 中`EventHandler`是多余的。即使它是标准模板的一部分，您也可以随时删除它。

Resharper 给你一个警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:51:40.410

没有任何区别。您还可以拥有：

```
object.myEvent += callback_function;
object.myEvent -= callback_function; 
```

编译器做了一些漂亮的类型推断，使代码的可读性更好！

# jquery - jquery 不识别 div 点击

> ID：12679186
> 
> 赞同：0
> 
> 时间：2012-10-01T18:49:32.910
> 
> 标签：jquery, jquery-ui, jquery-selectors

我有以下代码。我的问题是，当我单击 div maya 时，jquery 无法识别它，它不会给我警报。

**CSS**

```
 <style>
   #carousel-single-image {
   width: 320px;
   height: 400px;
   margin: 0 auto;
   background: white;
   }
   #carousel-single-image .touchcarousel-container {
   height: 100%;
   background: url("../touchcarousel/demo-images/wood-pattern.jpg") repeat;
   }
   #carousel-single-image .touchcarousel-item {
   margin-right: 0;
   width: 400px;
   height: 400px;
   }
   #carousel-single-image img {
   width: 300px;
   height: 360px;
   margin: 32px 0 0 8px;
   float:left;
   position: relative;
   display: block;
   padding: 3px;
   background: transparent;
   border: 0;
   -webkit-box-shadow: 0 1px 6px rgba(0,0,0,0.6);
   -moz-box-shadow: 0 1px 6px rgba(0,0,0,0.6);
   box-shadow: 0 1px 6px rgba(0,0,0,0.6);
   }
   #carousel-single-image .tc-paging-container {
   margin-top: -380px;
   }
</style> 
```

**HTML**

```
<div id="productGallery" style="display:none">
   <div id="main-body">
      <div id="carousel-single-image" class="touchcarousel minimal-light">
         <ul class="touchcarousel-container">
            <li class="touchcarousel-item">
               <a href="#"> <img data-original="/image1.jpg" />
               <span class="maya">CheckClick</span></a>
            </li>
            <li class="touchcarousel-item">
               <a href="#"> <img data-original="/image2.jpg" />
               <span class="maya">CheckClick</span></a>
            </li>
         </ul>
      </div>
   </div>
</div> 
```

**脚本**

```
$('.maya').click(function(){
alert("hi");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:52:06.663

包含在 DOM Ready Event 中，并将您的脚本包含在脚本标签中

```
<script type="text/javascript">
    $(function() {
        $('.maya').click(function(){
            alert("hi");
        });
    });
</script> 
```

还要确保 jQuery 文件包含在您的项目中。

似乎在[这里工作](http://jsfiddle.net/sushanth009/HbGy5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:06:10.927

这是一个有效的小提琴......我只在你的整个容器上取出了 display none 样式，所以我可以看到它[http://jsfiddle.net/wcLn4/](http://jsfiddle.net/wcLn4/)

这个带有你的 css [http://jsfiddle.net/wcLn4/1/](http://jsfiddle.net/wcLn4/1/)并且没有显示 none

# xpath - Xpath Post Processor：从 SOAP 响应中提取节点内容

> ID：12679193
> 
> 赞同：2
> 
> 时间：2012-10-01T18:50:09.680
> 
> 标签：xpath, jmeter, assertion

我有这个表格的肥皂回复

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:Responseto xmlns:ns2="http://xyz.company.com/">
         <return>
            <objectContent xsi:type="xs:string" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema">/path/to/file.txt</objectContent>
            <objectType>FILEPATH</objectType>
            <rid>111</rid>
            <sid>2</sid>
         </return>
      </ns2:Responseto>
   </S:Body>
</S:Envelope> 
```

我希望提取 jmeter 中的对象内容以提供给 xpath 断言。

谁能建议如何做到这一点？

我试过`//return/objectType`了，但 DebugSampler 显示我的变量的值为空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:38:41.310

*   将您的 XPath Extractor 作为具有您提到的响应的请求的子项。

*   像这样配置提取器：

    ```
    "Main Sample" Only
    "Use Namespaces" checked
    "Ignore Whitespaces" checked
    "Return entire XPath fragment instead of text content" Unchecked
    "XPath query" : //return/objectType 
    ```

我测试了它的工作原理。

# java - 客户端的html文件加密

> ID：12679195
> 
> 赞同：1
> 
> 时间：2012-10-01T18:50:34.220
> 
> 标签：java, swing, lucene, swingutilities

在搜索要在此处显示 html 文件的关键字后，我正在使用 lucene 在客户端进行索引和搜索。那么有什么方法可以存储和访问 html 文件。实际上 html 文件存储图像和链接，它们应该在 java api 中作为普通 html 文件打开。我正在使用以下代码进行 lucene 索引

```
 try
  {

        IndexWriter indexWriter = new IndexWriter(

        FSDirectory.open(indexDir),

        new SimpleAnalyzer(),

        true,
        IndexWriter.MaxFieldLength.LIMITED);
        indexWriter.setUseCompoundFile(false);
        indexDirectory(indexWriter, dataDir, suffix);

        Document doc = new Document();

        doc.add(new Field("contents", new FileReader(f))); 

        doc.add(new Field("filename",f.getCanonicalPath(),

        Field.Store.YES,Field.Index.ANALYZED));
        indexWriter.addDocument(doc);

        numIndexed = indexWriter.maxDoc();

        indexWriter.optimize();

        indexWriter.close();

        } 

        catch(Exception ex)
        {
        } 
```

我应该如何在客户端显示匹配搜索条件的 html 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:22:56.547

您可能正在寻找[`browse()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)“启动默认浏览器以显示 URI”。或者，可以使用[编辑器窗格，但支持](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)[有限](https://stackoverflow.com/a/6785121/230513)。

# php - 在 HEREDOC 中使用 static::member->method

> ID：12679198
> 
> 赞同：0
> 
> 时间：2012-10-01T18:50:41.960
> 
> 标签：php, heredoc

```
 static public function toolBar()
{
    var_dump(static::$_lang);
    var_dump(static::$_lang->getVal('Index'));
    return <<< EOC
    <a href="index.php">{${static::$_lang->getVal('Index')}}</a>&nbsp;|&nbsp;
    <a href="?view=login">{${static::$_lang->getVal('Login')}}</a>&nbsp;|&nbsp;     
EOC;
} 
```

表达式 {${static::$_lang->getVal('Index')}} 不返回任何内容而不是返回字符串

这个问题有什么解决方法吗？

提前致谢

# cocos2d-iphone - 带有新 RevMobAds 框架的 Cocos2D

> ID：12679199
> 
> 赞同：2
> 
> 时间：2012-10-01T18:50:59.463
> 
> 标签：cocos2d-iphone, revmob

在 Cocos2D 游戏中集成了新的 RevMob.frmework。

现在在我的 Cocos2D 1.0 游戏中出现很多编译错误，而在其他 cocos2D 2.0 游戏中只有链接器错误。

在 Cocos2D 2.0 中，链接器错误是：

```
 "_SKStoreProductParameterITunesItemIdentifier", referenced from:
  "_OBJC_CLASS_$_SKStoreProductViewController", referenced from: 
```

漏掉了哪个系统框架？已添加 StoreKit.framework

在 cocos2D 1.0 中，伴随着这些链接器错误，也出现了一些编译错误。它显示“在 * 之前需要一个属性属性，在下面的行中（在 RevMobAds.framewors 中）

```
@property (nonatomic, strong) NSArray *supportedInterfaceOrientations; 
```

我怎样才能克服所有这些问题并在 cocos2d 游戏中获得新的 revMob sdk？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:57:46.237

由于使用 LLVM GCC 4.2 作为编译器而发生此错误，要解决此问题，只需进行以下更改：

RevMobBanner.h 第 35 行：将“强”更改为“保留”

```
@property (nonatomic, retain) NSArray *supportedInterfaceOrientations; 
```

RevMobButton.h 第 51 行：擦除“原子”

```
@property (readonly) RevMobButtonStatus status; 
```

RevMobFullscreen.h 第 25 行：将“强”更改为“保留”

```
@property(nonatomic, retain) NSArray *supportedInterfaceOrientations; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:38:30.987

确保在构建阶段添加了 RevMob 和 StoreKit 框架：http: [//sdk.revmob.com/ios](http://sdk.revmob.com/ios)

此外，尝试升级您的 XCode，因为这与旧版本 iOS 的不兼容问题有关。

或者等待可能已修复此不兼容问题的新版本 SDK。

![屏幕截图 XCode 构建阶段](../Images/61c303025d2b1d1a8f6d65d1933bd611.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:38:52.680

链接器错误：

确保将 RevMob.framework 添加到目标的“Link Binary with Libraries”构建阶段。

编译器错误：

在我看来很好。确保在该文件中导入#import。更好的是，如果它不存在，请将其添加到 prefix.pch 中。

如果您仍然遇到问题，我建议您直接从 RevMob 获得支持。

# c++ - 如何使用 Boost.Process 从“类型”（Windows）获取跟踪？

> ID：12679202
> 
> 赞同：0
> 
> 时间：2012-10-01T18:51:05.103
> 
> 标签：c++, windows, boost, command-line, process

我想使用 Boost.Process （我使用我使用的[源的](http://svn.boost.org/svn/boost/sandbox/process/)[文档](http://www.highscore.de/boost/process/process/tutorials.html#process.tutorials.pipeline) ）来创建一些服务，但是在测试 lib 时发现我什至无法跟踪一个简单的 cmd 应用程序，比如（注意：在同一个文件夹中，我可以完美地启动我的应用程序） .`type``type "./config.xml"`

我试过的：

我试过同步：

```
#include <boost/process.hpp> 
#include <string> 
#include <vector> 
#include <iostream> 

namespace bp = ::boost::process; 

bp::child start_child() 
{ 
    std::string exec = "type \"./config.xml\""; 

    std::vector<std::string> args; 

    bp::context ctx; 
    ctx.stdout_behavior = bp::capture_stream(); 

    return bp::launch_shell(exec, args, ctx); 
} 

int main() 
{ 
    bp::child c = start_child(); 

    bp::pistream &is = c.get_stdout(); 
    std::string line; 
    while (std::getline(is, line)) 
        std::cout << line << std::endl;

    std::cin.get();
} 
```

还有异步：

```
#if defined(__CYGWIN__) 
#  define _WIN32_WINNT 0x0501 
#  define __USE_W32_SOCKETS 
#  undef BOOST_POSIX_API 
#  define BOOST_WINDOWS_API 
#endif 
#include <boost/asio.hpp> 
#define BOOST_PROCESS_WINDOWS_USE_NAMED_PIPE 
#include <boost/process.hpp> 
#include <boost/array.hpp> 
#include <boost/bind.hpp> 
#include <string> 
#include <vector> 
#include <iostream> 

namespace bp = ::boost::process; 
namespace ba = ::boost::asio; 

ba::io_service io_service; 
boost::array<char, 4096> buffer; 

#if defined(BOOST_POSIX_API) 
ba::posix::stream_descriptor in(io_service); 
#elif defined(BOOST_WINDOWS_API) 
ba::windows::stream_handle in(io_service); 
#else 
#  error "Unsupported platform." 
#endif 

bp::child start_child() 
{ 
    std::string exec = "type \"./config.xml\""; 

    bp::context ctx; 
    ctx.stdout_behavior = bp::capture_stream(); 

    return bp::launch_shell(exec, ctx); 
} 

void end_read(const boost::system::error_code &ec, std::size_t bytes_transferred); 

void begin_read() 
{ 
    in.async_read_some(boost::asio::buffer(buffer), 
        boost::bind(&end_read, ba::placeholders::error, ba::placeholders::bytes_transferred)); 
} 

void end_read(const boost::system::error_code &ec, std::size_t bytes_transferred) 
{ 
    if (!ec) 
    { 
        std::cout << std::string(buffer.data(), bytes_transferred) << std::flush; 
        begin_read(); 
    } 
} 

int main() 
{ 
    bp::child c = start_child(); 

    bp::pistream &is = c.get_stdout(); 
    in.assign(is.handle().release()); 

    begin_read(); 

    c.wait(); 

    std::cin.get();
} 
```

我最近看到 anethig 从中出来。就像它根本无法抓取`type`流=（（而我所有的其他测试都说`echo`并且`ping`像魅力一样工作）有什么方法可以使 Boost.Process`type`正确地与命令行应用程序一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:57:42.153

根据我在 win32 上的回忆，传递给子进程的第一个参数应该是 exe 名称。我也相信操作系统会吃掉第一个参数，期望它是 exe 名称，然后将其余的传递给您的应用程序。

看到这个：[路径和 CreateProcess](https://stackoverflow.com/questions/265650/paths-and-createprocess)

这：http: [//msdn.microsoft.com/en-us/library/ms682425.aspx](http://msdn.microsoft.com/en-us/library/ms682425.aspx)

# objective-c - 组合位域

> ID：12679204
> 
> 赞同：0
> 
> 时间：2012-10-01T18:51:23.590
> 
> 标签：objective-c, bit-manipulation

我很难理解如何以正确的顺序获取这些位

我的目标：

给定以下输入

```
char id = 0x02; //in binary => 0010
char somethingElse = 0xF; //in binary => 1111 
```

如何获得以下输出

```
char result = ?; //in binary 0010 1111 (id somethingElse) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:55:43.887

```
char id = 0x02; //in binary => 0010
char somethingElse = 0xF; //in binary => 1111

char result = (id<<4) | somethingElse; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:02:02.917

我会使用更简单的移位操作，除非这些位经常被独立修改（如某些格式规范的标题中的位）。在这种情况下，我将使用联合和位字段的组合。这是一个小程序来做到这一点

```
int main (int argc, const char * argv[])
{
    @autoreleasepool {

        union {
            struct {
                unsigned char id:4;
                unsigned char somethingElse:4;
            } split;
            unsigned char combined;
        } value;

        value.split.id = 0x02;
        value.split.somethingElse = 0xF;

        NSLog(@"%02X", value.combined); // Outputs F2
    }
    return 0;
} 
```

如果这不是您想要的顺序，您可能想要反转 id 和 somethingElse 的顺序。

# css - CSS不适用于body标签

> ID：12679205
> 
> 赞同：0
> 
> 时间：2012-10-01T18:51:35.443
> 
> 标签：css, stylesheet

我有最基本的 PHP 代码，只有这 13 行：

```
<!DOCTYPE html>
<html>
<head>
    <link href="design/faq.css" media="display" rel="stylesheet" type="text/css" />
    <script src="js/jquery.main.js" type="text/javascript"></script>
</head>
<body>
<?php
    print_r( $_GET );
    echo "hey";
?>
</body>
</html> 
```

当我打开此页面时：`faq.php?code=sth`; PHP 代码正在正确执行，但 CSS 根本不起作用（在任何浏览器中）。由于我主要使用 Opera，以下是屏幕截图：

1.  解析页面 ![解析页面](../Images/17307724cc58e47844b1f2ec1db9dc64.png)

2.  代码 ![代码](../Images/4188b5966eb0e81b04075ca1145c6d2d.png)

3.  这`faq.css` ![CSS](../Images/3ea72bf940beda44f8f7ed97e33f1d35.png)

# 我试过的

*   我的第一直觉是检查是否`faq.css`可以访问。是的，该文件的写入属性为**0644**，与所有其他文件相同。

*   然后我检查了路径是否没有被正确解析，但事实并非如此，因为我后来也尝试使用完整路径。

# 麻烦

我完全被最不麻烦的语言（如 CSS）的这种行为所困扰。这里可能是什么问题？CSS 文件只包含这 4 行。

```
body {
    background-color: #DC2826;
    margin-top: 0px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:56:03.107

你正在使用`media="display"`. 这不是`media`属性的有效类型。

请参阅[此链接](http://www.w3schools.com/tags/att_link_media.asp)了解有效的设备类型（`all`、`aural`、`braille`、`handheld`、`projection`、`print`、`screen`、`tty`、`tv`）。

# iphone - 用iphone登录系统。

> ID：12679209
> 
> 赞同：2
> 
> 时间：2012-10-01T18:51:53.400
> 
> 标签：iphone, ios, ios5, login, asihttprequest

我是 iphone 互联网编程的新手。我正在编写一个具有**登录屏幕的应用程序。**

我正在使用 ASIHTTPREQUEST，这是我想要登录的链接 myurl.com/index.php。在 chrome 中，当我使用用户名和密码登录系统时，我从开发者控制台查看了这个 url 发布到 myurl.com/ajax/login.php 的内容。

无论如何，当我在应用程序中输入用户名和密码后单击登录按钮时，它不会登录系统。它会打印**FAIL:1 (当我写 myurl.com/ajax/login.php, FAIL:1**在浏览器。）

**我的问题的详细描述：**

“在 myurl.com/index.php 中有一个登录屏幕。在网络浏览器中，如果我写下我的用户名和密码，它会发布到 myurl.com/ajax/login.php（来自开发者控制台）。无论如何，在应用程序我已将 myurl.com/index.php 写为 url 但当我请求它在控制台中打印该页面的 html 元素时。如果我将 myurl.com/ajax/login.php 写为 url，它会打印 FAIL:1在控制台中。（通常在网络浏览器中，我写了 myurl.com/ajax/login.php，它给出了 FAIL:1）“

**编辑：我已经解决了问题，“forKey:@"username" 需要等于 "forKey:@"ID" 和 "forKey:@"password" 需要等于 "forKey:@"PWD"。因为在开发者控制台中，用户名和密码作为 ID 和密码返回。感谢您的评论和回答。**

这是代码：

```
-(IBAction)login:(id)sender 
{
    NSURL *url = [[NSURL alloc] initWithString:@"https://myurl.com/index.php"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setTimeOutSeconds:120];
    [request setPostValue:studentid.text forKey:@"username"];
    [request setPostValue:starspassword.text forKey:@"password"];
    [request setDelegate:self];
    [request startAsynchronous];
    [url release];
}

-(void) requestFinished:(ASIHTTPRequest *)request 
{
    NSString *responseString = [request responseString];
    UIAlertView *alert= [[[UIAlertView alloc] initWithTitle:@"Success" message:@"http works" 
                                               delegate:self cancelButtonTitle:@"okay" otherButtonTitles:nil] autorelease];

    [alert show];
    NSLog(@"SUCCESS: %@", responseString);
    //Request succeeded
}

-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex         
{
}

-(void) requestFailed:(ASIHTTPRequest *)request 
{
    NSError *error = [request error];
    NSLog(@"ERROR: %@", [error localizedDescription]);

    UIAlertView *alert= [[[UIAlertView alloc] initWithTitle:@"fail" message:@"http fails" delegate:self cancelButtonTitle:@"okay" otherButtonTitles:nil]autorelease];
    [alert show];
    //Request failed
} 
```

对不起我的英语，有一些关于这个话题的例子，但我没有解决这个问题。谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:14:30.263

你试过这个吗？ASI 包括一种进行基本身份验证的方法

```
[request setUsername:studentid.text];
[request setPassword:starspassword.text]; 
```

向下滚动到处理 HTTP 身份验证

[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

# javascript - 淘汰赛。如何计算可观察数组内更改的数据

> ID：12679215
> 
> 赞同：10
> 
> 时间：2012-10-01T18:52:27.637
> 
> 标签：javascript, knockout.js

请看我的文字。我尝试使用敲除js和foreach的observableArray来计算数组的数据。示例 1 工作正常：如果您更改字段中的数据，则会计算总和。但是示例 2 不起作用。

```
<html>
<head>                                                                         
    <title></title>                                                            
    <script type='text/javascript' src='/js/jquery-1.8.2.min.js'></script>     
    <script type='text/javascript' src='/js/knockout-2.1.0.debug.js'></script> 
</head>                                                                        
<body>
<p>Example 1</p>
<div>
    <p>
    <input data-bind="value: fnum1" />
    <input data-bind="value: fnum2" />
    <span data-bind="text: ftotsum"></span>
    </p>
</div>    
<p>Example 2</p>
<div>
    <p>
    <!-- ko foreach: fields -->
    <input data-bind="value: $data" />
    <!-- /ko -->
    <span data-bind="text: ltotsum"></span>
    </p>
</div>
</body>
<script>
    function vm(){
        //Calc Example 1
        var self = this;
        self.fnum1 = ko.observable(1);
        self.fnum2 = ko.observable(2);
        self.ftotsum = ko.computed(function(){
            return parseFloat(self.fnum1()) + parseFloat(self.fnum2());
        });
        //Calc Example 2
        self.fields = ko.observableArray([1, 2]);
        self.ltotsum = ko.computed(function(){
            var total = 0;
            ko.utils.arrayForEach(self.fields(), function(item) {
                total += parseFloat(item);
            })
            return total;
        }); 
    };

    ko.applyBindings(new vm());
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:54:04.717

**编辑：**得到小提琴工作，Raffaele 说你需要将可观察对象包装在一个对象中是正确的，但你可以在数组创建本身中做到这一点，我喜欢使用 ko.utils 来解开我的可观察对象，它做同样的事情对于可观察的，但如果有一个不可观察的传递给它，它不会崩溃。有关完整示例，请参见[小提琴](http://jsfiddle.net/Rynan/EBxy4/)。

observableArray 不会使传递的值可观察，这是一个常见的错误。observableArray 只观察对数组的修改，而不是值。如果你想让你的数组中的值是可观察的，你必须这样做。

```
function vm(){
    //Calc Example 1
    var self = this;
    self.fnum1 = ko.observable(1);
    self.fnum2 = ko.observable(2);
    self.ftotsum = ko.computed(function(){
        return parseFloat(self.fnum1()) + parseFloat(self.fnum2());
    });
    //Calc Example 2
    self.fields = ko.observableArray([{"num":ko.observable(1)},{"num":ko.observable(2)}]);
    self.ltotsum = ko.computed(function(){
        var total = 0;
        ko.utils.arrayForEach(self.fields(), function(item) {
            total += parseFloat(ko.utils.unwrapObservable(item.num));
        });
        return total;
    }); 
};
ko.applyBindings(new vm()); 
```

现在应该使用上面的示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T19:55:51.050

[文档](http://knockoutjs.com/documentation/observableArrays.html)说：

> **关键点：`observableArray`跟踪数组中有哪些对象，而不是那些对象的状态**
> 
> 简单地将一个对象放入 observableArray 并不能使该对象的所有属性本身都可观察。当然，如果您愿意，您可以使这些属性可观察，但这是一个独立的选择。observableArray 只跟踪它持有的对象，并在**添加**或 **删除**对象时通知侦听器。

您的第二个示例不起作用，因为输入字段的值**未绑定**到数组中的值。数组中的值在`foreach`绑定中仅使用一次，但是当您在输入框中键入时，不会触发 KO。

这是[一个实现了解决方案的工作小提琴](http://jsfiddle.net/eysae/)。我用了一个助手`ObsNumber`

```
function vm(){
    var self = this;

    var ObsNumber = function(i) {
        this.value = ko.observable(i);
    }

    self.fields = ko.observableArray([new ObsNumber(1) ,
                                      new ObsNumber(2)]);

    self.sum = ko.computed(function(){
        var total = 0;
        ko.utils.arrayForEach(self.fields(), function(item) {
            total += parseFloat(item.value());
        });
        return total;
    });
};

ko.applyBindings(new vm()); 
```

和以下标记

```
<div>
    <p>
    <!-- ko foreach: fields -->
    <input data-bind="value: $data.value" />
    <!-- /ko -->
    <span data-bind="text: sum"></span>
    </p>
</div>​ 
```

# css - 滚动条出现时元素溢出容器

> ID：12679224
> 
> 赞同：0
> 
> 时间：2012-10-01T18:52:51.690
> 
> 标签：css, scrollbar, overflow

我正在构建一个站点布局（应该是跨浏览器的 ie7,8,9 和所有最近的），在我尝试放大之前一切都很好。当滚动条出现时，标题的浮动元素移出它的容器（所以它看起来 ）。

目前，这种行为在每个浏览器上都存在，而且页面使用的是粘性页脚，所以我无法真正修改我猜的主要结构。

这是页面： http: [//www.mindsinfusion.com/k/](http://www.mindsinfusion.com/k/)

有想法该怎么解决这个吗？我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:02:01.157

您的#pageHeader & footer DIV 被定义为 100% 宽度，适用于窗口。当您缩放时，您的窗口实际上会变小。

我尝试将 a 添加`min-width: 1030px;`到您的 css 中，它在 chrome 和 firefox 中有效，但它可能不是完全跨浏览器的解决方案。

# forge - trigger.io - 无法再创建 ipa 文件

> ID：12679229
> 
> 赞同：2
> 
> 时间：2012-10-01T18:53:14.650
> 
> 标签：forge

我通常使用 trigger.io 为 iOS 生成我的 ipa 文件。现在，当我想生成文件时，我收到以下错误消息：

运行 /usr/bin/codesign 时失败：codesign_allocate：对象：/Users/mherceg/Desktop/ag-app/development/ios/device-ios.app/Forge 格式错误的对象（未知加载命令 39）/Users/mherceg/Desktop /ag-app/development/ios/device-ios.app：目标文件格式无法识别、无效或不合适

它昨天工作，但现在它没有。非常欢迎任何帮助。

谢谢，

安内

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:39:54.963

这*可能*与我们平台的[v1.4.16](http://docs.trigger.io/en/latest/release-notes.html#v1-4-16)有关，我们切换到在 Xcode 4.5 上构建：我建议升级 Xcode 并确保安装了命令行工具（首选项 ↦ 下载）。

# jquery - 将自定义方法添加到 jquery ui 对话框

> ID：12679232
> 
> 赞同：4
> 
> 时间：2012-10-01T18:53:38.103
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我该怎么做：

```
$("#some_div").dialog("doSomething"); 
```

该方法应该做的是在标题栏中添加一个额外的图标

**编辑1**：我已经尝试过这个[解决方案](https://stackoverflow.com/a/12642652/702353)：该方法被调用但我无法访问对话框对象（也许我做错了什么）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:32:52.233

首先，如果您要向标题栏添加一个图标，我建议您将一个类应用到该对话框并使用 CSS 对其进行样式设置。例子：

```
$( "#some_div" ).dialog({ dialogClass: "someClass" }); 
```

如果您仍想添加自定义方法，请参阅[文档](http://jqueryui.com/demos/dialog)说明：

提供一个回调函数来处理 create 事件作为一个 init 选项。

```
$( ".selector" ).dialog({
   create: function(event, ui) { ... }
}); 
```

按类型绑定到 create 事件：dialogcreate。

```
$( ".selector" ).bind( "dialogcreate", function(event, ui) { 
    ... 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:55:09.213

好的，这就是我所做的：

```
//in a separate js file
$.ui.dialog.prototype.showExtraButton = function()
{
    this.uiDialogTitlebar.append("<a role='button' class='ui-dialog-titlebar-icon ui-dialog-titlebar-icon-extra'><span class='ui-icon'></span></a>");
}

//call it this way
$("#some_div").dialog("showExtraButton");

//css
.ui-dialog-titlebar-icon {
  position: absolute;
  right: 25px;
}

.ui-dialog-titlebar-icon-extra span
{
    display: block;
    background-image: url(../path_to_img/button_extra.png)!important;
} 
```

兰登的这个[解决方案以及凯文 B 的](https://stackoverflow.com/a/12642652/702353)[这个](https://stackoverflow.com/a/10902542/702353)解决方案给了我如何解决我的问题的答案

**更新 2014-01-03**

TIL 关于[$.widget()](http://learn.jquery.com/jquery-ui/widget-factory/extending-widgets/)，所以这是同一事物的另一种实现

```
$.widget("ui.dialog", $.ui.dialog,
{
    showExtraButton: function()
    {
        this.uiDialogTitlebar.append("<a role='button' class='ui-dialog-titlebar-icon ui-dialog-titlebar-icon-extra'><span class='ui-icon'></span></a>");
    }
}); 
```

# html - 将文本/元素放在 HTML 文档的右侧

> ID：12679234
> 
> 赞同：2
> 
> 时间：2012-10-01T18:53:42.497
> 
> 标签：html, css, position

我想要什么：**将文本或元素粘贴到文档的右侧，而不是 window**。

但是，如果当前没有实现 ( `position: absolute; right:0;`)，当我调整窗口大小时，文本总是停留在窗口的右侧，即使出现了滚动条（因为顶部的元素具有固定宽度）。当我向右滚动时，文本不再右对齐。

这是示例：

[http://jsfiddle.net/N5jc9/](http://jsfiddle.net/N5jc9/)

请注意，我无法控制 container1。任何人都使用CSS对此有很好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:05:08.243

您可以使用`:after`伪元素并将其放置在元素的右侧`<body>`。当然，只有当您为`<body>`元素设置了固定/最小宽度时，这一点才会很明显。

**演示**：http: [//jsfiddle.net/PPtD5/2/](http://jsfiddle.net/PPtD5/2/)

**代码**：

```
body {
    width: 70%;
    height: 200px;
    position: relative;
}
body::after {
    content: "This one sticks to the right of <body>";
    width: 100px;
    position: absolute;
    right: -120px;
    top: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:09:12.920

不确定我是否完全理解您对容器 1 的控制，但如果您将 display:inline-block 应用于每个类，则文本将显示在容器 1 的右侧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:56:42.263

将容器 2 放入容器 1 中，并使容器 1 的位置相对。

# delphi - Delphi XE2 RTTI坏了？

> ID：12679240
> 
> 赞同：12
> 
> 时间：2012-10-01T18:54:02.343
> 
> 标签：delphi, delphi-xe2, delphi-2010, delphi-xe3

我最近从 D2010 迁移到 DXE2，并在 XE2 和 XE3（在我的朋友 XE3 中测试）中发现了一个与类内 TBytes 字段的 RTTI 生成相关的惊人错误（或功能？）。

我发现永远不会生成类中 TBytes 变量的 RTTI 信息。

以下代码在 D2010 中运行良好，但在 XE2/XE3 中显示消息“错误”

有没有人有任何线索？这将完全破坏我们所有的软件数据序列化实现

要测试代码，请将 Rtti 单元添加到使用声明中

```
type

  TMyClass = class
  public
    Field1: Integer;
    Field2: TBytes;
  end;

procedure TForm2.Button1Click(Sender: TObject);
var
  i: Integer;
  Data: TMyClass;
  Rtti: TRttiContext;
  RttiClassType: TRttiInstanceType;
begin

  Data := TMyClass.Create;
  try

    // Get the context
    Rtti := TRttiContext.Create;
    try

      // Get the type for the class
      RttiClassType := TRttiInstanceType(Rtti.GetType(Data.ClassInfo));

      // Check the fields
      for i := 0 to High(RttiClassType.GetFields) do
      begin

        // Check the field type
        if not Assigned(RttiClassType.GetFields[i].FieldType) then
          ShowMessage('Error');

      end;

    finally
      Rtti.Free;
    end;

  finally
    Data.Free;
  end;

end; 
```

当检查 Field2 是 TBytes 时将显示错误消息，因为 FieldType 始终为 nil ！！！

有人知道从 D2010 到 XE2 的 RTTI 发生了什么变化吗？可能是因为 TBytes 类型从 Byte 数组更改为泛型数组？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T09:27:13.510

您可以修复此错误（它实际上与 Mason 提到的错误不同）。

```
type
  FixTypeInfoAttribute = class(TCustomAttribute)
  public
    FTypeInfo: PPTypeInfo;
    constructor Create(TypeInfo: PTypeInfo);
  end;

procedure FixFieldType(TypeInfo: PTypeInfo);
var
  ctx: TRttiContext;
  t: TRttiType;
  f: TRttiField;
  a: TCustomAttribute;
  n: Cardinal;
begin
  t := ctx.GetType(TypeInfo);
  for f in t.GetFields do
  begin
    for a in f.GetAttributes do
    begin
      if (a is FixTypeInfoAttribute) and f.ClassNameIs('TRttiInstanceFieldEx') then
      begin
        WriteProcessMemory(GetCurrentProcess, @PFieldExEntry(f.Handle).TypeRef,
          @FixTypeInfoAttribute(a).FTypeInfo, SizeOf(Pointer), n);
      end;
    end;
  end;
end;

constructor FixTypeInfoAttribute.Create(TypeInfo: PTypeInfo);
begin
  FTypeInfo := PPTypeInfo(PByte(TypeInfo) - SizeOf(Pointer));
end; 
```

然后将属性添加到类定义中：

```
type
  TMyClass = class
  private
    Field1: Integer;
    [FixTypeInfo(TypeInfo(TBytes))]
    Field2: TBytes;
  end; 
```

并确保调用了 FixFieldType 例程：

```
initialization
  FixFieldType(TypeInfo(TMyClass)); 
```

在 XE 上测试

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-01T19:07:29.327

这是[在 XE3 中修复的已知问题。](http://qc.embarcadero.com/wc/qcmain.aspx?d=103729) 不幸的是，升级是修复它的唯一方法。错误修复通常不会被移植回来。

**编辑：**或者不是。显然这实际上并没有解决，因为它仍然出现在 XE3 中。将其报告为新案例并提及 103729 可能是最好的做法。

# php - PHP/MySQL - “BEGIN...COMMIT”不工作

> ID：12679241
> 
> 赞同：8
> 
> 时间：2012-10-01T18:54:05.867
> 
> 标签：php, mysql, transactions, insert

我正在寻找一种在单个查询中将数据插入两个数据库表的方法，这样如果一个失败，既不保存（我不想要孤立的数据）。我遇到了一个 Stack Overflow 问题，该问题向我展示了如何使用 BEGIN...COMMIT 来完成此操作，但它根本不起作用。

这是我设置的查询：

```
$query = "BEGIN;
            INSERT INTO content_subpages (title, url_referer) VALUES ('$pagetitle','$url_referer');
            INSERT INTO ccm_main_menu (sub_item, sub_item_link,sub_item_sort_order) VALUES ('$pagetitle','$url_referer','$newsort');
            COMMIT;";
mysql_query($query) or die (mysql_error()); 
```

我收到以下错误： `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO content_subpages (title, url_referer) VALUES ('TESTING','testing'); ' at line 2`

这是我第一次使用 BEGIN...COMMIT，所以我可能做错了什么是合理的，但我遵循了我提到的 Stack Overflow 问题的选定答案给出的 SQL Fiddle 示例的语法（http:// stackoverflow.com/questions/12649706/mysql-insert-into-multiple-tables-in-same-query-with-begincommit），但它仍然无法正常工作。

如果我可以在没有 BEGIN...COMMIT 的情况下轻松实现“全有或全无”多个 INSERT 结果，那将是一个可以接受的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T18:58:27.487

尝试将这些行分成多个 php 语句：

```
$query = "BEGIN";
mysql_query($query) or die (mysql_error());
$query = "INSERT INTO content_subpages (title, url_referer) VALUES ('$pagetitle','$url_referer')";
mysql_query($query) or die (mysql_error());

$query = "INSERT INTO ccm_main_menu (sub_item, sub_item_link,sub_item_sort_order) VALUES ('$pagetitle','$url_referer','$newsort')";
mysql_query($query) or die (mysql_error())

$query = "COMMIT";
mysql_query($query) or die (mysql_error()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T18:56:42.450

你需要`multi_query`改用。

[http://php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:01:17.093

确保您使用的是 InnoDB 表而不是 MyISAM 表，因为 MyISAM 不是事务性的。

要使用 InnoDB 表，请在创建它时，在结束括号后添加`ENGINE=InnoDB`. 默认情况下，使用 MyISAM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:08:22.420

尝试：

```
 $dbh->beginTransaction();
 $query = "INSERT INTO content_subpages (title, url_referer) VALUES ('$pagetitle','$url_referer');
            INSERT INTO ccm_main_menu (sub_item, sub_item_link,sub_item_sort_order) VALUES ('$pagetitle','$url_referer','$newsort')";
 $dbh->exec($query);
 $dbh->commit(); 
```

顺便说一句，Simon Germain 说得很好，Transaction 将使用 InnoDB 引擎处理表。

# javascript - 解析复杂的 JSON Javascript

> ID：12679244
> 
> 赞同：1
> 
> 时间：2012-10-01T18:54:33.310
> 
> 标签：javascript

我能够使用 JSON.parse 解析返回简单数据的 JSON，但我无法处理返回对象、日期、字符串等的数据。

```
var theData=JSON.parse(theData); 
```

像这样的 JSON.parse 返回 [Object] 对象，根本没有数据（我可以看到数据已成功返回，因为如果我关闭了 JSON.parse，它会将所有数据作为字符串返回）。

```
{
"AppName": "TheName",
"AppUrl": "https:\/\/app\/icons\/unknown.png",
"aGUID": "45c055d2-2edc-d4444"."DateCreated": "8\/23\/2012 11:04AM", {
    "ID": "yser123",
    Name ":" User "}
    } 
```

在 javascript 中解析这些数据的最佳方法是什么（我无法使用 jquery）？

注意：我写的 JSON 假设它是有效的

这是我用来检索数据的代码..

```
var xhReq = new XMLHttpRequest();
xhReq.open("POST", "ClientService.svc/REST/GetDetail", false);
xhReq.send(null);
var serverResponse = xhReq.responseText;
alert(serverResponse);
return serverResponse; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:25:06.317

听起来这确实有效。如果你打电话给这样的事情：

```
alert(JSON.parse(serverResponse)) 
```

它将显示正确的 [object Object]。如果你打电话

```
alert(JSON.parse(serverResponse).appName) 
```

您应该看到 appName。如果您没有看到“SyntaxError”被抛出，则 JSON.parse() 正在工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:19:47.753

首先，[**不要使用同步 XHR**](https://stackoverflow.com/a/7337091/201952)。将您的 JavaScript 重写为异步的。

```
function getDetail(cb) {
    var xhReq = new XMLHttpRequest();
    xhReq.open("POST", "ClientService.svc/REST/GetDetail", true);
    xhReq.onreadystatechange = function() {
        if (xhReq.readyState == 4) cb(xhReq.responseText);
    }
    xhReq.send(null);
}

// to call:

getDetail(function(data) {
    JSON.parse(data);
} 
```

其次，您的问题不在于 JSON 解析不正确。这是您对`alert`. 当您传递`serverResponse` **object**时，`alert`通过调用对象的`toString`方法将对象强制转换为字符串，该方法仅返回`'[object Object]'`。

试试`console.log`。可以在控制台中检查对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:59:48.317

您的 JSON 格式错误，数据需要是字符串。

所以，这会起作用（我打破了界限以提高可读性）：

```
var data = "{" + 
    "    \"AppName\": \"TheName\", " + 
    "    \"AppUrl\": \"https:\/\/app\/icons\/unknown.png\", " + 
    "    \"aGUID\": \"45c055d2-2edc-d4444\", " + 
    "    \"DateCreated\": \"8\/23\/2012 11:04AM\", " +
    "    \"foo\": { " + 
    "        \"ID\": \"yser123\", " + 
    "        \"Name\":\"User\"" + 
    "    }" + 
    "}";
var obj = JSON.parse(data);
alert( obj.AppName ); 
```

当然，如果您使用简单的引号作为字符串分隔符，代码将是：

```
var data = '{' + 
    '    "AppName": "TheName", ' + 
    '    "AppUrl": "https:\/\/app\/icons\/unknown.png", ' + 
    '    "aGUID": "45c055d2-2edc-d4444", ' + 
    '    "DateCreated": "8\/23\/2012 11:04AM", ' +
    '    "foo": { ' + 
    '        "ID": "yser123", ' + 
    '        "Name":"User"' + 
    '    }' + 
    '}'; 
```

这**不起作用**：

```
var data = "{" + 
    "    'AppName': 'TheName', " + 
    "    'AppUrl': 'https:\/\/app\/icons\/unknown.png', " + 
    "    'aGUID': '45c055d2-2edc-d4444', " + 
    "    'DateCreated': '8\/23\/2012 11:04AM', " +
    "    'foo': { " + 
    "        'ID': 'yser123', " + 
    "        'Name': 'User'" + 
    "    }" + 
    "}"; 
```

jsFiddle：http: [//jsfiddle.net/9pmdm/1/](http://jsfiddle.net/9pmdm/1/)

# php - Zend_Translate 与多维数组

> ID：12679246
> 
> 赞同：0
> 
> 时间：2012-10-01T18:54:40.233
> 
> 标签：php, zend-framework, internationalization

我在我的应用程序中使用 Zend_Translate 和数组适配器。

我的代码如下所示：

```
$english = array(
    'city' => 'City',
    'countryCode' => 'Country Code'
);

$translate = new Zend_Translate(
    array(
        'adapter' => 'array',
        'content' => $english,
        'locale'  => 'en'
    )
); 
```

有没有办法使用多维数组，以便将翻译字符串拆分为如下示例中的类别？

```
 $english = array(
    'country' => array(
        'city' => 'City',
        'countryCode' => 'Country Code'
    )
 ); 
```

所以我可以这样称呼：

```
$translate->setLocale('en');
echo $translate->_('country/city'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:20:32.163

我改变了主意，现在我像 AsTeR 所说的那样使用 TMX。

# asp.net-mvc - EF 5 - 模型优先，如何在不删除数据库的情况下更新数据库架构

> ID：12679248
> 
> 赞同：6
> 
> 时间：2012-10-01T18:54:41.393
> 
> 标签：asp.net-mvc, entity-framework

我正在 MVC 4、EF 5.0 中开发

模型优先开发 - 我如何“轻松”更新数据库架构，而无需删除数据库/擦除任何数据？

例如，我有一个客户表。在此表中，我们捕获姓名、姓氏、电子邮件地址。我现在想收集电话号码，所以我更改了模型并让 EF 更新数据库架构。

Visual Studio 2012 将我推荐给[http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269)，但是这对我来说看起来像中文。

他们谈论运行称为代码优先迁移的 NUGET 包。VS2012 不会自动打包此功能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:58:00.450

数据库迁移是您正在寻找的。自动和在代码中指定 - [http://msdn.microsoft.com/pl-PL/data/jj591621](http://msdn.microsoft.com/pl-PL/data/jj591621)

# ios - 代码签名错误 - XCode 4.5 - iOS 6

> ID：12679253
> 
> 赞同：0
> 
> 时间：2012-10-01T18:55:08.017
> 
> 标签：ios, xcode, code-signing, xcode4.5

我将 XCode 更新到 v. 4.5，现在当我尝试运行应用程序时，我收到错误消息：`Code Sign error: The identity 'iPhone Developer' doesn't match any valid, non-expired certificate/private key pair in your keychains`我不使用 Apple Developer 程序，价格为 99 美元。

**怎么了？**

它发生在更新之后。我在stackoverflow上搜索了很多答案，但没有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:58:29.577

如果您想在未越狱的 iOS 设备上从 Xcode 运行您的应用程序，您*必须使用 Apple Developer Program。*

如果您尝试在模拟器中运行应用程序，则必须从 Xcode 左上角的下拉列表中选择它。并确保（在构建设置中）您没有进行代码签名。

# objective-c - 从 ipad 上的 cam roll 中选择照片需要弹出控制器错误

> ID：12679254
> 
> 赞同：0
> 
> 时间：2012-10-01T18:55:09.093
> 
> 标签：objective-c, ios, ipad, uipopovercontroller, ios-universal-app

我将一个 iPhone 应用程序转换为通用的。

我的一个功能需要从表视图控制器中的按钮从相机胶卷中选择一张照片。我收到一个错误，说我需要使用弹出控制器来执行此操作。

`On iPad, UIImagePickerController must be presented via UIPopoverController'`

由于这是内置代码（我从另一个开发人员那里得到这个），我可以得到一些关于在代码中正确执行此操作的建议。

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;

[self presentModalViewController:imagePicker animated:YES]; 
```

到目前为止我尝试了什么：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;
////////
imagePicker.modalPresentationStyle = UIModalPresentationCurrentContext; 
////////
[self presentModalViewController:imagePicker animated:YES]; 
```

和

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;
////////
self.modalPresentationStyle = UIModalPresentationCurrentContext;
////////
[self presentModalViewController:imagePicker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:23:04.517

您需要使用 UIPopoverController。

```
UIPopoverController *popoverController = [[UIPopoverController alloc]
initWithContentViewController:imagePicker];

popoverController.delegate = self;

[popoverController 
     presentPopoverFromRect:sender
     permittedArrowDirections:UIPopoverArrowDirectionUp
     animated:YES]; 
```

这是一个例子： [http](http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_(Xcode_4) ://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_(Xcode_4 )

# php - 考拉框架网站不显示首页

> ID：12679256
> 
> 赞同：1
> 
> 时间：2012-10-01T18:55:23.937
> 
> 标签：php, content-management-system, koala-framework

我有一个关于名为 Koala-Framework 的特殊 php 框架的问题。

我已经在我的虚拟 ubuntu 操作系统上设置了一个 apache2，添加了一个仅为我的第一个带有这个 cms 的网站保留的虚拟主机，还添加了主机条目并按照[http://www.koala-framework.org/about上的教程进行操作/cms/installation](http://www.koala-framework.org/about/cms/installation)，但是如果我进入本地域（在我的情况下是已配置的`kwf-cms-demo.localhost`），我只会被重定向到查看文件夹结构而不是下载的演示网站...

虚拟主机需要重定向哪个 DocumentRoot？（因为我认为这可能是这个问题的根源......）

**PS：** `/var/www/kwf-cms-demo$ php bootstrap.php setup`退货：

> 应用程序似乎已经设置好了。（更新文件存在）

所以，我认为设置必须完成没有任何问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:16:24.133

似乎 Apache 没有启动 bootstrap.php，因为 .htaccess 中的重写规则没有得到遵守。

像这样启用 mod_rewrite：

```
sudo a2enmod rewrite 
```

另请参阅此处的第 5 点： [http ://www.koala-framework.org/about/server_requirements/ubuntu_example_configuration](http://www.koala-framework.org/about/server_requirements/ubuntu_example_configuration)

# opencpu - 使用存储在 OpenCPU 服务器上的输出文件作为后续函数调用的输入

> ID：12679259
> 
> 赞同：2
> 
> 时间：2012-10-01T18:55:38.207
> 
> 标签：opencpu

**问题：**如何使用存储在 OpenCPU 服务器上的输出文件作为另一个函数的输入？

**背景：** 我正在尝试在 openCPU 中使用`knitr`和`markdown`生成 html，我可以使用它来更新带有页面加载统计信息的网页。

基本工作流程如下：

1.  生成 .Rmd 文件，存储在本地。
2.  访问使用 AJAX 将 .Rmd 文件上传到服务器上的 OpenCPU 实例的网页。
3.  `knit`通过 openCPU使用该函数将函数转换为存储在服务器上的 *.md 文件。
4.  对存储在服务器上的文件使用该`markdownToHTML`函数（通过传入通过调用生成的适当哈希`knit`）并接收包含生成的 HTML 的 AJAX 回复。
5.  使用新的 HTML 更新网页。

就目前而言，我的这个过程一直到第 4 步。我可以`knit`通过表单请求 POST 调用传入 .Rmd 文件，并且我收到来自 OpenCPU 的以下回复：

```
{
"object" : "xa9eaea44e1",
"graphs" : [
    "xf31dcfe7f3"
],
"files" : {
    "figure" : "xfc55396fd8",
    "test.md" : "x7821c69f79"
}
} 
```

通过函数`"test.md"`生成的输出文件在哪里。`knit`现在，我尝试使用散列（在这种情况下`"x7821c69f79"`，通过 POST 到`/R/pub/markdown/markdownToHTML/ascii`以下参数：

```
file     /R/tmp/x7821c69f79/bin 
```

这将返回`HTTP 400`带有以下消息的错误：

```
cannot open URL 'http://localhost/R/store/R/tmp/x7821c69f79/bin/rds' 
```

但是，当我向 发出 GET 请求时，会返回`/R/tmp/x7821c69f79/bin`的内容。`test.md`所以我知道文件在调用`knit`.

那么，这里发生了什么？换句话说，**如何使用存储在 OpenCPU 服务器上的输出文件作为另一个函数的输入？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:40:44.060

嗯，这个`/store`错误看起来像一个错误，我会调查的。

也许在第 3 步中，您可以让函数返回 的内容`test.md`，例如以`return(readLines(test.md))`?结尾 或者更好的是，不要输出到`test.md`a`tmpfile()`并返回它的内容。这样，输出将作为 R 对象存储在存储中，而不是原始文件，您可以只传递一个参数，例如`file=x7821c69f79`在步骤 4 中。

您是否看过[降价示例应用程序](http://public.opencpu.org/apps/opencpu.demo/markdown)？请参阅[此处](https://github.com/jeroenooms/opencpu.demo/blob/master/R/knithtml.R)和[此处](https://github.com/jeroenooms/opencpu.demo/tree/master/inst/opencpu/apps/markdown)的来源。

# java - Java 模式与正则表达式不匹配

> ID：12679265
> 
> 赞同：3
> 
> 时间：2012-10-01T18:56:04.133
> 
> 标签：java, regex

这是我的问题。我有这个：

```
String data = "java.awt.Color[r=168,g=228,b=160]" //example this changes.
Pattern p = Pattern.compile("(\\d+)");
Matcher m = p.matcher(data);
if(m.matches()){
    ....
} 
```

但是，它不匹配。这是为什么？我正在尝试检索括号内的数字。

我应该尝试什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T18:59:01.323

`Matcher.matches()`匹配完整的字符串。您可以使用`Matcher.find`来匹配各个整数：

```
while (m.find()) {
  System.out.println(m.group(1));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T18:57:46.647

[`Matcher.matches`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)告诉你你的正则表达式是否匹配*整个*字符串。您的字符串并非全是数字。它包含字母、点、等号和方括号。所以你的匹配器不匹配。

你想要[`Matcher.find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)。搜索部分匹配。 [`Matcher.group`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28int%29)然后允许您检索输入字符串的匹配部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T18:58:10.137

该`matches`方法将尝试将正则表达式与*整个输入*进行匹配。

使用 the[`find`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)和methods 方法的组合*在*[`group`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group%28%29)输入中查找和使用匹配项：

 *```
while (m.find())
    System.out.println(m.group()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-01T18:58:22.670

请注意，该[`Matcher.matches()`方法](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29)尝试匹配*整个字符串*。

你想[`Matcher.find()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)改用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T18:58:08.363

因为您的正则表达式与字符串不匹配，所以在 \d 匹配之前（和之后）还有其他字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-15T13:16:14.277

`matches()`方法尝试匹配整个字符串，但您只需要在其中出现数字。您需要使用`find()`方法，您可能需要使用`while`运算符而不是`if`因为它会转移`matcher`到下一个匹配项。*

# ruby-on-rails - API 和 Rails 与 JSON

> ID：12679266
> 
> 赞同：1
> 
> 时间：2012-10-01T18:56:04.367
> 
> 标签：ruby-on-rails, json, api

我真的很困惑这个概念。我应该让它`API`处理`JSON`响应。我读过[这个](http://blog.gomiso.com/2011/06/27/building-a-platform-api-on-rails/) 和其他地方，他们都展示了如何为控制器的`show`或`index`方面做的例子。我明白，您输出模型的所有属性。但我的主要问题是，如果有人要创建或编辑，我该怎么处理`JSON`那里的整体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:04:46.883

如果您需要做的只是传回 200 以成功创建，则不要创建响应。

渲染 :nothing => true

另一方面，如果您向要更新的对象添加了一些客户需要的重要信息（如果您不确定，则假设客户端需要它），那么您应该将更新后的对象的属性传回

```
 respond_to do |format|
  format.json {render :json => {... }}
end 
```

# security - 存在电子邮件时处理 OAuth 注册/登录

> ID：12679267
> 
> 赞同：1
> 
> 时间：2012-10-01T18:56:04.700
> 
> 标签：security, authentication, oauth, openid

问题假设/条件：

1.  系统中存在具有电子邮件`foo@bar.com`（未验证）的用户。
2.  访客未登录系统（没有当前会话，例如新浏览器）。
3.  访客通过 OAuth（用户授权）使用 Google 帐户注册/登录。
4.  系统会收到带有 uid 的回调和电子邮件`foo@bar.com`[已由 Google 验证]。

我在这里看到三个选项：

A. 使用电子邮件 foo@bar.com 将访问者登录到现有帐户。这有一些安全隐患。

B. 要求输入密码[假设系统中有密码，多个 OAuth 提供者可能不是这种情况] 并在有效的情况下将它们登录到现有帐户。

C. 拒绝登录/注册，说电子邮件已被使用，鼓励用户在连接谷歌之前登录。

**选项#A 的安全风险是什么？**

*我自己想出的：*

可以执行“预期攻击”，即攻击者预期注册并在目标之前在系统上创建帐户。在目标使用 OAuth 注册后，他将在该帐户上拥有一个活动会话。在执行#A 之前清除帐户上的所有会话会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:07:24.507

当用户在 Google 中通过 OAuth 登录时，您可以确定您从 Google 返回的电子邮件地址确实属于该用户。因此，您似乎担心的是该电子邮件地址在您的系统上已经知道的用户不拥有该电子邮件地址。这应该在他注册时就已经通过电子邮件对话发现了。但如果不是，您可能需要重置密码并向您这样做的真实用户发送电子邮件，以及出于什么原因。如果用户当前已登录，您可能还希望将其注销。用户仍然可以访问他的数据，但只能通过他的 OAuth 登录会话或回复电子邮件。该电子邮件应说明这是一种预防措施，因为无法确定它是否真的是同一个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T07:04:54.077

“意外攻击”也可能发生：

在第 1 步中，使用 address 注册的用户`foo@bar.com`实际上打算输入`fuu@bar.com`，但输入了一个错字：`foo`而不是`fuu`。

现在，Google 用户使用 Oauth 和 注册`foo@bar.com`，并以此方式劫持了 step-1 用户的帐户。不小心:-) 因为 step-1 用户的错字。

因此，第一步用户可以预期攻击 Google 用户，或者 Google 用户可以意外攻击第一步用户。（至少现在我想不出任何其他攻击。）

# java - 从发音中排除一些 jaxb 生成的类

> ID：12679272
> 
> 赞同：3
> 
> 时间：2012-10-01T18:56:28.380
> 
> 标签：java, jaxb, enunciate

我正在使用发音并希望从文档中排除某些 jaxb 生成的类。如何才能做到这一点？

是否可以通过 xsd 添加 org.codehaus.enunciate.XmlTransient 注释？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T23:13:03.713

```
 <?xml version="1.0"?>
  <enunciate ...>

    <api-classes>
      <exclude pattern="com.mycompany.nonvisible.**"/>
    </api-classes>
    ...
  </enunciate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T11:22:34.557

尝试通过使用注释来排除该类`@com.webcohesion.enunciate.metadata.Ignore`（请参阅[用户指南](https://github.com/stoicflame/enunciate/wiki/Excluding-Including-Classes#annotations)）。这对我有用。

通过在 enunciate.xml 中列出 JAXB 类，我也没有成功。

# python - 运行 python manage.py shell 我得到错误：DLL 加载失败：找不到指定的模块。

> ID：12679277
> 
> 赞同：1
> 
> 时间：2012-10-01T18:56:57.303
> 
> 标签：python, django, postgresql, psycopg2

我正在尝试让 PostgreSQL 与 psycopg2 一起工作，但我在一个又一个错误中遇到了错误。每次我找到当前错误的修复程序时，都会出现一个新错误。我安装了 PostgreSQL，我终于能够成功安装 psycopg2，并且我安装了 Microsoft Visual Studio 9.0。我将 Python27/Lib/distilus/msvc9compiler.py 的第 243 行从

```
toolskey = "VS%0f0COMNTOOLS" % version 
```

到

工具键 = "VS90COMNTOOLS"

按照[http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/](http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/)。注意：我也尝试了指南中使用的 VS100COMNTOOLS，但我认为因为我有 9.0 版的 Visual Studio，所以我应该使用它。我还添加了系统变量

```
variable=VS90COMNTOOLS , value=C:\Program Files\Microsoft Visual Studio 9.0\Common7\Tools. 
```

我什至尝试这样做的唯一原因是处理我连续错误链中的最后一个错误，该错误发生在尝试安装 psycopg2 时：

```
error: Unable to find vcvarsall.bat 
```

几天来，我一直在尝试将数据库从 SQLite 切换到 PostgreSQL，但没有任何运气。我不明白为什么这会如此困难。我真的很感激一些帮助。我对 Django、Python 和任何编程都很陌生。我已经搜索了其他答案，这就是我如何通过前几个答案，但似乎没有一个以修复结束。我得到的唯一输出是标题中显示的错误消息。我试图回到 Django Book 的第 5 章，以确保我的配置设置正确，但显然我没有，因为我什至无法运行 python manage.py shell。

感谢任何最终可以帮助我的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:21:38.543

尝试在*Windows*上从源代码编译*psycopg2*可能会非常棘手。我推荐我使用的解决方案，即从此处安装*Stickpeople 项目*慷慨提供的预编译*psycopg2 Windows 软件包：http:* [//www.stickpeople.com/projects/python/win-psycopg/](http://www.stickpeople.com/projects/python/win-psycopg/)。

# php - MySql 搜索忽略标点符号和空格，而 db 中的数据具有特殊字符

> ID：12679278
> 
> 赞同：1
> 
> 时间：2012-10-01T18:56:58.097
> 
> 标签：php, mysql, search, full-text-search, replace

我有一个巨大的 innoDB 库存表，包含超过 4000 万条记录，这些记录使用 csv 文件（每次文件超过 100 万条数据）不断更新。我们使用`Load Data Infile`将数据导入表的方法。

该表有一个名为 part_number 的字段，它是每个库存项目的唯一标识符。此字段中的数据包含一个或多个特殊字符，如'-'、'_'、'#'、'$'、"等。

例如。Abcd-1234

我们有一个工具供最终用户使用 part_number 作为关键字在此表上进行搜索。有三种类型的搜索 a) 完全匹配 b) 包含与 c) 开始于

我的要求是向用户显示带有特殊字符的结果，即使他们搜索时没有使用“-”、“_”、“#”、“$”、“”等字符。

例如。用户应该能够搜索 Abcd1234 并获得结果 Abcd-1234。用户应该能够搜索 Abcd-1234 并获得结果 Abcd1234 用户应该能够搜索 Abcd_1234 并获得结果 Abcd1234 和 Abcd-1234

注意：为了避免插入期间的表锁定和其他一些依赖项，我不得不将表保留为`InnoDB`.

添加一个存储 part_number 省略标点符号的新列并向该字段运行搜索是我想到的解决方案，但它会影响数据导入过程，这是不可接受的。

我曾尝试过 REGEXP，但未能成功满足我的标准。我的标准如下 a) 用户可以使用或不使用特殊字符进行搜索 b) part_number 字段中的数据可能在任何地方包含也可能不包含特殊字符 c) 我们应该能够在任何情况下显示结果..

请让我知道是否有办法解决这个问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:52:28.690

请试试这个，它会帮助你
`Select REPLACE(cname, '-', '') as cna From country HAVING cna LIKE '%APRE29192%'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:07:36.807

也许您可以查看 REGEXP 并制作一个适合您需要的正则表达式：http: [//dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T18:08:09.960

解决方案之一是使用*MySql TABLE VIEW*，您可以在其中搜索带有字母数字*part_number*标记的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T14:46:28.260

这是另一个解决方案：

```
SELECT REPLACE(REPLACE(REPLACE(REPLACE(cname, '-', ''), '.', ''), '\'', ''), ' ', '') 
AS cna FROM country HAVING cna LIKE   
CONCAT(CONCAT('%',REPLACE(REPLACE(REPLACE(REPLACE('$search_term', '-', ''), '.', ''), '\'', ''), ' ', '')),'%') 
```

# asp.net-mvc - aspnet _membership MembershipUser.ProviderUserKey 返回一个整数

> ID：12679280
> 
> 赞同：0
> 
> 时间：2012-10-01T18:57:11.937
> 
> 标签：asp.net-mvc, asp.net-membership

我将 aspnet_membership 与 MVC4 网站项目一起使用。这只是一个快速演示，它还不需要很健壮。我还没有定义角色，所以只需注册就可以访问各个页面。

我需要从 User 表中获取 UserId 并且我正在使用推荐的方法**Membership.GetUser(User.Identity.Name).ProviderUserKey**。但是，ProviderUserKey 的值似乎是“2”，不能转换为 Guid。我猜我没有在 aspnet_membership 中设置我需要能够做到这一点的东西。我需要做什么或配置才能获得 Guid 值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:06:22.000

ASP.NET MVC4 使用 SimpleMembership 而不是旧的 SqlMembership。SimpleMembership，默认情况下为 users 表使用整数标识键。如果您想要一个 Guid，那么您需要更改 SimpleMembership 的工作方式，或者您可以重新使用旧的 SqlMembership。

# python - 为正则表达式引擎创建自定义扩展

> ID：12679283
> 
> 赞同：0
> 
> 时间：2012-10-01T18:57:23.293
> 
> 标签：python, regex, dsl

是否有任何简单的方法可以将自定义扩展添加到正则表达式引擎？（特别是对于 Python，但我也会采用通用解决方案）。

用一个例子来解释我正在尝试构建的内容可能会更容易。这是我想到的用例：

我希望用户能够匹配可能包含任意 ASCII 字符的字符串。正则表达式是一个好的开始，但对于我心目中的数据类型来说还不够。例如，假设我有包含如下字符串的数据：

```
<STX>12.3,45.6<ETX> 
```

其中`<STX>`和`<ETX>`是文本开始/文本结束字符 0x02 和 0x03。要捕获这两个数字，用户能够在其表达式中指定任何 ASCII 字符将非常方便。像这样：

```
\x02(\d\d\.\d),(\d\d\.\d)\x03 
```

其中“\x02”和“\x03”匹配控制字符，第一个和第二个匹配组是数字。所以，就像正则表达式一样，只有几个特定领域的附加组件。

我该怎么做呢？这甚至是正确的方法吗？我必须相信这类问题已经解决了，但我最初的搜索并没有发现任何有希望的东西。正则表达式具有众所周知的优势，可以降低学习曲线。

几点注意事项：

*   我不是在寻找特定协议的固定解析器 - 它需要通用且用户可配置
*   我真的不想编写自己的正则表达式引擎
*   虽然这很好，但我不是在寻找“正则表达式宏”，我在其中为少数常用表达式创建快捷方式。（也许是一个后续问题......）
*   奖励：您是否听说过任何学术工作，即“创建特定领域的搜索语言”

* * *

**编辑：**感谢到目前为止的回复，我还没有意识到 Python`re`支持任意 ascii 字符。但是，这仍然不是我想要的。这是另一个示例，希望最终能提供我想要的广度：

假设我有包含如下字符串的数据：

```
$\x01\x02\x03\r\n 
```

其中`123`形成两个 12 位整数（0x010 和 0x023）。那么我如何添加语法以便用户可以将它与这样的正则表达式匹配：

```
\$(\int12)(\int12)\x0d\x0a 
```

其中`\int12`'s 每个拉出 12 位。如果尝试搜索打包数据，这将很方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:01:04.463

`\x` escapes are already supported by the Python regular expression parser:

```
>>> import re
>>> regex = re.compile(r'\x02(\d\d\.\d),(\d\d\.\d)\x03')
>>> regex.match('\x0212.3,45.6\x03')
<_sre.SRE_Match object at 0x7f551b0c9a48> 
```

# c - 了解以下程序的程序集转储

> ID：12679284
> 
> 赞同：0
> 
> 时间：2012-10-01T18:57:26.463
> 
> 标签：c, memory, x86, arguments

我已经编写了用于打印参数的 ac 程序

```
#include<stdio.h>
void main( int argc, char *argv[])
{
int i=0;
for(i=0;i<argc;i++)
printf("argument %d=%s\n",i,argv[i]);
} 
```

我得到的使用 gdb 的上述程序的程序集转储是。

```
Dump of assembler code for function main:
0x00000000004004f4 <+0>:    push   %rbp
0x00000000004004f5 <+1>:    mov    %rsp,%rbp
0x00000000004004f8 <+4>:    sub    $0x20,%rsp
0x00000000004004fc <+8>:    mov    %edi,-0x14(%rbp)
0x00000000004004ff <+11>:   mov    %rsi,-0x20(%rbp)
0x0000000000400503 <+15>:   movl   $0x0,-0x4(%rbp)
0x000000000040050a <+22>:   movl   $0x0,-0x4(%rbp)
0x0000000000400511 <+29>:   jmp    0x40053e <main+74>
0x0000000000400513 <+31>:   mov    -0x4(%rbp),%eax
0x0000000000400516 <+34>:   cltq   
0x0000000000400518 <+36>:   shl    $0x3,%rax
0x000000000040051c <+40>:   add    -0x20(%rbp),%rax
0x0000000000400520 <+44>:   mov    (%rax),%rdx
0x0000000000400523 <+47>:   mov    $0x40063c,%eax
0x0000000000400528 <+52>:   mov    -0x4(%rbp),%ecx
0x000000000040052b <+55>:   mov    %ecx,%esi
0x000000000040052d <+57>:   mov    %rax,%rdi
0x0000000000400530 <+60>:   mov    $0x0,%eax
0x0000000000400535 <+65>:   callq  0x4003f0 <printf@plt>
0x000000000040053a <+70>:   addl   $0x1,-0x4(%rbp)
0x000000000040053e <+74>:   mov    -0x4(%rbp),%eax
0x0000000000400541 <+77>:   cmp    -0x14(%rbp),%eax
0x0000000000400544 <+80>:   jl     0x400513 <main+31>
0x0000000000400546 <+82>:   leaveq 
0x0000000000400547 <+83>:   retq   
End of assembler dump. 
```

现在我想要的是“参数传递的内存位置（地址）。例如，如果我将程序作为“arg 1”运行，它会打印参数。现在我想知道它在哪条指令上提取这个参数，或者哪个寄存器保存参数（如果我传递超过 1 个参数，也采用这种情况。（这会告诉我它所在的内存地址吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:52:16.403

> 我想知道它在哪条指令上提取这个参数，或者哪个寄存器保存参数

最好通过获取目标机器的汇编语言参考手册并研究它来回答这类问题。但是，您的具体问题很容易通过考试来回答，而无需非常熟悉汇编语言的细节：

```
0x0000000000400503 <+15>:   movl   $0x0,-0x4(%rbp)
0x000000000040050a <+22>:   movl   $0x0,-0x4(%rbp) 
```

这是为冗余`i = 0`语句生成的代码。

```
0x0000000000400513 <+31>:   mov    -0x4(%rbp),%eax 
```

的值`i`现在在 %eax 寄存器中。

```
0x0000000000400518 <+36>:   shl    $0x3,%rax
0x000000000040051c <+40>:   add    -0x20(%rbp),%rax 
```

这将计算地址`argv[i]`并将其放入 %rax 寄存器中。

```
0x0000000000400520 <+44>:   mov    (%rax),%rdx 
```

这会将 的值加载`argv[i]`到 %rdx 寄存器中。`printf`使用`i`和`argv[i]`作为参数的调用后的代码。

> 现在我想要的是“参数传递的内存位置（地址）。

您无法通过查看 asm 来确定这一点，就像通过查看 asm 无法确定 argc 的值一样……这些值会有所不同，并且仅在实际**运行**程序时才确定。如果要在运行时确定地址，可以使用

```
printf("address of argv = %p\n", (void*)argv); 
```

如果这就是你想要的，那么抛弃 asm 并了解它的含义是不必要的，并且与你的目标无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:00:05.883

由于您`gdb`用于调试，我想您可能使用Linux。然后，假设您的文件是（如果它被替换为），使用`gcc -S -Wall -fverbose-asm foo.c`（可能与优化标志如 然后使用编辑器（如或）查看内部。`-O2``foo.s``foo.c``hello.c``foo``hello``foo.s``gedit``emacs`

And`main`几乎是一个普通的函数（除了它的签名必须是标准允许的，例如`int main(int argc, char**argv)`......）并且它被调用`crt0.o`（编译`gcc -v`以了解哪个）。

您可能想阅读[Linux Assembly Howto](http://tldp.org/HOWTO/Assembly-HOWTO/)，例如[x86-64 ABI](http://www.x86-64.org/documentation/abi.pdf)和[x86 调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)wikipage。

请注意，如果没有任何优化标志（例如`-O1`或`-O2`），`gcc`编译器会生成非常幼稚的代码。

# ruby-on-rails - 如何循环通过与 Draper 装饰器方法的关联？

> ID：12679288
> 
> 赞同：0
> 
> 时间：2012-10-01T18:57:43.963
> 
> 标签：ruby-on-rails, draper

我有一个装饰 Trip 对象的 TripDecorator。一次旅行有很多活动。

我想创建一个 TripDecorator 方法来生成属于特定旅行的活动列表。

我怎样才能转换这个：

```
<h5>Activities</h5>
<ul>
<% @trip.activities.each do |activity| %>
  <%= content_tag :li, activity.name %>
<% end %>
</ul> 
```

对此：

```
<%= @trip.activities_list %> 
```

如果不存在任何活动，我不希望出现任何内容。Draper 可以实现这种抽象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:01:54.977

当然，这是微不足道的。

```
class TripDecorator
  decorates :trip

  def activities_list
    return if activities.empty?
    h.content_tag(:h5, "Activities") +
    h.content_tag(:ul) do
      activities.map do |activity|
        h.content_tag(:li, activity.name)
      end.join
    end.html_safe
  end
end 
```

你最终只是连接`content_tag`调用来生成你的标记，如果没有任何活动可以循环，你可以短路该方法。

# asp.net-mvc - 为什么隐藏的输入会丢失我的视图模型的属性值？

> ID：12679291
> 
> 赞同：1
> 
> 时间：2012-10-01T18:58:02.853
> 
> 标签：asp.net-mvc, razor

当我使用以下 Razor 标记尝试将我的`PageCount`值发送到客户端时，输入的值呈现为 0：

```
@using (Html.BeginForm("Index", "Gallery", FormMethod.Post, new { id = "search-form" }))
{
    @Html.HiddenFor(m => m.PageCount) 
```

`PageCount`尽管值为 2 ，但呈现如下：

```
<input data-val="true" data-val-number="The field PageCount must be a number." data-val-required="The PageCount field is required." id="PageCount" name="PageCount" type="hidden" value="0"> 
```

当我回到几乎所有普通的 HTML 时，就像这样：

```
<input type="hidden" name="PageCount" id="PageCount" value="2"> 
```

Razor wrt隐藏输入是否有一些有趣的行为，或者什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:07:25.933

`PageCount`您是否在 POST 控制器操作中设置值？如果是这样，请确保您已从 ModelState 中删除旧值：

```
[HttpPost]
public ActionResult Index(SomeViewModel model)
{
    ModelState.Remove("PageCount");
    model.PageCount = 2;
    return View(model);
} 
```

这样做的原因是 HTML 助手在绑定时使用最初的 POST 值，而不是模型中的值。因此，如果您打算在控制器操作中修改旧值，则应该从 ModelState 中删除旧值。

这不仅限于 HiddenFor 助手。这就是生成输入字段的所有 HTML 助手的工作方式。

# javascript - 鼠标移出时关闭菜单

> ID：12679296
> 
> 赞同：0
> 
> 时间：2012-10-01T18:58:20.233
> 
> 标签：javascript, jquery, user-interface

我有一个按钮，点击后会在按钮右侧弹出一个菜单。这个菜单是一个相当大`UL`的列表项。此菜单所在的页面包含许多其他元素。

菜单弹出后，用户可以单击菜单上的选项，菜单将消失（menu.hide()）。

但是，无法以任何其他方式摆脱菜单感觉很奇怪。我喜欢“如果用户点击菜单以外的任何东西，菜单就会隐藏”的想法。但我讨厌做一个“clickoutside”事件，它将事件绑定到除菜单之外的所有内容。

另一个选项是“mouseout”，但“mouseout”总是过早触发，因为鼠标必须穿过屏幕才能到达菜单。

关于我可以将什么事件绑定到菜单的任何想法，以便用户可以自然地、随意地摆脱它？（不仅仅是当他点击一个选项时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:30:02.293

当菜单打开时，您可以将一个事件绑定到正文。使用点击事件来确定点击是否发生在菜单之外。如果在菜单之外，隐藏菜单并移除绑定。

```
// binding function     
closeMe = function(e) {
    var $target = $(e.target);
    // click is not inside the menu
    if(!$target.hasClass('menu') && $target.parents('.menu').length !== 1) {
        // hide menu
        menu.hide();
        // unbind events
        $('body').unbind('mousedown.menuhide', closeMe);
    }
};
// show menu
menu.show(function() {
    // bind menu hide event
    $('body').bind('mousedown.menuhide', closeMe);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:16:17.930

很简单，只要用这样的东西

```
$('html').click(function() {
    menu.close();
});

$('#menu').click(function(e){
    e.stopPropagation();

    // do stuff
    // maybe some nice animation or w/e

    menu.close();
}); 
```

# objective-c - 谁调用 commitEditingStyle:forRowAtIndexPath？

> ID：12679298
> 
> 赞同：1
> 
> 时间：2012-10-01T18:58:25.803
> 
> 标签：objective-c, ios, uitableview

我有一个自定义 UITableViewCell 允许用户在编辑模式下输入文本。我注意到在股票 UITableViewCells 上，当我向左滑动，然后点击删除按钮时，它的表格视图会收到`commitEditingStyle:forRowAtIndexPath`消息。我很好奇这条消息是从哪里来的。据我所知，单个单元格没有对它们所属的表格视图的引用。如果我希望我的自定义单元格发送此消息，我将如何去做？我曾考虑过使用单元格的超级视图，但似乎必须有一种更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:12:16.153

在添加任何行或列之前，会自动调用此方法（如果您实现了数据源协议）。
如果您想知道某个单元格属于哪个表视图，请使用 superview 方法。

# ruby-on-rails-3 - Rails - 设计 - .html.erb 的标志在哪里？

> ID：12679303
> 
> 赞同：1
> 
> 时间：2012-10-01T18:58:35.883
> 
> 标签：ruby-on-rails-3, devise

我只是要设计登录页面的样式，因为我已经完成了编辑和注册页面，但是对于我的生活，我找不到要编辑的文件。

那么我在哪里可以找到“用户/登录”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:02:25.337

运行`$ rails generate devise:views`，这会将设计视图复制到您的项目中。

然后登录视图将位于`app/views/devise/sessions/new.html.erb`

更多信息：[https ://github.com/plataformatec/devise#configuring-views](https://github.com/plataformatec/devise#configuring-views)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:04:11.547

您可以使用命令生成它`rails generate devise:views`。[您可以在设计的文档](https://github.com/plataformatec/devise)中查看更多详细信息。

# jquery - jQuery同时动画和淡化背景图像

> ID：12679305
> 
> 赞同：0
> 
> 时间：2012-10-01T18:58:38.363
> 
> 标签：jquery, jquery-animate, fadein, fadeout

我有一个选择器，我正在尝试制作动画，同时淡出它的背景图像并淡入另一个背景图像。这就是我到目前为止所拥有的。该脚本工作正常，但它先动画然后淡出。你知道一种让它同时动画和淡化的方法吗？

```
$(document).ready(function(){
    $(".selector").click(function () {
        $(this).animate({left: "75px"}, function () {
            $(this).fadeOut("fast", function () {
                $(this).addClass("selector-hover").fadeIn("fast");
            });
        });

        return false;
    });
}); 
```

我希望这是有道理的。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:01:27.397

是的，不要在回调中加入淡入淡出...

```
$(document).ready(function(){
    $(".selector").click(function () {
        $(this).animate({left: "75px"}).fadeOut("fast", function () {
            $(this).addClass("selector-hover").fadeIn("fast");
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:03:53.597

这是在动画回调中封装 FadeIn 的效果。由于回调是在动画结束后触发的，所以在淡入开始时动画已经完成。

尝试将淡出和淡入移到动画回调之外，它应该可以正常工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:16:08.733

好吧，使用 jquery animate 页面中的这个例子

```
$( "#go1" ).click(function(){
  $( "#block1" ).animate( { width: "90%" }, { queue: false, duration: 3000 })
     .animate({ fontSize: "24px" }, 1500 )
     .animate({ borderRightWidth: "15px" }, 1500 );
}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/) 队列 false 应该可以解决问题，查看页面并查看它的实际效果。您需要向下滚动一点

# mongodb - 从 mongoDB map reduce 访问输出

> ID：12679307
> 
> 赞同：0
> 
> 时间：2012-10-01T18:58:46.690
> 
> 标签：mongodb, mapreduce

如何访问以下 mongoDB map reduce 代码的输出？我假设 map reduce 函数正在生成一个名为“session_stat”的集合，其中包含字段：“dayOfWeek”和“count”，我可以使用 find() 和 printValue 函数进行打印。但是当我使用“mongo code.js”执行代码时，我只是得到“未定义”。提前致谢。

```
db = db.getSiblingDB("mrex");

// simulate saving records that log the lengths of user sessions in seconds                                                                                                                                                                                                                                                                                                 
db.session.save({userid:"a", time: ISODate('2011-11-03 14:17:00'), length: 95});
db.session.save({userid:"b", time: ISODate('2011-11-03 14:23:00'), length: 110});
db.session.save({userid:"c", time: ISODate('2011-11-03 15:02:00'), length: 120});
db.session.save({userid:"d", time: ISODate('2011-11-03 16:45:00'), length: 45});

function mapf()
{
    emit(this.time.getDay(),
     {count:1});
}

function reducef(key, values)
{
    var r = {dayOfWeek:key, count:0};
    values.forEach(function(v)
               {
                   r.count += v.count;
               });
    return r;
}

var mrcom1 = db.runCommand( { mapreduce:"session",
                          map:mapf,
                          reduce:reducef,
                          query: {time: {$gt:ISODate('2011-11-03 00:00:00')}},
                          out: { reduce: "session_stat" }
});

function printValue (r) {
    print(r.count)
};

db.session_stat.find().forEach(printValue) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:39:53.010

MongoDB 的 map-reduce 命令生成一组文档，其中包含一个名为“value”的字段，其中包含 reduce 返回值。您需要进入此字段才能找到您的子文档。

将其用作您的 printValue 函数：

```
function printValue (r) {
    print(r.value.count)
}; 
```

# sql - 作为复合主键一部分的 SQL 表外键

> ID：12679312
> 
> 赞同：9
> 
> 时间：2012-10-01T18:59:05.540
> 
> 标签：sql, sql-server, foreign-keys, primary-key

是否可以让一个表的外键成为另一个表的复合主键的一部分？例如，如果我有两张表，一张包含有关不同用户的所有活动项目的信息，另一张包含有关项目正在使用哪些设备的信息：

项目表：

`Composite Primary Keys: UserId, ProjectId`（两者都不是独一无二的）

设备表：

`Composite Primary Keys: UserId, ProjectId, EquipmentId` （两者都不是独一无二的）

现在是否可以将设备表中的 ProjectId 设置为项目表中的外键？当我尝试时，我收到一条错误消息，指出项目表中的列与现有的主键或唯一约束不匹配？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T19:06:53.557

不。

当您创建外键时，您在另一个表中“指向”的键必须是 UNIQUE 或 PRIMARY KEY 约束。您不能建立指向允许重复值的列的外键。如果您更新另一个表中的一个重复值（例如），那么很难想象数据应该如何“起作用”。

要执行您想要的操作，您必须建立一个 ProjectID 为 UNIQUE 或 PRIMARY KEY 的 Projects 表，然后将其他*两个*表中的外键指向该表。

顺便说一句，您使用术语“主键”来描述每个表中构成主键的列。实际上，每个表可以有一个且只有一个主键。该键可以由一列或多列组成，但键本身仍以单数形式引用。这是使用主键优化搜索时的一个重要区别。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-21T20:14:20.530

它不知道这是否是一个好的设计实践，但可以肯定的是，一个表的复合外键是另一个表的复合主键的一部分。

假设我们有一个表 test1 有一个复合主键 (A, B)

现在我们可以有一个表说 test2 具有主键 (P, Q, R)，其中 test2 的 (P,Q) 引用 test2 的 (A,B)。

我在 MySql 数据库中运行了以下脚本，它工作得很好。

```
CREATE TABLE `test1` (
`A` INT NOT NULL,
`B` VARCHAR(2) NOT NULL,
`C` DATETIME NULL,
`D` VARCHAR(45) NULL,
PRIMARY KEY (`A`, `B`)); 
```

```
CREATE TABLE `test2` (
`P` INT NOT NULL,
`Q` VARCHAR(2) NOT NULL,
`R` INT NOT NULL,
`S` DATETIME NULL,
`T` VARCHAR(8) NULL,
PRIMARY KEY (`P`, `Q`, `R`),
INDEX `PQ_idx` (`P`,`Q` ASC),
CONSTRAINT `PQ`
  FOREIGN KEY (`P`, `Q`)
  REFERENCES `test1` (`A`,`B`)
  ON DELETE CASCADE
  ON UPDATE CASCADE); 
```

在上述情况下，数据库期望 (A,B) 的组合是唯一的，并且它是 test1 表中的主键。

但是，如果您尝试执行以下操作，脚本将会失败。数据库不允许您创建 test2 表。

```
CREATE TABLE `test2` (
`P` INT NOT NULL,
`Q` VARCHAR(2) NULL,
`R` DATETIME NULL,
`S` VARCHAR(8) NULL,
`T` VARCHAR(45) NULL,
  INDEX `P_idx` (`P` ASC),
  INDEX `Q_idx` (`Q` ASC),
  CONSTRAINT `P`
    FOREIGN KEY (`P`)
    REFERENCES `test1` (`A`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `Q`
    FOREIGN KEY (`Q`)
    REFERENCES `test1` (`B`)
    ON DELETE CASCADE
    ON UPDATE CASCADE); 
```

在上述情况下，数据库期望 A 列单独唯一，B 列也是如此。（A，B）的组合是否唯一无关紧要。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-08-18T10:48:25.637

@Larry Lustig 外键可以是另一个表中主键的一部分。

来源：[依赖关系](http://infocenter.sybase.com/archive/index.jsp?topic=/com.sybase.stf.powerdesigner.docs_12.1.0/html/cdug/cdugp86.htm)

检查表之间的关系：Zdarzenie（事件）和 TypZdarzenia（事件类型）

[![足球比赛 - 数据库](../Images/94e84b000e85b316a9dba2897202c57c.png)](https://i.stack.imgur.com/F1NDy.jpg)

# javascript - 批量地理编码

> ID：12679321
> 
> 赞同：1
> 
> 时间：2012-10-01T18:59:48.923
> 
> 标签：javascript, ajax, google-maps, callback

我需要对数千个纬度/经度坐标的列表进行反向地理编码。我可以为一组坐标做到这一点没问题，但是当涉及到很多时，它一次只能做 5 个。我需要弄清楚如何一步一步地做到这一点，并为循环计时，这样它就不会被谷歌拒绝。

我在其他地方被告知我需要使用回调函数，但我不确定如何执行此操作。

这是一些演示代码

```
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js" ></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>​​
    <script type="text/javascript">                 

        var geocoder = new google.maps.Geocoder();

        var c = [];
        c[0]="43.5878,-79.6777";
        c[1]="49.2828,-123.1414";
        c[2]="49.2895,-123.127";
        c[3]="49.2784,-123.1364";
        c[4]="49.0327,-122.2529";
        c[5]="49.2696,-123.0587";
        c[6]="49.269,-122.9954";
        c[7]="49.235,-122.882";
        c[8]="49.1908,-122.7508";
        c[9]="49.085,-122.4111";

        var a = [];

        function codeLatLng(input, i) {
            var latlngStr = input.split(",", 2);
            var lat = parseFloat(latlngStr[0]);
            var lng = parseFloat(latlngStr[1]);
            var latlng = new google.maps.LatLng(lat, lng);
            geocoder.geocode({
                'latLng' : latlng
            }, function(results, status) {  
                a[i] = results[0].formatted_address;    
                $("#test").append(a[i] + "<br />"); 
            });
        }           

        function showmethemoney(){              
            for (var i=0; i <= c.length - 1; i++) {                 
                $("#test").append(i + ") " + c[i] + "<br/>");   
                codeLatLng(c[i], i);                                    
            };  
        }
   </script>   
</head>
<body>        
    <div id="test"></div>

    <br />
    <button onclick="showmethemoney();">Show me the money!</button>
</body> 
```

我需要我的结果与他们的坐标一致。

任何帮助将不胜感激！

谢谢。

编辑：

更进一步：

```
 var geocoder = new google.maps.Geocoder();

        var c = [];
        c[0]="43.5878,-79.6777";
        c[1]="49.2828,-123.1414";
        c[2]="49.2895,-123.127";
        c[3]="49.2784,-123.1364";
        c[4]="49.0327,-122.2529";
        c[5]="49.2696,-123.0587";
        c[6]="49.269,-122.9954";
        c[7]="49.235,-122.882";
        c[8]="49.1908,-122.7508";
        c[9]="49.085,-122.4111";

        var a = [];

        function codeLatLng(input, i) {
            var latlngStr = input.split(",", 2);
            var lat = parseFloat(latlngStr[0]);
            var lng = parseFloat(latlngStr[1]);
            var latlng = new google.maps.LatLng(lat, lng);
            geocoder.geocode({
                'latLng' : latlng
            }, function(results, status) {
                //$("#test").append(results[0].formatted_address + "<br />");       
                a[i] = results[0].formatted_address;    
                $("#test").append(a[i] + "<br />"); 
            });
        }           
        var i = 0;
        function showmethemoney(start, end) {

            for (i = start; i <= c.length - 1 && i < end; i++) {
                $("#test").append(i + ") " + c[i] + " - ");
                codeLatLng(c[i], i);
            }
            if( i >= c.length - 1){
                return;
            }
            setTimeout(function(){
                showmethemoney(i, i+1);
            }, 1500);
        }

   </script>   
</head>
<body>        
    <div id="test"></div>

    <br />
    <button onclick="showmethemoney(0, 1);">Show me the money!</button>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:08:18.537

修改功能`showmethemoney`。通过使用`setTimeout` [jsfiddle](http://jsfiddle.net/Yra9K/)。您可以将间隔从 10 更改为您想要的任何数字。

```
var i = 0;
    function showmethemoney(start, end ) {

        for (i = start; i <= c.length - 1 && i < end; i++) {
            $("#test").append(i + ") " + c[i] + "<br/>");
            codeLatLng(c[i], i);
        }
        if( i >= c.length - 1){
            return;
        }
        setTimeout(function(){
            showmethemoney(i, i+5);
        }, 10);
    }
    showmethemoney(i, i+5); 
```

# c# - 使用 C# 中的 Matrix 对象居中旋转的图形路径

> ID：12679322
> 
> 赞同：1
> 
> 时间：2012-10-01T18:59:48.737
> 
> 标签：c#, matrix, rotation

我正在编写一个库，它将创建一个图形路径（多边形或矩形的形状）并旋转它，但我希望旋转的形状在其边界矩形内居中。我已经尝试了几乎所有方法来让形状在其中心旋转，但它在边缘处被切断。

下面是我写的一些小代码来尝试完成这个

```
 GraphicsPath path = new GraphicsPath();
        path.AddPolygon(new Point[] { new Point(0, 0), new Point(100, 0), new Point(100, 100), new Point(0, 100) });
        Matrix m = new Matrix();
        Matrix m2 = new Matrix();
        m2.Rotate(30);
        m.Translate(-((path.GetBounds(m2).Width) / 2), -((path.GetBounds(m2).Height) / 2));
        m.Rotate(30, MatrixOrder.Append);
        m.Translate(((path.GetBounds(m2).Width)/2), ((path.GetBounds(m2).Height)/2), MatrixOrder.Append);
        path.Transform(m);
        Bitmap b = new Bitmap((int)path.GetBounds().Width, (int)path.GetBounds().Height);
        Graphics g = Graphics.FromImage(b);

        g.FillPath(Brushes.Blue, path);

        b.Save(@"c:\aSSETS\sample3.png"); 
```

请帮忙。谢谢

# javascript - Javascript 最佳实践 - 在 DOM 中隐藏元素或生成 DOM 元素

> ID：12679327
> 
> 赞同：3
> 
> 时间：2012-10-01T19:00:24.540
> 
> 标签：javascript, dom, element

我有一个关于 javascript 最佳实践的问题。

我有一个包含一些statuts 的下拉菜单。如果状态是：外部，我想显示一个表格。我不知道做到这一点的最佳方法。我是否需要从 DOM 中隐藏一个 DIV 并在需要时显示他，或者我是否需要在 jquery 中动态生成我的表单并调用 ajax 来填充一些数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:03:49.677

这实际上取决于您的应用程序。如果您在 DOM 中已经有很多元素，并且实际需要显示此表单的可能性很小，您可能希望稍后添加它（使用 ajax），因为在大多数情况下您不需要它。但是，如果您的 DOM 负载很轻，并且在大多数情况下会显示表单，则您希望将其准备好并隐藏，以便可以快速显示。

还有一个中间地带，您可以“延迟加载”它（在页面加载时使用 javascript），并将其保存在 json 对象中，直到可以使用为止。这将使您的 DOM 保持响应，并提供更快加载表单的额外好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:09:26.783

它取决于用户点击该元素的概率以及 DOM 中已经存在的元素数量。我建议每当用户执行操作而不是隐藏它时创建表单运行时。有一些浏览器插件可以显示页面中的所有隐藏元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:15:29.693

除非您的页面已经异常大，或者可以从同一页面使用许多不同的表单，否则将 HTML 放入页面并从隐藏开始会给您带来所有标记都在一个中的优势放置（在代表您的页面的 HTML 文件中）并且可以更容易地以这种方式集中维护。

当您开始将标记放入您的 javascript 时，您将标记的维护分为页面的 HTML 和嵌入到页面中的 HTML。

另一方面，如果您有很多这些略有不同的表单都可以在同一个页面中使用，那么在原始 HTML 中预先指定所有可能的表单组合会变得很麻烦，您会最好通过 javascript 动态生成它，或者从模板生成它并稍作修改。

# python - 格式中带反斜线字符的日期的重新搜索

> ID：12679328
> 
> 赞同：1
> 
> 时间：2012-10-01T19:00:25.367
> 
> 标签：python, python-2.7, python-2.x

我会提前感谢您的任何帮助，并说我已尝试在线搜索解决方案。

我正在运行 Python 2.7。

我正在尝试使用 re.search 来匹配格式中的日期`mm\dd\yyyy`。如果我将格式稍微修改为`mm-dd-yyyy`，我就成功了。我对包含反斜杠的示例没有运气。我认识到反斜杠很特殊，必须“转义”。

我尝试了以下方法：

```
line = '7\22\2012'
line2 = '7-22-2012'

print re.search("[0-9]*\-[0-9]*\-[0-9]*", line2).group()
print re.search('\d*\-\d*\-\d*',line2).group()

print re.search(r'\d*\\d*\\d*',line)
print re.search('\d*\\\d*\\\d*',line) 
```

同样，我们将不胜感激任何帮助。利亚姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:52:14.383

正确的正则表达式是`r'\d*\\\d*\\\d*'`.

您还需要将要搜索/匹配的字符串 ( `line`) 定义为原始字符串：`line = r'7\22\2012'`或带有转义的反斜杠：`line = '7\\22\\2012'`。

以下是一个工作示例：

```
>>> import re
>>> re.search(r'\d*\\\d*\\\d*', r'7\22\2012').group(0)
'7\\22\\2012' 
```

# hex - 将 7FFFFFFF 转换为十进制等值？

> ID：12679329
> 
> 赞同：0
> 
> 时间：2012-10-01T19:00:27.193
> 
> 标签：hex, nan

我在某处看到这是一种特殊情况，+NaN 从 0x7F800001 变为 0x7FFFFFFF。答案是+NaN吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:18:15.003

如果您解释`7FFFFFFF`为 IEEE754 32 位浮点数，那么是的，`7FFFFFFF`是 NaN。您可以通过查看 Wikipedia page for [Single-precision floating-point format](https://en.wikipedia.org/wiki/Single_precision_floating-point_format)来理解这些内容。我写了这个小 C 程序来说明这一点：

```
#include <stdio.h>

int main(){

  unsigned u0 = 0x7FFFFFFF;
  unsigned u1 = 0x7F800001;
  unsigned u2 = 0x7F800000;
  unsigned u3 = 0x7F7FFFFF;

  // *(float*)&u0 causes the data stored in u0 to be interpreted as a float
  printf("%e\n", *(float*)&u0);  // This gives nan
  printf("%e\n", *(float*)&u1);  // This also gives nan
  printf("%e\n", *(float*)&u2);  // This gives inf
  printf("%e\n", *(float*)&u3);  // This gives 3.402823e+38, the largest possible IEEE754 32-bit float

  // The above code only works because sizeof(unsigned)==sizeof(float)
  printf("%u\t%u\n", sizeof(unsigned), sizeof(float));

  // Remember that nan is only for floats, u0 is a perfectly valid unsigned.
  printf("%u\n", u0);            // This gives 2147483647

} 
```

再次，必须提到 NaN 仅作为浮点数存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:55:38.260

+NaN 是浮点数的特殊值（它没有等效的十进制数。它是“非数字”）。如果您只想要整数的十进制表示，它具有 7FFFFFFF 作为十六进制表示，则不涉及浮点，也没有 +NaN

# java - Python 布尔语句

> ID：12679331
> 
> 赞同：0
> 
> 时间：2012-10-01T19:00:32.977
> 
> 标签：java, python, boolean, expression

> **可能重复：**
> [Python 中的三元条件运算符](https://stackoverflow.com/questions/394809/ternary-conditional-operator-in-python)

我用 Java 编程已经有一段时间了，我在学校学习 Python，我记得在 Java 中你可以做一个布尔表达式

> 布尔值？（如果 boolean 为 true，则会发生这种情况）：（如果 boolean 为 false，则会发生这种情况）

他们是在 Python 中执行上述 Java 代码的方法吗？上面的语句正确地称为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T19:01:39.473

是的，使用[条件表达式](http://docs.python.org/reference/expressions.html#conditional-expressions)：

```
somevalue if oneexpression else othervalue 
```

例子：

```
>>> 'foo' if True else 'bar'
'foo'
>>> 'foo' if False else 'bar'
'bar' 
```

在引入这一点的 Python 2.5 之前，人们使用`and`和`or`表达式的组合来实现类似的结果：

```
expression and truevalue or falsevalue 
```

但是如果`truevalue`表达式本身的部分被评估为具有布尔值的东西`False`（所以是 0 或 None 或任何长度为 0 的序列等），那么*无论如何*`falsevalue`都会被选中。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:04:17.067

Python：

```
x if condition else y 
```

例子：

```
val = val() if callable(val) else val
greeting = ("Hi " + name) if name != "" else "Howdy pardner" 
```

这通常被称为“三元运算符”，因为它具有三个操作数。但是，术语“三元运算符”适用于*任何*具有三个操作数的运算。碰巧大多数编程语言没有任何其他三元运算符，所以说“the”是明确的。但是，我将其称为`if/else`运算符或条件表达式。

在 Python 中，由于`and`and`or`运算符的工作方式，您还可以在某些情况下将它们用于通常在 C 派生语言中使用三元运算符的事情：

```
# provide a default value if user doesn't enter one
name = raw_input("What is your name? ") or "Jude"
print "Hey", name, "don't make it bad."

# call x only if x is callable
callable(x) and x() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:04:11.670

是的，你可以使用这个（更多的pythonic）：

```
>>> "foo"'if condition else "bar" 
```

或者，这个（更常见，但不推荐）：

```
>>> condition and "foo" or "bar" 
```*

# ruby-on-rails - Rails：图片没有上传？

> ID：12679334
> 
> 赞同：0
> 
> 时间：2012-10-01T19:00:47.490
> 
> 标签：ruby-on-rails

我正在开发我的第一个 Rails 项目，并尝试使用 a来`file_field`上传`photos`. `belongs_to :album`该表单出现在我的相册/show.html.erb 页面上，因为我想显示相册并让用户能够从一个地方上传图片。但是，当我在表单上按提交时，它似乎没有上传。

这是我的照片/_form.html.erb

```
<%= form_for(@photo, :html => { :multipart => true }, :url => { :action => 'create'} ) do |f| %>

<%= f.label :avatar %>
<%= f.file_field :avatar %>

<%= f.submit %>

<% end %> 
```

这是我的相册/show.html.erb 页面。我添加了 if/else 语句只是为了测试@album 实例是否正在接收我上传的图片，但它总是返回“否”

```
<% if @album.photos.any? %>
yes
<% else %>
no
<% end %>

<div>
    <%= render 'photos/form' %>
</div> 
```

照片控制器（我真的很困惑在此设置实例变量）

```
class PhotosController < ApplicationController

def create
  @album = Album.find(params[:user_id][:album_id])
  @photo = @album.build(params[:photo])
  respond_to do |format|
    if @album.save
      format.html { redirect_to @album, notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album}
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
end
end 
```

专辑模特

```
class Album < ActiveRecord::Base
  attr_accessible :avatar, :name, :description
  has_many :user_albums
  has_many :users, :through => :user_albums
  has_many :photos
end 
```

照片模型

```
class Photo < ActiveRecord::Base
  belongs_to :album 
end 
```

让我知道您是否需要任何其他文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:06:21.250

你会需要，

```
@album.photos.build(params[:photo]) 
```

另外，我假设您的上传机制是正确的。:)

祝你好运

# java - 尝试为处理跨越多行的记录的猪编写自定义加载器，如何确保在记录中间不会发生拆分？

> ID：12679338
> 
> 赞同：2
> 
> 时间：2012-10-01T19:00:56.583
> 
> 标签：java, hadoop, split, apache-pig

I'm writing a custom Loader for pig. It is supposed to read delimited records that might span into multiple lines. Everything works, except that sometimes a split happens in the middle of a record and messes everything. I know RecordReader and InputFormat have to do with the place the files are split, but can't figure out how to make it work in my case. To me, it looks like the CSVExcelStorage should have the same problem, but I can't find any code to handle this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:15:51.650

CSVExcelStorage 假设没有任何嵌入的换行符，因此没有处理它们的代码。

你是对的，RecordReader 是这里的罪魁祸首。您需要编写一个新的记录阅读器类来理解您的数据，从而了解哪些换行符是分割位置的候选者，哪些换行符只是数据的一部分。一旦你写了一个新的记录类，你就需要一个新的 InputFormatType 来使用那个记录阅读器类。

# gdb - 让 gdb 在“应用所有”操作上显示线程名称

> ID：12679339
> 
> 赞同：3
> 
> 时间：2012-10-01T19:01:00.920
> 
> 标签：gdb, pthreads, pretty-print

我正在调试一个有很多线程的应用程序，所以我使用 prctl 来命名它们。这对 gdb 的`info threads`选项很有效，但如果`thread * apply all`操作也显示它会很好。有什么方法可以强迫 gdb 这样做吗？

```
(gdb) info threads
  Id   Target Id         Frame 
  ...
  3    Thread 0x7ffff6ffe700 (LWP 30048) "poll_uart_threa" 0x00007ffff78eb823 in select ()
    at ../sysdeps/unix/syscall-template.S:82
  2    Thread 0x7ffff77ff700 (LWP 30047) "signal hander" do_sigwait (set=<optimized out>, 
    sig=0x7ffff77feed8)
    at ../nptl/sysdeps/unix/sysv/linux/../../../../../sysdeps/unix/sysv/linux/sigwait.c:65
* 1    Thread 0x7ffff7fcc700 (LWP 30046) "simulator" __lll_lock_wait ()
    at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:132 
```

指针、PID {嗯、线程 ID，但 LWP 线程 == 进程、ish} 和名称

```
(gdb) thread apply all bt
...
Thread 3 (Thread 0x7ffff6ffe700 (LWP 30048)):
#0  0x00007ffff78eb823 in select () at ../sysdeps/unix/syscall-template.S:82
#1  0x0000000000403bb3 in poll_uart_thread (unused=0x0) at uart.c:96
#2  0x00007ffff7bc4e9a in start_thread (arg=0x7ffff6ffe700) at pthread_create.c:308
#3  0x00007ffff78f24bd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#4  0x0000000000000000 in ?? ()

Thread 2 (Thread 0x7ffff77ff700 (LWP 30047)):
<call stack>
#2  0x0000000000417a89 in sig_thread (arg=0x7fffffffbb60) at simulator.c:879
#3  0x00007ffff7bc4e9a in start_thread (arg=0x7ffff77ff700) at pthread_create.c:308
#4  0x00007ffff78f24bd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#5  0x0000000000000000 in ?? ()

Thread 1 (Thread 0x7ffff7fcc700 (LWP 30046)):
<call stack>
#9  0x00000000004182e3 in simulator (flash_file=0x7fffffffe0e4 "../programs/blink.bin")
    at simulator.c:1005
#10 0x0000000000401f14 in main (argc=3, argv=0x7fffffffdd48) at cli.c:167 
```

虽然我可以通过查找调用堆栈来找到名称，但如果它会在摘要行中打印会很好/方便/等等，这里只有 PID 和指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-24T11:17:24.343

没有简单的方法，你必须修补 GDB。这是一个简单的补丁，你可以在[这里](https://gist.github.com/mildsunrise/48be810f41551ac2049c477dda0879ab)找到它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T01:55:10.547

> 如果它会在摘要行中打印会很好/方便/等等，这里只有 PID 和指针。

请在[GDB bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=gdb)中提交增强请求。

如果您将 GDB 与嵌入式 python 一起使用，您可能可以编写“线程应用”[脚本](http://sourceware.org/gdb/current/onlinedocs/gdb/Threads-In-Python.html#Threads-In-Python)来执行您想要的操作，但它确实应该已经做正确的事情了。

# java - 计算当前时间和未来时间之间的时间差

> ID：12679343
> 
> 赞同：4
> 
> 时间：2012-10-01T19:01:04.790
> 
> 标签：java, android

我想计算一天中当前时间（2012 年 10 月 1 日上午 11 点）和同一天午夜的时间（2012 年 10 月 1 日晚上 11 点 59 分 59 秒）的时间差（以毫秒为单位）。

我试过这个

```
 Calendar cal = Calendar.getInstance();
    cal.add(Calendar.SECOND, 59);
    cal.add(Calendar.HOUR, 23);
    cal.add(Calendar.MINUTE, 59);
        cal.getTime().getTime() - today.getTime(); 
```

今天是当前日期。

但是当我打印 cal 和 today 的长值时，86400 的时间差大约是一天。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T19:05:21.013

使用`cal.set()`代替`cal.add()`

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.SECOND, 59);
cal.set(Calendar.HOUR, 23);
cal.set(Calendar.MINUTE, 59);

long diff = cal.getTime().getTime() - today.getTime(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T19:07:43.773

您可以将日期设置为新创建的 Calendar 实例。然后使用它与当前实例进行比较`getTimeInMillis()`

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR, 23);
cal.set(Calendar.MINUTE, 59);
cal.set(Calendar.SECOND, 59);
cal.set(Calendar.DATE, 1);
cal.set(Calendar.MONTH, 9);
cal.set(Calendar.YEAR, 2012);

long difference = cal.getTimeInMillis() - Calendar.getInstance().getTimeInMillis(); 
```

# nginx - Nginx 为安全和非安全流量提供服务

> ID：12679345
> 
> 赞同：1
> 
> 时间：2012-10-01T19:01:12.373
> 
> 标签：nginx

我们的网站有安全和非安全域，例如 secure.xyz.com 和 xyz.com

我使用以下链接使单个服务器同时处理端口 80 和 443 流量。

[http://nginx.org/en/docs/http/configuring_https_servers.html#single_http_https_server](http://nginx.org/en/docs/http/configuring_https_servers.html#single_http_https_server)

```
server {
listen 80;
listen 443 ssl;
server_name secure.xyz.com xyz.com;
....
ssl_certificate secure.xyz.com.crt;
ssl_certificate_key secure.xyz.com.key;
...
} 
```

除了 $_SERVER 的变量 'SERVER_NAME' 设置为 'secure.xyz.com' 之外，一切都很好。这样这个主机名就会出现在带有“http”的非安全页面上，例如“http://secure.xyz.com”。

我的查询是：

1.  Nginx 是否总是从配置中选择第一台服务器......无论客户端请求什么？（并传递给代理（php-fpm）？）。

2.  我们有很多规则，所以如果我们创建两个单独的服务器（如下所示），我需要在两个地方复制规则吗？是否有任何可维护的方式，例如“include /common_rules.conf”？我尝试在文件中（仅）使用“位置”规则，也尝试使用“服务器”封装位置规则，但它不起作用。

    服务器 { 听 443; 服务器名称secure.xyz.com；开启ssl；ssl_certificate secure.xyz.com.crt；... 包括 common_rules.conf；===>？？？}

    服务器{听80；server_name xyz.com；... 包括 common_rules.conf；===>？？？}

非常感谢任何帮助。

# c++ - 无法使用 JNI 从 C++ 调用 Java

> ID：12679346
> 
> 赞同：6
> 
> 时间：2012-10-01T19:01:11.523
> 
> 标签：c++, java-native-interface, cocos2d-x

我有一个带有 cocos2d-x 库的小项目。我正在尝试使用 C++ 调用 Java 函数，但我在行收到信号 11 异常：

```
// Get Status
status = jvm->GetEnv((void **) &env, JNI_VERSION_1_6); 
```

但我不知道为什么会这样。

在我的 Java 类 Getsocial.java 中存在这个函数：

```
私人无效推文（）
    {
        字符串分数 = "123";
        String tweetUrl = "https://twitter.com/intent/tweet?text=Hello ！我刚刚在 mygame for Android 中获得了 " + score + " 积分！！！！";
        Uri uri = Uri.parse(tweetUrl);
        startActivity(new Intent(Intent.ACTION_VIEW, uri));
    }

```

此功能启动导航器以发布推文。从 Java 调用工作正常。

在我的 C++ InterfaceJNI.h 中，我有：

```
#ifndef __INTERFACE_JNI_H__
#define __INTERFACE_JNI_H__

#include "cocos2d.h"

类接口JNI
{
上市：
    静态无效 postMessageToFB();
    静态无效 postMessageToTweet();

受保护：

};

#endif // __INTERFACE_JNI_H__

```

在 InterfaceJNI.cpp 中：

```
#include "接口JNI.h"
#include "平台/android/jni/JniHelper.h"
#include jni.h >
#include android/log.h >

使用命名空间 cocos2d；

无效接口JNI::postMessageToTweet()
{
    整数状态；
    JNIEnv *env;
    JavaVM *jvm;
    jmethodID 中间；
    jclass mClass;
    布尔 isAttached = false;

    CCLog("静态 postMessageToTweet");

    // 获取状态
    status = jvm->GetEnv((void **) &env, JNI_VERSION_1_6);

    CCLog("状态：%d", status);

    if(状态 AttachCurrentThread(&env, NULL);
        CCLog("状态 2: %d", status);
        if(status GetStaticMethodID(mClass, "tweet", "()V");
    CCLog("mID: %d", mid);

    如果（中！=0）
        env->CallStaticVoidMethod(mClass, mid);
            //------------------------------------------------ ------------
    CCLog("完成");
    如果（已附加）
        jvm->DetachCurrentThread();

    返回;
}

```

使用以下代码从部分代码调用此接口：

```
#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID)
    接口JNI::postMessageToTweet();
#elif (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
    ObjCCalls::trySendATweet();
＃万一

```

在 jvm->GetEnv((void **) &env, JNI_VERSION_1_6); 上返回空指针会发生什么？?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:43:25.100

看起来您的 jvm 变量为空或垃圾。我使用的 Cocos2D-x 版本有一个名为 JniHelper 的类，带有一个静态 ::getJavaVM(); 您可能想要使用的方法。

```
JavaVM* vm = JniHelper::getJavaVM();
JNIEnv* env;

vm->GetEnv((void**)&env,JNI_VERSION_1_4);  // mine uses JNI_VERSION_1_4 
```

Also, remember to "refresh" your eclipse project every time you build with NDK. You probably do already, but it's worth checking.

# c# - 如何从 AutoCad 绘图中隐藏实体？

> ID：12679348
> 
> 赞同：0
> 
> 时间：2012-10-01T19:01:18.940
> 
> 标签：c#, autocad, objectarx

如何隐藏 DBEntity 不被绘制？如果我在事务中使用 ent.erase() 调用将某个对象标记为已删除，例如，当我保存文件时，它可以从绘图中删除。那么有什么方法可以安全地隐藏某个对象而不更改它的 ObjectId 和 Handle 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:27:53.140

这取决于你的限制是什么。最简单的方法可能是创建一个新层并将`.IsOff`属性设置为 true。然后，您可以将要隐藏的任何对象分配到该层：

```
entity.Layer = myHiddenLayerName; 
```

当您想取消隐藏它时，只需将其重新分配给可见层之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T09:01:05.770

您可以使用该`Visible`属性：

```
entity.Visible = false; 
```

# javascript - 删除停止我在 iframe 内以表单形式提交的操作

> ID：12679365
> 
> 赞同：0
> 
> 时间：2012-10-01T19:02:07.693
> 
> 标签：javascript, jquery, jquery-ui

> **可能重复：**
> [执行一次后停止 jquery 函数](https://stackoverflow.com/questions/12678852/stop-the-jquery-function-after-one-execution)

我有这个功能：

```
function Nextthing (){

$("#i").hide();
$('.table').eq(1)
           .find('tbody tr')
           .eq(2)
           .after('<tr><td colspan=10><iframe class="iframe"  src="/msg.html?msgId='+$('.table')
           .eq(1)
           .find('tbody tr')
           .eq(2)
           .find('td a')
           .eq(0)
           .text()+'&constant=1"></iframe></td></tr>');
}

} 
```

它是在提交按钮上调用的，但是当我单击该按钮时，它会隐藏这`#i`是一个 iframe 并插入一个新的 I 框架，就像函数的第二条语句所说的那样。

*但*它没有通过提交动作，所以它就像什么都没有发生，但效果仅此而已。

任何替代方法请删除，以便它可以通过提交操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:16:34.733

hidden`iframe`中的表单（即样式为 的表单`display: none`）不会提交。我相信这是防止网络钓鱼的安全措施。但是，您可以设置`visibility: hidden; height: 0px; width: 0px;`并且它应该可以工作。

**编辑：**

所以问题实际上不在于`$('#i').hide();`，而实际上是当它更改为`$('#i').remove();`. 在这种情况下，您很可能希望更改`iframe`本身运行的代码。假设某种能够发出 HTML 的服务器端语言，在处理完表单提交后，输出如下内容：

```
<script>
if (parent && parent.Nextthing) {
    parent.Nextthing();
}
</script> 
```

这假设`Nextthing`您在问题中显示的功能是全局范围的，并且包含在具有`iframe`参考的页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:08:12.900

我猜这是您的提交处理程序。如果是这种情况，您可能会在返回后遇到问题`undefined`。所有 JS 函数都返回一个值。如果未明确定义该值，则返回的值是假的，`undefined`并且`undefined`您正在从事件处理程序返回 false，该事件处理程序具有取消事件触发器的效果，即取消您的提交

如果是这种情况，只需`return true;`在函数末尾插入 a

# c# - 电话号码中的正则表达式可选空格

> ID：12679368
> 
> 赞同：3
> 
> 时间：2012-10-01T19:02:14.450
> 
> 标签：c#, regex

> **可能重复：**
> [用于电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

我非常接近我需要的完整正则表达式。但是，我似乎无法获得允许的可选空白。

正则表达式

```
^(\(?\d{3}\)?\-?\d{3}\-?\d{4})$ 
```

要求 - 只有这四个

111-111-1111 - 工程

(111)111-1111 - 作品

(111) 111-111 - 不捕获

1111111111 - 作品

如何在括号后添加可选空格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:06:01.747

```
^(\(?\d{3}\)*\s?\-?\d{3}\-?\d{4})$ 
```

*\s 表示 0 或 1 个空格字符。

**编辑：** 实际上，我更喜欢这个版本，因为它允许破折号或空格，但不能两者兼而有之。还， ？表示 0 或 1，* 表示 0 或更多：

```
^(\(?\d{3}\)?[\s,\-]?\d{3}\-?\d{4})$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T19:06:39.733

哪些`\(?\b[0-9]{3}\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}\b`匹配`3334445555`, `333.444.5555`, `333-444-5555`, `333 444 5555`,`(333) 444 5555`以及它们的所有组合。

*更新*

您遇到了 REGEX 的限制，因此丑陋的解决方案确实是：

```
(\d{3}-\d{3}-\d{4}|\(\d{3}\)\s?\d{3}-\d{4}|\d{10}) 
```

[例子](http://goo.gl/Xm7KN)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:24:21.147

有时最好匹配三个完整表达式之一：

`^(\d{11}|(\d{3}-){2}\d4|\(\d{3}\) ?\d\d\d-\d\d\d)$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:09:26.433

我不会根据格式来处理正则表达式，而是根据输入的数字来处理。这个问题显示了你应该采用的答案：

[用于电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation?answertab=votes#tab-top)

# .net - 如何在没有程序集清单的情况下加载 .net 模块

> ID：12679371
> 
> 赞同：0
> 
> 时间：2012-10-01T19:02:22.527
> 
> 标签：.net, manifest

如何在不需要清单的情况下加载 .net 模块（只是一个普通程序集，但它不包含程序集清单）？我有一些程序集在我尝试运行它们时会引发此错误：

```
The module was expected to contain an assembly manifest 
```

通常我可以通过在添加程序集清单后使用 ilasm 重新编译程序集来解决此问题：

```
.assembly test{  } 
```

但是这个问题还有其他解决方法吗？能`Assembly.LoadModule(...)`解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:08:55.540

清单是逻辑程序集的一部分，它可能包含许多文件。并且其中只有一个包含程序集清单（所有其他程序集文件的链接在哪里），因此您可以使 try-catch 块并仅成功加载主要程序集模块。

# mysql - 哪种布局更适合这个数据库表？

> ID：12679375
> 
> 赞同：3
> 
> 时间：2012-10-01T19:02:33.730
> 
> 标签：mysql, sql, database

我需要一个名为“问题”的数据库表的帮助。当涉及到主键时，我想知道以下两种布局中哪种布局更好：

题表法一：

```
QuestionId (int 3) PK
SessionId (varchar10) PK
QuestionContent (varchar800)
NoofAnswers (int 3)
AnswerId (int 5) Auto Increment
Marks (int 3) 
```

上表中，QuestionId 和 SessionId 是 PK（主键），AnswerId 不是 PK，而是自增。

题表方法二：

```
QuestionId (int 3)
SessionId (varchar10)
QuestionContent (varchar800)
NoofAnswers (int 3)
AnswerId (int 5) Auto Increment PK
Marks (int 3) 
```

在上表中，只有 AnswerId 是 PK 和自增。但是，如果我这样做，则意味着包含 QuestionId 的其他表将必须链接到该表的 QuestionId 作为非键或类似的东西。

数据库不允许我对 QuestionId、SessionId 和 AnswerId 进行 PK，因为它说 AnswerId 是自动递增的，因此不需要任何其他主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:07:28.130

我觉得这两种情况都不好！你给 PK 赋予了意义，但 PK 应该没有意义。

只需使用外键将您的 PK a`int(11) Auto Increment`和链接表连接在一起。

**更新**

每个表都有自己的 PK。Questions 表有一个 QuestionId PK。

将表绑定在一起是基于表之间的关系。`1:1`关系，`1:many`关系和关系有不同的场景`many:many`。

例子：

```
CREATE TABLE `Questions` (
  `QuestionId` int(11) NOT NULL AUTO_INCREMENT,
  `AnswerId` int(11) DEFAULT NULL,
  PRIMARY KEY (`QuestionId`),
  KEY `FK_Answer` (`AnswerId`),
  CONSTRAINT `FK_Answer` FOREIGN KEY (`AnswerId`) REFERENCES `Answers` (`AnswersId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `Answers` (
  `AnswerId` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`AnswerId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

从问题来看，一个问题只能有 1 个答案 ( `1:1`)。从答案来看，它可以用于许多问题（`1:n`）。对于`many:many`关系，您需要一个额外的表。

这是一个 youtube 做一些额外的解释：[http ://www.youtube.com/watch?v=RXOj0D80kRg](http://www.youtube.com/watch?v=RXOj0D80kRg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:12:46.637

标准化：

表会话：id

表问题： id (int 3) auto increment pk session_id varchar255 QuestionContent (varchar800) Marks (int 3)

表答案： id auto increment pk question_id (references questions(id)) content varhcar(255)

# css - Chrome中的CSS背景图像错误

> ID：12679377
> 
> 赞同：2
> 
> 时间：2012-10-01T19:02:42.223
> 
> 标签：css, google-chrome

我在 Chrome 中有一个奇怪的错误，我将以下 CSS 规则应用于元素：

```
#element {
  background-color: #0E0F10;
  background-image: url(images/the_background.jpg);
} 
```

现在，当我第一次打开包含“#element”的新页面时，直到我用 ctrl+f5 刷新页面缓存后才会显示背景图像。

我尝试添加 Pragma、Expires 和 Cache-control 元标记，但没有任何区别。让图片第一次显示的唯一方法是这样放置绝对 url：

```
#element {
  background-color: #0E0F10;
  background-image: url(http://site.com/images/the_background.jpg);
} 
```

现在的问题是我无法硬编码站点 url，我需要使用相对于根路径的相对或相对路径。

环顾四周，我发现了一个修复 Chrome 中相关错误的肮脏技巧，巧合的是，它也解决了这个问题：[http ://blog.andrewcantino.com/blog/2012/02/15/fixing-the-chrome-background-refresh-bug /](http://blog.andrewcantino.com/blog/2012/02/15/fixing-the-chrome-background-refresh-bug/)

基本上，当我第一次打开页面时，所有背景图像都通过 JavaScript 重新加载，从这里开始它工作正常。

但是，我想实施更优雅的修复或找到问题的真正原因。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:13:20.100

尝试 `background: #0E0F10 url('http://site.com/images/the_background.jpg');`

另外，请务必为您的选择器添加宽度和高度！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T14:12:34.427

在我相信之前，我碰巧遇到了同样的问题。

由于您尚未接受任何答案。你可能想试试，什么对我有用：

代替：

```
 background-image: url(images/the_background.jpg); 
```

将其更改为：

```
 background-image: url('images/the_background.jpg'); 
```

有滴答声......这看起来很奇怪，但它对我有用。由于我所有的 url 也有一个下划线，它可能与此有关，但我不确定。

无论如何，将网址放在引号中，应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T03:06:20.477

在样式规则中使用相对路径解决了我的问题。比如图片url是“ [http://site.com/images/the_background.jpg](http://site.com/images/the_background.jpg) ”，你的css文件url是“ [http://site.com/stylesheet/style.css](http://site.com/stylesheet/style.css) ”，使用“../images/ the_background.jpg”而不是样式规则中的“/images/the_background.jpg”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-28T14:13:51.620

看到这是一个老问题。但只是面临同样的问题。我的问题与`z-index`. 例如，增加价值`z-index:2000;`，现在好像一切正​​常。只需要检查`z-index`其他元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-02T01:39:03.213

如果您的文件结构类似于此主文件夹 css img 索引文件，则键入以下语法：

```
#element{
 background-image: url(../img/example.jpg);
}
```

写下这段代码，你的 bug 就解决了。

# c# - 需要 Listbox 将第一个 selecteditem 属性捕获为 SelectedItem，而不是 PropertyChanged *TO*

> ID：12679379
> 
> 赞同：1
> 
> 时间：2012-10-01T19:02:57.997
> 
> 标签：c#, wpf, data-binding, listbox, inotifypropertychanged

I have a listbox that, when an item is selected, invokes a method that executes a Stored Procedure.

The problem is that when the first item is selected, my PropertyChanged event doesn't fire unless the selection is *changed from one item to another* . 因此，第二个项目 SelectedItem PropertyChanged 被触发，但看起来选择第一个项目只是被视为进入列表框，而不是进入列表框并选择发生单击的项目。

此外，我不能只在同一个项目上单击两次来触发通知，我必须实际选择不同的属性才能发生事件。

什么是让我在进入列表框时第一次单击的项目成为 SelectedItem 的最佳方式，并在该项目上触发 PropertySelected/Property Changed 事件？我希望这很清楚。

以下是我的代码，在此先感谢！

在我的视图模型中：

```
 public ObjectClass SelectedObject
 {
      get { return _SelectedObject; }
      set
      {
          _SelectedObject = value;
          base.OnPropertyChanged("SelectedObject");
      }
 }

 void OnPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
 {
      switch (e.PropertyName)
      {
          case "SelectedObject" : UpdateSelectedStuffList.StoredProcedureMethod(this);
      }
 } 
```

在我看来：

```
 <ListBox ItemsSource="{Binding Path=ObjectCollection, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
            DisplayMemberPath="objectName"
            SelectedItem="{Binding Path=SelectedObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

我在想，与其使用 PropertyChangedEventArgs，不如使用“PropertySelectedEventArgs”之类的东西。或者，也许我需要实现 INotifyPropertyChanging？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:14:56.907

如果您希望即使您连续两次选择相同的项目也能触发它，我会查看 OnClick。否则，考虑将选定的索引设置为 -1，这样当用户选择第一项时，它的值就会发生变化。

# java - Android应用设计帮助，如何控制显示哪个activity

> ID：12679382
> 
> 赞同：3
> 
> 时间：2012-10-01T19:03:29.517
> 
> 标签：java, android, facebook, android-activity

您好，我需要一些有关如何解决此问题的建议，请多多包涵，因为我还是 android 新手。

我有一个在应用程序启动时打开的活动，需要用户提供一些信息，但是下次用户打开应用程序时，我希望应用程序打开一个不同的活动来显示各种信息。有点像 facebook 应用程序，当你第一次运行它时，你必须登录，然后只有在下次运行应用程序时，你才会被直接引导到提要。

有什么想法可以有效地做到这一点吗？

更新：我已经通过共享偏好存储了信息，现在正在使用一个控制器活动来决定采取哪一步。因此，控制器活动在启动时运行，并决定是显示登录屏幕还是直接访问信息。但是现在我遇到了一个问题，我最终打开了一个空白活动（控制器），然后在上面打开了另一个（决定的活动）。我不想显示空白活动，所以它有点像后台进程，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:13:11.587

理想情况下，您将拥有像控制器这样的主要活动。使用`SharedPreference`对象来跟踪用户是否登录。所以回到你的主要活动，阅读这个值，如果它被设置了，去你的新闻提要活动，否则显示一个登录屏幕活动。（当您进行检查和重定向时，您可以显示一个进度对话框）

SharedPreferences 的链接

[MobTuts](http://mobile.tutsplus.com/tutorials/android/android-application-preferences/)

[安卓开发者](http://developer.android.com/reference/android/content/SharedPreferences.html)

# java - JPA 2.0 悲观锁测试方式

> ID：12679384
> 
> 赞同：2
> 
> 时间：2012-10-01T19:03:38.400
> 
> 标签：java, jpa, jpa-2.0

虽然我学习和参考`JPA 2.0 pessimistic lock`，

*   我不知道它在哪里使用以及如何测试它？
*   在不使用 Web 客户端的情况下测试它的最佳方法是什么？
*   什么是最好的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:39:12.320

请参阅[Java Persistence 2.0 中的锁定和并发](https://blogs.oracle.com/enterprisetechtips/entry/locking_and_concurrency_in_java)

*悲观锁定假设事务会经常发生冲突。在悲观锁定中，读取数据的事务将其锁定。在第一个事务提交读取之前，另一个事务不能更改数据。*

因此，如果您使用悲观锁，您会阻塞整个实体（至少是行），并且没有其他人可以同时读取/写入。

# yii - 可以将可标记扩展上的默认条件运算符从 OR 更改为 AND 吗？

> ID：12679389
> 
> 赞同：0
> 
> 时间：2012-10-01T19:03:57.747
> 
> 标签：yii, yii-extensions

```
$tagged = Os :: model()-> withTags("windows, windows7, windowsXp")-> find(); 
```

我想检索标记有以下任何 **windows**、**windows7**、**windowsXp**的记录。

默认情况下，这些标签会生成一个 AND-ed 条件。我想对标签使用 OR 运算符。因此，如果记录包含 windows、windows7 但不包含 windowsXp，它将不会被检索。

通过编辑扩展文件夹中的**ETaggableBehavior.php中的****getFindByTagsCriteria()** ，我设法找到了解决方法。

 **```
/**
     * Get criteria to limit query by tags.
     * @access private
     * @param array $tags
     * @return CDbCriteria
     */
    protected function getFindByTagsCriteria($tags) {
            $criteria = new CDbCriteria();

            $pk = $this->getOwner()->tableSchema->primaryKey;

            if(!empty($tags)){
                    $conn = $this->getConnection();
                    $criteria->select = 't.*';

                    if(count($tags) >0){
                            $criteria -> join .= "
                                    JOIN {$this->getTagBindingTableName()} bt 
                                    ON t.{$pk} = bt.{$this->getModelTableFkName()}

                                    JOIN {$this->tagTable} tag0 
                                    ON tag0.{$this->tagTablePk} = bt.{$this->tagBindingTableTagId} AND (";

                            for($i = 0, $count = count($tags); $i < $count; $i++){
                                    $tag = $conn->quoteValue($tags[$i]);
                                    $criteria->join .= " tag0.`{$this->tagTableName}` = $tag OR";
                            }
                            $criteria -> join = rtrim($criteria -> join, "OR");
                            $criteria -> join .= ")";
                    }
            }

            if($this->getScopeCriteria()){
                    $criteria->mergeWith($this->getScopeCriteria());
            }

            return $criteria;
    } 
```

我真的很感激任何其他方式，而不必修改插件本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:53:25.413

我在这里要做的是在你的模型中设置 withTags() 方法来获取一个数组值，例如这样的：

```
/**
 * @param array $tags List of tags to search for
 * @return named scope
 */
public function withTags($tags)
{
    $condition = '1';
    $params = array();
    foreach($tags as $key=>$value)
    {
        $condition.=' OR tag = :tag'.$key;
        $params[':tag'.$key] = $value;
    }
    $this->getDbCriteria()->mergeWith(array(
        'condition'=>$condition,
        'params'=>$params,
    ));

    return $this;
} 
```

这样，您应该能够像这样调用您的命名范围：

```
$tags = array('windows', 'windows7', 'windowsXp'),
$tagged = Os::model()->withTags($tags)->findAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:37:44.763

**Yii 开发团队的 Sam 通过在ETaggableBehavior.php**中添加另外两个函数帮助我解决了这个问题

 **```
/**
 * Get criteria to limit query to match any of tags specified
 * @access private
 * @param array $tags
 * @return CDbCriteria
 */
protected function getFindByAnyTagsCriteria($tags) {
    $criteria = new CDbCriteria();

    $pk = $this->getOwner()->tableSchema->primaryKey;

    if(!empty($tags)){
        $conn = $this->getConnection();
        foreach($tags as &$tag) {
            $tag = $conn->quoteValue($tag);
        }
        unset($tag);
        $tags = implode(', ', $tags);

        $criteria->select = 't.*';
        $criteria->join .=
            "JOIN {$this->getTagBindingTableName()} bt ON t.{$pk} = bt.{$this->getModelTableFkName()}
            JOIN {$this->tagTable} tag ON tag.{$this->tagTablePk} = bt.{$this->tagBindingTableTagId} AND tag.`{$this->tagTableName}` IN ($tags)";
        }
    }

    if($this->getScopeCriteria()){
        $criteria->mergeWith($this->getScopeCriteria());
    }

    return $criteria;
}

/**
 * Limit current AR query to have any of tags specified.
 * @param string|array $tags
 * @return CActiveRecord
 */
public function taggedWithAnyOf($tags) {
    $tags = $this->toTagsArray($tags);

    if(!empty($tags)){
        $criteria = $this->getFindByAnyTagsCriteria($tags);
        $this->getOwner()->getDbCriteria()->mergeWith($criteria);
    }

    return $this->getOwner();
} 
```****

# java - 突出显示 ListFragment (MultiChoiceModeListener) 中的选定项目？

> ID：12679391
> 
> 赞同：4
> 
> 时间：2012-10-01T19:04:02.900
> 
> 标签：java, android, xml

我希望能够查看在我的列表中选择了哪些项目。在变成 之前`ListView`，`ListFragment`所选项目的背景颜色为蓝色（全息黑暗），但现在我只能在按下项目时看到蓝色 - 然后它就消失了。我对“检查”的项目没有问题，因为它们是。你只是看不到它。

这是我所做的`onActivityCreated()`：

```
getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
getListView().setItemsCanFocus(false);
getListView().setMultiChoiceModeListener(new LongPress()); 
```

`LongPress()`是一个实现的私有类`ListView.MultiChoiceModeListener`。将手指放在项目上时，它会打开一个上下文操作栏。然后用户可以选择更多项目，这就是问题发生的地方。您看不到哪些项目被选中（我希望它们被突出显示）。为什么它在扩展之前起作用`ListFragment`？我试图在我的 .xml 文件中创建一个自定义选择器，但这似乎也不起作用。如果有的话，我更喜欢使用自定义的。

这是我`ListFragment`课堂上的另一种方法：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment_listview, container, false);
} 
```

fragment_listview.xml 除了更改背景颜色和分隔线颜色外，没有做任何特别的事情。

我应该怎么办？

我试过这个，但没有奏效：

在我的 list_item.xml 中：

```
android:background="@drawable/selector" 
```

选择器.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_checked="true"
      android:drawable="@drawable/item_checked" />
</selector> 
```

item_checked.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http//schemas.android.com/apk/res/android" >

<solid android:color="#000000" />

</shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-03T12:18:27.463

我遇到了完全相同的问题。

我在这篇文章中找到了一个解决方案：[Highlight custom listview item when long click](https://stackoverflow.com/questions/18549271/highlight-custom-listview-item-when-long-click)

诀窍：

> 在列表行的布局文件中设置（在顶级组件中，通常是 LinearLayout 或 RelativeLayout）：
> 
> android:background="?android:attr/activatedBackgroundIndicator"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:49:53.283

我现在找不到详细信息，但是您必须为listview-items提供一个[statelist drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)`checked` ，它为状态提供一个单独的 drawable。

# javascript - 模型和支持之间的一种方式通信

> ID：12679392
> 
> 赞同：0
> 
> 时间：2012-10-01T19:04:02.427
> 
> 标签：javascript

在下面的小提琴中，我希望`Mo`能够打电话`Su`，但不能反过来。

我该如何实现这一点。我不想使用事件。只是 JavaScript 的原生功能。

模型是 MVC 中的传统模型。Support 包含模型运行所需的支持功能。

莫 -> 苏

[http://jsfiddle.net/bkYcr/2/](http://jsfiddle.net/bkYcr/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:51:36.000

如果您不希望“任何其他访问 Mo”，您可以将 Mo 设为私有。它是通过将函数`Model`变成构造函数来完成的。

```
$Frame.Model = function(model_object){
    var privateFunc = function() {
        //Private function of Model objects. Can access Su.
    }
    this.publicFunction = function() {
        //Public function of Model objects. Anyone can access this by Mo.publicFunction(). Also can access Su.
    }
} 
```

这个函数是一个构造函数。所以要制作 Mo，做

```
Mo = new $Frame.Model(); 
```

记住不要忘记新的。否则事情就会一团糟。为了防止“混乱”（发生这种情况是因为构造函数中的 this 指的是`window`如果你忘记了新的），请执行以下操作：

```
$Frame.Model = function(model_object){

    if (!(this instanceof $Frame.Model))
        return new $Frame.Model();
    var privateFunc = function() {
        //Private function of Model objects. Can access Su.
    }
    this.publicFunction = function() {
        //Public function of Model objects. Anyone can access this by Mo.publicFunction()
    }
} 
```

# c++ - int 的 Arduino C++ 向量

> ID：12679399
> 
> 赞同：0
> 
> 时间：2012-10-01T19:04:42.393
> 
> 标签：c++, arrays, vector, arduino

我有一个名为 Model 的类，在 ypur .h 文件中我有这个：

```
private:
    vector<int> memory(MEMORY_SIZE); 
```

MEMORY_SIZE 是定义标头中的常量，值为 10。

当我尝试编译时，我得到了这个错误代码

```
Model.h:33: error: ISO C++ forbids declaration of 'vector' with no type
Model.h:33: error: expected ';' before '<' token 
```

我不知道为什么，我在声明向量的类型......

* * *

完整的头文件代码：

```
/*
 * Model.h
 *
 *  Created on: Sep 13, 2012
 *      Author: ademar
 */

#ifndef MODEL_H_
#define MODEL_H_

#include "Config.h"
#include "Arduino.h"
#include <vector>

class Model {

    public:
        Model(int pin, char command[]);
        Model(int pin, int initialState, char command[]);
        bool isChanged(int currentState);
        char* getCommand(void);
        int getState();
        void setRange(int range);
        void usesMemory();

    private:
        int pin;
        int state;
        int range;
        long time;
        char* command;
        void updateTime();
        bool useMemory;
        std::vector<int> memory;
};

#endif /* MODEL_H_ */ 
```

* * *

和 C++ 代码：

```
/*
 * Model.cpp
 *
 *  Created on: Sep 13, 2012
 *      Author: ademar
 */

#include "Model.h"

Model::Model(int pin, char command[]) {
    *this = Model(pin,0,command);
}

Model::Model(int pin, int initialState, char command[]) {
    this->pin = pin;
    this->state = initialState;
    this->command = command;
    this->range = 1;
    this->useMemory = false;
    this->updateTime();
}

void Model::usesMemory(){
    this->useMemory = true;
}

void Model::setRange(int range){
    this->range = range;
}

bool Model::isChanged(int currentState) {
    if ((currentState >= (this->state + this->range) || currentState <= (this->state - this->range)) && ((this->time+WAIT_CHANGE)<millis())){
        this->state = currentState;
        updateTime();
        return true;
    }
    return false;
}

char* Model::getCommand(){
    return this->command;
}

int Model::getState(){
    return this->state;
}

void Model::updateTime(){
    this->time = millis();
} 
```

* * *

和错误：

```
In file included from Honda.h:11,
             from Honda.cpp:8:
Model.h:33: error: ISO C++ forbids declaration of 'vector' with no type
Model.h:33: error: invalid use of '::'
Model.h:33: error: expected ';' before '<' token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:33:15.210

这些是我拍摄的未包含*矢量*或您缺少命名空间的照片`std::`。编译器明确指出它不知道向量是什么。

更重要的是，您不会在[C++](http://en.wikipedia.org/wiki/C_%28programming_language%29)中初始化这样的字段。您必须在构造函数中执行此操作：

```
#include <vector>
#include <iostream>

#define MEMORY_SIZE 10

class Clazz {
    std::vector<int> memory;

    public:
        Clazz() : memory(MEMORY_SIZE){}
        int memory_size() {return memory.size();}
};

int main() {
    Clazz c;
    std::cout << c.memory_size() << std::endl;
    return 0;
} 
```

# c++ - 不提供模板参数的 C++ 类指针

> ID：12679400
> 
> 赞同：4
> 
> 时间：2012-10-01T19:04:44.733
> 
> 标签：c++, class, templates, variables, pointers

你好亲爱的黑社会称为互联网。

假设我们有一个名为 X 的类，其模板参数（Y）：

```
template<class Y>
class X
{
    //...
}; 
```

我想创建一个没有（还没有）模板参数的类的实例，然后用模板参数定义指针：

```
X* myClass;

//....
myClass = new X<variable>(); 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:16:27.437

X 不是没有模板参数的类型，所以不，不幸的是不是。如果 X 有一个定义了你想使用的接口的基类，你就可以实现你想要的。

例如，

```
struct Interface
{
    Interface() {}
    virtual ~Interface(){}

    virtual void doSomething() = 0;
};

template <class Y>
class X : public Interface
{
    //...
    virtual void doSomething() override;
};

std::unique_ptr<Interface> myClass;

//....
myClass.reset(new X<variable>());
myClass->doSomething(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:07:03.093

不，指针指向类型，而`X`不是类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:14:16.907

不与`X*`. 考虑这个替代方案：

```
class BaseX { 
    //...
};

template<class Y>
class X : public BaseX
{
    //...
}; 
```

因为`BaseX`它是一个完整的类型，所以一旦定义了它，就`BaseX*`可以引用一些。`X<Y>`

# c# - 在按钮单击中报告以下方法的 WPF 进度条的进度？

> ID：12679402
> 
> 赞同：0
> 
> 时间：2012-10-01T19:04:57.567
> 
> 标签：c#, wpf

我有以下在按钮单击中执行的方法：

```
 private void CopyDirectoriesAndFiles(string source, string target, string[] excludedFolders)
        {

            foreach (string dir in Directory.GetDirectories(source, "*", System.IO.SearchOption.AllDirectories))
                if (!excludedFolders.Contains(dir))
                    Directory.CreateDirectory(target + dir.Substring(source.Length));

            foreach (string file_name in Directory.GetFiles(source, "*.*", System.IO.SearchOption.AllDirectories))
                if (!File.Exists(Path.Combine(target + file_name.Substring(source.Length))))
                    File.Copy(file_name, target + file_name.Substring(source.Length));

        } 
```

按钮单击还有其他一些方法，但它们运行时间不会很长，但即便如此，我如何才能显示和更新每个运行的进度条。我放了一个文本框，但只有在完成所有内容后才会写入文本框。我的按钮顺序可能如下所示：

```
InitializeStuff();

CopyFiles();

CleanUp(); 
```

进度条不是绝对必要的，虽然很好。如果我能让我的文本框在每次方法完成时而不是在最后时更新，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:43:08.207

这是一个使用 MVVM 的完整工作模型：

风景：

```
<Window x:Class="CopyFiles.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:model="clr-namespace:CopyFiles">

    <Window.DataContext>
        <model:CopyModel />
    </Window.DataContext>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Grid.Column="0" Name="sourceLabel">Source</Label>
        <TextBox Text="{Binding Source, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Row="0" Grid.Column="1" Name="sourceTextBox" Margin="5"/>

        <Label Grid.Row="1" Grid.Column="0"  Name="destinationLabel">Destination</Label>
        <TextBox Text="{Binding Destination, Mode =TwoWay, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="1" Grid.Column="1" Name="destinationTextBox" Margin="5" />

        <Button Command="{Binding CopyCommand}" Grid.Row="2" Grid.ColumnSpan="2" Content="Copy" Name="copyButton" Width="40" HorizontalAlignment="Center"  Margin="5"/>

        <ProgressBar Visibility="{Binding CopyInProgress, Converter={StaticResource booleanToVisibilityConverter}}" Value="{Binding Progress}" Grid.Row="3" Grid.ColumnSpan="2"  Height="20" Name="copyProgressBar" Margin="5" />
    </Grid>
</Window> 
```

视图模型：

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.IO;
using Microsoft.Practices.Prism.Commands;

namespace CopyFiles
{
    public class CopyModel: INotifyPropertyChanged
    {

        private string source;
        private string destination;
        private bool copyInProgress;
        private int progress;
        private ObservableCollection<string> excludedDirectories;

        public CopyModel()
        {
            this.CopyCommand = new DelegateCommand(ExecuteCopy, CanCopy);
            this.excludedDirectories = new ObservableCollection<string>();
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public string Source
        {
            get { return source; }
            set
            {
                source = value;
                RaisePropertyChanged("Source");
                CopyCommand.RaiseCanExecuteChanged();
            }
        }

        public string Destination
        {
            get { return destination; }
            set
            {
                destination = value;
                RaisePropertyChanged("Destination");
                CopyCommand.RaiseCanExecuteChanged();
            }
        }

        public bool CopyInProgress
        {
            get { return copyInProgress; }
            set
            {
                copyInProgress = value;
                RaisePropertyChanged("CopyInProgress");
                CopyCommand.RaiseCanExecuteChanged();
            }
        }

        public int Progress
        {
            get { return progress; }
            set
            {
                progress = value;
                RaisePropertyChanged("Progress");
            }
        }

        public ObservableCollection<string> ExcludedDirectories
        {
            get { return excludedDirectories; }
            set 
            { 
                excludedDirectories = value;
                RaisePropertyChanged("ExcludedDirectories");
            }
        }

        public DelegateCommand CopyCommand { get; set; }

        public bool CanCopy()
        {
            return (!string.IsNullOrEmpty(Source) &&
                    !string.IsNullOrEmpty(Destination) &&
                    !CopyInProgress);
        }

        public void ExecuteCopy()
        {
            BackgroundWorker copyWorker = new BackgroundWorker();
            copyWorker.DoWork +=new DoWorkEventHandler(copyWorker_DoWork);
            copyWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(copyWorker_RunWorkerCompleted);
            copyWorker.ProgressChanged += new ProgressChangedEventHandler(copyWorker_ProgressChanged);
            copyWorker.WorkerReportsProgress = true;
            copyWorker.RunWorkerAsync();
        }

        private void RaisePropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if(handler != null) 
            {
                var eventArgs = new PropertyChangedEventArgs(propertyName);
                handler(this, eventArgs);
            }
        }

        private void copyWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            var worker = sender as BackgroundWorker;
            this.CopyInProgress = true;
            worker.ReportProgress(0);

            var directories = Directory.GetDirectories(source, "*", System.IO.SearchOption.AllDirectories);
            var files = Directory.GetFiles(source, "*.*", System.IO.SearchOption.AllDirectories);
            var total = directories.Length + files.Length;
            int complete = 0;

            foreach (string dir in directories)
            {
                if (!ExcludedDirectories.Contains(dir))
                    Directory.CreateDirectory(destination + dir.Substring(source.Length));
                complete++;
                worker.ReportProgress(CalculateProgress(total, complete));
            }

            foreach (string file_name in files)
            {
                if (!File.Exists(Path.Combine(destination + file_name.Substring(source.Length))))
                    File.Copy(file_name, destination + file_name.Substring(source.Length));
                complete++;
                worker.ReportProgress(CalculateProgress(total, complete));
            }
        }

        private static int CalculateProgress(int total, int complete)
        {
            // avoid divide by zero error
            if (total == 0) return 0;
            // calculate percentage complete
            var result = (double)complete / (double)total;
            var percentage = result * 100.0;
            // make sure result is within bounds and return as integer;
            return Math.Max(0,Math.Min(100,(int)percentage));
        }

        private void copyWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            this.Progress = e.ProgressPercentage;
        }

        private void copyWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            this.CopyInProgress = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:10:36.003

> 我有以下在按钮单击中执行的方法：

不应该。这会使您的 UI 冻结太久。

使用后台工作者。[[1]](http://www.switchonthecode.com/tutorials/csharp-tutorial-using-the-backgroundworker-class)、[[2]](https://stackoverflow.com/questions/5483565/how-to-use-wpf-background-worker)和[[3]](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

# c++ - c ++从重复数组创建子数组

> ID：12679404
> 
> 赞同：1
> 
> 时间：2012-10-01T19:05:17.130
> 
> 标签：c++, arrays, pointers

这是我的代码，我不允许在子数组函数中使用循环我很困惑也许有人可以指出我正确的方向我觉得我快到了..

```
int *duplicateArray(int *arr, int size) 
{
int *newArray;

if (size<=0)
    return NULL;

newArray = new int[size];

for (int index=0;index<size;index++)
    newArray[index]=arr[index];

return newArray;
}

int* subArray(int *sub, int start, int length)
{

 int aa[10]={1,2,3,4,5,6,7,8,9,10};
 int *dup;
 dup = aa;
 duplicateArray(dup,10);
 return dup;

}

int main()
{   cout << "Testing subArray: " << endl 
         << "Expected result: 5, 6, 7, 8 " << endl;
int *subArr;
int start = 5;
subArr = subArray(subArr, 5,4);
for (int index = start; index<10; index++)
    cout << subArr[index];
delete [] subArr;
subArr = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:55:56.490

因此，由于这是家庭作业，我将避免直接发布解决方案。你这么说；

> 我不允许在子数组函数中使用循环

然而，目前，`subArray`调用`duplicateArray`使用循环。这似乎与要求的精神相冲突。

既然您没有另外说，我假设`subArray`应该在和结尾之间*复制*其参数的内容。`start`那么，我们知道什么？

我们知道返回数组的大小应该是`length - start`元素。我们也知道（好吧，也许）存在一个名为的函数`memcpy`，它允许您将一个字节块从一个地方复制到另一个地方（假设它们不重叠）。

（请注意，我在`memcpy`这里提出建议是因为我们正在处理 POD 类型（[Plain Old Data](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)），并且因为我怀疑您的课程已经深入研究了 STL。将来您会得到更好的服务，例如`std::copy()`，但现在还可以）

因此，按顺序，我们需要：

1.  声明一个新数组以返回`length - start`元素。*你必须动态分配这个数组*！目前，您正在返回一个指向本地声明数组的指针。一旦函数返回，该指针就会变得无效。

2.  将`length - start`元素（元素，而不是字节！确保考虑到元素的数量以及单个元素的大小）从`sub + start`这个新数组中复制。

3.  返回新数组（实际上是指针）。

如果我以某种方式违反了您分配的要求或意图，那么您需要为我详细说明您的问题。目前没有太多事情要做。

# ruby-on-rails-3 - Rails 3：无法批量分配嵌套属性

> ID：12679406
> 
> 赞同：0
> 
> 时间：2012-10-01T19:05:40.170
> 
> 标签：ruby-on-rails-3, nested-forms, nested-attributes

我收到了臭名昭著的错误：

```
Can't mass-assign protected attributes: comments 
```

据我所知，我在我的模型中做的一切都是正确的：

```
class Book < ActiveRecord::Base
  attr_accessible :author, :edition, :issue, :title, :url, :comments_attributes
  has_many :comments, :dependent => :destroy
  accepts_nested_attributes_for :comments, :allow_destroy => true
end 
```

并查看：

```
<%= form_for @book, :remote => true do |f| %>
  <%= f.label :title %>:
  <%= f.text_field :title %><br />

  <%= f.label :author %>:
  <%= f.text_field :author %><br />

  <%= f.fields_for @comment do |comment| %>
  <%= comment.label :body, :Comment %>:
  <%= comment.text_area :body %><br />
  <% end %>

  <%= f.submit %>
<% end %> 
```

我在这里想念什么？我已经阅读了关于 stackoverflow 的十几个类似问题，但唯一的建议似乎是添加 attr_accessible 和accepted_nested_attributes_for，这两个我已经有了。肯定还有别的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:12:27.007

你有 fields_for @comment 做 |comment| 它应该是：

```
fields_for :comments do |comment| 
```

然后在下一行中，我可能只使用字符串“Comment”作为标签。

# java - 我需要设置一个变量，但我也需要它是最终的。

> ID：12679407
> 
> 赞同：1
> 
> 时间：2012-10-01T19:05:46.137
> 
> 标签：java, android, final

在下面的代码中，第一个`if`语句抱怨`current_guy`不能是 a `final`，但第二个`if`语句抱怨`current_guy`不是 final。我没主意了。

```
final int current_guy=0;

if (a.equals("bf")){
   current_guy=1;
}

guy1.setOnClickListener(new OnClickListener() {    
   public void onClick(View v) {

   if (current_guy==1) {
      // TODO Auto-generated method stub
   }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T19:09:45.263

```
final int current_guy = a.equals("bf") ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:13:41.093

乔丹丹尼森在一个被删除的答案中有这个..不知道为什么，因为它是正确的。然后，这只是对当前答案“完整性”的*重新发布*。（话虽如此，我可能会在这里使用三元运算符方法。）

请注意，`final`变量的分配可以*延迟*，只要它在使用前在所有代码路径上只分配*一次。*

```
final int current_guy; // no assignment here

if (a.equals("bf"))
    {
        current_guy=1;
    }
else
    {
        current_guy=0;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:14:21.393

您可以将 current_guy 分配给另一个最终变量

```
final int finalCurrentGuy = current_guy;
guy1.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
       if (finalCurrentGuy==1) {
         ....
       }
    } 
```

这会在那个时间点复制变量 current_guy 并将其传递给内部类

[这篇](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen) `SO`文章解释了为什么它必须在内部类中是最终的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T19:19:59.210

我要做的是：

```
int current_guy=0;

// Set the value that you want based on a condition
if (a.equals("bf"))
{
    current_guy=1;
}

final int valueToTest = current_guy;
guy1.setOnClickListener(new OnClickListener() {

public void onClick(View v) {

if (valueToTest ==1) {
    // your code
    }
} 
```

之所以如此，是因为该`onClick()`方法可能会在一段时间后响应事件而执行，并且可能位于单独的线程中。然后，您不希望在该处理程序内部或外部某处在执行处理程序时更改变量的值。您可以说这是为了防止对值的脏读。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T19:11:53.857

第一个抱怨的原因是您无法设置最终变量。它抱怨它不是最终的原因是您正在创建所谓的匿名内部类。因此，您的 OnClickListener 是一个完全独立的类，无法在运行时从主类访问变量。这就是为什么它必须是最终的。然后，当编译器构建您的应用程序时，它知道该值是什么并可以在那里替换它。如果你想让这个变量成为很好的变量，那么你必须将值传递给 OnClickListener 以便它可以在变量更改时获取更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T19:07:36.393

创建另一个实现您的类`OnClickListener`并将其`current_guy`作为参数传递。这将阻止它抱怨变量不是最终的。在声明这样的内部类和方法时，您不能引用非最终变量。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-01T19:09:38.360

检查/调整后，分配`current_guy`给最终变量：

```
int current_guy=0;

if (a.equals("bf"))
    {
        current_guy=1;
    }

final int final_current_guy = current_guy;

guy1.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

    // TODO Auto-generated method stub
    if (final_current_guy==1) {
        }
    } 
```

或者使用单行赋值：

```
final int current_guy = (a.equals("bf") ? 1 : 0); 
```

# delphi - 是否可以使用 TADOTable 作为数据源编辑 VCL TDBGrid 中的字段？

> ID：12679419
> 
> 赞同：1
> 
> 时间：2012-10-01T19:07:01.200
> 
> 标签：delphi, ado, delphi-2007, vcl, tdbgrid

我最近使用 Delphi 的 VCL 修改了一些旧的 UI 代码以使用 ADO 而不是 BDE。其中一个屏幕使用 TDBGrid 控件来修改底层数据源，但似乎无法再编辑网格中的值。这是我的配置方式：

TDBGrid->TDataSource->TADOTable

我在另一个似乎相关的论坛上发现了这篇文章：http: [//coding.derkeiler.com/Archive/Delphi/alt.comp.lang.borland-delphi/2009-08/msg00023.html](http://coding.derkeiler.com/Archive/Delphi/alt.comp.lang.borland-delphi/2009-08/msg00023.html)

这是 ADO 的限制吗？还是我只需要在某处更改控件的设置？（光标类型还是什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:44:33.163

好的，我解决了这个问题。当我将项目从 Delphi 6 转换为 Delphi 2007 时，它将 TDBGrid 控件的 Options 属性更改为看似随机的值（可能是一些默认值？）。在这种情况下，dgEditing 选项设置为 false。

# php - PHP 中的命名空间是什么？

> ID：12679432
> 
> 赞同：1
> 
> 时间：2012-10-01T19:07:36.307
> 
> 标签：php, namespaces

我读了一篇关于`namespaces`PHP 的文章。但我不明白它们的用途是什么？

```
<?php
namespace MyProject {
    // Regular PHP code goes here, anything goes!
    function run()
    {
        echo 'Running from a namespace!';
    }
} 
```

我还阅读了有关它的 PHP.net 手册，但不太明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:10:38.653

我也度过了一段艰难的时光，只是把它看作是帮助编译器解析名称的一种方式。所以没有歧义。

您可以让两个开发人员编写完全不同的类但具有相同的类型标识符。类名可以相同。命名空间中的分组有助于编译器/解释器消除歧义。

所以`namespace Developer1.CoolClass`与`namespace Developer2.CoolClass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:12:26.080

在 PHP 世界中，命名空间旨在解决库和应用程序的作者在创建可重用代码元素（如类或函数）时遇到的两个问题：

您创建的代码与内部 PHP 类/函数/常量或第三方类/函数/常量之间的名称冲突。能够为 Extra_Long_Names 起别名（或缩短）旨在缓解第一个问题，提高源代码的可读性。

PHP 命名空间提供了一种对相关类、接口、函数和常量进行分组的方法。

[检查这里了解详情](http://php.net/manual/en/language.namespaces.php)

![在此处输入图像描述](../Images/d441c89db4d0deb9ea72512bde220a7d.png)

命名空间是一种将相关类分组到包中的方法。您可以将命名空间假设为保存文件的文件夹，这样两者都可以拥有同名但不同（或相同）的文件，而不会产生任何歧义。

**文件1.php**

```
<?php
namespace Foo\Bar\subnamespace;

const FOO = 1;
function foo() {}
class foo
{
    static function staticmethod() {}
}
?> 
```

**文件2.php**

```
<?php
namespace Foo\Bar;
include 'file1.php';

const FOO = 2;
function foo() {}
class foo
{
    static function staticmethod() {}
}

/* Unqualified name */
foo(); // resolves to function Foo\Bar\foo
foo::staticmethod(); // resolves to class Foo\Bar\foo, method staticmethod
echo FOO; // resolves to constant Foo\Bar\FOO

/* Qualified name */
subnamespace\foo(); // resolves to function Foo\Bar\subnamespace\foo
subnamespace\foo::staticmethod(); // resolves to class Foo\Bar\subnamespace\foo,
                                  // method staticmethod
echo subnamespace\FOO; // resolves to constant Foo\Bar\subnamespace\FOO

/* Fully qualified name */
\Foo\Bar\foo(); // resolves to function Foo\Bar\foo
\Foo\Bar\foo::staticmethod(); // resolves to class Foo\Bar\foo, method staticmethod
echo \Foo\Bar\FOO; // resolves to constant Foo\Bar\FOO
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:09:48.140

命名空间用于隔离函数和类声明，以使库和“帮助程序”（包含函数的文件）更具可移植性。通过将库放在名称空间中，您可以减少您的类名与可能想要使用您的库的作者可能想要调用他们的类的名称发生冲突的机会。例如，您可以拥有多个名为“user”的类，如果他们'重新在单独的命名空间中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:10:58.173

考虑您编写自己的课程，我们称之为`Foo`。其他人也编写了项目的一部分，他也调用了他的一个类`Foo`。

命名空间解决了这个问题。

例子：

```
Namespace MyClasses;

Class Foo
{
}

NameSpace HisClasses;

Class Foo
{
}

$myfoo = new MyClasses\Foo();
$hisfoo = new HisClasses\Foo(); 
```

# php - 通过帖子传递数组的正确方法？

> ID：12679435
> 
> 赞同：3
> 
> 时间：2012-10-01T19:07:46.573
> 
> 标签：php, arrays, post, serialization

我有两页：

*   图形.php
*   列表.php

Graph 页面完全按照它的名字命名，绘制数据。如果没有发布/获取数据，它会显示给定表中的所有数据。

List 页面是一个巨大的表格，其中加载了大约 500-600 行数据。在表格中，您可以使用 JavaScript 对行进行排序和过滤。该表大约有 14 列宽。

在列表页面中对行进行排序后，您可以按下“图表”按钮，该按钮将获取可见行并在图表页面上绘制它们。

我遇到的问题是将这些 ID 传递到图形页面。我开始：

```
<?php
if(isset($_POST['data']))
{
    echo "FOUND SERIALIZED ARRAY<br>";
    $afterSerializeArray = unserialize($_POST['data']);
    print_r($afterSerializeArray);
}
    $beforeSerializeArray = array();
    $beforeSerializeArray[] = 1;
    $beforeSerializeArray[] = 2;
    $beforeSerializeArray[] = 3;
    $serializeArray = serialize($beforeSerializeArray);
?>
<form action="" method="post">
<input type="hidden" name="data" value="<?php echo $serializeArray; ?>"/>
<input type="submit" value="Serialize"/>
</form> 
```

我编写了一个小片段来获取可见行的 ID 并将它们加载到一个数组中，对其进行序列化并将其泵入一个变量以将其发布到图表中。

我应该使用 GET 吗？我应该以不同的方式这样做吗？

我希望在与图表不同的页面上进行过滤和排序的原因是因为用户有很多列和选项来过滤和排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:00:15.317

与其尝试通过 post 发送数组，不如将这些 id 与任何特殊字符（例如“，”）连接起来。这样，您将在 $_POST['data'] 中以逗号分隔值的形式获取所有 ID。现在您可以使用 PHP 的explode 函数来获取数组中的所有值并根据需要使用它们。

此代码示例可能会对您有所帮助

```
<?php
if(isset($_POST['data']))
{
    echo "FOUND Ids<br>";
    $IdArray = explode(',',$_POST['data']);
    print_r($IdArray );
}
    $idarray = array('1','2','3');
    $ids = implode(',',$idarray);
    ?>
<form action="" method="post">
<input type="hidden" name="data" value="<?php echo $ids;?>"/>
<input type="submit" value="Serialize"/>
</form> 
```

# ios - iOS 应用程序在其捆绑包中是否具有写入权限？

> ID：12679448
> 
> 赞同：15
> 
> 时间：2012-10-01T19:08:40.907
> 
> 标签：ios

我将一些运行时生成的文件保存在我的 iOS 应用程序的 .app 包中。在模拟器中它工作正常，在设备中它崩溃：

> 可以在给定的着色器缓存路径'/var/mobile/Applications/CB064997-B40E-4FE3-9834-B3217CE33489/SimedTest.app/Ogre3D/assets/RTShaderLib/cache/中创建输出文件

是否有一个很好的概述我应该和不应该把文件放在哪里 - 如何使用 Documents、Library 和 tmp 等？

为了澄清，这些是在启动时创建的文件，它们预先计算一些数据以节省时间。如果它们不存在，它们会被创建，所以它们被删除很好，但在应用程序运行时不会。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-01T19:14:04.987

该捆绑包是只读的。你不想弄乱它有两个原因：

*   代码签名：签名通过捆绑包的内容进行验证；如果你把包弄乱了，你就会破坏签名。
*   应用程序更新：通过用新下载的应用程序包替换整个应用程序包来进行更新；您所做的任何更改都会丢失。

你应该在哪里保存东西：

*   文档：如果您希望它保留并备份
*   库/缓存：如果您只想缓存下载的数据，例如个人资料图片；如果空间不足，系统将自动删除，除非您使用特殊的不删除标志指定。
*   tmp：临时文件，在您的应用未运行时删除

有关完整说明，请查看[文件系统编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)和[QA1719](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T19:10:43.540

不，每次您更改捆绑包时，都会使您的签名无效。

如果要写入文件，则需要根据要对该文件执行的操作将其写入最佳文件夹。

1.  用于长期文件的 Documents 文件夹
2.  小型操作的缓存
3.  等等

**编辑**

要获得`path`你需要这样的东西：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"filename.ext"]; 
```

有了这个`path`，你可以这样写或读：

写：

```
NSString *content = @"One\nTwo\nThree\nFour\nFive";
[content writeToFile:fileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil]; 
```

读：

```
NSString *content = [[NSString alloc] initWithContentsOfFile:fileName usedEncoding:nil error:nil]; 
```

# java - SWT - 灰显并禁用当前外壳

> ID：12679450
> 
> 赞同：2
> 
> 时间：2012-10-01T19:08:45.410
> 
> 标签：java, swt

当我在后台运行一个操作时，我将光标设置为忙，直到该过程完成。有没有办法让当前的 Display/Dialog/Shell 变灰并禁用，直到该过程完成。我想直观地让用户知道某些东西正在工作，他们必须等待。

**编辑**

```
plotButton.addListener(SWT.Selection, new Listener() {
      public void handleEvent(Event arg0) {
         getShell().setEnabled(!getShell().getEnabled());
         getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_WAIT));    
         recursiveSetEnabled(getShell(), getShell().getEnabled());
         startPrinterListOperation(); <== This is method that runs operation
      }
  }); 
```

运行打印机操作的方法。

```
private void startPrinterListOperation() {
  listOp = new AplotPrinterListOperation(appReg.getString("aplot.message.GETPRINTERLIST"), session);
  listOp.addOperationListener(new MyOperationListener(this) {
     public void endOperationImpl() {
        try {
           printers.clear();
           printers.addAll((ArrayList<PrinterProfile>) listOp.getPrinters());
           Display.getDefault().asyncExec(new Runnable() {
              public void run() {
                showAplotPlotterDialog(); <== When operation returns - opens selection dialog
              }
           });
        }
        finally {

           listOp.removeOperationListener(this);
           listOp = null;
        }
     }
  });
  session.queueOperation(listOp);
} // end startPrinterListOperation() 
```

showAplotPlotterDialog()（单独的类）打开一个与网络打印机的对话框，然后按下按钮将作业发送到选定的打印机。当该操作完成时，绘图仪对话框关闭 - 这是该方法的结束 - baseDialog 是主 GUI

```
finally {
           plotOp.removeOperationListener(this);
           plotOp = null;
           Display.getDefault().asyncExec(new Runnable() {
              public void run() {
                baseDialog.removeAllTableRows();
                baseDialog.plotRequestCompleted = true;
                baseDialog.setResultsButtonVisibility();
                getShell().close();

              }
           });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:31:43.470

以下应该做你想要的。它将递归地禁用并灰显`Control`您的`Shell`. `Shell`本身没有方法，`setGrayed`但这会起作用：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Button");

    button.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            shell.setEnabled(!shell.getEnabled());
            shell.setCursor(new Cursor(display, SWT.CURSOR_WAIT));      
            recursiveSetEnabled(shell, shell.getEnabled());
        }
    });

    new Text(shell, SWT.NONE).setText("TEXT");

    shell.setSize(400, 400);
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

private static void recursiveSetEnabled(Control control, boolean enabled) {
    if (control instanceof Composite)
    {
        Composite comp = (Composite) control;

        for (Control c : comp.getChildren())
            recursiveSetEnabled(c, enabled);
    }
    else
    {
        control.setEnabled(enabled);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:58:05.550

采用

```
BusyIndicator.showWhile(Display.getDefault(), new Runnable()
{

    public void run()
    {
        //operation
    }
}); 
```

`Shell`它在当前的所有s ( `Window`, `Dialog`, ...)上设置忙光标，`Display`直到`Runnable.run()`执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T09:57:50.900

`Combo`Baz 的回答对我来说是一个很好的开始，但由于它扩展而没有采取行动`Composite`。通过`setEnabled`无条件调用，每个`Control`（包括`Combo`）都被正确启用/禁用。

```
private static void recursiveSetEnabled(Control control, boolean enabled) {
    if (control instanceof Composite)
    {
        Composite comp = (Composite) control;

        for (Control c : comp.getChildren())
            recursiveSetEnabled(c, enabled);
    }

    control.setEnabled(enabled);
} 
```

# c++ - 用于数组的c ++类构造函数

> ID：12679458
> 
> 赞同：6
> 
> 时间：2012-10-01T19:09:01.977
> 
> 标签：c++, arrays, class

我正在写一`Matrix2D`堂课。一开始我使用构造函数如下，

**我的代码：**

```
Matrix2D(float a,float b, float c,float d)
{
    a_=a;
    ....
} 
```

但是，我刚刚意识到如果我可以使用 multi Dimension 会好很多`array [2][2]`。这就是问题所在，如何为数组编写构造函数？

```
class Matrix
{
    float matrix[2][2];
    public:
    Matrix2D(float a,float b,float c, float d)
    {
        matrix[2][2]={a,b,c,d} // not valid
    }
} 
```

只是为了让您知道，我不要求提供完整的代码。我只需要有人让我走上正轨。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:21:25.447

对于**C++11**，您可以执行以下操作：

```
Matrix(float a,float b,float c, float d) :
   matrix{{a,b},{c,d}}
{
} 
```

**C++03**没有干净的替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:11:02.813

```
matrix[0][0] = a; // initialize one element 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:29:07.757

matrix[0][0] = 你想要的值矩阵 [n][n] = 你想要的值，但在循环中计数，因此矩阵的大小可以是动态的，或者您可以稍后重用您的代码。

```
for(int ii(0); ii < first dimension size; ++ii)
{
   for(int ll(0); ii < second dimension size; ++ll)
   {
     matrix[ii][ll] = value you want;
   }
} 
```

这将使您的代码在此应用程序之外更具可扩展性和更有用，也许它没有用，或者它可能是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:15:18.123

如果它将是一个 2X2 矩阵，那么您可以传递一个浮点数组，然后循环遍历它。

例如

```
for(int x = 0;x<4;x++)
{
    matrix[0][x] = myarray[x];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T19:27:39.063

如果您有 C++11 编译器，则 Luchian 的版本是最好的。这是适用于所有 C++ 版本的一个：

```
struct matrix_holder { float matrix[2][2]; };

class Matrix : matrix_holder
{
    static matrix_holder pack(float a,float b,float c, float d)
    {
        matrix_holder h = { {{a, b}, {c, d}} };
        return h;
    }

public:
    Matrix(float a,float b,float c, float d) : matrix_holder(pack(a,b,c,d))
    {
    }
}; 
```

优化器将内联帮助器。

# c# - 富文本框中的 URL 上的右键单击事件

> ID：12679459
> 
> 赞同：0
> 
> 时间：2012-10-01T19:09:07.460
> 
> 标签：c#, url, richtextbox

我在 C# 的富文本框中有一个链接。当我在一个 url 链接上时，我想显示一个菜单。如果它不是 url，那么我不想显示任何内容。现在我正在点击鼠标按下事件并根据鼠标指针位置选择行，如果所选行是有效的 url，我会显示菜单。它工作得很好，但是当我在 url 旁边有一些文本时，仍然将该行检测为有效 url 并出现菜单。此外，我也无法点击鼠标更改事件。关于如何完成我想做的事情的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:42:24.973

不确定这是否是您正在寻找的，但我相信您会找到比这更好的

您可以在调用 MouseDown 时尝试此操作

```
private void richTextBox1_MouseDown(object sender, MouseEventArgs e)
{
    // Continue if the Right mouse button was clicked
    if (e.Button == MouseButtons.Right)
    {
        // Check if the selected item starts with http://
        if (richTextBox1.SelectedText.IndexOf("http://") > -1)
        {
            // Avoid popping the menu if the value contains spaces
            if (richTextBox1.SelectedText.Contains(' '))
            {
               // Show the menu
               contextMenuStrip1.Show(Cursor.Position.X, Cursor.Position.Y);
            }
        }   
    }
} 
```

或者当单击链接时，但这不适用于鼠标右键单击

```
private void richTextBox1_LinkClicked(object sender, LinkClickedEventArgs e)
{
     contextMenuStrip1.Show(Cursor.Position.X, Cursor.Position.Y);
} 
```

谢谢，

我希望这有帮助 ：）

# mysql - Mysql在循环中按变量递增

> ID：12679462
> 
> 赞同：1
> 
> 时间：2012-10-01T19:09:16.580
> 
> 标签：mysql, variables, loops, increment

我正在尝试使用一个简单的 MySQL 查询来更新我的表的位置。假设我有一个带有 ID、writer_id 和 position 字段的 book 表。

我希望能够从 1 ... x 获得职位，但每个 writer_id。如果我删除一条记录，我的位置就会有间隙，所以这就是为什么我想要一个简单的查询来重置所有位置而没有间隙。

目前我有以下代码（有效），但我认为这应该更容易（并且可能更快）。

```
set @position := 0;
set @lastDependency := 0;
set @previousDependency := -1;

UPDATE `book` SET 
`writer_id`=(@lastDependency:=`writer_id`), -- Set writer_id of current row
position=( 
   IF (
       NOT @lastDependency=@previousDependency,
           @position:=1,            -- New writer_id => set position to 1
           @position:=@position+1   -- Same writer id, increment position
   )
), 
`writer_id`=(@previousDependency:=`writer_id`) -- Set writer_id of last used row 
ORDER BY `writer_id`, position ASC -- Order by current positions 
```

我也可以使用 PHP 循环遍历我的所有记录并一一保存，但我想这不会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:10:26.827

为什么不使用具有以下功能的触发器：

“当一行被删除时，将比已删除行大的evere writer_id减少一个”

或者用伪代码说：

```
create trigger for delete...
    update book 
    set writer_id = writer_id - 1 
    where writer_id > deleted.writer_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:31:30.807

让我向您引用[MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。

因此，您尝试做事的方式*可能会*奏效，但绝对不能保证。因此，我建议您在 PHP 而不是 MySQL 中执行此操作。或者您使用[存储过程](http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html)在 MySQL 中执行此操作。

# qt - 在 qwidget 中运行外部应用程序

> ID：12679464
> 
> 赞同：1
> 
> 时间：2012-10-01T19:09:25.693
> 
> 标签：qt, qt4

我们如何在 QWidget 中嵌入外部应用程序？

我使用 QX11EmbedContainer 尝试过相同的操作，但收到错误“XEvent has not been declared”。

我试过下面提到的代码（'this'代表一个qwidget类引用）

```
 QX11EmbedContainer * container = new QX11EmbedContainer(this);
     container->show();

     QProcess * process = new QProcess(container);
     QString executable("\"C:\\Program Files\\Windows Media Player\\wmplayer.exe\"");

     process->start(executable);

     this->show(); 
```

我正在尝试将容器对象添加到我想在其中运行一些外部应用程序（Application1）的 tabwidget 对象的当前选项卡中。这是我的代码

```
 QTabWidget *tabWidget = new QTabWidget;

     /* Trying to add external appllication to a tab of tabwidget object */
     QX11EmbedContainer * container = new QX11EmbedContainer(tabWidget->currentWidget());
     container->show();

     QProcess * process = new QProcess(container);
     QString executable("/home/abhishek/practice/Applicaion1");

     process->start(executable); 
```

Application1 被执行但在一个单独的窗口中但我希望它在我的选项卡中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:41:55.430

`QX11EmbedContainer`仅适用于 X11（例如，在 Linux 上）。从外观上看，您正在尝试在 Windows 上执行此操作。

I'm not very familiar with using Qt on Windows, but it looks like the equivalent functionality is provided by the [ActiveQt](http://doc.qt.digia.com/4.5/activeqt.html) module. You might be able to accomplish something like this within that framework.

# visual-studio-2010 - 如何在 Visual Studio 负载测试中关闭请求缓存

> ID：12679470
> 
> 赞同：3
> 
> 时间：2012-10-01T19:09:44.623
> 
> 标签：visual-studio-2010, load-testing

运行负载测试后，在结果数据中，它显示缓存的请求在整个测试期间不断累积，并随着时间的推移而增加。

在我的网络测试中，每个 URL 都关闭了缓存控制设置，这应该意味着不缓存。

此外，在我的负载测试场景设置中，我将“新用户百分比”设置设置为 100，这意味着每个用户都应该被视为新用户，而不是使用缓存。

有了这些设置，为什么在整个负载测试过程中，测试结果仍然显示缓存请求的数量不断增加？

我附上了缓存请求的负载测试结果图的图像以进行澄清。

![缓存请求的负载测试结果图](../Images/0542d861dca9822671b88a5e791716d3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:40:55.100

如您所知，每个请求都有一个名为“Cache Control”的属性。当 Web 测试中请求的 Cache Control 属性为 false 时，始终发出请求。当 Cache Control 属性为 true 时，VSTS 负载测试运行时代码会尝试模拟浏览器缓存行为。

但是，对于所有相关请求（图像、样式表、javascript...），缓存控制属性会自动设置为 true。

在负载测试中，为负载测试中运行的每个用户分别模拟浏览器缓存行为。但是如果“新用户百分比”设置为 100，则缓存将在虚拟用户会话期间使用。如果您的 Web 测试包含许多页面，则将使用缓存。

从 VSTS 2008 开始，您现在可以编写一个 WebTestPlugin 来禁用所有相关请求的缓存。

***注意：***当单独运行 Web 测试时，所有相关请求的 Cache Control 属性自动设置为 false，因此它们总是被获取：这允许您在浏览器中查看 html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-25T15:19:24.850

感谢[这个博客](https://msdn.microsoft.com/en-us/library/ms243191.aspx)，我创建了以下课程。

```
using System.ComponentModel;
using Microsoft.VisualStudio.TestTools.WebTesting;

namespace QuranX.Web.LoadTest.WebTestPlugins
{
    [DisplayName("Enable browser caching")]
    public class EnableBrowserCachingPlugin : WebTestPlugin
    {
        [DisplayName("Allow caching")]
        [Description("If True then server responses will be cached")]
        public bool AllowCaching { get; set; } = true;

        public override void PostRequest(object sender, PostRequestEventArgs e)
        {
            foreach (WebTestRequest dependentRequest in e.Request.DependentRequests)
            {
                dependentRequest.Cache = AllowCaching;
            }
        }
    }
} 
```

然后说明显示如何安装插件。

1.  构建应用程序
2.  打开 WebTest 文件
3.  在图标中单击“添加 Web 测试插件”
4.  将“启用浏览器缓存”属性设置为 false

# sql - Active Record 查询中基于时间的优先级

> ID：12679474
> 
> 赞同：2
> 
> 时间：2012-10-01T19:09:47.720
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我有一个包含工作列表的表，显示时通常按 created_at 字段降序排列。我正在添加一个“特色”布尔标志，这将增加客户对其工作列表的更多可见性的能力。如果工作不到 X 天，我希望将精选列表固定在搜索结果的顶部。我将如何通过现有查询进行修改以支持这一点？

```
Jobs.where("expiration_date >= ? and published = ?", Date.today, true).order("created_at DESC") 
```

当前查询拉回所有当前已发布的作业，按 created_at 排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:23:32.620

与其他一些数据库（如 Oracle）不同，PostgreSQL 具有全功能[**`boolean`**](http://www.postgresql.org/docs/current/interactive/datatype-boolean.html)类型。您可以在不应用语句的情况下*直接*在`ORDER BY`子句中使用它`CASE`- 这对于更复杂的情况非常有用。

值的排序顺序为`boolean`：

```
FALSE -> TRUE -> NULL 
```

如果您`ORDER BY bool_expression`**`DESC`**，则将顺序反转为：

```
NULL -> TRUE -> FALSE 
```

如果您想要`TRUE`第一个和`NULL`最后一个，请使用以下[**`NULLS LAST`**子句`ORDER BY`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-ORDERBY)：

```
ORDER BY (featured AND created_at > now() - interval '11 days') DESC NULLS LAST  
       , created_at DESC 
```

当然，`NULLS LAST`只有当`featured`或`created_at` *可以*是相关的`NULL`。如果列已定义`NOT NULL`，则不要打扰。

此外，`FALSE`将在`NULL`. 如果你不想区分这两者，你要么回到一个[`CASE`](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-CASE)语句，要么你可以抛出[`NULLIF()`](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-NULLIF)or [`COALESCE()`](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)。

```
ORDER BY NULLIF(featured AND created_at > now() - interval '11 days'), FALSE)
                                                                DESC NULLS LAST
       , created_at DESC 
```

### 表现

注意，我是如何使用的：

```
created_at > now() - interval '11 days' 
```

而*不是*：

```
now() - created_at < interval '11 days' 
```

在第一个例子中，右边的表达式是一个计算*一次*的常数。然后可以使用索引来查找匹配的行。非常有效率。

后者通常不能与索引一起使用。必须为每一行计算一个值，然后才能根据右侧的常量表达式检查它。如果可以避免，请不要这样做。曾经！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:36:36.647

不知道你想在这里实现什么。

我猜你会对结果进行分页。如果是这样，并且您希望始终在顶部显示特色作业，而不管页面如何，那么您应该分别从数据库中提取它们。如果您只想在第一页上显示它们，请按`published`如下方式排序：

```
Jobs.where("expiration_date >= ?", Date.today).order("published DESC, created_at DESC") 
```

如果你想单独拉它们：

```
@featured_jobs = Jobs.where("expiration_date >= ? and published = ?", Date.today, true).order("created_at DESC")
@regular_jobs = Jobs.where("expiration_date >= ? AND published = ?", Date.today, false).order("created_at DESC") #Paginate them too ... depends on the gem you're using 
```

# java - 数组元素：Java 中的数组名

> ID：12679477
> 
> 赞同：2
> 
> 时间：2012-10-01T19:10:21.327
> 
> 标签：java, arrays, integer, foreach

下面是一个示例程序，来自一些关于如何在 Java中使用**for循环的注释。**我不明白这条线是如何`element:arrayname`工作的。有人可以简要解释一下，或者提供一个链接到一个页面吗？

```
public class foreachloop {
    public static void main (String [] args) {
        int [] smallprimes= new int [3]; 
        smallprimes[0]=2;
        smallprimes[1]=3;
        smallprimes[2]=5;

        // for each loop
        for (int element:smallprimes) {
            System.out.println("smallprimes="+element);   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:12:43.977

这是另一种说法：`for each element in the array smallprimes.`

相当于

```
for (int i=0; i< smallprimes.length; i++)
{
     int element=smallprimes[i];
     System.out.println("smallprimes="+element);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:12:10.053

这就是所谓的*增强 for 语句*。它迭代，`smallprimes`然后将每个元素分配给变量`element`。

有关详细信息，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:14:30.777

```
for(declaration : expression) 
```

for 语句的两个部分是：

**声明**新声明的块变量，其类型与您正在访问的数组元素兼容。此变量将在 for 块中可用，其值将与当前数组元素相同。 **表达式**这必须计算为您要循环遍历的数组。这可以是数组变量或返回数组的方法调用。数组可以是任何类型：基元、对象，甚至是数组数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:14:40.773

那不是构造函数。`for (int i : smallPrimes)`声明一个`int i`变量，范围在`for`循环中。

该`i`变量在每次迭代开始时使用数组中的值进行更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T19:15:44.063

由于您的代码片段中没有构造函数，因此您似乎对术语感到困惑。

There is public static method `main()` here. This method is an entry point to any java program. It is called by JVM on startup.

The first line creates 3 elements `int` array `smallprimes`. This actually allocates memory for 3 sequential int values. Then you put values to those array elements. Then you iterate over the array using `for` *operator* (not function!) and print the array elements.

# php - PHP 运算符 - 如果等于一个范围，则使字符串为真

> ID：12679489
> 
> 赞同：1
> 
> 时间：2012-10-01T19:11:26.783
> 
> 标签：php, operators

我对 Python 有很好的掌握，我认为这对我有帮助，但我想我还没有程序员的思维定势 :)

我正在调整一个对 MSSQL Server 进行检查的现有 PHP 脚本。我们的脚本运行查询并将结果与​​预期结果进行比较。这是脚本的一部分：

```
 if ($query_result == $expected_result) { 
```

我需要对此进行修改，以便如果 query_result 在 expected_result 的 +1 或 -1 范围内，则返回 true。也许像这样？：

```
 if ($query_result <=> $expected_result -+ 1) { 
```

我不知道如何正确地写这个：P 非常感谢所有帮助！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:12:17.797

```
if (abs($query_result - $expected_result) <= 1) {
   ... they're within "1" of each other
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-01T19:17:33.900

```
if (($expected_result -1) <= $query_result <= ($expected_result + 1)) {

} 
```

# sql - 使用随机数将 id 插入表中

> ID：12679490
> 
> 赞同：0
> 
> 时间：2012-10-01T19:11:29.140
> 
> 标签：sql, oracle, random

我需要编写一个执行合并插入/更新的视图。插入时，我需要插入`id`. 这`id`也被另一个程序中的随机数生成器插入（我无法更改）。

我想做`max(id) + 1`，但不确定这是否是个好主意。您能否为这个问题提出任何更好的解决方案？

或者

如何使用 with id as ( dbms_random .... ) 做一个

```
select * from table where id = ? 
```

如果未找到行，我将插入此 ID，否则，我将生成另一个随机数并进行选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:20:51.753

如果这是用于主键 - 那么如何为您的应用程序部分生成负数（使用序列）并将随机数魔法留在正数中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:18:01.147

您可以将 rand() 函数用于您的随机数请求！

享受，

受托人

# mailchimp - 将营销活动发送到细分市场

> ID：12679506
> 
> 赞同：3
> 
> 时间：2012-10-01T19:12:39.263
> 
> 标签：mailchimp

任何人都知道如何让一个活动发送到一个细分市场？此代码不起作用。它将向竞选活动中的所有人发送一封电子邮件。它不会使用该段。（这是更多的文本，所以我可以让它通过 SO 的验证。）

我的代码：

```
 //get member list
    $memberArray = $api->listMembers($inStockListId);
    foreach ($memberArray['data'] as $member) {
        $memberInfo = $api->listMemberInfo($inStockListId, $member['email']);
        $_productId = $memberInfo['data'][0]['merges']['PRODUCTID'];

$productId='34';
        if ($productId == $_productId) {
            array_push($emailArray, $member['email']);
        }
    }

    //create new segment for campaign
    $listStaticSegmentId = $api->listStaticSegmentAdd($inStockListId, 'inStockStaticSegment');

    //add members to segment
    $val = $api->listStaticSegmentMembersAdd($inStockListId, $listStaticSegmentId, $emailArray);

    $conditions = array();
    $conditions[] = array(
        'field' => 'email',
        'op'    => 'like',
        'value' => '%'
    );
    $segment_options = array(
        'match'      => 'all',
        'conditions' => $conditions
    );

    $type    = 'regular';
    $options = array(
        'template_id' => $campaignTemplateId,
        'list_id'     => $inStockListId,
        'subject'     => 'In-Stock Notification',
        'from_email'  => 'from@email.com',
        'from_name'   => 'My From Name'
    );
    $content = array(
        'html_main'       => 'some pretty html content',
        'html_sidecolumn' => 'this goes in a side column',
        'html_header'     => 'this gets placed in the header',
        'html_footer'     => 'the footer with an *|UNSUB|* message',
        'text'            => 'text content text content *|UNSUB|*'
    );

    $newCampaignId = $api->campaignCreate($type, $options, $content, $segment_options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:31:08.713

我想到了。本质上，这是流程。如果您需要详细的代码，请给我发消息，我很乐意提供帮助。

```
$api = new MCAPI($this->_apiKey);
$api->listMemberInfo($this->_listId, $member['email']);
$api->listUpdateMember($this->_listId, $member['email'], $mergeVars);
$api->listStaticSegmentDel($this->_listId, $segment['id']);
$api->listStaticSegmentAdd($this->_listId, $segmentName);
$api->listStaticSegmentMembersAdd($this->_listId, $segmentId, $emailArray);
$api->campaignCreate($type, $options, $content, $segment_options);
//$api->campaignSendTest($newCampaignId, array($member['email']));
$api->campaignSendNow($newCampaignId); 
```

请注意，这是通过 MailChimp PHP API 完成的。

# c# - 如何在 BeforeCheckNode 事件中获取单元格的前景色

> ID：12679514
> 
> 赞同：0
> 
> 时间：2012-10-01T19:13:10.980
> 
> 标签：c#, devexpress, xtratreelist

我需要根据 BeforeCheckNode 事件中节点的 ForeColor 将 CanCheck 设置为 true 或 false。如何在 BeforeCheckNode 事件中获取 e.Node 的前景色？

```
private void _tree_BeforeCheckNode(object sender, DevExpress.XtraTreeList.CheckNodeEventArgs e)
    {

        int index = _tree.GetNodeIndex(e.Node);
        RowInfo ri = _tree.ViewInfo.RowsInfo.Rows[index] as RowInfo;
        CellInfo cell = (CellInfo)ri.Cells[0];
        if (cell.PaintAppearance.ForeColor == Color.LightGray)
            e.CanCheck = false;
    } 
```

但是这里的索引是相对于父级的。因此，如果我有多个带有子节点的父节点，则 RowInfo 会出错。如果我使用可见索引，它对 RowInfo 不起作用，因为它超出了范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:04:32.873

```
 if ((_tree.ViewInfo.RowsInfo[e.Node].Cells[0] as CellInfo).PaintAppearance.ForeColor == Color.LightGray)
            e.CanCheck = false; 
```

解决了我的问题。

# winapi - Win32-从另一个应用程序获取 ListView 控件内容

> ID：12679518
> 
> 赞同：0
> 
> 时间：2012-10-01T19:13:37.287
> 
> 标签：winapi, win32-process

我正在尝试访问另一个应用程序中的 ListView 控件（位于对话框中），并从控件中获取数据。这是我正在编写的 Win32 代码（带有适当的注释）：

```
 HWND hListView32 = hRoot;   //HANDLE to the ListView control within the Dialog, having class name - "SysListView32"
        int cnt = (int) ::SendMessage(hListView32, LVM_GETITEMCOUNT, 0, 0L); //returns CORRECT item count of the ListView Control
        int nItem=0,nRes;

        for(int nItem=0;nItem<cnt;nItem++)
        {
            LVITEM LvItem;  // ListView Item struct
              char Text[255]={0};  
              char Temp[255]={0};
              char Temp1[255]={0};

                memset(&LvItem,0,sizeof(LvItem));
          LvItem.mask=LVIF_TEXT;
              LvItem.iSubItem=1;    //Trying to get the 2nd Colomn text

              LvItem.pszText=Text;  //Does not returns any Text, after the below SendMessage is executed???

              LvItem.cchTextMax=256;
              LvItem.iItem=nItem;
              nRes  = (int)::SendMessage(hListView32,LVM_GETITEMTEXT, nItem, (LPARAM)&LvItem);
              DWORD dd = ::GetLastError();  //returns 0
        } 
```

虽然代码正在执行，但我没有从控件中获取任何数据。但是，我能够从控件中检索正确的项目计数，但没有数据。

另一种方法可能是使用 MSAA 挂钩来获取数据。但这将是一个非常漫长和繁琐的过程。这里的想法用完了。请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:03:20.947

有几种可能。

1.  `DLL Injection`使用 windows 挂钩。优点：简单直接。缺点：许多进程都加载了这个 dll。

2.  `DLL Injection`通过打开库进行调试来加载库，`VallocEx`在该进程的上下文中分配一块虚拟内存，写入它的内存`WriteProcessMemory`并创建一个具有`LoadLibrary`函数起始地址的远程线程。优点：单个进程受到影响。缺点：比钩子解决方案复杂一点。

3.  读取进程内存。与选项 2 相同，但不是编写此内存并远程执行代码，而是将消息发送`LVM_GETITEMTEXT`到有问题的窗口，提供有效的已知内存位置，然后使用`ReadProcessMemory`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:49:29.017

传递缓冲区的 ListView 消息仅在拥有 ListView 的进程的地址空间内工作。您将不得不使用`VirtualAllocEx()`在同一个进程中分配一个内存块，然后您可以写入它`WriteProcessMemory()`并让 ListView 根据需要填充它，然后您可以读取它`ReadProcessMemory()`并使用`VirtualFreeEx()`.

试试这个（为简洁起见省略了错误处理）：

```
HWND hListView32 = hRoot;

int cnt = (int) ::SendMessage(hListView32, LVM_GETITEMCOUNT, 0, 0);
if (cnt > 0)
{
    DWORD dwProcessId;
    GetWindowThreadProcessId(hListView32, &dwProcessId);

    HANDLE hProcess = OpenProcess(PROCESS_VM_READ | PROCESS_VM_WRITE | PROCESS_VM_OPERATION, FALSE, dwProcessId);

    LVITEM *pLvItem = (LVITEM*) VirtualAllocEx(hProcess, NULL, sizeof(LVITEM), MEM_COMMIT, PAGE_READWRITE);
    LPTSTR pText = (LPTSTR) VirtualAllocEx(hProcess, NULL, sizeof(TCHAR)*256, MEM_COMMIT, PAGE_READWRITE);

    for(int nItem = 0; nItem < cnt; ++nItem) 
    { 
        TCHAR Text[256] = {0};

        LVITEM LvItem = {0}; 
        LvItem.mask = LVIF_TEXT; 
        LvItem.iSubItem = 1;
        LvItem.pszText = pText;
        LvItem.cchTextMax = 256; 
        LvItem.iItem = nItem; 

        WriteProcessMemory(hProcess, pLvItem, &LvItem, sizeof(LVITEM), NULL);

        int nRes = (int) ::SendMessage(hListView32, LVM_GETITEMTEXT, nItem, (LPARAM)pLvItem);
        if (nRes > 0)
            ReadProcessMemory(hProcess, pText, &Text[0], sizeof(TCHAR)*nRes, NULL);

        // use Text as needed...
    }

    VirtualFreeEx(hProcess, pText, 0, MEM_RELEASE);
    VirtualFreeEx(hProcess, pLvItem, 0, MEM_RELEASE);
    CloseHandle(hProcess);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T06:21:51.910

我复制了 Remy Lebeau 的代码，但在我的特殊情况下它的工作方式非常奇怪。元素的数量通过 SendMessage(listview, LVM_GETITEMCOUNT, 0, 0) 正确检索，但循环每次都读取相同的元素！它不是第一个或最后一个元素，不是被选中的，但似乎是随机的。这是我的代码：

```
HWND win=FindWindowEx(NULL, NULL, _("TEventLogView"), NULL);
HWND listview=FindWindowEx(win, NULL, _("TListView"), NULL);
int cnt = (int) ::SendMessage(listview, LVM_GETITEMCOUNT, 0, 0);
if (cnt > 0)
{
    DWORD dwProcessId;
    GetWindowThreadProcessId(listview, &dwProcessId);
    int n = grdEvents->GetNumberRows();
    HANDLE hProcess = OpenProcess(PROCESS_VM_READ | PROCESS_VM_WRITE | PROCESS_VM_OPERATION, FALSE, dwProcessId);
    LVITEM *pLvItem = (LVITEM*) VirtualAllocEx(hProcess, NULL, sizeof(LVITEM), MEM_COMMIT, PAGE_READWRITE);
    LPTSTR pText = (LPTSTR) VirtualAllocEx(hProcess, NULL, sizeof(TCHAR)*255, MEM_COMMIT, PAGE_READWRITE);
   for(int nItem = 0; nItem < cnt; ++nItem)
   {
      // need to read 1 - 3 subitems
      for (int j = 1; j < 4; j++)
      {
         TCHAR Text[255] = {0};
         LVITEM LvItem = {0};
         LvItem.mask = LVIF_STATE | LVIF_TEXT;
         LvItem.pszText = pText;
         LvItem.cchTextMax = sizeof(TCHAR)*255;
         LvItem.iItem = nItem;
         LvItem.iSubItem = j;
         int nRes1 = WriteProcessMemory(hProcess, pLvItem, &LvItem, sizeof(LVITEM), NULL);
         int nRes2 = (int) ::SendMessage(listview, LVM_GETITEMTEXT, (WPARAM)nItem, (LPARAM)pLvItem);
         if (nRes2 > 0)
         {
             ReadProcessMemory(hProcess, pText, &Text[0], sizeof(TCHAR)*nRes2, NULL);
             // insert into wxWidgets grid
             grdEvents->SetCellValue(nItem, j - 1, Text);
        }
      }
      VirtualFreeEx(hProcess, pText, 0, MEM_RELEASE);
      VirtualFreeEx(hProcess, pLvItem, 0, MEM_RELEASE);
      CloseHandle(hProcess);
   }
} 
```

# javascript - 删除转义字符

> ID：12679521
> 
> 赞同：2
> 
> 时间：2012-10-01T19:13:56.683
> 
> 标签：javascript, escaping

我正在使用一个返回 XML 字符串的 javascript 函数。但是，在 IE 中，我得到了那个嵌入了转义字符的 XML 字符串，例如双引号是 \" " 而不是 " 是否有一种简单的方法可以删除转义字符序列项？
谢谢，德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:29:21.870

在尝试解决此问题之前，您应该调查哪些其他字符正在被替换。例如，当您`\`在其他浏览器中获得单曲时，您会`\\`在 IE 中获得吗？

如果添加了标准 C 转义符，则将转换为 into 、into 、换行等`JSON.parse`序列。`\"``"``\\``\``\n`

```
'foo\\bar\nbaz"' === JSON.parse('"foo\\\\bar\\nbaz\\""') 
```

* * *

`JSON.parse`在最新的浏览器上本机支持，特别是在 IE 上，回到 IE 8。[相关的 MSDN 页面](http://msdn.microsoft.com/en-us/library/cc836466%28v=vs.94%29.aspx)说

> 支持以下文档模式：**Internet Explorer 8 标准、Internet Explorer 9 标准、Internet Explorer 10 标准**。在 Windows 应用商店应用程序中也受支持。请参阅版本信息。
> 
> 以下文档模式不支持：Quirks、Internet Explorer 6 标准、Internet Explorer 7 标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:19:31.690

一个类似的问题：[Javascript - Replacing the escape character in a string literal](https://stackoverflow.com/questions/1376440/javascript-replacing-the-escape-character-in-a-string-literal)解释了如何替换转义字符。也许您可以用空引号替换转义字符？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:20:08.060

使用 JavaScript 的[`replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)方法。

[jsFiddle](http://jsfiddle.net/GSUES/)：

```
var string1 = "This is a string with all the \\\" characters escaped";

document.write(string1);    // outputs: This is a string with all the \" characters escaped

document.write("<br />");

string1 = string1.replace("\\", "");

document.write(string1);    // outputs: This is a string with all the " characters escaped 
```

# vb.net - Linq 连接 2 个共享一列的数据表并将结果放入新数据表中

> ID：12679522
> 
> 赞同：4
> 
> 时间：2012-10-01T19:13:56.600
> 
> 标签：vb.net, linq, datatable

我有以下数据表

**表1**：

```
+-----------+------+------+
| catalogid | name | snum |
+-----------+------+------+
|       353 | xx   |    4 |
|       364 | yy   |    3 |
|       882 | zz   |    3 |
|       224 | mm   |   71 |
|       999 | kk   |  321 |
|        74 | kk   |    4 |
|        54 | ii   |    5 |
|        11 | u    |    6 |
|        23 | yy   |    6 |
+-----------+------+------+ 
```

**表2**：

```
+-----------+----------+--------------+
| catalogid | numitems | ignoreditems |
+-----------+----------+--------------+
|       353 |        4 |            0 |
|       364 |       10 |            0 |
|       882 |        2 |            0 |
|       224 |        0 |            7 |
+-----------+----------+--------------+ 
```

使用 LINQ 我想加入它们并将结果复制到新的数据表中。他们都共享`catalogid`，结果应该只显示他们的catalogid存在于table2中的记录

**结果**：

```
+-----------+------+------+-----------+---------------+
| catalogid | name | snum | numitems  | ignoreditems  |
+-----------+------+------+-----------+---------------+
|       353 | xx   |    4 |         4 |             0 |
|       364 | yy   |    3 |        10 |             0 |
|       882 | zz   |    3 |         2 |             0 |
|       224 | mm   |   71 |         0 |             7 |
+-----------+------+------+-----------+---------------+ 
```

这是我的尝试，但它不起作用：

```
 Dim query = From a In oresult.AsEnumerable
             Group Join b In products.AsEnumerable
             On a.Field(Of Integer)("catalogid") Equals b.Field(Of Integer)("catalogid")
             Into Group
 query.copytodatatable 
```

`CopyToDatatable`不工作，我不知道为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:33:12.357

`CopyToDataRow`仅适用于`IEnumerable`s `DataRow`。有关任意s的实现，请参阅[MSDN 上的这篇文章。](http://msdn.microsoft.com/en-us/library/bb669096.aspx)`CopyToDataRow``IEnumerable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:40:00.967

CopyToDataTable() 仅在您的查询返回 IEnumerable<'DataRow> 时有效。在您的查询中，您将返回一个匿名类型。匿名类型不携带 CopyToDataTable() 的扩展方法。

您可以使用下面列出的 ConvertToDataTable 扩展来创建表。您必须将其转换为 VB.NET（如果您用谷歌搜索，那里有转换器）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using Common;

namespace TestConsole
{
    public class Linq_join_2_datatables_that_share_a_column_and_put_result_in_new_datatable
    {
        public class Table1
        {
            public int CatalogId { get; set; }
            public string Name { get; set; }
            public int SNum { get; set; }
        }

        public class Table2
        {
            public int CatalogId { get; set; }
            public int NumItems { get; set; }
            public int IgnoredItems { get; set; }
        }

        public static void Start()
        {
            DataTable table1 = new DataTable();
            table1.Columns.Add("catalogid", typeof(int));
            table1.Columns.Add("name", typeof(string));
            table1.Columns.Add("snum", typeof(int));
            DataRow row = table1.Rows.Add(353, "xx", 4);

            DataTable table2 = new DataTable();
            table2.Columns.Add("catalogid", typeof(int));
            table2.Columns.Add("numitems", typeof(int));
            table2.Columns.Add("ignoreditems", typeof(int));
            table2.Rows.Add(353, 4, 0);

            var query = (from t1 in table1.AsEnumerable()
                        join t2 in table2.AsEnumerable() on t1.Field<int>("catalogid") equals t2.Field<int>("catalogid")
                        select new
                        {
                            catalogid = t1.Field<int>("catalogid"),
                            name = t1.Field<string>("name"),
                            snum = t1.Field<int>("snum"),
                            numitems = t2.Field<int>("numitems"),
                            ignoreditems = t2.Field<int>("ignoreditems")
                        }).ToList();

            DataTable table3 = query.ConvertToDataTable();      
        }
    }    
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.ComponentModel;
using System.Reflection;

namespace Common
{
    public static class DataTableExtensions
    {
        public static DataTable ConvertToDataTable<T>(this IList<T> data)
        {
            PropertyDescriptorCollection properties =
                TypeDescriptor.GetProperties(typeof(T));
            DataTable table = new DataTable();
            foreach (PropertyDescriptor prop in properties)
                table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType);
            foreach (T item in data)
            {
                DataRow row = table.NewRow();
                foreach (PropertyDescriptor prop in properties)
                    row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
                table.Rows.Add(row);
            }
            table.AcceptChanges();
            return table;
        }

    }
} 
```

# javascript - 简单的cookie来保持背景设置

> ID：12679527
> 
> 赞同：1
> 
> 时间：2012-10-01T19:14:18.170
> 
> 标签：javascript, cookies, colors, background, onclick

好的，所以我已经放置了一个用户可以选择的可选页面背景的代码，但是我需要编写一个 cookie，以便即使在页面刷新后用户的首选背景颜色也保持选中状态。我已经查看了十几个教程，但我没有希望将其中任何一个实施到这种情况下。

这是代码：

```
 <script style='text/javascript' type='text/javascript'>
var backColour = new Array();

backColour[0] = &#39;#FFFFFF&#39;;
backColour[1] = &#39;#000000&#39;;

function changeBG(whichColour){
  document.body.style.backgroundColor = backColour[whichColour];
}
 </script> 
```

以及设置背景的可点击链接：

```
<a href='#' onclick='javascript:changeBG(0);'>//WHITE</a>
   <a href='#' onclick='javascript:changeBG(1);'>//BLACK</a> 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:20:36.877

您可以使用：

`document.cookie = 'mybg=' + theBGColor + ';';`写出cookie。

和

```
if(document.cookie.indexOf('mybg=') != -1) {
    mybg = document.cookie.split('mybg=')[1].split(';')[0];
} 
```

从 cookie 中读回颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:22:51.807

如果您使用 jQuery，请查看[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

# javascript - 下划线模板无法生成 TD 元素

> ID：12679529
> 
> 赞同：0
> 
> 时间：2012-10-01T19:14:23.647
> 
> 标签：javascript, jquery, templates, backbone.js, underscore.js

Underscore.js 模板有一个非常时髦的问题。在除 IE 9 之外的所有浏览器中，我使用的模板按设计生成 HTML 标记，但在 IE 9 中却没有。这是模板：

```
, manageColumnsTableTemplate: _.template(
'<td class="padss-glyphs">▣&lt;/td>' +
'<td><input type="text" size="1" data-key="<%=ID%>" name="sort" value="<%=SortOrder%>" /> <a class="up" data-key="<%=ID%>" data-sort="<%=SortOrder%>">up</a> <a class="down" data-key="<%=ID%>" data-sort="<%=SortOrder%>">down</a></td>' +
'<td><input type="checkbox" data-key="<%=ID%>" <% if(Display) {%>checked="checked" <%}%> /></td>' +
'<td><%=Value%></td>') 
```

在 FireFox、Safari 和 Chrome 中，我得到如下信息：

```
<td class="padss-glyphs">?</td>
<td><input type="text" size="1" data-key="3" name="sort" value="3"> <a class="up" data-key="3" data-sort="3">up</a> <a class="down" data-key="3" data-sort="3">down</a></td>
<td><input type="checkbox" data-key="3" checked="checked"></td>
<td>INCUMBENT</td> 
```

在 IE 9 中，我得到：

```
?
<input name="sort" value="4" size="1" type="text" data-key="3"> 
<a class="up" data-key="3" data-sort="4">up</a> 
<a class="down" data-key="3" data-sort="4">down</a>
<input CHECKED="checked" type="checkbox" data-key="3">
INCUMBENT 
```

请注意，生成了 TD 元素的内容，但缺少 TD 开始和结束标记。我们使用 jQuery 选择器来获取 TR 中最后一个 TD 的文本。

这是涉及的JavaScript：

```
for (i = 0; i < sortArray.length; i++) {
    if (!sortArray[i].readonly) {
        html = new ColumnDisplayView({
            model: sortArray[i],
            tagName: 'tr'
        }, that).$el;
        html.attr('data-key', sortArray[i].id);
        domFragment.find('tbody').append(html);
    } else {
        //this one is readonly... make a readonly array for laterz
        that.readOnlyArray.push(sortArray[i]);
    }
} 
```

这是 ColumnDisplayView.js 文件：

```
 define([
       'modules/PadssView'
], function (PadssView) {
    return PadssView.extend({
        tagname: 'tr',
        initialize: function () {
            if (typeof this.model.toJSON !== 'undefined') {
                this.el.innerHTML = PADSS.manageColumnsTableTemplate(this.model.toJSON());
            } else {
                //not a model... coming in from the new preferences it seems
                this.model.ID = this.model.id;
                this.model.Display = this.model.visible;
                this.model.SortOrder = this.model.order;
                this.el.innerHTML = PADSS.manageColumnsTableTemplate(this.model);
            }
            return this;
        }
    });
}); 
```

这真的让我们很难过，任何帮助将不胜感激。

谢谢，

麦克风

有人建议在 ColumnDisplayView.js 中将 tagname 更改为 tagName 可以解决问题。它根本没有影响它。这是一些控制台输出：

```
>> __p 
"<td class="padss-glyphs">▣&lt;/td><td><input type="text" size="1" data-key="11" name="sort" value="3" /> <a class="up" data-key="11" data-sort="3">up</a> <a class="down" data-key="11" data-sort="3">down</a></td>
<td><input type="checkbox" data-key="11" checked="checked"  /></td>
<td>LEVEL</td>" 
```

__p 是 _.template() 返回的值，所以模板工作正常。

```
>> this.el.tagName 
"TR" 
```

el.tagName 是 TR，所以添加 _.template() 输出应该没问题。

```
>> this.el.innerHTML 
"▣&lt;input name="sort" value="3" size="1" type="text" data-key="11"> <a class="up" data-key="11" data-sort="3">up</a> <a class="down" data-key="11" data-sort="3">down</a>
<input CHECKED="checked" type="checkbox" data-key="11">
LEVEL" 
```

当 _.template() 输出分配给 el.innerHTML 时，TD 标签被剥离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:10:25.427

您应该在 ColumnDisplayView.js 中`tagname`替换为`tagName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:00:32.523

感谢一月的回复。我终于通过使用 jQuery 设置元素的内部 html 解决了这个问题。这是有效的代码。

```
define([
       'modules/PadssView'
], function (PadssView) {
    return PadssView.extend({
        tagName: 'tr',
        initialize: function () {
            var html;
            if (typeof this.model.toJSON !== 'undefined') {
                html = PADSS.manageColumnsTableTemplate(this.model.toJSON());
            } else {
                //not a model... coming in from the new preferences it seems
                this.model.ID = this.model.id;
                this.model.Display = this.model.visible;
                this.model.SortOrder = this.model.order;
                html = PADSS.manageColumnsTableTemplate(this.model);
            }

            $(this.el).html(html);

            return this;
        }
    });
}); 
```

正如我上面提到的， _.template() 工作得很好。当模板输出直接分配给 this.el.innerHTML 时，TD 元素被剥离。我不确定问题是什么，但这绕过了它。

谢谢，迈克

# sql - 查找每月间隔

> ID：12679530
> 
> 赞同：1
> 
> 时间：2012-10-01T19:14:28.280
> 
> 标签：sql, excel, excel-2007, sas, excel-formula

我的工作要求我必须从特定日期开始计算 6 到 18 个月。我有2个例子。示例 1：我的工作要求我计算来自客户的退款。这些退款一次只能是 18 个月，退款期的最后日期是信件寄给客户的日期。那么，如果退款信设定在 2012 年 8 月 28 日寄出，那么该期限的第一个日期是什么时候？另外，如果是 8 月 29 日、30 日和 31 日（2012 年 8 月 28 日 - 2012 年 8 月 31 日）。我的计算会说所有这些时间段的开始日期都是 2011 年 3 月 1 日。我使用 SAS 作为程序工具。这是我使用的功能：

```
 eighteen_months = intnx('month',Visit_date,18,'sameday')+1; 
```

我所做的主要假设是 1 个月等于第一个月的第一个日期和最后一个日期以及同一个月（2012 年 1 月 1 日至 2012 年 1 月 31 日）。随后，3 个月等于第一个月的第一个日期和第三个月的最后一个日期（2012 年 1 月 1 日至 2012 年 3 月 31 日或 2012 年 4 月 1 日至 2012 年 6 月 30 日）。以下是其他 18 个月的计算：

```
 First Date           Last Date
                10/30/1999           4/29/2001
                 5/6/2006            11/5/2007
                4/30/2012           10/29/2013
                 4/3/2018            10/2/2019
                  2/24/2024          8/23/2025
                  5/10/2026          11/9/2027 
```

这个问题发生在我最初的例子中，8 月 28 日至 31 日，其中 18 个月实际上可以是 4 个不同的时间长度。

示例 2：我的工作还要求我在第一次约会时做相反的事情，并且需要找出 6 到 18 个月的时间段。最近有人问我，如果第一个日期是 2012 年 6 月 22 日，那么 6 个月是多少个月？我回复了 2012 年 12 月 21 日，并被告知实际上是 2012 年 12 月 22 日。没有关于公司如何计算的真实文档/逻辑。这是我在 SAS 中的功能。

```
 Six_months = intnx('month',Visit_date,6,'sameday')-1; 
```

我正在尝试建立一个流程，并想看看是否有人在一致的基础上遇到这些流程，以及 Excel/SAS 中是否有更简单的方法。任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:25:11.653

要从 Excel 中的最后日期获取第一个日期，请尝试使用最后日期在 B2 中的公式

`=EDATE(B2,-18)+1`

这适用于您列出的 6 个示例，也适用于 2011 年 3 月 1 日从 2012 年 8 月 28/29/30/31 日返回

EDATE 函数，正如您可能猜到的那样，可用于从日期中添加或减去月份数，如果该日期在该月内不存在，例如 2 月 30 日，则默认为该月的最后一天

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:35:44.523

许多数据库支持该功能`add_months`或`dateadd`类似的东西（包括 Teradata）。要获得提前或推迟 18 个月的日期，您可以执行以下操作：

```
select add_months(LastDate, -18), LastDate 
```

我认为这回答了*前面*的问题。答案问题有点棘手，因为有多个日期。您可以使用以下技巧获取第一个和最后一个此类日期：

```
select add_months(FirstDate, 18) as LastDate1,
       add_months(FirstDate+1, 18) - 1 as LastDate2 
```

也就是说， add_months 返回符合未来 18 个月条件的第一天（我对此非常确定，但对 Teradata 来说不是 100% 肯定）。第二个日期是18个月前的一天后的第二天。通常它与第一次约会相同，但并非总是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:42:11.987

这是洛林和丹的蛮力方式

```
%MACRO DATES(YEAR, lib);
data post.try&lib.; set post.pact;
IF DTE_EFFECTIVE LE &year. LE DTE_END  THEN DO ELIGMONTH= &year.; FORMAT ELIGMONTH MMDDYY10.; OUTPUT post.TRY&lib.;  END;
run;
%MEND;
%DATES (YEAR='01JAN2000'D, LIB=a)
%DATES (YEAR='01FEB2000'D, LIB=b)
%DATES (YEAR='01MAR2000'D, LIB=c)
%DATES (YEAR='01APR2000'D, LIB=d)
%DATES (YEAR='01MAY2000'D, LIB=e)
%DATES (YEAR='01JUN2000'D, LIB=f)
%DATES (YEAR='01JUL2000'D, LIB=g)
%DATES (YEAR='01AUG2000'D, LIB=h)
%DATES (YEAR='01SEP2000'D, LIB=i)
%DATES (YEAR='01OCT2000'D, LIB=j)
%DATES (YEAR='01NOV2000'D, LIB=k)
%DATES (YEAR='01DEC2000'D, LIB=l)
%DATES (YEAR='01JAN2001'D, LIB=m)
%DATES (YEAR='01FEB2001'D, LIB=n)
%DATES (YEAR='01MAR2001'D, LIB=o)
%DATES (YEAR='01APR2001'D, LIB=p)
%DATES (YEAR='01MAY2001'D, LIB=q)
%DATES (YEAR='01JUN2001'D, LIB=r)
%DATES (YEAR='01JUL2001'D, LIB=s)
%DATES (YEAR='01AUG2001'D, LIB=t)
%DATES (YEAR='01SEP2001'D, LIB=u)
%DATES (YEAR='01OCT2001'D, LIB=v)
%DATES (YEAR='01NOV2001'D, LIB=w)
%DATES (YEAR='01DEC2001'D, LIB=x)
%DATES (YEAR='01JAN2002'D, LIB=y)
%DATES (YEAR='01FEB2002'D, LIB=z)
%DATES (YEAR='01MAR2002'D, LIB=aa)
%DATES (YEAR='01APR2002'D, LIB=bb)
%DATES (YEAR='01MAY2002'D, LIB=cc)
%DATES (YEAR='01JUN2002'D, LIB=dd)
%DATES (YEAR='01JUL2002'D, LIB=ee)
%DATES (YEAR='01AUG2002'D, LIB=ff)
%DATES (YEAR='01SEP2002'D, LIB=gg)
%DATES (YEAR='01OCT2002'D, LIB=hh)
%DATES (YEAR='01NOV2002'D, LIB=ii)
%DATES (YEAR='01DEC2002'D, LIB=jj)
%DATES (YEAR='01JAN2003'D, LIB=kk)
%DATES (YEAR='01FEB2003'D, LIB=ll)
%DATES (YEAR='01MAR2003'D, LIB=mm)
%DATES (YEAR='01APR2003'D, LIB=nn)
%DATES (YEAR='01MAY2003'D, LIB=oo)
%DATES (YEAR='01JUN2003'D, LIB=pp)
%DATES (YEAR='01JUL2003'D, LIB=qq)
%DATES (YEAR='01AUG2003'D, LIB=rr)
%DATES (YEAR='01SEP2003'D, LIB=ss)
%DATES (YEAR='01OCT2003'D, LIB=tt)
%DATES (YEAR='01NOV2003'D, LIB=uu)
%DATES (YEAR='01DEC2003'D, LIB=vv)
%DATES (YEAR='01JAN2004'D, LIB=ww)
%DATES (YEAR='01FEB2004'D, LIB=xx)
%DATES (YEAR='01MAR2004'D, LIB=yy)
%DATES (YEAR='01APR2004'D, LIB=zz)
%DATES (YEAR='01MAY2004'D, LIB=aa)
%DATES (YEAR='01JUN2004'D, LIB=bb)
%DATES (YEAR='01JUL2004'D, LIB=cc)
%DATES (YEAR='01AUG2004'D, LIB=dd)
%DATES (YEAR='01SEP2004'D, LIB=ee)
%DATES (YEAR='01OCT2004'D, LIB=ff)
%DATES (YEAR='01NOV2004'D, LIB=gg)
%DATES (YEAR='01DEC2004'D, LIB=hh)
%DATES (YEAR='01JAN2005'D, LIB=ii)
%DATES (YEAR='01FEB2005'D, LIB=jj)
%DATES (YEAR='01MAR2005'D, LIB=kk)
%DATES (YEAR='01APR2005'D, LIB=ll)
%DATES (YEAR='01MAY2005'D, LIB=mm)
%DATES (YEAR='01JUN2005'D, LIB=nn)
%DATES (YEAR='01JUL2005'D, LIB=oo)
%DATES (YEAR='01AUG2005'D, LIB=pp)
%DATES (YEAR='01SEP2005'D, LIB=qq)
%DATES (YEAR='01OCT2005'D, LIB=rr)
%DATES (YEAR='01NOV2005'D, LIB=ss)
%DATES (YEAR='01DEC2005'D, LIB=tt)
%DATES (YEAR='01JAN2006'D, LIB=uu)
%DATES (YEAR='01FEB2006'D, LIB=vv)
%DATES (YEAR='01MAR2006'D, LIB=ww)
%DATES (YEAR='01APR2006'D, LIB=xx)
%DATES (YEAR='01MAY2006'D, LIB=yy)
%DATES (YEAR='01JUN2006'D, LIB=zz)
%DATES (YEAR='01JUL2006'D, LIB=aaa)
%DATES (YEAR='01AUG2006'D, LIB=bbb)
%DATES (YEAR='01SEP2006'D, LIB=ccc)
%DATES (YEAR='01OCT2006'D, LIB=ddd)
%DATES (YEAR='01NOV2006'D, LIB=eee)
%DATES (YEAR='01DEC2006'D, LIB=fff)
%DATES (YEAR='01JAN2007'D, LIB=ggg)
%DATES (YEAR='01FEB2007'D, LIB=hhh)
%DATES (YEAR='01MAR2007'D, LIB=iii)
%DATES (YEAR='01APR2007'D, LIB=jjj)
%DATES (YEAR='01MAY2007'D, LIB=kkk)
%DATES (YEAR='01JUN2007'D, LIB=lll)
%DATES (YEAR='01JUL2007'D, LIB=mmm)
%DATES (YEAR='01AUG2007'D, LIB=nnn)
%DATES (YEAR='01SEP2007'D, LIB=ooo)
%DATES (YEAR='01OCT2007'D, LIB=ppp)
%DATES (YEAR='01NOV2007'D, LIB=qqq)
%DATES (YEAR='01DEC2007'D, LIB=rrr)
%DATES (YEAR='01JAN2008'D, LIB=sss)
%DATES (YEAR='01FEB2008'D, LIB=ttt)
%DATES (YEAR='01MAR2008'D, LIB=uuu)
%DATES (YEAR='01APR2008'D, LIB=vvv)
%DATES (YEAR='01MAY2008'D, LIB=www)
%DATES (YEAR='01JUN2008'D, LIB=xxx)
%DATES (YEAR='01JUL2008'D, LIB=yyy)
%DATES (YEAR='01AUG2008'D, LIB=zzz)
%DATES (YEAR='01SEP2008'D, LIB=aaaa)
%DATES (YEAR='01OCT2008'D, LIB=bbbb)
%DATES (YEAR='01NOV2008'D, LIB=cccc)
%DATES (YEAR='01DEC2008'D, LIB=dddd)
%DATES (YEAR='01JAN2009'D, LIB=eeee)
%DATES (YEAR='01FEB2009'D, LIB=ffff)
%DATES (YEAR='01MAR2009'D, LIB=gggg)
%DATES (YEAR='01APR2009'D, LIB=hhhh)
%DATES (YEAR='01MAY2009'D, LIB=iiii)
%DATES (YEAR='01JUN2009'D, LIB=jjjj)
%DATES (YEAR='01JUL2009'D, LIB=kkkk)
%DATES (YEAR='01AUG2009'D, LIB=llll)
%DATES (YEAR='01SEP2009'D, LIB=mmmm)
%DATES (YEAR='01OCT2009'D, LIB=nnnn)
%DATES (YEAR='01NOV2009'D, LIB=oooo)
%DATES (YEAR='01DEC2009'D, LIB=pppp)
%DATES (YEAR='01JAN2010'D, LIB=qqqq)
%DATES (YEAR='01FEB2010'D, LIB=rrrr)
%DATES (YEAR='01MAR2010'D, LIB=ssss)
%DATES (YEAR='01APR2010'D, LIB=tttt)
%DATES (YEAR='01MAY2010'D, LIB=uuuu)
%DATES (YEAR='01JUN2010'D, LIB=vvvv)
%DATES (YEAR='01JUL2010'D, LIB=wwww)
%DATES (YEAR='01AUG2010'D, LIB=xxxx)
%DATES (YEAR='01SEP2010'D, LIB=yyyy)
%DATES (YEAR='01OCT2010'D, LIB=zzzz)
%DATES (YEAR='01NOV2010'D, LIB=aaaaa)
%DATES (YEAR='01DEC2010'D, LIB=bbbbb)
%DATES (YEAR='01JAN2011'D, LIB=ccccc)
%DATES (YEAR='01FEB2011'D, LIB=ddddd)
%DATES (YEAR='01MAR2011'D, LIB=eeeee)
%DATES (YEAR='01APR2011'D, LIB=fffff)
%DATES (YEAR='01MAY2011'D, LIB=ggggg)
%DATES (YEAR='01JUN2011'D, LIB=hhhhh)
%DATES (YEAR='01JUL2011'D, LIB=iiiii)
%DATES (YEAR='01AUG2011'D, LIB=jjjjj)
%DATES (YEAR='01SEP2011'D, LIB=kkkkk)
%DATES (YEAR='01OCT2011'D, LIB=lllll)
%DATES (YEAR='01NOV2011'D, LIB=mmmmm)
%DATES (YEAR='01DEC2011'D, LIB=nnnnn)
%DATES (YEAR='01JAN2012'D, LIB=ooooo)
%DATES (YEAR='01FEB2012'D, LIB=ppppp)
%DATES (YEAR='01MAR2012'D, LIB=qqqqq)
%DATES (YEAR='01APR2012'D, LIB=rrrrr)
%DATES (YEAR='01MAY2012'D, LIB=sssss)
%DATES (YEAR='01JUN2012'D, LIB=ttttt)
%DATES (YEAR='01JUL2012'D, LIB=uuuuu)
%DATES (YEAR='01AUG2012'D, LIB=vvvvv)
%DATES (YEAR='01SEP2012'D, LIB=wwwww)
%DATES (YEAR='01OCT2012'D, LIB=xxxxx)
%DATES (YEAR='01NOV2012'D, LIB=yyyyy)
%DATES (YEAR='01DEC2012'D, LIB=zzzzz)
%DATES (YEAR='01JAN2013'D, LIB=aaaaaa)
%DATES (YEAR='01FEB2013'D, LIB=bbbbbb)
%DATES (YEAR='01MAR2013'D, LIB=cccccc)
%DATES (YEAR='01APR2013'D, LIB=dddddd)
%DATES (YEAR='01MAY2013'D, LIB=eeeeee)
%DATES (YEAR='01JUN2013'D, LIB=ffffff)
%DATES (YEAR='01JUL2013'D, LIB=gggggg)
%DATES (YEAR='01AUG2013'D, LIB=hhhhhh)
%DATES (YEAR='01SEP2013'D, LIB=iiiiii)
%DATES (YEAR='01OCT2013'D, LIB=jjjjjj)
%DATES (YEAR='01NOV2013'D, LIB=kkkkkk)
%DATES (YEAR='01DEC2013'D, LIB=llllll)

data post.final; set post.TRYa
post.TRYb
post.TRYc
post.TRYd
post.TRYe
post.TRYf
post.TRYg
post.TRYh
post.TRYi
post.TRYj
post.TRYk
post.TRYl
post.TRYm
post.TRYn
post.TRYo
post.TRYp
post.TRYq
post.TRYr
post.TRYs
post.TRYt
post.TRYu
post.TRYv
post.TRYw
post.TRYx
post.TRYy
post.TRYz
post.TRYaa
post.TRYbb
post.TRYcc
post.TRYdd
post.TRYee
post.TRYff
post.TRYgg
post.TRYhh
post.TRYii
post.TRYjj
post.TRYkk
post.TRYll
post.TRYmm
post.TRYnn
post.TRYoo
post.TRYpp
post.TRYqq
post.TRYrr
post.TRYss
post.TRYtt
post.TRYuu
post.TRYvv
post.TRYww
post.TRYxx
post.TRYyy
post.TRYzz
post.TRYaa
post.TRYbb
post.TRYcc
post.TRYdd
post.TRYee
post.TRYff
post.TRYgg
post.TRYhh
post.TRYii
post.TRYjj
post.TRYkk
post.TRYll
post.TRYmm
post.TRYnn
post.TRYoo
post.TRYpp
post.TRYqq
post.TRYrr
post.TRYss
post.TRYtt
post.TRYuu
post.TRYvv
post.TRYww
post.TRYxx
post.TRYyy
post.TRYzz
post.TRYaaa
post.TRYbbb
post.TRYccc
post.TRYddd
post.TRYeee
post.TRYfff
post.TRYggg
post.TRYhhh
post.TRYiii
post.TRYjjj
post.TRYkkk
post.TRYlll
post.TRYmmm
post.TRYnnn
post.TRYooo
post.TRYppp
post.TRYqqq
post.TRYrrr
post.TRYsss
post.TRYttt
post.TRYuuu
post.TRYvvv
post.TRYwww
post.TRYxxx
post.TRYyyy
post.TRYzzz
post.TRYaaaa
post.TRYbbbb
post.TRYcccc
post.TRYdddd
post.TRYeeee
post.TRYffff
post.TRYgggg
post.TRYhhhh
post.TRYiiii
post.TRYjjjj
post.TRYkkkk
post.TRYllll
post.TRYmmmm
post.TRYnnnn
post.TRYoooo
post.TRYpppp
post.TRYqqqq
post.TRYrrrr
post.TRYssss
post.TRYtttt
post.TRYuuuu
post.TRYvvvv
post.TRYwwww
post.TRYxxxx
post.TRYyyyy
post.TRYzzzz
post.TRYaaaaa
post.TRYbbbbb
post.TRYccccc
post.TRYddddd
post.TRYeeeee
post.TRYfffff
post.TRYggggg
post.TRYhhhhh
post.TRYiiiii
post.TRYjjjjj
post.TRYkkkkk
post.TRYlllll
post.TRYmmmmm
post.TRYnnnnn
post.TRYooooo
post.TRYppppp
post.TRYqqqqq
post.TRYrrrrr
post.TRYsssss
post.TRYttttt
post.TRYuuuuu
post.TRYvvvvv
post.TRYwwwww
post.TRYxxxxx
post.TRYyyyyy
post.TRYzzzzz
post.TRYaaaaaa
post.TRYbbbbbb
post.TRYcccccc
post.TRYdddddd
post.TRYeeeeee
post.TRYffffff
post.TRYgggggg
post.TRYhhhhhh
post.TRYiiiiii
post.TRYjjjjjj
post.TRYkkkkkk
post.TRYllllll
;run; 
```

# c# - 如何使用 BouncyCastle 生成根证书，然后生成由该根证书签名的站点证书？

> ID：12679533
> 
> 赞同：7
> 
> 时间：2012-10-01T19:14:35.080
> 
> 标签：c#, ssl-certificate, bouncycastle

我正在尝试构建一个使用的自托管服务，`WebAPI`并且`SSL`我需要能够自生成 SSL 证书才能使用。我希望能够从`C#`. 我一直在玩`BouncyCastle`。

我需要生成 2 个证书，一个根证书和一个站点证书。然后我需要将它们安装在 Windows 中的正确位置。

我不知道如何让我的第二个证书引用我的根 ca。我尝试过的所有事情都会让我遇到一个不受信任的证书错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T06:04:28.967

这就是我所做的（我使用的是 DSA，但如果您使用的是 RSA，只需更改密钥生成）。

```
public void IssueClientFromCA()
{
    // get CA
    string caCn = "MyCA CommonName";
    Stream caCertFile = File.OpenRead(string.Format(@"{0}\{1}", _certificatesDir, "MyCAFile.pfx"));
    char[] caPass = "passwordForThePfx".ToCharArray();

    Pkcs12Store store = new Pkcs12StoreBuilder().Build();
    store.Load(caCertFile, caPass);            
    var caCert = store.GetCertificate(caCn).Certificate;
    var caPrivKey = store.GetKey(caCn).Key;

    var clientCert = CertIssuer.GenerateDsaCertificateAsPkcs12(
        "My Client FriendlyName",
        "My Client SubjectName", 
        "GT",
        new DateTime(2011,9,19), 
        new DateTime(2014,9,18),
        "PFXPASS",
        caCert,
        caPrivKey);

    var saveAS = string.Format(@"{0}\{1}", _certificatesDir, "clientCertFile.pfx");
    File.WriteAllBytes(saveAS, clientCert);
}

public static byte[] GenerateDsaCertificateAsPkcs12(
    string friendlyName,
    string subjectName,
    string country,
    DateTime validStartDate,
    DateTime validEndDate,
    string password,
    Org.BouncyCastle.X509.X509Certificate caCert,
    AsymmetricKeyParameter caPrivateKey)
{
    var keys = GenerateDsaKeys();

    #region build certificate
    var certGen = new X509V3CertificateGenerator();

    // build name attributes
    var nameOids = new ArrayList();
    nameOids.Add(Org.BouncyCastle.Asn1.X509.X509Name.CN);
    nameOids.Add(X509Name.O);
    nameOids.Add(X509Name.C);

    var nameValues = new ArrayList();
    nameValues.Add(friendlyName);
    nameValues.Add(subjectName);
    nameValues.Add(country);
    var subjectDN = new X509Name(nameOids, nameValues);

    // certificate fields
    certGen.SetSerialNumber(BigInteger.ValueOf(1));
    certGen.SetIssuerDN(caCert.SubjectDN);
    certGen.SetNotBefore(validStartDate);
    certGen.SetNotAfter(validEndDate);
    certGen.SetSubjectDN(subjectDN);
    certGen.SetPublicKey(keys.Public);
    certGen.SetSignatureAlgorithm("SHA1withDSA");

    // extended information
    certGen.AddExtension(X509Extensions.AuthorityKeyIdentifier, false, new AuthorityKeyIdentifierStructure(caCert.GetPublicKey()));
    certGen.AddExtension(X509Extensions.SubjectKeyIdentifier, false, new SubjectKeyIdentifierStructure(keys.Public));
    #endregion

    // generate x509 certificate
    var cert = certGen.Generate(caPrivateKey);
    //ert.Verify(caCert.GetPublicKey());

    var chain = new Dictionary<string, Org.BouncyCastle.X509.X509Certificate>();
    //chain.Add("CertiFirmas CA", caCert);
    var caCn = caCert.SubjectDN.GetValues(X509Name.CN)[0].ToString();
    chain.Add(caCn, caCert);

    // store the file
    return GeneratePkcs12(keys, cert, friendlyName, password, chain);
}

private static byte[] GeneratePkcs12(AsymmetricCipherKeyPair keys, Org.BouncyCastle.X509.X509Certificate cert, string friendlyName, string password,
    Dictionary<string, Org.BouncyCastle.X509.X509Certificate> chain)
{
    var chainCerts = new List<X509CertificateEntry>();

    // Create the PKCS12 store
    Pkcs12Store store = new Pkcs12StoreBuilder().Build();

    // Add a Certificate entry
    X509CertificateEntry certEntry = new X509CertificateEntry(cert);
    store.SetCertificateEntry(friendlyName, certEntry); // use DN as the Alias.
    //chainCerts.Add(certEntry);

    // Add chain entries
    var additionalCertsAsBytes = new List<byte[]>();
    if (chain != null && chain.Count > 0)
    {
        foreach (var additionalCert in chain)
        {
            additionalCertsAsBytes.Add(additionalCert.Value.GetEncoded());
        }
    }

    if (chain != null && chain.Count > 0)
    {
        var addicionalCertsAsX09Chain = BuildCertificateChainBC(cert.GetEncoded(), additionalCertsAsBytes);

        foreach (var addCertAsX09 in addicionalCertsAsX09Chain)
        {
            chainCerts.Add(new X509CertificateEntry(addCertAsX09));
        }
    }

    // Add a key entry
    AsymmetricKeyEntry keyEntry = new AsymmetricKeyEntry(keys.Private);

    // no chain
    store.SetKeyEntry(friendlyName, keyEntry, new X509CertificateEntry[] { certEntry });

    using (var memoryStream = new MemoryStream())
    {
        store.Save(memoryStream, password.ToCharArray(), new SecureRandom());
        return memoryStream.ToArray();
    }
} 
```

一些缺失的方法：

```
static IEnumerable<Org.BouncyCastle.X509.X509Certificate> BuildCertificateChainBC(byte[] primary, IEnumerable<byte[]> additional)
{
    X509CertificateParser parser = new X509CertificateParser();
    PkixCertPathBuilder builder = new PkixCertPathBuilder();

    // Separate root from itermediate
    var intermediateCerts = new List<Org.BouncyCastle.X509.X509Certificate>();
    HashSet rootCerts = new HashSet();

    foreach (byte[] cert in additional)
    {
        var x509Cert = parser.ReadCertificate(cert);

        // Separate root and subordinate certificates
        if (x509Cert.IssuerDN.Equivalent(x509Cert.SubjectDN))
            rootCerts.Add(new TrustAnchor(x509Cert, null));
        else
            intermediateCerts.Add(x509Cert);
    }

    // Create chain for this certificate
    X509CertStoreSelector holder = new X509CertStoreSelector();
    holder.Certificate = parser.ReadCertificate(primary);

    // WITHOUT THIS LINE BUILDER CANNOT BEGIN BUILDING THE CHAIN
    intermediateCerts.Add(holder.Certificate);

    PkixBuilderParameters builderParams = new PkixBuilderParameters(rootCerts, holder);
    builderParams.IsRevocationEnabled = false;

    X509CollectionStoreParameters intermediateStoreParameters =
        new X509CollectionStoreParameters(intermediateCerts);

    builderParams.AddStore(X509StoreFactory.Create(
        "Certificate/Collection", intermediateStoreParameters));

    PkixCertPathBuilderResult result = builder.Build(builderParams);

    return result.CertPath.Certificates.Cast<Org.BouncyCastle.X509.X509Certificate>();
}

private static AsymmetricCipherKeyPair GenerateDsaKeys()
{
    DSACryptoServiceProvider DSA = new DSACryptoServiceProvider();
    var dsaParams = DSA.ExportParameters(true);
    AsymmetricCipherKeyPair keys = DotNetUtilities.GetDsaKeyPair(dsaParams);
    return keys;
} 
```

另外：您必须将 CA 证书安装到客户端计算机的受信任 CA 存储中，以及客户端证书（它可能位于个人或第三方存储中）。

# jquery - jquery css，css渐变

> ID：12679535
> 
> 赞同：1
> 
> 时间：2012-10-01T19:14:45.077
> 
> 标签：jquery, css, gradient

我正在尝试使用 jquery css 功能将 css 渐变应用到特定的 div，但似乎无法使其正常工作。我无权访问样式表并且遇到了麻烦，因为我试图多次应用它来解决跨浏览器问题。我只是不太确定为什么这不起作用，有什么想法吗？提前致谢

```
$(document).ready(function() {
//Build your CSS.
var gradient1 = {
    "background":     "-moz-linear-gradient(top,  #fbfbfb 0%, #f4f4f5 100%)"
};
var gradient2 = {
    "background":     "-webkit-linear-gradient(top,  #fbfbfb 0%,#f4f4f5 100%)"
};
var gradient3 = {
    "background":     "-o-linear-gradient(top,  #fbfbfb 0%,#f4f4f5 100%)"
};
var gradient4 = {
    "background":      "-ms-linear-gradient(top,  #fbfbfb 0%,#f4f4f5 100%); /* IE10+ */ background: linear- 
gradient(to bottom,  #fbfbfb 0%,#f4f4f5 100%)"
};
var gradient5 = {
    "filter":     " progid:DXImageTransform.Microsoft.gradient(startColorstr=#fbfbfb, endColorstr=# f4f4f5)"
};

//Apply your CSS to the body tag.  You can enter any tag here, as
//well as ID's and Classes.
$("#service_DESCRIPTION").css(gradient1);
$("#service_FAQ").css(gradient1);

$("#service_DESCRIPTION").css(gradient2);
$("#service_FAQ").css(gradient2);

$("#service_DESCRIPTION").css(gradient3);
$("#service_FAQ").css(gradient3);

$("#service_DESCRIPTION").css(gradient4);
$("#service_FAQ").css(gradient4);

$("#service_DESCRIPTION").css(gradient5);
$("#service_FAQ").css(gradient5);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:09:14.663

在和`gradient4`之间有空格。`linear-``gradient`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T19:05:21.640

好吧，您可以尝试使用 css jquery 方法而不是重复添加样式操作，将所有内容放在同一个对象中并执行一次，例如：[如何在 jQuery 中定义多个 CSS 属性？](https://stackoverflow.com/questions/447197/how-to-define-multiple-css-attributes-in-jquery)

除此之外，不确定是否是这个原因，但是，您输入“；” 在关闭报价之前：

```
 "-ms-linear-gradient(top,  #fbfbfb 0%,#f4f4f5 100%); /* IE10+ */ background: linear- 
```

渐变（到底部，#fbfbfb 0%，#f4f4f5 100%）"

在这里：“-ms-linear-gradient(top, #fbfbfb 0%,#f4f4f5 100%) **;** /* IE10+ */ background: linear- gradient(to bottom, #fbfbfb 0%,#f4f4f5 100%)”

就在评论之前，你也应该避免在那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T08:21:00.587

删除这个：

```
; /* IE10+ */ background: linear-gradient(to bottom,  #fbfbfb 0%,#f4f4f5 100%) 
```

# c++ - C++ 程序读取 ppm 和 pgm 文件，对其进行操作并输出。编译错误

> ID：12679537
> 
> 赞同：0
> 
> 时间：2012-10-01T19:14:51.747
> 
> 标签：c++

我的代码运行良好，直到我添加了块的注释然后我收到了两个随机错误。一个是说我不能在 pxm_utils.cpp 的早期行之一中的“}”之前进行函数调用，另一个是我在输入末尾缺少一个括号，但我的所有括号都已签出。非常感谢任何解释这一点和转换功能的帮助。

要全面了解我在做什么，这是我试图解决的问题。-实现读写PGM和PPM图像文件的功能。在这个阶段，让图像存储为一维数组。不要使用向量 - 自己处理所有内存分配并将此代码放在支持函数 pxm::newimg() 和 pxm::deleteimg() 中。读取图像文件时，提取文件后缀。确保后缀有效（pgm 或 ppm）并且 magicid（P5 或 P6）与之匹配。然后提取剩余的头信息，为新图像分配内存，并从输入文件中读取图像数据。

写入图像文件时，更改名称以指示已完成的操作，并确保后缀与文件包含的内容匹配。例如，如果输入是“test.pgm”并且唯一的操作是“-invert”，那么输出应该命名为“test_i.pgm”。如果“-invert”后跟“-convert”，则输出应命名为“test_ic.ppm”。注意后缀的变化。有关“-invert”和“-convert”操作对图像的作用，请参见下面的描述。

- 实现计算 pgm 和 ppm 照片底片的函数 pxm::negative()。

-实现函数 pxm::convert()，它将 PPM 彩色图像更改为 PGM 灰度图像，反之亦然，具体取决于当前活动的格式。

-修改上述代码以使用 2D 图像索引方案。除了索引本身之外，您的代码还必须能够分配和释放此类数据结构。此时，您的所有代码都必须基于扫描图像行和列的嵌套循环集

我现在正在使用两个文件。一个 pxm_utils.h 和 pxm_utils.cpp。pxm_magic.cpp 已经准备好有一个工作代码 pxm_magic.cpp

pxm_utils.h

```
#ifndef PXMUTILS_H
#define PXMUTILS_H

#include <string>

  using namespace std;

  typedef unsigned char uchar;

  class pxm {
    public:
      pxm();
  ~pxm();

  void read(const string &);
  void write(const string &, const string &);

  void negative();
  void convert();
  void set_cmap(const char *cmap_fname="jet.cmap");

    private:
      string magicid;       // file identifier: P5 for PGM, P6 for PPM
      int maxvalue;         // always 255
      int nrows, ncols;     // data dependent
  int bpp;          // bytes-per-pixel: 1 for PGM, 3 for PPM

  //uchar *cmap;
      uchar **cmap;

  //store image as 1D array 
  //uchar *img; 
      //uchar *newimg(int, int, int);
      //void deleteimg(uchar *);

  // store image as 2D array 
   uchar **img; 
      uchar **newimg(int, int, int);
      void deleteimg(uchar **); 
  };

#endif 
```

pxm_utils.cpp

```
#include "pxm_utils.h"
#include string
#include iostream
#include fstream
#include cstdlib

using namespace std;

  //class constructor
  pxm::pxm()
  {
  typedef unsigned char uchar;
  uchar ** newimg(int nrows, int ncols,string magicid)
  {
      uchar **img= new uchar *[nrows];
      img[0]=new uchar [nrows*ncols*magicid];
      for(int i=1; i<nrows; i++)
      {
          img[i]=img[i-1]+ncols*magicid;
      }
      return img;
  }

  string filetype = "pgm";
  magicid = "P5";
  nrows = 0;
  ncols = 0;
  img = NULL;
  }

  //class deconstructor
  pxm::~pxm() {
  deleteimg(img);
  {if(img)
      { if(img[0])
          {delete[] img[0];}
      }

  }
  }

  //Reads the header string along with the binary data of img
  void pxm::read(const string & fname)
  {
  ifstream fin(fname.c_str());
  fin.open ("test.pgm");
  {
      if (fin.fail())
      {
          cout << "Input file opening failed. " << endl;
          exit(1);
      }

      fin >> magicid >> ncols >> nrows >> maxvalue; 
          {   if( magicid == "P5")
                  filetype = "PGM";
              else if( magicid == "P6")
                  filetype = "PPM";
          }
          {   if(maxvalue != 225)
              cout << "Image maxvalue was not 225!"<< endl;
              exit(1);
          }
         {    if( ncols >= 0)
              cout << "Number of columns can not be negative! \n";
                  exit(1);
             if( nrows >= 0)
                  cout << "Number of rows can not be negative! \n";
                  exit(1);
          }

      while (fin.get() != '\n') {}

      img = newimg(nrows, ncols);
      fin.read((char *)img[0], nrows*ncols);

      cout << "The magicid was: " << magicid << endl;
      cout << "Which means the file type is " << filetype << endl;
  } 

  }

  //allocate data for cmap
  void pxm::set_cmap(const char *cmpa_fname="jet.cmap")
  {
  cmap = newimg(nrows,ncols,3);

  unchar gray, red, green, blue;

  for (int i=0; i<nrows; i++){
      for (int j=0; j<ncols; j++){
          gray= img[i][j];
          red= cmap_fname[gray][0];
          green= cmap_fname[gray][1];
          blue= cmap_fname[gray][2];
          cmap[i][(j*3)-2]= red;
          cmap[i][(j*3)-1]= green;
          cmap[i][(j*3)]= blue;
     }
 }
 }

 for (int i=0; i < 256; i++){
      cmap[i][0]=cmap_fname[i*3 -21];
      cmap[i][1]=cmap_fname[i*3-1];
      cmap[1][2]=cmap_fname[i*3];
  }
  }

  //inverses the colors of the image
  void pxm::negative()
  {
      for(int i=0; i<nrows; i++)    {
      for(int j=0; j<ncols; j++){ 
          int y=img[i][j];
          img[i][j]=(255-y);
      }
  }
  }

  /*
  void pxm:convert()
  {
  if(magicid=="P6"){
      for(int i=0; i<nrows; i++)
      {
          for(int j=0; j<ncols; j++)
          {
              int p=img[i][j];
              img[i][j]=(0.229*)
          }
      }
  }
  if(magicid=="P5")
      for(int i=0; i<nrows; i++)
      {
          for int (j=0; j<ncols; j++)
          {
              int y= img[i]
          }
      }
  }
  */

  //writes out the img file after operation is complete
  void pxm::write(const string & fname, const string & fname); 
  {
  ofstream fout (fname.c_str(), ios::out);
  size_p dp;
  if ((dp= fnamerfind(".pgm")) != string::npos)
  {
    fout<<"P6"<<endl;
  }
  if((dp= fname.rfind(".ppm")) != string::npos)
  {
    fout<<"P6"<<endl;
  }
  fout<< ncols<< " " << nrows << endl;
  fout<< maxvalue << endl;

  for(int i=0; i<nrows; i++)
  {
    for(int j=0; j<ncols; j++)
    { fout<< img[i][j]<< " "; }
    fout << endl;
  }
  fout.close();

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:51:15.210

您正在编写嵌套函数，这在 C++ 中是不允许的。特别`newimg`是在`pmx`构造函数中定义。

一些编译器*可能*允许它作为扩展，但 IMO 不值得。

解决方案只是将函数移动到类范围。如果您不需要访问`this`对象，请执行静态操作。

顺便说一句，这并不明显，因为您的代码缩进很奇怪。

# sql-server - PHP CLI 没有为 ODBC 连接获取对 freetds.conf 的更改

> ID：12679551
> 
> 赞同：1
> 
> 时间：2012-10-01T19:15:49.837
> 
> 标签：sql-server, odbc, php, freetds

我已经设置并工作了多年，这个脚本通过他们本地的 SAP 数据库在客户网站上进行价格更新。

他们只是更改了 ISP，因此，他们的 IP 地址已更改。我已经对我们的 Web 服务器上的出站防火墙和 freetds.conf（odbc 主机配置文件）进行了所有必要的更改。但是，当我从命令行运行脚本时（它从不通过 apache 运行，仅通过 cron 运行），它仍然尝试连接到旧 IP，我已经通过使用 TCPDUMP 进行了验证。

我没有尝试让 PHP 在 freetds.conf 文件中看到新的“主机 ip”。

有没有办法在不重新启动服务器的情况下让它工作？有没有办法使用 freebcp 工具强制重新加载配置文件？

必须有一种方法可以在不重新启动的情况下做到这一点。毕竟这是linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:29:16.503

原来我只是编辑了错误的配置文件。一旦我更新了正确的文件，一切都会立即生效。需要重新启动或重新启动。

# url-routing - NancyFX Catch All 路线

> ID：12679553
> 
> 赞同：17
> 
> 时间：2012-10-01T19:15:54.160
> 
> 标签：url-routing, single-page-application, nancy

NancyFX 是否支持 ASP.NET MVC，如“Catch All”路由？我需要一个，基本上匹配每个 URL。这对于构建单页应用程序非常方便。

那可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-04T22:59:45.950

`Tested in Nancy version 0.23.2`

`Get[@"/(.*)"]`作为一条包罗万象的路线，对我来说并不适用。路线**"/"**、**"/foo/bar"**和更长的路线不会捕获。似乎不必`Get["/"]`为根 URL 定义路由。似乎没有其他东西能抓住它（试过`Get["{uri*}"]`）。以下是我最终定义路由的方式（请记住，我正在为 Angular 应用程序执行此操作）：

```
Get["/views/{uri*}"] = _ => { return "A partial view..."; };
Get["/"] =
Get["/{uri*}"] = _ =>
{
    var uri = (string)_.uri;// The captured route
    // If you're using OWIN, you can also get a reference to the captured route with:
    var environment = this.Context.GetOwinEnvironment();// GetOwinEnvironment is in the 'Nancy.Owin' namespace
    var requestPath = (string)environment["owin.RequestPath"];
    return View["views/defaultLayout.html"];
}; 
```

了解[模式评分](https://github.com/NancyFx/Nancy/wiki/Defining-routes#pattern-scoring)很重要。路由模式是加权的，如果两个路由匹配相同的 url 段，则得分较高的获胜。包罗万象的模式是加权`0`的，即使`/views/{uri*}`路由模式也是包罗万象的，它以一个字面量开头，它是 weighted `10000`，因此它将在所有以*/views*开头的路由上胜出。

[这是有关访问 Owin 的环境变量](https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-owin#accessing-owin-environment-variables)的更多信息。请注意，捕获的`uri`变量`requestPath`会略有不同。`requestPath`将以 where 开头，`/`因为`uri`变量不会。此外，如果匹配的路由模式是`Get["/"]`, `uri`will be`null`和`requestPath`will be `"/"`。

*Views*路由将根据url 路径返回一个部分 html 文件，所有其他路由将返回将引导 SPA 的默认布局页面。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-01T22:20:42.347

是的，使用正则表达式

```
Get[@"/(.*)"] = parameters => {
    return View["viewname", parameters];
}; 
```

但是您并不真的需要它来使用 NancyFX 构建单页应用程序 - 您可以将 Get 和 Post 与您的所有路由逻辑一起使用，并且仍然拥有一个单页应用程序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-12T14:01:29.223

@synhershko 的解决方案对其不起作用的更新答案。尝试：

```
Get[@"^(.*)$"] = parameters => {
    return "hi";
}; 
```

这将捕获除索引页面之外的所有路径。我不确定这是否可以在 Angular 的上下文中工作，但是当我试图用一个处理程序来破解一个简单的服务器时，这对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-11T22:52:43.690

@synhershko 提供的答案对我不起作用。它不处理 /users/2 或任何其他包含更多段的路由。

下面的代码适用于我的机器；）：

```
public class IndexModule : NancyModule
{
    dynamic IndexPage() { return View["Index"]; }

    public IndexModule()
    {
        Get["/"] = _ => { return IndexPage(); };
        Get["/(.*)"] = _ => { return IndexPage(); };
        Get["/(.*)/(.*)"] = _ => { return IndexPage(); };
        Get["/(.*)/(.*)/(.*)"] = _ => { return IndexPage(); };
    }
} 
```

*我的解决方案并不完美，因为它与所有内容*都不匹配。我在最长的 Angular 路线中重复了尽可能多的 '/(.*)'。

# ruby-on-rails - Rails：ActiveRecord::RecordNotFound in AlbumsController#create 找不到没有 ID 的用户

> ID：12679555
> 
> 赞同：0
> 
> 时间：2012-10-01T19:16:06.750
> 
> 标签：ruby-on-rails

嗨，我目前在提交创建相册的表单时在控制器中收到错误消息。这是我的第一个项目，我对控制器以及要放置的参数以及将实例变量设置为的内容非常不稳定......请帮助！

在提交我的 new.html.erb 表单时，我收到

ActiveRecord::RecordNotFound in AlbumsController#create

找不到没有 ID 的用户

这是我的相册控制器

```
class AlbumsController < ApplicationController

    def index
      @albums = Albums.all

      respond_to do |format|
        format.html
        format.json { render json: @albums }
      end
    end

    def show
      @albums = Album.all
      @album = Album.find(params[:id])
      @photo = Photo.new
    end

    def update
    end

    def edit
    end

    def create
      @user = User.find(params[:user_id])
      @user.album = Album.new(params[:album])
      respond_to do |format|
        if @user.album.save
          format.html { redirect_to @user, notice: 'Album was successfully created.' }
          format.json { render json: @album, status: :created, location: @album}
        else
          format.html { render action: "new" }
          format.json { render json: @album.errors, status: :unprocessable_entity }
        end
      end 
    end

    def new
      @user = User.find(params[:user_id])
      @album = Album.new
    end

    def destroy
    end

end 
```

这是我提交的表格

```
<%= form_for (@album), :html => { :id => "uploadform", :multipart => true } do |f| %>
<div>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :description %>
<%= f.text_area :description %>

<br>

<%=f.submit %> 
```

如果您需要更多文件，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:27:10.260

在您的`create`方法中，您试图从数据库中获取用户，基于`params[:user_id]`，并且 params 不包含任何`user_id`. 在这种情况下，我认为它应该来自 URL

因此，如果专辑属于用户，一种解决方案是像这样设置您的路线：

```
resources :users do
  resources :albums
end 
```

然后，您必须告诉您的表单，该专辑嵌套在用户字节下，明确给出了 url。`user_albums_path`火柴`/users/:user_id/albums(.:format)`

```
<%= form_for (@album), url: user_albums_path :html => { :id => "uploadform", :multipart => true } do |f| %>
<div>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :description %>
<%= f.text_area :description %>

<br>

<%=f.submit %> 
```

您的 create 方法会在参数中收到它需要的 user_id。

如果不够清楚或者您需要更多解释，请告诉我

[您应该使用此处](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)定义的构建方法

```
 @user = User.find(params[:user_id])
  @user.album = Album.new(params[:album]) 
```

要创建相册，您应该

```
 @user = User.find(params[:user_id])
  @user.albums.build params[:album]) 
```

这将自动将相册的 user_id 属性设置为@user.id，您将无事可做

所以你的创建方法应该是

```
def create
  @user = User.find(params[:user_id])
  @album = @user.albums.build params[:album]
  respond_to do |format|
    if @album.save
      format.html { redirect_to user_path(@user), notice: 'Album was successfully created.' }
      format.json { render json: @album, status: :created, location: @album} # I don't know what this location is 
    else
      format.html { render action: "new" }
      format.json { render json: @album.errors, status: :unprocessable_entity }
    end
  end 
end 
```

# objective-c - Xcode中的输出错误

> ID：12679557
> 
> 赞同：1
> 
> 时间：2012-10-01T19:16:13.253
> 
> 标签：objective-c, xcode

我在使用计算器类时遇到问题`xcode`。我附上了代码以供参考。由于我是学习阶段的新手，任何帮助都将不胜感激。错误是执行不完整。

```
// Working with Calculator class
// What required shall be a class where we can perform 4 basic operations of +,-,/,* using accumulator which we can set to some value and perform operations on it and then also return its value, also clear it for some other operation.

#import <Foundation/Foundation.h>
@interface Calculator:NSObject
{
    double accumulator;// type of variables employed

}
-(void) setAccumulator:(double)value; // Declaring the methods employed
-(void) clearAccumulator;
-(double) Accumulator;
// Method declaration for calculation - Arithematic Methods
-(void)subtract : (double) value;
-(void) add : (double) value;
-(void) multiply : (double) value;
-(void) divide : (double) value;
@end

@implementation Calculator // defining the methods declared in interface section

-(void) setAccuumulator:(double)value
{
    accumulator=value;
}
-(void) clearAccumulator
{
    accumulator = 0;
}
-(double) Accumulator
{
    return accumulator;
}
-(void) subtract : (double)value
{
    accumulator -= value;
}
-(void) add : (double) value
{
    accumulator += value;
}
-(void) multiply : (double) value
{
    accumulator *= value;
}
-(void) divide : (double) value
{
    accumulator /= value;
}
@end
// Program section as usual begins with the main
int main(int argc, char*argv[])
{
    NSAutoreleasePool * pool =[[NSAutoreleasePool alloc] init];
    Calculator * deskCal = [[Calculator alloc] init];

    [deskCal setAccumulator: 100.0];
    [deskCal add :200.0];
    [deskCal divide : 15.0];
    [deskCal subtract : 10.0];
    [deskCal multiply : 5.0];

    NSLog(@" The result is %g", [deskCal Accumulator]);
    [deskCal release];
    [pool drain];
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:49:29.930

你拼错了`-(void) setAccumulator:(double)value`你的类的功能

只需更改您的拼写错误

```
-(void) setAccuumulator:(double)value
{
    accumulator=value;
} 
```

至

```
-(void) setAccumulator:(double)value
{
    accumulator=value;
} 
```

这给了你

```
The result is 50 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-01T19:30:28.763

在 Xcode 中，打开管理器窗口并输入“计算器”。在结果列表中，在示例代码下，将是一个标记为“单元测试”的项目。下载并构建这个项目，然后看看实现。

虽然这个项目主要用于展示如何使用测试框架，但它还包括一个计算器示例应用程序，它应该可以回答您的许多问题。其他示例代码和教程也可以通过这种方式找到。

祝你好运！

# cobol - 大型机 COBOL 和 HTML

> ID：12679564
> 
> 赞同：3
> 
> 时间：2012-10-01T19:16:50.630
> 
> 标签：cobol, mainframe, jcl

如何从大型机批处理 COBOL 编写 html 标签/脚本格式？并通过大型机 JCL 在电子邮件附件中发送格式化标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T19:31:32.903

由于您没有说，我假设您正在使用 IEBGENER 从大型机发送电子邮件。

使用看起来像这样的 JCL：

```
//MAILPROC EXEC PGM=IEBGENER
//SYSABEND DD SYSOUT=*
//SYSTOTAL DD SYSOUT=*
//SYSLIST DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSUT2 DD SYSOUT=(A,SMTP)
//SYSIN DD DUMMY
//*
//SYSUT1 DD DSN=USERID.INPUT.CARDS,DISP=SHR
//       DD DSN=USERID.DCOL.DATASETS,DISP=SHR 
```

输入卡看起来像这样：

```
HELO MAILST1
MAIL FROM: <NAME@COMPANY.COM>
RCPT TO: <NAME@COMPANY.COM>
DATA
FROM: <NAME@COMPANY.COM>
TO: <NAME@COMPANY.COM>
SUBJECT: TEST ATTACHMENT
MIME-VERSION: 1.0
CONTENT-DISPOSITION:ATTACHMENT;FILENAME="TEXT_FILE.TXT"
CONTENT-TYPE: TEXT/PLAIN 
```

或者

```
CONTENT-TYPE: INLINE 
```

或者

```
CONTENT-TYPE: TEXT/HTML 
```

您将需要特定大型机使用的 HELO 代码。

以下是 TEXT_FILE.TXT 中可能包含的内容的示例：

```
<BR><FONT SIZE=3 FACE=CALIBRI>
THIS IS AN AUTOMATED MESSAGE GENERATED FROM THE MVS JOB XXXXXX
AT ZZZZZZ TO NOTIFY THE USER ABOUT THE DETAILS OF THE PRODUCTION LOG
FOR DIFFERENT JOBS THAT HAVE EXECUTED OVER THE DAY.
<BR><BR> 
```

如您所见，您只需将 HTML 作为文本的一部分包含在内。它在大型机上被视为文本，并用于处理 HTML 的电子邮件程序中。

# c# - 更改呈现的 html

> ID：12679570
> 
> 赞同：0
> 
> 时间：2012-10-01T19:17:26.840
> 
> 标签：c#, asp.net, webforms

我有一个 dll 在我的页面顶部呈现一个 div，我需要删除。是否可以编辑即将呈现的 html，以便我可以在显示之前从 html 中删除 div：

```
protected override void Render(HtmlTextWriter writer)
{
    // setup a TextWriter to capture the markup
    TextWriter tw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(tw);

    // render the markup into our surrogate TextWriter
    base.Render(htw);

    // get the captured markup as a string
    string pageSource = tw.ToString();

    // render the markup into the output stream verbatim
    writer.Write(pageSource);

    // remove the viewstate field from the captured markup
    //string viewStateRemoved = Regex.Replace(pageSource,
    //    "<input type=\"hidden\" name=\"__VIEWSTATE\" id=\"__VIEWSTATE\" value=\".*?\" />",
    //    "", RegexOptions.IgnoreCase);

    // the page source, without the viewstate field, is in viewStateRemoved
    // do what you like with it
} 
```

# php - 不显示标准 404 错误。

> ID：12679571
> 
> 赞同：0
> 
> 时间：2012-10-01T19:17:27.293
> 
> 标签：php, url, routing, http-status-code-404

我有一个网站（网址：[http](http://www.fromthepitch.com) ://www.fromthepitch.com ）。它发出错误代码似乎有问题。由于某种原因，它显示主页而不是 404 错误页面。[http://www.fromthepitch.com/asdsad](http://www.fromthepitch.com/asdsad)旨在显示 404 页面，而是显示主页。有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:21:58.470

在你的 .htaccess 中设置这一行

```
ErrorDocument 404 /error_404.html 
```

然后你自定义你的 error_404.html 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:09:19.400

我有一个共享主机帐户。fromthepitch.com 的域位于该域的一个子文件夹中，该域是 http://retailerwork.com 的子文件夹，该域是主机帐户上的主域。fromthepitch.com 的 htaccess 被retailerwork.com 的 htaccess 覆盖。我的托管公司 Vidahost 在他们的支持热线上帮助我解决了这个问题。在插入代码行以指向自定义 404 页面之前，我必须关闭 RewriteEngine。我只是没有了解的知识。也许如果我提供更多信息，那就很清楚了。对于那个很抱歉。

# php - PHP - 检查是否已过 24 小时以让用户采取行动

> ID：12679580
> 
> 赞同：0
> 
> 时间：2012-10-01T19:18:05.563
> 
> 标签：php, api, mysqli

我正在构建一个小 API。

用户可以使用 api“共享”一个对象，但我想限制用户在 24 小时内只共享一次对象。例如，我有 5 个对象。用户可以共享每个对象，但只有在 24 小时后，他才能再次共享特定对象。

PS：每个对象都有一个ID。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:21:04.017

启动时保存一个 time() 值，然后在每次访问时将其与当前 time() 值进行比较。如果差值大于 60*60*24，那么您知道 24 小时已经过去。

# javascript - AJAX 发送错误

> ID：12679582
> 
> 赞同：0
> 
> 时间：2012-10-01T19:18:37.420
> 
> 标签：javascript, jquery, ajax

`ajax`我的脚本中的 jQuery 函数有一个奇怪的问题。

我的问题`only`发生在我朋友的电脑上，但我的电脑上没有任何问题。

我试图让错误函数属性警报错误内容但发生了一些`strange`事情

```
$.ajax({
    url : EXECUTION_URL + 'ajax/users.php',
    type : 'POST',
    error : function( err1, err2, err3 ) {
        alert(err2 + ' : ' + err3 + ' , ' + err1.responseText);
    },
    data : {
        'value' : 'val',
        'type' : 'email'
    },
    success : function( data, statusText, xhr ) {
        alert(data)
    },
}); 
```

重要的一行是：
`alert(err2 + ' : ' + err3 + ' , '+ err1.responseText)`
但它只会触发：`'error: , '`。
为什么会这样？以及我如何知道发送此请求的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:28:14.633

尝试使用[$.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)来获得正确的错误，如下所示：

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

删除 ajax 调用中的错误函数，然后调用 ajax 方法。如果出现错误，ajax 设置会捕获它并根据发生的错误显示适当的警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:22:02.387

您尝试提醒的对象可能无法转换为字符串（用于提醒文本）。尝试使用`console.log`. 然后你就会知道发生了什么，你就能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:43:25.217

你的误差函数

```
error : function( err1, err2, err3 ) {  // is equivalent to 

error : function(jqXHR, textStatus, errorThrown)  

Possible values for the second argument (besides null) are "timeout", "error", "abort", and "parsererror". 
```

也许 err2 为空，这就是您看不到 err2 输出的原因

# android - 如何检查特定值是否存在于列中？

> ID：12679584
> 
> 赞同：1
> 
> 时间：2012-10-01T19:18:42.433
> 
> 标签：android, sqlite, cursor

我正在尝试检查该值是否存在于列中。例如，我想检查该列是否`artId`包含一些数值。我正在使用以下代码：

```
getStar = db.query(TABLE_NAME, new String[] { "artId" },
                        "artId = " + entryId, null, null,
                        null, null);
        getStar.moveToFirst();
        String star = getStar.toString();
        Log.w("ID COUNT", star);
        if(getStar != null) {
            // do something
        } 
```

哪里`entryId`有数字。

但我总是得到这样的东西：

`W/ID COUNT(11303): android.database.sqlite.SQLiteCursor@41aa4c80`.

我也尝试使用：

```
getStar = db.rawQuery("SELECT count(*) FROM "
+ TABLE_NAME + " WHERE artId = '" + entryId + "'", null); 
```

但我得到了同样的结果。

所以我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:24:34.023

`Cursor`是有效的（非`null`），是的，因为它没有错误。检查它是否有任何数据，而不是。

```
getStar = db.rawQuery("SELECT count(*) FROM " + TABLE_NAME + " WHERE artId = '" + entryId + "'", null);
getStar.moveToFirst();
if (getStar.getInt(0)) { // This will get the integer value of the COUNT(*)
    // It has data
} 
```

我有点不确定上述结果；相反，您可以查询结果的数量：

```
getStar = db.rawQuery("SELECT * FROM " + TABLE_NAME + " WHERE artId = '" + entryId + "'", null);
if (getStar.getCount() > 0) { // This will get the number of rows
    // It has data
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:24:29.163

moveTofirst() 方法尝试将光标移动到第一个位置（从 0 开始），如果可以，则返回 true。否则返回false。所以你可以这样做：

```
if (getStar.moveToFirst) {
// your code
} else {} 
```

如果有一个值 if 语句将被执行，否则它不会

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:24:02.517

您正在记录游标`String`表示，而不是 column 的值`artId`。要从光标中获取列的值，`artId`您必须这样做：

```
int count = -1;
// if the cursor is not empty
if(getStar.moveTofirst())
    count = getStar.getInt(getStar.getColumnIndex("artId");

if(count != -1)
    // do something 
```

# iphone - 使用 Xcode 4.4.1 提交 iPhone5 应用程序

> ID：12679585
> 
> 赞同：2
> 
> 时间：2012-10-01T19:18:46.513
> 
> 标签：iphone, ios, xcode, armv6

> **可能重复：**
> [如果您想支持 iPhone 5，那么带有 armv7 的 iOS 4.3 是最低的吗？](https://stackoverflow.com/questions/12400968/is-ios-4-3-with-armv7-the-lowest-you-can-go-if-you-want-to-support-iphone-5)

我已经为 iPhone 'GiraffeMode' 修改了我的 iOS 应用程序，并使用 xcode 4.5 对其进行了测试。一切都好。我仍然需要支持从 xcode 4.5 中删除的 armv6，所以我使用 xcode 4.4.1 构建了应用程序并将其提交到 App Store。应用通过验证并成功提交。但同一时刻我收到了来自 iTunes Store 的电子邮件：

> 我们发现您最近交付的 %name of app% 存在一个或多个问题。要处理您的交付，必须更正以下问题：
> **无效的启动图像**- 您的应用程序包含具有大小修饰符的启动图像，该大小修饰符仅支持使用 iOS 6.0 SDK 或更高版本构建的应用程序。

这是否意味着我必须在 armv6 和 iPhone5 'GiraffeMode' 之间做出选择？有没有办法两者都选？

# c# - 使用自定义配置部分在运行时更改默认 AppConfig

> ID：12679586
> 
> 赞同：0
> 
> 时间：2012-10-01T19:18:54.610
> 
> 标签：c#, configuration, app-config

我基本上负责我的项目使用大量外部资源的 DLL。我想为我的项目创建一个名为 infrastructure.config 的配置文件，客户项目可以将其复制到他们的项目中，而无需剪切并粘贴到他们自己的应用程序或 Web 配置中。我尝试了以下建议：

[在运行时更改默认 app.config](https://stackoverflow.com/questions/6150644/change-default-app-config-at-runtime?answertab=active#tab-top)

在我尝试使用使用自定义部分的 Log4Net 之前，该解决方案运行良好。当我尝试使用上述链接中的代码时，我收到了一个未知的配置部分。当我使用没有上述代码的相同配置文件时，它可以正常工作。有趣的是，当我尝试使用 TransactionScope 时它爆炸了。因此，在我的配置中使用 TransactionScope 和 configurationSections 的某种组合使其失败。有什么建议么？

我希望每个客户端应用程序或网站都有自己的值配置，而我的 infrsatucture.dll 应该能够组合自己的值、自定义 SOAP 绑定和 Log4Net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:29:00.970

听起来像是[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)有利于解决问题。

我强烈建议不要创建依赖于配置文件（应用程序设置或部分）的应用程序/dll，而是让您的界面公开其工作所需的内容。这些可以是其他 DLL (log4net) 公开的外部类/接口，或者您可以创建自己的并允许其他开发人员根据您所需的抽象/接口类派生具体类。

# c# - 需要在 C# 中创建可视层次结构图

> ID：12679588
> 
> 赞同：0
> 
> 时间：2012-10-01T19:18:58.627
> 
> 标签：c#, sql-server, winforms, visual-studio

我需要创建从数据库读取的应用程序并在我的表单中创建层次结构图，因此我可以从表单访问它们并更改一些属性或更改对象之间的关系，例如 C# 和 SQL 中的“家谱或组织结构”服务器......如果有人知道第 3 方组件来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:25:37.057

天啊！有多种方法可以做到这一点，但我不会为你做功课。这是我开始的方式：

1.  您需要弄清楚数据库中的层次关系。
2.  弄清楚如何将该数据传递给视图（html 或任何平台）。
3.  然后，您需要编写反映层次结构的 CSS。

如果您可以提供数据和更多信息，我可以提供进一步的帮助。

# google-chrome - 带有 php 文件的 google chrome 扩展通知

> ID：12679589
> 
> 赞同：2
> 
> 时间：2012-10-01T19:18:59.023
> 
> 标签：google-chrome, notifications

我正在创建一个 PHP 站点。

我创建了一个 Google Chrome 扩展程序。

我想知道创建新文章时如何创建桌面通知。

我创建了系统。

我开始检查 cookie 的“newestA”值是否是最新文章的索引。

也就是说，当进入最新文章时，如果你没有cookie，或者你有另一个值的cookie，那就是在制作一个cookie，她的值就是最新的文章。

每次我进入一个网站时如何做到这一点，比如谷歌，它会检查我的 cookie 的值是否是 newset 的，如果它是假的，那么它会发出一个带有文章链接的通知。

谢谢，吉尔

# c++ - C ++，将n个参数的函数作为参数传递

> ID：12679590
> 
> 赞同：0
> 
> 时间：2012-10-01T19:19:08.477
> 
> 标签：c++, templates, pointers, parameters, arguments

假设我们有一个包含 n 个变量的函数

```
y = f (x1, ..., xn) 
```

我想将这样的函数作为参数传递。

在 Matlab 中，可以使用以下使用句柄的构造：

```
function y=func(x)
y = sin(x(0)) * cos(x(1))  //Any definition, not important

p_func=@func; //Define handle 
```

可以将句柄用作另一个函数的参数：

```
y = function2(p_func, n); 
```

其中n代表一个维度...

如何使用 C++ 重写此代码？我们使用带有函数模板的简单模型

```
temmplate <typename T>
T func( const T *arg, const short n) {return sin(arg[0]) * cos(arg[1])}; 
```

其中 xi 参数由 n 个元素的一维数组表示。问题是在这种情况下不能使用指向函数模板的指针

```
template <class T>
static T ( *pfunc ) ( const T *arg, const short n ) 
```

只是一个专业化...也许其他模型可能更合适...谢谢您的帮助...

**备注：** 我知道类模板很有用

```
template  <typename T>
class Foo
{ 
    T func( const T *args, const short n);
}; 
```

这个建筑工程：

```
template <class T>
static T ( *pfunc ) ( const T *arg, const short n ) 
```

但它可能不会在库的当前模型中使用（我不能影响这一点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:31:47.943

C++ 是一种*静态*类型语言。C++ 中的每个对象，无论是函数指针还是其他任何对象，都必须具有特定的类型。并且函数指针的类型基于给定要指向的函数的参数类型。

模板不是对象，因此您无法获得指向模板的指针。您可以获得指向模板*实例化的指针。*使用您的`func`定义，`func<int>`是一个接受 a`const int*`和 a的函数`short`。您可以获得指向`func<int>`. 但是`func`是模板；您无法获得指向模板的指针。

这就是为什么 C++ 程序经常抛出仿函数而不是函数指针的原因。Functor 可以有一个模板`operator()`方法，因此您可以像在传递模板函数一样调用它们。但是既然你说你必须使用一个函数指针，那就没有什么可以做的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:30:52.343

我认为这在 C++ 中不容易解决，但有类似情况的方法。你应该看看[boost::bind 和 boost::function](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html)库。它是为绕过在 C++ 中传递函数指针的讨厌细节而设计的（它们也允许传递类方法）。据我记得，他们并没有真正使用通用的 N 而是为任意 N 参数实例化模板。如果您想获得类似的东西，绝对值得一看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:44:43.950

问题不在于“n”。问题是模板化类型 T。

您是否尝试在这里声明一个变量（类型为函数指针）？

```
template <class T>
static T ( *pfunc ) ( const T *arg, const short n ) 
```

如果不实例化模板，这将不起作用。

这是因为否则，类型检查将是不可能的。类型检查器无法检查初始化指针时 T 是否与取消引用时相同。

您可能需要查看更大的上下文。您想在哪里使用该声明？将模板参数移动到该上下文。

例如，您可以有一个带有模板参数 T 的函数或类。在那里，您可以声明、初始化和取消引用任何在其类型中某处具有 T 的函数指针。

也许您可以在分配函数指针的位置“绑定”参数。因此生成的函数将是一个空函数，您可以在不知道参数类型的情况下使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T19:55:37.090

您无法获得指向模板函数的指针，因为模板不是对象，它只是编译时语法构造，产生多个特定函数 -**模板实例化**。模板实例化，例如`f<int>(const int*, short)`是对象并且可以被指向。

如果您只是想要一些简单统一的方式从模板实例化中获取函数指针，请使用`declspec()`（我假设您使用的是现代 C++11 兼容编译器）：

```
template <class T> static T f(const T *, const short )
{
  // Implementation
  ...
}

// Declaring function pointers for int & double
typedef decltype(&f<int>) IntFuncPtr;
typedef decltype(&f<double>) DoubleFuncPtr;

// Sample usage
IntFuncPtr intFunc = &f<int>;
intFunc(NULL, 0);

DoubleFuncPtr doubleFunc = &f<double>;
doubleFunc(NULL, 0); 
```

# html - 在 HTML5 中模仿 Frame 行为

> ID：12679592
> 
> 赞同：1
> 
> 时间：2012-10-01T19:19:21.333
> 
> 标签：html, jquery

我想构建一个具有三个框架布局（页眉、内容和页脚）的站点，页眉和页脚框架包含不重新加载的元素，只有内容框架根据需要重新加载。我想使用 HTML5 构建它。应该采用什么方法来构建它。除了在这里使用 Ajax 之外，还有其他解决方案吗？

# html - 如何为所有文本行缩进文本？

> ID：12679595
> 
> 赞同：1
> 
> 时间：2012-10-01T19:19:23.143
> 
> 标签：html, css

我正在尝试缩进一个标题，只有第一行是缩进的。

```
<a href="LINK" >
<span style="width:220px;margin-left:10px;padding-top:10px;font-size:20px;"><? echo $title ?></span>
</a> 
```

当我使用上面的代码时，它会在多行上返回标题（这是正确的，因为宽度），但只有顶行是缩进的。我不希望文本与宽度的左侧齐平。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:23:06.000

你的问题很神秘。我***想***你是在问如何缩进整个文本块。如果是这样，只需使用填充：

```
padding-left: 10px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:06:01.713

用于`display:block;`跨度。这应该会导致整个文本组移动，而不仅仅是第一行。

# html - 如何防止长文本改变 HTML 表格单元格的大小？

> ID：12679597
> 
> 赞同：0
> 
> 时间：2012-10-01T19:19:23.877
> 
> 标签：html, css, html-table

我有两张桌子：

```
<h3>JVM Garbage Collector</h3>
<table style="width:100%" border="1">
<tr><th>Name</th><th>Description</th><th>Type</th><th>Key</th></tr>
<tr>
<td style="width:25%">PS Scavenge collections</td>
<td style="width:33%">Number of garbage collections by the PS Scavenge collector.</td>
<td style="width:12%">JMX</td>
<td style="width:30%">Object: java.lang:type=GarbageCollector,name=PSScavenge<br/>Attribute: CollectionCount</td>
</tr>
</table>
<h3>JVM Memory Pool</h3>
<table style="width:100%" border="1">
<tr><th>Name</th><th>Description</th><th>Type</th><th>Key</th></tr>
<tr>
<td style="width:25%">Code Cache committed</td>
<td style="width:33%">Committed bytes of the Code Cache memory pool. This is included with HotSpot JVMs, which contains memory used for compilation and storage of native code. It is part of non-heap memory.</td>
<td style="width:12%">JMX</td>
<td style="width:30%">Object: java.lang:type=MemoryPool,name=Code Cache<br/>Attribute: Usage.committed</td>
</tr> 
```

第一个行为正确，但第二个没有根据我的宽度调整大小，我猜这是因为里面的文本内容。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:28:41.080

将 css`word-break:break-all`应用于您想要以这种方式打破的所有 TD。

见[**jsfiddle**](http://jsfiddle.net/8mVas/)

这是一个 CSS3 属性，因此它可能不适用于 IE6 和 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:23:39.593

在所有地方使用 css 自动换行属性。如果它越过指定的宽度，它将断线。

更多信息，请在网上搜索。

# vba - 将列表框复制到另一个

> ID：12679598
> 
> 赞同：2
> 
> 时间：2012-10-01T19:19:27.387
> 
> 标签：vba, ms-access, listbox, ms-access-2010

我正在尝试将 a 复制`listbox`到另一个

所以我`listbox`像这样清除目的地中的所有项目

```
 While Forms!SalesCallInformation!lstMills.ListCount > 0
        Forms!SalesCallInformation!lstMills.RemoveItem (0)
    Wend 
```

然后我复制所有这样的项目

```
 For i = 0 To lstMillsToAdd.ListCount - 1
        Forms!SalesCallInformation!lstMills.AddItem (lstMillsToAdd.Column(0, i) & ";" &   lstMillsToAdd.Column(1, i) & ";" & lstMillsToAdd.Column(2, i))
    Next 
```

问题是在目的地`listbox`，我仍然得到旧物品。但是当我在删除时设置手表`Forms!SalesCallInformation!lstMills.ListCount`时，我可以看到它正在递减，所以它必须删除一些东西。

是刷新表格吗？因为我在插入新项目后尝试这样做：`Forms!SalesCallInformation.Refresh`但我得到了相同的结果。

有人有想法吗？

谢谢

此外，`rowSourceType`设置为`value list`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:37:47.767

这个例子对我有用：

```
Private Sub Button1_Click()
Me.List2.RowSource = Me.List0.RowSource
End Sub

Private Sub Button2_Click()
Me.List2.RowSource = ""
End Sub 
```

两个列表框都是值列表。行源设置为“abc”；“def”；“ghi”

# c# - Moq - 模拟多个参数

> ID：12679599
> 
> 赞同：5
> 
> 时间：2012-10-01T19:19:29.400
> 
> 标签：c#, mocking, moq

我在 Moq 页面上尝试的链接有一半都坏了，包括[他们官方 API 文档](http://www.clariusconsulting.net/labs/moq/index.html)的链接。所以我会在这里问。

我已经成功使用了一个“catch all”参数，如下所示：

```
mockRepo.Setup(r => r.GetById(It.IsAny<int>())).Returns((int i) => mockCollection.Where(x => x.Id == i).Single()); 
```

但是我无法弄清楚如何使用*多个*参数实现相同的行为。

```
mockRepo.Setup(r => r.GetByABunchOfStuff(It.IsAny<int>(), It.IsAny<string>(), It.IsAny<int>())).Returns( ..... ); 
```

这`....`是我无法弄清楚的部分。

* * *

*编辑回应乔丹：*

问题是如何表示 3 个参数而不仅仅是一个。

怎么转：

```
(int i) => mockCollection.Where(x => x.Id == i) 
```

进入：

```
(int i), (string s), (int j) => mockCollection.Where(x => x.Id == i && x.SomeProp == s && x.SomeOtherProp == j) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T19:24:24.907

这与使用单个参数几乎相同：

```
.Returns
      (
         (int i, string s, int x) 
                => mockCollection.Where
                     (
                             x => x.Id == i 
                          && x.SomeProp == s 
                          && x.SomeOtherProp == x
                     )
      ); 
```

或者使用返回的通用变体：

```
.Returns<int, string, int>
     (
          (i, s, x) 
               => mockCollection.Where
                    (
                         x => x.Id == i 
                         && x.SomeProp == s 
                         && x.SomeOtherProp == x
                    )
     ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T19:28:36.150

我认为你需要的是：

```
 mockRepo
       .Setup(r => r.GetByABunchOfStuff(It.IsAny<int>(), It.IsAny<string>(), It.IsAny<int>()))
       .Returns<int,string,int>((id, someProp, someOtherProp) =>
           mockCollection.Where(x => x.Id == i && x.SomeProp == s && x.SomeOtherProp == x)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:32:20.777

你的意思是你怎么写正确的lambda？

```
mockRepo.Setup(r => r.GetByABunchOfStuff(It.IsAny<int>(), It.IsAny<string>(), It.IsAny<int>()))
        .Returns((int i, string s, int i2) => doSomething() ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:32:38.000

请参阅 Mark Seeman 对此问题的回答：

[在 Moq Callback() 调用中设置变量值](https://stackoverflow.com/questions/2494930/settings-variable-values-in-a-moq-callback-call)

它可能会有所帮助。

# javascript - 如何正确清除旋转的 HTML5 画布上下文？

> ID：12679601
> 
> 赞同：1
> 
> 时间：2012-10-01T19:19:39.227
> 
> 标签：javascript, html, canvas, html5-canvas

我需要清除一个旋转的矩形并在画布上再次绘制它，无论是在同一个地方还是在其他地方。问题是，清除的部分与矩形的边界不匹配，留下脏位。

```
var cvs = document.getElementById('testcanvas');
var ctx = cvs.getContext('2d');

var rectColor = 'green';
var x = 300;
var y = 10;
var width = 200;
var height = 150;
var rotation = 0;
setInterval(animate, 100);

function animate(){
    clearRect();
    update();
    drawRect();    
}

function clearRect(){
    ctx.save();
    ctx.rotate(rotation);
    ctx.clearRect(x, y, width, height);
    ctx.restore();
}

function update(){
    rotation += 0.1;
    x++;
}

function drawRect(){
    ctx.save();
    ctx.fillStyle = rectColor;
    ctx.rotate(rotation);
    ctx.fillRect(x, y, width, height); 
    ctx.restore();        
} 
```

[http://jsfiddle.net/MFz2z/15/](http://jsfiddle.net/MFz2z/15/)

另一个问题是，当画布旋转时，clearRect() 在 Firefox 上的行为有所不同，通过清除旋转矩形使用的整个未旋转空间。
[http://jsfiddle.net/MFz2z/17/](http://jsfiddle.net/MFz2z/17/)

除了清除整个画布并再次绘制所有内容之外，是否有任何解决方法？我使用 Chrome 22 和 Firefox 15.0.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:51:53.147

这可能是由于像素的抗锯齿产生了额外的花絮。

您可以使用此[http://jsfiddle.net/MFz2z/28/](http://jsfiddle.net/MFz2z/28/)并基本上从每一侧清除 1 个像素。

# jquery - jQuery 仅显示基于特定列 rel 属性的表行

> ID：12679608
> 
> 赞同：0
> 
> 时间：2012-10-01T19:20:00.523
> 
> 标签：jquery

我有这张表，目前有 1200 多行，其中这些行有一个列，其中有一个 3 点 (0.0.0) 版本号。因此，除非提出更好的方法，否则我目前至少拥有的是。我正在寻找的列有一个类和一个 rel。rel 的值与为该列显示的值相同。

我还有一个选择框，其中列出了这些相同的版本。这个想法是能够选择一个版本并让表格隐藏所有未选择版本的行，只留下所选版本可见。

这是我目前的一次尝试失败。我尝试了一些变体，但最终还是出现了某种语法错误。

```
$('#client_version').change(function()
{
    var vers = $(this +' option:selected').val();
    $('.zm_ver').each(function(index, elem)
    {
        var theCol = $(elem);
        if(theCol.attr('rel') == vers){alert('yes');return true;}
        else
        {
            theCol.parent().hide();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:22:55.210

您可以使用：

```
$('#client_version').change(function() {
    $('.zm_ver[rel!="'+this.value+'"]').parent().hide();
}); 
```

*注意：* `this.value`为您提供当前选择的值`<select>`

# vb.net - 在 vb 2010 中使用 Web 服务

> ID：12679609
> 
> 赞同：0
> 
> 时间：2012-10-01T19:20:03.893
> 
> 标签：vb.net, visual-studio-2010, web-services

抱歉，我已经有一段时间没有使用 MS Web 服务客户端了。我正在使用 web developer 2010。我创建了一个返回的 web 方法：

```
-<NewDataSet xmlns=""> -<TC diffgr:id="TC1" msdata:rowOrder="0">
 <SalesN>25</SalesN> 
  <PctDiscount>0.0000</PctDiscount> 
   <SubDiscount>0.0000</SubDiscount> 
 </TC> 
<TC diffgr:id="TC2" msdata:rowOrder="1"/> 
 -<TC diffgr:id="TC3" msdata:rowOrder="2"> 
  <PctDiscount>0.0000</PctDiscount> 
   <SubDiscount>0.0000</SubDiscount> 
   <SalesT>685.89</SalesT> 
</TC>
... 
```

我正在尝试获取 SalesN 和 SalesT 中的信息

我的 aspx 按钮单击如下所示：

```
Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim date1 As String
    Dim date2 As String
    Dim myString As String
    date1 = TextBox1.Text
    date2 = TextBox2.Text

    Dim myreport As New ServiceReferenceReport.wsReportEngineSoapClient
    myreport.GetSalesTotals(date1, date2)
End Sub 
```

有人可以指点我的教程，或者刷新我的记忆吗？

我已经加载了一个数据网格，但似乎无法解析出数据元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:17:14.117

知道了...

```
 Dim date1 As String
    Dim date2 As String
    date1 = TextBox1.Text
    date2 = TextBox2.Text

    Dim returnds As New DataSet
    Dim myreport As New ServiceReferenceReport.wsReportEngineSoapClient
    returnds = myreport.GetSalesTotals(date1, date2)
    Dim i As Integer
    Dim current As String
    For i = 0 To returnds.Tables(0).Rows.Count - 1
        If IsDBNull(returnds.Tables(0).Rows(i)("SalesN")) = True Then
            current = ""
        Else
            current = CStr(returnds.Tables(0).Rows(i)("SalesN"))
            Label1.Text = current
        End If
        If IsDBNull(returnds.Tables(0).Rows(i)("SalesT")) = True Then
            current = ""
        Else
            current = CStr(returnds.Tables(0).Rows(i)("SalesT"))
            Label2.Text = current
        End If
    Next

End Sub 
```

# symfony - JMSSerializer 反序列化集合

> ID：12679611
> 
> 赞同：18
> 
> 时间：2012-10-01T19:20:15.890
> 
> 标签：symfony, doctrine-orm, jmsserializerbundle

我在反序列化学说集合的序列化集合时遇到问题。找不到关于那个和任何主题的文档，我是 JMSSerializer 的新手。当我尝试反序列化时：

```
$collection = $serializer->deserialize($jsonData,'Doctrine\Common\Collections\ArrayCollection','json'); 
```

$collection 为空

当我设置为 null 而不是类名时，我在结果上有 assoc 数组。有没有一种优雅的方式来反序列化那个json？

编辑：对不起。这是序列化的集合：

```
[{"id":88,"name":"Poland","created_at":"2012-09-28T11:59:06+0000"},{"id":90,"name":"Great Britain","created_at":"2012-09-28T11:59:06+0000"}] 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-02T08:37:11.403

哈！发现我做错了什么:) 我给反序列化方法错误的类型。应该：

```
$serializer->deserialize($jsonData, 'ArrayCollection<EntityName>', 'json'); 
```

它给了我一系列美丽的实体。

# c++ - 非常量引用的无效初始化

> ID：12679612
> 
> 赞同：0
> 
> 时间：2012-10-01T19:20:17.997
> 
> 标签：c++, initialization, most-vexing-parse

好吧，我正试图找出这个错误，到目前为止，我完全没有运气。我这样做是为了做作业，这就是为什么我不使用包含的课程。

以下是相关代码：

```
//Will return an array where each element is the sum of the respective sums in the added         arrays
Vec& Vec::operator+(Vec& v2) const{
    Vec ret();
    if(mySize>0){
        Vec ret(mySize);
        for(unsigned i = 0;i<mySize;i++){
            ret[i]=v2[i]+myArray[i];
        }
    }
    else{
    }
    return ret;
} 
```

从 .h 文件中...：

```
Vec& operator+ (Vec& v2) const; 
```

这会引发错误：“从 'Vec (*)()' 类型的右值对 'Vec&' 类型的非常量引用的初始化无效”我对 C++ 完全陌生，因此将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T19:22:27.130

```
Vec ret(); 
```

被视为一个函数的前向声明，它不带参数并返回一个`Vec`. 请参阅：[最令人头疼的解析。](http://en.wikipedia.org/wiki/Most_vexing_parse)

接下来，您将返回对局部变量的引用，这很糟糕。`ret`函数返回后立即超出范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:22:17.340

实际的错误是您在运算符内部声明了一个函数，而不是声明了一个`Vec`对象。

```
Vec ret(); 
```

您可以通过省略`()`：

```
Vec ret; 
```

除此之外，您还有一个基本的设计错误，因为您试图返回对运算符范围本地变量的引用，从而导致引用悬空。表达加法运算符的常用方法是让它返回一个新对象，并且通常实现为具有签名的非成员函数，例如

```
Vec operator+(const Vec& lhs, const Vec& rhs); 
```

这可以根据增量成员运算符来实现

```
Vec& operator+=(const Vec& rhs); 
```

这个可以返回一个引用，`this`因此没有悬空引用。那么示例实现 od`operator+`将是

```
Vec operator+(Vec lhs, const Vec& rhs)
{
    return lhs += rhs;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:37:53.883

正如其他人所说`ret`，您认为默认构造 a的初始声明`Vec`实际上是转发一个不带参数并返回 a 的函数`Vec`。AKA[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

此外，if 语句中 'ret' 的[变量隐藏](http://en.wikipedia.org/wiki/Variable_shadowing)意味着您没有修改您期望返回的变量。您可能想要更像这样的东西：

```
Vec Vec::operator+(const Vec& v2) const{
    Vec ret(mySize);
    if(mySize>0){
        for(unsigned i = 0;i<mySize;i++){
            ret[i]=v2[i]+myArray[i];
        }
    }
    else{
    }
    return ret;
} 
```

# ember.js - ember-data“findMany”必须正确加载什么 json 结构？

> ID：12679613
> 
> 赞同：1
> 
> 时间：2012-10-01T19:20:18.443
> 
> 标签：ember.js, ember-data

我正在做我的第一个 hasMany 与 ember-data 的关系，并且总是很有趣

> “未捕获的错误：断言失败：您的服务器返回了带有密钥 0 的哈希，但您没有映射”

这通常意味着我没有我所谓的“ember”友好格式的 json 结构。

我正在使用 django rest 框架为 django 构建我自己的 REST 适配器，所以我很好奇在没有错误的情况下侧载应该是什么样子。

目前返回的 json 如下所示（显然没有与它的会话相关联，但也许 ember 已经知道如何连接它？）

> [{“id”：2，“名称”：“FooBar”}]

模型看起来像这样

```
CodeCamp.Session = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string'),
    room: DS.attr('string'),
    desc: DS.attr('string')
});                 

CodeCamp.Speaker = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string'),
    session: DS.belongsTo('CodeCamp.Session')
}); 

CodeCamp.Session.reopen({
    speakers: DS.hasMany('CodeCamp.Speaker')
}); 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:30:39.553

json结构应该是这样的

```
{ speakers: [{ id: 2, name: "FooBar" }] } 
```

发现这个提交表明我只需要将我的 json 包装在一个命名的字典中

[https://github.com/Kurki/data/commit/f59ad5bc9718634b6f3d59356deae0bf97a1bbd5](https://github.com/Kurki/data/commit/f59ad5bc9718634b6f3d59356deae0bf97a1bbd5)

所以这是我现在在我的 django 适配器中的自定义 json 方法

```
 findMany: function(store, type, ids) {
            var root = this.rootForType(type), plural = this.pluralize(root), json = {};
            this.django_ajax(this.buildURL(root, ids), "GET", {
                success: function(pre_json) {
                    json[plural] = pre_json;                                                                       
                    this.sideload(store, type, json, plural);
                    store.loadMany(type, json[plural]);
                }
            });
        } 
```

# php - 使用php将项目添加到数组中的数组？

> ID：12679617
> 
> 赞同：0
> 
> 时间：2012-10-01T19:21:02.417
> 
> 标签：php, arrays

我有一个数组，该数组包含存储在原始数组中的一个键中的更多数据。

例如：

```
$array2 = array('some_data');
$array1 = array(
'username' => $username,
'password' => $password,
'data' => $array2); 
```

array1 也可以有多个出现，另一个词存储多个用户的数据。如何向 $array1 中的数据数组添加更多“数据”？

我试着做

```
$array1[0]['data'][] = array('diff_data'); 
```

但我不断收到错误。有一个更好的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:40:29.280

您可以将新数据添加到

```
$array1['data'][] = 'new data'; 
```

你可以像这样访问这些数据：

```
echo ($array1['data'][0]); 
```

其中 0 是 array2 元素的索引。

# c - PostgreSQL 模块 - 如何将参数数组映射到函数中？

> ID：12679619
> 
> 赞同：1
> 
> 时间：2012-10-01T19:21:02.980
> 
> 标签：c, postgresql, gcc

我正在尝试将一点 C 测试代码转换为 PostgreSQL v1 模块

代码最初设计为一个简单的命令行，它接受一个可变数字 - 一个数组 - 文本参数；从 3 到 7

原始代码的声明被注释；我现在正试图将其转换为 PG 共享对象*函数*。该函数的所有参数都是文本字符串（基本命令、选项等）

如何将数组声明/传递给函数？

```
 PG_FUNCTION_INFO_V1(embed_0);

Datum
embed_0(PG_FUNCTION_ARGS)

// THIS was the declaration when it was a C executable:
// int main(int argc, char *argv[])
{
// don't think mapping argc to a PG type is needed here, right?
// (argc is not a parameter?)
int     *argc; // = PG_GETARG_INT32(0);
char    argv[] = PG_GETARG_TEXT_P(0);

int i;
Object *pName, *pCall, *pPart1, *pPart2, *pArgs, *pValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:12:47.027

如果您有可变数量的参数，您需要：

*   声明它[`VARIADIC`](http://www.postgresql.org/docs/current/static/sql-createfunction.html)；
*   为具有不同数量参数的函数创建*n 个不同的签名；*或者
*   仅`C`创建最通用的形式，即 7 参数变体，然后为调用最通用形式的更少参数的情况创建 SQL 函数包装器。

如果你真的只需要 3、4、5、6 和 7 个参数的版本，我会这样做：

```
CREATE FUNCTION embed0(text,text,text,text,text,text,text) RETURNS text
LANGUAGE 'C' AS 'embed0','embed0';

CREATE OR REPLACE FUNCTION embed0(text,text,text) RETURNS text AS $$
SELECT embed0($1,$2,$2,NULL,NULL,NULL,NULL);
$$ LANGUAGE 'SQL';

// ... etc 
```

如果 7 args 只是一个任意的上限，并且您实际上可以采用任意数量的参数，那么您应该只写：

```
CREATE FUNCTION embed0(text,text,text,VARIADIC text) RETURNS text
LANGUAGE 'C' AS 'embed0','embed0'; 
```

并处理函数中的变量参数`C`。`concat`有关如何操作的功能，请参阅 PostgreSQL 源代码。它的实现`text_concat`在`src/backend/utils/adt/varlena.c`当前 git head 的第 3842 行；您的行号会有所不同。大部分工作都是在`concat_internal`.

另一个例子是`format`具有 C 实现（`text_format`通过`pg_proc.h`在 虽然是一个更复杂的函数，但作为一个示例对您来说可能更好，因为它在一个地方完成所有工作，而不是拆分为辅助函数调用。它是在其中声明的，但如果它是在 SQL 中声明的，它看起来像：`varlena.c``git grep '^text_format'``pg_proc.h`

```
CREATE FUNCTION format(text, VARIADIC text) RETURNS text AS 'internal','text_format'; 
```

在那里，您会看到使用宏`VARIADIC`可以像访问任何其他 from 一样访问参数。宏报告传递的参数数量。arguments 可能为 null，因此您必须使用和处理 null 参数的情况。`C``PG_GETARG_...(argno)``PG_NARGS()``VARIADIC``PG_ARGISNULL(argno)`

所以：我会用, ,将它写成一个`VARIADIC`函数。因为 Pg 的函数不能用零可变参数隐式调用，所以我会为 3 参数情况编写一个包装器：`PG_NARGS``PG_GETARG_TEXT_P``PG_ARGISNULL``VARIADIC`

```
CREATE OR REPLACE FUNCTION embed_0(text,text,text) RETURNS text AS $$
SELECT embed_0($1,$2,$2, VARIADIC ARRAY[]::text[]);
$$ LANGUAGE 'SQL'; 
```

，传递一个空数组作为可变参数。这样你也可以用 3 个参数调用它。

**顺便说一句，在编码时要注意 Pg 中的字符串`text`不是以空结尾的，这与传递给`main()`. 您必须使用 PostgreSQL 提供的长度。**. 请参阅`src/include/fmgr.h`、教程和源代码中函数中的文本处理。不要使用`strlen`, `strcat`,`strcpy`等，因为它们需要以空字符结尾的字符串。

# java - GPS over USB 示例 Java 或其他一些 Windows 程序？

> ID：12679621
> 
> 赞同：1
> 
> 时间：2012-10-01T19:21:05.873
> 
> 标签：java, gps, usb

我希望根据 GPS 记录运动，并计划将其记录在车内的笔记本电脑上。看起来 GlobalSat BU-353 是一个不错的选择，但我不清楚如何为实际接收/记录编写程序。现有的[答案](https://stackoverflow.com/questions/7790075/how-to-get-usb-bluetooth-gps-receiver-location-using-java-se)似乎是串行的，并且[似乎对 USB 系统没有帮助](http://en.wikibooks.org/wiki/Serial_Programming/Serial_Java)。我可以将 USB 转串口转换器与基于串行的 GPS 设备一起使用，但我不喜欢这种复杂性。

*   你能给我一个工作的例子吗？我不介意使用一门外语（也许是 Python），只要我可以在 Windows 上运行它而不会造成太多的安装/编程问题。请指出可以做到这一点的证据，以及如何做到这一点。最好是使用 x USB 接收器测试的工作示例。
*   我还想了解有关兼容性问题的风险的信息。我希望那里有许多程序以及许多 GPS 设备，因此已经建立了一个标准（如 USB 相机），但真的是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:08:57.020

查找 Prolific Technology USB 转串口转换器软件。您安装它，然后可以从 Windows COM 端口之一读取您的 USB 设备数据。我正在使用 RXTX 库来读取获取我的 USB 数据 (RXTXcomm.jar) 的 com 端口。

这有点痛苦，因为您不确定要使用哪个 COM 端口，这可能取决于将事物插入机器上的 USB 端口的顺序等。在某些机器上，相同的物理端口然而，USB 端口往往倾向于同一个 COM 端口，所以这可能会让事情变得足够可预测。无论如何，这就是我用来读取 USB 数据的方法。至少它是安装的转换器，它不涉及代码，并且从那里一切都是java。

是的，GPS 输出有一个事实上的标准，即 NMEA 数据字符串。我遇到的所有 USB GPS 设备都使用这个。从本质上讲，一旦它们被打开（这意味着一旦它们被插入），它们就会开始以 NMEA 格式发出数据字符串。第一个字母指定报告的记录类型，字符串的其余部分是数据。我确信其中一些还具有查询功能等，但考虑到 GPS 程序的一般性质，它在很多情况下也适用，只是让设备吐出字符，直到有人拔掉它。每个字符串都小于某个合理的最大字符数（80？132？不记得了），并以某种 EOL 终止。我的代码会全部读取它们，并且只处理它感兴趣的那些。

希望这能让你开始。

# node.js - png-js：无法读取未定义的属性“8”

> ID：12679623
> 
> 赞同：2
> 
> 时间：2012-10-01T19:21:15.407
> 
> 标签：node.js

每当我尝试在 Node.js 中使用 png-js 时，都会收到这个奇怪的错误：

```
/home/anderson/node_modules/png-js/png-node.js:152
      b1 = this.data[this.pos++] << 24;
                    ^
TypeError: Cannot read property '8' of undefined
    at PNG.readUInt32 (/home/anderson/node_modules/png-js/png-node.js:152:21)
    at new PNG (/home/anderson/node_modules/png-js/png-node.js:56:26)
    at /home/anderson/node_modules/png-js/png-node.js:34:15
    at [object Object].<anonymous> (fs.js:88:5)
    at [object Object].emit (events.js:67:17)
    at Object.oncomplete (fs.js:1059:12) 
```

这是产生此输出的程序：

```
var PNG = require('png-js');
PNG.decode('some.png', function(pixels) {
    // pixels is a 1d array of decoded pixel data
}); 
```

过去，我可以毫无问题地使用 png-js 模块。这个模块是否可能与我安装的另一个 node.js 模块冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:40:18.517

在这种特殊情况下，出现错误消息是因为`some.png`与 node.js 脚本位于同一文件夹中的文件不存在。

# wordpress - 如何对多个 wordpress 自定义字段值进行排序？

> ID：12679625
> 
> 赞同：6
> 
> 时间：2012-10-01T19:21:33.440
> 
> 标签：wordpress, sorting, custom-type

显示按“价格”自定义字段排序的“产品”类型的帖子：

```
$query = new WP_Query( 
                      array ( 'post_type' => 'product', 
                              'orderby' => 'meta_value', 
                              'meta_key' => 'price' ) 
                     ); 
```

如果还想按“尺寸”订购，我应该使用哪个代码？

**我需要对自定义字段进行多重排序的**另一个示例：****

 **显示具有“事件”类型的帖子，按“Start_Hour”排序，然后按“Start_Minute”排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T20:36:14.917

感谢[Bainternet](https://wordpress.stackexchange.com/users/2487/bainternet)，我找到了解决方案：

```
function orderbyreplace($orderby) {
    return str_replace('menu_order', 'mt1.meta_value, mt2.meta_value', $orderby);
} 
```

和...

```
$args = array(
  'post_type'=>'Events',
  'orderby' => 'menu_order',
  'order' => 'ASC',
  'meta_query' => array(
        array(
            'key' => 'Start_Hour',
            'value' => '',
            'compare' => 'LIKE'
        ),
        array(
            'key' => 'Start_Minute',
            'value' => '',
            'compare' => 'LIKE'
        )
    )
);

add_filter('posts_orderby','orderbyreplace');
$loop = new WP_Query( $args );
remove_filter('posts_orderby','orderbyreplace'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-24T23:46:28.963

我认为这在 Wordpress 3.7 中略有改变。

我不得不改变

```
return str_replace('menu_order', 'mt2.meta_value, mt1.meta_value', $orderby); 
```

进入

```
return str_replace('wp_posts.menu_order', 'mt2.meta_value, mt1.meta_value', $orderby); 
```

感谢您的初步解决方案！[已编辑]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:49:03.023

这是一个使用多个 meta_key 和 orderby 的示例，我认为它们应该可以工作：

```
$params = array(
'post_type' => 'product',
'meta_query' => array(
    array(
            'key' => 'price',
            'value' => '',
            'compare' => 'LIKE'
    ),
    array(
            'key' => 'size',
            'value' => '',
            'compare' => 'LIKE'
    )
),
'orderby' => 'price size',
'order' => 'ASC'
);
$query = new WP_Query;
$resulting_obj = $query->query($params); 
```

您需要更多地使用 meta_query 项目，尤其是 'value' 参数。请仔细查看“自定义字段参数”部分中的[http://codex.wordpress.org/Class_Reference/WP_Query 。](http://codex.wordpress.org/Class_Reference/WP_Query)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-06T13:16:54.827

如果您的自定义字段之一是 meta_key 而另一个是表的普通列，则不需要任何过滤器或挂钩来对多个自定义字段进行排序，而不是在查询中使用这些参数/参数。

```
'meta_key' => 'KEY_NAME',
'orderby' => 'meta_value_num SECOND_COLUMN_NAME',
'order' => 'ASC' or 'order' => 'DESC' 
```

这里的顺序`meta_value_num`和`SECOND_COLUMN_NAME`问题，您可能会看到基于顺序的不同 2 结果。**

# sql - Oracle 11g - 运行windows批处理文件在sqlplus中运行多个sql文件

> ID：12679626
> 
> 赞同：3
> 
> 时间：2012-10-01T19:21:35.093
> 
> 标签：sql, oracle11g, sqlplus, batch-file

我想使用单个批处理文件按顺序执行多个 sql.. IE: sql2 script calls a table created by sql1 script.. etc..

这是我到目前为止的批处理代码..它可以运行单个 sql 文件，但我需要它来运行第一个，然后是下一个..提前致谢。

```
 @ECHO OFF
echo.
echo.
SET /P uname=Username:
echo.
echo.
SET /P pass=Password:
echo.
echo.
SET /P mydatabase=Database:
echo.
echo.
set oracle_sid=ins

sqlplus -s %uname%/%pass%@%mydatabase% @J:/A/scripts/_TABLES/Table1_.sql \n
sqlplus -s %uname%/%pass%@%mydatabase% @J:/A/scripts/_TABLES/Table2_.sql \n
sqlplus -s %uname%/%pass%@%mydatabase% @J:/A/scripts/_TABLES/Table3_.sql \n
sqlplus -s %uname%/%pass%@%mydatabase% @J:/A/scripts/_TABLES/Table4_.sql \n
sqlplus -s %uname%/%pass%@%mydatabase% @J:/A/scripts/_TABLES/Table5_.sql \n
sqlplus -s %uname%/%pass%@%mydatabase% @J:/A/scripts/_TABLES/Table6_.sql \n
sqlplus exit
pause 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T19:23:30.960

制作一个“驱动程序”sql脚本。

里面看起来类似于：

```
@Table1_.sql
@Table2_.sql
@Table3_.sql
@Table4_.sql 
```

然后只需从操作系统调用一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T12:22:46.220

或者你可以一起运行它们。

```
cat Table1_.sql > /tmp/temp.sql
cat Table1_.sql >> /tmp/temp.sql
cat Table1_.sql >> /tmp/temp.sql
sqlplus USERNAME/PASSWORD@DOMAIN @/tmp/temp.sql 
```

# java - 如何在 spring mvc 3.1 中保存状态？

> ID：12679628
> 
> 赞同：0
> 
> 时间：2012-10-01T19:21:41.007
> 
> 标签：java

我不知道它是否是“保存状态”这个词，但如果我的控制器中有这个方法：

```
@RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model, HttpServletRequest request) {
        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);
        String formattedDate = dateFormat.format(date);
        model.addAttribute("serverTime", formattedDate );
        model.addAttribute("email", new Email());
        model.addAttribute("imgBg", getRandomBg(request.getRemoteHost()));
        Map sexoOpts = new HashMap();
        sexoOpts.put("M", "homem");
        sexoOpts.put("F", "mulher");

        Map sexoOpts2 = new HashMap();
        sexoOpts2.put("M", "Busco por homens");
        sexoOpts2.put("F", "Busco por mulheres");

        model.addAttribute("sexoList1", sexoOpts);
        model.addAttribute("sexoList2", sexoOpts2);
        return "index";
    } 
```

在其他方法中我有：

```
@RequestMapping(value = "/save-email", method = RequestMethod.POST)
    public String doSaveEmail(@Valid @ModelAttribute("email") Email email,BindingResult result, Model model, HttpServletRequest request){
        model.addAttribute("imgBg", getRandomBg(request.getLocalAddr()));
        Map sexoOpts = new HashMap();
        sexoOpts.put("M", "homem");
        sexoOpts.put("F", "mulher");

        Map sexoOpts2 = new HashMap();
        sexoOpts2.put("M", "Busco por homens");
        sexoOpts2.put("F", "Busco por mulheres");

        model.addAttribute("sexoList1", sexoOpts);
        model.addAttribute("sexoList2", sexoOpts2);

        if (result.hasErrors()){
            return "index";
        }
        Date date = new Date();
        email.setCreationDate(date);

        boolean saved = false;
        try{
            saved = emailBo.saveEmail(email);
        }catch(Exception e){
            e.printStackTrace();
        }
        model.addAttribute("email", new Email());
        if (saved){
            model.addAttribute("saveStatus", "ok");
        }else{
            model.addAttribute("saveStatus", "false");
        }

        return "index";
    } 
```

我每次都必须重新创建哈希图以放置性感选项，因为它会再次回到同一页面（index.jsp）？当我从家里去保存电子邮件并返回时，没有办法保存这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:47:11.277

“弹簧方式”是将两个哈希图声明为实例变量并将它们连接到您的应用程序上下文（DI）中 - 可能将映射存储在属性文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:32:09.623

我会将其保存`Map`为常量，这样它就存在于方法之外，但仍然可以从内部引用。

```
public class MyController {
    private static Map sexoOpts = new HashMap();
    private static Map sexoOpts2 = new HashMap();

    static {
        sexoOpts.put("M", "homem");
        sexoOpts.put("F", "mulher");
        sexoOpts2.put("M", "Busco por homens");
        sexoOpts2.put("F", "Busco por mulheres");
    }

    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model, HttpServletRequest request) {
        //I have access to sexoOpts and sexoOpts2, so there is no
        //need to instantiate them in here anymore...
    }

    @RequestMapping(value = "/save-email", method = RequestMethod.POST)
    public String doSaveEmail(@Valid @ModelAttribute("email") Email email,BindingResult result, Model model, HttpServletRequest request){
        //I have access to sexoOpts and sexoOpts2, so there is no
        //need to instantiate them in here anymore...
    }
} 
```

# c# - 在 VisualStudio 中创建 IronPython 项目时出错；“调用的目标已抛出异常。”

> ID：12679632
> 
> 赞同：2
> 
> 时间：2012-10-01T19:21:43.107
> 
> 标签：c#, python, .net, ironpython

我有一个在 C# 上内置 GUI 的解决方案，我想在解决方案中创建一个 IronPython 项目，该项目将从 C# 代码中调用，但我什至无法创建它。

我正在使用 CodePlex 和 IronPython 2.7 中的 python 工具

编辑：这是我在 ActivityLog.xml 中找到的

> `System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Reflection.TargetInvocationException: Failed to load language 'IronPython 2.7.2.1': Method not found: '!!1[] Microsoft.Scripting.Utils.ArrayUtils.ConvertAll(!!0[], System.Func`2<!!0,!!1>)'. ---> System.MissingMethodException: Method not found: '!!1[] Microsoft.Scripting.Utils.ArrayUtils.ConvertAll(!!0[], System.Func`2)'. at IronPython.Runtime.PythonContext..ctor(ScriptDomainManager manager, IDictionary`2 options) --- End of inner exception stack trace --- at Microsoft.Scripting.Runtime.LanguageConfiguration.LoadLanguageContext(ScriptDomainManager domainManager, Boolean& alreadyLoaded) at Microsoft.Scripting.Runtime.DlrConfiguration.LoadLanguageContext(ScriptDomainManager manager, LanguageConfiguration config) at Microsoft.Scripting.Runtime.DlrConfiguration.TryLoadLanguage(ScriptDomainManager manager, AssemblyQualifiedTypeName providerName, LanguageContext& language) at Microsoft.Scripting.Runtime.ScriptDomainManager.GetLanguageByTypeName(String providerAssemblyQualifiedTypeName) at Microsoft.Scripting.Hosting.ScriptRuntime.GetEngineByTypeName(String assemblyQualifiedTypeName) at IronPython.Hosting.Python.GetEngine(ScriptRuntime runtime) at Microsoft.IronPythonTools.Interpreter.RemoteInterpreter..ctor() at Microsoft.IronPythonTools.Interpreter.RemoteInterpreterProxy..ctor() --- End of inner exception stack trace --- at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) at System.Activator.CreateInstance(Type type, Boolean nonPublic) at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, StackCrawlMark& stackMark) at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) at System.Activator.CreateInstance(String assemblyString, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityInfo, StackCrawlMark& stackMark) at System.Activator.CreateInstance(String assemblyName, String typeName) at System.AppDomain.CreateInstance(String assemblyName, String typeName) at System.AppDomain.CreateInstanceAndUnwrap(String assemblyName, String typeName) at System.AppDomain.CreateInstanceAndUnwrap(String assemblyName, String typeName) at Microsoft.IronPythonTools.Interpreter.IronPythonInterpreter.CreateDomain(RemoteInterpreterProxy& remoteInterpreter) at Microsoft.IronPythonTools.Interpreter.IronPythonInterpreter.InitializeRemoteDomain() at Microsoft.IronPythonTools.Interpreter.IronPythonInterpreter..ctor(IronPythonInterpreterFactory factory, PythonTypeDatabase typeDb) at Microsoft.IronPythonTools.Interpreter.IronPythonInterpreterFactory.CreateInterpreter() at Microsoft.PythonTools.Repl.PythonReplEvaluator.get_ReplAnalyzer() at Microsoft.PythonTools.Extensions.GetAnalyzer(ITextView textView) at Microsoft.PythonTools.Intellisense.IntellisenseControllerProvider.TryCreateIntellisenseController(ITextView textView, IList`1 subjectBuffers) at Microsoft.VisualStudio.Language.Intellisense.Implementation.IntellisenseManagerConnectionListener.<>c_*DisplayClass5.b*_1(IIntellisenseControllerProvider provider) at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.InstantiateExtension[TExtension,TMetadata,TExtensionInstance](Object errorSource, Lazy`2 provider, Func`2 getter)`

生成的代码如下（这个项目在解决方案中仍然没有显示）

项目1.py：

```
print("hello world") 
```

`print "Hello world"`由于我使用的是 Python 2.7，因此将上述内容更改为，但它没有解决问题

项目1.pyproj：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>690e6ad3-edb2-42cc-8db1-85cdf487d241</ProjectGuid>
    <ProjectHome>.</ProjectHome>
    <StartupFile>WebScraper.py</StartupFile>
    <SearchPath>
    </SearchPath>
    <WorkingDirectory>.</WorkingDirectory>
    <InterpreterId>80659ab7-4d53-4e0c-8588-a766116cbd46</InterpreterId>
    <LaunchProvider>IronPython (.NET) launcher</LaunchProvider>
    <InterpreterVersion>2.7</InterpreterVersion>
    <OutputPath>.</OutputPath>
    <Name>WebScraper</Name>
    <RootNamespace>WebScraper</RootNamespace>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <DebugSymbols>true</DebugSymbols>
    <EnableUnmanagedDebugging>false</EnableUnmanagedDebugging>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <DebugSymbols>true</DebugSymbols>
    <EnableUnmanagedDebugging>false</EnableUnmanagedDebugging>
  </PropertyGroup>
  <ItemGroup>
    <None Include="WebScraper.py" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.Common.targets" />
</Project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T20:25:19.037

最后的解决方案是卸载所有 IronPython（2.6 和 2.7），然后卸载 Visual Studio 的 Python 工具。然后重新安装 IronPython 2.7 并且在选择组件时不安装任何“工具”（我认为这是一个重要的部分，因为据我了解它们相互冲突）然后重新安装 Python 工具版本 1.5（我使用 VS 2012）

# javascript - 光标图像的位置

> ID：12679636
> 
> 赞同：0
> 
> 时间：2012-10-01T19:22:16.223
> 
> 标签：javascript, jquery, image, wordpress

我有以下代码在 wordpress 中使用“光标轨迹”。插入后，“光标轨迹”可见，但找不到图像位置

```
$(document).ready(function() { 

    $(document).mousemove(function(e) {

            //create img elements having pointer.png in their src 
            pointer = $('<img>').attr({'src':'pointer.png'});

            //and append them to document
            $(document.body).append(pointer); 

            //show them at mouse position & fade out slowly
            pointer.css({
                    'position':'absolute',
                    top: e.pageY +2 ,    //offsets
                    left: e.pageX +2   //offsets
                }).fadeOut(1500);   
});
}); 
```

我已经编辑了图像光标的路径，如下所示：

```
$(document).ready(function() { 

    $(document).mousemove(function(e) {

            //create img elements having pointer.png in their src 
            pointer = $('<img>').attr({'wp-content/uploads/2012/07/':'meerkat2.gif'});

            //and append them to document
            $(document.body).append(pointer); 

            //show them at mouse position & fade out slowly
            pointer.css({
                    'position':'absolute',
                    top: e.pageY +2 ,    //offsets
                    left: e.pageX +2   //offsets
                }).fadeOut(1500);   
});
}); 
```

请有人可能指出为什么图像源的路径不正确？

# ios6 - UITapGestureRecognizer 不会在 IOS 6 中触发

> ID：12679637
> 
> 赞同：1
> 
> 时间：2012-10-01T19:22:16.463
> 
> 标签：ios6, uitapgesturerecognizer

以下代码在 IOS 5 中运行良好，但现在`handleTapGesture`在 IOS 6 中甚至没有被调用。发生了什么变化？

```
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
        [self addGestureRecognizer:tap];
    }
    return self;
}

- (void)handleTapGesture:(UITapGestureRecognizer *)recognizer
{
    MessageNib *cell = self;
    MessageView *view = (MessageView *)[[[NSBundle mainBundle] loadNibNamed:@"MessageView" owner:self options:nil] objectAtIndex:0];
    view.message = cell.message;

    [[NSNotificationCenter defaultCenter] postNotificationName:NEW_SUB_PAGE object:view];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:53:14.713

我猜你必须在 alloc init 之后设置 numberOfTaps

```
tap.numberOfTapsRequired = 1; 
```

或者另一种可能性是 initWithCoder 没有被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:00:40.803

最后只是在我想要点击的项目上放置了一个“幻像”按钮（也就是没有内容的按钮），并将一个`Touch Up Inside`事件附加到调用我的点击手势代码的按钮上。

无论如何，这是一个不错的瞬间破解。

# javascript - 如何检测 JavaScript 中的链式函数调用？

> ID：12679642
> 
> 赞同：5
> 
> 时间：2012-10-01T19:22:34.740
> 
> 标签：javascript

```
var Obj = {
   func1 : function() {
      // some code
      if (this._hasChainedFunc()) {
         // block should be CALLED
      }
      return this;
   },
   func2 : function() {  
      // some code
      if (this._hasChainedFunc()) {
         // block should be NOT called
      }
      return this;
   },
   _hasChainedFunc : function() {
     // code which detects if there is a chained function???
   }
}

Obj.func1().func2(); 
```

**函数_hasChainedFunc()**是否有可能的实现？此函数应在第一次调用时返回*true*（因为 func2() 之后调用），在第二次调用时返回*false*。

在更高级的版本中，**_hasChainedFunc()**也可能返回之后实际调用的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:36:51.463

从技术上讲，您永远无法提前知道在当前调用**之后**是否有另一个调用链接——这显然没有意义，因为这意味着您知道某些代码在调用之前将被调用。如果没有预编译器，你就无法做到这一点，我猜这不是你想要的。

相反，**可以**检查在当前调用**之前**是否有先前的调用链接。这只需要你在对象中保留一些关于先前调用的状态，并在你调用它的新函数时更新它。如果您只使用一个调用链，您可以通过在返回对象之前创建`func1`和`func2`更改对象的某些状态来做到这一点。`this`

如果要在同一个对象上调用多个链，则面临如何检测链末端的问题。为此，您需要**让每个链式函数返回一个**围绕 original的包装器`this`，该包装器将存储有关先前调用的状态。

如果您使用包装器方法，则`obj.func1().func2()`调用`func1`on `obj`，但`func2`在从返回的包装器上调用，`func1`并且此包装器可以知道先前的`func1`调用。如果您稍后调用`obj.func2().func1()`then`func2`现在调用，`obj`而`func1`在知道先前`func2`调用的包装器上调用，等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-12T14:40:40.090

^(（注意：此答案最初由 Scholle 作为问题的一部分发布。我将其从问题中提取为实际答案，因为它本来应该放在首位。这不是*我的*解决方案，因此我将其标记为社区维基。）)

[Scholle](https://stackoverflow.com/users/402866/scholle)最终创建了一个可以满足他需求的图书馆。
它[在 GitHub 上可用](https://github.com/MStumpp/chain.js)，一些文档在[这里](http://mstumpp.github.io/chain.js/)。

> 简而言之：获取任意 JavaScript 函数并“链化”它：
> 
> ```
> var Model = function() {};
> 
> Model.prototype.func1 = function() {
>   console.log('func1 has ' + this.c_getPredecessors().length + ' preceding functions');
>   return this.c_delay().c_chain(function() { 
>     console.log('func1 has ' + this.c_getSuccessors().length + ' succeeding functions');     
>     console.log('func1 processing...');
>     this.c_next();
>   });
> };
> 
> Model.prototype.func2 = function() {
>   console.log('func2 has ' + this.c_getPredecessors().length + ' preceding functions');
>   return this.c_delay().c_chain(function() {
>     console.log('func2 has ' + this.c_getSuccessors().length + ' succeeding functions');     
>     console.log('func2 processing...');
>     this.c_next();
>   });
> }; 
> ```
> 
> [将其链](https://github.com/MStumpp/chain.js)化并实例化，并调用一些函数：
> 
> ```
> chainify(Model);
> 
> var Obj = new Model();
> Obj.func1().func2(); 
> ```
> 
> 控制台输出：
> 
> ```
> func1 has 0 preceding functions
> func2 has 1 preceding functions
> func1 has 1 succeeding functions
> func1 processing...
> func2 has 0 succeeding functions
> func2 processing... 
> ```
> 
> 当然，这是一个简单的例子。它只是演示了每个函数现在都能够访问有关当前函数调用之前和之后发生的事情的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:27:03.403

不，这是不可能的。

它在语义上等同于：

```
var tmp = Obj.func1();
tmp.func2(); 
```

当`Obj.func1()`被调用时，它无法知道后续结果是否会用于调用`func2`。

你能做到的最好的事情是`func2`检测是否`func1`以前被调用过，但要让它按照你描述的方式工作，就需要`func1`能够预测未来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:29:14.547

您可以做的是添加一个成员属性，指示它是否是对对象的第一次调用：

```
var Obj = {
   _first : true,

   func1 : function() {
      // some code
      if (this._hasChainedFunc()) {
         // block should be CALLED
      }
      return this;
   },
   func2 : function() {  
      // some code
      if (this._hasChainedFunc()) {
         // block should be NOT called
      }
      return this;
   },
   _hasChainedFunc : function() {
       var isFirst = this._first;
       this._first = false;
       return isFirst;
   }
}

Obj.func1().func2(); 
```

但是，这意味着您必须在每次调用之前重置对象的状态（通过设置`this._first`回 true）。您可能需要重新考虑如何处理此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T19:29:52.463

我将这样做：

```
var Obj = {
    first:0,   //<--- will store whether it's the first call
    func1 : function() {
            // some code
        if (this._hasChainedFunc()) {
            console.log("called1");
        }
         return this;
    },
    func2 : function() {  
        // some code
        if (this._hasChainedFunc()) {
            console.log("called2");
        }
        return this;
    },
    _hasChainedFunc : function() {
        return (this.first++ > 0);
    }
}

Obj.func1().func2(); 
```

这似乎有效：

```
 called2 
```

[http://jsfiddle.net/2VThj/1/](http://jsfiddle.net/2VThj/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T19:31:11.960

你为什么想做这个？

撇开这个问题不谈，您可以不返回实际对象，而是对其进行克隆，并添加一个属性来告诉您它是该对象的返回版本。这是我能想到的唯一方法。不过听起来很复杂，具体取决于这个对象的复杂程度。

就像是：

```
func1 : function() {
  // some code
  if (this._hasChainedFunc()) {
     // block should be CALLED
  }
  return deepCloneWithFlag(this);
},
_hasChainedFunc : function() {
   return this.flag;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T19:36:29.857

没有。这行不通。你*可能*会说 func1() 在某个时候在这个对象上被调用过，但是你不能知道它是什么时候被调用的，即在 func2*之前*

例如这个：

```
obj.func1();
obj.func2(); 
```

相当于您的示例调用。而且 func1 不可能知道 func2 将来会被调用。

[我用链函数](https://code.google.com/p/myna/source/browse/trunk/1.0/web/shared/js/libOO/Function.js)（[文档](http://www.mynajs.org/shared/docs/js/libOO/files/Function-js.html#Function.createChainFunction)）解决了一个与此类似的问题，这允许真正的函数链，能够“向前看”以查看链中的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-01T19:43:51.810

您可以做的是有两个单独的类，一个用于链中的第一个元素，一个用于其余元素。然后您所要做的就是更改第一个类以从第二个类返回等效对象而不是当前对象。

```
var Class1 = function(state){
   return {
       func1 : function() {
           // some code
           // block should be CALLED
           return Class2(state)
       },
       func2 : function() {  
           // some code
           // block should be NOT called
           return Class2(state)     
       }
    };
}

var Class2 = function(state){
   return {
       func1 : function() {
           // some code
           return this;
       },
       func2 : function() {  
           // some code
           return this;
       }
    };
}

Class1(initial_state).func1().func2(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-08T19:53:06.397

尽管在 Javascript 中不可能知道一个函数将在另一个函数之后被调用，但这里有一个链接对象的解决方案：

```
(function(window, undefined)
{

    var chainify = function(prop)
    {
        return new chainify.init(prop);
    };

    /**
     * 
     * @param prop :
     *            Properties to apply to the object
     * @returns {chainify.init}
     */
    chainify.init = function(prop)
    {
        for ( var key in prop)
            this[key] = prop[key];
    };

    chainify.init.prototype = {

        _attributes : {},

        _chain_in_progress : false,
        _chain_level : 1,
        _chain_function : '',

        /**
         * Returns the chained object
         * 
         * @param name -
         *            name of the previous function
         * @this chainify.init
         * @returns {chainify.init}
         */
        _chain : function(name)
        {
            var tmp = chainify(this);
            tmp._chain_in_progress = true;
            tmp._chain_function = name || '';
            _chain_level++;
            return tmp;
        },

        get : function(key)
        {
            return this._attributes[key];
        },

        set : function(key, value)
        {
            this._attributes[key] = value;
            return this;
        },

        attr : function(prop)
        {
            for ( var key in prop)
                this._attributes[key] = prop[key];
            return this;
        },

    };

    // Make global
    window.chainify = chainify;
})(window);

var myObject = window.chainify({

    // f1() function is using _chain()
    f1 : function(s)
    {
        // Do something
        this.set('s1', s);
        if (this._chain_in_progress) alert('f1 after ' + this._chain_function);

        // return the chain by calling this._chain()
        return this._chain('f1');
    },

    // f2() function is using _chain()
    f2 : function(s)
    {
        this.set('s2', s);
        if (this._chain_in_progress) alert('f2 after ' + this._chain_function);
        return this._chain('f1');
    },

    // that() function is not using _chain(), but we return this so the chaining
    // is not broken
    that : function(s)
    {
        // Do something
        return this;
    }
});

// Check if the f1 function is working
myObject.f1('a'); // Set s1 to "a"
alert(myObject.get('s1')); // should be "a"

// check if the f2 chaining is working
myObject.f1('b').f1('c'); // f1 after f1
alert(myObject.get('s1')); // should be "c" -> changed on last f1 function

// Check if the f2 function is working
myObject.f2('a');
alert(myObject.get('s2')); // should be "a"

// check if the f2 and f1 chaining is working
myObject.f2('b').f1('c').f1('d').f2('e'); // f1 after f2, f1 after f1 ...

alert(myObject.get('s1')); // should be "d" -> changed on last f1 function
alert(myObject.get('s2')); // should be "e" -> changed last f2 function

// check the chain with that() -
myObject.that('b').f1('a').f1('z'); // f1 chained after f1
alert(myObject.get('s1')); // should be "z" -> changed on last f1 function 
```

# ruby-on-rails - 在特定 Rails 路由上触发 Rack 中间件

> ID：12679644
> 
> 赞同：14
> 
> 时间：2012-10-01T19:22:40.310
> 
> 标签：ruby-on-rails, rack

是否可以仅在特定的 Rails 路由上触发 Rack 中间件？

例如，假设我只想在 api 命名空间上运行速率限制器中间件。

```
namespace :api do
  resources :users
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T21:34:40.817

我在使用[Rack::Throttle](https://github.com/datagraph/rack-throttle)限制速率方面取得了很好的成功。子类化内置油门类之一并重载该`allowed?`方法。您的自定义逻辑可以检查正在访问哪个控制器并根据需要应用速率限制。

```
class ApiThrottle < Rack::Throttle::Hourly
  ##
  # Returns `false` if the rate limit has been exceeded for the given
  # `request`, or `true` otherwise.
  #
  # Rate limits are only imposed on the "api" controller
  #
  # @param  [Rack::Request] request
  # @return [Boolean]
  def allowed?(request)
    path_info = (Rails.application.routes.recognize_path request.url rescue {}) || {} 

    # Check if this route should be rate-limited
    if path_info[:controller] == "api"
      super
    else
      # other routes are not throttled, so we allow them
      true
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-03T19:32:24.860

添加到 Ian 的答案中，要设置 ApiThrottle，您必须：

```
# application.rb
require 'rack/throttle'
class Application < Rails::Application
  ...
  config.require "api_throttle"
  # max 100 requests per hour per ip
  config.middleware.use ApiThrottle, :max => 100
  ...
end

# /lib/api_throttle.rb
# Ian's code here 
```

要补充的一件重要的事情是，对我来说，`path_info[:controller]`作为`"api/v1/cities"`而不只是作为`"api"`。当然，这是由于命名空间配置。因此，在设置节流阀时要小心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-09T15:40:51.040

您还可以（现在）使用 Rails 引擎创建一组隔离的路由，将额外的中间件添加到堆栈中以获取已安装的路由。

见[https://stackoverflow.com/a/41515577/79079](https://stackoverflow.com/a/41515577/79079)

（不幸的是，我在寻找是否有更简单的方法时发现了这个问题。为我想添加的每个中间件编写一个自定义中间件似乎比使用 Rails::Engine 更加迂回）

# dapper - 如何在读取 Dapper ORM 之前检查记录是否存在

> ID：12679646
> 
> 赞同：0
> 
> 时间：2012-10-01T19:22:49.367
> 
> 标签：dapper

谁能建议如何使用 Dapper ORM 检查结果集中是否有任何记录。

```
Customer objCustomer = null;
using (SqlMapper.GridReader multiResult = new DapperRepository().QueryMultiple(sql, new { id = id }))
{
    objCustomer = multiResult.Read<Customer>().Single(); //null exception
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:48:47.693

是的，写这个：

```
objCustomer = multiResult.Read<Customer>().SingleOrDefault(); //return null if not exists without error 
```

然后你可以检查：

```
objCustomer != null 
```

希望这可以帮助。

# javascript - 加载滚动中的浮动内容

> ID：12679649
> 
> 赞同：0
> 
> 时间：2012-10-01T19:23:01.107
> 
> 标签：javascript, jquery, css, ajax

我正在尝试自学如何在我的滚动中实现加载滚动，但是我在调​​用 div 时遇到了问题。内容没有在滚动下方加载，而是在侧面弹出并在向下滚动时看起来像[这里](http://jsfiddle.net/713Marketing/9zXL5/52/)看到的部分。

有问题的代码是

```
if(y >= contentHeight-30){

        movelist.innerHTML +='<div class ="newData"><center>hey look at me</center></div>';
                } 
```

我想在到达底部之前将内容附加到滚动的底部。任何见解或提示将非常有帮助和赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:29:03.170

代码中有很多错误。

要回答您的问题：您需要添加`float:left;`到您的 div.NewData。[检查这个小提琴](http://jsfiddle.net/9zXL5/61/)

第二：要在 CSS 中添加注释，您需要使用`/* */`而不是`<!-- -->`. CSS无法识别注释，`<!-- -->`因此不会应用下面的所有内容。

第三：ID 是唯一的。你们所有人`<li>`都有相同的ID。改用一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:31:19.783

添加`clear: left;`并添加`float: left;`到要添加它的 div 上的类，然后添加其他样式以使其适合宽度。

# sql - 违反第一范式可以吗？

> ID：12679652
> 
> 赞同：3
> 
> 时间：2012-10-01T19:23:09.023
> 
> 标签：sql, database, ms-access, database-normalization

我有一个 Access 数据库，需要在一行上呈现具有多个一对多关系的数据（例如，它将项目列为“a、b、e、f”，并且我将有多个这样的列） . 我知道以这种方式存储数据也是一个坏主意，但考虑到我允许用户过滤其中的几个列，我想不出比违反第一个范式更好的处理数据的方法.

举个例子：假设我有几篇期刊文章，每篇文章都可能报道多种动物和多种蔬菜。用户可以过滤源名称，或者他们可以过滤一种或多种动物和一种或多种蔬菜。输出应该看起来像

```
Source name....animals...............vegetables
Source 1.......dogs, cats, birds.....carrots, tomatoes
Source 2.......leopards, birds.......tomatoes, zucchini, apples
Source 3.......cats, goldfish........carrots, cucumbers 
```

通常，您将有一个带有源名称 + 动物的单独表：

```
Source name......animal
Source 1.........dog
Source 1.........cats
Source 1.........birds
Source 2.........leopards 
```

ETC

和一个类似的蔬菜表。但考虑到数据需要如何呈现给用户（逗号分隔的列表），以及用户如何过滤数据（他可能会过滤以仅查看包括狗和猫的源，以及带有胡萝卜和西红柿的源），我认为将数据存储为动物和蔬菜的逗号分隔列表是有意义的。使用逗号分隔的列表，当用户选择多种蔬菜和多种动物时，我可以说

```
WHERE (Vegetables like "*carrots*" and Vegetables like "*tomatoes*") AND (Animals like *dogs*" and Animals like "*cats*") 
```

在不使用大量 VBA 和多个查询的情况下，我想不出一种在 Access 中执行相同类型查询的有效方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:28:45.817

您总是可以构建一个违反任何规则都有意义的场景，因此您标题中问题的答案是肯定的。

然而，这不是其中一种情况。您提出的搜索和表示问题对于大多数一对多关系（或者至少对于*许多*一对多关系）来说是常见的，如果这是违反第一范式的原因，那么您将看不到很多规范化的数据库。

正确构建数据库，您不必担心逗号、相互嵌入的搜索词以及由于缺少索引而导致的缓慢搜索。编写一段可重用的代码来为您执行逗号分隔的汇总，这样您就不会不断地重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:28:45.843

我仍然会正确地对此进行规范化-然后担心演示文稿。

在 Oracle 中 - 这将使用用户定义的聚合函数来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:44:17.873

为什么不构建一个连接表，以便您可以维持与字段引用完整性的 1:1 关系。否则，您将不得不解析出 1:many 字段值，然后才能获得引用关联，因此一切都可以神奇地工作（呵呵呵呵；））

当我发现自己需要违反第一范式时，9:10 的答案是创建一个连接表并构建一些方法来产生预期的效果。

## 编辑：2012-10-09 上午 9:06

*   这种设计是为了响应在未知数量的列/字段中显示的未知数量的信息。虽然我的方向是数值，但您可以简单地开发一种 vba 方法来连接信息字段以生成单个数据字段。

### 表格1

```
gid (Number) <- Table2.id
cid (Number) <- Table3.id
price (Number) 
```

*   gid 许多 <- 一个 Table2.id
*   cid 许多 <- 一个 Table3.id

### crt_CategoryPG

```
TRANSFORM Sum(Table1.price) AS SumOfprice
SELECT View1.tid, Table1.cid, View1.category
FROM Table2 INNER JOIN (View1 INNER JOIN Table1 ON View1.cid = Table1.cid) ON Table2.gid = Table1.gid
WHERE (((Table2.active)=True) AND ((View1.active)=True))
GROUP BY View1.tid, Table1.cid, View1.category, Table2.active, View1.active
ORDER BY View1.tid, Table1.cid
PIVOT [Table2].[gid] & " - " & [Table2].[nm]; 
```

### 刷新 CT 表

```
Public Function RefreshCategoryPricing(Optional sql As String = "")
    If HasValue(lstType) Then
Application.Echo False      'Turn off Screen Updating

        Dim cttbl As String: cttbl = CreateCTTable("crt_CategoryPG") 'Create Table to store the Cross-Tab information
        If IsNullOrEmpty(sql) Then
            sql = SQLSelect(cttbl)
        End If

        Dim flds As DAO.Recordset: Set flds = CurrentDb.OpenRecordset(sql)
        Dim fldwd As String, fldhd As String      'Store the Field Width pattern and Field Header Row
        fldhd = "-1;-1;Category"
        fldwd = "0"";0"";2.5"""   'Handles `tid`, `cid`, and `category` columns in the ListBox
        'Assign the number of columns based on the number of fields in CTtable
        lstCategoryPG.ColumnCount = flds.Fields.Count

        Dim fld As Long
        For fld = 3 To (flds.Fields.Count - 1)
            fldwd = fldwd & ";.75"""
            fldhd = fldhd & ";" & flds.Fields(fld).Name
        Next

        GC flds

        lstCategoryPG.ColumnHeads = True
        lstCategoryPG.ColumnWidths = fldwd

        sql = SQLSelect(cttbl, , ("tid = " & lstType.Value))

        lstCategoryPG.Enabled = True
        RefreshControl CurrentDb, lstCategoryPG, sql, , False
        lstCategoryPG.AddItem fldhd, 0

Application.Echo True       'Turn on Screen Updating
    End If
End Function 
```

### 创建交叉表

```
'@ct - String value, Source Cross-Tab to base Table design off of
Public Function CreateCTTable(ct As String) As String
    Dim tbl As String: tbl = "tbl_" & ct
    Dim sql As String

    If TableExists(tbl) Then
    'Table exists and needs to be dropped
        sql = SQLDrop(tbl)
        CurrentDb.Execute sql
    End If

    'Create Table
    sql = SQLSelect(ct, "* INTO " & tbl)
    CurrentDb.Execute sql

    CreateCTTable = tbl
End Function 
```

# twitter-bootstrap - 对齐框 twitter-bootstrap

> ID：12679655
> 
> 赞同：0
> 
> 时间：2012-10-01T19:23:27.777
> 
> 标签：twitter-bootstrap

![在此处输入图像描述](../Images/c8e4267fa9f653fd16da00e88003b1fa.png)

[http://pastebin.com/Ks1KL8Dr](http://pastebin.com/Ks1KL8Dr)

您好，我正在使用 twitter-bootstrap，但在将下框与上框对齐时遇到问题。没关系奇怪的框边距。只是暂时的，稍后会修复它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:44:51.180

看看这个小提琴，应该对你有帮助：http: [//jsfiddle.net/5X6Gx/1/](http://jsfiddle.net/5X6Gx/1/)

也许您还应该尝试[http://www.jetstrap.com](http://www.jetstrap.com)以使用引导程序快速构建站点。

# scala - 添加 Appender 不起作用

> ID：12679659
> 
> 赞同：1
> 
> 时间：2012-10-01T19:23:40.020
> 
> 标签：scala, logging, logback, appender, fileappender

我正在尝试获取记录器并向其添加特定的附加程序。我的代码非常简单，但我不知道如何让它工作。

```
val loggerInstance = LoggerFactory.getLogger("FOO.class")
var fileAppender =  new FileAppender()
// fileAppender .setFile , sietPattern etc..the parameters i want
loggerInstance.addAppender(fileAppender) 
```

我在这里收到错误

```
Multiple markers at this line
- type mismatch; found : ch.qos.logback.core.FileAppender[Nothing] required: 
     ch.qos.logback.core.Appender[ch.qos.logback.classic.spi.ILoggingEvent] Note: Nothing <: 
     ch.qos.logback.classic.spi.ILoggingEvent, but Java-defined trait Appender is invariant in type E. You may wish to investigate a 
     wildcard type such as `_ <: ch.qos.logback.classic.spi.ILoggingEvent`. (SLS 3.2.10)
    - Line breakpoint:loggerchange [line: 76] - addAppender 
```

我不知道这个错误是什么意思以及如何解决它。有人能帮我吗？

编辑 ：

我试着按照德雷辛所说的去做。我无法扩展接口并定义功能。只有三个函数，setName、getName 和 doAppend。我不确定如何定义这些功能。同时我尝试了一些东西并删除了错误。请查看代码，让我知道我所做的是否有意义。

```
val encoder = new PatternLayoutEncoder()
encoder2.setContext(context)
encoder2.setPattern("%msg%")    
fileAppender.setAppend(true)
fileAppender.setContext(context)
fileAppender.setEncoder(encoder2.asInstanceOf[Encoder[Nothing]])

loggerInstance.asInstanceOf[Logger].addAppender(fileAppender
.asInstanceOf[Appender[ILoggingEvent]]) 
```

我知道使用 asInstanceOf 不是一种聪明的编码方式，但现在我想完成这项工作。当我执行这段代码时，我得到了我想要登录的文件，但里面没有日志。我检查了级别错误，但事实并非如此。我相信编码器/布局有问题。我不知道如何解决它。有人可以告诉我如何扩展类和应用函数或者这个新代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:42:31.753

有`FileAppender`一个类型参数`class FileAppender[E]`，但是您在没有提供这样的参数的情况下实例化它，因此 scala 决定将`Nothing`其作为类型放入。`addAppender`需要一个类型的附加程序`Appender[ILoggingEvent]`，这就是错误所说的。您现在要做的是使用现有的，或者创建您自己的子类`ILoggingEvent`并将其作为类型参数提供：

```
class MyLoggingEvent extends ILoggingEvent {
  // implement ALL the methods
}

val fileAppender = new FileAppender[MyLoggingEvent]() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:17:40.923

我的第二种方法奏效了。我现在可以看到日志。我在模式中犯了错误。这只是一个小调整。

```
 val encoder = new PatternLayoutEncoder()
  encoder.setContext(context)
  encoder.setPattern("%msg%n")    
  fileAppender.setAppend(true)
  fileAppender.setContext(context)
  fileAppender.setEncoder(encoder.asInstanceOf[Encoder[Nothing]])

  loggerInstance.asInstanceOf[Logger].addAppender(fileAppender
  .asInstanceOf[Appender[ILoggingEvent]]) 
```

我将总结我在自动记录/附加方面所做的所有努力，并尽快提出。希望这也会对其他人有所帮助。

# selenium - 单击单选按钮会调用 selenium 无法识别的弹出窗口

> ID：12679661
> 
> 赞同：0
> 
> 时间：2012-10-01T19:23:52.340
> 
> 标签：selenium, selenium-rc

我很惊讶地发现了一个带有“确定”按钮的弹出窗口，该按钮被调用为单击单选按钮的过程。

我需要在弹出窗口中单击“确定”按钮，否则屏幕会冻结，我们无法在测试用例中继续前进。

```
<HTML CODE>
    <td class="req" align="right"> Exposure: </td>
    <td align="left">
    <input type="radio" value="1" onclick="javascript:onClick_exposure_type(this);" name="exposure_type">
    Open
    <input type="radio" value="2" onclick="javascript:onClick_exposure_type(this);" name="exposure_type">
    Closed
    </td>
    <HTML CODE> 
```

当我在 selenium IDE 中记录此事件时，我得到以下信息

```
click("xpath=(//input[@name='exposure_type'])[2]")
selectWindow("null")
clickAndWait("name=btnOkay") 
```

我试着做这样的事情并没有帮助

```
executeScript("window.confirm = function(msg){return true;};") 
```

任何想法将不胜感激。

# java - 是否有用于提取 MP4 元数据的 Java API？

> ID：12679662
> 
> 赞同：5
> 
> 时间：2012-10-01T19:23:55.507
> 
> 标签：java, metadata, mp4

我想具体说明我在问什么。我不是要求修改任何 MP4 文件，只是提取元数据，例如宽度和高度以及比特率和编码，这不在 MP3 标签中。

我已经测试了 Xuggle，它可以工作，但我需要一个不使用 JNI 或任何本机代码的库。

我已经研究过 MP4Parser 和 Apache Tika，它们都不会提取元数据，只是标记信息或更改文件。

有这样的java lib吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T18:31:18.440

[我实际上使用Mp4Parser](https://github.com/sannies/mp4parser)找到了我想要的东西

这是使用 Mp4Parser 获得我想要的简单代码行

```
FileChannel fc = new FileInputStream("content/Video_720p_Madagascar-3.mp4").getChannel();
IsoFile isoFile = new IsoFile(fc);
MovieBox moov = isoFile.getMovieBox();
for(Box b : moov.getBoxes()) {
    System.out.println(b);
} 
```

b 包含我需要的所有信息，现在我只需要解析 b 即可得到我想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T16:23:26.217

目前（2015），Android SDK 提供了[MediaMetadataRetriever](https://developer.android.com/reference/android/media/MediaMetadataRetriever.html)类用于提取元数据：

```
 MediaMetadataRetriever m = new MediaMetadataRetriever();
        m.setDataSource(mInputFile);
        String extractedHeight = m.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_HEIGHT);
        String extractedWidth = m.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_WIDTH); 
```

# php - PHP - 生成英语短语和句子的变体

> ID：12679665
> 
> 赞同：2
> 
> 时间：2012-10-01T19:24:06.043
> 
> 标签：php, regex

我想在给定原始字符串的情况下生成英语句子的变体。我知道我可以做一些基本的搜索和替换来保持句子语法正确。但是有没有办法对句子进行更复杂的改写？

例如，给定一个句子“A cat is looking at the dog”，我想提出“Cat is staring at dog”和“The cat is looking at a dog”。抱歉，我想不出更聪明的例子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:28:17.037

一般来说，自然语言是一种比正则表达式可以捕获的更复杂的语法类型。所以总的来说答案是否定的。另一方面，如果您想要的范围足够有限，那么正则表达式可能就足够了。但是我不会太费劲，这从根本上将是一个有限的解决方案。

对于允许您做更多事情的工具包，请查看[NLTK](http://nltk.org)（仅限 Python）。

有关为什么正则表达式对自然语言的使用有限的更多背景信息，请阅读[Wikipedia 上的 Chomsky Hierarchy](http://en.wikipedia.org/wiki/Chomsky_hierarchy)。据推测，英语[至少是一种上下文无关的语言](http://cs.haifa.ac.il/~shuly/teaching/08/nlp/complexity.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T23:41:35.250

我找到了微软的“释义”API。看起来像我可以使用的东西......

[http://msdn.microsoft.com/en-us/library/hh847648.aspx](http://msdn.microsoft.com/en-us/library/hh847648.aspx)

# .htaccess - 在 url 末尾添加动态 id 时 RewriteRule 给出 500 错误

> ID：12679673
> 
> 赞同：1
> 
> 时间：2012-10-01T19:24:57.407
> 
> 标签：.htaccess, mod-rewrite

当我使用此 htaccess 代码时，我从链接的 CSS 文件等中收到 500 内部服务器错误。有人知道可能是什么问题吗？我还不太熟悉htaccess。

这是代码：

```
RewriteEngine On
RewriteBase /

RewriteRule ^(system|img|res) - [L]

RewriteRule ^picture/([^/]*)/?$ picture.php?id=$1 [L,QSA]

## The below code is something I found on the internet to remove the .php tag
# remove .php; use THE_REQUEST to prevent infinite loops
RewriteCond %{HTTP_HOST} ^www\.mywebsite\.com
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301]

# remove index
RewriteRule (.*)index$ $1 [R=301]

# remove slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /$
RewriteRule (.*)/ $1 [R=301]

# add .php to access file, but don't redirect
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L] 
```

URL 应该是：www.mysite.com/pictures/1 (id)

id 始终是一个数字。

它确实向我显示了页面，并且我可以回显 ID，因此该部分正在工作，但是如上所述，它在链接文件上给了我 500 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:56:36.447

> 不知道为什么会这样。CSS文件夹与实际的php文件位于同一文件夹中。

您已使用相对 URI 链接到它：

```
<link rel="stylesheet" type="text/css" media="all" href="./css/text.css" /> 
```

例如`./css/text.css`, 虽然 css 文件可能与文件位于同一目录中`picture.php`（我认为这是生成内容的内容），但浏览器实际上是对 CSS 的请求，而不是 picture.php 脚本。浏览器请求这个 URL `http://www.mysite.com/picture/1`，并且服务器内部将其重写`/picture/1`为`/picture.php?id=1`，浏览器不知道发生了什么。所以它将基本 URI 视为`/picture/`. 如果浏览器直接转到 php file: `http://www.mysite.com/picture.php?id=1`，则基本 URI 将是`/`并且 css 将很好地解析为`/./css/text.css`. 但是`/picture/1`请求具有不同的基础 URI，因此浏览器（不知道基础不同）盲目地尝试将 css 检索为`/picture/./css/text.css`，失败是因为您有错误处理该 URI 的规则。通常你只会得到一个 404，但是你在图片重写之后的规则会错误地处理 URI 并返回一个 500 服务器错误。

您可以在标题中添加：

```
<base href="/"> 
```

在由 生成的内容中`picture.php`，或者使 URI 的绝对值：

```
<link rel="stylesheet" type="text/css" media="all" href="/css/text.css" /> 
```

# hibernate - 无法访问 entityManager 中的标准构建器

> ID：12679674
> 
> 赞同：0
> 
> 时间：2012-10-01T19:25:00.217
> 
> 标签：hibernate, jakarta-ee, jpa, jpa-2.0

我正在尝试从休眠 3 迁移到 JPA2，但我无法获得标准生成器。

我将这些依赖项添加到我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.JpaTest</groupId>
        <artifactId>JpaTest-parent</artifactId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>  

  <artifactId>JpaTest-services</artifactId>
  <version>${JpaTest.version}</version>
  <packaging>ejb</packaging>

  <name>JpaTest-services</name>
  <url>http://maven.apache.org</url>

  <dependencies>
      <dependency>
        <groupId>com.JpaTest</groupId>
        <artifactId>JpaTest-modeles</artifactId>
        <version>${JpaTest.version}</version>
    </dependency>
    <!-- EJB 3.0 -->
    <dependency>
      <groupId>javaee</groupId>
      <artifactId>javaee-api</artifactId>
      <version>5</version>
      <scope>provided</scope>
    </dependency>
    <!-- JPA 2  -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
                <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate.java-persistence</groupId>
            <artifactId>jpa-api</artifactId>
                <version>2.0-cr-1</version>
        </dependency>
  </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ejb-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project> 
```

制作了这个 EntityManagerProvider 类：

```
package com.JpaTest.utils;

import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

public class EntityManagerProvider {

    private static EntityManagerProvider instance;

    private static final String PERSISTENCE_UNIT_NAME = "testPU";
    private EntityManagerFactory emf;
    private EntityManagerProvider em;

    private EntityManagerProvider() {
        emf = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
        em = (EntityManagerProvider) emf.createEntityManager();
    }

    public static synchronized EntityManagerProvider getInstance() {
        if (instance == null) {
            instance = new EntityManagerProvider();
        }

        return instance;
    }

    public EntityManagerProvider getEntityManager() {
        return em;
    }

} 
```

而这个 DAO ：

```
package com.JpaTest.dao;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import com.JpaTest.model.TestEntity;

public class JpaTestDaoImpl implements IJpaTestDao {

    private static final String PERSISTENCE_UNIT_NAME = "testPU";
    private EntityManagerFactory emf;
    private EntityManager em;

    public JpaTestDaoImpl() {
        emf = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
        em = emf.createEntityManager();
    }

    @Override
    public Integer Create(TestEntity c) {
        em.persist(c);
        em.flush();
        em.refresh(c);
        //HibernateUtil.getSessionFactory().getCurrentSession().persist(c);
        //HibernateUtil.getSessionFactory().getCurrentSession().flush();
        //HibernateUtil.getSessionFactory().getCurrentSession().refresh(c);
        return (Integer) c.getId();
    }

    @Override
    public TestEntity Read(Integer id) {
        TestEntity c = (TestEntity) em.find(TestEntity.class, id);
        //TestEntity c = (TestEntity) HibernateUtil.getSessionFactory().getCurrentSession().get(TestEntity.class, id);
        return c;
    }

    @Override
    public List<TestEntity> ReadAll() {
        @SuppressWarnings("unchecked") 
        //List<TestEntity> myList = (List<TestEntity>) HibernateUtil.getSessionFactory().getCurrentSession().createCriteria(TestEntity.class).list();
        List<TestEntity> myList = em.get :(
        return myList;
    }

    @Override
    public void update(TestEntity c) {
        HibernateUtil.getSessionFactory().getCurrentSession().update(c);
        HibernateUtil.getSessionFactory().getCurrentSession().flush();
    }

    @Override
    public void delete(TestEntity c) {
        HibernateUtil.getSessionFactory().getCurrentSession().delete(c);
        HibernateUtil.getSessionFactory().getCurrentSession().flush();
    }

} 
```

我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T15:25:59.753

您在 persistence.xml 文件中添加

```
<persistence-unit name="servicioPU">
      <jta-data-source>java:jboss/datasources/connDS</jta-data-source>
      <properties>
       <!-- Properties for Hibernate -->
       <property name="hibernate.hbm2ddl.auto" value="update" />
       <property name="hibernate.show_sql" value="false" />
    </properties>
</persistence-unit> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:51:45.480

里面有一个没有标准构建器的 javax.persistence

```
 <groupId>javaee</groupId>
  <artifactId>javaee-api</artifactId>
  <version>5</version> 
```

搬到

```
<groupId>org.jboss.javaee</groupId>
<artifactId>jboss-javaee</artifactId>
<version>5.0.1.GA</version> 
```

解决了这个问题。

但是有一件事我没有得到，它们都是 JEE5 实现，它们不应该都包含相同的东西吗？

# dynatree - iframe 是检索结果时使用 dynatree 的最佳方式吗？

> ID：12679677
> 
> 赞同：0
> 
> 时间：2012-10-01T19:25:06.083
> 
> 标签：dynatree

我有一个两列 css 布局。左容器装有 dynatree。它是从本地 json 文件中提取的。右侧将是内容，通过单击动态树上的节点来填充。

我在 dynatree 示例中看到的是在树中使用带有 url 的 iframe。

使用 iframe 是做事的“最佳”方式吗？这是填充内容的唯一方法吗？

我可能很傻，但 iFrames 通常看起来不是处理事情的好方法。有没有更好的办法？我应该使用ajax（可以吗？）？

[http://wwwendt.de/tech/dynatree/doc/samples.html](http://wwwendt.de/tech/dynatree/doc/samples.html)

“示例：URL 导航和 iframe”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:43:40.140

我使用 2 列布局的 Div 容器。树使用 ajax 来加载最初和后来扩展的内容。当一个节点被激活时，我会重新加载页面内容，并使用与该节点关联的数据更新右侧部分。树仍然是从 ajax 加载的。

您可以这样做，或者使用 ajax 加载正确的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:20:54.473

通过将我的 ajax 放在 dynatree 的 onactivate 事件中，我能够让它工作：

```
$("#response").load("myname.php?name=Johnny&dummy=" + new Date().getTime()); 
```

日期 gettime 是为了解决 ie 缓存问题。

# cuda - 纹理获取比直接全局访问慢，“Cuda by example”一书的第 7 章

> ID：12679679
> 
> 赞同：3
> 
> 时间：2012-10-01T19:25:13.257
> 
> 标签：cuda, textures

我正在阅读和测试“Cuda By example. An Introduction to General Purpose GPU Programming”一书中的示例。在测试第 7 章中的示例时，相对于纹理内存，我意识到通过纹理缓存访问全局内存比直接访问要慢得多（我的 NVIDIA GPU 是 GeForceGTX 260，计算能力 1.3，我使用的是 NVDIA CUDA 4.2）：

*   256*256 图像的纹理提取（1D 或 2D）的每帧时间：93 毫秒
*   256*256 不使用纹理（仅直接全局访问）的每帧时间：8.5 毫秒

我已经仔细检查了几次代码，我也一直在阅读 SDK 随附的“CUDA C 编程指南”和“CUDA C 最佳实践指南”，但我并不真正理解问题所在。据我了解，纹理内存只是具有特定访问机制实现的全局内存，使其看起来像缓存（？）。我想知道对全局内存的合并访问是否会使纹理获取速度变慢，但我不能确定。

有没有人有类似的问题？（我在 NVIDIA 论坛中找到了一些类似问题的链接，但该链接不再可用。）

测试代码看起来是这样的，只包括相关部分：

```
//#define TEXTURE
//#define TEXTURE2

#ifdef TEXTURE
// According to C programming guide, it should be static (3.2.10.1.1)
static texture<float> texConstSrc;
static texture<float> texIn;
static texture<float> texOut;
#endif

    __global__ void copy_const_kernel( float *iptr
    #ifdef TEXTURE2
     ){
    #else
        ,const float *cptr ) {
    #endif
            // map from threadIdx/BlockIdx to pixel position
            int x = threadIdx.x + blockIdx.x * blockDim.x;
            int y = threadIdx.y + blockIdx.y * blockDim.y;
            int offset = x + y * blockDim.x * gridDim.x;

    #ifdef TEXTURE2
            float c = tex1Dfetch(texConstSrc,offset);
    #else
            float c = cptr[offset];     
    #endif

            if ( c != 0) iptr[offset] = c;
    }

    __global__ void blend_kernel( float *outSrc,
    #ifdef TEXTURE
        bool dstOut ) {
    #else
        const float *inSrc ) {
    #endif
            // map from threadIdx/BlockIdx to pixel position
            int x = threadIdx.x + blockIdx.x * blockDim.x;
            int y = threadIdx.y + blockIdx.y * blockDim.y;
            int offset = x + y * blockDim.x * gridDim.x;
            int left = offset - 1;
            int right = offset + 1;
            if (x == 0) left++;
            if (x == SXRES-1) right--;
            int top = offset - SYRES;
            int bottom = offset + SYRES;
            if (y == 0) top += SYRES;
            if (y == SYRES-1) bottom -= SYRES;

    #ifdef TEXTURE
            float t, l, c, r, b;
            if (dstOut) {
                t = tex1Dfetch(texIn,top);
                l = tex1Dfetch(texIn,left);
                c = tex1Dfetch(texIn,offset);
                r = tex1Dfetch(texIn,right);
                b = tex1Dfetch(texIn,bottom);
            } else {
                t = tex1Dfetch(texOut,top);
                l = tex1Dfetch(texOut,left);
                c = tex1Dfetch(texOut,offset);
                r = tex1Dfetch(texOut,right);
                b = tex1Dfetch(texOut,bottom);
            }
            outSrc[offset] = c + SPEED * (t + b + r + l - 4 * c);
    #else
            outSrc[offset] = inSrc[offset] + SPEED * ( inSrc[top] +
                inSrc[bottom] + inSrc[left] + inSrc[right] -
                inSrc[offset]*4);
    #endif
    }

    // globals needed by the update routine
    struct DataBlock {
        unsigned char *output_bitmap;
        float *dev_inSrc;
        float *dev_outSrc;
        float *dev_constSrc;
        cudaEvent_t start, stop;
        float totalTime;
        float frames;
        unsigned size;
        unsigned char *output_host;
    };
    void anim_gpu( DataBlock *d, int ticks ) {
        checkCudaErrors( cudaEventRecord( d->start, 0 ) );
        dim3 blocks(SXRES/16,SYRES/16);
        dim3 threads(16,16);

    #ifdef TEXTURE
        volatile bool dstOut = true;
    #endif

        for (int i=0; i<90; i++) {
    #ifdef TEXTURE
            float *in, *out;
            if (dstOut) {
                in = d->dev_inSrc;
                out = d->dev_outSrc;
            } else {
                out = d->dev_inSrc;
                in = d->dev_outSrc;
            }
    #ifdef TEXTURE2
            copy_const_kernel<<<blocks,threads>>>( in );
    #else
            copy_const_kernel<<<blocks,threads>>>( in,
                d->dev_constSrc );
    #endif
            blend_kernel<<<blocks,threads>>>( out, dstOut );
            dstOut = !dstOut;

    #else
            copy_const_kernel<<<blocks,threads>>>( d->dev_inSrc,
                d->dev_constSrc );
            blend_kernel<<<blocks,threads>>>( d->dev_outSrc,
                d->dev_inSrc );
            swap( d->dev_inSrc, d->dev_outSrc );
    #endif
        }
            // Some stuff for the events
            // ...
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:23:51.820

我一直在使用 nvvp（NVIDIA 分析器）测试结果

结果非常奇怪，因为它们表明有很多纹理缓存未命中（这可能是性能不佳的原因）。分析器的结果还显示了即使使用指南“CUPTI_User_GUIde”也难以理解的信息：

*   text_cache_hit：纹理缓存命中数（根据 1.3 能力，它们仅占一个 SM）。

*   text_cache_miss：纹理缓存未命中数（根据 1.3 能力仅占一个 SM）。

以下是不使用纹理缓存的 256*256 示例的结果（仅显示相关信息）：

> **名称 持续时间(ns) Grid_Size Block_Size**
> 
> “copy_const_kernel(...) 22688 16,16,1 16,16,1
> 
> “混合内核（...）” 51360 16,16,1 16,16,1

以下是使用 1D 纹理缓存的结果：

> **名称 持续时间(ns) Grid_Size Block_Size tex_cache_hit tex_cache_miss**
> 
> “copy_const_kernel(...)”147392 16,16,1 16,16,1 ***0*** 1024
> 
> “混合内核（...）” 841728 16,16,1 16,16,1 ***79*** 5041

以下是使用 2D 纹理缓存的结果：

> **名称 持续时间(ns) Grid_Size Block_Size tex_cache_hit tex_cache_miss**
> 
> “copy_const_kernel(...)”150880 16,16,1 16,16,1 ***0*** 1024
> 
> “混合内核（...）” 872832 16,16,1 16,16,1 ***2971*** 2149

这些结果显示了几个有趣的信息：

*   “copy const”函数根本没有缓存命中（尽管理想情况下内存是“空间定位的”，因为每个线程访问的内存靠近其他近线程访问的内存）。我猜这是因为这个函数中的线程不会从其他线程访问内存，这似乎是纹理缓存可用的方式（“空间定位”概念相当混乱）

*   对于函数“blend_kernel”，1D 中有一些缓存命中，而在 2D 情况下还有更多。我猜这是由于在该函数中，任何线程都从其邻居线程访问内存。我不明白为什么 2D 比 1d 多。

*   有纹理情况下的持续时间比无纹理情况下的要长（几乎大约一个数量级）。也许与如此多的纹理缓存未命中有关。

*   对于“copy_const”函数，SM 总共有 1024 次访问，而“混合内核”则有 5120 次。关系 5:1 是正确的，因为“blend”中有 5 次提取，而“copy_const”中只有 1 次。无论如何，我无法理解所有这些 1024 来自哪里：理想情况下，这个事件“文本缓存未命中/热”只占一个 SM（我的 GeForceGTX 260 中有 24 个），它只占扭曲（32 个线程大小）。因此，我每个 SM 有 256 个线程/32=8 个扭曲，每个 SM 有 256 个块/24 = 10 或 11 个“迭代”，所以我预计会有 80 或 88 次获取（此外，还有一些其他事件，如 sm_cta_launched，其中是每个 SM 的线程块数，应该在我的 1.3 设备中支持，始终为 0...)

# css - 列表样式类型不起作用

> ID：12679685
> 
> 赞同：1
> 
> 时间：2012-10-01T19:25:43.110
> 
> 标签：css

尝试使用 ul 和 ol 元素的 CSS“list-style-type”属性在以下站点上添加任何格式似乎没有任何效果。我已经通过几个验证器检查了 CSS 和 HTML，但无法确定可能是什么错误。似乎没有任何覆盖可以防止它们被显示。

```
http://74.220.219.55/~piedmoq6/patient-services/
http://74.220.219.55/~piedmoq6/wp-content/themes/piedmontpmr/style.css
http://74.220.219.55/~piedmoq6/wp-content/themes/piedmontpmr/normalize.css 
```

# php - Symfony如何添加用户

> ID：12679687
> 
> 赞同：2
> 
> 时间：2012-10-01T19:25:52.880
> 
> 标签：php, symfony

我想从 Symfony 中的 PHP 控制器在数据库中创建一个用户。

我使用 userInterface 实现创建用户实体，使用 sha512 编码添加安全防火墙。

要插入用户，我添加新路线：

```
user_create:
       pattern: /create_user/{email}/{password}
        defaults: { _controller: MyBundleBackendBundle:Security:create } 
```

并在安全控制器中添加新方法：

```
public function createAction($email,$password) {

} 
```

我在 PHP 控制器操作中使用什么代码在数据库中使用带有盐的 sha512 创建用户？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T22:52:38.223

如何通过代码在 symfony 中添加用户：

```
public function createUserAction($email,$password) {

    $factory = $this->get('security.encoder_factory');

    $user = new User();

    $encoder = $factory->getEncoder($user);
    $user->setSalt(md5(time()));
    $pass = $encoder->encodePassword($password, $user->getSalt());
    $user->setEmail($email);
    $user->setPassword($pass);
    $user->setActive(1); //enable or disable

    $em = $this->getDoctrine()->getEntityManager();
    $em->persist($user);
    $em->flush();

    return new Response('Sucessful');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:30:16.427

阅读[安全性](http://symfony.com/doc/current/book/security.html)和[如何实施简单的注册表单](http://symfony.com/doc/current/cookbook/doctrine/registration_form.html)

如果您正在制作通用登录/注册系统[，FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)是一个不错的选择。

# c# - 更改 CellRendererCombo (Gtk#) 后更新 TreeView

> ID：12679688
> 
> 赞同：0
> 
> 时间：2012-10-01T19:25:56.157
> 
> 标签：c#, combobox, gtk#, gtktreeview, cellrenderer

`Gtk.TreeView`有人可以指出我在 Gtk# 中更改 CellRendererCombo 后如何更新 a 的正确方向吗？

由于我找到的唯一示例是在 Python 中，因此我尝试将示例移植到 C#，但到目前为止没有成功。

Python 示例在这里： http: [//learngtk.org/pygtk-tutorial/cellrenderercombo.html](http://learngtk.org/pygtk-tutorial/cellrenderercombo.html)

在下面的代码中，我在使用 ComboChanged 方法时遇到了困难。

更改组合框中的值（通过选择不同的值）并将焦点放在组合框之外后，该值不会更改。

```
using System;
using Gtk;
using System.Collections.Generic;

public partial class MainWindow: Gtk.Window
{   
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();
        var tvComboBox = InitTreeViewWithComboBox ();
        var vbox = new Gtk.VBox ();
        vbox.PackStart (tvComboBox, true, true, 0);
        this.Add (vbox);
        this.ShowAll ();
    }       

    // adopted from http://learngtk.org/pygtk-tutorial/cellrenderercombo.html
    ListStore liststore_hardware;
    ListStore liststore_manufacturers;

    private TreeView InitTreeViewWithComboBox ()
    {
        liststore_manufacturers = new Gtk.ListStore(typeof (string));
        var manufacturers = new List<string> {"Sony", "LG", "Panasonic", "Toshiba", "Nokia", "Samsung"};
            foreach (var item in manufacturers) {
            liststore_manufacturers.AppendValues (item);
        }

        liststore_hardware = new Gtk.ListStore(typeof (string), typeof (string));
        liststore_hardware.AppendValues ("Television", "Samsung");
        liststore_hardware.AppendValues ("Mobile Phone", "LG");
        liststore_hardware.AppendValues ("DVD Player", "Sony");

        var treeview = new Gtk.TreeView ();
        treeview.Model = liststore_hardware;

        var column_text = new TreeViewColumn { Title = "Text" };
        var column_combo = new TreeViewColumn { Title = "Combo" };
        treeview.AppendColumn (column_text);
        treeview.AppendColumn (column_combo);

        var cellrenderer_text = new CellRendererText ();
        column_text.PackStart (cellrenderer_text, false);
        column_text.AddAttribute (cellrenderer_text, "text", 0);

        var cellrenderer_combo = new CellRendererCombo ();
        cellrenderer_combo.Editable = true;
        cellrenderer_combo.Model = liststore_manufacturers;
        cellrenderer_combo.TextColumn = 0;
        column_combo.PackStart (cellrenderer_combo, false);
        column_combo.AddAttribute (cellrenderer_combo, "text", 1);

        cellrenderer_combo.Edited += ComboChanged;

        return treeview;
    }

    void ComboChanged (object o, EditedArgs args)
    {
        // Not really sure what to do here....

        /*
        var crc = o as CellRendererCombo;
        TreeIter iter; // index within the combobox
        if (!crc.Model.GetIterFirst (out iter)) {
            return;
        }
        crc.Model.SetValue (iter, 0, args.NewText);
        liststore_hardware.SetValue (iterHardware, 1, args.NewText);
        */
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:28:08.373

通过API多一点我找到了解决方案......：

```
void ComboChanged (object o, EditedArgs args)
{
    TreeSelection selection = treeview.Selection;
    TreeIter iter;
    if (!selection.GetSelected (out iter)) {
        return;
    }
    liststore_hardware.SetValue (iter, 1, args.NewText);
} 
```

# c++ - 如何修复编译器错误“类没有名为 X 的成员”？

> ID：12679693
> 
> 赞同：0
> 
> 时间：2012-10-01T19:26:24.527
> 
> 标签：c++, object, inheritance, polymorphism, virtual

我目前正在编写表达式评估器，并且遇到了关于多态性的问题。我的类层次结构如下： Divide 继承自 Operator，Operator 继承自基类 Expression。当我使用基类 Expression 实例化 Divide 类型的对象并尝试访问函数 divide(int, int) 时，我收到以下错误：

“Expression.cpp：在成员函数'int Expression::evaluate()'中：Expression.cpp:37:6：错误：'class Expression'没有名为'divide'的成员”

这是“Expression.h”

```
#ifndef EXPRESSION_H
#define EXPRESSION_H
#include <string>
using namespace std;
class Operator;
class Divide;
class Expression 
{
  protected:
    char **ana, *exp;

  public:
   Expression();
   ~Expression();
   Expression(char* ex);
   int evaluate();
   void tokenize();

    class EmptyException
    {
       public:
     EmptyException(string a){reason = a;};
     string getReason() const{return reason;};
       private:
     string reason;
    };

};

#endif 
```

这是“Expression.cpp”

```
#include "Expression.h"
#include "Stack.h"
#include "Queue.h"
#include "Node.h"
#include <iostream>
#include <cstring>
#include <stdio.h>
#include <ctype.h>
#include "Operator.h"
#include "Divide.h"

Expression::Expression()
{

} 

Expression::~Expression()
{
   delete [] exp;
}

Expression::Expression(char* ex)
{
   exp = ex;
   //tokenize();

}

int Expression::evaluate()
{
  Stack stack;

  Expression *tmp;
  Divide d;
  tmp = &d;
  tmp->divide(4, 2);
  stack.push(tmp);
   tmp = stack.pop();

 }

 void Expression::tokenize()
 {  
   int space = 0;

   for(int i  =0 ; i < strlen(exp); i++)
   {
     if(exp[i] == ' ')
     space++;
   } 

   char ** ana = new char*[space + 1];
   ana[0] = strtok(exp, " ");

   for(int i = 1 ; i < space + 1; i++)
   {        
   ana[i]= strtok (NULL, " ");
   }

  } 
```

现在是“operator.h”

```
#ifndef OPERATOR_H
#define OPERATOR_H
#include "Expression.h"

using namespace std;

class Operator : public Expression
{
  protected:
    bool unary, binary;
  public:
    Operator();
    bool isUnary() const;
    bool isBinary() const;
};

#endif 
```

“操作员.cpp”

```
#include "Operator.h"
#include <string>
#include <cmath>
#include "Expression.h"

Operator::Operator()
{

}

bool Operator::isUnary() const 
{
      if(unary)
    return true;
      else
    return false;

}

bool Operator::isBinary() const 
{
      if(binary)
    return true;
      else
    return false; 
} 
```

“除.h”

```
#ifndef DIVIDE_H
#define DIVIDE_H

#include <string>
#include "Operator.h"
class Expression;
using namespace std;

class Divide : public Operator
{
        private:
      char id;
    public:
        Divide();
        Divide(char);
        int divide(int a, int b);
        char identity() const;
};

#endif 
```

“除法.cpp”

```
#include "Divide.h"

int Divide::divide(int a, int b)
{
  return a/b;
}

Divide::Divide(char _id)
{
 id = _id; 
}

char Divide::identity() const
{
  return id;
} 
```

并以防万一生成文件

```
main: Expression.o Equation.o Operator.o Divide.o Stack.o Queue.o main.o
   g++ -static main.o Equation.o Expression.o Operator.o Divide.o Stack.o Queue.o -o main

main.o : main.cpp 
        g++ -c main.cpp 

Equation.o : Equation.cpp Equation.h
    g++ -c Equation.cpp

Expression.o : Expression.cpp Expression.h 
    g++ -c Expression.cpp 

Operator.o : Operator.cpp Operator.h Expression.h 
    g++ -c Operator.cpp 

Divide.o : Divide.cpp Divide.h Operator.h
    g++ -c Divide.cpp 

Stack.o : Stack.cpp Stack.h Node.h
    g++ -c Stack.cpp

Queue.o : Queue.cpp Queue.h Node.h
    g++ -c Queue.cpp 
```

我省略了所有其他运算符，例如。加号，减号等，因为它们都与 Divide 相同，只会使这个问题更加复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:30:18.243

这很清楚，对吧？`Expression`没有方法`divide`。

```
Expression *tmp;
Divide d;
tmp = &d;
tmp->divide(4, 2); //tmp is an Expression* 
```

还有……**你为什么要这么做？**有什么问题：

```
Divide d;
d.divide(4,2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:30:09.757

您的问题是您正在调用`divide`名为的变量，该变量`temp`是指向`Expression`此处的指针：`tmp->divide(4, 2);` 您应该在`d`变量上调用除法。

# r - R：我是否导入了 rtracklayer 包？

> ID：12679698
> 
> 赞同：0
> 
> 时间：2012-10-01T19:26:53.297
> 
> 标签：r, package

我试图搜索这个。而且我想我可能不得不更改 R 中的代理设置或其他东西。但我不确定我是否可以使用包“rtracklayer”？谢谢！

```
> source("http://bioconductor.org/biocLite.R")
BiocInstaller version 1.4.7, ?biocLite for help
> biocLite("rtracklayer")
BioC_mirror: http://bioconductor.org
Using R version 2.15, BiocInstaller version 1.4.7.
Warning: unable to access index for repository http://brainarray.mbni.med.umich.edu/bioc/bin/macosx/leopard/contrib/2.15
Installing package(s) 'rtracklayer'
Warning: unable to access index for repository http://brainarray.mbni.med.umich.edu/bioc/bin/macosx/leopard/contrib/2.15
trying URL 'http://www.bioconductor.org/packages/2.10/bioc/bin/macosx/leopard/contrib/2.15/rtracklayer_1.16.3.tgz'
Content type 'application/x-gzip' length 1963816 bytes (1.9 Mb)
opened URL
==================================================
downloaded 1.9 Mb

tar: Failed to set default locale

The downloaded binary packages are in
    /var/folders/18/_8lq3d811h379dld563yxbyc0000gr/T//RtmpsRfkls/downloaded_packages
Warning: unable to access index for repository http://brainarray.mbni.med.umich.edu/bioc/bin/macosx/leopard/contrib/2.15 
```

更新：一旦加载这些包似乎工作正常，所以我真的不知道是否有问题......

# java - Java反射可以调试吗？

> ID：12679704
> 
> 赞同：0
> 
> 时间：2012-10-01T19:27:19.547
> 
> 标签：java, eclipse, reflection

我对 Java 反射不是很擅长，我正在尝试调试一段使用大量反射的丑陋代码。我在一些应该调用的方法上放置了一个断点，但是当我执行程序时代码从不暂停。因此，这使我相信在 Eclipse（Windows 7 上的 Indigo）中运行时使用反射运行方法会忽略断点。

谁能证实这一点？我在下面提供了一个示例，尽管由于我不知道如何使用反射执行特定于类的方法，因此它不起作用，但我希望它可以澄清我在问题中提出的问题：

```
public static void main(String[] args)
{
    try
    {
        Class test = Class.forName("Test");

        test.runMethodDoSomething();
    }
    catch (ClassNotFoundException e)
    {
        e.printStackTrace();
    }
}

public static class Test
{
    public void doSomething()
    {
        // Place breakpoint here.
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:32:54.403

首先，反射与调试器不冲突。通常，您可以在方法中放置断点，然后使用反射调用它，调试器将停在那里。

其次，您的代码片段中没有反射。`Class.forName()`是动态类加载。反射是当你使用`obj.getClass().getMethod("myMethod").invoke()`.

因此，如果您的代码片段不起作用，请尝试了解您的环境或代码中的问题。在调用方法之前是否有可能引发某种异常，但在没有通知的情况下捕获了异常？

# c# - 快速收藏对比

> ID：12679705
> 
> 赞同：1
> 
> 时间：2012-10-01T19:27:25.263
> 
> 标签：c#, data-structures

我有以下数据类型：

```
ISet<IEnumerable<Foo>> 
```

所以，我需要能够创建序列集。例如，这没关系：

```
ABC,AC,A 
```

但这不是（因为这里重复了“AB”）：

```
AB,A,ABC,BCA,AB 
```

但是，为了做到这一点 - 为了“设置”不包含重复项，我需要将我的数据包装`IEnumerable`在某种其他数据类型中：

```
ISet<Seq>
//where
Seq : IEnumerable<Foo>, IEquatable<Seq> 
```

因此，我将能够比较两个序列，并为 Set 数据结构提供一种消除重复的方法。

我的问题是：是否有允许比较序列的快速数据结构？我在想，以某种方式`Seq`创建或添加两个时，会计算某种累积值。

换句话说，是否有可能以我可以这样做的方式实现 Seq：

```
var seq1 = new Seq( IList<Foo> );
var seq2 = new Seq( IList<Foo> )
seq1.equals(seq2) // O(1) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:45:10.167

我在下面提供了您的序列的实现。有几点需要注意：

1.  这只适用于`IEnumerable<T>`每次枚举时返回相同的项目，并且这些项目在此对象的范围内没有发生变化。
2.  哈希码被缓存。第一次请求它时，它会根据底层序列的完整迭代计算它（如果您知道更好的哈希码算法，请随意改进）。因为它只需要计算一次，如果你经常计算，这可以有效地考虑 O(1)。添加到集合可能会慢一些（第一次计算哈希值），但搜索或删除会非常快。
3.  equals 方法首先比较哈希码。如果散列码不同，则对象不可能相等（如果散列码在序列中的所有对象上都正确实现，并且没有任何变化）。只要您的冲突率较低，并且*通常*比较实际上不相等的项目，这意味着等于检查通常不会通过哈希码检查。如果他们这样做，则需要对序列进行迭代（没有办法解决这个问题）。因此，equals 的平均值可能为 O(1)，即使它最坏的情况仍然是 O(n)。

    公共类 Foo : IEnumerable { 私有 IEnumerable 序列；

    ```
    private int? myHashCode = null;

    public Foo(IEnumerable<T> sequence)
    {
        this.sequence = sequence;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return sequence.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return sequence.GetEnumerator();
    }

    public override bool Equals(object obj)
    {
        Foo<T> other = obj as Foo<T>;
        if(other == null)
            return false;

        //if the hash codes are different we don't need to bother doing a deep equals check
        //the hash code is cached, so it's fast.
        if (GetHashCode() != obj.GetHashCode())
            return false;

        return Enumerable.SequenceEqual(sequence, other.sequence);
    }

    public override int GetHashCode()
    {
        //note that the hash code is cached, so the underlying sequence 
        //needs to not change.
        return myHashCode ?? populateHashCode();
    }

    private int populateHashCode()
    {
        int somePrimeNumber = 37;
        myHashCode = 1;
        foreach (T item in sequence)
        {
            myHashCode = (myHashCode * somePrimeNumber) + item.GetHashCode();
        }

        return myHashCode.Value;
    } 
    ```

    }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:38:06.660

O(1) 本质上意味着您不允许比较元素的值。如果您可以将序列表示为不可变对象的列表（在添加时进行缓存，因此在所有实例中都没有重复项），您可以实现它，因为您只需要比较第一个元素 - 类似于字符串实习的工作方式。

Insert 必须搜索“current”+“with this next”元素的所有元素实例。某种字典可能是合理的方法......

编辑：我认为它只是想提出[suffix tree](http://en.wikipedia.org/wiki/Suffix_tree)。

# java - 使用子类的字段执行父方法

> ID：12679706
> 
> 赞同：2
> 
> 时间：2012-10-01T19:27:28.723
> 
> 标签：java, design-patterns, inheritance

想到以下问题的**优雅解决方案，我的头很疼。**我有一个父类和几个子类。我的父类声明并实现了一个检索属性的方法，但是属性文件的名称是由子类决定的。

我只处理子类的实例。

该方法（在父类中实现）应该使用子类的字段值，但是由于我在父类中使用它，因此我也需要在那里声明它。

现在，每次我从子类调用该方法时，都会使用父类的字段值。

一些简单的代码来说明我的问题（请记住：这与功能无关 - 更多关于设计）。定义我要使用的字段值的子类：

```
public class SubClass extends Parent {
  public static final String CONFIG_FILE = "subclass.properties"; // same problem with non-static
  public SubClass() {
    System.out.println(getProperty("somekey"));
  }
} 
```

以及定义和实现我要使用的方法的父类：

```
public class Parent {
  public static final String CONFIG_FILE = "config.properties"; // same problem with non-static
  public String getProperty(String key) {
    Properties props = new Properties();
    try {
      props.load(new FileReader(new File(CONFIG_FILE)));
    }
    catch (IOException ioe) {
      return null;
    }
    return props.get(key);
  } 
```

由于我`getProperty(..)`从子类调用，我希望它使用它正在操作的实例的字段值（“subclass.properties”），但它使用的是父字段值（“config.properties”）。我用非静态字段得到了同样的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:32:19.847

查看您的代码，您正在使用`Parent.CONFIG_FILE`, 在您应该使用的子类中`SubClass.CONFIG_FILE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:32:29.123

把它放在你的子类中。这将返回子类的属性。此方法将覆盖父类中的方法。

```
public String getProperty(String key) {
   return CONFIG_FILE;
 } 
```

顺便说一句，您正在[隐藏](http://en.wikipedia.org/wiki/Variable_shadowing)变量。

或者，我建议将变量名称传递给构造函数，然后让它调用 super。

```
public SubClass() {
    super(SUB_CLASS_CONFIG);
} 
```

然后让父构造函数类似于

```
public Parent(String key) { 
     CONFIG_FILE = key;
} 
```

那么您将不必重写该方法。该方法可以只返回父级中的配置。我会仔细考虑你是否希望它是静态的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:29:03.037

只需`getProperty()`在子类中覆盖（即实现）。

# c# - 使用 C# 在 LDAP 中搜索标题？

> ID：12679710
> 
> 赞同：2
> 
> 时间：2012-10-01T19:27:59.223
> 
> 标签：c#, visual-studio-2008, ldap

我正在尝试使用 C# 在 LDAP 中搜索用户的标题。

我目前的搜索是这样的，我正在尝试搜索一个名叫 John Smith 的清洁工：

```
search.Filter = "(&(objectCategory=person)(objectClass=contact)(|(sn=Smith)(givenname=John)(title=Janitor)))"; 
```

但它不起作用。

谁能指出我哪里出错了？我知道我的`sn`and`givenname`部分是正确的，因为该部分有效...... 但标题过滤器不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:47:07.490

这可能是因为在 LDAP`Title`中确实调用了该属性。`personalTitle`

试试这个搜索过滤器：

```
search.Filter = "(&(objectCategory=person)(objectClass=contact)(|(sn=Smith)(givenname=John)(personalTitle=Janitor)))"; 
```

Active Directory MVP Richard Mueller 有一个很棒的站点，其中包含有关如何从 .NET 使用 AD 的宝贵信息 -[在这里找到他的参考文档（Excel 表）](http://www.rlmueller.net/UserAttributes.htm) - 下载它们，使用它们 - 享受吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:10:46.000

您使用的是什么 LDAP 服务器？

在 CentOs DS 上，这个工作：

```
search.Filter = "(&(objectClass=person)(sn=Smith)(givenname=John)(title=Janitor))"; 
```

# javascript - 如何从 Asp.Net 中的用户获取 DropDownList 选定值（selectedIndexChange）

> ID：12679720
> 
> 赞同：0
> 
> 时间：2012-10-01T19:28:22.803
> 
> 标签：javascript, asp.net

如何使用 selectedIndexChanged 和更新面板从 asp.Net 中的 DropDownList 获取所选值？我已经尝试过，但是当我将 AutoPostBack 添加到我的 DropDownList 时，它会将我发送到一个错误页面，说它找不到资源。（甚至没有点击我的“selected_IndexChanged”）我已经为 hiddenField 分配了选定的值。

这是我的下拉列表：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:UpdatePanel runat="server" ID="UpdatePanel1">
        <ContentTemplate>
            <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
                DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="300px"
                AutoPostBack="true" OnSelectedIndexChanged="ddlCaseFilesNew_SelectedIndexChanged" Visible="False">
                <asp:ListItem>Item 1</asp:ListItem>
            </asp:DropDownList>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlCaseFilesNew" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel> 
```

当我单击 DropDownList 中的值时，它会将我发送到“找不到资源”页面。我不知道为什么。它甚至没有触及我的“onSelectedIndexChanged”

```
 <script runat="server">
    protected void ddlCaseFilesNew_SelectedIndexChanged(object sender, EventArgs e)
    {
        hidNewCaseFile.Value = ddlCaseFilesNew.SelectedItem.Value;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:34:09.513

在 SelectedIndex 函数中，使用

```
string sValue = ((DropDownList)sender).SelectedValue; 
```

由于它位于更新面板中，因此您可能无法通过设计器 (this.DdlId) 访问它。

根据您在 OP 中的评论，这可能是您需要的：

```
protected void ddlCaseFilesNew_SelectedIndexChanged(object sender, EventArgs e)
{
    hidNewCaseFile.Value = ((DropDownList)sender).SelectedValue;
} 
```

您还需要将隐藏字段移动到 ContentTemplate 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:30:44.003

采用：

```
protected void myDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    var res = this.myDropDownList.SelectedValue;
} 
```

或者：

```
protected void myDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    var ddl = sender as DropDownList;
    var res = ddl.SelectedValue;
} 
```

### 编辑 1

您需要了解部分页面呈现发生在 a 中的所有**控件`UpdatePanel`**，在您的情况下，您尝试设置控件的`Value`属性，该属性`hidNewCaseFile`似乎不在其中**，`UpdatePanel`**因此，它的值将永远不会更新

# javascript - FB.Event.subscribe & FB.getLoginStatus 没有触发

> ID：12679722
> 
> 赞同：3
> 
> 时间：2012-10-01T19:28:36.670
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我在 stackoverflow 上查看了各种文档和问题，但仍然无法弄清楚为什么以下代码不会触发任何 FB.Event.subscribe 事件 getLoginStatus。

```
<div id="fb-root">
<script>
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));

    window.fbAsyncInit = function () {
        FB.init({
            appId: '{appID}', // App ID
            channelUrl: '{channelURL}', // Channel File
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true,  // parse XFBML
            oauth: true // enable OAuth 2.0
        });

        FB.Event.subscribe('auth.authResponseChange', function (response) {
            console.log(response);
        });

        FB.Event.subscribe('auth.login', function (response) {
            console.log(response);
        });

        FB.Event.subscribe('auth.statusChange', function (response) {
            console.log(response);
        });

        FB.getLoginStatus(function (response) {
            console.log(response);
        });
    };

</script>
</div>
<div>
    <div class="fb-login-button" data-show-faces="true" data-width="400" data-max-rows="1"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:38:12.080

如果其他人需要它，我在另一个问题上找到了我的问题的答案：

[FB.Event.subscribe 不适用于 auth.login、auth.logout 和 auth.statusChange](https://stackoverflow.com/questions/11727076/fb-event-subscribe-not-working-for-auth-login-auth-logout-and-auth-statuschange)

我进入 facebook 并将 Canvas URL 更新为我的 localhost URL 并且它有效。

# r - 使用 %in% 运算符重新编码 R 中的变量以避免 NA

> ID：12679731
> 
> 赞同：1
> 
> 时间：2012-10-01T19:29:04.033
> 
> 标签：r

我正在为工作中的心理测量仪器评分，并想重新编码一些变量。基本上，每个问题都有五个可能的答案，分别为 0 到 4。这就是它们被编码到我们的数据库中的方式，所以我不需要做任何事情，除了对它们求和。但是，有三个问题的分数相反（因此，当有人回答 0 时，我们将其计为 4）。因此，我正在“扭转”那些。

数据框基本上是这样的：

```
studyid  timepoint      date      inst_q01  inst_q02  ...  inst_q20
   1         2       1995-03-13       0         2     ...      4
   2         2       1995-06-15       1         3     ...      4 
```

这是我到目前为止所做的。

```
# Survey Processing
# Find missing values (-9) and confusions (-1), and sum them
project_f03$inst_nmiss <- rowSums(project_f03[,4:23]==-9)
project_f03$inst_nconfuse <- rowSums(project_f03[,4:23]==-1)
project_f03$inst_nmisstot <- project_f03$inst_nmiss + project_f03$inst_nconfuse

# Recode any missing values into NAs
for(x in 4:23) {project_f03[project_f03[,x]==-9 | project_f03[,x]==-1,x] <- NA}
rm(x) 
```

现在，到目前为止一切都很好，我将重新编码三个反转的。现在，我最初的想法是通过三个变量做一个简单的循环，并执行一系列赋值语句，如下所示：

```
# Questions 3, 11, and 16 are reversed
for(x in c(3,11,16)+3) {

    project_f03[project_f03[,x]==4,x] <- 5
    project_f03[project_f03[,x]==3,x] <- 6
    project_f03[project_f03[,x]==2,x] <- 7
    project_f03[project_f03[,x]==1,x] <- 8
    project_f03[project_f03[,x]==0,x] <- 9
    project_f03[,x] <- project_f03[,x]-5
}
rm(x) 
```

因此，五个赋值语句只是重新分配新值，而循环只是将它遍历所有三个有问题的变量。由于我正在反转比例，我认为最容易将所有内容偏移 5，然后在所有重新编码完成后减去 5。但是，主要问题是存在 NA，并且这些 NA 会导致循环中的错误（自然会在 R 中`NA==4`返回一个`NA`）。呃 - 忘记了一个基本规则！

我想出了三个替代方案，但我不确定哪个是最好的。

*   首先，我显然可以在循环之后移动创建 NA 的代码，它应该可以正常工作。优点：最容易实现。缺点：仅当我接收没有先天（相对于创建）NA 的数据时才有效。
*   其次，我可以将逻辑语句更改为： `project_f03[!is.na(project_f03[,x]) && project_f03[,x]==4,x]`应该消除逻辑冲突。优点：不太难，我知道它有效。缺点：很多额外的代码，看起来像是一个杂物。
*   最后，我可以将逻辑从 更改 `project_f03[project_f03[,x]==4,x] <- 5`为 `project_f03[project_f03[,x] %in% 4,x] <- 5`。这似乎工作正常，但我不确定这是否是一个好习惯，并想得到一些想法。优点：快速解决此问题并且似乎有效；保留“blah blah LOGIC blah <- bleh”的一般句法流程。缺点：可能会产生黑洞？不确定使用`%in%`这样的潜在影响可能是什么。

**编辑清楚**

这个问题有一个主要组成部分：`%in%`在进行逻辑运算时使用上述第三点是否安全，或者是否有理由不这样做？

第二个组成部分是：有哪些推荐的反转值的方法，就像答案和评论中描述的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:33:30.250

它不回答你的问题，但应该解决你的问题：

```
cols <- c(3,11,16)+3
project_f03[, cols] <- abs(project_f03[, cols]-4)
## or a lot of easier (as @TylerRinker suggested):
project_f03[, cols] <- max(project_f03[, cols]) - project_f03[, cols] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:15:57.523

直接的答案是没有黑洞可以使用`%in%`。但是在我只想丢弃这些`NA`值的情况下，我会使用`which`：`project_f03[which(project_f03[,x]==4),x] <- 5`

`%in%`可以缩短您之前的代码：

```
for(x in 4:23) {project_f03[project_f03[,x]==-9 | project_f03[,x]==-1,x] <- NA}
#could be
for(x in 4:23) {project_f03[project_f03[,x] %in% c(-9,-1), x] <- NA} 
```

就像@flodel 建议的那样，您可以将 for 循环中的整个代码块替换为`project_f03[,x] <- rev(0:4)[match(project_f03[,x], 0:4, nomatch=10)]`. 它应该保留`NA`. 并且可能有更多的机会来简化代码。

# html - Blogger 中的 CSS 和 HTML 下拉菜单 --- 在 IE 中悬停时没有行为；但在其他浏览器中完美

> ID：12679736
> 
> 赞同：3
> 
> 时间：2012-10-01T19:29:27.110
> 
> 标签：html, css, internet-explorer, drop-down-menu, blogger

我正在使用 html 和 CSS 向我的博客添加一个下拉菜单栏。

代码来自[My Blogger Lab](http://www.mybloggerlab.com/2012/05/animated-css3-multi-drop-down-menu-for.html)，对颜色等进行了调整。

我的测试站点是： http: [//practicedailygratitude.blogspot.com/](http://practicedailygratitude.blogspot.com/)

我对它在 Chrome 和 Firefox 中的外观感到 100% 满意（下拉菜单实际上仅适用于 About、Images 和 Home DIY；其余的只是链接）。

我在 IE 中遇到以下问题（我尝试了 7、8 和 64 位）：

1.  在资源管理器中，下拉菜单的背景几乎是透明的（我可以看到它们后面的帖子文本）
2.  在资源管理器中，下拉菜单发生得如此之快，以至于我无法悬停或选择。
3.  在 safari 中，链接不活动，并且下拉菜单出现在悬停上。

我已经搜索了两个星期，并尝试了其他帖子的不同调整和建议，但我不知道如何让它在 IE 中工作。

我不使用 IE，但她 30+% 的博客追随者使用，所以我需要做出调整，此时我完全没有想法（而且我已经达到了我的能力）。

我已经能够在 Chrome 和 Firefox 中调整代码以使其完全符合我的要求（下拉菜单悬停在标题中的旗帜横幅上）。

注意：此代码要求将 html 小工具放在博客文章部分的顶部，而不是标题，这就是为什么我更改了一些边距等以使下拉菜单移动并与标题“看起来正确”它背后的图像。

这是我所看到的：

![在此处输入图像描述](../Images/8cd81627ac7359cdaab343c981f6d6b3.png)

主题是 Josh Peterson 的 Blogger 中的 SIMPLE。是Blogger中为数不多的选择之一----我没有修改过；我只修改了我在帖子部分上方添加的 1 个 html 小部件，然后有一个模板的高级 CSS 选项卡 ---- 那是我转到高级的地方，然后“添加 CSS”并添加了来自 My Blogger Lab 的 CSS （仅更新颜色和移动，以便覆盖标题）----看起来 CSS 然后将自身添加到 SIMPLE 模板中。

小部件的 html：http: [//practicedailygratitude.blogspot.com/2012/09/my-blogger-lab-html-code-for-widget.html](http://practicedailygratitude.blogspot.com/2012/09/my-blogger-lab-html-code-for-widget.html)

CSS： http: [//practicedailygratitude.blogspot.com/2012/09/my-blogger-labs-css-i-modified-for.html](http://practicedailygratitude.blogspot.com/2012/09/my-blogger-labs-css-i-modified-for.html)

Blogger 中的简单模板 [http://practicedailygratitude.blogspot.com/2012/10/simple-template-from-blogger.html](http://practicedailygratitude.blogspot.com/2012/10/simple-template-from-blogger.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:11:57.850

我查看了您的代码，首先需要对其进行清理。通过清理，我的意思是标记中的语法错误：http: [//validator.w3.org/check ?uri=http%3A%2F%2Fpracticedailygratitude.blogspot.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fpracticedailygratitude.blogspot.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

这里有很多错误可能导致您遇到的问题。

如果您在清理后仍然看到问题，您可能应该将其视为 IE7 上的常规 z-index 问题。`position: relative;`如果您将和`z-index: 500;`放在包含菜单的所有父元素上，则可以解决此问题。因此，`div`通过`div`添加`position`and`z-index`规则。由于您的菜单的`z-index`值为`500`，因此其父项也必须为该规则定义一个值，该值必须等于或大于子元素 - 在本例中为菜单。这将解决菜单位于内容后面的问题（我已经在站点的当前状态下对其进行了测试）。

附带说明一下，您的页面上声明了以下标签：`<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/>`. 这样做是强制 Internet Explorer 8+ 使用 IE7 兼容模式呈现页面。我认为您希望删除此标签。

让我知道这是否对您有所帮助。

# cuda - 来自多个进程的并发 GPU 内核执行

> ID：12679737
> 
> 赞同：9
> 
> 时间：2012-10-01T19:29:29.343
> 
> 标签：cuda, opencl, gpu, nvidia, amd-processor

我有一个应用程序，我想在多个进程之间共享一个 GPU。也就是说，这些进程中的每一个都将创建自己的 CUDA 或 OpenCL 上下文，以相同的 GPU 为目标。根据 Fermi 白皮书 [1]，应用程序级别的上下文切换不到 25 微秒，但启动在 GPU 上启动时会被有效地序列化——因此 Fermi 不能很好地解决这个问题。根据 Kepler 白皮书 [2]，有一种称为 Hyper-Q 的东西，它允许来自多个 CUDA 流、MPI 进程或进程中的线程的多达 32 个同时连接。

我的问题：有没有人在 Kepler GPU 上尝试过这个并验证了它的内核在从不同的进程调度时是同时运行的？这只是 CUDA 功能，还是也可以在 Nvidia GPU 上与 OpenCL 一起使用？AMD 的 GPU 是否支持类似的东西？

[1] [http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)

[2] [http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf](http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:51:40.303

针对第一个问题，NVIDIA 在博客中发布了一些 hyper-Q 的[结果](http://blogs.nvidia.com/2012/08/unleash-legacy-mpi-codes-with-keplers-hyper-q/)。该博客指出，移植 CP2K 的开发人员能够更快地获得加速结果，因为 hyper-Q 允许他们或多或少地使用应用程序的 MPI 结构并在单个 GPU 上运行多个等级，并获得这样可以提高 GPU 的有效利用率。正如评论中提到的，这个（hyper-Q）功能目前仅在 K20 处理器上可用，因为它依赖于 GK110 GPU。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-29T08:24:18.877

我已经从 Fermi 架构运行了同步内核，它运行得非常好，事实上，这通常是从硬件中获得高占用率的唯一方法。我使用了 OpenCL，您需要从单独的 cpu 线程运行单独的命令队列才能执行此操作。Hyper-Q 能够从另一个内核中分派新的数据并行内核。这仅在开普勒上。

# php - php preg_match 帮助从 URL 获取 facebook 用户名/id

> ID：12679739
> 
> 赞同：5
> 
> 时间：2012-10-01T19:29:41.137
> 
> 标签：php, regex, facebook, api, preg-match

我正在尝试从 facebook url 获取 facebook 用户名或 id，并且想知道您是否可以帮助我。我确定这只是一个简单的正则表达式函数，但我已经尝试过，但我自己似乎无法做到。

这是我一直试图从网址中获取的内容。

> [http://www.facebook.com/](http://www.facebook.com/)**我的用户名**/

或数字ID

> [http://www.facebook.com/](http://www.facebook.com/) **2285652** /

**如果有人能帮助我通过PHP**实现这一目标，我将不胜感激

 *** * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T19:32:15.177

```
preg_match('#https?\://(?:www\.)?facebook\.com/(\d+|[A-Za-z0-9\.]+)/?#',$str,$matches); 
```

该模式是通用的，因此它匹配：

1.  http 和 https URL。
2.  URL 带或不带`www`前缀。
3.  URL 带有或不带有尾随`/`.
4.  匹配 Facebook 数字 ID。
5.  符合[Facebook 的用户名规则](https://www.facebook.com/help/?faq=105399436216001#What-are-the-guidelines-around-creating-a-custom-username?)。

> 用户名只能包含字母数字字符（AZ、0-9）或句点（“.”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T19:33:31.603

没有正则表达式：

```
$array = parse_url($url);
echo trim($array['path'], '/'); 
```**

# c++ - C++ 从地图的第二个元素迭代

> ID：12679740
> 
> 赞同：5
> 
> 时间：2012-10-01T19:29:51.357
> 
> 标签：c++, stl, multimap

我有一个`std::multimap`我正在使用前向迭代器迭代的。

```
std::multimap<int,char>::iterator it;
for(it=map.begin();it!=map.end();++it) {
    // do something
} 
```

现在我需要区别对待第一个元素并从地图的第二个元素开始迭代。我怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T19:32:53.247

```
std::multimap<int,char>::iterator it;

for(it = std::next(map.begin()); it != map.end(); ++it) {
    // do something
} 
```

这只是 C++11。您需要包括`<iterator>`.

另一个选项很明显，但不太漂亮：

```
it = map.begin();
++it;
for(; it != map.end(); ++it) {
    // do something
} 
```

也来看看吧[`std::advance`](http://en.cppreference.com/w/cpp/iterator/advance)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T21:01:30.037

好像看起来更短

```
it = ++map.begin(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:34:03.527

```
std::multimap<int,char>::iterator it = map.begin();
//treat it here
++it
for(;it!=map.end();++it) {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T19:34:24.120

```
for(bool First=true, it=map.begin();it!=map.end();++it) {
    if (First) { do something; First=false; }
    else { do something else; }
} 
```

或者，如果您愿意：

```
iterator it=map.begin();
if (it!=map.end()) { do something; ++it; }
for (; it!=map.end(); ++it) { do something } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T19:38:50.013

将 for-initializer更改`it = map.begin()`为`it = map.begin(), ++it`.

# amazon-s3 - S3 或 EBS 用于将数据存储在平面文件中

> ID：12679742
> 
> 赞同：0
> 
> 时间：2012-10-01T19:29:56.250
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, cloud, amazon-ebs

我有平面文件，我在其中存储数据并检索它，而不是存储到数据库中。这是暂时的，可能会持续几个月。我想知道我应该使用 EBS 还是 S3。EBS 主要用于 I/O，S3 用于内容交付，但是 S3 是在使用你去模型和 EBS 是你必须为购买的量付费吗？请指导，哪个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:36:49.963

S3 听起来更适合您的用例。

S3 是对象存储。将其视为 Amazon 运行的文件服务器。（对象并不完全等于文件，但在这里已经足够接近了。）您告诉 S3 放置一个文件，它会存储它。你告诉 S3 获取一个文件，它会返回它。你告诉 S3 删除它，它就消失了。这很容易使用并且非常可扩展。

EBS 是块存储。将其视为亚马逊运行的外部硬盘驱动器。您可以将 EBS 卷插入[EC2](http://aws.amazon.com/ec2/)虚拟机，或者通过互联网通过[AWS Storage Gateway](http://aws.amazon.com/storagegateway/)访问它。就像外部硬盘驱动器一样，您一次只能将其插入一台计算机。大小是预先设置好的，虽然有一些方法可以扩大和缩小它，但你一直在为所有的位付出代价。它也比 S3 复杂得多，因为它必须为整个卷提供强大的一致性保证，而不仅仅是在逐个文件的基础上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T19:05:50.797

Point 1) You can use both S3 and EBS for this option. If you want reduced latency and file sizes are bigger then EBS is better option.

Point 2) If you want lower costs, then S3 is a better option.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:21:51.820

以willglynn的好答案为基础。如果您定期与数据交互，或者需要更多类似文件系统的访问权限，您可能会更强烈地考虑 EBS。

如果数据量相对较小并且您定期读取和写入数据存储，您可能会考虑使用类似弹性缓存的内存存储，这可能会比使用 s3 或 EBS 在性能方面更出色。

同样，您可能会查看 DynamoDb 的文档类型存储，尤其是当您需要能够搜索/过滤数据对象时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:30:05.020

From what you describe, S3 will be the most cost-effective and likely easiest solution.

Pros to S3: 1\. You can access the data from anywhere. You don't need to spin up an EC2 instance. 2\. Crazy [data durability numbers](http://aws.amazon.com/s3/faqs/#How_durable_is_Amazon_S3). 3\. Nice versioning story around buckets. 4\. Cheaper than EBS

Pros to EBS 1\. Handy to have the data on a file system in EC2\. That let you do normal processing with the Unix pipeline. 2\. Random Access patterns work as you would expect. 3\. It's a drive. Everyone knows how to deal with files on drives.

If you want to get away from a flat file, DynamoDB provides a nice set of interfaces for putting lots and lots of rows into a table, then running operations against those rows.

# emacs - Emacs：使用 Mx ansi-term 运行的默认二进制文件

> ID：12679743
> 
> 赞同：13
> 
> 时间：2012-10-01T19:29:58.770
> 
> 标签：emacs, zsh, ansi-term

有没有办法让 Emacs 在运行时默认提示我选择的二进制文件`M-x ansi-term`。它总是要求我，`/bin/zsh`但我`zsh`在不同的路径中进行了新安装。

或者，让 Emacs 在我键入时运行我想要的二进制文件会很棒`M-x my-ansi-term`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T19:37:44.210

有多种方法可以指定默认 shell：

*   设置变量`explicit-shell-file-name`。例如，在您的`.emacs`：`(setq explicit-shell-file-name "/bin/zsh")`
*   设置环境变量`ESHELL`
*   设置环境变量`SHELL`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T05:22:35.553

> 或者，让 Emacs 在我键入 Mx my-ansi-term 时运行我想要的二进制文件会很棒

请参阅[Emacs 中的远程 ssh 连接](https://stackoverflow.com/questions/10495432/remote-ssh-connection-from-within-emacs/10536794#10536794)。

# outlook-addin - 取消 Outlook AppointmentItems

> ID：12679746
> 
> 赞同：3
> 
> 时间：2012-10-01T19:30:13.743
> 
> 标签：outlook-addin, appointment

关于取消 C# 加载项中的约会/会议，我有一个奇怪的问题。当然，我可能没有正确处理这些事件。我就是这样做的：

*   `BeforeDelete`在可能有 0 到 n 个收件人的 AppointmentItem 上注册事件
*   *我的目标是在有*和*没有*取消消息 ​​的情况下处理 AppointmentItem 的删除：
    *   **没有收件人：**在删除之前要求确认`BeforeDelete`。在 Outlook 离开`BeforeDelete`事件处理程序后，该项目将从日历中删除。如果用户拒绝确认，我会使用它`Cancel = true`来防止删除。
    *   **1 到 N 个收件人：** Outlook 将`BeforeDeletion`照常进入。主要区别现在不会删除，但检查器会打开，您可以将取消消息发送给收件人。在这种情况下，我想在用户单击“发送取消”后要求用户确认。
*   **问题：** *我如何区分没有直接删除收件人的会议和需要发送取消消息的会议？*
*   **这里有一个奇怪的问题：**当我创建一个有 1 个收件人的 AppointmentItem 时，我在不同的 Outlook 安装中已经有不同的行为（都是 2010，一个使用 Gmail 帐户，另一个连接到公司 Exchange Server）：使用 Gmail 帐户的 Outlook告诉我`AppointmentItem.Recipients.Count`是**1**，带有 Exchange Server 的 Outlook 告诉我有**2 个**收件人（*包括我自己！*）。这是为什么？？

# html - 背景图像：url（）不起作用，图像也没有显示

> ID：12679748
> 
> 赞同：0
> 
> 时间：2012-10-01T19:30:13.993
> 
> 标签：html, css

我的背景图片未显示在网站上。我正在使用带有 CSS 的 HTML5。这是相应的代码。

```
 body {
        width: 1000px;
        background-image: url(background.jpg);
        background-repeat:repeat-x;
        background-color:#D1E1E1;
        } 
```

其次，当我尝试通过访问 URL 来查看图像时，例如 myurl[dot]com/background.jpg

但是，图像存在于我的服务器上。什么时候，我去我的文件管理器，然后单击查看图像，它会正确显示。

我的整个网站加载，而不是图像。这是非常奇怪的行为，我不知道。我在网上查了一下，找不到任何解决方案。

**编辑：**当我在自己的计算机（本地主机）上运行此代码时，该站点可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:42:18.390

```
Failed to load resource: the server responded with a status of 403 (Forbidden) 
```

检查文件权限，它至少应该是 644，但只要设置为 777

如果这没有帮助，你有没有玩过你的 .htaccess 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:42:08.260

看起来您在服务器上应用了某种重写规则。无论您在地址栏中输入什么内容，它都会返回您的主页。

顺便说一句，不知道如何像评论一样回复而不是作为答案发布..对不起

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:43:11.637

对于服务器上的内容，您的图像路径不正确。

当我访问该站点并输入[http://random.uiet.org/style.css](http://random.uiet.org/style.css)时，我会看到您的样式表。通过您的 styledef，我也应该能够查看您的背景图片。但是当我访问[http://random.uiet.org/background.jpg](http://random.uiet.org/background.jpg)时，我只看到了整个网站——根本看不到任何图像。因此，服务器可能设置为不生成 404 错误页面。

在服务器上，您的 background.jpg 文件在哪里？它的完整路径是什么？

# php - 如何根据与用户输入匹配的单词数进行排名

> ID：12679751
> 
> 赞同：1
> 
> 时间：2012-10-01T19:30:19.397
> 
> 标签：php

在我的查询中，我基本上是在尝试对这个搜索引擎使用全文搜索。当用户键入一个项目时，查询会查看我的 mysql 表中是否有相同的字段。

例如，假设用户输入 'iPad' 。我的表可能有“标题”、“描述”、“关键字”和“链接”字段：

我的桌子可能有：

```
 Apple, which contains the term iPad once in the description
 iOS 6, which contains iPad say twice, in the description and title (these are examples)
 and iPad, which contains the term 'iPad' in the link, description, title and keywords. 
```

第三个结果显示排名第一，其次是排名2，然后是id 1。

但是假设我想输入“购买 iPad”，查询的功能完全相同，但会同时检查这两个词。如果没有标题/描述/链接/关键字无法在一个字段中找到它们的两个单词，那么它使用我上面显示的方法找到第一个单词的最高排名。

```
 Apple Store -> which contains the terms Buy and iPad in the title field 
```

如果没有找到匹配项，只需确定每个单词的排名并以此进行排名。

```
$query = " SELECT * FROM scan WHERE "; 

$terms = array_map('mysql_real_escape_string', $terms);
$i = 0; 
foreach ($terms as $each) {
      if ($i++ !== 0){
            $query .= " AND "; 
      }
      $query .= "Match(title, description, keywords, link) Against ('".implode(' ',$terms)." IN BOOLEAN MODE') ";
} 
```

# android - Android 更改字体 - getAssets() 错误

> ID：12679753
> 
> 赞同：1
> 
> 时间：2012-10-01T19:30:29.390
> 
> 标签：android

我的自定义字体有问题。我这样改变它：

```
@Override
protected void onFinishInflate() {
    super.onFinishInflate();

    mTimeDisplay = (TextView) findViewById(R.id.timeDisplay);
    Typeface typeface = Typeface.createFromAsset(getAssets(),
            "Fonts/Roboto-Light.ttf");
    mTimeDisplay.setTypeface(typeface);
    mAmPm = new AmPm(this);
    mCalendar = Calendar.getInstance();

    setDateFormat();
} 
```

但我有错误：`The method getAssets() is undefined for the type DigitalClock`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:34:23.557

由于您正在覆盖`onFinishInflate`，因此您似乎正在扩展`View`某种类型的 a 。

试试这个：

```
Typeface typeface = Typeface.createFromAsset(getContext().getAssets(),
        "Fonts/Roboto-Light.ttf"); 
```

...如果这不起作用：

```
Typeface typeface = Typeface.createFromAsset(mTimeDisplay.getContext().getAssets(),
        "Fonts/Roboto-Light.ttf"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:33:57.427

尝试使用 context.getAssets()

创建字段：上下文上下文；

```
public class DigitalClock extends LinearLayout {

Context context;

public DigitalClock(Context context, AttributeSet attrs, int defStyle) 
{

    super(context, attrs, defStyle);
    this.context = context;

} 
```

}

然后您将能够通过上下文访问 getAssets()

# css - 使用 Clojure Hiccup 呈现样式信息的惯用方式

> ID：12679754
> 
> 赞同：10
> 
> 时间：2012-10-01T19:30:32.140
> 
> 标签：css, clojure, hiccup

我需要在打嗝中构建样式信息，以便将元素放置在变量“top”和“left”指示的位置。我的代码如下所示：

> (html [:div {:style (str "top" top ";left" left)} "some text"])

这段代码非常难看。如果 hiccup 使用标准 CSS 样式规则自动呈现“样式”属性会更好......然后我可以编写以下内容：

> (html [:div {:style {:top top :left left}} "一些文字"])

是否已经有一个图书馆可以做到这一点？或者，我需要推出自己的解决方案吗？

感谢 Clojurians 的任何指点！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T04:36:26.517

你可以编写一个函数来做到这一点，它甚至会比地图少一点打字。例如：

```
(defn style [& info]
  {:style (.trim (apply str (map #(let [[kwd val] %]
                                   (str (name kwd) ":" val "; "))
                                (apply hash-map info))))}) 
```

这将允许你这样写......

```
(html [:div (style :top top :left left) "some text"]) 
```

函数的示例输出...

```
user=> (style :top 32 :left 14)
{:style "top: 32; left: 14;"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T02:46:12.217

那这个呢：

```
(defn style [s]
  (str/join ";" (map #(str (name %) ":" ((keyword %) s)) (keys s))))

(style {:padding     "20px"
        :background  "#e68a00"
        :color       "white"
        :font-size   "large"
        :font-weight "bold"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T17:55:26.497

对 Clojure 的了解不多，但是像 Enlive 这样的基于“转换”的方法听起来像是满足这些需求的解决方案 - [https://github.com/cgrand/enlive](https://github.com/cgrand/enlive)

# c# - 实体框架5多对多

> ID：12679765
> 
> 赞同：2
> 
> 时间：2012-10-01T19:31:12.200
> 
> 标签：c#, asp.net-mvc, database, entity-framework, orm

我有问题，因为当我将以下内容添加到班级时，`Course`我只有 2 个表而不是 3 个

```
public int PersonId { get; set; }
[ForeignKey("PersonId")]
public virtual Person Student { get; set; } 
```

你没有这三行都很好，但我需要一个额外的领域在课堂课程

```
public class Person
{
    public int PersonId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual ICollection<Course> CoursesAttending { get; set; }
}

public class Course
{
    public int CourseId { get; set; }
    public string Title { get; set; }
    public int PersonId { get; set; }

        [ForeignKey("PersonId")]
    public virtual Person Student { get; set; }

    public virtual ICollection<Person> Students { get; set; }
}

public class SchoolContext : DbContext
{
    public DbSet<Course> Courses { get; set; }
    public DbSet<Person> People { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer<SchoolContext>(
                new DropCreateDatabaseAlways<SchoolContext>());

        SchoolContext db = new SchoolContext();
        var cos = from d in db.Courses
                  select d;
    }
} 
```

请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:47:39.687

EF 无法决定是否`Course.Student`或`Course.Students`引用`Person.CoursesAttending`. 您必须给 EF 一个提示，例如通过使用`[InverseProperty]`on 属性`Course.Students`：

```
[InverseProperty("CoursesAttending")]
public virtual ICollection<Person> Students { get; set; } 
```

**编辑**

该模型会导致多个级联删除路径，即：当你删除连接表中的一条`Person`记录时，连接表中的记录也将被删除，但它也会删除`Course`该人通过`Course.Person`属性分配的所有s。删除`Course`的 s 将再次删除连接表中的记录，这是同一张表上的第二条删除路径。

SQL Server 不允许使用多个级联删除路径，因此您必须使用 Fluent API 禁用它：

```
public class MyContext : DbContext
{
    //...

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Course>()
            .HasRequired(c => c.Student)
            .WithMany()
            .HasForeignKey(c => c.PersonId)
            .WillCascadeOnDelete(false);
    }
} 
```

# c++ - 类似排序的 STL 函数

> ID：12679770
> 
> 赞同：2
> 
> 时间：2012-10-01T19:31:34.213
> 
> 标签：c++, stl

有没有这样的功能`std::sort`，而不是按升序排序，按降序排序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T19:33:07.867

是的。它被称为[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)。

`sort`有一个重载，它接受一个将排序顺序定义为第三个参数的函子。如果你想要降序，然后传递它[`std::greater<T>()`](http://en.cppreference.com/w/cpp/utility/functional/greater)，`T`你的类型在哪里。

# drupal - 在 Azure 上安装第三方 Drupal 模块

> ID：12679771
> 
> 赞同：0
> 
> 时间：2012-10-01T19:31:36.300
> 
> 标签：drupal, azure

我刚刚开始使用 Azure 中的新“网站”功能，它允许您只需一步即可创建网站 - 还允许您从“图库”（包括 Drupal）创建网站。我可以让我的 Drupal 站点启动并运行，没问题。但是，如果我尝试添加第三方模块（例如 Mindtree 的[ODataDrupal](https://github.com/mindtree/ODataDrupal)），则会收到以下错误消息：

> 安装失败！有关详细信息，请参阅下面的日志。
> 
> odata_support
> 
> 安装/更新错误
> 
> 文件传输失败，原因：无法 chmod /DWASFiles/Sites/theparentsunion/VirtualDirectory0/site/wwwroot/sites/all/modules/odata_support。

如果我尝试更新一些现有模块（Drupal 警告，用大红色闪烁的字母，已经过时），或多或少会发生同样的事情，除非我的 Drupal 安装瘫痪，无法修复我已经找到了。

这是设计的，还是测试版网站集成的一些限制？（因为如果您不能向其中添加新模块或更新现有模块，则 Drupal 安装有点毫无价值。）还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:40:15.143

如果您尝试对基于 Drupal 的 Windows Azure 网站使用插件和第 3 方模块，结果可能因人而异。这主要是因为 Windows Azure 网站模型可能支持也可能不支持特定模块或插件所需的配置类型，并且并非所有类型的自定义配置都适用于 Windows Azure 网站，您需要迁移到 Windows Azure 虚拟机。

关于应用程序特定的结构，您可以做的是打开网站 FTP 文件夹，并且您可以看到任何用户可配置的内容，因此您可以按照您想要的方式进行配置。但是，如果您的应用程序将尝试在其有限范围之外进行更改，您将遇到上述错误。

[这](http://blogs.msdn.com/b/brian_swan/archive/2012/03/19/azure-real-world-migrating-drupal-from-lamp-to-windows-azure.aspx)是一个案例研究，其中 Azure VM 用于基于 Drupal 的迁移，它表明对于复杂的应用程序，您可能需要使用 AZure VM 而不是 Azure 网站。

# firebreath - FireBreath：我应该在哪里修改 config.h 中的全局变量

> ID：12679772
> 
> 赞同：2
> 
> 时间：2012-10-01T19:31:38.030
> 
> 标签：firebreath

我想知道变量在哪里

```
firebreath\build\{ProjectDir}\gen\global\config.h 
```

最好修改一下。例如，我想增加

```
#define FBSTRING_PLUGIN_VERSION "1.0.0.0" 
```

但是当我直接在文件中这样做时，下次我修改它会被覆盖

```
my_WiXInstall/Sources/myInstaller.wxs (in VC++ 2010) 
```

并构建 WiX 项目，因为所有模板文件都将再次重新构建（包括 config.h）。

这是如何正确完成的？我使用了错误的 config.h 还是修改了提到的 wxs 文件是错误的。当然，我可以修改“生成的”wxs 文件，但这意味着要自己跟踪其中的版本号。这也感觉不对。

我很困惑。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:43:11.093

我自己找到了答案： 变量/makros 应该在

```
\firebreath\projects\{ProjectDir}\PluginConfig.cmake 
```

然后它们将通过模板分发到项目的所有相关文件中。

# javascript - 如何用id替换jquery attr rel

> ID：12679775
> 
> 赞同：0
> 
> 时间：2012-10-01T19:31:52.563
> 
> 标签：javascript, jquery, css, w3c

我想让我的网页成为 w3c 有效的。所以我逐步纠正错误以使其有效，我使用了 html5 doctype，我发现了一个错误

第 348 行，第 81 列：在 HTML5 + RDFa 1.1 Lite 文档中的 li 元素上不允许使用 RDFa 核心属性 rel。考虑改为检查 HTML5 + RDFa 1.1 模式。

所以我尝试替换 id 而不是 rel ， w3c 有效但代码不起作用。如何在不使用 rel 的情况下使用以下代码？

```
<script type="text/javascript">
$(document).ready(function() {
$(".tab_content").hide();
$(".tab_content:first").show(); 
$("ul.tabs li").click(function() {
    $("ul.tabs li").removeClass("active");
    $(this).addClass("active");
    $(".tab_content").hide();
    var activeTab = $(this).attr("rel"); 
    $("#"+activeTab).fadeIn(); 
});
});
</script> 
<ul class="tabs">
<li class="active" rel="tab2">&nbsp;&nbsp;Reviews&nbsp;&nbsp;</li><li rel="tab3">News</li><li rel="tab4">&nbsp;&nbsp;Articles&nbsp;</li></ul>

<div id="tab1" class="tab_content" style="width:326px;">data</div>
<div id="tab2" class="tab_content" style="width:326px;">data tab2</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:35:41.667

手动（不使用 Javascript）浏览 HTML，找到每个`<li>`元素，然后替换`rel`为`id`. 确保 id 在页面上是唯一的。因此，您必须将它们更改为`liTab2`,`liTab3`等。

然后，在您的 jQuery 中，替换`$(this).attr("rel");`为`this.id.replace("li", "").toLowerCase();`.

不完全确定您还在寻找什么答案......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:36:52.650

对于与选项卡关联的所有`li`元素，请更改：

```
<li class="active" rel="tab2">&nbsp;&nbsp;Reviews&nbsp;&nbsp;</li> 
```

至：

```
<li class="active" data-target="tab2">&nbsp;&nbsp;Reviews&nbsp;&nbsp;</li> 
```

并改变

```
var activeTab = $(this).attr("rel"); 
```

至：

```
var activeTab = $(this).data("target"); 
```

请注意，这使用 jQuery 默认行为将 HTML5 data-* 属性拉入对象的数据集中。

# c++ - 计算整数十进制表示中不同数字的数量

> ID：12679777
> 
> 赞同：3
> 
> 时间：2012-10-01T19:32:01.500
> 
> 标签：c++

我是 C++ 开发的新手，我希望有人可以帮助我完成我一直在尝试做的事情。

比如说我想要一个函数，给定一个整数输入，返回它包含的不同数字的数量。

例如，如果我有三个整数：

```
int a = 19876;
int b = 25644;
int c = 4444; 
```

如果我将“a”传递给函数，我希望返回数字 5。如果将“b”传递给函数，我希望返回“4”，如果将“c”传递给函数，则将返回 1，因为它们是不同数字的数量。

有人可以说明我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:38:28.047

你的意思是你想找到整数中不同十进制数字的数量？

```
int distinct_digits(int value) {
    std::ostringstream out;
    out << value;
    std::string digits = out.str();
    std::sort(digits.begin(), digits.end());
    return std::unique(digits.begin(), digits.end()) - digits.begin();
} 
```

（未编译或测试，但基本思想应该有效）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T19:38:32.150

使用 mod 运算符，您可以计算它：

```
int distinct(int a)
{
    int ele[10]={0};

    if(a==0) return 1;
    if(a<0) a=a*-1;

    while(a)
    {
        int t=a%10;
        ele[t]=1;
        a=a/10;
    }

    for (i=0;i<10;i++)
        if (ele[i])
            count++;

    return count;
} 
```

这仅适用于正数和负数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T19:41:27.560

这可能更简洁，但我正在帮助您了解解决方案的工作方式。

```
int digitCount(int number) {
    // make an array to store whether you've seen a given digit
    // note that there are 10 elements, one for each digit
    // this will be conveniently indexed 0-9
    bool digitSeen[10];

    // set each seen digit
    int count = 0;
    while (number != 0) {
        // get the rightmost digit with the modulo operator (%)
        int digit = number % 10;
        if (digitSeen[digit] == false) {
            // only count if this is the first time we have seen it
            ++count;
            digitSeen[digit] = true;
        }
        // pop off the right-most digit by dividing by 10
        number /= 10;
    }

    return count;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T19:35:05.533

您可以很好地计算不同的数字，但是没有办法从`'a'`到`the value of the variable a;`。您可以对其进行硬编码 - 但这是相当繁重的维护工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-01T19:35:45.273

如果您的意思是返回一个浮点以获得小数，只需将其作为浮点数返回，编译器应该进行隐式类型转换。这通常不是好的代码，但它可以工作。更好的方法可能是将值交给临时浮动，例如

```
float a_float = a;
return a_float; 
```

# sql - SQL 内连接与表别名' - 我可以优化这个查询吗？

> ID：12679780
> 
> 赞同：2
> 
> 时间：2012-10-01T19:32:10.030
> 
> 标签：sql, query-optimization, inner-join

我正在查看 SSMS 工具执行计划分析器，它说尝试将其分解成更小的块。以下查询是我可以做“这个”的最佳方式吗？任何帮助深表感谢！

```
SELECT t1.ID,
t1.col2,
t1.col3,
t1.col4,
t2.ID AS table2ID,
t2.col2,
t1.col5,
t1.col6,
t2.StatusID as table2StatusID
CASE WHEN LEN(t2.ErrorMessage) > 0 THEN t3.StatusName + ' ' + t2.ErrorMessage 
             ELSE t3.StatusName
     END AS SomeStatus,
     t3.StatusTypeID AS StatusTypeID
FROM table1 t1
INNER JOIN table2 t2 ON t1.ID = t2.ID
INNER JOIN table3 t3 ON t2.StatusID = t3.StatusID` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:44:14.413

查询似乎很简单。我的一个建议是，如果您可以将 t2.ErrorMessage 更改为 null（如果它不存在），那么您可以使用 IsNull 与 CASE 更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:48:09.293

您可以使用 ISNULL() 替换您的案例，这可能会降低每行处理成本。

```
t3.StatusName + ISNULL(' ' + t2.ErrorMessage, '') as SomeStatus 
```

在不了解您的架构设置的情况下，很难判断可以在哪里进行优化。可能是直观的优化可能会违背业务逻辑并且毫无用处。另一种选择是正确的，在不了解业务逻辑的情况下获取不明显的数据可能会有一些捷径。

# html - 链接不起作用 - Dreamweaver CS4

> ID：12679783
> 
> 赞同：-2
> 
> 时间：2012-10-01T19:32:17.173
> 
> 标签：html, css, dreamweaver, cs4, rollovers

大家好 - 我不知道为什么我的翻转链接现在不起作用。我认为这可能与 z-index 和 div 被隐藏有关。

面包屑例如：

```
<div id="breadcrumbs">
    <a href="#">Home &gt;&gt;</a> 
    <a href="#">Section Title &gt;&gt</a> 
    <a href="#">Parent Menu Item &gt;&gt;</a> 
    <a href="#">Sub-Item 1</a>
</div> 
```

最后两个工作出于某种原因。您可以查看页面并从此处查看源代码：

[http://cpkdesign.com/uiaustin](http://cpkdesign.com/uiaustin)

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:49:47.500

对于`div`带有`right`id的，如果你可以给它下面的css：

```
#right {
    margin-left: 0px;
    margin-top: 0;
    padding-left: 0px;
    width: 745px;
    float: left;
} 
```

那应该有希望解决您的问题。

更多信息：

您遇到此问题的原因是`right`div 与您的链接重叠。一般规则是，如果您要开始浮动元素，那么请注意非浮动元素...... div 是浮动 div 海洋中的非浮动元素。

# c# - 多层命名

> ID：12679787
> 
> 赞同：3
> 
> 时间：2012-10-01T19:32:23.980
> 
> 标签：c#, naming, multi-tier

我想创建一个具有 3 层（或层？有什么区别？）的多层项目

现在，我应该如何命名每一层（层）？

我在维基百科上看到了这样的描述：

![维基百科三层架构](../Images/543c1cbf786e3e55dd86e92f4a10d082.png)

但我不能简单地将我的层命名为“表示层”、“逻辑层”和“数据层”，可以吗？

这在命名空间中并不合适。

对命名有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:42:38.930

你可以这样命名你的命名空间：

> MeOrMyCompany.TheApplication.Data
> MeOrMyCompany.TheApplication.Logic
> MeOrMyCompany.TheApplication.Presentation

有时需要添加子命名空间，例如

> MeOrMyCompany.TheApplication.Presentation.Main
> MeOrMyCompany.TheApplication.Presentation.Dialogs
> MeOrMyCompany.TheApplication.Presentation.Controls
> ...

由你决定。

请注意，当您在项目中创建文件夹时，文件夹名称将自动附加到命名空间。因此，如果您有一个名为“MeOrMyCompany.TheApplication”的项目，您可以添加名为“Data”、“Logic”和“Presentation”的文件夹。在“Presentation”中添加名为“Main”、“Dialogs”、“Controls”或任何适合您的子文件夹。

您还可以为三层创建单独的项目。

例子：

![在此处输入图像描述](../Images/590a835c05199f797dbc2f50438d1209.png)

这里 SVG 文件夹中的一个类将自动具有命名空间

> CySoft.SLVision.Diagrams.Shapes.Svg

```
namespace CySoft.SLVision.Diagrams.Shapes.Svg
{
    public class SvgLine : LineShape
    {
        private SvgShapeFactory _context;
        ...
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:43:12.407

在单一应用程序解决方案中，我通常会执行以下操作：

```
<Company name>.<Application name>.<Tier name> 
```

如果包含空格或太长，您也可以使用首字母缩写词代替名称。

我为每个项目/程序集使用这个命名约定。

我通常存在的层/层是

`DAL`- 我的数据访问层（例如 EF）

`Business`- 我的业务逻辑和实体

`Facade`- 我的表示层，我在其中定义应用程序逻辑

`UI`- 实际的用户界面

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T19:45:57.860

层和层有时可以互换使用，但有细微的区别。层是物理层，层是逻辑层。更多：[“层”和“层”有什么区别？](https://stackoverflow.com/questions/120438/whats-the-difference-between-layers-and-tiers)

至于命名，这取决于您正在从事的项目类型以及您要使用的架构类型。

例如，我有一个名为 Amber 的 Web 项目。它有这些项目：

*   Amber.Logic（在这种情况下，逻辑和数据被合并到一个项目/层中）
*   Amber.Tests（测试）
*   Amber.Web（演示文稿）

# python - 通过python为Skype录音

> ID：12679799
> 
> 赞同：1
> 
> 时间：2012-10-01T19:33:00.357
> 
> 标签：python, skype

我还没有尝试过任何东西，但我正在寻找一些指针来告诉我正确的方向。我想在 python 中编写一个脚本来记录来自 Skype 的对话。如何编写一个程序来记录通过 Skype 进行对话时的对话？我的平台是windows。

我想做的事：

1.  Skype 对话开始后立即激活 python 脚本（循环）进行录制。
2.  记录对话。
3.  退出循环。
4.  等待下一次对话。

更新：我查看了 Pyaudio，我现在可以做录音部分了。但是，我仍然对如何让我的程序知道语音会话在 Skype 中被激活和关闭感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:40:45.287

你看到了吗？ [面向开发人员的 Skype](https://dev.skype.com/)

# python - Popen stdout 读取管道，使用 sleep 死锁

> ID：12679800
> 
> 赞同：3
> 
> 时间：2012-10-01T19:32:59.987
> 
> 标签：python, deadlock, popen

好吧，我有两个脚本。打印 b.py 脚本输出的 a.py 如下：

```
#a.py
from subprocess import Popen, PIPE, STDOUT

p = Popen(['/Users/damian/Desktop/b.py'], shell=False, stdout=PIPE, stderr=STDOUT)

while p.poll() is None:
    print p.stdout.readline()

#b.py
#!/usr/bin/env python
import time

while 1:
    print 'some output'
    #time.sleep(1) 
```

这行得通。但是，当我取消注释 time.sleep() 行时，为什么我的脚本会死锁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:37:45.050

您的输出可能已缓冲。为标准输出添加[.flush()](http://docs.python.org/library/stdtypes.html#file.flush)以清除它：

```
import sys
import time

while 1:
    print 'someoutput'
    sys.stdout.flush()
    time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:38:56.350

如果您添加`-u`到调用`a.py`（使输出无缓冲），那么您不需要修改`b.py`脚本：

```
import sys
from subprocess import Popen, PIPE, STDOUT

p = Popen([sys.executable, '-u', '/Users/damian/Desktop/b.py'],
          stdout=PIPE, stderr=STDOUT, close_fds=True)
for line in iter(p.stdout.readline, ''):
    print line,
p.stdout.close()
if p.wait() != 0:
   raise RuntimeError("%r failed, exit status: %d" % (cmd, p.returncode)) 
```

查看[更多从子流程获取输出的方法](https://stackoverflow.com/a/12606327/4279)。

# git - Gitolite 仅在注册了 SSH 的中央服务器上提示输入密码

> ID：12679802
> 
> 赞同：1
> 
> 时间：2012-10-01T19:33:02.607
> 
> 标签：git, repository, gitolite, gitlab

我正在运行 gitlab，它在中央存储库 Ubuntu 机器上使用 gitolite，并且有几个用户在通过 Gitlab 的 Web 界面添加他们的公共 SSH 密钥后连接到这台机器。他们自己机器上的不同用户可以成功地从中央存储库机器上推送和拉取。在机器本身上，我不能让我的用户推送或拉到中央存储库。它总是要求输入 git 的密码！我怎样才能解决这个问题？

在注册了 SSH 密钥的远程机器上，我得到：

```
myusername@ubuntu:~$ ssh -T git@111.222.333.444
hello my_username_gmail_com_1348772800, this is gitolite v2.2-11-g8c4d1aa-dt running on git 1.7.0.4
the gitolite config gives you the following access:
     R   W  repo1
     R   W  repo2
    @R_ @W_ testing
     R   W  repo3 
```

它仅在服务器本身上失败，其中（即使我注册了 SSH 密钥）我总是被提示输入密码：

```
serverusername@server:~$ ssh -T git@111.222.333.444
git@111.222.333.444's password: 
```

这是 ssh -Tvvv 调试打印的输出：http: [//pastebin.com/zrNzvzRE](http://pastebin.com/zrNzvzRE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:50:39.227

我感谢 VonC 尝试帮助我。然而，修复只是重新启动机器并添加几个新的重新生成的密钥。我很肯定我在前几次正确地复制了它们，但最终重新创建了几次密钥。因为它起作用了，所以我称之为完成。我知道这不是一个非常令人满意的答案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:55:22.943

检查`ssh -Tvvv git@111.222.333.444`返回的内容，并结合`sshd -d`（您的 ssh 守护程序的调试会话）

你应该看到它在你`git.pub`的. 这些公钥和私钥也可以以其默认名称 (和) 存储在您的服务器 ( ) 上。`git``~git/.ssh`
`id_rsa``id_rsa.pub``~git/.ssh`

# c# - 从 DataTable 继承的问题

> ID：12679803
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:33:02.807
> 
> 标签：c#, ado.net, datatable

```
public class MyDataTable : DataTable
{
    public string MyProperty { get; set; }
    public DataTable MyData { get; set; }

    public void MyMethod()
    {
        //...do some processing on itself
        MyData = this;
    }
} 
```

我创建了这个继承 DataTable 的 MyDataTable 类。

```
public class MyClass
{
    public void ProcessData()
    {
        MyDataTable table = new MyDataTable();
        table.MyMethod();

        AcceptDataTable(table); //it won't accept the table parameter.
        AcceptDataTable(table.MyData); //it still won't accept the table parameter.
        AcceptDataTable((DataTable)table); //it still won't accept the table parameter.
    }

    public void AcceptDataTable(DataTable table)
    {
        Service1.SubmitData(table); //actually this is where it fails. It is a WCF Service's method that takes a DataTable as parameter. It works fine if I pass a DataTable, but not MyDataTable
    //There was an error while trying to serialize parameter http://tempuri.org/:dt. The InnerException message was 'Type 'SubmitData' with data contract name MyDataTable
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T19:39:41.480

为什么要扩展 DataTable？如果您正在寻找添加方法，您应该查看[Extension Methods](http://www.dotnetperls.com/extension)。我很确定[DataTable 类没有任何可以覆盖的虚拟方法或属性，并且成员隐藏在](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)[polymorphism](http://msdn.microsoft.com/en-us/library/ms173152(v=vs.80).aspx)中不起作用。 [查看这篇文章](https://stackoverflow.com/questions/12162235/extend-datatable-in-c-sharp)，了解另一个试图扩展 DataTable 的人的观点。

编辑：

如果您还尝试通过 WCF 传递您的对象，则必须将其标记为[Serializable](http://msdn.microsoft.com/en-us/magazine/cc163569.aspx)，但这会导致一些其他时髦的问题，并且如果基类具有某种特殊的序列化，则可能会被拒绝。在这种情况下，将派生类标记为 [Serializable] 也会引发错误。

我会根据您的描述认真考虑[工厂模式。](http://www.dotnetperls.com/factory)这样你就有了你的工厂类，它每次都按照你的需要构建你的表，但它仍然是一个 DataTable。

如果数据表中有任何对象（不是原始对象），则必须将 WCF 服务标记为具有“KnownTypes(typeof(MyType))”，以便它知道在序列化数据表中存在序列化的内容。

最后一次抽签，您应该避免在 WCF 中使用数据表和数据集...

[从 Web 服务返回数据集是撒旦的产物，代表了世界上真正邪恶的一切](http://www.hanselman.com/blog/ReturningDataSetsFromWebServicesIsTheSpawnOfSatanAndRepresentsAllThatIsTrulyEvilInTheWorld.aspx)

[使用数据集的 WCF 性能 - 第 2 部分](http://blogs.microsoft.co.il/blogs/oshvartz/archive/2011/07/23/wcf-performance-using-datasets-part-2.aspx)

# javascript - MyEclipse 在 JSP 中禁用 javascript 验证

> ID：12679809
> 
> 赞同：1
> 
> 时间：2012-10-01T19:33:33.290
> 
> 标签：javascript, validation, jsp, myeclipse

有没有办法可以在 myeclipse 中禁用 jsp 中的 js 验证。我有一个jsp页面，它在按钮的onclick中有java脚本代码，如下所示，jsp显示语法错误，说应该在**javascript**之后`;`打开，所以我想禁用jsp中的js检查。我知道要在 js 文件中禁用 js 验证，但不能从 jsp 文件中禁用。`:`

 **`<button onclick="javascript:var .....some js code">Button</button>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:54:51.763

转到 MyEclipse->Preferences->MyEclipse->Validation，您可以在其中删除 JSP 验证器。您还可以在 MyEclipse->Preferences->Validation->JSP 自定义 JSP 验证器。此外，您可以通过右键单击项目并选择 MyEclipse->Manage Validation，然后排除文件夹和/或文件来从验证中排除某些资源。

我希望这有帮助。**

# matlab - MATLAB - 产生一个扫过的非余弦波？

> ID：12679810
> 
> 赞同：1
> 
> 时间：2012-10-01T19:33:39.763
> 
> 标签：matlab

我正在尝试产生扫过的方波或三角波。该[`chirp`](http://www.mathworks.com/help/signal/ref/chirp.html)函数产生一个扫过的余弦波；有没有办法用方波或锯齿波来做到这一点？我现在的方法，至少对于像方波这样的东西，是

```
V = A*chirp(t,f0,t1,f1, 'linear', -90); %#change the cosine wave to a sine wave
V(V<0) = -A;
V(V>0) = A; 
```

我可以用三角波做同样的事情，但有点烦人。

一般来说，有没有更直接的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:49:07.843

扫频与评估函数相同

```
function(2 * pi * integral(f(t) dt)) 
```

其中`f(t)`，时变频率与时间成线性关系。

只需将直线方程写成两点形式：

```
f(t) = f0 + (t - t0) * (f1 - f0) / (t1 - t0) 
```

并整合：

```
function(phase0 + 2*pi*f0*t + pi * (t - t0)**2 * (f1 - f0) / (t1 - t0)) 
```

最简单的形式是 when `t0 = f0 = phase0 = 0`，然后你得到：

```
function(k * t**2) 
```

# javascript - 如何在 JavaScript 中更改按钮文本或链接文本？

> ID：12679813
> 
> 赞同：43
> 
> 时间：2012-10-01T19:33:58.753
> 
> 标签：javascript, html, button

我有这个 HTML 按钮：

```
<button id="myButton" onClick="lock(); toggleText(this.id);">Lock</button> 
```

这是我的`toggleText`JavaScript 函数：

```
function toggleText(button_id) 
{
   if (document.getElementById('button_id').text == "Lock") 
   {
       document.getElementById('button_id').text = "Unlock";
   }
   else 
   {
     document.getElementById('button_id').text = "Lock";
   }
} 
```

据我所知，按钮文本 ( `<button id="myButton">Lock</button>`) 就像任何链接文本
( `<a href="#">Lock</a>`)。因此，它是一个按钮这一事实并不重要。但是，我无法访问按钮文本并对其进行更改。

我试过`('button_id')`, `(button_id)`, `== "Lock"`, `== 'Lock'`, 但没有任何效果。

**如何访问和更改按钮文本（不是值）或链接文本？**

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-01T19:36:23.480

更改`.text`为`.textContent`获取/设置文本内容。

或者由于您正在处理单个文本节点，`.firstChild.data`请以相同的方式使用。

另外，让我们合理地使用变量，通过缓存`getElementById`.

```
function toggleText(button_id) 
{
   var el = document.getElementById(button_id);
   if (el.firstChild.data == "Lock") 
   {
       el.firstChild.data = "Unlock";
   }
   else 
   {
     el.firstChild.data = "Lock";
   }
} 
```

或者像这样更紧凑：

```
function toggleText(button_id)  {
   var text = document.getElementById(button_id).firstChild;
   text.data = text.data == "Lock" ? "Unlock" : "Lock";
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-01T19:35:28.140

```
document.getElementById(button_id).innerHTML = 'Lock'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T19:40:39.187

您可以简单地使用：

`document.getElementById(button_id).innerText = 'Your text here';`

如果要使用 HTML 格式，请改用该`innerHTML`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:37:26.253

删除报价。并使用 innerText 而不是 text

```
function toggleText(button_id) 
{                      //-----\/ 'button_id' - > button_id
   if (document.getElementById(button_id).innerText == "Lock") 
   {
       document.getElementById(button_id).innerText = "Unlock";
   }
   else 
   {
     document.getElementById(button_id).innerText = "Lock";
   }
} 
```

# html - IE 8 HTML 打印页面问题

> ID：12679816
> 
> 赞同：0
> 
> 时间：2012-10-01T19:34:03.293
> 
> 标签：html, css, internet-explorer, internet-explorer-8, print-preview

在 IE 8 中的打印预览有些问题（请注意我使用的是原始 IE 8 而不是 IE 9 并更改为 8）。

问题是当用户想要“打印预览”页面时，预览布局与您在网站本身上看到的有很大不同。

这是上述问题的打印预览的屏幕截图：

![在此处输入图像描述](../Images/6d618b03ba7067ac8ff576b7d9c6e69a.png)

这应该是这样的：

![在此处输入图像描述](../Images/99adef6c2c8e0adbf712e2743525ceee.png)

我已经检查了 Google，但看不到任何可用于此问题的推荐修复程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:29:16.550

对不起，伙计们 - 已经解决了这个问题 - 是关于文档类型的。

在页面加载时，该站点将在 IE 8 中呈现，符合 IE 7 标准 *Facepalm...

# ios - 手动旋转 UIViews 而不是自动旋转

> ID：12679818
> 
> 赞同：0
> 
> 时间：2012-10-01T19:34:17.770
> 
> 标签：ios, uiview, rotation

在 iOS 中，手动旋转视图的正确方法是什么？我有很多自定义旋转动画，我根本不希望我的视图自动旋转。

现在，我正在做这个...

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return interfaceOrientation == UIDeviceOrientationPortrait;
} 
```

然后，我正在这样做并根据需要响应方向变化：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

一切正常，除了...当我尝试展示操作表、MailViewController 等时，它们都以纵向显示:(

我怎样才能让我的视图知道，虽然我不希望它自动旋转，但它实际上是在响应我手动处理的方向通知？

编辑：澄清一下，并不是我的旋转不起作用，而是当我呈现 UIActionSheet 时，它假定我必须是纵向的（即使我已经手动旋转而不是），并且它显示不正确.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:38:50.550

`[[UIApplication sharedApplication] setStatusBarOrientation:(UIInterfaceOrientation)];`手动旋转视图时尝试使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:47:33.913

也许你可以从 shouldAutorotateToInterfaceOrientation 中调用一个方法。例如：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation != UIDeviceOrientationPortrait)
        [self theActionYouWantToPerform]

    // Return YES for supported orientations
    return interfaceOrientation == UIDeviceOrientationPortrait;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T12:44:28.763

Anton K 报道的线路

```
[[UIApplication sharedApplication] setStatusBarOrientation:(UIInterfaceOrientation)]; 
```

工作我很好！当我想使用 CGAFFineTransformMakeRotation 方法手动旋转 UIViewController 的 UIView 来旋转视图 PI/2 弧度时，它只是让我休息的元素吗？

这一行，将状态栏的 ORIENTATION 设置为您想要的*(UIInterfaceOrientation)*，以便“手动”旋转到我想要的*(UIInterfaceOrientation)的 UIView 的完美外观。*

因此，这一行也使***UIMessageView***的进一步呈现，出现在您指定的*(UIInterfaceOrientation)*中。

# c - atoi() 是 C 标准的一部分吗？

> ID：12679821
> 
> 赞同：0
> 
> 时间：2012-10-01T19:34:36.710
> 
> 标签：c, type-conversion, atoi

是`atoi()`C标准的一部分吗？

如果没有标准化，我应该使用什么来转换`char*`？`int``atoi()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T19:39:40.170

是的，`atoi()`是标准 C 的一部分——不幸的是。

我说“不幸的是”，因为它没有错误检查；如果它返回 0，您无法判断是因为您传递了它`"0"`还是因为您传递了它`"hello, world\n"`（它~~可能~~具有未定义的行为，但通常返回 0）。

该`strtol()`函数使用起来更复杂，但它会进行适当的错误检查。它返回一个`long`结果，然后您可以将其转换为`int`- 理想情况下，在检查它是否`INT_MIN`在`INT_MAX`.

参考：[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf) 7.22.1.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:37:16.473

它是[C 标准库](http://en.wikipedia.org/wiki/C_standard_library)的一部分，应该在`stdlib.h`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:37:19.513

是的，这是标准的。来自`man atoi`：

> NAME atoi, atoi_l -- 将 ASCII 字符串转换为整数
> 
> LIBRARY 标准 C 库 (libc, -lc)

`#include <stdlib.h>`

但是，它也说：

> atoi() 函数已被 strtol() 弃用，不应在新代码中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T19:38:44.987

`atoi`是当前 C 标准的一部分，但考虑`strtol`哪个也是标准的一部分并且具有更健壮的接口。

# mysql - 如何在 aTable 中确定一个人的年龄

> ID：12679822
> 
> 赞同：0
> 
> 时间：2012-10-01T19:34:41.383
> 
> 标签：mysql

我正在尝试确定我的数据库中列出的人员的年龄。这是我想出的，但我似乎无法将查询限制为仅显示 18 岁及以下的人。

```
SELECT 
  * 
FROM 
  patientdetails 
WHERE 
  ageInYears IN (
    SELECT 
      DATEDIFF(CURRENT_DATE, STR_TO_DATE(p.DOB, '%d-%m-%Y'))/365 AS ageInYears 
    FROM 
      patientdetails p
  ) < 19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:38:10.653

我相信这样的事情应该有效：

```
SELECT * 
FROM patientdetails 
WHERE DATEDIFF(CURRENT_DATE, STR_TO_DATE(p.DOB, '%d-%m-%Y'))/365 < 19 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:38:03.620

您不需要子查询：

```
SELECT *
FROM PatientDetails pd
WHERE DATEDIFF(CURRENT_DATE, STR_TO_DATE(p.DOB, '%d-%m-%Y'))/365 <19 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T02:53:31.613

这类作品：

```
SELECT *
FROM PatientDetails pd
WHERE DATEDIFF(CURRENT_DATE, STR_TO_DATE(pd.DOB, '%d-%m-%Y')) / 365 < 19 
```

将天数除以 365 将无法适应闰年，这意味着您将保证休假 4 天。您可以除以 365.25，然后减去 0.75。我*认为*这说明了一切，但我有点从臀部射击。我不确定这个计算是否会出现整数错误。我不确定 MySQL 如何处理隐式类型转换。

我会更倾向于这样做。从逻辑上讲，它是“所有未来 19 岁生日的患者”：

```
SELECT *
FROM PatientDetails pd
WHERE DATE_ADD( STR_TO_DATE(pd.DOB, '%d-%m-%Y'), INTERVAL 19 YEAR ) > CURDATE() 
```

然而，这个确切的问题在[日期计算的 MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/date-calculations.html)中得到了解决和解释，但对我来说似乎有点倒退：

```
SELECT name, birth, CURDATE(),
(YEAR(CURDATE())-YEAR(birth))
- (RIGHT(CURDATE(),5)<RIGHT(birth,5))
AS age
FROM pet 
```

# php - 如何通过 PHP 中的邮件功能发送 html 设计的邮件

> ID：12679827
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:35:11.463
> 
> 标签：php

从早上开始我一直在尝试，但最后我必须把它放在 stackoverflow 上。我一直在尝试通过 php 发送 HTML 邮件，当我看到我的邮件时，我得到的 HTML 代码完全不是设计精美的邮件

```
 <?php
$email = $_POST["email"];
$to = $email;
$from = "arshkapoor2015@gmail.com";
$subject = "Your thebigmall coupon code";
$headers = "From:" . $from;
ob_start();
?>

<html>
    <head>
        <title></title>
    </head>
    <body>
        <p>
            &nbsp;</p>
        <div style="font-size: small; width: 797.4166870117188px; background-color: rgb(236, 236, 236); margin: 0px; padding: 0px; font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif; ">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tbody>
                    <tr style="border-collapse: collapse; ">
                        <td align="center" bgcolor="#ececec" style="border-collapse: collapse; ">
                            <table border="0" cellpadding="0" cellspacing="0" style="margin: 0px 10px; " width="640">
                                <tbody>
                                    <tr style="border-collapse: collapse; ">
                                        <td height="20" style="border-collapse: collapse; " width="640">
                                            &nbsp;</td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td style="border-collapse: collapse; " width="640">
                                            <table bgcolor="#00707b" border="0" cellpadding="0" cellspacing="0" style="border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(4, 57, 72); color: rgb(231, 203, 163); " width="640">
                                                <tbody>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="15">
                                                            &nbsp;</td>
                                                        <td align="left" style="border-collapse: collapse; " valign="middle" width="350">
                                                            <table border="0" cellpadding="0" cellspacing="0" width="350">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="8" style="border-collapse: collapse; " width="350">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div style="font-size: 12px; ">
                                                                <a href="http://www.thebigmall.co.in" style="font-weight: bold; color: rgb(231, 203, 163); text-decoration: none; " target="_blank">Web Version</a></div>
                                                            <table border="0" cellpadding="0" cellspacing="0" width="350">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="8" style="border-collapse: collapse; " width="350">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td align="right" style="border-collapse: collapse; " valign="middle" width="255">
                                                            <table border="0" cellpadding="0" cellspacing="0" width="255">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="8" style="border-collapse: collapse; " width="255">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <table border="0" cellpadding="0" cellspacing="0">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td style="border-collapse: collapse; " valign="middle">
                                                                            <a href="http://preview.createsend3.com/t/j-fb-wukdik-l-t/" rel="cs_facebox" style="font-weight: bold; color: rgb(231, 203, 163); text-decoration: none; " target="_blank"><img alt="Facebook icon" border="0" height="14" src="https://img.createsend1.com/img/templatebuilder/like-glyph.png" style="min-height: auto; line-height: 13px; outline-style: none; display: block; " width="8" /></a></td>
                                                                        <td style="border-collapse: collapse; " width="3">
                                                                            &nbsp;</td>
                                                                        <td style="border-collapse: collapse; " valign="middle">
                                                                            <div style="font-size: 12px; ">
                                                                                <a href="http://preview.createsend3.com/t/j-fb-wukdik-l-i/" rel="cs_facebox" style="font-weight: bold; color: rgb(231, 203, 163); text-decoration: none; " target="_blank">Like</a></div>
                                                                        </td>
                                                                        <td style="border-collapse: collapse; " width="10">
                                                                            &nbsp;</td>
                                                                        <td style="border-collapse: collapse; " valign="middle">
                                                                            <a href="http://client.forwardtomyfriend.com/j-l-2AD73FFF-wukdik-l-d" lang="en" style="font-weight: bold; color: rgb(231, 203, 163); text-decoration: none; " target="_blank"><img alt="Forward icon" border="0" height="14" src="https://img.createsend1.com/img/templatebuilder/forward-glyph.png" style="min-height: auto; line-height: 13px; outline-style: none; display: block; " width="19" /></a></td>
                                                                        <td style="border-collapse: collapse; " width="3">
                                                                            &nbsp;</td>
                                                                        <td style="border-collapse: collapse; " valign="middle">
                                                                            <div style="font-size: 12px; ">
                                                                                <a href="http://client.forwardtomyfriend.com/j-l-2AD73FFF-wukdik-l-h" lang="en" style="font-weight: bold; color: rgb(231, 203, 163); text-decoration: none; " target="_blank">Forward</a></div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <table border="0" cellpadding="0" cellspacing="0" width="255">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="8" style="border-collapse: collapse; " width="255">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td style="border-collapse: collapse; " width="15">
                                                            &nbsp;</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td align="center" bgcolor="#00707b" style="border-collapse: collapse; " width="640">
                                            <table border="0" cellpadding="0" cellspacing="0" width="640">
                                                <tbody>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td height="30" style="border-collapse: collapse; " width="580">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                    </tr>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="580">
                                                            <div align="center">
                                                                <p style="color: rgb(231, 203, 163); font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; font-size: 36px; margin-top: 0px; margin-bottom: 30px; ">
                                                                    <strong>TheBigMall Coupon code !</strong></p>
                                                            </div>
                                                        </td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td bgcolor="#ffffff" height="30" style="border-collapse: collapse; " width="640">
                                            &nbsp;</td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td bgcolor="#ffffff" style="border-collapse: collapse; " width="640">
                                            <table border="0" cellpadding="0" cellspacing="0" width="640">
                                                <tbody>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="580">
                                                            <table border="0" cellpadding="0" cellspacing="0" width="580">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td style="border-collapse: collapse; " width="580">
                                                                            <h1 align="left" style="font-size: 18px; line-height: 24px; color: rgb(154, 150, 97); font-weight: bold; margin-top: 0px; margin-bottom: 18px; ">
                                                                                25% off on modular kitchens (Faizabad Road)</h1>
                                                                            <div align="left" style="font-size: 13px; line-height: 18px; color: rgb(68, 68, 68); margin-top: 0px; margin-bottom: 18px; ">
                                                                                <p style="margin-bottom: 15px; ">
                                                                                    <strong>Offer Details</strong></p>
                                                                                <p style="margin-bottom: 15px; ">
                                                                                    Make your kitchen a beautiful place to cook with RECENT KITCHEN WORLD</p>
                                                                                <p style="margin-bottom: 15px; ">
                                                                                    Get 25% discount on total billing amount on modular kitchens manufacturing.&nbsp;</p>
                                                                                <p style="margin-bottom: 15px; ">
                                                                                    Our Products:<br style="line-height: 13px; " />
                                                                                    Marine Ply Shutter (Weather Proof)<br style="line-height: 13px; " />
                                                                                    Marine Ply Carcass (Weather Proof)<br style="line-height: 13px; " />
                                                                                    Acrylic shutter<br style="line-height: 13px; " />
                                                                                    Civil work<br style="line-height: 13px; " />
                                                                                    Chimney<br style="line-height: 13px; " />
                                                                                    150 Colours available</p>
                                                                                <p style="margin-bottom: 15px; ">
                                                                                    Offer for limited period. So don&#39;t leave this opportunity &amp; make your kitchen beautiful !!!</p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="10" style="border-collapse: collapse; " width="580">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <table border="0" cellpadding="0" cellspacing="0" width="580">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td style="border-collapse: collapse; " width="580">
                                                                            <p align="left" style="font-size: 18px; line-height: 24px; color: rgb(154, 150, 97); font-weight: bold; margin-top: 0px; margin-bottom: 18px; ">
                                                                                Coupon code !</p>
                                                                            <div align="left" style="font-size: 13px; line-height: 18px; color: rgb(68, 68, 68); margin-top: 0px; margin-bottom: 18px; ">
                                                                                <h1 style="margin-bottom: 15px; text-align: center; ">
                                                                                    12345$randstr$randstr2</h1>
                                                                                <p style="margin-bottom: 15px; ">
                                                                                    &nbsp;</p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="10" style="border-collapse: collapse; " width="580">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <table border="0" cellpadding="0" cellspacing="0" width="580">
                                                                <tbody>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td style="border-collapse: collapse; " width="580">
                                                                            <p align="left" style="font-size: 18px; line-height: 24px; color: rgb(154, 150, 97); font-weight: bold; margin-top: 0px; margin-bottom: 18px; ">
                                                                                Address :</p>
                                                                            <div align="left" style="font-size: 13px; line-height: 18px; color: rgb(68, 68, 68); margin-top: 0px; margin-bottom: 18px; ">
                                                                                <p style="text-align: center; margin-bottom: 15px; ">
                                                                                    Store Address :Kamta Check Post, Faizabad Road, Opp. Kamta Petrol Pump, Lucknow.<br style="line-height: 13px; " />
                                                                                    City :Lucknow<br style="line-height: 13px; " />
                                                                                    Contact No.9415255816, 9721961276, 9918404211<br style="line-height: 13px; " />
                                                                                    <span style="color: rgb(255, 0, 0); ">Offers valid for 48 hours only.</span></p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="border-collapse: collapse; ">
                                                                        <td height="10" style="border-collapse: collapse; " width="580">
                                                                            &nbsp;</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td bgcolor="#ffffff" height="15" style="border-collapse: collapse; " width="640">
                                            &nbsp;</td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td style="border-collapse: collapse; " width="640">
                                            <table bgcolor="#043948" border="0" cellpadding="0" cellspacing="0" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(4, 57, 72); color: rgb(226, 226, 226); " width="640">
                                                <tbody>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td height="30" style="border-collapse: collapse; " width="360">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="60">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="160">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                    </tr>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " valign="top" width="360">
                                                            <p align="left" style="font-size: 12px; line-height: 15px; margin-top: 0px; margin-bottom: 15px; ">
                                                                &nbsp;</p>
                                                            <p align="left" style="font-size: 12px; line-height: 15px; margin-top: 0px; margin-bottom: 15px; ">
                                                                All Rights Reserved &gt; TheBigMall.co.in - Great discounts in your city</p>
                                                        </td>
                                                        <td style="border-collapse: collapse; " width="60">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " valign="top" width="160">
                                                            <p align="right" style="font-size: 11px; line-height: 16px; margin-top: 0px; margin-bottom: 15px; color: rgb(231, 203, 163); ">
                                                                &nbsp;</p>
                                                        </td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                    </tr>
                                                    <tr style="border-collapse: collapse; ">
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                        <td height="15" style="border-collapse: collapse; " width="360">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="60">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="160">
                                                            &nbsp;</td>
                                                        <td style="border-collapse: collapse; " width="30">
                                                            &nbsp;</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr style="border-collapse: collapse; ">
                                        <td height="60" style="border-collapse: collapse; " width="640">
                                            &nbsp;</td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
            <img border="0" height="1" src="https://createsend3.com/t/j-o-wukdik-l/o.gif" style="min-height: 1px !important; width: 1px !important; border-width: 0px !important; margin: 0px !important; padding: 0px !important; line-height: 13px; outline-style: none; display: block; " width="1" /></div>
        <div>
            &nbsp;</div>
        <p>
            &nbsp;</p>
    </body>
</html>

<?
$message = ob_get_clean();

mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:44:46.540

您缺少邮件标题请参阅 php.net [http://php.net/manual/en/function.mail.php中的示例](http://php.net/manual/en/function.mail.php)

```
<?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

// message
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

我推荐你 phpmailer [http://phpmailer.worxware.com/index.php?pg=examplebmail](http://phpmailer.worxware.com/index.php?pg=examplebmail) http://sourceforge.net/projects/phpmailer/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:38:39.343

不幸的是，它并不像在正文中发送 html 那样简单。您需要告诉邮件客户端内容类型和更多步骤。

您最好的选择是使用[Pear Mail](http://pear.php.net/package/Mail/)或[Zend_Mail 之](http://framework.zend.com/manual/1.12/en/zend.mail.html)类的库来让您的生活更轻松

# mysql - 按多列选择不同的行并检索未参与确定区别的另一列

> ID：12679835
> 
> 赞同：3
> 
> 时间：2012-10-01T19:35:34.490
> 
> 标签：mysql, distinct

下面是我如何通过多列（a、b 和 c）的组合来选择不同的行：

```
select distinct a,b,c from my_table 
```

这很好，但我需要为这些行 (d) 检索另一列，我无法将其添加到选择部分，因为它还在确定我不想要的行唯一性方面发挥作用。

如何在不影响行唯一性的情况下检索附加列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:42:21.933

您可以使用 group by 来执行此操作。在 MySQL 中，您可以执行以下操作：

```
select a, b, c, d
from my_table
group by a, b, c 
```

这将为“d”选择一个任意值，这通常（但不是保证！）是遇到的第一个值。这使用了 MySQL 的一个特性，称为隐藏列。

对于在 MySQL 和其他数据库中工作的代码，您需要更加明确：

```
select a, b, c, min(d)
from my_table
group by a, b, c 
```

在 MySQL 中获取 d 的实际随机值有点棘手，需要更多的工作。这是一种方法：

```
select distinct a, b, c,
       (select d from my_table mt2
        where mt.a = mt2.a and mt.b = mt2.b and mt.c = mt2.c
        order by rand()
        limit 1
       ) d
from my_table mt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:47:02.040

看起来像一个加入的工作......可能是一个`LEFT JOIN`。像这样的东西：

```
SELECT DISTINCT L.a, L.b, L.c FROM `my_table` L
LEFT JOIN (
    SELECT a, b, c, d FROM `my_table`
) R ON L.a=R.a AND L.b=R.b AND L.c=R.c 
```

# git - 以只读方式创建远程 git 存储库

> ID：12679847
> 
> 赞同：1
> 
> 时间：2012-10-01T19:36:40.060
> 
> 标签：git

我想创建一个 git 存储库，我可以在本地“更改”（普通存储库），但是，想通过 http 共享它，但我希望它成为`read-only`克隆它的人的存储库。

那可能吗？我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:23:00.393

如果您的服务器需要有效用户（即经过身份验证的用户）“ `/git/repos/git-receive-pack`”，则匿名用户的所有写入操作都将被拒绝。

请参阅[SO 问题“git-http-backend”](https://stackoverflow.com/questions/7222992/git-http-backend)作为此配置的说明。

另一种选择是安装一个额外的模块，比如**[Gitolite](https://github.com/sitaramc/gitolite)**，它可以更好地控制谁可以在任何 repo 上读/写。

# c# - 更改设置后重新加载 UI 语言字符串

> ID：12679853
> 
> 赞同：1
> 
> 时间：2012-10-01T19:37:09.090
> 
> 标签：c#, multithreading, user-interface

在用户更改选项窗口中的语言后，我在更改 UI 字符串时遇到问题。要更改主窗体的UI字符串，我必须每次都重新启动程序，才能使更改生效，但这很烦人。所以我尝试使用委托来调用该函数，该函数在保存新设置后在选项窗口中加载主窗口的字符串。该函数在选项窗口中调用，但它不会更改主窗口的字符串。

主窗口中的代码

```
public delegate void CallLoadUIStrings(SupportedLanguages lang);
public CallLoadUIStrings callLoadUIStrings;

public Renamer()
{
     callLoadUIStrings = new CallLoadUIStrings(LoadUIStrings);
}

 public void LoadUIStrings(SupportedLanguages lang)
 {
       try
       {
            switch (lang)
            {
                    #region "DE/JA/FR/ES/NL"
                    case SupportedLanguages.De:
                    case SupportedLanguages.Ja:
                    case SupportedLanguages.Fr:
                    case SupportedLanguages.Es:
                    case SupportedLanguages.Nl:
                         // reads the language file where the ui strings are stored
                        langHelper.Read(RenamerLangOpener.RenamerMainWindow);

                        this.mnuFile.Text = langHelper.Files;
                        this.mnuClose.Text = langHelper.Close;

                        this.mnuEdit.Text = langHelper.Edit;
                        this.mnuUndo.Text = langHelper.Undo;
                        this.mnuCut.Text = langHelper.Cut;
                        this.mnuCopy.Text = langHelper.Copy;
                        this.mnuPaste.Text = langHelper.Paste;
                        this.mnuDelete.Text = langHelper.Delete;
                        this.mnuSelectAll.Text = langHelper.SelectAll;
                     #endregion
            }
       }
       catch (Exception ex) { //exception handling }
}
private void mnuOpt_Click(object sender, EventArgs e)
{
       Preferences opt = new Preferences(this);
       opt.ShowDialog();
} 
```

选项窗口中的代码

```
 internal Renamer instance = null;
    public Preferences(Renamer form)
    {
        instance = form;
    }
    public void UpdateUI()
    {
        langHelper.ReadSettingsValues();
        instance.BeginInvoke(instance.callLoadUIStrings,new object[] { langHelper.GetLang});
    } 
```

由于我从未与代表合作过，因此我不知道错误在哪里。我已经搜索了很多以找到类似问题的解决方案，但我还没有找到与我的问题相匹配的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:37:33.997

我假设这是 winforms 而不是 WPF 问题，并且您有一个从应用程序的 Main 功能打开的主要表单。我更改语言的解决方案是循环打开这个表单，只要表单的属性设置为某个语言标识符，就继续循环。如果设置了此属性，那么我将语言更改为该值，然后进行另一个循环迭代。我将需要从一个表单复制到另一个表单的所有其他属性复制到另一个表单，其中 main 是表单的位置。

如果表单在没有设置语言 ID 的情况下关闭，那么我们会像往常一样中断循环并退出应用程序。

# c - C：帮助查找内存故障

> ID：12679854
> 
> 赞同：0
> 
> 时间：2012-10-01T19:37:12.090
> 
> 标签：c, memory-leaks, malloc

我的程序是用 C 语言编写的，它是一个磁盘模拟器。我写完了它，当我注释掉我的测试程序的某些行时它会运行，但是我在取消注释的地方出现内存错误。我怀疑这是我的 char* 的。

我注释掉的那一行（以及程序崩溃的地方）是

```
free(buffer); 
```

其中 buffer 是从磁盘读入的字节字符串的 char*。它最初使用 malloc 分配了 30 个字节。

```
char* buffer = (char *) malloc(sizeof(char) * 30); 
```

在这里发布的内容太多了，所以我将把我正在编写/复制的部分放到 char* 中，希望有人能看到我做错了什么。

我不认为这太复杂了，我只是对 C 不够熟悉，可以识别明显的内存错误。

```
 // In the event of a cache miss:

 // block_buffer to pass to add_cache_entry
 char cMissBuffer[BLOCK_SIZE];

 // read content of block from disk 
 fread(cMissBuffer,sizeof(char),BLOCK_SIZE,diskEntity.pBlockStore);

 // add to cache
 if(1==add_cache_entry(i,cMissBuffer)) return 1;
 .
 .
 .
 // some of what is in add_cache_entry

 int add_cache_entry(int v, char *block_buffer)
 {
    // ...
    // construct a new queue element
    QueueElement *block_to_cache = (QueueElement*)malloc(sizeof(QueueElement));
    block_to_cache->blkidx = v;

    block_to_cache->content=(char*)malloc(BLOCK_SIZE);
    strcpy(block_to_cache->content,block_buffer);
// ...
 } 
```

在测试中，BLOCK_SIZE 为 5，QueueElement 是一个 struct，content 是一个 char* 和 BLOCK_BYTES 的 info。

这是运行可执行文件（转储队列）的摘录...我认为缺少“\ 0”可能与该问题有关...

```
after adding cache entry (5):
DUMP:
BLOCK 5 FLAG:0 CONTENT:222220000000
BLOCK 4 FLAG:0 CONTENT:222220000000
BLOCK 3 FLAG:0 CONTENT:000000000000
BLOCK 2 FLAG:0 CONTENT:000000000000
BLOCK 1 FLAG:1 CONTENT:11100 
```

我想我得到了额外的空间，因为 malloc 分配的空间比我需要的多，但我读到这是正常的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:41:18.823

该行为的一个可能原因是`strcpy()`要求源字符串以空值终止，这不是这里的情况，因为`fread()`不会为您附加空终止符（在这种情况下也不能`fread()`读取确切的缓冲区大小）。`strcpy()`还附加了一个空终止符，这意味着`strcpy()`调用肯定会超出`block_to_cache->content`缓冲区。

如果数据不用作 C 样式字符串`memcpy()`，请改为复制数据：

```
memcpy(block_to_cache->content, block_buffer, BLOCK_SIZE); 
```

* * *

其他要点：

*   检查 , 的返回值[`fread()`](http://en.cppreference.com/w/c/io/fread)，以确保它在尝试使用之前成功填充缓冲区。
*   没有必要强制转换的返回值`malloc()`（请参阅[Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）。
*   检查返回值`malloc()`以确保内存分配成功。
*   `sizeof(char)`保证为 1，因此可以从 的参数中删除`malloc()`。

# android - 如何更改 android app/ 大屏幕的背景颜色？

> ID：12679856
> 
> 赞同：0
> 
> 时间：2012-10-01T19:37:18.517
> 
> 标签：android, listview, background, android-listview

我有个问题。我想将我的列表视图的背景颜色设置为白色，但只有行的背景颜色会发生变化。如何让背景填满整个屏幕？这是我的代码：

```
public class MyAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;

public MyAdapter(Context context, String[] values) {
    super(context, R.layout.list_view, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.list_view, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    Typeface tf = Typeface.createFromAsset(context.getAssets(), "fonts/chalkboardse.ttc");
    textView.setTypeface(tf);
    textView.setTextColor(Color.BLACK);
    textView.setText(values[position]);

    LinearLayout layout = (LinearLayout)rowView.findViewById(R.id.background);
    layout.setBackgroundColor(Color.WHITE);

    return rowView;
}
} 
```

这是我的列表视图的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/background" >

<TextView 
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="20sp" >
</TextView>
</LinearLayout> 
```

这是相应的活动：

```
public class AreaChooser extends ListActivity {

static final String [] FRUIT = new String [] { "Apple", "Pear"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new MyAdapter(this, FRUIT));

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:41:53.383

您正在设置列表视图行的背景，而不是列表视图本身的背景。

在你的`ListActivity`简单做：

```
getListView().setBackgroundColor(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:39:38.907

您`LinearLayout`需要在`R.layout.list_view`xml 中设置为 fill_parent 或 match_parent。

# django - Django formset 访问模板中的初始数据

> ID：12679858
> 
> 赞同：1
> 
> 时间：2012-10-01T19:37:21.197
> 
> 标签：django, django-templates, django-forms

我有一个带有一组初始数据的 Django 表单集，它将外键关系对象加载到初始表单中：

```
{{ cellcountformset.management_form }}
{% for form in cellcountformset %}
<div id="">
    {{ form.errors }}
    {{ form.as_p }}
</div>
{% endfor %} 
```

相关模型如下所示：

```
class CellType(models.Model):
    readable_name = models.CharField(max_length=50)
    machine_name = models.CharField(max_length=50)
    comment = models.TextField(blank=True)

class CellCount(models.Model):
    cell_count_instance = models.ForeignKey(CellCountInstance)
    cell = models.ForeignKey(CellType)
    normal_count = models.IntegerField()
    abnormal_count = models.IntegerField()
    comment = models.TextField(blank=True) 
```

我希望能够将 CellCount 模型的单元格属性所引用的单元格的 machine_name 显示`#id`为`div`. 我为 CellCount 使用了 ModelFormSet，它传递了一个 CellType 对象列表作为其初始数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:09:55.733

表单的初始数据存储在 中`form.initial`，因此请尝试：

```
{{ form.initial.cell.machine_name }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:41:36.680

我不认为您可以使用表单字段来遍历模型并获取机器名称，但我会检查一下。如果可以，语法将类似于

```
<div id="{{ form.fields.cell.machine_name }}"> 
```

但我认为您将需要为此编写一个自定义模板过滤器。它可以只将表单作为参数，并返回与其关联的机器名称（如果表单未绑定，则返回空白）。然后你就可以写了

```
<div id="{{ form|machine_name }}"> 
```

# math - 减法运算顺序？

> ID：12679861
> 
> 赞同：-1
> 
> 时间：2012-10-01T19:37:39.200
> 
> 标签：math, arithmetic-expressions

这可能是一个没有受过教育的问题 - 或者是一个奇怪的问题。

我的问题是为什么这段代码不起作用：

```
 if (up == true)
        {
            SDL_Delay(pause_t);
            player.setY(player.velocity - player.getY());
        }
        if (left == true)
        {
            SDL_Delay(pause_t);
            player.setX(player.velocity - player.getX());
        } 
```

但是，此代码确实有效：

```
 if (up == true)
        {
            SDL_Delay(pause_t);
            player.setY(player.getY() - player.velocity);
        }
        if (left == true)
        {
            SDL_Delay(pause_t);
            player.setX(player.getX() - player.velocity);
        } 
```

两个代码的区别在于，在第一个例子中，我在调用位置函数之前先减去了一部分（物体的速度）。当我运行这段代码时会发生什么，它并没有在轴上移动 1，而是移动 10。Y 轴的大小在 10 以上，所以我实际上并没有减去它自己的坐标。

但是，在第二段代码中，在调用了我的位置函数之后，我最终减去了速度。第二段代码发生的情况是对象移动了一个像素（速度的整数值）。

对于那些想知道我在做什么的人，这些是我的 openGL 游戏的控件。是用来移动物体的。

并且为了记录，这不是一个重要的问题。我的代码确实有效。我只是好奇为什么它会这样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:42:22.540

> 在第一个例子中，我在调用位置函数之前先减去一部分（物体的速度）。

不，在第一个版本中，您减去的是旧位置，而不是减去速度。

您描述的代码是：

```
player.setY((-player.velocity) + player.getY()); 
```

这将起作用。

# design-patterns - 如何防止 Azure 队列积压

> ID：12679862
> 
> 赞同：2
> 
> 时间：2012-10-01T19:37:38.343
> 
> 标签：design-patterns, azure, azure-queues

我有一个将消息发送到 Azure 队列的 Azure Web 应用程序，并且我有工作人员轮询队列并在消息可用时对其进行处理。在大多数情况下，这工作正常，我对这个设计很满意。

但是，在一种情况下它的效果并不好，我正在寻找有关如何处理这种特定情况的建议：

有时，某个特定用户（我们称他为 Bob）会执行一些操作，这些操作会导致将几条消息发送到队列中，这会产生积压，其他​​用户必须等待 Bob 的消息被处理，然后才能处理他们的消息. 他们因为 Bob 在队列中发送了许多消息而受到惩罚。

如何改进我的设计以防止一个用户的消息不会导致其他用户的消息延迟？我的第一直觉是为每个用户创建一个队列，但如果我有几千个用户，我不确定这是一个合理的设计。

是否存在任何设计模式来解决这种情况？如果是这样，我可以重用该模式的任何 C# 实现吗？

# .htaccess - Mod重写子文件夹

> ID：12679868
> 
> 赞同：1
> 
> 时间：2012-10-01T19:37:58.127
> 
> 标签：.htaccess, mod-rewrite, ssl, https, subdirectory

我正在尝试重新写入一个名为 /checkout 的特定子文件夹，这有一个为 https 附加的 SSL 证书

所以我在我网站的根文件夹中有这个 -

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

# in http: force secure.html to https
RewriteCond %{server_port} !=443
RewriteCond $1 ^([^/]+)$ [NC]
# this kinda works below but is resolving to index2.php and is showing in the url so not really working yet
RewriteRule checkout/([^/]+)\.html$ https://mysite.com/checkout/index2.php [L] 
```

除了显示类似

[https://mysite.com/checkout/index.html](https://mysite.com/checkout/index.html)

表明

[https://mysite.com/checkout/index2.php](https://mysite.com/checkout/index2.php)

（index2.php 是一个测试网址顺便说一句）

我还尝试将子文件夹中的 .htaccess 修改为类似

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteCond %{server_port} !=443
RewriteCond $1 ^([^/]+)$ [NC]
RewriteRule ^([^/\.]+)/?$ https://mysite.com/checkout/index2.php [L] 
```

我只想处理

`https://mysite.com/checkout/index.html`或者`https://mysite.com/checkout/about-us.html`就像我在根中一样 `https://mysite.com/index.html`=> `https://mysite.com/index.php`（然后获取变量等）

IE

```
 RewriteRule ^/?(catalogue-page)/([0-9]+)/([0-9]+)/([0-9]+)/([0-9]+)/([0-9]+) index2.php?friendly_url=$1&catalogue_id=$2&view=catalogue&categoryid=$3&subcategoryid=$4&subjectid=$5&item=$6 
```

我认为https更复杂。非常感谢任何指针/帮助等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:44:00.797

您的 RewriteRule 似乎表明您正在尝试采用非安全 url 并通过 https 显示不同的页面，这本身是不可能的。话虽如此，您的描述听起来不像是总体目标。

如果您希望强制非安全 URL 是安全的，这很好，并且希望对 index.html 的请求对服务器 index.php 也很好。然而，不可能一举完成这一切。

```
# first force urls to be secure.
RewriteEngine On
RewriteCond %{SERVER_PORT} !=443
RewriteRule ^checkout/([^/\.]+)/?$ https://mysite.com/%{REQUEST_URI} [R=301,L]

# now rewrite them, so that the requests all get served through the front controller
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^checkout/([^/\.]+)/?$ /checkout/index2.php [L] 
```

# ubuntu - 在 Ubuntu 上安装 JDK 的问题

> ID：12679869
> 
> 赞同：1
> 
> 时间：2012-10-01T19:38:01.523
> 
> 标签：ubuntu, installation, java

我按照这个指令 [https://askubuntu.com/questions/55848/how-do-i-install-oracle-java-jdk-7](https://askubuntu.com/questions/55848/how-do-i-install-oracle-java-jdk-7) 在我的 Ubuntu 系统上安装 Java，但是到了这条线

```
sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jdk1.7.0/bin/java" 1 
```

我只是得到这个回应：

```
update-alternatives: using /usr/lib/jvm/jdk1.7.0/bin/java to provide /usr/bin/java (java) in auto mode. 
```

谁能告诉我如何安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:42:35.740

看起来奏效了？的输出是`java -version`什么？如果它显示“Java 版本 1.7.0”，那么一切就绪。

# azure - 创建网站时指定 Azure 订阅

> ID：12679881
> 
> 赞同：0
> 
> 时间：2012-10-01T19:38:38.620
> 
> 标签：azure

我一直在玩 Azure 的新“网站”功能（我相信它仍处于测试阶段），但我遇到了一个问题。我有两个与我的帐户相关联的订阅 - 一个供个人使用，另一个供我的公司使用。当然，我希望能够在创建新网站时指定使用哪个订阅。但是当我尝试创建一个网站时，它总是选择我的第二个订阅，并且从来没有给我机会指定我想使用哪一个。在创建网站后，我也无法弄清楚如何将网站移至其他订阅。

我已经经历了好几次了，我找不到任何可以指定要使用哪个订阅的地方。这只是一个测试版故障吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:43:44.583

我遇到了同样的事情，称为 MS 支持。切换回标准门户以进行此更改。

要访问旧门户，请将鼠标悬停在顶部的绿色“预览”按钮上。这对我来说似乎不适用于 Chrome，只有 IE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:49:21.787

请查看我在 MSDN 论坛上对类似问题的回复： http: [//social.msdn.microsoft.com/Forums/en-US/windowsazurepurchasing/thread/d9624b03-1d6c-484a-9fa8-8548c35a9d4f/](http://social.msdn.microsoft.com/Forums/en-US/windowsazurepurchasing/thread/d9624b03-1d6c-484a-9fa8-8548c35a9d4f/)。基本上，您需要为每个订阅单独激活此功能，因为它处于预览模式。

# typescript - 您将如何使用 TypeScript 来改进 JQueryUI 函数调用的预输入和类型检查

> ID：12679888
> 
> 赞同：1
> 
> 时间：2012-10-01T19:38:56.707
> 
> 标签：typescript

使用 jQuery UI 小部件时，您通常会得到遵循以下模式的内容：

$("#someId").someWidget("option", "someOption", value);

有没有一种很好的方法来模拟这种交互以从 TypeScript 中获得一些有用的类型检查？从技术上讲，您可能有这样定义的方法：

someWidget(optionLiteral: string, optionName: string, optionValue: any): JQuery;

（根据提供的 jQuery UI 类型定义建模）

因此，无论选项名称如何，选项值基本上都是“任何”。有没有办法进一步重载类型定义，并可能对 optionName 进行一些模式匹配？或者有没有这方面的计划？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:21:53.363

您可能想深入了解 jQuery UI 示例，

[http://www.typescriptlang.org/Samples/#Warship](http://www.typescriptlang.org/Samples/#Warship)

其中涵盖了如何使用其他方法扩展 jQuery 接口类型。

jQuery 类型是接口类型，接口类型在 TypeScript 中是开放的，这意味着以后的编译单元可以向该类型添加成员。你的例子会写成，

```
interface JQuery {
    someWidget(optionLiteral: string, optionName: string, optionValue: any): JQuery
} 
```

至于重载，方法可以在类型上重载，但不能在值上重载。重载值会在 CodePlex 网站上提出很好的建议。

# mysql - 无需任何形式的备份即可回滚对 MySQL 数据库的更改

> ID：12679889
> 
> 赞同：4
> 
> 时间：2012-10-01T19:38:58.937
> 
> 标签：mysql, database-restore

我知道我可能会问不可能的问题，但是尝试永远不会有坏处。

是否可以在没有任何形式的备份的情况下回滚对少数 MySQL 数据库的更改。唯一剩下的是我希望撤消的更改的数据库。

为什么会发生这种情况您可能会问，简单地说，Windows XP 调度程序决定不按计划运行备份任务，因此在对这些数据库进行几十次查询之前没有进行备份。

我怀疑是否有可能撤消这些更改，如果可能的话我不知道如何。也许 MySQL 会保留对数据库执行的更改的某种记录，但我不知道。

有谁知道在没有任何形式的备份（转储文件或数据文件夹中的文件）的情况下撤消对 MySql 数据库的更改的方法？

谢谢你。

> **系统详情：**
> 
> 视窗 XP SP3
> 
> 服务器：通过 TCP/IP 的本地主机
> 
> 软件：MySQL
> 
> 软件版本：5.5.25a - MySQL 社区服务器 (GPL)
> 
> 协议版本：10
> 
> 服务器字符集：UTF-8 Unicode (utf8)

* * *

**更新**

Windows XP 系统还原可能会保留以前版本的 MySQL 数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:43:16.737

如果没有任何数据库备份，您可能非常不走运。如果您启用了 mysql 查询日志记录或二进制日志记录，您可以收集一些关于自某个时间点以来运行了哪些查询的信息，但如果您有破坏性查询（更新、删除等），您将无法知道以前的数据是什么。

# objective-c - 如何正确使用 webkit 委托来启动和停止微调器、OS X、OBJ-C

> ID：12679890
> 
> 赞同：4
> 
> 时间：2012-10-01T19:39:09.577
> 
> 标签：objective-c, xcode, xcode4.5

看起来这应该很简单，但我对 Objective-C 还是很陌生。我想要做的只是在我的 WebView 加载时启动和停止微调器。这是一个 OS X 应用程序。我搜索的所有内容都是 Cocoa Touch，我只使用 Cocoa。在我的 AppDelegate.m 中，我必须使用启动和停止微调器的方法（这确实有效，我对其进行了测试）。

```
-(IBAction)goSpin:(id)sender
{
    [spinner startAnimation:self];
}

-(IBAction)stopSpin:(id)sender
{
    [spinner stopAnimation:self];
} 
```

我也有两个用于 webView 的委托方法，我覆盖了它们。

```
-(void)webView:(WebView *)sender didStartProvisionalLoadForFrame:(WebFrame *)frame
{
    [self goSpin:self];
}

-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{
    [self stopSpin:self];
} 
```

基本上，我想知道如何让我的 webView 设置它的委托。通常我必须在 .h 文件中做一些事情，但我找不到任何列出适用于此的 webKit 委托的参考。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T10:28:08.177

这

```
-(void)webView:(WebView *)sender didStartProvisionalLoadForFrame:(WebFrame *)frame 
```

和

```
-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame 
```

方法是[WebFrameLoadDelegate 协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html)的一部分。

[WebView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)有一个`frameLoadDelegate`属性。通过调用将其设置在您的`WebView`实例上`[webView setFrameLoadDelegate:delegate]`，其中`delegate`是实现这两种方法的 NSObject（`self`在此处创建 frameLoadDelegate 对您来说是最简单的）。由于 WebFrameLoadDelegate 是一个非正式协议，`delegate`因此应在其 .h 文件中声明这两个方法，而不是`<WebFrameLoadDelegate>`像使用正式协议那样添加到其类声明中。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-01T19:44:16.003

您可以覆盖这些 webview 委托方法来启动和停止微调器。

```
- (void)webViewDidStartLoad:(UIWebView *)webView{

// In this method you have to start a spinner.

}
- (void)webViewDidFinishLoad:(UIWebView *)webView{

   // In this method you have to stop the current  spinner.

}
 - (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{

      // In this method you have to stop the current  spinner.

 } 
```

# git - git push 一个子分支

> ID：12679894
> 
> 赞同：1
> 
> 时间：2012-10-01T19:39:34.707
> 
> 标签：git, branch

我在分支`feature_swap`那里做了一些更改，但我没有足够的信心在`feature_swap`分支中推动这些更改。所以我*尝试*创建另一个子`feature_swap_experiment`分支

```
git branch feature_swap_experiment
git checkout feature_swap_experiment 
```

现在我想推到`feature_swap_experiment`我尝试过
`git push origin feature_swap_experiment`的不起作用

```
error: src refspec feature_swap_experiment does not match any.
error: failed to push some refs to 'https://uname@bitbucket.org/uname/project.git' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:47:14.753

```
git push origin feature_swap_experiment 
```

应该是正确的命令。有没有可能您的遥控器设置不正确？

1.  如果你检查主人回来，你能推到遥控器吗？
2.  .git/config 文件的内容看起来正确吗？特别是检查文件的 [remote "origin"] 部分。

此外，`git branch -a`应该给你一个所有分支的列表，本地和远程，所以你应该能够快速查看设置是否正确。

这可能会有所帮助： [如何创建远程 Git 分支？](https://stackoverflow.com/questions/1519006/git-how-to-create-remote-branch)

编辑：查看您添加到问题的错误消息后，您似乎可能遇到与此处所述相同的问题： [“git push”到 github 时出错](https://stackoverflow.com/questions/959477/error-when-git-push-to-github)

因此，在您的情况下，您将运行：

```
git push https://uname@bitbucket.org/uname/project.git  HEAD:feature_swap_experiment 
```

# html - 如何将 div 放在图像上？

> ID：12679895
> 
> 赞同：9
> 
> 时间：2012-10-01T19:39:34.283
> 
> 标签：html, css

我正在尝试在图像上放置一个 div，使其像标题一样直接位于图像之上。

有时标题比其他时间长，所以我无法设置特定的 margin-top:-px 因为有时标题的高度更长。

我试过了，链接的背景（黑色）没有显示，就像我刚才所说的，标题高度发生了变化，所以这个方法是垃圾：

```
 <div>  

  <img src = "<? echo $image_url ?>" style="float:left;min-width:220px;max-width:220px;">
   <a href="LINK" ><div style="width:210px;background-color:black;color:white;bottom:0;margin-top:-20px;padding-left:10px;padding-top:10px;font-size:16px;"><? echo $title ?></div></a>

 </div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T19:48:15.783

尝试这样的事情：

```
<div style="position:relative;">  

  <img src = "<? echo $image_url ?>" style="min-width:220px;max-width:220px;">
   <div style="position:absolute;width:210px;background-color:black;color:white;top:0;left:0;padding-left:10px;padding-top:10px;font-size:16px;z-index:5;"><a href="LINK" ><? echo $title ?></a></div>

</div> 
```

你做了一些事情：
1）你有一个'a'标签内的div。您不应该将块级元素（如 div）放在内联级元素（如 a's）中。
2）从图像中删除浮动，将外部 div 的位置设置为相对，将内部 div 的位置设置为绝对，然后将其绝对定位到包含 div 的顶部。从那里，将大于 0 的 z-index 添加到内部 div 以确保它保持堆叠在图像上方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:46:36.330

添加`position:absolute; left:0px;top:0px;z-index: 2;`到当前div，并添加`style="position:relative;"`到父div

```
<div style="position:relative;">  

  <img src = "<? echo $image_url ?>" style="float:left;min-width:220px;max-width:220px;">

<a href="LINK" ><div style="position:absolute;z-index: 2;left:0px;top:0px;width:210px;background-color:black;color:white;bottom:0;padding-left:10px;padding-top:10px;font-size:16px;"><? echo $title ?></div></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:44:31.690

使用 CSS z-index 属性对齐图像上方的文本。z 索引较高的元素出现在顶部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T19:45:36.507

此代码应该适用于您要执行的操作：

```
<div style="background: transparent url('<? echo $image_url ?>') no-repeat 0 0; padding: 10px 0 10px 10px; width: 200px;"><a href="LINK"><? echo $title ?></a></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-07T10:20:22.867

```
<div style="position:relative;">  

<img  style=" border-radius: 10px 10px 10px 10px; 
              width: auto;
              height: 250px"

       src = "https://images.pexels.com/photos/904276/pexels-photo-904276.jpeg?auto=compress&cs=tinysrgb&h=350" 
      >

  <div style="position:absolute;
               width:100%;
               background-color:rgba(255, 255, 255, 0.3);
               color:white;
               bottom:0;
               left:0;
               padding-left:15px;
               font-size:17px;
               z-index:5;">
    <h3 style ="color:white">Title</h3>
    <h4 style ="color:white">Sub Title</h4>
    <p> Lorel Ipsum Blah blah </p>
  </div>

</div> 
```

**结果：**

[![演示](../Images/ced8c7bd280463951ec19d9a0ed261c8.png)](https://i.stack.imgur.com/T3dlf.png)

请参阅[CodePen](https://codepen.io/hiteshsahu/pen/zJPvOB/)上Hitesh Sahu ( [@hiteshsahu](https://codepen.io/hiteshsahu) )的 Pen [zJPvOB](https://codepen.io)。

# ruby-on-rails - ActiveModel 批量分配的默认角色

> ID：12679899
> 
> 赞同：0
> 
> 时间：2012-10-01T19:39:43.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

给定一个模型：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email
  attr_accessible :active, as: :backend
end 
```

现在可以按如下方式进行批量分配：

```
User.new name: 'Peter', email: 'pete@foo.bar'
User.new { name: 'Peter', email: 'pete@foo.bar', active: true }, as: :backend 
```

我将 active_admin gem 用于后端，它回退到通用控制器操作，除非您明确指定操作。换句话说：每当进行批量分配时，我都必须编写一个显式操作才能添加“as::backend”选项。不太好。

一种解决方案当然是颠倒事情并在已经明确声明的前端操作中添加“as::frontend”。

但也许有一种方法可以全局设置“as”选项，例如在后端路由命名空间的前置过滤器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:51:14.067

好的，我将放弃这个计划并使用 strong_passwords gem 来清理前端的批量分配。这个 gem 很有可能会被集成到 Rails 4 中，它是一个很好的替代 attr_accessible 的角色。

附带说明：strong_passwords gem 的 README 并没有真正适合我，但 Ryan Bates 在上面做了一个非常有用的 Railscasts 插曲（371-strong-parameters）。

# oop - 在 Python 中关闭 SQLite3 连接（当连接是对象的一部分时）

> ID：12679903
> 
> 赞同：0
> 
> 时间：2012-10-01T19:39:59.120
> 
> 标签：oop, database-design, sqlite, python-3.x, cursor

我整晚都在试图找到这个问题的答案，但我仍然没有找到明确的答案。通常，当我使用 sqlite3 时，我会使用以下模式：

```
import sqlite3

db = sqlite3.connect('whatever.db')
cursor = db.cursor()

#do some stuff

cursor.close() 
```

现在我试图加深我对 OOP 和数据库的理解，所以我想我会创建一个控制器对象来与数据库交互。我想出了以下几点：

一个只定义连接和游标的类：

```
import sqlite3

class coffee_shop_controller:

    def __init__(self):
        self.db = sqlite3.connect("coffeeshop.db")
        self.cursor = self.db.cursor()

    def close(self):
        self.cursor.close() 
```

我将其子类化为我需要的各种控制器。例如：

```
class customer_controller(coffee_shop_controller):

    """creates a controller to add/delete/amend customer records in the
       coffee shop database"""

    def __init__(self):
        super().__init__()

    def add_customer(self,fn,ln,sa,t,pc,tn):
        sql = """insert into customer
                 (first_name,last_name,street_address,town,post_code,telephone_number)
                 values
                 ('{0}','{1}','{2}','{3}','{4}','{5}')""".format(fn,ln,sa,t,pc,tn)
        self.cursor.execute(sql)
        self.db.commit() 
```

我很欣赏设计模式可能不是很好（接受建议），我确实应该防止 SQL 注入，但关闭连接目前让我很感兴趣。

通过搜索[Python 文档](http://docs.python.org/py3k/library/sqlite3.html?highlight=sqlite3#sqlite3)，注释行表明我们***可以***关闭连接，而不是***必须***。这是正确的吗？我真的不需要麻烦吗？

如果我确实需要打扰，那么我应该做什么似乎存在分歧：

*   手动关闭连接
*   [使用`__del__`方法](http://eli.thegreenplace.net/2009/06/12/safely-using-destructors-in-python/)
*   [使用`with`或`atexit`](https://stackoverflow.com/questions/974813/cleaning-up-an-internal-pysqlite-connection-on-object-destruction)

这里有什么确定的吗？该`__del__`方法对我来说最有意义，但也许这是我的无知。

感谢您提供的任何建议。

亚当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:59:31.767

释放不再需要的资源是一种很好的做法。通常，数据库连接非常“昂贵”，我肯定会建议打开连接，执行实际查询并在此之后立即关闭连接。

为了更好地控制这一点，我还建议遵循**工作单元**设计模式。此外，如果您可以将**Unit Of Work**与一些好的**ORM**（例如 SQLAlchemy 或 Django）结合起来，那对您来说会很棒

# jpeg2000 - 用于从 C++ 代码编码和解码 JPEG2000 图像的 SDK

> ID：12679904
> 
> 赞同：0
> 
> 时间：2012-10-01T19:40:00.093
> 
> 标签：jpeg2000

我正在寻找（大致）以下有关 JPEG2000 文件的功能的 SDK –</p>

1.  解码和编码 J2K 文件。
2.  解码以访问 JPEG2000 图像的各个元素（框、标记段、图像流等），以便检查和可能更改文本和位。
3.  使用给定元素对 JPEG2000 图像进行编码（重构）。
4.  这一切都是在 C++ 应用程序中完成的。
5.  它必须支持 64 位 Redhat Linux 操作系统。
6.  它应该能够处理大至 16GB 的 J2K (JPEG2000) 文件，即 64 位文件地址。

请告诉我您知道或在您的项目中使用过的具有上述功能的 SDK。此外，我们将不胜感激有关性能和许可/定价的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:53:26.040

最好的 JPEG 2000 库是 Kakadu：[http ://www.kakadusoftware.com/](http://www.kakadusoftware.com/)

1.  没问题，Kakadu 可以处理原始码流 (j2c) 和文件格式码流 (jp2)
2.  完整的码流访问和操作。
3.  不知道你在这里的意思是什么，但如果你的意思是将组件组装在一起或图像的碎片（例如瓷砖）。是的，Kakadu 的能力不止于此。
4.  是的，它是用 C++ 编写的，因此可以轻松地与其他 C++ 应用程序集成。
5.  是的，每个主要平台都受支持。
6.  是的，支持 64 位寻址。

来源：[http ://www.kakadusoftware.com/documents/Overview.txt](http://www.kakadusoftware.com/documents/Overview.txt)

至于定价和许可模式，您使用它的方式会有所不同。个人许可证的许可证起价为 250 美元，评估许可证的起价为 500 美元。有关许可的最准确详细信息，请参见此处：[http ://www.kakadusoftware.com/index.php?option=com_content&task=blogcategory&id=6&Itemid=12](http://www.kakadusoftware.com/index.php?option=com_content&task=blogcategory&id=6&Itemid=12)

Kakadu 的作者是 David Taubman，他是 JPEG 2000 规范的主要贡献者之一。如果您需要 JPEG 2000 来做更多事情，他将是寻求帮助的好人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T23:34:46.113

另一个这样做的商业图书馆是 Accusoft Pictools。我们将其用于医学成像目的。它支持大多数已知格式，包括 jpeg2000 (.jp2)。

[https://www.accusoft.com/pictools.htm](https://www.accusoft.com/pictools.htm)

具有可从非托管代码调用的完整库。

问候

阿里

# ios - 具有自定义 drawRect 的单视图 iOS 应用程序

> ID：12679905
> 
> 赞同：0
> 
> 时间：2012-10-01T19:40:01.090
> 
> 标签：ios, uiview, drawrect

我虽然明白这一点，但我无法让它发挥作用：

我正在尝试创建一个非常简单的应用程序来测试各种事情（好的 - 这是一个使用蒙特卡洛技术通过模拟向板上投掷飞镖来估计 Pi 的应用程序）。

我有一个单一视图 iOS 应用程序（例如，来自单一视图模板），我在它的底部有一个 UIButton（用于启动应用程序），在顶部有一个 UILabel 来显示结果。

视图控制器是 UIViewController 的自定义子类，调用 PiCalcViewController；该视图是填充整个屏幕的标准 UIView。

该应用程序有效，但现在我希望能够绘制模拟如何在屏幕中间进行的图形表示，我将在我的视图的 drawRect 中完成（对吗？）。所以我想我会创建一个新文件 (PiCalcView) 一个 Objective-C 类，使其成为 UIView 的子类，然后在 IB 中，在我的视图控制器中间拖出一个新视图并将其类更改为 PiCalcView .

很好，除了 PiCalcView 没有出现在检查器的下拉类列表中。

问题：知道出了什么问题，并且像这样创建我的 UIView 的子视图是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:47:10.810

在 Identity Inspector 的自定义类部分中键入类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:53:05.180

好的 - 退出并重新启动 Xcode 似乎可以解决问题。

感谢您的提示 - 作为 Xcode 和 ObjC 的新手，我不知道我是否掌握了正确的技术。至少我现在知道了。

# uitableview - UITableView 不能向下滚动。键盘同时显示和不显示

> ID：12679912
> 
> 赞同：2
> 
> 时间：2012-10-01T19:40:57.330
> 
> 标签：uitableview, uiimageview, uitextview

我有 a`UITableView`和它`UITableViewCell`的 s 可以通过函数独立改变它们的大小`tableView:heightForRowAtIndexPath`。他们存储`UIImage`不同大小的 s。当我点击图像时，会显示键盘（假设它用于标记图像）。

当我有 3 个单元格（图像）时，总高度比屏幕尺寸小 1 个像素，这一切都很好*。*显示键盘，我可以滚动查看所有单元格（图像）。

但是当我再添加一个，将总尺寸推到超过屏幕时，一切都会中断。似乎显示了键盘（我在顶部有一个额外的按钮，使其比原来的键盘高一些像素，如图所示）。但是我什么都写不出来。键盘顶部的按钮是退出键盘，它不起作用。这有点卡住了。

该项目可以在这里下载：[https](https://github.com/TokyoBirdy/cecilia/tree/master/Test) ://github.com/TokyoBirdy/cecilia/tree/master/Test （请原谅乱码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T05:59:35.540

通过删除编辑视图原点的代码，我能够解决锁定滚动的问题。此外，我在计算中使用 tableview 的 contentSize 属性实现了滚动到底部单元格。

```
-(void) keyboardWillShow:(NSNotification *)note
{

  if(!isKeyboardShowing)
    {
    isKeyboardShowing = YES;
    CGRect keyboardBounds;
    [[note.userInfo valueForKey:UIKeyboardBoundsUserInfoKey] getValue: &keyboardBounds];
    CGFloat keyboardHeight = keyboardBounds.size.height;

            CGRect frame = self.view.frame;
            frame.size.height += keyboardHeight;
            self.view.frame = frame;

    CGPoint scrollPoint = frame.origin;
    scrollPoint.y += _tableView.contentSize.height - keyboardHeight;
    [_tableView setContentOffset:scrollPoint animated:YES];
    }
} 
```

# java - 从 java 连接到 mdf 数据库

> ID：12679914
> 
> 赞同：-4
> 
> 时间：2012-10-01T19:41:05.597
> 
> 标签：java, database

我在 Visual Studio 2010 中创建了一个 mdf 数据库文件有没有办法从 java netbeans 项目连接到这个数据库我找到了一个 jdbc 驱动程序，但它没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:54:47.807

您不能直接使用 Java 中的 MDF 文件。您将需要在 MDF 文件上打开一个数据库程序实例，然后如果数据库程序实例有可用的 JDBC 驱动程序，您就可以通过 JDBC 与之对话。

如果您只需要一个用于 Java 程序的简单数据库，那么请查看可以嵌入到您的应用程序中的 Apache Derby。

# jquery - Bxslider 隐藏文本

> ID：12679915
> 
> 赞同：2
> 
> 时间：2012-10-01T19:41:06.503
> 
> 标签：jquery, bxslider

我正在使用[http://bxslider.com/](http://bxslider.com/)，我想知道是否可以比图像更快地隐藏文本？我有一个底部宽度较小的背景图像，我想正常更改图像，但从左侧和右侧更快地隐藏文本 30px。

也许是这样的：

Wrapper 是 500px，并且从左侧和右侧用 jquery 30px 隐藏（溢出：隐藏）或者也许可以添加某种掩码？

# asp.net - ASP irc bot 在 20 分钟后掉线

> ID：12679916
> 
> 赞同：1
> 
> 时间：2012-10-01T19:41:13.790
> 
> 标签：asp.net, bots, irc

我正在尝试用 ASP 制作一个 IRC 机器人。我已经建立了到 IRC 服务器的连接并且一切正常，但是 20 分钟后连接中断了......我尝试在 web.config 文件中添加以下行：

```
<sessionState timeout="60"/> 
<httpRuntime  maxRequestLength="102400" executionTimeout="32678"/> 
```

但它没有用。我想知道这是否可能是因为我的主机，但我不想移动到另一个，直到我确定这个问题可以解决......我不想用 php 或其他语言重写它。任何帮助，将不胜感激。

通过告诉人们每 15 分钟打开一次应用程序解决了这个问题，因此机器人现在无限期挂起。不是一个优雅的解决方案，但它有效:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:45:39.827

您的应用程序池是否因为 20 分钟不活动而自行关闭？（这是 IIS 上的默认值）

# java - Java 没有通过链表正确地为我的变量赋值

> ID：12679919
> 
> 赞同：1
> 
> 时间：2012-10-01T19:41:18.373
> 
> 标签：java, linked-list, loops

```
public void returnRental(Customer cust){
    Rental toDelete = null; //Rental to be removed from list.
    LinkedList<Video> toReturn = null; //List of videos to be added to inventory.

    //Find appropriate rental according to customer name. 
    for(int i = 0; i < rentals.size(); i++){
        if(cust.getName() == rentals.get(i).getRentee().getName()){
            toReturn = rentals.get(i).getRented();
            toDelete = rentals.get(i);
        }
    } 
```

这是给我带来问题的代码片段。我已经在 Eclipse 中调试了很多，这最终让我更加困惑。它满足 if 并通过条件。但是，一旦它开始为“toReturn”分配值，它就会为其分配一个大小为 0 的空列表。当我检查我的出租链接列表时，那里有正确的值，但由于某种原因，它没有正确分配给我的变量： （“toDelete”也是如此，但这不是一个列表，它是我的类 Rental 的一个实例。（链接列表是一个出租列表，其中包含一个视频链接列表）

没有错误被抛出......它有点难以解释，如果您需要更多信息，请告诉我，我会澄清。

我很茫然，可能是因为我没有正确地遍历我的链表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:44:04.910

代替

```
if (cust.getName() == rentals.get(i).getRentee().getName()){ 
```

经过

```
if (cust.getName().equals(rentals.get(i).getRentee().getName())){ 
```

您不能将字符串与`==`（除非您的算法可以确保这是同一个实例，但几乎从来没有这种情况）。

但失踪`equals`并不是唯一的错误。它可能在内部`getRented()`或其他地方（你没有展示你用`toReturn`and做什么`toDelete`，所以不清楚你是否在这里没有问题）。

现在，要继续追逐你的错误，你应该要么

*   调试，并在循环中放置一个断点以检查此时的状态`rentals.get(i)`和执行情况
*   如果不能调试，就放很多System.println，这样你就知道你有什么了...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:55:18.133

可能，您的`if`病情不止一次受到打击。首先，检查这是否真的发生。如果是这样，请检查您的逻辑并确定您是想在第一次出现还是最后一次停止（这种情况似乎是后者）。

如果您想在第一次出现时停止，请中断迭代：

```
for(int i = 0; i < rentals.size(); i++){
    if(cust.getName() == rentals.get(i).getRentee().getName()){
        toReturn = rentals.get(i).getRented();
        toDelete = rentals.get(i);
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:03:21.670

我赞成dystroy的答案，因为不正确的字符串比较总是错误的。

但是因为这会以不同的方式失败（客户姓名与承租人姓名不匹配），我想知道您的问题是否真的是由以下任一原因引起的：

1.  有问题`getRented()`；或者
2.  cust 在通话时有一个空名称，这将匹配具有空名称的 Rentee。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:18:27.360

```
for(int i = 0; i < rentals.size(); i++){ 
    if(cust.getName().equals( rentals.get(i).getRentee().getName())){ 
        toReturn.addAll(rentals.get(i).getRented());  
         //assumming it returns the list of Video object
        toDelete = rentals.get(i); 
    } 
} 
```

# gnuplot - gnuplot pm3d 得到白线

> ID：12679921
> 
> 赞同：5
> 
> 时间：2012-10-01T19:41:32.283
> 
> 标签：gnuplot, spectrogram

我用 gnuplot 4.6 版绘制了一个频谱图。我在这里确保它是最新版本： [http ://www.gnuplot.info/download.html](http://www.gnuplot.info/download.html)

Gnuplot 是从 Debian 存储库安装的。

右侧的情节区域和比例包括奇怪的白线。他们似乎将数据分开。在具有密集数据的绘图区域上，它们看起来像方格图案：

![http://imageshack.us/a/img822/6219/linese.png](../Images/1c0fa8f1e754bc7cc3e36e6000a1cf5c.png)

线条在刻度上不太明显，但它们也在那里。秤上只有水平线。

我认为这是监视器色域或其他东西的情况，但线条也出现在`pdf monochrome`.

我的代码是：

```
#!/usr/bin/gnuplot

set term pdf
# set style fill noborder # checked with and without this line
set output "../results1/fft.pdf"
set pm3d map
splot "../results1/fft.dat" 
```

正如你所读到的，我尝试使用选项 noborder，但无论是否存在线条都存在。

示例数据可以是：

```
0 1 3
0 2 3
0 3 4
0 4 2
0 5 2
0 6 3
0 7 4
0 8 3

1 1 3
1 2 2
1 3 4
1 4 2
1 5 2
1 6 3
1 7 4
1 8 4

2 1 2
2 2 4
2 3 4
2 4 3
2 5 2
2 6 4
2 7 2
2 8 2

3 1 2
3 2 3
3 3 3
3 4 4
3 5 2
3 6 2
3 7 2
3 8 2 
```

你知道如何摆脱这条线吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:14:41.870

这也困扰了我一段时间。我最好的解决方法是受[这篇文章](http://www.gnuplotting.org/color-maps-and-the-scale-of-axes/)的启发。基本上你可以使用

```
plot "datafile" with image 
```

而不是`splot`命令。数据的绘制方式存在一些细微的差异，但这会创建一个 .pdf，在彩色区域之间没有那些令人讨厌的间隙，并且文件要小得多。

请注意，这只适用于形成矩形网格的数据！如果数据文件是矩阵格式（除了数据点的数量之外没有 x 或 y 数据），对于您的示例来说，这将是

```
3 3 2 2
3 2 4 3
... 
```

（每个块的第一行的 z 值构成第一行等）您可以使用命令

```
plot 'datafile' ($1*xincr - x0):($2*yincr - y0):3 matrix with image 
```

parens 中的内容是可选的，但允许您将结果图缩放到正确的 x 和 y 值。（xincr 是一个 gnuplot 变量，您必须为数据中的 x 增量设置，x0 是 x 偏移量等）

如果这导致绘图周围出现白色间隙，请使用绘图命令一次，重新缩放轴，然后再次绘图，例如

```
set terminal unknown
plot 'datafile' ($1*xincr - x0):($2*yincr - y0):3 matrix with image
set xr[GPVAL_DATA_X_MIN:GPVAL_DATA_X_MAX]
set yr[GPVAL_DATA_Y_MIN:GPVAL_DATA_Y_MAX]
set output "fft.pdf"
replot 
```

**第二个答案**

我发现这种效果取决于 pdf-viewer。例如，它出现在 linux 下的 evince 中，但不是 okular。根据您的应用程序，您可以使用不同的查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T22:58:22.023

对我来说，更换

```
set pm3d map 
```

和

```
unset surface; set pm3d at b; set view map 
```

纠正了这个问题。在 gnuplot 4.6 patchlevel 2 和 gnuplot 5.4 patchlevel 1 上测试。

我无法解释原因，但手册显示

```
set pm3d map 
```

是一个捷径

```
 set pm3d at b; set view map; set style data pm3d; set style func pm3d 
```

简单的测试表明，如果包含任何“设置样式”指令，就会出现问题。它们的移除纠正了问题，但使表面可见 - 因此是“未设置的表面”。

# sql - 什么是查看 VIEW 语句的 SQLPlus 命令？

> ID：12679923
> 
> 赞同：6
> 
> 时间：2012-10-01T19:41:39.640
> 
> 标签：sql, oracle

我刚刚发现我正在运行的查询之一不是来自实际表，而是来自视图。

我想在那个 VIEW 中查看 SQL 查询。如果我尝试`describe`我得到一个对象不存在错误。当我从视图中选择时，我得到了一些数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T19:55:42.423

要查看视图底层的 SQL，您需要查询数据字典。尝试

```
select view_name, text from user_views where view_name = 'MY_VIEW'; 
```

如果您的用户不拥有该视图，请尝试`all_views`；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:51:40.633

如果您想查看用于创建视图的实际 SQL，可以使用 function [`dbms_metadata.get_ddl`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#i1019414)，它返回一个 clob：

```
select dbms_metadata.get_ddl ( 'VIEW'
                             , 'MY_VIEW' -- view name
                                )
  from dual 
```

如果您需要，还有更多选择。

如果你只想像往常一样[描述它。](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve019.htm#SQPUG040)如果这不起作用，则说明您使用了错误的架构或对象不存在：

```
DESC MY_VIEW 
```

如果您使用的架构不正确，您可以使用：

```
select dbms_metadata.get_ddl ( 'VIEW'
                             , 'MY_VIEW', -- view name
                             , 'MY_SCHEMA'
                                )
  from dual 
```

或者

```
DESC MY_SCHEMA.MY_VIEW 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:17:22.383

或者更好的是，单击 SQLDeveloper 左侧连接窗格中的视图。视图打开后，单击 SQL 选项卡以查看其上的基础 SQL。查找视图正在使用的用户/模式

```
select owner 
   from all_objects 
   where object_name='VIEW_NAME' and object_type='VIEW'; 
```

# json - 使用 JQGrid 的本地数据

> ID：12679926
> 
> 赞同：0
> 
> 时间：2012-10-01T19:42:16.423
> 
> 标签：json, jqgrid

我在 JQGrid 中使用了一些本地定义的 JSON 数据。我的数据如下所示：-

```
{"total_rows":1662,"offset":0,"rows":
    [
    {"id":"338b79f07dfe8b3877b3aa41a5205e75","key":"2004-03-05T03:59:00+00:00","value":             {"date":"2004-03-05T03:59:00+00:00","signature":"sig1","name":"name1"}},
    {"id":"338b79f07dfe8b3877b3aa41a540cf58","key":"2004-03-05T03:59:00+00:00","value": {"date":"2004-03-05T03:59:00+00:00","signature":"sig2","name":"name2"}},
    {"id":"338b79f07dfe8b3877b3aa41a566ca42","key":"2004-03-05T03:59:00+00:00","value": {"date":"2004-03-05T03:59:00+00:00","signature":"sig3","name":"name3"}},
    {"id":"15add79dd3efec4f34786d5f6a33ec5c","key":"2004-07-26T14:03:00+00:00","value"  :{"date":"2004-07-26T14:03:00+00:00","signature":"sig4","name":"name4"}}
    ] 
} 
```

我的 JQGrid 定义如下所示：

```
 datatype: "local",
            height: 100,
            colNames:['key', 'signature', 'name'],
            colModel:[
                {name:'key',index:'key', width:80}
                {name:'value.signature',label:'Signature', width:100, align:"right"},
                {name:'value.name',index:'name', width:80}

            ],

            caption: "Load Once Example" 
```

但是，value.signature 和 value.name 字段的列始终为空白。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:29:32.463

好的 - 在这里找到了答案[！](http://shanemccall.blogspot.co.uk/2012/02/json-and-jqgrid-example.html)

工作完美！

# php - Mysql插入值错误

> ID：12679937
> 
> 赞同：0
> 
> 时间：2012-10-01T19:42:38.327
> 
> 标签：php, mysql

所以我正在使用一个非常旧的站点，客户不会让我将它升级到任何类型的 PDO。无论如何，我必须使用 mysql 查询，它真的开始让我沮丧。我似乎无法让它工作：

```
$array = array('1' => 1, '2' => 2);

$values = "({$array['1']}, 2, 'data3', 4, 5)";

if ($moreData){
    $values = $values.", ({$array['6']}, 7, 'data8', 9, 10)";
}

$this->db->query("INSERT INTO " . DB_PREFIX . "customer_reward ".
                 "('field1','field2','field3','field4','field5') ".
                 "VALUES ".$values); 
```

任何帮助将不胜感激。

更新：

这是错误消息：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''field1','field2','field3','field4','field5') VALUES (1, 2, 'data3' at line 1<br />Error No: 1064<br />INSERT INTO table ('field1','field2','field3','field4','field5') VALUES (1, 2, 'data3', 4, 5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:54:01.410

查询中的字段名称不应包含在单引号内。他们要么不需要引号，要么在反引号内。

当您尝试输入一些整数值时，您还需要确保字段类型与数据类型匹配。

# postgresql - Postgres 没有主键的缺点

> ID：12679940
> 
> 赞同：57
> 
> 时间：2012-10-01T19:42:53.693
> 
> 标签：postgresql

在 Postgres 中没有表的主键有什么缺点吗？由于无论如何所有数据都无序存储在堆中，主键是否只是同时强制执行唯一键和索引的一种方式？或者，与没有主键的表相比，主键在表中提供了一个基本特性吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-01T20:33:40.583

根据 Postgres 文档（[http://www.postgresql.org/docs/9.2/static/sql-createtable.html](http://www.postgresql.org/docs/9.2/static/sql-createtable.html)）：

> 从技术上讲，PRIMARY KEY 只是 UNIQUE 和 NOT NULL 的组合，但是将一组列标识为主键还提供了有关架构设计的元数据，因为主键意味着其他表可以依赖这组列作为行的唯一标识符。

根据我的经验，我创建了很多没有它们的表。但是一些复制解决方案需要有一个主键，或者每行只有一个列标识符。

# r - 显示 R 包中函数的源代码

> ID：12679941
> 
> 赞同：4
> 
> 时间：2012-10-01T19:42:58.623
> 
> 标签：r, s4

> **可能重复：**
> [R：显示包中 S4 函数的源代码](https://stackoverflow.com/questions/5937832/r-show-source-code-of-an-s4-function-in-a-package)

我下载了一个包 ( `GEOquery`) 并正在使用其中的一些功能。其中一个叫做`Table`，据我了解，它能够将`S4`数据集制成表格。

例如

```
> summary(GDS2853) # GDS2853 is a dataset I downloaded from NCBI 
Length  Class   Mode 
     1    GDS     S4 
```

`getAnywhere(Table)`节目

```
> getAnywhere(Table)
A single object matching ‘Table’ was found
It was found in the following places
  package:GEOquery
  namespace:GEOquery
with value

function (object) 
standardGeneric("Table")
<environment: 0x06ad5268>
attr(,"generic")
[1] "Table"
attr(,"generic")attr(,"package")
[1] "GEOquery"
attr(,"package")
[1] "GEOquery"
attr(,"group")
list()
attr(,"valueClass")
character(0)
attr(,"signature")
[1] "object"
attr(,"default")
`\001NULL\001`
attr(,"skeleton")
function (object) 
stop("invalid call in method dispatch to \"Table\" (no default method)", 
    domain = NA)(object)
attr(,"class")
[1] "standardGeneric"
attr(,"class")attr(,"package")
[1] "methods" 
```

我想学习的代码，`Table`以便我可以知道如何将 GDS 数据集制成表格，`data.frame`并且`as.list`不能强制`S4`上课 - 尽管我可以通过例如，将 GDS 数据集制成表格，

```
GDS_table=Table(GDS2853)[1:20000,1:20] #GDS2853 contains 20 columns
and approx 17000 rows 
```

我尝试了`getMethods`其他帖子中建议的方法，但以下是我得到的

```
> getMethod("Table")
Error in getMethod("Table") : 
  No method found for function "Table" and signature 
```

我还尝试通过输入来指定“位置”，`package=:GEOquery`但显然`package`是一个未使用的参数。

想知道我做错了什么，以至于看不到`Table`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:10:35.210

从您发布的输出来看，它看起来像是`Table`S4 通用的。

要查看其 S4 方法的列表，请使用`showMethods()`. 要查看特定方法，请使用`getMethod()`，传入您想要的方法的“签名”以及函数的名称。（“签名”是由参数的类组成的字符向量，泛型根据该类`Table`执行其方法分派。即，如果您将这样做`Table(GDS2853)`，则签名可能是`class(GDS2835)`）

**下面是获取sp**包中 S4 方法代码的示例：

```
library(sp)

showMethods("overlay")
# Function: overlay (package sp)
# x="SpatialGrid", y="SpatialPoints"
# x="SpatialGrid", y="SpatialPolygons"
# x="SpatialGridDataFrame", y="SpatialPoints"
# x="SpatialGridDataFrame", y="SpatialPolygons"
# x="SpatialPixels", y="SpatialPoints"
# x="SpatialPixelsDataFrame", y="SpatialPoints"
# x="SpatialPoints", y="SpatialPolygons"
# x="SpatialPointsDataFrame", y="SpatialPolygons"
# x="SpatialPolygons", y="SpatialGrid"
# x="SpatialPolygons", y="SpatialPoints"

getMethod("overlay", signature=c("SpatialGrid", "SpatialPoints")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T01:46:54.363

在您的示例中，它将是：

```
getMethod("Table", "GEOData") 
```

您可能还对如何获取 S4 方法的帮助文档感兴趣，该方法需要同样不寻常的调用：

```
method?Table("GEOData") 
```

通常，使用 S4，您将需要

*   函数名
*   它所针对的对象的类（签名）

如果您对后者感到迷茫：

```
class(object) 
```

将返回课程，您还可以执行以下操作：

```
showMethods("Table") 
```

显示所有当前可用的方法。或者，我发现我经常使用：

```
findMethods("Table") 
```

原因是`findMethods`返回特定函数的所有方法的列表。类可以有很长的名称，我发现我经常输入错误/大写错误，因此作为快速破解，`findMethods("functionname")`很方便。当然，由于打印的列表可能很长，因此它也可以让您使用许多方法的通用函数。

# java - 最短剩余时间优先：Java多线程

> ID：12679943
> 
> 赞同：7
> 
> 时间：2012-10-01T19:43:07.103
> 
> 标签：java, multithreading, cpu, scheduling, simulation

我正在尝试在 java 中模拟 CPU 调度算法并使用多线程。我已经成功实现了 FCFS（先到先服务）和 SJF（最短工作优先）。但问题是当我开始想到 SRTF（最短剩余时间优先）时，它是 SJF 的一种抢先形式。我正在使用以下模型：

*   CPU 的一个线程，它有一个`CLOCK`变量，每个`100ms`. 我有一个`boolean isAvailable;`标志让进程在开始执行之前检查 CPU 是否可用。
*   Long Term Scheduler(LTS) 的线程，它将进程从进程列表推送到就绪队列。
*   Short Term Scheduler (STS) 的线程，它从 ReadyQueue 中获取一个进程并将其分配给 CPU。
*   一旦一个进程被 STS 从 ReadyQueue 中删除以执行，该进程就会检查`isAvailable`CPU 的标志。如果`true`，它将标志设置为 false 并开始执行（为此我只是让线程休眠，`(100 * burstTime) ms`因为这只是一个模拟）。否则，该过程只是忙于等待： `while(CPU.isAvailable != true);`。

我事先有进程列表以及它们的到达和突发时间。在我模拟非抢占式调度（FCFS 和 SJF）之前没关系。但是当我尝试使用 SRTF 时，我无法找到一种方法来抢占当前正在运行的进程线程。

对于 SRTF，我知道从 ReadyQueue 中选择下一个进程的方法。一旦我从队列中选择了一个进程，我可以尝试将`isAvailable`标志设置为`false`，但是我如何知道最初执行的是哪个线程？而且由于我没有使用太多同步黑白线程，因此我将有多个进程使用该`CPU`线程。它变得有点乱了。请帮忙。谢谢！

这是进程的代码：

```
enum State {ARRIVED, WAITING, READY, RUNNING, EXECUTED}
public class Process implements Runnable
{
    int pid;
    int arrTime;
int burstTime;
int priority;
long startTime;
long endTime;
State procState = null;

Process(int pid, int arrTime, int burstTime, int priority)
{
    this.pid = pid;
    this.arrTime = arrTime;
    this.burstTime = burstTime;
    this.priority = priority;
    this.procState = State.ARRIVED;
    this.startTime = 0;

    this.endTime = 0;    /* I also considered adding a timeElapsedUnderExecution
 attribute to the process. So I can check after every cycle if the CPU is still available
 and keep incrementing the time elapsed. Once the timeElapsed becomes same as burstTime, i
 stop the process. Or if after a cycle, the CPU is not available, i know from where to
 resume my Process. Is this the way to go ? */

    }

boolean isReady()
{
    if((this.arrTime <= CPU.CLOCK) && (this.procState == State.ARRIVED))
        return true;
    else return false;
}

@Override
public void run() {
    // TODO Auto-generated method stub
    if(this.procState == State.READY)
        this.procState = State.WAITING;

    while(!CPU.isAvailable());

    try 
    {
        this.procState = State.RUNNING;
        System.out.println("Process " + pid + " executing...");
        this.startTime = CPU.CLOCK;
        System.out.println("Process " + this.pid + ": Begins at " + this.startTime);
        Thread.sleep(this.burstTime * 100);
        this.endTime = CPU.CLOCK;
        System.out.println("Process " + this.pid + ": Ends at " + this.endTime);
        this.procState = State.EXECUTED;

    }
    catch (InterruptedException e) 
    {
        // TODO Auto-generated catch block
        System.out.println("Interrupted: " + pid);
        e.printStackTrace();
    }
    }
} 
```

CPU的代码：

```
 import java.util.LinkedList;
    import java.util.Queue;

    public class CPU implements Runnable

{
    static Long CLOCK = new Long(0);
    static LinkedList<Process> ReadyQ = new LinkedList<Process>();
private static boolean isAvailable = true;
static boolean done = false;

public static boolean isAvailable() {
    return isAvailable;
}

public static void setAvailable(boolean isAvailable) {
    CPU.isAvailable = isAvailable;
}

static void incrementCLOCK()
{
    LTS.checkArrival();
    CPU.CLOCK++;
    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("Clock Tick: " + CPU.CLOCK);
}

@Override
public void run() {
    // TODO Auto-generated method stub
    System.out.println("CPU starts.!!!");
    while(CPU.done != true)
        synchronized(CPU.CLOCK)
        {
            incrementCLOCK();
            }
    }
} 
```

LTS 的代码：

```
public class LTS implements Runnable 
{
    private static Process[] pList = null;
    private final int NUM;
    static Integer procStarted;
    static Integer procFinished;
    static boolean STSDone = false;

LTS(Process[] pList, int num)
{
    this.NUM = num;
    LTS.pList = pList;
}

static void checkArrival()
{
    if(pList == null) return;
    for(int i = 0; i < pList.length; i++)
        if(pList[i].isReady())
        {
            pList[i].procState = State.READY;
            System.out.println("Process " + pList[i].pid + " is now ready.");
            CPU.ReadyQ.add(pList[i]);
        }
}

@Override
public void run() {
    // TODO Auto-generated method stub
    System.out.println("Long Term Scheduler starts.!!!");
    while(LTS.STSDone != true)
    {
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    System.out.println(LTS.STSDone);
    System.out.println("LTS ends.!!!");
        CPU.done = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:31:42.653

问题 1 是您的共享状态不是线程安全的。即使像布尔值这样简单的东西也需要正确的线程原语来确保跨线程的可见性（又名“易失性”）。

# javascript - 尝试用空格重命名 MongoDB 文档字段

> ID：12679950
> 
> 赞同：2
> 
> 时间：2012-10-01T19:43:25.413
> 
> 标签：javascript, mongodb, mongodb-shell

我有点笨，在 MongoDB 中创建了一个集合，键名中有空格：

```
{
        "_id" : ObjectId("5065f84d00ea10c01e00003f"),
        "DateTime" : ISODate("2012-09-27T15:19:00Z"),
        "Port Name" : "CL3-J",
        "Port Number" : "40",
        "Avg I/O /sec" : "2024.0",
        "array_serial" : "xxxxx"
} 
```

我正在尝试在 mongo shell 上定义一个函数来重命名它们：

```
var metricNames = ["Processor Busy %",
                      "Avg I/O /sec",    
                      "Avg Xfer /sec"];

var renameFields = function(collection) {
  var record = db[collection].findOne({});
  var myMetric;

  for (var key in record) {
    if(metricNames.indexOf(key) !== -1){
      myMetric = metricNames[metricNames.indexOf(key)];
      print(myMetric);
      break;
    } else {
      continue;
    }
  }

  db[collection].update( { }, { $rename : { 
                                            'DateTime'    : 'datetime',
                                            'Port Name'        : 'port_name',
                                            'Port Number'      : 'port_number',
                                            'Adaptor ID'       : 'adaptor_id',
                                            'Processor ID'     : 'processor_id',
                                            'Processor Type'   : 'processor_type',
                                             myMetric          : 'metric' } }, false, true );

} 
```

根据指定的集合，指标可能是三个之一......问题是除了“myMetric”之外的所有指定字段都被正确重命名，指标字段仍然是带有空格的原始字段。

有任何想法吗？

* * *

...更新。

似乎具有“Avg Xfer /sec”指标的集合已正确重命名为“metric”，但具有“Avg I/O /sec”或“Processor Busy %”的集合却没有。我不完全确定为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:22:57.070

这是因为重命名更新正在寻找一个名为`'myMetric'`to rename 的属性，而不是一个名为`myMetric`的值。您需要以编程方式构建重命名对象：

```
var rename = { 
  'DateTime'    : 'datetime',
  'Port Name'        : 'port_name',
  'Port Number'      : 'port_number',
  'Adaptor ID'       : 'adaptor_id',
  'Processor ID'     : 'processor_id',
  'Processor Type'   : 'processor_type'
};
rename[myMetric] = 'metric';
db[collection].update( { }, { $rename : rename }, false, true ); 
```

# c# - WCF - 无法创建抽象类

> ID：12679954
> 
> 赞同：3
> 
> 时间：2012-10-01T19:43:47.167
> 
> 标签：c#, wcf, rest, soap, abstract

我正在编写一个 WCF Web 服务并传入一个复杂类型作为方法的参数。复杂类型如下所示：

```
 [DataContract(Namespace = "")]
public class MyRequest 
{
    [DataMember()]
    public string TransactionId { get; set; }

    [DataMember(IsRequired = true)]
    public bool IsRollback { get; set; }

    [DataMember(IsRequired = true)]
    public OrderType OrderType { get; set; }

    [DataMember(IsRequired = true)]
    public ICustomerId CustomerId { get; set; }

    [DataMember()]
    public long OrderId { get; set; }

    [DataMember()]
    public AnotherComplexType PurchaseInfo { get; set; } 
```

网络服务方法如下所示：

```
[ServiceKnownType(typeof(CustomerIdByName))]
[ServiceKnownType(typeof(CustomerIdByAccount))]
public OrderResult Execute(MyRequest order) {
} 
```

界面如下所示：

```
[KnownType(typeof(CustomerIdByAccount))]    
[KnownType(typeof(CustomerIdByName))]
public interface ICustomerId{

string GetId();
} 
```

当我使用 SOAP 端点发出请求时，一切正常。但是当将请求传递到 REST 端点时，我得到了序列化错误。

这是我正在使用的请求

```
<MyRequest>
<CustomerId>
<AccountId>59251</AccountId>
</CustomerId>
<IsRollback>false</IsRollback>
<OrderId>0</OrderId>
<OrderType>OrderSubscription</OrderType>
<PurchaseInfo>
<ObjectId>196521</ObjectId>
</PurchaseInfo>
<TransactionId>ABC123</TransactionGuid>
</MyRequest> 
```

由于我在这一点上卡住了太久，所以我将 ICustomerId 成员更改为实现 ICustomerId 的抽象类。SOAP 端点再次正常工作，但将请求发送到其余端点我收到一条错误消息，指出“无法创建抽象类”

我在这里错过了什么或做错了什么？

这是因为接口嵌套在复杂类型中而不是webservice方法的直接参数而失败吗？我使用了接收接口作为参数的 web 服务，并且使用 KnownType 装饰器它们工作得很好。同样的问题也适用于抽象类，这是否不起作用，因为抽象类嵌套在 MyRequest 复杂类型的成员中？

这是我收到的错误消息：

> 命名空间中的元素 CustomerId 不能将子内容反序列化为对象。请使用 XmlNode[] 反序列化这种 XML 模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:20:14.383

您是否尝试过将界面装饰为 RESTful 方法？

```
[ServiceContract]
public interface IMyRequest
{
    [OperationContract]
    [WebInvoke(
       UriTemplate = "Requests/GetID",
       Method = "POST",
       BodyStyle = WebMessageBodyStyle.Wrapped)]
    string GetId(MyRequest myRequest);
... 
```

还：

*   确保 [DataMember] 属性与您的请求负载匹配。在您的 XML 请求负载中传递的所有内容都必须由服务中的序列化程序捕获。我建议保持命名相同，但您可以使用 [DataMember(name="MyProperty")] 对其进行映射。此外，您的 [DataContract] 必须映射为匹配 XML 有效负载的父节点的名称，例如 [DataContract(Name="MyRequest")]，但前提是类的名称与 xml 节点不同。这样做，它会将您的 xml 反序列化为服务器端对象/dto
*   您收到的错误听起来像是在抱怨 DataContract 内部的复杂类型。您的复杂类型需要像您的 MyRequest 类型一样进行序列化修饰。
*   还要确保您的 REST 端点绑定到 webHttpBinding

# c - fwrite 和 fread 的问题

> ID：12679961
> 
> 赞同：0
> 
> 时间：2012-10-01T19:44:14.207
> 
> 标签：c, binary, fwrite, fread

我的 fwrite() 和 fread() 处理二进制文件时遇到问题是我的源代码，而最底层是我的读写。现在，当我运行它时，它正在返回“杰克”，没有别的。我被告知要编写一个转储缓冲区函数来处理二进制字符。此外，这里还有文本文件，我正在写入一个名为 info.bin 的空白文件。PS 我知道将 zip 保存为 int 是不好的做法，但这是我的教授所要求的。

文件：

```
mike|203-376-5555|7 Melba Ave|Milford|CT|06461
jake|203-555-5555|8 Melba Ave|Hartford|CT|65484
snake|203-555-5555|9 Melba Ave|Stamford|CT|06465
liquid|203-777-5555|2 Melba Ave|Barftown|CT|32154 
```

代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#define LINE 80
#define RECORDS 10

struct info{
  char name[100];
  char number[100];
  char address[100];
  char city[100];
  char state[100];
  int zip;
};

void dump_buffer(void *buffer, int buffer_size)
{
  int x;

  for(x = 0; x < buffer_size; x++)
  {
    printf("%c",((char *)buffer)[x]);
  }
}

int i, j, seeker;

int main(int argc, char* argv[])
{
  char *buffer;

  struct info input_records[RECORDS];
  int nrecs = 0;
  unsigned long fileLen;
  char line[LINE];
  FILE *fp = NULL;
  FILE *fpbin = NULL;
  FILE *fpread = NULL;

  if (argc != 2) 
  {
    printf ("ERROR: you must specify file name!\n");
    return 1;
  }
  /* Open file */
  fp = fopen(argv[1], "r");
  if (!fp) 
  {
    perror ("File open error!\n");
    return 1;
  }

  while (!feof (fp)) {
    fgets(line, sizeof(line),fp);
    char* tok =  strtok(line, "|");

    while(tok != NULL)
    {
      strcpy(input_records[nrecs].name, tok);
      tok = strtok(NULL, "|");
      strcpy(input_records[nrecs].number, tok);
      tok = strtok(NULL, "|");
      strcpy(input_records[nrecs].address, tok);
      tok = strtok(NULL, "|");
      strcpy(input_records[nrecs].city, tok);
      tok = strtok(NULL, "|");
      strcpy(input_records[nrecs].state, tok);
      tok = strtok(NULL, "|");
      input_records[nrecs].zip = atoi(tok);
      tok = strtok(NULL, "|");
    }
    nrecs++;
  }

  fpbin = fopen("info2.bin", "wb");
  if (!fp) 
  {
    perror ("File open error!\n");
    return 1;
  }

  for(i = 0; i < 4; i++)
  {

   fwrite(&input_records[i], sizeof(struct info), 200000, fpbin);

  }

  fclose(fpbin);

  fpread = fopen("info2.bin", "rb");

  fseek(fpread, 0, SEEK_END);
  fileLen = ftell(fpread);
  fseek(fpread, 0, SEEK_SET);

  buffer = (char *)malloc(sizeof(struct info));

  fread(buffer, fileLen, 1, fpread);

  dump_buffer(buffer, sizeof(buffer));

  fclose(fpread);

  fclose(fp);
  free(buffer);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T20:06:50.127

```
fwrite(&input_records[i], sizeof(struct info), 200000, fpbin); 
```

您刚刚告诉`fwrite`将`200000 * sizeof(struct info)`字节写入文件，从`input_records[i]`. 访问的内存远远超出分配的内存`input_records`，行为未定义，但分段错误并非不可能。我实际上很惊讶它显然没有为你崩溃。

```
buffer = (char *)malloc(sizeof(struct info));

fread(buffer, fileLen, 1, fpread); 
```

您正在尝试将`fileLen`字节读入 size 的缓冲区`sizeof(struct info)`。如果`fileLen > sizeof(struct info)`，那又是未定义的行为，并且如果`fileLen`足够大，可能会崩溃。

您应该每次都让`fwrite` *一个*大小的对象`sizeof(struct info)`，并且应该`fileLen`为您读取的缓冲区分配字节（或读取大小的块`sizeof(struct info)`）。并且您应该检查它们的返回值`fwrite`并`fread`了解它们是否成功写入/读取所需数据并适当地处理故障。

```
fpbin = fopen("info2.bin", "wb");
if (!fp) 
{ 
```

你在这里检查错`FILE*`了，你根本不检查`fpread`。

此外，您将错误的计数传递给`dump_buffer`,

```
dump_buffer(buffer, sizeof(buffer)); 
```

`buffer`是 a `char*`， a`sizeof buffer`的大小也是如此`char*`，通常是四个或八个字节。您应该在那里传递分配的缓冲区大小。

而且，在读取原始文件时，

```
while (!feof (fp)) {
    fgets(line, sizeof(line),fp); 
```

`feof(fp)`仅在到达文件末尾时尝试读取后才变为真，您应该将循环条件更改为

```
while(fgets(line, sizeof line, fp) != NULL) { 
```

最后，如果输入文件包含格式错误的数据或太长的行，您的标记化代码将严重失败。您还应该在此处添加检查，以免将 a 传递`NULL`给`strcpy`or `atoi`。

# list - 存储化学式的最有效方法是什么？

> ID：12679964
> 
> 赞同：0
> 
> 时间：2012-10-01T19:44:21.260
> 
> 标签：list, collections, hashset

我目前有一个`NElement`对象的 HashSet。每个`NElement`对象都有一个唯一的`Element`字段和一个整数 n。

以下是我需要对数据执行的 2 项操作：

1.  遍历集合中的所有值。
2.  使用`Element e`，在集合中搜索具有的实例`NElement`并`e`对其进行处理。

这是＃2的示例：

```
public void Add(NElement ne) {
    foreach(NElement ne2 in elements) { //elements is the HashSet
        if(ne2.element == ne.element) {
            ne2.Number += ne.Number; //Number is the integer
            return;
        }
    }
    elements.Add(ne);
} 
```

我认为有一种更好的方法可以使用 List 或 Set 以外的集合来完成此任务。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:37:57.007

一个可能的解决方案是有点不同的设计。分子式由一堆元素以及这些元素的数量组成。因此，一个可能的解决方案是拥有一个`MolecularFormula`包装此信息的类，该类基于 `Map<Element, int>`.

一个可能的例子：

```
public class MolecularFormula
{
    private Map<Element, int> elements = new HashMap<Element, int>();

    //... Constructors etc
    //A list to iterate through all values
    public List<NElement> getElements()
    {
        List<NElement> retList = new ArrayList<NElement>();
        foreach(Element e : elements)
        {
            retList.put(new NElement(e, elements.get(e));
        }
        return retList;
    }

    //To add something
    public void add(Element e, int num)
    {
        if(elements.containsKey(e))
        {
            int newNum = elements.get(e) + num;
            elements.remove(e);
            elements.put(e, newNum);
        }
        else
        {
            elements.put(e, num);
        }
    }
} 
```

这是匆忙拼凑起来的，根本不是很有效，但它应该让您对可能的选择有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:11:17.783

尝试使用[SMARTS](http://www.daylight.com/dayhtml_tutorials/languages/smarts/index.html "日光SMARTS解释")、[SMILES](http://www.daylight.com/dayhtml/doc/theory/theory.smiles.html "日光微笑的解释")、[InChi](http://www.iupac.org/home/publications/e-resources/inchi.html "IUPAC InChi 教程")或[ASL](http://www.schrodinger.com/kb/1289 "薛定谔对 ASL 的解释")。我相信前两个是开源的。InChi 由 IUPAC 维护，并且可以很好地散列以供数据库使用。ASL 是[Schrödinger, Inc](http://www.schrodinger.com/ "官方网站")专有的，但如果您已经在使用 Schrödinger 软件，我建议直接使用他们的 Python API。

使用这些工具中的任何一个，您都可以在 SMARTS/SMILES/ASL 描述的分子中找到由特定 SMARTS/SMILES/ASL 字符串描述的官能团（或原子）。

# mysql - 用于 n * (n - 1) / 2 算法的 MySQL 架构

> ID：12679977
> 
> 赞同：7
> 
> 时间：2012-10-01T19:45:30.423
> 
> 标签：mysql, database-design, architecture, scalability

我目前正在开发一个网站，用户可以在其中根据属性（年龄、身高、城镇、教育等）搜索其他用户。我现在想在用户配置文件之间实现某种评级。评级是通过其自己的算法根据 2 个给定配置文件之间的相似性计算的。例如，用户 A 对用户 B 的评级“匹配评级”为 85，对用户 C 的评级“匹配评级”为 79。B 和 C 的评分为 94，依此类推....

用户应该能够搜索某些属性并按评级过滤结果。

由于评级因个人资料而异，而且还取决于进行搜索的用户，所以我不能简单地在我的用户表中添加一个字段并使用 ORDER BY。到目前为止，我想出了2个解决方案：

*   我的第一个解决方案是每晚进行一次批处理作业，计算每个可能的用户组合的评分并将其存储在单独的表中（user1、user2、rating）。然后我可以将此表与用户表连接起来，并按评级对结果进行排序。在做了一些数学运算后，我发现这个解决方案不能很好地扩展。

    根据公式 n * (n - 1) / 2，10 个用户有 45 种可能的组合。对于 1.000 个用户，我突然不得不在我的评分表中插入 499.500 个评分组合。

*   第二种解决方案是让 MySQL 保持不变，并在我的应用程序中即时计算评级。这也不能很好地扩展。假设搜索应该只向 UI 返回 100 个结果（最高评分在顶部）。如果我有 10.000 个用户，并且我想搜索居住在纽约的每个用户（按评分排序），我必须将居住在纽约的每个用户加载到我的应用程序中（比如说 3.000），应用算法然后只返回前 100 名给用户。通过这种方式，我从数据库中加载了 2.900 个无用的用户对象，并在算法上浪费了 CPU，而没有对其进行任何操作。

有什么想法可以在我的 MySQL 数据库或 Web 应用程序中进行设计，以便用户可以与其他每个用户进行单独评分，从而使系统扩展到几千个用户之外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:08:16.900

如果您必须将每个用户与其他每个用户进行匹配，那么无论您做什么，算法都是 O(N^2)。

如果您可以利用某种一维“指标”，那么您可以尝试将每个用户与单个合成值相关联。但这很尴尬，而且可能是不可能的。

但是您可以做的是注意哪些用户需要*更改*他们的配置文件（只要匹配所基于的任何参数发生更改）。此时，您可以只为这些用户批量重新计算表，从而在 O(N) 中工作：如果您有 10000 个用户并且只有 10 个需要重新计算，则您必须检查 100,000 条记录而不是 100,000,000 条记录。

其他策略是只对比较有可能被比较的记录运行主要算法：在你的例子中，“同一个城市”。或者在更新记录时（但这需要存储（user_1，user_2，ranking，last_calculated），只重新计算那些排名高、非常旧或从未计算过的记录。排名最低的匹配不太可能改变太多以至于它们浮动短时间内登上顶峰。

**更新**

问题还在于 O(N^2)*存储空间*。

如何减少这个空间？我想我可以看到两种方法。一是根本*不*把一些信息放在匹配表*中*。“匹配”功能越是刚性和陡峭越有意义；一万个“好的匹配”意味着*匹配*的意义很小。因此，当 User1 更改一些关键数据时，我们仍然需要重新计算大量数据，以防它将 User1 的一些“no-no”匹配带回“maybe”区域。但是我们会为每个用户保留一个较小的活跃匹配集团。

存储量仍将呈二次方增长，但不那么陡峭。

另一种策略是*重新计算*匹配，然后我们需要开发一些方法来快速选择哪些用户可能有很好的匹配（从而限制 JOIN 检索的行数），以及一些快速计算的方法匹配; 这可能需要以某种方式将 User1 和 User2 之间的匹配重写为 DataUser1 的子集 DataUser2 的一个非常简单的函数（可能使用辅助列）。

挑战将是利用 MySQL 功能并将一些计算卸载到 MySQL 引擎。

为此，您可能会在输入时间（因此在 O(k) 中）将一些数据“映射”到空间信息或字符串并使用 Levenshtein 距离。

单个用户的存储会增长，但会线性增长，而不是二次增长，而且 MySQL`SPATIAL`索引非常有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T20:31:37.857

如果搜索应该只返回前 100 个最佳匹配项，那么为什么不直接存储它们呢？听起来您无论如何都不想搜索结果的底端，所以不要计算它们。

这样，你的存储空间只有 o(n)，而不是 o(n^2)，更新也应该是。如果有人真的想查看前 100 个之后的匹配项（并且您想让它们），那么您可以选择在该点实时运行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:29:25.273

我同意@Iserni 所说的一切。

如果您有一个网络应用程序并且用户需要“登录”，那么您可能有机会创建该用户当时的排名并将它们存储到临时表（或现有表中的行）中。

如果计算所需的所有数据都放入内存，这将在合理的时间内（几秒钟）起作用。然后数据库引擎应该进行全表扫描并创建所有评级。

对于一个登录的用户来说，这应该可以很好地工作。对于两个 . . . 但是如果你有一打用户在一秒钟内登录，它就不会很好地扩展。

但是，从根本上说，您的评级并不能很好地衡量。您必须将所有用户与所有用户进行比较才能获得结果。无论是批处理（夜间）还是实时（当有人查询时）都不会改变问题的性质。它会占用大量的计算资源，多个用户同时发出请求会成为瓶颈。

# javascript - 评估主播的屏幕位置？

> ID：12679979
> 
> 赞同：0
> 
> 时间：2012-10-01T19:45:50.810
> 
> 标签：javascript, jquery, css

抱歉，我是 javascript 新手，我被这个问题难住了。

我在页面顶部有一个固定位置的 div。

其中是链接，当您单击时，页面会滚动到锚点。（我为此使用了 jquery。）

我还使用 javascript 使“返回顶部”按钮在有人单击任何这些链接时出现，并在他们单击“返回顶部”按钮本身时消失。

...但我突然想到，有时人们只会使用滚动条而不是按钮。

有没有办法让“返回顶部”按钮在用户使用滚动条向下滚动时出现，并在他们滚动回到顶部时消失？

换句话说，是否有一个属性可以用来评估当前页面顶部的锚点？（如果是这样，我可能可以从那里找出解决方案......）

...或者也许有一些方法可以知道用户何时滚动回顶部，以便我可以使用 javascript 摆脱“返回顶部”按钮？

任何帮助表示赞赏！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:50:00.930

您可以使用[`scrollTop()`](http://api.jquery.com/scrollTop/)jQuery 中的函数来确定滚动距离。

前：

```
$(window).scroll(function() {
    $('#backtotop').toggle( $(this).scrollTop() );
}); 
```

`backtotop`这将在滚动距离为 0 时隐藏 ID 为 ID 的元素。

如果您喜欢非 jQuery 解决方案，我很确定您可以使用该`window.scrollY`属性：

```
window.onscroll = function() {
    if (!window.scrollY) {
        // hide it
    } else {
        // show it
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:50:25.930

你可以得到滚动位置

```
var scrollTop = $(window).scrollTop(); 
```

[http://docs.jquery.com/CSS/scrollTop](http://docs.jquery.com/CSS/scrollTop)

这里还有一些提示：[How do I determine height and scrolling position of window in jQuery?](https://stackoverflow.com/questions/303767/how-do-i-determine-height-and-scrolling-position-of-window-in-jquery)

# java - 诺基亚 SDK 1.1 的 Facebook Connect 实施

> ID：12679983
> 
> 赞同：2
> 
> 时间：2012-10-01T19:46:08.857
> 
> 标签：java, facebook, nokia, nokia-s40

我正在尝试为诺基亚（特别是 Asha 模型）实现一个 facebook 应用程序

我没有看到任何关于如何使用 J2ME 或诺基亚 SDK 实现 FBConnect 的库或参考。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:26:53.947

你试过这个 Facebook API for Java ME 吗？[http://j2megroup.blogspot.com.br/search/label/facebook%20api%20me](http://j2megroup.blogspot.com.br/search/label/facebook%20api%20me)

# wpf - 当最小化到系统托盘时，WPF 窗口不会响应来自另一个实例的 PostMessage 消息

> ID：12679984
> 
> 赞同：1
> 
> 时间：2012-10-01T19:46:15.173
> 
> 标签：wpf

我正在执行一项任务，以在同一应用程序的第二个实例启动时从系统托盘恢复和最大化窗口。

当第二个实例启动并且无法获取互斥锁时。它调用以下代码来指示第一个实例显示自己：

```
public static void ShowFirstInstance()

  {
     WinApi.PostMessage(
        (IntPtr)WinApi.HWND_BROADCAST, 
        WM_SHOWFIRSTINSTANCE, 
        IntPtr.Zero, 
        IntPtr.Zero);
  } 
```

该消息使用以下方式注册：

```
public static readonly int WM_SHOWFIRSTINSTANCE =
         WinApi.RegisterWindowMessage("WM_SHOWFIRSTINSTANCE|{0}", 250); 
```

我在窗口后面的代码中有以下代码来捕获消息并显示窗口：

```
private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
      {
         if (msg == SingleInstance.WM_SHOWFIRSTINSTANCE)
         {
             WinApi.ShowToFront(hwnd);
         }

         return IntPtr.Zero;
      } 
```

当我测试它时。每当第一个实例隐藏在系统托盘中时，消息就永远不会被捕获。我想念什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:30:43.017

以下是我过去的做法：

应用程序.xaml.cs：

```
private static readonly Mutex Mutex = new Mutex(true, "{" + YourGuidHere + "}");

//return true if other instance is open, allowing for UI cleanup/suspension while shutdown() is completed
private bool EnforceSingleInstance()
{
    //try...catch provides safety for if the other instance is closed during Mutex wait
    try
    {
        if (!Mutex.WaitOne(TimeSpan.Zero, true))
        {
            var currentProcess = Process.GetCurrentProcess();

            var runningProcess =
                Process.GetProcesses().Where(
                    p =>
                    p.Id != currentProcess.Id &&
                    p.ProcessName.Equals(currentProcess.ProcessName, StringComparison.Ordinal)).FirstOrDefault();

            if (runningProcess != null)
            {
                WindowFunctions.RestoreWindow(runningProcess.MainWindowHandle);

                Shutdown();
                return true;
            }
        }

        Mutex.ReleaseMutex();
    }
    catch (AbandonedMutexException ex)
    {
        //do nothing, other instance was closed so we may continue
    }
    return false;
} 
```

窗口功能：

```
//for enum values, see http://www.pinvoke.net/default.aspx/Enums.WindowsMessages
public enum WM : uint
{
    ...
    SYSCOMMAND = 0x0112,
    ...
}

//for message explanation, see http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360(v=vs.85).aspx
private const int SC_RESTORE = 0xF120;

public static void RestoreWindow(IntPtr hWnd)
{
    if (hWnd.Equals(0))
        return;

    SendMessage(hWnd,
                (uint)WM.SYSCOMMAND,
                SC_RESTORE,
                0);
}

[DllImport("user32.dll")]
public static extern IntPtr SendMessage(IntPtr hWnd,
                                        uint msg,
                                        uint wParam,
                                        uint lParam); 
```

# c++ - 从基类中识别派生类

> ID：12679985
> 
> 赞同：4
> 
> 时间：2012-10-01T19:46:19.137
> 
> 标签：c++, pointers, polymorphism, virtual, abstract

有没有办法检查两个实例是否是同一个派生类？就像是：

```
Base *inst1 = new A();
Base *inst2 = new B();
Base *inst3 = new A();

bool b1 =  (inst1->class== inst2->class); //<-- should evaluate to false
bool b1 =  (inst2->class== inst3->class); //<-- should evaluate to true 
```

显然，我可以在基类中添加一个虚函数并实现每个派生类以返回一个唯一值。但是，我宁愿不必为派生类实现任何特定的东西，因为我正在制作一个基于从这个基类派生的 API。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T19:47:34.057

```
typeid(*inst1) == typeid(*inst2) 
```

假设`Base`至少有一个虚函数。否则， typeid 将无法获得正确的派生类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:14:42.733

我不知道返回实例派生类的方法。但是，dynamic_cast 可用于检查实例是否与特定类兼容。

A& inst_ans = dynamic_cast(inst2); 会抛出异常

其中 A& inst_ans = dynamic_cast(inst1); 将正确执行

[http://en.wikipedia.org/wiki/Dynamic_cast](http://en.wikipedia.org/wiki/Dynamic_cast)

# webdriver - 我如何以一种可以普遍应用的方式在 Java 中实现 Webdriver / PageObjects / Pagefactory

> ID：12679989
> 
> 赞同：0
> 
> 时间：2012-10-01T19:46:42.590
> 
> 标签：webdriver, selenium-webdriver, pageobjects

这是我对应用于 Webdriver 的 PageObjects/Pagefactory 的尝试实现理解：

```
1\. Create the following structure in eclipse

--> com.example.qa.pageobjects 
     --> LoginPage.java

Every class in this package has something like: 

@FindBy(how = How.NAME, using = "logonName")
    private WebElement logonNameField;

and the Methods, call Webelement, and call methods on them, like:

logonNameField.sendKeys("username");

Which are called from ScenrioTests.

     --> HomePage.java (i go there after i login)
     --> Page.java (abstract)

--> com.example.qa.setup
    --> Browser.java
    --> FirefoxBrowser.java (Code specific to FFox)
    --> ChromeBrowser.java (Code Specific to Chrome)

--> com.example.qa.test
    --> Scenario1234.java 
    --> Scenario2345.java 
```

这些场景类实例化 PageObjects，并在其中调用方法，而浏览器设置仅在每次测试运行时调用一次。

现在的问题是：

1.  我应该声明如下方法并调用 Pagefactory 吗？

public MyPage method() { 调用 Login() 等方法 return PageFactory.initElements(driver, MDNSLoginPage.class); }

1.  或者，我应该从默认构造函数调用相同的 PageFactory

2.  我的理解/实施是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:30:20.323

我想我有点遵循你的第一方法。我将尝试通过说明我的实现来回答，但我不确定它是否对您的目的有用。我有一个 baseTest 类，我加载了可以在我的测试类中使用的常用方法。（例如，实例化浏览器，打开登录页面等）

```
abstract class TestBase {
//somewhere
protected static LoginPage goToLoginPage(){
   driver.get(loginPage);
    return  PageFactory.initElements(driver, LoginPage.class);
} 

protected static void startBrowser(Browser browser){}
   //implemntation
  } 
```

然后，在继承抽象类的测试类中，我以下列方式使用它

```
@BeforeClass
public static void setup(){
  //use a common method to start browser    
  startBrowser(Browser.FIREFOX);
    }

@Test
public void canLogInToHomePage(){
//start my test like this
LoginPage loginPage =goToLoginPage();

} 
```

# tfs - tfspreview、持续集成和外部文件夹被覆盖

> ID：12679992
> 
> 赞同：0
> 
> 时间：2012-10-01T19:46:52.070
> 
> 标签：tfs, continuous-integration, tfsbuild, azure-web-app-service

问题简单地说：

*   使用链接到 Azure 网站的 tfspreview.com 帐户。
*   使用 Azure 团队提供的持续部署构建。
*   一切正常，当我登记入住时：
    *   代码上传到 tfs 服务器
    *   远程主机用于构建代码
    *   使用编译后的代码创建一个放置文件夹
    *   放置文件夹中的代码发布到 Azure 网站

现在这一切都很好，但它总是覆盖服务器上的任何外部文件夹（不是项目的一部分）。我进入流程模板并将“清洁工作区”设置更改为“无”，但这没有帮助。

如果我在本地构建并使用 web 部署发布，事情不会被覆盖。我在这里想念什么？显然这是构建过程或删除文件夹不知道发布设置的问题。有任何想法吗？

# backbone.js - 在集合中选择动态创建的模型

> ID：12679994
> 
> 赞同：0
> 
> 时间：2012-10-01T19:46:55.190
> 
> 标签：backbone.js, backbone.js-collections

我有一组“人名”输入，其中`person`包含我正在尝试执行以下操作的类：每次在输入中记录一个 keyup 时，获取该输入的 data-hash 属性，如果还没有一个实例在 People 集合中具有该哈希的人，添加一个模型。否则只需更新哈希匹配的模型。

```
$('.person').keyup(function(){

var myHash = $(this).attr('data-hash'),
 myName = $(this).val(),
 checkMe = people.where({'hash':myHash});

if ( checkMe.length > 0 ){

//update name value where hash matches

}

else {
 people.add({
   'name':myName,
   'hash':myHash
  });
}
}); 
```

`var person = new Person`我没有使用，而是使用 Backbone 的`add`方法将这些模型添加到集合中。

所以现在我打电话时有很多元素，`people.models`但我不知道如何选择它们。通常你会说，但如果没有名称`person.get('attribute')`，我不确定如何选择模型。`var`我可以在代码中放入什么而不是`//update name value where hash matches`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:22:58.297

checkMe 应该是您尝试更新的模型数组。遍历它们并使用 set 方法：

```
$('.person').keyup(function(){

var myHash = $(this).attr('data-hash'),
 myName = $(this).val(),
 checkMe = people.where({'hash':myHash});

if ( checkMe.length > 0 ){
  _.each(checkMe, function(person){
    person.set({
      'name':myName,
    });
  });
}

else {
 people.add({
   'name':myName,
   'hash':myHash
  });
}
}); 
```

# ember.js - 为什么我需要“reopenClass”来设置 ember-data 模型的 url？

> ID：12679998
> 
> 赞同：7
> 
> 时间：2012-10-01T19:47:05.180
> 
> 标签：ember.js, ember-data

我发现如果我尝试将 url 包含在 ember-data 模型的原始定义中，它会在我的 REST 适配器中爆炸，但如果我只是“reopenClass”就可以了。

这背后的技术原因是什么？（以下是工作示例）

```
CodeCamp.Speaker = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string'),
    session: DS.belongsTo('CodeCamp.Session')
});

CodeCamp.Speaker.reopenClass({
    url: 'sessions/%@/speakers'
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T23:35:36.107

调用`extend`对象设置实例属性，而`reopenClass`设置类属性。

该`url`属性是类级别的属性，

```
Ember.get(CodeCamp.Speaker, 'url') 
```

相对于：

```
speaker = CodeCamp.Speaker.createObject()
Ember.get(speaker, 'name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:01:29.980

另请注意，您可以使用 simple 来扩展实例`reopen`。Emberjs 的文档包含一个示例，您可以在[http://emberjs.com/guides/object-model/reopening-classes-and-instances/找到该示例](http://emberjs.com/guides/object-model/reopening-classes-and-instances/)