# StackOverflow 问答 13989000-13989999

# ruby - 捕获屏幕截图

> ID：13989000
> 
> 赞同：0
> 
> 时间：2012-12-21T11:08:27.427
> 
> 标签：ruby, webdriver, watir

当测试失败时，我无法弄清楚如何捕获屏幕截图。请任何帮助/示例？

这是我的代码示例

```
testName =  "Entered 000000 - Invalid Unit Number"    
browser.text_field(:name => 'unitNumber').set '000000'
browser.button(:name => "OpRetrieve").click
message=browser.text_field(:id => 'messages').text
if message == "Invalid Unit Number"
  f1.puts "PASSED #" + testId.to_s + ": " + testName
else
   f1.puts "FAILED #" + testId.to_s + ": " + testName + ". Message: " + message
   "Capturd screenshot"
end
testId=testId+1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:38:28.140

这应该这样做：

```
browser.screenshot.save 'screenshot.png' 
```

有关更多信息，请参阅[http://watir.github.io/docs/screenshots/](http://watir.github.io/docs/screenshots/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:10:55.830

这适用于 phantomjs，我想它应该适用于任何驱动程序。

```
browser.driver.screenshot.save 'wtf.png' 
```

[这是我之前制作的一个工作示例。](https://github.com/nurettin/capybara_poltergeist_phantomjs_test/blob/master/capybara_poltergeist_phantomjs_test.rb)它做了类似的事情：

```
page.driver.render 'test.pdf' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:18:55.797

你也可以这样实现。

```
 File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);  
 FileUtils.copyFile(scrFile, new File("C:\\screenShot1.png")); 
```

要使用这些，您需要导入以下类

```
import org.apache.commons.io.FileUtils;
import org.openqa.selenium.TakesScreenshot; 
```

# android - Android FragmentPagerAdapter 和光标加载器

> ID：13989003
> 
> 赞同：1
> 
> 时间：2012-12-21T11:08:36.240
> 
> 标签：android, cursor, loader, fragmentpageradapter

我正在尝试实现一个自定义游标加载器，它将我的数据库中的数据加载到片段页面适配器中托管的片段中。我有一个活动（扩展 SherlockFragmentActivity），它有一个片段，它实现了一个片段页面适配器（通过新的嵌套片段）。fragmentpageradapter 下的每个片段都实现了一个自定义光标加载器，该加载器生成要显示的数据。我在 onActivityCreated 中启动加载程序并在 onResume 上重新启动它并在 onDestroy 上销毁它。假设我在第 1 页，寻呼机也自动启动第 2 页（更流畅的事务的默认行为）问题是如果我添加要在第 2 页中显示的项目（从操作栏）并且我在第 1 页，当我滑动到加载程序页面时不会刷新数据。

有什么想法吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:48:00.353

无需停止加载程序，因为 LoaderManager 和 FragmentManager 一起为您处理。话虽这么说，我不确定这是你问题的原因。在过去的一个月里，我发现了装载程序的许多错误。虽然，其中大多数与加载程序没有更新有关。

我知道加载器存在一个现有错误，但我没有时间去追踪它。这是建议的解决方法。试试这个。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // Start or restart the loader.  Note: this is a work-around to an Android
    // bug with loaders where they are not always properly activated with life-cycle
    // changes in the activity/fragment.
    Loader<Object> loader = getLoaderManager().getLoader((int) mId);
    if (loader != null && ! loader.isReset()) {
        mStatusLoader = (StatusItemLoader) getLoaderManager().restartLoader(
                                                    (int) mId, null, mLoadListener);
    } else {
        mStatusLoader = (StatusItemLoader) getLoaderManager().initLoader(
                                                    (int) mId, null, mLoadListener);
    }
} 
```

# c# - CRM 2011 插件 - 在创建任务时获取状态码

> ID：13989004
> 
> 赞同：0
> 
> 时间：2012-12-21T11:08:46.757
> 
> 标签：c#, plugins, dynamics-crm-2011, dynamics-crm, crm

我在创建任务后注册了一个插件，我正在尝试检查任务的相关对象、实际分钟字段和状态代码，但是，状态代码在创建新任务时似乎总是返回 0（即使您选择标记完成） .

有谁知道如何解决这个问题？

```
OptionSetValue statecode = (OptionSetValue)entity["statecode"];
if (entity.Attributes.Contains("regardingobjectid") && entity.Attributes.Contains("actualdurationminutes") && statecode.Value == 1)
                { //DO STUFF } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:18:11.613

我的猜测是，当使用“*标记为完成*”时，CRM 首先保存任务，然后使用单独的[SetStateRequest](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.setstaterequest.aspx)将其标记为完成。这意味着您将永远无法在创建后事件的那个时间点获得其他 StateCode 然后为 0。

我认为您必须将插件连接到 Task 上的**更新事件**上，并检查它是否会为您破解。

# javascript - 删除 setTimeout 间隔

> ID：13989008
> 
> 赞同：1
> 
> 时间：2012-12-21T11:08:50.230
> 
> 标签：javascript, dom, setinterval

加载文档后，我想刷新一次页面。所以我写了这段代码。它工作正常，但它一次又一次地调用。因为我正在刷新同一页面。但我想在执行一次后清除间隔。

```
function refreshPage(){
    document.location.reload(true);
    alert('page is refresh.');
}
var interval = setTimeout('refreshPage()', 3000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:11:47.903

如果您希望它只工作一次，无论延迟如何，您都可以将您所做的事实存储在 localStorage 中：

```
 function refreshPage(){
        alert('page will refresh.');
        document.location.reload(true);
        localStorage['refreshDone'] = 'yes';
    }
    if (!localStorage['refreshDone']) {
        setTimeout('refreshPage()', 3000);
    } 
```

但是您不能简单地清除超时或间隔，因为每次重新加载页面时窗口变量都会丢失。

由于我不确定您的确切目标，如果您想在最近没有完成的情况下刷新，您可以在 localStorage 中存储一个时间戳：

```
 function refreshPage(){
        alert('page will refresh.');
        document.location.reload(true);
        localStorage['refresh'] = new Date().getTime();
    }
    var lastTimeRefresh = parseInt(localStorage['refresh']||'0', 10);
    if (new Date().getTime() - lastTimeRefresh > 30*60*1000) { // 30 minutes
        setTimeout('refreshPage()', 3000);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:13:27.957

您可以在第一次刷新时设置 javascript cookie，然后检查是否设置了 cookie，如果没有设置，请设置 cookie 并刷新页面，如果没有则什么都不做

# c++ - 将具有 OO 语法的 Matlab 转换为 c / c++ 而无需重写其功能

> ID：13989009
> 
> 赞同：3
> 
> 时间：2012-12-21T11:08:51.823
> 
> 标签：c++, c, matlab

我有**使用 OO**语法的 Matlab 代码，我需要将其**转换为 C/C++ 源代码**（不是二进制而是源代码）。

我已阅读有关**2 级 S-Functions 和使用 Simulink Coder**但

*   为“完全内联”的 TLC 编写 TLC *（不希望在 TLC 中重写完整的例程）*

    或者

*   在 TLC 中使用“基于函数的包装器” *（不希望在 C 文件中实现例程）*

不符合我的要求。

是否有其他选项可以从 Matlab 代码生成 C/C++ 源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:16:46.187

可以从 OO 编写的 Matlab 脚本生成 C 代码。但是有必要在对象周围包装函数。你需要有 Matlab 编码器。

Matlab 区分值类和句柄类（所有类派生自句柄）。

# 1.处理类

## 1.1。例子

```
classdef myHandleClass < handle
properties (Access=private)
    num1;
end
   methods (Access=public)
       function obj = myHandleClass (num1) 
       % constructor
           if(nargin > 0)
             obj.num1=num1;
           end
       end
       function prod = product(obj, factor)
          prod = obj.num1.*factor;
       end
       function quot = quotient(obj,divisor)
           quot = obj.num1/divisor;
       end
   end
end 
```

## 1.2\. 使用句柄类的函数

myHandleClass 的对象需要是持久的。isempty 函数也是必须的。

```
 %#codegen   
     function prod= use_product_HandleClass(a,b)
     assert(isa(a,'double'));
     assert(isa(b,'double'));

     persistent p;  
      if isempty(p)
         p = myHandleClass(a);
      end

     prod = p.product(b);
     end 
```

## 1.3\. 生成的代码

这是生成的“use_product_HandleClass.c”中最有趣的部分

```
typedef struct {
  real_T num1;
} myHandleClass;

#endif                                 /*typedef_myHandleClass*/

/* Named Constants */

/* Variable Declarations */

/* Variable Definitions */
static myHandleClass p;

/* Function Declarations */

/* Function Definitions */
real_T use_product_HandleClass(real_T a, real_T b)
{
  if (!p_not_empty) {
    p.num1 = a;
    p_not_empty = TRUE;
  }

  return p.num1 * b;
} 
```

# 2\. 价值类别

## 2.1。值类示例

```
 classdef myValueClass 
       properties (Access=private)
            num1;
       end
       methods (Access=public)
           function obj = myValueClass (num1) 
               if(nargin > 0)
                 obj.num1=num1;
               end
           end
           function prod = product(obj, factor)
              prod = obj.num1.*factor;     
           end
           function quot = quotient(obj,divisor)
               quot = obj.num1./divisor;
           end
       end
   end 
```

## 2.2\. 使用值类的函数

```
%#codegen
function res= use_product_ValueClass(a,b)
  assert(isa(a, 'double'))
  assert(isa(b, 'double'))
  p = myValueClass(a);
  res = p.product(b);
end 
```

## 2.3\. 生成的代码

这是生成的“use_product_ValueClass.c”中最有趣的部分

```
/* Function Definitions */
real_T use_product_ValueClass(real_T a, real_T b)
{
  return a * b;
} 
```

## 3\. 参考文献

“为 MATLAB 值类生成代码”。
[http://www.mathworks.de/de/help/coder/ug/how-to-generate-code-for-matlab-value-classes.html](http://www.mathworks.de/de/help/coder/ug/how-to-generate-code-for-matlab-value-classes.html)。

“为 MATLAB 句柄类和系统对象生成代码”。

[http://www.mathworks.de/de/help/coder/ug/how-to-generate-code-for-matlab-handle-classes.html](http://www.mathworks.de/de/help/coder/ug/how-to-generate-code-for-matlab-handle-classes.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:01:52.720

它不是免费的，但 Mathworks 制作了一款名为[Matlab Coder](http://www.mathworks.com/products/matlab-coder/)的产品，用于从 Matlab 代码生成 C++ 代码。

# xcode - Mac OSX 应用程序：如何在首次启动时获得警报“App X 想使用您当前的位置”？

> ID：13989020
> 
> 赞同：1
> 
> 时间：2012-12-21T11:09:23.023
> 
> 标签：xcode, macos, geolocation, location, cllocationmanager

当我第一次运行我的 OSX 应用程序并调用位置服务以确定用户位置时，我收到一条警报，询问用户是否允许该应用程序使用他的位置。

我无法再次收到警报！我尝试了什么：

*   完全删除“派生数据”文件夹（我的应用程序所在的位置）
*   做一个干净的
*   转到OSX首选项=>“安全性和机密性”=>取消选中与我的应用程序相关的复选框以禁止使用该位置=>无论如何都不会再次显示警报！
*   删除 user/my_name/library/preferences 中的 plist 文件

不可能再次收到此警报！

我想再次显示此警报，因为我想在第一次启动时检查不同的东西（即如果用户在接受使用他的位置之前等待很长时间，我的应用程序的行为）

感谢您的回答 ！

注意：我在这个论坛上看到了很多帖子，但仅与 iOS 相关，与 Mac OSX 无关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:56:31.350

无法发表评论，所以我将其发布为答案：-/

这对我有用，虽然它不是我能想象的最好的方式：[https ://superuser.com/questions/429344/remove-application-from-location-services-in-security-privacy-on-mac-os-x- 10-7](https://superuser.com/questions/429344/remove-application-from-location-services-in-security-privacy-on-mac-os-x-10-7)

# android - 我的 nexus S 手机未显示在 Android 设备中选择

> ID：13989021
> 
> 赞同：4
> 
> 时间：2012-12-21T11:09:34.583
> 
> 标签：android

1.  我可以在“adb devices”下看到我自己的设备，并且
2.  已将运行配置 -> 目标 -> 部署目标选择模式设置为“手动”（事实上，在我的 IDE 中，由于某种原因，没有手动选项）和
3.  将手机设置为 USB 调试模式
4.  我的应用程序设置为 android:debuggable=true

但是，我仍然无法在“Android 设备选择器”中看到我的设备。谁能帮我解决这个问题？我使用 ADT 作为我的 IDE。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:54:37.467

*   在您的手机中启用 USB 调试。

*   转到Windows的设备管理器，您可以看到失败的驱动程序消息，右键单击并选择“更新驱动程序软件”，然后“浏览我的计算机以查找驱动程序软件”。

*   浏览到您的 Google 驱动程序位置，例如“C:\Program Files (x86)\Android_Jorgesys\sdk\extras\google\usb_driver”。

*   选择“Android Composite ADB Interface”驱动并点击Next按钮，然后点击Install。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T13:08:20.637

我自己对此有很多问题。我知道这个问题已经回答了，但是选择的答案对我不起作用。因此，我不会提出新问题，而是添加对我有用的 DID。我在手机上启用了开发模式，我尝试设置驱动程序 - 但唯一需要的驱动程序是通用存储（或电话）驱动程序。对我来说，我必须在手机上设置启用开发调试模式，然后该选项出现在我的设备管理器中，用于 ADB 复合设备。
希望我可以为其他人节省与我相同的麻烦 - 只需启用 USB 调试选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:34:04.173

感谢@SalGad，这与我的手机和项目构建目标之间不同的 API 版本有关。我的 Nexus S 手机上的版本是 4.1.2，我的项目上的版本是 4.2

# sql - 查询从 2 个 diff 表中获取记录到 2 列

> ID：13989024
> 
> 赞同：0
> 
> 时间：2012-12-21T11:09:40.390
> 
> 标签：sql, sql-server, database

我有 2 个如下表：

1)

```
 Engine
    ======

ID     Title    Unit   Value
123    Hello    Inch   50
555    Hii      feet   60 
```

2)

```
 Fuel
    =====

ID    Title     Value
123   test12     343
555   test5556   777 
```

我希望根据给定的 ID 在 2 列中选择结果（两个表中的 ID 应该相同）：

**标题** `-- This will get the (Title + Unit) from Engine table and only Title from Fuel table. Value`

**价值**`-- This will get Value from both tables.`

ID = 123 的结果是：

```
Title          Value

Hello(Inch)   50
test12        343 
```

任何建议我如何在 SQL Server 2008 中得到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:12:45.140

您可能应该看一下诸如[Introduction to JOINs – Basic of JOINs 之](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)类的东西，并阅读一些关于 JOINS 的内容

*   [加入基础](http://www.mssqltips.com/sqlservertip/1667/sql-server-join-example/)
*   [SQL Server 连接示例](http://www.mssqltips.com/sqlservertip/1667/sql-server-join-example/)
*   [SQL 连接](http://www.codeproject.com/Articles/102805/SQL-Joins)

**编辑**

也许那时也看

*   [案例（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)
*   [+（字符串连接）（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms177561.aspx)
*   [转换和转换 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:15:00.300

查看 SQL JOIN：INNER JOIN、LEFT JOIN 等

```
Select 
      e.ID, e.Title, e.Unit, e.Value, f.Title as FuelTitle, e.Value as FuelValue,
      e.Title+' '+e.Units As TitleAndUnits
From Engine e
Join Fuel f
On e.ID = f.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:53:02.663

根据您相同的数据和所需的结果，您似乎想使用 a`UNION ALL`从两个表中获取数据：

```
select title+'('+Unit+')' Title, value
from engine
where id = 123
union all
select title, value
from fuel
where id = 123 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1bda7/8)

查询的结果是：

```
|       TITLE | VALUE |
-----------------------
| Hello(Inch) |    50 |
|      test12 |   343 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:18:35.527

您可以在 w/oa join 的情况下执行此操作，但使用 join 可能会更优化，具体取决于您的情况中的其他因素。

不带连接的示例：

```
select concat(t1.c1, ' ', t1.c2, ' ', t2.c1) col1, concat(t1.c3, ' ', t2.c3) col2 
from t1, t2
where t1.id = [ID] and t2.id = [ID] 
```

# facebook - 决定 Facebook 游戏中最佳收集频率的算法的名称是什么？

> ID：13989027
> 
> 赞同：1
> 
> 时间：2012-12-21T11:09:59.130
> 
> 标签：facebook, knapsack-problem

因此，在许多 Facebook 游戏中，有不同收集频率的各种建筑物，您可以收集的数量取决于您一天中空闲时间的长度和间隔。

思考如何找到不同频率的最大出现让我想起了像背包和调度这样的词，但是我忘记了关于这个的算法的真正名称是什么，或者这是否和那些问题一样困难。

那么，我要找的名字是什么？

谢谢。

（测试：是否可以在 SO 中遇到问题？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:32:33.373

听起来像加权[间隔调度](http://en.wikipedia.org/wiki/Interval_scheduling)。

> 任务列表以一组时间间隔给出；例如，一个任务可能从 2:00 运行到 5:00，而另一个任务可能从 6:00 运行到 8:00。作为一个优化问题，目标是在不重叠任务的情况下最大化执行任务的数量。一个请求对应一个时间间隔。如果其中没有两个在时间上重叠，我们说请求的子集是兼容的，我们的目标是接受尽可能大的兼容子集。一组兼容的最大尺寸称为最优。

# python - 在 Python 中读入 zlib 文件会导致“不正确的标头检查”

> ID：13989029
> 
> 赞同：0
> 
> 时间：2012-12-21T11:10:07.410
> 
> 标签：python, compression, zlib

> **可能重复：**
> [用python解压缩tar.Z文件？](https://stackoverflow.com/questions/2272199/uncompressing-tar-z-file-with-python)

我正在尝试读取压缩的 zlib，以便直接访问包含的 HDF 文件中的数据（使用 pyhdf）。但是，我总是收到一条错误消息。这是[文件](ftp://disc2.nascom.nasa.gov/ftp/data/s4pa//TRMM_L3/TRMM_3B42/2007/001/3B42.20070101.03.7A.HDF.Z)。

```
import zlib
file = open('3B42.20070101.00.7A.HDF.Z','rb')
data = zlib.decompress(file.read())

>> error: Error -3 while decompressing data: incorrect header check 
```

我检查了其他几种方法（例如 gzip.open/gzip.zlib），但似乎没有任何效果。你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:17:42.020

那不是 zlib 或 gzip 文件，它是由旧的 Unix 工具压缩的（从扩展名`compress`中可以看出）。`.Z`命令行工具`gzip`//可以读取这些，但不能读取 Python`gunzip`模块。您可以使用管道：`zcat``gzip`

```
from subprocess import Popen, PIPE

filename = "3B42.20070101.03.7A.HDF.Z"
f = Popen(["zcat", filename], stdout=PIPE).stdout 
```

现在，`f`是一个类文件，可以用来读取文件。

# ios - 有没有办法以编程方式将我的 iPhone 应用程序发送到后台

> ID：13989030
> 
> 赞同：11
> 
> 时间：2012-12-21T11:10:08.063
> 
> 标签：ios

我有一个需要自动发送到后台的 iPhone 应用程序。该应用程序在其后台模式中使用 VOIP 键定义，因此它应在后台继续运行。我特别需要该应用程序继续运行，因此调用 exit(0) 不好。

该应用程序不会通过应用程序商店分发，因此可以使用私有 API。

我已阅读有关 UIApplication terminate 和 UIApplication terminateWithSuccess 的信息，但它们似乎不再可用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T14:17:56.100

已经在这里回答得很好：

[暂停申请](https://stackoverflow.com/questions/5360846/suspend-the-application)

正如那张海报所写：

退出您的应用程序或以编程方式将其发送到后台是违反 [iOS 人机界面指南][1] 的，这对于通过审核过程通常不是好兆头：

> **不要以编程方式退出**
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。
> 
> **显示一个有吸引力的屏幕，描述问题并提出更正建议。**屏幕提供反馈，让用户确信您的应用程序没有问题。它使用户处于控制之中，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序
> 
> **如果您的应用程序的某些功能无法正常工作，请在人们激活该功能时显示屏幕或警报。**仅当人们尝试访问不起作用的功能时才显示警报。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-06T13:02:48.107

在 Swift 3 中使用下面的代码，工作魅力

```
 DispatchQueue.main.asyncAfter(deadline: .now()) {
          UIApplication.shared.perform(#selector(NSXPCConnection.suspend))
      } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T14:26:05.870

虽然我同意您“不应该”以编程方式退出的另一个答案。有一种以编程方式退出的方法。

*免责声明 - 你不应该这样做。

```
exit(0); 
```

如果不按主页按钮，就无法将应用程序置于后台。如果有，您可能希望将越狱标志添加到您的问题中并询问他们。

有关更多信息，请检查此重复问题，[退出应用程序的正确方法](https://stackoverflow.com/questions/355168/proper-way-to-exit-iphone-application)。

# shell - 如何从 Artifactory 存储库下载最新的工件？

> ID：13989033
> 
> 赞同：72
> 
> 时间：2012-12-21T11:10:12.963
> 
> 标签：shell, artifactory, continuous-deployment

[我需要来自Artifactory](http://en.wikipedia.org/wiki/Software_repository#Repository_managers)存储库的最新工件（例如，快照）。该工件需要通过脚本复制到服务器 (Linux)。

我有哪些选择？像[Wget](http://en.wikipedia.org/wiki/Wget) / [SCP](http://en.wikipedia.org/wiki/Secure_copy)之类的东西？以及如何获得工件的路径？

我找到了一些需要 Artifactory Pro 的解决方案。但我只有 Artifactory，而不是 Artifactory Pro。

是否可以在没有 UI 且没有 Pro-Version 的情况下从 Artifactory 下载？体验如何？

如果这很重要，我在 OpenSUSE 12.1 (x86_64) 上。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-07-21T14:33:37.850

类似于以下 bash 脚本的内容将从repo中检索最新的`com.company:artifact`快照：`snapshot`

```
# Artifactory location
server=http://artifactory.company.com/artifactory
repo=snapshot

# Maven artifact location
name=artifact
artifact=com/company/$name
path=$server/$repo/$artifact
version=$(curl -s $path/maven-metadata.xml | grep latest | sed "s/.*<latest>\([^<]*\)<\/latest>.*/\1/")
build=$(curl -s $path/$version/maven-metadata.xml | grep '<value>' | head -1 | sed "s/.*<value>\([^<]*\)<\/value>.*/\1/")
jar=$name-$build.jar
url=$path/$version/$jar

# Download
echo $url
wget -q -N $url 
```

感觉有点脏，是的，但它完成了工作。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-12-22T07:20:53.170

Artifactory 有一个很好的扩展[REST-API](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API)，几乎任何可以在 UI 中完成的事情（甚至更多）也可以使用简单的 HTTP 请求来完成。

您提到的功能-检索最新工件确实需要专业版；但也可以通过您的一些工作和一些基本脚本来实现。

**选项 1 - 搜索：**

对一组组 ID 和工件 ID 坐标执行[GAVC](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#Artifactory%27sRESTAPI-GAVCSearch)搜索，以检索该组的所有现有版本；那么您可以使用任何版本的字符串比较算法来确定最新版本。

**选项 2 - Maven 方式：**

Artifactory 生成一个标准的[XML 元数据](http://maven.apache.org/ref/3.3.9/maven-repository-metadata/)供 Maven 使用，因为 Maven 面临着同样的问题——确定最新版本；元数据列出了工件的所有可用版本，并为每个工件级别文件夹生成；通过一个简单的 GET 请求和一些 XML 解析，您可以发现最新版本。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-10-09T03:33:20.670

### 使用 shell/unix 工具

1.  `curl 'http://$artiserver/artifactory/api/storage/$repokey/$path/$version/?lastModified'`

上面的命令以带有两个元素的 JSON 响应——“uri”和“lastModified”

2.  获取 uri 中的链接会返回另一个 JSON，其中包含工件的“downloadUri”。

3.  获取“downloadUri”中的链接，您就拥有了最新的人工制品。

### 使用 Jenkins Artifactory 插件

（需要 Pro）来解析和下载最新的工件，如果 Jenkins Artifactory 插件用于在另一个工作中发布到工件：

1.  选择通用工件集成
2.  使用已解决的工件作为 `${repokey}:**/${component}*.jar;status=${STATUS}@${PUBLISH_BUILDJOB}#LATEST=>${targetDir}`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-27T15:59:20.180

您还可以使用[Artifactory Query Language](https://www.jfrog.com/confluence/display/RTF/Artifactory+Query+Language)来获取最新的工件。

以下 shell 脚本只是一个示例。它使用“items.find()”（在非专业版中可用），例如`items.find({ "repo": {"$eq":"my-repo"}, "name": {"$match" : "my-file*"}})`搜索存储库名称等于“my-repo”的文件并匹配所有以“my-file”开头的文件. 然后它使用[shell JSON 解析器 ./jq](https://stedolan.github.io/jq/)通过按日期字段“更新”排序来提取最新文件。最后它使用 wget 下载工件。

```
#!/bin/bash

# Artifactory settings
host="127.0.0.1"
username="downloader"
password="my-artifactory-token"

# Use Artifactory Query Language to get the latest scraper script (https://www.jfrog.com/confluence/display/RTF/Artifactory+Query+Language)
resultAsJson=$(curl -u$username:"$password" -X POST  http://$host/artifactory/api/search/aql -H "content-type: text/plain" -d 'items.find({ "repo": {"$eq":"my-repo"}, "name": {"$match" : "my-file*"}})')

# Use ./jq to pars JSON
latestFile=$(echo $resultAsJson | jq -r '.results | sort_by(.updated) [-1].name')

# Download the latest scraper script
wget -N -P ./libs/ --user $username --password $password http://$host/artifactory/my-repo/$latestFile 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-11-22T20:09:13.963

使用最新版本的 artifactory，您可以通过 api 进行查询。

[https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-RetrieveLatestArtifact](https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-RetrieveLatestArtifact)

如果您有一个带有 2 个快照的 Maven 工件

名称 => 'com.acme.derp'
版本 => 0.1.0 存储
库名称 => 'foo'
快照 1 => derp-0.1.0-20161121.183847-3.jar
快照 2 => derp-0.1.0-20161122.00000- 0.jar

那么完整的路径将是

> [https://artifactory.example.com/artifactory/foo/com/acme/derp/0.1.0-SNAPSHOT/derp-0.1.0-20161121.183847-3.jar](https://artifactory.example.com/artifactory/foo/com/acme/derp/0.1.0-SNAPSHOT/derp-0.1.0-20161121.183847-3.jar)

和

> [https://artifactory.example.com/artifactory/foo/com/acme/derp/0.1.0-SNAPSHOT/derp-0.1.0-20161122.00000-0.jar](https://artifactory.example.com/artifactory/foo/com/acme/derp/0.1.0-SNAPSHOT/derp-0.1.0-20161122.00000-0.jar)

你会像这样获取最新的：

```
curl https://artifactory.example.com/artifactory/foo/com/acme/derp/0.1.0-SNAPSHOT/derp-0.1.0-SNAPSHOT.jar 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-02T23:00:36.210

您可以使用 REST-API 的“ [Item last modified](https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-ItemLastModified) ”。从文档中，它返回如下内容：

```
GET /api/storage/libs-release-local/org/acme?lastModified
{
"uri": "http://localhost:8081/artifactory/api/storage/libs-release-local/org/acme/foo/1.0-SNAPSHOT/foo-1.0-SNAPSHOT.pom",
"lastModified": ISO8601
} 
```

例子：

```
# Figure out the URL of the last item modified in a given folder/repo combination
url=$(curl \
    -H 'X-JFrog-Art-Api: XXXXXXXXXXXXXXXXXXXX' \
    'http://<artifactory-base-url>/api/storage/<repo>/<folder>?lastModified'  | jq -r '.uri')
# Figure out the name of the downloaded file
downloaded_filename=$(echo "${url}" | sed -e 's|[^/]*/||g')
# Download the file
curl -L -O "${url}" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-21T20:03:56.547

Artifactory 的作用是为[Maven](http://en.wikipedia.org/wiki/Apache_Maven)（以及其他构建工具，如 Ivy、Gradle 或 sbt）提供文件。您可以将 Maven 与[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/copy-mojo.html)一起使用来复制工件。这是一个[pom](http://maven.apache.org/pom.html)大纲让你开始......

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>A group id</groupId>
    <artifactId>An artifact id</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <id>copy</id>
                        <phase>package</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>The group id of your artifact</groupId>
                                    <artifactId>The artifact id</artifactId>
                                    <version>The snapshot version</version>
                                    <type>Whatever the type is, for example, JAR</type>
                                    <outputDirectory>Where you want the file to go</outputDirectory>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

只是跑来`mvn install`做副本。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-26T08:38:15.617

您可以使用该`wget --user=USER --password=PASSWORD ..`命令，但在执行此操作之前，您必须允许 artifactory 强制身份验证，这可以通过在**artifactory 管理面板的****Security/General**选项卡中**取消选中**“ ***Hide Existence of Unauthorized Resources*** ”框来完成。否则 artifactory 发送一个 404 页面并且 wget 无法向 artifactory 进行身份验证。

 ***** * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-31T13:41:24.207

对我来说，最简单的方法是结合 curl、grep、sort 和 tail 来阅读项目的最新版本。

我的格式：service-(version: 1.9.23)-(buildnumber)156.tar.gz

```
versionToDownload=$(curl -u$user:$password 'https://$artifactory/artifactory/$project/' | grep -o 'service-[^"]*.tar.gz' | sort | tail -1) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-05-20T11:25:06.593

如果要在 2 个存储库之间下载最新的 jar，可以使用此解决方案。我实际上在我的 Jenkins 管道中使用它，它运行良好。假设您有一个 plugins-release-local 和 plugins-snapshot-local 并且您想下载它们之间的最新 jar。你的 shell 脚本应该是这样的

**注意：我使用[jfrog cli](https://www.jfrog.com/confluence/display/CLI/JFrog+CLI)，它配置了我的 Artifactory 服务器。**

# 用例：Shell 脚本

```
# your repo, you can change it then or pass an argument to the script
# repo = $1 this get the first arg passed to the script
repo=plugins-snapshot-local
# change this by your artifact path, or pass an argument $2
artifact=kshuttle/ifrs16
path=$repo/$artifact
echo $path
~/jfrog rt download --flat $path/maven-metadata.xml version/
version=$(cat version/maven-metadata.xml | grep latest | sed "s/.*<latest>\([^<]*\)<\/latest>.*/\1/")
echo "VERSION $version"
~/jfrog rt download --flat $path/$version/maven-metadata.xml build/
build=$(cat  build/maven-metadata.xml | grep '<value>' | head -1 | sed "s/.*<value>\([^<]*\)<\/value>.*/\1/")
echo "BUILD $build"
# change this by your app name, or pass an argument $3
name=ifrs16
jar=$name-$build.jar
url=$path/$version/$jar

# Download
echo $url
~/jfrog rt download --flat $url 
```

# 用例：詹金斯管道

```
def getLatestArtifact(repo, pkg, appName, configDir){
    sh """
        ~/jfrog rt download --flat $repo/$pkg/maven-metadata.xml $configDir/version/
        version=\$(cat $configDir/version/maven-metadata.xml | grep latest | sed "s/.*<latest>\\([^<]*\\)<\\/latest>.*/\\1/")
        echo "VERSION \$version"
        ~/jfrog rt download --flat $repo/$pkg/\$version/maven-metadata.xml $configDir/build/
        build=\$(cat  $configDir/build/maven-metadata.xml | grep '<value>' | head -1 | sed "s/.*<value>\\([^<]*\\)<\\/value>.*/\\1/")
        echo "BUILD \$build"
        jar=$appName-\$build.jar
        url=$repo/$pkg/\$version/\$jar

        # Download
        echo \$url
        ~/jfrog rt download --flat \$url
    """
}

def clearDir(dir){
    sh """
        rm -rf $dir/*
    """

}

node('mynode'){
    stage('mysstage'){
        def repos =  ["plugins-snapshot-local","plugins-release-local"]

        for (String repo in repos) {
            getLatestArtifact(repo,"kshuttle/ifrs16","ifrs16","myConfigDir/")
        }
        //optional
        clearDir("myConfigDir/")
    }
} 
```

当您想在 1 个或多个 repos 之间获取最新包时，这很有帮助。希望对你也有帮助！有关 Jenkins 脚本化管道的更多信息，请访问[Jenkins 文档](https://jenkins.io/doc/book/pipeline/syntax/#scripted-pipeline)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-06-14T17:12:06.167

这可能是新的：

[https://artifactory.example.com/artifactory/repo/com/example/foo/1.0.[RELEASE]/foo-1.0.[RELEASE].tgz](https://artifactory.example.com/artifactory/repo/com/example/foo/1.0.[RELEASE]/foo-1.0.[RELEASE].tgz)

从 example.com 加载模块 foo 。逐字保留 [RELEASE] 部分。文档中提到了这一点，但并不清楚您实际上可以将 [RELEASE] 放入 URL 中（而不是开发人员的替换模式）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-11-13T12:30:36.190

使用 awk：

```
 curl  -sS http://the_repo/com/stackoverflow/the_artifact/maven-metadata.xml | grep latest | awk -F'<latest>' '{print $2}' | awk -F'</latest>' '{print $1}' 
```

使用 sed：

```
 curl  -sS http://the_repo/com/stackoverflow/the_artifact/maven-metadata.xml | grep latest | sed 's:<latest>::' | sed 's:</latest>::' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-03-04T12:31:19.227

没有人提到**xmllint**又名正确的 xml 解析器，安装它：

```
sudo apt-get update -qq
sudo apt-get install -y libxml2-utils 
```

用它：

```
ART_URL="https://artifactory.internal.babycorp.com/artifactory/api-snapshot/com/babycorp/baby-app/CD-684-my-branch-SNAPSHOT"
ART_VERSION=`curl -s $ART_URL/maven-metadata.xml | xmllint --xpath '//snapshotVersion[1]/value/text()' -` 
```

最后：

```
curl -s -o baby-app.jar ${ART_URL}/baby-app-${ART_VERSION}.jar 
```

或者

```
wget ${ART_URL}/baby-app-${ART_VERSION}.jar 
```

保留文件名

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-19T13:43:27.167

如果您需要在 Dockerfile 中下载工件，而不是使用 wget 或 curl 等，您可以简单地使用 'ADD' 指令：

添加 ${ARTIFACT_URL} /opt/app/app.jar

当然，棘手的部分是确定 ARTIFACT_URL，但在所有其他答案中已经足够了。

但是，[Docker 最佳实践](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#add-or-copy)强烈反对为此目的使用 ADD，并建议使用 wget 或 curl。****

# linux - 如何在命令行参数中传递“*”。？

> ID：13989037
> 
> 赞同：1
> 
> 时间：2012-12-21T11:10:33.443
> 
> 标签：linux, shell

看到我有下面的代码

```
#include<stdio.h>
int main ( int argc, char *argv[] )
{
        int i=0;
        for(i=1;i<argc-1;i++)
          printf(" %s \n",argv[i]);
        return 0;
} 
```

编译运行如下

```
gcc test.c
./a.out 1 * 2 
```

现在它的 o/p 伤痕累累..！

o/p 是：

```
 1 
 a.out 
 Desktop 
 Documents 
 Downloads 
 ipmsg.log 
 linux-fusion-3.2.6 
 Music 
 Pictures 
 Public 
 Templates 
 test.c 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:12:41.420

在星号周围使用单引号：

```
./a.out 1 '*' 2 
```

这应该可以防止您的 shell 将其解释为特殊字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T11:13:27.490

您可以使用调用您的测试

```
./a.out 1 \* 2 
```

如果您想将 * 作为参数传递。您还可以使用单引号`'*'`（如 Esa 建议的那样）或双引号`"*"`。

另请注意，您的循环当前忽略了最后一个参数。`i<argc`如果这不是故意的，请用作您的退出条件。

# javascript - 不在 Mozilla 中打印 smartphp 日历事件文本

> ID：13989041
> 
> 赞同：0
> 
> 时间：2012-12-21T11:10:37.577
> 
> 标签：javascript, css, firefox, printing

我在我的应用程序中使用智能 php 日历，我使用自定义打印来打印背景颜色和孔日历。

但是当我打印日历时，它在谷歌浏览器中工作，但在 mozilla 中不工作..

这是我的自定义打印代码。

```
<script>
  function printPage(printpage1)
  {
   var headstr = "<html><head><title></title></head><body><div style='-webkit-print-color-adjust:exact;'>";
   var footstr = "</div></body>";
   var newstr1 = document.getElementById(printpage1).innerHTML;
   var oldstr = document.body.innerHTML;
   document.body.innerHTML = headstr+newstr1+footstr;
   window.print();
   document.body.innerHTML = oldstr;
   location.reload();
   return false;
  }

</script> 
```

提前致谢..

# android - 过滤列表视图数据时强制关闭错误

> ID：13989049
> 
> 赞同：0
> 
> 时间：2012-12-21T11:11:09.857
> 
> 标签：android, listview, filter, arraylist

在这里问问题之前，我看了一下[这个线程。](https://stackoverflow.com/questions/8678163/list-filter-custom-adapter-dont-give-result)但是该线程包含简单字符串数组的示例，而在我的情况下，我使用的是 ArrayList> 所以我现在有点困惑。

我的 android 活动中有一个多选列表视图。我正在使用列表视图来显示联系人列表，以便用户一次可以选择多个电话号码。但现在我想为同样的目的添加搜索功能。我想要做的是在顶部放置一个 EditText，无论用户在该 EditText 中键入什么字符，我都希望 ListView 填充基于用户输入的过滤数据。我有一个扩展 BaseAdapter 的 CustomAdapter 和一个名为 Contact 的 POJO 类，我用它来获取和设置联系人详细信息。

**日志猫**

```
12-21 10:58:04.204: W/System.err(1737): TEXT EVENT FIRED
12-21 10:58:04.233: W/System.err(1737): IF TAG HITTED
12-21 10:58:04.373: W/System.err(1737): PUBLISH RESULT
12-21 10:58:05.493: D/dalvikvm(503): GC_CONCURRENT freed 414K, 16% free 3018K/3556K, paused 9ms+6ms, total 144ms
12-21 10:58:10.543: W/System.err(1737): TEXT EVENT FIRED
12-21 10:58:10.573: W/System.err(1737): ELSE TAG HITTED
12-21 10:58:10.683: W/System.err(1737): PUBLISH RESULT
12-21 10:58:15.292: I/CheckinService(641): Preparing to send checkin request
12-21 10:58:15.292: I/EventLogService(641): Accumulating logs since 1356087328635
12-21 10:58:15.413: W/System.err(1737): TEXT EVENT FIRED
12-21 10:58:15.673: W/System.err(1737): IF TAG HITTED
12-21 10:58:15.673: W/System.err(1737): PUBLISH RESULT
12-21 10:58:15.673: D/AndroidRuntime(1737): Shutting down VM
12-21 10:58:15.673: W/dalvikvm(1737): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-21 10:58:15.705: E/AndroidRuntime(1737): FATAL EXCEPTION: main
12-21 10:58:15.705: E/AndroidRuntime(1737): java.lang.NullPointerException
12-21 10:58:15.705: E/AndroidRuntime(1737):     at me.bluetitandev.apps.freesms.utils.MyCustomAdapter.getCount(MyCustomAdapter.java:47)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:801)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.widget.AbsListView$AdapterDataSetObserver.onChanged(AbsListView.java:5958)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at me.bluetitandev.apps.freesms.utils.MyCustomAdapter$MyContactFilter.publishResults(MyCustomAdapter.java:140)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.os.Looper.loop(Looper.java:137)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at java.lang.reflect.Method.invokeNative(Native Method)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at java.lang.reflect.Method.invoke(Method.java:511)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-21 10:58:15.705: E/AndroidRuntime(1737):     at dalvik.system.NativeStart.main(Native Method)
12-21 10:58:15.754: W/ActivityManager(296):   Force finishing activity me.bluetitandev.apps.freesms/.SelectRec 
```

**自定义适配器代码**

```
public class MyCustomAdapter extends BaseAdapter implements Filterable {

Context mContext;
private LayoutInflater mInflater;
SparseBooleanArray mSparseBooleanArray;
private ArrayList<Map<String,String>> mAdapData = new ArrayList<Map<String, String>>();

public MyCustomAdapter(Context mContext) {
    mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mSparseBooleanArray = new SparseBooleanArray();
}

public ArrayList<String> getCheckedItems() {
    ArrayList<String> mTempArry = new ArrayList<String>();
    for (int i = 0; i < mAdapData.size(); i++) {
        if (mSparseBooleanArray.get(i)) {
            Map<String, String> map = (Map<String, String>) mAdapData.get(i);
            final String numbr = map.get("Phone").toString();
            mTempArry.add(numbr);
        }
    }
    return mTempArry;
}

public int getCount() {
    return this.mAdapData.size();
}

public void addItem(String paramString1, String paramString2) {
    Map<String, String> NameNumber = new HashMap<String, String>();
    NameNumber.put("Name", paramString1);
    NameNumber.put("Phone", paramString2);
    this.mAdapData.add(NameNumber);
    notifyDataSetChanged();
}

@SuppressWarnings("unchecked")
public Object getItem(int paramInt) {
    return (ArrayList<Map<String, String>>) this.mAdapData.get(paramInt);
}

public long getItemId(int paramInt) {
    return paramInt;
}

public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup) {

    if (paramView == null) {
        paramView = mInflater.inflate(R.layout.multiplecontactview, null);
    }

    TextView txtName = (TextView) paramView.findViewById(R.id.txtContactName);
    TextView txtNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
    CheckBox mCheckBox = (CheckBox) paramView.findViewById(R.id.checkBox1);
    mCheckBox.setTag(paramInt);
    mCheckBox.setChecked(mSparseBooleanArray.get(paramInt));
    mCheckBox.setOnCheckedChangeListener(mCheckedChangeListener);
    txtName.setTextColor(Color.BLACK);
    txtNumber.setTextColor(Color.BLACK);
    for (int i = 0; i < mAdapData.size(); i++) {
        Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
        final String name = map.get("Name").toString();
        final String numbr = map.get("Phone").toString();
        txtName.setText(name);
        txtNumber.setText(numbr);
    }
    return paramView;
}

OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        mSparseBooleanArray.put((Integer) buttonView.getTag(), isChecked);
    }
};

@Override
public Filter getFilter() {
    return new MyContactFilter();
}

private class MyContactFilter extends Filter {

    @Override
    protected FilterResults performFiltering(CharSequence cs) {
        FilterResults results = new FilterResults();
        ArrayList<Map<String, String>> filList = new ArrayList<Map<String, String>>();

        if(cs != null && cs.toString().length() > 0) {
            System.err.println("IF TAG HITTED");
            for (int i = 0; i < mAdapData.size(); i++) {
                Map<String, String> map = (Map<String, String>) mAdapData.get(i);
                final String names = map.get("Name").toString();
                final String numbr = map.get("Phone").toString();
                if (names.compareTo(cs.toString()) == 0) {
                    Map<String, String> FilNameNumber = new HashMap<String, String>();
                    FilNameNumber.put("Name", names);
                    FilNameNumber.put("Phone", numbr);
                    filList.add(FilNameNumber);
                }
                results.values = filList;
                results.count = filList.size();
            }
        } else {
            System.err.println("ELSE TAG HITTED");
            synchronized (mAdapData) {
                results.values = mAdapData;
                results.count = mAdapData.size();
            }
        }
        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence cs, FilterResults fr) {
        System.err.println("PUBLISH RESULT");
        mAdapData = (ArrayList<Map<String, String>>) fr.values;
        notifyDataSetChanged();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:19:27.780

在您的`getCount`方法`@Override`丢失之前，只需添加它并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:26:02.283

在过滤了 2-3 次后，我得到了空值`mAdapData`，这导致应用程序崩溃。为了解决这个问题，我在过滤之前创建了原始值的副本，如果没有应用过滤器，我在结果中传递了该副本数据，从而解决了错误。

# mysql - 具有相同行名的 MYSQL JOIN

> ID：13989066
> 
> 赞同：2
> 
> 时间：2012-12-21T11:12:02.610
> 
> 标签：mysql

我正在尝试加入两张桌子，但我被卡住了。这两个表有一些同名的行。

```
table1: shop 
rows: sid, typeid, name, email_id, url, logo, app_link, phone, status, username, password

table2: shopnews
rows: nid, typeid, sid, url, logo, start_date, end_date, add_date, name, short_detail, status, updated_on 
```

我要做的是从商店新闻中获取 *，从商店中获取名称和 url，其中两个表中的 sid 相同。

我真的不知道我在这里做什么，但这是我的代码的一部分：

```
 mysql_select_db($db, $con);
  $result = mysql_query("SELECT sid AS ssid, name AS ssname, url AS ssurl, logo AS sslogo, status AS sstatus FROM shop INNER JOIN shopnews ON shop.ssid = shopnews.sid"); 

  while($row = mysql_fetch_array($result))
  {
      $nid=$row['nid'];
      $typeid=$row['typeid'];
      $sid=$row['sid'];
      $shopname=$row['ssname'];
      $shopurl=$row['ssurl'];
      $url=$row['url'];
      $logo=$row['logo'];
      $start_date=$row['start_date'];
      $end_date=$row['end_date'];
      $add_date=$row['add_date'];
      $name=$row['name'];
      $short_detail=$row['short_detail'];
      $shopstatus=$row['sstatus'];
      $status=$row['status'];
  } 
```

> 警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:14:45.990

试试这个：

```
SELECT sn.*, s.name ssname, s.url surl
FROM shop s INNER JOIN shopnews sn ON s.sid = sn.sid 
```

# xml - 查找字符串并用换行符和缩进替换

> ID：13989067
> 
> 赞同：1
> 
> 时间：2012-12-21T11:12:11.350
> 
> 标签：xml, linux, bash, shell, replace

我想在文件中找到一个特定的字符串并将其替换如下：

在文件 test*.xml

```
<root>
    <list>
        <item ID="abc">
            <amount>1</amount>
            <text>TEST</text>
        </item>
        <item ID="cde">
            <amount>1</amount>
            <text>TEST 2</text>
        </item>
    </list>
</root> 
```

将其替换为

```
<root>
    <list>
        <item ID="abc">
            <amount>0</amount>
            <text>TEST</text>
        </item>
        <item ID="cde">
            <amount>1</amount>
            <text>TEST 2</text>
        </item>
    </list>
</root> 
```

到目前为止，我有这个：

```
find . -name "test*" -print | xargs sed -i 's/<item ID=\"abc\">/<item ID=\"abc\">/g' 
```

好吧，它当然什么也没做，但我不知道我如何能够“跳过”换行符和空格。我不允许更改缩进。我尝试使用单行代码来完成，但一个小的 bash 脚本也应该可以解决问题，但我对 bash 非常缺乏经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:15:21.363

我宁愿使用支持 XML 的工具来操作 XML，这样您就可以保持格式良好、字符/实体编码等。

[XMLStarlet](http://xmlstar.sourceforge.net/)运行良好。它将允许您使用 XPath 来指定 XML 中的特定节点并更改这些节点。我不认为你真的应该担心缩进等。这通常被视为格式化。

# java - 没有下拉列表的 JComboBox 的替代品

> ID：13989088
> 
> 赞同：0
> 
> 时间：2012-12-21T11:13:55.273
> 
> 标签：java, swing, jcombobox

Java、Swing、JCombobox。

我需要一个带有 2 个箭头（向上和向下）的单行文本框，而不是下拉列表。

我敢肯定这很容易，但我还没有成功找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:17:32.080

看看[`JSpinner`](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)_[`SpinnerListModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html#standard)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T11:19:58.507

根据您的要求，`Java Swing`已经有一个名为`JSpinner`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:20:16.400

尝试使用 `JList`. 只需设置列表的高度，以便一次只能看到一个元素。有关更多信息，请参阅此...

[http://zetcode.com/tutorials/javaswingtutorial/basicswingcomponentsII/](http://zetcode.com/tutorials/javaswingtutorial/basicswingcomponentsII/)

# c# - 如何初始化泛型参数类型 T？

> ID：13989093
> 
> 赞同：28
> 
> 时间：2012-12-21T11:14:11.933
> 
> 标签：c#, .net, generics

简单问题：
如果您有`string x`, 来初始化它，您只需执行以下操作之一：

```
string x = String.Empty; 
```

或者

```
string x = null; 
```

泛型参数 T 呢？

我试过做：

```
void someMethod<T>(T y)
{
    T x = new T();  
    ...
} 
```

生成错误：
**无法创建变量类型“T”的实例，因为它没有 new() 约束**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-21T11:16:01.877

你有两个选择：

您可以通过`where T : new()`在方法中添加：来约束 T:。现在，您只能将`someMethod`与具有无参数默认构造函数的类型一起使用（请参阅[类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)）。

或者你使用`default(T)`. 对于引用类型，这将给出`null`. 但是例如，对于一个整数值，这将给出`0`（参见[通用代码中的默认关键字](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)）。

这是一个演示差异的基本控制台应用程序：

```
using System;

namespace Stackoverflow
{
    class Program
    {
        public static T SomeNewMethod<T>()
            where T : new()
        {
            return new T();
        }

        public static T SomeDefaultMethod<T>()
            where T : new()
        {
            return default(T);
        }

        struct MyStruct { }

        class MyClass { }

        static void Main(string[] args)
        {
            RunWithNew();
            RunWithDefault();
        }

        private static void RunWithDefault()
        {
            MyStruct s = SomeDefaultMethod<MyStruct>();
            MyClass c = SomeDefaultMethod<MyClass>();
            int i = SomeDefaultMethod<int>();
            bool b = SomeDefaultMethod<bool>();

            Console.WriteLine("Default");
            Output(s, c, i, b);
        }

        private static void RunWithNew()
        {
            MyStruct s = SomeNewMethod<MyStruct>();
            MyClass c = SomeNewMethod<MyClass>();
            int i = SomeNewMethod<int>();
            bool b = SomeNewMethod<bool>();

            Console.WriteLine("New");
            Output(s, c, i, b);
        }

        private static void Output(MyStruct s, MyClass c, int i, bool b)
        {
            Console.WriteLine("s: " + s);
            Console.WriteLine("c: " + c);
            Console.WriteLine("i: " + i);
            Console.WriteLine("b: " + b);
        }

    }
} 
```

它产生以下输出：

```
New
s: Stackoverflow.Program+MyStruct
c: Stackoverflow.Program+MyClass
i: 0
b: False
Default
s: Stackoverflow.Program+MyStruct
c:
i: 0
b: False 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-21T11:14:43.670

使用`default`关键字。

```
T x = default(T); 
```

请参阅：[通用代码中的默认关键字（C# 编程指南）](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)

> 给定参数化类型 T 的变量 t，语句 t = null 仅在 T 是引用类型且 t = 0 仅适用于数值类型而不适用于结构时才有效。解决方案是使用 default 关键字，它将为引用类型返回 null，而为数值类型返回零。对于结构，它将返回结构的每个成员，根据它们是值类型还是引用类型，初始化为零或空。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-21T11:14:56.417

您需要`new`为类型参数添加一个约束`T`。

```
void someMethod<T>(T y) where T : new()
{
    T x = new T();  
    ...
} 
```

但是，这仅对具有默认构造函数的类型有效。

`where`for 子句是`T`一个[泛型类型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。在这种情况下，它要求`T`应用此方法的任何类型都必须具有公共无参数构造函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-21T11:30:47.737

如果您确实需要 T 的实例而不是引用类型的默认空值，请使用：

```
Activator.CreateInstance() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:19:49.880

您可以使用`default`构造将其设置为该类型的默认值。

default 关键字允许你告诉编译器在编译时应该使用这个变量的默认值。如果提供的类型参数是数值（例如，int、long、decimal），则默认值为零。如果提供的类型参数是引用类型，则默认值为 null。如果提供的类型参数是结构，则结构的默认值是通过将结构的每个成员字段初始化为数字类型为零或引用类型为 null 来确定的。

使用类似的东西：

`T data = default(T);`

有关详细信息，请阅读：[将通用变量初始化为其默认值](http://en.csharp-online.net/CSharp_Generics_Recipes%E2%80%94Initializing_Generic_Variables_to_Their_Default_Values)

# mysql - 按特殊顺序对表记录进行排序

> ID：13989095
> 
> 赞同：7
> 
> 时间：2012-12-21T11:14:22.953
> 
> 标签：mysql, sql, hibernate

我有表：

```
+----+--------+----------+
| id | doc_id | next_req | 
+----+--------+----------+
|  1 |    1   |     4    | 
|  2 |    1   |     3    | 
|  3 |    1   |     0    | 
|  4 |    1   |     2    | 
+----+--------+----------+ 
```

**id** - 自动增量主键。

**nex_req** - 表示记录的顺序。（**next_req** =记录**ID**）

如何构建 SQL 查询按以下顺序获取记录：

```
+----+--------+----------+
| id | doc_id | next_req | 
+----+--------+----------+
|  1 |    1   |     4    | 
|  4 |    1   |     2    | 
|  2 |    1   |     3    | 
|  3 |    1   |     0    | 
+----+--------+----------+ 
```

解释：

```
record1 with id=1 and next_req=4 means: next must be record4 with id=4 and next_req=2
record4 with id=5 and next_req=2 means: next must be record2 with id=2 and next_req=3 
record2 with id=2 and next_req=3 means: next must be record3 with id=1 and next_req=0 
record3 with id=3 and next_req=0: means that this is a last record 
```

我需要在表中存储记录的顺序。这对我很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:12:45.303

如果可以，请更改表格格式。不要命名下一条记录，而是按顺序标记记录，以便您可以使用自然的 SQL 排序：

```
+----+--------+------+
| id | doc_id | sort | 
+----+--------+------+
|  1 |    1   |  1   | 
|  4 |    1   |  2   | 
|  2 |    1   |  3   | 
|  3 |    1   |  4   | 
+----+--------+------+ 
```

然后你甚至可以在 doc_id 上进行集群索引，如果你需要对性能问题进行排序。老实说，如果您需要对行进行重新排序，那么与您使用的链接列表相比，它并没有更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:23:54.153

我能够在 Oracle 中为您提供解决方案，

```
select id,doc_id,next_req from table2 
start with id = 
(select id from table2 where rowid=(select min(rowid) from table2))
connect by prior next_req=id 
```

[小提琴演示](http://sqlfiddle.com/#!4/f7b2f/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:28:50.697

我建议修改您的表格并添加另一列 OrderNumber，因此最终按此列排序会很容易。

虽然这种方法可能存在问题：

1）您有现有表，需要设置 OrderNumber 列值。我想这部分很容易。您可以简单地设置初始零值并添加一个 CURSOR，例如在您的记录中移动并增加您的订单号值。

2）当表格中出现新行时，您必须修改您的 OrderNumber，但这取决于您的具体情况。如果您只需要将项目添加到列表的末尾，那么您可以将新值设置为 MAX + 1。在另一种情况下，您可以尝试在插入新项目时编写 TRIGGER 并调用与第 1 点类似的步骤。这可能会对性能造成非常严重的影响，因此您必须仔细研究您的架构，并可能修改这种不寻常的结构。

# knockout.js - 更新 ko.observable 不反映使用淘汰赛的 UI

> ID：13989099
> 
> 赞同：0
> 
> 时间：2012-12-21T11:14:40.640
> 
> 标签：knockout.js

我正在使用 wizmo 网格并绑定到创建为 StockData 的模型：

//我的视图模型：

```
function StockData(data)
{
var self=this;
self.Symbol = data.Symbol;
self.LTP=ko.observable(data.LTP);
}; 
```

//ajax服务调用成功后添加数据

```
 var arr[];
    jsondata=event.data.value;
    $.each(jsonData,function(i)
    {
    vm.WijGridViewModel.Data.push(new StockData({Symbol:jsonData[i].Symbol,LTP:jsonData[i].LTP}));
    });
ko.utils.arrayForEach(vm.WijGridViewModel.Data(),function(item)
{
vm.WijGridViewModel.FilteredData.push(item);
}); 
```

***更新数据***

**在下面工作 -> 但我不想使用它的原因是它只是将 observable[] 中的整个旧项目替换为新项目，而我只想更新一个 LTP 字段。我尝试在下面将整个新项目替换为旧项目，并注意到使用大量数据和实时它给了我一个性能问题**

```
var newItem = event.data.value1;
var index = event.data.value2;
vm.WijGridViewModel.FilteredData.replace(
vm.WijGridViewModel.FilteredData()[index],
{Symbol:newItem.Symbol,LTP:newItem .LTP}); 
```

**到目前为止，我尝试了这个，它更新了一个 observable 但不更新一个 ui：**

```
ko.utils.arrayForEach(vm.WijGridViewModel.FilteredData(),function(item)
{
  if(item.Symbol==newItem.Symbol)
{
  item.LTP= newItem.LTP;
}
}); 
```

//与wijgrid交互的通用类

```
function WijGridViewModel(){
var self=this;
self.data=ko.observableArray();
self.FilteredData=ko.observableArray();
return
{
Data:self.data,
FilteredData:self.FilteredData
}
} 
```

使用 wijgrid

```
<table id="dataGrid" data-bind="wijgrid:{data:WijGridViewModel.FilteredData}"> 
```

更新可观察字段时面临更新 wijgrid 的问题。对此的任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:49:43.850

observable 是一个函数，所以要获得它的值，你可以调用它：

```
var value = item.LTP(); 
```

要设置值，请将新值传递给方法：

```
item.LTP(newValue); 
```

所以只更新 LTP，也许你可以试试这个（如果没有完整的例子很难准确地说出来）：

```
ko.utils.arrayForEach(vm.WijGridViewModel.FilteredData(),function(item)
{
  if(item.Symbol==newItem.Symbol)
  {
    item.LTP(newItem.LTP());
  }
}); 
```

# android - 如何解决 android 中的致命异常 Timer-0？

> ID：13989109
> 
> 赞同：2
> 
> 时间：2012-12-21T11:15:11.807
> 
> 标签：android, android-networking

我想检查网络状态，如果网络未连接意味着我将在我的页面中显示警报对话框。

这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);<br>
    setContentView(R.layout.activity_main);  

    // make the activity visible 
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {              
             ServicesLayer objService = new ServicesLayer();
             boolean status = objService.connectedToNetwork(this);
             System.out.println("status: " + status);
             if(objService.connectedToNetwork(this)){

                callService();
             }else{

                System.out.println("Inside Network Else");

                // Display message and set flag not connected
                showAlertDialog(this, "Network Connection", "Connection to network is required for proper use of the iHelpPlus. Would you like to enable it now?" );
             }
        }
    }, 1000);    
}   

@SuppressWarnings("deprecation")
public void showAlertDialog(Context context, String title, String message) {<br/>
    AlertDialog alertDialog = new AlertDialog.Builder(context).create();<br/>

    // Setting Dialog Title
    alertDialog.setTitle(title);

    // Setting Dialog Message
    alertDialog.setMessage(message);

    // Setting OK Button
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            finish();
        }
    });

    // Showing Alert Message
    alertDialog.show();
} 
```

如果网络已连接意味着它工作正常......否则应用程序将关闭并出现强制关闭错误。

如何在我的应用程序中解决上述问题？

请任何人帮助我

# mysql - mysql cakephp查询连接多个表以获得列的总和

> ID：13989119
> 
> 赞同：0
> 
> 时间：2012-12-21T11:15:55.667
> 
> 标签：mysql, cakephp

我想运行一个查询来计算特定列的总和。为此，我需要加入两个表来映射匹配的记录并给出结果。下面我粘贴我的查询，请纠正我查询中的错误。它可能映射两次，所以它显示错误的结果。

```
$this->Inventory->find('all',array('joins'=>array(
                    array('table' => 'items',
                        'alias' => 'item',
                        'type' => 'left',
                        'conditions' => array(
                        'Inventory.item_id = item.id')
                    ),
                    array('table' => 'material_owners',
                        'alias' => 'owner',
                        'type' => 'left',
                        'conditions' => array(
                        'Inventory.material_owner_id = owner.id')
                    ),
                    array('table' => 'projects',
                        'alias' => 'project',
                        'type' => 'left',
                        'conditions' => array(
                        'Inventory.project_id = project.id')
                    ),
                    array('table' => 'material_payments',
                        'alias' => 'mp',
                        'type' => 'left',
                        'conditions' => array(
                        'Inventory.material_owner_id=mp.material_owner_id'),

                    ),
                  ),
                  'conditions'=>array('Inventory.project_id'=>$project_id),
                  'fields' =>array('sum(Inventory.total_amount) as total_amount','sum(mp.paid_amount) as paid_amount','item.name','item.id','owner.id','owner.first_name','owner.last_name','project.id','project.name'),
                  'group'=> array('item.name','item.id','owner.id','owner.first_name','owner.last_name','project.name','project.id')
                    )
                ); 
```

这是 cakephp 生成的结果查询。

```
SELECT sum("Inventory"."total_amount") as total_amount, sum("mp"."paid_amount") as paid_amount, "item"."name" AS "item__name", "item"."id" AS "item__id", "owner"."id" AS "owner__id", "owner"."first_name" AS "owner__first_name", "owner"."last_name" AS "owner__last_name", "project"."id" AS "project__id", "project"."name" AS "project__name" FROM "inventories" AS "Inventory" left JOIN "items" AS "item" ON ("Inventory"."item_id" = "item"."id") left JOIN "material_owners" AS "owner" ON ("Inventory"."material_owner_id" = "owner"."id") left JOIN "projects" AS "project" ON ("Inventory"."project_id" = "project"."id") left JOIN "material_payments" AS "mp" ON ("Inventory"."material_owner_id" = "mp"."material_owner_id") LEFT JOIN "items" AS "Item" ON ("Inventory"."item_id" = "Item"."id") LEFT JOIN "units" AS "Unit" ON ("Inventory"."unit_id" = "Unit"."id") LEFT JOIN "projects" AS "Project" ON ("Inventory"."project_id" = "Project"."id") LEFT JOIN "material_owners" AS "MaterialOwner" ON ("Inventory"."project_id" = "MaterialOwner"."id") WHERE "Inventory"."project_id" = '4' GROUP BY "item"."name", "item"."id", "owner"."id", "owner"."first_name", "owner"."last_name", "project"."name", "project"."id" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:44:03.743

我不确定你想在这里实现什么。您的蛋糕查询是否有效？您得到什么错误或您希望输出如何？

对于解决方案，我会看一下虚拟字段。 [http://book.cakephp.org/2.0/en/models/virtual-fields.html](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

它们可以在您使用连接查询之前添加到每个模型中。

# xml - 使用 VBA 宏将 xml 导出到 excel 时，标题/标签不显示

> ID：13989122
> 
> 赞同：0
> 
> 时间：2012-12-21T11:16:03.080
> 
> 标签：xml, excel, vba

我正在使用下面的代码将 xml 导出到 excel。

```
Sub ImportXMLtoList()  

    Dim strTargetFile As String  
    Application.DisplayAlerts = False
    strTargetFile = "C:\XML_Demo\demo.xml"  
    Workbooks.OpenXML Filename:=strTargetFile, LoadOption:=xlXmlLoadImportToList
    Application.DisplayAlerts = True  

End Sub 
```

执行此代码时，电子表格中会显示 xml 值，但不会显示相应的标签。“demo.xml”是我放在这里的一个虚拟 xml，当我处理客户端数据时，我无法共享有这个问题的实际 xml。相同的代码适用于其他 xml。请让我知道会是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:26:10.630

尝试`Workbooks.OpenXML Filename:=strTargetFile, LoadOption:=xlXmlLoadOpenXml`

# javascript - 通过引用传递调用作为按值调用

> ID：13989123
> 
> 赞同：0
> 
> 时间：2012-12-21T11:16:07.303
> 
> 标签：javascript, html

我一直在使用此代码将*ImageId*移动到*jCrop*

 *但是`_ImageId`变量是通过引用给出的。

如何按值给*jCrop*`_ImageId`变量？

 *```
 var _ImageId = 0;

    $(document).ready(
    function(){    
        $('.page .image').attr("id", function(){  
        _ImageId = $(this).attr("id");
        return $(this).attr("id");
    }).Jcrop({
        ImageId : _ImageId,  // my problem is here , when _ImageId change , all of them will change 
        onSelect: Page_ImageSelected
    });      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:23:28.767

你的代码有点……“奇怪”。

也许你应该尝试这样的事情：

```
$(document).ready(function() {
    $('.page .image').each(function() {
        var element = $(this);
        element.Jcrop({
            ImageId : element.attr('id'),
            onSelect: Page_ImageSelected
        });
    });
}​);​ 
```

当您使用数字、整数、浮点数、字符串、布尔值等“简单”类型时，Javascript 使用“按值”调用...

这里的问题是你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:25:48.907

您已经*通过*`_ImageId`值传递，该方法`JCrop`将接收其`ImageId`属性*为* `0`（或回调中分配的值`attr`）的对象，并且在更改时不会`_ImageId`更改。**

# java - 如何执行以下包含类型作为输入参数的存储过程

> ID：13989124
> 
> 赞同：1
> 
> 时间：2012-12-21T11:16:10.080
> 
> 标签：java, oracle, stored-procedures, plsql, toad

我创建了一个程序来接受用户类型作为输入。谁能告诉我如何通过蟾蜍执行相同的操作？TYPE 和 PROCEDURE 详细信息如下。

```
CREATE OR REPLACE TYPE CER_GL_ENTRY_TYPE AS OBJECT
                  (idKey NUMBER (3),
                   shortName VARCHAR2 (15),
                   fmrCusip VARCHAR2 (15),
                   incorrectTrdShares NUMBER (10),
                   incorrectTrdPrice NUMBER (10, 2),
                   incorrectTrdBuySell VARCHAR2 (15),
                   incorrectTrdCommRate NUMBER (10, 2),
                   incorrectTrdCommission NUMBER (10, 2),
                   incorrectTrdFees NUMBER (10, 2),
                   incorrectTrdNet NUMBER (10, 2),
                   correctionTrdShares NUMBER (10, 2),
                   correctionTrdPrice NUMBER (10, 2),
                   correctionTrdBuySell VARCHAR2 (15),
                   correctionTrdCommRate NUMBER (10, 2),
                   correctionTrdCommission NUMBER (10, 2),
                   correctionTrdFees NUMBER (10, 2),
                   correctionTrdNet NUMBER (10, 2),
                   currency VARCHAR2 (15),
                   fx VARCHAR2 (15),
                   netUSD NUMBER (10, 2),
                   notes VARCHAR2 (15)
                   );

CREATE or REPLACE TYPE CER_GL_ENTRY_TYPE_LIST AS TABLE OF  CER_GL_ENTRY_TYPE;

CREATE OR REPLACE PROCEDURE GL_PROCESS_BULK_ENTRIES (p_array IN CER_GL_ENTRY_TYPE_LIST, p_status out varchar2)
AS
   v_count   NUMBER;
   row_detail CER_GL_ENTRY_TYPE;
BEGIN
   --p_arr_int := NEW array_int ();
   --p_arr_int.EXTEND (10);
   --len := p_array.COUNT;
   v_count := 0;

   FOR i IN 1 .. p_array.COUNT
   LOOP
      row_detail := p_array(i);
      DBMS_OUTPUT.put_line (row_detail.idKey);
      --p_arr_int (i) := v_count;
      v_count := v_count + 1;
      p_status := 'true';
   END LOOP;
    DBMS_OUTPUT.put_line (v_count);
    DBMS_OUTPUT.put_line (p_status);
   EXCEPTION
      WHEN OTHERS THEN
         -- handle errors here...
         dbms_output.put_line('Error: '||substr(1,255,sqlerrm));
END;
/ 
```

谁能告诉我如何执行程序 GL_PROCESS_BULK_ENTRIES？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:10:07.890

例如，将一些随机数据分配给表：

```
SQL> set serverout on
SQL> declare
  2    t_mytab  CER_GL_ENTRY_TYPE_LIST := CER_GL_ENTRY_TYPE_LIST();
  3     v_status varchar2(10);
  4  begin
  5
  6    for idx in 1..10 loop
  7      t_mytab.extend;
  8      t_mytab(t_mytab.last) := CER_GL_ENTRY_TYPE(idx, 'x', 'x', 0, 1, 'x', 1, 1, 1, 1, 1, 1, 'x', 1, 1, 1, 1, 'x', 'x', 2, 'foo');
  9    end loop;
 10
 11    GL_PROCESS_BULK_ENTRIES(t_mytab, v_status);
 12
 13  end;
 14  /
1
2
3
4
5
6
7
8
9
10
10
true

PL/SQL procedure successfully completed. 
```

或者你可以，如果你有一个静态列表，只需分配一个：

```
SQL> declare
  2    t_mytab  CER_GL_ENTRY_TYPE_LIST := CER_GL_ENTRY_TYPE_LIST();
  3     v_status varchar2(10);
  4  begin
  5
  6    t_mytab := CER_GL_ENTRY_TYPE_LIST(
  7                CER_GL_ENTRY_TYPE(123, 'x', 'x', 0, 1, 'x', 1, 1, 1, 1, 1, 1, 'x', 1, 1, 1, 1, 'x', 'x', 2, 'foo'),
  8                CER_GL_ENTRY_TYPE(2, 'x', 'x', 0, 1, 'x', 1, 1, 1, 1, 1, 1, 'x', 1, 1, 1, 1, 'x', 'x', 2, 'foo')
  9              );
 10
 11    GL_PROCESS_BULK_ENTRIES(t_mytab, v_status);
 12
 13  end;
 14  /
123
2
2
true 
```

# java - 如何在 Hibernate 中将子类与父类映射？

> ID：13989128
> 
> 赞同：3
> 
> 时间：2012-12-21T11:16:13.903
> 
> 标签：java, hibernate, jpa

在我的 Hibernate Pojo 类中，我正在使用这样的..

```
@Entity
@Table(name="EC_TIMETABLE")
public class TimetableVO{
@ManyToOne
@JoinColumn(name="SKILLSET_ID", insertable=false, updatable=false)
private SkillsetVO skillset;
...
...
} 
```

和另一个豆子

```
@Entity
@Table(name="EC_SKILLSET")
public class SkillsetVO{

    @ManyToOne
    @JoinColumn(name="USER_ID", insertable=false, updatable=false)
    private UserVO user;

    @ManyToOne
    @JoinColumn(name="COURSE_ID", insertable=false, updatable=false)
    private CourseVO course;
} 
```

还有我的用户 Bean..

```
@Entity
@Table(name = "EC_USER")
public class UserVO extends AbstractVO {
@OneToMany(mappedBy = "user", fetch = FetchType.EAGER)
    private Set<SkillsetVO> skillset;
} 
```

在我的服务类中，我只是在插入 bean ..

```
@Transactional
public void createEvent(TimetableVO timetableVO) throws DataAccessException {
        System.out.println(timetableVO.getSkillset().getId());//Hear id is P.K in SkillSetVO
    entityManager.persist(timetableVO);
} 
```

听到输出语句打印`"S1"`但在数据库中它显示`NULL`...

那么他们的任何错误映射是我设置到 Bean 类中的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:36:35.180

```
@ManyToOne
@JoinColumn(name="SKILLSET_ID", insertable=false, updatable=false)
private SkillsetVO skillset; 
```

尝试删除`insertable=false`

# android - 如果我单击 getview 内的 listview 中的按钮，我希望我的两个视图设置为可见

> ID：13989130
> 
> 赞同：3
> 
> 时间：2012-12-21T11:16:31.927
> 
> 标签：android, custom-adapter

在 getView 里面 addprod.setOnClickListener 我正在使两个视图可见，如果我初始化，你会在图像中看到 0 和减号按钮

```
final Button decprod=(Button)convertView.findViewById(R.id.decprod);
final TextView disprod=(TextView)convertView.findViewById(R.id.disprod); 
```

像这样，即两个视图都是最终视图，那么我将两个视图都显示在我想要的位置，但是如果我按下 addprod 按钮删除最终视图，那么两个视图在其他地方都是可见的，正如您在这张图片中看到的那样，最终的.. ...我知道匿名内部类只能访问最终的封闭方法的变量，或者我们可以将其声明为全局变量，但如果我全局声明，我无法使正确的视图可见

![在此处输入图像描述](../Images/ba053209bc78b65c28ac1a77322c2304.png)

```
 public class ItemListBaseAdapter extends BaseAdapter {

            private  ArrayList<HashMap<String, String>> itemDetailsrrayList;
             Bitmap bitmap[];
                Context context1;
                String ab;

            private LayoutInflater l_Inflater;

            public ItemListBaseAdapter(Context context, ArrayList<HashMap<String, String>> mylist)
            {

                itemDetailsrrayList = mylist;
                //l_Inflater = LayoutInflater.from(context);
                context1=context;

            }

            public int getCount() {
                return itemDetailsrrayList.size();

            }

            public Object getItem(int position) {
                return itemDetailsrrayList.get(position);
            }

            public long getItemId(int position) {

                return position;
            }

            public View getView( final int position, View convertView, ViewGroup parent)
            {
              int ruban=3;

                //final ViewHolder holder;

                if (convertView == null) {
                    l_Inflater = LayoutInflater.from(context1);

                     convertView = l_Inflater.inflate(R.layout.list1, null,true);

                }

                TextView txt_itemName = (TextView) convertView.findViewById(R.id.textView1);
                TextView txt_itemDescription = (TextView) convertView.findViewById(R.id.mrp1);
                TextView txt_itemPrice = (TextView) convertView.findViewById(R.id.ourprice1);
                TextView txt_itemSave = (TextView) convertView.findViewById(R.id.save1);
                //holder.txt_itemw = (TextView) convertView.findViewById(R.id.textView4);
                WebView itemimmm=(WebView)convertView.findViewById(R.id.imageView1);
                TextView t1 = (TextView) convertView.findViewById(R.id.t1);
                TextView t2 = (TextView) convertView.findViewById(R.id.t2);
                TextView t3 = (TextView) convertView.findViewById(R.id.t3);
                Button addprod=(Button)convertView.findViewById(R.id.addprod);
                final Button decprod=(Button)convertView.findViewById(R.id.decprod);
                final TextView disprod=(TextView)convertView.findViewById(R.id.disprod);
                decprod.setVisibility(View.GONE);
                disprod.setVisibility(View.GONE);

                txt_itemDescription.setPaintFlags(txt_itemDescription.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                itemimmm.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

                txt_itemName.setTypeface(AllItems.face);
                txt_itemDescription.setTypeface(AllItems.face);
                txt_itemPrice.setTypeface(AllItems.face);
                txt_itemSave.setTypeface(AllItems.face);
                //holder.txt_itemw.setTypeface(AllItems.face);
                t1.setTypeface(AllItems.rupee);
                t2.setTypeface(AllItems.rupee);
                t3.setTypeface(AllItems.rupee);
                //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                //StrictMode.setThreadPolicy(policy);
                txt_itemName.setText(itemDetailsrrayList.get(position).get("name"));
                txt_itemDescription.setText(itemDetailsrrayList.get(position).get("price"));
                txt_itemPrice.setText(itemDetailsrrayList.get(position).get("sp"));
                txt_itemSave.setText(itemDetailsrrayList.get(position).get("save"));
                //holder.txt_itemw.setText(itemDetailsrrayList.get(position).get("type"));
                itemimmm.loadUrl(itemDetailsrrayList.get(position).get("image"));
                if(itemDetailsrrayList.get(position).get("name").equals("Daughter")||itemDetailsrrayList.get(position).get("name").equals("Ethnic"))
                {
                Log.e("name", String.valueOf(itemDetailsrrayList.get(position).get("name")));
                //decprod.setVisibility(View.VISIBLE);
                //disprod.setVisibility(View.VISIBLE);
                }

                  // Log.e("before", "try");

            /*  try{

                        Log.e("try", String.valueOf(itemDetailsrrayList.get(position).get("image")));
                     Bitmap bitmap1 = BitmapFactory.decodeStream((InputStream) new URL(itemDetailsrrayList.get(position).get("image")).getContent());
                     itemimmm.setImageBitmap(bitmap1);
                    }catch(Exception ex){

                         ex.printStackTrace();
                         Log.e("error",String.valueOf(ex));
                     itemimmm.setImageResource(getResources().getIdentifier("ic_launcher", "drawable", getPackageName())); 

                        Log.e("catch", "catch");*/

                //prodImage.setImageResource(getResources().getIdentifier("sample", "drawable", getPackageName()));

                //itemimmm.setImageResource(getResources().getIdentifier("ic_launcher", "drawable", getPackageName())); 

                //holder.itemImage.setImageBitmap(bitmap[position]);

                /*if(){
                    disprod.setText(String.valueOf(Integer.parseInt(String.valueOf(disprod.getText()))));
                }*/

              addprod.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0)
                    {

                        decprod.setVisibility(View.VISIBLE);
                        disprod.setVisibility(View.VISIBLE);

                    }
                });

                decprod.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0)
                    {
                        //Log.v("item name", String.valueOf(itemDetailsrrayList.get(position).get("price")));

                    }
                });

               /* textView.setText(getelement()[position]);

                 ImageView imageView = (ImageView) convertView
                .findViewById(R.id.icon);
                 imageView.setImageBitmap(bitmap);*/

                    return convertView;

                   }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:39:30.920

我认为您应该尝试在您的 ListActivity 中制作您的按钮操作，而不是在您的适配器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T23:36:26.803

很简单，尝试将项目位置添加到视图标签中，稍后在 OnClick(View v) 中检索该位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:55:57.300

如果你申请了，分配给组件的位置将被删除。尝试使用隐形。

# linq - Web服务返回列表

> ID：13989132
> 
> 赞同：0
> 
> 时间：2012-12-21T11:16:40.580
> 
> 标签：linq, web-services, list, linq-to-sql

我有一个返回的网络服务`DataTable`，但我想返回一个列表而不是它。有没有办法直接从 SQL 返回列表，或者我必须将其作为 a 返回`DataTable`，然后将其转换为列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:27:10.283

您要做的是将 DataTable 中的每一行转换为一个对象。

这是一篇不错的博客文章，其中显示了一个帮助类：[Converting Custom Collections To and From DataTable](http://lozanotek.com/blog/archive/2007/05/09/Converting_Custom_Collections_To_and_From_DataTable.aspx)

这个想法是您循环遍历所有行，然后使用反射来创建对象。您可以通过将每个列名称映射到相应的属性名称来做到这一点。

您还可以使用 Linq to DataSet 对您的 DataTable 运行 Linq 查询。在 Linq 中，您可以使用 Projection 将数据转换为新类型。

以下是一些示例：[查询表达式语法示例：投影 (LINQ to DataSet)](http://msdn.microsoft.com/en-us/library/bb386943.aspx)

# jquery - 带有 datatype=script 的 jquery post 和带有 rails 的 jquery mobile

> ID：13989134
> 
> 赞同：1
> 
> 时间：2012-12-21T11:16:51.140
> 
> 标签：jquery, ruby-on-rails, jquery-mobile

我有一个具有移动和 html 格式类型的应用程序；

在表单中有一个字段必须用远程 Web 服务计算的值填充。使用 jquery，我使用 $(post) API 来调用调用 Web 服务的控制器操作

```
 $.post(url, $(this).serialize(), null, "script"); 
```

控制器计算一个实例变量...

```
@myvar = myvalue
....
respond_to do |format|
  format.js 
end 
```

然后返回一个 .js.erb 模板。我在表单中设置字段的值

```
$('#mymodel_myfield').val('<%= @myvar %>'); 
```

这就像 html 中的魅力一样，但我无法让它在移动视图中工作，我正在使用 Jquery Mobile 和 Mobylette gem。

js.erb 模板中的 jquery 函数没有被执行，因为 rails 需要一个 .mobile.erb 文件。

我也在尝试对移动视图使用不同的方法，即使用 json 或 html 数据类型调用 $.post 并使用回调函数在我的 jqm 视图中注入 .mobile.erb 模板，但找不到方法它工作。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T00:19:06.653

好的，使用了稍微不同的方法，但问题解决了。

> 注意：我必须使用wireshark才能看到rails发送到移动设备的到底是什么，因为移动浏览器上没有firebug....当查看发送回浏览器的数据时，解决方案变得清晰，我看到响应包括应用程序布局，而我期望只接收 json 字符串。

1）用于调用控制器动作的jqm形式的按钮是：

```
<div class="ui-block-c">
  <%= link_to "compute", '#', class: 'compute-myval',:"data-role" => "button", :"data-ajax" => false  %>
</div> 
```

2）控制器动作将结果保存在实例变量和respond_to json中（控制器名称是“visits_controller”，控制器动作是“计算”）

```
@total = "value returned from web service"
...
respond_to do |format|
  format.js     #used for HTML views
  format.json
end 
```

3）有一个视图名为

```
app/views/visits/compute.json.erb 
```

其内容是

```
{ "total": "<%= @total %>" } 
```

4）按下按钮时执行的jquery代码是

```
$('form').on('click', '.compute-myval', function(event) {
  var url;
  url='/visit/compute';
  url += '/' + $('#visit_field1').val();
  url += '/' + $('#visit_field2').val();
  url += '/' + $('#visit_field3').val();
  $.ajax( {
    url: url,
    data: $(this).serialize(),
    success: function (mydata) {
      $('#visit_resultfield').val(mydata.total);
    },
    dataType: 'json'
  });
  return event.preventDefault();
}); 
```

5) 要管理 :mobile 格式，我使用 Mobylette gem。为了避免通过 Ajax 触发的控制器操作使用移动格式并且应用了 application.mobile.erb 模板，我必须为 Mobylette 设置几个配置（在 application_controller.rb 内）

```
include Mobylette::RespondToMobileRequests
mobylette_config do |config|
  config[:skip_xhr_requests] = false
  config[:fallback_chains] = { mobile: [:mobile, :html, :json] }
end 
```

需要的另一件事是在 app/layouts 下有一个名为 application.json.erb 的文件，该文件仅包含一行

```
<%= yield %> 
```

**所以它可以工作，因为没有 compute.mobile.erb 视图，后备是 :json 并且模板没有添加任何东西**

6）rails日志中的输出是

```
Started GET "/visit/compute/3/78/66" for 192.168.1.7 at 2012-12-22 00:13:35 +0100
Processing by VisitsController#compute as JSON
  Parameters: {"field1"=>"3", "field2"=>"78", "field3"=>"66"}
  Rendered visits/compute.json.erb within layouts/application (0.1ms)
Completed 200 OK in 1335ms (Views: 5.4ms | ActiveRecord: 1.0ms) 
```

7）Jqm表格中的“resultfield”字段填写**总值**。

任务完成...

# c# - wp7 c#在控件模板上实现触发器

> ID：13989149
> 
> 赞同：2
> 
> 时间：2012-12-21T11:17:46.373
> 
> 标签：c#, windows-phone-7, silverlight-3.0

我正在构建一个小型 wp7 应用程序，其中有一个星形用户控件，当单击星形时，它的颜色会发生变化。这是我得到的代码：

```
 <Grid.Resources>
        <ControlTemplate x:Key="starTemplate"  TargetType="ToggleButton">
             <Viewbox>
                 <Path Name="star" Fill="Gray" Data="F1 M 145.637,174.227L 127.619,110.39L 180.809,70.7577L 114.528,68.1664L 93.2725,5.33333L 70.3262,67.569L 4,68.3681L 56.0988,109.423L 36.3629,172.75L 91.508,135.888L 145.637,174.227 Z"/>
              </Viewbox>
              <ControlTemplate.Triggers>
                  <Trigger Property="IsChecked" Value="True">
                     <Setter TargetName="star" Property="Fill" Value="White"/>
                   </Trigger>
              </ControlTemplate.Triggers>
       </ControlTemplate>
    </Grid.Resources>
    <Grid.ColumnDefinitions>
         <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <ToggleButton Grid.Column="0" Tag="1" Cursor="Hand" Template="{StaticResource starTemplate}" Click="RatingButtonClickEventHandler"/> 
```

问题是它在触发器上给了我一个错误：

```
The attachable property 'Triggers' was not found in type 'ControlTemplate' 
```

我在此[链接](https://stackoverflow.com/questions/5647557/style-triggers-in-windows-phone-7)中读到 Silverlight 3 不支持样式触发器，我必须在某处实现 DataTrigger。问题是如何？

# sql - 您可以实时查看 SQL (Server) 表的内容吗？

> ID：13989151
> 
> 赞同：1
> 
> 时间：2012-12-21T11:17:48.077
> 
> 标签：sql, sql-server, real-time

是否有可能有一个实时更新的表或视图 - 这样我就可以在不刷新的情况下看到更改？

我发现的最近的东西是

```
raiserror('',0,1) with nowait --to flush the buffer
print 'hello'                 --say hello
waitfor delay '00:00:01'      --pause for 1 second
GO 5                          --loop 5 times 
```

但显然将其用于选择会为您提供多个表而不是刷新表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:29:54.180

[查询通知](http://rusanu.com/2006/06/17/the-mysterious-notification/)可以在表发生更改时实时更新您，但您必须再次查询表才能查看更改的*内容*。至少它消除了池化。作为一种缓存失效解决方案，旨在与很少更改的相对静态数据一起使用。

对于频繁更改的数据，最好是轮询并有一种方法仅返回更改（例如），但检测*删除*`updated_at`相当棘手。

 *[Change Data Capture](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)是一种记录更改（并使发现删除变得微不足道）的技术，您可以查询更改，但适用于偶尔连接的系统（例如，电话从母舰数据库更新本地快照），不适用于实时变化监测。*

# c# - 如何使用 XSD 验证 Xml

> ID：13989152
> 
> 赞同：1
> 
> 时间：2012-12-21T11:17:48.953
> 
> 标签：c#, xml, xsd

此代码未正确验证 Xml 您能否找到错误.... 即使我使用 Invalid xml 执行它也不会引发任何错误

```
using System.Xml;

namespace XmlTryProject
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            XmlReaderSettings readSettings = new XmlReaderSettings();
            readSettings.ValidationType = ValidationType.Schema;
            readSettings.Schemas.Add(null,
     @"C:\Visual Studio 2010\Projects\XmlTry \XmlTryProject\EmployeeXSD.xsd");

            readSettings.ValidationEventHandler +=
                new System.Xml.Schema.ValidationEventHandler(Validater);

            XmlReader xReader = XmlReader.Create(
     @"C:\Visual Studio 2010\Projects\XmlTry\XmlTryProject\EmployeeXML.xml",
                readSettings);

            while (xReader.Read())
            {
                if (xReader.NodeType == XmlNodeType.Element)
                {
                    Console.WriteLine(xReader.Name);
                }
            }
        }

        public static void Validater(object sender,
                             System.Xml.Schema.ValidationEventArgs args)
        {
            Console.WriteLine(args.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:21:59.277

看起来您忘记了[ValidationFlags](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.validationflags.aspx)：

```
readSettings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
readSettings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
readSettings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:24:29.663

这是一个使用 linq to xml 的简单方法。
ValidateXmlFile 方法是如何使用它的示例。

```
private static void ValidateXmlFile()
{
    using (var xmlFile = File.OpenRead("networkshares.xml"))
    using (var xmlSchemaFile = File.OpenRead("networkshares.xsd"))
    {
        ValidateXml("netuseperdomain.networkshares", xmlSchemaFile, xmlFile);
    }
}

public static void ValidateXml(string targetNamespace, Stream xmlSchema, Stream xml)
{
    var xdoc = XDocument.Load(xml);
    var schemas = new XmlSchemaSet();
    schemas.Add(targetNamespace, new XmlTextReader(xmlSchema));

    xdoc.Validate(schemas, (sender, e) =>
    {
        throw new Exception(e.Message);
    });
} 
```

# algorithm - 合并单链表的两半

> ID：13989153
> 
> 赞同：2
> 
> 时间：2012-12-21T11:17:57.567
> 
> 标签：algorithm, sorting, pointers, data-structures, linked-list

在一次笔试中，我遇到了一个问题，内容如下：

我们得到一个整数链表，其中前半部分和后半部分都是独立排序的。编写一个函数来合并这两个部分以创建一个单一的排序链表。

**约束：不要使用任何额外的空间。**

测试用例和输出：
**输入List1：**
4->5->6->7->1->2->3；
**输出：**
1->2->3->4->5->6->7

**输入2：**
5->6->7->8->1->2->3->4；
**输出2：**
1->2->3->4->5->6->7->8

我能想到的是使用两个指针：一个用于前半部分遍历，一个用于后半部分遍历。使用它们，我可以从头到中（使用第一个指针）和从中间到最后（使用第二个指针）遍历。同时遍历这两个部分时，我可以比较值并在需要时进行交换。

但是这个解决方案使用了两个消耗内存的指针。

可以在不使用任何内存的情况下完成吗？

由于是笔试，我不能要求澄清。
协助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:33:33.363

当他们说“不要使用额外的空间”时，他们并不是指指针和标量；它们确实意味着“数组”和“动态分配的结构”。在您的情况下，内存量是固定的。

合并两个有序列表很简单：首先将列表切成两半，然后重新排列`next`其元素的指针以使列表排序。

您将需要三个指针 - `newHead`、`head1`和`head2`。

*   初始化`head1`和`head2`到`head`原始列表的
*   前进`head2`，直到您看到排序序列中的中断（即，当`head2->next->value`小于时`head2->value`）。通过将列表设置`head2->next`为`NULL`; 保留原件`head2->next`- 这是您的新品`head2`

至此，你有两个独立排序的独立链表，你可以应用经典的合并算法。设置`newHead`为`head1`or的较小元素`head2`，然后循环移动，`next`将当前最后一个元素的指针设置为`head1`or的较小者`head2`。一旦你点击`head1->next == NULL`or `head2->next == NULL`，将另一个列表的头部分配给`next`首先用完元素的列表。你完成了 -`newHead`现在指向一个排序列表的开头。

# objective-c - 视图动画不工作不止一次

> ID：13989156
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:18:10.343
> 
> 标签：objective-c, ios, xcode, uiviewanimation

我想在完成动画后开始动画，因为我在 touchesBegan 函数中实现了以下代码

```
if(touch.view==word1)
{

    [UIImageView animateWithDuration:0.6f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{

                         word1.alpha=1;                    

                     }
                     completion:^(BOOL finished){
                         if (finished) {
                             word1.alpha=0;
                         }
                     }];

} 
```

它在第一次触摸时起作用，当我再次触摸它时它根本不起作用。谁能告诉我我做错了什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:50:02.337

如果您正在显示图像，则可以将图像设置为 UIView 的子视图，就像 Infinite 所说的那样，您可以将背景颜色设置为 clearColor，并将 UIView 用于触摸事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:28:29.020

alpha 为 0 的视图（在动画之后）不响应用户交互并将这些事件传递给底层视图；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:31:27.343

当您将 alpha 设置为 0 时，还将 userinteraction 设置为 FALSE

希望对你有帮助

# eclipse - Eclipse e4 RCP 最小化/最大化视图部件上的缺失？

> ID：13989157
> 
> 赞同：3
> 
> 时间：2012-12-21T11:18:13.277
> 
> 标签：eclipse, rcp, minimize, maximize, e4

使用 Eclipse Juno（e4 平台）创建 RCP 应用程序时，视图部件不提供最小化/最大化工具栏操作。

还缺少的是视图部分标题上的双击操作，它将相应地最小化和最大化视图。

我还注意到，视图部分的标题栏比以前的版本略低，因此操作按钮并不真正适合其中（绘制在标题的边框上 - 参见图片）。

我刚刚创建了示例 RCP 应用程序，提供了一个简单的介绍页面。

[e4中缺陷视图部分的屏幕截图](https://dl.dropbox.com/u/53933110/viewpartDefect_e4.png)

[Ganymede 中正确视图部分的屏幕截图](https://dl.dropbox.com/u/53933110/viewpartOk_Ganymede.png)

在我看来，这像是 e4 上的错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:51:17.517

我遇到了同样的问题。我按照此链接上的选项从 3.x 迁移到 4.x，它对我有用。 [http://eclipsesource.com/blogs/2012/06/18/migrating-from-eclipse-3-x-to-eclipse-4-e4/](http://eclipsesource.com/blogs/2012/06/18/migrating-from-eclipse-3-x-to-eclipse-4-e4/) 基本上将以下内容作为依赖项添加到我的插件和运行配置中。

*   org.eclipse.equinox.ds
*   org.eclipse.equinox.event
*   org.eclipse.equinox.util
*   org.eclipse.e4.ui.workbench.addons.swt

# .htaccess - .htaccess 将子域重定向到外部 URL

> ID：13989162
> 
> 赞同：17
> 
> 时间：2012-12-21T11:18:29.697
> 
> 标签：.htaccess, redirect, subdomain

我们需要从我们的主站点运行一些子域，并且我们需要将它们指向处理所需管理员的外部站点。

我只需要使用 .htaccess 将子域重定向到外部 URL 以及任何关于将其放在 .htaccess 文件中的位置的建议，例如在顶部，因为我知道这会影响某些重写规则。

我不会写我认为应该是什么，因为这只会将答案引向特定的路线。

干杯伙计们，

真的很感激。

担

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-21T13:01:52.540

如果您要将子域重定向到另一个域，则 .htaccess 文件中不应有除此之外的任何其他内容。

```
 # This will redirect a subdomain to another domain
 RewriteEngine On
 RewriteCond %{HTTP_HOST} ^yoursubdomain\.yourdomain\.com$ [NC]
 RewriteRule ^(.*) http://www.newdomain.com/$1 [L,R] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T04:20:45.377

这是我使用的代码，它对我有用：

```
# BEGIN CUSTOM Redirects
# This will redirect a subdomain to another domain
RewriteEngine On
RewriteCond %{HTTP_HOST} ^pw\.example\.com$ [NC]
RewriteRule ^(.*) https://www.example.com [L,R 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-26T02:25:06.137

我尝试了这两个选项，但直到我删除 $ 和 [L,R] 才起作用，这是对我有用的代码

```
 RewriteEngine On
 RewriteCond %{HTTP_HOST} ^subdomain\.domain\.com$ [NC]
 RewriteRule ^(.*) http://newdomain.com.ar/?param=data&uparam2=data 
```

希望能帮助到你。

# python - 为什么我的 Pylot 图表是空白的？

> ID：13989166
> 
> 赞同：0
> 
> 时间：2012-12-21T11:18:42.630
> 
> 标签：python, numpy, matplotlib, pylot

我在安装了 Numpy 1.6.2 和 Matplotlib 1.1.0 的 Windows 7 64 位上使用 Pylot 1.26 和 Python 2.7。测试用例执行并生成报告，但响应时间图为空（无数据），吞吐量图只是一条直线。

我试过 32 位和 64 位安装程序，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:42:24.853

我有同样的问题。我今天花了一些时间调试一些东西，我意识到我的问题是收集到的图表数据不正确，我需要调整。我所做的只是将时间从绝对更改为相对并动态调整轴的范围。我在 python 中不是那么好，所以我的代码看起来不太好。

# grails - Grails比较gsp中的2个变量

> ID：13989168
> 
> 赞同：0
> 
> 时间：2012-12-21T11:18:51.303
> 
> 标签：grails

我正在尝试比较 gsp 中的变量。

如果我做：

```
<g:if test="${p.id.equals(1)}"> 
```

**我得到结果。**

但如果我这样做：

```
<g:if test="${p.id.equals(id)}"> 
```

**我从来没有得到任何。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:37:06.123

尝试

```
<g:if test="${p.id == id}"> 
```

# ios - 使用插值对 UILabel 文本属性进行动画处理

> ID：13989173
> 
> 赞同：0
> 
> 时间：2012-12-21T11:19:21.150
> 
> 标签：ios, animation, text, uilabel, nstimer

我想为 UILabel 的文本属性设置动画，使其看起来像是从零计数到特定值（0、1、2、3、4、5、6、7）。我知道有可能在 NSTimer 的帮助下实现这一目标，但是有没有办法让“动画”通过 NSTimer 轻松进出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:44:20.547

不，使用`NSTimer`是最好的方法。

# java - 在android中将值从第一个活动传递到第三个活动

> ID：13989182
> 
> 赞同：0
> 
> 时间：2012-12-21T11:20:06.670
> 
> 标签：java, android, android-intent, bundle, pass-data

我已经开发了一个 android 应用程序。在这里，我必须将值从第一个活动传递到第三个活动。

该值已成功从第一个活动传递到第二个活动。但我无法将第二个活动的值传递到第三个活动。请帮助我如何开发这些。请帮助我。

这是我的第一个活动：

```
 Intent i = new Intent(getApplicationContext(), CustomerLogin.class);
                i.putExtra("GrandTotal", mGrandTotal);
                startActivity(i); 
```

活动二：

```
Intent in = getIntent();
Bundle b = getIntent().getExtras();
String total = b.getString("GrandTotal");
TextView grandtotal = (TextView) findViewById(R.id.grand_total);
 grandtotal.setText("Welcome ," + total ); 
```

这里的值是从第一个活动成功传递到第二个活动。现在我必须将这些值传递给第三个活动。我该怎么做。

现在这是我的第二个活动：

```
if(isUserValidated && isPasswordValidated)
{
    String s= getIntent().getStringExtra(total);
    Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);
    intent.putExtra("GrandTotal", s);
    intent.putExtra("login",username.getText().toString());
    startActivity(intent);

} 
```

这是我的第三个活动：

```
 Bundle b = getIntent().getExtras();

    String total = b.getString("GrandTotal");
    TextView grandtotal = (TextView) findViewById(R.id.check);
    grandtotal.setText("Welcome ," + total ); 
```

现在我必须运行该应用程序，这意味着我正在获得第二个活动的总值。但我没有得到第三个活动的总值。请帮助我。这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:22:16.140

使用简单的静态变量。或为此目的共享偏好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:22:56.217

```
if(isUserValidated && isPasswordValidated)
{
  String s= getIntent().getStringExtra(total);// problem is here
  ....// In second activity
} 
```

改成`String s= getIntent().getStringExtra("GrandTotal");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:23:40.553

```
 Intent i = new Intent(getApplicationContext(), CustomerLogin.class);
 i.putExtra("GrandTotal", mGrandTotal);
 startActivity(i); 
```

活动二：

```
Bundle b = getIntent().getExtras();
String total = b.getString("GrandTotal");
TextView grandtotal = (TextView) findViewById(R.id.grand_total);
grandtotal.setText("Welcome ," + total );   

  if(isUserValidated && isPasswordValidated)  {      
      Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);
      intent.putExtra("GrandTotal", total);
      intent.putExtra("login",username.getText().toString());
      startActivity(intent);    
    } 
```

这是我的第三个活动：

```
Bundle b = getIntent().getExtras();    
String total = b.getString("GrandTotal");
String name = b.getString("login");
TextView grandtotal = (TextView) findViewById(R.id.check);
grandtotal.setText("Welcome ," + total ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:23:45.610

代替

```
 if(isUserValidated && isPasswordValidated)
    {
        String s= getIntent().getStringExtra(total); // Replace this line
        Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);
        intent.putExtra("GrandTotal", s);
        intent.putExtra("login",username.getText().toString());
        startActivity(intent);

    } 
```

和

```
String s= getIntent().getStringExtra("GrandTotal"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:24:11.870

如果您需要传递完全相同的值，则可以使用：

```
Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);
intent.putextras(this.getIntent.getExtras()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T11:25:41.800

**在你的第三个活动**中试试这个

 ****编辑 ：**

```
if(getIntent().getStringExtra("GrandTotal")!= null)
{
      String total =getIntent().getStringExtra("GrandTotal"); <---------------
      TextView grandtotal = (TextView) findViewById(R.id.check);
      grandtotal.setText("Welcome ," + total );
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-22T05:47:57.963

对于这个更好的解决方案是在 android 中使用共享首选项。将您的价值存储在共享偏好中，并在第三个活动中获取该价值并根据您的要求使用它。

更多详细信息：[共享偏好示例](http://glorious-arvind.blogspot.in/2012/11/shared-preference-in-android.html)**

# ios - Dissmis 故事板上的模态视图控制器

> ID：13989187
> 
> 赞同：0
> 
> 时间：2012-12-21T11:20:33.853
> 
> 标签：ios, storyboard, modalviewcontroller

我正在使用最新的 SDK 开发 iPhone 应用程序。

我不知道如何关闭 ViewController。我添加了一个后退按钮，这就是我所做的：

```
- (IBAction)backButtonClicked:(id)sender
{
    [self.navigationController dismissModalViewControllerAnimated:YES];
} 
```

我也试过：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

但两者都有效。我添加了一个断点，它停在上面。

我使用 a`Modal segue`导航到这个 ViewController。

**如何以编程方式关闭此视图控制器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:22:17.953

尝试`[self dismissViewControllerAnimated:YES completion:nil];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:25:05.523

```
- (IBAction)backButtonClicked:(id)sender
{
    [self.presentingViewController dismissViewControllerAnimated:YES
                                                      completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:27:13.397

VC 是否以模态方式显示您自己的视图控制器子类的实例，或者您是否将其包装在 UINavigationController 中？如果是前者，试试

```
[self dismissModalViewControllerAnimated:YES]; 
```

`[self.presentingViewController dismiss...]`也可以，但仅适用于 iOS 5+

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-12T06:29:19.093

创建自定义segue，然后按钮操作选择自定义segue [http://jeffreysambells.com/2014/02/19/dismissing-a-modal-view-using-a-storyboard-segue](http://jeffreysambells.com/2014/02/19/dismissing-a-modal-view-using-a-storyboard-segue)

# wordpress - 提交表单后选择单选按钮

> ID：13989191
> 
> 赞同：0
> 
> 时间：2012-12-21T11:20:45.867
> 
> 标签：wordpress, radio-button

我有一个表单，其中我使用了无线按钮以及选择单选按钮并提交按钮时，值是通过但未选择的无线电按钮。我在表单中的单选按钮代码如下所示。

```
echo '<form name="posts_form" id="post_form" method="post" action="">';
echo $displaycategory = get_option('posts_displaycategory');

echo '<p>Display Date:<br><input type="radio"  value="YES"';
echo $posts_displaydate . '" name="posts_displaydate" id="posts_displaydate"  /> YES</p>';

echo '<input type="radio" value="NO"';
echo $posts_displaydate . '" name="posts_displaydate" id="posts_displaydate" /> NO</p>'; 
```

现在我想在选择单选按钮时选择单选按钮。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:33:18.683

您需要使用如下所示的 $posts_displaydate 检查条件或写下完整代码，以便我编写。

```
if($posts_displaydate=='YES') echo "checked"; 
if($posts_displaydate=='NO') echo "checked"; 
```

# web - sitemap.xml 可以被滥用来复制整个网站吗？

> ID：13989197
> 
> 赞同：0
> 
> 时间：2012-12-21T11:21:06.110
> 
> 标签：web, copy, sitemap

我计划在生成内容页面的网站上上传 sitemap.xml。截至目前，如果我尝试使用 HTTrack 等工具复制整个网站，则无法复制。

现在，如果我想让搜索机器人在这个网站上查找和索引内容页面，我必须在 sitemap.xml 文件中包含所有 url。

所以问题是 - 这样的 sitemap.xml 会暴露所有 url 从而“促进”网站的完整副本吗？

对此的投入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:29:57.943

从技术上讲，是的。

但我想您真正需要问的问题是“我在乎吗”
如果答案是肯定的，您是否应该首先考虑是否应该将其发布到网络上？

一个结构良好的[IA](http://en.wikipedia.org/wiki/Information_architecture)无论如何都会包含每个页面之间的链接（出于导航和 SEO 的原因），因此 HTTrack 之类的工具无论如何都可以复制该站点。

任何您不想被 HTTrack 看到的东西也需要对普通网络用户不可见 - 即受密码保护或不存在。

# c# - 通过 C# 代码更改 Windows 7 上的默认语音

> ID：13989199
> 
> 赞同：3
> 
> 时间：2012-12-21T11:21:11.353
> 
> 标签：c#, windows-7, voice

我需要通过 C# 代码更改 Windows 7 当前的默认语音（Microsoft Anna 并安装了额外的德语语音）。

由于我是初学者程序员，我很难自己找到它。有什么想法可以实现吗？提前感谢大家的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:26:58.280

Windows 7 音频 API 包括[SpeechSynthesizer 类](http://msdn.microsoft.com/en-us/library/ms596245.aspx)，您可以调用例如[SelectVoice 方法](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.selectvoice.aspx)：

> 使用 GetInstalledVoices 方法和 VoiceInfo 类来获取您可以选择的已安装文本转语音 (TTS) 语音的名称。要选择语音，请将 Name 属性的全部内容作为 SelectVoice 方法的参数传递。SpeechSynthesizer 对象选择在语音的 VoiceInfo.Name 属性中包含名称的第一个已安装语音。SpeechSynthesizer 执行区分大小写的子字符串比较以确定语音是否与名称匹配。

编辑：我找到[了一些示例代码](http://blogs.msdn.com/b/chuckop/archive/2008/07/30/enumerating-tts-engines-using-system-speech-synthesizer.aspx)来帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-01T21:14:24.273

Windows 7 默认语音（更改）实用程序 - 路径：

视窗

```
 Syswow64

      Speech

           Speechux

                sapi.cpl 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-21T11:23:15.490

您可以更改讲述人使用的语音的速度、音量和音调。它不需要任何 C# 编码...

通过单击开始按钮 、单击所有程序、单击附件、单击轻松访问，然后单击讲述人来打开讲述人。

单击语音设置，然后进行以下任何调整：

要选择不同的语音，请在“选择语音”框中单击要使用的语音。

要获得更快的声音，请在“设置速度”列表中选择一个数字。数字越大，声音越快。

要获得更大的声音，请在“设置音量”列表中选择一个数字。数字越大，声音越大。

要获得更高音调的声音，请在“设置音高”列表中选择一个数字。数字越高，音高越高。较高音调的声音可以使某些人更容易听到声音。

讲述人并非在所有语言中都可用，因此如果上述步骤不起作用，则讲述人不适用于您的语言。

# xampp - 如何在 Linux 的 Web 界面上设置 xampp 控制面板？

> ID：13989210
> 
> 赞同：1
> 
> 时间：2012-12-21T11:22:11.157
> 
> 标签：xampp, controlpanel

我正在寻找一个脚本，它可以让我知道服务是否正在运行，它可以停止或重新启动或启动并控制他的错误。

全部通过Linux服务器上的Web界面。

Base 应该做他在 Windows 上的 Xampp 控制面板所做的事情，还可以停止、重新启动、配置和查看服务日志。

我尝试过这样的事情，但我还没有找到可以通过网络界面完成的任何事情。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:42:42.860

在终端中，键入以下内容并按 Enter。

gksu /opt/lampp/share/xampp-控制面板/xampp-控制面板

注意：将 gksu 替换为：kdesu for KDE3 / kdesudo for KDE 4 如果显示任何依赖错误，您需要安装相同的。味精将是不言自明的。

高温高压

# java - 如何将 byte[] 转换为带有下载对话框的文件？

> ID：13989215
> 
> 赞同：2
> 
> 时间：2012-12-21T11:22:28.687
> 
> 标签：java, spring, spring-mvc

我有一个包含 blob 内容的表，其中存储了不同的文件类型`(text, audio, image, etc)`。检索`byte []`成功后，我不知道如何将[]转换为下载对话框。
这是我的代码

```
trns = session.beginTransaction();
Query query = session.createQuery("from FileDownload as fu where fu.Id =:Id");
query.setInteger("Id", id);
FileDownload fileDownload = (FileDownload) query.iterate().next();
byte[] byteArray = fileDownload.getFile(); 
```

上面的代码工作正常，我收到一个`byte []`. 但我不知道如何进一步将其转换为显示对话框的文件。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T11:49:39.220

假设您知道文件的`mimeType`和`filename`，您可以设置内容类型和 HTTP 标头 Content-Disposition。

只需将字节数组写入`OutputStream`：

```
 // The response from your servlet.
    HttpServletResponse resp;
    resp.setContentType(mimeType);
    resp.setHeader("Content-Disposition", "attachment;filename=" + filename);
    resp.getOutputStream().write(byteArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:58:00.957

字节数组可以从 servlet 发送到客户端。您可以在此处和其他地方找到有关该主题的许多讨论。

以下是讨论[流式传输效率的](https://stackoverflow.com/questions/4645441/most-effective-way-to-write-file-to-servletoutputstream)人（使用代码）。这是关于如何[将 servlet 映射到 url](https://stackoverflow.com/questions/234210/can-anyone-explain-servlet-mapping)的讨论（带有示例）。

您要做的最后一件事就是在用户单击按钮时将其链接到 servlet 的 URL。

在流式传输字节数组之前，您还需要查看可以在标头中提供哪些附加信息。例如，如果您提供一个 mime 类型，那么浏览器就会知道如何处理该文件；在浏览器中打开 PDF，在浏览器中显示图像；在 Excel 中打开 xls 文件。

# r - 使用多核并行运行拉丁超立方体采样

> ID：13989216
> 
> 赞同：4
> 
> 时间：2012-12-21T11:22:31.647
> 
> 标签：r, parallel-processing, sampling

我打算使用 R 中的“clhs”包从总体（a，b，c，d，...见下文）中提取代表性样本。采样过程在我的（多核）计算机上需要很长时间，所以我会喜欢并行运行采样程序（同时使用多个 CPU 内核）。

这些是我想从中提取样本的一些（示例）数据框（“人口”）：

```
a <- as.data.frame(replicate(1000, rnorm(20)))
b <- as.data.frame(replicate(1000, rnorm(20)))
c <- as.data.frame(replicate(1000, rnorm(20)))
d <- as.data.frame(replicate(1000, rnorm(20))) 
```

我要运行的 clhs 代码是：

```
clh_a <- clhs(x=a, size=round(nrow(a)/5), iter=2000, simple=F)) # 20% of all samples should be selected
clh_b <- clhs(x=b, size=round(nrow(b)/5), iter=2000, simple=F)) 
```

ETC...

并行运行此采样过程的方法是什么？还是有另一种有效的方式来做到这一点？

**附录（非常感谢“zipfzapf”）：**

我试图使用“parLapply” - 不幸的是，最后，R抛出一条错误消息：“长度错误（x）：'x'丢失”，老实说我不明白......任何想法?

我的代码：

```
 library("snow")
            a <- as.data.frame(replicate(1000, rnorm(20)))
            b <- as.data.frame(replicate(1000, rnorm(20)))
            c <- as.data.frame(replicate(1000, rnorm(20)))
    d <- as.data.frame(replicate(1000, rnorm(20)))
    abcd <- list(a, b, c, d)
    cl <- makeCluster(4)
    results <- parLapply(cl,
       X = abcd,
       FUN = function(i) {
         clhs(x = i, size = round(nrow(i) / 5), iter = 2000, simple = FALSE)
       },
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:36:46.680

这对我有用（请注意，我更改了迭代次数以使事情以合理的速度进行）。

```
library(snowfall)
sfInit(parallel = TRUE, cpus = 4, type = "SOCK")
sfLibrary(clhs)

x <- sfLapply(abcd, fun = function(x) {
            clhs(x = x, size=round(nrow(x)/5), iter = 200, simple =FALSE)
        })

     Length Class       Mode
[1,] 5      cLHS_result list
[2,] 5      cLHS_result list
[3,] 5      cLHS_result list
[4,] 5      cLHS_result list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:33:46.673

`mclapply`(builtin) 包中的函数`parallel`是一个多核版本`lapply`：

```
library(parallel)

# population samples
abcd <- list(a, b, c, d)

# multi-core version of 'lapply(abcd, [....])'
results <- parallel::mclapply(
  X = abcd,
  FUN = function(elem) {
    clhs(x = elem, size = round(nrow(elem) / 5), iter = 2000, simple = FALSE))
  },
  mc.preschedule = FALSE,
  mc.cores = 4L
) 
```

这将为您提供一个列表，其中每个元素都包含相应`clhs`调用的结果。

请注意，参数`mc.preschedule`和`mc.cores`是可选的。如果每个函数调用可能需要一段时间（如您的情况），设置`mc.preschedule`为是​​一个好主意。`FALSE``FUN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:17:48.987

使用“snow”的解决方案 - 只需添加“clusterEvalQ(cl, library(clhs))”就可以了：

```
a <- as.data.frame(replicate(1000, rnorm(20)))
b <- as.data.frame(replicate(1000, rnorm(20)))
c <- as.data.frame(replicate(1000, rnorm(20)))
d <- as.data.frame(replicate(1000, rnorm(20)))
abcd <- list(a, b, c, d)
library("snow")
cl <- makeCluster(4)
clusterEvalQ(cl, library(clhs))
results <- parLapply(cl, abcd, fun = function(elem) {
    clhs(x = elem, size = round(nrow(elem) / 2), iter = 50)
  })
stopCluster(cl) 
```

再次感谢 zipfzapf 和 Roman Luštrik！

# asp.net - 中继器控制中的访问按钮

> ID：13989219
> 
> 赞同：1
> 
> 时间：2012-12-21T11:22:50.303
> 
> 标签：asp.net, vb.net

我正在尝试 - 非常不成功 - 访问中继器控件内的按钮。我在显示当前正在电影院放映的电影的页面上设置了中继器。我创建了两个按钮并将它们添加到中继器中 - 一个用于预告片，另一个用于查看。对于审查，我想链接到另一个页面，该页面将启用另一个转发器并启用分页。当用户单击评论按钮时，他们应该被带到一个页面，该页面仅显示该特定电影的评论。这是我的代码：

**标记：** 中继器：

```
 <asp:Repeater ID="movies" runat="server">
    <ItemTemplate>
        <table width="641px">
            <tr>
                <td>
                    <span style="font-weight:bold;font-size:16px;">
                    <%# Container.DataItem("MovieTitle")%>
                        </span>
                </td>
                <td>
                    <span style="float:right;">
                    <asp:Image ID="Image1" runat="server" ImageUrl = '<%# Eval("Total")%>' style="width:80px;height:14px;"/>
                   </span>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <hr style="height:1px;border-bottom:none;color:#e3e3e3;"/>
                </td>
            </tr>
            </table>
        <table width="641px">
            <tr>
                <td>
                    <asp:Image ID="Image2" runat="server" ImageUrl = '<%# Eval("MovieImageFileName")%>' style="width:180px;height:108px;border:1px solid #e3e3e3;"/>
                </td>
                <td style="vertical-align:top;">
                    <%# Container.DataItem("Synopsis")%>
                </td>
            </tr>
            </table>
        <table width="641px">

            <tr>
                <td>
                    <span style="float:right">
                    <asp:Button ID="btnTrailer" runat="server" Text="Trailer" BackColor="#FF9900" ForeColor="White" />&nbsp;
                    <asp:Button ID="btnReview" runat="server" Text="Review" BackColor="#FF9900" ForeColor="White" CommandName="Review" />
                    </span>
                </td>
            </tr>
            <tr>
                <td>
                    <hr style="height:1px;border-bottom:none;color:#e3e3e3;"/>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:Repeater> 
```

**代码隐藏：**

```
Dim movie_title As String
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    Dim myConn As New OleDbConnection
    Dim cmd As New OleDbCommand
    Dim dr, aDataReader As OleDbDataReader
    Dim query, movieID As String
    movie_title = Request.QueryString("id")
    myConn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " & _
                Server.MapPath("/App_Data/MovieBoard.accdb"))
    myConn.Open()
    Dim sqlQuery = "Select movieID From Movies"
    Dim aCmd = New OleDbCommand(sqlQuery, myConn)
    aDataReader = aCmd.ExecuteReader()

    If aDataReader.Read() = True Then
        movieID = aDataReader(0)
    Else
        movieID = "0"
    End If

    query = ("Select MovieTitle, Genre, Synopsis, Starring, Total, Director, MovieImageFileName From Movies, MovieReviews, MReviewRatings WHERE Movies.MovieID = MovieReviews.MovieID AND MovieReviews.MReviewID = MReviewRatings.MReviewID AND ReviewerTypeID = 1")
    cmd = New OleDbCommand(query, myConn)
    dr = cmd.ExecuteReader()
    movies.DataSource = dr
    movies.DataBind()
End Sub

Protected Sub movies_ItemCommand(source As Object, e As RepeaterCommandEventArgs)   Handles movies.ItemCommand
    If e.CommandName = "Review" Then
        Response.Redirect("testingreviews.aspx?id = '" & movie_title)
    End If
End Sub 
```

当我运行页面时，页面会显示，但是当我单击审阅按钮时，我收到以下错误：

```
Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> 
in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or 
callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.
RegisterForEventValidation method in order to register the postback or callback data for validation. 
```

有人对我做错了什么有任何想法吗？我对asp.net 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:16:12.703

如果您想访问一个按钮，请使用事件 ItemCreated 或者它的 ItemDataBound。

处理movies.ItemCreated

在这种情况下，您可以使用 FindControl 引用按钮，

像这样的东西

```
Sub Movies_ItemDataBound(Sender As Object, e As RepeaterItemEventArgs) Handles movies.ItemDataBound
      Dim Btn As Button = CType(e.Item.FindControl("ButtonName"),Button)
End Sub 
```

# android - 在 .NET 4.0 中创建 Web 服务以在 android 中使用 JSON 数据

> ID：13989223
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:23:05.247
> 
> 标签：android, .net, json

我没有代码。我需要创建一个可以从数据库中以 JSON 格式获取数据的 Web 服务。这些数据将在 android 中使用。我不知道从哪里开始。如果有人可以提供帮助，那就太好了，给我指路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:34:38.897

如果您精通 .net，那么这样做没什么大不了的。在 Android 方面，您只需这样做。

```
List<NameValuePair> parmeters = new ArrayList<NameValuePair>();
            parameters.add(new BasicNameValuePair("username",username));
            parameters.add(new BasicNameValuePair("password",password));// These are the namevalue pairs which you may want to send to your php file. Below is the method post used to send these parameters

  DefaultHttpClient httpClient = new DefaultHttpClient();

  HttpPost httpPost = new HttpPost(url); // You can use get method too here if you use get at the .net side to receive any values.

  httpPost.setEntity(new UrlEncodedFormEntity(parameters));

  HttpResponse httpResponse = httpClient.execute(httpPost);

  HttpEntity httpEntity = httpResponse.getEntity();

  is = httpEntity.getContent(); 
```

在您的 .net 方面，`you extract the data and send back the result by encoding it in json format. While at the android side again, you can get the input stream as shown above. From that input stream, you can get the json data.`

有关更多详细信息，请参阅此[线程](https://stackoverflow.com/questions/13635395/how-to-send-variable-from-php-to-an-android-app/13638686#13638686)。如果您仍然需要任何资源，那么我可能会使用一些资源来编辑我的答案。希望这可以帮助。

# c# - 使用 Postal MVC 和 SendAsync() 发送电子邮件时出错

> ID：13989226
> 
> 赞同：0
> 
> 时间：2012-12-21T11:23:22.927
> 
> 标签：c#, email, asynchronous, asp.net-mvc-4, postal

我正在尝试在我的 MVC 控制器中使用[Postal MVC](http://aboutcode.net/postal/)发送电子邮件。我想异步发送电子邮件，不想在返回视图之前等待发送电子邮件。

这是我正在尝试使用的代码。

```
 try
        {
            dynamic email = new Email("TestEmail");  //I have an Email View by this name
            email.To = "myemailaddress@domain.com";
            email.From = "recipientsaddress@domain.com";
            email.SendAsync();                      //email.Send() works fine
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        } 
```

但我收到此错误“发送邮件失败”。

内部异常 System.InvalidOperationException：此时无法启动异步操作。异步操作只能在异步处理程序或模块内或在 Page 生命周期中的某些事件期间启动。如果在执行 Page 时发生此异常，请确保 Page标记为 <%@ Page Async="true" %>。在 System.Web.AspNetSynchronizationContext.OperationStarted() 在 System.ComponentModel.AsyncOperation.CreateOperation(Object userSuppliedState,SynchronizationContext syncContext) 在 System.Net.Mail.SmtpClient.SendAsync(MailMessage message,Object userToken)

如果我用 Send() 替换 SendAsync() 它工作正常。

为了完整起见，这就是我的邮件设置在我的 Web.Config 中的样子

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network">
        <network host="smtp.myisp.com" port="25" defaultCredentials="true" />
      </smtp>
    </mailSettings>
  </system.net> 
```

异步发送电子邮件似乎有问题。有没有其他人提出这个问题并有解决方案？

或者我应该使用像[MvcMailer](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)这样的另一个邮件程序吗？

请不要建议我不应该异步发送电子邮件。我希望我的网站能够快速响应，并且我发现在注册过程中连接到电子邮件服务器以发送电子邮件有点无响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:02:08.983

Postal MVC 似乎与 MVC4 的新异步机制不兼容。在 Postal MVC 的开发人员使其兼容之前，您有 2 个选择，降级到 MVC3，或者在您的应用程序中强制使用旧的 MVC3 功能。

要恢复到 MVC4 中的旧功能，您可以在 web.config 中应用以下设置：

```
<add key="aspnet:UseTaskFriendlySynchronizationContext" value="false" /> 
```

不过要小心不要这样做，这样做可能会对您的网站产生影响。我建议你研究一下其中的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:08:27.687

确保您拥有[最新版本](https://github.com/andrewdavey/postal)的 Postal。它们包括[发送异步的单元测试，](https://github.com/andrewdavey/postal/blob/master/src/Postal.Tests/EmailServiceTests.cs)它应该可以帮助您了解问题所在。这表明它不是邮政的问题。

该测试还表明您​​可能必须使用`SpecifiedPickupDirectory`

# vb.net - 定时器刷新后保持超网格选择

> ID：13989227
> 
> 赞同：0
> 
> 时间：2012-12-21T11:23:27.103
> 
> 标签：vb.net, infragistics

我的 vb.net 程序中有一个 ultragrid 和一个计时器。每次我的计时器滴答作响时，它都会重置我单击的任何选定行。所以我想在每个刻度上保存行的索引并在刻度后重新加载它。问题是我的网格中也有组。所以我可能有 2 组，每组我可能有 3 行和 5 行。所以我需要知道如何选择组和该组内的行来保存它并在勾选后重新加载它。我知道我选择带有 ultragrid.activeRow 等的行。

这是我的群组

```
Dim dt As DataTable = Nothing

Timer1.Enabled = True
UltraGrid1.DataSource = Nothing
Generic.openOrders(dt)
UltraGrid1.DataSource = dt
Dim band As Infragistics.Win.UltraWinGrid.UltraGridBand = UltraGrid1.DisplayLayout.Bands(0)
UltraGrid1.DisplayLayout.ViewStyleBand = Infragistics.Win.UltraWinGrid.ViewStyleBand.OutlookGroupBy

band.SortedColumns.Add(band.Columns("ORDERDATE"), False, True)
band.SortedColumns.Add(band.Columns("ORDERTIME"), False, True)
band.Columns("USERNAME").CellClickAction = CellClickAction.RowSelect
band.Columns("QUANTITY").CellClickAction = CellClickAction.RowSelect
band.Columns("ORDERLIST").CellClickAction = CellClickAction.RowSelect
band.Columns("LOCATION").CellClickAction = CellClickAction.RowSelect

band.Columns("PAID").Hidden = True
band.Columns("PROCESSING").Hidden = True
band.Columns("COMPLETED").Hidden = True
band.Columns("ITEMTIME").Hidden = True
band.Columns("ITEMPRICE").Hidden = True
band.Columns("ORDERPRICE").Hidden = True
band.Columns("READYORDER").Hidden = True
UltraGrid1.DisplayLayout.Override.AllowColSizing = Infragistics.Win.UltraWinGrid.ColumnAutoSizeMode.VisibleRows
UltraGrid1.Rows.ExpandAll(True) 
```

我的输出是这样的：

```
 ORDERDATE:
      ORDERTIME:
      ORDER1 ITEM1
      ORDER1 ITEM2
      ORDER1 ITEM3

      ORDERTIME:
      ORDER2 ITEM1
      ORDER2 ITEM2
 ORDERDATE:
      ORDERTIME:
      ORDER3 ITEM1
      ORDER3 ITEM2
      ORDER3 ITEM3
      ORDER3 ITEM4 
```

我设法使用以下代码获取了 ORDERDATE、ORDERTIME 和 ORDER 的索引：

```
 If UltraGrid1.Selected.Rows.Count > 0 Then
            Dim rowSelected As UltraGridRow
            For Each rowSelected In UltraGrid1.Selected.Rows
                rowIndex = rowSelected.Index
                itemTimeIndex = rowSelected.ParentCollection.ParentRow.Index
                orderTimeIndex = rowSelected.ParentCollection.ParentRow.ParentCollection.ParentRow.Index

            Next
        End If 
```

现在我怎样才能将它们设置回新的超网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:40:24.670

假设使用 Grid 进行分组，并且网格绑定的数据是平面的，则可以使用 ultraGrid1.Rows.GetRowWithListIndex 传入源列表中行的索引来获取需要激活的行.

只要您的行有一个 ID，您就可以存储该 ID 并在新列表中找到相同的行，然后使用 GetRowWithListIndex 方法在网格中获取新行。对于相关的 GroupByRow，您可以使用 UltraGridRow 公开的 ParentRow 属性。

# java - 部署描述符 - 有关 servlet 实际路径名的规则

> ID：13989230
> 
> 赞同：1
> 
> 时间：2012-12-21T11:23:35.860
> 
> 标签：java, jsp, jsp-tags

我正在查看 DD，但我看不到任何指示 servlet 实际路径名的内容。容器如何使用类名来查找特定的 servlet 类文件？

```
<servlet>
<servlet-name> Name</servlet-name>
<servlet-class> test.Servlet</servlet-class>
</servlet> 

<servlet-mapping>
<servlet-name> Name</servlet-name>
<url-pattern> /Public</url-pattern>
</servlet-mapping> 
```

部署描述符使用什么规则？

确实谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:37:27.370

DD遵循以下步骤::

1.  匹配 URl 模式。

2.  对于匹配的模式，查找 servlet 名称。

3.  为该名称找到 servlet 类

# php - 用 2 个新行替换超过 x 个新行

> ID：13989237
> 
> 赞同：1
> 
> 时间：2012-12-21T11:24:04.020
> 
> 标签：php, regex, newline

我正在尝试用 2 个换行符替换*超过*2 个换行符。

我目前有：

```
$text = preg_replace('/(\r\n|\n|\r){3,}/', "\n\n", $text) 
```

哪个工作正常，但是新行并不总是`\n`字符，所以我想知道是否无论如何我可以用正确的新行字符替换它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T11:30:49.933

您可以使用`back reference`与匹配的完全相同的换行符替换：-

```
$text = preg_replace('/(\r\n|\n|\r){3,}/', "$1$1", $text) 
```

现在它会自动替换为`\n\n`, 如果`\n`匹配 3 次或更多次。其他两个也一样。

因此，您的服务器使用的任何换行符都将用作替换。

* * *

另一件事是，您上面的正则表达式可能会匹配单行中的不同换行符并尝试替换它。

例如： -`\n\r\r\n`将匹配并替换为`\r\n\r\n`. 如果您想确保只有类似的换行符匹配例如： - `\n\n\n`，并替换为`\n\n`，那么您需要将您的正则表达式更改为： -

```
$text = preg_replace('/(\r\n|\n|\r)$1{2,}/', "$1$1", $text) 
```

现在它将只匹配相同的连续换行符 - `\n\n\n\n\n`、`\r\r\r\r\r`或`\r\n\r\n\r\n\r\n`。并替换`2 occurrences`为任何匹配的内容。

# timeout - “--ipv4-timeout”可以在 vlc Activex 中工作吗？如何？

> ID：13989239
> 
> 赞同：2
> 
> 时间：2012-12-21T11:24:05.410
> 
> 标签：timeout, activex, vlc

我想在 vlc activex 中使用“--ipv4-timeout”选项，但它不起作用，这是我的代码：

id = vlc.playlist.add(rtspURL, null, "--ipv4-timeout=20000");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-10T01:11:38.187

请试试这个

```
:network-caching=1000 :ipv4-timeout=25000 
```

例子：

```
var options = new Array(":network-caching=", ":ipv4timeout=25000"); 
vlc.playlist.add(mrl,"test",options); 
vlc.playlist.playItem(itemId); 
```

# python - GQL 错误报告属性未在 dev_appserver 上编制索引？

> ID：13989241
> 
> 赞同：1
> 
> 时间：2012-12-21T11:24:09.327
> 
> 标签：python, google-app-engine, google-cloud-datastore, gql, gqlquery

必须在这里遗漏一些非常愚蠢的东西。此 GQL 查询：

```
q_count = Questions.gql('WHERE questionnaire = :1 AND deleted = False AND required = True', q).count(1000) 
```

产生以下错误： `ERROR 2012-12-21 11:19:51,760 _webapp25.py:468] Property 'required' is not indexed`

即使我的 index.yaml 包含以下条目：

`- kind: Questions properties: - name: questionnaire - name: deleted - name: required`

我错过了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:33:32.923

现在我觉得自己很愚蠢。这是我的`Questions`模型中“必需”的行：

`required = db.BooleanProperty(default=False, indexed=False)`

多哈。日志中出现的 PropertyError 在 GAE 文档中定义如下：

`exception PropertyError() The referenced model property does not exist on the data object.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:38:28.403

对于仅相等查询，您[不需要定义复合索引](https://developers.google.com/appengine/docs/python/datastore/indexes#Index_Configuration)。

# postgresql - 截断表后序列不会重置

> ID：13989243
> 
> 赞同：38
> 
> 时间：2012-12-21T11:24:12.317
> 
> 标签：postgresql, sequence

截断表后，我使用 SELECT lastval() 获取错误的序列号。

当我截断表时，我使用 SELECT lastval()，我得到了错误的 ID/

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-21T12:15:02.780

使用`TRUNCATE`SQL 命令。

对于单个表，语法如下：

```
TRUNCATE TABLE table_name RESTART IDENTITY; 
```

对于多个表：

```
TRUNCATE TABLE table_foo, table_bar RESTART IDENTITY; 
```

它能做什么：

> 自动重新启动截断表的列所拥有的序列。

详细信息：[TRUNCATE @ postgresql.org](http://www.postgresql.org/docs/current/static/sql-truncate.html)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-15T17:53:34.730

以下是重置序列的标准方法：

```
truncate table table_name restart identity; 
```

但在某些版本和平台中，这是语法错误，

在这种情况下，您可以在不重置序列的情况下截断，并使用另一个 sql 更改序列，试试这个：

```
truncate table table_name;
alter sequence seq_name start 1; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-07T15:12:36.627

将序列重置为从数字 1 开始的最佳方法是在成功截断序列后执行以下操作：

```
ALTER SEQUENCE <tablename>_<id>_seq RESTART WITH 1 
```

因此，例如对于 users 表，它将是：

```
ALTER SEQUENCE users_id_seq RESTART WITH 1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-17T15:58:39.227

检查下一个

```
ALTER SEQUENCE sequence_name RESTART WITH 1; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-01-06T09:15:42.573

尝试这个：

`TRUNCATE TABLE table_name RESTART IDENTITY CASCADE;`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-21T11:42:23.643

如果要重置序列，则：

```
setval('sequence_name', 0) 
```

要列出现有的序列名称`\ds`，请在 psql 提示符处发出 a。

# php - 在mysql中更新用户信息的问题

> ID：13989244
> 
> 赞同：1
> 
> 时间：2012-12-21T11:24:12.813
> 
> 标签：php, mysql

请让我对这件事发疯。

我有这个表格：

```
echo "<input type='text'  name='user_id' value='".$id."'' />";
    echo "<tr><td>Emer</td><td><input type='text'  name='first_name' value='".$rows['first_name']."' /></td></tr>";
    echo "<tr><td>Mbiemer</td><td><input type='text' name='last_name' value='".$rows['last_name']."'' /></td></tr>";
    echo "<tr><td>Mosha</td><td><input type='text' name='age' value='".$rows['age']."' /></td></tr>";
    echo "<tr><td>Nr.Telefoni (Nr. i telefonit duhet te jete i formatit 06* ** *** **)</td><td><input type='text' name='phone' value='".$rows['phone']."' /></td></tr>";
    echo "<tr><td>E-mail</td><td><input type='text' size='25' name='email' value='".$rows['Email']."' /></td></tr>";
    echo "<tr><td>Qyteti</td><td><input type='text' size='25' name='city' value='".$rows['city']."' /></td></tr>";
    echo "<tr><td>Shteti</td><td><input type='text' size='25' name='country' value='".$rows['country']."' /></td></tr>"; 
```

更新代码：

```
 $first_name= $_POST['first_name'];
    $last_name= $_POST['last_name'];
    $mosha= $_POST['age'];
        $phone=$_POST['phone'];
        $email= $_POST['email'];
        $city = $_POST['city'];
        $country = $_POST['country'];
        $id = $_POST['user_id'];

$query = "UPDATE users SET first_name = '$first_name',last_name = '$last_name',age = '$mosha',phone = '$phone',Email = '$email',country = '$country',city = '$city' WHERE user_id = '$id' ";
    mysql_query($query) or die ("Error in query: $query");
    ; 
```

如果我回应它，​​我会得到这个：

```
UPDATE users SET first_name = 'Al',last_name = 'M',age = '22',phone = '3545435345',Email = 'albana@al.com',country = 'Albania',city = 'Tirana' WHERE user_id = '1' 
```

然后问题是，我回到拥有所有用户的页面，那里的电话号码显示完全不同的东西，就像一个固定号码。请帮助我哪里出错了！快把我逼疯了。

查询：

```
$sql='SELECT * FROM users WHERE Active = 1 AND user_id="'.$id.'"';
$result = mysql_query($sql) or die($sql."<br/><br/>".mysql_error()); 
```

电话号码为整数类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:32:20.333

如果显示为`2147483647`，则为数据类型问题 如果电话号码以 0 或 + 开头，则使用 varchar(10) 否则使用 bigint

# objective-c - 保留 iOS Blocks 的问题

> ID：13989248
> 
> 赞同：1
> 
> 时间：2012-12-21T11:24:32.460
> 
> 标签：objective-c, ios, objective-c-blocks, retaincount

以前也有人问过类似的问题，但我无法用这些答案中的任何一个来解决我当前的问题。

情况：

```
CustomType *Object;
BOOL (^doAverage)(CustomType *, int, int) = ^(CustomType *Trigger, int Total, int Pulse) {
    //Calculate Average from Total and Pulse
    Total /= Pulse;
    [Trigger setValue:Total];
};

Object = [CustomType CreateObject]; //Autoreleased Object
[Object addCallback:^{ return doAverage(Object, 56, 32); }];
[Array addObject:Object];       //Adds to collection. 
```

手头的问题是您可能已经想到的保留周期。
`Object`保留对 in块的引用`addCallback`，并且块`doAverage`保留对 的引用`Object`。

使用实例变量是不可能的，因为我想`Object`为多个对象重用该变量。（临时变量）。
使用局部变量会导致保留计数。
并且 using`__block CustomType *Object`也不起作用，因为无论出于何种原因`Trigger`，一旦实际调用回调，最终结果为 nil 。

有任何想法吗？

我有一个临时的解决方案，但它似乎相当...hacky。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:18:17.473

```
CustomType *Object;
BOOL (^doAverage)(CustomType *, int, int) = ^(CustomType *Trigger, int Total, int Pulse) {
//Calculate Average from Total and Pulse
Total /= Pulse;
[Trigger setValue:Total];
};

Object = [CustomType CreateObject]; //Autoreleased Object
[Object addCallback:^{ return doAverage(Object, 56, 32); }]; 
```

泰勒说->“我想要的是一个'非保留对象的副本'，一旦相应的对象被释放，它就会'丢失'。”

除非您在 addCallback([^{}copy]);..

您的代码中究竟在哪里使用了副本？在 addCallback 内部？如果这是这样的：

```
addCallback(o) {

o = [o copy];
o();

then do a [o release]; when you done with a block object.. do not release it in dealloc()
} 
```

如果您从未在任何地方使用过副本，则无需担心。这一切都发生在堆栈中，这意味着根本没有保留周期，除非它不是全局的！

如果有零售周期，请不要使用 __block __weak 等，而是释放块末尾的任何对象..并记住没有复制没有保留周期..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T00:57:14.627

几件事。首先，我想看看你的`addCallback:`方法。您可能错误地实现了它。例如，如果您存储一个块供以后使用，则必须复制它。如果它是不正确的，所有的赌注都在其余的东西上。

> 并且使用 __block CustomType *Object 也不起作用，因为无论出于何种原因，一旦实际调用回调，Trigger 就会以 nil 结束。

因此，如果它是`nil`，那么这意味着您分配`nil`到`Object`某个地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:01:15.843

如前所述，这个答案相当老套，如果有人能指出我更好的方向，我会很高兴。
显然，原始数据类型与`__block`变量相结合可以解决问题，尽管这有点复杂。

```
void *Ptr;                //Variable for Block.
__block CustomType *Obj;  //Function variable, mutable by block.
BOOL (^doAverage)(void *, int, int) = ^(void *Trigger, int Total, int Pulse) {
    CustomType *T = (CustomType *)Trigger;  //Conversion
    //Calculate Average from Total and Pulse
    Total /= Pulse;
    [T setValue:Total];
};

//Convenience method.
CustomObject *(^Add)(CustomObject *) = ^(CustomObject *)NewObject {
    [Array addObject:NewObject];
    Obj = NewObject; //Assigns to the local block-Variable.
    return Obj;
};

Ptr = Add([CustomObject CreateObject]); //Creates the Object, and adds it to the array.
[Obj addCallback:^{ return doAverage(Ptr, 56, 32); }]; 
```

由于`Ptr`是原始类型，因此不会保留，也不必释放。同时，它假定了所讨论对象的地址，从而兼作它。

一旦对象被释放，带有指针的块也会被释放，一切都很好。调用块后，需要将指针转换为有问题的类型，但这只是一个小问题。

`Add`当然是可选的，但我不喜欢语法`Ptr = Obj = [CustomObject CreateObject];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:54:24.400

如果您的部署目标至少是 iOS 5（或 OS X 10.7），您可以使用“归零弱引用”：

```
CustomType *object = [CustomType makeObject];
__weak CustomType *weakObject = object;
[object addCallback:^{
    CustomType *strongObject = weakObject;
    if (strongObject)
        return doAverage(weakObject, 56, 32);
    else
        return 0;
}]; 
```

（我使用 a`makeObject`而不是`CreateObject`“工厂方法”的名称，因为名称中带有“create”的方法预计会返回一个（+1）保留计数对象，而不是自动释放的对象。）

该`__weak`引用不会增加保留计数，因此不会创建保留周期。如果`object`因最后一个强引用消失而被销毁，则`weakSelf`设置为`nil`。在块内部创建了一个强引用，它要么指向对象，如果它仍然存在，或者是`nil`，如果它不再存在。

如果我正确理解您的代码，则如果对象已被释放，则不会调用回调。在这种情况下，`__unsafe_unretained`参考就足够了（也适用于 iOS 4）：

```
CustomType *object = [CustomType makeObject];
__unsafe_unretained CustomType *unsafeObject = object;
[object addCallback:^{
    return doAverage(unsafeObject, 56, 32);
}]; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-21T12:01:05.787

尝试将对象声明为

```
__weak CustomType *Object 
```

# php - 如何使用php发送批量邮件

> ID：13989251
> 
> 赞同：1
> 
> 时间：2012-12-21T11:24:36.433
> 
> 标签：php

我正在尝试创建像 gmail 和 yahoo 这样的邮件功能，我们可以在其中输入多个 id 到、cc、bcc 字段以发送多封邮件，但不能这样做。我可以仅在一个邮件 ID 上发送带有附件的单个邮件，但不能将多个邮件 ID 发送到 、cc 、 bcc 。我正在使用 texboxes 添加邮件 ID

谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:26:24.793

这取决于您对“批量”的定义。如果您正在谈论 100 封电子邮件，则应按照[php.net/mail](http://php.net/mail)上的建议使用批处理邮件发件人。有一些 PHP 选项，但我建议您进行一些后台处理，以免耽误您的脚本。

如果您只是为少数收件人执行此操作，则可以`Bcc`在`Cc`使用`mail(..)`. 上面链接的 php.net 页面上有完整的示例。

一个（从文档中复制）示例如下：

```
<?php

$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  .. snip
</body>
</html>
';

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

mail($to, $subject, $message, $headers);
?> 
```

# java - Java if else 语句更改字符串

> ID：13989252
> 
> 赞同：0
> 
> 时间：2012-12-21T11:24:40.700
> 
> 标签：java, string, if-statement

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我有以下代码，但由于某种原因它不会更改字符串

accountClass 返回字符串“L”

```
String accountClass = accClass.substring(4, 5);
        if (accountClass == "A") {
            accountClass = "Staff - A";
        } else if (accountClass == "B") {
            accountClass = "Student - B";
        } else if (accountClass == "H") {
            accountClass = "Personal - H";
        } else if (accountClass == "K") {
            accountClass = "60 Plus - K";
        } else if (accountClass == "L") {
            accountClass = "Business - L";
        } else if (accountClass == "P") {
            accountClass = "Charity - P";
        } else if (accountClass == "Q") {
            accountClass = "AIB Subsidiary - Q";
        } else if (accountClass == "X") {
            accountClass = "Irish State Spons & Sub's - X";
        } else if (accountClass == "Y") {
            accountClass = "Other Companies & Orgs - Y";
        } else if (accountClass == "Z") {
            accountClass = "Impersonal & Gen. Ledger - Z";
        } 
```

我只是想知道它是否是 == 导致问题或其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:25:21.603

始终使用 equals() 方法检查字符串是否相等。在 Objects 的情况下，`==`检查两个引用变量是否引用同一个实例。检查两个字符串是否有意义地相等使用`String.equals()`方法。

```
if (accountClass == "A") { 
```

应该

```
if (accountClass.equals("A")) { 
```

你的其他 if 语句也是如此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T11:26:58.747

刚刚意识到应该是 if (accountClass.equals("L"))

# java - 如何验证文件是否已下载

> ID：13989253
> 
> 赞同：0
> 
> 时间：2012-12-21T11:24:40.947
> 
> 标签：java, selenium-webdriver

我正在用 selenium 编写一些自动化测试，我想检查的一件事是文件是否已下载。

通过导航到某个页面（通过 selenium）启动下载。测试需要在各种机器上执行，包括 Windows 和 Mac，因此下载文件夹不一定在每次测试运行的同一位置。下载文件的名称将以相同的字符序列开头，所以我可以对其进行正则表达式。

我想在 Java 中执行此操作，以便它可以来自与其他所有代码相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:19:12.993

本质上，我发现我无法可靠地验证文件下载，因为我无法确定下载位置（甚至文件系统，由于在不同平台上进行测试）。最后决定检查当前正在访问的 URL 作为下一个最好的事情。

# excel - 字典键分配行明智

> ID：13989254
> 
> 赞同：2
> 
> 时间：2012-12-21T11:24:46.713
> 
> 标签：excel, vbscript, vba

我有字典对象 Dic1，Dic2，其项目是字母表。说

```
 Dic1(10)= A
     Dic1(111)= B
     Dic1(12)= C like this.

     Dic2(125)= A
     Dic2(131)= B
     Dic2(126)= C like this. 
```

现在我正在尝试通过下面的 Excel 行（从第 3 列开始）中的循环分配它们的键，但并非所有键都被复制。

```
 objSheet2.Range("C"&nRow).Value=Dic1.Keys() Or(condition wise any of the assignment
    will be executed)

    objSheet2.Range("C"&nRow).Value=Dic2.Keys() 
```

但只有第一个 Key 值被复制，忽略另一个。你能告诉我代码中的错误是什么吗？

**编辑**

```
Option Explicit

Class cP
 Public m_sRel
 Public m_dicC
    Private Sub Class_Initialize()
     m_sRel     = "Child"
     Set m_dicC = CreateObject("Scripting.Dictionary")
    End Sub

    Public Function show()
     show = m_sRel & " " & Join(m_dicC.Keys)
    End Function

End Class

Dim objSheet1,objSheet2,TotalRows,TotalcolCopy,strPathExcel1
'Dim oFS   : Set oFS  = CreateObject("Scripting.FileSystemObject")
Dim oXls  : Set oXls = CreateObject("Excel.Application")
'Dim aData ': aData    = oWb.Worksheets(1).Range("$A2:$C10")
Dim dicP  : Set dicP = CreateObject("Scripting.Dictionary")
Dim nRow,nP,sKeys

strPathExcel1 = "D:\WIPData\AravoMacro\Finalscripts\A.xlsx"
oXls.Workbooks.open strPathExcel1
'oXls.Workbooks.Open(oFs.GetAbsolutePathName("A.xlsx"))
Set objSheet1 = oXls.ActiveWorkbook.Worksheets("WingToWingMay25")
Set objSheet2 = oXls.ActiveWorkbook.Worksheets("ParentChildLink")

TotalRows=oXls.Application.WorksheetFunction.CountA(objSheet1.Columns(1))
TotalcolCopy=oXls.Application.WorksheetFunction.Match("Parent Business Process ID", objSheet1.Rows(3), 0)

objSheet1.Range(objSheet1.Cells(4,1),objSheet1.Cells(TotalRows,TotalcolCopy)).Copy(objSheet2.Range("A1"))
objSheet2.Range(objSheet2.Cells(1,2),objSheet2.Cells(TotalRows,TotalcolCopy-1)).Delete(-4159)
'Dim aData : aData=objSheet2.Cells.SpecialCells(12)'xlCellTypeVisible

Dim aData : aData = objSheet2.Range("A1:B"&TotalRows-3)

'MsgBox(LBound(aData, 1)&"And"&UBound(aData, 1))

   For nRow = LBound(aData, 1) To UBound(aData, 1)

     Set dicP(aData(nRow, 1)) = New cP
     'Set dicP(aData(nRow, 2)) = New cP

   Next
    'objSheet2.Cells.ClearContents'To clear all the previous contenets of the sheet#2
    'sKeys=dicP.Keys
    'objSheet2.Range("A1").Resize(dicP.Count) = oXls.Application.Transpose(sKeys) 
    'MsgBox(dicP.Count&":"&UBound(aData, 1)&":"&LBound(aData, 1))
    For nRow = LBound(aData, 1) To UBound(aData, 1)

        If aData(nRow, 1) = aData(nRow, 2) Then
           dicP(aData(nRow, 1)).m_sRel = "Parent"
        Else
            If dicP.Exists(aData(nRow, 2)) Then

            dicP(aData(nRow, 2)).m_dicC.Add   aData(nRow, 1), 0        '(aData(nRow, 1)) = 0

            End If
        End If

    Next

    objSheet2.Cells.ClearContents'To clear all the previous contenets of the sheet#2

    nRow=1
    For Each nP In dicP.Keys()

    objSheet2.Cells(nRow,1).Value=nP
    objSheet2.Cells(nRow,2).Value=dicP(nP).m_sRel
    objSheet2.Range("C"&nRow).Resize(1+ UBound(dicP(nP).m_dicC.Keys()) + 1).Value=dicP(nP).m_dicC.Keys()
    'Range("C" & nRow).Resize(1, UBound(d.Keys()) + 1).Value = d.Keys()
    nRow=nRow+1  
    Next 
```

我收到一条错误`Unknown Run time error`消息`objSheet2.Range("C"&nRow).Resize(1+ UBound(dicP(nP).m_dicC.Keys()) + 1).Value=dicP(nP).m_dicC.Keys()`

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:55:30.267

是的，您只将一个数组分配给一个单元格。然后只复制第一个值。
您必须将数组分配给正确大小的范围。这可以通过`Range.Resize`. 再说一次，Excel 将数组视为二维数组（矩阵），如果它只是一维的，则始终将其视为第一行。如果将其复制到垂直范围内，则每个单元格将具有相同的数组的第一个元素。
对于垂直范围，您必须转置数组/虚拟矩阵：

```
Sub test()
    Dim d
    Dim nRow As Long

    nRow = 3
    Set d = CreateObject("Scripting.Dictionary")
    d(1) = "A"
    d(2) = "B"
    d(17) = "C"
    d(32) = "F"

    ' horizontal:
    Range("C" & nRow).Resize(1, UBound(d.Keys()) + 1).Value = d.Keys()

    ' vertical insert needs the data transformed
    Range("C" & nRow).Resize(UBound(d.Keys()) + 1).Value = WorksheetFunction.Transpose(d.Keys())

End Sub 
```

对于您的编辑，您可能首先需要更正`("C"&nRow)`为`("C" & nRow)`. 空格是必需的。
另一个错误是`Resize(1 + ... + 1)`，因此您添加了 +2，但这不应引发错误。

# java - Webkit 在从 JAR 中读取 Java 小程序类之前尝试下载它

> ID：13989257
> 
> 赞同：6
> 
> 时间：2012-12-21T11:24:52.473
> 
> 标签：java, html, applet

我正在嵌入这样的 Java 小程序：

```
<object type="application/x-java-applet">
  <param name="codebase" value="/path/to/jar" />
  <param name="archive" value="myapplet.jar" />' +
  <param name="code" value="my.package.MyClass" />
</object> 
```

该小程序在所有浏览器中都可以正常工作，但是 Webkit 浏览器（Chrome 和 Safari）都通过一个无用的请求来烦扰服务器，该请求试图从服务器下载 MyClass 文件（在 JAR 中并且可以从那里正常工作）：

Chrome 在控制台中显示此错误：

```
GET http://localhost/test/my.package.MyClass 404 (Not Found) 
```

使用`<embed>`标签代替时也会发生同样的情况，`<object>`但使用不推荐使用的标签时不会发生这种情况`<applet>`。

是否有可能以某种方式阻止此类文件下载？我听说过有关`codebase_lookup`参数的传言，但将此参数设置为`false`不会改变任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T03:12:32.463

我发现在**param**标签中设置applet的**code**参数时会出现这个问题。如果将其移动到对应的**object**的属性中，则不再出现 404 错误：

 ****```
<object type="application/x-java-applet" code="my.package.MyClass">
   <param name="codebase" value="/path/to/jar" />
   <param name="archive" value="myapplet.jar" />
</object> 
```

测试：

Windows 8、Java 1.7.0_25：Chrome 28、Firefox 23、IE10

OS X 10.6.8、Java 1.6.0_51：Chrome 28、Firefox 23、Safari 5.1.9

OS X 10.7.5、Java 1.7.0_25：Firefox 23、Safari 6.0.5

OS X 10.8.4、Java 1.7.0.25：火狐 23、Safari 6.0.5

OS X 10.9、Java 1.7.0_25、Firefox 23、Safari 7.0****

# c++ - MFC 控制台模式应用程序

> ID：13989262
> 
> 赞同：4
> 
> 时间：2012-12-21T11:25:10.697
> 
> 标签：c++, visual-studio, mfc, console-application

我从 Visual Studio 2008 MFC 应用程序模板创建了一个 MFC 应用程序。问题是我想显示一个正在执行的控制台，而不是默认 MFC 应用程序模板创建的窗口（就像我们选择 Win32 控制台应用程序模板时显示的那样）。

谁能告诉我怎么可能！在 MFC 应用程序中显示控制台而不是窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:44:26.820

当您创建一个新的 Win32 控制台应用程序时，该向导有一个复选框来为 MFC 添加通用头文件 - 选中它。

这不是很常见，因为在控制台应用程序中没有多少 MFC 有用。您将不会运行 MFC 的应用程序消息泵，因此很多事情都无法正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-13T02:39:03.410

在您的 stdafx.h（vs2019 之前）或 pch.h（vs2019）中：

```
#ifdef _UNICODE
#pragma comment(linker, "/entry:wWinMainCRTStartup /subsystem:console") 
#else
#pragma comment(linker, "/entry:WinMainCRTStartup /subsystem:console")
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T00:32:56.023

当 MFC 应用程序窗口运行时，您可以将项目的子系统更改为控制台，同时控制台也在运行。

如果您只想运行控制台，请创建一个控制台项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T11:56:43.810

将项目设置从*Linker > System > SubSystem*更改为“CONSOLE”而不是“WINDOWS”。

此外，如果您想在 Windows 应用程序中附加控制台，请使用 Visual Studio 工具中的“Editbin”实用程序。它位于 \VC\bin\editbin.exe

editbin.exe /SUBSYSTEM:CONSOLE YourApplicationPath.exe

这将在您的 Windows 应用程序中附加控制台。

# php - 在数据库中存储搜索词

> ID：13989264
> 
> 赞同：0
> 
> 时间：2012-12-21T11:25:15.227
> 
> 标签：php, jquery, ajax

我正在尝试将搜索关键字存储到我的数据库中。在我的搜索词中，我正在使用 YouTube API 并搜索 YouTube 视频。

```
<input spellcheck="false" value="" id="searchBox" class="statusPlaying"><span id="searchTermKeyword">amisha patel</span> 
```

为了在数据库中存储搜索词，我已经这样做了，但它不起作用。谁能告诉我如何在不刷新页面的情况下存储搜索词？

```
<form enctype="multipart/form-data" id="form1" name="form1" method="post" action="">
    <input type="text" name="title" class="statusPlaying" id="searchBox" value="" spellcheck="false">
    <span id="searchTermKeyword"></span>
</form> 
```

这是我的[实时链接](http://way2enjoy.com/try/k/ytitest1.php#amisha)|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:34:29.057

如果您只是想在不刷新页面的情况下存储数据，请使用 Ajax（使用或不使用 jQuery，这取决于您）。

请参阅此处的示例：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您可以使用：

```
$.ajax()
$.post()
$.get()
etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:33:06.357

如果我理解正确，您想在不重新加载整个页面的情况下向您的服务器发送内容。因此，您需要使用 AJAX。建议从 jQuery Ajax 开始，因为它简单且经过良好测试：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

基本上，在不提供所有细节的情况下，您需要：

*   绑定到某个事件以触发发送（例如，输入元素上的“更改”）
*   序列化表单数据（例如使用`$.serialize()` [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)）
*   `$.ajax()`打电话_

# java - 任务托盘通知气球事件？

> ID：13989265
> 
> 赞同：4
> 
> 时间：2012-12-21T11:25:15.770
> 
> 标签：java, swing, notifications, listener, system-tray

有没有`event`可以在任务托盘图标通知气球上调用的java，即

```
trayIcon.displayMessage(title, message, TrayIcon.MessageType.INFO) 
```

就像 dropbox 使用的一样，当我点击气球时，它会将我带到下载最近文件的文件夹。可以使用java吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T09:44:50.603

通过做一些研发，`double click event`当我们点击通知气球时，我得到了那个托盘图标。这就是我一直在寻找的。

检查此代码：

```
public class Main {
  static Image image = Toolkit.getDefaultToolkit().getImage("images/tray.gif");

  static TrayIcon trayIcon = new TrayIcon(image, "Tester2");

  public static void main(String[] a) throws Exception {
    if (SystemTray.isSupported()) {
      SystemTray tray = SystemTray.getSystemTray();

      trayIcon.setImageAutoSize(true);
      trayIcon.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
          System.out.println("In here");
          trayIcon.displayMessage("Tester!", "Some action performed", TrayIcon.MessageType.INFO);
        }
      });

      try {
        tray.add(trayIcon);
      } catch (AWTException e) {
        System.err.println("TrayIcon could not be added.");
      }
    }
  }
} 
```

我以这种方式为我修改了它。

```
private static String location = Roor_Location_Here// contain the root location 
```

然后在双击`event`

```
/*
 * Double click action performed *
 */
trayIcon.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        try {
            Desktop dst = Desktop.getDesktop();
            dst.open(new File(location));
            /*
             * reset the location to root location again.
             */
            location = Root_Location_Here // again setting root location                    
        } catch (Exception ex) {
            logger.error("------- error with folder opening double click "
                    + ex.getMessage());
        }
    }
}); 
```

这是我用来调用通知气球以显示消息的功能：

```
public static void showNotification(String title, String msg,
            String location) {
    if (SystemTray.isSupported()) {
        trayIcon.displayMessage(title, msg, TrayIcon.MessageType.INFO);
        SystemTrayGUI.location = location;// this sets the location that should be opened when balloon is clicked.

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:37:34.560

*   您可以将[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)添加到[SystemTray 中的消息中](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)

*   [例如](https://stackoverflow.com/a/12707482/714968)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-14T13:38:14.037

```
package misc;  
/*
 * TrayIconDemo.java
 */

import java.awt.*;
import java.awt.event.*;
import java.net.URL;
import javax.swing.*;

public class TrayIconDemo {
    public static void main(String[] args) {
        /* Use an appropriate Look and Feel */
        try {
           // UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
        } catch (IllegalAccessException ex) {
        } catch (InstantiationException ex) {
        } catch (ClassNotFoundException ex) {
        }
        /* Turn off metal's use of bold fonts */
        UIManager.put("swing.boldMetal", Boolean.FALSE);
        //Schedule a job for the event-dispatching thread:
        //adding TrayIcon.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI() {
        //Check the SystemTray support
        if (!SystemTray.isSupported()) {
            System.out.println("SystemTray is not supported");
            return;
        }
        final PopupMenu popup = new PopupMenu();
        final TrayIcon trayIcon =
                new TrayIcon(createImage("images/bulb.gif", "tray icon"));
        final SystemTray tray = SystemTray.getSystemTray();

        // Create a popup menu components
        MenuItem aboutItem = new MenuItem("About");
        CheckboxMenuItem cb1 = new CheckboxMenuItem("Set auto size");
        CheckboxMenuItem cb2 = new CheckboxMenuItem("Set tooltip");
        Menu displayMenu = new Menu("Display");
        MenuItem errorItem = new MenuItem("Error");
        MenuItem warningItem = new MenuItem("Warning");
        MenuItem infoItem = new MenuItem("Info");
        MenuItem noneItem = new MenuItem("None");
        MenuItem exitItem = new MenuItem("Exit");

        //Add components to popup menu
        popup.add(aboutItem);
        popup.addSeparator();
        popup.add(cb1);
        popup.add(cb2);
        popup.addSeparator();
        popup.add(displayMenu);
        displayMenu.add(errorItem);
        displayMenu.add(warningItem);
        displayMenu.add(infoItem);
        displayMenu.add(noneItem);
        popup.add(exitItem);

        trayIcon.setPopupMenu(popup);

        try {
            tray.add(trayIcon);
        } catch (AWTException e) {
            System.out.println("TrayIcon could not be added.");
            return;
        }

        trayIcon.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(null,
                        "This dialog box is run from System Tray");
            }
        });

        aboutItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(null,
                        "This dialog box is run from the About menu item");
            }
        });

        cb1.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent e) {
                int cb1Id = e.getStateChange();
                if (cb1Id == ItemEvent.SELECTED){
                    trayIcon.setImageAutoSize(true);
                } else {
                    trayIcon.setImageAutoSize(false);
                }
            }
        });

        cb2.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent e) {
                int cb2Id = e.getStateChange();
                if (cb2Id == ItemEvent.SELECTED){
                    trayIcon.setToolTip("Sun TrayIcon");
                } else {
                    trayIcon.setToolTip(null);
                }
            }
        });

        ActionListener listener = new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                MenuItem item = (MenuItem)e.getSource();
                //TrayIcon.MessageType type = null;
                System.out.println(item.getLabel());
                if ("Error".equals(item.getLabel())) {
                    //type = TrayIcon.MessageType.ERROR;
                    trayIcon.displayMessage("Sun TrayIcon Demo",
                            "This is an error message", TrayIcon.MessageType.ERROR);

                } else if ("Warning".equals(item.getLabel())) {
                    //type = TrayIcon.MessageType.WARNING;
                    trayIcon.displayMessage("Sun TrayIcon Demo",
                            "This is a warning message", TrayIcon.MessageType.WARNING);

                } else if ("Info".equals(item.getLabel())) {
                    //type = TrayIcon.MessageType.INFO;
                    trayIcon.displayMessage("Sun TrayIcon Demo",
                            "This is an info message", TrayIcon.MessageType.INFO);

                } else if ("None".equals(item.getLabel())) {
                    //type = TrayIcon.MessageType.NONE;
                    trayIcon.displayMessage("Sun TrayIcon Demo",
                            "This is an ordinary message", TrayIcon.MessageType.NONE);
                }
            }
        };

        errorItem.addActionListener(listener);
        warningItem.addActionListener(listener);
        infoItem.addActionListener(listener);
        noneItem.addActionListener(listener);

        exitItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                tray.remove(trayIcon);
                System.exit(0);
            }
        });
    }

    //Obtain the image URL
    protected static Image createImage(String path, String description) {
        URL imageURL = TrayIconDemo.class.getResource(path);

        if (imageURL == null) {
            System.err.println("Resource not found: " + path);
            return null;
        } else {
            return (new ImageIcon(imageURL, description)).getImage();
        }
    }
} 
```

# sql - 授予对 SQL SERVER 用户定义函数的权限

> ID：13989267
> 
> 赞同：1
> 
> 时间：2012-12-21T11:25:20.330
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

如果用户定义的函数永远不会在存储过程的上下文之外执行，那么可能授予 SQL Server 用户定义函数的权限的原因是什么？

在开发涉及创建 UDF 的数据库创建脚本时，我们是否应该添加授予权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T19:00:58.713

用户定义的函数可以在存储过程的上下文之外使用。在数据库对象安全中允许这种粒度是一种很好的做法。我更喜欢拥有涉及角色（数据读取器、数据写入器、报告等）的权限，然后使用创建脚本授予权限。看看这个[http://technet.microsoft.com/en-us/library/dd283095(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/dd283095(v=sql.100).aspx)

# iphone - 更改 IBOutletCollection 的帧值

> ID：13989270
> 
> 赞同：0
> 
> 时间：2012-12-21T11:25:34.343
> 
> 标签：iphone, objective-c, ios, ipad

我创建了几个按钮的 IBOutletCollect ：

```
@property (retain, nonatomic) IBOutletCollection(UIButton) NSArray *allButtons; 
```

现在我必须更改这些按钮的框架和位置：

```
[_allButtons makeObjectsPerformSelector:@selector(setFrame:) withObject: ????? ]; 
```

如何在这里将我的自定义值设置为 id ？我使用了这种方法，但编译器给了我一个错误

```
 [_allButtons makeObjectsPerformSelector:@selector(setFrame:) withObject:CGRectMake(10, 0, 0, 10)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:34:56.227

使用块枚举您的数组：

```
[allButtons enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx, BOOL *stop){
    button.frame = newFrame;
};]; 
```

更强大、更灵活，而且可能更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:32:02.067

CGRect 不是对象，因此不能直接添加。将其包装在 NSValue 中：

```
[NSValue valueWithCGRect:] 
```

看看 [NSValue 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:44:53.843

此代码将为您工作。

```
for (UIButton *btn in allButtons) {
    [btn addTarget:self action:@selector(setFrame:) forControlEvents:UIControlEventTouchUpInside];
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:31:38.400

CGRect 不是对象，因此您必须将其包装在 NSValue 对象中，然后创建一个用于展开和设置框架的类别方法：

```
[_allButtons makeObjectsPerformSelector:@selector(updateFrame:) withObject:[NSValue valueWithCGRect:CGRectMake(10, 0, 0, 10)]]; 
```

在 UIView 的一个类别中：

```
- (void)updateFrame:(NSValue *)frameValue {
    self.frame = [frameValue CGRectValue];
} 
```

# actionscript-3 - Adobe AIR AS3 - 前置摄像头

> ID：13989276
> 
> 赞同：2
> 
> 时间：2012-12-21T11:25:49.657
> 
> 标签：actionscript-3, air, flash-cs5

我目前正在使用下面显示的代码在 Android 设备上访问和显示相机。它工作正常，但我不想访问标准摄像头，而是想访问前置摄像头。我怎样才能修改下面的代码来做到这一点？提前致谢。

```
var cam:Camera = Camera.getCamera(); 
var vid:Video = new Video(); 
vid.attachCamera(cam); 
addChild(vid);
if (cam != null) 
{ 
    cam.addEventListener(StatusEvent.STATUS, statusHandler); 
    vid = new Video(); 
    vid.attachCamera(cam); 
} 
function statusHandler(event:StatusEvent):void 
{ 
    if (!cam.muted) 
    { 
        vid.width = cam.width; 
        vid.height = cam.height; 
        addChild(vid); 

    } 
    cam.removeEventListener(StatusEvent.STATUS, statusHandler); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T23:35:22.810

将前置摄像头的凸轮索引值传递到您的 中`Camera.getCamera();`，例如：

```
var camIndex:String = "1"; 
var cam:Camera = Camera.getCamera(camIndex); 
```

如果上述修改没有改变任何内容，请尝试将 camIndex 的值更改为“0”、“2”、“3”，这取决于您的前置摄像头注册了哪个索引。尝试一下！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T13:05:40.263

在使用 Adob​​e Air 开发应用程序时，在 android 和 ios 设备上安装前置摄像头的最佳方式是；

```
protected var _camera:Camera = null;    
_camera = getCamera(CameraPosition.FRONT); 
```

进而

```
private function getCamera(position:String):Camera
    {
      for (var i:uint = 0; i < Camera.names.length; ++i)
      {
        var cam:Camera = Camera.getCamera(String(i));
        if (cam.position == position) return cam;
      }
      return Camera.getCamera();
    } 
```

通过传递相机名称有时无法正常工作，尤其是在基于 ios 的设备中。

# ios - 如何在 ios 中读取 pdf 文件。我没有使用 UIWebView

> ID：13989278
> 
> 赞同：0
> 
> 时间：2012-12-21T11:26:04.670
> 
> 标签：ios

我想读取来自服务器的 URl 中的 pdf 文件。我没有使用 UIWebview。

所以，我只想知道有没有办法在不下载到设备的情况下查看该pdf文件。只是它是可读的或缓冲的，而不是存储的。

任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:50:28.527

在 UIWebView 之外显示 PDF 的最简单方法是使用 QuickLook 框架：

[http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)

但是，并非不合理，Quicklook 需要“文件”类型的 URL。

因此，如果不使用 UIWebView，您需要添加自己的代码来下载/缓存/显示，这并不难。如果您需要示例代码，请告诉我。

# notepad++ - 删除所有换行符并在某些文本之后添加它们

> ID：13989288
> 
> 赞同：65
> 
> 时间：2012-12-21T11:26:39.910
> 
> 标签：notepad++

我有一个文本文件，我必须在其中删除所有换行符，然后在每个 text 之后添加新的换行符`</row>`。我怎么能用替换工具做到这一点？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-21T12:33:38.293

至少，您需要分两步完成。

首先，单击工具栏中的 ¶ 符号：您可以查看是否有`CRLF`行尾或只有`LF`.

单击“替换”按钮，然后放置`\r\n`或`\n`，具体取决于行尾的类型。在对话框的搜索模式部分，选中扩展单选按钮（解释`\n`等）。然后将所有出现的内容都替换为空字符串（空字符串）。

你以一条大线结束......

接下来，在同一个替换对话框中，将您的分隔符 ( `</Row>`) 例如放在替换为字段中，将其放在行尾 ( `</Row>\r\n`) 中。全部替换，就完成了。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-08-14T11:34:01.760

您也可以转到 Notepad++ 并执行以下步骤：

Edit->LineOperations-> Remove Empty Lines 或 Remove Empty Lines（包含空白字符）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-11-13T08:49:04.980

你也可以在记事本++中试试这个

*   突出显示要加入的行（ctrl + a 全选）
*   选择 Edit -> Line Operations -> Join Lines

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-11-07T22:50:31.697

*   打开记事本++
*   粘贴您的文字
*   控制 + H

在弹出窗口中

*   查找内容：\r\n
*   替换为：BLANK_SPACE

你最终得到了一条大线。然后

*   控制 + H

在弹出窗口中

*   找什么： （\。）
*   替换为：\r\n

所以你最终会得到以点结尾的线条

**如果您必须多次执行相同的过程**

*   转到宏
*   开始录制
*   做上面的过程
*   转到宏
*   停止录制
*   保存当前录制的宏
*   选择一个捷径
*   选择要应用该过程的文本（Control + A）
*   做捷径

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-21T16:39:13.623

我通过以下
Edit > Blank Operations > Remove Unnecessary Blank and EOL实现了这一点

# wordpress - 使用 Wordpress 的附加 .htaccess 重写条件

> ID：13989289
> 
> 赞同：0
> 
> 时间：2012-12-21T11:26:44.783
> 
> 标签：wordpress, .htaccess, rewrite, permalinks

我希望在 Wordpress 中删除插件 URL 的一部分。我有一个标准的永久链接设置，但我希望清理三个带有类似 iffy 前缀的 URL：

目前我有

[http://domain.com/?pfwk_cats=works](http://domain.com/?pfwk_cats=works)

我要求：

[http://domain.com/portfolio-works](http://domain.com/portfolio-works)

我当前的 htaccess 看起来像：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

我的解决方案是添加：

```
RewriteEngine On
RewriteRule ^portfolio-([^/]*)$ /?pfwk_cats=$1 [L] 
```

但它不踢？有任何想法吗？我假设 Wordpress 重写规则搞砸了？非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:41:14.263

您需要确保您的自定义规则高于该`#BEGIN WordPress`线。WordPress 重写规则是一个“包罗万象”的规则，所以如果你把你的规则放在下面，它永远不会到达那里。

另外，不要忘记重新启动 Apache：`service httpd graceful`

〜汤米

# mysql - 比较 MySQL 中单元格的值

> ID：13989294
> 
> 赞同：2
> 
> 时间：2012-12-21T11:26:56.003
> 
> 标签：mysql

我有一个数据库：

```
Student (ID, Name, Grade)
Likes (ID1, ID2)

Where ID1 and ID2 in last table are foreign key referenced student(ID) 
```

注意：点赞不是相互关系，例如如果(123, 456) 在点赞表中，那么(456,123) 也不必在点赞表中。

我必须为以下语句编写查询：“对于彼此喜欢的每对学生，返回两个学生的姓名和年级。每对只包括一次，两个名字按字母顺序排列。”

到目前为止，我已经给出了 ID1 和 ID2 相互喜欢的数据：

```
SELECT s1.ID, s1.name, s2.ID, s2.name 
FROM student s1, student s2, likes l
WHERE s1.ID = l.ID1 AND s2.ID = l.ID2 
AND l.ID1 IN (SELECT ID2 FROM likes) 
AND l.ID2 IN (SELECT ID1 FROM likes); 
```

有人请帮助我如何避免重复对。

数据库是：（如果有人需要）

```
INSERT INTO `student` VALUES (1025,'John',12),(1101,'Haley',10),(1247,'Alexis',11),(1304,'Jordan',12),(1316,'Austin',11),(1381,'Tiffany',9),(1468,'Kris',10),(1501,'Jessica',11),(1510,'Jordan',9),(1641,'Brittany',10),(1661,'Logan',12),(1689,'Gabriel',9),(1709,'Cassandra',9),(1782,'Andrew',10),(1911,'Gabriel',11),(1934,'Kyle',12);
INSERT INTO `likes` VALUES (1689,1709),(1709,1689),(1782,1709),(1911,1247),(1247,1468),(1641,1468),(1316,1304),(1501,1934),(1934,1501),(1025,1101); 
```

并根据输入的数据：

**我得到的数据**

```
1689    Gabriel     1709    Cassandra
1709    Cassandra   1689    Gabriel
1501    Jessica     1934    Kyle
1934    Kyle        1501    Jessica 
```

**理想数据**

```
1689    Gabriel     1709    Cassandra
1501    Jessica     1934    Kyle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:38:52.803

由于问题是“*如何避免重复对。* ”：

您加入 2 个表以获得他们都喜欢的表，每对将获得 2 行。

您可以通过与一些不同的值进行比较来丢弃一个。ID是一个很好的候选人：

```
select * -- put fields here
from likes li 
join likes li2 on li2.ID1 = li.ID2 and li2.ID2 = li.ID1
-- join 2 students here
where li.ID1 < li.ID2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:47:53.687

试试下面的查询：

```
SELECT L1.*
FROM `likes` l1
LEFT JOIN `likes` l2 ON l1.id1 = l2.id2 AND l1.id2 = l2.id1
WHERE l2.id2 IS NOT NULL
GROUP BY l1.id1 - l1.id2
HAVING l1.id1 - l1.id2 < 0 
```

# qt - 使用 QSignalMapper 时如何保持源信号的参数？

> ID：13989297
> 
> 赞同：7
> 
> 时间：2012-12-21T11:27:07.157
> 
> 标签：qt, qt4, signals-slots

我遇到了一个问题，我需要保留映射源信号的参数。到目前为止，我只找到了没有任何参数的映射信号的示例。例如，clicked() 信号：

```
signalMapper = new QSignalMapper(this);
signalMapper->setMapping(taxFileButton, QString("taxfile.txt"));

connect(taxFileButton, SIGNAL(clicked()),
     signalMapper, SLOT (map()));

connect(signalMapper, SIGNAL(mapped(QString)),
     this, SLOT(readFile(QString))); 
```

但是，我需要使用自己的参数映射一些信号，例如 clicked(bool) 信号，然后 SLOT 需要有两个参数 doStuff(bool,QString)：

```
connect(taxFileButton, SIGNAL(clicked(bool)),
     signalMapper, SLOT (map()));

connect(signalMapper, SIGNAL(mapped(QString)),
     this, SLOT(doStuff(bool,QString))); 
```

但是，它不是这样工作的吗？有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T17:45:39.983

`QSignalMapper`不提供传递信号参数的功能。

请参阅文档：
*此类收集一组无**参数**信号，并使用与发送信号的对象相对应的整数、字符串或小部件参数重新发出它们。*

有办法解决这个问题：

**如果使用 Qt4，**那么我建议实现您自己的信号映射器，它支持您需要的参数。
[`QSignalMapper`实施](http://qt.gitorious.org/qt/qt/blobs/4.8/src/corelib/kernel/qsignalmapper.cpp)将是一个很好的例子。

但是**，如果使用 Qt5，**那么您可以完全不使用任何东西来完成您需要`QSignalMapper`的操作。只需将信号连接到 lambda：

```
connect(taxFileButton, &TaxFileButton::clicked, [this](bool arg) {
    doStuff(arg, "taxfile.txt");
}  ); 
```

我假设`taxFileButton`是`TaxFileButton`类的实例。

如果 C++11 lambda 由于某种原因不适合，那么`tr1::bind`可以用于绑定`this`和`"taxfile.txt"`值。请注意，当对象被销毁
时，此类连接不会自动断开。`this`更多细节在[这里](http://qt-project.org/wiki/New_Signal_Slot_Syntax)。

# android - 在活动中重新启动片段

> ID：13989300
> 
> 赞同：5
> 
> 时间：2012-12-21T11:27:12.320
> 
> 标签：android, fragment, lifecycle

我有点怀疑。

我有一个里面有 3 个片段的活动。我需要重新启动这些片段之一的状态。**重启只有一个**。

![在此处输入图像描述](../Images/9a5d4a17be3fcbebbc9b93b3d07c6989.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-18T11:51:58.460

旧的，但可能对其他人有用。要刷新片段，您需要分离片段并重新附加它

```
Fragment frg = null;
frg = getFragmentManager().findFragmentByTag("Your_Fragment_TAG");
final FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.detach(frg);
ft.attach(frg);
ft.commit(); 
```

**Your_Fragment_TAG**是您在创建片段时为其指定的名称

# xcode - 在每个 git pull 上以编程方式用远程文件覆盖特定的本地文件

> ID：13989302
> 
> 赞同：0
> 
> 时间：2012-12-21T11:27:13.987
> 
> 标签：xcode, git

我有一个 XML 文件，我们认为它是 git 中的**二进制文件。**该文件是外部修改和提交的。

我不关心谁编辑了它以及文件中有什么新内容。我只想在每次拉取时都拥有最新的文件版本。这时，每次`git pull`我都有一个*合并冲突*。

我只是希望这个文件被覆盖在 every 上，而不是像每次我必须同步我的 repo 时`git pull`手动做的事情。`git fetch/checkout/reset`

小心：我只想覆盖那个文件，而不是每个文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:44:27.640

[此答案](https://stackoverflow.com/a/930495/1451820)显示了如何始终为特定文件上的冲突合并选择**本地版本。**但是，在回答的中途，作者还描述了如何始终使用**远程**版本。

本质上，您必须使用[git 属性](http://git-scm.com/docs/gitattributes)为该特定文件指定特定的合并驱动程序，其中：

```
echo binaryfile.xml merge=keepTheirs > dir/with/binary/file/.gitattributes
git config merge.keepTheirs.name "always keep their file during merge"
git config merge.keepTheirs.driver "keepTheirs.sh %O %A %B"
git add -A
git commit -m "commit file for git attributes" 
```

然后`keepTheirs.sh`在你的创建`$PATH`：

```
cp -f "$3" "$2"
exit 0 
```

请参阅该答案以获取详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:38:44.450

我以为你可以使用[Git Hooks](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)，但我没有看到有人在拉之前运行......

一种可能的解决方法是制作一个脚本来删除此文件并与所需的链接`git pull`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:19:12.833

如果对文件的更改不是实际更改，则不应提交它们。这将使您的版本历史变得混乱并导致许多问题。

从您的陈述中我不太确定是哪种情况，但有两种可能性：

1.  有问题的文件是一个本地存储文件，其内容与您的实际源代码无关。在这种情况下，该文件应该是您的 .gitignore 的一部分。

2.  此文件实际上是您的源代码的一部分，因此将来会有相关更改。通过像您计划的那样设置合并设置，一旦此文件实际更改，您将造成麻烦。因为合并将是破坏性的。

    在这种情况下，解决方案会稍微复杂一些（除了修复这个糟糕的工具，它会改变它实际上并没有改变的东西……）。您可能正在寻找的是**假设未更改**的 git 功能。您可以使用以下命令访问它：

    ```
    git update-index --assume-unchanged <file> 
    ```

    **git 文档（`git help update-index`）：**

    > 您可以将“假设未更改”位设置为您未更改的路径，以导致 git 不执行此检查。请注意，在路径上设置此位并不意味着 git 将检查文件的内容以查看它是否已更改 - 它使 git 忽略任何检查并假设它没有更改。当您对工作树文件进行更改时，您必须在修改它们之前或之后通过删除“假设不变”位来明确告诉 git。

# python - Python中没有构造函数重载 - 缺点？

> ID：13989304
> 
> 赞同：6
> 
> 时间：2012-12-21T11:27:20.773
> 
> 标签：python

我正在通过 DiveIntoPython 并遇到了这个：

> Java 和Powerbuilder 支持按参数列表重载函数，即一个类可以有多个同名但参数数量不同的方法，或不同类型的参数。其他语言（最著名的是 PL/SQL）甚至支持按参数名称重载函数；即一个类可以有多个具有相同名称和相同类型但参数名称不同的参数数量相同的方法。Python 都不支持这些。它没有任何形式的函数重载。方法仅由它们的名称定义，每个类只能有一个具有给定名称的方法。所以如果一个后代类有一个`__init__`方法，它总是会覆盖祖先`__init__`方法，即使后代使用不同的参数列表定义它。同样的规则适用于任何其他方法。

这不是子类的`__init__`方法*总是*会覆盖超类的`__init__`方法的主要缺点吗？因此，如果我正在初始化一些变量并在一个类中调用一些函数，那么我派生它的一个子类，我必须重新初始化所有的变量并在`class1`' s中调用这些函数？`__init__``class2(class1)``class1``class2``__init__`

我很确定我误解了这一切，所以如果有人能澄清这一点，那就太好了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T11:32:19.900

你是对的，`__init__`在子类中定义会覆盖超类的`__init__`，但你总是可以`super(CurrentClass, self).__init__`用来从子类调用超类的构造函数。因此，您不必“手动”复制超类的初始化工作。

作为旁注，即使 Python 不支持方法重载，它也支持默认参数（除了通过`*args`and的可选参数`**kwargs`），这意味着您可以通过简单地接受函数中的不同参数子集来轻松模拟重载函数的行为/方法实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:41:17.780

> 因此，如果我正在初始化一些变量并在类 class1 中调用一些函数`__init__`，那么我派生出它的子类 class2(class1)，我必须重新初始化所有 class1 的变量并在 class2 中调用这些函数`__init__`？

不，你只需要调用超类的`__init__()`. [在这里](https://stackoverflow.com/questions/805066/how-to-call-a-parent-classs-method-from-child-class-in-python)，[在这里](https://stackoverflow.com/questions/4300738/python-which-is-the-better-way-of-calling-superclass-method)，你可以找到如何去做。

# mysql - 通过 UDF 使用 MYSQL DATE_FORMAT 法语/法语月份和日期名称的有问题的口音

> ID：13989311
> 
> 赞同：0
> 
> 时间：2012-12-21T11:27:58.113
> 
> 标签：mysql, date

我创建了一个 UDF 来扩展 DATE_FORMAT 函数来获取法语月份和日期名称。

我用正确的词分别替换`%a`,`%b`和。我使用 CASE 语句将英语转换为法语单词，然后将格式字符串标记替换为找到的单词。`%W``%M`

它工作正常。

```
delimiter |
/*DROP FUNCTION DATE_FORMAT_FR*/
|
CREATE FUNCTION DATE_FORMAT_FR (dt DATETIME, f VARCHAR(32))
RETURNS VARCHAR(255) DETERMINISTIC NO SQL
BEGIN
    DECLARE name VARCHAR(16);
    /*short day name*/
    IF INSTR(f, '%a') >= 0 THEN
        SET name = CASE DATE_FORMAT(dt, '%a')
            WHEN 'Mon' THEN 'Lun'
            WHEN 'Tue' THEN 'Mar'
            WHEN 'Wed' THEN 'Mer'
            WHEN 'Thu' THEN 'Jeu'
            WHEN 'Fri' THEN 'Ven'
            WHEN 'Sat' THEN 'Sam'
            WHEN 'Sun' THEN 'Dim'
            ELSE DATE_FORMAT(dt, '%a')
            END;
            /*replace in source format string*/
            SET f = REPLACE(f, '%a', name);
    END IF;
    /*long day name*/
    IF INSTR(f, '%W') >= 0 THEN
        SET name = CASE DATE_FORMAT(dt, '%W')
            WHEN 'Monday' THEN 'Lundi'
            WHEN 'Tuesday' THEN 'Mardi'
            WHEN 'Wednesday' THEN 'Mercredi'
            WHEN 'Thursday' THEN 'Jeudi'
            WHEN 'Friday' THEN 'Vendredi'
            WHEN 'Saturday' THEN 'Samedi'
            WHEN 'Sunday' THEN 'Dimanche'
            ELSE DATE_FORMAT(dt, '%W')
            END;
            /*replace in source format string*/
            SET f = REPLACE(f, '%W', name);
    END IF;
     /*short month name*/
    IF INSTR(f, '%b') >= 0 THEN
        SET name = CASE DATE_FORMAT(dt, '%b')
            WHEN 'Jan' THEN 'Jan'
            WHEN 'Feb' THEN 'Fév'
            WHEN 'Mar' THEN 'Mar'
            WHEN 'Apr' THEN 'Avr'
            WHEN 'May' THEN 'Mai'
            WHEN 'Jun' THEN 'Juin'
            WHEN 'Jul' THEN 'Juil'
            WHEN 'Aug' THEN 'Août'
            WHEN 'Sep' THEN 'Sept'
            WHEN 'Oct' THEN 'Oct'
            WHEN 'Nov' THEN 'Nov'
            WHEN 'Dec' THEN 'Déc'
            ELSE DATE_FORMAT(dt, '%b')
            END;
            /*replace in source format string*/
            SET f = REPLACE(f, '%b', name);
    END IF;
    /*long month name*/
    IF INSTR(f, '%M') >= 0 THEN
        SET name = CASE DATE_FORMAT(dt, '%b')
            WHEN 'Jan' THEN 'Janvier'
            WHEN 'Feb' THEN 'Février'
            WHEN 'Mar' THEN 'Mars'
            WHEN 'Apr' THEN 'Avril'
            WHEN 'May' THEN 'Mai'
            WHEN 'Jun' THEN 'Juin'
            WHEN 'Jul' THEN 'Juillet'
            WHEN 'Aug' THEN 'Août'
            WHEN 'Sep' THEN 'Septembre'
            WHEN 'Oct' THEN 'Octobre'
            WHEN 'Nov' THEN 'Novembre'
            WHEN 'Dec' THEN 'D\351cembre'
            ELSE DATE_FORMAT(dt, '%M')
            END;
            /*replace in source format string*/
            SET f = REPLACE(f, '%M', name);
    END IF;
    /*returns standard conversion*/
    RETURN DATE_FORMAT(dt, f);
END 
```

但我有口音的问题：

```
SELECT DATE_FORMAT_FR('2000-02-01', '%a %W %b %M')
> Mar Mardi F?v F?vrier 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:41:57.217

我发现用 phpMyAdmin UI 修改存储的过程，只是重新验证它，没有更多的重音问题出现......太奇怪了。

# asp.net - 当asp文本框的文本改变时触发事件

> ID：13989314
> 
> 赞同：0
> 
> 时间：2012-12-21T11:28:24.477
> 
> 标签：asp.net, textbox

我有一个绑定到日历的 asp:TextBox。我想通过日历更改日期时更新gridview。不提交表格怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:12:24.010

您可以处理日历的 SelectionChanged 事件，然后从那里调用文本框的 textChanged 事件，该事件又会更新 gridview，如下所示：

```
protected void MyCalendar_SelectionChanged(object obj, EventArgs e)
{
    MyTextbox.Text = MyCalendar.SelectedDate.ToShortDateString();
    TextBox_TextChanged(null, EventArgs.Empty);
} 
```

# javascript - 用 jquery 加载 div 后做一些事情

> ID：13989316
> 
> 赞同：2
> 
> 时间：2012-12-21T11:28:32.710
> 
> 标签：javascript, jquery, load

我的 jquery 有一些问题。在指定 div 加载后，我需要从某个列表中删除前两个元素。当文档准备好时，我的 DOM 中没有这个 div，它在一些点击操作后附加。所以，我需要做的是制作这个指定 div 将添加到我的 DOM 的函数。这是我的代码，谢谢帮助。

```
setTimeout(function(){
    if ($('.sv_flex_slider .slides').find('li').size() > 3) {
        $('#fancybox-thumbs').load(function(){
            setTimeout(function(){
                $('#fancybox-thumbs ul').find('li').eq(1).remove();
                $('#fancybox-thumbs ul').find('li').eq(2).remove();    
            },200);
        })
    }
},200); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:36:02.140

创建 div 时需要一个触发器。像这样：

```
$('#some_element').on('click', function () {
    var $element = $(document.createElement('div')).attr('id', 'newDiv');
    $element.trigger('created');    
}); 
```

然后你可以听：

```
$('body').on('created', '#newDiv'.... 
```

# javascript - 使用 JavaScript 连接到 Rails 服务

> ID：13989317
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:28:48.393
> 
> 标签：javascript, ruby-on-rails

我的任务是在 RoR 中完成的页面上显示一些数据。我们使用砖石来获得用户体验。页面上会有一些滑块，用户可以在其中向左或向右移动它们。根据他的选择，将显示数据。

我们正在考虑制作一个 rails 服务，它将按时间间隔从数据库中提取数据（而不是根据用户请求）。当用户请求数据时，它会返回它（不是一直查询数据库）。我在这里不知所措。我用 AJAX/Service (.NET) 做了类似的事情。我在哪里提供服务（方法）来获取数据。我使用 AJAX 从该方法中获取数据，并且效果很好。

数据库中的数据必须是 HTML 格式（不是在数据库中格式化）。我们还没有决定数据的格式，RoR Service 还是 Client JS？？？

JS中连接Rails Service的骨架连接器是什么？我能以数组的形式接收我的数据吗？弦乐也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:44:04.553

您可以使用简单的 json 通过 ajax 检索您想要的任何数据，然后解析并呈现在您的页面上

在您的控制器中，您可以指定响应的类型。例如

```
respond_to do |format|
format.json {'status' => 'ok', params{'param1':'value1'....}}
end 
```

然后使用 jquery&ajax 或任何你正在使用的东西，你可以向这个控制器发送 get 请求，它会返回带有参数的 json。在你可以用js解析它并在你的页面上呈现之后

# android - 安装后.apk文件在手机中的位置

> ID：13989318
> 
> 赞同：7
> 
> 时间：2012-12-21T11:28:54.057
> 
> 标签：android, location, apk

我有以下问题

1.  请解释一下android应用程序的安装过程。
2.  当我们安装 android 应用程序时，.apk 文件的临时文件夹位置是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:34:10.667

APK被复制到root的/data/app。与apk相关的数据在/data/data/app_name中生成

搜索后，您可以在 StackExchange 上获得足够多的文章，例如：

[https://android.stackexchange.com/questions/5147/the-installation-steps-of-android-package](https://android.stackexchange.com/questions/5147/the-installation-steps-of-android-package)

[Android: Understanding the APK installation process](https://stackoverflow.com/questions/12442979/android-understanding-the-apk-installation-process)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:33:19.760

预装的应用程序位于

> /系统/应用

文件夹。用户安装的应用程序位于 /data/app。我猜你不能访问，除非你有一个根电话。我这里没有非 root 手机，但试试这个代码：

```
public class Testing extends Activity {
    private static final String TAG = "TEST";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        File appsDir = new File("/data/app");

        String[] files = appsDir.list();

        for (int i = 0 ; i < files.length ; i++ ) {
            Log.d(TAG, "File: "+files[i]);

        }
    } 
```

也可以观看此视频以了解 .apk 文件安装的工作流程

[https://sites.google.com/site/io/inside-the-android-application-framework](https://sites.google.com/site/io/inside-the-android-application-framework)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T05:26:54.603

System apps are located under director :

```
 /device/system/app 
```

# android - 解析颜色而不是资源 ID

> ID：13989319
> 
> 赞同：53
> 
> 时间：2012-12-21T11:28:55.413
> 
> 标签：android, lint

最近我看到我的代码中出现了一个 lint 错误：

> 应该在这里传递解析的颜色而不是资源 id： getResources().getColor(R.color.maps_list_background_color)
> MyClass.java /myapp/android/maps 第 107 行 Android Lint 问题

我知道如何解决它，答案在错误中，问题是我不明白为什么他们在 linter 中添加了这个错误。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-09-11T10:39:19.027

> 采用整数形式的颜色的方法应该传递一个 RGB 三元组，而不是实际的颜色资源 ID。您必须调用 getResources.getColor(resource)。

您正在调用的函数需要一个 RGB 三元组的整数，而不仅仅是颜色资源的 id。颜色资源 id 仍然是一个整数，但如果将其用作 RGB 三元组，则不会产生您期望的颜色。为了将正确的 RGB 三元组传递给您的颜色，您必须通过`getResources().getColor(R.color.example_color)`调用解决它。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-11-12T14:43:14.770

由于我仍然在谷歌上找到它并且它已被弃用，我想我不妨分享一下当前的方法。

检查[getResources().getColor() 已弃用](https://stackoverflow.com/questions/31842983/getresources-getcolor-is-deprecated)

```
ContextCompat.getColor(getApplicationContext(), R.color.color_name) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-12T09:09:40.197

使用注释`@ColorInt`来确认这是颜色而不是颜色参考 ID。

请参阅： [android.support.annotation.ColorInt](https://developer.android.com/reference/android/support/annotation/ColorInt.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-04-28T18:58:43.717

由于`getResources().getColor()`已弃用，您需要执行此操作以获取颜色：

```
int color = ContextCompat.getColor(getContext(),your_color_id); 
```

现在您有了与当前上下文相关的颜色 使用以下方法设置颜色：

```
your_view.setBackgroundColor(color); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-15T11:12:57.533

至于我，这是非常愚蠢的警告。

我有自己的功能类：

```
public static final void setBackgroundColor(View v, int id) {
// Here I get color by id from resources and setBackgroundColor of this color.
} 
```

无论如何，如果我尝试 call `setBackgroundColor`，我会收到警告。但为什么？

所以，我做了简单的：重命名`setBackgroundColor`为`setBackgroundColorr`.

`color`如果在函数名称处找到名称，则会激活此警告。

是的，我不喜欢名称 setColorBackground 或任何其他 :-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-11T23:45:44.220

如果您使用的是 androidx，您可以执行以下操作：

```
requireContext().getColor(R.color.myColor); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-06-29T06:50:19.053

显然这是由棉绒引起的；第三颗子弹下来。

[新的皮棉规则](http://tools.android.com/recent/newlintrules-1)

您可能会对此感到不满，或者尝试实现它们的语法。

# design-patterns - 许多页面浏览量计数器与 @Singleton

> ID：13989320
> 
> 赞同：0
> 
> 时间：2012-12-21T11:28:56.333
> 
> 标签：design-patterns, jakarta-ee, singleton, ejb, counter

AFAIK @Singleton EJB 适合计算页面浏览量，例如：

```
@Singleton
public class CounterBean {
    private int hits = 1;

    // Increment and return the number of hits
    public int getHits() {
        return hits++;
    }
} 
```

这适用于一个页面的 Web 应用程序，如果 Web 应用程序有 1K 个页面，并且我们希望在每次加载时显示每个视图的计数器。

会为此分配@Singleton 吗？我的意思是，这会**有效**吗？（有*许多*bean 经常更新单个实例）

我猜测管理所有网页计数器的单个实例效率不高。想象一下，成千上万的 @RequestScoped bean 更新`Map <ViewID, Count>`@Singleton 中的 a，将导致大量并发......

为了更新重新部署的持久值，我正在考虑使用`@PostConstruct`（从数据库中提取）、`@PreDestroy`（推送到数据库）注释。

页面浏览计数器将显示在每个视图中。

网页的数量是动态的。

我知道 Google Analytics 可以完成这项工作，但问题是如何在 Java EE 中完成这项工作。

应用服务器：Jboss 7.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:46:16.860

如果你真的想实现一个页面浏览计数器，你最好让它持久化，否则每次重新部署或重新启动应用程序时计数将从 0 重新开始。如果应用程序集群在多台服务器上，那么这些数字就不对了。

如果这只是一个练习，您应该使用[bean-managed concurrency](http://docs.oracle.com/javaee/6/tutorial/doc/gipvi.html#giptu)`ConcurrentHashMap`，并使用`AtomicInteger`. 请参阅这两个类的文档以了解它们的工作原理，尤其是文档`putIfAbsent()`（除非您提前知道所有页面并且可以使用设置为 0 的计数器预填充地图，在这种情况下您甚至不需要使用`putIfAbsent()`）。

# wordpress - Wordpress 设置来自前端的特色图片

> ID：13989321
> 
> 赞同：0
> 
> 时间：2012-12-21T11:28:56.003
> 
> 标签：wordpress, image-processing, featured

我将 wordpress 更新到 3.5 版，我的一个功能不再起作用。

我有一个带有来自前端的帖子表单的页面，用户可以在其中将帖子提交到一个类别。

升级到 3.5 后，我也可以在媒体库中创建帖子并上传图片，但是我用来将上传的图片（如精选图片）附加到帖子的功能由于某种原因无法正常工作，我找不到。

在成功创建帖子并将图像上传到媒体库后，我使用此代码设置特色图像。我可以捕捉`$post_id`和`$attach_id set_post_thumbnail( $post_id, $attach_id );`

我也对代码进行了更改，但没有运气

`add_post_meta( $post_id, '_thumbnail_id', $attach_id,true );`

我手动将`post_meta`图像添加到数据库中的帖子中，但我必须设置第`_edit_lock`一个。

当我添加此代码时，它`_edit_lock`被插入`post_meta`但不是`_thumbnail_id`

```
add_post_meta( $post_id, '_thumbnail_id', $attach_id,true );
add_post_meta( $post_id, '_edit_lock', time().':1',true); 
```

在 WordPress 3.5 中，`_thumbnail_id post_meta`从前端执行是否有任何限制？

# nhibernate - 在 Nhibernate 中多次映射列

> ID：13989322
> 
> 赞同：3
> 
> 时间：2012-12-21T11:29:03.833
> 
> 标签：nhibernate, nhibernate-mapping

例如，我有一个实体。具有以下属性：

```
public class Entity
{
   public int CustomerId { get; set; }
   public Customer { get; set; } 
} 
```

如何将 CustomerId 映射两次。一次用于 int 属性，一次用于多对一关系？

```
<many-to-one name="Customer" column="[CustomerId]" class="Customer"/>
<property name="CustomerId" column="[CustomerId]" type="Int64" /> 
```

就这个，行不通。我已经尝试过，使它们只读但没有成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:34:50.097

其中之一应映射为只读*(inser/udpate false)*，并引用为`formula`

```
<many-to-one name="Customer" column="[CustomerId]" class="Customer"/>
<property name="CustomerId" formula="[CustomerId]" type="Int64" insert="false" update="false" /> 
```

然后它应该可以正常工作。然后这两个属性都可以用于 Select, Where... order by

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:02:44.313

不需要映射CustomerId，可以通过Customer.CustomerId来访问。如果您使用延迟加载，则 CustomerId 将填充到代理对象中，因此它始终可用，而不会触发额外的选择。

如果您绝对必须公开它，请将其公开为可为空的只读属性：

```
 public Customer { get; set; } 
   public int? CustomerId
   {
       get { return Customer == null ? (int?)null: Customer.CustomerId }
   } 
```

# php - Joomla 组件 vs 插件 vs 模块

> ID：13989323
> 
> 赞同：1
> 
> 时间：2012-12-21T11:29:04.993
> 
> 标签：php, joomla, joomla3.0

我对 Joomla 很陌生，我即将在 joomla 中建立一个网站。我没有时间通读整个 API 和文档。

我需要开发一些可以在客户端显示食物食谱和添加新食谱的能力。对于管理员方面，我需要管理所有存储的食谱。

我的问题是什么是最好的解决方案模块、插件或组件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T11:31:07.743

一个组件

Joomla 组件提供广泛（如购物车）并且通常非常复杂。组件的一个示例是横幅管理器或 CommunityBuilder

一个模块

比组件功能要小得多。您可以使用它们在站点上的模块位置（例如左、右）显示少量信息（例如谁在线）。一个模块的例子是newsflash模块、主菜单模块、adsense代码模块等

一个插件

对 Joomla 的功能进行小的更改/添加。这方面的一个例子是灯箱插件，当它安装/启用时，它将扫描您的网站以查找图像周围的任何 [灯箱] 标签，并将这些标签转换为实际的灯箱。

[***阅读有关 Joomla 文档的更多信息***](http://docs.joomla.org/Extension_types_%28general_definitions%29)

![在此处输入图像描述](../Images/21bacdbb16e98305492d5f25007bdb0e.png)

# google-chrome-extension - 找到结果时如何使选项卡和窗口处于活动状态？

> ID：13989327
> 
> 赞同：2
> 
> 时间：2012-12-21T11:29:34.293
> 
> 标签：google-chrome-extension, tabs

我想在找到匹配项后立即将运行扩展程序的选项卡带到我的窗口前面，即使我目前正在第二个窗口中工作。

到目前为止，我的**content_script.js**中有这段代码，但它似乎不起作用。注释行是我最后一次失败的尝试。

警报给了我**-1**，这似乎是很奇怪的标签 ID。

```
if(output == 'found') {
    sendResponse({findresult: "yes"});

    chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
        //chrome.tabs.update(sender.tab.id, {selected: true});
        //chrome.tabs.update(sender.tab.id, {active: true});
        alert(sender.tab.id);
    });
} 
```

我也在**background.html**中尝试了一些东西，并且已经在这里发布了各种东西，但都没有运气。

我需要做什么才能完成这项工作？

**编辑**

**manifest.json**脚本包含

```
"background": {
    "scripts": ["background.js"]
},
"content_scripts": [ {
    "all_frames": false,
    "js": [ "jquery.js", "content_script.js" ],
    "matches": [ "http://*/*", "https://*/*" ],
    "run_at": "document_idle"
} 
```

**background.js**（警报甚至不会出现）

```
alert("here");

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    your_tab_Id = sender.tab.id);
});

chrome.tabs.update(your_tab_Id,{"active":true,"highlighted":true},function (tab){
    console.log("Completed updating tab .." + JSON.stringify(tab));
}); 
```

**content_script.js** jQuery 更改背景（sendResponse 有效，但如果我激活背景更改行，脚本将停止工作）

```
if(found === true) {
            //$('td:contains('+foundItem+')').css("background", "greenyellow");
            sendResponse({findresult: "yes"});
        } 
```

[jsFiddle 我测试了 jQuery 代码](http://jsfiddle.net/bZKpq/2/)

EDIT 2 [扩展下载](http://www.mediafire.com/?vmlnwzx8aqqge8g)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:50:17.283

您不能使用内容脚本中的[chrome.tabs API()](https://developer.chrome.com/extensions/tabs.html)

### 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [选项卡 API](https://developer.chrome.com/extensions/tabs.html)

要获取标签 ID，请将您的代码放入`background.js`

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
        your_tab_Id = sender.tab.id);
}); 
```

并将其添加到`background.js`页面

```
chrome.tabs.update(your_tab_Id,{"active":true,"highlighted":true},function (tab){
  console.log("Completed updating tab .." + JSON.stringify(tab));
}); 
```

仅使用内容脚本发送消息

```
chrome.extension.sendMessage("Awesome message"); 
```

* * *

**编辑1：**

由于语法错误，您的代码不起作用

需要考虑的几点：

*   *使用[onMessage](https://developer.chrome.com/extensions/extension.html#event-onMessage)代替 onRequest（不推荐使用 onRequest 以支持 onMessage）*
*   *所有使用的 API 都是[异步](https://developer.chrome.com/extensions/overview.html#sync)的，因此请确保它们被同步调用。*
*   *[`sendMessage`](https://developer.chrome.com/extensions/extension.html#method-sendMessage)也可以在内容脚本中使用（不推荐使用 sendRequest 以支持 sendMessage）*

应用上述更改后，您的代码将变为此处所示。

```
alert("here");

chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    your_tab_Id = sender.tab.id;
    chrome.tabs.update(your_tab_Id,{"active":true,"highlighted":true},function (tab){
        console.log("Completed updating tab .." + JSON.stringify(tab));
    });
}); 
```

如果您需要更多信息，请与我们联系。

# facebook - 如何通过我的 ios 应用查找用户发布的照片

> ID：13989333
> 
> 赞同：0
> 
> 时间：2012-12-21T11:30:04.040
> 
> 标签：facebook, ipad, publish

所以，我有一个 ipad 应用程序（圣诞窗口），它允许用户在他们的 facebook 发布流中发布一些明信片。能找到这些照片吗？）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:51:41.163

请检查此链接。>>>http://www.huffingtonpost.com/2012/09/24/facebook-bug-private-messages-timeline_n_1909813.html

我从来没有用过这个，所以我不确定。一旦我们得到解决方案，请告诉我。

谢谢

# wcf - WCF：协议异常 - 400 错误请求

> ID：13989339
> 
> 赞同：0
> 
> 时间：2012-12-21T11:30:32.637
> 
> 标签：wcf, web-config, image-uploading, mtom

我正在开发一个可以上传和下载图片的网站。下载工作正常，没有问题，但同时上传的图片大于 16 KB 时出现问题，告诉我：“协议异常：错误 400 错误请求”。

这告诉我我必须在 XmlDictionaryReaderQuotas 中增加 MaxArrayLength 的大小，但我已经这样做了。

我将向您展示我的 webConfig：

客户：

```
<bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IServiceImage" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="4194304" maxBufferPoolSize="4194304" maxReceivedMessageSize="4194304"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="4194304" maxStringContentLength="4194304" maxArrayLength="4194304"
            maxBytesPerRead="4194304" maxNameTableCharCount="4194304" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings> 
```

周转基金：

```
 <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IServiceImage" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferPoolSize="4194304" maxReceivedMessageSize="4194304"
        messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
        allowCookies="false">
          <readerQuotas maxDepth="4194304" maxStringContentLength="4194304" maxArrayLength="4194304"
          maxBytesPerRead="4194304" maxNameTableCharCount="4194304" />
          <security mode="Message">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings> 
```

任何想法？

编辑：我可以上传文件，直到它们小于 16KB，我找不到我必须处理该值以增加的地方。

* * *

听起来对于大文件，wcf 有一些问题，所以我必须将“encodeMessage”更改为 MTOM 并从 BasicHttpBindings 移动到 wsHttpBindings。顺便说一下，我的代码上出现了新问题。该死的。

客户端 WebConfig：

```
<bindings>

  <wsHttpBinding>
    <binding name="wsHttpBinding_IService1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="4194304" maxReceivedMessageSize="4194304"
      messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true"
      allowCookies="false">
      <readerQuotas maxDepth="4194304" maxStringContentLength="4194304"
        maxArrayLength="4194304" maxBytesPerRead="4194304" maxNameTableCharCount="4194304" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings> 
```

服务网络配置：

```
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding_IService1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"

             maxBufferPoolSize="4194304" maxReceivedMessageSize="4194304"
      messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true">
      <!--messageEncoding="Text" textEncoding="utf-8" maxBufferSize="4194304" transferMode="Buffered" -->
      <readerQuotas maxDepth="4194304" maxStringContentLength="4194304"
        maxArrayLength="4194304" maxBytesPerRead="4194304" maxNameTableCharCount="4194304" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<services>
  <service  name="WcfService.FileService" >
    <endpoint address="" binding="wsHttpBinding" contract="WcfService.IService1" />
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:48:51.603

听起来像是您想要使用流服务而不是缓冲的场景。

[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

巧合的是，我正在努力实现自己。

# android - 使用 ListAdapter 在 listview 中使用 simple_list_item_2 显示 ContactName 和 Number，如何仅提取 onItemClick() 中的 Number？

> ID：13989340
> 
> 赞同：3
> 
> 时间：2012-12-21T11:30:31.013
> 
> 标签：android, listview, onitemclicklistener

使用以下类，我想从具有联系人姓名和号码的列表中选择联系人。

```
public class MakeCallView extends Activity implements OnItemClickListener {

    Button callButtn;
    EditText number2call;
    private ListView lv1 = null;
    Cursor cursor = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.makeacall);

        cursor = getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
                null, null);
        callButtn = (Button) findViewById(R.id.CallBtn);
        number2call = (EditText) findViewById(R.id.number2Call);
        lv1 = (ListView) findViewById(R.id.listContact);

        ListAdapter adapter1 = new SimpleCursorAdapter(this,

            android.R.layout.simple_list_item_2, cursor, new String[] {
                        ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                        ContactsContract.CommonDataKinds.Phone.NUMBER },
                new int[] { android.R.id.text1, android.R.id.text2 });

        lv1.setAdapter(adapter1);
        lv1.setOnItemClickListener(this);

        callButtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                // TODO Auto-generated method stub

            }

        });
    }

    @Override
    public void onItemClick(AdapterView<?> adapter, View arg1, int pos,
            long arg3) {

        try {

            Cursor c = (Cursor) adapter.getItemAtPosition(pos);

            View v = adapter.getFocusedChild();
            // TwoLineListItem row = (TwoLineListItem)
            // adapter.getAdapter().getView(pos, arg1,
            // (ViewGroup)adapter.getParent());
            // String a = (String)adapter.getItemAtPosition(pos);
            // number2call.setText( c.g);
            Log.v("GPS", "arg3    : " + c.getColumnCount());
            Log.v("GPS", "arg3    : " + c.getColumnNames());
            Log.v("GPS", "arg3    : " + c.toString());
            Log.v("GPS", "arg3    : " + c.getShort(1));

            Log.v("GPS", "arg3    : " + c.getColumnIndex("text2"));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            Log.v("GPS", e.getMessage(), e);
        }

        // number2call.setText(((TextView)arg1).getText().toString());

        // Handle list2 click even

    }

} 
```

从上面的代码中，在**onItemClick()**中，应该检索到我无法获取的所选联系号码。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:36:42.140

在你的 OnItemClickListener 中试试这个

```
TextView txtNumber = (TextView) arg1.findViewById(android.R.id.text2)
String str = txtNumber.getText() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:17:17.047

```
       这将为您返回所选联系人的数量

```

```
 @Override
        public void onItemClick(AdapterView<?> adapter, View arg1, int pos,
                long arg3) {

            try {

                String x = ((TwoLineListItem) arg1).getText2().getText()
                            .toString();
                    number2call.setText(x);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                Log.v("GPS", e.getMessage(), e);
            }

    } 
```

# python - 在访问 MySQL 时使用不同的用户进行选择/插入

> ID：13989341
> 
> 赞同：3
> 
> 时间：2012-12-21T11:30:34.977
> 
> 标签：python, mysql, mysql-python

我正在为将用 Python 编写的 Web 应用程序构建 MySQL 数据库。我想隔离用户功能以提供更好的安全性并可能提高性能。我想这样做： 2组表：

*   1 应用用户管理表
*   1 一组存储信息的表

我想创建 4 个 mysql 用户来访问和操作来自应用程序的数据：

*   1 个用户对用户表具有选择权限
*   1 个用户对用户表具有插入/更新权限
*   1 个用户对存储信息的表集具有选择权限
*   1 个用户对存储信息的表集具有插入/更新权限

因此，读取/写入每个表的每个 Python 模块都将使用所需的用户。

我的理由是，如果用户或插入字段因任何原因而受到损害，则可以操纵/获取的损害和信息将受到限制。它不应该使应用程序复杂化，因为它只会使用与数据库的正确连接，并且每个模块只执行一次。

会不会太过分了？会影响性能吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:02:08.047

> 我的理由是，如果用户或插入字段因任何原因而受到损害，则可以操纵/获取的损害和信息将受到限制。它不应该使应用程序复杂化，因为它只会使用与数据库的正确连接，并且每个模块只执行一次。

是的，有可能。您只需为每个用户创建一个连接/会话。我建议您始终使用 SQLAlchemy 来处理您的 ORM，它就像声明与数据库中的用户一样多的实例一样简单。

```
engine_select_only = create_engine(u'mysql://user1:pass@127.0.0.1/mydb'
engine_insert_update = create_engine(u'mysql://user1:pass@127.0.0.1/mydb'
engine_insert_update = create_engine(u'mysql://user1:pass@127.0.0.1/mydb'
... 
```

然后您使用最适合您需求的策略将您的引擎映射到您的表格。我从来没有测试过（因为我从来没有实现过这样的东西），但我认为 SQLAlchemy 没有理由不能将相同的对象映射到不同的会话。

> 会不会太过分了？

我个人的看法是，是的，这是矫枉过正而且完全愚蠢的。如果你正确地编写了你的​​应用程序，就没有必要做这样的事情。您应该为您的 mysql 连接提供整个应用程序实例所需的确切权限，并且您应该非常小心地检查用户输入。因此，您将保护您的应用程序、运行它的系统和您的 DBMS。

> 会影响性能吗？

可以，与数据库的每个连接都有成本，并且您的 dbms 具有有限的可能连接池。数学很简单，如果为每个实例打开 4 个连接，则将可能的连接数除以那么多。这不仅会影响您的应用程序，还会影响使用您的 DBMS 的每个应用程序。

> 还有其他想法吗？

是的，只是不要尝试这样做，只需为您的应用程序提供良好且安全的设计 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:23:00.400

使用[最小特权原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)总是一个好主意。

是不是矫枉过正？不，它是任何好的设计的一部分。

它会影响性能吗？不。与数据库的连接只是一个连接，与连接到数据库的帐户关联的权限无关紧要。

# django - ModelAdmin，外键关系链

> ID：13989345
> 
> 赞同：3
> 
> 时间：2012-12-21T11:30:49.220
> 
> 标签：django, modeladmin

**我想知道是否可以在 ModelAdmin 中以干净的方式打印外键链：**

图像我们有这样的结构：

```
class Ma(models.Model):
      fa = models.EmailField()

class Mb(models.Model):
      fb = models.ForeignKey('Ma')

class Mc(models.Model):
      name = models.CharField(max_length=50)
      fc = models.ForeignKey('Mb') 
```

现在使用 ModelAdmin：

**编辑：（这是无效的）**

```
class McAdmin(admin.ModelAdmin):
     list_display = ('name', 'fc__fb__fa',) 
```

或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:35:54.220

看到[这个](https://stackoverflow.com/a/5373339/203535)答案：

您可以在您的 McAdmin 类上创建一个返回这些嵌套外键值的方法：

```
class McAdmin(admin.modelAdmin):
    list_display = ('name', 'get_email_foreign_foreign_key')

    def get_email_foreign_foreign_key(self, obj):
        return '%s' % obj.fc.fb.fa 
```

# api - 允许按来源和日期搜索的新闻 API

> ID：13989347
> 
> 赞同：5
> 
> 时间：2012-12-21T11:30:53.507
> 
> 标签：api, keyword, feed, google-news

我正在寻找一个新闻 API，它允许我将特定关键字和来源映射到特定时间范围内发布的文章数量。

例如，用户将输入

```
{keyword1, source1, beginDate, endDate} 
```

输出将是

```
There are xx articles.
Display the titles and url of articles 
```

时间范围甚至可以是一年，例如从 2011 年 1 月 1 日到 2012 年 1 月 1 日。谷歌新闻似乎很有希望，但 API 已被弃用，您只能在当年的两个月内搜索。我查看了纽约时报 API，这正是我正在寻找的，但不仅仅是 NYT 的多个来源。Feedzilla 不提供按来源或时间框架搜索的功能，而且它只允许检索 100 篇文章。

我一直在网上四处寻找，找不到任何有用的东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:51:09.093

您是否尝试过[News 是免费](http://www.newsisfree.com/webservice.php)的及其[API](http://www.newsisfree.com/apiservice.php)？

我没有尝试过这个，但它似乎有一个[`directSearch`操作](http://www.newsisfree.com/apiservice.php?f=directSearch#doc)，它似乎允许过滤日期（和标签）......

> ```
> > directSearch(login, password, search, params)
> 
> This method searches the news, depending on given parameters. The analog of newsisfree advanced search.
> application_key (string) - application key;
> login (string) - user login;
> password (string) - user password;
> search (string) - search string;
> params (string) - hash array of additional search parameters (very important to use 'params' array values order as shown below);
> as_language - language code (e.g. en,fr,it)
> numitems - number of items to search (max 100)
> source_id - source id
> as_sourcename - source name
> as_category - category id
> as_author - author name
> as_topics - topics
> as_date_from - from date (YYYY/MM/DD)
> as_date_to - to date (YYYY/MM/DD)
> as_pop_from - from popularity (0
> as_exact - exact match
> as_synonym - use synonyms
> as_relevance - by relevance
> as_intitle - only in titles 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T10:50:14.747

您可以查看 www.feedzilla.com，它为您提供带有类别过滤器的新闻提要。

# java - 如何在java中创建转发服务器

> ID：13989349
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:31:03.577
> 
> 标签：java, sockets

我想创建一个程序来将数据从 1 个 TCP 套接字转发到另一个，反之亦然。两个不同的程序连接到我的服务器并希望通过我的服务器进行通信。

实际上我想通过我的服务器连接两个游戏。所以我想创建一个服务器，它看起来对游戏玩家来说是透明的，它只会将来自一侧的任何东西转发到另一侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:03:34.443

你没有说你的问题是什么，但我会猜测一下。您将内容读入缓冲区，如果您获得任何内容，则将整个缓冲区写入输出流。您应该只写入实际读取的字节数。

```
byte[] b = new byte[BUFSIZE];
int chunkSize;
while(true) {
  try {
    while( (chunkSize = is.read(b)) != -1) {
      os.write(b, 0, chunkSize);
      os.flush();
    }
  } catch (IOException ex) {
    Logger.getLogger(socketProducer.class.getName()).log(Level.SEVERE, null, ex);
  }
} 
```

# wpf - 如何为 VSIX MEF 扩展中的控件重用 Visual Studio WPF 样式？

> ID：13989353
> 
> 赞同：7
> 
> 时间：2012-12-21T11:31:27.090
> 
> 标签：wpf, visual-studio, visual-studio-2012, mef, vsix

如何为 VSIX MEF 扩展中的控件重用 Visual Studio WPF 样式？

[我在这里](https://stackoverflow.com/questions/4842736/)找到了一些关于在其他应用程序中一般使用主题的信息，但是在 Visual Studio 的扩展中可能还有其他方法可以做到这一点？

我正在编写支持 VS2010 和 VS2012 的扩展，如果可以使用适当的 VS 主题，那就太好了。

[其实我的问题](https://stackoverflow.com/questions/13146629/vsix-extension-wpf-styles)有点重复，仍然没有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-19T16:21:02.307

我找到了答案，但是您必须创建一个 VSPackage 才能使用这种功能，尽管我不记得 MEF 是否曾经让您能够显示 GUI 元素而不是编辑器扩展功能。

用户界面： http: [//msdn.microsoft.com/en-us/library/bb165108 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb165108(v=vs.110).aspx)

内部设置查询： http: [//msdn.microsoft.com/en-us/library/bb164716 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb164716(v=vs.110).aspx)

第二个链接可以帮助您在 GUI 扩展上使用 WPF 设置。

您还可以查询字体和颜色设置，但我认为您的问题是关于 GUI。

在您提供的链接中包含解决方案，我不认为是否有更多的设置访问权限。

# ios - 将参数传递给带有 .xml 扩展名的 Web 服务

> ID：13989358
> 
> 赞同：1
> 
> 时间：2012-12-21T11:31:48.893
> 
> 标签：ios, xml-parsing

我正在创建一个应用程序，在该应用程序中我使用 cakephp 制作了 Web 服务。我有一个名为[http://demo.narolainfotech.com/remindz/users/login.xml](http://demo.narolainfotech.com/remindz/users/login.xml)的网络服务，在控制器文件夹中有一个名为 UserController.php 的网络服务，其中编写了登录和注册功能。当我将静态值放入此 Web 服务并解析此文件时，我正在正确获取登录用户的数据，但是当我从 xcode 传递参数时，Post 数据未得到解析。php 代码 print_r($_POST); 它显示空白数组。谁能帮我解决这个问题。提前致谢。

我的代码是：

```
NSString *urlString = [NSString stringWithFormat:@"%s",URL_Login];
request = [[NSMutableURLRequest alloc] init] ;
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *contentType = [NSString stringWithFormat:@"application/xml"];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *postBody = [NSMutableData data];
[postBody appendData:[[NSString stringWithFormat:@"<login xmlns=\"\">"] dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"<user_email>%@</user_email>",@"raaaavai123_dholakiya@yahoo.co.in"] dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"<passWord>%@</passWord>",@"dholakiya"] dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"</login>"] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:postBody];

con = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if(con)
{
    webData = [[NSMutableData data] retain];
}
else
{
    NSLog(@"the Connection is NULL");
} 
```

}

# html - IE 10 强制严格模式

> ID：13989359
> 
> 赞同：2
> 
> 时间：2012-12-21T11:31:54.510
> 
> 标签：html, html-table, internet-explorer-10, compatibility-mode

考虑以下 HTML 代码：

```
<style> td, tr { border:1px solid gray; } </style>
<table class="tableinfo" cellspacing="1" cellpadding="3">
  <tr>
    <td>asd</td>
    <td>bsd</td>
  </tr>
  <tr style="display: block;" >
    <td class="">ttt</td>
    <td class="">asd</td>
  </tr>
</table> 
```

使用文档类型：

```
<!doctype html> 
```

在 IE9 中一切正常，但在 IE10 中表已损坏：

![在此处输入图像描述](../Images/03532067551558e60443988c692266f0.png)

为什么会这样？

如何解决这个问题？

一种解决方案是添加以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

但这破坏了整个项目的样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:03:06.857

IE10 不像 IE9 那样工作，IE9 不像 IE8/7/6 等那样工作，而且它们都不像其他更现代的浏览器那样工作。您在 IE10 中的示例也是它在现代浏览器中的工作方式，因此 IE9 行为不端。除非您使用了错误的文档类型，否则更改文档类型永远不是解决方案。您的解决方案使用了错误的解决方案并让您进入怪癖模式。

# android - 不使用第三方应用程序从 sdcard 读取 .docx 文件

> ID：13989361
> 
> 赞同：2
> 
> 时间：2012-12-21T11:32:00.083
> 
> 标签：android

我是安卓新手。在我的应用程序中，我需要阅读 .doc 和 .docx 以及其他办公套装文件。这取决于他们的存在。我想在我的应用程序中不使用 Intent 来阅读它。我尝试了许多代码，但它们无法正常工作。我的代码如下所示，使用各种模块。我应该做哪些更改，或者是否有任何其他方法可以读取这些文件？

我的代码是：

```
/**
     *  Apache OPI Code.
     */
    if(Environment.getExternalStorageState().equalsIgnoreCase("y")){
        TextView tv = (TextView) findViewById(R.id.textview_data_rla);
        WordExtractor extractor = null;
        try {
           File file = new File(getExternalFilesDir(null),"n.doc");
           FileInputStream fis=new FileInputStream(file.getAbsolutePath());
           Log.d("File", fis.toString());
           HWPFDocument document=new HWPFDocument(fis);
           extractor = new WordExtractor(document);
           String[] fileData = extractor.getParagraphText();
           for(int i=0;i<fileData.length;i++){
             if(fileData[i] != null){
               tv.setText(fileData[i]);
               Log.d("file",fileData[i]);
             }
           }
        }
        catch(Exception exep){

        }
    }

    /**
     *  Using HWPFDocument.
     */

    try {
        TextView tv = (TextView) findViewById(R.id.textview_data_rla);

        File sdcard = Environment.getExternalStorageDirectory();
        File file = new File(sdcard,"n.doc");

        //InputStream fis = new FileInputStream(file);
        POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream(file));  
        HWPFDocument doc = new HWPFDocument(fs);  

        Range range = doc.getRange();  
        CharacterRun run = null;
        for (int i=0; i<range.numCharacterRuns(); i++) {  
            run = range.getCharacterRun(i);  
            Log.d("character  run",String.valueOf(i+1));
            Log.d("Text",run.text().toString());
        }
        tv.setText(run.text().toString());
        OutputStream out = new FileOutputStream(new File("/mnt/sdcard/new.doc"));
        doc.write(out);
        out.flush();
        out.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }  

    /**
     *  Apache POI using NPOIFSFileSystem.
     */
    File sdcard = Environment.getExternalStorageDirectory();
    File file = new File(sdcard,"n.doc");
    WordExtractor extractor1 = null;
    try{
        NPOIFSFileSystem fs = new NPOIFSFileSystem(file);
        extractor1 = new WordExtractor(fs.getRoot(), null);
    } catch (Exception e){
        e.printStackTrace();
    }

    for(String rawText : extractor1.getParagraphText()) {
    String text = WordExtractor.stripFields(rawText);
    Log.d("text",text);
    }

    /**
     *  Apache Tika code.
     */

    TikaConfig tika = TikaConfig.getDefaultConfig();
    TikaInputStream stream = TikaInputStream.get(file);
    ContentHandler handler = new BodyContentHandler();
    Metadata metadata = new Metadata();
    tika.getParser().parse(file, handler, metadata, new ParseContext());
    String text = handler.toString();

    /**
     *  Code using jOpenDocument.jar
     */

    final OpenDocument doc = new OpenDocument();
    doc.loadFrom("invoice.ods");

    // Show time !
    final JFrame f = new JFrame("Invoice Viewer");
    ODSViewerPanel viewer = new ODSViewerPanel(doc);
    f.setContentPane(viewer);
    f.pack();
    f.setVisible(true);
} 
```

这是我必须使用的正确方法。

请尽可能尽快回复。提前致谢。

# android - 库到条码扫描器

> ID：13989362
> 
> 赞同：1
> 
> 时间：2012-12-21T11:32:03.420
> 
> 标签：android

我想在我想使用条形码扫描仪的地方创建应用程序。我想创建自己的布局并在那里实现这个扫描仪。我找到了scandit，但我想问你是否知道更好的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:33:17.433

[Jeff Lamarche 针对 iPhone 和 iPad 的 Cocoa Barcodes 项目](https://github.com/netshade/Cocoa-Touch-Barcodes)

[Zxing的条码图像处理库](http://code.google.com/p/zxing/)

[Android条码库](http://www.keepedge.com/products/android_barcode/)

[图书馆的 ISBN 和 QR 条码扫描移动应用程序](http://journal.code4lib.org/articles/5014)

[http://zbar.sourceforge.net/](http://zbar.sourceforge.net/)

# java - Java 冲突不起作用

> ID：13989366
> 
> 赞同：0
> 
> 时间：2012-12-21T11:32:17.163
> 
> 标签：java, collision

过去我做了一些线程来寻求碰撞帮助并取得了一些进展，我正在制作一个 2D Java 游戏，屏幕上的玩家随着键盘输入移动，问题是，在我的背景上（地图）有很多障碍，目前我的玩家只是直接穿过它们，到目前为止，在这个论坛的用户的帮助下，我在我的代码中得到了这段代码来检测碰撞：

```
 public void changeBuckyPos(float deltaX, float deltaY) {
  float newX = buckyPositionX + deltaX;
  float newY = buckyPositionY + deltaY;

  // check for collisions
  Rectangle rectOne = new Rectangle((int)newX, (int)newY, 40, 40);
  Rectangle rectTwo = new Rectangle(-100, -143, 70,70);

  if (!rectOne.intersects(rectTwo)) {
    buckyPositionX = newX;        
    buckyPositionY = newY;        
  }
} 
```

现在我把这段代码放到我的游戏中没有错误，但是出现了一个更大的问题，虽然这段代码没有错误，但它什么也没做，我的意思是当我进入游戏时没有碰撞，当两个矩形相交时什么都没有发生，任何人都可以帮我解决这个问题，我已经坚持了很长时间。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:51:40.077

*   最好为您的游戏实体维护一个唯一的数据类型
*   Update [of class game] 应在单独的线程中定期调用
*   也定期在另一个线程中绘制

您的游戏逻辑应该类似于（几乎完整的 Java Psydocode）：

```
public class Block{
    int speedX;
    int speedY;
    Rectangle rect;
    public void update(){
         rect.x+=speedX;
         rect.y+=speedY; 
    }
    public void draw(/*Graphics g..or somthing*/){
         //draw this single object
    }
    ..getters and setters..
}

public class Game{
    List<Block> obstacles; 
    Block myBlock();   
    ......
    void update(){
        ...
       myBlock.update();
       for(Block ob: obstacles){               
           if(myBlock.getRect().intersects(ob.getRect())){
                  processCollision(ob);
           }
           ob.update();
       }
       ...
    }
    public void draw(/*Graphics g..or somthing*/){
           //background draw logic
           myBlock.draw(g);
           for(Block ob: obstacles)
               ob.draw(g);
    }
    void processCollision(Rect ob){
          ..
          do whatever you want with ob
          ..
    }
} 
```

# php - 代码点火器查看用户数据的内容

> ID：13989375
> 
> 赞同：-3
> 
> 时间：2012-12-21T11:32:39.680
> 
> 标签：php, codeigniter

我想知道用户数据的内容是什么。我怎样才能做到这一点。

```
log_message($this->CI->session->userdata) //array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:17:43.453

怎么样使用[`var_export`](http://php.net/var_export)：

```
$string = var_export($this->CI->session->userdata, TRUE)
log_message($string) // array(...) 
```

它会将数组转换为`log_message`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:52:19.933

确保在检查会话数据之前加载会话库..

```
$this->load->library('session');
print_r($this->session->all_userdata()); 
```

编辑 ：

> 您不应该将数组发送到日志文件中... log_message() 仅用于写入字符串.. 那应该是 info/error/debug.. 所以您不会在日志文件中获取数组..

检查[这个](http://ellislab.com/codeigniter/user-guide/general/errors.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:38:41.950

您可以这样做以显示会话中的所有用户数据

`print_r($this->session->all_userdata());`

# javascript - 不使用命令提示符（winform 或 javascript）执行 node.js？

> ID：13989377
> 
> 赞同：3
> 
> 时间：2012-12-21T11:32:49.433
> 
> 标签：javascript, node.js

我对 Node.js 完全陌生，我有一个节点应用程序正在运行，但现在我需要执行 node.js 程序而不使用命令提示符。它可能通过 winform 应用程序（使用 vb.net）或使用 javascript。

有人可以帮我解决这个问题吗？

干杯吉夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:35:28.203

我在这里写了关于如何为 NodeJS 应用程序创建独立 EXE 的博客：
[http ://www.alexjamesbrown.com/blog/development/create-a-standalone-exe-to-run-a-node-js-application](http://www.alexjamesbrown.com/blog/development/create-a-standalone-exe-to-run-a-node-js-application)

您并没有真正通过单独的应用程序运行该应用程序。
Node 是一个运行 Javascript 代码的可执行文件——它只是将所需的应用程序与您的代码一起打包，给人以独立运行的印象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T02:26:31.023

另外两个要检查的跨平台选项是[node-webkit](https://github.com/rogerwang/node-webkit)和[AppJS](http://appjs.org/)

# c# - TextBox.IsFocused 属性？

> ID：13989378
> 
> 赞同：1
> 
> 时间：2012-12-21T11:32:57.933
> 
> 标签：c#, wpf, textbox

`textBox.text`只有当它不在焦点上时，我才想更改它。例子：

```
public void updateValue()
    {
        if (!this.valueTB.IsFocused)
            this.valueTB.Text = updatedValue.ToString();
    } 
```

但问题是，`this.valueTB.IsFocused`属性只有在实际聚焦时才会发生变化，而在聚焦时不会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:38:51.413

`IsFocused`当 TextBox 获得或失去焦点时，该属性肯定会更改其值。

但 TextBox 也提供[GotFocus](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotfocus%28v=vs.110%29.aspx)和[LostFocus](http://msdn.microsoft.com/en-us/library/system.windows.uielement.lostfocus.aspx)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:38:59.927

仅使用[`IsFocused`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isfocused.aspx)属性：

```
public void updateValue()
{
     if((!tb.IsFocused) || (tb.IsFocused == false))
     {
          tb.Text = "The text was updated when I wasn't focused. Is't OK?";
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:03:14.183

也许你可以取一个布尔值来告诉你 TB 是否集中：

```
 bool TBIsFocused = false;
    private void valueTB_Enter(object sender, EventArgs e)
    {
        TBIsFocused = true;
    }

    private void valueTB_Leave(object sender, EventArgs e)
    {
        TBIsFocused = false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:54:23.263

问题是`IsFocused`事件仅在获得焦点时才被触发一次，然后它就不会触发。我认为您希望它连续触发此事件直到`Textbox`获得焦点。为此，您必须在特定间隔内继续检查它是否具有焦点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:43:22.633

您可以使用文本框焦点事件[Lost](http://msdn.microsoft.com/en-us/library/system.windows.uielement.lostfocus.aspx)

和[GotFocus](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotfocus%28v=vs.110%29.aspx)

# matlab - 在 http://stackoverflow.com/a/13135833/560821 中找到的解密函数句柄解决方案

> ID：13989379
> 
> 赞同：2
> 
> 时间：2012-12-21T11:32:59.847
> 
> 标签：matlab, anonymous-function, function-handle

所以......我可以理解matlab函数句柄及其用途。但有时，当它变得太神秘时，我需要帮助来进一步阐述它。以默认 MATLAB[文档](http://www.mathworks.com/help/matlab/ref/fminbnd.html)中的这个示例为例，例如：

```
f = @(x)x.^3-2*x-5; 
```

我也可以将其重写为：

```
function f(arg)
  arg.^3 - 2*arg - 5;
end 
```

如前所述，任何人都可以帮助破译下面的代码[吗](https://stackoverflow.com/a/13135833/560821)？我在默认的 matlab 函数中不需要帮助。只是对理解这里的用户定义的匿名函数有一点帮助..

```
applyToGivenRow = @(func, matrix) @(row) func(matrix(row, :))
applyToRows = @(func, matrix) arrayfun(applyToGivenRow(func, matrix), 1:size(matrix,1))'
% Example
myMx = [1 2 3; 4 5 6; 7 8 9];
myFunc = @sum;
applyToRows(myFunc, myMx) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:51:09.897

```
applyToGivenRow = @(func, matrix) @(row) func(matrix(row, :)) 
```

这是一个创建另一个函数的函数，例如以下（取自问题的示例）

```
applyToGivenRow(@myFunc,myMx) 
```

将评估函数

```
@(row) myFunc(myMx(row,:)) 
```

然后

```
applyToRows = @(func, matrix) arrayfun(applyToGivenRow(func, matrix), 1:size(matrix,1))' 
```

使用此`applyToGivenRow`功能。Arrayfun 循环遍历您提供给它的向量 ( ) 并针对向量中的每个值`1:size(matrix,1)`评估您提供给它的函数 ( )。`applyToGivenRow(func, matrix)`

原作者也可以将其缩短为

```
applyToRows = @(func, matrix) arrayfun(@(row) func(matrix(row, :), 1:size(matrix,1))' 
```

阅读有关[匿名函数](http://www.mathworks.nl/help/matlab/matlab_prog/anonymous-functions.html)和[arrayfun](http://www.mathworks.nl/help/matlab/ref/arrayfun.html)的文档，应该很容易理解这一点。

# eclipse - 如何让 Eclipse 将生成的代码标记为 equals 以防止代码质量工具问题？

> ID：13989386
> 
> 赞同：1
> 
> 时间：2012-12-21T11:33:22.577
> 
> 标签：eclipse, annotations, sonarqube, generated-code

生成的代码往往会在我们的 SONAR 代码质量工具中标记为圈复杂度之类的东西。似乎这是一个公认的问题，并且支持基于注释的抑制。

我不想手动编辑或注释此代码以防止出现这些警告。每当它为我生成代码时，如何更改 Eclipse 生成的生成代码以包含 say a`@Generated`或`@SuppressWarnings("all")`annotation？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:23:42.613

我认为 Eclipse 配置中没有一个中心位置，您可以在其中指定一些在 Eclipse 为您生成代码时应添加的标志。

实现您想要的唯一方法是修改“Java > Editor > Templates”的每个代码模板，并在它们周围加上一些标志，如“// SONAR-OFF”和“// SONAR-ON”，然后相应地配置[声纳关闭违规插件](http://docs.codehaus.org/display/SONAR/Switch+Off+Violations+Plugin)。

但：

*   修改所有这些模板是一件很痛苦的事情（即使你只会做一次）

*   这不适用于高级代码生成，例如“equals”或“hashCode”方法

# android - 无法将 Android SDK 工具从 20 更新到 21

> ID：13989388
> 
> 赞同：6
> 
> 时间：2012-12-21T11:33:42.740
> 
> 标签：android, eclipse, eclipse-plugin

我想将我`Android SDK tools`的从 20 更新到 21。但我无法在 SDK 管理器上看到版本 21。我正在使用`Linux 12.04`，`eclipse 3.X.` 请查找附件图片![在此处输入图像描述](../Images/acf6d8272351ea9b3793b339c5ad5024.png)

请建议我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T10:48:45.913

尝试重新加载包。它将解决问题。

[http://tools.android.com/knownissues](http://tools.android.com/knownissues)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:39:25.187

谢谢大家。

一些我试图做到这一点的方法。我下载`another version of eclipse(latest indigo)`并安装`ADT plug-in`在其中，我可以轻松更新`SDK`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:46:23.763

尝试先在 Eclipse 中更新 ADT 插件，然后该选项才会可见。

换句话说，转到帮助>检查 Eclipse 中的更新，一旦完成，您就可以使用 android 的更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:43:01.337

我以前在 Windows 中做过这个，所以我不知道它是否适用于 Linux。我首先使用 Android SDK Manager 进行了更新，然后在完成此操作后，我在 eclipse 更新了我的 Android，这对我有用。两个更新都以管理员身份完成。

# linux - 查找正好包含两个正斜杠的文件

> ID：13989391
> 
> 赞同：3
> 
> 时间：2012-12-21T11:33:54.880
> 
> 标签：linux, sed, awk, grep

我有一个文件，其中包含以下格式的 tar 存档的输出：

```
-rw-r--r-- me/users       362 2011-03-01 18:23 home/me/de/bin/aur/jdk/pkg/opt/java/lib/visualvm/platform/update_tracking/org-openide-awt.xml 
```

我要输出的只是文件名，并且只有包含正好 2 个斜杠的文件名，即`home/me/filename.txt`.

我不想`home/me/dir1/filename.txt`，或者`home/me/dir1/dir2/filename.txt`

我遇到了困难，因为存档中的每个文件都以`home/me/`

到目前为止，我一直在尝试使用 grep 和 awk 但没有运气。我知道一旦我得到我想要的列表，我就可以使用 cut 来获取文件名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:40:05.957

AWK 可以这样做：

```
 awk '{ orig=$NF ; if (gsub("/","",$NF) == 2) { print orig  } }' INPUTFILE 
```

您可以[在这里看到它的实际效果](http://ideone.com/GVQDVV)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T15:11:02.727

我假设每一行都是相同的固定宽度格式，所以

```
shopt -s extglob
while IFS= read -r line; do
    if [[ "${line:47}" == +([^/])/+([^/])/+([^/]) ]]; then
        # has 2 slashes
        echo "${line:47}"
    fi
done < filename 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T17:35:14.707

@glennjackman 给了我一个强大的 awk 解决方案的想法，如果文件名包含空格（并且出现在固定位置），它将起作用：

```
awk -F'^.{47}' 'gsub(/\//,"&",$2)==2{print $2}' file 
```

如果您不介意在文件路径前面添加一个额外的“/”，您可以缩写为：

```
awk 'gsub(/^.{47}|\//,"/")==3' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T11:55:01.580

这可能对您有用（GNU sed）：

```
sed -rn 's|^([^ ]* *){5}(([^/]*/){2}[^/]*)$|\2|p' file 
```

# android - 复杂的折线 + onDraw 方法 = 非常慢

> ID：13989393
> 
> 赞同：2
> 
> 时间：2012-12-21T11:34:00.313
> 
> 标签：android, performance, google-maps, draw, polyline

我有一张地图，我想在其中绘制两条路线`GeoPoints`。这就是我正在做的事情：

1- 从谷歌服务器获取 json 数据。
2-解析 json 数据并获取所有编码`polylines`。
3-解码所有编码`polylines`并用它们创建一个`List<GeoPoint>`。
4-通过列表来绘制它和`invalidate()`地图。

完成后，我可以看到在我的地图上绘制的路线完美定义，但地图的性能下降**了很多**。

所以我的问题是：有没有其他方法可以在不降低性能的情况下降低性能`GeoPoints`？

非常感谢您！

# couchdb - / 在附件名称中

> ID：13989394
> 
> 赞同：1
> 
> 时间：2012-12-21T11:34:01.127
> 
> 标签：couchdb, couchdb-futon

我刚刚开始使用 couchdb 和 iriscouch 作为数据库使用 jquery mobile 开发网页。

我想知道的是我是否可以在附件名称中获得 / 符号？我想要实现的是我有一个文档，其中包含作为附件的 HTML 文件和所有图像以及诸如此类的附件，但名称为 image/testimage.jpg 作为其名称。Windows 不允许我用 / 来命名文件，并且在附加后我无法重命名蒲团中的附件。

这样我就可以使用我已经拥有的相同 html 文件，而不必更改我在 HTML 中拥有的所有图像和其他文件的 src。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:07:57.757

是的，只要将`/`URL 正确编码为`%2F`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:54:37.320

发现问题出在蒲团沙发上。它没有正确处理名称中的 /，可能不处理编码或 / 字母被拒绝，没有检查来源，但是当使用 HTML Api 时，我可以正确地使用 / 在其名称中添加附件。

这使我能够非常轻松地将文件夹中的 HTML 和 JS 文件以及源文件移植到 CouchDB。另一个真正有用的应用程序是[CouchApp](http://couchapp.org/page/filesystem-mapping)，它将目录结构直接映射到 couchDB 并创建名称中带有 / 字母的附件。

# linux - 无法运行与 libc 链接的可执行文件

> ID：13989396
> 
> 赞同：7
> 
> 时间：2012-12-21T11:34:03.690
> 
> 标签：linux, assembly, x86-64, nasm, ld

我正在使用以下命令组装我的 hello world：

`nasm -f elf64 test.asm`

然后我链接到这个：

`ld -s test.o -lc`

我知道这行得通，因为`file a.out`向我展示了

`a.out: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), stripped`

但是，当我运行它时，`./a.out`我得到`bash: ./a.out: No such file or directory`

当没有 libc 的链接运行良好！如何让我的 libc 链接的 exe 运行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T12:51:32.373

直接的问题是默认情况下`ld`用作`/lib/ld64.so.1`解释器，您可能会错过它（它可以是符号链接`/lib64/ld-linux-x86-64.so.2`或任何适当的）：

```
$ readelf -l a.out | grep interpreter
      [Requesting program interpreter: /lib/ld64.so.1]
$ ls -l /lib/ld64.so.1
ls: cannot access /lib/ld64.so.1: No such file or directory 
```

`-dynamic-linker /lib64/ld-linux-x86-64.so.2`您可以通过将选项传递给您的`ld`调用来显式设置解释器来解决此问题：

```
$ ld -s -dynamic-linker /lib64/ld-linux-x86-64.so.2 test.o -lc
$ readelf -l a.out | grep interpreter
      [Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
$ ./a.out
$ 
```

然而，简单的经验法则是，`gcc`如果您需要 libc，则用于链接，它会为您做所有正确的事情。还要确保将`main`其用作入口点，以便正常的 libc 启动代码有机会初始化。同样，`main`最后只从你的返回，不要`exit`直接使用系统调用（`exit`如果你真的需要，你可以使用 libc 中的函数）。一般来说，不推荐使用系统调用。

# ios - iOS：本地化自白

> ID：13989401
> 
> 赞同：1
> 
> 时间：2012-12-21T11:34:14.387
> 
> 标签：ios, xcode, localization

我有一个应用程序，应该有本地化。

过了一会儿，我找到了[很好的本地化教程项目](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)。

但它不使用任何本地化工具，仅由**Xcode**使用。

我应该使用 Apple 的工具如**AppleGlot**进行本地化还是只使用**Xcode**。（通过添加**localizable.string**）？

AppleGlot 提供了很多词汇表，但如果我只有一些词可以翻译呢？

在哪种情况下，一种或另一种方式更可取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T03:28:03.003

恐怕在 iOS 中正确进行本地化的唯一方法是通过 Xcode。您需要将 NSLocalizedString 宏添加到所有字符串，使用 genstrings 将它们外部化，然后翻译 Localizable.strings 文件。这里有一个分步教程：

[http://www.ibabbleon.com/iphone_app_localization.html](http://www.ibabbleon.com/iphone_app_localization.html)

至于词汇表，这里有一个由翻译人员制作的公共词汇表：

[http://www.ibabbleon.com/glossary](http://www.ibabbleon.com/glossary)

虽然不是 Apple 制造，但它比 AppleGlot 好得多，因为它专注于 iPhone 术语，而不是 Mac OS X。

# php - 制作一个基于结果中一列的内容动态选择 INNER JOIN 的 SQL 语句

> ID：13989402
> 
> 赞同：2
> 
> 时间：2012-12-21T11:34:15.837
> 
> 标签：php, mysql, sql

我有以下 SQL 查询：

```
$sql =  "
    SELECT
        id,
        refid,
        action_id,
        action_type,
        co_user_id,
        cust_vend_id,
        cust_vend_type,
        Aes_decrypt(cust_vend_name, '".DBKEY."') AS cust_vend_name,
        Aes_decrypt(amount, '".DBKEY."')         AS amount,
        Aes_decrypt(action_date, '".DBKEY."')   AS action_date,
        Aes_decrypt(memo, '".DBKEY."')         AS memo,
        Aes_decrypt(trans_id, '".DBKEY."')     AS trans_id,
        entry_datetime,
        part_id,
        polarity
    FROM
        generated_actions
    WHERE  acc_type = 1
        AND acc_id = $ref_id
        AND action_type != 2
        AND reverse_id IS NULL
    ORDER BY generated_actions.action_id DESC "; 
```

它有效，但我需要添加一个 INNER JOIN ON`customers`或者`vendors`取决于`cust_vend_type`列的内容是'1'（客户）还是'2'（供应商），然后`customers_comp_name`如果是'1'或者'vendors_comp_name'如果是'2 '。

期待选择最佳解决方案或标记有用的建议！

**更新**

这是使用下面@ciaran 的响应更新的代码。问题是它似乎返回一个空的结果集，即使我知道有合格的记录。

```
$sql =  "
    SELECT
        ga.id,
        ga.refid,
        ga.action_id,
        ga.action_type,
        ga.co_user_id,
        ga.cust_vend_id,
        ga.cust_vend_type,
        Aes_decrypt(ga.amount, '".DBKEY."')                 AS amount,
        Aes_decrypt(ga.action_date, '".DBKEY."')            AS action_date,
        Aes_decrypt(ga.memo, '".DBKEY."')                   AS memo,
        Aes_decrypt(ga.trans_id, '".DBKEY."')               AS trans_id,
        ga.entry_datetime,
        ga.part_id,
        ga.polarity,
    SELECT CASE
        WHEN
            ga.cust_vend_type IS NULL
        THEN
            NULL
        WHEN
            ga.cust_vend_type = '1'
        THEN
            AES_DECRYPT(c.cust_comp_name, '".DBKEY."')
        ELSE
            AES_DECRYPT(v.vendor_comp_name, '".DBKEY."') END AS cust_vend_name
        FROM
            generated_actions ga
        LEFT OUTER JOIN
            customers c
        ON
            c.cust_id = ga.cust_vend_id
        LEFT OUTER JOIN
            vendors v
        ON
            v.vendor_id = ga.cust_vend_id
        WHERE
            ga.acc_type = 1
        AND
            ga.acc_id = $ref_id
        AND
            ga.action_type != 2
        AND
            ga.reverse_id IS NULL
        ORDER BY
            ga.action_id DESC "; 
```

不知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:57:48.240

您需要一个外部联接，然后使用 CASE（或 IF）来选择正确的名称...

```
SELECT CASE WHEN generated_actions.cust_vend_type Is Null Then Null 
            WHEN generated_actions.cust_vend_type = '1'
            THEN customers.customers_comp_name
            ELSE vendors.vendors_comp_name END as Cust_Vend_Name

  FROM generated_actions

       LEFT OUTER JOIN customers ON customers.id=generated_actions.cust_vend_id
       LEFT OUTER JOIN vendors ON vendors.id=generated_actions.cust_vend_id 
```

即您的查询应为...

```
$sql =  "
    SELECT
        ga.id,
        ga.refid,
        ga.action_id,
        ga.action_type,
        ga.co_user_id,
        ga.cust_vend_id,
        ga.cust_vend_type,
        Aes_decrypt(ga.amount, '".DBKEY."')                 AS amount,
        Aes_decrypt(ga.action_date, '".DBKEY."')            AS action_date,
        Aes_decrypt(ga.memo, '".DBKEY."')                   AS memo,
        Aes_decrypt(ga.trans_id, '".DBKEY."')               AS trans_id,
        ga.entry_datetime,
        ga.part_id,
        ga.polarity,
        CASE WHEN ga.cust_vend_type IS NULL THEN NULL
             WHEN ga.cust_vend_type = '1' THEN AES_DECRYPT(c.cust_comp_name, '".DBKEY."')
             ELSE AES_DECRYPT(v.vendor_comp_name, '".DBKEY."') END AS cust_vend_name
   FROM generated_actions ga
        LEFT OUTER JOIN customers c ON c.cust_id = ga.cust_vend_id
        LEFT OUTER JOIN vendors v ON ga.cust_vend_id
  WHERE ga.acc_type = 1
    AND ga.acc_id = $ref_id
    AND ga.action_type != 2
    AND ga.reverse_id IS NULL
  ORDER BY ga.action_id DESC "; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:43:20.717

您必须内部连接两个表。并使用 IF 语句：

```
SELECT
    IF(generated_actions.cust_vend_type = 1, customers.customers_comp_name, vendors.vendors_comp_name)
FROM
    generated_actions
INNER JOIN
    customers
ON
    customers.id=generated_actions.customer_id
INNER JOIN
    vendors
ON
    vendors.id=generated_actions.vendor_id 
```

# excel - Office Web 组件的替代方案

> ID：13989404
> 
> 赞同：1
> 
> 时间：2012-12-21T11:34:26.657
> 
> 标签：excel, ms-office, olap, office-web-components

我正在开发一个当前主要使用 Excel 组件的应用程序。我们将 Office 系统从 2003 年升级到 2010 年，因此，与 Office 2003 Web 组件一起使用的应用程序部分不再可用。我正在尝试查找等效的 Office 2010 Web 组件但没有成功有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:00:30.820

Google 搜索“Office 2010 Web 组件”返回的[第一个结果](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/25343a8b-4827-480a-bba3-9a19cfbb4a91)似乎是您问题的答案。
另请参见[此处](http://bit.ly/XU83KU)。（我知道，我知道，这不符合 SO 的标准，但今天是世界末日，不是吗？）

# php - 如何获取 HTML 文档的文本节点总数？

> ID：13989406
> 
> 赞同：1
> 
> 时间：2012-12-21T11:34:38.430
> 
> 标签：php

这是我的代码：

我想获取 HTML 文档中文本节点的总数。

```
 // a new dom object
$dom = new domDocument;

// load the html into the object
$dom->loadHTMLFile('translated/test.html');

// discard white space
$dom->preserveWhiteSpace = false;

$i = 0;

// get elements by tagname body
while ($bodynodes = $dom->getElementsByTagName('body')->item($i)) {
    myFunc($bodynodes);
    $i++;
}

//var_dump($holder);

function myFunc($node) {
    static $i;
    if (!isset($i)) {
        $i = 0;
    }
    if ($node->childNodes) {
        foreach ($node->childNodes as $subNode):
            myFunc($subNode);
        endforeach;
    }else {

        if ($node->nodeType == 3 && trim($node->nodeValue) != ''):
            $i++;

        endif;
    }
    if ($node->lastChild):
        echo $i;
    endif;
} 
```

但我得到的是

```
Result ====>  1233 
```

因为我的 HTML 文档中只有 3 个文本段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:48:00.300

我认为这应该可以得到总数：

```
$count = myFunc($dom->getElementsByTagName('body'));
echo "The document has $count text nodes\n";

function myFunc($node) {
    if ($node->childNodes) {
        $total = 0;
        foreach ($node->childNodes as $subNode):
            $total+= myFunc($subNode);
        endforeach;
        return $total;
    }
    else
    {
        if ($node->nodeType == 3 && trim($node->nodeValue) != '') {
            return 1;
        } else {
            return 0;
        }
    }
} 
```

`myFunc`如果节点有子节点将这些子节点视为新树并返回总和的文本节点数，则调用它。否则它会根据节点类型及其值返回 1 或 0。

# android - 如何从 Android 设备读取 EAN-13 条码（不是 QR 码）

> ID：13989407
> 
> 赞同：0
> 
> 时间：2012-12-21T11:34:43.920
> 
> 标签：android, barcode, zxing

我正在使用一个 Android 应用程序，并且我成功地`QR Code`从 android 手机读取，但我仍然很想找到从 Android 手机扫描**EAN-13 条形码**的方法。

如果有人对此有想法，请建议我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:30:54.883

[ZXing](http://code.google.com/p/zxing/)扫描仪可以做到这一点。您可以使用库或应用程序中已安装的应用程序。

# vb.net - 字节到字符串 - 晦涩的字符

> ID：13989409
> 
> 赞同：2
> 
> 时间：2012-12-21T11:34:48.770
> 
> 标签：vb.net, character-encoding, blob

我们现在在我的网站上将数据作为 BLOBS 存储在数据库中（我知道），我正在检索数据，放入字节然后转换为要显示的字符串。但是，正如您在下面看到的，在调试模式下查看时，文本中出现了奇怪的字符。

```
Hi John
�
I look forward to receipt of your instructions in due course.
�
Kind regards
� 
```

当它渲染它显示像

```
Hi John�I look forward to receipt of your instructions in due course.�Kind regards� 
```

目前的代码是：

```
Dim RSFileNote As New ADODB.Recordset
        RSFileNote.Fields.Append("FileNote", 205, intSizeofBlob)

        RSFileNote.Open()
        RSFileNote.AddNew()

        For n As Integer = 0 To dsVecSegment.Tables(0).Rows.Count - 1
            RSFileNote("FileNote").AppendChunk(dsVecSegment.Tables(0).Rows(n).Item("SDATA"))
        Next
        RSFileNote.Update()

        Dim vOut As String = System.Text.Encoding.UTF8.GetString(RSFileNote("FileNote").Value) 
```

我认为 UTF8 编码可以解决这个问题，但是有谁知道我能做些什么来解决我这边的问题？（因为无法正确获取数据库中的内容）

理想情况下，我想删除无关字符并用实际工作的换行符替换换行符（在调试期间位于 .Value 中）。

**更新**

我认为问题在于电子邮件被复制并粘贴到初始输入字段以存储在数据库中的事实。因此，他们将人工制品从前景带到了现场。

**更新 2**

考虑到 Esailija 的回答，它已经删除了 � 图标，但是断线仍然神秘地消失了。

我会发布一个完整的输出，但是它包含私人数据，尽管最后粘贴的电子邮件被编码为：

```
,wd-s.@ÓyøYð&¥¥ÀAàA•F•  €   p   IØ%Ð`ÐîèØMà!µì$ô#i!°p1¤ Ið-œ)) -„U€. x.y.)¨}U¹ M½!;¹4%;¨5˜6)˜2YA'8<1<8<9•=; !:$Ì78è#    Ùœ<ÐNÌ'Á',A yGÅC    ±]Õ 1 õH¥Ve„8¥9dN¹FMX   hX`Kè¸XÍ”U”dnÕU-€W@U`N%PDE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:15:35.750

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:39:57.360

讨厌的修复，但你可以这样做 vOut = vOut.Replace("�", vbCrLf)

# css - HTML5 时显示图像 开始播放

> ID：13989416
> 
> 赞同：0
> 
> 时间：2012-12-21T11:35:09.037
> 
> 标签：css, html, html5-audio

我有背景音乐和单一图像的网站。我希望在音乐开始之前隐藏图像，甚至可能在音频开始自动播放之前有某种加载消息。请帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:51:17.617

看看[这个答案](https://stackoverflow.com/a/12030459/1915428)中的脚本。显然，您必须更改附加到“canplaythrough”的功能以满足您的需求，例如添加以下内容：

```
$("#imageID").css("display", "block"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:45:29.770

首先通过 CSS 设置图像隐藏。

您需要监听 Javascript 事件`<audio>`元素正在触发：

[https://developer.mozilla.org/en-US/docs/DOM/Media_events](https://developer.mozilla.org/en-US/docs/DOM/Media_events)

然后在 Javascript 代码中，使用 jQuery.show 或类似的 DOM 元素样式操作，捕获您想要尊重的事件并动态地使图像在事件处理程序中可见：

[http://api.jquery.com/show/](http://api.jquery.com/show/)

# matlab - 从 k-mean 聚类中去除异常值

> ID：13989419
> 
> 赞同：7
> 
> 时间：2012-12-21T11:35:23.313
> 
> 标签：matlab, data-mining, cluster-analysis, k-means, outliers

我有一些较小的数据集，每个包含 10 个 XY 坐标。我正在使用 Matlab (R2012a) 和 k-means 来获得质心。在一些集群中（见下图），我可以看到一些极值点，因为我的数据集和它们一样小，一个大纲破坏了我的质心的值。有没有一种简单的方法可以排除这些点？假设Matlab有一个“排除异常值”功能，但我在工具菜单的任何地方都看不到它。谢谢你的帮助！（是的，我对此很陌生：-）

![在此处输入图像描述](../Images/b796e9b456076012993f2436b4b273a6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:02:10.907

k-means 可能对数据集中的异常值非常敏感。原因很简单，k-means 试图优化**平方和**。因此，较大的偏差（例如异常值）会获得很大的权重。

如果您有一个带有异常值的嘈杂数据集，则最好使用具有专门噪声处理的算法，例如[DBSCAN（具有噪声的应用程序的基于密度的空间聚类）](http://en.wikipedia.org/wiki/DBSCAN)。请注意首字母缩略词中的“N”：噪声。与例如 k-means 以及许多其他聚类算法相比，DBSCAN 可以决定*不对*低密度区域中的对象进行聚类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:18:25.747

您正在寻找诸如“异常值删除”之类的内容，并且正如其他人在上面所链接的那样，“没有关于构成异常值的严格数学定义” - [http://en.wikipedia.org/wiki/Outlier#Identifying_outliers](http://en.wikipedia.org/wiki/Outlier#Identifying_outliers)。

当您进行无监督聚类时，异常值检测更加困难，因为您都在尝试了解聚类是什么，以及哪些数据点对应于“无”聚类。

一个简单的定义是将所有与其他数据点“远”的数据点视为异常值。例如，您可能会考虑删除与任何其他点的最大最小距离的点：

```
x = randn(100,2); 
x(101,:) = [10 10];  %a clear outlier
nSamples = size(x,1);

pointToPointDistVec = pdist(x);
pointToPointDist = squareform(pointToPointDistVec);
pointToPointDist = pointToPointDist + diag(inf(nSamples,1)); %remove self-distances; set to inf

smallestDist = min(pointToPointDist,[],2);
[maxSmallestDist,outlierInd] = max(smallestDist); 
```

您可以将上述迭代几次以迭代删除点。请注意，这不会删除恰好有至少一个附近邻居的异常值。如果您阅读 WIKI 页面，并看到可能更有帮助的算法，请尝试实现它并询问该特定方法。

# php - "Block" 方法，因为 numberOfRowsInSection 返回 0

> ID：13989423
> 
> 赞同：1
> 
> 时间：2012-12-21T11:35:31.923
> 
> 标签：php, ios, json, tableview

我的 .h 文件：

```
#import <UIKit/UIKit.h>
#import "ServiceConnector.h"

@interface PartnerTableController : UITableViewController <ServiceConnectorDelegate>

@property (nonatomic, retain) IBOutlet NSMutableArray *allPartners;

- (IBAction)download:(id)sender;

@end 
```

我的 .m 文件的一部分：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self download:self];
}

...

- (IBAction)download:(id)sender { //perform get request
    ServiceConnector *serviceConnector = [[ServiceConnector alloc] init];
    serviceConnector.delegate = self;
    [serviceConnector download];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSLog(@"count allpartners: %d", [allPartners count]);
    return [allPartners count];
} 
```

问题是`numberOfRowsInSection`返回 0，因为下载我的 JSON-String、创建一个对象并将其放入 NSMutableArray 需要一段时间`allPartners`。我可以以某种方式阻止该方法`download`吗？

更新：`allPartners`由这种方法填充：

```
[serviceConnector download];

-(void)download{

    //build up the request that is to be sent to the server
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.bala.com"]];

    [request setHTTPMethod:@"GET"];
    [request addValue:@"getValues" forHTTPHeaderField:@"METHOD"]; //selects what task the server will perform

    //initialize an NSURLConnection  with the request
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if(!connection){
        NSLog(@"Connection Failed");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:12:07.360

当 ServiceConnector 通过委托通知您它拥有您所做的数据时，仅此而已`[table reloadData];`。同时，您将有一个空表，并且可能会在那里显示一些等待的 HUD 或执行一些逻辑，例如`if [allPartners count] is 0 then return count 1 and fill the cell with some special content`.

# java - Selenium RC 脚本太慢。无法识别

> ID：13989425
> 
> 赞同：0
> 
> 时间：2012-12-21T11:35:40.893
> 
> 标签：java

Selenium RC 脚本运行速度太慢。有人可以帮我解决这个问题.. 这是我的配置... 操作系统：Win7(x64) 浏览器：IE9 Selenium RC 版本：2.25

此外，我正在使用 selenium-server.jar 文件连接到 selenium 服务器，并且我的脚本不是基于 Webdriver，因为我是 selenium RC 的新手。

我能为此做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:50:11.713

Selenium 使用其孔渲染引擎启动浏览器，因此它非常慢（渲染网站需要时间）

也许您应该考虑使用不同的东西进行测试。

我使用 HtmlUnit [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) 它不渲染任何东西。但是您需要一些编程技能才能使用它。

# java - 如何在 java 中验证 Long 数据类型字段

> ID：13989428
> 
> 赞同：0
> 
> 时间：2012-12-21T11:35:54.870
> 
> 标签：java

我在java中有一个Long字段。我需要测试这个字段是否有值。我正在使用以下代码：

```
 Long phone_temp = queryAllPhoneNumbersForContact(contactId);
        if(phone_temp.equals(""))
        {
          System.out.println("Value  is null",""+phone_temp);
        } 
```

Long 有一个空值，但是当我尝试打印 phone_temp 的值时，它会使应用程序崩溃。我如何检查 phone_temp 是否有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:36:49.553

`java.lang.Long`永远不会是一个空字符串。如果它没有值意味着它的`null`. 如果`queryAllPhoneNumbersForContact(contactId)`返回一个长包装实例，则检查`phone_temp ==null`，因为对象的默认值为 null。

```
Long phone_temp = queryAllPhoneNumbersForContact(contactId);
            if(phone_temp==null) 
```

# mysql - Mysql 按特定字符串排序

> ID：13989435
> 
> 赞同：3
> 
> 时间：2012-12-21T11:36:29.857
> 
> 标签：mysql

我似乎找不到这个问题的答案：

假设我有一张这样的桌子：

```
ID   Name
------------------------
1    AAAAAAAAA
2    ABAAAAAAA
3    BBAAAAAAA
4    CDAAAAAAA
5    BBAAAAAAA 
```

有没有办法我可以订购`name`- 但是 - 从 say 开始订购`BB`并让它循环回来（而不是从 AZ 开始，从`BB`to `BA`）

最终结果将是：

```
3    BBAAAAAAA
5    BBAAAAAAA
4    CDAAAAAAA
1    AAAAAAAAA
2    ABAAAAAAA 
```

那有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:38:52.143

如果您希望`BB`出现在开头，您可以使用：

```
select *
from yourtable
order by case when substring(name, 1, 2) = 'BB' then 0 else 1 end 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/91d54/2)

如果你想`CD`出现第二个，然后使用：

```
select *
from yourtable
order by 
  case 
    when substring(name, 1, 2) = 'BB' then 0 
    when substring(name, 1, 2) = 'CD' then 1 
    else 2 end, name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/91d54/8)

第二次查询的结果：

```
| ID |      NAME |
------------------
|  3 | BBAAAAAAA |
|  5 | BBAAAAAAA |
|  4 | CDAAAAAAA |
|  1 | AAAAAAAAA |
|  2 | ABAAAAAAA | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:40:27.827

这将按名称对所有行进行排序。它将首先`>= 'BB'`按名称排序行，然后`< 'BB'`按名称排序行，使其按您想要的方式循环：

```
select *
from your_table
order by name<'BB', name 
```

# php - 单击链接时，HTML将输入文本化值加入href

> ID：13989436
> 
> 赞同：1
> 
> 时间：2012-12-21T11:36:31.330
> 
> 标签：php, javascript, html

我有一个输入文本字段和一个链接，当按下链接时，我想获取一个包含输入字段值的 url，如下所示：

如果我`roma`在文本字段上写，我想转到页面`treatment/exportPDF/roma`。

我尝试了什么：

```
<script>
    function getUsername(){
        return $(".username").Text();
    }
</script>
<div  class="container">
    <ul>
        <li>
            <label class="Paragraph">Select a username</label>
            <p>
                <label>Username</label>
                <input name="username" type="text" class="longInput1"/>
                <span class="errorMessage"></span>
            </p>
            <p>
                <a class="smallLink" href="<?php echo URL2; ?>Treatment/exportPDF/"> PDF</a>
            </p>
            <p>
                <a class="smallLink" href="">Excel</a>
            </p>
        </li>
    </ul>
</div> 
```

`getUsername()`那么我怎么能从我的**href**调用函数呢？我的脚本也错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:38:45.940

> 我的脚本也错了吗？

**是的**

```
$(".username").Text(); 
```

应该：

```
var value = $("input[name='username']").val();
window.location = "/treatment/exportPDF/" + value; 
```

将 HTML 更改为：

```
<a class="smallLink" href="#" onclick="getUsername()"> PDF</a> 
```

*   `text`（非文本）（几乎）等于`innerHTML`
*   `val`等于`value`。
*   `.`在 css 选择器中是一个类选择器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T11:42:10.940

尝试

```
<script>
    function getURL(){
        document.location = "<?php echo URL2; ?>Treatment/exportPDF/"+ $(".username").Text();
    }
</script>
<div  class="container">
    <ul>
        <li>
            <label class="Paragraph">Select a username</label>
            <p>
                <label>Username</label>
                <input name="username" type="text" class="longInput1"/>
                <span class="errorMessage"></span>
            </p>
            <p>
                <a class="smallLink" href="javascript:getURL()"> PDF</a>
            </p>
            <p>
                <a class="smallLink" href="">Excel</a>
            </p>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T11:40:44.457

您想`onmousedown`在链接上使用 an，在属性中指定链接`href`，然后修改它`onclick`，如下所示：

```
<a href="<?php echo URL2; ?>Treatment/exportPDF/" onmousedown="this.href = this.href + $('[name=username]').val(); this.onmousedown = '';"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T11:59:17.760

在您的脚本中使用此代码

```
 <script>
            function getUsername(){
                  alert(document.getElementById("username").value)
                return (document.getElementById("username").value)
            }
      </script> 
```

并将 id 提供给文本框

```
 <input id=="username" name="username" type="text" class="longInput1"/> 
```

# ios - Datajs OData.read 函数未通过 PhoneGap 触发

> ID：13989446
> 
> 赞同：0
> 
> 时间：2012-12-21T11:37:10.510
> 
> 标签：ios, cordova, odata, datajs

我正在尝试使用 PhoneGap 和 JQuery Mobile 将移动 Web 应用程序打包到 iOS 应用程序中。该应用程序使用 Datajs 向另一个站点发出 OData 请求。我已在 Cordova.plist 中将外部主机设置为“*”，并且在通过 Web 浏览器使用相同文件时请求工作正常。

问题在于，一旦将其打包到 iOS 应用程序中，OData.read() 函数就会被完全跳过，就像它们根本不存在一样。这是导致问题的代码：

```
var myURI = baseURL + "GetIndustries";
    console.log("before request");
    OData.read({requestUri: myURI, username: username, password: password}, function (data){
                          console.log("successful request");
               for (var i=0; i<data.results.length; i++) {
            industries[i]=data.results[i];
        }
        }, function(err){
            console.log("error: "+err);
    });
    console.log("after request..."); 
```

运行应用程序时，日志输出为：

```
2012-12-21 11:05:48.104 opportunities[298:907] Multi-tasking -> Device: YES, App: YES
2012-12-21 11:06:04.791 opportunities[298:907] [LOG] before request
2012-12-21 11:06:04.806 opportunities[298:907] [LOG] after request... 
```

对我来说，这表明它完全跳过了 OData 函数，甚至是错误处理。我正在使用 JQueryMobile 的 datajs-1.1.0 和 1.2.0 版。

任何帮助或指示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:22:17.247

> 对我来说，这表明它完全跳过了 OData 函数

错误的。AJAX 请求`requestUri`由 datajs 异步发送。您指的 OData 函数是一个**回调**函数，这意味着它将在稍后调用 - 即：当服务器已撰写回复并且 datajs 已收到该回复时。

至于为什么你的回调函数永远不会被调用：请在调用时检查你的参数`OData.read`。这些[片段](http://datajs.codeplex.com/wikipage?title=OData%20Code%20Snippets&referringTitle=Documentation)提供了一些示例。另请参阅[OData.read 的详细文档](http://datajs.codeplex.com/wikipage?title=datajs%20OData%20API&referringTitle=Documentation#OData.read)。

# php - CakePHP1.3：ionCube Loader + 许可证验证：许可证无效

> ID：13989447
> 
> 赞同：0
> 
> 时间：2012-12-21T11:37:13.667
> 
> 标签：php, cakephp, cakephp-1.3, ioncube

**我有的 ：**

我尝试设置一个 cakephp1.3 应用程序。

在我的应用程序中，使用了 ionCube Loader。

**错误 ：**

我得到以下错误

“许可证验证问题：许可证无效。请查看知识库以获取有关如何解决此问题的信息。”

**我尝试了什么：**

1. [http://blog.eukhost.com/webhosting/ioncube-installation-globally/](http://blog.eukhost.com/webhosting/ioncube-installation-globally/)

2.

```
<?php
  print_r(get_loaded_extensions());
 ?> 
```

它给我：

```
 Array (      
   .......
   .......
   [50] => paradox
   [51] => ionCube Loader
   [52] => Zend Optimizer
) 
```

我认为“ionCube Loader”已经安装。

**我想要的是：**

如何解决以下错误

“许可证验证问题：许可证无效。请查看知识库以获取有关如何解决此问题的信息。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T01:26:27.747

而不是运行：

```
<?php
  print_r(get_loaded_extensions());
 ?> 
```

制作一个包含以下内容的 PHP 文件：

```
<?php phpinfo(); ?> 
```

并通过它检查所需的组件，您还可以查看此链接： http: [//www.ioncube.com/loader_installation.php](http://www.ioncube.com/loader_installation.php)

如需更深入的概述，请在下载 ioncube 加载器的同一页面上；它为您提供了一个小脚本，您可以将其上传到您的 web 目录，它会告诉您如何安装并为您进行所需的检查。这个小工具叫做`Loader Wizard`

[http://www.ioncube.com/loaders.php](http://www.ioncube.com/loaders.php) <-- 装载机

如果您仍有问题，值得一试；然后联系 ioncube 支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:15:31.687

This suggests that you have some files that are protected, and that the creator of the files has specified that they need a license. The ionCube component will be working fine and doing its job. The provider of the scripts should be able to assist. If you are using the ionCube Encoder and the creator of the files, ionCube support would be able to assist.

# angularjs - 如何在angularjs中为ng-model动态赋予价值？

> ID：13989453
> 
> 赞同：17
> 
> 时间：2012-12-21T11:37:29.583
> 
> 标签：angularjs

在这里，我正在使用`ng-repeat`例如动态生成一个 html 元素

```
<div ng-repeat="type in types">
    <input  type="checkbox" ng-model="{{type}}" />{{ type }}
</div> 
```

我想为 ng-model 设置类型值。是否有可能，否则我想像这样为 ng-true-value 设置该类型值

```
<div ng-repeat="type in types">
    <input  type="checkbox" ng-model="{{type}}" ng-true-value="{{type}}" />{{ type }}
</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T02:31:54.890

由于 ng-repeat 为每个类型/项目/迭代创建一个子范围，我们需要将每个类型的 ng-model 与父范围相关联，而不是子范围。一种方法是使用 $parent：

```
<input type="checkbox" ng-model="$parent[type]">{{ type }} 
```

如果 $scope.types 的定义与@Alex的答案一样，则如果单击相应的复选框，则 properties `typeOne`, `typeTwo`, and`typeThree`将出现在父范围上，并且该属性的值将为`true`。如果再次单击选中的复选框，则该属性保持不变，并且值将切换为`false`。因此，您的代码必须检查不存在的属性以及值设置为 true 或 false 的存在的属性。这有点乱。

我更愿意在父作用域上预定义一个对象数组，其中每个对象都有类型（名称）和一个布尔值来指示它是否被选中：

```
$scope.types = [ 
  {name: 'typeOne', selected: false},
  {name: 'typeTwo', selected: false},
  {name: 'typeThree', selected: false}]; 
```

然后， $parent 不是必需的（因为“type”的值将是对父对象的引用，而不是父属性（原始）值的副本）：

```
<input type="checkbox" ng-model="type.selected">{{ type.name }} 
```

See also [What are the nuances of scope prototypal / prototypical inheritance in AngularJS?](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482) to learn more about ng-repeat and child scopes.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T13:10:29.303

您可以将动态值存储到 $scope 的属性之一中，如下所示：

```
function DynamicController($scope) {
    $scope.types = [
        "typeOne",
        "typeTwo",
        "typeThree"        
    ];
    $scope.typeValues = {};
};

<div ng-app ng-controller="DynamicController">
    <div ng-repeat="type in types">
        <input  type="checkbox" ng-model="typeValues[type]" ng-click="show()" /> {{ type }}
    </div>

    <h3>Values</h3>
    <div ng-repeat="type in types">
        {{ type }} : {{ typeValues[type] }}
    </div>
</div> 
```

然后，您可以通过范围的 typeValues 属性检查您的值。

```
var i,
    length = $scope.types.length;

for (i = 0; i < length; i++) {
    console.log($scope.types[i] + " : " + $scope.typeValues[$scope.types[i]]);
} 
```

# c++ - 从 C++ 中的空基类继承

> ID：13989454
> 
> 赞同：9
> 
> 时间：2012-12-21T11:37:31.727
> 
> 标签：c++, inheritance, constructor, polymorphism, abstract-class

我想创建一个名为“Node”的空基类，然后让其他类派生自此，例如“DecisionNode”和“Leaf”。这样做是有意义的，因此我可以利用多态性将这些不同类型的节点传递给方法，而无需在编译时知道将传递给方法的内容，但是每个派生类不共享任何状态或方法。

我认为实现这一点的最佳方法是使构造函数成为纯虚拟的，而不在基类中创建额外的纯虚方法，这会增加混乱。因此，在该类的头文件“Node.h”中，我写道：

```
class Node {
 private:
  virtual Node();
}; 
```

在“Node.cpp”中我写道：

```
#include "Node.h"
virtual Node::Node() = 0; 
```

此实现防止 Node 被另一个类实例化，因为唯一的构造函数是私有的，并且使用纯虚拟说明符来指示该类是抽象的。但是，这会产生编译器错误：

```
Node.h:6:21: error: return type specification for constructor invalid
Node.h:6:21: error: constructors cannot be declared virtual [-fpermissive] 
```

我的问题是：有没有一种巧妙的方法来制作一个空的抽象基类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T11:42:25.580

您不能将构造函数设为虚拟。如果不需要其他纯虚函数，您可以将析构函数设为纯虚函数：

```
class Node
{
public:
    virtual ~Node() = 0;
};

Node::~Node()
{
  // Compulsory virtual destructor definition,
  // even if it's empty
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T11:48:45.537

C++ 不支持虚拟构造函数。

> **§ 12.1 构造函数**
> 
> 12.1.4 构造函数不应是虚拟的（10.3）或静态的（9.4）。

下面的代码不会编译：

```
virtual Node::Node() = 0; 
```

> 我的问题是：有没有一种巧妙的方法来制作一个空的抽象基类？

是的，使析构函数成为纯虚函数，还提供析构函数定义

```
class Node 
{
public:
    virtual ~Node()=0
    {
    }
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T11:40:49.477

创建一个虚拟析构函数并提供一个“空”实现。

```
class Node {
    virtual ~Node() = 0;
}

Node::~Node() {}  // You will get linker error if you do not have this 
```

正如其他人所评论的那样，另一种选择是使构造函数受到保护。另请参阅此问题以了解两者之间的一些差异。[受保护的构造函数与纯虚拟析构函数](https://stackoverflow.com/questions/13719545/protected-constructor-versus-pure-virtual-destructor)

**编辑**确保你记录你为什么使用纯虚拟析构函数。代码本身在这方面是神秘的，并没有让不知道这个“技巧”的人清楚。

**编辑 2**您的构造函数应该是`protected`，而不是`private`。如果您的构造函数是`private`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:40:37.280

在 C++ 中，构造函数不能是`virtual`. 为了防止任何人实例化你的基类，给它一个受保护的构造函数，像这样：

```
class Node {
protected:
  Node() {}
}; 
```

它不会是抽象的，但只有派生类才能创建它的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T11:40:50.287

简单地：

```
class Node 
{
protected:
    Node()
    {
    }
public:
    virtual ~Node()
    {
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T12:25:49.563

你想做的是

```
class Node {
 private:
  virtual Node();
};
and in "Node.cpp" I wrote:

#include "Node.h"
// This is the error as your class name and function name i.e. same so compiler assumes 
// that this as a constructor and as per the c++ standard a constructor can not have 
// return type as well as can not be virtual
virtual Node::Node() = 0; 
```

* * *

因此，您将虚拟析构函数设为 ** virtual ~Node() = 0;**

# ios - NSNumberFormatter 在设备上返回 nil，而不是在模拟器上

> ID：13989456
> 
> 赞同：4
> 
> 时间：2012-12-21T11:37:34.300
> 
> 标签：ios, decimal, null, nsnumberformatter

我使用 NSNumberFormatter 将用户输入转换为 NSNumber（十进制数），我使用 ARC。

```
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
[f setMaximumFractionDigits:1];

_myNumber = [f numberFromString:myTextField.text]; 
```

有时这会`_myNumber`导致`nil`. 即使我绝对确定用户输入的是正确的十进制数（我在调试期间检查过）。

为了完整性：`_myNumber`是 ViewController 的综合属性。这只发生在设备上运行应用程序时，而不是我在模拟器中运行它时。使用的键盘是“十进制键盘”。在不同的代码部分，在不同的 ViewController 中，代码确实有效。

我现在有一个解决方法，我在上面的代码下面添加了：

```
if (!myNumber){
    myNumber = [NSNumber numberWithFloat: myTextField.text.floatValue];
} 
```

有谁知道为什么 NSNumberFormatter 可以返回 nil，即使调用`[NSNumber numberWithFloat: myTextField.text.floatValue]`有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-16T16:52:42.700

在我的情况下，解决方案将 NSNumberFormatter 的“decimalSeparator”设置为“.”，例如：

```
NSNumberFormatter *formatString = [[NSNumberFormatter alloc] init];
formatString.decimalSeparator = @"."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:10:56.697

为什么这在模拟器上而不是在设备上工作取决于语言设置。我的模拟器设置为英语，而我的设备设置为荷兰语。在英语中使用“。” 用作小数分隔符，在荷兰语中使用“，”。

将原始值写入 UITextField 时，我使用了以下代码：

```
_myTextField.text = [NSString stringWithFormat:@”%.1f”, [_myNumber floatValue]]; 
```

这导致总是有“。” 作为小数分隔符，根据语言设置可能正确也可能不正确。我必须做的是使用 NSNumberFormatter 将值设置到 UITextField：

```
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
[f setMaximumFractionDigits:1];

_myTextField.text = [f stringFromNumber:_myNumber]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T17:31:39.813

我有同样的问题，但不是文本输入，而是使用小数分隔符为“。”的 API。在我的设备（德国使用“，”）上使用 DecimalNumberFormatter 失败，但在模拟器（可能使用美国区域设置）上失败。

我的解决方法是确定小数点分隔符并将其提供给格式化程序对象：

```
 f.decimalSeparator = "." 
```

# php - 无法将产品添加到 opencart 中的购物车

> ID：13989459
> 
> 赞同：-1
> 
> 时间：2012-12-21T11:37:38.597
> 
> 标签：php, shopping-cart, opencart

我正在使用一个 opencart 站点。我为我的项目创建了一个测试站点。当我通过测试站点添加新产品时，我收到消息产品已成功添加到购物车。但是该商品没有出现在购物车中。但所有这些都在现场工作正常。我为现场和测试站点使用相同的代码和数据库..

有没有配置问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:06:09.097

在我看来，这听起来像是您没有在产品的“链接”选项卡中分配商店。如果没有，则需要将其分配给商店。如果您有，我的建议是清除所有缓存，例如`/system/cache/`页面缓存文件夹（如果您使用一个）

# javascript - Cookie 一小时后过期？

> ID：13989474
> 
> 赞同：0
> 
> 时间：2012-12-21T11:38:37.763
> 
> 标签：javascript, cookies

我捏住了下面的 javascript 代码，将 cookie 应用到文档就绪时弹出的模态框。如何调整以下内容以使 cookie 仅持续一个小时？我认为它会一直持续到现在？

```
function setCookie(cookieName,cookieValue,nDays) {
 var today = new Date();
 var expire = new Date();
 if (nDays==null || nDays==0) nDays=1;
 expire.setTime(today.getTime() + 3600000*24*nDays);
 document.cookie = cookieName+"="+escape(cookieValue)
                 + ";expires="+expire.toGMTString();
}

function getCookie(cookieName) {
 var theCookie=" "+document.cookie;
 var ind=theCookie.indexOf(" "+cookieName+"=");
 if (ind==-1) ind=theCookie.indexOf(";"+cookieName+"=");
 if (ind==-1 || cookieName=="") return "";
 var ind1=theCookie.indexOf(";",ind+1);
 if (ind1==-1) ind1=theCookie.length; 
 return unescape(theCookie.substring(ind+cookieName.length+2,ind1));
}

    $(document).ready(function() {

        var skipModal = getCookie('skipModal');
     if (!skipModal) { // check and see if a cookie exists indicating we should skip the modal
         $('#myModal').reveal({
     animation: 'fadeAndPop',                   //fade, fadeAndPop, none
     animationspeed: 300,                       //how fast animtions are
     closeonbackgroundclick: true,              //if you click background will modal close?
     dismissmodalclass: 'close-reveal-modal'    //the class of a button or element that will close an open modal
    });

         setCookie('skipModal', 'true', 365*5); // set a cookie indicating we should skip the modal
     }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:40:05.160

Javascript 时间以毫秒为单位，因此请更改

`expire.setTime(today.getTime() + 3600000*24*nDays);`

到

`expire.setTime(today.getTime() + (60 * 60 * 1000));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:37:18.630

我会使用 getHours 方法。

```
var expire = new Date();
expire.setHours(expire.getHours()+1);
//test
alert(expire.toUTCString()); 
```

# eclipse - 如何在 Eclipse 中添加“在资源管理器中打开”功能？（不使用插件）

> ID：13989475
> 
> 赞同：0
> 
> 时间：2012-12-21T11:38:38.580
> 
> 标签：eclipse, preferences

如何在文件资源管理器中打开选定文件的问题已被彻底询问和回答，但没有人解释如何在不下载插件的情况下做到这一点。至少据我所知。

所以我的问题是：如何在不下载或安装额外工具的情况下将“在资源管理器中打开”添加到 Eclipse？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:38:38.580

事实证明，这个问题有一个非常简单的解决方案。它只需要以下行：

```
explorer /select,%1 
```

将其写入一个空文件并另存为 Explorer.bat。现在转到首选项 - 常规 - 编辑器 - 文件关联，搜索或创建您喜欢的文件扩展名并添加关联的编辑器。单击“添加”按钮后，选择“外部程序”，单击“浏览...”，搜索并选择您的 Explorer.bat 文件，确认一切，您就完成了。转到您刚刚关联的文件，右键单击，选择“打开方式”，然后单击“资源管理器”，包含目录应该打开。

# vb.net - 使用比较字段验证器执行两个操作

> ID：13989478
> 
> 赞同：0
> 
> 时间：2012-12-21T11:38:41.897
> 
> 标签：vb.net

我有一个与 TextBox 关联的比较字段验证器`textbox1`。它将它的值与另一个 TextBox 的值进行比较`textbox2`，以检查它的值是否小于另一个的值。

现在，我还想确保它`textbox1`不包含值 0。那么如何在同一个 comparefield 验证器中应用此验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:01:36.607

为 textbox1 放置一个 RequiredFieldValidator 并设置 InitialValue="0"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:08:18.100

正如我在评论中提到的，您可能想尝试使用 CustomValidator。[您将在此处 (MSDN) 找到一些文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.onservervalidate.aspx)。

一旦你设置了验证器，实现你自己的函数来检查其他文本字段的值，以及值 0，应该是一项可以克服的任务！:)

# azure - 使用内部客户端对 Windows 2012 VM 进行负载平衡

> ID：13989482
> 
> 赞同：0
> 
> 时间：2012-12-21T11:38:48.710
> 
> 标签：azure, load-balancing, azure-virtual-machine

我将两个 VM（win 2012）设置到一个云服务中。每个 VM 运行一个简单的 TCP 服务，该服务接受连接并在客户端希望的时间内保持连接。

问题是我无法从同一个客户端（当然是不同的 TcpClient 对象）连接到端点两次。

这在不运行负载平衡时是可能的。

当服务器尝试连接到自身时也会出现问题（由于一些懒惰的编码）。第一次，没事。第二次连接失败并显示“服务器未响应”消息。

我的问题很简单：是否可以从同一主机多次连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:05:56.143

如果需要，您可以在每个单独的虚拟机上设置特定端口（基本上是将流量转发到特定虚拟机的端点）。Michael Washam 在他的帖子中说明了这[一点](http://michaelwasham.com/2012/06/08/understanding-windows-azure-virtual-machines/)。您将创建端点，但不会创建负载平衡端点。然后，您的客户端应用程序将需要选择要连接的服务器（基于端口号）。也许是随机选择？

相反，如果您正在寻找“粘性服务器”解决方案，其中客户端连接到单个端口，负载平衡到其中一个 VM，然后停留在该 VM 上：您需要使用类似 haproxy , nginx 等在自己的虚拟机中运行，根据您设置的规则将流量转发到各个虚拟机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T17:28:31.470

您的问题是有效的，并且有利于其他找到它的人：

无法连接到同一台服务器，因为 Azure 软件负载均衡器使用循环算法。因此无法保证每个请求将连接到哪个服务器。

[http://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/](http://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/)

“Windows Azure 为公开定义的云服务端口提供网络流量的循环负载平衡”

这就是为什么另一个答案中的单个端口方法是强制与特定服务器通信的唯一方法。

# actionscript-3 - 如何在运行时嵌入 swf 和加载？

> ID：13989485
> 
> 赞同：1
> 
> 时间：2012-12-21T11:38:51.213
> 
> 标签：actionscript-3, flash, embed, loader

我正在尝试加载嵌入式 swf（充当声音库）。由于它是一个大型 swf，我想在运行时加载它并有一个加载器栏指示加载了多少。

在网上做一些研究，我发现使用`mimeType="application/octet-stream"`将是做到这一点的方法。然而，结果是嵌入的 swf 仍然在加载主/包装 swf 的同时加载。因此，由于某种原因，当我到达第一行代码时（在本例中为 LoadTest 构造函数），整个嵌入式 swf 已经加载。我发现的大多数示例都与 Flex 打交道，并且我使用的是 100% as3 项目（在 FlashDevelop 中），但我看不出有什么不同的原因。

这是我正在使用的类（真正的类要复杂得多，但这将是加载嵌入式 swf 的基本机制）

```
package {
import flash.display.Loader;
import flash.display.Sprite;
import flash.events.Event;
import flash.events.ProgressEvent;
import flash.system.LoaderContext;

public class LoadTest extends Sprite {

    [Embed(source = "soundLib.swf", mimeType="application/octet-stream")]
    private var _soundLibSWFClass:Class;
    private var _assetLdr:Loader;

    public function LoadTest():void {
        this._assetLdr = new Loader();
        this._assetLdr.contentLoaderInfo.addEventListener(Event.COMPLETE, this.handleComplete);
        this._assetLdr.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, this.handleProgress);
        this._assetLdr.loadBytes(new _soundLibSWFClass(), new LoaderContext(false, this._assetLdr.contentLoaderInfo.applicationDomain));

        trace("start");
    }
    public function handleComplete(event:Event):void {
        trace("complete");
    }
    public function handleProgress(event:ProgressEvent):void {
        trace("progress " + event.bytesLoaded +", "+ event.bytesTotal);
    }

}
} 
```

这是我在输出中得到的：

```
progress 0, 2411787
progress 2411787, 2411787
start
complete 
```

以下是有关嵌入式 swf 的更多信息以及我迄今为止尝试的内容：

*   声音库是在 Flash cs5 中创建的，所有声音都位于库中并具有适当的标识符。
*   嵌入式 swf 的阶段是空的。
*   使用“框架中的导出类”选项，我厌倦了 1 和 2，但这并没有什么区别。
*   我在加载其他 swf 库（例如包含电影剪辑）时遇到了同样的问题，但声音库似乎在测试中使用最直接
*   我在不同的服务器上测试了这个
*   我在每次测试前清除了缓存。
*   我使用带宽模拟来 100% 确定整个事情需要一段时间才能加载。
*   即使我删除了所有加载程序的东西，主 swf 仍然需要一些时间来加载，这表明嵌入式 swf 是同时加载的。

希望任何人都可以帮助我解决这个问题，或者有另一种在运行时加载嵌入式 swf 的方法（基本上我需要一个 swf 而不是一次加载整个东西）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:04:02.817

Embed-tag 用于在编译时将数据烘焙到 swf 中。您要使用的是 Loader-object 上的 .load -function，并完全删除 Embed-tag。

```
this._assetLdr.load(new URLRequest("soundLib.swf")); 
```

当然，您还需要确保 soundLib.swf 与您编译的 swf 位于同一文件夹中。

# rest - 如何在 RESTful Web 服务中为 GET 方法传递空值？

> ID：13989487
> 
> 赞同：5
> 
> 时间：2012-12-21T11:38:53.353
> 
> 标签：rest, get, null, cxf, jax-rs

我目前有一个使用**CXF公开的****RESTFul** Web 服务。该方法看起来像这样。

 **```
@GET
@Path("/getProfile/{memberno}/{userid}/{channelid}")
@Consumes("application/xml")
public MaintainCustomerProductResponse getUserDetails(
        @PathParam("memberno") String membernumber,
        @PathParam("userid") String userid,
        @PathParam("channelid") String channelid){
//DO Some Logic here.
} 
```

这可以通过以下 URL 访问，并在提交有效数据后得到响应。

```
http://server.com:8080/UserService/getProfile/{memberno}/{userid}/{channelid} 
```

问题：如何传递空值`userid`？

如果我简单地忽略该`{userId}`请求不会在服务器端 Web 服务上命中。

例子

```
http://server.com:8080/UserService/getProfile/1001//1 
```

注意：我正在使用`SOAPUi`测试并且没有给出`userId`值我看到以下响应`SOAPUI`并且请求没有命中服务器。

SOAPUI 响应

```
<data contentType="null" contentLength="0"><![CDATA[]]></data> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:12:17.960

变量的默认匹配是`[^/]+?`（至少一个字符）您可以手动将匹配设置为`[^/]*?`，它也应该匹配空字符串。

只需将格式添加到 userid 变量：

```
@Path("/getProfile/{memberno}/{userid: [^/]*?}/{channelid}") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T05:50:00.233

请进行更改`@Path("/getProfile/{memberno}/{userid}/{channelid}")` `@Path("/getProfile/{memberno}/{userid = default}/{channelid}")`，使其接受用户 id 的空值。您可以使用 Uri 模板为可选参数指定默认值。请参阅

[http://msdn.microsoft.com/en-us/library/bb675245.aspx](http://msdn.microsoft.com/en-us/library/bb675245.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:23:58.710

我通过解决方法解决了这个问题。我创建了另一个只接受两个参数的方法。现在基于请求 URL 调用不同的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-15T12:23:12.143

```
@GET
@Path("qwer/{z}&{x:.*?}&{c}")
@Produces(MediaType.TEXT_PLAIN)
public String withNullableX(
        @PathParam("z") Integer z,
        @PathParam("x") Integer x,
        @PathParam("c") Integer c
) {
    return z + "" + x + "" + c;
} 
```

当您使用
[http://localhost:8080/asdf/qwer/1&&3](http://localhost:8080/asdf/qwer/1&&3)
调用时， 您将看到：
`1null3`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T15:11:11.293

需要更详细地描述所有可能的情况。查看基于 Spring Framework 的示例：

```
 @RestController
        @RequestMapping("/misc")
        public class MiscRestController {
    ...
            @RequestMapping(value = { "/getevidencecounts/{userId}",
                    "/getevidencecounts/{userId}/{utvarVSId = default}" }, method = RequestMethod.GET)
            public ResponseEntity<EvidenceDokumentuCountTO> getEvidenceCounts(
                    @PathVariable(value = "userId", required = true) Long userId,
                    @PathVariable(value = "utvarVSId", required = false) Long utvarVSId) {
... 
```

我们需要使用像`.../misc/1`(1)、`.../misc/1/25`(2)、`.../misc/1/null`(3) 这样的路径。路径 1 表示`/getevidencecounts/{userId}`。路径 2 和 3 `/getevidencecounts/{userId}/{utvarVSId = default}`。如果您确定默认值为 null，您也可以`= default`按`= null`值替换声明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-10T20:22:42.410

您可以使用 URL 编码，通过`%00`. 参考[这个](https://www.w3schools.com/tags/ref_urlencode.asp)。

例子：`http://server.com:8080/UserService/getProfile/1001/%00/1`**

# java - Identity.logout() 之后的 ViewExpiredException；在 JBoss 缝中

> ID：13989489
> 
> 赞同：7
> 
> 时间：2012-12-21T11:38:58.943
> 
> 标签：java, jsf, seam

重定向到登录页面后`AuthenticationFilter`，我想注销用户。

这就是为什么，我把`identity.logout();`我的预渲染方法`checkPermission(...)`.`login.xhtml`

但是，`ViewExpiredException`当用户再次登录时，我得到了。

我的问题是

**1：**如果我不这样做`identity.logout();`，由于旧用户会话仍然存在，用户再次重新登录。 **2：**如果我这样做`identity.logout();`，我会`ViewExpiredException`在用户再次登录时得到。

AuthenticationFilter.java

```
public class AuthenticationFilter implements Filter  {
    .....

    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;
        HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;
        HttpSession session = httpRequest.getSession();
        User user = (User) session.getAttribute(Constants.LOGIN_USER);
        if (user == null) {
            session.setAttribute(Constants.MESSAGE_ID, MessageId.REQUIRED_TO_LOGIN);
            String loginView = httpRequest.getContextPath() + Constants.LOGIN_PAGE;
            httpResponse.sendRedirect(loginView);
        } else if (!user.getRole().equals(Role.SYSTEM_ADMINISTRATOR)) {
            System.out.println("User Role : " + user.getRole());
            session.setAttribute(Constants.MESSAGE_ID, MessageId.REQUIRED_TO_ADMIN_ROLE);
            String loginView = httpRequest.getContextPath() + Constants.LOGIN_PAGE;
            httpResponse.sendRedirect(loginView);
        } else {
            filterChain.doFilter(servletRequest, servletResponse);
        }
        servletContext.log("Exiting the filter");
    }

    public void destroy() {
    }
} 
```

登录.xhtml

```
....
<f:event listener="#{LoginBean.checkPermission}" type="preRenderView" />
.... 
```

登录Bean.java

```
@Scope(ScopeType.EVENT)
@Name("LoginBean")
public class LoginBean extends BaseBean {
    ....

    public boolean authenticate() {
        ....
    }

    public void checkPermission(ComponentSystemEvent event) {
        FacesContext context = getFacesContext();
        ExternalContext  extContext = context.getExternalContext();
        String messageId = (String) extContext.getSessionMap().remove(Constants.MESSAGE_ID);
        if(messageId != null) {
            identity.logout();
            addMessage(null, FacesMessage.SEVERITY_ERROR, messageId);   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T04:00:27.777

不要`identity.logout();`在`prerenderview`方法中使用。在`AuthenticationFilter`中，如果您想销毁当前会话并创建新会话，请在传递 messageID 之前执行以下操作。

```
if(...) {
    session.invalidate();
    session = httpRequest.getSession(true); 
    ....
} else if(...){
    session.invalidate();
    session = httpRequest.getSession(true); 
    ....
} 
```

# magento - 在多个“区域”中显示我的集团？

> ID：13989497
> 
> 赞同：1
> 
> 时间：2012-12-21T11:39:50.820
> 
> 标签：magento, layout, adminhtml

我正在为 Magento 开发 Slider 扩展，我希望能够在以下位置之一显示我的滑块：top_left、top_right、top_center、bottom_left/right/center！并且能够从我的管理员后端选择这个位置，比如 DropList 或类似的东西。你能帮忙吗:)！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:40:00.497

我找到的最佳解决方案是添加一个带有此事件的观察者：

> controller_action_layout_load_before

然后我们在其中加载布局：

```
public function addBlock(Varien_Event_Observer $observer)
{
   $layout = $observer->getEvent()->getLayout()->getUpdate();
   $layout->addHandle(ThePositionYouWant);
   return $this;
} 
```

在您的布局中放置您想要的不同位置：

```
<position_name>
    <reference name="content">
        <block type="BlockName" name="Name" before="-" template="YourBlockTemplate"/>
     </reference>
</position_name>

    <position_name2>
        <reference name="left">
            <block type="BlockName" name="Name" after="-" template="YourBlockTemplate"/>
         </reference>
    </position_name2> 
```

它有效。希望这会有所帮助:)！

# actionscript-3 - 如何以编程方式修改 Flash 阶段的大小

> ID：13989498
> 
> 赞同：1
> 
> 时间：2012-12-21T11:39:53.237
> 
> 标签：actionscript-3, flash

最初我设置舞台宽度 500 和高度 400。制作文件后，现在我希望它为 700*500，并且我想在舞台上显示所有内容。我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:57:28.897

如果它是您正在创建的网站，您可以通过调用 ExternalInterface 类以编程方式控制其大小，该类又调用 JavaScript 函数。然后可以使用 JavaScript 来调整嵌入式 Flash 对象的大小。

您可以在此处找到另一篇关于此的帖子：[如何在运行时调整 swf 的大小以让浏览器创建 html 滚动条？](https://stackoverflow.com/questions/32871/how-can-i-resize-a-swf-during-runtime-to-have-the-browser-create-html-scrollbars)

# javascript - Web-SQL 查询同时触发成功和失败回调

> ID：13989500
> 
> 赞同：0
> 
> 时间：2012-12-21T11:39:58.310
> 
> 标签：javascript, web-sql

我在谷歌浏览器中使用网络数据库，executeSql 函数触发成功和失败信号！

```
function succes(){
    alert("succes");
}

function failure(){
    alert("failure");
}

var db = openDatabase('mydb', '1.0', 'my first database', 2 * 1024 * 1024);
db.transaction(function (tx) {
tx.executeSql("CREATE TABLE IF NOT EXISTS " +
              "goal(ID INTEGER PRIMARY KEY ASC, goals TEXT, added_on DATETIME, appartient INTEGER, ok INTEGER)", []);
 });

 $('#button').click(function(){
    db.transaction(function(tx){
    var goalText = $('#entry').val();
    var addedOn = new Date();
    var appartient = 0;
    var ok = 0;
    alert(goalText);
    tx.executeSql("INSERT INTO goal(goals, added_on, appartient, ok) VALUES (?,?,?,?)",
    [goalText, addedOn, appartient, ok],
    succes(),
    failure());
 });

}); 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:51:24.250

您正在**调用** `succes`并将`failure`它们的 ( `undefined`)**返回值**传递给`executeSql`.

去掉`()`并传递函数。

# playframework-2.0 - 把资源放在哪里？

> ID：13989510
> 
> 赞同：19
> 
> 时间：2012-12-21T11:40:44.437
> 
> 标签：playframework-2.0

我需要向我的应用程序添加一些属性文件。我已将此文件添加到`controller`目录中，但无法加载它们（在类路径中没有？） -`InputStream`为空。这个文件放在哪里可以访问？

```
public class Application extends Controller {

    static {
        try {
            Properties p = new Properties();
            InputStream in =  Application.class.getClassLoader().getResourceAsStream("accounts.properties");
            if(in != null) {
                p.load(in);
                in.close();
            } else {
                error("null inputstream");
            }
        } catch (Exception e) {
            e.printStackTrace();
        }       
    }

    // Actions below 
    // ...
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-21T11:54:37.523

您必须将其放在`conf`Play 应用程序的文件夹中。

您也可以使用`conf`目录中的子文件夹。

例如：

```
conf/foo/bar.txt 
```

可以使用以下方式访问：

```
InputStream in = MyClass.class. getResourceAsStream("/foo/bar.txt") 
```

您还可以通过更新`project/Build.scala`文件并添加以下内容，在您的应用程序中添加自定义资源目录：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
      ...
      resourceDirectory in Compile <<= baseDirectory / "myresources"
      ...
  ) 
```

# php - 在jquery中动态生成组合框

> ID：13989514
> 
> 赞同：0
> 
> 时间：2012-12-21T11:40:55.297
> 
> 标签：php, javascript, jquery, json

我想要做的是：如果用户在数据库中只有一个信用卡号码，那么在我成功完成的页面上显示文本字段但是如果用户的多个信用卡号码已存储在我的数据库中，那么我想显示所有而不是显示文本字段他的信用卡号码进入组合框。

以下是我得到的 ajax 响应：

```
{
    "fname": "abc",
    "lname": "xyz",
    "creditCardInfo": [
        {
            "creditCardNumber": "378282246310005",
            "creditCardType": "AX",
            "securityCode": "1234",
            "expirationDate": "2020-02-01"
        },
        {
            "creditCardNumber": "6011000990139424",
            "creditCardType": "DS",
            "securityCode": "321",
            "expirationDate": "2030-12-01"
        }
    ],
    "creditCardNumber": "6011000990139424",
    "creditCardType": "DS",
    "creditCardCVC": "321",
    "creditCardExpirationMonth": "12",
    "creditCardExpirationYear": "2030"
} 
```

（注意：以上回复包含所有测试信用卡号和 cvc 代码）

我尝试使用 jquery`each`循环但能够做到。

以下是我的代码：

```
$.ajax({
type: "POST",
 url: "<?php echo $_SERVER['HOST']; ?>"+action,
 dataType: 'json',
 data: formdata,
 success: function(data)
{
var userinfo = eval(data);
alert(userinfo);
if(userinfo['msg'] == 'fail'){
$(".usrmsg").show();
$(".validate").hide();
}
else{

if(!$("#fname1").val()) $("#fname1").val(userinfo['fname']);
if(!$("#lname1").val()) $("#lname1").val(userinfo['lname']);
if(!$("#billingCity").val()) $("#billingCity").val(userinfo['billingCity']);

if(userinfo['creditCardInfo']){
$('#creditCardComboBox').show();
$('#creditCardTextField').show();

// $(userinfo['creditCardInfo']).each(function(index) {
// alert(index + ': ' + $(this).text());
// $("#creditCardNumber option[value="+index['creditCardNumber']+"]").attr("selected", "selected");                                
// });                                

$("#creditCardType option[value="+userinfo['creditCardInfo']['creditCardType']+"]").attr("selected", "selected");
$("#creditCardExpirationMonth option[value="+userinfo['creditCardInfo']['creditCardExpirationMonth']+"]").attr("selected", "selected");
$("#creditCardExpirationYear option[value="+userinfo['creditCardInfo']['creditCardExpirationYear']+"]").attr("selected", "selected");
}

if(!$("#billingFirstName").val()) $("#billingFirstName").val(userinfo['fname']);
if(!$("#billingLastName").val()) $("#billingLastName").val(userinfo['lname']);
if(!$("#creditCardCVC").val()) $("#creditCardCVC").val(userinfo['creditCardCVC']);
}
}
}); 
```

需要帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:22:10.517

猜猜这将是你的代码。使用 jquery hide/show/ 使用 .innerHtml 标签来显示你的内容。

```
$.ajax({
  type: "POST",
  url: "<?php echo $_SERVER['HOST']; ?>"+action,
  dataType: 'json',
  data: formdata,
  success: function(data)
  {
  //Check the length of the json array
   var creditcardinfo = data.creditCardInfo

   do
   {
      if(creditcardinfo.length==1){
        $('#creditCardTextField').show();
        $('#creditCardComboBox').hide();
        //Set value of creditcardText
        $('#creditCardTextField').val(creditcardinfo[i].creditCardNumber);

      }else if(creditcardinfo.length>1){
        $('#creditCardComboBox').show();
        $('#creditCardTextField').hide();
        //ASSUMING YOU Are using <select> tag
        var newOption = $('<option>');
         newOption.attr('value',creditcardinfo[i].creditCardNumber).text(creditcardinfo[i].creditCardNumber);
        $('#creditCardComboBox').append(newOption);
      }
   }while (i<creditcardinfo.length);

  }
 }); 
```

# objective-c - 处理多个 BOOL 组合

> ID：13989521
> 
> 赞同：2
> 
> 时间：2012-12-21T11:41:35.453
> 
> 标签：objective-c, cocoa-touch, boolean, combinations, boolean-logic

这是场景：在我的应用程序中，我正在同步一些数据，只要同步时出现一些错误，我就会在`BOOL`. 当所有同步完成后，我想为用户显示同步反馈（错误）。

如果存在即日历同步错误**和**联系人同步错误，我首先显示`UIAlertView`有关日历同步错误的信息，当用户点击“确定”时，我会显示`UIAlertView`有关联系人同步错误的信息。为了能够知道用户何时点击了“确定”，我使用了完成块。所以我的代码看起来像这样：

```
if (calendarSyncFailed && contactSyncFailed && facebookSyncFailed && contactSyncConflicts) {

    [self displayCalendarSyncAlertCompletionBlock:^{ 

        [self displayContactsSyncAlertCompletionBlock:^{

            [self displayFacebookSyncAlertCompletionBlock:^{

                [self displayContactSyncConflictsAlertCompletionBlock:^{

                }];
            }];
        }];
    }];

} else if (calendarSyncFailed && contactSyncFailed && facebookSyncFailed) {

    [self displayCalendarSyncAlertCompletionBlock:^{ 

        [self displayContactsSyncAlertCompletionBlock:^{

            [self displayFacebookSyncAlertCompletionBlock:^{

            }];
        }];
    }];

} else if (contactSyncFailed && facebookSyncFailed && contactSyncConflicts) {

    [self displayContactsSyncAlertCompletionBlock:^{

        [self displayFacebookSyncAlertCompletionBlock:^{

            [self displayContactSyncConflictsAlertCompletionBlock:^{

            }];
        }];
    }];

} else if (you get the idea…) {

} 
```

正如您所看到的，处理这 4 个布尔值会有很多不同的组合，我想知道是否有更智能/优雅的编码方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:53:32.637

虽然我确实同意 demosten 最好只有一条消息，但这就是我用更少的代码来做到这一点的方法：

1.  使用可变数组作为存储警报视图的属性。

2.  在您测试条件的方法中，为每个评估为真的失败创建一个警报视图，并将它们按所需顺序放入您的数组中。（这是关键部分，因为您只进行 4 次测试，而不是 2^4 - 1 次测试）。

3.  实现这样的`UIAlertViewDelegate`方法`alertView: didDismissWithButtonIndex:`：

```
 -(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSInteger nextIndex = [self.alertViews indexOfObject:alertView] + 1;
    if (nextIndex < [self.alertViews count]){
    UIAlertView *next = [self.alertViews objectAtIndex: nextIndex];
        [next show];
    }
} 
```

# php - 在 PHP 中为数组设置定义的随机顺序

> ID：13989527
> 
> 赞同：5
> 
> 时间：2012-12-21T11:41:57.867
> 
> 标签：php, arrays, random, shuffle

我在 PHP 中有一个包含 1000 多个键的数组，我想对其进行随机化。我目前正在使用洗牌来做到这一点，但是我希望洗牌的顺序每次都相同。因此，每次运行脚本时，随机但总是以相同的随机顺序。

这是一个客户请求:)。随机化，但每次都保持相同的随机顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:44:18.407

先调用`srand(int seed)`，用常量。例如`srand(123)`。

# google-chrome - Google Web Fonts 和其他字体在 Firefox 中显得粗体且锯齿状

> ID：13989530
> 
> 赞同：3
> 
> 时间：2012-12-21T11:41:59.967
> 
> 标签：google-chrome, firefox, fonts, bold

我在我的网站上使用“Yanone Kaffeesatz”、“Futura”和其他几种字体。它们在 Chrome Canary 中看起来很棒，但在 Firefox 中却很糟糕……锯齿状且奇怪的粗体。如此“大胆”，事实上，它使一些较小的文本难以阅读。它们在 Safari 中也能很好地显示。

这是一个截图：http: [//i.stack.imgur.com/2yM7c.jpg](http://i.stack.imgur.com/2yM7c.jpg)

我将字体权重设置为“400”（我也尝试过“正常”）并设置了“-webkit-font-smoothing: antialiased”。两种浏览器都是最新的。似乎没有任何帮助。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:06:46.747

从您的屏幕截图来看，Firefox 版本似乎根本不支持 Retina。因此，您的问题与字体无关。我不知道较新的 Firefox 是否已经包含对 Retina 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:49:47.310

好消息！问题似乎是由于 Firefox 17 不支持视网膜显示器。

我已经下载了 Firefox 18（感谢 Fitoschido！），这里是文本的更新视图：http: [//imgur.com/ZN9A49q](http://imgur.com/ZN9A49q)

Firefox 中的文字看起来还是有点粗，但总体上好多了！:)

# android - 需要在我的应用中加入谷歌地图和它的一些服务

> ID：13989531
> 
> 赞同：1
> 
> 时间：2012-12-21T11:42:03.117
> 
> 标签：android, google-maps

我正在开发一个应用程序，它需要能够显示我的位置，显示我选择的两点之间的路线，显示附近的地方，如餐馆和咖啡馆等，还应该让我在任何我想要的地方办理登机手续。更简单地说，我需要一个较小版本的谷歌地图用于我的 android 应用程序，其中包含地图、本地、签到和导航功能。

我进行了很多搜索，几乎没有发现任何有用的东西可以告诉我我是否能够做这些事情？我只想在我的应用程序中显示具有相同布局和图形等的较小版本的 Google 地图（包括本地、导航和签到功能）。可能吗？如果是，那么有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:12:00.853

我以前发现这非常有用。 [http://code.google.com/p/android-protips-location/](http://code.google.com/p/android-protips-location/)

但是，请注意，谷歌最近升级了他们的 android map api，我不确定他们是否更新了这个应用程序以匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:19:40.587

您将需要做几件事。

首先，要合并 Google 地图，您可以[在此处](https://developers.google.com/maps/documentation/android/)获得完整的参考资料。

简单的步骤：

1 按照[此处](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)的步骤操作：这将有助于在您的屏幕上添加一个简单的谷歌地图。

2 为了能够获取您自己的位置，您需要在 android 中使用 LocationListener 和 LocationManager。为此，首先在您的活动中**实现**LocationListener。

`public class LocationActivity extends Activity implements LocationListener`

3 然后你需要在你的 onCreate() 方法中实例化一些设置

```
 @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the provider
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      onLocationChanged(location);
    } 
  } 
```

4 您需要能够请求定期位置更新。将此包含在您的 onResume() 方法中。

```
@Override
  protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
  } 
```

5 如果应用程序进入暂停周期，则不需要进行这些更新。

```
@Override
  protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
  } 
```

6 步骤 2 中的位置监听器实现要求您有一个 onLocationChanged 监听器，实现它：

```
@Override   
public void onLocationChanged(Location location) {
int lat = (int) (location.getLatitude());
int lng = (int) (location.getLongitude());
} 
```

7 添加这两种方法以通知您的位置设置提供商 - GPS 或网络。

```
public void onProviderDisabled(String arg0) {
    Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
}

public void onProviderEnabled(String arg0) {
    Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();
} 
```

8 现在我们需要将其链接到您的谷歌地图。我将向您展示一个使用 google maps API 生成市场以显示您当前位置的示例。其他用法可以从 API 中推断出来。

首先在您的代码中创建私有字段：

```
private GoogleMap mMap;
Marker m; 
```

9 在您的 onCreate 方法中添加这些 - 这会将您的默认标记位置实例化为 0,0 纬度和经度。

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
m = mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0))
                .title("Position")); 
```

10 在您的 onLocationChanged 方法中，我们需要在位置更改时刷新此标记。所以添加：

```
m.setPosition(new LatLng(lat, lng));
m.setTitle("Your Position");

// Move the camera instantly to marker with a zoom
// of 15.
                            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(lat, lng), 15)); 
```

这将是一种使用您的位置更新标记的简单方法，并且应该是您在 android 中的 Google 地图和位置 API 的一个很好的介绍。

# css - 无法使用 CSS 修复我的标题

> ID：13989532
> 
> 赞同：0
> 
> 时间：2012-12-21T11:42:05.067
> 
> 标签：css, html, dreamweaver

我正在使用 HTML 来构建我的网站。我的问题是我不能把我的标志放在我的页面的右边我已经通过改变边距尝试了很多但我不能，现在**我的标志在****我们的空间**这句话的顶部

 **我想要的是：

**英语 法语 我们的空间形象LOGO**

我的html是：

```
<div id="header">

 <div >
            <img class="imgPosition"  src="images/MyLogo.jpg" alt=""/>
            <a href="index.html" class="logo"> <h1><span>Our Space </span></h1></a>

             <span><a href="HomeFrench.html" class="logolang1">French</a> <a href="HomeEnglish.html" class="logolang2">English</a></span>
</div>
</div>

#header div .imgPosition{
    alignment-adjust:middle;
    margin: 0 0 0 650px;
    height: 60px;
    width:100;
}
#header div .logo{
    color: #fff;
    /*display: block;*/
    float:right;
    margin: 0 0 0px -600px ;
    padding: 0 0 0 0px;
    text-decoration: none;
}
#header div .logolang1 {
    color: #fff;
    display: block;
    float:left;
    margin: 0 0 0 -700px ;
    padding: 0 0 0 0px;
    text-decoration: none;
}
#header div .logolang2 {
    color: #fff;
    display: block;
    float:left;
    margin: 0 0 0 -750px ;
    padding: 0 0 0 0px;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:10:29.247

要在右侧对齐图像，请执行以下操作：

```
 <div class="image"><img class="imgPosition"  src="http://vectips.com/wp-content/themes/Vectips/images/vectips_logo.png" alt=""/></div> 
```

这应该可以解决您的问题。然后根据您的需要放置**边距**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:10:37.207

如果您想将徽标放在右侧，只需更改

```
alignment-adjust:middle; 
```

到

```
float : right; 
```

或者您可以将徽标设为背景：

```
#header{
 background : url('images/myLogo.jpg') right no-repeat;
} 
```**

# vba - Excel VBA 输入框范围选择按钮

> ID：13989539
> 
> 赞同：4
> 
> 时间：2012-12-21T11:42:25.620
> 
> 标签：vba, excel

行。所以我在一定程度上熟悉 VBA 中的 InputBox。我知道`Type:=8`选择范围的要求。我的代码运行良好，允许我做我想做的事。

这是它的样子： ![在此处输入图像描述](../Images/01264e0b211282d36c79832d097a8760.png)

但是，我想生成与 Exel 本身在选择范围时生成的相同类型的输入框。

![在此处输入图像描述](../Images/2d7c74d67ab91be39a80a6836c0d827e.png)

我一直在搜索各种在线资源，唯一一次又一次出现的就是`Type:=8`需要使用。MS 帮助也没有太大帮助。

为了完整起见，这是我的代码：

```
Dim SelRng1 As Range
Dim SelRng2 As Range

Set SelRng1 = Application.InputBox(Prompt:="Please select the first table (headers included)", Title:="Select Table 1", Type:=8)
Set SelRng2 = Application.InputBox(Prompt:="Please select the second table (headers included)", Title:="Select Table 1", Type:=8) 
```

有人知道怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:59:38.340

您必须创建自己的表单并将[控件`RefEdit`放在上面](http://support.microsoft.com/kb/213776)。

# jquery - 用于搜索过滤器的 Jquery 单选按钮

> ID：13989540
> 
> 赞同：0
> 
> 时间：2012-12-21T11:42:29.917
> 
> 标签：jquery, html

有人可以帮我吗...我正在考虑使用[http://tympanus.net/Tutorials/UIElements/SearchBox/](http://tympanus.net/Tutorials/UIElements/SearchBox/)上的一个功能，但它使用复选框而不是收音机。我希望下拉菜单显示 4 个单选按钮，并且用户应该只能选择一个选项。我尝试了多种选择，但都不起作用。我将使用最新的 jquery -- 1.8

我尝试使用 prop、attr 并阅读论坛但没有帮助。您的知识将不胜感激。

我的html在下面

```
 <div class="content">
        <h1>UI Elements</h1>
        <div class="box">
            <h2>Search Box with Filter Demo</h2>
            <form id="ui_element" class="sb_wrapper">
                <p>
                    <span class="sb_down"></span>
                    <input class="sb_input" type="text"/>
                    <input class="sb_search" type="submit" value=""/>
                </p>
                <ul class="sb_dropdown" style="display:none;">
                    <li class="sb_filter">Filter your search</li>
                    <li><input type="radio"/><label for="all"><strong>All Categories</strong></label></li>
                    <li><input type="radio"/><label for="Automotive">Automotive</label></li>
                    <li><input type="radio"/><label for="Baby">Baby</label></li>
                    <li><input type="radio"/><label for="Beauty">Beautys</label></li>

                </ul>
            </form>
        </div>
    </div>
    <div>
    </div> 
```

原始脚本如下 -

```
 $(function() {
            /**
            * the element
            */
            var $ui         = $('#ui_element');

            /**
            * on focus and on click display the dropdown, 
            * and change the arrow image
            */
            $ui.find('.sb_input').bind('focus click',function(){
                $ui.find('.sb_down')
                   .addClass('sb_up')
                   .removeClass('sb_down')
                   .andSelf()
                   .find('.sb_dropdown')
                   .show();
            });

            /**
            * on mouse leave hide the dropdown, 
            * and change the arrow image
            */
            $ui.bind('mouseleave',function(){
                $ui.find('.sb_up')
                   .addClass('sb_down')
                   .removeClass('sb_up')
                   .andSelf()
                   .find('.sb_dropdown')
                   .hide();
            });

            /**
            * selecting all checkboxes
            */
            $ui.find('.sb_dropdown').find('label[for="all"]').prev().bind('click',function(){
                $(this).parent().siblings().find(':checkbox').attr('checked',this.checked).attr('disabled',this.checked);
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:44:48.060

您需要为所有收音机指定相同的名称，以便只能选择其中一个。

```
<input name="foo" type="radio" />
<input name="foo" type="radio" />
<input name="foo" type="radio" />
<input name="foo" type="radio" /> 
```

# linux - 为什么进程在 Linux 内核中忙循环时被剥夺 CPU 时间过长？

> ID：13989542
> 
> 赞同：11
> 
> 时间：2012-12-21T11:42:44.513
> 
> 标签：linux, linux-kernel, operating-system, kernel, kernel-module

乍一看，我的问题可能看起来有点微不足道。请耐心等待并完整阅读。

我在我的 Linux 内核模块中发现了一个繁忙的循环。因此，其他进程（例如 sshd）在很长一段时间内（如 20 秒）都无法获得 CPU 时间。这是可以理解的，因为我的机器只有一个 CPU，并且繁忙的循环没有机会安排其他进程。

只是为了试验，我在繁忙循环中的每次迭代之后都添加了 schedule() 。即使这会使 CPU 保持忙碌，它仍然应该让其他进程在我调用 schedule() 时运行。但是，这似乎并没有发生。我的用户级进程仍然挂起很长一段时间（20 秒）。

在这种情况下，内核线程得到了nice值-5，用户级线程得到了nice值0。即使用户级线程的优先级很低，我认为20秒也太长了，无法获得CPU。

有人可以解释为什么会发生这种情况吗？

注意：我知道如何完全删除繁忙循环。但是，我想在这里了解内核的行为。内核版本为 2.6.18，内核抢占已禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:34:48.723

该`schedule()`函数只是调用调度程序——它不采取任何特殊措施来安排调用线程将被另一个线程替换。如果当前线程仍然是运行队列中最高优先级的线程，那么调度程序将再次选择它。

听起来好像您的内核线程在其繁忙的循环中所做的工作很少，并且`schedule()`每次都在调用。因此，它本身可能并没有使用太多的 CPU 时间，因此它的优先级并没有降低太多。负的 nice 值比正的值更重要，因此 -5 和 0 之间的差异非常明显。这两种效果的结合意味着我对用户空间进程的遗漏并不感到惊讶。

作为一个实验，您可以尝试在循环的第 N 次迭代中调用调度程序（您必须尝试为您的平台找到一个好的 N 值）并查看情况是否更好 - 调用`schedule()`过于频繁只会浪费大量 CPU调度程序中的时间。当然，这只是一个实验——正如您已经指出的那样，避免繁忙循环是生产代码中的正确选项，如果您想确保您的线程被另一个线程替换，那么`TASK_INTERRUPTIBLE`在调用`schedule()`远程本身之前将其设置为从运行队列中（正如评论中已经提到的）。

请注意，您的内核（2.6.18）正在使用 O(1) 调度程序，该调度程序在 2.6.23 中添加[完全公平调度程序](http://en.wikipedia.org/wiki/Completely_Fair_Scheduler)之前一直存在（在 2.6 中添加了 O(1) 调度程序以替换更旧的[O(n ）调度程序](http://en.wikipedia.org/wiki/O%28n%29_scheduler)）。CFS 不使用运行队列并且以不同的方式工作，因此您可能会看到不同的行为 - 但是我不太熟悉它，所以我不想准确预测您会看到什么差异。我已经看够了，知道“完全公平”不是我在具有大量内核和进程的重负载 SMP 系统上使用的术语，但我也接受编写调度程序是一个非常棘手的问题任务，这远非我见过的最糟糕的，而且我

# grails - 当前应用程序中不存在控制器时如何使用过滤器重定向到外部 url

> ID：13989558
> 
> 赞同：1
> 
> 时间：2012-12-21T11:44:08.250
> 
> 标签：grails, redirect

我在 app1 中有以下过滤器，它应该重定向到外部应用程序（app2）。

```
class MyFilters {
    def userService
    def springSecurityService

    def filters = {
        all(controller: '*', action: '*') {
            before = {
                String userAgent = request.getHeader('User-Agent')

                int buildVersion = 0

                // Match "app-/{version}" where {version} is the build number
                def matcher = userAgent =~ "(?i)app(?:-\\w+)?\\/(\\d+)"

                if (matcher.getCount() > 0)
                {                   
                    buildVersion = Integer.parseInt(matcher[0][1])

                    log.info("User agent is from a mobile with build version = " + buildVersion)
                    log.info("User agent = " + userAgent)

                    String redirectUrl = "https://anotherdomain.com"

                    if (buildVersion > 12)
                    {
                        if (request.queryString != null)
                        {
                            log.info("Redirecting request to anotherdomain with query string")
                            redirect(url:"${redirectUrl}${request.forwardURI}?${request.queryString}",params:params)
                        }

                        return false
                    }
                }
            }
            after = { model ->
                if (model) {
                    model['currentUser'] = userService.currentUser
                }
            }
            afterView = {

            }
        }
    }

} 
```

当对 app1 的请求包含控制器名称在 app1 中不存在的 URI（但在我想要重定向到的 app2 中存在）时，就会出现问题。

如何将请求重定向到附加相同 URI 的 app2？（无论它们是否存在于 app1 中）。

我怀疑过滤器不是正确的解决方案，因为如果应用程序中不存在控制器，它将永远不会进入它们。

理想情况下，我需要一个可以通过代码而不是 apache 实现的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:54:39.150

像这样定义一个通用的重定向控制器：

```
class RedirectController {

def index() {
        redirect(url: "https://anotherdomain.com")
    }
} 
```

在 UrlMappings 中，将 404 指向此控制器：

```
class UrlMappings {

    static mappings = {
        ......
        "404"(controller:'redirect', action:'index')
            ......
    }
} 
```

实际上你可以在这里定义所有的重定向关系而不是处理过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:20:02.687

您可以通过 URI 以及控制器名称[设置过滤器的范围，尝试：](http://grails.org/doc/1.3.7/guide/6.%20The%20Web%20Layer.html#6.6.1%20Applying%20Filters)

```
def filters = {
    all(uri:'/**') { 
```

# java - Tomcat服务器中奇怪的间歇性字符编码行为

> ID：13989559
> 
> 赞同：1
> 
> 时间：2012-12-21T11:44:14.740
> 
> 标签：java, tomcat, encoding, character, intermittent

在我们的生产环境中，我们时常会遇到一个非常奇怪的 Tomcat 编码问题。

我还不能准确指出问题发生在代码中的哪个位置，但它涉及将非 ascii 字符替换为近似的 ascii 字符。

例如，将字符 'å' 替换为 'a'。由于该站点是瑞典语，因此字符“å”、“ä”和“ö”很常见。但是由于某种原因，替换 'ö' 字符总是有效的，所以像“Köp inte grisen i säcken”这样的字符串变成了“Kop inte grisen i säcken”，即 'ä' 没有被替换，而 ' ö' 字符是。

关于这个问题的一些快速事实：

*   它很少发生（我们已经注意到它 3-4 次，第一次可能是 1-2 年前）。

*   重新启动有问题的服务器会使问题消失（直到下一次）。

*   它从来没有同时发生在一个以上的前端服务器上。

*   它并不总是发生在同一个前端服务器上。

*   不涉及前端的用户输入。

*   所有前端服务器都连接到相同的 CMS 和 DB，相关配置相同。

*   所有前端服务器都具有相同的相关配置（linux 配置、tomcat 配置、java 环境配置，如“file.encoding”等），并使用相同的脚本启动（全部根据托管/服务提供商）。

*   所有前端服务器都使用相同的站点战争文件和相同的 jar 文件。

*   发生此字符替换问题时，在站点上看不到其他编码问题。

*   我们从未能够在任何其他环境中重现该问题。

由于 CMS 要求，我们使用 Tomcat 5.5 和 Java 5。

对于这种行为，我只能想到两个可能的原因：

1.  托管服务提供商有时会以不同的方式启动/重新启动前端服务器，可能是使用具有其他环境变量或其他文件访问权限的另一个用户帐户，或者可能使用不同于正常脚本的其他脚本。

2.  在 Tomcat 或 webapp 启动期间运行的某些进程依赖于其他进程，有时（间歇但很少）这两个（或更多）进程碰巧以导致此编码缺陷的顺序运行。

但即使上面的 1 或 2 是这种情况，它仍然不能完全解释真正发生的事情。有什么确切的区别可以解释这一点？由于所有“file.encoding”、“file.encoding.pkg”、“sun.io.unicode.encoding”、“sun.jnu.encoding”和所有其他相关环境变量在所有前端机器上都匹配（使用视觉验证调试页面，而问题正在发生）。

有人可以为这种奇怪的间歇性行为想出一些合理的解释吗？简单地升级 Tomcat 和/或 Java 版本并不是一个真正相关的答案，因为我们真的不知道这是否能解决问题，它仍然不能解释问题是什么。我更感兴趣的是确切地了解问题是由什么引起的。

问候/吉米

***更新：***

我想我找到了执行字符替换的代码。在初始化时（由第一次调用来进行替换）它构建一个 HashMap<Character, String>，并像这样填充它：

```
lookup.put(new Character('å'), "a"); 
```

然后，当它应该替换字符串的字符时，它会遍历每个字符，并以字符为键在哈希映射中查找每个字符，如果找到替换字符串，则使用它，否则使用原始字符.

这部分代码已经有 3 年多的历史了，并且是由一个早已不复存在的开发人员编写的。如果我今天重写这段代码，我会做一些完全不同的事情，这甚至可以解决问题。但它仍然无法准确解释发生了什么。有人可以看到一些可能的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:58:35.500

在进行替换之前，将输入规范化为正常的 Form C。

例如，`ä`可以只有 1 个字符[U+00E4](http://www.fileformat.info/info/unicode/char/e4/index.htm)，也可以是两个字符`a`( [U+0061](http://www.fileformat.info/info/unicode/char/0061/index.htm) ) 和组合分音符[U+0308](http://www.fileformat.info/info/unicode/char/0308/index.htm)。

如果您的替换只是寻找组合形式，那么分解的形式仍将保持不变，`\u0061\u0308`因为这些都不匹配`\u00e4`：

```
public static void main(String args[]) {
    String decomposed = "\u0061\u0308";
    String composed = "\u00e4";

    System.out.println(decomposed);
    System.out.println(composed);
    System.out.println(composed.equals(decomposed));
    System.out.println(Normalizer
            .normalize(decomposed, Normalizer.Form.NFC).equals(composed));

} 
```

输出

```
ä
ä
false
true 
```

# javascript - 如何定位另一个元素下的元素？

> ID：13989560
> 
> 赞同：1
> 
> 时间：2012-12-21T11:44:13.563
> 
> 标签：javascript, jquery, html, css, jquery-selectors

我可以单击一个按钮（按钮 A）并使用一些 jquery 使图像在此按钮上的完全相同位置（位置：绝对）可见。

看到这个[小提琴](http://jsfiddle.net/Vinyl/eCCR6/)

我想再次单击此按钮（按钮 A）以隐藏图像，但我不知道如何隐藏图像，因为图像位于按钮上方。

我找到了其他解决方案（更多 jquery 或使用不可见的图像按钮），但我想找到一种更优雅的方式。

如何定位图像下方的按钮？

jQuery代码：

```
$(document).ready(function() {
    $('#button').css('cursor', 'pointer');
    $('#button').click(function() {
        if ($('#image_1').css('visibility') == 'hidden') {
            $('#image_1').css('visibility', 'visible');
        } else {
            $('#image_1').css('visibility', 'hidden');
        }
    });
}); 
```

CSS：

```
#button
{
    width:100px;
    background-color:#666666;
    height:25px;
    position:absolute;
    left:10px;
    top:10px;
}

#image_1
{
    width:100px;
    background-color:#666666;
    height:25px;
    position:absolute;
    left:10px;
    top:10px;
    visibility:hidden;
} 
```

html

```
<div id=main>
    <div id="button">
    </div>
    <div id="image_1">Hello World!
    </div>
</div><!-- main --> 
```

@closure @Justin John @Jai @Robz @Adam @Happy Singh @Ross Dargan @Wouter de Kort @Viral Patel @Ruben Stolk 谢谢你所有有趣的回答。很难选择，因为有一些非常好的。我选择了亚当的答案，因为它是最简单的（只是使用 toglle jQuery 和一个 css 类）。如果您认为您的答案更好，请在此处发表您的论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:48:51.777

请参阅小提琴[http://jsfiddle.net/eCCR6/2/](http://jsfiddle.net/eCCR6/2/)。

我已经创建了这样的函数，并绑定到两者：

```
function clickFn() {
    if ($('#image_1').css('visibility') == 'hidden') {
        $('#image_1').css('visibility', 'visible');
    } else {
        $('#image_1').css('visibility', 'hidden');
    }
} 
```

另一个模型是将您的事件绑定到父 div `main`。

见小提琴[http://jsfiddle.net/eCCR6/18/](http://jsfiddle.net/eCCR6/18/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:49:35.427

怎么样：

```
$(document).ready(function() {
    $('#button').css('cursor', 'pointer');
    $('#button').click(function() {
        $('#image_1').show();
    });

    $('#image_1').click(function() {
       $(this).hide();
    });
});​ 
```

检查这个演示：http: [//jsfiddle.net/viralpatel/R5MVD/1/](http://jsfiddle.net/viralpatel/R5MVD/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:51:21.793

将图像 div 放在按钮 div 中更容易。您还可以使用 jQuery 切换功能来显示/隐藏图像。

```
<div id=main>
    <div id="button">
       <div id="image_1">Hello World!
       </div>    
    </div>
</div><!-- main -->    ​

$(document).ready(function() {
    $('#button').css('cursor', 'pointer');
    $('#button').click(function() {
        $('#image_1').toggle();
    })
});​ 
```

这是一个显示它的小提琴：http: [//jsfiddle.net/jBaWN/2/](http://jsfiddle.net/jBaWN/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T11:51:22.333

这个小提琴展示了它是如何轻松完成的：http: [//jsfiddle.net/33aus/1/](http://jsfiddle.net/33aus/1/)

请注意，我将图像的 css 更改为 display:none。

```
$(document).ready(function() {
    $('#button').css('cursor', 'pointer');
    $('#button').click(toggleVisiblity);
    $('#image_1').click(toggleVisiblity);
});
function toggleVisiblity()
{    
    $('#button').toggle();
    $('#image_1').toggle();
}​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T11:51:44.603

请参阅更新的小提琴[http://jsfiddle.net/eCCR6/8/](http://jsfiddle.net/eCCR6/8/)

```
$(document).ready(function() {
    $('#button').css('cursor', 'pointer');
    $('#button').click(function() {
        if ($('#image_1').css('visibility') == 'hidden') {
            $('#image_1').css('visibility', 'visible');
        }
    });
    $('#image_1').click(function() {
        if ($('#image_1').css('visibility') == 'visible') {
            $('#image_1').css('visibility', 'hidden');
        }
    });

}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T11:53:04.743

我通过将类添加到它们两者来将点击事件绑定到两者`#button`；当您单击任一时，它将显示/隐藏图像。`#image``button`

此外，如果您使用 jQuery 的[toggle()](http://api.jquery.com/toggle/)`display: none`代替，则可以节省几行代码。`visibility: hidden`

看[小提琴](http://jsfiddle.net/eCCR6/5/)

```
$(document).ready(function() {
    $('.button').click(function() {
        $('#image_1').toggle();
    });
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-21T11:56:36.383

只需将您的javascript更改为

```
$(document).ready(function() {
$('#button').css('cursor', 'pointer');
$('#button').click(function() {
    if ($('#image_1').css('visibility') == 'hidden') {
        $('#image_1').css('visibility', 'visible');
    } else {
        $('#image_1').css('visibility', 'hidden');
    }
});
$('#image_1').click(function(){
          $('#image_1').css('visibility', 'hidden');
});

}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-21T11:59:47.787

我认为您必须在`img 1`尝试此操作时触发 mousedown 按钮：

```
 $(document).ready(function() {
    $('#button').css('cursor', 'pointer');
    $('#button').click(function() {
        if ($('#image_1').css('visibility') == 'hidden') {
            $('#image_1').css('visibility', 'visible');
        } else if ($('#image_1').css('visibility') == 'visible') {
            $('#image_1').css('visibility', 'hidden');
        }

        $('#image_1').mousedown(function(){
           $('#button').click();
        });
    });
}); 
```

在这里，我们已经完成了 1 else if 检查并触发按钮单击 mousedown 事件`#image_1`。

签出小提琴：http: [//jsfiddle.net/eCCR6/16/](http://jsfiddle.net/eCCR6/16/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-21T12:01:10.983

您也可以在[fiddle](http://jsfiddle.net/eCCR6/17/)中像这样组合两个选择器。

```
$('#button, #image_1').click(function() {
 // Your code 
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-21T11:47:39.657

使用 jquery .prev() 或 .next() 函数

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-24T05:43:27.430

`pointer-events`您可以使用CSS 属性使图像对点击不响应，而不是使图像响应单击（当图像下方有多个按钮时，这不起作用） 。它看起来像这样：

```
#image_1
{
  pointer-events: none;
} 
```

见小提琴：http: [//jsfiddle.net/eCCR6/31/](http://jsfiddle.net/eCCR6/31/)

这将导致点击通过图像直接传递到下面的按钮。

这种方法的缺点是图像不再响应鼠标移动，但在这种情况下，没关系。

# sql - 使用 SQL 查找缺失的日期

> ID：13989561
> 
> 赞同：3
> 
> 时间：2012-12-21T11:44:14.157
> 
> 标签：sql, oracle

作为示例日期，我在两年内的表格中有一些日期

```
01-jan-2012
02-jan-2012
04-jan-2012
05-jan-2012
06-jan-2012
07-jan-2012
09-jan-2012
11-jan-2012
.
.
.
01-DEC-2012 
```

我想你已经注意到所有日期都缺少日期`03-jan-2012`和`08-jan-2012`相同的标准。我的问题是甲骨文有什么方法可以找到缺少的日期。请帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:54:26.773

这将使您失去一年的所有日子（[SQL Fiddle](http://sqlfiddle.com/#!4/3d769/98)）。

`all_dates`生成 2012 年所有日期的列表（根据需要进行调整），并且`LEFT JOIN`检查`IS NULL`会消除源表中存在的那些日期。

```
WITH all_dates AS (
  SELECT TO_DATE('01-jan-2012') + ROWNUM - 1 AS d
  FROM dual
  CONNECT BY ROWNUM <= ADD_MONTHS(TO_DATE('01-jan-2012'), 12 ) - TO_DATE('01-jan-2012')
)
SELECT all_dates.d
FROM all_dates
LEFT JOIN t ON ( t.d = all_dates.d )
WHERE t.d IS NULL
ORDER BY all_dates.d
; 
```

确保使用绑定变量而不是对日期进行三次硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:50:01.787

您可以生成所需的日期范围序列，然后使用 LEFT JOIN 查找错过的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-31T10:19:33.090

与@Peter 的答案几乎相同，但版本略有不同。

```
select all_dates.date_ missing_dates from 

(select to_date('01-Jan-14') + level - 1 date_
from dual connect by level <= 365) all_dates 

left join

((select to_date('01-Jan-14') + level - 1 date_
from dual connect by level <= 365)               

minus

(select to_date(round (dbms_random.value (1, 28))
        || '-'
        || round (dbms_random.value (01, 12))
        || '-'
        || round (dbms_random.value (2014, 2014)),
        'DD-MM-YYYY') + level - 1 random_date_1 
from dual
connect by level <= 52)) transaction_data

on all_dates.date_ = transaction_data.date_
where transaction_data.date_ is null; 
```

# wpf - 带有由基元组成的图标的样式复选框在触发器上未完全呈现，在 Blend 中工作正常

> ID：13989564
> 
> 赞同：0
> 
> 时间：2012-12-21T11:44:21.153
> 
> 标签：wpf, wpf-controls

我有一个锁定/解锁的挂锁图标，实现为带有一些绘图原语的复选框，这些原语由 IsChecked 上的触发器更改。它在 Blend 中运行良好。在 VS2010 和内置应用程序中，当挂锁从默认打开状态切换到关闭状态时，挂锁主体会消失，因此只有关闭的“箍”可见。箍在正确的位置 - 它确实移动，因此控件似乎确实切换了画布。切换回来时，身体再次出现。有没有人遇到过类似的/知道会发生什么？

模板；

```
<Canvas x:Key="PadlockClosed" Width="21" Height="21">
    <Path Data="M10.668887,13.83234 C10.168442,2.3320701 20.347726,0.31172793 21.014875,13.894838" Height="9.451" Canvas.Left="2.719" Stretch="Fill" Canvas.Top="0.162" Width="10.362" StrokeThickness="2" Stroke="#FFE2E2E2"/>
    <ContentPresenter Content="{DynamicResource PadlockBody}"/>
</Canvas>

<Canvas x:Key="PadlockOpen" Width="21" Height="21">
    <Path Data="M10.668887,13.83234 C10.168442,2.3320701 20.347726,0.31172793 21.014875,13.894838" Height="9.451" Canvas.Left="11.102" Stretch="Fill" Canvas.Top="0.162" Width="10.362" StrokeThickness="2" Stroke="#FFE2E2E2"/>
    <ContentPresenter Content="{DynamicResource PadlockBody}"/>
</Canvas>

    <Canvas x:Key="PadlockBody">
        <Rectangle Height="12.8" Canvas.Left="0.125" Canvas.Top="8.0" Width="15.082" RadiusX="4" RadiusY="4" RenderTransformOrigin="0.704,0.5">
            <Rectangle.Fill>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <LinearGradientBrush.RelativeTransform>
                        <TransformGroup>
                            <ScaleTransform CenterY="0.5" CenterX="0.5"/>
                            <SkewTransform CenterY="0.5" CenterX="0.5"/>
                            <RotateTransform Angle="-90" CenterY="0.5" CenterX="0.5"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </LinearGradientBrush.RelativeTransform>
                    <GradientStop Color="#FF8B8989" Offset="0"/>
                    <GradientStop Color="White" Offset="1"/>
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>
        <Path Data="M15.1,16.333333 L15.1,19.750334" Height="5.417" Canvas.Left="6.375" Stretch="Fill" Stroke="Black" StrokeThickness="1" StrokeEndLineCap="Round" Canvas.Top="11.333" Width="2.167"/>
        <Ellipse Height="2.5" Canvas.Left="6.125" Canvas.Top="11.333" Width="2.584" Fill="#FF0A0101"/>
    </Canvas> 
```

我用来测试的东西；

```
<CheckBox Template="{DynamicResource PadlockCheckBox}" Width="20" Height="20" IsChecked="True"/> 
```

资源是动态的唯一原因是为了简化 Blend。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:09:40.073

似乎没有其他人有更好的答案，所以虽然有点蹩脚，但我会发布我发现的解决方法。我没有在 PadlockOpen 和 PadlockClosed 画布中重新使用 PadlockBody，而是将其复制以创建 PadlockBody2，并在其中一种情况下使用它。出于某种奇怪的原因，在同一控件模板中的两种情况下使用相同的画布资源似乎会在构建的应用程序中搞砸，即使它在 Blend 中运行良好。

# vb6 - 在 With 语句中引用原始对象

> ID：13989567
> 
> 赞同：3
> 
> 时间：2012-12-21T11:44:35.497
> 
> 标签：vb6, with-statement

我知道我可以使用`With`语句对单个对象进行重复引用：

```
With myObj
  .StringProperty = ""
  .BooleanProperty = False
End With 
```

但是，我想知道的是：是否有在`With`语句中引用原始对象的简写？在上面的例子中，我可以在`myObj`没有明确输入的情况下引用它，`myObj`因为我已经在使用它了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:27:08.170

不，你不能，但无论如何这并不意味着什么。 `With`只需将默认范围设置为其后面的对象表达式。如果您需要对该对象的引用，这将无济于事，除非该对象是极少数具有 .Self 属性的对象之一，这非常罕见。

# android - AIDL 使用 SDK 工具版本 21 生成的文件编译错误

> ID：13989572
> 
> 赞同：2
> 
> 时间：2012-12-21T11:44:55.587
> 
> 标签：android, aidl

我将 Android SDK 工具升级到版本 21（以及随后的 21.0.1），现在从我的aidl 文件生成的所有文件都包含与插入到某些生成的函数中的不正确的@Override 关键字相关的编译错误。例如

```
@Override
public android.os.IBinder asBinder()
{
return this;
} 
```

我将在答案中发布我的解决方法，艾丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T00:58:08.317

您真正的问题很可能是您在 Eclipse 中的项目（或工作区）没有设置为针对 Java 1.6 验证 Java 代码。`@Override`Java 1.5 不支持为接口实现的方法的数量，但 Java 1.6 支持。修改您的项目（或工作区）属性，以便 Java 验证适用于 1.6，并且生成的`@Override`注释应该没问题。

# php - Yii：使用 CActiveRecord 缓存时的新数据库连接

> ID：13989576
> 
> 赞同：2
> 
> 时间：2012-12-21T11:45:08.900
> 
> 标签：php, caching, model, yii

我将缓存`CActiveRecord`用作：

```
$myoboject = ListModel::model()->cache(60)->findAll(); 
```

根据文档，它将结果集缓存 60 秒。

我想问一下，如果另一个请求会在 60 秒内到来，它会打开一个新的数据库连接吗？我认为它不应该这样做，而是应该获取缓存的数据。

我遇到这个问题是因为我想避免脚本打开多个数据库连接，并且我想将数据缓存 60 秒，然后它可以失效。

我在正确的轨道上吗？这是正常行为吗？如果有什么问题，有人会告诉我吗？

我使用过 Memcache 和 Sqlite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:58:24.550

根据一些研究、[论坛讨论](http://www.yiiframework.com/forum/index.php/topic/38720-using-cache-in-cactiverecord/page__gopid__186410#entry186410)和分析CDConnection 和CActiveRecord 代码，确认它必须打开一个新连接。所以要么我们编写代码来避免这种情况，要么等待一个特性。直到我们可以通过将数据对象保存到缓存中来使用数据缓存。

# xpages - 如何避免 XSP/Domino 跨站脚本漏洞？

> ID：13989580
> 
> 赞同：2
> 
> 时间：2012-12-21T11:45:35.627
> 
> 标签：xpages

在引用 /xsp/.ibmmodres/XSP/Domino 资源时，似乎可以在 get 请求中注入 javascript。

通常，当您在 .nsf/ 资源中尝试此操作时，您会获得正确的默认或自定义错误页面，而不会出现 XSS 可能性。特殊字符被替换。

示例：- http://[server]/[path]/[dbname].nsf/%3Cscript%3Ealert%28document.cookie%29%3C/script%3E

结果：HTTP Web 服务器：找不到设计元素

但是参考 /xsp/.ibmmodres/ 资源，它会产生 XSS 的可能性。

例子：

*   http://[服务器]/[路径]/[dbname].nsf/xsp/.ibmmmodres/%3Cscript%3Ealert%28document.cookie%29%3C/script%3E

结果：

*   我收到 404 错误页面“无法加载未注册的资源 /”

*   它执行 CSJS 并显示例如 DomAuthSessID ！

这怎么可能？有没有办法避免这种情况？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:56:17.680

这是一篇关于如何避免这种情况的文章：

[http://www.wissel.net/blog/d6plinks/SHWL-8XS3MY](http://www.wissel.net/blog/d6plinks/SHWL-8XS3MY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T00:47:49.007

检查您的 Domino 版本。它应该在 8.5.3 中修复。FP2（不完全确定）（但肯定是 9.0 Beta）。除此之外，[请按照我的说明](http://www.wissel.net/blog/d6plinks/SHWL-8XS3MY)创建一些网络规则：

```
Type of rule: HTTP response headers
Incoming URL pattern: */xsp/.ibmxspres/*
HTTP response codes: 404
Expires header: Don't add header
Custom header: Content-Type : text/plain (overwrite)

Type of rule: HTTP response headers
Incoming URL pattern: */xsp/.ibmmodres/*
HTTP response codes: 404
Expires header: Don't add header
Custom header: Content-Type : text/plain (overwrite) 
```

# excel - Infragistics Excel 工作表读取值而不是参考

> ID：13989584
> 
> 赞同：0
> 
> 时间：2012-12-21T11:45:45.910
> 
> 标签：excel, reference, infragistics

我有一个 Excel 文件（xlsx），其中两个列具有引用值。实际上在单元格中您会看到值，但是当您选择一个单元格时，在公式字段中您会看到一个参考地址。即使没有包含内容的文件，所有值也存在，因为它们被引用。但是 Infragistics Excel 工作表选择了引用，因为它找不到文件，所以它显示 !REF#。如何强制它忽略引用并读取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:27:37.603

这是一个已修复的错误。它应该在 11.1 及更高版本的最新服务版本中工作。如果没有，您的文件以哪种文件格式保存以及您使用的是哪个版本？

# blackberry - 在存在 navigationClick() 的情况下处理 Touch EventListener

> ID：13989585
> 
> 赞同：0
> 
> 时间：2012-12-21T11:45:48.923
> 
> 标签：blackberry, drop-down-menu, tabs

在应用程序中，每当我在标签之间移动一个完整的菜单，复制，切换应用程序弹出打开。 ![这是我在选项卡之间导航时的屏幕截图。 此弹出窗口打开。](../Images/e2eaea4f253508517624fa819a06a9b7.png)

为了防止这种情况，我覆盖了 navigationClick 方法。现在 pop 没有显示。在我的第二个选项卡中，我实现了下拉列表。因为我在单击下拉列表时覆盖了 navigationClick 方法，所以它没有显示项目列表。任何想法都会得到认可。

**更新：**

这是navigationClick的实现：

```
public boolean navigationClick(int status, int time) { 
  return true; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:00:47.390

确保在选择选项卡时没有出现错误，这可能是弹出菜单选项的原因。如果解决了这个问题，我想后续的问题就会解决！

根据我的经验，我观察到当 NullPointerException 事件发生时，菜单会在黑莓中弹出。

只需检查日志或调试以确保在选项卡之间导航时不会发生异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:35:26.203

如果要单击标签字段，则：

```
LabelField labelField=new LabelField("Click")
{
     protected boolean navigationClick(int status, int time) 
     {
         doLabelFieldClicked();
         return true;
     }
} 
```

如果菜单选项被突出显示然后覆盖它：

```
public boolean onMenu(int instance) 
{ 
    return true; //It doesn't show the Menu option.
} 
```

如果我想错了，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:59:38.077

我通过在创建 labellField 时实现 navigationClick() 解决了这个问题

```
tab5 = new LabelField("News", LabelField.FOCUSABLE | LabelField.HIGHLIGHT_SELECT)
{
        public boolean navigationClick(int status, int time)
        {
            return true;
        }
}; 
```

# windows-phone-7 - MPNS发送推送禁止响应403

> ID：13989589
> 
> 赞同：3
> 
> 时间：2012-12-21T11:46:15.417
> 
> 标签：windows-phone-7, httpwebrequest, push-notification, mpns

我想在我的 windows phone 应用程序中使用 MPNS，我们将验证向客户端发送推送的 web 服务。

我已经完成了 MPNS 身份验证所需的所有步骤。

1.  在我的 WindowsPhone 开发仪表板上上传了证书。
2.  使用我的证书的通用名称创建通道名称
3.  使用 https:// 获取返回 URI，这意味着我的推送通道已通过身份验证
4.  将证书添加到我的 WebRequest 标头

但是当我要发送推送消息并发送 webrequest 时，我收到“远程服务器返回错误：（403）禁止。” 回复。我读到我的请求做错了，没有正确添加证书。

这是我的请求标头代码

X509Certificate2 Cert = new X509Certificate2(Server.MapPath("Certs/abc.crt"), "password"); request.ClientCertificates.Add(Cert);

我们有verisign ssl，我正在从我的Visual Studio IIS 中测试它。它现在没有托管在任何服务器上，甚至没有在 IIS 中配置，也没有为 IIS 配置 SSL。

是这个问题还是别的什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T12:06:26.110

您的问题没有唯一的答案。

但是，当您将客户端证书添加到您的请求时，您只需将公钥添加到它。然后，服务器将使用您的公钥签名的质询进行响应（请参阅客户端证书身份验证），您需要使用您的私钥解密并响应它。如果此身份验证过程失败，您将收到 403 禁止。

因此，您必须确保将 .pfx/.p12（包含您的私钥、公共证书、中间 CA 和根 CA 证书）导入到本地计算机证书存储区，并且您的 IIS 服务器可以访问它。

因为有很多与 Windows 相关的变量，所以您可以使用 Curl 代替进行测试。请注意，您必须先将 .pfx/.p12 转换为 .pem（使用 openssl）。

```
curl --cert P:\cert.pem:PASSWORD -v -H "Content-Type:text/xml" -H "X-WindowsPhone-Target:To
ast" -H "X-NotificationClass:2" -X POST -d "<?xml version='1.0' encoding='utf-8'
?><wp:Notification xmlns:wp='WPNotification'><wp:Toast><wp:Text1>My title</wp:Te
xt1><wp:Text2>My subtitle</wp:Text2></wp:Toast></wp:Notification>" https://am3.n
otify.live.net/unthrottledthirdparty/01.00/push_uri_here 
```

一旦你开始工作，你可能会面临和我一样的问题：一些通知被正确发送，而另一些则被无缘无故的 403 禁止被拒绝。看到这个线程：

[http://social.msdn.microsoft.com/Forums/sharepoint/en-US/383617ab-eafe-45fb-92cc-5e4b25a50e7f/authenticated-push-notifications-failing-randomly-403-forbidden?forum=wpnotifications](http://social.msdn.microsoft.com/Forums/sharepoint/en-US/383617ab-eafe-45fb-92cc-5e4b25a50e7f/authenticated-push-notifications-failing-randomly-403-forbidden?forum=wpnotifications)

和这里一样：

[https://stackoverflow.com/questions/23805883/windows-phone-authenticated-push-notifications-failing-randomly-403-forbidden](https://stackoverflow.com/questions/23805883/windows-phone-authenticated-push-notifications-failing-randomly-403-forbidden)

# javascript - 日期选择器上的两位数年份

> ID：13989591
> 
> 赞同：1
> 
> 时间：2012-12-21T11:46:21.623
> 
> 标签：javascript, jquery, datepicker, uidatepicker

这怎么可能在 ui-datepicker 中选择两位数的年份？当我尝试选择 24 年或 79 年时，它返回 1924 或 1979。如何正确选择两位数？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T11:54:08.183

提供日期格式参数：`.datepicker({ dateFormat: 'dd-mm-y' })` （2 位 yeay = y，根据需要调整其余格式）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T12:01:18.030

Datepicker 插件针对这种情况有一个特定的选项 - [shortYearCutoff](http://api.jqueryui.com/datepicker/#option-shortYearCutoff)：

> **短年截止**
> 
> 确定日期世纪的截止年份（与`'y'`dateFormat 结合使用）。任何输入的年份值小于或等于截止年份的日期都被视为当前世纪，而大于它的日期则被视为上世纪。

它的默认值为'+10'（距离当前的十年，所以在2012年，填写的'22'将转换为'2022'，但'23'最终为'1923'）。

您可以在初始化日期选择器时提供 99（最大值），如下所示：

```
$( ".selector" ).datepicker({ shortYearCutoff: 99 }); 
```

... 使所有两个数字的年份都属于当前世纪。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T11:57:45.260

在这种情况下，日期选择器不是很直观。

试试这个文档：

[http://api.jqueryui.com/1.8/datepicker/#option-dateFormat](http://api.jqueryui.com/1.8/datepicker/#option-dateFormat)

将日期格式的年份部分设置为仅 y 而不是 yy

```
$(selector).datepicker({ dateFormat: 'dd.mm.y' }) 
```

[http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-15T15:07:07.913

添加ShortearCutoff选项仅在仅通过按钮激活Picker窗口（'Showon：'button'），用户手动输入带有2位数年的日期，并且需要4位年的日期。

我最终将自己的更改事件附加到输入字段以处理日期格式，示例代码如下所示。

还应注意，在此输入所在的表单上使用和配置了 jquery validate。datepicker 输入上的验证设置被配置为强制执行日期值。datepicker:{date: true} 这与配置为“mm/dd/yy”的 datepicker dateFormat 设置相结合，确保自定义 onchange 事件代码处理能够可靠地工作。

`//datepicker $( "#datepicker" ).attr("placeholder", "mm/dd/yyyy").change(function(){ // get the date value from the input field var d = $(this).val(); // get the last 4 characters of the date value entered var last4 = d.substr(-4); // determine if the last 4 characters contain the character: / if(last4.indexOf('/') > -1){ // yes there is a / character which means a two digit year was provided // store the last two digits from the input string var last2 = ((d.substr(-2))*1); // remove the last two digits from the input string d = d.slice(0,(d.length-2)); // prepend a 19 or 20 to the two digit year given based on a cutOff of 30 if(last2<=30){ d = d+'20'+last2; }else{ d = d+'19'+last2; } } // store/display the properly formated date d = $.datepicker.parseDate('mm/dd/yy', d); $(this).datepicker('setDate', d); }).datepicker({ dateFormat: "mm/dd/yy", shortYearCutoff: 30, buttonImage: 'images/calendar_icon.png', showOn: 'button'
});`

```
Input values | onchange output results
--------------------------------------
07/04/2000   | 07/04/2000 (no change)
7/4/2000     | 07/04/2000
07/04/00     | 07/04/2000
07/4/00      | 07/04/2000
7/4/00       | 07/04/2000
7/4/30       | 07/04/2030
7/4/31       | 07/04/1931
07/04/2031   | 07/04/2031 (no change)
07/04/1931   | 07/04/1931 (no change) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-10T16:52:17.537

不适用于 2000 年的 2 位数字，例如“09”变为“9”，然后注册年份为“209”

这段代码处理它：

```
// get the date value from the input field
var d = $(this).val();
// get the last 4 characters of the date value entered
var last4 = d.substr(-4);
// determine if the last 4 characters contain the character: /
if (last4.indexOf('/') > -1) {
  // yes there is a / character which means a two digit year was provided
  // store the last two digits from the input string
  var last2 = ((d.substr(-2)) * 1);
  // remove the last two digits from the input string
  d = d.slice(0, (d.length - 2));
  // prepend a 19 or 20 to the two digit year given based on a cutOff
  // of 30
  if (last2 <= 30) {
    if (last2 < 10) {
      d = d + '200' + last2;
    } else {
      d = d + '20' + last2;
    }
  } else {
    if (last2 < 10) {
      d = d + '190' + last2;
    } else {
      d = d + '19' + last2;
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T22:12:37.087

上面的修改代码基本上基于当前日期进行缩放，以使用最接近当前年份的年份并处理 1 位数年份并忽略年份的 3 位数：

```
.on("change",function(){
                    var d = $(this).val();
                    var last3 = d.substr(-3);
                    // determine if the last 3 characters contain the character: /
                    if(last3.indexOf('/') > -1){
                        var currentYearStr=(new Date()).getFullYear().toString();
                        var currentCentury=(currentYearStr.substr(0,2)*1);
                        var last2 = (d.substr(-2));
                        // determine if the last 2 characters contain the character: /
                        if(last2.indexOf('/') > -1) {
                            // determine which century, within 50 years of the current year, to prepend and prepend that and decade 0 to the 1 digit year:
                            var last = (d.substr(-1)*1);
                            var yeardiff=(currentYearStr.substr(-2)*1)-last;
                            if (yeardiff>50) currentCentury++;
                            d = d.slice(0,(d.length-1));
                            d = d+currentCentury.toString()+'0'+last;
                        } else {
                            // determine which century, within 50 years of the current year, to prepend and prepend that to the 2-digit year:
                            last2=last2*1;
                            var yeardiff=(currentYearStr.substr(-2)*1)-last2;
                            if (yeardiff>50) currentCentury++;
                            else if (yeardiff<-50) currentCentury--;
                            d = d.slice(0,(d.length-2));
                            d = d+currentCentury.toString()+last2;
                        }
                        // store/display the properly formated date
                        d = $.datepicker.parseDate('mm/dd/yy', d);
                        $(this).datepicker('setDate', d);
                    }
                }); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-21T11:53:51.560

把它放在你的日期选择器初始化中

```
"dateFormat": "yy-mm-dd" 
```

# java - JAVA：如何将gujrati（它的其他语言）字体存储在字符串中？

> ID：13989592
> 
> 赞同：2
> 
> 时间：2012-12-21T11:46:22.747
> 
> 标签：java, string, netbeans-7

我在java中有一个应用程序。

此应用程序包含一个文本框和按钮。

现在我想在按钮的单击事件中将古吉拉特语（其他语言）数据保存到数据库中。

这怎么可能？实际上我这样做了，但我的字符串返回了一些其他格式。所以我不知道如何将 gujrati 数据存储到字符串中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:53:08.997

只要源代码采用 Unicode 定义的编码，例如 UTF-8 或 UTF-16，这在 Java 中有效：

```
String ગઉજ = "ઋઊઘ"; 
```

该部分已解决，您需要指定问题的确切位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:00:51.740

Java 在 Unicode 中工作。[古吉拉特语字符具有 unicode 值，如此处](http://jrgraphix.net/r/Unicode/0A80-0AFF)所示

您可以直接将它们存储在字符串中。但是，如果您不能直接接受古吉拉特语输入，则可以像这样使用字符类

```
int c = 0x0A82;
String s = Character.toString((char)c);
//s is ં 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T16:50:59.057

您应该在您的网站上进行一些更改

在 JSP 文件中更改

```
<%@ page language="java" contentType="text/html; charset=UTF-16" pageEncoding="UTF-16"%> 
```

并在**.property**文件中

将文本保存为 uni-code 格式

像这样（这里uni-code字符的语言是古吉拉特语

> 全局名称 = \u0AA8\u0ABE\u0AAE

这肯定会起作用，因为它在 struts2 中对我有用

输出将是：

> નામ</p>

# sqlite - 如何将 sql server 2008 R2 与 windows store 应用程序连接起来

> ID：13989594
> 
> 赞同：3
> 
> 时间：2012-12-21T11:46:22.813
> 
> 标签：sqlite, windows-runtime, windows-store-apps

我目前正在开发一个 Windows 商店应用程序，我需要将我的应用程序与 sql server 2008 R2 Db 连接，一些 sql 类在 WinRT API 中不起作用，请任何人对此提出建议并告诉我可以使用哪个 RDBMS 连接和。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:21:42.003

你不能。原因是您不能对商店应用程序施加这种限制，您应该不依赖可用的外部数据库。

但是，您可以使用 sqlite，这是一个指南：[http ://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)

如果您想连接到数据库以从中提取数据（例如，作为企业应用程序），那么您可以使用 Web 服务作为数据库的包装器。

# opencart - Vqmod 未显示在 Opencart 的管理面板中

> ID：13989595
> 
> 赞同：2
> 
> 时间：2012-12-21T11:46:29.443
> 
> 标签：opencart

我已经安装了 Open cart 版本 1.5.2.1，一切正常，我已经在其中安装了 Vqmod 模块。它已正确安装并覆盖了 index.php 以及 admin/index.php 并在 vqcache 中生成了文件，但我在管理面板中看不到 vqmod 管理器，请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:31:38.800

原因很简单。vQmod 管理器***不是***vQmod 下载的一部分，也不是 OpenCart 包的一部分。这是您需要在之后进行的单独安装。它可以从[这里](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=2969)下载。

# wpf - 打印 WPF - 不分页，改为调整页面大小

> ID：13989598
> 
> 赞同：0
> 
> 时间：2012-12-21T11:46:58.507
> 
> 标签：wpf, printing

我有一台直到卷筒打印机，我想在上面打印。我不需要分页，但我确实需要调整页面大小。无论我使用什么代码，打印机页面大小总是使用打印机首选项中的设置。

```
 PrinterSettings ps = new PrinterSettings();
        ps.DefaultPageSettings.PaperSize = new PaperSize("rec", 200, 900);

        System.Windows.Controls.PrintDialog printDialog = new PrintDialog();

        MyPaginator paginator = new MyPaginator(print);
        paginator.PageSize = new Size(200, 900);
        printDialog.PrintDocument(paginator, "My Receipt"); 
```

我正在使用 a `DocumentPaginator`，因为我认为这将允许更具体地了解我想要打印的页面。

如何设置页面大小？

# jquery - 在 jQuery 加载后删除添加的类

> ID：13989599
> 
> 赞同：2
> 
> 时间：2012-12-21T11:47:01.187
> 
> 标签：jquery, css, onload

以下 jQuery 代码将 CSS 类附加`.load`到`.spinner-wrapper`页面加载。这完成了我想要的一半。

2 秒后，我想让 jQuery 从`.spinner-wrapper`. 代码应尽可能简洁明了。

**添加类 onload 的当前代码**

```
$(function() {
  $('.spinner-wrapper').addClass('load');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T11:48:59.513

如果这只是您想添加的时间延迟，您可以尝试以下操作。

```
$(function() {
  $('.spinner-wrapper').addClass('load');
  setTimeout(function(){
     $('.spinner-wrapper').removeClass('load');
  },2000);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T11:48:29.800

如果您使用的是 JQuery 动画：

```
$('.spinner-wrapper').delay(2000).removeClass('load'); 
```

别的：

```
setTimeout(function(){
      $('.spinner-wrapper').removeClass('load');
},2000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:53:58.163

您不能使用`delay()`它，因为它仅适用于效果队列，而`removeClass()`不是其中的一部分。请参阅两个示例的这个 jsfiddle ......

[http://jsfiddle.net/5b5Gm/](http://jsfiddle.net/5b5Gm/)

你需要`setTimeout()`像这样使用...

```
$(function() {
    $('.spinner-wrapper').addClass('load');
    setTimeout(function() {
        $('.spinner-wrapper').removeClass('load');
    }, 2000);
}); 
```

# java - 用于填充值对象的面向对象代码

> ID：13989601
> 
> 赞同：1
> 
> 时间：2012-12-21T11:47:09.123
> 
> 标签：java, oop, procedural-programming

这是一个低级设计问题。我正在尝试掌握面向对象的编程。

我正在编写一个 Java 类，其方法是设置值对象的数据成员的值。这些值是由我的班级根据一些业务逻辑计算的。最后，我的类应该返回如此填充的值对象。这样做最面向对象的方式是什么？

一种可能的方法，我似乎要走的路是，在我的 Java 类中为我需要设置的每个数据成员（VO）创建 compute() 方法。这些计算方法中的每一个都返回我使用值对象的相应 setter 方法设置的所需值。但是，我认为这种方法比面向对象更程序化，因为我只是按顺序按程序调用这些计算方法并填充我的值对象。

**那么我可以使用/查看哪些设计（......设计模式，也许？）或最佳实践，以便此代码成为面向对象的。**

代表代码（我现在拥有的）：

```
class Adapter {   // this is my Java class
    MyValueObject applyBusinessLogic(Input object)
    {
        MyValueObject vo = new MyValueObject();
        vo.setA(computeA());
        vo.setB(computeB());
        vo.setC(computeC());
        return vo;
    }

    String computeA() { ...some logic... return a;}
    String computeB() { ...some logic... return b;}
    String computeC() { ...some logic... return c;}
}

class MyValueObject {
      String a;
      String b;
      String c;

      public void setA(String a)
      {
           this.a = a;
      }

      public void setB(String b)
      {
           this.b = b;
      }

      public void setC(String c)
      {
           this.c = c;
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:02:39.813

恕我直言，这实际上取决于职责和计算方法的作用。您应该牢记 SRP (http://en.wikipedia.org/wiki/Single_responsibility_principle) 来进行 OO 设计。还有高内聚和松耦合原则。

如果 computeA()、B 和 C 不相关，则应拆分您的 Adapter 类。如果它们是相关的，那么您的 Adapter 类应该以不同的方式命名以表达它的实际作用。例如：税务计算器。

然后你可以创建一个新的类来接收一个 TaxCalculator 和一个 MyValueObject 来应用。或者只是将应用程序留在计算器中（尽管一个类需要两个职责，这通常很糟糕）。在后一种情况下，也许您可​​以调用类 TaxCalculationsSetter 或类似的东西，并将计算方法设为私有。等等，你会再次满足 SRP。;-)

永远记住，“什么是责任”是一个有点主观的东西。

我希望这已经澄清了一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:37:16.997

正如izaera 已经提到的，这在很大程度上取决于您没有提供的细节或问题。但是，至少有一件事在我看来是不对的：

您的值对象的构造似乎需要一些逻辑。现在的问题是，它应该去哪里？您已经在适配器中完成了它。但是，这可能不对，因为VO的构造属于VO而不是Adapter。因此，我肯定会将该逻辑移至 VO 本身——作为其构造的一部分。

因此，在我看来，将该逻辑移至 VO 会改进设计。

```
...
MyValueObject vo = new MyValueObject(); 
vo.setA(required input);
vo.setB(required input);
vo.setC(required input);

class MyValueObject {
      String a;
      String b;
      String c;

      public void setA(required input)
      {  
          ... some logic
          this.a = result of logic
      }

      public void setB(required input)
      {  
          ... some logic
          this.b = result of logic
      }

      public void setC(Srequired input)
      {
             ... some logic
          this.c = result of logic
      }
} 
```

显然，如果使用构造函数立即完成构造，整个事情会变得更好，除非你必须使用设置器，如果说，你正在使用一些 ORM 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:03:58.700

对我来说看起来不错。您不应该总是寻找要使用的编程模式。最重要的是 KISS（保持愚蠢和简单）

我会考虑是否可以使 MyValueObject 不可变。

```
class Adapter {   // this is my Java class
    MyValueObject applyBusinessLogic(Input object){
        return new MyValueObject(computeA(),computeB(),computeC());
    }

    String computeA() { ...some logic... return a;}
    String computeB() { ...some logic... return b;}
    String computeC() { ...some logic... return c;}
}

class MyValueObject {
    final String a;
    final String b;
    final String c;

    public MyValueObject(String a, String b, String c){
        this.a=a;
        this.b=b;
        this.c=c;
    }

} 
```

# linux - heroku 之类的 vps 部署工具

> ID：13989602
> 
> 赞同：2
> 
> 时间：2012-12-21T11:47:10.000
> 
> 标签：linux, heroku, vps

将您的 Web 应用程序部署到 heroku 很容易

我想知道的是，您的 linux 服务器上是否安装了任何开源工具，因此您可以拥有相同的部署体验，因为 heroku buildpacks 都是开源的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-25T19:00:31.990

[Dokku](http://dokku.viewdocs.io/dokku/)是 Heroku 的单主机版本。它允许您通过 git 推送与 Heroku 兼容的应用程序。

# android - 在小部件中使用带有 EditText 的字体

> ID：13989604
> 
> 赞同：5
> 
> 时间：2012-12-21T11:47:15.057
> 
> 标签：android, android-widget, typeface

是否可以使用从小部件中`Typeface`的资产加载的某种字体定义`EditText`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:03:22.717

您要使用的字体需要位于 assets/fonts 目录中，您可以像这样访问它：

```
Typeface myFont = Typeface.createFromAsset(getAssets(), "fonts/myfont.ttf");
edittext.setTypeface(myFont); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:58:53.967

```
editText.setTypeface(Typeface.createFromAsset(context.getAssets(),"fonts/myfont.ttf")); 
```

假设您具有以下文件结构：

/assets/fonts/myfont.ttf

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:58:54.033

请参阅下面的代码，它将解决您的问题。

```
// text view label
TextView mTextView1 = (TextView) findViewById(R.id.TextView1);

// Loading Font Face
Typeface tf = Typeface.createFromAsset(getAssets(), "DroidSansFallback.ttf");

// Applying font
mTextView1.setTypeface(tf); 
```

有关更多信息，请参见下面的链接。

[Android 开发 - 自定义 Android 字体](http://androidcodeexamples.blogspot.in/2012/11/android-development-customize-android.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:05:22.817

```
 Typeface tf   =    Typeface.createFromAsset(getAssets(),"fonts/Comic.ttf");
 youredittext.setTypeface(tf); 
```

我现在已经试过了。它对我有用。祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:23:18.513

实现这一点并避免将字体添加到所有文本视图的其他更好的形式是扩展 TextView （或 EditText 或 ... ）并将字体应用于 setTypeface 方法。使用此方法，您可以控制粗体、斜体和其他样式。

这是扩展 TextView 并应用 Roboto 字体的类的代码。此外，当从 HTML 设置 Spannable 时，它​​还控制了 Android 4.0 与 html 代码相关的一些错误

```
public class TextViewRoboto extends TextView {  
public static final String TAG = "TextViewRoboto";

public TextViewRoboto(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public TextViewRoboto(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public TextViewRoboto(Context context) {
    super(context);
}

@Override
public void setTypeface(Typeface tf, int style) {

    //This is to override eclipse error messages
    if (!super.isInEditMode()) {      

        if (style == Typeface.BOLD)  
            super.setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Bold.ttf"));
        else if (style == Typeface.ITALIC)
            super.setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Italic.ttf"));
        else
            super.setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Regular.ttf"));    
    }    
}

//
// With this code aboid the <b> and <strong> problem on Jelly Bean
//

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    try{
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }catch (ArrayIndexOutOfBoundsException e){
        //Logger.w(TAG, "Problem onMeasure. Set normal text");
        setText(getText().toString());
        super.onMeasure(widthMeasureSpec, heightMeasureSpec); 
    }
}   
@Override
public void setGravity(int gravity){
    try{
        super.setGravity(gravity);
    }catch (ArrayIndexOutOfBoundsException e){
        //Logger.w(TAG, "Problem setGravity. Set normal text");
        setText(getText().toString());
        super.setGravity(gravity); 
    }
}
@Override
public void setText(CharSequence text, BufferType type) {
    try{
        super.setText(text, type);
    }catch (ArrayIndexOutOfBoundsException e){
        //Logger.w(TAG, "Problem on setText. Set normal text");
        setText(text.toString());
    }
}

public void setHTMLText(CharSequence text, BufferType type) {
    String tmpText = text.toString();
    if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        tmpText = tmpText.replace("<strong>", "<b>");
        tmpText = tmpText.replace("</strong>", "</b>");
        tmpText = tmpText.replace("<em>", "<i>");
        tmpText = tmpText.replace("</em>", "</i>");
        text = tmpText;
    }

    try{
        super.setText(Html.fromHtml(tmpText), type);
    }catch (ArrayIndexOutOfBoundsException e){
        //Logger.w(TAG, "Problem on setText. Set normal text");
        setText(text.toString());
    }
}
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-21T11:51:21.840

你可以用这个

```
editText.setTypeface(Typeface.SERIF); 
```

# php - Magento：以与管理后端树结构相同的顺序显示子子类别

> ID：13989610
> 
> 赞同：3
> 
> 时间：2012-12-21T11:47:51.470
> 
> 标签：php, zend-framework, magento, magento-1.7, magento-1.6

我使用 Magento 1.7.2，并显示当前类别的子类别和子子类别列表。我的问题是子子类别的顺序与管理后端树结构中的顺序不同。看起来他们是通过他们的 id 排序的，从小到大的 id 号。我需要它们在管理后端中按顺序显示。这是我当前的代码：

```
<?php 
$currCat = Mage::registry('current_category');
$parentname = $currCat->getName();
$collection = Mage::getModel('catalog/category')->getCategories($currCat->getEntityId());
$subcats = $currCat->getChildren();

$_helper = $this->helper('catalog/output');
echo '<h2 class="titleCat"><strong>'.$parentname.'</strong></h2>';
?>

<?php 
$currCat = Mage::registry('current_category');
$parentname = $currCat->getName();
$collection = Mage::getModel('catalog/category')->getCategories($currCat->getEntityId());
$subcats = $currCat->getChildren();

$_helper = $this->helper('catalog/output');
echo '<h2 class="titleCat"><strong>'.$parentname.'</strong></h2>';
?>

<!-- We list sub sub categories -->
<div class="colLeftNav">
<ul class="colLeftSubCats">
<?php
foreach(explode(',',$subcats) as $subCatid)
{
$_category = Mage::getModel('catalog/category')->load($subCatid);
if($_category->getIsActive()) {
$sub_cat = Mage::getModel('catalog/category')->load($_category->getId());
$sub_subcats = $sub_cat->getChildren();
echo '<div class="subMainCat"><a href="'.$_category->getURL().'" title="Show products "'.$_category->getName().'" category">'.$_category->getName().'</a></div>';
foreach(explode(',',$sub_subcats) as $sub_subCatid)
{
$_sub_category = Mage::getModel('catalog/category')->load($sub_subCatid);
if($_sub_category->getIsActive()) {
echo '<li class="subCat"><a href="'.$_sub_category->getURL().'" title="show products "'.$_sub_category->getName().'" category">'.$_sub_category->getName().'</a></li>';
}
}
}
}
?>
</ul>
</div> 
```

我几乎被困在这里，不知道如何解决这个问题。任何帮助将非常感激...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:13:21.657

像这样的东西？

```
$cat_id = 10;
$category = Mage::getModel('catalog/category')->load($cat_id);
$collection = Mage::getModel('catalog/category')->getCategories($cat_id, 0, true, true);

foreach ($collection as $cat) {
    echo $cat->getId().' '.$cat->getPosition().' '.$cat->getName().'<br/>';
} 
```

# sql - 最大的 SQL 排序

> ID：13989617
> 
> 赞同：0
> 
> 时间：2012-12-21T11:48:16.803
> 
> 标签：sql, sql-server, group-by, max

我有下表：

```
TKG   hour  CAP SWITCH  CALLS
AAA   7     45  HH      56
AAA   8     35  HH      76
AAA   9     25  HH      43
BBB   7     32  LL      5
BBB   8     43  LL      65
BBB   9     434 LL      65
CCC   7     54  JJ      43
CCC   8     564 JJ      43
CCC   9     54  JJ      65
ddd   7     10  MM      4
ddd   8     10  MM      3
ddd   9     10  MM      5 
```

我需要使用最大 CAP 通过 TKG 订购，因此输出将如下所示：

```
TKG hour    CAP SWITCH  CALLS
AAA 7       45  HH      56
BBB 9       434 LL      65
CCC 8       564 JJ      43
ddd 7       10  MM      4 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:01:24.973

如果您使用的是 Sql server 2005+，那么您可以使用`row_number()`and`partition by TKG`和`order by cap desc`：

```
select TKG, hour, CAP, switch, Calls
from 
(
  select *,
    row_number() over(partition by TKG order by cap desc) rn
  from yourtable 
) t1
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7bf9a/3)

结果：

```
| TKG | HOUR | CAP | SWITCH | CALLS |
-------------------------------------
| AAA |    7 |  45 |     HH |    56 |
| BBB |    9 | 434 |     LL |    65 |
| CCC |    8 | 564 |     JJ |    43 |
| ddd |    7 |  10 |     MM |     4 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:56:38.380

这个在甲骨文中工作

```
 select TKG,hour,CAP,SWITCH,CALLS from (select a1.*,rank over (partition  by TKG, order by CAP) rnk 
    from table a1) where rnk=1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:54:21.720

试试这个

```
 select * from table 
 where  cap=(select max(cap) from table group by tkg)
 group by tkg 
```

或者

```
select top 1 * from table
 order by cap desc 
```

或者

```
 select * from table
 order by cap desc
  limit (1,1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:58:25.763

```
Select a.* from Tab a
join
(
Select TKG,max(CAP) as CAP from Tab Group by TKG
) b on a.TKG=b.TKG and a.CAP=b.CAP 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:12:02.060

获取最大值并进入子查询并在 CAP val Other 的内部连接中链接到此

```
SELECT TKG, hour,  CAP, SWITCH,  CALLS
INNER JOIN --GET THE MAX CAP FOR EACH TKG
(SELECT TKG, MAX(CAP) AS MaxCAP
FROM myTable
GROUP BY TKG
) AS MaxCap
ON MyTable.Cap= MaxCap.MaxCAP 
```

# ruby-on-rails - Ruby concat! or < Is there a more elegant way to do this: widget.notes.where(:author_id => a).first.message= widget.notes.where(:author_id => a).first.message 问问题 问问题 2012-12-21T11:48:31.357 465 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is there a more elegant way to do this: widget.notes.where(:author_id => a).first.message= widget.notes.where(:author_id => a).first.message << "Potato" For example, the following do not work: widget.notes.where(:author_id => a).first.message << "Potato" widget.notes.where(:author_id => a).first.message < a).first presumably returns a new object each time, which will have its own independent string. Further, if message corresponds to a database column, not an instance variable, I'm not sure whether calling mutating methods on it will even work as it would circumvent calling ActiveRecord's (or whichever ORM you're using) setter methods. Using += might be your safest bet here. This should work as you want: note = widget.notes.where(:author_id => a).first note.message += "Potato" note.save ruby-on-railsrubyoperators 4 1 回答 1 This answer is useful 3 这不是<<不就地修改字符串的问题——它确实就地修改了字符串。<<它的名称中可能没有 a !，但它仍然像 bang-method 一样。如果您在示例代码中替换为对（名称中确实有 a ）<<的调用，您可以很容易地看到这一点：它不会产生任何影响。gsub!! 在您的情况下，您会返回未更改的字符串，因为 widget.notes.where(:author_id => a).first 可能每次都会返回一个新对象，该对象将具有自己的独立字符串。 此外，如果message对应于数据库列，而不是实例变量，我不确定在其上调用变异方法是否会起作用，因为它会绕过调用 ActiveRecord（或您正在使用的任何 ORM）setter 方法。在这里使用+=可能是您最安全的选择。 这应该可以按您的意愿工作： note = widget.notes.where(:author_id => a).first note.message += "Potato" note.save 于 2012-12-21T11:59:43.543 回答 Related 1 mobile - 并非所有类都由 API O MAT 中的 CSV 模块导出 1 blackberry - 黑莓线程异常 1 batch-file - WinSCP 用于编辑远程文件的命令行参数 1 java - android上的java.lang.outofmemory错误（Web服务） 3 iphone - iPhone 在网络视图中播放 youtube 视频 4 oracle - 在oracle中选择从第三行到第n行的行 1 ruby-on-rails - Rails：长轮询实践 1 c# - ItextSharp 中的 Pdf 合并问题（合并 Pdf 后不保留其值） 1 javascript - ui 选项卡无法正常工作 1 android - XML 错误 - 执行 Google Android NDK 第 1 课 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13989619
> 
> 赞同：1
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby, operators

Is there a more elegant way to do this:

```
widget.notes.where(:author_id => a).first.message= widget.notes.where(:author_id => a).first.message << "Potato" 
```

For example, the following do not work:

```
widget.notes.where(:author_id => a).first.message << "Potato"
widget.notes.where(:author_id => a).first.message <<! "Potato" 
```

Respectively not modifying, or returning an error (as there is no

```
<<! 
```

operator)

key: widget is an instance of Widget. Widgets can have notes. Notes have an attr_accessible for :message. 'a' is just a user instance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:59:43.543

这不是`<<`不就地修改字符串的问题——它确实就地修改了字符串。`<<`它的名称中可能没有 a `!`，但它仍然像 bang-method 一样。如果您在示例代码中替换为对（名称中确实有 a ）`<<`的调用，您可以很容易地看到这一点：它不会产生任何影响。`gsub!``!`

在您的情况下，您会返回未更改的字符串，因为 widget.notes.where(:author_id => a).first 可能每次都会返回一个新对象，该对象将具有自己的独立字符串。

此外，如果`message`对应于数据库列，而不是实例变量，我不确定在其上调用变异方法是否会起作用，因为它会绕过调用 ActiveRecord（或您正在使用的任何 ORM）setter 方法。在这里使用`+=`可能是您最安全的选择。

这应该可以按您的意愿工作：

```
note = widget.notes.where(:author_id => a).first
note.message += "Potato"
note.save 
```

# apache-camel - 重新传递延迟设置在 ActiveMQXAConnectionFactory 上不起作用

> ID：13989620
> 
> 赞同：2
> 
> 时间：2012-12-21T11:48:31.607
> 
> 标签：apache-camel, activemq, apache-servicemix

我一直在尝试在我的骆驼上下文（骆驼 2.8）中配置一个 jms 端点（activemq 5.7），因此它应该在回滚时使用重新传递消息。不幸的是，它并没有像我预期的那样工作：它将消息返回到队列，但是消费者在之后立即接收消息，尽管指定了延迟参数。

我的配置如下：

```
...
<bean id="jmstx" class="org.apache.activemq.camel.component.ActiveMQComponent"> 
    <property name="configuration" ref="jmsTxConfig" /> 
</bean> 

<bean id="jmsTxConfig" class="org.apache.camel.component.jms.JmsConfiguration"> 
    <property name="connectionFactory" ref="jmsXaPoolConnectionFactory"/> 
    <property name="transactionManager" ref="osgiPlatformTransactionManager"/>
    <property name="transacted" value="false"/>
    <property name="cacheLevelName" value="CACHE_NONE"/>
    <property name="concurrentConsumers" value="${jms.concurrentConsumers}" />
</bean> 

<bean id="jmsXaPoolConnectionFactory" class="org.apache.activemq.pool.XaPooledConnectionFactory">
    <property name="maxConnections" value="${jms.maxConnections}" />
    <property name="connectionFactory" ref="jmsXaConnectionFactory" />
    <property name="transactionManager" ref="osgiJtaTransactionManager" />
</bean>

<bean id="jmsXaConnectionFactory" class="org.apache.activemq.ActiveMQXAConnectionFactory">
    <property name="brokerURL" value="${jms.broker.url}"/>
    <property name="redeliveryPolicy">
        <bean class="org.apache.activemq.RedeliveryPolicy">
            <property name="maximumRedeliveries" value="-1"/>
            <property name="initialRedeliveryDelay" value="2000" />
            <property name="redeliveryDelay" value="5000" />
        </bean>
    </property>
</bean> 
```

一个小示例演示了我如何使用端点：

```
 <route id="main-route">
        <from uri="jmstx:queue:my-queue" />
        <to uri="direct:subroute" />
        ...
        <!-- some logic -->
    </route>

    <route id="subroute">
        <from uri="direct:subroute" />
        <transacted ref="PROPAGATION_MANDATORY"/>
        ...
        <!-- Rollback on some condition -->
        <rollback/>
        ...
    </route> 
```

有谁知道为什么会这样？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-27T14:53:29.153

Yes, I encountered same problem. After hacking the ActiveMQ source code, and adding some logging information, I found some evidences and googled the solution.

Just like the answer said: [https://developer.jboss.org/thread/266172](https://developer.jboss.org/thread/266172) After setting cacheLevel to CACHE_CONSUMER on the activemq component, solved the problem.

ex:

```
<bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration"> 
  <property name="connectionFactory" ref="jmsPooledConnectionFactory" />
  <property name="concurrentConsumers" value="1"/> 
  <property name="transacted" value="true"/>
  <property name="cacheLevelName" value="CACHE_CONSUMER"/>
  <property name="acknowledgementModeName" value="SESSION_TRANSACTED"/>
</bean> 
```

# biztalk - 在 BizTalk 业务流程中使用 WCF 服务时以编程方式定义 WCF-BasicHttp/WCF-WSHttp 设置

> ID：13989624
> 
> 赞同：0
> 
> 时间：2012-12-21T11:48:38.990
> 
> 标签：biztalk, biztalk-2010, biztalk-2009, biztalk-wcf

我试图在我的 BizTalk 业务流程中使用已经编写的 WCF 服务。但是在配置消费的端口和端口类型时，发现 Visual Studio 中的“WCF 服务消费向导”提供 HTTP 传输类型作为唯一选项，并且没有 WCF-BasicHttp/WCF-WSHttp 传输类型选项可用。

但是，我们始终可以通过从 BizTalk 管理控制台导入所需的绑定文件来进行所需的 WCF-BasicHttp/WCF-WSHttp 设置，开发人员是否可以通过编程方式从 Visual Studio 内部执行相同操作（而不是指定那些稍后从管理控制台绑定）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:03:33.560

绑定文件只是 XML，因此您可以通过编程方式创建它们。按照您认为合适的方式修改 XML，可以手动（例如，在内置 XML 编辑器中）或使用某种自定义代码。

通常，我们在每个环境中使用多个绑定文件，包括一个仅适用于 localhost 上的所有内容的开发人员。您只需选择您想要的并将其导入 BizTalk 或编写一个脚本自动为您导入它（例如在构建之后）。

您还可以看看[BizTalk 部署框架](http://biztalkdeployment.codeplex.com/)。更多。

Michael Stephenson 有一篇关于使用 MSBuild 自动化部署（包括 BizTalk 绑定文件）的精彩帖子，请[点击此处](http://geekswithblogs.net/michaelstephenson/archive/2008/01/27/118963.aspx)。

# iphone - 将视频复制到 uipasteboard

> ID：13989625
> 
> 赞同：8
> 
> 时间：2012-12-21T11:48:41.957
> 
> 标签：iphone, objective-c, ios, uipasteboard

我已经成功地使用以下代码将图像复制或添加到粘贴板：

```
if (ver_float < 6.0)
{
    UIPasteboard *pasteboard;
    pasteboard = [UIPasteboard generalPasteboard];
    NSString *filePath =pathToImage;
    [pasteboard setImage:[UIImage imageWithContentsOfFile:filePath]];
}
else
{
    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
    NSString *filePath =pathToImage;
    NSData *videoData = [NSData dataWithContentsOfFile:filePath];
    [pasteboard setData:videoData forPasteboardType:[UIPasteboardTypeListImage objectAtIndex:0]];

}

NSURL *urlstr = [NSURL URLWithString:@"sms:"];
[[UIApplication sharedApplication] openURL:urlstr]; 
```

但是我正在制作的应用程序基于图像和视频，因此用户将能够通过 imessage 或 messagecomposer 发送图像/视频。但是因为我已将图像转换为数据并添加到粘贴板中。它正在成功运行并通过 imessage 发送。但我还需要通过 imessage 发送视频。如果有人对此有任何想法，请给我一些建议或解决方案。

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-29T06:08:45.653

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://pathto.mp4"]];
UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
[pasteBoard setData:data forPasteboardType:@"public.mpeg-4"]; 
```

`@"public.mpeg-4"`来自[http://www.escape.gr/manuals/qdrop/UTI.html](http://www.escape.gr/manuals/qdrop/UTI.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T12:15:13.373

我在从 SMS 发送音频文件时也遇到了同样的问题。但是使用当前的 SDK 无法从 SMS 发送视频和音频。您可以通过将该视频上传到服务器然后发送该上传的 URL 来做到这一点。

[如何以编程方式在 iPhone 上发送语音邮件？](https://stackoverflow.com/questions/13645442/how-to-programmatically-send-voicemail-message-on-the-iphone/13645608#13645608)

# python - cv2.videocapture.read() 不返回 numpy 数组

> ID：13989627
> 
> 赞同：10
> 
> 时间：2012-12-21T11:48:50.123
> 
> 标签：python, opencv, v4l2, ftputil

我有这段代码试图从树莓派上的网络摄像头捕获帧，并将其保存为图像。我使用opencv 2，但运行代码时出现奇怪的错误..

```
import time
import sys
from subprocess import call
import cv2

cam = cv2.VideoCapture()

while True:
        cam.open(-1)
        image = cam.read()
        cv2.imwrite("current.jpeg",image)
        time.sleep(10); 
```

这是程序返回的内容：

```
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument

Traceback (most recent call last):
  File "kvamskogen.py", line 18, in <module>
    cv2.imwrite("current.jpeg",image)
TypeError: <unknown> is not a numpy array 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-21T12:50:21.963

从 a读取 ( `cam.read()`)`VideoCapture`返回一个元组`(return value, image)`。使用第一项检查读取是否成功，如果成功，则继续使用返回的`image`.

这记录在[https://opencv-tutorial.readthedocs.io/en/latest/intro/intro.html#capture-live-video](https://opencv-tutorial.readthedocs.io/en/latest/intro/intro.html#capture-live-video)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-15T10:13:58.437

mmgp 所说的一切都是正确的；`cam.read()`首先返回一个布尔值，指示读取是否成功，然后返回图像本身（如果返回值为 ，则为空`False`）。另请注意，如果您不使用任何返回值，则可以将该部分设置为`_`，这会告诉 Python“忽略我”；那条线看起来像`_, image = cam.read()`. 此外，在调用时指定相机所在的索引（通常为 0，如果您只连接了一个相机）通常是一种很好的做法`cv2.VideoCapture()`，这样，如果您确实连接了多个相机，OpenCV 就会知道要连接哪个相机读取（否则它可能会崩溃，因为它不知道该怎么做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-18T06:55:42.960

你应该使用参数`cv2.VideoCapture()`

试试这个从默认相机捕捉

```
cam = cv2.VideoCapture(0) 
```

试试这个从网络摄像机捕获

```
cam = cv2.VideoCapture('http://ip-address') # to check video source's ip address right click video and select "copy image address" and put the exact address in above line of code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-11T15:13:40.920

如果您尝试使用内置网络摄像头捕获视频，那么闲置的代码行将为您提供最佳效果`cap = cv2.VideoCapture(0, cv2.CAP_DSHOW)`

# google-app-engine - 无法在上传成功处理程序中读取 Google Storage Cloud 文件

> ID：13989628
> 
> 赞同：1
> 
> 时间：2012-12-21T11:48:50.840
> 
> 标签：google-app-engine, google-cloud-storage

我正在尝试从 GAE 中的“上传成功”处理程序中获取文件内容。文件上传到url：

```
blobstoreService.createUploadUrl("/onupload", uploadOptions)); 
```

所以，在 中`/onupload`，我正在做这样的事情：

```
BlobKey myFile = context.getRequestBlobs().get("myFile").get(0); 
```

然后我试过了：

```
InputStream is = new BlobstoreInputStream(myFile);
// .. read the stream 
```

失败了`com.google.appengine.api.blobstore.BlobstoreInputStream$BlobstoreIOException: BlobstoreInputStream received an invalid blob key: =?ISO-8859-1?Q?AMIfv96J=2DsyIbhm5=5FET?=`

和

```
FileReadChannel ch = fileService.openReadChannel(myFile, false); 
```

失败了

```
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:615)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:588)
    at com.google.appengine.api.files.FileServiceImpl.open(FileServiceImpl.java:521)
    at com.google.appengine.api.files.FileServiceImpl.openForRead(FileServiceImpl.java:481)
    at com.google.appengine.api.files.FileServiceImpl.openForRead(FileServiceImpl.java:473)
    at com.google.appengine.api.files.FileServiceImpl.openReadChannel(FileServiceImpl.java:197) 
```

关于我做错了什么的任何想法，是否有可能在上传处理程序中读取文件的内容？

请注意，对于 blobstore fs（不是 GS），它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:26:46.517

我认为您正在尝试从谷歌云存储中读取文件。你看过文档中的示例 [1] 吗？

特别是这部分：

```
/ At this point, the file is visible in App Engine as:
// "/gs/BUCKETNAME/FILENAME"
// and to anybody on the Internet through Cloud Storage as:
// (http://storage.googleapis.com/BUCKETNAME/FILENAME)
// We can now read the file through the API:
String filename = "/gs/" + BUCKETNAME + "/" + FILENAME;
AppEngineFile readableFile = new AppEngineFile(filename);
FileReadChannel readChannel =
    fileService.openReadChannel(readableFile, false);
// Again, different standard Java ways of reading from the channel.
BufferedReader reader =
         new BufferedReader(Channels.newReader(readChannel, "UTF8"));
String line = reader.readLine();
resp.getWriter().println("READ:" + line);

// line = "The woods are lovely, dark, and deep."
readChannel.close(); 
```

[1] [https://developers.google.com/appengine/docs/java/googlestorage/overview#Complete_Sample_App](https://developers.google.com/appengine/docs/java/googlestorage/overview#Complete_Sample_App)

# objective-c - iOS 代码优化

> ID：13989630
> 
> 赞同：0
> 
> 时间：2012-12-21T11:48:54.013
> 
> 标签：objective-c, ios, uitabbar

我是 iOS 开发的新手，这可能是一个非常基本的问题——在我的应用程序中`UITabBarController` ，每个 VC 都有 5 个 VC。我正在处理标签栏项目点击-

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    switch (item.tag)
    {
        case 0:
        {
            vc1 = [[VC1 alloc] initWithNibName:@"VC1" bundle:nil];
            [self.view addSubview:vc1.view];
            [tabbarObj setSelectedItem:[tabbarObj.items objectAtIndex:0]];
        }
            break;
        case 1:
        {
            vc2 = [[VC2 alloc] initWithNibName:@"VC2" bundle:nil];
            [self.view addSubview:vc2];
        }
            break;
        case 2:
        {
            vc3 = [[VC3 alloc] initWithNibName:@"VC3" bundle:nil];
            [self.view addSubview:vc3];
        }
            break;
        case 3:
        {
            [tabbarObj setSelectedItem:[tabbarObj.items objectAtIndex:3]];
        }
            break;
        case 4:
        {
            vc5 = [[VC5 alloc] initWithNibName:@"VC5" bundle:nil];
            [self.view addSubview:vc5];
        }
            break;
        default:
            break;
    }
} 
```

而且我知道这不是处理选项卡栏的正确方法，因为每次当我单击选项卡 bat 项目时，它都会在当前视图上添加一个子视图。有人可以建议我更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:57:20.927

在您的`Appedelegate.m`文件中更改 `didFinishLaunchingWithOptions`方法

```
 tabBar_Controller = [[UITabBarController alloc] init];
    NSMutableArray *localControllersArray =[[NSMutableArray alloc]initWithCapacity:2];

    firstViewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];

    nav = [[UINavigationController alloc] initWithRootViewController:firstViewController];
nav.tabBarItem.title = @"item1";
    nav.navigationBar.barStyle = UIBarStyleBlack;
   [localControllersArray addObject:nav];
            [self setNav:nil];

    secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    nav = [[UINavigationController alloc] initWithRootViewController:secondViewController];
    nav.tabBarItem.title = @"item2";
           [localControllersArray addObject:nav];

    [self setNav:nil];
 tabBar_Controller.viewControllers = localControllersArray;
   tabBar_Controller.delegate = self;
    tabBar_Controller.selectedIndex = 0;
[self.window addSubview:tabBar_Controller.view]; 
```

选择 ViewController 后访问某些属性使用以下代码。

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewControllers
{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewControllers];

    switch (index) {

        case 0:
        {

            NSLog(@"selected 1");

            break;
        }
        case 1:

          {
            NSLog(@"selected 2");
                    break;
        }
        default:
            break;
    }

} 
```

对于更改标签栏控制器的背景图像，您可以使用以下代码。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewControllers{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewControllers];

    switch (index) {
        case 0:
            [tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act21.png"]];

            break;
        case 1:
            [tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act22.png"]];
            break;
        case 2:
            [tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act23.png"]];
            break;
        default:
            break;
    }

    return YES;
} 
```

# android - 安卓偏好界面

> ID：13989636
> 
> 赞同：1
> 
> 时间：2012-12-21T11:49:21.237
> 
> 标签：android, android-preferences

实际上，我想使用首选项屏幕为每个用户设置不同的设置。实际上，共享首选项为每个用户提供了相同的设置。如何为每个用户存储每个不同的设置。不使用首选项屏幕，所以请建议如何做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:51:52.537

您可以使用`sqlite`. 那么你会很容易

如果您想了解更多关于 sqlite 的信息，请阅读[本教程](http://www.vogella.com/articles/AndroidSQLite/article.html)

# windows-8 - 如何枚举 Windows 8 上的媒体基础转换

> ID：13989639
> 
> 赞同：0
> 
> 时间：2012-12-21T11:49:30.437
> 
> 标签：windows-8, windows-runtime, ms-media-foundation

在我的 Windows Store 应用程序中，我想对音频文件进行重新采样。看来，对于这个问题有什么好的解决方案是使用来自 Media Foundation Transforms 的 Resampler 对象。**为了得到这个对象，我应该使用函数MFTEnumEx**枚举媒体转换，如下所述： [枚举 MFTs](http://msdn.microsoft.com/en-us/library/windows/apps/aa965254#enumerating_mfts)。但是在认证时我得到这样的错误： **此应用程序类型不支持 mfplat.dll 中的 API MFTEnumEx。**

有没有其他方法可以在 Windows 8 转换中使用，或者有其他方法来重新采样音频文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:24:30.933

请注意，在开箱即用的 Windows 商店应用程序转换（例如编解码器）之外的本机转换是为您的应用程序沙盒化的。

如果您使用传统编解码器包设置自定义 MFT，您的 Windows 商店应用程序将无法使用它。您必须将 MFT 与您的应用程序打包并使其可通过 WinRT 激活（并实现 IMediaExtension）。请记住，MediaExtensions 是 COM/WinRT 混合。

您在这里有一个受支持格式的列表，我想您最好的选择是在您的应用程序中对其进行硬编码：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh986969.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986969.aspx)

# python - 匹配点的正则表达式

> ID：13989640
> 
> 赞同：132
> 
> 时间：2012-12-21T11:49:34.507
> 
> 标签：python, regex

想知道最好的匹配方法`"test.this"`是`"blah blah blah test.this@gmail.com blah blah"`什么？使用 Python。

我试过了`re.split(r"\b\w.\w@")`

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-12-21T11:51:20.130

正则表达式中的A`.`是一个元字符，它用于匹配任何字符。要匹配原始 Python 字符串 ( `r""`or `r''`) 中的文字点，您需要对其进行转义，因此`r"\."`

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-12-21T11:51:22.257

在您的正则表达式中，您需要**转义**点`"\."`或在**字符类** `"[.]"`中使用它，因为它是正则表达式中的元字符，它匹配任何字符。

此外，您需要`\w+`而不是`\w`匹配一个或多个单词字符。

* * *

现在，如果您想要`test.this`内容，那么`split`这不是您所需要的。`split`将您的字符串拆分为`test.this`. 例如：

```
>>> re.split(r"\b\w+\.\w+@", s)
['blah blah blah ', 'gmail.com blah blah'] 
```

* * *

您可以使用[`re.findall`](http://docs.python.org/2/library/re.html#re.findall)：

```
>>> re.findall(r'\w+[.]\w+(?=@)', s)   # look ahead
['test.this']
>>> re.findall(r'(\w+[.]\w+)@', s)     # capture group
['test.this'] 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-08-10T11:20:46.103

> “在默认模式下，点 (.) 匹配除换行符以外的任何字符。如果指定了 DOTALL 标志，则匹配包括换行符在内的任何字符。” （蟒蛇文档）

所以，如果你想从字面上评估点，我认为你应该把它放在方括号中：

```
>>> p = re.compile(r'\b(\w+[.]\w+)')
>>> resp = p.search("blah blah blah test.this@gmail.com blah blah")
>>> resp.group()
'test.this' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-07T12:56:25.367

要转义字符串变量的非字母数字字符，包括点，您可以使用**`re.escape`**：

```
import re

expression = 'whatever.v1.dfc'
escaped_expression = re.escape(expression)
print(escaped_expression) 
```

输出：

> `whatever\.v1\.dfc`

您可以使用转义表达式从字面上查找/匹配字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T04:07:20.293

这是我对[@Yuushi 的主要答案的补充](https://stackoverflow.com/a/13989661/4561887)：

请记住，如果在常规字符串 ( or ) 而不是[*原始*](https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)[字符串](https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)( or ) 中使用反斜杠 ( `\`) 字符本身，则必须在 Python 中对其进行转义。因此，请记住您使用的字符串类型。因此，要在常规 Python 字符串中转义正则表达式中的点或句点 ( )，您还必须使用双反斜杠 () 转义反斜杠，使正则表达式中的总转义序列为： ，如图所示在下面的例子中。`'some string'``"some string"`[](https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)*`r'some string'``r"some string"``.``\\``.``\\.`*

 *因此，这些是不允许的。他们会引起这样的警告：

> 弃用警告：无效的转义序列`\.`

```
'\.'   # NOT a valid escape sequence in Python
"\."   # NOT a valid escape sequence in Python 
```

所有这些都是允许的并且是等效的：

```
# Use a DOUBLE BACK-SLASH in Python _regular_ strings
'\\.'  # Python regular string
"\\."  # Python regular string

# Use a SINGLE BACK-SLASH in Python _raw_ strings 
r'\.'  # Python raw string
r"\."  # Python raw string 
```

## 参考：

1.  主要和官方参考：[https ://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals](https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals) [![在此处输入图像描述](../Images/4d118d7c4f4e2bf1a580b26fa4b0b98f.png)](https://i.stack.imgur.com/Dkj41.png)
2.  [@Sean Hammond 的回答][如何在 Python 中修复“<string> DeprecationWarning: invalid escape sequence”？](https://stackoverflow.com/questions/52335970/how-to-fix-string-deprecationwarning-invalid-escape-sequence-in-python/52335971#52335971)

    > 如果要将文字`\`放在字符串中，则必须使用`\\`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-07-15T14:13:42.500

在 javascript 中，你必须使用`\\.`来匹配一个点。

例子

```
"blah.tests.zibri.org".match('test\\..*')
null 
```

和

```
"blah.test.zibri.org".match('test\\..*')
["test.zibri.org", index: 5, input: "blah.test.zibri.org", groups: undefined] 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2019-10-17T18:32:17.953

这个表情，

```
(?<=\s|^)[^.\s]+\.[^.\s]+(?=@) 
```

对于那些特定类型的输入字符串，可能也可以正常工作。

### [演示](https://regex101.com/r/Pu5BIY/1/)

### 测试

```
import re

expression = r'(?<=^|\s)[^.\s]+\.[^.\s]+(?=@)'
string = '''
blah blah blah test.this@gmail.com blah blah
blah blah blah test.this @gmail.com blah blah
blah blah blah test.this.this@gmail.com blah blah
'''

matches = re.findall(expression, string)

print(matches) 
```

### 输出

```
['test.this'] 
```

* * *

如果您想简化/修改/探索表达式，它已在[regex101.com](https://regex101.com/r/Pu5BIY/1/)的右上角面板中进行了说明。如果您愿意，您还可以在[此链接](https://regex101.com/r/Pu5BIY/1/debugger)中观看它如何与一些示例输入匹配。

* * **

# r - xkcd 样式图 - 注册字体错误

> ID：13989644
> 
> 赞同：7
> 
> 时间：2012-12-21T11:49:37.730
> 
> 标签：r

我想创建图表，就像上一个主题的[链接](https://stackoverflow.com/questions/12675147/how-can-we-make-xkcd-style-graphs-in-r/13985143#comment19302007_13985143)一样，但收到错误：

> 在 grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : 在 Windows 字体数据库中找不到字体系列

虽然`fonts()`安装了“Humor Sans”和“xksd”节目。我使用 Windows 7 64 位，R 2.15.2 RStudio 0.96.331。

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T12:50:39.663

我想我前段时间也遇到过同样的问题。这是我所做的：

1.  将 Humor-Sans 字体文件放入您的项目文件夹并确保您的工作目录设置为相同。

2.  通过调用导入字体（这可能需要一段时间）

    ```
    font_import() 
    ```

3.  查看字体列表，看看是否可以通过以下方式找到 Humor-Sans

    ```
    fonts() 
    ```

4.  加载字体

    ```
    loadfonts(device = "win") 
    ```

让我知道它是否有效！

# wpf - WPF 滑动面板

> ID：13989655
> 
> 赞同：3
> 
> 时间：2012-12-21T11:50:36.147
> 
> 标签：wpf, wpf-controls

我想制作一个类似于 Blend 菜单控件的控件：

![在此处输入图像描述](../Images/993542699eb96a8eed287c5b9b8e6b95.png)

与图像一样，单击资产，菜单会滑出，菜单另一侧的窗口会缩小，并为新的滑动菜单留出空间。菜单应该驻留在那里，直到执行任何操作将其滑回。（就像我将按钮放在同一位置 Cancel button(x) in image ）。

也不应该像我们在 Blend 上使用带有 VS 的 Toolbox 那样将面板停靠在另一个地方。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:34:36.417

我创建了一个窗口来向您展示如何实现您的目标。它在窗口的右上方有 2 个按钮，如果单击每个按钮，将展开红色或黑色边框。

```
<Window x:Class="WpfApplicationUpper.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:my="clr-namespace:WpfApplicationUpper" Height="100" Width="200">

<Window.Resources>
    <ControlTemplate x:Key="VerticalExpander" TargetType="{x:Type Expander}">
        <Border Name="ContentBorder"
                Width="0">
            <ContentPresenter />
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsExpanded"
                     Value="True">
                <Setter TargetName="ContentBorder"
                        Property="Width"
                        Value="Auto" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="20" />
    </Grid.ColumnDefinitions>
    <StackPanel Grid.Column="1" Orientation="Vertical">
        <Button Name="B1" Content="T" Click="B1_Click"/>
        <Button Name="B2"
                Content="F" Click="B2_Click"/>
    </StackPanel>
    <DockPanel LastChildFill="True">
        <Grid DockPanel.Dock="Right">
            <Expander Name="MainExpander1"
                      Template="{StaticResource VerticalExpander}"
                      IsExpanded="False">
                <Border Background="Black"
                        Width="50">
                </Border>
            </Expander>
            <Expander Name="MainExpander2"
                      Template="{StaticResource VerticalExpander}"
                      IsExpanded="False"
                      DockPanel.Dock="Right">
                <Border Background="Red"
                        Width="50">
                </Border>
            </Expander>
        </Grid>
        <Border Name="NonSliding"
                Width="100"
                Height="50"
                Background="Green">

        </Border>
    </DockPanel>
</Grid>
</Window> 
```

在后面的代码中：

```
 private void B1_Click(object sender, RoutedEventArgs e)
    {
            MainExpander1.IsExpanded = !MainExpander1.IsExpanded;
    }

    private void B2_Click(object sender, RoutedEventArgs e)
    {
        MainExpander2.IsExpanded = !MainExpander2.IsExpanded;
    } 
```

# python - Python语法错误没有意义

> ID：13989656
> 
> 赞同：-4
> 
> 时间：2012-12-21T11:51:02.150
> 
> 标签：python, python-3.x

我刚刚编写了一个简单的 Python 类来创建一个列表列表（这将是一个井字游戏板），它给了我一个语法错误。

我已经将语法与许多其他类进行了比较，所有这些类都有效，并且所有这些类都具有相同的语法（据我所见）。

这是 Python 3.2。错误发生在代码的第二个冒号处，因此在构造函数声明之后（或者至少是红色突出显示的内容）。

```
class Board:
    def__init__(self, N):
        """Create a list of lists that will represent my playing board"""
        self._N = N
        Brd = []
        for i in range(N):
            Brd = Brd + ['()','()','()']
        self._theBoard = Brd

    def drawBoard(N):
        """Draws the Board"""
        print(self._theBoard) 
```

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T11:52:54.543

`def`您在and之间缺少一个空格`__init__`：

```
def__init__(self, N): 
```

将其添加到：

```
def __init__(self, N): 
```

请注意，您的`drawBoard(N)`方法缺少`self`参数；`N`将在调用时设置为实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T11:53:24.980

I guess you meant `drawBoard` to be a method in your `Board` class, in this case you need to pass `self` to it explicitly:

```
def drawBoard(self, N):
    """Draws the Board"""
    print(self._theBoard) 
```

and it should be indented the same way as the other method. Note, that the `N` parameter is useless here.

Others already pointed missing space after `def` in your `__init__` method definition.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T11:53:12.337

你忘了在这里给一个空间：

```
def__init__(self, N): 
```

应该

```
def __init__(self, N): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T11:58:33.063

`__init__` is the way to define constructor in python. You have to precede it by `def` to declare it is a function. Hence the correct way to do so is:

```
def __init__(): 
```

That is put space between def and **init**.

# getjson - getJson ajax 请求

> ID：13989669
> 
> 赞同：0
> 
> 时间：2012-12-21T11:51:23.580
> 
> 标签：getjson

请帮忙，我一直在尝试获取 Json 数据但无济于事。我已经设法让它在 Dreamweaver 中工作，但一旦上传到我的域，它就无法工作。我看过很多例子，但无法让我的工作。我已经看到从 flikr 获取适用于我的域的图片的示例。我需要从[http://api.open-notify.org/iss-now/获取 json 数据](http://api.open-notify.org/iss-now/)

这适用于dreamwaever

```
$.getJSON('http://api.open-notify.org/iss-now/',
function(json) {   
$('#images1').text(json.timestamp);  
}); 
```

和这个

```
$.ajax({
type: 'GET',
url: MyUrl,
dataType: "json",
success: function(data){alert("Success");hello(data);},
error: function(XMLHttpRequest, textStatus, errorThrown){alert("Error : "+" ':' "+textStatus+" ':' "+errorThrown);},
});} 
```

这是一个跨域问题吗？为什么 Flikr 也可以工作，因为这也是跨域的？请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:02:17.877

跨域应使用 JSONP 完成，请查看[此问题](https://stackoverflow.com/questions/2067472/please-explain-jsonp)和[此处](http://api.jquery.com/jQuery.getJSON/)的 JSONP 部分。

# javascript - 在网页的一部分中为特定标签设置锚标签

> ID：13989673
> 
> 赞同：0
> 
> 时间：2012-12-21T11:51:34.847
> 
> 标签：javascript, jquery, html, css

由于这是一个简单的问题，我猜它不需要粘贴整个代码。

我在左侧的导航部分中设置了锚标签，以将我带到我网站中的不同部分，例如`home, about, contact`等。
在联系部分中，我有三个标签`location, address, contact`，顺序相同。

因此，当我单击导航菜单中的联系人时，它应该将我带到联系人部分中的位置选项卡。这实际上已经完成。但它只在页面重新加载时这样做。
当我单击联系人部分中的地址选项卡时，返回主页，然后如果我再次单击导航列表中的联系人菜单，它会显示地址的内容而不是位置。我需要联系人菜单每次都将我带到联系人部分的位置选项卡，而不仅仅是在页面重新加载时。

[http://s133036305.onlinehome.us/#home](http://s133036305.onlinehome.us/#home)

导航菜单（侧栏）：

```
<div id="navigation" class="span3">
    <div class="tabbable tabs-left">
        <ul class="nav nav-tabs" style "width: 220px;">
            <li class="active"><a href="#home" data-toggle="tab"> Home </a></li>
            <li><a href="#about" data-toggle="tab"> About Us </a></li>
            <li><a href="#service" data-toggle="tab"> Services </a></li>
            <li><a href="#contact" data-toggle="tab"> Contact </a></li>
        </ul>
        <div class="tab-content">
        </div>
    </div>
</div> 
```

联系部分：

```
<div class="tabbable">
    <!-- Only required for left/right tabs -->
    <ul id="contact" class="nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">
        <h2>Address</h2>
        </a></li>
        <li><a href="#tab2" data-toggle="tab">
        <h2>Location</h2>
        </a></li>
        <li><a href="#tab3" data-toggle="tab">
        <h2>Contact</h2>
        </a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="tab1">
            <ul style "list-style-type:none; height:500px;">
                <li> Corporate Building </li>
                <a href "www.leadgp.org" target="_blank">
                <li> www.leadgp.org </li>
                </a>
                <li> No.143, </li>
                <li> Dr.Jaganathan Nagar, </li>
                <li> 1st Street, </li>
                <li> Civil Aerodrome Post, </li>
                <li> Coimbatore-641014\. </li>
            </ul>
        </div>
        <div class="tab-pane" id="tab2">
            <div class "map" p">
                <div id="map" style="width: 760px; height: 500px; background: url(http://geofinder.web4you.com.pl/template/loader.gif); background-repeat: no-repeat; background-position: center;">
                </div>
                <div style="padding-top:10px; text-align: right; width: 790px;">
                </div>
            </div>
            <br>
            <br>
        </div>
        <div class="tab-pane" id="tab3">
            <form method="get" action="MAILTO:mail@Datacrawl.org" method="post" enctype="text/plain" id="contact-form" class="form-horizontal form1" style "height: t: 500px; <div class="control-group">
                <label class="control-label" for="name"> Name* </label>
                <div class="controls">
                    <input style "height: t: 30px;" type="text" class="span3" name="name" id="name">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="email"> Email </label>
                <div class="controls">
                    <input type="text" class="span3" name="email" id="email">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="address">Address</label>
                <div class="controls">
                    <textarea class="span3 required" name="address" id="address" rows="3"></textarea>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="number"> Phone </label>
                <div class="controls">
                    <input style "height: t: 30px;" type="text" class "span3" 3" name "number" r" id "number" r">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="comments"> Message </label>
                <div class="controls">
                    <textarea class "span3" 3" name "comments" s" id "comments" s" rows "3" 3"></textarea>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="submit btn btn-primary" style "font-family: 'droid sans', sans-serif;">Submit</button>
            </div>
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:15:56.250

Where do your (anchor)links link to? Normally you would have the link that is actually used to be clicked on, for example:

Go to location

And you would have your anchorlink to which the page will go after clicking, like so:

```
<a name="location"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:01:21.583

澄清一下，您想要将菜单中的“联系”链接链接到联系部分中的特定选项卡？

因此，如果您选择了“您好”并再次单击联系人链接，它将重置为默认选项卡？

如果是这样，您可以使用 javascript/jQuery 在每次按下联系我们链接时单击默认选项卡。像这样的东西：

```
$('#ContactLinkID').click(function(){
$('#DefaultTabID').click();
}); 
```

# javascript - 将 DOM iframe 对象更改为 iframe 后，javascript 开始无限循环

> ID：13989678
> 
> 赞同：0
> 
> 时间：2012-12-21T11:51:52.240
> 
> 标签：javascript, iframe

将 DOM`iframe`对象更改为后`iframe`，JavaScript 开始无限循环。

```
var i = 0;
document.onmousemove = (function () {
    if (i < 1) {
        i++;
        document.write('<iframe src=\"http://example.com\" height=200 width=200 align=\"left\"></iframe>');
    }
}) 
```

我做错了什么？

Dom 例子[http://jsfiddle.net/JkJNH/6/](http://jsfiddle.net/JkJNH/6/) 这个例子[http://jsfiddle.net/JkJNH/7/](http://jsfiddle.net/JkJNH/7/)

# c# - 如何用分号处理 TreeView 节点；

> ID：13989680
> 
> 赞同：0
> 
> 时间：2012-12-21T11:51:54.233
> 
> 标签：c#, tfs, replace, treeview, nodes

我有一个用 TFS 工作项填充的 DevComponents.AdvTree。每个工作项都有一个名为“Folder”的纯文本字符串，它保存项目在旧系统中保存的文件夹结构。

我已经实现了功能，以便树视图节点的拖放会自动更新“文件夹”字符串以匹配节点的完整路径。

如果工作项具有“文件夹”字符串，例如：

```
"Folder1/Folder2/Folder3" 
```

那么 AdvTree 在 FullPath 属性中将其表示为：

```
"Folder1;Folder2;Folder3" 
```

如果节点被拖放，则执行以下代码：

```
 public static void UpdateNode(Node node)
    {
        string nodePath;
        WorkItem wi = (WorkItem)node.Tag;

        nodePath = node.FullPath.Replace(';', '/');

        wi.Open();
        wi.Fields[30].Value = nodePath; //The 'Folder' string'
        wi.Save();
        wi.Close();
        wi = null;
    } 
```

这很好，除非`;`原始“文件夹”字符串中包含分号。在这种情况下，*有效*的分号也会被替换为 a `/`，从而导致整个文件夹结构发生变化。

我想到了一个解决方案，用另一个字符或字符串替换所有现有的分号，并将其显示为`;`TreeView 中的 a ，但这似乎很复杂。

谁能提供更简单的解决方案？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:17:35.867

感谢 JleruOHeP 在评论中回答了这个问题。

返回 AdvTree 的 FullPath 时用于分隔节点的字符实际上可以在运行时使用以下代码进行更改：

```
testCaseTreeView.PathSeparator = "/"; 
```

如果使用标准 TreeView，这可以在设计时设置。

# sdk - 如何设置 AppointmentRequest.UserTimeZoneCode 属性？

> ID：13989681
> 
> 赞同：0
> 
> 时间：2012-12-21T11:51:55.917
> 
> 标签：sdk, timezone, crm, microsoft-dynamics

我尝试安排服务预约，但对[AppointmentRequest 类型的](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.appointmentrequest.aspx)[UserTimeZoneCode 属性](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.appointmentrequest.usertimezonecode.aspx)感到困惑。根据 MSDN 文章，这是属性。`int`

[不幸的是，官方示例代码](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.appointmentrequest.aspx)中缺少信息（只是花哨的“幻数”）：

```
// Create the appointment request.
AppointmentRequest appointmentReq = new AppointmentRequest
{
    ...
    // The search window describes the time when the resouce can be scheduled.
    // It must be set.
    SearchWindowStart = DateTime.Now.ToUniversalTime(),
    SearchWindowEnd = DateTime.Now.AddDays(7).ToUniversalTime(),
    UserTimeZoneCode = 1
}; 
```

那么，我在哪里可以找到与特定时区匹配的代码？任何地方都有它的枚举吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:05:35.690

[使用此SDK 示例代码](http://msdn.microsoft.com/en-us/library/hh547406.aspx)得到它：`SampleCode\CS\BusinessDataModel\BusinessManagement\WorkingWithTimeZones.cs`

此示例展示了如何使用带有时区的各种 SDK 消息。

`GetAllTimeZonesWithDisplayNameRequest`可以使用消息从系统中检索已存在的时区列表。

此外，在以前版本的 SDK 中遇到此枚举：[TimeZoneCode Class (CrmHelpers)](http://msdn.microsoft.com/en-us/library/bb887715.aspx)。请记住，它与 CRM 2011 中的 TimeZones 完全不匹配，但请注意这一点。

# c# - BusyIndi cator 允许两次触发 RelayCommand

> ID：13989684
> 
> 赞同：1
> 
> 时间：2012-12-21T11:52:26.733
> 
> 标签：c#, wpf, mvvm, task-parallel-library, busyindicator

我有一个 WPF 应用程序，它遵循 MVVM。

为了使 UI 响应，我使用 TPL 执行长时间运行的命令和[BusyIndi​​cator](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator&referringTitle=Home)向用户显示，该应用程序现在很忙。

在其中一个视图模型中，我有这个命令：

```
public ICommand RefreshOrdersCommand { get; private set; }

public OrdersEditorVM()
{
    this.Orders = new ObservableCollection<OrderVM>();
    this.RefreshOrdersCommand = new RelayCommand(HandleRefreshOrders);

    HandleRefreshOrders();
}

private void HandleRefreshOrders()
{
    var task = Task.Factory.StartNew(() => RefreshOrders());
    task.ContinueWith(t => RefreshOrdersCompleted(t.Result), 
        CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, TaskScheduler.FromCurrentSynchronizationContext());
    task.ContinueWith(t => this.LogAggregateException(t.Exception, Resources.OrdersEditorVM_OrdersLoading, Resources.OrdersEditorVM_OrdersLoadingFaulted),
        CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, TaskScheduler.FromCurrentSynchronizationContext());
}

private Order[] RefreshOrders()
{
    IsBusy = true;
    System.Diagnostics.Debug.WriteLine("Start refresh.");
    try
    {
        var orders = // building a query with Entity Framework DB Context API

        return orders
            .ToArray();
    }
    finally
    {
        IsBusy = false;
        System.Diagnostics.Debug.WriteLine("Stop refresh.");
    }
}

private void RefreshOrdersCompleted(Order[] orders)
{
    Orders.RelpaceContent(orders.Select(o => new OrderVM(this, o)));

    if (Orders.Count > 0)
    {
        Orders[0].IsSelected = true;
    }
} 
```

`IsBusy`property 与 绑定`BusyIndicator.IsBusy`，`RefreshOrdersCommand`property 与工具栏上的按钮绑定，该按钮位于`BusyIndicator`此视图模型的视图中。

**问题**。

如果用户不经常点击按钮，一切正常：`BusyIndicator`用按钮隐藏工具栏，数据被加载，`BusyIndicator`消失。在输出窗口中，我可以看到成对的行：

> 开始刷新。停止刷新。

但是如果用户*非常*频繁地点击按钮，看起来好像`BusyIndicator`没有及时隐藏工具栏，并且两个后台线程尝试执行`RefreshOrders`方法，这会导致异常（这没关系，因为EF`DbContext`不是线程安全的）。在输出窗口中，我看到了这张图片：

> 开始刷新。开始刷新。

我究竟做错了什么？

我查看了`BusyIndicator`'s 的代码。我不知道，那里可能有什么问题：设置`IsBusy`只是对 进行两次调用`VisualStateManager.GoToState`，而这反过来又使一个矩形可见，它隐藏了`BusyIndicator`的内容：

```
 <VisualState x:Name="Visible">
                       <Storyboard>
                          <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.001" Storyboard.TargetName="busycontent" Storyboard.TargetProperty="(UIElement.Visibility)">
                             <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                <DiscreteObjectKeyFrame.Value>
                                   <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                             </DiscreteObjectKeyFrame>
                          </ObjectAnimationUsingKeyFrames>
                          <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.001" Storyboard.TargetName="overlay" Storyboard.TargetProperty="(UIElement.Visibility)">
                             <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                <DiscreteObjectKeyFrame.Value>
                                   <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                             </DiscreteObjectKeyFrame>
                          </ObjectAnimationUsingKeyFrames>
                       </Storyboard>
                    </VisualState> 
```

...并禁用内容：

```
 <VisualState x:Name="Busy">
                       <Storyboard>
                          <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.001" Storyboard.TargetName="content" Storyboard.TargetProperty="(Control.IsEnabled)">
                             <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                <DiscreteObjectKeyFrame.Value>
                                   <sys:Boolean>False</sys:Boolean>
                                </DiscreteObjectKeyFrame.Value>
                             </DiscreteObjectKeyFrame>
                          </ObjectAnimationUsingKeyFrames>
                       </Storyboard>
                    </VisualState> 
```

有任何想法吗？

**更新**。问题不在于如何防止命令重入。我想知道机制，它允许按下按钮两次。

这是它的工作原理（从我的角度来看）：

*   `ViewModel.IsBusy`与 绑定`BusyIndicator.IsBusy`。绑定是同步的。
*   `BusyIndicator.IsBusy`呼叫二传手`VisualStateManager.GoToState`两次。其中一个调用使一个矩形可见，该矩形与`BusyIndicator`的内容（在我的例子中是按钮）重叠。
*   因此，据我所知，在我设置后我无法物理实现按钮`ViewModel.IsBusy`，因为所有这些事情都发生在同一个（UI）线程上。

但是按钮如何被按下两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:39:02.673

我不会尝试依靠繁忙指示器来控制有效的程序流程。命令执行集`IsBusy`，如果`IsBusy`已经是，它本身不应该运行`True`。

```
private void HandleRefreshOrders()
{
    if (IsBusy)
        return;
... 
```

您也可以将按钮的`Enabled`状态绑定到`IsBusy`，但我认为核心解决方案是防止您的命令意外重新进入。解雇工人也会增加一些复杂性。我会将状态设置移动到`HandleRefreshOrders`然后处理实现中的状态重置`ContinueWith`。（可能需要一些额外的建议/阅读以确保它是线程安全的。）

*编辑：澄清移动`IsBusy`以避免双重执行：

```
private void HandleRefreshOrders()
{
    if (IsBusy)
        return;

    IsBusy = true;

    var task = Task.Factory.StartNew(() => RefreshOrders());
    task.ContinueWith(t => 
            {
                RefreshOrdersCompleted(t.Result);
                IsBusy = false;
            }, 
        CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion,  TaskScheduler.FromCurrentSynchronizationContext());
    task.ContinueWith(t => 
            {
                this.LogAggregateException(t.Exception, Resources.OrdersEditorVM_OrdersLoading, Resources.OrdersEditorVM_OrdersLoadingFaulted);
                IsBusy = false;
            },
    CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

然后从方法中删除`IsBusy`引用。`RefreshOrders`一旦你点击按钮一次，`IsBusy`就会被设置。如果用户快速点击，第二次触发命令的尝试将跳过。任务将在后台线程上执行，一旦完成，`IsBusy`标志将被重置，命令将再次响应。这当前假设调用`RefreshOrdersCompleted`并且`LogAggregateException`不冒泡异常，否则如果它们抛出，标志将不会被重置。可以在这些调用之前移动标志重置，或者在 annon 中使用 try/finally。方法声明。

# php - 通知系统（电子邮件、社交媒体）

> ID：13989694
> 
> 赞同：4
> 
> 时间：2012-12-21T11:53:06.920
> 
> 标签：php, mysql, email, notifications, social-networking

我目前正在为我正在合作的公司编写一个小型内部社交媒体平台，没什么大不了的，大约。40,000 多名用户。它基本上类似于 Facebook 或 Google+，但功能较少。

这个平台也有一个电子邮件通知系统（除了在线用户的 Ajax 通知）。

现在这是我的问题 - 它根本不是缩放。

我有一个 mySQL 表，其中包含要发送的所有电子邮件通知。因此，一旦有人在组中写了一个故事，系统就会自动在该表中插入一行，并且 email_send 函数（cronjob）会将这些邮件发送给用户（用户可以在即时、每日或每周通知邮件之间进行选择）

到目前为止，一切都很好——如果团体的成员数量很少的话。

但是现在想象一个有 5k+ 成员的组 - 一旦用户将故事发布到该组中，它就会触发 5,000 条 SQL 插入到通知表中。

你会如何解决这个问题？我想到了服务器上的后台工作人员，它会扫描新的故事/评论/内容并在后台触发 email_send 功能。这个规模会更好吗？或者是否有一个标准的方法，我只是在思考错误的方向？

任何正确方向的观点都会非常感激，谢谢你和圣诞快乐:)

// 马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:58:44.200

您不应该通过发送电子邮件来减慢正常的 Web 请求/响应流程 - 只需将数据转储到队列中并让后台作业接手该工作 - 听起来您已经在使用 cron 执行此操作，对吗？

那么是插入是导致缓慢的原因吗？然后只需标准化您的数据并在您的电子邮件队列表中插入一个 groupID。该 groupID 与包含 X 个用户及其电子邮件地址的组相关联。那么你将插入 1 条记录而不是 5000 条记录。所以很快，也许是这样的......

```
notificationTable
rowID | emailID | groupID | status

groupTable
groupID | groupName 

userTable
userID | userName | emailAddress | groupID 
```

如果您想更进一步，那么您可以引入一个消息传递系统，以便您可以触发简单（快速）的消息，并让一个或多个侦听器（在一个或多个单独的服务器上）在一个或多个通道上等待消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:58:46.997

好的，我想出了以下（可能的）解决方案来解决我的问题：

*   我已经有一个表“**事件**”：

`rowID (event_id)| story_id | initiator | group_id`

*   创建一个新表“ **not_notified** ”：

`rowID | event_id`

一旦有人发布新的故事/评论，系统现在将在表“not_notified”中插入一行。

每隔几分钟就会运行一个 cron 作业（如果这里出现速度问题，可以从另一台专用服务器运行）并选择“not_notified”表。它只是遍历所有记录集并查找每个 event_id、提取故事、检查通知设置以通知用户并将电子邮件通知发送给用户。最后，脚本从“not_notified”中删除该行。

我什至可能不需要“not_notified”表——它也可以通过事件表中的一个简单的“新”字段来完成，但是在该表中成像数百万个条目......

想法？

# wordpress - 如何在响应式布局中为移动屏幕添加另一个导航

> ID：13989703
> 
> 赞同：0
> 
> 时间：2012-12-21T11:53:39.630
> 
> 标签：wordpress, layout, navigation, responsive-design

我正在使用响应式布局进行 wordpress 主题设计。响应式布局是使用 css3 media quires 安排的。目前这个主题导航依赖于大屏幕尺寸的水平超级鱼导航。我想使用超级鱼或手风琴将导航更改为垂直。如何更改移动屏幕的导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:03:00.823

这实际上取决于菜单的输出代码如何构建以使其具有响应性。但是，这里有一些可能会有所帮助的想法。有时您可以在移动设备上将菜单全部隐藏起来，然后显示另一个版本。这很棘手，因为在 DOM 中隐藏项目仍会将 HTML 输出到移动浏览器上，这会增加加载时间，但有时它是取决于可用性的最佳解决方案。

这是一个在 iPhone 等移动设备上输出滚动选择的快速片段

```
<select class="iphone-menu" ONCHANGE="location = this.options[this.selectedIndex].value;">
<option value="" selected="selected">Main Menu</option> 
<option value="/">Home</option> 
<option value="/portfolio">Portfolio</option> 
<option value="/services">Services</option> 
<option value="/knowledge">Knowledge</option> 
<option value="/blog">Blog</option> 
<option value="/about">About</option> 
<option value="/contact">Contact</option> 
</select> 
```

我认为你想要的东西虽然你需要寻找这样的东西： [http ://wpmegamenu.com/](http://wpmegamenu.com/)

我通常不推荐插件，但此菜单确实可以很好地折叠，以及您想要的方式。也许这可能是一个很好的参考点。他们使列表项在某个点具有 100% 的宽度，然后以不同的方式设置下拉菜单的样式。

它不会做手风琴，但会做下拉菜单。要制作手风琴，您必须使用 javascript 激活窗口调整大小的脚本，因此它只能在移动设备上用作手风琴，并在台式机和平板电脑上关闭。我绝不是 js 方面的专家，所以也许其他人可以更好地指导你，但基本的调整大小功能将是这样的：

```
 function checkWidth(init)
{
    /*If browser resized, check width again */
    if ($(window).width() < 979 ) {

        // accordion script here

    }
    else {
        if (init == false) {

            // deactivate script here

        }
    }
}

// this function returns the width of the browser window
$(document).ready(function() {
    checkWidth(true);

    $(window).resize(function() {
        checkWidth(false);
    });
}); 
```

希望这会为您指明正确的方向。我使用这些不同的方法在响应式网站上实现了不同的菜单，它们对我来说效果很好。

# javascript - 谷歌翻译

> ID：13989704
> 
> 赞同：3
> 
> 时间：2012-12-21T11:53:40.970
> 
> 标签：javascript, button, google-translate

问题是，当我选择一种语言时，我会用谷歌搜索打开的乐队。这是我的代码：

```
<! - Begin TranslateThis Button ->

<div id="translate-this">
    <a href="http://translateth.is/" class="translate-this-button">
    <img src = ".. / modules / traduireshop / images / FR. jpg "alt =" "style =" border: 0 "/>
    </ a>
</ div>
<script type="text/javascript" src="http://www.google.com/jsapi"> </ script>
<script type="text/javascript" src="http://x.translateth.is/translate-this.js"> </ script>
<script type="text/javascript">
    // javascript - see below
</ script>

<! - End TranslateThis Button -> 
```

我的网站地址是： http: [//www.lecoindesvelos.com](http://www.lecoindesvelos.com)

```
TranslateThis ({
    undoText: 'Undo', '
    panelText 'Translate Into:'
    moreText: More Languages ??'36 "'
    busyText: 'Translating page ...'
    CancelText: 'cancel',
    ddLangs: [
        'fr',
        'en',
        'of'
        'it'
        'es',   
    ],
    noBtn: true
}); 
```

你能告诉我哪里有问题吗？
我更想拥有这个乐队。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:00:36.467

您的对象的语法不正确，请尝试以下操作：

```
TranslateThis({
    undoText: 'Undo',
    panelText: 'Translate Into:',
    moreText: "More Languages '36'",
    busyText: 'Translating page ...',
    CancelText: 'cancel',
    ddLangs: [
        'fr',
        'en',
        'of',
        'it',
        'es'
    ],
    noBtn: true
}); 
```

* * *

此外，您错误地关闭了一些 html 标签：

```
 </ a>
</ div> 
```

那应该是：

```
 </a>
</div> 
```

* * *

最后，这些 HTML 注释缺少一些破折号：

```
<! - Begin TranslateThis Button -> 
```

尝试这个：

```
<!-- Begin TranslateThis Button --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:12:52.360

看起来“翻译此”按钮的服务[http://translateth.is](http://translateth.is)已关闭。在该站点上运行的演示也不起作用。

Firebug 显示您的站点尝试访问`http://85.17.190.170:9013/socket.io/1/?t=1356094015380`，但没有响应）。

另外，您的问题不完整：

> 问题是，当我选择一种语言时，我会用谷歌搜索打开的乐队。

当您选择一种语言时会发生什么？你说你“谷歌打开的乐队”；你的意思是你对打开的乐队进行谷歌搜索吗？（我猜不是，我只是在这里猜测）。或者您的意思是您希望看到更多的语言列表？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:01:14.460

您在创建对象时使用了不匹配的引号和缺少逗号。正确的代码应该是：

```
<script type="text/javascript">
    TranslateThis ({
        undoText: 'Undo', //removed a quote
        panelText: 'Translate Into:', //added a colon after key and added comma
        moreText: 'More Languages (36)', //removed unmatched quote, added comma
        busyText: 'Translating page ...', //added comma
        CancelText: 'cancel', 
        ddLangs: [
            'fr',
            'en',
            'of', //added comma
            'it', //added comma
            'es' //removed comma - it's the end of the array, so no need
        ],
        noBtn: true
    });
</script> 
```

# java - 将 REST 与 Struts 2 集成

> ID：13989706
> 
> 赞同：4
> 
> 时间：2012-12-21T11:53:46.587
> 
> 标签：java, spring, rest, struts2, struts2-rest-plugin

您如何集成或创建 REST Web 应用程序？我看到了这个插件[struts rest-plugin](http://struts.apache.org/docs/rest-plugin.html)但文档没有提供任何运行示例。

将 REST 与 Struts2 或其他 REST 插件一起用于 Struts2 是否有任何替代方案？我搜索了另一个支持 REST 的框架，我看到了 spring 框架。无论如何，我可以将 Spring 框架休息与 Struts2 休息合并吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:31:32.223

Spring 支持 Struts 1 和 2 以及 Java Faces。在我看来，它还有自己的 Web MVC 框架，这对所有框架都有很大的改进。

无论您是从 Spring 服务还是 Struts Action 类执行此操作，您只需要调用调用 REST 或 SOAP 服务的 REST 或 SOAP 客户端来完成用例。你真的只需要一个好的客户端库。

REST 很简单——任何 HTTP 客户端都可以。

可以从 Apache 或 Spring 获得 SOAP 客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T14:02:59.527

查看这些示例，了解如何使用 Struts2（和 REST 插件）构建 REST 应用程序：

[示例1](https://github.com/meeiw/struts2-blog)

[示例2](https://github.com/darek/struts2-rest-shopping-list)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T11:56:18.163

是的，您可以将它们全部集成，请参阅[我的博客文章](http://amirzucker.wordpress.com/2012/11/05/creating-an-online-service-dont-start-from-scratch/)，它有详细的描述和一个代码示例，它准确地展示了如何使这一切一起工作，从零到生产。

# java - 如何获取 xml 标签内的值？

> ID：13989709
> 
> 赞同：1
> 
> 时间：2012-12-21T11:53:51.540
> 
> 标签：java, xml, xml-parsing, jaxb

我正在尝试获取 xml 文件的值。

```
<p1>
    <cts>Pq44</cts>
    <cts>qw44</cts>
</p1> 
```

`P1.JAVA`

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class P1 {
    private List<Cts> cts;

     public P1() {
         cts = new ArrayList<cts>();
     }  
     public List<cts> getcts() {
        return cts;
     }
     public void setcts(List<cts> cts) {
        this.cts = cts;
     }
} 
```

`CTS.JAVA`

```
public class CTS {

    private String ct;

    // Getter and setter for ct.

} 
```

我的`Main.java`

```
try {            
    File file = new File("D:\\Bye.xml");
    JAXBContext jaxbContext = JAXBContext.newInstance(P1.class);

    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
    P1 p = (P1) jaxbUnmarshaller.unmarshal(file);

    List<CTS> cts =  p.getCTS();
    // Size of list coming right `2`
    for (CTS c : cts) {
          System.out.println(CTS2.getCT());
    }
} catch (JAXBException e) {
    e.printStackTrace();
} 
```

当我运行 main.java 时，它会打印：

```
null
null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:59:11.757

我认为你的循环应该看起来像

```
for (CTS c : cts) {
    System.out.println(c.getCt());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:06:16.527

您可以使用`@XmlValue`并执行以下操作：

**中旅**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class CTS {

    @XmlValue
    private String ct;

    public String getCt() {
        return ct;
    }

    public void setCt(String ct) {
        this.ct = ct;
    }

} 
```

**P1**

```
import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class P1 {

    private List<CTS> cts;

    public P1() {
        cts = new ArrayList<CTS>();
    }

    public List<CTS> getCts() {
        return cts;
    }

    public void setCts(List<CTS> cts) {
        this.cts = cts;
    }

} 
```

**p1.xml**

```
<p1>
    <cts>Pq44</cts>
    <cts>qw44</cts>
</p1> 
```

**应用程序**

```
import java.io.File;
import java.util.List;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args ) throws JAXBException
    {
        System.out.println( "Hello World!" );
        String filePath = ".\\p1.xml";

        File file = new File(filePath);
        JAXBContext jaxbContext = JAXBContext.newInstance(P1.class);

        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        P1 p = (P1) jaxbUnmarshaller.unmarshal(file);

        List<CTS> cts =  p.getCts();
        // Size of list coming right `2`
        for (CTS c : cts) {
              System.out.println(c.getCt());
        }
    }
} 
```

**输出**

```
Hello World!
Pq44
qw44 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-21T13:25:26.483

我已经做了一些工作。我正在发布我的代码，它将在基于 XML 文件上工作。

**p1.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<p1>
    <cts>Pq44</cts>
    <cts>qw44</cts>
</p1> 
```

**P1.java**

```
import java.util.ArrayList;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "p1")
public class P1 {

    private ArrayList<String> cts;
    public ArrayList<String> getCts() {
        return cts;
    }
    public void setCts(ArrayList<String> cts) {
        this.cts = cts;
    }
} 
```

**测试应用程序.java**

```
import java.io.File;
import java.util.List;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args ) throws JAXBException
    {
        System.out.println( "Hello World!" );
        String filePath = ".\\p1.xml";

        File file = new File(filePath);
        JAXBContext jaxbContext = JAXBContext.newInstance(P1.class);

        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        P1 p = (P1) jaxbUnmarshaller.unmarshal(file);

        List<String> cts =  p.getCts();
        // Size of list coming right `2`
        for (String c : cts) {
              System.out.println(c);
        }
    }
} 
```

尝试这种方式它会正常工作。

**输出**

```
Hello World!
Pq44
qw44 
```

# php - 在 codeigniter 中获取不正确的查询

> ID：13989717
> 
> 赞同：4
> 
> 时间：2012-12-21T11:54:34.357
> 
> 标签：php, mysql, codeigniter

`$id="'10','11',12'"`当我使用上述值从 mysql 表中获取记录时，我通过控制器将变量值从视图传递到模型`$id`：

```
$query=$this->db->query('select * from userdetails where Id IN ($ids)') 
```

我没有得到结果，但它将查询打印为：

```
SELECT * FROM (`userdetails`) WHERE `Id` IN ('\'10\',\'11\',\'12\'') 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:58:28.503

**好的试试这个：**

```
$this->db->escape($id);
$query=$this->db->query("select * from userdetails where Id IN ($ids)"); 
```

`stripslashes($id);` 在传入查询之前使用 。或者 `mysql_real_escape_string()`也应该工作。
这样 ：

```
$ids = stripslashes($ids);
$query=$this->db->query("select * from userdetails where Id IN ($ids)"); 
```

或者您可以以这种方式发送以逗号分隔的值 $ids = "11,12,13"; 它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:03:51.500

将 id 发送到数组中...

```
$id_array = array('10','11','12'); 
```

模型：

```
//implode converts your array into a string without quotes
$comma_separated = implode(",",$id_array);
$query=$this->db->query('select * from userdetails where Id IN ($comma_separated)'); 
```

# cakephp - cakephp 2 个具有共享核心的应用程序

> ID：13989719
> 
> 赞同：0
> 
> 时间：2012-12-21T11:54:37.773
> 
> 标签：cakephp

我有 2 个 CakePHP 应用程序。它们位于同一服务器上，位于 2 个不同的端口（80 和 1112）上

如何配置它们以使用 1 个共享的 Cake 核心？（如果可能，请发送完整的指南）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:08:55.027

您可以将您的应用程序文件夹放置在您的网络服务器需要的位置。将蛋糕文件夹放在您需要的地方。相应地更新 app/webroot/index.php 和 app/webroot/test.php

*   更新`define('CAKE_CORE_INCLUDE_PATH', DS.'path' . DS . 'to'.DS.'cake_core'. DS. 'lib' );`

这两个文件都有很好的自我记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:11:49.127

最简单的方法是物理共享同一个文件夹。使用 apache 虚拟主机设置，您可以轻松地将它们路由到两个不同的域

设置只是

```
 app1/
 app2/
 vendors/
 lib/Cake 
```

# vim - 在函数之间跳转（帕斯卡）

> ID：13989726
> 
> 赞同：4
> 
> 时间：2012-12-21T11:55:31.953
> 
> 标签：vim

我知道 Vim 有 "[[" 和 "]]" 在函数之间移动的快捷方式。但是，我怎样才能不仅为 C 语言而且为 Pascal 语法添加这个功能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:16:54.890

一些文件类型重新定义了内置`]]`映射以跳转到下一个函数的开头。例如，看看`$VIMRUNTIME/ftplugin/vim.vim`：

```
" Move around functions.
nnoremap <silent><buffer> [[ m':call search('^\s*fu\%[nction]\>', "bW")<CR>
vetlocal foldmethod< foldtext< foldexpr< | delcommand FoldToggle oremap <silent><buffer> [[ m':<C-U>exe "normal! gv"<Bar>call search('^\s*fu\%[nction]\>', "bW")<CR> 
```

您可以在 中定义类似的映射（例如到`begin`/`end`关键字）`~/.vim/after/ftplugin/pascal.vim`。

* * *

如果您想要一个舒适的插件，可以轻松设置这些映射，支持 [count]，并且还提供文本对象来选择整个函数，请查看我的[CountJump 插件](http://www.vim.org/scripts/script.php?script_id=3130)。在它的帮助中甚至还有一个关于 Pascal 的例子：

```
:call CountJump#Motion#MakeBracketMotion('<buffer>', '', '', '\c^begin\n\zs', '\c^.*\nend', 0) 
```

# vb.net - DateTime 存储问题:: 数据过载

> ID：13989728
> 
> 赞同：0
> 
> 时间：2012-12-21T11:55:51.847
> 
> 标签：vb.net

我在我的数据库表中定义了一个字段来存储时间。该字段的默认长度为 8。我从 TimeODay 存储时间，它显示 12:44:10 PM，这会使数据过载。如何将此数据存储到我的 DateTime 字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:11:41.933

你可以试试这个：

```
Dim CurrentTime As String
CurrentTime = TimeOfDay.ToLongTimeString.ToString.Replace(":", "")
CurrentTime = CurrentTime.Replace(" ", "")
If CurrentTime.Length = 7 Then
    CurrentTime = "0" & CurrentTime
End If
MsgBox(CurrentTime, MsgBoxStyle.OkOnly) 
```

这将返回`TimeOfDay`如下：

输入：12:44:10 PM 输出：124410PM

然后，您可以在显示它时使用一些代码将其恢复为默认格式。

编辑1：

或者更好的是，您可以使用 24 小时时间...这会将 12:44:10 PM 显示为 12:44:10（8 个字符）或 4:30:45 PM 显示为 16:30:45。

# c++ - 为什么这个程序有这种行为（push_back）？

> ID：13989734
> 
> 赞同：1
> 
> 时间：2012-12-21T11:56:28.930
> 
> 标签：c++, vector, c++11, std

编码：

```
// test2.cpp

#include <vector>
#include <iostream>

struct test_class
{
    test_class() = default;

    test_class(const test_class& t)
    {
        std::cout << "Copied" << std::endl;
    }
};

int main()
{
    test_class a;
    std::vector<test_class> v;

    for (int i = 0; i < 5; ++i) {
        v.push_back(a);
        std::cout << std::endl;
    }
} 
```

行为：

```
$ g++ --version | grep g++
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
$ g++ -std=c++11 test2.cpp
$ ./a.out
Copied

Copied
Copied

Copied
Copied
Copied

Copied

Copied
Copied
Copied
Copied
Copied 
```

每个都`push_back`执行“未定义”数量的副本（必须执行一个副本）。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:42:35.897

向量像数组一样分配连续的内存。如果内存末尾没有更多空间，则必须重新分配整个向量。在此之后，它会将元素从旧位置复制到新位置并删除旧位置。

您可以将其初始化为能够容纳至少 5 个元素，因此在您的示例中不会有内存分配和复制：

```
std::vector<test_class> v(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:36:24.863

A`push_back`可能会导致其`vector`增长超出其分配的存储空间，从而导致重新分配，从而导致内容被复制。

# javascript - 使用 javascript 检测浏览器选项卡的变化

> ID：13989737
> 
> 赞同：6
> 
> 时间：2012-12-21T11:56:39.893
> 
> 标签：javascript, browser, python-idle

是否有某种方法可以使用 javascript 检测用户已切换到同一浏览器窗口中的不同选项卡。

此外，有没有办法检测用户切换到与浏览器不同的窗口？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:58:47.123

陷阱`window.onblur`事件。

每当当前窗口（或选项卡）失去焦点时，它就会被引发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:58:40.270

很可能没有标准的javascript。一些浏览器可能支持它，但通常只有一个 window.onblur 事件来发现用户已经离开当前窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T02:30:49.340

Page Visibility API 就是为此而设计的。阅读此网址：

[https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API](https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API)

# objective-c - 实现这种形式的 UIScrollView

> ID：13989738
> 
> 赞同：2
> 
> 时间：2012-12-21T11:56:46.213
> 
> 标签：objective-c, uitableview, uiscrollview

我有一个带有自定义单元格的 UITableView。

我想在每个单元格中实现这种 UIScrollView。

每个滚动视图中我可以拥有的最大图像数量是 5。它可以更少，但不能更多。

![在此处输入图像描述](../Images/d7056364704c08b1805c600fec699ed7.png)

我有图形和一切。我想用 UIPageControl 来实现它，因此当前图像将在 pageControl 中标记，因此我可以将其框架更改为绿光。

我现在正在使用此代码`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`：

```
self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(12,202,295,91)];
self.scrollView.showsHorizontalScrollIndicator = NO;

NSMutableArray *imageArray = [[NSMutableArray alloc]init];

for (int i=0; i<[[[self.campArray objectAtIndex:[indexPath row]]valueForKey:@"images"]count]; i++) {

    UIImageView * imageView =[[UIImageView alloc] initWithFrame:CGRectMake(i*130, 0, 108, 92)];

    [imageView setImage:[UIImage imageNamed:@"Frame-03.png"]];

    UIImageView *imgV = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 96, 81)];
    [imgV setImageWithURL:[NSURL URLWithString:[[[[self.campArray objectAtIndex:[indexPath row]]valueForKey:@"images"]objectAtIndex:i]valueForKey:@"thumbnailURL"]]];

    imgV.contentMode=UIViewContentModeScaleToFill;

    imgV.tag=i+1;

    [imageView  addSubview:imgV];

    [imageArray addObject:imageView];

    [imageView release];
    [imgV release];

}

NSInteger numberOfViews = imageArray.count
;
for (int i = 0; i < numberOfViews; i++) {

    [self.scrollView addSubview:[imageArray objectAtIndex:i]];
}

UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(zoomImage)];
[self.scrollView addGestureRecognizer:singleTap];   

self.scrollView.tag = [indexPath row];

UIPageControl *pgCtr = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 0, 108, 81)];

pgCtr.numberOfPages=numberOfViews;
pgCtr.autoresizingMask=UIViewAutoresizingNone;
[cell.contentView addSubview:pgCtr];

//set the scroll view content size
self.scrollView.contentSize = CGSizeMake(130 * 
                                         numberOfViews, 
                                         self.scrollView.frame.size.height);
//add the scrollview to this view
[cell.contentView addSubview:self.scrollView];
return cell; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:36:36.283

我会根据需要在滚动视图中`UIScrollView`设置你的对象来做到这一点。`UIImageView`

当用户滚动图像并放手时，您会希望最靠近中心的图像居中并成为突出显示的图像。我们需要自己处理。所以创建一个`UIScrollViewDelegate`并实现该方法`scrollViewWillBeginDecelerating:`

我们的下一个问题是弄清楚如何使滚动缓慢到以最近的图像为中心的停止。这有点棘手，但很有可能。我们需要知道一些事情。就像我们的滚动视图的可见区域实际上只是更大图片上的一个移动窗口。我们需要知道这个窗口现在在哪里，我们需要知道所有项目在大图中的位置。

取滚动视图的宽度（不是内容，滚动视图本身）并除以 2。你有中心，但我们需要将它与内容的当前位置进行比较。将其与您放入滚动视图中的每个属性`contentOffset`进行比较。使用和`UIScrollView``frame``UIImageView``origin.x``size.width`

```
CGFloat center = self.scrollView.frame.size.width/2 + self.scrollView.contentOffset.x;
for (UIImageView *view in scrollViewImages) {
    CGFloat leftEdge = view.frame.origin.x;
    CGFloat rightEdge = leftEdge + view.frame.size.width;

    // I didn't account the user stopping in a gap between images
    if (center >= leftEdge && center <= rightEdge) {
        [self.scrollView setContentOffset:leftEdge+view.frame.size.width/2 animated:YES];
        self.selectedImage = view;
        break;
    }
} 
```

然后只需更新图像，`UIPageControl`以及您需要做的任何事情。

# javascript - 动态添加控件 javascript Asp.net C#

> ID：13989741
> 
> 赞同：6
> 
> 时间：2012-12-21T11:57:11.110
> 
> 标签：javascript, asp.net

当用户单击添加另一个时，我正在尝试在 asp.net c# 页面上添加控件。我正在使用表格并希望在该表格中附加控件。也让我知道，一旦表单提交到服务器，我将如何在代码中获取控件值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T16:58:26.003

这是一个jQuery示例，希望对您有所帮助！

**ASPX：**

```
 <head id="Head1" runat="server">
    <title>Controls</title>
    <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#btnAdd").click(function () {
                var field = $("#field").val();
                var input = "<input name='parameters' id='field' type='text' />";
                var newRow = "<tr><td>" + field + "</td><td>" + input + "</td></tr>";
                $('#controls').append(newRow);
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input id="field" type="text" />
        <input id="btnAdd" type="button" value="Add" />
        <table id="controls" cellpadding="10" cellspacing="10">
        </table>
        <asp:Button ID="btnProcess" runat="server" Text="Process" OnClick="Process" />
    </div>
    </form>
</body> 
```

**背后的代码**

```
protected void Process(object sender, EventArgs e)
{
    var parameters = Request.Form["parameters"];
    if (parameters != null && parameters.Count() > 0)
    {
        //Now you have access to the textbox values,perform any additional processing
        parameters.Split(',').ToList().
            ForEach(p =>
            {
                Response.Write(p + "<br />");
            });
    }
} 
```

如果您想在服务器上执行所有操作，还有另一个问题。这种方法的问题是，当您动态添加控件时，它们会在回发时消失，您必须不断重新创建它们，`Page_Load`这将为您的服务器增加大量处理，我会建议坚持使用 jQuery 选项

**ASPX：**

```
<asp:TextBox ID="txtFieldName" runat="server"></asp:TextBox>
<asp:Button ID="btnAddControl" runat="server" Text="Add" OnClick="Add" />
<asp:Table EnableViewState="true" CellPadding="2" CellSpacing="2" BorderWidth="2" BorderStyle="Solid" GridLines="Both" ID="table"
    runat="server">
    <asp:TableHeaderRow>
        <asp:TableHeaderCell Text="Field" />
        <asp:TableHeaderCell Text="Value" />
    </asp:TableHeaderRow>
</asp:Table>
<asp:Button ID="btnPost" runat="server" Text="Post" OnClick="Post" /> 
```

**后面的代码：**

```
public List<string> rows = new List<string>();

protected void Page_Load(object sender, EventArgs e)
{
    if (ViewState["Rows"] != null)
    {
        rows = (List<string>)ViewState["Rows"];
        if (rows.Count > 0)
        {
            foreach (var row in rows)
            {
                TextBox textbox = new TextBox();
                textbox.Width = 300;
                table.Rows.Add(GetRow(row,textbox));
            }
        }
    }
}

protected void Add(object sender, EventArgs e)
{
    string row = txtFieldName.Text;
    if (!String.IsNullOrEmpty(row))
    {
        rows.Add(txtFieldName.Text);

        TextBox textbox = new TextBox();
        textbox.Width = 300;
        table.Rows.Add(GetRow(row, textbox));
        ViewState["Rows"] = rows;
    }
}

private TableRow GetRow(string text, WebControl txtName)
{
    TableRow tr = new TableRow();

    TableCell cell1 = new TableCell();
    cell1.Text = text;

    TableCell cell2 = new TableCell();
    cell2.Controls.Add(txtName);

    tr.Cells.Add(cell1);
    tr.Cells.Add(cell2);

    return tr;
}

protected void Post(object sender, EventArgs e)
{
    if (table.Rows.Count > 0)
    {
        System.Diagnostics.Debugger.Break();
        //i=1 because we want to skip the header row
        for (int i = 1; i < table.Rows.Count; i++)
        {
            //Examine the values and do further processing...
            string field = table.Rows[i].Cells[0].Text;
            string value = ((TextBox)table.Rows[i].Cells[1].Controls[0]).Text;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:00:38.620

如果您要添加动态客户端控件，它们将在 Request.Form 对象中作为值。您可以迭代此集合的内容。请注意，表格必须包含在表单元素中，否则它们不会被发布。

# c - 用静态库编译 PIC 对象

> ID：13989745
> 
> 赞同：1
> 
> 时间：2012-12-21T11:57:34.000
> 
> 标签：c, linux, gcc, shared-libraries

我在 linux 上生成一个共享库，我正在使用这个 xml 解析器“mini xml”来解析我的库的一些 xml 配置文件。我想要的不是对这个 xml 解析器有任何依赖，所以我想使用供应商提供的静态 libmxml.a 库，而不是使用 libmxml.so，它也与 libmxml.so 一起存在，这样我的共享库就可以了部署时不依赖于 libmxml。我已经尝试过，但它不起作用。

> gcc -fPIC -o myobject.o -static -lmxml -c myobject.c

但它发出警告

> 链接器输入未使用，因为链接未完成

我错过了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:07:38.433

您会收到警告，因为 -c*仅表示 compile*。链接器永远不会运行，因此作为链接器命令的 -lmxml 无效。

*-static*将使整个可执行文件静态化，这也意味着静态 libc。这可能不是你想要的。仅静态链接 libmxml.a 使用：

```
gcc -fPIC myobject.o -o executable /usr/lib/libmxml.a 
```

或者

```
gcc -fPIC myobject.o -o executable -Wl,-Bstatic -lmxml -Wl,-Bdynamic 
```

创建共享库而不是可执行文件 add *-shared*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:10:40.050

您需要专门为此构建 mxml 库，使用 PIC 代码 ( `-fPIC`) 创建一个静态库，例如`libmxml_pic.a`。包含仅适用于可执行文件的`libmxml.a`位置相关代码（在 32 位 x86 上它可以工作，但仍然很难看）。

您还需要避免从库中导出 mxml 符号。您可以使用版本脚本（`--version-script`至 ld，请参阅文档）和/或通过`-fvisibility=hidden`在编译 mxml 对象时传递来执行此操作。

# rest - REST 是如何无状态的？

> ID：13989752
> 
> 赞同：4
> 
> 时间：2012-12-21T11:58:02.770
> 
> 标签：rest, soap

我知道 REST 并且知道在不使用会话的情况下创建 RESTful Web 服务，我知道它更好，但我并不真正理解无状态的概念以及使用 REST 如何使您的应用程序具有可扩展性

有人可以解释 REST 的这两个方面，无状态和可伸缩性，以及 SOAP 有何不同且不可取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:04:28.527

有状态 API 将为所有连接的客户端维护会话。这意味着会话需要在服务器之间共享，这限制了可扩展性。

通过将此状态存储在客户端并随每个请求一起发送，您可以拥有相同的状态，但具有更好的可扩展性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:16:34.330

Creating RESTful services doesn't make your application scalable, you *can*, in fact, create RESTful services which are session based and can't live across multiple machines, or sticky session, or completely stateless.

As for scalability, many factors determine whether or not a service is scalable, and in fact a service *can be* scalable even if it requires a session (for example if your service has sticky sessions meaning that a session is hosted on one machine and the web visitor always comes back to the same machine where his session lives).

Stateless services make scaling out easier because it means that once a request has been processed, the next request from that web visitor does not necessarily have to come back to the same machine, which means you can (in theory) have as many machines as you want service the same kind of requests. If your traffic doubles in volume you just add the same number of machines and boom, you can now service twice as many requests.

In practice, however, things get complicated, and it is rarely possible to create completely stateless services. Most times, if your web visitors can update data, you have concurrency issues as two web visitors can change the same data and some kind of synchronization has to happen to prevent data corruption. In those cases, you might want to split your service so that the services that let you change data are NOT stateless, and those that let you extract data are. In most cases I would guess that most of the heavy lifting is in the data extraction side rather than data update, so this works out fine.

As for SOAP, I can only say that the world is moving towards REST as it is more light-weight.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:01:25.460

无状态意味着您可以拥有任意数量的前端，每个前端都可以以相同的方式回答请求，无需处理文件系统会话，即

所以你可以扩展（添加任意数量的前端），这是无状态的最明显原因。

# python - 在多线程环境中重用本地对象

> ID：13989757
> 
> 赞同：2
> 
> 时间：2012-12-21T11:58:24.080
> 
> 标签：python, python-multithreading

我有以下情况：

*   多线程应用程序
*   我*无法*控制线程创建。这是由框架管理的（在本例中为 celery）
*   我有一些对象实例化起来很昂贵，而且*不是*线程安全的。使它们线程安全不是一种选择。
*   对象可以在多个地方实例化，但是如果我在一个已经定义的线程中重新实例化同一个对象，则应该重用该对象。

我想出了以下模式：

```
#!/usr/bin/env python

import threading
import time

class MyObj1:
    def __init__(self, name):
        self.name = name

local = threading.local()
def get_local_obj(key, create_obj, *pars, **kwargs):
    d = local.__dict__
    if key in d: obj = d[key]
    else       :
        obj = create_obj(*pars, **kwargs)
        d[key] = obj
    return obj

class Worker(threading.Thread):

    def __init__(self):
        threading.Thread.__init__(self)

    def run(self):
        myobj1 = get_local_obj('obj1', MyObj1, (self.name))
        for _ in xrange(3):
            print myobj1.name
            time.sleep(1)

def test():
    ths = [Worker() for _ in xrange(2)]
    for t in ths : t.start()

test() 
```

在这里，我自己创建线程，因为这只是一个测试，但如前所述，在实际应用程序中，我无法控制线程。

我感兴趣的是功能`get_local_obj`。我有几个问题：

1.  这个逻辑会保证对象不在线程之间共享吗？
2.  这个逻辑会保证对象在一个线程中不会被多次实例化吗？
3.  这个内存会泄漏吗？
4.  您对这种方法有什么一般性意见吗？对于上面建议的场景有什么更好的建议吗？

## 编辑

澄清一下：我的应用程序是多线程的，但不是我在创建线程。我只是在创建一些对象，它们恰好在框架创建的线程中运行。我的一些对象不是线程安全的，所以我只需要为每个线程创建一次。因此`get_my_object`。

## 编辑

local = threading.local() 必须在全局范围内定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:15:02.193

这个如何？

```
class Worker (Thread):
  def __init__(self):
    super(Worker,self).__init__()
    self.m_local = threading.local()

  def get_my_obj(self):
    try:
      obj = self.m_local.my_object
    except AttributeError:
      self.m_local.my_object = create_object()
      obj = self.m_local.my_object
    return obj

  def run(self):
    my_obj = self.get_my_obj()
    # ... 
```

最后，它与您的示例相似，只是更清洁。您将所有线程特定的代码保存在一个地方，`run`函数“不知道”关于初始化的任何内容，它`my_obj`使用 getter，而 getter 只创建一次对象。[threading.local](http://docs.python.org/2/library/threading.html#threading.local)将保证数据是特定于线程的——这就是它的工作。

我看不出那里有任何内存泄漏的原因。最后，你需要出一点汗才能得到 python 中的泄漏:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T23:24:49.140

FWIW，这是您的代码的修改版本，根据一个[答案](https://stackoverflow.com/a/1408178/355230)和[另一个](https://stackoverflow.com/a/1905593/355230)相关问题进行了一些简化。不过，它仍然是基本相同的模式。

```
#!/usr/bin/env python
import threading
import time
threadlocal = threading.local()

class MyObj1(object):
    def __init__(self, name):
        print 'in MyObj1.__init__(), name =', name
        self.name = name

def get_local_obj(varname, factory, *args, **kwargs):
    try:
        return getattr(threadlocal, varname)
    except AttributeError:
        obj = factory(*args, **kwargs)
        setattr(threadlocal, varname, obj)
        return obj

class Worker(threading.Thread):
    def __init__(self):
        super(Worker, self).__init__()

    def run(self):
        myobj1 = get_local_obj('obj1', MyObj1, self.name)
        for _ in xrange(3):
            print myobj1.name
            time.sleep(1)

def test():
    ths = [Worker() for _ in xrange(3)]
    for t in ths:
        t.start()

test() 
```

实际上，没有 a 也可以做完全相同的事情`get_local_obj()`：

```
#!/usr/bin/env python
import threading
import time
threadlocal = threading.local()

class MyObj1(object):
    def __init__(self, name):
        print 'in MyObj1.__init__(), name =', name
        self.name = name

class Worker(threading.Thread):
    def __init__(self):
        super(Worker, self).__init__()

    def run(self):
        threadlocal.myobj1 = MyObj1(self.name)
        for _ in xrange(3):
            print threadlocal.myobj1.name
            time.sleep(1)

def test():
    ths = [Worker() for _ in xrange(3)]
    for t in ths:
        t.start()

test() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:46:38.323

Here's a another different answer that utilizes an idea I had of having thread-level singletons. It gets completely rid of your `get_local_obj()` function. I haven't done a lot of testing, but so far it seems to work. It may be more than you want because it literally implements what you said you wanted in your last bullet-point:

*   The objects can be instantiated in multiple places, but if I am reinstantiating the same object in one thread where it has already been defined, the object should be reused.

```
#!/usr/bin/env python
import threading
import time
threadlocal = threading.local()

class ThreadSingleton(type):
    # called when instances of client classes are created
    def __call__(cls, *args, **kwargs):
        instances = threadlocal.__dict__.setdefault(cls.__name__+'.instances', {})
        if cls not in instances:
            instances[cls] = super(ThreadSingleton, cls).__call__(*args, **kwargs)
        return instances[cls]

class MyClass(object):
    __metaclass__ = ThreadSingleton
    def __init__(self, name):
        print 'in MyClass.__init__(), name =', name
        self.name = name

class Worker(threading.Thread):
    def __init__(self):
        super(Worker, self).__init__()

    def run(self):
        myobj1 = MyClass(self.name)
        for _ in xrange(3):
            print 'myobj1.name:', myobj1.name
            myobj2 = MyClass(self.name+'#2') # this returns myobj1
            print 'myobj2.name:', myobj2.name # so this prints myobj1.name
            time.sleep(1)

def test():
    ths = [Worker() for _ in xrange(3)]
    for t in ths:
        t.start()

test() 
```

Note that the output will be somewhat jumbled as it is generated by the different threads. This can be fixed, but I decided not to complicate the essence of this answer by adding it.

# excel - 使用vba从单元格中提取部分数据

> ID：13989764
> 
> 赞同：1
> 
> 时间：2012-12-21T11:58:37.397
> 
> 标签：excel, vba

我在 excel 的单元格中有大量 html 字符串，我想做的是从字符串中提取 url，但会丢失其余的 html 标记。

我的字符串看起来像这样

```
 <a class="text" href="http://cssrockstar.com" target="_blank" rel="nofollow" onclick="_gaq.push(['_trackPageview', '/view/CSS Rockstar']);">CSS Rockstar</a> 
```

我只需要提取`http://cssrockstar.com`部分

我试图玩一些vba来做到这一点，但我很快就被卡住了，有人能指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:32:35.533

您也可以使用公式来执行此操作（E3 将是您的源单元格）。此公式要求所有 href 属性都用双引号分隔。

```
=LEFT(MID(E3, FIND("href=""",E3)+6, 999),FIND("""",MID(E3, FIND("href=""",E3)+6, 999))-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:28:55.793

您可以使用**拆分**功能：

```
Sub test()
    Dim s As String
    s = "<a class=""text"" href=""http://cssrockstar.com"" target=""_blank"" rel=""nofollow"" onclick=""_gaq.push(['_trackPageview', '/view/CSS Rockstar']);"">CSS Rockstar</a>"

    Dim res As String
    res = Split(Split(Split(s, "href=")(1), " ")(0), """")(1)
End Sub 
```

# c - 检查和创建目录

> ID：13989765
> 
> 赞同：0
> 
> 时间：2012-12-21T11:58:38.323
> 
> 标签：c, create-directory

我想检查然后创建一个目录，如果它不存在。

我使用了以下代码：

```
#define APP_DATA_DIR_CHILD_2  "./child2"

g_nResult = GetFileAttributes((wchar_t*)APP_DATA_DIR_CHILD_2);
if (g_nResult <= 0)
{
    g_nResult = mkdir(APP_DATA_DIR_CHILD_2);
} 
```

但是没有正确检查。`GetFileAttributes()`即使在创建目录之后，我也会返回 -1 。

有人可以帮忙吗？

PS：我还想确保代码在 Linux 和 Windows 上都能运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:00:33.077

代替

```
#define APP_DATA_DIR_CHILD_2                    "./child2"
g_nResult = GetFileAttributes((wchar_t*)APP_DATA_DIR_CHILD_2); 
```

通过（如果定义了 Unicode）

```
#define APP_DATA_DIR_CHILD_2                    L"./child2"
g_nResult = GetFileAttributes(APP_DATA_DIR_CHILD_2); 
```

您的代码远不能移植......请改用 stat

```
struct stat sts;
if ( stat(APP_DATA_DIR_CHILD_2, &sts) != 0) {
    // Fail to get info about the file, may not exist...
}
else {
    if (S_ISDIR(sts.st_mode)) {  /* The file is a directory... */ }
} 
```

看看文档： http: [//linux.die.net/man/2/stat](http://linux.die.net/man/2/stat)

# scala - 从 makefile 编译和从命令行编译有什么区别？

> ID：13989769
> 
> 赞同：0
> 
> 时间：2012-12-21T11:58:49.010
> 
> 标签：scala, compilation, path, makefile

我有以下非常奇怪的问题：我为多语言 java/scala 项目编写了一个 makefile。（我试图让一个 ant-buildfile 工作，但没有机会让它工作......）当做'make'时，我得到以下信息：

scalac -d ... -cp ... -sourcepath ... ... myFile.scala myFile.scala:28：错误：ModuleX 不是 project.module 的成员

导入项目.module.ModuleX

现在复制执行make时出现在屏幕上的命令'scalac'并将其插入bash shell（我之前执行'make'的同一个bash shell）导致......没有失败。它只是编译没有错误。那么那里到底发生了什么？外壳中有哪些信息不能用于“make”？（所有路径都作为绝对路径给出，没有相对给出。但是 -sourcepath 有两个参数，这会导致问题吗？）帮助，这是一件非常奇怪的事情...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:53:00.200

您在包含的示例行中有一个 -sourcepath。这可能不像你期望的那样工作。

查看这个错误以及它如何表现自己 [使 -sourcepath 变得不那么明显](https://issues.scala-lang.org/browse/SI-4909)

# php - 使用 Yii 框架的安全问题

> ID：13989774
> 
> 赞同：3
> 
> 时间：2012-12-21T11:59:09.180
> 
> 标签：php, yii

基本上，我想问一下是否有人在创建大型电子商务项目时遇到了 Yii 框架的安全问题。我的客户希望在这个项目中使用这个框架，并且根据我以前使用 Symfony 的经验，我想仔细检查这个问题。

Yii 很酷，而且越来越受欢迎。[Yii人气文章](http://www.zfort.com/blog/why-is-yii-framework-getting-great-popularity/)。但总是有一个“假设”的问题，我希望我的客户确保他的所有数据都是安全的。并确保我自己也是如此。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T12:04:47.727

Yii 作为一个框架本身是安全的：

```
Yii is equipped with many security measures to help prevent your Web applications
from attacks such as SQL injection, cross-site scripting (XSS), cross-site
request forgery (CSRF), and cookie tampering. 
```

来自[Yii 功能页面](http://www.yiiframework.com/features/)

但归根结底是开发人员确保一切都是安全的。查看这些关于编写安全 Yii 应用程序的帖子：

*   [http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/](http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/)
*   [http://www.yiiframework.com/wiki/273/yii-security-extended-guide/](http://www.yiiframework.com/wiki/273/yii-security-extended-guide/)
*   [http://www.yiiframework.com/doc/guide/1.1/en/topics.security](http://www.yiiframework.com/doc/guide/1.1/en/topics.security)

# sql - 即使我们按名称对查询进行排序，如何将列号设置为订单号

> ID：13989777
> 
> 赞同：0
> 
> 时间：2012-12-21T11:59:18.680
> 
> 标签：sql, database, oracle, sqlite, plsql

在我的 sql 查询中，我需要按 asc 顺序获取名称

**`SELECT ROWID, NAME FROM CONTACTINFO order by NAME asc`**

```
row_id  Name

 5\. Arnold,
 2\. Ashok
 1\. Benz
 3\. Cowboy
 6\. Danger person
 10\. Eleph
 9\. Fog
 4\. Gun
 8\. Hello
 7\. Ink 
```

然后自动乱序设置row-id，如上图

但我需要添加另一行，其中包含 ciorect 订单号，如下所示

```
row_id  Name     Temp_ID            

     5\. Arnold,   1
     2\. Ashok     2
     1\. Benz      3
     3\. Cowboy    4
     6\. Danger    5
     10\. Eleph    6
     9\. Fog       7
     4\. Gun       8
     8\. Hello     9
     7\. Ink       10 
```

我需要另一行作为序列

*我想使用这个 Temp id 从我的大数据中检索一些有限的数据，比如*

**`SELECT ROWID, NAME FROM CONTACTINFO where Temp_ID >3 && Temp_ID <6`** 按 NAME asc 排序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:24:32.930

尝试使用`row_number()`

```
select rowId, name, temp_id
from (
   select rowId, name, row_number() over (order by name) temp_id
   from contactinfo 
) A
where temp_id >3 and temp_id <6

--Results 
rowId, name, temp_id
3      Cowboy    4
6      Danger    5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:06:16.237

这可以解决问题::

```
SELECT rownum,ROWID, NAME FROM CONTACTINFO order by NAME asc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:07:37.257

你可以这样做...

```
SELECT ROWID ,
      TAB.NAME 
  FROM ( SELECT NAME 
          FROM CONTACTINFO 
       order by NAME asc 
       ) AS TAB 
  WHERE    ROWID>3 
       AND ROWID<6; 
```

或者你也可以使用 ROWNUM..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:10:55.150

你需要做一个嵌套的 SELECT：第一个排序数据并添加一个 ROWNUM 列，第二个提取你想要的记录。

```
 SELECT ROWID, NAME
    FROM (SELECT ROWID, NAME, ROWNUM rn
            FROM CONTACTINFO
        ORDER BY NAME)
   WHERE rn > 3 AND rn < 6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:13:44.743

选择完成后正确的 rownum 将可用，因此您只能像这样使用它：

```
select * from (select rownum as temp_id, row_id, name from contactinfo order by name asc) where temp_id >3 && temp_id <6 order by name asc 
```

# android - Contextual menu without autofocus

> ID：13989782
> 
> 赞同：0
> 
> 时间：2012-12-21T11:59:50.470
> 
> 标签：android, contextmenu, android-actionbar

I would like to open a "contextual menu" when a user touches a button.

I have searched with no success for a solution to have the default android context menu without autofocus. To me the default autofocus is a pain in the neck as it forces extra taps for the user (out of the menu window) to select another item on the main window.

My activity offers a gridview with items **g1**, **g2**,... and the contextual menu would display a list of textareas **t1**, **t2**... Here is what I need:

1.  when user taps **g1**, a menu shows up at the bottom of the screen (I need to be able to customize the menu layout basically)
2.  when user taps **g1**, the rest of the window does not fade away i.e. he should still be able to view normally the main window except for the space taken by the menu at the bottom
3.  when user taps **g1**, he does not loose the focus of the current window i.e. if he taps g2 after the menu has open, **g2** will act normally without requiring an extra tap
4.  let's say user taps **g1**, then taps **g2**: the current contextual menu should close and a new one opens, refreshed for b2
5.  i need to do that for apps starting from minsdkversion=8 (seems i cannot use "action bar")

Hope this makes sense, let me know if it doesn't.

I guess that would be too much hassle to hack the default context menu to customize it this way? It's totally ok to create my own. But I don't know where to start. So could you point me toward the direction of achieving what I want ?

Thanks for your time

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:36:59.890

Two suggestions how to do that with self-defined context menus.

**Variant A:** Maybe it is an option for you to wrap your current Layout into a `RelativeLayout`, and add a `LinearLayout` (containing your self-defined context menu) to that `RelativeLayout` as soon as the user clicks an g1\. When g2 is clicked, remove that old `LinearLayout` and add a new one with `relativeLayout.addView(contextMenuLayout)`. To have your LinearLayout placed on the bottom, make sure to use `contextMenuLayout.setLayoutParams(...)` on it and pass an instance of `RelativeLayout.LayoutParams`, and set Align Parent Bottom and Center Horizontal. Because your `contextMenuLayout` is the last element of the `RelativeLayout`, it will be drawn on top. Focus will act as you wish.

**Variant B:** Wrap your current Layout into a `LinearLayout` with vertical orientation. The first cell contains your current layout. The second cell may contain your self-defined context menu, you add and remove just like in Variant A. Two advantages: first, your original layout is not covered by the context view, and in that way everything is always visible. Secondly, you can set the 'LinearLayout' to "animateLayoutChanges", which makes the context menu fade in smoothly with Android API11+ (ignored in earlier versions).

Variant A and B as Pseudocode (both work similar):

```
class YourActivity extends Activity implements OnItemClickListener {

    View contextMenu = null;

    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        // this could be RelativeLayout (Variant A) or LinearLayout (Variant B) which in turn contains your Layout
        Layout rootLayout = (Layout)findViewById(R.id.root_layout);

        // in case there is a context menu open, remove it
        if(contextMenu!=null)
            rootLayout.removeView(contextMenu);

        // add new self-defined context menu
        contextMenu = getContextMenuView();
        rootLayout.addView(contextMenu);
    }

    private View getContextMenuView() {
        Layout contextMenuView = new LinearLayout(...);
        .... add contents ...
        return contextMenuView;
    }

    ....
} 
```

Note you need to cast rootLayout to either `LinearLayout` or `RelativeLayout`, since `Layout` itself has no `addView(...)` method.

# java - Runnable Jar 找不到资源和其他库

> ID：13989785
> 
> 赞同：12
> 
> 时间：2012-12-21T12:00:05.573
> 
> 标签：java, eclipse, swt, executable-jar

我创建了一个桌面应用程序，但在生成的可运行 jar 中遇到了问题。在 Eclipse 环境中一切正常，但是当我生成 jar 时，它只显示`swt`组件（菜单、选项卡等）。其他库的位置是空白区域（生成图库的库）。同样不会出现`set ToolBar`（包含带有图像的按钮），`GoogleMap.html`不会出现。

如何正确生成包含这些外部源的可执行 jar？

工具栏图片加载代码：

```
folderSearchIcon = new Image(display, this.getClass().getResourceAsStream("images/search_folder.png")); 
```

GoogleMap.html 加载代码：

```
File mapFile = new File("resources/GoogleMap.html");        
if(!mapFile.exists()) {
    System.out.println("File doesn't exist! " + mapFile.getAbsolutePath()); 
    return;
} 
```

生成可运行的jar：

![在此处输入图像描述](../Images/58f4c2a2a897325ed2eaed43835f0386.png)

我在 Eclipse 中的应用程序结构和生成的 jar 结构：

![在此处输入图像描述](../Images/6689e5cab7258c9b016e09ad148e3070.png)

生成的清单：

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./ swt.jar commons-imaging-1.0-SNAPSHOT.jar org.eclip
  se.nebula.widgets.gallery_0.5.3.201210262156.jar xmpcore.jar metadata
  -extractor-2.6.3.jar
Class-Path: .
Rsrc-Main-Class: geotagger.AppInit
Main-Class: org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T12:38:57.077

对于工具栏图像，您需要添加一个斜杠，即代替

```
this.getClass().getResourceAsStream("images/search_folder.png") 
```

你需要

```
this.getClass().getResourceAsStream("/images/search_folder.png") 
```

这是因为，[正如 JavaDocs 中所解释的，它](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)根据`Class.getResourceAsStream`相关类的包解析相对路径，因此 if `this`is a `com.example.Foo`then`getResourceAsStream("images/search_folder.png")`将`com/example/images/search_folder.png`在您的 JAR 中查找。预先添加斜线会使其查找`images/search_folder.png`，这是您的屏幕截图表明您需要的。

您将需要使用类似的技巧-`GoogleMap.html`您`java.io.File`无法使用.`this.getClass().getResource("/GoogleMap.html")``java.net.URL`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T12:44:08.780

正如你在这里看到的：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)

getResourceAsStream() 在与调用它的类相同的包中查找文件。因此它将在 JAR 中查找名为“com/whatever/more/images/search_folder.png”的文件，该文件当然不会存在，因为“resources”目录的内容直接放在JAR 导出器的 JAR 文件。

请改用[http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)。

第二部分：当你加载 HTML 时将永远无法工作。您尝试在您的 java 程序进程的工作目录中查找名为“resources/GoogleMap.html”的文件，但这会在 JAR 之外查找。您应该再次使用前面的函数来加载 HTML：

[http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-12T16:19:57.367

我在同一个问题上浪费了很多时间。如果您使用 Eclipse 中的“导出”功能中的选项创建了可运行的 jar，那么它将无法正常工作。至少它不适合我。无论我尝试了多少选项，都没有任何效果。尝试读取资源时，resourceUrl 将返回 null。最后，我决定使用 Maven 创建可运行的 jar，而将 Eclipse 的帮助放在一边。我需要将依赖的 jar 放在一个单独的 lib 文件夹中。[我按照http://www.mkyong.com/maven/how-to-create-a-manifest-file-with-maven/](http://www.mkyong.com/maven/how-to-create-a-manifest-file-with-maven/)中的说明创建了可运行的 jar ，该解决方案对我有用。不知何故，当 Eclipse 创建可运行的 jar 包时，无法读取资源，即使它们存在于 jar 文件中。希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-22T16:03:55.380

由于导出到可运行的 jar 实质上会创建一个文件，因此 FileReader 无法再找到资源文件夹中的文件/图像/资源，因为文件位置现在不存在。

从使用更改为使用`FileReader fr = new FileReader(resource_file_path)`InputStream 加载，`InputStream is = getClass().getResourceAsStream(resource_file_path)`然后使用 an`InputStreamReader`在其他位置实际使用资源。希望这可以帮助。

# html - 在 HTML/CSS 按钮中实现链接

> ID：13989786
> 
> 赞同：0
> 
> 时间：2012-12-21T12:00:11.143
> 
> 标签：html, css, button, hyperlink

我需要在这些按钮中添加一个链接：

```
<div class="buttons">
      <button class="action bluebtn"><span class="label">CREATE NEW ACCOUNT</span></button>
      <button class="action redbtn"><span class="label">EDIT ACCOUNT</span></button>
      <button class="action greenbtn"><span class="label">IMPORT EDI TEXT FILES</span></button>
      <button class="action"><span class="label">LOG OUT</span></button>
    </div> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:11:27.197

这里有几个选项，具体取决于您是否可以更改 HTML：

如果您可以更改 HTML，则将按钮变为常规按钮，`<a href="http://www....">link</a>` 或者您可以添加 onclick 事件：

```
<button class="action bluebtn" onclick="javascript:document.location='some-url'">
    <span class="label">CREATE NEW ACCOUNT</span>
</button> 
```

如果您无法更改 HTML，请使用 jQuery 之类的工具获取按钮并在其中添加 onclick 事件：

```
$("button.bluebtn").click(function(){
    document.location = 'some-url';
    return false;
}); 
```

但如果可以的话，我确实建议将按钮更改为常规链接。让`<button>`元素充当链接是没有意义的......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T12:12:44.717

如果你真的需要使用`<button>`标签，你可以添加链接`Javascript`：

```
<button onclick="location.href='url_address'">Your HTML content</button> 
```

我认为使用`<a>`标签而不是`<button>`'s 然后用 CSS 设置它们看起来像按钮会更一致。这样，您就可以依赖标记的默认行为，而不必使用 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:14:59.070

```
<input type="button" value="click for google" onClick="window.location='http://w­ ww.google.com' "> 
```

或者你可以使用

```
<button onclick="document.location.href='link';­ return false;">Link Text</button> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-21T12:08:36.947

我认为您只需使用 href 元素包装按钮，如下所示：

```
<div class="buttons">
  <a href="your link here"><button class="action bluebtn"><span class="label">CREATE NEW ACCOUNT</span></button></a>
</div> 
```

并对其余按钮执行相同操作。用“a href”标签包装它们。

# macos - 在 Mac OS X 10.6 服务器上激活 SVN 服务器或 ssh+svn:// 连接

> ID：13989789
> 
> 赞同：0
> 
> 时间：2012-12-21T12:00:22.577
> 
> 标签：macos, svn, svn-server

我有 Mac OS X 10.6.8 服务器。它已安装 svn 1.6.17。所以我使用 macports 安装了最新版本（1.7.8）：sudo port install subversion。

现在，如果我在终端窗口中输入 svnserve --version 我会得到新版本：1.7.8。但是，如果我远程检查新的 svnserver 是否处于活动状态：

ssh 用户名@host svnserve --version

我得到了旧版本 1.6.17。此外，似乎我必须手动将新版本添加到每个用户的路径中。

如何在这台机器上全局激活它的 SVN 服务器？

谢谢，

缺口，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:37:34.917

macports 仅更新 .profile 路径。您需要将相同的 PATH 字符串添加到本地或全局 .bashrc 文件中。

# python - 将字符串输入存储在列表中

> ID：13989790
> 
> 赞同：2
> 
> 时间：2012-12-21T12:00:28.500
> 
> 标签：python, list

我得到了一个小任务——让用户输入打油诗，并让程序在输入行时将每一行存储在列表中。（然后我必须将打油诗打印回来）这是我当前的代码：

```
limerick_line = []
for i in range(5):
    limerick_line[i].append = input("Type in a limerick line. ")
print(limerick_line[5]) 
```

我知道我做错了很多，但我不确定如何做对。当前错误是“列表索引超出范围”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:01:44.910

你只需要使用`limerick_line.append(input('enter line: '))`- 不需要尝试和索引它......你的 final`print`可以只是`print(limerick_line)`或循环它：

```
for line in limerick_line:
    print(line) 
```

所以，更正的代码是：

```
limerick_line = []
for i in range(5):
    limerick_line.append( input("Type in a limerick line. ") )
for line in limerick_line:
    print(line) 
```

# iphone - 如何将错误“找不到主机”更改为我的自定义消息错误？

> ID：13989793
> 
> 赞同：-5
> 
> 时间：2012-12-21T12:00:35.873
> 
> 标签：iphone, ios, xcode, general-network-error

问题是我有这些消息：

*   主机未找到
*   找不到具有指定主机名的服务器
*   网络不可用

尤其是它显示的第二条消息，然后一切正常

所以我想知道如何找到这些消息以及如何处理它们并放置我的消息而不是它们，或者只是进行其他操作而不是像 facebook 应用程序那样显示它们，当连接断开时它会显示带有标签的红色警报“网络错误”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:04:38.720

为什么不在您的代码中使用可达性测试？

您可以从 Apple Developer 门户中找到[示例代码。](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)链接：[https ://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

代码：

```
 Reachability *reachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];

    if (internetStatus != NotReachable) {

      // Do Your Stuff As Internet Available        

    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"We are unable to make a internet connection at this time. Please try again later" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:19:36.980

您可以检查您的错误，然后使用`stringByReplacingOccurrencesOfString`方法转换您的自定义错误消息

```
NSString *str = @"server with a specified hostname could not be found";

if ([yourErrorMsg isEqualToString:str])
{
    NSString *customError = [yourErrorMsg stringByReplacingOccurrencesOfString:str withString:@"Your Custom String"];
    NSLog(@"New custom error = %@",customError);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:23:05.760

最后我找到了解决方案，就像这样

```
-(void)handleError:(NSError*)error{
SEL onerror = @selector(onerror:);
if(self.action != nil) { onerror = self.action; }
if([self.handler respondsToSelector: onerror]) {
    if (error.code == -1003 || error.code == -1001 || error.code == -1004) { //check all kind of errors
        [self send];
    }else{
    [self.handler performSelector: onerror withObject: error];
    }
} else {
    if(self.defaultHandler != nil && [self.defaultHandler respondsToSelector:onerror]) {
        [self.defaultHandler performSelector:onerror withObject: error];
    }
}
if(self.logging) {
    NSLog(@"Error: %@", error.localizedDescription);
} 
```

}

# jquery - 删除上面的div

> ID：13989797
> 
> 赞同：0
> 
> 时间：2012-12-21T12:00:59.427
> 
> 标签：jquery, html, hide

我有一个看起来像这样的模板。

# 样本模板

```
<div id="form-entry">
    <h4>Some heading here</h4>
    <div class="form-field">
        <label>Some Label</label>
        <input type="text" class="some_text" />
    </div>
    <div class="form-field">
        <label>Some Label</label>
        <input type="text" class="some_text" />
    </div>
    <div class="form-field">
        <label>Some Label</label>
        <input type="text" class="some_text" />
    </div>
    <div class="form-field">
        <input type="checkbox" />
        <label>Some Label</label>
    </div>
    <div class="form-field">
        <label>Some Label</label>
        <textarea></textarea>
    </div>
</div> 
```

如果用户选中复选框，我想删除（或隐藏）`form-field`包含输入的 div 上方的 div 。`checkbox`HTML 是自动呈现的，没有任何特定的`id's`或`classes`. 我该怎么做。jQuery 的位置会有用吗？

# JS

```
$('.form-field input[type=checkbox]').click( function(){
    entity = $(this);
    dad = entity.parent(); // This gets the form-field div element that contains the checkbox
}); 
```

如何捕获`form-field`元素上方的 div`dad`元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:03:38.623

```
$('.form-field input[type=checkbox]').on('change', function(){
    if (this.checked) 
        $(this).closest('.form-field').prev().remove();
}); 
```

如果选中，则删除`.form_field`上面`.form_field`包含复选框的 ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:03:37.827

你可以做

```
$('#form-entry input[type="checkbox"]').change(function(){
    $(this).parent().prev().remove();
}); 
```

[示范](http://jsfiddle.net/RMRxC/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:07:16.240

您可以使用以下 jQuery：

```
$('.form-field input[type=checkbox]').click(function() {
    $(this).parent().prev().toggle(); // parent is the checkboxs div, prev returns the previous element in the DOM
});​ 
```

`Toggle`每次单击复选框时将隐藏/显示前一个 div。

这是一个[jsFiddle](http://jsfiddle.net/qH2KM/)，它显示了它是如何工作的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:04:20.020

```
$('.form-field input[type=checkbox]').click( function(){
    entity = $(this);
    dad = entity.parent().prev().remove(); // This gets the form-field div element that contains the checkbox
}); 
```

# asp.net-mvc-4 - Dapper.net 如何创建地图

> ID：13989805
> 
> 赞同：7
> 
> 时间：2012-12-21T12:01:14.803
> 
> 标签：asp.net-mvc-4, dapper

```
 public CodeCustomMapper()
  {

    Map(f => f.Name).Column("SName");
    Map(f => f.Name).Column("TName");
    Map(f => f.EmailID).Column("wmail");
    Map(f => f.EmailID).Column("Email");
   } 
```

我想为 dapper.query 函数创建这种映射。
请问有人可以帮忙吗？
我想将自定义列名称映射到实体属性名称。

* * *

```
public class EntityBase
{
    public string CreatedBy { get; set; }
    public DateTime CreatedOn { get; set; }
}

public class Person :EntityBase
{
    public string SecurityAlias{ get; set; }
    public DateTime Identifier{ get; set; }
}

public class EntityBaseMap
{
    public EntityBaseMap()
    {
        var map = new CustomTypeMap<EntityBase>();
        map.Map("CreatingPerson", "CreatedBy");
        map.Map("CreatedDate", "CreatedOn");
        SqlMapper.SetTypeMap(map.Type, map);
    }
}

public class PersonMap
{
    public PersonMap()
    {
        var map = new CustomTypeMap<Person>();
        map.Map("security_alias", "SecurityAlias");
        map.Map("Id", "Identifier");
        SqlMapper.SetTypeMap(map.Type, map);
    }
} 
```

当我这样称呼时：

```
EntityBaseMap entityBaseMap = new EntityBaseMap();
PersonMap personMap = new PersonMap(); 
```

现在，如果我使用 Person 实体，它不会在 person 实体内映射 EntityBase 属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T12:34:25.297

基本上，您需要编写一个`ITypeMap`和`IMemberMap`实现，它可以在内部基于您选择的任何规则（命名约定，如删除`S`等标识符、下划线等；属性；或您的情况下的自定义映射）。

这是一个完整的可运行示例，可能会有所帮助：

```
using Dapper;
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Reflection;

class SomeType
{
    public string Bar { get; set; }
    public int Foo { get; set; }
}

static class Program
{
    static Program()
    {
        // only need to do this ONCE
        var oldMap = SqlMapper.GetTypeMap(typeof(SomeType));
        var map = new CustomTypeMap(typeof(SomeType), oldMap);
        map.Map("IFoo", "Foo");
        map.Map("SBar", "Bar");
        SqlMapper.SetTypeMap(map.Type, map);
    }

    static void Main()
    {
        using (var conn = new SqlConnection("Server=.;Database=master;Trusted_Connection=true"))
        {
            conn.Open();

            var row = conn.Query<SomeType>("select 123 as [IFoo], 'abc' as [SBar]").Single();
            Console.WriteLine(row.Foo);
            Console.WriteLine(row.Bar);
        }
    }

    class CustomTypeMap : SqlMapper.ITypeMap
    {
        private readonly Dictionary<string, SqlMapper.IMemberMap> members
            = new Dictionary<string, SqlMapper.IMemberMap>(StringComparer.OrdinalIgnoreCase);
        public Type Type { get { return type; } }
        private readonly Type type;
        private readonly SqlMapper.ITypeMap tail;
        public void Map(string columnName, string memberName)
        {
            members[columnName] = new MemberMap(type.GetMember(memberName).Single(), columnName);
        }
        public CustomTypeMap(Type type, SqlMapper.ITypeMap tail)
        {
            this.type = type;
            this.tail = tail;
        }
        public System.Reflection.ConstructorInfo FindConstructor(string[] names, Type[] types)
        {
            return tail.FindConstructor(names, types);
        }

        public SqlMapper.IMemberMap GetConstructorParameter(
            System.Reflection.ConstructorInfo constructor, string columnName)
        {
            return tail.GetConstructorParameter(constructor, columnName);
        }

        public SqlMapper.IMemberMap GetMember(string columnName)
        {
            SqlMapper.IMemberMap map;
            if (!members.TryGetValue(columnName, out map))
            { // you might want to return null if you prefer not to fallback to the
              // default implementation
                map = tail.GetMember(columnName);
            }
            return map;
        }
    }
    class MemberMap : SqlMapper.IMemberMap
    {
        private readonly MemberInfo member;
        private readonly string columnName;
        public MemberMap(MemberInfo member, string columnName)
        {
            this.member = member;
            this.columnName = columnName;
        }
        public string ColumnName { get { return columnName; } }
        public System.Reflection.FieldInfo Field { get { return member as FieldInfo; } }
        public Type MemberType { get {
            switch (member.MemberType)
            {
                case MemberTypes.Field: return ((FieldInfo)member).FieldType;
                case MemberTypes.Property: return ((PropertyInfo)member).PropertyType;
                default: throw new NotSupportedException();
            }
        } }
        public System.Reflection.ParameterInfo Parameter { get { return null; } }
        public System.Reflection.PropertyInfo Property { get { return member as PropertyInfo; } }
    }
} 
```

# spring - 相同的代码，但在 ZK JSP 中抛出 NullPointerException

> ID：13989821
> 
> 赞同：0
> 
> 时间：2012-12-21T12:02:21.620
> 
> 标签：spring, jsp, spring-mvc, zk

我正在开发一个使用 Spring (Spring MVC) 和 Hibernate 的项目，这两个都是最新版本。对于前端，我使用的是 Zk 6.5.0。这是问题所在：

我有一个这样的控制器：

```
public class SearchController extends SelectorComposer<Component> {

    private static final long serialVersionUID = 1L;

    @WireVariable("MjestaAutoComplete")
    private AutoComplete<Mjesta> mjesta;

    @Listen("onChanging = #mj")
    public void autocomplete(InputEvent event) {    

        if (mjesta == null) {
            Messagebox.show("Mjesta == Null");
            return;
        } else {
            mjesta.doSomething();
        }            

    }

} 
```

Zul 页面如下所示：

```
<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?>
<zk>
    <div apply="hr.restart.erp.web.controller.SearchController">
            <combobox id="mj" autocomplete="true" autodrop="true" />
    </div>
</zk> 
```

这是使用 ZK JSP 标签的 jsp（只是相关部分）：

```
<z:variable-resolver use="org.zkoss.zkplus.spring.DelegatingVariableResolver" />
<z:page>
     <z:div apply="hr.restart.erp.web.controller.SearchController">
        <z:combobox id="mj" autocomplete="true" autodrop="true"></z:combobox>
     </z:div>
</z:page> 
```

如果我通过 jsp 的 include 指令在 jsp 中包含 zul 页面，则代码正常执行，即“mjesta”不为空。如果我删除指令并使用 zk jsp 标签而不是“mjesta”对象为空。当代码相同时，这怎么可能？我可以向自己解释这一点的唯一方法是“mjesta”没有自动接线，但这没有多大意义……有人能弄清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:34:48.603

通过阅读评论，我想如果你写

```
public SearchController(){
  AutoComplete<Mjesta> mjesta = SpringUtil.getBean("MjestaAutoComplete");
} 
```

`mjesta`不会为空吧？
无论此行为的原因如何，这都应该可以解决您的问题。
但是，我想原因应该在配置中，以便不会
在正确的地方调用 VariableResolver。[最好通过将其与zk doc](http://books.zkoss.org/wiki/ZK%20Spring%20Essentials/Working%20with%20ZK%20Spring)进行比较来检查您的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T06:39:18.797

这是一个解决方法：**在 doAfterCompose() 中手动调用 Selectors.wireVariables()。**

`public class SearchController extends SelectorComposer {`

 ````
 public void doAfterCompose(Component comp) throws Exception {

        super.doAfterCompose(comp);
        Selectors.wireVariables(getPage(), this, _resolvers);

    } 
```` 

`}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T22:11:42.237

我相信这是一个错误。

**我已经[在这里](http://tracker.zkoss.org/browse/ZK-1542)向 ZK 提交了一张票。**

消除了对 ZUL 或 ZKJSP 的尽可能多的依赖，我能够使用 VariableResolver 重现该问题。

我是`MyVariableResolver`这样创建的：

```
public class MyVariableResolver implements VariableResolver {

    @Override
    public Object resolveVariable(String name) throws XelException {
        System.out.println("Resolving variable: " + name);
        return null;
    }

} 
```

并将其附加到`MyController`类似的位置：

```
@VariableResolver(MyVariableResolver.class)
public class MyController extends SelectorComposer<Component> {

    private static final long serialVersionUID = 1L;

    @WireVariable
    public Object wireMePlease;

} 
```

ZUL 文件就变成了简单的：

```
<div apply="MyController"/> 
```

ZKJSP 文件是：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.zkoss.org/jsp/zul" prefix="z"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <body>
        <z:page>
            <z:div apply="MyController"/>
        </z:page>
    </body>
</html> 
```

评估 ZUL 文件时，`MyVariableResolver`调用 fetch `wireMePlease`。

但是，在评估 ZKJSP 文件时，`MyVariableResolver`永远不会调用它。

# yii - 我有一个带有患者列表的 CGridview，我需要在网格中添加一个按钮 url，以便它打印当前记录的更新页面？

> ID：13989822
> 
> 赞同：0
> 
> 时间：2012-12-21T12:02:35.087
> 
> 标签：yii

当我单击网格中的图标时，我需要获取患者的详细信息，`CGridview`它应该打印患者的详细信息（位于更新页面中）。

已经尝试过`window.print()`但`(.class).printPage()`不知道如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:32:56.220

在您`CGridView`调用时（可能在您的患者视图的管理视图中），添加一个额外的按钮，如下所示：

```
array(
    'class'=>'CButtonColumn',
    'template'=>'{printbutton}{view}{update}{delete}',
    'buttons'=>array(
        'printbutton' => array(
            'label'=>'Print',
            'imageUrl'=>Yii::app()->request->baseUrl.'/images/print_icon.png',
            'url'=>'Yii::app()->createUrl("patient/printitem", array("id"=>$data->id))',
         ),
    ),
), 
```

你会看到：

*   引用要用作图标的图像（在此示例中存储在 *image/print_icon.png* 中）
*   引用控制器/操作 URL（在此示例中为*患者/打印项*）并将其传递给`id`单击的患者记录

此控制器/操作现在必须选择患者记录，然后呈现视图，例如：

```
public function actionPrintitem(){
    $model = Patient::model()->findByPk($_REQUEST['id']);
    $this->render("printitem",array(
        "model" => $model
    ));
} 
```

现在，在这个视图中（您必须创建它），只需`window.print();`在页面加载后触发 a，这将打开浏览器打印窗口

# ios - UITableView“选择”触发segue

> ID：13989826
> 
> 赞同：9
> 
> 时间：2012-12-21T12:02:49.607
> 
> 标签：ios, uitableview, uistoryboard, uistoryboardsegue

我正在使用`Storyboard`和`UITableView`不使用`UINavigationController`.

点击任何单元格时，它应该将用户带到详细信息页面。我当然可以实现`didSelectRowAtIndexPath:`

但我想尝试一些完全不同的东西。我想用故事板来做`segue`。我使用原型单元，我可以简单地在单元上配置一个触发的 segue。我可以实现`prepareForSegue:`，但问题是，我怎么知道选择了哪个单元格？

![Xcode 屏幕](../Images/2a246e5e2f3878fd9f20320f971a3709.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T12:08:12.233

该`prepareForSegue:sender:`方法的`sender`参数是您要查找的单元格。`[self.tableView indexPathForCell:sender]`您可以通过（您可能需要演员表）获得它的索引路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:12:15.223

要清楚地了解如何使用故事板，请查看以下教程，[如何使用故事板](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

确保您也阅读了第二部分....这将使您清楚地了解如何使用，并且您的问题的解决方案也在那里。

# python - 当我尝试在 python 中比较两个字符串时，我在 python 中得到错误的结果

> ID：13989827
> 
> 赞同：0
> 
> 时间：2012-12-21T12:02:49.653
> 
> 标签：python, string, comparison

为什么我在比较两个字符串时得到错误的结果。

```
if password==en_pass:
            log.info("##### client credentials are OK ####")
else:
     print "credentials are wrong " 
```

我得到了 else 块中的结果

这是我的日志消息：

```
got the password :bmF2ZWVu  , encoded password :bmF2ZWVu 
```

编码密码来自哪里`base64`，那是我通过在`base 64`模块中使用 encodestring 方法得到的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:06:02.653

似乎密码不是`'bmF2ZWVu'`，而是包含尾随空格，例如`'bmF2ZWVu '`. 尝试`if password.strip()==en_pass.strip()`

# php - Mysql查询前一周的非活动用户

> ID：13989833
> 
> 赞同：0
> 
> 时间：2012-12-21T12:03:04.190
> 
> 标签：php, mysql, phpmyadmin

我有一个表 action_info，每个用户都在其中点击保存。我需要计算前一周的非活动用户数。以下是 ACTIVE 用户的查询：

```
SELECT COUNT( DISTINCT user_id ) as active_for_week FROM action_info 
     WHERE action_name = 'attack' 
     AND time >= (CURDATE( ) - INTERVAL 7 DAY) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:11:48.940

这将从用户表中排除上周活跃的所有用户，因此只为您提供非活跃用户。我希望这就是你要找的。

```
SELECT COUNT(*) FROM users WHERE ID NOT IN(
    SELECT DISTINCT user_id FROM action_info 
        WHERE action_name = 'attack' 
        AND time >= (CURDATE( ) - INTERVAL 7 DAY)
) 
```

更新：

在不查询用户表的情况下，您可以这样做：

```
SELECT COUNT(DISTINCT user_id) AS not_active_last_week FROM action_info 
WHERE action_name = 'attack' AND user_id NOT IN ( 
    SELECT DISTINCT user_id FROM action_info 
    WHERE action_name = 'attack' 
    AND time >= (CURDATE( ) - INTERVAL 7 DAY) 
) 
```

它为您提供了在某个时间点活跃但不是在上周活跃的所有用户的数量。这是[SQL 小提琴](http://sqlfiddle.com/#!2/ee5f3/5)

# c++ - 处理导致性能问题的双端队列块大小

> ID：13989835
> 
> 赞同：4
> 
> 时间：2012-12-21T12:03:07.863
> 
> 标签：c++, stl, deque

任何在性能关键代码中使用过“deque”的人都可能已经注意到（至少在 VS2010 附带的 STL 中）块大小为 16 字节。这是 VS2010 附带的头文件的实际片段：

```
#define _DEQUESIZ   (sizeof (value_type) <= 1 ? 16 \
    : sizeof (value_type) <= 2 ? 8 \
    : sizeof (value_type) <= 4 ? 4 \
    : sizeof (value_type) <= 8 ? 2 \
    : 1)    /* elements per block (a power of 2) */ 
```

这不是新信息，请参阅[关于 deque<T> 的额外间接](https://stackoverflow.com/questions/8305492/about-dequets-extra-indirection)以了解有关此 decl 导致性能问题的原因的更多详细信息。

我想在各种算法中使用双端队列，但如果我受限于这个实现，我就不会。绕过这个问题的最佳方法是什么？

1）使用另一个没有这个问题的容器。如果是这样，有人能指点我一个没有 GNU 许可证限制的吗？

2) 创建一个新的容器类来解决这个限制。这个新的容器类不会是 std 命名空间的一部分。

3) 编辑 'deque' 头文件中的 _DEQUESIZ 定义。IMO，我认为这是合法的，因为 _DEQUESIZ 的确切规范不是 STL 定义的双端队列概念的一部分。

4) 向 deque（和相关的迭代器类）添加一个额外的模板参数，以允许在编译时指定块大小。此参数将默认为 _DEQUESIZ 的当前定义。我几乎拒绝这个解决方案，因为现在我使用这个混蛋的 STL 的代码是不可移植的。

5) 游说大会更改 STL，这样我就可以愉快地使用 'deque' 而不会出现性能问题。IMO，这可能比当前的财政悬崖辩论更成功。顺便说一句，我是加拿大人，所以整个众议院 + 参议院 + 总统的繁文缛节令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:20:54.240

不是真正的答案，但评论太长了：

如果您担心性能，我不建议您编写新的容器类。通常，STL 实现使用基于它们所针对的特定编译器的实现细节的不可移植优化，而您通常无法这样做。我曾经尝试自己重写一些非常简单的 STL 算法，执行速度大约是 STL 算法的一半。

更改`_DEQUESIZ`可能会在无法预料的地方导致性能问题，因为其他代码可能会针对原始值进行优化。再一次，当您为特定编译器编写代码时，您可以执行的那种不可移植的优化。不仅如此：您甚至可能会破坏一些取决于`_DEQUESIZ`.

总而言之，在我看来，只有您的选项 1 是可行的。不幸的是，我不知道有什么好的选择；这就是为什么我写这不是您问题的真正答案的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:11:56.207

我赞成1）。

标准库的 libc++ 实现是在一个非常自由的许可证下分发的，实际上足够自由，你可以调整它以适应它，如果你的编译器阻塞它（它是围绕 Clang 设计的，它更符合 C++11比 VS 2010 更清楚）。您只需要保留许可证。

# c# - 如何声明具有两个泛型类型参数的方法？

> ID：13989849
> 
> 赞同：-3
> 
> 时间：2012-12-21T12:03:39.747
> 
> 标签：c#, .net, generics

是否可以`U`为函数返回值使用不同的通用参数类型（），而`T`对于本地参数已经有另一种通用参数类型？

我努力了：

```
private static U someMethod <T,U>(T type1, Stream s) 
```

和

```
private static U someMethod <T><U>(T type1, Stream s) 
```

**编辑：** 我们同意尝试：

```
private static U someMethod <T,U>(T type1, Stream s)

public static T someMethodParent<T>(Stream stream)
{

   U something = someMethod(type1, stream);  

      ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T12:06:18.133

`private static U someMethod <T,U>(T type1, Stream s)`是正确的语法。

[http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)

正如JavaSa在评论中所说，如果无法从用法中推断出实际类型，则需要提供实际类型，因此

```
private static U someMethodParent<T>(T Type1, Stream s)
{
    return someMethod<T, ConcreteTypeConvertibleToU>(type1, s);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T12:06:59.640

这应该有效。

```
private static U someMethod<T, U>(T type1, Stream s)
{
   return default(U);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T12:07:02.730

这有效：

```
private static TOutput someMethod<TInput, TOutput>(TInput from); 
```

看看[MSDN](http://msdn.microsoft.com/en-us/library/0zk36dx2%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T13:32:32.537

好的，在阅读了所有评论后，在我看来你有两个选择......

1.  在 someMethodParent 的主体中明确指定您需要的 someMethod 的返回类型

    ```
    public static T someMethodParent<T>(Stream stream)
    {
        TheTypeYouWant something = someMethod<T, TheTypeYouWant>(type1, stream);
        ...
        return Default(T);
    } 
    ```

2.  在 someMethodParent 的主体中使用 object 作为 someMethod 的返回类型，但您仍然需要强制转换为可用类型

    ```
    public static T someMethodParent<T>(Stream stream)
    {
        object something = someMethod<T, object>(type1, stream);
        ...
        TheTypeYouNeed x = (TheTypeYouNeed) something;
        // Use x in your calculations
        ...
        return Default(T);
    } 
    ```

两者都在对其他答案的评论中提到，但没有示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T13:04:47.580

为了在 someMethodParent 中使用 U ，它必须被指定，就像你在 someMethod 中所做的那样

```
public static T someMethodParent<T, U>(T type1, Stream stream) 
```

现在我可以在方法体中使用 U 作为 someMethod 的返回类型...

```
{
    U something = someMethod<T, U>(type1, stream);
    return Default(T);
} 
```

# javascript - jQuery.getJSON() 如何获取请求的状态

> ID：13989850
> 
> 赞同：1
> 
> 时间：2012-12-21T12:03:44.143
> 
> 标签：javascript, jquery

我正在使用 jQuery JavaScript 库**v1.4.2**

我正在使用此代码

```
var urlToGetToken = 'http://test.com';
        $.getJSON(urlToGetToken, function (data) {
            document.getElementById("demo3").innerHTML = data.access_token;
        }).success(function () {
            alert("second success");
        })
            .error(function () {
            alert("error");
        })
            .complete(function () {
            alert("complete");
        }); 
```

我想在 demo3 中打印状态代码和错误消息，以防 Ajax 请求失败。

我厌倦了使用 .error()... 但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:10:35.097

Jquery 1.5 中引入了 Promises/Deferreds - 我不确定您在 1.4.2 中使用的语法

我们不能将“失败”回调传递给 $.getJson - 您可以改用 $.ajax - 这绝对可以

如果要点击失败事件

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: successCallback,
  error : failureCallback
}); 

var successCallback = function(data){
$("#demo3").innerHTML = data.access_token;
};

var failureCallback  = function(jqXHR, textStatus, errorThrown){
$("#demo3").innerHTML = "Your error message"; 
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:17:39.860

正如`$.getJSON`ajax 请求查找错误消息一样，请使用以下命令：

```
$(document).ajaxError(function(event, msg, settings){
  alert(msg);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:13:47.110

从文档：

```
jQuery.getJSON( url [, data] [, success(data, textStatus, jqXHR)] ) 
```

所以：

```
$.getJSON(urlToGetToken, function (data) {
    document.getElementById("demo3").innerHTML = textStatus;
}).success(function () { 
```

将为您提供结果。

# r - 当向量的大小在R中= 1时，sample（）产生多个数字

> ID：13989851
> 
> 赞同：1
> 
> 时间：2012-12-21T12:03:45.800
> 
> 标签：r, sample

> **可能重复：**
> [从不同长度的向量中采样 R](https://stackoverflow.com/questions/13990125/sampling-in-r-from-vector-of-varying-length)

我有一个向量`a=5` 并想使用示例函数`sample(a)`。令我惊讶的是，这并不总是返回数字 5，但有时会返回 4,3 等。

我错过了什么？

# jquery - 形式干扰铁路路线

> ID：13989852
> 
> 赞同：0
> 
> 时间：2012-12-21T12:03:46.330
> 
> 标签：jquery, ruby-on-rails, forms, post, routes

我有一个我自己无法解决的问题，所以我很感激任何帮助。它涉及我的 Rails 应用程序，其中包含用户身份验证。

问题是，我想要一个搜索功能的输入表单，将输入发布到处理搜索查询的新页面。但它不起作用，因为 Rails 有点认为 POST 属于整个用户身份验证，并将我重定向到登录页面。

所以问题是，我如何将这个输入表单与其他输入表单区分开来。我想我可能需要一个新的搜索控制器，但整个搜索不是由 Rails 处理的，而是由 JavaScript 处理的。

以下是一些细节：

在 routes.rb 中：

```
controller :sessions do
  get 'login' => :new
  post 'login' => :create
  delete 'logout' => :destroy
  get 'logout' => :destroy
end 
```

application.html.erb 中的表单：

```
<div class="btn-group" style="height: 20px;">
<form action="/#search" method="post">
    <input id="search" type="text" class="search-query span2" placeholder="Search Our Database">
    </form>
</div> 
```

以及处理表单的 JavaScript/CoffeeScript（调用 'URL/#search' 时调用此函数：

```
displaySearch = ->

  str = $("#search").val()

  html = "You have just searched for "
  html += "<strong>" + str + "</strong>"

  $("#appCanvas").html html 
```

我非常感谢您关于如何解决此问题的提示 :) 非常感谢，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:36:01.923

我想你想要的是防止表单被提交？然后你只需要停止事件或在你的回调方法中返回 false。

```
$(myForm).submit -> false 
```

恐怕您已尝试将 /#search 用作要发布到的实际 URL。您应该知道锚点 (#search) 没有被传输到服务器，因此 Rails 无法路由它并假定对当前 URL 执行正常的 POST 操作。

如果您想通过 Javascript 处理它，请使用 AJAX 实现它。否则你真的应该为此创建一个新的控制器/动作。

# certificate - 我有一个 pfx 文件，我可以使用该文件创建一个带有私钥的证书吗

> ID：13989853
> 
> 赞同：0
> 
> 时间：2012-12-21T12:03:48.317
> 
> 标签：certificate, pfx

我对所有这些证书的东西有点困惑。我想创建一个带有私钥的证书（如果可能，可以导出）。我怎么做。我已经有一个 .pfx 文件。我可以使用它来创建具有该私钥的证书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:06:05.727

pfx 文件通常包含一个私钥和一个公钥。这就是该文件通常受密码保护的原因。

根据您的操作系统，您可以使用 openssl 或 Windows 系统选项中的证书管理器创建新证书。

这是实际通配符证书的屏幕：

![通配符证书](../Images/73864c21840b8077f407c71c076717aa.png)

# visual-studio-2008 - 如何使用 vs2008 构建不同的操作系统兼容性二进制文件

> ID：13989857
> 
> 赞同：0
> 
> 时间：2012-12-21T12:03:56.010
> 
> 标签：visual-studio-2008

我正在使用 Visual Studio 2008 专业版。我想在 win2k3r2 上运行 vs2008 编译二进制文件有人可以帮我使用 vs2008 构建不同的操作系统兼容的二进制文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:10:11.453

二进制文件应该是兼容的，但您可能需要限制对 API 函数的使用。要在编译时强制执行此操作，请设置适当的预处理器定义：

[http://msdn.microsoft.com/en-us/library/6sehtctf(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/6sehtctf(v=vs.90).aspx)

# android - 复选框不起作用

> ID：13989858
> 
> 赞同：0
> 
> 时间：2012-12-21T12:03:57.693
> 
> 标签：android, android-layout, android-widget

我有一个复选框和一个 textView，当复选框被选中时，textview 应该显示该复选框被按下。但是当我运行我的代码时，我得到一个空指针异常。这是我的代码：

```
public class MyActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {
    CheckBox android=(CheckBox)findViewById(R.id.android);
    CheckBox ios=(CheckBox)findViewById(R.id.ios);
    CheckBox webos=(CheckBox)findViewById(R.id.webos);
    CheckBox windows=(CheckBox)findViewById(R.id.windows);
    Button generate=(Button)findViewById(R.id.generate);
    final TextView result=(TextView)findViewById(R.id.result);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    android.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            if(((CheckBox)view).isChecked())
                result.setText("Android Checked");
        }
    });

   }
  } 
```

这是我的问题所在的 logcat 部分：

```
12-21 17:25:00.324: ERROR/AndroidRuntime(960): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.GridAndroid/com.example.GridAndroid.MyActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    at android.app.ActivityThread.access$600(ActivityThread.java:130)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.example.GridAndroid.MyActivity.onCreate(MyActivity.java:26)
    at android.app.Activity.performCreate(Activity.java:5008)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

所以我的问题是我的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:05:46.020

在 setcontentview() 之后获取 id

```
public class MyActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

CheckBox android=(CheckBox)findViewById(R.id.android);
    CheckBox ios=(CheckBox)findViewById(R.id.ios);
    CheckBox webos=(CheckBox)findViewById(R.id.webos);
    CheckBox windows=(CheckBox)findViewById(R.id.windows);
    Button generate=(Button)findViewById(R.id.generate);
    final TextView result=(TextView)findViewById(R.id.result);

    android.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            if(((CheckBox)view).isChecked())
                result.setText("Android Checked");
        }
    });

   }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:08:46.890

在此之后使用您的代码。

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
```

# google-app-engine - App Engine 中的 Python unicode 字符串操作失败

> ID：13989860
> 
> 赞同：4
> 
> 时间：2012-12-21T12:04:01.877
> 
> 标签：google-app-engine, character-encoding, python-2.7

在开发/本地机器上运行的 Python 代码，但在安装到 Appengine 后失败：

我的文件中的第一行：

```
# -*- coding: utf8 -*-O 
```

代码后面的行：

```
s1 = u'Ismerőseid'
logging.info (s1)
s2 = s1 + u':' + s1
logging.info (s2)
logging.info ("%s,%s", s1, s2) 
```

在开发（本地主机）中：

```
INFO     2012-12-18 04:01:17,926 AppRun.py:662] Ismerőseid,
INFO     2012-12-18 04:01:17,926 AppRun.py:664] Ismerőseid:Ismerőseid
INFO     2012-12-18 04:01:17,926 AppRun.py:665] Ismerőseid,Ismerőseid. Ó, 
```

安装/运行后在 App Engine 上：

```
I 2012-12-21 06:52:07.730 
É, Á, Ö, Ü. Ó,

E 2012-12-21 06:52:07.736

Traceback (most recent call last):
  File "....", line 672, in xxxx
    s3 = s1 + u':' + s1
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 5: ordinal not in range(128) 
```

我尝试过编码/解码/等的各种组合。我还在粘贴的字符串“Ismerőseid”上进行了chardet，它给了我`{'confidence': 0.7402600692642154, 'encoding': 'ISO-8859-2'}`

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:47:07.083

将这 3 行放在 Python 27 代码的顶部以使用 unicode ：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from __future__ import unicode_literals

# And this code will not give you any problems

s1 = 'É, Á, Ö, Ü. Ó,'
logging.info (s1)
s2 = s1 + ':' + s1
logging.info ("%s,%s", s1, s2) 
```

永远不要用户 str()。只有当你真的需要！

并阅读尼克约翰逊的[这篇博文。](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)这是在 Python 27 之前。他没有使用 . `from __future__ import unicode_literals`，这使得在 Python 中使用 unicode 变得如此简单。

# google-maps - 使用谷歌地图和拉撒路的纬度经度选择器

> ID：13989862
> 
> 赞同：2
> 
> 时间：2012-12-21T12:04:15.643
> 
> 标签：google-maps, lazarus

我正在设计一个简单的地理定位应用程序，用户必须选择它的位置。

我想知道是否有任何方法可以访问谷歌地图或任何其他地图以显示地图并允许用户通过单击它来选择他的位置。

我已经设法使用 TWebbrowser 使用 Delphi 做到这一点，但我正在寻找一个跨平台的解决方案。

也许有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:46:36.703

是的，有办法。在 Google 代码上查找 TMapViewer。

特征：

*   谷歌地图：普通、卫星、混合、物理、物理混合
*   基于 OpenStreet 的地图：OpenStreetMap Mapnik、OpenStreetMap Osmrenderer、OpenCycleMap
*   虚拟地球：普通、空中、道路、混合
*   雅虎：普通、卫星、混合
*   诺基亚 Ovi：普通、卫星、混合、物理
*   大量调试信息
*   可插拔下载引擎（synapse，原生 win32）
*   基于基本线程的下载

链接：[从 Google 代码中获取它们](https://code.google.com/p/mapviewer/source/browse?repo=default)

干杯！！！

# android - 将数据插入到sqlite android

> ID：13989868
> 
> 赞同：-3
> 
> 时间：2012-12-21T12:04:47.497
> 
> 标签：android, sqlite, android-layout

我有以下查询在 sqlite 表中插入值，

```
Insert Into T (Test) Values (' 42'SIZE ') 
```

但它给了我插入此类数据的错误。

这是有效的 SQL 语法。

我只是有问题 42**英寸**= ' 42'LED TV Size ' 应该插入到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:07:35.667

它应该是：

```
INSERT INTO T (Test) VALUES ('42', SIZE) 
```

（假设'T'是你的桌子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:23:42.117

无效的 sql...

```
INSERT INTO table_name
VALUES (value1, value2, value3,...) 
```

或者，如果您只想填写表格的特定部分：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:35:29.507

您正在尝试插入该值`42' SIZE`，并且由于这是一个字符串，因此您将其括在引号内...您面临的问题是其中有一个引号会破坏您的字符串，而 SQL 不知道如何调和它。您必须“转义”将成为字符串一部分的引号（使其不是完整 SQL 语句的一部分）。

SQLite 方法是简单地放置第二个引号，它会给你： `Insert Into T (Test) Values (' 42''SIZE ')`。

标准方法是使用反斜杠，但我认为 SQLite 不允许这样做。我尝试使用 sqlite3 命令行工具进行检查，但我对使用反斜杠作为转义方法并不满意。

# wordpress - 在 Wordpress 中插入媒体后，Thickbox 未关闭

> ID：13989871
> 
> 赞同：0
> 
> 时间：2012-12-21T12:04:57.923
> 
> 标签：wordpress, thickbox

我正在使用 Wordpress Thickbox 尝试重新运行用户想要选择的图像的值（当他们单击“插入帖子”时），但 Thickbox 没有关闭，只是显示为任何空白框。

该字段`$('#office-image input#image')`存在，并且 Firebug 不会报告任何错误。

我不确定为什么这不起作用，因此需要任何帮助。谢谢。

```
window.send_to_editor = function(html){

    var image_url = $('img', html).attr('src');

    $('#office-image input#image').val(image_url);
    tb_remove();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:11:00.097

```
tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
window.original_send_to_editor = window.send_to_editor;
window.send_to_editor = function (html) {
    var fileInput = jQuery(fileInput_id);
    if (fileInput) {
        fileurl = jQuery('img', html).attr('src');
        jQuery(fileInput).val(fileurl);
        tb_remove();

    } else {
        window.original_send_to_editor(html);
    }
}; 
```

我正在使用上面的脚本，它工作正常

# objective-c - 通过 X 和 Y 坐标将多个项目逻辑布局到视图中

> ID：13989876
> 
> 赞同：0
> 
> 时间：2012-12-21T12:05:34.993
> 
> 标签：objective-c, layout, cgpoint

我有一个`UIView`并且我想添加一系列以编程方式生成`UIButtons`的。

我创建了一个方法，通过`CGPoint`.

我想将这些按钮连续放置 3 个，根据需要放置在尽可能多的行上。

我不知道如何以编程方式生成 x 和 y 坐标以将项目放置在视图上。一旦放置了三个按钮，我就被困在如何让按钮放到新行上。

这是我的代码，我想在此方法中处理某些内容以仅根据按钮的索引返回坐标：

```
- (CGPoint)calculateCoordinatesWithIndex:(NSInteger)index{
    NSInteger x = 100;
    NSInteger y = 50;
    return CGPointMake(x, y);
} 
```

我能想到的唯一解决方案似乎非常笨拙且效率低下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:18:29.993

你好怎么样：

```
#define BUTTON_WIDTH    100
#define BUTTON_HEIGHT   50
- (void) placeButtonsFromButtonsArray:(NSArray *) buttons{

   CGFloat currentXPosition = 0.0;
   CGFloat currentYPosition = 0.0;

   for (NSUInteger i = 0; i < [buttons count]; i++){
        b.frame = CGRectMake(currentXPosition, currentYPosition, BUTTON_WIDTH, BUTTON_HEIGHT);
        if (i%3 == 2){
           currentXPosition = 0;
           currentYPostion += BUTTON_HEIGHT;
        }
        else currentXPosition += BUTTON_WIDTH;
   }
} 
```

or Using your method :

```
 - (CGPoint)calculateCoordinatesWithIndex:(NSInteger)index{

     //computes on which line the button should be
     NSUInteger line = (index/3);

     //computes on which row the button should be 
     NSUInteger row = (index%3) ;     

     return CGPointMake(row*BUTTON_WIDTH, line*BUTTON_HEIGHT);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:33:57.207

If you're targeting iOS 6, you could use a UICollectionView for this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:17:58.150

试试这个，在.h

```
 {

NSInteger x;

 NSInteger y;

 int noOfbtninrow;

 }

  -(void)viewDidload

{

x = 100;

y = 50;

 noOfbtninrow=0;
 }

- (CGPoint)calculateCoordinatesWithIndex:(NSInteger)index
 {
   if(noOfbtninrow==3)

 {
  x=100;
   y=y+100
 noOfbtninrow=0;
  }

  else

 {
  noOfbtninrow++;
   x=x+100;
  }
  return CGPointMake(x, y);
  } 
```

# mysql - MYSQL 将表移动到第二个数据库并过滤

> ID：13989880
> 
> 赞同：0
> 
> 时间：2012-12-21T12:05:47.210
> 
> 标签：mysql

我正在尝试将表从一个数据库移动到另一个数据库。我在此过程中过滤数据。例如：

```
DROP TABLE IF EXISTS target_db.products;
CREATE TABLE target_db.products LIKE original_db.products;
INSERT INTO target_db.products 
    SELECT * FROM original_db.products 
    WHERE products_status = 1 
        AND products_date_added > (SELECT DATE_SUB(now(), INTERVAL 18 MONTH)); 
```

这工作正常，我得到了我期望的记录。但是当 WHERE 短语包含另一个表时，它会失败（因为列列表不匹配。）例如：

```
# export products
DROP TABLE IF EXISTS target_db.products_description;
CREATE TABLE target_db.products_description LIKE original_db.products_description;
INSERT INTO target_db.products_description 
    SELECT * FROM original_db.products_description pd,  original_db.products p  
    WHERE p.products_status = 1 
        AND p.products_date_added > (SELECT DATE_SUB(now(), INTERVAL 18 MONTH)) 
        AND pd.products_id = p.products_id; 
```

除了过度指定列之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:19:09.020

对不起，

愚蠢的问题。您使用更好的连接结构或嵌套查询。

呸！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:34:43.847

由于您在选择中有 * ，因此连接的列将成为结果集的一部分。指定它们。

# node.js - 为什么我的 Node.js 脚本中的 MongoClient 没有完成？

> ID：13989883
> 
> 赞同：4
> 
> 时间：2012-12-21T12:05:59.560
> 
> 标签：node.js, mongodb, node-mongodb-native

我有一个一次性节点脚本，它对 MongoLab 上的 MongoDB 数据库进行了一些更改。然而，一旦它完成，它永远不会退出事件循环（我总是必须 ctrl+C 它），无论我做了多少`db.close()`和`db.logout()`调用。

奇怪的是，如果我启动一个本地运行实例`mongod`并连接到它，脚本完成得很好，但远程连接永远不会结束。

这是我的脚本的简短版本，仍然存在问题（在命令行上将 URL 带到服务器）。这是怎么回事？

```
var mongodb = require("mongodb");

function onSuccess(cb){
  return function(err) {
    if (err) {
      console.error(err)
    } else {
      cb.apply(this,Array.prototype.slice.call(arguments,1))
    }
  }
}

console.log("Connecting to "+process.argv[2]+' ...');
mongodb.MongoClient.connect(process.argv[2],onSuccess(function(db){
  console.log("Connected.");
  db.logout(onSuccess(function(logoutResult){
    db.close(onSuccess(function(closeResult){
      console.log("All finished. Can has prompt return nao?")
    }));
  }));
})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:28:56.520

我怀疑这与您定义闭包的方式有关，但我不能完全确定它。

值得一提的是，以下是我使用的方法，它确实按预期关闭了连接：

```
MongoClient.connect(dbUrl, function(err, db) {

  if(err) return callback(err);

  var collection = db.collection(dbCollection);
  collection.find().toArray(function(err, items){

    db.close()
    if(err) return callback(err);
    callback(null, items);

  });

}); 
```

你可以在这里找到一个完整的例子：[https ://github.com/hectorcorrea/mongoDbSample](https://github.com/hectorcorrea/mongoDbSample)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:13:40.803

刚刚尝试使用驱动程序版本 1.2.7/1.2.8 和最新的 1.2.9 针对 mongolab 的代码，它可以正常工作。所以更有可能是导致这种情况的驱动程序/操作系统/节点版本的奇怪组合。我建议将您的节点和驱动程序升级到最新版本，然后重试。

# ajax - jquery - 加载所有文本文件并显示它们

> ID：13989887
> 
> 赞同：3
> 
> 时间：2012-12-21T12:06:08.733
> 
> 标签：ajax, jquery

我已经使用 jQuery 很长时间了，但是我从来没有学过 AJAX，所以我来了..

我们有这个代码：

```
$('body').load('hello.txt'); 
```

很简单，现在假设我有多个文本文件（我不知道它们的名字）我想加载，
我可以这样做吗？也许我需要循环所有文本文件并以某种方式加载它们？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:35:19.803

假设您在特定位置的服务器中有文本文件，您可以执行以下操作：

**HTML 标记：**

```
 <div id="fileList">
       here list of files will be loaded so that user can select which one to load
 <div>

 <div id="file-content">
       content of selected file will be loaded here
 <div> 
```

**jQuery部分：**

```
 $.ajax({
      url : "FileServer/GetFileNames", // this is just a url that is responsible to return files list 
      success : function(data){
          //here a JSON data including filenames expected 
          $.each(data,function(i,item){
                var $fileHolder = $("<div></div>");
                $fileHolder.attr("filename",item.filename).click(function(){
                      $("#file-content").load($(this).attr("filename"));
                }).html(item.filename).appendTo("#fileList");  
          });
      }
 }); 
```

**预期的 JSON 结构**

```
 [
      {
          filename : "text1.txt"
      },
      {
          filename : "text2.txt"
      },
      {
          filename : "text3.txt"
      } 
   ] 
```

在服务器端实现文件列表取决于您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T12:18:13.003

> 出于明显的安全原因，Javascript 无法访问本地文件系统。这是不可能的。
> 
> 除非您尝试遍历服务器上的文件，在这种情况下，您无论如何都不想使用 jQuery，而是使用 ASP.NET 或 PHP 或您正在使用的任何框架之类的东西。

[jQuery目录中的foreach文件](https://stackoverflow.com/questions/3087502/foreach-file-in-directory-jquery)

**更新**

试试这个

```
var files;
$.ajax({
    url: "http://homepage/folder",
    success: function (txt) {
        files = txt.split('<A href="');
    }
});
var fList = new Array();
$(files).each(function () {
    if (this.indexOf('.txt') > -1) {
        fList.push(this);
    }
});
for (i = 0; i < fList.length; i++) {
    fList[i] = fList[i].split('">')[0];
    fList[i] = fList[i].replace('"');
}

for (i = 0; i < fList.length; i++) {
    $('#idLoadHere').load(fList[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T00:43:33.447

*   运行 FTP list 命令（有多种方法可以做到，Web-Sockets 就是其中之一。）
*   一个更简单、更常见的安全解决方案是文件的服务器端列表，并“烹饪”HTML *（意味着将文件列表嵌入其中）*，

[*您可以使用原始 HTML 或将其放入`var`JavaScript 使用的语句中（例如）。]

请参阅以下答案：

[https://stackoverflow.com/a/30949072/257319](https://stackoverflow.com/a/30949072/257319)

# liferay - 限制用户选择/更改 Web 内容

> ID：13989891
> 
> 赞同：0
> 
> 时间：2012-12-21T12:06:31.203
> 
> 标签：liferay, liferay-6, web-content

**Liferay 6.1 CE GA2**

如何删除“选择”/“添加 Web 内容”按钮，以便用户无法更改 Web 内容显示的内容？

我已经删除了除`View`网站页面和网页内容显示的用户之外的所有权限，但是当我使用用户帐户登录时，我仍然可以更改网页内容。Web 内容应仅由管理员而不是用户选择。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:16:48.730

很难说你提供的信息出了什么问题。一种可能性是您登录的用户帐户是“站点管理员”或“站点所有者”——在这种情况下，他们默认有权管理该站点中的内容。如果您将该用户帐户设置为普通的“用户”，则权限应该会消失。

如果您有自定义角色，请注意角色的“定义权限”部分多次出现“Web 内容”：请参阅“内容”、“应用程序”和“控制面板”的中间标题。您可以在“内容”部分找到相关部分。

页面权限与对 WebContent 等内容的权限无关。

# iphone - 在 iOS 中签署 XML 文档

> ID：13989894
> 
> 赞同：1
> 
> 时间：2012-12-21T12:06:45.013
> 
> 标签：iphone, objective-c, ios, xcode

有谁知道如何签署 XML 文档。在 .net 平台上很容易做到这一点，因为有内置的库可以为您做到这一点。它只是几行代码。首先，我需要规范化（规范化）XML 文档，然后对其进行签名。我需要这样的东西：http: [//msdn.microsoft.com/en-us/library/ms229745.aspx](http://msdn.microsoft.com/en-us/library/ms229745.aspx) 提前谢谢你

# windows-phone-7 - 如何让列表框不记得它的最后一个视图

> ID：13989895
> 
> 赞同：0
> 
> 时间：2012-12-21T12:06:46.530
> 
> 标签：windows-phone-7, listbox, stackpanel, remember-me, virtualizingstackpanel

我有一个`Listbox`绑定到一个`ObservableCollection`. 在我的应用程序中，我需要清除此集合`OnNavigatedFrom`并将其读入`OnNavigatedTo`以减少内存。

但是，我看到当使用`StackPanel`as时`ItemsPanelTemplate`，`Listbox`可以记住它的最后一个视图（它的选定项），而`VirtualizingStackPanel`不会。

那么如何在使用时禁用此行为`StackPanel`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:33:55.653

这是一个常见的问题，你需要将Listbox的SelectedIndex设置为-1

# netbeans - 开始使用 netbeans 进行网站开发

> ID：13989896
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:06:53.390
> 
> 标签：netbeans, ide

很久以前，我曾经使用 eclipse（或者实际上是 Aptana）来制作网站。我从来没有真正了解它是如何工作的。在我的笔记本电脑崩溃后，我决定安装 netbeans，希望它不会那么复杂，但它仍然是压倒性的。我知道使用一个好的 IDE 会有很大帮助，但我发现它非常复杂（学习曲线陡峭）。

有人知道一些好的教程来帮助我开始吗？

顺便说一句，我将主要使用它来构建网站（php、html、css），偶尔以更抽象的方式（drupal）或使用框架（Zend）。不过，我已经完成了一些 Java 编程，并想开始为 android 构建一些应用程序，或者甚至可能为 windows 8 学习 c# 或 c++。

我也想开始使用颠覆，如果可能的话，一个集成的 ftp 客户端。

帮助我开始将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:19:42.590

哇，这真的是关于 5 个不同的问题。首先，使用 IDE（用于 Web 开发）的好处通常在于重构工具、良好的文本编辑器、内置 Web 预览和内置开发服务器（如 apache 或 glassfish）。出于您的目的，eclipse 和 netbeans 将同样有效，但我认为 netbeans 的学习曲线稍微不那么陡峭，但两者都相当直截了当。我将为您提供我认为对您有帮助的链接列表：

Netbeans - [http://netbeans.org/kb/docs/php/quickstart.html](http://netbeans.org/kb/docs/php/quickstart.html)

安卓 - [http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

基于 Windows 的 svn 客户端 - [http://tortoisesvn.net/](http://tortoisesvn.net/)

免费的 SVN 存储库托管 - [https://www.assembla.com/home](https://www.assembla.com/home)

好的 FTP 客户端 - [http://filezilla-project.org/](http://filezilla-project.org/)

我认为没有任何组合的 svn 和 ftp 客户端，拥有一个也没有任何意义。关于 android 开发的快速说明可能会指导您选择 IDE，Android 开发通常在 eclipse 中使用 ADT 插件完成。只是一些想法...

# jsf - jsf会话超时循环

> ID：13989897
> 
> 赞同：1
> 
> 时间：2012-12-21T12:06:56.383
> 
> 标签：jsf, session, exception, loops, timeout

我对 JSF 会话处理有疑问：起初我每次都得到`viewExpiredException`：

```
javax.faces.application.ViewExpiredException: viewId:/anyForm.jsf - View /anyForm.jsf could not be restored. 
```

所以我在我的文件中添加了以下代码`web.xml`：

```
<error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/index.jsf?reason=expired</location>
</error-page> 
```

以及我的`index.jsf`文件中的以下内容（也有一些表格和输入）：

```
<h:outputText value="#{messages.session_expired}"
              rendered="#{param.reason == 'expired'}" /> 
```

每当我现在超时时，我都会重定向到`index.jsf`并显示文本，**但是**如果我在输入中输入一个值并按下表单的提交按钮，我仍然会重定向到我的`index.jsf`. 所以，我陷入了一个循环。我也尝试过这样的事情：

```
<context-param>
        <param-name>com.sun.faces.enableRestoreView11Compatibility</param-name>
        <param-value>true</param-value>
</context-param> 
```

由于我阅读`index.jsf`然后自动创建一个新会话。但是，这根本没有帮助我。如果我遇到（循环）超时并更改输入值并提交表单（我使用的是 primefaces“微调器”输入），我也会得到这个异常：

```
javax.servlet.ServletException: Index: 1, Size: 1
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)

java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    java.util.ArrayList.RangeCheck(ArrayList.java:547)
    java.util.ArrayList.get(ArrayList.java:322)
    javax.faces.component.AttachedObjectListHolder.restoreState(AttachedObjectListHolder.java:165)
    javax.faces.component.UIInput.restoreState(UIInput.java:1411)
    com.sun.faces.application.view.StateManagementStrategyImpl$2.visit(StateManagementStrategyImpl.java:276)
    com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:151)
    javax.faces.component.UIComponent.visitTree(UIComponent.java:1589)
    javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    javax.faces.component.UIForm.visitTree(UIForm.java:344)
    javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:263)
    com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:452)
    com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 
```

# couchdb - CouchDB 附件的 md5 摘要格式是什么？

> ID：13989907
> 
> 赞同：7
> 
> 时间：2012-12-21T12:07:26.327
> 
> 标签：couchdb, md5

我正在尝试使用我放在 CouchDB 上的附件的 md5 摘要，但我不明白它使用什么格式。

```
{
"_id":"ef467479af422db0c388fa00b3000d40",
"_rev":"3-6d1015e7d25103180817136eefa9f942",
"_attachments":{
    "foo":{
        "content_type":"application/octet-stream",
        "revpos":2,
        "digest":"md5-yDbs1scfYdqqLpxyFb1gFw==",
        "length":1952913,"stub":true }
    }
} 
```

那个 md5 不是十六进制的，但它仍然是 ASCII，我该如何使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:08:57.367

前缀后面的摘要部分`md5-`看起来像是 Base-64 格式。

如果用 Javascript 解析，该`atob`函数可以将其转换回二进制数据。

假设以上是正确的，那么十六进制等价物是：

```
c8 36 ec d6 c7 1f 61 da aa 2e 9c 72 15 bd 60 17 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T19:27:03.150

对于希望使用 nodejs 使用 couchdb 使用的摘要格式的任何人，您可以通过删除“md5-”前缀将 base64 编码的摘要转换为“正常”十六进制字符串，然后执行以下操作：

```
new Buffer('yDbs1scfYdqqLpxyFb1gFw==', 'base64').toString('hex') 
```

反过来，从十六进制值创建摘要字符串：

```
new Buffer('c836ecd6c71f61daaa2e9c7215bd6017', 'hex').toString('base64') 
```

# python - 如何将数字形式的python列表转换为字母？

> ID：13989912
> 
> 赞同：2
> 
> 时间：2012-12-21T12:07:40.877
> 
> 标签：python, list, for-loop

我有一个 python 程序，它打印出一些由其他 python 程序创建的列表，格式如下： `[0, [], 0, 1, [], 1]`

我想将 0 和 1 更改为字母，即在上面的输入中，我想将其 `[x, [], x, y, [], y]`作为输出

到目前为止，我执行此操作的代码如下所示：

```
for x in search.Search(s, s.run()):
    if x == 0:
        return x
    elif x == 1
        return y 
```

我知道我错过了一些东西，但我不太确定是什么:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:09:40.923

使用列表推导：

```
subst = {0: 'x', 1: 'y'}
return [subst.get(v, v) if v else v for v in search.Search(s, s.run()] 
```

通过使用`return`，您可以提前退出循环。

这`if v else v`有助于避免尝试将空列表用作键（这会引发 TypeError；列表不可散列，因此不允许用作键）。替代策略是：

```
from collections import Hashable

subst = {0: 'x', 1: 'y'}
hashable = lambda v: isinstance(v, Hashable)
return [subst.get(v, v) if hashable(v) else v for v in search.Search(s, s.run()] 
```

`subst`地图更容易扩展；但是使用函数来映射值（如[Jacob's answer](https://stackoverflow.com/a/13989945)中所用）对您来说可能更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T12:10:15.750

返回中断执行，你可能想要这样的东西

```
def switch_letter(x):
    if x == 0:
        return 'x'
    if x == 1:
        return 'y'
    return x

my_letters = [switch_letter(x) for x in search.Search(s, s.run())] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:11:57.957

这个答案类似于Martjin的答案。也许你可以试试这个。但它适用于 python>2.4

```
>>> a=[0, [], 0, 1, [], 1]
>>> s={0:'x',1:'y'}
>>> [x if isinstance(x,list) else s.get(x,'') for x in a]
['x', [], 'x', 'y', [], 'y'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T05:45:47.897

```
 python 3.2
     a= [0, [], 0, 1, [], 1]
     b={0:"x",1:"y"}
     result=[b[i] if isinstance(i,int) else [] for i in a]

  2\. [i  if isinstance(i,list) else b[i] for i in a ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T06:04:11.497

我认为对于非 python 程序员来说，内置函数映射比列表压缩更简洁、更简单。

```
def sust(item):
    if item == 0:
        return "x"
    if item == 1:
        return "y"
    return item
output = map(sust, search.Search(s, s.run())) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-21T12:18:13.153

生成器允许在内部使用 if-else 语句。在这种情况下，您的代码将看起来接下来。

```
['y' if i else 'x' for i in search.Search(s, s.run()] 
```

# mongodb - Mongodb并发map reduce

> ID：13989916
> 
> 赞同：0
> 
> 时间：2012-12-21T12:08:16.727
> 
> 标签：mongodb, concurrency, mapreduce

我收集了按时间字段索引的事件。我可以并行运行一个以上的**增量**（输出合并到另一个集合）map-reduce 作业吗？（例如 - 每五分钟）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:15:13.363

JavaScript 引擎每个分片都是单线程的，`mongod`即使您可以安排另一个 MR 在同一台计算机上运行，​​我也不相信它会在当前运行的 MR 完成之前运行。

话虽如此，我确实认为 V8 允许您的问题所需的并发功能：http: [//jira.mongodb.org/browse/SERVER-2407](http://jira.mongodb.org/browse/SERVER-2407)这是我认为您会想看的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T11:26:54.783

从 MongoDB 2.4 版本开始，V8 JavaScript 引擎[成为默认](http://docs.mongodb.org/manual/core/map-reduce-concurrency/)引擎，它允许同时执行**多个 JavaScript 操作。**

所以是的，您可以并行执行多个 map reduce 作业。

# asp.net - 如何在下拉列表中选择默认值时分配 id 零

> ID：13989918
> 
> 赞同：1
> 
> 时间：2012-12-21T12:08:16.663
> 
> 标签：asp.net, sql-server

我有一个下拉列表，我希望如果用户未选择任何内容，则 id 应存储在数据库中为 0，否则如果用户选择了某些内容，则存储该项目的 id。代码在这里：

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {

       Query = @"SELECT [category_id] FROM [Category_Master]";
       ds1 = dl.fetchrecord(Query);
       ddl_parent.Items.Insert(0, new ListItem("---none---"));
       int i = 0;
       while (i < ds1.Tables[0].Rows.Count)
       {
           flag = 1;
           catname = "";
           index = 1;
           ListItem li = new ListItem();
           li.Text = catmapping(ds1.Tables[0].Rows[i]["category_id"].ToString());
           li.Value = ds1.Tables[0].Rows[i]["category_id"].ToString();
           ddl_parent.Items.Add(li);
           i = i + 1;
    }
   }
   lbl_mess.Text = "";
}

protected void Button1_Click(object sender, EventArgs e)
{

   if (IsPostBack)
   {
       Query = @"INSERT INTO [RbmDatabase].[dbo].[Category_Master]
      ([Category_ParentId]
      ,[Category_Name]
      ,[Category_MetaTag]
      ,[Category_MetaTagKeywords]
      ,[Category_Description]
      ,[Category_SortOrder]
      ,[Category_Status]
      ,[Category_UpdateDate])
VALUES ('" + dl.QoutesHandel(ddl_parent.SelectedValue.ToString()) + "','" + dl.QoutesHandel(txt_category.Text.Trim()) + "','" + dl.QoutesHandel(txt_MTdesc.Text.Trim()) + "','" + dl.QoutesHandel(txt_MTkey.Text.Trim()) + "','" + dl.QoutesHandel(txt_Desc.Text.Trim()) + "','" + dl.QoutesHandel(txt_order.Text.Trim()) + "','" + dl.QoutesHandel(ddl_status.SelectedIndex.ToString()) + "','" + String.Format("{0:yyyy-MM-dd}", DateTime.Now) + "')";
       dl.insertrecord(Query, lbl_mess);
       lbl_mess.Text = "Record Inserted  Successfull.....!";

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:15:09.757

您应该在创建列表项时插入“无”值

```
new ListItem("---none---", "0")); 
```

# c - 如何在开源的多个文件中使用gdb

> ID：13989924
> 
> 赞同：0
> 
> 时间：2012-12-21T12:08:51.650
> 
> 标签：c, trie

我正在尝试使用 gdb trietool 来理解 trietool 源代码。但它总是无法使用 gdb。

步骤如下： (1)./configure CFLAGS=-g (2)make

然后`cd /mnt/hgfs/code/libdatrie-0.2.5/tools,ls -lrt` and `gdb trietool-0.2`，会报错如下

```
/mnt/hgfs/code/libdatrie-0.2.5/tools/trietool-0.2": not in executable format: 
```

并且`gdb trietool-0.2.o`，没关系，然后输入命令b ../datrie/trie.c:289，它报告

```
(gdb) b ../datrie/trie.c:289
No source file named ../datrie/trie.c. 
```

但实际上 datrie 目录中有 trie.c 文件。

如何解决此问题以使 gdb 工作？我想念某事吗？

为什么 gdb trietool-0.2 不行？

```
milan@milan:/mnt/hgfs/code/libdatrie-0.2.5/tools$ file trietool-0.2
trietool-0.2: Bourne-Again shell script text executable

/mnt/hgfs/code/libdatrie-0.2.5/tools$ file trietool.o
trietool.o: ELF 32-bit LSB relocatable, Intel 80386, version 1 (SYSV), not stripped 
```

# android - 使用 AsyncTask 将图像加载到 Textview

> ID：13989929
> 
> 赞同：1
> 
> 时间：2012-12-21T12:09:34.747
> 
> 标签：android, android-asynctask, textview, drawable

我的问题如下：我尝试将图像加载到这样的文本视图：

```
URLImageParser p = new URLImageParser(textView, this);     
Spanned htmlSpan = Html.fromHtml(textWithImages, p, null);
textView.setText(htmlSpan); 
```

我按照这个例子[https://stackoverflow.com/a/7442725/1835251](https://stackoverflow.com/a/7442725/1835251)

如果我从网上加载图像，它会完美运行。

我修改了一些代码以从 SDCard 加载某些图像。

在异步任务的“doInBackground”方法中，我实现了这个：

```
@Override  
protected Drawable doInBackground(String... params) {  
    String source = params[0];  
    Drawable d = null  
    if(source != null) {  
      if(source.startsWith("/myApp/images/")) {  
          localImage = true;  
      }  
    }  
    if(localImage) {  
      String sdcard = Environment.getExternalStorageDirectory().getAbsolutePath();  
      d = Drawable.createFromPath(sdcard+source);  
      d.setBounds(0, 0, 0 + (int)(d.getIntrinsicWidth()), 0   
        + (int) (d.getIntrinsicHeight()));   
      localImage = false;  
    } else {  
      // load images from internet  
    }  
    return d; 
```

localImage 是一个布尔值，用于确定当前源“指向”来自 Internet 的图像还是本地图像。

如前所述：**从互联网加载图像效果很好。**
**但是**当我从**SDCard**加载图像时，有时会发生并非所有图像都显示的情况。
整个文本（包括图像）被剪切，就好像它没有正确加载一样。
我发现这种情况在三星 Galaxy S3 上比在三星 S Plus 上更常见。
在 S3 上，我有时只加载 1 或 1.5 张图像，其余的会被剪切。
S Plus 总是加载所有 4 张图像，但很少剪切文本的最后 2 或 3 个句子。

我认为这是 AsyncTask 的一种时间问题，但我以前从未使用过它。

我知道这是一个非常大的帖子，但我希望有人仍然可以帮助我。

最好的祝福

西吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:18:32.530

好吧，我很愚蠢......我解决了它！

我忘记了，如果我从互联网加载图像，我只需要 AsyncTask。对于本地图像，我不需要。

感兴趣的解决方案：

```
ImageGetter imgGetter = new ImageGetter() {
  @Override
  public Drawable getDrawable(String source) {                      
    String sdcard = Environment.getExternalStorageDirectory().getAbsolutePath();
    Drawable d = Drawable.createFromPath(sdcard+source);                    
    d.setBounds(0, 0, 0 + (int)(d.getIntrinsicWidth()), 0 
      + (int) (d.getIntrinsicHeight())); 
    return d;
  }
};
Spanned htmlSpan = Html.fromHtml(textAndImage, imgGetter, null);
textView.setText(htmlSpan); 
```

# javascript - 单击后更改图像

> ID：13989937
> 
> 赞同：2
> 
> 时间：2012-12-21T12:09:59.830
> 
> 标签：javascript, css, image, sprite

我已经花了几个小时查看尽可能多的在线资源和 stackoverflow 问题，但由于某种原因，我无法弄清楚这一点。

我正在尝试使用 CSS 和图像精灵使链接显示为图像，一旦将其悬停并单击它就会发生变化。我已经玩过 CSS 并且现在研究 JavaScript 太久了，我只需要一些关于如何让它工作的指导。

一旦它悬停，我已经设法让它改变，但是我真正需要做的是在点击它后改变图像。所以一开始它会显示播放按钮，当它点击它时会显示一个暂停按钮，再次点击它会显示播放按钮等。

据我所知，我需要使用 JavaScript 和 onclick 事件。但是我不确定这将如何工作或如何将它与图像精灵一起使用。

到目前为止，我的 CSS 看起来像这样

`.testclass .stratus { background-position: -1px -1px; width: 21px; height: 21px;}`.

`.testclass .stratus:hover {background-position: -1px -29px; width: 21px; height: 21px;}`.

然而，这只影响播放按钮和当它悬停时。现在我需要一种在单击播放按钮时显示暂停按钮的方法，反之亦然。

图片精灵 URL。 [http://www.danceyrselfclean.com/wp-content/uploads/2012/12/sprites.png](http://www.danceyrselfclean.com/wp-content/uploads/2012/12/sprites.png)

我试图让它工作的页面的 URL。 [http://www.priceofmilk.co.uk/uncategorized/ddd-2](http://www.priceofmilk.co.uk/uncategorized/ddd-2)

这可以使用 CSS 和 HTML 来实现，还是我还需要使用一些 JavaScript？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:20:44.667

我做了一个简单的例子。我使用背景颜色和锚点，但您可以在您的情况下轻松实现这一点。

## 更新

更新了代码，以便它使用您的图像。

HTML

```
<a class="play_pause">PLAY</a>​ 
```

CSS

```
.play_pause {
    display: block;
    width: 24px;
    height: 23px;
    text-indent: -99999px;
    background: url(http://www.danceyrselfclean.com/wp-content/uploads/2012/12/sprites.png); 
    cursor: pointer;
}

.playing {
    background-position: -27px 0; 
}

.playing:hover {
    background-position: -27px -28px !important; 
}

.play_pause:hover {
    background-position: 0 -28px; 
}​ 
```

和 JS：

```
$(document).ready(function() {
    $(".play_pause").click(function() {
        $(this).toggleClass('playing');
    });
});​​ 
```

​</p>

[JsFiddle 示例](http://jsfiddle.net/RX2M2/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:13:24.497

这很简单，你在哪里读过？

```
jQuery('.testclass .stratus').click(function{
   jQuery(this).toggleClass('played');
}) 
```

CSS：

```
.played{
   background-position: -1px -29px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:14:05.410

您将不得不使用 JavaScript 来完成切换，纯 CSS 无法完成这样的逻辑。

最简单的方法是开设两个班级`play`和`pause`. 通过 CSS，您可以声明要为每个类显示精灵的哪一部分。然后，您使用 JavaScript 将单击事件侦听器附加到元素，并在单击事件回调中从元素中删除类`play`并改为应用类`pause`，反之亦然。

MDN 有[一篇](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)关于如何将事件侦听器附加到元素的好文章。[这个 SO question](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)讨论了如何在元素上添加/删除类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:16:10.587

如果您只想检测第一次点击，您可以在纯 CSS 中通过为链接提供 id 并使用 :target 伪类（例如 a#theid:target {...}）来实现

但是由于您需要检测第二次点击，您需要使用 JS 在 CSS 类之间切换。基本方法是使用事件处理程序：

```
document.getElementById('theid').onclick = function(){
this.className = this.className=='play' ? 'pause' : 'play';
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:28:32.673

[`.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)使用and的示例[`.addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)，与您[当前的 sprite](http://stratus.sc/images/sprites.png)一起使用。没有使用 jQuery。

```
var elm = document.querySelectorAll('.testclass .stratus'), i = elm.length, e;
while (e = elm[--i])
    e.addEventListener('click', function () { // this fn generates the listener
        var pause = false; // captured in scope, not global
        return function () { // this is the actual listener
            this.style.backgroundPositionX = (pause = !pause)?'-20px':'0px';
        }
    }(), false); // the () invokes the generator 
```

# c++ - 理解 Thrust 中的二元谓词

> ID：13989943
> 
> 赞同：0
> 
> 时间：2012-12-21T12:10:14.183
> 
> 标签：c++, c, thrust

在回答我之前的[问题](https://stackoverflow.com/questions/13988603/applying-reduction-operation-using-thrust-subject-to-a-boolean-condition/13989078#13989078)时，有人给了我以下代码：

```
thrust::device_vector<bool> bools;
thrust::device_vector<float> values;

typedef thrust::device_vector<bool>::iterator   BoolIterator;
typedef thrust::device_vector<float>::iterator  ValueIterator;
typedef thrust::tuple<BoolIterator, ValueIterator> IteratorTuple;
typedef thrust::zip_iterator<IteratorTuple> ZipIterator;

ZipIterator iter_begin(thrust::make_tuple(bools.begin(), values.begin()));
ZipIterator iter_end(thrust::make_tuple(bools.end(), values.end()));

struct Predicate
{
  __host__ __device__ bool operator () 
                      (const IteratorTuple& lhs, const IteratorTuple& lhs) 
  {
    if (get<0>(lhs) && get<0>(rhs) ) return get<1>(lhs) <= get<1>(rhs); else
    return ! get<0>(lhs) ;
  }
};

ZipIterator result =  thrust::max_element(iter_begin, iter_end, Predicate()); 
```

我想了解 Predicate 结构。如果运算符返回 false 会发生什么？选择哪个值？如果运算符返回 true 会发生什么？选择哪个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:30:53.900

我试图实现“小于”谓词。`true`如果 lhs <= rhs 则返回，否则返回 false。此外，您要求通过存储在第二个数组中的布尔标志排除值，因此它会检查它。

从我的评论：

我想我过度优化了代码。这是“小于”谓词。`if`条件评估`false`意味着一个或布尔标志是`false`，所以我们需要排除相应的值。所以我们检查是否`lhs`应该排除参数`(thrust::get<0>(lhs) == false)`，如果这是真的，谓词返回真，意思是“lhs 小于 rhs”。如果`(thrust::get<0>(lhs) == true)`, than`rhs`组件应该被排除并且谓词返回 false，意味着 'lhs 不小于 rhs'

我折叠了以下代码：

```
using thrust::get;
if (get<0>(lhs) && get<0>(rhs) ) return get<1>(lhs) <= get<1>(rhs); else 
// we need co check which value should be excluded from the seach
if (get<0>(lhs) == false) // lhs should be excluded so lhs is lesser
                          // OR both should be excluded and no matter what 
                          // we will return it will be eliminated in other comparison
  return true; else
if (get<0>(rhs) == false) // rhs should be excluded so rhs is lesser
  return false; 
```

# c++ - 私有插槽Qt上的声明不一致

> ID：13989953
> 
> 赞同：2
> 
> 时间：2012-12-21T12:10:53.990
> 
> 标签：c++, qt, signals-slots

昨天我在 Qt 中处理一个项目，所以我对一个我认为是公开的插槽进行了延迟调用。所以我写道：

```
QTimer::singleShot(); 
```

调用那个插槽，但最后我看到那个插槽是私有的。

这可能是私有插槽的解决方法：

```
QTimer::singleShot(0,class,SLOT(class::privateSlot())) 
```

为什么 Qt 中的声明不一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:25:23.797

@hate-engine 的答案有点扩大

找出并查看带有源名称和前缀的文件`moc_`（例如`moc_my_class.cpp`）。`Q_OBJECT`当你在类声明中添加宏时，这个文件是由 moc-compiler 生成的。该宏向您的类声明添加了几个方法，并`moc_my_class.cpp`包含这些方法的定义。

现在看方法`MyClass::qt_metacall`。这个方法可以从其他地方调用，因为它是公共的。另一方面它可以调用私有方法`MyClass`，因为它们属于类`MyClass`。

没有什么神秘的））

# actionscript-3 - 如何将 JSON DateTime 转换为 actionscript3？

> ID：13989959
> 
> 赞同：1
> 
> 时间：2012-12-21T12:11:18.333
> 
> 标签：actionscript-3, apache-flex

我的`json.start`回报`2012-12-21 10:02:35`

我试着`var start:Date = json.start as Date;`得到一个`null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:22:16.360

做这件事有很多种方法：

*   使用 DateFormatter 对象：[DateFormatter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/formatters/DateFormatter.html)
*   使用正则表达式并构建一个 Date 对象：[RegEx](http://livedocs.adobe.com/flex/3/html/help.html?content=12_Using_Regular_Expressions_03.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:24:15.800

```
var start:Date = DateFormatter.parseDateString('2012-12-21 10:02:35'); 
```

# android - 当我的应用程序启动时，发生强制关闭错误

> ID：13989961
> 
> 赞同：1
> 
> 时间：2012-12-21T12:11:23.467
> 
> 标签：android

在我的 Galaxy Nexus 上进行测试时，我通过按返回按钮退出了应用程序，然后当我再次启动应用程序时，仅几秒钟后，它导致应用程序进入 FC 并生成错误报告。任何人都可以帮助我，它只发生在 Glaxy Nexus 上。Nexus 系列设备打开连接有什么限制吗？为什么会这样？提前致谢。

```
finish_activity_delayed start Activity_NewsFeed.class
[ 12-21 19:43:11.567 13784:13795 I/ActivityManager ]
START u0 {flg=0x10000 cmp=com.platinumapps.facedroid/com.platinumapps.activities.Activity_NewsFeed (has extras)} from pid 2384
[ 12-21 19:43:11.622  2384:14125 E/CursorWindow ]
Could not allocate CursorWindow '/data/data/com.platinumapps.facedroid/databases/db_facedroid' of size 2097152 due to error -24.
[ 12-21 19:43:11.677  2384:14125 W/dalvikvm ]
threadid=44: thread exiting with uncaught exception (group=0x411e8930)
[ 12-21 19:43:11.731  2384:14147 E/NativeCrypto ]
AppData::create pipe(2) failed: Too many open files
[ 12-21 19:43:11.755  2384:14125 W/System.err ]
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. 
[ 12-21 19:43:11.770  2384:14146 E/NativeCrypto ]
AppData::create pipe(2) failed: Too many open files
[ 12-21 19:43:11.833  2384: 2387 D/dalvikvm ]
GC_CONCURRENT freed 660K, 28% free 48158K/65972K, paused 14ms+22ms, total 189ms
[ 12-21 19:43:11.833  2384: 2384 D/dalvikvm ]
WAIT_FOR_CONCURRENT_GC blocked 154ms
[ 12-21 19:43:11.833  2384:14130 D/dalvikvm ]
WAIT_FOR_CONCURRENT_GC blocked 54ms
[ 12-21 19:43:11.841  2384:14125 D/dalvikvm ]
WAIT_FOR_CONCURRENT_GC blocked 59ms
[ 12-21 19:43:11.856  2384:14125 W/System.err ]
    at android.database.CursorWindow.<init>(CursorWindow.java:104)
[ 12-21 19:43:11.856  2384:14125 W/System.err ]
    at android.database.AbstractWindowedCursor.clearOrCreateWindow(AbstractWindowedCursor.java:198)
[ 12-21 19:43:11.856  2384:14125 W/System.err ]
    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:139)
[ 12-21 19:43:11.856  2384:14125 W/System.err ]
    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
[ 12-21 19:43:11.856  2384:14125 W/System.err ]
    at com.platinumapps.friendlist.BLL_Friendlist.isTableEmpty(BLL_Friendlist.java:719)
[ 12-21 19:43:11.950  2384:14147 E/NativeCrypto ]
AppData::create pipe(2) failed: Too many open files
[ 12-21 19:43:11.989  2384:14146 E/NativeCrypto ]
AppData::create pipe(2) failed: Too many open files
[ 12-21 19:43:12.028  2384:14125 W/System.err ]
    at com.platinumapps.activities.Activity_NewsFeed$1.run(Activity_NewsFeed.java:110)
[ 12-21 19:43:12.028  2384:14125 W/System.err ]
    at java.lang.Thread.run(Thread.java:856)
[ 12-21 19:43:12.028  2384:14125 D/FlurryAgent ]
Error logged: uncaught
[ 12-21 19:43:12.028  2384:14125 W/System.err ]
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. 
[ 12-21 19:43:12.099 13784:13797 W/ActivityManager ]
Activity pause timeout for ActivityRecord{41d4f110 u0 com.platinumapps.facedroid/com.platinumapps.activities.Splash_Activity}
[ 12-21 19:43:12.138  2384:14147 W/System.err ]
    at javax.net.ssl.SSLException: Unable to create application data
[ 12-21 19:43:12.169  2384:14125 W/System.err ]
android.database.CursorWindow.<init>(CursorWindow.java:104)
[ 12-21 19:43:12.169  2384:14146 W/System.err ]
    at  at android.database.AbstractWindowedCursor.clearOrCreateWindow(AbstractWindowedCursor.java:198)javax.net.ssl.SSLException: Unable to create application data
[ 12-21 19:43:12.169  2384:14146 W/System.err ]
    at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
[ 12-21 19:43:12.169  2384:14146 W/System.err ]
    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:378)
[ 12-21 19:43:12.169  2384:14146 W/System.err ]
    at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:209)
[ 12-21 19:43:12.169  2384:14146 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:442)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at com.facebook.android.Util.openUrl(Util.java:295)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at com.facebook.android.Facebook.request(Facebook.java:697)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:312)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
[ 12-21 19:43:12.184  2384:14146 D/AsynFacebookRunner ]
Unable to create application data
[ 12-21 19:43:12.184  2384:14146 D/BaseRequestListener ]
Message:Unable to create application data Cause: null
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:378)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:209)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:442)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
javax.net.ssl.SSLException: Unable to create application data
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:378)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:209)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:442)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at com.facebook.android.Util.openUrl(Util.java:295)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at com.facebook.android.Facebook.request(Facebook.java:697)
[ 12-21 19:43:12.184  2384:14146 W/System.err ]
    at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:312)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at com.facebook.android.Util.openUrl(Util.java:295)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at com.facebook.android.Facebook.requestRestApi(Facebook.java:708)
[ 12-21 19:43:12.184  2384:14147 W/System.err ]
    at com.facebook.android.AsyncFacebookRunner$3.run(AsyncFacebookRunner.java:370)
[ 12-21 19:43:12.184  2384:14147 E/stream   ]
Network Error:Unable to create application data
[ 12-21 19:43:12.231  2384:14125 W/System.err ]
[ 12-21 19:43:12.286  2384:14125 W/System.err ]
    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:139)
[ 12-21 19:43:12.333  2384: 2384 I/Choreographer ]
Skipped 72 frames!  The application may be doing too much work on its main thread.
[ 12-21 19:43:12.356 16084:16088 D/dalvikvm ]
GC_CONCURRENT freed 466K, 8% free 9497K/10232K, paused 3ms+2ms, total 29ms
[ 12-21 19:43:12.434  2384:14125 W/System.err ]
    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
[ 12-21 19:43:12.434  2384:14125 W/System.err ]
    at com.platinumapps.friendlist.BLL_Friendlist.isTableEmpty(BLL_Friendlist.java:719)
[ 12-21 19:43:12.544  2384:14125 W/System.err ]
    at com.platinumapps.activities.Activity_NewsFeed$1.run(Activity_NewsFeed.java:110)
[ 12-21 19:43:12.841  2384: 2458 D/dalvikvm ]
GC_FOR_ALLOC freed 1135K, 19% free 54019K/65972K, paused 221ms, total 221ms
[ 12-21 19:43:12.934  2384:14125 W/System.err ]
    at java.lang.Thread.run(Thread.java:856)
[ 12-21 19:43:12.934  2384:14125 D/FlurryAgent ]
Error logged: uncaught
[ 12-21 19:43:12.934  2384:14125 W/System.err ]
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. 
[ 12-21 19:43:12.934  2384:14125 W/System.err ]
    at android.database.CursorWindow.<init>(CursorWindow.java:104)
[ 12-21 19:43:12.934  2384:14125 W/System.err ]
    at android.database.AbstractWindowedCursor.clearOrCreateWindow(AbstractWindowedCursor.java:198)
[ 12-21 19:43:12.942  2384:14125 W/System.err ]
    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:139)
[ 12-21 19:43:13.036  2384:14125 W/System.err ]
    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
[ 12-21 19:43:13.036  2384:14125 W/System.err ]
    at com.platinumapps.friendlist.BLL_Friendlist.isTableEmpty(BLL_Friendlist.java:719)
[ 12-21 19:43:13.036  2384:14125 W/System.err ]
    at com.platinumapps.activities.Activity_NewsFeed$1.run(Activity_NewsFeed.java:110)
[ 12-21 19:43:13.036  2384:14125 W/System.err ]
    at java.lang.Thread.run(Thread.java:856)
[ 12-21 19:43:13.075  2384:14125 D/FlurryAgent ]
Error logged: uncaught
[ 12-21 19:43:13.099  2384:14125 E/ACRA     ]
ACRA caught a CursorWindowAllocationException exception for com.platinumapps.facedroid. Building repo 
```

室温。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T12:46:57.263

这个错误主要是这个问题引起的

`AppData::create pipe(2) failed: Too many open files`

这在任何情况下都可能发生。例如

1.  你在你的应用程序中创建了这么多`HTTP connections`。
2.  `files connection`从`internal`或`External`SD 卡打开到多个'
3.  或者这可以是 Some `data access by DB`+`file writer object`和`HTTP connections`.

**解决方案**

尝试限制您的网络操作，例如使用`thread pool`并限制`max 5`连接时间，如果执行某些文件操作，请尝试序列化它们。`close all open connections`退出时用于 db 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:18:03.287

这可能是原因：

```
[ 12-21 19:43:11.731  2384:14147 E/NativeCrypto ] AppData::create pipe(2) failed: Too many open files 
```

您的应用可能不会关闭它正在使用的资源。

# opengl - 在线程中使用opengl

> ID：13989965
> 
> 赞同：2
> 
> 时间：2012-12-21T12:11:47.983
> 
> 标签：opengl

我有一个库，它负责渲染来自网络的 opengl 和 primimaet 流。

我在罂粟下写的，但打算在linux上使用

所以窗口是为目标c创建的，我开始在另一个接收和解码数据的单独线程中绘制。

我在 opengl 的方法上崩溃了错误（EXT_BAD_ACCESS），即使我只在单个线程中使用它们。

我的代码主要过剩：

```
int main(int argc, const char * argv[]){
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);
int win = glutGetWindow();
glutInitWindowSize(800, 600);
glutCreateWindow("OpenGL lesson 1");
client_init(1280, 720, win, "192.168.0.98", 8000, 2222);
return 0; 
```

}

或目标 c

```
- (id)initWithFrame:(NSRect)frameRect pixelFormat:(NSOpenGLPixelFormat*)format{
self = [super initWithFrame:frameRect];
if (self != nil) {
    NSOpenGLPixelFormatAttribute attributes[] = {

        NSOpenGLPFANoRecovery,
        NSOpenGLPFAFullScreen,
        NSOpenGLPFAScreenMask,
        CGDisplayIDToOpenGLDisplayMask(kCGDirectMainDisplay),
        (NSOpenGLPixelFormatAttribute) 0
    };
    _pixelFormat = [[NSOpenGLPixelFormat alloc] initWithAttributes:attributes];
    if (!_pixelFormat)
    {
        return nil;
    }
    //_pixelFormat   = [format retain];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(_surfaceNeedsUpdate:)
                                                 name:NSViewGlobalFrameDidChangeNotification
                                               object:self];
    _openGLContext = [self openGLContext];
    client_init(1280, 720, win, "192.168.0.98", 8000, 2222);
}
return self; 
```

}

client_init 代码

```
 // pthread_create(&posixThreadID, NULL, (void*(*)(void*))ShowThread, dh_tmp);
pthread_create(&posixThreadID, NULL, (void*(*)(void*))ShowThread, NULL);

void* ShowThread(struct drawhandle * dh){

        //glViewport(0, 0, dh->swidth, dh->sheight);//EXT_BAD_ACCESS
        glViewport(0, 0, 1280, 720);//EXT_BAD_ACCESS

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        //gluOrtho2D(0, dh->swidth, 0, dh->sheight);
        gluOrtho2D(0, 1280, 0, 720);

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();

    ...
        return 0;
    } 
```

我认为问题是什么？那个未创建的上下文opengl。

如何在 macOS / linux 中创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:18:44.807

该线程没有当前的 OpenGL 上下文。即使您确实在程序的早期创建了上下文（在您的代码段中不可见），它也不会在您启动的线程中处于当前状态。

OpenGL 上下文始终是“当前”的，一次只有一个线程，无一例外。默认情况下，这是创建上下文的线程。任何调用 OpenGL 的线程都必须首先设为“当前”。

您**必须**在此线程中创建上下文，或者在内部调用`glXMakeCurrent`(Unix/Linux) 或`aglMakeCurrent`(Mac) 或`wglMakeCurrent`(Windows) `ShowThread`（在执行与 OpenGL 相关的任何其他操作之前）。

*（可能不是坠机的原因，但......请参阅 datenwolf 的答案以了解坠机的可能原因——但它是错误的）`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:23:22.910

OpenGL 和多线程是困难的条件。它可以做到，但需要一些小心。首先，OpenGL 上下文一次只能在一个线程中处于活动状态。在某些系统上，例如 Windows 扩展函数指针是每个上下文的，因此在不同线程中使用不同上下文时，您最终可能会得到不同的扩展函数指针，必须为其提供。

所以有第一个问题：你可能在这个线程上没有 OpenGL 上下文，但这不应该在调用非扩展函数时崩溃，它什么也不做。

如果它真的在您指示的行上崩溃，那么`dh`指针肯定*是无效*的。这是唯一的解释。C 中的指针只是一些以特殊方式解释的数字。如果您传递指针——尤其是用作回调或线程函数的参数时——那么指针指向的对象在确保不再可以访问该指针之前不得无效。这意味着：你不能在你在堆栈上创建的东西上使用它，即在 C 自动存储中。

这将打破：

```
void foo(void)
{
    struct drawhandle dh_tmp;

    pthread_create(&posixThreadID, NULL, (void*(*)(void*))ShowThread, &dh_tmp);
} 
```

为什么？因为`foo`返回的那一刻对象`dh_tmp`变得无效。但是`&dh_tmp`（指向它的指针）只是一个数字，这个数字不会“神奇地”变为零，那一刻`dh_tmp`变得无效。

您必须在堆上分配它才能工作。当然有问题，何时再次释放内存。

# c# - HttpWebResponse.GetResponseStream().Length 抛出异常，即使结果为 200 OK 状态

> ID：13989969
> 
> 赞同：1
> 
> 时间：2012-12-21T12:12:01.620
> 
> 标签：c#, asp.net, httpwebrequest, httpwebresponse

我正在尝试使用 HttpWebRequest 对象将 ASP.Net 应用程序的 web url 连接到 java web 应用程序并获得状态 200 OK。但是当我尝试使用 GetResponseStream() 读取响应内容时，我收到错误**“responseStream.Length”抛出了“System.NotSupportedException”类型的异常**

这是代码

```
string uri="https://myapp.com/mainservlet/";

System.Net.HttpWebRequest hwrequest = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(uri);
            hwrequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            hwrequest.AllowAutoRedirect = true;
            hwrequest.UserAgent = "http_requester/0.1";
            hwrequest.Timeout = 60000;
            hwrequest.Method = "POST";
            if (hwrequest.Method == "POST")
            {
                hwrequest.ContentType = "text/xml";
                // Use UTF8Encoding instead of ASCIIEncoding for XML requests:
                System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
                byte[] postByteArray = encoding.GetBytes(postData);
                hwrequest.ContentLength = postByteArray.Length;
                 System.IO.Stream  poststream = hwrequest.GetRequestStream();
                poststream.Write(postByteArray, 0, postByteArray.Length);
                poststream.Close();
            }

            //Get the Response now.
            hwresponse = (System.Net.HttpWebResponse)hwrequest.GetResponse();

         //  System.Xml.Linq.XDocument doc;
            //hwresponse.Method = "GET";
            string str = hwresponse.CharacterSet;
            string str1 = hwresponse.ContentEncoding;
            if (hwresponse.StatusCode == System.Net.HttpStatusCode.OK)
            {

                System.IO.Stream responseStream = hwresponse.GetResponseStream();
               // Here i am getting that exception 
```

**注意：**当我尝试在浏览器中粘贴相同的网址时，它会说

*错误 404--未从 RFC 2068 超文本传输​​协议中找到--HTTP/1.1: 10.4.5 404 Not Found 服务器未找到与请求 URI 匹配的任何内容。没有说明这种情况是暂时的还是永久性的。如果服务器不希望向客户端提供此信息，则可以使用状态代码 403（禁止）来代替。如果服务器通过一些内部可配置的机制知道旧资源永久不可用并且没有转发地址，则应该使用 410 (Gone) 状态代码。*

它也进入 200 OK 状态并显示异常。有人可以帮我解决/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T21:45:23.330

使用它来获得响应已经使用了 4 年，现在总是有效。

```
 HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Stream responseStream = response.GetResponseStream();
                StreamReader myStreamReader = new StreamReader(responseStream);
                responseData = myStreamReader.ReadToEnd();
            }
            response.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:39:24.630

你为什么要检查它是否是一个帖子？

尝试像这样读取流。然后您还可以设置您实际需要多少网页数据。

```
Dim ResponseStream As Stream = Response.GetResponseStream()
            Try
                Dim reader As New StreamReader(Stream.Null)
                Try
                    reader = New StreamReader(ResponseStream, System.Text.Encoding.GetEncoding(CharSet), True, 256)
                Catch ex As Exception

                    '
                    ' Redo the stream
                    '
                    If InStr(ex.Message, "not a supported encoding name.") > 0 Then
                        Try
                            reader = New StreamReader(ResponseStream, System.Text.Encoding.GetEncoding("utf-8"), True, 256)
                        Catch ex1 As Exception

                        End Try
                    End If
                End Try
                '
                'Dim string to build index.
                '
                Dim IndexBuildString As New StringBuilder()
                Try
                    Dim read(256) As [Char]
                    '
                    ' Reads 256 characters at a time.    
                    '
                    Dim ByteCount As Integer = reader.Read(read, 0, 256)
                    '
                    ' Read in while, exit it if exceeds ~ 390 kb
                    '
                    While ByteCount > 0
                        '
                        'Check if limit of kilobytes are over the limit.
                        '
                        If System.Text.ASCIIEncoding.Unicode.GetByteCount(IndexBuildString.ToString()) > 153600 Then
                            Exit While
                        End If
                        '
                        'Dumps the 256 characters to a string and displays the string to the console.
                        '
                        Dim str As New [String](read, 0, ByteCount)
                        ByteCount = reader.Read(read, 0, 256)
                        '
                        'Append to the StringBuilder
                        '
                        IndexBuildString.Append(str)
                    End While
                    '
                    'Assign the Stringbuilder and then clear it
                    ' 
                    IndexString = CleanIndexString(IndexBuildString.ToString())
                Catch ex As Exception

                Finally

                    Try
                        IndexBuildString.Clear()
                        reader.Close()
                        reader.Dispose()
                    Catch ex As Exception

                    End Try
                End Try
            Catch ex As Exception

            Finally
                ResponseStream.Dispose()
            End Try 
```

您必须添加自己的错误处理......

# javascript - 从javascript中的中间元素开始一个二维数组

> ID：13989974
> 
> 赞同：1
> 
> 时间：2012-12-21T12:12:18.673
> 
> 标签：javascript, arrays

我有一个二维数组，我希望我的第二个循环从中间元素开始。我可能应该输入类似 x/array.length 但我不知道 x 是什么

# javascript - 从 grunt 模板访问进程/环境

> ID：13989978
> 
> 赞同：22
> 
> 时间：2012-12-21T12:12:53.230
> 
> 标签：javascript, templates, underscore.js, gruntjs

我在 grunt.js 文件中有一些代码，它与 0.3 一起使用，但在 0.4 上中断：

```
{
    dest: '<%= process.env.DEST %>/index.html'
} 
```

在 0.3 中定义了进程，因此当我将文件路径传递给其他插件时，我可以访问模板内环境中定义的变量。

是否有另一种方法可以在 0.4 中使用？或者一种在模板渲染时放置断点的方法，以便我可以看到哪些变量可用？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-30T07:31:21.940

[默认数据是配置对象](http://gruntjs.com/api/grunt.config)。您可以将环境变量添加到配置对象或直接使用它。

```
grunt.initConfig({
    destination: process.env.DEST,
    task: {
        target: {
            dest: '<%= destination %>/index.html'
        }
    },
}); 
```

或者

```
grunt.initConfig({
    task: {
        target: {
            dest: process.env.DEST + '/index.html'
        }
    },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T11:39:39.633

这是辛德雷的一个很好的直截了当的回答。或者，您可以这样做（使用 grunt-env 插件：[https](https://npmjs.org/package/grunt-env) ://npmjs.org/package/grunt-env ）-

```
grunt.initConfig({
    env : {
        test : {
            DEST : 'testDEST'
        },
        dev : {
            DEST : 'devDEST'
        },
        qa : {
            DEST : 'qaDEST'
        },
        prod : {
            DEST : 'prodDEST'
        }
    }

});

grunt.registerTask('setenvs', 'Set environment variables', function() {
    grunt.config('ENVS', process.env);
}); 
```

然后使用

```
{
    dest: '<%= ENVS.DEST %>/index.html'
} 
```

你的任务是——

```
 grunt.registerTask('default', [
        'env:dev',
        'setenvs'
        'yourTask'
    ]); 
```

建议的替代方法只是为了让您可以使用`<%= ... %>`并且不必在 initConfig 中对其进行硬编码。env 的目标，您可以将其作为用户的输入并将其传递给 env。

# .net - 如何在 Razor 语法中设置 @Html.TextBoxFor 的值？

> ID：13989980
> 
> 赞同：30
> 
> 时间：2012-12-21T12:12:55.087
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, razor, html.textboxfor

我使用 Razor 创建了一个文本框，并尝试`value`如下设置。

```
@Html.TextBoxFor(model => model.Destination, new { id = "txtPlace", value= "3" }) 
```

我试过`value`附加`@`

```
@Html.TextBoxFor(model=> model.Destination, new { id = "txtPlace", @value= "3" }) 
```

即使它呈现`input`空的html标签`value`

```
<input id="txtPlace" name="Destination" type="text" value 
   class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset ui-mini" > 
```

做错了什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-21T12:36:27.067

问题是您使用的是小写的 v。

您需要将其设置为 Value ，它应该可以解决您的问题：

```
@Html.TextBoxFor(model => model.Destination, new { id = "txtPlace", Value= "3" }) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T12:32:15.977

我尝试替换`value`为`Value`并成功了。它现在已经设置了`value`in`input`标签。

```
@Html.TextBoxFor(model => model.Destination, new { id = "txtPlace", Value= "3" }) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-21T12:15:54.013

它会写出你的财产的价值`model.Destination`

这是设计使然。在返回视图之前，您需要在控制器中使用所需的值填充 Destination 属性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-26T08:45:53.883

我尝试替换`value`为`Value`并成功了。它现在已经设置了`value`in`input`标签。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-02T10:46:49.500

这对我有用，在 MVC5 中：

```
@Html.TextBoxFor(m => m.Name, new { @class = "form-control", id = "theID" , @Value="test" }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-03T12:43:33.280

```
Tries with following it will definitely work:

@Html.TextBoxFor(model => model.Destination, new { id = "txtPlace", Value= "3" })

@Html.TextBoxFor(model => model.Destination, new { id = "txtPlace", @Value= "3" })

<input id="txtPlace" name="Destination" type="text" value="3" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset ui-mini" >
```

# android - 如何解析我的构造函数中的值？

> ID：13989988
> 
> 赞同：-3
> 
> 时间：2012-12-21T12:13:23.577
> 
> 标签：android, parsing, constructor

我创建了一个构造函数类，我需要所有属性值，所以我试图解析构造函数类中的值，但我得到的是空值。所以请帮助我如何获得价值？我花更多时间在这个概念上

这是我的代码：

```
 public void test(NodeList panelNodes) {
        Region RegionOptions = new Region(this.getApplicationContext());
        RegionOptions.updateValues(RegionOptions.left);

        for (int i = 0; i < panelNodes.getLength()-1; i++) {
            Element panelElement = (Element) panelNodes.item(i);

            NamedNodeMap nod=panelElement.getAttributes();

            String layout=panelNodes.item(i).getNodeName();

            if(layout.compareTo("region") == 0) {
                for(int k=0;k<nod.getLength();k++){
                    Node nd=nod.item(k);
                    //System.out.println(layout+":"+ nd.getNodeName()+"::"+nd.getNodeValue());
                    if(nd.getNodeName().compareTo("left") == 0) {
                        RegionOptions.left = Integer.parseInt(nd.getNodeValue());

                    }else if(nd.getNodeName().compareTo("top") == 0) {
                        RegionOptions.top = Integer.parseInt(nd.getNodeValue());

                    }else if(nd.getNodeName().compareTo("height") == 0) {
                        RegionOptions.height = Integer.parseInt(nd.getNodeValue());
                    }else if(nd.getNodeName().compareTo("width") == 0) {
                        RegionOptions.width = Integer.parseInt(nd.getNodeValue());
                    }else if(nd.getNodeName().compareTo("userId") == 0) {
                        RegionOptions.userId = Integer.parseInt(nd.getNodeValue());
                    }else if(nd.getNodeName().compareTo("id") == 0) {
                        RegionOptions.id = nd.getNodeValue();
                    } else {
                        System.out.println("Unknown Tag:" + layout+":"+ nd.getNodeName()+"::"+nd.getNodeValue());
                    }

                }   
                //return(RegionOptions.userId, RegionOptions.bgcolor, RegionOptions.duration);

            }
            if(layout.compareTo("media") == 0) {
                for(int l=0;l<nod.getLength();l++){
                    Node nd=nod.item(l);
                    //System.out.println(layout+":"+ nd.getNodeName()+"::"+nd.getNodeValue());
                    if(nd.getNodeName().compareTo("type") == 0) {
                        RegionOptions.type = nd.getNodeValue();
                    }else if(nd.getNodeName().compareTo("duration") == 0) {
                        RegionOptions.duration = Integer.parseInt(nd.getNodeValue());
                    }else if(nd.getNodeName().compareTo("lkid") == 0) {
                        RegionOptions.lkid = Integer.parseInt(nd.getNodeValue());
                    }else if(nd.getNodeName().compareTo("userId") == 0) {
                        RegionOptions.userId = Integer.parseInt(nd.getNodeValue());
                    }else if(nd.getNodeName().compareTo("schemaVersion") == 0) {
                        RegionOptions.schemaVersion = Integer.parseInt(nd.getNodeValue());

                    } else {
                        System.out.println("Unknown Tag:" + layout+":"+ nd.getNodeName()+"::"+nd.getNodeValue());
                    }
                    }//return(RegionOptions.l, RegionOptions.bgcolor, RegionOptions.duration);

                }

        }

    }
} 
```

构造函数类

我需要我的高度、顶部、宽度等...值

```
package com.example.xmlparsing;

import android.content.Context;

public class Region {
    int height; 
    int width;
    int top;
    int left;
    String id;
    int userId;
    String bgcolor;
    int schemaVersion;
    String type;
    int duration;
    int lkid;

    public Region(Context ApplicationContext) {
        //bgcolor= new String();
        // this.height= height;
    }

    public void updateValues(int left) {
        // TODO Auto-generated method stub
        this.left=left;
        //top=top;
System.out.println("value_left"+left);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:16:51.710

你必须像这样设置你的构造函数：

```
 public Region(Context context, int height, int width){

      this.mContext = context:
      this.height = height;
      this.width = width;
   } 
```

# python - 如何使用搜索 imaplib

> ID：13989990
> 
> 赞同：0
> 
> 时间：2012-12-21T12:13:27.243
> 
> 标签：python, datetime, imaplib

我只需要从 IMAP 服务器下载早于某个 Linux 时间戳的电子邮件。Linux 时间戳必须是秒。这会根据服务器时间进行更新。例子 ：

```
datetime.now().strftime('%d-%b-%Y %H:%M:%s')
'21-Dec-2012 16:50:1356088844 
```

问题代码：

```
result, data = imap_server.search(None, '(SINCE '+datetime.now().strftime('%d-%b-%Y')+')') 
```

搜索功能只接受'SINCE + DATE'。它不需要完整的日期时间参数。它只需要日期示例'21-Dec-2012'

我该如何解决这个问题？

# javascript - 条件模板

> ID：13989991
> 
> 赞同：1
> 
> 时间：2012-12-21T12:13:30.147
> 
> 标签：javascript, json, dust.js

我正在尝试向dustjs模板添加一些逻辑，但正在努力将它们放在一起。

我有如下所示的 Json 代码：

```
{
    "names": [{
        "name": "User 1",
        "isSir": true
    }, {
        "name": "User 2",
        "isSir": true
    }, {
        "name": "User 3",
        "isSir": true
    }, {
        "name": "User 4",
        "isSir": false
    }, {
        "name": "User 5",
        "isSir": false
    }, {
        "name": "User 6",
        "isSir": false
    }]
} 
```

然后我想遍历这个，并且只显示“isSir”的每个变体的第一项。其余的项目将被 CSS 隐藏，所以我最终应该得到如下所示的内容：

*   用户 1 *（显示）*
*   用户 2 *（隐藏）*
*   用户 3 *（隐藏）*
*   用户 4 *（显示）*
*   用户 5 *（隐藏）*
*   用户 6 *（隐藏）*

我曾尝试使用 的 变体`{@if cond`来只抓取`"Sir"`第一个，然后是其他的，但是因为我还需要保持计数，所以我知道我在循环中的位置，然后我很快开始尝试使用`{@select key=`.

我对 Dust 很陌生，所以我确定我错过了一些东西。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:36:23.833

Dust 旨在成为一种无逻辑的模板语言，或者至少是一种逻辑较少的模板语言。这并不意味着您的应用程序不能有逻辑，而只是应该在您的 JSON 中提供显示逻辑。

使用当前 JSON 在 Dust 中无法解决您的问题，但是如果您将 JSON 更改为：

```
{
    "names": [{
        "name": "User 1",
        "isSir": true,
        "isHidden": false
    }, {
        "name": "User 2",
        "isSir": true,
        "isHidden": true
    }, {
        "name": "User 3",
        "isSir": true,
        "isHidden": true
    }, {
        "name": "User 4",
        "isSir": false,
        "isHidden": false
    }, {
        "name": "User 5",
        "isSir": false,
        "isHidden": true
    }, {
        "name": "User 6",
        "isSir": false,
        "isHidden": true
    }]
} 
```

然后你可以使用这样的模板：

```
<ul>
{#names}
  <li{?isHidden} class="hidden"{/isHidden}>
    {?isSir}Sir {/isSir}{name}
  </li>
{/names}
</ul> 
```

# iphone - iOS - 将模型类设置为另一个模型类的委托

> ID：13989992
> 
> 赞同：0
> 
> 时间：2012-12-21T12:13:30.547
> 
> 标签：iphone, ios, xcode, model, delegates

我有一个实现协议的 CLLocationManager 单例，因此我可以告诉另一个模型类 (ServerConnection) 已找到用户的更新位置。

在我的 AppDelegate 方法中，didFinishLaunching，我写

```
ServerConnection* serverConnection = [[ServerConnection alloc] init];
[LocationManager sharedLocationSingleton].delegate = serverConnection;
[[LocationManager sharedLocationSingleton] getUsersLocation]; 
```

这不起作用，并且没有调用我的 ServerConnection 类中的委托方法。但是，如果我尝试让我的 AppDelegate 类成为侦听器，如下行所示，它可以正常工作。

```
// self refers to AppDelegate
[LocationManager sharedLocationSingleton].delegate = self; 
```

在这里，我的 AppDelegate 实现了所需的委托方法，并且当用户的位置更新时调用该方法，这是应该的。

为什么我的上述方法失败，我尝试将委托设置为 serverConnection？

在线教程通常指向使用 UIViewController 或 AppDelegate 作为“监听器”，但在我的情况下，我想要一个单独的模型类作为监听器。我怎么做？

下面是我的带有协议的 LocationManager 单例类

```
@class LocationManager;

@protocol LocationManagerDelegate <NSObject>
@required
-(void)LocationManagerUpdated:(LocationManager*) locationManager
                  withValue:(CLLocation*) location;
@end

@interface LocationManager : NSObject <CLLocationManagerDelegate>

@property (strong, nonatomic) CLLocationManager* locationManager;
@property (strong, nonatomic) CLLocation* location;
@property (weak, nonatomic) id <LocationManagerDelegate> delegate;

+(LocationManager*)sharedLocationSingleton;
-(void) getUsersLocation;

@end 
```

我的服务器连接头文件是。

```
#import <Foundation/Foundation.h>
#import "LocationManager.h"

@interface ServerConnection : NSObject <LocationManagerDelegate>
@end 
```

这在 AppDelegate 设置为侦听器时有效，但不是我的模型对象 ServerConnection。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:20:21.770

做你想做的事情应该没有问题（即，有一个非控制器类实例作为委托）。

> 这在 AppDelegate 设置为侦听器时有效，但不是我的模型对象 ServerConnection。

你的`ServerConnection`班级是否实现了`LocationManagerDelegate`协议？（我的意思是实现而不是仅仅在其接口中声明它）。

检查`LocationManager`负责调用委托方法 ( `LocationManagerUpdated:`) 的方法，并在其中添加一个`NSLog`跟踪，以在您尝试向其发送消息时检查委托对象是否正确设置。

编辑：

```
ServerConnection* serverConnection = [[ServerConnection alloc] init];
[LocationManager sharedLocationSingleton].delegate = serverConnection;
[[LocationManager sharedLocationSingleton] getUsersLocation]; 
```

在您发表评论后，很明显问题源于`serverConnection`在堆栈变量中实例化而不是在属性中。

您使`delegate`属性成为强属性的方法是不正确的，因为[它会导致保留周期](https://stackoverflow.com/questions/8449040/why-use-weak-pointer-for-delegation)。您需要做的是`strong` `serverConnection`在执行我上面粘贴的代码的类中定义一个属性（应用程序委托？）。

如果您不介意我的鲁莽，如果您将委托定义为强属性，那么您所做的是通过添加隐藏第一个错误的第二个错误来修复错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T12:24:09.627

它看起来`serverConnection`没有保留在任何地方，并且因为`delegate`属性被指定为`weak`，所以它被释放并设置为 nil。

检查`getUsersLocation`方法并查看您尝试调用时委托是否为零`LocationManagerUpdated:withValue:`

# jquery - 更改元素的 CSS 属性

> ID：13989999
> 
> 赞同：2
> 
> 时间：2012-12-21T12:13:52.320
> 
> 标签：jquery, css, onclick, toggle

我有以下 jQuery，它在单击按钮时切换手风琴菜单：

**jQuery：**

```
$(function() {  
 $('#chooseOption').click(function(){
  $('#accordion ul').toggle();
 });    
}); 
```

效果很好！

现在，我想知道我是否也可以在切换时同时更改**CSS** `height`和`background`元素。因此，当我单击`chooseOption`它时，它将更改该元素的`height`and `background`。

**默认 CSS：**

```
#chooseOption {height:35px;background-image:url('1.jpg');} 
```

**点击它会变成：**

```
#chooseOption {height:55px;background-image:url('2.jpg');} 
```

非常感谢您对此的任何指示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:17:18.573

为它创建一个类并切换类：

```
$(function() {  
 $('#chooseOption').click(function(){
  $('#accordion ul').toggleClass("itsclass");
 });    
}); 
```

CSS：

```
.itsclass {
  height:55px;
  background-image:url('2.jpg');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:20:19.050

定义一个css类如下

```
.chooseOptionNew {height:55px;background-image:url('2.jpg');} 
```

使用 toggleClass()，此方法将添加/删除特定类，

```
$(function() {  
 $('#chooseOption').click(function(){
  $('#accordion ul').toggle().toggleClass("chooseOptionNew");
 });    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:20:20.563

您可以通过使用 jQuery`toggleClass()`函数向菜单添加或删除 CSS 类来实现：

> 描述：根据类的存在或 switch 参数的值，从匹配元素集中的每个元素中添加或删除一个或多个类。

用法：

```
$('#accordion ul').toggleClass('.cssclass'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T14:14:12.240

答案：-D

```
$(function() {  
   $('#chooseOption').click(function(){
     $('#accordion ul').toggle();
     $('#chooseOption').toggleClass("chooseOptionNew");
   });    
}); 
```