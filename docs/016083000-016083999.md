# StackOverflow 问答 16083000-16083999

# c# - ILMerge 后 Nancy 模块自动发现不起作用

> ID：16083006
> 
> 赞同：2
> 
> 时间：2013-04-18T12:29:31.210
> 
> 标签：c#, nancy, ilmerge

当我在 Visual Studio 中运行我的 Nancy 自托管应用程序时，一切都按预期工作，但是当我使用 ILMerge 创建 allInOne.exe 时，我只会在每个 Url 上得到 404。

这就是 ILMerge 命令：

```
ILMerge.exe /target:console /out:allInOne.exe application.exe "Nancy.Hosting.Self.dll" "Nancy.dll" 
```

问题是没有一个模块是自动发现的，因此没有可用的路由。该问题也只出现在合并的 exe 文件中。当我在 /bin/release 中运行 application.exe 时，一切正常。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:48:18.097

默认情况下，它不会扫描“Nancy”所在的程序集（通常是 Nancy.dll）。现在您已经合并了它们，它将排除整个合并的程序集。您可以通过覆盖此方法来更改行为，以便它不排除 Nancy 程序集（`true`TypesOf 调用中的标志）

[https://github.com/NancyFx/Nancy/blob/master/src/Nancy/Bootstrapper/NancyBootstrapperBase.cs#L94](https://github.com/NancyFx/Nancy/blob/master/src/Nancy/Bootstrapper/NancyBootstrapperBase.cs#L94)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T15:08:42.207

根据我的经验，我发现两个部分是必要的。首先，像 Andreas 建议的那样覆盖引导程序中的 Modules 属性：

```
protected override IEnumerable<ModuleRegistration> Modules
{
    get
    {
        return
            AppDomainAssemblyTypeScanner
                    .TypesOf<INancyModule>(ScanMode.All)
                    .NotOfType<DiagnosticModule>()
                    .Select(t => new ModuleRegistration(t))
                    .ToArray();
    }
} 
```

其次，当您创建 Nancy 主机时，使用采用引导程序实例的重载：

```
using (var host = new NancyHost(new Bootstrapper(), new Uri(uri)))
{
    host.Start();
    // Do your thang
} 
```

我最初使用的重载只需要一个 Uri，但在运行 ILMerged 主机时仍然无法访问我的端点。我的猜测是 Nancy 也会自动发现*bootstrapper*，如果它在 Nancy 的程序集中，也将无法找到它。

# ruby-on-rails-3.2 - 使用 rspec 测试acts_as_tenant

> ID：16083008
> 
> 赞同：2
> 
> 时间：2013-04-18T12:29:38.017
> 
> 标签：ruby-on-rails-3.2, rspec2, fabrication-gem, acts-as-tenant

我有一个使用 ascts_as_tenant 的多租户应用程序。我正在尝试编写一个测试范围的规范。所以我想测试一下User.active的输出。

一般来说，这适用于以下代码

```
it "returns a correct active user" do
  user_active = Fabricate(:user, curremp: true)
  user_scope2_active = Fabricate(:user, curremp: true)
  user_not_active = Fabricate(:user, account_id: user_active.account_id, curremp: false)
  expect(User.active).should include(user_active)
  #expect(User.active).to_not include(user_scope2_active)
  expect(User.active).to_not include(user_not_active) 
end 
```

但是，我不知道如何让它使用acts_as_tenant 功能来使用current_tenant 并因此验证它只列出来自一个租户的活动用户。我确信这已经完成了，但我还没有找到任何关于它的文档。

因此，如何使用 rspec 测试acts_as_tenant 用户模型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-29T19:39:50.437

这就是我们所做的：

通常，您不需要在单元测试中处理将信息范围限定给租户的问题。因此，只需编写这些测试，就好像没有范围界定一样。

唯一的例外是如果您想专门测试与范围相关的内容。我们很少这样做。Acts_as_tenant 有自己的测试套件来测试范围（但我会这么说，因为我写了它；）。

如果您必须在单元测试中处理 AaT，您可以直接设置 current_tenant：

```
ActsAsTenant.current_tenant = Account.first 
```

然后在后过滤器中清理该租户很重要（将其设置为 nil），否则您将陷入调试地狱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-06T20:29:38.757

我发现确保抛出正确的错误消息很有帮助，以防租户发生一些奇怪的事情，例如：

```
 before(:each) do
      ActsAsTenant.current_tenant = FactoryBot.create(:account)
    end

    it 'is not valid without an account' do
      foo = FactoryBot.create(:foo)
      expect { foo.account = nil }.to raise_error ActsAsTenant::Errors::TenantIsImmutable
    end 
```

# inheritance - 建模一个非常简单的 isA 关系：2 个带有偶数/奇数 id 的表还是 3 个表？

> ID：16083009
> 
> 赞同：-1
> 
> 时间：2013-04-18T12:29:40.873
> 
> 标签：inheritance, orm, entity-relationship

我们的项目中有两种类型的医院工作人员

*   医生
*   护士

这永远不会改变（即没有其他员工类型）。两种实体类型之间有很大的重叠（例如登录信息相同），但也有很大的不同。到目前为止，我们可以拥有：

*   一张`doctors`只有偶数`id`的表（2,4,6 等）和一张`nurses`只有奇数`id`的表（1,3,5 等）
*   3 个表，一个用于捕获公共父实体 ( `staffs`)，一个表用于每个子实体 ( `doctors`and `nurses`)

我无法让我的一位同事相信第一个设计在我们的项目中更好，这主要是因为它的简单性（特别是用于常见操作的连接更少）和更好的性能。为什么第一个设计更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:46:22.843

第一个设计并不好，因为是自定义解决方案，而第二个设计遵循关系数据库原则。

编辑：既然你用 ORM 标记了这个问题，我想 ORM 将完成所有的加入工作。第一个解决方案不容易被 ORM 理解，而第二个解决方案是 ORM 可以在没有任何定制的情况下解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:34:47.490

您应该使用派对和角色模型。

一方代表一个组织、个人，或者可能是一个自动化代理。

一个派对可以扮演许多角色。一个这样的角色是护士。也许护士回到学校并成为一名医生。

如果您阅读一些数据建模书籍（Hay、Silverston、Fowler），这是标准方法。如果您没有理由不这样做，最好使用标准方法。

```
PARTY
long id

INDIVIDUAL : PARTY
String name

ROLE
Party party
Date from_date
Date to_date

DOCTOR_ROLE : ROLE

NURSE_ROLE : ROLE 
```

如果您使用单表继承，您的表将如下所示：

```
PARTY
id 
type FK PARTY_TYPE
name
PK id

ROLE
party_id
type FK ROLE_TYPE
from_date
to_date null
PK (party_id, type, from_date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:42:27.200

有3种可能的方法来解决这个问题：

把所有东西放在一张桌子上。这是迄今为止最容易使用的（select * from personel where type = 'doctor'）。最大的缺点是属于某种类型的所有列都未用于相反类型（反之亦然）。

把它放在 2 个特定的表中。Doctor 和 Nurse 都有他们自己需要的所有列。在某种程度上，这是非常可行的，您可以决定选择哪一个。但是，使用奇数和偶数 id 是没有意义的（您认为：Select * from tab_doctor, tab_nurse where id = even?）。如果您确实使用这样的 id 并且有人将偶数 id 添加到不均匀表中，您会遇到问题，为防止这种情况，您必须编写触发器来检查 id（会降低性能）。

最后一种可能性是像您所说的那样使用 3 个表作为子实体。然而，这个在表之间使用了大量的通信。正如您所说，它的简单性不在其他两个选项的水平上。

每个实现都有很多优点和缺点，这取决于很多因素（不仅是我提到的那些，还考虑表格的大小等）。

# joomla - JSN航展列表横向（virtuemart最新产品）

> ID：16083017
> 
> 赞同：0
> 
> 时间：2013-04-18T12:30:09.003
> 
> 标签：joomla, joomla2.5, virtuemart

我有 Joomla 2.5.9 和 Virtuemart 2.0.20b

我正在使用 JSN Air 模板。这一切都很完美，除了一件事的偏离。

我添加了一个带有 VirtueMart 产品模块的模块来展示最新产品。我把它放在主体底部。但是产品现在显示在垂直列表中，而不是水平列表中。

这是模板的免费版本不支持的东西吗？还是我做错了什么？或者我应该使用模块类后缀？

当我去网上商店的首页时，产品是水平显示的，所以它工作正常。

当我在另一个模板（标准 Beez2）中使用该模块时，它会水平显示产品，因此问题不在 VirtueMart 模块中。它在 AIR 模板中。

希望可以有人帮帮我。

亲切的问候，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:08:06.013

解决了！我必须在 business.css （来自模板）中输入一些 VirtueMart CSS 代码。

# java - 使用 getClass() 获取类时编译错误

> ID：16083023
> 
> 赞同：3
> 
> 时间：2013-04-18T12:30:27.453
> 
> 标签：java, class, boolean, javadoc

我正在学习`getClass`它是如何工作的。

我读到： [http ://docs.oracle.com/javase/7/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)

但我真的不明白为什么会失败：

```
boolean b;
Class c = b.getClass(); 
```

谁能向我解释为什么它给我一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:31:46.103

`boolean b;`是原始数据类型，您不能使用**.** 运算符，试试`Boolean b`；[Boolean](http://docs.oracle.com/javase/6/docs/api/java/lang/Boolean.html)是原始的包装类`boolean`。

试试这个：

```
Boolean b = null;
Class c = b.getClass(); 
```

或更好

```
Boolean b = null;
Class<? extends Boolean>  c = b.getClass(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:32:18.247

您的变量`b`是 type `boolean`，这是一种原始类型。原始类型不是对象，因此，您无法获取它们的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:32:19.387

因为`boolean`s 不是对象。不能调用任何方法`boolean`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:32:22.590

b - 是 primite，你不能调用 getClass 。它不是一个对象

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T12:32:27.320

因为您使用的是原始`boolean`. 对象不会发生`Boolean`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T12:32:56.807

您不能对原始数据类型调用 getClass() 方法。这将为您解决问题

```
Boolean b;//Change it to Boolean wrapper class
Class c = b.getClass(); 
```

# pageobjects - 如何使用水豚页面对象中的 select_list 注释从下拉列表中选择一个选项

> ID：16083027
> 
> 赞同：1
> 
> 时间：2013-04-18T12:30:34.050
> 
> 标签：pageobjects, page-object-gem

对于这样的 HTML：

```
<select class="intl_drop" name="select_locale">
  <option value="0">- Select One -</option>
  <option value="1">United States - English</option>
  <option value="2">United States - Español</option>
  <option value="3">Canada - English</option> 
```

当我尝试使用选择选项时

```
select_list(:select_lang, :class => "intl_drop", :index => 1) 
```

我收到错误消息

```
Unable to locate element{"method":"xpath","selector":".//select[@class=' intl_drop'][2]"} (Selenium::WebDriver::Error::NoSuchElementError) 
```

当我不使用索引值时它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:30:32.470

If I understood the question the problem is that this works:

```
select_list(:select_lang, :class => "intl_drop") 
```

but this does not work:

```
select_list(:select_lang, :class => "intl_drop", :index => 1) 
```

The problem could be that there is only one select list with `class` `intl_drop`.

`:index => 1` will select **the second** element. `:index => 0` will select the first one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T21:08:00.597

为什么不：

```
select_list(:select_lang, name="select_locale") 
```

并根据您要按索引或值选择对象的语句？

```
select_lang_element.select_value(1) 
```

或者

```
select_lang_element[1].click 
```

这些都对我有用。一个被弃用的冗长的方式是

```
select_lang_element.option[:value, '1'].click 
```

希望这可以帮助。

# dynamics-crm-2011 - 实用程序应用程序如何与所有三种部署类型的 CRM 连接

> ID：16083028
> 
> 赞同：0
> 
> 时间：2013-04-18T12:30:35.140
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我正在使用具有用户身份验证的实用程序应用程序（即，它将用户的用户名密码作为输入）。以前我曾与`CRM online`. 现在的要求是这个实用程序应该能够连接所有三种部署类型的 CRM（即本地、在线、IFD）。我不知道该怎么做。我正在使用`crmservice.cs`并`deviceidmanager.cs`与 CRM 连接。

从其他在线资源中，我发现如果我在连接字符串中添加`Authentication Type="Integrated"/"AD"/"SPLA"/"Passport"`，它应该可以工作。

所以如果我写我的连接字符串

`connectionString="Authentication Type="Integrated";Data Source= LINE500\sage;Initial Catalog=cs3live; Integrated Security=false; User Id=XXXXXXXX;Password=XXXXXXXX"`

这行得通吗？仅供参考，我只有 CRM 在线试用帐户来验证我的代码。所以我需要你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:52:21.290

CRM Online 环境可以使用 Windows Live ID 或 Office 365 身份验证，`DeviceID`并且`DevicePassword`仅在使用 Windows Live ID 凭据连接时是必需的。因此，您需要知道您的 CRM 中使用了哪种身份验证类型。

为了能够连接到不同的环境，我建议使用简化连接，您可以在此处找到更多信息：

[https://stackoverflow.com/a/15930366/2191473](https://stackoverflow.com/a/15930366/2191473)

和这里：

[示例：使用 Microsoft Dynamics CRM 的简化连接快速入门](http://msdn.microsoft.com/en-us/library/jj602970.aspx)

# javascript - Yandex maps api - 事件处理程序只执行一次

> ID：16083031
> 
> 赞同：1
> 
> 时间：2013-04-18T12:30:50.533
> 
> 标签：javascript, jquery, yandex-api

我想实现与 /http://api.jquery.com/one/`.one()` 类似 的[东西](http://api.jquery.com/one/)`myYandexMap.events.add('click', function(e){})` 。这意味着，要在点击时拥有一个功能，它只能运行一次，或者我可以用其他功能替换它。

我试图在函数末尾删除内部函数，但我没有弄清楚如何去做。这基本上就是我所做的

```
yxMap.events.add('click', function (e){ add_wp_map_click(e, num, color) });

function add_wp_map_click(e, num, color){
  ...
  yxMap.events.remove('click', function (e){ add_wp_map_click(e, num, color) });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T16:41:47.800

您也可以尝试将`.once`方法用作：

```
yxMap.events.once('click', handler, context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:34:42.717

您必须删除相同的处理程序，重新声明该函数不起作用，因为它是 javascript ( `function() {} === function() {} -> false`) 的两个不同函数。

尝试：

```
var clickHandler = function(e) { 
    yxMap.events.remove('click', clickHandler);

    add_wp_blah(); 
};

yxMap.events.add('click', clickHandler); 
```

# php - PreparedStatement 选择与 php 未按预期工作

> ID：16083034
> 
> 赞同：0
> 
> 时间：2013-04-18T12:31:01.757
> 
> 标签：php, sql, select, prepared-statement

我有这个查询：

```
SELECT id, result, ip_address, added_date
FROM results
WHERE course_id = ( 
SELECT id
FROM courses
WHERE course =  'informatica'
AND macro_course_id = ( 
SELECT id
FROM macro_courses
WHERE macro_course =  'scienze-matematiche-fisiche-e-naturali'
AND organization_id = ( 
SELECT id
FROM organizations
WHERE organization =  'universita-degli-studi-di-torino'
AND city_id = ( 
SELECT id
FROM cities
WHERE city =  'torino'
AND region_id = ( 
SELECT id
FROM regions
WHERE region =  'piemonte' ))))) ORDER BY id DESC 
```

我正在使用这段代码来做一个preparedstatement

```
public function getResults($region, $city, $organization, $macro_course, $course) { //works
    //added_date=datetime : YYYY-MM-DD HH:mm:ss
    echo "SELECT id, result, ip_address, added_date
    FROM results
    WHERE course_id = ( 
    SELECT id
    FROM courses
    WHERE course =  '$course'
    AND macro_course_id = ( 
    SELECT id
    FROM macro_courses
    WHERE macro_course =  '$macro_course'
    AND organization_id = ( 
    SELECT id
    FROM organizations
    WHERE organization =  '$organization'
    AND city_id = ( 
    SELECT id
    FROM cities
    WHERE city =  '$city'
    AND region_id = ( 
    SELECT id
    FROM regions
    WHERE region =  '$region' ))))) ORDER BY id DESC"; //just for me to know what query is being executed 

    if ($stmt = $this->mysqli->prepare(("
    SELECT id, result, ip_address, added_date
    FROM results
    WHERE course_id = ( 
    SELECT id
    FROM courses
    WHERE course =  ?
    AND macro_course_id = ( 
    SELECT id
    FROM macro_courses
    WHERE macro_course =  ?
    AND organization_id = ( 
    SELECT id
    FROM organizations
    WHERE organization =  ?
    AND city_id = ( 
    SELECT id
    FROM cities
    WHERE city =  ?
    AND region_id = ( 
    SELECT id
    FROM regions
    WHERE region =  ? ))))) ORDER BY id DESC

  "))) {
        $return = array();
        $stmt->bind_param('sssss', $course, $macro_course, $organization, $city, $region);
        $stmt->execute();
        if ($stmt->fetch()) {
            $i = 0;
            while ($row = $stmt->fetch()) {
                print_r($row);//this is never reached
                continue;
                $s = new Result($row['result'], $row['added_date'], $row['id']);
                $return[$i] = $s;
                $i+=1;
            }
        }
    }
    return $return;
} 
```

问题是这个函数返回 0 行和 0 个错误（用 选中`$this->mysqli->error`），似乎 $row = $stmt->fetch() 总是假的。

但是，如果我在 PHPMyAdmin 上复制并执行我在函数顶部得到的输出，我会看到

```
Showing lines 0 - 0 ( 1 total, Query time 0.0003 sec) 
```

所以查询返回一行，但它没有被 php 捕获。我错过了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:43:08.330

因为你`$stmt-fetch()`在这里用了两次

```
if ($stmt->fetch()) {
        $i = 0;
        while ($row = $stmt->fetch()) { 
```

删除`if ($stmt->fetch())`条件，它将按预期工作。

**编辑**

来自文档

**请注意，在调用 $stmt->fetch() 之前，应用程序必须绑定所有列。**

`$stmt->fetch()`你必须在这样调用之前绑定结果

```
/* bind result variables */
$stmt->bind_result($name, $code); 
```

# html - 是否更好用 和 ， 要不就 ?

> ID：16083035
> 
> 赞同：4
> 
> 时间：2013-04-18T12:31:08.953
> 
> 标签：html, css, web

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:37:58.277

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:35:31.590

就个人而言，我使用列表。我更喜欢这个，因为如果你需要它可以更健壮。例如，如果您的样式需要镶嵌边框，则可以轻松地在 上创建浅色边框并在 上创建`<a>`深色边框`<li>`以创建该效果。

然而，同时，list 方法可以被设计成简单的，就好像你只使用`<a>`'s

此外......两者之间没有可察觉的速度差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:38:22.137

这完全取决于你。该`<nav>`元素只需要包含主导航，它不必在列表中。但通常使用列表，因为导航菜单往往是项目列表。

因此，如果您的导航包含项目列表，那么它可能应该是一个列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:50:48.110

从我的角度来看，第一个解决方案是最好的，因为你的菜单是一个导航，它使用更少的代码并且（据我所知）和第二个解决方案一样对 seo 有好处。

```
<nav>
    <a href="#">Home</a>
    <a href="#">Kontakt</a>
    <a href="#">Jovan</a>
</nav> 
```

如果您在 , , , (!) 或其他任何内容中使用其他元素`nav`，`ul`则`ol`它`h1`在`table`语义上应该是正确的。因此，如果您的菜单是列表，则可以使用`ul`. 如果您只想在内部添加元素以使其更易于设置样式，请使用`div`和/或`span`.

**更新**

经过评论中的一些讨论：在大多数情况下，菜单是一个列表，那么该`ul`方法是一个很好的选择。[据史蒂夫](https://stackoverflow.com/users/783488/steve)说，如果你使用`ul`它，屏幕阅读器会更容易导航

# wpf - 如何通过触发器更改 IsReadOnly

> ID：16083037
> 
> 赞同：3
> 
> 时间：2013-04-18T12:31:10.773
> 
> 标签：wpf, mvvm, binding, datagrid, triggers

任何人都可以启发我以下方法不起作用

我
在执行我的代码后使用 mvvm 模式我仍然能够检查和取消选中我的 DataGridCheckBoxColumn 中的复选框

属性（我的 ViewModel 的一部分）

```
 public bool noCheckPermission
    {
        get { return false; } // just as example
    } 
```

Xaml（我的视图后面没有代码）

```
<DataGrid Height="300" AutoGenerateColumns="False" SelectionMode="Single"
          ItemsSource="{Binding Itemlist, UpdateSourceTrigger=PropertyChanged}">
            <DataGrid.Resources>
                <Style TargetType="{x:Type DataGridCheckBoxColumn}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding noCheckPermission}" Value="False">
                            <Setter Property="IsReadOnly" Value="True"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding noCheckPermission}" Value="True">
                            <Setter Property="IsReadOnly" Value="False"/>
                        </DataTrigger>    
                    </Style.Triggers>
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>                    
                <DataGridCheckBoxColumn Width="60" 
                                    Header="Freigabe" Binding="{Binding FreigegebenL}" CanUserReorder="False">
                </DataGridCheckBoxColumn>               
            </DataGrid.Columns>                
        </DataGrid> 
```

编辑：在做了盲人和威尔建议的事情之后。我把它作为我当前的 XAML

```
 <DataGrid Height="300" Margin="12" AutoGenerateColumns="False"  CanUserAddRows="False" CanUserDeleteRows="False"
                  CanUserResizeColumns="False" CanUserResizeRows="False" CanUserReorderColumns="False"
                  x:Name="grd" ItemsSource="{Binding Itemlist, UpdateSourceTrigger=PropertyChanged}" 
                  SelectedItem="{Binding selectedItem, UpdateSourceTrigger=PropertyChanged}" SelectionMode="Single" SelectionChanged="DataGrid_SelectionChanged" TabIndex="2">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Width="60" IsReadOnly="{Binding  DataContext, Path=noCheckPermission, ElementName=grd}" Binding="{Binding FreigegebenL}"
                                    Header="Freigabe"  CanUserReorder="False">
                </DataGridCheckBoxColumn>               
            </DataGrid.Columns>
        </DataGrid> 
```

这是我的输出窗口中的错误：
*`System.Windows.Data Error: 2 : Cannot find governing FrameworkElement or FrameworkContentElement for target element. BindingExpression:Path=noCheckPermission; DataItem=null; target element is 'DataGridCheckBoxColumn' (HashCode=35155182); target property is 'IsReadOnly' (type 'Boolean')`*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:18:04.040

**首先**
我注意到我的财产在错误的虚拟机中（它在我的行的子虚拟机中）修复这个并没有解决我的问题

**终于**
在阅读[这篇文章](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)后我能够解决它

# 浓缩形式

## 班级

```
public class BindingProxy : Freezable
{
    #region Overrides of Freezable

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    #endregion

    public object Data
    {
        get { return (object)GetValue(DataProperty); }
        set { SetValue(DataProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Data.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DataProperty =
        DependencyProperty.Register("Data", typeof(object), typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

## XAML

**资源**

```
<DataGrid.Resources>
    <local:BindingProxy x:Key="proxy" Data="{Binding}" />
</DataGrid.Resources> 
```

**柱子**

```
 <DataGridCheckBoxColumn Width="60" Header="Freigabe"  CanUserReorder="False"
                            IsReadOnly="{Binding Data.noCheckPermission, Source={StaticResource proxy}}" 
                            Binding="{Binding FreigegebenL}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:36:09.800

如果您只想将 DataGridCheckBoxColumn 设为只读，则应将样式添加到 DataGridCheckBoxColumn。

```
<DataGrid Height="300" AutoGenerateColumns="False" SelectionMode="Single"
      x:Name="grd"
      ItemsSource="{Binding Itemlist, UpdateSourceTrigger=PropertyChanged}">
        <DataGrid.Columns>                    
            <DataGridCheckBoxColumn Width="60" 
                                Header="Freigabe" Binding="{Binding FreigegebenL}" CanUserReorder="False">
           <DataGridCheckBoxColumn.Style>
              <Style TargetType="{x:Type DataGridCheckBoxColumn}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding DataContext.noCheckPermission, ElementName=grd}" Value="False">
                        <Setter Property="IsReadOnly" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding DataContext.noCheckPermission, ElementName=grd}" Value="True">
                        <Setter Property="IsReadOnly" Value="False"/>
                    </DataTrigger>    
                </Style.Triggers>
            </Style>
            </DataGridCheckBoxColumn.Style>
            </DataGridCheckBoxColumn>               
        </DataGrid.Columns>                
    </DataGrid> 
```

# java - Java为什么无法在编译时确定泛型类型的方法重载

> ID：16083038
> 
> 赞同：2
> 
> 时间：2013-04-18T12:31:13.547
> 
> 标签：java, generics, overloading

我想知道为什么下面的代码不能使用编译时泛型类型信息来正确查找最具体的方法重载，而是始终使用适用于所有潜在泛型参数的方法。有没有办法在编译时打开泛型参数类型以避免在运行时出现讨厌的反射？

```
import org.junit.Assert;
import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

public class Temp {
    class A<T> {
        T x;
        A(T x) {
            this.x = x;
        }
        String bar = foo(x);

        private String foo(Integer i) {
            return "Int";
        }
        private String foo(String i) {
            return "String";
        }
        private <T> String foo(List<T> l) {
            return "List";
        }
        private <T> String foo(T v) {
            return "Value";
        }
    }

    @Test
    public void IntTest() {
        Assert.assertEquals(new A<Integer>(1).bar, "Int");
    }
    @Test
    public void StringTest() {
        Assert.assertEquals(new A<String>("A").bar, "String");
    }
    @Test
    public void ListTest() {
        Assert.assertEquals(new A<List<String>>(new ArrayList<String>()).bar, "List");
    }
    @Test
    public void LongTest() {
        Assert.assertEquals(new A<Long>(1L).bar, "Value");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:12:13.430

`A`这是因为编译器必须为用于的每种类型生成不同的类`T`（因为初始化器`A.bar`需要调用不同的方法）。决定只生成一个类。这与编译器为所有使用的类型参数生成新类型的 C++ 不同。

换句话说， type 的编译代码与 type`A<String>`不同`A<Integer>`，但编译后只有 type `A`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:32:15.163

这是因为泛型在编译时被删除。有擦除的概念，它在编译时删除所有泛型代码，用类型转换替换它。所以java在运行时不会知道泛型方法。

编辑：

还要检查此链接：http: [//docs.oracle.com/javase/tutorial/java/generics/restrictions.html#cannotOverload](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#cannotOverload)

# javascript - 使用ajax调用向服务器发送数据

> ID：16083041
> 
> 赞同：0
> 
> 时间：2013-04-18T12:31:15.983
> 
> 标签：javascript, ajax, jquery, cordova

```
jQuery.ajax({
url:"http://192.168.0.74:8080/pimsdesign/JSONRequestHandler" ,
type: "POST",
data: {name: "amit", id:1 },
dataType: "json",
beforeSend: function(x) {
if (x && x.overrideMimeType) {
x.overrideMimeType("application/json;charset=UTF-8");
}
},
success: function(result) {
navigator.notification.alert(result);
}        
}); 
```

通过使用上面的代码，我将 json 数据发送到服务器，但服务器没有获取数据
如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:38:13.613

~~尝试数据：{name: "amit", id:1 }, => data: JSON.stringify({name: "amit", id:1 }),~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:29:11.870

以下适用于我的 PhoneGap 应用程序：我假设您已经确保您的服务器正在侦听该 IP 地址的端口 8080

```
$.ajax({
            type: "POST",
            url: <some url>,
            data: { name: 'value'},
            dataType: 'json',
            timeout: 10000,
            async: true,
            cache: false,               
            headers: { "cache-control": "no-cache" },
            success: function(data){
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T10:52:15.333

声明变量 args 以传递您需要发送到服务器的参数。

参数 = {

ModuleId：getUrlModuleId()，

EmpId：getUrlEmpId()，

登录ID：getUrlLoginID()，

角色标识：getUrlRoleId()，

公司 ID：getUrlCompanyId()，

GeoLocationId：getUrlGeoLocationId()

}

$.ajax({

url: "../HttpHandler/Test.ashx", //处理程序路径

data: args, // 要传递给服务器的数据

cache: false, // 缓存 false 或 true。如果为 false，它将等待服务器的响应。

成功：函数（数据）//响应数据应在处理前转换为json。

{

您可以将 json 数据处理为 . var name =数据[0].columnname;

}

});

# java - 如何通过代理在 Linux 上使用 java 邮件服务

> ID：16083043
> 
> 赞同：1
> 
> 时间：2013-04-18T12:31:22.737
> 
> 标签：java

我在使用代理 192.168.1.1 的网络中实现 java 邮件时收到错误网络未连接虽然我也在程序中配置了代理。

```
props.put("mail.smtp.host", "smtp.gmail.com");      
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465");
props.put("proxyHost", "192.168.1.1");
props.put("proxyPort", "8080"); 
```

# c# - 使用特定过滤器加载 xml

> ID：16083044
> 
> 赞同：-4
> 
> 时间：2013-04-18T12:31:25.473
> 
> 标签：c#, vb.net

我有这样的XML格式..

```
<ROOT>
    <bookstore>
        <Name>XXXXXX</BUNIT>
    </bookstore>
    <book>
        <ID>000000000000001001</ID>
        <title>Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>30.00</price>        
    </book>
    <book>
        <ID>000000000000001002</ID>
        <title>Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>30.00</price>        
    </book>
    <book>
        <ID>000000000000001003</ID>
        <title>Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>30.00</price>        
    </book>
    <book>
        <ID>000000000000001004</ID>
        <title>Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>30.00</price>        
    </book>
</ROOT> 
```

现在我只想加载没有循环的“ID”书的单个节点。我已经尝试过这样的......我们将通过以下行获得书的完整节点（第一项 id = 000000000000001001）

```
_nodeList = objxml.SelectSingleNode("//book/") 
```

但我会给出 ID 来过滤，如下面的代码。

```
_nodeList = objxml.SelectSingleNode("//book/ID['000000000000001001']") 
```

我需要具有该特定 ID 的完整书籍节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:40:25.940

如果我正确理解了这个问题，您想通过子元素`ID`值选择一个书本元素吗？

如果是这种情况，您可以使用一个非常简单的 LINQ 查询按 ID 返回 book 节点（假设您首先更正了 XML）：

```
var book = from n in xml.Descendants("ROOT").Elements("book")
                       where n.Element("ID").Value == "000000000000001001"
                       select n; 
```

然后，您可以将值投影到匿名类型并将查询转换为列表以枚举结果：

```
var book = (from n in xml.Descendants("ROOT").Elements("book")
            where n.Element("ID").Value == "000000000000001001"
            select new
            {
                ID = (string)n.Element("ID").Value,
                Title = (string)n.Element("title").Value,
                Author = (string)n.Element("author").Value,
                Year = (string)n.Element("year").Value,
                Price = (string)n.Element("price").Value
            }).ToList(); 
```

这将给出如下输出：

![在此处输入图像描述](https://i.stack.imgur.com/wzRH5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:49:25.297

```
var book = onjxml.SelectSingleNode("//ROOT/book[ID='000000000000001003']") 
```

# javascript - javascript参数的特殊性

> ID：16083046
> 
> 赞同：0
> 
> 时间：2013-04-18T12:31:33.307
> 
> 标签：javascript, html

我有一个小问题。如果我有这样的：

```
<td id="1003212" class="tabG_numOF donneesOF 1003212" value="1003212" onClick="onClick_celluleID(1003212);"> 
```

和其他类似的：

```
<td id="comp1003254" class="tabG_composant donneesOF 1003254" value="310049063 OMNI SERGE F915 GREGE HDB L1920" onClick="onClick_cellule(310049063OMNISERGEF915GREGEHDBL1920);"> 
```

为什么下一个函数不能与第二个函数一起工作，即使它与第一个函数一起工作？

```
function onClick_cellule(t) {
            alert(t);
} 
```

? 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:34:47.817

第二个不是数字尝试通过

```
<td id="comp1003254" class="tabG_composant donneesOF 1003254" value="310049063 OMNI SERGE F915 GREGE HDB L1920" onClick="onClick_cellule('310049063OMNISERGEF915GREGEHDBL1920');"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:35:45.257

第一个函数取数字，但第二个取字符串，所以你应该把你的取值放在引号内：

```
onClick="onClick_cellule('310049063OMNISERGEF915GREGEHDBL1920');" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:33:23.707

因为`310049063OMNISERGEF915GREGEHDBL1920`会导致语法错误。我猜你打算将它作为一个字符串（注意引号）：

```
onClick_cellule("310049063OMNISERGEF915GREGEHDBL1920"); 
```

JavaScript 中的文字值可以是字符串、数字、布尔值、数组、对象、null 或 undefined 类型。您的值不会解析为其中任何一个，因此会导致错误。字符串文字必须用引号括起来，因此在上面的固定示例中，我们将字符串文字传递给函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:33:38.170

第二个标识符不是有效数字，因此您需要将 is 视为字符串：

```
onClick_cellule('310049063OMNISERGEF915GREGEHDBL1920'); 
```

# api - 在 youtube API 3 中需要用户身份验证或开发人员注册应用程序就足够了吗？

> ID：16083048
> 
> 赞同：1
> 
> 时间：2013-04-18T12:31:35.270
> 
> 标签：api, youtube

我想使用 youtube API 3 开发一个 android 应用程序。

使用该应用程序的用户是否必须使用他/她的 gmail 凭据登录才能实际观看视频？

或者只是在这里注册应用程序[https://developers.google.com/youtube/registering_an_application](https://developers.google.com/youtube/registering_an_application)很好，观看视频或使用应用程序的用户无需登录他/她的 gmail 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:04:36.433

> 使用该应用程序的用户是否必须使用他/她的 gmail 凭据登录才能实际观看视频？

不需要。仅当您的应用程序需要访问“私人用户数据”时，才需要通过 OAuth 进行身份验证。仅仅观看视频不符合这些要求。

更多详细信息：[https ://developers.google.com/youtube/v3/guides/authentication](https://developers.google.com/youtube/v3/guides/authentication)

# php - PHP：createTextNode 作为对象

> ID：16083050
> 
> 赞同：1
> 
> 时间：2013-04-18T12:31:43.363
> 
> 标签：php, xml, domdocument

我有一个脚本可以读取 XML 标记并将其打印在我的页面上。有些项目是链接（没有 HTML 标签），所以我创建了一个向它添加 HTML 链接标签的函数。但是，链接呈现为字符串而不是 HTML。

我知道它是因为我使用了 createTextNode，所以我需要一些将它作为对象而不是字符串返回的东西。

这是我的代码

```
function get_feeds() {
    $feeds = array(
        array(
            'name' => 'Agenda',
            'url' => 'http://www.beleefdokkum.nl//pages/rss.aspx?type=agenda',
            'get' => array('title', 'description', 'link'),
            'scope' => array(1, 10)
        ),
        array(
            'name' => 'News',
            'url' => 'http://www.beleefdokkum.nl//pages/rss.aspx?type=nieuws',
            'get' => array('title', 'description', 'link'),
            'scope' => array(1, 10)
        ),
        array(
            'name' => 'Social media',
            'url' => 'http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=NOFriesland',
            'get' => array('description'),
            'scope' => array(1, 10)
        )
    );

    $result = new DOMDocument();

    function linkify($text) {
        $text = preg_replace('/(https?:\/\/\S+)/', '<a href="\1" class="preg-links">\1</a>', $text);
        $text = preg_replace('/(^|\s)@(\w+)/', '\1@<a href="http://twitter.com/\2" class="preg-links">\2</a>', $text);
        $text = preg_replace('/(^|\s)#(\w+)/', '\1#<a href="http://search.twitter.com/search?q=%23\2" class="preg-links">\2</a>', $text);
        return $text;
    }

    foreach ($feeds as $feed) {
        $xml = new DOMDocument();
        $xml->load($feed['url']);
        $frame = $result->createElement('div');
        $frame->setAttribute('class', 'feed_frame');
        $result->appendChild($frame);
        $name = $result->createElement('h1', $feed['name']);
        $name->setAttribute('class', 'feed_name');
        $frame->appendChild($name);
        $content = $result->createElement('div');
        $content->setAttribute('class', 'feed_content');
        $frame->appendChild($content);
        for ($i = $feed['scope'][0]; $i < $feed['scope'][1]; $i++) {
            $item = $result->createElement('span');
            $item->setAttribute('class', 'feed_item');
            $content->appendChild($item);
            foreach ($feed['get'] as $get) {
                $object = $result->createElement('p');
                $text = $result->createTextNode(linkify($xml->getElementsByTagName($get)->item($i)->nodeValue));
                $object->appendChild($text);
                $object->setAttribute('class', 'feed_'.$get);
                $item->appendChild($object);
            }
        }
    }
    return $result->saveHTML();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:28:47.977

可能还有其他方法，但我会通过在执行正则表达式匹配时创建文本节点和锚来解决它：

```
$node = $dom->createElement('p');
linkify($doc, $node, 'T1 @test T2 #test T3 http://www.stackoverflow.com T4'); 
```

该`linkify()`函数采用现有节点并根据给定字符串创建文本节点和锚点。

```
function linkify($dom, $node, $text)
{
    // we combine all possible patterns in one expression
    $re = '/(https?:\/\/\S+)|(?:^|\s)@(\w+)|(?:^|\s)#(\w+)/';
    // we capture pattern offsets
    $flags = PREG_SET_ORDER | PREG_OFFSET_CAPTURE;

    $offset = 0;
    if (preg_match_all($re, $text, $matches, $flags)) {
        foreach ($matches as $match) {
            // set start and end markers of the matched pattern
            $start = $match[0][1];
            $end = $match[0][1] + strlen($match[0][0]);
            // process each pattern based on the resulting matches
            if (isset($match[3])) { // Twitter hash
                $start += 2; // skip space and #
                $url = 'http://search.twitter.com/search?q=' . 
                    urlencode("#{$match[3][0]}");
                $anchor = anchor($dom, $url, $match[3][0]);
            } elseif (isset($match[2])) { // Twitter user
                $start += 2;
                $url = 'http://twitter.com/' . urlencode($match[2][0]);
                $anchor = anchor($dom, $url, $match[2][0]);
            } else { // standard url
                $anchor = anchor($dom, $match[1][0], $match[1][0]);
            }

            if ($start > $offset) {
                // we have text in between previous match (or start) and here
                $str = substr($text, $offset, $start - $offset);
                $node->appendChild($dom->createTextNode($str));
            }
            // insert the new anchor
            $node->appendChild($anchor);
            // keep track of last match marker
            $offset = $end;
        }
        // add last text node
        $node->appendChild($dom->createTextNode(substr($text, $offset)));
    }
} 
```

这将是您运行时的输出`->saveHTML()`：

```
<p>
  T1 
   @<a href="http://twitter.com/datibbaW" class="preg-links">datibbaW</a> 
  T2
   #<a href="http://search.twitter.com/search?q=%23test" class="preg-links">test</a>
  T3 
   <a href="http://www.stackoverflow.com" class="preg-links">http://www.stackoverflow.com</a>
   T4</p> 
```

我正在使用便利功能来创建锚点：

```
function anchor($dom, $url, $text)
{
    $anchor = $dom->createElement('a', $text);
    $anchor->setAttribute('href', $url);
    $anchor->setAttribute('class', 'preg-links');

    return $anchor;
} 
```

# java - 对 Lucene 分面搜索进行排序

> ID：16083055
> 
> 赞同：2
> 
> 时间：2013-04-18T12:32:04.087
> 
> 标签：java, sorting, lucene, faceted-search

我正在使用 lucene-facet 模块使用纯 Lucene 4.2.0 分面搜索。

我让它工作，但我怎样才能改变搜索者的排序行为？我使用搜索器的以下 seacrh 方法，但它不采用 Sort 参数。

```
FacetsCollector facetsCollector = FacetsCollector.create(facetSearchParams, indexReader, taxoIndexReader);
searcher.search(query, MultiCollector.wrap(facetsCollector));
List<FacetResult> res = facetsCollector.getFacetResults(); 
```

我得到的结果是最匹配的。但是是否可以按字母顺序对其进行排序而不在 pre java 中对其进行排序？

非常感谢！-丹尼

# git - 如何在 cygwin 上获取带有颜色和分页的 git log？

> ID：16083056
> 
> 赞同：6
> 
> 时间：2013-04-18T12:32:09.157
> 
> 标签：git, logging, cygwin

我想在 cygwin 上使用带有分页的彩色 git 日志。

我设法得到彩色日志

```
git log --color=always 
```

如果我做

```
git log --color=always | less 
```

我得到了分页，但是颜色命令被打印而不是被解释

```
ESC[33mcommit b4dbe28f459adf0df1784d3a597628cc27abf836ESC[m
Author: Ernst Pluess <mail@address.com>
Date:   Thu Apr 18 13:23:07 2013 +0200

    Changed to UTF-8 
```

在我的 OSX 框中，颜色和分页是 git log 在 shell 上的默认行为。我怎样才能在 Windows 上为 cygwin 获得相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-30T15:33:51.183

我能够通过运行全局配置 git（至少在 cygwin 上）

`git config --global core.pager 'C:/cygwin64/bin/less.exe'`

这种运行方式`git log`显示分页和彩色输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T12:39:32.977

利用

```
less -R 
```

而不是将颜色 ANSI 控制字符传递到终端。

您还可以将 LESS 环境变量设置为

```
LESS=-R 
```

做出这种默认行为。

# java - 图像转换器java

> ID：16083058
> 
> 赞同：3
> 
> 时间：2013-04-18T12:32:11.257
> 
> 标签：java, bufferedimage

我正在处理图像，我有一个问题。

我想从项目中读取图像，并将图像转换为灰色。我目前正在尝试使用函数 rgb2gray 进行转换，但仍然无法正常工作。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;

public class ImageTesting extends Component {
    private static int[] pixel;
    private static BufferedImage b;

    BufferedImage image;

    public void paint(Graphics g) {
        g.drawImage(image, 0, 0, null);
    }

    public ImageTesting() {
        try {
            image = ImageIO.read(new File("teste.jpg"));
        } catch (IOException e) {
        }
    }

    public Dimension getPreferredSize() {
        if (image == null) {
            return new Dimension(400, 400);
        } else {
            return new Dimension(image.getWidth(null), image.getHeight(null));
        }
    }

    public static BufferedImage rgb2gray(BufferedImage bi) {
        int heightLimit = bi.getHeight();
        int widthLimit = bi.getTileWidth();
        BufferedImage converted = new BufferedImage(widthLimit, heightLimit, BufferedImage.TYPE_BYTE_GRAY);
        for (int height = 0; height < heightLimit; height++) {
            for (int width = 0; width < widthLimit; width++) {
                Color c = new Color(bi.getRGB(width, height) & 0x00fffff);
                int newRed = (int) ((0.2989f * c.getRed()) * 2);// 0.2989f//multiplicr po 2
                int newGreen = (int) ((0.5870f * c.getGreen()) * 2);// 0.5870f
                int newBlue = (int) ((0.1140f * c.getBlue()) * 2);
                int roOffset = newRed + newGreen + newBlue;
                converted.setRGB(width, height, roOffset);
            }
        }
        return converted;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException {
        // TODO code application logic here
        JFrame f = new JFrame("Load Image Sample");
        JFrame g = new JFrame("Image RGB");
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        g.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        f.add(new ImageTesting());
        f.pack();
        f.setVisible(true);
        g.add(new ImageTesting());
        rgb2gray(b);
    }
} 
```

当我运行程序时，这些是出现的错误。

如果有人可以帮助我，我很感激。谢谢

**编辑：** 我设法解决了这个问题，但现在又出现了另一个问题。为了继续我的工作，我想在结果图像中找到最多 10 个亮点，并在索引中返回另一个图像，其中黑色的值为 0，索引中的白色值为 1，但此时我不明白制定这些步骤的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:40:36.287

main() 方法似乎有问题，不是吗？您创建两个完全相同的 JFrame 实例，然后添加显示原始图像的 Imagetesting 组件。最后运行 rgb2gray 时，结果无处发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:51:10.140

我建议使用图像过滤器，请参阅此处的相关文档：[http ://www.jhlabs.com/ip/filters/](http://www.jhlabs.com/ip/filters/)

它高性能且易于使用。

# javascript - 将输入保存在数组中并显示所有项目 jquery\ javascript

> ID：16083063
> 
> 赞同：1
> 
> 时间：2013-04-18T12:32:18.553
> 
> 标签：javascript, arrays

我是 jQuery 的初学者。我希望我的表单的所有输入值都在一个数组中 = (item 01, item 02 and and) save ..

它应该在表格中显示项目？

我做了什么，但它不起作用：

```
<form id="form_id">
    <label for="firstname">First Name:</label>
    <input type="text" id="firstname" name="name" value="" placeholder="Max" required="required" autofocus="autofocus" />
    <label for="lastname">Last Name:</label>
    <input type="text" id="lastname" name="name" value="" placeholder="Max" required="required" autofocus="autofocus" />
    <input type="submit" value="submit" id="submit-button" />
</form>

<div id="table">
<h2>List of all person</h2>
<table class="footable">
    <thead>
        <tr>
            <th data-class="expand"> First Name </th>
            <th> Last Name </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>e.g --> array[1].firstname</td>
            <td>e.g --> array[1].lastname</td>
        </tr>
    </tbody>
</table>
</div> 
```

Javascript代码：

```
 $(function() {
    $('#submit-button').click(function() {
        var formInputs = new Array();
        //Get the form ID
        var id = $(this).parent().attr('id');
        $('#' + id + ' input').each(function() {
            //Get the input value
            var inputValue = $(this).val();
            //Get the input id
            var inputId = $(this).attr('id');
            //Add them to the array
            formInputs[inputId] = inputValue;
        });

        show....
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:53:45.400

尝试这个

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <script type="text/javascript">
  $(document).ready(function(){
    $("#submit-button").click(function(){
      var data = $('#form_id').serializeArray();
      var obj = {};
      for (var i = 0, l = data.length; i < l; i++) {
          obj[data[i].name] = data[i].value;
      }
      $('table.footable tbody').append('<tr><td>'+obj['firstname']+'</td><td>'+obj['lastname']+'</td></tr>');
      $("#firstname").val('');
      $("#lastname").val('');
    })
  })
 </script>
<form id="form_id">
    <label for="firstname">First Name:</label>
    <input type="text" id="firstname" name="firstname" value="" placeholder="Max" required="required" autofocus="autofocus" />
    <label for="lastname">Last Name:</label>
    <input type="text" id="lastname" name="lastname" value="" placeholder="Max" required="required" autofocus="autofocus" />
    <input type="button" value="submit" id="submit-button" />
</form>

<div id="table">
<h2>List of all person</h2>
<table class="footable">
    <thead>
        <tr>
            <th data-class="expand"> First Name </th>
            <th> Last Name </th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:03:37.560

这应该工作

```
<form id="form_id">
    <label for="firstname">First Name:</label>
    <input type="text" id="firstname" name="name" value="" placeholder="Max" required="required" autofocus="autofocus" />
    <label for="lastname">Last Name:</label>
    <input type="text" id="lastname" name="name" value="" placeholder="Max" required="required" autofocus="autofocus" />
    <input type="button" value="submit" id="submit-button" />
</form>
<div id="table">

<h2>List of all person</h2>

    <table class="footable">
        <thead>
            <tr>
                <th data-class="expand">First Name</th>
                <th>Last Name</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

var names = [],
    tbody = $("#table tbody");

function getInfo(e) {
    var nameObj = {
        first: e.target.form[0].value,
        last: e.target.form[1].value
    };

    names.push(nameObj);

    e.target.form[0].value = "";
    e.target.form[1].value = "";
    tbody.empty();

    names.forEach(function (name) {
        var tr = $("<tr>");

        tr.append($("<td>").text(name.first));
        tr.append($("<td>").text(name.last));

        tbody.append(tr);
    });
}

$("#submit-button").on("click", getInfo); 
```

在[jsfiddle 上](http://jsfiddle.net/Xotic750/sJEJE/)

# html - 具有相对位置和溢出隐藏的容器没有高度

> ID：16083068
> 
> 赞同：0
> 
> 时间：2013-04-18T12:32:22.273
> 
> 标签：html, css

我有以下 CSS，我希望导航和网站绝对定位，这样我可以在按下菜单按钮时来回滑动它们（例如 facebook 应用程序）。为此，我有一个带有`overflow: hidden`（隐藏导航栏并在需要时将其滑入）的容器。然而; 恐怕容器由于内部的绝对定位而失去了它的自动高度。

如何在`overflow: hidden`没有绝对定位的情况下再次自动设置高度。

我创建了一个小提琴，其中容器的高度为 500px。我想自动制作高度比例。[http://jsfiddle.net/rB7EY/](http://jsfiddle.net/rB7EY/)

```
div {
    box-sizing: border-box;
}

.container {
    overflow: hidden;
    width: 100%;
    max-width: 60em;
    padding: 0;
    margin: 0 auto;
    position: relative;
    background: grey;
        height: 500px;
}

    /*CSS for the navigation bar that can be toggled*/
     .navigation {
        width: 15em;
        float: left;
        background: blue;
        position: absolute;
        left: -20px;
    }

    /*The CSS for the actual content*/
     .website {
        width: 100%;
        float: left;
        position: absolute;
        left: 0px;
    }

            .container .website .top_bar {
                height: 4em;
                background: pink;
                padding: 1em;
                position: relative;
            }

                .container .website .top_bar .menu_button {
                    width: 3.2em;
                    height: 2.5em;
                    background: red;
                    border: 0px;
                }

    nav.menu {
        width: 15em;
        position: absolute;
        left: 1em;
        top: 3em;
        background: yellow;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:11:55.987

我通过在容器与导航和网站之间使用 div 来修复它，并给它一个绝对位置。有了这个，我决定让容器成为`min-width: 100%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:35:41.640

如果我理解你，你想自动扩展容器就够了吗？尝试使用最小高度和最大高度

# jquery - 如何保持 Jquery 对话框打开？

> ID：16083076
> 
> 赞同：1
> 
> 时间：2013-04-18T12:32:34.407
> 
> 标签：jquery, jquery-ui, razor, asp.net-mvc-4, jquery-ui-dialog

单击页面上的图标后会打开一个对话框`1.cshtml`。如果我单击`1.cshtml`页面中的另一个链接，对话框就会消失。如何**保持打开状态**？

`1.cshtml`与名称对话框相关的代码

```
$('#name-dialog').dialog({
    autoOpen: false,
    width: 500,
    resizable: false,
    title: 'Name',
    modal: false,
    buttons: {
        "Close": function () {
            $(this).dialog("close");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:35:46.563

如果您想留在同一页面上，则对话框内的所有链接都应由 AJAX 处理。您可以使用 an`Ajax.ActionLink`而不是`Html.ActionLink`. 这样，当单击某个锚点时，将发送一个 AJAX 请求，并且浏览器将停留在当前页面上。如果您有任何 HTML 表单，情况也是如此。

# android - Android/Google+ 如何知道用户的朋友是否安装了应用程序

> ID：16083077
> 
> 赞同：7
> 
> 时间：2013-04-18T12:32:38.300
> 
> 标签：android, google-plus

我正在尝试检索用户圈子中已安装当前应用程序的人。

我已经使用了 SDK 中提供的示例应用程序“PlusSampleActivity”，并成功获取了用户圈子中所有人的列表。但是，我不确定该人是否已安装该应用程序。可用的文档似乎非常有限......

我发现的是 [https://developer.android.com/reference/com/google/android/gms/plus/model/people/Person.html](https://developer.android.com/reference/com/google/android/gms/plus/model/people/Person.html) 我正在使用下面的函数，但这总是返回错误。（我创建了一个安装了该应用程序的用户，我可以在使用 Google+ 访问网络上的用户个人资料时看到这一点）

是否应该使用其他一些 API？或者有什么方法可以更好地调试？

> 公共抽象布尔 isHasApp ()
> 
> 如果为“true”，则表示此人已安装发出请求的应用程序并已选择将此安装状态公开给调用者。“false”值表示无法确定安装状态（未安装或用户已选择将此信息保密）。

更新似乎 hasapp 字段甚至不包含在响应中？在下面的链接上尝试 API 时，我从来没有成功地将 hasapp 包含在响应中......有什么建议我可能做错了吗？ [https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get](https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get)

（我在 Google 群组上发布了同样的问题，[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/R85I0IjMtcM)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T14:08:23.287

不幸的是，hasApp 字段没有被填写到响应中——它实际上是来自旧 API 的遗留字段。最好的匹配方法是使用他们的 Google ID 跟踪数据库中安装的用户，并将其与 people.list 响应中的 ID 进行比较。

文档应尽快更新以反映这一点，很抱歉造成混淆！

# c++ - 如何在 C++ 中用 0 设置数据？

> ID：16083081
> 
> 赞同：0
> 
> 时间：2013-04-18T12:32:50.780
> 
> 标签：c++

在 C 中，我们使用`memset()`函数将数据设置为 0（不仅用于初始化）。

我的数据可以通过另一种方法更改，我想重用它，然后我想在重用之前将其设置为 0

除了 C++ 之外，还有其他方法可以将数据设置为 0`memset()`吗？

```
class MYClass : public NameSpace::ParentClass {

    private:
        struct mystruct data

    public:
        void method();
};

void MYClass::method() {
    memset(&data, 0, sizeof(data)); // it's the C way. Are there another way in C++
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T12:34:12.203

在 C++ 中，您将调用对象的构造函数，或原始无构造函数对象的初始化程序。

重新初始化实际上应该很少发生（不要重用变量，创建新变量！它使程序流程更清晰）——但是当你需要它时，你可以重新分配一个新对象：

```
data = mystruct(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:35:25.500

在[POD 类型](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)上使用 memset 是可以的，否则必须使用构造函数进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:49:51.957

归零的 C++ 方式应如下所示：

```
struct mystruct
{
    int i;

    void Reset();
}

class MYClass : public NameSpace::ParentClass 
{
private:
    mystruct data

public:
    void method();
};

void mystruct::Reset()
{
    i = 0;
}

void MYClass::method() 
{
    data.Reset();
} 
```

# html - Video.js - 阻止点击播放功能

> ID：16083090
> 
> 赞同：7
> 
> 时间：2013-04-18T12:33:13.343
> 
> 标签：html, html5-video, video.js

我正在使用 video.js 将视频嵌入到 HTML 页面中。它被用作仅限 ipad 的网络应用程序，所以我相信它使用的是原生 HTML5 播放器。我正在尝试禁用点击播放功能（以便用户必须使用控件），但我在这样做时遇到了麻烦。

我尝试从视频/视频播放器/海报中取消绑定点击事件（使用 jQuery），并且我尝试使用 addevent 添加`e.preventDefault()`到视频中，但这似乎都不起作用。

附言。我发现有[几篇帖子](http://help.videojs.com/discussions/questions/280-disable-toggle-play)说你可以注释掉代码中的一行，但我的版本中不存在这一行——也许插件已被重写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-19T23:21:18.820

在这里检查

[https://github.com/videojs/video.js/blob/master/docs/api/vjs.MediaTechController.md#removecontrolslisteners](https://github.com/videojs/video.js/blob/master/docs/api/vjs.MediaTechController.md#removecontrolslisteners)

所以例如

```
v = videojs('scene04-video');
v.tech.removeControlsListeners(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-06T12:48:12.467

你可以试试这个。它帮助了我。只需将其添加到 css 文件中：

```
.video-js.vjs-playing .vjs-tech {
  pointer-events: none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-03T03:01:18.140

知道您使用的是哪个版本会很有帮助。这适用于我 4.1（最新的 api）

```
// Disable big-play-button
videojs.Player.prototype.options_.children.bigPlayButton = false;

// Override click handler on media object;
videojs.MediaTechController.prototype.onClick = function() {};

// Initialize video
var vid = videojs("video", {});

// Show controls (since in my browser it doesn't think it needs to inititally)
vid.controlBar.show(); 
```

更新：我应该澄清以上仅适用于 dev.js API（不是 prod/minified 版本）。在缩小版中，没有保留 MediaTechController 的 onClick 函数名称，您无法可靠地覆盖它。在这种情况下，您可以尝试手动断开 HTML5 和 Flash 点击事件：

```
videojs.Html5.off('click');
videojs.Flash.off('click');

var vid = videojs("video", {}, function() {
  this.bigPlayButton.hide();
});

// Again - show the controlbar (optionally)
vid.controlBar.show(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-25T19:23:46.960

检查这个：

```
.vjs-tech {
  pointer-events: none;
} 
```

# java - Appengine 文本搜索不适用于数字运算 = 和：对日期字段的查询

> ID：16083092
> 
> 赞同：1
> 
> 时间：2013-04-18T12:33:16.277
> 
> 标签：java, google-app-engine

我正在使用带有 sdk 1.7.5 的 google appengine 文本搜索服务，我保存了一个字段“created_time”，它是一个日期字段。当我尝试对 created_time 字段使用数字运算时，等于运算不返回任何结果（不返回匹配项）。

即使我使用 >= 或 <= 查询日期字段，返回的结果也是使用 > 或 < 条件处理的

查询

`created_time = 2013-04-13`或`created_time : 2013-04-13`（他们都没有工作），

`created_time >= 2013-03-13 AND created_time <= 2013-04-13`（返回这两个日期之间的结果，不包括那些日期）

# python - Python 消息框在不停止脚本的情况下显示

> ID：16083099
> 
> 赞同：2
> 
> 时间：2013-04-18T12:33:24.877
> 
> 标签：python, loops, messagebox

我有一个脚本可以在无限循环中随机创建 5 到 55 之间的数字。我的目标是在创建数字 55 时显示一个消息框。我已经尝试过easygui、tkinter、ctypes...并且我已经能够创建消息框，但是当这个框出现时，循环停止并且在用户单击de OK按钮之前它不会继续。有没有办法在不停止脚本的情况下显示消息框？

我一直在论坛里找资料，但我没有找到有这个问题的人，所以我希望有人能帮助我。

这是带有循环的代码的一部分：

```
 def contador():
  for x in range(1):
    aleatorio = random.randint(1,11)*5
    if aleatorio ==55:
        estado = "Red"
        ctypes.windll.user32.MessageBoxW(0, u"Error", u"Error", 0)
    elif aleatorio >=30:
        estado = "Red"

    else:
        estado = "Green"

    global t 
 t = threading.Timer(15.0, contador)
 t.start()

t = threading.Timer(15.0, contador)
t.start() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T16:14:40.857

大多数情况下的消息框（tkinter、gtk、winapi）是模态窗口。您可以创建自己的对话框，也可以使用线程。

```
import random
from Tkinter import Tk

def show_error(text):
    top = Toplevel(root)
    Label(top, text=text).pack()
    Button(top, text="OK", command=top.destroy).pack(pady=5)

def contador():
    for x in range(100):
        aleatorio = random.randint(1,11)*5
        if aleatorio == 55:
            estado = "Red"
            show_error('Some error occurred: %s' % x)
        elif aleatorio >=30:
            estado = "Red"
        else:
            estado = "Green"

contador() 
```

# regex - 替换字符串中的一个字母

> ID：16083100
> 
> 赞同：0
> 
> 时间：2013-04-18T12:33:26.310
> 
> 标签：regex, unix, sed

我在 unix 上有一些文本文件：

```
[{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000440},
{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000441}
] 
```

我需要使用 SED 工具编写正则表达式，找到最后一个符号 ] 并将其替换为 ，因此最终结果将是：

```
[{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000440},
{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000441}
, 
```

提前致谢。

已过期。谢谢大家的帮助，我已经检查过了，它工作正常，但是当 tag ] 与我的表达式位于同一行时，可能会出现一些情况。

```
[{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000440},
{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000441}] 
```

**复制自评论**

我已经写了这个正则表达式，但它不起作用`sed -i '$s/]$//'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:36:26.813

```
sed 's/]$/,/' 
```

应该成功。

用`$`我们表示行尾。

**测试**

```
$ echo "[{"creati]on_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000440},
{"creation_time":"2013-04-18 12:03:33","id":255,"type_id":100,"workflow":167000441}
]" | sed 's/]$/,/'
[{creati]on_time:2013-04-18 12:03:33,id:255,type_id:100,workflow:167000440},
{creation_time:2013-04-18 12:03:33,id:255,type_id:100,workflow:167000441}
, 
```

我们可以看到，如果我们把其他`]`他们坚持下去。（在`creati]on_time`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:38:24.003

根据您的输入，一个更安全的选择是这样的：

```
sed '/^ *\[/,/\] *$/ { /] *$/ s//,/; }' 
```

### 解释

`]`仅当它跟在前一个字符之后`[`且仅当它是该行的最后一个字符时才替换它。请注意，如果尖括号在同一行，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:38:33.740

```
sed '$s/]$/,/' 
```

这将仅`s/]$/,/`在最后一行 ( ) 上进行替换 ( ) `$`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:39:19.083

你应该使用：

```
sed -re 's/]$/,/' textfile.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T12:49:13.617

```
sed ':a ; N ; $\! ba; s/]\([^]]*\)$/,\1/' inputFile 
```

这会将inputFile 中的最后一个 ' **] ' 替换为 '** **,** '

# c# - 获取客户端内 WCF 数据服务的 IsAuthenticated 状态

> ID：16083107
> 
> 赞同：0
> 
> 时间：2013-04-18T12:33:46.547
> 
> 标签：c#, .net, wcf, wcf-data-services, wcf-security

我有一个 wcf 数据服务，它使用自定义基本身份验证对用户进行身份验证。我使用了 MSDN Blogs [OData and Authentication – Part 6 – Custom Basic Authentication](http://blogs.msdn.com/b/astoriateam/archive/2010/07/21/odata-and-authentication-part-6-custom-basic-authentication.aspx)上的教程。因此，在根据数据库对用户进行身份验证后，服务设置

```
var principal = new GenericPrincipal( new GenericIdentity("user") );
HttpContext.Current.User = principal; 
```

在我的服务中，我可以通过以下方式访问委托人身份验证状态

```
HttpContext.Current.Request.IsAuthenticated 
```

还有机会在我的 WPF 客户端上获得 IsAuthenticated 状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:54:24.200

对每个请求执行基本身份验证。您的客户端不保留任何与身份验证相关的状态（除了跳过 401 握手的预身份验证）。如果您的服务需要身份验证，那么如果您对 WCF 数据服务的调用成功，您就知道您已通过身份验证。如果您未通过身份验证，您将收到异常。

# selenium - 需求软件站点测试

> ID：16083109
> 
> 赞同：3
> 
> 时间：2013-04-18T12:33:51.097
> 
> 标签：selenium, selenium-webdriver, performance-testing

我们将 Demandware 用于我们的电子商务网站，因此他们为开发和测试提供沙箱。

我正在自动化该站点以进行回归测试。但是如果我在测试沙箱上运行自动化脚本，有时加载页面需要更长的时间，因为结果测试失败。

那么在 Demandware 相关网站上进行自动化测试的最佳方法是什么？

是否可以将站点部署到云？

是否可以提高测试相关沙箱的性能？所以测试不会失败？

你能提出你的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:09:32.827

使用开发实例进行这些测试，因为它使用 Akamai CDN 接近生产，因此页面加载会相对更快。如果沙盒/开发实例执行缓慢，最好查看 Demandware Business Manager 中的管道分析器，以了解性能瓶颈所在的位置。

# mysql - 这两个 MySQL 查询有什么区别？

> ID：16083114
> 
> 赞同：-5
> 
> 时间：2013-04-18T12:34:05.353
> 
> 标签：mysql, join

```
SELECT COUNT( companyId )
FROM Companies
 LEFT JOIN Cities ON Cities.cityId = Companies.cityId
GROUP BY Companies.companyId; 
```

# VS

```
SELECT COUNT( companyId )
FROM Cities
 LEFT JOIN Companies ON Cities.cityId = Companies.cityId
GROUP BY Companies.companyId; 
```

有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:36:31.213

在第一个查询中，左表是 Companies，在第二个查询中是 Cities。

> LEFT JOIN 关键字返回左表 (table_name1) 中的所有行，即使右表 (table_name2) 中没有匹配项。

第一个查询

> LEFT JOIN 关键字返回 Companies 表中的所有行，即使 Cities 表中没有匹配项

第二个查询

> LEFT JOIN 关键字返回 Cities 表中的所有行，即使 Companies 表中没有匹配项

[SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:38:36.443

我只是放一张图片（自我解释）

**MySQL离开JOIN**

![在此处输入图像描述](https://i.stack.imgur.com/HqCjE.png)

# wso2 - 如何知道 WSO2esb 中的客户端 Url

> ID：16083120
> 
> 赞同：0
> 
> 时间：2013-04-18T12:34:22.050
> 
> 标签：wso2, wso2esb, wso2dss

我从代理客户端收到消息我怎么知道客户端 url 意味着我想基于 url 做一个过滤条件所以在这种情况下我可以知道哪个 url 打到我我用一些示例代码尝试过它不能像这样我的代码

```
<property name="client_url" expression="get-property('From')"/> 
```

我也记录了它，但它不返回空日志是这样的

```
LogMediator To: /services/RoleDetails, MessageID: urn:uuid:695faeb5-b26e-405d-ab7b-ce27213f5cbe, Direction: request, client_url = null 
```

同样的事情

```
<property name="client_url" expression="get-property('To')"/> 
```

为他的日志

```
LogMediator To: /services/RoleDetails, MessageID: urn:uuid:a550ba76-201d-48c8-b069-3afdbb2b2db1, Direction: request, client_url = /services/RoleDetails 
```

我怎么知道客户 uri

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:34:07.960

我认为您需要从客户那里设置“发件人”属性。

但是你可以做这样的事情。

```
 <property name="from property------->" expression="get-property('axis2','REMOTE_ADDR')"/> 
```

和

```
<property name="from property------->" expression="get-property('axis2','REMOTE_HOST')"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:23:58.400

你必须从axis2上下文中得到它。参考这篇[文章](http://vvratha.blogspot.com/2011/11/retriving-clientiphost-within-sequence.html)

# xml - Actionscript 2：从变量字符串中获取实例名称

> ID：16083122
> 
> 赞同：1
> 
> 时间：2013-04-18T12:34:22.240
> 
> 标签：xml, flash, actionscript-2

我正在尝试从 XML 文件中获取文本（此文本稍后将被翻译，因此必须在外部保存）并将其导入 Flash (AS2) 中的单独动态文本框。文本框首先按行（例如 r1）然后按页（例如 p1）最后按文本行（例如 l1）组织，因此要更改第一行、第一页、第一行中的文本，您需要输入`r1.p1.l1.text = "sometext"`.

这是我的 XML 文件。我需要做的第一件事是`id`从每个`<txt>`标签中获取并将其保存为一个变量，我可以将其用作文本框标识符，但我不知道如何！

```
<?xml version="1.0" encoding="utf-8"?>
<txt id="r1.p1.l1">First line of text</txt>
<txt id="r1.p1.l2">Second line of text</txt> 
```

使用以下函数调用 XML 并相应地填充文本框 -`id`必须将其转换为实例名称；我试过使用一个变量`THE_XML_ID = this[someVar]`，但也无法让它工作......

```
function getData()
{
    var txt:XML = new XML();
    txt.ignoreWhite = true;
    txt.onLoad = function(success)
    {
        for (i = 0; i < txt.childNodes.length; i++){
            THE_XML_ID.text = txt.childNodes[i].childNodes[0];
        }
    };
    txt.load("assets/text/text.xml");
} 
```

总结一下：我需要`id`从 XML 文件中的每个`<txt>`标记中获取，并将其用作该文本行的文本框标识符 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:49:22.040

对于基本问题 - 来自变量字符串的实例名称 - 您将使用这样一个事实，即任何可以使用点符号访问的对象属性，例如`myObject.someProperty`也可以使用方括号和字符串访问，例如`myObject["someProperty"]`.

您可以在带有编号标识符的情况下使用它，例如您的情况下的 r1、p1 和 l1。因此，例如，如果变量`i`的值为 1（即在一个 foo 循环中）`r1["p"+i]`将引用与`r1.p1`. 并且假设代码在 r1 存在的范围内执行，您可以使用`this`, 和 do`this["r"+i]`来引用 r1。

因此，在您的情况下，您需要将 id="r1.p1.l2" 与 XML 分开，并使用上述方括号表示法代替 THE_XML_ID 来引用正确的文本框。您还可以重组 XML，以便更轻松地访问行号、页码和行号，例如通过使用`<txt page="1" row="1" line="1">First line of text</txt>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:19:20.873

如果您在 onLoad 方法中执行以下操作：

```
this['testText'].text = txt.childNodes[0].childNodes[0]; 
```

“this”指的是 XML 对象。尝试

```
_root['testText'].text = txt.childNodes[0].childNodes[0]; 
```

无论如何，您的方法将行不通，因为您无法进行如此深入的评估。正如评论中所建议的，最好使用另一种 XML 结构来简化定位，但如果您真的想保持这种逻辑，这里有一个工作示例：

```
// scope of your displayobjects, here they are on main timeline
var scope:MovieClip = _root; 
// get the id attributes and return the related displayobject
function getTargetFromId(id:String, scope:MovieClip):MovieClip {
    var target:MovieClip = scope;
    var path:Array = id.split('.');
    for (var i:Number=0;i<path.length;i++) {
       target = target[ path[i] ];
     }
     return target;
 }

function getData():Void{
  var txt:XML = new XML();
  txt.ignoreWhite = true;
  txt.onLoad = function(success) {
    for (i:Number = 0; i < txt.childNodes.length; i++){
       var id:String = txt.childNodes[i].attributes.id;
       getTargetFromId(id,scope).text = txt.childNodes[i].firstChild.toString();
    }
  }
  txt.load("assets/text/text.xml");
} 
```

# c# - 在按钮单击时使用 JQuery ajax 将数据保存到数据库

> ID：16083123
> 
> 赞同：0
> 
> 时间：2013-04-18T12:34:29.057
> 
> 标签：c#, jquery, webmethod

这是我的 Jquery ajax 方法：

```
 $(document).ready(function () {

    $("input[id$='btnBulten']").click(function () {
        //alert("dd");
        $.ajax({
            type: "POST",
            url: "http://URL/Controls/EBulten.ascx/EBultenSend",
            contentType: "application/json; charset=utf-8",
            data: "{nameSurname:" + $("input['id$='$txtNameSurname']").val() + " }",
            dataType: "json",
            success: function (msg) {
                alert("Mesajınız başarıyla iletildi");
            }
        });
    });
}); 
```

在代码隐藏代码中：

```
 [WebMethod()]
public static void EBultenSend(string nameSurname, string email, string IP, string position, string firmName)
{
    int bultenId = EBulten.InsertEbulten(nameSurname, email, IP, position, firmName);
} 
```

InsertEBulten 调用 SP 将数据保存到 DB。所有参数都来自文本框。我无法将数据保存到数据库。我该如何解决这个问题？通常，如果没有 WebMethod，如果我在客户端单击时使用此方法，它会将数据插入 DB。

# c# - 在SSIS脚本任务中为C#中的for循环转换字符串

> ID：16083126
> 
> 赞同：3
> 
> 时间：2013-04-18T12:34:35.930
> 
> 标签：c#, ssis

我刚刚花了一个多小时寻找问题的解决方案——现在我很好奇它为什么会起作用。当我执行一个包时，我在 SSIS 中遇到了这个错误：

![在此处输入图像描述](https://i.stack.imgur.com/uqviW.jpg)

我有一个正在访问变量的脚本任务。我已经正确地将它添加到脚本任务的 ReadOnlyVariables 集合中，并且确信我使用了正确的案例。这是我的脚本行，它不起作用：

```
string textToWrite = (string)Dts.Variables["User::TestNumber"].Value; 
```

最终我将其更改为：

```
string textToWrite = Dts.Variables["User::TestNumber"].Value.ToString(); 
```

一切正常。我的问题是：为什么之前失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:55:44.197

如果测试编号是整数，那么第一行代码会抛出异常，因为没有定义从 Int32 到字符串的类型转换，这就是我们有`ToString()`

# c# - 在 C# 中解码以 UTF-8 编码的西里尔文字符串所需的通用解决方案

> ID：16083133
> 
> 赞同：1
> 
> 时间：2013-04-18T12:34:44.343
> 
> 标签：c#

我是`ÐÐ¸ÑÐ¸Ð»Ð» ÐÐ°ÑÐ°Ð½Ð½Ð¸Ðº`从 C++ 组件中获取的，我需要对其进行解码。该字符串始终采用 UTF-8 编码。经过多次 RnD，我想出了以下解码方法。

```
String text = Encoding.UTF8
                      .GetString(Encoding.GetEncoding("iso-8859-1")
                      .GetBytes("ÐÐ¸ÑÐ¸Ð»Ð» ÐÐ°ÑÐ°Ð½Ð½Ð¸Ðº")); 
```

但这不是硬编码`"iso-8859-1"`吗，如果出现西里尔字符以外的字符会怎样。所以我想要一个通用的方法来解码一个 UTF-8 字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:17:56.043

当您键入文本时，计算机只能看到字节。在这种情况下，当您在 C++ 程序中键入西里尔字符时，计算机会将每个字符转换为其对应的 UTF-8 编码字符。

```
string typedByUser = "Привет мир!";
byte[] input = Encoding.UTF8.GetBytes(typedByUser); 
```

然后你的 C++ 程序出现，查看字节并认为它是 ISO-8859-1 编码的。

```
string cppString = Encoding.GetEncoding("iso-8859-1").GetString(input);
// ÐÑÐ¸Ð²ÐµÑ Ð¼Ð¸Ñ! 
```

你对此无能为力。然后你得到错误编码的字符串，并且不得不*假设*它是错误的 ISO-8859-1 编码的 UTF-8。这个假设被证明是正确的，但您无法以任何方式确定这一点。

```
byte[] decoded = Encoding.GetEncoding("iso-8859-1").GetBytes(cppString);
string text = Encoding.UTF8.GetString(decoded);
// Привет мир! 
```

请注意，ISO-8859-1 是 ISO 西欧编码，与原始输入是西里尔文这一事实*无关。*例如，如果输入是日文 UTF-8 编码，您的 C++ 程序仍会将其解释为 ISO-8859-1：

```
string typedByUser = "こんにちは、世界！";
byte[] input = Encoding.UTF8.GetBytes(typedByUser);
string cppString = Encoding.GetEncoding("iso-8859-1").GetString(input);
// ããã«ã¡ã¯ãä¸çï¼
byte[] decoded = Encoding.GetEncoding("iso-8859-1").GetBytes(cppString);
string text = Encoding.UTF8.GetString(decoded);
// こんにちは、世界！ 
```

C++ 程序将*始终*将输入解释为 ISO-8859-1，无论它是西里尔文、日文还是纯英文。所以这个假设总是正确的。

但是，您还有一个额外的假设，即原始输入是 UTF-8 编码的。我不确定这是否总是正确的。它可能取决于程序、它使用的输入机制以及操作系统使用的默认编码。例如，C++ 程序假设原始输入是 ISO-8859-1 编码的，这是错误的。

* * *

顺便说一句，字符编码一直存在问题。一个很好的例子是[一位法国学生给他的俄罗斯朋友的一封信，](http://img1.wikia.nocookie.net/__cb20110317150525/worldlanguages/images/f/fa/Letter_to_Russia_with_krokozyabry.jpg)信封上的西里尔地址被错误地写为 ISO-8859-1，并被邮政员工解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:56:18.527

字符源只能以一种编码传输，这意味着它可以是 iso-8859-1 或其他编码，但不能同时使用两者（这意味着您可能首先对逆向工程西里尔字母有误）

您能否发布您输入的预期 UTF-8 输出？

# jquery - Jquery 等待 Ajax 调用完成

> ID：16083136
> 
> 赞同：0
> 
> 时间：2013-04-18T12:34:53.253
> 
> 标签：jquery, ajax, each

如果有这个 jQuery 脚本将文件从 ftp 服务器 1 移动到 ftp 服务器 2。它确实有效，但我想一个一个移动文件，而不是一次移动所有文件。不用“async=false”冻结浏览器..

```
 <script>
    var files = new Array();
    files[1]="testfile1.txt";
    files[2]="testfile2.txt";
    files[3]="testfile3.txt";

    $('#button').click(function() {
      $.each( files, function( key, value ) {
        jQuery.ajax({
        url: '/move.php',
        method: 'GET',
        data: {
        file: value
        },
        success: function(data) {
          $('#'+ key).html(data);
        }
      })
    });
  });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:43:57.493

创建一个函数，该函数将获取`files`数组中的下一项，执行 AJAX 调用，然后在该`success`AJAX 调用的回调中调用自身。

```
var files = new Array(), key = 1;
// arrays are generally indexed starting at 0, but I left the below as is
files[1]="testfile1.txt";
files[2]="testfile2.txt";
files[3]="testfile3.txt";

function moveFile() {
    if(key < files.length) { // there's a next element
        var value = files[key];
        $.ajax({
            url: '/move.php',
            method: 'GET',
            data: {
                file: value
            },
            success: function(data) {
                $('#' + key++).html(data);
                moveFile();
            }
        });
    }
}

$('#button').click(moveFile); 
```

我考虑使用`files.pop();`来获取下一个元素，但由于我不确定您是否希望数组在运行后保持完整，所以我决定跟踪索引以访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:44:13.267

你可以递归地做到这一点：

```
var files = new Array();
    files[1]="testfile1.txt";
    files[2]="testfile2.txt";
    files[3]="testfile3.txt";

$('#button').click(function() { moveFile(files); });

function moveFile(fileArray) {
  var currentFile = fileArray.shift();
  $.ajax({
    url: '/move.php',
    method: 'GET',
    data: {
      file: currentFile
    }
  }).done(function () {
    if(fileArray.length > 0)
      moveFile(fileArray);
  });
} 
```

# routes - ZfcUser 替换路由

> ID：16083142
> 
> 赞同：1
> 
> 时间：2013-04-18T12:35:11.263
> 
> 标签：routes, zend-framework2, zfcuser, bjyauthorize

我正在尝试将 zfcuser 路由 à 我模块的根目录。我的意思是我尝试删除“/user/login?...”并将其替换为“/login?...”这是重命名根的方法：http: [//juriansluiman.nl/en/article/ 117/use-3rd-party-modules-in-zend-framework-2](http://juriansluiman.nl/en/article/117/use-3rd-party-modules-in-zend-framework-2)

我试图为 zfcuser 设置“/”路由，但它不起作用（bjyauthorizestrategy 发送异常）。我怎么能路由 zfcuser 孩子得到我正在寻找的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:28:52.237

部分答案： [https ://github.com/ZF-Commons/ZfcUser/issues/202](https://github.com/ZF-Commons/ZfcUser/issues/202)

完整答案：现在我在 module.config.php 中的代码如下所示：

```
 'zfcuser' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route' => '', // the route is void isntead of default 'user'
            ),
    ),
    'zfcuser-login' => array(
        'type' => 'Literal',
        'options' => array(
            'route' => '/login',
            'defaults' => array(
                'controller' => 'zfcuser',
                'action' => 'login',
            ),
        ),
    ),
    'zfcuser-authenticate' => array(
        'type' => 'Literal',
        'options' => array(
            'route' => '/authenticate',
            'defaults' => array(
                'controller' => 'zfcuser',
                'action' => 'authenticate',
            ),
        ),
    ),
    'zfcuser-logout' => array(
        'type' => 'Literal',
        'options' => array(
            'route' => '/logout',
            'defaults' => array(
                'controller' => 'zfcuser',
                'action'     => 'logout',
            ),
        ),
    ),
    'zfcuser-register' => array(
        'type' => 'Literal',
        'options' => array(
            'route' => '/register',
            'defaults' => array(
                'controller' => 'zfcuser',
                'action'     => 'register',
            ),
        ),
    ),
    'zfcuser-changepassword' => array(
        'type' => 'Literal',
        'options' => array(
            'route' => '/change-password',
            'defaults' => array(
                'controller' => 'zfcuser',
                'action'     => 'changepassword',
            ),
        ),                        
    ),
    'zfcuser-changeemail' => array(
        'type' => 'Literal',
        'options' => array(
            'route' => '/change-email',
            'defaults' => array(
                'controller' => 'zfcuser',
                'action' => 'changeemail',
            ),
        ),                        
    ), 
```

我也想使用自定义模板登录/注册等，所以我把这个：

```
'view_manager' => array( 
    ...
    'template_path_stack' => array(
          // to load our module view
          'YOURMODULENAME'  => __DIR__ . '/../view', // zfcuser have to load after 
          your module in your application.config.php !!!
    ), 
```

我希望它会有所帮助；）

# browser - Opera 不支持 createObjectURL

> ID：16083145
> 
> 赞同：1
> 
> 时间：2013-04-18T12:35:14.957
> 
> 标签：browser, blob, opera

检查此地址：[http](http://caniuse.com/#feat=bloburls) ://caniuse.com/#feat=bloburls您可以看到这是唯一不支持此功能的桌面浏览器。我怎样才能找到解决方法而无需对我的代码进行太多更改？

```
var jpeg = NewBlob(imgData.array.buffer, "image/jpeg");
 var url = DOMURL.createObjectURL(jpeg); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T01:28:43.293

如果您的用例是显示用户选择的图片的缩略图，您可以为她上传的文件创建一个数据 uri。在 Opera 12.13 下测试，即使使用几个 meg 图像也可以工作：

```
<script>
function handleFiles(files) {
    var reader = new FileReader();
    reader.onload = function(evt) {
        document.getElementById("img1").src = evt.target.result;
    }
    reader.readAsDataURL(files[0]);
}
</script>

<img id="img1">
<form>
    <input type="file" onchange="handleFiles(this.files)">
</form> 
```

# cassandra - 将 Pig 与 Cassandra CQL3 一起使用

> ID：16083151
> 
> 赞同：1
> 
> 时间：2013-04-18T12:35:31.293
> 
> 标签：cassandra, apache-pig, cql, cql3

当尝试**针对 CQL3 创建的 Cassandra Schema 运行 PIG 时**，

```
-- This script simply gets a row count of the given column family  
rows = LOAD 'cassandra://Keyspace1/ColumnFamily/' USING CassandraStorage();
counted = foreach (group rows all) generate COUNT($1);
dump counted; 
```

我收到以下错误。

```
Error: Column family 'ColumnFamily' not found in keyspace 'KeySpace1' 
```

我知道这是设计使然，但我一直无法找到将 CQL3 表加载到 PIG 中的正确方法。

有人可以指出我正确的方向吗？是否缺少一些文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T17:29:28.717

Cassandra 1.2.8 现在支持此功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T18:29:06.297

在 Pig 中访问 Cql3 表的最佳方法是使用 CqlStorage 处理程序

语法类似于您上面的语法

```
row = Load 'cql://Keyspace/ColumnFamily/' Using CqlStorage() 
```

更多信息[在开发博客文章中](http://www.datastax.com/dev/blog/cql3-table-support-in-hadoop-pig-and-hive)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T22:16:07.767

根据此[https://github.com/alexliu68/cassandra/pull/3](https://github.com/alexliu68/cassandra/pull/3)，看来此修复程序计划用于 Cassandra 的 1.2.6 版本。听起来他们正试图在不久的将来解决这个问题，但当然没有确定的 ETA。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T03:02:51.430

正如 e90jimmy 所说，它在 Cassandra 1.2.8 中得到支持，但是我们在使用计数器列类型时遇到了问题。这已由 Alex Liu 修复，但由于 1.2.7 中的回归问题，补丁无法继续：

[https://issues.apache.org/jira/browse/CASSANDRA-5234](https://issues.apache.org/jira/browse/CASSANDRA-5234)

要更正此问题，请等到 2.0 准备好生产或下载源代码，自行应用上述链接中的补丁并重建 cassandra .jar。现在为我工作...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T14:55:38.983

正如您所提到的，这是设计使然，因为如果更新节俭以允许这样做，它将损害向后可计算性。与其使用 CQL 创建键空间和列族（我猜你使用了 cqlsh），不如尝试使用[C* CLI](http://www.datastax.com/docs/1.2/cql_cli/using_cli)。

看看这些问题：

*   [https://issues.apache.org/jira/browse/CASSANDRA-4924](https://issues.apache.org/jira/browse/CASSANDRA-4924)
*   [https://issues.apache.org/jira/browse/CASSANDRA-4377](https://issues.apache.org/jira/browse/CASSANDRA-4377)

# c# - EF5 Code First：检测它是否创建了数据库，以便我可以运行 ALTER 语句

> ID：16083165
> 
> 赞同：0
> 
> 时间：2013-04-18T12:36:39.727
> 
> 标签：c#, .net, sql, entity-framework

我是 Entity Framework 5 的新手。我们的团队正在使用`Code First`工作流。

在我开始我的主要问题之前，*让我首先向您展示我尝试过的东西* ^(（*有史以来的终极评论`:D`*）)。

```
public class MyDBContext : CDBContext
{
    public MyDBContext() : base(connString) { }

    public MyDBContext(string connStr) : base(connStr) { }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // removes some conventions
        modelBuilder.Conventions.Remove<ManyToManyCascadeDeleteConvention>();
        // ........

        // model configurations which contains mappings
        modelBuilder.Configurations.Add(new AccountConfiguration());
        // ........

        // calls base OnModelCreating
        base.OnModelCreating(modelBuilder);
    }

    // list of all Entity
    public DbSet<Account> Account { get; set; }
} 
```

`MyDBContext`是我创建的类，它继承自`CBDContext`包含重写方法并且也继承自`DBContext`. 我遇到的问题之一是实体框架不处理字段唯一性。我已经在他们的网站上阅读了关于[使用 Fluent API 配置/映射属性和类型](http://msdn.microsoft.com/en-us/data/jj591617)的文章，但我找不到任何配置来将属性设置为唯一。

所以我为了设置字段唯一所做的就是在创建过程中手动运行几个 ALTER sql 语句，

```
using (MyDBContext _context = new MyDBContext(connString))
{
    if (_context.Database.CreateIfNotExists()) 
    {
        _context.Database.ExecuteSqlCommand("ALTER TABLE Account ADD CONSTRAINT UQ_Account_AccountNumber UNIQUE(AccountNumber)");
        _context.Database.ExecuteSqlCommand("ALTER TABLE Account ADD CONSTRAINT UQ_Account_GUID UNIQUE(GUID)");
        // .... more on this in the following lines ...
    }
} 
```

我的问题：

1.  我对实体框架*没有任何配置或数据注释*来*设置字段唯一性*是否正确？
2.  有没有办法在运行时检测或知道 EF 是否创建了数据库，以便我可以将此语句移动或隐藏`if (_context.Database.CreateIfNotExists())`到可以覆盖的可用方法中？

我真正想要的是`if (_context.Database.CreateIfNotExists())`从 using statemnt 中删除并将其放在其他地方或内部`MyDBContext`，这样我的代码将如下所示，

```
using (MyDBContext _context = new MyDBContext(connString))
{
    Account _acc = new Account()
    // ...Account properties ...

    _context.Account.Add(_acc);
    _context.SaveChanges();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:04:03.467

You should take a look at [Code First Migrations](http://msdn.microsoft.com/en-us/data/jj591621.aspx), more specific at the *Data Motion / Custom SQL* and later sections - this is might the way to achieve your desired result. Your migration class can look like this:

```
public partial class AddUniqueConstrains : DbMigration
{
    public override void Up()
    {
        Sql("ALTER TABLE Account ADD CONSTRAINT UQ_Account_AccountNumber UNIQUE(AccountNumber)");
        Sql("ALTER TABLE Account ADD CONSTRAINT UQ_Account_GUID UNIQUE(GUID)");
    }

    public override void Down()
    {
        Sql("ALTER TABLE Account DROP CONSTRAINT UQ_Account_AccountNumber UNIQUE");
        Sql("ALTER TABLE Account DROP CONSTRAINT UQ_Account_GUID");
    }
} 
```

You can also explore other options described in answers to this question: [Unique Constraint in Entity Framework Code First](https://stackoverflow.com/questions/4413084/unique-constraint-in-entity-framework-code-first)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:09:07.020

If you don't use (or cannot use) EF migrations you can use custom initializer as mentioned in [this answer](https://stackoverflow.com/questions/5701608/unique-key-with-ef-code-first/5701702#5701702). The custom initializer will execute a `Seed` method after creating the database = only once when database doesn't exist. If you need to incrementally develop the database initializer itself will not help you (that is what migrations are for).

# html - html 4.01 中的 Like Box 代码

> ID：16083166
> 
> 赞同：-1
> 
> 时间：2013-04-18T12:36:41.280
> 
> 标签：html, facebook-likebox

我正在尝试向我们的主页添加一个 Like Box 并使用了 iFrame 代码，但它不起作用。我们的主页是 html 4.01 过渡版。Facebook 给我们的代码是：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fsome.page&amp;width=172&amp;height=590&amp;show_faces=true&amp;colorscheme=light&amp;stream=true&amp;border_color&amp;header=true&amp;appId=123456789012345" 
  scrolling="no" frameborder="0" allowTransparency="true" 
  style="border:none; overflow:hidden; width:172px; height:590px;" ></iframe> 
```

需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:05:12.333

在字符串中`likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fsome.page&amp;`替换`some.page`为您的页面网址（例如 facebook.com/ 之后的任何内容）

# mysql - Mysql 选择 user_ID 并使用这些来构造 INSERT 语句，可能吗？

> ID：16083168
> 
> 赞同：0
> 
> 时间：2013-04-18T12:36:49.387
> 
> 标签：mysql, sql

是否可以联合这两个mysql命令？

我需要`user_id`从第一个 sql 命令中，在`INSERT`语句中使用。

```
SELECT DISTINCT(user_id) FROM wp_usermeta WHERE meta_key = "wp_capabilities";

INSERT INTO wp_usermeta (user_id, meta_key, meta_value)
VALUES ('user_id', 'wp_s2member_auto_eot_time', 1366286009),
       ('user_id', 'wp_s2member_paid_registration_times', 'a:2:{s:5:"level";s:10:"1366285409";s:6:"level1";s:10:"1366285409";}'); 
```

第一条语句将返回可能相当长的 user_id 列表。我希望这些 id 的 INSERT 中的每一个都添加各自的 2 行。

我可能会编写一个 php 脚本来做同样的事情，将第一个列表放入一个数组中，然后使用 php 执行并运行每个 INSERT。但我想了解更多关于 sql 的知识。我想要达到的目标有可能吗？

![在此处输入图像描述](https://i.stack.imgur.com/cflOH.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:30:30.560

您的表 wp_usermeta 是否还有其他列？它有主键或其他索引吗？

（我很抱歉在“答案”中要求澄清，但系统不允许我对其他人的问题添加评论 - 但是。一旦您添加一些澄清，我会将这个“答案”修改为实际答案回答你的问题。）

# linux - 如何有效地组织脚本以便将它们置于版本控制之下？

> ID：16083171
> 
> 赞同：4
> 
> 时间：2013-04-18T12:36:55.700
> 
> 标签：linux, git, bash, version-control

我有一个不断增长的脚本列表，从 bash 中的简单单行脚本到更复杂的 python 脚本。目前我从一个`~/.bash_functions`文件中获取一个衬垫，而我将更复杂的脚本放入`/usr/local/bin`.

我想将所有脚本置于版本控制之下，以便它们可以轻松移植到不同的机器上。由于不仅我的自定义脚本位于 下`usr/local/bin`，而且还有其他应用程序的脚本，我可以简单地创建一个子目录，例如：

```
/usr/local/bin/scripts/
                      |-python
                      |-ruby
                      |-bash 
```

然后从所述脚本文件夹中创建一个git repo？或者是否有更好、更规范的方式来实际组织和控制脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:54:36.123

我会安装它们`~/bin`并将其添加到您的`$PATH`. *然后，您可以根据需要对*bin 目录进行源代码控制。

# php - 正则表达式 - preg_replace php - 理解

> ID：16083176
> 
> 赞同：4
> 
> 时间：2013-04-18T12:37:16.647
> 
> 标签：php, regex, preg-replace, expression

我有以下代码，我试图了解这段代码到底做了什么，但几次之后我没有弄清楚......

OBS：此代码是很久以前制作的，用于处理来自用户的一些输入，例如城市、州等。

```
preg_replace('/\A[\w\.\-\+]+\z/', '', $anyString) 
```

我已经知道的：

`\A`= 在输入的开头匹配

`\w`= 匹配任何单词

`\. , \- , \+`= 匹配字符。, 和 +

`\z`= 匹配字符串的结尾

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T12:41:51.253

```
\A     - start at the beginning
  [    - match any of the following:
    \w   - a word character (a-z, A-Z, 0-9, underscore)
    \.   - a dot
    \-   - a dash
    \+   - a plus
  ]
  +     - at least one time, but possibly more.
\z     - end at the end 
```

所以整个字符串，从头到尾，必须由字母、数字、下划线、点、破折号或加号组成，并且必须至少有一个字符长。

如果是，请将其替换为空字符串（我很好奇为什么这很有用）。

# asp.net - SQL - 使用 Scope_Identity() 插入 - 获取记录 ID

> ID：16083181
> 
> 赞同：3
> 
> 时间：2013-04-18T12:37:27.937
> 
> 标签：asp.net, sql, vb.net, tsql, sql-server-2012

我有一个用 VB.NET 编写的 ASP.NET 页面，它`GridView`通过使用`SELECT`语句将项目放入 a 中，`INNER JOIN`并且还允许您将项目添加到发票中。

`INNER JOIN``items`从和获取数据`project_items`。

```
SELECT Items.item_id, Items.item_name, Items.item_cost, project_items.item_quantity
FROM Items 
INNER JOIN project_items
ON items.item_id = project_items.item_id 
WHERE project_items.project_id = @parameter 
```

`@parameter is` `Session("ProjectID")`

（有一个外键`project_items.item_id -> items.item_id`。）

我试图在 VB.NET 中使用 SQL 语句来尝试同时 INSERT 到两个表中。我尝试的是通过使用该数据来获取`item_id`创建的最后一条记录并插入到另一个表 ( ) 中。`project_items`但是，数据仅被输入到第一个表中。

知道我能做什么吗？

这是代码：

```
Protected Sub btnAddItem_Click(sender As Object, e As EventArgs) Handles btnAddItem.Click

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim addItemComm As String = "SELECT item_id FROM project_items WHERE project_id=@ProjectID"
        Dim user_id_select As New Integer

        Dim addItemSQL As New SqlCommand

        conn.Open()

        addItemSQL = New SqlCommand(addItemComm, conn)
        addItemSQL.Parameters.AddWithValue("@ProjectID", Convert.ToInt32(Session("ProjectID")))

        Dim datareader As SqlDataReader = addItemSQL.ExecuteReader()

        datareader.Close()
        conn.Close()

        Dim AddNewItemComm As String = "INSERT INTO Items (item_name,  item_cost, item_code) VALUES (@ItemName, @ItemCost, @ItemCode); SELECT SCOPE_IDENTITY()"
        Dim AddNewItem2Comm As String = "INSERT INTO project_items (item_id, project_id, item_quantity) VALUES (@ItemID, @ProjectID, @ItemQuantity) "
        Dim AddNewItemSQL As New SqlCommand

        conn.Open()

        AddNewItemSQL = New SqlCommand(AddNewItemComm, conn)
        AddNewItemSQL.Parameters.AddWithValue("@ItemName", txtItemName.Text.Trim)
        AddNewItemSQL.Parameters.AddWithValue("@ItemCost", Convert.ToInt32(txtItemCost.Text))
        AddNewItemSQL.Parameters.AddWithValue("@ItemCode", txtItemCost.Text.ToString.ToUpper)

        Dim ItemId As Integer

        ItemId = AddNewItemSQL.ExecuteScalar()

        AddNewItemSQL.ExecuteNonQuery()

        conn.Close()

        conn.Open()

        AddNewItemSQL = New SqlCommand(AddNewItem2Comm, conn)

        AddNewItemSQL.Parameters.AddWithValue("@ItemID", ItemId)
        AddNewItemSQL.Parameters.AddWithValue("@ProjectID", Convert.ToInt32(Session("ProjectID")))
        AddNewItemSQL.Parameters.AddWithValue("@ItemQuantity", Convert.ToInt32(txtItemQuantity.Text))

        AddNewItemSQL.ExecuteNonQuery()

        conn.Close()

    End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:03:23.883

你为什么首先在多个语句中这样做？为什么不：

```
INSERT dbo.Items (item_name,  item_cost, item_code) 
  OUTPUT inserted.ItemID, @ProjectID, @ItemQuantity 
  INTO dbo.project_items(item_id, project_id, item_quantity)
VALUES (@ItemName, @ItemCost, @ItemCode); 
```

现在您只需调用一个`ExecuteNonQuery()`，您的应用程序就不必关心实际`SCOPE_IDENTITY()`生成的值。`SCOPE_IDENTITY()`（当然，如果需要，您仍然可以使用`ExecuteScalar`- 但正如 Nenad 正确指出的那样，选择一个而不是同时调用两者。）

由于我们现在知道这里有一个显式外键，即使我们不能使用该`OUTPUT`子句，我们仍然可以将您的 C# 代码减少到一次调用。

```
DECLARE @i INT;

INSERT dbo.Items (item_name,  item_cost, item_code) 
  SELECT @ItemName, @ItemCost, @ItemCode;

SELECT @i = SCOPE_IDENTITY();

INSERT dbo.project_items(item_id, project_id, item_quantity)
  SELECT @i, @ProjectID, @ItemQuantity 

SELECT @i; -- if necessary 
```

将其放入存储过程中会更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:55:56.437

```
ItemId = AddNewItemSQL.ExecuteScalar()

        AddNewItemSQL.ExecuteNonQuery() 
```

相邻的这两行将执行该命令两次。您应该删除第二个 - ExecuteNonQuery。这会将您的数据插入两次`Items`- 两个相同的行但具有不同的 ID。

由于您只从第一行检索 ItemID，因此应该将那个插入到 中`project_items`，但最后插入到 items 中的另一个将没有匹配的行。

此外 - 从按钮单击方法开始的完整部分之前`Dim AddNewItemComm As String`- 打开和关闭 DataReader 并且不对其执行任何操作似乎完全没有必要。

# templates - 无法从模型中获取数据以显示在模板 Ember.js 中

> ID：16083183
> 
> 赞同：0
> 
> 时间：2013-04-18T12:37:33.120
> 
> 标签：templates, ember.js, models

我的代码在这里：http: [//jsfiddle.net/FNn4R/4/](http://jsfiddle.net/FNn4R/4/)我无法在模板中显示输出模型（带有出站消息的模型）。

HTML

```
<script type="text/x-handlebars" data-template-name="messages">
    Hello <b>{{App.username}}</b><br />
    {{#each outgoings in model}}
    <h4>{{outgoings.vehicle_reg}}</h4>
    <p>{{outgoings.message_subject}}</p>
    {{/each}}
</script> 
```

JS

```
App.MessagesRoute = Ember.Route.extend({
    model: function() {
        return App.Outgoings.all();
    },
    renderTemplate: function() {
        this.render('header-messages', {
            into: 'application',
            outlet: 'header'
        });
        this.render('messages', {
            into: 'application',
            outlet: 'content'
        });
    }
});

App.Outgoings = Ember.Object.extend();

App.Outgoings.reopenClass({
    all: function() {
        var outgoings = [];
        var apiPage = "messages";
        var parameters_string = "action=outgoing";
        var url = "http://do-web-design.com/clients/carbuddy/index.php/api/";
        var url = url + apiPage + "?" + parameters_string + "&username=" + "will" + "&password=" + "1234";
        // console.log(url);
        var response = $.ajax({
            type: "GET",
            url: url,
            dataType: "text json",
            success: function(data){
                return data;
                // return JSON.parse(data)
                alert('Its working');   //It will alert when you ajax call returns successfully.
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log(JSON.stringify(jqXHR));
                console.log("AJAX error: " + textStatus + ' | ' + errorThrown);
            }
        }).done(function(response) {
            response.forEach( function (outgoing) {
                outgoings.push( App.Outgoings.create(outgoing) );
            });
        });
        return outgoings;
    }
}); 
```

我的 Ajax 调用正在获取数据，但它只是没有将其复制到模型中或将其发送到模板。

# java - if语句返回循环

> ID：16083186
> 
> 赞同：-5
> 
> 时间：2013-04-18T12:37:50.770
> 
> 标签：java

只是一个声明：我是java的初学者。

编写一个名为 numUnique 的方法，它接受三个整数作为参数，并返回三个整数中唯一整数的个数。例如，调用 numUnique(18, 3, 4) 应该返回 3，因为参数有 3 个不同的值。相比之下，调用 numUnique(6, 7, 6) 将返回 2，因为三个参数中只有 2 个唯一数字：6 和 7。

```
public int numUnique(int x,int y,int z){
    if(x==y||y==z){
    }
    return 1;

    else if(x!=y||y!=z){

    }
    return 2;

} 
```

我对 if 和 return 的关系很困惑。我总是把 return 放在 if 语句中。但我不明白为什么它会生成一条错误消息。如果某些事情完成了，我会在循环中返回。为什么它是错误的。但是另一方面，println 语句可以放在 for 循环中。

另一个问题，因为这个问题，我也尝试尝试使用 if else。但我的第一个条件是 if 并且我返回它。所以在那之后我在第一次返回后放置 else if，它又给了我错误。

我会很感激有人会向我解释，我会自己更改代码。请不要给我完整的代码。谢谢。

编辑*顺便说一句，我阅读了所有评论，我终于明白了。这是我自己制定的代码（：

```
public static int numUnique(int x, int y, int z) {
    if(x==y && y==z){
        return 1;
    }else if(x==y && y!=z || y==z && z!=x ||  x==z && y!=z ){
        return 2;
    }
    return 3;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:40:17.650

return 语句应放在大括号内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T12:59:13.317

为了让您清楚地了解“return”语句，我会说在一个代码块中只能有一个 return 语句，即 {...}。

“return”语句用于返回给调用者，它必须是块的最后一条语句。

正如您所建议的，我没有为您提供完整的代码，而是让您了解“return”语句的用法。

在您的代码中，您在一个块中编写了两个“返回”语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:40:51.707

你想要的语法如下所示：

```
 public static  int numUnique(int x,int y,int z){
        if(x==y||y==z){
            return 1;
        }else if(x!=y||y!=z){
            return 2;
        }
        return 3;
    } 
```

也许这段代码更容易理解：

```
public static int numUnique(int x, int y, int z) {
    if (x == y && x == z && y == z) {
        return 3;
    } else if (x != y && x != z && y != z) {
        return 1;
    }
    return 2;
} 
```

伪代码如果

```
if( condition ){
 // do something if condition is true
} 
```

伪代码 If then else

```
if( condition){
 // do something
}else{
 // do something if condition is false
} 
```

伪代码 elseif

```
if( condition ){
// do something
}else if(condition2){
// do something, only if condition2 is true, if condition 1 is true, you never will be here
}else{
// do something, your only here if the two conditions above were false
} 
```

return 语句，立即停止执行（有一些例外，例如：finally 块）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T12:41:26.167

我认为您需要在 if-else 块中编写返回语句，否则它将始终返回 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T12:41:41.357

因为 if 是一个条件流，我可能会或可能不会运行（取决于条件），

但是如果你的方法有返回类型，它应该在每种情况下都返回。但在后一种情况下，（如果条件为假），它不会找到任何回报。

所以如果你写

```
public int value(boolean flag){
if(flag){
return 0; //only reachable if flag is true, else value can not return from here
}
} 
```

这是错误的，因为如果 flag 为 false 方法将不会返回任何内容。所以你必须在区块结束时`else`或之后提供回报`if`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T12:42:04.597

使用 s 只存储一次值的事实`Set`......

```
public int numUnique(int x,int y,int z){
    Set<Integer> number = new HashSet<Integer>();
    number.add(x);
    number.add(y);
    number.add(z);

    return numbers.size();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T12:44:40.263

首先，您的回报在`if`声明之外，它们应该在里面。因为如果你写：

```
if(Something) {

}
return 1; 
```

然后 1 将始终返回，因为您的`if`为空。`return 1`如果您只想将`if(Something)`其写在`if`正文中：

```
if(Something) {
    return 1;
} 
```

其次，你的逻辑不好。您需要检查：

*   如果 x == y == z 那么它们都是相等的。
*   如果 x == y 和 x != z 那么你应该返回 2。
*   如果 x != y != z 那么你应该返回 0。
*   ……

您需要涵盖所有情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-18T13:17:39.570

您的代码格式错误：

if-else 语句如下：

```
if { code }
else { code } 
```

所以，`if`和`else`积木成对。但是你有：

```
if (condition) { code }
code
else { code }
code 
```

所以，`code`上面的单词`else`打破了这对，并且`else`保持孤立，因此你的程序在语法上是不正确的。

你“想要”做：

```
if (x==y || y == z) {
   return 1;
}
else if (x != y || y != z) {
   return 2;
} 
```

此外，如果`if`（或`else`）块只有一行，您可以删除括号：

```
if (x==y || y == z)
   return 1;
else if (x != y || y != z)
   return 2; 
```

更重要的是，您的算法不能解决您的问题，¿ 3 个唯一值怎么样？您应该检查更多情况（所有不同、所有相同或只有一种不同）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T12:51:35.690

您必须将 return 语句放在 if 和 else 的块中：

```
public int numUnique(int x,int y,int z){
  if(x==y||y==z){
    return 1;
  }
  else if(x!=y||y!=z){
    return 2;
  }
} 
```

它失败了，因为编译器认为，您在每个路径中都没有函数的 return 语句。

# windows - 如何创建快捷方式以从命令行启动具有管理员权限的应用程序？

> ID：16083187
> 
> 赞同：10
> 
> 时间：2013-04-18T12:37:56.193
> 
> 标签：windows, batch-file, hyperlink, cmd, inno-setup

我有一个安装程序（Inno-Setup），它将我的应用程序安装到用户定义的路径。在安装例程结束时，我想创建一个以管理员权限启动应用程序的快捷方式。该解决方案适用于从 winXP 到 Win7 的所有 win 版本。

我能做些什么来实现这一目标？

我知道[可以使用批处理脚本来执行讨厌的 vb-script](https://superuser.com/questions/394848/create-a-shortcut-with-administrator-rights-for-hosts-file-in-win-7)。缺点是 cmd-window 弹出窗口，我猜它只适用于 win7。

我还尝试了`mklink`创建超链接的命令，但它不起作用，因为无法传递设置管理员权限的参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T13:46:37.117

您可以添加一个注册表项，告诉 Windows 以管理员身份执行您的程序：

在 下，只需添加一个值为`HKCU\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers`的键（REG_SZ）。启动 exe 时，系统会提示您进行管理员访问。`<Path to your exe>``RUNASADMIN`

有了它，您可以像使用 Inno-Setup 一样简单地创建可执行文件的普通快捷方式。

如果要通过 cmd 或批处理文件执行此操作，可以使用以下命令：

```
reg add "HKCU\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers" /v "<Path to your exe>" /t REG_SZ /d RUNASADMIN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:49:16.827

“以管理员身份运行”是可执行文件的属性，而不是快捷方式。您应该添加使 Windows 提示提升[所需的清单。](https://stackoverflow.com/a/7322232/588306)

要在 Windows XP 上执行此操作，您需要使用`runas`动词 with`ShellExecute()`以作为不同的用户运行，但这将删除任何访问本地配置文件的能力。当它发现它没有以完全管理员访问权限运行时，可以从您的 exe 中完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T15:55:19.270

创建快捷方式后，将其第 21 个字节（位置 0x15）更改为 32（0x20），使其“以管理员身份运行”。将其更改回 0 使其成为“正常”（非管理员）快捷方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-09T15:10:49.333

可以做到[**`shortcutjs.bat`**](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/shortcutJS.bat)：

```
shortcutjs.bat -linkfile tst6.lnk -target "%cd%\myscript.bat" -adminpermissions yes 
```

`-adminpermissions yes`如果您想以管理员身份运行 bat。您需要脚本的完整路径。

“以管理员身份运行”勾选在`.lnk`文件中设置了一个二进制标志（第 21 个字符），这也是脚本正在执行的操作 - 将其读取为二进制流并更改该值。

# google-maps - 多个地方/城镇的一个邮政编码

> ID：16083190
> 
> 赞同：1
> 
> 时间：2013-04-18T12:37:59.333
> 
> 标签：google-maps, google-places-api

我像这样使用 GMap 地方库的自动完成功能：

```
var autoc = new google.maps.places.Autocomplete(input, {componentRestrictions: {country: 'fr'}}); 
```

我输入邮政编码，它会给出建议，一切都很好。但是在法国，一个邮政编码可以被多个城镇使用。GMap 似乎只为每个邮政编码建议一个地方。这是一个已知问题吗？

有什么想法可以反击吗？

谢谢。

# postgresql - Ubuntu 10.04 到 12.04 = PostgreSQL 7.4 数据库替换为空 9.1

> ID：16083208
> 
> 赞同：0
> 
> 时间：2013-04-18T12:38:33.223
> 
> 标签：postgresql, ubuntu, upgrade

在将我们的 ubuntu 10.04 服务器升级到 12.04 的过程中，PostgreSQL 从 7.4 升级到 9.1 没有任何警告。我现在该怎么做才能从 7.4 集群中检索旧表并将它们导入 9.1 集群？12.04 存储库中没有 7.4 二进制包...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:44:33.137

您需要先转储数据库*，*然后再升级。您需要一个正在运行的数据库服务器来转储数据库。

如果您的数据库具有任何规模或复杂性，您也可能会在一次跳转这么多版本时遇到问题。

查看 /var/lib/postgresql - 如果您有名为 7.4 的目录，那么那是您的旧数据库。

任何一个：

1.  在备用机器上安装 10.04，将 7.4 目录复制到其上，启动数据库，转储数据库。
2.  从源代码编译 7.4 并使用它来转储您的数据库。

如果看起来可行，我会选择选项 1。

理想情况下，您将使用更高版本的 pg_dump 转储数据库。如果您可以在 ubuntu 10.04 上安装 8.x，那将是值得的。

# html - html中的动态表头

> ID：16083210
> 
> 赞同：0
> 
> 时间：2013-04-18T12:38:35.357
> 
> 标签：html, jsf, jsf-2, jstl

我需要根据条件显示标签内的标题。

```
<th class="header"><h:outputText value="#{supplierScorecard.treeItemList[1].m1.header}" /> </th> 
```

这是我当前的代码。要求就像我需要仅当某种 JavaScript 验证存在该值时才显示特定标题。

注意：我在这里没有使用 JSF 数据表，因为表头是单独打印的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:28:03.753

我已经将标签放在具有渲染条件的 a4j:outputpanel 中并且工作正常。

```
<a4j:outputPanel rendered="#{supplierScorecard.treeItemList[1].m4.header ne null}">
                                                <th class="header  treeTableOthers fixed"><h:outputText value="#{supplierScorecard.treeItemList[1].m4.header}" /> </th>
                                                </a4j:outputPanel> 
```

感谢您的更新#erencan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:38:17.460

将您的标签放在 outputPanel 中，然后为 outputPanel 的呈现属性提供条件。

```
<h:panelGrid id="panel" rendered="#{YOUR_CONDITION}" columns="1">
        <h:panelGroup>           
         <th class="header"><h:outputText value="#{supplierScorecard.treeItemList[1].m1.header}" /> </th>
      </h:panelGroup>
</h:panelGrid> 
```

如果您想通过 javascript 隐藏它，请`<th>`使用 span 包装标签并动态更改可见性。

```
<span id="panel">  
    <th class="header"><h:outputText value="#{supplierScorecard.treeItemList[1].m1.header}" /> </th>
</span>

document.getElementById("panel").style.display = "none";
document.getElementById("panel").style.display = "block"; 
```

# android - 电晕 network.download() 不适用于 Android

> ID：16083211
> 
> 赞同：3
> 
> 时间：2013-04-18T12:38:35.403
> 
> 标签：android, lua, coronasdk

我有一个功能，它可以下载天气 xml 提要并立即显示它，如果它无法获得连接，它会在最后一个报告中加载，或者如果是第一次下载，则为空白。这部分似乎工作正常，但是当它有连接时，它似乎不想完成下载。它在 IOS 上运行良好，但在 Android 上它只是显示一个加载标志。

这是功能

```
function Display:doQuery(zip, web)
  Display:loadXML() -- calls the functions to display previous or blank weather data
  network.download(web .. zip, "GET",
                   networkListener,
                   "weather.xml",
                   system.TemporaryDirectory)
end 
```

我也看过天气演示并尝试过，似乎发生了同样的事情。

网络监听器是

```
function networkListener(event)
    if (event.isError) then
      print("Network error!")
    else
      loadXML()
   end
end 
```

因此它会在获取 xml 时重新加载它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T09:12:32.680

在 Android 上，您必须将以下权限添加到“build.settings”文件。

```
 settings =
   {
   android =
   {
      usesPermissions =
      {
         "android.permission.INTERNET",
      },
    },
  } 
```

# jaxb - JAXB Binder.updateXml(objectTobeUpdated) 调用两次失败

> ID：16083218
> 
> 赞同：1
> 
> 时间：2013-04-18T12:38:54.670
> 
> 标签：jaxb

我有一个现有的 XML，我正在使用 Jaxb 来更新它。以下代码失败：在此问题上提出了错误，但无法获得有关修复的任何信息。任何人都可以帮助解决这个问题。

```
 package la.te.st;

    import javax.xml.bind.annotation.XmlAttribute;
    import javax.xml.bind.annotation.XmlElement;
    import javax.xml.bind.annotation.XmlRootElement;

    @XmlRootElement
    public class Student{

       String name;
       int age;
       int id;

       public String getName(){
          return name;
       }

       @XmlElement
       public void setName(String name){
          this.name = name;
       }

       public int getAge(){
          return age;
       }

       @XmlElement
       public void setAge(int age){
          this.age = age;
       }

       public int getId(){
          return id;
       }

       @XmlAttribute
       public void setId(int id){
          this.id = id;
       }

       @Override
        public String toString() {
            return this.name + " age:" + this.age + " id:" + this.id;
        }
    }

/**************************************/

package la.te.st;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Binder;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Node;

public class BinderDemo {
   public static void main(String[] args) {

      try {
         // we need a blank document to store final xml output
         DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
         DocumentBuilder docBuilder = dbf.newDocumentBuilder();
         Document document = docBuilder.parse("Student.xml");

         // create JAXBContext which will be used to create a Binder
         JAXBContext jc = JAXBContext.newInstance(Student.class);

         Binder<Node> binder = jc.createBinder();

         // set output as formatted one
         binder.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

         // get xml node from the document
         Node xmlNode = document.getDocumentElement();

         // Returns the updated JAXB object
         Student st = (Student)binder.updateJAXB(xmlNode);

         System.out.println(st);
         // set age and name
         st.setAge(11);
         st.setName("Sania");

         System.out.println(st);
         // update xml node with new data
         xmlNode = binder.updateXML(st);

         st.setAge(12);
         st.setName("Sania");

         System.out.println(st);

         xmlNode = binder.updateXML(st);

         // set node value to the document
         document.setNodeValue(xmlNode.getNodeValue());

         // finally print the edited object on stdout
         TransformerFactory tf = TransformerFactory.newInstance();
         Transformer t = tf.newTransformer();
         t.transform(new DOMSource(document), new StreamResult(System.out));

      }catch(Exception ex) {
         ex.printStackTrace();
      }
   }
}

/*****************************/

the Student.xml file :

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<student id="10">
   <age>10</age>
   <name>Zara Ali</name>
</student> 
```

# scala - 如何使 Scala 集合包含独特的元素？（“唯一”定义）

> ID：16083233
> 
> 赞同：2
> 
> 时间：2013-04-18T12:39:55.580
> 
> 标签：scala, scala-collections

假设我有一个如下列表：

```
val l = List( (1, 2, "hi"), (1, 3, "hello"), (2, 3, "world"), (1, 2, "hello") ) 
```

我想让元素`l`不同，忽略元组的第三个元素。也就是说，`l`如果它们的前两个组件相同，则认为 的两个元素是相同的。

所以`makeDistinct(l)`应该返回

```
List( (1, 2, "hi"), (1, 3, "hello"), (2, 3, "world") ) 
```

什么是最类似于 Scala 和通用的实现方式`makeDistinct`

编辑：我们可以自由选择要删除的内容，并且不需要保留订单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:46:04.357

如果要对列表执行此操作，请使用`groupBy`：

```
l.groupBy(x => (x._1, x._2)).map(kv => kv._2.head).toList 
```

如果您真的想对所有集合类型都通用：

```
scala> import scala.collection.generic.CanBuildFrom
import scala.collection.generic.CanBuildFrom

scala> def distinct[A, B, C, CC[X] <: Traversable[X]](xs: CC[(A, B, C)])(implicit cbf: CanBuildFrom[Nothing, (A, B, C), CC[(A, B, C)]]): CC[(A, B, C)] = xs.groupBy(x => (x._1, x._2)).map(kv => kv._2.head).to[CC]
warning: there were 1 feature warnings; re-run with -feature for details
distinct: [A, B, C, CC[X] <: Traversable[X]](xs: CC[(A, B, C)])(implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,(A, B, C),CC[(A, B, C)]])CC[(A, B, C)]

scala> distinct(List((1, 2, "ok"), (1, 3, "ee"), (1, 2, "notok")))
res0: List[(Int, Int, String)] = List((1,3,ee), (1,2,ok)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:20:30.490

您可以使用`Ordering`：

```
scala> SortedSet(l: _*)(Ordering[(Int, Int)].on(x => (x._1, x._2))).toList
res33: List[(Int, Int, String)] = List((1,2,hello), (1,3,hello), (2,3,world)) 
```

唯一的问题是最后找到的元素被保留了。对于第一个，您需要反转列表：

```
scala> SortedSet(l.reverse: _*)(Ordering[(Int, Int)].on(x => (x._1, x._2))).toList
res34: List[(Int, Int, String)] = List((1,2,hi), (1,3,hello), (2,3,world)) 
```

反向不是最优的，但也许可以直接以相反的顺序创建列表，这将避免构建不必要的中间列表。

# r - 在R中迭代打印图

> ID：16083236
> 
> 赞同：1
> 
> 时间：2013-04-18T12:39:59.227
> 
> 标签：r, graph

我有一系列向量，我想迭代地打印它们（到目前为止，我对它进行了硬编码，但我想避免一次又一次地这样做）。保存向量名称的变量的名称存储在“基因”（char）中，而我可以使用 ls() 查看变量（到目前为止没有什么新东西）每个向量的长度都是可变的，我想打印索引（x 轴）相对于值（y 轴）。我正在下载的数据来自 TCGA 数据库，可以通过他们的 R 包访问。到目前为止我所拥有的是：

```
library(cgdsr)

#create object

mycgds = CGDS("http://www.cbioportal.org/public-portal/")
genes <- c("AGPAT1", "CDIPT", "CDS1", "CEL", "CEPT1", "DGKA", "LCAT", "LCLAT1", "LPCAT3", "LPIN1", "LPL", "MOGAT3", "PEMT", "PISD", "PLA2G4B", "PLD1","PTDSS1", "PTDSS2", "ATX", "PLA2") # list of my gene names

# get z score about these genes for kidney cancer
data <- getProfileData(mycgds, genes, "kirc_tcga_pub_rna_seq_v2_mrna_median_Zscores", "kirc_tcga_pub_3way_complete" )

data <- t(data)

#set z-value cutoff (equivalent to p<0.05)
i <- -1.96
j <- 1.96

# select only samples that have values lower than i and higher than j

AGPAT1 <- data[1,which(data[1,] < i | data[1,] > j)]
CDIPT <- data[2,which(data[2,] < i | data[2,] > j)]
CDS1 <- data[3,which(data[3,] < i | data[3,] > j)]
CEL <- data[4,which(data[4,] < i | data[4,] > j)]
CEPT1 <- data[5,which(data[5,] < i | data[5,] > j)]
DGKA <- data[6,which(data[6,] < i | data[6,] > j)]
LCAT <- data[7,which(data[7,] < i | data[7,] > j)]
LCLAT1 <- data[8,which(data[8,] < i | data[8,] > j)]
LPCAT3 <- data[9,which(data[9,] < i | data[9,] > j)]
LPIN1 <- data[10,which(data[10,] < i | data[10,] > j)]
LPL <- data[11,which(data[11,] < i | data[11,] > j)]
MOGAT3 <- data[12,which(data[12,] < i | data[12,] > j)]
PEMT <- data[13,which(data[13,] < i | data[13,] > j)]
PISD <- data[14,which(data[14,] < i | data[14,] > j)]
PLA2G4B <- data[15,which(data[15,] < i | data[15,] > j)]
PLD1 <- data[16,which(data[16,] < i | data[16,] > j)]
PTDSS1 <- data[17,which(data[17,] < i | data[17,] > j)]
PTDSS2 <- data[18,which(data[18,] < i | data[18,] > j)]
ATX <- data[19,which(data[19,] < i | data[19,] > j)]
PLA2 <- data[20,which(data[20,] < i | data[20,] > j)]

#setup page for the 18graphs, not 20 cause there are no values for the last two
 par(mfrow= c(3,6)) 

   color <- function(x){
      ifelse(x > 1.96, "red", "green")
    }

    for (k in seq(1,length(ls()),1)) #iterate through ls()
      for(z in seq(1, length(genes),1)) #iterate through my list of genes
        if(genes[z] == ls()[k]) #if they match print them out
          plot(ls()[k], pch=15, col=color(ls()[k]), main =genes[z], ylim=c(-3,30)) 
```

“颜色”功能是根据值分配颜色

但是，我无法让它工作。它不会打印所有图形，而只会打印一些图形，并且不会应用正确的颜色。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:49:30.943

如果你想制作这些类型的图组，我真的建议切换到`ggplot2`（或`lattice`）。这具有处理此类事情的`facet_wrap`和选项。`facet_grid`如果没有您身边的可重复示例，很难给出`ggplot2`用户文档中的示例：

```
p <- qplot(price, data = diamonds, geom = "histogram", binwidth = 1000)
p + facet_wrap(~ color) 
```

![在此处输入图像描述](https://i.stack.imgur.com/siu9a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:36:15.113

好的，很简单。你错过了`get()`。尝试

```
for (k in seq(1,length(ls()),1)) #iterate through ls()
  for(z in seq(1, length(genes),1)) #iterate through my list of genes
    if(genes[z] == ls()[k]) #if they match print them out
      plot(get(ls()[k]), pch=15, col=color(ls()[k]), main =genes[z], ylim=c(-3,30)) 
```

与您的确切问题无关，但这是您的循环的更清晰（更快）的版本

```
for (k in 1:length(ls())) #iterate through ls()
    if(any(geneFound <- genes == ls()[k])) #if they match print them out
      plot(get(ls()[k]), pch=15, col=color(ls()[k]), main =genes[geneFound],
           ylim=c(-3,30)) 
```

编辑：

更改`col=color(ls()[k])`后`col=color(get(ls()[k]))`我得到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/5Q6tn.jpg)

而这个错误：

```
Error in plot.window(...) : need finite 'xlim' values
In addition: Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf 
```

由于你说的两个缺失的向量。这是你所期望的吗？

# android - 如何编写意图以在 Android 中仅显示具有所需扩展名的文件

> ID：16083243
> 
> 赞同：2
> 
> 时间：2013-04-18T12:40:22.417
> 
> 标签：android, intentfilter

我正在开发一个加密/解密文件的 android 应用程序。

一旦文件被加密，它的扩展名就会变为 filename.encrypted（这里的 filename 本身就是一个完全限定的文件名，如 hello.pdf，因此加密文件变为 hello.pdf.encypted）。

我在我的应用程序中集成了文件选择器意图，因此用户无需打开第三方意图来选择文件。

我的问题是，当用户选择加密文件时，不应允许他选择已经加密的文件，即具有扩展名“.encrypted”的文件，当他们尝试解密文件时，他们应该只看到带有扩展名的文件“.加密”。

我已经看到了很多文件选择器意图，例如（[https://github.com/iPaulPro/aFileChooser](https://github.com/iPaulPro/aFileChooser)）和（[http://code.google.com/p/android-filechooser/](http://code.google.com/p/android-filechooser/)），但没有一个能够自定义可查看/可选择的文件。我读过一篇文章（[Android 文件选择器](https://stackoverflow.com/questions/7856959/android-file-chooser)）说，它无法完成，但我看到了实现此功能的应用程序。

我需要一些资源或链接的帮助，这些资源或链接向我展示了如何实现这一目标。我坚信该功能是可能的。

此外，当从第三方文件管理器查看时，我还希望我的应用程序能够识别扩展名“.encrypted”。我相信通过在 Android Manifest 中指出它是可能的，但我没能做到。我读了这篇文章：[在 Android 中注册新文件类型](https://stackoverflow.com/questions/4799576/register-new-file-type-in-android/8638084#8638084)但无法做到。

在这里寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:03:12.557

我为我想要实现的目标找到了一个库[https://github.com/Kaloer/Android-File-Picker-Activity 。](https://github.com/Kaloer/Android-File-Picker-Activity)

他们为我们提供了在意图中使用 putExtra 指定允许的扩展的规定。

可能对其他有类似问题的人有用。

# apache - RewriteRule 重定向不包括参数

> ID：16083244
> 
> 赞同：1
> 
> 时间：2013-04-18T12:40:23.603
> 
> 标签：apache, .htaccess, mod-rewrite

我想做的是重定向

[http://example.com/sample/](http://example.com/sample/)

到

[http://example.com/this/that/?which=那些](http://example.com/this/that/?which=those)

这是我尝试过的；

```
RewriteRule ^sample.*$ http://example.com/this/that/?which=those [R=301,L] 
```

但它重定向到[http://example.com/this/that/](http://example.com/this/that/)，没有参数。

只有当我在 url 之后写一些东西（随机）时，它才会正确重定向，包括参数。

我究竟做错了什么？任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:35:45.810

您只需要这条规则：

```
RewriteRule ^sample/?$ /this/that/?which=those [R=302,L,NC,QSA] 
```

确保在测试之前清除浏览器缓存并重新启动浏览器。

**重要提示：**记住不要`R=301 (Permanent Redirect)`在测试 mod_rewrite 规则时使用。仅在您验证它可以正常工作后，更改`R=302 (Temporary Redirect)`为`R=301 (Permanent Redirect)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:31:50.023

将您的规则更改为：

```
RewriteRule ^sample(.*)? http://example.com/this/that/?which=those [R=301,L] 
```

在这里，我们通过捕获通配符并使用可选的正则表达式标志使通配符成为可选：`(.*)?`

因此，`sample`和`sample/test/hello`都将重定向。

# mongodb - 如何更改直播日期？

> ID：16083247
> 
> 赞同：-1
> 
> 时间：2013-04-18T12:40:29.420
> 
> 标签：mongodb

我想知道，如何使用 MongoDB 更改实时数据模式？

例如，如果我有以下文档的“用户”集合：

```
var user = {
    _id:123312,
    name:"name",
    age:12,
    address:{
        country:"",
        city:"",
        location:""
    }
}; 
```

现在，在我的应用程序的新版本中，如果我向“用户”实体添加新属性，让我们说体重、身高或成人（基于用户年份），如何更改所有当前没有成人的实时数据财产。我阅读了 MapReduce 和组聚合命令，但是它们似乎很舒服，适合分析操作或其他计算，或者我错了。

那么在 MongoDB 中更改当前正在运行的数据模式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:52:30.890

这实际上取决于您的编程语言。MongoDB 非常擅长动态模式。我认为您目前的思维模式与 SQL 相关，因此您认为所有行，即使它们还没有值，也必须具有新字段。

实际情况完全不同。没有任何意义的行不需要该字段，您可以在您的应用程序中检查返回的文档是否有值，如果没有，那么您可以假设，如在固定 SQL 模式中，值为`null`。

因此，这是 MongoDB 的亮点之一，您不必按需将该新字段应用于整个架构，而是可以在用户输入数据时懒惰地填充它。

因此，只需将字段编码到您的应用程序中，让用户为您完成工作。

添加此字段的最佳方法是编写一个循环，可能在控制台关闭或副本的主副本中（如果有，否则仅在服务器上），如下所示：

```
db.users.find().forEach(function(doc){
    doc.weight = '44 stone';
    db.users.save(doc);
}); 
```

这是目前执行您所要求的事情的最佳方式。

# algorithm - 以下的贪心算法

> ID：16083251
> 
> 赞同：2
> 
> 时间：2013-04-18T12:40:38.763
> 
> 标签：algorithm, greedy

我正在尝试使用贪心算法解决以下问题，

我们有`n`朋友，我们想给他们每个人一份礼物。但我们不想把同样的礼物送给两个认识的人。（如果 x 知道 y，那么 y 知道 x）。互不相识的人可能会拿同样的礼物，没关系。我们希望尽量减少不同礼物的数量。

这就是我的想法，我们试着让彼此不认识的人成对，给他们同样的礼物。但我不确定这是否是一个贪心算法。此外，我们可能希望找到最多的人，其中没有人知道任何其他人，所以我们可以给他们同样的礼物。但是我们能做到吗？我们能找到最大的不认识的人吗？

任何人都可以为这个问题提出一个贪心算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:54:35.647

这是图形着色问题，[它的贪心算法很简单](http://en.wikipedia.org/wiki/Greedy_coloring)：

```
a greedy coloring is a coloring of the vertices of a graph formed by
a greedy algorithm that considers the vertices of the graph in sequence
and assigns each vertex its first available color 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:55:22.207

你提到的问题是`Graph Coloring`问题的重述。您必须用颜色标记图形的顶点，以便没有两个共享相同边的顶点具有相同的颜色。下面给出的链接是`Greedy Coloring Algorithm`.

[http://en.wikipedia.org/wiki/Greedy_coloring](http://en.wikipedia.org/wiki/Greedy_coloring)

# winapi - How to deploy a Win32 API application as an executable

> ID：16083253
> 
> 赞同：4
> 
> 时间：2013-04-18T12:40:40.653
> 
> 标签：winapi, exe

How can I deploy my Win32 application as an EXE application so that others (who don't have VC++ installed) can use it?

I am using VC++ 2010 on Windows 7.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T02:49:10.723

If you switch to "Release" mode when you compile your finished program (rather than "Debug", which you use for debugging it during development), you should get an executable that will run on a computer without Visual Studio installed.

However, that executable will still require the appropriate version of the C runtime library to be installed. For example, if you developed it in Visual C++ 2010, you will need version 10 of the CRT installed. This is a freely redistributable library, downloadable [here](http://www.microsoft.com/en-us/download/details.aspx?id=8328).

So, you have several options for deployment:

1.  **Manual Deployment**

    Give people the bare executable file, and include the installer for the redistributable in another folder on the installation media. If they copy the executable to disk and cannot run it because they get an error message, they should install the CRT libraries from the included redistributable installer. Then the executable will run just fine.

    This works great if you have relatively a computer-savvy audience, or you're deploying to a fixed range of machines (like across a school or corporation). But it doesn't work so well for general deployment to customers.

    In fact, you don't even need the installer. You can just place the CRT DLLs in the same folder as your executable and it will run just fine. This is how I test apps I'm developing on clean VMs. It works like a charm. There's no need to run the CRT installer at all. You'll find these required libraries as part of your Visual Studio installation:

    ```
    <Program Files folder>\Microsoft Visual Studio 10.0\VC\redist\x86 
    ```

2.  **Automated Deployment**

    Create a setup program that automatically installs your application along with any dependencies it requires, including the CRT redistributable. This is what you see most commercial applications doing. I recommend it for anything but the most trivial of apps.

    Full versions of Visual Studio 2010 (i.e., not Express versions) can create a Setup Project that you can customize as needed to work as an installer for your application. But this is no longer the recommended way to create an installer, and this functionality [has been removed from the latest version of Visual Studio, 2012](https://stackoverflow.com/questions/12378125/create-msi-or-setup-project-with-visual-studio-2012).

    So I recommend using something else, even if you have an older version of VS where the Setup Project is available. No point in wasting time creating something you'll just have to update later. My personal favorite choices for creating setup programs are [WiX](http://wixtoolset.org/) and [Inno Setup](http://www.jrsoftware.org/isinfo.php). Both are free, and extensive documentation is available online.

    Creating simple setups that don't have to do very much is really quite straightforward—this is likely the case for you, as all you need to do is install the CRT redistributable if it is not already there. I'd be willing to bet money you can find a walkthrough or example online for how to do this in either WiX or Inno Setup.

    If you need to do more complicated stuff, both of these setup packages support it. They are extensively customizable and very powerful, it just takes more work to get it all going.

3.  **Static Linking**

    If you absolutely need to be able to distribute a bare executable that is guaranteed to simply work when double-clicked, you will need to switch your project to *statically link* in the required runtime libraries. This means that all of the CRT code is actually embedded by the linker directly into your executable, and means that you don't have to redistribute the CRT libraries separately.

    The disadvantage of this approach is that the only way to benefit from improvements, bug fixes, and security patches released for the CRT is to recompile and redistribute your application. If you *dynamically link* (the default), your app will automatically benefit from enhancements to the installed version of the CRT libraries. [Microsoft strongly recommends *against* static linking](http://msdn.microsoft.com/en-us/library/ms235316.aspx).

    To switch between these modes in Visual Studio, follow these steps:

    *   Right-click on your project in the Solution Explorer and select "Properties".
    *   Ensure that the "Release" configuration is selected in the drop-down box at the top of the dialog.
    *   Expand the "C/C++" item in the TreeView, and select "Code Generation".
    *   Change the setting of the "Runtime Library" option to "Multi-threaded (/MT)".

    ![](https://i.stack.imgur.com/rkjfg.png)

    A further description on what these cryptic compiler switches mean and which ones you should use when is given in [my answer here](https://stackoverflow.com/questions/6799237/dll-vs-static-lib-msvc9-runtime-library-option/6799647#6799647).

**Final Note:** The "Debug" versions of the CRT libraries are not redistributable, but that doesn't matter because you should *always* distribute the "Release" build of your app anyway, never the "Debug" build.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T23:33:05.173

1.  In general, the odds are pretty good your EXE file will run on any version of Windows you built it on or higher.

    All bets off, for example, if you built using [Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012) Professional on Windows 7, and you try to run it on Windows 95\. But otherwise, you're probably safe :)

2.  The best way to test if you have any dependencies is to install and run on a "clean machine".

    The best way to get (and reuse) a "clean machine" is with a VM.

    I recommend [VMWare](http://www.vmware.com/). But [Virtual Box](https://www.virtualbox.org/wiki/Downloads) and [Windows Virtual PC](http://www.microsoft.com/en-us/download/details.aspx?id=3702) are also viable choices.

3.  As far as an installer, I'd strongly encourage you to look at [InnoSetup](http://www.jrsoftware.org/isinfo.php)

I hope that helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:23:56.467

Make sure you build in release mode. As Floris Velleman said, you're using unneeded libraries for standalone executable.

For more information, you can check *[Compiler Options](http://msdn.microsoft.com/en-us/library/vstudio/9s7c9wdw.aspx)* (MSDN).

# php - Smarty 本地化标签 - 如何在 php 中使用？

> ID：16083255
> 
> 赞同：1
> 
> 时间：2013-04-18T12:40:47.513
> 
> 标签：php, localization, smarty

我使用 smarty 本地化来获取语言标签

```
{config_load file="localization.conf" section=$project->lang} 
```

当我需要来自本地化.conf 的一些标签时，我将放入 smarty 模板文件 (tpl) ex。`{#label#}`（其中标签`localization.conf`= `'some text'`）

但是现在我需要在 php 文件中使用标签，该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T13:00:20.420

如果你想在输出之前使用配置变量（假设是 html 输出）你可以在 php 中加载配置

```
$smarty->configLoad('test.conf', 'Login');

var_dump($smarty->getConfigVars());   

$smarty->display('test.tpl'); 
```

通过 PHP 加载的配置数据也将在 Smarty 模板中可见。更多信息：[http ://www.smarty.net/docs/en/api.get.config.vars.tpl](http://www.smarty.net/docs/en/api.get.config.vars.tpl)

# configuration - 如何在 Zend Framework 2 的布局/视图脚本中从自动加载的配置文件访问配置？

> ID：16083256
> 
> 赞同：2
> 
> 时间：2013-04-18T12:40:48.523
> 
> 标签：configuration, zend-framework2, production-environment, application-settings

我想/必须管理一些[ZF1 风格](http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2)的设置，并为视图提供有关当前环境的信息。

**/config/application.config.php**

```
return array(
    ...
    'module_listener_options' => array(
        ...
        'config_glob_paths' => array('config/autoload/{,*.}{global,local}.php')
    )
); 
```

**/config/autoload/env.local.php**

```
return array(
    // allowed values: development, staging, live
    'environment' => 'development'
); 
```

在一个通用的视图脚本中，我可以在控制器上执行此操作，因为控制器可以访问服务管理器，因此可以访问我需要的所有配置：

```
class MyController extends AbstractActionController {

    public function myAction() {
        return new ViewModel(array(
            'currentEnvironment' => $this->getServiceLocator()->get('Config')['environment'],
        ));
    }

} 
```

是否也可以直接在公共视图中获取配置？

**如何访问布局视图脚本 ( `/module/Application/view/layout/layout.phtml`) 中的配置？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:39:33.590

（我的实现/解释）[Crisp的建议](https://stackoverflow.com/questions/16083256/how-to-access-configs-from-autoloaded-config-files-in-a-layout-view-script-in#comment22959752_16083256)：

**配置视图助手**

```
<?php
namespace MyNamespace\View\Helper;

use Zend\View\Helper\AbstractHelper;
use Zend\View\HelperPluginManager as ServiceManager;

class Config extends AbstractHelper {

    protected $serviceManager;

    public function __construct(ServiceManager $serviceManager) {
        $this->serviceManager = $serviceManager;
    }

    public function __invoke() {
        $config = $this->serviceManager->getServiceLocator()->get('Config');
        return $config;
    }

} 
```

**应用`Module`类**

```
public function getViewHelperConfig() {
    return array(
        'factories' => array(
            'config' => function($serviceManager) {
                $helper = new \MyNamespace\View\Helper\Config($serviceManager);
                return $helper;
            },
        )
    );
} 
```

**布局视图脚本**

```
// do whatever you want with $this->config()['environment'], e.g.
<?php
if ($this->config()['environment'] == 'live') {
    echo $this->partial('partials/partial-foo.phtml');;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:37:52.537

所以[这个解决方案](https://stackoverflow.com/a/16085971/2019043)变得更加灵活：

**/config/application.config.php**

```
return array(
    ...
    'module_listener_options' => array(
        ...
        'config_glob_paths' => array('config/autoload/{,*.}{global,local}.php')
    )
); 
```

**/config/autoload/whatever.local.php**和**/config/autoload/whatever.global.php**

```
return array(
    // allowed values: development, staging, live
    'environment' => 'development'
); 
```

**ContentForEnvironment 视图助手**

```
<?php
namespace MyNamespace\View\Helper;

use Zend\View\Helper\AbstractHelper;
use Zend\View\HelperPluginManager as ServiceManager;

class ContentForEnvironment extends AbstractHelper {

    protected $serviceManager;

    public function __construct(ServiceManager $serviceManager) {
        $this->serviceManager = $serviceManager;
    }

    /**
     * Returns rendered partial $partial,
     * IF the current environment IS IN $whiteList AND NOT IN $blackList,
     * ELSE NULL.
     * Usage examples:
     * Partial for every environment (equivalent to echo $this->view->render($partial)):
     *  echo $this->contentForEnvironment('path/to/partial.phtml');
     * Partial for 'live' environment only:
     *  echo $this->contentForEnvironment('path/to/partial.phtml', ['live']);
     * Partial for every environment except 'development':
     *  echo $this->contentForEnvironment('path/to/partial.phtml', [], ['development', 'staging']);
     * @param string $partial
     * @param array $whiteList
     * @param array $blackList optional
     * @return string rendered partial $partial or NULL.
     */
    public function __invoke($partial, array $whiteList, array $blackList = []) {
        $currentEnvironment = $this->serviceManager->getServiceLocator()->get('Config')['environment'];
        $content = null;
        if (!empty($whiteList)) {
            $content = in_array($currentEnvironment, $whiteList) && !in_array($currentEnvironment, $blackList)
                ? $this->view->render($partial)
                : null
            ;
        } else {
            $content = !in_array($currentEnvironment, $blackList)
                ? $this->view->render($partial)
                : null
            ;
        }
        return $content;
    }

} 
```

**应用`Module`类**

```
public function getViewHelperConfig() {
    return array(
        'factories' => array(
            'contentForEnvironment' => function($serviceManager) {
                $helper = new \MyNamespace\View\Helper\ContentForEnvironment($serviceManager);
                return $helper;
            }
        )
    );
} 
```

**布局视图脚本**

```
<?php echo $this->contentForEnvironment('path/to/partial.phtml', [], ['development', 'staging']); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:46:04.897

[我对Sam 针对具体目标的解决方案提示](https://stackoverflow.com/questions/16083256/how-to-access-configs-from-autoloaded-config-files-in-a-layout-view-script-in/16085971#comment22961439_16083256)的实现/解释（以允许在开发/暂存环境中显示 Web 分析 JS）：

**DisplayAnalytics 视图助手**

```
<?php
namespace MyNamespace\View\Helper;

use Zend\View\Helper\AbstractHelper;
use Zend\View\HelperPluginManager as ServiceManager;

class DisplayAnalytics extends AbstractHelper {

    protected $serviceManager;

    public function __construct(ServiceManager $serviceManager) {
        $this->serviceManager = $serviceManager;
    }

    public function __invoke() {
        if ($this->serviceManager->getServiceLocator()->get('Config')['environment'] == 'development') {
            $return = $this->view->render('partials/partial-bar.phtml');
        }
        return $return;
    }

} 
```

**应用`Module`类**

```
public function getViewHelperConfig() {
    return array(
        'factories' => array(
            'displayAnalytics' => function($serviceManager) {
                $helper = new \MyNamespace\View\Helper\DisplayAnalytics($serviceManager);
                return $helper;
            }
        )
    );
} 
```

**布局视图脚本**

```
<?php echo $this->displayAnalytics(); ?> 
```

# cuda - CUDA“卷积”与 OpenMP 版本一样慢

> ID：16083257
> 
> 赞同：2
> 
> 时间：2013-04-18T12:40:49.383
> 
> 标签：cuda

我正在尝试将一个`featWidth * featHeight * 31`立方体与另一个`modelWidth * modelHeight * 31`立方体“卷积”。问题是这个内核非常慢（嗯，我设法比顺序 CPU 代码快，但与 OpenMP 版本一样慢）。我正在使用 Quadro FX 1800（是的，64 个 CUDA 核心......）。

```
__constant__ float d_model[31*22*22];
#define IMUL(a,b) ( __mul24((a), (b)) )
#define IMAD(a,b,c) ( __mul24((a), (b)) + (c) )
__global__ void dMatch(float *score, const int featWidth, const int featHeight, const int modelWidth, const int modelHeight, const int scoreWidth, const int scoreHeight)
{
  const int x = IMAD(blockIdx.x, blockDim.x, threadIdx.x);
  const int y = IMAD(blockIdx.y, blockDim.y, threadIdx.y);
  if(x < scoreWidth && y < scoreHeight)
  {
   const int scoreIdx = IMAD(x, scoreHeight, y);
   score[scoreIdx] = 0.f;
   const int baseFeatIdx = IMUL(x,scoreHeight) + IMAD(modelHeight-1, x, y);
   for(int z = 0; z < 31; ++z)
   {
     // Index positionning
     int featIdx =  IMAD(z, IMUL(featWidth,featHeight), baseFeatIdx);
     int modelIdx = IMUL(z, IMUL(modelWidth,modelHeight));

     float value = 0.f;

     // filter
     for(int xx=0; xx<modelWidth; xx++)
     {
       const int xxmodelIdx = IMAD(xx, modelHeight, modelIdx);
       const int xxfeatIdx = IMAD(xx, featHeight, featIdx);
       for(int yy=0; yy<modelHeight; yy++)
       {
         value += d_model[xxmodelIdx+yy] * tex1Dfetch(texFeatures,xxfeatIdx+yy);
       }
     }
     score[scoreIdx] += value;
  }
 }
} 
```

无论如何，我用`8*8`块中的线程启动这个内核，网格大小为`(scoreWidth/8)*(scoreHeight/8)`(scoreWidth 和 scoreHeight 是生成的矩阵大小)。我想知道你是否知道我的代码出了什么问题或者什么地方比较慢。

编辑：

一个更快的版本（480 毫秒的进程下降了 150 毫秒！）感谢 tera：

```
__global__ void dMatch(float *score, const int featWidth, const int featHeight, const int modelWidth, const int modelHeight, const int scoreWidth, const int scoreHeight)
{
    const int y = IMUL(4,IMAD(blockIdx.x, blockDim.x, threadIdx.x));
    const int x = IMAD(blockIdx.y, blockDim.y, threadIdx.y);
    if(x < scoreWidth && y < scoreHeight)
    {
    const int scoreIdx = IMAD(x, scoreHeight, y);
    const int baseFeatIdx = IMUL(x,scoreHeight) + IMAD(modelHeight-1, x, y);
    float value=0.f, value1 = 0.f, value2 = 0.f, value3 = 0.f;
    float feat,feat1,feat2,feat3;

    // Index positionning
    int featIdx =  0;
    int modelIdx = 0;
    int xxmodelIdx;
    int xxfeatIdx; 
    float val;
    for(int z = 0; z < 31; ++z)
    {
        featIdx = IMAD(z,IMUL(featWidth,featHeight),baseFeatIdx);
        modelIdx = IMUL(z,IMUL(modelWidth,modelHeight));

        // filter
        for(int xx=0; xx<modelWidth; xx++)
        {
            xxmodelIdx  = IMAD(xx, modelHeight, modelIdx);
            xxfeatIdx = IMAD(xx, featHeight, featIdx);
            feat=tex1Dfetch(texFeatures,xxfeatIdx+0);
            feat1=tex1Dfetch(texFeatures,xxfeatIdx+1);
            feat2=tex1Dfetch(texFeatures,xxfeatIdx+2);
            feat3=tex1Dfetch(texFeatures,xxfeatIdx+3);
            for(int yy=0; yy<modelHeight; yy++)
            {
                val = d_model[xxmodelIdx+yy];
                value += val * feat;
                value1 += val * feat1;
                value2 += val * feat2;
                value3 += val * feat3;
                feat = feat1;
                feat1 = feat2;
                feat2 = feat3;
                feat3 = tex1Dfetch(texFeatures,xxfeatIdx+yy+4);
            }
        }
    }
    score[scoreIdx] = value;
    if(y+1 < scoreHeight)
        score[scoreIdx+1] = value1;
    if(y+2 < scoreHeight)
        score[scoreIdx+2] = value2;
    if(y+3 < scoreHeight)
        score[scoreIdx+3] = value3;
} 
```

以此启动`dim3 threads(16,16); dim3 grid(divup(scoreHeight,64), divup(scoreWidth,16));`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:51:54.370

探查器说什么？[NVidia NSight](https://developer.nvidia.com/nvidia-nsight-visual-studio-edition)（适用于 Windows 上的 Visual Studio 和 Linux 上的[Eclipse](https://developer.nvidia.com/nsight-eclipse-edition)的插件）允许您两个查看停顿位置并提供各种提示以优化性能。

我的猜测（没有查看分析器）是你拥有的块太小了。warp 内部有 32 个线程，这是基本的调度元素。NVIDIA GPU 速度很快，因为它可以通过在当前线程执行上一条指令时在其他线程上操作来隐藏延迟。虽然每个 SM（在特斯拉和费米上）或 16 个（在开普勒上）可能有 8 个块，但在峰值处仍然有 16-32 个扭曲，这可能非常小（我可能错了，但启动块有一定的延迟）。我会考虑使用更大的块。

如果我正确理解代码，则纹理获取不是最佳的 - warp 中的线程与 in 不同`modelHeight - 1`，`baseFeatId`因此在`featIdx`and中`xxfeatIdx`。因此，纹理提取是完全随机的，它不利用数据局部性。倒车`x`会`y`让它更有效率。

然而，好的规则是检查分析器 - 如果您的问题是 GPU 上的计算限制，那么您应该专注于计算方面。如果您的问题是内存限制，您应该查看内存访问模式。可能还有其他几个部分看起来像是要优化的地方，但直到你看到瓶颈是什么你才会知道。一旦你知道了，你可能想阅读关于[最佳实践指南](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/)的特定章节。

# python - python实现3D刚体平移和旋转

> ID：16083258
> 
> 赞同：8
> 
> 时间：2013-04-18T12:40:50.460
> 
> 标签：python, computational-geometry, rotational-matrices

我一直在尝试解决如何使用 python 解决以下问题：

1.  我们有构成刚体的点 a、b、c、d
2.  一些未知的**3D**平移和旋转应用于刚体
3.  我们现在知道 a、b、c 的坐标
4.  我们要计算 d 的坐标

到目前为止我所知道的：

*   由于万向节锁定等原因，尝试使用“直接”的欧拉角计算来做到这一点似乎是个坏主意。
*   因此，第 4 步将涉及一个变换矩阵，一旦您知道了旋转和平移矩阵，看起来这一步很容易使用其中之一：

    *   [http://www.lfd.uci.edu/~gohlke/code/transformations.py.html](http://www.lfd.uci.edu/~gohlke/code/transformations.py.html)
    *   [https://pypi.python.org/pypi/euclid/0.01](https://pypi.python.org/pypi/euclid/0.01)

我无法解决的是如何在给定 a、b、c 的“新”坐标的情况下计算旋转和平移矩阵。

我可以看到，在一般情况下（非刚体），旋转部分是[Wahba 的问题](http://en.wikipedia.org/wiki/Wahba%27s_problem)，但我认为对于刚体，应该有一些更快的方法来直接计算它，方法是使用点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:31:35.353

对于您尝试匹配的一组对应点（可能存在扰动），我使用了 SVD（奇异值分解），它似乎存在于 numpy.

这种技术的一个例子（甚至在 Python 中）可以在[这里找到](http://nghiaho.com/?page_id=671)，但我没有评估它的正确性。

你要做的是一个“基础变换”或“基础变化”，它将被表示为一个变换矩阵。假设您的 3 个已知点不共线，您可以通过以下方式创建初始基础：

1.  计算向量：x=(ba) 和 y=(ca)
2.  归一化 x (x = x / 幅度 (x))
3.  将 y 投影到 x (proj_y = x DOT y * x)
4.  从 y 中减去投影 (y = y - proj_y)
5.  标准化 y
6.  计算 z = x 交叉 y

这给了你一个初始的 x,y,z 坐标基础 A。对你的新点做同样的事情，你会得到第二个基础 B。现在你想找到变换 T，它将在 A 中取一个点并将其转换为 B (基数变化）。那部分很容易。您可以反转 A 将点转换回法线基础，然后使用 B 转换为第二个。由于 A 是正交的，您只需转置 A 即可得到逆。所以“新 d”等于 d * inverse(A) * B。（尽管根据您的表示，您可能需要使用 B * inverse(A) * d。）

您需要熟悉矩阵才能获得所有这些。您对向量和矩阵的表示将告知您将矩阵相乘以得到 T 的顺序（T 是 inverse(A)*B 或 B*inverse(A)）。

要从向量 x=(x1,x2,x3), y=(y1,y2,y3), z=(z1,z2,z3) 计算基矩阵，请将其填充为：

```
| x1 y1 z1 |
| x2 y2 z2 |
| x3 y3 z3 | 
```

# c# - 动态创建程序集的单元测试

> ID：16083259
> 
> 赞同：0
> 
> 时间：2013-04-18T12:40:51.417
> 
> 标签：c#, unit-testing

我过去也问过类似的问题，但我们把这件事放在一边，我们又回到了问题上。我们试图实现它以在动态创建的 dll 上运行单元测试。

我们有一些 API 供 QA 工程师将脚本插入到我们的应用程序中。QA 工程师在我们的应用程序编辑器中编写一些代码，然后在运行时编译代码，并在磁盘上保存为程序集。

我们希望能够在这个动态创建的程序集上运行一组测试。我们正在强迫我们的 QA 团队从一些基类继承并覆盖一些方法，这些是我们想要测试的方法......

你会如何暗示这一点？任何想法都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:45:57.620

您必须检查动态程序集中的类型并找到从您的基类派生的具体类型。假设它们都有无参数构造函数，您可以执行以下操作：

```
Assembly dynamicAssembly = //generated
var derivedInstances = dynamicAssembly.GetTypes()
    .Where(t => !t.IsAbstract && t.IsSubclassOf(typeof(BaseClass)))
    .Select(t => (BaseClass)Activator.CreateInstance(t));

foreach(BaseClass bc in derivedInstances)
{
    //run tests
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:47:50.223

从上面看，您需要使用某种方法（反射是一种方法）创建在动态创建的 dll 中定义的类的实例。将这些对象转换为您的基类类型，然后您应该能够执行基类的方法。

在我看来，更有趣的是：当你执行一个方法时，你将如何定义正确的结果是什么？我会说您的 QA 工程师还需要指定预期的单元测试结果。

# java - 处理序列化框架的不兼容版本更改

> ID：16083263
> 
> 赞同：16
> 
> 时间：2013-04-18T12:41:21.210
> 
> 标签：java, maven, serialization, hadoop, kryo

# 问题描述

我们有一个 Hadoop 集群，我们在其上存储使用[Kryo](http://code.google.com/p/kryo/ "克里奥")（序列化框架）序列化为字节的数据。我们用来执行此操作的 Kryo 版本已从官方版本 2.21 中分叉出来，以将我们自己的补丁应用到我们在使用 Kryo 时遇到的问题。当前的 Kryo 版本 2.22 也修复了这些问题，但有不同的解决方案。因此，我们不能只更改我们使用的 Kryo 版本，因为这意味着我们将无法再读取已经存储在 Hadoop 集群上的数据。为了解决这个问题，我们想运行一个 Hadoop 作业

1.  读取存储的数据
2.  反序列化使用旧版本 Kryo 存储的数据
3.  用新版本的 Kryo 序列化恢复的对象
4.  将新的序列化表示写回我们的数据存储

问题在于，在一个 Java 程序中（更准确地说，在 Hadoop 作业的映射器类中）使用同一类的两个不同版本并非易事。

# 简而言之问题

如何在一个 Hadoop 作业中使用同一序列化框架的两个不同版本反序列化和序列化对象？

# 相关事实概述

*   我们将数据存储在 Hadoop CDH4 集群上，使用 Kryo 版本 2.21.2-ourpatchbranch 进行序列化
*   我们希望使用与我们的版本不兼容的 Kryo 版本 2.22 对数据进行序列化
*   我们使用 Apache Maven 构建我们的 Hadoop 作业 JAR

# 可能（和不可能）的方法

## (1) 重命名包

[我们想到的第一种方法是使用Maven Shade 插件的重定位功能](http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html%20relocation%20functionality%20of%20the%20Maven%20Shade%20plugin)重命名我们自己的 Kryo 分支中的包，并使用不同的工件 ID 发布它，以便我们可以在转换作业项目中依赖这两个工件。然后，我们将实例化一个旧版本和新版本的 Kryo 对象，并使用旧版本进行反序列化，使用新版本再次序列化该对象。

**问题**
我们没有在 Hadoop 作业中明确使用 Kryo，而是通过我们自己的库的多层访问它。对于这些库中的每一个，都需要

1.  重命名涉及的包和
2.  创建具有不同组或工件 ID 的版本

为了让事情变得更加混乱，我们还使用了其他 3rd 方库提供的 Kryo 序列化程序，我们必须为此做同样的事情。

* * *

## (2) 使用多个类加载器

我们提出的第二种方法是在包含转换作业的 Maven 项目中完全不依赖 Kryo，而是从存储在 Hadoop 的分布式缓存中的每个版本的 JAR 中加载所需的类。序列化一个对象看起来像这样：

```
public byte[] serialize(Object foo, JarClassLoader cl) {
    final Class<?> kryoClass = cl.loadClass("com.esotericsoftware.kryo.Kryo");
    Object k = kryoClass.getConstructor().newInstance();
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    final Class<?> outputClass = cl.loadClass("com.esotericsoftware.kryo.io.Output");

    Object output = outputClass.getConstructor(OutputStream.class).newInstance(baos);
    Method writeObject = kryoClass.getMethod("writeObject", outputClass, Object.class);
    writeObject.invoke(k, output, foo);
    outputClass.getMethod("close").invoke(output);
    baos.close();
    byte[] bytes = baos.toByteArray();
    return bytes;
} 
```

**问题**
尽管这种方法可以用于实例化未配置的 Kryo 对象并序列化/恢复某些对象，但我们使用了更复杂的 Kryo 配置。这包括几个自定义序列化程序、注册的类 id 等等。例如，我们无法找到一种方法来为类设置自定义序列化程序而不会得到 NoClassDefFoundError - 以下代码不起作用：

```
Class<?> kryoClass = this.loadClass("com.esotericsoftware.kryo.Kryo");
Object kryo = kryoClass.getConstructor().newInstance();
Method addDefaultSerializer = kryoClass.getMethod("addDefaultSerializer", Class.class, Class.class);
addDefaultSerializer.invoke(kryo, URI.class, URISerializer.class); // throws NoClassDefFoundError 
```

最后一行抛出一个

```
java.lang.NoClassDefFoundError: com/esotericsoftware/kryo/Serializer 
```

因为`URISerializer`该类引用了 Kryo 的`Serializer`类并尝试使用它自己的类加载器（即 System 类加载器）来加载它，它不知道`Serializer`该类。

* * *

## (3) 使用中间序列化

目前最有前途的方法似乎是使用独立的中间序列化，例如使用[Gson](http://code.google.com/p/google-gson/ "GSON")或类似方法的 JSON，然后运行两个单独的作业：

1.  kryo:2.21.2-ourpatchbranch 在我们的常规存储中 -> JSON 在临时存储中
2.  临时存储中的 JSON -> 我们常规存储中的 kryo:2-22

**问题**
这个解决方案的最大问题是它大约使处理的数据的空间消耗增加了一倍。此外，我们需要另一种序列化方法，它对我们所有的数据都没有问题，我们需要首先对其进行调查。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T00:36:51.103

我会使用多个类加载器方法。

（包重命名也可以。它看起来确实很丑，但这是一次性的hack，所以美观和正确性可以退居二线。中间序列化似乎有风险 - 你使用 Kryo 是有原因的，这个原因将被否定通过使用不同的中间形式）。

整体设计将是：

```
child classloaders:      Old Kryo     New Kryo   <-- both with simple wrappers
                                \       /
                                 \     /
                                  \   /
                                   \ /
                                    |
default classloader:    domain model; controller for the re-serialization 
```

1.  在默认类加载器中加载域对象类
2.  使用修改后的 Kryo 版本和包装器代码加载 Jar。包装器有一个带有一个参数的静态“main”方法：要反序列化的文件的名称。通过默认类加载器的反射调用 main 方法：

    ```
     Class deserializer = deserializerClassLoader.loadClass("com.example.deserializer.Main");
        Method mainIn = deserializer.getMethod("main", String.class);
        Object graph = mainIn.invoke(null, "/path/to/input/file"); 
    ```

    1.  这种方法：
        1.  将文件反序列化为一个对象图
        2.  将对象放入共享空间。[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)是一种简单的方法，或者将其返回给包装脚本。
3.  当调用返回时，使用带有简单包装器的新序列化框架加载第二个 Jar。包装器有一个静态的“main”方法和一个参数来传递要序列化的文件名。通过默认类加载器的反射调用 main 方法：

    ```
     Class serializer = deserializerClassLoader.loadClass("com.example.serializer.Main");
        Method mainOut = deserializer.getMethod("main", Object.class, String.class);
        mainOut.invoke(null, graph, "/path/to/output/file"); 
    ```

    1.  这种方法
        1.  从 ThreadLocal 中检索对象
        2.  序列化对象并将其写入文件

**注意事项**

在代码片段中，为每个对象序列化和反序列化创建一个类加载器。您可能只想加载一次类加载器，发现主要方法并遍历文件，例如：

```
for (String file: files) {
    Object graph = mainIn.invoke(null, file + ".in");
    mainOut.invoke(null, graph, file + ".out");
} 
```

*域对象是否对任何*Kryo 类有任何引用？如果是这样，你有困难：

1.  如果引用只是一个类引用，例如调用一个方法，那么第一次使用该类会将两个 Kryo 版本中的一个加载到默认的类加载器中。这*可能*会导致问题，因为序列化或反序列化可能由错误版本的 Kryo 执行
2.  如果引用用于实例化任何 Kryo 对象并将引用存储在域模型（类或实例成员）中，那么 Kryo 实际上将在模型中序列化其自身的一部分。对于这种方法，这可能会破坏交易。

无论哪种情况，您的第一个方法应该是检查这些引用并消除它们。确保您已完成此操作的一种方法是确保默认类加载器无法访问*任何*Kryo 版本。如果域对象以任何方式引用 Kryo，则引用将失败（如果直接引用该类，则会出现 ClassNotFoundError，如果使用反射，则会出现 ClassNotFoundException）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:08:24.457

对于 2，您可以创建两个 jar 文件，其中包含序列化程序以及序列化程序新旧版本的所有依赖项，如下[所示](https://stackoverflow.com/questions/1729054/including-dependencies-in-a-jar-with-maven)。然后创建一个 map reduce 作业，将每个版本的代码加载到单独的类加载器中，并在中间添加一些胶水代码，用旧代码反序列化，然后用新代码序列化。

您必须小心，您的域对象与胶水代码加载到同一个类加载器中，并且序列化/反序列化的代码依赖于与胶水代码相同的类加载器，以便它们都看到相同的域对象类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-04T19:16:58.017

我不假思索地想到的最简单的方法是使用额外的 Java 应用程序为您进行转换。因此，您将二进制数据发送到辅助 Java 应用程序（简单的本地套接字可以很好地完成任务），因此您不必摆弄类加载器或包。

唯一需要考虑的是中间表示。您可能想要使用另一种序列化机制，或者如果时间没有问题，您可能想要使用 Java 的内部序列化。

使用第二个 Java 应用程序使您免于处理临时存储并在内存中执行所有操作。

一旦你拥有了这些套接字 + 第二个应用程序代码，你就会发现很多情况都可以派上用场。

也可以使用 jGroups 构建本地集群，毕竟使用套接字可以省去麻烦。jGroups 是我所知道的最简单的通信 API。只需形成一个逻辑通道并检查谁加入。最好它甚至可以在同一个 JVM 中工作，这使得测试变得容易，如果远程完成，可以将不同的物理服务器绑定在一起，就像它在本地应用程序中工作一样。

另一个可变的替代方案是使用 ZeroMQ 及其 ipc（进程间通信）协议。

# javascript - 在字符串中搜索 a 或 b - Javascript

> ID：16083266
> 
> 赞同：0
> 
> 时间：2013-04-18T12:41:27.603
> 
> 标签：javascript, search, indexof

如何在 JavaScript 中搜索我的字符串是否包含 a、b 或 c？

我需要测试字符串是否包含“is”或“test”或“string”。

```
var string = "This is my test string to search";
var result = string.indexOf("is"||"test"||"string"); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:46:01.613

这里最好使用正则表达式：

```
if ( /is|test|string/.test(string) ) { ... } 
```

但是，如果您想搜索单词，我建议使用 special character `\b`。

**参考：** [https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T12:43:09.270

尝试：

```
str.search(/is|test|string/) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:56:39.153

您可以使用[**`String.search`**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search). 在给定字符串中搜索正则表达式。

```
var str = "This is a sample text";
var re = /nothing|text|string/g
if (str.search(re) != -1) {
    midstring = " contains ";
} else {
    midstring = " does not contain ";
}
alert(str+ midstring + re); 
```

这是一个[**`fiddled`**](http://jsfiddle.net/gopinaghr/7Xm72/1/)版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:49:39.413

```
var string = "This is my test string to search";
string.match(/is|test|string/g); 
```

# sql - codeigniter 将复杂查询更改为活动记录

> ID：16083267
> 
> 赞同：0
> 
> 时间：2013-04-18T12:41:37.793
> 
> 标签：sql, codeigniter, activerecord

我有一个 codeigniter 应用程序。

我的活动记录语法完美运行，并且是：

```
 function get_as_09($q){
    $this->db->select('m3');
    $this->db->where('ProductCode', $q);
    $query = $this->db->get('ProductList');
    if($query->num_rows > 0){
        foreach ($query->result_array() as $row){
            $row_set[] = htmlentities(stripslashes($row['m3'])); //build an array
       }
       return $row_set;
    }
  } 
```

这有效地

```
select 'm3' from 'ProductList' where ProductCode='$1' 
```

我需要做的是将以下查询转换为活动记录类型查询，并按照上述活动记录语法将其返回给控制器：

```
select length from
(SELECT  
      [Length]
      ,CONCAT(([width]*1000),([thickness]*1000),REPLACE([ProductCode],concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options
  FROM [dbo].[dbo].[ProductList]) as p
  where options='25100cr' order by length 
```

我画了如下图，但这不起作用。

```
$this->db->select(length);
$this->db->from(SELECT  [Length],CONCAT(([width]*1000),([thickness]*1000),REPLACE[ProductCode],concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options
      FROM [dbo].[dbo].[ProductList]);
$this->db->where(options, $q);
$this->db->order(length, desc); 
```

一如既往的帮助表示赞赏。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:33:31.620

为此，您可以使用 codeigniter 的子查询方式来执行此操作，您将不得不破解 codeigniter。像这样转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在子查询写入可用现在这是您的带有活动记录的查询

```
$select =   array(
                'Length'
                'CONCAT(([width]*1000)',
                'thickness * 1000',
                'REPLACE(ProductCode, concat((width*1000),(thickness*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options'
);
$this->db->select($select);
$this->db->from('ProductList');

$Subquery = $this->db->_compile_select();

$this->db->_reset_select();

$this->db->select('length');
$this->db->from("($Subquery)");
$this->db->where('options','25100cr');
$this->db->order_by('length'); 
```

事情就完成了。干杯！！！注意：在使用子查询时，您必须使用

```
$this->db->from('myTable') 
```

代替

```
$this->db->get('myTable') 
```

运行查询。

[来源](https://stackoverflow.com/questions/11023318/using-mysql-where-in-clause-in-codeigniter/11031431#11031431)

# iphone - 如何重新创建分发配置文件

> ID：16083271
> 
> 赞同：1
> 
> 时间：2013-04-18T12:41:45.500
> 
> 标签：iphone, ios, app-store, ios-provisioning, code-signing-entitlements

将我的应用程序提交到应用程序商店（后来它被批准并发布）后，我收到一封电子邮件，说明：

> 缺少推送通知权利 - 您的应用似乎包含用于注册 Apple 推送通知服务的 API，但应用签名的权利不包括“aps-environment”权利...

通过[这篇文章](https://stackoverflow.com/questions/5719182/app-rejected-because-of-missing-push-notification-entitlement)，我了解到我需要重新创建个人资料，并再次提交应用新的个人资料辞职。

1.  如何重新创建个人资料？通过编辑和保存，还是通过删除它并创建一个新的？
2.  更重要的是 - 重新创建配置文件会影响应用商店中的现有应用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:45:01.757

好的，所以我急于发布应用商店的更新，迫不及待地等待答案。所以我抓住了这个机会，做到了，一路上找到了答案：

1.  在新的供应门户中，只需单击编辑并生成（无需再更改某些内容即可启用生成按钮）。
2.  不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:15:33.117

上述问题与推送通知有关。那么你在你的应用程序中使用推送通知吗？

如果没有，那么您必须通过编辑捆绑 ID 来更新配置文件。在开发者帐户中转到应用程序 ID 并取消选中特定应用程序中的 APN 选项。然后通过选择该捆绑 ID 来更新配置文件。

# r - R中带有边际箱线图的直方图

> ID：16083275
> 
> 赞同：5
> 
> 时间：2013-04-18T12:41:53.030
> 
> 标签：r, histogram, boxplot

如何使直方图中的 X 轴与边缘箱线图匹配？

```
data <- rnorm(1000)
nf <- layout(mat = matrix(c(1,2),2,1, byrow=TRUE),  height = c(1,3))
layout.show(nf)
par(mar=c(5.1, 4.1, 1.1, 2.1))
boxplot(data, horizontal=TRUE,  outline=FALSE)
hist(data) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T12:49:01.880

一种解决方案是将 in 设置为与`ylim=`in`boxplot()`相同的`xlim=`范围`hist()`。

```
set.seed(123)
data <- rnorm(1000)
nf <- layout(mat = matrix(c(1,2),2,1, byrow=TRUE),  height = c(1,3))
par(mar=c(5.1, 4.1, 1.1, 2.1))
boxplot(data, horizontal=TRUE,  outline=FALSE,ylim=c(-4,4))
hist(data,xlim=c(-4,4)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Xijs6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T12:04:35.463

使用**ggplot**和**grid**包。

```
library(gridExtra)
library(ggplot2)
library(grid)

p1 = ggplot(aes(x = mpg), data = mtcars) +
  geom_histogram(fill = "lightblue", color = "black",binwidth = 1) +
  scale_x_continuous(limits = c((min(mtcars$mpg)),(max(mtcars$mpg))), 
                     breaks = pretty(mtcars$mpg, n = 10)) +
  labs(x = "", y = "Count", title = ("Histogram & Boxplot of mpg"))

p2 = ggplot(aes(x = "", y = mpg), data = mtcars) +
  stat_boxplot(geom ='errorbar', width = 0.4) +
  geom_boxplot(outlier.colour = "red") +
  coord_flip() +
  scale_y_continuous(limits = c((min(mtcars$mpg)),(max(mtcars$mpg))), 
                     breaks = pretty(mtcars$mpg, n = 10))  +
  stat_summary(fun.y = mean, colour = "purple", geom = "point", 
               shape = 18, size = 3) +
  labs(x = "", y = "mpg")

grid.draw(rbind(ggplotGrob(p1), ggplotGrob(p2), size = "first")) 
```

# jquery - 我可以链接到 jQuery-ui 站点上的 CDN（“官方 jQuery CDN”），但我无法链接到 Google 的 . 为什么？

> ID：16083276
> 
> 赞同：0
> 
> 时间：2013-04-18T12:41:53.757
> 
> 标签：jquery, jquery-ui, cdn

当我链接到 Media Temple 的 ProCDN（jQuery-UI 网站上提供的那个）时，我的 jQuery-UI 代码可以完美执行：

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

但是，当我尝试链接到 Google 托管版本时，加载时间要长得多，并且网页上没有实现 jQuery 代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>   
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> 
```

我真的不知道为什么我不能走谷歌路线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:44:39.373

您的 Google 链接没有“http://” - 所以如果您在本地使用它，它会尝试加载“file://ajax.googleapis.com”

只需在开头添加 http://。

# oracle - 仅获取第一个重复记录 oracle

> ID：16083278
> 
> 赞同：1
> 
> 时间：2013-04-18T12:41:58.827
> 
> 标签：oracle, group-by, distinct

我有表格，我在这些表格上使用“内部联接”。我想获得唯一的数据，但有些值是重复的。这是我的结果表。但由于日期不同，我无法获得唯一的名称。我使用了不同的分组方式，但没有机会。

```
 HSB.Name    HMB.Date
    --------    -------------------
    Michael     15.04.2013 07:55:08
    Madonna     15.04.2013 10:58:17
    Madonna     15.04.2013 11:05:46
    Terry       15.04.2013 11:13:39
    Britney     15.04.2013 11:52:00
    Slash       15.04.2013 11:55:39
    Slash       15.04.2013 11:56:10 
```

我的 sql 是 ->

```
 select HSB.Name, HMB.Date 
     from HSB hsb        
     inner join HMB hmb
     on hsb.hsb_no = hmb.hmb_no
     And hsb.hsb_g_no = hmb.hmb_g_no
     where hsb.hsb_kod = '&kod'
     and hsb.hsb_date >= '&date1'
     and hsb.hsb_date < '&date2' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:48:15.457

请试试：

```
select Name,
    Date
FROM(
    select 
        HSB.Name, 
        HMB.Date,
        row_number() over (partition by HSB.Name order by HMB.Date) RNum
     from HSB hsb inner join HMB hmb on hsb.hsb_no = hmb.hmb_no
        And hsb.hsb_g_no = hmb.hmb_g_no
     where 
        hsb.hsb_kod = '&kod' and 
        hsb.hsb_date >= '&date1' and 
        hsb.hsb_date < '&date2'
)x WHERE RNum=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:58:23.623

如果您想获取最近与一个名称相关联的日期，请尝试以下查询。

```
 select HSB.Name, max(HMB.Date) as Date
 from HSB hsb        
 inner join HMB hmb
 on hsb.hsb_no = hmb.hmb_no
 And hsb.hsb_g_no = hmb.hmb_g_no
 where hsb.hsb_kod = '&kod'
 and hsb.hsb_date >= '&date1'
 and hsb.hsb_date < '&date2'
 group by HSB.Name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:46:21.637

select HSB.Name, max(HMB.Date) from HSB hsb
inner join HMB hmb on hsb.hsb_no = hmb.hmb_no and hsb.hsb_g_no = hmb.hmb_g_no where hsb.hsb_kod = '&kod' and hsb.hsb_date >= '&date1 ' 和 hsb.hsb_date < '&date2' 按名称分组

# visual-studio-2008 - WPF Fluent Ribbon 编译问题

> ID：16083279
> 
> 赞同：2
> 
> 时间：2013-04-18T12:42:01.830
> 
> 标签：visual-studio-2008, .net-3.5, ribbon, fluent, fluent-ribbon

我正在尝试使用 Visual Studio 2008 为 .NET 3.5 编译最新版本的 Fluent Ribbon (e709a1f6bb2e)，但我遇到了一些问题。

删除空的 (?) Office2007 主题和 Metro 主题（产生问题）后，编译器仍然显示错误，`Themes/generic.xaml`并且`Themes/Office2010/Black.xaml`...

```
"The tag "ObjectToImageConverter" does not exist in XML namespace 'clr-namespace:Fluent'." 
```

如您所见，Namespace 已添加到 Xaml，我可以`ObjectToImageConverter-class`在解决方案中找到 public。

有人知道我做错了什么吗？

# winforms - 通过 Appdomain 绑定的 ISessionFactory 对象

> ID：16083280
> 
> 赞同：1
> 
> 时间：2013-04-18T12:42:02.790
> 
> 标签：winforms, nhibernate, appdomain, sessionfactory

*（我对这个问题有点绝望，因为我还没有找到任何指向我想要的文章）。*

**无论如何：**

有没有办法在多个 s 之间共享一个`ISessionFactory`( ) ？`SessionFactoryImpl``AppDomain`

**- 或者 -**

是否可以从中产生`ISession`s`ISessionFactory`并将新创建的序列化为`ISession`不同的 s `Appdomain`？

**- 或者 -**

`ISessionFactory`在基于 Winforms 的应用程序中`ISession`，关于启动时间和内存消耗，您的成功案例是什么？

**长篇大论** *（对于那些喜欢细节的人）*：

*   我的应用程序是基于 ERP Winforms 的，可以产生多个“子应用程序”（表单）；
*   每个子应用都有自己的程序集，可以独立更新；
*   生成一个新的 AppDomain 可以很好地隔离`static`每个“子应用程序”的成员。当应用程序完成时，子程序 AppDomain 资源也可以被卸载。我们这样做了一段时间，但是由于 SessionFactory 成本高（在时间上并且主要在内存中），这种模型开始变得站不住脚（*目前，我们使用线程和`ThreadStatic`成员来保存每个子应用程序的特定信息*）；
*   我们非常支持延迟加载，所以我们也不能放弃这个功能。

**我已经尝试过的：**

*   `MarshalByRef`共享的类`ISessionFactory`：我无法让它工作（不记得为什么），但是序列化`ISessionFactory`无论如何都会导致内存重复（大量）。我对吗？
*   `MarshalByRef`生成`ISession`并将其序列化到另一个的类`AppDomain`：由于 ISession 在其父级上拥有它的属性`ISessionFactory`，现在处于其他边界，它给我带来了一些很好的期望，告诉我一些属性没有定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:59:51.950

我使用 Winforms 应用程序的成功案例是，我们在第一次运行应用程序时序列化配置，并在后续运行时加载序列化文件。这显着减少了应用程序启动时间。甚至可以使用序列化配置分发应用程序，以消除首次运行时的延迟。

序列化看起来像这样：

```
 private const string SERIALIZED_CONFIG = "configuration.bin";

    private Configuration GetConfiguration()

        Configuration config = null;
        config = LoadConfigurationFromFile();

        if (config == null)
        {
            // Create a new configuration, code omitted
            config = fluentConfig.BuildConfiguration();            
            SaveConfigurationToFile(config);
        }
    }

    private Configuration LoadConfigurationFromFile()
    {
        try
        {
            if (!IsConfigurationFileValid())
            {
                return null;
            }

            using (var file = File.Open(SERIALIZED_CONFIG, FileMode.Open))
            {
                var bf = new BinaryFormatter();
                return bf.Deserialize(file) as Configuration;
            }
        }
        catch (Exception ex)
        {
            return null;
        }
    }

    private bool IsConfigurationFileValid()
    {
        if (!File.Exists(SERIALIZED_CONFIG))
        {
            return false;
        }

        var configInfo = new FileInfo(SERIALIZED_CONFIG);

        // Assumes all assemblies are in same location and written at same time
        var asm = _assemblies.First();
        var asmInfo = new FileInfo(asm.Location);

        if (asmInfo.LastWriteTime > configInfo.LastWriteTime)
        {
            return false;
        }
        return true;
    }

    private void SaveConfigurationToFile(Configuration config)
    {

        using (var file = File.Open(SERIALIZED_CONFIG, FileMode.Create))
        {
            var bf = new BinaryFormatter();
            bf.Serialize(file, config);
        }
    } 
```

# php - 登录时自动刷新窗口

> ID：16083281
> 
> 赞同：0
> 
> 时间：2013-04-18T12:42:04.330
> 
> 标签：php, facebook, browser, login, refresh

我有一个可能在标签页中运行的 facebook 应用程序。如果用户没有登录，它会显示一个登录按钮。如果用户从另一个窗口/选项卡登录，我希望窗口自动刷新。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:46:20.753

我会在 javascript 中创建一个函数来检查用户是否已登录，如果已登录则刷新页面。假设我调用了这个函数`checkIfUserIsLoggedIn()`，然后我会把这个函数放在一个间隔中，`setInterval("checkIfUserIsLoggedIn()", intervalTime);` 这样你就可以让页面每 10 秒检查一次用户是否登录，如果是，让它刷新。

# java - JViewport 没有定位它的视图？

> ID：16083285
> 
> 赞同：1
> 
> 时间：2013-04-18T12:42:07.620
> 
> 标签：java, swing, view, jviewport

我正在为我的应用程序使用 Java Swing，并且我想利用 JViewport 在端口“后面”显示一些类似画布的面板的片段。但不知何故，视口永远不会定位它的视图，所以我必须做一些事情。我做错了什么，为什么这段代码不起作用？

以下是我在更大、更复杂的规模上所做的示例。

```
public class MyApp
{
  // THIS IS A TEMPORARY TEST TO GET VIEWPORT WORKING
  public static void main(String[] args)
  {
    JFrame frame = new JFrame();
    JViewport viewport = new JViewport();
    viewport.setOpaque(true);
    viewport.setBackground(Color.GRAY);
    frame.add(viewport, BorderLayout.CENTER);
    JPanel canvas = new JPanel(null);
    canvas.setBackground(Color.CYAN);
    viewport.setView(canvas);
    viewport.setViewSize(new Dimension(500, 500));
    viewport.setExtentSize(new Dimension(300, 300));
    viewport.setPreferredSize(new Dimension(300, 300));

    // item one
    JLabel label = new JLabel("This is a 32x32 box");
    label.setOpaque(true);
    label.setBackground(Color.GREEN);
    label.setIcon(Sprites.BOX2.getSprite());
    label.setBounds(0, 0, 200, 32); // position upper left, 200 wide
    label.setHorizontalAlignment(SwingConstants.LEFT);
    canvas.add(label);

    // item two
    JLabel label2 = new JLabel("This is a 32x32 wall");
    label2.setOpaque(true);
    label2.setBackground(Color.ORANGE);
    label2.setIcon(Sprites.WALL1.getSprite());
    label2.setBounds(300, 468, 200, 32); // position lower right, 200 wide
    label2.setHorizontalAlignment(SwingConstants.RIGHT);
    label2.setHorizontalTextPosition(SwingConstants.LEFT);
    canvas.add(label2);

    // this should scroll the canvas to the left and up, so the box becomes invisible and the wall visible
    viewport.setViewPosition(new Point(200, 200));  

    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
  }
} 
```

结果是“画布”只是停留在 0,0，它永远不会像我使用 setViewPostition() 那样移动到 200,200。无论空布局管理器如何，它的内容都完美定位。为了简单起见，我只是将画布写成 JPanel，但它实际上是一个复杂的 JLayeredPane。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:05:30.620

你的情况有几个问题：

*   您使用`null`-layout/absolute 定位：永远不要这样做。这是一种不好的做法，一种非常糟糕和讨厌的习惯，它总是会导致同一个问题：大量的问题。
*   不要调用`setPreferredSize()`：使用适当的`LayoutManager`或覆盖`getPreferredSize()`
*   考虑`Scrollable`为您的画布实现以及`getPreferredScrollableViewportSize()`返回的位置`new Dimension(300, 300)`（目标视口范围大小）
*   调用 setSize()/setExtentSize() 几乎没有用，因为这将被 LayoutManager 覆盖。

# visual-studio - 当解决方案配置与所有项目不匹配时，使用 MS build 构建解决方案

> ID：16083286
> 
> 赞同：1
> 
> 时间：2013-04-18T12:42:13.930
> 
> 标签：visual-studio, msbuild, solution

我有一个具有配置的解决方案，我们称之为`A`. 该解决方案中 80% 的项目也有配置`A`，但其余项目没有。尽管它们确实需要建造。

当我构建时，`msbuild proj.sol /p:Configuration=A /p:Platform=x64`我收到这样的错误消息

```
error MSB4057: The target "Build" does not exist in the project. 
```

似乎我可以构建我的项目的移动，但不能构建配置名称与解决方案不匹配的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-07T14:27:16.377

我刚遇到同样的问题。它已通过安装[F# Tools for Visual Studio Express 2012 for Web并按照](http://www.microsoft.com/en-in/download/details.aspx?id=34675)[Xamarin 论坛](https://forums.xamarin.com/discussion/15774/the-target-build-does-not-exist-in-the-project-error-when-trying-to-compile-f-project)中所述的步骤重新启动 Xamarin 来修复

该错误已提交[here](https://bugzilla.xamarin.com/show_bug.cgi?id=19208)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:55:19.583

您需要更新解决方案配置“A”以确保其他项目具有解决方案配置“A”的有效项目配置

1.  在 Visual Studio 中，转到菜单构建 > 配置管理器。
2.  在 Active Solution Configurations 下拉列表中选择配置“A”
3.  选择要用于每个项目的配置。请注意，它不必是“A”。它可以是任何有效的项目配置。
4.  确保也为项目设置了平台设置。它们可以不同于解决方案平台。IE 解决方案 x64，但一个项目可能设置为 x86。

msbuild proj.sln /p:Configuration=A /p:Platform=x64

![配置管理器](https://i.stack.imgur.com/ODCAz.png)

# android - 从 Android 中的 SMS 获取收件人号码

> ID：16083288
> 
> 赞同：5
> 
> 时间：2013-04-18T12:42:19.130
> 
> 标签：android, sms

这听起来可能很奇怪，但我想在手机上找到我收到短信的号码。我可以得到里面存在的 SIM 卡的手机号码`telephonyManager.getLine1Number()`（虽然不能保证我会得到电话号码）。但是如果我的手机中有两个 SIM 卡怎么办？因为`telephonyManager.getLine1Number()`只会返回我第一个/活动 SIM 的 SIM 信息。

**编辑**：我也尝试获取收到任何短信时获得的所有信息，但我找不到任何有趣的东西。

那么有没有办法从收到的短信中获取收件人的号码（而不是发件人的号码）？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-09-25T11:44:10.463

试试这个代码，

```

```
public class SmsReceiver extends BroadcastReceiver { 
```

@覆盖
公共无效 onReceive（上下文上下文，意图意图）{

Bundle extras = intent.getExtras();
if (extras == null)
    return;

Object[] pdus = (Object[]) extras.get("pdus");

String[] fromAddress = new String[pdus.length];
SmsMessage[] message = new SmsMessage[pdus.length]; 

for (int i = 0; i < pdus.length; i++) {

     message[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
    fromAddress[i] = message[i].getOriginatingAddress();   // it will give the address from where SMS was originated.                  

} 
```

}

# knockout.js - KnockoutJS，将数组中的对象字段传递为价值

> ID：16083291
> 
> 赞同：1
> 
> 时间：2013-04-18T12:42:39.800
> 
> 标签：knockout.js

是否有可能将可观察数组中的对象字段作为输入值传递？例如，我需要类似这样的东西：

```
 <input type="text" data-bind="value: persons()[0].name"/> 
```

所以我可以编辑数组中的一个对象字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:57:21.757

它有效（只是出于好奇对我的一个项目进行了测试）

但是，您的 "persons" 数组是可淘汰的可观察数组。当您启动 Web 应用程序时，绑定操作可能会失败，因为“persons”数组为空或未填充至少一个对象。

如果您真的想这样做，我建议您首先检查您的绑定是否填充了 people 数组，例如：

```
<input type="text" data-bind="value: persons().length ? persons()[0].name : null"/> 
```

无论数组的初始化状态如何，您都可以确保绑定操作不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:11:23.383

研究在淘汰赛中使用 foreach 绑定，在下面的示例中，我使用了注释绑定和 foreach 绑定。

```
 <tbody>
                             <!-- ko foreach: Movies-->
                             <tr>
                              <td data-bind="text: Title"></td>
                              <td data-bind="text: Description"></td>
                              <td data-bind="text: Rating"></td>
                             </tr>
                              <!-- /ko -->
                            </tbody>
                        </table> 
```

# css - SASS/SCSS 对象键值循环

> ID：16083292
> 
> 赞同：18
> 
> 时间：2013-04-18T12:42:42.983
> 
> 标签：css, loops, sass, compass-sass

看看这个例子：

```
@include font-face('Entypo', font-files('entypo.woff'));

.icon {
  display: inline;
  font: 400 40px/40px Entypo;
}

.icon-star {
  @extend .icon;

  &:after {
    content: "\2605";
  }
}

.icon-lightning {
  @extend .icon;

  &:after {
    content: "\26A1";
  }
} 
```

我想让事情尽可能干燥，所以我想知道以下是否可行，如果可以，怎么办？

```
@include font-face('Entypo', font-files('entypo.woff'));

.icon {
  display: inline;
  font: 400 40px/40px Entypo;
}

$icons {
  $star: "\2605";
  $lightning: "\26A1";
}

@each $icon in $icons {
  $key = $icon{key}; // ???
  $value = $icon{value}; // ???

  .icon-#{$key} {
    @extend .icon;

    &:after {
      content: $value;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-07-22T21:01:04.740

Sass 3.3（2014/03/07 发布）现在允许您使用地图：

```
@include font-face('Entypo', font-files('entypo.woff'));

.icon {
  display: inline;
  font: 400 40px/40px Entypo;
}

$icons: (
  star: "\2605",
  lightning: "\26A1"
);

@each $key, $value in $icons {
  .icon-#{$key} {
    @extend .icon;

    &:after {
      content: $value;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-18T12:50:10.143

Sass 目前不支持映射。你现在必须忍受列表的列表。

```
$icons: star "\2605", lightning "\26A1";

@each $icon in $icons {
  $key: nth($icon, 1);
  $value: nth($icon, 2);

  .icon-#{$key} {
    @extend .icon;

    &:after {
      content: $value;
    }
  }
} 
```

# jquery - asp.net 禁用文本框以在页面加载时自动填充

> ID：16083300
> 
> 赞同：0
> 
> 时间：2013-04-18T12:43:20.170
> 
> 标签：jquery, asp.net, html

在我的项目中，当页面加载时，我看到文本框充满了旧条目。有没有办法阻止它？我希望用户自己填写。

我尝试使用`autocomplete='off'`但没有用。我能做些什么来阻止它？

这是我的html代码，

```
<asp:TextBox ID="txt_email_change" runat="server" CssClass="blue_input lower_case" Width="240px" autocomplete="off"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:49:39.937

您使用的是 HTML4 还是 HTML5？

HTML5 支持`autocomplete="off"`

# android - Google Play、三星应用和亚马逊：如何将免费应用更改为付费

> ID：16083304
> 
> 赞同：-5
> 
> 时间：2013-04-18T12:43:33.817
> 
> 标签：android, ios, coronasdk

我们已经在所有主要商店上传了一个应用程序并保持免费现在我们想将该应用程序设为付费应用程序，如何做到这一点，我们是否需要上传新版本并更改为付费，或者我们可以直接更改编辑它请帮助我们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:46:29.817

这不是一个编程问题，但无论如何我都会帮助你。

您需要上传应用程序的新版本，并将其设为付费版本。您无法将免费应用程序更改为付费应用程序，但您可以将付费应用程序变为免费应用程序。您在第一次发布应用程序时就同意了这一点。

> 请注意，一旦您免费发布了应用程序，您以后就不能再为该应用程序添加价格。您需要创建新应用并向新应用添加价格。

来源：[https ://support.google.com/googleplay/android-developer/answer/138412?hl=en](https://support.google.com/googleplay/android-developer/answer/138412?hl=en)

# c# - 立即响应数据库中的事件应向 Windows 服务发送信号

> ID：16083305
> 
> 赞同：0
> 
> 时间：2013-04-18T12:43:34.873
> 
> 标签：c#, sql-server

场景是：

我有一个 Sql server 2008。当数据库中发生事件时，数据库应该通知 windows 服务应该执行一些操作。

我不想在间隔中等待新任务/数据库事件做某事。我需要立即采取行动。

做到这一点的最佳方法是什么？

1.  我想过制作一个 CLR 程序集并将其链接到数据库。然后程序集应该使用例如 tcp/ip 连接到 windows 服务然后服务被唤醒并完成工作

2.  或者创建一个本地 inproc com 程序集并从 db 加载它

提前感谢所有提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:49:09.677

我会创建一个包含`SqlDependency`.

它的功能有点像`FileSystemWatcher`, 但用于 sql 数据库。

[http://msdn.microsoft.com/en-gb/library/a52dhwx7(v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/a52dhwx7(v=vs.80).aspx)

# jquery - ASP .Net MVC - 从共享文件夹重定向视图页面，而不在 jquery 中共享控制器

> ID：16083307
> 
> 赞同：0
> 
> 时间：2013-04-18T12:43:46.573
> 
> 标签：jquery, asp.net-mvc-2

我有一个包含在共享文件夹中的**Test.aspx页面。**我没有共享控制器。

在我的主视图页面中，当我得到一个结果数据时，意味着我想从主页面重定向到`Error`Test.aspx**页面**。`jquery $.ajax`

 **如何在没有相应控制器的情况下重定向视图页面以及如何使用 jquery 来实现这一点？

```
window.location.href = "/path/"; 
```

是否可以在没有控制器的情况下重定向视图页面..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:47:06.120

> 如何在没有相应控制器的情况下重定向视图页面

不可能而且没有意义。在 ASP.NET MVC 视图中不能也不应该直接提供服务。

因此，您首先声明将返回此视图的控制器操作，并且在您的 AJAX 调用中您只是指向它：

```
window.location.href = "somecontroller/someaction"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:34:08.077

如果不通过控制器，您不能直接从 MVC 应用程序请求视图。它从未为此设计（并且在大多数情况下明确阻止它）。话虽这么说，可以切换从控制器的操作返回的视图，实际上默认值是这样做的`HandleErrorAttribute`。与典型的 ASP.NET 应用程序不同，它会在发生异常时将您重定向到诸如 error.aspx 之类的页面，它`HandleErrorAttribute`采用视图名称，并在发生错误时返回该视图。但是，它不会将您重定向到您最初请求的页面。因此，如果您请求一个页面来查看某人的详细信息 (People/Details/123) 并遇到错误，则 URL 将保持不变，但返回的视图将是错误视图的视图。

请记住，该`HandleErrorAttribute`属性不会处理在 MVC 之外发生的错误。所以一般的 IIS 和 ASP.NET 错误不会被它处理。

如果您想使用 javascript 重定向到错误视图，您应该使用`HandleErrorAttribute`. 如果你想拥有一个完整的页面而不仅仅是一个视图，我建议向 Home Controller 添加一个操作（甚至创建一个名为 Errors 的控制器）并从中请求页面。如果您不喜欢使用请求页面的想法，`/Home/Error`或者`/Errors/Exception`您始终可以向应用程序添加新路由，以便将其缩短为 /Error 或 /Exception。

```
routes.MapRoute("ErrorPage", // Route name
                "Error", // URL with parameters
                new {controller = "Home", action = "Error"}); 
```

或者

```
routes.MapRoute("ExceptionPage", // Route name
                "Exception", // URL with parameters
                new {controller = "Errors", action = "Exception"}); 
```**

# asp.net-mvc - 从同一个 mvc 应用程序调用 web api 端点超时

> ID：16083308
> 
> 赞同：1
> 
> 时间：2013-04-18T12:43:46.843
> 
> 标签：asp.net-mvc, iis, asp.net-web-api

我有一个使用 ASP.NET Web API 实现的 REST 服务。由于某些原因，我需要从同一应用程序中调用其中一个端点并报告从端点获得响应所花费的时间。为此添加了一个普通的 MVC 控制器，其操作如下

```
public class HealthMonitoringController : Controller
{
    //
    // GET: /HealthMonitoring/

    public ContentResult GetResponseTime(string id)
    {
        var startDateTime = DateTime.Now;
        var httpWebRequest = (HttpWebRequest) WebRequest.Create(<<REST endpoint>>);
        httpWebRequest.Method = WebRequestMethods.Http.Get;
        httpWebRequest.Accept = "application/json;charset=utf-8";
        httpWebRequest.Headers.Add("Accept-Language", "en-GB");
        httpWebRequest.GetResponse();
        var duration = (int) DateTime.Now.Subtract(startDateTime).TotalMilliseconds;
        return Content(String.Format("response time:{0}", duration.ToString(CultureInfo.InvariantCulture)));
    }
} 
```

正如您在上面看到的，我正在使用一个`HttpWebRequest`类来调用托管在同一网站中的 REST 端点。我记录了请求前后的时间并返回该时间。

问题

我们有一个监控工具，它调用这条路线来获取记录的响应时间。监控工具每 1 分钟调用一次该路由。这通常会工作一段时间，然后`httpWebRequest.GetResponse()`无明显原因开始超时。事件日志和 IIS 日志中没有任何内容

如果我重新启动应用程序池，这个东西会再次开始工作一段时间，然后在一段时间后停止。

虽然上述事情不起作用，但如果我让 REST 端点手动调用自己，它就会起作用。所以 REST 端点没有问题。

在这一点上我完全一无所知。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:57:43.670

首先，来自同一个域的“健康检查”是无关紧要的；并且以这种方式检查延迟尤其简单。了解您有问题并寻找跟踪此问题的方法，使用跟踪日志或 elmah，而不是重复 ping 到端点。

话虽如此，如果您想检查 API 是否正常工作，您可以实例化控制器并直接调用该方法。这将测试*访问*部分，而不会将问题与潜在的套接字问题（`WebRequest`/ `WebClient`/* 库）分层。正如我所提到的，尽管您并没有真正陷入延迟，但无论如何延迟在这种情况下都是无用的。

```
var api = new ApiController();
try {
  api.SomeMethod("param1", "param2");
  return Content("works");
} catch (Exception ex) {
  return Content("failed: " + ex.Message);
} 
```

# iphone - 图形和动画：数字变化和彩色条

> ID：16083309
> 
> 赞同：0
> 
> 时间：2013-04-18T12:43:50.930
> 
> 标签：iphone, ios, objective-c, uianimation

我想以这样的方式为附加的屏幕设置动画，当屏幕出现在屏幕上时：

1) 数字将从动画`0`到最终值，即`1`- `2`- `3`-.... `51`-`52`

2) 每个条形将从一条细线开始，然后向一侧延伸，直到达到规定的尺寸。

3）所有动画将同时发生。

4）如果可能的话，如何在条形下方添加阴影？

5）如何实现栏（以图形方式）？有什么例子吗？

![在此处输入图像描述](https://i.stack.imgur.com/vgxWN.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:00:29.680

对于酒吧本身，使用简单的 UIView 实例。导入后`<QuartzCore/QuartzCore.h>`，您可以通过图层 ( `view.layer`) 为它们设置边框和阴影。参见CALayer：[https ://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)

```
borderWidth, borderColor, backgroundColor 
shadowOpacity, shadowRadius, shadowOffset, shadowColor, shadowPath 
```

对于数字的动画，使用计时器并增加数字，直到达到实际值。嗯。像这样：

```
CGFloat animationDuration = 1.0;
self.targetValue = 50;
[NSTimer scheduledTimerWithTimeInterval:animationDuration/targetValue target:self selector:@selector(increaseValue:) userInfo:nil repeats:YES]; 
```

然后是这样的方法：

```
- (void)increaseValue:(NSTimer*)timer;
{
    self.label.text = [NSString stringWithFormat: @"%d", [self.label.text intValue]+1];

    if ([self.label.text intValue] == self.targetValue) {
        [timer invalidate];
    }
} 
```

对于动画，只需调整帧的大小：

```
[UIView animateWithDuration:animationDuration animations:^{
    CGRect rect = self.barView.frame;
    rect.size.width = self.targetValue;
    self.barView.frame = rect;
}]; 
```

# excel - 使用 Excel 公式更新表格

> ID：16083313
> 
> 赞同：1
> 
> 时间：2013-04-18T12:44:08.097
> 
> 标签：excel, excel-formula

我有两个工作日的日期，`first_date`并且`second_date`.

我有一个工作日期递减的数据表：

```
second_date        value 1    
second_date - 1    value 2    
second_date - 2    value 3    
   ....             ....    
first_date         value n    
first_date -1      value n + 1    
   ....             .... 
```

**第一次约会后桌子不会停止。**

我想绘制 first_date 和 second_date 之间的值。我找到了一种动态选择 X/Y 值的方法：[Excel variables X values](https://stackoverflow.com/questions/16042445/excel-variables-x-values/16047124?noredirect=1#comment22957934_16047124)

但是，现在我遇到了另一个问题，当我选择超出数据表范围的日期时，它不会绘制我所要求的内容（这是正常的）。我想根据我的日期更新我的数据表。

我的数据表中的日期是简单构建的：`=second_date`在第一行 ( `D4`) 中，`=+WORKDAY(D4,-1)`在第二行中，我使用单击和拖动工具递归地构建其他行。

有没有办法在没有 VBA 的情况下阻止这种递归到我的第一次约会？您将如何仅使用公式构建这样的表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T23:13:11.340

在不使用 VBA 的情况下，我认为动态生成数据的唯一方法是在两个日期之间设置的时间范围内有条件地生成数据。正如您所说，您只需要大约 3 个月的数据，那么额外的“空”单元格不会显着影响性能。

具体而言，将您的公式从 D5 更改为以下（假设 D4=second_date）：

> =IF(IFERROR(WORKDAY(D4,-1)>=first_date,FALSE),WORKDAY(D4,-1),#N/A)

使用类似的条件逻辑在第二列中生成您的值。您要确保如果不满足日期条件，它会输出 #N/A 值。这在生成图表时很重要（更多内容见下文）。

您可以像通常一样最初生成图表，包括表格的最大尺寸（最多 3 个月：~60 个工作日）。当您更改日期时，它将在您的范围之外的日期包含#N/A 运算符。该图表将忽略这些数据集，并调整比例，从而有效地创建一个仅包含用户想要的日期范围的图表。

如果包含#N/A 是一个问题，还有一些其他选择。您可以创建条件格式，使#N/A 的字体为白色，以获得美观​​的分辨率。或者您可以将图表配置为忽略空单元格并在上面的公式“”中替换#N/A，达到相同的结果。

希望这可以帮助。请让我知道是否需要进一步澄清或这不符合您的特定需求。干杯

# ruby-on-rails - 在 Rails 的 application_helper.rb 代码中测试 flash 消息方法

> ID：16083317
> 
> 赞同：2
> 
> 时间：2013-04-18T12:44:21.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing

我对测试驱动开发有点陌生，我想学习如何覆盖尽可能多的代码，这样当我在 Rails 中制作更复杂的应用程序时，我将能够防止引入错误。

我有一些代码，`application_helper.rb`其中样式会向 Twitter Bootstrap 类发送消息，我想为我编写的代码编写一个测试，所以如果有任何变化，我会在它变得有点问题之前知道它。

```
#application_helper.rb
module ApplicationHelper
  def flash_class(type)
    case type
    when :alert
      "alert-error"
    when :notice
      "alert-info"
    else
      ""
    end
  end
end 
```

我的`application.html.erb`视图有以下代码使用上面的帮助方法显示 Flash 消息。

```
#application.html.erb
<% flash.each do |type, message| %>
  <div class="alert <%= flash_class type %>">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <%= message %>
  </div>
<% end %> 
```

我将编写哪种类型的测试来测试代码是否`application_helper.rb`有效，我将如何编写该测试？我还在使用[shoulda-context](https://github.com/thoughtbot/shoulda-context) gem 进行测试编写，但我不在乎测试是否以标准 Rails`test_with_lots_of_underscores`样式编写。

我正在使用[Cloud9](http://c9.io)使用 Ruby 1.9.3（补丁级别 327）和 Rails 3.2.13 编写应用程序。我正在开发的应用程序的 repoosiroty[在这个 Github 存储库中](https://github.com/davblayn/boarderline)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:22:19.440

像这样的东西怎么样：

```
class ApplicationHelperTest < Test::Unit::TestCase
  context "flash_class" do

    should "map :alert symbol to 'alert-error' string" do
      assert_equal 'alert-error', flash_class(:alert)
    end

    should "map :notice symbol to 'alert-info' string" do
      assert_equal 'alert-info', flash_class(:notice)
    end

    should "map anything else to empty string" do
      assert_equal '', flash_class(:blah)
    end

  end
end 
```

# excel - 将一系列单元格从工作簿复制到我在代码中创建的工作簿时，应用程序定义错误

> ID：16083318
> 
> 赞同：0
> 
> 时间：2013-04-18T12:44:23.340
> 
> 标签：excel, excel-2007, vba

我在星号线上得到了错误。我浏览了很多我发现很多我复制了相同的答案，但仍然收到此错误。我不确定我做错了什么。

请帮忙。提前致谢。

```
Sub splitIntoCsv()
    Dim wbIn
    Dim wbIn1 As Workbook
    Dim header, ranges, range_lower, range_upper, rangeCopy As Variant
    Dim rangeVariable As String
    Dim commacheck, rows, columns As Integer

    Set wbIn = CreateObject("Excel.Application")
    wbIn.Workbooks.Add
    wbIn.Worksheets(1).Name = "TestData"
    Set wbIn1 = Workbooks.Open(Sheet1.Range("B1").Value, True, True)

    rows = wbIn1.Sheets(1).UsedRange.rows.Count
    columns = wbIn1.Sheets(1).UsedRange.columns.Count
    header = Split(ThisWorkbook.Sheets(1).Range("B2").Value, ",")
    rangeVariable = ThisWorkbook.Sheets(1).Range("B3").Value
    commacheck = InStr(rangeVariable, ",")

    If commacheck = 0 Then
        rangeVariable = rangeVariable & ","
    End If

    ranges = Split(rangeVariable, ",")
    For i = LBound(ranges) To UBound(ranges) - 1
        For j = LBound(header) To UBound(header)
            wbIn.Worksheets(1).Cells(1, j + 1).Value = header(j)
        Next j

        range_lower = Split(ranges(i), "-")(0)
        range_upper = Split(ranges(i), "-")(1)

        With wbIn1.Sheets(1)
           rangeCopy = .Range(.Cells(1 + range_lower, 1), .Cells(1 + range_upper, columns)).Value
        End With

        With wbIn.Worksheets(1)  
          *********        
            .Range(.Cells(1 + range_lower, 1), .Cells(1 + range_upper, columns)).Value = rangeCopy
          *********
        End With

    Next i

    wbIn1.Close SaveChanges:=True

    wbIn.DisplayAlerts = False
    wbIn.Worksheets(1).SaveAs Filename:="D:\RaghuDev\raghu.csv", FileFormat:=xlCSV, CreateBackup:=False
    wbIn.Quit        
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:33:52.370

我没有收到同样的错误，但您可以在新的 Excel 报告中尝试以下测试吗？我试图重新创建您问题的关键区域。

只需确保放入一些示例数据并选择 1 x 3 的范围。

```
Sub test()

    Dim wbIn
    Set wbIn = CreateObject("Excel.Application")
    wbIn.Workbooks.Add
    wbIn.Worksheets(1).Name = "TestData"

    Dim r As Variant, columns As Integer

    r = Selection.Value
    columns = 3

    With wbIn.Worksheets(1)
        .Range(.Cells(1, 1), .Cells(1, columns)).Value = r
    End With

End Sub 
```

* * *

还尝试定义变体：

```
ReDim rangeCopy(1 to (range_upper - range_lower + 1), 1 to columns) as Variant

With wbIn1.Sheets(1)
   rangeCopy = .Range(.Cells(1 + range_lower, 1), .Cells(1 + range_upper, columns)).Value
End With

With wbIn.Worksheets(1)  
    .Range(.Cells(1 + range_lower, 1), .Cells(1 + range_upper, columns)).Value = rangeCopy
End With 
```

# c++ - 如何在 BOOST TEST 中取消“致命错误”检测

> ID：16083323
> 
> 赞同：3
> 
> 时间：2013-04-18T12:44:34.927
> 
> 标签：c++, boost-test

我收到一个错误：`unknown location(0): fatal error in "suite_1_test_1": child has exited; pid: 5817; uid: 0; exit value: 255`

在里面我用(after )`suite_1_test_1`运行一个程序，它可能会以不是的错误代码退出。此错误代码指示程序发生了什么。`A``execvp()``fork()``0``A`

问题是，如果我得到这个`fatal error`，我就无法处理这个`exit()`值，并且`BOOST TEST`立即退出。

我可以以某种方式将其关闭一会儿吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:00:46.667

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:14:57.557

似乎 boost 寄存器信号处理程序或其他东西，仍然从分叉（和覆盖）进程中捕获错误。您将很难从该子进程中“解开”测试框架。

但是，单元测试框架很少与子进程的产生一起使用，所以我不会在 Boost.Test 中使用 fork 和 exec*。将这些调用从您正在测试的单元中排除。毕竟，流程不是一个单一的单元，它更像是一个整体。我猜你不会有很多这样的子流程，所以测试这些流程与另一个框架或只是一个简单的脚本的协作应该不会有太大的伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:03:57.023

据我了解 execvp()[替换了](http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/exec.html)您的测试程序。所以 Boost.Test 不再运行。它仅在失败的情况下返回。在这种情况下，我不会将它与 Boost.Test 一起使用。

# spring - 使用 Spring 和 Apache Camel 在 ActiveMQ 中获取 JSON 数据

> ID：16083324
> 
> 赞同：0
> 
> 时间：2013-04-18T12:44:35.997
> 
> 标签：spring, activemq, apache-camel

我对此很陌生，但我想从此网址检索一个 json 文件：[https ://builds.apache.org/job/Accumulo-1.5/api/json](https://builds.apache.org/job/Accumulo-1.5/api/json)

我想把这个网址放在我的 ActiveMQ 我的代码如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://camel.apache.org/schema/spring 
   http://camel.apache.org/schema/spring/camel-spring.xsd">

<bean id="jms" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <!--Link naar activemq-->
            <property name="brokerURL" value="tcp://localhost:61616"/>
        </bean>
    </property>
</bean>

<bean id="downloadLogger" class="camelinaction.DownloadLogger"/>

<camelContext xmlns="http://camel.apache.org/schema/spring">
    <dataFormats>
    <json id="json" library="Jackson"/>
    </dataFormats>

    <route>
        <from uri="jetty:https://builds.apache.org:443/job/Accumulo-1.5/api/json"/>
        <process ref="downloadLogger"/>
        <to uri="jms:TestQueue"/>
    </route>
    <route>
        <from uri="jms:TestQueue"/>
        <process ref="downloadLogger"/>
        <to uri="file:src/result"/>
    </route>
</camelContext>

</beans> 
```

队列正在工作。我试图将一个 xml 文件放入队列中，这不是问题。但是，我的路由配置的输入是指向现有 url 的链接。

这可能吗？如果是，我的错是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:00:28.930

使用 Java DSL 而不是 Spring DSL 修复了它。

解决方案：

```
@Component
public class AccumoloToJmsRouteBuilder extends SpringRouteBuilder {

  @Override
  public void configure() throws Exception {

    from("timer://foo?fixedRate=true&delay=0&period=2000&repeatCount=1")
        .setHeader(Exchange.HTTP_METHOD, constant("GET"))
        .to("https://builds.apache.org:443/job/Accumulo-1.5/api/json")
        .convertBodyTo(String.class)
        .to("myProcessor")
        .log(LoggingLevel.DEBUG, "com.project", "HTTP GET response body: ${body}")
        .to("activemq://TestQueue");

  }
} 
```

# jsf - 有没有办法将 EJB 注入自定义资源包

> ID：16083325
> 
> 赞同：0
> 
> 时间：2013-04-18T12:44:37.143
> 
> 标签：jsf, ejb, resourcebundle

我正在尝试构建一个从数据库而不是属性文件获取消息的资源包。我做了一些扩展 ResourceBundle、ResourceBundle.Control 和 ListResourceBundle 的测试，我想我走在正确的道路上。

当我需要查询实际数据库以从我的 ResourceBundle 实现中获取消息时，我刚刚达到了这一点。我想利用 EJB 层上的所有 JPA 基础架构来运行查询并实例化将存储密钥、消息和语言环境的对象。因此，如果我可以将我的会话 bean @EJB-inject 到 ResourceBundle 中，那将是完美的，但我找不到这样做的方法。

这是我的 ResourceBundle 代码：

```
@ManagedBean(eager=true)
@ApplicationScoped
public class ResourceDicWeb extends ListResourceBundle {

@EJB
private MyDAO myDAO;

@Override
protected Object[][] getContents() {
    List<DicWeb> dicWeb = updateDictionary();

    Object[][] content = new Object[dicWeb.size()][2];

    for(int i = 0; i <= dicWeb.size(); i++) {
        content[i][0] = dicWeb.get(i).getAtrKey();
        content[i][1] = dicWeb.get(i).getAtrMessage();
    }

    return content;
}

    private List<DicWeb> updateDictionary() {
        return myDAO.fetchDictionary(); // at this point myDAO is always null
    }

} 
```

我的下一步是使用老式的 jdbc 直接从资源包创建数据库连接，但这绝对是最后的选择。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:01:29.937

如果注入不起作用，那么您仍然应该能够通过`JNDI`.

```
Context ctx = new InitialContext();
MyDao myDao = (MyDao) ctx.lookup("myapp/myejbmodule/MyDao!org.myapp.ejb.MyDao"); 
```

# jquery - 如何在网页上获取非均匀滚动元素和分层的“窗帘式”背景？

> ID：16083329
> 
> 赞同：0
> 
> 时间：2013-04-18T12:44:41.003
> 
> 标签：jquery, html, css

我说的是这样的网站[FullToss one](http://www.espncricinfo.com/ci/content/zones/fulltoss/index.html)和[this ASUS one](http://eee.asus.com/en/transformer-300/features)。

我对每个浮动元素似乎以不同的速度滚动着迷。以及当用户向下或向上滚动页面时，背景如何像窗帘一样分层和升起，隐藏以前可见的元素，并显示新的元素。

我只是无法通过编写 CSS/jQUery 来实现这种效果。任何帮助或一个小的工作示例都会有所帮助！

**编辑：**
感谢 Andrew 和 Sevenseacat 向我指出“视差”效果。我现在知道有[几个网站都在使用它](http://www.awwwards.com/30-great-websites-with-parallax-scrolling.html)，包括[这个疯狂的循环滚动](http://unfold.no/)的网站，以及[这个甚至没有滚动条的 Range Rover 网站](https://victoriabeckham.landrover.com/INT)！

我接受了 Scott 的回答，因为它直接回答了我的问题，但也感谢 Andrew 为我提供了更多资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:57:47.860

查看第一个链接的源代码，它似乎使用一个主要的 JQuery 插件来处理滚动事件 - Parallax。[http://stephband.info/jparallax/](http://stephband.info/jparallax/)。这允许开发人员设置页面不同部分相对于正常滚动事件的滚动速度。以下代码是第一个链接的摘录，它应该为正在发生的事情提供一些上下文。

```
$(document).ready(function(){

//.parallax(xPosition, speedFactor, outerHeight) options:
//xPosition - Horizontal position of the element
//inertia - speed to move relative to vertical scroll. Example: 0.1 is one tenth the speed of scrolling, 2 is twice the speed of scrolling
//outerHeight (true/false) - Whether or not jQuery should use it's outerHeight option to determine when a section is in the viewport
$('#first').parallax("25%", 0.1);
$('.ft1-small-1-bg').parallax("75%", 0.4);
$('.ft1-small-2-bg').parallax("75%", 0.2);

$('#second').parallax("25%", 0.1);
$('.ft2-small-1-bg').parallax("100%", 0.4);
$('.ft2-small-2-bg').parallax("100%", 0.2);

$('#third').parallax("50%", 0.3);
$('.ft3-small-1-bg').parallax("100%", 0.4);
$('.ft3-small-2-bg').parallax("100%", 0.2);

$('#fourth').parallax("50%", 0.3);
$('.ft4-small-1-bg').parallax("10%", 0.4);
$('.ft4-small-2-bg').parallax("10%", 0.2);
$('.ft4-small-3-bg').parallax("110%", 0.2);
$('.ft4-small-4-bg').parallax("110%", 0.2);

$('.tabs-menu a').fttabs();

var viewportHeight = screen.height;
var headerHeight = $('.fulltoss-header').outerHeight();
var vheight = viewportHeight-headerHeight;
$('#fourth.page').height(vheight);
$('#fourth .story').css('height',vheight);
$('#fourth .story').css('min-height',vheight);
$('#fourth .story').css('overflow','hidden');
$('.ft4-small-1-bg, .ft4-small-2-bg, .ft4-small-3-bg, .ft4-small-4-  bg').height(vheight);
}); 
```

来源 - [http://www.espncricinfo.com/navigation/zones/fulltoss/main.js?10](http://www.espncricinfo.com/navigation/zones/fulltoss/main.js?10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:59:41.037

这是一些不错的视差库，您可以使用：

*   [超级卷轴](http://johnpolacek.github.io/superscrollorama/)

*   [视差](http://stephband.info/jparallax/)

*   [贾拉拉克斯](https://github.com/CodeHunger/Jarallax)

如果您仔细查看 Google，您会发现一系列不同的。

# javascript - 如何调用单调样条函数

> ID：16083330
> 
> 赞同：1
> 
> 时间：2013-04-18T12:44:42.913
> 
> 标签：javascript

让我以此作为开头，无论如何我都不是数学高手。我有兴趣将像单调样条函数这样的曲线拟合到我的数据中。

我试图让这个 Javascript 版本的单调样条函数工作，但无法弄清楚如何正确调用该函数。具体来说，代码的开头是这样开始的（我以前从未见过以这种方式命名的函数）：

```
var CubicSpline, MonotonicCubicSpline;
MonotonicCubicSpline = function() {
  function MonotonicCubicSpline(x, y) { 
```

对我来说，相同的功能在两个不同的范围内定义。第一个不带任何参数，第二个不带任何参数。你如何解决这个问题？

我开始只是提供我想要适合的点：

```
MonotonicCubicSpline([0,5,10,15,20,25], [0,6,2,6,7,10]) 
```

但是函数的那部分没有返回任何东西，好像我需要调用上面同名的函数。如果你想测试一下，这里有一个 jsfiddle 链接：

[http://jsfiddle.net/SszKr/7/](http://jsfiddle.net/SszKr/7/)

任何帮助将不胜感激！谢谢！

该功能的功劳归于： http: [//blog.macerron.com/2011/01/01/javascript-cubic-splines/](http://blog.mackerron.com/2011/01/01/javascript-cubic-splines/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:01:40.700

在*MonotonicCubicSpline*函数声明中，我们可以看到原型中添加了一个*插值*函数，并且构造函数没有返回任何内容。

所以你必须声明一个新的*MonotonicCubicSpline*然后使用它的*插值*函数。

例子：

```
var mySpline = new MonotonicCubicSpline([0,5,10,15,20,25], [0,6,2,6,7,10]);
console.log(mySpline.interpolate(3)); 
```

我不确定，但我认为*插值*函数参数是横坐标。

# ruby-on-rails - Mercury 编辑器无法正常工作

> ID：16083331
> 
> 赞同：1
> 
> 时间：2013-04-18T12:44:44.117
> 
> 标签：ruby-on-rails, ruby

如果我保存诸如“Lorem ipsum”之类的内容，则刷新后会出现：

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess RandomPageName: !ruby/hash:ActiveSupport::HashWithIndifferentAccess type: full data: !ruby/hash:ActiveSupport::HashWithIndifferentAccess {} value: lorem ipsum snippets: !ruby/hash:ActiveSupport::HashWithIndifferentAccess {} 
```

一切都是默认的。

github 仓库在这里： [https ://github.com/gwuix2/gerse](https://github.com/gwuix2/gerse)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:59:15.690

水星编辑器发送参数的格式有点不同。有些像这样

```
{"content"=>{"title"=>{"type"=>"simple", "data"=>{}, "value"=>"Hello world"}} 
```

所以正常的 @post.update_attributes(params[:post]) 不会工作。

您可以编写一个私有方法，例如

```
def extract_params(params)
  attr = {}
  params[:content].each { |key, value| attr[key.to_sym] = value['value'] }
  attr
end 
```

然后调用@post.update_attributes(extract_params(params))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T05:44:24.413

您应该确保查看 Mercury 的文档。[https://github.com/jejacks0n/mercury](https://github.com/jejacks0n/mercury)

这个[http://railscasts.com/episodes/296-mercury-editor](http://railscasts.com/episodes/296-mercury-editor)上还有一个非常好的 railscast ，它有点旧，所以你必须使用文档来更新更改。主要变化之一是区域在最新版本中的初始化方式不同。

```
<div id="primary" data-mercury="full"> 
```

对比

```
 <div id= "primary" class="mercury-region" data-type="editable"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T05:50:29.833

你可以在这里看到更好的屏幕投射: : :

```
<http://railscasts.com/episodes?utf8=%E2%9C%93&search=mercury> 
```

# java - Spring表单不将数据填充到模型对象

> ID：16083338
> 
> 赞同：1
> 
> 时间：2013-04-18T12:45:05.623
> 
> 标签：java, hibernate, spring-mvc, model

我的模型对象有一个“CtlgEntry”属性，该属性有一个“yearPublished”属性。必须填充表单，但会引发以下错误：

```
org.hibernate.PropertyAccessException: Null value was assigned to a property of primitive type setter of com.csu.library.mvc.dto.CatalogueEntry.yearPublished] with root cause
java.lang.IllegalArgumentException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:65)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:707)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:371)
    at org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:4463)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:276)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:756)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:748)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:744)
    at com.csu.library.mvc.dao.generic.GenericHibernateDao.save(GenericHibernateDao.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at com.sun.proxy.$Proxy54.save(Unknown Source)
    at com.csu.library.mvc.service.impl.CatalogueEntryServiceImpl.addItem(CatalogueEntryServiceImpl.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at com.sun.proxy.$Proxy55.addItem(Unknown Source)
    at com.csu.library.mvc.controller.CatalogueEntryController.addCatalogueEntry(CatalogueEntryController.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:827)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

其他数据被加载到对象上，但只有 yearPublished 抛出错误。以下是填充 catalogueEntry 项的 jsp 表单的代码：

```
<form:form method="POST" action="addCatalogueEntry" commandName="catalogueEntry">
        <table>
          <tr>
            <td><form:label path="title">Title Of Book:</form:label></td>
            <td><form:input path="title"/></td>
          </tr>
          <tr>
            <td><form:label path="yearPublished">Year Published:</form:label></td>
            <td><form:input path="yearPublished"/></td>
          </tr>
          <tr>
            <td><form:label path="isbn">ISBN Number:</form:label></td>
            <td><form:input path="isbn"/></td>
          </tr>
          <tr>
            <td><form:label path="publisher">Publisher:</form:label></td>
            <td><form:input path="publisher"/></td>
          </tr>
          <tr>
            <td><form:label path="countryOfPublication">Country Of Publication</form:label></td>
            <td><form:input path="countryOfPublication"/></td>
          </tr>
          <tr>
            <td><form:label path="authors">Authors</form:label></td>
            <td><form:input path="authors"/></td>
          </tr>

          <!--<c:forEach items="$catalogueEntry.authorList" var="author" varStatus="status">
            <tr>
                <td>First Name</td>
                <td><input name="authorList[${status.index}].firstName" id="authorList[${status.index}].firstName"/></td>
                <%--
                    <td><form:input path="personList[${i.index}].name" id="name${i.index}" /></td>
                    <td><form:input path="personList[${i.index}].age" id="age${i.index}" /></td>
                 --%>

            </tr>
            <tr>
                <td>Last Name</td>
                <td><input name="authorList[${status.index}].lastName" id="authorList[${status.index}].lastName"/></td>
            </tr>
          </c:forEach>
          -->
          <tr>
            <td><input type="submit" value="CLEAR" /></td>
            <td><input type="submit" value="SUBMIT" /></td>
          </tr>
        </table>
    </form:form> 
```

该字段的 getter 和 setter 是：

```
private Integer yearPublished;

@Column(name="year_published")
@NotNull
public Integer getYearPublished() {
    return yearPublished;
}

public void setYearPublished(int yearPublished) {
    this.yearPublished = yearPublished;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:55:50.490

使用非原始包装类型（例如`Integer`for `int`、`Float`for `float`）。

# regex - Jmeter - 在 URL 和 BODY 中提取查询字符串

> ID：16083339
> 
> 赞同：2
> 
> 时间：2013-04-18T12:45:06.953
> 
> 标签：regex, jmeter

我想提取下面的查询字符串。这是在 URL 和 BODY 中实现的

这是路径

```
Common/ElectronicSignatureAcceptance.aspx?strQueryString=+JOpJVU8lPAhrezMqUcXuCxMQ16h7x4cfscbfLg(fEQjpcE7Dbyumnq%2fBRA9Y8jiZUL41GlGE3vGWC93NYqlxF0S6tZ8O4Bje2GvMeHX218yah4Twul91RAGipoqYW9oP 
```

这是身体

```
<form name="form1" method="post" action="ElectronicSignatureAcceptance.aspx?strQueryString=**+JOpJVU8lPAhrezMqUcXu‌​CxMQ16h7x4cfscbfLg(fEQjpcE7Dbyumnq%2fBRA9Y8jiZUL41GlGE3vGWC93NYqlxF0S6tZ8O4Bje2Gv‌​MeHX218yah4Twul91RAGipoqYW9oP"** onsubmit="javascript:return WebForm_OnSubmit();" id="form1"> 
```

有人可以给我这个的正则表达式吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-12T04:58:04.950

请使用下面的正则表达式配置`PATH`。

1.  `Regular Expression Extractor`通过右键单击 >将 a 添加到您的请求中，然后`Add > Post Processors > Regular Expression Extractor`配置以下值，如下所示。

正则表达式为`strQueryString=(.+)`

[![路径配置](https://i.stack.imgur.com/P2533.png)](https://i.stack.imgur.com/P2533.png)

## 输出

[![输出](https://i.stack.imgur.com/1GjDv.png)](https://i.stack.imgur.com/1GjDv.png)

请使用下面的正则表达式配置`Body`。

1.  `Regular Expression Extractor`通过右键单击 >将 a 添加到您的请求中，然后`Add > Post Processors > Regular Expression Extractor`配置以下值，如下所示。

正则表达式为`strQueryString=(.+) on`

[![配置](https://i.stack.imgur.com/2n6wx.png)](https://i.stack.imgur.com/2n6wx.png)

## 输出

[![输出](https://i.stack.imgur.com/u1Hhn.png)](https://i.stack.imgur.com/u1Hhn.png)

# android - 在android中将png添加到剪贴板

> ID：16083351
> 
> 赞同：4
> 
> 时间：2013-04-18T12:45:49.263
> 
> 标签：android, png, clipboard

我有以下代码：

```
 File imageFile = new File(f.getAbsolutePath());
        ContentValues values = new ContentValues(2);

        values.put(MediaStore.Images.Media.MIME_TYPE, "image/png");
        values.put(MediaStore.Images.Media.DATA,imageFile.getAbsolutePath());

        ContentResolver theContent = getContentResolver();
        Uri  imageUri = theContent.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
        ClipData theClip = ClipData.newUri(getContentResolver(),"image", imageUri);

        android.content.ClipboardManager clipboard = (android.content.ClipboardManager)getSystemService(Context.CLIPBOARD_SERVICE);
        clipboard.setPrimaryClip(theClip); 
```

我只看到路径而`clipboard`不是路径`image`本身，我认为它必须可以看到，`image`因为当您截取屏幕截图时，您会在剪贴板中看到图像。如果您知道如何将位图传递到剪贴板，也许只有位图才能告诉您。如果有人可以提出解决方案，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-13T12:38:40.387

Android Clipboard 的工作方式与 Mac OS PasteBoard 和 Windows 的 Clipboard 等同类产品略有不同。Mac 和 Windows 的方法是物理存储图像/二进制、RTF、文件引用等内容，因此可以在系统内共享数据。Android 剪贴板只能存储文本（并且可以处理自 Jelly Bean 以来的 HTML）。其他类型由指向实际数据的 Content Provider URI 表示。应用程序接收 URI 以检索其内容（通过 ContentResolver）并相应地处理传入数据是应用程序的工作。

# xsd - BizTalk：部署大型 XML 架构 (OAGIS) 拆分为多个文档

> ID：16083352
> 
> 赞同：0
> 
> 时间：2013-04-18T12:45:50.793
> 
> 标签：xsd, biztalk, biztalk-2010, biztalk-deployment

目前，我正在使用 Visual Studio 2010 将[OAGIS XML 架构](http://www.oagi.org/oagis/OAGi-BPI-Platform/org_openapplications_oagis/9_5-RC-1)集部署到 BizTalk 2010。到目前为止，它已经花费了大约 3 个小时，还没有完成。在 Visual Studio 输出日志中，现在有大约 18,000 行。我不断收到消息，例如：

```
warning DEPLOY: Schema "OagiSchemata.OAGi_BPI_Platform.org_openapplications_platform._1_2_1.Common.OAGi.Components.Fields, 
OagiSchemata, Version=1.0.0.0, Culture=neutral, PublicKeyToken=afe0ae2252ec000f" and a previously deployed schema "" 
have the same target namespace "http://www.openapplications.org/oagis/9". Target namespaces should be unique. 
```

事实上，有几个架构文档具有相同的命名空间，但这应该没有问题。XML 模式规范允许模式设计者将模式拆分为多个文件。在 Altova XMLSpy 中，相同的模式集完美运行，既没有错误也没有警告。

BizTalk 甚至可以处理拆分为多个文件的大型架构吗？如果可以，有什么方法可以加快部署速度？这简直是​​疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:11:06.213

部署最终完成，总持续时间为 6 小时。在日志中，总共有大约 25,000 条警告，所有警告都与问题中的类似。

*BizTalk 甚至可以处理拆分为多个文件的大型架构吗？*

尽管有警告，XML 模式集似乎可以正常工作。

*有什么方法可以加快部署？*

一个明显的方法是删除当前使用不需要的任何部分。实际上，当前的部署只包含*PurchaseOrder*名词（总共有几十个名词）。实际问题似乎是 OAGIS 中可重用组件的数量。它们位于几个文件中，但数量很多。删除任何未使用的组件将需要编辑原始模式文件，这不是很实用。

# iphone - 从 iOS 应用程序中识别越狱设备

> ID：16083354
> 
> 赞同：0
> 
> 时间：2013-04-18T12:45:58.213
> 
> 标签：iphone, ios, jailbreak, identify

我正在开发一个用于商业目的的 iPhone 应用程序，它在 SQlite 数据库中存储了许多记录。所以我的客户不希望应用程序在越狱设备上运行。

那么如何在应用程序启动期间识别越狱设备并通过显示一些消息来防止用户继续进行。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:05:20.357

您可以通过代码检测应用程序是否在越狱设备上运行。
通过这种方式，您可以弹出警报并关闭应用程序。
你可以做任何你想做的事。

这是它的教程。

[检测](http://thwart-ipa-cracks.blogspot.com/2008/11/detection.html)

```
NSString *filePath = @"/Applications/Cydia.app";
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath])
{
   // do something useful
} 
```

此外，如果您想要完整的解决方案，您可以在 tapjoy sdk 代码中看到。

他们正在检测越狱的iphone。

这是tapjoy网址[tapjoy](https://www.tapjoy.com/)

# forms - Symfony 1.4 表单安全性 - 用户使用 firebug 更改输入值

> ID：16083363
> 
> 赞同：1
> 
> 时间：2013-04-18T12:46:21.337
> 
> 标签：forms, security, symfony-1.4

如果任何用户通过 firebug 或任何其他调试工具更改输入值。我的表单正在使用我输入中不可用的 id 成功执行过程。

例如，如果用户使用用户 id 1 登录到应用程序，并且他被授权仅向用户 2 和 3 发送消息。现在在撰写消息时，当他从下拉列表中选择用户时，他将带有 firebug 的 id 更改为 4（未授权）。但是消息只是发送给用户 4。我应该如何处理它？symfony 是否提供某种形式的加密或其他东西。所以用户不能从任何浏览器插件中修改这种类型的东西。

如何在 Symfony 1.4 中保护我的表单？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:05:13.773

您应该始终验证用户输入。在 symfony 中，您可以使用验证器（例如`sfValidatorChoice`或`sfValidatorDoctrineChoice`）。请[阅读文档](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/10-Forms#chapter_10_sub_form_handling_with_data_validation)。

# iphone - AFDownloadRequestOperation multiple 每次下载的下载进度

> ID：16083365
> 
> 赞同：0
> 
> 时间：2013-04-18T12:46:25.177
> 
> 标签：iphone, ios, nsurlconnection, afnetworking, uiprogressview

我`AFDownloadRequestOperation`用于下载。我无法跟踪队列中每个下载的进度。我的进度条显示了主线程上的操作进度（这是最后添加的请求）。参考了许多链接，但无法跟踪整个区块的进度。这是代码

```
 for (int i =0; i<count; i++)
    {
        VideoClass *item1=[[VideoClass alloc]initWithVideo:[self.Downloads objectAtIndex:i]];

        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:item1.URL]];

        NSString *videoTgtPath = [[[[VideoDBClass alloc] init] autorelease] getPathToVideoFile:[self.Downloads objectAtIndex:i]];

        AFDownloadRequestOperation *operation = [[AFDownloadRequestOperation alloc] initWithRequest:request targetPath:videoTgtPath shouldResume:YES];

        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSLog(@"Successfully downloaded file to %@", videoTgtPath);

            if ([[[[VideoDBClass alloc] init] autorelease] completeDownload:item1 error:nil])
            {  

                NSLog(@"Successfully Moved ");

            }
            self.AllDownLoads = [[[[VideoDBClass alloc] init] autorelease] getVideos];
            [DownloadTblView reloadData];
        }
        failure:^(AFHTTPRequestOperation *operation, NSError *error)
         {
            NSLog(@"Error: %@", error);
        }];

        [operation setProgressiveDownloadProgressBlock:^(AFDownloadRequestOperation *operation1,NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpected, long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile)
         {
             totalBytesReadForFile =  self.DownloadComplete;
             totalBytesExpectedToReadForFile = self.DownloadSize;

            NSLog(@"the name of the operation is %@",operation1.request.URL.absoluteString);
            NSLog(@"Operation%i: bytesRead: %d", 1, bytesRead);
            NSLog(@"Operation%i: totalBytesRead: %lld", 1, totalBytesRead);
            NSLog(@"Operation%i: totalBytesExpected: %lld", 1, totalBytesExpected);
            NSLog(@"Operation%i: totalBytesReadForFile: %lld", 1, totalBytesReadForFile);
            NSLog(@"Operation%i: totalBytesExpectedToReadForFile: %lld", 1, totalBytesExpectedToReadForFile);

     // My PROGRESS View in the this section of the tableview and get updated by reloading this section But it shows the same progress for all downloads.

             [DownloadTblView reloadSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationNone];

        }];
        //    [operation addObject:operation];
        [operation start];
    } 
```

我知道我正在取得同样的进步，因为

```
 totalBytesReadForFile =  self.DownloadComplete;
 totalBytesExpectedToReadForFile = self.DownloadSize; 
```

因为他们为我的progressView设置了值。但是我不知道如何跟踪每个过程的进度并显示它。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T18:14:02.897

用于[`AFHTTPClient -enqueueBatchOfHTTPRequestOperations:progressBlock:completionBlock:`](http://cocoadocs.org/docsets/AFNetworking/1.2.1/Classes/AFHTTPClient.html#//api/name/enqueueBatchOfHTTPRequestOperations%3aprogressBlock%3acompletionBlock%3a)跟踪批处理中的操作进度。随着每个操作完成，您可以增加进度块以反映它（例如“5 或 19 个操作完成”）。

跟踪所有操作的累积字节累积可能是不必要的；上述方法充分地向用户传达了进度。

# html - 某些 jpeg 图像在 IE8 和 IE9 中不显示

> ID：16083369
> 
> 赞同：0
> 
> 时间：2013-04-18T12:46:39.030
> 
> 标签：html, internet-explorer, jpeg

我遇到了一些 jpeg 图像的问题，这些图像在 Mozilla、Chrome、IE10、IE7 中显示没有任何问题，但在 IE8 和 IE9 中没有。图像是 RGB 格式（而不是 CMYK 格式，其他一些用户报告它是一个问题）。

html:

```
<img class="lo" src="images/logo.jpg" alt="logo"> 
```

CSS：

```
img.lo {
    display: inline-table;
    float: none;
    margin-left: 35%;
    margin-right: auto;
} 
```

页面上的其他图像在 IE8 和 9 中也正常显示，但不是这个。同一 div 中的其他图像也显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:49:35.777

让你没有这个：width=""height"" IE 认为这个有 width="0" 和 height="0"

# python - 通过代理通过 python 连接到 Dropbox

> ID：16083370
> 
> 赞同：2
> 
> 时间：2013-04-18T12:46:45.583
> 
> 标签：python, https, proxy, dropbox, socks

我正在尝试使用 python 2.7.4 (x64 win7) 连接到 Dropbox 帐户，他们的指南[对](https://www.dropbox.com/developers/core/authentication#python)我帮助很大。但是，当我在代理后面时，这段代码就不会这样做。（从家里代码效果很好，我不在代理后面）

我试图摆弄在**dropbox/rest.py**中使用的 urllib2 和 httplib，但没有运气。我知道我必须更改连接代码，但我不确定如何为套接字执行此操作。

**保管箱/rest.py** [行：99]

```
def create_connection(address):
    host, port = address
    err = None
    for res in socket.getaddrinfo(host, port, 0, socket.SOCK_STREAM):
        af, socktype, proto, canonname, sa = res
        sock = None
        try:
            sock = socket.socket(af, socktype, proto)
            sock.connect(sa)
            return sock

        except socket.error, _:
            err = _
            if sock is not None:
                sock.close()

    if err is not None:
        raise err
    else:
        raise socket.error("getaddrinfo returns an empty list") 
```

我总是收到错误：[Errno 10060] SocketError。我对网络和端口不太了解，但我知道我可以连接到端口 3128 上的代理，并且 dropbox 在 433 上等待。就此而言，我无法连接到任何**https://** -adress。所以我找到了这段代码：

```
proxyHost = 'www.myProxy.adress.com'
proxyPort = 3128
conn = httplib.HTTPConnection(proxyHost, proxyPort)
conn.request("POST", "https://www.google.com") 
```

哪个有效，但我缺乏适应套接字连接的技能。特别令人困惑的是，与通常的方式相比，我将 proxyAdress 提供给连接，并且必须将 Request 写入标头或某处，我可以将最终地址提供给连接。

这是当我阅读[SOCKS](http://sourceforge.net/projects/pysocks/) for python 并尝试它们时，但我无法轻松地将套接字代码替换为可以设置代理的新“ *socksocket ”：*

```
import socks
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5,"www.myProxy.adress.com")
socket.socket = socks.socksocket
urllib.urlopen("https://www.google.com/") 
```

非常感谢任何帮助，如何更改 rest.py 的 create_connection 函数以使用代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T04:12:33.943

我自己也遇到了这个问题，在寻找解决方案时遇到了这篇文章。

我已经设法通过对 dropbox/rest.py 代码稍作修改来解决这个问题。

在 RESTClientObject 类的**init**方法更改：

```
 self.pool_manager = urllib3.PoolManager(
        num_pools=4, # only a handful of hosts. api.dropbox.com, api-content.dropbox.com
        maxsize=max_reusable_connections,
        block=False,
        timeout=60.0, # long enough so datastores await doesn't get interrupted
        cert_reqs=ssl.CERT_REQUIRED,
        ca_certs=TRUSTED_CERT_FILE,
        ssl_version=ssl.PROTOCOL_TLSv1,
    ) 
```

至：

```
 self.pool_manager = urllib3.ProxyManager(
        num_pools=4, # only a handful of hosts. api.dropbox.com, api-content.dropbox.com
        maxsize=max_reusable_connections,
        block=False,
        timeout=60.0, # long enough so datastores await doesn't get interrupted
        cert_reqs=ssl.CERT_REQUIRED,
        ca_certs=TRUSTED_CERT_FILE,
        ssl_version=ssl.PROTOCOL_TLSv1,
        proxy_url ='http://yourproxy.com:proxyport/',
    ) 
```

请注意使用 ProxyManager 而不是 PoolManager 的更改以及 proxy_url 的添加。

有一些方法可以针对代理进行身份验证，但我还没有探索过这些。因此，这仅在您已经通过 Internet Explorer 或类似方式进行身份验证时才有效。

希望这可以帮助某人。

# css - 无法停止黑莓屏幕在phonegap中垂直滚动

> ID：16083371
> 
> 赞同：0
> 
> 时间：2013-04-18T12:46:48.383
> 
> 标签：css, cordova, jquery-mobile

![在此处输入图像描述](https://i.stack.imgur.com/QsltC.jpg)

嗨，我使用 phonegap 为黑莓开发了一个使用 jquery mobile 的屏幕。但是当我将它部署到设备时，屏幕会垂直滚动，如下图所示。我尝试了与 android 设备 phonegap 项目相同的 html、css、js 组合，它根本不滚动。它似乎只在黑莓中垂直滚动。有什么方法可以在 phonegap 项目中禁用黑莓中的垂直滚动条？但是，水平滚动已成功禁用。

对此的任何帮助都将受到高度赞赏。我正在使用dreamweaver 来设计ui 和js。并使用命令行（终端）构建并部署到黑莓设备。

我的代码如下所示：

```
 <!DOCTYPE html> 
    <html>
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" id="viewport" content="width=device-width, height=device-       height,initial-scale=1.0, maximum-scale=1.0,user-scalable=no;"/>
    <title>jQuery Mobile Web App</title>

    <link href="jquery-mobile/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
    <script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <script type="application/javascript" src="js/application.js">
    </script>
    <style type="text/css">
    #page{
    overflow: hidden;
    }
    </style>
    <script type="application/javascript">  
$(document).ready(function(e) {
    var width = $(window).width(),
        height = $(window).height() - $("#header").height(),
        row = height / 2,
        iconTopSpace = (Number(row) - 50) / 2;          
        $("div ul li a").attr("style", "height:"+row+"px");
        $(".ui-btn-inner").attr("style","margin-top:"+iconTopSpace+"px");
});
    </script>

    </head> 
    <body> 

    <div data-role="page" id="page">

<div data-role="header" id="header">
    <h1>Our Workplace</h1>
</div>

    <!-- Do this for the blackberry with a higher screen width -->

    <div data-role="navbar">
<ul>
    <li><a href="Ourworkplace.html" data-transition="slide"  data-iconpos="bottom" data-icon="our-workplace">Our Workplace</a></li>
    <li><a href="b.html" data-transition="slide" data-iconpos="bottom" data-icon="find-your-way" onClick="test()">Find your way</a></li>
    <li><a href="b.html" data-transition="slide" data-iconpos="bottom" data-icon="technology">Technology</a></li>
</ul>
     </div>
     <div data-role="navbar">
 <ul>
 <li><a href="a.html" data-transition="slide" data-iconpos="bottom" data-icon="have-an-idea">Have an Idea</a></li>
    <li><a href="b.html" data-transition="slide" data-iconpos="bottom" data-icon="useful-links">Useful links</a></li>
    <li><a href="b.html" data-transition="slide" data-iconpos="bottom" data-icon="help-desk">Help desk</a></li>
</ul>
    </div>

    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T06:57:43.090

将以下内容添加到您的视口内容中：target-densitydpi=device-dpi

# php - 你如何将 php 结果填充到 jquery 移动列表视图中

> ID：16083372
> 
> 赞同：2
> 
> 时间：2013-04-18T12:46:56.067
> 
> 标签：php, json, jquery-mobile

我有我的 php，下面是我的 html 代码。我试图用 php 代码填充列表视图但失败了，任何想法

```
<?
require_once("../backend/functions.php");
dbconn();

$id = $CURUSER["id"]; 
$e  = date("Y/m/d");              
$a  = SQL_Query_exec("SELECT enddate FROM cal_events WHERE userid = '$id' 
                       AND enddate > '$e' ORDER BY enddate ASC");

if (mysql_num_rows($a) == 0) {
?>
  <script>
    alert("You have no active events to deal with");
   window.location ='index.html'; 
  </script>

<?
}else{

  $data = array();
  while($rowa = mysql_fetch_array($a))
  { 
    $data[] = $rowa;
  }
  echo json_encode($data);
} 
```

现在我的 html 不正确，这是我在正确方向上需要一点帮助的地方

html

```
<script type="text/javascript">
  $(document).on("pagebeforeshow", "#index4", function() {
    $(function(){
      var items="";
      $.getJSON("check-events.php",function(data){
        $.each(data,function(index,item) 
        {
          items+="<li>"+item.enddate+"</li>";
        });
        $("#contacts").html(items); 
        $("#contacts").trigger("change");
      });
    });
  });  
</script>
<ul id="contacts" data-role="listview" data-divider-theme="b" data-inset="true">
</ul> 
```

我哪里错了？它确实填充了列表，但没有 jquery 元素

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:00:11.243

你的 php 文件返回 json 但你应该添加

```
header('Content-Type: application/json'); 
```

在回显你的 json 之前

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:59:49.117

您必须刷新列表视图才不会触发：

```
$("#contacts").listview("refresh"); 
```

# windows-phone-7 - WP 应用程序的模拟加急应用程序审查

> ID：16083382
> 
> 赞同：0
> 
> 时间：2013-04-18T12:47:28.323
> 
> 标签：windows-phone-7, windows-phone, marketplace

据我所知，Windows Phone 商店的认证过程持续 5 到 9 天（平均 7 天）。我的应用程序仅限于公司的特定日期，并且怀疑该应用程序没有时间在该日期之前出现在商店中。但我想成功。在 AppStore 中有诸如请求加急应用程序审查之类的东西。您必须填写表格，提交您的应用程序，指定请求的原因和描述（在这种情况下为时间敏感事件），并且在大多数情况下，Apple 会在 2 天（左右）内对应用程序做出决定。当然，这种可能性的使用是有限制的（一个帐户每年 1 个。）

其实问题。是否可以加快 Windows Phone 应用程序的认证过程？或者至少将认证时间减少到最低限度。

我将不胜感激相关链接或任何其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:09:59.163

没有根据用户要求立即发布应用程序的规定。Windows 手机市场不允许用户在没有经过认证过程的情况下发布应用程序，即使您联系微软支持，也没有人可以手动发布应用程序。

# mysql - Mysql 连接三个表，第三个有 WHERE

> ID：16083392
> 
> 赞同：2
> 
> 时间：2013-04-18T12:47:55.420
> 
> 标签：mysql, sql

我需要加入三个表以显示以下内容。
我可以加入前两个并使用此查询显示所有唯一的nominal_acc_no

```
SELECT nominal_acc_no,coa_name FROM
(
    SELECT nominal_acc_no ,coa_name FROM acc_chart_of_accounts
    UNION
    SELECT nominal_acc_no,coa_name FROM acc_chart_of_sub_accounts
) A; 
```

但我正在努力如何加入第三个并输出如下所示的结果。我需要对nominal_acc_no 进行分组，并将借方和贷方与acc_posting_details 表中company_id 上的WHERE 相加。任何和所有的帮助表示赞赏。

```
 Acc_chart_of_accounts           
Coa_id   nominal_acc_no 
    1           10   
    2           20        

acc_chart_of_sub_accounts
coa_sub_id    nominal_acc_no  company_id
      1             10                 1
      2             20                 1
      3             110                1

Acc_posting_details
Id         nominal_acc_no   debit    credit  company_id
1              10           25.00                1
2              10           15.00                1
3              20                    30.00       1
4              110          10.00                1
5              110           8.00                1

Result
Nominal_acc_no        debit       credit    company_id
10                    40.00         -           1
20                      -         30.00         1
110                   18.00         -           1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:01:16.747

```
SELECT
  acsa.nominal_acc_no,
  IFNULL(sum(apd.debit),0) AS debit,
  IFNULL(sum(apd.credit),0) AS credit,
  acsa.company_id
FROM acc_chart_of_sub_accounts AS acsa
  LEFT JOIN acc_posting_details AS apd
    ON acsa.nominal_acc_no = apd.Nominal_acc_no
GROUP BY acsa.nominal_acc_no, acsa.company_id 
```

输出

```
Nominal_acc_no        debit     credit    company_id
-----------------------------------------------------
10                    40.00     0           1
20                    0         30.00       1
110                   18.00     0           1 
```

编辑：我在查询中修复了一个别名问题。

## [SQL Fiddle 演示在这里](http://sqlfiddle.com/#!2/1fad1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:11:23.533

```
SELECT Nominal_acc_no,SUM(debit) AS total_debit,SUM(credit) AS total_credit from   Acc_posting_details group by nominal_acc_no; 
```

您可以在分组依据之前插入其他 where 条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:10:02.050

Can you show the complete structure of your tables, that is, all the columns?

Your first SELECT statement refers to a column **coa_name** within tables **acc_chart_of_accounts** and **acc_chart_of_sub_accounts**, but then you don't mention that column in description of those tables. That makes me think there might be other relevant information that is missing.

Do tables **acc_chart_of_accounts** and **acc_chart_of_sub_accounts** contain any debits or credits? If not, why do you need info from them? Based on what I understand from your question, it seems that **Acc_posting_details** has all the info you need:

> "I need to GROUP ON nominal_acc_no and SUM the debit & credit with a WHERE on the company_id in the acc_posting_details table"

Does this query solve your problem?

```
 SELECT Nominal_acc_no,
        SUM(debit) AS total_debit,
        SUM(credit) AS total_credit,
        company_id
 FROM Acc_posting_details
 WHERE company_id = 1
 GROUP BY nominal_acc_no; 
```

### ADDED:

If I understand you last comment, you need to get exctly one row for every **Nominal_acc_no** that exists in **acc_chart_of_accounts**.

In that case, **Acc_posting_details** does not have all the info you need, because some nominal accounts might have no debits or credits, and so they don't exist in **Acc_posting_details**.

```
 SELECT aca.Nominal_acc_no,
        IFNULL(SUM(apd.debit),0) AS total_debit,
        IFNULL(SUM(apd.credit),0) AS total_credit,
        aca.company_id
 FROM acc_chart_of_accounts aca
 LEFT OUTER JOIN Acc_posting_details apd
              ON aca.Nominal_acc_no = apd.Nominal_acc_no
 WHERE aca.company_id = 1
 GROUP BY aca.nominal_acc_no; 
```

This query will give you one row for every nominal account in **acc_chart_of_accounts**. If an account has any rows in **Acc_posting_details**, you will get their credits and debits added together. For accounts that have no records in **Acc_posting_details**, you will get 0 in the total_debit and total_credit columns.

You said that you want company_id in WHERE clasue. Alternatively, if you want a complete report over all the companies, you would remove the WHERE clause and replace the GROUP BY clause with

```
 GROUP BY aca.nominal_acc_no, aca.company_id; 
```

Is this what you were looking for? Let me know if it works.

# php - 如何使用jquery计算动态添加的表行的值的值

> ID：16083395
> 
> 赞同：0
> 
> 时间：2013-04-18T12:48:01.310
> 
> 标签：php, jquery, html, mysql

嗨，我有一个表单，当用户单击添加按钮时，它会从外部文件动态添加表格行，我什至想在我的一个字段上进行计算，我想计算 qty 的值并显示到目前为止，我已经写了一个代码来计算，但它似乎不起作用有人能帮我吗
这是我的脚本

```
 $(document).ready(function(){
                $('#detail').on('keyup', '.qty', calculateRow());
                $('#addnew').click(function(){

                    var ctr = $('#items').val();
                    ctr++;

                    $.post('job_srch.php', {ctr : ctr}, function(data) {
                          $(data).appendTo('#detail');

                          $('#items').val(ctr);                        
                    });
                });

function calculateRow() {
       alert("GAYA");
       console.log("2");
        var add = 0;
            $(".qty").each(function() {
                    add += parseFloat(this.value);
                        if (isNaN(add)) {
                            $('#total').val("0");
                                } else {
                                  $('#total').val(add.toFixed(2));
                                }

                });

}
   }); 
```

这是我的 php

```
<?php
session_start();
require("includes/dbconnect.php");
include ('includes/function.php');

$zdb = $_SESSION["zdbyear"];
mysql_select_db($zdb);

if ($_REQUEST["ctr"]){
    $ctr = $_REQUEST["ctr"];
    //echo '<link rel="stylesheet" href="css/chosen.css" />';
echo '<tr>

   <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="srno_'.$ctr.'" class="form-input-oth"/></td>
   <td align="center"><select data-placeholder="Party" style="width:300px;" name="item_'.$ctr.'" class="chzn-select-deselect" >
                                  <option value=""></option>';
                      $res = mysql_query("SELECT * FROM `items`") or die(mysql_error());
                      while ($row = mysql_fetch_array($res)) {
                             echo "<option value='$row[accode]'>$row[name]</option>";
                      }
    echo '</select></td>';
    echo '<td align="center"><input type="text" id="qty" size="6" maxlength="9" maxlength="6" name="qty_'.$ctr.'" class="qty form-input-amt"/></td>

                      </tr>';
}
else{
    echo "ERROR";
}
 ?> 
```

这是我的桌子

```
 <table id="detail" border="1px" width="30%">
                  <tr>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Sr No.</font><span></span></label></td>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">item</font><span></span></label></td>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Quantity</font><span></span></label></td>
                  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:06:46.770

我发现的第一个也是最明显的错误是命令“add += parseFloat(this.value);” 不起作用。

正确的功能如下：

```
function calculateRow() {
   alert("GAYA");
   console.log("2");
   var add = 0;
   $(".qty").each(function() {
       add += parseFloat($(this).val()); // <-- changed from this.value
       if (isNaN(add)) {
           $('#total').val("0");
       } else {
           $('#total').val(add.toFixed(2));
       }
   });
} 
```

您还必须更改以下行

```
$('#detail').on('keyup', '.qty', calculateRow()); 
```

到

```
$('#detail').on('keyup', '.qty', calculateRow); 
```

# mysql - 左连接的正确语法

> ID：16083398
> 
> 赞同：1
> 
> 时间：2013-04-18T12:48:07.240
> 
> 标签：mysql, sql

有人能告诉我为什么这个 sql 查询不执行吗？

```
SELECT t_ads.*, t_adpics.picfile, 
FROM t_ads 
LEFT JOIN t_adpics ON t_ads.adid = t_adpics.adid AND t_adpics.isevent = '0' 
LEFT JOIN t_featured ON t_ads.adid = t_featured.adid AND t_featured.adtype = 'A' 
WHERE (a.adtitle LIKE '%findandpost%' OR a.addesc LIKE '%findandpost%') 
AND a.enabled = '1' 
AND a.verified = '1' 
AND a.expireson >= NOW() 
AND a.paid <> '0' 
AND (t_featured.adid IS NULL OR t_featured.featuredtill < NOW()) 
GROUP BY t_ads.adtitle 
ORDER BY RAND() LIMIT 0, 50 
```

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM t_ads LEFT JOIN t_adpics ON t_ads.adid = t_a' at line 4`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:49:46.933

你声明的问题是你在`FROM`子句之前有额外的逗号，

```
SELECT t_ads.*, t_adpics.picfile, FROM
                                ^  remove this comma 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:51:02.787

你需要删除`,`

改变

```
SELECT t_ads.*, t_adpics.picfile, FROM 
```

至

```
SELECT t_ads.*, t_adpics.picfile FROM 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:53:35.113

您必须将条件 AND`t_featured.adtype = 'A'` 放在 WHERE 子句中并在关键字`,`之前删除`FROM`

```
SELECT t_ads.*, t_adpics.picfile
FROM t_ads LEFT JOIN t_adpics ON t_ads.adid = t_adpics.adid 
LEFT JOIN t_featured ON t_ads.adid = t_featured.adid 
WHERE (a.adtitle LIKE '%findandpost%' OR a.addesc LIKE '%findandpost%')
        AND a.enabled = '1' AND a.verified = '1' 
        AND a.expireson >= NOW() AND a.paid <> '0' 
        AND (t_featured.adid IS NULL OR t_featured.featuredtill < NOW())
        AND t_featured.adtype = 'A'
        AND t_adpics.isevent = '0'
GROUP BY t_ads.adtitle ORDER BY RAND() LIMIT 0, 50 
```

# android - 如何为 webview 启用 expires-header 缓存

> ID：16083404
> 
> 赞同：9
> 
> 时间：2013-04-18T12:48:23.553
> 
> 标签：android, caching, http-headers

我正在构建一个由菜单和 web 视图组成的应用程序。当用户选择菜单项时，webview 应该加载相应的 html 文件。到目前为止，一切都很好。

现在我正在经历，每次我按下菜单项时，webview 都会请求 html。我只想在会话中加载一次 html，因为 html 文件在一天内不会更改。所以我做的第一件事就是在服务器端正确设置过期标头。你可以在这里查看：

[http://redbot.org/?uri=http%3A%2F%2Fcutoutcam.com%2Ftest1.php](http://redbot.org/?uri=http%3A%2F%2Fcutoutcam.com%2Ftest1.php)

然后我尝试了

```
mWebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT); 
```

和

```
mWebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY); 
```

结果：

第一个版本每次都请求 html（使用代理检查）-> 这很奇怪。只要它没有过期，它就应该显示缓存的版本。有什么问题？

第二个版本从不请求新的 html 文件（没关系，因为它应该那样）

任何人都知道为什么 expires 标头在这里不能正常工作？

整个代码：

```
mWebView = (WebView) getView().findViewById(R.id.fragment_web_view_wv);
mWebView.setWebViewClient(new WebViewClient(this));
mWebView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);

mWebView.setWebChromeClient(new WebChromeClient() {
      @Override
      public void onReachedMaxAppCacheSize(long spaceNeeded, long totalUsedQuota,
              android.webkit.WebStorage.QuotaUpdater quotaUpdater)
      {
            quotaUpdater.updateQuota(spaceNeeded * 2);
      }
});

mWebView.getSettings().setDomStorageEnabled(true);

mWebView.getSettings().setAppCacheMaxSize(1024*1024*8);

String appCachePath = getActivity().getApplicationContext().getCacheDir().getAbsolutePath();
mWebView.getSettings().setAppCachePath(appCachePath);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setAppCacheEnabled(true);
mWebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);
mWebView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
mWebView.loadUrl(args.getString("url")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T03:09:08.553

大多数现代浏览器总是会向服务器发出请求，即使是缓存内容，也只是为了检查服务器是否有可用的更新内容。在这些情况下，浏览器将在请求中包含“If-Modified-Since”标头，以便服务器可以在没有任何更改的情况下快速返回空的 HTTP 304 响应。

您的选择是 1) 配置您的服务器以评估 Last-Modified-Since 并根据需要返回 304。这将告诉浏览器继续使用缓存的内容。2) 使用 javascript 实现您的页面加载，并使用不受浏览器供应商一时兴起的 localstorage 创建自定义缓存机制。这是一些工作，但我在几个性能敏感的项目上已经成功完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T11:21:03.783

使用[`WebSettings.LOAD_CACHE_ELSE_NETWORK`](http://developer.android.com/intl/ru/reference/android/webkit/WebSettings.html)我认为这是你需要的。

# java - 无法使用 Java 7u21 启动小程序

> ID：16083405
> 
> 赞同：7
> 
> 时间：2013-04-18T12:48:28.433
> 
> 标签：java, security, applet, java-web-start

因此，我们安装了 Java 7u21 版本，该版本旨在加强小程序的安全性。不幸的是，它太紧了，以至于我们的小程序不再运行。不好。

有趣的是，它只是在我们使用 JWS 操作时才停止工作。如果我们从标准网页将其作为标准小程序启动，则一切正常。

在 JWS 模式下，我们至少会在反射和`java.lang.Thread.setDefaultUncaughtExceptionHandler`.

证书看起来不错。

Oracle 的发行说明没有提供与 JWS 相关的任何内容。

因此，我向社区提出的问题是：是否有人对此有想法或（甚至更好）解决方案？

与给定建议/评论相关的其他信息：

该小程序由全球数百个第三方客户端运行，因此很遗憾无法更改安全策略。客户可以重现该问题。但是，我可以确认更改策略文件可以解决问题。

当我从 Eclipse 启动的 Tomcat 运行小程序时（当然没有签名的小程序），它会按预期在浏览器中显示警告通知。作为一个容易上当受骗的人，我允许小程序运行，因为它是从我自己的开发环境中启动的。这仍然会导致安全失败。

我已经考虑过这是否是 Java 中的错误，但我想看看是否有其他人看到同样的问题。我想我们都知道修复错误的 Oracle 周转时间并不总是最好的......

感谢您的任何意见。

* * *

*非常感谢托尼，你的建议让我能够在 7u21 中正确地创建小程序；我认为这是向前迈出的一步，因为我正在通过浏览器签署和唤醒许多小程序，这些超过 7u21。我今天不早点做。但是我被困了几个小时，事实上我还没有从我拥有的遗留应用程序中唤醒我的第一个第三方小程序（即在 JVM 1.6 或更早版本中工作正常）。*

*涉及的小程序，我对它们进行了签名，但我总是收到错误：SecurityException - “Bad applet class name”。我有一些小程序和调用它们的 html 代码，问题是我的链中的第一个小程序（调用链中的任何其他小程序）的行为可能不像其他已签名的小程序正确执行（这些小程序来自用于培训的 java 网站)，这个简单的第 3 方小程序不会运行并抛出上述异常。我的第三部分小程序我不知道它在内部做什么。抱歉，我可能会要求没有源代码就不容易解决的特殊情况，但是，请相信告诉我任何想法，不管它是什么。*

*此致*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T00:18:40.777

这是解释它的页面。

[混合代码上的 Oracle 代码](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/mixed_code.html)

你需要做的是把你所有的 jars 都拿到清单文件中的新 TrustedLibrary 行。对我来说，这意味着重新编译旧代码。您可能只需解开当前的 jar 包，然后重新打包，包括 TrustedLibrary 行。

您还必须签署所有代码。不仅仅是小程序。这意味着如果您有 3 个罐子，那么所有 3 个罐子中的所有代码也必须签名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-02T09:06:09.967

我的同事破解了它。给波兰人喝伏特加有时可以产生所需的灵感。:-)

无论如何，现在发送到小程序的 jnlp 信息中似乎需要安全标记（返回的内容类型设置为 application/x-java-jnlp-file）。

通过添加

> ```
> <security> 
>     <all-permissions/>
> </security> 
> ```

有用。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:00:39.150

Java SE 文档的[安全](http://docs.oracle.com/javase/6/docs/technotes/guides/deployment/deployment-guide/security.html#policy)页面中的以下引用是相关的：

> *“标准的 Java 策略文件可用于增强授予不受信任的应用程序的权限。除了`$JRE_HOME/lib/security/java.policy`和`$USER_HOME/.java.policy`（由所有 Java 程序使用）之外，Java Web Start 和 Java 插件加载的应用程序和小程序加载两个额外的策略文件，其位置可以通过部署配置属性进行配置：deployment.user.security.policy 和 deployment.system.security.policy。”*

检查这些位置的策略文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-29T21:00:50.103

对所有使用未签名小程序的开发人员的附加提示。上周在 JAX2013 大会上，来自 Oracle 的 Wolfgang Weigand 提到，在 2013 年 10 月 Java 7 发布之后，将只有最高级别的小程序安全滑块，即只有使用受信任（非自签名）证书签名的小程序才能运行. 到目前为止，该信息尚未在 Oracle 官方网站上发布。

由于 Java 平台的最新安全更改，上面引用 JAVA6 安全页面的答案可能有点过时

# android - 如何将Android esri arcGIS Point转换为纬度和经度

> ID：16083406
> 
> 赞同：1
> 
> 时间：2013-04-18T12:48:30.133
> 
> 标签：android, arcgis

我正在尝试通过 Android esri arcGIS MapView 获取点击的纬度和经度。

```
 map.setOnSingleTapListener(new OnSingleTapListener() {

            private static final long serialVersionUID = 1L;

            public void onSingleTap(float x, float y) {
                System.out.println("x:" + x);
                System.out.println("y:" + y);
                // How to get Latitude Longitude coordinates of the point (x,y)?

            }
        }); 
```

如何获取点（x，y）的纬度经度坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T12:15:09.827

最简单的方法是：

```
Point p=map.toMapPoint(arg0, arg1);
System.out.println("X="+p.getX());
System.out.println("Y="+p.getY()); 
```

变量 p 将在 MapView 中映射坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T15:41:47.377

如果您想将地图点转换为纬度/经度，您只需要遵循此

```
Point mapPoint = mMapView.toMapPoint(point.getX(), point.getY());
//Here point is your MotionEvent point
SpatialReference spacRef = SpatialReference.create(4326);
//4326 is for Geographic coordinate systems (GCSs) 
Point ltLn = (Point)
GeometryEngine.project(mapPoint,mMapView.getSpatialReference(), spacRef ); 
//mMapView is your current mapview object 
```

`ltLn.getY()`将给出纬度`ltLn.getX()`并将给出经度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-24T09:32:29.843

我厌倦了 kotlin 中的这个解决方案，它按预期工作

```
 val sp = SpatialReference.create(4326)
       // where Location is the Point
       val locationPoint = GeometryEngine.project(location, sp) as Point
       val lat = locationPoint.x
       val lng = locationPoint.y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T08:59:26.097

```
map.setOnSingleTapListener(new OnSingleTapListener() {

            private static final long serialVersionUID = 1L;

            public void onSingleTap(float x, float y) {
                System.out.println("x:" + x);
                System.out.println("y:" + y);

Point p=map.toMapPoint(x,y );

 SpatialReference sp = SpatialReference.create(/*spatial number*/);
 Point aux = (Point) GeometryEngine.project(p, map.getSpatialReference(), sp);

System.out.println("latitude="+aux.getX());
System.out.println("longitude="+aux.getY());

            }
        }); 
```

对于空间数 spatialreference.org

# javascript - 为什么keyup不起作用

> ID：16083408
> 
> 赞同：0
> 
> 时间：2013-04-18T12:48:41.857
> 
> 标签：javascript, jquery

我试图让我的输入文本字段在键入时集中在下一行。

jQuery代码：

```
for (var counter = 0; counter < 4; counter++) {
    $("<input>", {
        "class":"anBox",
        size: 1,
        maxlength: 1
    }).appendTo('#answerLine_' + counter);
};
$(".anBox").keyup(function () {
    if (this.value.length == this.maxLength) {
      $(this).next('.anBox').focus();
    }
}); 
```

这是一个：[jsfiddle](http://jsfiddle.net/qygB2/109/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:51:38.947

你的用法`.next()`不正确。该`.next()`函数查找当前集合中元素的下一个*兄弟*元素，还可以选择检查下一个兄弟元素是否与提供的选择器匹配。

但是，您的`<input>`元素位于不同的`<span>`元素中，因此它们不是兄弟姐妹，因此无法使用`.next()`.

你需要做的是从你当前的`<input>`( `$(this)`) 到它的父元素 ( `.parent()`)，到下一个`<span>`元素 ( `.next()`or `.next('span')`)，然后找到`.anBox`那个 ( ) 里面的元素`.find('.anBox')`，然后聚焦它 ( `.focus()`)。看起来像这样：

```
$(this).parent().next().find('.anBox').focus(); 
```

看看[更新的 jsFiddle 演示](http://jsfiddle.net/qygB2/115/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:52:45.183

您对 .next() 的使用不正确。尝试使用

```
$(this).parent().next('span').find('.anBox').focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:52:45.470

因为`.anBox`没有“下一个”。接下来`.anBox`是另一个跨度。你必须[爬上一个父跨度，然后去下一个跨度，并在`.anBox`那里](http://jsfiddle.net/qygB2/114/)找到一个：

```
if (this.value.length == this.maxLength) {
  $(this).parent().next().find('.anBox').focus();
} 
```

此外，您正在比较`maxLength`脚本中哪个始终为“1”。仅当您按下“1”时，您的下一个输入框才会聚焦

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:56:12.587

`next()`不会为您提供 DOM 中的下一个匹配元素。它只给你下一个兄弟，如果它匹配你作为选择器传递的内容。

为了得到你想要的，你可以使用[nextInDOM()](http://techfoobar.com/jquery-next-in-dom/)实用程序（*免责声明：我是作者*）并像这样使用它：

`$(this).nextInDOM('.anBox').focus();`

# node.js - 错误请求 - 节点 js ajax 帖子

> ID：16083409
> 
> 赞同：4
> 
> 时间：2013-04-18T12:48:46.860
> 
> 标签：node.js, jquery, express

我正在使用 express 3.0 和节点 v0.11.0。我有一个提交表单的按钮，我正在使用 ajax 将该数据作为 JSON 对象发布到我的节点服务器。
客户端代码为：

```
$('#contact').submit(function(e) {
console.log('submit called');
var formData = JSON.stringify($('form').serializeObject());
console.log(formData);

$.ajax({
    url: "http://localhost:3000/savedata/",
    type: "POST",
    dataType: 'json',
    data: {objectData: formData},
    contentType: "application/json",
    complete: function() {
      console.log('process complete');
    },
    success: function(data) {
      console.log('process sucess');
    },
    error: function() {
      console.log('process error');
    },
  });
return false;
}); 
```

然后在我的服务器上：

```
var express = require('express');
var app = express();
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.static(__dirname + '/public', {maxAge: 86400000}));
app.engine('.jade', require('jade').__express);

app.post('/savedata', function(req, res) {
  console.log('savedata called');
  console.log(req.body);
  //var resultObject = JSON.parse(req.body.objectData);
  //console.log(resultObject);
  res.end();
}); 
```

我面临的问题是，当我使用 express.bodyParser() 中间件时，我得到一个：

```
Error: Bad Request
at next (/home/captain/data/lemontreecakes/node_modules/express/node_modules/connect/lib/proto.js:125:13)
at /home/captain/data/lemontreecakes/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js:54:23
at IncomingMessage.<anonymous> (/home/captain/data/lemontreecakes/node_modules/express/node_modules/connect/lib/middleware/json.js:74:60)
at IncomingMessage.EventEmitter.emit (events.js:92:17)
at _stream_readable.js:883:14
at process._tickCallback (node.js:415:13) 
```

这是我浏览器中的控制台输出：

```
submit called load.js:33
{"name":"tes","email":"tets@est.com"} load.js:36
POST http://localhost:3000/savedata/ 400 (Bad Request) jquery-1.9.1.min.js:5
process error load.js:54
process complete 
```

所以我知道我正在向我的服务器提交数据。如果我从节点服务器中删除主体解析器中间件，那么我会得到

```
savedata called
TypeError: Cannot read property 'objectData' of undefined 
```

我在想我没有正确地将 JSON 数据发送到服务器。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:24:11.803

我不完全确定这是否能解决问题，但试试这个：

```
$.ajax({
    ...
    data: JSON.stringify({ "objectData": formData}),
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T14:08:10.577

试试这个代码：

```
$.ajax({
        url: "/savedata/",
        type: "POST",
        data: formData,
        contentType: "application/json",
        success: function(data) {
            alert('success');
        },
        error: function() {
            alert('error');
        }
    }
); 
```

*   首先，基于浏览器的 AJAX 可能不会进行跨域 HTTP 请求（例如，您的网站可能`localhost:3000`不会对. 因此，如果您真的想这样做，请让您的服务器处理它。`google.com``localhost:3000`

    否则，在 99% 的情况下，只需使用相对 URL ( `/savedata/`)。

*   此外，请确保您只发送一个**字符串化的 JSON 对象**，而*不是*一个 JSON 对象。

    例如`'{"test" : 1}'`而**不是** `{"test" : 1}`。因此，在您的情况下，字符串化对象是 formData。

我确实在节点服务器上使用示例数据尝试了此代码，并且效果很好。如果您有任何其他问题，请随时提问。

如果你需要，我也可以给你代码。

# erlang - 消息在erlang中丢失

> ID：16083414
> 
> 赞同：1
> 
> 时间：2013-04-18T12:48:57.940
> 
> 标签：erlang, message

我在 erlang 中丢失的消息有一些问题。

我正在使用的代码在我手动使用时 100% 正确，仅当我的代码用于“负载测试”时，我与大量请求并行测试代码时，接收器部分从未收到某些消息. 在记录所有步骤和参数值时，我发现我发送消息的地址是正确的。消息本身也没有问题。

我的问题如下：在erlang中是否知道这种“丢失消息”，这可能是erlang本身的一些错误吗？

如果需要，我可以发布一些我正在使用的代码，但我认为它不会特别为这个问题增加很多价值。

更新：我的应用程序的主要部分。这是很多代码来说明我的问题，但我无法在简化版本中重现我的问题。该应用程序是一个分配系统，即它将并行保留网格中的单元集合。重要的部分是： globalManager，一个将控制整个分配系统的参与者。rowManager 将管理整个网格的一行，并在进行预订时锁定该行。当必须保留一个单元区域时，调用函数 request_specific_cells。此函数将向必须修改行的所有行管理器发送预订请求。当行管理器在其行中保留了区域时，它将向 globalManager 发送确认。当所有的rowmanagers都发送确认信息后，

```
 globalManager(Grid) ->
    receive
        {Pid, request_specific_cells, ReservationId, Coordinates, Ctr, XX} ->
            NewGrid = request_specific_cells(Grid, Pid, ReservationId, Coordinates, Ctr, XX);

        {Pid, confirm_region, ResId, Rid, Sid, Region, Section, Ctr, XX} ->
            NewGrid = confirm_region(Grid, Pid, ResId, Rid, Sid, Region, Section, Ctr, XX);

        {Pid, failed_region, Rid, Region, Ctr, XX} ->
            NewGrid = failed_region(Grid, Pid, Rid, Region, Ctr, XX);

        Else ->
            erlang:display({unexpectedMessage, actor, Else}),
            NewGrid = Grid
    end,
    globalManager(NewGrid).

request_specific_cells(Grid, Pid, ReservationId, Coordinates, Ctr, XX) ->
    {{Width, Height}, GridRows, MaxAllocationSize, FreeCells, {UnspecificRequests, NextId}, PendingRequests, BlockedRows} = Grid,
    {X, Y, W, H} = Coordinates,
    Rows         = lists:seq(Y,Y+H-1),
    % Is one of the blocks that have to be reserved currently blocked?
    BlockedRow   = lists:foldl(fun(B, Acc) -> Acc xor search_list(B,BlockedRows) end, false, Rows),
    Request      = lists:keyfind(ReservationId, 1, UnspecificRequests),
    {ReservationId, _} = Request,
    % Now we need the addresses of the sections in which the regions has to be reserved.
    SubSectionIds = [ SPid || {_,SPid} <- [ lists:keyfind(Row, 1, GridRows) || Row <- Rows]],
    % Storing request enables us to rollback if one of the registrations fails.
    NewPendingRequests = PendingRequests ++ [{length(PendingRequests), 0, lists:map(fun(S) -> {S,null} end, SubSectionIds)}],
    % Send a registration command with the needed section to each corresponding section manager.
    [SPid ! {self(), request, Pid, ReservationId, length(PendingRequests), Coordinates, Ctr, XX} || SPid<- SubSectionIds],
    NewBlockedRows = Rows ++ BlockedRows,
    {{Width, Height}, GridRows, MaxAllocationSize, FreeCells, {UnspecificRequests, NextId}, NewPendingRequests, NewBlockedRows}
    end.

confirm_region(Grid, Pid, URid, Rid, Sid, Region, Section, Cttr, XX) ->
    {Dimensions, GridRows, MaxAllocationSize, FreeCells, {UnspecificRequests, NextId}, PendingRequests, BlockedRows} = Grid,
    {_,RY,_,_} = Region,
    if
        % All blocks have confirmed the reservation so the entire request is successful
        (Ctr+1) == length(Spids) -> 
                NewUnspecificRequests = lists:keydelete(URid, 1, UnspecificRequests),
                NewPendingRequests = lists:keydelete(Rid, 1, PendingRequests),
                NewSpids = lists:keyreplace(Sid, 1, Spids, {Sid, Section}),
                [Spid ! {self(), confirm_region, Sec} || {Spid, Sec} <- NewSpids],
                Pid ! {self(), request_specific_cells, Rid, success};
        true -> 
                NewUnspecificRequests = UnspecificRequests,
                % Safe the region that has to be marked/rolled back in the row
                NewSpids = lists:keyreplace(Sid, 1, Spids, {Sid, Section}),
                % Increase counter of confirmations
                NewPendingRequests = lists:keyreplace(Rid, 1, PendingRequests, {Rid, Ctr+1, NewSpids})
    end,
    NewBlockedRows = delete_list(RY, BlockedRows)
    {Dimensions, GridRows, MaxAllocationSize, FreeCells, {NewUnspecificRequests, NextId}, NewPendingRequests, NewBlockedRows}.

rowManager(Row) ->
    receive
        {Mid, request, Pid, URid, Rid, Region, Ctr, XX} ->
            NewRow = request_region(Row, Mid, Pid, URid, Rid, Region, Ctr, XX);
        Else ->
            erlang:display({unexpectedMessage, rowManager, Else}),
            NewRow = Row
    end,

    rowManager(NewRow).

request_region(Row, Mid, Pid, URid, Rid, Coordinates, Ctr, XX) ->
    {RY, Content, Modified} = Row,
    {X,_,W,_}    = Coordinates,
    if
        Modified == false -> 
                Free = region_is_empty({X,1,W,1}, Content),
                if
                    Free -> NewModified = true,
                            NewContent = mark_region({X,1,W,1}, Content, reserved),
                            Mid ! {Pid, confirm_region, URid, Rid, self(), Coordinates, {X,1,W,1}, Ctr, XX};
                    true -> NewModified = false,
                            NewContent = Content,
                            Mid ! {Pid, failed_region, Rid, Coordinates, Ctr, XX}
                end;
        true -> NewModified = false,
                NewContent = Content,
                Mid ! {Pid, failed_region, Rid, Coordinates, Ctr, XX}
    end,
    {RY, NewContent, NewModified}. 
```

保留者将使用此代码：

```
request_specific_cells(FollowUpPid, ReservationId, {X, Y, Width, Height}, Ctr, XX) ->
   FollowUpPid ! {self(), request_specific_cells, ReservationId, {X, Y, Width, Height}, Ctr, XX},
   receive
      {FollowUpPid, request_specific_cells, ReservationId, SuccessOrFailure} ->
        SuccessOrFailure
end. 
```

我认为这个接收器在收到答案之前就死了，因为我知道

```
Pid ! {self(), request_specific_cells, Rid, success} 
```

从 confirm/9 函数总是以正确的值执行，但并不总是在函数中接收。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:24:51.770

如果接收者还活着，Erlang 在同一节点内有很强的消息传递保证。

您的代码中似乎有一些竞争条件。尝试编写具有相同问题的应用程序的较小示例并将其发布在此处。

# java - 如果我先调用 AmazonS3Client.listObjects，AmazonS3Client.putObject 不起作用

> ID：16083421
> 
> 赞同：1
> 
> 时间：2013-04-18T12:49:10.300
> 
> 标签：java, android, amazon-web-services, amazon-s3

我已经尝试了很长时间来解决这个问题，但没有成功。我正在使用 AWS Android SDK 将文件上传到 AWS S3，有时我的文件会上传到服务器，而其他文件则不会。putObject 指令已执行，但它只是“挂断”并锁定该行上的代码执行。

通过尝试注释代码片段来查找问题的根源，我得出结论，这是因为我在任何上传之前调用了 listObjects。

我无法删除此 listObjects，因为我需要在应用程序启动时获取文件名，并且只有在用户选择要上传的内容后才会进行任何上传。

我通常从我的手机上传照片，大约 1 到 1.3 MB，它会在不到 30 秒的时间内完成上传。如果我调用 listObjects 它“挂断”。为什么会这样？有人知道发生了什么吗？这是我的代码的几行：

在android onCreate期间：

```
weather_data = new ArrayList<Weather>();        
ObjectListing objectListing = s3Client.listObjects(new ListObjectsRequest().withBucketName(lista_de_baldes.get(0).getName()).withPrefix("Thumbs"));
for (S3ObjectSummary objectSummary : objectListing.getObjectSummaries())
    weather_data.add(new Weather(R.drawable.jogo, objectSummary.getKey().replace("Thumbs/", ""))); 
```

在用户选择要上传的照片后（在 doInBackground 期间从扩展 AsyncTask 的类执行以防止主线程冻结）：

```
File arquivo = new java.io.File(filePath);
PutObjectRequest por = new PutObjectRequest(
    lista_de_baldes.get(0).getName(),
    filePath.substring(filePath.lastIndexOf('/') + 1),
    arquivo
);
s3Client.putObject(por); 
```

他们也使用相同的存储桶、相同的区域和相同的区域。objectListing 也运行良好。

* * *

编辑：我通过在上传代码中再次设置 AmazonS3Client 变量来“解决”问题。像这样：

```
s3Client = new AmazonS3Client(
           new BasicAWSCredentials(Constants.ACCESS_KEY_ID, Constants.SECRET_KEY)
       );
s3Client.setRegion(Region.getRegion(Regions.SA_EAST_1)); 
```

但这对我来说没有意义，因为它是一个全局变量。在我下载对象列表后，看起来它被“锁定”了。有人知道发生了什么吗？

* * *

编辑：根据要求，这里有更多代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    s3Client = new AmazonS3Client(
                   new BasicAWSCredentials(Constants.ACCESS_KEY_ID, Constants.SECRET_KEY)
                   );
    //mudei de US_WEST_2 para SA_EAST_1 (south america) para acessar um bucket criado em SP/Brazil
    s3Client.setRegion(Region.getRegion(Regions.SA_EAST_1));

    lista_de_baldes = s3Client.listBuckets();

    setContentView(R.layout.main);

    weather_data = new ArrayList<Weather>();        
    ObjectListing objectListing = s3Client.listObjects(new ListObjectsRequest().withBucketName(lista_de_baldes.get(0).getName()).withPrefix("Thumbs"));
    for (S3ObjectSummary objectSummary : objectListing.getObjectSummaries()) {
        File arquivo_thumb = new File(getCacheDir() + File.separator + objectSummary.getKey().replace("Thumbs/", ""));
        weather_data.add(new Weather(R.drawable.jogo, arquivo_thumb.getName().replace(".png", ".jpg")));

        if(arquivo_thumb.exists())
            continue;

        InputStream input = null;
        try {
            ResponseHeaderOverrides override = new ResponseHeaderOverrides();
            override.setContentType("image/jpeg");
            GeneratePresignedUrlRequest urlRequest = new GeneratePresignedUrlRequest(
                    lista_de_baldes.get(0).getName(),
                    "Thumbs/" + arquivo_thumb.getName()
                    );
            urlRequest.setResponseHeaders(override);
            URL url = s3Client.generatePresignedUrl(urlRequest);
                            ...
         } 
```

上传部分：

```
 protected S3TaskResult doInBackground(Uri... uris) {

        if (uris == null || uris.length != 1) {
            return null;
        }

        // The file location of the image selected.
        Uri selectedImage = uris[0];

        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        filePath = cursor.getString(columnIndex);
        cursor.close();

        S3TaskResult result = new S3TaskResult();

        // Put the image data into S3.
        try {                   
            // Content type is determined by file extension.
            File arquivo = new java.io.File(filePath);
            PutObjectRequest por = new PutObjectRequest(
                    lista_de_baldes.get(0).getName(),
                    filePath.substring(filePath.lastIndexOf('/') + 1),
                    arquivo
                    );
            por.setCannedAcl(CannedAccessControlList.PublicRead);
            s3Client.putObject(por); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:26:36.600

listObjects 是否包含在 AsyncTask 中？你要等到 listObjects 完成吗？仅供参考，从 Honeycomb 级别 11 开始，默认情况下会按顺序执行多个 AsyncTask 实例。

# image - 将此代码的图像添加到谷歌地图标记

> ID：16083422
> 
> 赞同：1
> 
> 时间：2013-04-18T12:49:10.690
> 
> 标签：image, google-maps, google-maps-markers

我正在尝试将自定义图像添加到此代码上的标记，但我不知道如何。我尝试添加新的 var z 并放入图像中，但它不起作用。我发现了越来越多类似的代码，但这看起来很简单，而且我在这个领域很新，我想从不那么复杂的东西开始。

我在这里找到了这段代码：http: [//stiern.com/tutorials/adding-custom-google-maps-to-your-website/](http://stiern.com/tutorials/adding-custom-google-maps-to-your-website/)

```
function initialize() {
        var map_options = {
            center: new google.maps.LatLng(45.813029,15.977895),  <!-- centar mape -->
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    var google_map = new google.maps.Map(document.getElementById("map_canvas"), map_options);

    var info_window = new google.maps.InfoWindow({
        content: 'loading'
    });

    var t = [];
    var x = [];
    var y = [];
    var h = [];

    t.push('Klinček');
    x.push(45.812619);
    y.push(16.007195);
    h.push('<p><strong>Caffe bar Klinček</strong><br/>Cijena: 15kn (Ožujsko točeno)<br/> Adresa: Kušlanova 52</p>');

    var i = 0;
    for ( item in t ) {
        var m = new google.maps.Marker({
            map:       google_map,
            animation: google.maps.Animation.DROP,
            title:     t[i],
            position:  new google.maps.LatLng(x[i],y[i]),
            html:      h[i]

        });

        google.maps.event.addListener(m, 'click', function() {
            info_window.setContent(this.html);
            info_window.open(google_map, this);
        });
        i++;
    }
} 
```

初始化（）;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:47:33.003

我从您上面发布的代码中修改了一段代码。

```
var i = 0;
var image1 = 'beachflag.png';
var image2 = 'roadflag.png';
var image3 = 'railflag.png';
var image;
for ( item in t ) {

     if(condition1){
      image = image1;
     }
     if(condition2){
      image = image2;
     }
     if(condition3){
      image = image3;
     }
     var m = new google.maps.Marker({
        map:       google_map,
        animation: google.maps.Animation.DROP,
        title:     t[i],
        position:  new google.maps.LatLng(x[i],y[i]),
        html:      h[i],
        icon: image

    });
    .........
}//for loop ends 
```

欲了解更多信息[https://developers.google.com/maps/documentation/javascript/overlays#Icons](http://developers.google.com/maps/documentation/javascript/overlays#Icons)

# c++ - 构造 std::string 时程序停止

> ID：16083424
> 
> 赞同：-1
> 
> 时间：2013-04-18T12:49:13.233
> 
> 标签：c++, string, rapidxml

在下面的代码中，在构造 string 时`url`，执行会暂停。没有错误，执行并没有停止，它只是挂在那里，我无法按步。调试器中的一切似乎都很好，没有空指针，baseURL 设置正确。RapidXML 的`value()`函数返回`char*`.

我错过了什么吗？

在 Ubuntu 12.04 上使用 Eclipse Indigo

```
 rapidxml::xml_node<> *galleryNode = myNode->first_node("gallery");
    std::string baseURL = galleryNode->first_attribute("url")->value();
    galleryNode = galleryNode->first_node("filename");
    while ( galleryNode != NULL )
    {
        std::string url(baseURL);
        url.append(galleryNode->value());
        gallery.AddImageUrl(url);
        galleryNode = galleryNode->next_sibling();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:05:20.130

原因是在 Eclipse 中启用了 python 的 gdb。我用svn下载了它，然后修改了`gdbinit`文件。调试时查看变量要容易得多，但显然它有相当烦人的副作用。

# mysql - 如何根据其他表中的值从一个表中删除行

> ID：16083428
> 
> 赞同：0
> 
> 时间：2013-04-18T12:49:22.013
> 
> 标签：mysql, sql, sql-delete

表一。

```
columns : A B C D

values:   a b c d         
          q w e r 
```

表二

```
C: A B C D E
V: a b c d e 
```

在两个表 A、B、C、D 上定义一行（主键）。

现在我需要在 TABLE II E=e 中删除 TABLE I 中的行（显然两个表之间的映射在 A、B、C、D 上）。

我只需要在一个查询中执行此操作。请。

我试过： **从表 I 中删除（A，B，C，D）在（从表 II 中选择 A，B，C，D，其中 E='e'）**

这个对吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:53:01.493

您甚至可以在`DELETE`语句中加入两个表，例如。

```
DELETE a
FROM Table1 a
INNER JOIN Table2 b
  ON a.A = b.A
  AND a.B = b.B
  AND a.C = b.C
  AND a.D = b.D
WHERE b.E = 'e' 
```

# android - Android：如何检测状态栏打开

> ID：16083429
> 
> 赞同：2
> 
> 时间：2013-04-18T12:49:22.873
> 
> 标签：android, statusbar

我正在编写一个应用程序，它需要知道状态栏何时打开，然后做相应的事情（例如，触发一个意图）。我在网上广泛搜索了一种方法来检测状态栏何时打开，但我没有发现任何有用的东西。

我有一个想法，当我注意到当状态栏打开时，sensorManager 取消注册方向监听器：

> unregisterListener:: Listener= android.view.OrientationEventListener$SensorEventListenerImpl@427b63c0

当状态栏关闭时，sensorManager 注册该监听器：

> registerListener ::句柄= 0名称= LSM330DLC 3轴加速度计延迟= 200000侦听器= android.view.OrientationEventListener$SensorEventListenerImpl@427b63c0

所以我查看了源代码并试图找到这个调用是在哪里进行的，以及哪个对象调用它，因为如果这个对象可以检测到 statusBar 的打开，那么我可能也可以这样做，但我没有找到正确的位置那个电话。

如果有人能给我关于如何检测状态栏何时打开的完整答案，我会很高兴，但我也很高兴知道哪个对象告诉 sensorManager 进行此注册/取消注册操作。

提前致谢！

# delphi - Delphi XE2 64 位 ISAPI 访问冲突

> ID：16083434
> 
> 赞同：0
> 
> 时间：2013-04-18T12:49:30.010
> 
> 标签：delphi, iis-7.5, delphi-xe2, isapi

Windows Server 2008 R2 64 位 IIS 7.5 Delphi XE2

我使用 delphi XE2 制作了一个简单的 WebService/ISAPI DLL。这个 Web 服务有一个函数，它返回两个数字之和，并制作了一个简单的客户端应用程序来测试这个函数。当我将它（与客户端一起）编译为 32 位应用程序（在具有 32 位启用的应用程序池的虚拟目录中）时，一切正常

当我将它编译为 64 位 DLL（客户端也被编译为 64 位应用程序）时，我总是收到访问冲突错误“类 ERemotableException 并带有消息‘在模块‘MyWebService.dll’中的地址 0000000002199F33 的访问冲突’。阅读地址 0000000000000000'。”

我检查了我应该做的所有 IIS7.5 权限（32 位 ISAPI DLL 工作正常）并且问题一直出现。

这是一些快速的测试反馈：

如果我使用 TRemotable 类后代在过程中传递数据 --> 没有 pb

但是，编写一个返回整数的简单函数会导致访问冲突。我还尝试使用本机 wndows 数据类型，例如 Int64，但没有运气。

以前有人遇到过这样的问题吗？因为坦率地说我很绝望。

这是代码：

这是webmodule接口

```
{ Invokable interface IMyDebugModule }

unit MyDebugModuleIntf;

interface

uses Soap.InvokeRegistry, System.Types, Soap.XSBuiltIns;

type

  { Invokable interfaces must derive from IInvokable }
  IMyDebugModule = interface(IInvokable)
  ['{02A5AD69-24E4-447B-8882-804DA687A0F2}']

    { Methods of Invokable interface must not use the default }
    { calling convention; stdcall is recommended }
    //function MyFunc():double;stdcall;
    function MyFunc():Int64;stdcall;
  end;

implementation

initialization
  { Invokable interfaces must be registered }
  InvRegistry.RegisterInterface(TypeInfo(IMyDebugModule));

end. 
```

和实施

```
{ Invokable implementation File for TMyDebugModule which implements IMyDebugModule }

unit MyDebugModuleImpl;

interface

uses Soap.InvokeRegistry, System.Types, Soap.XSBuiltIns, MyDebugModuleIntf;

type

  { TMyDebugModule }
  TMyDebugModule = class(TInvokableClass, IMyDebugModule)
  public
    function MyFunc():Int64;stdcall;
  end;

implementation

{ TMyDebugModule }

function TMyDebugModule.MyFunc: Int64;
begin
  Result := 101;
end;

{ TMyDebugModule }

initialization
{ Invokable classes must be registered }
   InvRegistry.RegisterInvokableClass(TMyDebugModule);
end. 
```

这是客户端应用程序 WSDl pascal 文件：

```
// ************************************************************************ //
// The types declared in this file were generated from data read from the
// WSDL File described below:
// WSDL     : C:\MyWorkingDir64\MyTests\WebServiceDebug\Client\IMyDebugModuleWSDL.xml
// Version  : 1.0
// (19/04/2013 09:46:52 - - $Rev: 37707 $)
// ************************************************************************ //

unit IMyDebugModuleWSDL;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Embarcadero types; however, they could also 
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:long            - "http://www.w3.org/2001/XMLSchema"[]

  // ************************************************************************ //
  // Namespace : urn:MyDebugModuleIntf-IMyDebugModule
  // soapAction: urn:MyDebugModuleIntf-IMyDebugModule#MyFunc
  // transport : http://schemas.xmlsoap.org/soap/http
  // style     : rpc
  // use       : encoded
  // binding   : IMyDebugModulebinding
  // service   : IMyDebugModuleservice
  // port      : IMyDebugModulePort
  // URL       : http://devserver2008/BahaaDebug/BahaaDebug.dll/soap/IMyDebugModule
  // ************************************************************************ //
  IMyDebugModule = interface(IInvokable)
  ['{64033E30-8D6E-F252-4E38-55502BF4E1A5}']
    function  MyFunc: Int64; stdcall;
  end;

function GetIMyDebugModule(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): IMyDebugModule;

implementation
  uses SysUtils;

function GetIMyDebugModule(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): IMyDebugModule;
const
  defWSDL = 'C:\MyWorkingDir64\MyTests\WebServiceDebug\Client\IMyDebugModuleWSDL.xml';
  defURL  = 'http://devserver2008/BahaaDebug/BahaaDebug.dll/soap/IMyDebugModule';
  defSvc  = 'IMyDebugModuleservice';
  defPrt  = 'IMyDebugModulePort';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as IMyDebugModule);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

initialization
  { IMyDebugModule }
  InvRegistry.RegisterInterface(TypeInfo(IMyDebugModule), 'urn:MyDebugModuleIntf-IMyDebugModule', '');
  InvRegistry.RegisterDefaultSOAPAction(TypeInfo(IMyDebugModule), 'urn:MyDebugModuleIntf-IMyDebugModule#MyFunc');

end. 
```

以及调用该函数的测试单元

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, IMyDebugModuleWSDL, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  w:IMyDebugModule;
  i:integer;
begin
  w := GetIMyDebugModule(True,'',nil);
  i := w.MyFunc;
  caption := IntToStr(i);
end;

end. 
```

# java - 全局禁用页面上的 Tab 键

> ID：16083442
> 
> 赞同：0
> 
> 时间：2013-04-18T12:49:46.127
> 
> 标签：java, javascript, smartgwt

如何全局禁用页面上的 tab 键？我发现了这个[问题](https://stackoverflow.com/questions/5871626/lock-tab-key-with-javascript)，但它使用了 jQuery，而我没有使用 jQuery。我知道我可以将 tabIndex 设置为 -1 以禁用键盘焦点，但这是针对使用 GWT-Ext、与 SmartGWT 和 OpenLayers 混合的 GWT Web 应用程序，因此只需在页面中设置一次就更容易了整套控件（并且有一百多个不同的控件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:54:07.373

你可以使用这样的东西：

```
window.onkeydown = function() {
    if (event.keyCode == 9) {
        event.preventDefault();
    }
} 
```

我通过在 Google Chrome 的控制台中输入它来检查它，它禁用了 Tab 键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:47:30.947

我最终不得不`EntryPoint`使用 SmartGWT 在我的课堂上添加这个：

```
Event.addNativePreviewHandler(new NativePreviewHandler()
{
   @Override
   public void onPreviewNativeEvent(NativePreviewEvent event)
   {
      // tab is key 9
      if (event.getNativeEvent().getKeyCode() == 9)
      {
         event.cancel();
      }
   }
}); 
```

# jquery - 购物篮 - 拖放不起作用

> ID：16083449
> 
> 赞同：0
> 
> 时间：2013-04-18T12:49:59.360
> 
> 标签：jquery, html, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

我试图拥有它，以便当我将图像拖动到特定的 div ( `#basketitems`) 时，它会将`attr.('id')`其放入 div 中。它基本上是一个拖放式购物车。

我已经有以下内容：

```
jQuery(document).ready(function() {

$('.draggable').draggable({ containment: 'document', helper: 'clone', opacity: 0.9, revert: true,
start: function() {
product = $(this).attr('id');
productdetails = product;
} 
});

$('#basketitems').droppable({ drop: function() {
alert(productdetails); // Not Complete

}
}); }); 
```

和 HTML：

```
<div id="basketitems" class="ui-droppable">
<p>Basket Items:</p>
</div> 
```

使用以下脚本：

```
<script type='text/javascript' src='../scripts/jquery-1.7.2.min.js'></script>
<script type='text/javascript' src='../scripts/clickykeyboards.js'></script>
<script type='text/javascript' src='../scripts/jquery-ui.min.js'></script> 
```

拖动部分正在工作，但是当我放到 div 上时什么都没有发生。

# javascript - 在表中选择适当的 tr - jquery

> ID：16083455
> 
> 赞同：3
> 
> 时间：2013-04-18T12:50:20.197
> 
> 标签：javascript, jquery

如何在第二个 td 中选择包含 USDTRY 值的 tr 标签，并使用 jquery 用 TRYUSD 更改其值？

```
<table class="k-selectable" cellspacing="0" role="grid" data-role="selectable">
<tbody>
    <tr role="row" data-uid="9d1c0ae7-ec5d-4377-ad61-9eace8158802">
        <td role="gridcell">
            <img src="/Images/up.png">
        </td>
        <td role="gridcell">USDTRY</td>
        <td role="gridcell">1.30514</td>
        <td role="gridcell">1.30527</td>
    </tr>
    <tr class="k-alt" role="row" data-uid="0ff48da9-2019-4cf8-b631-a09c3ce98d63">
    <tr role="row" data-uid="2c9ae0ba-c744-4bbb-9a23-fd15a3b65b6c">
</tbody> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:56:30.437

您想使用常规选择器尽可能缩小您的选择范围，然后您可以使用[`:contains`psuedoselector](http://api.jquery.com/contains-selector/)搜索您的文本：

```
$('table.k-selectable td:contains("USDTRY")').text('TRYUSD'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T12:57:17.877

你可以使用这个片段：

```
$('td[role="gridcell"]:contains("USDTRY")').text('TRYUSD'); 
```

[**演示**](http://jsbin.com/unudup/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:53:02.743

也许不是一个完美的解决方案，但试试这个：

```
$('table.k-selectable tr td').each(function() {
     if($(this).text() === 'USDTRY') {
         $(this).text('TRYUSD');
     }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T12:55:09.740

```
$(selector).find("tr:contains('USDTRY ')"); 
```

或者

```
$('tableId td:contains("USDTRY")').text('TRYUSD '); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T12:55:42.083

使用包含选择器：

```
$('td:contains("USDTRY")').html('TRYUSD '); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T13:00:45.710

您不需要查找`tr`..只需`td`使用该文本查找`filter()`并替换

```
 $('td').filter(function(){
  return $(this).text() == "USDTRY";
 }).text('TRYUSD'); 
```

[在这里摆弄](http://jsfiddle.net/P5UGt/)

# asp.net-mvc - MVC 4 - Ajax - 用另一个部分替换一个视图

> ID：16083459
> 
> 赞同：5
> 
> 时间：2013-04-18T12:50:30.230
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-ajax

我正在尝试用部分视图替换主视图中 div 的内容，具体取决于单击了哪个@Ajax.ActionLink。

最初我加载 _CaseLoad 局部视图，然后当我单击相关的 ActionLink 时，我希望能够在两个局部视图 _CaseLoad 和 _Vacancies 之间切换。我在“主”文件夹中有部分视图和索引视图。

当我单击“空缺”链接时，它会简要显示 LoadingElementID，但它不会用 _Vacancies 部分视图替换 _CaseLoad 部分视图？

控制器动作（MainController）：

```
 public ActionResult Index(int page = 1, string searchTerm = null)
    {
        MainIndexViewModel model = new MainIndexViewModel()
        // Populate Model

        return View(model);

    } 
```

主索引视图：

```
@model Project.WebUI.Models.MainIndexViewModel

@{
  ViewBag.Title = "Index";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="MainIndex">
        <div id="Menu">

            @Ajax.ActionLink("CaseLoad", "_CaseLoad", "Main", null, new AjaxOptions() { UpdateTargetId = "Main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET",
                LoadingElementId = "busycycle" }) |

            @Ajax.ActionLink("Vacancies", "_Vacancies", "Main", null, new AjaxOptions() { UpdateTargetId = "Main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET",
                LoadingElementId = "busycycle" })

        </div><hr/>

        <div id="busycycle" style="display:none;"><img src="~/Content/images/preloader-w8-cycle-black.gif" /></div>
        <div id="Main">
            @Html.Partial("_CaseLoad")
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:38:22.883

您对@Ajax.ActionLink 的调用是错误的，您正在这样做：

```
@Ajax.ActionLink("CaseLoad", "_CaseLoad", "Main", null, new AjaxOptions() { UpdateTargetId = "Main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET",
            LoadingElementId = "busycycle" }) 
```

这意味着您的链接文本是“CaseLoad”，而“MainController”中要调用的操作是“_CaseLoad”？“_CaseLoad”不是您的局部视图的名称吗？

要解决此问题，您必须在 MainController 中创建 CaseLoad 和 Vacancy 操作，使这两种方法都返回 PartialView("_CaseLoad.cshtml", model); 或 PartialView("_Vacancys.cshtml, model) 如下所示：

```
public ActionResult CaseLoad(int page = 1, string searchTerm = null)
{
    MainIndexViewModel model = new MainIndexViewModel()
    // Poopulate Model

    return PartialView("_CaseLoad.cshtml", model);
} 
```

我只是切断了所有实现细节，只是为了让您了解如何解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:19:33.723

我会说尝试使用具有一组良好开发人员工具的浏览器（我推荐 Chrome）并点击`F12`. 打开开发工具，切换到网络选项卡，然后单击您的 ajax 链接。Loading 元素仅在请求进行时显示，并不一定意味着它成功。通过使用 Network 选项卡，您应该能够看到 Ajax 请求的响应是什么，并确定它是否是一个错误，以及生成的部分视图实际上是什么。

# java - 实施 MRU 算法

> ID：16083460
> 
> 赞同：0
> 
> 时间：2013-04-18T12:50:32.223
> 
> 标签：java, algorithm, caching

我想实现一个简单的 MRU 缓存：我将使用一个队列：

```
get(Object): 
```

*   检查队列是否包含对象
    *   是：将其从队列中删除并插入到开头
    *   否：将请求转发给系统，获取元素并在开头插入

这种方法好吗？我已经看到许多实现都使用地图，但我不明白为什么。为什么我需要一个用于缓存的键值对？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:58:23.880

因为使用地图检查集合是否包含元素要快得多（理论上 O(1)），使用队列您必须遍历所有现有元素并进行比较，即 O(sizeOfQueue)

# web - 会话 cookie 是否在午夜过期？

> ID：16083463
> 
> 赞同：0
> 
> 时间：2013-04-18T12:50:43.887
> 
> 标签：web, google-analytics, browser, session-cookies, web-analytics

我在 Web anlaytics 工作，我使用 cookie 来跟踪访问，与 [谷歌分析](https://support.google.com/analytics/answer/2731565?hl=en)一样的网页浏览量。无论`session cookie`是在午夜到期还是我们必须强制到期。

我有两个问题

1.会话cookie是否在[午夜（晚上11:59:59）](http://lordwhitney.co.uk/privacy-and-cookies)过期？

2.如果过期了，为什么？

任何想法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:26:20.133

随着对 GA 中访问/会话定义的最后一轮更改，我记得如果用户在午夜之后继续现有会话，则会生成一个新会话。

编辑：这是定义[https://support.google.com/analytics/answer/2731565?hl=en](https://support.google.com/analytics/answer/2731565?hl=en)

# jpa - JPA：OptimisticLockException 和级联

> ID：16083467
> 
> 赞同：4
> 
> 时间：2013-04-18T12:50:52.797
> 
> 标签：jpa, optimistic-locking

在我当前的项目中，我将 Spring Data JPA 与 Hibernate 一起使用，但认为这是一个更普遍的问题，也应该涵盖“普通”JPA。

我不确定`OptimisticLockException`在使用`@Version`.

由于我的应用程序的工作方式，一些关系有`CascadeType.PERSIST`，而`CascadeType.REFRESH`另一些关系也有`CascadeType.MERGE`。

1.  在哪里处理`OptimisticLockException`

据我所知，在服务层上处理这个问题不会特别有效，`CascadeType.MERGE`因为有问题的实体可能是需要由另一个服务处理的实体（我每个实体类都有一个服务）。

问题是我正在创建一个框架，因此服务之上没有层，所以我可以将其“委托”给我的框架的用户，但这似乎“弱而懒惰”。

1.  确定有问题的实体和已更改的字段

如果发生 OptimisticLockException，如何获取导致问题的实体以及更改了哪些字段？

是的，我可以打电话`getEntity()`，但我如何将其转换为正确的类型，尤其是在使用 CascadeType.MERGE 的情况下？实体可能有多种类型，所以`instanceof`会想到一个 if/switch ，但这看起来像地狱一样丑陋。

一旦我有了正确的类型，我就需要获取版本之间的所有差异，不包括某些字段，如版本本身或 lastModifiedDate。

在我的脑海里还有 HTTP 409，它指出在发生冲突的情况下响应应该包含冲突的字段。

这一切是否有“最佳实践模式”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:49:24.233

乐观锁定的全部意义在于能够告诉最终用户：嘿，您试图保存这条重要信息，但有人在背后保存了它，所以您最好刷新信息，决定是否仍然想要保存它并可能输入一些新值，然后重试。

就像 SVN 一样，如果你尝试提交一个文件而其他人之前提交了一个新版本，SVN 会强制你更新你的工作副本并解决潜在的冲突。

所以我会做和 JPA 一样的事情：它让调用者通过抛出异常来决定做什么。此异常应在表示层中处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T06:19:29.503

困扰我的是 JPA (Hibernate) 和 Spring 提供的异常实际上并没有返回失败对象的当前版本。因此，如果用户需要决定做什么，他显然需要查看更新后的最新版本。只是延迟了他的电话的一个错误，对我来说似乎是延迟了。我的意思是您已经在事务中处于数据库级别，因此直接获取新的当前值没有成本......

我创建了一个新异常，其中包含对未能更新的实体的最新版本的引用：

```
public class EntityVersionConflictException {

    @Getter
    private final Object currentVersion;

    public EntityVersionConflictException(
            ObjectOptimisticLockingFailureException lockEx,
            Object currentVersion){
        super(lockEx);
        this.currentVersion = currentVersion;
    }

    public Object getConflictingVersion() {
        return ((OptimisticLockException)getCause().getCause()).getEntity();
    }

    public Class getEntityClass() {
        return getCause().getPersistentClass();
    }

    @Override
    public ObjectOptimisticLockingFailureException getCause(){
        return (ObjectOptimisticLockingFailureException)super.getCause();
    }
} 
```

以及相应的服务方法

```
try {
    return getRepository().save(entity);
} catch (ObjectOptimisticLockingFailureException lockEx) {
    // should only happen when updating existing entity (eg. merging)
    // and because entites do not use CascadeType.MERGE
    // the entity causing the issue will always be the of class
    // entity.getClass()
    // NOTE: for some reason lockEx.getPersistentClass() returns null!!!
    // hence comparing by class name...
    if (lockEx.getPersistentClassName().equals(entityClass.getName())) {
        T currentVersion = getById(entity.getId());
        throw new EntityVersionConflictException(lockEx, currentVersion);
    } else {
        throw lockEx;
    }
} 
```

注意评论。在 CascadeType.MERGE 的情况下，这不会像这样工作，逻辑必须要复杂得多。我每个实体类型有 1 个服务，因此服务必须保留对所有其他服务的引用，依此类推。

# forms - 在 jquery 中调用 AJAX 后更新变量

> ID：16083471
> 
> 赞同：0
> 
> 时间：2013-04-18T12:51:03.437
> 
> 标签：forms, jquery, django-forms

我想创建一个页面，无论用户是否在（Django ModelChoice）表单上进行选择，然后这会导致另一个表单的 Ajax 更新，这可能会触发额外的 Ajax 更新。我相当基本的 javascript 技能不能胜任这项任务！

问题是我无法正确读取更新表单的值 - 它总是比我认为应该的位置落后一步。在下面的简化示例中，就好像 Jquery 在计算 first_var 的同时计算 second_var 的值（即在我使用 Ajax 调用更新它之前）。如果我在#id_first_metric 中的两个选项之间不断切换，second_var 将更新，但它始终指向上次更新之前#id_second_metric 的值。

如何让 second_var 正确包含其新更新的值？

```
function first_function(first_var){
    console.log('first var:' + first_var);
    //    correctly states the value of first var
    var update_url = '/ajax/update_second_metric/first_var';
    $('#id_second_metric').load(update_url);

$('#first_metric_selector').change(function () {
    var first_var = $('#id_first_metric').val();
    first_function(first_var);
    $('#second_metric_selector').change();
});

$('#second_metric_selector').change(function () {
    var second_var = $('#id_second_metric').val();
    console.log('second var' + second_var);
    //  fails to detect the new value of second var created by the first
    //  AJAX call
}); 
```

回答

```
function first_function(first_var){
    console.log('first var:' + first_var);
    //    correctly states the value of first var
    var update_url = '/ajax/update_second_metric/';
    $('#id_second_metric').load(update_url, function(){
        $('#second_metric_selector').change();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:58:49.627

"$('#id_second_metric').load(update_url)" 异步发生。不能保证在“$('#id_second_metric').load(update_url)”完成之前调用“$('#second_metric_selector').change()”。

您可以使用 load 提供的回调函数来保证顺序。见[http://api.jquery.com/load/](http://api.jquery.com/load/)

# heroku - 使用 heroku 应用程序设置 Varnish - 我使用什么后端主机和端口？

> ID：16083472
> 
> 赞同：0
> 
> 时间：2013-04-18T12:51:03.530
> 
> 标签：heroku, varnish

我正在尝试使用我的 Heroku 应用程序设置 Varnish 服务器。我在设置后端主机和端口以指向我的 heroku 应用程序时遇到了困难。

我尝试这样输入：

```
backend default {
    .host = "gavedrysset-api.herokuapp.com";
    .port = "80";
} 
```

这不起作用，并且给了我一个 heroku 错误页面，上面写着：

```
Heroku | No such app

There is no app configured at that hostname.
Perhaps the app owner has renamed it, or you mistyped the URL. 
```

我怎样才能使清漆指向我的heroku应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:05:54.097

我想出了一个解决办法。我不知道我在做什么......在[这个](https://stackoverflow.com/questions/9240148/how-to-set-backend-in-varnish-cache-for-a-remote-shared-hosting?rq=1)线程中找到了答案。

我将此添加到 default.vcl：

```
sub vcl_recv {
    set req.http.host = "gavedrysset-api.herokuapp.com";
} 
```

# python - Python 与 asynchat 聊天获取会话数据

> ID：16083473
> 
> 赞同：1
> 
> 时间：2013-04-18T12:51:06.143
> 
> 标签：python, sockets, asyncore

我从[这里](http://www.newthinktank.com/2010/11/python-2-7-tutorial-pt-18-chat-server/)有这段代码：

```
#!/usr/bin/python

from asyncore import dispatcher
from asynchat import async_chat
import socket, asyncore

PORT = 55555
NAME = 'ChatLine'

class ChatSession(async_chat):
    def __init__(self,server,sock):
        async_chat.__init__(self, sock)
        self.server = server
        self.set_terminator("\r\n")
        self.data = []

    def collect_incoming_data(self, data):
        self.data.append(data)

    def found_terminator(self):
        line = "".join(self.data)
        self.data = []
        self.server.broadcast(line)

    def handle_close(self):
        async_chat.handle_close(self)
        self.server.disconnect(self)

class ChatServer(dispatcher):
    def __init__(self, port, name):
        dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.set_reuse_addr()
        self.bind(("",port))
        self.listen(5)
        self.name = name
        self.sessions = []

    def disconnect(self, sessions):
        self.sessions.remove(session)

    def broadcast(self, line):
        for session in self.sessions:
            session.push('>>' + line + '\r\n')

    def handle_accept(self):
        conn, addr = self.accept()
        print "Connected from " + str(addr)
        self.sessions.append(ChatSession(self, conn))

if __name__ == '__main__':
    s = ChatServer(PORT, NAME)
    try: asyncore.loop()
    except KeyboardInterrupt: print 
```

如果我使用 putty/telnet 或任何其他软件连接它，我将得到以下输出：

```
test
>>test 
```

首先`test`是我发送的内容，其次`>>>test`是服务器广播回来的内容。

我怎样才能删除我发送的同一条消息的广播，所以我不会得到第二个`>>>test`？也许我可以注册会话 ID 或任何其他数据，当服务器广播消息时，我可以将数据发送到除先前记录的会话之外的所有会话？

或者也许我可以添加用户名并使用它来删除重复的消息？

我没有找到任何关于 asyncore 或 asychat 的教程或文档，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:34:46.990

Your `sessions` list on `ChatServer` contains all of the `ChatSession` instances representing connections to your server.

This includes the `ChatSession` that sent a particular message to the server. If you want to send that message out to all of the *other* connections, then you just need to skip one of the `ChatSession` instances in the loop inside `broadcast`. To know which one to skip, you might add an argument to broadcast:

```
def broadcast(self, line, skip): 
```

And then use it to *not* call `push` one time through the loop:

```
 for session in self.sessions:
        if session is skip:
            session.push('Alternate pedagogical output\r\n')
        else:
            session.push('>>' + line + '\r\n') 
```

Here I haven't actually skipped the session, just gave it different treatment so you can easily tell that something different is happening to it (instead of seeing no output, which could also be caused by some other bug...)

Now you just need to change the caller to pass this argument. Fortunately, the caller is a method of `ChatSession` where the correct `ChatSession` to skip is easily available - as `self`!

So just change the `found_terminate` method of `ChatSession` to look like...

```
def found_terminator(self):
    line = "".join(self.data)
    self.data = []
    self.server.broadcast(line, skip=self) 
```

As you can see, this isn't really taking advantage of any asyncore or asynchat features. It's just some more logic in your application code.

Incidentally, Twisted is a lot more featureful than asynchat - so I recommend you spend your time learning that, instead. For a taste, here's your chat server written with Twisted:

```
from twisted.internet import reactor
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineOnlyReceiver

PORT = 55555

class ChatSession(LineOnlyReceiver):
    def connectionMade(self):
        print "Connection from", self.transport.getPeer()
        self.factory.sessions.append(self)

    def connectionLost(self, reason):
        self.factory.sessions.remove(self)

    def lineReceived(self, line):
        self.factory.broadcast(line, skip=self)

    def send(self, line):
        self.sendLine('>>' + line)

class ChatServer(Factory):
    protocol = ChatSession

    def __init__(self):
        self.sessions = []

    def broadcast(self, line, skip):
        for session in self.sessions:
            if session is not skip:
                session.send(line)

reactor.listenTCP(PORT, ChatServer())
reactor.run() 
```

# python - 激活 Tkinter 顶层

> ID：16083491
> 
> 赞同：4
> 
> 时间：2013-04-18T12:51:51.463
> 
> 标签：python, tkinter

我正在尝试制作一个`Toplevel`小部件，它是屏幕上的活动窗口（我想要它，这样如果你按`Enter`，它会退出窗口。我已经将键绑定到小部件，但我似乎无法获得窗口成为我计算机上的主窗口。我正在使用 Notepad++ 运行我的程序（我有这个特定程序的快捷方式，因为我会经常使用它）。

这是我的代码：

```
def main():
    root = Tk(className = ' Module Opener')
    app = GetFileName(root)
    root.rowconfigure(0, weight = 1)
    root.columnconfigure(0, weight = 1)
    root.bind('<Return>', (lambda e, b=app.goButton: b.invoke()))
    root.mainloop()
    f, pythonType = app.fileName, app.pythonType
    if f[-3:] != '.py': f += '.py'
    moduleFile = getFilePath(f, pythonType)
    if not moduleFile is None:
        subprocess.call([r"C:\Program Files\Notepad++\notepad++.exe", moduleFile])
    else:
        root.withdraw()
        finalRoot = Toplevel(root)
        finalRoot.grab_set() # I thought this would make it active
        finalApp = FileNotExist(finalRoot, f)
        finalRoot.rowconfigure(0, weight = 1)
        finalRoot.columnconfigure(0, weight = 1)
        finalRoot.bind('<Return>', (lambda e, b=finalApp.okButton: b.invoke()))
        finalRoot.mainloop() 
```

我想要它，这样当它打开时，如果我按下`Enter`，它就会执行我的命令；但是，我必须先在窗口中单击以使其变为活动状态，然后才能正常工作。

我尝试了各种方法，例如`finalRoot.lift()`, `finalRoot.focus_set()`, `finalRoot.grab_set()`/ （我从[另一个问题](https://stackoverflow.com/questions/15944533/how-to-keep-the-window-focus-on-new-toplevel-window-in-tkinter)`finalRoot.grab_set_global()`中看到了这些方法）和.`finalRoot.focus()`

`Tk()`程序启动时，第一个窗口处于活动状态。然而，`Toplevel()`事实并非如此。我也尝试过制作两个`Tk()`（销毁`root`然后创建`finalRoot`为新`Tk()`实例），但这也不起作用。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-17T06:07:33.370

> ...但是，我必须先在窗口中单击以使其变为活动状态，然后才能正常工作。

我刚遇到这个问题，在研究解决方案时，我发现了这个线程。我正在使用 Windows 7 专业版。我所做的只是打电话给**两者** `grab_set()`，`focus()`它为我解决了这个问题。您已经有了`finalRoot.grab_set()`，只需添加：

```
finalRoot.focus() 
```

它在我的情况下有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-11T23:59:08.157

我尝试了上述解决方案，发现`focus_force()`仅适用于 Windows Vista/Python 3.3。`takefocus=True`在创建顶层窗口时包含该方法也可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:28:03.870

我遇到了同样的问题，并尝试了我能找到的一切。不幸的是，答案是这取决于您的操作系统。我的窗口自动聚焦在我的旧 Mac 上，而不是 OSX Lion 上。您列出的一些命令也依赖于操作系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-13T18:38:59.997

在 Mac OS El Capitan 上，上述建议都不适用于我，但这确实：

```
class Window(Tk.Toplevel):
    ...
    def setActive(self):
        self.lift()
        self.focus_force()
        self.grab_set()
        self.grab_release()
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-29T15:49:16.510

```
root.call('wm', 'attributes', '.', '-topmost', True)
root.after_idle(root.call, 'wm', 'attributes', '.', '-topmost', False)
root.focus_force() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-24T17:53:55.390

这是对我有用的代码

```
root= tk.Tk()
root.title("Main Window")
top = tk.Toplevel()
top.title("Topelevel Window")
top.grab_set()  #for disable main window
top.attributes('-topmost',True)  #for focus on toplevel
root.mainloop() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-03T06:27:08.783

我在这里为时已晚，但如果有人想知道 的解决方案，那就行`python 3.9`了`focus()`。

所以，

`top_window_name.focus()`

而已。

# java - 如何在jmeter中使用java类？

> ID：16083492
> 
> 赞同：1
> 
> 时间：2013-04-18T12:51:53.807
> 
> 标签：java, jmeter

我试过在 jmeter 中运行 java 类。
我在 BSF 预处理器中放置了 java 代码。
但是出现了以下错误：

```
ERROR - org.apache.bsf.BSFManager: Exception : java.lang.ClassNotFoundException: org.apache.bsf.engines.java.JavaEngine
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190 
```

我已经尝试过这个[链接](http://commons.apache.org/proper/commons-bsf/index.html)来包含 jar 文件。但我不知道我需要包含哪个 jar 文件。

有人可以告诉我在 jmeter 中运行 java 类包含哪个 jar 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:07:59.587

Which versoin of jmeter are you using? With 2.9 jsr 223 pre-processor using java language is working fine for me. I think the jsr223-* elements are superseding beanchell-* and BSF-* elements so you can give it a try.

java and beanshell btw are claimed slow if you have it executed a lot. You can use groovy and JSR223 preprocesor. You can see about caching the compiled code in the [JSR223 sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler) docs.

Beanshell and groovy are mostly java code compatible so you can use java code with them but not entirely. Anything more complicated in pure java can fail to compile in groovy and/or beanshell.

If you use pure java, then it makes sense to use the [Java Request](http://jmeter.apache.org/usermanual/component_reference.html#Java_Request) sampler if you can instead of a pre-processor. If technically hard to achieve, the fastest option seems to use groovy with jsr223 pre-processor and caching the compiled code.

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:02:19.790

最好使用 Beanshell 而不是 Java。

BSF 中似乎存在封装问题，请参阅

*   [http://mail-archives.apache.org/mod_mbox/jakarta-bsf-user/200810.mbox/%3C48F748CC.3070808@wu-wien.ac.at%3E](http://mail-archives.apache.org/mod_mbox/jakarta-bsf-user/200810.mbox/%3C48F748CC.3070808@wu-wien.ac.at%3E)

> [同时，您可以从http://wi.wu-wien.ac.at/rgf/rexx/bsf4rexx/](http://wi.wu-wien.ac.at/rgf/rexx/bsf4rexx/current/BSF4Rexx_install.zip)获得适用于 BSF 2.4 的所有 BSF 引擎（以及稍微高级的 BSF 2.4 版本）的二进制发行版 [当前/BSF4Rexx_install.zip](http://wi.wu-wien.ac.at/rgf/rexx/bsf4rexx/current/BSF4Rexx_install.zip)。解压该 zip 存档后，您将找到一个名为“bsf-v244-20080704.jar”的 jar 文件。只需将官方 BSF 2.4 替换为该版本（其中包含所有官方引擎以及“BSF_Log”和“BSF_LogFactory”）。

提到的罐子也有一些问题。

无论如何，为了性能和最新代码，最好使用 JSR223 Sampler + Groovy + 填写 Compilation Cache Key

# java - 在挂载的 HDFS 上创建或写入文件时出现 Java 异常

> ID：16083497
> 
> 赞同：0
> 
> 时间：2013-04-18T12:52:07.793
> 
> 标签：java, hdfs, mount

现在我正在处理一个使用 java 编写的项目，我需要使用 hdfs 来存储它创建的文件。所以我将 HDFS 挂载到本地文件系统，但是使用这个挂载的 HDFS 我遇到了一些问题。当程序创建或将文件写入挂载的HDFS，出现异常。所以我做了一个演示来测试，也得到了错误。代码如下：

```
 package test;

import java.io.File;
import java.io.IOException;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        File f = new File("/mnt/hdfs/test");
        try {
            System.out.println(f.createNewFile());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

例外情况如下：

```
java.io.IOException: Unknown error 524
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.createNewFile(File.java:883)
    at test.Test.main(Test.java:15) 
```

我对挂载的HDFS有rw权限，我可以使用jdk api（不是hadoop api）成功创建目录，现在我的问题是我是否可以通过JDK API创建或写入文件？有没有人成功地做到了这一点？如果是这样，我应该怎么做才能使它成为可能？

# python - pandas 的计算能力

> ID：16083499
> 
> 赞同：4
> 
> 时间：2013-04-18T12:52:15.993
> 
> 标签：python, pandas

使用 python 2.7.3 和 pandas 0.10.1，当我尝试使用 ** 操作来计算功率（数学，而不是热力学）时，我收到了弃用警告。在文档中，它涵盖了在 Series 和 DataFrame 算术运算中使用 add、sub、mul 和 div。但是，我找不到任何涵盖 ** 的东西，例如 3 ** 2 = 9。除了使用 ** 并希望最好的情况下，我还能做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:25:58.290

要计算时间序列和数据框之间的指数，应该这样做：

```
dataFrame.pow(timeSeries, axis=0) 
```

要计算级数和标量之间的指数，仍然可以这样做：

```
timeSeries ** exponent 
```

# c# - 位于 FlowLayoutPanel 上的自定义 UserControl 上的 MouseDown 事件

> ID：16083509
> 
> 赞同：0
> 
> 时间：2013-04-18T12:53:13.450
> 
> 标签：c#, winforms, events, user-controls, mousedown

我正在尝试在我的应用程序中实现拖放。我需要能够获取我以编程方式添加到 a的`UserControl`（在我的情况下） （它又位于 a 内）。`PipelineTask``FlowLayoutPanel``TabPage`

我将我添加`PipelineTask`到的方法`FlowLayoutPanels`：

```
private void fillPipeline()
    {
        flowLayoutPanel1.Controls.Clear();
        flowLayoutPanelNonIssues.Controls.Clear();
        foreach (FullTask task in pipelineTasks)
        {
            PipelineTask ts = new PipelineTask(task);
            ts.MouseDown += ts_MouseDown;
            if (task.TaskType == "Driver Issue")
            {
                flowLayoutPanel1.Controls.Add(ts);
            }
            else
            {
                flowLayoutPanelNonIssues.Controls.Add(ts);
            }
        }
    } 
```

`MouseDown`方法：

```
private void ts_MouseDown(object sender, MouseEventArgs e)
    {
        PipelineTask ts = sender as PipelineTask;
        ts.DoDragDrop(ts, DragDropEffects.Move);
    } 
```

但是该`MouseDown`事件根本没有触发。我的上面`UserControl`有一个`Panel`充满了整体的东西`UserControl`，我猜这可能是问题所在。有没有人可以帮助我解决这个问题？如果我对上述问题的看法是正确的，那么如何处理这个问题并抓住它`UserControl`也可以。谢谢

**编辑**

我通过删除填充我的 UserControl 的面板暂时解决了这个问题。所以很明显这就是问题所在。但是，无需移除面板即可解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:08:06.323

您可以订阅面板的 MouseDown 并引发您将在 UserControl 上创建的自定义事件，该事件又由 ts_MouseDown 处理...

# android - 如果不是从按钮调用，GridView 不显示

> ID：16083510
> 
> 赞同：0
> 
> 时间：2013-04-18T12:53:15.087
> 
> 标签：android, gridview, universal-image-loader

我是 Java、Android 等的新手。我有一个我无法弄清楚的问题。

我有`GridView`一个`ImageAdapter`基于`UniversalImageLoader`. 当我单击按钮启动方法时，

```
public void buttonsearch(View view)
{
imagesearch();      
} 
```

`GridView`正常显示图像。但是当我直接调用它时。

```
imagesearch("somestring"); 
```

它根本什么都没有显示。通过我的“调试”消息，我可以看到它`ImageAdapter`正在工作。当我单击按钮时，`GridView`开始按内容填充。

```
private void imagesearch(String... params) throws ClientProtocolException,
        JSONException, IOException, InterruptedException,
        ExecutionException {

    EditText wordimage = (EditText) findViewById(R.id.wordimage);
    String previos = null;
      String wordtotr = null;
        String strwordtos = null;

        if ( params.length != 0 )
          {
          previos = params[0];
          }
        if ( previos != null)
          {
            strwordtos = previos;

            wordimage.setText(strwordtos);
          }
            strwordtos = wordimage.getText().toString().replaceAll(" ", "%20");

    parsejsonimages getUrls = new parsejsonimages();

    getUrls.execute(strwordtos);
    urlsp = getUrls.get();
    List<String> urls = new ArrayList<String>();

    urls = new ArrayList<String>(urlsp.values());
    directurls = new ArrayList<String>(urlsp.keySet());
    int j = 0;

    while (urls.size() > j) {
        urls.set(j, "http://someaddress:" + urls.get(j));
        j++;
    }

    GridView gridview = (GridView) findViewById(R.id.gridViewImages);

    Integer gwight = gridview.getWidth();
    Integer ghight = gridview.getHeight();
    ImageAdapter images = new ImageAdapter(this, urls, ghight, gwight);
    gridview.setAdapter(images);
    gridview.setSelected(true);

    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void setalphatoimagebypos(Integer pos, Integer Alpha)
        {

            GridView gridview = (GridView) findViewById(R.id.gridViewImages);
            ImageView imgrecoil = (ImageView) (gridview
                    .getChildAt(pos));
            imgrecoil.setAlpha(Alpha);

        }

        public void onItemClick(AdapterView parent, View v, int position,
                long id) {

            if (strimgtag > -1) {
                setalphatoimagebypos(strimgtag, 255);           
                strimgtag = position;
                setalphatoimagebypos(strimgtag, 128);

        }

    }); 
```

编辑：好的问题已解决，稍后解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:54:31.970

好的，所以我试图在`GridView`实际绘制之前获得尺寸。所以`OnCreate()`当我调用这个方法时，它只会在`GridView`绘制后启动我的代码。

```
public void waiter()
    {
        final GridView gridview1 = (GridView) findViewById(R.id.gridViewImages);

        gridview1.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() 
          {
                @Override
                public void onGlobalLayout() 
                {
                    gridview1.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                    gwight = gridview1.getWidth(); 
                    ghight = gridview1.getHeight();
                        try {
                    imagesearch(wordfromprev);
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (ExecutionException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
          });
    } 
```

# php - Netbeans 奇怪的行为

> ID：16083511
> 
> 赞同：0
> 
> 时间：2013-04-18T12:53:18.283
> 
> 标签：php, ubuntu, netbeans

我使用ubuntu，netbeans 7.3 for php

![在此处输入图像描述](https://i.stack.imgur.com/UCzGs.jpg)

如您所见，涉及所有 3 种方法 (+)，但首先标记为`{...}`。为什么语法高亮不起作用，什么是背景颜色高亮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T13:20:46.430

这不应该发生。如果可以重现，请在[https://netbeans.org/bugzilla/enter_bug.cgi?product=php](https://netbeans.org/bugzilla/enter_bug.cgi?product=php)提交错误并附上示例代码以重现它。

# android - 如何在 Android 中与本地服务中的 Activity 对话？

> ID：16083513
> 
> 赞同：0
> 
> 时间：2013-04-18T12:53:19.843
> 
> 标签：android, android-service, android-broadcast

我是 Android 开发的新手，我对服务到活动的通信感到困惑。我需要监听一个套接字，当收到一个数据包时，更新 Activity 中的某些内容。我打算用服务监听套接字，并想在收到东西时告诉活动。

现在我只希望我的服务每 5 秒向我的 Activity 发送一条消息。当 Activity 收到消息时，它会将其打印到 TextView。

我看过（[绑定服务](http://developer.android.com/guide/components/bound-services.html)），但这似乎只是一种方式：服务中的活动调用方法。我需要广播吗？他们不是为了处理通信吗？

谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:02:05.813

使用回调。

服务接口.aidl：

```
package com.test.service;
import com.test.service.ServiceCallback;
interface ServiceInterface {

    /**
     * Register callback for information from service.
     */
    void registerCallback(ServiceCallback cb);

    /**
     * Remove a previously registered callback interface.
     */
    void unregisterCallback(ServiceCallback cb);
} 
```

服务回调.aidl

```
package com.test.service;

/**
 * Callback interface used by IRemoteService to send
 * synchronous notifications back to its clients.  Note that this is a
 * one-way interface so the server does not block waiting for the client.
 */
oneway interface ServiceCallback {
    /**
     * Your callback function
     */
    void onCallback(int data);
} 
```

找到了一个指向[Malachi 的 Android](http://malsandroid.blogspot.se/2012/02/aidl-step-7-using-callbacks.html)网站的链接，其中包含更多代码。

# javascript - 如何给出相对于特定 div 的位置

> ID：16083516
> 
> 赞同：0
> 
> 时间：2013-04-18T12:53:31.387
> 
> 标签：javascript, jquery, css

我`.ra`想去。`position:relative`_`.da`

当我给`position:relative`div`.ra`时，它会根据父级移动`div`。

可以是什么`CSS`请帮帮我。

```
<div>
<div class="ra">hi</div>
<div></div>
</div>

<div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>&nbsp;</td>
  </tr>
</table>
</div>
<div>
<div style="float:left;"></div>
<div class="da">....</div>
</div> 
```

```
.ra
{
    position:relative;
    left:200px;
    top:450px;
    min-width:101px;
    min-height:256px;
}
.da
{
    float: left;
    width: 287px;   
    padding: 0 5px 0 15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:58:41.190

唯一`.ra`可能相对的`.da`方法是如果`.ra`被定位*在内部*-`.da`情况并非如此。您需要相应地修改您的 HTML。

**HTML：**

```
<div class="da">
    <div class="ra">
        This is relative to parent
    </div>
</div> 
```

**CSS：**

```
.da{
    position: relative;
} 
```

# c# - File.AppendAllText 是否管理冲突（即多用户并发）？

> ID：16083520
> 
> 赞同：17
> 
> 时间：2013-04-18T12:53:36.940
> 
> 标签：c#, .net, io

# 问题

是否`File.AppendAllText`管理来自多个作者的冲突？

# 研究

我注意到[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms143356.aspx)并没有真正提供任何一种方式，所以我决定反映代码并看看它做了什么。下面是调用的方法`File.AppendAllText`：

```
private static void InternalAppendAllText(string path, string contents, Encoding encoding)
{
    using (StreamWriter streamWriter = new StreamWriter(path, true, encoding))
    {
        streamWriter.Write(contents);
    }
} 
```

正如你所看到的，它只是利用了一个`StreamWriter`. 所以，如果我们更深入地研究它，特别是它使用的构造函数，我们会发现它最终调用了这个构造函数：

```
internal StreamWriter(string path, bool append, Encoding encoding, int bufferSize, bool checkHost) : base(null)
{
    if (path == null)
    {
        throw new ArgumentNullException("path");
    }
    if (encoding == null)
    {
        throw new ArgumentNullException("encoding");
    }
    if (path.Length == 0)
    {
        throw new ArgumentException(Environment.GetResourceString("Argument_EmptyPath"));
    }
    if (bufferSize <= 0)
    {
        throw new ArgumentOutOfRangeException("bufferSize", Environment.GetResourceString("ArgumentOutOfRange_NeedPosNum"));
    }
    Stream streamArg = StreamWriter.CreateFile(path, append, checkHost);
    this.Init(streamArg, encoding, bufferSize, false);
} 
```

具有以下值：

```
path:        the path to the file
append:      the text to append
encoding:    UTF8NoBOM
bufferSize:  1024
checkHost:   true 
```

并且进一步我们发现，`base(null)`实现除了设置`InternalFormatProvider`为`null`. 所以，如果我们继续挖掘，我们会发现`CreateFile`：

```
private static Stream CreateFile(string path, bool append, bool checkHost)
{
    FileMode mode = append ? FileMode.Append : FileMode.Create;
    return new FileStream(path, mode, FileAccess.Write, FileShare.Read, 4096, FileOptions.SequentialScan, Path.GetFileName(path), false, false, checkHost);
} 
```

`FileStream`使用这些参数值创建一个：

```
path:         the path to the file
mode:         FileMode.Append
access:       FileAccess.Write
share:        FileShare.Read
bufferSize:   4096
options:      FileOptions.SequentialScan
msgPath:      just the file name of the path provided
bFromProxy:   false
useLongPath:  false
checkHost:    true 
```

所以现在我们终于到达了某个地方，因为我们即将利用 Windows API，这就是问题真正开始的地方，因为它`FileStream::ctor`调用了一个名为`Init`. 这是一个相当长的方法，但我真的对一行很感兴趣：

```
this._handle = Win32Native.SafeCreateFile(text3,
    dwDesiredAccess,
    share,
    secAttrs,
    mode,
    num,
    IntPtr.Zero); 
```

当然调用[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)，其中参数值是：

```
text3:            the full path to the file
dwDesiredAccess:  1073741824
share:            1 (FILE_SHARE_READ)
secAttrs:         null
mode:             4 (OPEN_ALWAYS)
num:              134217728 | 1048576 (FILE_FLAG_SEQUENTIAL_SCAN | FILE_FLAG_POSIX_SEMANTICS) 
```

那么，如果我有两个线程试图同时访问同一路径的该调用，Windows 会怎么做？它会打开文件并缓冲写入，以便允许两个消费者写入文件吗？还是我需要利用锁定对象并`lock`围绕对 的调用`AppendAllText`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T12:58:48.440

只有一个会赢得写入，它将是第一个，任何后续尝试都将失败，直到释放写入锁（即刷新缓冲区并关闭文件） - 但是，它可以同时打开以供读取（取决于权限） .

> [读取](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)- 允许随后打开文件进行读取。如果未指定此标志，则任何打开文件进行读取的请求（由该进程或其他进程）都将失败，直到文件关闭。但是，即使指定了此标志，仍可能需要其他权限才能访问该文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T13:09:53.633

关键是这个方法：

```
private static Stream CreateFile(string path, bool append, bool checkHost)
{
    FileMode mode = append ? FileMode.Append : FileMode.Create;
    return new FileStream(path, mode, FileAccess.Write, FileShare.Read, 4096, FileOptions.SequentialScan, Path.GetFileName(path), false, false, checkHost);
} 
```

它以 开头`FileShare.Read`，意味着其他线程或进程可以打开文件进行读取，但没有其他进程/线程可以打开文件进行写入。

您可能不希望它允许多个并发作者。考虑编写两个非常大的缓冲区。他们很可能最终会被交错。

所以，是的......如果您有多个线程可能附加到该文件，您需要同步访问，可能带有锁。

根据您的应用程序，另一种选择是拥有一个从队列中读取文本并附加到文件的消费者线程。这样，只有一个线程可以访问该文件。其他线程将消息放在写入线程服务的队列中。这很容易用`BlockingCollection`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-06T09:02:49.297

[我知道这个话题很老，但我在阅读https://stackoverflow.com/a/18692934/3789481](https://stackoverflow.com/a/18692934/3789481)后发现

通过实现 EventWaitHandle，我可以轻松地防止与 File.AppendAllText 发生冲突

```
 EventWaitHandle waitHandle = new EventWaitHandle(true, EventResetMode.AutoReset, "SHARED_BY_ALL_PROCESSES");

    Task[] tasks = new Task[ThreadCount];
    for (int counter = 0; counter < ThreadCount; counter++)
    {
        var dividedList = ....
        tasks[counter] = await Task.Factory.StartNew(async () => await RunTask(counter, dividedList, waitHandle));
    } 
```

并将 RunTask 写入文件

```
 private static async Task RunTask(int threadNum, List<string> ids, EventWaitHandle waitHandle)
    {
        Console.WriteLine($"Start thread {threadNum}");

        foreach (var id in ids)
        {
            // start waiting
            waitHandle.WaitOne();
            File.AppendAllText(@".\Result.txt", text + Environment.NewLine);
            waitHandle.Set();
            // until release

            // ninja code
        }
        Console.WriteLine($"End thread {threadNum}");
    } 
```

我用 500 个线程测试过，效果很好！！

# r - 如何创建 path.length.hist 图？

> ID：16083522
> 
> 赞同：1
> 
> 时间：2013-04-18T12:53:41.183
> 
> 标签：r, igraph

使用 igraph/RI 想创建一个显示路径长度直方图的图表。我可以通过 -command 获取直方图值`path.length.hist`，但不知道如何绘制结果。如果有人可以帮助我找到正确的代码，那就太好了。

这些是值：

```
 $res
    [1]   7058  83638 124106  97151  43111   4630    354      7

    $unconnected
    [1] 32447 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:01:59.770

不确定这是否是您想要实现的目标，但您可以尝试类似的方法：

```
tab <- as.table(path.length.hist(g)$res)
names(tab) <- 1:length(tab)
barplot(tab) 
```

![在此处输入图像描述](https://i.stack.imgur.com/M52h7.png)

# spring - 多个 CXF 服务器绑定被第一台服务器覆盖

> ID：16083523
> 
> 赞同：1
> 
> 时间：2013-04-18T12:53:41.293
> 
> 标签：spring, osgi, cxf

我有多个`WAR`s 都使用 a`CXFServlet`来处理所有请求和`Spring`配置。

他们都有一个相似的`web.xml`（是的，它`OSGi`也在）：

```
<web-app id="app1">
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.osgi.web.context.support.OsgiBundleXmlWebApplicationContext</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:META-INF/spring/*.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>app1</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>app1</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

它们都共享一个共同的`Spring`配置（`common-rest.xml`）：

```
<beans>
    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <!-- For brevity I left out jaxRSProviders and jaxRSInInterceptors lists definitions -->    
    <bean id="baseJaxRSServer"
        abstract="true"
        lazy-init="false"
        class="org.apache.cxf.jaxrs.spring.JAXRSServerFactoryBeanDefinitionParser.SpringJAXRSServerFactoryBean"
        init-method="create"
        p:address="${http.server}/"
        p:providers-ref="jaxRSProviders"
        p:inInterceptors-ref="jaxRSInInterceptors" />
</beans> 
```

它们都具有类似的特定`Spring`配置：

```
<beans>
    <import resource="classpath:META-INF/app/common-rest.xml" />
    <!-- For brevity I left out app1ServiceBeans list definition -->    
    <bean id="app1JaxRSServer"
        parent="baseJaxRSServer"
        p:serviceBeans-ref="app1ServiceBeans" />
</beans> 
```

**问题是**，当我现在部署第一个应用程序时，它看起来还不错，但是基本上看不到所有其他应用程序绑定。似乎尽管所有应用程序都有单独的`Spring`上下文和单独的`CXF`服务器和单独的`CXF`总线，但它们仍然不知何故会感到困惑，并且每个应用程序都被分配了一个`org.apache.cxf.transport.Destination`- 来自第一个捆绑包的那个。有谁知道这怎么可能？

CXF：2.6.2，弹簧：3.1.4，卡拉夫：2.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:45:08.950

如果您在 Karaf 中运行，我建议您首先安装 cxf 功能，然后通过蓝图注册您的 cxf 端点，就像使用 Apache Camel 一样。因为据我所知，CXF 确实在 cxf 上下文中注册了一个“主”servlet，从那里可以访问所有 web 服务。在这一点上，你不需要任何战争。除了您没有显示有关 Web-ContextPath 的清单条目之外，Web 容器需要在可服务的上下文之间进行区分，因此如果它们都具有相同的上下文，则第一个获胜！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:24:34.243

原来这是一个问题[`DestinationRegistry`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/transport/http/DestinationRegistry.html)。默认情况下，`CXF`注册一个[`DestinationFactory`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/transport/DestinationFactory.html)使用[`DestinationRegistry`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/transport/http/DestinationRegistry.html). 这就是为什么每个都[`Server`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/endpoint/Server.html)被分配给一个[`Destination`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/transport/Destination.html)，因为它们都被映射到`/`每个 servlet，正如`address`字段值所定义的那样。

对我有用的解决方案是为每个`WAR`捆绑包添加一个单独的目标注册表。所以我`common-rest.xml`现在看起来像这样：

```
<beans>
    <import resource="classpath:META-INF/cxf/cxf.xml" />

    <bean id="httpDestinationRegistry"
        class="org.apache.cxf.transport.http.DestinationRegistryImpl" />

    <!-- For brevity I left out jaxRSProviders and jaxRSInInterceptors lists definitions -->    
    <bean id="baseJaxRSServer"
        abstract="true"
        lazy-init="false"
        class="org.apache.cxf.jaxrs.spring.JAXRSServerFactoryBeanDefinitionParser.SpringJAXRSServerFactoryBean"
        init-method="create"
        p:address="${http.server}/"
        p:providers-ref="jaxRSProviders"
        p:inInterceptors-ref="jaxRSInInterceptors" />
</beans> 
```

上述配置结合[`SpringBeanLocator`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/bus/spring/SpringBeanLocator.html)使用[`SpringBus`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/bus/spring/SpringBus.html)的[`ConfiguredBeanLocator`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/configuration/ConfiguredBeanLocator.html)结果为每个 WAR 捆绑包生成一个单独的 Spring 托管 HTTP 实例[`DestinationRegistry`](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/transport/http/DestinationRegistry.html)，这反过来又允许在每个捆绑包中正确配置 CXF 服务器并生成正确的应用程序。

# magento - 在magento中自动从paypal捕获付款

> ID：16083528
> 
> 赞同：2
> 
> 时间：2013-04-18T12:53:57.433
> 
> 标签：magento, paypal

我正在使用 magento 1.7.0。我已经在我的 magento 商店中集成了 paypal。我在 paypal 快速结帐方式中选择了 payment_action 授权。现在我想在两天后自动捕获付款。有任何解决方案如何自动捕获付款吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:59:46.563

我不确定是否有设置在 Magento 中说 2 后自动捕获付款，但如果您想使用 PayPal 的[DoCapture API](https://www.x.com/developers/paypal/documentation-tools/api/docapture-api-operation-nvp) ，您可以创建自己的界面来执行此操作。如果您想自动化该过程，您可以为此创建一个脚本并设置一个 cron 作业来检查交易日期并执行捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:45:45.797

看看@ [http://www.sumoheavy.com/capturing-payment-on-shipment-creation-magento/](http://www.sumoheavy.com/capturing-payment-on-shipment-creation-magento/)和[http://inchoo.net/ecommerce/magento/magento-orders/automatically-invoice-ship-complete -订购magento/](http://inchoo.net/ecommerce/magento/magento-orders/automatically-invoice-ship-complete-order-in-magento/)

创建一个 magento cron 作业（[请参阅](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)参考资料）。在您的 cron 作业中搜索所有超过 2 天且少于“X”天的订单，付款方式为 paypal，订单状态为`pending`

```
//$orders = get order filter see http://stackoverflow.com/questions/11042343/magento-get-all-orders-numbers-shipped-as-overnight-between-two-dates

foreach($orders as $order){
    if(check payment type and status){

        if (!$order->canInvoice()) {
                return $this;
        }

        $invoice = Mage::getModel('sales/service_order', $order)->prepareInvoice();
        if (!$invoice->getTotalQty()) {
                return $this;
        }

        $invoice->setRequestedCaptureCase('online');
        $invoice->register();
        $invoice->getOrder()->setIsInProcess(true);
        $transactionSave = Mage::getModel('core/resource_transaction')
        ->addObject($invoice)
        ->addObject($invoice->getOrder());

        $transactionSave->save();
    }
} 
```

# android - 如何在再次启动该子项之前确认子项活动已完成？

> ID：16083533
> 
> 赞同：0
> 
> 时间：2013-04-18T12:54:06.033
> 
> 标签：android, android-activity

我有一个父活动 A，它有两个子活动 B 和 C。当我打开父活动 A 时，它决定必须打开哪个子活动。（函数使用`startActivityForResult`） 例如。A决定打开B。B播放视频并将结果返回到后面。如果A决定再次打开B，那很好。B 不能正常打开（不播放视频）。

**注意：** 以下很好：

A-->B 和 A<--B

然后

A-->C 和 A<--C

然后

A-->B 和 A<--B

但以下不起作用：

A-->B 和 A<--B

然后

A-->B and A<--B //当尝试在 B 上再次移动时。我认为 A 在完成之前再次调用 B

然后

A-->C 和 A<--C

任何想法来解决这个问题？

意思是我怎样才能在再次打电话给那个孩子之前完成那个孩子的活动？

以下是父活动的代码：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Log.d(Constants.TAG,"requestCode: "+requestCode+" : resultCode : "+ resultCode);
        finishActivity(requestCode);
        playProgram(requestCode);
    }

    private void playProgram(int requestCode){
        if(requestCode == QUESTION_WRAPPER){
            currentChap = currentChap + 1;
            Intent intent = new Intent(MovieWrapperActivity.this, VideoWrapperActivity.class);
            intent.putExtra("chaptertoplay", currentChap);
            intent.putExtra("videofile",  Constants.mCourse.getmChapters().get(currentChap).getVideoURL());
            startActivityForResult(intent, MOVIE_WRAPPER);
        }else if(requestCode == MOVIE_WRAPPER) {
            if(Constants.mCourse.getmChapters().get(currentChap).isQuiz()){
                Intent in2 = new Intent(MovieWrapperActivity.this, QuestionWrapper.class);
                in2.putExtra("chaptertoplay", currentChap);
                startActivityForResult(in2, QUESTION_WRAPPER);

            }else{
                currentChap = currentChap + 1;
                Intent intent = new Intent(MovieWrapperActivity.this, VideoWrapperActivity.class);
                intent.putExtra("chaptertoplay", currentChap);
                intent.putExtra("videofile",  Constants.mCourse.getmChapters().get(currentChap).getVideoURL());
                startActivityForResult(intent, MOVIE_WRAPPER);
            }
        }
    } 
```

B代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (!io.vov.vitamio.LibsChecker.checkVitamioLibs(this))
        return;
    setContentView(R.layout.videoview);
    init();
    mVideoView = (VideoView) findViewById(R.id.surface_view);
    mVideoView.setVideoPath(videoPath);
    mVideoView.setVideoQuality(MediaPlayer.VIDEOQUALITY_HIGH);
    mController = new MediaController(this);
    mVideoView.setMediaController(mController);
    mVideoView.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer arg0) {
            Log.d(Constants.TAG,"Completed");
            Intent returnIntent = new Intent();
            setResult(RESULT_OK, returnIntent);
            mVideoView = null;
            mController = null;
            finish();
        }
    });
} 
```

我认为 B 中的媒体元素需要时间来破坏甚至不被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:57:40.070

```
Intent output = new Intent();
    output.putExtra("DATA", data);
    setResult(Activity.RESULT_OK  , output);
    finish(); 
```

`finish()`设置结果后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:59:09.790

您必须在子活动中的 setresult() 之后调用 finish()。

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Log.d(Constants.TAG,"requestCode: "+requestCode+" : resultCode : "+ resultCode);
        finishActivity(requestCode);//dont finish child activity here.
        playProgram(requestCode);
    } 
```

# lucene - 是否有一种特殊的方法可以在 Lucene 中对数字字段进行分面？

> ID：16083536
> 
> 赞同：2
> 
> 时间：2013-04-18T12:54:13.770
> 
> 标签：lucene, lucene.net, faceted-search

在使用 Lucene.Net 的应用程序中，我有一个存储整数的数字字段。这些值的基数相当低（通常少于 20-30 个不同的值）。

我想对此字段进行分面搜索（使用`SimpleFacetedSearch`来自 contrib 包），即我想要每个不同值的命中数。

目前，我将值的副本按原样存储在附加文本字段中，并在此文本字段上运行分面搜索。这将返回正确的结果。

但是，这是要走的路还是有一种特殊的方法可以对 NumericFields 进行分面搜索？

注意：由于基数较低，我可能会考虑将精度步长设置为 int.MaxValue，以便每个值只有一个术语。我想在这种情况下，我可以简单地对数字字段本身进行分面搜索并使用`NumericUtils.PrefixCodedToInt()`. 这是正确的还是会有并发症？到目前为止，我的测试表明它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T09:14:43.383

将构面的值存储在单独的字段中听起来合乎逻辑。数字字段可以被认为是修改后的值，就像字符串字段可能应用了词干和同义词扩展一样。在这些情况下，一个用于搜索的字段和一个用于构面的字段是可以的。

您可以在损坏的字段（由 NumericField 生成）上计算方面，并`PrefixCodedToInt`按照您的描述进行调用，结果相同。这将减少索引大小（无需存储数值，或单独索引）。它还可以减少 io 负载，因为您可以从术语索引中读取值，而不是在硬盘驱动器上查找文档，但这在很大程度上取决于索引大小、文件系统缓存等。

# jboss - 是否可以在不重新启动 WebLogic 或 GlassFish 的情况下更改 log4j 跟踪级别？

> ID：16083537
> 
> 赞同：1
> 
> 时间：2013-04-18T12:54:19.213
> 
> 标签：jboss, glassfish, log4j, weblogic

是否可以在不重新启动 WebLogic 或 GlassFish 的情况下更改 log4j 跟踪级别？
我们使用 -Dlog4j.configuration JVM 参数来设置 log4j 配置文件。
现在，如果 log4j.xml 被修改，WebLogic 或 GlassFish 都不会重新加载更改。

在 JBoss（至少在 JBoss 5.1 中）有服务 org.jboss.logging.Log4jService 允许设置检查 log4j 配置文件更改的频率（以秒为单位）。
WebLogic 和 GlassFish 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:04:19.600

是的，这是可能的。根据您对应用程序的操作，有不止一种方法。

您可以通过转到托管服务器的日志记录选项卡在管理控制台中更改它。这是针对服务器输出本身，而不是针对在服务器上运行的应用程序。

在此处使用 WLST 检查（这将涉及大量工作）： [http ://www.theserverlabs.com/blog/2010/04/22/dynamically-sharing-log-level-with-weblogic-log4j-jmx-and -wlst/](http://www.theserverlabs.com/blog/2010/04/22/dynamically-changing-log-level-with-weblogic-log4j-jmx-and-wlst/)

通过应用程序中的代码设置它： [动态更改 log4j 日志级别](https://stackoverflow.com/questions/4598702/dynamically-changing-log4j-log-level)

# combobox - QtGui.QComboBox 和 setStyleSheet- 我需要只有选定的值才会产生不同的 BG 颜色

> ID：16083539
> 
> 赞同：-1
> 
> 时间：2013-04-18T12:54:23.763
> 
> 标签：combobox, pyqt4, stylesheet

我正在使用 setStyleSheetin 为我的 QtGui.QComboBox 设置颜色。我需要一个特定的选定值将导致选定字段的区域具有红色 BG 颜色，但是，列表本身应保持白色 bg 颜色。我能够创建 2 个不同的案例，但都有问题，请指教。

第一种情况+问题：我设法将选定的值 bg 颜色更改为红色，但是，当用户在 UI 上的其他位置单击时，bg 颜色再次变为白色：

```
self.ComboBox.setStyleSheet("selection-background-color:red;")
#At the moment user clicks somewhere else, the bg is white again. and this is     problematic for me. 
```

第二种情况+问题：

```
self.ComboBox.setStyleSheet("background-color:red;")') 
#This option causes the whole list to become red, but it remains red as needed and does not turn to bg=white if I click in someplace else in the UI. 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:58:50.080

我认为你应该尝试 QSS 对象角色——即

QSS

`ComboBox::item:selected { background-color: red; }`

# documentation - 生成文档 doxygen 样式而不注释代码

> ID：16083542
> 
> 赞同：0
> 
> 时间：2013-04-18T12:54:27.790
> 
> 标签：documentation, doxygen

我正在寻找一种创建与 Doxygen 风格相似的文档页面的方法，但我不想将文档作为注释放入我的代码中。最佳方法是将其键入普通文本文件或其他内容，然后从中生成页面。

据我了解，Doxygen 不支持这一点，所以我想知道是否有任何替代方案可以满足我的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:00:30.603

`*.dox`在您放置常规文本文件的文件夹的 INPUT 参考部分中的文件中创建。例如：

```
INPUT = ./supplement 
```

之后，您可以创建常规文本文件，只需放在`/*!`开头和`*/`结尾即可。并用`\page`或其他标签对其进行分类。例如：

我的.txt

```
/*!
  \page threading Describe Threading tech
  In details this describe cases:
  \li case 1
  \li case 2
*/ 
```

您可以在单个文件中放置多个`\page`声明（请参阅[http://www.doxygen.nl/manual/commands.html#cmdpage](http://www.doxygen.nl/manual/commands.html#cmdpage)）

# java - 使用 Regex 查找 xml 元素并替换其值

> ID：16083554
> 
> 赞同：-6
> 
> 时间：2013-04-18T12:55:31.303
> 
> 标签：java, xml, regex

我知道我不应该使用 Regex 来更新 xml。但根据要求，我必须找到基于正则表达式的元素并替换它的值。
我正在调度程序 servlet 中记录所有 HTTP 请求并将其保存到文件中。在重播时，我可能需要更新其中一个 xml。
我不想将该特定的 xml 转换为`Document`、解析和更新它，然后将其转换回 String。这就是为什么我想以字符串格式编辑 xml。

元素名称及其新值将是我的输入。所以

```
public void findAndReplace(String xml, String elementName, String newValue)
{
 String regex = '/<'+elementName+'></'+elementName+'>';
 String updatedElement = '/<'+elementName+'>'+newValue+'</'+elementName+'>'

 String updatedXML = xml.replaceFirst(regex, updatedElement);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:51:30.733

您不必`Document`为了更改 XML 文档而创建一个。您可以很容易地设置流式 XML 解析器以有效地执行此操作。看看`javax.xml.stream`包装。

# sql-server - Visual Studio 架构比较无法正确处理变量

> ID：16083555
> 
> 赞同：2
> 
> 时间：2013-04-18T12:55:40.603
> 
> 标签：sql-server, visual-studio, visual-studio-2012, sql-server-data-tools

如果我有一个变量，比如 $(someDb)

从 [$(someDb)].[dbo].[SomeTable] 中选择 *

当我进行模式比较并且代码中存在另一个差异时，即使这些变量也会被标记为差异。

如果文件没有其他差异，幸运的是文件被正确处理。

有没有办法让架构比较在所有情况下都能正常工作？

# android - Sys.path.append("") 在 Debian 上不起作用.. :/ "no module named guess_language"

> ID：16083560
> 
> 赞同：0
> 
> 时间：2013-04-18T12:55:48.540
> 
> 标签：android, python, sqlite, debian, raspberry-pi

刚刚通过 ftp 将我的 python 项目传输到我的 linux 服务器，该项目无法导入文件一些什么.. :/

```
sys.path.append("Functions\guess_language")
import check_language
sys.path.append("Functions\SL4A")
import android 
```

它不允许我导入任何模块，但在 Windows 中，它确实有效.. 为什么？我正在使用 Python 2.7 顺便说一句。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:18:06.850

反斜杠是字符串中的转义字符。

所以在你的例子中你有几个选择来处理这个问题......

1.  使用原始字符串：

    sys.path.append(r"Functions\guess_language")

2.  用另一个反斜杠转义反斜杠：

    sys.path.append("函数\\guess_language")

3.  使用正斜杠：

    sys.path.append("函数/guess_language")

4.  使用 os.path.join：

    sys.path.append(os.path.join("Functions", "guess_language"))

5.  使用 os.sep 格式化字符串：

    sys.path.append('Functions%sguess_language' % os.sep)

# ios - iOS - 以编程方式检查应用程序是否真实

> ID：16083566
> 
> 赞同：4
> 
> 时间：2013-04-18T12:55:58.410
> 
> 标签：ios, codesign, integrity

如何检查我的 iOS 应用程序是否使用我的证书进行了代码签名？或任何其他方式我可以确定该应用程序是原创的？我已经看到它在 Mac 的情况下是可能的，[here](https://stackoverflow.com/questions/1815506/how-to-obtain-codesigned-application-certificate-info)。如果您遇到适用于 iOS 的解决方案，请分享信息。

# java - Java 中的 SwingWorker 线程

> ID：16083567
> 
> 赞同：0
> 
> 时间：2013-04-18T12:56:05.600
> 
> 标签：java, multithreading, swing

[我现在正在使用 swing 并且遇到了一些问题，我意识到不可能从http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)多次执行 SwingWorker 线程[uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

我的问题是可以创建同一个 SwingWorker 线程的新实例吗？在这里的代码中，我将工作线程称为“worker”

```
SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>(){
  public void doInBackGround(){

  }
}; 
```

是否可以创建该线程的多个实例，以便我可以多次调用它？我试过类似的东西

```
(new SwingWorker<Void, Void> worker).execute(); 
```

但这似乎不起作用。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:01:57.953

每次需要时创建一个新的 SwingWorker 有什么问题？

如果您需要在需要多次运行的实例中存储某些状态，则可以使用 Runnable 或 Callable 接口并将其交给 SwingWorker 执行。您必须每次都创建 SwingWorker，但 Runnable 或 Callable 实例可以相同。

在下面的示例中，worker 实例每次都会创建，但 Runnable 实例始终相同。

```
class Foo {
  private final Runnable executeInBackground;
  private final Runnable executeInDone;

  public Foo(Runnable done, Runnable background) {
     executeInDone = done;
     executeInBackground = background;
  }

  public void execute() {
     SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {
        public void doInBackground() {
           executeInBackground.run();
        }

        public void done() {
           executeInDone.run();
        }
     };
     worker.execute();
  }
} 
```

# hadoop - 针对不同映射器的 HBase MapReduce 拆分扫描

> ID：16083570
> 
> 赞同：1
> 
> 时间：2013-04-18T12:56:15.523
> 
> 标签：hadoop, mapreduce, hbase, mapper

我正在努力以适当的方式为几个地图任务分配我的 HBase 行。我的目标是通过行键拆分我的扫描并将一组行分配给一个映射作业。

就目前而言，我只能定义一个扫描，我的映射器一次总是一行。但这不是我想要的 - 我需要按集设置地图输入。

那么是否有可能拆分我的 HBase 表。扫描成n组行，然后输入n个映射器？

我不是在寻找一种解决方案来启动 MapReduce 作业写入 n 个文件和另一个 MapReduce 作业以再次读取它们作为获取这些集合的文本输入。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:27:29.973

映射器将始终一次获取一行 - 如果您想与映射端的多行相关联，这就是 map-reduce 的工作方式，您可以自己执行此操作（例如使用一些静态变量等）或将逻辑编写为[组合器](http://www.philippeadjiman.com/blog/2010/01/14/hadoop-tutorial-series-issue-4-to-use-or-not-to-use-a-combiner/)，它是映射端的“减少”步骤。

请注意，您仍然需要一个 reducer 来处理相关键由不同映射器处理的边缘情况 - 因为在 hbase 中键是在磁盘上排序的，您只能在拆分的结束/开始时得到它。您可以通过预先拆分来降低发生这种情况的风险

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:06:38.247

在查看实现时，我发现使用一次扫描调用映射步骤会导致使用一个映射器。这就是输入集根本不拆分的原因。

使用扫描列表，将其提供给`TableMapReduceUtil.initTableReducerJob`函数，输入集在每次扫描时被拆分。因此可以定义 MapReduce 作业中使用的映射器的数量。

另一种方法是扩展`TableInputFormat`类并重写 split 方法。

正如 Arnon Rotem-Gal-Oz 所说，在映射器的 map 函数中一次只能访问一行。

# ios - 如何在循环迭代中设置间隔

> ID：16083574
> 
> 赞同：1
> 
> 时间：2013-04-18T12:56:24.090
> 
> 标签：ios, objective-c, nstimer

我希望我的循环以一（二/n）秒的间隔执行每次迭代。我该怎么做？我尝试使用`sleep (5)`，但我认为这是错误的决定。

我考虑过计时器^，但我认为这也是错误的想法

```
self.syncTimer = [NSTimer scheduledTimerWithTimeInterval:5.0f
                                                target:self
                                              selector:@selector(serverSync)
                                              userInfo:nil
                                               repeats:YES]; 
```

和选择器

```
-(void) serverSync {
 NSLog (@"Hello");
} 
```

在这种情况下，我将每 5 秒打一次 Hello。

我需要

```
for (int i = 0; i < Array.count; i ++) {
   NSLog (@"Hello - %d", i);
   some code;
} 
```

它必须看起来像

*   00.00 你好 - 0
*   00.05 你好 - 1
*   00.10 你好 - 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:08:40.510

你可以使用这样的东西：

```
int count;

self.syncTimer = [NSTimer scheduledTimerWithTimeInterval:5.0f
                                                target:self
                                              selector:@selector(nextHello)
                                              userInfo:nil
                                               repeats:YES];

-(void)nextHello {
   if (count < 999) {
      NSLog (@"Hello - %d", count);
      some code;
      count++;
   } else {
      [self.syncTimer invalidate]; //Stop Timer
   }
} 
```

或者，如果您不想使用 NSTimer，您可以使用`performSelector` `afterDelay`. 像这样：

```
[self performSelector:@selector(nextHello:) withObject:[NSNumber numberWithInt:0]; //Start the Cycle somewhere

-(void)nextHello:(NSNumber*)count {
   NSLog (@"Hello - %@", count);
   Some Code
   [self performSelector:@selector(nextHello:) withObject:[NSNumber numberWithInt:[count intValue]+1] afterDelay:5.0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:02:41.657

这是您在 C 中延迟时间的方式：

```
#include <STDIO.H>
#include <TIME.H>

int main()
{
    int i;
    for(i = 10; i >= 0; i--)
    {
        printf("%i\n",i); // Write the current 'countdown' number
        sleep(1); // Wait a second
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:31:45.580

你也可以使用这样的东西（但它不像使用 NSTimer 那样清楚）

```
- (void)sayHello {
    __block NSInteger iteration = 0;
    [self execute:^{
        NSLog(@"Hello: %d", iteration);
        iteration++;
    }
        withCount:5
            delay:0.2];
}

- (void)execute:(void(^)(void))executor repeatCount:(NSInteger)count delay:(NSTimeInterval)delayInSeconds{
    if (count == 0) {
        return;
    };

    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^{
        executor();
        [self execute:executor withCount:count - 1 delay:delayInSeconds];
    });
} 
```

# jsf - 使用 jMeter 测试 xPage 应用程序

> ID：16083583
> 
> 赞同：1
> 
> 时间：2013-04-18T12:56:53.190
> 
> 标签：jsf, testing, xpages, jmeter, icefaces

有人知道如何使用 jMeter 对 xPage 应用程序进行压力测试吗？

我试图找到与 JSF 测试和 ICE 面孔（[http://tol8.blogspot.com/2010/12/load-andor-stress-test-of-icefaces-web.html](http://tol8.blogspot.com/2010/12/load-andor-stress-test-of-icefaces-web.html)）相似的地方，但没有成功。

我不知道应该将哪些变量声明为正则表达式提取器。

我用过录音控制器，但这还不够。

这是我帖子中的示例参数：

*   小路：

    ```
    ${path}?$$ajaxid=view%3A_id1%3A_id3%3AcallbackInfo%3AtabPanel1%3A_id47%3ApanelResultUpdate 
    ```

*   参数（名称/值/编码/包含等于）：

    ```
    view:_id1:_id3:callbackInfo:tabPanel1:_id47:txtIDClient     true    true       
    view:_id1:_id3:callbackInfo:tabPanel1:_id47:txtCompanyName      true    true    
    view:_id1:_id3:callbackInfo:tabPanel1:_id47:inputText1      true    true    
    view:_id1:_id3:callbackInfo:tabPanel1:_id47:rbState 1   true    true       
    view:_id1:_id3:callbackInfo:tabPanel1:_id47:inputHiddenKeyPress     true    true
    $$viewid    !dgb336swku!    true    true
    $$xspsubmitid   view:_id1:_id3:callbackInfo:tabPanel1:_id47:eventHandler1   true    true
    $$xspexecid     true    true    $$xspsubmitvalue        true    true
    $$xspsubmitscroll   0|0 true    true    
    view:_id1   view:_id1   true    true 
    ```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:04:33.190

您需要在第一次请求时提取的唯一 post 参数是 $$viewid。这将使您能够在以下请求中访问正确的组件树。

当然，您应该确保 HTTP cookie 管理器在正确的位置（否则您将无法保持 servlet 和 notes 会话）

它对我有用，所以考虑到这两件事你应该能够运行压力测试。

# function - 检测并匹配源代码中的函数开头和结尾括号

> ID：16083587
> 
> 赞同：1
> 
> 时间：2013-04-18T12:57:14.743
> 
> 标签：function, pattern-matching, string-matching, braces

我想知道是否已经有很好的算法来检测函数声明、函数内容、它的左大括号和右大括号。对于错误的开发、调试和测试，在某些需要在大多数函数中添加大量代码的情况下可能会很好。

示例源代码：

```
Test.onLoad=function(event){
    Test.initialize();
}; 
```

结果：

*   函数名称：`Test.onLoad`
*   内容：`Test.initialize();`
*   在以下行找到左大括号：`1`。
*   在 line 找到右大括号`3`。

例如，我们可以使用上面的信息，轻松地在所有函数的开头和结尾添加一行，以记录一些参数：

```
Test.onLoad=function(event){
    Log("LogInit","function:Test.onLoad","openbraceline:1","content: Test.initialize();");
    Test.initialize();
    Log("LogEnd ","function:Test.onLoad","endbraceline :5","content: Test.initialize();");
}; 
```

我知道这个功能也可以用一个简单的全局日志和一个调用堆栈来实现，但是仍然有很多例子表明这可能非常有用。

制作一个简单的算法来检测和匹配大括号并获取函数信息可能很容易，但是有很多例外情况可能非常复杂，这就是为什么我要问是否已经有众所周知的检测方法。
我不介意示例算法或提示是否使用任何语言，只是想看看最好的方法。

Notepad++ 就是一个很好的例子，因为它有一个插件，可以检测许多不同的源代码语言，并使用每个部分的颜色解析代码并匹配大括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:05:12.680

使用真正的解析器是唯一适用于所有情况的解决方案。

这似乎是关于 Javascript 的，所以我的建议是使用[Rhino](https://developer.mozilla.org/en/docs/Rhino)，它非常好用，但该工具最终将是一个 java 工具，当然。

如果解决方案也需要使用 Javascript，那么您可以查看[关于 javascript 中的解析器的这个问题](https://stackoverflow.com/questions/2554519/javascript-parser-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:01:54.820

如果您希望它完美，您将需要一个真正的解析器用于您的语言。如果不是，您可以设计一个简化的[CFG](http://en.wikipedia.org/wiki/Context-free_grammar)并为此编写一个解析器（我见过很多语法高亮器都是这样工作的。）

# xml - XMLSchema：是否可以计算无效文档的有效性（例如百分比）？

> ID：16083590
> 
> 赞同：5
> 
> 时间：2013-04-18T12:57:22.207
> 
> 标签：xml, xsd, lxml, xmllint

我`lxml`在 Python 中使用 XML 模式定义来验证许多 XML 文档。很多这些文件都没有验证——目前预计它们不会验证——但如果我可以计算它们的有效性（以百分比形式）以用于报告目的，那将很有用。`xmllint`如果能够提供有用的统计数据，我有能力使用或其他命令行工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T01:17:20.617

`lxml`解析器提供了一种方法来获取在尝试解析文档时发生[的错误列表。](http://lxml.de/parsing.html#error-log)将它与解析器的[`recover`关键字参数](http://lxml.de/parsing.html#parser-options)结合起来，你会得到这样的结果：

```
# Warning, untested, may not work
parser = etree.XMLParser(recover=True)
it_would_be_a_tree = etree.parse(your_xml_data, parser)
total_errors = len(parser.error_log) 
```

然后你可以计算出文件所`total_errors`代表的百分比。您可以使用简单的度量，例如每行错误或每个字符的错误，而不会遇到任何麻烦。`it_would_be_a_tree`如果实际上是一个`tree`结构（`total_elements / total_errors`例如 ），则更复杂的测量也是可能的。

# c - 如何解析C中的简单字符串？

> ID：16083593
> 
> 赞同：3
> 
> 时间：2013-04-18T12:57:32.287
> 
> 标签：c, parsing

我有一个格式如下的字符串：

```
start 123 
```

我是这样解析的：

```
if (strstr(line, "start") == line) {
    int number = -1;

    if (sscanf(line + strlen("start "), "%d", &number) == 1) {
        printf("start %d\n", number);
    }
} 
```

C中有没有更好的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T12:59:17.287

是的，你只能使用这个：

```
if (sscanf(line, "start %d", &number ) == 1) { 
```

不需要

```
if (strstr(line, "start") == line) { 
```

再多的

如果要检查更多：检查数字后是否没有多余的字符，则可以使用以下格式：

```
char c;
if (sscanf(line, "start %d%c", &number,  &c) == 1) { 
```

**注意：**上述格式（甚至您的格式）不检查“开始”和数字之间是否只有 1 个空格。所以如果你的字符串是这样的，`"start \t 45"`那么`if`将返回 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:04:13.790

```
if (strstr(line, "start") == line) {
    int number = -1;

    if (sscanf(line, "%*s %d", &number) == 1) {
        printf("start %d\n", number);
    }
} 
```

# php - Wordpress - 按字母顺序排列的分类法 (get_taxonomy)

> ID：16083595
> 
> 赞同：0
> 
> 时间：2013-04-18T12:57:33.253
> 
> 标签：php, wordpress

我有以下代码将我拥有的类别输出到下拉列表中。我试图在下拉列表中按字母顺序排列这些类别，以便我的用户更容易找到它们。

```
<?php // output dropdown for each taxonomy //
  foreach ($taxonomies as $tax) { ?>
    <div id="<?php echo $tax . '_cat'; ?>">
  <label for="wppl-category-id"><?php echo get_taxonomy($tax)->labels->singular_name; ?>: </label>
  <?php custom_taxonomy_dropdown($tax); ?>              
</div>
<?php } /* end foreach */ ?> 
```

我查了一下，似乎 get_taxonomy 没有 orderby 选项（至少我能找到）。对我如何做到这一点有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:02:34.677

也许您可以检查本机功能[get_terms](http://codex.wordpress.org/Function_Reference/get_terms)？

它有一个 orderby 参数，我相信您可以按名称订购它们。

那里有一个例子，所以如果你只是将 count 替换为 name 你会得到这个：

```
$categories = get_terms( 'category', 'orderby=name' ); 
```

# asp.net-mvc - mvc 需要从视图中调用控制器方法

> ID：16083597
> 
> 赞同：0
> 
> 时间：2013-04-18T12:57:35.660
> 
> 标签：asp.net-mvc, forms, methods

除了使用带有输入元素的表单之外，还有其他可能在 c# 中调用控制器方法吗？实际上，我只想通过按下按钮或链接来执行方法。

到目前为止，我正在使用：

```
@using (Html.BeginForm("RefreshQuestion", "Admin"))
{ 
    <input type="submit" value="refresh" class="questionInput" />      
} 
```

提前非常感谢_tek

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:45:21.690

这就是调用控制器方法应该做的。如果您不想使用该代码，可以使用操作链接。

```
 @Html.ActionLink("Refresh", "RefreshQuestion", "Admin") 
```

您是否还需要发布一些内容，或者您​​只是打电话给控制器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:48:44.293

您可以使用一点 javascript 来进行 ajax 调用。您可以将数据从您的 UI 传递到您的操作方法。

下面的示例将`Name`在用户单击按钮时将输入元素的值发布到操作方法。

```
<input type="text" id="Name" />
<input type="submit" id="btnSave" value="refresh" class="questionInput" /> 
```

你的javascript是

```
$(function(){

  $("#btnSave").click(function(e){
     e.preventDefault();

     $.post("@Url.Action("RefreshQuestion","Admin")",
                                    { name : $("#Name").val() } ,function(data){
         // do something with the response
     });
  }); 

}); 
```

您的操作方法应该有一个调用参数`name`或一个视图模型对象，其中包含一个`name`属性（模型绑定会休息）。

```
[HttpPost]
public ActionResult Add(string name)
{
  // save and return something
} 
```

您也可以`serialize`根据需要使用该方法将填写在表格中所有项目的数据发送出去。

# php - 如何逐页显示图像？

> ID：16083598
> 
> 赞同：-1
> 
> 时间：2013-04-18T12:57:36.167
> 
> 标签：php

我目前正在开发一个在线购物网站。不幸的是，我被从数据库中显示图像的问题所阻止。

我想要实现的结果是从数据库中检索图像并将它们显示在不同的页面中。例如，数据库中共有 12 张图片，我想在一页显示 6 张图片。并且，当用户单击下一页（第 2 页）时，将显示其余 6 张图像。我已经坚持了很多天。谁能帮我解决这个问题。最好的祝愿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:02:36.313

尝试这个

```
<?php
if(isset($_Get['page'])) 
{$page = $_Get['page'];}
else 
{$page = 1; }
$firstimage = $page * 6 - 6;
$lastimage = $page * 6;
$sql = 'SELECT * from image LIMIT $firstimage, $lastimage';
?> 
```

并在底部添加一个链接

```
<a href="yourpage.php?page='<?php echo $page + 1; ?> '">Next page</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:05:47.717

您需要的是SQL 代码中的**限制**和**偏移量。**

在 php 中使用：

```
$limit = 15;
$offset = ($page - 1) * $limit;

The limit is the amount of values you want to be shown.
The $page variable you need to get because of the page you are on. You will need
to write some code to keep your page value in order to know what page you are on.
If you are on page 3 you want the 6 images for that page.

If you have that you pass your $limit and offset to your sql function. 
```

在 SQL 中：

```
 $sql = 'select * from images ORDER BY x LIMIT ' . $limit . ' OFFSET ' . $offset; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:59:58.680

您应该为打开的页面计算图像集中的偏移量，并使用如下查询数据库：（假设您的图像元数据存储在`Image`数据库表中）

`SELECT * from Image LIMIT $offset, $limit`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:03:42.987

这并不复杂，您可以使用分页。遵循这个逻辑：

给每个页面一个数字并从查询字符串中获取该数字，然后在您的 sql 查询中使用限制，如下所示

```
$page = $_GET['page'];
if ($_GET['page'] == "1") {
{
     $startFrom = 0;
     $totalCount = 6;
} else { 
     $startFrom = 6*$_GET['page'];
     $totalCount = 6;
} 
```

在您的限制中使用这两个变量作为

```
LIMIT $startFrom, $totalCount; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:03:51.323

您要执行的操作称为[pagination](http://www.phpeasystep.com/phptu/29.html)。幸运的是，这并不太难，而且网上有很多教程可以用来构建这样的脚本。

分页的一般思想是，您将从数据库中分组选择数据，从特定的*偏移量*开始，并且只进行一定的长度或*限制*。

`Select * from yourTable LIMIT $yourOffset, $yourLimit`

从这里开始，您最喜欢使用`next`或`previous`按钮，它们将简单地告诉脚本当前`offset`和`limit`将是什么。

一个例子可能是：

```
<form action="" method="POST">
   <input type="hidden" name="offset" value="10"/>
   <input type="hidden" name="limit" value="20"/> // The amount to be returned per page
   <input type="submit" value="next page" name="submit" />
</form> 
```

然后，`PHP`您只需检索`limit`and`offset`值：

```
$limit = '';
$offset = '';

if (isset($_POST['submit'])) {
{
    $limit = $_POST['limit'];
    $offset = $_POST['offset'];

    // Run query here
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T13:04:10.590

```
$page = $_GET['page_no'];
$count = $page*6;
$sql = "select images from table limit $count-6,$count"; 
```

# c# - 如何编码图像以在浏览器中显示

> ID：16083599
> 
> 赞同：1
> 
> 时间：2013-04-18T12:57:36.270
> 
> 标签：c#, ajax, image-processing, asp.net-mvc-4

我在服务器端的一个文件夹中保存了很多图像，数据库中有每个图像的 url，客户端由于许可无法直接打开图像。我的问题是如何编码图像以从服务器在浏览器中显示它？

这是我在搜索图像的操作结果中的代码：

```
public FileResult SearchImage()
{

    var path = @"\\jesus-pc\Frontera\IMAGENES\SINGNOS DISTINTIVOS\0\80HP23891268272.TIF";
    var img1 = System.IO.File.ReadAllBytes(path);

    return File(im1, "image/jpg");
} 
```

图像存在，但这是显示的内容：

![图片未加载](https://i.stack.imgur.com/hahbP.png)

我尝试使用 **Convert.ToBase64String(img1)**但出现此错误：

```
the server responded with a status of 414 (Request-Uri Too Long) 
```

我究竟做错了什么？

更新：

我没有写出我正在做的事情的全部代码，这很糟糕。

最后没有提到的部分是我使用 ajax 调用图像。

当用户发送信息请求时，会有一个链接打开一个模态框。在该模态框内是必须显示图像的位置，但图像将使用 ajax 加载，因为不应重新加载页面。因此将使用 ajax 请求图像。这是我的代码：

```
$(".doc").dblclick(function () {

$.ajax({
    url: "mainpage/SearchImage",
    data: "",
    type: "post",
    success: function (data) {
        ModalWindow.open();
        document.getElementById("img_1").src = data;
    }

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:01:24.170

考虑使用`FileStreamResult`而不是`FileResult`. 这应该可以解决您的问题。代码应该类似于：

```
public FileStreamResult SearchImage()
{

    var path = 
       @"\\jesus-pc\Frontera\IMAGENES\SINGNOS DISTINTIVOS\0\80HP23891268272.TIF";
    var fileStream = new FileStream(path, FileMode.Open, FileAccess.Read);
    return new FileStreamResult(fileStream, "image/jpeg");
} 
```

引起我注意的另一件事是指定的 mime 类型。在文件名中是，`tif`但在代码中是`jpeg`.

**更新**

你为什么要为此使用ajax？你可以这样做：

```
$('#img_1').attr('src', 'mainpage/SearchImage'); 
```

# c# - 如何将内部数据库中的数据绑定到 devExpress gridcontrol

> ID：16083601
> 
> 赞同：1
> 
> 时间：2013-04-18T12:57:41.627
> 
> 标签：c#, data-binding, binding, devexpress, silverlight-5.0

我是一个新手，在 devExpress silverlight 应用程序上编程。我通过添加创建了一个数据库`new item`，并添加`Database1.mdf`到了解决方案中`trial.web`。当我创建我的项目时，它有两个解决方案：（`DXSilverlightApplication1`包含`MainPage.xaml/.cs`）和`Trial.Web`（包含`DXSilverlightApplication1TestPage.aspx/.html`）。

我真的不知道如何将数据从 MDF 文件绑定到 devExpress 网格控件。MY 数据库有 2 列：仅名称和 ID。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:01:28.750

创建一个执行基本 SELECT 的表适配器：

```
SELECT * FROM YourDatabaseName 
```

完成后，在 GridControl 的右上角选择数据源（在我们的示例中为基本`SELECT`语句）。希望这可以帮助。

# java - 异常后继续执行

> ID：16083604
> 
> 赞同：1
> 
> 时间：2013-04-18T12:57:44.803
> 
> 标签：java, exception, loops

我有这两个类：

```
public class TryException {
    int a=0;

    TryException(int c) {
        a = c;
    }

    public boolean operation() //just example
    {
        if(a!=10)
        {
            System.out.println(a);
            return true;
        }else{
            throw new RuntimeException("display something");
        }

    }

} 
```

和主要的：

```
public class Test {
    static public void main(String args[])
    {
        int val =20;
        TryException ex = new TryException(val);

        try{
            while(ex.operation()){
                ex.a = --val;
            }

        }catch(RuntimeException e)
        {
            System.out.println("try exception");
        }
    }
} 
```

当我运行这个程序时，它会在检测到异常时停止执行。异常后如何继续执行相同的操作`while`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:02:28.020

它可能会有所帮助...

```
public class Test {
    static public void main(String args[])
    {
        int val =20;
        TryException ex = new TryException(val);

        boolean status = true;
        while(status){
            try{
                 status = ex.operation();
            } catch(RuntimeException e) {
                status = true; //Or whatever...
            }
            ex.a = --val;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:02:32.223

将 try-catch 移动到循环内。

```
 boolean run = true;
 while(run){
    ex.a = --val;
    try{
       run = ex.operation();
    }catch(RuntimeException e){
        System.out.println("try exception");
    }    
 } 
```

您需要决定何时设置`run`为`false`...

# variables - variables/arrays from tcl procedure

> ID：16083607
> 
> 赞同：1
> 
> 时间：2013-04-18T12:57:48.907
> 
> 标签：variables, tcl, procedures

How could i pass some variables/ arrays outside of procedure?

Lets say I've my procedure 'myproc' with inputparameters {a b c d e}, e.g.

```
myproc {a b c d e} { 
    ... do something
    (calculate arrays, lists and new variables)
} 
```

Inside this procedure I want to calculate an array phiN(1),phiN(2),...phiN(18) out of the variables a-e which itself is a list, e.g.

```
set phiN(1) [list 1 2 3 4 5 6 7 8 9]; 
```

(lets say the values 1-9 had been calculated out of the input variables a-e). And I want to calculate some other parameter alpha and beta

```
set alpha [expr a+b];
set beta  [expr c+d]; 
```

Anyway no I want to pass these new calculated variables outside of my procedure. Compare to matlab I simply would write sg like to get these variables outside of the 'function'.

```
[phiN,alpha,beta] = myproc{a b c d e} 
```

Has anybody an idea how I can deal in tcl?? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:39:26.213

有几种选择：

1.  **返回一个列表并[`lassign`](http://www.tcl.tk/man/tcl8.6/TclCmd/lassign.htm)在外部**
    使用 示例：

    ```
    proc myproc {a b c d e} {
        set alpha [expr {$a+$b}]
        set beta [expr {$c+$d}]
        return [list $alpha $beta]
    }

    lassign [myproc 1 2 3 4 5] alpha beta 
    ```

    如果您返回值而不是数组，这很好。

2.  **使用[`upvar`](http://www.tcl.tk/man/tcl8.6/TclCmd/upvar.htm)并提供数组/变量的名称作为参数**
    示例：

    ```
    proc myproc {phiNVar a b c d e} {
        upvar 1 $phiNVar phiN
        # Now use phiN as local variable
        set phiN(1) [list 1 2 3 4 5 6 7 8 9]
    }

    # Usage
    myproc foo 1 2 3 4 5
    foreach i $foo(1) {
         puts $i
    } 
    ```

3.  **使用两者的组合**
    示例：

    ```
    proc myproc {phiNVar a b c d e} {
        uplevel 1 $phiNVar phiN
        set alpha [expr {$a+$b}]
        set beta [expr {$c+$d}]
        set phiN(1) [list 1 2 3 4 5 6 7 8 9]
        return [list $alpha $beta]
    }

    lassign [myproc bar 1 2 3 4 5] alpha beta
    foreach i $bar(1) {
         puts $i
    } 
    ```

**编辑**：正如多纳尔所建议的，也可以返回一个字典：

dict 是一个 Tcl 列表，其中奇数元素是键，偶数元素是值。您可以使用 将数组转换为 dict，[`array get`](http://www.tcl.tk/man/tcl8.6/TclCmd/array.htm#M8)然后使用 将 dict 转换回数组[`array set`](http://www.tcl.tk/man/tcl8.6/TclCmd/array.htm#M11)。您也可以使用[dict](http://www.tcl.tk/man/tcl8.6/TclCmd/dict.htm)本身。
例子

```
 proc myproc {a b c d e} {
        set alpha [expr {$a+$b}]
        set beta [expr {$c+$d}]
        set phiN(1) [list 1 2 3 4 5 6 7 8 9]
        return [list [array get phiN] $alpha $beta]
    }

    lassign [myproc 1 2 3 4 5] phiNDict alpha beta
    array set bar $phiNDict
    foreach i $bar(1) {
         puts $i
    }
    # Use the [dict] command to manipulate the dict directly
    puts [dict get $phiNDict 1] 
```

有关更多想法（这是关于数组，但也适用于值），请参阅[此 wiki 条目](http://wiki.tcl.tk/3262)。

# oracle - 如何将这些字符转换为可读形式

> ID：16083608
> 
> 赞同：1
> 
> 时间：2013-04-18T12:57:58.640
> 
> 标签：oracle

我的 oracle 数据库表中有一些列，其中有一些列`��`。

如何将其解码为原始可读形式。

我知道它与编码有关，但我需要为此找到解决方案。

在我的 php 应用程序中，我将这些字符作为普通的 '??'。

我正在使用 sql developer 查看记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:00:41.773

您必须将它们从 UTF8 转换为您当前的编码。或相反亦然。

# c# - What does it mean for a method to be asynchronous?

> ID：16083613
> 
> 赞同：17
> 
> 时间：2013-04-18T12:58:02.500
> 
> 标签：c#, asynchronous

What is an asynchronous method. I think I know, but I keep confusing it with parallelism. I'm not sure what the difference between an asynchronous method is and what parallelism is.

Also what is difference between using threading classes and asynchronous classes?

**EDIT**

Some code demonstrating the difference between async, threading and parallelism would be useful.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-18T13:08:49.690

### 什么是异步方法？

当我们谈论潜在的冗长操作时，异步方法就会进入讨论。通常，我们需要完成这样的操作才能有意义地继续程序执行，但我们不想“暂停”直到操作完成（因为暂停可能意味着 UI 停止响应，这显然是不可取的）。

异步方法是我们调用以*启动*冗长操作的方法。该方法应该执行启动操作所需的操作并“非常快速地”返回，以便没有处理延迟。

异步方法通常会返回一个令牌，调用者可以使用该令牌来查询操作是否已完成以及它的结果是什么。在某些情况下，他们将回调（委托）作为参数；当操作完成时，回调被调用以通知调用者他们的结果已经准备好并将它们传回。[这](http://msdn.microsoft.com/en-us/library/system.asynccallback.aspx)是一个常用的回调签名，当然通常回调可以看起来像任何东西。

### 那么究竟是谁在运行这个冗长的操作呢？

我在上面说过异步方法启动一个长度操作，但在这种情况下，“开始”是什么意思？由于该方法立即返回，实际工作在哪里完成？

在一般情况下，执行线程需要监视进程。既然不是调用异步方法的线程暂停了，谁来做？答案是，为此目的从[托管线程池中](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)挑选了一个线程。

### 跟线程有什么关系？

在这种情况下，我对“线程”的解释很简单，就是您明确启动自己的线程并将其委托给*同步*执行相关任务。该线程将阻塞一段时间，并且可能会在操作完成时向您的“主”线程（可以继续执行）发出信号。

这个指定[的工作线程可能会被拉出线程池](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)（注意：不建议在线程池线程中进行非常冗长的处理！）或者它可能是[您](http://msdn.microsoft.com/en-us/library/bkb1k2x8.aspx)为此目的而启动的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-18T13:57:47.983

首先，什么是方法，什么是线程？方法是一个*工作单元，*它可以 (1) 执行有用的副作用，例如写入文件，或 (2) 计算结果，例如制作分形的位图。线程是执行该工作的*工作者。*

一个方法是*同步*的，如果为了使用该方法——为了获得副作用或结果——你的线程必须从你请求完成工作的那一点到它完成的那一点不做*任何其他事情。*

如果您的线程告诉该方法它需要完成工作，并且该方法说“好的，我会这样做，完成后我会打电话给您”，则该方法是*异步的。*

通常，异步方法这样做的方式是*创建另一个工作者*——它从池中获取一个线程。如果该方法需要大量使用 CPU，则尤其如此。但不总是; 不*要求*异步方法启动另一个线程。

那有意义吗？

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-18T13:33:37.320

假设你需要打扫房子，做饭，让孩子们上床睡觉。

同步：

你打扫房子，然后做饭，然后让孩子们上床睡觉。

平行：

你雇了 3 个人打扫房子，做饭，哄孩子睡觉。但是你不信任他们，所以保持监督角色，看着他们并等待他们完成。只有当他们都完成后，他们才能得到报酬。

异步：

你一个孩子打扫房子，另一个孩子做饭。当每个人都完成了他们的家务后，他们就上床睡觉了，而你则在电视前端起一杯酒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:12:10.143

首先你要明白，如果你想要并行，所有的结构都需要是并行的，我的意思是如果你有一个异步方法，你需要一个异步调用。在 Web 服务或 Web 内容中，可以使用异步的 AJAX 调用异步方法（只是众多方法中的一种）。在一种方法中，您可以拥有多个线程，这是异步方法和多线程之间的主要区别。最主要的是：标准方法和异步方法之间的区别在于，如果您同时对具有异步调用者（如 AJAX）的同一个控制器对标准方法进行 2 次调用，则第二次调用将在第一次调用时开始调用已经完成，如果您调用的方法是异步的，那么两个调用将同时开始，对于多核服务器，它可以达到标准速度的两倍（2 次调用）。并行度的速度由此衡量[法](http://en.wikipedia.org/wiki/Gustafson%27s_law)。

# c# - DateTime specifier with spaces

> ID：16083614
> 
> 赞同：1
> 
> 时间：2013-04-18T12:58:04.537
> 
> 标签：c#, datetime

I have for example following date time

```
 DateTime dt = new DateTime(2013,18,04,22,23,0); 
```

this date should be represented like

```
18-04-2013 22:23    Environment.NewLine 
```

Worth to mention is there are spaces between number 3 (of 22:23) and `Environment.NewLine`. So, field length is 20characters from beginning to E letter (of `Environment.NewLine`).

How can I represent date in this format with spaces?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:01:25.363

我将使用标准日期格式和非特定日期字符串格式代码的组合：

```
string.Format("{0:MM-dd-yyyy HH:mm}    \n", dt); 
```

或者如果长度“20”很重要：

```
string.Format("{0,-20:MM-dd-yyyy HH:mm}\n", dt); 
```

这有效地将字符串“填充”为 20 个字符并左对齐。这样，即使有人决定更改日期格式（例如，不要用零填充），您仍然只有 20 个字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:01:05.973

```
string.Format("{0,-20}  {1}", DateTime.ToString("MM-dd-yyyy HH:mm"), Environment.NewLine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:10:16.083

假设您修复了`DateTime`作业，因此月份在前一天：

```
DateTime dt = new DateTime(2013, 4, 18, 22, 23, 0);
String.Format("{0,-20}{1}",
    dt.ToString("dd-MM-yyyy HH:mm"),
    "Environment.NewLine" //*/ Environment.NewLine // Whichever you want
); 
```

`Format`允许您在格式化程序中指定空格填充，因此`{0,-20}`表示以 20 个字符的列显示，左对齐。同样，`{0,20}`会做 20 个字符，右对齐。

# dynamics-crm-2011 - 生成的自定义实体类的引用属性不起作用

> ID：16083618
> 
> 赞同：0
> 
> 时间：2013-04-18T12:58:14.423
> 
> 标签：dynamics-crm-2011, dynamics-crm

我已经用`CRM Devtoolkit`. 通过任何实体`OrganizationServiceContext.CreateQuer<customEntityType>().Where(someExpression).FirstOfDefault()`。结果很好。Is 具有所有自己的属性但相关的实体：

```
 /// <summary>
    /// N:N inv_inv_templatedelivery_account
    /// </summary>
    [Microsoft.Xrm.Sdk.RelationshipSchemaNameAttribute("relashionshipname")]
    public System.Collections.Generic.IEnumerable<CustomEntity> inv_inv_templatedelivery_account
    {
        get
        {
            return this.GetRelatedEntities<CustomEntity>("relashionshipname", null);
        }
        set
        {
            this.OnPropertyChanging("somePointer");
            this.SetRelatedEntities<CustomEntity>("relashionshipname", null, value);
            this.OnPropertyChanged("somePointer");
        }
    } 
```

此代码由 SDK Developer Toolkit 生成！为什么它返回NULL？？？？我还尝试使用 CrmSvcUtil.exe 生成类 - 结果相同。

太谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:50:16.070

您必须使用 contact.LoadProeprty 方法实际强制加载这些相关属性：

`context.LoadProperty(entity, "inv_inv_templatedelivery_account");`

您不希望 CRM 每次都拉回所有相关项目的所有数据，因此您必须每次都指定要加载的内容。

# multithreading - Simple jruby threading

> ID：16083619
> 
> 赞同：0
> 
> 时间：2013-04-18T12:58:17.473
> 
> 标签：multithreading, jruby

I am looking for how to properly start two simple threads in jruby.

In the following with two threads, the message within the first thread does not get printed. I can swap the two threads and the behavior (first thread does not print) persists: so it is not about the contents of the thread (which I stubbed out in any case)

```
input_before_mysql_phases_t = Thread.new do
  sprint "input_before_mysql_phases completed"
end
mysql_phases_t = Thread.new do
  sprint "mysql_phases completed"
end
sprint "awaiting completion of data fetch phases .."
sleep 5
sprint "data fetch phases completed" 
```

Here is output: notice the message from the first thread is not printed.

```
 => #<Thread:0x72d006a7 run>
[2013-04-18T12:56:29+00:00] SCHEDULER: mysql_phases completed
irb(main):540:0>     sprint "awaiting completion of data fetch phases .."
[2013-04-18T12:56:29+00:00] SCHEDULER: awaiting completion of data fetch phases ..
=> nil
irb(main):541:0>     sleep 5
=> 5
irb(main):542:0>     sprint "data fetch phases completed"
[2013-04-18T12:56:34+00:00] SCHEDULER: data fetch phases completed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:40:32.167

功能是什么`sprint`？

这有效：

```
input_before_mysql_phases_t = Thread.new do
  sleep Random.rand(5) # Random sleep
  sprintf "input_before_mysql_phases completed"
end
mysql_phases_t = Thread.new do
  sleep Random.rand(5) #Random sleep
  sprintf "mysql_phases completed"
end

puts "awaiting completion of data fetch phases .."
# Wait for threads to finish
input_before_mysql_phases_t.join
mysql_phases_t.join
puts "data fetch phases completed" 
```

# java - Are there any popular libraries to handle writing XSDs in Java without using binding?

> ID：16083620
> 
> 赞同：0
> 
> 时间：2013-04-18T12:58:19.030
> 
> 标签：java, xml

I'm currently scraping a bunch of interfaces and building basic XSDs from the information that I derive. I was wondering if anyone knows of a good simple library that I could use to build basic XSDs programatically from the list of simple parameters found by my application. I could do this by simply outputting the variable name and wrapping it in the XSD syntax like this `<xs:element name="derivedKey" type="xs:string">` but I'd prefer that some library do this for me in case I decide to do something fancier down the road. Does anyone know of a good library to handle write XSDs without binding them to objects?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:08:31.090

[我认为Apache XML Schema](http://ws.apache.org/commons/xmlschema20/)肯定会解决您的问题。您想要一个 Java 库以便您以轻松有效的方式创建 XSD。

Apache XML Scema 提供了您需要的所有这些功能。除此之外，它还可以读取 XSD，对其进行分析和修改。

# cakephp - CakePHP/Croogo: How to search in translated nodes too

> ID：16083626
> 
> 赞同：1
> 
> 时间：2013-04-18T12:58:37.530
> 
> 标签：cakephp, croogo

In croogo's search-View from the Nodes-controller the results include only nodes, where the searched term was found on the Node's model fields, but will skip any translated content for the nodes.

I'm trying to override this functionality and add support for translated content as well, but having a hard time to override the search-view without having to override the whole node-controller.

Does anyone has done this before and could give me some advice, as which approach could I take?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:28:35.660

对于任何有兴趣的人，我最终做了以下事情：

*   在我的插件上添加一个`SearchController`带有`show`-view 的新插件，它是`NodesController`.
*   用我的新视图覆盖`search/*`路线。

为了在翻译后的字段中进行搜索，我提供了两种可能的方法：

1）如果只为此使用分页，则需要先连接节点和 i18n 表，然后在连接的字段上另外查找字符串。

2）或者，首先通过查询在i18n表上找到所有具有匹配内容的不同节点。然后使用这个节点列表添加“ `OR Node.id in (list_of_nodes)`”的条件

我最终选择了备选方案 2，这就是显示视图的样子：

```
public function show() {
    if (!isset($this->request->params['named']['q'])) {
        $this->redirect('/');
    }

    App::uses('Sanitize', 'Utility');
    $q = Sanitize::clean($this->request->params['named']['q']);
    $results = $this->Node->query(
        "SELECT DISTINCT(foreign_key) FROM `i18n` " .
        "WHERE content LIKE '%" . $q . "%';");
    $node_ids = array();
    foreach($results as $res) {
        $node_ids[] = $res['i18n']['foreign_key'];
    }
    $this->paginate['Node']['order'] = 'Node.created DESC';
    $this->paginate['Node']['limit'] = Configure::read('Reading.nodes_per_page');
    $this->paginate['Node']['conditions'] = array(
        'Node.status' => 1,
        'AND' => array(
            array(
                'OR' => array(
                    'Node.title LIKE' => '%' . $q . '%',
                    'Node.excerpt LIKE' => '%' . $q . '%',
                    'Node.body LIKE' => '%' . $q . '%',
                    'Node.id' => $node_ids,
                ),
            ),
            array(
                'OR' => array(
                    'Node.visibility_roles' => '',
                    'Node.visibility_roles LIKE' => '%"' . $this->Croogo->roleId . '"%',
                ),
            ),
        ),
    );
    // some more stuff ...
} 
```

# python - Contact creation error using python-gdata API

> ID：16083630
> 
> 赞同：0
> 
> 时间：2013-04-18T12:58:47.543
> 
> 标签：python, gdata-api, google-shared-contacts

I have a question regarding contact creation using the python Google data API. I am trying the example for contact creation with python, exactly like it is in the documentation page ([https://developers.google.com/google-apps/contacts/v3/#creating_contacts](https://developers.google.com/google-apps/contacts/v3/#creating_contacts))

So, i created the client as following:

```
email='<my gmail uid>'
password='<my gmail pwd>'
gd_client = gdata.contacts.client.ContactsClient(source='GoogleInc-ContactsPythonSample-1')
try:
    gd_client.ClientLogin(email, password, gd_client.source)
except gdata.client.BadAuthentication:
    print 'Invalid user credentials given.'
    gd_client = None 
```

Then i executed the function using:

```
create_contact(gd_client) 
```

What i get from this call is:

```
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "<ipython console>", line 23, in create_contact
AttributeError: 'module' object has no attribute 'PostCode' 
```

So I want to ask whether i am doing something wrong, whether this is a known bug, or whether the documentation is simply outdated. Thanks.

p.s. a small comment, i think a better wrapping of the Google data API in the python library could be useful. I spent significant time in finding, within the API implementation, what fields should be set (directly!) and what classes should be used to assign them.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:36:11.187

好的，看来我可以回答我的问题，这部分是重复的

[如何创建谷歌联系人？](https://stackoverflow.com/questions/10364606/how-to-create-google-contact)

事实证明，文档中的示例代码无效（thanks, Google） PostCode 应该是 Postcode，即时通讯地址也不正确。

删除它，它成功完成

# javascript - how to set the data retrieved from the database as the div content?

> ID：16083634
> 
> 赞同：0
> 
> 时间：2013-04-18T12:58:51.063
> 
> 标签：javascript, listview, cordova

coding for retrieving data..

**script**

```
 function querySuccess(tx, results) 
            {
                    var len = results.rows.length;
                    console.log("DEMO table: " + len + " rows found.");
                    for (var i=0; i<len; i++)
                    {
                        console.log("Row = " + i + " name= " + results.rows.item(i).name+ " address=  " + results.rows.item(i).address+ " roll_no= " + results.rows.item(i).roll_no);
                        document.getElementById("list_view").innerhtml  = results.rows.item(i).name;
                    }
            } 
```

**html**

```
 <div id="list_view" style="float:left; width:100%; padding:0px; margin:0px;">
                <ul style="float:left; width:100%; list-style:none; padding:0px; margin:0px;">
                    <div style=" border-bottom-color:#CCCCCC; border-bottom:ridge; "> <li style="font-size:18px"></li></div>
                </ul>
            </div>
    </body>
</html> 
```

**AM I CORRECT??** **how to set the data retrieved from the database as the div content?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:03:28.897

```
document.getElementById("list_view").innerhtml  = results.rows.item(i).name; 
```

变成

```
document.getElementById("list_view").innerHTML  = results.rows.item(i).name; 
```

PS我明白了

```
<divid="list_view"...> 
```

也许这只是 SO 上的一个意外错误，但请尝试检查“id”是否与“div”而不是“div”分开

# ruby-on-rails - Capistrano：未安装宝石捆绑器

> ID：16083635
> 
> 赞同：1
> 
> 时间：2013-04-18T12:58:52.820
> 
> 标签：ruby-on-rails, deployment, gem, capistrano, bundle

Capistrano 引发错误“错误：未安装 Gem 捆绑程序，`gem install bundler`请先运行。”

但是，当我将项目克隆到目标服务器包的 /tmp/project 时，它会顺利运行（以 root 身份）。

服务器是 Ubuntu 12.04.2 LTS，ruby 是通过 rvm 安装的。

我在 /root/.bashrc 中添加了“source /usr/local/rvm/scripts/rvm”，但并没有解决问题。

```
require "bundler/capistrano"

set :application, 'myproject'
set :repository,  "git@myproject.git"
set :branch, 'staging'
set :user, 'root'
set :domain, "mydomain"
set :deploy_to, "/var/webapps/#{application}"

role :web, domain                   # Your HTTP server, Apache/etc
role :app, domain                   # This may be the same as your `Web` server
role :db,  domain, :primary => true # This is where Rails migrations will run
role :db,  domain

default_run_options[:pty] = true

# [and then the tasks] 
```

TIA。

**编辑** 这个相同的部署脚本在另一台服务器上工作，以相同的方式安装了 ruby​​。我记得的唯一区别是那台服务器是 CentOS。

[还按照此处](http://rafaelsteil.com/2012/09/18/fixing-gem-bundler-is-not-installed-when-using-capistrano/#comment-30%20here)的建议尝试了 rvm wrapper `rvm current`bundle bundle

**编辑 2**

我通过 ssh 和 capistrano 比较了 env 命令。capistrano 发出 env 时缺少以下 env 变量：

```
__array_start=0
_first=0
_second=1
escape_flag=1
GEM_HOME=/usr/local/rvm/gems/ruby-1.9.3-p392
GEM_PATH=/usr/local/rvm/gems/ruby-1.9.3-p392:/usr/local/rvm/gems/ruby-1.9.3-p392@global
IRBRC=/usr/local/rvm/rubies/ruby-1.9.3-p392/.irbrc
LC_ADDRESS=pt_BR.UTF-8
LC_IDENTIFICATION=pt_BR.UTF-8
LC_MEASUREMENT=pt_BR.UTF-8
LC_MONETARY=pt_BR.UTF-8
LC_NAME=pt_BR.UTF-8
LC_NUMERIC=pt_BR.UTF-8
LC_PAPER=pt_BR.UTF-8
LC_TELEPHONE=pt_BR.UTF-8
LC_TIME=pt_BR.UTF-8
LESSCLOSE=/usr/bin/lesspipe %s %s
LESSOPEN=| /usr/bin/lesspipe %s
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
MY_RUBY_HOME=/usr/local/rvm/rubies/ruby-1.9.3-p392
RUBY_VERSION=ruby-1.9.3-p392
rvm_bin_path=/usr/local/rvm/bin
rvm_debug_clr=
rvm_error_clr=
rvm_notify_clr=
rvm_path=/usr/local/rvm
rvm_prefix=/usr/local
rvm_reset_clr=
rvm_version=1.19.5 (stable)
rvm_warn_clr= 
```

以下环境变量不同：

```
_=/usr/bin/env   # ssh
_=/bin/sh        # capistrano
LANG=en_US.UTF-8 # ssh
LANG=C           # capistrano
LANGUAGE=en      # ssh
LANGUAGE=C       # capistrano
# ssh
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/rvm/bin
# capistrano
PATH=/usr/local/rvm/gems/ruby-1.9.3-p392/bin:/usr/local/rvm/gems/ruby-1.9.3-p392@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p392/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T12:06:31.280

尽管我使用 rbenv 来管理 ruby​​ 版本，但我的一个设置也遇到了类似的问题。问题是我的项目指向的 Ruby 版本上没有安装 bundler。

我在网上做了一个快速检查，你有几个选择：

1.  运行`rvm gemset use global && gem install bundler`（安装到全局版本）
2.  编辑你的 /.bashrc ... 类似的东西 `([[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm")`
3.  运行`gem env`可能会显示您正在强制使用路径，然后您需要从 ~/.gemrc 或 /etc/gemrc 中删除该条目

我的 2 美分

# android - 来自 AppWidgetProvider 的文本到语音

> ID：16083636
> 
> 赞同：1
> 
> 时间：2013-04-18T12:58:57.067
> 
> 标签：android, android-widget, android-appwidget

可以从小部件进行 TTS 吗？以前也有人问过同样的问题，但没有给出真正的答案。我想在按下小部件时启动 TTS，并说一些文字。这将如何完成？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T13:36:29.413

是的，这绝对是可能的，首先你需要在你的活动中实现“OnInitListener”并在你的活动中编写下面的代码..

```
TextToSpeech talker;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    talker = new TextToSpeech(this, this);
}

public void say(String text2say){
    talker.speak(text2say, TextToSpeech.QUEUE_FLUSH, null);
}

@Override
public void onInit(int status) {
    say("Hello World");

}

@Override
public void onDestroy() {
    if (talker != null) {
        talker.stop();
        talker.shutdown();
    }

    super.onDestroy();
} 
```

如需更多帮助，请点击 [此链接](http://mobile.tutsplus.com/tutorials/android/android-sdk-using-the-text-to-speech-engine/)

# c# - How do I get the XML request from WCF web service which located in DLL?

> ID：16083639
> 
> 赞同：0
> 
> 时间：2013-04-18T12:59:04.663
> 
> 标签：c#, xml, wcf, web-services, soap

My project has DLL which implement Web Client functionality. How can I get XML request which is send to WCF service from that DLL? My call of DLL method looks like this:

```
LocalUser usr = DLLServiceProxy.GetUser("JohnS"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:09:43.290

如果它是出于调试目的，那么您可以检查 svclog。如果它不是用于调试目的，那么您将不得不更改 dll 中的代码，以便它返回该 xml。你为什么想要那个xml？

**[有关如何配置 svclog 的](http://msdn.microsoft.com/en-us/library/ms733025.aspx)**更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:01:24.597

我会尝试使用一些 http 嗅探器，比如 Fiddler，[这个](http://www.nirsoft.net/utils/http_network_sniffer.html)（我自己没有测试过），或者其他的

# enums - 枚举尝试失败

> ID：16083645
> 
> 赞同：1
> 
> 时间：2013-04-18T12:59:21.417
> 
> 标签：enums, dart

我正在移植一个大量基于 Java 枚举的库，并且需要编写我自己的枚举，直到有对它们的本机支持。

然而我失败了！

在 ChessColor.values() 方法下面的代码中返回 null，我不明白为什么。

但是我是 Dart 的新手...

一定有一些我错过了静态字段和初始化的东西......

**枚举基类**

```
part of chessmodel;

/**
 * Emulation of Java Enum class.
 */
abstract class Enum {    

  final int code;
  final String name;

  Enum(this.code, this.name);    

  toString() => name;    

} 
```

**一个简单的使用尝试**

```
part of chessmodel;

final ChessColor WHITE = ChessColor.WHITE;
final ChessColor BLACK = ChessColor.BLACK;

class ChessColor extends Enum {

  static List<ChessColor> _values;
  static Map<String, ChessColor> _valueByName;

  static ChessColor WHITE = new ChessColor._x(0, "WHITE");
  static ChessColor BLACK = new ChessColor._x(1, "BLACK");

  ChessColor._x(int code, String name) : super (code, name) {
    if (_values == null) {
      _values = new List<ChessColor>();
      _valueByName = new Map<String, ChessColor>();
    }
    _values.add(this);
    _valueByName[name] = this;
  }

  static List<ChessColor> values() {
    return _values;
  }

  static ChessColor valueOf(String name) {
    return _valueByName [name];
  }

    ChessColor opponent() {
        return this == WHITE ? BLACK : WHITE;
    }

    bool isWhite() {
        return this == WHITE;
    }

    bool isBlack() {
        return this == BLACK;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:40:37.313

如果您绝对需要模拟旧的 Java 枚举模式，您可以。然而，Dart 将枚举视为一个更简单的构造。

为了回答您的一个问题，静态字段被“延迟”初始化，因为它们在第一次访问时被初始化。

话虽如此，这是您可以实现您正在尝试做的事情的一种方法。使用 const 构造函数来创建 const 对象。const 对象由编译器规范化。这意味着以相同方式初始化的两个 const 对象实际上是同一个对象。通常，您希望枚举为 const。

```
/**
 * Emulation of Java Enum class.
 */
abstract class Enum {    

  final int code;
  final String name;

  const Enum(this.code, this.name);    

  String toString() => name;
}

final ChessColor WHITE = ChessColor.WHITE;
final ChessColor BLACK = ChessColor.BLACK;

class ChessColor extends Enum {

  static const List<ChessColor> values =
      const [ChessColor.WHITE, ChessColor.BLACK];
  static Map<String, ChessColor> valueByName =
      const {"WHITE": ChessColor.WHITE, "BLACK": ChessColor.BLACK};

  static const ChessColor WHITE = const ChessColor._x(0, "WHITE");
  static const ChessColor BLACK = const ChessColor._x(1, "BLACK");

  const ChessColor._x(int code, String name) : super (code, name);
}

void main() {
  print(WHITE);
  print(ChessColor.values);
  print(ChessColor.WHITE.code);
  print(ChessColor.valueByName['BLACK']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T06:46:17.913

所以我从 java 到 dart 的移植继续进行，但我仍然遇到与静态初始化相关的问题。

我的 Java 枚举很聪明。即 ChessSquare A2 知道它的邻居。ChessBoardDirection 知道它是相反的方向。ChessColor 知道它的对手颜色等。

我相信人们可以讨论这样的设计，但在编写国际象棋代码时，它会产生干净和漂亮的代码。

在当前的移植尝试中，我发现自己被迫在此类类中添加静态initialModule() 方法，因为它们相互依赖，所以很快就会变得非常讨厌。

在java中，这很容易通过静态代码块来完成，这些代码块保证在加载类时被执行。

在下面使用 ChessColor 的最小示例中，如何在飞镖中得到最好的解决？即_opponent 是如何发起的。

爪哇

```
package chess.model;

public enum ChessColor {
  WHITE, BLACK;

  private ChessColor opponent;

  public ChessColor opponent() {
    return opponent;
  }

  public boolean isWhite() {
    return this == WHITE;
  }

  public boolean isBlack() {
    return this == BLACK;
  }

  static { // Initiate cross dependencies
    WHITE.opponent = BLACK;
    BLACK.opponent = WHITE;
  }
} 
```

镖

```
part of chessmodel;

final ChessColor WHITE = ChessColor.WHITE;
final ChessColor BLACK = ChessColor.BLACK;

class ChessColor extends Enum {

  static ChessColor WHITE = new ChessColor._x(0, "WHITE");
  static ChessColor BLACK = new ChessColor._x(1, "BLACK");

  static List<ChessColor> _values = [WHITE, BLACK];
  static Map<String, ChessColor> _valueByName = {"WHITE": WHITE, "BLACK": BLACK};

  ChessColor _opponent;

  ChessColor._x(int code, String name) : super (code, name);

  static List<ChessColor> values() {
    return _values;
  }

  static ChessColor valueOf(String name) {
    return _valueByName [name];
  }

  ChessColor get opponent => _opponent; 
  bool get isWhite => this == WHITE;
  bool isBlack => this == BLACK;

} 
```

# authentication - 如何在 C 项目中实现 LDAP 身份验证

> ID：16083646
> 
> 赞同：1
> 
> 时间：2013-04-18T12:59:24.193
> 
> 标签：authentication, ldap

我有一个用 C 编写的应用程序，当前的身份验证使用 PAM 身份验证插件，我想用 LDAP 身份验证替换它。但我真的不知道该怎么做。我想要一个关于在应用程序中集成 LDAP 的 C 教程，以及对 ldap 协议如何工作的很好的参考……非常感谢：）。

# html - 在 HTML 中隐藏文本？

> ID：16083647
> 
> 赞同：19
> 
> 时间：2013-04-18T12:59:30.610
> 
> 标签：html, css

我很快就会为我的大学完成一个网站（事实上，除了一些轻微的调整外，它现在大部分都完成了），我想向一些提供帮助的博主和堆栈溢出社区添加一个隐藏的感谢一个巨大的帮助。现在，我有一个以这种方式隐藏的文本部分：

```
<font style="font-size:0px"> - text </font> 
```

但我觉得可能有更好的方法。在那儿？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T13:01:07.827

这将保留其空间，但不显示任何内容；

```
opacity: 0.0; 
```

这将完全隐藏对象，加上它的（保留的）空间；

```
display: none; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-18T13:01:16.953

```
<div style="display:none;">CREDITS_HERE</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T13:01:46.750

你可以使用css属性来隐藏 `style="display:none;"`

```
<div style="display:none;">CREDITS_HERE</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T13:51:42.970

您说您不能使用 HTML 注释，因为 CMS 会将它们过滤掉。所以我假设你真的想隐藏这个内容，你不需要显示它。

在这种情况下，您不应该（仅）使用 CSS，因为您只会在演示级别上播放，而不会影响内容级别。对于忽略 CSS 的用户代理（使用文本浏览器、提要阅读器、屏幕阅读器；机器人等），您的内容也应该隐藏。

在 HTML5 中有全局[`hidden`属性](http://www.w3.org/TR/html5/editing.html#the-hidden-attribute)：

> 当在一个元素上指定时，它表示该元素尚未或不再与页面的当前状态直接相关，或者它正在用于声明内容以供页面的其他部分重用，而不是用户直接访问。用户代理不应渲染具有`hidden`指定属性的元素。

示例（在此处使用[`small`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-small-element)，因为它是“属性”）：

```
<small hidden>Thanks to John Doe for this idea.</small> 
```

作为后备（对于不知道该`hidden`属性的用户代理），您可以在 CSS 中指定：

```
[hidden] {display:none;} 
```

纯文本的一般元素可以是[用作“数据块”](https://stackoverflow.com/a/14428316/1591669)`script`的元素：

```
<script type="text/plain" hidden>
Thanks to John Doe for this idea.
</script> 
```

或者，您也可以在现有元素上使用[`data-*`属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)`div`（如果要为属性分组一些元素，则分别在新元素上使用）：

```
<p data-attribution="Thanks to John Doe for this idea!">This is some visible example content …&lt;/p> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-18T13:01:51.657

[显示：无](https://developer.mozilla.org/en-US/docs/CSS/display)或[可见性：隐藏](https://developer.mozilla.org/en-US/docs/CSS/visibility)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-18T13:02:06.057

这里有两种方法可以实现这一目标

您可以不显示或不显示不透明度...但是如果您希望不透明度与跨浏览器兼容，则必须将其添加到您的 css

```
/* IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

/* IE 5-7 */
filter: alpha(opacity=50);

/* Netscape */
-moz-opacity: 0.5;

/* Safari 1.x */
-khtml-opacity: 0.5;

/* Good browsers */
opacity: 0.5; 
```

[http://codepen.io/anon/pen/Krkfj](http://codepen.io/anon/pen/Krkfj)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-20T17:16:01.293

Not sure if this was what you were asking for, but I was personally trying to 'hide' some info in my html so that if someone inspected it, they would see the text in the source code.

It turns out that you can add ANY attribute, and so long as it isn't understood by the browser, it will just be left buried in the tag. My code was an easter egg: For people who couldn't afford to do the Makers Academy course, I basically encouraged them to inspect the element, where they would be given a secret URL where they could apply for a special, cut-price course (it's in haml, but it's the same idea in HTML):

```
.entry
        %h2 I can't afford to do the course... What should I do?
        %p{:url_you_should_visit => 'http://ronin.makersacademy.com'} Inspect and you shall find. 
```

Or in html:

```
<p url_you_should_visit="http://ronin.makersacademy.com">Inspect and you shall find.</p> 
```

Because 'url' is not a recognised html attribute, it makes no difference but is still discoverable. You could do the same with anything you wanted. You could have an attribute (in html) like:

```
<p thanks="Thanks to all the bloggers that helped me"> Some text </p> 
```

And they'll be able to find your little easter egg if they want it... Hope that helps - it certainly helped me :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-18T13:03:00.107

使用 CSS 属性`visibility`并将其设置为`hidden`.

[你可以在这里](http://www.w3schools.com/cssref/pr_class_visibility.asp)看到更多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T13:03:52.890

使用 css 属性`style="display:none"`或`style=visibility:hidden"`

# asp.net - 单击按钮时显示文本

> ID：16083648
> 
> 赞同：1
> 
> 时间：2013-04-18T12:59:31.363
> 
> 标签：asp.net, asp.net-mvc-3, knockout.js, orchardcms-1.6, knockout-mvc

创建我的第一个 ASP.NET MVC 淘汰赛 MVC。

我添加了一个模型设置 3 个日期。控制器分配 3 个日期。然后它们使用视图显示在屏幕上：

```
<p>First Date: @ko.Html.TextBox(m => m.FirstDate)</p>
<p>Second Date: @ko.Html.TextBox(m => m.SecondDate)</p>
<p>Third Date: @ko.Html.TextBox(m => m.ThirdDate)</p>

@ko.Apply(Model) 
```

@ko.Apply(Model) 是显示 3 个日期的主要部分。我试图仅在单击按钮时显示 3 个日期，因此将代码放在表单中并使用按钮：

```
<form id="displaydates" method="post" >
<p>First Date: @ko.Html.TextBox(m => m.FirstDate)</p>
<p>Second Date: @ko.Html.TextBox(m => m.SecondDate)</p>
<p>Third Date: @ko.Html.TextBox(m => m.ThirdDate)</p>

<input id="btn" type="button" value="click" @ko.Apply(Model) />
</form> 
```

问题是这不再在文本框中显示日期，它们显示在按钮旁边。要recpa：我希望每个日期在单击按钮时出现在文本框中（而不是在页面加载时出现在按钮旁边 - 这就是atm发生的情况）。

有任何想法吗？ ![在此处输入图像描述](https://i.stack.imgur.com/qXD68.png)

更新尝试添加一个按钮，但现在根本不显示日期，即使单击该按钮也是如此。

看法：

```
@using PerpetuumSoft.Knockout
@model KnockOutMVC3Dates.Models.DatesModel       
@{
  var ko = Html.CreateKnockoutContext();
}

<p>First Date: @ko.Html.TextBox(m => m.FirstDate)</p>
<p>Second Date: @ko.Html.TextBox(m => m.SecondDate)</p>
<p>Third Date: @ko.Html.TextBox(m => m.ThirdDate)</p>

@ko.Html.Button("Display","Index","Dates",null,null) 
```

日期控制器：

```
 public ActionResult Index()
        {
            return View
                (   new DatesModel
                    {
                        FirstDate = DateTime.Now,

                        SecondDate = DateTime.Now.AddYears(1).AddMonths(1),
                        ThirdDate = DateTime.Now.AddYears(2).AddMonths(2)
                    }
                );

        } 
```

模型：

```
 public class DatesModel
{
    public DateTime FirstDate { get; set; }
    public DateTime SecondDate { get; set; }
    public DateTime ThirdDate { get; set; }
} 
```

欢迎任何帮助或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:08:43.253

输入标签可以在这里使用 **在 onclick 事件中，您可以给出模型的名称，也可以试试这个...**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:36:16.927

也许你想要这样的东西？

```
<input id="btn" type="button" value="click" onclick="@(ko.Apply(Model))" /> 
```

我对 Knockout JS 不是特别熟悉，但它的返回值似乎`ko.Apply(Model)`是一堆 JS 来填充您的字段。如果您想在单击按钮时运行它，您将需要上述内容。现在，您正在将大量 JS 写入您的输入标签，这简直就是破坏。**

# node.js - 构建基于 socket.io 的服务器结构

> ID：16083650
> 
> 赞同：0
> 
> 时间：2013-04-18T12:59:37.920
> 
> 标签：node.js, socket.io, php

我正在尝试为我的新项目制作服务器端结构

项目将是 Web 应用程序，应该非常快

我认为使用套接字会比 http 请求更快，并且我不想通过大量页面重新加载来降低用户体验。所以我打算使用 socket.io 但我想用 PHP 编写应用程序的核心

所以我想出了使用Nodejs作为服务器并使用nodejs中的PHP-FPM来使用php的想法我需要你的建议这是个坏主意吗？如果是，那为什么？如果不是，我如何使用 nodejs 中的 php-fpm 来实现？

如果您有更好的想法来构建这种结构或任何其他建议，请告诉我

我计划在所有组件中使用最新的软件，包括 php 5.4+，也许 5.5 会稳定发布，直到我完成项目

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:05:49.947

我刚刚开始使用[Ratchet](http://socketo.me/)作为 PHP websockets 服务器，它非常好，很容易编写代码；并且不会有 nodejs <--> PHP-FPM 的开销

不过，不知道它会随着大量用户扩展多少。

# json - 获取三个最晚时间的json元素

> ID：16083653
> 
> 赞同：1
> 
> 时间：2013-04-18T12:59:46.687
> 
> 标签：json, linq, c#-4.0

我有一个 json 数组。元素格式可能如下：

```
{
    "CKey": "S2_123_45_20130416105655",
    "TimeOfCall": "2013-04-17T06:00:00-04:00",
    "DestinationNumber": "123456789",
    "CallType": "X",
    "CardNumber": ""
} 
```

数组中有很多元素，我只想要`TimeOfCall(DateTime format)`24 小时内的最新三个订单。它们可能什么都不是，也可能是 1,2。最大值是3。
原来我想用几个字典来存储和排序，但它太复杂了。

**更新：**

此 json 数组来自 C# 代码的 json 字符串：

```
DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(List<CallDataDTO>));
MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(response4.Content.ReadAsStringAsync().Result));
calls = (List<CallDataDTO>)ser.ReadObject(ms); // dynamic
jsonStr4 = _dynamicConvert.DynamicToString(calls);// convert dynamic to string
jsonArray4 = JArray.Parse(jsonStr4); // convert string to a json array. 
```

**更新2：**

```
?jsonArray4
{[
   {
    "CKey": "P2_123_23_20130416105655",
    "TimeOfCall": "2013-04-17T06:00:00-04:00",
    "DestinationNumber": "1234567890",
    "CallType": "DEBIT",
    "CardNumber": ""
 },
 {
"CKey": "P5_123_105_20130412154035",
"TimeOfCall": "2013-04-17T07:00:00-04:00",
"DestinationNumber": "1234567890",
"CallType": "DEBIT",
"CardNumber": ""
},
{
  "CKey": "P5_123_114_20130412154000",
  "TimeOfCall": "2013-04-07T08:00:00-04:00",
  "DestinationNumber": "1234567890",
  "CallType": "DEBIT",
  "CardNumber": ""
}
]}
base {Newtonsoft.Json.Linq.JContainer}: {[
{
  "CKey": "P2_123_23_20130416105655",
  "TimeOfCall": "2013-04-17T06:00:00-04:00",
  "DestinationNumber": "1234567890",
  "CallType": "DEBIT",
  "CardNumber": ""
},
{
  "CKey": "P5_123_105_20130412154035",
  "TimeOfCall": "2013-04-17T07:00:00-04:00",
  "DestinationNumber": "1234567890",
  "CallType": "DEBIT",
  "CardNumber": ""
},
{
 "CKey": "P5_123_114_20130412154000",
 "TimeOfCall": "2013-04-07T08:00:00-04:00",
 "DestinationNumber": "1234567890",
 "CallType": "DEBIT",
 "CardNumber": ""
}
]}
 Type: Array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:48:38.493

我会尝试类似的东西

```
jsonArray4.Where(item => Convert.ToDateTime(item["TimeOfCall"]).Date == DateTime.Now.Date)
.OrderByDescending(item => Convert.ToDateTime(item["TimeOfCall"]))
.Take(3); 
```

更新：如果您需要过去 24 小时而不是当天：

```
jsonArray4.Where(item => Convert.ToDateTime(item["TimeOfCall"]) >= DateTime.Now.AddHours(-24))
.OrderByDescending(item => Convert.ToDateTime(item["TimeOfCall"]))
.Take(3); 
```

[Linq 到 Json](http://james.newtonking.com/projects/json/help)

Update2：我之前建议的应该可以。这是我的完整代码示例：

```
string jsonText = @"[
{
    'CKey': 'P2_123_23_20130416105655',
    'TimeOfCall': '2013-04-17T06:00:00-04:00',
    'DestinationNumber': '1234567890',
    'CallType': 'DEBIT',
    'CardNumber': ''
},    
{
    'CKey': 'P5_123_105_20130412154035',
    'TimeOfCall': '2013-04-17T07:00:00-04:00',
    'DestinationNumber': '1234567890',
    'CallType': 'DEBIT',
    'CardNumber': ''
},
{
    'CKey': 'P5_123_114_20130412154000',
    'TimeOfCall': '2013-04-07T08:00:00-04:00',
    'DestinationNumber': '1234567890',
    'CallType': 'DEBIT',
    'CardNumber': ''
}    
]";

var result = JArray.Parse(jsonText).
    Where(item => Convert.ToDateTime(item["TimeOfCall"]).Date == new DateTime(2013, 4, 17))
    .OrderByDescending(item => Convert.ToDateTime(item["TimeOfCall"]))
    .Take(3); 
```

请注意，我稍微改变了条件以实际返回一些东西。如果您只需要过去 24 小时的结果，则将条件更改为 >= DateTime.Now.AddHours(-24)

# physics - 被球击中时使矩形坠落（取决于属性不同的结果）

> ID：16083658
> 
> 赞同：0
> 
> 时间：2013-04-18T12:59:58.070
> 
> 标签：physics

我刚开始接触物理。我正在使用 Java，尽管语言显然并不重要。现在我虽然我会做这样的事情：

![在此处输入图像描述](https://i.stack.imgur.com/WkBI2.png)

具有一定速度、半径和质量的球撞击具有一定质量、宽度和高度的矩形。根据球击中矩形的位置（多高），以及我刚才提到的球和矩形的所有属性，情况会有不同的结果。

以下是四种可能的结果：

*   球反弹回来，因为矩形太重
*   矩形开始摆动，但随后又恢复正常
*   矩形落在右边
*   球通过使矩形向左下落

请注意，我不希望您为我编写程序。我知道要考虑很多。但我不知道如何开始。我真的很感激一些指导方针和进一步阅读的链接（我不确定用谷歌搜索什么来找到关于这个的信息。）

而且，我这样做是为了学习，所以不要告诉我使用引擎或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:53:48.683

您正在尝试构建一个简单的物理模拟器。这是一个相当复杂的问题，在此过程中您必须学习一定数量的物理知识。

我建议您开发模拟器来处理这些情况，大致按以下顺序：

1.  物体在空间中移动（恒定速度，无重力）。
2.  物体在恒定力（如重力）的影响下运动。
3.  一个物体在一个约束下移动（例如一个钟摆，一个滚动的正方形）。
4.  物体在表面上滑动，摩擦（静态和动态）。
5.  两个物体无弹性地碰撞（它们粘在一起）。
6.  两个物体弹性碰撞（它们反弹）。

一旦你拥有了所有这些，你将能够模拟你的球和矩形。

# asp.net - 在 Radgrid 中单击编辑按钮时不显示编辑表单

> ID：16083660
> 
> 赞同：2
> 
> 时间：2013-04-18T13:00:02.943
> 
> 标签：asp.net, telerik

我正在使用自定义表单从 RadGrid 添加/更新我的记录。我在 RadGrid 中有一个列：

```
 <telerik:GridButtonColumn CommandName="Edit" ButtonType="ImageButton"  UniqueName="myEditColumn">
                        </telerik:GridButtonColumn> 
```

我想坚持将此列用于我的编辑命令，但单击此按钮会打开 Build it Edit Form of Radgrid。我不想通过单击此列来打开该 EditForm。我不想使用其他方法为此放置自定义图像。相反，我必须使用 RadGrid 的 build In Edit 列，因为我在 Code 中发布了该列。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:02:28.263

考虑使用 RadGrid 演示自定义编辑表单的示例：

[http://demos.telerik.com/aspnet-ajax/ajax/examples/manager/dynamicajaxsettings/defaultcs.aspx?product=grid](http://demos.telerik.com/aspnet-ajax/ajax/examples/manager/dynamicajaxsettings/defaultcs.aspx?product=grid)

# java - 新活动的菜单项

> ID：16083665
> 
> 赞同：0
> 
> 时间：2013-04-18T13:00:12.053
> 
> 标签：java, android, menu, android-activity

我正在尝试使用菜单按钮将用户发送到新活动，然后再返回。把它放到上下文中，我有一个基本的计算器，它在应用程序打开时运行（现在工作完美），然后我希望用户点击他/她手机上的菜单按钮，（两个按钮应该弹出 Home 和 Tip Calculator) 当用户点击小费计算器时，它应该加载新的活动 TipCalculator。然后，如果再次按下菜单按钮，将出现相同的两个选项，并且主页按钮应将它们带回基本计算器。

这是我的 Calculator.java 代码

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_calculator, menu);

        menu.add(Menu.NONE,HOME_MENU_ID,Menu.NONE,"Home");
        menu.add(Menu.NONE,SECOND_MENU_ID,Menu.NONE,"Tip Calculator");
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub

        switch(item.getItemId()){

        case HOME_MENU_ID:
            Intent main = new Intent(this,Calculator.class);
            startActivity(main);
            finish();
        return true;

        case SECOND_MENU_ID:
            Intent second = new Intent(this,TipCalculator.class);
            startActivity(second);
            finish();
        return true;

        }

        return super.onOptionsItemSelected(item);
    } 
```

这是 TipCalculator.java 的代码

```
 public class TipCalculator extends Calculator{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tipcalculator);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_tipcalculator, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    Intent main = new Intent(this,Calculator.class);
    startActivity(main);
    finish();
    return super.onOptionsItemSelected(item);
}

} 
```

菜单很好，主页按钮将刷新主页，但提示计算器按钮给我一个强制关闭错误并在我身上崩溃。

# c# - 使大小数字易于阅读

> ID：16083666
> 
> 赞同：22
> 
> 时间：2013-04-18T13:00:12.817
> 
> 标签：c#, numbers, human-readable, humanize

我想以人类友好的方式在 C# 中打印我非常小的数字，例如：

`30µ`为`3E-5`或`456.789n`为`0.000000456789`。

我知道 C 中 BSD 的[Humanize_number](http://www.unix.com/man-page/FreeBSD/3/humanize_number/) () 函数，但仅与位整数兼容，而不与浮点数和双精度数兼容。C# 中是否有支持这些的等价物？

此外，它在显示数字时应保持一定的精度，例如：

`0.003596`应显示为`3.596µ`, not `3.6µ`（或更糟的是`4µ`）。

此处可能的答案：[Formatting Large Numbers with .NET](https://stackoverflow.com/questions/1555397/formatting-large-numbers-with-net)但适用于负 log10 将逗号后的数字截断为 1 位。在我看来，这还远远不够。

我想如何呈现事物的示例：

```
3000        3K
3300        3.3K
3333        3.333K
30000       30k
300000      300k
3000000     3M
3000003     3.000003M // or 3M if I specify "4 digits precision"
0.253       253m
0.0253      25.3m
0.00253     2.53m
-0.253003   -253.003m 
```

我无法制定我的问题以在 SO 中找到相关答案，所以如果问题已经得到解答，请开火！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T19:34:31.030

尝试这个：

```
static class Extensions
{
    static string[] prefixes= { "f", "a", "p", "n", "μ", "m", string.Empty, "k", "M", "G", "T", "P", "E" };

    public static string Nice(this double x, int significant_digits)
    {
        //Check for special numbers and non-numbers
        if(double.IsInfinity(x)||double.IsNaN(x)||x==0||significant_digits<=0)
        {
            return x.ToString();
        }
        // extract sign so we deal with positive numbers only
        int sign=Math.Sign(x);
        x=Math.Abs(x);
        // get scientific exponent, 10^3, 10^6, ...
        int sci= x==0? 0 : (int)Math.Floor(Math.Log(x, 10)/3)*3;
        // scale number to exponent found
        x=x*Math.Pow(10, -sci);
        // find number of digits to the left of the decimal
        int dg= x==0? 0 : (int)Math.Floor(Math.Log(x, 10))+1;
        // adjust decimals to display
        int decimals=Math.Min(significant_digits-dg, 15);
        // format for the decimals
        string fmt=new string('0', decimals);
        if(sci==0)
        {
            //no exponent
            return string.Format("{0}{1:0."+fmt+"}",
                sign<0?"-":string.Empty,
                Math.Round(x, decimals));
        }
        // find index for prefix. every 3 of sci is a new index
        int index=sci/3+6;
        if(index>=0&&index<prefixes.Length)
        {
            // with prefix
            return string.Format("{0}{1:0."+fmt+"}{2}",
                sign<0?"-":string.Empty,
                Math.Round(x, decimals),
                prefixes[index]);
        }
        // with 10^exp format
        return string.Format("{0}{1:0."+fmt+"}·10^{2}",
            sign<0?"-":string.Empty,
            Math.Round(x, decimals),
            sci);
    }

    // test code
    static void Main(string[] args)
    {
        double x=Math.PI/10e20;
        do
        {
            Console.WriteLine(string.Format( "\t{0,20} = {1}", x, x.Nice(4)));
            x*=10;
        } while(x<=Math.PI*10e20);
    }
} 
```

具有四位有效数字的测试输出：

```
 3.14159265358979E-19 = 314.2·10^-2
     1.5707963267949E-18 = 1.571f
    7.85398163397448E-18 = 7.854f
    3.92699081698724E-17 = 39.27f
    1.96349540849362E-16 = 196.3f
     9.8174770424681E-16 = 981.7f
    4.90873852123405E-15 = 4.909a
    2.45436926061703E-14 = 24.54a
    1.22718463030851E-13 = 122.7a
    6.13592315154256E-13 = 613.6a
    3.06796157577128E-12 = 3.068p
    1.53398078788564E-11 = 15.34p
     7.6699039394282E-11 = 76.70p
     3.8349519697141E-10 = 383.5p
    1.91747598485705E-09 = 1.917n
    9.58737992428526E-09 = 9.587n
    4.79368996214263E-08 = 47.94n
    2.39684498107131E-07 = 239.7n
    1.19842249053566E-06 = 1.198µ
    5.99211245267829E-06 = 5.992µ
    2.99605622633914E-05 = 29.96µ
    0.000149802811316957 = 149.8µ
    0.000749014056584786 = 749.0µ
     0.00374507028292393 = 3.745m
      0.0187253514146196 = 18.73m
      0.0936267570730982 = 93.63m
       0.468133785365491 = 468.1m
        2.34066892682745 = 2.341
        11.7033446341373 = 11.70
        58.5167231706864 = 58.52
        292.583615853432 = 292.6
        1462.91807926716 = 1.463k
         7314.5903963358 = 7.315k
         36572.951981679 = 36.57k
        182864.759908395 = 182.9k
        914323.799541975 = 914.3k
        4571618.99770987 = 4.572M
        22858094.9885494 = 22.86M
        114290474.942747 = 114.3M
        571452374.713734 = 571.5M
        2857261873.56867 = 2.857G
        14286309367.8434 = 14.29G
        71431546839.2168 = 71.43G
        357157734196.084 = 357.2G
        1785788670980.42 = 1.786T
         8928943354902.1 = 8.929T
        44644716774510.5 = 44.64T
         223223583872552 = 223.2T
    1.11611791936276E+15 = 1.116P
    5.58058959681381E+15 = 5.581P
    2.79029479840691E+16 = 27.90P
    1.39514739920345E+17 = 139.5P
    6.97573699601726E+17 = 697.6P
    3.48786849800863E+18 = 3.488E
    1.74393424900432E+19 = 17.44E
    8.71967124502158E+19 = 87.20E
    4.35983562251079E+20 = 436.0E
     2.1799178112554E+21 = 2.180·10^21 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:54:01.867

因为您希望小数显示为符号而不是很多 0，您也可以执行以下操作：

```
class Program
{
    static void Main(string[] args)
    {
        //these are your "unit precedessors"
        char[] exponentsbig = new char[] {' ', 'k', 'M', 'G', 'T', 'P', 'E' };
        char[] exponentssmall = new char[] { ' ', 'm', 'µ', 'n', 'p', 'a', 'f' };

        //some example numbers
        long[] numbersBig = new long[] { 3000, 3003, 30000, 300000, 300003, 1594900000000000 };
        double[] numbersSmall = new double[] { 0.0002, 0.245, 0.245003, 0.000004578 };
        //some helper vars
        int counter = 0;
        bool edited = false;
        //let's have a look at what we produce;)
        string output = "";

        //Big  numbers incoming!!
        for (int i = 0; i < numbersBig.Length; i++)
        {
            counter=0;
            double myNumber = Convert.ToDouble(numbersBig[i]);
            do
            {
                edited = false;
                //something to prevent unnecessary unit-adding and making sure you still divide by 1000
                if (myNumber/1000>1 )
                {
                    counter++;
                    myNumber /= 1000;
                    edited = true;
                }
            } while (edited);
            output += numbersBig[i] + " " + myNumber + exponentsbig[counter] + "\n";
        }

        //small  numbers incoming!!
        for (int i = 0; i < numbersSmall.Length; i++)
        {
            counter = 0;
            double myNumber = numbersSmall[i];
            do
            {
                edited = false;
                //this will go to 3 digits after comma. you can make the compared smaller 
                //to be more exact after the comma, but keep in mind you lose steps then
                if (myNumber < 1)
                {
                    counter++;
                    myNumber *= 1000;
                    edited = true;
                }
            } while (edited);
            output += numbersSmall[i] + " " + myNumber + exponentssmall[counter] + "\n";
        }
        //see what we did
        Console.Write(output);
        Console.ReadKey();

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:16:08.693

你可以使用 DllImport 来使用 Humanize_Number 函数吗？有关详细信息，请参见此处：

[在 C# 中动态加载 dll](https://stackoverflow.com/questions/1750901/dynamically-loading-a-dll-in-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:29:43.407

为什么不乘以 10^（小数点后数）？您可以使用相同的小数点后数来确定要显示的单位。这比导入整个库要好得多。

# git - 无法使用 git 存储库从团队基础服务创建网站和发布

> ID：16083671
> 
> 赞同：2
> 
> 时间：2013-04-18T13:00:31.523
> 
> 标签：git, azure, azure-devops

我在 Azure 上设置网站并将其连接到我的团队基础服务帐户时遇到问题。我尝试使用的存储库是 GIT 存储库。

完成 Azure 向导后，它会返回一条消息，指出该帐户根本不包含任何存储库。

Azure 是否支持 TFS-GIT 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T07:24:29.300

尚不支持 TFService 托管的 Git 存储库（尚）。您仍然可以通过使用托管的构建服务器和 Web 部署来设置自动部署。

我有一篇[博](http://www.richard-banks.org/2013/08/how-to-deploy-azure-website-from-git_21.html)文，描述了要通过的步骤和 MSBuild 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T14:19:24.257

Azure 网站似乎仅支持从*公共*Git 存储库直接部署。我不得不选择“私人仓库”选项，它会在 Azure 中创建一个辅助存储库，您可以在其中推送部署。一方面有点烦人，尽管它确实可以让您控制实际想要部署的频率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T15:21:07.307

对于任何偶然发现这篇文章的人，现在可以从托管的 TFS 构建控制器 (visualstudio.com) 直接部署到 Azure 网站。

从您网站的 Azure 管理控制台中的“部署”选项配置它，而不是从 TFS 实例。它将自动为您创建构建配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T00:58:15.443

我必须通过克隆 TFS git repo 并将上游拉入 bitbucket 来解决这个问题。没有一个回购有点烦人，但它工作正常。

# html - 如何指示带有链接的 LI 被按下。

> ID：16083672
> 
> 赞同：1
> 
> 时间：2013-04-18T13:00:32.853
> 
> 标签：html, css, html-lists, selected

我制作了一个菜单，并希望将按下的按钮保持不同的颜色。IE 如果我在菜单页面，菜单的菜单按钮会是蓝色的。

我已经阅读了一些关于菜单的在线指南，最后得到了以下内容：

```
<div id="menu">

<ul>

    <li>
        <a href="/index.php" >home</a>
    </li>
    <li>
        <a href="/search.php" >search</a>
    </li>
    <li>
        <a href="#">1</a>
    </li>
    <li>
        <a href="#">2</a>
    </li>
    <li>
        <a href="#">3</a>
    </li>

</ul></div> 
```

CSS 会是这样的：

```
#menu ul li a.selected{
background:blue;
color:#000;
} 
```

当然，每个`LI`都有高度和东西，所以它有一些颜色。问题是如何告诉 HTML 选择了一个按钮？HTML属性还是什么？

我遇到的另一个难题是如何最好地更改这些选择？我可以使用 PHP 检查地址并根据它更改选择的地址。任何建议如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:07:41.467

试试 :active 和 :focus

```
#menu ul li a:active,#menu ul li a:focus{
    background:blue;
    color:#000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:08:33.877

你可以去：

```
<li>
<a href="/search.php" 
<?php 
    if(strstr($_SERVER["REQUEST_URI"], "YOURPATH/index.php")) 
      echo "class='selected'";
?>
> Home </a>
</li> 
```

或使用 Javascript 等效的“document.URL”。可能不是最干净的解决方案，但应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:04:12.923

`a:visited`在 css 中使用。仅当之前使用过该链接时，它才会被应用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:04:40.947

您可以在 css中使用`a:visited`和。当你点击它时，`a:active`它会变成它。如果您以前访问过它，`active`它就会变成。`visited`

如果您想操作按钮，您可以考虑使用 JavaScript（最好是 jQuery），然后您可以轻松地根据操作（例如`onclick`）更改元素属性。

# php - 如何在函数处理后停止返回（防止 HTML 不加载）

> ID：16083678
> 
> 赞同：0
> 
> 时间：2013-04-18T13:00:42.813
> 
> 标签：php

您好，我有一个函数可以检查我的注册详细信息是否在数据库中不匹配，如果匹配，则返回代码。

但是每次我返回代码时，我的 HTML 都不会加载，因为它会阻止它加载。由于某些特定原因，我希望 HTML 始终位于 PHP 代码下（我希望错误显示在表单上，​​而不是在下）。

这是我的功能的一个例子：

```
function check_available($name, $password, $email)
{
    global $pdo;

    $check_user = $pdo->prepare("SELECT * FROM users WHERE user_name = :username LIMIT 1");
    $check_user->execute( array(':username' => $name) );        

    $check_email = $pdo->prepare("SELECT * FROM users WHERE user_email = :email LIMIT 1");
    $check_email->execute( array(':email' => $email) ); 

    $error = '';
    if ($check_user->rowCount())
    {
        $error .= 'Username already exists!';
        return handle_errors($error);
    }
    else if($check_email->rowCount() && !$check_user->rowCount())
    {
        $error .= 'Email already exists!';
        return handle_errors($error);
    }
    else
    {
        return true;
    }
}

    if (isset($_POST['submit']))
    {
        $check_in = check_available($name, $password, $email);

        if ($check_in == true)
        {
            echo 'Created account sucessfully!';
        }
    }
?>  
<html>
<form action="register.php" method="POST">
Username: <input type="text" name="username"><br />
Password: <input type="password" name="password"><br />
Email: <input type="text" name="email"><br />
<input type="submit" name="submit">
</form>
</html> 
```

**提交后，（用户名已在数据库中匹配），HTML 将隐藏并显示错误。**

*我该如何防止这种情况？有什么诀窍吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:03:30.367

隐藏表单是没有意义的。
恰恰相反，必须显示表单才能让用户输入另一个名称。

因此，只需将错误输出添加到您的表单 - 这就是您所需要的

编辑
看起来应该归咎于 handle_errors() 函数。

```
function reg_has_errors($name, $password, $email)
{
    global $pdo;

    $error = '';

    $sql = "SELECT 1 FROM users WHERE user_name = ? LIMIT 1";
    $stm = $pdo->prepare($sql);
    $stm->execute( array($name) );        
    if($stm->rowCount())
    {
        $error .= 'Username already exists!';
    }

    $sql = "SELECT * FROM users WHERE user_email = ? LIMIT 1";
    $stm = $pdo->prepare($sql);
    $stm->execute( array($email) );        
    if($stm->rowCount())
    {
        $error .= 'Email already exists!';
    }
    return $error;
}

$errors = '';
if (isset($_POST['submit']))
{
    $errors = reg_has_errors($name, $password, $email);

    if (!$errors)
    {
        echo 'Created account sucessfully!';
    }
}
echo errors; 
```

# java - JavaFX中的按钮对齐

> ID：16083683
> 
> 赞同：7
> 
> 时间：2013-04-18T13:00:53.827
> 
> 标签：java, javafx-2, javafx

我用关闭按钮创建了这个 JavaFX 对话框：

```
final int xSize = 300;
final int ySize = 280;
final Color backgroundColor = Color.WHITE;
final String text = "SQL Browser Version 1.0";

final Stage aboutDialog = new Stage();
aboutDialog.initModality(Modality.WINDOW_MODAL);

Button closeButton = new Button("Close");
closeButton.setAlignment(Pos.BOTTOM_CENTER);

closeButton.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent arg0) {
        aboutDialog.close();
    }
});

Scene aboutDialogScene = new Scene(VBoxBuilder.create()
    .children(new Text(text), closeButton)
    .alignment(Pos.CENTER)
    .padding(new Insets(10))
    .build(), xSize, ySize, backgroundColor);

aboutDialog.setScene(aboutDialogScene);
aboutDialog.show(); 
```

我想在对话框底部显示按钮。我用它来设置对齐方式： `closeButton.setAlignment(Pos.BOTTOM_CENTER);`但由于某种原因，该按钮显示在对话框的中心。你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T07:24:42.967

如果您想为此使用 a `VBox`，您正在寻找的方法是：

[`VBox.setVgrow(node, Priority.ALWAYS);`](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/VBox.html#setVgrow%28javafx.scene.Node,%20javafx.scene.layout.Priority%29)

* * *

默认情况下，VBox 只会在放置位置的左上角将子项放在另一个下方。子项不会扩展以填充所有可用的垂直区域，除非您对具有无限制最大高度的子项设置 Vgrow 约束。

您可以通过几种不同的方式获得所需的布局（还有其他方式）：

1.  使用 a`StackPane`而不是 a`VBox`并将您的按钮与`StackPane.setAlignment(closeButton, Pos.BOTTOM_CENTER);`
2.  使用 a`AnchorPane`而不是 a`VBox`并适当地设置约束`AnchorPane`。
3.  使用一个[弹簧区域](http://www.oracle.com/technetwork/articles/java/javafxbest2-1634274.html)，它是一个空区域，可扩展以填充空白空间。

* * *

样品弹簧区域：

```
Region topSpring    = new Region();
Region bottomSpring = new Region();
Scene aboutDialogScene = new Scene(VBoxBuilder.create()
        .children(topSpring, new Text(text), bottomSpring, closeButton)
        .alignment(Pos.CENTER)
        .padding(new Insets(10))
        .build(), xSize, ySize, backgroundColor);
VBox.setVgrow(topSpring, Priority.ALWAYS);
VBox.setVgrow(bottomSpring, Priority.ALWAYS); 
```

* * *

调用`closeButton.setAlignment(Pos.BOTTOM_CENTER);`设置 closeButton 中事物（文本和图形）的对齐方式，而不是 closeButton 在其父级中的对齐方式（这是您真正想要的）。

* * *

为了理解布局约束是如何工作的，[ScenicBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)是一个很好的工具，[ScenicView](http://fxexperience.com/scenic-view/)可以帮助调试现有代码中的布局问题。

* * *

以下是您的布局的一些 FXML 示例，您可以将它们加载到 SceneBuilder 以查看不同布局选项的工作方式。

如果您愿意，可以使用 JavaFX API 在纯 Java 中轻松编写以下所有示例。我用 fxml 编写它们，因为它使布局易于在 SceneBuilder 中预览。

使用 StackPane 的 FXML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<StackPane id="StackPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="280.0" prefWidth="300.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <Label text="SQL Browser Version 1.0" />
    <Button mnemonicParsing="false" text="Button" StackPane.alignment="BOTTOM_CENTER" />
  </children>
  <padding>
    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
  </padding>
</StackPane> 
```

![fxml 的快照](https://i.stack.imgur.com/wxDS4.png)

一些春季地区也是如此：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<VBox alignment="CENTER" prefHeight="280.0" prefWidth="300.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <Region prefHeight="-1.0" prefWidth="-1.0" VBox.vgrow="ALWAYS" />
    <Label text="SQL Browser Version 1.0" />
    <Region prefHeight="-1.0" prefWidth="-1.0" VBox.vgrow="ALWAYS" />
    <Button mnemonicParsing="false" text="Close" />
  </children>
</VBox> 
```

与标签本身设置为扩展以填充 VBox 中的空白空间相同的事情：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<VBox alignment="CENTER" prefHeight="280.0" prefWidth="300.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <Label maxHeight="1.7976931348623157E308" text="SQL Browser Version 1.0" VBox.vgrow="ALWAYS" />
    <Button mnemonicParsing="false" text="Close" />
  </children>
  <padding>
    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
  </padding>
</VBox> 
```

# matlab - 为 MATLAB 图形创建类似 Photoshop 的黑白滤镜

> ID：16083685
> 
> 赞同：1
> 
> 时间：2013-04-18T13:00:59.073
> 
> 标签：matlab, image-processing, plot, photoshop

从 Matlab 图形创建灰度图像可能会很痛苦，因为您必须恰到好处地缩放颜色图和颜色限制，以便灰色颜色图获取所有细节。我已经意识到 Photoshop 非常非常适合这样做。您加载图像并使用黑白滤镜，然后更改红色、绿色、蓝色等的级别以适应图像的细节。请参阅下面的示例

[示例图像 - 应用在 MATLAB 图上的 Photoshop 黑白滤镜](https://i.imgur.com/sky7tGa.png)

我认为拥有一个可以调用的函数将非常有用，该函数接受与 Photoshop 所需的相同输入。这个函数可能是以下形式

```
 function bwfilter(h, C) 
```

其中 C 是一个矩阵，它接受红色、绿色、青色等百分比的输入，h 是一个图形句柄。运行该函数后，该图形被转换为黑白并保留为 Matlab 的 .fig 格式，或者如果不可能，则导出为 png、pdf 等，可能使用[Oliver Woodford 的出色 export_fig 函数](http://www.mathworks.com/matlabcentral/fileexchange/23629-exportfig)。

我不知道该怎么做。有人可以建议吗？当然，如果有人想迎接挑战……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:16:58.260

那这个呢：

```
function StackExchange_rgb2gray_rygcbm
% http://stackoverflow.com/questions/16083685/creating-a-photoshop-like-black-and-white-filter-for-matlab-figures

    function imGray = rgb2gray_rygcbm(imgRGB,Coefficients)
        %
        % imgRGB        source RGB image
        %
        % Coefficients  vector of color coefficients
        %                   [red yellow green cyan blue magenta]
        %
        %                   0.0 means that the corresponding color
        %                           will not contribute to resulting gray image
        %
        %                   1.0 means that the corresponding color intensity
        %                           will be unchanged on resulting gray image
        %
        %                   values higher than 1.0 might work but only if product
        %                           (Maximal_Color_Intensity * Color_Coefficient) <= 1
        %
        %                   rgb2gray_rygcbm(imgRGB,[1 1 1 1 1 1]) is equivalent to rgb2gray(imgRGB)
        %
        % Author: Andriy Nych
        %   Date: 2013/04/19
        %

        % we check what we are fed with
        if length(Coefficients)~=6
            error('Second argument MUST be 6 elements long!');
        end
        % extract color information from image
        imgHSV  = rgb2hsv(imgRGB);
        imgH    = imgHSV(:,:,1);
        imgS    = imgHSV(:,:,2);
        imgV    = imgHSV(:,:,3);
        % prepare some small stuff
        Coefficients(Coefficients<0) = 0;
        Coefficients    = [ Coefficients(:)' Coefficients(1) ];
        rygcbm          = linspace(0,1,7);
        % cook some "magic"
        imgHf           = imgH;
        for kk=1:6
            iidx            = (rygcbm(kk)<=imgH) & (imgH<rygcbm(kk+1));
            tx              = imgH(iidx);
            ty              = Coefficients(kk) + sin( (tx-rygcbm(kk))/(rygcbm(kk+1)-rygcbm(kk)) * pi/2 ).^2 * (Coefficients(kk+1)-Coefficients(kk));
            imgHf(iidx)     = ty;
        end
        % apply the "magic"
        imgV2   = imgV .* imgHf;
        imgN    = hsv2rgb( cat(3,imgH,imgS,imgV2) );
        % and this is it
        imGray  = rgb2gray(imgN);
    end

% Now we shall test the code

% First we generate an RGB image
figure;
surf(peaks(64));
colormap(hsv(256));
F = getframe(gcf);
close(gcf);
imgRGB = F.cdata;

% Now we create simple GUI and display the results
mm = 0.2;
figure('Color','w', 'Units','normalized', 'Position',[0 0 1 1]+[+1 +1 -2 -2]*mm);
imgGray = rgb2gray(imgRGB);
a1 = subplot(1,2,1);    h0 = imshow(imgRGB);    axis on;    title('Original image');
a2 = subplot(1,2,2);    h1 = imshow(imgGray);   axis on;    title('rgb2gray');
mm = 0.05;
set(a1, 'Units','normalized', 'Position',[0.0 0.0 0.5 1.0]+[+1 +1 -2 -2]*mm );
set(a2, 'Units','normalized', 'Position',[0.5 0.0 0.5 1.0]+[+1 +1 -2 -2]*mm );
pause(1);

% we convert the original image for different combination of the coefficients
Coeffs = [0 0 0 0 0 0];
NSteps = 10;
for ic=1:6
    % we'll change one coefficient at a time

    for k=0:NSteps
        % we modify the coefficient
        Coeffs(ic) = k/NSteps;
        % and use them for image conversion
        imgGray = rgb2gray_rygcbm(imgRGB,Coeffs);

        % now we show the result
        axis(a2);
        imshow(imgGray);   axis on;
        %set(h1,'CData',imgGray);
        title(a2, sprintf('r:%5.2f y:%5.2f g:%5.2f c:%5.2f b:%5.2f m:%5.2f',Coeffs) );

        drawnow;
        pause(.1);
    end
end

end 
```

# jsf - PrimeFaces 数据表滚动条

> ID：16083687
> 
> 赞同：7
> 
> 时间：2013-04-18T13:01:05.667
> 
> 标签：jsf, jsf-2, primefaces, css

我有一个带有 primefaces 数据表的表单，我在 css 中为它设置了列宽：

```
.idcol{width: 5%}
.prioritycol{width: 5%}
.titlecol{width: 30%}
.descriptioncol{width: 40%}
.actionscol{width: 10px} 
```

一切都很好，但是当我添加`scrollable="true"`属性以获得可滚动的数据表时，结果最糟糕：

![在此处输入图像描述](https://i.stack.imgur.com/Fv8wS.png)

这是数据表的声明：

```
<p:dataTable  id="dtable" var="todos" value="#{todo.todoList}" scrollable="true" 
                             resizableColumns="false" scrollHeight="300" lazy="true"
                             styleClass="idcol,prioritycol,titlecol,descriptioncol,actionscol"> 
```

问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:35:06.993

您可以通过这种方式设置列宽

```
<p:column headerText="Type"  width="70%"> 
```

或者您可以通过这种方式指定样式类

```
<p:column headerText="Type"  styleClass="idcol"  > 
```

你可以添加这样的滚动宽度

```
<p:dataTable var="data"  rowKey="#{data.key}" style="width:70%" 
sortOrder="ascending"
selection=""
value=""
selectionMode="single"
scrollable="true" 
scrollWidth="71%" 
scrollHeight="3%"
>

<p:ajax event="rowSelect" listener=""
update="" />

<p:column headerText="Type"  styleClass=""  sortBy="" width="70%">
<h:outputText id="dataTYpe" value="" />
</p:column>

<p:column headerText="Category"  sortBy="" width="30%">
<h:outputText value="" />
</p:column>

</p:dataTable> 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-23T10:17:27.987

我找到了解决方案，您必须同时编辑 css 和 JSF 代码并查看结果，对于我的问题，我逐步编辑了 css 和 jsf 代码，这是对我有用的代码：

CSS：

```
.idcol{width: 5%}
.prioritycol{width: 5%}
.titlecol{width: 30%}
.descriptioncol{width: 40%}
.actionscol{width: 20%} 
```

表格 ：

> 1.  第 1 列：宽度 =“25”
> 2.  第 2 列：宽度 =“55”
> 3.  第 3 列：宽度 =“369”
> 4.  第 4 列：宽度 =“469”
> 5.  第 5 列：宽度 =“170”

# sql - 获取两种不同条件的计数

> ID：16083691
> 
> 赞同：3
> 
> 时间：2013-04-18T13:01:09.233
> 
> 标签：sql, postgresql

假设我有一个`states`如下表：

```
create table states (id int4 unique not null, state int4 not null); 
```

我想获取状态为 1 的表中的行数，以及状态为 2 的表中的行数。在两个单独的查询中执行此操作很简单：

```
select count(*) from states where state = 1;
select count(*) from states where state = 2; 
```

但是将整个表遍历两次似乎很愚蠢。有人能想出一些巧妙的技巧，让我在单个语句中获得相同的信息并且只通过表格一次吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:03:34.663

```
select
    count((state = 1)::integer or null) state_1,
    count((state = 2)::integer or null) state_2
from states 
```

或者

```
select
    sum((state = 1)::integer) state_1,
    sum((state = 2)::integer) state_2
from states 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T13:03:52.523

您可以将 a`CASE`与聚合函数一起使用：

```
select
  sum(case when state=1 then 1 else 0 end) State1,
  sum(case when state=2 then 1 else 0 end) State2
from states 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:22:39.827

```
SELECT [state], COUNT(*) TotalRows 
FROM [Expense].[dbo].[state]
GROUP BY [state] 
```

假设您使用的是 SQL Server

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:28:14.387

```
select count(*) from states group by state having state = 1 or state=2; 
```

使用 SQL 分组方式

# c# - 打破对表单 C# 的引用

> ID：16083701
> 
> 赞同：0
> 
> 时间：2013-04-18T13:01:32.123
> 
> 标签：c#, pass-by-reference

我有一个许可证项目（数据库交互项目），我想从从数据库加载数据的表单中删除所有引用，因为我加载了大量数据并且内存使用率很高。我分析了应用程序（.Net Memory Profiler，Ants）并获得了连接到该表单的引用：

`Module1.cs / Class1 -> Module2.cs / Class2 with the reference ref 1 written on the arrow`

我必须在不进行重大更改的情况下删除它们，并且该程序应该仍然可以工作:)。如果我将引用设置为 null 程序会崩溃，因为它可能会再次需要这些引用 问题是，我认为，显示的引用可以在与 Profiler 显示的模块不同的模块中声明，从而使其更难遵循。

在 Data.cs 我有`Data`类并在其中声明

```
mVController = table.Resolve<ImVController>(); 
```

`mVController` - 属于类型`ImVController`（与名称无关） `table` - 属于类型- 是声明 `IUnityController` `ImVController`的接口 - 使容器与 mVController 具有相同类型`mVController``Resolve`

我想知道我是否`mVController = null`在不再需要时放入 GC 输入/对象将有资格收集？

或者`table`将持有对类型对象的引用`ImVController`？我猜它会符合条件。

如果声明了某个对象怎么办：

`object newObject = DomainObjectFactory.GetObject(typeOfObject);`

然后它使用 mVController：

`(newObject as Class1).MethodFromClass1(mVController.Property1, mVController.Property2, ...);`

我是否摆脱了这样的参考：

`object = null;`那么它会在某个时间被收集吗？

另一个问题：引用是否应该在方法中与 ref 一起传递（例如`public void method(ref Type obj)` ，然后在方法中 make obj = null; 以便对象也为 null？来自所有项目的所有 ref 都指向 null> 以便 GC 可以收集？和然后也使用 ref 调用该方法：`method (ref obj)`何时不再需要该对象并且应该超出范围？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:09:21.297

> 如果我在不再需要时放置 mVController = null GC 输入/对象是否有资格收集？

取决于 IUnityController 的实现：如果它拥有 ImVController，则重置 mVController 将没有利润。无论如何，在您的应用程序内存不足之前，GC 不会收集垃圾。

> 使 obj = null; 在方法中，使对象也为空

如果您的对象被其他变量/对象引用，GC 将不会收集它。如果没有，您的对象将被收集。一段时间。

# linux-device-driver - DMA Scatter-Gather 和连续内存？

> ID：16083703
> 
> 赞同：1
> 
> 时间：2013-04-18T13:01:39.390
> 
> 标签：linux-device-driver, dma

我知道在 DMA 中使用 scatter-gather 是为了分散 - 从小内存段收集数据，因为不容易找到大的连续内存块。那么如果我需要做 SG，我应该使用 kmalloc 分配小块内存吗？我可以一次性为一个描述符分配的最大大小是多少？SG功能还有其他用途吗？

# jquery - Ajax 请求在调用图像处理程序时不起作用

> ID：16083705
> 
> 赞同：1
> 
> 时间：2013-04-18T13:01:41.560
> 
> 标签：jquery, asp.net, ajax, generic-handler

我的按钮单击事件处理程序是这样的；

```
$(".imgRefreshContact").click(function () {
       $.ajax({
             url: "/Presentation/Site/Handlers/RefreshCaptcha.ashx",
             type: "POST",
             cache: false,
             async: true,
             success: function () { }
            });
       $("#imgCaptcha").attr('src', '/Presentation/Site/Handlers/CreateCaptcha.ashx');
 }); 
```

RefreshCaptcha 处理程序；

```
public void ProcessRequest(HttpContext context)
    {
        context.Session["CaptchaMetin"] = ConfirmCode.GenerateRandomCode();
    } 
```

CreateCapthca 处理程序；

```
public void ProcessRequest(HttpContext context)
    {
        ConfirmCode cc = new ConfirmCode(context.Session["CaptchaMetin"].ToString(), 136, 36);

        context.Response.Clear();
        context.Response.ContentType = "image/jpeg";

        cc.Image.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);

        cc.Dispose();
    } 
```

当我单击 img 按钮时，它在 Chrome 和 Firefox 中完美运行，但在 IE 9 中失败 调试器进入 RefreshCaptcha 处理程序但未进入 CreateCaptcha 处理程序。因此，IE 发出一次 ajax 请求，而不是第二次。

IE和ajax请求有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T08:44:04.627

使用 IE 开发者工具 (F12) 调试请求。IE 通常会缓存请求，如果您不更改任何内容，它只会返回 304 状态代码（未修改）。为防止这种情况，请在您的 ajax 调用中添加一个随机查询字符串参数。就像是：

```
url: "/Presentation/Site/Handlers/RefreshCaptcha.ashx?rnd=" + Math.Random() 
```

# typescript - PHPStorm IDE TypeScript 文件观察器

> ID：16083706
> 
> 赞同：2
> 
> 时间：2013-04-18T13:01:44.023
> 
> 标签：typescript, filesystemwatcher, phpstorm

默认情况下，在 PHPStorm 6 中，编译后的 *.js 与 *.ts 文件创建在同一文件夹中。

我需要的是编译后的 *.js 和 *.d.js 与 *.ts 文件位于不同的子目录中。

在简历中：

*   我有根文件夹“项目”

*   我有一个所有 *.ts 文件所在的子文件夹“ts”。

*   我有一个子文件夹“scripts”，我希望编译后的 *.js 和 *.d.js 在其中。

如何使用 PHPStorm TypeScript 文件观察器完成此操作？

我在 File Watcher 对话框的 Output 字段中尝试了几个宏，例如：

```
$FileParentDir$/scripts/$FileNameWithoutExtension$.js:$FileParentDir$/scripts/$FileNameWithoutExtension$.js.map 
```

但他们都没有工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:13:19.930

File Watcher 配置中的“输出路径”字段只是告诉 IDE 在哪里查找创建的文件（用于自动同步），对正在运行的程序没有任何意义。TypeScript 编译器有 --out 选项，它告诉编译器将生成的文件放在哪里

请尝试以下方法：

参数： --sourcemap $FileName$ --out $ProjectFileDir$/scripts/$FileNameWithoutExtension$.js

工作目录：$FileDir$

输出路径：$ProjectFileDir$/bin/$FileNameWithoutExtension$.js:$ProjectFileDir$/bin/$FileNameWithoutExtension$.js.map

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T14:02:01.730

感谢@CrazyCoder 的参考资料，我（终于！）设法使它正常工作。

您必须在`Arguments`参数中指定输出文件路径，而不是在`Output`路径中。

诀窍是`--out`不接受文件夹路径，而是您必须使用文件路径。

有关完整功能配置的参考，请参见图片。

在此配置中，组织是：

*   `ts/`:`*.ts`文件。

*   `scripts/`: 编译`*.js`& `*.js.map`&`*.d.ts`文件。

![在此处输入图像描述](https://i.stack.imgur.com/vu1h2.png)

**注意：**在较新版本的编译器中，正确的参数是`declaration`（不带尾随`s`）而不是`declarations`。

# youtube - 如何使用 Flash builder 4.6 在 youtube 无铬播放器上显示自定义播放器控件？

> ID：16083709
> 
> 赞同：3
> 
> 时间：2013-04-18T13:01:54.657
> 
> 标签：youtube, flex4, youtube-api, flash-builder, flex4.6

我有一个 View 组件，它使用“ [http://www.youtube.com/apiplayer?version=3&modestbranding=1 ” url 初始化](http://www.youtube.com/apiplayer?version=3&modestbranding=1)[youtube cloud api](https://developers.google.com/youtube/flash_api_reference)并全屏播放视频。它有播放、暂停和进度条，但我试图将“倒带”、“播放/暂停”、“前进”和交互式进度条放在无铬播放器本身的顶部（带有相同图像按钮的透明弹出窗口)，如下图所示。 `s:actionContent`![在此处输入图像描述](https://i.stack.imgur.com/GngVH.png)

初始化 youtube api 的我的视图组件没有任何项目。（删除`s:actionContent`以尝试弹出窗口）

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="YoutubeVideoPlay" viewActivate="init()" >
    <fx:Script source="YoutubePlayer.as"/>
    <fx:Script>
        <![CDATA[
            //navigator.addEventListener(TouchEvent.TOUCH_BEGIN,showPlayerControl);     How to add a event listener on the youtube player?
            public function showPlayerControl():void{
                PopUpManager.addPopUp(PlayerControls,player);
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</s:View> 
```

当用户点击正在播放的视频时，需要帮助这个弹出管理器出现在无铬播放器的顶部。

```
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" width="400" height="300">
    <fx:Script source="../YoutubePlayer.as"/>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        global
        {
            modal-transparency: 0.0;
            modal-transparency-color: white;
            modal-transparency-blur: 0;
        }
    </fx:Style>
    <fx:Script>
        <![CDATA[               
            import mx.managers.PopUpManager;
            /*[Bindable][Embed(source="view/assets/images/play32.png")]
            public static var iconPlay : Class;*/
            [Bindable][Embed(source="view/assets/images/pause32.png")]
            public static var iconPause : Class;
            [Bindable][Embed(source="view/assets/images/forward32.png")]
            public static var iconForward : Class;
            [Bindable][Embed(source="view/assets/images/rewind32.png")]
            public static var iconRewind : Class;               
            //addEventListener(FlexMouseEvent.MOUSE_DOWN_OUTSIDE,removePlayerControls);
            /*private function removePlayerControls(event:FlexMouseEvent):void {
            PopUpManager.removePopUp(this);
            }*/             
            public function closeAndBackup():void {
                dispose();
                navigator.popView();                                
            }
            public function initAndPlay():void {                
                player.playVideo();

            }               
            private var _duration:String = "";

            [Bindable]
            public function get duration():String {
                return _duration;
            }               
            public function set duration(val:String):void {
                _duration = val;

            }
            protected function ytVideoSlider_changeHandler(event:Event):void
            {
                // TODO Auto-generated method stub
                trace(event.currentTarget.value);
                player.seekTo(event.currentTarget.value,true);              
            }
        ]]>     
    </fx:Script>
    <s:VGroup>
        <s:HGroup>
            <s:layout>
                <s:HorizontalLayout paddingTop="10" paddingLeft="10"/>
            </s:layout>
            <s:HSlider id="ytVideoSlider" 
                       liveDragging="true"
                       dataTipPrecision="1"
                       maximum="{duration}"
                       change="ytVideoSlider_changeHandler(event)"/>
            <s:Label text="{Math.round(ytVideoSlider.value)}"/>
        </s:HGroup>
        <s:Button icon="{iconRewind}" click="player.playVideo()"/>
        <s:Button icon="{iconPause}" click="player.pauseVideo()"/>
        <s:Button icon="{iconForward}" click="closeAndBackup()"/>
    </s:VGroup>
</s:Panel> 
```

任何帮助将不胜感激。:)

我刚刚开始使用 Flash Builder 的 spark 组件，如果我的问题太蹩脚，请原谅我。

或者是否有任何链接/教程可用于将播放器控件放置在无铬 youtube 播放器之上？

**更新：我能够解决我的问题，并提供了我的解决方案**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:27:42.980

您应该能够向整个视图添加点击侦听器。虽然我以前从未使用过这个 API，但我想它看起来像这样：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
xmlns:s="library://ns.adobe.com/flex/spark" title="YoutubeVideoPlay"
viewActivate="init()" click="showPlayerControl()">

<fx:Script source="YoutubePlayer.as"/>
<fx:Script>
    <![CDATA[
        public function showPlayerControl():void{
            PopUpManager.addPopUp(PlayerControls,player);
        }
    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T19:25:05.503

所以你快到了。您需要记住的是，YouTube 播放器有自己的交互，例如，当用户单击视频时，它通常会暂停/恢复。现在您可以通过`Sprite`在视频顶部放置一个不可见的来解决此问题，因为这将允许您捕获用户的鼠标移动和点击。

唯一的问题是当前的自动播放状态；目前（以及我猜未来）自动播放不算作视频的观看次数。用户需要按下 YouTube 视频上的播放按钮才能真正将其计为一次观看。

所以我所做的只是在`Sprite`播放开始后添加这个不可见的。当用户点击你的 invisible 时，你也可以很聪明地向播放器本身发送暂停/恢复事件`Sprite`。

关于你所追求的 UI 组件：它们很容易组合在一起，你总是可以获取标准的 UI Flash/Flex 组件并将它们连接到播放器 API（我看到你已经开始了）；不过，在头脑中设计而不是在代码中一遍又一遍地勾画出 UI 总是一个好主意。

作为脚注：随时欢迎您使用我在 github 上的 YouTube 播放器中间件类：[https ://github.com/ahmednuaman/AS3/blob/master/com/firestartermedia/lib/as3/display/component/video /YouTubePlayerAS3.as](https://github.com/ahmednuaman/AS3/blob/master/com/firestartermedia/lib/as3/display/component/video/YouTubePlayerAS3.as)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T05:55:40.667

解决我的问题

我有一个`PlaylistsView.mxml`包含所有视频的列表。单击后，它会推送一个名为的新视图`YtPlayView.mxml`

```
<!--YtPlayView.mxml-->  
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:popup="views.popup.*"
    title="{data.title}" viewActivate="init()" viewDeactivate="deactivateYoutubePlayer()">
    <fx:Script source="ytfeeds/YoutubePlayer.as"/>
    <fx:Script>
        <![CDATA[
            public function deactivateYoutubePlayer():void{
                PopUpManager.removePopUp(ytcPopup);
                dispose();
            }
        ]]>
    </fx:Script>
</s:View> 
```

在`YoutubePlayer.as`中，`onPlayerReady(event:Event)`我添加了一个 mouseclick 事件监听器 `player.addEventListener(MouseEvent.CLICK,showPlayerControl);`

```
 <!--YoutubePlayer.as contents-->
public function showPlayerControl(event:MouseEvent):void{
    ytcPopup=new PlayerControls();
    ytcPopup.player=player;
    ytcPopup.duration=data.duration;                
    ytcPopup.currentPosition="00:00:00";        
    ytcPopup.open(this,true);
    ytcPopup.width = this.stage.width;
    ytcPopup.setStyle("modalTransparency",0);
    ytcPopup.setStyle("modalTransparencyBlur",3);
    ytcPopup.setStyle("modalTransparencyColor", "#ff0000");
    if(ytcPopup.player.getPlayerState()==1){        
        ytcPopup.playPauseBtn.setStyle("icon",ytcPopup.iconPause);
    }
    else if(ytcPopup.player.getPlayerState()==2){       
        ytcPopup.playPauseBtn.setStyle("icon",ytcPopup.iconPlay);
    }
    ytcPopup.y = this.stage.height-195;
    PopUpManager.bringToFront(ytcPopup);        
    if(player.getCurrentTime()!=0)
        ytcPopup.ytVideoSlider.value=player.getCurrentTime();       
} 
```

这给了我类似下面的东西（这是一个纵向视图，在横向视图上它位于视频的顶部）

如果有人想要更多源代码或帮助，我很乐意提供帮助:) 只需发表评论。

![在此处输入图像描述](https://i.stack.imgur.com/luhHt.png)

# c++ - 使用成员变量的 Node.js 插件回调

> ID：16083717
> 
> 赞同：1
> 
> 时间：2013-04-18T13:02:06.797
> 
> 标签：c++, node.js, v8

所以我正在为 node.js 制作一个插件，如下所示：[http](http://nodejs.org/api/addons.html#addons_wrapping_c_objects) ://nodejs.org/api/addons.html#addons_wrapping_c_objects 。但是：我的班级有一个 pthread 永远循环并通过[http://nikhilm.github.io/uvbook/threads.html](http://nikhilm.github.io/uvbook/threads.html)`uv_async_send()`中的建议执行回调。这个回调函数需要访问非静态类变量，我通过设置:和回调函数:来做到这一点，这样我就可以通过: 访问数据。`async.data = (void*) this;``MyClass* obj = (MyClass*)(handle->data);``obj->myvar`

但是会发生什么，回调函数是在对象已经被破坏之后调用的。我想知道如何防止这种情况发生，最好不需要额外的 javascript 代码。

如果您想知道为什么回调需要访问成员变量：它是一个由单独线程填充的缓冲区，它作为参数传递给 javascript 回调。

提前致谢。

# javascript - 编译转换：运行 TypeLite.tt 时找不到类型或命名空间名称

> ID：16083724
> 
> 赞同：9
> 
> 时间：2013-04-18T13:02:31.473
> 
> 标签：javascript, asp.net-mvc, entity-framework, typescript

免责声明：我对我在这里使用的每一项技术都是新手，所以如果我遗漏了明显的东西，请原谅我......

我开始将 MVC 4 与 Entity Framework 5 和 Web API 搞混了，我想用 TypeScript 和 Knockout 来做一些 UI 工作。我找到了 TypeLite 项目，它将采用我的 EF 模型并为我生成 TypeScript 接口，以便所有内容都是“强”类型的。

我的解决方案包括 3 个项目：

*   MyApp.dll = 包含所有 MVC 工作
*   MyApp.Domain.dll = 包含 EF 域模型
*   MyApp.WebAPI.dll = 包含 WebAPI 工作

我将 TypeLite 引用添加到 MyApp 项目（通过 NuGet），并将 TypeLite.tt 修改为：

```
<#@ template debug="false" hostspecific="True" language="C#" #>
<#@ assembly name="$(SolutionDir)packages\TypeLite.0.8.2\lib\net40\TypeLite.dll" #>
<#@ assembly name="$(TargetDir)$(TargetFileName)" #>
<#@ import namespace="TypeLite" #> 
<#@output extension=".d.ts"#>
<#= TypeScript.Definitions()
.For<MyApp.Domain.Models.Country>()
.For<MyApp.Domain.Models.State>()
.For<MyApp.Domain.Models.Address>()
.For<MyApp.Domain.Models.Contact>() #> 
```

当我在 TypeLite.tt 上“运行自定义工具”时，出现错误：

> 编译转换：找不到类型或命名空间名称“MyApp”（您是否缺少 using 指令或程序集引用？）

我尝试添加以下行：

```
<#@ import namespace="MyApp" #>
<#@ import namespace="MyApp.Domain" #>
<#@ import namespace="MyApp.Domain.Models" #> 
```

不过，它仍然不断给我同样的错误。我确定我遗漏了一些微不足道的东西，我仍然在谷歌博士为我找到的数千篇文章中挑选参考搜索，但我希望这里有人可以帮助我找到光明。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T13:36:18.070

驱动 TypeScript 接口生成的 T4 模板引擎作为一个单独的进程运行，因此即使 MyApp.WebAPI 项目引用了 MyApp.Domain.dll，T4 也不知道它。

您应该将指向 MyApp.Domain.dll 的程序集指令添加到 TypeLite.tt。它是常规 C# 项目中“添加引用”命令的 T4 模拟。

```
<#@ assembly name="$(SolutionDir)path\to\MyApp.Domain.dll" #> 
```

`$(SolutionDir)`是一个变量，其中包含解决方案目录的路径。

# javascript - 当事件用 javascript 停止时从函数中确定

> ID：16083726
> 
> 赞同：3
> 
> 时间：2013-04-18T13:02:32.790
> 
> 标签：javascript, javascript-events, jquery

简化场景：

*   我在按钮上有一个点击事件
*   在事件中我调用了一个函数 X
*   函数 X 返回一个值
*   点击事件使用接收到的数据改变 DOM（实际上是渲染一个 jQuery 模板）

示例代码：

```
$("button").click(function()
{
    var response = FunctionX();

    doTemplateRendering(response); //(*)
});

function FunctionX()
{
    //some code

    return some_value;

    //The click event has finished, so now make a little adjust to the generated dom (*)
} 
```

问题是：

*   我有办法确定点击停止表单的时间`FunctionX()`吗？
*   或者有没有一种方法可以`doTemplateRendering()`触发我可以从中捕获的东西，`FunctionX()`所以如果我返回一个值并不重要，因为在某些时候我将能够执行我需要的额外代码

这背后的原因是这是框架的一部分，我无法更改点击事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:06:27.910

您不能从函数返回值，然后在同一个函数中进行进一步处理。但是您可以使用以下方式安排一些代码稍后运行`setTimeout()`：

```
function FunctionX()
{
    //some code    

    setTimeout(function() {
        //The click event has finished, so now make a little adjust to the generated dom (*)
    }, 5);

    return some_value;
} 
```

JS 是单线程的（如果我们忽略 web-workers），所以你传递给 timeout 的函数在点击事件完成之前不会被执行。

或者，您可以将第二个单击处理程序绑定到同一个按钮并在那里进行额外的处理 - jQuery 保证事件处理程序（针对相同的事件和元素）将按照它们被绑定的顺序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:12:13.233

不确定这是否适合您，但您不能使用传递给 FunctionX 的回调函数吗？

```
$("button").click(function()
{
    var fn = funcion(){response){
         doTemplateRendering(response);
    }
    FunctionX(fn);

});

function FunctionX(fn)
{
    //some code

    fn(some_value);

    //The click event has finished, so now make a little adjust to the generated dom (*)
} 
```

# css - 在 wordpress 中，子菜单无法正确显示

> ID：16083736
> 
> 赞同：1
> 
> 时间：2013-04-18T13:02:59.183
> 
> 标签：css, wordpress, menu

请参阅我的以下代码。那就是首页的菜单，

```
<li id="menu-item-47" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-47">
<a href="http://localhost/project/service/">Service</a>
    <ul class="sub-menu">
        <li id="menu-item-65" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65"><a href="http://localhost/project/services/voice/">Voice</a></li>
        <li id="menu-item-27" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-27"><a href="http://localhost/project/services/data/">Data</a></li>
    </ul>
</li> 
```

它显示正确。主菜单（服务）有 2 个子菜单（语音和数据）。

问题是，它只显示最后一个菜单项。（`data`只显示。没有显示`voice`）。见下图，

请参阅[以下链接中的图片](https://wordpress.stackexchange.com/questions/96305/sub-menu-not-displaying-properly)

如果我再添加一个子菜单，则仅显示第三个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:16:54.083

```
.main-navigation ul li ul li {
    display: block;
} 
```

这应该修复您的子菜单。问题是子菜单的列表项被设置为内联块并相互重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:22:19.610

您的子菜单`ul`和子菜单`li`都从顶级菜单继承宽度和显示类型样式，这些样式对于子菜单不正确。

```
.main-navigation ul li ul li {
    display: block;
    width: 100%
}

.main-navigation ul li ul {
    width: 100%
} 
```

# android - 如何让联系人发送短信

> ID：16083741
> 
> 赞同：0
> 
> 时间：2013-04-18T13:03:10.037
> 
> 标签：android, sms, android-contentprovider, android-contacts

我有一个定义一个词的应用程序，然后通过 SMS 发送定义。问题是用户必须输入电话号码。我在想也许该应用程序应该调出联系人列表，以便用户可以选择一个联系人，然后用户可以将消息发送给该联系人。这是我的 SMSActivity 代码：

```
public class SMSActivity extends Activity 
{

String APPTAG = "SMSTransmit";

//Private static strings:
private final static String SENT = "SMS_SENT";
private final static String DELIVERED = "SMS_DELIVERED";

private Button btnSend;
private Button btnExit; 
private Button btnClear;
private EditText etPhoneNumber;
private EditText etUserMessage;

//Private BroadcastReceiver member variables:
private SMSDispatchReceiver sendReceiver = null;
private SMSReceiptReceiver receiptReceiver = null;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sms);

    Bundle extras = getIntent().getExtras();
    String definiedWord = null; 
    if (extras != null) 
    {
        definiedWord = extras.getString("DEFINITION"); 
    }
    else 
    {
        definiedWord = "None"; 
    }

    Log.d("recievedAGAIN", definiedWord);
    Log.v(APPTAG, "MainActivity: onCreate() called");

    //Create a new broadcast receiver for sending the SMS
    sendReceiver = new SMSDispatchReceiver();

    //Create a new broadcast receiver for receipt of the send SMS 
    receiptReceiver = new SMSReceiptReceiver();

    //Register the new receivers (as new IntentFiler() objects):
    registerReceiver(sendReceiver, new IntentFilter(SENT));
    registerReceiver(receiptReceiver, new IntentFilter(DELIVERED));

    //Get the view objects:
    btnSend = (Button) findViewById(R.id.btnSend);
    btnClear = (Button) findViewById(R.id.btnClear);
    btnExit = (Button) findViewById(R.id.btnExit);
    etPhoneNumber = (EditText) findViewById(R.id.etNumber);
    etUserMessage = (EditText) findViewById(R.id.etMessage);

    //Disable the soft keyboard (this is only in general):
    InputMethodManager inMethodMgr =                                                                (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    inMethodMgr.hideSoftInputFromInputMethod(etPhoneNumber.getWindowToken(), 0);
    inMethodMgr.hideSoftInputFromInputMethod(etUserMessage.getWindowToken(), 0);

    //Set the hint for the EditText boxes:
    etPhoneNumber.setHint("Enter phone number (Default = 5556)");
    etUserMessage.setHint(definiedWord);

    //Create an click event listener for the Send button (OnClickListener):
    btnSend.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {

            String strMessage = null;
            String strNumber = null;

            //Get the phone number from the EditText box:
            strNumber = etPhoneNumber.getText().toString();

            //Check the phone number:
            if (strNumber.length() <= 0) 
            {

                //No phone number, then get the default (5556):
                strNumber = SMSProperties.getPhoneNumber();
            }

            //Get the message from the EditText box:
            strMessage = etUserMessage.getText().toString();

            //Check the message contains some content:
            if (strMessage.length() > 0) 
            {

                //Sent the SMS to the phone number 
                sendSMS(strNumber, strMessage);  

            } else 
            {

                //Warn the user and reset the focus / hint:
                Toast.makeText(getBaseContext(), "No message text! Please      enter some text for the SMS!!", Toast.LENGTH_SHORT).show();
                etUserMessage.setHint("Enter message text here . . . ");
                etUserMessage.requestFocus();

            }

        }
    });

    //Create an click event listener for the Clear button (OnClickListener):
    btnClear.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            //Clear the appropriate EditText box:
            if (etUserMessage.isFocused()) {

                //Clear the text in the user message EditText box:
                etUserMessage.setText("");

                //Set the hint in the user message EditText box:
                etUserMessage.setHint("Enter message text here . . . ");

            } else if (etPhoneNumber.isFocused()) {

                //Clear the text in the phone number EditText box:
                etPhoneNumber.setText("");

                //Set the hint in the phone number EditText box:
                etPhoneNumber.setHint("Enter phone number (Default = 5556)");
            }
        }
    });

    //Create an click event listener for the Exit button (OnClickListener):
    btnExit.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View v) 
        {

            //Finish the activity:
            //NOTE: As this is the main activity it will cause onDestroy() to be called!
            finish();
        }
    });

}

//Method to send an SMS message to another device:
private void sendSMS(String strNum, String strMsg)
{                   
    //TODO: Create a pending intent for the SMSDistatchReceiver (SENT):
    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent("SENT"), 0);

    //TODO: Create a pending intent for the SMSReceiptReceiver (DELIVERED):
    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent("DELIVERED"), 0);
    //Get a default SmsManager object:
    SmsManager smsMgr = SmsManager.getDefault();

    //TODO: Send the SMS using the SmsManager:  
    smsMgr.sendTextMessage(strNum, null, strMsg, sentPI, deliveredPI);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:30:07.957

考虑联系人是一个显示联系人列表的按钮

```
contact.setOnClickListener(new View.OnClickListener() {             
            @Override
            public void onClick(View g) {
                Intent q = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI);
                startActivityForResult(q, 1001);  

            }
        }); 
```

并处理结果（由 1001 引用）使用这个：

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {  
        super.onActivityResult(reqCode, resultCode, data);  

        if (resultCode == Activity.RESULT_OK) {  
            // getting the URI from result for further working
            Uri contactData = data.getData();
            Cursor c =  managedQuery(contactData, null, null, null, null);

            if (c.moveToFirst()) {

              String  id =c.getString(c.getColumnIndexOrThrow(ContactsContract.Contacts._ID));

              String hasPhone =c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

              if (hasPhone.equalsIgnoreCase("1")) {
              Cursor phones = getContentResolver().query( 
                              ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null, 
                              ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ id, 
                              null, null);
                    phones.moveToFirst();
                      //this string will hold the contact number
                      String cNumber = phones.getString(phones.getColumnIndex("data1"));
                      //this string will hold the contact name
                      String cName = c.getString(c.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME));

                  }

            }} 
        } 
```

# paypal - Paypal API 支持交易平台用例

> ID：16083743
> 
> 赞同：0
> 
> 时间：2013-04-18T13:03:14.317
> 
> 标签：paypal, payment-gateway, paypal-ipn

## 用例

1.  一个销售商品的交易平台，每个订阅者都可以购买和销售（例如 eBay）
2.  交易平台为每笔交易收取佣金

## 动作流程

1.  买方执行购买
2.  资金从买家账户转移到交易平台账户
3.  **PayPal 收取交易佣金**
4.  交易平台收取佣金
5.  交易平台将提醒资金从其账户转移到卖家账户
6.  **PayPal 收取交易佣金**

## 手头的问题

1.  从上面的“行动流程”中可以看出，PayPal 将收取两次佣金

2.  这种复合交易模型使实施/成本相当复杂。

## 需要反馈

*   有没有可以避免这种情况的支付模式？
*   是否有任何支付模式，其中每笔交易总金额的子集被发送到交易平台账户？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:02:16.293

您可以为此使用[自适应付款](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/gs_AdaptivePayments)。使用自适应付款，您可以拆分付款并设置谁支付什么费用。

# doctrine-orm - 教义：实体管理器是否在刷新更改之前更新内存关系？

> ID：16083745
> 
> 赞同：2
> 
> 时间：2013-04-18T13:03:19.570
> 
> 标签：doctrine-orm, doctrine

假设我有 2 个具有**双向关系**的类（Person，House） （一个人有一个房屋列表，一个房子有一个所有者）。

假设我在**Person**类中有以下内容：

```
$houses = new ArrayCollection();

public function removeHouse(id){
    $this->houses->remove(id);
} 
```

假设您有一个拥有房子的**人**（姓名：**John ）并做了以下事情：**

```
$john = $em->find('User', $johnsId);
$johnsHouse = $john->getHouse(0); // this would give you John's first house

echo $house->getOwner()->getName(); // this would echo "John"

$user->removeHouse(0); // this would remove the house from John's list

echo $house->getOwner()->getName(); 
```

这是在实体管理器刷新任何内容之前。所以我的**第一个问题：最后一个回声会产生什么？空或“约翰”**

然后出现冲洗...

```
$em->flush();

echo $house->getOwner()->getName(); 
```

**第二个问题：现在回声会产生什么？空还是约翰？**

根据我从 Doctrine 的文档中了解到的情况，这现在应该产生 null，对吗？

我的目标是让双向关系的另一侧反映在冲洗发生之前发生在这一侧的变化。换句话说，我希望第一个问题的回声产生空值。

如果实体管理器在刷新之前没有自动完成此操作（第一个问题的答案是“John”），**我是否必须通过修改 removeHouse 函数手动执行另一侧的更新来修复它？**

```
public function removeHouse(id){
    $house = $this->houses->remove(id);
    $house->setOwner(null)
} 
```

当实体管理器尝试在刷新时进行更改时，这可能会产生任何复杂性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T12:13:22.667

在偶然发现文档中的正确页面后，我发现了我的问题的答案。作为开发人员，您需要自己保持关系同步。

见： [http ://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html)

# c++ - 两个四元数之间的标量角

> ID：16083746
> 
> 赞同：2
> 
> 时间：2013-04-18T13:03:22.633
> 
> 标签：c++, c, math

是否可以计算两个四元数之间的差异并将其表示为标量？

我想提供一个 API，可用于设置以度（或弧度）为单位的最小阈值角度。并使用该值通知 3D 对象在任何轴上的旋转超过阈值。

# php - PHP FORM 重新加载到加载 div

> ID：16083748
> 
> 赞同：0
> 
> 时间：2013-04-18T13:03:23.973
> 
> 标签：php, jquery, forms, event-listener

我使用 Jquery 函数将 Php 内容加载到 Indexpage 上的 div 中（有点像母版页）但我必须制作一个电子邮件表单（我使用提交按钮）但现在我希望它重新加载到 div 而不是整个页？

这是我的菜单脚本（有点尝试过各种事情）这都位于 INDEX PAGE.PHP

```
 $('.menut').click(function () {
       var phpFile = $(this).attr('id') + '.php';
       $('#box1').load(phpFile, function () {

               $('#contactForm').click(function (e) {
                   e.preventDefault();
                   var data = $(this).serialize();
                   $('#box1').load($(this).attr('action'), data);

   });
}); 
```

这位于 Form.php 页面上

> ```
>  <form id="contactform" method="POST" action="insch.php"> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:07:39.903

我认为你应该使用

```
$('#contactform').submit(function (e){
   e.preventDefault();
   $('#box1').load(....)// 
   return false;
}); 
```

这将说明当提交表单时，停止浏览器执行它的默认操作，然后返回 false，以停止任何其他操作（如果有）。

# actionscript-3 - 无法 getChildByName 八哥阶段

> ID：16083753
> 
> 赞同：0
> 
> 时间：2013-04-18T13:03:32.867
> 
> 标签：actionscript-3, object, stage

我正在尝试从名为“bullet”的外部类中获取对放置在名为“_shooterHero”的八哥舞台上的对象的引用。

我曾尝试将 getChildByName 用于：

`starling.core.stage`和`starling.current.nativeStage`，但没有任何运气

现在的代码：

```
var hero= Starling.current.stage.getChildByName("_shooterHero");
trace (hero.name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-04T22:10:02.497

有几种方法可以解决您的问题：

1.  使英雄可公开访问。当你创建一个新英雄（无论在哪里）时，你还可以添加公共的 getter/setter 方法来允许你的外部类访问它。

2.  创建一个可由单例 getInstance() 模式引用的“模型”类。然后按照（1）进行。

3.  您确定精灵已添加到舞台上吗？您可以通过 Starling.current.stage.getChildByName(hero); 来检查这一点。尽管为此需要访问 hero 变量。

# ssas - SSAS 在基础数据更新时更新多维数据集

> ID：16083763
> 
> 赞同：0
> 
> 时间：2013-04-18T13:03:52.210
> 
> 标签：ssas, ssas-2008

多维数据集更新时，SSAS 多维数据集使用的基础数据是否可以更新？

我们每周一次完整地处理我们的多维数据集以清理它（在一周内处理更新和处理索引）。然而，需要不止一次地完整地处理数据。数据仓库还有更新数据的日常工作，我们完整的多维数据集流程需要 24 小时。目前，我们在他们的工作之后进行我们的每日更新，并且完整的多维数据集处理以一种避免与他们的数据加载工作冲突的方式完成。但是，如果我们要满足多次处理数据的需求，我们就会遇到数据仓库更新的时候。

这是否会导致多维数据集处理在等待基础数据更改停止时花费更长的时间？或者，它会在运行过程中抓取快照吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:41.243

默认只是标准的读锁。您可以在多维数据集的数据源中验证这一点——隔离级别可能会显示“已提交读”。这意味着它将在读取时获取锁并释放它们。如果数据在读取开始后被修改，如果该行尚未被读取，它可能会包含在多维数据集进程中。

您是否考虑过快照隔离或将数据库设置为已提交读快照模式？我用我的 DW 做了后者并且没有回头。在常规 ETL 加载之后，我的多维数据集进程逐渐增加，并且使用 RCS，我还可以在 ETL 加载时对 DW 执行 SQL 查询（读取器不会阻止写入器）。

# wso2dss - 使用 HTTP 基本身份验证保护 REST API

> ID：16083766
> 
> 赞同：1
> 
> 时间：2013-04-18T13:03:53.040
> 
> 标签：wso2dss

我使用 WSO2DSS 3.0.1 版创建了 data_service。服务运行良好，但我还没有找到如何使用 HTTP 基本身份验证保护 REST API 的解决方案。

使用基本身份验证保护 REST 消息的最佳方法是什么？我想使用 WSO2“用户管理”中的用户/角色，但这不是强制性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:07:07.510

您可以实现您的要求最简单的方法是使用前端 Wso2 ESB。通过 esb，您可以保护您的服务。

可以在 [1] 中找到有关保护 REST API 的文档。

[1] [http://docs.wso2.org/wiki/display/ESB460/Securing+REST+APIs](http://docs.wso2.org/wiki/display/ESB460/Securing+REST+APIs)

谢谢你，达沙那。

# excel - 在 Excel 中重复使用 Google 电子表格公式时出错

> ID：16083768
> 
> 赞同：-3
> 
> 时间：2013-04-18T13:04:00.567
> 
> 标签：excel, google-sheets

公式：

```
=ARRAYFORMULA(SUMPRODUCT(1*('Test Cases'! $G$3:$G <> ""), 1*('Test Cases'! $I$3:$I <> ""), 1*('Test Cases'! $J$3:$J<>""))) 
```

在 Google 电子表格中工作，但在 Excel 中出错。

我尝试删除`=ARRAYFORMULA`，但仍然出现错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:32:49.573

在 Excel 2007 或更高版本中 COUNTIFS 可能是最好的选择，例如

`=COUNTIFS('Test Cases'!$G$3:$G$1000,"<>",'Test Cases'!$I$3:$I$1000,"<>",'Test Cases'!$J$3:$J$1000,"<>")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:26:45.010

如果您需要一个适用于 Google 表格和 Excel 的公式，您可以使用一个技巧，其中一个虚拟 INDEX 函数将在表格中启用数组计算，但不会破坏 Excel 中的公式：

`=SUMPRODUCT(1*('Test Cases'!$G$3:$G$1000<>""),1*('Test Cases'!$I$3:$I$1000<>""),1*('Test Cases'! $J$3:$J$1000<>""))+INDEX(0,1)`

# csv - CSV 导入省略字段

> ID：16083775
> 
> 赞同：0
> 
> 时间：2013-04-18T13:04:16.300
> 
> 标签：csv, phpmyadmin

我正在尝试将表从 CSV 文件导入到 phpMyAdmin。这是我的桌子：

```
1   |Evan|Chigur    |Male|1987-05-25|codefiscale0123|Via Calatafini 17, Palermo, 23451|user@user.it|marco_r|ee11cbb19052e40b07aac0ca060c23ee
22  |Hank|Zappasorca|Male|1987-05-25|codefiscale0123|Via Calatafini 17, Palermo, 23451|user@user.it|marco_r|ee11cbb19052e40b07aac0ca060c23ee 
```

当我尝试用这个填充我的表格时，第一个字段被省略了。我已经检查了 cvs 和 mysql 表之间字段的对应关系。

谁能帮我？

我使用这个查询：

```
LOAD DATA LOCAL INFILE 'C:\\wamp\\tmp\\php7E3C.tmp' REPLACE INTO TABLE `bw_users`FIELDS TERMINATED BY '|'ENCLOSED BY '"'ESCAPED BY '\\'LINES TERMINATED BY '*' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:47:48.740

这对你有什么用？

```
LOAD DATA INFILE 'C:\\wamp\\tmp\\php7E3C.tmp' REPLACE INTO TABLE bw_users
  FIELDS TERMINATED BY '|'
  LINES TERMINATED BY '\n' 
```

对于 windows 更改为

```
 LINES TERMINATED BY '\r\n' 
```

# android - 是否可以发送带有 Intent 作为额外的自定义对象

> ID：16083779
> 
> 赞同：1
> 
> 时间：2013-04-18T13:04:40.267
> 
> 标签：android, android-intent, xamarin.android, xamarin

我在问这个问题：在给出一个字符串、一个 int 等的 instread 时，我们可以在创建新 Intent 期间推送一个自定义对象吗？

```
newActivity.PutExtra("JsonDataResult", business.getJSON()); 
```

事实上，由于 JSON（来自 webrequest），我构建了一个对象，我解析它并将它放在一个对象上。

此时，我将从 webrequest 返回的字符串传递给另一个意图，但解析需要很长时间才能完成，因此通过意图传递自定义对象的能力可能非常酷。

**编辑：**我正在使用 monodroid / xamarin，所以

Android.OS.IParcelable 无法实现，Java.IO.ISerializable 无法实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:08:46.147

你可以让你的自定义类实现`Parcelable`（谷歌说它更快，但你必须做更多的编码）或 `Serializable`. 然后将您的对象添加到捆绑包（或“额外”）：

```
Bundle b = new Bundle()
b.putParcelable("myObject",myObject);
b.putSerializable("myObject",myObject); 
```

有关`Parcelable`检查[此信息的信息](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

如果您对两者之间的区别`Parcelable` 和 `Serializable`更详细的信息感兴趣，请查看[此](https://stackoverflow.com/questions/5550670/benefit-of-using-parcelable-instead-of-serializing-object)

我个人更喜欢使用`Serializable`简单的对象传递，因为代码不会被这么多代码破坏。

[编辑：好的，你的问题不是和这个](https://stackoverflow.com/questions/13633092/efficiently-passing-custom-object-data-between-android-activities-mono-android)很相似吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:30:03.277

正如您所指定的，您使用的是 Monodroid，它看起来并不简单。我快速搜索并找到[了这个论坛帖子](http://mono-for-android.1047100.n5.nabble.com/How-to-send-a-custom-Data-Class-to-next-Activity-td4805844.html)

其中在 Monodroid 中列出了针对此问题的以下解决方案：

> 将要作为全局变量传递的自定义对象存储在某处，然后从您的第二个活动中读取它

这有点混乱和不好的做法，但会奏效。

或者

> 将您的类序列化为字符串并将字符串发送到第二个 Activity

这将是一个更努力的工作，但更好的实践

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:21:57.897

这是一个如何创建 Parcelable 类的示例：

```
public class Person implements Parcelable { 
    private String name;
    private String surname;
    private String email;
        // Get and Set methods

    @Override
    public int describeContents() {
         return hashCode();
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeString(surname);
        dest.writeString(email);
    }

 // We reconstruct the object reading from the Parcel data
    public Person(Parcel p) {
        name = p.readString();
        surname = p.readString();
        email = p.readString();
    }
    public Person() {}

   // We need to add a Creator

 public static final Parcelable.Creator<person> CREATOR = new Parcelable.Creator<person>() {

    @Override
    public Person createFromParcel(Parcel parcel) {  
       return new Person(parcel);
    }

    @Override
    public Person[] newArray(int size) {  
       return new Person[size];
    }
}; 
```

如果你想使用 Parcelable，请看[这里。](http://www.survivingwithandroid.com/2012/09/passing-data-between-activities.html)

# java - 如何在 Heroku 上使用 jetty-runner 增加 Jetty 线程池大小？

> ID：16083780
> 
> 赞同：2
> 
> 时间：2013-04-18T13:04:40.373
> 
> 标签：java, spring, heroku, jetty, threadpool

我有一个在 Heroku 上运行的 Java (Spring MVC) webapp。它使用本文中描述的设置： [Heroku 上的 Spring MVC Hibernate 入门](https://devcenter.heroku.com/articles/spring-mvc-hibernate)

看起来 Jetty 默认只使用一个线程。鉴于此 Heroku 和 jetty-runner 设置，**增加线程池大小的最简单方法是什么**？

注意：我没有任何自定义的 Jetty 相关代码（因此不清楚我将如何应用建议，例如：[How to use setThreadPool() in Jetty](https://stackoverflow.com/questions/7444800/how-to-use-setthreadpool-in-jetty)）。如果可能的话，我宁愿保持这种状态。所有与 Jetty 相关的内容现在都在 Procfile 和 pom.xml 中（见下文）。

我可以使用一些 jetty-runner 参数或配置选项设置线程池大小吗？如果我需要创建一个 Jetty 配置文件，如何让 Heroku/jetty-runner 使用它？

档案：

```
web: java $JAVA_OPTS -jar target/dependency/jetty-runner.jar --port $PORT target/*.war 
```

pom.xml：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.7</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>copy</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>org.mortbay.jetty</groupId>
                        <artifactId>jetty-runner</artifactId>
                        <version>8.1.10.v20130312</version>
                        <destFileName>jetty-runner.jar</destFileName>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:19:53.900

## 是什么为我解决了它（Spring，而不是 Jetty 问题）

当我在问题中写下这个时，我错了：

> 看起来 Jetty 默认只使用一个线程。

事实证明，这纯粹是一个 Spring 问题。在 applicationContext.xml 中，我改变了

```
<task:annotation-driven/> 
```

进入

```
<task:annotation-driven scheduler="scheduler-pool"/>
<task:scheduler id="scheduler-pool" pool-size="5"/> 
```

...并且不同的`@Scheduled`任务现在可以愉快地在单独的线程中运行，例如`scheduler-pool-1`or `scheduler-pool-3`。

## 如何调整 Jetty 线程池配置（使用 jetty-runner）

^(（在我意识到我的问题*不是*Jetty 问题之前，我已经研究了 Jetty 线程池的配置方式。在此处记录；也许它对某人有用。）)

创建一个[`jetty.xml`配置文件](http://wiki.eclipse.org/Jetty/Reference/jetty.xml)（在某个地方，`src/main/resources`以便将其复制到编译目标目录），并根据您的喜好对其进行自定义。

示例（可能很差）：

```
<?xml version="1.0"?>

<!-- For some reason, must use org.eclipse classes, 
 even though we depend on org.mortbay Jetty... -->

<Configure id="Server" class="org.eclipse.jetty.server.Server">

    <Set name="ThreadPool">
        <New class="org.eclipse.jetty.util.thread.QueuedThreadPool">
            <Set name="minThreads">3</Set>
            <Set name="maxThreads">5</Set>
        </New>
    </Set>

</Configure> 
```

然后，告诉 jetty-runner 将该配置文件与`--config`开关一起使用。因此，例如在 Heroku 中`Procfile`，添加`--config target/classes/jetty.xml`：

```
web: java $JAVA_OPTS -jar target/dependency/jetty-runner.jar --config target/classes/jetty.xml --port $PORT target/*.war 
```

* * *

如果你也碰巧在使用**jetty-maven-plugin**`<configuration>` ，你可以通过在下面添加这个来告诉它使用你的自定义 Jetty 配置`pom.xml`：

```
<jettyConfig>target/classes/jetty.xml</jettyConfig> 
```

# iphone - 如何使用 AVAssetImageGeneratorCompletionHandler 块从已录制的视频中生成图像？

> ID：16083786
> 
> 赞同：0
> 
> 时间：2013-04-18T13:04:46.107
> 
> 标签：iphone, image, asynchronous, avfoundation, frames

这可能是一个愚蠢的问题，但很抱歉，因为我是 iPhone 的新手。

我想为每一帧视频生成图像并将其显示在 UIImageView 内的 UIScrollview 中。

当我尝试这样做时，我收到内存警告并且我的应用程序崩溃。

下面是我的代码。

```
- (IBAction)onCameraButtonPressed:(id)sender
{
    // Initialize UIImagePickerController to select a movie from the camera roll.
    UIImagePickerController *videoPicker = [[UIImagePickerController alloc] init];
    videoPicker.delegate = self;
    videoPicker.modalPresentationStyle = UIModalPresentationCurrentContext;
    videoPicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    videoPicker.mediaTypes = @[(NSString*)kUTTypeMovie];
    [self presentViewController:videoPicker animated:YES completion:nil];
}

#pragma mark Image Picker Controller Delegate

- (void)imagePickerController:(UIImagePickerController *)picker     didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   [self dismissViewControllerAnimated:YES completion:nil];
    currentVideoURL = info[UIImagePickerControllerReferenceURL];
    //Video URL = assets-library://asset/asset.MOV?id=D0A4A3EE-C5F3-49C8-9E45-ADF775B9FA8C&ext=MOV
    //NSLog(@"Video URL = %@",currentVideoURL);
    //imageIndex = 0;
    for (UIImageView *subView in thumbnailScrollView.subviews)
    {
        [subView removeFromSuperview];
    }
    [self generateThumbnailsFromVideoURL:currentVideoURL];
    //[self generateAVAssetThumbnails:currentVideoURL];
    //[self appleImageGenerator:currentVideoURL];
    }

- (void)generateThumbnailsFromVideoURL:(NSURL *)videoURL
{
    AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:videoURL options:nil];
    //NSLog(@"Video duration %lld seconds",asset.duration.value/asset.duration.timescale);
    int videoDuration = (asset.duration.value/asset.duration.timescale);

    if (cmTimeArray.count>0) {
        [cmTimeArray removeAllObjects];
    }
    for (int i = 0; i<videoDuration; i++)
    {
        int64_t tempInt = i;
        CMTime tempCMTime = CMTimeMake(tempInt,1);
        int32_t interval = 15;
        for (int j = 1; j<16; j++)
        {
            CMTime newCMtime = CMTimeMake(j,interval);
            CMTime addition = CMTimeAdd(tempCMTime, newCMtime);
            [cmTimeArray addObject:[NSValue valueWithCMTime:addition]];
        }
    }
    //NSLog(@"Array of time %@ count = %d",cmTimeArray, cmTimeArray.count);
    /*for(int t=0;t < asset.duration.value;t++) {
        CMTime thumbTime = CMTimeMake(t,asset.duration.timescale);
        NSValue *v=[NSValue valueWithCMTime:thumbTime];
        [cmTimeArray addObject:v];
    }
    NSLog(@"Array of time %@ count = %d",cmTimeArray, cmTimeArray.count);*/
    __block int i = 0;
    //__block UIImage *currentImage = nil;
    AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
        if (result == AVAssetImageGeneratorSucceeded) {
            // currentImage = [UIImage imageWithCGImage:im];
            //[framesArray addObject:[UIImage imageWithCGImage:im]];
            [self performSelectorOnMainThread:@selector(insertImageToScrollView:) withObject:[UIImage imageWithCGImage:im] waitUntilDone:NO];
        }
        else
            NSLog(@"Ouch: %@", error.description);
        i++;
        imageIndex = i;
        if(i == cmTimeArray.count) {
            //[self performSelectorOnMainThread:@selector(insertImageToScrollView:) withObject:framesArray waitUntilDone:YES];
        }
    };

    // Launching the process...
    self.generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    self.generator.appliesPreferredTrackTransform=TRUE;
    self.generator.requestedTimeToleranceBefore = kCMTimeZero;
    self.generator.requestedTimeToleranceAfter = kCMTimeZero;
    self.generator.maximumSize = CGSizeMake(40, 40);
    [self.generator generateCGImagesAsynchronouslyForTimes:cmTimeArray completionHandler:handler];
    }

-(void)insertImageToScrollView:(UIImage *)image
{
    int xPosition = (5*imageIndex)+(WIDTH*imageIndex)+OFFSET;
    UIImageView *currentImageView = [[UIImageView alloc]initWithFrame:CGRectMake(xPosition, 5, WIDTH, WIDTH)];
    currentImageView.tag = imageIndex+10;
    currentImageView.image = image;
    [thumbnailScrollView addSubview:currentImageView];
    [thumbnailScrollView setContentSize:CGSizeMake(xPosition+WIDTH+5,thumbnailScrollView.frame.size.height)];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:30:51.147

您正在将所有图像加载到视图中，但在任何给定时间仅显示少数图像。根据图像的数量，这可能会占用大量内存。

您可以考虑以下方法：

生成所有图像并将它们写入本地存储，将图像的文件 URL 存储在一个数组中。

现在对于您的滚动视图，仅在滚动到下一个时添加所需的图像。添加图像时，您从磁盘加载它们并将它们添加到您的视图中。看看这个水平无限滚动视图的示例代码：[https](https://code.google.com/p/iphone-infinite-horizontal-scroller) ://code.google.com/p/iphone-infinite-horizo​​ntal-scroller 。

您还可以使用带有自定义单元格的普通 UITableView，仅显示图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:37:41.687

我发现了我的错误。我将原始/完整图像分配给我的 40*40 图像视图。那是产生内存警告。解决在使用以下代码生成图像时提供所需的图像大小。

```
self.generator.maximumSize = CGSizeMake(40, 40); 
```

# ios - 从不同的角度触发 segue

> ID：16083788
> 
> 赞同：0
> 
> 时间：2013-04-18T13:04:49.400
> 
> 标签：ios, objective-c, uistoryboard, segue

我有一个从 FirstViewController 导航到 SecondViewController 的 segue。这通过按下按钮来实现。按钮的代码是

```
- (IBAction)segue:(id)sender {
[self performSegueWithIdentifier:@"myIdentifier" sender:self];
} 
```

当我按下按钮时，这会正确发生。

我想要做的是从另一个角度触发这个方法。我试着做

```
FirstViewController fvc = [[FirstViewController alloc] init];
[fvc segue:nil]; 
```

当我尝试这个时，我收到错误消息，Reciever has no segue with identifier 'myIdentifier'

我如何从另一个角度以编程方式触发这个 segue？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:56:13.010

这里有一些问题，但它们归结为几个关键点：

*   Segues 是一个故事板的东西，因此视图控制器只有在从故事板实例化时才“知道”segues。
*   视图控制器必须在屏幕上才能执行转场。
*   Segue 是从一个特定视图控制器到另一个特定视图控制器的转换。

因此，在您的代码段中：

```
FirstViewController fvc = [[FirstViewController alloc] init];
[fvc segue:nil]; 
```

第一个问题是`alloc`- `init`-ing 给你一个实例，`FirstViewController`它不知道它来自的故事板，所以它不知道任何关于 segues。（仅此一项可以使用 [ `instantiateViewControllerWithIdentifier:`][1] 修复，但这并不能解决您的全部问题。）第二个问题是该实例不适合 UI 层次结构的任何位置——它没有被呈现为modal 视图控制器，它不是当前导航控制器中的顶部视图控制器，也不是可见窗口的根视图控制器等。为了将屏幕从一个视图转换到另一个视图，第一个视图需要在屏幕上。

听起来您想要做的是从当前屏幕上的内容过渡到此 segue 的目标。但是故事板转场的概念不仅仅是带有目的地的过渡——它是源、目的地以及它们之间的过渡或关系。如果您有不同的源视图，则需要不同的 segue。所以，如果你已经有一个从`FirstViewController`到的转场，并且你想从（假设现在是屏幕上的那个）到`SecondViewController`进行类似的转换，你需要做第二个转场连接到。`OtherViewController``SecondViewController``OtherViewController``SecondViewController`

# python - 使用可变数量的上下文管理器替代 contextlib.nested

> ID：16083791
> 
> 赞同：35
> 
> 时间：2013-04-18T13:05:02.253
> 
> 标签：python, deprecated, with-statement, contextmanager

我们的代码根据运行时参数调用可变数量的上下文管理器：

```
from contextlib import nested, contextmanager

@contextmanager
def my_context(arg):
    print("entering", arg)
    try:
        yield arg
    finally:
        print("exiting", arg)

def my_fn(items): 
    with nested(*(my_context(arg) for arg in items)) as managers:
        print("processing under", managers)

my_fn(range(3)) 
```

但是，[`contextlib.nested`自 Python 2.7 起已弃用](http://docs.python.org/2/library/contextlib.html#contextlib.nested)：

```
DeprecationWarning: With-statements now directly support multiple context managers 
```

[Python 'with' 语句中 Multiple variables](https://stackoverflow.com/questions/893333/multiple-variables-in-python-with-statement)的答案表明它`contextlib.nested`有一些“令人困惑的容易出错的怪癖”，但建议的使用 multiple-manager`with`语句的替代方法不适用于可变数量的上下文管理器（并且还会破坏向后兼容性）。

是否有任何替代方案`contextlib.nested`不被弃用并且（最好）没有相同的错误？

还是我应该继续使用`contextlib.nested`并忽略警告？如果是这样，我是否应该计划`contextlib.nested`在将来的某个时间被删除？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T13:18:10.263

添加了新的[Python 3`contextlib.ExitStack`类](http://docs.python.org/3/library/contextlib.html#contextlib.ExitStack)作为替代`contextlib.nested()`（参见[issue 13585](http://bugs.python.org/issue13585)）。

它的编码方式可以让您直接在 Python 2 中使用它：

```
import sys
from collections import deque

class ExitStack(object):
    """Context manager for dynamic management of a stack of exit callbacks

    For example:

        with ExitStack() as stack:
            files = [stack.enter_context(open(fname)) for fname in filenames]
            # All opened files will automatically be closed at the end of
            # the with statement, even if attempts to open files later
            # in the list raise an exception

    """
    def __init__(self):
        self._exit_callbacks = deque()

    def pop_all(self):
        """Preserve the context stack by transferring it to a new instance"""
        new_stack = type(self)()
        new_stack._exit_callbacks = self._exit_callbacks
        self._exit_callbacks = deque()
        return new_stack

    def _push_cm_exit(self, cm, cm_exit):
        """Helper to correctly register callbacks to __exit__ methods"""
        def _exit_wrapper(*exc_details):
            return cm_exit(cm, *exc_details)
        _exit_wrapper.__self__ = cm
        self.push(_exit_wrapper)

    def push(self, exit):
        """Registers a callback with the standard __exit__ method signature

        Can suppress exceptions the same way __exit__ methods can.

        Also accepts any object with an __exit__ method (registering a call
        to the method instead of the object itself)
        """
        # We use an unbound method rather than a bound method to follow
        # the standard lookup behaviour for special methods
        _cb_type = type(exit)
        try:
            exit_method = _cb_type.__exit__
        except AttributeError:
            # Not a context manager, so assume its a callable
            self._exit_callbacks.append(exit)
        else:
            self._push_cm_exit(exit, exit_method)
        return exit # Allow use as a decorator

    def callback(self, callback, *args, **kwds):
        """Registers an arbitrary callback and arguments.

        Cannot suppress exceptions.
        """
        def _exit_wrapper(exc_type, exc, tb):
            callback(*args, **kwds)
        # We changed the signature, so using @wraps is not appropriate, but
        # setting __wrapped__ may still help with introspection
        _exit_wrapper.__wrapped__ = callback
        self.push(_exit_wrapper)
        return callback # Allow use as a decorator

    def enter_context(self, cm):
        """Enters the supplied context manager

        If successful, also pushes its __exit__ method as a callback and
        returns the result of the __enter__ method.
        """
        # We look up the special methods on the type to match the with statement
        _cm_type = type(cm)
        _exit = _cm_type.__exit__
        result = _cm_type.__enter__(cm)
        self._push_cm_exit(cm, _exit)
        return result

    def close(self):
        """Immediately unwind the context stack"""
        self.__exit__(None, None, None)

    def __enter__(self):
        return self

    def __exit__(self, *exc_details):
        # We manipulate the exception state so it behaves as though
        # we were actually nesting multiple with statements
        frame_exc = sys.exc_info()[1]
        def _fix_exception_context(new_exc, old_exc):
            while 1:
                exc_context = new_exc.__context__
                if exc_context in (None, frame_exc):
                    break
                new_exc = exc_context
            new_exc.__context__ = old_exc

        # Callbacks are invoked in LIFO order to match the behaviour of
        # nested context managers
        suppressed_exc = False
        while self._exit_callbacks:
            cb = self._exit_callbacks.pop()
            try:
                if cb(*exc_details):
                    suppressed_exc = True
                    exc_details = (None, None, None)
            except:
                new_exc_details = sys.exc_info()
                # simulate the stack of exceptions by setting the context
                _fix_exception_context(new_exc_details[1], exc_details[1])
                if not self._exit_callbacks:
                    raise
                exc_details = new_exc_details
        return suppressed_exc 
```

使用它作为你的上下文管理器，然后随意添加*嵌套*的上下文管理器：

```
with ExitStack() as stack:
    managers = [stack.enter_context(my_context(arg)) for arg in items]
    print("processing under", managers) 
```

对于您的示例上下文管理器，这将打印：

```
>>> my_fn(range(3))
('entering', 0)
('entering', 1)
('entering', 2)
('processing under', [0, 1, 2])
('exiting', 2)
('exiting', 1)
('exiting', 0) 
```

您也可以安装[`contextlib2`模块](https://pypi.python.org/pypi/contextlib2)；它包括`ExitStack`作为后向端口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-26T05:39:19.203

python3 维护者选择破坏向后兼容性有点令人烦恼，因为实现`nested`起来`ExitStack`非常简单：

```
try:
    from contextlib import nested  # Python 2
except ImportError:
    from contextlib import ExitStack, contextmanager

    @contextmanager
    def nested(*contexts):
        """
        Reimplementation of nested in python 3.
        """
        with ExitStack() as stack:
            for ctx in contexts:
                stack.enter_context(ctx)
            yield contexts 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T13:58:56.560

```
import sys
import contextlib

class nodeA(object):

    def __init__(self):
        print( '__init__ nodeA')

    def __enter__(self):
        print( '__enter__ nodeA')

    def __exit__(self, a, b, c):
        print( '__exit__ nodeA')

class nodeB(object):

    def __init__(self):
        print( '__init__ nodeB')

    def __enter__(self):
        print( '__enter__ nodeB')

    def __exit__(self, a, b, c):
        print( '__exit__ nodeB')

class nodeC(object):

    def __init__(self):
        print( '__init__ nodeC')

    def __enter__(self):
        print( '__enter__ nodeC')

    def __exit__(self, a, b, c):
        print( '__exit__ nodeC')

print( 'Start...')

a = nodeA()
b = nodeB()
c = nodeC()

print( 'Python version: %s' % (sys.version))

if sys.version.startswith('2'):
    print('Use python 2!')
    with contextlib.nested(a, b, c):
        print('hallo?')

if sys.version.startswith('3'):
    print('Use python 3!')
    with contextlib.ExitStack() as stack:
        [stack.enter_context(arg) for arg in [a,b,c]]

print('...end!') 
```

# asp.net-mvc - 如何在@Html.TextBox mvc4 中添加新的 css 类

> ID：16083794
> 
> 赞同：24
> 
> 时间：2013-04-18T13:05:16.733
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我已使用以下代码添加 css 类，`@Html.TextBox`但这仅适用`@Html.TextBoxFor`于`@Html.TextBox`.

```
@Html.TextBox("ticket_new_attachment_attributes_0_description", new { @class= "bigfield"}) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-18T13:09:12.613

尝试这个

```
@Html.TextBox("ticket_new_attachment_attributes_0_description", null, new { @class= "bigfield"}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T13:11:14.610

第二个参数是[值](http://msdn.microsoft.com/en-us/library/dd492984%28v=vs.108%29.aspx)。
您需要将重载与 html 属性的第三个参数一起使用，如下所示：

```
// Pass null (or the value) as second parameter
@Html.TextBox("ticket_new_attachment_attributes_0_description", null, new { @class = "bigfield"}) 
```

请参阅[msdn 参考](http://msdn.microsoft.com/en-us/library/dd505258%28v=vs.108%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-02T11:45:33.483

对于@Html.TextBox，第二个参数是文本框值，所以你可以将“”作为文本框值传递，第三个参数是 Html 属性

试试下面的 html ：

```
@Html.TextBox("ticket_new_attachment_attributes_0_description", "", new { @class= "bigfield"}) 
```

# ssh - Jenkins：使用不同的用户名通过 SSH 连接到从站

> ID：16083796
> 
> 赞同：2
> 
> 时间：2013-04-18T13:05:23.657
> 
> 标签：ssh, jenkins

我在机器 M1 上有一个与用户 XXX 一起运行的主机。我想用用户 YYY 在机器 M2 上运行一个从机。

我在两台机器之间有一个私钥-公钥，所以我可以这样做：

```
[XXX@M1]$ ssh YYY@M2 
```

我是连接的。

在 Jenkins 中，我为用户名 M2 创建了凭据，并选择了*From the Jenkins master ~/.ssh*选项。但是当我尝试连接时它失败了：

```
[04/18/13 14:58:11] [SSH] Opening SSH connection to M2:22.
ERROR: Failed to authenticate as YYY with credential=c2cdc4dd-cb39-4f15-8329-033933ad5621
java.io.IOException: Publickey authentication failed.

[04/18/13 14:58:11] [SSH] Authentication failed.
hudson.AbortException: Authentication failed. 
```

令人惊讶的是，如果我直接使用选项*Enter*并从 复制粘贴私钥`~/.ssh/id_dsa`，那么它可以工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:46:26.547

The order of preference is: id_rsa, id_dsa, identity

So it will take ~/.ssh/id_rsa if that is present and only fall back to ~/.ssh/id_dsa if the id_rsa is missing.

Where you have multiple keys and you need to specify explicitly one key, the recommendation is to either specify the path to the file or use copy & paste

# mysql - 将表数据迁移到其他表的最佳方法

> ID：16083801
> 
> 赞同：0
> 
> 时间：2013-04-18T13:05:37.110
> 
> 标签：mysql, ruby-on-rails, migration, ruby-on-rails-2

考虑 4 个模型（非常简化）

```
class Group1 << AR::Base
  has_many group1_items
end
class Group2 << AR::Base
  has_many group2_items
end

class GroupItem << AR::Base
  belongs_to :group1
  belongs_to :thing
end
class Group2Item << AR::Base
  belongs_to :group2
  belongs_to :thing
end 
```

我想将 Group2 和 Group2Items “合并”到 Group1 和 Group1Items。Group2 将从 Group1 继承。我想要的是 ：

```
class Group2 << Group1 
```

Group2Item 模型将被使用。

我需要创建迁移以将 Group2 和 Group2Items 数据“移动”到 Group1 和 Group1Item 表。

无论应用程序状态如何，我的迁移都必须是可访问的，即 Group2 和 Group2Item 表不能存在，因此我需要在 mySQL 语法中执行此操作。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:08:52.820

```
def up
  change_table :group1s do |t|
    t.string :type       # add a 'type' column for STI
    t.integer :old_id    # add a temporary column to hold the original 'id'
  end

  execute("UPDATE group1s SET `type` = 'Group1';")

  merge_items_sql = <<SQL
    INSERT INTO group1s (`type`, old_id, other_field_names...) 
    SELECT 'Group2', group2s.id, other_field_values...
    FROM group2s;

    INSERT INTO group1_items(group1_id, thing_id )
    SELECT group1s.id, group2_items.thing_id
    FROM group2_items
    JOIN group1s ON group2_items.group2_id = group1s.old_id;
SQL

  execute(merge_items_sql)

  # leave this out until you have verified that all data has merged properly
  drop_table :group2_items
  drop_table :group2s
  remove_column :group1s, :old_id
end 
```

# css - 浮动 div 右对齐 div

> ID：16083804
> 
> 赞同：0
> 
> 时间：2013-04-18T13:05:40.453
> 
> 标签：css, html

我有以下 HTML：

```
<body>
    <div id="postwrapper">
        <div class="posterinfo">
           Username<br />
            <img src="http://board.ogame.nl/wcf/images/avatars/avatar-3778.gif"             alt="avatar" /><br />
            Postcount
        </div>
        <div class="postcontent">
            Hi there everyone!<br /><br />
            This is a sample text to test my post-layout's divs
            <br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            As you can see untill here it's all going fine but:.<br /><br />
            Here the text starts completely at the left..<br />
            But it shouldn't..<br />
            It should start at the same place as above.. Right from the div where the avatar is...<br />
            blabla<br />
       </div>
        <div class="postersignature">
        This signature should stay at the completely bottom of the postwrapper and should also be start at the right of the avatar div
    </div>
</div>

</body> 
```

使用这个 CSS：

```
html,body {margin:0;padding:0;height:100%;}
#postwrapper {
    width:100%;
    height:auto;
}
.posterinfo {
    float:left;
    height: auto;
    margin-right:10px;
    background: #222222;
}
.postcontent {
    margin-top:10px;
    margin-bottom: 0px;
    height: 100%;
    background: #333333;
    word-wrap: break-word;
}
.postersignature {
    height:auto;
    width: 100%;
    margin-bottom: 0; 
    bottom:0;
    background: #442222;
} 
```

但是现在 de postcontent 中的文本从 div 的完全左侧开始（在向左浮动的 posterinfo div 下方）但是如果文本太长而无法放在一边，我想防止它低于图像。

我在这里说明了这一点：http: [//jsfiddle.net/BsftM/](http://jsfiddle.net/BsftM/)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:10:42.183

添加以下样式：

```
.postcontent { float: left; }
.postersignature { clear: both; } 
```

[http://jsfiddle.net/BsftM/5/](http://jsfiddle.net/BsftM/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:08:11.877

如果您知道图像的大小，则可以使用`pading-left : (size of the image)px`

否则，您可以将图像放入 div 中，并使该 div 更长，这样文本就不会出现在下方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:27:26.280

放：

```
 float: left 
```

也适用于 div 的“postcontent”和“postersignature”。

如果你想右边的“postersignature”需要一个marginleft，等于“postcontent”与posterinfo的距离。

但是最好的解决方案（如果你想要一切都对齐）是将 postcontent 和 postersignature 放在一个新的 div“postnew”中，并将这个新的 div 也放在“float:left”中。

```
<body>
 <div id="postwrapper">
    <div class="posterinfo">
       Username<br />
        <img src="http://board.ogame.nl/wcf/images/avatars/avatar-3778.gif"               alt="avatar" /><br />
        Postcount
    </div>
    <div class="postnew">
        <div class="postcontent">
            Hi there everyone!<br /><br />
            This is a sample text to test my post-layout's divs
            <br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            Some text...<br />
            As you can see untill here it's all going fine but:.<br /><br />
            Here the text starts completely at the left..<br />
            But it shouldn't..<br />
            It should start at the same place as above.. Right from the div where the avatar is...<br />
            blabla<br />
       </div>
        <div class="postersignature">
        This signature should stay at the completely bottom of the postwrapper and should also be start at the right of the avatar div
         </div>
     </div>
   </div>

 </body> 
```

对于CSS：

```
html,body {margin:0;padding:0;height:100%;}
#postwrapper {width:100%; height:auto;}
 .posterinfo {
   float:left;
   height: auto;
   margin-right:10px;
   background: #222222;
 }
 .postcontent {
   margin-top:10px;
   margin-bottom: 0px;
   height: 100%;
   background: #333333;
   word-wrap: break-word;
 }
 .postersignature {
   height:auto;
   bottom:0;
   background: #442222;
   word-wrap: break-word;
   margin-top:10px;
 }
 .postnew {
   float: left;
 } 
```

# android - 在 ListAdapter 上单击项目时更改 TextView？

> ID：16083811
> 
> 赞同：0
> 
> 时间：2013-04-18T13:05:52.593
> 
> 标签：android, class, android-manifest

我有两个类和一个 XML。第一个创建了一个 ListApter，其中充满了鸡尾酒名称，如血腥玛丽、玛格丽塔等。设置了第二个类，因此我可以更改 XML 中显示的 TextView 和 Image。我在尝试将我在 ListAdapter 中按下的项目传递给 CocktailDetail 类以更改 TextView 和 Image 的值时遇到了困难。有人可以帮忙吗？它会运行，但会为列表中选择的每个项目打开血腥玛丽。

菜单类

```
package com.drunktxtapp;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity {

    String classes[] = { "Bloody_Mary", "Capirinha", "Cosmopolitan",
            "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita",
            "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada",
            "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour",
            "White_Russian" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this,
                android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        ;
        Intent ourIntent = new Intent(Menu.this, CocktailDetail.class);
        ourIntent.putExtra("cocktail_name","bloodymary");
        startActivity(ourIntent);

    };
} 
```

鸡尾酒细节课

```
package com.drunktxtapp;

import android.net.Uri;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.ImageView;
import android.view.View.OnClickListener;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.widget.TextView;
import android.view.View;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

    public class CocktailDetail extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.cocktaildetail);
            ImageView imageView1 = (ImageView)findViewById(R.id.imageCocktail);
            imageView1.setImageDrawable(getResources().getDrawable(R.drawable.bloodymary));
            Button b1 = (Button) findViewById(R.id.buttonYoutube);
            TextView t1 = (TextView)findViewById(R.id.textCocktailName);
            String cocktailName = "Bloody Mary";
            t1.setText(cocktailName);
            b1.setOnClickListener(new Button.OnClickListener() {

                public void onClick(View v) {
                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=Alt-ehDc3fc")));
                    }
            });
        }
    } 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/beer"
    android:id="@+id/cocktailDetail" >

    <TextView
        android:id="@+id/textCocktailName"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Cocktail Name"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageCocktail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/bloodymary" />

    <TextView
        android:textStyle="bold"
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Ingredients"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textIngredients"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Insert txt here"
        android:textAppearance="?android:attr/textAppearanceSmall" 
        android:textStyle="bold" />

    <TextView
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="2dp"
        android:text="Preparation"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textPrepration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Insert txt here"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textStyle="bold" />

    <Button
        android:id="@+id/buttonYoutube"
        android:layout_width="200dp"
        android:layout_height="75dp"
        android:layout_gravity="center"
        android:layout_marginTop="5dp"
        android:text="YouTube Clip"
        android:textSize="20dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:13:08.693

在 Menu 类中，您传递的是硬编码字符串：

```
 ourIntent.putExtra("cocktail_name",**"bloodymary"**); 
```

将此更改为从 ListView 检索到的值：

```
 String selectedFromList =(String) (l.getItemAtPosition(position));
    ourIntent.putExtra("cocktail_name",selectedFromList); 
```

同样在 Cocktail Class 中`OnCreate`，您再次将文本设置为硬编码字符串。使用`Bundle`，检索值，然后 setText；

```
 Bundle bundle = getIntent().getExtras();

 //Extract the data…
 String name = bundle.getString(“cocktail_name”); 
 TextView t1 = (TextView)findViewById(R.id.textCocktailName);
 t1.setText(name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:14:57.920

在菜单活动中试试这个：

```
// React to user clicks on item 
```

lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

```
 public void onItemClick(AdapterView<?> parentAdapter, View view, int position,
                         long id) {

     // here you get the Item selected using position

   Intent i = new Intent(MenuActivity.this, CocktailDetails.class);

   i.putExtra("title", your_title_cocktail);

   startActivity(i);
 } 
```

});

在 DetailActivity

```
protected void onCreate(Bundle savedInstanceState) { 
 Intent i = getIntent(); 
--- 
```

}

看看[这里](http://www.survivingwithandroid.com/2012/09/passing-data-between-activities.html)和[这里](http://www.survivingwithandroid.com/2012/09/listviewpart-1.html)。

# c# - 源文件 '' 无法打开（'系统找不到指定的文件。'） (CS1504)

> ID：16083812
> 
> 赞同：1
> 
> 时间：2013-04-18T13:05:58.203
> 
> 标签：c#, .net, system

我正在尝试自己生成一个 csproj 文件。当我用这个生成的 csproj 打开我的项目时，结构看起来相当不错，但是当我构建项目时，项目中的每个 .cs 文件都会出现以下错误

无法打开源文件 'wrongpath/MySource.cs' ('系统找不到指定的文件。') (CS1504)

我想知道这条错误的路径从何而来？在我的csproj中，路径是正确的，这里不一样...

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">
<PropertyGroup>
    <ProjectGuid>{724F3A09-AACF-487E-BF67-193E2E4E5D9C}</ProjectGuid>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <OutputType>Exe</OutputType>
    <RootNamespace>MyProject.csproj</RootNamespace>
    <AssemblyName>MyProject.csproj</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <SignAssembly>False</SignAssembly>
    <DelaySign>False</DelaySign>

    <BaseIntermediateOutputPath>Path\to\the\project\target\net\obj\</BaseIntermediateOutputPath>
    <AllowUnsafeBlocks>False</AllowUnsafeBlocks>
    <NoStdLib>False</NoStdLib>
    <WarningLevel>4</WarningLevel>
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
    <TargetFrameworkProfile />
    <RunPostBuildEvent>OnBuildSuccess</RunPostBuildEvent>
</PropertyGroup>
<PropertyGroup Condition=" '$(Platform)' == 'x86' ">
    <PlatformTarget>x86</PlatformTarget>
    <RegisterForComInterop>False</RegisterForComInterop>
    <GenerateSerializationAssemblies>Auto</GenerateSerializationAssemblies>
    <BaseAddress>4194304</BaseAddress>
    <FileAlignment>4096</FileAlignment>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)' == 'Debug'">
    <OutputPath>Path\to\the\project\target\net\Debug\</OutputPath>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>Full</DebugType>
    <Optimize>False</Optimize>
    <CheckForOverflowUnderflow>True</CheckForOverflowUnderflow>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <IntermediateOutputPath>Path\to\the\project\target\net\Debug</IntermediateOutputPath>
    <StartAction>Project</StartAction>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <OutputPath>Path\to\the\project\target\net\Release\</OutputPath>
    <DebugSymbols>False</DebugSymbols>
    <DebugType>None</DebugType>
    <Optimize>True</Optimize>
    <CheckForOverflowUnderflow>False</CheckForOverflowUnderflow>
    <DefineConstants>TRACE</DefineConstants>
    </PropertyGroup>
<ItemGroup>
    <Reference Include="ICSharpCode.SharpZipLib.dll">
        <HintPath>Path\to\the\project/../../ikvm-7.2.4630.6-eh/bin/ICSharpCode.SharpZipLib.dll</HintPath>
    </Reference>
    [... other references written the same way]

    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
    <Reference Include="NUnit.Framework" />
</ItemGroup>
<ItemGroup>
    <Folder Include="Path\to\the\project\src\test\net\MyProject\builders" />
    <Folder Include="Path\to\the\project\src\test\net\MyProject\service" />
    <Folder Include="Path\to\the\project\src\test\net\MyProject" />
    <Folder Include="Path\to\the\project\src\test\net\resources" />
    <Folder Include="Path\to\the\project\src\test\net" />
    <Folder Include="Path\to\the\project\src\test\resources\examples\requests" />
    <Folder Include="Path\to\the\project\src\test\resources\examples\responses" />
    <Folder Include="Path\to\the\project\src\test\resources\examples" />
    <Folder Include="Path\to\the\project\src\test\resources\P12\acc" />
    <Folder Include="Path\to\the\project\src\test\resources\P12\int" />
    <Folder Include="Path\to\the\project\src\test\resources\P12" />
    <Folder Include="Path\to\the\project\src\test\resources" />
</ItemGroup>
<ItemGroup>
    <None Include="src/test/net/resources/MyProject.test.session.properties" />
    <None Include="src/test/resources/MyProject.properties" />
    [...other properties files added the same way]

</ItemGroup>
<ItemGroup>
    <Compile Include="src/test/net/MyProject/AbstractTestClass.cs" />
    <Compile Include="src/test/net/MyProject/builders/FirstTest.cs" />
    <Compile Include="src/test/net/MyProject/builders/SecondTest.cs" />
    <Compile Include="src/test/net/MyProject/builders/ThirdTest.cs" />
    [...other .cs files added the same way]
</ItemGroup>
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.Targets" /> 
```

编辑：我正在使用 SharpDevelop

# html - Chrome中不同父级元素的z-index

> ID：16083813
> 
> 赞同：4
> 
> 时间：2013-04-18T13:06:02.613
> 
> 标签：html, css, google-chrome, positioning, z-index

有两个容器。一个是固定的，覆盖 100% 的屏幕。其次是相对的 - 包含可滚动的内容。问题是有四个元素要相对于彼此定位，如下所示：固定容器中的第一个，绝对容器中的第二个，固定容器中的第三个，绝对容器中的第四个。

```
<div class="container fixed">
    <div class="el z1"></div>
    <div class="el z3"></div>
</div>
<div class="container relative">
    <div class="el z2"></div>
    <div class="el z4"></div>
</div> 
```

但是，其中一个父元素的 z-index 将始终小于另一个，这不允许对 4 个子元素进行排序。

有小提琴[http://jsfiddle.net/only_dimon/zkY4C/6/](http://jsfiddle.net/only_dimon/zkY4C/6/) 我要订购：黄色，绿色，白色，底部的黑色。但正如你所见——黄色、白色、绿色、黑色。

我想要的结果：
![在此处输入图像描述](https://i.stack.imgur.com/RRmRm.jpg)

但是元素应该在不同的容器中。

提前致谢！

**这对我**有帮助：对于许多元素仅有助于 html 重建。幸运的是，我不需要为固定元素使用固定容器，因为固定元素的位置和大小取决于窗口大小，即使我将它们放入相对容器中也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:15:05.343

经过进一步调查，子元素不能/不应该能够推翻父 z-index，某些浏览器（例如 Firefox）虽然由于某种原因忽略了父索引并显示您的元素是您希望的，但其他所有浏览器我'已经尝试过（Opera，Safari，Chrome）没有，所以不，如果不更改 HTML 的标记以实现跨浏览器兼容性，就不可能完成你想要的。

**编辑：**

您甚至可以在该主题中找到相当多的帖子。

[如何在具有较高 z-index 的另一个元素的子元素前面获取具有较低 z-index 元素的子元素？](https://stackoverflow.com/questions/11330207/css-z-index-get-a-child-of-an-element-with-lower-z-index-on-front-of-another)

[如何让父元素出现在子元素之上](https://stackoverflow.com/questions/1806421/css-parent-element-to-appear-above-child)

[我可以覆盖父元素的 z-index 继承吗？](https://stackoverflow.com/questions/3198947/can-i-override-z-index-inheritance-from-parent-element)

**编辑 - 2：**

根据您想要完成的任务，有许多替代方法可以获得虚假的“zindex”行为，值得一看的是`pointer-events:none;`透明背景，您永远不会知道它在另一个元素之上。

如果它用于背景，您可以使用具有不同设置的框阴影来伪造它。

无法想出任何其他原因 atm 但如果您告诉我我也会尝试为您提供解决方案。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:12:45.457

像这样：http: [//jsfiddle.net/9Hh89/1/](http://jsfiddle.net/9Hh89/1/)？

这是我的 HTML：

```
<div class="fixed">
    <div class="yellow">
        <div class="green">
            <div class="white">
                <div class="black"></div>
            </div>            
        </div>        
    </div>
</div> 
```

和CSS：

```
html, body { height:100% }

body { padding:0 ;
    margin:0 ;
}

.fixed { height:100% ;
    min-height:100% !important ;
    background:#666666 ;
    position:relative ;
    z-index:1 ;
}

.yellow, .green, .white, .black {
    display:block ;
    margin:auto !important ;
    position:absolute ;
    top:0 ;
    bottom: 0 ;
    right: 0 ;
    left: 0 ;
}

.yellow { width:220px ;
    height:220px ;
    background:yellow ;
    z-index:100 ;
}

.green { width:170px ;
    height:170px ;
    z-index:200 ;
    background:green ;
}

.white { width:100px ;
    height:100px ;
    z-index:200 ;
    background:white ;
}

.black { width:50px ;
    height:50px ;
    z-index:300 ;
    background:black ;
} 
```

最好的，

辛西娅

# java - 如何使用 netbeans dist 分发 Java3d jar 文件？

> ID：16083814
> 
> 赞同：1
> 
> 时间：2013-04-18T13:06:09.467
> 
> 标签：java, netbeans, jar, java-3d

我在 netbeans (Mac OS X) 上有一个使用`Java3d`. 在 java 发行版的 mac 版本中，已经包含 java3d。但是现在我想将我的应用程序分发给`jar`其他平台。当我`Clean and Build`在 netbeans 中创建项目时，它会生成如下`dist`文件夹：

```
.
├── lib
│   ├── AbsoluteLayout.jar
│   ├── jgrapht-jdk1.6.jar
│   └── swing-layout-1.0.4.jar
├── README.TXT
└── MyApp.jar 
```

但正如您所见，它没有包含任何与 java3d 相关的 jar 文件。如何强制 Netbeans 将必要的 jar 文件包含到我的分发文件夹中？

### 更新：

在第二次尝试中，我从 Oracle 网站下载了 java3d 并提取了所有内容，直到找到三个与 java3d 相关的 jar。但是，当我尝试运行时，将它们添加到项目中会导致 Ubuntu 出现错误`java -jar MyApp.jar`：

```
java.lang.UnsatisfiedLinkError: no j3dcore-ogl in java.library.path 
```

该软件针对多个平台，我希望我的用户能够通过简单地执行 jar 文件来运行它，而无需涉及任何技术问题。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:10:52.937

看起来这里涉及到本机库。这并不容易；也许不可能。

Netbeans 不会帮助您的用户。

也许您可以编写一些设置命令来创建适当的环境变量，然后调用可执行 JAR。

您必须为 *nix 和 Windows 创建不同版本的脚本。

您需要将所有内容打包在一个 ZIP 文件中，以便根据需要安排工件或编写安装程序来提供帮助。

# android - App-Icon 创建一个叠加信息（数字）？

> ID：16083816
> 
> 赞同：4
> 
> 时间：2013-04-18T13:06:14.410
> 
> 标签：android, xamarin.android, notifyicon

如何在 Android 应用程序上克隆此行为（iOS）？

![在此处输入图像描述](https://i.stack.imgur.com/DqJbq.jpg)

从技术上讲，这绝对是可能的，因为我在我的 Android 手机上有一个自己的应用程序——它是一个电子邮件应用程序，图标上有一个非常相似的指示器。（显示未读邮件的数量）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:16:03.840

是的，您可以像 ios 一样实现覆盖。顺便说一下，它被称为徽章值。

[这是 github 上的一个示例](https://github.com/jgilfelt/android-viewbadger)

您只需在项目中添加类并调用以下行

```
View target = findViewById(R.id.target_view);
BadgeView badge = new BadgeView(this, target);
badge.setText("1");
badge.show(); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:22:33.643

如果您指的是在主屏幕上执行此操作，那就是[应用小部件](http://developer.android.com/guide/topics/appwidgets/index.html)。

# c - pthread_join 导致分段错误（简单程序）

> ID：16083818
> 
> 赞同：1
> 
> 时间：2013-04-18T13:06:21.743
> 
> 标签：c, multithreading, segmentation-fault, pthreads, pthread-join

我只是在尝试使用多线程程序，但我遇到了 pthread_join 函数的问题。下面的代码只是我用来显示 pthread_join 崩溃的一个简单程序。此代码的输出将是：

```
before create

child thread

after create

Segmentation fault (core dumped) 
```

是什么导致 pthread_join 给出分段错误？

```
#include <pthread.h>
#include <stdio.h>

void * dostuff() {
    printf("child thread\n");
    return NULL;
}

int main() {
    pthread_t p1;

    printf("before create\n");
    pthread_create(&p1, NULL, dostuff(), NULL);
    printf("after create\n");

    pthread_join(p1, NULL);
    printf("joined\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T13:08:09.110

因为在你调用`pthread_create`你实际上*调用*了函数，并且当它返回`NULL` `pthread_create`时会失败。这将无法正确初始化`p1`，因此（可能）会在`pthread_join`调用中导致未定义的行为。

要解决此问题，请将函数指针传递给`pthread_create`调用，不要调用它：

```
pthread_create(&p1, NULL, dostuff, NULL);
/* No parantehsis --------^^^^^^^ */ 
```

这也应该教你检查函数调用的返回值，`pthread_create`失败时返回非零值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T13:07:50.387

您需要修复函数类型和调用方式`pthread_create`：

```
void * dostuff(void *) { /* ... */ }
//             ^^^^^^ 
```

```
pthread_create(&p1, NULL, dostuff, NULL);
//                        ^^^^^^^ 
```

# excel - 警告用户空单元格并根据前列中的值指示位置

> ID：16083822
> 
> 赞同：2
> 
> 时间：2013-04-18T13:06:50.913
> 
> 标签：excel, excel-2010, msgbox, vba

我是 VBA 新手。我有一个我认为很简单的问题，但我愚蠢地失败了。我必须生成`MsgBox`警告用户在空白单元格中输入数据。

我还必须通过在前一栏中指明参数来提及空白单元格的目的地。实际上我的excel列表很大，但是，我上传的图片证明了我的需求。

在 AI 列中输入了公司的名称 - 法拉利、奥迪和兰博基尼，而在 BI 列中提到了他们各自的汽车。在 C、D、EI 列中提到了他们几个月的销售额。如果用户没有输入一个条目的销售数字，我需要在他检查数据有效性时警告他。

此图片的信息应为： *请输入兰博基尼 Aventador 和兰博基尼 Veneno 的销量。*

在我的图像中，黄色突出显示表示未输入数据。在我的文件中，我只有一列（只有一个月）用于销售，但有数千行（用于汽车）。

![快照图像](https://i.stack.imgur.com/U4ct7.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:31:01.830

假设您的数据如下所示

![在此处输入图像描述](https://i.stack.imgur.com/hqKEB.png)

试试这个

```
Private Sub CommandButton1_Click()
    Dim ws As Worksheet
    Dim lrow As Long, i As Long

    Set ws = ThisWorkbook.Sheets("Sheet3")

    With ws
        lrow = .Range("A" & .Rows.Count).End(xlUp).Row

        For i = 4 To lrow
            If Application.WorksheetFunction.CountA(.Range("C" & i & ":E" & i)) <> 3 Then
                MsgBox "Please Enter the number of units of " & .Range("B" & i).Value & " Sold"
                Exit Sub
            End If
        Next i
    End With

    MsgBox "Data Validated"
End Sub 
```

这是你运行代码时得到的

![在此处输入图像描述](https://i.stack.imgur.com/0bDTO.png)

当一切都被填满时

![在此处输入图像描述](https://i.stack.imgur.com/2yKBJ.png)

# iphone - IOS：如何创建主视图

> ID：16083825
> 
> 赞同：1
> 
> 时间：2013-04-18T13:06:59.690
> 
> 标签：iphone, ios, objective-c, uistoryboard

我开始了一个带有故事板的项目，它有很多视图，每个视图都有相同的标题（带有图像、公司名称和两个按钮）。我想在主视图中执行一次，并使其可重复用于其他视图。它就像一个带有页眉和页脚的主视图。我怎么能这样做？

这是我从cero开始的第一个项目，我想让它尽可能有条理。使用故事板和 MVC 的最佳实践是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:14:16.737

在情节提要中没有这样做的特殊方法。

但是您可以通过自定义轻松做到这一点`UIView`。

创建一个子类`UIView`并将所有常见的设计放入其中。

在`UIView`每个`UIViewController.UIView`. `UIView's`现在在身份检查器中使用您的自定义类设置这个顶级类。

一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:26:25.453

在情节提要中进行此操作的一种原始方法是在那里定义您的主视图，选择其所有元素，复制它们并将它们粘贴到其他视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:34:59.720

您可以继承 UIViewController 以向其视图添加标题，并使用 UITableViewController 将其设置为 tableview 标题。

# python - 从 sprites.Group() 中删除/删除第一个 N 或最后一个 N

> ID：16083829
> 
> 赞同：1
> 
> 时间：2013-04-18T13:07:18.973
> 
> 标签：python, python-2.7, pygame

因此，假设您有一个精灵组，并且您向其中添加了一堆东西：

```
all_shelfs = pygame.sprite.Group()
shelf_tracking_list = []

#making shelfs
build_lvl = HEIGHT - 150
#group A
for i in xrange(100):
    wid = random.randint(120,320)
    pos = [random.randint(0, WIDTH-wid), random.randint(build_lvl-20, build_lvl), wid]
    all_shelfs.add(Shelf(pos[0],pos[1], pos[2]))
    build_lvl = build_lvl - 60

#group B
for i in xrange(100):
    wid = random.randint(120,320)
    pos = [random.randint(0, WIDTH-wid), random.randint(build_lvl-20, build_lvl), wid]
    all_shelfs.add(Shelf(pos[0],pos[1], pos[2]))
    build_lvl = build_lvl - 60
#group C
for i in xrange(100):
    wid = random.randint(120,320)
    pos = [random.randint(0, WIDTH-wid), random.randint(build_lvl-20, build_lvl), wid]
    all_shelfs.add(Shelf(pos[0],pos[1], pos[2]))
    build_lvl = build_lvl - 60

shelf_tracking_list = all_shelfs.sprites() 
```

例如，如何删除 A 组？这是我添加的第一组。我注意到我不能真正使用这个shelf_tracking_list修改组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:49:16.497

如果您要跟踪*每个组*中的精灵，则可以使用该`sprite.Group.remove(*sprites)`功能删除整个组，如此处的文档中所述：http: [//www.pygame.org/docs/ref/sprite.html#pygame。 sprite.Group.remove](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group.remove)

```
# group A
group_a = list()
for i in xrange(100):
    wid = random.randint(120,320)
    pos = [random.randint(0, WIDTH-wid), random.randint(build_lvl-20, build_lvl), wid]
    new_shelf = Shelf(pos[0], pos[1], pos[2])
    group_a.append(new_shelf)
    build_lvl = build_lvl - 60
all_shelfs.add(group_a) 
```

然后，当您想从中删除整个组时`all_shelfs`：

```
all_shelfs.remove(group_a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:15:01.640

*由于您要问的是如何删除逻辑组，而不仅仅是 N 个元素：*根据您的程序，将精灵放在多个组中可能会大大简化事情。

您可以将一个精灵放在多个组中以引用同一个精灵。然后，如果您使用`kill()`它，**则会将其从所有组中删除**。否则`remove(*groups)`用于特定组的删除。

```
for i in xrange(100):
    wid = random.randint(120,320)
    pos = [random.randint(0, WIDTH-wid), random.randint(build_lvl-20, build_lvl), wid]
    shelf = Shelf(pos[0],pos[1], pos[2])
    all_shelfs.add(shelf)
    shelfs_a.add(shelf)
    build_lvl = build_lvl - 60

#group B
for i in xrange(100):
    wid = random.randint(120,320)
    pos = [random.randint(0, WIDTH-wid), random.randint(build_lvl-20, build_lvl), wid]
    shelf = Shelf(pos[0],pos[1], pos[2])
    all_shelfs.add(shelf)
    shelfs_b.add(shelf)
    build_lvl = build_lvl - 60

# ...

# then to erase from both groups
for shelf in shelfs_a:
    shelf.kill() 
```

# jquery - 使用 jQuery 将链接项连接到内容 div id

> ID：16083830
> 
> 赞同：0
> 
> 时间：2013-04-18T13:07:19.023
> 
> 标签：jquery, html, css, nav

我正在尝试创建一个使用单个网页的简单的多选项卡导航。我的内容是这样排列的：

HTML

```
<ul id="nav">
    <li><a href="tab1">Tab 1</a></li>
    <li><a href="tab2">Tab 2</a></li>
    <li class="active"><a href="tab3">Tab 3</a></li>
</ul><!--/#nav-->

<div id="content-box">
    <div id="tab1">
        <!--content from tab1-->
    </div><!--/#tab1-->

    <div id="tab2">
        <!--content from tab2-->
    </div><!--/#tab2-->

    <div id="tab3">
        <!--content from tab3-->
    </div><!--/#tab3-->

</div><!--/#content-box--> 
```

jQuery：

```
$("#nav li").on("click", function(event){
        $("#nav li").removeClass("active");
        $(this).addClass("active");
        $("#content-box").children().hide();
    }); 
```

我的问题是我不知道如何将`li`with 类链接`active`到相应的`div`. 我所有的选项卡 div 都设置为隐藏，并且我有一个名为`.activeSlide`which turn sets的类`visibility: visible`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:15:33.240

使用 html 5`data`属性链接 div

**html**

```
<ul id="nav">
  <li data-content="tab1">Tab 1</li>
  <li data-content="tab2">Tab 2</li>
  <li data-content="tab3" class="active">Tab 3</li>
</ul><!--/#nav--> 
```

**jQuery**

```
$("#nav li").on("click", function(event){
    $("#nav li").removeClass("active");
    $(this).addClass("active");
    $("#content-box").children().hide();
    $('#'+ $(this).data('content')).show(); 
    //OR
    $("#content-box").children().removeClass('activeSlide');
    $('#'+ $(this).data('content')).addClass('activeSlide');
}); 
```

[在这里摆弄](http://jsfiddle.net/P5UGt/1/)

**更新**

在准备功能中添加这个

```
 $(document).ready(){
     $("#content-box").children().hide();
    $("#nav li").on("click", function(event){
      ...... //above function goes here
    });

}); 
```

[更新的小提琴](http://jsfiddle.net/P5UGt/2/)

但是我建议您使用[jquery ui 选项卡](http://jqueryui.com/tabs/)而不是重新发明轮子... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:14:21.677

在您的点击事件结束时：

```
$('#' + $('a', this).attr('href')).show(); 
```

我要提醒的是，如果您打算在单个网页上包含大量内容，您可能需要考虑一种让用户为某些内容添加*书签*的方法，仅上述设计就很难做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:17:48.257

改成这样，

*HTML*

删除 id tab1、tab2、tab3。放置类“选项卡”。

喜欢，

```
<div class="tab"> 
```

而不是 id="tab1" & "tab2" & "tab3"

*JAVASCRIPT*

```
$("#nav li")
    .live("click", function(event){
            var _index = $(this).index();
            $(".tab").hide();
            $(".tab:eq("+_index+")").show();

            $(this).siblings().removeClass('active');
            $(this).addClass('active');
     }); 
```

# java - JVM 是否按功能管理类代码？拆分大型决策函数对内存使用有效吗？

> ID：16083834
> 
> 赞同：1
> 
> 时间：2013-04-18T13:07:23.730
> 
> 标签：java, optimization, memory-management, coding-style, jvm

# 问题

在基于服务器的 java 解决方案中，我们需要一个更大的带有静态值的查找表（大约 300 kB，但数据每年都在增加，明年会有新的值）。

通常表会放在数据库中，但我们现在讨论在 Java 类中以 Java 代码的形式实现它。我将只使用一个计算表值的成员函数对类进行编程。不需要对象实例或其他内存 - 只需代码。

# 编码表

```
public class Lookup {

 public static float getValue (int year, int c1, int c2, int c3) {
    if (year == 2012) {
       if (c1 == 1) { // about 70 kByte of code
             ....
            return 7.34;
       }
    }
    if (year == 2013) { // about 70 kByte of code
       if (c1 == 1) {
         ....
            return 8.23;
    }
  }

} 
```

# 我的问题

该表逐年增加，很少使用较旧的年份。每年实现一个函数而不是一个将年份作为参数的函数会是一个优势吗？每年实施一门课程会是一个优势吗？JVM 会检测到没有使用较早的年份并释放内存吗？

# 每年的特殊功能

这是否更好？更灵活的内存消耗？

```
public class Lookup {

  public static float getValue (int year, int c1, int c2, int c3) {
    if (year == 2012) return Lookup.getValue2012 (c1, c2, c3);
    if (year == 2013) return Lookup.getValue2012 (c1, c2, c3);
  }

  public static float getValue2012 (int year, int c1, int c2, int c3) {
    if (c1==1) { // about 70 kByte of code
             ....
            return 7.34;
    }
  }
  public static float getValue2013 (int year, int c1, int c2, int c3) {
    if (c1==1) { // about 70 kByte of code
             ....
            return 8.23;
    }
 }
} 
```

# 每年的特殊课程

还是这样更好？更灵活的内存使用？

```
public class Lookup {

  public static float getValue (int year, int c1, int c2, int c3) {
    if (year == 2012) return Lookup2012.getValue (c1, c2, c3);
    if (year == 2013) return Lookup2013.getValue (c1, c2, c3);
  }

}
public class Lookup2012 {

  public static float getValue (int year, int c1, int c2, int c3) {
    if (c1==1) { // about 70 kByte of code
             ....
            return 7.34;
    }
  }
}

public class Lookup2013 {

  public static float getValue (int year, int c1, int c2, int c3) {
    if (c1==1) { // about 70 kByte of code
             ....
            return 8.23;
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:45:24.147

要回答您的问题，我认为在类之间拆分静态方法或将它们放在同一个类中没有任何区别。原因是，无论它们在哪里声明，静态方法都只会在类加载器启动期间加载到 JVM 中一次，并保留在内存中直到 webapp 被取消部署。此外，一旦方法完成执行并且所有本地引用都被垃圾收集，该方法的内存将被回收。

# regex - 如何根据正则表达式匹配分配类（在 perl 中排序）

> ID：16083837
> 
> 赞同：0
> 
> 时间：2013-04-18T13:07:29.873
> 
> 标签：regex, perl, sorting

我正在从文件中读取。基于一列中的值，我想为其分配我自己的类/标签。

这些正则表达式：

'LTR*','MLT*','MST*' ...属于 HERV 类。

'Charlie*','Looper*' ... 属于类 DNA

现在我有两个数组，一个带有正则表达式，一个带有各自的类：

```
 my @array = map { qr{$_} } ('Alu*', 'HERV*', 'Charlie*' ...
 my @classes = ('Alu', 'HERV', 'DNA', 'LINE' ... 
```

这样我就知道如果我的线与 Charlie* 匹配，它属于类 DNA。

总而言之，对于文件的每一行，我都在循环整个数组并寻找匹配项：

```
for my $i (0 .. $#array) {

        if ($type =~ m/$array[$i]/) { 
                       my $class=$classes[$i];
        }

} 
```

当然，这不是太聪明。最好说：“这组正则表达式属于这个类”，这表明使用哈希。

但是，我认为循环所有行非常不方便，而不是 hashmap 的所有键，然后是某些键的所有值，并且当匹配时，使用键作为结果类/标签。这是一个好的解决方案吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:19:08.597

你可以这样做：

```
my %re = (
       HERV=>qr/LTR|MLT|MST/,
       DNA=> qr/Charlie|Looper/
   );
my $class;
for (keys %re) {
    $class = $_, last if ($type =~ $re{$_});
} 
```

这将为您节省一些正则表达式编译和一个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:12:45.323

CPAN 模块[Text::Prefix::XS](http://search.cpan.org/dist/Text-Prefix-XS/)似乎可以执行您想要的操作：确定是否有任何前缀列表与给定文本匹配。我没有使用过该模块，但据我所知，您会执行以下操作：

```
my %prefix2class = ( LTR => 'HERV',
                     MLV => 'HERV',
                     ...
                     Charlie => 'DNA' );

my $search = prefix_search_create( keys %prefix2class );

# ... now, for a given $type, no need to loop ...
my $pfx = prefix_search($search, $type);
my $class = $prefix2class{$pfx}; 
```

（注意：在我看来，您的正则表达式就像被怀疑编译为正则表达式的 shell 样式/fnmatch 样式模式，据此我推断您实际上想要简单的前缀匹配。否则，`/Charlie*/`例如，正则表达式将匹配`Charli`, `Charlieeee`,`fooCharliebar`等开——这似乎不太可能代表你的*“一栏中的价值”*。）

# plugins - Sublime text 大 javascript 对象大纲

> ID：16083839
> 
> 赞同：2
> 
> 时间：2013-04-18T13:07:32.543
> 
> 标签：plugins, sublimetext2

我目前正在使用一个巨大的 javascript 对象，当我在一个函数上时我迷路了......我没有关于这个函数的信息（他的父母等）

我想知道是否有人有获得更多信息的技巧。大纲 (CTRL+R) 是个好东西，但对于这种类型的文档来说太精简了。

也许是插件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:19:13.840

您可以尝试[ShowFunctionName](https://github.com/huyqt/ShowFunctionName)。它应该在状态栏中显示函数名称。我没有测试过它，但我浏览了源代码。它查找特定范围，从当前光标位置开始，向后移动。除了第一个“函数名称”之外，我不知道有任何现成的东西，但如果有人构建了一个插件来做到这一点，我不会感到惊讶。

# javascript - 查找内部具有特定链接的 div

> ID：16083845
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:08:02.493
> 
> 标签：javascript, jquery

如果给了我一个 a 类，`div $('.my_class')`并且 a`div`包含一个`a`带有某个 url 的链接，我也得到了这个链接，我该如何找到这个`div`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:10:07.433

这是如何做到的：

```
$('div.my_class a[href="LINK"]').closest('div.my_class'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:09:57.250

首先找到您的 .my_class 的子链接，然后找到与该类最近的父链接。这将返回你原来的 div：

`$('.my_class a[href="mylink.com"]').closest('.my_class');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:10:00.563

尝试这个

```
var certain_url = 'http://www.stackoverflow.com';
//...
var the_link = $('div.my_class a[href="'+certain_url+'"]').closest('div.my_class') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:10:16.253

听起来您的标记如下所示：

```
<div class="my_class">
   <a href="some_link">Click me</a>
</div> 
```

所以在 jQuery 中它看起来像：

```
$(".my_class").find("a[href='some_link']").closest(".my_class"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:11:27.580

像这样。

```
$('div.my_class a[href="mylink"]').parent(); 
```

# android - 第二个 HttpUrlConnection 挂在真实设备上

> ID：16083847
> 
> 赞同：1
> 
> 时间：2013-04-18T13:08:06.660
> 
> 标签：android, httpurlconnection

我在我的长轮询库[SignalA中使用](https://github.com/erizet/SignalA)[basic-http-client](https://code.google.com/p/basic-http-client/)。basic-http-client 基于 HttpUrlConnection。在模拟器中运行时，可以打开一个长时间运行的后请求并同时执行另一个后请求。在真实设备上运行我的代码时，第二个 POST 会挂起，直到第一个 POST 完成。它挂在 getResponseCode 函数上。

在模拟器或真实设备上运行有什么区别？如何启用多个 AND 同时请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:37:41.073

[引用此处](https://stackoverflow.com/questions/3352424/httpurlconnection-openconnection-fails-second-time)提出的类似问题的解决方案：-

保持连接处于活动状态时使用的连接池`HttpURLConnection`已损坏，因此它会尝试使用已被服务器关闭的连接。默认情况下，Android 在所有连接上设置 KeepAlive。

`System.setProperty("http.keepAlive", "false");`是一种为所有连接禁用 KeepAlive 的解决方法，这样您就可以避免连接池中的错误。

`conn.setRequestProperty("Connection","Keep-Alive");`为这个特定的连接打开 KeepAlive，本质上是相反的`System.setProperty("http.keepAlive", "false");`。

此外，我总是显式调用 connect()，因为它可以清楚地表明您在哪里结束连接设置。我不确定调用这个方法是否是可选的。

```
System.setProperty("http.keepAlive", "false");
HttpURLConnection conn = (HttpURLConnection) mURL.openConnection();
conn.setUseCaches(false); 
conn.setRequestProperty("User-Agent", useragent);
conn.setConnectTimeout(30000);
conn.setDoOutput(true); 
conn.setDoInput(true); 
consumer.sign(conn);

conn.connect();

InputSource is = new InputSource(conn.getInputStream()); 
```

# java - 强制 Maven 3 复制“提供的”依赖项

> ID：16083858
> 
> 赞同：1
> 
> 时间：2013-04-18T13:08:37.410
> 
> 标签：java, maven

我使用 copy-dependencies 目标来复制当前工件的依赖项。但它不会复制范围为“提供”的依赖项。如何解决？

xml配置是标准的：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>install</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>lib</outputDirectory>
                        <overWriteReleases>true</overWriteReleases>
                        <overWriteSnapshots>true</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                        <excludeArtifactIds>project-services</excludeArtifactIds>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <finalName>project-web</finalName>
</build> 
```

我为什么要这样做？因为我必须同时支持 ant 和 maven 构建工作。因此，我想通过运行**mvn install -o**将所有依赖项复制到单独的目录中。在 Ant build.xml 中，我将该目录的路径包含为类路径。之后 Ant 构建 ear 文件并包含整个 lib 目录，没有系统 tools.jar 和其他“提供”的 jar。Apache Maven 的版本是 3.0.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:11:04.567

正如插件使用 includeScope 所记录的：

[http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html#includeScope](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html#includeScope)

**编辑**：

> 我为什么要这样做？因为我必须同时支持 ant 和 maven 构建工作。

考虑使用 Ivy 来管理与 Ant 的依赖关系：http: [//ant.apache.org/ivy/](http://ant.apache.org/ivy/)

这里有一篇文章如何配置 Ivy 以连接到 Nexus：

[https://support.sonatype.com/entries/21627528-how-do-i-configure-my-ivy-build-to-download-artifacts-from-nexus](https://support.sonatype.com/entries/21627528-how-do-i-configure-my-ivy-build-to-download-artifacts-from-nexus)

# php - PHP 分析 - 需要一些建议

> ID：16083867
> 
> 赞同：0
> 
> 时间：2013-04-18T13:08:59.320
> 
> 标签：php, profiling

我对 php 很陌生，对分析也很陌生，所以如果我的问题有点“简单”，请原谅我。

因此启用 xdebug 并下载 Kcachegrid 开始分析，阅读我能找到的内容。我的问题是我想提高速度，但是每当我在 Kcachegrid 中查看我的 xdebug 报告时，具有相同硬件的相同脚本运行的执行时间仅不同（从 1.1 到 1.9 秒）。我在本地主机上执行它，这样我就不必处理网络速度。

我已经从 John Lim [http://phplens.com/lens/php-book/optimizing-debugging-php.php](http://phplens.com/lens/php-book/optimizing-debugging-php.php)阅读了这篇非常好的文章，在他的文章中他正在处理修复执行时间。我不知道我做错了什么，也不知道我怎么能得到修复时间，所以我可以看看我是否真的得到了更好的结果。

任何建议，或者您已阅读并发现对 php 分析有用的任何资源都将被采纳。感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:15:09.697

xdebug 很好，但我发现 XHprof 是 Facebook 为其生产分析编写的扩展程序，效果要好得多。它向您显示所有函数的 Wall 时间和调用的堆栈，并且可以深入到多个级别并查看每次调用的 wall 时间。您还可以比较和合并类似的呼叫，并在一段时间内进行比较。看看 XHprof 上的演示及其实现的非常简单的扩展。这是启用页眉和页脚的问题，您就可以参加比赛了。

[http://xhprof.io/](http://xhprof.io/)

干杯，图斯詹坦

# sorting - 我需要按价格排序，然后按时间排序，以获得相同的价格多维关联数组

> ID：16083869
> 
> 赞同：1
> 
> 时间：2013-04-18T13:09:04.347
> 
> 标签：sorting, multidimensional-array, foreach, associative-array

我需要按价格排序，然后是价格相同的东西。我有按价格排序的。这是我拥有的数组和排序：

```
<?php
$a = array(
            1 => array('price' => 9.25, 'timestamp_added' => 1301945848, 'name' => 'pencils'),
            4 => array('price' => 19.15, 'timestamp_added' => 1299267448, 'name' => 'crayon box'),
            15 => array('price' => 4.25, 'timestamp_added' => 1299785848, 'name' => 'markers'),
            2 => array('price' => 4.28, 'timestamp_added' => 1299785848, 'name' => 'eraser'),
            44 => array('price' => 13.99, 'timestamp_added' => 1299872248, 'name' => 'trapper'),
            32 => array('price' => 9.25, 'timestamp_added' => 1299872248, 'name' => 'notebook'),
            14 => array('price' => 13.99, 'timestamp_added' => 1301945848, 'name' => 'sharpener'),
            5 => array('price' => 15.01, 'timestamp_added' => 1299872248, 'name' => 'calculator'),
            60 => array('price' => 15.01, 'timestamp_added' => 1397433600, 'name' => 'calculator'),
            70 => array('price' => 15.01, 'timestamp_added' => 1293840000, 'name' => 'calculator'),
            80 => array('price' => 15.01, 'timestamp_added' => 1363132800, 'name' => 'calculator')
        );

function printList($a) {
            echo "<br><br> Printing the array: <br>";
            foreach ($a as $key => $value) {
                echo "<br /> Product ID $key <b>Price:</b> $" . $value['price'] . " <b>Timestamp:</b> "
                . $value['timestamp_added'] . " <b>Name:</b> " . $value['name'] . " <b>Date Added: </b>" . date('M d, Y', $value['timestamp_added']);
            }
        }

        $sortByPrice = function ($a, $b) {
                    return ($a['price'] >= $b['price']) ? 1 : 0;
                };
        printList($a);
        echo "<br><br>Sorting by price...";
        uasort($a, $sortByPrice);
        printList($a);
        ?> 
```

如果价格相同，我如何让它按时间戳排序？我一直在尝试更改 sortByPrice 函数，以便它做到这一点。我应该有两个排序功能，还是一个更好的排序功能？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:19:34.450

为什么不在 sortByPrice 匿名函数中扩展它，以便在价格相等时比较时间戳？如下：

```
$sortByPrice = function ($a, $b) {
                   if($a['price'] == $b['price']){
                       return ($a['timestamp_added'] >= $b['timestamp_added']) ? 1 : 0;
                   }
                   else{
                       return ($a['price'] >= $b['price']) ? 1 : 0;
                   }
            }; 
```

干杯，

# c# - 如何获取文本基线与标签水平边框之间的距离？

> ID：16083873
> 
> 赞同：3
> 
> 时间：2013-04-18T13:09:17.350
> 
> 标签：c#, winforms

我想获得 C# 中文本基线和标签底部边框之间的确切距离。我想要这个，因为我想在文本下画一条线（不想使用带下划线的字体，因为它太紧/接近文本）。

这是我的尝试：

```
//This is placed in the custom label class
int dy = (int)((ClientRectangle.Height - Font.GetHeight())/2); 
```

但这并不准确，dy 返回大约 3 并且绘制到标签的线距离文本的基线太远。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:00:20.463

要获取标签的文本基线，假设您在自定义标签类中，在绘图处理程序中。

```
Font myFont = this.Font;
FontFamily ff = myFont.FontFamily;

float lineSpace = ff.GetLineSpacing(myFont.Style);
float ascent = ff.GetCellAscent(myFont.Style);
float baseline = myFont.GetHeight(e.Graphics) * ascent / lineSpace; 
```

信用在[这里](https://stackoverflow.com/a/8290654/897326)。

# xslt - 创建用于添加序列的递归字符串函数

> ID：16083877
> 
> 赞同：3
> 
> 时间：2013-04-18T13:09:28.427
> 
> 标签：xslt, xslt-2.0

我有一个具有挑战性的问题，到目前为止我无法解决。

在我的 xlst 中，我有一个包含字符串的变量。我需要将以下序列 [eol] 添加到此字符串中。在一个固定位置，即每 65 个字符

我想使用函数或模板来递归添加这个字符。原因是字符串长度可以变化。

```
 <xsl:function name="funct:insert-eol" as="xs:string" >
    <xsl:param name="originalString" as="xs:string?"/>
    <xsl:variable name="length">
        <xsl:value-of select="string-length($originalString)"/>
    </xsl:variable>
    <xsl:variable name="start" as="xs:integer">
        <xsl:value-of select="1"/>
    </xsl:variable>
    <xsl:variable name="eol" as="xs:integer">
        <xsl:value-of select="65"/>
    </xsl:variable>
    <xsl:variable name="newLines">
        <xsl:value-of select="$length idiv number('65')"/>
    </xsl:variable>
    <xsl:for-each select="1 to $newLines">
        <xsl:value-of select="substring($originalString, $start, $eol)" />
    </xsl:for-each>
    </xsl:function> 
```

我写的代码越多，我需要引入的变量就越多。这仍然是我理解的不足。

例如，我们希望每 5 个字符一个 [eol]

## 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

aaaaa[eol]aabbb[eol]bbbcc[eol]ccccc[eol]cc

* * *

希望有人对我有一个起点..

问候德克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:43:51.200

**相当直接和简短——不需要递归**（甚至可以指定为单个 XPath 表达式）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:param name="pLLength" select="5"/>

 <xsl:template match="/*">
  <xsl:variable name="vText" select="string()"/>

  <xsl:for-each select="1 to string-length($vText) idiv $pLLength +1">
    <xsl:value-of select="substring($vText, $pLLength*(position()-1)+1, $pLLength)"/>
    <xsl:if test=
    "not(position() eq last()
       or position() eq last() and string-length($vText) mod $pLLength)">[eol]</xsl:if>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**将此转换应用于此 XML 文档时：**

```
<t>aaaaaaabbbbbbccccccccc</t> 
```

**产生了想要的正确结果：**

```
aaaaa[eol]aabbb[eol]bbbcc[eol]ccccc[eol]cc 
```

**处理此 XML 文档时：**

```
<t>aaaaaaabbbbbbcccccccccddd</t> 
```

**再次产生所需的正确结果：**

```
aaaaa[eol]aabbb[eol]bbbcc[eol]ccccc[eol]ccddd[eol] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:05:18.477

您可以将其视为分组问题，使用`for-each-group`：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf">

<xsl:function name="mf:insert-eol" as="xs:string">
  <xsl:param name="input" as="xs:string"/>
  <xsl:param name="chunk-size" as="xs:integer"/>
  <xsl:value-of>
  <xsl:for-each-group select="string-to-codepoints($input)" group-by="(position() - 1) idiv $chunk-size">
    <xsl:if test="position() gt 1"><xsl:sequence select="'eol'"/></xsl:if>
    <xsl:sequence select="codepoints-to-string(current-group())"/>
  </xsl:for-each-group>
  </xsl:value-of>
</xsl:function>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="text">
  <xsl:copy>
    <xsl:sequence select="mf:insert-eol(., 5)"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

该样式表转换

```
<root>
  <text>aaaaaaabbbbbbccccccccc</text>
</root> 
```

进入

```
<root>
  <text>aaaaaeolaabbbeolbbbcceolccccceolcc</text>
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:51:58.507

试试这个：

```
<?xml version='1.0' ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xsl:param name="TextToChange" select="'aaaaaaabbbbbbccccccccc'"/>
  <xsl:param name="RequiredLength" select="xs:integer(5)"/>

  <xsl:template match="/">
    <xsl:call-template name="AddText"/>
  </xsl:template>

  <xsl:template name="AddText">
    <xsl:param name="Text" select="$TextToChange"/>
    <xsl:param name="TextLength" select="string-length($TextToChange)"/>
    <xsl:param name="start" select="xs:integer(1)"/>
    <xsl:param name="end" select="$RequiredLength"/>
    <xsl:choose>
      <xsl:when test="$TextLength gt $RequiredLength">
        <xsl:value-of select="substring($Text,$start,$end)"/>
        <xsl:text>[eol]</xsl:text>
        <xsl:call-template name="AddText">
          <xsl:with-param name="Text" select="substring-after($Text, substring($Text,$start,$end))"/>
          <xsl:with-param name="TextLength"
            select="string-length(substring-after($Text, substring($Text,$start,$end)))"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$Text"/>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template>

</xsl:stylesheet> 
```

# c++ - C++子类不能从父类继承私有成员？

> ID：16083879
> 
> 赞同：1
> 
> 时间：2013-04-18T13:09:30.210
> 
> 标签：c++, inheritance, private

我正在使用 Win8 VC++2012。

上面的代码是为了说明子类B在任何情况下都不能访问A::a。我也不能更改 A::a 但 A::b 和 A::c 的访问属性。

所以 A::c 不是从 A 继承到 B 的。但是 sizeof(A) 和 sizeof(B) 分别是 12 和 24，也就是说 A::a DO 占用 B 中的内存。

1.  B 如何将 A::a 存储在它的内存中而永远无法访问它？
2.  C ++ Primer一书说，我们可以恢复基类成员的访问属性，但不能更改它。这里我的代码显示我可以在 B 中将 A::b 的访问属性从受保护更改为公开。为什么？

这是代码：

```
#include <iostream>
using namespace std;

class A
{
private:
    int a;
protected:
    int b;
public:
    int c;

    A(int a, int b, int c): a(a), b(b), c(c)
    {
        cout << "A: ";
        cout << a << " ";
        cout << b << " ";
        cout << c << endl;
    }
};

class B: protected A
{
private:
    int d;
protected:
    int e;
    //using A::a; COMPILE ERROR
public:
    int f;
    //A::a;  COMPILE ERROR
    using A::c; //RESTORE A::c public access
    A::b; // change A::b from protected to public

    B(int d, int e, int f): A(d, e, f), d(d), e(e), f(f)
    {
        cout << "B\n";
        //cout << a << endl; COMPILE ERROR
        cout << b << " ";
        cout << c << " ";
        cout << d << " ";
        cout << e << " ";
        cout << f << endl;
    }
};
int main()
{
    A a(1,2,3);
    B b(4,5,6);

    cout << "sizeof(A)=" << sizeof(A) << endl; //OUTPUT 12
    cout << "sizeof(B)=" << sizeof(B) << endl; //OUTPUT 24
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:13:06.690

子级继承父级的私有成员，但不能访问它们。访问使他们`protected`

```
class A
{
protected: // <<------------ make `a` as protected in parent
    int a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:13:50.270

当您使用继承时，您正在创建基类的实例以及派生类的实例。基类内部的所有成员都是在您实例化派生类时构造的，即使派生类无法访问它们。

如果您需要成员在基类中是私有的，但您仍想在派生类中访问它。在基类中创建一个受保护的访问器，让您可以访问私有成员。

```
 protected:    
 int &geta() { return a; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:14:39.157

> 所以 A::c 不是从 A 继承到 B

你的意思

> 所以 A::a 不是从 A 继承到 B

但即便如此，它确实是继承的。它只是不能直接访问。但是`B`仍然会有一个`a`.

为什么这是必要的？因为您可以拥有**可以`A`设置或获取`a`.** `a`这些函数可以让B间接访问它自己的。

例如

```
class A {
private:
    int a;      // a is private
public:
    void set_a(int i) {a = i;}
};

class B : protected A {
public:
    using A::set_a;   // we bring set_a to public access
};

int main() {
    B b;
    b.set_a(2);   // change b.a indirectly
    b.a = 2;      // Error
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:16:41.093

我不明白问题是什么：

B 是 A，这就是为什么即使 B 无法访问它，a 属性也会占用一些空间。

如果有一个公共方法 geta() 返回 a，如果 a 不在 B 中，它怎么能返回 a？

# c - scanf 中的固定长度数组。带有格式的警告

> ID：16083880
> 
> 赞同：0
> 
> 时间：2013-04-18T13:09:34.097
> 
> 标签：c, warnings, string-formatting, scanf

所以我输入了以下内容：

```
typedef char array[25]; 
```

在我的代码中，我像这样调用 scanf ：

```
scanf("%s",array); 
```

但是当我通过 char*[25] 时，我收到 %s 期待 char* 的警告。有没有办法摆脱这个警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:23:43.250

[typedef](http://en.wikipedia.org/wiki/Typedef)定义了一种数据类型，以便您可以使用它来定义具有相同数据类型的不同变量。喜欢：

```
typedef char employee[25];
typedef char customer[25];
employee a, b;
customer y, z;
printf("Enter first employee's name: ");
scanf("%s",a);
printf("Enter customer's name: ");
scanf("%s",y); 
```

虽然数据类型是相同的，但定义它们是详细的事情。你需要做的就是：`array a;`然后`scanf("%s",a);`

希望你是清楚的核心！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:15:49.897

`array`是类型而不是对象。你不能将它作为参数传递给`scanf`

```
array a;
scanf("%s", a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:07:59.717

我假设您的代码是缩写的...

警告的实际原因是编译器知道两件事：您有一个长度有限的 char 数组，并且 scanf 将扫描原始字符串中给出的尽可能多的字符；可能会溢出为他们提供的数组。

这是一个真正的问题：编译器非常正确。

解决方法是更好地指定scanf格式。在这种情况下，我建议使用“%24s”来告诉 scanf 为该格式元素读取的最大字符数。

请记住允许空终止符 - 更好，明确地将数组 [len-1] 设为 0。

读取字符串的方法可能比 scanf 更好。例如，查看一些基于令牌的方法。

HTH，露丝

# javascript - Javascript：访问名称以数字开头的对象属性

> ID：16083883
> 
> 赞同：4
> 
> 时间：2013-04-18T13:09:47.350
> 
> 标签：javascript, jquery, json, variables, hashmap

我正在创建一个**Javascript** / **jQuery**应用程序。

我需要处理代表 a 的**JSON**响应`HashMap`，如下所示：

```
 {
    "accounts": {
      "MediaFire": {
       "provider": "MediaFire",
       "usedStorage": "779680",
       "totalStorage": "53687091200"
      },
      "4Sync": {
       "provider": "4Sync",
       "usedStorage": "620692",
       "totalStorage": "16106127360"
      }
    }
  } 
```

我使用了一个传递函数（我无法控制），它在 object 中返回解析的 JSON 响应`result`。

当我尝试访问`4Sync`这样的：

```
var usedStorage = result.accounts.4Sync.usedStorage; //doesn't work 
```

它不起作用，我认为**是因为开头的*4*** ... 与另一个对象相同的操作可以正常工作：

```
var usedStorage = result.accounts.MediaFire.usedStorage; //works 
```

我知道`result`object 包含 object `4Sync`，但我无法访问它。这是 Chrome 控制台的屏幕截图：

![Chrome 控制台的屏幕截图](https://i.stack.imgur.com/FalpN.png)

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T13:11:05.957

使用方括号：

```
var usedStorage = result.accounts["4Sync"].usedStorage; 
```

属性标识符可以以数字开头，但带有该`.`字符的成员表达式将只允许有效的变量标识符（因为其他任何内容都是模棱两可的）。为了解决这个问题，您可以使用方括号语法，它是等效的，但允许使用任何字符串。

如果你有兴趣，这里是[语法](http://es5.github.com/#x11.2)：

> *MemberExpression* :
>     *PrimaryExpression*
>     *FunctionExpression*
>     *MemberExpression* `[` *Expression* `]`
>     *MemberExpression* `.` *IdentifierName*

请注意方括号如何包含任何表达式，但`.`后面只能跟一个[IdentifierName](http://es5.github.com/#x7.6)（基本上，任何有效的标识符，加上 ES5 中的保留字）。

# knockout.js - KO数据绑定“文本：”到带有参数的函数

> ID：16083884
> 
> 赞同：8
> 
> 时间：2013-04-18T13:09:53.493
> 
> 标签：knockout.js

是否有可能以任何方式执行以下操作而不必通过临时可观察对象/计算可观察对象？我有用于查找以显示数据的通用数据：

```
<span data-bind="text: lookupContactName(31)"></span> 
```

结果：函数执行完毕，找到参数，逻辑ok，返回计算全名，但不显示（可能是因为没有observable）

```
<span data-bind="text: lookupContactName(contactId)"></span> 
```

结果：没有解析contactId，因此看不到正确的参数值。

我想为了让它正常工作，我需要创建自定义绑定？

一般来说：我开始怀疑我只加载一次数据并尝试匹配 id 的方法是否是一个好方法。有什么意见吗？我更擅长创建连接的数据库表/视图/SP？

谢谢，J。

在这里，是我正在使用的相关代码片段......我将学习 jsfiddle 以获得未来的帮助。

ALL ALERT 正在返回预期值...但文本数据绑定仍然没有收到值

一个通用的数据库：

```
customers.Contact = function () {
    var self = this;

    id = ko.observable();
    title = ko.observable();
    givenname = ko.observable();
    surname = ko.observable();
    fullName = ko.computed(function () {
        return title()+". "+givenname()+" "+surname();
    });

    return {
        id: id,
        title: title,
        givenname: givenname,
        surname: surname,
        fullName: fullName
    };
};
customers.ContactList = function () {

    var self = this;

    contactList = ko.observableArray([]); //.publishOn("ContactList");

    loadContactData = function () {
        var self = this;

        customers.helperDataService.getContactData(loadContactDataCallBack);
    };

    loadContactDataCallBack = function (json) {
        var self = this;

        $.each(json, function (i, p) {

            var contact = new customers.Contact().id(p.Id)
                                                  .title(p.Title)
                                                  .givenname(p.Name)
                                                  .surname(p.Surname);

            contactList.push(contact);
        });

    };

    lookupContactName = function (id) {
        var self = this;

       alert("value to be found: "+id);

        ko.utils.arrayForEach(contactList(), function (contact) {
            alert("SEARCH:  contactid: " + contact.id() + " - " + "id: " + id);
            if (contact.id() === id) {
                alert("FOUND: contactid: " + contact.id() + " - " + "id: " + id);
                alert("value:" + contact.fullName());
                return contact.fullName();
            }
        });
    };

    return {
        loadContactData: loadContactData,
        lookupContactName: lookupContactName
    };
}; 
```

从这里调用...（我将其更改为 contactId() 并将正确的值传递给函数）

```
<div>Creator: <span data-bind="text: lookupContactName(contactId())"></span></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-20T01:51:58.003

如果您`<span data-bind="text: lookupContactName(contactId())"></span>`在 foreach 循环中，那么您需要在该方法前面加上 $root，否则它将在循环通过的数组中查找“lookupContactName”。

尝试：

```
<div>Creator: <span data-bind="text: $root.lookupContactName(contactId())"></span></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T12:34:14.610

问题是您的查找函数没有返回值

```
ko.utils.arrayForEach(contactList(), function (contact) {
// some checking code
    return contact.fullName();
}); 
```

您的“返回”与传递给 arrayForEach 实用程序方法的内部函数有关。你需要这样的代码

```
var result;
ko.utils.arrayForEach(contactList(), function (contact) {
// some checking code
    result = contact.fullName();
});
return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:16:16.983

我不太确定你的问题是什么。如果你愿意，你可以这样做：

```
function lookupContactName(cid) {
    var obj = ... // Find your object by id;
    return ko.computed(function () {
       return obj.name() + obj.lastname();
    });
} 
```

它应该可以工作。

# ssrs-2008 - SSRS null 参数返回值

> ID：16083886
> 
> 赞同：1
> 
> 时间：2013-04-18T13:09:55.633
> 
> 标签：ssrs-2008, reporting-services

我有两个相互绑定的报告。在第一个报告中，当我选择一个字段时，我会转到第二个报告，该报告仅显示我在第一个报告中选择的行中的数据。第二个报告用于更新，因此它接受参数。我有三个允许空值和下拉列表的文本框。

首先，当我创建下拉列表并指定值并添加空值时，报告返回了我在第一个报告中选择的行，其中包含所有数据。现在我尝试将参数的值分配给数据库，但每次我访问此报告时，它首先要求从下拉列表中选择一个值，然后它将显示数据。

如何将 Null 值添加到从数据库中检索到的项目中，这样当默认选择 null 时，所有值都将返回而没有任何问题，并且不需要任何选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:22:50.417

您需要向数据集查询添加一个条件来处理 NULL 参数。例如：

```
WHERE @Parameter is NULL or ColumnValue = @Parameter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T13:35:11.437

Working with NULL valued parameters, I usually use this syntax:

```
WHERE ColumnValue = COALESCE(@Parameter, ColumnValue) 
```

# .net - Socket.Receive 在收到所有数据之前不会阻塞

> ID：16083893
> 
> 赞同：1
> 
> 时间：2013-04-18T13:10:07.310
> 
> 标签：.net, vb.net, sockets

哎！

我正在尝试获取一个 ftp 文件列表，并且已经有一个小型库可以做到这一点。问题是 Socket.Receive() 函数在收到所有数据之前不会阻塞。当我在该行设置断点时，它会接收所有数据，但如果我不这样做，则只有 38 个字节（应该在 380 左右）。

这是代码：

```
While True
    Dim bytes As Integer = cSocket.Receive(buffer, buffer.Length, SocketFlags.None)
    mes += ASCII.GetString(buffer, 0, bytes)
    If bytes < buffer.Length Then
        Exit While
    End If
End While 
```

正如我所说：如果断点设置在 .Receive 部分的行中，它会起作用。我可以使用一种解决方法来保证一个额外的循环，但这似乎很脏。有任何想法吗？

//编辑：所以让我添加更多信息。我不知道我会收到多少数据。该代码来自从 ftp 服务器接收数据的函数。我以为当消息以 CRLF 结尾时我可以停止，但我不能这样做，因为列出的每个文件之间都有一个 CRLF。示例：file1.textCRLFfile2.txtCLRFfile3.txtCRLF

有时，当我调用接收时，即使有更多文件要列出，它也只会返回一个最后带有 CRLF 的文件。所以这种情况对我来说似乎不稳定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T13:28:50.400

在这种情况下，“所有数据”到底是什么意思？在套接字关闭之前，总是可以有更多的数据。网络堆栈不知道也不关心某些数据在逻辑上属于一起。它被分成不同大小的 IP 数据包（由[复杂的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)确定）。

对于作为接收方的您来说，这意味着您将在收到数据时以块的形式获取数据。您需要继续打电话`Receive`，直到您知道您拥有所需的所有数据。

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/26f591ax.aspx)（重点是我的）：

> 如果您使用的是面向连接的 Socket，则 Receive 方法将读取尽可能多的数据，***最多可达***size 参数指定的字节数。

您在设置断点时看到不同行为的原因是，您实际上是在发送方发送数据时暂停您的应用程序。操作系统仍然会接收数据包并缓冲它们，直到某一点。标准缓冲区大小为 8192 字节，可以通过[`ReceiveBufferSize`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivebuffersize.aspx)属性进行更改。

## 代码

这如何转化为代码？假设您实际上知道需要接收多少数据，改进后的代码将如下所示：

```
Dim bytesRemaining As Integer = Buffer.Length
Dim sb As New StringBuilder
While bytesRemaining > 0
    Dim bytes As Integer = cSocket.Receive(Buffer,
                                           bytesRemaining, SocketFlags.None)
    bytesRemaining -= bytes
    sb.Append(ASCII.GetString(Buffer, 0, bytes))
End While
mes = sb.ToString() 
```

循环中的条件消失了，因为如果我们没有收到很多字节，我们不想退出，我们想继续阅读。`bytesRemaining`持续计数仍有多少字节要接收。

与您的问题无关，但我已将`mes`字符串连接替换为`StringBuilder`. 您可能会创建很多新字符串，所有（除了最后一个）都需要被垃圾收集。

# sql - 视图中的 Oracle 可空和不可空列

> ID：16083894
> 
> 赞同：2
> 
> 时间：2013-04-18T13:10:09.743
> 
> 标签：sql, oracle, oracle11g, nullable, sql-view

我在 Oracle 中有一张表。该表包括：EMPLOYEE_ID（NUMBER，Nullable，但 NULL 数为 0）和 EMPLOYEE_NUMBER（VARCHAR2，Nullable，但 NULL 数为 0）。

现在我在这个表上创建一个视图：

```
CREATE OR REPLACE FORCE VIEW APPS.XXKE_L2E_EMPLOYEE
(
   PERSON_ID,
   EMPLOYEE_NUMBER,
   ...
)
AS
   SELECT EMPLOYEE_ID,
          EMPLOYEE_NUMBER,
          ...
     FROM xxke.xxke_employees e
          INNER JOIN xxke.xxke_organizations o ON e.organization_id = o.organization_id
          INNER JOIN xxke.xxke_operating_units ou ON e.org_id = ou.org_id;

ALTER VIEW APPS.XXKE_L2E_EMPLOYEE
ADD CONSTRAINT XXKE_L2E_EMPLOYEE_V_PK
PRIMARY KEY(PERSON_ID) DISABLE; 
```

到底怎么可能在那个视图中 PERSON_ID 变为**Nullable**（即使使用 NVL 技巧），但 EMPLOYEE_NUMBER**不是 Nullable**

**问题**：如何让 Oracle 以某种方式创建视图，使 PERSON_ID 列在视图中变为 NOT Nullable？或者我怎样才能让我的 WCF oData 服务查询这个视图。目前在更新 edmx 文件后，我得到以下信息：

错误：Oracle.ssdl(227,6)：错误 0075：关键部分：XXKE_L2E_EMPLOYEE 类型的“PERSON_ID”无效。密钥的所有部分都必须不可为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:41:43.340

它变为可为空的原因是在创建视图查询时您在employee_id 上使用了nvl。员工在查询中不可为空，这就是它不可为空的原因。在视图中，oracle 使结果列可以为空。视图不是静态的，而只是一个查询。如果您不想遇到问题，您可以创建表的物化视图，并在查询中预先应用 nvl，然后查询将不会选择 null 可能。然后你可以做索引，查询会明显更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T10:53:53.183

如果您希望视图中的列不可为空，则与包含该列作为主键的表进行内部联接，并在视图定义中从该表中选择（在这种情况下）PERSON_ID。这样就解决了问题。

# c# - 按运算符对 Lambda 表达式进行分组并将它们与 DapperExtensions 的 PredicateGroups 一起使用

> ID：16083895
> 
> 赞同：4
> 
> 时间：2013-04-18T13:10:10.373
> 
> 标签：c#, extension-methods, dapper

根据我之前的问题：[`Pulling Apart Expression<Func<T, object>>`](https://stackoverflow.com/questions/15154783/pulling-apart-expressionfunct-object)- 我正试图让它更先进一点。目前，我可以这样做：

```
var matchingPeople = Connection.Get<Person>(p => p.MarketId == marketId); 
```

它将被转换为[DapperExtensions`FieldPredicate`](https://github.com/tmsmith/Dapper-Extensions/wiki/Predicates)：

```
// Assume I've successfully parsed p => p.MarketId == marketId into its constituent parts:
// left = p => p.MarketId, theOperator = Operator.Eq, right = marketId
Predicates.Field(left, theOperator, right); 
```

我现在希望能够做到这一点：

```
var matchingPeople = Connection.Get<Person>(p => p.MarketId == marketId && p.FirstName == "John" || p.FirstName == "Jack"); 
```

并生成如下所示的 SQL：

```
DECLARE @MarketId INT = 3
DECLARE @FirstName01 VARCHAR(MAX) = 'John'
DECLARE @FirstName02 VARCHAR(MAX) = 'Jack'

SELECT *
FROM Person
WHERE MarketId = @MarketId AND (FirstName = @FirstName01 OR FirstName = @FirstName02) 
```

通过使用[DapperExtensions`Compound Predicate Groups`](https://github.com/tmsmith/Dapper-Extensions/wiki/Predicates)：

```
// ** This is the code I am trying to dynamically create based on the lambda that is passed in **

var predicateGroupAnd = new PredicateGroup {Operator = GroupOperator.And, Predicates = new List<IPredicate>()};
// I already have the code to determine: left = p => p.MarketId, theOperator = Operator.Eq, right = marketId
predicateGroupAnd.Predicates.Add(Predicates.Field(left, Operator.Eq, right));

var predicateGroupOr = new PredicateGroup {Operator = GroupOperator.Or, Predicates = new List<IPredicate>()};
// I already have the code to determine: left = p => p.FirstName, theOperator = Operator.Eq, right = "John"
predicateGroupAnd.Predicates.Add(Predicates.Field(left, Operator.Eq, right));
// I already have the code to determine: left = p => p.FirstName, theOperator = Operator.Eq, right = "Jack"
predicateGroupOr.Predicates.Add(Predicates.Field(left, Operator.Eq, right));

var predicateGroupAll = new PredicateGroup // This is what will be passed to DapperExtensions' GetList<T> method
    {
        Operator = GroupOperator.And, // How do I set this correctly?
        Predicates = new List<IPredicate> {predicateGroupAnd, predicateGroupOr}
    }; 
```

我的问题似乎与解析表达式树的方式有关。假设我们有 lambda 表达式：

```
p => p.MarketId == marketId && p.FirstName == "John" || p.FirstName == "Jack" 
```

我可以将其转换为`BinaryExpression`. 如果我使用`BinaryExpression.Left`，我会得到

```
p.MarketId == marketId && p.FirstName == "John" 
```

和`BinaryExpression.Right`产量：

```
p.FirstName == "Jack" 
```

此外，`NodeType`整体的`BinaryExpression`似乎设置为 lambda 的最后一个条件运算符，即[`ExpressionType.OrElse`](http://msdn.microsoft.com/en-us/library/bb361179.aspx)

我觉得我需要使用递归并从右到左遍历 lambda 表达式，但我无法创建我想要的复合组谓词。具体来说，我如何将`AND`lambdas 组合在一起，以及`OR`lambdas 组合在一起？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:11:25.283

您的示例 lambda，

```
p => p.MarketId == marketId && p.FirstName == "John" || p.FirstName == "Jack" 
```

是等价的

```
p => (p.MarketId == marketId && p.FirstName == "John") || p.FirstName == "Jack" 
```

因为`&&`比 具有更高的优先级`||`。

因此，您将`&&`在“底部”得到一棵树，（因为它需要先计算）然后`||`在顶部：

```
 ||
                        /  \
                       &&  Firstname == "Jack"
                      /  \
p.MarketId == marketId    p.FirstName == "John" 
```

一旦您了解了运算符优先级，上述内容就有意义了。如果你想要一个替代方案，你可以使用括号来强制`||`首先评估（使其最终位于表达式树的底部）。

```
p => p.MarketId == marketId && (p.FirstName == "John" || p.FirstName == "Jack") 
```

* * *

你的一般问题是你正在接近这个有点错误。目前您正在尝试创建 2 个组，一个用于 OR，一个用于 AND。这可能适用于这种情况，但不适用于一般情况，例如，你会为此做什么：`(a && b) || (c && d)`？

我认为应该发生的是，每个 and 和每个 or 都应该转化为自己的谓词组。请参阅链接文章的“多个复合谓词（谓词组）”部分。您只需将 BinaryExpression 替换为谓词组。

在您的示例中，您有 (a && b) || c 与 || 在顶部。你想要结束的是每次你有一个运算符你想创建一个谓词组，左和右作为表达式列表。在将二进制表达式转换为谓词组的逻辑中，您将首先使用相同的函数将左侧和右侧转换为谓词组

即你的代码看到||。
它创建一个谓词组，准备将表达式添加到它
首先选择的列表中（没关系）。
好的，left 是另一个二进制表达式，因此它调用自身来获取目标库可以理解的谓词组，
以便递归仅对 && b 起作用。它首先选择左边，看到一个简单的谓词，a 这意味着它可以简单地将它添加到谓词组，它对右边做同样的事情，
然后我们回到对现在有一个谓词组的函数的原始调用左侧较低的表达式转换为不同的谓词组并添加。它现在下降，这是一个简单的单个谓词，因此它可以将它添加到它的列表中。

> 好的，所以如果我有一些疯狂的事情，比如：`a && b || c || d && e`

好的，考虑到更高的优先级，我们得到以下结果： `((a && b) || c) || (d && e)` 请注意，我不是 100% 确定括号会将 c 与第一个 && 或最后一个放在一起，但没关系，逻辑是相同的树，从最里面的括号开始。它们是“叶子”，然后向外工作，使用括号向上工作，最后到达根节点，在我们的例子中是 || 在 c 的右侧：

```
 ||
     /    \
    ||     &&
   /  \   /  \
  &&   c d   e
 /  \
a    b 
```

# objective-c - 在 Objective-C 中，如何将压缩在 ZIP 存档中的多个文件的内容读取到 NSString 变量中

> ID：16083904
> 
> 赞同：0
> 
> 时间：2013-04-18T13:10:31.310
> 
> 标签：objective-c, zip, zlib, compression

在 Objective-C（对于 iOS）中，有没有办法将 ZIP 存档中的文件读入内存？

因此，ZIP 中的每个文件都是一个文本文件。我需要做的是遍历 ZIP 存档中的文件，直到找到我需要的名称，然后将其内容（即文本数据）读取到 NSString 变量。

这可能与zlib有关吗？我在这个库的标题中看不到任何可以执行此类任务的内容，例如读取 zip 存档中的文件。

此外，我在互联网上检查的其他库似乎只解压缩到一个目录，但是，我需要的是仅将 zip 存档中的文件内容读取到 NSString 变量中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T03:49:32.273

您可以使用我的[zipzap](http://github.com/pixelglow/zipzap)库快速完成此操作：

```
ZZArchive* archive = [ZZArchive archiveWithContentsOfURL:zipFileURL];
NSString* foundContent = nil;
for (ZZArchiveEntry* entry in archive.entries)
  if ([entry.fileName isEqualToString:fileNameToFind])
    foundContent = [[NSString alloc] initWithData:entry.data
                                         encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:58:12.810

您可以使用许多库。谷歌是你的朋友。 [libzip](http://www.nih.at/libzip/)，[libarchive](http://www.libarchive.org/)只是两个。

# javascript - 在运行 javascript 之前测试页面是否有效

> ID：16083910
> 
> 赞同：0
> 
> 时间：2013-04-18T13:10:52.210
> 
> 标签：javascript, asp.net, validation

我有一些 javascript 在按下提交按钮时“冻结”屏幕。这是为了停止双击。

我发现如果验证器控件返回 false 则会出现问题，因为屏幕已“冻结”，因此用户无法解决其输入数据的问题。

我需要能够判断页面是否有效，如果不是，我可以取消冻结屏幕。

我怎样才能做到这一点？？

冻结屏幕的 javascript 代码...（最初来自 4guysfromrolla）

```
function FreezeScreen(msg) {
var outerPane = document.getElementById('FreezePane');
var innerPane = document.getElementById('InnerFreezePane');
if (outerPane) outerPane.className = 'FreezePaneOn';
} 
```

运行javascript的代码...

```
<asp:Button ID="btnSubmit" runat="server" Text="<%$ Resources:LocalizedText, button_SubmitOrder %>" onclick="btnSubmit_Click" ValidationGroup="validateHeader" OnClientClick="FreezeScreen();" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:19:43.247

它可能会是这样的。

```
function ValidatePage() {
    FreezeScreen();

    if (typeof (Page_ClientValidate) == 'function') {
        Page_ClientValidate();
    }

    if (Page_IsValid) {
        UnFreezeScreen();
        return true;
    }
    else {
        UnFreezeScreen();
        return false;
    }
} 
```

在按钮上

```
<asp:Button ID="btnSubmit" runat="server" Text="<%$ Resources:LocalizedText, button_SubmitOrder %>" onclick="btnSubmit_Click" ValidationGroup="validateHeader" OnClientClick="return ValidatePage();" /> 
```

# java - 将 toString 方法添加到链表

> ID：16083914
> 
> 赞同：0
> 
> 时间：2013-04-18T13:10:58.153
> 
> 标签：java, linked-list, tostring

我创建了一个链表类来制作一个简单的寄存器，我可以在其中从列表中添加和删除学生。但是我不确定如何为链表创建我的 toString 方法，最好的方法是什么？提前致谢！

```
import java.util.*;
public class Registry {

LinkedList<Student> studentList
        = new LinkedList<Student>();
//setting my type parameter

public Registry() {}

public void addStudent(Student aStudent) {}

public void deleteStudent(int studentID) {}

public String toString(){}

public String format() {}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:15:31.893

LinkedList 已经有一个从 AbstractCollection 继承的 toString() 方法。

```
toString

public String toString()

Returns a string representation of this collection. The string representation consists
of a list of the collection's elements in the order they are returned by its iterator,
enclosed in square brackets ("[]"). Adjacent elements are separated by the characters
", " (comma and space). Elements are converted to strings as by String.valueOf(Object).

Overrides:
    toString in class Object

Returns:
    a string representation of this collection 
```

这不是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:18:50.687

目的似乎是列出存储在您的链接列表中的所有学生，而不是覆盖`toString()`链接列表。只要你的`Student`类覆盖了它的`toString()`方法，你就在路上。打印链接列表将调用它的`toString()`方法并给你你想要的。

**覆盖 toString() 的示例类**

```
class MyClass 
{
    private int x;
    private int y;

    /* getters and setters  */

    @Override
    public String toString()
    {
        return "MyClass [x=" + x + ", y=" + y + "]";
    }
} 
```

**用法**

```
List<MyClass>  myList = new LinkedList<MyClass>();
MyClass myClass = new MyClass();
myClass.setX(1);
myClass.setY(2);
myList.add(myClass);
System.out.println(myList); 
```

**印刷**

> [我的班级 [x=1, y=2]]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:15:36.150

我会使用 StringBuilder 并在列表中循环。

```
public String toString(){
  StringBuilder sb = new StringBuilder();
  for (Student s: students){
    sb.append(s.toString()+",");
  }
  return sb.toString();
} 
```

在 Student 类的 toString() 方法中包含您想要的任何信息。

编辑：我注意到链表上的 toString() 正在使用 String.valueOf() 的其他响应之一。我实际上更喜欢在大多数情况下，因为它会处理空值，除非您当然想知道空值何时出现在此列表中。

所以而不是：

```
sb.append(s.toString()+","); 
```

你可以使用：

```
sb.append(String.valueOf(s),"+"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:16:37.240

覆盖注册表类中的 toString()

LinkedList 将调用成员对象的 toString()

[资源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java#AbstractCollection.toString%28%29)

`Returns a string representation of this collection. The string representation consists of a list of the collection's elements in the order they are returned by its iterator, enclosed in square brackets ("[]"). Adjacent elements are separated by the characters ", " (comma and space). Elements are converted to strings as by java.lang.String.valueOf(java.lang.Object).`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T13:18:01.763

1.  您没有创建链表类 - 您创建了一个`LinkedList`对象。
2.  你想要的是你的`Registry`类的 toString() 方法

    公共字符串 toString() { 布尔括号添加 = false; StringBuffer 结果 = new StringBuffer();

    ```
    for(Student student : studentList) {
        result.append(bracketAdded ? ", " : "[");
        result.append(student);
        bracketAdded = true;
    }
    result.append("]");

    return result.toString(); 
    ```

    }

现在剩下的就是`toString()`为你的类实现一个方法`Student`。

# sql - 如何从 Oracle Apex 的表格单元格中的逗号分隔值列表中创建选择列表？

> ID：16083915
> 
> 赞同：0
> 
> 时间：2013-04-18T13:11:00.717
> 
> 标签：sql, list, select, oracle-apex

我有一个名为**Products**的表，它有以下 3 列：**ID**、**Name**和**Versions**。对于任何给定的行，**Versions**列可能有多个以逗号分隔的版本。我想知道的是如何在我的 Apex 应用程序中创建一个选择列表，该列表将包含在它的 LOV 中，每个版本都用逗号分隔？

**例如，如果我在Products**表中有以下行：

```
1 | myProduct | 1.0, 1.1, 1.2 
```

如何在我的 Apex 应用程序中创建一个显示以下 LOV 的选择列表：“1.0”、“1.1”或“1.2”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:17:15.400

当然有可能。请注意，选择列表希望您以行的形式返回数据，因此我们需要将连接的字符串转换为行。我个人喜欢使用 XML 来做到这一点：

```
SELECT trim(val)
FROM 
  xmltable('/root/e/text()' passing XMLTYPE('<root><e>'
  || REPLACE('1.1, 1.2, 1.3, 1.4',',','</e><e>')
  || '</e></root>') columns val VARCHAR2(50) path '/' ) 
```

将返回

```
TRIM(VAL)
---------
1.1
1.2
1.3
1.4 
```

所以你可以像这样应用它：

```
WITH prd_versions AS (
  SELECT versions FROM products WHERE id = :PX_PRODUCT_ID
)
SELECT trim(val)
FROM prd_versions p,
  xmltable('/root/e/text()' passing XMLTYPE('<root><e>'
  || REPLACE(p.v,',','</e><e>')
  || '</e></root>') columns val VARCHAR2(50) path '/' ) 
```

当然，还有其他方法可以将字符串拆分为行，快速的 Google 可以告诉您！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:22:30.630

假设您使用的是简单表格，而不是表格表格，那么您可以这样做：

1.  创建一个隐藏项来保存列 product.versions 的值，例如 P1_VERSIONS。
2.  将选择列表的“值定义列表”设置为：`STATIC2:&P1_VERSIONS.`

（您可能需要从存储在 P1_VERSIONS 中的值中删除空格。）

# ruby - Notepad++ 只是调用“ANSI”的编码，有谁知道 Ruby 怎么称呼它？

> ID：16083916
> 
> 赞同：28
> 
> 时间：2013-04-18T13:11:01.890
> 
> 标签：ruby, character-encoding, notepad++, diacritics, codepages

我有一堆.txt，Notepad++ 说（在其下拉“编码”菜单中）是“ANSI”。

它们中有德语字符 [äöüß]，在 Notepad++ 中显示良好。

但是当我他们时，他们并没有出现在 irb 中`File.read 'this is a German text example.txt'`。

那么有人知道我应该给出什么论据`Encoding.default_external=`吗？

（我假设那将是解决方案，对吗？）

当`'utf-8'`或时`'cp850'`，它会将带有“äöüß”的“ANSI”文件读取为“\xE4\xF6\xFC\xDF”...

（请不要犹豫，在你的回答中提到明显“显而易见”的事情；我几乎和你一样新手，但仍然知道足以提出这个问题。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T13:19:19.290

他们的意思可能是 ISO/IEC 8859-1（又名 Latin-1）、ISO-8859-1、ISO/IEC 8859-15（又名 Latin-9）或 Windows-1252（又名 CP 1252）。他们四个都有`ä`at 位置`0xE4`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-23T19:16:43.773

我在 Notepad++ 论坛上找到了这个问题的答案，似乎是权威的 CChris 在 2010 年回答了这个问题。

[**问题：**编码ANSI？](http://sourceforge.net/p/notepad-plus/discussion/331753/thread/7e6624c4/)

**回答：**

> 这将是您计算机的系统代码页（代码页 0）。

**更多信息：**

**显示您当前的代码页。**

```
>help chcp
Displays or sets the active code page number.

CHCP [nnn]

  nnn   Specifies a code page number.

Type CHCP without a parameter to display the active code page number.

>chcp
Active code page: 437 
```

[**代码页标识符**](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756%28v=vs.85%29.aspx)

```
Identifier  .NET Name  Additional information
437         IBM437     OEM United States 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T05:04:35.383

我认为它是'cp1252'，别名'windows-1252'。

在阅读了 Jörg 的回答后，我回到了 ruby​​-doc.org 上的[编码](http://ruby-doc.org/core-1.9.3/Encoding.html)页面，试图找到对他提到的特定编码的引用，这就是我发现该`Encodings.aliases`方法的时候。

所以我在这个答案的最后总结了这个方法。

然后我查看了 notepad++ 中的输出，将其视为“ANSI”和 utf-8，并将其与 irb 中的输出进行了比较...

我只能在 irb 输出中找到两个地方，其中 utf-8 文件出现乱码的方式与将其视为“ANSI”时在 notepad++ 中出现的方式完全相同，这些地方用于 cp1252 和 cp1254。

cp1252 显然是我的“文件系统”编码，所以我要这么做。

我编写了一个脚本来复制所有转换为 utf-8 的文件，尝试从 1252 和 1254 开始。

到目前为止，utf-8 正则表达式似乎适用于两组文件。

现在，在遇到所有这些编码难题之前，我必须尝试记住我真正想要*完成的工作。*xD

```
def compare_encodings file1, file2
    file1_probs = []
    file2_probs = []

    txt = File.open('encoding_test_output.txt','w')

    Encoding.aliases.sort.each do |k,v|
        Encoding.default_external=k
        ename = [k.downcase, v.downcase].join "  ---  "
        s = ""
        begin
            s << "#{File.read(file1)}" 
        rescue
            s << "nope nope nope"
            file1_probs << ename
        end
        s << "\t| #{ename} |\t"
        begin
            s << "#{File.read(file2)}"
        rescue
            s << "nope nope nope"
            file2_probs << ename
        end
        Encoding.default_external= 'utf-8'
        txt.puts s.center(58)
        puts s.center(58)
    end
    puts
    puts "file1, \"#{file1}\" exceptions from trying to convert to:\n\n"
    puts file1_probs
    puts
    puts "file2, \"#{file2}\" exceptions from trying to convert to:\n\n"
    puts file2_probs
    txt.close
end

compare_encodings "utf-8.txt", "np++'ANSI'.txt" 
```

# javascript - 将 JSON 对象推送到 localStorage 中的数组

> ID：16083919
> 
> 赞同：32
> 
> 时间：2013-04-18T13:11:13.560
> 
> 标签：javascript, json, object, local-storage

我在 Javascript 中有一个函数：

```
var a = [];
function SaveDataToLocalStorage(data)
{       
    var receiveddata = JSON.stringify(data);
    a.push(receiveddata);
    alert(a);

    localStorage.setItem('session', a);

} 
```

data 参数是一个 JSON 对象。

但是每次我单击按钮时，它都会覆盖我本地存储中的数据。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-18T13:47:56.970

您需要采取一些步骤才能将此信息正确存储在 localStorage 中。然而，在我们开始编写代码之前，请注意 localStorage（当前）**不能**保存除字符串之外的任何数据类型。您将需要序列化数组以进行存储，然后将其解析出来以对其进行修改。

第 1 步：只有在您的 localStorage**变量**

**中还没有存储序列化数组时，才应该运行下面的第一个代码片段。`session`**
为确保您的 localStorage 设置正确并存储数组，请首先运行以下代码片段：

```
var a = [];
a.push(JSON.parse(localStorage.getItem('session')));
localStorage.setItem('session', JSON.stringify(a)); 
```

上面的代码只应运行**一次**，并且仅当您尚未将**数组**存储在 localStorage`session`变量中时。如果您已经在执行此操作，请跳至第 2 步。

第2步：

像这样修改你的函数：

```
function SaveDataToLocalStorage(data)
{
    var a = [];
    // Parse the serialized data back into an aray of objects
    a = JSON.parse(localStorage.getItem('session')) || [];
    // Push the new data (whether it be an object or anything else) onto the array
    a.push(data);
    // Alert the array value
    alert(a);  // Should be something like [Object array]
    // Re-serialize the array back into a string and store it in localStorage
    localStorage.setItem('session', JSON.stringify(a));
} 
```

这应该为您解决其余的问题。当你把它解析出来时，它会变成一个对象数组。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T13:23:16.473

到目前为止，您*只能将字符串值存储*在 localStorage 中。您需要序列化数组对象，然后将其存储在 localStorage 中。

例如：

```
localStorage.setItem('session', a.join('|')); 
```

或者

```
localStorage.setItem('session', JSON.stringify(a)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-25T10:58:28.460

我可以建议您的一件事是扩展存储对象以处理对象和数组。

LocalStorage 只能处理字符串，因此您可以使用这些方法来实现

```
Storage.prototype.setObj = function(key, obj) {
    return this.setItem(key, JSON.stringify(obj))
}
Storage.prototype.getObj = function(key) {
    return JSON.parse(this.getItem(key))
} 
```

使用它，每个值都将在设置时转换为 json 字符串并在获取时解析

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-09-28T07:37:00.443

```
var arr = [ 'a', 'b', 'c'];
arr.push('d'); // insert as last item 
```

# android - Android：OpenGL：如何使用 Matrix 方法在屏幕中显示正交视图

> ID：16083923
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:11:20.610
> 
> 标签：android, opengl-es

我正在开发一个类似于 Autocad WS 的 android 应用程序。如何在单个布局中对对象进行正交投影（所有 6 个视图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:13:53.927

为此，您应该有 6 个摄像头：将它们的视口渲染为纹理，然后将结果放到屏幕上。此外，您可以渲染您的对象 6 次 - 为每个视图以适当的方式转换它。

# c++ - 为浮点定义值特征

> ID：16083926
> 
> 赞同：2
> 
> 时间：2013-04-18T13:11:22.110
> 
> 标签：c++, template-specialization

在用 c++ 编写一些代码时，我想表达一个概念，即对于 X 类型的组件，它的最小值是`kMinValue`，最大值是`kMaxValue`. 为此，我做了类似的事情：

```
template <typename ComponentType>
struct CompTraits
{

};

template <>
struct CompTraits<unsigned char>
{
    typedef unsigned char ComponentType;
    enum{
        kMinValue = 0,
        kMaxValue = 255
    };              
}; 
```

而且，我可以参考`CompTraits<unsigned char>::kMinValue`。但是，我无法理解浮动数据类型的技巧。有人可以帮忙为花车定义同样的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:13:55.747

你可以使用`std::numeric_limits`, 而不是你的常量，但如果你只想要`kMinValue`-`kMaxValue`你可以使用这样的东西

C++03

```
template<>
struct CompTraits<float>
{
   static const float kMinValue;
   static const float kMaxValue;
};

const float CompTraits<float>::kMinValue = std::numeric_limits<float>::min();
const float CompTraits<float>::kMaxValue = std::numeric_limits<float>::max(); 
```

C++11

```
template<>
struct CompTraits<float>
{
   static constexpr float kMinValue = std::numeric_limits<float>::min();
   static constexpr float kMaxValue = std::numeric_limits<float>::max();
}; 
```

对于您的情况，您应该使用

```
template<>
struct CompTraits<float>
{
   static const float kMinValue = 0.0f;
   static const float kMaxValue = 1.0f;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:14:26.263

这是因为您使用`enum`常量。枚举常量只能是整数。

我建议您改用`static const`成员变量（或者`static constexpr`如果您使用的是 C++11 编译器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T13:13:41.027

**您不能使用 an`enum`**来定义这些值，因为 an`enum`只能存储整数值，您可以改用常量：

```
template <>
struct CompTraits<double>
{
    typedef double ComponentType;
    static const double kMinValue = 0.;
    static const double kMinValue = 1.;          
}; 
```

同样对于标准数字类型，您可以查看 C++ STL 的[std::numeric_limit](http://www.cplusplus.com/reference/limits/numeric_limits/)。

**`numeric_limits<unsigned char>::min()`**将与您的 做同样的事情`CompTraits<unsigned char>::kMinValue`，并且它适用于每种数字类型。

另请注意，**您可以为自己的数据类型专门化 numeric_limit**：

```
namespace std {
    template<>
    struct numeric_limits<YourType>
    {
        static const bool is_specialized = true;
        /* assuming YourType has a constructor from double */
        static const YourType min() throw() { return 0\. };
        static const YourType max() throw() { return 1\. };
    };
} 
```

如果您对这种方法的合法性有疑问，请参阅：

> « 程序可以将任何标准库模板的模板特化添加到命名空间 std。标准库模板的这种特化（完全或部分）会导致未定义的行为，除非声明依赖于用户定义的外部链接名称，并且除非特化满足原始模板的标准库要求。» 来自[C++ 2003，§17.4.3.1/1](http://cs.nyu.edu/courses/spring13/CSCI-GA.2110-001/downloads/C++%20Standard%202003.pdf)

# php - 从 imap 标头中检索电子邮件地址

> ID：16083931
> 
> 赞同：1
> 
> 时间：2013-04-18T13:11:32.703
> 
> 标签：php, regex, header, preg-match, imap

我正在使用 php imap 函数`imap_header`来提取完整​​的标头并`imap_fetch_overview`提取原始标头。这两个函数分别给了我 stdClass 对象和数组。

在进一步处理之前，我想始终清洁我的往返。有时 FROM 或 TO 可以包含这样的东西， `Test user <test@test.com>`

目前在我的 FROM 中，我只看到`Test User`并且没有电子邮件地址，直到我使用 firebug。

如何从这些对象、数组中获取 test@test.com ？

这是我得到的结果`imap_fetch_overview`

```
 Array
   (
     [0] => stdClass Object
     (
        [subject] => Testing
        [from] => Test User 
        [to] => testuser2@test.com
        [date] => Wed, 17 Apr 2013 18:43:46 +0530
        [message_id] => <abcdef1244.93784jgsfk@test.com>
        [size] => 3443
        [uid] => 1234
        [msgno] => 123
        [recent] => 0
        [flagged] => 0
        [answered] => 0
        [deleted] => 0
        [seen] => 0
        [draft] => 0
        [udate] => 1366204439
    )

) 
```

`<test@test.com>`测试用户旁边有一个隐藏的。如何提取该电子邮件地址？

同样，这就是我从中得到的`imap_header`

```
 stdClass Object
  (
     [date] => Wed, 17 Apr 2013 18:43:46 +0530
     [Date] => Wed, 17 Apr 2013 18:43:46 +0530
     [subject] => Test
     [Subject] => Test
     [message_id] => <abcdef1244.93784jgsfk@test.com>
     [toaddress] => testuser@test.com
     [to] => Array
     (
        [0] => stdClass Object
            (
                [mailbox] => testuser
                [host] => test.com
            )

    )

    [fromaddress] => Test User 
    [from] => Array
    (
        [0] => stdClass Object
            (
                [personal] => Test User
                [mailbox] => test
                [host] => test.com
            )

    )

    [reply_toaddress] => Test User 
    [reply_to] => Array
    (
        [0] => stdClass Object
            (
                [personal] => Test User
                [mailbox] => test
                [host] => test.com
            )

    )

    [senderaddress] => Test User
    [sender] => Array
    (
        [0] => stdClass Object
            (
                [personal] => Test User
                [mailbox] => test
                [host] => test.com
            )

    )

    [Recent] =>  
    [Unseen] => U
    [Flagged] =>  
    [Answered] =>  
    [Deleted] =>  
    [Draft] =>  
    [Msgno] =>  123
    [MailDate] => 17-Apr-2013 13:13:59 +0000
    [Size] => 3443
    [udate] => 1366204439
) 
```

A`preg_match`将是显而易见的答案，但似乎无法弄清楚如何从浏览器中看不到电子邮件地址但在使用 firebug 检查时存在的位上执行它。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:20:05.560

[`imap_rfc822_parse_adrlist()`^(*您可以使用Docs*)](http://php.net/imap_rfc822_parse_adrlist)更进一步：

```
$toAddresses = imap_rfc822_parse_adrlist('Test user <test@test.com>', 'localhost');

print_r($toAddresses);

Array
(
    [0] => stdClass Object
        (
            [mailbox] => test
            [host] => test.com
            [personal] => Test user
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:17:43.093

如果 std 对象的数组名称是 $arr

```
$arr[0]->to 
```

返回你想要的。

在第二种情况下

$stdObject <- 第二个函数返回的对象

```
foreach($stdObject->to as $to)
{
 echo $to->mailbox;
 echo $to->host;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-14T22:39:24.133

我刚刚发现了这个线程，虽然它很旧，但我希望这个评论可能会有所帮助。我*相信*我已经回答了这个问题。碰巧的是，发件人电子邮件的格式是导致问题的原因。

`From Name <from@name.com>`

由于 <> 标签，浏览器将其变成了 HTML 标签，我猜想类似于跨度。通过使用 str_replace 将“<”更改为“”（或其他），您可以在问题到达 HTML 之前将其删除

# javascript - Hammer JS 不能与骨干一起使用

> ID：16083933
> 
> 赞同：6
> 
> 时间：2013-04-18T13:11:40.080
> 
> 标签：javascript, backbone.js, hammer.js

我试图让锤子 js 事件与骨干一起工作，但无法让它响应事件。我已经尝试过以下..

[http://cijug.ne​​t/tech/2013/01/16/backbone-hammer/](http://cijug.net/tech/2013/01/16/backbone-hammer/)

[https://gist.github.com/kjantzer/4279025](https://gist.github.com/kjantzer/4279025)

我还在我的视图中添加了下面的代码

```
initialize: function(){
    this.events = _.extend({}, this.defaultEvents, this.events||{});      
} 
```

JS 小提琴：http: [//jsfiddle.net/XcYhD/](http://jsfiddle.net/XcYhD/)

代码

```
<div id="swiping"></div>

JS

AppView = Backbone.View.extend({

  el: '#swiping',          

  events: {
    'swipe': 'swipeMe'
  },

  render: function(){             
    this.$el.html('<h2>Swipe Me</h2>');
  },

  swipeMe: function(e){                
    alert('swiped ' + e.direction);
  }

});

var view = new AppView();
view.render(); 
```

包括的库——hammer.js、jquery.specialevent.hammer.js 等。

无论如何让它工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T20:03:36.483

您不需要特殊事件插件，我只需使用 jquery 插件，然后`hammer()`在您的渲染中运行该函数。

```
 render: function(){             
    this.$el.html('<h2>Swipe Me</h2>');
    this.$el.hammer();
  }, 
```

这是一个更新的小提琴：http: [//jsfiddle.net/XcYhD/20/](http://jsfiddle.net/XcYhD/20/)

# java - Graphviz 特殊字符

> ID：16083935
> 
> 赞同：-1
> 
> 时间：2013-04-18T13:11:55.083
> 
> 标签：java, graphviz

有人可以指导我如何构建

MV-123-1.3.2-23423GF

使用 Graphviz API 的字符串类型？

它在之后为每个令牌创建单独的圆圈 -

```
 GraphViz gv = new GraphViz();
  gv.addln(gv.start_graph());
  gv.addln("1.0 -> MV-123-1.3.2-23423GF [color=red];");
  gv.addln("MV-123-1.3.2-23423GF  -> 1.2 [color=red];");
  gv.addln("1.2 -> 1.3 [color=red];");
  gv.addln("1.3 -> 2.0;");
  gv.addln("2.0 -> 3.0;");
  gv.addln("3.0 -> 3.1;");
  gv.addln("1.0 -> 2.0;");
  gv.addln("1.1 -> 1.3;");
  gv.addln("2.5 -> 2.6;");
  gv.addln("2.6 -> 3.0 [splines=false];"); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:15:37.677

要将其保留为单个标记，它需要双引号。这些必须在java中作为转义字符插入：

```
gv.addln("1.0 -> \"MV-123-1.3.2-23423GF\" [color=red];"); 
```

# objective-c - 链接本身具有依赖关系的静态库

> ID：16083937
> 
> 赞同：2
> 
> 时间：2013-04-18T13:12:00.637
> 
> 标签：objective-c, xcode4, static-libraries, xmppframework

我为 iOS 创建了一个使用[XMPPFramework](https://github.com/robbiehanson/XMPPFramework/wiki/GettingStarted_iOS)的静态库。我遵循了入门指南中的所有步骤，并且我很确定我做对了，因为我之前创建了直接使用该框架的 iOS 应用程序并且它没有出现任何问题。

但是，现在我想将 XMPP 的东西外包到一个静态库中，然后我将其链接到我的“客户端”iOS 应用程序中。链接本身运行良好，并且调用库中的一个简单方法`NSLog`也可以正常工作。但是，一旦我开始在库中使用使用任何 XMPPFramework 特定内容（例如连接流）的方法，我就会收到大量的链接错误。

当我将静态库链接到应用程序项目时，它的依赖项是否会以某种方式丢失？我必须在那里重新添加它们吗？有趣的是，当我将 Security.framework 和 CFNetwork.framework 添加到我的应用程序时，就像我在静态库中所做的那样，一些错误消失了。而且我还必须`/usr/include/libxml2`在库和应用程序中包含标题搜索路径。

但是即使我添加了上面提供的链接下列出的每个依赖项（源代码文件除外），仍然存在 55 个链接器错误（而不是没有添加它们的 81 个）。 ![链接器错误的摘录](https://i.stack.imgur.com/NsSw9.png)

# javascript - 无法理解 angularjs 中的数据绑定

> ID：16083939
> 
> 赞同：0
> 
> 时间：2013-04-18T13:12:05.643
> 
> 标签：javascript, json, angularjs

我在这里有一个 jsbin 设置[http://jsbin.com/esofiq/1/edit](http://jsbin.com/esofiq/1/edit) 我对我认为 angularjs 应该工作的方式感到困惑，我有一些 json 数据附加到数据属性，angularjs 获取数据并创建风景。在控制器中调用不是`$scope.mydata`将“mydata”设置为模型，如果数据属性中的数据发生更改，它现在不应该更新视图吗？

如果这不适合角度，这是否更容易在其他框架中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:49:00.050

我认为这两个会给你的想法：

[Angular 如何使用数据](http://weblogs.asp.net/dwahlin/archive/2013/04/12/video-tutorial-angularjs-fundamentals-in-60-ish-minutes.aspx)

[如何进行 AJAX 调用](http://docs.angularjs.org/api/ng.%24http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:18:23.827

虽然这不是在 Angular 中做事的常用方式，但您可以实现您想要的，将手表添加到您的数据中

```
$scope.$watch(
    function () { return  $("#mydata").data("a");}, 
    function(newValue) {
        $scope.mydata = newValue;
    }, true); 
```

基本上，我们正在为您的数据添加一个更改侦听器。

请检查[此 plunker](http://plnkr.co/edit/RkgN0dCb9xMsUHmYOfIR)，其中 jquery 数据每 2 秒更改一次，并且 div 对此更改做出反应。

# android - Android：致命异常 AsyncTask #4

> ID：16083941
> 
> 赞同：1
> 
> 时间：2013-04-18T13:12:09.503
> 
> 标签：android, http, asynchronous

我的应用程序有时会因此错误而崩溃：这是一个基本的异步 http 请求，用于在 url 上收集图片。

```
04-18 14:47:51.336: ERROR/AndroidRuntime(10112): FATAL EXCEPTION: AsyncTask #4
    java.lang.RuntimeException: An error occured while executing doInBackground()
    at android.os.AsyncTask$3.done(AsyncTask.java:299)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    at java.lang.Thread.run(Thread.java:856)
    Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4865)
    at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:979)
    at android.view.ViewGroup.invalidateChild(ViewGroup.java:4306)
    at android.view.View.invalidate(View.java:10519)
    at android.view.View.setFlags(View.java:8635)
    at android.view.View.setVisibility(View.java:5647)
    at com.advertising.AdActivity.onPause(AdActivity.java:122)
    at com.advertising.AdActivity.close(AdActivity.java:355)
    at com.advertising.AdActivity.onImageFailure(AdActivity.java:470)
    at com.advertising.http.tasks.ImageHttpTask.raiseOnFailure(ImageHttpTask.java:74)
    at com.advertising.http.tasks.ImageHttpTask.doInBackground(ImageHttpTask.java:52)
    at com.advertising.http.tasks.ImageHttpTask.doInBackground(ImageHttpTask.java:20)
    at android.os.AsyncTask$2.call(AsyncTask.java:287)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    ... 4 more 
```

还有我的 DoInbackground ：

```
 protected Bitmap doInBackground(String... urls) {
    String urldisplay = urls[0];
    Bitmap mIcon11 = null;
    HttpResponse response;
    try {
        HttpGet request = new HttpGet(urldisplay);
        response = client.execute(request);
        HttpEntity entity = response.getEntity();
        InputStream inputStream = entity.getContent();
        mIcon11 = BitmapFactory.decodeStream(inputStream);
        inputStream.close();
    } catch (Exception e) {
        raiseOnFailure(e, ErrorType.AD_ERROR);}
    return mIcon11;} 
```

编辑：这是我的 inPostExecute/raiseOnSuccess/raiseOnFailure ：

```
@Override
protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    raiseOnSuccess(bmImage);
}

private void raiseOnSuccess(ImageView imageView) {
    if (this.imageHttpDelegate != null) {
        this.imageHttpDelegate.onImageSuccess(imageView);
    } else {
        Logger.d("Successfull image received.");
    }
}

private void raiseOnFailure(Throwable throwable, ErrorType errorType) {
    if (this.imageHttpDelegate != null) {
        this.imageHttpDelegate.onImageFailure(throwable, errorType);
    } else {
        if (throwable.getMessage() != null) {
            Logger.d(throwable.getMessage());
        }
    }
} 
```

你能帮我吗？我不说她为什么会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:14:51.837

您的`raiseOnFailure`方法正在访问您的 Activity 上的方法，这些方法只能从主线程调用。尝试记录错误，然后`AsyncTask`调用函数。`raiseOnError``onPostExecute`

## 例子

```
private volatile Exception mError;
protected Bitmap doInBackground(String... urls) {
    String urldisplay = urls[0];
    Bitmap mIcon11 = null;
    HttpResponse response;
    try {
        HttpGet request = new HttpGet(urldisplay);
        response = client.execute(request);
        HttpEntity entity = response.getEntity();
        InputStream inputStream = entity.getContent();
        mIcon11 = BitmapFactory.decodeStream(inputStream);
        inputStream.close();
    } catch (Exception e) {
        mError  = e;
        return null;
    }
    return mIcon11;
    }

     @Override
     protected void onPostExecute(Bitmap result) {
        if(mError != null) { raiseOnFailure(mError, ErrorType.AD_ERROR); } 
        else {
           bmImage.setImageBitmap(result);
           raiseOnSuccess(bmImage);
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:15:21.823

```
raiseOnFailure(e, ErrorType.AD_ERROR) 
```

正在从后台访问视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:28:19.163

你不能直接从 doinbackground() 更新 UI，但你可以在 preexecute() 或 postexecute() 中这样做。

如果无法避免从 doinbackground() 更新 UI，那么您可以通过以下方式进行操作：

```
runOnUiThread(new Runnable() {
                    public void run() {
                                       //update UI here

                        }

                    }
                }); 
```

# azure - 如何从 Azure 移动服务重命名表？

> ID：16083943
> 
> 赞同：0
> 
> 时间：2013-04-18T13:12:12.770
> 
> 标签：azure, windows-8, windows-runtime, windows-store-apps, azure-mobile-services

我正在关注[这篇](http://www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/)文章。在第 4 步中，在移动服务中创建 TodoItem 表。现在，当我管理该移动服务的数据库时，我得到了重命名功能。（管理数据库是作为 silverlight 应用程序打开的屏幕）。所以我想知道如何将 TodoItem 表重命名为任何其他名称。我创建为 TodoItem。移动服务和数据库都有这个名称，我可以在管理数据库中重命名，但如何从移动服务页面重命名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T00:28:06.457

对于后来出现的任何人仍在寻找这个问题的答案......

根据 ConfusedNoob 的回复，我验证了以下步骤：

*   在 Windows Azure 管理站点 (manage.windowsazure.com) 上，转到 SQL DB 部分
*   选择您的数据库并单击“管理”。登录到数据库管理门户。
*   转到管理并单击数据库的“设计”
*   为要重命名的表选择“编辑”
*   将表名更改为新名称，点击保存
*   返回到 Azure 管理。查看您的移动服务数据。
*   突出显示要重命名的表并将其删除。（由于您重命名了基础数据库表，移动服务表不再与实际表关联）。
*   使用新表名创建一个移动服务表。您的数据应该显示在那里。不要先用新名称创建表，因为它会创建一个新的空表，而不是指向现有表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:55:18.490

您将不得不删除门户中的旧表（它不再指向 SQL 中的表，因为您重命名了它 - 首先执行此操作很重要，否则您将删除您的数据！）。然后在 Portal 中创建一个与新表同名的新表 - 它应该会自动连接到现有表。

# deployment - SSRS RDL 以编程方式映射数据源

> ID：16083951
> 
> 赞同：2
> 
> 时间：2013-04-18T13:12:20.457
> 
> 标签：deployment, ssrs-2008, reporting-services, rdl

我们使用 rs.exe 将 RDL 部署到 ReportServer。

由于 DataSource，Shared DataSet 和 RDLs 位于不同的文件夹中。部署 RDLs 后，RDL 到 Shared DataSets 和 Shared DataSets 到 DataSource 之间的映射被删除。

我必须手动将每个 RDL 映射到相应的 DataSet 和 DataSource。我有 200 个 RDL，手动操作真的很难。

部署 RDL 后，我需要将 RDL 映射到数据集的代码

一些机构可以帮助我提供一些代码来满足我的要求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:35:12.147

我创建了一个执行以下操作的 rs.exe 脚本：

1.  基于文件**Report.rdl**部署报告。该报表有一个对共享数据源的引用和一个对共享数据集的引用。报表部署到报表服务器/目录。

2.  将报表的数据源设置为报表服务器上的现有共享数据源。数据源部署为**/Data Sources/DS**。

3.  将报表的数据集设置为报表服务器上的现有共享数据集。数据源部署为**/Datasets/DataSet**。

该脚本包含以下代码：

```
Public Sub Main()
    Dim definition As [Byte]() = Nothing
    Dim warnings As Warning() = Nothing

    'Read report from file on disk
    Dim stream As FileStream = File.OpenRead("Report.rdl")
    definition = New [Byte](stream.Length - 1) {}
    stream.Read(definition, 0, CInt(stream.Length))
    stream.Close()

    'Deploy report
    'ItemType, name, folder, overwrite, definition, properties 
    rs.CreateCatalogItem("Report", "Report", "/", True, definition, Nothing, warnings)

    'Update existing report Data Souce reference to Shared Data Source on server
    Dim dataSourceRefs(0) As DataSource
    Dim dsr As New DataSourceReference
    dsr.Reference = "/Data Sources/DS"
    Dim ds As New DataSource
    ds.Item = CType(dsr, DataSourceDefinitionOrReference)
    ds.Name = "DS"
    dataSourceRefs(0) = ds

    rs.SetItemDataSources("/Report", dataSourceRefs)

    'Update existing report DataSet reference to Shared DataSet on server   
    Dim dataSetRefs(0) as ItemReference
    Dim dset as New ItemReference
    dset.Name = "DataSet"
    dset.Reference = "/Datasets/DataSet"
    dataSetRefs(0) = dset

    rs.SetItemReferences("/Report", dataSetRefs)

End Sub 
```

听起来您已经成功部署了报告。

因此，主要需要注意的是更新数据源引用和数据集引用的代码片段。需要注意的方法有：

[SetItemDataSources](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.setitemdatasources%28v=sql.105%29.aspx)更新**数据源**。

[SetItemReferences](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.setitemreferences%28v=sql.105%29.aspx)来更新**DataSet**。

这是针对一份报告的，因此您需要将代码封装在部署脚本的子例程中，但希望这会对您有所帮助。

# jsf - 异常时不重定向到错误页面

> ID：16083953
> 
> 赞同：4
> 
> 时间：2013-04-18T13:12:26.827
> 
> 标签：jsf, error-handling, oracle-adf, jsf-1.2

如果发生异常，我正在尝试导航到错误页面。为此，我定义了：

```
<error-page>
    <error-code>500</error-code>
    <location>/error.jspx</location>
</error-page> 
```

在`web.xml`. 我也尝试通过 Servlet 来做到这一点：

```
<servlet>
    <servlet-name>ErrorHandler</servlet-name>
    <servlet-class>web.servlet.ErrorHandler</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ErrorHandler</servlet-name>
    <url-pattern>/errorhandler</url-pattern>
</servlet-mapping>
<error-page>
    <error-code>500</error-code>
    <location>/errorhandler</location>
</error-page> 
```

但它既没有导航到Servlet`error.jspx`也没有被调用。`ErrorHandler`

为了测试错误处理，我尝试`throw new Exception("Test");`从托管 bean 的构造函数和`actionListener`. 但它正在控制台中打印异常，但没有发生重定向。

我也尝试过：`<exception-type>java.lang.Exception</exception-type>`而不是`<error-code>500</error-code>`，但没有运气。`action`每当从构造函数或某些/等任何地方发生任何异常时，我如何调用 Servlet 或导航到页面`actionListener`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T12:00:00.943

我不知道这是否对你有用。对于如下定义的任何错误，我都有一个处理程序。

在“faces-config.xml”中

```
 <factory> 
     <exception-handler-factory> 
        com.mypackage.global.DatExceptionHandlerFactory 
     </exception-handler-factory>
  </factory> 
```

还有两个班

```
import javax.faces.context.ExceptionHandler;
import javax.faces.context.ExceptionHandlerFactory;

public class DatExceptionHandlerFactory extends ExceptionHandlerFactory {

      private ExceptionHandlerFactory parent;

      // this injection handles jsf
      public DatExceptionHandlerFactory(ExceptionHandlerFactory parent) {
        this.parent = parent;
      }

      //create your own ExceptionHandler
      @Override
      public ExceptionHandler getExceptionHandler() {
        ExceptionHandler result =
            new DatExceptionHandler(parent.getExceptionHandler());
        return result;
      }
    } 
```

二等舱

```
import java.util.Iterator;
import javax.faces.FacesException;
import javax.faces.application.NavigationHandler;
import javax.faces.context.ExceptionHandler;
import javax.faces.context.ExceptionHandlerWrapper;
import javax.faces.context.FacesContext;
import javax.faces.context.Flash;
import javax.faces.event.ExceptionQueuedEvent;
import javax.faces.event.ExceptionQueuedEventContext;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

public class DatExceptionHandler extends ExceptionHandlerWrapper {

      private static Log log = LogFactory.getLog(DatExceptionHandler.class);
      private ExceptionHandler wrapped;
      public  String error = "n";

      public String getError() {
        return error;
    }

    public void setError(String error) {
        this.error = error;
    }

    public DatExceptionHandler(ExceptionHandler wrapped) {
        this.wrapped = wrapped;
      }

      @Override
      public ExceptionHandler getWrapped() {
        return wrapped;
      }

      @Override
      public void handle() throws FacesException {
        Iterator iterator = getUnhandledExceptionQueuedEvents().iterator();

        while (iterator.hasNext()) {
          ExceptionQueuedEvent event = (ExceptionQueuedEvent) iterator.next();
          ExceptionQueuedEventContext context = (ExceptionQueuedEventContext)event.getSource();

          Throwable throwable = context.getException();

          FacesContext fc = FacesContext.getCurrentInstance();

          try {
              Flash flash = fc.getExternalContext().getFlash();

              // Put the exception in the flash scope to be displayed in the error 
              // page if necessary ...
              flash.put("errorDetails", throwable.getMessage());

              System.out.println("the error is put in the flash: " + throwable.getMessage());

              NavigationHandler navigationHandler = fc.getApplication().getNavigationHandler();

              navigationHandler.handleNavigation(fc, null, "components/errorHandler.xhtml?faces-redirect=true");

              fc.renderResponse();
          } finally {
              iterator.remove();
          }
        }

        // Let the parent handle the rest
        getWrapped().handle();
      }
    } 
```

和 errorHandler.xhtml 来显示错误

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head>
  <link type="text/css" rel="stylesheet" href="#request.contextPath}/css/default.css" /> 
  <title>#{bundle['guessNumber.error_page.title']}</title>
</h:head>

<h:body>
    <div class="highlighted errorMessage">
        <h:outputText escape="false" 
                      value="#{bundle['guessNumber.error_page.content']}"/>
    </div>
    <br/><br/>
    <div class="errorDetails">
        Error details: <br/>
        #{flash.keep.errorDetails}
    </div>
</h:body>
</html> 
```

# struts2 - java.lang.ClassNotFoundException: org.apache.struts2.tiles.StrutsTilesListener

> ID：16083961
> 
> 赞同：-2
> 
> 时间：2013-04-18T13:12:50.763
> 
> 标签：struts2, classnotfoundexception, tiles

```
15:06:38,636 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."myapp.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."myapp.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "myapp.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_13]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_13]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_13]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011093: Could not load component class org.apache.struts2.tiles.StrutsTilesListener
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:113)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:54)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.apache.struts2.tiles.StrutsTilesListener from [Module "deployment.myapp.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:111)
    ... 7 more

15:06:39,542 ERROR [org.jboss.as] (MSC service thread 1-10) JBAS015875: JBoss AS 7.1.0.Final "Thunder" started (with errors) in 92339ms - Started 144 of 219 services (2 services failed or missing dependencies, 71 services are passive or on-demand)
15:06:39,543 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "myapp.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"myapp.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"myapp.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"myapp.war\""}}
15:06:40,397 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-16) JBAS015877: Stopped deployment myapp.war in 853ms
15:06:40,398 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."myapp.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."myapp.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "myapp.war"

15:06:40,399 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"myapp.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"myapp.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"myapp.war\""}}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:08:11.613

我添加了比需要的更多的依赖项。唯一的依赖是

```
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-tiles-plugin</artifactId>
    <version>2.3.12</version>
</dependency> 
```

# java - 条纹选项-集合初始化行为

> ID：16083962
> 
> 赞同：1
> 
> 时间：2013-04-18T13:12:51.990
> 
> 标签：java, stripes

我正在制作一个注册表，其中包含用户资格的下拉列表。我的 actionbean 有一个带有 getter 和 setter 的 String[] qualifs 属性，我想从中填充列表。它工作正常，但只有在我按下确定按钮并调用 actionbean 之后。这是正常行为吗？如果是这样，当我的 jsp 第一次加载时，有什么方法可以初始化列表数据？相关片段：

```
<stripes:select name="qualification">
  <stripes:option value="">Select</stripes:option>
  <stripes:options-collection collection="${actionBean.qualifs}"/>
</stripes:select> 
```

谢谢！

# c# - 在 XNA 中旋转播放器

> ID：16083966
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:09.100
> 
> 标签：c#, rotation, xna, game-physics

我一直在寻找有关如何正确执行此操作的教程，而 Google 一直空着。也许这是一个非常简单的主题，但我不知道该怎么做。

到目前为止，我发现的代码如下所示：

```
 if (currentKeyboardState.IsKeyDown(Keys.A))
        {
            RotationAngle += 0.01f;
            float circle = MathHelper.Pi * 2;
            RotationAngle = RotationAngle % circle;
        } 
```

只是，这并没有多大作用。它来自[MSDN](http://msdn.microsoft.com/en-gb/library/bb203869%28v=xnagamestudio.40%29.aspx)。这是我能找到的最好看的解决方案。

我想做的就是让玩家旋转他们的船并朝另一个方向射击。我正在制作一款与小行星非常相似的游戏，但目前我只能朝一个方向射击。

任何帮助，将不胜感激 ：）

编辑：这是我当前的 Player.cs：

```
using System;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;

namespace GameTest
{
    class Player
    {
        public Texture2D PlayerTexture;
        public Vector2 Position;
        public bool Alive;
        public int Health;
        public Vector2 origin;
        public float RotationAngle;
        KeyboardState currentKeyboardState;
        KeyboardState previousKeyboardState;
        public int Width
        {
            get { return PlayerTexture.Width; }
        }
        public int Height
        {
            get { return PlayerTexture.Height; }
        }

        public void Initialize(Texture2D texture, Vector2 position)
        {
            PlayerTexture = texture;

            Position = position;

            Alive = true;

            Health = 10;

            origin.X = PlayerTexture.Width / 2;
            origin.Y = PlayerTexture.Height / 2;
        }

        public void Update(GameTime gameTime)
        {
            RotationAngle += 10f;

            previousKeyboardState = currentKeyboardState;
            currentKeyboardState = Keyboard.GetState();

            float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;

            if (currentKeyboardState.IsKeyDown(Keys.A))
            {

                //float circle = MathHelper.Pi * 2;
                //RotationAngle = RotationAngle % circle;
            }

            if (currentKeyboardState.IsKeyDown(Keys.D))
            {
                //rotation
            }
        }

        public void Draw(SpriteBatch spriteBatch)
        {
            spriteBatch.Draw(PlayerTexture, Position, null, Color.White, RotationAngle, origin, 1f, SpriteEffects.None, 0f);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:28:21.340

我的猜测是您缺少“原点”或旋转中心：

```
RotationAngle += .5f;
float circle = MathHelper.Pi * 2;
RotationAngle = RotationAngle % circle;

Vector2 origin = new Vector2(texture.Width / 2, texure.Height / 2);

spriteBatch.Draw(texture, position, null, Color.White, RotationAngle, origin, 1.0f, SpriteEffects.None, 0f); 
```

至于你想要拍摄的角度，你需要一些几何形状（类似这样的东西，未经测试......但如果我没记错的话）：

```
Vector2 velocity = new Vector2(speed*Math.Cos(RotationAngle), speed*Math.Sin(RotationAngle)); 
```

此外，使用调试器确保旋转角度正确改变。

# .net - 我应该选择哪种方法？

> ID：16083967
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:14.557
> 
> 标签：.net, sql-server, linq

在我的场景中，我必须从 sql server 中提取数据并将其迁移到 sharepoint 中，一旦将记录输入到数据库中，我必须运行执行迁移过程的控制台应用程序，我的客户给了我他想要的严格要求数据在输入数据库时​​立即被迁移。

有两种可能的方法，我认为这个任务可以通过

1 安排控制台应用程序每 1 分钟运行一次

2 数据库池（我只听说过这个东西，你们能帮我参考互联网上与这种方法相关的文章和其他材料吗）

那么你们怎么看，我应该选择哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:31:54.523

.NET 有一个 SQL 通知
，它比轮询更有效

[使用 SqlNotificationRequest 订阅查询通知](http://msdn.microsoft.com/en-us/library/ms190270%28v=SQL.105%29.aspx)

你确定控制台应用程序是正确的方法吗？
视为服务。

还可以按照 Joe 的建议考虑 SISS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:21:49.337

我可能会研究一个进行迁移的 SSIS 包，并可能在插入表时从触发器执行它。这样就没有延迟，一切都在一个地方完成。

我不完全知道你是如何做到这一点的——不是 SSIS 的人——但我知道这是可以做到的。

如果迁移需要很长时间才能执行，或者如果记录很快插入到数据库中，这可能不是一个好主意，因为它们的插入速度可能比迁移速度快。如果是这种情况，一个批量提取新记录的计划作业肯定是要走的路 - 要么是不断运行并使用计时器触发事件​​的 Windows 服务，要么是每 x 分钟运行一次的 Windows 计划任务，或每 x 分钟运行一次的 SQL Server 作业 - 到那时，您选择哪个并不重要。

# javascript - 如果我搜索新创建的元素，getElementById 总是返回 null

> ID：16083969
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:16.400
> 
> 标签：javascript, jquery, getelementbyid

我想复制一个元素，然后分配给新的 id 和名称。我的目标是稍后我想再次找到那个元素。这是一个例子：

```
<div id="contDiv">
<div style="float:left"> filename </div>
<div style="margin-left: 323px"> playtime(in Sek.) </div>
<div id="tl_Einst" class="editor-field">
<select id="Medianames" onchange="change(this)" name="TL_Medianame">
<span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-    for="Filename">    </span>
<select id="playtime" class="playtime" name="playtime" disabled="">
</div>
<input id="More" type="button" onclick="Addfiles()" value="+">
</div> 
```

在运行时我复制元素“tl_Einst”及其子元素。然后用户更改组合框的内容然后我读取它们并将它们发送到服务器。后来我得到一个答案。所以我打电话给`GetelementById("newElementID")`，但如果搜索新创建的元素，我总是为空。我能做些什么？

谢谢你

马立克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:15:56.270

正确的语法是：

```
var el = document.getElementById("newElementID"); 
```

通常，# 用于 JQuery 或其他 javascript 框架，或者如下面的@Quention 所述，也可以与 document.querySelector 一起使用。

您在哪里将元素添加到 DOM？你也可以包括那个代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:20:00.083

你把它添加到页面了吗？

getElementByID 只会在 DOM 中找到一个元素。您可以将其添加到页面或*简单地*将其分配给变量。

```
var newElementID= document.createElement("p"); 
```

`newElementID`即使它不在页面中，您现在也可以在您的代码中找到它。

# javascript - 设置对象属性 javascript

> ID：16083971
> 
> 赞同：-3
> 
> 时间：2013-04-18T13:13:19.350
> 
> 标签：javascript, arrays, properties

我不确定这是否可能，但你们可以这样说：

```
 var tricky = function(obj){
 var ret = new Object();
 ret.porp1 = 'undefined';
 ret.prop2 = 'undefined';
 for (porp in ret){
    if (obj.hasOwnProperty(prop) == false){
        obj.???????? = prop;
 }
 return obj;
 }

 tricky({prop1:'ok_prop'});

 ===>>{prop1:'ok_prop',prop2:'undefined'} 
```

我没有用语言提出问题，因为我发现很难正确定义。如您所见，我的问题是：我有一个对象，有时我在该对象中设置了一些属性，有时却没有。我想要一个函数来检查我的对象是否具有一系列属性，如果没有，则将其显式设置为未定义。如果我将其隐式保留为未定义，则它不起作用，因为我使用它将其发送到玉模板，该模板可能将属性设置为一个值，但系统已更改状态，我希望它是未定义的。

我应该`obj.[what I put here]`在首先设置为porp1然后设置prop2之后放置什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:39:15.480

我假设您想将“模板”对象的成员添加`ret`到`obj`它们不存在的情况下，这`porp`是一个错字。

您说如果它们不存在，您想*将其显式设置为未定义*但是没有必要，因为对象的不存在成员已经未定义：

```
 var x = new Object(); 
 alert (typeof x.wibble === 'undefined') //true 
```

您`ret.porp1 = 'undefined';`正在为成员分配一个带有文本内容 的**字符串**`'undefined'`对象，这与“未定义”的状态无关，如果这是您的意图：

```
var tricky = function(obj) {
    var ret = {
        prop1: 'undefined',
        prop2: 'undefined'
    }
    for (requiredMember in ret) {
        if (obj.hasOwnProperty(requiredMember) === false) {
            obj[requiredMember] = ret[requiredMember];
        }
    }
    return obj;
}

var o = {prop1:'ok_prop'};

o = tricky(o);

console.dir(o);
  Object
    prop1: "ok_prop"
    prop2: "undefined" 
```

# dynamic - 常春藤：使用动态修订

> ID：16083972
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:19.260
> 
> 标签：dynamic, ivy, revision

我在理解如何在我的 Java 项目中有效地使用[Ivy的动态修订时遇到问题。](http://ant.apache.org/ivy/)

目前，我有以下布局：

```
lib-a
revision: 1.0.0
status: release
dependencies: none

lib-b
revision: 2.0.0
status: release
dependencies: lib-a, rev 1.0.0

project-a
revision: 3.0.0
status: release
dependencies: lib-b, rev 2.0.0

project-b
revision: 4.0.0
status: release
dependencies: lib-b, rev 2.0.0 
```

这意味着我始终保持状态`release`并使用明确的版本号。如果我`lib-a`在开发过程中进行更改，比如说`lib-a`，这是非常痛苦的。

我将更改保存在 中`lib-a`，将 ivy 文件中的修订更新`1.0.1`为进行细微更改。然后我需要更新 lib-b 的依赖项以宣布 lib-a 的修订版 1.0.1。现在我可以更新版本`lib-b`并且`project-a`因为`project-a`它是可执行文件并且包含我需要运行的集成测试。

`lib-b`第二种方法是使用更新的依赖项但版本相同重新发布。这通常适用于命令行上的 ant，但不适用于带有[ivy-beans](https://code.google.com/p/ivybeans/)插件的 NetBeans。他们仍然使用 ivy 文件的缓存版本，`lib-b.`所以我需要清理到本地缓存以使其工作。

我对所有项目都使用我们 SVN 存储库中的通用`build-ivy.xml`ant 脚本。每个项目`build.xml`在项目的根目录中都有一个大部分时间只包含`build-ivy.xml`. 有时会添加或覆盖必要的任务。我刚刚[在这里](https://stackoverflow.com/questions/3696831/overriding-an-ivy-dependencies-revision)和[这里](http://ant.apache.org/ivy/history/latest-milestone/bestpractices.html)读到该解决方案可能正在使用动态修订。据我了解，我会将所有 ivy 文件中的修订设置为，并将所有 ivy 文件中`integration-latest`的状态设置为`integration`. 然后，常春藤总是会自动解析最新版本。但是我会将我的模块的修订设置为什么？完全省略？我将如何创建发布版本？我是否需要更改所有常春藤文件并将状态设置为`release``release`或者我会在发布模块之前执行交付任务，并尽可能覆盖状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:58:52.830

我建议阅读以下关于 Ivy 中多模块项目的教程。

*   [http://ant.apache.org/ivy/history/latest-milestone/tutorial/multiproject.html](http://ant.apache.org/ivy/history/latest-milestone/tutorial/multiproject.html)

ANT 构建传统上是大而单一的。您需要做的是效仿 Maven 将大型项目拆分为一系列较小构建的方式。每个子构建都将其工件发布到 ivy 的本地存储库中。

对于这种结构，Ivy 有很多有用的任务：

*   [buildlist](http://ant.apache.org/ivy/history/latest-milestone/use/buildlist.html) - 从您的整体主构建文件中调用。用于查看每个子模块的 ivy.xml 并确定正确的构建顺序（一些模块依赖于其他模块）
*   [buildnumber](http://ant.apache.org/ivy/history/latest-milestone/use/buildnumber.html) - 查看已发布的内容并按顺序生成下一个版本号
*   [发布](http://ant.apache.org/ivy/history/latest-milestone/use/publish.html)- 将工件推送到本地仓库（或外部仓库，如果在 ivysettings.xml 文件中配置）

# java - 如何在高度或宽度大小的一维数组中呈现二维数组

> ID：16083973
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:26.510
> 
> 标签：java, android, parallel-processing, matrix-multiplication, renderscript

我有一个问题，我想用 Android Renderscript 进行并行化。为此，我必须将输入数据分配给 renderscript 并将它们分配回去。我想做大小为 8x8 或 64x64 矩阵的大矩阵乘法。有两个问题：1）我不能分配二维数组。2) forEach 执行循环的频率与分配的大小一样。例如，输入向量有 10 个元素，循环将执行 10 次。为了找到解决方案，我进行了编码。所以我的矩阵是在字节数组中随机生成的。这个字节数组将被编码为一个整数数组的行或列。所以我把一个二维数组放在一个长度为大小的一维数组中。另一方面（Renderscript）我必须对它们进行解码，计算结果并将其与分配放在后面。我想避免编码并加快应用程序。

array[a][b] --> vector[a] or vector[b] but not vector[a*b] 是否存在可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:01:58.163

为了帮助解决问题的第二部分，请将矩阵 Allocations 单独绑定到 Renderscript 并将 rsForEach 传递给另一个根据您要执行的操作数量调整大小的 Allocation。您可以使用此分配中设置的值和/或 root() 函数的 x 参数来帮助您找到对矩阵数据进行操作的位置。

[我对图像的每行/列进行操作](https://stackoverflow.com/questions/10576583/passing-array-to-rsforeach-in-renderscript-compute/10617141#10617141)的答案提供了更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:30:25.523

我不确定我是否完全理解您的问题。

让我试着根据我的理解提出一个一般性的建议。

您可以创建一个包装器类，通过 getter 和 setter 将输入索引转换为内部索引，这个包装器还可以实现 java.lang.Iterable。

# java - 装箱蛮力法

> ID：16083977
> 
> 赞同：4
> 
> 时间：2013-04-18T13:13:31.307
> 
> 标签：java, brute-force, bin, packing

我需要制作解决装箱问题的程序，但我已经制作了第一个拟合和贪婪算法，但我的讲师说在某些情况下它不会找到问题的最小解决方案。所以我决定尝试暴力破解，但我不知道它应该如何检查所有可能的解决方案。所以是的..有人可以向我解释或提供伪代码或其他东西。我会很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:48:31.410

蛮力只是尝试每一种组合。

![在此处输入图像描述](https://i.stack.imgur.com/PUh9l.png)

要编写蛮力代码，请考虑以下技巧：假设我们要访问 8 个皇后的所有组合，而不对 8 个嵌套循环进行硬编码。想想以下由 8 个零组成的八进制数。

```
00000000 
```

然后编写一个循环，在八进制数字系统中增加它：

```
00000001
00000002
00000003
...
00000007 // 7 + 1 = 10
00000010
00000011
00000012
...
77777776
77777777 
```

这会尝试所有组合，而无需对 8 个内部循环进行硬编码。将 8 替换为 n 并且相同的代码仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:05:48.313

请注意，[装箱](http://en.wikipedia.org/wiki/Bin_packing_problem)是一个 NP-hard 问题，基本上意味着即使对于相对较小的输入，对其进行蛮力运行也需要很长时间，因此**NP-hard 问题的蛮力几乎不是一个好主意**。上面的链接显示了一些替代方案（或近似值）。但我会继续...

[递归](http://www.cse.wustl.edu/~kjg/cse131/Notes/Recursion/recursion.html)使蛮力变得容易。一旦您了解[了基本的递归算法](https://stackoverflow.com/a/9724748/1711796)，请继续阅读...

基本思想：（对于 3 个项目，2 个箱子，假设一切都合适，如果它不只是跳过那个分支）

```
Put the first item in the first bin.
  Put the second item in the first bin.
    Put the third item in the first bin.
      Woo-hoo! We have a solution!
    Remove the third item from the first bin and put it into the second bin.
      Woo-hoo! We have a solution!
    Remove the third item from the second bin.
  Remove the second item from the first bin and put it into the second bin.
    Put the third item in the first bin.
      Woo-hoo! We have a solution!
    Remove the third item from the first bin and put it into the second bin.
      Woo-hoo! We have a solution!
    Remove the third item from the second bin.
  Remove the second item from the second bin.
Remove the first item from the first bin and put it into the second bin.
  Put the second item in the first bin.
    Put the third item in the first bin.
      Woo-hoo! We have a solution!
    Remove the third item from the first bin and put it into the second bin.
      Woo-hoo! We have a solution!
    Remove the third item from the second bin.
  Remove the second item from the first bin and put it into the second bin.
    Put the third item in the first bin.
      Woo-hoo! We have a solution!
    Remove the third item from the first bin and put it into the second bin.
      Woo-hoo! We have a solution!
    Remove the third item from the second bin.
  Remove the second item from the second bin.
Remove the first item from the second bin. 
```

（看看已经有多少步了？这仅适用于 3 件物品和 2 个垃圾箱）

伪代码：

```
recurse(int itemID)
  if pastLastItem(itemID)
    if betterThanBestSolution
      bestSolution = currentAssignment
    return
  for each bin i:
    putIntoBin(itemID, i)
    recurse(itemID+1)
    removeFromBin(itemID, i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-31T22:41:12.817

显然，您可以做得比蛮力更好。首先，您计算最小箱数。如果您有大小为 100 的垃圾箱，并且物品的总大小为 1,234，那么它们将不适合 12 个垃圾箱，但可能适合 13 个垃圾箱。

使用 13 个 bin，您将有 66 个 (1,300 - 1,234) 的未使用空间。由于 5 x 13 = 65，因此必须至少有一个大小为 6 的 bin 未使用。因此，如果您有任何尺寸为 6 或以下的物品，则可以将其排除在计算之外，因为最终您仍然可以适应它（当然您需要检查您拥有的实际数字，但无论如何，小物品可以从搜索中删除）。

如果两个项目正好填满一个箱子，那么您不需要考虑任何不适合放在一起的解决方案。

从那时起，您使用动态编程，除了您*总是*使用最大的未使用项目作为新箱中的第一个项目，您总是按降序将项目装满一个箱，您总是添加更多的项目直到没有合适的东西，您从不考虑组合其中所有项目都较小或与其他组合中的大小相同。最后，当您找到与所需的最小箱数一样好的组合时，您找到了最佳解决方案。

# java - Android Java Textbox.append 在新线程中不起作用

> ID：16083979
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:32.913
> 
> 标签：java, android, textbox

我创建了一个使用套接字连接到我的服务器的应用程序。该服务器向手机发送一个信息字符串，手机使用 BufferedReader 读取此信息。现在我想在屏幕上显示这些信息（例如在文本框中），但 textbox.append 命令在这种情况下不起作用。没有错误，但在运行时它不会将字符串添加到文本框中。对 textviews 进行了同样的尝试。这里是这段代码的一部分。在连接过程中调用 commands() 函数，并在开头声明变量。

```
public void commands() throws Exception{

Responce = buffer.readLine();
final TextView textViewToChange = (TextView) findViewById(R.id.textView1);
textViewToChange.setText(Responce);

commands(); } 
```

如果有人知道如何解决这个问题会很好。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:14:40.767

android 中的 UI 不能从另一个线程更新。看着

```
 AsyncTask 
```

请阅读此[内容 Ui 更新 Android](https://stackoverflow.com/questions/4369537/update-ui-from-thread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:16:52.407

您需要在主 UI 线程上更新 UI。您可以使用 runOnUiThread 如下。

```
 runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  {       
                      textViewToChange.setText(Responce);
                 }
                 }); 
```

# ios - 在 MKMapView 上绘制 UIImageView

> ID：16083980
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:35.057
> 
> 标签：ios, objective-c, ipad, touch, mkmapview

我已经为这个问题搜索了很多答案，但似乎没有一个完全符合我的要求。很多教程向我展示了如何在代码中添加线条和多边形，但不是手绘。

我在地图上有一个带有 UIImageView 的 MKMapView。我可以在我的 UIImageView 上画一点，但在那之后，MKMapView 被拖动并且绘制不会继续。

我想知道我做错了什么？

这是我的触摸事件代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    pointA = [touch locationInView:drawView];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [touches anyObject];
        CGPoint currentLocation = [touch locationInView:drawView];

        UIGraphicsBeginImageContext(drawView.frame.size);
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        [drawView.image drawInRect:CGRectMake(0, 0, drawView.frame.size.width, drawView.frame.size.height)];
        CGContextSetLineCap(ctx, kCGLineCapRound);
        CGContextSetLineWidth(ctx, 5.0);
        CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
        CGContextBeginPath(ctx);
        CGContextMoveToPoint(ctx, pointA.x, pointA.y);
        CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
        CGContextStrokePath(ctx);
        drawView.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        pointA = currentLocation;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [touches anyObject];
        CGPoint currentLocation = [touch locationInView:drawView];

        UIGraphicsBeginImageContext(drawView.frame.size);
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        [drawView.image drawInRect:CGRectMake(0, 0, drawView.frame.size.width, drawView.frame.size.height)];
        CGContextSetLineCap(ctx, kCGLineCapRound);
        CGContextSetLineWidth(ctx, 5.0);
        CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
        CGContextBeginPath(ctx);
        CGContextMoveToPoint(ctx, pointA.x, pointA.y);
        CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
        CGContextStrokePath(ctx);
        drawView.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        pointA = currentLocation;
} 
```

以及显示 UIImageView 的按钮的代码：

**编辑：**我这样做是为了停止与地图的交互：

```
- (IBAction)modeDraw:(id)sender {
    if (drawView.alpha == 0.0) {
        drawView.image=nil; //empty for a new draw
        drawView.backgroundColor = [UIColor whiteColor];
        [UIImageView beginAnimations:nil context:nil];
        [UIImageView setAnimationDuration:0.5];
        [drawView setAlpha:0.4];
        [UIImageView commitAnimations];
        myMapView.zoomEnabled = NO;
        myMapView.scrollEnabled = NO;
    } else {
        [UIImageView beginAnimations:nil context:nil];
        [UIImageView setAnimationDuration:0.5];
        [drawView setAlpha:0.0];
        [UIImageView commitAnimations];
        myMapView.zoomEnabled = YES;
        myMapView.scrollEnabled = YES;
    }
} 
```

画完之后，**我想把这个画变成一个表格**（区域），然后放到地图上。如果你对我有一些迹象？

谢谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:59:25.287

如果有人和我有同样的问题，这是我的代码以及艾伦给我的链接： http: [//www.apps168.net/post/1460.html](http://www.apps168.net/post/1460.html)：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    pointA = [touch locationInView:drawView];
    pathRef = CGPathCreateMutable();
    CGPathMoveToPoint(pathRef, NULL, pointA.x, pointA.y);
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:drawView];
    CGPoint pastLocation = [touch previousLocationInView:drawView];

    UIGraphicsBeginImageContext(drawView.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [drawView.image drawInRect:CGRectMake(0, 0, drawView.frame.size.width, drawView.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 0.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextStrokePath(ctx);

    CGContextMoveToPoint(ctx, pastLocation.x, pastLocation.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextDrawPath(ctx, kCGPathFillStroke);
    drawView.image=UIGraphicsGetImageFromCurrentImageContext();

    CGPathAddLineToPoint(pathRef, NULL, currentLocation.x, currentLocation.y);
    UIGraphicsEndImageContext();

    //pointA = currentLocation;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPathCloseSubpath(pathRef);

    NSUInteger count = [array count];
    for (NSUInteger i = 0; i < count; i=i+2) {
        NSString *lat = [array objectAtIndex: i];
        NSString *lgt = [array objectAtIndex: i+1];

        CLLocationCoordinate2D pointLoc;
        pointLoc.latitude = [lat doubleValue];
        pointLoc.longitude = [lgt doubleValue];

        locationConverToImage = [myMapView convertCoordinate:pointLoc toPointToView:drawView];
        if (CGPathContainsPoint(pathRef, NULL, locationConverToImage, NO)) {
            NSLog(@"point in path!");
            //sélection de ces points et cacher les autres.
        }
    }

    [UIImageView beginAnimations:nil context:nil];
    [UIImageView setAnimationDuration:0.5];
    [drawView setAlpha:0.0];
    [UIImageView commitAnimations];
    myMapView.zoomEnabled = YES;
    myMapView.scrollEnabled = YES;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T09:48:11.417

[画我的地图](https://github.com/AllanChen/DrawMyMap)试试这个，这是绘制地图点项目

# php - 当表单在 PHP 中作为 multipart/form-data 发布时，UTF-8 文本会出现乱码

> ID：16083981
> 
> 赞同：1
> 
> 时间：2013-04-18T13:13:39.493
> 
> 标签：php, utf-8, character-encoding, multipartform-data, mbstring

我有一个 PHP 脚本来发布文章。在我们添加文件上传支持之前，它工作得非常好。要启用文件上传，我们必须将标签的 enctype 更改为 multipart/form-data。现在，每当我们尝试提交包含多字节字符的文章时，在您通过 $_POST 收到它们后它们就会变成乱码。如果我们删除表单的 enctype，那么它就可以正常工作。

我们在网上搜索了一个以 php 为中心的解决方案，但没有运气。tag 有一个 accept-charset 属性，但它在 IE 中不起作用。JSP 有一个解决方案，[当表单发布为 multipart/form-data 时，UTF-8 文本会出现乱码，](https://stackoverflow.com/questions/546365/utf-8-text-is-garbled-when-form-is-posted-as-multipart-form-data)但 PHP 没有解决方案。所以，请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-08T23:11:40.373

如果您使用 PHP 5.4.x，将 mbstring.http_input 从“auto”设置为“pass”可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T20:05:32.310

重新安装 apache 并重新编译 php 为 linux 上的一些 ppl 修复了它。

我在我的本地主机上也有同样的情况，但在生产服务器上这不会发生。我的本地是 WAMP，生产是 LAMP，一切都有相同的版本。

所以对我来说它适用于这些：CentOs 6.3、php 5.4、Apache 2.2.15

顺便说一句，在我的本地， mb_detect_encoding() 显示 'UTF-8' 但字符串还是一团糟。

# wpf - 在触发器中嵌入资源列表以应用条件主题

> ID：16083984
> 
> 赞同：0
> 
> 时间：2013-04-18T13:13:41.493
> 
> 标签：wpf, xaml

所以我第一次使用 wpf 应用程序并遇到了一个绊脚石。

我正在使用来自第三方（actipro）的主题，我可以将该主题中的各个属性设置为我想要的任何内容

```
<Style.Resources>
    <SolidColorBrush   x:Key="{x:Static themes:AssetResourceKeys.ExpanderHeaderBackgroundNormalBrushKey}" Color="Yellow" />
</Style.Resources> 
```

实际上，我想做的是将该声明放在触发器中，如下所示

```
<Style.Triggers>
    <Trigger Property="IsMouseOver" Value="True">
              <SolidColorBrush   x:Key="{x:Static themes:AssetResourceKeys.ExpanderHeaderBackgroundNormalBrushKey}" Color="Yellow" />
    </Trigger>
</Style.Triggers> 
```

但这当然是非法的语法。

我知道我可以设置这样的条件样式

```
<Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
                  <Setter Property="Background" Value="Yellow" />
        </Trigger>
</Style.Triggers> 
```

甚至像这样

```
<Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
                  <Setter Property="Background" Value="{StaticResource {x:Static themes:AssetResourceKeys.ExpanderHeaderBackgroundNormalBrushKey}}" />
        </Trigger>
</Style.Triggers> 
```

但这会将背景设置为资源定义的颜色。那不是我所追求的。
我需要设置 ExpanderHeaderBackground，这不是 setter 的可用属性。

在我看来，能够在触发器中定义资源本身似乎是合乎逻辑的。然后，它们仅在满足某些条件时才适用。显然这不是 wpf 的工作方式。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:25:57.127

您可以在样式资源中设置资源，但不能在触发器本身中设置。

```
<Style TargetType="Control">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static themes:AssetResourceKeys.ExpanderHeaderBackgroundNormalBrushKey}" Color="Yellow" />
    </Style.Resources>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="{StaticResource themes:AssetResourceKeys.ExpanderHeaderBackgroundNormalBrushKey}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

触发器本身不提供特定资源。如果您想要实现的是基于其资源键覆盖特定资源，并且取决于 UI 行为（例如 MouseOver），您将不得不使用后面的代码来实现。

编辑：我不熟悉 Actipro，但他们是否建议通过基于资源键覆盖资源来自定义主题？这不被认为是一种很好的做法，因为它不会产生可靠的结果。

# mediaelement.js - 禁用向上/向下键以控制音量

> ID：16083987
> 
> 赞同：1
> 
> 时间：2013-04-18T13:13:44.690
> 
> 标签：mediaelement.js

在带有 mediaelement.js 的 wordpress 站点中，仅用于沿页面播放音频文件，我需要覆盖键盘的上/下，因为它会在单击播放按钮后滚动页面时更改音量上/下，有人知道吗？或提示如何覆盖此键盘。

提前感谢您的帮助。

米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:16:24.223

将`enableKeyboard`控件的属性设置为 false；

```
$('myMediaElement').mediaelementplayer({
    //other properties...
    enableKeyboard: false
}); 
```

# maven - groovy.lang.MissingPropertyException：没有这样的属性：类管理器：Script1

> ID：16083995
> 
> 赞同：22
> 
> 时间：2013-04-18T13:14:00.290
> 
> 标签：maven, groovy, jenkins, hudson, hudson-plugins

我正在尝试在 Hudson 中调用 Groovy（使用 groovy 插件）来获取我们构建的一些属性。但我得到了这个例外：

> groovy.lang.MissingPropertyException：没有这样的属性：类管理器：Script1

我通过以下行得到这个：

```
def buildNUmber = manager.build.number 
```

当我在 Jenkins 中作为内联命令运行以及使用脚本时会发生这种情况：

我尝试了下面的解决方案，但在声明过程中失败了（第二行）：

```
Binding binding = new Binding();
binding.setVariable("manager", manager);
GroovyShell shell = new GroovyShell(binding);
shell.evaluate(new File("d:/dev/others/hudson/userContent/ScriptStuff.groovy").text); 
```

以上运行使用：Groovy 命令。当我运行构建时，它会出错并抱怨该行 -`binding.setVariable("manager", manager);`

当我使用 Groovy 脚本文件时，它会抱怨：

```
 def buildNumber = manager.build.number 
```

两个错误都是：

> groovy.lang.MissingPropertyException：没有这样的属性：类管理器：Script1

[也尝试了此线程](http://jenkins.361315.n4.nabble.com/Groovy-post-script-error-td3216762.html)中提到的所有内容：

我正在使用 Hudson 2.2.1 和 Groovy 2.1.3。有什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-11-04T08:40:39.310

`manager`由某些 Groovy 脚本插件提供，但不是全部。要使您的脚本通用，请改用 Jenkins/Hudson API：

```
import hudson.model.*

def build = Thread.currentThread().executable
def buildNumber = build.number
... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-21T08:36:09.900

以防万一，如果您使用“执行系统 ​​Groovy 脚本”，则不需要使用“管理器”变量。这对我有用 -

```
def workspace = build.getEnvVars()["WORKSPACE"] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-10T18:52:06.433

**groovy.lang.MissingPropertyException:**的原因之一是在您使用其范围之外的变量或未定义该变量时引发。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-21T18:54:21.543

也许我错过了您的代码的某些部分，但是您在哪里定义经理？如果这是完整的 Groovy 脚本，那么您正在尝试绑定一个未声明任何内容的变量，因此它失败也就不足为奇了。

只需定义一个您想要的经理，例如：

```
def manager = "my manager" // probably not what you want 
```

这应该可以解决您当前的错误。

# javascript - jquerylightbox 不起作用 - 脚本文件包含序列是否有问题？

> ID：16083998
> 
> 赞同：0
> 
> 时间：2013-04-18T13:14:15.720
> 
> 标签：javascript, jquery, html, asp.net-mvc

我正在尝试使用 jQuery.Lighbox 库，但找不到 lightBox 方法。

我做了什么：

包括 jquery.lightbox.js（在 jquery 本身之后）：

```
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link href="/Content/site.css" rel="stylesheet"/>
        <link href="/Content/jquery.lightbox.css" rel="stylesheet"/>
        <script src="/Scripts/modernizr-2.5.3.js"></script>
        <script src="/Scripts/jquery-1.7.1.js"></script>
        <script src="/Scripts/jquery.lightbox.js"></script>

  ...
 <head> 
```

在正文中，我将灯箱代码连接到 html 元素：

```
<body>
<script type="text/javascript">
    $(function () {
        try
        {
            $('#gallery a').lightBox(); // Select all links with lightbox class
        }
        catch (err) {
            var txt = "";
            txt = "There was an error on this page.\n\n";
            txt += "Error description: " + err.message + "\n\n";
            txt += "Click OK to continue.\n\n";
            alert(txt);
        }
    });
    </script> 
```

并且非常期待js代码引发错误：

> 此页面出现错误。错误描述：对象 [object Object]**没有方法 'lightBox' 单击确定继续。**

我是 jQuery 的新手，所以如果你能给我一个提示，我做错了什么以及如何解决它。

谢谢你。

**编辑：**

已解决：原来 jquery.js 已被包含两次，并且隐藏了 jquery.lightbox 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:21:22.267

> 对象 [对象对象] 没有方法“灯箱”

这意味着未找到 lightBox 方法，这意味着未正确加载 lightbox js..检查一下...查看源代码..并确保您的路径正确

# map - 使用 d3.js 和 TopoJSON 绘制地图，阿尔伯斯西伯利亚投影

> ID：16083999
> 
> 赞同：6
> 
> 时间：2013-04-18T13:14:16.067
> 
> 标签：map, d3.js, geojson, topojson

我正在尝试使用 d3.js 制作 Choropleth，但我一开始就被卡住了。我找到了一个 Shapefile 并从中生成了 GeoJSON 和 TopoJson 文件，就像[这里](http://bost.ocks.org/mike/map/)一样。该地图使用阿尔伯斯-西伯利亚投影。我对这个投影的发现：

投影：Albers 等积圆锥

*   单位：米
*   球体：克拉索夫斯基
*   中央经线：105
*   标准并行 1：52
*   标准并行 2：64
*   参考纬度：0
*   假东：18500000
*   伪北：0

PROJ.4: +proj=aea +lat_1=52 +lat_2=64 +lat_0=0 +lon_0=105 +x_0=18500000 +y_0=0 +ellps=krass +units=m +towgs84=28,-130,-95 ,0,0,0,0 +no_defs

地图信息：“阿尔伯斯-西伯利亚”，9、1001、7、105、0、64、52、18500000、0。

所以我终于得到了这段代码，它什么也没做（甚至冻结），怎么了？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Choropleth</title>
    <script type="text/javascript" src="d3/d3.v3.js"></script>
    <script type="text/javascript" src="d3/queue.v1.min.js"></script>
    <script type="text/javascript" src="d3/topojson.v0.min.js"></script>
</head>
<body>
    <h1>My Choropleth</h1>
    <script type="text/javascript">

        var width = 960,
            height = 500;

        var svg = d3.select("body").append("svg")
                    .attr("width", width)
                    .attr("height", height);

        var pr = d3.geo.albers()
            .center([105,0])
            .parallels([52, 64])
            .scale(1000);

        var path = d3.geo.path().projection(pr);

        d3.json("map_rus_topo.json", function(error, map) {
         svg.append("path")
          .datum(topojson.object(map, map.objects.map_rus))
          .attr("d", path);
        });

    </script>
</body> 
```

[您可以在此处](https://github.com/KoGor/Map-of-Russia) 找到所有 JSON 文件。
还有一个问题：如何在**我的**TopoJson 文件中引用**region**字段的值。

 *** * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T16:05:38.340

第一个问题是您的 GeoJSON 文件不是以度为单位的 [longitude°, latitude°]，也称为[EPSG:4326 或 WGS 84](http://spatialreference.org/ref/epsg/4326/)。要将您的 GeoJSON 文件转换为 WGS 84，您首先需要创建一个投影文件，`albers.prj`这样您就可以告诉 OGR 源投影是什么。

```
+proj=aea +lat_1=52 +lat_2=64 +lat_0=0 +lon_0=105 +x_0=18500000 +y_0=0 +ellps=krass +units=m +towgs84=28,-130,-95,0,0,0,0 +no_defs 
```

然后，通过将 GeoJSON 文件转换为 WGS 84 来“取消投影”它：

```
ogr2ogr -f GeoJSON -s_srs albers.prj -t_srs EPSG:4326 map_rus_wgs84_geo.json map_rus_geo.json 
```

现在您可以在 WGS 84 中转换为 TopoJSON，而不是投影坐标。我还冒昧地做了一些简化：

```
topojson -o map_rus_wgs84_topo.json -s 1e-7 -- russia=map_rus_wgs84_geo.json 
```

第二个问题是您在 D3 中的投影定义不正确。d3.geo.albers 投影具有为以美国为中心的地图设计的默认旋转和中心，因此除了定义中心之外，您还需要覆盖默认旋转。事实上，+lon_0（中央经线）投影参数映射到投影的旋转，而不是投影的中心。给予：

```
var projection = d3.geo.albers()
    .rotate([-105, 0])
    .center([-10, 65])
    .parallels([52, 64])
    .scale(700)
    .translate([width / 2, height / 2]); 
```

（我修改了 center 参数以将俄罗斯置于视口的中心。如果您愿意，可以[自动计算](http://bl.ocks.org/mbostock/4707858)。）您现在应该看到如下内容：

[![阿尔伯斯·西伯利亚](https://i.stack.imgur.com/MHZiK.png)](http://bl.ocks.org/mbostock/5413933)

也可以使用 TopoJSON 中的投影（笛卡尔）坐标，然后定义一个带有空（身份）投影的 d3.geo.path，但我将把它留给一个单独的问题。**