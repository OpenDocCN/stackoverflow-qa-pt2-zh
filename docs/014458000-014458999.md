# StackOverflow 问答 14458000-14458999

# ios - 在设备上运行的 iOS UI 自动化脚本

> ID：14458002
> 
> 赞同：1
> 
> 时间：2013-01-22T11:57:16.660
> 
> 标签：ios, mobile-application, ios-ui-automation

有人可以帮助我如何运行 iOS UI 自动化脚本以在真实设备上运行。提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:24:46.263

作为 Instruments 的一部分，针对设备运行 UI 自动化脚本与您用于执行任何 Instruments 分析的过程相同。在 Xcode 中，选择设备，而不是在设备上构建和运行，而是从“产品”菜单中选择“配置文件”。选择 UI 自动化模板并将其放入您要运行的脚本。现在您可以运行脚本，它应该像控制模拟器一样控制您的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T09:27:16.470

我认为这应该：

转到您的 Xcode

*   选择您的设备
*   在构建设置中选择正确的配置文件
*   现在从产品菜单中选择配置文件或简单地命令键 + i。

它将在您插入的设备上运行您的脚本。

# c# - 另一个进程正在使用 StreamWriter/StreamReader 文件

> ID：14458003
> 
> 赞同：4
> 
> 时间：2013-01-22T11:57:17.453
> 
> 标签：c#, streamreader, streamwriter

我有一个 StreamWriter 对象要写入日志文件，它的初始化如下：

```
StreamWriter streamWriter = File.AppendText(GetLogFilePath());
streamWriter.AutoFlush = true; 
```

稍后在我的代码中，我需要关闭日志文件，然后读取部分已注销的内容。我有以下代码：

```
streamWriter.Close();
streamWriter = null;
StreamReader logFileStream = File.OpenText(GetLogFilePath()); 
```

这是抛出异常： *该进程无法访问该文件，因为它正在被另一个进程使用。*

据推测，问题是我关闭 StreamWriter 时没有正确关闭日志文件。

**有没有更好的方法来关闭 StreamWriter 以确保它打开的文件被正确关闭？**

更新：我已经解决了我的问题。这是由一个不相关的问题引起的（一个单独的应用程序正在访问我试图访问的文件）。我接受了 Dmitry Martovoi 的回答，因为我认为这对将来遇到类似问题的其他人最有用；但重要的一点是，该解决方案确实需要在每次写入日志时都打开日志文件，这可能会导致不必要的开销。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T12:02:06.013

我总是将这样的代码包装在一个`using`语句中

```
using (StreamWriter writer = File.AppendText(path)) 
{
   writer.WriteLine("This");
   writer.WriteLine("is Extra");
   writer.WriteLine("Text");
} 
```

但是对于`StreamWriter` `Close`方法做的完全一样`Dispose`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:03:46.953

您应该将每个文件操作包装在一个`using`块中：

```
using (StreamWriter s = new StreamWriter(/* your arguments here *\)) {
    // code that uses it here
}
// file is closed here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:02:06.133

尝试使用 File.Open(fileName, FileMode.Open, FileAccess.Read, FileShare.None);

# hadoop - Amazon Elastic Map Reduce - 创建作业流

> ID：14458008
> 
> 赞同：8
> 
> 时间：2013-01-22T11:57:31.570
> 
> 标签：hadoop, amazon-s3, amazon-ec2, elastic-map-reduce, emr

我对亚马逊服务很陌生。我在创建工作流方面遇到了问题。每次我创建任何工作流程时，它都会失败或关闭。我不清楚输入、输出或映射器函数上传技术。我已经关注了开发人员部分，但事情并不清楚。任何建议都会有所帮助。提前致谢。

错误日志是

```
Last State Change: No active keys found for user account 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-04T21:18:01.300

这是对我有用的修复程序，如果您的工作流程报告以下错误，您可能需要它：

```
Last State Change: No active keys found for user account 
```

当您创建 AWS 账户时，默认情况下，必须为您创建安全访问密钥。在某些情况下，它不会自动创建，因此您应该按照以下步骤自行创建：

*   在 AWS 控制台中通过单击您的账户名访问的菜单下，您将找到一个**安全凭证**选项。点击它

*   展开**访问密钥（访问密钥 ID 和秘密访问密钥）**部分。检查那里是否已经创建了密钥。

*   如果未找到密钥，则单击**创建新访问密钥**并使其处于活动状态（默认情况下应设置为活动状态）。

*   现在创建一个工作流程，它应该可以工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-29T10:34:10.627

在创建我的第一个 AWS EMR 集群的 AWS 教程之后，我也遇到了同样的问题。新的 AWS EMR 控制台将尝试创建集群“正在启动”，但在 2-4 分钟后集群状态将更改为“因错误终止：验证错误”并查看集群详细信息，显示状态“未找到活动密钥”用户帐号”。

您必须按照上述建议在您的安全凭证中创建一个活动访问密钥。然后它对我来说很好。

# asp.net - 上传具有预定义文件格式的文件

> ID：14458010
> 
> 赞同：0
> 
> 时间：2013-01-22T11:57:33.677
> 
> 标签：asp.net, .net

在 .Net Web 应用程序中，`xls`需要上传文件。

所需的场景是这样的：当用户单击页面上的按钮（例如，浏览按钮）时，它会打开文件浏览窗口。

在这里，是否可以只显示可用的 excel 文件，以便用户可以选择其中列出的任何 excel 文件？

这可以通过编程方式实现吗

任何建议都将是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:03:10.467

简短的回答：没有。

无法从 Web 浏览器中控制文件浏览器的文件规范。您也不能在文件输入值上使用 JavaScript。

正常的解决方案是在发布后查看服务器端的文件扩展名并采取相应措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:07:37.667

您可以使用正则表达式如下：

<asp:FileUpload ID="fuImportData" runat="server" />

<asp:RegularExpressionValidator ID="regexValidator" runat="server" ControlToValidate="fuImportData" ErrorMessage="只允许 XLS" ValidationExpression="(.*.([Xx][Ll][Ss])$)"> < /asp:RegularExpressionValidator>

# php - composer.phar 和（不同的）PHP 版本的工作环境

> ID：14458013
> 
> 赞同：2
> 
> 时间：2013-01-22T11:57:39.560
> 
> 标签：php, composer-php

我遇到了以下问题——我的开发环境有 PHP 5.4.7，而 pagodabox 只有 5.3.10。每当我在 pagodabox 上部署并执行 composer 钩子时，一个或多个依赖项可能需要 PHP > 5.3.10。

这是因为锁定文件还是其他原因？而且，我可以在不手动指定包版本的情况下轻松解决这个问题吗（而不是可能需要 php 5.4.7 的“dev-master”，手动将版本设置为“1.2.1”之类的东西）？

基本上我希望能够指定如下内容：“仅安装适用于 php 5.3.10 或更早版本的软件包”

这可能吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:47:02.643

目前没有办法实现这一点，但您可以[在 github 上将其报告为问题](https://github.com/composer/composer/issues)。这听起来像是一个有趣的功能。

# debugging - 如何在 IntelliJ 中调试 delomboked 代码？

> ID：14458014
> 
> 赞同：15
> 
> 时间：2013-01-22T11:57:40.010
> 
> 标签：debugging, maven, intellij-idea, aspectj, lombok

在我基于 Maven 的项目中，我使用 Lombok 来保存一些样板代码。此外，我正在使用一个 Spring 数据库，它使用 AspectJ 来完成任务。遗憾的是，Lombok 和 AspectJ 在开箱即用时不能很好地协同工作，因为 AspectJ 编译器会重新编译 Java 文件。所以 Lombok 实现的 Getter 和 Setter 丢失了。

我决定使用 Lombok Maven 插件来 delombok 我的代码。然后将此代码传递给 AspectJ。这是基本流程：

```
Sources in /src/main/java or /src/test/java
=> [Delombok] 
=> Delomboked sources in /target/generated-sources/delombok or /target/generated-test-sources/delombok
=> [AspectJ]
=> Compiled results in /target/classes or /target/test-classes 
```

但是，这种方法的一个缺点是：我似乎失去了使用 IntelliJ 的调试支持。在 /src/main/java 或 /target/generated-sources/delombok Java 文件中设置的断点永远不会被命中。我使用 IntelliJ Maven 插件运行项目，选择一个生命周期项目（例如“测试”），调试挂钩。可悲的是，断点永远不会被击中。

可以做些什么来获得调试支持？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-27T15:08:58.893

我没有找到解决办法。因此，我对源代码进行了拆解，并使用普通的 Java 完成了它......悲伤:-(

# python - Python - 如何配置和使用 Kinect

> ID：14458016
> 
> 赞同：7
> 
> 时间：2013-01-22T11:57:49.807
> 
> 标签：python, kinect

我有一个 Xbox 360 + Kinect。玩它很有趣，所以，我想知道是否可以使用 Python 来使用它并制作我自己的游戏（并在 PC 上玩）。
目前，
我有
1.来自 Microsoft 的驱动程序和硬件。（仅限）
2.**没有**3d 编程经验。

**我的问题**
1\. 在 PC 上使用 Kinect 是否有好的和易于使用的模块？
2.还有什么书是一样的？？

我正在使用 Windows 32 和 64 位以及 Python 2.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:45:20.993

有一个名为[Open Kinect](http://openkinect.org/wiki/Main_Page)的项目，其中包含许多您可以使用的包装器，包括一个用于[Python](http://openkinect.org/wiki/Python_Wrapper)的包装器。

为了帮助您入门，提供了一些很好的代码演示及其源代码，也可以[在此处](https://github.com/OpenKinect/libfreenect/tree/master/wrappers/python)在线查看。

一旦你掌握了如何利用 Kinect 发回给你的信息，你就可以尝试流行的[pygame](http://www.pygame.org/wiki/about)来围绕你想要做的任何事情来构建游戏。

# google-chrome-extension - Chrome 扩展桌面通知在睡眠时工作

> ID：14458019
> 
> 赞同：4
> 
> 时间：2013-01-22T11:57:51.710
> 
> 标签：google-chrome-extension, notifications, sleep

我做了一个桌面通知，它每 1 分钟显示一个通知。10 秒后自行关闭。

我去吃午饭，然后电脑进入睡眠状态。当我回来时，我唤醒我的电脑，然后开始大量通知。

我该如何处理这个问题？我想如果计算机休眠它不应该显示通知。我该如何控制它？

**背景.js**

```
function show() {

   var notification = webkitNotifications.createHTMLNotification(
  'notification.html'  
);

  notification.show();
}

// Conditionally initialize the options.
if (!localStorage.isInitialized) {
  localStorage.isActivated = true;   // The display activation.
  localStorage.frequency = 1;        // The display frequency, in minutes.
  localStorage.isInitialized = true; // The option initialization.
}

if (window.webkitNotifications) {
  // While activated, show notifications at the display frequency.

  if (JSON.parse(localStorage.isActivated)) { show(); }

  var interval = 0; // The display interval, in minutes.

  setInterval(function() {
  interval++;     
  chrome.idle.queryState(15, state); 
  if(localStorage.frequency <= interval && state=="active")
     { show(); 
       interval = 0;
     }

  }, 60000);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:07:20.507

使用`Chrome.idle`API 检测浏览器是否处于活动状态并触发您的通知。我想您可以使用可配置的时间间隔来查询状态并推迟通知。

# 参考

*   [Chrome空闲](https://developer.chrome.com/extensions/idle.html#method-queryState)

# 编辑 1

您代码中的状态是回调函数，而不是字符串！所以更改此代码

```
setInterval(function () {
    chrome.idle.queryState(15, state);
    if (localStorage.frequency <= interval && state == "active") {
        show();
        interval = 0;
    }

}, 60000); 
```

到

```
setInterval(function () {
    chrome.idle.queryState(15, function (state) {
        if (localStorage.frequency <= interval && state == "active") {
            show();
            interval = 0;
        }

    });
}, 60000); 
```

# php - 未捕获的 TypeError：对象不是函数（匿名函数）

> ID：14458035
> 
> 赞同：0
> 
> 时间：2013-01-22T11:58:32.007
> 
> 标签：php, javascript, jquery, google-chrome

运行下面的代码时，我的开发人员屏幕中出现错误，当您调用时在 php 页面中，或者 javascript 应该在消息旁边放置一个图标。在 IE 中它工作正常，但在 Chrome 和其他浏览器中得到：

```
 Uncaught TypeError: object is not a function jsfunctions.php:92
  dowarnerr jsfunctions.php:92
  AddIcons jsfunctions.php:180
  (anonymous function) 
```

任何想法这是什么，为什么？

------------------------------------jsfunctions.php---------- -------------

```
function AddIcons()
{
  if (typeof(error)=='object') 
 {
  dowarnerr(error,'Error');
 }
 if (typeof(warning)=='object') 
 {
 dowarnerr(warning,'Warning');
 }
 }
function doerror(err, etype)
{
  msg = err.innerHTML;
  if (etype=='Error') {
    err.innerHTML = '<img id=icon src=/images/err.gif>' + msg;
                      }
  else {
    err.innerHTML = '<img id=icon src=/images/warning.gif>' + msg;
       }
}

function dowarnerr(obj, etype)
{
   if(typeof(obj.innerHTML) == 'string') {
   doerror(obj, etype);
   }
   else 
   {
   for (i = 0; i < obj.length; i++) {
   doerror(obj(i), etype);
   }
   }
}

------------------------------------menu_config.php----------------------------------

<HEAD>
  <LINK REL="StyleSheet" TYPE="text/css" HREF="/styles.php"></LINK>
  <script language="JavaScript" src="/scripts/jsfunctions.php"></script>
</HEAD>

<SCRIPT LANGUAGE="javascript">
AddIcons();
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:11:27.820

如果传递给 dowarnerr() 函数的第一个 arg 是一个你不能使用`for (i = 0; i < obj.length; i++)`语句的对象。你必须使用foreach：

```
for (var propName in obj) {
  if (obj.hasOwnProperty(propName)) {
    doerror(obj[propName], etype);
  }
} 
```

# reporting-services - SSRS - 报告不返回任何数据

> ID：14458047
> 
> 赞同：2
> 
> 时间：2013-01-22T11:59:01.417
> 
> 标签：reporting-services

我有一个从存储过程中提取数据的报告，但是当我在没有任何数据的情况下运行报告时，只会出现标题。我可以在 SQL Profiler 中跟踪过程的执行，当我将执行语句及其参数复制到 SQL Management Studio 中时，该语句运行并从同一个数据库返回数千行数据。

数据集超时设置为 0 并且没有给出超时错误，所以我认为它与返回的数据量无关，但是在管理工作室中运行命令确实需要 10 分钟。

我该如何解决这个问题？

**更新：**问题似乎与报告正在从使用存储的proc“查询类型”的数据集中收集数据的事实有关，因为当我输入exec语句作为文本查询类型时，它确实返回了一些数据，但我可以'运行报表时不要更改参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:57:53.263

有几件事可以尝试：

1.  在报告服务之外测试程序以查看结果是否出来。如果没有，看看程序是否有问题。

2.  对于内存，该过程的结果需要采用 ref_cursor、对象或数组类型的表的形式。

3.  运行 10 分钟可能是个问题。我建议缩减程序以更快地运行，即使您削减了很多只是为了测试它是否可以更快地响应。一个示例可能是使用相同的返回类型但返回一个虚拟表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:07:33.143

不知道为什么这解决了它，但我玩了一段时间 .RDL 之间的绑定，它似乎已经解决了这个问题。在报表生成器中，它看起来完全一样，但根据 SVN，我几乎重写了整个内容。

# sql - NHibernate Linq 中前 5 个元素的总和

> ID：14458050
> 
> 赞同：2
> 
> 时间：2013-01-22T11:59:06.143
> 
> 标签：sql, linq, nhibernate, linq-to-nhibernate

我想接收 linq to NHibernate 查询中前 5 个元素的属性总和。如果我使用下面的代码：

```
Session.Query<Document>().Take(5).Sum(x => x.Value) 
```

我得到“方法不支持”异常。

有任何想法吗？

NHibernate 3.3.1.4000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:03:18.267

你可以使用这个：

```
Session.Query<Document>().Select(x => x.Value).Take(5).Sum(); 
```

NHibernate 只支持`Sum`没有表达式参数的重载。

并且由于未知原因，您必须首先`Select`，而不是`Take`您正确评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:24:49.223

问题是[nhibernate](/questions/tagged/nhibernate "显示标记为“休眠”的问题") [linq](/questions/tagged/linq "显示标记为“linq”的问题")提供程序还没有完全实现。尝试使用`.ToArray()`to memory 实现，然后`.Sum()`使用 linq-to-memory 计算。

例如：

```
Session.Query<Document>().Select(x => x.Value).Take(5).ToArray().Sum() 
```

ps：同样的问题可能会发生`.Skip()`并加入`DefaultIfEmpty()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T15:59:39.233

在`NHibernate.4.0.2.4000`Sum with lambda 中也可以`Session.Query<Document>().Take(5).Sum(x => x.Value)`。

如果有可能不返回任何行并且 Value 不是可空类型，则需要将其转换为可空类型，因为当不存在任何项目时，总和将返回 null：

```
Session.Query<Document>().Take(5).Sum(x => (decimal?)x.Value) ?? 0; 
```

# php - 面向对象的 PHP - __set() 无法访问受保护的属性

> ID：14458051
> 
> 赞同：-3
> 
> 时间：2013-01-22T11:59:09.763
> 
> 标签：php, visibility

> **可能重复：**
> [PHP __get 和 __set 魔术方法](https://stackoverflow.com/questions/4713680/php-get-and-set-magic-methods)

刚刚从 OOP 开始。. 无论如何，不​​确定我是否理解正确，但代码不应该`$attribute`因为函数而改变 的值`__set()`吗？

```
<?php
class aclass
{
    protected $attribute; //edited from public to protected
    public function __get ($name)
    {
        return $this->$name;    
    }
    public function __set ($name, $value)
    {
        if($name == "foo")
        {
            $this->$name = $value;
        }
    }
} 
$a = new aclass();
$a->attribute = "bar";
echo $a->attribute;
?> 
```

* * *

当我运行此错误消息时显示：

“致命错误：无法在第 16 行访问受保护的属性 aclass::$attribute ......” 第 16 行是“echo $a->attribute” - 其他帖子说该属性必须设置为 PROTECTED 但它不起作用。我正在使用 PHP 5.4.3 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:02:00.783

`__set()`只有在尝试访问非公共或未定义的属性时才会调用您的魔术方法，但该`attribute`属性**已**定义且**是**公共的，因此可以直接访问它。

如果您希望该`__set()`方法“拦截”对 的访问`attribute`，则必须使用`protected`或`private`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:03:23.230

`__set()` 当您尝试将值分配给未定义的属性时将被调用。在您的情况下， $attribute 已经用类定义，因此`__set`不会被调用。

# c# - 什么是 Open CV saturate_cast 函数的 Emgu CV 等效项？

> ID：14458054
> 
> 赞同：4
> 
> 时间：2013-01-22T11:59:16.450
> 
> 标签：c#, .net, opencv, emgucv

## 问题

[emgucv中](http://www.emgu.com/)[saturate_cast](http://docs.opencv.org/modules/core/doc/utility_and_system_functions_and_macros.html?highlight=saturate_cast#template%3C...%3E%20_Tp%20saturate_cast%28_Tp2%20v%29)的等价物是什么？

## 背景

我有一个`Image<Bgr, byte>`并且我想对其中的每个像素执行一个简单的计算（顺便说一句：传入和传入的`alpha * val + beta`位置）。为此，我可以这样做：`alpha``beta``C++`

```
cv::Mat new_image = cv::Mat::zeros(image.size(), image.type());
for (int y = 0; y < image.rows; y++)
{ 
    for (int x = 0; x < image.cols; x++)
    { 
        for (int c = 0; c < 3; c++)
        {
            new_image.at<cv::Vec3b>(y,x)[c] = cv::saturate_cast<uchar>(
                alpha * (image.at<cv::Vec3b>(y,x)[c]) + beta);
        }
    }
} 
```

在 Emgu CV 中做同样的事情的一个非常慢的方法是：

```
var newImage = image.CopyBlank();
for (int y = 0; y < image.Rows; y++)
{
    for (int x = 0; x < image.Cols; x++)
    {
        MCvScalar orig = image[y, x].MCvScalar;            
        var v0 = alpha * orig.v0 + beta;
        var v1 = alpha * orig.v1 + beta;
        var v2 = alpha * orig.v2 + beta;
        var v3 = alpha * orig.v3 + beta;
        var newCol = new Bgr();
        newCol.MCvScalar = new MCvScalar(v0, v1, v2, v3);
        newImage[y, x] = newCol;
    }
} 
```

但这只是，正如我所说，非常慢（太慢），所以我[读到](http://www.emgu.com/wiki/index.php/Working_with_Images#The_fast_way)应该使用[Data](http://www.emgu.com/wiki/files/2.4.2/document/html/8eaaf685-939e-9365-2bd9-22ef02c39b20.htm)属性，所以我可以做这样的事情：

```
var data = image.Data;
var newImage = image.CopyBlank();
for (int y = 0; y < image.Rows; y++)
{
    for (int x = 0; x < image.Cols; x++)
    {
        for (int c = 0; c < 3; c++)
        {
            var b = data[y, x, c];
            double ret = alpha * b + beta;      

            // Eek, now I need to saturate_cast...                          
            newImage.Data[y, x, c] = (byte)ret;
        }
    }
} 
```

但这并没有做正确的事情，因为我只是将[双精度](http://msdn.microsoft.com/en-us/library/system.double.aspx)转换为一个[字节](http://msdn.microsoft.com/en-us/library/system.byte.aspx)而不执行`saturate_cast`.

我也可以使用我更喜欢的[Convert](http://www.emgu.com/wiki/index.php/Working_with_Images#Generic_Operation)泛型方法，但问题是一样的 - 我有一个[byte](http://msdn.microsoft.com/en-us/library/system.byte.aspx)，我将我的计算应用到它并有一个[double](http://msdn.microsoft.com/en-us/library/system.double.aspx)但我需要回到一个[byte](http://msdn.microsoft.com/en-us/library/system.byte.aspx)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:15:44.630

我最终编写了自己的方法，因为我认为[emgu cv](http://www.emgu.com)中没有任何预先罐装的东西。

根据[saturate_cast](http://docs.opencv.org/modules/core/doc/utility_and_system_functions_and_macros.html?highlight=saturate_cast#template%3C...%3E%20_Tp%20saturate_cast%28_Tp2%20v%29)的文档，我*认为*（因为它与我尝试过的图像产生相同的结果）相当于[saturate_cast](http://docs.opencv.org/modules/core/doc/utility_and_system_functions_and_macros.html?highlight=saturate_cast#template%3C...%3E%20_Tp%20saturate_cast%28_Tp2%20v%29) in`c#`是：

```
private static byte SaturateCast(double value)
{
    var rounded = Math.Round(value, 0);

    if (rounded < byte.MinValue)
    {
        return byte.MinValue;
    }

    if (rounded > byte.MaxValue)
    {
        return byte.MaxValue;
    }

    return (byte)rounded;
} 
```

所以就我而言，我可以做到这一点，我认为这非常优雅（并且比我原来的方法快得多）：

```
var newImage = image.Convert(b => SaturateCast(alpha * b + beta)); 
```

# javascript - onchange 事件不起作用

> ID：14458056
> 
> 赞同：0
> 
> 时间：2013-01-22T11:59:22.270
> 
> 标签：javascript, asp.net

我将事件 onchange 绑定到我的文本框控件：

```
var tbValue = document.getElementById("tbValue");
    tbValue.onchange = function () {
        var tbSelText = document.getElementById("selectText");
        if (tbValue.value == null) {
            tbSelText.value.replace("sada", "");
        }
        else {
            tbSelText.value.replace("sada", "sada" + tbValue.value + "'");
        }
    } 
```

当我更改 tbValue（这是我的带有 onchange 事件的文本框控件）时，tbSelText 必须同时更改。但事实并非如此。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:22:24.967

通过以下几点进行验证：

*   当上面的 Js 代码被调用时，DOM 必须在它之前准备好，否则 tbValue 将为空。您可以尝试在分配事件之前提醒其值。
*   只有当您更改某些内容并从文本框中跳出（即移除焦点）时，onchange 才会触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:18:42.530

我**猜**您希望**在键入**`onchange`时触发该事件，但这是不会发生的。

 **该`onchange`事件仅在文本框失去焦点（换句话说，它模糊）并且内容已更改时触发。 [有关信息，请参阅此 MSDN](http://msdn.microsoft.com/en-gb/library/ie/ms536912%28v=vs.85%29.aspx) ...

> 此事件在提交内容时触发，而不是在值更改时触发。例如，在文本框上，此事件不会在用户键入时触发，而是在用户通过离开具有焦点的文本框提交更改时触发。

如果您在键入时想要一个事件，您应该查看`onkeydown`、`onkeypress`或`onkeydown`事件之一。**

# ajax - 不返回 IE 错误“Url Too Long”

> ID：14458058
> 
> 赞同：0
> 
> 时间：2013-01-22T11:59:38.630
> 
> 标签：ajax, asp-classic, iis-6

我一直试图找出一个 Ajax 函数的问题，该函数将大量文本发送到 ASP 页面。我认为问题在于，当将大量文本输入表单/输入并通过 Ajax 发送数据时，这会导致“查询字符串”非常大。

服务器返回错误“Url Too Long”。但是，我已经在两台不同的计算机上测试了这个应用程序——都运行 IE8——并且在其中一台上，执行相同的请求根本没有返回任何结果。所以我的问题是，有谁知道如何关闭这个错误/反馈？我猜这不是服务器设置，因为两台计算机都在访问同一个应用程序。我尝试在可疑计算机上关闭“显示友好的 HTTP 错误消息”，但这并没有帮助。

# amazon-s3 - Amazon S3 到 Ec2 数据费用

> ID：14458059
> 
> 赞同：0
> 
> 时间：2013-01-22T11:59:44.190
> 
> 标签：amazon-s3, amazon-ec2

我有亚马逊 Ec2 实例正在运行，还有 S3 订阅。我将数据存储在 S3 并且 EC2 实例托管了一个站点，来自 S3 的内容显示在 HTML 页面上，注册用户可以访问该页面。

[Amazon S3 定价](http://aws.amazon.com/s3/pricing/)显示从 S3 到 Ec2 的数据传输不收取任何费用。那么这适用于我的情况吗？

# android - 如何在谷歌地图上按地址搜索安卓姜饼？

> ID：14458060
> 
> 赞同：0
> 
> 时间：2013-01-22T11:59:47.110
> 
> 标签：android

我有这段代码可以在 google maps for android 上按地址进行功能搜索。我在姜饼模拟器上运行它，它不起作用。但是当我在 Eclair 上尝试它时，它可以工作。我已将最小 SDK 设置为 3，并且项目构建目标为 android google API 级别 9。有人可以告诉我问题出在哪里吗？谢谢。

```
public class ReverseGeocoding extends MapActivity
{

    btnSearch.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v) 
        {

    String addressInput = adress.getText().toString();
            try 
            {
                List<Address> foundAdresses = gc.getFromLocationName(addressInput, 5);

                //fail to find the address
                if (foundAdresses.size() == 0)
                {
                    Dialog locationError = new AlertDialog.Builder(
                            ReverseGeocoding.this).setIcon(0).setTitle(
                            "WARNING").setPositiveButton(R.string.OK, null)
                            .setMessage("no location found").create();
                            locationError.show();
                }
                //if get the address
                else 
                {
                    for (int i = 0; i < foundAdresses.size(); ++i) 
                    {
                        Address x = foundAdresses.get(i);
                        lat = x.getLatitude();
                        lon = x.getLongitude();
                    }                   
                    navigateToLocation((lat * 1E6), (lon * 1E6), lat, lon, myMap);
                }
            }
            catch (Exception e)
            {
            }
        }
    });
}

//marking location
protected void navigateToLocation(double latitude, double longitude, final double lat2, final double lon2, MapView myMap)
{
    GeoPoint p = new GeoPoint((int) latitude, (int) longitude);

    Drawable icon = getResources().getDrawable(R.drawable.marker);
    icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon
            .getIntrinsicHeight());

    MyItemizedOverlay overlay = new MyItemizedOverlay(icon);
    OverlayItem item = new OverlayItem(p, "My Location", null);
    overlay.addItem(item);

    myMap.getOverlays().add(overlay);
    myMap.getController().animateTo(p);
    myMap.postInvalidate(); 

    myMap.displayZoomControls(true);
    myMap.getController().setZoom(15);
    myMap.setBuiltInZoomControls(true);

    MapController mc = myMap.getController();
    mc.animateTo(p);
    int zoomlevel = myMap.getMaxZoomLevel();
    mc.setZoom(zoomlevel - 1);
    myMap.setSatellite(false);  

    });
}

private GeoPoint getPoint(double lat, double lon) 
{
    return(new GeoPoint((int)(lat*1E6),(int)(lon*1E6)));
}   

@Override
protected boolean isRouteDisplayed() 
{
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:03:14.760

```
uses-permission android:name="android.permission.INTERNET"
uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"
uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"
uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"
Declare the permission in manifest first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:27:28.893

当我们声明活动时，在应用程序中声明库。

"<" 使用库 android:name="com.google.android.maps" "/>"

注意从“<>”中删除引号。

# c# - 将 url 设置为指定的字符串值

> ID：14458062
> 
> 赞同：0
> 
> 时间：2013-01-22T11:59:55.127
> 
> 标签：c#, asp.net, visual-studio-2008

是否可以以编程方式指定 Url 值，然后相应地导航到页面？

```
string url = http://localhost:4039/LRVisuals/Default.aspx;
Url.AbsolutePath = url; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:04:12.523

您可以使用[`Response.Redirect`](http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx)或[`Server.Transfer`](http://msdn.microsoft.com/en-us/library/y4k58xk7.aspx)导航到页面。

```
Response.Redirect(url); 
```

[**您会在这里**](https://stackoverflow.com/questions/224569/server-transfer-vs-response-redirect)发现两者之间的差异。With`Server.Transfer` `Page.PreviousPage`不为空，您可以访问它的控件或 ViewState。

# html - 无法使用 Java 将 docx 转换为 html

> ID：14458063
> 
> 赞同：0
> 
> 时间：2013-01-22T11:59:59.523
> 
> 标签：html, apache-poi, document, docx

我需要将 .docx 文件内容转换为 HTML 文本以便在 web ui 中显示。

我使用了**Apache POI**的**XWPFDocument**类，但还没有得到任何结果；**得到空字符串**。我的代码基于[此示例](https://stackoverflow.com/q/9047044/282855)。

这也是我的代码：

```
public JSONObject uploadDocxFile(MultipartFile multipartFile) throws Exception {
        InputStream inputStream = multipartFile.getInputStream();
        XWPFDocument wordDocument = new XWPFDocument(inputStream);

        WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
        org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        DOMSource domSource = new DOMSource(htmlDocument);
        StringWriter stringWriter = new StringWriter();

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer serializer = tf.newTransformer();
        serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
        serializer.setOutputProperty(OutputKeys.INDENT, "yes");
        serializer.setOutputProperty(OutputKeys.METHOD, "html");
        serializer.transform(domSource, new StreamResult(stringWriter));
        out.close();

        String result = new String(out.toByteArray());
        String htmlText = result;

        JSONObject jsonObject = new JSONObject();
        jsonObject.put("content", htmlText);
        jsonObject.put("success", true);
        return jsonObject;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T07:57:22.710

即使为时已晚我认为可以通过这种方式修改以前的代码（它适用于word97文档）

```
 private static void convertWordDoc2HTML(File file)
    throws ParserConfigurationException, TransformerConfigurationException,TransformerException, IOException {       
    //change the type from XWPFDocument to HWPFDocument
    HWPFDocument hwpfDocument = null;
    try {
        FileInputStream fis = new FileInputStream(file);
        POIFSFileSystem fileSystem = new POIFSFileSystem(fis);          
             hwpfDocument = new HWPFDocument(fileSystem);

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    WordToHtmlConverter wordToHtmlConverter = new   WordToHtmlConverter(DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
    org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
    //add processDocument method 
    wordToHtmlConverter.processDocument(hwpfDocument);
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    DOMSource domSource = new DOMSource(htmlDocument);
    StreamResult streamResult = new StreamResult(out);

    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer serializer = tf.newTransformer();
    serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    serializer.setOutputProperty(OutputKeys.INDENT, "yes");
    serializer.setOutputProperty(OutputKeys.METHOD, "html");
    serializer.transform(domSource, streamResult);
    out.close();

    String result = new String(out.toByteArray());

    String htmlText = result;
    System.out.println(htmlText);

    } 
```

我希望它有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T23:12:23.583

我正在使用[docx4j](http://www.docx4java.org/trac/docx4j)来执行此操作，它似乎正在工作。如果您使用的是 Maven，您只需[添加依赖项](http://search.maven.org/#artifactdetails|org.docx4j|docx4j|2.8.1|jar)（但使用版本 3.0.0），然后[使用](https://github.com/plutext/docx4j/tree/master/src/samples/docx4j/org/docx4j/samples)名为`ConvertOutHtml.java`. 只需将文件路径更改`ConvertOutHtml.java`为指向您的文件，就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T11:35:30.997

您的代码正在生成一个空的 html 输出，因为您没有在转换器中处理任何文档。

无论如何，如果它是一个 docx，您应该使用 XHTMLConverter 将其转换为 HTML 而不是 WordToHtmlConverter。看到[这个答案](https://stackoverflow.com/a/24653911/2054610)

# php - 填充数组的值

> ID：14458065
> 
> 赞同：1
> 
> 时间：2013-01-22T12:00:08.040
> 
> 标签：php

我有一个功能

```
public function get_detail($subscriberid)
    {
    $bigArray = array();

    $result = mysql_query("SELECT *  from prospect_requests WHERE subscriber_id = '$subscriberid'");
    //$user_data = mysql_fetch_array($result);
    $no_rows = mysql_num_rows($result);

    while( $row = mysql_fetch_assoc( $result))
    {

$bigArray[] = $row;
    }
     return json_encode($bigArray);

    } 
```

我通过使用我的 html 中的用户类对象调用此函数，它以表单数组的形式返回数据

我想在我的 html 表中填充这些值我是否使用以下方法

```
<table>
 <?php
 $ary = json_decode($user->get_detail($uid));
         echo "<tr>"         
         foreach($ary as $key=>$value) {
              echo "<td>";
              print  $key['$value'];
              echo "</td>";
           }
   echo "</tr>";

  ?> 
```

上面的 foreach 不是为我打印的

但是当我打印时，`print_r($ary);` 我得到了想要的数组数组。

请告诉我为什么值没有填充到表中。

**更新 print_r($ary) 的输出**

```
Array ( [0] => stdClass Object ( [id] => 133 [customer_id] => caason [subscriber_id] => ELECTRO_SUBS_12800 [extension_id] => [vendor_number] => [product_code] => [prospect_email1] => naveen.ggg@bhng.com [prospect_phone1] => +575445 [prospect_email2] => [prospect_phone2] => [prospect_title] => IT Engineer [prospect_company] => gggg [prospect_name] => ggdf [prospect_message] => MESSAGE [create_timestamp] => 2012-12-20 16:28:46 [update_timestamp] => 2012-12-20 16:33:15 [status] => 0 [track_id] => 201660a2-4a66-11e2-abeb-00151771ff65 [initiated_by] => SMS [subscriber_email] => g.dgdg@gfg.com [vendor_email] => ananda.rao@talismanuc.com ) [1] => stdClass Object ( [id] => 134 [customer_id] => caason [subscriber_id] => ELECTRO_SUBS_12800 [extension_id] => [vendor_number] => [product_code] => 12800 [prospect_email1] => gpadaki@sadhanasystems.com [prospect_phone1] => +756767863 [prospect_email2] => [prospect_phone2] => [prospect_title] => TESTING232 [prospect_company] => Sadhana Systems [prospect_name] => 7dfgfg [prospect_message] => MESSAGE [create_timestamp] => 2012-12-22 02:43:51 [update_timestamp] => 2012-12-22 22:42:36 [status] => 0 [track_id] => 380024bc-4b85-11e2-abeb-00151771ff65 [initiated_by] => SMS [subscriber_email] => naveen.fgf@ggf.com [vendor_email] => g.f@talismanuc.com ) [2] => stdClass Object ( [id] => 135 [customer_id] => caason [subscriber_id] => ELECTRO_SUBS_12800 [extension_id] => [vendor_number] => [product_code] => 12800 [prospect_email1] => naveen.vghg@hgh.com [prospect_phone1] => +25454 [prospect_email2] => [prospect_phone2] => [prospect_title] => Sw Engineer [prospect_company] => Talisman [prospect_name] => Naveen [prospect_message] => MESSAGE [create_timestamp] => 2013-01-02 16:32:38 [update_timestamp] => 2013-01-02 16:35:48 [status] => 0 [track_id] => d1da0adc-549d-11e2-abeb-00151771ff65 [initiated_by] => SMS [subscriber_email] => naveen.ggjg@hgjh.com [vendor_email] => gf.fhg@hgh.com ).......)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:01:56.327

尝试这个：

```
json_decode($user->get_detail($uid), true); 
```

参考： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

**当 TRUE 时，返回的对象将被转换为关联数组。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:04:34.663

[json_decode](http://php.net/manual/en/function.json-decode.php) - 采用 JSON 编码的字符串并将其转换为 PHP 变量。

```
mixed json_decode ( string $json [, bool $assoc = false [, int $depth = 512 [, int $options = 0 ]]] ) 
```

assoc - 时`TRUE`，返回的对象将被转换为关联数组。

`json_decode($user->get_detail($uid), TRUE);`

如果您要将值作为数组访问。

# javascript - 如何同时激活按钮个人资料和帖子？

> ID：14458066
> 
> 赞同：0
> 
> 时间：2013-01-22T12:00:11.267
> 
> 标签：javascript, html, css, django

如果我在 127.0.0.1:8000/posts/ 我的按钮是“活动的”，但如果我在 127.0.0.1:8000/profile/ 我的按钮“个人资料”是活动的，但按钮“发布”是不活动的。

如何同时激活按钮个人资料和帖子？

```
<div class="container" />
<div class="navbar" />
<div class="navbar-inner" />
<a class="brand {%if request.get_full_path == '/'%} active{%endif%} " href="/">Start</a>
<ul class="nav">
   <li {%if request.get_full_path == '/post/'%}class="active"{%endif%}><a href="/post/">{% trans "Post" %}</a></li>
</ul>

<ul class="nav" />
<li {% if active == 1 %}class="active"{%endif%}><a href="/profile/">{% trans "Profile" %}</a>
</li>
<li {% if active == 2 %}class="active"{%endif%}><a href="/posts/">{% trans "Post" %}</a></li>
.... 
```

如果这是活动的：

`<li {% if active == 1 %}class="active"{%endif%}><a href="/profile/">{% trans "Profile" %}</a>`

这个：

`<li {%if request.get_full_path == '/post/'%}class="active"{%endif%}><a href="/post/">{% trans "Post" %}</a></li>`

也必须是活跃的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:06:49.290

有一个 if 语句，它为列表项之一提供了一个活动的 css 类。if 语句不会使两个按钮都处于活动状态，因为“活动”不能同时具有 2 个不同的值。如果由于某种原因两者都需要处于活动状态，则可以删除 if 语句并将 css 类活动应用于两者。

# jquery - AJAX 表单提交两次

> ID：14458068
> 
> 赞同：1
> 
> 时间：2013-01-22T12:00:12.097
> 
> 标签：jquery, ajax, submit, double-submit-problem

嗨，我有以下 Js 代码。

问题是表单被提交了两次，但是，只有一个被提交的实例出现在显示请求的 safari 检查器上......

而且这绝对不是服务器端请求的问题，因为我已经对其进行了测试。所以这绝对是客户端的东西。

```
$('#replyForm').submit(function(e){

    e.preventDefault();

    var userID = $('#replyForm #userID').val();
    var content = $('#replyForm #content').val();

    if(content != '')
    {

        var ajaxURL = BASE_URL + 'ajax/sendMessage/';

        $.ajax({
            type: 'POST',
            url: ajaxURL,
            dataType: 'json',
            data: { 
                userID: userID,
                content: content
            },
            success: function(){

                updateConversation();

            }
        });

        $('#replyForm #content').val('');

    }
    else
    {

        alert('Cannot send an empty message');

    }

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:28:08.093

好的 从各个角度做了很多测试后，我发现这是服务器端代码在做这个！不运行请求。

我使用 curl 来形成对 API 的请求。我运行 curl_exec 两次，一次检查成功，然后再次获得调用结果。

这就是导致重复的原因。

希望这可以帮助一些遇到类似问题的人。

# mysql - Mysql 多重连接语法错误

> ID：14458070
> 
> 赞同：1
> 
> 时间：2013-01-22T12:00:13.940
> 
> 标签：mysql, sql

我是 mysql 新手，我一直遇到这个查询的问题。

考虑这个查询：

```
SELECT a.group_message_id, a.scheduled_date, b.message, c.phone_number, d.group_name
    FROM schedule AS a
    JOIN group_message AS b ON a.group_message_id = b.id,
    JOIN phonenumber AS c ON c.id = a.phonenumber_id,
    JOIN group_table AS d ON d.group_id = a.group_id
    WHERE a.status = 'unsent' 
```

而这个错误信息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“JOIN phonenumber AS c ON c.id = a.phonenumber_id, JOIN group_table AS d”附近使用正确的语法

我需要有关该声明实际错误的帮助。另外，如果您能向我展示其他“正确”的做法，我将不胜感激。

最后，如果没有足够的时间，是否有一个有效的资源可以让我至少从 mysql 的基础知识中学习。请分享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:00:45.763

删除连接语句上的逗号，

```
JOIN group_message AS b ON a.group_message_id = b.id, -- <<== HERE
JOIN phonenumber AS c ON c.id = a.phonenumber_id,     -- <<== HERE
JOIN group_table AS d ON d.group_id = a.group_id 
```

最终查询，

```
SELECT  a.group_message_id, 
        a.scheduled_date, 
        b.message, 
        c.phone_number, 
        d.group_name
FROM    schedule AS a
        JOIN group_message AS b 
            ON a.group_message_id = b.id
        JOIN phonenumber AS c 
            ON c.id = a.phonenumber_id
        JOIN group_table AS d 
            ON d.group_id = a.group_id
WHERE   a.status = 'unsent' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:11:33.443

你不应该把逗号

[只需检查这里](http://dev.mysql.com/doc/refman/5.0/en/join.html)的语法

**示例语法**

```
SELECT  column_list FROM  table1 JOIN table2 ON condition JOIN table3 ON condition WHERE condition 
```

# perl - 如何将复杂的 Perl 对象存储到 Memcached 中？

> ID：14458071
> 
> 赞同：2
> 
> 时间：2013-01-22T12:00:14.833
> 
> 标签：perl, memcached

我无法将 Perl 对象存储到 Memcached 中。我尝试使用`Cache::Memcached`. Memcached 在默认情况下运行，所以我认为保留了 64 MB。无论如何都不应该达到这个限制。

如何将复杂的 Perl 对象存储到 Memcached 中？

以下代码无法将对象存储在 Memcached 服务器中。例如，如果您将迭代次数从`23_171`更改为`4`，则没有问题。

```
#!/usr/bin/perl
############################################################################
# Script
use strict;
use warnings FATAL => 'all';
use Cache::Memcached;
my $memd = Cache::Memcached->new( servers => ['127.0.0.1:11211'] );
my $obj  = MyModule->new;
$obj->add( MySubModule->new($_) ) for ( 1 .. 23_171 );
$memd->set( 'obj', $obj ) or die "failed";
$memd->disconnect_all;
############################################################################
# Collector-Module
package MyModule;
sub new { bless { jar => [] }, $_[0]; }
sub add { push @{ $_[0]->{jar} }, $_[1]; }
############################################################################
# Entry-Module
package MySubModule;
sub new { bless { id => $_[1], rnd => rand( $_[1] ) }, $_[0]; }
sub id { $_[0]->{id} = $_[0]->{id} // $_[1]; }
sub rnd { $_[0]->{rnd}; } 
```

无论使用哪个序列化程序或任何序列化程序，这个对象都不应该超过 10 MB，对吧？

**编辑**：我刚刚发现`20_000`迭代会导致 aprox。Memcached 中假定内存为 15 MB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:13:18.543

您可以存储在 memcached 中的值的最大大小通常为 1 兆字节。您的序列化对象是否超过该大小？

[1.4.2 版](http://code.google.com/p/memcached/wiki/ReleaseNotes142)的 memcached 使这个可配置：

```
memcached -I 128k # Refuse items larger than 128k.
memcached -I 10m  # Allow objects up to 10MB 
```

# java - 使用 Math.pow() 函数的问题

> ID：14458074
> 
> 赞同：-4
> 
> 时间：2013-01-22T12:00:24.797
> 
> 标签：java, android, math

```
 String loanamount = edtamount.getText().toString();
            double doubleloanamount = Double.parseDouble(loanamount);
            String strloanamount = Double.toString(doubleloanamount);

            Log.v("doubleloanamout", strloanamount);

            String years = edtyears.getText().toString();

            double doubleyears = Double.parseDouble(years) * 12;

            String strpaymentdoubleyears =   Double.toString(doubleyears);
            Log.v("doubleyears", strpaymentdoubleyears);

            double inrate = doubleloanamount * 11 / 100;
            double monthlyrate = inrate / 12;
            double roundmonthlyrate = Math.round(monthlyrate);
            String inratefordemo = Double.toString(roundmonthlyrate);

            double Payment = (doubleloanamount
                    * Math.pow(( roundmonthlyrate) + 1, (doubleyears)) *  roundmonthlyrate)
                    / (Math.pow( roundmonthlyrate + 1, (doubleyears)) - 1);

            double roundpayment = Math.round(Payment);
            String strpayment = Double.toString(roundpayment);
            Log.v("payment", strpayment);
            edtemimonth.setText(strpayment); 
```

我使用上面的代码来计算 EMI，但它显示 0 value.hay 我同时使用了 int 和 double 仍然它给我 0 for int 0.0 for double

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:04:31.230

因为您将类型转换结果转换为整数，可能它有一个像 0.55 这样的小数部分，并且由于类型转换它已经删除了小数部分并且只给出了 0。尝试将 Payment 变量更改为 double，同时确保`doubleloanamount`不等于 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:08:47.280

使 intRate 浮动 .... 如果 intRate 本身为 0 ，则计算付款 intRate * X 将给出 0 。您已经编写了 intRate = x * 11/100，如果小于 1，则为 0。

也使 mnthRate 浮动

# vba - 用户窗体调整大小代码不太工作

> ID：14458078
> 
> 赞同：3
> 
> 时间：2013-01-22T12:00:36.637
> 
> 标签：vba, excel

我一直在尝试编写一些代码来在调整表单大小时处理调整大小和移动控件。

我的方法是为每个需要锚定的控件维度（即顶部/左侧/宽度/高度）创建一个字典对象，键是控件名称和锚维度（例如 lstAccounts_Height），并将这些添加到表单级别收藏。在表单`Resize`事件中，集合被迭代，每个控件都根据需要进行调整。

添加控件的例程：

```
Private Sub AddFormResizeControl(ControlName As String, _
                                 Dimension As String)

Dim strKey                      As String
Dim sngValue                    As Single
Dim dictCtrl                    As Dictionary

    strKey = ControlName & "_" & Dimension

    Select Case Dimension
        Case "Left": sngValue = Controls(ControlName).Left
        Case "Top": sngValue = Controls(ControlName).Top
        Case "Width": sngValue = Controls(ControlName).Width
        Case "Height": sngValue = Controls(ControlName).Height
    End Select

    Set dictCtrl = New Dictionary
    dictCtrl.Add strKey, sngValue

    If colResizeControls Is Nothing Then _
        Set colResizeControls = New Collection
    colResizeControls.Add dictCtrl, strKey

End Sub 
```

并在`Initialize`事件中添加控件：

```
AddFormResizeControl "lst_AccountSelection", "Width"
AddFormResizeControl "lst_AccountSelection", "Height"
AddFormResizeControl "cmd_Cancel", "Left"
AddFormResizeControl "cmd_Cancel", "Top"
AddFormResizeControl "cmd_Confirm", "Left"
AddFormResizeControl "cmd_Confirm", "Top" 
```

和`Resize`事件：

```
Private Sub UserForm_Resize()

Dim sngHeightAdjust             As Single
Dim sngWidthAdjust              As Single

Dim dict                        As Dictionary
Dim strCtrl                     As String

Dim ctrl                        As Control
Dim strDimension                As String

    If Me.Width < sngFormMinimumWidth Then Me.Width = sngFormMinimumWidth
    If Me.Height < sngFormMinimumHeight Then Me.Height = sngFormMinimumHeight

    sngHeightAdjust = (Me.Height - 4.5) - sngFormMinimumHeight
    sngWidthAdjust = (Me.Width - 4.5) - sngFormMinimumWidth

    If Not colResizeControls Is Nothing Then
        For Each dict In colResizeControls
            strCtrl = dict.Keys(0)
            Set ctrl = Controls(Left(strCtrl, InStrRev(strCtrl, "_") - 1))
            If Right(strCtrl, 5) = "_Left" Then
                ctrl.Left = dict.Item(strCtrl) + sngWidthAdjust
            ElseIf Right(strCtrl, 4) = "_Top" Then
                ctrl.Top = dict.Item(strCtrl) + sngHeightAdjust
            ElseIf Right(strCtrl, 6) = "_Width" Then
                ctrl.Width = dict.Item(strCtrl) + sngWidthAdjust
            ElseIf Right(strCtrl, 7) = "_Height" Then
                ctrl.Height = dict.Item(strCtrl) + sngHeightAdjust
            End If
        Next dict
    End If

End Sub 
```

我面临的问题是在第一次移动事件中有一个小的“跳跃”，因此运行时控件与设计时的控件并不完全一致。我试图通过将表单的返回高度和宽度更改 4.5 来抵消这种影响，这确实有帮助。

`sngFormMinimumHeight`and`sngFormMinimumWidth`设置为事件中的起始宽度/高度或表单，`Initialize`我正在使用[Chip Pearson 的代码](http://www.cpearson.com/Excel/formcontrol.aspx)使表单可调整大小。

我猜表格上有某种边界需要调整（因此 4.5s 有助于解决问题） - 谁能解释我需要调整哪些值？

**解决方案**感谢 BonCodigo 提供的链接，问题现已解决 - 我指的是`Me.Height`以及`Me.Width`何时应该指的是`Me.InsideHeight`and `Me.InsideWidth`。我现在不需要4.5的调整，“跳跃”现在没有了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:21:40.273

您可以尝试同时更改`Anchor`和`Dock`的属性，`controls`它们应该会自动调整其大小`parent containers`（可能是面板）。

*   以下参考在 MS Access 中，您可以调整它：[http ://www.fmsinc.com/MicrosoftAccess/controls/components/form-resizer/index.html](http://www.fmsinc.com/MicrosoftAccess/controls/components/form-resizer/index.html)

*   [来自 AndyPope 的 Resizer 类和应用程序](http://www.andypope.info/vba/resizeform.htm)。

# javascript - 页面加载后对内容进行排序

> ID：14458087
> 
> 赞同：2
> 
> 时间：2013-01-22T12:00:55.780
> 
> 标签：javascript, html, sorting

我有这个页面：

```
<div class="products">
    <div id="product-1" class="product">
        <a href="#" title="View this" class="product-a">
            <img class="product-img" src="/product.png" alt="Image of this product" /><span class="stilt"></span>
            <div class="product-info">
               <h3 class="product-title"><span>This Product</span></h3>
               <p class="product-price"><span>Product price</span></p>
            </div>
        </a>
    </div>

    <div id="product-2" class="product">
        <a href="#" title="View this" class="product-a">
            <img class="product-img" src="/product.png" alt="Image of this product" /><span class="stilt"></span>
            <div class="product-info">
               <h3 class="product-title"><span>This Product</span></h3>
               <p class="product-price"><span>Product price</span></p>
            </div>
        </a>
    </div>
    ...
</div> 
```

我想知道是否有办法通过 .product-info.product-title 使用 javascript 升序或降序对 product-# div 进行排序，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T05:56:54.843

Id 使用 jQuery 捕获所有产品元素并下划线 javascript 进行排序。

```
Products:
<div class="products">
    <div class="product">
        <div class="name">B name</div>
    </div>
    <div class="product">
        <div class="name">C name</div>
    </div>
    <div class="product">
        <div class="name">A name</div>
    </div>
</div>

<br/>

Sort Products:
    <button id="asc">Ascending</button>
    <button id="desc">Descending</button>

<script type="text/javascript">
    function sortList(dir) {
        var $products = $('.products .product');
        var sorted = _.sortBy($products, function(product){
            return $(product).find('.name').html();
        });
        if (dir == "desc") {
            sorted.reverse();
        }
        $('.products').append($(sorted));
    }

    $('#asc').click(function() {
        sortList('asc');
    });

    $('#desc').click(function() {
        sortList('desc');
    });
</script> 
```

[http://jsfiddle.net/jL4dX/3/](http://jsfiddle.net/jL4dX/3/)

尽管 jQuery 和 underscore 结合在一起，但如果您只需要为这种排序加载这两个库而不需要其他任何东西，那么将加载几个 kb-s 的多余代码。

# excel - JasperReports：取消合并新 Excel 工作表中的列

> ID：14458091
> 
> 赞同：3
> 
> 时间：2013-01-22T12:01:16.170
> 
> 标签：excel, jasper-reports

我在 Jasper Reports 中遇到了 excel 导出问题。我的报告的输出 excel 文件包含不需要的合并单元格，具体取决于我用于每个报告的报告模板。我在第一个 excel 表中显示报告模板，在第二个 excel 表中显示“列标题”和“数据”。我想要做的是忽略第二张表中的合并单元格。我用

```
<property name="net.sf.jasperreports.export.xls.break.before.row" value="true"/> 
```

属性来创建第二张工作表。

我不允许更改模板，所以我应该找到一种方法来忽略第二张表中的合并单元格，这是我的 excel 文件的屏幕截图

![在此处输入图像描述](../Images/2d5dd1d0d86ec6fb896086a4190e8d57.png)

如您所见，在第二列中有四个合并的单元格。有什么想法可以忽略那些不需要的合并单元格吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:19:07.297

**我找不到解决问题的方法**

我已经说服我们的客户不要使用或修改第一个 Excel 工作表中的模板。修改模板后，现在一切看起来都很好：

![在此处输入图像描述](../Images/8083a66000b8a672ac6be79365606f3c.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-11T21:04:14.750

我发现扩大整个报告的宽度并将单元格移动到发生合并的区域的右侧为我清理了它。当我再次运行报告时，发生合并的列的宽度减少到 0 并且为空。如果您不介意额外的列在那里，因为它们几乎不可见，那么此解决方案被确认有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-06T10:48:54.203

对于那个问题，我有确切的答案是删除页面的边界..然后你会成功

# android - 操作栏上方的图像视图

> ID：14458099
> 
> 赞同：0
> 
> 时间：2013-01-22T12:01:45.207
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个要显示在操作栏上方的图像视图。

我已经能够自定义使用 actionbar sherlock 的 actionbar 视图，但我无法在 Actionbar 视图上方添加任何视图。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:11:33.950

使用相对布局根据需要设置操作栏的背景....在相对布局的主体中添加其他按钮/视图

相对布局高度宽度背景

//视图的主体

近亲布局

# objective-c - 从服务器端在可可中自动生成邮件

> ID：14458101
> 
> 赞同：0
> 
> 时间：2013-01-22T12:01:47.110
> 
> 标签：objective-c, web-services, cocoa

我不知道从服务器端使用可可生成自动电子邮件。在每个链接中，他们仅使用 applescript 给出。谁能建议我一些从服务器端生成邮件的想法？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:06:00.290

[以下](http://developer.apple.com/mac/library/samplecode/SBSendEmail/)是使用 Mail.app 发送电子邮件的示例。如果这也是你需要做的，很确定你可以在没有 gui 的情况下发送它。

你问的很模糊，但我认为这就是你要找的。至于在 PHP 中可用的 set mail() 脚本，我不知道。

# java - Struts 1.2 intRange 验证失败

> ID：14458103
> 
> 赞同：1
> 
> 时间：2013-01-22T12:01:53.063
> 
> 标签：java, validation, struts, struts-1, struts-validation

intRange 的密码验证失败。验证是使用 Validator 框架完成的。所需的密码验证工作正常并正确显示消息。但是 intRange 验证失败了。即使密码范围在 4 到 8 之间，也会显示验证消息。

下面是代码：

```
<field property="password" depends="required,intRange">

            <arg0 key="error.password.required" />
            <arg1 key="${var:min}" resource="false"/>
            <arg2 key="${var:max}" resource="false"/>
            <var>
                <var-name>min</var-name>
                <var-value>4</var-value>
            </var>
            <var>
                <var-name>max</var-name>
                <var-value>8</var-value>
            </var>

        </field> 
```

此条目存在于资源属性文件中：

`errors.range={0} is not in the range {1} through {2}.`

无论密码输入的大小如何，都会显示该消息。

我可能遗漏了一些东西，但不幸的是无法弄清楚:(

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:17:07.853

首先，`intRange`用于验证... `int`s。在一个范围内。

其次，您应该在其`argn`元素中命名验证器。

如果要验证长度，请使用`minLength`和`maxLength`验证器：

```
<field property="name" depends="required,minlength,maxlength">
    <arg0 key="error.password.required" />
    <arg1 name="minlength" key="${var:minlength}" resource="false"/>
    <arg2 name="maxlength" key="${var:minlength}" resource="false"/>
    <var><var-name>minlength</var-name><var-value>4</var-value></var>
    <var><var-name>maxlength</var-name><var-value>8</var-value></var>
</field> 
```

如果您也有任何特定的字符要求，您也可以使用`mask`, 更好。

# java - 如何在“实现”的类上使用“java2wsdl”？

> ID：14458106
> 
> 赞同：0
> 
> 时间：2013-01-22T12:01:57.053
> 
> 标签：java, java2wsdl

我正在使用`java2wsd`. 我的课是

`public class REWS {...}`.

我只是`implements HttpSessionListener`这样添加：

`public class REWS implements HttpSessionListener {...}`

我开始收到`NoClassDefFoundError`错误`HttpSessionListener`。

我可以构建 REWS 类，但是一旦我想生成存根，`java2wsdl`我就会得到`NoClassDefFoundError`.

我如何`java2wsdl`告诉`HttpSessionListener`取自`/Tomcat/lib/servlet-api.jar`？我如何包含`servlet-api.jar`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:19:18.953

这确实是一个糟糕的设计。

首先，让我们回顾一下**接口**的用途。接口在您的类中建立了强大的设计契约，比将继承的方法声明为“普通的旧方式”更强大。WSDL 也定义了接口，即使`java2wsdl`适用于类。

您使用接口是因为它们是框架方法的参数，允许您为它们提供您自己的合约实现。使用 WSDL，情况略有不同。WSDL 是**合同**并且是自供电的。除了显式导入的 XSD 模式之外，您不需要 WSDL 中的任何其他内容。

那么：为什么要实施`HttpSessionListener`？如文档所述，当会话更改时，框架会激活正确注册的会话侦听器。这是您的可公开访问的 Web 服务的设计合同的一部分吗？绝对**不是**！！

通过实现，您隐式地向公共导出了两个供内部使用的方法，因此您正在尝试（但永远不会成功）向处理会话更改的公共服务声明两个附加方法。这不仅是错误的，而且是不可能的，因为`HttpSessionEvent`根本无法导出到 XSD！

### 提案

不要在您的 WS 类上实现此接口。使用您的自定义实现作为类成员，并让它根据您的 Web 服务的功能与您的 WS 类交互。我不是 Tomcat 方面的专家，但 Web 服务不使用会话和 cookie，所以我怀疑您是否会在 Web 服务中处理会话。

# android - Android 应用程序随机崩溃

> ID：14458108
> 
> 赞同：0
> 
> 时间：2013-01-22T12:02:03.693
> 
> 标签：android, crash

我有一个奇怪的问题，我的应用程序有时会崩溃。这是随机的。当我在模拟器上检查它时，我没有遇到应用程序崩溃。我的应用程序不使用互联网，没有硬件访问权限。但是当它在手机上时，它会随机崩溃。可能是什么原因？是否有任何线索或暗示揭示了这一点？对不起; 我没有更多关于这方面的信息。

请注意，当我使用它时它不会崩溃。大多数时候我注意到这个问题发生在手机处于偶像状态或使用其他应用程序时。移动任务管理器显示应用程序使用了大约 30 MB 的内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-12T07:11:54.497

通常，应用程序崩溃的原因如下： 1\. 如果没有正确处理或捕获异常。2.内存管理问题。3\. 互联网连接中的带宽波动问题。

从你的问题来看，第二点似乎更相关。30MB 的设备 RAM 有点太多了。

如果您在 LogCat 中提供崩溃的详细信息会更有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:08:16.607

首先，检查你的手机内存是否可以自由扩展其文件，如果没有，它可能会导致崩溃。

# javascript - 当我的javascript打开窗口关闭时如何捕获事件

> ID：14458113
> 
> 赞同：1
> 
> 时间：2013-01-22T12:02:16.460
> 
> 标签：javascript, events, cross-browser, window

情况是这样的。使用 JavaScript，我打开一个窗口，在我的域上显示一个显示加载指示器的 URL。

大约一秒钟后，窗口的 URL 更改为 PayPal 窗口（其他域）。我希望能够在用户关闭贝宝窗口时捕获事件，这样我就可以将用户重定向到正确的页面，说明支付失败。

我遇到了`window.onbeforeunload`，但是当 url 更改为 PayPal 时会触发那个，但在那之后关闭窗口时不会触发。我该如何克服这个问题？

所以，这似乎不起作用，我在这里找不到任何其他答案：

```
 ppwin = window.open('paypal/loading.php', 'paypal_popup', 'width=900,height=500');
    ppwin.onbeforeunload = function(){
        //triggered when URL changes
        if (ppwin.closed) // false because window is still open.
            // Order failed
    } 
```

*即使我接受了答案，我仍然不满意。它有效，但仅此而已。如果有人提供更好的答案，我会更高兴！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:11:46.953

我遇到了同样的问题，最后我所做的是让父窗口定期**检查弹出窗口是否关闭**。任何替代解决方案都让我发疯。

代码可能是这样的：

```
// Create popup window
var popup = window.open('http://www.google.com');

// Set interval to check if it has been closed
var windowCheckInterval = setInterval(function() { windowCheck(); }, 300);

// Check function
function windowCheck() {
    if (!popup || popup.closed) {
        clearInterval(windowCheckInterval);

        // Do something
    }
} 
```

尽管这是一个非常粗鲁的解决方案，但用户体验非常好，编程非常简单。

当进程以不同的方式完成时（不仅仅是在窗口关闭时），您必须记住清除间隔，它是有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:48:49.723

请参阅[在 JavaScript 中捕获弹出窗口的关闭事件](https://stackoverflow.com/questions/9388380/capture-the-close-event-of-popup-window-in-javascript)

只要弹出窗口 url 与父级在同一个域中，您就可以捕获它。否则尝试“你能做的最好的事情就是在你的域中打开一个文档，然后在 iframe 中加载远程 URL，或者通过服务器脚本读取它并从那里呈现它。”

# objective-c - 将 Unicode 转换为字符串 Objective-C

> ID：14458115
> 
> 赞同：1
> 
> 时间：2013-01-22T12:02:22.393
> 
> 标签：objective-c, unicode

> **可能重复：**
> [将 Unicode 字符转换为 NSString](https://stackoverflow.com/questions/12090585/convert-unicode-character-to-nsstring)

从网站解析数据后，结果是一个包含 Unicode 的对象，我想将其转换为 NSString（Unicode 主要包含希伯来字符）。

这是日志中的一些（一小部分）Unicode：

"\U05f3\U009e\U05f3\U00a2\U05f3\U2022"

我怎样才能转换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:22:52.413

您需要将其转换为数据，然后再转换为字符串。

```
char *yourObject=...;
NSData *unicodeData=[NSData dataWithBytes:yourObject
                                     length:strlen(yourObject)];
NSString *string = [[NSString alloc] initWithData:unicodeData           
                                         encoding:NSUTF8StringEncoding]; 
```

# iphone - SUP 2.1.3 中的 submitPending 操作问题

> ID：14458120
> 
> 赞同：0
> 
> 时间：2013-01-22T12:02:55.327
> 
> 标签：iphone, ios, ipad, sybase, sup

嗨社区专家，我正在通过参考 sybase 2.1.3 文档开发一个 iOS 应用程序。在后台，我使用基于 SUP 对象 API 的本机应用程序连接 iOS 设备以连接到 SUP，而 SUP 连接到 SAP 后端。MBO 是由 SAP 功能模块构建的。在 sybase 无线工作区中，我创建了带有操作的 MBO，操作类型为“OTHER”，指定的数据源为 SAP。选择输入/输出参数并生成iOS的代码操作流程是这样的

```
 // Instantiate header and operation
   ITEM_BAPI_CREATEOperation* createOp = [[ITEM_BAPI_CREATEOperation alloc] init];
      createOp.itemNo  = @"001";

   ITEM_BAPI_HEADEROperation* header = [[ITEM_BAPI_HEADEROperation alloc] init];
      header.itemQTY = [NSNumber numberWithInt:1];

    ITEM_AddComponent * operation = [[[ITEM_AddComponent alloc]init]autorelease];
    [operation addComponentsWithMethod:createOp withHeader:header];
    [operation save];
    [operation submitPending]; 
```

在执行上述操作时，它给了我错误，因为 itemQty 是 NaN（不是数字），尽管我正在将一个数字值分配给 header.itemQTY 变量，并且程序执行流程因崩溃而停止 [SUPAbstractEnityRBS submitPending]。相同的操作在 android 端正常工作，在 iOS 端出错。请给我宝贵的建议。

如果有人能建议我可能出了什么问题以及如何解决这些问题，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:54:21.847

首先检查您的服务器日志，那里应该有关于您的问题的非常有价值的信息。此类问题通常来自 mbo 定义和 eis 模型之间的不匹配。

# ruby - gem 中的框架集成测试：如何为 gem rails 集成设置 rspec 控制器测试

> ID：14458122
> 
> 赞同：2
> 
> 时间：2013-01-22T12:02:57.787
> 
> 标签：ruby, ruby-on-rails-3, rspec, gem, rspec-rails

这个问题不是关于如何在 Rails 应用程序中测试控制器。

开发一个 gem 我想测试我的 gem 是否集成在 rails 控制器中。所以在 gem 根目录中运行 rspec 是在 rails 环境之外的。

现在我该如何编写一个控制器测试，它可以使用 rspec 控制器示例组助手，比如`get`or `post`？

特别是如果我`:type => :controller`在示例组上设置元标记，rspec 如何设置 rails 环境以及如何连接到该环境以设置路由等。

我宁愿不必设置一个大部分为空的整个 Rails 应用程序骨架。但我什至找不到有关如何做到这一点的信息。测试集成到 Rails 应用程序或多个框架的 gem 的最佳实践是什么。

这些来源最接近我所追求的： [在 Rails 环境之外测试（使用 RSpec）控制器，](https://stackoverflow.com/questions/2577372/test-with-rspec-a-controller-outside-of-a-rails-environment) 但这是针对测试单元的。 [http://railsware.com/blog/2012/01/07/testing-gem-integration-with-multiple-ruby-frameworks/](http://railsware.com/blog/2012/01/07/testing-gem-integration-with-multiple-ruby-frameworks/) 但这是针对直接挂在rails应用程序类中的水豚。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:14:48.170

下面是一个来自 gem 的 Rails 控制器集成测试的一个很好的最小示例。 `my_gem`. 假设您位于具有简单 rspec 设置的 gem 根目录中（例如使用`rspec --init`）。然后`spec/rails_controller_integration_spec.rb`会是这个样子。

`rspec/rails`是否有必要的要求，[其中包括`rspec/rails/example`](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/example.rb)基于元标记设置示例组类型。元标记`:type => :controller`驱动包含适当的组模块`RSpec::Rails::ControllerExampleGroup`，它为您提供[rails 控制器规范的](https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/controller-specs)[所有好东西以及`ActionController::TestCase``get/post`](http://api.rubyonrails.org/classes/ActionController/TestCase.html)like 的[所有](http://api.rubyonrails.org/classes/ActionController/TestCase.html)好东西。

希望这可以帮助。

我仍然不明白 Rails 环境是如何分配的。特别是如果我想设置两个应用程序`TestTailsApp1`和`TestTailsApp2`. 有什么建议吗？

```
require 'spec_helper'
require 'my_gem'

require 'rails'
require 'action_controller/railtie' # allows ActionController::Base
# crucial part here:
require 'rspec/rails'
# note that require 'rspec-rails' does not work

module TestRailsApp
  class Application < Rails::Application
    # app config here
    # config.secret_token = '572c86f5ede338bd8aba8dae0fd3a326aabababc98d1e6ce34b9f5'
    # routes.draw do
    #   resources :models
    # end
  end

  class ApplicationController < ActionController::Base
    # setup
  end

end

describe 'My gem' do

  context "in a Rails controller", :type => :controller do

    controller(TestRailsApp::ApplicationController) do
      extend(RSpec::Rails::ControllerExampleGroup::BypassRescue)
      # example-specific setup for anonymous controller
      # https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/anonymous-controller
      def index
      end
    end

    before(:each) do
      # request needs to be setup to avoid path setting error
      @request = ActionController::TestRequest.new
    end

    describe "#index" do
      it "works" do
        get :index
        response.body.should == 'index content'
      end
    end
  end

end 
```

# android - 来自 Android 的 WCF 宁静调用

> ID：14458125
> 
> 赞同：0
> 
> 时间：2013-01-22T12:03:04.007
> 
> 标签：android, wcf

我有一个从 Android 客户端使用的宁静 WCF。当我从android调用服务时，我不明白这里的问题，我得到'请求错误（400）'。这是服务代码

```
<system.serviceModel>
<services>
  <service name="JooyaSilver.MyCOMWebServices.MyCOMServices" behaviorConfiguration="MyServiceBehavior">
    <endpoint address=""
              binding="webHttpBinding"
              contract="JooyaSilver.MyCOMWebServices.IMyCOMServices"
              behaviorConfiguration="httpBehavior"></endpoint>
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="httpBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="MyServiceBehavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" />
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>

[ServiceContract()]
public interface IMyCOMServices
{
    [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "TestConnection",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    string TestConnection();

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "SubmitTrackPoint",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    int SubmitTrackPoint(ServiceData sdata);        

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "GetMyTasks",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    ServiceData GetMyTasks(ServiceData sdata);        

}   
[DataContract()]
public class ServiceData
{
    [DataMember] public string SData;
    [DataMember] public bool IsActionSucceed;       
} 
```

这是安卓代码

```
public static HttpPost getHttpPost(String serviceUril, String methodName) {

    String uri = uriBaseAddress + serviceUril + "/" + methodName;
    HttpPost request = new HttpPost(uri);
    request.setHeader("Accept", "application/json");
    request.setHeader("Content-type", "application/json");
    return request;
}

public static StringEntity getStringEntity(String message) throws UnsupportedEncodingException {
    StringEntity msg = new StringEntity(message);
    msg.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    msg.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    return msg;
}

public static JSONStringer getCompleteJsonStringer(String sendingData) {
    JSONStringer requestMsg = null;
    try {
        requestMsg = new JSONStringer().object().key("sdata").object()
                .key("SData").value(sendingData)
                .key("IsActionSucceed").value(true)
                .endObject()
                .endObject();
        Logger.d(requestMsg.toString());
    } catch (JSONException e) {
        Logger.e(e.getMessage());
    }
    return requestMsg;
}
HttpPost request = ServicesHelper.getHttpPost(GeneralServices_URI, "SubmitTrackPoint");
HttpClient httpClient = new DefaultHttpClient();

StringBuilder sb = new StringBuilder();
// some code here for data
JSONStringer requestMsg = ServicesHelper.getCompleteJsonStringer(sb.toString());
StringEntity msg2 = ServicesHelper.getStringEntity(requestMsg.toString());
request.setEntity(msg2);
HttpResponse response = httpClient.execute(request);
int scr = response.getStatusLine().getStatusCode(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:36:26.687

我已经解决了这个问题，在启用服务跟踪后，我发现我的服务的记录器在它的静态构造函数中抛出了一个错误。解决问题后一切正常

# javascript - 使用 target="_blank" 提交的表单在 ajax 请求后打开一个弹出窗口，而不是新选项卡

> ID：14458128
> 
> 赞同：9
> 
> 时间：2013-01-22T12:03:11.107
> 
> 标签：javascript, ajax, html, web

我需要一些帮助...

任何人都知道如何解决这个问题？： http: [//jsfiddle.net/Q3BfC/5/](http://jsfiddle.net/Q3BfC/5/)

当我默认提交带有 target="_blank" 的表单时，会打开一个新选项卡。但是如果在 ajax 请求之后尝试这样做，表单会打开一个弹出窗口。

```
(function($) {
    jQuery(document).ready(function() {

        var launch = function(p_url) {
            var form = $('<form />').hide();
            form.attr({'action': p_url, 'target': '_blank'});
            form.appendTo(document.body);
            form.submit();
            form.remove();
            delete form;
        };

        $('#normal').on('click', function() {
            launch('http://www.google.com');
        });

        $('#ajax').on('click', function() {
            $.ajax({
                type: 'POST',
                url: '#',
                traditional: true,
                success: function() {
                    launch('http://www.google.com');
                }
            });
        });

    });
})(jQuery); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:43:32.103

它不是试图将其作为弹出窗口打开，但它被弹出窗口阻止程序阻止，因为`target:_blank`只有当它是用户输入的直接结果时才允许在新选项卡中打开某些内容，例如单击或 keydown。

当您尝试在 setTimeout 中打开它时，您将得到相同的结果：

```
setTimeout(function() {launch('http://www.google.com')}, 10); 
```

# ajax - drupal 7 对 ajax 抖动和进度条进行样式设置

> ID：14458130
> 
> 赞同：2
> 
> 时间：2013-01-22T12:03:14.393
> 
> 标签：ajax, drupal, drupal-7, drupal-theming, throbber

我可以设计 Drupal 的 AJAX Throbber 和进度条吗？要覆盖的类或 ID 是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T12:08:37.890

可用于主题的 CSS 样式`throbber`：

*   `.ajax-progress-throbber`
*   `.ajax-progress-throbber .message`
*   `.ajax-progress-throbber .throbber`

另外，看看[这篇文章](http://www.antimath.info/css/change-throbber-in-drupal-7/)。

# c# - 将空的 DateTime 值发送到 SQL 存储过程。但不为空

> ID：14458133
> 
> 赞同：1
> 
> 时间：2013-01-22T12:03:20.523
> 
> 标签：c#, sql-server-2008, datetime, sqlparameter

我有一个 SQL 存储过程，它接受一个默认值为 NULL 的 DateTime 参数

```
@pmNext_Check_Date DATETIME=NULL 
```

我想在 3 个场景中使用这个参数：

1.  如果为 NULL 则不更新任何记录
2.  如果它有一个日期值，那么更新我在 WHERE 子句中指定的所有记录
3.  问题一！对于 WHERE 子句中的记录，将查询中的所有日期字段设置为 NULL。

这是 SP 中导致我出现问题的代码块（UPDATE 语句的其余部分在 SP 的其他地方构建并且工作正常）：

```
IF @pmNext_Check_Date IS NOT NULL
    IF @pmNext_Check_Date ='' --This is the bit that is causing me a problem. I just need to check for a empty date
        SET @sql = @sql + ' Next_Check_Date = NULL '
    ELSE
        SET @sql = @sql + ' Next_Check_Date = @pmNext_Check_Date '                    

SET @sql = @sql + ' WHERE ID IN (1, 2)' 
```

因此，例如，如果我有以下 2 行：

ID NextCheckDate

1 2012 年 12 月 12 日

2 空

在场景 1 中，我不会传递参数，因为该过程将使用默认值并且不会更新任何日期。

在方案 2 中，我传入一个日期值并使用日期值更新两行

在场景 3 中，我想将行上的日期值更新为空。场景 1 和 3 之间的区别在于，在场景 3 中，用户将选择将日期值设置为空。

所以，我想将一个空白日期传递给存储过程。我正在从 C# 执行此操作，并想做如下操作：

```
SqlParameter param = new SqlParameter("@pmNext_Check_Date", ""); 
```

这失败了，因为 SP 需要一个 DateTime。

所以我希望能够传递一个空白日期，以及如何在 SP 中检查它。下面的当前检查不起作用：

```
IF @pmNext_Check_Date ='' 
```

提前致谢。希望这一切都有意义。我正在使用 C#4.0 和 SQL 2008

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T12:25:34.113

没有所谓的“空白日期”。您可以使用众所周知的哨兵值（例如，某个任意古代年份的 1 月 1 日），但`null`更可取。请注意，要通过`null`参数传递显式，您需要：

```
SqlParameter param = new SqlParameter("@pmNext_Check_Date", DBNull.Value); 
```

如果这没有足够的粒度，请考虑添加一个单独的布尔 ( `bit`) 参数（或类似参数），以阐明您希望存储过程执行的操作。或者：有多个 proc 来做这些不同的事情。

SQL Server 的一个有用的标记值是 1753 年 1 月 1 日（SQL Server 的最小值`datetime`） - 这可以在 TSQL 中生成，而无需将字符串解析为`cast(-53690 as datetime)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:15:31.020

您不能将空字符串作为日期时间传递。所以，你有几个选择。您可以添加一个附加参数来指示是否应该进行更新。我建议将其作为代码可读性和可维护性的最佳选择。另一种选择是将参数作为字符串传递并解析它。这样你就可以使用你的空字符串概念。

[Sql Server 字符串到日期的转换](https://stackoverflow.com/questions/207190/sql-server-string-to-date-conversion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:22:16.457

抱歉，没有办法完全按照您的要求进行操作。一个`DATETIME`值要么是一个有效的日期，要么是`NULL`一个有效的日期，没有像字符串那样的“空”。

另一种解决方法是传递一个令牌值（否则将不是有效日期）来表示您所谓的空字符串，例如我见过的常用字符串是`1900-01-01`. 然后你可以区分你的存储过程`NULL`和“空”。

但我完全不建议这样做。我同意其他建议：添加另一个参数并在存储过程中以更有意义的方式执行逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:14:57.240

如果我没记错的话，允许**NULLS的****DATETIME**数据类型的列 将默认为值 1900-01-01 而不是 BLANK 值。

 **例如： 某些列可能允许使用**NULLS ，这些列稍后可能会根据某种业务逻辑接收值。**我见过人们将这些开放式列保留为 varchar 以启用某种类型的自定义条目或空字符串，这是 datetime 不允许的。

**如果你问我**，我会尽量不要弄乱基列的数据类型，让它保持为**DATETIME**。出于数据检索和报告的目的，我们可能会尝试以下方法，这可能不是最好的方法。但它有效。

```
BEGIN
            DECLARE @VarcharDateTable TABLE
            ([EndDate_Varchar] varchar(27))

        BEGIN
                INSERT INTO @VarcharDateTable([EndDate_Varchar])
            SELECT 
              CONVERT(varchar(27), [EndDate_Datetime], 121)        
                FROM [dbo].[MainTable]
        END
        BEGIN
        SELECT CASE WHEN [EndDate_Varchar] LIKE '1900-01-01%'
                        THEN 'Data unavailable'--or whatever you want
                        ELSE [EndDate_Varchar]
                   END AS [EndDate_Varchar] FROM @VarcharDateTable
        END 
END 
```**

# c# - C# 生成的代码将在 WebBrowser 中显示

> ID：14458139
> 
> 赞同：1
> 
> 时间：2013-01-22T12:03:38.090
> 
> 标签：c#

我有一个**Windows 窗体**程序，它将动态生成 HTML 代码，而 WebBrowser 将显示生成的代码。

保存临时 HTML 文件，然后在 WebBrowser 中显示它是唯一的方法吗？有没有一种方法我不需要在 WebBrowser 中立即保存和显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:10:54.453

是的。您可以像这样使用 WebBrowser.DocumentStream 属性：

```
var myHTMLString = "<html><body><h1>Hello!</h1></body></html>";

// Convert your html string into a byte array
byte[] bytes = System.Text.Encoding.UTF8.GetBytes(myHTMLString);

// Create a MemoryStream from the byte array
System.IO.MemoryStream ms = new System.IO.MemoryStream(bytes);

// Assign the new MemoryStream to the web browser
myWebBrowser.DocumentStream = ms; 
```

希望能帮助到你！

# jsp - jsp/tomcat url 重写

> ID：14458140
> 
> 赞同：1
> 
> 时间：2013-01-22T12:03:41.207
> 
> 标签：jsp, url-rewriting, tomcat6

我有一个这样的网址；**www.example.com/hotel/hotel_name**

我想重写网址，例如；**www.example.com/hotel_name**

我像 www.tukey.org 所说的那样一步一步地尝试。但它不起作用。

在我的**urlrewrite.xml**

```
 <rule>
        <from>^/hotel/([a-zA-Z_]+)$</from>
        <to>/hotel?url=$1</to>
    </rule> 
```

当我删除*“酒店”*表单规则时，网站出现故障。

**web.xml**

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

我错过了什么吗？谢谢你的帮助

# coding-style - 代码和程序有什么区别？

> ID：14458145
> 
> 赞同：0
> 
> 时间：2013-01-22T12:03:50.647
> 
> 标签：coding-style

代码和程序有什么区别？

在词汇上

代码是计算机程序或一组此类指令中数据或指令的符号排列

程序是计算机可以解释和执行的指令序列。

这些在上下文方面有多么不同。

例如，存在一些模拟代码，它们实际上是一组程序。

解释代码和程序的实际含义的线索是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:08:23.483

在编译的编程语言中，代码被编译为程序（这是机器代码）

在解释性脚本语言中，代码就是程序。

所以，程序总是代码，但代码并不总是程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:08:37.853

代码是在编译时生成程序的逻辑构建语言特定的语句组。该程序编译的输出是可执行的，并且是特定于平台或跨平台的。

# c# - 在 Windows 应用程序中从 C# 调用 javascript __dopostback 函数

> ID：14458151
> 
> 赞同：0
> 
> 时间：2013-01-22T12:04:09.860
> 
> 标签：c#, javascript

我想在我的c#程序中调用“__dopostback”函数，在我的程序中我想读取网页内容。但是在主网页中，我想阅读其内容的链接是由__dopostback调用的，javascript中的函数，例如我点击按钮时页面调用的函数是：

```
javascript:__doPostBack(ctl00$MainContent$GridView1,Page$2) 
```

现在，我如何从我的 c# 程序中调用这个函数，注意我的程序是一个 windows 应用程序而不是一个 asp.net 应用程序！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:11:13.510

我没有看到任何方法可以做到这一点，也许你可以使用 Web 请求。

[http://dotnet-codeguru.blogspot.com/2010/02/send-http-web-request-using-c.html](http://dotnet-codeguru.blogspot.com/2010/02/send-http-web-request-using-c.html)

# excel - 电子表格中应如何显示持续时间？

> ID：14458156
> 
> 赞同：1
> 
> 时间：2013-01-22T12:04:30.370
> 
> 标签：excel, time, spreadsheet, duration

我正在创建一个报告，显示两个时间点之间的持续时间（以小时为单位）。

例如

10:00 至 13:30 之间的持续时间等于 3 小时 30 分钟

此信息被保存到一个“持续时间”列中的电子表格（excel）中，标题为“持续时间（小时）”。该列需要可排序以允许按最长持续时间等进行排序。

这应该使用数字列格式显示为 3.5 还是 3.30？还是使用时间格式作为 03:30？是否有一个标准或纯粹取决于偏好？

欣赏你的想法！

谢谢，

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:14:58.057

另请注意，如果您使用“hh:mm”作为您的时间格式，那最多只能给您 24 个，所以即使它经过几天，您也不会看到超过 24 小时。如果您想要总小时数，请使用“[hh]:mm”查看例如 45:32

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:39:09.010

我认为这可能只是取决于偏好 - 任何一种方法都应该有效并且可以排序

对于时间格式，您可以减去，例如

=B2-A2

或十进制只需乘以 24

=(B2-A2)*24

我个人认为，持续时间应该保持在时间格式......

# regex - 使用正则表达式替换时，如何保留匹配字符串的一部分？

> ID：14458160
> 
> 赞同：59
> 
> 时间：2013-01-22T12:04:35.300
> 
> 标签：regex, notepad++

我有

```
12.hello.mp3
21.true.mp3
35.good.mp3
.
.
. 
```

依此类推，作为文本文件中列出的文件名。

我只需要用空格替换数字前面的那些点（。）。（例如 12.hello.mp3 => 12 hello.mp3）。如果我将正则表达式设为“[0-9]。”，它也会替换数字。请帮我。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-22T12:08:22.767

代替

```
^(\d+)\.(.*mp3)$ 
```

和

```
\1 \2 
```

此外，在最近的 notepad++ 版本中，它还将接受以下内容，其他 IDE/编辑器（例如 Intellij IDEA 等 JetBrains 产品）也接受以下内容：

```
$1 $2 
```

这假设 notepad++ 正则表达式匹配引擎支持组。正则表达式的基本含义是：将第一个点前面的数字匹配为第 1 组，将其后面的所有内容匹配为第 2 组（但前提是它以*mp3*结尾）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-25T06:44:42.340

我用vscode测试过。您必须使用带括号的组`(group of regex)`

#### 实际例子

*   从样本数据开始

```
1 a text
2 another text
3 yet more text 
```

*   执行正则表达式以查找/搜索数字和空格。这里的组将是括号中的数字

```
(\d)\s 
```

*   运行替换正则表达式操作。替换破折号的空格，但保留每行中的数字或数字

```
$1- 
```

*   输出

```
1-a text
2-another text
3-yet more text 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-11T23:04:23.620

使用基本模式，在接受的答案中得到了很好的描述，这是一个将`class="odd"`and添加到*Notepad++*或任何其他正则表达式兼容编辑器`class="even"`中的每个`<tr>`元素的示例：

 *找什么：`(<tr><td>)(.*?\r\n)(<tr><td>)(.*?\r\n)`

用。。。来代替：`<tr class="odd"><td>\2<tr class="even"><td>\4`*

# datagridview - 创建自定义单元格

> ID：14458161
> 
> 赞同：0
> 
> 时间：2013-01-22T12:04:37.000
> 
> 标签：datagridview

我有桌子`customer`，，，`order`。`item`程序是，当我收到订单时，我会通过`Form`带有物品的订单和要在上面的物品上完成的工作来完成它。我的订单上有状态的每件商品都有一行。它可以是一个订单上的多个项目，每个项目都有一些工作要做。

我可以显示`datagridview`如下：

![在此处输入图像描述](../Images/e69af535a4e8bc67f9a1504e472c5f4d.png)

但请记住，`Flex print`, `Lamination`, `Digital print`,`Offset`都是按照订购`job to do`项目的表格顺序排列的。

在单个订单上，我可以有多个需要层压的物品，但我想只显示*（如上图）*当我订购的所有物品都层压时的选中状态。这甚至可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:48:57.150

您应该将这些列的数据类型设置为布尔值。

# android - 具有不可拉伸中心区域的拉伸按钮

> ID：14458162
> 
> 赞同：3
> 
> 时间：2013-01-22T12:04:38.493
> 
> 标签：android, button, nine-patch, stretch

有什么方法可以拉伸按钮以使中央部分保持完整吗？9-patch 不允许这样做。 ![在此处输入图像描述](../Images/6deab9e87edab2584c74d0609fb677ed.png)

**编辑：**我使用了 Benito 推荐的 9-patch。它工作正常。奇怪的是我第一次无法得到它。 ![在此处输入图像描述](../Images/b604c22abc4f4ef662c43ddafff296d7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:19:00.093

您可以执行如下图所示的操作

![9 补丁图像](../Images/051313ba8118150560f4e23d379509f8.png)

但请确保您使背景透明。

# iframe - 在 iframe 中显示 Salesforce 登录表单

> ID：14458174
> 
> 赞同：2
> 
> 时间：2013-01-22T12:05:30.823
> 
> 标签：iframe, login, salesforce, framebusting

我无法在 IFrame中显示[https://login.salesforce.com 。](https://login.salesforce.com)

```
<iframe src="https://login.salesforce.com"/> 
```

我在我的应用程序和销售人员之间使用 OAuth。为了更好的用户体验，我不希望用户离开我的应用程序的主窗口。

有什么建议么？

演示问题的示例 - [http://jsfiddle.net/ngWxY/](http://jsfiddle.net/ngWxY/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:38:42.670

多年来，我们一直在 iFrame 中使用 SSP，没有出现任何问题。然后在上周末，我们的 Salesforce 域收到了 Spring '13 更新，我们无法再在 iFrame 中显示 SSP。我们发现原因是 Salesforce 现在`X-Frame-Options: DENY`在其 HTTP 响应中包含标头，它告诉浏览器不要在 iFrame 中显示内容。一些浏览器会给你一个解释消息，而另一些则什么都不显示。我们正在等待 Salesforce 的回复；也许你正在经历同样的事情？在常规浏览器窗口中浏览 SSP 登录 URL，并使用诊断工具检查返回内容的响应标头。

# ios - 如何在 XML 解析器中使用土耳其语字符？

> ID：14458175
> 
> 赞同：0
> 
> 时间：2013-01-22T12:05:41.477
> 
> 标签：ios, xml, xcode, parsing, xml-parsing

我是 ios 编程新手，我正在尝试解析 XML 字符串`:<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><SurveyListGetResponse xmlns="http://tempuri.org/"><SurveyListGetResult>{"SurveyList":[{"SurveyID":1,"SurveyName":"SomeSurvey","SurveyDescription":"Clean","BeginDate":"01.01.2013","EndDate":"05.01.2013"}],"Questions":[{"SurveyID":1,"QuestionID":8,"Question":"Mobile Question","AnswerTypeID":2}],"Answers":[{"SurveyID":1,"QuestionID":8,"AnswerID":18,"Answer":"YES"},{"SurveyID":1,"QuestionID":8,"AnswerID":19,"Answer":"Hayör"}]}</SurveyListGetResult></SurveyListGetResponse></soap:Body></soap:Envelope>`

这是我的 xml 字符串，正如您在上面看到的，“答案”：“Hayör”中有土耳其语字符，我检查了所有字符串，解析器将一直运行到“Hay”，但它不使用“ör”。

```
 NSData *xmlData = [responseString dataUsingEncoding:NSWindowsCP1254StringEncoding];

    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:xmlData];

    [xmlParser setDelegate:self];

    [xmlParser parse]; 
```

这是我的解析器代码，我习惯使用 NSWindowsCP1254StringEncoding 和 NSUTF8StringEncoding。aftes 字符串将被解析，它正在改变`{"SurveyList":[{"SurveyID":1,"SurveyName":"Some Survey","SurveyDescription":"Clean","BeginDate":"01.01.2013","EndDate":"05.01.2013"}],"Questions":[{"SurveyID":1,"QuestionID":8,"Question":"Mobil Soru","AnswerTypeID":2}],"Answers":[{"SurveyID":1,"QuestionID":8,"AnswerID":18,"Answer":"YES"},{"SurveyID":1,"QuestionID":8,"AnswerID":19,"Answer":"Hay`

我需要做什么来解决它？对不起我的英语不好，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:07:52.080

我会尝试将数据作为 NSUTF8StringEncoding 传递**给**解析器，然后将其转换为您想要用于土耳其语的任何编码。如果这不起作用，我会尝试使用字符串转义`stringByAddingPercentEscapesUsingEncoding`

还有……你有没有注意到，**SurveyListGetResult**标签中的数据实际上是一个 JSON 字符串？

# solr - 获取solr中文档的大小

> ID：14458176
> 
> 赞同：0
> 
> 时间：2013-01-22T12:05:47.360
> 
> 标签：solr, faceted-search

我有一组 solr 文档，例如：

<long name="document_id">1</long>
<long name="size">1666</long>
<arr name="label">
<str>A</str>
<str>B</str>
<str>C</str>
</arr>

<long name="document_id">2</long>
<long name="size">765</long>
<arr name="label">
<str>A</str>
<str>C</str>
</arr>

<long name="document_id">3</long>
<long name="size">456</long>
<arr name="label">
<str>B</str>
</arr>

我必须查询这些文档，输出应该是标签名称和文档中大小字段的总和。在此示例中：
A：2431（文档 1 的尺寸为 1666+文档 2 的尺寸为 765）
B：2122（文档 1 的尺寸为 1666+文档 3 的尺寸为 456）
C：2431（文档 1 的尺寸为 1666+文档 2 的尺寸为 765）

是否有任何单一查询可以找到它？我还查看了 solr 中的统计数据。但它适用于单值字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:53:23.387

不，你不能那样做。solr 查询将返回一个对象，您可以从中解析所需的字段并显示（对其进行计算）。没有查询可能可以做你想要的加法操作。

# django - Django：在管理界面中将多个用户添加到一个组

> ID：14458179
> 
> 赞同：6
> 
> 时间：2013-01-22T12:06:03.023
> 
> 标签：django, django-admin

目前我正在我的项目中设置权限，并为一个用户组分配了一些权限。现在我必须为这个组分配大量用户，以便他们可以使用该组的权限。

**问题：** 我必须点击管理界面中的每个用户，将他们添加到组中，下一个也一样。这需要大量时间。是否可以在任何地方选择应该属于一个组的所有用户？那会快很多...

如果标准管理界面无法使用，是否有我可以安装和使用的应用程序（例如用于数据库迁移任务的“South”）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:32:47.730

使用 django 外壳：

```
$ python manage.py shell
>>> from django.contrib.auth.models import User, Group
>>> the_group = Group.objects.get(name='the_name_in_admin')
>>> users = User.objects.exclude(groups__name='the_group_you_made_in_admin')
>>> for i in users:
...    i.groups.add(the_group)
...    i.save()
>>> 
```

有关身份验证系统的 api 的更多信息，请阅读[文档](https://docs.djangoproject.com/en/dev/topics/auth/default/#permissions-and-authorization)

# android - 在 OpenGL ES 中渲染期间编译着色器是一种好的/有效的做法吗？

> ID：14458181
> 
> 赞同：5
> 
> 时间：2013-01-22T12:06:07.593
> 
> 标签：android, opengl-es, samsung-mobile, glsles

**系统：**安卓4.03，OpenGL ES 2.0

**问题：**在第一帧已经用另一个程序/着色器渲染后调用 glAttachShader 时，某些设备 (Galaxy S3) 崩溃并出现“GL_INVALID_VALUE”错误（错误堆栈中没有更多详细信息）。其他设备（华硕 eee TF101）完全可以。该错误并不总是发生，有时它也是“GL_INVALID_ENUM”。如果我在第一次调用 onDrawFrame 时强制编译所有着色器，它适用于所有（我的）设备。

**问题：** 是否存在 openGL(ES) 机器无法编译着色器的状态？绑定的缓冲区、纹理或启用的属性数组是否可能会干扰将着色器附加到程序？如果是这样，在附加着色器和链接程序之前必须确保的理想状态是什么？在其他对象已经用其他着色器渲染之后编译着色器是否有效？

**背景：**我正在开发一个 Android 库，它允许我以更加面向对象的方式使用 openGL 图形（使用“场景”、“材质”、“模型”等对象），最终轻松编写游戏。场景、模型等是在与 GL 上下文不同的线程中创建的。只有当 onDrawFrame 遇到这些对象之一时，它才会在正确的线程中进行缓冲区对象绑定、纹理绑定和着色器编译。我想避免在代码开头编译所有着色器。根据材质、模型和场景的要求组装着色器源（例如：材质：包括凹凸贴图，模型：包括矩阵调色板浏览，场景：包括雾）。当从场景中删除模型时，我将再次删除着色器 - 如果我添加另一个模型，

*在这一点上，我试图在不发布代码的情况下尽可能简洁——你可以想象从这个库中提取相关部分是很困难的。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:47:27.203

在渲染期间编译是完全有效的，但不鼓励这样做，因为驱动程序需要为此占用资源（CPU）。当某些状态被注入着色器时，一些驱动程序状态会在驱动程序端触发着色器重新编译。将绘图调用重组为共享相同驱动程序状态的块是明智的（着色器程序更喜欢这是驱动程序完成的最昂贵的操作之一）。

提示：确保“使用”所有在着色器中声明的变量、统一和属性，否则，Mali 驱动程序会在编译期间将它们删除，当您尝试获取统一位置、属性位置等时，驱动程序会返回 GL_INVALID_VALUE。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:54:45.563

如果你复制Android开发包自带的BasicGLSurfaceView示例代码来启动你的项目，那么第一次调用

```
checkGlError 
```

在附加顶点着色器之后。但是，您可能更早使用了无效值或枚举，或者在代码中的其他位置使用了无效值或枚举。但这只会在 glAttachShader 之后被此调用接收。

在我的例子中，我删除了一个仍然作为帧缓冲区渲染目标链接的纹理。我运行较慢的旧 Android 设备在删除之前编译了着色器，我的新设备以某种方式设法调用

```
glFramebufferTexture2D 
```

在编译着色器之前。整个事情以某种方式与*queueEvent*和我对线程安全的理解不足有关。

感谢您的努力，TraxNet 和 Prateek Nina。

# ios - 用于在 xcdatamodel（核心数据）中插入新记录的 IDE？

> ID：14458182
> 
> 赞同：1
> 
> 时间：2013-01-22T12:06:11.480
> 
> 标签：ios, xcode, core-data

我只是想问一下，有没有办法使用 xcode 插入新记录（不是以编程方式）？

为了清楚起见，我想像在 Oracle 中使用 SQL Developer 一样插入数据（无代码）。

我在 xcode 中找不到添加新记录或行按钮。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:15:05.347

不在 XCode 中，但有一个用于 Firefox 的插件，可让您打开 SQLite 数据库。安装插件，启动它并打开数据库文件（在您的 iOS 模拟器的 app 目录中），它为您提供插入、删除、更新等工具。

Firefox 插件：[SQLite 管理器](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:41:35.637

不，Xcode 不包含这样的工具，但是有一个应用程序提供了一个 GUI 来管理您的 coredata 支持的应用程序（iOS 和 OSX）...... **但是：**

1.  这是一个商业应用程序（花钱）
2.  您无法创建或连接实体之间的关系（至少，上次我检查）

话虽如此，如果您仍然对此解决方案感兴趣，该应用程序称为**[核心数据编辑器](http://christian-kienle.de/CoreDataEditor)**，[这是应用商店中的链接](https://itunes.apple.com/gr/app/core-data-editor/id403025957?mt=12)。

# php - 如何使用 json 显示来自 mysql 的数据

> ID：14458184
> 
> 赞同：0
> 
> 时间：2013-01-22T12:06:21.993
> 
> 标签：php, jquery, mysql

如何使用 json php 和 mysql 显示数据库中的数据。我一直在尝试，但我未能获胜，但如果我不包含 jquery，它会以一种有趣的方式显示。我将不胜感激任何帮助。贝娄是我到目前为止所尝试的。

```
<?php 
require_once('dbbox.php');
?>
<?php
$sql = "SELECT * FROM 
m1debtors INNER JOIN 
m1dtrans 
ON m1debtors.name = m1dtrans.user";
$result = mysql_query($sql, $con) or die(mysql_error($con));
while ($row = mysql_fetch_array($result)){
$accnum =  $row['accnum'];
$name = $row['name'];
$addr1 = $row['addr1'];
}
// The JSON standard MIME header.
header('Content-type: application/json');
$array = array('Name'=>$name, 'user'=>$user);
 echo  json_encode($array);
?>
Here is the html page to display data 
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){
$.getJSON("view.php",{$name});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:09:03.030

**视图.php**

```
<?php 
  require_once('dbbox.php');

  $sql = "SELECT * FROM m1debtors 
          INNER JOIN m1dtrans 
            ON m1debtors.name = m1dtrans.user";
  $result = mysql_query($sql, $con) or die(mysql_error($con));
  while ($row = mysql_fetch_array($result)){
    $accnum =  $row['accnum'];
    $name = $row['name'];
    $addr1 = $row['addr1'];
  }

  // The JSON standard MIME header.
  header('Content-type: application/json');
  $array = array('name'=>$name, 'user'=>$user);
   echo  json_encode($array);
?> 
```

**索引.php**

```
<html>
  <head>
   <script src="http://code.jquery.com/jquery-latest.js"></script>
   <script> 
      $(document).ready(function(){
        $.getJSON('view.php', function(data) {
          $('#myJson').html(data.name + ' ' + data.user);
        });
      });

    </script>
  </head>
  <body>
    <div id="myJson"></div>
  </body>
</html> 
```

# ios - 如何获取没有多对多关系的实体

> ID：14458186
> 
> 赞同：0
> 
> 时间：2013-01-22T12:06:38.640
> 
> 标签：ios, core-data, nsfetchrequest

我有一个模型，其中有一个名为“类别”的实体。此类别具有称为“产品”的一对多关系。如何设置获取请求以仅获取没有产品的类别实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:40:01.833

如果您查询`Category`，产品元素将作为故障加载。这是 CoreData 的默认行为。

相反，如果您使用，您可以在执行请求时`- (void)setRelationshipKeyPathsForPrefetching:(NSArray *)keys`加载（**预取）产品。**

从[核心数据应用程序](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html#//apple_ref/doc/uid/TP30001202-CJBDBHCB)

> 故障减少了应用程序消耗的内存量。故障是表示尚未完全实现的托管对象的占位符对象，或**表示关系的集合对象**：
> 
> 托管对象故障是适当类的实例，但其持久变量尚未初始化。关系故障是表示关系的集合类的子类。故障允许 Core Data 在对象图上设置边界。由于没有实现故障，托管对象故障消耗的内存较少，与故障相关的托管对象根本不需要在内存中表示。

和

> **预取**实际上是批处理故障的一种特殊情况，在另一次取回后立即执行。预取背后的想法是对未来需求的预期。当您获取一些对象时，有时您知道不久之后您还需要可能由故障表示的相关对象。为避免单个故障触发的低效率，**您可以预取目标处的对象**。

**编辑**

如果您需要计算特定类别的产品数量，请使用`- (NSUInteger)countForFetchRequest:(NSFetchRequest *)request error:(NSError **)error`如下请求：

```
NSFetchRequest* request = // set up a request for Products
[request setPredicate:[NSPredicate predicateWithFormat:@"toCategory == %@", currentCategory]];
// count for fetch request here... 
```

从到`toCategory`的反比关系在哪里，并且是您拥有的类别。`Products``Category``currentCategory`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:37:28.557

查看 NSFetchRequest 的文档

您可以设置“includeSubentities”和“returnsObjectsAsFaults”来限制从核心数据返回的数据与您的模型（产品）

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)

# asp.net - ASP.NET 运行时错误：“路径”不是有效的 IIS 应用程序。VS2012 / IIS7.5

> ID：14458189
> 
> 赞同：3
> 
> 时间：2013-01-22T12:06:52.613
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4, visual-studio-2012

我的 ASP.net mvc 4 应用程序在 IIS7.5 下运行时出现了一个奇怪的行为。

每次我重建应用程序时，我的项目的 IIS 文件树节点上都会出现 2 个应用程序。第一个很好。这是我创建的应用程序。第二个是另一个不应该出现的。

我已重命名我的应用程序，并且我相信不再引用旧名称。

旧名是格地。

今天我第一次尝试来自visual studio的发布工具，我收到了这个警告：

`Warning 1 C:\Users\Guilherme\Documents\Visual Studio` `2012\Projects\gedaiapp\gedaiapp\Views\Operacao\opImportacaoConfig.cshtml:`

```
ASP.NET runtime error: '/LM/W3SVC/1/ROOT/Gedi' is not a valid IIS application.

C:\Users\Guilherme\Documents\Visual Studio
2012\Projects\gedaiapp\gedaiapp\Views\Operacao\opImportacaoConfig.cshtml
1   1   gedaiapp 
```

我不明白这个戈地还在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:16:37.057

检查 Visual Studio 中项目属性的 Web 部分。如果您已将其设置为使用本地 IIS，并且它仍然指向您的旧位置，那么这可能是导致它在您每次构建时重新出现的原因。

# java - JTable 未从 SwingWorker 线程更新

> ID：14458196
> 
> 赞同：0
> 
> 时间：2013-01-22T12:07:25.217
> 
> 标签：java, swing, jtable, swingworker, jide

我目前有一个 JTable，其中填充了一系列数据，这些数据构成了导入屏幕的基础。当我完成选择我想要或不想要的更新后，我按下应用按钮，更新成功应用，但 JTable 没有完全更新。

这是处理应用更改的方法的代码：

```
private void doProcessChanges() {
    ChangeProcessor cp = new ChangeProcessor();
    final List<Integer> rowsToRemove = new ArrayList<Integer>();
    BeanTableModel<UpdateModel> model = (BeanTableModel<UpdateModel>) table.getModel();

    for (int i=0; i<model.getRowCount(); i++) {
        UpdateRow ur = mode.getObject(i);
        if (ur.isAccepted() <> ChangeAcceptance.NO_ACTION) {
           cp.processChange(ur);
           rowsToRemove.add(i);
        }
    }

   SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            for (int row : rowsToRemove) {
                model.removeObject(row);
                model.fireTableDataChanged();
            }
    }
);
} 
```

该方法从 SwingWorker 线程中调用，如下所示：

```
 SwingWorker<Object, Object> worker = new SwingWorker<Object, Object>() {

                    @Override
                    protected Object doInBackground() throws Exception {
                        doProcessChanges();
                        return null;
                    }

                    @Override
                    protected void done() {
                        try {
                            get();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        } catch (ExecutionException e) {
                            e.printStackTrace();
                        }
                    }
                }; 
```

执行此操作没有任何异常，所以我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:24:36.110

您的片段显示不正确的同步。特别是，您可以从后台线程访问[`BeanTableModel`](http://tips4java.wordpress.com/2008/11/27/bean-table-model/)的子类。`AbstractTableModel`相反，`List<Integer> rowsToRemove`在其构造函数中将 传递给您的工作人员。

附录：代替`invokeLater()`，您可以在 EDT 上执行的`TableModel`的实现中更新 。`process()`此外，您不必这样做`fireTableDataChanged()`，“通知所有侦听器表行中的*所有*单元格值可能已更改”。`removeObject()`实现应该触发影响更改所需的最不普遍的*事件。*

# excel-formula - 删除excel中的行而不影响Excel公式

> ID：14458200
> 
> 赞同：3
> 
> 时间：2013-01-22T12:07:36.597
> 
> 标签：excel-formula, excel-2010

我有一个电子表格，我试图使用以下公式在每一行中添加序列号

=IF(C149<>"";MAX($B$149:OFFSET(B150;-1;0))+0.1;"")

但是，每当我删除 B 列中的行时，所有其他行中都会出现错误值，例如 #N/A

是否可以在不影响公式的情况下删除行？

我听说有一个excel函数“INDEX”要使用，请回答如何将INDEX函数应用于上述公式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-03T17:29:33.193

Not exactly the answer you were asking for, but google picks this out for deleting without breaking formaulas - so anyone landing here from google...

The formulas break because you are removing cells from the spreadsheet - chainging the structure of the sheet. Where as what you want to do is just remove the data, and have all the remaining data move up.

One way is to select all the data below the line you want cleared (plus one blank line at the end) - then copy that range (to the clipboard) and paste it all back in one row higher.

Not a great solution - but it works - I found this question looking for a better way! :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:07:48.123

问题可能与`$B$149`当您删除一行时，$ 表示 149 不能像`C149`and`B150`那样相应地更改，这可能意味着它在删除后指向不正确的数据。

# asp.net-mvc - 具有 HandleError 属性的自定义错误页面

> ID：14458202
> 
> 赞同：0
> 
> 时间：2013-01-22T12:07:44.920
> 
> 标签：asp.net-mvc, iis, web-config, handleerror, ip-restrictions

我有 asp.net Web 应用程序并尝试为[Dynamic Ip Restrictions 模块](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)指定自定义 HTML ，该模块在 .net 代码之前返回 401。

我在 web.config 中添加了以下内容：

```
<httpErrors>
  <remove statusCode="404" subStatusCode="-1" />
  <remove statusCode="401" subStatusCode="-1" />
  <error statusCode="401" path="ddos.html" responseMode="File" />
  <error statusCode="401" subStatusCode="502" path="ddos.html" responseMode="File" />
  <error statusCode="404" prefixLanguageFilePath="" path="/404" responseMode="ExecuteURL" />
</httpErrors> 
```

生产环境（Windows Server 2008）：带有 404 和 401 的页面工作正常，但异常处理被破坏 - 我看到内置的 iis“红色”页面而不是自定义页面。

开发环境（windows 7/8）：404 和错误都可以，但是 401 将用户重定向到登录页面。

异常处理定义为：

```
[HandleError(View = "Error", Master = "~/Views/Shared/_ThreeColumnsLayout.cshtml")] 
```

UPD1：另外，我可以补充一点，如果我删除代码为 500 的页面，我会看到以下纯文本消息：

```
The page cannot be displayed because an internal server error has occurred. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:31:21.307

```
<httpErrors existingResponse="Auto"> 
```

成功了

# iphone - 如何在保持其纵横比的同时调整 AsyncImageView（UIImageView 的子类）的大小

> ID：14458208
> 
> 赞同：1
> 
> 时间：2013-01-22T12:08:05.980
> 
> 标签：iphone, ios, ipad, uiimageview, uiimage

我已使用此链接中的以下代码： [如何在保持其纵横比的同时调整 UIImage 的大小以通过保持其纵横比](https://stackoverflow.com/questions/6703502/how-to-resize-an-uiimage-while-maintaining-its-aspect-ratio) 将图像调整为固定大小（100 * 100）。我在我的应用程序中使用**了 AsyncImageView**来使用 url 加载图像。您可以从此链接获取**AsyncImageView代码：** [nicklockwood / AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

但是这些图像仍然看起来像被挤压了。我该如何解决这个问题？

```
- (UIImage*) scaleImage:(UIImage*)image toSize:(CGSize)newSize {
    CGSize scaledSize = newSize;
    float scaleFactor = 1.0;
    if( image.size.width > image.size.height ) {
        scaleFactor = image.size.width / image.size.height;
        scaledSize.width = newSize.width;
        scaledSize.height = newSize.height / scaleFactor;
    }
    else {
        scaleFactor = image.size.height / image.size.width;
        scaledSize.height = newSize.height;
        scaledSize.width = newSize.width / scaleFactor;
    }

    UIGraphicsBeginImageContextWithOptions( scaledSize, NO, 0.0 );
    CGRect scaledImageRect = CGRectMake( 0.0, 0.0, scaledSize.width, scaledSize.height );
    [image drawInRect:scaledImageRect];
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    

    return scaledImage;
} 
```

这是在我的应用程序中加载图像的方式： ![在此处输入图像描述](../Images/6c7029aed7eba3fcdecc5e40303caac2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:36:10.123

为什么不使用 SDWebImage 获取远程图像？这是链接：[https ://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

# c# - 如何编写正则表达式？

> ID：14458211
> 
> 赞同：-7
> 
> 时间：2013-01-22T12:08:18.667
> 
> 标签：c#, .net, regex

输入字符串：`A+SUM(A)C+AB-C+SUM(A)+1`

我想用0替换A，结果如下：`0+SUM(A)C+AB-C+SUM(A)+1`

或将 SUM(A) 替换为 0，结果如下：`A+SUM(A)C+AB-C+0+1`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:14:03.627

没有正则表达式（因为正则表达式对此太过分了）：

```
var s = "A+SUM(A)+B-C";

var replaceBeginningA = s.Replace("A+", "0+");
var replaceSumA = s.Replace("SUM(A)", "0");

Console.WriteLine(replaceBeginningA); // 0+SUM(A)+B-C
Console.WriteLine(replaceSumA); // A+0+B-C 
```

正如评论中指出的那样，如果预期此输入具有不同的格式，您需要提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:49:00.600

尝试这样：

```
string replaced = Regex.Replace(input, @"\b(\w+)\+SUM\(\1\)", "0+0"); 
```

这将匹配任何形式的

```
foo+SUM(foo) 
```

并将其替换为`0+0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:10:19.417

也许：

替换`^A`为`0`

替换`SUM\(A\)`为`0`

# oracle - 将全部插入选择序列.nextval，不允许序列？

> ID：14458214
> 
> 赞同：1
> 
> 时间：2013-01-22T12:08:28.913
> 
> 标签：oracle

我正在尝试将数据从一个表复制到 3 个表。

我需要将序列值输入到 1 个或多个表中。但我得到一个错误，“这里不允许序列号”

这是我的sql。

```
INSERT ALL 
INTO COM_BOARD(BOD_UID, MNU_UID, BOD_NOTICE, BOD_SUBJECT, BOD_READCNT, BOD_COMMENTCNT, BOD_REF, BOD_LEVEL, BOD_ORDER, BOD_REPLYCNT, BOD_PARENTUID,
    BOD_TAG, BOD_OPEN, BOD_STATE, BOD_DELETE)
 VALUES(BOD_UID, MNU_UID, 0, BOD_SUBJECT, 0, 0, BOD_UID, 0, 0, 0, 0, 0, 0, 9, 0)
INTO COM_BODCONTENT(CON_UID, BOD_UID, MEM_UID, CON_PW, CON_NM, CON_IP, CON_TY, CON_REGYMD, CON_MODYMD, CON_CONTENT)
 VALUES(con_uid, bod_uid, 1, 'adm!!@#!11', 'Admin', '127.0.0.1', 0, input_dt, update_dt, bod_subject)
INTO COM_BODDATA(DAT_UID, BOD_UID, DAT_FILETY, DAT_FILEEXT, DAT_FILENM, DAT_ORGFILENM, DAT_FILESIZE, DAT_DOWNCNT, DAT_STATE)
 VALUES(DAT_UID, BOD_UID, 0, FILE_EXT, IMG, IMG, IMG_SIZE, 0, 1)
SELECT SEQ_BODUID.NEXTVAL BOD_UID, SEQ_CONUID.NEXTVAL CON_UID, SEQ_CONDAT_UID.NEXTVAL DAT_UID, 3141 MNU_UID
  , DECODE(STATE, 'A', 9, 1) BOD_STATE, DECODE(STATE, 'A', 9, 1) BOD_DELETE, SUBJECT/*_kr .. */ bod_subject
  , IMG, IMG_SIZE, SUBSTR(REGEXP_SUBSTR(IMG, '\.\w+'), 2) FILE_EXT, INPUT_DT, INPUT_WRITER, UPDATE_DT, UPDATE_WRITER, CNT 
from system.t_near_photo 
```

不能用`insert all into ~ into ~ select sequence.nextval ~~` 还是我用错了？

感谢您的任何帮助。

# android - android布局不适用

> ID：14458219
> 
> 赞同：0
> 
> 时间：2013-01-22T12:08:43.140
> 
> 标签：android, android-layout

我有两个垂直布局，第一个有edittext和按钮，第二个有两个listvies，第一个没有出现，运行应用程序时出现异常

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/etRestaurantSearchName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Enter name"
            android:inputType="text"
            android:textSize="15dip" />

        <Button
            android:id="@+id/bRestaurantSearchButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Search" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/lvRestaurants"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="#ffffff"
            android:fillViewport="true" >
        </ListView>

        <ListView
            android:id="@+id/lvAlphabets"
            android:layout_width="40dp"
            android:layout_height="match_parent"
            android:layout_weight="2"
            android:background="@drawable/foods_alphabets_bg"
            android:orientation="vertical" >
        </ListView>

    </LinearLayout>

</RelativeLayout> 
```

我敢肯定这与身高、宽度或重量有关，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:12:39.210

您已使用 RelativeLayout 作为内部两个布局的父布局。因此第二个内部线性布局与第一个重叠，因此看不到第一个。使用线性布局作为父布局

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:20:21.317

试试这个：

更正： android:layout_below="@+id/Layout1" 用于布局二。以及一些与体重相关的变化。

```
<LinearLayout
    android:id="@+id/Layout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/etRestaurantSearchName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="Enter name"
        android:inputType="text"
        android:textSize="15dip" />

    <Button
        android:id="@+id/bRestaurantSearchButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Search" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/Layout1"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/lvRestaurants"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/edit_text"
        android:fillViewport="true" >
    </ListView>

    <ListView
        android:id="@+id/lvAlphabets"
        android:layout_width="40dp"
        android:layout_height="match_parent"
        android:background="@drawable/btn_bg_pressed"
        android:orientation="vertical" >
    </ListView>
</LinearLayout> 
```

# git - Git & tortoise Svn - 迁移

> ID：14458220
> 
> 赞同：0
> 
> 时间：2013-01-22T12:08:45.140
> 
> 标签：git, tortoisesvn

设想：

我们一直在使用 SVN 来管理我们的代码库。SVN repo 是在 linux 服务器上设置的，开发人员在 windows os 上使用 tortoise svn 使用这个 repo。

现在，我们需要迁移到 GIT，因为在分支和合并方面我们对 svn 感到害怕。我已经获得了另一个 linux 服务器，我可以在其中设置一个 git repo，然后培训开发人员从 svn 迁移到 git。

我阅读了 git-svn 官方文档和其他一些谷歌搜索相关的结果。我想我犯了一个错误，但不确定：

我使用 svn log 命令提取了 svn 用户信息

转到 linux 服务器并使用带有 -s 标志的 git svn clone 命令，因为我们有一个标准布局。

在我的 Windows 机器上安装了 msysgit，并考虑克隆 git repo，以便我可以测试 git repo，同时开发人员继续像往常一样将他们的更改推送到 svn repo。曾经，人们接受了 git 培训，然后我们可以完全转向 git repo。

这里担心我不确定这是否是正确的方法。因为，所有的迁移链接，文档都在谈论 *nix 系统，不确定这是否是这样做的。有人可以提供一些关于正确程序应该是什么以及我应该如何进行此迁移的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:19:34.747

我知道的唯一可能的问题是行尾问题。Git for Windows 通常`core.autocrlf`在系统配置中打开设置的情况下安装。当您`git svn clone`在 POSIX 系统上执行此操作时，您的存储库中的文件应该以 Windows 行结尾 (CR+LF) 结尾（嗯，至少这是我自己的经验），如果您随后在具有上述设置的 Windows 机器（未覆盖）然后修改文件并提交此更改，Git 可能会尝试将该文件中的行结尾转换为 LF，从而记录 100% 重写，这不是预期的。

解决方案可能是在每个开发人员的存储库中覆盖该设置，或者在切换到 Git 之前尝试将历史记录（使用`git filter-branch`）转换为存储库中的 LF。

无论哪种情况，首先尝试使用您的新存储库，看看会发生什么。

有关更多背景信息，请参阅[此内容。](https://stackoverflow.com/q/1967370/720999)

# android - Inflating View android时防止双击

> ID：14458228
> 
> 赞同：1
> 
> 时间：2013-01-22T12:09:23.360
> 
> 标签：android, android-view, android-inflate

使用 Layoutinflater 单击按钮时，我正在更改视图。该按钮位于所有屏幕中的相同位置。如果我单击按钮，它只会更改一次视图。如果我双击按钮，它会更改两次视图。这意味着单击事件在两种不同的布局中分派了两次。在这里，当我双击按钮时，它应该只更改一次。

为此我该怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:29:51.103

您可以对两个点击事件进行比较，即将第一个事件的系统时间存储在变量（全局范围）中，并通过最新事件的系统时间进行比较。在这里，您需要确定两个点击事件之间的时间跨度，根据您认为它是否为双击事件。假设我考虑是否在第一次点击事件的 35 毫秒内完成第二次点击，它是一次双击。因此，如果上述时间差小于 35 秒，您可以限制视图更改希望这对您有所帮助

# .net - 与 WPF 浏览器的并发连接

> ID：14458229
> 
> 赞同：0
> 
> 时间：2013-01-22T12:09:23.333
> 
> 标签：.net, wpf, webbrowser-control, signalr

我正在尝试针对 SignalR 运行一些测试，以便我们可以在我们的产品中使用它，但首先它需要通过我设置的小型负载测试。

iv 所做的是编写了一个小应用程序，它基本上创建了 x 个 WPF 浏览器控件并将它们指向我的机器。这一切正常，所有的 JavaScript 和一切都正常工作。

我的问题是只有 2 个 x 浏览器连接到 Signal R，我看了看，显然它与并发连接有关，所以我尝试设置

```
 <system.net>
<connectionManagement>
  <add address="*" maxconnection="100" />
</connectionManagement> 
```

但这不起作用，我也尝试过

```
 ServicePointManager.DefaultConnectionLimit = 200; 
```

那也没有解决它..

我把头发拉在这里试图让它发挥作用！有任何想法吗？我不能完全用 2 个连接客户端进行负载测试，呵呵！

一些代码；

```
 private void Create(object o)
    {

        for (int i = 0; i < this.Users; i++)
        {
            StressResult result = new StressResult { BrowserInstance = new WebBrowser(), Id = i };

            this.Results.Add(result);
        }

    }

    private void StartRun(object obj)
    {
        foreach (StressResult result in this.Results)
        {
            result.BrowserInstance.Navigate(this.Target);
        }
    } 
```

创建首先运行，以便浏览器可以加载，然后我们最终进行导航。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:27:34.473

WPF 浏览器组件很可能是非托管 Internet Explorer 核心 Web 浏览器组件的包装器。尝试按照说明更改注册表项：

1.  启动注册表编辑器。
2.  在注册表中找到以下项：HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings
3.  在编辑菜单上，指向新建，单击 DWORD 值，然后添加以下注册表值： 值名称：MaxConnectionsPer1_0Server
    值数据：10
    基数：十进制
    值名称：MaxConnectionsPerServer
    值数据：10
    基数：十进制

对于 Internet Explorer 8 和 9 和全局密钥以及 GPO，请参阅下面的链接。

此知识库文章对此进行了描述：
[如何将 Internet Explorer 配置为一次下载两个以上的文件？](http://support.microsoft.com/kb/282402)

另请参阅：[SignalR 和浏览器连接限制](https://stackoverflow.com/questions/12724202/signalr-and-browser-connection-limit)

# voip - 在 ip 电话上正确显示阿拉伯语

> ID：14458230
> 
> 赞同：0
> 
> 时间：2013-01-22T12:09:27.377
> 
> 标签：voip, cisco

我在 cisco ip 电话上遇到问题，当尝试显示阿拉伯字符时，它显示为 ???????? 所以我想知道如何在 ip 电话上正确显示阿拉伯语？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:09:27.377

使用以下代码修复了问题：

```
String newStr=new String(
            str.getBytes("iso-8859-1"), "utf-8"); 
```

# git - 'svn update' 是否包含存储库的历史记录？

> ID：14458231
> 
> 赞同：0
> 
> 时间：2013-01-22T12:09:29.097
> 
> 标签：git, svn, history, git-checkout

我正在比较 SVN 和 Git。

我知道 'svn checkout' 与 'git clone' 相同，它们都包含原始存储库的历史记录。

在 Git 中，一旦 'git clone' 完成，我不再需要 'git clone' 来获取原始存储库的历史记录，因为我可以使用 'git fetch' 和 'git merge'，它们比'git 克隆'。所以“git fetch”和“git merge”可以让我的存储库成为原始存储库的完美备份。

但是SVN呢？'svn checkout' 是一项非常昂贵的工作，因为它处理整个存储库。因此，只要我愿意，就做'svn checkout'并不是一个好的选择。'svn update' 比'svn checkout' 轻得多，因为'svn update' 只提供更新的东西。

我想知道“svn update”是否包含原始存储库的历史记录。如果是这样，'svn update' 可以将我签出的存储库保留为原始存储库的备份。如果没有，则没有简单的方法可以将我的签出存储库保留为原始存储库的备份。

请给我一个好的答案^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:18:41.170

你的第一印象是错误的：`svn checkout`不*一样*`git clone`。

`svn checkout`只获取最新版本，并且`svn update`只更新到最新版本。要以任何方式访问项目的历史记录，您必须联系服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:20:04.047

SVN 仅在本地保留工作副本。这意味着 a`svn checkout`仅创建当前 HEAD 的工作副本（并将`svn update`现有工作副本更新到当前 HEAD），但提交历史记录仍保留在服务器上（例如，如果您执行 a `svn log`，则加载提交历史记录来自服务器）。

另一方面，Git 保留整个存储库——不仅是工作副本（git-speak 中的“工作树”），还有整个提交历史。

如果您想将您的 SVN 工作副本恢复为旧版本，您可以使用 来执行此操作`svn update -r[revision number]`，但是 SVN 会再次从服务器中提取指定的修订版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:12:28.267

为了保留您的存储库的备份，而不是检查它，我强烈建议您查看使用`svnadmin dump`或`svnadmin hotcopy`

# javascript - Javascript端口访问

> ID：14458235
> 
> 赞同：1
> 
> 时间：2013-01-22T12:09:38.743
> 
> 标签：javascript, networking

javascript可以访问系统端口吗？如果是，是否可以编写一个服务器（C 中的 TCP/UDP），数据可以从 javascript 发送到该服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:11:02.947

假设您不要求[Node.js](http://nodejs.org/)。

您可以用 C 编写 WebSocket 服务器并将您的 JavaScript 连接到它。已经有很多实现，所以您不必自己编写。

当您启动服务器并将其绑定到特定主机名和端口时，您可以通过以下方式从 JavaScript 连接：

```
var ws = new WebSocket('ws://hostname:port');
ws.onopen = function () {
   console.log('Connected');
};
ws.onmessage = function () {
   console.log('New message...');
};
ws.send('Some message...'); 
```

例如，这里有一个[http://code.google.com/p/cwebsocket/](http://code.google.com/p/cwebsocket/)。

据我所知，WebSocket 是基于 TCP 的。

另一种选择是创建使用 AJAX 的 HTTP 服务器，带或不带长轮询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:38:23.650

“系统端口”是什么意思？串口？AGP 端口？用不同的编程语言重写应用程序？在一般用法中没有“系统端口”这样的术语。您似乎指的是套接字。

在这种情况下....

有点。您可以使用 javascript 连接到任何 TCP 端口 - 但您只能使用 HTTP 通过该端口进行通信。可以通过 websocket 进行隧道通信——但这需要在服务器端使用代理来连接到[传统服务器](https://github.com/kumina/wsproxy/blob/master/wsproxy.c)。TCP 是流协议，但 websocket 是面向消息的。

如果您从头开始实现自己的服务器，那么在已经了解 websockets（例如 node.js）的基础上构建会容易得多。

您不能使用 UDP（作为建立 TCP 连接的副产品的 DNS 查找除外）。

# jms - 等效于 IBM MQSeries 中的 org.hornetq.api.core.client.ClientMessage.setBodyInputStream

> ID：14458236
> 
> 赞同：3
> 
> 时间：2013-01-22T12:09:39.427
> 
> 标签：jms, ibm-mq

在下面的 [JBoss/HornetQ 用户手册页](http://docs.jboss.org/hornetq/2.2.2.Final/user-manual/en/html/large-messages.html)中，您可以看到 HornetQ 如何使用 java.io.InputStream 提供一种将数据流式传输到队列消息的机制。给出了相同代码的 JMS 版本。有没有人遇到过使用 IBM MQSeries / WebsphereMQ 的等价物？

假设我有大量数据要放在 JMS 消息中，这对我来说只是一个字节流。在 Hornet 示例中，仅在发送消息时才读取流，因此如果是，例如 FileInputStream，那么我们只需要足够的内存来缓冲一大块字节。我可以使用 javax.jms.BytesMessage 发送字节块并使用 BytesMessage 缓冲它们。这样做的问题是 BytesMessage (com.ibm.msg.client.jms.internal.JmsBytesMessageImpl) 的 IBM 实现必须缓存它们，直到消息被发送，如果这是大量数据，那就是一个问题。更糟糕的是，虽然我只发送字节，但 IBM 实现似乎保留了重复的副本，一个在 BytesArrayOutputStream 中，另一个在 DataOutputStream 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:29:56.600

在 WebSphere MQ 中，最接近您所描述的是[参考消息](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fg12740_.htm)。信息中心中描述的方法需要对通道出口进行自定义编程，以获取文件系统对象并将其放入消息中，然后再通过通道传输。远程端的补充出口将有效负载保存到文件中，并将对该文件的引用放入返回给应用程序的消息中。

我们在 WMQ 中也有程序，它们在一端采用 STDIN 或管道，在另一端将消息放入队列。其中一对可以充当管道，通过该管道，面向行的 ASCII 数据在不同机器上的进程之间流动。但是，没有对此的 JMS 实现，并且对于二进制数据来说效果不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:16:12.240

在 WMQ 中，我们有 Group 和 Segment 的概念。除 Z/OS 外，所有操作系统都支持分段。

在此处查看详细信息[WMQ 中的分段](http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/index.jsp?topic=/com.ibm.mq.csqzal.doc/fg12700_.htm)

在放置消息时使用 GroupId、MsgSeqNumber 和 Offset。

如果您在 GMO 中提供**MQGMO_COMPLETE_MSG**，则在获取消息时，所有段都会根据 MsgSeqNumber 自动连接，并且

> 您将使用单个 GET 在接收应用程序上收到一条消息。

# c# - 如何固定“非托管”指针？

> ID：14458237
> 
> 赞同：6
> 
> 时间：2013-01-22T12:09:43.240
> 
> 标签：c#, pinvoke

我有一个外部方法，它接收一些参数、分配内存并返回一个指针。

```
[DllImport("some.dll", CallingConvention = CvInvoke.CvCallingConvention)]
public static extern IntPtr cvCreateHeader(
       Size size,
       int a,
       int b); 
```

我很清楚在托管应用程序中分配非托管内存是不好的做法，但在这种情况下，我别无选择，因为 dll 是第 3 方。

有一个等效的函数可以释放内存，我知道分配数组的大小。

1.  如何固定返回的指针以使 GC 不会移动它（不会变得不安全）？'fixed' 不会这样做，因为这个指针在整个班级中被广泛使用？
2.  这个 p/Invoke 有更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T12:32:11.360

不，你得到了一个*永远不会*移动的内存指针。从本机堆分配的内存保持不变，没有什么类似于垃圾收集器使用的压缩策略。这只有在内存管理系统可以找到所有指向已分配内存块的指针时才有效。这样它就可以在块移动时更新这些指针。本机代码不存在类似的东西，没有可靠的方法可以找到这些指针。

不要费心寻找固定指针的方法。没有一个，因为不需要一个。

# jquery - 我更新了我的 Jquery 文件上传，它开始自动提交表单

> ID：14458245
> 
> 赞同：1
> 
> 时间：2013-01-22T12:10:02.180
> 
> 标签：jquery, jquery-file-upload

我一直在使用 jquery 文件上传一段时间，并决定我想使用自定义用户文件夹。我升级到最新版本是因为添加了自定义文件夹功能。升级后，每次上传文件时都会自动提交表单。我搜索了代码以找到答案，并在 jquery.fileupload.js 的第 760 行找到了这个

```
 newData.submit = function () {
                newData.jqXHR = this.jqXHR =
                    (that._trigger('submit', e, this) !== false) &&
                    that._onSend(e, this);
                return this.jqXHR;
            }; 
```

我注释掉了这一行

//(that._trigger('submit', e, this) !== false) &&

现在一切似乎都正常了。我不确定这是否是正确的做法。但现在它有效。

# .net - 使用 .runsettings 将程序集排除在代码覆盖范围之外

> ID：14458246
> 
> 赞同：24
> 
> 时间：2013-01-22T12:10:04.380
> 
> 标签：.net, visual-studio, unit-testing, code-coverage, vs-unit-testing-framework

在为包含多个项目的解决方案运行代码覆盖率时，我注意到代码覆盖率还包括我的测试程序集。

我发现一篇文章建议使用以下 .runsettings 模板：

```
<?xml version="1.0" encoding="utf-8"?>
<RunSettings>
  <DataCollectionRunSettings>
    <DataCollectors>
      <DataCollector friendlyName="Code Coverage" uri="datacollector://Microsoft/CodeCoverage/2.0" assemblyQualifiedName="Microsoft.VisualStudio.Coverage.DynamicCoverageDataCollector, Microsoft.VisualStudio.TraceCollector, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
        <Configuration>
          <CodeCoverage>
            <ModulePaths>
              <Include>
                <!-- Do not specify any includes. This will attempt to include all binaries -->
              </Include>
              <Exclude>
                <!-- Exclude modules that aren't to be processed, by their name / path -->
                <ModulePath>.*Tests\.dll$</ModulePath> <!-- I put it here -->
              </Exclude>
            </ModulePaths>

            <UseVerifiableInstrumentation>True</UseVerifiableInstrumentation>
            <AllowLowIntegrityProcesses>True</AllowLowIntegrityProcesses>
            <CollectFromChildProcesses>True</CollectFromChildProcesses>
            <CollectAspDotNet>False</CollectAspDotNet>
            <!--
Additional paths to search for symbol files. Symbols must be found for modules to be instrumented.
If symbols are alongside the binaries, they are automatically picked up. Otherwise specify the here.
Note that searching for symbols increases code coverage runtime. So keep this small and local.

<SymbolSearchPaths>             
  <Path>C:\Users\User\Documents\Visual Studio 11\Projects\ProjectX\bin\Debug</Path>
  <Path>\\mybuildshare\builds\ProjectX</Path>
</SymbolSearchPaths>
-->
            <Functions>
              <Exclude>
                <Function>^std::.*</Function>
                <Function>^ATL::.*</Function>
                <Function>.*::__GetTestMethodInfo.*</Function>
                <Function>^Microsoft::VisualStudio::CppCodeCoverageFramework::.*</Function>
                <Function>^Microsoft::VisualStudio::CppUnitTestFramework::.*</Function>
                <Function>.*::YOU_CAN_ONLY_DESIGNATE_ONE_.*</Function>
              </Exclude>
            </Functions>
            <Attributes>
              <Exclude>
                <Attribute>^System.Diagnostics.DebuggerHiddenAttribute$</Attribute>
                <Attribute>^System.Diagnostics.DebuggerNonUserCodeAttribute$</Attribute>
                <Attribute>^System.Runtime.CompilerServices.CompilerGeneratedAttribute$</Attribute>
                <Attribute>^System.CodeDom.Compiler.GeneratedCodeAttribute$</Attribute>
                <Attribute>^System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute$</Attribute>
              </Exclude>
            </Attributes>
            <Sources>
              <Exclude>
                <Source>.*\\atlmfc\\.*</Source>
                <Source>.*\\vctools\\.*</Source>
                <Source>.*\\public\\sdk\\.*</Source>
                <Source>.*\\microsoft sdks\\.*</Source>
                <Source>.*\\vc\\include\\.*</Source>
              </Exclude>
            </Sources>
            <CompanyNames>
              <Exclude>
                <CompanyName>.*microsoft.*</CompanyName>
              </Exclude>
            </CompanyNames>
            <PublicKeyTokens>
              <Exclude>
                <PublicKeyToken>^B77A5C561934E089$</PublicKeyToken>
                <PublicKeyToken>^B03F5F7F11D50A3A$</PublicKeyToken>
                <PublicKeyToken>^31BF3856AD364E35$</PublicKeyToken>
                <PublicKeyToken>^89845DCD8080CC91$</PublicKeyToken>
                <PublicKeyToken>^71E9BCE111E9429C$</PublicKeyToken>
                <PublicKeyToken>^8F50407C4E9E73B6$</PublicKeyToken>
                <PublicKeyToken>^E361AF139669C375$</PublicKeyToken>
              </Exclude>
            </PublicKeyTokens>
          </CodeCoverage>
        </Configuration>
      </DataCollector>
    </DataCollectors>
  </DataCollectionRunSettings>
</RunSettings> 
```

现在的问题是，只要我在 TEST\Test 设置菜单中检查我的 .runsettings 文件，我就会看到代码覆盖率只分析了我的解决方案中的许多程序集之一。

即使我删除线

```
 <ModulePath>.*Tests\.dll$</ModulePath> <!-- I put it here --> 
```

只分析一个组件。我想避免将所有程序集添加到包含列表中，我只需要排除所有测试程序集。

**为什么 .runsettings 使代码覆盖率只能看到我的 VS 解决方案中的一个程序集？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-17T20:01:26.260

[问题是时期](https://stackoverflow.com/a/16616574/1045767)。出于某种原因，RegEx 对此感到窒息。您可以通过转义句点来绕过它，如下所示：

```
<ModulePaths>
    <Include>
        <ModulePath>.*MyCompany\.Namespace\.Project\.dll$</ModulePath>
    </Include>
    <Exclude>
        <ModulePath>.*ThirdParty\.Namespace\.Project\.dll$</ModulePath>
    </Exclude>
</ModulePaths> 
```

此外，空包含是有效的，并暗示所有模块都包括在内。微软提供的示例状态的评论是：

```
<!--
About include/exclude lists:
Empty "Include" clauses imply all; empty "Exclude" clauses imply none.
Each element in the list is a regular expression (ECMAScript syntax).
See http://msdn.microsoft.com/library/2k3te2cs.aspx.
An item must first match at least one entry in the include list to be included.
Included items must then not match any entries in the exclude list to remain included.
--> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-12T01:39:33.393

在相关的说明中，我遇到了这篇文章，因为我有点清楚地考虑了包含和排除路径的正则表达式性质。对于我的 WPF 应用程序，我想排除 Caliburn.Micro 上的覆盖率分析。所以我写了

```
<ModulePath>Caliburn.Micro.dll</ModulePath> 
```

显然，这段时间让我很困惑。这个问题不受这个问题的困扰，但我敢打赌，我不是唯一一个忽视这个简单事实的人。对于任何其他读者，还请注意 * 不是通配符 - 它是正则表达式“任意数量”运算符。你不想要`*.Caliburn`，而是`.*Caliburn`这样这个简单的语句解决了我的问题：

```
<ModulePath>.*Caliburn.*</ModulePath> 
```

因为它正在寻找一个路径，而不仅仅是一个模块名称，你需要在模块前面的 .* 来忽略它——也就是说，你想在任何给定的文件路径上忽略它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-03-20T08:11:15.157

因为我在其他任何地方都找不到这个答案，而这只是花了我一段时间才弄清楚，`ModulePath`这是完整的路径，你可能在路径的其他地方匹配你的模式。

例如，如果您有一个 project`Foo`和一个 project `Foo.Tests`，并且它们被构建到自己的目录中，那么您最终会得到`Foo.Tests\bin\Release\Foo.dll`and `Foo.Tests\bin\Release\Foo.Tests.dll`。这是测试程序集将引用的 dll，因此这是使用的路径。`Foo\bin\Release\Foo.dll`不被测试程序集直接引用。

如果您尝试排除`.*tests.*`它，它将匹配两条路径并且不产生覆盖。

为了只排除文件名中带有“test”的程序集，忽略它们的路径，我使用了

```
<Exclude>
  <ModulePath>.*\\[^\\]*test[^\\]*\.dll</ModulePath>
</Exclude> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-28T08:55:23.200

我在可靠地工作时遇到了各种各样的问题`<ModulePaths>`（使用 ASP.NET Core 2.1）。

最后我发现使用它`<Sources>`更简单，更可靠，并且完全按照我的需要工作。您仍然可以利用有关使用正则表达式的建议。

我包括我的解决方案路径，并排除了我所有测试项目所在的 \tests 子文件夹。RunSettings xml 文件中的 CodeCoverage 元素示例：

```
<CodeCoverage>
  <Sources>
    <Include>
      <Source>.*\\My\.Solution\.Name\.Space\\.*</Source> <!-- ie: include *\My.Solution.Name.Space\* -->
    </Include>
    <Exclude>
      <Source>.*\\My\.Solution\.Name\.Space\\Tests\\.*</Source> <!-- ie: exclude *\My.Solution.Name.Space\Tests\* -->
    </Exclude>
  </Sources>
  <!-- removed for brevity -->
<CodeCoverage> 
```

查看更多信息：[在 MS Docs 上自定义代码覆盖率](https://docs.microsoft.com/en-us/visualstudio/test/customizing-code-coverage-analysis?view=vs-2017)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-28T09:14:07.470

不幸的是，我无法让其他答案为我工作，但我得到了这个工作，根据[https://msdn.microsoft.com/en-us/library/jj159530.aspx](https://msdn.microsoft.com/en-us/library/jj159530.aspx)：

```
<ModulePath>.*\\MyProject\.Test\.dll$</ModulePath> 
```

# spring - 在已配置的 spring OUTH 和 usernamepassword 令牌认证系统中添加记住我功能

> ID：14458249
> 
> 赞同：0
> 
> 时间：2013-01-22T12:10:26.897
> 
> 标签：spring, spring-security

我有以下弹簧安全配置。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<!-- For S2OAuth endpoints -->
<http   pattern="/oauth/token" 
        create-session="stateless" 
        authentication-manager-ref="clientAuthenticationManager" 
        entry-point-ref="oauthAuthenticationEntryPoint"
        xmlns="http://www.springframework.org/schema/security">
    <intercept-url pattern="/oauth/token" access="IS_AUTHENTICATED_FULLY" />
    <anonymous enabled="false" />
    <http-basic entry-point-ref="oauthAuthenticationEntryPoint" />
    <!-- include this only if you need to authenticate clients via request parameters -->
    <custom-filter ref="clientCredentialsTokenEndpointFilter" before="BASIC_AUTH_FILTER" />
</http>

<http use-expressions="true">
    <!-- Authentication policy -->
    <form-login login-page="/signin" login-processing-url="/signin/authenticate" authentication-failure-url="/signin?error=1" />
    <logout logout-url="/signout" delete-cookies="JSESSIONID" />
    <!-- Remember Me -->
    <remember-me services-ref="rememberMeServices" key="myRememberMeKey" />
    <!-- Authorization policy definition: TODO consider replacing with @Secured on @Controllers -->
    <intercept-url pattern="/" access="permitAll" />
    <intercept-url pattern="/favicon.ico" access="permitAll" />
    <intercept-url pattern="/members/**" access="permitAll" />
    <intercept-url pattern="/groups/**" access="permitAll" />
    <intercept-url pattern="/pubsub/**" access="permitAll" />
    <intercept-url pattern="/resources/**" access="permitAll" />
    <intercept-url pattern="/signup" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />   
    <intercept-url pattern="/signin" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <intercept-url pattern="/signin/*" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <intercept-url pattern="/reset" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <!-- TODO this would probably be better mapped to simply /invite?token={token} but not able to vary security policy here based on presence of a request parameter.  Consider @Secured on @Controller. -->               
    <intercept-url pattern="/invite/accept" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <!-- TODO this should be restricted to admin users only -->
    <intercept-url pattern="/admin/**" access="permitAll" />           
    <intercept-url pattern="/**" access="isAuthenticated()" requires-channel="#{environment['application.secureChannel']}" />
    <custom-filter ref="resourceServerFilter" before="EXCEPTION_TRANSLATION_FILTER" />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="usernamePasswordAuthenticationProvider" />
</authentication-manager>

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.UnanimousBased" xmlns="http://www.springframework.org/schema/beans">
    <constructor-arg>
        <list>
            <bean class="org.springframework.security.oauth2.provider.vote.ScopeVoter" />
            <bean class="org.springframework.security.access.vote.RoleVoter" />
            <bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
        </list>
    </constructor-arg>
</bean>

<bean id="jdbcRememberMeRepository" class="com.springsource.greenhouse.rememberme.JdbcRememberMeRepository" xmlns="http://www.springframework.org/schema/beans"/>
<bean id="coreUserDetailsService" class="com.springsource.greenhouse.rememberme.RememberMeUserDetailsService" xmlns="http://www.springframework.org/schema/beans"/>

<bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices" xmlns="http://www.springframework.org/schema/beans">
  <property name="tokenRepository" ref="jdbcRememberMeRepository" />
  <property name="userDetailsService" ref="coreUserDetailsService" />
  <property name="key" value="myRememberMeKey" />
  <property name="alwaysRemember" value="true" />
</bean>

<!-- For S2OAuth endpoints -->
<authentication-manager id="clientAuthenticationManager" xmlns="http://www.springframework.org/schema/security">
    <authentication-provider user-service-ref="clientDetailsUserService" />
</authentication-manager>

<beans:bean id="clientDetailsUserService" class="org.springframework.security.oauth2.provider.client.ClientDetailsUserDetailsService">
    <beans:constructor-arg ref="clientDetails" />
</beans:bean>

<beans:bean id="oauthAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
    <beans:property name="realmName" value="greenhouseApi" />
</beans:bean>

<beans:import resource="security-oauth-provider.xml" />

 </beans:beans> 
```

当我勾选 remember-me 复选框时，我看到我的 remember-me 数据库已填充，如快照所示。现在我关闭浏览器并尝试访问需要登录的 url。我可以看到页面。现在在这里，我很困惑我是因为登录还是因为记住我而能够看到该页面。其次，我在记住我的数据库表中看到最后日期没有更新。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:37:19.670

重新启动浏览器是不够的。要测试记住我的功能，您需要确保您的会话已过期。如果**lastUsed**未更新，则表示未使用记住我功能。在您的情况下，HTTP 会话处于活动状态。您需要停用它，并且有多种选择：

*   等待会话到期。提示：您可以设置最小会话超时，例如在 web.xml 中设置 1 分钟。
*   或删除会话 cockie（不要删除您域的所有 cookie，记住我也使用 coockie）
*   或停止您的应用程序服务器，然后清理它保存会话数据的目录并重新启动它。对于 tomcat，它是 tomcat_root/work。

在 web.xml 中将会话超时值设置为 1 分钟：

```
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

# jquery - 通过ajax的jQuery datepicker问题

> ID：14458251
> 
> 赞同：0
> 
> 时间：2013-01-22T12:10:44.200
> 
> 标签：jquery, datepicker

我的日期选择器有问题，由于某种原因，第一次加载日期选择器工作正常，让我选择日期，但是当我点击刷新（通过 ajax）时，日期选择器区域被刷新，但我无法使用日期选择器. 反正他们在附近吗？

我尝试使用不同的 id 并删除旧元素但没有多大成功：/

我在 php 中有一个显示日期的函数，在文件“datefunction.php”中

```
 function getDateInfo()
{
     $date = $_GET['date'];

     $html = '<script> 
        $(document).load(function() {
        $("#dt").datepicker(\'destroy\');
        $("#dt").remove();

        var mydate = $("#dt1").datepicker({ dateFormat: "dd-mm-yy" });
                $("#dt1").click(function(){
                     mydate.datepicker("show");
                     });     
                });
            });</script>
                <label>Date1:</label>
          <input type="text" name="dt"  id="dt1" maxlength="10" size="12" value="' . $date . '" readonly="true" />';

     return $html;
}

echo getDateInfo(); 
```

我有一个名为“dates.php”的页面

```
<script src="/script/jquery.js" type="text/javascript"></script>
<script type='text/javascript' src='/script/jquery-ui-1.8.9.custom.min.js'></script>
<script type='text/javascript' src='/script/jquery.datePicker.js'></script>
<script>
var bustcachevar=1; //bust potential caching of external pages after initial request? (1=yes, 0=no)
var bustcacheparameter="";

function ajaxpage(url, containerid, requesttype){
    var page_request = false
    if (window.XMLHttpRequest) // if Mozilla, Safari etc
        page_request = new XMLHttpRequest()
    else if (window.ActiveXObject){ // if IE
        try {
            page_request = new ActiveXObject("Msxml2.XMLHTTP")
        } 
        catch (e){
            try{
                page_request = new ActiveXObject("Microsoft.XMLHTTP")
            }
            catch (e){}
        }
    } else  return false
    page_request.onreadystatechange=function(){
        loadpage(page_request, containerid)
    }

    if (requesttype=='get'){
        if (bustcachevar) bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime()
        page_request.open('GET', url+bustcacheparameter, true)
        page_request.send(null)
    } else if (requesttype=='post') {
        var poststr = "mytextarea1=" + encodeURI( document.getElementById("mytextarea1").value ) + "&mytextarea2=" + encodeURI( document.getElementById("mytextarea2").value );
        page_request.open('POST', url, true);
        page_request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        page_request.setRequestHeader("Content-length", parameters.length);
        page_request.setRequestHeader("Connection", "close");
        page_request.send(parameters);
    };
}

function loadpage(page_request, containerid){
    if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1))
    document.getElementById(containerid).innerHTML=page_request.responseText
}
$(document).ready(function() {
                var mydate = $("#dt").datepicker({ dateFormat: "dd-mm-yy" });
                $("#dt").click(function(){
                     mydate.datepicker("show");
                     });     
                });
</script>

<?php 
$date = "05-06-2009";
echo "<div id='datearea'><label>Date:</label>
          <input type='text' name='dt' id='dt' maxlength='10' size='12' value='" . $date . "' readonly='true' /></div>";
echo "<a href='#' onclick='javascript:ajaxpage(\"datefunction.php?date=02-04-1999\", \"datearea\", \"get\");'>update</a>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:14:29.583

你应该解决这个问题，改变这个：

```
$("#dt").click(function(){ 
```

对此：

```
$("#dt").on('click', function(){ 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:15:52.870

因为 datepicker() 将无法找到动态添加的元素......要么你必须在 ajax 成功函数之后调用 datepicker

```
$('#yourInoutID').datepicker(); 
```

或者

做这个

```
$(document).find('#yourInoutID').datepicker(); 
```

**更新**

在你的情况下，那将是

```
 $(document).on('click','#dt',function(){
                 mydate.datepicker("show");
                 });     
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:18:41.833

这是因为，当*页面加载*时，***JQuery*** **将*所有**事件和函数添加到 DOM 元素**中，但是当**通过 Ajax 加载 DOM**的元素时，它**从不添加事件**。为此，我使用了 JQuery 的**[LiveQuery](http://docs.jquery.com/Plugins/livequery)**插件，它将事件添加到 DOM，即使它们是在通过 AJAX 或其他方式加载 DOM 之后添加的。

```
$("#dt").livequery('click', function(event) { 
    //CODE FOR DATE PICKER 
}); 
```

# php - 按下提交按钮后如何激活fancybox或如何让用户在提交后使用fancybox显示注册屏幕

> ID：14458252
> 
> 赞同：1
> 
> 时间：2013-01-22T12:10:47.753
> 
> 标签：php, javascript, jquery, html

所需操作：用户将填写 html 表单，当按下提交按钮时，我想验证用户类型，如果它是访客，那么它应该显示一个花式框（弹出）屏幕来注册该用户，因为我不想与来宾用户一起保存值。我在问题中提到的代码很好，但我如何在验证用户后激活 FANCYBOX 屏幕。

我在尝试

```
if($_SESSION['FIRST_NAME']=="Guest")
{
// here I want the code to show the signup.php page
print '<a id="loginframe" href="Signup.php">Sign Up here</a>';
} 
```

我将如何激活fancybox 屏幕，因为我不想显示链接，而是使用signup.php iframe 激活了fancybox。（fancybox 工作正常）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:18:12.053

如果可能，我建议您在这种特殊情况下避免使用 iframe。

我要做的是使用 AJAX 提交表单。这样，页面将不会被重新加载，并且您将拥有一个可以触发 Fancybox 的 js 回调函数。（[Jquery.ajax](http://api.jquery.com/jQuery.ajax/)，[jQuery 表单](http://malsup.com/jquery/form/)）

以下是如何以编程方式触发 Fancybox：

[如何使用内联 div 以编程方式触发 fancybox？](https://stackoverflow.com/questions/5811415/how-to-programatically-trigger-fancybox-with-an-inline-div)

我希望这有帮助。

# amazon-web-services - Managing AWS Storage Gateway snapshots via API

> ID：14458258
> 
> 赞同：0
> 
> 时间：2013-01-22T12:11:03.710
> 
> 标签：amazon-web-services, aws-storage-gateway

I'm trying to write a tool which manages Amazon AWS snapshots automatically according to some very simple rules. These snapshots are created on a schedule set up in Amazon Storage Gateway, and show up as you'd expect in the web interface for that tool.

The Storage Gateway API only has operations for snapshots as far as the snapshot schedule goes. EC2 is the API which talks about snapshots. The problem is that if I DescribeSnapshots through that API I see many many hundreds of snapshots, but none of them have volume IDs which match the volume IDs of the snapshots created from Storage Gateway. They're just random public snapshots which I'm not interested in.

So I guess Storage Gateway snapshots are different somehow, but is there a way to use any of Amazon's APIs to list and manipulate them?

EDIT: Interestingly, they do show up in the EC2 web control panel.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:55:40.060

Here's a top tip: the snapshots are there, just make sure you're looking for them using the right function. In this case, my novitiate in Clojure is still in effect and I tried to use `contains?` to search for an item in a sequence. Again. But it doesn't work like that, it looks for keys in collections which means over sequences it wants a number and will tell you if there's an item at that index or not. Even more fun, pass it a sequence and a string and it won't bat an eyelid, it just says `false`.

Oh and Amazon's not always consistent with capitalisation of volume IDs either, so make sure you lowercase everything before you compare it. That bit's actually relevant to AWS rather than me stubbornly misinterpreting the documentation of a core function.

# r - 生成固定度数小世界网络

> ID：14458261
> 
> 赞同：1
> 
> 时间：2013-01-22T12:11:14.167
> 
> 标签：r, social-networking

我想通过改变重新布线的概率来创建小世界网络（Watts 和 Strogatz）的不同变体，但我希望有一个固定的度数，而不是平均度数。

有没有办法做到这一点？

我努力了

```
watts.strogatz.game(1, 100, 10, 0.1) 
```

这应该给出 10 的度数。但如果我不想要多个边缘和循环，那么之后

```
simplify(graph) 
```

我得到度数小于 10 的边缘。

# android - 仅在滚动上的惰性适配器

> ID：14458262
> 
> 赞同：1
> 
> 时间：2013-01-22T12:11:16.357
> 
> 标签：android, image, listview, lazy-loading

请原谅我的英语......我是法国人:)

我写这篇文章是因为我的 Android 应用程序有一点问题！我有一个带有图像和文本的列表视图，我只想在用户看到这些项目时加载图像。

**例如**：

*   我们在列表视图中有 1000 个项目
*   用户滚动并显示项目 52 到项目 57。
*   我想为那些项目加载图像
*   我想卸载（释放内存）其他项目

我清楚了吗？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:32:19.527

按照其他人的建议使用lazyLoader。此外，使用手势检测器/监听器。不要在用户投掷时调用 ImageLoaders 的 getImage/Bitmap 方法来获取图像。

**你怎么能这样做？**
在手势监听器方法的 onFling 中设置一个布尔值，并相应地重置它。

**你有什么成就？**
当用户执行投掷操作时，您会跳过下载图像。

**在 700 毫秒的延迟后**替代累积请求和下载。**使用 FIFO 集合，集合的最大大小将等于可见项目的数量。如果用户滚动，则重置（进一步延迟）下载请求。**

 **我更喜欢第一种方法。如果我有时间会发布一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:17:03.313

使用lazyLoader的概念，因为你也必须添加惰性加载器的jar文件

在 listview 中有属性，因为 smoothscroll 将其设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:19:21.450

您应该创建一个自定义列表视图适配器，您在互联网上有很多示例，例如：[异步图像列表视图](http://www.technotalkative.com/android-asynchronous-image-loading-in-listview/)或多[线程性能](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)或线程：在列表视图[中加载异步图像](https://stackoverflow.com/questions/12933783/load-asynchronous-images-in-listview)**

# java - 重命名查询字符串参数（如果存在）

> ID：14458263
> 
> 赞同：0
> 
> 时间：2013-01-22T12:11:16.377
> 
> 标签：java, rewrite, tuckey-urlrewrite-filter

我正在尝试使用[Tuckey 的 UrlRewriteFilter](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#install)重命名查询字符串参数（如果存在）。我想将“foo”重命名为“bar”。

例子：

*   `/hello/hey/?foo=123`应该`/hello/hey/?bar=123`

*   `/nascar/?a=b&foo=lol`应该`/nascar/?a=b&bar=lol`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:26:02.750

尝试这个：

```
<urlrewrite>

    <rule>
       <from>^(.*)(\?|&)foo=(.*)$</from>
       <to type="redirect">$1$2bar=$3</to>
    </rule>

</urlrewrite> 
```

# php - Ajax 不发布 nicEdit 内容

> ID：14458264
> 
> 赞同：1
> 
> 时间：2013-01-22T12:11:29.440
> 
> 标签：php, ajax

我正在使用[nicEdit](http://www.nicedit.com/download.php)并使用 AJAX 发布数据

```
<textarea rows="" cols="" name="caption" id="caption"></textarea>

$.ajax({
        url: 'submit-gallery.php',
        type: 'POST',
        data: formData,
        async: false,
        success: function (data) {
            $('#progress').hide();
            $('#response_li').show();
            var json = $.parseJSON(data);
            if (json.result == 1) {
                $('#response').html('Upload successfully');
                $('#gallery-form')[0].reset();
            } else {
                $('#response').html('Unable to upload');
            }
            $('#response_li').fadeOut(6000);
        },
        cache: false,
        contentType: false,
        processData: false
    });
    return false; 
```

但是 textarea 的值没有发布：这里的**标题**是 textarea 的名称和 ID

在检查元素上我发现

```
<div class=" nicEdit-main " contenteditable="true" style="width: 347px; margin: 4px; min-height: 45px; overflow: hidden;"> 
```

![在此处输入图像描述](../Images/369f8fd932f579b4db09abf0facadc4a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:45:50.517

好的，我用标准表单帖子替换了 AJAX 帖子逻辑，现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:26:48.497

尝试使用获取 textarea 值

```
var caption=$("#caption").html(); 
```

然后将其附加到表单数据中，并捕获发布的数据。

# c# - 登录asp.net后如何检索当前用户的用户名

> ID：14458272
> 
> 赞同：1
> 
> 时间：2013-01-22T12:11:51.093
> 
> 标签：c#, asp.net

我需要在登录后获取用户当前名称。我需要在页面中显示该名称，例如**Welcome user**。请帮助我，我当前的代码如下

```
protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["con1"].ConnectionString);
        con.Open();
        SqlCommand cmdr = new SqlCommand("Select name,password From registration", con);
        SqlDataReader dr = cmdr.ExecuteReader();
        while (dr.Read())
        {
            if (txt_name.Text == dr[0].ToString() && txt_pass.Text == dr[1].ToString())
            {
                Response.Redirect("logout.aspx");
            }
            else
            {
                label4.Text ="Invalid Username/Password";
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:25:46.870

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["con1"].ConnectionString);
    con.Open();
    SqlCommand cmdr = new SqlCommand("Select name,password From registration", con);
    SqlDataReader dr = cmdr.ExecuteReader();
    while (dr.Read())
    {
        if (txt_name.Text == dr[0].ToString() && txt_pass.Text == dr[1].ToString())
        {
            Session["UserName"]=dr[0].ToString(); // OR Session["UserName"]=txt_name.Text;
            Response.Redirect("logout.aspx");
        }
        else
        {
            label4.Text ="Invalid Username/Password";
        }
    } 
```

}

您可以在 HTML 中获取会话值（如果您在应用程序中使用它）

```
<div>
Welcome <%=HttpContext.Current.Session["UserName"]%>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:13:43.890

如果您使用的是[ASP.NET 成员资格](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)：

```
string userName = Membership.GetUser().UserName 
```

但是，显然您没有使用它（我强烈推荐）。`logout.aspx`当用户成功提供他的用户名和密码时，你为什么会重定向到？

除此之外，您在查询中根本没有使用提供的信息。

```
SqlCommand cmdr = new SqlCommand("Select name,password From registration", con); 
```

所以你应该使用参数来过滤正确的记录：

```
using(var cmdr = new SqlCommand("Select name,password From registration where name=@name and password=@password", con))
{
    cmdr.Parameters.AddWithValue("@name", userName);
    cmdr.Parameters.AddWithValue("@password", password);
    if(cmdr.ExecuteReader().HasRows)
    {
        // user + password correct
    }
    else
    {
        // user or password incorrect
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T12:20:10.247

成员资格提供程序中的 Membership.GetUser().UserName。在任何情况下，您都不应运行那里的代码。它要求破解。您不应该将密码加载到内存中，并且由于您循环所有用户而获得更多用户，您将遇到性能问题！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T12:25:36.293

如果会话存在，您可以将用户名存储在会话对象中并在应用程序的任何位置获取用户名

但是你也必须更新你的查询，你打电话的方式不是好方法

```
protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["con1"].ConnectionString);
        con.Open();
        SqlCommand cmdr = new SqlCommand("Select name From registration where name = @username and password = @password", con);
        cmdr.Parameters.Add("@username", txt_name.Text.trim());
        cmdr.Parameters.Add("@password", txt_pass.Text.trim());

        SqlDataReader dr = cmdr.ExecuteReader();

        if(cmdr.ExecuteReader().HasRows)
        {
             Response.Redirect("logout.aspx");
             Session["userName"] = txt_name.Text.trim();
        }
        else{
        //Error page path
        }               
        //DOn't forget to close the connection when you Open it
      con.Close();
    } 
```

您应该从一些教程中了解更多信息：

1.  [http://csharp-station.com/Tutorial/AdoDotNet/Lesson01](http://csharp-station.com/Tutorial/AdoDotNet/Lesson01)
2.  [MSDN](http://msdn.microsoft.com/en-us/library/e80y5yhx%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T12:17:50.550

您应该能够从`User`代码隐藏的属性中获取用户的身份。

```
myLabel.Text = User.Identity.Name; 
```

完整的命名空间等是`HttpContext.Current.User.Identity.Name`.

`HttpContext.User`属性参考：http: [//msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T12:19:05.027

将用户名放入会话中

```
Session["username"] = dr[0].ToString(); 
```

然后在另一页

```
if Session["username"] != null
{
  String username = Session["username"].ToString();
}
else
{
  Page.Redirect("login.aspx");
} 
```

您可以检查每个不同的页面

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-22T12:20:33.260

理想情况下，您应该使用内置的 ASP.NET 表单身份验证 - 请参阅[本文](http://bradkingsley.com/securing-asp-net-pages-forms-authentication-c-and-net-4/)以快速入门。来到您的问题，成功登录后，您应该使用诸如

```
FormsAuthentication.RedirectFromLoginPage(txt_name.Text, true); 
```

这会将用户名存储到身份验证 cookie 中，随后可以使用`User.Identity.Name`您可以在页面中的任何位置使用的代码来检索该 cookie。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-22T12:16:50.177

..如果您只想使用该`User`对象：

```
var username = User.Identity.Name; 
```

# mysql - 如何使用 LINQPad + IQ Driver + MySQL 引用标识符？

> ID：14458276
> 
> 赞同：8
> 
> 时间：2013-01-22T12:12:11.107
> 
> 标签：mysql, linqpad

我正在使用一个由外部方设计的相当可怕的模式，它包含一个名为的表`order`，因此当我在 LINQPad 中调用一个引用该表的查询时，我得到一个 SQL 语法错误。

我知道如何在 MySQL 中引用标识符，但我看不到如何使用 LINQPad 和 IQ 驱动程序来执行此操作。看起来[这](http://www.mindscapehq.com/forums/thread/4249)似乎取决于驱动程序的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T20:28:50.427

您是否尝试过使用反引号 (`) 来引用表名？

```
select * from `order` 
```

如果这不起作用，您可能必须[按照此处所述](http://www.mindscapehq.com/Help/LightSpeed/html/P_Mindscape_LightSpeed_LightSpeedContext_QuoteIdentifiers.htm)配置 quoteIdentifiers 。

# objective-c - 从 NSMutableArray 加载 NSDictionary？

> ID：14458284
> 
> 赞同：1
> 
> 时间：2013-01-22T12:12:33.227
> 
> 标签：objective-c, nsarray, nsdictionary, nsuserdefaults

我正在尝试从数组中访问字典。

我像这样将对象添加到字典中

```
[_recentDictionary setObject:videoString forKey:@"video"];
[_recentDictionary setObject:imageString forKey:@"image"];
[_recentDictionary setObject:titleString forKey:@"title"];
[_recentDictionary setObject:descriptionString forKey:@"desc"]; 
```

然后我将字典添加到这样的数组中

```
for (int i = 0; i<10; ++i)
{
      if (i == 0) {
            [self.recentArray addObject:_recentDictionary];
      }
} 
```

然后通过 nsuserdefault 保存数组

```
_savedArray = [NSUserDefaults standardUserDefaults];
[_savedArray setObject:self.recentArray forKey:@"recentArray"];
[_savedArray synchronize]; 
```

在另一个视图中调用上述内容

```
NSUserDefaults *savedDefaults = _showListView.savedArray;

NSMutableArray *savedArray = [[NSMutableArray alloc]initWithObjects:[savedDefaults objectForKey:@"recentArray"], nil]; 
```

但我不知道如何访问这个数组中的字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:19:24.757

检索字典中的一个一个数组元素。

`NSDictionary *dict = [savedArray objectAtIndex:0];`

然后根据您的要求访问字典（dict）的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:17:10.157

您可以访问字典

```
recentDictionary = [savedArray objectAtIndex:0]; 
```

# ember.js - 如何从另一个框架向 Ember 触发事件

> ID：14458287
> 
> 赞同：17
> 
> 时间：2013-01-22T12:12:43.957
> 
> 标签：ember.js

我们使用的是 ember 的 pre4 版本。

我们有一个与 ember 并行工作的框架 (SignalR)，它处理对我们应用程序的实时通知。在旧版本的 ember 中，我们能够访问路由器/控制器的全局引用。但是对于新版本的 Ember，这不再是可能的了。（这很好）我们尝试了不同的方法，例如在顶部路由中设置全局控制器：

```
setupController: function(){
    app.appController = this.controllerFor('app');
} 
```

并向这个控制器发送一个事件，它会像这样冒泡到路由：

```
notificator.update = function (context) { 
    app.appController.send('notificationOccured', context);
}); 
```

但这感觉就像与刚刚删除全局引用的 Ember 团队合作。

所以现在要问一个大问题：有没有更好的方法从 Ember 外部访问路由器或控制器？最好使用上下文向其中一个发送事件。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-24T18:34:39.257

> 所以现在要问一个大问题：有没有更好的方法从 Ember 外部访问路由器或控制器？最好使用上下文向其中一个发送事件。

是的。这听起来很适合 ember 仪表模块。让适当的控制器订阅 SignalR 事件，然后在您的应用处理实时通知时触发它们。

首先，向 ApplicationController 添加一个方法来处理更新。如果此处未定义，则事件将冒泡到路由器。

```
App.ApplicationController = Ember.Controller.extend({
  count: 0,
  name: 'default',
  signalrNotificationOccured: function(context) {
    this.incrementProperty('count');
    this.set('name', context.name);
  }
}); 
```

接下来，通过订阅`signalr.notificationOccured`事件来设置您的 ApplicationController。使用 before 回调来记录事件并将其有效负载发送到控制器。

```
App.ApplicationRoute = Ember.Route.extend({
  setupController: function (controller, model) {
    Ember.Instrumentation.subscribe("signalr.notificationOccured", {
      before: function(name, timestamp, payload) {
        console.log('Recieved ', name, ' at ' + timestamp + ' with payload: ', payload);
        controller.send('signalrNotificationOccured', payload);
      },
      after: function() {}
    });
  }
}); 
```

然后从您的 SignalR 应用程序中，用于`Ember.Instrumentation.instrument`将有效负载发送到您的 ApplicationController，如下所示：

```
notificator.update = function (context) { 
  Ember.Instrumentation.instrument("signalr.notificationOccured", context);
}); 
```

我在这里发布了一个带有模拟 SignalR 通知的工作副本：http: [//jsbin.com/iyexuf/1/edit](http://jsbin.com/iyexuf/1/edit)

可以在[此处](http://emberjs.com/api/classes/Ember.Instrumentation.html)找到有关检测模块的文档，还可以查看[规范](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/tests/instrumentation_test.js)以获取更多示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T20:32:12.123

您可能不应该这样做，但这里有一种方法可以访问应用程序的控制器、视图、模型和路由器实例。当你的应用程序初始化时，控制器、视图、模型和路由器都注册在应用程序容器中`__container__`

```
APP.__container__.lookup('controller:foo').get('content');
APP.__container__.lookup('view:foo').get('templateName');
APP.__container__.lookup('router:main'); 
```

我认为你应该做的是封装对 Ember 内的 3rd 方库的调用，让 Ember 管理整个应用程序。请参阅[此尝试](http://lukemelia.github.com/jquery-ui-ember/docs/app.html)使 JQuery UI 可感知余烬

# internet-explorer - IE7 和 IE8 中的 Mootools hasClass 问题

> ID：14458288
> 
> 赞同：1
> 
> 时间：2013-01-22T12:12:44.753
> 
> 标签：internet-explorer, internet-explorer-8, mootools

我有一个带有联系面板的网站，可以在点击事件上滑动打开。这是一个 MooTools 脚本。它在除 IE7 和 IE8 之外的所有浏览器中测试正确。运行 IE8 和 IE7 模式的 IE9 中的开发人员工具包说这是因为

```
SCRIPT438: Object doesn't support property or method 'hasClass' 
```

[在此处](http://jenkinsconsultancy.com.au)查看下面的代码

```
$('contact-toggle').addEvent('click', function(event){
    event.stop();
     if(e.hasClass('active')) {
        closePanel();
       } else {
        openPanel(-380);
       }
}); 
```

关于如何解决这个问题的任何想法？

更新：这是整个 MooTools 脚本（根据下面的评论更新）...

```
window.addEvent('domready', function() {

var e = document.getElementById('info');
var contact_h = document.getElementById('contact-toggle-heading')   
var contact_i = document.getElementById('contact-toggle-icon');

function closePanel(){
      this.tween('margin-top',-50);
      this.removeClass('active');
      contact_i.setProperty('src', 'http://webiste.com.au/images/interface/arrow-up.png');
      contact_h.set('text','Contact');
      $$('.footer-header').removeClass('diminish');
}

function openPanel(panelHeight){
      e.tween('margin-top',panelHeight);
      e.addClass('active');
      contact_i.setProperty('src', 'http://website.com.au/images/interface/arrow-down.png');
      contact_h.set('text','Close');
      $$('.footer-header').addClass('diminish');
}

function timerPanel(){
    clearTimeout(timer);
    timer = (function(){ 
      closePanel();
    }).delay(5000);
}

$('contact-toggle').addEvent('click', function(event){
    event.stop();
     if(this.hasClass('active')) {
        closePanel();
       } else {
        openPanel(-380);
       }
});
}); //end script 
```

换`e`了`this`工作 - 但问题转移到了线上`e.tween('margint-top...`。我试图将事件对象传递给 openPanel 函数，但还没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:21:07.240

您应该使用 $('info') 而不是 document.getElementById。在 IE LTE 8 中，MooTools 不会扩展这些元素，这会导致错误。当您使用 $ 函数时，元素被扩展，然后 document.getElementById 也将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:19:15.557

是什么`e`？可能您应该使用`this`，因为在事件侦听器内部，`this === $('contact-toggle')`.

所以使用：`if (this.hasClass('active'))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:35:30.373

这里有很多问题。首先，您将真正受益于跟踪您的 Event 变量。您将其定义为事件，然后更改为 e，然后完全忽略它。

从这里开始，

```
//don't use document.getElementById it won't support methods like tween
var info = $('info')

$('contact-toggle').addEvent('click', function(e){
     e.stop();

     if(info.hasClass('active')) {
        closePanel();
     } else {
        //if -380 is a connstant, there's no need to pass it like this, define it in your function
        openPanel();
     }
}); 
```

现在让我们处理这些

```
function closePanel(){
      info.tween('margin-top',-50);
      info.removeClass('active');
      contact_i.setProperty('src', 'http://webiste.com.au/images/interface/arrow-up.png');
      contact_h.set('text','Contact');
      $$('.footer-header').removeClass('diminish');
}

function openPanel(){
      var panelHeight = -380; //this should be probably be a computed property

      info.tween('margin-top',panelHeight);
      info.addClass('active');
      contact_i.setProperty('src', 'http://website.com.au/images/interface/arrow-down.png');
      contact_h.set('text','Close');
      $$('.footer-header').addClass('diminish');
} 
```

那应该让你开始。也考虑使用 Mootools 类，它们很棒，真的让事情变得更容易。

# java - 如何在 Selenium 中使用自定义 Firefox 配置文件？(Java) (并通过 HTML 授权窗口)

> ID：14458289
> 
> 赞同：7
> 
> 时间：2013-01-22T12:12:54.113
> 
> 标签：java, firefox, selenium

如何通过自定义 Firefox 配置文件将 Selenium 与 Java 结合使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T12:19:17.153

这是我的配置：

```
Firefox version: 12
Selenium version: 2.25
Language: Java
Platform: MacOS 
```

1.  打开终端
2.  类型：（`/Applications/Firefox.app/Contents/MacOS/firefox-bin -p`根据需要更改路径）
3.  创建一个新的配置文件，将其保存在您希望的目录中..
4.  使用此配置文件启动 Firefox，添加任何附加组件，根据需要进行修改。
5.  在 Selenium 中，使用：

```
FirefoxBinary binary = new FirefoxBinary();  
File firefoxProfileFolder = new File("/Users/xxx/work/xxx/selenium/src/test/resources/firefoxprofile");
FirefoxProfile profile = new FirefoxProfile(firefoxProfileFolder);
profile.setAcceptUntrustedCertificates(true);
webDriver = new FirefoxDriver(binary, profile); 
```

再次在这里根据需要更改绝对路径。添加诸如 autoAuth 之类的附加组件以将 Firefox 中的 HTML 授权窗口传递给此配置文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-18T18:27:17.420

对于 Windows，要创建新的 Firefox 配置文件，请键入：

```
firefox -profilemanager 
```

在运行中将打开 Firefox 配置文件管理器。

假设您创建了一个名为 的配置文件`Selenium`，那么您可以使用以下代码：

```
ProfilesIni listProfiles = new ProfilesIni();
FirefoxProfile profile = listProfiles.getProfile("Selenium");
WebDriver driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-19T12:37:39.240

您不能使用 Selenium 通过 HTML 授权窗口。为此，您必须使用 Auto IT。AutoIT 为您提供了管理基于 Windows 的组件的平台。您可以从 Selenium WebDriver 调用 AUTO IT 脚本

# ios - 基于有序字符串的超集对 NSString 的 NSArray 进行排序

> ID：14458292
> 
> 赞同：6
> 
> 时间：2013-01-22T12:13:14.177
> 
> 标签：ios, objective-c, sorting, nsstring, nsarray

我有一个`NSArray`包含一些`NSString`对象的。例如：

```
NSArray *objects = @[@"Stin",@"Foo",@"Ray",@"Space"]; 
```

现在我需要根据以下字符串顺序对这个数组进行排序。

```
NSArray *sortOrder = @[@"John",@"Foo",@"Space",@"Star",@"Ray",@"Stin"]; 
```

所以答案应该是

```
NSArray *sorted = @[@"Foo",@"Space",@"Ray",@"Stin"]; 
```

我怎样才能做到这一点？

**答案：** 根据 dasblinkenlight 的已接受答案，我做了以下工作，并且效果很好。

```
NSMutableArray *objects = @[@"Star",@"Stin",@"Foo",@"Ray",@"Space",@"John"];
NSArray *sortOrder = @[@"John",@"Foo",@"Space",@"Star",@"Ray",@"Stin"];

[objects sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    int index1 = [sortOrder indexOfObject:obj1];
    int index2 = [sortOrder indexOfObject:obj2];

    if (index1 > index2)
        return NSOrderedDescending;
    if (index1 < index2)
        return NSOrderedAscending;
    return NSOrderedSame;
}]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:24:44.510

Create`NSComparator`持有对超集数组的引用，并通过比较`[superset indexOfObject:str]`两个字符串的调用结果来确定字符串的相对顺序。调用`sortedArrayUsingComparator:`传递一个实例`NSComparator`以获得所需的排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T12:37:56.200

dasblinkenlight 的解决方案会起作用，但像大多数编程问题一样，有多种方法可以解决它。这是一种这样的选择：

```
NSMutableArray *sorted = [NSMutableArray arrayWithCapacity:0];

[sortOrder enumerateObjectsUsingBlock:^(NSString *sortedString, NSUInteger idx, BOOL *stop) {
    if ([objects containsObject:sortedString]) {
        [sorted addObject:sortedString];
    }
}]; 
```

变量名称对应于原始问题中使用的变量名称。

这是有效的，因为枚举是按顺序发生的。因此，本质上，发生的事情是按照 指定的顺序对两个数组中存在的对象进行剔除`sortOrder`。

# android - 如何创建任务计划日历？

> ID：14458293
> 
> 赞同：0
> 
> 时间：2013-01-22T12:13:17.677
> 
> 标签：android, schedule, android-calendar

我需要创建一个日程日历，如日程课程。但我不知道如何开始。我如何创建具有小时数的设计以及与特定时间关联的任务？

任何人都有帮助我开始该项目的教程或文档？

我知道这不是关于编程的问题，但如果你能帮助我，我会非常感激。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:15:40.553

检查这个[calendar-scheduler-android](http://code.google.com/p/calendar-scheduler-android/)项目。这可能会提供一种方法来满足您的要求。

# build - 如何使用 SCons 在不同的环境中构建？

> ID：14458295
> 
> 赞同：2
> 
> 时间：2013-01-22T12:13:20.343
> 
> 标签：build, environment-variables, scons

我刚刚发现了 SCons，一个很棒的构建工具。

我需要在多个环境中构建我的项目，即使用不同的库路径并包含取决于机器的路径。

由于`SConstruct`所有 Python 都可用，我可以想象各种方法来实现这一点。一种可能性是拥有一个`SConstruct`脚本并实例化多个`Environment`对象。

```
envFoo = Environment()
envFoo.Append(CPPPATH = [...])

envBar = Environment()
envBar.Append(CPPPATH = [...]) 
```

然后以某种方式选择这些`Environment`对象之一，可能带有命令行参数`scons`。

有经验的 scons 用户的问题：这是要走的路吗？这样做最方便的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:36:10.283

这肯定会起作用，并且对于更简单的情况可能是一个很好的解决方案。我有一个更复杂的情况，我实际上使用 Python 类创建了一个 EnvironmentFactory，如下所示：

```
env = EnvironmentFactory.createEnv(cmdLineArgs) 
```

[另一个有用的 SCons 工具是使用本章](http://www.scons.org/doc/production/HTML/scons-user/c1818.html)所述的 ParseFlags()、ParseConfig() 和 MergeFlags() 从命令行选项“自动”填充环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:57:26.547

你可以这样做

```
envSelect = ARGUMENTS.get('env', "default")

if envSelect == "default":
    env = Environment()
elif envSelect == "env2":
    env = Environment(whatever you want to do here)
elif envSelect == "env3":
    env = Environment(whatever you want to do here)
else:
    env = Environment(whatever you want to do here) 
```

使用 ARGUMENTS.get 您可以在运行命令时指定默认值，`scons` 否则您确实`scons env=env2`希望这能回答您的问题

编辑：这是我正在处理的项目的一个片段，我想在 scons 运行时确定操作系统

```
import sys
import os
import glob
import subprocess
#Find the host Operating System
platform = sys.platform

if platform != "win32":
    env = Environment()
else:
    #Specify to compile in 32-bit mode for Visual Studio
    #This is needed as Qt libraries on Windows for Visual
    #Studio are 32-bit only
    env = Environment(TARGET_ARCH = 'x86')

#Get Qt directory as scons argument or use default setting
if platform != "win32":
    qtDir = ARGUMENTS.get('qt', '/usr/local/Trolltech/Qt-4.8.4/')
else:
    qtDir = ARGUMENTS.get('qt', 'C:\\Qt\\4.8.4\\') 
```

# javascript - 检查特定父 div 的所有子 div 中的值

> ID：14458298
> 
> 赞同：4
> 
> 时间：2013-01-22T12:13:25.223
> 
> 标签：javascript, jquery

在我的项目中。我正在尝试检查某个数字是否已经存在于`div`父 div 中存在的任何其他相邻的中。

```
 //generated dynamically using jQuery
  <div> //parent div
      //many div's
      //one of the child div is selected by the user.
  </div>
  <div> //another parent div
     //my function is checking one of these div's instead of the above, rarely
  </div> 
```

* * *

我使用了以下代码。但有时（很少）选择`div`我不想检查的另一个 parent 的子元素（我用 chrome 中的调试器检查过）。有时即使函数选择了正确的父 div，它也总是选择用户选择的同一个子 div 元素。

**jQuery**

```
function checkInGroup(){
    var selectedDiv = $('#' + _selectedDivId); //updated after engineer's comment
    selectedDiv.parent("div").children().each(function(){
        debugger;
        if(this !== selectedDiv[0]){ //selecting the same div
            var self = $(this);
            if(self.text() == _randomNumber){
                debugger; //never executing
                //do some function here
            }
        }
    });
} 
```

**[编辑：我不确定为什么我的代码在jsbin](http://jsbin.com/iviwej/1/edit)**中正常工作时无法正常工作。我需要检查为什么会这样.. 它总是检查同一个用户选择的 div？因此该函数没有进入 if 语句..

`debugger`if 语句中存在的which 永远不会执行。并且每个函数循环仅使用相同的选定 div 发生一次（因此该函数未进入 if 语句）

这是**[jsfiddle](http://jsbin.com/iviwej/17/edit)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:17:13.453

尝试：

```
 selectedDiv.parent("div").children().not(selectedDiv).each(function(){
   //your code 
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:18:24.837

$.each() 函数的实际签名为 $.each([Array], index, element)。在你的情况下：

```
function checkInGroup(){
    var selectedDiv = $('#' + _selectedDivId);
    $.each(selectedDiv.parent("div").children(), function(index, element){
        debugger;
        if($(element) !== selectedDiv){ //selecting the same div
            if($(element).text() == _randomNumber){
                //do some function here
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:21:57.617

使用[兄弟姐妹](http://api.jquery.com/siblings/)。

```
$('#' + _selectedDivId).siblings().each(function(){

}); 
```

更新：

selectedDiv id 实际上不是 div 它是按钮 id。那就是问题所在。请更改您的代码，如下所示。

```
 selectedDiv.parent("div").parent("div").find("button").each(function(){ 
```

[演示](http://jsbin.com/iviwej/18/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T12:19:04.543

`selectedDiv`在您的示例中可能是一个数组。

我不认为你可以像这样比较两个 jQuery 对象。

您可以考虑使用数据属性吗？

例如

```
var selectedDiv = $('#' + _selectedDivId);
selectedDiv.data('selected', true); 
```

然后

```
selectedDiv.parent("div").children().each(function(){
    debugger;
    if($(this).data('selected') !== true){ //selecting the same div
        if($(this).text() == _randomNumber){
            //do some function here
        }
    }
}); 
```

只需记住`selected`在取消选择 div 时将其设置为 false。

可能有一种更有效的方法可以做到这一点，但这应该可行。

# objective-c - 如何从组合 TIFF 中获取合适的 CGImage 用于显示比例

> ID：14458299
> 
> 赞同：4
> 
> 时间：2013-01-22T12:13:26.383
> 
> 标签：objective-c, macos, retina-display, nsimage

我在 Mac 项目中有两个 PNG。正常和@2x。Xcode 将这些组合成一个 TIFF，@2x 位于索引 0，@1x 位于索引 1。

对于当前显示比例，获得适当图像作为 CGImageRef 版本（与 Quartz 一起使用）的建议方法是什么？

我可以通过 CGImageSource 手动获取图像：

```
NSBundle *mainBundle = [NSBundle mainBundle];
NSURL *URL = [mainBundle URLForResource:@"Canvas-Bkgd-Tile" withExtension:@"tiff"];

CGImageSourceRef source = CGImageSourceCreateWithURL((__bridge CFURLRef)(URL), NULL);
_patternImage = CGImageSourceCreateImageAtIndex(source, 1, NULL);  // index 1 is @1x, index 0 is @2x
CFRelease(source); 
```

我也发现这是可行的，但我不确定这是否会在 Retina 显示器上返回 Retina 版本：

```
NSImage *patternImage = [NSImage imageNamed:@"Canvas-Bkgd-Tile.tiff"];
_patternImage = [patternImage CGImageForProposedRect:NULL context:nil hints:nil];
CGImageRetain(_patternImage); // retain image, because NSImage goes away 
```

这个问题的一个可接受的答案或者提供了一个解决方案，如何从组合的多分辨率 TIFF 中获得合适的 CGImage，或者解释为什么这里的第二种方法有效。或者需要进行哪些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:18:13.177

我选择回答“为什么这里的第二种方法有效”。

在自 2010 年以来发布的一个 WWDC 视频中，他们说：

**+[NSImage imageNamed:]**选择可用于当前显示的最佳图像表示对象。

所以很有可能你是在一个锁定的焦点上下文中调用这个类方法（例如在一个**drawRect:**方法或类似的方法中），或者你自己实际上调用了lockFocus。无论如何，结果是您获得了最合适的图像。但仅在调用**+[NSImage imageNamed:]**时。

编辑：在这里找到它：http: [//adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_213__introduction_to_high_resolution_on_os_x.pdf](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_213__introduction_to_high_resolution_on_os_x.pdf)

在幻灯片中搜索关键字“best”：“NSImage 自动选择最佳表示 […]”。

因此，您的第二个版本将在 Retina 显示器上返回 Retina 版本，您可以确定，它在文档中被宣传 [*]。

[*] 这只有在您提供有效的艺术品时才有效。

# android-videoview - Vitamio、VideoView 和 RTMPGW 问题

> ID：14458309
> 
> 赞同：1
> 
> 时间：2013-01-22T12:13:54.630
> 
> 标签：android-videoview

我正在尝试将 RTMPGW 作为我的应用程序的一部分，它通常在 Linux 中运行良好。我正在尝试使用 Vitamio 包播放流。下面是主要代码，取自 Vitamio Demo：

```
package io.vov.vitamio.demo;

import io.vov.vitamio.MediaPlayer;
import io.vov.vitamio.widget.MediaController;
import io.vov.vitamio.widget.VideoView;
import android.app.Activity;
import android.content.res.Configuration;
import android.net.Uri;
import android.os.Bundle;

public class VideoViewDemo extends Activity {

    private VideoView mVideoView;

    /* (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        if (!io.vov.vitamio.LibsChecker.checkVitamioLibs(this))
            return;

    setContentView(R.layout.videoview);
    mVideoView = (VideoView) findViewById(R.id.surface_view);
    mVideoView.setVideoURI(Uri.parse("http://172.16.1.182:8902/?r=rtmp://live.dtv.cubecdn.net:80/kdmobil/KanalD1&W=http://www.kanald.com.tr/Content/swf/Canliplayer6.swf?config=/Content/swf/Config.xml%26debug=false&p=http://www.kanald.com.tr&c=80"));
    mVideoView.setVideoQuality(MediaPlayer.VIDEOQUALITY_HIGH);
    mVideoView.setMediaController(new MediaController(this));
    mVideoView.requestFocus();
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        if (mVideoView != null)
            mVideoView.setVideoLayout(VideoView.VIDEO_LAYOUT_SCALE, 0);
        super.onConfigurationChanged(newConfig);
    }
} 
```

当我运行它时，RTMPGW（我在 Linux 中从终端运行）显示此错误：

```
processTCPrequest, Range request not supported 
```

..然后无所事事地坐在那里，什么都不做。

但是，当我使用带有此代码的常规 Android VideoView 时（在不同的项目中）：

```
package com.sample.videoviewexample;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class MainActivity extends Activity {
   private VideoView mVideoView;

   @Override
   public void onCreate(Bundle icicle) {
     super.onCreate(icicle);
     setContentView(R.layout.activity_main);
     mVideoView = (VideoView) findViewById(R.id.surface_view);
     mVideoView.setVideoURI(Uri.parse("http://172.16.1.182:8902/?r=rtmp://live.dtv.cubecdn.net:80/kdmobil/KanalD1&W=http://www.kanald.com.tr/Content/swf/Canliplayer6.swf?config=/Content/swf/Config.xml%26debug=false&p=http://www.kanald.com.tr&c=80"));
     mVideoView.setMediaController(new MediaController(this));
     mVideoView.requestFocus();
   }
} 
```

它连接到 RTMPGW 服务器并像这样开始流式传输......

```
Streaming on http://0.0.0.0:8902
processTCPrequest, Range request not supported
Connecting ... port: 80, app: kdmobil/KanalD1
1094.914 KB / 16.90 sec 
```

但是，当然，由于 Android MediaPlayer 本身不支持 Flash，它不会播放视频。

为什么 VideoView 可以连接到 RTMPGW 的服务器而 Vitamio 没有？

谢谢你的帮助，

担

# r - 按字母顺序排序时，字母“y”在“i”之后

> ID：14458314
> 
> 赞同：45
> 
> 时间：2013-01-22T12:14:11.210
> 
> 标签：r, locale, alphabetical-sort

使用函数`sort(x)`时，其中`x`是一个字符，字母“y”跳到中间，紧跟在字母“i”之后：

```
> letters
[1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t"
[21] "u" "v" "w" "x" "y" "z"

> sort(letters)
[1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "y" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[21] "t" "u" "v" "w" "x" "z" 
```

原因可能是我位于立陶宛，这是对字母的“立陶宛式”排序，但我需要正常排序。如何在 R 代码中将排序方法改回正常？

我在 Win7 上使用 R 2.15.2。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-22T12:21:45.563

您需要更改 R 正在运行的语言环境。为您的整个 Windows 安装（这似乎不是最佳的）或在 R 会话中通过以下方式执行此操作：

```
Sys.setlocale("LC_COLLATE", "C") 
```

您可以使用任何其他有效的语言环境字符串代替`"C"`那里，但这应该会让您回到`letters`您想要的排序顺序。

阅读`?locales`更多。

我想值得一提的是姊妹函数`Sys.getlocale()`，它查询语言环境参数的当前设置。因此你可以做

```
(locCol <- Sys.getlocale("LC_COLLATE"))
Sys.setlocale("LC_COLLATE", "lt_LT")
sort(letters)
Sys.setlocale("LC_COLLATE", locCol)
sort(letters)
Sys.getlocale("LC_COLLATE")

## giving:
> (locCol <- Sys.getlocale("LC_COLLATE"))
[1] "en_GB.UTF-8"
> Sys.setlocale("LC_COLLATE", "lt_LT")
[1] "lt_LT"
> sort(letters)
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "y" "j" "k" "l" "m" "n"
[16] "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "z"
> Sys.setlocale("LC_COLLATE", locCol)
[1] "en_GB.UTF-8"
> sort(letters)
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o"
[16] "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"
> Sys.getlocale("LC_COLLATE")
[1] "en_GB.UTF-8" 
```

这当然是@Hadley's Answer在安装**devtools**`with_collate()`后显示的更简洁的做法。

 *** * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-22T13:26:36.993

如果您想暂时这样做，请`devtools`提供以下`with_collate`功能：

```
library(devtools)
with_collate("C", sort(letters))
# [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
# [20] "t" "u" "v" "w" "x" "y" "z"
with_collate("lt_LT", sort(letters))
# [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "y" "j" "k" "l" "m" "n" "o" "p" "q" "r"
# [20] "s" "t" "u" "v" "w" "x" "z" 
```**

# xslt-2.0 - Saxon-ce 动态 xpath 评估

> ID：14458319
> 
> 赞同：0
> 
> 时间：2013-01-22T12:14:36.297
> 
> 标签：xslt-2.0, saxon, xpath-2.0

我正在尝试使用 xslt 2.0 在 Saxon-ce 中使用 ixsl:eval() 评估动态 xpath，但似乎无法正常工作。这是说明性的 XML

```
<things>
  <thing>
    <name>widget one</name>
    <number>10</number>
    <type>metal</type>
    <subtypes>
      <subtype>red<subtype>
    </subtypes>
  </thing>
  <thing>
    <name>widget two</name>
    <number>11</number>
    <type>wood</type>
    <subtypes>
      <subtype>red</subtype>
      <subtype>blue</subtype>
    </subtypes>
  </thing>
</things> 
```

以及我正在尝试评估的 xsl 2.0 样式表的一部分（各种参数由较大的 xsl 样式表的另一部分传递）

```
<template name="display" match="things">
  <xsl:param name="num"/>
  <xsl:param name="type" as="xs:string"/>
  <xsl:param name="subtype" as="xs:string"/>

  <xsl:variable name="xpathExp" as="xs:string">
     <xsl:text>things/thing</xsl:text>
     <xsl:if test="not($num = 'all')>
       <xsl:copy-of select="concat('[number=',$num,']')"/>
     </xsl:if>
     <xsl:if test="not($type = 'all')>
        <xsl:copy-of select="concat('[type=''',$type,''']')"/>
     </xsl:if>
     <xsl:if test="note($subtype = 'all')>
         <xsl:copy-of select="concat('[subtype/subtypes=''',$subtype,''']')/>
     </xsl:if>
   </xsl:variable>

   <xsl:result-document href="#display" method="ixsl:replace-content">

   <xsl:for-each select="ixsl:eval($xpathExp)">
      <xsl:sort select="name"/>
   </xsl:for-each>

</template> 
```

当我用显式 xpath 语句替换 eval 语句时，代码可以工作，因此由于某种原因，$xpathExp 上的 eval 不起作用。想法？

*** 编辑 *** 这是一个更好的 XML 示例：

```
<things>
  <thing>
    <name>widget one</name>
    <number>10</number>
    <type>metal</type>
    <subtypes>
      <subtype>red<subtype>
    </subtypes>
  </thing>
  <thing>
    <name>widget two</name>
    <number>11</number>
    <type>wood</type>
    <subtypes>
      <subtype>red</subtype>
      <subtype>blue</subtype>
    </subtypes>
  </thing>
  <thing>
    <name>widget three</name>
    <number>11</number>
    <type>metal</type>
    <subtypes>
      <subtype>blue</subtype>
    </subtypes>
  </thing>
</things> 
```

用户可以通过数字、类型和子类型的下拉框选择值。根据用户的选择，将显示事物名称列表。例如，如果用户选择数字 11 和红色子类型，它只会显示小部件 2。如果他们选择蓝色的子类型，它将显示小部件二和三的名称。

所以基本的 xpath 过滤器是 things/thing。如果用户选择一个数字值，我想将 [number=$num] 附加到 xpath 表达式，因此 ti 将是 things/thing[number=$num]。如果他们选择了多个项目，比如说数字和类型，[number=$num][type=$type] 将被附加到基本 xpath 并且我将拥有 things/thing[number=$num][type=$类型]。

基本上，我试图避免的是必须单独编码所有可能的排列和可能的用户选择的组合。

这有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:41:25.840

ixsl *:eval*函数用于动态评估 JavaScript，而不是 XPath。来自[Saxon-CE 文档](http://www.saxonica.com/ce/doc/coding/extensions.xml)：

> ...执行 Javascript 代码，以字符串形式提供。提供的脚本作为一个函数注入到 DOM 中，该函数会立即评估以返回结果。

对于您提供的代码示例，不需要动态评估。只有某些类别的 XSLT 应用程序实际上需要动态 XPath 评估。

在需要动态 XPath 评估的少数情况下，Saxon-CE 没有内置功能，因此您需要生成一个简单的“包装器”XSLT 并使用 Saxon-CE JavaSCript 执行它，而不是动态构建 XPath API。该技术用于[PathEnq](http://www.qutoric.com/xslt/analyser/xpathtool.html)在线 XPath 2.0 评估程序。

以下代码使用单个“静态”XPath 表达式实现了与您的代码类似的内容 - 在此示例中，将另一个模板应用于所需的“事物”元素以创建可用的 HTML：

*呈现的代码（语法高亮和格式化）*

![在此处输入图像描述](../Images/f5a6d7e9aa314f083c7b32c4ea24659a.png)

*源代码：*

```
<xsl:transform
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ixsl="http://saxonica.com/ns/interactiveXSLT"
xmlns:js="http://saxonica.com/ns/globalJS"
xmlns:prop="http://saxonica.com/ns/html-property"
xmlns:style="http://saxonica.com/ns/html-style-property"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
exclude-result-prefixes="xs prop"
extension-element-prefixes="ixsl"
version="2.0"
>
<xsl:template name="main" match="/">
<xsl:call-template name="display"/>
</xsl:template>

<xsl:template name="display">
<xsl:param name="num" as="xs:string" select="'none'"/>
<xsl:param name="type" as="xs:string" select="'all'"/>
<xsl:param name="subtype" as="xs:string" select="'red'"/>

<xsl:variable name="thingsEl" select="things" as="element(things)"/>

<xsl:variable name="widget" as="element()+"
select="if ($num eq 'all')
then $thingsEl/thing[number = $num]
else if ($type ne 'all')
    then $thingsEl/thing[type = $type]
else $thingsEl/thing[subtypes/subtype = $subtype]"/>

<xsl:result-document href="#display" method="append-content">
<xsl:apply-templates select="$widget">
<xsl:sort select="name"/>
</xsl:apply-templates>
</xsl:result-document>

</xsl:template>

<xsl:template match="thing">
<ol>
<li>name: <xsl:value-of select="name"/></li>
<li>number: <xsl:value-of select="number"/></li>
<li>type: <xsl:value-of select="type"/></li>
<li>subtypes: 
<ol>
<xsl:apply-templates select="subtypes/subtype"/>
</ol>
</li>
</ol>
</xsl:template>

<xsl:template match="subtype">
<li><xsl:value-of select="."/></li>
</xsl:template>

</xsl:transform> 
```

*HTML 输出（'display' div 元素的外部 HTML 视图）*

```
<div id="display">
    <ol>
        <li>name: widget one</li>
        <li>number: 10</li>
        <li>type: metal</li>
        <li>subtypes: 
            <ol>
                <li>red</li>
            </ol></li>
    </ol>
    <ol>
        <li>name: widget two</li>
        <li>number: 11</li>
        <li>type: wood</li>
        <li>subtypes: 
            <ol>
                <li>red</li>
                <li>blue</li>
            </ol></li>
    </ol>
</div> 
```

# php - 从字符串中删除任何事件 javascript

> ID：14458323
> 
> 赞同：0
> 
> 时间：2013-01-22T12:14:55.693
> 
> 标签：php, javascript, html, xss

`Is there an easy way to remove with php` php 字符串中的任何类型的事件 HTML。例如事件 **提交、mouseOut、mouseOver、单击、模糊、聚焦等。**为了防止 javascript 注入，对于以下情况：是否有一种简单的方法可以**使用 php**删除 php srtring 中的任何类型的事件 HTML。例如事件 **提交、mouseOut、mouseOver、单击、模糊、聚焦等。**为了防止 javascript 注入，对于以下情况：

```
$text= 'mi secure html <div id="javascript_injection" onfocus=function(){SomeJavaScriptCode}></div> <p> Im interested in showing the resulting html </p>'

echo $text = 'mi secure html <div id="javascript_injection" > example </div> <b> Im interested in showing the resulting html </b> 
```

我也有兴趣展示这个：

```
'mi secure html <div id="javascript_injection" > example </div> <b> Im interested in showing the resulting html </b> 
```

**PD：我无法转义所有文本或删除所有标签，因为如果我想在 html 中显示某些部分。`Imagine you want to show a user creates html to another and want to avoid the injection of javascript`**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:48:43.313

解决此类问题的最佳方法是通过白名单而不是黑名单。这个想法是你定义你允许的标签/属性，而不是试图过滤掉不好的东西。

处理这个问题的一个很好的库是[http://htmlpurifier.org/](http://htmlpurifier.org/)。您可以对其进行自定义以使其允许您想要保留的内容。

```
require_once '/path/to/HTMLPurifier.auto.php';

$dirty_html = '<a href="test.html" onclick="alert()">Test</a>'

$config = HTMLPurifier_Config::createDefault();
$purifier = new HTMLPurifier($config);
$clean_html = $purifier->purify($dirty_html);

echo $clean_html 
```

输出：

```
<a href="test.html">Test</a> 
```

# c# - 发送作业前检查打印机缺纸

> ID：14458325
> 
> 赞同：0
> 
> 时间：2013-01-22T12:15:05.687
> 
> 标签：c#, printing, status

我正在尝试获取打印机的信息。使用 WMI 我可以检索一些信息，但前提是已发送作业。

在发送作业之前，我需要检查我的打印机是否缺纸。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:21:31.090

我自己没有使用过，但请看这里：

[http://msdn.microsoft.com/en-us/library/system.printing.printqueue.isoutofpaper.aspx](http://msdn.microsoft.com/en-us/library/system.printing.printqueue.isoutofpaper.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-29T02:07:58.360

检查 DetectedErrorState 属性，3 为缺纸，4 为无纸，5 为碳粉不足

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T09:20:05.750

我就是这样做的...

```
 //check PAPER OK and Toner OK
    private static bool IspaperOK(ManagementBaseObject printer)
    {
        bool PaperOK = true;

        string[] printers = ConfigurationManager.AppSettings["ModelliStampanti"].Trim().Split('#');

        foreach (var property in printer.Properties)
        {

            if (property.Name == "DeviceID")
            {
                var PaperStatus = printer.Properties["PrinterState"].Value.ToString();
                for (int i = 0; i <= printers.Length - 1; i++)
                {

                    if (property.Value.ToString() == printers[i].ToString())
                    {     //131072 = Toner Low
                          //1024 = printing
                          //16 = Out of Paper
                          //5 = out of paper
                          //128 - offline(no internet connection)   

                          //this is for out of paper....
                        if ((PaperStatus == "5") ||(PaperStatus == "16"))
                        {
                            PaperOK = false;
                        }

                        //this is for low toner....
                        if (PaperStatus == "131072")
                        {
                            PaperOK = false;
                        }

                    }

                }

            }

        }
        return PaperOK;
    } 
```

要验证这些问题，请使用这些值而不是 MSDN 中描述的值

```
 //131072 = Toner Low
                //1024 = printing
                //16 = Out of Paper
                //5 = out of paper
                //128 - offline(no internet connection OR printer turned off ) 
```

# c# - 如何在存储过程中获取财政年度？

> ID：14458337
> 
> 赞同：0
> 
> 时间：2013-01-22T12:15:38.210
> 
> 标签：c#, sql

我有一个存储过程，从 c# 代码中将“serverdate”传递给 SP.serverdate 是 System.Datetime.now() 的值。

如何从 sp 中的 serverdate 中找到财政年度？

会计年度取为“4 月 1 日至 3 月 31 日”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:33:09.773

```
SELECT 
    CASE 
    WHEN DATEPART(month, GETDATE()) >= 4 THEN 
        CAST(DATEPART(year, GETDATE()) AS VARCHAR(4)) + '-' + CAST(DATEPART(year, GETDATE())+1 AS VARCHAR(4))
    ELSE 
        CAST(DATEPART(year, GETDATE())-1 AS VARCHAR(4)) + '-' + CAST(DATEPART(year, GETDATE()) AS VARCHAR(4))
    END AS fiscal 
```

这就是你要找的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T04:06:12.017

如果您在 SYSDATE 周围工作，那么：

```
select CASE
         when substr(to_char(SYSDATE, 'ddmmyyyy'), 3, 2) IN
              ('01', '02', '03') THEN
          substr(to_char(add_months(SYSDATE, -12), 'ddmmyyyy'), 5, 4)
         else
          substr(to_char(SYSDATE, 'ddmmyyyy'), 5, 4)
       END
  from dual; 
```

如果您想选择任何随机日期，请更改为 ddmmyyyy 格式。以下是示例日期：

```
 select case 
when substr('17012014' ,3,2) in ('01','02','03') then SUBSTR(TO_CHAR(ADD_MONTHS(TO_DATE('17012014','ddmmyyyy'),-12),'ddmmyyyy'),5,4)

else
substr(to_char(to_date('17012014','ddmmyyyy'),'ddmmyyyy'),5,4)
end
 from DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:12:58.517

这些是 Oracle 查询，但如果您从表或 SQL SERVER 系统表（例如 Oracle 中的“dual”）中选择，它们将在 SQL SERVER 中工作：

```
SELECT start_date, Add_Months(start_date-1, 12) end_date
  FROM
 (
  SELECT Add_Months(Trunc(SYSDATE, 'YY'), 3) start_date
    FROM dual
 )
 /

Output:

Start_Date  End_Date
-------------------------
4/1/2013    3/31/2014 
```

财政年度 - 年表“即时”：

```
SELECT (start_date-1)+ LEVEL  Fiscal_Year
  FROM
(
  SELECT start_date, Add_Months(start_date-1, 12) end_date
    FROM
  (
   SELECT Add_Months(Trunc(SYSDATE, 'YY'), 3) start_date
     FROM dual
  )
)
CONNECT BY LEVEL <= (end_date+1)-start_date
/

Output:

FISCAL_YEAR
------------
4/1/2013
4/2/2013
4/3/2013
....
....
3/31/2014 
```

# javascript - 我想获取所有子标签子子属性值

> ID：14458340
> 
> 赞同：1
> 
> 时间：2013-01-22T12:16:03.563
> 
> 标签：javascript, jquery, ajax, xpath

这是我的xml：

```
<root>
<child1 entity_id = "1" value= "Asia">
    <child2 entity_id = "2" value = "india">
        <child3 entity_id = "3" value = "Gujarat">
            <child5 entity_id = "5" value ="Rajkot"></child5>
        </child3>
        <child4 entity_id = "4" value = "Rajshthan">
            <child6 entity_id = "6" value = "Ajmer"></child6>
        </child4>
    </child2>
</child1>
</root> 
```

这是我的代码：

```
<script>
    data = false;
    loaded = false;

    function loadChild(id) {
        if(!loaded) {
            ul = "<ul>";
            $(data).find("[entity_id='" + id + "']").children().each(function(){
                 var value_text = $(this).attr('value');
                 var id = $(this).attr('entity_id');

                ul += "<li id='" + id + "'>" + value_text + "</li>";
             });
             ul += "</ul>";
             $("#" + id).append(ul);
             loaded = true;
        }
    }

     $(function() {
         $('#update-target a').click(function() {
             $.ajax({
                 type: "GET",
                 url: "final.xml",
                 dataType: "xml",
                 success: function(xml) {
                    data = xml;
                    //console.log(data);
                     $(xml).find('child1').each(function(){
                         var value_text = $(this).attr('value');
                         var id = $(this).attr('entity_id');
                         $("<li id='" + id + "' onclick=\"loadChild('" + id + "');\"></li>")
                             .html(value_text)
                             .appendTo('#update-target ol');
                     }); //close each(
                 }
             }); //close $.ajax(
         }); //close click(
     }); //close $(
    </script> 
```

这是我的输出：

```
 Click here to load value

    Asia
        india 
```

但现在我想要：

*   单击印度，然后显示`Gujarat`和`Rajshthan`。
*   点击`Gujarat`然后显示`Rajkot`。
*   点击`Rajshthan`然后显示`Ajmer`。

# c# - DataTable - 根据列中的值对结果进行排序

> ID：14458343
> 
> 赞同：0
> 
> 时间：2013-01-22T12:16:15.217
> 
> 标签：c#, sorting, datatable

下面是我的 DataTable 值。

```
Cards   Signals
card1   DO
card1   DO
card2   DO
card2   DO
card2   DO
card3   DO 
```

我想要我的 DataTable，它的值`"card2"`在顶部。我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:29:31.323

假设`dtMy`是你当前的表，你会得到你的排序结果`dt`

```
DataTable dt = new DataTable();
        dt = new DataView(dtMy, "Cards= 'card2'", "", DataViewRowState.CurrentRows).ToTable();
        dt.Merge(new DataView(dtMy, "Cards<> 'card2'", "", DataViewRowState.CurrentRows).ToTable()); 
```

# visual-studio-2012 - 如何从 msbuild 脚本运行 VS2012 CppUnitTestFramework 单元测试？

> ID：14458346
> 
> 赞同：1
> 
> 时间：2013-01-22T12:16:20.643
> 
> 标签：visual-studio-2012, microsoft-cpp-unit-test, visual-studio-test-runner

我编写了一个使用 VS2012 的 CppUnitTestFramework 的本机单元测试 dll。我可以在 VS2012 的 IDE 中的测试资源管理器窗口中运行这些测试。

但是，我还想从我们的 MsBuild 脚本运行这些测试。我想我需要使用适当的命令行启动一些测试运行程序 exe，但我正在努力寻找这方面的信息。

你能帮我指出正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:49:57.317

Visual Studio Test Runner 是一个简单的命令行工具，需要调用它才能查找和执行测试。创建一个小型 msbuild 任务或使用标准`exec`任务就足以在构建后调用测试。

只要正确安装了测试运行器，它就应该选择这些测试并执行它们。

请参阅[这篇博文，解释新的`vstest.console.exe`](http://blogs.msdn.com/b/bhuvaneshwari/archive/2012/06/16/vstest-console-exe-commandline-test-runner.aspx).

# android - 在我的 Android 手机上运行 PhoneGap 应用程序时出现问题

> ID：14458347
> 
> 赞同：1
> 
> 时间：2013-01-22T12:16:22.723
> 
> 标签：android, cordova, android-manifest, launching-application

我正在尝试第一次在手机上测试我的应用程序，我已经安装了所有 USB 驱动程序，允许非市场应用程序安装东西......现在当我启动时，我在 Eclipse LogCat 上收到此错误，我不知道怎么办了，顺便说一下PhoneGap应用：

```
01-22 12:40:08.534: W/asset(15063): Asset path /data/app/com.example.appprueba-1.apk is                                                                              neither a directory nor file (type=1).
01-22 12:40:08.542: W/asset(15063): Asset path /data/app/com.example.appprueba-1.apk is neither a directory nor file (type=1).
01-22 12:40:08.542: D/AndroidRuntime(15063): Shutting down VM
01-22 12:40:08.542: W/dalvikvm(15063): threadid=1: thread exiting with uncaught exception (group=0x410aa930)
01-22 12:40:08.550: E/AndroidRuntime(15063): FATAL EXCEPTION: main
01-22 12:40:08.550: E/AndroidRuntime(15063): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.appprueba/com.example.appprueba.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.example.appprueba.MainActivity" on path: /data/app/com.example.appprueba-1.apk
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.os.Looper.loop(Looper.java:137)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at java.lang.reflect.Method.invokeNative(Native Method)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at java.lang.reflect.Method.invoke(Method.java:511)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at dalvik.system.NativeStart.main(Native Method)
01-22 12:40:08.550: E/AndroidRuntime(15063): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.appprueba.MainActivity" on path: /data/app/com.example.appprueba-1.apk
01-22 12:40:08.550: E/AndroidRuntime(15063):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
01-22 12:40:08.550: E/AndroidRuntime(15063):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
01-22 12:40:08.550: E/AndroidRuntime(15063):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:24:35.247

您可能还没有把所有东西都放在它的位置上，查看教程并按照它所说的设置所有东西..

检查 phonegap 网站和 cardova 网站上的文档和实现。

# php - 将大量数据/SQL 写入文本文件的最安全方法是什么？

> ID：14458348
> 
> 赞同：2
> 
> 时间：2013-01-22T12:16:23.627
> 
> 标签：php, mysql, sql

我面临查询/数据完整性问题。

我正在从 MySQL 数据库中读取大量数据（许多 GB），使用 PHP 处理它们，然后将它们重新插入到完全不同表中的同一个数据库中。这是从旧数据结构到新数据结构的一次性转换，其中需要即时修改大量值。

`SELECT FROM x`-> `modify in PHP`->太慢*了*`INSERT INTO y`。每 1000 条记录大约需要 1 秒，我们在这里谈论的是数百万条记录。这就是为什么我决定将每个导出到一个文本/sql 文件中。*`INSERT`*

 *但是，去这里最安全的方法是什么？数据是从布尔值到 BLOB 的所有数据。我真的不能确定里面有什么，什么不是，但一切都需要适当地恢复原位，包括引号、斜杠等。

如何在不丢失任何数据的情况下逃脱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:27:05.870

您可以使用准备好的语句来避免转义数据。

您为准备好的语句创建的查询可以连接起来并作为一个组执行，而不是对每一行进行一次执行调用。

创建、组合和连接 SQL 语句的代码应该允许您轻松选择一组中连接的语句数量，以便您可以在一个 exec 调用中试验 100 条语句，而在一个 exec 调用中试验 1000 条语句。

结果应该会好很多。*

# oop - 在进行领域驱动设计时如何正确利用值对象验证？

> ID：14458360
> 
> 赞同：5
> 
> 时间：2013-01-22T12:16:58.320
> 
> 标签：oop, language-agnostic, domain-driven-design

我在伪代码中有一个简单的**实体：** `Order`

```
class Order{    
    private int quantity;
    private Date orderDate;
    private Date shippingDate;

    public Order(int quantity, Date orderDate, Date shippingDate){
        if(quantity <= 0){ throw new Exception("Invalid quantity")}
        if(shippingDate < orderDate){ throw new Exception("Invalid shippingDate")}
        if(...more validation...){....throw Exceptions...}

       //assign values if everything is OK
    }
} 
```

description、quantity、orderDate 和 shippingDate 都是从 Web 表单中读取的，每个表单都是由多个验证器配置的文本字段：

```
quantityField= new TextField('txt_quantity');
quantityFiled.addNotNullValidator().addNumaricValidator().addPositiveIntegerValidator() 
```

如您所见，验证逻辑在`TextField`验证和实体验证之间是重复的。我试图通过创建类、类和类
来将值对象的概念引入我的实体。所以我的实体变成了这样：`Quantity``OrderDate``ShippingDate``Order`

```
class Order{    
    private Quantity quantity;
    private OrderDate orderDate;
    private ShippingDate shippingDate;

    public Order(Quantity quantity, OrderDate orderDate, ShippingDate shippingDate){
        //assign values without validation I think??!!
    }
} 
```

例如，类 Quantity 将是：

类数量{

```
private int quantity;
public Quantity(int quantity){
        if(quantity <= 0){ throw new Exception("Invalid quantity")}
        this.quantity=quantity;
} 
```

}

现在的问题：

1.  聚合根不应该是负责验证整个聚合的吗？我的`Quantity`班级不是违反了吗？
2.  如何`Quantity`在 Web 表单验证的构造函数中重用验证？我认为验证代码是重复的，所以我怎样才能验证一次或至少重用验证逻辑。
3.  由于所有值对象都将验证自己，这是否意味着我不应该验证实体中的任何内容？
4.  由于`ShippingDate`依赖于`OrderDate`验证，我应该如何验证发货日期？
5.  DDD 工厂适合所有这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:49:35.133

1.  如果`Quantity`在您的领域中任何不能是负面的，无论上下文如何，这都是非常有意义的
2.  `Quantity`恕我直言，您的构造函数中的验证用于确保*应用程序正确使用该类*。它会引发异常，这些异常用于异常状态，而不是预期的工作流。因此，它具有与 Web 表单验证完全不同的目的，它确保用户*正确使用您的应用程序*。它*期望*无效输入并处理它。我在这里看不到真正的重复，至少不会在不违反单一职责原则的情况下消除这种重复。
3.  我认为情况并非如此。你有`if(shippingDate < orderDate)`- 你打算如何在值对象中验证这一点？
4.  啊，你看到问题了。相同的答案：此验证属于 Order 实体。此外，您不必对*所有内容都*使用值对象。如果订单日期或发货日期本身没有固有限制，请继续使用`Date`.
5.  这似乎是一个单独的问题，我认为与价值对象没有任何相关性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:35:34.007

1.  聚合根应该在它们的聚合中强制执行不变量，但它们并不进行所有验证。尤其是在构造时的验证，这通常在构造函数或工厂中处理。事实上，将尽可能多的（非上下文特定的）不变量移动到构造函数和工厂可能是有益的。[我认为始终拥有有效](http://codebetter.com/gregyoung/2009/05/22/always-valid/)的实体而不是依赖于聚合根或实体本身上重复使用`ValidateThis()`和方法是一个更好的主意。`ValidateThat()`

2.  基本上有 3 种验证：客户端验证、应用程序验证（在控制器或应用程序层服务中）和域验证（域层）。需要客户端验证，不能重复使用。应用程序验证可以依赖于域验证，在您的示例中，这意味着只需调用 Quantity 构造函数并处理它引发的异常。但它也可以拥有自己的一组特定于应用程序的非域规则 - 例如，`password`根据其`password_confirm`.

3.  *与始终有效*的实体大致相同，值对象最好是不可变的，这意味着您只需在新建它们时验证一次。但是这是内在验证，您可以在包含实体中完美地进行外围验证（例如，*您的 list 中不能有超过 3 个此类*值对象，*值对象 A 总是与值对象 B 一起使用*，等等）

4.  这是情景验证，而不是 ShippingDate-intrinsic 不变量的验证。因此，Order 应该负责`ShippingDate >= OrderDate`独立于每个值对象的有效性进行检查。

5.  当对象的构造逻辑足够复杂以至于它本身就是一种责任，并且由于 SRP 不适合对象的构造函数或消费者时，应该使用工厂。工厂确实包含构造时验证逻辑，就像构造函数一样，这使得它们也成为各种不变的强制执行者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:51:05.453

这些问题很多，您可能希望将它们分解为单个问题。

问题 2 到 5 在很大程度上取决于各种因素，并受制于意见。

但这是我对问题 1 的回答（以及对问题 3 和 4 的回答）：

**聚合**对其完整性负责。不是**聚合根**。只要聚合作为一个整体保持有效，聚合内的每个项目都可以进行自己的验证。

状态验证（作为正确的数量或不是负数的数量）可以在相应的类内完成。相互依赖的状态验证`ShippingDate >= OrderDate`可以在更高级别上完成，例如在聚合根中。

# mysql - 通过 Join-Where-Group 通过选择查询避免使用临时的正确索引；使用文件排序

> ID：14458367
> 
> 赞同：3
> 
> 时间：2013-01-22T12:17:13.843
> 
> 标签：mysql, join, group-by

我已经搜索了很多关于下面描述的案例的解决方案，但不幸的是我没有找到类似的案例。

我有以下情况：（作为新用户，网站拒绝了我的图片，但我可以通过邮件发送。下面是它的文字表示）

```
Table 1 "swap_plan"          Table 2 "cell"
ClusterName | SiteID         SiteID    | Cell      |  Time       | Counter
-----------------------      ---------------------------------------------
Cluster A   | SiteID A1      SiteID A1 | Cell A1-1 | day1        | 5
Cluster A   | SiteID A2      SiteID A1 | Cell A1-1 | day2        | 3
Cluster A   | SiteID A3      SiteID A1 | Cell A1-1 | day3        | 6
Cluster A   | SiteID A4      SiteID A1 | Cell A1-2 | day1        | 6
Cluster A   | SiteID A5      SiteID A1 | Cell A1-2 | day2        | 2
Cluster A   | SiteID A6      SiteID A1 | Cell A1-2 | day3        | 9
.......................      ..............................................
Cluster B   | .........      ..............................................

(Where No 1)      (ON Clause "SiteID")            (Where No 2)    Sum(Counter) 
```

我必须显示一些性能指标（表 2“单元格”中的“计数器”），随时间聚合（表 2“单元格”中的“时间”）和集群（表 1“swap_plan”中的“集群名称”）。

连接是通过两个表“SiteID”的公共列完成的。请注意，在表 2“单元”中，每个 SiteID 由 3 个不同的对象（“单元”）组成。所以，实际上我为每个单元格做“计数器”的 SUM()。

查询如下：

```
SELECT ClusterName,Time,SUM(counter)
FROM cell
INNER JOIN swap_plan ON swap_plan.Siteid = cell.Siteid
WHERE ClusterName='Cluster A' AND Time>=day1 AND Time<=day2
GROUP BY Time 
```

列类型如下：

表1“交换计划”：

1.  集群名称 - CHAR(30)
2.  站点 ID - VARCHAR(10)

表2“单元格”：

1.  站点 ID - VARCHAR(10)
2.  时间 - 日期时间
3.  计数器 - INT

“解释”显示如下：

```
table          type    key           key_len      ref               rows  Extra

swap_plan      ref     Index 1       30           const             31    Using where; Using index; Using temporary; Using filesort
cell           ref     Index_siteid  13           swap_plan.SiteID  368   Using where 
```

使用的索引如下：

swap_plan：索引 1（1\. ClusterName 和 2\. SiteID）

单元格：Index_siteid (SiteID)

优化器看起来的行数非常低，这很好：

交换计划：6066 中的 31 和单元：660 万中的 368。

我的问题是这些“使用临时；使用文件排序”。据我了解，这来自 Group By 所需的排序（如果我删除它，这些过程不会根据解释执行）。我发现为了避免它们，您需要在分组依据的列上有一个索引。我有一个只包括“时间”列的特殊索引，但这个索引没有被使用，即使有提示“使用索引 FOR GROUP BY ()”。

因此，我的查询运行速度不够快 - 大约需要 15 秒（比如说 15 个 SiteID 和 10 个日期），我需要将此持续时间减少到至少一半。

**我的主要问题是：**

*   是否有可能删除“使用临时；使用文件排序”或减少执行所需的时间？（我尝试将 Read Buffer Size 增加到 16MB，没有效果）
*   在 JOIN 情况下我需要什么样的索引定义，当在 WHERE 子句中我按不同表中的 2 列过滤时，在 ON 子句中我按第 3 列过滤
*   我可以应用什么样的 Group By 优化（索引等）？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-26T17:39:01.127

我会这样写查询：

```
SELECT c.time
     , SUM(c.counter)
     , MAX(p.clustername) AS clustername
  FROM cell c

  JOIN swap_plan p
    ON p.siteid      = c.siteid
   AND p.clustername = 'Cluster A'

 WHERE c.time  >=  'day1'
   AND c.time  <=  'day2'
 GROUP
    BY c.time 
```

我肯定有一个索引`cell`作为`time`前导列。

MySQL 可以使用相同的索引来满足范围谓词（在 WHERE 子句中），并在没有“使用文件排序”操作的情况下满足 GROUP BY。

```
... ON cell (time) 
```

根据列的大小，覆盖索引可能会提供最佳性能。覆盖索引包括查询中引用的表中的所有列，因此可以完全从索引页面满足查询，而无需查找基础表中的页面。

```
... ON cell (time, siteid, counter) 
```

对于 上的索引`swap_plan`，我将有一个索引`site_id`作为前导列，并包括该`clustername`列，其中之一是：

```
... ON swap_plan (clustername, site_id) 
```

或者

```
... ON swap_plan (site_id, clustername) 
```

看起来这两个列的组合可能会有一个 UNIQUE 约束，即 的值`site_id`对于给定的 将是不同的`clustername`。（如果不是这种情况，并且同一个`(site_id,clustername)`元组多次出现，那么总的总数可能`counter`会被夸大。

我正在寻找输出以显示从clustername 的值和 const（字面“Cluster A”）值到表`EXPLAIN`的“ref”查找。`swap_plan``c.siteid`

* * *

对于大小为 31 行和 368 行的表，我们不会看到最佳执行计划和糟糕的执行计划之间的性能（经过的时间）有显着差异。

当任何一个表扩展到数百万行时，差异就会变得明显。执行计划的优化器选择受每个表的统计信息（大小、行数、列基数）的影响，因此执行计划可能会随着表大小的增加而改变。

# scala - Scala 不适用于特征

> ID：14458368
> 
> 赞同：4
> 
> 时间：2013-01-22T12:17:19.760
> 
> 标签：scala

如何在特征中使用 unapply？

```
import play.api.libs.json.Json

trait Json[T] {

  implicit val jsonFormat = Json.format[T]

} 
```

给出编译错误：

```
No unapply function found 
```

我可以以某种方式强制编译器将 T 绑定到案例类，以便我可以使用 unapply 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:54:31.980

这是 Scala 的[提取器](http://www.artima.com/pins1ed/extractors.html)存在的要求。提取器是一种被调用的方法`unapply`，通常在对象中定义（通常是相关类型的伴侣）。它用于将值解构为其组成部分。

这是一个例子（相当做作）：

```
object Extractor1 {
  def unapply(a: Any): Option[(String, Int)] =
    Some(a.toString, a.toString.length)
}

object ExtractorUse {
  import Extractor1._
  def use {
    "23 skeedo!" match {
      case Extractor1(str, length) => printf("str=\"%s\"; length=%d%n", str, length)
    }
  }
} 
```

正在使用：

```
scala> ExtractorUse.use
str="23 skeedo!"; length=10 
```

如果提取器返回`None`，则尝试它的匹配将失败。`case`同样，如果结果的数量与子句中提供的模式变量不一致。

还有一个用于提取序列的对应项，`unapplySeq`. 有关详细信息，请参阅 Programming in Scala 链接

# c# - 处理正在执行的进程

> ID：14458371
> 
> 赞同：1
> 
> 时间：2013-01-22T12:17:30.033
> 
> 标签：c#, winforms, multithreading, process

几天前，我开始在创建的 ac#winform 应用程序中出现错误，说明

> CLR 在 60 秒内无法从 COM 上下文 0x278f58 转换到 COM 上下文 0x2790c8。拥有目标上下文/单元的线程很可能要么进行非泵送等待，要么处理非常长时间运行的操作而不泵送 Windows 消息。

当我使用单独的线程运行 exe 进程以避免冻结 ui 时，就会发生这种情况。在发布版本中，该程序运行良好且符合预期，但几乎无法始终如一地调试我的程序（有时工作正常，其他人不太好）..

我尝试通过`BackgroundWorker`使用多个谷歌搜索的答案强制 a 同步来实现此过程，这解决了此错误的问题，但使我的程序以意想不到的方式工作（在 exe 完成之前填充的文本框导致错误数据）。

我已经读过这个错误只会发生在生产中而不是发布中。所以我的问题是我应该试着忍受这种烦恼还是他们的非后台解决方案？如果需要任何代码示例，我可以提供，但我认为没有必要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:37:51.863

托管调试助手 (MDA) 告诉您单线程单元 (STA) COM 线程在 60 秒内没有响应消息。STA COM 是通过消息传递完成的。如果 MDA 已打开，则会发生此异常，默认情况下，在调试器下运行时会出现此异常。MDA 用于检测具有预定义超时的死锁，并且它仅在您在 VS 调试器下运行程序时才有效。

由于许多 COM 组件是 STA 并且 Windows 窗体中的主线程也是 STA，因此这是您正在阻止的警告。这可能是因为您通过花时间单步执行代码来停止消息循环。

要为单个项目关闭此功能，请将以下内容添加到您的应用程序配置文件中：

```
<mdaConfig> 
  <assistants> 
    <contextSwitchDeadlock enable="false" /> 
  </assistants> 
</mdaConfig> 
```

要全局关闭此功能：

*   单击 Visual Studio 中的“*调试*”菜单。
*   选择异常选项（*调试 -> 异常*）。
*   例外窗口将打开。
*   展开“*托管调试助手*”节点。
*   取消选中*Throw列下的***ContextSwitchDeadlock**选项。
**   单击确定并关闭例外窗口。*

 *禁用此 MDA 意味着您失去了在发布应用程序之前发现错误的有用工具。当然，如果你在调试器下没有运行时看到这个死锁，那么你需要做一个正常的死锁分析。*

# multithreading - 在 Visual Studio Express 2010 中调试时如何列出线程

> ID：14458373
> 
> 赞同：1
> 
> 时间：2013-01-22T12:17:44.430
> 
> 标签：multithreading, visual-studio-2010, visual-studio-debugging, visual-studio-express

我试图找出我的 WPF 应用程序在调试时没有干净地结束的原因。“干净”是指所有窗口都已关闭，我可以在“输出”窗口中看到各种消息，显示应用程序已结束但进程仍处于活动状态，并且调试器中的“停止”按钮仍处于活动状态。

我调用了该`Shutdown()`方法，但有些东西正在阻止应用程序结束。我很确定这与与 IO 设备的以太网连接有关，但看不到我做错了什么。（当我注释掉连接设备的调用时，应用程序可以干净地退出）

我想知道 VSE 2010 是否可以列出所有活动线程，因为这可能会提供有关主程序结束后仍然“活动”的线索。或者是否有一个外部工具可以在这里提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:26:08.327

您应该能够使用[Visual Studio`Threads`窗口](http://msdn.microsoft.com/en-us/library/w15yf86f.aspx)查看哪些线程仍处于活动状态。我不完全确定这个窗口在 Express 版本中是否可用（文档没有提到这样的限制），但如果你没有它，那么你也可以[使用 WinDbg 列出所有线程](http://windbg.info/doc/1-common-cmds.html#12_thread)。WinDbg 是[Windows 调试工具的](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)一部分。您可能需要安装最新版本的 Windows SDK 才能获得它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T12:43:25.987

首先使用调试器。Debug + Break All, Debug + Windows + Threads 看看哪些线程还在运行。您可以双击一个并使用 Debug + Windows + Call Stack 来查看它在做什么。典型的情况是您启动但忘记告诉终止的线程。Thread.IsBackground 属性是一种让 CLR 自动为您中止线程的方法。

从技术上讲，阻止进程关闭的设备可能会出现问题。Threads 窗口通常只显示一个线程，该线程具有其他无法穿透的堆栈跟踪。如果您使用任务管理器、进程选项卡、查看 + 选择列，勾选句柄，那么您可能会看到只有一个句柄仍在使用中。然后诊断是您的机器上有一个糟糕的设备驱动程序，它不能正确支持 I/O 取消。这可能会使内核线程运行而不会退出，从而阻止进程终止。很不寻常，先找第一段给出的理由。

# ios6 - iOS web 应用程序调用移动 safari 共享功能？

> ID：14458374
> 
> 赞同：0
> 
> 时间：2013-01-22T12:17:48.643
> 
> 标签：ios6, mobile-safari, iphone-standalone-web-app

这是一个远景，但是否可以通过 HTML/JavaScript 例如对于独立的 iOS Web 应用程序调用移动 safari 中的共享功能？

例如，在网页上，用户单击链接，然后要求分享到 fb、twitter、电子邮件屏幕以弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:44:36.733

不可以。无法从网页或独立 Web 应用程序访问该功能。当然，您可以自己将 FB/Twitter/etc 分享添加到您的页面。

# javascript - Knockout.js 默认事件绑定与使用 jQuery 事件委托 .on() 的自定义绑定 - 性能和收益？

> ID：14458377
> 
> 赞同：4
> 
> 时间：2013-01-22T12:17:52.517
> 
> 标签：javascript, jquery, knockout.js

使用自定义绑定和 $.on() 对大约 500 行数据列表上的人机交互做出反应是否有一些性能或其他收益？

想到这个问题是因为我注意到淘汰事件是使用 bind() 附加到元素的，这意味着它们在每个点击按钮上，还是我错了？

我有两个样品

首先 - [http://jsfiddle.net/dzjosjusuns/yStt7/](http://jsfiddle.net/dzjosjusuns/yStt7/) - 附加到子项目的事件

```
<div data-bind="text:head.id"></div>
<div id="container" data-bind="foreach:head.rows">
    <div class="item">
        <button data-bind="click:$root.head.deleteRow">remove</button>
        <span data-bind="text:name"></span>
    </div>
</div> 
```

第二 - [http://jsfiddle.net/dzjosjusuns/NN3h8/](http://jsfiddle.net/dzjosjusuns/NN3h8/) - 事件仅通过自定义绑定附加到父级

```
<div data-bind="text:head.id"></div>
<div id="container" data-bind="foreach:head.rows, onRowDelete:head.deleteRow">
    <div class="item">
        <button>remove</button>
        <span data-bind="text:name"></span>
    </div>
</div> 
```

客户绑定

```
ko.bindingHandlers.onRowDelete = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        $('#container').on('click', '.item button', function (event) {
            valueAccessor().call(viewModel.head, ko.dataFor(event.target), event.target);
        });
    }
}; 
```

那么，做这样的自定义绑定有什么意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:07:31.380

> 使用自定义绑定和 $.on() 对大约 500 行数据列表上的人类交互做出反应是否有一些性能或其他收益？

是的。使用默认事件绑定，Knockout 将为 500 行中的每一行附加一个处理程序。

正如@nemesv 所说，您可以使用 Ryan Neimeyer 的[Knockout.DelegatedEvents](http://github.com/rniemeyer/knockout-delegatedEvents)库，该库将利用事件冒泡来有效地将处理程序附加到 DOM 元素事件。

# php - 禁用用户输入 php/html 表单

> ID：14458381
> 
> 赞同：0
> 
> 时间：2013-01-22T12:18:06.810
> 
> 标签：php

我有一个 HTML 表单，当用户单击提交时，所有信息都使用 POST 方法通过 php 脚本发送到电子邮件。我想要做的是在单击提交按钮后禁用所有用户输入或将所有文本框输入字段变灰。我该怎么做呢？

目前提交按钮的代码如下所示：

```
<input type="submit" value=" Continue " style="width:200px;height:40px"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:25:29.530

Onclick 提交按钮使所有输入禁用

```
$("input").attr('disabled', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:45:25.773

由于是否已发送邮件是服务器端处理，因此如果您从服务器端处理它比从客户端（如 jQuery 和 javascript）处理更好：

```
$form_state = ($is_mail_sent)?"":"disabled='disabled'";

<input type="submit" <?php echo $form_state ?> value=" Continue " style="width:200px;height:40px"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:41:01.697

如果没有 db 交互，您将无法做到这一点，在 db 表中有一个标志。如果用户提交表单，则设置标志 1，默认为 0。根据标志值，您可以禁用表单。

```
if(mailsent_status_of_the_user == 1){
    $status = "disabled='disabled'";
}else{
   $status = "";
}

<input type="submit" value=" Continue " <?php echo $status; ?> > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T12:21:58.873

通过使用 jQuery：`$("input").prop('disabled', true);` 但是在纯 Html 中是不可能不刷新页面的！

编辑： **Javascript：**

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(e) {
    $("#yourFormID").submit(function() {
        $("#theInputToDisable").prop('disabled', true);
        //Or to disable all inputs 
        //$(this).children("input").prop('disabled', true);
        //$(this).children("input").attr('disabled', 'disabled'); 
        return false;
    })
});
</script> 
```

**HTML**

```
<form id="yourFormID">
    <input type="text" />
    <input type="submit" value="Send"/>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T12:22:51.350

在您要禁用的每个 HTML 输入元素中添加以下内容。由于您没有提到我假设您可以为此使用 PHP。

```
<?php if(isset($_POST['submit'])) echo 'disabled="disabled"'; ?> 
```

如果您使用 AJAX，则在触发事件时，在特定事件中

```
$("input").prop('disabled', true); 
```

# java - kryo 列表序列化

> ID：14458382
> 
> 赞同：10
> 
> 时间：2013-01-22T12:18:14.993
> 
> 标签：java, list, serialization, constructor, kryo

我正在尝试使用 Kryo 序列化一些对象（自定义类： List> ）的 List 列表。

```
list2D; // List<List<MyClass>> which is already produced.

Kryo k1 = new Kryo();
Output output = new Output(new FileOutputStream("filename.ser"));
k1.writeObject(output, (List<List<Myclass>>) list2D);
output.close(); 
```

到目前为止没问题，它写出没有错误的列表。但是当我尝试阅读它时：

```
Kryo k2 = new Kryo();
Input listRead = new Input(new FileInputStream("filename.ser"));
List<List<Myclass>> my2DList = (List<List<Myclass>>) k2.readObject(listRead,  List.class); 
```

我收到此错误：

```
Exception in thread "main" com.esotericsoftware.kryo.KryoException: Class cannot be created (missing no-arg constructor): java.util.List 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-16T10:32:27.113

回读对象时不能使用`List.class`，因为`List`它是一个接口。

```
k2.readObject(listRead,  ArrayList.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:23:19.077

根据您的错误，您可能希望向您的类添加一个无参数构造函数：

```
 public class MyClass {

    public MyClass() {  // no-arg constructor

    }

    //Rest of your class..

 } 
```

# angularjs - Angularjs 不同的控制器之一包括

> ID：14458385
> 
> 赞同：0
> 
> 时间：2013-01-22T12:18:28.877
> 
> 标签：angularjs

我想要一个元素，我可以使用他们自己的控制器有 2 个视图，但一次只能有一个。我不能使用 ng-view 并使用 routeProvider，因为将来我需要包含更多 ng-include，这些 ng-include 需要根据可能的操作更改其内容。

我创建了一个小提琴[http://jsfiddle.net/EvHyT/29/](http://jsfiddle.net/EvHyT/29/)。

所以我使用了一个 ng-include，然后我从一个主控制器为它设置了 src。那时我想使用控制器 1 或控制器 2。

```
function MainCtrl($rootScope, $scope, navService){
$scope.template = {};

$scope.loadCtrl1=function(param){
    navService.loadCtrl1(param);
}

$scope.loadCtrl2=function(param){
    navService.loadCtrl2(param);
}

$rootScope.$on('loadCtrl1', function(e, args){
    $scope.template = {'url': 'temp1'};
});

$rootScope.$on('loadCtrl2', function(e, args){
     $scope.template = {'url': 'temp2'};       
});
} 
```

我使用服务进行通信，因为我想在子控制器中移动负载控制器功能。

```
var myApp = angular.module('myApp',[]);

myApp.factory('navService', function($rootScope) {
return {
     loadCtrl1:function(param){
        $rootScope.$broadcast('loadCtrl1', {'id':param});   
    },

    loadCtrl2:function(param){
        $rootScope.$broadcast('loadCtrl2', {'id':param});
    }
};
}); 
```

我知道这个解决方案很糟糕，因为插入不同的模板时尚未创建控制器，因此我的事件侦听器不会触发。我也可以销毁控制器的先前实例，因为在两个控制器之间切换会使我的事件多次触发。

```
function Child1Ctrl($scope, $rootScope){
 $rootScope.$on('loadCtrl1', function(e, args){
   alert(args.id);
});
}

function Child2Ctrl($scope, $rootScope){

$rootScope.$on('loadCtrl2', function(e, args){
      alert(args.id);
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:51:06.210

你不需要广播（也不应该广播）来实现这一点。以我的经验，如果你在 rootScope 上广播，你可能工作太努力了。

加载模板的更简单方法与您正在执行的操作非常相似：

```
my.NavService = function() {
  this.template = 'index.html';
  this.param = null;
};
my.NavService.prototype.setTemplate(t, p) {
  this.template = t;
  this.param = p;
};

my.ctrl = function($scope, nav) {
   $scope.nav = nav;
   $scope.load = function(t, p) {
     nav.setTemplate(t, p);
   };
};

my.ctrl1 = function($scope, nav) {
  $scope.param = nav.param;
};

my.ctrl2 = function($scope, nav) {
  $scope.param = nav.param;
};

module.
  service('nav', my.NavService).
  controller('mainCtrl', my.ctrl).
  controller('ctrl1', my.ctrl1).
  controller('ctrl2', my.ctrl2); 
```

```
<script type="text/ng-template" id="temp1.html">
  <div ng-controller="ctrl1">Foo {{param}}.</div>
</script>
<script type="text/ng-template" id="temp2.html">
  <div ng-controller="ctrl2">Bar {{param}}.</div>
</script>

<div ng-controller="mainCtrl">
  <a ng-click="load('temp1.html', 16)">Load 1</a>
  <a ng-click="load('temp2.html', 32)">Load 2</a>
  <div ng-include src="nav.template"></div>
</div> 
```

像这样的设置对你来说会更好。

或者，您应该考虑使用 ng-switch 选择性地显示元素。与 ng-show/hide 不同，ng-switch 不会简单地将“display:none”添加到 CSS 中。它将它从 DOM 中删除。

**一些注意事项：**

*   上面的例子可能不是一个有效的例子，它是一个想法的演示。可以在这里看到一个工作示例：http: [//jsbin.com/ofakes/1](http://jsbin.com/ofakes/1)它修改了您的原始代码。
*   JSFiddle 在从页面脚本标记加载包含时遇到了一些问题。
*   JSBin 稍微好一点。
*   直到我将模板分解为它们自己的文件之前，我并没有真正让它按预期工作。

# xcode - Xcode 4 中的静态库

> ID：14458390
> 
> 赞同：0
> 
> 时间：2013-01-22T12:18:46.037
> 
> 标签：xcode, static-libraries

我在 Xcode 4.X 中对这个静态库的东西太多了

以下是我通常执行的步骤..

1）为了制作一个静态库，我打开Xcode，new，static libary，然后在项目中添加一些类..然后构建阶段->复制标题->在这里一一添加所有标题，然后我建立在 ios 模拟器上运行时的项目-> 在 ios 设备上运行时未创建静态库..（红色）-> 创建静态库..

2）使用库..我创建一个新项目，然后我“将文件添加到项目”并“如果需要”还“复制”以下2个文件..一个文件（即静态库）文件夹，包含库文件的标题

现在，当我尝试在我的项目中导入头文件时，没有出现“建议”......但我仍然在写，它没有给出错误“找不到头文件”......

但是当我运行该项目时，它会给出如下错误：

> ld：警告：忽略文件/Users/Subodh/Library/Developer/Xcode/DerivedData/LibraryImporting_test-cbchzzjdcehzvfgwmzbvifrnrwgk/Build/Products/Debug-iphoneos/libLibraryImporting_test.a，文件是为存档而构建的，它不是被链接的架构（i386） ：/Users/Subodh/Library/Developer/Xcode/DerivedData/LibraryImporting_test-cbchzzjdcehzvfgwmzbvifrnrwgk/Build/Products/Debug-iphoneos/libLibraryImporting_test.a

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_LibraryImporting_test", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请指导我....指出是否在某个步骤出错....帮助请帮助，如果有人提到我在创建库和在项目中使用它所做的所有步骤会更好...它会是一个很大的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:01:40.710

问题的关键是错误消息的这一部分：

> 文件是为存档而构建的，它不是被链接的体系结构（i386）

从外观上看，您已经导入了为 iPhone 设备 (ARM) 构建的库，并且您正尝试在 i386 的 iPhone 模拟器中使用它。

我建议使用 Xcode 工作区，其中静态库项目是其中一个项目，而 iPhone 应用程序是另一个项目。这样，Xcode 将根据需要为调试/发布和设备/模拟器构建库。

# windows-phone-7 - 在 Windows Phone 中缓存谷歌地图？

> ID：14458393
> 
> 赞同：0
> 
> 时间：2013-01-22T12:18:59.257
> 
> 标签：windows-phone-7, google-maps, caching

我可以在 Windows Phone 中缓存谷歌地图吗？我使用`GoogleTileSource`：

```
<my:MapTileLayer Name="street" Margin="0,0,0,32" Height="800" Width="433">
     <my:MapTileLayer.TileSources>
           <GoogleTileSource:GoogleTile TileTypes="Street"/>
     </my:MapTileLayer.TileSources>
</my:MapTileLayer> 
```

这是可能的？

预先感谢。

**更新**

`XAML`代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <my:Map Height="756" HorizontalAlignment="Left" Margin="12,6,0,0" Name="googlemap"
                   CredentialsProvider="AqayajnZU8FSfDGL8jpK5zMKAHmUL27Uqxv_OnpQzJQOI2PoQyxcG7dlR6_g4WWo" 
                   CopyrightVisibility="Collapsed" LogoVisibility="Collapsed" 
                   ScaleVisibility="Visible"  VerticalAlignment="Top" Width="438" >
                <my:Map.Mode>
                    <MSPCMCore:MercatorMode/>
                </my:Map.Mode>
                <my:MapTileLayer Name="street" Margin="0,0,0,32" Height="800" Width="433">
                    <my:MapTileLayer.TileSources>
                        <GoogleTileSource:GoogleTile TileTypes="Street"/>
                    </my:MapTileLayer.TileSources>
                </my:MapTileLayer>
                <my:MapLayer x:Name="PopupLayer">
                    <Canvas x:Name="ContentPopup" Visibility="Collapsed">
                        <Rectangle x:Name="ContentPopupRectangle" Fill="Black" 
                                   Opacity="0.6" Canvas.Left="0" Canvas.Top="0" 
                                   Height="100" Width="200"/>
                        <StackPanel Canvas.Left="20" Canvas.Top="10">
                            <TextBlock x:Name="ContentPopupNickname" FontSize="24" FontWeight="Bold" TextWrapping="Wrap" Width="200"/>
                            <TextBlock x:Name="ContentPopupLocation" FontSize="16" FontWeight="Bold" TextWrapping="Wrap" Width="200"/>
                            <TextBlock x:Name="ContentPopupAge" FontSize="16" FontWeight="Bold" TextWrapping="Wrap" Width="200"/>                              
                        </StackPanel>
                    </Canvas>
                </my:MapLayer>
            </my:Map>
        </Grid> 
```

所以，`cs`代码：

```
 public enum GoogleTileTypes
    {
        Hybrid,
        Physical,
        Street,
        Satellite,
        WaterOverlay
    }

    public class GoogleTile : Microsoft.Phone.Controls.Maps.TileSource
    {
        private int _server;
        private char _mapmode;
        private GoogleTileTypes _tiletypes;

        public GoogleTileTypes TileTypes
        {
            get { return _tiletypes; }
            set
            {
                _tiletypes = value;
                MapMode = MapModeConverter(value);
            }
        }

        public char MapMode
        {
            get { return _mapmode; }
            set { _mapmode = value; }
        }

        public int Server
        {
            get { return _server; }
            set { _server = value; }
        }

        public GoogleTile()
        {
            UriFormat = @"http://mt{0}.google.com/vt/lyrs={1}&z={2}&x={3}&y={4}";
            Server = 0;
        }

        public override Uri GetUri(int x, int y, int zoomLevel)
        {
            if (zoomLevel > 0)
            {
                var Url = string.Format(UriFormat, Server, MapMode, zoomLevel, x, y);
                return new Uri(Url);
            }
            return null;
        }

        private char MapModeConverter(GoogleTileTypes tiletype)
        {
            switch (tiletype)
            {
                case GoogleTileTypes.Hybrid:
                    {
                        return 'y';
                    }
                case GoogleTileTypes.Physical:
                    {
                        return 't';
                    }
                case GoogleTileTypes.Satellite:
                    {
                        return 's';
                    }
                case GoogleTileTypes.Street:
                    {
                        return 'm';
                    }
                case GoogleTileTypes.WaterOverlay:
                    {
                        return 'r';
                    }
            }
            return ' ';
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:41:56.007

标准 TileSource 不允许您对平铺图像的下载进行任何控制。

如果要添加自己的缓存，则必须在地图中添加另一个图层，然后下载图像并将它们自己加载到正确位置的额外图层中。这不好玩，但可以做到。

# android - Google Maps API v2 自定义 MapFragment + SimpleFragment

> ID：14458398
> 
> 赞同：1
> 
> 时间：2013-01-22T12:19:08.287
> 
> 标签：android, android-fragments, google-maps-api-2, currentlocation, mapfragment

我需要创建一个简单的应用程序，其中包含 1\. 可以显示当前位置 (LocationListener?)、两个标记等的自定义 MapFragment。 2\. 简单的空片段。

应用程序不得使用支持 v4 (sdk 11+) / FragmentActivity。

空片段。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/black" >
</RelativeLayout> 
```

班级：

```
public class FirstFragment extends Fragment{

public FirstFragment() {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.first_fragment, container, false);
    return view;
}
} 
```

地图片段（尝试使其成为单例）。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

班级

```
public class ThirdMapFragment extends MapFragment {
public static MapFragment instance;

@Override
public View onCreateView(LayoutInflater arg0, ViewGroup arg1, Bundle arg2) {
    View view;
    view = arg0.inflate(R.layout.map_fragment, arg1, false);
    return view;
}

public static MapFragment getInstance() {
    if (instance == null) {
        instance = newInstance();
    }
    // NullPointerException in getMap() ???
    // instance.getMap().addMarker(new MarkerOptions().position(new LatLng(41.1, 39)));
    return instance;
}

@Override
public void onCreate(Bundle arg0) {
    super.onCreate(arg0);
}
} 
```

主要活动：

```
public class ActivityMain extends Activity implements OnClickListener {
FragmentManager fragmentManager;
FragmentTransaction transaction;
FirstFragment firstFragment;
MapFragment mapFragment;

// Buttons
Button b4;

int i = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    fragmentManager = getFragmentManager();
    transaction = fragmentManager.beginTransaction();

    b4 = (Button) findViewById(R.id.button4);

    b1.setOnClickListener(this);

    firstFragment = new FirstFragment();
    mapFragment =  ThirdMapFragment.getInstance();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    makeTransaction(v.getId());
}

private void makeTransaction(int id) {
    i++;
    transaction = fragmentManager.beginTransaction();
    if (i == 1) {
        transaction.replace(R.id.relativeLayout, firstFragment).commit();
    } else if (i == 2) {
        transaction.replace(R.id.relativeLayout, secondFragment).commit();
    } else {
    transaction.replace(R.id.relativeLayout, mapFragment).commit();
        i = 0;
    }
}
} 
```

R.id.relativeLayout - main.xml 中的布局

但我没有看到地图（带有缩放按钮的空白屏幕）以及如何制作 LocationListener？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:06:54.717

如果您使用的是支持库，则必须使用 SupportMapFragment 类而不是 MapFragment 用于地图片段。您的活动应该是一个 FragmentActivity 以支持库。以及片段管理器。你必须得到支持片段管理器（）。

看看这段代码：

```
import com.google.android.gms.common.GooglePlayServicesUtil;
import android.os.Bundle;
import com.google.android.gms.maps.*;

public class Map extends android.support.v4.app.FragmentActivity
{
private GoogleMap map;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        if (GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext()) == 0)
        {
            map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
            map.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        }
}} 
```

如果您在进行这些更改后仍然看不到地图。检查您的 API 控制台，您已打开 Google Map ANDROID API V2，而不仅仅是可能导致与您描述的结果相同的 Google Map API V2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T21:59:09.963

视图尚未创建，这就是为什么 getMap() 返回 null，地图不存在，将代码放入 onResume

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:57:18.513

放入清单，android的关键？例如：

```
<application
        android:icon="@drawable/android"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <meta-data android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyB2s6isdfsghDfgdfdfgDFGDG-yi4-aAYUma0Owc"/> 
```

[https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

# java - JFreeChart 折线图，每个点都有文字

> ID：14458402
> 
> 赞同：12
> 
> 时间：2013-01-22T12:19:14.500
> 
> 标签：java, jfreechart, linechart

我想将文本放在我在折线图中绘制的每个点上。

这是我能做的：![我可以做什么](../Images/30b822aed9b8edda3263027a0f356411.png)

这就是我需要的（点的名称是绿色的）：![我需要的](../Images/d22a6e43e719cc264881e9d65f5a5101.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T13:09:07.527

`StandardXYItemLabelGenerator`应该工作；[这里](https://stackoverflow.com/a/3158958/230513)有一个例子。

附录：*您在图片中看到的标签位于单独的字符串数组中。*

`XYDataset`如下所示，此类标签可以包含在`LabeledXYDataset`中。由于没有`StandardXYItemLabelGenerator`使用 的任何功能，因此自定义实现`XYItemLabelGenerator`就足够了。控制标签的`XYItemRenderer`颜色、大小和相对位置。

附录：*如何添加工具提示？*

在 的指导下，只需向渲染器[`ChartFactory.createXYLineChart()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/ChartFactory.html#line.1951)指定 a 。[在这里](https://github.com/jfree/jfreechart/blob/33f2b58a55dfb8e299d33d4c83831d9e1ee2b6aa/src/main/java/org/jfree/chart/labels/StandardXYToolTipGenerator.java#L57)`XYToolTipGenerator`看到的默认格式是.`Series: (x, y)`

```
renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator()); 
```

![图片](../Images/56cfb98bdf3c716f32c432a1dd26e6cd.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import org.jfree.chart.*;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.labels.ItemLabelAnchor;
import org.jfree.chart.labels.ItemLabelPosition;
import org.jfree.chart.labels.XYItemLabelGenerator;
import org.jfree.chart.labels.StandardXYToolTipGenerator;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.AbstractXYDataset;
import org.jfree.data.xy.XYDataset;
import org.jfree.ui.TextAnchor;

/** @see https://stackoverflow.com/a/14459322/230513 */
public class UnitPrice {

    private static XYDataset createDataset() {
        LabeledXYDataset ds = new LabeledXYDataset();
        ds.add(11,  0, "");
        ds.add(12, 68, "A");
        ds.add(13, 65, "B");
        ds.add(14, 67, "C");
        ds.add(15, 69, "D");
        ds.add(16, 60, "F");
        ds.add(17, 83, "G");
        ds.add(18, 86, "H");
        ds.add(19, 70, "I");
        ds.add(20, 60, "J");
        ds.add(21, 55, "K");
        ds.add(22, 54, "L");
        ds.add(23, 50, "M");
        return ds;
    }

    private static class LabeledXYDataset extends AbstractXYDataset {

        private static final int N = 26;
        private List<Number> x = new ArrayList<Number>(N);
        private List<Number> y = new ArrayList<Number>(N);
        private List<String> label = new ArrayList<String>(N);

        public void add(double x, double y, String label){
            this.x.add(x);
            this.y.add(y);
            this.label.add(label);
        }

        public String getLabel(int series, int item) {
            return label.get(item);
        }

        @Override
        public int getSeriesCount() {
            return 1;
        }

        @Override
        public Comparable getSeriesKey(int series) {
            return "Unit";
        }

        @Override
        public int getItemCount(int series) {
            return label.size();
        }

        @Override
        public Number getX(int series, int item) {
            return x.get(item);
        }

        @Override
        public Number getY(int series, int item) {
            return y.get(item);
        }
    }

    private static class LabelGenerator implements XYItemLabelGenerator {

        @Override
        public String generateLabel(XYDataset dataset, int series, int item) {
            LabeledXYDataset labelSource = (LabeledXYDataset) dataset;
            return labelSource.getLabel(series, item);
        }

    }

    private static JFreeChart createChart(final XYDataset dataset) {
        NumberAxis domain = new NumberAxis("Unit");
        NumberAxis range = new NumberAxis("Price");
        domain.setAutoRangeIncludesZero(false);
        XYItemRenderer renderer = new XYLineAndShapeRenderer(true, false);
        renderer.setBaseItemLabelGenerator(new LabelGenerator());
        renderer.setBaseItemLabelPaint(Color.green.darker());
        renderer.setBasePositiveItemLabelPosition(
            new ItemLabelPosition(ItemLabelAnchor.CENTER, TextAnchor.CENTER));
        renderer.setBaseItemLabelFont(
            renderer.getBaseItemLabelFont().deriveFont(14f));
        renderer.setBaseItemLabelsVisible(true);
        renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator());
        XYPlot plot = new XYPlot(dataset, domain, range, renderer);
        JFreeChart chart = new JFreeChart(
            "Unit Price", JFreeChart.DEFAULT_TITLE_FONT, plot, false);
        return chart;
    }

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        XYDataset dataset = createDataset();
        JFreeChart chart = createChart(dataset);
        ChartPanel chartPanel = new ChartPanel(chart) {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 320);
            }
        };
        f.add(chartPanel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T12:27:48.033

使用 XYTextAnnotation

[![图表窗口截图](../Images/8cb830ac28944f8d9f794f6bcbdcd45f.png)](https://i.stack.imgur.com/uWMGu.jpg)

```
for(int i = 0; i < data.length; i++){
        XYTextAnnotation textAnnotaion = new XYTextAnnotation("" + data[i][anotation], data[i][X], data[i][Y]);
        plot.addAnnotation(textAnnotaion);
    } 
```

# python - 为 Python 类变量定义 __getattr__ 和 __setattr__

> ID：14458403
> 
> 赞同：1
> 
> 时间：2013-01-22T12:19:14.960
> 
> 标签：python, class, setter

> **可能重复：**
> [python 是否有类似于 __setattr__ 但用于 python 类的方法？](https://stackoverflow.com/questions/6808012/does-python-has-methods-similar-to-setattr-but-for-python-class)

我正在尝试创建自己的表单框架，可以像这样定义表单：

```
class LoginForm(forms.Form):
    username = forms.Input(type='text',validators=[validators.Required(),validators.len(3,10)])
    pass‹ord = forms.Input(type='password', validators=[validators.Required(),validators.len(min=8)]) 
```

这些 Input 实例也有一个 property `name`，但如果必须将它作为参数传递给构造函数，这看起来很愚蠢，因为您已经用变量名命名了它。于是我在repl中做了一个非常非常简单的测试：

```
class Base:
    @classmethod
    def __setattr__(cls, key, value):
        cls.__dict__[key] = value
        cls.__dict__[key].name = key

class PropClass:
    pass

class SubClass(Base):
    x = PropClass()

SubClass().x.name 
```

我希望这会返回“x”，但事实并非如此。

现在，我已经在 Form 构造函数中放置了一些代码，它遍历它的**dict**，检查 Field 实例，并设置它们的名称，这对我来说同样有效，但我仍然很好奇是否可以定义 setter类变量。

# jquery - CSS - z-index/绝对定位问题。链接后面需要一个 div

> ID：14458409
> 
> 赞同：0
> 
> 时间：2013-01-22T12:19:21.683
> 
> 标签：jquery, css, menu, z-index, css-position

我正在开发 jQuery 中的自定义菜单并在学习中学习。到目前为止，在我启动下拉菜单之前，我大部分时间都做得很好。我的下拉列表中的 div 与我的链接重叠，并且链接变得不可点击。当你测试代码时，你会明白你的意思。任何帮助表示赞赏。 [这是 jsFiddle 的链接](http://jsfiddle.net/Y9knm/1/)

这是我的CSS：

```
li {
    background-color: #ccc;
    position: relative;
    color: #fff;
    z-index: -2;
    float: left;
}
div.menu-item {
    background-color: #000;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 10px;
    z-index: -1;
}
a.menu-text {
    display: block;
    color: #fff;
    margin: 0;
    padding: 10px;
    padding-bottom: 15px;
}
div.dropdown {
    display: none;
    position: absolute;
}
div.dropdown-item {
    position: relative;
    background-color: #1E4b55;
}
div.dropdown-item a {
    padding: 10px;
    padding-left: 15px;
    display: block;
    white-space: nowrap;
    color: #fff;
}
div.dropdown-left {
    height: 100%;
    width: 10px;
    background-color: #000;
    position: absolute;
    top: 0;
    left: 0;
} 
```

这是我的 HTML

```
<div>
    <ul>
        <li>
            <div class="menu-item"></div>
            <a class="menu-text" href="#">text</a>
            <div class="dropdown">
                <div class="dropdown-item"><div class="dropdown-left"></div><a href="#">item 1</a>

                </div>
                <div class="dropdown-item"><a href="#">item 2</a>

                </div>
                <div class="dropdown-item"><a href="#">item 3</a>

                </div>
            </div>
        </li>
        <li>
            <div class="menu-item"></div>
            <a class="menu-text" href="#">texttexttext</a>
        </li>
        <li>
            <div class="menu-item"></div>
            <a class="menu-text" href="#">tetexttexttexttexttexttexttextxt</a>
        </li>
    </ul>
</div> 
```

这是我的javascript：

```
$(function () {
    $("li").hover(
    function () {
        $(this).find('div.menu-item').stop().animate({
            height: '100%'
        }, {
            duration: 700,
            specialEasing: {
                height: 'easeOutQuint'
            }
        });
        $(this).find('div.dropdown').slideDown();
    },

    function () {
        $(this).find('div.menu-item').stop().animate({
            height: '10px'
        }, 700);
        $(this).find('div.dropdown').stop().slideUp();
    });
    $("div.dropdown-item").hover(
        function(){
            $(this).find('div.dropdown-left').stop().animate({
                width: '100%'
            }, {
                duration: 700,
                specialEasing: {
                    width: 'easeOutQuint'
                }
            });
        },
        function(){
            $(this).find('div.dropdown-left').stop().animate({
                width: '10px'
            }, 500);
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:30:08.370

添加

```
div.dropdown-item a {
    position: relative;
} 
```

[http://jsfiddle.net/Y9knm/2/](http://jsfiddle.net/Y9knm/2/)

# python - 如何在python中获取结构对象的地址？

> ID：14458413
> 
> 赞同：3
> 
> 时间：2013-01-22T12:19:28.727
> 
> 标签：python, kernel

我正在使用 ioctl 调用进行内核模块编程，以在用户空间和内核空间之间进行通信。我计划在 python 中制作用户空间 api。

为了在内核和用户空间之间传递数据，ioctl 调用使用地址，并且使用 copy_to_user 或 copy_from_user 复制数据。这里的地址由 给出`unsigned long arg`。

`int ioctl(struct inode *inode,struct file *filp,unsigned int cmd,unsigned long arg)`

在 C 用户空间编程中，传递地址是微不足道的。我想做的是使用python的[struct](http://docs.python.org/2/library/struct.html)来创建一个与我在内核模块中定义的结构兼容的结构，并使用来自python的[fcntl](http://docs.python.org/2/library/fcntl.html)模块的ioctl传递填充的python结构。

是否可以？如果可能的话，我如何在 ioctl 调用中传递 python struct 的地址？

我不想使用 ctypes，或者用 c 扩展 python。纯python代码，是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:21:10.900

也许 ctypes-module 会在这里帮助你，尤其是[这个部分](http://docs.python.org/2/library/ctypes.html#passing-pointers-or-passing-parameters-by-reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:24:41.460

[fcntl 文档](http://docs.python.org/2/library/fcntl.html)向您展示了如何执行此操作的示例。他们使用`struct`and `array`，但您也可以使用纯字符串。如果传递一个可变缓冲区并且`mutate_flag`为 True，则实际的后备缓冲区将传递给 OS 调用。如果它是不可变的，则将传递一个副本，并且调用将返回缓冲区中的结果更改。请参阅[fcntl.ioctl()](http://docs.python.org/2/library/fcntl.html#fcntl.ioctl)的文档。

所以你不必关心支持结构的缓冲区的地址。只需将其作为`struct`or传递`string`。

# iphone - 当我们在iphone中输入文本时如何显示UItextfield的键盘上方？

> ID：14458415
> 
> 赞同：3
> 
> 时间：2013-01-22T12:19:32.130
> 
> 标签：iphone, ios, uiscrollview, uitextfield, uitextfielddelegate

我有一个`UITextfield`我正在输入的值。我不想滚动自己或调整`keyboard`自己，我想`Keyboard`在输入文本时自动调整自己`UITextfield`并始终显示在`textfield`.

专家的任何提示都将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:30:15.467

这是我使用过的一些代码。基本上，我们要做的是在`UITextField`获得焦点时为视图的位置设置动画。为此，我们必须让我们成为我们`UIViewController`的代表`UITextFields`

**`float animatedDistance`**在文件的 .h 中定义一个变量

```
 @interface <ClassName>

    float animatedDistance;

 @end

 static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
 static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
 static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
 static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 216;
 static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 162;

 - (void)textFieldDidBeginEditing:(UITextField *)textField
 {
     CGRect textFieldRect = [self.view.window convertRect:textField.bounds fromView:textField];
     CGRect viewRect = [self.view.window convertRect:self.view.bounds fromView:self.view];

     CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
     CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
     CGFloat denominator = (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;
     CGFloat heightFraction = numerator / denominator;

     if (heightFraction < 0.0)
     {
         heightFraction = 0.0;
     }
     else if (heightFraction > 1.0)
     {
         heightFraction = 1.0;
     }

     UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
     if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
     {
         animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
     }
     else
     {
         animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
     }

     CGRect viewFrame = self.view.frame;
     viewFrame.origin.y -= animatedDistance;

     [UIView beginAnimations:nil context:NULL];
     [UIView setAnimationBeginsFromCurrentState:YES];
     [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

     [self.view setFrame:viewFrame];

     [UIView commitAnimations];
     }
 } 
```

Now that the view has been 'pushed up' when a `UITextField`is selected, we want to make sure that we slide it back down when we're done:

```
 - (void) textFieldDidEndEditing:(UITextField *)textField
 {
     CGRect viewFrame = self.view.frame;
     viewFrame.origin.y += animatedDistance;

     [UIView beginAnimations:nil context:NULL];
     [UIView setAnimationBeginsFromCurrentState:YES];
     [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

     [self.view setFrame:viewFrame];

     [UIView commitAnimations];
 } 
```

有关更多信息，请访问[Apple 文档](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/ManageTextFieldTextViews/ManageTextFieldTextViews.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:28:10.293

当文本字段开始编辑时，为包含文本字段的视图的框架 (viewcontroller.view.frame.origin.y - 215) 设置动画，并在完成时返回。

使用 UITextfieldDelegate 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T13:41:20.733

你可以使用[这个](https://github.com/michaeltyson/TPKeyboardAvoiding)课程来帮助你做需要的事情。您需要做的就是将该 UITableView 的类设为 TPKeyboardAvoidingTableView。UIScrollView 和 UICollectionView 相同。您可以使用这些类来避免使用键盘。

希望这可以帮助。如果是，请接受。;) 谢谢和干杯。

# php - MySQL 函数 Create Table 给了我一个语法错误

> ID：14458418
> 
> 赞同：0
> 
> 时间：2013-01-22T12:19:34.573
> 
> 标签：php, mysql, database, create-table

我正在创建一个登录表单，我创建了数据库，现在我正在使用这个函数创建表：

```
function CreateTable()
{
    $qry = "CREATE TABLE $this->tablename (
            'id' INT NOT NULL AUTO_INCREMENT ,
            'name' VARCHAR( 128 ) NOT NULL ,
            'email' VARCHAR( 64 ) NOT NULL ,
            'phone_number' VARCHAR( 16 ) NOT NULL ,
            'username' VARCHAR( 16 ) NOT NULL ,
            'password' VARCHAR( 32 ) NOT NULL ,
            'confirmcode' VARCHAR(32) ,
            PRIMARY KEY ('id')
            )";

    if(!mysql_query($qry,$this->connection))
    {
        $this->HandleDBError("Error creating the table \nquery was\n $qry");
        return false;
    }
    return true;
} 
```

问题是每次我尝试登录以测试表单时都会收到此错误：

> 创建表查询时出错是 CREATE TABLE ( 'id' INT NOT NULL AUTO_INCREMENT , 'name' VARCHAR( 128 ) NOT NULL , 'email' VARCHAR( 64 ) NOT NULL , 'phone_number' VARCHAR( 16 ) NOT NULL , 'username' VARCHAR( 16 ) NOT NULL , 'password' VARCHAR( 32 ) NOT NULL , 'confirmcode' VARCHAR(32) , PRIMARY KEY ('id') ) mysqlerror:你的SQL语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '( 'id' INT NOT NULL AUTO_INCREMENT , 'name' VARC' 附近使用正确的语法

所以很明显那行有一个语法错误，但由于我没有 PHP 经验，所以我看不出错误在哪里！

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:22:37.807

您正在使用引号而不是反引号。是的，似乎没有将标签名称传递给函数。您的函数应该看起来更像这样：

```
function CreateTable($tableName)
{
    $qry = "CREATE TABLE IF NOT EXISTS $tableName (
            `id` INT NOT NULL AUTO_INCREMENT ,
            `name` VARCHAR( 128 ) NOT NULL ,
            `email` VARCHAR( 64 ) NOT NULL ,
            `phone_number` VARCHAR( 16 ) NOT NULL ,
            `username` VARCHAR( 16 ) NOT NULL ,
            `password` VARCHAR( 32 ) NOT NULL ,
            `confirmcode` VARCHAR(32) ,
            PRIMARY KEY (`id`)
            );";

    if(!mysql_query($qry,$this->connection))
    {
        $this->HandleDBError("Error creating the table \nquery was\n $qry");
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:38:30.070

执行以下操作：

```
function Insert($tableName)
{
$tableName = newtable;
$insert_query = "insert into $tableName( name, email, username, password, confirmcode ) values ("bob", "bobsemailadress@hotmail.com", 911, "bob2013", "secrete", "1");";

    if(!mysql_query($qry,$this->connection))
    {
        $this->HandleDBError("Error inserting into the table \nquery was\n $qry");
        return false;
    }
    return true;
} 
```

我不知道您在插入时使用了哪个代码，所以我做了一些假设。此外，这基本上是另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:29:06.250

你为什么不直接使用 HeidiSql 创建你的数据库，然后连接你的表单？？？？这要容易得多。并且当使用 heidi 时，你不会得到任何 sql 错误，除非你编写了错误的 php 代码来插入、更新和删除数据库中的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T12:22:39.107

表名不是在这里

```
CREATE TABLE ( 'id' INT NOT NULL AUTO_INCREMENT , 'name' VARCHAR( 128 ) NOT NULL , 'email' VARCHAR( 64 ) NOT NULL , 'phone_number' VARCHAR( 16 ) NOT NULL , 'username' VARCHAR( 16 ) NOT NULL , 'password' VARCHAR( 32 ) NOT NULL , 'confirmcode' VARCHAR(32) , PRIMARY KEY ('id') ) 
```

应该是这样的

```
CREATE TABLE `table` ( 'id' INT NOT NULL AUTO_INCREMENT , 'name' VARCHAR( 128 ) NOT NULL , 'email' VARCHAR( 64 ) NOT NULL , 'phone_number' VARCHAR( 16 ) NOT NULL , 'username' VARCHAR( 16 ) NOT NULL , 'password' VARCHAR( 32 ) NOT NULL , 'confirmcode' VARCHAR(32) , PRIMARY KEY ('id') ) 
```

所以检查你的`$this->tablename`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T12:23:51.923

尝试`$this->tablename`用括号括起来，即

```
$qry = "CREATE TABLE {$this->tablename} ( ... )"; 
```

此外，您不能使用单引号来引用字段名称（这些通常在 SQL 中引用字符串）。您应该改用反引号 (`)。

# c++ - OpenCV 库的内存问题

> ID：14458421
> 
> 赞同：1
> 
> 时间：2013-01-22T12:19:50.360
> 
> 标签：c++, opencv, memory-leaks, type-conversion, cimg

我需要将使用[CImg 库](http://cimg.sourceforge.net/)加载的图像转换为可以在 OpenCV 中使用的图像格式。

问题是 CImg 创建了 uchar 数组，其中数据以下列方式存储（在 3 通道图像的情况下）：

1.  首先是红色通道的像素，
2.  然后绿色通道的所有像素都跟随，
3.  然后 - 蓝色通道。

它看起来像这样：RRRRRR .... GGGGGG ... BBBBB B ...

OpenCV 以不同的方式存储数据：BGRBGRBGRBG R...

这是我从 CImg 转换为 IplImage 的代码：

```
CImg<uint8_t> src;
src.load_jpeg_buffer(srcData, size);
size_t width = src._width;
size_t height = src._height;
size_t nChannels = src._spectrum;
size_t depth = 8;

IplImage* m_image = cvCreateImage(cvSize(width, height), depth, nChannels); 
for(size_t i = 0; i < height; i++)
{
    for(size_t j = 0; j < width;j++)
    {
        for(size_t k = 0; k < nChannels; k++)
        { 
            ((m_image->imageData + i * m_image->widthStep))[j * nChannels + nChannels - 1 - k] =
                    src._data[k * src.size() / 3 + k + (i * m_image->widthStep + j * nChannels) / 3];   
        }
    }
} 
```

这段代码运行良好。OpenCV 格式的转换图像是原始图像的完整副本。

**我用 valgrind 测试了这段代码。它说它会导致很多内存问题。我找不到这个内存问题的原因。**

I will be grateful, if you have any ideas on this matter! Or may be you know another method, which can load image from buffer in OpenCV (not cvDecodeImage).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:50:15.927

The problems weren't in my code. As I found out **OpenCV library functions** cause memory problems. Examples of messages of valgrind are:

```
Use of uninitialised value of size 8
==16460==    at 0x6500539: void cv::CvtColorLoop<cv::RGB2Gray<unsigned char> >(cv::Mat const&, cv::Mat&, cv::RGB2Gray<unsigned char> const&) (in /usr/local/lib/libopencv_imgproc.so.2.4.2) 

==16488== 151,812 bytes in 1 blocks are possibly lost in loss record 3,419 of 3,425
==16488==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==16488==    by 0x56A2470: cv::fastMalloc(unsigned long) (in /usr/local/lib/libopencv_core.so.2.4.2)

==16488== LEAK SUMMARY:
==16488==    definitely lost: 19,988 bytes in 171 blocks
==16488==    indirectly lost: 15,201,012 bytes in 311 blocks
==16488==      possibly lost: 1,202,769 bytes in 3,618 blocks
==16488==    still reachable: 693,651 bytes in 3,733 blocks
==16488==         suppressed: 0 bytes in 0 blocks 
```

# apache - htaccess 保护要求每个静态文件

> ID：14458423
> 
> 赞同：2
> 
> 时间：2013-01-22T12:19:54.100
> 
> 标签：apache, .htaccess

我对我当前的项目有一个 htacces 保护：

```
<filesMatch "\.(htm|html|php)$">
    AuthGroupFile /dev/null
    AuthName "secured"
    AuthType Basic
    AuthUserFile /var/www/html/web/.htpasswd
    require valid-user
</filesMatch> 
```

保护工作正常，但我的静态文件来自 aws cloudfront，有些文件也要求提供 htaccess 凭据。我能做些什么来阻止这种情况？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:54:08.847

```
AuthType Basic
AuthName "Restricted Area"
AuthUserFile /var/www/html/web/.htpasswd
AuthGroupFile /dev/null 
Require valid-user
SetEnvIf Host cloudfront.net allow
SetEnvIf Request_URI "(status.php)$"  allow
SetEnvIf Request_URI "(appredirect.html)$"  allow
Order allow,deny
Allow from env=allow
Satisfy 
```

这是当前设置，但允许主机 cloudfront.net 没有帮助。

# image - 在 TChart 上显示图像（Borland Delphi 7）

> ID：14458424
> 
> 赞同：0
> 
> 时间：2013-01-22T12:19:56.163
> 
> 标签：image, delphi, delphi-7, pascal, teechart

我的`TChart`Borland Delphi 7 项目中有一个。我想要做的是在图表上绘图时使用图像而不是点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:38:39.157

我不确定你到底想达到什么目的。

1.  请参阅 TImagePoint 系列。在“所有功能\欢迎！\图表样式\其他\图像点”中查找示例

2.  见`BackWall.Brush.Image`物业。在“All features\Welcome !\Miscellaneous\Walls\Back Wall\Brush image”中查找示例。请注意，您可能必须将后墙渐变设置为不可见才能使图像出现。

这些示例包含在[TeeChart 编译的演示中](https://www.steema.com/download/vcl)

# html - 将 doc 转换为带有样式的 html

> ID：14458431
> 
> 赞同：0
> 
> 时间：2013-01-22T12:20:25.690
> 
> 标签：html, xhtml, html-parsing, apache-poi, doc

**使用Apache POI**的**HWPFDocument**类将**.doc**文件转换为**html**文本时，我遇到了样式问题。另一个问题是它也像这样转换样式标签：

 ****```
.b1{white-space-collapsing:preserve;} .b2{margin: 1.1798611in 1.1798611in 1.1798611in 1.1798611in;} .s1{font-weight:bold;color:black;} .s2{color:black;} .s3{font-style:italic;color:black;} .p1{text-align:center;hyphenate:none;font-family:Times New Roman;font-size:12pt;} .p2{text-align:justify;hyphenate:none;font-family:Times New Roman;font-size:12pt;} .p3{text-align:end;hyphenate:none;font-family:Times New Roman;font-size:12pt;}

Main Title 
```

这是我的代码：

```
HWPFDocumentCore wordDocument = WordToHtmlUtils.loadDoc(multipartFile.getInputStream());

WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(
DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
wordToHtmlConverter.processDocument(wordDocument);
org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
ByteArrayOutputStream out = new ByteArrayOutputStream();
DOMSource domSource = new DOMSource(htmlDocument);
StreamResult streamResult = new StreamResult(out);

TransformerFactory tf = TransformerFactory.newInstance();
Transformer serializer = tf.newTransformer();
serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
serializer.setOutputProperty(OutputKeys.INDENT, "yes");
serializer.setOutputProperty(OutputKeys.METHOD, "html");
serializer.transform(domSource, streamResult);
out.close();

String html = new String(out.toByteArray()); 
```

我需要的只是将 .doc 文件的内容正确转换为 HTML 文本格式。****

# ios - 无法使用文字整数访问我的 NSArray 但动态工作

> ID：14458434
> 
> 赞同：0
> 
> 时间：2013-01-22T12:20:39.357
> 
> 标签：ios, objective-c, xcode, exception, nsarray

我无法使用文字整数访问 NSArray 数据，它会引发一些异常，索引 bouds (0 , 0) 但实际上这是错误的，因为如果我动态循环它，它就可以工作......我的代码：

```
 for (NSString *cada in barcos)
        {
            NSArray *datos = [cada componentsSeparatedByString:@";"];
            NSString *consulta = [NSString stringWithFormat:@"INSERT OR REPLACE INTO Barco (ID,Zona,Nombre,Matricula,Imagen) VALUES ('%d','%@',\"%@\",\"\",\"%@\");",contador,[datos objectAtIndex:0],[datos objectAtIndex:1],[datos objectAtIndex:2]];
            insert_stmt = (char *)[consulta UTF8String];
            sqlite3_prepare_v2(db, insert_stmt, -1, &statement, NULL);
            sqlite3_finalize(statement);
            contador++;
        } 
```

我对此进行了测试并且可以工作......但我不希望这样：

```
 for (NSString *cada in barcos)
        {
            NSArray *datos = [cada componentsSeparatedByString:@";"];
            for (int c = 0; c < [datos count]; c++)
                NSLog(@"%@",[datos objectAtIndex:c]);
            // It prints all very good, there is only 0 to 2 position always
        } 
```

编辑：

```
 for (NSString *cada in barcos)
        {
            NSArray *datos = [cada componentsSeparatedByString:@";"];
            for (int c = 0; c < [datos count]; c++)
            {
                NSLog(@"posicion array %d - dato: %@",c,[datos objectAtIndex:c]);
            }// Here we are good, the loop is OK
            NSString *consulta = [NSString stringWithFormat:@"INSERT OR REPLACE INTO Barco (ID,Zona,Nombre,Matricula,Imagen) VALUES ('%d','%@',\"%@\",\"\",\"%@\");",contador,[datos objectAtIndex:0],[datos objectAtIndex:1],[datos objectAtIndex:2]]; // Here crash, cannot go to objectAtIndex:1
            /*insert_stmt = (char *)[consulta UTF8String];
            sqlite3_prepare_v2(db, insert_stmt, -1, &statement, NULL);
            sqlite3_finalize(statement);*/
            contador++;
        } 
```

我的数组打印了这个：

```
2013-01-22 12:54:36.386 whales[4076:707] posicion array 0 - dato: Spirit of the seas
2013-01-22 12:54:36.403 whales[4076:707] posicion array 1 - dato: spirit_of_the_seas.bmp
2013-01-22 12:54:36.410 whales[4076:707] posicion array 2 - dato: 1
2013-01-22 12:54:36.419 whales[4076:707] posicion array 0 - dato: Nashira I
2013-01-22 12:54:36.425 whales[4076:707] posicion array 1 - dato: nashira1.bmp
2013-01-22 12:54:36.432 whales[4076:707] posicion array 2 - dato: 2
2013-01-22 12:54:36.441 whales[4076:707] posicion array 0 - dato: Tina Excursiones
2013-01-22 12:54:36.448 whales[4076:707] posicion array 1 - dato: tinaexcursiones.bmp
2013-01-22 12:54:36.454 whales[4076:707] posicion array 2 - dato: 3
2013-01-22 12:54:36.461 whales[4076:707] posicion array 0 - dato: Catlanza
2013-01-22 12:54:36.467 whales[4076:707] posicion array 1 - dato: catlanza.bmp
2013-01-22 12:54:36.473 whales[4076:707] posicion array 2 - dato: 3
2013-01-22 12:54:36.478 whales[4076:707] posicion array 0 - dato: 
```

那是我的 for + NSLog 所以没关系，但手动不行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:54:25.613

使用 if 保护对数组的访问：

```
if( datos.count>=3)
{
    NSString *consulta = [NSString stringWithFormat:@"INSERT OR REPLACE INTO Barco (ID,Zona,Nombre,Matricula,Imagen) VALUES ('%d','%@',\"%@\",\"\",\"%@\");",contador,[datos objectAtIndex:0],[datos objectAtIndex:1],[datos objectAtIndex:2]];
}
else
{
    NSLog(@"datos count is %u",datos.count);
} 
```

这将使您了解 datos 数组何时没有 3 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:16:14.627

我的解决方法是：

```
 for(int c = 0; c < ([barcos count] - 1); c++)
        {
            NSArray *datos = [[barcos objectAtIndex:c] componentsSeparatedByString:@";"];
            NSString *consulta = [NSString stringWithFormat:@"INSERT OR REPLACE INTO Barco (ID,Zona,Nombre,Matricula,Imagen) VALUES ('%d','%@',\"%@\",\"\",\"%@\");",contador,[datos objectAtIndex:0],[datos objectAtIndex:1],[datos objectAtIndex:2]];
            insert_stmt = (char *)[consulta UTF8String];
            sqlite3_prepare_v2(db, insert_stmt, -1, &statement, NULL);
            sqlite3_finalize(statement);
            contador++;
        } 
```

如此简单的解决方案...

# internet-explorer - 我可以在 Ubuntu 中使用 Watir Webdriver 运行 Internet Explorer 吗？

> ID：14458437
> 
> 赞同：2
> 
> 时间：2013-01-22T12:21:03.943
> 
> 标签：internet-explorer, ubuntu, cucumber, watir-webdriver

[http://watirwebdriver.com/internet-explorer/](http://watirwebdriver.com/internet-explorer/) hier 我明白了，Watir-Webdriver 只能在 Windows 下启动 IE。但它甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:13:28.343

watir-webdriver 库依赖于 WebDriver 项目，WebDriver 的 IE 驱动只支持 Windows。IE 仅在 Windows 上受支持。您可能很想尝试 Wine 项目或其他一些 Linux 到 Windows 的桥接库来尝试在 Linux 上运行它。你甚至可以让它工作。但是，当您遇到问题时，几乎可以保证您会遇到问题，您只能靠自己解决问题。IE 驱动程序和 IE 本身都没有通过这样的桥接库进行任何程度的测试，因此没有一个开发人员可以确定桥接环境不是问题的根本原因。

鉴于当今虚拟机技术无处不在，使用运行 Windows 许可副本的虚拟机要好得多。Microsoft 甚至使虚拟机映像可用于使用 IE 进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:10:09.007

您只能在 Windows 上安装 Internet Explorer，因此 Watir 只能在 Windows 上驱动它。

# tomcat - 如何修复Tomcat请求的烦人的授权弹出窗口？

> ID：14458440
> 
> 赞同：1
> 
> 时间：2013-01-22T12:21:12.667
> 
> 标签：tomcat, http-status-code-401

我正在尝试访问托管在 Tomcat 6 服务器上的 Web 服务。当我在浏览器中输入 wsdl url 时，系统会提示我输入凭据。

我收到一个弹出窗口来输入用户名和密码。

```
A user name and password are being requested by http://localhost:8080\. The site says: MyApplicationName 
```

我提供了我的应用程序登录详细信息。但它一次又一次地提示着我。当我单击取消时，我收到 401 未经授权的异常。

**tomcat-users.xml**

```
 <?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
   <user name="admin" password="" roles="manager"/>
</tomcat-users> 
```

**server.xml**有一些细节如下

```
<Server port="8205" shutdown="SHUTDOWN" debug="2">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <Service name="Catalina" debug="2">

    <Connector port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" 
               scheme="http"
               secure="false"
               SSLEnabled="false"
               debug="2"
               emptySessionPath="true"
               URIEncoding="UTF-8" />

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <Engine name="Catalina" defaultHost="localhost"
         debug="2">

      <Realm className="org.apache.catalina.realm.MemoryRealm"/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name="localhost" appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false"
            debug="2">

             <Context path="" docBase="C:\mypath\app.war" debug="2"></Context>        

        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>

      </Host>
    </Engine>
  </Service>
</Server> 
```

**Web.xml**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <servlet>
        <servlet-name>default</servlet-name>
        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
        <init-param>
            <param-name>debug</param-name>
            <param-value>0</param-value>
        </init-param>
        <init-param>
            <param-name>listings</param-name>
            <param-value>false</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>jsp</servlet-name>
        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
        <init-param>
            <param-name>fork</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>xpoweredBy</param-name>
            <param-value>false</param-value>
        </init-param>
        <load-on-startup>3</load-on-startup>
    </servlet>

</web-app> 
```

有人可以告诉我如何删除此弹出窗口或我需要输入什么用户名和密码。它是我的应用程序特定的还是 tomcat 特定的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T18:48:10.197

我也面临同样的问题。经过数小时的故障排除并尝试了此线程和其他类似线程中提到的所有可能的解决方案，我无法解决问题。然后我可以确定我突然开始面临这个问题，因为我最近在我的机器上安装了 Oracle，它使用了相同的端口 8080。我已经更改了 server.xml 文件中的端口号，现在工作正常..

以下是更改的片段：

```
 <Connector port="8081" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:57:40.370

尝试将以下内容放在服务标记上方的最后一个侦听器标记下方：

```
<GlobalNamingResources>
<Resource name="UserDatabase" auth="Container"
          type="org.apache.catalina.UserDatabase"
          description="User database that can be updated and saved"
          factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
          pathname="conf/tomcat-users.xml" />
</GlobalNamingResources> 
```

然后在下面

```
<Engine name="Catalina" defaultHost="localhost"
     debug="2"> 
```

添加：

```
<Realm className="org.apache.catalina.realm.UserDatabaseRealm"
         resourceName="UserDatabase"/> 
```

确保将 UserDatabase 资源中的路径名更改为 tomcat-users.xml 文件的正确路径。您需要重新启动 tomcat 才能使更改生效。

# jqgrid - 多选 jqgrid：id 列格式化程序是整数，但 selrrrow 返回字符串数组

> ID：14458441
> 
> 赞同：0
> 
> 时间：2013-01-22T12:21:14.273
> 
> 标签：jqgrid, jqgrid-formatter

我的列模型为 -

```
colModel: [{name:'id',index:'id', width:200, formatter:'integer', hidden:true}, 
```

我看到来自服务器的 json 数据以 id 字段的值作为整数返回，但`$('#list').getGridParam('selarrrow')`给了我一个字符串数组。为什么？无论如何我可以将它作为一个整数数组来获取吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:13:39.263

这`formatter: "integer"`意味着只需插入千位分隔符（`,`或`.`从您使用的语言文件中）。

`id`任何 HTML 元素（包括`<tr>`表示网格的行）的属性不包含其他数据类型作为字符串。jqGrid`id`也总是解释为字符串。

# objective-c - 为什么文本不显示 UIButton

> ID：14458442
> 
> 赞同：0
> 
> 时间：2013-01-22T12:21:14.537
> 
> 标签：objective-c, uibutton

```
UIImage *segmentSelected = [[UIImage imageNamed:@"Button_on"] resizableImageWithCapInsets2:UIEdgeInsetsMake(7, 7, 7, 7)];
UIImage *segmentUnselected = [[UIImage imageNamed:@"Button_off"] resizableImageWithCapInsets2:UIEdgeInsetsMake(7, 7,7,7)];

for (UIButton * button in @[self.catalog,self.business]) {
    [button setBackgroundImage:segmentSelected forState:UIControlStateSelected];
    [button setBackgroundImage:segmentUnselected forState:UIControlStateNormal];
}
self.business.selected=true;
[self.business setTitle:@"Business" forState:UIControlStateNormal];
[self.catalog setTitle:@"Catalog" forState:UIControlStateNormal]; 
```

结果是只有当我按住按钮时才会显示文本。默认情况下不是。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:46:20.380

为所有状态设置标题：

```
[self.business setTitle:@"Business" forState:UIControlStateNormal];
[self.catalog setTitle:@"Catalog" forState:UIControlStateNormal];
[self.business setTitle:@"Business" forState: UIControlStateHighlighted];
[self.catalog setTitle:@"Catalog" forState: UIControlStateHighlighted];
[self.business setTitle:@"Business" forState: UIControlStateSelected];
[self.catalog setTitle:@"Catalog" forState: UIControlStateSelected]; 
```

工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:06:56.343

这必须是一个错误。

将文本颜色更改为另一种颜色可以解决问题。但我想要白色。所以我所做的是颜色中有 2 个白框。

“默认”白色和“白色”白色。

将东西更改为白色白色，瞧，它起作用了。

# java - 用什么代替 org.jboss.resteasy.client.ClientRequest？

> ID：14458450
> 
> 赞同：28
> 
> 时间：2013-01-22T12:21:44.770
> 
> 标签：java, jboss, resteasy

我刚刚发现它`org.jboss.resteasy.client.ClientRequest`已被弃用，使我在 Google 上找到的关于如何使用`RESTEasy`客户端的所有内容都无效。[Javadoc](http://docs.jboss.org/resteasy/docs/3.0-beta-1/javadocs/org/jboss/resteasy/client/ClientRequest.html)没有说明要改用什么。谷歌同样保持沉默。

我现在已经恢复`2.3.5`，但无论如何都会对答案感兴趣，以及一个人应该如何在不询问其他知道的人的情况下找到答案 - 有没有我可以查看的包含该信息的资源？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T04:28:44.213

[此处](http://docs.jboss.org/resteasy/docs/3.0-beta-1/userguide/html_single/index.html#d4e2018)的 3.0 beta 文档描述了这些弃用，如下所示：

> Resteasy 手动客户端 API、拦截器、StringConverters、StringParamterConverters 和 Async HTTP API 都已被弃用，可能会在以后的版本中删除。现在，这些东西中的每一个都有一个 JAX-RS 2.0 等效项。

这意味着首选方法是使用本文中描述的 JAX-RS 客户端[API](https://web.archive.org/web/20121015171154/http://weblogs.java.net/blog/spericas/archive/2011/10/20/jax-rs-20-client-api-generic-interface)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-02T00:59:22.913

如果我们假设在`http://example.org/pizza/{id}.json`, 有一个 JSON API（其中 'id' 是一个披萨 ID），它会返回如下结果

```
{ 
  "name": "Hawaiian",
  "toppings": ["tomato", "ham", "cheese", "pineapple"]
} 
```

在[`Invocation.Builder`Javadocs](http://docs.jboss.org/resteasy/docs/3.0.4.Final/javadocs/javax/ws/rs/client/Invocation.Builder.html)的基础上，我们可以做这样的事情，

```
import javax.ws.rs.client.Client;
import javax.ws.rs.client.ClientBuilder;
import javax.ws.rs.client.Invocation;
import org.glassfish.jersey.jackson.JacksonFeature;

public class PizzaClient {
    private Client client;

    public PizzaClient() {
         client = ClientBuilder.newClient();
         // enable POJO mapping using Jackson - see
         // https://jersey.java.net/documentation/latest/user-guide.html#json.jackson
         client.register(JacksonFeature.class); 
    }

    /** POJO which maps to JSON results using Jackson */
    public static class Pizza {
        private String name;
        private String[] toppings;

        public String getName() { return name; }
        public String[] getToppings() { return toppings ; }
    }

    public Pizza getPizzaById(String id) {
        String uri = String.format("http://example.org/pizza/%s.json", id)
        Invocation.Builder bldr = client.target(uri).request("application/json");
        return bldr.get(Pizza.class);
    }

    public static void main(String[] args) {
       PizzaClient pc = new PizzaClient();
       Pizza pizza = pc.getPizzaById("1");
       System.out.println(pizza.getName() + ":");
       for (String topping : pizza.getToppings()) {
            System.out.println("\t" + topping);
       }
    }
} 
```

（这也得到了[这篇文章的](http://guidogarcia.net/blog/2012/03/02/how-to-develop-java-rest-client/)帮助，尽管它使用了已弃用的 API）。

另请注意，如果您想使用 Jackson 来读取 POJO（或者，我认为使用 JAXB），则可能需要注册一个特殊的处理程序，如此[处所述](https://jersey.java.net/documentation/latest/user-guide.html#json.jackson)

**更新** 您实际上只需要以下 Maven 依赖项：

```
 <dependency>
        <groupId>org.glassfish.jersey.core</groupId>
        <artifactId>jersey-client</artifactId>
        <version>2.3.1</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.media</groupId>
        <artifactId>jersey-media-json-jackson</artifactId>
        <version>2.3.1</version>
    </dependency> 
```

（在这种情况下，您根本不使用 RestEasy —— `javax.ws.rs`JAXRS 实现来自 Jersey）

**或者**你可以坚持使用 JBoss：

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson2-provider</artifactId>
        <version>3.0.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-client</artifactId>
        <version>3.0.4.Final</version>
    </dependency> 
```

在这种情况下，您只需删除上面代码中的 JacksonFeature 行，代码使用更自由的 Apache 许可证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T00:55:38.823

[RESTEasy 文档](http://docs.jboss.org/resteasy/docs/3.0.6.Final/userguide/html_single/index.html#RESTEasy_Client_Framework)说我们应该关闭客户端连接；在你的例子`client.close()`中。但是我能找到的每个例子都没有做到这一点。垃圾回收期间客户端连接会自动关闭吗？

# javascript - 使用javascript在正文中加粗文本

> ID：14458453
> 
> 赞同：3
> 
> 时间：2013-01-22T12:21:53.293
> 
> 标签：javascript, html, highlight

此代码试图突出显示（通过添加“粗体”标签）HTML 正文中的某些字符。（这些是在 JS 函数中指定的）但不是文本变为粗体，而是在呈现的 html 页面中得到“粗体”标签作为结果。

虽然我想要一些类似的东西

这是一条测试**消息**

我明白了

```
This is a test <b>message</> 
```

任何帮助都是极好的。

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Test</title>

<script>

function myFunction(){
        var children = document.body.childNodes;
    for(var len = children.length, child=0; child<len; child++){
     if (children[child].nodeType === 3){ // textnode
        var highLight = new Array('abcd', 'edge', 'rss feeds');
        var contents = children[child].nodeValue;
        var output = contents;
        for(var i =0;i<highLight.length;i++){
            output = delimiter(output, highLight[i]); 
        }

    children[child].nodeValue= output; 
    }
    }
}

function delimiter(input, value) {
    return unescape(input.replace(new RegExp('(\\b)(' + value + ')(\\b)','ig'), '$1<b>$2</b>$3'));
}
</script>

</head>
<body>
<img src="http://some.web.site/image.jpg" title="abcd"/>

These words are highlighted: knorex, edge, rss feeds while these words are not: knewedge, abcdef, rss feedssss

<input type ="button" value="Button" onclick = "myFunction()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:43:23.327

问题是您将 HTML 放入文本节点，因此它被严格作为文本进行评估。一个简单的解决方法是简单地对 body 元素的 innerHTML 进行操作，如下所示：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Test</title>

<script>

function myFunction(){
  var highLight = ['abcd', 'edge', 'rss feeds'],
      contents = document.body.innerHTML;

  for( i = 0; i < highLight.length; i++ ){
    contents = delimiter(contents, highLight[i]); 
  }

  document.body.innerHTML = contents;
}

function delimiter(input, value) {
  return input.replace(new RegExp('(\\b)(' + value + ')(\\b)','ig'), '$1<b>$2</b>$3');
}
</script>

</head>
<body>
<img src="http://some.web.site/image.jpg" title="abcd"/>

These words are highlighted: knorex, edge, rss feeds while these words are not: knewedge, abcdef, rss feedssss

<input type ="button" value="Button" onclick = "myFunction()">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:45:24.890

textNode 不能有子元素，因此需要替换它，一种方式；

代替

```
children[child].nodeValue = output; 
```

和

```
var n = document.createElement("span");
n.innerHTML = output;
children[child].parentNode.replaceChild(n, children[child]); 
```

# symfony - 在 SonataAdminBundle 中组织文件：什么去哪里？

> ID：14458458
> 
> 赞同：3
> 
> 时间：2013-01-22T12:22:08.203
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

我从`SonataAdminBundle`文档中的几个示例中重新组合了以下信息。如果有一些错误，请纠正我，但这是我在 a 的情况下得到的`BlogBundle`：

![前端和后端文件混合在同一个包中](../Images/2f4dbec1b7afaceab56dc6e1d16ca038.png)

如您所见，通常每个包都包含`frontend`和`backend`类。

`frontend`有时将两者混合在同一个文件夹中似乎很混乱`backend`（请参阅控制器），但老实说，我想不出其他方法......

我实际上开始在一个单独的包中处理后端，但后来意识到它也太乱了。

那么在实践中，人们真的遵循这种架构吗？这是使用 SonataAdminBundle 时处理后端的唯一/最佳方式吗？

这篇漂亮的帖子[在这里](https://blog.liip.ch/archive/2011/05/19/symfony2-bundle-structure-a-use-case.html)使用了不同的方法......我应该做些什么来确保代码不会变得太乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:05:20.740

简单：在混合内容的位置使用文件夹。我将前端组件直接放在各自的文件夹中，并为后端文件添加管理文件夹。

您可以像这样引用 Admin 子文件夹中的控制器`BlogBundle:Admin\Concert:index`，基本上与模板相同。

在配置时，您可以创建一个`config-frontend.yml`和一个`config-backend.yml`文件，然后将其包含在原始`config.yml`文件中。不过我不那样做。

# c# - 有没有更简洁的方法将分隔文本拆分为数据结构？

> ID：14458461
> 
> 赞同：4
> 
> 时间：2013-01-22T12:22:17.323
> 
> 标签：c#, arrays, linq, text

我有这个代码：

```
 private IEnumerable<FindReplacePair> ConstructFindReplacePairs(string inputFilePath)
    {
        var arrays = from line in File.ReadAllLines(Path.GetFullPath(inputFilePath))
                    select line.Split('|');

        var pairs = from array in arrays
                    select new FindReplacePair { Find = array[0], Replace = array[1] };

        return pairs;
    } 
```

我想知道是否有一种干净的 linq 语法可以仅在一个查询中执行此操作，因为感觉应该有。

我尝试链接 from 子句（一个 SelectMany），但是它将数据拆分得太多了，我无法从单独的数组中进行选择（而是一次获得一个单独的字符串）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:23:43.820

```
IEnumerable<FindReplacePair> ConstructFindReplacePairs(string inputFilePath)
{
    return File.ReadAllLines(Path.GetFullPath(inputFilePath))
               .Select(line => line.Split('|'))
               .Select(array => new FindReplacePair { 
                          Find = array[0], 
                          Replace = array[1] 
                });
} 
```

或者

```
IEnumerable<FindReplacePair> ConstructFindReplacePairs(string inputFilePath)
{
    return from line in File.ReadAllLines(Path.GetFullPath(inputFilePath))
           let array = line.Split('|')
           select new FindReplacePair {
              Find = array[0], Replace = array[1]
           };
} 
```

您还可以添加*where*条件来检查数组是否包含多个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:26:22.757

不知道这是否*更干净*，只是有点短。

```
IEnumerable<FindReplacePair> allFindReplacePairs = File.ReadLines(inputFilePath)
    .Select(l => new FindReplacePair { Find = l.Split('|')[0], Replace = l.Split('|')[1] }); 
```

请注意，我使用`File.ReadLines`的是不需要先将所有行读入内存。它像一个`StreamReader`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:37:31.480

当谈到美化 LINQ 时，我通常会写出简单的循环，Resharper 会建议更好的 LINQ 优化，例如

```
foreach (var split in File.ReadAllLines(inputFilePath).Select(l => l.Split('|')))
    yield return new FindReplacePair { Find = split[0], Replace = split[1] }; 
```

R# 将其转换为

```
return File.ReadAllLines(inputFilePath).Select(l => l.Split('|')).Select(split => new FindReplacePair { Find = split[0], Replace = split[1] }); 
```

也就是说，您不妨使用内置类型，例如`.ToDictionary(l => l[0], l => l[1])`或在 上添加方法`FindReplacePair`，即

```
return File.ReadAllLines(inputFilePath).Select(l => l.Split('|')).Select(FindReplacePair.Create);

public static FindReplacePair Create(string[] split)
{
    return new FindReplacePair { Find = split.First(), Replace = split.Last() };
} 
```

# java - 从 java servlet 运行长进程的最佳方法是什么？

> ID：14458463
> 
> 赞同：7
> 
> 时间：2013-01-22T12:22:26.977
> 
> 标签：java, servlets, process

我想问从 java servlet 运行长进程的最佳方法是什么。我有一个 webapp，当客户端发出请求时，它运行一个 servlet。这个 servlet 应该从请求中获取一些参数，然后运行一个进程。这个过程可能需要很长时间，所以我需要单独运行它。当这个过程执行完成时，它会发送一封包含结果的电子邮件。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:29:44.100

使用线程池。每次收到请求，创建一个任务并提交到线程池。这将确保过多的请求不会使服务器陷入瘫痪，因为您可以控制可以拥有多少并发线程，以及可以在线程池的等待任务队列中等待多少任务。

请参阅[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)和[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)的 javadoc 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:29:44.767

我看到了两种可能性：

1.  为每个任务创建一个单独的线程（线程池方法）。这是可能的，但可能会产生性能问题。
2.  创建第二个应用程序。例如，您可以将参数保存到 DB。第二个应用程序将每隔一段时间监视这个数据库并做一些事情。相反，DB，您可以使用一些消息队列管理器，例如`WebSphere MQ`

第二种方法有优势：如果应用程序由于某种原因现在无法处理请求，应用程序可以稍后返回

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T12:30:13.817

虽然这听起来有点危险，调用 servlet 会产生一个进程（没有适当的节流功能），但您可以使用`Runtime.getRuntime().exec()`. 更好的是用来[`ProcessBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)准备过程参数并产生它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T12:32:53.513

通常，这种活动被委托给另一种类型的应用程序模块，例如消息驱动 bean，这对我来说似乎是最干净且符合标准的解决方案。尽管如果您创建自己的线程（标准禁止但很少强制执行）大多数服务器不会抱怨，但在我看来，设置您自己的作业队列和池执行环境所需的管理量并不值得。

# java - 使用码头测试过滤器

> ID：14458466
> 
> 赞同：1
> 
> 时间：2013-01-22T12:22:35.937
> 
> 标签：java, testing, jetty, servlet-filters, guice-servlet

我已经使用 guice-servlet 配置了我的 servlet/过滤器。使用类似的绑定

```
 serve("/foo").with(HelloServlet.class); 
```

现在，我想测试该映射。我用过码头测试

```
private ServletTester tester;
private HttpTester request;
private HttpTester response;

@BeforeMethod
public void setUp() {
    this.tester = new ServletTester();
    this.tester.setContextPath("/");
    this.tester.addEventListener(new Config()); //my guice servlet config goes there.

    this.tester.addFilter(GuiceFilter.class, "/*", 0);
    this.tester.addServlet(FakeServlet.class, "/*");        <-----!!!!

    this.tester.start();
    this.request = new HttpTester();
    this.response = new HttpTester();
    this.request.setMethod("GET");
    this.request.setHeader("Host", "tester");
    this.request.setVersion("HTTP/1.0");
}

@Test
public void test() {
    this.request.setURI("/foo");
    this.response.parse(tester.getResponses(request.generate()));
    assertEquals(this.response.getContent(), "Hello World");
} 
```

有用。但这让我添加了一些应该被调用的假 servlet。如何在不添加此类 servlet 的情况下对其进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:44:27.970

servlet 规范需要一个 servlet 才能使 doFilter 链有意义。

如果您不想在测试用例中创建自己的 Servlet，只需使用 Servlet [`org.eclipse.jetty.servlet.DefaultServlet.class`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/servlet/DefaultServlet.html)（在[jetty-servlet.jar](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.eclipse.jetty%22%20AND%20a%3a%22jetty-servlet%22)中找到）。

# google-app-engine - 谷歌应用引擎的ndb：获取实体的ID

> ID：14458470
> 
> 赞同：15
> 
> 时间：2013-01-22T12:22:46.737
> 
> 标签：google-app-engine, app-engine-ndb

这看起来很简单，但我只是没有找到如何从 Google App Engine 的 ndb 获取实体的 id。

```
class Message(ndb.Model):
    name: ndb.StringProperty()
    ... 
```

创建一个消息对象：

```
message = Message(id=someId)
message.name = someName
message.put() 
```

后来当我检索实体时：

```
message = Message.query(Message.name==someName).fetch(1) 
```

现在我如何获得消息的ID？谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-22T12:58:49.843

只要您有**密钥**，您就可以通过多种方式获取**id**。

 ****带有`fetch`or的**示例**`get`：**

 **```
message = Message.query(Message.name==someName).fetch(1)[0]
message_id = message.key.id()

message = Message.query(Message.name==someName).get()
message_id = message.key.id() 
```

* * *

如果您**不需要**实体而**只需要 id**，那么您可以通过仅获取密钥来节省资源。

```
message_key = Message.query(Message.name==someName).fetch(1, keys_only=True)[0]
message_id = message_key.id()

message_key = Message.query(Message.name==someName).get(keys_only=True)
message_id = message_key.id() 
```

* * *

**请记住，您也可以在put**后​​获得密钥：

```
message_key = message.put()
message_id = message_key.id() 
```

* * *

来自[关键类 NDB](https://developers.google.com/appengine/docs/python/ndb/keyclass?hl=id#Key_id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T00:01:17.983

尝试对单个实例使用 get()

```
message = Message.query(Message.name==someName).get()
message.key.id() 
```

fetch() 返回一个列表对象，因此您的代码需要大致如下：

```
messages = Message.query(Message.name==someName).fetch(1)
message = messages[0]
message.key.id() 
```****

# spring - 在 Spring 中启用 @PrePersist 和 @PreUpdate

> ID：14458473
> 
> 赞同：5
> 
> 时间：2013-01-22T12:23:00.040
> 
> 标签：spring, hibernate, jpa, repository-pattern

如何打开所需的 Spring / JPA / Hibernate 行为来调用 @PrePersist 和 @PreUpdate 挂钩？

我们的堆栈包括这三个和每个实体的存储库，但我们认为最好在这些钩子的帮助下将其建模为实体本身的责任，但它们不会被调用。每个 Repository 都注入了​​一个 EntityManager。我正在使用那些 EntityManagers，而不是 Sessions。

EntityManager 由`org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean`使用`org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter`and的 a 创建`org.springframework.orm.jpa.JpaTransactionManager`。有`org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor`礼物。工厂引用一个`com.mchange.v2.c3p0.ComboPooledDataSource`.

是否有必要手动安装/连接某些东西（实体侦听器？）以确保进行调用。我找不到任何文档。

# selenium - Selenium：Web 应用程序中的 PayPal 登录过程

> ID：14458474
> 
> 赞同：1
> 
> 时间：2013-01-22T12:23:03.503
> 
> 标签：selenium, paypal, selenium-webdriver, selenium-rc

我的应用程序将 Paypal 作为支付选项，在使用 Selenium Web Driver 进行自动化测试时，流程继续进行，没有任何错误，但是当流程导航到 Paypal 登录页面时，填写所有字段（用户名、密码），然后单击登录按钮，`EXPECTED FLOW Is: page redirects to order confirm page, but the Paypal login page get refresh and stay on the page with empty fields`. _ 我还通过增加超时秒数来检查它，但没有任何反应。下面是我的代码：

```
@Test
    public void testAsdChannel(){
        for(RemoteWebDriver driver: drivers){
            driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
            HomePage hPage = HomePage.navigateTo(driver, SERVER);
            ....
            AsdConfirmPage asdPage = asdChannelFlow.acceptOffer();
            asdChannelPage.paypalLogin("username", "pswd"); 
            Assert.assertEquals(asdConfirmPage.asdOrderConfirm(), "Your order has been received");
             }
    } 
```

// 下面我提供 paypalLogin(String userName, String pswd) 方法：

```
public void paypalLogin(String username, String password){
        paypalEmail.sendKeys(username); // 'paypalEmail'text field element on paypal login page
        paypalPswd.sendKeys(password); // 'paypalPswd' field element on same.
        paypalLoginBtn.submit(); // 'paypalLoginBtn' button element on same
    } 
```

// 这里是元素 paypalLoginBtn, paypalPswd, paypalEmail

```
 @FindBy(name = "email")
    WebElement paypalEmail;

    @FindBy(name = "password")
    WebElement paypalPassword;

    @FindBy(id = "loginButton")
    WebElement paypalLoginBtn; 
```

请提出任何解决此问题的方法............在此先感谢。

# paypal - 将用户信用卡信息存储到以后付款

> ID：14458475
> 
> 赞同：0
> 
> 时间：2013-01-22T12:23:10.337
> 
> 标签：paypal, authorize.net

我的要求是存储用户信用卡信息以供以后付款。贝宝中是否有任何选项来存储用户的信用卡信息并稍后付款，或者在任何付款方式中是否有任何选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:03:17.890

Auth.Net 的 CIM 是一个可行的选择，但它不是 Auth.Net 帐户的标准功能，并且需要每月支付额外费用才能使用。根据您使用的 PayPal 付款方式，您可以通过参考交易或账单协议免费获得类似的功能。

在 PayPal 处理信用卡付款长达一年后，您可以生成后续参考交易，该交易使用之前用于获取新资金的相同付款详细信息。如果您的客户使用 PayPal 帐户余额付款，您可以建立一个计费协议，让您也可以在未来的任意时间从他们的卡中扣款。

据我所知，这些功能都不需要代表您额外付款。您只需拥有一个支持您要使用的 API 并知道如何集成它的 PayPal 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:53:23.080

是的。您需要使用[Authorize.Net 的客户信息管理器 (CIM) API](http://developer.authorize.net/api/cim/)，它允许您将支付信息作为支付配置文件存储在他们的服务器上。然后，您可以在未来的任何时候对其进行收费。

# html - 在一行上浮动元素，使最后一个溢出

> ID：14458476
> 
> 赞同：0
> 
> 时间：2013-01-22T12:23:13.300
> 
> 标签：html, css

我正在为我的项目做一个时间栏，我想要在这里实现的是这样的：

```
 / <- Screen margin
+-------------------------------------------     -------+\
| +---------+    +---------+    +---------+        +----|/---+
| | 12:00PM |    | 01:00AM |    | 02:00AM |  ....  | 11:|\PM |
| +---------+    +---------+    +---------+        +----|/---+
+-------------------------------------------     -------+\
                                                         / 
```

这些元素实际上是图像（它们有渐变和东西），而不是文本，它们与下一个元素有边距，并且它们被设置为向左浮动，因此一切正常。嗯，差不多。问题是，正如您在“图像”中看到的那样，最后一个可能（我实际上想要这种确切的行为）被削减。

我设法实现的唯一事情是让最后一个元素出现在下一行，低于图像的 12:00 PM，或者让它完全消失，我只是无法让它保持原样只显示应该看到的。我试过使用 white-space: nowrap 和 overflow: hidden 无济于事。

我当前对这些元素的 CSS 样式如下：

```
#timebar{
    position: absolute;
    width: 6672px;
    height: 33px;
    top: 0px;
    left: 187px;
    background-image: url("../images/timebar.png");
    border-right: 1px black solid;
    z-index: 1;
}
.time_element{
    width: 57px;
    height: 18px;
    margin-left: 221px;
    margin-top: 8px;
    list-style: none;
    background-repeat: no-repeat;
    background-position: center;
    background-image: url(/* THIS IS FILLED DYNAMICALLY VIA JAVASCRIPT */);
    float: left;
    -webkit-transform: translateZ(0);
} 
```

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:35:58.377

我建议您将时间元素放在一个内部容器中，其宽度大于时间元素的总宽度。然后将此容器放入您的时间栏并应用于`overflow: hidden`时间栏。这样你就不会体验到时间元素的包裹。

如果时间元素是动态的，则使用 JavaScript 动态计算内部容器的宽度。如果它们的数量是静态的，那么您可以使用 css 应用宽度。

如果您需要显示截止时间元素，请使用内部容器上的负值使用 margin-left 滚动内部容器。

# android - 有没有办法让 Android SDK 的设备模拟器模拟 ARMv7 设备？

> ID：14458478
> 
> 赞同：1
> 
> 时间：2013-01-22T12:23:20.977
> 
> 标签：android, arm, coronasdk

默认情况下 AVD 运行 ARMv6，有没有办法让它模拟 ARMv7 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:33:42.600

我从来没有这样做过，但是论坛上有关于将模拟器设置为模拟 Google Nexus 7 平板电脑并安装 ARM 7 支持的讨论。我找不到那个帖子，但这里有一个帖子有一个演练：

[https://developer.coronalabs.com/forum/2012/10/26/guide-getting-your-corona-app-run-android-emulator](https://developer.coronalabs.com/forum/2012/10/26/guide-getting-your-corona-app-run-android-emulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:26:50.840

可以通过“SDK 管理器工具”（位于 4.2 API 产品树中）下载“ARM EABI v7a 系统映像”。然后您将需要创建一个使用此系统映像的模拟器。

如果您要查找的图像不存在（您没有在 SDK 管理器的可下载选项列表中看到它），现在可能无法找到。

最重要的是，您将需要 ARMv7 系统映像 - 然后您可以在您的模拟器中使用它。

# jquery - 最近（）没有按预期工作

> ID：14458479
> 
> 赞同：0
> 
> 时间：2013-01-22T12:23:22.793
> 
> 标签：jquery, width

```
$("#main .primary")
        .width($(this).closest("#main .row")
        .outerWidth(true) - $(this).closest("#main .secondary")
        .outerWidth(true)); 
```

..根本不起作用。

我正在做的是通过从（父）`primary`减去宽度来将宽度应用于 div 。`secondary``main`

```
<div id="main">
    <div class="row">
        <div class="primary"></div>
        <div class="secondary"></div>
    </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:32:25.327

首先，选择器`#main .row`将返回一个空的 jQuery 对象，如果你想将具有 id 和类的元素匹配在一起，你可以像这样使用它：

```
#myId.my-class // Select by id and class
div#myId.my-class // Select by element and the id and the class 
```

我建议您在您的情况下使用兄弟姐妹（）方法

```
$('#main .primary')
  .width( function(){ 
   return $(this).closest('.row').width() - // or you can use .parent() instead
          $(this).siblings('.secondary').outerWidth(true); 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:40:16.870

希望以下解决方案对您有所帮助。

因为没时间没考。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function()
{

    var main      = $("#main");
    var primary   = main.find('.row > .primary');
    var secondary = main.find('.row > .secondary');
    var newWidth  = main.width() - secondary.width() ;

    console.log(newWidth);
    primary.css('width',newWidth);
});

</script>

<div id="main" style="border:5px solid red;padding:10px;width:600px;">
    <div class="row" style="border:5px solid red;padding:10px;width:500px;">
        <div class="primary" style="border:2px solid #CCC;width:200px;padding:10px;"></div>
        <div class="secondary" style="border:5px solid #669900;width:200px;padding:10px;"></div>
    </div>
</div>
```

# python - 有人可以帮我理解这段 Python 代码是如何工作的吗

> ID：14458485
> 
> 赞同：1
> 
> 时间：2013-01-22T12:23:46.607
> 
> 标签：python, python-3.x

这是我在学校课堂上上的一堂课的代码，我对列表的打印方式感到困惑，因为它一直以“无”结尾......

```
def printlist(myList, pointer):
    print("The List is: ", myList)
    print("Pointer length: ", pointer)
    print("The List length is: ", len(myList))
    print("The List printed properly:")
    print(printlistproperly(myList))

def printlistproperly(myList):
    thelength = len(myList)
    for i in range(thelength):
        print(i, " ", myList[i])

def popin(myList,pointer):
    myList.append(input("Enter a value: "))
    pointer = len(myList)-1
    return myList, pointer

def main():
    myList = ["Ford","Toyota","Mustang"]
    pointer = len(myList)-1
    myList,pointer = popin(myList,pointer)
    printlist(myList, pointer) 
```

结果是：

```
>>> main()
Enter a value: Dodge
The List is:  ['Ford', 'Toyota', 'Mustang', 'Dodge']
Pointer length:  3
The List length is:  4
The List printed properly:
0   Ford
1   Toyota
2   Mustang
3   Dodge
None 
```

我真正的问题是......最后的None是什么？它从何而来？我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T12:26:28.330

在函数`printlist`中打印函数的结果`printlistproperly`，它什么也不返回。因此你得到`None`. 解决方案：只需调用`printlistproperly(myList)`（不带`print`）。

```
def printlist(myList, pointer):
    print("The List is: ", myList)
    print("Pointer length: ", pointer)
    print("The List length is: ", len(myList))
    print("The List printed properly:")
    printlistproperly(myList) 
```

# java - 将字符串转换为日期并进行比较

> ID：14458486
> 
> 赞同：0
> 
> 时间：2013-01-22T12:23:48.927
> 
> 标签：java

我从数据库中提取的字段之一是字符串格式的日期，我需要将其转换为日期类型以与另一个日期进行比较。

请问我该怎么做？到目前为止，我尝试过的所有事情都给了我一个错误，`java.util.Date cannot be cast to java.sql.Date`这是在尝试以下示例；

[simpledateformat-gives-java-lang-classcastexception-java-util-date](https://stackoverflow.com/questions/6327392/simpledateformat-gives-java-lang-classcastexception-java-util-date.)

以字符串格式提取的日期示例为“2012-10-15 09:00:29.157”。我认为要声明的格式是*yyyy-MM-dd HH:mm:ss.SSS*但不确定。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:27:57.440

您可以按如下方式创建一个`java.util.Date`：`java.sql.Date`

```
java.util.Date date = new java.util.Date(resultSet.getDate("Column").getTime()); 
```

或者，您可以将其转换`java.sql.Date`为任一`java.util.Calendar`或 Joda 库的 DateTime 并执行比较。

如果您正在查看解析日期，那么`java.text.SimpleDateFormat`就是您的朋友。

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
java.util.Date date = format.parse("2012-10-15 09:00:29.157"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:29:02.383

它只是意味着你正在 `java.util.Date`分配`java.sql.Date`

从您的示例中，您必须执行以下操作：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
java.util.Date date = (java.util.Date)formatter.parse(""2012-10-15 09:00:29.157""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:32:51.260

转换`Date`成 Vikdor 展示的样子。然后得到`long timestamp = date.getTimestamp();`

现在这个长值是自 1970 UTC 以来的毫秒数。只需按此值进行比较。

# java - 如何使用 Java / Scala 从 URL 加载前 x 个字节？

> ID：14458488
> 
> 赞同：0
> 
> 时间：2013-01-22T12:23:52.967
> 
> 标签：java, scala, url, urlconnection

我想从 a 读取前 x 个字节`java.net.URLConnection`（尽管我没有被迫使用此类 - 欢迎其他建议）。

我的代码如下所示：

```
val head = new Array[Byte](2000)  
new BufferedInputStream(connection.getInputStream).read(head)
IOUtils.toString(new ByteArrayInputStream(head), charset) 
```

它可以工作，但这段代码是否只从网络加载前 2000 个字节？

**下一次审判**

正如'JB Nizet'所说，使用缓冲输入流没有用，所以我尝试了`InputStreamReader`：

```
val head = new Array[Char](2000)  
new InputStreamReader(connection.getInputStream, charset).read(head)
new String(head) 
```

此代码可能更好，但加载时间大致相同。那么这个过程会限制传输的字节吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T12:36:32.230

不，它没有。它最多可以读取 8192 字节（默认缓冲区大小`BufferedInputStream`）。它还可以读取 0 个字节，或 0 到 2000 之间的任意字节数，因为您不检查实际已读取的字节数，以及该`read()`方法返回的字节数。

最后，根据 charset 的值以及 HTTP 响应使用的实际 charset 的值，这可能会返回一个不正确的字符串，或者一个在多字节字符中间被截断的字符串。您应该使用阅读器来阅读文本。

我建议您阅读[Java IO 教程](http://docs.oracle.com/javase/tutorial/essential/io/index.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T17:02:41.890

您可以[`read(Reader, char[])`](https://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#read%28java.io.Reader,%20char%5b%5d%29)从 Apache Commons IO 使用。只需将 2000 个字符的缓冲区传递给它，它就会用尽可能多的字符填充它，最多 2000 个。

确保您理解其他答案/评论中的反对意见，特别是：

*   不要使用`Buffered...`包装器，这违背了您的意图。
*   如果您读取文本数据，则使用 a`Reader`读取 2000个*字符*而不是`InputStream`读取 2000*个字节*。正确的过程是从响应 ( `Content-Type`) 的标头中确定字符编码并将该编码设置为`InputStreamReader`.
*   `read(char[])`在 a上调​​用plain`Reader`不会完全填满你给它的数组。无论数组有多大，它都可以读取一个字符！
*   之后不要忘记关闭阅读器。

除此之外，我强烈建议您使用[Apache HttpClient](https://hc.apache.org/httpcomponents-client-ga/)来支持`java.net.URLConnection`. 它更加灵活。

* * *

**编辑：**要了解 和 之间的区别`Reader.read`，`IOUtils.read`值得研究后者的来源：

```
public static int read(Reader input, char[] buffer,
                       int offset, int length)
    throws IOException
{
    if (length < 0) {
        throw new IllegalArgumentException("Length must not be negative: " + length);
    }
    int remaining = length;
    while (remaining > 0) {
        int location = length - remaining;
        int count = input.read(buffer, offset + location, remaining);
        if (EOF == count) { // EOF
            break;
        }
        remaining -= count;
    }
    return length - remaining;
} 
```

由于`Reader.read`可以读取少于给定长度的字符（我们只知道它至少为 1 并且最多为长度），我们需要迭代调用它直到我们得到我们想要的数量。

# jquery - 焦点上的文本框将我们带到一个组合框

> ID：14458492
> 
> 赞同：-2
> 
> 时间：2013-01-22T12:24:02.050
> 
> 标签：jquery, html, combobox, textbox

我这里有一个情况，我有一个带有值的组合框。如果该字段被聚焦，那么它将成为一个组合框，其中包含用户可以选择的值。当用户选择任何值时，它的行为就像一个文本框而不是一个组合框（即，它的箭头隐藏并且看起来和感觉明智的一个纯文本框与选择的值 - 正如我所想的）

我不知道为什么会出现混乱？

让我重新措辞：

我有一个表格数据，其中有很多可编辑的数据，主要是组合框；因此，当箭头出现在表格数据中的几个位置时，它看起来并不好。

现在，我在某个地方看到了这个功能，但不记得了：

1.  我需要在显示数据时显示文本字段**类型**或跨度
2.  但是当我点击或 dblclick 时；它向我显示了单击时的组合框。

## 提前致谢

高克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:33:37.100

您可以使用 Jquery 的自动完成插件，如下[所示](http://jqueryui.com/autocomplete/#default)

```
var availableTags = [
  "ActionScript",
  "AppleScript",
  "Asp",
  "BASIC",
  "C",
  "C++",
  "Clojure",
  "COBOL",
  "ColdFusion",
  "Erlang",
  "Fortran",
  "Groovy",
  "Haskell",
  "Java",
  "JavaScript",
  "Lisp",
  "Perl",
  "PHP",
  "Python",
  "Ruby",
  "Scala",
  "Scheme"
];
$(<INPUTSELECTOR>).autocomplete({
  source: availableTags
}); 
```

# android - 几秒钟后关闭活动

> ID：14458497
> 
> 赞同：0
> 
> 时间：2013-01-22T12:24:16.420
> 
> 标签：android

按下按钮后，我想关闭一个活动。但是，我想在关闭它之前等待几秒钟，因为用户必须阅读该活动上显示的一条短消息。我尝试在 onClick 事件中使用 Thread

```
try{
  Thread.sleep(2000);
      finish();  
   }
  catch(Exception e){} 
```

但是，当我按下按钮时，整个对象都被冻结（例如，按钮保持按下状态）。

然后我用了一个简单的 Timer

```
timer.schedule(task(), 2000); 
```

它似乎运作良好。在这种情况下使用 Timer 是否正确，还是应该使用 Thread 或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:31:48.017

```
 new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
                Activity.this.finish();
            }
        }, 2000) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:30:20.243

最简单的方法可能是使用 Handler

```
private Handler h = new Handler();

...

h.postDelayed(new Runnable() {
    @Override
    public void run() {
        finish();
    }
}, 2000); 
```

# android - 如何在 Android 中获取联系人的照片？

> ID：14458503
> 
> 赞同：0
> 
> 时间：2013-01-22T12:24:47.257
> 
> 标签：android, android-contacts, android-contentresolver

我只是将所有联系人列表获取到一个对象（PhoneBookContact）：

```
 private static final Uri                         PURI      = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
 private static final String                      PID       = ContactsContract.CommonDataKinds.Phone._ID;
 private static final String                      PNAME     = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME;
 private static final String                      PNUM      = ContactsContract.CommonDataKinds.Phone.NUMBER;

 String[] projection = new String[]{PID, PNAME, PNUM};

 String sortOrder = PNAME + " COLLATE LOCALIZED ASC";

 Cursor people = mContext.getContentResolver().query(PURI, projection, null, null, sortOrder);

 int indexid = people.getColumnIndex(PID);
 int indexName = people.getColumnIndex(PNAME);
 int indexNumber = people.getColumnIndex(PNUM);

 people.moveToFirst();
 do {
    PhoneBookContact phoneBookContact = new PhoneBookContact();
    phoneBookContact.setmCursorId(people.getLong(indexid));
    phoneBookContact.setmDisplayName(people.getString(indexName));
    phoneBookContact.setmPhoneNumber(UriFactory.formatNumberToInternational(people.getString(indexNumber)));
    phoneList.put(phoneBookContact.getmPhoneNumber(), phoneBookContact);
 } while (people.moveToNext());
 people.close(); 
```

为了从 Android 联系人中获取用户的照片，我使用了这个方法：

```
 public static Uri loadContactPhotoUri(ContentResolver contentResolver, long id) {
      try {
         Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
         return person;
      }
      catch (Exception e) {
         e.printStackTrace();
         return null;
      }
   } 
```

最后，这段代码为特定用户提供了这个 URI：

```
content://com.android.contacts/contacts/5907 
```

由于我使用 ContactsContract.CommonDataKinds.Phone._ID id 调用此 URI，因此无法成功获取用户的照片。其实应该是ContactsContract.Contacts._ID的id。如何查询用户的照片并解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:53:07.367

必须使用 ContactsContract.CommonDataKinds.Phone.CONTACT_ID 而不是 ContactsContract.CommonDataKinds.Phone._ID 来保存 Contacts 表的 cursorID。它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T08:59:00.473

此文件具有获取联系人照片的功能

[https://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/ContactHandler.java](https://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/ContactHandler.java)

```
package heinrisch.contact.picture.sync;

import java.io.InputStream;
import java.util.ArrayList;

import android.content.ContentResolver;
import android.content.ContentUris;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDiskIOException;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.provider.ContactsContract.Contacts.Data;
import android.provider.ContactsContract.RawContacts;
import android.util.Log;

public class ContactHandler {

    public static ArrayList<String> getNumbers(String ID, Context context){
        ArrayList<String> numbers = new ArrayList<String>();
        ContentResolver cr = context.getContentResolver();
        Cursor phones = cr.query(Phone.CONTENT_URI, null,Phone.CONTACT_ID + " = " + ID, null, null);
        while (phones.moveToNext()) {
            numbers.add(phones.getString(phones.getColumnIndex(Phone.NUMBER)));
        }
        phones.close();

        return numbers;

    }

    public static void matchContactsToFriends(ArrayList<Friend> friends, Context context) {
        Cursor people = context.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        if(people == null){
            Log.e("ContactHandler", "Could not find contacts...?");
            return;
        }
        while(people.moveToNext()) {
            String ID = null,name = null;
            int columnIndex = people.getColumnIndex(ContactsContract.Contacts._ID);
            if(columnIndex != -1) ID = people.getString(columnIndex);
            columnIndex = people.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
            if(columnIndex != -1) name = people.getString(columnIndex);

            //ArrayList<String> numbers = getNumbers(ID,context); //"can't" get this from facebook
            if(name == null) continue;

            for(Friend f : friends){
                if(f.isMatchedWithContact()) continue;
                if(f.getName().equals(name)){
                    f.setContactID(ID);
                    Bitmap contactPhoto = getPhoto(context, ID);
                    if(contactPhoto != null) f.setContactPicture(contactPhoto);
                    break;
                }
            }

        }
        people.close();
    }

    public static void setContactPicture(Friend f, Context context){
        f.setContactPicture(getPhoto(context, f.getContactID()));
    }

    public static int getNumberOfContacts(Context context) {
        Cursor people = context.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        int numberOfContacts = people.getCount();
        people.close();
        return numberOfContacts;
    }

    public static Uri getPicture(Context context, String ID){
        ContentResolver cr = context.getContentResolver();
        Uri rawContactUri = null;
        Cursor rawContactCursor =  cr.query(RawContacts.CONTENT_URI, new String[] {RawContacts._ID}, RawContacts.CONTACT_ID + " = " + ID, null, null);
        if(!rawContactCursor.isAfterLast()) {
            rawContactCursor.moveToFirst();
            rawContactUri = RawContacts.CONTENT_URI.buildUpon().appendPath(""+rawContactCursor.getLong(0)).build();
        }
        rawContactCursor.close();

        return rawContactUri;
    }

    public static void setContactPicture(Context context, String ID, Bitmap picture){
        ContentResolver cr = context.getContentResolver();
        Uri rawContactUri = getPicture(context, ID);
        if(rawContactUri == null){
            Log.e("rawContactUri", "is null");
            return;
        }
        ContentValues values = new ContentValues(); 
        int photoRow = -1; 
        String where = ContactsContract.Data.RAW_CONTACT_ID + " == " + 
                ContentUris.parseId(rawContactUri) + " AND " + Data.MIMETYPE + "=='" + 
                ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'"; 
        Cursor cursor = cr.query(ContactsContract.Data.CONTENT_URI, null, where, null, null); 
        int idIdx = cursor.getColumnIndexOrThrow(ContactsContract.Data._ID); 
        if(cursor.moveToFirst()){ 
            photoRow = cursor.getInt(idIdx); 
        } 
        cursor.close(); 
        values.put(ContactsContract.Data.RAW_CONTACT_ID, 
                ContentUris.parseId(rawContactUri)); 
        values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1); 
        values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, Tools.bitmapToByteArray(picture)); 
        values.put(ContactsContract.Data.MIMETYPE, 
                ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE); 
        try{
            if(photoRow >= 0){ 
                cr.update(
                        ContactsContract.Data.CONTENT_URI, 
                        values, 
                        ContactsContract.Data._ID + " = " + photoRow, null);
            } else { 
                cr.insert(
                        ContactsContract.Data.CONTENT_URI, 
                        values); 
            } 
        }catch(SQLiteDiskIOException dIOe){
            //TODO: should show this to the user..
            dIOe.printStackTrace();
        }
    } 

    public static Bitmap getPhoto(Context context, String contactId) {
        Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long.parseLong(contactId));
        InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(context.getContentResolver(), uri);
        if (input == null) {
            return null;
        }
        return BitmapFactory.decodeStream(input);
    }
} 
```

# sql - 查看系统视图的代码

> ID：14458506
> 
> 赞同：0
> 
> 时间：2013-01-22T12:24:53.467
> 
> 标签：sql, sql-server, tsql

有没有可能进入系统视图代码，只是为了了解视图是如何构造的，它使用了哪个对象，等等......

我不需要更改它们，只需查看代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:32:57.130

我用：

```
select object_definition(object_id('ViewName')) 
```

它在一行上给你定义，不像 using `SP_HelpText`which 给你定义分成块 - 通常分裂中间词，这是非常无益的。

也适用于系统对象，并且适用于各种类型（不仅仅是视图）：

*   检查约束
*   默认（约束或独立）
*   SQL 存储过程
*   SQL 标量函数
*   规则
*   复制过滤程序
*   SQL 触发器（模式范围的 DML 触发器，或数据库或服务器范围的 DDL 触发器）
*   SQL 内联表值函数
*   SQL 表值函数
*   看法

[MSDN 文档](http://msdn.microsoft.com/en-gb/library/ms176090.aspx)。

# sql-server - 数据库脚本未执行

> ID：14458507
> 
> 赞同：0
> 
> 时间：2013-01-22T12:25:05.710
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, database-schema, database-scripts

在我的**sqlserver 2008 R2**
中，我有一个成功生成的数据库脚本，但是当我尝试执行该脚本时，它只显示**Executing query**消息并且没有任何反应。
我已经等待了至少 10 分钟的结果，但完全强制我必须停止执行该查询。

> 注意：所有其他查询都正常工作，但只有数据库脚本没有像上面解释的那样执行。

我不知道发生了什么...

```
More details: This thisng is not happen on particular DataBase, it is make problem to all the database of my sqlserver. 
```

甚至没有任何单个数据库的脚本可以工作，如下所述。
它仍然显示正在**执行查询**...

# javascript - node.js shell 命令执行

> ID：14458508
> 
> 赞同：116
> 
> 时间：2013-01-22T12:25:12.033
> 
> 标签：javascript, node.js, shell

我仍在尝试掌握如何运行 linux 或 windows shell 命令并在 node.js 中捕获输出的细节；最终，我想做这样的事情......

```
//pseudocode
output = run_command(cmd, args) 
```

重要的是它`output`必须可用于全局范围的变量（或对象）。我尝试了以下功能，但由于某种原因，我被`undefined`打印到控制台...

```
function run_cmd(cmd, args, cb) {
  var spawn = require('child_process').spawn
  var child = spawn(cmd, args);
  var me = this;
  child.stdout.on('data', function(me, data) {
    cb(me, data);
  });
}
foo = new run_cmd('dir', ['/B'], function (me, data){me.stdout=data;});
console.log(foo.stdout);  // yields "undefined" <------ 
```

我无法理解上面的代码在哪里中断......该模型的一个非常简单的原型可以工作......

```
function try_this(cmd, cb) {
  var me = this;
  cb(me, cmd)
}
bar = new try_this('guacamole', function (me, cmd){me.output=cmd;})
console.log(bar.output); // yields "guacamole" <---- 
```

有人可以帮我理解为什么`try_this()`有效，而`run_cmd()`无效吗？FWIW，我需要使用[`child_process.spawn`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)，因为[`child_process.exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)有 200KB 的缓冲区限制。

## 最终决议

我接受詹姆斯怀特的回答，但这是对我有用的确切代码......

```
function cmd_exec(cmd, args, cb_stdout, cb_end) {
  var spawn = require('child_process').spawn,
    child = spawn(cmd, args),
    me = this;
  me.exit = 0;  // Send a cb to set 1 when cmd exits
  me.stdout = "";
  child.stdout.on('data', function (data) { cb_stdout(me, data) });
  child.stdout.on('end', function () { cb_end(me) });
}
foo = new cmd_exec('netstat', ['-rn'], 
  function (me, data) {me.stdout += data.toString();},
  function (me) {me.exit = 1;}
);
function log_console() {
  console.log(foo.stdout);
}
setTimeout(
  // wait 0.25 seconds and print the output
  log_console,
250); 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-24T21:06:59.487

这里有三个问题需要解决：

**首先**是您在异步使用 stdout 时期望同步行为。函数中的所有调用`run_cmd`都是异步的，因此无论是否从标准输出中读取了部分、全部或没有数据，它都会生成子进程并立即返回。因此，当你运行

```
console.log(foo.stdout); 
```

您会得到目前存储在 foo.stdout 中的任何内容，并且无法保证那会是什么，因为您的子进程可能仍在运行。

**其次**，stdout 是一个[可读流](http://nodejs.org/api/stream.html#stream_readable_stream)，所以 1）数据事件可以被多次调用，2）回调被赋予一个缓冲区，而不是一个字符串。易于补救；只是改变

```
foo = new run_cmd(
    'netstat.exe', ['-an'], function (me, data){me.stdout=data;}
); 
```

进入

```
foo = new run_cmd(
    'netstat.exe', ['-an'], function (me, buffer){me.stdout+=buffer.toString();}
); 
```

以便我们将缓冲区转换为字符串并将该字符串附加到我们的 stdout 变量中。

**第三**是当你得到'end'事件时你只能知道你已经收到了所有的输出，这意味着我们需要另一个监听器和回调：

```
function run_cmd(cmd, args, cb, end) {
    // ...
    child.stdout.on('end', end);
} 
```

所以，你的最终结果是这样的：

```
function run_cmd(cmd, args, cb, end) {
    var spawn = require('child_process').spawn,
        child = spawn(cmd, args),
        me = this;
    child.stdout.on('data', function (buffer) { cb(me, buffer) });
    child.stdout.on('end', end);
}

// Run C:\Windows\System32\netstat.exe -an
var foo = new run_cmd(
    'netstat.exe', ['-an'],
    function (me, buffer) { me.stdout += buffer.toString() },
    function () { console.log(foo.stdout) }
); 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-07-04T09:16:29.287

接受答案的简化版本（第三点）对我有用。

```
function run_cmd(cmd, args, callBack ) {
    var spawn = require('child_process').spawn;
    var child = spawn(cmd, args);
    var resp = "";

    child.stdout.on('data', function (buffer) { resp += buffer.toString() });
    child.stdout.on('end', function() { callBack (resp) });
} // () 
```

用法：

```
run_cmd( "ls", ["-l"], function(text) { console.log (text) });

run_cmd( "hostname", [], function(text) { console.log (text) }); 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-04-18T14:40:29.410

我更简洁地使用了这个：

```
var sys = require('sys')
var exec = require('child_process').exec;
function puts(error, stdout, stderr) { sys.puts(stdout) }
exec("ls -la", puts); 
```

它完美地工作。:)

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2014-07-16T09:28:01.467

最简单的方法是只使用 ShellJS lib ...

```
$ npm install [-g] shelljs 
```

执行示例：

```
require('shelljs/global');

// Sync call to exec()
var version = exec('node --version', {silent:true}).output;

// Async call to exec()
exec('netstat.exe -an', function(status, output) {
  console.log('Exit status:', status);
  console.log('Program output:', output);
}); 
```

[ShellJs.org](http://shelljs.org)支持映射为 NodeJS 函数的许多常见 shell 命令，包括：

*   **猫**
*   **光盘**
*   **修改**
*   **cp**
*   **目录**
*   **回声**
*   **执行**
*   **出口**
*   **寻找**
*   **grep**
*   **ln**
*   **ls**
*   **mkdir**
*   **MV**
*   **流行音乐**
*   **推**
*   **密码**
*   **R M**
*   **sed**
*   **测试**
*   **哪一个**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-28T07:31:06.183

我有一个类似的问题，我最终为此编写了一个节点扩展。您可以查看 git 存储库。它是开源的，免费的，所有的好东西！

[https://github.com/aponxi/npm-execxi](https://github.com/aponxi/npm-execxi)

> ExecXI是一个用C++编写的节点扩展，用于逐条执行shell命令，将命令的输出实时输出到控制台。存在可选的链式和非链式方式；这意味着您可以选择在命令失败（链接）后停止脚本，或者您可以继续执行，就好像什么都没发生一样！

使用说明在[自述文件](https://github.com/aponxi/npm-execxi/blob/master/README.md)中。随时提出拉取请求或提交问题！

我认为值得一提。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-23T00:41:02.883

@TonyO'Hagan 是全面的`shelljs`答案，但是，我想强调他的答案的同步版本：

```
var shell = require('shelljs');
var output = shell.exec('netstat -rn', {silent:true}).output;
console.log(output); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-27T19:34:19.780

同步单线：

```
require('child_process').execSync("echo 'hi'", function puts(error, stdout, stderr) {
  console.log(stdout) 
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-22T13:03:45.443

`run_cmd`您的函数中存在变量冲突：

```
 var me = this;
  child.stdout.on('data', function(me, data) {
    // me is overriden by function argument
    cb(me, data);
  }); 
```

只需将其更改为：

```
 var me = this;
  child.stdout.on('data', function(data) {
    // One argument only!
    cb(me, data);
  }); 
```

为了看到错误总是添加这个：

```
 child.stderr.on('data', function(data) {
      console.log( data );
  }); 
```

**编辑**您的代码失败，因为您尝试运行`dir`未作为单独的独立程序提供的**代码。**这是一个正在`cmd`处理的命令。如果你想玩文件系统，请使用 native `require( 'fs' )`。

或者（我不推荐）你可以创建一个批处理文件，然后你可以运行它。请注意，默认情况下，操作系统会通过`cmd`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-25T03:11:37.470

你实际上并没有从你的 run_cmd 函数返回任何东西。

```
function run_cmd(cmd, args, done) {
    var spawn = require("child_process").spawn;
    var child = spawn(cmd, args);
    var result = { stdout: "" };
    child.stdout.on("data", function (data) {
            result.stdout += data;
    });
    child.stdout.on("end", function () {
            done();
    });
    return result;
}

> foo = run_cmd("ls", ["-al"], function () { console.log("done!"); });
{ stdout: '' }
done!
> foo.stdout
'total 28520...' 
```

工作得很好。:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-10T06:17:59.390

获奖最多的答案的承诺版本：

```
 runCmd: (cmd, args) => {
    return new Promise((resolve, reject) => {
      var spawn = require('child_process').spawn
      var child = spawn(cmd, args)
      var resp = ''
      child.stdout.on('data', function (buffer) { resp += buffer.toString() })
      child.stdout.on('end', function () { resolve(resp) })
    })
  } 
```

要使用：

```
 runCmd('ls').then(ret => console.log(ret)) 
```

# jquery - 保存 OWN 历史的所有元素状态？

> ID：14458509
> 
> 赞同：0
> 
> 时间：2013-01-22T12:25:13.500
> 
> 标签：jquery, back, forward

我有一个可视化编辑器，它在特定区域使用普通的拖放 div。现在我想构建或包含一个自己的历史系统，以便用户可以单击后退按钮（而不是浏览器按钮）并且最后一次更改被反转。

例如：“在 A 之后插入模块 B”->“删除模块 A”-> 后退按钮 ->（模块 A 又回来了。）

有没有一个好的jQuery插件？或者我应该如何保存状态？（我认为复制所有 HTML 不是最好的解决方案）。

很难用谷歌搜索，因为我曾经找到浏览器历史记录的插件..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:31:53.087

这听起来足够具体，以至于您必须编写自己的自定义解决方案。

# java - 如果找不到元素，如何在 selenium Web 驱动程序中添加验证

> ID：14458510
> 
> 赞同：-2
> 
> 时间：2013-01-22T12:25:16.413
> 
> 标签：java, selenium

如果未找到元素或 ID，如何在 selenium Web 驱动程序中添加验证（使用“if”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:38:29.967

检查您尝试识别的元素是否存在。

将您要识别的元素放在 try 块中。如果你得到 NoSuchElementException，这意味着元素不存在。

捕捉异常。

```
 public void isPresent()
    {
       try
       {
            driver.findElement(By.id("elementID"));
            System.out.println("element is present");
       }
       catch ( Exception e )
       {
            System.out.println("Element is not present");
            return;
       }
    } 
```

这样您就可以处理异常。

# jquery - $().live(函数(){}); 并且 jQuery.browser 在 jquery 1.9.0 中未定义

> ID：14458511
> 
> 赞同：0
> 
> 时间：2013-01-22T12:25:17.640
> 
> 标签：jquery

`$().live(function(){});`并且`jQuery.browser`在`undefined`jQuery 1.9.0 中

如果我使用 jQuery 1.8.3 而不是 jquery 1.9.0，它在我的项目中运行良好。

什么是未定义的功能，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T12:28:17.487

请阅读[jQuery 升级指南](http://jquery.com/upgrade-guide/1.9/)，在 1.9 版本中，他们删除了之前版本中所有不推荐使用的方法。但是他们提供了一个迁移插件来帮助开发人员在迁移期间。

[jQuery.live](http://api.jquery.com/live/)在v1.7.0 中被弃用，取而代之的是[jQuery.on](http://api.jquery.com/on/)，请在您的代码中使用它。

您可以包含[迁移插件](http://code.jquery.com/jquery-migrate-1.0.0.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:27:35.380

不推荐使用 live 功能，您必须使用它`on`而不是`live`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T12:28:23.460

`.live()`已被删除：[http](http://api.jquery.com/live/) ://api.jquery.com/live/ 。改用`.on()`：[http://api.jquery.com/on/](http://api.jquery.com/on/)：

`.browser()`也已被删除：[http ://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T12:26:30.343

这些函数在 jquery 1.9.0 中已弃用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T12:27:47.110

因为它们已被弃用！

而不是`.live()`你应该使用[.on()](http://api.jquery.com/on/)

**jQuery.browser**

返回：PlainObjectversion 已弃用：1.3，已删除：1.9

描述：包含用户代理的标志，从 navigator.userAgent 读取。我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

# javascript - 如何在 JavaScript 中将日期格式更改为英式

> ID：14458513
> 
> 赞同：4
> 
> 时间：2013-01-22T12:25:18.757
> 
> 标签：javascript, datetime

> **可能重复：**
> [JavaScript 日期对象英国日期](https://stackoverflow.com/questions/3117262/javascript-date-objects-uk-dates)

我有以下代码，我在将日期格式设置为英国时遇到问题，即

```
var birthday = new Date("20/9/1988"); 
```

当我运行我得到的代码时`You are NaN years old`。错误但如果我将其更改为 09/20.1988 它可以工作

```
var birthday = new Date("20/9/1988");
var today = new Date();
var years = today.getFullYear() - birthday.getFullYear();

// Reset birthday to the current year.
birthday.setFullYear(today.getFullYear());

// If the user's birthday has not occurred yet this year, subtract 1.
if (today < birthday)
{
    years--;
}
document.write("You are " + years + " years old.");

// Output: You are years years old. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:28:17.580

JavaScript 现在支持[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)格式的日期，尽可能使用标准化格式是有益的 - 您将遇到更少的兼容性问题：

```
var birthday = new Date("1988-09-20"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:29:57.290

一个选项是问题中描述的选项。[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse)：

> 我建议您手动解析日期字符串，并使用带有年、月和日参数的 Date 构造函数以避免歧义

您可以像这样为您的日期格式创建自己的解析方法（来自问题[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse)）：

```
// Parse date in dd/mm/yyyy format
function parseDate(input)
{
    // Split the date, divider is '/'
    var parts = input.match(/(\d+)/g);

    // Build date (months are 0-based)
    return new Date(parts[2], parts[1]-1, parts[0]);
} 
```

# javascript - 使用 Backbone.js 如何更快地清理内容视图？

> ID：14458518
> 
> 赞同：0
> 
> 时间：2013-01-22T12:25:33.397
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我用以下方法清理内容视图的 div：

```
$(".box2").empty(); 
```

之后，它呈现下一个视图（不删除模型）。如果最后一个视图有很多内容，当加载下一个视图时，最后一个视图的残留物会显示一段时间。
如何解决这个问题？

代码：

```
 var Contents = Backbone.View.extend({
        el: "body", 
        events: {
            "click .addAll": "addContentAll", "click .addFront": "addContentChart"    
        },
        initialize: function() {
            _.bindAll(this); 
            this.model = new ContentCollection();
            this.model.on("add", this.contentAdded);
        },          
        addContentAll: function(event) {
                    this.model.add({name: "all"});  
                    //some content or plugin
        },  
        addContentChart: function(event) {
                    this.model.add({name: "chart"});
                    //charts content
        },         
        contentAdded: function(content) {
            if (content.view == null) {
                var template_name;              
                switch(content.get("name")){        
                    case 'all': template_name = 'all'; break; 
                    case 'chart': template_name = 'chart'; break;  
                }                                       
                content.view = new ContentView({model: content,template: $.trim($("[data-template-name='"+ template_name +"'] div").html() || "Template not found!")});
                $(".box2").empty(); 
                this.$el.find(".content").find("div.box2").append(content.view.render().el);                                                 
            }       
        }   
   });
var ContentView = Backbone.View.extend({
            tagName: "div",
            template: null,
            initialize: function() {
                _.bindAll(this);
                this.template = this.options.template; 
            },
            render: function() {        
                this.$el.html(Mustache.render(this.template, this.model.toJSON())); 
                return this; 
            }
 });     
 var view = new Contents(); 
```

`empty()`内容呈现后。有什么方法可以检查`empty()`函数何时生成？我认为它返回无效。这将是使用加载指示器然后渲染视图的好方法。

已解决：冲突在另一个内容插件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:55:19.613

这不是您清除 div 问题的直接答案，但您是否测试过是否可以通过在同一位置创建另一个来获得更快的性能（即 <div id="imHidden"></div><div id= "imVisible"></div>)，在它仍然隐藏的时候填充它，然后在两个div的每一个上切换隐藏/显示状态？

如果这是您必须经常在 UI 中执行的操作，您甚至可能需要在两个 div 之间来回切换。一个可见，一个不可见，填充或清空 div 的任何操作仅发生在当前隐藏的任何一个上。

# c# - 无法将模型绑定到 TreeView

> ID：14458521
> 
> 赞同：0
> 
> 时间：2013-01-22T12:25:41.527
> 
> 标签：c#, wpf, xaml, binding

这是一个日志项目，标题提供了项目的名称，消息记录了每个阶段。因此，每个标题都有许多消息。

为了提出问题，我正在简化我的对象。

我的 Log 类有 2 个属性。

```
List<LogDetails>
string Title 
```

我的 LogDetails 类有 1 个属性：

```
string Message 
```

我无法将消息绑定到我的 XAML。标题根据需要绑定。

我的xml代码：

```
<Window x:Class="BackUps.Logging.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:myData="clr-namespace:BackUps.Logging"
        Title="MainWindow"
        Height="350"
        Width="525">
  <Grid>
    <TreeView ItemsSource="{Binding}">
      <TreeView.ItemTemplate>
        <HierarchicalDataTemplate DataType="{x:Type myData:Log}"
                                  ItemsSource="{Binding LogDetailsList}">
          <TextBlock Text="{Binding Title}" />
          <HierarchicalDataTemplate.ItemTemplate>
            <DataTemplate DataType="{x:Type myData:LogDetails}">
              <StackPanel>
                <TextBlock Text="{Binding Message}" />
              </StackPanel>
            </DataTemplate>
          </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
      </TreeView.ItemTemplate>
    </TreeView>
  </Grid> 
```

和我背后的代码

```
 public MainWindow(List<Log> logs)
    {
        InitializeComponent();
        this.DataContext = logs;
    } 
```

我的结果是（您可以在其中看到丢失的条目）：

![在此处输入图像描述](../Images/17528488fe57e791e37891cfea1906a6.png)

这是 Auto 的窗口，它显示了我正在尝试绑定的对象。

![在此处输入图像描述](../Images/ebc7772262c92a227b0b59247fe00a2b.png)

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:27:51.217

我过去遇到过类似的问题，并通过（完全）将 xaml 更改为以下形式来修复它：

```
<Grid>
  <TreeView ItemsSource="{Binding}">
    <TreeView.Resources>
      <HierarchicalDataTemplate DataType="{x:Type myData:Log}"
                                ItemsSource="{Binding LogDetailsList}">
        <TextBlock Text="{Binding Title}" />
      </HierarchicalDataTemplate>
      <HierarchicalDataTemplate DataType="{x:Type myData:LogDetails}>
                        <TextBlock Text="{Binding Message}" />
      </HierarchicalDataTemplate>
    </TreeView.Resources>
  </TreeView>
</Grid> 
```

# c++ - 拆分数据知道它的公共 ID

> ID：14458526
> 
> 赞同：1
> 
> 时间：2013-01-22T12:26:04.420
> 
> 标签：c++, algorithm, matlab, split

我想拆分这些数据，

```
ID x    y
1  2.5  3.5
1  85.1 74.1
2  2.6  3.4
2  86.0 69.8
3  25.8 32.9
3  84.4 68.2
4  2.8  3.2
4  24.1 31.8
4  83.2 67.4 
```

我能够与他们的搭档相匹配，例如，

```
ID x    y    ID x    y   
1  2.5  3.5  1  85.1 74.1
2  2.6  3.4  2  86.0 69.8
             3  25.8 32.9
             4  24.1 31.8 
```

但是，您注意到 ID 4 中的一些新行放置错误，因为它刚刚添加到接下来的几行中。我想正确拆分它们，而不必使用我已经在使用的复杂逻辑......有人可以给我一个算法或想法吗？

它应该看起来像，

```
ID x    y    ID x    y      ID x    y 
1  2.5  3.5  1  85.1 74.1   3  25.8 32.9
2  2.6  3.4  2  86.0 69.8   4  24.1 31.8
4  2.8  3.2  3  84.4 68.2
             4  83.2 67.4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:23:07.643

看来您的问题实际上是关于聚类的，并且 ID 列与确定哪些点对应于哪些点无关。

实现这一目标的常用算法是[k-means clustering](http://en.wikipedia.org/wiki/K-means_clustering)。但是，您的问题意味着您事先不知道集群的数量。这使事情变得复杂，并且在 StackOverflow 上已经有很多关于这个问题的问题：

1.  [Kmeans 不知道集群的数量？](https://stackoverflow.com/q/6615665/1336150)
2.  [为 kmeans 自动计算 clustersize](https://stackoverflow.com/questions/13684041/compute-clustersize-automatically-for-kmeans)
3.  [使用 k-means 聚类时如何确定 k？](https://stackoverflow.com/questions/1793532/how-do-i-determine-k-when-using-k-means-clustering)
4.  [如何在 K 中优化 K - 均值算法](https://stackoverflow.com/questions/6212690/how-to-optimal-k-in-k-means-algorithm)
5.  [K-Means 算法](https://stackoverflow.com/questions/6353537/k-means-algorithm/635405)

不幸的是，对此没有“正确”的解决方案。一个特定问题中的两个集群确实可以被视为另一个问题中的一个集群。这就是为什么你必须自己决定。

不过，如果您正在寻找一些简单的东西（并且可能不准确），您可以使用欧几里得距离作为衡量标准。计算点之间的距离（例如使用[`pdist`](http://www.mathworks.com/help/stats/pdist.html)），并将距离低于某个阈值的点分组。

### 例子

```
%// Sample input
A = [1,  2.5,  3.5;
     1,  85.1, 74.1;
     2,  2.6,  3.4;
     2,  86.0, 69.8;
     3,  25.8, 32.9;
     3,  84.4, 68.2;
     4,  2.8,  3.2;
     4,  24.1, 31.8;
     4,  83.2, 67.4];

%// Cluster points
pairs = nchoosek(1:size(A, 1), 2); %// Rows of pairs
d = sqrt(sum((A(pairs(:, 1), :) - A(pairs(:, 2), :)) .^ 2, 2)); %// d = pdist(A)
thr = d < 10;                      %// Distances below threshold
kk = 1;
idx = 1:size(A, 1);
C = cell(size(idx));               %// Preallocate memory
while any(idx)
     x = unique(pairs(pairs(:, 1) == find(idx, 1) & thr, :));
     C{kk} = A(x, :);
     idx(x) = 0;                   %// Remove indices from list
     kk = kk + 1;
end
C = C(~cellfun(@isempty, C));      %// Remove empty cells 
```

结果是一个元胞数组`C`，每个元胞代表一个簇：

```
C{1} =
    1.0000    2.5000    3.5000
    2.0000    2.6000    3.4000
    4.0000    2.8000    3.2000

C{2} =
    1.0000   85.1000   74.1000
    2.0000   86.0000   69.8000
    3.0000   84.4000   68.2000
    4.0000   83.2000   67.4000

C{3} = 
    3.0000   25.8000   32.9000
    4.0000   24.1000   31.8000 
```

请注意，这种简单的方法存在将集群半径限制在阈值的缺陷。但是，您想要一个简单的解决方案，因此请记住，当您向算法添加更多“聚类逻辑”时，它会变得复杂。

# css - 覆盖图像下方的css文本

> ID：14458528
> 
> 赞同：0
> 
> 时间：2013-01-22T12:26:07.613
> 
> 标签：css, image, overlay

我有一个产品图像和一个看起来像文件夹的叠加图像，所需的效果是文件夹图像看起来就像它上面有产品图像。这完美！

问题是，文本显示在产品/叠加图像后面，我真的希望它放在下面。我尝试过巧妙地移动关闭的 div，认为这会强制下一个，但它仍然显示在后面。

这是html：

```
<div class='kit-folder'>
<img class='overlay-image' src='/images/fldr_blue_overlay.png' width='150' height='106' />
<img src='$fldr_image' alt='press kit' class='kit-image' width='150' height='106'/>
Name: $fldr_name<br>Published: $pymnt_date
</div> 
```

这是CSS：

```
.kit-folder {padding:0px; width:auto; position:relative;}
img.overlay-image{position:absolute; left:0px; top:0px; z-index:10;}
img.kit-image{position:absolute; left:0px; top:0px; z-index:1;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:58:25.680

大约 4 小时后，我发现我可以 a) 在文本之前关闭 div 和 B) 在 kit-folder 上设置 height:110px 并且文本出现在它应该出现的位置。

# php - in_array() 工作正常但抛出错误？

> ID：14458530
> 
> 赞同：0
> 
> 时间：2013-01-22T12:26:11.127
> 
> 标签：php

AFAIK -`in_array()`应该返回`TRUE`或`FALSE`。

就我而言，它确实验证为真 - 但仍然抛出错误：

> [function.in-array]：第二个参数的数据类型错误

这条线是这样的：

```
in_array($key,$instance['cfl2']); 
```

并且`$instance['cfl2']`是经过验证的`array`，如下所示：

`array(2) { [0]=> string(8) "price" [1]=> string(6) "age" }`

我的问题是：

*   我究竟做错了什么。
*   为什么它会抛出错误（但仍然可以正常工作并返回 true）
*   是否因为我使用某种嵌套数组而出现问题？（意味着一个数组项`$instance['cfl2']`实际上本身就是一个数组？

我也试过`$is = $instance['cfl2']`-`in_array($key,$is)`但结果是同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:53:25.973

您可以将变量强制转换为数组以避免此错误：

`in_array($key, (array) $instance['cfl2'])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:45:18.827

`in_array()`将作为`in_array("search", $instance)`.

如果您使用的是嵌套或多维数组，那么将`in_array()`无法工作，您应该编写一个单独的函数来处理这个问题。或`array_key_exists()`改为使用。它适用于某些特定情况。看看你的要求是否得到满足。

IE

```
if(array_key_exists($key,$instance['cfl2'])) 
```

# java - 如何从库中调用此方法？

> ID：14458531
> 
> 赞同：1
> 
> 时间：2013-01-22T12:26:11.930
> 
> 标签：java, android, syntax

我不确定如何从另一个类调用此方法，`deleteSurroundingText(int leftLength, int rightLength)`它位于库中的 Class EmulatorView 中。但它似乎也嵌套在其他一些类中，所以我不能说类似`EmulatorView.deleteSurroundingText(1,1);`

这是关于该方法的内容：

**boolean jackpal.androidterm.emulatorview.EmulatorView.onCreateInputConnection(...).new BaseInputConnection() {...}.deleteSurroundingText(int leftLength, int rightLength)**

```
boolean jackpal.androidterm.emulatorview.EmulatorView.onCreateInputConnection(...).new BaseInputConnection() {...}.deleteSurroundingText(int leftLength, int rightLength)

Overrides: deleteSurroundingText(...) in BaseInputConnection
public boolean deleteSurroundingText (int beforeLength, int afterLength)
Added in API level 3
The default implementation performs the deletion around the current selection position of the editable text.

Parameters
beforeLength    The number of characters to be deleted before the current cursor position.
afterLength The number of characters to be deleted after the current cursor position. 
```

代码部分：

```
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
        outAttrs.inputType = mUseCookedIme ?
                EditorInfo.TYPE_CLASS_TEXT :
                EditorInfo.TYPE_NULL;
        return new BaseInputConnection(this, true) {

            public boolean deleteSurroundingText(int leftLength, int rightLength) {
                  Log.w(TAG2, "in DeleteSurroundingText");
                if (LOG_IME) {
                    Log.w(TAG, "deleteSurroundingText(" + leftLength +
                            "," + rightLength + ")");
                }
                if (leftLength > 0) {
                    for (int i = 0; i < leftLength; i++) {
                        sendKeyEvent(
                            new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL));
                    }
                } else if ((leftLength == 0) && (rightLength == 0)) {
                    // Delete key held down / repeating
                    sendKeyEvent(
                        new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL));
                }
                // TODO: handle forward deletes.
                //int i = 1;
               //deleteSurroundingText(i, i);
                return true;
            }         
        };
    } 
```

谢谢

# php - 删除后如何发现最后一个ID并设置新的自动增量mysql数据行

> ID：14458536
> 
> 赞同：0
> 
> 时间：2013-01-22T12:26:25.150
> 
> 标签：php, mysql, codeigniter

我有一个问题，我在 2 个表中按 id 从 mysql 中删除数据，但在销售表上我想在删除后保持相同的 id。当我添加新销售时，请保留最后删除的 ID。

例如，我在删除时有销售 id nr 100，在创建新销售时，id 将为 101。如果我删除，我想要保留 100。

这是我基于codeigniter的模型：

```
public function getAllInvoiceItems($sale_id) 
    {
        $q = $this->db->get_where('sale_items', array('sale_id' => $sale_id));
        if($q->num_rows() > 0) {
            foreach (($q->result()) as $row) {
                $data[] = $row;
            }

            return $data;
        }
    }

    public function getInvoiceByID($id)
        {

            $q = $this->db->get_where('sales', array('id' => $id), 1); 
              if( $q->num_rows() > 0 )
              {
                return $q->row();
              } 

              return FALSE;

        }

        public function deleteInvoice($id) 
        {
            $inv = $this->getInvoiceByID($id);
            $warehouse_id = $inv->warehouse_id;
            $items = $this->getAllInvoiceItems($id);

            foreach($items as $item) {
                $product_id = $item->product_id;
                $item_details = $this->getProductQuantity($product_id, $warehouse_id);
                $pr_quantity = $item_details['quantity'];
                $inv_quantity = $item->quantity;
                $new_quantity = $pr_quantity + $inv_quantity;

                $this->updateQuantity($product_id, $warehouse_id, $new_quantity);

            }

            if($this->db->delete('sale_items', array('sale_id' => $id)) && $this->db->delete('sales', array('id' => $id))) {
                return true;
            }
        return FALSE;
        } 
```

# java - 通过 Java SDK 将 LineObject 添加到 Crystal Report

> ID：14458539
> 
> 赞同：0
> 
> 时间：2013-01-22T12:26:36.037
> 
> 标签：java, crystal-reports

我已在我的桌面应用程序中成功地将 Crystal Report 与 Java 连接起来。现在我想以编程方式在报告中添加一行。

我已经用下面的代码试过了。

```
try {
    ReportDefController rdc = reportClientDoc.getReportDefController();
} catch (ReportSDKException ex) {
    Logger.getLogger(PurchaseReport.class.getName()).log(Level.SEVERE, null, ex);
}

Tables tables = null;
try {
    tables = reportClientDoc.getDatabase().getTables();
} catch (ReportSDKException ex) {
    Logger.getLogger(PurchaseReport.class.getName()).log(Level.SEVERE, null, ex);
}

LineObject lineObject = new LineObject();
lineObject.clone(false);
lineObject.setSectionCode(0);
lineObject.setLineThickness(10);
lineObject.setLeft(50);
lineObject.setWidth(50);
lineObject.setHeight(10);
lineObject.setRight(20);
lineObject.setTop(10);
lineObject.setLineColor(Color.BLUE);

ReportObjectController roc = null;
try {
    roc = reportClientDoc.getReportDefController().getReportObjectController();
} catch (ReportSDKException ex) {
    Logger.getLogger(PurchaseReport.class.getName()).log(Level.SEVERE, null, ex);
}

ReportDefController reportDefController = null;
try {
    reportDefController = reportClientDoc.getReportDefController();
    ISection section = reportDefController.getReportDefinition().getDetailArea().getSections().getSection(0);
    lineObject.setSectionName(section.getName());
    //roc.add(fieldObject, section, 0);
    if(roc.canAddReportObject(lineObject, section))
    {
        roc.add(lineObject, section, -1);
    }
} catch (ReportSDKException ex) {
    Logger.getLogger(PurchaseReport.class.getName()).log(Level.SEVERE, null, ex);
} 
```

这会引发错误`roc.add(lineObject, section, -1)`

如何解决此错误并正确添加该行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:02:24.440

线和框的添加与 SDK 中的常规报表对象略有不同，因为它们可以跨越部分/区域。您需要指定 'bottom'（或 'right'）和 'endSection' 属性，其中 'bottom' 是与结束部分顶部的偏移量。高度和宽度属性对这些绘图对象没有影响（使用 'right' 结合 'left' 来指定宽度）

关于您的问题：首先，您需要删除对`setHeight`&的调用`setWidth`。

然后，在最后一个 try 块中尝试以下代码：

```
reportDefController = reportClientDoc.getReportDefController();
ISection section = reportDefController.getReportDefinition().getDetailArea().getSections().getSection(0);
lineObject.setSectionName(section.getName());

// BEGIN ADDED CODE

// specify section you want line to end in
lineObject.setEndSectionName(section.getName()); 

// how far down in the end section you want your line object - if you want a horizontal line, use setRight instead
lineObject.setBottom(100);                       

// specify some style so it appears (I think default is noLine)
lineObject.setLineStyle(LineStyle.singleLine);

// END ADDED CODE

if(roc.canAddReportObject(lineObject, section)) {
    roc.add(lineObject, section, -1);
} 
```

这将添加一条小的垂直线，从 10 开始（基于代码中的 setTop 调用）并在第一个详细信息部分中以 100 结束。您可能需要调整数字和位置以满足您的需求。

# c# - 在 C# 中实现功能标志

> ID：14458541
> 
> 赞同：10
> 
> 时间：2013-01-22T12:26:43.363
> 
> 标签：c#, asp.net, architecture

[功能标志](https://stackoverflow.com/questions/7707383/what-is-a-feature-flag)是我经常使用的东西，但在我正在从事的这个新项目开始之前，我从未真正考虑过它。

我通常在我的 web.config 文件中使用很多键来实现它，但这种方法有两个主要缺点：

1.  当更改 web.config 中的值时，应用程序池会重新启动 - 这在访问量很大的环境中可能是一个问题
2.  web.config 文件中的键过多会让人感到困惑，而且会变得非常混乱

克服这些问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T12:59:46.267

我建议使用 IoC 来抽象出你的特性标志的实现——你需要访问的所有代码都是类似`IFeatures.IsEnabled("FeatureA")`. 完成此操作后，您可以选择最明智的实施方式 - 一些建议如下：

*   web.config 实现（与您现在拥有的兼容）
*   数据库实现（使用缓存值，如果您想在网络场上工作，可能使用 SqlDependency）
*   单独的配置文件实现（缓存，但使用 FileSystemWatcher 来检查配置文件的更改并加载它们而无需重新启动应用程序池）。这允许您需要在需要数据库之前定义功能的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T12:29:46.687

您不必将功能标志存储在`web.config`.

一种选择是将它们存储在数据库中 - 这具有在网络场中运行良好的额外好处。

请注意，使用功能标志，一旦您处于某个功能将永久打开或关闭的位置（例如，从小部件 A 转换到小部件 B 时，您将不再需要任何小部件 A 代码），您应该删除该功能并关联旗帜。这将有助于管理功能集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T11:32:36.567

如果您想向 C# 应用程序添加功能标志，我不建议您创建自己的功能标志解决方案，而是使用可以直接与 C# 直接集成的几个功能标志即服务提供商之一的盒子。

一种这样的解决方案是[Floodgate](https://floodgate.io)，它有一个适用于 .Net 的 SDK，您可以立即在应用程序中使用功能标志安装并启动和运行它。

免责声明，我的名字是 Eugene，我是 Floodgate 的创始人。话虽如此，无论您决定使用哪种功能标志提供程序，我的建议都是相同的。

# php - 将 ZF2 模块用于非站点 cronJob

> ID：14458545
> 
> 赞同：0
> 
> 时间：2013-01-22T12:26:50.953
> 
> 标签：php, zend-framework2

有没有办法在独立于网站本身的 PHP-Cronscript 中使用我的 ZF2 模块（特别是 DB-Models）？它到底长什么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:38:52.920

我已经通过使用控制台指令来做到这一点。您将能够执行以下操作：

```
php public/index.php cron diskspace_update 
```

实际上，我有很多 crons 以这种方式运行，到目前为止一切都很好。他们还与数据库交互

# php - 检查特定输入文件是否为空

> ID：14458553
> 
> 赞同：42
> 
> 时间：2013-01-22T12:27:02.417
> 
> 标签：php

在我的表单中，我有 3 个用于文件上传的输入字段：

```
<input type=file name="cover_image">
<input type=file name="image1">
<input type=file name="image2"> 
```

如何检查是否`cover_image`为空 - 没有文件上传？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-22T12:29:12.083

您可以使用数组`size`上的字段进行检查，如下所示：`$_FILES`

```
if ($_FILES['cover_image']['size'] == 0 && $_FILES['cover_image']['error'] == 0)
{
    // cover_image is empty (and not an error)
} 
```

*（我也在`error`这里检查，因为它可能是`0`如果出了问题。我不会`name`用于这个检查，因为它可以被覆盖）*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-22T12:29:10.837

**方法一**

```
if($_FILES['cover_image']['name'] == "") {
// No file was selected for upload, your (re)action goes here
} 
```

**方法二**

```
if($_FILES['cover_image']['size'] == 0) {
// No file was selected for upload, your (re)action goes here
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-22T12:30:54.860

您可以通过执行以下操作检查是否有值，以及图像是否有效：

```
if(empty($_FILES['cover_image']['tmp_name']) || !is_uploaded_file($_FILES['cover_image']['tmp_name']))
{
   // Handle no image here...
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-22T12:29:49.527

```
if (empty($_FILES['cover_image']['name'])) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-26T00:10:35.230

简单的 ：

```
if($_FILES['cover_image']['error'] > 0)
    // cover_image is empty 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-22T12:29:14.507

表格发布后检查以下内容

```
$_FILES["cover_image"]["size"]==0 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-08-28T08:48:29.523

```
 if (!$_FILES['image']['size'][0] == 0){ //} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-22T12:32:53.153

```
 if( ($_POST) && (!empty($_POST['cover_image'])) )    //verifies  if post exists and cover_image is not empty
    {
    //execute whatever code you want
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-06-17T02:50:50.190

$_FILES 是一个关联的 POST 方法数组，如果您想检查有关 $_FILES 的任何内容，您必须考虑索引...我尝试了很多建议的选项，唯一对我有用的方法是当我包含我的验证方法中的索引。

```
$_FILES['Your_File']['name'][0]; 
```

所以再见了：

```
 if(empty($_FILES['Your_File']['name'][0])){
    print('this thing is empty');
 }else{
    print('Something, something, something');
 } 
```

没有什么能比得上好的旧实验和大量阅读了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-19T06:49:18.497

```
if($_FILES['img_name']['name']!=""){
   echo "File Present";
}else{
  echo "Empty file";
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-24T11:18:15.183

```
if ($_FILES['cover_image']['size'] == 0 && $_FILES['cover_image']['error'] == 0)
{ 
      // Code comes here
} 
```

这东西对我有用…………

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-08-10T21:53:40.557

```
if(!empty($_FILES)) { // code if not uploaded } else { // code if uploaded } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-25T09:40:47.603

```
<input type="file" class="custom-file-input" id="imagefile" name="imagefile[]"  multiple lang="en">
<input type="hidden" name="hidden_imagefile[]" value="<?=$row[2]; ?>" class="form-control border-input" >

    if($_FILES['imagefile']['name'] == '')
        {
          $img = $_POST['hidden_imagefile'];
        }
        else{
          $img = '';
          $uploadFolder = 'uploads/gallery/';
          foreach ($_FILES['imagefile']['tmp_name'] as $key => $image) {
            $imageTmpName = time() .$_FILES['imagefile']['tmp_name'][$key];
            $imageName = time() .$_FILES['imagefile']['name'][$key];
            $img .= $imageName.',';
            $result = move_uploaded_file($imageTmpName, $uploadFolder.$img);
          }

        } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-04-24T04:19:01.437

这将起作用

if ($_FILES['cover_image']['size'] == 0 && $_FILES['cover_image']['error'] == 0)

// 检查文件是否被选中并且没有错误

{

// 文件没有被选中，也不是错误

}

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-05T05:54:02.313

```
if ($_FILES['cover_image']['error'] == 4){
    // the user did not choose any file
}else{
   // the user chose a file to be uploaded
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-12T16:42:05.570

更新： **使用此方法：**

> 首先检查 $_FILES 中是否存在“cover_image”键，然后检查其他文件错误

```
if (in_array('cover_image', array_keys($_FILES) && $_FILES['cover_image']['error'] == 0) {
  // TODO: write your code
} else {
  // return error
} 
```

# c# - 从文本中获取 3 个单词

> ID：14458555
> 
> 赞同：1
> 
> 时间：2013-01-22T12:27:10.823
> 
> 标签：c#, regex

我必须编写一个正则表达式才能从文本中获取三个单词。单词用一个空格分隔。我写的代码不是给我所有的序列。例如对于文本“一二三四五六”，我只有两个序列：1.一二三 2.四五六。但我希望我的正则表达式给我所有的序列，所以输出将是：1.一二三 2.二三四 3.三四五。4.四五六。有人可以告诉我我的正则表达式有什么问题吗？这是我的代码：

```
 string input = "one two three four five six";
   string pattern = @"([a-zA-Z]+ ){2}[a-zA-Z]+";
   Regex rgx = new Regex(pattern, RegexOptions.IgnoreCase);
   MatchCollection matches = rgx.Matches(input);
   if (matches.Count > 0)
   {
       Console.WriteLine("{0} ({1} matches):", input, matches.Count);
       Console.WriteLine();
       foreach (Match match in matches)
           Console.WriteLine(match.Value);
   }
   Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:50:09.417

您的正则表达式没有任何问题 - 这就是正则表达式的工作方式。*当您找到匹配项时，将在您刚刚找到*的匹配项的末尾继续搜索下一个匹配项- 匹配项的宽度已*消耗*。

那么，如何解决这个问题？一种方法是让你的比赛*不消耗任何东西*。您可以通过将原始模式放置在零宽度的正前瞻断言中来做到这一点：

```
string pattern = @"(?=([a-zA-Z]+ ){2}[a-zA-Z]+)";
added --->         ***                        * 
```

`(?=pattern)`说“仅当它紧随其后的是某些匹配时才匹配`pattern`”-但内容匹配`pattern`不是整体匹配的一部分，因此不会被消耗。

但是，如果它不是匹配的一部分，它就不会出现在`match.Value`- 那么你如何获得价值呢？简单 - 只需在原始模式周围添加一个捕获组（即`(?=(pattern))`），捕获的组将正常显示在您的结果中。

```
string pattern = @"(?=(([a-zA-Z]+ ){2}[a-zA-Z]+))";
added --->            *                        * 
```

所以现在，你可以`foreach`像以前一样遍历你的循环，但是`match.Value`会是空的——你想要的结果在`match.Groups[1].Value`.

但现在你有另一个问题。你的结果是

```
one two three
ne two three
e two three
two three four
wo three four 
```

等等。*这是因为即使您从单词中途开始*，您的模式也会匹配。

如何解决这个问题？

我们添加了另一个零宽度断言，这次是*否定的lookbehind* : `(?<![a-zA-Z])`。它不是说“仅当该点后面跟着模式时才匹配”，而是说“如果该点之前有模式，则*永远**不*匹配”。因此，我们永远不会匹配一个字母之前的点。不返回，例如，因为它前面是.*`ne two three``o`*

 *```
string pattern = @"(?<![a-zA-Z])(?=(([a-zA-Z]+ ){2}[a-zA-Z]+))";
added --->         ************* 
```

使用这种模式，您最终会得到预期的结果。*

# networking - 使用 PowerShell 从远程计算机发出请求

> ID：14458557
> 
> 赞同：3
> 
> 时间：2013-01-22T12:27:23.337
> 
> 标签：networking, powershell, httpwebrequest

我正在寻找一种从远程计算机发出网络请求的方法。一个网络中有 10 台服务器共享，我需要从每台服务器发出 Web 请求，例如向“http://google.com”发出请求。因此，我将使用 PowerShell 并开始编写脚本。但我不知道如何代表 server1、server2.. server10 发出请求

```
$hosts = @("server1Ip", "server2Ip", ..,"server10Ip");
$url = "http://google.com"
$hLen = $hosts.Length;

for ($i=0; $i -lt $hLen; $i++)
{
    try 
    {
        Write-Host "Pinging web address for server: $url ..."
        $request = [System.Net.WebRequest]::Create($url)
        $response = $request.GetResponse()
        Write-Host "Web Request Succeeded."   
    } catch 
    {
        Write-Host ("Web Request FAILED!!! The error was '{0}'." -f $_)
    } finally 
    {
        if ($response) 
        {
            $response.Close()
            Remove-Variable response
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:40:37.960

使用调用命令并将您的代码包装到 sciptblock 中，例如：

```
icm -computername $hosts -scriptBlock{
try 
    {
        Write-Host "Pinging web address for server: $url ..."
        $request = [System.Net.WebRequest]::Create("http://google.com")
        $response = $request.GetResponse()
        Write-Host "Web Request Succeeded."   
    } catch 
    {
        Write-Host ("Web Request FAILED!!! The error was '{0}'." -f $_)
    } finally 
    {
        if ($response) 
        {
            $response.Close()
            Remove-Variable response
        }
    }
} 
```

# php - 提取显示“数组”的 EXIF 数据

> ID：14458558
> 
> 赞同：0
> 
> 时间：2013-01-22T12:27:25.023
> 
> 标签：php, geolocation, exif

试图从照片 exif 中提取位置数据，但它只显示 GPS 数据的“阵列”。它需要将数据保存到服务器上的日志文件中以进行抓取。难道我做错了什么？这张照片上肯定有地理位置数据。

```
<?php
    $image = "narnia.jpg";
    $exif = exif_read_data($image, 0, true);
    foreach ($exif as $key => $section) {
    foreach ($section as $name => $val) {
    echo "$key.$name: $val<pre>\n</pre>";
    }
    }
?>

GPS.GPSLatitudeRef: N
GPS.GPSLatitude: Array
GPS.GPSLongitudeRef: W
GPS.GPSLongitude: Array
GPS.GPSTimeStamp: Array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:28:27.110

是的，因为它是一个数组。

```
print_r($val); 
```

[http://codepad.viper-7.com/PPJtsB](http://codepad.viper-7.com/PPJtsB)

# java - PDE 处理中的窗口大小调整

> ID：14458560
> 
> 赞同：0
> 
> 时间：2013-01-22T12:27:28.247
> 
> 标签：java, processing

我希望有人可以在这里帮助我。我几乎是一个菜鸟，试图制作一个交互式图形来显示足球队在 FIFA 排名上的上升或下降。我加载了我在处理之外创建的图片来代表团队，我希望他们根据鼠标点击事件移动。

我现在的问题是，当我测试应用程序时，它不会根据我输入的设置调整大小。大多数图像都会被截断。我尝试了 frame.setResizable()，虽然我可以在一定程度上操纵窗口的大小，但我的图像仍然被截断。

下面是我的代码，我正在 OS X 上运行的 Macbook Pro 上处理 2.0B7：

```
//Setting up the images that will go into the sketch

PImage img1;
PImage img2;
PImage img3;
PImage img4;
PImage img5;
PImage img6;
PImage img7;
PImage img8;
PImage img9;
PImage img10;
PImage img11;
PImage img12;
PImage img13;
PImage img14;
PImage img15;
PImage img16;
PImage img17;

//loading the images from the file
void setup() {
  size(600, 1200); 
  frame.setResizable(true);  
  img1 = loadImage("Click.png");
  img2 = loadImage("Team_Algeria.png");
  img3 = loadImage("Team_Angola.png");
  img4 = loadImage("Team_BurkinaFaso.png");
  img5 = loadImage("Team_CapeVerde.png");
  img6 = loadImage("Team_DRCongo.png");
  img7 = loadImage("Team_Ethiopia.png");
  img8 = loadImage("Team_Ghana.png");
  img9 = loadImage("Team_IvoryCoast.png");
  img10 = loadImage("Team_Mali.png");
  img11 = loadImage("Team_Morocco.png");
  img12 = loadImage("Team_Niger.png");
  img13 = loadImage("Team_Nigeria.png");
  img14 = loadImage("Team_SouthAfrica.png");
  img15 = loadImage("Team_Togo.png");
  img16 = loadImage("Team_Tunisia.png");
  img17 = loadImage("Team_Zambia.png");
}

int a = 0;

//Drawing the images into the sketch
void draw() {
  background(#000000);
  image(img1, 400, 100);
  image(img2, 100, 200);
  image(img3, 100, 260);
  image(img4, 100, 320);
  image(img5, 100, 380);
  image(img6, 100, 440);
  image(img7, 100, 500);
  image(img8, 100, 560);
  image(img9, 100, 620);
  image(img10, 100, 680);
  image(img11, 100, 740);
  image(img12, 100, 800);
  image(img13, 100, 860);
  image(img14, 100, 920);
  image(img15, 100, 980);
  image(img16, 100, 1040);
  image(img17, 100, 1100);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:44:44.363

我不确定您所说的截止是什么意思，但请记住您只是在说明位置，因此如果图像更大（在您的情况下高于 60 高度），它们将相互重叠。您正在加载的 png 图像的确切尺寸是多少？

[尝试为图像分配大小，即根据 ref](http://processing.org/reference/image_.html)添加另外两个参数：

```
image(img2, 100, 200, whateverWidth, 60);  // I put 60 since it is the vertical space you are leaving between images 
```

这有帮助吗？

# python - python，GoogleAppEnginge 无法将字符串转换为整数来做一个简单的简单数学方程

> ID：14458561
> 
> 赞同：0
> 
> 时间：2013-01-22T12:27:32.837
> 
> 标签：python, google-app-engine, int

# 注意：我解决了这个问题

我不想让任何人浪费时间尝试修复此代码，因为我已经发现了这个问题。每个试图提供帮助的人都会得到支持。

这是我自己发现的问题，并且因为犯了这个错误而感到非常愚蠢。

错误出现在我的 HTML 代码中。我不小心将一堆字段命名为“数字”，这样做没有可供 python 脚本提取的变量。

我不敢相信我做了这么愚蠢的事情。我真的很感谢你们的努力。

另外我认为无论如何我都需要创建一个验证来防止用户输入错误，所以我很感谢你提出这个建议。

你们摇滚，感谢您的快速响应。

我会尽力帮助别人作为表达感谢的方式！

嗨，我正在尝试创建一个非常基本的基本 Web 应用程序，它接受文本输入并接受几种形式的文本并将其转换为整数，这样我就可以用它做一些数学方程式，然后显示结果

以下是大部分脚本（跳到底部查看发生故障的关键部分）

```
class MainPage(webapp.RequestHandler):
def get(self):
    self.response.out.write("""
      <html>
        <body>
          <form action="/battle" method="post">
            <div style="color:red"><p>
<label>Attacking Player Name
  <input type="text" name="attacker" id="attacker" />
</label>
</p>
<h3>Attacker's heros</h3>

<label># of Archers
<input type="number" name="number" id="archers1" min="0" max="50" />
</label>
<br>
<label># of Sword Dudes
<input type="number" name="knight1" id="# of Sword Dudes"min="0" max="50">
<br>
# of Ballistae
<input type="number" name="ballistae1" id="ballistae1"min="0" max="50">
</label>
<p><br />
<label>Defending Player Name
  <input type="text" name="defender" id="defending" />
</label>
</p>
<h3>Defender's heros</h3>
<p><label># of Archers
<input type="number" name="number" id="archers2" min="0" max="50" />
</label>
<br>
<label># of Sword Dudes
<input type="number" name="knight2" id="# of Sword Dudes"min="0" max="50">
<br>
# of Ballistae
<input type="number" name="ballistae2" id="ballistae1"min="0" max="50">
</label>
</p></div>

            <div><input type="submit" value="Battle!"></div>
          </form>
        </body>
      </html>""")

class battle(webapp.RequestHandler):
def post(self):
    announce=self.request.get('attacker')+" attacks "+self.request.get('defender')
    archers1c=int(cgi.escape(self.request.get('archers1')))
    knights1c=float(self.request.get('knights1'))
    ballistae1c=float(self.request.get('ballistae1'))
    armycount1=archers1+knights1+ballistae1
    armycount2=self.request.get('archers2')+self.request.get('knights2')+self.request.get('ballistae2')
    self.response.out.write('<html><body>You wrote:<pre>')
    self.response.out.write(str(announce))
    self.response.out.write(cgi.escape(self.request.get('player1name')))
    self.response.out.write('<br><br>')
    self.response.out.write(armycount1)
    self.response.out.write('</pre></body></html>') 
```

好的，这是我的问题：

```
 announce=self.request.get('attacker')+" attacks "+self.request.get('defender')
    archers1c=int(self.request.get('archers1'))
    knights1c=int(self.request.get('knights1'))
    ballistae1c=int(self.request.get('ballistae1'))
    armycount1=archers1+knights1+ballistae1 
```

当这部分脚本运行时，我在这一行得到一个错误：

```
 archers1c=int(self.request.get('archers1')) 
```

我收到的错误是

```
 ValueError: invalid literal for int() with base 10: '' 
```

如何将用户表单输入生成的字符串转换为数字，以便在数学方程式中使用？

```
 armycount1=archers1+knights1+ballistae1 
```

我是 Google App Engine 的新手，但对 python 并不陌生，我希望这是一个非常简单的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:50:01.323

您的代码抛出异常是因为`self.request.get('archers1')`返回空字符串，可能是因为表单字段为空。

我的建议是验证您的表单字段，并使用 try/except 语句来捕获异常：

```
try:
    archers1c=int(self.request.get('archers1'))
except ValueError:
    # inform user of form validation error 
```

# paypal - 如果用户在 PayPal 付款后没有被重定向怎么办？

> ID：14458565
> 
> 赞同：3
> 
> 时间：2013-01-22T12:27:43.353
> 
> 标签：paypal

在购物车中添加东西后，单击一些立即使用 PayPal 付款按钮，并成功 PayPal 付款（PP 或 CC），用户在逻辑上可能留在 PayPal 网站上，例如，如果未激活自动退货选项（或它是，但它不起作用，因为用户是没有 PP 帐户的访客用户）

用户可以通过单击链接返回站点，但不是必须的。我的问题是：如果他不这样做，网站所有者将如何知道用户已付款，以便他现在可以通过邮寄方式发送物品？网站所有者被告知获得报酬对我来说似乎很重要，所以我发现将这种基本的事情留给一些晦涩的自动返回选项是不可理解的。

请有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:53:18.613

这是任何重定向支付网关的常见挑战，也是大多数（如果不是全部）实现支付已完成的某种异步通知的原因。在 PayPal 中，这是即时付款通知 (IPN)。您必须在您的网站上设置一个从您的 PayPal 帐户配置文件设置链接到的通用 IPN 侦听器，或者您可以专门为您的交易创建一个更有针对性的 IPN 侦听器，并在您的表单或 API 请求中使用 NOTIFYURL（或相关）参数用于重定向到 PayPal 以向该侦听器发送 IPN。

在我的集成中，当客户从网站返回时，我从不执行任何订单更新或交易记录，而是更愿意等待我可以验证并确保来自 PayPal 的 IPN，而不是来自试图破解我结账的人的欺骗性返回过程。

有关详细信息，请参阅 IPN 文档：[https ://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T06:41:40.437

Paypal 为此提供了 IPN，通过它我们 paypal 向您的站点异步发送请求，您可以执行您想要的任何操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T21:56:29.037

我认为这里可能忽略了这一点。或者确实存在问题。如果购买者使用CC，即使你设置了IPN并且它可以工作，但是如果购买者使用CC并且没有点击最后一页上的按钮，使用PP帐户时没有出现，则资金可能会通过，但没有 IPN，因此您的网站不知道购买。最后一页是 CC 用户在带有“支付”按钮的页面之后获得的额外页面。

在这种状态下，您甚至可以进入 IPN 历史记录，IPN 在那里，说它已发送，但它还没有发送。直到购买者点击额外页面上的按钮然后他们被带到自动退货页面后才会发送。

# c# - 使接口实现异步

> ID：14458566
> 
> 赞同：149
> 
> 时间：2013-01-22T12:27:44.800
> 
> 标签：c#, asynchronous, async-await

我目前正在尝试使用一些异步方法来制作我的应用程序。我所有的 IO 都是通过接口的显式实现完成的，我对如何使操作异步有点困惑。

正如我所看到的，我在实施中有两个选择：

```
interface IIO
{
    void DoOperation();
} 
```

**选项1：** 做一个隐式实现异步并在隐式实现中等待结果。

```
class IOImplementation : IIO
{

     async void DoOperation()
    {
        await Task.Factory.StartNew(() =>
            {
                //WRITING A FILE OR SOME SUCH THINGAMAGIG
            });
    }

    #region IIO Members

    void IIO.DoOperation()
    {
        DoOperation();
    }

    #endregion
} 
```

**选项2：** 异步执行显式实现并等待来自隐式实现的任务。

```
class IOAsyncImplementation : IIO
{
    private Task DoOperationAsync()
    {
        return new Task(() =>
            {
                //DO ALL THE HEAVY LIFTING!!!
            });
    }

    #region IIOAsync Members

    async void IIO.DoOperation()
    {
        await DoOperationAsync();
    }

    #endregion
} 
```

这些实现中的一个是否比另一个更好，或者还有其他我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2013-01-22T13:00:02.297

这两个选项都不正确。您正在尝试异步实现同步接口。不要那样做。问题是`DoOperation()`返回时，操作还没有完成。更糟糕的是，如果在操作过程中发生异常（这在 IO 操作中很常见），用户将没有机会处理该异常。

您需要做的是*修改接口*，使其异步：

```
interface IIO
{
    Task DoOperationAsync(); // note: no async here
}

class IOImplementation : IIO
{
    public async Task DoOperationAsync()
    {
        // perform the operation here
    }
} 
```

这样，用户将看到该操作是`async`并且他们将能够执行`await`该操作。这也几乎迫使您的代码的用户切换到`async`，但这是不可避免的。

另外，我假设`StartNew()`在您的实现中使用只是一个示例，您不需要它来实现异步 IO。（更糟糕的`new Task()`是，这甚至行不通，因为你没有。）`Start()``Task`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-04-05T16:07:41.920

更好的解决方案是为异步操作引入另一个接口。新接口必须继承原接口。

例子：

```
interface IIO
{
    void DoOperation();
}

interface IIOAsync : IIO
{
    Task DoOperationAsync();
}

class ClsAsync : IIOAsync
{
    public void DoOperation()
    {
        DoOperationAsync().GetAwaiter().GetResult();
    }

    public async Task DoOperationAsync()
    {
        //just an async code demo
        await Task.Delay(1000);
    }
}

class Program
{
    static void Main(string[] args)
    {
        IIOAsync asAsync = new ClsAsync();
        IIO asSync = asAsync;

        Console.WriteLine(DateTime.Now.Second);

        asAsync.DoOperation();
        Console.WriteLine("After call to sync func using Async iface: {0}", 
            DateTime.Now.Second);

        asAsync.DoOperationAsync().GetAwaiter().GetResult();
        Console.WriteLine("After call to async func using Async iface: {0}", 
            DateTime.Now.Second);

        asSync.DoOperation();
        Console.WriteLine("After call to sync func using Sync iface: {0}", 
            DateTime.Now.Second);

        Console.ReadKey(true);
    }
} 
```

PS 重新设计你的异步操作，让它们返回 Task 而不是 void，除非你真的必须返回 void。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-09T21:01:52.627

我根据 Svick 的回答创建了一个示例应用程序，发现在`IOImplementation.DoOperationAsync()`没有`async`关键字的情况下调用不会导致编译器/Visual Studio 警告。这是基于 Visual Studio 2019 和 .NET Core 3.1。

下面的示例代码。

```
public interface ISomething
{
    Task DoSomethingAsync();
} 
```

```
public class Something : ISomething
{
    public async Task DoSomethingAsync()
    {
        await Task.Run(() => Thread.Sleep(2000));
        Console.WriteLine("Message from DoSomethingAsync");

        throw new Exception("Some exception");
    }
} 
```

```
class Program
{
    static void Main(string[] args)
    {
        ISomething something = new Something();

        Console.WriteLine("pre something.DoSomethingAsync() without await");
        something.DoSomethingAsync(); // No compiler warning for missing "await" and exception is "swallowed"
        Console.WriteLine("post something.DoSomethingAsync() without await");

        Thread.Sleep(3000);

        // Output:
        // pre something.DoSomethingAsync() without await
        // post something.DoSomethingAsync() without await
        // Message from DoSomethingAsync
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2020-08-18T23:56:15.327

可以使用抽象类代替接口（在 C# 7.3 中）。

```
// Like interface
abstract class IIO
{
    public virtual async Task<string> DoOperation(string Name)
    {
        throw new NotImplementedException(); // throwing exception
        // return await Task.Run(() => { return ""; }); // or empty do
    }
}

// Implementation
class IOImplementation : IIO
{
    public override async Task<string> DoOperation(string Name)
    {
        return await await Task.Run(() =>
        {
            if(Name == "Spiderman")
                return "ok";
            return "cancel";
        }); 
    }
} 
```

# java - 使用 ITLSSPProc.dll 时探测

> ID：14458567
> 
> 赞同：0
> 
> 时间：2013-01-22T12:27:45.720
> 
> 标签：java, dll

> **可能重复：**
> [无法通过从 ITLSSPProc.dll 调用本机方法来打开端口](https://stackoverflow.com/questions/14521284/unable-to-open-the-port-by-calling-native-method-from-itlsspproc-dll)

我正在使用 itlsspproc.dll 但收到以下错误

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：itl.ssp.proc.ITLSSPProcLoader.OpenSSPComPort(Litl/ssp/proc/ITLSSPProcLoader$SSP_COMMAND;)I at itl.ssp.proc.ITLSSPProcLoader.OpenSSPComPort(Native Method)at itl .ssp.proc.ITLSSPProcLoader.main(ITLSSPProcLoader.java:81)

这是我的代码

包 itl.ssp.proc；

```
 public class ITLSSPProcLoader {
        public class SSP_FULL_KEY
        {
            long FixedKey;
            long EncryptKey;
            public SSP_FULL_KEY(long fix, long encr)
            {
                FixedKey = fix;
                EncryptKey = encr;
            }
    }

    public class SSP_COMMAND
        {
            //string PortNumber; 
            SSP_FULL_KEY key;
            int BaudRate; // baud rate of the packet 
            int Timeout; // how long in ms to wait for a reply from the slave 
            String PortNumber; // the serial com port number of the host 
            String SSPAddress; // the SSP address of the slave 
            String RetryLevel; // how many retries to the slave for non-response 
            String EncryptionStatus; // is this an encrypted command 0 - No, 1 - Yes 
            String CommandDataLength; // Number of bytes in the command 
            String[] CommandData = new String[255]; // Array containing the command bytes 
            String ResponseStatus; // Response Status (PORT_STATUS enum) 
            String ResponseDataLength; // how many bytes in the response 
            String ResponseData[] = new String[255]; // an array of response data 
            String IgnoreError; // flag to suppress error box (0 - display,1- suppress) 

            public SSP_COMMAND(String comport)
            {
                BaudRate = 9600;
                Timeout = 500;
                PortNumber =  comport;
                System.out.println("sagar "+PortNumber);
                RetryLevel = "5";
                IgnoreError = "0";
                EncryptionStatus = "0";
                ResponseStatus = "0";
                ResponseDataLength = "0";
                SSPAddress = "0";
                CommandDataLength = "0";
                key = new SSP_FULL_KEY(012345670123, 012345670123);

            }
        } 

        public native static int  OpenSSPComPort (SSP_COMMAND cmd);
        public native static  int  CloseSSPComPort();
        public ITLSSPProcLoader()
        {
            try
            {
                System.loadLibrary("ITLSSPProc");
                System.out.println("library is loaded");

            }catch(Exception e)
            {
                e.printStackTrace();
            }

        }
        public static void main(String args[])
        {

            ITLSSPProcLoader itl = new ITLSSPProcLoader();

            SSP_COMMAND cmd = itl.new  SSP_COMMAND("com7");

            System.out.println("open port"+OpenSSPComPort(cmd)); //error comes here

            System.out.println("close" +CloseSSPComPort());

        }
    }

 i have incuded the dll in project folder and also paste in system32 folder in window directory. i struct on this error please help if any one works on this 
```

# jquery - 删除所有内联样式，但删除一种特定样式

> ID：14458572
> 
> 赞同：0
> 
> 时间：2013-01-22T12:28:05.230
> 
> 标签：jquery, styles, attr

我看过诸如*删除所有内联样式*并*删除除一个之外的所有类*之类的帖子，但我正在寻找其他东西。

假设我的元素有这样的内联样式：

```
<div id="element" style="display: none; left: 7px; overflow: hidden; height: 159px; padding-top: 0px; margin-top: -2px; padding-bottom: 0px; margin-bottom: 0px;"></div> 
```

我将如何删除所有设置的样式，但特定的样式？

我不能用`.removeAttr("style")`也不能用`.attr("style", "")`。我能做的是获得我想要的值，提取它，删除所有样式并再次添加样式：

```
var el = $("element"),
    elL = el.css("left");

el.removeAttr("style").css("left", elL); 
```

但这会导致一些闪烁。我想要一个干净、直接的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:32:51.340

取而代之的是，您可以覆盖要删除的 css 样式....！和

$.css();

# c# - Winforms SagePay 集成

> ID：14458575
> 
> 赞同：1
> 
> 时间：2013-01-22T12:28:16.267
> 
> 标签：c#, .net, vb.net, winforms

> **可能重复：**
> [来自 Windows 窗体的 SagePay 集成](https://stackoverflow.com/questions/2364050/sagepay-integration-from-windows-forms)

参考[来自 Windows Forms 的 SagePay 集成，](https://stackoverflow.com/questions/2364050/sagepay-integration-from-windows-forms/14457519#14457519)有人设法将 SagePay 集成到 winforms 应用程序。如果是这样，您能否就您采取的方法提出一些建议？

# android - Jelly Bean Android 上的通知

> ID：14458583
> 
> 赞同：0
> 
> 时间：2013-01-22T12:28:33.947
> 
> 标签：android

> **可能重复：**
> [Android 4.1：如何检查应用程序是否禁用通知？](https://stackoverflow.com/questions/11649151/android-4-1-how-to-check-notifications-are-disabled-for-the-application)

Jelly Bean 的一项新更新是用户可以在应用程序列表中取消应用程序的通知。

一旦用户这样做，应用程序就不能在通知栏上显示更多通知。

我正在构建一个应用程序，其中显示通知非常重要，并且我希望我的应用程序以任何方式知道用户是否更改了该状态。因为我想在用户进入应用程序时显示一条消息，告诉他将其重新设置为“开启”

有谁知道怎么做？？？？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:40:19.323

目前还没有 API 可以做到这一点。谷歌在此处请求该功能时存在一个问题：

[http://code.google.com/p/android/issues/detail?id=38482&q=show%20notifications&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=38482&q=show%20notifications&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

状态是“已分配”，所以它可能正在开发中，但优先级是“中等”，所以我不会屏住呼吸。

# ajax - jQuery mobile，需要重新加载登录页面才能使 ajax 正常工作

> ID：14458585
> 
> 赞同：0
> 
> 时间：2013-01-22T12:28:40.170
> 
> 标签：ajax, forms, url, jquery-mobile, login

我有一个简单的“登录”表单，并且 ajax 正在工作。但是每次我在新选项卡中重新加载页面，并且“登录”页面加载时，我输入用户名和密码，按“登录”按钮，由于某种原因页面只是重新加载，但是当我按下“登录”时在重新加载的页面上按钮，ajax 工作得很好。有谁知道这是什么意思？

这是简单的登录表单：

```
 <form id="login_form" name="login_form" data-ajax="false">
            <label for="basic">Username:</label>
            <input type="text" name="usr" id="usr" value=""/>
            <label for="basic">Password:</label>
            <input type="password" name="psw" id="psw" value=""/>
            <input type="submit" value="Login" id="login" name="login"/>
            <label><input type="checkbox" name="remember_me" id="remember_me" value="checked_remember"/>Remember me!</label>
        </form>
        <div id="login_message"></div> 
```

这是我的 ajax 脚本：

```
$(document).ready(function(){
$("#login").click(function(){

username=$("#usr").val();
password=$("#psw").val();
$.ajax({
type: "POST",
url: "http://imes.jzpersonal.com/php/login_check.php",
data: "name="+username+"&pwd="+password,
success: function(html){
if(html=='true')
{
 $("#login_message").html("Logged in, congratulation.");
}
else
{
 $("#login_message").html("Wrong username or password");
}
},
beforeSend:function()
{
$("#login_message").html("Loading...")
}
});
return false; 
```

}); });

我也在使用 POST 方法，但我仍然在地址栏中获得地址，如下所示：

```
http://imes.**********.com/login_page.php?usr=Jakub&psw=********&login=Login 
```

这是一个 jQueryMobile 的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:36:43.320

这样做的原因是您不能将**$(document).ready(function(){**与 jQuery Mobile 一起使用。您应该使用：

```
$(document).on('pageinit'){

}); 
```

或者如果你的页面有一个 id 然后像这样使用它：

```
$('#page_id').on('pageinit'){

}); 
```

关于这个问题的更多信息可以在这里找到：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

阅读本文以了解有关此事件和 jQM 页面事件的更多信息：[https ://stackoverflow.com/a/14010308/1848600](https://stackoverflow.com/a/14010308/1848600)

# c# - 解析用户输入，包括 tz 数据库时区名称

> ID：14458586
> 
> 赞同：1
> 
> 时间：2013-01-22T12:28:46.457
> 
> 标签：c#, timezone, nodatime

我正在尝试使用 Noda Time 解析用户输入。

输入：

*   日期形式为`YYYY-MM-DD`
*   小时
*   分钟
*   tz 数据库时区名称（从 Google 的时区 API 返回）

我需要将此数据转换为 UTC 和其他时区，同样基于 tz 数据库时区名称。

目前我正在尝试理解`LocalDateTime`和`ZonedDateTime`差异，但也许有人能够在我（希望）弄清楚之前展示如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:23:07.127

[http://msmvps.com/blogs/jon_skeet/archive/2012/02.aspx](http://msmvps.com/blogs/jon_skeet/archive/2012/02.aspx)有很好的信息，虽然有点过时，但很容易在官方文档中找到相关的方法名称。

下面是一些演示代码。

```
string date = "2013-01-22";
string hour = "13";
string minute = "15";

var result = LocalDateTimePattern.ExtendedIsoPattern.Parse(date + "T" + hour + ":" + minute + ":00");

if (result.Success == true)
{
    DateTimeZone source_zone = DateTimeZoneProviders.Tzdb.GetZoneOrNull("Europe/Brussels");
    DateTimeZone target_zone = DateTimeZoneProviders.Tzdb.GetZoneOrNull("Australia/Melbourne");

    if (source_zone != null && target_zone != null)
    {
        ZonedDateTime source_zoned_dt = result.Value.InZoneStrictly(source_zone);

        Console.WriteLine(source_zoned_dt.ToInstant());
        Console.WriteLine(source_zoned_dt);
        Console.WriteLine(source_zoned_dt.WithZone(target_zone));
    }
    else
    {
        Console.WriteLine("time zone not found");
    }
}
else
{
    Console.WriteLine("parsing failed");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:00:21.603

您的答案与我所做的非常接近 - 但如果您在单独的字符串中包含日期、小时和分钟，我会使用：

```
var zoneProvider = DateTimeZoneProviders.Tzdb;
var sourceZone = zoneProvider.GetZoneOrNull("Europe/Brussels");
var targetZone = zoneProvider.GetZoneOrNull("Australia/Melbourne");

if (sourceZone == null || targetZone == null)
{
    Console.WriteLine("Time zone not found");
    return;
}

var dateParseResult = LocalDatePattern.IsoPattern.Parse(date);
int hourValue, minuteValue;
if (!dateParseResult.Success ||
    !int.TryParse(hour, out hourValue) ||
    !int.TryParse(minute, out minuteValue))
{
    Console.WriteLine("Parsing failed");
    return;       
}

var localDateTime = dateParseResult.Value + new LocalTime(hour, minute);
var zonedDateTime = localDateTime.InZoneStrictly(sourceZone);
Console.WriteLine(zonedDateTime.ToInstant());
Console.WriteLine(zonedDateTime);
Console.WriteLine(zonedDateTime.WithZone(targetZone)); 
```

这里唯一显着的区别是解析——我不会把所有的位都粘在一起；我只是分别解析字符串。（我也更喜欢失败的“早期出局”:)

你应该注意`InZoneStrictly`虽然 - 如果输入的本地日期/时间不明确，你肯定要失败吗？

# iphone - 二维码扫描问题 zxing iOS 6.0.2

> ID：14458588
> 
> 赞同：1
> 
> 时间：2013-01-22T12:28:51.727
> 
> 标签：iphone, objective-c, ios6, qr-code, iphone-5

我正在开发一个应用程序，我们需要在其中扫描 iPhone 的 QR 码。我正在使用 zxing API。应用程序在 iOS 6.0.1 上运行良好，但在最新版本的 iOS 6.0.2 上运行不正常。

我正在将扫描的 QR 码发送到给我此响应的服务器。例如，如果二维码是 00012123456789000134，iOS 6.0.1 版本给出的结果是 00012123456789000134，而 iOS 6.0.2 给出的结果是 2100012123456789000134\u001D0111223344556677。我不知道是什么问题。是因为 iOS 6.0.2 中的修复吗？？？？请帮帮我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:44:16.127

您是否尝试过使用ZXing自己的扫描应用从应用商店进行扫描，您需要先检查一下，以确保问题不是SDK或您正在扫描的二维码。

如果它与您的代码相关，请查看您如何处理结果字符串并将其移至输出。它可以是任何一些东西，僵尸，不兼容的类型以及在它们之间移动，但主要是逻辑错误。如果您可以发布您的代码，那么可能会有更多的人能够帮助您。同样，最终有帮助的总是很多 printfs。

# xcode - IKImageView 属性未在 Interface Builder 中设置

> ID：14458591
> 
> 赞同：1
> 
> 时间：2013-01-22T12:29:04.690
> 
> 标签：xcode, macos, cocoa, interface-builder, ikimageview

我在 Interface Builder 中有一个 IKImageView 并将背景颜色设置为红色，但是在运行应用程序时它不起作用，它只是保持灰色。

1.  我使用 Cocoa Application 模板在 Xcode 4.5 中创建了一个全新的 Cocoa (OS X) 项目。
2.  添加了 Quartz 框架
3.  将对象库中的 IKIMageView 拖到我的窗口上。
4.  将颜色更改为红色。

![截屏](../Images/11aa5cde864795bf498a3eb93fad17ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-15T12:26:21.250

我通过这个设置背景颜色：

```
_imageView.backgroundColor = [NSColor redColor]; 
```

其中`_imageView`设置为`IBOutlet IKImageView * _imageView;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T06:51:07.343

中有一个错误`IKImageView`。

更好的解决方法：使用`setImageWithURL:`nil 作为参数，并且将构造 CALayers 也不要将任何自定义方法命名`IKImageView`为`-(void)commonInit`

# php - 使用php从xml中的mysql导出数据

> ID：14458603
> 
> 赞同：4
> 
> 时间：2013-01-22T12:29:30.140
> 
> 标签：php, mysql, xml

我正在尝试使用 php 将 mysql db 中的数据导出为特定的 xml 格式。

我创造了这样的。

如果我这样做，我会在 xml 中得到正确的 $string 输出。

```
<?php
$string = <<<_XML_
<videos>
<updated>2010-07-20T00:00:00Z</updated>
<video>
  <id>id</id>
  <title>title</title>
  <description>description</description>
  <tags>Comma,Separated,Keywords,Go,Here</tags>
  <paysite>Name Of site</paysite>
  <clip_url>http://www.domain.com/path/to/videos/</clip_url>
  <screen_url>http://www.domain.com/path/to/thumbnails/</screen_url>
  <clips>
  <clip>
  <duration>20</duration>
  <width>640</width>
  <height>480</height>
  <flv>marta_123.flv</flv>
  <screens>
  <screen>marta.jpg</screen>
  </screens>
  </clip>
  <clip>
  <duration>20</duration>
  <width>640</width>
  <height>480</height>
  <flv>jenna_123.flv</flv>
  <screens>
  <screen>jenna.jpg</screen>
  </screens>
  </clip>
  <clip>
  <duration>123</duration>
  <width>640</width>
  <height>480</height>
  <flv>kathy_123.flv</flv>
  <screens>
  <screen>kathy.jpg</screen>
  </screens>
  </clip>
  </clips>
 </video>
</videos>
_XML_;

$xml = new SimpleXMLElement($string);

Header('Content-type: text/xml');
echo $xml->asXML();
?> 
```

但是如果我尝试从 db 中提取值并将其放入相同的层次结构中，它不会在 xml 中输出数据。像这样

```
 <?php
     $dbh=mysql_connect($localhost, $username, $password) or die ('I cannot connect to the database because: ' . mysql_error());
     $result = mysql_query("SELECT * FROM 12345_flv.flv WHERE enabled = '1' ORDER BY id DESC") or die('Could not connect: ' . mysql_error());  

    $string = '<<<_XML_<videos><updated>2010-07-20T00:00:00Z</updated><video>';
    while ($row = mysql_fetch_array($result)) { 
    $id=$row['id'];
    $title=$row['title'];
    $string .='<id>'.$id.'</id>';
    $string .='<title>'.$title.'</title>';
    }
    $string .='</video></videos>_XML_'; 
    $xml = new SimpleXMLElement($string);
    Header('Content-type: text/xml');
echo $xml->asXML();
?> 
```

它的输出在页面源中显示 <<< *XML 。*

我做错了什么。我想要的只是使用 php 将数据从 mysql 导出到 xml。

谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:25:48.753

试试这个代码：

```
<?php
$dbh=mysql_connect($localhost, $username, $password) or die ('I cannot connect to the database because: ' . mysql_error());
$result = mysql_query("SELECT * FROM 12345_flv.flv WHERE enabled = '1' ORDER BY id DESC") or die('Could not connect: ' . mysql_error());  

$string = '<videos><updated>2010-07-20T00:00:00Z</updated><video>';

while ($row = mysql_fetch_array($result)) { 
    $id=$row['id'];
    $title=$row['title'];
    $string .='<id>'.$id.'</id>';
    $string .='<title>'.$title.'</title>';
}
$string .='</video></videos>'; 
$xml = new SimpleXMLElement($string);
Header('Content-type: text/xml');
echo $xml->asXML();
?> 
```

# iphone - iPhone 4 从应用程序内部拨号问题

> ID：14458608
> 
> 赞同：1
> 
> 时间：2013-01-22T12:29:42.667
> 
> 标签：iphone, iphone-4, dialing

App Store 中发布了一个 iOS 5.0+ 应用程序，该应用程序显示员工个人资料及其电话号码。该应用程序的用户可以点击电话号码，该号码将在他们的 iPhone 上拨打。

问题是一些使用**iPhone 4**的用户报告说它不拨号。

这是我用来拨号的代码：

```
NSString *cleanedString = [[self.member.phone componentsSeparatedByCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] invertedSet]] componentsJoinedByString:@""];
NSString *escapedPhoneNumber = [cleanedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *urlText = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", escapedPhoneNumber]];
[[UIApplication sharedApplication] openURL:urlText]; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:33:08.800

`/`计划中不应该有任何`tel:`：

```
NSURL *urlText = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", escapedPhoneNumber]]; 
```

在[Apple URL Scheme Reference](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)中，您可以看到该`tel:`方案中允许的一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:36:52.630

如果您使用**telpromt**而不是**tel**这将在您的通话结束后返回您的应用程序|

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt:1234567890"]]; 
```

# java - java在命令行上显示更改进度

> ID：14458609
> 
> 赞同：5
> 
> 时间：2013-01-22T12:29:42.317
> 
> 标签：java, command-line, output

我编写了一个从文件加载数据的 Java 程序，并通过在每 n 条记录后在屏幕上打印一条消息来在命令行上显示加载进度，如下所示：

> $> 处理了 100 条记录。
> 
> $> 处理了 200 条记录。
> 
> $> 处理了 300 条记录。
> 
> $> 处理了 400 条记录。
> 
> $> 处理了 500 条记录。
> 
> ...

但是，我想只打印一行，并且只更新数字，即，这样输出总是看起来像这样：

> $> 处理了 < n > 条记录。

如何在 Java 中做到这一点，甚至有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:38:09.437

这取决于您的控制台，但最简单的方法是使用退格字符将光标向后移动，在最近打印的字符前面：

```
int[] step = {100,200,300,400,500};
System.out.print("$> processed < ");
for (int i : step) {
   System.out.print(i + " > records.\b\b\b\b\b\b\b\b\b\b\b\b\b\b");
   Thread.sleep(500);
} 
```

这适用于 windows 命令行，但例如它不适用于 Eclipse 控制台。

您应该添加一些额外的逻辑来计算打印的字符数，而不是对所有这些“\b”字符进行硬编码，而是根据最近的输出计算正确的数字。

正如@Reza 建议的那样，使用 "\r" 更容易：

```
int[] step = {100,200,300,400,500};
for (int i : step) {
   System.out.print("$> processed < " + i + " > records.\r");
   Thread.sleep(500);
} 
```

它在 Eclipse 控制台上仍然不起作用（但比退格方法更具可读性），但避免了对所有退格字符的处理。如果打印比以前更短的行，可能需要打印一些额外的空格来清除尾随字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:41:44.137

您需要找到一种方法来返回到行首并覆盖控制台上已经输出的内容。这个问题已经在这里解决了：

[如何在控制台中返回到行首？](https://stackoverflow.com/questions/301759/java-console-pretty-printing-returning-to-the-start-of-a-line)

# php - 阅读并结合一系列 html 文档与 php

> ID：14458616
> 
> 赞同：0
> 
> 时间：2013-01-22T12:29:59.003
> 
> 标签：php, html

我有一系列要使用 php 组合的 html 文档。我需要加载 html 文档的内容并将它们全部显示在一个文档中。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:44:07.563

忘记`require`, `require_once`and `include_once`，只使用`include`哪个是性能最高的功能。

`include_once`并`require_once`在那里防止循环依赖，当然不是HTML；并且`require`会抛出一个致命错误而不是一个`E_WARNING`但会花费更多时间。

您还可以通过以下方式获取缓冲区中的内容：

```
$buffer = file_get_contents('index.html'); 
```

并决定何时自己回应。或者您最终可以使用`ob_*`函数来获取缓冲区：

```
ob_start():
include('index.html');
$buffer = ob_get_contents(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:37:15.350

使用 include、include_once、require、require_once 并将文件添加到主文档

参考： http: [//php.net/manual/en/function.require-once.php](http://php.net/manual/en/function.require-once.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T12:40:16.730

```
<?php

$files = array('file1.html','file2.html','file3.html');
foreach($files as $file) require_once $file; 
```

或者`require`如果您想多次包含同一个文件，请使用。

# c# - 对收款操作一次，对费用进行加权平均

> ID：14458621
> 
> 赞同：1
> 
> 时间：2013-01-22T12:30:16.763
> 
> 标签：c#, linq, c#-4.0, c#-3.0

```
return new SchoolFees(
        new Percentage(schoolFeesResult.Sum(x => (x.Amount.Value / totalFees) * x.TuitionFee.Value)),
        new Percentage(schoolFeesResult.Sum(x => (x.Amount.Value / totalFees) * x.TravellingFee.Value)),
        new Percentage(schoolFeesResult.Sum(x => (x.Amount.Value / totalFees) * x.ResidentialFee.Value))); 
```

有没有一种方法可以让我操作`schoolFeesResult`一次来计算每种不同类型费用的加权平均值（`Tuition`, `Travelling`, `Residence`）。基本上我不想`(x.Amount.Value / totalFees)`在我的代码中出现 3 次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:44:01.137

你可以使用这样的东西：

```
var fees = from fee in schoolFeesResult
           let weight = fee.Amount.Value / totalFees
           select new 
           {
               TuitionFee = weight * fee.TuitionFee.Value,
               TravellingFee = weight * fee.TravellingFee.Value,
               ResidentialFee = weight * fee.ResidentialFee.Value
           };

// if the calculation of the fees is a performance bottleneck,
// uncomment the next line:
// fees = fees.ToList();

return new SchoolFees(
    new Percentage(fees.Sum(x => x.TuitionFee),
    new Percentage(fees.Sum(x => x.TravellingFee),
    new Percentage(fees.Sum(x => x.ResidentialFee)); 
```

你可以走得更远：

```
var fees = (from fee in schoolFeesResult
            let weight = fee.Amount.Value / totalFees
            group fee by 1 into g
            select new 
            {
                TuitionFee = g.Sum(x => weight * x.TuitionFee.Value),
                TravellingFee = g.Sum(x => weight * x.TravellingFee.Value),
                ResidentialFee = g.Sum(x => weight * x.ResidentialFee.Value)
            }).Single();

return new SchoolFees(
    new Percentage(fees.TuitionFee,
    new Percentage(fees.TravellingFee,
    new Percentage(fees.ResidentialFee); 
```

但我怀疑第二个版本是个好主意。它使代码难以理解。我纯粹出于学术原因添加它，以展示什么是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:16:17.303

只是另一个脑残的解决方案

```
Func<Func<Fee, decimal>, decimal> totalFee = feeSelector =>
   schoolFeesResult.Sum(x => x.Amount.Value / totalFees * feeSelector(x));

return new SchoolFees(
   new Percentage(totalFee(f => f.TuitionFee.Value)),
   new Percentage(totalFee(f => f.TravellingFee.Value)),
   new Percentage(totalFee(f => f.ResidentialFee.Value))
); 
```

甚至更短：

```
Func<Func<Fee, decimal>, Percentage> percentageOf = feeSelector =>
   new Percentage(schoolFeesResult.Sum(x => 
         x.Amount.Value / totalFees * feeSelector(x)));

return new SchoolFees(
   percentageOf(f => f.TuitionFee.Value),
   percentageOf(f => f.TravellingFee.Value),
   percentageOf(f => f.ResidentialFee.Value)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:35:01.753

我将此实现`WeightedAverage`用作扩展方法`IEnumerable<T>`：

```
public static double? WeightedAverage<TSource>(this IEnumerable<TSource> source
                                                       , Func<TSource, float> weightField
                                                       , Func<TSource, double> propertyToWeight)
{
    var total = source.Sum(weightField);

    var sum = source.Select(item => weightField(item) * propertyToWeight(item)).Sum();
    return sum / total;

} 
```

`single`当然，`single?`有一些重载需要处理`double`。也许你可以调整它以适应你想要实现的目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T12:37:52.573

我假设你可以把它放在另一个查询中，恕我直言，它也更可红色：

```
var percentages = schoolFeesResult
    .Select(x => new { SFR = x, AmoundDivFees = (x.Amount.Value / totalFees)})
    .Select(x => new { 
        TuitionFee = x.AmoundDivFees * x.SFR.TuitionFee.Value,
        TravellingFee = x.AmoundDivFees * x.SFR.TravellingFee.Value,
        ResidentialFee = x.AmoundDivFees * x.SFR.ResidentialFee.Value
    });
return new SchoolFees(
    new Percentage(percentages.Sum(x => x.TuitionFee)),
    new Percentage(percentages.Sum(x => x.TravellingFee)),
    new Percentage(percentages.Sum(x => x.ResidentialFee))); 
```

我当然无法测试它。

# java - 声纳在 sonar.api.resources 中找不到依赖项

> ID：14458626
> 
> 赞同：0
> 
> 时间：2013-01-22T12:30:30.267
> 
> 标签：java, dependencies, sonarqube, sonar-runner

我正在尝试使用声纳运行器对我的项目运行静态分析，但出现以下错误：

```
Exception in thread "main" org.sonar.runner.RunnerException: org.picocontainer.i
njectors.AbstractInjector$UnsatisfiableDependenciesException: org.sonar.api.reso
urces.Languages has unsatisfied dependency 'class [Lorg.sonar.api.resources.Lang
uage;' for constructor 'public org.sonar.api.resources.Languages(org.sonar.api.r
esources.Language[])' from org.picocontainer.DefaultPicoContainer@15c13ef:34<[Im
mutable]:org.picocontainer.DefaultPicoContainer@1865b28:206<[Immutable]:org.pico
container.DefaultPicoContainer@8d5a91:18<|
......
...
. 
```

我的声纳项目.properties：

```
# required metadata
sonar.projectKey=smstomb:myProject
sonar.projectName=My Project
sonar.projectVersion=1.0

# optional description
sonar.projectDescription=This is my project

# path to source directories (required)
sonar.sources=src/main

# path to test source directories (optional)
sonar.tests=src/test

sonar.libraries=lib/*.jar

sonar.language=java

sonar.sourceEncoding=UTF-8 
```

这是全新安装，我没有在声纳服务器上下载任何其他插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:19:51.067

您收到的消息倾向于说您的 Sonar 安装已损坏：未安装语言插件，而 Sonar 分发版（= ZIP 文件）默认随附 Java 生态系统。（您可以查看“/extensions/plugin”文件夹并检查您是否安装了 Java 插件）

为简单起见，最好再次进行全新安装。

# android - ClassCastException：无法强制转换 android.os.BinderProxy

> ID：14458627
> 
> 赞同：6
> 
> 时间：2013-01-22T12:30:36.060
> 
> 标签：android, exception

我得到这个 ClassCaseException -

```
/ActivityManager(213): Bad activity token: android.os.BinderProxy@420b43f0
W/ActivityManager(213): java.lang.ClassCastException: android.os.BinderProxy cannot be cast to 
com.android.server.am.ActivityRecord$TokenW/ActivityManager(213): at 
com.android.server.am.ActivityRecord.forToken(ActivityRecord.java:295)
W/ActivityManager(213): at com.android.server.am.ActivityManagerService.configureSoftkeysActivity(ActivityManagerService.java:15095)
W/ActivityManager(213): at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:1572)W/ActivityManager(213):     at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1646)
W/ActivityManager(213): at android.os.Binder.execTransact(Binder.java:338)
W/ActivityManager(213): at dalvik.system.NativeStart.run(Native Method) 
```

有没有人知道为什么我会得到这个例外。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-21T12:51:52.857

我知道它很旧，但我想我会回答，因为我自己刚刚解决了这个问题。这（对我来说）是由于`android:process`在我`Service`的应用程序清单声明中。简单地删除它立即解决了我的问题。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T07:33:03.767

如果要绑定的服务与调用者处于不同的进程中，则应使用 AIDL 接口。

# javascript - 如何将 Facelets 页面作为 javascript 文件包含到 Facelets 页面中

> ID：14458636
> 
> 赞同：0
> 
> 时间：2013-01-22T12:31:24.563
> 
> 标签：javascript, jsf-2, facelets

我创建带有消息的简单页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
<f:view locale="#{languageController.locale}"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head>
    </h:head>
    <h:body>
        <script type="text/javascript">
            var message = '#{msg.validation_message}';
            var notValidMessage = '#{msg.not_submit_message}';
            var notValidCurrentFormMessage = '#{msg.partial_valid}';
            var hap = 'happiness';
        </script>
    </h:body>
</f:view>
</html> 
```

我有一个用于验证表单的 JS 文件：

```
function validateForm(formId, elementIds, lang) {
    var valid = validateFields(formId, elementIds, lang);
    if (valid) {        
        return true;
    } else {
        alert(message);
        return false;
    }
} 
```

在 Facelets 页面上，我将 Facelets 文件包含为 JS 文件：

```
<h:outputScript library="js" name="errorNames.xhtml"/>
<h:outputScript library="js" name="validation.js"/> 
```

但似乎该页面`errorNames.xhtml`未正确包含。

我怎样才能解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:49:54.060

这种构造绝对无效。`<h:outputScript>`必须指向物理上有效的 JS 文件。

您最好的选择是使用`<ui:include>`内联包含它。

所以，一个`/WEB-INF/includes/script.xhtml`（不，没有 XML 序言，没有 doctype，没有 html/head/body 和 f:view 必须进入主模板；下面的代码是完整的原样）：

```
<ui:composition
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <h:outputScript>
        var message = '#{msg.validation_message}';
        var notValidMessage = '#{msg.not_submit_message}';
        var notValidCurrentFormMessage = '#{msg.partial_valid}';
        var hap = 'happiness';
    </h:outputScript>
</ui:composition> 
```

*（请注意，只要其中一个变量在 JS 中包含特殊字符（例如单引号、换行符等），这很容易出错，如有必要，请使用[OmniFaces](http://omnifaces.org) [`#{of:escapeJS()}`](http://omnifaces.org/docs/vdldoc/current/of/escapeJS.fn.html)来转义 JS）*

并在`/some.xhtml`：

```
<ui:include src="/WEB-INF/includes/script.xhtml" />
<h:outputScript library="js" name="validation.js" /> 
```

* * *

**与具体问题无关**，您使用资源`library`的方式并不完全正确。仔细阅读[JSF 资源库是干什么用的，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

# html - 韩语句子被随机拆分

> ID：14458638
> 
> 赞同：2
> 
> 时间：2013-01-22T12:31:34.813
> 
> 标签：html, css, unicode

我在这里遇到了一个问题：我有一个韩文十进制 Unicode 文本，文本显示在 4 列和多行中（因为它是语言测试的答案）。问题在于，因为每个答案的宽度都是 20%，所以当它不适合时，句子会在单词中间随机拆分，而不是在单词之间的空格中。我不知道如何处理这个问题，因为这个文本是从数据库中自动加载和显示的。

4 列中每一列的 HTML 代码如下所示：

```
<table class="courses" border="0" cellpadding="2" cellspacing="2" width="100%" style="font-size:13px;">
  <tbody>
    <td width="20%">
     <p align="center">
       <input name="a[X]" value=1" type="radio">
       <br>
       <?php echo "&#48148;&#49240;&#47732; &#44032;&#51648; &#47560;&#49464;&#50836;" ?> // this comes from a DB, its the unicodes of the korean characters<br>
    </p>
   </td>
</tbody>
</table> 
```

我能做些什么来解决这个问题，当它不合适时，避免随机分裂，但在句子结束时这样做？如果您注意到 Unicode 代码，您可以看出 ;면 가 之间有一个空格，但它会在任何地方中断，所有文本都一样。

（请注意，没有任何编码问题，韩语字符显示正确。其他语言如瑞典语或西班牙语不会发生这种情况）。

**编辑**

这是一个[工作示例](http://jsfiddle.net/ZkNsa/)。

请注意，在示例中，第一个答案在最后两个字符中拆分，当该单词有五个字符时，因此应该在前拆分 3 个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:47:34.607

鉴于网络标准的当前状态，CJK（中文/日文/韩文）文本的换行可能会产生很大的问题。

以与语言无关的方式，您无能为力。CSS 级别 3 定义了[相关属性](http://www.w3.org/TR/css3-text/#line-breaking)(`line-break`和`word-break`)，但我不太确定现代浏览器的支持级别是什么（显然不太现代的浏览器完全不适用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:23:09.047

这并不重要，因为韩语无论如何都可以在任何地方分裂。请参阅 Chosun.com 的此屏幕截图：

![在此处输入图像描述](../Images/7f1c88f08330a4194aff90e3450569a6.png)

这些词在任何地方被剪切，似乎是随机的。您无需担心断字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:36:52.553

听起来您只是遇到了`white-space`. 您可以查看 CSS[`white-space`](https://developer.mozilla.org/en-US/docs/CSS/white-space)属性并尝试类似`pre`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-29T10:09:56.300

我面临同样的问题，我认为最好的解决方案是用`white-space: nowrap;`. 这样可以确保单词内部没有任何换行符。

有关概念证明，请参阅此 JSFiddle：http: [//jsfiddle.net/we7jx08r/](http://jsfiddle.net/we7jx08r/)。当您更改正文的宽度时，您会注意到换行符始终是正确的。

有关浏览器支持（IE5.5+、FF1+、Safari 1+），请参见[http://css-tricks.com/almanac/properties/w/whitespace/ 。](http://css-tricks.com/almanac/properties/w/whitespace/)`white-space: nowrap`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-12T16:22:25.183

您可以尝试我不久前研究的解决方案：[https ://stackoverflow.com/a/46714474/2114953](https://stackoverflow.com/a/46714474/2114953)

也就是说，如果您喜欢使用 JS 将每个单词包装成 span HTML 元素，然后使用 CSS display: inline-block 强制单词在需要时换行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-15T15:30:47.360

我一直在为我正在做的一个项目寻找这个。我认为[https://www.w3.org/TR/css-text-3/#line-break](https://www.w3.org/TR/css-text-3/#line-breaking)涵盖了这一点，尤其是“示例 5”：

> 再举一个例子，韩语有两种换行方式：在任意两个韩语音节之间（分词：正常），或者像英语一样，主要在空格处（分词：keep-all）。

事实上，谷歌浏览器（版本 61）的默认行为是它在音节上中断（我假设我不会说或读韩语）

设置 word-break: all 似乎会覆盖此行为并将换行符仅放在空格上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-13T18:38:43.467

`word-break: keep-all;`为我修好了。如果用户专门查看韩语网站，我添加了这个。

`word-break: keep-all;`-> “中文/日文/韩文 (CJK) 文本不应使用分词符。非 CJK 文本行为与值“正常”相同”（[https://www.w3schools.com/cssref/css3_pr_word-break .asp](https://www.w3schools.com/cssref/css3_pr_word-break.asp) )

# css - 如果是chrome，则导入css文件

> ID：14458641
> 
> 赞同：-1
> 
> 时间：2013-01-22T12:31:47.097
> 
> 标签：css, google-chrome, conditional

如何为 Chrome（或 webkit）导入 css 文件。

我想为ie6做这样的事情：

```
<!--[if lte IE 6]>
  <link rel="stylesheet" type="text/css" href="ie6.css" />
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:52:37.293

您最好和最简单的选择是使用可以检测用户浏览器的服务器端语言。PHP、ColdFusion、JSP 等具有内置函数和变量，可以帮助您确定用户拥有的浏览器。

如果没有，那么客户端脚本代理是您的下一个选择。JavaScript 及其高效的库选项 jQuery 是很好的方法。

```
 //jQuery
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script>
        if ($.browser.webkit) {
            ///Chrome-specific css here.
        }
       </script> 
```

如果您不能（或不知道如何）使用该库，那么以下方法也可以，但您需要进行更多条件检查

```
//Javascript (Note: Chrome will say 'Netscape' for its name)
    <script>
    var browserName = window.navigator.appName;
    var browserVersion = window.navigator.appVersion;
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:00:10.483

如果您只想更改代码行而不是加载完整的 css 文件，您可以使用： [http ://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)

# c# - DateTime.ParseExact - 英国日期和时间

> ID：14458646
> 
> 赞同：6
> 
> 时间：2013-01-22T12:32:08.017
> 
> 标签：c#, datetime

我正在尝试解析以下英国格式`DateTime`字符串：`24/01/2013 22:00`

但是，我不断收到此错误：

> 字符串未被识别为有效的日期时间。

`CultureInfo.CurrentCulture`返回`en-GB`正确的“”

这是我的代码

```
 [TestMethod]
    public void TestDateTimeParse()
    {
        DateTime tester = DateTime.ParseExact("24/01/2013 22:00", "d/M/yyyy hh:mm", CultureInfo.CurrentCulture);

        int hours = tester.Hour;
        int minutes = tester.Minute;

        Assert.IsTrue(true);
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T12:37:04.907

`hh`是 12 小时制。你应该`HH`改用。

```
DateTime.ParseExact("24/01/2013 22:00", 
                    "d/M/yyyy HH:mm", // <-- here
                    CultureInfo.CurrentCulture) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T12:37:50.073

`"hh"`表示*小时，使用从 01 到 12 的 12 小时制*

`"HH"`表示*小时，使用从 00 到 23 的 24 小时制*

试试这样；

```
public static void Main(string[] args)
{
    DateTime tester = DateTime.ParseExact("24/01/2013 22:00", "dd/MM/yyyy HH:mm", CultureInfo.InvariantCulture);
} 
```

这是一个[`DEMO`](http://ideone.com/3KIIza).

您也可以[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)从 MSDN 查看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:34:22.793

你的格式不对，试试这个：

```
DateTime tester = DateTime.ParseExact("24/01/2013 22:00", "dd/MM/yyyy HH:mm", CultureInfo.CurrentCulture); 
```

# button - 如何使 Tcl/Tk 按钮表现得像单选按钮？

> ID：14458648
> 
> 赞同：0
> 
> 时间：2013-01-22T12:32:13.153
> 
> 标签：button, radio-button, tcl, tk

**根据 ActiveTcl 8.5 文档：**
ttk::radiobutton 小部件在组中用于显示或更改一组互斥选项。单选按钮链接到一个 Tcl 变量，并有一个关联的值；单击单选按钮时，它将变量设置为其关联的值。
**还有一个更一般的定义：**
您使用单选按钮进行互斥设置。单击一个会导致任何其他已按下的弹出，就像在旧汽车收音机上一样。

我真的更喜欢使用按钮的外观而不是单选按钮。如何在一组按钮中实现单选按钮的相同行为？
我在[http://wiki.tcl.tk/17899](http://wiki.tcl.tk/17899)上找到了关于切换按钮的信息，但这些行为更像是检查按钮。

任何见解真的很受欢迎。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:50:51.060

将单选按钮的[-indicatoron](http://tcl.tk/man/tcl8.6/TkCmd/radiobutton.htm#M8)属性设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:28:30.620

您可以设置按钮`relief`以保持其凹陷。

```
set colours {red blue green}
foreach c $colours {
    pack [button .$c -text $c -command [list pushed $c]]
}

proc pushed colour {
    puts $colour
    set label [.$colour cget -text]
    foreach c $::colours {
        .$c configure -relief [expr {$c eq $label ? "sunken" : "raised"}]
    }
} 
```

# mysql - Sql 语句：如何获得最高评分和每个位置的产品？

> ID：14458649
> 
> 赞同：1
> 
> 时间：2013-01-22T12:32:14.937
> 
> 标签：mysql, sql, database, greatest-n-per-group

如何获得每个位置的最高评分和产品？这更多的是sql语句。谁能帮忙找出错误在哪里？它没有检索到我想要的值。

*使用Mysql数据库

这是我的sql语句：

```
SELECT r.rating,
       r.product,
       l.places,
       l.address,
       l.telephone,
       l.lng,
       l.lat
FROM   locations AS l
       LEFT JOIN ratings AS r
         ON l.places = r.places
ORDER  BY r.rating DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:37:52.147

由于您没有提到您正在使用的数据库服务器，因此下面的查询将适用于几乎所有 RDBMS，包括`MySQL`

```
SELECT  r.rating, 
        r.product, 
        l.places, 
        l.address, 
        l.telephone, 
        l.lng, 
        l.lat 
FROM    locations AS l 
        INNER JOIN ratings AS r 
            ON l.places = r.places 
        (
            SELECT  a.places, b.product, MAX(b.rating) max_rating
            FROM    locations a
                    INNER JOIN ratings b
                        ON a.places = b.places 
            GROUP   BY a.places, b.product
        ) c ON l.places = c.places AND
                r.product = c.product AND
                r.rating = c.max_Rating
ORDER   BY r.rating desc 
```

 ~~或者，如果您的 RDBMS 支持*窗口函数*，

```
SELECT  rating, product,  places, 
        address,  telephone,  lng,  lat
FROM
    (
        SELECT  r.rating, r.product,  l.places, 
                l.address,  l.telephone,  l.lng,  l.lat 
                ROW_NUMBER() OVER (PARTITION BY r.product,  l.places
                                    ORDER BY r.rating DESC) rn
        FROM    locations AS l 
                INNER JOIN ratings AS r 
                    ON l.places = r.places 
    )   x
WHERE   x.rn = 1    
ORDER   BY rating desc 
```

 ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:45:42.753

SQL-Server 版本（2005 及更高版本）：

```
WITH x 
     AS (SELECT r.rating, 
                r.product, 
                l.places, 
                l.address, 
                l.telephone, 
                l.lng, 
                l.lat, 
                RN = Rank() 
                       OVER( 
                         partition BY l.places 
                         ORDER BY rating DESC) 
         FROM   locations AS l 
                INNER JOIN ratings AS r 
                        ON l.places = r.places 
SELECT *  FROM   x  WHERE  rn = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:41:13.270

假设更高版本的sql-server。这未经测试 - 我对正确的分区有点不确定......要么`l.places`或`r.product`. 尝试这个...

```
;WITH cte
    as
    (
    SELECT     
               r.rating,
           r.product,
           l.places,
           l.address,
           l.telephone,
           l.lng,
           l.lat,
           [rnk] = RANK OVER(PARTITION BY l.places ORDER BY r.rating DESC)
    FROM   locations AS l
           LEFT JOIN ratings AS r
             ON l.places = r.places
    )
SELECT
        rating,
        product,
        places,
        address,
        telephone,
        lng,
        lat
FROM cte
WHERE [rnk] = 1
ORDER  BY rating DESC 
```~~~~

# jquery - 当内部容器也被点击时，外部容器上的 jQuery 点击处理程序会被触发

> ID：14458650
> 
> 赞同：0
> 
> 时间：2013-01-22T12:32:16.980
> 
> 标签：jquery, onclick

我有一个`masked`在`body`标签上调用的自定义类。在页面的中间，我有一个`DIV`大约 50% 的页面宽度和高度。

我试图仅将单击处理程序附加到`body.masked`选择器，但问题是每当单击内部时`DIV`，该选择器上的单击处理程序`body.masked`也会被触发。

好像`DIV`中间是“透明的”。我该如何避免呢？

这是一些代码：

```
$('body.masked').click(function(){
  alert();
}) 
```

和 HTML：

```
<body class="masked">
  <div style="width:50%;height:50%;text-align:center;>Lorem ipsum</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:34:24.680

这是因为[事件冒泡](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)。

它使子元素中发生的事件冒泡到事件树的顶部。这就是为什么它正在发生。

在事件处理程序中，您可以检查该`e.target`值以检查事件发生的位置。

前任：

```
$('.top').on('click', function(e){
    console.log(e, e.currentTarget, e.target, this);
    if($(e.target).is(this)){
        console.log('proceed')
    }
}) 
```

[小提琴](http://jsfiddle.net/arunpjohny/Jnt2p/)

# php - 带有 PHP 变量的 mysql_query

> ID：14458653
> 
> 赞同：0
> 
> 时间：2013-01-22T12:32:29.270
> 
> 标签：php, mysql

这应该很容易，但我无法让它工作。这个想法是寻找从表单中发布的电子邮件地址。如果它存在，则回显某些内容，如果不存在，则回显其他内容。

我的代码是：

```
<?php
//MySQL Database Connect
mysql_connect("localhost", "********", "**********") 
  or die("Unable to connect to MySQL");

//get data from form 
$email=$_POST['email'];

//ask the database for coincidences
 $result = mysql_query("SELECT email FROM pressmails WHERE email='.$email.'"); 
 $num_rows = mysql_num_rows($result); 

 if($num_rows < 0){ 
    echo "The user is registered";
} else { 
    echo "The user is not registered";
}  

 //Close database connection
 mysql_close();
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:34:08.020

您没有正确连接字符串。

`$result = mysql_query("SELECT email FROM pressmails WHERE email='.$email.'");`

应该

```
$result = mysql_query("SELECT email FROM pressmails WHERE email='".$email."'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:34:34.490

您应该使用右引号来结束字符串（如果您开始使用字符串，`"`您也必须使用结束字符串`"`，与 相同`'`）。

并且不要忘记使用[`mysql_real_escape_string`](http://php.net/mysql-real-escape-string)，否则脚本不安全。

脚本会变成这样：

```
// save the query in a variable, so we can echo it to debug when it doesn't work as expected
$sql = "SELECT email FROM pressmails WHERE email='".mysql_real_escape_string($email)."'";
$result = mysql_query($sql); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:35:30.273

您不需要连接标识符，因为包装文字`"`会自动将变量解析为字符串：

```
$result = mysql_query("SELECT email FROM pressmails WHERE email='$email'"); 
```

你应该小心，请注意。执行上述操作代表了一个重大的 SQL 注入漏洞。您应该考虑至少进行消毒`$email`。另请参阅我对`mysql_*`PHP 中的函数的评论。

从[文档](http://php.net/manual/en/function.mysql-close.php)：

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> mysqli_close() PDO：将NULL的值赋给PDO对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T12:37:20.193

（假设您纠正了语法错误）这不是倒退的逻辑吗？

```
if($num_rows < 0){ 
 echo "The user is registered";
} else { 
echo "The user is not registered";
} 
```

如果用户已注册，他们的电子邮件在数据库中并且查询返回一行或多行

尝试

```
if($num_rows){ 
   echo "The user is registered";
} else { 
  echo "The user is not registered";
} 
```

# algorithm - 拓扑排序以查找特定节点的依赖关系

> ID：14458655
> 
> 赞同：3
> 
> 时间：2013-01-22T12:32:46.327
> 
> 标签：algorithm, graph, computer-science, topological-sort

给定下[图](http://en.wikipedia.org/wiki/File:Directed_acyclic_graph.png)：

![在此处输入图像描述](../Images/d3f2b9a9140b02c1e52b01b62ae701d0.png)

我可以使用什么算法来输出拓扑有序列表以及要完成的任务，并且仅与特定节点相关？

例如，考虑到`node 2`，列表应该是：

```
7, 5, 11, 2 
```

或者

```
5, 7, 11, 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:29:28.567

1.  反转边缘
2.  运行 DFS 从`2`
3.  离开节点后，将其插入列表中。

例子：

```
Enter 2
  Enter 11
    Enter 7
    Leave 7, insert into list
    Enter 5
    Leave 5, insert into list
  Leave 11, insert into list
Done, insert 2 into list

Result: 7, 5, 11, 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:53:27.593

您必须将图分解为邻接矩阵，其中从节点 A 到节点 B 的每个链接都表示为矩阵中的“1”，其中节点对应于节点和列。

从这一点开始，您需要做的就是从终端节点向后工作，识别指向它的节点，然后从每个节点向后工作。

现在，您可能希望以广度优先的方式执行此操作，因此使用队列数据结构来跟踪“依赖”节点。

# angularjs - 标签将我带到 angularjs 的页面顶部。但我想留在同一个地方

> ID：14458664
> 
> 赞同：0
> 
> 时间：2013-01-22T12:32:59.967
> 
> 标签：angularjs

 我有一个点击按钮。我正在尝试使用 angularjs。当我单击它时，页面锚定在页面顶部。当我单击它时，如何在浏览器中停留在同一位置？

```
<a href="#" ng-click="myFunction()">
   {{_actions.refresh}}
</a> 
``` 

[这里](https://stackoverflow.com/questions/976753/jquery-click-brings-me-to-top-of-page-but-i-want-to-stay-where-i-am)有一个类似的问题。但是使用那里描述的 jQuery 解决方案。我想用angularjs找到一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:42:40.387

```
<a ng-click="myFunction()">
   {{_actions.refresh}}
</a> 
```

只需完全删除`href`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:47:56.870

因此，“正确”的做法是这样的：

```
<a name="myFunction"></a>
<a href="#myFunction" ng-click="myFunction()">
   {{_actions.refresh}}
</a> 
```

这样一来，您就可以拥有一些额外的功能，比如有人发送该链接，或者有人在没有 JavaScript 的情况下访问该页面（您是否考虑过这种体验？）。

我显然不了解您的应用程序，但是在其中放置名称标签可能在多个层面上都有帮助。

# mysql - MySQL 连接

> ID：14458665
> 
> 赞同：0
> 
> 时间：2013-01-22T12:33:01.950
> 
> 标签：mysql, connection

我的 ISP (1&1) 告诉我，我可以在任何时候打开的最大 MySQL 连接数是 18。我的 LAMP 堆栈应用程序几乎对每个页面都使用 SQL，但我在使用后关闭每个连接。我知道每个连接只会打开几毫秒，并且这里有很多变量，但是有人知道 18 连接将满足多少用户吗？当我的用户数量增加时，我想先发制人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:41:00.973

这似乎很奇怪。我了解有限制连接的 Internet 服务提供商 (ISP)，但 18 似乎任意低。真正影响 MySQL 性能的不是连接数，而是查询的数量和复杂性。

因此，第一个建议是真正找到另一个 ISP。除非我建议在您的 MySQL 查询上禁用持久连接。但是，如果/当发生大量活动时，它似乎仍然会违反 18 的限制。真的，找另一家 ISP 或请您当前的 ISP 有效地解释任何人如何使用这样的限制。

# ruby-on-rails - 您如何管理 Rails 应用程序中不同部署的不同模式？

> ID：14458666
> 
> 赞同：0
> 
> 时间：2013-01-22T12:33:03.350
> 
> 标签：ruby-on-rails, ruby, database

我有一种情况，我的 rails 应用程序 (R) 用于查看和修改由另一个（非 ruby​​）应用程序 (A) 管理的数据库。(A) 是业务的主要应用程序，(R) 只是对管理员的支持。因此 (R) 只使用提供的模式，没有迁移来设置/修改数据库（由 (A) 处理）。

我遇到的问题是（A）有几个不同的部署，（R）也需要部署到其中。但是，每个部署的数据库架构都不同（因为 (A) 在不同时间升级，并且也朝不同方向移动）。理想的情况是所有部署都可以更新到最新版本，并且 (A) 和 (R) 具有一致的数据库结构 - 但这实际上是不可能的。

我目前正在使用不同的分支管理这些 (R) 版本，并且一一挑选变化，但这变得笨拙。特别是因为目前有 7 个分支机构，而且这个数字还在增长。

有没有更好的办法？将数据库层与 Rails 端的 Web 应用程序解耦会有所帮助吗？那将如何运作？

# events - Angular ng-click 稍后在 dom 上输入

> ID：14458667
> 
> 赞同：0
> 
> 时间：2013-01-22T12:33:06.103
> 
> 标签：events, click, angularjs

我正在使用按钮更改 dom 元素的内部 html。当单击按钮时，我想触发另一个控制器功能。类似的东西。...但是不工作:)。

```
$scope.addBtn = function() {
   $('domtarget').html('<button ng-click="removeButton();"></button>');
}

$scope.removeBtn = function() {
   $('domtarget').html('');
} 
```

请建议修复:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:41:29.013

***永远***不要**修改控制器内部的 DOM 。**

 **```
<div ng-show="showMe"></div>
<button ng-click="showMe = !showMe;anotherAction()">Switch</button>
<button ng-click="someOtherAction()">Switch2</button> 
```

.

```
function SomeCtrl($scope) {
    $scope.showMe=true;
    $scope.anotherAction = function () {
        alert("gotcha");
    };
    $scope.someOtherAction = function () {
        $scope.showMe = !$scope.showMe;
        $scope.anotherAction();
    };
} 
```

要有条件地隐藏/显示元素，请使用[ng-show](http://docs.angularjs.org/api/ng.directive%3angShow)或[ng-hide](http://docs.angularjs.org/api/ng.directive%3angHide)。
要在点击时触发事件，请使用[ng-click](http://docs.angularjs.org/api/ng.directive%3angClick)**

# neo4j - neo4j 数据完整性？

> ID：14458670
> 
> 赞同：-1
> 
> 时间：2013-01-22T12:33:11.917
> 
> 标签：neo4j, graph-databases

我对 Neo4j 和数据完整性有一些疑问！在 Neo4j 下，数据完整性是否得到保证？并且由于支持所有 ACID 属性，因此已实现。那么原子性、一致性、隔离性、持久性？

也许有一个或这方面的信息来源？预先感谢您

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:38:20.980

从这里开始：http: [//docs.neo4j.org/chunked/milestone/introduction-highlights.html](http://docs.neo4j.org/chunked/milestone/introduction-highlights.html)

由于我不完全理解您的问题，请您发布您的目标 - 您打算用 neo4j 做什么，如果有的话，您现在使用什么技术来实现您的目标？也许我可以回答是否可能。

# javascript - 如何将内容写入包含脚本标签的父级

> ID：14458677
> 
> 赞同：1
> 
> 时间：2013-01-22T12:33:43.137
> 
> 标签：javascript

我正在标签内编写脚本。

```
<ul class="boxes_tree">
  <li><strong>data</strong></li>
  <script type="text/javascript">
    var itemStr ='[data1,data2]';
    itemStr=$.parseJSON(itemStr);
    if(itemStr){
          for (var key in itemStr)
          {
             if (itemStr.hasOwnProperty(key))
             {
                itemStr[key];
             }
          }
    }
  </script>
</ul> 
```

现在代替 `itemStr[key];`我想添加一个`li`标签`itemStr[key]`作为标签的内容`li`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:53:38.170

将它移到头部并使用 jQuery 使其成为这种方式怎么样？

```
$('.boxes_tree').append("<li>" + itemStr[key] + "</li>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:42:31.057

您可以使用`document.write`：

```
document.write("<li>" + itemStr[key] + "</li>"); 
```

据我所知，这是实现您想要做的事情的唯一方法。但是，您可能想完全重新考虑您的设计。因为使用 document.write 被认为是一种[不好的做法](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:42:45.387

使用有效的 JSON 为我工作

无论如何你都使用 jQuery，所以[DEMO](http://jsfiddle.net/mplungjan/BwzkM/)

```
$(function() {
  var itemStr ='[{"var":"data1"},{"var":"data2"}]';
  itemStr=$.parseJSON(itemStr);
  var $ul = $("#tree");
  if(itemStr){
    $(itemStr).each(function(i, val) {
      $ul.append("<li>"+val.var+"</li>");
    });
  }
}); 
```

* * *

document.write 版本：[DEMO](http://jsfiddle.net/mplungjan/UzRj4/)

# javascript - Javascript Regexp重复行匹配无法正常工作

> ID：14458678
> 
> 赞同：1
> 
> 时间：2013-01-22T12:33:46.850
> 
> 标签：javascript, regex, duplicate-removal

我正在编写一个 Javascript 代码来解析一些语法文件，这是相当多的代码，但我会在这里发布相关信息。我正在使用 Javascript Regexp 来匹配字符串中包含的重复行。字符串包含，例如（假设字符串名称是行）：

```
    如果
    别的
    ;
    打印
    {
    }
    测试1
    测试1
    =
    +
    -
    *
    /
    (
    )
    数
    细绳
    评论
    ID
    测试2
    测试2

```

应该发生的是在“test1”和“test2”上找到的匹配项。然后它应该删除重复项，留下 test1 和 test2 的 1 个实例。正在发生的事情根本不是对手。我对我的正则表达式很有信心，但 javascript 可能会做一些我没想到的事情。这是对上面给出的字符串进行处理的代码：

```
var rex = new RegExp("(.*)(\r?\n\1)+","g");
var re = '/(.*)(\r?\n\1)+/g';

rex.lastIndex = 0;

var m = rex.exec(lines);
    if (m) {
        alert("Found Duplicate");
        var linenum = lines.search(re);            //Get line number of error
        alert("Error: Symbol Defined twice\n");
        alert("Error occured on line: " + linenum);
        lines = lines.replace(rex,"");         //Gets rid of the duplicate
    } 
```

它永远不会进入 if(m) 语句。因此找不到匹配项。我在这里测试了正则表达式：[http:](http://regexpal.com/) //regexpal.com/ 在我的代码中使用正则表达式以及提供的示例文本。它匹配得很好，所以我有点不知所措。如果有人可以提供帮助，那就太好了。

谢谢你。

编辑：忘了补充，我在firefox中测试这个，它只需要在firefox中工作。不确定这是否重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:39:56.937

```
var str = 'if\nelse\n;\nprint\n{\n}\ntest1\ntest1\n=\n+\n-\n*\n/\n(\n)\nnum\nstring\ncomment\nid\ntest2\ntest2\ntest2\ntest2\ntest2';
console.log(str);
str = str.replace(/\r\n?/g,'');
// I prefer replacing all the newline characters with \n's here
str = str.replace(/(^|\n)([^\n]*)(\n\2)+/g,function(m0,m1,m2,m3,ind) {
    var line = str.substr(0,ind).split(/\n/).length + 1;
    var msg = '[Found duplicate]';
    msg += '\nFollowing symbol defined more than once';
    msg += '\n\tsymbol: ' + m2;
    msg += '\n\ton line ' + line;
    console.log(msg);
    return m1 + m2;
});
console.log(str); 
```

否则，您可以跳过第一行并将模式更改为

```
/(^|\r\n?|\n)([^\r\n]*)((?:\r\n?|\n)\2)+/g 
```

请注意，这`[^\n]*`也会捕获多个空行。如果您想确保它匹配（并替换）非空行，那么您可能需要使用`[^\n]+`.

**[编辑]**

对于记录，每个`m`代表每个`arguments`对象，`m0`整个匹配也是如此，`m1`是第一个子组 ( `(^|\n)`)，`m2`是第二个子组 ( `([^\n]*)`)，`m3`是最后一个子组 ( `(\n\2)`)。我本可以使用`arguments[n]`，但这些更短。

与返回值一样，由于 Javascript 使用的正则表达式风格缺乏后向性，此模式正在捕获可能的前面换行符（除非它是第一行），因此它需要返回匹配项和前面的换行符（如果有）。这就是为什么它不应该`m2`只返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:58:49.397

**First error**: `\` in a JS string is also an escape character.

```
var rex = new RegExp("(.*)(\r?\n\1)+","g"); 
```

should be written

```
var rex = new RegExp("(.*)(\\r?\\n\\1)+","g");
// or, shorter:
var rex = /(.*)(\r?\n\1)+/g; 
```

if you want to make it work. In the case of the `RegExp` constructor, you’re passing the pattern as a string to the constructor function. This means you need to escape each `\` backslash that occurs in the pattern. If you use a regexp literal, you don’t need to escape them, since they’re not in a string, but retain their ‘normal’ properties in the regexp pattern.

**Second error**, your expression

```
var re = '/(.*)(\r?\n\1)+/g'; 
```

is wrong. What you’re doing here is assigning a **string** literal to a variable. I’m assuming you meant to assign a **regular expression** literal, which should be written like this:

```
var re = /(.*)(\r?\n\1)+/g; 
```

**Third error**: the last line

```
lines = lines.replace(rex,"");         //Gets rid of the duplicate 
```

removes *both instances* of *all* duplicate lines! If you want to keep the first instance of each duplicate, you should use

```
lines = lines.replace(rex, "$1"); 
```

* * *

And finally, this method only detects two *consecutive* identical lines. Is that what you want, or do you need to detect *any* duplicates, wherever they may be?

# css - Firefox 故障 CSS 转换

> ID：14458687
> 
> 赞同：0
> 
> 时间：2013-01-22T12:34:14.740
> 
> 标签：css, internet-explorer, google-chrome, firefox

**_ 更新 _**

好的，这就是我对 Firefox 的发现：如果您将转换状态设置为在 css:hover （在我的情况下）上为一个 div 激活，然后为该容器内的元素设置进一步的转换状态，则会发生故障。

我需要解决问题。因为我希望在您进入 div 的该区域后激活某些元素，而不必直接将鼠标悬停在文本上（较小的捕获区域）。

**_ OLD _** 我找不到这个问题的原因，这让我很烦。在网上阅读一些关于这个问题的文章效果很好，但我的没有（在 Firefox 中）。而且我在`js fiddle`制作快速测试文件时遇到了麻烦。

当您单击`login`输入时，如果它仍在转换并且您单击输入框并激活下一个转换，则其跳跃/故障不会显示在`Chrome`或中`IE 10`。有模拟不同`IE`版本的软件吗？

任何人都可以看到故障还是只有我？

解决见下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:45:04.917

ie10的开发者工具中没有“兼容性视图”吗？您可以将其切换到不同的浏览器模式（ie9、ie8）。

# java - 图像未在 JPanel 内显示

> ID：14458697
> 
> 赞同：0
> 
> 时间：2013-01-22T12:34:42.213
> 
> 标签：java, image, swing, jpanel, java-2d

我想在面板内显示图像。所以我将图像的路径传递给该方法，打开图像文件并将其传递给专用于在面板内绘制图像的私有类的方法。问题是面板一直是空的并且不显示任何内容。

这是代码：

```
JPanel ImagePane; // I want to add image to this

public void getImagePath(String Path)
{       
    BufferedImage image = null;

    try 
    {
        image=ImageIO.read(new File(Path));
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    }
    DisplayImage display= new DisplayImage();
    display.getImage(image);
}

private class DisplayImage extends JPanel
{
    private BufferedImage image=null;

    public void getImage(BufferedImage im)
    {
        image=im;
        repaint();
    }

    public void paintComponents(Graphics g)
    {
        g.drawImage(image, 0, 0, image.getWidth() /2, image.getHeight()/2,ImagePane);
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:35:49.033

`paintComponents`是一种`Container`用于绘制容器中每个组件的方法。相反，您需要`paintComponent`绘制这个单个组件。

改变你的

```
public void paintComponents(Graphics g) 
```

方法

```
@Override
public void paintComponent(Graphics g) {
   super.paintComponent(g);
   g.drawImage(image, 0, 0, image.getWidth() /2, image.getHeight()/2,ImagePane);
} 
```

请注意使用`@Override`注解来帮助检查方法签名。

也叫

```
super.paintComponent(g); 
```

将更新子组件。

* * *

在您的方法`getImagePath`中，您似乎没有将其添加`DisplayImage`到任何容器中。相反，您创建一个 local `DisplayImage`，但不要使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T12:38:03.103

你必须覆盖[paintComponent](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)

```
 protected void paintComponent(Graphics g) 
```

但是在您创建的代码中`public void paintComponents(Graphics g)`，这是不正确的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T12:41:07.403

有`@Override`注释的使用。如果您习惯于在重写方法时使用它，则可以在编译时解决此问题。你需要使用这个：

```
 @Override 
    public void paintComponent(Graphics g) 
```

# php - 如何向codeigniter的表单验证类添加新功能

> ID：14458699
> 
> 赞同：3
> 
> 时间：2013-01-22T12:34:58.983
> 
> 标签：php, codeigniter, codeigniter-2

我有一个名为 website_check 的函数

```
function website_check($url){
if ($url !=""){     
    if (preg_match("#^https?://.+#", $url) and fopen($url,"r")){
        return TRUE;
    }else{
        $this->form_validation->set_message('Website url', 'The %s field is invalid');
        return FALSE;
    }       
}else{
    $this->form_validation->set_message('Website url', 'The %s field is required');
    return FALSE;
} 
```

}

我将此功能用作自定义代码点火器表单验证功能

```
$this->form_validation->set_rules('website', 'Website', 'callback_website_check'); 
```

我在每个控制器中都使用这个函数，所以我想将此函数添加到 codeigniters 表单验证类中并用作默认验证函数。是否可以将您的函数添加到 codeigniters 表单验证类，如果可以做到的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:10:19.503

是的。在应用程序/库目录中创建一个名为 MY_Form_validation.php 的文件。使类名 MY_Form_validation 为好。确保它扩展了 CI_Form_validation，并且它调用了父构造函数。然后，将您的规则添加为方法：

```
class MY_Form_validation extends CI_Form_validation {

public function __construct()
{
    parent::__construct();
}

public function website_check($url)
{
    if ($url != "") {     
        if (preg_match("#^https?://.+#", $url) and fopen($url,"r")) {
            return TRUE;
        } else {
            return FALSE;
        }       
    }else{
        return FALSE;
    }
}

} 
```

您还需要将规则添加到 form_validation_lang.php 文件（在 application/language/en 中）。只需在底部添加一条规则，如下所示：

```
$lang['website_check']      = "The %s field is invalid."; 
```

如果该文件不存在，您可以从系统/语言文件夹中复制它。您不应编辑系统文件夹中的文件，因为它们会在您更新时被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:02:40.903

编辑文件'system/libraries/Form_validation.php'并将这个新函数插入到类“CI_Form_validation”中。

```
function website_check($url){  
   if (preg_match("#^https?://.+#", $url) and fopen($url,"r")){
      return TRUE;
   }else{
      return FALSE;
   }       
} 
```

然后编辑文件 'language/english/form_validation_lang.php' 并附加此项：

```
$lang['website_check'] = "The %s field is invalid"; 
```

然后将其用作：

```
$this->form_validation->set_rules('website', 'Website', 'website_check'); 
```

# android - Android ListFragment 无法从异步任务中填充

> ID：14458712
> 
> 赞同：1
> 
> 时间：2013-01-22T12:36:04.863
> 
> 标签：android, android-asynctask, fragment

大约一天以来，我一直在用头撞墙。我希望有人能帮帮忙。

我的程序将一些 Json 加载并解析到异步任务中的对象数组中。这个异步任务是从我的 ListFragment 类中调用的，并且数据会在 onPostExecute 中发回。不会引发任何错误，并且列表加载动画应该会消失。但无论我做什么，列表都不会被填充。

我肯定会正确返回和解析数据，并且我尝试在 onPostExecute 中使用一个简单的数组和适配器，以确保它不是我的适配器类并且它仍然不起作用。

我已将下面的代码简化为一个示例。下面的代码等待 1 秒，然后删除加载动画。但不填充列表。如果您从 doInBackground 方法中删除睡眠，它会完美运行。

```
public class MyFragment extends ListFragment {

@Override
public void onActivityCreated(Bundle savedInstanceState) {

    super.onActivityCreated(savedInstanceState);

    AsyncTask<Void, Void, String> task = new AsyncTask<Void,Void,String>()
            {

                @Override
                protected String doInBackground(Void... params) {

                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    return null;

                }

                @Override
                protected void onPostExecute(String result) {               

                    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                              "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                              "Linux", "OS/2" };

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                              android.R.layout.simple_list_item_1, android.R.id.text1, values);

                    setListAdapter(adapter);

                }           

     };

     task.execute();

}

} 
```

正如我所说，如果您删除我用来模拟 json 加载的 Thread.sleep(1000) ，它工作正常。

如果这有什么不同，我正在使用 2.3 的片段支持库。

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:43:11.353

尝试

MyFragment.this.setListAdapter(适配器);

编辑：

你好，

我试过你的代码，甚至加载了视图

```
 mLoadedFragment = new MyFragment();
    transaction.replace(R.id.relativeLayout, mLoadedFragment);
    transaction.commit(); 
```

它对我来说很好，唯一可能的问题原因应该是：加载片段时视图不可见，或者一些类似的问题。

您可能想要检查您打算加载片段的布局。

# windows - 从控制台应用程序调用 Web 服务，Web 服务无法连接 azure 数据库

> ID：14458714
> 
> 赞同：0
> 
> 时间：2013-01-22T12:36:14.177
> 
> 标签：windows, web-services, azure, azure-sql-database

我们想使用控制台应用程序连接 Azure 数据库。我的应用程序在它具有动态 IP 的系统中调度。所以我在连接 Sql Azure 时遇到问题。

然后开发了一个 web 服务并托管在 windows azure 中，并从控制台使用了 web 服务，但我们仍然有同样的问题。

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:16:11.797

如果您知道 IP 范围，则可以在数据库防火墙上允许整个范围。它不是很优雅，但会起作用。

# windows-7 - 焦点跟随鼠标与 Resharper 导航冲突

> ID：14458716
> 
> 赞同：3
> 
> 时间：2013-01-22T12:36:25.423
> 
> 标签：windows-7, focus, resharper, mouseleave

在 Windows 7 中，您只需将鼠标悬停在窗口上即可获得焦点。默认情况下不启用此功能，但您可以在控制面板中启用它。（这里是采取的路径：

[轻松访问中心->使鼠标更易于使用->选中“通过将鼠标悬停在窗口上来激活窗口”]）。

我非常喜欢这个功能，但有时当我尝试使用 Resharper 在 Visual Studio 中打开一个 C# 类时，它让我很恼火。我将按 CTRL+N 并输入我想查看的类的名称（例如，“MyWpfClass”）。然后，Resharper 将在顶部显示带有“MyWpfClass”的建议下拉列表。我点击返回，现在 Resharper 打开一个下拉菜单，让我在“MyWpfClass.xaml”和“MyWpfClass.xaml.cs”之间进行选择。但是，如果鼠标光标位于错误的位置，下拉菜单会在一秒钟内关闭，然后我又回到了原点。有没有办法在不关闭焦点跟随鼠标功能的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T10:45:06.270

我在使用 MS Outlook 时遇到了同样的问题：联系人的自动建议列表会自动关闭，因为 Windows 将其视为一个窗口，而不是“新消息”窗口的一部分。

您可以使用 NiftyWindows，它具有相同的选项“Focus Follows Mouse”，可通过其上下文菜单访问。

或者，由于它是用 Autohotkey 编写的，您可以使用提取并将其子例程“XWN_FocusHandler”运行到独立脚本中：

```
#Persistent 
#SingleInstance force
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
#Warn All, OutputDebug ; Recommended for catching common errors.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

SetTimer, XWN_FocusHandler, 100
return

XWN_FocusHandler:
    CoordMode, Mouse, Screen
    MouseGetPos, XWN_MouseX, XWN_MouseY, XWN_WinID
    If ( !XWN_WinID )
        Return

    If ( (XWN_MouseX != XWN_MouseOldX) or (XWN_MouseY != XWN_MouseOldY) )
    {
        IfWinNotActive, ahk_id %XWN_WinID%
            XWN_FocusRequest = 1
        Else
            XWN_FocusRequest = 0

        XWN_MouseOldX := XWN_MouseX
        XWN_MouseOldY := XWN_MouseY
        XWN_MouseMovedTickCount := A_TickCount
    }
    Else
        If ( XWN_FocusRequest and (A_TickCount - XWN_MouseMovedTickCount > 500) )
        {
            WinGetClass, XWN_WinClass, ahk_id %XWN_WinID%
            If ( XWN_WinClass = "Progman" )
                Return

            ; checks wheter the selected window is a popup menu
            ; (WS_POPUP) and !(WS_DLGFRAME | WS_SYSMENU | WS_THICKFRAME)
            WinGet, XWN_WinStyle, Style, ahk_id %XWN_WinID%
            If ( (XWN_WinStyle & 0x80000000) and !(XWN_WinStyle & 0x4C0000) )
                Return

            IfWinNotActive, ahk_id %XWN_WinID%
                WinActivate, ahk_id %XWN_WinID%

            XWN_FocusRequest = 0
        }
Return 
```

# jquery - JQuery，如果在页面重新加载后选中单选按钮，我如何显示文本框

> ID：14458719
> 
> 赞同：0
> 
> 时间：2013-01-22T12:36:44.193
> 
> 标签：jquery, textbox, radio-button

我有两个单选按钮，`rdPayOutstanding`并且`rdPaySomeBalance`,`rdPaytOutstandingBalance`是默认单选按钮，在页面加载时会检查它，当这种情况发生时，它会`txtPaySomebalance`被隐藏，效果很好。什么时候`rdPaySomeBalance`检查然后`txtPaySomeBalance`应该显示，这也很好..

如果选中`txtPaySomebalace`时为空`rdPaySomebalance`，则页面未处理并重新加载，这也可以正常工作，但是当发生这种情况时`rdPaySomeBalance`，仍然会检查这是我想要的，但是`txtPaySomeBalance`然后隐藏了。

我使用 jQuery 来隐藏和显示文本框，并且仅`rdPayOustandingBalance`在选中时才隐藏它，以防客户端未启用 JavaScript。我希望`txtPaySomeBalance`在页面重新加载并且`rdPaySomeBalance`仍然被检查时显示，对我下面的 jQuery 有任何帮助，我还包括了我的 CSS。

```
.txtPaySomeBalance {
    display: inline;
}

$(document).ready(function () {

    if ($('.rdOutstandingBalance').attr('checked', true)) {
        $('.txtPaySomeBalance').hide();
    }

    $('.rdOutstandingBalance').click(function () {
        $('.txtPaySomeBalance').hide();
        $('.txtPaySomeBalance').attr('disabled', true);
    });

    $('.rdPaySomeBalance').click(function () {
        $('.txtPaySomeBalance').show();
        $('.txtPaySomeBalance').removeAttr('disabled');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:46:47.340

您的问题文本很难理解，我想您想在页面加载时阅读选中状态，因此您可以这样做：

```
$(document).ready(function () {
    // Cache your results to improve readability and perfomnce
    var $rdOutstandingBalance = $('.rdOutstandingBalance');
    var $rdPaySomeBalance = $('.rdPaySomeBalance');
    var $txtPaySomeBalance = $('.txtPaySomeBalance');

    // Use change event instead of click!
    $rdOutstandingBalance.change(function () {
        if ($rdOutstandingBalance.is(':checked') == true) {
            // Chain your method calls and use prop instead of attr
            $txtPaySomeBalance.hide().prop('disabled', true);
        };
    })
    // Trigger change event to set visible state
    .change();

    // Use change event instead of click!
    $rdPaySomeBalance.change(function () {
        if ($rdPaySomeBalance.is(':checked') == true) {
            // Chain your method calls and use prop instead of attr
            $txtPaySomeBalance.show().prop('disabled', false);
        };
    });
}); 
```

如果这没有帮助，请概述您的问题文本，甚至更好地创建一个 jsfiddle 来使用！

# java - 在 jfreechart 中自定义刻度线和刻度线位置

> ID：14458726
> 
> 赞同：2
> 
> 时间：2013-01-22T12:37:06.823
> 
> 标签：java, jfreechart

我需要每个数据点恰好有一个刻度线。

我很想*给*NumberAxis 中的 refreshTicksHorizo​​ntal 一个带有数据点的数组作为参数（实际上我使用的是子类 symbolAxis）我已经覆盖的类。实际上我这样做了，但我绝对知道（经过几个小时得到几乎正确的结果）如何将这个双精度值转换为我必须放入 currentTickValue 变量的像素（或至少以某种方式神秘地与 tickUnit 相关）值在 refreshTicksHorizo​​ntal 中。

我也尝试过——因为数据点到它的邻居都有相同的距离——给

`ratio = (datapoint[1] - datapoint[0]) / (Axis.UpperBound - datapoint[0])`

作为参数和其他不同的东西。但我不知道第一个数据点的（像素分别为 Java2D）值，所以我可以将我的第 i 个 currentTickValue 作为

`ratio*i * (dataArea.getMaxX() - firstDataPointInJava2D)`...

在我的（错误的）解决方案中，我的刻度线距离总是稍微太大或太小。你知道如何解决这个问题，还是有可能完全不同的方法来解决这个问题？

**编辑**

为了说明这个问题，这里有一个编译简约的例子：

```
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.*;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

import javax.swing.*;
import java.awt.*;
import java.awt.geom.Ellipse2D;

public class Example {
    public static void main(String[] args) {
        double[] dataPoints = {1.249860779781E12, 1.249861186272E12, 1.249861592763E12, 1.249861999254E12,
                1.249862405745E12};
        String[] dataNames = {"Hades", "Hagen", "Herakles", "Hermes", "Horowitz"};
        Shape shape = new Ellipse2D.Float(-2, -2, 4, 4);
        XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer(true, true);

        XYSeries[] lines = new XYSeries[5];
        XYSeriesCollection dataset = new XYSeriesCollection();

        for (int i = 0; i < 5; i++) {
            lines[i] = new XYSeries(new Integer(i).toString());
            lines[i].add(dataPoints[i], 0.05d);
            lines[i].add(dataPoints[i], 0.95d);
            dataset.addSeries(lines[i]);
            renderer.setSeriesShape(i, shape);
            renderer.setSeriesPaint(i, Color.black);
        }

        ValueAxis timeAxis = new DateAxis("");
        NumberAxis yAxis = new NumberAxis("");
        yAxis.setVisible(false);
        yAxis.setTickMarksVisible(false);
        yAxis.setRange(0.0d, 1.0d);

        SymbolAxis labelAxis = new SymbolAxis("", dataNames);
        labelAxis.setVerticalTickLabels(true);

        XYPlot plot = new XYPlot(dataset, timeAxis, yAxis, renderer);

        plot.setDomainAxis(1, labelAxis);
        plot.setDomainAxisLocation(1, AxisLocation.TOP_OR_LEFT);
        JFreeChart chart = new JFreeChart("", plot);
        chart.removeLegend();
        ChartPanel panel = new ChartPanel(chart);
        panel.setPreferredSize(new Dimension(800, 300));

        JFrame frame = new JFrame("");
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        JScrollPane scroller = new JScrollPane(panel);
        frame.add(scroller);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

结果如下所示： ![示例图](../Images/737e5653e98673d227e99aca9b32133f.png)

到现在为止还挺好。问题是，我想要名字（霍洛维茨等）完全越界。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:15:58.050

作为纯粹的经验测量，它们完美地排列使用

```
timeAxis.setLowerMargin(0.125);
timeAxis.setUpperMargin(0.125); 
```

或者

```
timeAxis.setRange(dataPoints[0] - 200000, dataPoints[4] + 200000); 
```

您可以将其概括为数据集的函数。

# c++ - 找到毕达哥拉斯三元组，总和为 1000，没有错误但不运行

> ID：14458730
> 
> 赞同：0
> 
> 时间：2013-01-22T12:37:25.717
> 
> 标签：c++, system-calls

这是代码

```
#include <iostream>
#include <cmath>

int main()
{
    float c, d;
    for(int a = 1; a < 1000; ++a) {
        for(int b = 1; b < 1000; ++b) {
            c = (a*a) + (b*b);
            c = sqrt(c);
            d = a + b + c;
            if(d==1000) {
                std::cout << a << "," << b << "," << c << std::endl;
                break;
            }
        }
    }
    system("pause");
    return 0;
} 
```

无法在我的系统**Dev-C++ 4.9.9.0**上运行它。

但是当在在线编译器中尝试它时，它给出了输出，但输出如下：

```
200,375,425
375,200,425

Disallowed system call: SYS_fork 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:45:12.287

我想在线编译器不允许调用

```
system("pause"); 
```

因为这会创建一个新流程。尝试删除该行，看看它是否运行得更好！

在程序结束时暂停的另一种方法是在顶部包含 iostream，然后在最后等待输入，然后返回：

```
//At the top
#include <iostream>

// Before return 0;
std::cin.get(); 
```

# php - 如何在 PHP 中更改 iframe 的宽度和高度

> ID：14458743
> 
> 赞同：-1
> 
> 时间：2013-01-22T12:38:14.190
> 
> 标签：php

任何人都可以告诉如何在 php.ini 中更改 iframe 的宽度和高度。在数据库中，我保存格式低于格式。当我显示时，我想固定大小。

这是 iframe 内容

```
<iframe width="400" height="225" src="http://www.youtube.com/embed/c7ct6pNOvEE?feature=oembed" frameborder="0" allowfullscreen></iframe> 
```

`Here width & height changes dynamically`基于 site.then 如何在 php 中将宽度转换为 500 将高度转换为 350

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T12:40:48.817

你应该只使用 CSS

```
html, body, iframe {
    height: 100%;
    width: 100%;
} 
```

* * *

编辑：下次您应该正确定义您的问题**并**在发布之前添加适当的描述。

无论如何，由于您在数据库中有大小，您可以简单地使用 echo 来更改大小。首先，您需要从数据库中获取宽度和高度，然后在 HTML 中回显。

```
<?php
$iframe = html_entity_decode($post['url']);
$newWidth = 610;
$newHeight = 450;
?>

<iframe
    src="<?php echo $iframe; ?>"
    height="<?php echo $newHeight; ?>"
    width="<?php echo $newWidth; ?>"
    frameborder="0" allowfullscreen>
</iframe> 
```

* * *

编辑 v12351524274573523

```
$iframe = '<iframe width="400" height="225" src="youtube.com/embed/c7ct6pNOvEE?feature=oembed" frameborder="0" allowfullscreen></iframe>';

$src = html_entity_decode($post['url']);
$height = 450;
$width = 610;

// add autoplay
$src = $src . (strstr($src, '?') ? '&': '?') . 'autoplay=1';

$iframe = preg_replace('/src="(.*?)"/i', 'src="' . $src .'"', $iframe);
$iframe = preg_replace('/height="(.*?)"/i', 'height="' . $height .'"', $iframe);
$iframe = preg_replace('/width="(.*?)"/i', 'width="' . $width .'"', $iframe); 
```

# ios - 类似于 MBProgressHUD for Titanium 的活动指示器

> ID：14458744
> 
> 赞同：0
> 
> 时间：2013-01-22T12:38:15.827
> 
> 标签：ios, titanium, appcelerator, titanium-mobile, mbprogresshud

对于**基于 Titanium 的 iOS 应用程序**，是否有任何类似于[**MBProgressHUD**](https://github.com/matej/MBProgressHUD)的活动指示器？

 **我搜索了很多，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:42:46.550

我搜索了很多，但直到现在还没有得到任何解决方案。

所以我开发了一个模块，用于集成类似于`MBProgressHUD`基于 Titanium 的 iOS 应用程序的活动指示器（它使用相同的代码和类似的功能。

你可以在这里找到模块：[**MMP_Activity**](https://github.com/Midhun-MP/MMP_Activity)

致力于**Stack Overflow**和**Appcelerator**为我提供了很多帮助以使其正确。**

# vb6 - Activereports（VB6 下）问题

> ID：14458747
> 
> 赞同：0
> 
> 时间：2013-01-22T12:38:29.260
> 
> 标签：vb6, activereports

我必须修改一个在工作中使用 ActiveReports 2.0 的旧 VB6 程序，我遇到了一些问题（顺便说一句，我以前从未使用过这个程序，只有 VB6 的基本知识）...

我必须使一些文本框变大，这很容易做到，但是一旦我移动它们，整个文本部分（而不仅仅是该文本框的内容）就会消失。

我注意到它在某种部分（对不起，我不知道他们怎么称呼它）中包含了那些文本框，所以我把它放大了，这没有任何区别。

这可能是什么原因造成的？

谢谢！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:50:12.353

听起来 TextBox 在 UserControl 内。UserControl 由开发人员创建，基本上是一个控件，其中包含任意数量的其他控件。您可以在 Project Explorer (Ctrl+R) 中检查您的项目中是否有任何用户控件。

确切知道控件属于哪个类的一种方法是在设计模式下打开表单 (Shift+F7)，单击控件，然后查看“属性”窗口 (F4)。下拉列表应以粗体显示当前选定控件的类名，然后是对象的名称。

控件的类是什么？如果它不是 TextBox，那么这将解释您遇到的意外行为。

# php - array_push 创建新数组而不是添加

> ID：14458751
> 
> 赞同：1
> 
> 时间：2013-01-22T12:38:43.800
> 
> 标签：php, arrays, array-push

我想根据 if 语句将 key=>value 对添加到现有数组中。但它不断添加 key=>value 对作为新索引。

这是我的代码：

```
foreach ($messageRepo as $oneMessage) {
        $calculatedTime = $oneMessage->getTimeToLive();
        $creationTime = $oneMessage->getCrdate();

        $calculatedTimes = $this->androidService->renderFormat($calculatedTime);
        $expiringDate = $creationTime + $calculatedTime;

        $ausgabe[] = array(
            'Time' => key($calculatedTimes),
            'Format' => current($calculatedTimes),
            'Title' => $oneMessage->getMessageTitle(),
            'Text' => $oneMessage->getMessageText(),
            );

        if (time() > $expiringDate) {
           array_push($ausgabe[]['Expired'], $expiringDate);

            } else {
            array_push($ausgabe[]['Expiring'], $expiringDate);
            }   
    } 
```

转储说：

```
 array(60 items)
0 => array(4 items)
  Time => 0 (integer)
  Format => 'Stunden' (7 chars)
  Title => '3 wochen total neu' (18 chars)
  Text => 'dfdsfsdf fgdsfgdsgf' (19 chars)
1 => array(1 item)
  Expired => NULL 
```

但我想`Expired => NULL`作为原始索引中的字段而不是新索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:45:08.297

你不应该`array_push`在这种情况下使用。请改用简单的赋值。由于您不知道要添加的元素的索引，因此您可以创建新数组，设置其所有值，然后将其添加到整个数组中。像这样的东西：

```
foreach ($messageRepo as $oneMessage) {
        $calculatedTime = $oneMessage->getTimeToLive();
        $creationTime = $oneMessage->getCrdate();

        $calculatedTimes = $this->androidService->renderFormat($calculatedTime);
        $expiringDate = $creationTime + $calculatedTime;

        $newval = array(
            'Time' => key($calculatedTimes),
            'Format' => current($calculatedTimes),
            'Title' => $oneMessage->getMessageTitle(),
            'Text' => $oneMessage->getMessageText(),
            );

        if (time() > $expiringDate) {
           $newval['Expired'] = $expiringDate;
        } else {
           $newval['Expiring'] = $expiringDate;
        }   

        $ausgabe[] = $newval;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:43:07.200

您与符号`array_push` *一起使用，它做同样的事情。*`$array[]`最终结果是创建一个新元素，然后将*其*视为一个数组并将另一个新元素放入其中。

您永远不需要`array_push`直接使用。你应该使用这样的东西：

```
// This is what the new array inside $ausgabe will look like
$newItem = array(
        'Time' => key($calculatedTimes),
        'Format' => current($calculatedTimes),
        'Title' => $oneMessage->getMessageTitle(),
        'Text' => $oneMessage->getMessageText(),
        );

if (...) {
    // conditionally add more elements
    $newItem['Expired'] = $expiringDate;
}

// Push the final result into $ausgabe
$ausgabe[] = $newItem; 
```

将半生不熟的新数组插入`$ausgabe`会带来麻烦，因为当您以后想要添加更多子元素时，您不知道引用新数组的键。你可以动态地找到它，但这太麻烦了，没有任何好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:43:37.433

将您的代码编辑为：

```
 $i=0;
    foreach ($messageRepo as $oneMessage) {
    $calculatedTime = $oneMessage->getTimeToLive();
    $creationTime = $oneMessage->getCrdate();

    $calculatedTimes = $this->androidService->renderFormat($calculatedTime);
    $expiringDate = $creationTime + $calculatedTime;

    $ausgabe[$i] = array(
        'Time' => key($calculatedTimes),
        'Format' => current($calculatedTimes),
        'Title' => $oneMessage->getMessageTitle(),
        'Text' => $oneMessage->getMessageText(),
        );

    if (time() > $expiringDate) {
       $ausgabe[$i]['Expired'] = $expiringDate;

        } else {
        $ausgabe[$i]['Expired'] = $expiringDate;
        }
$i++;

} 
```

# javascript - 无法加载外部页面

> ID：14458758
> 
> 赞同：0
> 
> 时间：2013-01-22T12:39:03.057
> 
> 标签：javascript, html

我在使用 Javascript 将外部页面加载到我的 div 时遇到问题。我在控制台中得到一个 NS_ERROR_FAILURE。

```
 var req = new XMLHttpRequest();
 req.open("GET", 'helpInfo.html', false);
 req.send(null);
 var page = req.responseText;
 document.getElementById("helpInfo").innerHTML = page; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:05:14.470

如果你想使用 javascript，你可以构建一个 Node.js 服务器并通过它路由你的所有调用。这将有助于解决 XSS 问题。

# wordpress - 未加载 Wordpress 语言文件

> ID：14458762
> 
> 赞同：2
> 
> 时间：2013-01-22T12:39:21.410
> 
> 标签：wordpress, translation, loading

我似乎在将 Wordpress 语言文件加载到我的自定义主题中时遇到了问题。

在functions.php中，我的设置中有以下代码：

```
load_theme_textdomain( 'theme_textdomain', get_template_directory() . '/langs' ); 
```

在我的样式表中，我定义了 textdomein：

```
Text Domain: theme_textdomain 
```

在我的主题文件夹中，我有一个包含 2 种不同文件类型的文件夹 /langs：

en_GB.mon nl_NL.mo

我的主题的默认语言是 nl_NL。

在我的一个模板中，我使用：

```
<?= __('Zoeken'); ?> 
```

只是为了测试我在两种语言文件中都添加了这个翻译：

对于 en_GB = 搜索，对于 nl_NL = zoeken2。但是，nl_NL 和 en_GB 都没有被主题加载。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:46:20.167

`__()`我认为您需要在调用该函数时指定您的主题域。我不认为它是从您的样式表标题中自动获取的。所以而不是

```
<?= __('Zoeken'); ?> 
```

尝试

```
<?= __('Zoeken', 'theme_textdomain'); ?> 
```

# c# - 在特定的代码隐藏中生成 TextBlock

> ID：14458766
> 
> 赞同：0
> 
> 时间：2013-01-22T12:39:29.867
> 
> 标签：c#, .net, wpf, code-behind, textblock

假设我有一个`grid`，

```
<Grid Name="grid1">
<Grid.ColumnDefinitions>
<ColumnDefinition Name="col1" Width="auto">
                                </ColumnDefinition>
                                <ColumnDefinition Name="col2" Width="380">
                                </ColumnDefinition>
                                <ColumnDefinition Name="col3" Width="auto">
                                </ColumnDefinition>
                                <ColumnDefinition Name="col4" Width="200">
                                </ColumnDefinition>
</Grid.ColumnDefinition>
 <Grid.RowDefinitions>
                                <RowDefinition Name="row1" Height="2*">
                                </RowDefinition>
                                <RowDefinition Name="row2" Height="2*">
                                </RowDefinition>
                            </Grid.RowDefinitions>   
 <Grid> 
```

那是`2`行和`4`列。我需要`TextBlock`在我`Grid.Row="1"`的`Grid.Column="2"`代码后面创建一个。

如何在相应的`Grid` *行*和*列*中创建它并将绑定设置为

```
 myTextBlock1.SetBinding(TextBlock.TextProperty, (new Binding("SelectedItem." + dataGrid1.Columns[5].Header) 
     { ElementName = "dataGrid1" })); 
```

在`textblock`运行时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:45:14.203

试试这个 ：

```
 TextBlock MyTextBlock = New TextBlock();
    Grid.SetRow( MyTextBlock, 1 );
    Grid.SetColumn( MyTextBlock, 2 );
    grid1.Children.Add( MyTextBlock ); 
```

# php - 将 db 中的浮点数转换为与 bcmath() 一起使用或如何使用 bcmath？

> ID：14458769
> 
> 赞同：1
> 
> 时间：2013-01-22T12:39:39.070
> 
> 标签：php, bcmath

我从数据库查询中获得了几个值。我得到的值看起来像：

`10.810000000000000497`我只想使用'10.81'。

或者

`2.6899999999999999467`我只想使用 2.69

使用时`ini_set('precision', 20)`；

**例如，我应该如何将这些值与 bcadd() 一起使用？**因为我只想添加 10.81 + 2.69？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:14:35.897

**php BC_**函数有另一个选项：**scale**。

```
$num1 = 10.810000000000000497;
$num2 = 2.6899999999999999467;
$result = bcadd($num1, $num2, 2);
echo $result; // 13.50 
```

如果你想多次使用它，你可以使用[bcscale()](http://www.php.net/manual/en/function.bcscale.php)这样你就不需要在每次使用它时指定第三个选项：

```
bcscale(2);
$num1 = 10.810000000000000497;
$num2 = 2.6899999999999999467;
$result = bcadd($num1, $num2);
echo $result; // 13.50 
```

# c++ - 算术/赋值运算符和复合赋值运算符是否在 C++ 中独立定义

> ID：14458772
> 
> 赞同：0
> 
> 时间：2013-01-22T12:39:49.303
> 
> 标签：c++, operator-overloading

即，如果在类定义中我重载`operator+`或者`operator=`这对`operator+=`? 反之亦然。

还是这些运算符完全独立，除非另有定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:41:18.367

不，这些运营商是完全独立的。

您当然可以使用其他实现一个，但默认情况下它们是独立的。

```
struct X
{
    X& operator = (const X&);
    X operator + (const X&) const;
    //X& operator += (const X& other) 
    //        { operator=(operator+(other)); return *this; }
};

X x, y;
x += y; //doesn't compile unless you uncomment that line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:47:27.683

该语言对此没有任何限制——你可以有一个运算符 + 对两个对象求和，一个 += 会炸毁太阳，它仍然是合法的。另一方面，强烈建议不要提出违反直觉的运算符重载，否则你的类会导致使用起来非常尴尬。

顺便说一句，为了避免代码重复，通常 + 以 += 的形式实现：

```
A operator+(const A& right) const
{
    A ret(*this);
    ret+=right;
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:42:17.733

不，如果你有什么行为，你还需要重写`+=`操作符！

# servicestack - Servicestack - 在 .net 客户端配置文件框架上运行内置客户端

> ID：14458773
> 
> 赞同：1
> 
> 时间：2013-01-22T12:39:52.407
> 
> 标签：servicestack, .net-client-profile

是否可以在 .net 客户端配置文件框架上运行 servicestack 的内置客户端？当我将项目设置中的目标框架属性更改为“.Net Framework Client Profile”并尝试编译时，我收到以下消息：命名空间服务堆栈中不存在命名空间 ServiceClient。

我们使用 servicestack 服务来发送异常报告。我们使用 JsonServiceClient 并且感觉很舒服。我们可以更改目标框架 - 但是我们必须检查所有安装以了解完整 .net 框架的可用性。

知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:54:17.370

从最新包的[包内容](http://preview.nuget.org/packages/ServiceStack.Common/3.9.25/Contents)`ServiceStack.Common`来看，似乎没有包含 -client 版本（请参阅[NuGet - Creating and Publishing a Package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)下的*Common Framework and Profile Targeting Examples*）。

您应该将目标框架更改为完整的配置文件，或者从[ServiceStack 的 GitHub 存储](https://github.com/ServiceStack/ServiceStack)库中提取代码并*尝试*自己为客户端配置文件构建它。这样做的缺点是您将失去 Nuget 令人敬畏的更新功能......

你当然可以在 GitHub 上为维护 ServiceStack 的人提交一个问题，以添加框架的客户端配置文件版本，但我想有一个很好的理由说明为什么它已经不存在了。

# ruby-on-rails-3 - 如何将变量传递给像@photo_main.file.url(:img_120x120) 这样的方法调用？

> ID：14458782
> 
> 赞同：0
> 
> 时间：2013-01-22T12:40:28.477
> 
> 标签：ruby-on-rails-3, variables, methods, carrierwave

使用 Carrierwave 上传图像，我想编写 1 个函数来处理我的所有图像，包括多种尺寸。

```
 image_tag @photo_main.file.url(:img_122x145) rescue nil 
```

:img_120x120 是在 Carrierwave 上传器中定义的，但为什么 :img_120x120 分号在其名称前？这是什么格式的？

想要的结果：

```
def get_avatar(size)

   image_tag @photo_main.file.url(size) rescue nil

end 
```

怎么可能做到这一点？

**更新 1：**

失败：ActionView::Template::Error（nil:NilClass 的未定义方法“文件”）：1：.ruler 2：3：//= show_avatar_profile（@profile.id）4：= show_avatar_new（@profile.id， “96x96”）

```
 def show_avatar_new(id, size)

    puts "size is"
    size =  size.to_sym
    puts size

    @photo_main = Photo.where(:attachable_id => id, :attachable_type => "Profile", :main => true, :moderated => true, :approved => true).first
    @photo = Photo.where(:attachable_id => id, :attachable_type => "Profile", :moderated => true, :approved => true).first

    if @photo_main
      image_tag @photo_main.file.url(size)
    else
      image_tag @photo.file.url(size)
    end

  end 
```

**更新 2：**

```
class PhotoUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick
  CarrierWave::SanitizedFile.sanitize_regexp = /[^[:word:]\.\-\+]/

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :img_48x48 do
    process :resize_to_fill => [48, 48]
  end

  version :img_58x58 do
    process :resize_to_fill => [58, 58]
  end

  version :img_75x75 do
    process :resize_to_fill => [75, 75]
  end

  version :img_96x96 do
    process :resize_to_fill => [96, 96]
  end

  # Used in search results,
  version :img_122x145 do
    process :resize_to_fill => [122, 145]
  end

  version :img_200x200 do
    process :resize_to_fill => [200, 200]
  end

  protected

  def secure_token(length=32)
    var = :"@#{mounted_as}_secure_token"
    model.instance_variable_get(var) or model.instance_variable_set(var, SecureRandom.hex(length/2))
  end

  def delete_empty_upstream_dirs
    path = ::File.expand_path(store_dir, root)
    Dir.delete(path) # fails if path not empty dir

    path = ::File.expand_path(base_store_dir, root)
    Dir.delete(path) # fails if path not empty dir
  rescue SystemCallError
    true # nothing, the dir is not empty
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:00:24.877

`:`在 Ruby 中，以冒号（不是分号！）开头的东西`;`是符号，它们本质上是不可变的字符串。

```
"img_122x145".to_sym # => :img_122x145 
```

看起来你在那里写的正是你需要的。如果你想知道把它放在哪里，你可以把它放在一个助手中

```
# app/helpers/avatar_helper.rb
def get_avatar(size)
  image_tag @photo_main.file.url(size)
end 
```

不过，请不要`rescue nil`在那里使用。你想捕捉什么错误？明确地避免它而不是使用异常作为流控制会好得多。

```
image_tag @photo_main.file.url(size) if @photo_main.file? 
```

足以避免 a`@photo_main`没有 a的问题`file`，并且更能揭示意图（实际上，性能更高）。在最坏的情况下，您仍然应该明确说明您期望得到什么样的错误

```
def get_avatar(size)
  image_tag @photo_main.file.url(size)
rescue SomeSpecificErrorThatCantBeAvoided
  nil
end 
```

[这个简短（<3 分钟）的截屏视频](http://devblog.avdi.org/2012/11/19/rubytapas-022-inline-rescue/)是避免在线救援的绝佳案例。

* * *

**更新**

当您在 CarrierWave 中创建版本时，它会创建访问它们的方法 - 您不会将参数传递给`url`：

```
@photo.file.img_122x145.url 
```

但是，如果您想获得可变版本，可以通过`versions`（哈希）获得它们：

```
size = :img_122x145
@photo.file.versions[size].url 
```

那不会解决您剩下的问题，这只是您的查询没有找到任何东西。

# ios - 在坐标空间之间转换

> ID：14458786
> 
> 赞同：1
> 
> 时间：2013-01-22T12:40:38.983
> 
> 标签：ios, math, rotation, linear-algebra, gyroscope

我正在尝试使用 iPhone 摄像头和从陀螺仪传感器接收的数据在 OpenGL ES 中模拟逼真的摄像头。基本上，当我从陀螺仪接收滚动、俯仰和偏航旋转时，我将它们传递给 openGL 上下文，并通过减去每个角度来旋转场景中的每个对象，模拟相机旋转。

```
CC3GLMatrix *modelView = [CC3GLMatrix matrix]; // cocos3D matrix 

[modelView populateFromRotation:CC3VectorMake(-pitch, -roll, -yaw)];
[modelView translateBy:CC3VectorMake(0, 0, -distance)];
glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView.glMatrix); 
```

它工作得很好。问题是 iPhone 坐标系随手机旋转，因此例如滚动总是“撞击”手机的侧面。所以当我添加另一个对象时，左/右的 alpha 度，它成为 iPhone 坐标系的左/右，而不是世界坐标系。

第一张图片没有旋转，向前看。 ![在此处输入图像描述](../Images/51c744fe27d2cefcec797067f132deba.png)

但是当我将手机向右旋转 30-40 度左右时，很明显物体的侧面不再平行。

![在此处输入图像描述](../Images/8d43bee9c95968c9e643f3c4303bb4ed.png) 第二个对象的旋转：

```
CC3GLMatrix *modelView2 = [CC3GLMatrix matrix];
[modelView2 populateFromRotation:CC3VectorMake(-pitch, -roll-30, -yaw)];
[modelView2 translateBy:CC3VectorMake(0, 0, -distance)];
glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView2.glMatrix); 
```

由于手机向右倾斜，物体也向右倾斜，并且物体位置的唯一差异是滚动 -30，这意味着坐标系与手机绑定并随手机旋转。

有没有办法将这些坐标转换为世界坐标或任何其他方式来旋转现实世界中的整个场景？

# exception - IOException：未连接类：黑莓中的类 net.rim.device.api.io.ConnectionClosedException

> ID：14458787
> 
> 赞同：1
> 
> 时间：2013-01-22T12:40:42.750
> 
> 标签：exception, blackberry, connection

我从我的黑莓 java 代码中获取 net.rim.device.api.io.ConnectionClosedException。下面代码中突出显示的是引发异常的行。

```
hc = (HttpConnection) Connector.open(url);  

        hc.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + getBoundaryString());

        hc.setRequestMethod(HttpConnection.POST);           

        hc.setRequestProperty(HttpProtocolConstants.HEADER_ACCEPT_CHARSET,
                "ISO-8859-1,utf-8;q=0.7,*;q=0.7");

        hc.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LENGTH ,Integer.toString(fileBytes.length));

        OutputStream dout = hc.openOutputStream();

        dout.write(boundaryMessage.getBytes());
        dout.write(this.postBytes);
        dout.write(endBoundary.getBytes());             

        dout.close();

        int ch;     

        **is = hc.openInputStream();** //exception raised here

        if(hc.getResponseCode()== HttpConnection.HTTP_OK)
        {                       
            while ((ch = is.read()) != -1)
            {
                bos.write(ch);
            }
            res = bos.toByteArray();
            System.out.println("res loaded..");             
        }
        else {              
            System.out.println("Unexpected response code: " + hc.getResponseCode());            
            hc.close();
            return null;
        }             
    }
    catch(IOException e)
    {           
        System.out.println("====IOException : "+e.getMessage()+" Class: "+e.getClass());                
    }
    catch(Exception e1)
        {
            //e1.printStackTrace();                 
            System.out.println("====Exception : "+e1.getMessage()+" Class: "+e1.getClass());    
        }
    finally
    {
        try
        {
            if(bos != null)
                bos.close();

            if(is != null)
                is.close();

            if(hc != null)
                hc.close();
        }
        catch(Exception e2)
        {
            e2.printStackTrace();               
            System.out.println("====Exception : "+e2.getMessage()); 
        }
    } 
```

我应该怎么做才能纠正这个？有人可以帮忙吗？提前致谢。

# asp.net-mvc - 仅将 MiniProfiler 用于调试或本地请求

> ID：14458790
> 
> 赞同：3
> 
> 时间：2013-01-22T12:40:46.660
> 
> 标签：asp.net-mvc, asp.net-mvc-3, debugging, mvc-mini-profiler

我想为我的 MVC3 应用程序使用 MiniProfiler，所以我关注了[Scott Hanselman 的博客文章](http://www.hanselman.com/blog/NuGetPackageOfTheWeek9ASPNETMiniProfilerFromStackExchangeRocksYourWorld.aspx)

我的 Global.asax.cs 文件具有必要的更改，例如[源的 MVC 示例](https://github.com/SamSaffron/MiniProfiler/blob/master/Sample.Mvc/Global.asax.cs)。

但我想在我的控制器中测量一个特定的调用。所以我把这段代码放在控制器中：

```
if (Request.IsLocal)
{
    var profiler = MiniProfiler.Current;
    using (profiler.Step("SelectUserDetail Function"))
    {
        user = UserService.SelectUserDetail(userId);
    }
} 
```

我怀疑我的代码永远不会在生产环境中，因为我将这个块包装在`Request.IsLocal`检查中。

**如何仅针对本地呼叫或在调试模式下运行进行此检查？**在任何情况下，它都应该执行该`user = UserService.SelectUserDetail(userId)`语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T20:54:17.163

如果我正确理解您的问题，您只想在本地运行（或调试）时调用 MiniProfiler 的[`.Step()`扩展方法，对吗？](https://github.com/SamSaffron/MiniProfiler/blob/master/StackExchange.Profiling/MiniProfilerExtensions.cs#L38)

如果是这样，这有点违背了 MiniProfiler 的目的，即让所有这些工具都可用于生产代码，**而不会影响生产**。

我相信您可以在代码中简单地执行此操作：

```
using (MiniProfiler.Current.Step("SelectUserDetail Function"))
{
    user = UserService.SelectUserDetail(userId);
} 
```

它对你的应用几乎*没有影响；*我们在 Stack Overflow 上的代码中确实这样做了数百次，没有问题（以及每个数据库查询）。

您只需要在收到新请求时进行检查：

```
protected void Application_BeginRequest()
{
    if (Request.IsLocal) { MiniProfiler.Start(); }
} 
```

当您在生产中运行时，任何调用都`MiniProfiler.Current.Step()`不会返回任何内容，因为分析器是`null`（扩展方法的美妙之处）。

如果您仍想防止任何`using`语句出现在您的生产代码中，您应该熟悉[预处理器指令](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)。也看到[这个问题](https://stackoverflow.com/questions/2104099/c-sharp-if-then-directives-for-debug-vs-release)。但是，出于此目的，我强烈建议不要使用它们，因为没有必要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-09T14:07:20.690

我通常创建类似`DebugHelper`静态类的东西并在那里定义：

```
public static class DebugHelper
        {
            private static bool? _isDebugEnabled = false;
            public static bool IsDebug
            {
                get
                {
                    if (!_isDebugEnabled.HasValue)
                    {
                        _isDebugEnabled = false;
    #if DEBUG
                        _isDebugEnabled = true;
    #endif
                    }
                    //may be extra rules like   check for some debug key in HttpContext.Current etc.
                    return _isDebugEnabled.Value;
                }
                set { _isDebugEnabled = value; }
            }

            public static bool IsDevEnvironment
            {
                get
                {
                    string environment = settingsService.GetSettingByKey<string>("environment");
                    return environment == "dev";
                }
            }
            public static bool IsTestEnvironment
            {
                get
                {
                    string environment = settingsService.GetSettingByKey<string>("environment");
                    return environment == "test";
                }
            } 
```

DebuHelper 允许我轻松打开/关闭调试模式、日志记录、跟踪等。为开发和测试环境添加额外的输出或任何内容

# math - 检查除数直到 max{2 ≤ i ≤ n} (min (i,n/i))？

> ID：14458793
> 
> 赞同：-1
> 
> 时间：2013-01-22T12:40:50.677
> 
> 标签：math

我的教授通过回复以下内容给出了检查直到 sqrt(n) 的另一种解释：

“我们只需要检查除数直到最大值[2 ≤ i ≤ n] (min(i, n/i))。当 i = n/i 时达到最大值，即 i = sqrt n。”

他到底是什么意思？有人能用英文写吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:47:29.020

为您格式化 TeX，即“max [2 <= i <= n] (min(i, n/i))”。在英语中，从 2 到的所有值中的较小`i`者的最大值。`n/i``i``n`

例如，如果`n`是 12：

```
i    n/i    min(i,n/i)
2    6      2
3    4      3    <--- Largest value is 3: sqrt(12) rounded down
4    3      3
5    2      2
6    2      2
7    1      1
8    1      1
9    1      1
10   1      1
11   1      1 
12   1      1 
```

很容易看出`i < n/i`当且仅当`i < sqrt(n)`，并且从中我们可以看到该表达式的最大值将是`sqrt(n)`。

据推测，这是为了找到 的因数`n`。如果`i`是一个因子，那么`n/i`也是，因为`n/i * i = n`，所以没有必要同时测试`i`和`n/i`。因此，我们可以选择只检查两者中较小的一个，`min(i, n/i)`，并且只需要考虑`i`到最大的值——这是你的老师给你的表达式的值。

# java - java中的int返回类型

> ID：14458794
> 
> 赞同：0
> 
> 时间：2013-01-22T12:40:57.753
> 
> 标签：java, int, return

下面是代码片段，我很困惑。方法的返回类型是 int ，所以该方法不能返回 null。但是，当我取消注释第一个返回语句和注释第二个返回语句时，方法的甚至没有显示任何错误警告。我很困惑这背后的原因是什么。我使用的是 java 版本 7。

```
 protected int calculateLogicalPageRangeForTitles(String logicalpage) throws Exception {
     //return StringUtils.isNumeric(logicalpage) ? Integer.parseInt(logicalpage) : null;
     return null;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:31:25.033

该代码是合法的并且可以编译。

请参阅 Java 规范： [http ://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)

> 如果第二个和第三个操作数之一是空类型，另一个是引用类型，那么条件表达式的类型就是那个引用类型。

这意味着，?: 的结果将是一个整数，它将被拆箱为 int。此拆箱将引发 NullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:43:39.033

此语句仅返回一个`int`. `parseInt`返回一个`int`并且`0`是一个`int`

```
return StringUtils.isNumeric(logicalPage) ? Integer.parseInt(logicalPage) : 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:44:24.603

第一个`return`声明

```
return StringUtils.isNumeric(logicalPage) ? Integer.parseInt(logicalPage) : 0; 
```

总是返回一个`int`值（或异常）。该方法也[`Integer.parseInt()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)返回一个原始`int`值。因此不会显示错误或警告。

然而，第二个声明，

```
return null; 
```

尝试返回*原始*返回类型的`null`值，该值无效并因此导致编译器错误。*`int`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:00:53.993

您的第一行也无效。如果结果为假并尝试返回该`null`值，则会引发异常。

如果你把代码写成一个冗长的 if 语句，它会给你错误。喜欢：

```
if (StringUtils.isNumeric(logicalpage){
    return Integer.parseInt(logicalpage);
}else{
    return null;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T12:43:46.153

那是因为[parseInt](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)返回一个 int （原始类型），它与您的方法的签名相匹配。

`null`另一方面，它与原始 int 不兼容，这就是您遇到错误的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T12:43:47.173

因为您的第一条语句将始终返回一个`int`. 所以它编译。

但是第二条语句返回`null`的是`Object`类型。如果您的返回类型是`Integer`而不是，这将编译`int`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T12:44:42.563

int 是一个原始的......因此它必须有一个值。null 是一个值，告诉我们（对类的）引用不引用任何实例。*

# c# - 两个类之间的实体框架多对多

> ID：14458800
> 
> 赞同：3
> 
> 时间：2013-01-22T12:41:13.360
> 
> 标签：c#, .net, entity-framework

我正在使用实体框架开发一个简单的 MVC 应用程序来跟踪羽毛球联赛的分数。我有以下两个课程：

```
public class Game
{
    public int Id { get; set; }
    public Player Player1 { get; set; }
    public Player Player2 { get; set; }
    public int Player1Score { get; set; }
    public int Player2Score { get; set; }
} 
```

和

```
public class Player
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public List<Game> Games { get; set; }
} 
```

我遇到的问题是，当我有一个玩家实例时， Games 属性返回一个空列表。当我请求我的球员名单时，我使用以下内容：-

```
var players = badmintonDB.Players.Include("Games").ToList(); 
```

通过对 SO 的搜索，我试图覆盖`OnModelCreating`. 我尝试了以下有和没有`Map()`. 这会在我的数据库中创建另一个表，但它不包含任何记录。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Player>().HasMany(p => p.Games).WithMany()
            .Map(m =>
            {
                m.ToTable("PlayerGames");
                m.MapLeftKey("Player_Id");
                m.MapRightKey("Game_Id");
            });

        base.OnModelCreating(modelBuilder);

    } 
```

我看不出哪里出错了，是否需要重新考虑我的 POCO 的设计，或者在覆盖`OnModelCreating`.

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:56:12.113

我不确定该设计是否可以按您希望的方式工作。如果你制作了一个新的“Score”实体来将玩家与这样的游戏联系起来会怎样：

```
public class Game
{
    public int Id { get; set; }
    public virtual ICollection<Score> Scores { get; set; }
}

public class Player
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public virtual ICollection<Score> Scores { get; set; }
}

public class Score
{
    public int ScoreId { get; set; }
    public virtual  Player Player { get; set; }
    public virtual Game Game { get; set; }
    public int Score { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:35:56.133

**更新：**
在考虑更多时，我不确定这是否可以通过自动导航属性来完成。原因是：你有两个外键在`Game`. 因此，要让玩家加载其游戏列表，EF 必须在*两个*外键上创建一个选择。

**旧答案（我现在认为是错误的）：**
EF 尝试自动检测导航属性。也许这失败了，因为`Game`有两个`Player`.

自己声明导航：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder
         .Entity<Game>()
         .HasRequired(g => g.Player1)
         .WithMany()
         .WillCascadeOnDelete(false);

        modelBuilder
         .Entity<Game>()
         .HasRequired(g => g.Player2)
         .WithMany()
         .WillCascadeOnDelete(false);

        base.OnModelCreating(modelBuilder);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:48:41.107

请试试：

```
public virtual List<Game> Games { get; set; } 
```

使用代码优先 API，您需要指定导航属性，就`virtual`好像您想使用延迟加载一样。请参阅[C# EF Code First 虚拟关键字，它有什么作用？](https://stackoverflow.com/questions/14321097/c-sharp-ef-code-first-virtual-keyword-what-does-it-do)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:44:22.237

```
public class Player
{
    public Player()
    {
        this.Games = new List<Game>();
    }

    public int Id { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public List<Game> Games { get; set; }
} 
```

`var players = badmintonDB.Players;`如果延迟加载打开并且您没有像使用`Map();`.

但是请注意，在使用延迟加载加载数据时，它实际上取决于您输出的内容。如果您愿意，例如以 JSON 字符串输出所有数据，它将加载所有游戏。如果没有，它不会打扰，因为它会认为你不需要任何游戏来展示。

# c - 在linux c中通过rs232进行串行通信

> ID：14458801
> 
> 赞同：1
> 
> 时间：2013-01-22T12:41:16.447
> 
> 标签：c, linux

我是 Linux 新手。我在串行通信中遇到问题。我有两台计算机，一台运行超级终端，另一台我正在编写一个 C 程序来与超级终端通信。两台 PC 均通过 RS232 连接。我已经编写了一些代码，并且能够将数据发送到超级终端，但是我不确定如何在 Linux PC 上使用 C 语言编写的程序从超级终端读取数据。

有什么建议么？

提前致谢。

下面是我的代码：

```
int main(int argc, char **argv)
{
    struct termios options;
    int fd;

    fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);
    if(fd == -1)
    {
        printf("Could not open port /dev/ttyS0\n");
        return 1;
    }

    tcgetattr(fd, &options); //get port options

    cfsetispeed(&options, B9600); //set input baud rate
    cfsetospeed(&options, B9600); //set output baud rate

    options.c_cflag |= (CLOCAL | CREAD); //enable receiver and set local mode

    options.c_cflag &= ~PARENB;
    options.c_cflag &= ~CSTOPB;
    options.c_cflag &= ~CSIZE;
    options.c_cflag |= CS8;
    options.c_cflag &= ~CRTSCTS; //disable hardware flow control
    options.c_cflag &= ~(ICANON | ECHO | ISIG); //set raw input

    options.c_cflag |= IXOFF; //disable software flow control

    tcsetattr(fd, TCSANOW, &options); //set new port options

    sleep(1);
    int rc,count;
    int size = 8;
    unsigned char buf[10];
    FILE *fp = NULL;
    char ch;
    int i=0;
    printf("enter the data you want to send");

    while((ch=getchar())!='\n')
    {
        write(fd,&ch,1);
    }
    close(fd);

    printf("Finished.\n");

    return 0;
} 
```

# cmake - 移动目录后编辑与删除 CMakeCache.txt

> ID：14458805
> 
> 赞同：25
> 
> 时间：2013-01-22T12:41:23.363
> 
> 标签：cmake

如果在移动源目录后重新执行 CMake，则会出现如下错误：

> CMake 错误：当前 CMakeCache.txt 目录 /new-path/CMakeCache.txt 与创建 CMakeCache.txt 的目录 /old-path 不同。这可能会导致在错误的位置创建二进制文件。如果不确定，请重新编辑 CMakeCache.txt

处理这个问题的最佳方法是什么？似乎删除缓存有效。为什么我想编辑`CMakeCache.txt`而不是删除它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T13:04:04.217

我认为您最好的选择确实是删除缓存并重新创建它。事实上，如果我需要移动源，我倾向于更进一步并删除整个构建树，但这可能是矫枉过正。

*可以*通过 CMake GUI 或手动编辑CMakeCache.txt 文件，如果您确定自己在做什么，但我发现与从头开始重新运行 cmake 相比，通常不值得付出努力。我猜如果运行 CMake 需要花费大量时间（例如，如果您使用[`ExternalProject_Add`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module:ExternalProject)可能涉及下载和构建第三方资源），最好修改 CMakeCache.txt。

[本文](http://www.cmake.org/cmake/help/runningcmake.html)提供了有关 CMakeCache.txt 文件和编辑它的更多详细信息。特别是它说：

> 编辑缓存的主要原因是为 CMake 提供本地库（例如 JPEG）的位置，或者阻止它使用本地库并使用源代码树中的库版本。
> 
> CMake 不会更改缓存文件本身中的现有条目。如果您的 CMakeLists.txt 文件发生重大变化，您将需要从缓存文件中删除相关条目。如果您尚未手动编辑缓存文件，则可以在重新运行 CMake 之前将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T10:59:43.710

我在运行 CGAL 代码（我之前已经编译过）时遇到了同样的错误。我所做的只是创建一个新目录并在那里复制“.cpp”文件并运行“CGAL_create_CMakelists”，然后运行 ​​cmake 命令。它以这种方式工作。我不完全知道，但我认为当您运行已经编译并且其构建文件已经在文件夹中的代码时会出现错误（由于先前的编译）。

# javascript - Aptana 3 Javascript 语法验证器不起作用

> ID：14458806
> 
> 赞同：0
> 
> 时间：2013-01-22T12:41:26.917
> 
> 标签：javascript, validation, aptana, aptana3

我现在已经安装了 Aptana 3，但是 Javascript 语法验证器不起作用。我做错了什么？我已经测试了 JSLint 和 Javascript 样式验证器，他们正在工作..

![Aptana Javscript 语法验证器](../Images/02e5f64697b4845329d74b76ac7cf756.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T02:19:43.547

如果单击`Javascript Syntax Validator`，您会注意到默认情况下它是空的。

这就是为什么。

# visual-studio-2010 - 将不同的源代码管理提供程序与不同的 Visual Studio 实例一起使用

> ID：14458807
> 
> 赞同：1
> 
> 时间：2013-01-22T12:41:29.237
> 
> 标签：visual-studio-2010, git, version-control, branching-and-merging

我需要将代码库的多个分支（一个来自 TFS，一个由 git 持有）合并到 git 中。但似乎 VS 的两个实例共享一个源代码提供程序的设置，因此，例如，如果我想在合并之前检查 TFS 中文件的历史记录，我必须在工具 - > 选项下手动切换提供程序，做我的检查并将其切换回来。

必须同时运行两个 VS 实例，在记住什么是什么方面已经够难了，拥有多个分支更糟糕，拥有多个源代码控制绑定是坑。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:12:50.223

您可以[使用`git-tf`创建 TFS 数据的临时 GIT 工作副本，](http://gittf.codeplex.com/)在 GIT 中进行全部合并。如果您还需要更新 TFS，然后使用 git-tf 将更改提交回 TFS。

# jquery - 需要有关手风琴菜单脚本的帮助

> ID：14458813
> 
> 赞同：0
> 
> 时间：2013-01-22T12:41:47.737
> 
> 标签：jquery, menu, accordion

由于我对 jQuery 的了解很少，我正在尝试制作一个动态手风琴菜单。当我单击菜单项时，我的脚本无法正常工作。为什么这个脚本不监听那个 div 上的点击事件？

我把我的脚本放在上面`</body>`

```
 <script>

            $("#eventday > li > div").click(function(){

                if(true == $(this).next().is(':visible')) {
                    $('#eventday ul').slideUp(300);
                }
                $(this).next().slideToggle(300);
            });

            $('#eventday ul:eq(0)').show();

 </script> 
```

我的观点是（我使用 Laravel 的刀片视图）：

```
<ul id="eventday">
    @foreach ($showings as $showing)
    <li><h5>{{ $showing->show->name }}</h5>
        <ul>
            <li><a href='#'>{{ $showing->show->name }}</a></li>
            <li><a href='#'>{{$showing->theater->name}}{{ $showing->price }}tl</a></li>
       </ul>
    </li>
    @endforeach
 </ul> 
```

我的CSS设置是：

```
#eventday{
    list-style: none;
    padding: 0 0 0 0;
    width: 370px;

}
#eventday div{
    display: block;
    cursor: pointer;
    border:2px solid #a1a1a1;
    padding:10px 40px;
    background:#fefabc;
    width:200px;
    border-radius:25px
}
#eventday ul {
    list-style: none;
    padding: 0 0 0 0;
}
#eventday ul{
    display: none;
}
#eventday ul li {
    font-weight: normal;
    cursor: auto;
    background-color: #fff;
    padding: 0 0 0 7px;
}
#eventday a {
    text-decoration: none;
}
#eventday a:hover {
    text-decoration: underline;
} 
```

你能帮我做这个菜单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:00:47.440

将你的 jQuery 包裹在

```
jQuery(document).ready(function () {
     // Place your code here
}); 
```

在加载 DOM**后**执行 javascript ！

并改进您的 jQuery 代码：

```
// Cache result
var $eventday = $('#eventday');

// Use jQuerys .on()
$eventday.on('click', '> li > div', function () {
    // Cache results
    var $divClicked = $divClicked(this);
    var $nextDiv = $divClicked.next();

    if ($nextDiv.next().is(':visible') == true) {
        $eventday.find('ul').slideUp(300);
    };

    $nextDiv.slideToggle(300);
});

$eventday.find('ul:eq(0)').show(); 
```

# java - Nulljava.lang.NullPointerException 调用其他类的方法

> ID：14458814
> 
> 赞同：-2
> 
> 时间：2013-01-22T12:42:03.833
> 
> 标签：java, android

我正在编写一个程序，该程序具有多个事物的核心类和允许使用不同参数调用核心函数的接口。`Nulljava.lang.NullPointerException`当我打电话时`EnviaSms`它给了我错误`utilitariosprincipal`。

我的代码如下：

```
public class utilitariosprincipal extends Activity {
    String nom="", num="", mai="";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.utilitarios);

        interfacescontactos inte=new interfacescontactos();

        contactos cont = new contactos(); //class where contacts are defined
        num=inte.sel_num(cont.Meu); //this contains a String (telephone number)

        core_sms sm=new core_sms();

        try{
            sm.EnviaSms(num,"Experiência", false);
        }
        catch(Exception e) {
            Toast.makeText(this, e.getMessage()+e.toString(), Toast.LENGTH_LONG).show();
        }
    }

    public class core_sms extends Activity {
        private static final int TAMANHO_MAX_SMS = 160;
        private static final int PORTA_SMS = 8091;
        private static final String SMS_ENTREGUE = "SMS_DELIVERED";
        private static final String SMS_ENVIADO = "SMS_SENT";

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.utilitarios);
        }

        public void EnviaSms(String ntelefone,String mensagem,boolean isBinary) {

            SmsManager gestor = SmsManager.getDefault();

            PendingIntent piEnvio = PendingIntent.getBroadcast(this, 0, new Intent(SMS_ENVIADO), 0);
            PendingIntent piEntregue = PendingIntent.getBroadcast(this, 0, new Intent(SMS_ENTREGUE), 0);

            if(isBinary) {
                byte[] dados = new byte[mensagem.length()];
                for(int indice=0; indice<mensagem.length() && indice < TAMANHO_MAX_SMS; ++indice) {
                    dados[indice] = (byte)mensagem.charAt(indice);
                }
                gestor.sendDataMessage(ntelefone, null, (short) PORTA_SMS, dados, piEnvio, piEntregue);
            } else {
                int length = mensagem.length();

                if(lengthTAMANHO_MAX_SMS) {
                    ArrayList<String> messagelist = gestor.divideMessage(mensagem);
                    gestor.sendMultipartTextMessage(ntelefone, null, messagelist, null, null);
                } else {
                    gestor.sendTextMessage(ntelefone, null, mensagem, piEnvio, piEntregue);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:47:58.820

1）基本上core_sms是一个Activity，你不应该在另一个Activity中使用activity的方法。将此方法写入另一个类并相应地传递变量。恐怕这是因为您正在看到此 NPE。

2）你用小写的第一个字母写类名“core_sms”，而用大写的名字写方法名“EnviaSms”，这不遵循java命名约定，虽然它与这个问题无关，但不应该以这种方式命名. 我无权建议/要求您阅读 Java 基础知识，但仍然可以通过将代码文本/问题以适当的格式放置来对 SO 共同成员有所怜悯。

# python - Debian Wheezy 上的 flask-sqlalchemy 的怪诞内存使用和泄漏

> ID：14458816
> 
> 赞同：3
> 
> 时间：2013-01-22T12:42:08.130
> 
> 标签：python, linux, memory-leaks, sqlalchemy, flask

我正在制作一个简单的 Web 应用程序，它使用 flask-sqlalchemy 从 MySQL 数据库中提取数据（很多？目前在两个表中超过 64000 个字段并且还在增加）。我只运行了一个实例并且没有注意到任何问题，直到我用完 RAM 并且事情停止了。我意识到

我可能不得不重新考虑这整个事情是如何工作的，因为我无法继续添加 RAM（它是一个小型虚拟机，所以我从 512 MB 增加到 768 MB，但仍然如此）......但是 surly Python 应该在处理后释放内存与请求？事实上，当在我的 Windows 机器上运行相同的烧瓶应用程序时，它会占用 RAM（但只有一半！），当它完成时它会被释放。在运行许多（据说）小型应用程序的 Debian 机器上并非如此。据我所知，两台机器上运行的 lib 版本是相同的。Debian 机器甚至有比 Windows 机器更新的 Python 版本。他们都连接到同一个数据库。我该如何进行？

```
from flask import Flask, request, jsonify
from flask.ext.sqlalchemy import SQLAlchemy

import re
from datetime import datetime

app = Flask(__name__)
app.config.from_pyfile('settings.cfg')
db = SQLAlchemy(app)

class Reports(db.Model):
    __tablename__ = 'reports'

    id          = db.Column(db.Integer, primary_key=True)
    ip          = db.Column(db.Integer)
    date        = db.Column(db.DateTime)
    sid         = db.Column(db.Integer)
    version     = db.Column(db.Integer)
    itemname    = db.Column(db.String(25))
    group       = db.Column(db.Integer)
    pclass      = db.Column(db.String(15))
    ltime       = db.Column(db.Integer)
    rlen        = db.Column(db.Integer)
    total       = db.Column(db.Integer)

    def __init__(self, pd):
        self.date = datetime.utcnow()
        self.sid = pd["sid"]
        self.version = pd["version"]
        self.itemname = pd["itemname"]
        self.group = pd["group"]
        self.pclass = pd["pclass"]
        self.ltime = pd["ltime"]
        self.rlen = pd["rlen"]
        self.total = pd["total"]

class Perfdata(db.Model):
    __tablename__ = 'perfdata'

    reportid    = db.Column(db.Integer, db.ForeignKey('reports.id'), primary_key=True)
    l70 = db.Column(db.Integer)
    l65 = db.Column(db.Integer)
    l60 = db.Column(db.Integer)
    l55 = db.Column(db.Integer)
    l50 = db.Column(db.Integer)
    l45 = db.Column(db.Integer)
    l40 = db.Column(db.Integer)
    l35 = db.Column(db.Integer)
    l30 = db.Column(db.Integer)

    def __init__(self, reportid, pd):
        self.reportid = reportid
        self.l70 = pd["l70"]
        self.l65 = pd["l65"]
        self.l60 = pd["l60"]
        self.l55 = pd["l55"]
        self.l50 = pd["l50"]
        self.l45 = pd["l45"]
        self.l40 = pd["l40"]
        self.l35 = pd["l35"]
        self.l30 = pd["l30"]

    def buildlist(self):
        plist = []

        plist.append(self.l70)
        plist.append(self.l65)
        plist.append(self.l60)
        plist.append(self.l55)
        plist.append(self.l50)
        plist.append(self.l45)
        plist.append(self.l40)
        plist.append(self.l35)
        plist.append(self.l30)

        return plist

@app.route('/ps', methods=['GET'])
def perfget():

    response = []

    for report, perf in db.session.query(Reports, Perfdata).all():

        response.append("")

        response.append("%s %s %s %s %s %s %s %s" % (report.version,
                                                     report.sid,
                                                     report.itemname,
                                                     report.group,
                                                     report.pclass,
                                                     report.ltime,
                                                     report.rlen,
                                                     report.total))

        response.append("%s %s %s %s %s %s %s %s %s" % (perf.l70,
                                                     perf.l65,
                                                     perf.l60,
                                                     perf.l55,
                                                     perf.l50,
                                                     perf.l45,
                                                     perf.l40,
                                                     perf.l35,
                                                     perf.l30))

    return '<br>\n'.join(response)

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T11:07:06.263

Python 可能不知道何时释放内存，因此您可以帮助它解决问题：

```
import gc
gc.collect() 
```

# javascript - 在 JavaScript 中混淆和反混淆字符串的最简单方法

> ID：14458819
> 
> 赞同：51
> 
> 时间：2013-01-22T12:42:23.887
> 
> 标签：javascript, encryption, obfuscation

我正在寻找一种在 JavaScript 中对字符串进行混淆和反混淆的方法；我的意思是当安全不是问题时的加密和解密。理想情况下是 JS 原生的东西（比如PHP`base64_encode()`中`base64_decode()`的），可以“将字符串转换为其他内容并再次返回”，而无需编写函数。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-22T12:43:22.117

您可以使用[btoa()](https://developer.mozilla.org/En/DOM/Window.btoa)和[atob()](https://developer.mozilla.org/en/DOM/window.atob)。`btoa()`是喜欢`base64_encode()`和`atob()`喜欢`base64_decode()`。

这是一个例子：

```
btoa('Some text'); // U29tZSB0ZXh0
atob('U29tZSB0ZXh0'); // Some text 
```

请记住，**这不是一种安全的保密方式**。Base64 是一种二进制到文本的编码方案，通过将其转换为 radix-64 表示形式，以 ASCII 字符串格式表示二进制数据。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-08-01T03:15:49.353

值得注意的是

`(![]+[])[+[]]+(![]+[])[+!+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]`

评估为字符串“失败”，而不会看起来像一个字符串。说真的，将其输入节点并感到惊讶。你可以通过发疯来用 JavaScript 拼写任何东西。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-12-30T16:00:36.267

我显然为时已晚，但我只是在为这个问题寻找另一种解决方案，base64 似乎很弱。

它是这样工作的：

```
"abc;123!".obfs(13) // => "nopH>?@."
"nopH>?@.".defs(13) // => "abc;123!" 
```

[代码](https://gist.github.com/olastor/54c78a3d29c69806c57a32eff32f191a)：

```
/**
 * Obfuscate a plaintext string with a simple rotation algorithm similar to
 * the rot13 cipher.
 * @param  {[type]} key rotation index between 0 and n
 * @param  {Number} n   maximum char that will be affected by the algorithm
 * @return {[type]}     obfuscated string
 */
String.prototype.obfs = function(key, n = 126) {
  // return String itself if the given parameters are invalid
  if (!(typeof(key) === 'number' && key % 1 === 0)
    || !(typeof(key) === 'number' && key % 1 === 0)) {
    return this.toString();
  }

  var chars = this.toString().split('');

  for (var i = 0; i < chars.length; i++) {
    var c = chars[i].charCodeAt(0);

    if (c <= n) {
      chars[i] = String.fromCharCode((chars[i].charCodeAt(0) + key) % n);
    }
  }

  return chars.join('');
};

/**
 * De-obfuscate an obfuscated string with the method above.
 * @param  {[type]} key rotation index between 0 and n
 * @param  {Number} n   same number that was used for obfuscation
 * @return {[type]}     plaintext string
 */
String.prototype.defs = function(key, n = 126) {
  // return String itself if the given parameters are invalid
  if (!(typeof(key) === 'number' && key % 1 === 0)
    || !(typeof(key) === 'number' && key % 1 === 0)) {
    return this.toString();
  }

  return this.toString().obfs(n - key);
}; 
```

# validation - 至少填写一个字段时，根据需要验证一组字段

> ID：14458829
> 
> 赞同：5
> 
> 时间：2013-01-22T12:42:51.217
> 
> 标签：validation, jsf, jsf-2, primefaces, omnifaces

在基本注册屏幕（带有按钮注册记录屏幕）中有两个面板：

数据面板：

![在此处输入图像描述](../Images/ac532f3cffa195df43c320b2cbd94b7b.png)

地址面板：

![在此处输入图像描述](../Images/0924f647dac64411acdfbed8aa58f159.png)

我可以通过仅完成“数据”面板来注册。不必填写地址面板。但是，如果至少填写了地址面板的一个字段，则应要求同一面板中的所有其他字段。

![在此处输入图像描述](../Images/aa07046130cbe0a9a76185d354cd9934.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T14:34:12.580

`required`如果其他输入已提交非空值，您需要检查该属性。由于这可能会导致相当多的样板，这里是一个只有 3 个输入组件的启动示例。

```
<h:form id="form">
    <h:inputText id="input1" value="#{bean.input1}" required="#{empty param['form:input2'] and empty param['form:input3']}" />
    <h:inputText id="input2" value="#{bean.input2}" required="#{empty param['form:input1'] and empty param['form:input3']}" />
    <h:inputText id="input3" value="#{bean.input3}" required="#{empty param['form:input1'] and empty param['form:input2']}" />
</h:form> 
```

另一种方法是将组件绑定到视图并用于[`UIInput#getValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutput.html#getValue%28%29)检查先前组件的值并[`UIInput#getSubmittedValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getSubmittedValue%28%29)检查它们是否存在下一个组件（即按照它们在组件树中出现的顺序处理组件）。这样您就不需要硬编码客户端 ID。您只需要确保绑定名称不与现有托管 bean 名称冲突。

```
<h:inputText binding="#{input1}" value="#{bean.input1}" required="#{empty input2.submittedValue and empty input3.submittedValue}" />
<h:inputText binding="#{input2}" value="#{bean.input2}" required="#{empty input1.value and empty input3.submittedValue}" />
<h:inputText binding="#{input3}" value="#{bean.input3}" required="#{empty input1.value and empty input2.value}" /> 
```

你会明白，当你拥有越来越多的组件时，这会产生丑陋的样板。JSF 实用程序库[OmniFaces](http://omnifaces.org)有一个[`<o:validateAllOrNone>`](http://showcase.omnifaces.org/validators/validateAllOrNone)用于确切用途的验证器。另请参阅[现场演示](http://showcase.omnifaces.org/validators/validateAllOrNone)。根据您的问题标签，您正在使用 OmniFaces，因此您应该已经设置好了：

```
<o:validateAllOrNone components="input1 input2 input3" />
<h:inputText id="input1" value="#{bean.input1}" />
<h:inputText id="input2" value="#{bean.input2}" />
<h:inputText id="input3" value="#{bean.input3}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:54:38.540

首先，您应该向支持 bean 添加一个方法，如下所示：

```
public boolean isAddressPanelRequired() {
    // Check if at least one field is entered
    // and return true if it is and false othervise
} 
```

地址面板上的每个输入元素都应该有`required="#{backingBean.addressPanelRequired}"`

然后在处理该组件的地址面板上的每个输入组件上添加 onblur ajax 侦听器，并更新地址面板。

# c++ - 带有模板的目标文件如何链接在一起

> ID：14458830
> 
> 赞同：9
> 
> 时间：2013-01-22T12:42:52.727
> 
> 标签：c++, templates, linker

假设我们有三个`.h`文件：

`f.h`：

```
template <typename T> class Class {public: Class() {} T id(T x) { return x; }}; 
```

`g.h`：

```
template <typename T> class Class {public: Class() {} T id(T x) { return x + 100; }}; 
```

`h.h`：

```
template <typename T> class Class {public: Class(); T id(T x); }; 
```

现在，我们还有三个`.cpp`文件：

`f.cpp`：

```
#include "f.h"
int f(int x) { Class<int> t; return t.id(x); } 
```

`g.cpp`：

```
#include "g.h"
int g(int x) { Class<int> t; return t.id(x);  } 
```

`h.cpp`：

```
#include "h.h"
int h(int x) { Class<int> t; return t.id(x); } 
```

编译它们给了我们`f.o`,`g.o`和`h.o`. 现在让我们加入这个`main.cpp`：

```
#include <stdio>

extern int f(int);
extern int g(int);
extern int h(int);

int main() {
   std::cout << f(1) << std::endl;
   std::cout << g(2) << std::endl;
   std::cout << h(3) << std::endl;
} 
```

啊，让我们做吧`g++ main.cpp f.o g.o h.o`。现在来了我真正的惊喜：由于这三个`.o`文件包含三个不同的定义`int Class<int>::id(int)`，我希望得到一个链接错误。但是，我得到的是一个工作`a.out`，它打印`1 2 3`. 如果我`.o`在命令中重新排序文件，它将打印`101 102 103`.

现在是实际问题：在这种情况下，链接器究竟是如何执行链接的？它如何确定`Class<int>`要保留的实例化和丢弃的实例？为什么它不抱怨多个定义？

`nm`实用程序给出以下输出`nm f.o g.o h.o`：

```
f.o:
00000000 b .bss
00000000 d .data
00000000 t .text
00000000 t .text$_ZN5ClassIiE2idEi
00000000 t .text$_ZN5ClassIiEC1Ev
00000000 T __Z1fi
00000000 T __ZN5ClassIiE2idEi
00000000 T __ZN5ClassIiEC1Ev

g.o:
00000000 b .bss
00000000 d .data
00000000 t .text
00000000 t .text$_ZN5ClassIiE2idEi
00000000 t .text$_ZN5ClassIiEC1Ev
00000000 T __Z1gi
00000000 T __ZN5ClassIiE2idEi
00000000 T __ZN5ClassIiEC1Ev

h.o:
00000000 b .bss
00000000 d .data
00000000 d .eh_frame
00000000 t .text
00000000 T __Z1hi
         U __ZN5ClassIiE2idEi
         U __ZN5ClassIiEC1Ev 
```

很明显，`f.o`导出`g.o`符号`__ZN5ClassIiE2idEi`和`h.o`导入这个符号（大写字母表示外部链接）。它不会导致任何错误。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:11:11.300

这个问题实际上是众所周知的：您违反了 ODR。由于模板的性质，编译器和链接器不会注意到这一点。会发生以下情况：

链接器*假定*ODR 没有被违反，因此可以自由使用模板的任何实例化（又名。具有相同参数的模板的所有实例化都会生成完全相同的代码）。只要您不违反 ODR，该系统就有意义。

现在，在您的情况下，链接器选择使用它获得的第一个实例化，这导致结果取决于链接的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:15:33.743

听起来太明显了，但是您的班级正在使用隐式内联。也就是说，当您将源代码放在类声明中时，您就是在“暗示”您希望它内联。所以...

链接器将看到的唯一内容是 f()、g() 和 h()。

用这样的东西重试你的代码可能会很有趣，尽管它仍然很简单，编译器可能仍然只是内联它（取决于你的编译器）。

```
template <typename T> class Class 
{
public: 
     Class() {}
T id(T x);
};

template <typename T> 
T Class::id(T x)
{ 
   return x; 
} 
```

# python - 扭曲的客户端内存泄漏

> ID：14458834
> 
> 赞同：1
> 
> 时间：2013-01-22T12:43:06.900
> 
> 标签：python, twisted

我有一个 Twisted 客户端应用程序，每分钟可以建立数百个连接。我发现我的应用程序存在内存泄漏，我几乎可以肯定这与永远不会删除的 ClientFactory() 派生类有关。

我通过修改 Twisted 文档中的 Echo 客户端示例重现了该问题：

```
from twisted.internet.protocol import Protocol, ClientFactory
from twisted.internet import reactor
from twisted.internet.task import LoopingCall

from sys import stdout

class Echo(Protocol):
    def connectionMade(self):
        print 'MADE'
        self.transport.write('XXXX')

    def dataReceived(self, data):
        print 'RECV', data
        self.transport.loseConnection()

    def __del__(self):
        print 'DEL PROTOCOL'

class EchoClientFactory(ClientFactory):
    def startedConnecting(self, connector):
        print 'Started to connect.'

    def buildProtocol(self, addr):
        print 'Connected.'
        return Echo()

    def clientConnectionLost(self, connector, reason):
        print 'Lost connection.  Reason:', reason

    def clientConnectionFailed(self, connector, reason):
        print 'Connection failed. Reason:', reason

    def __del__(self):
        print 'DEL FACTORY'

def connector():
    print 'CONNECTOR'
    factory = EchoClientFactory()
    reactor.connectTCP('localhost', 7, factory)

#reactor.callLater(2, connector)
register_loop = LoopingCall(connector)
register_loop.start(1)

reactor.run() 
```

使用此代码，我发现 EchoClientFactory() 的实例仅在程序关闭时才被删除。连接完成时不会删除它们。如果我需要做一些事情来删除工厂实例，我还没有在文档中找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:53:35.013

向协议和工厂添加`__del__`方法会使它们无法收集。查看`gc.garbage`列表。在这个例子中，这个列表将永远增长。如果您删除这些`__del__`方法，问题就会消失。在我的 64 位 Ubuntu 12.04 机器上，该客户端的常驻内存使用量稳定在 13MB。

# javascript - jquery，如果 html 父类中的类被激活

> ID：14458836
> 
> 赞同：0
> 
> 时间：2013-01-22T12:43:08.270
> 
> 标签：javascript, jquery, html, css

我试过了，但我没有得到结果。我只是在这里提出我的想法

html

```
<html>
  <div>
    <div class="spinner">
    </div>
  </div>
</html> 
```

jQuery

```
if (".spinner"){
this.parent.addClass()
}
else {
this.parent. removeClass() } 
```

我想要的是，如果在 html 代码中添加微调器类，微调器父类会添加一些 css 样式。如果微调器类从 html 中删除，微调器父类已经脱离了我们添加的内容。我该怎么做？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:48:07.867

几个问题。

首先，将您的 div 更改为 Spinner**类，如下所示：**

```
<div class="spinner"> 
```

然后，将您的 jQuery 从引用`this`（JavaScript 对象）更改为`$(this)`（jQuery 对象），如下所示：

```
if (!$(this).hasClass("spinner")){
    $(this).addClass("spinner"));
}
else {
    $(this).removeClass("spinner"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:00:39.213

HTML：

```
<div>
<div class="spinner">
</div> 
```

功能：

```
function updateSpinnerParent(){
    var ref = $(".spinner"),
    cls = "hello";

    if(ref.length > 0){
      // element(s) with class 'spinner' is present
      ref.parent().addClass(cls);
    }else{
      // element(s) with class 'spinner' is not present
      ref.parent().removeClass(cls);
    }
} 
```

每当您想更新父元素时调用该函数：

```
updateSpinnerParent(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:47:24.983

尝试这个...

```
var spDiv = $(".spinner");
if (spDiv){
    spDiv.parent().addClass("spinner");
}else {
    spDiv.parent().removeClass("spinner"); 
} 
```

问候。

# tsql - SQL查询将连续范围的数字分组到不同的分组集中

> ID：14458837
> 
> 赞同：2
> 
> 时间：2013-01-22T12:43:10.793
> 
> 标签：tsql, sql-server-2005, gaps-and-islands

我有一张大约超过一百万条记录的表。下面给出了几个示例值：

```
Group    MemberNo
ABC           100
ABC           101
ABC           200
ABC           201
ABC           202
ABC           203
XYZ           100
XYZ           101
ABC           204
XYZ           301
XYZ           302
ABC           500
ABC           600 
```

我希望将具有相同组的连续值范围分组为这样的集合：

```
Group  FromMemberNo      ToMemberNo
ABC             100             101
ABC             200             204
XYZ             100             101
XYZ             301             302
ABC             500             500
ABC             600             600 
```

请从上表中看到，由于 100 和 101 是连续的，因此它已被分组为一条记录 ABC 100 到 101。我已经尝试过[这个](https://stackoverflow.com/questions/5662545/how-do-i-group-on-continuous-ranges)线程并且对我来说工作正常。但这比预期花费了相当长的时间。
请帮助我实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:43:13.480

另一种解决方案。我可以了解性能，但似乎可以完成工作（仅限 sql 2012）

```
declare @t table (g varchar(3), mn int)

insert into @t values 
('ABC',           100),
('ABC',           101),
('ABC',           200),
('ABC',           201),
('ABC',           202),
('ABC',           203),
('XYZ',           100),
('XYZ',           101),
('ABC',           204),
('XYZ',           301),
('XYZ',           302),
('ABC',           500),
('ABC',           600),
('XYZ',           400);

with ctet as (
    select 
        row_number() over (order by g, mn) rn,
        *, 
        case when lag(mn, 1) over (order by g, mn) <> mn - 1 then 1 else 0 end as d 
    from 
        @t
)

select g, min(mn), max(mn)
from
    (
    select 
        *,
        (select sum(d) from ctet vv where vv.rn <= ctet.rn) s
    from 
        ctet
    ) v
group by g, s 
```

我很确定有滞后或领先的更智能的解决方案，但我找不到。

===== 编辑 =====

finally 也适用于 2005 年

```
 with ctet as (
    select 
        row_number() over (order by t.g, t.mn) rn,
        t.*, 
        case when tt.g is null then 1 else 0 end as d
    from 
        @t t
        left join @t tt on t.g = tt.g and t.mn = tt.mn + 1
) 
```

# django - 带有 S3 的 django 存储，向客户端提供完整或相对 URL？

> ID：14458850
> 
> 赞同：2
> 
> 时间：2013-01-22T12:43:41.527
> 
> 标签：django, amazon-s3

我对 S3 的理解是

您不希望您的客户端访问您的服务器，然后通过 urls.py 访问 s3。您的客户最好直接从 s3 获取文件（图像）。
因此，您需要将整个 url（image_field.url）而不是相对路径（image_field.name 或类似）返回给您的客户端使用。
但是，如果您从 S3 转移到其他服务怎么办？

假设您以后可能想从 amazon S3 切换到其他东西，将整个 URL 返回给客户端将是一种好的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:13:07.900

`MEDIA_URL`是`BASE_URL`您所有上传的资产的。默认情况下，Django 在数据库中存储上传文件的相对路径。

[如果使用 S3](https://github.com/kylemacfarlane/django-cuddlybuddly-storage-s3)，`MEDIA_URL`应设置为您的存储桶 URL，例如[http://yourbucket.s3.amazonaws.com/](http://yourbucket.s3.amazonaws.com/)。

如果您移至其他服务，则可以更改`MEDIA_URL`设置。应该就是这么简单。

# java - Android URL 编码

> ID：14458853
> 
> 赞同：0
> 
> 时间：2013-01-22T12:43:47.730
> 
> 标签：java, android, url

我正在使用以下代码来阅读网页内容：

```
 String website="";
    try {
        website = URLEncoder.encode(arg0[0],"UTF-8");
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
      Document doc;
    try {
           doc = Jsoup.connect(website).get();
           Elements el=doc.getElementsByClass("header");
           Elements atr= doc.select("p span");
           for(Element s:atr)
           ss+="\n"+s.text();
           text=el.text();
        TextView   t1=(TextView)findViewById(R.id.titlenews1);
        TextView  t2=(TextView)findViewById(R.id.body);
           t1.setText(text);
           t2.setText(ss);
    } catch (Exception e) {
        // TODO Auto-generated catch block

    } 
```

如果我将 URL 直接放在`website="http://www.mcpss.com/?PN='News2'&SubP='DNewsStory'&gn=&NewsID=47318&ShowNav=&StoryGroup=Current"` 我正在获取文档中。

如果我通过解析 XML 文件传递​​ URL，我将无法获取文档（我遇到异常）

我该怎么做，有任何 URL 编码技术来获取文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-18T07:37:44.237

试试这个代码：

```
String encodedUrl = URLEncoder.encode(url); 
```

解码

```
String decodedUrl = URLDecoder.decode(encodedUrl) 
```

# joomla2.5 - scape值查询

> ID：14458863
> 
> 赞同：-2
> 
> 时间：2013-01-22T12:44:18.763
> 
> 标签：joomla2.5

大家好，我的 getListQuery() 方法中的每个人都有这个查询 en SQL 错误，因为我不知道如何转义 $language 值

```
$query->from('`#__noticias` AS a');
$query->where('( a.idioma LIKE '.$language.' )'); 
```

我想得到这个。

```
$query->from('`#__noticias` AS a');
$query->where('( a.idioma LIKE "es-ES" )'); 
```

任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:15:38.657

做吧

```
 $lan = $db->Quote('%'.$db->escape($language, true).'%'); 
```

最后

```
 $db = $this->getDbo();
    $query = $db->getQuery(true);
    $language =& JFactory::getLanguage()->getTag();
    $lan = $db->Quote('%'.$db->escape($language, true).'%');

    // Select the required fields from the table.
    $query->select(
            $this->getState(
                    'list.select', 'a.*'
            )
    );

    $query->from('`#__noticias` AS a');
    $query->where('( a.idioma LIKE '.$lan.' )'); 
```

# c++ - Visual Studio 2012 因断点而崩溃

> ID：14458865
> 
> 赞同：5
> 
> 时间：2013-01-22T12:44:25.783
> 
> 标签：c++, visual-studio-2012

这刚刚开始发生。我试过修复 Visual Studio，但它不起作用。每当我尝试使用断点进行调试时，Visual Studio 都会崩溃。我尝试使用全新的解决方案并使用`devenv.exe /resetuserdata`. “加载 msvcr110d.dll 的符号”时似乎崩溃了。没有断点的调试（这是相当无用的）似乎工作得很好。

我还尝试以管理员身份运行 Visual Studio。

调试 C# 项目也可以正常工作（断点和所有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-27T19:46:26.730

尝试启用本机编辑并继续（选项 -> 调试 -> 编辑并继续 -> 启用本机编辑并继续）

# silverlight - 使用布尔转换器的自定义组合过滤器

> ID：14458871
> 
> 赞同：0
> 
> 时间：2013-01-22T12:44:57.703
> 
> 标签：silverlight, infragistics

我正在使用 Infragistics XamGrid，我有一个模板列，我绑定到一个布尔值，然后我使用转换器显示基于值的字符串（例如 True = "Dog"，False="Cat"）。

我想要的是能够在过滤器中使用组合框并选择 Dog 或 Cat 并过滤我的网格......但我不知道从哪里开始。我必须将组合框设置为具有 SelectionChanged 事件等的自定义过滤器，但不知道从哪里开始。

任何建议或正确方向的观点将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:37:26.467

在 SelectionChanged 事件中，根据他们是从组合框中选择了 Dog 还是 Cat，您可以通过编程方式将过滤器添加到列中以判断 true 或 false。 [http://help.infragistics.com/NetAdvantage/WPF/2012.2/CLR4.0/?page=xamGrid_Programmatically_Create_a_Filter.html](http://help.infragistics.com/NetAdvantage/WPF/2012.2/CLR4.0/?page=xamGrid_Programmatically_Create_a_Filter.html)

确保对 FilteringOperand 属性使用 EqualsOperand。您也可以使用 TextColumn 而不是 TemplateColumn 并使用 TextColumn 的 ValueConverter 来避免创建自己的模板。

# git - 在 Cloud9 (c9.io) IDE 上从 GitHub 运行 HTML/PHP/JS 项目

> ID：14458880
> 
> 赞同：2
> 
> 时间：2013-01-22T12:45:19.013
> 
> 标签：git, github, cloud9-ide

一般来说，我对 Git 和 Github 比较陌生，但是我可以看到，使用 c9 可以通过以下过程提供所述 repo 的 URL 来克隆 github repo：

1.  在仪表板上单击“创建工作区”
2.  选择“从 URL 克隆”
3.  输入网址（即[https://github.com/u2sonderzug/hybridauth.git](https://github.com/u2sonderzug/hybridauth.git)）

但是，在这个阶段我没有“得到”的是，我将如何实际查看我在 Web 浏览器中编辑的内容的更改？假设我编辑了一个名为 helloworld.htm 的页面。我如何在网络浏览器中实际提取它，因为它似乎没有坐在网络服务器上？

我想我错过了一些基本的东西。我通常只使用 sftp 连接到我在 github 上的 Web 服务器，我会在 /www/example.com/file.htm 目录中编辑一些内容，然后只需在 Web 浏览器中查看 www.example.com/file.htm .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T04:07:42.077

您需要在项目中打开一个 php 文件，然后单击运行按钮。这将启动一个带有如下 URL 的 apache 服务器：`http://<workspacename>.<c9usernamer>.c9.io` 完成后，您可以导航到项目中的 HTML 文件。

使用复杂的 PHP 框架很难在 C9 上运行。我已经将它用于 ZendFramework 项目，但我使用了 FTP 工作区，所以我只在 C9 上进行编辑，但在我自己的服务器上运行。

有一些关于让 wordpress 在 C9 上运行的文档：[https](https://docs.c9.io/running_wordpress_on_cloud9.html) ://docs.c9.io/running_wordpress_on_cloud9.html 。

就javascript而言，我已经在C9上运行了nodejs和meteor项目。我遇到的唯一问题是工作空间的 1GB 限制，但是通过一些计划很容易解决这个问题。

此外，多个 javascript 文件（客户端代码）非常适合代码完成等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T20:34:30.387

我建议使用[Heroku](http://www.heroku.com)来部署您的 PHP 应用程序。它直接集成到 c9 中。我使用 c9.io 和 Heroku 快速开发和部署应用程序。转到c9中的部署选项卡，登录Heroku，添加部署服务器并单击部署。Heroku 将自动检测它是一个 PHP 应用程序并为您设置服务器。

如果您想看看我在 heroku 和 c9.io 上制作的 PHP/JS/HTML 应用程序，请访问：http: [//gasbro.herokuapp.com](http://gasbro.herokuapp.com)

# mysql - 如何解决一般错误：2014 在其他无缓冲查询处于活动状态时无法执行查询。使用 PDO 连接

> ID：14458883
> 
> 赞同：3
> 
> 时间：2013-01-22T12:45:25.127
> 
> 标签：mysql, pdo

当我使用相同的连接语句（使用 PDO）执行第二个存储过程时，出现以下错误。

=================================================

SQLSTATE[HY000]：一般错误：2014 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

==================================================== =====

这是我在drupal中的代码

```
$conn->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true);

$statement = $conn->prepare("CALL Odd_Get_Sport()");
$exec_result = $statement->execute();
while ($row = $statement->fetchObject()) {   
  print_r($row);
}

$statement ->closeCursor();

$statement1 = $conn->prepare("CALL Odd_Get_Sport()");
$exec_result1 = $statement1->execute();
while ($row1 = $statement1->fetchObject()) {   
   print_r($row1);
} 
```

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T22:54:37.843

这是 PDO 的一个不好的特性，没有很好的文档记录。当语句执行了存储过程时，closeCursor 方法不起作用。您需要使用 nextRowSet 方法。这是我使用的

```
 while($sth->nextRowSet())
        {
            $sth->fetchAll();
        }
        $sth->closeCursor(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-08T11:30:51.383

只需在每次准备之前将其设置为 null

```
$statement1=null;
$statement1 = $conn->prepare("CALL Odd_Get_Sport()");
$exec_result1 = $statement1->execute();
while ($row1 = $statement1->fetchObject()) {   
   print_r($row1);
}

$statement1=null;
$statement1 = $conn->prepare("CALL Another()");
$exec_result1 = $statement1->execute();
while ($row1 = $statement1->fetchObject()) {   
   print_r($row1);
}

$statement1=null;
$statement1 = $conn->prepare("SELECT * FROM test");
$exec_result1 = $statement1->execute();
while ($row1 = $statement1->fetchObject()) {   
   print_r($row1);
} 
```

# google-maps - 计算要在 MapRect 中显示的图块以在 iPad 中显示总世界地图

> ID：14458885
> 
> 赞同：0
> 
> 时间：2013-01-22T12:45:31.577
> 
> 标签：google-maps, ios6, mkoverlay

我正在开发一个应用程序，该应用程序使用 MKOverlay 视图将我自己的自定义地图分层到 Google 基础地图之上。但它显示地图如下：

![在此处输入图像描述](../Images/0e656a833e9fa245ec3651d274153d77.png)

但我必须显示如下所示的地图：

![在此处输入图像描述](../Images/20105259cd026dd6f566cac3f1337549.png)

我的代码如下：

```
- (NSArray *)tilesInMapRect:(MKMapRect)rect zoomScale:(MKZoomScale)scale
{

    NSInteger z = zoomScaleToZoomLevel(scale);

    NSInteger minX = floor((MKMapRectGetMinX(rect) * scale) / TILE_SIZE);
    NSInteger maxX = floor((MKMapRectGetMaxX(rect) * scale) / TILE_SIZE);
    NSInteger minY = floor((MKMapRectGetMinY(rect) * scale) / TILE_SIZE);
    NSInteger maxY = floor((MKMapRectGetMaxY(rect) * scale) / TILE_SIZE);

    NSMutableArray *tiles = nil;

    NSInteger tilesAtZ = pow(2, z);
  //  NSLog(@"max x and max y is:::%d %d",maxX,maxY);

    for (NSInteger x = minX; x <maxX; x++) {
        for (NSInteger y = minY; y <maxY; y++) {
            // OSM
            //NSString *tileKey = [[NSString alloc] initWithFormat:@"%d/%d/%d", z, x, y]; // was flippedY
          //   NSInteger flippedY = abs(y + 1 - tilesAtZ);

            // Google maps
            NSString *tileKey = [[NSString alloc] initWithFormat:@"x=%d&y=%d&z=%d", x, y, z];

//            NSString *tileKey = [[NSString alloc]
//                                 initWithFormat:@"x=%d&y=%d&z=%d", x, flippedY, z];

            if (!tiles) {
                tiles = [NSMutableArray array];
            }

           NSLog(@"x y and z are:::%d %d %d",x,y,z);

            MKMapRect frame = MKMapRectMake((double)(x * TILE_SIZE) / scale,
                                            (double)(y * TILE_SIZE) / scale,
                                            TILE_SIZE/scale,
                                            TILE_SIZE/scale);
//            NSLog(@"frame is::%f %f %f %f",(double)(x * TILE_SIZE) / scale,(double)(y * TILE_SIZE) / scale, TILE_SIZE / scale, TILE_SIZE / scale);

            ImageTile *tile = [[ImageTile alloc] initWithFrame:frame path:tileKey];
            [tiles addObject:tile];
            [tile release];
            [tileKey release];
        }
    }
   // NSLog(@"tiles are ::%@",tiles);
    return tiles;
} 
```

请帮我得到我需要的输出。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T19:47:57.770

您只需将初始区域设置为世界（常量 MKMapRectWorld），如下所示：

```
MKCoordinateRegion worldRegion = MKCoordinateRegionForMapRect(MKMapRectWorld);
map.region = worldRegion; 
```

通常将此代码放置在 viewDidLoad: 中，您可以在其中初始化 MKMapView。

# android - 安卓列表视图

> ID：14458887
> 
> 赞同：0
> 
> 时间：2013-01-22T12:45:39.600
> 
> 标签：android, android-listview, android-arrayadapter

我正在检索数据（用户信息），并从一个`HashMap`到`ArrayAdpater`（在列表视图中）显示它。每当我在列表视图上单击（甚至滚动）时，我的应用程序都会崩溃。

知道为什么会这样吗？这就是我正在做的事情：

```
//..
  Handler handler = new Handler();
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_app_activity3);
    information=new String[50];
    Intent intent = getIntent();
    Custom custom = (Custom) intent.getSerializableExtra("custom");
    HashMap<String, String> list = custom.getList();
    //Set s = list.entrySet();
    Iterator items=list.values().iterator();
    int i=0;
    while (items.hasNext())
    {
        information[i]=(String) items.next();
        System.out.println(information[i]);
        i++;
    }
    lv = (ListView)findViewById(R.id.listview1);
    lv.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,information));
    lv.setTextFilterEnabled(true); 
} 
```

* * *

这是我的Logcat：

system.NativeStart.main(Native Method) 01-22 22:45:22.496: I/Process(332): 发送信号。PID：332 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:23:22.703

```
ListView lv = (listView) findViewById(R.Id.listView1); 
```

进一步定义您的 ListView。

# ruby-on-rails - Rails 模板？

> ID：14458889
> 
> 赞同：0
> 
> 时间：2013-01-22T12:45:49.510
> 
> 标签：ruby-on-rails, template-engine

我想获得一些关于 Rails 模板的专业意见。

现在我们正在构建应用程序并使用许多模板助手来渲染我们的视图，并且很多代码看起来像这样：

```
content_tag(:div, link_to(image_tag('/'), 'url', :target => '_blank', :rel => 'nofollow'), :class => 'fancy-class') 
```

与其他人交谈时，他们说他们编写这样的 html 非常好，但对我来说，这似乎是几年前的做法。（我没有写任何后端，主要使用前端的东西，我来自 asp.net/php/node.js）

这真的是“好的做法”/“rails 方式”吗？来自任何其他语言，我想只是控制器需要主要格式化数据，然后你只需将简单的 html 标签写入视图文件，用变量名填充它们，这些变量名已经分配给它们。

或者这只是它在rails中的工作方式并且完全正常？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T02:15:59.947

我认为 Rails 的方式是在您从辅助方法或演示器中构建 HTML 时使用标签助手。它们不应该出现在您的部分中。预期用途是制作一个输出标签的语义命名助手。这个助手接收选项。您希望将这些选项与一些默认值合并，并在输出之前配置标签。标签助手让您将您的选项哈希合并在一起并将其全部发送到 content_tag，而不是自己处理所有这些选项。您不应该像在 PHP 或 JS 中构建 DOM 文档那样使用它们。

# c# - 将 Double.NaN 与自身进行比较

> ID：14458890
> 
> 赞同：40
> 
> 时间：2013-01-22T12:45:49.943
> 
> 标签：c#, .net, double, nan

我一直试图找出这两个操作返回不同值的原因：

1.  `Double.NaN == Double.NaN`返回`false`
2.  `Double.NaN.Equals(Double.NaN)` 返回`true`

我有第一部分的[答案](https://stackoverflow.com/questions/1145443/why-is-double-nan-not-equal-to-itself)，但没有第二部分的答案，也没有“为什么这两个比较返回不同的值”的答案

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-22T13:00:18.330

造成这种差异的原因很简单，即使不是很明显。

如果您使用相等运算符`==`，那么您正在使用 IEEE 相等性测试。

如果您使用该`Equals(object)`方法，那么您必须维护`object.Equals(object)`. 当您实现此方法（以及相应的`GetHashCode`方法）时，您必须维护该合同，这与 IEEE 行为不同。

如果`Equals`不遵守合同，那么哈希表的行为就会中断。

```
var map = new Dictionary<double,string>();
map[double.NaN] = "NaN";
var s = map[double.NaN]; 
```

如果`!double.NaN.Equals(double.NaN)`，你永远不会从字典中得到你的价值！

如果前面的句子没有意义，那么请理解散列机制（用于`Dictionary<T,U>`,`HashSet<T>`等）广泛使用`object.Equals(object)`和`object.GetHashCode()`方法，并依赖于对其行为的保证。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-22T12:50:04.693

在备注部分的最底部`Double.Equals`，您会发现：

> 如果通过调用 Equals 方法测试两个 Double.NaN 值是否相等，则该方法返回 true。但是，如果使用相等运算符测试两个 NaN 值是否相等，则运算符返回 false。当您想要确定 Double 的值是否不是数字 (NaN) 时，另一种方法是调用 IsNaN 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T12:52:45.437

如果你检查 Double.NaN;

```
 // Summary:
    //     Represents a value that is not a number (NaN). This field is constant.
    public const double NaN = 0.0 / 0.0; 
```

第一个返回 false 因为 NaN 不代表任何数字。

> 当操作的结果未定义时，方法或运算符返回 NaN。例如，零除以零的结果是 NaN

第二个返回 true，因为在重载方法`NaN`中显式实现了相等。`equals`

来自[msdn double.equals](http://msdn.microsoft.com/en-us/library/ya2zha7s.aspx)：

> 如果通过调用 Equals 方法测试两个 Double.NaN 值是否相等，则该方法返回 true。但是，如果使用相等运算符测试两个 NaN 值是否相等，则运算符返回 false。当您想要确定 Double 的值是否不是数字 (NaN) 时，另一种方法是调用 IsNaN 方法。

故意这样做是为了符合`IEC 60559:1989`;

> 根据 IEC 60559:1989，具有 NaN 值的两个浮点数永远不会相等。但是，根据 System.Object::Equals 方法的规范，最好覆盖此方法以提供值相等语义。由于 System.ValueType 通过使用反射来提供此功能，因此 Object.Equals 的描述明确指出，值类型应考虑覆盖默认的 ValueType 实现以提高性能。事实上，通过查看 System.ValueType::Equals 的来源（SSCLI 中 clr\src\BCL\System\ValueType.cs 的第 36 行），CLR Perf 团队甚至对 System.ValueType 的效果发表了评论::等于不快。

参考：http: [//blogs.msdn.com/b/shawnfa/archive/2004/07/19/187792.aspx](http://blogs.msdn.com/b/shawnfa/archive/2004/07/19/187792.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T12:59:15.350

好吧，[Oded 的回答](https://stackoverflow.com/a/14458975/447156)很好，但我想说点什么；

当我反编译`Double.Equals()`方法时，它看起来像这样；

```
public bool Equals(double obj)
{
    return ((obj == this) || (IsNaN(obj) && IsNaN(this)));
} 
```

所以既然我们有*this = Double.NaN*和*obj = Double.NaN*

```
(IsNaN(obj)) and (IsNaN(this)) returns `true`. 
```

所以基本上可以`return ((obj == this) || true`

这相当于

`return ((obj == this)`是`true`。

# internet-explorer - Dojo dijit.form.FilteringSelect 不在 IE8 中设置值

> ID：14458894
> 
> 赞同：0
> 
> 时间：2013-01-22T12:46:01.663
> 
> 标签：internet-explorer, select, dojo

在 Dojo dijit.form.FilteringSelect 小部件上执行以下代码时，我遇到了 IE8 问题。执行以下代码时我没有收到错误消息，它只是没有设置值。它适用于 Chrome 和 Firefox，但当然不适用于 IE8。任何想法如何解决这个问题？

dijit.byId("tracking_system_select_id").set("value", 7);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:27:46.970

我知道 Dojo Selects 不适用于数值：

> 为获得最佳结果，仅将 dijit/form/Select 与项目标识为字符串的商店一起使用。

[http://dojotoolkit.org/documentation/tutorials/1.8/selects_using_stores/](http://dojotoolkit.org/documentation/tutorials/1.8/selects_using_stores/)

我不知道 FilteringSelect 是否有同样的限制，但这可能是值得尝试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:31:25.177

好的，所以现在我调用以下命令来设置值，我将它从 7 更改为“7”：

```
dijit.byId("tracking_system_select_id").set("value", "7"); 
```

然后我调用以下命令来测试什么是值：

```
console.log("Main.trackingSystemId: " + dijit.byId("tracking_system_select_id").get("value"));
                        console.log("Main.trackingSystem: " + dijit.byId('tracking_system_select_id').attr('displayedValue'));

var test = dijit.byId('tracking_system_select_id').get('value');
if (typeof test === 'string'){
    console.log('typeof string');
} else if (typeof(test === 'number')){
    console.log('typeof number');
} else {
    console.log('typeof unknown');
} 
```

收到的日志条目是：

LOG: Main.trackingSystemId:
LOG: Main.trackingSystem:
LOG: typeof string

我还在 FilteringSelect 的创建中添加了 .startup()。从数字标识符更改为字符串标识符没有任何区别。数据存储中的标识符值也是字符串，所以我没有字符串到数字的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:33:38.343

OK, so here is what I found. I tried creating a dijit.form.FilteringSelect box and setting its default value at the time of creation and it works in Firefox and Chrome, but once again not in IE8 or IE9\. I'm going to give up and accept that it doesn't work in IE.

Would be nice if Dojo fixed this.

# php - For循环问题中的PHP字符迭代

> ID：14458896
> 
> 赞同：36
> 
> 时间：2013-01-22T12:46:10.487
> 
> 标签：php, for-loop

> **可能重复：**
> [为什么这段代码不简单地打印字母 A 到 Z？](https://stackoverflow.com/questions/4098345/why-doesnt-this-code-simply-print-letters-a-to-z)

为什么当我使用以下循环结构时，我得到了正确的结果 -

```
for ($c = "A"; $c <= "Y"; $c++)
{
    echo $c.", ";
} 
```

我得到的结果是——

> A，B，C，D，E，F，G，H，I，J，K，L，M，N，O，P，Q，R，S，T，U，V，W，X，Y，

这似乎没问题。但是当我在上面的 for 循环中替换为时，我得到了不寻常的`Y`结果`Z`

```
for ($c = "A"; $c <= "Z"; $c++)
{
    echo $c.", ";
} 
```

我得到的结果是——

> A，B，C，D，E，F，G，H，I，J，K，L，M，N，O，P，Q，R，S，T，U，V，W，X，Y， Z，AA，AB，AC，AD，AE，AF，AG，AH，AI，AJ，AK，AL，AM，AN，AO，AP，AQ，AR，AS，AT，AU，AV，AW，AX， AY，AZ，BA，BB，BC，BD，BE，BF，BG，BH，BI，BJ，BK，BL，BM，BN，BO，BP，BQ，BR，BS，BT，BU，BV，BW， BX、BY、BZ、CA、CB、CC、CD、CE、CF、CG、CH、CI、CJ、CK、CL、CM、CN、CO、CP、CQ、CR、CS、CT、CU、CV、 CW，CX，CY，CZ，DA，DB，DC，DD，DE，DF，DG，DH，DI，DJ，DK，DL，DM，DN，DO，DP，DQ，DR，DS，DT，DU， DV，DW，DX，DY，DZ，EA，EB，EC，ED，EE，EF，EG，EH，EI，EJ，EK，E​​L，EM，EN，EO，EP，EQ，ER，ES，ET，欧盟，EV，EW，EX，EY，EZ，FA，FB，FC，FD，FE，FF，FG，FH，FI，FJ，FK，FL，FM，FN，FO，FP，FQ，FR，FS， FT、FU、FV、FW、FX、FY、FZ、GA、GB、GC、GD、GE、GF、GG、GH、GI、GJ、GK、GL、GM、GN、GO、GP、GQ、GR、 GS，GT，GU，GV，GW，GX，GY，GZ，HA，HB，HC，HD，HE，HF，HG，HH，HI，HJ，HK，HL，HM，HN，HO，HP，HQ，HR，HS，HT，HU，HV，HW，HX，HY，HZ，IA，IB，IC，ID，IE，IF，IG，IH，II，IJ，IK，IL， IM，IN，IO，IP，IQ，IR，IS，IT，IU，IV，IW，IX，IY，IZ，JA，JB，JC，JD，JE，JF，JG，JH，JI，JJ，JK， JL，JM，JN，JO，JP，JQ，JR，JS，JT，JU，JV，JW，JX，JY，JZ，KA，KB，KC，KD，KE，KF，KG，KH，KI，KJ， KK，KL，KM，KN，KO，KP，KQ，KR，KS，KT，KU，KV，KW，KX，KY，KZ，LA，LB，LC，LD，LE，LF，LG，LH，LI， LJ，LK，LL，LM，LN，LO，LP，LQ，LR，LS，LT，LU，LV，LW，LX，LY，LZ，MA，MB，MC，MD，ME，MF，MG，MH， MI，MJ，MK，ML，MM，MN，MO，MP，MQ，MR，MS，MT，MU，MV，MW，MX，MY，MZ，NA，NB，NC，ND，NE，NF，NG， NH，NI，NJ，NK，NL，NM，NN，NO，NP，NQ，NR，NS，NT，NU，NV，NW，NX，NY，NZ，OA，OB，OC，OD，OE，OF， OG，哦，OI，OJ，OK，OL，OM，ON，OO，OP，OQ，OR，OS，OT，OU，OV，OW，OX，OY，OZ，PA，PB，PC，PD，PE， PF，PG，PH，PI，PJ，PK，PL，PM，PN，PO，PP，PQ​​，PR，PS，PT，PU、PV、PW、PX、PY、PZ、QA、QB、QC、QD、QE、QF、QG、QH、QI、QJ、QK、QL、QM、QN、QO、QP、QQ、QR、QS、 QT，QU，QV，QW，QX，QY，QZ，RA，RB，RC，RD，RE，RF，RG，RH，RI，RJ，RK，RL，RM，RN，RO，RP，RQ，RR， RS，RT，RU，RV，RW，RX，RY，RZ，SA，SB，SC，SD，SE，SF，SG，SH，SI，SJ，SK，SL，SM，SN，SO，SP，SQ， SR，SS，ST，SU，SV，SW，SX，SY，SZ，TA，TB，TC，TD，TE，TF，TG，TH，TI，TJ，TK，TL，TM，TN，TO，TP， TQ，TR，TS，TT，TU，TV，TW，TX，TY，TZ，UA，UB，UC，UD，UE，UF，UG，UH，UI，UJ，UK，UL，UM，UN，UO， UP，UQ，UR，US，UT，UU，UV，UW，UX，UY，UZ，VA，VB，VC，VD，VE，VF，VG，VH，VI，VJ，VK，VL，VM，VN， VO，VP，VQ，VR，VS，VT，VU，VV，VW，VX，VY，VZ，WA，WB，WC，WD，WE，WF，WG，WH，WI，WJ，WK，WL，WM， WN，WO，WP，WQ，WR，WS，WT，WU，WV，WW，WX，WY，WZ，XA，XB，XC，XD，XE，XF，XG，XH，XI，XJ，XK，XL， XM, XN, XO, XP, XQ, XR, XS, XT, XU, XV, XW, XX, XY, XZ, YA,YB，YC，YD，YE，YF，YG，YH，YI，YJ，YK，YL，YM，YN，YO，YP，YQ，YR，YS，YT，YU，YV，YW，YX，YY，YZ，

这种行为有什么原因吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-22T12:49:30.343

直接来自[PHP 手册](http://www.php.net/manual/en/language.operators.increment.php)：

> PHP 在处理字符变量而不是 C 的算术运算时遵循 Perl 的约定。例如，在 PHP 和 Perl 中 $a = 'Z'; $a++; 将 $a 变成 'AA'，而在 C 中 a = 'Z'; 一个++；将 a 转换为 '['（'Z' 的 ASCII 值是 90，'[' 的 ASCII 值是 91）。请注意，字符变量可以递增但不能递减，即使如此，也仅支持纯 ASCII 字符（az 和 AZ）。增加/减少其他字符变量没有效果，原字符串不变。

它继续运行的原因是因为您正在尝试进行数值比较（`<=`和`AA < Z`，`ZA == Z`（在执行时`<=`））而不是文字值比较（`==`）。

鉴于此，您可以使用以下代码：

```
for ($c = "A"; $c != "Z"; $c++)
{
    echo $c . ", ";
} 
```

..或使用字符的实际序数值（我认为这是更好的解决方案）：

```
for ($c = ord("A"); $c <= ord("Z"); $c++)
{
    echo chr($c) . ", ";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T12:54:30.597

递增字符时不要使用 < 或 >（或 >= 或 <=）进行比较，使用 !==

```
for ($c = "A"; $c !== "AA"; $c++)
{
    echo $c.", ";
} 
```

其中“AA”比您想要的端点“高一个”

```
$lastCharacter = 'Z';
$lastCharacter++;
for ($c = "A"; $c !== $lastCharacter; $c++)
{
    echo $c.", ";
} 
```

在到达 ZA 之前，所有由 ASCII 字符（范围 AZ）组成的单词都将是 <= 'Z'，因为比较是字符串比较，如果字符串已排序，则“AA”是 <“Z”。请参阅我[对这个问题的先前版本的回答](https://stackoverflow.com/questions/4098345/why-doesnt-this-code-simply-print-letters-a-to-z/4098414#4098414)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:58:16.957

恭喜，您发现了 PHP 中的许多不一致之处之一。简而言之：+ 和 < 运算符在字符串上的工作方式完全不同。

*   增加一个单字母字符串的工作方式与您期望的一样
*   增加`Z`结果`AA`等等（想想 Excel 列）
*   比较单字母字符串的工作方式与您期望的一样
*   比较多字母字符串按字典顺序工作（逐个字母）

现在有趣的边缘情况是：

```
'Z' <= 'Z'    // because equal
'Z'++ == 'AA' // because magic
'AA' <= 'Z'   // because A comes before Z 
```

# mysql - 从正则表达式中得到错误“无效的重复计数”

> ID：14458898
> 
> 赞同：6
> 
> 时间：2013-01-22T12:46:12.957
> 
> 标签：mysql, regex

我在mysql中收到以下错误：

```
Got error 'invalid repetition count(s)' from regexp 
```

我的查询是：

```
SELECT * FROM table WHERE some_text_field REGEXP"[A-Za-z0-9]{256}" 
```

但是当我`REGEXP"[A-Za-z0-9]{256}"`用`REGEXP"[A-Za-z0-9]{255}"`和以下替换时没有错误。

REGEXP 中是否有字符限制？为什么我用256或以上的时候不行，换成255或以下的就可以了？

我对此进行了调查，[Mysql throwing exception on Regex](https://stackoverflow.com/questions/12319482/mysql-throwing-exception-on-regex)，但对于错误发生的原因并没有提供太多信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T12:48:09.333

如[正则表达式](http://dev.mysql.com/doc/en/regexp.html)中所述：

> 更准确地说，`a{n}`完全匹配 的`n`实例`a`。`a{n,}`匹配`n`或更多实例`a`。通过,的实例`a{m,n}`匹配。`m``n``a`
> 
> `m`并且`n`必须在从`0`到`RE_DUP_MAX`（默认 255）的范围内，包括在内。如果同时给出`m`和，则必须小于或等于。`n``m``n`

# ios - iCloud 无处不在的容器没有在应用程序删除时被清理？

> ID：14458899
> 
> 赞同：12
> 
> 时间：2013-01-22T12:46:19.887
> 
> 标签：ios, core-data, icloud

我正在将带有 Core Data 的 iCloud 添加到应用商店中已经存在的应用中，因此我需要测试升级方案。但是，当我从设备中删除我的应用程序并从 Xcode 重新安装它时，我注意到设备上我的 ubiquity 容器文件夹中的所有内容都被保留了！这非常烦人，因为 iCloud 在尝试从我指定的事务日志目录上传文件时最终会感到困惑并且经常超时。我最终需要指定一个新的事务日志位置才能让它再次工作，这显然在未来对我的测试不起作用。

以下是我收到的错误：

> PFUbiquitySafeSaveFile waitForFileToUpload:: CoreData: Ubiquity: (0) PermanentLocation: : /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~appnamegoeshere/DatabaseTransactionLogs/mobile.8A0C3F8A-4077-57D7-8250-6BE15D1BCD20/iCloudData/8u0BfiCw~OkHHa~o8hF4bunW zmdS_C8om5efuugxRaA=/receipt.0.cdt safeLocation: : /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~appnamegoeshere/DatabaseTransactionLogs/mobile.8A0C3F8A-4077-57D7-8250-6BE15D1BCD20/iCloudData/8u0BfiCwOkHA/_o8hF4efugx~RazHA/_o8hF4efugx~zRamdC=C mobile.8A0C3F8A-4077-57D7-8250-6BE15D1BCD20.0.cdt currentLocation: : /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~appnamegoeshere/DatabaseTransactionLogs/mobile.8A0C3F8A-4077-57D7-8250-6BE15D1BCD20/iCloudData/ 8u0BfiCwOkHHa~o8hF4bunW~zmdS_C8om5efuugxRaA=/mobile.8A0C3F8A-4077-57D7-8250-6BE15D1BCD20.0.cdt
> 
> 千伏：（空）
> 
> 文件安全保存失败，错误：Error Domain=NSCocoaErrorDomain Code=512“文件上传超时。” UserInfo=0x1e5b6b10 {NSLocalizedDescription=文件上传超时。}

有谁知道如何在应用程序安装之间清除一个无处不在的容器？即使从应用程序设置中删除 ubiquity 容器并重新发布它也不能解决此问题。理论上，客户只需删除应用程序然后删除其 iCloud 文件即可解决此问题。这个问题真的很令人沮丧，以确定问题的原因是什么 - 任何建议都值得赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T19:23:11.300

经过多次头部撞击，我能够弄清楚这一点。有人向我提到，如果您访问 developer.icloud.com 并使用您的 iCloud 帐户登录，您可以查看设备的所有 iCloud 数据。对此进行了一些测试，当我告诉它从我的设备中删除时，我能够看到 iCloud 服务器上的数据立即被删除。但是，即使我删除了我的应用程序，我在设备上的 ubiquity 容器中创建的所有文件夹和文件都保留了下来。

我的工作是检查何时设置我的应用程序以首次使用 iCloud，并查看我的目录是否已经在 ubiquity 容器中。如果是，那么我使用以下代码手动删除目录和其中的所有文件：

```
 [fileManager removeItemAtPath:[[fileManager URLForUbiquityContainerIdentifier:nil] path] error:&error]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:37:12.523

这就是 iCloud 的工作方式。删除一台设备上的应用程序不会自动删除 iCloud 数据。如果该应用程序仍然安装在使用相同帐户的其他设备上，他们仍然可以使用数据。

如果您想在测试期间清除 iCloud 数据，请转到设置 --> iCloud，深入到您的应用程序，然后删除数据。

# ios - 使用 GooglePlus sdk iOS sdk 登录时出现 Invalid_scope 错误

> ID：14458903
> 
> 赞同：1
> 
> 时间：2013-01-22T12:46:45.140
> 
> 标签：ios, google-plus

我已经为 iOS 下载了最新的 google plus sdk，并且还为我的应用程序创建了客户端 ID。

我刚刚将 google sdk 提供的客户端 ID 替换为我的应用程序 ID。当我尝试使用谷歌登录时，加上它的登录成功，只是向我展示了

错误：Invalid_scope

我该如何解决？

![在此处输入图像描述](../Images/8370b38ddf80b6147d36e29cd00e65e7.png)

谢谢

# android - 三星 HLS 播放错误

> ID：14458905
> 
> 赞同：1
> 
> 时间：2013-01-22T12:46:52.753
> 
> 标签：android, http-live-streaming, samsung-mobile

我的应用程序使用 HLS 播放视频，它在大多数设备上都能正常工作。当尝试在三星 Galaxy S3 或三星 Galaxy Note 2 上运行它时，我遇到了问题。

如果我有一个体面的 Wifi 连接播放将运行没有任何问题。当我将连接限制为相当低的比特率（大约 300-400）并等到大约 10 秒后，当播放器切换层时，播放将停止并显示以下消息：

```
I/avc_utils(1929): found AVC codec config (320 x 180, Baseline-profile level 3.0)
I/ESQueue(1929): DRC : Change Resolution. [720x404] -> [320x180]

E/ACodec(1929): [OMX.SEC.aac.dec] ERROR(0x8000100b)
E/NuPlayer(1929): Received error from audio decoder, aborting playback.

E/NuPlayer(1929): audio track encountered an error (-2147483648)
E/MediaPlayer(15859): error (1, -2147483648) 
```

有谁知道为什么会发生这种情况，为什么只在某些三星设备上？例如，Galaxy Nexus 工作正常。

以下是 m3u8 播放列表外观的示例：

# EXTM3U

# EXT-X-STREAM-INF：程序 ID=1，带宽=755803

[http://hiddenserver.com/layer_2.m3u8](http://hiddenserver.com/layer_2.m3u8)

# EXT-X-STREAM-INF：程序 ID=1，带宽=1577112

[http://hiddenserver.com/layer_4.m3u8](http://hiddenserver.com/layer_4.m3u8)

# EXT-X-STREAM-INF：程序 ID=1，带宽=32083

[http://hiddenserver.com/layer_5.m3u8](http://hiddenserver.com/layer_5.m3u8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:31:15.523

三星 S3 存在不支持 HLS 流中的 MP3 音频的问题。开发人员页面没有清楚地显示 mpeg-ts 仅支持 AAC。

我有完全相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T15:39:38.213

对于 android 4.0.x 和 4.1.x，HLS 实现至少可以说是错误的。当播放器在层之间切换时，似乎没有使用新参数重新初始化音频和视频解码器。我为 4.2 和 4.3 尝试了相同的 HLS 流，它运行良好。

我还检查了 4.1、4.2 和 4.3 的调试日志。4.2 和 4.3 记录了“重新初始化解码器”，而 4.1 只是给出了很多解码器错误并崩溃了。

当我使用相同的音频参数对所有层进行编码时，4.1 的音频问题也被消除了。然而，视频冻结了。

所有这些观察表明解码器没有初始化，这实际上是 android 播放器中的错​​误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T05:57:27.330

**E/MediaPlayer(15859): error (1, -2147483648)**表示播放器从服务器发送的文件的音轨中得到错误。他们需要检查是否有问题在服务器端制作块文件。

因此，播放器可以忽略此错误，并且可以流畅地播放流。

```
public boolean onError(MediaPlayer arg0, int what, int extra) { 
      if (what != 1 || extra != -2147483648) {
               //Show error
      }else {
           //Skip error
      }
} 
```

# asp.net - 如何创建涵盖 ASP.NET WebForms 应用程序和 SharePoint 的搜索体验

> ID：14458911
> 
> 赞同：2
> 
> 时间：2013-01-22T12:47:10.183
> 
> 标签：asp.net, sql-server, sharepoint, search, full-text-search

我们在 SharePoint 站点和 ASP.NET WebForms 应用程序（其数据驻留在 SQL Server 中）之间传播数据。我们对 SharePoint 开箱即用的搜索体验感到满意，但现在我们希望将类似的功能添加到我们的 WebForms 应用程序中。我开始研究 SQL Server 的全文搜索功能，并开始研究像 Lucene 这样的工具，我想知道......：

1.  有没有比使用 SQL Server 全文搜索更好的方法来为我们的 WebForms 应用程序实现“SharePoint 类型”搜索？例如，在我们的 WebForms 应用程序中，我们将人员数据保存在各种 SQL Server 表中。用户应该能够在搜索框中输入“John Smith”，理想情况下，应用程序中所有引用“John Smith”的区域都会返回命中

2.  更好的是，是否有现有的工具或推荐的方法允许您同时搜索 SharePoint 网站*和*WebForms 应用程序（SQL Server 中的数据），这样用户就不必进行两次单独的搜索（一次在SharePoint，然后再次在 WebForms 应用程序中）？

# actionscript-3 - 来自 SWC 的资源不包含在 Flash CS6 中的 SWF 中

> ID：14458912
> 
> 赞同：0
> 
> 时间：2013-01-22T12:47:15.157
> 
> 标签：actionscript-3, swc, flash-cs6

我有一个包含符号 assets.UI.something 的资产 FLA 文件，并且有一个相应的类 assets/UI/something.as。当我将它发布到 SWC 中时，我可以解压缩它并查看（在 catalog.xml 中）该符号在那里。

我还有一个主文件，其中我的资产 SWC 包含在发布设置中（合并到代码中）。但是当我运行它时，我可以看到该符号未包含在最终的 SWF 中。

我尝试了很多方法，最终我发现，如果我在制作 SWC 之后但在编译最终 SWF 之前删除 AS 类文件 (assets/UI/something.as)，则该符号会包含在 SWF 中。 .

任何想法为什么会发生以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:36:47.973

也许您需要更改链接方法：文件->发布设置->操作脚本设置更改默认链接以合并到代码中并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:59:08.547

似乎您的符号被编译器在编译应用程序时看到的类文件覆盖。因此，当您编译您的 swc 时，一切正常，所有资产都在那里，但是当您编译您的应用程序时，您在编译 swc 时拥有的所有相同类的其他版本，但现在没有来自 FLA 的资产链接到它们. 只需将所有与 SWC 相关的东西（fla 和所有 as 文件）移到应用程序源路径之外。

# php - 基本 RSA 理论：服务器如何“记住”私钥

> ID：14458913
> 
> 赞同：-1
> 
> 时间：2013-01-22T12:47:22.220
> 
> 标签：php, ajax, rsa, public-key-encryption

到目前为止，我对使用公钥算法进行密码传输的理解如下：

1.  对 PHP 页面的 AJAX 调用检索生成的公钥
2.  密码使用公钥加密
3.  对 PHP 页面的 AJAX 调用传输加密字符串
4.  PHP页面用私钥解密字符串

首先，我的理解可能是错误的；如果是，请纠正我。假设不是，仍然有一个小问题：私钥必须在步骤 1 中生成，但它只在步骤 4 中使用。我的问题是：我怎样才能让 PHP 页面“记住”私钥它在第一次调用中生成，在第二次调用中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:02:34.200

> 如何让 PHP 页面“记住”它在第一次调用中生成的私钥，以便在第二次调用中使用？

使用[**会话**](http://php.net/manual/en/session.examples.basic.php)。

# c# - 从父类获取对子类中 List.Count 的引用

> ID：14458919
> 
> 赞同：0
> 
> 时间：2013-01-22T12:47:35.843
> 
> 标签：c#, .net, list

我有两个类 A 和 B，B 从 A 继承，另外还有一个 type 的成员`List<OtherObject>`。

现在我需要引用该`List.Count`属性来`class A`反映列表中发生的更改`class B`（删除/添加项目）。在不自己更改 int 成员的情况下，实现这一目标的最佳方法是什么`class A`？

编辑：好的，它有点复杂，我在这里有一些简化的代码来解释： int 成员 myCount 应该包含我正在谈论的引用。

```
public abstract class A{
protected int myCount;

    public void Process()
    {

        ProcessSpecificRequest();

        if(myCount == 0){
            //Do something
        }
    }

    protected abstract void ProcessSpecificRequest();

    }

public class B: A {
private List<Object> myList;

    protected override void ProcessSpecificRequest()
    {
    //Do something with the List

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:51:31.963

```
class A {
    public abstract int ListCount { get; }
}

class B : A {
    protected List<object> BList = new List<object>();
    public override int ListCount {
        get {
            return BList.Count;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:55:07.153

```
public abstract class A, ICollection
{
    public abstract int Count { get; }
    //todo realize ICollection
}

public class B<T> : A
{
    protected List<T> OtherObject = new List<T>();
    public override int Count 
    {
        get
        {
            return OtherObject.Count;
        }
    }
    //todo realize ICollection
} 
```

# java - 使用 JavaScript 从 Restful Web 服务获取数据？

> ID：14458922
> 
> 赞同：0
> 
> 时间：2013-01-22T12:47:43.687
> 
> 标签：java, javascript, jquery, json, rest

我有几个问题。首先是我不知道如何使用 javascript 从 web 服务中获取数据。第二个是当我尝试以 JSON 格式而不是 XML 获取数据时，我总是会得到一个 xml。我真的是 js、Jquery 之类的新手，所以我才开始研究它。

```
http://localhost:8080/UserRest/webresources/users?format=json // Even If format is JSON the result is always XML. Browser is Chrome

<users>
  <user>
    <age>40</age>
    <firstName>Mark</firstName>
    <freeText>Free</freeText>
    <id>1</id>
    <lastName>Lake</lastName>
    <weight>200</weight>
  </user>
  <user>
    <age>30</age>
    <firstName>Sam</firstName>
    <freeText>Words</freeText>
    <id>2</id>
    <lastName>Grass</lastName>
    <weight>105</weight>
  </user>
</users> 
```

如果我尝试

```
http://localhost:8080/UserRest/webresources/users?format=XML 
```

在 Safari 中，我得到了：

40MarkFree1Lake20030SamWords2Grass105

网络服务：

```
@GET 
@Override
@Produces({"application/xml", "application/json"})
public List<User> findAll() {
    return super.findAll();
} 
```

页：

```
 function fetchUserFunction()
        {
            $.getJSON("http://localhost:8080/UserRest/webresources/users?format=json",

        function(data) {
            $.each(data, function(key, value) {
                    alert(key + "=" + value);
                    $('#maindiv').append('<li id="' + key.toString() + '">' + value.toString() + '</li>');
                });
        });

        }
    </script>
</head>
    <body>
        <h1>Users</h1>
        <a href="http://localhost:8080/UserRest/webresources/users"> Test restful service</a>
        <button onclick="fetchUserFunction()">Fetch Users</button>
        <div id="maindiv"></div>
    </body>
</html> 
```

**问题：**

1.  如何使用 JSON 或/和 Jquery 或纯 js 从带有 JavaScript 的页面获取数据？有人可以为我的 js 函数实现基本案例并解释原因和内容。我的函数只返回 [object Object],[object Object]？

2.  如何使数据为 JSON 格式，而不是 XML？

3.  从获取的数据构建表的最佳方法是什么？

4.  我可以调用 webservice 类中的特定方法吗？如何调用，例如 findAll()？

5.  我正在使用 JPA 和 JAAS 身份验证。如果我使用 Web 服务并且客户端可以在不同的服务器中，如何避免缓存问题？有时数据是旧的，因为 Eclipselink 是从缓存中读取它，而不是从数据库中读取？

6.  你过得好吗？

7.  这适合同时提出许多问题吗？

萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:55:28.463

```
@GET
@Produces({"application/xml", "application/json"})
public String doGetAsXmlOrJson() {
    ...
} 
```

> 如果可以接受媒体类型“application/xml”和“application/json”中的任何一个，则将调用 doGetAsXmlOrJson 方法。如果两者都同样可以接受，那么将选择前者，因为它首先出现。

在[http://jersey.java.net/nonav/documentation/snapshot/jaxrs-resources.html找到了这个](http://jersey.java.net/nonav/documentation/snapshot/jaxrs-resources.html)

要将 JSON 转换为 JavaSCript，您可以调用

```
res = JSON.parse(responseJson); 
```

res 将成为一个 JS 对象，您可以在其中轻松地做任何事情。

# matlab - 将数据从 for 循环存储到 MATLAB 中进行绘图

> ID：14458924
> 
> 赞同：0
> 
> 时间：2013-01-22T12:47:45.127
> 
> 标签：matlab

我有一个计算方差的循环，我想绘制它。

```
for k = [1:3]
disp(B.colheaders{1, k});
%disp(B.data(1:79, k + 1));
for j = [1:10:79]
    disp(j)
    Variance = var(B.data(j:j+8, k))
end
%disp(V)
plot(Variance)
end 
```

如何将方差存储到数组或矩阵中，以便将它们全部绘制出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:25:11.783

如果你想保持循环，这是一种方法：

```
figure,hold on %# avoid erasing the previous plots
for k = [1:3]
disp(B.colheaders{1, k});
%disp(B.data(1:79, k + 1));
startIdx = [1:10:79];
Variance = zeros(size(startIdx));
for j = startIdx
    disp(j)
    Variance(j==startIdx) = var(B.data(j:j+8, k))
end
%disp(V)
plot(Variance)
end 
```

这是一种跳过内部循环的方法

```
figure,hold on
for k = [1:3]
disp(B.colheaders{1, k});
%disp(B.data(1:79, k + 1));
startIdx = [1:10:79];
varIdx = bsxfun(@plus,startIdx,(0:7)'); %# create array for indexing

currentData = B.data(:,k);

%# calculate variance for each column
Variance = var(currentData(varIdx),1,1);

plot(Variance)
end 
```

# php - 将图像上传到不同的静态 Web 服务器

> ID：14458936
> 
> 赞同：1
> 
> 时间：2013-01-22T12:48:38.160
> 
> 标签：php, webserver, image-uploading

我正在构建一个应用程序（PHP/Codeigniter/MySQL），用户可以在其中上传图像。主应用程序将位于 Apache Web 服务器上，所有静态文件（图像、视频等）都将由 Nginx Web 服务器提供。

应用服务器：www.website.com

静态服务器：static.website.com

任何人都可以请问将图像上传到静态网络服务器的正确方法是什么？图片的链接将存储在主服务器上，但实际的图片将直接上传到 Nginx 服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:51:07.627

> 任何人都可以请问将图像上传到静态网络服务器的正确方法是什么？

将它们上传到在动态服务器上运行的服务器端程序，并让该程序将文件移动到合适的位置以供静态服务器获取它们。

如果两台服务器在不同的机器上运行，这可能涉及通过本地网络传输它们。

# file - 使用 grub 编辑文件

> ID：14458942
> 
> 赞同：1
> 
> 时间：2013-01-22T12:48:45.600
> 
> 标签：file, edit, boot, grub

我在 rc.local 引导文件中犯了一个非常严重的错误。我在这个文件的列表中添加了一个带有无限循环的进程，这样我的 arch linux 发行版就不能完全启动，因为这个进程会阻止进一步的启动过程。

有没有办法在 grub 中编辑这个 rc.local 文件，以便我可以删除这个过程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:51:51.740

Grub 没有我所知道的文本编辑器。

您最好的解决方案可能是使用另一个发行版的 liveCD 启动（Arch 安装媒体可以做到这一点），安装文件所在的驱动器，然后在那里编辑文件。然后卸载并正常重启。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T11:34:53.217

尝试 在 root 模式下[https://www.maketecheasier.com/reset-root-password-linux/](https://www.maketecheasier.com/reset-root-password-linux/) 你也可以编辑文件

# android - 通过 App Engine 登录 Facebook

> ID：14458944
> 
> 赞同：1
> 
> 时间：2013-01-22T12:48:57.413
> 
> 标签：android, facebook, google-app-engine

我有一个通过 Restlet 连接到 App Engine 服务器的 Android 客户端。在客户端最初请求登录后，我会通过从 App Engine 服务器向 Facebook 发送登录请求来将 Facebook 登录合并到我的应用程序中。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:19:33.590

您最好使用[现有的 Java 库进行 Web 身份验证](https://github.com/leleuj/pac4j)（与 OAuth、OpenID 一起使用，当然还支持 Facebook）。

# android - android: 自定义 ExpandableListView

> ID：14458946
> 
> 赞同：0
> 
> 时间：2013-01-22T12:48:59.947
> 
> 标签：android, android-listview, expandablelistview, baseadapter

我正在尝试通过调整我找到的一些代码来自定义 expandableListView。这会调用一个自定义适配器，并为列表视图增加​​所需的行。

我的问题：我需要将那个东西与其他布局组件一起使用，所以为了我需要调用 setContentView 然后在我需要的地方膨胀 listView。我所有的尝试都以应用程序崩溃告终，有人可以告诉我如何调整以下代码以在布局中工作..？

主要活动：

```
 public class MainActivity extends ExpandableListActivity implements
    OnChildClickListener {
private static final String[] Groups = { "G1", "G2",
        "G3", "G4" };
private static final String[] Services = { "Service1",
        "Service2", "Service3", "Service4", "Service5",
        "Service6" };
private static final String[] Test = { "Test1", "Test2",
    "Test3", "Test4" };
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ExpandableListView expandbleLis = getExpandableListView();
    expandbleLis.setDividerHeight(2);
    expandbleLis.setGroupIndicator(null);
    expandbleLis.setClickable(true);

    setGroupData();
    setChildGroupData();

    NewAdapter mNewAdapter = new NewAdapter(groupItem, childItem);
    mNewAdapter
            .setInflater(
                    (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE),
                    this);
    expandbleLis.setAdapter(mNewAdapter);
    expandbleLis.setOnChildClickListener(this);
}

public void setGroupData() {
    for (int i = 0; i < 4; i++) {
        groupItem.add(Groups[i]);
    }
}

ArrayList<String> groupItem = new ArrayList<String>();
ArrayList<Object> childItem = new ArrayList<Object>();

public void setChildGroupData() {
    /**
     * Add Data For Services
     */
    ArrayList<String> child = new ArrayList<String>();
    for (int i = 0; i < 6; i++) {
        child.add(Services[i]);
    }
    childItem.add(child);

    /**
     * Add Data For Test
     */
    child = new ArrayList<String>();
    for (int i = 0; i < 4; i++) {
        child.add(Test[i]);
    }
    childItem.add(child);
    /**
     * 
     */
    child = new ArrayList<String>();
    child.add("Dummy Text");
    child.add("Dummy Text");
    child.add("Dummy Text");
    child.add("Dummy Text");
    childItem.add(child);
    /**
     * 
     */
    child = new ArrayList<String>();
    child.add("Dummy Text");
    child.add("Dummy Text");
    child.add("Dummy Text");
    child.add("Dummy Text");
    childItem.add(child);
}

@Override
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
    Toast.makeText(MainActivity.this, "Clicked On Child",
            Toast.LENGTH_SHORT).show();
    return true;
}
     } 
```

适配器类：

```
public class NewAdapter extends BaseExpandableListAdapter {

public ArrayList<String> groupItem, tempChild;
public ArrayList<Object> Childtem = new ArrayList<Object>();
public LayoutInflater minflater;
public Activity activity;

public NewAdapter(ArrayList<String> grList, ArrayList<Object> childItem) {
    groupItem = grList;
    this.Childtem = childItem;
}

public void setInflater(LayoutInflater mInflater, Activity act) {
    this.minflater = mInflater;
    activity = act;
}

@Override
public Object getChild(int groupPosition, int childPosition) {
    return null;
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    return 0;
}

@SuppressWarnings("unchecked")
@Override
public View getChildView(int groupPosition, final int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    tempChild = (ArrayList<String>) Childtem.get(groupPosition);
    TextView text = null;
    if (convertView == null) {
        convertView = minflater.inflate(R.layout.childrow, null);
    }
    text = (TextView) convertView.findViewById(R.id.textView1);
    text.setText(tempChild.get(childPosition));
    convertView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(activity, tempChild.get(childPosition),
                    Toast.LENGTH_SHORT).show();
        }
    });
    return convertView;
}

@Override
public int getChildrenCount(int groupPosition) {
    return ((ArrayList<String>) Childtem.get(groupPosition)).size();
}

@Override
public Object getGroup(int groupPosition) {
    return null;
}

@Override
public int getGroupCount() {
    return groupItem.size();
}

@Override
public void onGroupCollapsed(int groupPosition) {
    super.onGroupCollapsed(groupPosition);
}

@Override
public void onGroupExpanded(int groupPosition) {
    super.onGroupExpanded(groupPosition);
}

@Override
public long getGroupId(int groupPosition) {
    return 0;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = minflater.inflate(R.layout.grouprow, null);
    }
    ((CheckedTextView) convertView).setText(groupItem.get(groupPosition));
    ((CheckedTextView) convertView).setChecked(isExpanded);
    return convertView;
}

@Override
public boolean hasStableIds() {
    return false;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:12:09.630

您必须调用`setContentView`包含`ExpandableListView`其 id的布局`@android:id/list`。
然后，你可以得到这个`ExpandableListView`电话`getExpandableListView()`。

顺便说一句，因为您可以`ExpandableListView`通过 XML 自定义您的，所以您不必调用此方法并且只会使用`setListAdapter()`。
您的活动不必实现`OnChildClickListener`和调用`setOnChildClickListener`，您只需覆盖 的方法`onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id)`。 请参阅此[链接](https://developer.android.com/reference/android/app/ExpandableListActivity.html)以获取布局示例。 并且在接下来的时间里，不要忘记发布你得到的异常的日志。`ExpandableListActivity`

# php - PHP - 字符串和整数

> ID：14458951
> 
> 赞同：2
> 
> 时间：2013-01-22T12:49:10.330
> 
> 标签：php

我的网站使用PHP来检查用户使用“get”方法提交的值是否为某个整数。代码类似于

```
if ($_GET['input']==2) { ... } 
```

但是我最近发现，如果用户输入类似`2a`,`2two`甚至`2omdodonsos`的内容，PHP 仍然会将其视为值`2`。但是，如果用户输入`23eee`，`23twenty`或者`23ofnofnonf`，则不会被感知为`2`. 为什么会这样？将使用此代码：

```
 if ($_GET['input']="2") { ... } 
```

解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:03:03.257

您可以（并且应该）使用[输入过滤](http://www.php.net/filter)来清除错误的输入：

```
if (is_null($input = filter_input(INPUT_GET, 'input', FILTER_VALIDATE_INT, FILTER_NULL_ON_FAILURE))) {
    // an entry that was not an integer
} elseif ($input === 2) {
    // input was 2
} 
```

也可以看看：[`filter_input()`](http://www.php.net/filter_input)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:04:19.767

有关发生这种情况的解释，请阅读有关[type juggling](http://php.net/manual/en/language.types.type-juggling.php)的文档。

解决方案是类型安全比较 ( `===`)

```
$_GET['input'] === '2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:04:00.927

您可以检查 GET 值是否为数字，然后将其与数字 2 进行比较：

```
if (is_numeric($_GET['input']) ) {
    switch($_GET['input']) {
      case 1:
      case 2:
       // write your code here
      break;
      default:
       //Default option
     }
 } 
```

或者按照@fab 的建议直接使用 === 比较运算符。

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# php - Zend Framework DB Select 没有获取整行的数据

> ID：14458952
> 
> 赞同：0
> 
> 时间：2013-01-22T12:49:16.903
> 
> 标签：php, mysql, zend-framework

我难住了。

我有一组数据库，其中包含客户数据，例如 client_personal 中的个人详细信息和 client_contact 中的联系方式等。这里有 6 个连接来收集一整行信息。所以，从逻辑上讲（或者我是这么认为的），我这样做了；

```
$oSelect->from(array('details' => 'client_details'))
        ->joinLeft(array('contact' => 'client_contact'), 'contact.client_id = details.id')
        ->joinLeft(array('other'   => 'client_other_details'), 'other.client_id = details.id')
        ->joinLeft(array('nok'     => 'client_nextofkin'), 'nok.client_id = details.id')
        ->joinLeft(array('notes'   => 'client_notes'), 'notes.client_id = details.id')
        ->joinLeft(array('contract' => 'client_contract'), 'contract.client_id = details.id')
        ->joinLeft(array('image'   => 'client_image'), 'image.client_id = details.id')
        ->where('details.id = ?', $cid); 
```

现在，这会返回大量信息，但我的测试数据中缺少一些字段。例如，client_contact 包含：

```
id    client_id    email    phone    mobile    phone    address    postcode    country 
```

虽然我已经验证所有字段都包含一些测试数据，但我正在获取除“电话”和“地址”之外的每个字段的数据 - 电话是一个 varchar(11) 字段，与移动设备相同，我是从中获取数据，并且地址是一个文本字段，与邮政编码（出于本测试的目的）相同，我也在获取数据。

它并没有在此过程中丢失 - 运行后立即 var_dump()`->fetch()`表明它只是没有将数据从数据库中取出。我转储了这段代码生成的语句并自己运行它，并在所有行中获取了数据。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:22:50.307

没关系。这里发生的事情与两个表的内容有关 - client_details 和 client_nextofkin。

两个表都包含标记为“地址”和“电话”的字段，并且由于在联系人详细信息表之后加入了近亲表，因此这些字段在我的结果集中被覆盖。

# php - preg_match 一个网页的所有 SRC 标签

> ID：14458955
> 
> 赞同：-2
> 
> 时间：2013-01-22T12:49:27.450
> 
> 标签：php, regex

任何人都可以为我提供查找所有 src 标签的正则表达式。我被困在最后两个小时有时脚本工作有时 img 但我想要所有人的正则表达式。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:53:13.343

试试这个：

```
$pattern = '~<[^>]*?src="([^"]+)"[^>]*>~i'; 
```

`src`这应该匹配任何具有属性的标签。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:57:12.290

您可以使用，

```
$html = file_get_contents("http://www.example.com");
preg_match_all ( '@src="([^"]+)"@' , $html , $match );
var_dump($match); 
```

**编辑**

更具体地说，并在单引号或双引号中获取 src 和 SRC 的所有值

```
preg_match_all ( '@src=([\'"])(.*)([\'"])@' , $html , $match );
preg_match_all ( '@SRC=([\'"])(.*)([\'"])@' , $html , $match2 );
var_dump($match);
var_dump($match2); 
```

# c# - C#公共子串列表/提取

> ID：14458957
> 
> 赞同：0
> 
> 时间：2013-01-22T12:49:29.830
> 
> 标签：c#, .net, regex, string, substring

我的目标是遍历字符串数据库并在每次出现每个子字符串时获取计数。换句话说，我需要从字符串中提取所有可能的单词组合。

例如，输入可能是`"this is the first string"`.

我想提取`"this is"`, `"is the"`, `"the first"`, `"first string"`, `"this is the"`, `"is the first"`, `"the first string"`, `"this is the first"`, `"is the first string"`.

我只需要从左到右，总是按顺序。

我不确定从哪里开始。我已经有了读取数据库并保存到列表中的代码，只需要知道如何根据空格字符提取所有可能的子字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:07:19.170

```
 List<string> WordCombinations(string phrase)
    {
        List<string> combinations = new List<string>();

        string[] words = phrase.Split();

        // We want all 2 word combinations, then 3, then 4, ...
        for (int take = 2; take < words.Length; take++)
        {
            // Start with the first word, then second, then ...
            for (int skip = 0; skip + take <= words.Length; skip++)
            {
                combinations.Add(string.Join(" ", words.Skip(skip).Take(take).ToArray()));
            }
        }

        return combinations;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:17:03.437

以下方法构建字符串中所有空格的索引列表（加上名义开始和结束空格），然后返回每个有序索引对之间的子字符串：

```
static IEnumerable<string> SpaceDelimitedSubstrings(string input)
{
    List<int> indices = new List<int> { -1 };
    int current = -1;
    while ((current = input.IndexOf(' ', current + 1)) > -1)
    {
        indices.Add(current);
    }
    indices.Add(input.Length);

    int minLength = 1;
    for (int i = 0; i < indices.Count - minLength; i++)
        for (int j = i + minLength; j < indices.Count; j++)
            yield return input.Substring(indices[i] + 1, indices[j] - indices[i] - 1);
} 
```

调用如下

```
string input = "this is the first string";
foreach (var s in SpaceDelimitedSubstrings(input))
{
    Console.WriteLine(s);
} 
```

它给

![这](../Images/44ac44084a34d8d41824a57d5de3bcaa.png)

更改`minLength`为`2`将删除单个单词的返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:52:40.387

使用[String.Split() 怎么样？](http://msdn.microsoft.com/library/system.string.split%28v=vs.80%29.aspx)然后你有所有的单词，只需要另外可能的组合。

执行上述操作的简单示例：

```
 string input = "this is the first string";

        var items = input.Split(' ');
        var result = new List<string>();

        // this gets only 2-word-combinations
        for (var i = 0; i < items.Count() - 1; i++)
        {
            result.Add(items[i] + " " + items[i + 1]);
        }

        // from this point: search the 3-words etc. or put this in recursion 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T12:55:01.923

一种方法可能是：

```
myString.Split() 
```

如果您不提供任何参数，它将忽略空格字符（制表符、换行符（sa Environment.NewLine）等）拆分字符串。

当您拥有所有子字符串时，您可以轻松地通过它们连接。请记住，这可能会很慢，因为您每次都必须通过字符串来提取子字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T12:56:54.873

您可以使用`String.Split()`为了将字符串解析为标记。然后，您可以组合这些标记以创建您想要的组合。

# javascript - JQuery $.ajax 302 仅在第一次调用时重定向

> ID：14458961
> 
> 赞同：1
> 
> 时间：2013-01-22T12:49:34.220
> 
> 标签：javascript, ajax, api, jquery

我编写了一个函数来使用 POST 调用本地 API：

```
function setOpenGraph(setValue) {

    requestData = {
        user : $.user._id,
        opengraph : setValue
    };

    console.log(requestData);

    $.ajax({
        type: 'POST',
        data: requestData,
        dataType : 'json',
        url: '/api:setopengraph',
        success: function (data) {

            $.user.opengraph = setValue;

            console.log(data);

        }
    });
} 
```

这在页面上的链接的点击事件上调用时有效。但是，当我将其作为对 alertify 弹出窗口的响应时，无法将数据发布到 api：

```
 alertify.set({ labels: { ok: "ON", cancel: "OFF" } });
        alertify.confirm( 'message here', function (e) {
            if (e) {
                $(".toggleopengraph").html('turn facebook sharing off');
                setOpenGraph(true);
            } else {
                $(".toggleopengraph").html('turn facebook sharing on');
                setOpenGraph(false);
            }
        }); 
```

**在这两种情况下，console.log() 都返回 Object {user: "XXXXXXXXXXXXXX", opengraph: false} **

在下面，您可以看到控制台输出，其中第一个请求（由 alertify 发起）被重定向并且不 POST 到 API。第二个（由 .click() 发起）将数据发布到 API。

![第一个 AJAX 请求被重定向](../Images/36bc149d6bed997c2462a5529670132c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:20:37.837

以某种方式首先在 alertify 外部调用该函数清除了这个错误......奇怪。

# unit-testing - 你如何运行 OpenERP yaml 单元测试

> ID：14458962
> 
> 赞同：15
> 
> 时间：2013-01-22T12:49:34.540
> 
> 标签：unit-testing, openerp, yaml, openerp-8

我正在尝试在我的 openERP 模块上运行单元测试，但无论我写什么，它都不会显示测试是通过还是失败！有人知道如何输出测试结果吗？（使用 Windows OpenERP 6.1 版）

我的 YAML 测试是：

```
- 
  I test the tests
-
  !python {model: mymodelname}: |
    assert False, "Testing False!"
    assert True, "Testing True!" 
```

当我使用 openerp-server.exe --update mymodule --log-level=test -dtestdb 重新加载模块时的输出显示测试运行但没有错误？！

```
... TEST testdb openerp.tools.yaml_import: I test the tests 
```

我究竟做错了什么？

*编辑： - - - - - - - - - - - - - - - - - - - - - - - - ---------------------*

好的，在摆弄了 !python 之后，我尝试了另一个测试：

```
- 
    I test that the state
-
!assert {model: mymodel, id: mymodel_id}:
    - state == 'badstate' 
```

这给出了预期的失败：

```
WARNING demo_61 openerp.tools.yaml_import: Assertion "NONAME" FAILED
test: state == 'badstate'
values: ! active == badstate 
```

所以我猜我的语法有问题，它可能在版本 7 中按预期工作。

感谢大家的回答和帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T15:18:33.780

这是我尝试过的。它似乎对我有用：

```
!python {model: sale.order}: |
    assert True, "Testing True!"
    assert False, "Testing False!" 
```

（也许你忘记了“|”字符）

进而 ：

```
bin/start_openerp --init=your_module_to_test -d your_testing_database --test-file=/absolute/path/to/your/testing_file.yml 
```

您可能希望在之前创建测试数据库：

createdb mytestdb --encoding=unicode

希望对你有帮助

更新：这是我的日志（我称我的测试文件 sale_order_line_test.yml）

```
ERROR mytestdb openerp.tools.yaml_import: AssertionError in Python code : Testing False!
mytestdb openerp.modules.loading: At least one test failed when loading the modules.
loading test file /path/to/module/test/sale_order_line_test.yml
AssertionError in Python code : Testing False! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T10:42:36.663

查看文档（例如[此处](http://doc.openerp.com/v6.0/contribute/15_guidelines/coding_guidelines_testing.html)和[此处](http://v6.openerp.com/node/969)），我看不出您的代码有任何明显错误。

不过，我不熟悉`--log-level=test`。也许尝试使用`-v`,`--debug`或`--log-level=debug`标志而不是`--log-level=test`? 您可能还需要尝试参数的大写变体`--log-level`，即`--log-level=DEBUG`.

`test`当然不是标准 Python[日志记录模块](http://docs.python.org/2/library/logging.html)的[日志记录级别](http://docs.python.org/2/howto/logging.html#logging-basic-tutorial)之一，虽然我不能排除他们[添加自定义日志级别](https://stackoverflow.com/questions/2183233/how-to-add-a-custom-loglevel-to-pythons-logging-facility)的可能性，但我认为情况并非如此。

`obj = self.browse(cr, uid, ref("HP001"))`以防万一，尝试删除该行也可能是值得的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T12:43:12.937

启动服务器时，尝试在终端上键入以下路径。

> `./openerp-server --addons-path=<..Path>...`--测试启用

：启用 YAML 和单元测试。

> `./openerp-server --addons-path=<..Path>...`--测试提交

：提交由 YAML 或 XML 测试执行的数据库更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T13:22:45.433

在你的终端上试试这个，它会起作用。

```
./openerp-server --addons-path=<..Path> --log-level=test --test-enable 
```

希望这会帮助你。

# windows-phone-7 - 在模拟器中安装一个项目的两个版本

> ID：14458964
> 
> 赞同：0
> 
> 时间：2013-01-22T12:49:37.373
> 
> 标签：windows-phone-7, windows-phone-7.1

我有两个来自 Windows Phone 7.1 的单个项目的构建。我想将 XAPS 都安装到模拟器（或设备）。我现在面临的问题是当一个构建安装到模拟器时，另一个构建消失了。我需要更改属性中的任何内容请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:33:47.463

内部*属性*=> *WMAppManifest.xaml*（或类似名称）

`<App xmlns="" ProductID="{77a80316-384d-40dc-a8c3-c4054676e85c}" />` 更改产品 ID。

我从来没有手动尝试过，但它应该可以工作。

# r - 运行 R.exe 会创建临时文件吗？

> ID：14458967
> 
> 赞同：4
> 
> 时间：2013-01-22T12:49:49.723
> 
> 标签：r

我在想

*   **在Windows**上启动 R.exe 会创建临时文件吗？
*   是否解释诸如`x <- 5`写入那些临时文件之类的东西？

如果创建了临时文件，它们存储在哪里，如果我启动多个 R.exe 实例会发生什么？他们会共享和覆盖彼此的临时文件吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T13:17:09.193

R 的每个实例都有自己的临时目录。您可以在系统上的默认临时目录下方很容易地看到它（例如`/tmp`，对我而言；在 Windows 上，我通常设置`TEMPDIR`并`TMPDIR`找到`C:\TMP`它们；否则我忘记了它们的去向）。但是当你调用`tempfile()`或者`tempdir()`你可以推断出路径时：

```
R> tempfile()
[1] "/tmp/RtmpDVDtmj/file6a27612c4c83"
R> 
```

所以我在其中输入这个的 R 会话使用`/tmp/RtmpDVDtmj/`.

目录名称是随机的，并且不受同时运行的其他 R 实例的影响。

在 R 的出口处，目录被清除。

不，简单的分配`x <- 5`不会涉及临时文件。

# java - testng 执行顺序

> ID：14458968
> 
> 赞同：0
> 
> 时间：2013-01-22T12:49:56.083
> 
> 标签：java, testing, continuous-integration, integration-testing, testng

我的测试在 eclipse 和 jenkins 中以不同的顺序执行。我希望结果是相同的，并且独立于环境。测试不是平行的。我不在乎指定顺序，我只希望它们始终以相同的顺序运行。

为什么？因为它们是集成测试并且它们使用数据库。有时它们会相互影响，很难完全隔离它们。因此，如果他们失败了，我希望至少让他们在任何地方都失败以使修复更容易，而无需远程调试詹金斯......

编辑：这是我在 Eclipse 中获得的顺序的一个示例：

```
2013-01-22 14:39:06,186 main INFO  category  - Starting test A.a
2013-01-22 14:39:06,547 main INFO  category  - Starting test B.a
2013-01-22 14:39:10,614 main INFO  category  - Starting test C.a
2013-01-22 14:39:11,983 main INFO  category  - Starting test D.a
2013-01-22 14:39:12,492 main INFO  category  - Starting test D.b
2013-01-22 14:39:12,889 main INFO  category  - Starting test A.b
2013-01-22 14:39:13,657 main INFO  category  - Starting test A.c
2013-01-22 14:39:18,626 main INFO  category  - Starting test D.c
2013-01-22 14:39:19,041 main INFO  category  - Starting test A.d
2013-01-22 14:39:19,756 main INFO  category  - Starting test A.e
2013-01-22 14:39:20,724 main INFO  category  - Starting test D.e
2013-01-22 14:39:21,515 main INFO  category  - Starting test A.f 
```

我在测试套件 xml 中使用组（实际上，在这个特定的套件中，我运行除某些组之外的所有组）。xml 中没有提供特定的测试方法列表。上面的顺序是相当随机的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:50:14.387

理想情况下，您不应该依赖单元测试的顺序。每个测试应该彼此独立。按照这种理念，`JUnit`不保证单元测试的任何特定执行顺序。您可以查看支持以特定顺序执行测试的[TestNG 。](http://testng.org/doc/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T15:11:40.660

如果您希望您的类/方法以可预测的顺序运行，那么您应该使用`preserve-order`TestNG 中的属性。

```
 <suite name="Preserve order test runs">
   <test name="Test 1" preserve-order="true">
    <classes>
     <class name="com.ClassOne"/>
     <class name="com.ClassTwo"/>
     <class name="com.ClassThree"/>
    </classes>
   </test>
 </suite> 
```

# sharepoint - SharePoint 2013 :- Web 应用程序需要永远创建

> ID：14458973
> 
> 赞同：1
> 
> 时间：2013-01-22T12:50:03.260
> 
> 标签：sharepoint, sharepoint-2013

我在 Window 8 机器上安装了 SharePoint 2013。我正在尝试创建一个 Web 应用程序，它需要永远。创作过程永远不会停止。我检查了应用程序事件日志并发现了这个错误：

*机器“SHAREPOINT2013C (SharePoint - 43000(_LM_W3SVC_1458308317_ROOT))” ping 验证失败，自“2013 年 1 月 22 日凌晨 3:56:48”以来一直不可用。*

在网上搜索但找不到任何适合我的东西。任何人都可以提出解决问题的方法吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T21:49:33.363

Below are my findings:

In order to recognize routing targets IIS has to be able to process SPPING HTTP method

To test run this code in Powershell:

```
 $url = "http://your-Routing-Target-Server-Name"
    $myReq = [System.Net.HttpWebRequest]::Create($url)
    $myReq.Method = "SPPING";
    $response = $myReq.GetResponse();
    $response.StatusCode 
```

If you get the following error message: Exception calling "GetResponse" with "0" argument(s): "The remote server returned an error: (405) Method Not Allowed." that means that web front end is not set up to process SPPING HTTP method

To resolve the issue run the following commands on each routing target server:

```
 Import-Module WebAdministration
    add-WebConfiguration /system.webserver/handlers "IIS:\" -value @{
        name =          "SPPINGVerbHandler"
        verb =          "SPPING"
        path =          "*"
        modules =       "ProtocolSupportModule"
        requireAccess = "None"
    } 
```

This will add a handler for SPPING verb to IIS configuration.

Run the test script again to make sure this works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:48:59.770

因此，这与在 SharePoint 2013 上的 WFE 服务器上运行的请求管理服务有关。请求管理服务没有任何价值，因为您只有一台服务器。如果您在单个服务器场上禁用此服务，这些消息将消失，您的 Web 应用程序创建性能将大大提高。

马克林戈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T08:40:30.227

我最近遇到了这个问题，我创建了新的 Web 应用程序，它显示了一个“它应该不会花很长时间”的弹出窗口，然后过了一段时间它显示了一个连接失败页面。我浏览到新 Web 应用程序的虚拟目录文件夹，发现该文件夹完全是空的。

然后我做了什么来解决这个问题：

```
1\. Open IIS
2\. Go to Applicatin Pools
3\. Select Central Admin application pool and right click and select "Advance Settings".
4\. There was a property named "Shutdown Time Limit", it was set to "90" by default. I changed it to 400 and clicked OK. 
```

它自动重新启动了应用程序池。然后我再次从中央管理员创建了新的 Web 应用程序，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T21:26:32.157

我发现这些事件与指定应用程序池的回收时间相关（我的是在早上的特定时间）。不幸的是，他们已登录事件查看器并且无法真正清理它。

# java - 检查组合框的空值时出错

> ID：14458979
> 
> 赞同：0
> 
> 时间：2013-01-22T12:50:25.103
> 
> 标签：java

我有一个组合框和一个提交按钮，当提交按钮时，我想检查组合框的值是否为空。我使用这段代码：

```
ComboBox.setSelectedItem(null);
 if (ComboBox.getSelectedItem().equals(null)) {
           infoLabel.setText("Combo box value was null");
} 
```

当我按下提交按钮时出现此错误： ***java.lang.NullPointerException***

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:53:52.420

你不能给出`null`参考`equals()`，这样做：

```
ComboBox.setSelectedItem(null);
if (ComboBox.getSelectedItem() == null) {
  infoLabel.setText("Combo box value was null");
} 
```

**还有一个与您的问题无关的评论：**我建议使用[Java Naming Convention](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)，这将导致您的组合框被命名`comboBox`（而不是`ComboBox`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:54:01.037

你不能打电话`equals`。`null`相反，只需使用`== null`. 像这样的东西：

```
ComboBox.setSelectedItem(null);
if (ComboBox.getSelectedItem() == null) {
    infoLabel.setText("Combo box value was null");
} 
```

应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:57:15.117

条件应该是：

```
ComboBox.getSelectedItem() != null 
```

或者

```
ComboBox.getSelectedItem().toString().equals("") 
```

这将检查组合框中选择的内容是否为空或为空

另一种方法是将第一项留空，然后检查所选索引是否为 0，即

```
ComboBox.getSelectedIndex() != 0 
```

谢谢

# java - Hibernate 在 HQL 中使用“@”字符有困难

> ID：14458986
> 
> 赞同：4
> 
> 时间：2013-01-22T12:50:36.427
> 
> 标签：java, spring, hibernate, hql, spring-social

与hibernate和spring social一起工作，

我正在尝试通过电子邮件地址查询数据库。当我做这个查询时：

> 公共帐户 findAccountByUsername(String username) {
> 
> ```
>  Session session = sessionFactory.getCurrentSession();
>     String selectQuery = "FROM Account as account WHERE account.username = "+username;
>     Query query = session.createQuery(selectQuery);
>     @SuppressWarnings("unchecked")
>     List<Account> results = query.list();
> 
>   if (!results.iterator().hasNext())
>         return null;        
>     return results.iterator().next();       } 
> ```

我得到了这个例外

> 2013-01-22 14:37:13,090 [调试] [HibernateTransactionManager,doBegin(),569] - 将 Hibernate 事务公开为 JDBC 事务 [com.mchange.v2.c3p0.impl.NewProxyConnection@3b249bb2] 2013-01-22 14 :37:13,352 [DEBUG] [QueryTranslatorImpl,parse(),272] - parse() - HQL: FROM masterPackage.model.orm.Account as account WHERE account.username = myEmail@gmail.com 2013-01-22 14: 37:13,383 [DEBUG] [AbstractPlatformTransactionManager,processRollback(),843] - 启动事务回滚 2013-01-22 14:37:13,384 [DEBUG] [HibernateTransactionManager,doRollback(),672] - 在会话 [org] 上回滚 Hibernate 事务.hibernate.impl.SessionImpl@294a7134] 2013-01-22 14:37:13,385 [调试] [JDBCTransaction,rollback(),186] - 回滚
> 
> …………
> 
> 2013-01-22 14:37:18,818 [WARN] [ProviderSignInController,oauth2Callback(),177] - 处理 OAuth2 回调时出现异常（意外字符：'@' [FROM masterpackage.model.orm.Account as account WHERE account.username = myEmail@gmail.com]）。重定向到 /signin

有没有办法解决这个问题？

总有一种方法可以将电子邮件地址中的 @ 字符另存为其他字符，但我想问是否有比这个解决方案更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:59:28.907

不要连接 HQL 查询。请改用[命名参数](http://www.mkyong.com/hibernate/hibernate-parameter-binding-examples/)。它是Hibernate中[查询对象模式的一种实现。](http://martinfowler.com/eaaCatalog/queryObject.html)

对于您的情况：

```
Session session = sessionFactory.getCurrentSession();
String selectQuery = "FROM Account as account WHERE account.username = :usernameParam";
Query query = session.createQuery(selectQuery);
query.setParameter("usernameParam", username);
@SuppressWarnings("unchecked")
List<Account> results = query.list();

if(results.isEmpty()){
    return null;
} else {
    return result;
} 
```

* * *

*Offtop：*建议不要为此类方法返回*null*值。更好的是返回一个空集合。例如 return new ArrayList<>(); 因此，您可以隐式使用[Null Object 模式。](http://en.wikipedia.org/wiki/Null_Object_pattern)

# web-services - 如何将 Pentaho Kettle 转换部署为 RESTful Web 服务

> ID：14458994
> 
> 赞同：1
> 
> 时间：2013-01-22T12:51:12.790
> 
> 标签：web-services, restful-url, kettle

我想知道是否有可能以标准方式将 Kettle ETL 作业部署为 RESTful Web 服务，即像 Tomcat / Jetty / JBoss 这样的 Java EE-Container。

我正在寻找的详细信息是：

*   将 URL 参数绑定到 ETL 过程的某种方法，最好是在 Kettle IDE 中。

    所以，作为一个例子

    `http://myservice/customers/201301122`

    将获得截至 20130122 的所有新客户。

一个巨大的优势是：

*   在 IDE 中启动和测试服务的能力。

*   能够在单个独立的 WAR-Archive 中导出服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:13:55.007

看看[点菜服务器](http://wiki.pentaho.com/display/eai/the+thin+kettle+jdbc+driver) ，它不完全是 REST，但是......

# php - 在 jQuery Mobile 应用程序中使用 PHP 与 MySQL 数据库通信

> ID：14458995
> 
> 赞同：0
> 
> 时间：2013-01-22T12:51:13.143
> 
> 标签：php, mysql, database, mobile, dreamweaver

我正在寻找与 MySQL 数据库和正在为 iOS 开发的应用程序进行通信的最简单系统。

所有数据都在在线数据库中，我正在寻找能够像普通桌面浏览器一样检索和提交信息到表格的用户。

我正在使用 Dreamweaver 进行开发并使用 jQuery Mobile 模板（在 HTML 中）将其打包以用于移动发布，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:38:45.843

JSON 是前进的方向！我创建了一个网络服务并使用 Javascript 和 jQuery 从 MySQL 数据库中检索值。

# android - 将 byte[] 数组转换为 String 时在 android 中出现异常

> ID：14458998
> 
> 赞同：3
> 
> 时间：2013-01-22T12:51:25.260
> 
> 标签：android

```
float rotation =getRotatedImage(imgdata); 
```

//其中 imgdata 是方法 getRotatedImage(imgdata) 所需的字符串。

//我自己获取图片定位的方法

```
private float getRotatedImage(String imgdata2) {
         try {
            ExifInterface exif = new ExifInterface(imgdata2);
            int rotation = (int)exifOrientationToDegrees(
                    exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                            ExifInterface.ORIENTATION_NORMAL));
            return rotation;
        } catch (IOException e) {
            Log.e("CAMERA IMAGE", "Error checking exif", e);
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // TODO Auto-generated method stub
        return 0f;
    } 
```

// 在拍摄的照片中，我将字节数据转换为字符串

```
@Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {
        Log.i("CAMERA", "ON PICTURE TAKEN");
        int length = arg0.length;
        if (length != 0) {

            //bitimage = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);

            finalimage = arg0;
            if(finalimage!=null)
            {
                imgdata=converttostring(finalimage);
            }
            //compressimageforshow();
            Toast.makeText(getApplicationContext(), "IMAGE PROCESSING DONE", 0)
                    .show();

        } else {
            Toast.makeText(getApplicationContext(), "NO IMAGE ", 0).show();
        }
        arg1.startPreview();
        //shutterButton.setEnabled(false);
        show_image_bt.setEnabled(true);

    } 
```

//这里我的方法是为了转换成字符串

```
private String converttostring(byte[] finalimage2) {
        // String basestr=Base64.encodeToString(finalimage2, Base64.NO_WRAP);

        return new String(finalimage2);

    } 
```

//这里是我的logcat异常详情：

```
01-22 18:06:48.808: I/ACTIVITY(344): ON CREATE
01-22 18:06:48.808: I/ACTIVITY(344): ON RESUME
01-22 18:06:49.348: I/CAMERA(344): ON SURFACE CHANGE
01-22 18:06:53.018: I/CAMERA(344): ON PICTURE TAKEN
01-22 18:06:56.188: E/(344): can't open '������JFIF����`��`��������fExif����II*������������������>��������������F������(��������������1��������N��������������`������������`������������Paint.NET v3.36������C��
01-22 18:06:56.188: E/(344): 
01-22 18:06:56.188: E/(344): 
01-22 18:06:56.188: E/(344): 

����C       

�������@"�������������������������� 
01-22 18:06:56.188: E/(344): �����������}��!1AQa"q2���#B��R��$3br�  
01-22 18:06:56.188: E/(344): %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz�������������������������������������������������������������������������������������������   
01-22 18:06:56.188: E/(344): ���������w��!1AQaq"2�B���� #3R�br�
01-22 18:06:56.188: E/(344): $4�%�&amp;'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz����������������� 
```

//所以请谁能告诉我该怎么做也尝试了android类的Base64

```
imgdata=Base64.encodeToString(finalimage,Base64.NO_WRAP); 
```

其中 imgdata 是字符串，finalimage 是字节数组。

等待回复。请原谅我的语言和编码风格。

//这里我提到的是产生异常的按钮点击事件

```
@Override
    public void onClick(View arg0) {
        switch (arg0.getId()) {
case R.id.show_image:
            show_image_imgvw.setVisibility(View.VISIBLE);
            retake_photo_bt.setEnabled(true);
            show_image_bt.setEnabled(false);
            preview.setVisibility(View.INVISIBLE);

            if (finalimage != null) {
                resizeimageforshow();
                show_image_imgvw.setImageBitmap(bitimage);
                Toast.makeText(getApplicationContext(), "IMAGE DISPLAYED", 0)
                        .show(); 
```

单击此按钮时会生成异常。// 在 resizeimagefroshow() 中调用 getRotatedimage()，然后创建新的位图图像以供显示

//这里的代码：

```
private void resizeimageforshow() {
        if (finalimage != null) {
            // bitimage=BitmapFactory.decodeByteArray(finalimage, 0,
            // finalimage.length);
            // show_image_imgvw.setImageBitmap(bitimage);
            Bitmap myimage1 = BitmapFactory.decodeByteArray(finalimage, 0,
                    finalimage.length);
            // imgdata=Base64.encodeToString(finalimage,Base64.NO_WRAP);
            android.graphics.Matrix matrix = new android.graphics.Matrix();
            float rotation = getRotatedImage(imgdata);
            if (rotation != 0f) {
                matrix.preRotate(rotation);
            }
            bitimage = Bitmap.createBitmap(myimage1, 0, 0, myimage1.getWidth(),
                    myimage1.getHeight(), matrix, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:09:06.807

正如@njzk2 提到的，您将二进制图像数据转换为字符串没有任何意义。你想要的是一个文件名字符串传递给`ExifInterface`构造函数。

所以首先你必须将图像数据保存到一个文件中：

```
File file = new File(getExternalCacheDir(), "camera_picture.jpg");
OutputStream os = new FileOutputStream(file.toString());
try {
    os.write(finalimage);
} finally {
    os.close();
} 
```

然后你可以`ExifInterface`使用`filename`.

如果您想直接从流中读取元数据，则必须使用第三方库。请参阅[从图片回调中读取 android jpeg EXIF 元数据](https://stackoverflow.com/questions/12944123/reading-android-jpeg-exif-metadata-from-picture-callback)。