# StackOverflow 问答 13644000-13644999

# bash - 如何使用 Awk 或 Bash 在 1 个文件中组合具有相同标题的列

> ID：13644003
> 
> 赞同：1
> 
> 时间：2012-11-30T11:06:01.220
> 
> 标签：bash, awk

我想知道如何使用 bash/sed/awk 将文件中具有重复标题的列组合起来。

```
 x y  x  y
s1 3 4  6 10
s2 3 9 10  7
s3 7 1  3  2 
```

到 ：

```
 x  y
s1  9 14
s2 13 16
s3 10  3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T14:35:37.827

```
$ cat file
   x y  x  y
s1 3 4  6 10
s2 3 9 10  7
s3 7 1  3  2

$ cat tst.awk
NR==1 {
   for (i=1;i<=NF;i++) {
      flds[$i] = flds[$i] " " i+1
   }
   printf "%-3s",""
   for (hdr in flds) {
      printf "%3s",hdr
   }
   print ""
   next
}
{
   printf "%-3s",$1
   for (hdr in flds) {
      n = split(flds[hdr],fldNrs)
      sum = 0
      for (i=1; i<=n; i++) {
         sum += $(fldNrs[i])
      }
      printf "%3d",sum
   }
   print ""
}

$ awk -f tst.awk file
     x  y
s1   9 14
s2  13 16
s3  10  3

$ time awk -f ./tst.awk file
     x  y
s1   9 14
s2  13 16
s3  10  3

real    0m0.265s
user    0m0.030s
sys     0m0.108s 
```

如果您愿意，可以以明显的方式调整 printf 行以适应不同的输出格式。

这是响应 elsethread 评论的 bash 等价物。不要使用它，awk 解决方案是正确的，这只是为了说明如果您出于某种莫名其妙的原因想要这样做，应该如何在 bash 中编写它：

```
$ cat tst.sh
declare -A flds
while IFS= read -r rec
do
   lineNr=$(( lineNr + 1 ))
   set -- $rec

   if (( lineNr == 1 ))
   then

      fldNr=1
      for fld
      do
         fldNr=$(( fldNr + 1 ))
         flds[$fld]+=" $fldNr"
      done
      printf "%-3s" ""
      for hdr in "${!flds[@]}"
      do
         printf "%3s" "$hdr"
      done
      printf "\n"

   else

      printf "%-3s" "$1"
      for hdr in "${!flds[@]}"
      do
         fldNrs=( ${flds[$hdr]} )
         sum=0
         for fldNr in "${fldNrs[@]}"
         do
            eval val="\$$fldNr"
            sum=$(( sum + val ))
         done
         printf "%3d" "$sum"
      done
      printf "\n"

   fi

done < "$1"
$
$ time ./tst.sh file
     x  y
s1   9 14
s2  13 16
s3  10  3

real    0m0.062s
user    0m0.031s
sys     0m0.046s 
```

请注意，它的运行时间与 awk 脚本的数量级大致相同（请参阅 elsethread 注释）。警告 - 我从不编写 bash 脚本来处理文本文件，所以我并没有声称上面的 bash 脚本是完美的，只是一个如何在 bash 中处理它的示例，以便与我声称应该重写的该线程中的其他脚本进行比较！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:00:40.330

这不是一条线。您可以使用 Bash v4、Bash 的字典和一些 shell 工具来完成。

使用文件名执行下面的脚本来处理一个参数

```
bash script_below.sh your_file 
```

这是脚本：

```
declare -A coltofield
headerdone=0

# Take the first line of the input file and extract all fields 
# and their position. Start with position value 2 because of the 
# format of the following lines

while read line; do
    colnum=$(echo $line | cut -d "=" -f 1)
    field=$(echo $line | cut -d "=" -f 2)

    coltofield[$colnum]=$field
done < <(head -n 1 $1 | sed  -e 's/^[[:space:]]*//;' -e 's/[[:space:]]*$//;' -e 's/[[:space:]]\+/\n/g;' | nl -v 2 -n ln  | sed -e 's/[[:space:]]\+/=/g;')

# Read the rest of the file starting with the second line             
while read line; do
    declare -A computation
    declare varname

    # Turn the line in key value pair. The key is the position of 
    # the value in the line
    while read value; do
        vcolnum=$(echo $value | cut -d "=" -f 1)
        vvalue=$(echo $value | cut -d "=" -f 2)

        # The first value is the line variable name 
        # (s1, s2)                                       
        if [[ $vcolnum == "1" ]]; then
            varname=$vvalue
            continue
        fi

        # Get the name of the field by the column 
        # position                                                     
        field=${coltofield[$vcolnum]}

        # Add the value to the current sum for this field
        computation[$field]=$((computation[$field]+${vvalue}))
    done < <(echo $line | sed  -e 's/^[[:space:]]*//;' -e 's/[[:space:]]*$//;' -e 's/[[:space:]]\+/\n/g;' | nl -n ln  | sed -e 's/[[:space:]]\+/=/g;')

    if [[ $headerdone == "0" ]]; then
        echo -e -n "\t"
        for key in ${!computation[@]}; do echo -n -e "$key\t" ; done; echo
        headerdone=1
    fi

    echo -n -e "$varname\t"
    for value in ${computation[@]}; do echo -n -e "$value\t"; done; echo

    computation=()

done < <(tail -n +2 $1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:34:50.293

另一个 AWK 替代方案：

```
$ cat f
   x y  x  y
s1 3 4  6 10
s2 3 9 10  7
s3 7 1  3  2

$ cat f.awk
BEGIN {
OFS="\t";
}

NR==1 {
  #need header for 1st column
  for(f=NF; f>=1; --f)
    $(f+1) = $f;
  $1="";

  for(f=1; f<=NF; ++f)
    fld2hdr[f]=$f;
}

{
  for(f=1; f<=NF; ++f)
    if($f ~ /^[0-9]/)
      colValues[fld2hdr[f]]+=$f;
    else
      colValues[fld2hdr[f]]=$f;

  for (i in colValues)
    row = row colValues[i] OFS;
  print row;

  split("", colValues);
  row=""
}

$ awk -f f.awk f
        x       y
s1      9       14
s2      13      16
s3      10      3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:40:09.837

```
$ awk 'BEGIN{print "   x y"} a=$2+$4, b=$3+$5 {print $1, a, b}' file
   x y
s1 9 14
s2 13 16
s3 10 3 
```

毫无疑问，有更好的方法来显示标题，但我`awk`的有点粗略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T05:34:58.277

这是一个 Perl 解决方案，只是为了好玩：

```
cat table.txt | perl -e'@h=grep{$_}split/\s+/,<>;while(@l=grep{$_}split/\s+/,<>){for$i(1..$#l){$t{$l[0]}{$h[$i-1]}+=$l[$i]}};printf "    %s\n",(join"  ",sort keys%{$t{(keys%t)[0]}});for$h(sort keys%t){printf"$h %s\n",(join " ",map{sprintf"%2d",$_}@{$t{$h}}{sort keys%{$t{$h}}})};' 
```

# java - 如何有效地调整图像处理算法的参数？

> ID：13644010
> 
> 赞同：1
> 
> 时间：2012-11-30T11:06:27.760
> 
> 标签：java, statistics, artificial-intelligence, mathematical-optimization

在开始为我的问题实施解决方案之前，我只想确定我是否不会“重新发明轮子”，以及我是否可以重用某人以前做过的工作。所以我的问题是：

我使用 OpenCV 库制作了图像匹配器。该匹配器接收一组图像文件并尝试在数据库中查找相似的图像。最后，它根据[ROC 曲线](http://en.wikipedia.org/wiki/Receiver_operating_characteristic)定义（真阳性、真阴性、假阳性和假阴性匹配数）返回统计结果。由于 OpenCV 的库算法参数值约为 10，这些结果可能会有所不同。这意味着参数调整将带来更多的 True Positive 匹配和更少的 False Positive 匹配。由于我必须调整或多或少 10 个参数，蛮力调整器会非常缓慢。蛮力我的意思是：

```
While(param1 < 50){
  While(param2 < 50){
    While(param3 < 50){
      …
      PerformMatching();
      param3 +=2;
    }
    param2++;
  }
  pram1 +=5;
} 
```

我想做的是随机选择参数，然后分析统计结果是否变得更好。那么这个分析将有助于改变随机生成参数的方法，以便选择更好的参数。

所以我的问题是Java中是否有库或者是否有任何AI算法，它将根据真阳性和假阳性值的评估返回更好的参数集？

不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T00:00:02.727

## 爬山

您可以尝试一些随机优化算法，例如[Hill Climbing](http://en.wikipedia.org/wiki/Hill_climbing)，在其中您从随机解决方案开始（如@Don Reba 指出的），并查看一组与成本函数相关的更好的相邻解决方案。我将使用一些示例 python 代码来解释这个想法。

## 获取邻居解决方案

对于您的邻居，您可以使用一个简单的函数，例如：

```
n_params = 5  # number of parameters
upper_bound = 5  # upper limit of your parameters
lower_bound = 0  # lower limit of your parameters

def get_neighbors(solution):
    neighbors = []
    for i in range(n_params):
        x = copy.deepcopy(solution)
        if x[i] < upper_bound:
            x[i] += 1 # increment one of the components
            neighbors.append(x)
        x = copy.deepcopy(solution)
        if x[i] > lower_bound:
            x[i] -= 1 # decrement one of the components
            neighbors.append(x)
    return neighbors 
```

* * *

如果您有 [1,3,4,2,2] 的当前解决方案，通过增加或减少任何组件，您将获得 10 个不同的邻居，如下所示：

```
 [2, 3, 4, 2, 2],
 [0, 3, 4, 2, 2],
 [1, 4, 4, 2, 2],
 [1, 2, 4, 2, 2],
 [1, 3, 5, 2, 2],
 [1, 3, 3, 2, 2],
 [1, 3, 4, 3, 2],
 [1, 3, 4, 1, 2],
 [1, 3, 4, 2, 3],
 [1, 3, 4, 2, 1] 
```

这里我们假设每个参数都是一个整数。您可以通过调整步长（例如，0.05）来获得更多的粒度。

## 爬山的迭代

```
def hill_climb():
    initial_solution = np.random.randint(lower_bound, upper_bound, n_params)
    current_solution = initial_solution
    print 'initial solution', initial_solution
    current_cost = get_cost(initial_solution)
    step = 1
    while True:
        #try to replace each single component w/ its neighbors
        lowest_cost = current_cost
        lowest_solution = current_solution
        print 'hill-climbing cost at step %6d: %d' % (step, lowest_cost)
        neighbors = get_neighbors(current_solution)
        for new_solution in neighbors:
            neighbor_cost = get_cost(new_solution)
            if neighbor_cost < lowest_cost:
                lowest_cost = neighbor_cost
                lowest_solution = new_solution

        if lowest_cost >= current_cost:
            break
        else: 
            current_solution= lowest_solution
            current_cost = lowest_cost
            step += 1
    return current_solution 
```

## 成本函数

为了完整起见，我将使用我自己的成本函数（仅用于演示目的），即

```
f(x) = x1^1 - x2^2 + x3^3 - x4^4 + x5^5 
```

那是 ：

```
def get_cost(solution):
    cost = 0
    for i,param in enumerate(solution):
        cost += (-1.)**i * param**(i+1)  
    return cost 
```

## 优化结果：

这是结果。我们使用 [4, 0, 1, 3, 1] 的随机初始猜测。经过 14 步（评估 14*10 = 140 个邻居）后，我们找到了 [0, 5, 0, 5, 0] 的最佳答案，这使成本最小化。对于蛮力，您必须评估 6^6 = 46656 个解决方案。当您拥有高维解决方案时，可以节省更多的运行时间。

请注意，由于这是一种随机方法，因此会找到局部最小值作为最终结果（尽管有时它与全局最小值相同，但不能保证）。然而实际上它已经足够好了。

```
initial solution:               [4 0 1 3 1]
hill-climbing cost at step      1: -75
hill-climbing cost at step      2: -250
hill-climbing cost at step      3: -619
hill-climbing cost at step      4: -620
hill-climbing cost at step      5: -621
hill-climbing cost at step      6: -622
hill-climbing cost at step      7: -623
hill-climbing cost at step      8: -624
hill-climbing cost at step      9: -627
hill-climbing cost at step     10: -632
hill-climbing cost at step     11: -639
hill-climbing cost at step     12: -648
hill-climbing cost at step     13: -649
hill-climbing cost at step     14: -650
Final solution:                 [0 5 0 5 0] 
```

## 相关帖子

这里有一个相关但更复杂的问题：[Algorithm for selection n vector out of a set while minimize cost](https://stackoverflow.com/questions/12953470/algorithm-for-selecting-n-vectors-out-of-a-set-while-minimizing-cost/12964153#12964153)

上面的所有代码都可以在[这里](https://gist.github.com/4186012)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:00:10.077

有一系列算法优化技术，从您示例中的简单网格搜索到各种自适应算法。如果您想了解更高级的技术，我建议您先查看[Frank Hutter](http://www.cs.ubc.ca/~hutter/papers.html)的研究。他的[博士论文](http://www.cs.ubc.ca/~hutter/papers/Hutter09PhD.pdf)包含对该领域的一个很好的概述。

如果您不想花费太多时间，您可以做的一项重大改进是随机生成参数，而不是使用常规网格。这样，如果某些参数变得不重要，您就不会浪费时间来保持其他参数不变。你想要这样的东西：

```
param1 = random.Next(50);
param2 = random.Next(50);
...
PerformMatching(); 
```

这种方法的另一个优点是您可以随心所欲地收集样本点，而不必等到探索整个网格。[您可以通过使用准随机](http://en.wikipedia.org/wiki/Low-discrepancy_sequence)参数序列做得更好，这将保持点均匀分布。有一些库会为你生成这些。

生成点后，您可以简单地选择最佳组合，或使用绘图工具或使用模式查找算法（如 MeanShift）对其进行分析。

# qt - 覆盖 PyQt 中的 createWindow 函数

> ID：13644011
> 
> 赞同：2
> 
> 时间：2012-11-30T11:06:29.653
> 
> 标签：qt, webkit, pyqt

我正在尝试处理`createWindow`PyQt webkit 中的方法。当你这样做时，PyQt 会给出方法 a `QWebPage.WebWindowType`（或`QWebPage::WebWindowType`在 c++ 中）。我只需要一个 URL 来创建一个新窗口，所以我不确定如何处理这个类。文档也没有很好地解释它：http: [//doc.qt.digia.com/qt/qwebpage.html#WebWindowType-enum](http://doc.qt.digia.com/qt/qwebpage.html#WebWindowType-enum)

我正在尝试将其与我的“Tab”类集成：

```
class Tab(QtGui.QWidget):
    """
    Contains the variables and methods needed to open the Qt
    based user interface and the event bus to allow interaction.
    """
    def __init__(self, url, window):
        """
        Set the up the following:
          1) Initialise the Qt user interface.
          2) Set margins.
          3) Initialise the cookie jar.
          4) Set the default URL.
          5) Set the history buttons to disabled (there is not history yet).
          5) Hide the tools menu.
          6) Create the GUI event bus.
          7) Set keyboard bindings.
        """
        self.window = window
        QtGui.QWidget.__init__(self)
        self.ui = Ui_Browser()
        self.ui.setupUi(self)

        l = self.layout()
        l.setMargin(0)
        self.ui.horizontalLayout.setMargin(0)

        try:
            self.ui.webView.page().networkAccessManager().setCookieJar(self.window.cookies)
        except:
            pass

        self.ui.webView.setUrl(url)
        self.ui.url.setText(url.toString())

        self.ui.back.setEnabled(False)
        self.ui.forward.setEnabled(False)

        self.ui.toolsBox.hide()
        self.ui.tools.setChecked(False)

        QtCore.QObject.connect(self.ui.back, QtCore.SIGNAL("clicked()"), self.back)
        QtCore.QObject.connect(self.ui.forward, QtCore.SIGNAL("clicked()"), self.forward)
        QtCore.QObject.connect(self.ui.refresh, QtCore.SIGNAL("clicked()"), self.refresh)
        QtCore.QObject.connect(self.ui.url, QtCore.SIGNAL("returnPressed()"), self.url)
        QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("linkClicked (const QUrl&)"), self.navigate)
        QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("urlChanged (const QUrl&)"), self.navigate)
        QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("titleChanged(const QString&)"), self.title)
        QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("loadStarted()"), self.showProgressBar)
        QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("loadProgress(int)"), self.setProgressBar)
        QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("loadFinished(bool)"), self.hideProgressBar)
        QtCore.QObject.connect(self.ui.toolPrint, QtCore.SIGNAL("clicked()"), self.printPage)
        self.ui.webView.createWindow = self.createWindow

        QtGui.QShortcut(QtGui.QKeySequence("Backspace"), self, self.back)
        QtGui.QShortcut(QtGui.QKeySequence("F5"), self, self.refresh)
        QtGui.QShortcut(QtGui.QKeySequence("Ctrl+p"), self, self.printPage)

    def url(self):
        """
        Go to URL entered.
        """
        self.setHistory()
        url = self.ui.url.text()
        if not str(url).startswith("http://"):
            url = "http://" + url
        self.ui.webView.setUrl(QtCore.QUrl(url))

    def navigate(self, url):
        """
        Navigate to page requested.
        """
        self.setHistory()
        self.ui.url.setText(url.toString())

    def refresh(self):
        """
        Refresh the page.
        """
        self.ui.webView.setUrl(QtCore.QUrl(self.ui.webView.url()))

    def back(self):
        """
        Enable the back button.
        """
        page = self.ui.webView.page()
        history = page.history()
        history.back()
        if history.canGoBack():
            self.ui.back.setEnabled(True)
        else:
            self.ui.back.setEnabled(False)

    def forward(self):
        """
        Enable the forward button.
        """
        page = self.ui.webView.page()
        history = page.history()
        history.forward()
        if history.canGoForward():
            self.ui.forward.setEnabled(True)
        else:
            self.ui.forward.setEnabled(False)

    def title(self, title):
        """
        Change the title of the window.
        """
        self.window.tabs.setTabText(self.window.tabs.indexOf(self), title) or (self.window.setWindowTitle(title) if self.isThisFocused() else "New Tab")

    def createWindow(self, WebWindowType):
        """
        Overide the default behaviour.
        """
        tab = Tab(QtCore.QUrl("about:blank"), self.window)
        print(mode)
        if mode == QtWebKit.QWebPage.WebModalDialog:
            tab.ui.webView.setWindowModality(QtCore.Qt.ApplicationModal)
        self.window.tabs.setCurrentIndex(self.window.tabs.addTab(tab, ""))

    def isThisFocused(self):
        """
        Return whether this tab is focused or not.
        """
        if self.window.tabs.currentWidget() == self:
            return True
        return False

    def setHistory(self):
        """
        Check history and update buttons.
        """
        page = self.ui.webView.page()
        history = page.history()
        if history.canGoBack():
            self.ui.back.setEnabled(True)
        else:
            self.ui.back.setEnabled(False)
        if history.canGoForward():
            self.ui.forward.setEnabled(True)
        else:
            self.ui.forward.setEnabled(False)

    def showProgressBar(self):
        """
        We're loading a page, show the load progress bar.
        """
        self.ui.progress.show()

    def setProgressBar(self, percent):
        """
        Set the percentage of the progress bar.
        """
        self.ui.progress.setValue(percent)

    def hideProgressBar(self, bool):
        """
        We've finished loading the page, there is no need for the progress bar.
        """
        self.ui.progress.hide()

    def printPage(self):
        """
        Use Qt's goodness to print the page.
        """
        previewer = QtGui.QPrintPreviewDialog(paintRequested=self.ui.webView.print_)
        previewer.exec_() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:41:11.423

[createWindow](http://doc.qt.digia.com/qt/qwebview.html#createWindow)函数用于处理打开新窗口的请求（例如，javascript调用`window.open()`）。

默认情况下，`createWindow`什么都不做，因此必须在子类中重新实现它。

此外，要使用 javascript，必须在[web 设置中指定](http://doc.qt.digia.com/qt/qwebview.html#settings)[允许](http://doc.qt.digia.com/qt/qwebsettings.html#WebAttribute-enum)javascript 程序打开新窗口。

这是一个演示脚本，说明了如何使用`createWindow`：

```
from PyQt4 import QtGui, QtCore, QtWebKit

class Browser(QtWebKit.QWebView):
    _windows = set()

    @classmethod
    def _removeWindow(cls, window):
        if window in cls._windows:
            cls._windows.remove(window)

    @classmethod
    def newWindow(cls):
        window = cls()
        cls._windows.add(window)
        return window

    def __init__(self, parent=None):
        QtWebKit.QWebView.__init__(self, parent)
        self.setAttribute(QtCore.Qt.WA_DeleteOnClose, True)
        self.settings().setAttribute(
            QtWebKit.QWebSettings.JavascriptEnabled, True)
        self.settings().setAttribute(
            QtWebKit.QWebSettings.JavascriptCanOpenWindows, True)

    def closeEvent(self, event):
        self._removeWindow(self)
        event.accept()

    def createWindow(self, mode):
        window = self.newWindow()
        if mode == QtWebKit.QWebPage.WebModalDialog:
            window.setWindowModality(QtCore.Qt.ApplicationModal)
        window.show()
        return window

html = """
<html>
<head>
<title>Test Page</title>
<script type="text/javascript"><!--
var url = 'https://www.google.com'
var count = 0
function newWindow() {
    count += 1;
    window.open(url, 'testwindow' + count, 'width=640,height=480');
}
--></script>
</head>
<body>
<input type="button" value="New Window" onclick="newWindow()" />
<p><a href="https://www.google.com">Test Link</a></p>
</body>
</html>"""

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    browser = Browser()
    browser.setHtml(html)
    browser.show()
    sys.exit(app.exec_()) 
```

（**注意**：必须保留对任何新创建的窗口的引用；不这样做几乎肯定会导致分段错误）。

**编辑**：

只是为了澄清：

该`createWindow`函数旨在处理打开新*浏览器窗口的**外部*请求（例如，如上例所示的 javascript调用）。请注意，这是一个*虚*函数。这意味着如果它在or的子类中被重写，则重新实现的函数可以由 Qt在*内部调用。*如果您需要从 javascript 代码调用自己的函数，这显然至关重要。*`window.open()``createWindow`*`QWebView``QWebPage`*`creatWindow`***

 ***因此，如果您希望网页上的 javascript 程序能够创建和打开浏览器窗口类的实例，则*子类* `QWebView`化并重新实现其`createWindow`功能（如上例所示）。

简单地创建和显示一个（例如添加一个新选项卡）`createWindow`根本不需要该功能。`QWebView`A`QWebView`只是一个用于显示网页的容器，它的创建和显示就像任何其他小部件一样。***

# c# - 在 C# 中展平序列化 XML

> ID：13644012
> 
> 赞同：2
> 
> 时间：2012-11-30T11:06:34.887
> 
> 标签：c#, serialization

如果我有一个对象：-

`class c { List<b> b; }`

`class b { string a; }`

当 c 转换为 XML 时，结果是：-

`<c> <b> <b> <a>Hello</a> </b>...`

有什么方法可以通过代码结构或选项来展平 XML，以便我可以摆脱其中的一层？我最终希望 XML 只是：-

`<c> <b> <a>Hello</a> </b>....`

或者另一种看待问题的方式，如何反序列化：-

`<c><b><a>Name</a></b><b><a>Age</a></b></c>`

到 C# 类结构？

提前致谢？如果不可能，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:12:15.430

一种选择是实现[IXmlSerializable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)以完全控制您的类的 XML 序列化应该采用什么形式。

或者，您可以使用[控制 XML 序列化的属性来](http://msdn.microsoft.com/en-us/library/83y7df3e.aspx)装饰您的类和属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T11:24:39.430

如果这是你想要的：

```
<ArrayOfB>
     <b>
          <a>Name</a>
     </b>
     <b>
          <a>Age</a>
     </b>
</ArrayOfB> 
```

那么这应该工作。

```
public class XMLPlayground
{
    public void Play()
    {
        List<b> list = new List<b>()
        {    
            new b() {a = "Name"}, 
            new b() {a = "Age"}, 
        };
        string str = SerializeToString(list);
        Console.WriteLine(str); 
    }

    private string SerializeToString(object o)
    {
        if (o == null) return "";
        var xs = new XmlSerializer(o.GetType());

        XmlSerializerNamespaces tellTheSeriliserToIgnoreNameSpaces = new XmlSerializerNamespaces();
        tellTheSeriliserToIgnoreNameSpaces.Add(String.Empty, String.Empty);
        XmlWriterSettings tellTheWriterToOmitTheXmlDeclaration = new XmlWriterSettings { OmitXmlDeclaration = true };

        using (StringWriter writer = new StringWriter())
        {
            using (var xw = XmlWriter.Create(writer, tellTheWriterToOmitTheXmlDeclaration))
            {
                xs.Serialize(xw, o, tellTheSeriliserToIgnoreNameSpaces);
                return writer.ToString();
            }
        }
    }
}

[Serializable]
public class b
{
    public string a { get; set; }
} 
```

这是您想要实现的目标的一些见解，但对我来说，解决方案看起来相当深奥。您可能想尝试使用 XmlTextReader 的 SAX 方法并即时构建您的对象。

[C# Xml序列化、集合和根元素](https://stackoverflow.com/questions/11781606/c-sharp-xml-serialization-collection-and-root-element)

# android - 我可以从 Linux 命令行调用 Android LockScreen 函数吗？

> ID：13644014
> 
> 赞同：2
> 
> 时间：2012-11-30T11:06:42.397
> 
> 标签：android, lockscreen

在 Emerson EM543 平板电脑上运行 Android 4.0.4。无法安装 Google Play，因此必须安装 Android Market。Market 显然以某种方式禁用了 Android 系统 LockScreen。因此，现在尝试在启动时恢复锁屏（据我所知，可下载的应用程序不要在系统启动时锁定屏幕，这正是我想要的）。我有一个终端模拟器，想知道是否有一个 Linux 命令行参数可以用来在系统启动时启动 Droid 锁屏。有什么建议么？

我发现的所有关于“锁屏”的问题和解决方案都涉及程序化解决方案。我正在寻找可以在启动脚本中使用的命令行参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:17:39.933

以编程方式在 android 代码中，您可以使用 Device Admin API 来锁定屏幕，请参阅[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

```
devicepolicymanager.lockNow(); 
```

# php - 使用 Foursquare API 将更新发布到场所

> ID：13644018
> 
> 赞同：0
> 
> 时间：2012-11-30T11:06:47.353
> 
> 标签：php, api, foursquare

我不确定我是否遗漏了 4square API 上的任何内容...

我目前正在尝试发布场地的更新。

用户令牌是管理这个场所的用户（我可以通过 Foursquare 网站发布更新）

场地未使用商业页面。

有没有其他方法可以通过页面发布更新？

提前感谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:16:04.063

您正在寻找[pageupdates/add](https://developer.foursquare.com/docs/pageupdates/add)端点。场地必须与页面相关联才能发布页面更新。

# html - Outlook VML，模拟 CSS 重复/定位

> ID：13644022
> 
> 赞同：5
> 
> 时间：2012-11-30T11:07:08.117
> 
> 标签：html, email, vml

对于我们的电子邮件模板，我们目前正在使用下面的代码在某些 Outlook 版本中启用背景，但是，我一直在尝试围绕 VML 来查看是否可以在某种程度上模拟 CSS 属性，但信息很少我在 VML 上发现似乎不完整或难以理解。

在实践中，基本上只有两个主要感兴趣的属性，水平居中和仅重复 x。我会假设这些是如此基本的 VML 应该很容易支持它，但我无法弄清楚它似乎......

```
<!--[if gte mso 9]>
<v:background xmlns:v="urn:schemas-microsoft-com:vml" fill="t">
<v:fill type="tile" src="..." color="#000000"/>
</v:background>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:47:47.677

据我所知，VML`background`标签很难使用。它们似乎不是很灵活，我不确定你会有多少运气来尝试像处理 CSS 元素一样操作它们。

也就是说，`shape`标签`image`似乎更加合作（相对于它们的 VML 对应物）。我发现的关于该主题的最有趣的文章是这篇文章：http: [//iamskwerl.com/tech/2011/11/html-emails-outlook-and-background-images/](http://iamskwerl.com/tech/2011/11/html-emails-outlook-and-background-images/)

文章所说的是，Outlook 在遇到 CSS 属性时往往会丢弃它们（正如您毫无疑问地发现的那样）。然后，它提供了两种用于应用（基于图像的）背景的替代选项：

1.  `<body>`通过 CSS 在HTML 的标签上设置背景图像。Outlook 显然接受了这一点。
2.  使用 VML。

现在这篇文章讨论了将背景应用于表格单元格，但是它使用的技术应该同样适用于在其他上下文中应用背景。（在最坏的情况下，您甚至可以考虑使用表格，如果它可以为您提供您所追求的视觉布局）。

所以无论如何，文章作者使用的 VML 是这样的：

```
<!--[if gte mso 9]>
    <v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); (+ more CSS)' src="background url" />
    <v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style='behavior: url(#default#VML); (+ more CSS)'>
    <div>
<![endif]-->
<!-- An HTML table -->
<!--[if gte mso 9]>
    </div>
    </v:shape>
<![endif]--> 
```

因此，乍一看，如果您决定使用图像，您应该能够直接在图像标签本身上定义 CSS 属性。您的另一个选择是使用`shape`可能更适合您的 a ，因为您似乎想要使用计算过的背景。在这种情况下，根据此处找到的规范[http://www.w3.org/TR/NOTE-VML#](http://www.w3.org/TR/NOTE-VML#)：

> VML 形状和组元素完全参与 CSS2 视觉呈现模型。

在这种情况下，就像上面的例子一样，使用`style`标签将 CSS 属性应用于形状元素应该没有问题（如上面的例子所示）。这应该可以解决您的背景重复问题。

至于居中，规范规定如下：

> 中心-x，中心-y
> 
> 这些属性可用于指定元素在其父容器框中的块级框的中心。

这应该为您解决水平居中问题。有关信息...

> shape 和 group 元素包含其内容的块——它们定义了一个 CSS2“块级框”。

...因此某些布局问题应该可以通过应用包含`shape`或`group`元素来解决。

# c - 带有 setuid/功能的 stdbuf

> ID：13644024
> 
> 赞同：3
> 
> 时间：2012-11-30T11:07:14.723
> 
> 标签：c, linux, buffering, setuid, linux-capabilities

我正在读取另一个生成输出（缓慢且无限）的进程的输出。因为我想实时读取这些数据，所以我使用“stdbuf -oL”（行缓冲，数据是文本）。我无法控制生成过程，因此我无法修改源以强制刷新。

到目前为止 stdbuf 工作得很好，但是该进程使用 SOCK_RAW 并且需要以 root 身份运行，具有 setuid(0) 或`cap_net_raw`功能。当使用 setuid 或功能以非 root 身份运行时，stdbuf 似乎被忽略了。让我演示一下这个问题：

这是一个简单的作家：

```
#include <stdio.h>
#include <unistd.h>

int main(){
        int i;
        for ( i = 0;; i++){
                fprintf(stdout, "%d\n", i);
                sleep(1);
        }
} 
```

和一个简单的读者：

```
#include <stdio.h>

int main(){
        char* line = NULL;
        size_t n = 0;
        while (getline(&line, &n, stdin) != -1 ) {
                fputs(line, stdout);
        }
} 
```

正如预期的那样，`./writer | ./reader`在缓冲区填满之前，什么都不显示。前置`stdbuf -oL`启用行缓冲，我将这些行输入阅读器：

```
% stdbuf -oL ./writer | ./reader
0
1
2
... 
```

但是，如果我添加`cap_net_raw+ep`它会停止工作：

```
% sudo setcap cap_net_raw+ep ./writer
% stdbuf -oL ./writer | ./reader
(no output) 
```

使用 setuid 时观察到相同的行为：

```
% sudo chown root:root ./writer
% sudo chmod +s ./writer
% stdbuf -oL ./writer | ./reader
(no output) 
```

我有兴趣了解为什么会发生这种情况以及如何在不以 root 身份运行的情况下继续使用 stdbuf。我承认我并不完全了解 setuid 在幕后所做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:28:12.753

通过查看[stdbuf 源代码](http://coreutils.sourcearchive.com/documentation/8.0-2/stdbuf_8c-source.html)，它看起来可以通过设置 LD_PRELOAD 来工作。将 LD_PRELOAD 与 setuid 可执行文件或 sudo 一起使用当然存在安全问题。

我发现的一个建议是[禁用可执行文件的 noatsecure selinux 属性](https://stackoverflow.com/questions/9232892/ld-preload-with-setuid-binary)。

另一个更简单的选择是避免使用 stdbuf 并直接`fflush(stdout)`从您的源代码中调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T21:33:58.403

## 没有解决方案`LD_PRELOAD`

您可以使用作为( ) 包[`unbuffer`](http://expect.sourceforge.net/example/unbuffer.man.html)一部分的实用程序。是一个非常短的期望脚本。它不需要，因为它使用了另一个技巧。创建一个伪终端（如or ），因此使用执行的进程被愚弄认为它正在写入交互式设备，因此默认情况下它在.[`expect`](http://expect.sourceforge.net/)`expect-devel``unbuffer``LD_PRELOAD``expect``xterm``ssh``unbuffer``stdout`

在您的情况下使用：

```
unbuffer ./writer | ./reader 
```

如果`stdbuf`与该程序一起使用，则`unbuffer`很有可能也可以使用。因为`LD_PRELOAD`提出了一些限制`unbuffer`，比`stdbuf`. 相反，`stdbuf`它将适用于这些类型的可执行文件：

*   **设置**
*   **具有文件功能**
*   **静态链接**
*   **不使用标准`libc`**

# java - 在比较布尔值之前先完成执行 asynctask

> ID：13644029
> 
> 赞同：2
> 
> 时间：2012-11-30T11:07:20.930
> 
> 标签：java, android

我有 2 个课程：checkenrol.java 和 allcourses.java

checkenrol 扩展了 AsyncTask。我在 checkenrol 中还有一个名为“alreadyEnrolled”的全局布尔值。

allcourses 将使用 2 个参数执行 checkenrol。

这个想法是：

*   allcourses 将加载课程列表。
*   用户将点击一门课程，它会在后台运行 checkenrol 课程。如果用户已经注册，则全局布尔值“alreadyEnrolled”将设置为 true，否则为 false。
*   allcourses 现在将输出用户是否已经注册取决于布尔值

我的问题是 Asynctask 的执行和布尔值的比较是同时完成的。

为了进一步说明这里是我的代码片段：

这是我的 checkenrol.java

```
public class checkenrol extends AsyncTask <String, Void, String> {
    public static boolean alreadyEnrolled = false;
    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        ...

        if (res.equals("1")) {
            alreadyEnrolled = true;
        }
        else {
            alreadyEnrolled = false;
        }
        ...
    } ... 
```

这是我的 allcourses.java

```
 checkenrol ce = new checkenrol();
        ce.execute(param1, param2); 

        if (checkenrol.alreadyEnrolled == true) {
            //redirect to subject's home
            System.out.println("Already Enrolled");
        }
        else if (checkenrol.alreadyEnrolled == false){
            System.out.println("Not yet enrolled");
        } 
```

当我点击我已经注册的项目时，它会输出“尚未注册”，但我第二次点击它时，它会输出“已经注册”。

对不起，很长的帖子。希望你能帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:10:44.290

您应该在扩展中使用`onPreExecute()`方法`AsyncTask``class`

编辑：

```
public class checkenrol extends AsyncTask <String, Void, String> { 
 @Override
    protected String doInBackground(String... params) {
}

 @Override
    protected String onPreExecute() {
//Before starting doInBackground() 
//Will run in main thread

}
 @Override
    protected String onPostExecute() {
//After completing doInBackground() 
//Will run in main thread
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:25:54.993

将您要比较的内容放在执行后..这通常会在后台任务结束后执行...

公共类 checkenrol 扩展 AsyncTask {

```
public static boolean alreadyEnrolled = false;

protected String doInBackground(String... params) {

    if (res.equals("1")) {
        alreadyEnrolled = true;
    }
    else {
        alreadyEnrolled = false;
    } 
```

返回已经注册；

}

受保护的字符串 onPostExecute（字符串 r）{

checkenrol ce = 新的 checkenrol(); ce.execute(param1, param2);

```
 if (checkenrol.alreadyEnrolled == true) {
        //redirect to subject's home
        System.out.println("Already Enrolled");
    }
    else if (checkenrol.alreadyEnrolled == false){
        System.out.println("Not yet enrolled");
    } 
```

}

```
} 
```

# php - 如何知道您是否拥有启用网络功能的手机？

> ID：13644038
> 
> 赞同：-2
> 
> 时间：2012-11-30T11:08:01.947
> 
> 标签：php, facebook, facebook-graph-api, smartphone

目前我正在开发一个 facebook 应用程序。我必须知道用户是否有启用网络的智能手机。我如何从 facebook api 知道用户是否有启用网络的电话。

提示：如果用户有启用网络的手机，他们已经在 facebook 上激活它，以便在手机上使用 facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:42:14.130

[这个 php 类](https://github.com/serbanghita/Mobile-Detect)对于各种设备检测非常有用。

您也可以在该站点上找到一些有关如何使用它的示例

# c# - 如何比较 2 个数据表？

> ID：13644039
> 
> 赞同：0
> 
> 时间：2012-11-30T11:08:16.323
> 
> 标签：c#

我有 2 个数据表可以说：

```
 DataTable OldDataTable = HttpContext.Current.Cache["oldDataTable"];

|  ID  | Value
|  1   |   0
|  2   |   0

DataTable NewDataTable =/*Get New Record Data*/

|  ID  | Value
|  1   |   0
|  2   |   1          new Value
|  3   |   0          new Row 
```

我怎样才能比较这两个数据表来做一些工作，比如：

警告并更新新值，并将新行更新为`oldDataTable`.

然后另一个`newDatatable`来了，就像，

```
DataTable AnotherNewDataTable =/*Get New Record Data*/

|  ID  | Value
                          no more record in ID 1
|  2   |   1          
|  3   |   0 
```

从 中删除该行`oldDataTable`。

如何保持循环并与新数据表进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:30:03.307

检查**[选择](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)**属性`DataTable`

```
 DataRow[] result = NewDataTable.Select("ID <> '" + OldDataTable.Columns['ID'].ToString() + "'"
                + " OR" + " Value <>'" + OldDataTable.Columns['Value'].ToString() + "'"); 
```

上面的代码将两者之间**不匹配**的行存储`DataTables`在`DataRow`Array 中。这里`<>`的意思是“不等于”。 （上面的示例基于行数多于
的假设。）`NewDataTable``OldDataTable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:41:22.540

Using linq and 2 joins, it's easy to get the exact set of changed (added, deleted or updated) rows. Here's a complete example :

```
 class Data {
        public int ID;
        public int value;
    }

    enum RowState {
        Added,
        Updated,
        Deleted
    }

    List<Data> OldDataTable = new List<Data> { 
            new Data { ID = 1, value = 0 }, 
            new Data { ID = 2, value = 0 }, 
            new Data { ID = 3, value = 1 } 
    };
    List<Data> NewDataTable = new List<Data> { 
            new Data { ID = 1, value = 0 },
            new Data { ID = 2, value = 1 },
            new Data { ID = 4, value = 2 } 
    }; 

    void Test() {
        //updated and deleted rows
        var udRows = 
            from Old in OldDataTable
            join n in NewDataTable on Old.ID equals n.ID 
            into NewWithNullForDeleted
            from subNew in NewWithNullForDeleted.DefaultIfEmpty()
            where subNew == null || Old.value != subNew.value
            select new {
                ID = Old.ID,
                OldValue = (int?)Old.value,
                NewValue = subNew == null ? (int?)null : (int?)subNew.value,
                RowState = subNew == null ? RowState.Deleted : RowState.Updated
            };
        //added rows
        var aRows = 
            from New in NewDataTable
            join o in OldDataTable on New.ID equals o.ID 
            into OldWithNullForAdded
            from subOld in OldWithNullForAdded.DefaultIfEmpty()
            where subOld == null
            select new {
                ID = New.ID,
                OldValue = (int?)null,
                NewValue = (int?)New.value,
                RowState = RowState.Added
            };
        //merge
        var changedRows = udRows.ToList();
        changedRows.AddRange(aRows);

        //display
        foreach (var changedRow in changedRows) {
            Console.WriteLine("{0} : '{1}' -> '{2}' ({3})",
            changedRow.ID, 
            changedRow.OldValue, changedRow.NewValue,
            changedRow.RowState);
        }
    } 
```

Running `Test` method with this sample data will output the following :

```
2 : '0' -> '1' (Updated)
3 : '1' -> '' (Deleted)
4 : '' -> '2' (Added) 
```

Hope this helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:13:45.913

您需要遍历每个表的行，然后遍历该循环中的每一列以比较各个值。

这里有一个代码示例：[比较两个数据表](http://canlu.blogspot.com/2009/05/how-to-compare-two-datatables-in-adonet.html)

简而言之，方法应该是这样的：

```
bool compareTbls(Datatable OldDataTable, Datatable NewDataTable)
{
    if(OldDataTable.Rows.Count != NewDataTable.Rows.Count || OldDataTable.Columns.Count != NewDataTable.Columns.Count)
        return false;

    for(int i = 0; i < OldDataTable.Rows.Count; i++)
    {
        for(int c = 0; c < OldDataTable.Columns.Count; c++)
        {
            if(OldDataTable.Rows[i][c] != NewDataTable.Rows.Columns[i][c])
                return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:13:27.197

尝试以下代码来比较两个数据表：

```
private void button1_Click(object sender, EventArgs e)   
{      
    // Something to do with the Initialization of the FirstDataTable and SecondDataTable  
    DataTable dt;  
    dt = getDifferentRecords(FirstDataTable, SecondDataTable);  

    if (dt.Rows.Count == 0)  
        MessageBox.Show("Equal");  
    else 
        MessageBox.Show("Not Equal");
}

// Compare two DataTables and return a DataTable with DifferentRecords       
/// <summary>       
/// Compare two DataTables and return a DataTable with DifferentRecords   
/// </summary>   
/// <param name="FirstDataTable">FirstDataTable</param>   
/// <param name="SecondDataTable">SecondDataTable</param>   
/// <returns>DifferentRecords</returns>

public DataTable getDifferentRecords(DataTable FirstDataTable, DataTable SecondDataTable)   
{  
    //Create Empty Table  
    DataTable ResultDataTable = new DataTable("ResultDataTable");  

    //use a Dataset to make use of a DataRelation object  
    using (DataSet ds = new DataSet())  
    {      
        //Add tables      
        ds.Tables.AddRange(new DataTable[] { FirstDataTable.Copy(), SecondDataTable.Copy()  });

        //Get Columns for DataRelation  
        DataColumn[] firstColumns = new DataColumn[ds.Tables[0].Columns.Count];  
        for (int i = 0; i < firstColumns.Length; i++)  
        {  
            firstColumns[i] = ds.Tables[0].Columns[i];  
        }  

        DataColumn[] secondColumns = new DataColumn[ds.Tables[1].Columns.Count];  
        for (int i = 0; i < secondColumns.Length; i++)  
        {  
            secondColumns[i] = ds.Tables[1].Columns[i];  
        }  

        //Create DataRelation  
        DataRelation r1 = new DataRelation(string.Empty, firstColumns, secondColumns, false);  
        ds.Relations.Add(r1);  

        DataRelation r2 = new DataRelation(string.Empty, secondColumns, firstColumns, false);  
        ds.Relations.Add(r2);  

        //Create columns for return table  
        for (int i = 0; i < FirstDataTable.Columns.Count; i++)  
        {  
            ResultDataTable.Columns.Add(FirstDataTable.Columns[i].ColumnName, FirstDataTable.Columns[i].DataType);  
        }  

        //If FirstDataTable Row not in SecondDataTable, Add to ResultDataTable.  
        ResultDataTable.BeginLoadData();  
        foreach (DataRow parentrow in ds.Tables[0].Rows)  
        {  
            DataRow[] childrows = parentrow.GetChildRows(r1);  
            if (childrows == null || childrows.Length == 0)  
                ResultDataTable.LoadDataRow(parentrow.ItemArray, true);  
        }  

        //If SecondDataTable Row not in FirstDataTable, Add to ResultDataTable.  
        foreach (DataRow parentrow in ds.Tables[1].Rows)  
        {  
          DataRow[] childrows = parentrow.GetChildRows(r2);  
          if (childrows == null || childrows.Length == 0)  
            ResultDataTable.LoadDataRow(parentrow.ItemArray, true);  
        }  
        ResultDataTable.EndLoadData();  
    }

    return ResultDataTable;   
} 
```

# c# - 获取具有发布权限的访问令牌 c#

> ID：13644041
> 
> 赞同：1
> 
> 时间：2012-11-30T11:08:19.170
> 
> 标签：c#, facebook, facebook-c#-sdk

```
fb = new FacebookClient();
            dynamic result = fb.Get("oauth/access_token", new
            {
                client_id = "app_id",
                client_secret = "app_secret",
                grant_type = "client_credentials",
                scope = "publish_stream,manage_pages"
            }); 
```

我正在使用此代码获取访问令牌以发布到我的页面。我获得的访问令牌比我从图形 api 资源管理器获得的访问令牌短，当我调试它时，它给了我应用程序 ID xxxxxxxxx 和应用程序的名称，没有其他信息（过期，已发布，...）

任何人都可以帮助获得与图形 api 资源管理器相同的访问令牌，并且可以用来发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:37:44.300

`/oauth/access_token`是请求*应用*访问令牌的端点。并且要求`scope`应用程序访问令牌是无稽之谈，应用程序访问令牌没有“范围”。

如果要获取*页面*访问令牌，则必须按照此处所述的流程进行操作：[以页面身份登录](https://developers.facebook.com/docs/howtos/login/login-as-page/)

# mysql - 如何优化对大表的查询

> ID：13644043
> 
> 赞同：0
> 
> 时间：2012-11-30T11:08:39.887
> 
> 标签：mysql, optimization, mysql-slow-query-log

我现在有一张包含 18,310,298 条记录的表。

下一个查询

```
SELECT COUNT(obj_id) AS cnt
FROM
`common`.`logs`
WHERE 
`event` = '11' AND
`obj_type` = '2' AND
`region` = 'us' AND 
DATE(`date`) = DATE('20120213010502'); 
```

具有下一个结构

```
CREATE TABLE `logs` (
  `log_id` int(11) NOT NULL AUTO_INCREMENT,
  `event` tinyint(4) NOT NULL,
  `obj_type` tinyint(1) NOT NULL DEFAULT '0',
  `obj_id` int(11) unsigned NOT NULL DEFAULT '0',
  `region` varchar(3) NOT NULL DEFAULT '',
  `date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`log_id`),
  KEY `event` (`event`),
  KEY `obj_type` (`obj_type`),
  KEY `region` (`region`),
  KEY `for_stat` (`event`,`obj_type`,`obj_id`,`region`,`date`)
) ENGINE=InnoDB AUTO_INCREMENT=83126347 DEFAULT CHARSET=utf8 COMMENT='Logs table' | 
```

和 MySQL 解释显示下一个

```
+----+-------------+-------+------+--------------------------------+----------+---------+-------------+--------+----------+--------------------------+
| id | select_type | table | type | possible_keys                  | key      | key_len | ref         | rows   | filtered | Extra                    |
+----+-------------+-------+------+--------------------------------+----------+---------+-------------+--------+----------+--------------------------+
|  1 | SIMPLE      | logs  | ref  | event,obj_type,region,for_stat | for_stat | 2       | const,const | 837216 |   100.00 | Using where; Using index |
+----+-------------+-------+------+--------------------------------+----------+---------+-------------+--------+----------+--------------------------+
1 row in set, 1 warning (0.00 sec) 
```

在每日高峰使用时间运行此类查询大约需要 5 秒。

我该怎么做才能让它更快？

**更新：**关于我修改 INDEX 并在 WHERE 子句中取消 DATE 函数的所有评论

```
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| logs  |          0 | PRIMARY  |            1 | log_id      | A         |    15379109 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | event    |            1 | event       | A         |          14 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | obj_type |            1 | obj_type    | A         |          14 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | region   |            1 | region      | A         |          14 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | for_stat |            1 | event       | A         |         157 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | for_stat |            2 | obj_type    | A         |         157 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | for_stat |            3 | region      | A         |         157 |     NULL | NULL   |      | BTREE      |         |
| logs  |          1 | for_stat |            4 | date        | A         |         157 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+

    mysql> explain extended SELECT COUNT(obj_id) as cnt 
    ->     FROM `common`.`logs` 
    ->     WHERE `event`= '11' AND 
    ->     `obj_type` = '2' AND 
    ->     `region`= 'est' AND 
    ->     date between '2012-11-25 00:00:00' and '2012-11-25 23:59:59';
+----+-------------+-------+-------+--------------------------------+----------+---------+------+------+----------+-------------+
| id | select_type | table | type  | possible_keys                  | key      | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-------+-------+--------------------------------+----------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | logs  | range | event,obj_type,region,for_stat | for_stat | 21      | NULL | 9674 |    75.01 | Using where |
+----+-------------+-------+-------+--------------------------------+----------+---------+------+------+----------+-------------+ 
```

它似乎运行得更快。感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:22:31.813

EXPLAIN 输出显示查询仅使用`for_stat`索引的前两列。

这是因为查询没有`obj_id`在 WHERE 子句中使用。如果您创建一个没有的新键`obj_id`（或修改现有键以重新排序列），则可以使用更多键，您可能会看到更好的性能：

```
KEY `for_stat2` (`event`,`obj_type`,`region`,`date`) 
```

如果它仍然太慢，`DATE()`如 Salman 和 Sashi 所说，更改使用 的最后一个条件可能会改善情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:12:21.077

列上的日期函数`date`正在进行全表扫描。尝试这个 ：：

```
SELECT COUNT(obj_id) as cnt
                FROM
                    `common`.`logs` 
                WHERE 
                    `event`      = 11
                AND
                    `obj_type`   = 2

                AND
                    `region`     = 'us'
                AND
                    `date` = DATE('20120213010502') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:37:31.323

是Mysql，您应该按排序规则放置索引列；表中可能的值较少 - 靠近左侧。您也可以尝试将列更改`region`为 enum() 并尝试`date`使用`BETWEEN`子句进行搜索。Mysql 没有在索引中使用第三列，因为它的使用比过滤需要更多的努力（这在 Mysql 中很常见）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:19:27.103

@Joni 已经解释了您的索引有什么问题。对于查询，我假设您的示例查询`2012-02-13`不考虑时间选择所有记录。您可以更改 where 子句以使用`>=`而`<`不是强制转换`DATE`：

```
SELECT COUNT(obj_id) AS cnt
FROM
`common`.`logs`
WHERE 
`event` = 11 AND
`obj_type` = 2 AND
`region` = 'us' AND 
`date` >= DATE('20120213010502') AND
`date` <  DATE('20120213010502') + INTERVAL 1 DAY 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:21:02.943

由于日志记录（插入）也需要快速，因此尽可能少地使用索引。

评估可能需要很长时间，只要是管理员，不一定需要索引。

```
CREATE TABLE `logs` (
  `log_id` int(11) NOT NULL AUTO_INCREMENT,
  `event` tinyint(4) NOT NULL,
  `obj_type` tinyint(1) NOT NULL DEFAULT '0',
  `obj_id` int(11) unsigned NOT NULL DEFAULT '0',
  `region` varchar(3) NOT NULL DEFAULT '',
  `date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`log_id`),
  KEY `for_stat` (`event`,`obj_type`,`region`,`date`)
) ENGINE=InnoDB AUTO_INCREMENT=83126347 DEFAULT CHARSET=utf8 COMMENT='Logs table' | 
```

关于日期搜索@SashiKant 和@SalmanA 已经回答。

# android - (Mono For) Android Emulator 更改虚拟键盘

> ID：13644044
> 
> 赞同：0
> 
> 时间：2012-11-30T11:08:44.210
> 
> 标签：android, xamarin.android, emulation

我想更改模拟器虚拟键盘。

现在看起来像这样：

![在此处输入图像描述](../Images/0c8111cb9fbb77b23bc851d8a32e712e.png)

应该是smth。像那样：

![在此处输入图像描述](../Images/0fafc3c27e3f0104dabdcea7a24081ea.png)

我尝试将其设置`android:inputType`为文本，但它没有用。我也想知道，为什么会有中文字母，有没有办法设置位置或土地？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:31:41.780

你不能在你的应用程序中这样做......这是操作系统设置

您必须午餐“设置”应用程序并选择键盘：

“ `Locale & text`”或“ `Language & input`”或类似的东西（取决于安卓版本）

![1.6](../Images/877fe2ffb8ad79917abf76f6fd91574d.png) ![4.1](../Images/bb129e2b52f32d6214e8c9cb97d37ee0.png)

# html - 背景大小问题：黑莓上的 100%

> ID：13644045
> 
> 赞同：0
> 
> 时间：2012-11-30T11:08:45.553
> 
> 标签：html, css, mobile, blackberry, device

我正在使用以下代码将 h1 标签中“徽标”的背景图像设置为徽标。

```
h1#logo {
margin: 5px 0 0 0px;
background: transparent url(../../assets/images/applewood_logo.png) no-repeat;
height:150px;
display:block;
cursor:pointer;
color: #ccc;
text-indent:-1900px;
max-width:145px;
background-size:100%;
z-index:500; 
```

}

它在除徽标边缘被切断的黑莓之外的所有设备上都能完美运行。这是该网站的链接：http: [//www.applewoodindependent.co.uk](http://www.applewoodindependent.co.uk)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:30:24.597

用于**css3-media-queries**

**添加到这个 CSS**

```
@media only screen and (min-width:50px) and (max-width:480px) {
    h1#logo{
        background-size: auto 81px;
    }

} 
```

***[更多信息](http://webdesignerwall.com/tutorials/css3-media-queries)***

# optimization - 对有序数据进行联接的查询优化

> ID：13644046
> 
> 赞同：2
> 
> 时间：2012-11-30T11:08:45.190
> 
> 标签：optimization, join

我的问题涉及查询 sql 的优化。

我的查询检索成员列表及其上一次培训。

为了获得最新的培训，我对返回所有成员的完整培训列表的查询结果进行了联接。

此查询有效，但速度很慢，如果有人能提供更快执行的解决方案，我真的很感兴趣。

我的查询（大约 16 秒）：

```
SELECT 
    m.nom,
    m.prenom,
    m.ville,
    m.maj,
    mbf.libelle,
    mbf.datefin,
    m.id as idmb
FROM
    membres m
    LEFT JOIN (
        select *
        from membreform
        where idformation = 1
        order by datefin DESC
    ) as mbf ON mbf.idmembre = m.id
WHERE
    role > 0 AND visible = 1
group by m.id
ORDER BY m.maj DESC
limit 0 , 20 
```

我的数据结构：

> 成员表单（1000 个条目）

*   `id`int(11) NOT NULL AUTO_INCREMENT,
*   `idmembre`int(11) 非空，
*   `libelle`varchar(128) 非空，
*   `idformation`int(11) 非空，
*   `datedebut`日期不为空，
*   `datefin`date NOT NULL DEFAULT '0000-00-00',
*   `descript`文本不为空，
*   键`id`( `id`),
*   键`idmembre`( `idmembre`),
*   键`idformation`( `idformation`)

> 成员（500 个条目）

*   `id`int(3) NOT NULL AUTO_INCREMENT,
*   `nom`varchar(255) 非空，
*   `prenom`varchar(255) 非空，
*   `ville`varchar(255) 非空，
*   `email`varchar(255) 非空，
*   `maj`日期时间不为空，
*   `role`tinyint(4) NOT NULL DEFAULT '1',
*   主键 ( `id`),
*   键`role`( `role`),
*   键`maj`( `maj`)

我以另一种方式进行了测试（大约 0.40 秒），但我觉得不是很干净

```
SELECT 
    m.nom,
    m.prenom,
    m.ville,
    m.maj,
    m.id as idmb,
    (select 
            libelle
        from
            membreform
        where
            idformation = 1
                AND m.id = membreform.idmembre
        order by datefin DESC
        limit 1
    ) libelle,
    (select 
            datefin
        from
            membreform
        where
            idformation = 1
                AND m.id = membreform.idmembre
        order by datefin DESC
        limit 1
    ) datefin
FROM
    membres m
WHERE
    role > 0 AND visible = 1
group by m.id
ORDER BY m.maj DESC
limit 0 , 20 
```

我愿意接受任何建议，因为我有点卡住了

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:30:54.330

您可以使用临时表来提高性能。例如（MS SQL）第 1 步 - 通过添加所有相关的 where 条件将 memberform 数据放入临时表

select * INTO #TempMembreform from membreform where idformation = 1 ... order by datefin DESC

2 步 - 像在上面的第一个示例中那样执行左外连接。例如

```
SELECT 
    m.nom,
    m.prenom,
    m.ville,
    m.maj,
    mbf.libelle,
    mbf.datefin,
    m.id as idmb
FROM
    membres m
    LEFT JOIN #TempMembreForm as mbf 
        ON mbf.idmembre = m.id
WHERE
    role > 0 AND visible = 1
group by m.id
ORDER BY m.maj DESC
limit 0 , 20 
```

3 步 - 如果数据不是关键任务（例如 Bank tracnsactions ），则添加 NOLOCK 关键字

```
select *
INTO #TempMembreform 
from membreform WITH(NOLOCK)
where idformation = 1
order by datefin DESC

SELECT 
    m.nom,
    m.prenom,
    m.ville,
    m.maj,
    mbf.libelle,
    mbf.datefin,
    m.id as idmb
FROM
    membres m with(nolock)
    LEFT JOIN #TempMembreForm as mbf 
        ON mbf.idmembre = m.id
WHERE
    role > 0 AND visible = 1
group by m.id
ORDER BY m.maj DESC
limit 0 , 20 
```

[我的简历](http://qwuizno.com/)

# c# - 黑白 MS XML 架构与 XSD 架构的区别

> ID：13644047
> 
> 赞同：0
> 
> 时间：2012-11-30T11:08:47.140
> 
> 标签：c#, xml, xsd, xdr

[我一直在减少一段时间，但在此](http://msdn.microsoft.com/en-us/library/windows/desktop/ms760255%28v=vs.85%29.aspx)链接中找不到有关 Microsoft 提供的 XML Schema 的任何教程或资源。看起来像：

```
<Schema xmlns="urn:schemas-microsoft-com:xml-data" 
  xmlns:dt="urn:schemas-microsoft-com:datatypes">
  <AttributeType name='studentID' dt:type='string' required='yes'/>
  <ElementType name='name' content='textOnly'/>
  <ElementType name='GPA' content='textOnly' dt:type='float'/>
  <ElementType name='student' content='mixed'>
    <attribute type='studentID'/>
    <element type='name'/>
    <element type='GPA'/>
  </ElementType>
  <ElementType name='class' content='eltOnly'>
    <element type='student'/>
  </ElementType>
</Schema> 
```

我知道这不是 W3C 推荐的 XSD 格式……我很难知道如何阅读和制作标准格式的 XSD。我也希望从中生成 C# 类。

任何帮助，将不胜感激。它确实混淆了我对 XML 模式的理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:24:32.313

那是一个 XDR 架构。如果您想在安装了 .NET 框架或 Visual Studio SDK 的 Windows 上将该文件转换为 W3C XML 模式，您可以使用`xsd.exe`命令行工具，即`xsd.exe schema.xdr`创建一个相应的`schema.xsd`文件。然后您可以申请`xsd.exe`在`schema.xsd`C# 或 VB.NET 中创建类文件以与`System.Xml.Serialization.XmlSerializer`.

当我在您的示例上运行 VS 2012`xsd.exe`时，它会创建以下 W3C XSD 架构：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="class">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="student" minOccurs="0" maxOccurs="unbounded">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="name" type="xs:string" minOccurs="0" msdata:Ordinal="1" />
                    <xs:element name="GPA" type="xs:double" minOccurs="0" msdata:Ordinal="2" />
                  </xs:sequence>
                  <xs:attribute name="studentID" type="xs:string" />
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# architecture - 我应该使用什么图表方法来记录现有系统？

> ID：13644052
> 
> 赞同：1
> 
> 时间：2012-11-30T11:09:13.160
> 
> 标签：architecture, uml, reverse-engineering, diagram

我被要求参与一个复杂的现有系统的文档（自然没有现有的文档）。

要捕获的相关详细信息将是：

*   主机名、IP 地址和网络
*   集群的组成
*   软件包名称
*   配置文件的路径
*   一些关键配置值
*   不同主机和这些主机上的服务之间的交互顺序
*   不同组件之间传递的信息
*   系统和子系统的所有权

我想使用一种标准化的方法，或者至少是一些最佳实践，所以我正在考虑使用诸如 UML 部署图和组件图之类的东西，但我是 UML 新手，所以我不确定哪个是最好的。我真的很想使用一种可以捕获所有内容的图表，但如果不是那么尽可能少。

我猜一些相关信息可能不适合图表，在这种情况下，我想知道哪种类型的文档将包含详细信息。

我应该生产什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:46:49.127

如果你在同一张图表中塞进太多的顾虑，你会迷惑读者。更好的方法是使用多个图表（加上相关的文本和表格）。

我建议至少：

*   描述组件在运行时如何相互交互的视图，并描述了连接它们的接口。这最好与每个组件的责任描述相关联。
*   描述如何部署组件的视图。
*   描述如何构建各种模块的视图。

各种类型的 UML 图可用于各种目的。就个人而言，我倾向于更多地依赖带有图像和颜色的临时图表。我觉得 UML 图太枯燥了。当然，当您使用自定义图表时，始终提供一个键或图例框很重要。

# django - Django DB 数据到 HTML 表

> ID：13644056
> 
> 赞同：0
> 
> 时间：2012-11-30T11:09:21.880
> 
> 标签：django, templates

好的，这或多或少是“在表中存在具有两个外键的稀疏数据，行中的 key1 和列中的 key2”。我想，这很常见，但有点扭曲。

在 Django 中，我需要为一组学生制作一个包含学期分数的页面。它应该如下所示：

```
          密码学介绍 | 离散数学 | ...
         Chkpt1 Chkpt2 Chkpt3 | Chkpt1 Chkpt2 Chkpt3 | ...
爱丽丝 15 26 47 | 10 20 - | ...
鲍勃 25 54 73 | 25 54 - | ...  
查克 33 66 99 | 33 60 - | ...     
...

```

一个小组的学生都修相同的课程，学校规定了每学期3个考点，由所有教师报告分数。如果教师尚未上交分数（上例中离散数学中的 Chkpt3），则某些列可能尚未填写。

成绩参考学生、课程和检查点的模型。检查点参考学期。学生参考组。

问题是如何将数据传递给模板。我从数据库中获取数据

```
reportgrades = Grade.objects.filter(student__group__id=group_id, 
                                    checkpoint__semester=semester) 
```

然后我：

1.  在嵌套循环中创建嵌套字典`gr[studid][courseid][chkptid]`，用破折号填充它，
2.  循环`reportgrades`将值放入此字典中，覆盖存在成绩的破折号，

    ```
    no_grade = u'—'
    grades = {}
    for student in students:
        grades[student.id] = {}
        for course in courses:
            grades[student.id][course.id] = {}
            for chkpt in checkpoints:
                grades[student.id][course.id][chkpt.id] = no_grade

    for g in reportgrades:
        grades[g.student.id][g.course.id][g.checkpoint.id] = g.points 
    ```

3.  创建自定义模板标签来提取这些，

    ```
    @register.filter
    def getitem ( item, param1 ):
        return item.get(param1) 
    ```

4.  `for`在模板中的 3 嵌套中使用它

    ```
    {% for s in students %}
    <tr>
        <td>{{ s }}</td>
        {% for c in courses %}
            {% for tp in test_periods %}
            <td>{{ grades| getitem:s.id | getitem:c.id | getitem:tp.id }}</td>
            {% endfor %}
        {% endfor %}
    </tr>
    {% endfor %} 
    ```

要获得一张简单的桌子，要做很多事情，不是吗？我考虑了一个大小为 3 x NUM_STUDENTS x NUM_COURSES 的线性列表。也不是很漂亮。更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:01:54.273

正如 RickyA 建议的那样，让您的模板代码尽可能简单。而是在您的视图中进行复杂的数据转换。

由于您在顶部和侧面都有标题，因此我会将它们存储在他们自己的列表中。然后我会将实际数据存储在列表列表中。例如，在您的视图代码中：

```
student = Student.objects.all()
context['classes'] = [class.name for class in Class.objects.all()]
context['checkPoints'] = range(1, 4)
context['data'] = ... 

(code to flatten checkpoints for each students in to flat list, 
then make list of these lists, don't forget to add the student 
name as the first item in each row) 
```

在您的模板中，您可以执行类似的操作

```
<table>
<thead>
<tr>
<th></th>
{% for class in classes %}
<th colspan="3">{{ class }}</th>
{% endfor %}
</tr>
<!-- something similar for checkpoints -->
</thead>
<tbody>
{% for row in data %}
<tr>
{% for item in row %}
{% if not forloop.counter0 %}
<th>{{ item }}</th>
{% else %}
<td>{{ item }}</td>
{% endif %}
{% endfor %}
</tr>
{% endfor %}
</tbody>
</table> 
```

我认为这是有效的 Django 模板代码。我最近一直在使用 Jinja2，所以如果我添加了一个不起作用的功能，我深表歉意，但应该没问题。

# python - 非交互式 Python 命令历史

> ID：13644057
> 
> 赞同：0
> 
> 时间：2012-11-30T11:09:23.430
> 
> 标签：python, command, backlog

我知道 python 解释器和 ipython 有一种简单的方法来浏览命令的历史。那是在交互式 Python 编程中。

我的问题/疑问：我有一个基于 GUI 的 Python 工具，它允许我在点击“绘图”按钮之前单击并在字段中输入值，然后我会在屏幕上得到一个绘图。我正在寻找的是一种访问完全再现情节的“最小脚本”的方法。

所以我想知道是否有一种方法可以请求一个非交互式 Python 实例通过的所有命令的积压。

如果它不是内置的，有人可以建议一种在运行时自动将函数调用转储到文件中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:17:18.093

最简单的方法是[腌制](http://docs.python.org/2/library/pickle.html)您的绘图对象。然后你可以重新加载pickle文件，对象就会像转储时一样在内存中。

在您的程序中实现转储和重新加载功能只需要几行代码。

这当然不会为您提供命令列表或类似的东西来重新生成图形，但它确实为您提供了对象的确切状态。

如果您`matplotlib`用于绘图，则[图像本身不是 picklable](https://stackoverflow.com/questions/4348733/saving-interactive-matplotlib-figures)。但是您可以创建一个包含您输入的所有信息的类，这些信息传递给`matplotlib`例程并腌制，再次保存状态。

# facebook - 如何将 App id 赋予 Facebook 分享按钮

> ID：13644061
> 
> 赞同：1
> 
> 时间：2012-11-30T11:09:33.120
> 
> 标签：facebook, facebook-sharer

我在我的网站上使用共享按钮，代码是

```
<a href="http://www.facebook.com/sharer.php?u=<?php echo $pageUrl; ?>" title="Facebook share" ><img style="margin-right: 10px;" src="_images/facebook_share.png" alt="facebook share button"/></a> 
```

并且`$pageUrl`是使用 PHP 从地址栏中获取的当前页面 url

我需要什么我必须为此共享添加应用程序 ID，并且应该显示在我的应用程序站点中如何执行此操作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:41:56.227

不能，sharer.php 端点很旧，不支持 API 的大部分当前功能 - 请查看Like[按钮](https://developers.facebook.com/docs/reference/plugins/like/)或[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)

# asp.net-mvc - 我可以在我的登录页面上显示一条消息，说明授权失败吗？

> ID：13644062
> 
> 赞同：1
> 
> 时间：2012-11-30T11:09:35.310
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用自定义授权方案，当用户未获得授权时，我返回一个`HttpUnauthorizedResult`. 这会导致用户被重定向到登录页面。是否有可能在登录页面中检测到由于授权失败而正在使用它并告诉用户这一点？如果是这样，我该怎么做？

如果我可以告诉用户“您需要以具有 x 角色的用户身份登录才能执行您请求的操作”或类似的内容，那将是一个奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:22:08.073

与其返回 HTTP 401，不如返回一个包含您想要的消息的网页，以及一个转到登录页面的按钮。

实际上，您认为您正在发送未经授权的响应，但实际上 ASP.NET 正在拦截该 HTTP 401 响应并将 HTTP 302（重定向）发送到您的登录页面。因此，如果您想要自定义消息，只需将自己重定向到您想要的页面。

干杯。

更新：

如果您创建自己的授权过滤器，您可以定义如果用户未获得授权/身份验证会发生什么：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    readonly String _customError;

    public MyAuthorizeAttribute(String customError)
    {
        _customError = customError;
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        FormsAuthentication.SignOut();

        filterContext.Controller.TempData["Error"] = _customError;
        filterContext.Result = new RedirectResult("~/Account/yourErrorView");
    }
} 
```

（未测试）

这样你就可以这样使用你的属性：

```
 [MyAuthorize("You are not authorized to see this thing")]
    public ActionResult MyActionMethod()
    {
        return View();
    } 
```

然后用户将被重定向到“~/Account/yourErrorView”，并在 TempData 中找到自定义错误消息。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:39:44.683

使用 ActionFilterAttribute 而不是 AuthorizeFilterAttribute 将其指向您的错误处理页面。

```
public class RoleAuthorize: ActionFilterAttribute
    {

      public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
             var controller = (YourController)filterContext.Controller;

        try
                {
                    if (!controller.CheckForRoleMethod())
                    {
                        throw new System.Security.SecurityException("Not Authorized!");
                    }
                }
                catch (System.Security.SecurityException secEx)
                {
                    if (secEx != null)
                    {
                        // I use TempData for errors like these. It's just me.
                        TempData["ErrorMessage"] = secEx.Message;
                        filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary { { "controller", "ErrorHandler" }, { "action", "Error" } });
                    }
                }     

        }

      base.OnActionExecuting(filterContext);
    } 
```

您必须在被装饰的控制器上创建一个单独的方法来检查缓存的用户是否已授权：

```
public class ApplicationController : Controller
    {
     public bool CheckForRoleMethod(){
          // get formsauthentication details to retrieve credentials
          // return true if user has role else false
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:20:35.747

我认为最好传递额外的参数来描述错误的原因，例如：

> /帐户/登录？错误=4

并在登录操作中检查是否存在错误。

此外，您可以以不同的方式存储错误消息：会话、cookie。

# user-interface - 在 Haskell (GTK) 中更改按钮文本的颜色

> ID：13644064
> 
> 赞同：1
> 
> 时间：2012-11-30T11:09:37.947
> 
> 标签：user-interface, haskell, text, colors, gtk

如何更改 Haskell (GTK) 中按钮文本的颜色？

我目前使用的代码是：

```
button <- xmlGetWidget xml castToButton "buttonLabel" 
```

我应该从程序代码中更改颜色，还是也可以在 XML 中进行更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:24:31.347

[Gtk2hs](http://hackage.haskell.org/package/gtk-0.12.3.1)非常紧密地遵循 GTK API，因此最好在不参考 Haskell 的情况下表达此类问题。

我的[答案基于 C 中相同问题](https://stackoverflow.com/questions/1706550/gtk-modifying-background-color-of-gtkbutton)的答案。

基本上，您必须使用以下命令更改*小部件*（这是您的按钮）的颜色[`widgetModifyFg`](http://hackage.haskell.org/packages/archive/gtk/0.12.3.1/doc/html/Graphics-UI-Gtk-Abstract-Widget.html#v:widgetModifyFg)：

```
widgetModifyFg button StateNormal (Color 65535 0 0) 
```

至于您是否应该从代码或 XML 更改颜色，这取决于。如果可以，通常最好在 XML 中以声明方式进行；否则，只需在代码中以编程方式进行。

# matlab - MCR 安装

> ID：13644067
> 
> 赞同：0
> 
> 时间：2012-11-30T11:09:51.930
> 
> 标签：matlab, matlab-compiler

所以我有一个我在 Matlab R2011b 中制作和编译的 MATLAB 程序。现在我想分发编译后的版本。我了解用户必须在他们的计算机上安装 MCR 才能运行我的程序。我的问题是：如果这个用户已经在他的系统上安装了一些其他版本的 MATLAB，它会有什么不同。我检查了 MATLAB 帮助，这是写的

“Windows。要针对 MCR 安装运行已部署的组件，mcr_root\ver\runtime\win32|win64 必须出现在 matlabroot\runtime\win32|win64 之前的系统路径中。

要针对 MCR 安装运行已部署的组件，mcr_root\ver\runtime\win32|win64 必须出现在 matlabroot\runtime\win32|win64 之前的系统路径中。

如果 mcr_root\ver\runtime\arch 首先出现在编译的应用程序路径上，则应用程序使用 MCR 安装区域中的文件。

如果 matlabroot\runtime\arch 首先出现在已编译的应用程序路径上，则应用程序使用 MATLAB Compiler 安装区域中的文件。”

那么每个用户是否必须按照指示更改他的系统路径，或者即使没有此更改，我的程序也能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:54:11.503

我可以从我自己的经验来看：

## Part 1，matlab + MCR 同版本

我想，这只是一个建议……我从不关心它，我从来没有遇到过问题……

它会起作用，而且你很可能不会注意到任何区别。我刚刚在 PATH 中颠倒了这些记录，我编译的应用程序仍在工作。

## 第 2 部分，几个不同版本的 MCR

多个 MCR，比如 R2010b 和 R2012b 不会干扰。测试了 100 多次。因此，没有 Matlab 的没有经验的最终用户不必编辑 PATH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:31:09.157

是的，如果目标机器安装了某个版本的 Matlab，则可能无法按预期工作。我说可能好像您在目标机器上安装了相同版本的 Matlab，有些事情可能会正常工作。

为避免所有这些，您必须确保 MCR 首先出现在路径上。

要在本地开发机器上的 MCR 上运行应用程序，您应该确保 MCR 路径出现在 Matlab 路径之前。

# android - 如何将图像保存到外部存储而不是保存在内部

> ID：13644072
> 
> 赞同：4
> 
> 时间：2012-11-30T11:10:04.607
> 
> 标签：android, sd-card

我不明白为什么人们说它保存在外部存储中，因为当我使用此代码并且我签入我的 SD 卡时没有文件

代码这个

```
 OutputStream imageFileOS;
        int imageNum = 0;
        Intent imageIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        File imagesFolder = new File(Environment.getExternalStoragePublicDirectory( Environment.DIRECTORY_PICTURES), "Punch");
        if(!imagesFolder.exists()){
            imagesFolder.mkdirs(); // <----
        }
        String fileName = "image_" + String.valueOf(imageNum) + ".jpg";
        File output = new File(imagesFolder, fileName);
        while (output.exists()){
            imageNum++;
            fileName = "image_" + String.valueOf(imageNum) + ".jpg";
            output = new File(imagesFolder, fileName);
        }
        Uri uriSavedImage = Uri.fromFile(output);
        imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage); 
```

当我运行代码并检查时，它在“内部存储器/图片/打孔/image_0.jpg”中有文件，但在 SD 卡中看不到（SD 卡 = 外部存储卡 16 GB）请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:58:35.003

我认为你对做什么感到困惑`getExternalStorageDirectory`。

它获取设备制造商指定的主存储目录。这通常是“sdcard”。您评论中指定的“External_sd”实际上是辅助存储目录，在给定方法中不会返回。

这仍然不是受保护的内部存储，并且可以在连接时由 PC 安装和访问。

来自安卓文档：

> 注意：不要被这里的“外部”这个词弄糊涂了。最好将此目录视为媒体/共享存储。它是一个文件系统，可以保存相对大量的数据，并且在所有应用程序之间共享（不强制执行权限）。传统上这是一张 SD 卡，但它也可以作为设备中的内置存储实现，与受保护的内部存储不同，并且可以作为文件系统安装在计算机上。

# c# - 使用 lambda/linq 查询返回组中的最小值

> ID：13644078
> 
> 赞同：9
> 
> 时间：2012-11-30T11:10:55.333
> 
> 标签：c#, .net, linq, lambda, linq-to-objects

我需要帮助创建一个 lambda 表达式来查询以下列表，以检索每个渠道中价格最低的商品。即对于本示例项目 A、D 和 G

```
class Radio
{
    public string Name { get; set; }
    public int Channel { get; set; }
    public decimal Price { get; set; }
}

List<Radio> radios = new List<Radio>();
radios.Add(new Radio() { Name = "A", Channel = 1, Price = 10 });
radios.Add(new Radio() { Name = "B", Channel = 1, Price = 20 });
radios.Add(new Radio() { Name = "C", Channel = 1, Price = 30 });
radios.Add(new Radio() { Name = "D", Channel = 2, Price = 10 });
radios.Add(new Radio() { Name = "E", Channel = 2, Price = 20 });
radios.Add(new Radio() { Name = "F", Channel = 2, Price = 30 });
radios.Add(new Radio() { Name = "G", Channel = 3, Price = 10 });
radios.Add(new Radio() { Name = "H", Channel = 3, Price = 20 });
radios.Add(new Radio() { Name = "I", Channel = 3, Price = 30 }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-30T11:21:37.523

使用 Linq，

First Group using [Enumerable.GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)
Then Sort using [Enumerable.OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)
Then Take [First](http://msdn.microsoft.com/en-us/library/bb291976.aspx) of each sorted items in group

```
 radios.GroupBy(x=> x.Channel).Select(x=>x.OrderBy(y=>y.Price)).Select(x=>x.First()); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-30T11:57:48.980

您也可以这样做，而无需对每个组进行昂贵的排序：

```
radios.GroupBy(x => x.Channel).Select(g =>
    g.Aggregate((r1, r2) => r1.Price < r2.Price ? r1 : r2)); 
```

遍历每个`Aggregate`组一次，跟踪迄今为止找到的最便宜的收音机，如果找到更便宜的收音机，则更换它。

# backbone.js - 存储/推送到主干模型中的数组

> ID：13644080
> 
> 赞同：6
> 
> 时间：2012-11-30T11:11:00.547
> 
> 标签：backbone.js

我有这个模型默认值：

```
test.Models.ItemModel = Backbone.Model.extend({

defaults: {
    name: 'an item',
    units: []
}, 
```

然后我使用以下代码设置模型：

```
 addUnit: function(e){
    if(e.keyCode == 13){
      this.model.set({ 'units' : this.model.get('units').push($('#addUnit').val()) }, 
        {success: function(){
          this.render();
        }}
      );
    }
  }, 
```

但是，它似乎永远不会被添加到模型数组中，我在这里做事吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T11:21:02.047

问题是您假设该`push`方法返回整个数组；相反，[如此处所述](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push)，该`push`方法

> `length`返回调用方法的对象 的新属性。

因此，您需要先将元素推送到数组中，然后再将其设置为模型：

```
var _units = this.model.get('units');
_units.push($('#addUnit').val());
this.model.set({ 'units' : _units }); 
```

不过要小心，这将修改指向该数组的任何其他内容，因此如果您这样做，例如：

```
var myArray = [1,2,3]
this.model.set({units: myArray})
var _units = this.model.get('units')
_units.push(4)
this.model.set({ 'units' : _units })
myArray == this.model.get('units') // holy moly, they're the same :( 
```

如果你想避免这种情况，或者仍然想为此使用一行代码，你可以使用数组的[`concat`方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)：

```
this.model.set({ 
    'units' : this.model.get('units').concat($('#addUnit').val())
}); 
```

# javascript - Ember.js 路由器和 initialState 中的嵌套路由

> ID：13644082
> 
> 赞同：3
> 
> 时间：2012-11-30T11:11:22.827
> 
> 标签：javascript, coffeescript, ember.js, ember-old-router

我正在尝试了解 emeber.js 路由。我不太确定，为什么这不是路由器的有效定义

```
Platby.Router = Ember.Router.extend   
  location: 'hash'   
  enableLogging : true

  root: Ember.Route.extend
    index: Ember.Route.extend
      route: '/'
      initialState: 'batches'
      enter: (router) -> console.log 'root.index'

      batches: Ember.Route.extend
        initialState: 'index'
        route: '/batches'
        enter: (router) -> console.log 'root.index.batches'

        index: Ember.Route.extend
          route: '/'
          enter: (router) -> console.log 'root.index.batches.index' 
```

进入根 url 后，我会在控制台中得到以下输出。

```
STATEMANAGER: Entering root
STATEMANAGER: Sending event 'navigateAway' to state root.
STATEMANAGER: Sending event 'unroutePath' to state root. 
STATEMANAGER: Sending event 'routePath' to state root. 
Uncaught Error: assertion failed: Could not find state for path 
```

谁能给我解释一下，问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:59:40.050

我只能根据您提供的信息来回答...关于错误`uncaught Error: assertion failed: Could not find state for path`，这是因为您没有与路径“/”匹配的叶子状态。

`root.index`匹配 '/' 但它不是叶子，它只有一个子状态`batches`，因此路由器将在'/' 的子状态中查找`root.index`匹配的 '/' 但它没有找到，它只找到`batches`（匹配`'/batches'`）和错误被抛出。必须有一个与路由路径匹配的叶子。

至于帮助您实际尝试做的事情，看起来您希望“/”重定向到“/batches”？如果是这样的话：

```
Platby.Router = Em.Router.extend
  root: Em.Route.extend
    index: Em.Route.extend
      route: '/'
      redirectsTo: 'batches'
    batches: Em.Route.extend
      route: '/batches'
      connectOutlets: ... 
```

你可以`redirectsTo`像上面那样使用，这是一个快捷方式：

```
Platby.Router = Em.Router.extend
  root: Em.Route.extend
    index: Em.Route.extend
      route: '/'
      connectOutlets: (router) ->
        router.transitionTo('batches')
    batches: Em.Route.extend
      route: '/batches'
      connectOutlets: ... 
```

但是，您不能使用`redirectsTo`并拥有自己的`connectOutlets`，因此如果您需要`root.index`在过渡到之前做任何事情，`root.batches`您将需要使用第二种方式并在过渡之前处理您的业务`transitionTo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:41:35.820

我试图了解您想要做什么，但从外观上看，您想要`/batches/`路由到`root.index.batches.index`和`/batches`路由到`root.index.batches`. 那是对的吗？

我的理解是，你的路线`root.index.batches`和`root.index.batches.index`路线实际上是同一条路线。如果您删除后者，您应该会很好。

# c# - 为派生类中的成员添加数据注释

> ID：13644083
> 
> 赞同：0
> 
> 时间：2012-11-30T11:11:24.370
> 
> 标签：c#, .net

我有一个由多个项目组成的解决方案。其中一个项目是 POCO 对象的容器，在所有其他项目之间共享。因为对象需要与 Windows Phone、Silverlight、Windows 应用程序等兼容。它被创建为一个共享库，只有一部分引用。

我想将这些对象重新用于数据库模型的代码优先实现，这需要我向成员添加数据注释属性。但是数据注释命名空间不包含在引用子集中。

所以我想我会在我的服务 API 项目中创建派生类，在那里添加数据注释。但我不太确定如何做到这一点，或者是否可以做到。

所以我正在寻找一些想法，也许是最佳实践。当然，我可以创建新模型并使用映射技术从一个到另一个获取数据，但是当它们 100% 相等时，这听起来有点愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:49:19.983

您是否尝试过使用[MetadataTypeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)？

```
[MetadataType(typeof(Metadata))]
public class DerivedEntity : PocoEntity
{
   private sealed class Metadata
   {
      [Required, AnotherAnnotation]
      public object NameOfPropertyToDecorate;
   }
} 
```

**编辑**
这不起作用。如果将`MetadataType`属性添加到基类，它会起作用；如果将其添加到派生类，则注释将被忽略。这种行为感觉像是一个错误，但可能是有原因的。

您最好的选择可能是使用[fluent API](http://msdn.microsoft.com/en-US/data/jj591617)来配置您的实体。

```
public class YourContext : DbContext
{
   protected override void OnModelCreating(DbModelBuilder modelBuilder)
   {
      base.OnModelCreating(modelBuilder);
      modelBuilder.Configurations.Add(new PocoEntityConfiguration());
   }
}

public class PocoEntityConfiguration : EntityTypeConfiguration<PocoEntity>
{
   public PocoEntityConfiguration()
   {
      Property(e => e.TheProperty)
         .IsRequired()
         .HasMaxLength(80)
         ...
      ;
   }
} 
```

# html - 如何重置这个特定的 CSS 选择器

> ID：13644085
> 
> 赞同：0
> 
> 时间：2012-11-30T11:11:28.100
> 
> 标签：html, css

我在 Wordpress CSS 主题中有以下选择器，主题创建者建议我不要编辑：

```
.entry img, img.thumbnail {
  margin-bottom: 10px;
  padding: 2px;
  border: 1px solid #DDD;
  background: white;
  -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
} 
```

所以我在一个辅助 CSS 中添加了这个，试图“取消”上述 CSS 选择器的效果：

```
.entry img, img.thumbnail { 
    margin-bottom: 0px; 
    padding: 0px; 
    border: 0px; 
    background: #fff;  
    -moz-box-shadow: 0;
    -webkit-box-shadow: 0;
    box-shadow: 0;
} 
```

然而，它似乎并没有改变任何东西。**我不确定我需要在上面的代码段中编辑什么。**

**当我在 Google Chrome 检查器中手动取消选中**以下选项时，我试图摆脱的边框确实消失了：

*   -moz-box-shadow
*   -webkit-box-shadow
*   盒子阴影

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:46:58.393

我！对每个 CSS 规则都很重要，或者您可以添加包装器 div 并在 css 中使用它。

喜欢

HTML

```
<div id="wraper_div">
<div class="your_class"></div>
</div> 
```

CSS：

```
#wraper_div .your_class{
/*CSS PROPERTY*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:27:53.277

第一

阴影应设置为无

2.

背景应该在没有速记的情况下重置，因为 IE 存在速记重置问题

尝试

```
background-color:#fff 
```

代替

```
background:#fff 
```

3.

有一种东西叫做“特异性”。

您的代码与其覆盖的代码具有相同的特异性，因此它需要低于它覆盖的代码，或者具有更高的特异性。

尝试使用另外一个选择器来定位代码：

```
.entry img, img.thumbnail 
```

更高的特异性：

```
body .entry img, body img.thumbnail 
```

特殊性意味着 CSS 规则的“权威性”。不同的选择器有不同的“权重”。

ID 的权重为 100，类 10，元素选择器 1。

```
.entry img, img.thumbnail 
```

第一个语句有 11 个，第二个语句有 10 个。在两者前面添加 body 以使它们具有 +1 特异性，因此它们会覆盖旧代码。

5.

如果您关心支持旧版 IE，请松开 img.thumbnail，这可能会导致 IE 出现问题，请仅替换为 .thumbnail。如果没有其他具有类 .thumbnail 的元素，则可以执行此操作，然后是 img 元素。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:16:39.700

使用**none**而不是 0 解决了这个问题。CSS 样式的顺序也很重要，确保将这些样式放在 CSS 的底部。

[**工作演示**](http://jsfiddle.net/LLHX4/1/)

```
.entry img, img.thumbnail { 
    margin-bottom: 0px; 
    padding: 0px; 
    border: 0px; 
    background: #fff;  
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:17:30.597

如果您检查例如 Chrome 中的元素，您的规则是否适用于默认规则？

如果是这样，您可以尝试将 !important 添加到它以覆盖。

```
.entry img, img.thumbnail { 
    -moz-box-shadow: none !important;
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
} 
```

# java - java - 如何将pdf十六进制字符串（由postgres生成）转换为java中的字节数组？

> ID：13644090
> 
> 赞同：0
> 
> 时间：2012-11-30T11:11:47.070
> 
> 标签：java, postgresql, hex, bytearray

postgres 生成的 PDF 文档十六进制字符串如下：

```
%PDF-1.5\015\012%\265\265\265\265\015\0121 0 obj\015\012&lt;&lt;/Type/Catalog/Pages 2 0 R/Lang(en-IN) /StructTreeRoot 32 0 R/MarkInfo&lt;&lt;/Marked true&gt;&gt;&gt;&gt;\015\012endobj\015\0122 0 obj\015\012&lt;&lt;/Type/Pages/Count 4/Kids[ 3 0 R 15 0 R 22 0 R 29 0 R] &gt;&gt;\015\012endobj\015\0123 0 obj\015\012&lt;&lt;/Type/Page/Parent 2 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 5 0 R/F2 7 0 R/F3 9 0 R/F4 13 0 R&gt;&gt;/ProcSet[/PDF/Text/ImageB/ImageC/ImageI] &gt;&gt;/Annots[ 11 0 R 12 0 R] /MediaBox[ 0 0 595.32 841.92] /Contents 4 0 R/Group&lt;&lt;/Type/Group/S/Transparency/CS/DeviceRGB&gt;&gt;/Tabs/S/StructParents 0&gt;&gt;\015\012endobj\015\0124 0 obj\015\012&lt;&lt;/Filter/FlateDecode/Length 2984&gt;&gt;\015\012stream\015\012x\234\225Z\333\216\3436\022}o`\376A\217\322\242\315\026\305\213$ \010v\347\026\314b\263\023$\363\026\354\203\332\226\335F\273eG\266{\322\177\277UER"eK\326`\320\036\233\227b\261Xu\352\024\245\350\341\267\350\247\237\036~\375\360\345c\224\376\374s\364\376\343\207\350\375\267ww\017\237y\304\263\350\333\372\335\035\217R\370\307\243L\244L\252(/%S\320\363\362\356.\2156\370\361\313\273\273?\343\317\211\212\177O\026\322||\215\336\343\177\377Jd\374\337_\222\205\246o\377I\362\370+t\347\361\247\344\177\321\267\177\277\273\373\004+\341jn\011!3\246s\177\211?\343\310\033\033}\372\365C\024y*sOe'\244P,Oe\224\347%+\2129B\262+Btn\204h\305\204\266B\370\210\3269\214)\006c\331`\354\303\347lhO\320\357b\211\350b\332\3051\270\355\371\323\276%\013\021\357\223E\026GU"\342W\374\330\202\305w\360\027\235\260\363\011Zj\374r\271\202\030\256\300u\312T\021\256\260\256\226\333\035\212$io\021|j\263\342\032\277\253\370\320b\307v\337\232E\026"\217\217\260\346\262E?8\237\266\015\316\2212\256\232\025\366\026\324{\250\3217j\020\273z3s\214\030\022\274\254\321Up\030\376m\233\204\313xs\333&gt;\022\317]\207\332\337\243\035\022\236\305\317\370\261EI\015\310\\%\\\200\215\340\327\333\320,Ck\253\224\345V\330\261nV\011\355\221\027y\\\321\377:~\251`\215m\262P\306\350\246\363\004_\315\261\300\357\322\374\266'\301;\011hU#\360\302G\3778TM\347\246\342\212\233fY\301R\345\251g\232\333\215\373\366;\005gu@\305\016\211 \345\232\221\275f\2323\236\007{]\214\016\325L\205C 
```

如何将其转换为字节数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:15:40.993

不是`HEX`它被 raw 转义了`bytea`。[此处](http://www.postgresql.org/docs/current/static/datatype-binary.html)有关此编码的详细信息。

如果你想`HEX`从`bytea`现场使用`encode(bytea_field, 'HEX')`. 详情[在这里](http://www.postgresql.org/docs/current/static/functions-string.html)。

UPD 最好`encode(bytea_field, 'base64')`将`base64`字符串转换为文件。详情[在这里](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)。

# sql - 在 SQL 中返回或输出 @tableVariable

> ID：13644095
> 
> 赞同：1
> 
> 时间：2012-11-30T11:12:03.463
> 
> 标签：sql, sql-server, output, table-variable

是否可以在 SQL Server 中返回或输出 @tableVariable？
例如对于以下存储过程，如何返回 @TSV 表变量？

```
ALTER PROCEDURE MyStoredProdecure
    @Parameter1 INT,
    @Parameter2 INT
AS
   BEGIN

   DECLARE @TSV TABLE
   (
      Transition_Set_Variable_ID INT,
      Passed BIT
   )

   INSERT INTO @TSV
   { some data }

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:12:56.130

你不能直接这样做。表变量对 READONLY 输入有效。

如果您没有从存储过程返回其他数据，您可以在最后从@TSV 中选择并让调用者捕获输出，例如

```
ALTER PROCEDURE MyStoredProdecure
    @Parameter1 INT,
    @Parameter2 INT
AS
   BEGIN

   DECLARE @TSV TABLE
   (
      Transition_Set_Variable_ID INT,
      Passed BIT
   )

   INSERT INTO @TSV
   { some data }

   SELECT * FROM @TSV
END 
```

呼叫者

```
DECLARE @outerTSV TABLE
(
   Transition_Set_Variable_ID INT,
   Passed BIT
);
insert into @outerTSV
exec MyStoredProdecure 1, 2; 
```

或者，如果 SP 真的像您展示的那样简单，请将其转换为表值函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:15:54.623

不，但是您可以编写一个[`table valued function`](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)返回表的。

```
create function MyTVF
    @Parameter1 INT,
    @Parameter2 INT
returns @tsv table
   (
      Transition_Set_Variable_ID INT,
      Passed BIT
   )

AS
   BEGIN
   INSERT INTO @TSV
   { some data }
   return 
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:16:31.037

表值参数只能用于输入，不能用于输出。

根据您的最终目标，这里有一些选项：

1.  将存储过程更改为表值函数以返回表，然后可以在另一个语句中内联使用

2.  只需从 sproc 末尾的 @TSV 表 var 中选择数据

3.  返回一个 XML OUTPUT 参数（得到一种肮脏的感觉，建议这样做，但只是为了强调一种实际使用 OUTPUT 参数返回多行的方法）

如果您选择表值函数，理想情况下创建一个内联函数，如果它在您的情况下看起来很简单：

例如

```
CREATE FUNCTION dbo.Func() 
RETURNS TABLE 
AS
RETURN
(
    SELECT Something
    FROM Somewhere
    WHERE x = 1
) 
```

# visual-studio-2010 - 如何知道 tesseract 已成功设置

> ID：13644098
> 
> 赞同：1
> 
> 时间：2012-11-30T11:12:13.463
> 
> 标签：visual-studio-2010, tesseract

我根据[http://code.google.com/p/tesseract-ocr/wiki/ReadMePre3在 Visual Studio 2008 中设置了我的 tesseract 3.01](http://code.google.com/p/tesseract-ocr/wiki/ReadMePre3)

编译中没有错误报告。

然后一个控制台命令窗口显示集群闪烁，然后消失。

如果我已经成功安装它，我应该在哪里放置 tesseract 示例？把它们放在vs2008文件夹下可以吗？

谁能给我一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:38:23.203

[从Tesseract SVN repositoty](http://code.google.com/p/tesseract-ocr/source/checkout)查看完整源代码后，从 vs2008 文件夹打开 tesseract 解决方案，选择 LIB-Release 配置，然后构建。.exe 输出文件可以在 vs2008\LIB_Release 文件夹中找到。您可以将它们移动到 vs2008 的父文件夹，其中有一些示例图像和 tessdata，打开命令提示符，然后从那里运行您的测试。

```
tesseract phototest.tif out 
```

# heroku - 可以信任传递给 Heroku 应用程序的 Host 标头吗？

> ID：13644108
> 
> 赞同：3
> 
> 时间：2012-11-30T11:12:37.293
> 
> 标签：heroku

我正在开发可通过多个域访问的 Heroku 应用程序。我需要区分请求与哪个特定域相关。例如，这对于构造标头中返回的资源的绝对 URL 是必需的`Location`。

我是否可以相信`Host`到达 Heroku 应用程序的请求中的标头始终指向与应用程序关联的域（默认`xyz.herokuapp.com`域或使用`heroku domains:add`命令添加的域之一）？

我知道这个标头可以由用户设置为任何值，但是 Heroku 前端服务器需要进行某种过滤才能将请求分派到正确的应用程序。这种过滤防弹足以信任`Host`标头吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T11:15:11.990

如果请求到达您的应用程序，则 Host 标头将是为您的应用程序配置的标头。

如果 Host 标头不是您的标头之一，Heroku 服务器会将请求发送到其他地方。

您可以通过发送错误的主机在命令行上证明这一点。例如：

`$ curl "http://ismy.herokuapp.com" -H "Host: notmy.herokuapp.com"`

所以，你的问题的答案是肯定的。我会相信它。

# google-chrome - 使用谷歌电子表格的抽认卡

> ID：13644109
> 
> 赞同：2
> 
> 时间：2012-11-30T11:12:39.063
> 
> 标签：google-chrome, gmail

我正在尝试`flashcards`使用`google spreadsheet`.

我尝试了this [page建议的方式](http://www.makeuseof.com/tag/make-flashcards-google-docs-spreadsheets-web-iosandroid/)

它会生成一个包含抽认卡的面板，但实际上它是空的。

我正在使用最新版本的谷歌浏览器来制作它。

对我来说`flashcards gadget`，嵌入到谷歌潜水中的 . 似乎太旧了，无法与当前版本的谷歌浏览器一起使用。

我的问题是：

1.  有可能吗？
2.  制作与您的 gmail 帐户相关的抽认卡的另一种方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:54:06.423

根据`Google Drive Support` 将`Gadgets in Google Spreadsheets`被弃用。
[http://support.google.com/drive/bin/answer.py?hl=en&topic=15165&answer=2791335](http://support.google.com/drive/bin/answer.py?hl=en&topic=15165&answer=2791335)。

一个不错的选择可能是`http://api.flashcardstogo.com/webapp/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T01:59:08.277

由于小工具现在已被弃用，因此 makeuseof 方法不再有效。

幸运的是[http://flippity.net/](http://flippity.net/)使用公开共享（混淆）链接提供了类似的功能。

**提示：**在您的书签中创建一个学习主题书签文件夹，其中包含指向您的 google 电子表格和 Flippity 生成的抽认卡的链接。这样你就可以打开两者，右键单击+“打开所有书签”。它使学习和添加新卡片变得更加容易。

# c# - 如何从另一个类或窗口访问 WPF 中的控件

> ID：13644114
> 
> 赞同：22
> 
> 时间：2012-11-30T11:12:56.223
> 
> 标签：c#, wpf, silverlight

我想在 WPF 的 mainWindow 中访问我的控件，如按钮或文本框，但我不能这样做。

在 Windows 窗体应用程序中非常简单，您可以将该控件的修饰符设置为 True，并且您可以从该 mainWindow 的实例访问该控件，但在 WPF 中我无法声明公共控件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-16T12:55:01.523

要访问另一个 WPF 表单中的控件，您必须将该控件声明为公共的。WPF 中控件的默认声明是公共的，但您可以使用以下代码指定它：

```
<TextBox x:Name="textBox1" x:FieldModifier="public" /> 
```

之后，您可以在应用程序中的所有活动窗口中搜索，以找到具有如下控制权的窗口：

```
foreach (Window window in Application.Current.Windows)
{
    if (window.GetType() == typeof(Window1))
    {
       (window as Window1).textBox1.Text = "I changed it from another window";
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T11:28:01.280

不幸的是，WPF 的基础是数据绑定。以任何其他方式做这件事都是“违背常规”，是不好的做法，而且编码和理解通常要复杂几个数量级。

对于您手头的问题，如果您有要在视图之间共享的数据（即使它只是一个视图），请创建一个包含表示数据的属性的视图模型类，并绑定到视图中的属性。

在你的代码中，只管理你的视图模型类，不要用它的视觉控制和视觉合成来接触实际的视图。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-16T21:13:14.717

我发现在 WPF 中，您必须将 Window 转换为 MainWindow。

看起来很复杂，其实**很简单！** *但是，也许不是最佳实践。*

假设我们在 MainWindow 中有一个 Label1、一个 Button1，并且您有一个处理与称为 UI 的用户界面相关的任何事情的类。

我们可以有以下内容：

**主窗口类：**

```
namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        UI ui = null;
        //Here, "null" prevents an automatic instantiation of the class,
        //which may raise a Stack Overflow Exception or not.
        //If you're creating controls such as TextBoxes, Labels, Buttons... 

        public MainWindow()
        {
            InitializeComponent(); //This starts all controls created with the XAML Designer.
            ui = new UI(); //Now we can safely create an instantiation of our UI class.
            ui.Start();
        }

    }
} 
```

**用户界面类：**

```
namespace WpfApplication1
{    
public class UI
    {
        MainWindow Form = Application.Current.Windows[0] as MainWindow;
        //Bear in mind the array! Ensure it's the correct Window you're trying to catch.

        public void Start()
        {
            Form.Label1.Content = "Yay! You made it!";
            Form.Top = 0;
            Form.Button1.Width = 50;
            //Et voilá! You have now access to the MainWindow and all it's controls
            //from a separate class/file!
            CreateLabel(text, count); //Creating a control to be added to "Form".
        }

        private void CreateLabel(string Text, int Count)
        {
            Label aLabel = new Label();
            aLabel.Name = Text.Replace(" ", "") + "Label";
            aLabel.Content = Text + ": ";
            aLabel.HorizontalAlignment = HorizontalAlignment.Right;
            aLabel.VerticalAlignment = VerticalAlignment.Center;
            aLabel.Margin = new Thickness(0);
            aLabel.FontFamily = Form.DIN;
            aLabel.FontSize = 29.333;

            Grid.SetRow(aLabel, Count);
            Grid.SetColumn(aLabel, 0);
            Form.MainGrid.Children.Add(aLabel); //Haha! We're adding it to a Grid in "Form"!
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-08T16:12:47.217

```
var targetWindow = Application.Current.Windows.Cast<Window>().FirstOrDefault(window => window is principal) as principal;
targetWindow .BssAcesso.Background = Brushes.Transparent; 
```

只需从当前窗口调用它的任何控件：

```
targetWindow.ABUTTON.Background = Brushes.Transparent; 
```

[如何从 wpf 中的另一个窗口访问一个窗口的控件（富文本框）？](https://stackoverflow.com/questions/2219097/how-can-i-access-one-windows-control-richtextbox-from-another-window-in-wpf)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-27T23:53:28.417

当我开始 WPF 时，我也在为此苦苦挣扎。但是，我找到了一个很好的解决方法，类似于老式的 win forms 方法（编码 VB.NET，抱歉）。补充前面说的：

要直接从模块或活动窗口的不同类更改对象的属性：

```
Public Class Whatever
    Public Sub ChangeObjProperties()
        ' Here the window is indexed in case of multiple instances of the same
        ' window could possibly be open at any given time.. otherwise just use 0
        Dim w As MainWindow = Application.Current.Windows(0)
        w.Button1.Content = "Anything"
    End Sub
End Class 
```

您显然必须先实例化`Whatever`才能`ChangeObjProperties()`在代码中调用。

此外，无需担心 XAML 中有关对象可访问性的命名。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T11:22:48.213

只需像这样声明您的控件即可将其公开：

```
<TextBox x:Name="textBox1" x:FieldModifier="public" /> 
```

然后，您可以从另一个控件访问它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-18T08:54:31.553

控件的默认声明是非公开的、内部的和不公开的！

因此，允许从同一程序集中访问控件。如果要从另一个程序集访问 wpf 表单上的控件，则必须使用修饰符属性 x:FieldModifier="public" 或使用 Jean 提出的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-16T18:35:04.827

这可能是一个稍微不同的答案，但让我们考虑一下为什么我们需要在表单之间传递数据。显然，原因是“可视化”。

使用委托或事件。

无需将元素声明为 Public 只是为了使其可见。只需要能够在有限的基础上使用委托来转换窗口内的元素。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-01-26T12:10:31.280

访问另一个窗口中的任何控件非常简单。假设从登录窗口访问 MainWindow。以下是步骤：

```
MainWindow MW = new MainWindow();  //declare the mainwindow
MW.Label1.Content = "Hello world"; //specify what control
MW.ShowDialog();                   //check what happen to that control 
```

好的编程

# java - java线程在run()时调用其他方法{while(true){executing here}}

> ID：13644115
> 
> 赞同：0
> 
> 时间：2012-11-30T11:13:00.920
> 
> 标签：java, multithreading

我想知道在 Java 中是否有可能做到这样的事情。

```
class Running extends Thread {

    private int value;

    public void run() {
        while (true) {
            do stuff;
        }
    }

    public int getValue() {
        return value;
    }
}

public static void main(String[] args){
    Running runner = new Running();
    runner.start();
    int runnerValue = runner.getValue(); // Will I ever get the value?
} 
```

[编辑]

我也想知道这是否推荐？

[编辑2]

我知道如果在 run() 方法中更改该值可能会搞砸。我更感兴趣的案例其实是

```
private final int VALUE = 100; 
```

对歧义感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:18:30.940

`runner.start()`将在单独的线程中执行您的 run 方法并立即继续下一行。`runnerValue`然后将`value`在您的班级中分配 0，除非：

*   您的运行方法正在改变`value`
*   **并且**它有时间去做（这不太可能，因为启动线程可能需要很长时间才能让这种情况发生）
*   **而且你很幸运，**可以从主线程中看到这种变化——你没有使用任何形式的同步来读取`value`主线程，所以不能保证你能看到这样的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:23:28.900

从纯程序的角度来看，代码没问题，你会得到一个值。

但是从逻辑的角度来看，代码很糟糕。在 runner.start() 之后立即调用 runner.getValue()。假设 runner 会做一些事情来计算一个值，并且 getValue() 在主线程中执行。因此，当 getValue() 在主线程中执行时，不确定运行线程正在执行什么操作，因此 getValue() 会返回一个您不想要的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T11:24:27.433

我建议尝试一下，但我认为会发生以下情况：

1.  线程将被创建并开始运行。
2.  主程序将获取该值，但线程仍将运行。

如果您需要等到某些业务逻辑完成，您应该在 2 个线程之间使用同步。第一个线程应该调用一个等待方法，第二个线程应该在完成后调用通知方法，所以通知第一个线程。

# magento - 在 magento 中，您如何限制新产品 xml 中的项目数量？

> ID：13644116
> 
> 赞同：0
> 
> 时间：2012-11-30T11:13:01.907
> 
> 标签：magento, rss, limit

嗨，我已经设置了新产品 xml，可以通过 http://xxxxxxxx.com/index.php/rss/catalog/new/store_id/1/ 访问它

但我遇到了麻烦，因为它试图获取所有产品并导致（有时会出现一些内存问题）

任何帮助都会很棒！谢谢理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:29:11.587

我相信这之前已经讨论过：[Magento 限制新产品块中显示的产品数量](https://stackoverflow.com/questions/13050587/magento-limit-the-number-of-products-shown-with-in-the-new-products-block)

希望这可以帮助。

问候，丹

# asp.net-mvc - 如何在backbone.js中保存模型集合？

> ID：13644117
> 
> 赞同：7
> 
> 时间：2012-11-30T11:13:02.083
> 
> 标签：asp.net-mvc, backbone.js

我在一个项目中使用骨干。我有一个场景，我在一个集合中添加了多个模型。现在我在集合中有一系列模型。我正在使用休息服务以节省开支。现在我想对服务器进行后期调用以保存这些模型数组。我知道有一种方法可以传递模型来创建集合方法，例如

```
this.collection.create(模型)
```

但它是为单个模型保存的。我也尝试过应用循环，但它似乎不起作用。请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:17:37.290

您需要使用[.add()](http://backbonejs.org/#Collection-add)函数

```
this.collection.add(model);
this.colleciton.add([model1, model2, ..., modeln]); 
```

编辑：

要保存集合中的模型，您需要编写一个函数来遍历它们并单独保存它们。

有 StackOverflow 的问题可以很好地回答这个问题，例如：

[“如何”在 Backbone.js 中保存整个集合 - Backbone.sync 或 jQuery.ajax？](https://stackoverflow.com/questions/6879138/how-to-save-an-entire-collection-in-backbone-js-backbone-sync-or-jquery-ajax)

[保存整个集合的最佳实践？](https://stackoverflow.com/questions/5014216/best-practice-for-saving-an-entire-collection)

[如何使用backbone.js 保存集合](https://stackoverflow.com/questions/7975316/how-to-save-a-collection-with-backbone-js)

# java - java c3p0 OutOfMemoryError PermGen 空间

> ID：13644119
> 
> 赞同：1
> 
> 时间：2012-11-30T11:13:08.650
> 
> 标签：java, out-of-memory, space, c3p0, permgen

大家好，我面临这个问题。我设置 PermGen 空间大小为 512M 它仍然是 OutOfMemoryError。谁能帮我谢谢。

```
Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0" java.lang.OutOfMemoryError: PermGen space
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getMethod0(Class.java:2670)
    at java.lang.Class.getMethod0(Class.java:2679)
    at java.lang.Class.getMethod(Class.java:1603)
    at com.mchange.v2.c3p0.impl.C3P0ImplUtils.supportsMethod(C3P0ImplUtils.java:309)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.<init>(NewPooledConnection.java:104)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection    (WrapperConnectionPoolDataSource.java:198)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810) 
```

# java - Java 中的递归方法不起作用。有任何想法吗？

> ID：13644120
> 
> 赞同：1
> 
> 时间：2012-11-30T11:13:08.807
> 
> 标签：java, recursion, factorial

我试图理解 Java 中的递归方法，并尝试了这种简单的方法来计算阶乘。不知何故，它不起作用。有人能告诉我为什么吗？

```
public class FactorialRecursive extends ConsoleProgram {

   public void run() {
      println("This program calculates the factorial of an integer n.");
      int n = readInt("Please insert n: ");
      int result = factorial(n);
      println("The factorial of " + n + " is " + result);
   }

   private int factorial(int n) {
      int total;
      if (n == 1) total = 1;
      total = n * factorial(n - 1);
      return (total);
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:15:25.640

这是因为您的基本情况 ( `n == 1`) 不会立即返回。

您只分配`total`，但不返回：相反，您`n * factorial(n-1)`再次使用，进入无限递归。

通过替换来修复

```
if (n==1) return 1; 
```

或添加`else`：

```
if (n==1) total = 1;
else total = n * factorial (n-1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T11:15:58.903

您没有终止递归。尝试

```
if (n==1) total = 1;
else total = n * factorial (n-1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T11:16:04.927

问题是当你找到你的基本情况时你不会停下来

```
 if (n==1) total = 1; 
```

宁可做

```
 if (n==1) return 1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T11:16:23.740

换行：

```
if (n==1) total = 1; 
```

经过：

```
if (n==1) return 1; 
```

否则，您将无限循环。

你的方法是：

```
private int factorial(int n) {
    return n==1 ? 1 : n * factorial (n-1);
} 
```

# ruby-on-rails - 使用 mongoid 验证哈希字段

> ID：13644123
> 
> 赞同：0
> 
> 时间：2012-11-30T11:13:17.377
> 
> 标签：ruby-on-rails, validation, hash, mongoid

我正在使用 Rails 开发 mongoDB。所以使用 gem mongoid，任何人都知道如何验证模型中的哈希字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:37:32.110

我们必须编写自定义验证方法

[这里解释了我们如何编写自定义验证方法](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/validations.rb#L131)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T08:36:25.770

为了寻找解决方案，我找到了一个对我来说很好的自定义验证器，它可以通用。

```
private
def fix_content(input_hash, valid_fields)
    temphash = {}
    input_hash.each do |k,v|
        k=k.to_sym
        if valid_fields.has_key? k
            case valid_fields[k]
                when 'integer'
                    v=v.to_i
                when 'boolean'
                    v=(v=='true' || v==true)
                when 'float'
                    v=v.to_f
                when 'array'
                    v = "#{v.class}"=="Array" ? v : []
                else
                    v=v.to_s
            end
            temphash[k]=v
        end
    end
    temphash
end 
```

假设我们有这个字段：

```
field :fieldname, type: Hash, default: {hfield1: 0, hfield2: [], hfield3: false} 
```

实际上，它不是验证器，而是回调。它是这样工作的：

```
before_save :fieldname_fix_content 
```

下`private`：

```
def fieldname_fix_content
    # we show the callback what fields will be processed. All others will be disposed of
    self.fieldname = fix_content(self.fieldname, {:hfield1=> 'integer', :hfield2=>'array', :hfield3=>'boolean'})
end 
```

# php - Wordpress 用 php 重写

> ID：13644124
> 
> 赞同：0
> 
> 时间：2012-11-30T11:13:18.767
> 
> 标签：php, wordpress

可以更改此网址

```
www.12345.com/?s=&cp_state=city 
```

到这个？

```
www.12345.com/city 
```

已经尝试使用 htaccess 但在 wordpress 中它不起作用

嗨有这个代码。是否可以将其更改为具有这样的网址 www.12345.com/city？

```
add_action('template_redirect', 'search_url_rewrite_rule');
function search_url_rewrite_rule() {
global $wp_rewrite;

if ( is_search() && isset( $_GET['s'] ) ) {
    $s = str_replace( array( ' ', '%20' ), '+', get_query_var( 's' ) );
    wp_redirect( home_url( $wp_rewrite->search_base . '/' . remove_accents (   $s ) ) );
    exit();
}
}

add_action('init','change_search_permalinks');
function change_search_permalinks( ) {
global $wp_rewrite;
$wp_rewrite->search_base = 'search';
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:32:09.257

在 php 级别这不是一个好主意您可以在 wordpress 的管理区域中使用 url 短链接。

# actionscript-3 - 文本字段填充

> ID：13644125
> 
> 赞同：0
> 
> 时间：2012-11-30T11:13:24.343
> 
> 标签：actionscript-3, flash

我正在处理这个名称标签设计器项目，因为这些元素后来被添加到 pdf 中，所以我需要知道标签上的确切位置。

TextField 给我带来了一些问题，当您更改字体大小时，会导致文本字段“填充”发生变化。

![在此处输入图像描述](../Images/26421952603c8186906adb339c0c8428.png)

我需要删除“填充”或获取 TextField 内文本的 x、y 位置。

领先测试： ![在此处输入图像描述](../Images/a14e420c9da0eb9840ffe2bedd14d362.png)

对此有任何想法！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:49:38.303

我不确定您需要什么“填充”，但您可以使用以下方法获得所有偏移量：[getCharBoundaries()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getCharBoundaries%28%29)、[getLineMetrics()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getLineMetrics%28%29)。

# c# - 如何使用 WCF 获取远程系统进程列表

> ID：13644128
> 
> 赞同：0
> 
> 时间：2012-11-30T11:13:34.820
> 
> 标签：c#, wcf, remote-server

我正在尝试创建一个 WCF 服务，它以远程系统名称作为参数并获取在其上运行的所有进程。

如果为服务提供相同的系统名称，则它会提供在其上运行的服务的详细信息。但是，如果您提供的机器名称与托管服务的位置不同，则会引发错误。

我得到的错误：

```
System.ServiceModel.FaultException<System.ServiceModel.ExceptionDetail> was caught
  Message=The RPC server is unavailable. (Exception from HRESULT: 0x800706BA)
  Source=mscorlib
  Action=http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher/fault
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at ServiceReference1.IService1.GetData(String serverName)
       at ServiceReference1.Service1Client.GetData(String serverName) in c:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\website1\a721c869\c5802e85\App_WebReferences.nbhpvo6i.0.cs:line 53
       at _Default.Button1_Click(Object sender, EventArgs e) in c:\Users\xxxxx\Documents\Visual Studio 2010\WebSites\WebSite1\Default.aspx.cs:line 70
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:37:26.450

部署了 Web 服务的服务器以及目标服务器应该运行远程过程调用、服务器和远程注册表 Windows 服务。

还要检查端口 9132、9133 和 9134 是否未被防火墙阻止。

# php - CURL 禁用问题

> ID：13644132
> 
> 赞同：1
> 
> 时间：2012-11-30T11:13:49.320
> 
> 标签：php, facebook, curl

当我尝试使用 PHP SDK 从 facebook API 获取数据时，我收到了错误代码 60。

为了解决这个问题，我们需要禁用

`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`在 base_facebook.php 中。

那么，这是否会对我服务器上的所有站点进行 curl 认证验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:22:22.810

将您的 SDK 更新到 3.2.1。证书文件需要更新。

[https://github.com/facebook/facebook-php-sdk/commit/42961c500761dd62099bf633a5db7182c00c1678](https://github.com/facebook/facebook-php-sdk/commit/42961c500761dd62099bf633a5db7182c00c1678)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:36:31.837

只是为了回答你的问题，只需引用[`curl_setopt`手册](http://php.net/manual/en/function.curl-setopt.php)：

> 在给定的 cURL 会话句柄上设置一个选项。

所以不，它只会影响您当前的会话句柄（**当前**脚本中**只有一个**cURL 句柄实例）。

# django - django-allauth 为 API 密钥注册一个站点

> ID：13644142
> 
> 赞同：1
> 
> 时间：2012-11-30T11:15:21.460
> 
> 标签：django, api-key, django-allauth

我从 django 开始，正在努力在我的网站上实施 django-allauth。

我感兴趣的关键：

*   谷歌
*   领英
*   Facebook

据我了解，我需要向每个提供商注册我的应用程序才能获取 API 密钥和令牌。

在这些提供者网站上，注册应用程序时会询问项目名称和项目 URL。

问题是如果我想首先在我的本地机器上运行我的网站，我需要单独注册我的本地主机吗？如果是这样，项目名称和项目 URL 应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:54:29.973

You can set the localhost in your social apps, for example in `Facebook App`:

```
Display Name: My project
Namespace: myproject_test
Site URL: http://127.0.0.1:8000
Canvas URL: http://127.0.0.1:8000/
Secure Canvas URL: https://127.0.0.1:8000/ 
```

And when you deploy your site you have to change the settings according to your domain on which you host your site.

In `django-allauth` after getting the `Key` and `Secret` of your app you have to login to admin in your project and go to `http://127.0.0.1:8000/admin/socialaccount/socialapp/` to add the provider there before using it.

# android - 在 Android 的 Traceview 中打开跟踪文件时出错

> ID：13644147
> 
> 赞同：2
> 
> 时间：2012-11-30T11:15:39.683
> 
> 标签：android, android-traceview

我正在使用 ADT 20.0.3。我正在使用以下命令打开我的跟踪文件：

> C:>traceview "C:/Users/androdev/mytracefile.trace"

但我收到以下错误：

```
Failed to read the trace filejava.io.IOException: Key section does not have an *end marker
at com.android.traceview.DmTraceReader.parseKeys(DmTraceReader.java:420)
at com.android.traceview.DmTraceReader.generateTrees(DmTraceReader.java:91)
at com.android.traceview.DmTraceReader.<init>(DmTraceReader.java:87)
at com.android.traceview.MainWindow.main(MainWindow.java:286) 
```

mytracefile.trace 是通过在我的代码中使用`Debug.startMethodTracing("mytracefile")`and方法生成的。`Debug.stopMethodTracing()`

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T10:49:18.760

这仅仅意味着跟踪文件是空的。很可能 Debug.stopMethodTracing() 没有被调用，因此跟踪文件数据最终为空。

# c# - 没有排序规范的 List<>.Sort() 需要编译时错误

> ID：13644148
> 
> 赞同：5
> 
> 时间：2012-11-30T11:15:46.793
> 
> 标签：c#, .net

是否有某种方法可以定义一个类，如果我错误地尝试对没有排序规范的对象的 List<> 进行排序，它会产生编译时错误？

所以当我正确指定时，例如

```
listOfMyObjects.Sort(MyObject.CompareFieldNames); 
```

它将被接受，但如果我忘记并指定

```
listOfMyObjects.Sort(); 
```

然后我会得到一个编译时错误。

（我确实意识到我会得到一个运行时错误 - 但我更喜欢的是某种方式得到一个编译时错误。）

编辑：

为了清楚起见，我**想**为上面的第二个示例获取编译时错误。

我偶尔会遇到的情况是，我有一个包含几种不同比较<> 方法的类。假设它可以按 FieldName 排序，也可以按 DateOfCreation 排序。现在，我要避免意外/错误地思考，“哦，是的，好的旧对象 X，它可以按创建日期排序，所以我将使用 Sort() 对这个列表进行排序，然后愉快地前进...... "，但实际上默认排序方式是按FieldName排序（所以排序错误）或者没有默认排序方式（所以出现运行时错误）。

所以我想强迫自己（或任何使用我的对象的人）记住有几种方法可以对对象进行排序，并且应该明确选择其中一种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:59:10.913

您可以编写自定义 FxCop 规则，请参阅[此处](http://www.codeproject.com/Articles/30666/7-Steps-to-Write-Your-Own-Custom-Rule-using-FXCOP)获取教程。

查看[本教程](http://blog.tatham.oddie.com.au/2010/01/06/custom-code-analysis-rules-in-vs2010-and-how-to-make-them-run-in-fxcop-and-vs2008-too/)的代码分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:36:35.087

您可以通过子类化然后使用`ObsoleteAttribute`- 不理想来做到这一点，但您会收到错误消息：

```
public class MyList<T> : List<T>
{
  public MyList() {}
  public MyList(int capacity) : base(capacity) {}
  public MyList(IEnumerable<T> range) : base(range) {}

  [Obsolete("Please do not use this method", true)]
  public new void Sort(){ throw new NotSupportedException(); }
}

public void Test() 
{
  var l = new MyList<string>();
  l.Sort(); //<--- compile-time error
} 
```

但是，只有在编译时类型`l`is时才有效，`MyList<T>`因为您只是定义了一个`Sort`替换基本版本的新方法 - 但它不是`virtual`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:43:32.743

强制编译时错误是不可能的。您可以设置像 Obsolete 这样的规则，但这只是解决方法。

# r - 增加 R 中直方图图例上彩色方块的大小

> ID：13644149
> 
> 赞同：4
> 
> 时间：2012-11-30T11:15:52.227
> 
> 标签：r

我正在尝试增加 R 中直方图上图例中彩色方块的大小 - 当我输出 PDF 时，它们太小，因此很难区分颜色。我搜索了谷歌、R-help Nabble 论坛和这个地方，都无济于事。我还尝试了图例文档中的几个命令。

我需要在 legend() 函数中使用什么来增加它们？是否可以删除每个彩色方块周围的黑色边框以方便查看？

这是我的例子：

```
a<-c(1,1,2,3,3,3,3,4,54,56,2,23,1,3,23)
hist(a) 
graphics::legend(x=-1,y=10,c(">0%",">20%",">40%",">60%",">80%"),
       x.intersp=1,y.intersp=2,cex=1, bty="n",
       fill=c("black","gray50","gray70","gray85","white")) 
```

![在此处输入图像描述](../Images/251e68fa2a4fd7dab307e887ccf14ca7.png)

我想更改图例中框的大小？

* * *

解决方案：来自@Ben Bolker

添加到图例函数上方的脚本

```
> source("http://www.math.mcmaster.ca/bolker/R/misc/legendx.R") 
```

然后加

```
> box.cex=c(2,2) 
```

在图例函数中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T14:46:31.543

您可以使用非常粗的线条，末端为矩形。

```
plot( 1, type = "n", axes = FALSE, xlab = "", ylab = "" ) # Empty plot
par( lend = 1 ) # Rectangular line endings
legend(
  "topleft",
  c( "Red", "Black" ),
  col = c("red", "black"),
  lty = 1, lwd = 10
) 
```

![在此处输入图像描述](../Images/0cc035fe05af11fcfe02e271ce49ff95.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T13:55:42.447

我破解了`legend`函数的源代码以允许`box.cex`指定盒子的相对 x 和 y 尺寸的参数。这并不完美——如果扩展足够大，那么您必须进行调整`y.intersp`以防止填充框重叠。

```
source("http://www.math.mcmaster.ca/bolker/R/misc/legendx.R")
a<-c(1,1,2,3,3,3,3,4,54,56,2,23,1,3,23)
cex <- 1
hist(a)
legend("topright",c(">0%",">20%",">40%",">60%",">80%"),
       bty="n",
       fill=c("black","gray50","gray70","gray85","white"),
       box.cex=c(3,3),
       y.intersp=2.8) 
```

![在此处输入图像描述](../Images/569c787846f21e9b077a3c37ed144866.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T13:14:16.297

很难混合选项**填充**和更改框的大小。

但是我们可以有一些选项 **pt.cex**和**pch**没有**填充**选项。

```
a<-c(1,1,2,3,3,3,3,4,54,56,2,23,1,3,23)
par(mfrow=c(1,2)) 
hist(a) 

graphics::legend(x=10,y=10,c(">0%",">20%",">40%",">60%",">80%"), 
                 x.intersp=1,y.intersp=1,cex=c(1),bty="n",
                 fill=c("black","gray50","gray70","gray85","white"),
             #    pch=c(24,22,21,23,25),
                 pt.cex = c(2,2,2,2,5), 
                 lwd=1.5,title='Histo fill option') 

hist(a) 

graphics::legend(x=10,y=10,c(">0%",">20%",">40%",">60%",">80%"), 
       x.intersp=1,y.intersp=1,cex=c(1),bty="n",
       pch=c(24,22,21,23,25),
       pt.cex = c(1,2,3,3,4), 
       lwd=1.5, title = 'Histo whithout fill ') 
```

![在此处输入图像描述](../Images/944531142b1ec14217f16af2e4b1daaf.png)

# osx-mountain-lion - 如何修复我的 brew doctor 错误？

> ID：13644156
> 
> 赞同：1
> 
> 时间：2012-11-30T11:16:07.213
> 
> 标签：osx-mountain-lion, homebrew

在我的山狮终端上运行 brew doctor ，我收到以下错误：

```
 **Warning**: /usr/local/etc isn't writable.
This can happen if you "sudo make install" software that isn't managed
by Homebrew.

If a brew tries to write a file to this directory, the install will
fail during the link step.

You should probably `chown` /usr/local/etc
Warning: Some directories in /usr/local/share/man aren't writable.
This can happen if you "sudo make install" software that isn't managed
by Homebrew. If a brew tries to add locale information to one of these
directories, then the install will fail during the link step.
You should probably `chown` them:

    /usr/local/share/man/man8
~~**Warning**: Your XQuartz (2.7.2) is outdated
Please install XQuartz 2.7.4.~~
**Warning**: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
    /usr/local/lib/libicudata.49.1.2.dylib    /usr/local/lib/libicui18n.49.1.2.dylib    /usr/local/lib/libicuio.49.1.2.dylib    /usr/local/lib/libicule.49.1.2.dylib    /usr/local/lib/libiculx.49.1.2.dylib    /usr/local/lib/libicutest.49.1.2.dylib    /usr/local/lib/libicutu.49.1.2.dylib    /usr/local/lib/libicuuc.49.1.2.dylib
**Warning**: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/icu-i18n.pc    /usr/local/lib/pkgconfig/icu-io.pc    /usr/local/lib/pkgconfig/icu-le.pc    /usr/local/lib/pkgconfig/icu-lx.pc    /usr/local/lib/pkgconfig/icu-uc.pc
**Warning**: Unbrewed static libraries were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected static libraries:
    /usr/local/lib/libc-client.a
**Warning**: Homebrew's sbin was not found in your path.
Consider amending your PATH variable so it contains:
  /usr/local/sbin 

```

我该如何解决这些错误？修复它们是否至关重要，否则我可能会忽略它们？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:54:30.850

如果您仔细阅读文本，您会发现它实际上告诉您如何修复错误：

```
You should probably `chown` /usr/local/etc

You should probably `chown` them:

    /usr/local/share/man/man8 
```

dylibs，.pc 文件..

```
may need to be deleted 
```

因此，将上述目录的所有者更改为您的用户，并删除不需要的文件（如果您没有故意将它们放在那里）。

# asp.net-mvc-3 - 在JqGrid中显示日期时间../Date(1352658600000)/

> ID：13644162
> 
> 赞同：2
> 
> 时间：2012-11-30T11:16:29.867
> 
> 标签：asp.net-mvc-3, jqgrid

```
/Date(1352658600000)/ 
```

显示日期时 日期未以正确格式显示。

如何转换为正确的`Format(dd/mm/yyyy)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:03:41.997

进行转换所需的只是`date`在 jqGrid 列模型中设置格式化程序：

```
$('#gridId').jqGrid({
    ...
    colModel: [
        ...
        { name: 'Column Name', index: 'Column Index', ..., formatter: "date", formatoptions: { newformat: "m/d/Y"} },
        ...
    ],
    ...
}); 
```

对于`newformat`选项 jqGrid 支持[PHP 日期格式](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:29:23.810

取自此处接受的答案 - [将 json 结果转换为日期](https://stackoverflow.com/questions/1244094/converting-json-results-to-a-date-in-javascipt)

您需要从字符串中提取数字，并将其传递给 Date 构造函数：

```
var x = [ {"id":1,"start":"\/Date(1238540400000)\/"}, {"id":2,"start":"\/Date(1238626800000)\/"} ];

var myDate = new Date(x[0].start.match(/\d+/)[0] * 1)); 
```

零件是：

```
x[0].start                                - get the string from the JSON
x[0].start.match(/\d+/)[0]                - extract the numeric part
x[0].start.match(/\d+/)[0] * 1            - convert it to a numeric type
new Date(x[0].start.match(/\d+/)[0] * 1)) - Create a date object 
```

# php - 如何建立一个基于xml的音乐搜索数据库？

> ID：13644164
> 
> 赞同：1
> 
> 时间：2012-11-30T11:16:31.830
> 
> 标签：php, xml, database

不久前，我为本地收音机构建了一个 PHP 应用程序。他们从侦听器中获取请求，然后将它们放入应用程序中。然后应用程序向 DJ 显示听众的请求是什么。

现在一切正常，但他们必须自己建立一个音乐数据库，我用它来搜索音乐。我的问题是：

是否有一个在线音乐数据库，我可以将交叉脚本与soap/xml 或类似的东西一起使用？我更喜欢 XML，但如果有一个好的数据库可以以其他格式提供结果，那将不会有问题。

我在谷歌上搜索了这个，但我只找到了如何下载非法 mp3 文件的信息。我只需要找到音乐信息，例如：专辑名称、艺术家姓名和歌曲名称。不是 mp3/wma/etc 文件本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:30:12.807

您可能会在这里找到一些有用的东西[http://en.wikipedia.org/wiki/List_of_online_music_databases](http://en.wikipedia.org/wiki/List_of_online_music_databases)？

# elasticsearch - 无法在控制台中正确设置使用轮胎返回的构面数量

> ID：13644165
> 
> 赞同：1
> 
> 时间：2012-11-30T11:16:38.367
> 
> 标签：elasticsearch, tire

所以我有这个直截了当的查询，我正在尝试运行

```
Tire.search('posts', :size => 15) do
  query{ string '*'}
  facet('keywords'){ terms :keywords, :global => true }
end.results.facets['keywords']['terms'].each_with_index{|x, i| puts "#{i} - #{x.inspect}" } 
```

但无论我做什么，它都会返回 10 个结果

虽然这可以正常工作

```
Tire.search('posts', :size => 15) do
  query{ string '*' }
  facet('keywords'){ terms :keywords }
end.results.each_with_index{|x, i| puts "#{x.title} - #{i}" } and false 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:34:15.387

要控制返回的分面中的条目数，您需要在分面定义中设置大小：

```
Tire.search('posts') do
  query{ string '*' }
  facet('keywords'){ terms :keywords, :size => 15 }
end.
  results.facets['keywords']['terms'].each_with_index{|x, i| puts "#{i} - #{x.inspect}"} 
```

控制您要检索多少个结果的`size`参数。`Tire.search`

# php - DataTables 保存状态滚动位置

> ID：13644170
> 
> 赞同：0
> 
> 时间：2012-11-30T11:16:49.240
> 
> 标签：php, save, scrollbar, jquery-datatables

关于 DataTables 的保存滚动位置，我一直在网上四处寻找几个小时，但没有任何运气。至少对我来说不是。

根据数据表，要保存滚动条的状态，我需要这行代码：

```
 $(document).ready(function() {
    var oTable = $('#example').dataTable( {
        "sScrollY": "200px",
        "sAjaxSource": "media/data/2500.txt",
        "sDom": "frtiS",
        "bDeferRender": true,
        "bStateSave": true
    } );
} ); 
```

但是由于我没有任何包含可以解析的数据的文本文件，所以它不起作用。我正在使用 PHP 和 MYSQL 获取表中的数组。
除了滚动条之外，它`"bStateSave": true`确实保存了每个用户输入，例如过滤和排序。

有谁知道如何解决这个问题？

**编辑** 好吧，我设法让这个工作。看来我有一些真实的东西，这不应该是。现在，有了这个`"sDom"`滚动工作的保存状态，但我的 GUI 不见了......

**编辑** 我的启动代码是：

```
<!-- DATATABLES ENABLE INIT -->
<script>
<?php include ('js/datatables/ordernumhtml.js');?>
<?php include ('js/datatables/ordercurrency.js');?>
<?php include ('js/datatables/dataTables.scroller.min.js');?>
    $(document).ready( function () {
        $('#table1').dataTable( {
        "sDom": "frtiS",
        "bDeferRender": false,
        "bStateSave": true,
        "bAutoWidth": true,
        "bInfo": true,
        "sScrollX": "100%",
        "bScrollCollapse": true,
        "bScrollAutoCss": true,
        "bScrollInfinite": false,
        "sScrollY": "350px",
        "bJQueryUI": true,
        "bProcessing": true,
        "aoColumns": [
          { "sType": "num-html" },
          { "sType": "numeric" },
          null,
          null,
          null,
          null,
          null,
          null,
          { "sType": "currency" },
          null,
          { "bSortable": false }
        ]           
      } );  
    } );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:51:04.123

解决方案是将以下行重写
`"sDom": "frtiS",`为：
`"sDom": '<"H"fr>t<"F"iS>',`

`"H"`和表示 jQueryUI的`"F"`页眉和页脚。

可以在此处找到 sDOM 用法的详细说明：

[http://datatables.net/usage/options#sDom](http://datatables.net/usage/options#sDom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T10:49:40.617

保存滚动状态的解决方案是将**stateSave**设置为**true**。要完成这项工作，还需要使用 dataTables.scroller.js

```
$(document).ready(function() {
$('#example').DataTable( {
    ajax:           "data/2500.txt",
    deferRender:    true,
    dom:            "frtiS",
    scrollY:        200,
    scrollCollapse: true,
    stateSave:      true
} ); 
```

});

检查这个：[滚动状态保存](http://datatables.net/release-datatables/extensions/Scroller/examples/state_saving.html)

# java - 将 Java 对象从 JavaScript 发送到 Applet

> ID：13644172
> 
> 赞同：2
> 
> 时间：2012-11-30T11:16:59.147
> 
> 标签：java, javascript, applet, liveconnect

如何将 Java 对象从 JavaScript 发送到 Java？LiveConnect 允许我们通过调用 applet 方法来获取 Java 对象。即我们可以在小程序中有以下方法：

```
public MyClass getMyClass() { return new MyClass(); }` 
```

哪里`MyClass`是：

```
public class MyClass implements Serializable {
   private String a;
   private String b; //getters, setters
} 
```

并在 JS 中使用以下方法访问此对象：

`applet.getMyClass().someMethod();`

但是我如何将对象从 JavaScript（我认为是 json 对象）传递给 java 方法（而不是作为 json 字符串）？即我想在applet方法中有这样的：

`public void myMethod(MyClass var)`

并从 JavaScript 调用此方法传递 type 的参数`MyClass`。如何`MyClass`在 JS 中构建对象？我希望 LiveConnect 自动从 JSON 转换为 Java 对象..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:23:08.707

我相信这应该给你一个关于如何去做的好主意。

```
import netscape.javascript.*;

public class MyClass implements Serializable {
public String a;
public String b;

    public JavaDog(JSObject o) {
        this.a= (String)o.getMember("a");
        this.b = (String)o.getMember("b");
    }
} 
```

然后你使用`new Packages.MyClass(yourJavaScriptObject)`创建你想要传递给Java的对象。

更多信息在这里：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/LiveConnect_Overview](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/LiveConnect_Overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:06:05.493

**Java [LiveConnect](http://jdk6.java.net/plugin2/liveconnect/#JS_JAVA_OBJECTS)文档说：**

当之前返回给 JavaScript 引擎的 Java 对象被传回给 Java 时，只需检查该对象与目标类型的赋值兼容性。此规则的唯一例外是自动转换为`java.lang.String`.

# android - 使用 lame 作为库

> ID：13644175
> 
> 赞同：2
> 
> 时间：2012-11-30T11:17:02.940
> 
> 标签：android, c++, c, android-ndk, lame

我已经`lame`为 android 编译为静态库。

如何使用 lame 将`wav`文件转换为`mp3`?

我要打什么电话？有一些关于如何使用 lame 作为库的教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:25:37.523

你可以看到这个[developer.samsung.com](http://developer.samsung.com)移植教程或我们如何在 Android 上使用 LAME 和 JNI

[使用 JNI 在 Android 上移植和使用 LAME MP3](http://developer.samsung.com/android/technical-docs/Porting-and-using-LAME-MP3-on-Android-with-JNI)

# javascript - 在 IE 中运行时，脚本在谷歌浏览器中不起作用

> ID：13644176
> 
> 赞同：0
> 
> 时间：2012-11-30T11:17:03.110
> 
> 标签：javascript, internet-explorer, google-chrome

以下代码对我来说工作正常 IE 但不能在 Chrome 中工作。我想通过 java 脚本在 HTML 中打开同一页面中的链接

```
<SCRIPT LANGUAGE="javascript">
function clickHandler()
{
    var xid= document.getElementsByTagName("span");
    var xsp= xid[0].id;   

    if(xsp.charAt(0)=="M")    {
        var oC=document.getElementById("C"+xsp.substr(1));
        if(oC.style.display=="none")
            oC.style.display="";
        else
            oC.style.display="none";
    } 
}
</SCRIPT> 
```

html代码如下

```
 <html>
       <BODY onClick = "clickHandler();">
           <a href="javascript:void(0)">
                <u><b><span id=M26>2011-2012</span></b></u>
           </a>   

            <div id=c26 STYLE="display:none">
                <a href="javascript:void(0)">
                   <u><b><span id=M27>2012-2013</span></b></u>
                </a>   
            </div>

            <div id=c27 STYLE="display:none"> 
            </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:24:32.600

您在函数内部使用大写 C，但 ID 以小写 c 开头

```
var oC=document.getElementById("C"+xsp.substr(1)); 
```

必须

```
var oC=document.getElementById("c"+xsp.substr(1)); 
```

* * *

请求的修改（您必须从 body-element 中删除 onclick）

```
<script>
document.onclick=function(e){

  var _this=(window.event)//reference to the clicked element
              ? event.srcElement//IE
              : e.target;//others

  if(_this.id.match(/^M(\d+)$/)){//extract the number
    try{
      var oC=document.getElementById("c"+RegExp.$1);//target-element
          oC.style.display=(oC.style.display=='none')//set the display
                            ?''
                            :'none'
    }catch(e){}
  }
}
</script> 
```

# jquery - 使用 $.getJSON 从 google 的 geocode api 获取数据，返回 'Uncaught SyntaxError'

> ID：13644179
> 
> 赞同：0
> 
> 时间：2012-11-30T11:17:06.377
> 
> 标签：jquery, json, google-maps, geocode

我收到“**未捕获的语法错误：意外的令牌：** ”错误。

为什么以及如何处理这个错误？

谢谢！

```
$.getJSON("http://maps.google.com/maps/api/geocode/json?latlng=39.971277199999996,116.4864269&language=zh-CN&sensor=false&callback=?"); 
```

您可以打开此页面并查看控制台：http: [//jsbin.com/ugoraw/1](http://jsbin.com/ugoraw/1)

像这样的返回json，

```
{
   "results" : [
Uncaught SyntaxError: Unexpected token :
      {
         "address_components" : [
            {
               "long_name" : "16号",
               "short_name" : "16号",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "将台西路",
               "short_name" : "将台西路",
               "types" : [ "route" ]
            },
            ... ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:05:38.813

问号导致了问题。

您需要将 更改`?`为函数：

```
$(function(){
  $.getJSON("http://maps.google.com/maps/api/geocode/json?latlng=39.971277199999996,116.4864269&language=zh-CN&sensor=false&callback=handleMaps");

  function handleMaps(data) {
        alert("working");
  }

}); 
```

请注意，由于访问控制限制，您将不允许在 jsbin 中执行此操作。

我还建议阅读以下问题和答案： [jQuery and Google Maps json response](https://stackoverflow.com/questions/5659663/jquery-and-google-maps-json-response)

# c++ - localtime() 时间错误

> ID：13644182
> 
> 赞同：2
> 
> 时间：2012-11-30T11:17:15.003
> 
> 标签：c++, c

在我的服务器上运行`date`会导致正确的时间。但是`localtime()`在 C(++) 中使用我得到了错误的时间。

运行`date`：`Fr 30\. Nov 12:15:36 CET 2012`

使用`localtime()`：`Fr 30 Nov 2012 11:15:36 CET`

这里有什么问题？

操作系统：Debian 5.0.10

一些代码：

```
struct tm* today;
today = localtime(...);
strftime(timeBuffer,50,myConnection.getMetaData().getDateFormat().c_str(),today); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:36:55.270

> **免责声明**：此答案是在添加任何提及之前编写的，`strftime`是对时间戳 1 小时差异的直觉反应。现在回想起来，这 1 小时的差异不可能是由于 DST（因为日期不是夏天），而是可能显示 UTC 时间戳（UTC 和 CET 之间的 1 小时差异）。
> 
> 不幸的是，答案被接受了，所以我不能删除它。更不幸的是，如果没有额外的信息，就无法回答这个问题。
> 
> 在这里留下原始答案以获得完全透明，但要知道它没有解决所问的问题：

由`struct tm`返回`localtime`的`tm_isdst`字段指示夏令时 (DST) 是否有效。在格式化时间时，您需要考虑该字段。

尝试使用`asctime`格式化时间，例如。：

```
puts(asctime(today)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-02T13:14:41.403

我在编写日期调整例程时遇到了同样的问题。将 86400 秒（= 1 天）添加到任何给定的日期时间值*应*导致日期时间值增加一天。然而在测试中，输出值总是在预期输出上增加一小时。例如，“2019-03-20 00:00:00 **”**增加 86400 秒导致“2019-03-21 01:00:00 **”**。反过来也发生了：“2019-03-21 00:00:00 **”**减*-86400*导致“2019-03-20 01:00:00 **”**。

~~解决方案（莫名其妙地）是从最终间隔中减去 3600 秒（一小时），然后再将其应用于输入日期时间。~~

解决方案（*感谢@Lightness-Races-in-Orbit 的有用评论*`tm_isdst`）是在调用之前设置为 -1 `mktime()`。这`mktime()`表明输入日期时间值的 DST 状态是未知的，`mktime()`应该使用系统时区数据库来确定输入日期时间值的正确时区。

该函数（*如下更正*）允许对天数进行任何整数调整，现在可以产生始终正确的结果：

```
#include <stdio.h> 
#include <string.h>
#include <time.h>        

/*******************************************************************************
 *  \fn             adjust_date()
 *******************************************************************************/

int adjust_date(
                        char    *original_date,
                        char    *adjusted_date,
                        char    *pattern_in,
                        char    *pattern_out,
                        int      adjustment,
                        size_t   out_size)
{
/*
struct tm {
    int tm_sec;         // seconds          0-59
    int tm_min;         // minutes          0-59
    int tm_hour;        // hours            0-23
    int tm_mday;        // day of the month 1-31
    int tm_mon;         // month            0-11
    int tm_year;        // year       minus 1900
    int tm_wday;        // day of the week  0-6
    int tm_yday;        // day in the year  0-365
    int tm_isdst;       // daylight saving time 
};
*/
    struct tm day;

    time_t one_day = 86400;
//  time_t interval = (one_day * adjustment) - 3600;
    time_t interval = (one_day * adjustment);

    strptime(original_date, pattern_in, &day);

    day.tm_isdst = -1;
    time_t t1 = mktime(&day);

    if (t1 == -1) {
        printf("The mktime() function failed");
        return -1;
    }

    time_t t2 = t1 + interval;

    struct tm *ptm = localtime(&t2);

    if (ptm == NULL) {
        printf("The localtime() function failed");
        return -1;
    }

    strftime(adjusted_date, out_size, pattern_out, ptm);

    return 0;
}

/*******************************************************************************
 *  \fn             main()
 *******************************************************************************/
int main()
{
    char    in_date[64]     = "20190321000000" ,
            out_date[64],
            pattern_in[64]  = "%Y%m%d%H%M%S",
            pattern_out[64] = "%Y-%m-%d %H:%M:%S";

    int     day_diff = -1,
            ret = 0;

    size_t  out_size = 64;

    memset(out_date, 0, sizeof(out_date));

    ret = adjust_date(in_date, out_date, pattern_in, pattern_out, day_diff, out_size); 

    if (ret == 0)
    {
        printf("Adjusted date: '%s'\n", out_date);
    }

    return ret;
} 
```

希望这会对某人有所帮助。非常感谢您的建设性意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:55:25.030

Did you try this ? :

```
 time_t rawtime;
 struct tm * today;

 time ( &rawtime );
 today= localtime ( &rawtime );
 puts(asctime (today)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:42:28.483

handling date time is very error prone and usually badly tested. i always recommend using boost::date_time [http://www.boost.org/doc/libs/1_52_0/doc/html/date_time.html](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time.html)

here are nice examples [http://en.highscore.de/cpp/boost/datetime.html](http://en.highscore.de/cpp/boost/datetime.html)

# c# - 在 Windows 应用商店单元测试中使用 Windows.Devices.Geolocation.Geolocator

> ID：13644185
> 
> 赞同：3
> 
> 时间：2012-11-30T11:17:17.843
> 
> 标签：c#, unit-testing, windows-store-apps

我在 Windows Store 单元测试项目中有这个单元测试，使用Geolocator[的 GetGeopositionAsync 重载](http://msdn.microsoft.com/en-us/library/windows/apps/hh973537.aspx)：

```
[TestMethod]
public async Task TestFunc()
{
  var locator = new Windows.Devices.Geolocation.Geolocator();

  var l = await 
          locator.GetGeopositionAsync(TimeSpan.MaxValue, TimeSpan.FromSeconds(10));

  Assert.IsNotNull(l);
} 
```

但是这个测试不仅没有通过，而且在 10 秒后也没有失败——它*永远不会完成*（我等了 10 分钟才杀死它）。

*我应该强调，这是我真正想要运行的测试的配对版本——我不只是想对 Windows 进行单元测试；正如 John Deters 的回答中所指出的那样，我可以使用假货代替。*

我还编写了另一个订阅 a和事件`GeoLocator`的测试（后者应该初始化定位器），然后等待一分钟。在处理程序中，我跟踪当前的 ，除了在创建地理定位器后立即跟踪它。`StatusChanged``PositionChanged``StatusChanged``LocationStatus`

此`LocationStatus`测试中 Geolocator 的 开始于`NotInitialised`，并且从不改变。

现在我认为这是一个阻塞问题，与以下事实有关（引用`GetGeopositionAsync`开头链接中的文档）：

> 必须在 UI 线程上首次使用 Geolocator 对象调用 GetGeopositionAsync，以便向用户显示同意提示。有关详细信息，请参阅[访问个人数据的设备指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh768223.aspx)。

所以我的猜测是：

*   a) 调用***是***在 UI 线程上进行的（不太可能），但是因为没有 UI 表面（除了在调试 windows 存储单元测试时偶尔出现的奇怪的黑屏），UI 无法显示，所以调用永远不会完成。
*   b)***没有***在 UI 线程上进行调用，因此无法显示 UI，因此调用永远不会完成。

无论哪种方式，我得出的结论是不可能`Geolocator`在 Windows Store 单元测试中使用，因为我不可能同意我自己的单元测试来访问位置服务！同样让我感到沮丧的是，这样一个核心组件会因为无法显示 UI 而让自己无限期地运行——这太糟糕了。

有人不得不面对这个吗？能够对使用地理位置的代码进行单元测试真是太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:30:46.087

您不应该对库调用进行单元测试。你的单元测试应该只测试你自己的逻辑。

然后你可以通过提供一个模拟 Geolocator 对象来完全避免这个问题，因为它不会有 UI 同意弹出对话框或超时延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:12:17.143

这是我发现的。

在我的桌面上（在公司代理后面），地理定位器*永远不会*完成初始化。因此，没有应用程序可以将我当前的位置用于任何事情 - 它不仅限于单元测试。

但是，一旦我在模拟器中运行代码，一切正常。

我相信这最终与我的桌面没有安装位置提供程序这一事实有关——因为它没有 GPS 接收器。我发现绝对令人难以置信的是，没有可供设备使用网络位置的后备位置提供程序，或者，如果有，它在公司代理后面不起作用。

无论哪种方式，就目前而言，无法在我的桌面上（在单元测试中或在应用程序本身中）测试/调试任何需要来自`Geolocator`类的位置的代码。哦，除了测试我对永远不会返回的情况的处理！

# android - 谷歌地方最近的地方

> ID：13644187
> 
> 赞同：1
> 
> 时间：2012-11-30T11:17:29.543
> 
> 标签：android, google-maps, google-places-api

我想显示特定位置的最近地点。我使用谷歌地图中的 google places api 编码以显示离我的位置最近的所有地点。

[参考链接](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

但问题是我想展示与该类别相关的地方。例如：如果我想显示hotels.then 它必须只显示离我最近的酒店。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:54:45.343

转到 Project > Properties > Java Build Path > Libraries 并确保没有直接包含 android.jar 或 maps.jar。您应该只使用至少 maps.jar 和 android.jar 作为叶子的 Google Apia。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:22:49.993

根据 Places API[文档](https://developers.google.com/places/documentation/search#PlaceSearchRequests)，您可以将`types`参数与您的附近搜索请求一起传递，以按[支持的类型](https://developers.google.com/places/documentation/supported_types)过滤您的结果：

*“类型 - 将结果限制为与至少一种指定类型匹配的位置。类型应使用管道符号 (type1|type2|etc) 分隔。请参阅[支持的类型](https://developers.google.com/places/documentation/supported_types)列表。”*

一个通过以下方式过滤的附近搜索请求示例`types=doctor|electrician`：

[https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&rankBy=distance&types=doctor|electrician&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&rankBy=distance&types=doctor|electrician&sensor=false&key=AddYourOwnKeyHere)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:36:06.773

在 Google api 中，您将拥有要向 [Google 显示的内容类型](https://developers.google.com/places/documentation/supported_types)

地点类型链接：[https ://developers.google.com/places/documentation/supported_types](https://developers.google.com/places/documentation/supported_types)

您可以通过用加号 (+) 分隔每个地点类型来包含多个地点类型：

```
keyword=coffee+internet 
```

它给出了几乎正确的结果

# c - 运行时错误：创建二叉树

> ID：13644188
> 
> 赞同：0
> 
> 时间：2012-11-30T11:17:29.537
> 
> 标签：c, pointers, binary-tree

我是编码新手，我试图从数组中创建一个二叉树。当我尝试运行它时，出现运行时错误。有人可以解释这段代码有什么问题。tnode 是用于存储节点的结构，并调用construct_tree 来构建树。

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>         
        struct tnode{
            int value;
            struct tnode *parent ;
            struct tnode *left;
            struct tnode *right;
        };

        typedef struct tnode node;

    node* construct_tree(int *a,int n){
        printf("where");        
        node *root, *temp, *traverse, *traverse_parent;
        root = (node*)malloc(sizeof(node));

        root->value = a[0];
        root->parent = NULL;
        root->left = NULL;    
        root->right = NULL;    
        traverse = root;
        printf("where1");    
        printf("\n%d",a[0]);
        int i=0;
        for(i=1;i<n;i++){
            temp = (node*)malloc(sizeof(node));
            temp->value = a[i];
            temp->left = NULL;
            temp->right = NULL;

            while(traverse == NULL){
                traverse_parent = traverse;
                if(traverse->value < a[i]) traverse = traverse->right;
                else traverse = traverse->left;            
            }
            temp ->parent = traverse_parent;        
            printf("\n a[i]: %d and parent : %d",a[i],traverse_parent->value);
        }
        return root;
    }

    int main(){
        int a[] = {5,3,7,6,11,1,4};
        node* root;
        printf("where2");        
        root = construct_tree(a,6);
        //tree_traversal(root);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:26:49.043

你的内在`while`永远不会被执行，因为它被初始化`root`并且永远不会被取消。我想你会想要在循环的每次迭代中`while(traverse == NULL)`替换`while(traverse != NULL)`并重置`traverse`回（完成后）。`root``for``while`

# html - 如何用纯 CSS 堆叠文本？

> ID：13644193
> 
> 赞同：1
> 
> 时间：2012-11-30T11:17:36.440
> 
> 标签：html, css, text, alignment

我想使用一个文本作为另一个文本的背景。基本上，这很容易通过使用具有适当和设置的两个`div`元素，如[Is there a way to use text as background with CSS?](https://stackoverflow.com/questions/1191464/is-there-a-way-to-use-use-text-as-the-background-with-css) .`position``z-index`

我的问题是我想对齐两个文本，尽管它们的大小不同。背景文字较大，前景文字与背景文字垂直对齐，使两个文字的垂直中心在同一位置。

我可以通过手动调整以像素为单位的位置来实现这一点，但我必须为我想单独使用的每个字体大小执行此操作。此外，我永远无法确定这在每个浏览器中都以相同的方式工作。

有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:52:14.303

我通过使用得到它：

```
<div style="position: relative; font-size: 100pt; height: 100px;">
  <div style="font-size: 2em; color: #f00; position: absolute; top: 0; left: -0.37em; bottom: 0; right: 0; z-index: -1; line-height: 0.4em;">
    B
  </div>
  Sample text
</div> 
```

使用`left`和`line-height`属性我可以对齐两个文本，并且当我增加`font-size`容器的值时，它们的相对对齐方式保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:38:14.653

垂直对齐可以这样完成：

```
.parent {
position:relative;
zoom:1;/*has layout for ie*/
}
.verticalcentered1, .verticalcentered2 {
position:absolute;
top:50%;
height:20px;
margin-top:-10px;/*half the height*/
}
.verticalcentered1 {z-index:1;}    
.verticalcentered2 {z-index:2;} 
```

如果verticalcentered 元素是你的文本，它们将在父元素中垂直居中并且彼此重叠，如果这就是你要找的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T11:46:07.257

我认为你看起来像这样：-**[演示](http://tinkerbin.com/SPQ6K4M9)**

**HTML**

```
<div id="container">
        <div id="background">Sample Some Text </div>
        B
</div> 
```

**CSS**

```
#container {
    position: relative;
    font-size:70px;
    color:#00c7ff;
    z-index:-1; 
}

#background {
    left: 20px;
    position: absolute;
    right: 0;
    top: 25%;
    z-index: 10;
    color:black;
    font-size:20px;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-30T11:27:08.003

是的，当然你可以使用其他方式 - 占位符文本

当您键入新文本时，文本将被自动删除，然后默认文本将被删除

//文本框

```
<input  type="text" defaultvalue="Name" value="Name" name="add_name" id="add_name"> 
```

//Javasript 代码

```
//For the placeholder
    $('#add-category input[type=text]').focus(function() {

        if ($(this).val() == $(this).attr('defaultValue')) {
          $(this).val('');
        }
      });

      $('#add-category input[type=text]').blur(function() {

        if ($(this).val() == '') {
          $(this).val($(this).attr('defaultValue'));
        } 
    }); 
```

试试上面的选项。

# java - FutureTask 和 Callable 用法

> ID：13644202
> 
> 赞同：-1
> 
> 时间：2012-11-30T11:17:54.047
> 
> 标签：java, multithreading, callable, futuretask

我有一个要实现的功能，我正在考虑使用 FutureTask 和可调用的 calsses。只是想验证我是否可以使用它，以及在这种情况下使用这些类是否正确。这里是：我正在使用 struts spring hibernate 开发一个 Web 应用程序。我必须上传一个包含大约 40 列/字段和大约 1000 行的 excel/.csv/.txt 类型的文件。我必须处理该行的每一行和每个字段。这将包括以下子任务：

1.  从单元格/字段中获取数据
2.  验证数据，例如 maxlenght ，required 等。
3.  如果该行不符合特定条件，则丢弃该行。
4.  为每一行创建一个 VO 并用数据填充一个 VO
5.  存储VO。

因此，我正在考虑为每个行处理使用未来的任务以使其成为多线程。我面临的问题是如何等待所有任务完成，因为我想发送带有最终结果的响应。只是我想让处理更快而不是实际响应时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:31:57.650

我将定义一个[RecursiveAction](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RecursiveAction.html)的子类，它将从 excel 表中获取所有行并将它们分解为单行并执行基本案例部分中每一行提到的操作，在此 RecursiveAction 对象上使用[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)的方法`invoke()`等待操作完成，然后报告它。可以为计算方法本身的基本案例部分中的每一行构建报告。查看有关如何使用[Fork/Join](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:33:08.260

考虑

```
ExecutorService.invokeAll(Collection<? extends Callable<T>> tasks) 
```

它执行任务并在全部完成后返回 Futures 列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:29:23.690

看起来每行的工作量相当小，因此并行化确实只能增加执行和响应时间。最耗时的操作是存储到数据库中，批量存储所有 1000 行比单独存储每一行​​要快得多。

如果你真的想在并行任务中拆分行处理，那么做少量的任务，大致等于处理器核心的数量（Runtime.availableProcessors()）。在主线程中，声明一个队列（例如，ConcurrentLinkedQueue），并让每个任务将其结果（已处理的行子集）放入该队列。主线程获取结果，当收集到所有结果（只计算它们）时，在数据库中存储一个批次。

# javascript - 如何保证 onsubmit 回调中的所有内容都会在提交表单之前运行？

> ID：13644205
> 
> 赞同：3
> 
> 时间：2012-11-30T11:18:08.093
> 
> 标签：javascript, analytics, jquery-events, onsubmit, optimizely

我在一个也有 Google 表单的页面上有[Optimizely ，我想在提交表单时跟踪事件。](https://www.optimizely.com/)这大致是我现在拥有的代码：

```
 window.optimizely = window.optimizely || [];
  $('#ss-form').on('submit', function() {
    window.optimizely.push(['trackEvent', 'submit']);
  }); 
```

问题是它严重低估了实际发生的提交数量。

我能想出的唯一解释（Optimizely 支持也是如此）是大多数情况下，在优化跟踪代码完成运行**之前，表单被提交并且下一页被加载。**它必须在向 Google 发出表单 POST 请求之前向 Optimizely 发出请求，因此它的运行时间可能是不可忽略的。

* * *

如何确保在提交表单之前整个回调**肯定会运行完成？**

PS：Optimizely 支持提到这也可能与页面托管在一个域上并提交到另一个域（谷歌的）这一事实有关，但我不确定这是否与此有关。

# objective-c - Objective C 中的文件转换问题

> ID：13644209
> 
> 赞同：-1
> 
> 时间：2012-11-30T11:18:20.380
> 
> 标签：objective-c, ios, xcode, file-upload

我在文件上传时使用此代码

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        filePath1 = [documentsDirectory stringByAppendingPathComponent:@"myVoice.caf"];// specify your audioname
        NSLog(@"***************************");
        NSLog(@"%@",filePath1);

        NSDictionary *fileAttributes1 = [fileManager attributesOfItemAtPath:filePath1 error: NULL];
        NSNumber *fileSize1 = [fileAttributes1 objectForKey:NSFileSize];
        NSLog(@"%@",fileSize1);
         NSLog(@"***************************");

        NSString *file2 = [[NSBundle mainBundle] pathForResource:filePath1 ofType:@"caf"];
        NSData *file1Data = [[NSData alloc] initWithContentsOfFile:file2];

        NSLog(@"**************&&&&&&&&&&&&&&&*************");
        NSLog(@"%@",file1Data);
        NSLog(@"**************&&&&&&&&&&&&&&&**************"); 
```

================================================

现在 o/p 是

```
2012-11-30 16:39:39.719 Varsity[4802:1a303] /Users/Esolz/Library/Application Support/iPhone Simulator/5.1/Applications/FAED7832-392C-4BFE-9A9B-D18B749FDC9B/Documents/myVoice.caf
2012-11-30 16:39:39.719 Varsity[4802:1a303] 542752
2012-11-30 16:39:39.719 Varsity[4802:1a303] ***************************
2012-11-30 16:39:39.719 Varsity[4802:1a303] **************&&&&&&&&&&&&&&&*************
2012-11-30 16:39:39.719 Varsity[4802:1a303] (null)
2012-11-30 16:39:39.719 Varsity[4802:1a303] **************&&&&&&&&&&&&&&&************** 
```

===============================

实际上主要问题在于这两行

```
NSString *file2 = [[NSBundle mainBundle] pathForResource:filePath1 ofType:@"caf"];
NSData *file1Data = [[NSData alloc] initWithContentsOfFile:file2]; 
```

无法转换文件。我哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:21:23.687

该文件位于文档目录中的应用程序沙箱内，并且不存在于 NSBundle 中。简单来说，它不会像包含图像等那样添加到您的项目中。因此，当您尝试从项目包中获取带有文档目录路径的文件数据时，您将数据设为 null。尝试这个`NSData *file1Data = [[NSData alloc] initWithContentsOfFile:filePath1];`

# php - 使用 wrapText 合并单元格上的 PHPExcel 行自动高度

> ID：13644210
> 
> 赞同：7
> 
> 时间：2012-11-30T11:18:28.007
> 
> 标签：php, phpexcel

有没有在 PHP Excel 中设置行自动高度的好方法？到目前为止，我已经看到您可以使用固定高度，您可以在其中预先指定您想要行多高。我还看到，如果您不使用合并单元格，您可以使用自动高度。

[PHPExcel - 合并单元格的动态行高](https://stackoverflow.com/questions/13313048/phpexcel-dynamic-row-height-for-merged-cells)

[如何在phpexcel中设置自动高度？](https://stackoverflow.com/questions/6054444/how-to-set-auto-height-in-phpexcel)

这两个其他问题提出了类似的问题，但都没有得到回答。我考虑过的一种解决方案是计算单元格中的单词数并根据它和列跨度进行换行。然而，这可能会打开一罐蠕虫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-30T03:16:30.263

你也可以这样做

1.  合并你想要的单元格，例如：A7:C7
2.  将其上下文复制到一个单元格，例如 Z7
3.  将合并单元格的宽度设置为 Z7
4.  将自动换行文本应用到 Z7
5.  使 Z7 不可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T12:29:00.917

您可以使用以下代码执行此操作：

```
$width=84;
$height=20;
$text="abcde...";
$excel->getActiveSheet()->getRowDimension(1)->setRowHeight(ceil(strlen($text)/$width)*$height); 
```

代码中的“高度”是单元格中的文本行，而不是整个单元格。

# jsf-2 - 数据表加载后调用的 primefaces 命令按钮操作

> ID：13644218
> 
> 赞同：0
> 
> 时间：2012-11-30T11:18:57.440
> 
> 标签：jsf-2, primefaces

我遇到了 primefaces 命令按钮和数据表的问题。我在数据表中有两个按钮。当我每次先加载数据表然后调用按钮操作时单击按钮。我只想避免单击按钮时加载数据表。

```
 <p:dataTable id="alphaTable" var="cs" binding="#{challengeSetBean.alphaChallengeSetTable}"
                        value="#{challengeSetBean.challengeSet}" styleClass="myTable"
                        style="list-style-type:none;width:600px;border:1px;" >

                <p:column id="col" style="width:20px;font-size:12px;padding-left:7px;padding-bottom:7px;padding-top:7px;">
                  ..................
                                      ................      
                </p:column>

                <p:column  style="width:28px;font-size:9px;padding-left:7px;padding-bottom:7px;padding-top:7px;">

                        <p:commandButton value="#{msg.updateAccount_reset}" action="#{challengeSetBean.editAnswer()}" immediate="true" rendered="#{!cs.editMode}" process="@this" update="col" >
                        </p:commandButton>
                        <p:commandButton value="#{msg.common_save}" action="#{challengeSetBean.saveAnswers()}" rendered="#{cs.editMode}" ajax="true" immediate="true" update="@form"/>
                        <p:commandButton value="#{msg.cancel}" action="#{challengeSetBean.cancelAnswer()}" rendered="#{cs.editMode}" ajax="true" immediate="true" update="@form"/>
                        <p:commandButton value="#{msg.common_delete}" action="#{challengeSetBean.deleteAnswer()}" rendered="#{!cs.editMode}"  immediate="true" update="@form"/>

            </p:column>
    </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:07:49.547

将 bean 放在视图范围内，以便在初始 GET 请求时仅实例化一次，并在后续回发中重用。从 中删除该`binding`属性，`<p:dataTable>`以便由于鸡蛋 JSF 问题 1492 而不会重新创建视图范围的 bean。现在您可以`challengeSet`在 bean 的（后）构造函数中加载 。在后续回发期间不会调用它。

### 也可以看看：

*   [绑定会杀死支持豆……我做错了什么？](https://stackoverflow.com/questions/13038615/binding-kills-backing-beans-what-am-i-doing-wrong/13039809#13039809)
*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable/4994833#4994833)
*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)

# java - Java ExecutorService 上的 Fibonacci 顺序运行比并行运行更快

> ID：13644222
> 
> 赞同：0
> 
> 时间：2012-11-30T11:19:06.713
> 
> 标签：java, parallel-processing, executorservice

我正在尝试 Java 中的 executor 服务，并编写了以下代码来运行 Fibonacci（是的，大规模递归版本，只是为了强调 executor 服务）。

令人惊讶的是，如果我将 nThreads 设置为 1，它会运行得更快。这可能与提交给执行器服务的每个“任务”的大小非常小有关。但如果我将 nThreads 设置为 1，它仍然必须是相同的数字。

为了查看对共享原子变量的访问是否会导致此问题，我用注释“查看文本”注释掉了这三行，并查看了系统监视器以查看执行需要多长时间。但结果是一样的。

知道为什么会这样吗？

顺便说一句，我想将它与 Fork/Join 的类似实现进行比较。事实证明它比 F/J 实现要慢得多。

```
public class MainSimpler {
    static int N=35;
    static AtomicInteger result = new AtomicInteger(0), pendingTasks = new AtomicInteger(1);
    static ExecutorService executor;

    public static void main(String[] args) {
        int nThreads=2;
        System.out.println("Number of threads = "+nThreads);
        executor = Executors.newFixedThreadPool(nThreads);
        Executable.inQueue = new AtomicInteger(nThreads);
        long before = System.currentTimeMillis();
        System.out.println("Fibonacci "+N+" is ... ");
        executor.submit(new FibSimpler(N));
        waitToFinish();
        System.out.println(result.get());
        long after = System.currentTimeMillis();        
        System.out.println("Duration: " + (after - before) + " milliseconds\n");
    }

    private static void waitToFinish() {
        while (0 < pendingTasks.get()){
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        executor.shutdown();
    }
}

class FibSimpler implements Runnable {
    int N;
    FibSimpler (int n) { N=n; }

    @Override
    public void run() {
        compute();
        MainSimpler.pendingTasks.decrementAndGet(); // see text
    }

    void compute() {
        int n = N;
        if (n <= 1) {
            MainSimpler.result.addAndGet(n); // see text
            return;
        }
        MainSimpler.executor.submit(new FibSimpler(n-1));
        MainSimpler.pendingTasks.incrementAndGet(); // see text
        N = n-2;
        compute();  // similar to the F/J counterpart
    }
} 
```

运行时间（大约）：

*   1 个线程：11 秒
*   2 个线程：19 秒
*   4 个线程：19 秒

更新：我注意到即使我在执行器服务中使用一个线程，整个程序也会使用我机器的所有四个内核（每个内核平均使用率约为 80%）。这可以解释为什么在 executor 服务中使用更多线程会减慢整个进程，但是现在，如果 executor 服务中只有一个线程处于活动状态，为什么这个程序使用 4 个内核？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:31:33.157

> 这可能与提交给执行器服务的每个“任务”的大小确实很小有关。

情况确实如此，因此您主要测量上下文切换的开销。当 n == 1 时，没有上下文切换，因此性能更好。

> 但如果我将 nThreads 设置为 1，它仍然必须是相同的数字。

我猜你的意思是“高于 1”。

您遇到了严重的锁争用问题。当你有多个线程时，锁上的锁一直在`result`竞争。线程必须相互等待才能更新它们`result`，这会减慢它们的速度。当只有一个线程时，JVM 可能会检测到并执行锁省略，这意味着它实际上根本不执行任何锁定。

如果您不将问题划分为`N`任务，而是将其划分为`N/nThreads`可以由线程同时处理的任务（假设您选择`nThreads`最多可用的物理内核/线程的数量），您可能会获得更好的性能。然后每个线程做自己的工作，计算自己的总数，并仅在线程完成时将其添加到总计中。即便如此，因为`fib(35)`我预计线程管理的成本将超过收益。也许试试`fib(1000)`。

# python - 替换方法确实有效（python2.7）

> ID：13644224
> 
> 赞同：-4
> 
> 时间：2012-11-30T11:19:25.197
> 
> 标签：python, replace

我想使用以下代码将 page_data 中的“ **/xxxxx/** ”等字符串替换为“ **/xxxxx.html** ”，但不起作用。page_data 是由爬虫下载的**字节类型。**

```
page_data.replace(each, neweach) 
```

只有当我将它们更改为：

```
page_data = page_data.replace(each, neweach) 
```

page_data 中的字符串（每个）实际上已被替换。

整个代码如下：

```
import os
import sys
import re
import urllib
import urllib2

class WebGet(object):
    base_url = ""
    urls_list = []
    history_list = []
    replace_ch={}

    def __init__(self, base_url):
        self.base_url = base_url[:-1]
        self.urls_list.append('/')
        self.replace_ch[">>"] = "%3E%3E"
        self.replace_ch["<<"] = "%3C%3C"
        self.replace_ch["::"] = "%3A%3A"

    def recurseGet(self):
        '''Get page data recursively'''
        while(len(self.urls_list) != 0):
            url_suffix = self.urls_list[0]
            self.urls_list.remove(url_suffix)
            self.history_list.append(url_suffix)
            url_to_get = self.base_url + url_suffix

            "Get page data with url"
            print "To get",url_to_get
            page_data = urllib2.urlopen(url_to_get).read()
            page_data_done = self.pageHandle(page_data)

            "Write the page data into file"
            if url_suffix[-1] == '/':
                url_suffix = url_suffix[:-1]
            if url_suffix == '':
                url_suffix = "index"
            elif url_suffix[0] == '/':
                url_suffix = url_suffix[1:]
            url_suffix.replace('/','\\')
            url_suffix.replace('>>','%3E%3E')
            url_suffix.replace('<<','%3C%3C')
            url_suffix.replace('::','%3A%3A')
            file_str = "e:\\reference\\"+url_suffix
            if file_str.rfind("\\") != 12:
                new_dir = file_str[:file_str.rfind("\\")]
                if os.path.isdir(file_str) == False:
                    os.mkdir(file_str)
            file_str = file_str.strip()+".html"
            print "write file",file_str
            f_page = open(file_str, "wb")
            f_page.write(page_data_done)
            f_page.close

    def pageHandle(self, page_data):
        page_data.replace("http://www.cplusplus.com/","/") #here the replace works

        re_rule = '<a href="/reference(/\S{2,40}/)\">'
        list_page_urls = re.findall(re_rule, page_data)
        for each in list_page_urls:
            neweach = each
            neweach = neweach[:-1]+".html"
            #page_data = page_data.replace(each, neweach)
            page_data.replace(each, neweach)
            if each in page_data:
                print "fail replace"
            if each in self.history_list:
                continue
            elif each in self.urls_list:
                continue
            elif each == '/':
                continue                
            self.urls_list.append(each)

        return page_data

def main():
    url = "http://www.cplusplus.com/reference/"
    fc = WebGet(url)
    fc.recurseGet()

if __name__ == "__main__":
    main() 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:21:47.087

因为这就是该`replace`方法的作用：返回替换相关字符的字符串副本。

除此之外，字符串在 Python 中是不可变的，所以它不能以任何其他方式工作。

# javascript - 以 html 输出的图形库

> ID：13644227
> 
> 赞同：0
> 
> 时间：2012-11-30T11:19:28.987
> 
> 标签：javascript, jquery, html, ruby, graph

有哪些 Ruby 库（如果有）可以生成图形（例如折线图）并以 html 格式输出（可能使用 JavaScript/jQuery）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:16:42.907

Ruby 更适合后端引擎（例如，在 Rails 上），为生成图形的前端 JavaScript 库提供数据。

因此 Ruby 会生成 JSON 格式的数据，然后可以很容易地被各种库读取以生成任何类型的图形（如果您愿意，也可以使用 CSS 进行定制）。

请参阅此处以比较其中的很多：

[http://socialcompare.com/en/comparison/javascript-graphs-and-charts-libraries](http://socialcompare.com/en/comparison/javascript-graphs-and-charts-libraries)

我的个人喜好？[D3.js](http://d3js.org/)生成非常漂亮的 SVG 图形。

**编辑**

您还可以找到与许多此类图表库更紧密集成的 ruby​​ gem。

# c# - Azure 约束规则不起作用

> ID：13644232
> 
> 赞同：6
> 
> 时间：2012-11-30T11:20:00.080
> 
> 标签：c#, asp.net, azure, autoscaling

我正在部署一个非常简单的 Azure 云服务。

试图让自动缩放工作，以便我可以根据一天中的时间安排向上/向下缩放。

安装和配置一切，部署到 Azure 没有任何问题，但我的规则似乎没有得到遵守。

目前我有以下内容，我希望服务至少运行 2 个实例，但它始终保持在 1。

```
<rules xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/rules" enabled="true">
  <constraintRules>
    <rule name="Default" description="Default rules" enabled="true" rank="1">
      <actions>
        <range min="2" max="8" target="MyRoleName"/>
      </actions>
    </rule>
  </constraintRules>
</rules> 
```

感觉我错过了一些非常简单但不确定的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:44:36.020

根据我的 Wasabi 经验，AFAIR - 没有时间表的约束规则根本不会由服务运行 - 它们没有专门的触发条件。其目的是限制实例的最大和最小数量 - 因此反应性规则将无法过度配置（这可能导致高于计划的费用）和配置不足的服务实例（这可能导致 Azure SLA 要求违反）。

我认为您应该[阅读这篇文章](http://msdn.microsoft.com/en-us/library/hh680945%28v=pandp.50%29.aspx#sec30)，了解为您的服务设置基于计划的自动缩放的正确方法。简而言之-您需要时间表部分来制定规则。类似的东西（从提到的链接中无耻地撕掉）

```
<rules xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/rules" enabled="true">
  <constraintRules>
    <rule name="Default" description="General Limitation" enabled="true" rank="1">
      <actions>
        <range min="2" max="8" target="MyRoleName"/>
      </actions>
    </rule>

    <rule name="Peak" description="Active at peak times" enabled="true" rank="100">
      <actions>
        <range min="4" max="4" target="MyRoleName"/>
      </actions>
      <timetable startTime="08:00:00" duration="02:00:00">
        <daily/>
      </timetable>
    </rule>
  </constraintRules>
</rules> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:57:59.123

您在哪里托管自动缩放​​应用程序块？您是否仅在问题中添加了设置文件？我的回答是，事情没那么简单。添加一个工作者角色并在那里实现自动缩放应用程序块来处理您的网络角色。

老问题/答案：您可以将您所做的步骤与以下指南进行比较 [http://blogs.msdn.com/b/golive/archive/2012/04/26/auto-scaling-azure-with- wasabi-from-the-ground-up.aspx](http://blogs.msdn.com/b/golive/archive/2012/04/26/auto-scaling-azure-with-wasabi-from-the-ground-up.aspx) ，这个很好： http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/autoscaling/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/autoscaling/)

*如果没有更多信息，很难弄清楚您的设置有什么问题。*

# java - CXF WebService 的 Spring 配置得到 java.lang.NoClassDefFoundError: javax/xml/ws/EndpointReference

> ID：13644234
> 
> 赞同：5
> 
> 时间：2012-11-30T11:20:14.400
> 
> 标签：java, web-services, spring, cxf

我正在尝试让 CXF 在 weblogic 上与 spring、maven 一起工作。项目编译/构建很好，但是当我尝试部署它时，我收到了这个错误：

```
 <User defined listener org.springframework.web.context.ContextLoaderListener failed:    org.springframework.beans.factory.BeanCreationException: Error creating bean with name   'ibanInfos': Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/EndpointReference.
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ibanInfos': Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/EndpointReference
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at  org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    Truncated. see log file for complete stacktrace
java.lang.NoClassDefFoundError: javax/xml/ws/EndpointReference
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2395)
    at java.lang.Class.getDeclaredMethods(Class.java:1763)
    at java.beans.Introspector$1.run(Introspector.java:1265)
    at java.security.AccessController.doPrivileged(Native Method) 
```

知道如何解决这个问题吗？事实上，我是使用 java first 策略来生成 WSDL。

这是我的弹簧文件：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans.xsd
http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
    <import resource="classpath:service-definition-beans.xml"/> 
    <jaxws:endpoint id="ibanInfos" implementor="#ibanInfosService" address="http://localhost:7001/IbanInfos" />  
</beans> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T12:31:35.460

确保您的类路径中有[jaxws-api-2.3.1.jar](https://repo1.maven.org/maven2/javax/xml/ws/jaxws-api/2.3.1/jaxws-api-2.3.1.jar)。

它可以通过上面的链接或从 maven 下载。

```
<dependency>
    <groupId>javax.xml.ws</groupId>
    <artifactId>jaxws-api</artifactId>
    <version>2.3.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:35:37.297

我终于找到了问题：我实际上在 10.0 版本下使用 weblogic，它提供了不包含 EndPointInterface 的 Jaxws2.0。一个解决方法是将 jar 添加到 setDomainEnv.sh 中，它将完美地工作。非常感谢你的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:29:06.883

`EndpointReference`在 JAX-WS 2.1 中引入，而 JAX-WS 2.1 自 Java 1.6.0_04 起包含在 JRE 中。

因此，如果`EndpointReference`在您的环境中不可用，您需要升级您的 JRE/JDK，或者将最新版本的 JAX-WS API 作为单独的依赖项包含在内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:31:50.133

好像这个类不在你的类路径中。您应该将相关项目添加到您的 POM。通过搜索网络，这个类存在于许多库中。这是包含此类人工制品的摘录：

```
<dependency>
  <groupId>javax.xml.ws</groupId>
  <artifactId>jaxws-api</artifactId>
  <version>2.2.3</version>
</dependency> 
```

# c# - C# WinForms 控件渲染

> ID：13644236
> 
> 赞同：1
> 
> 时间：2012-11-30T11:20:25.700
> 
> 标签：c#, winforms, controls, rendering

我有一个 WinForms 应用程序，它在一个表单中使用四个面板来保存和显示信息、控件等。这些面板是隐藏还是显示取决于表单上按下的按钮 - 我希望你明白 :) 面板是透明的并且表单包含背景图像。

现在的问题 - 如果表单的背景是图像，则面板上的控件将其状态更改为显示也需要太多时间渲染 - 有一种闪烁，您可以看到控件如何一个接一个地渲染。有没有人遇到过这个？

附加信息

*   当我用纯色填充背景（不是图像！）时，问题就消失了
*   我已经尝试过使用不同类型的图像（png、bmp、jpg、低分辨率、小调色板等，但没有效果）
*   我真的需要背景图片
*   我真的很想避免转换为 WPF - 只是因为我没有太多时间。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:54:52.163

add a panel on your form and Dock it to middle, Use your background image to this panel... and also try the following code

```
MainPanel.SuspendLayout();
panel1.Visible= true;
panel2.Visible= false;
MainPanel.ResumeLayout(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:07:19.173

如果你对 win32 API 没问题，解决方案 1）

```
[DllImport("user32.dll")]
public static extern bool LockWindowUpdate(IntPtr hWndLock); 
```

点击按钮：

```
try
{
      LockWindowUpdate(this.Handle);
      //code here
}
finally
{
      LockWindowUpdate(IntPtr.Zero);
} 
```

解决方案 2) 将 SendMessage() 与 WM_SETREDRAW 一起使用（更好的一个）

```
private const int WM_SETREDRAW      = 0x000B;
private const int WM_USER           = 0x400;
private const int EM_GETEVENTMASK   = (WM_USER + 59);
private const int EM_SETEVENTMASK   = (WM_USER + 69);

[DllImport("user32", CharSet = CharSet.Auto)]
private extern static IntPtr SendMessage(IntPtr hWnd, int msg, int wParam, IntPtr lParam);

IntPtr eventMask = IntPtr.Zero; 
```

点击按钮：

```
try
{
      // Stop redrawing:
      SendMessage(panel1.Handle, WM_SETREDRAW, 0, IntPtr.Zero);
      // Stop sending of events:
      eventMask = SendMessage(panel1.Handle, EM_GETEVENTMASK, 0, IntPtr.Zero);

      // code here
}
finally
{
      // turn on events
      SendMessage(panel1.Handle, EM_SETEVENTMASK, 0, eventMask);
      // turn on redrawing
      SendMessage(panel1.Handle, WM_SETREDRAW, 1, IntPtr.Zero);
} 
```

# mysql - 如何将存储在 XML 文件中的数据转换为关系数据库（MySQL）？

> ID：13644237
> 
> 赞同：8
> 
> 时间：2012-11-30T11:20:29.817
> 
> 标签：mysql, sql, xml, relational-database, data-conversion

我有一些 XML 文件，其中包含一个研究项目的数据，我需要对其进行一些统计。数据量接近100GB。

结构没有那么复杂（可以映射到关系模型中的大约 10 个表），并且考虑到问题的性质，这些数据将永远不会再次更新，我只需要它在易于运行查询的地方可用上。

我已经阅读过有关 XML 数据库以及在其上运行 XPATH 样式查询的可能性，但我从未使用过它们，而且我对它不太满意。将数据保存在关系数据库中将是我的首选。

因此，我正在寻找一种将存储在 XML 中的数据转换为关系数据库的方法（想想一个类似于 .sql 生成的大文件`mysqldump`，但其他任何方法都可以）。最终目标是能够运行 SQL 查询来处理数据。

经过一些研究，我几乎确信我必须自己写它。但我觉得这是一个普遍的问题，因此应该有一个工具可以做到这一点。

那么，您知道任何可以将 XML 数据转换为关系数据库的工具吗？

**PS1：**

我的想法是这样的（它可以以不同的方式工作，但只是为了确保你明白我的意思）：

1.  分析数据结构（基于 XML 本身，或基于 XSD）
2.  基于该结构构建关系数据库（表、键）
3.  生成 SQL 语句以创建数据库
4.  生成SQL语句创建填写数据

**PS2：**

我在这里看到[了一些](https://stackoverflow.com/questions/748977/how-to-transform-huge-xml-files-into-relational-data-to-perform-queries) [帖子](https://stackoverflow.com/questions/6213010/import-the-data-from-the-xml-files-into-a-mysql-database)，但我仍然找不到解决方案。Microsoft 的“ [Xml Bulk Load](http://support.microsoft.com/kb/316005) ”工具似乎朝着这个方向做了一些事情，但我没有 MS SQL Server。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:51:47.930

数据库不是搜索数据的唯一方法。我强烈推荐[Apache Solr](http://lucene.apache.org/solr/)

*   [在 XML 文件上实现搜索的策略](https://stackoverflow.com/questions/11210600/strategies-to-implement-search-on-xml-file/11213025#11213025)

将原始数据保存为 XML 并使用 Solr 索引进行搜索

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T12:03:12.977

**将正确格式的**XML 文件导入MySql 数据库很容易：

[https://dev.mysql.com/doc/refman/5.6/en/load-xml.html](https://dev.mysql.com/doc/refman/5.6/en/load-xml.html)

这意味着，您通常必须将 XML 数据转换为这种格式。您如何执行此操作取决于转换的复杂性、您了解的编程语言以及是否要使用 XSLT（这很可能是一个好主意）。

从您以前的答案看来，您似乎了解 Python，因此[http://xmlsoft.org/XSLT/python.html](http://xmlsoft.org/XSLT/python.html)可能是您开始的正确选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T12:47:47.187

看看 StAX 而不是 XSD 来分析/提取数据。它是基于流的，可以处理巨大的 XML 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T11:48:07.830

如果您对商业产品感到满意，您可能想看看SQL Maestro Group 的[Data Wizard for MySQL](http://www.sqlmaestro.com/products/mysql/datawizard/)。

此应用程序特别针对导出数据，当然也可以从 MySQL 数据库导入数据。这也[包括 XML 导入](http://www.sqlmaestro.com/products/mysql/datawizard/tour/data_export_import/)。您可以下载 30 天试用版以检查这是否是您正在寻找的。

我不得不承认我还没有使用他们的 MySQL 产品线，但是我对他们的 Firebird Maestro 和 SQLite Maestro 产品有很好的用户体验。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T11:35:26.650

如果您对 Perl 感到满意，那么我在`XML::Twig`处理非常大的 XML 文件的模块方面非常幸运。

`DBI`基本上，您只需要设置一些 twig 处理程序并使用/将数据导入 MySQL `DBD::mysql`。

[xmltwig.org](http://www.xmltwig.org/xmltwig/tutorial/yapc_twig_s5.html)上有很好的例子。

# c# - 远程进程的 Visual Studio 2012 调试未按预期工作

> ID：13644240
> 
> 赞同：12
> 
> 时间：2012-11-30T11:20:47.163
> 
> 标签：c#, debugging, windows-services, visual-studio-2012, remote-debugging

我正在努力应对一个相当困难的调试挑战，并希望有人可能会提供一些线索来完成这项工作。

这是场景：

我有一个 C# Windows 服务，它在具有管理员权限的用户帐户下运行，并在具有标准用户权限的用户帐户下启动一个单独的可执行进程。这两个进程旨在使用 WCF 进行通信。

不幸的是，当子进程启动时，它立即崩溃，事件日志中没有任何内容表明发生了什么。父进程继续运行，无一例外。

有关信息：这两个应用程序在父进程是桌面应用程序的配置中可靠地协同工作。我也成功地将父级作为 Windows 服务，但仅当两个进程在具有管理员权限的同一用户帐户下运行时。

我现在需要重新配置它们的关系来限制子进程的权限，但这是崩溃发生的时候。

为了证明我正在尝试做的事情是可行的，我创建了两个存根应用程序并以所需的配置成功启动它们。因此，我可以推断出我真正的子应用程序包含与此配置不兼容的内容，甚至在代码开始执行之前就导致崩溃。不幸的是，由于子进程是基于一些相当复杂的遗留代码，在我消除问题之前要隔离它的元素并不容易，所以我真的需要一种可靠的方法来逐步完成它。

如果我修改子进程的代码以在启动时立即启动调试，它会邀请我附加一个调试器，但无法完成附件，并显示一条消息指示`The Just-in-time debugger does not have permission to debug the process`.

我也看到[了这个问题](https://stackoverflow.com/questions/4133164)，并试图实施[这个提议的解决方案](https://stackoverflow.com/a/4145883/168614)（看起来很有希望），但它在我的场景中无法工作。而不是在启动应用程序之前启动调试，它似乎什么都不做 - 调试器和应用程序都没有启动，并且不显示调试邀请对话框。但是，我已经验证了这种技术在我的环境中有效（通过使用它来启动 Notepad.exe），因此很明显我的应用程序或我启动它的方式有一些问题导致了问题。

如果有人有任何建议，我很乐意进行实验并分享有关我的测试结果的更多详细信息。

非常感谢您的想法，

蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:16:27.750

调试器永远不会为子进程启动的事实意味着错误应该发生在**父**服务器进程中。如果您正确设置`Image File Execution Options`（使用 GFlags 程序使用 Microsoft 的免费 Windows 调试工具最容易做到），那么这意味着您永远不会开始创建子项。最简单的测试方法是在代码中添加一个 Assert，在创建子进程调用之前，在调试模式下构建父服务，将其安装/注册为服务，然后启动它。当 Assert 弹出时，附加到进程，然后从那里开始调试。然后，您应该会看到父级中发生的创建过程错误。

如果要交互调试父服务和子进程，可以使用WinDbg和GFlags，但是会比较复杂。

您将需要 WinDbg 和 GFlags。这些工具作为 Windows 调试工具的一部分从 Microsoft 免费提供。您可以在此处找到该免费软件包：http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

使用 GFlag 通过以下调试器选项为您的 PARENT SERVICE 设置执行选项：

```
"C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x86\WinDbg.exe" -server tcp:port=5000:9000 -o -g 
```

当 Windows 启动你的父服务时，它会在 WinDbg 下这样做。由于*-o*选项，WinDbg 还将管理启动的子进程，允许您从启动时交互式地*调试子进程。*由于*-g*选项，WinDbg 将启动 ParentService 并让它运行，而不是像正常调试行为那样在加载时停止它。这将阻止 Windows SCM 将其关闭并启动新实例。

因为你正在运行一个服务，它不能访问桌面，所以它的宿主 WinDbg 也不能。您必须将另一个调试器附加到运行 ParentService 的 WinDbg 的运行实例*。*您可以使用另一个 WinDbg 实例来执行此操作。为此，启动第二个 WinDbg 实例，并使用菜单项“文件|连接到远程会话...”进行远程连接。在对话框中，输入：

*tcp:端口=5000:9000,服务器=[机器名]*

连接后，您将能够使用 ParentService.exe，当它创建 ChildProcess 时，执行上下文将切换到它，您也将能够对其进行调试。

我以前曾使用这种技术来调试由 Windows 服务创建的子进程。这并不像在其 IDE 中的 Visual Studio 内置调试​​器中调试某些东西那么简单，但它确实有效。

WinDbg 有大量可用的文档，包括来自 Microsoft 和其他在线来源的文档。我在上面提供的 URL 包含指向 WinDbg 文档的链接。

我建议使用 GFlags，因为它会对您的注册表进行所有必要的编辑，以便在您选择的调试器下运行可执行文件。它还有更多功能，值得花时间学习。

WinDbg 启动时可以设置断点和设置各种选项。我将*-g*选项替换为命令行选项：

```
-c "$$<c:\MyDebugCommands.txt" 
```

这指示 WinDbg 运行命令，该命令是运行名为“MyDebugCommands.txt”的 WinDbg 脚本。我用我需要的所有设置更改（例如加载符号选项）填充 MyDebugCommands.txt 文件，以及设置我感兴趣的断点，文件中的最终命令是*-g*

正如我所说，它不像使用 VS IDE 及其内置调试器那么简单，但它可以让您交互式地调试您的父服务及其启动的子进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:37:49.523

根据我基于上述场景的测试（父进程是具有管理员权限的服务，子进程是没有管理员权限的控制台），当我人为地强制子进程立即抛出权限异常时，我看到与您相同的调试错误它开始。此实例中的错误消息可能具有误导性，因为不清楚这实际上是调试器权限问题

了解您的子进程是什么类型的应用程序会很有用，因为这会影响您拥有的调试选项。

我尝试调试的第一种方法是在我的子进程（控制台应用程序）中拦截所有未处理的异常。您可以通过在子应用程序的启动过程中添加以下代码来做到这一点：

```
AppDomain.CurrentDomain.UnhandledException += new 
    UnhandledExceptionEventHandler(App_UnhandledException); 
```

然后我将代码添加到我的**App_UnhandledException**过程以记录异常。这对我有用，我可以看到权限错误的原因。唯一需要注意的是，这不会拦截由于权限问题而导致您的应用程序甚至无法加载的异常。但是这种方法至少应该减少您在理解权限问题方面的搜索空间。

如果在您的异常处理程序到达之前生成异常，另一种可能性是使用[程序集绑定日志查看器](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)。这是一个非常有用的工具。

FWIW，您可以通过在 Visual Studio 中启动服务来单步执行您的服务代码（但遗憾的是不能进入您的子进程）。下面在名为 DEBUG 的 switch case 中显示的代码将允许您在 VS 中启动/调试您的服务。

```
// This is the entry point
static void Main(string[] args)
{
    // If parameter passed, act on it
    if ( args.Length > 0 )
    {
        switch (args[0] )
        {
            // Debug the service as a normal app from within Visual Studio
            case DEBUG:
                MyService DebugService = new MyService();
                DebugService.OnStart(null);
                break;
            // Install the service programatically
            case INSTALL:
                ManagedInstallerClass.InstallHelper(new string[] _
                { Assembly.GetExecutingAssembly().Location });
                break;
            // Un-install the service programatically
            case UNINSTALL:
                ManagedInstallerClass.InstallHelper(new string[] +
                { UNINSTALL, Assembly.GetExecutingAssembly().Location });
                break;
            // We don't understand this parameter!
            default:
                message = string.Concat(DEBUG, " to run service manually.",     Environment.NewLine);
                message += string.Concat(INSTALL, " to install service.",     Environment.NewLine);
                message += string.Concat(UNINSTALL, " to un-install service.",     Environment.NewLine);
                message += string.Concat("Do not understand the command-line parameter ", args[0]);
                throw new System.NotImplementedException(message);
        }
    }
    // If no parameter passed, just start the service normally
    else
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] { new MyService() };
        ServiceBase.Run(ServicesToRun);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T08:09:49.060

您是否尝试过以管理员身份运行 Visual Studio 并调用[Process.EnterDebugMode()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enterdebugmode%28v=vs.110%29.aspx)方法？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T04:49:25.330

> 如果我修改子进程的代码在启动时立即启动调试，它会邀请我附加一个调试器，但无法完成附件，并显示一条消息表明即时调试器没有调试权限过程

以管理员身份运行 secpol.msc，并在“本地策略 | 用户权限管理”选择“调试程序”。然后将“用户”组添加到其中。看看这是否解决了权限问题。

高温高压

# matlab - 如何存储回调函数的结果？

> ID：13644241
> 
> 赞同：0
> 
> 时间：2012-11-30T11:20:48.497
> 
> 标签：matlab, user-interface, callback

我创建了一个 MATLAB gui 来运行某个模拟。

在这个 gui 中是一个按钮来开始模拟。然后，此按钮回调函数将执行计算。这当然会产生一个带有结果的数据集。

此外，界面中还有一个绘图区，以及一个用于在不同图形之间切换的选择框，以显示模拟结果的不同方面。因此，结果也必须可用于 gui 中的其他功能。这是个问题，因为回调函数没有输出

我能想到的两种解决方案是将数据集存储在 MAT 文件中，或者使用全局变量。第一个解决方案对我来说似乎并不正确，而且我了解到如果可能的话，必须避免全局变量。那么这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:26:52.853

您可以创建一个用户定义的类，该类继承自定义回调的句柄类，然后您的回调从句柄类实例的“内部”执行

```
classdef mySimulation < handle
    properties
        hFigure
        mySimResults
    end
    methods
        function this = mySimulation(varargin)
            hFigure = figure; 
            ...
            <build figure components>
            ...
        end
        function myButtonCallback(this, src, evnt)
            this.mySimResults = runMySimulation;
            ...
            <update plot etc>
        end
        function mySelectBoxCallback(this, src, evnt)
            ...
            <update plots>
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:20:48.497

MATLAB 为此提供了某些功能。有函数guidata，可以存储一个变量。例如，这可以用来传递您的 gui 句柄。此外还有 setappdata 和 getappdata 函数。这些函数是在函数之间传输数据并将变量耦合到图形句柄的方式。

可以在[此处](http://www.mathworks.com/help/releases/R2012b/matlab/creating_guis/ways-to-manage-data-in-a-programmatic-gui.html)阅读有关不同方法的更多信息。

这应该在语义上比使用全局变量更正确。不过，我还是很好奇为什么。任何意见？

# regex - asp.net mvc中密码验证的正则表达式

> ID：13644242
> 
> 赞同：0
> 
> 时间：2012-11-30T11:20:49.223
> 
> 标签：regex, asp.net-mvc

我需要一个正则表达式来验证 asp.net mvc 中的密码，如下所示：

1.  密码必须至少为 8 个字符，最大为无穷大
2.  密码应该是字母数字
3.  密码不应包含任何特殊字符。

我用过`[a-zA-Z0-9]+[\w.][a-zA-Z]+[\w.]`，但不符合标准

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-30T11:22:48.743

我不会向你解释任何事情，因为你只是要求我们做你的工作，但因为真的很容易，我就把它交给你。

`^[a-zA-Z\d]{8,}$`

# javascript - 在缩小的 Javascript 中查找错误的位置

> ID：13644255
> 
> 赞同：2
> 
> 时间：2012-11-30T11:21:43.797
> 
> 标签：javascript, python, minify

我正在 Python 网络服务器上实现一项功能，该功能会在第一次请求时自动获取、连接、缩小、缓存和提供 Javascript 文件（包括外部文件），以便用户无需我们手动运行任何文件即可获得缩小的好处当我们推送更改时，我们的 Javascript 通过一个缩小器。

然而，问题在于我们选择的 minifier ( [slimit ) 在 Javascript 中的](http://pypi.python.org/pypi/slimit)*某处*引入了语法错误，并且（自然地）删除了所有换行符。

在试图找出原因并找到解决方法时，仅仅知道`Unexpected token ILLEGAL`在我们成千上万的缩小 Javascript 字符中存在某个地方是没有帮助的。

所以：

1）有没有办法在（任何）浏览器中，当我在浏览器的开发者工具部分查看它时，我可以自动“美化”Javascript，在语句后插入换行符，并在它们发生的行上显示错误？

2）或者，在我们的测试服务器上返回缩小的Javascript之前，我可以使用一个聪明的技巧，尽可能在语句的末尾插入换行符，以便在Developer中查看时更容易找到语法错​​误的位置工具？

3）或者，对于我的问题是否还有其他明显的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:24:35.563

如果您正在使用 / 或可以使用 chrome 进行调试，则可以选择以漂亮的打印方式查看缩小的文件
`press f12 -> Sources -> Select the javascript file to debug -> select pretty print from the bottom bar`。

这将为缩小文件上的所有选项卡设置正确的格式，并且您可能会找到错误

# c++ - 如何在程序中调用 2 个或多个 shellexecute 函数

> ID：13644261
> 
> 赞同：0
> 
> 时间：2012-11-30T11:21:57.053
> 
> 标签：c++, winapi, system, shellexecute, execv

我是windows平台winapi c++的初学者，我需要在一个程序中执行3个exe文件，即安装程序。我使用了shellexecute，exec v，系统调用，但在第一次安装程序后都退出了程序，请帮我解决这个问题...

我使用的部分代码

```
ShellExecute( hwndDlg, "open", "calc.exe", NULL, NULL, SW_SHOWNORMAL );

status = execv(".\\InstallationFiles\\dotnetfx 35 SP1 Full.exe",child_args); 
```

提前谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:25:53.667

假设您想使用 WinAPI（您的标签之一），您应该使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)function。[这里](http://www.goffconcepts.com/techarticles/development/cpp/createprocess.html)有一些例子。

`exec*`家庭根据[手册](http://linux.about.com/library/cmd/blcmdl3_execv.htm)：

> exec 系列函数用新的过程映像**替换当前**的过程映像。本手册页中描述的函数是函数 execve(2) 的前端。（有关替换当前进程的详细信息，请参阅 execve 的手册页。）

因此，如果您想坚持`exec`家庭功能，则需要使用某种[在 windows 下](https://stackoverflow.com/questions/985281/what-is-the-closest-thing-windows-has-to-fork)[`fork()`](http://linux.die.net/man/2/fork)会带来一些问题的功能，但这里有一个[“类似 linux”的示例](http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html)。

# css - Bootstrap 2.2.1 模态错误 - 调用 href 周围的蓝色边框？

> ID：13644262
> 
> 赞同：13
> 
> 时间：2012-11-30T11:21:57.930
> 
> 标签：css, twitter-bootstrap

我是新来的（还有引导程序和 JavaScript），希望我不会问以前已经问过的问题。我做了很多谷歌搜索并在这里搜索，找不到任何人提到这个特定问题。

我发现了一个我认为 Bootstrap 2.2.1 的错误 .. 当你关闭一个模式时，调用它的 href 链接**现在周围有一个蓝色边框**。这发生在按钮、导航项目、任何东西上。这可以在 Bootstrap 现场演示本身上看到 - 单击“Modals bootstrap-modal.js”部分下的蓝色按钮“Launch demo modal”。关闭模态框后，您可以在按钮周围看到浅蓝色边框。

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

这个问题把我逼疯了，我把 CSS 弄乱了很久，然后尝试了不同的浏览器，直到我降级并且上面的问题在 bootstrap 2.0.4 上不存在。

有谁知道这是否是 2.2.1 的已知问题，还是自特定版本以来就存在？或者这里有什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T11:40:51.493

一旦你找到 CSS 属性是什么，这是非常简单的修复。我认为它来自模态焦点的一些问题，他们决定修改生成的 html。您需要定义以下 CSS。它来自以下[链接](https://github.com/twitter/bootstrap/issues/4511)。

```
.modal-open .modal,.btn:focus{
    outline:none!important
} 
```

希望能帮助到你！我对结果做了一个 jsfiddle（包括 bootstrap 的 css + js），所以你可以[在这里](http://jsfiddle.net/5sydy/)观看它的现场演示。请注意，如果您使用的不是按钮，则大纲可能会返回，因为我们只在此处应用它。由于您指的是href，因此您很可能是从链接调用模式，因此也应该触发`a:focus`

# javascript - 引导词缀总是“跳跃”

> ID：13644266
> 
> 赞同：4
> 
> 时间：2012-11-30T11:22:09.430
> 
> 标签：javascript, twitter-bootstrap, responsive-design, sidebar

我想在我的侧边栏上使用 bootstrap 的词缀插件。但是，由于我的网站是响应式的，它总是在某些方面跳跃，我无法让它正常工作。我尝试了这里列出的解决方案：[How to use the new affix plugin in twitter's bootstrap 2.1.0?](https://stackoverflow.com/questions/12070970/how-to-use-the-new-affix-plugin-in-twitters-bootstrap-2-1-0) 但这不仅仅是工作。

[这是一个演示](http://new.hurttiajahuumoria.fi/ilmoittautuminen/ "这是一个演示")

我知道如何在具有固定宽度的网站上做到这一点，但由于我的网站**是**响应式的，引导文档也是如此，并且它[在那里](http://twitter.github.com/bootstrap/javascript.html#affix)完美运行，我如何达到相同的效果？

因为这可能永远不会起作用

```
.affix {
    position: fixed; 
    top: 20px; 
    right: 10%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:30:43.733

当我使用它时，我的`.affix`班级只有`position:fixed`，没有别的。`affix()`可以在使用选项的方法中设置附加元素被附加的顶部位置`offset`，例如

```
$("#nav_id").affix({
    offset: 400
}); 
```

# javascript - 根据 url 分配不同的类

> ID：13644268
> 
> 赞同：0
> 
> 时间：2012-11-30T11:22:22.470
> 
> 标签：javascript, html, css

我需要动态 assenare 类“活动”来管理某些链接的样式。我有这个代码但不起作用..

```
<script type="text/javascript" language="javascript">  
function locationPathname(){  

    var path = window.location.pathname.split('/');
    path = path[path.length-1];
    alert(path);
    if (path !== undefined) {
    $('livello2 a[href="/' + path + '"]').addClass('active');
  }
    }
 </script> 
```

和html：

```
 <div class="livello2">
                 <div class="live">
                     <a href="./Live.php"><img src="live_off.png"></a>
                 </div>
                 <nav class="menu">
                     <ul>
                         <a href="./index.php" ><li>HOME</li></a>
                         <a href="./Concerti.php"><li>CONCERTI</li></a>
                     </ul>
                 </nav>
       </div> 
```

CSS：

```
.active{background-color:red} 
```

有人有什么建议或看到了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:46:47.153

在您的 JS 中，您可以这样做：

```
$('.livello2 a[href="/' + path + '"]') 
```

（假设您在选择器的开头添加了那个点）将被转换（在计算`path`变量之后）成类似的东西

```
$('.livello2 a[href="/Concerti.php"]') 
```

但是代码中的实际 href 属性以`.`（点）开头，例如

```
href="./Concerti.php" 
```

所以你需要将上面的 JS 片段更新为

```
$('.livello2 a[href="./' + path + '"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:24:44.187

替换这个

```
$('livello2 a[href="/' + path + '"]') 
```

有了这个

```
$('.livello2 a[href="/' + path + '"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:31:55.177

除了@Murali Prasanth 关于在您的 JS 片段中添加点的答案之外，我建议确保您的 javascript 块在 close 之后立即放置`</body>`。如果它在其中，它就不会工作，因为页面还不知道`.livello2`——它还没有被加载。所以，要么在关闭之前放置 JS，要么`</body>`像这样包装你的 javascript 代码：

```
<script type="text/javascript" language="javascript">  
    $(document).ready(function () {
        function locationPathname(){
        …
        }
    });
</script> 
```

# html - Primefaces 数据表行 id

> ID：13644273
> 
> 赞同：3
> 
> 时间：2012-11-30T11:22:45.697
> 
> 标签：html, jsf, datatable, primefaces

如何在 Primefaces 中将 id（HTML 属性）**设置为 DataTable 行（tr 元素）？**
我搜索过，但到处都是如何获取 id。
我需要这个，因为我想将 pf 数据表与[rowReordering 插件](http://jquery-datatables-row-reordering.googlecode.com/svn/trunk/index.html)集成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:19:55.110

您无法`<tr>`从 PrimeFaces API 设置 Primefaces 数据表中元素的 id，但它似乎不需要行本身具有特定 id，因此可以在 Javascript 中执行此操作回发后的客户端。

```
$(document).ready(function() {
  $('.ui-datatable-data').children().each(function(index, element) {
    element.attr('id', 'foo_' + index);
  };
}; 
```

这将找到 jQuery 和 Primefaces 数据表的每个 tbody 元素，并将子项的 id 设置为`tr`唯一且可预测的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T14:16:48.570

我已经尝试[了 maple_shaft](https://stackoverflow.com/users/650425/maple-shaft)的答案并遇到了一些问题。我解决了这些问题，这是我的代码：

```
$(document).ready(function () {
   $('.ui-datatable-data').children().each(function (index, element) {
      element.setAttribute('id', 'row_' + index);
   });
}); 
```

现在我的每一行都有自己的 ID 为 'id="row0"'

# svn - 列出具有特定属性和值的 subversion 存储库中的所有路径

> ID：13644276
> 
> 赞同：1
> 
> 时间：2012-11-30T11:22:51.817
> 
> 标签：svn, svnadmin, svnlook

存储库的一部分将移动到新服务器上它自己的存储库，这可能会破坏已设置的外部。

如何找到设置了外部的所有路径的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:07:16.763

制作一个可执行脚本'find_externals.sh'

```
#!/bin/bash
repository='/path/to/repo'

echo find paths that have externals set
while read fullpath; do
        result=`svnlook proplist "$repository" "${fullpath}" -v`

        if [[ "$result" == *svn:ext* ]] ; then
                echo;echo "Path: '$fullpath'"
                echo $result
        fi
done 
```

像这样称呼它

```
svnlook tree /path/to/repo --full-paths | ./find_externals.sh 
```

# python - Python：“取消屏蔽”一长串 XOR 数据

> ID：13644278
> 
> 赞同：0
> 
> 时间：2012-11-30T11:22:51.990
> 
> 标签：python, performance, websocket, xor

作为[WebSocket 规范](https://www.rfc-editor.org/rfc/rfc6455)的一部分，所有客户端发送的帧都**必须**使用 4 字节掩码屏蔽帧的有效负载部分。在 C++ 中，这真的很容易：

```
for (size_t i = 0; i < length; i++) {
    data[i] ^= mask[i % 4];
} 
```

可悲的是，Python 字符串是不可变的，我宁愿避免这样做，因为字符串缓冲区的不断复制和重新创建：

```
frame = ''
for i in range(0, length-1):
    frame += chr(ord(oldFrame[i]) ^ ord(mask[i % 4])) 
```

所以经过一番研究，我发现了这个：

```
m = itertools.cycle(mask)
frame = ''.join(chr(ord(x) ^ ord(y)) for (x,y) in itertools.izip(oldFrame, m)) 
```

在 CPython 中，这将取消屏蔽所需的时间减半。在 PyPy 中，对于 16MB 的掩码字符串，这很容易增长到 1.5GB 的 RAM 使用量，之后它开始交换，我必须杀死它。CPython 对这个 16MB 的字符串使用“仅”150 MB RAM（并且需要 20 秒），但这仍然很糟糕。相比之下，我的 C++ 基准测试在 0.05 秒内完成，没有内存开销。

当然，这些极端情况在软件进入生产模式后实际上不会发生（所有传入数据的上限为 10KB），但我真的很想在这个基准测试中取得好成绩。

有任何想法吗？唯一的要求是：在 CPython 和 PyPy 上都快，并且内存使用率低。不必保留原始字符串。

一些想要实验的人的测试代码：

```
import os, time

frame = os.urandom(16 << 20)
mask = os.urandom(4)

def unmask(oldFrame, mask):
    # Do your magic
    return newFrame

for i in range(0, 3): # Run several times, to help PyPy's JIT compiler
    startTime = time.time()
    f = unmask(frame, mask)
    endTime = time.time()
    print 'This run took %.3f seconds' % (endTime - startTime) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:24:17.460

改用[字节数组](http://docs.python.org/2/library/functions.html#bytearray)，它*是*可变的。

```
frame = bytearray(frame)
for i in range(len(mask)):
    frame[i] ^= mask[i] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:53:25.063

您也可以考虑使用 numpy，它允许您将操作卸载到 numpy 中的高效 C 代码。这是[websockify 使用](https://github.com/kanaka/websockify/blob/master/websockify/websocket.py#L241)的方法，当 numpy 不可用时回退到较慢的方法，该方法使用支持可变字节数组的数组模块。

# php - 在 PHP 中无法通过 HTTPS 和 cURL 连接

> ID：13644280
> 
> 赞同：0
> 
> 时间：2012-11-30T11:23:05.327
> 
> 标签：php, curl, security

我正在尝试使用`cURL`and连接到 API `https`，但无法正常工作。

它可以完美地工作，`http`但是当我将它更改为`https`变量`$url`时，执行需要 30 多秒，最后它显示`false`为结果。

这是功能：

```
$url = 'https://api.xxxxxxx.com/api.php?user=xxxx&pass=xxxx';

$ch = curl_init($url);

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);

$result = curl_exec($ch);
curl_close($ch);

echo $result; 
```

如果我用这个调试：

```
debug(curl_init($url)); 
```

我得到：

```
resource 
```

任何想法可能是原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:02:13.940

最终是该网站试图访问不允许安全连接。

# php - PHP 或 JQUERY JSON 处理

> ID：13644281
> 
> 赞同：0
> 
> 时间：2012-11-30T11:23:06.997
> 
> 标签：php, javascript, html, json, web

我有一个来自 PHP 的简单 JSON StdClass 对象，我希望将其格式化为 table/list/div 并消除过程中的其他键和值。JSON 看起来像这样：

```
stdClass Object ( 
[msc] => 150 
[number] => 309 
[status] => OK 
[msc_mcc] => 652 
[imsi] => 652010154107728 
[mcc] => 652 
[operator_country] => Botswana 
[msc_operator_name] => MSC 
[msc_operator_country] => Botswana 
[msc_mnc] => 01 
[mnc] => 01 
[id] => 1072540715 
[msc_location] => 
[operator_name] => MSC ) 
```

我试过 PHP 并做了一个表格，但问题是我需要选择除整个身体以外的某些值，而且我还需要消除空值

```
function print_nice($elem,$max_level=10,$print_nice_stack=array()){ 
    if(is_array($elem) || is_object($elem)){ 
        if(in_array($elem,$print_nice_stack,true)){ 
            echo "<font color=red>RECURSION</font>"; 
            return; 
        } 
        $print_nice_stack[]=&$elem; 
        if($max_level<1){ 
            echo "<font color=red>nivel maximo alcanzado</font>"; 
            return; 
        } 
        $max_level--; 
        echo "<table class='table table-bordered table-striped'>"; 
        if(is_array($elem)){ 
            echo '<tr><th colspan=2><strong><font><h3>Results, with love</h3></font></strong></th></tr>'; 
        }else{ 
            echo '<tr><th colspan=2 class=hdrs><strong>'; 
            echo '<font color=white>OBJECT Type: '.get_class($elem).'</font></strong></th></tr>'; 
        } 
        $color=0; 
        foreach($elem as $k => $v){ 
            if($max_level%2){ 
                $rgb=($color++%2)?"#f5f5f5":"#efeeee"; 
            }else{ 
                $rgb=($color++%2)?"#f5f5f5":"#efeeee"; 
            } 
            echo '<tr><td valign="top" style="width:40px;background-color:'.$rgb.';">'; 
            echo '<strong>'.$k."</strong></td><td>"; 
            print_nice($v,$max_level,$print_nice_stack); 
            echo "</td></tr>"; 
        } 
        echo "</table>"; 
        return; 
    } 
    if($elem === null){ 
        echo "<font color=green>NULL</font>"; 
    }elseif($elem === 0){ 
        echo "0"; 
    }elseif($elem === true){ 
        echo "<font color=green>TRUE</font>"; 
    }elseif($elem === false){ 
        echo "<font color=green>FALSE</font>"; 
    }elseif($elem === ""){ 
        echo "<font color=green>EMPTY STRING</font>"; 
    }else{ 
        echo str_replace("\n","<strong><font color=red>*</font></strong><br>\n",$elem); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:43:00.587

[get_object_vars()](http://php.net/get_object_vars)和[in_array()](http://php.net/in_array)在这里可能会有所帮助

例如：

```
<?php
    $object = json_decode($jsonstring);
?>
<table>
    <?php
    foreach (get_object_vars($object) as $k => $v)
    {
        if (in_array($k, array('msc', 'number', 'status')) && ! empty($v))
        {
            echo '<tr>';
            echo "<td>{$k}</td><td>{$v}</td>";
            echo '</tr>';
        }
    }
    ?>
</table> 
```

`$object`json_decoded 变量的名称在哪里

编辑：也添加了对空值的检查

# eclipse - Eclipse 建模框架 - 工作流？

> ID：13644283
> 
> 赞同：1
> 
> 时间：2012-11-30T11:23:17.667
> 
> 标签：eclipse, emf, xpand

我有以下问题。我有一个使用 ATL 作为技术的 M2M 转换的 EMF 项目。然后我有一个使用 XPand 进行代码生成的项目。我想做以下工作流程。

模型 A -- --> 模型 B ----> 代码

我怎么能意识到，问题是，我有两个项目，我必须将我的模型和元模型复制到另一个项目。是否有任何技术可以对上述工作流程进行建模？

谢谢你，克莱门斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:56:22.273

你应该看看 MWE2： http: [//www.eclipse.org/Xtext/documentation.html#MWE2](http://www.eclipse.org/Xtext/documentation.html#MWE2)

您将能够在您的 mwe2 工作流程中描述 m2m 执行和 xpand 生成。

您还需要从 java 启动 atl 转换，请参见：[https ://github.com/101companies/101repo/blob/master/contributions/atl/src/atl/RunTransfoJava.java](https://github.com/101companies/101repo/blob/master/contributions/atl/src/atl/RunTransfoJava.java)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:59:45.457

如果您可以编写相应的 ant 脚本，则可以在 tycho 构建期间使用 tycho-application 运行它。ATL 有 ant 任务，EMF 也有。不过，这有点小技巧，而 MWE 是一种更协调的方式。

# html - 包含 div 和部分的 CSS3 多列

> ID：13644285
> 
> 赞同：0
> 
> 时间：2012-11-30T11:23:27.183
> 
> 标签：html, css, css-multicolumn-layout

所以我刚刚发现了 css3`columns`规范，并立即看到我可以使用它来“现代化”[我的论坛列表](http://www.loganyoung.za.net/forum)，该列表使用动态生成的表格。

生成表的代码非常复杂，因为它自己决定是否将下一个数据库行的数据放入表中的新行或新列中。使用 css3 列的方式，我假设我可以简单地让代码将数据读入页面并让 css3 决定应该进入哪一列。

不过，我遇到了一些问题。使用它时，内容不会跨指定数量的列进行拆分。

这里有一些代码供参考：

```
.2col {
    column-count: 2;
    column-width: 400px;
    column-gap: 10px;
    column-rule: 1px solid #e1e1e1;
}

<div class="cats 2col">
    <div class="title">
        <div class="t">
            <h2><a href="#" class="sh" id="t1">-</a> Title 1</h2>
        </div>

        <section>
            <div class="cat">
                <p>Category 1<span>This is the first category</p>
            </div>

            <div class="cat">
                <p>Category 2<span>This is the second category</p>
            </div>

            <div class="cat">
                <p>Category 3<span>This is the third category</p>
            </div>
        </section>
    </div>

    <div class="title">
        <div class="t">
            <h2><a href="#" class="sh" id="t1">-</a> Title 2</h2>
        </div>

        <section>
            <div class="cat">
                <p>Category 1<span>This is the first category</p>
            </div>

            <div class="cat">
                <p>Category 2<span>This is the second category</p>
            </div>
        </section>
    </div>
</div> 
```

我设置了这个 JSFiddle 进行测试：http: [//jsfiddle.net/LYoung/JLVEs/1/](http://jsfiddle.net/LYoung/JLVEs/1/)

显然我做错了什么。谁能帮我确定那是什么以及为什么错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:46:48.827

```
section {
    position: relative;
    width: 450px;
    border:1px solid red;
    display:block;
}

dl.2col {
    -moz-column-count: 2;
    -webkit-column-count: 2;
    column-count: 2;

    -moz-column-gap: 10px;
    -webkit-column-gap: 10px;
    column-gap: 10px;

    column-rule: 1px solid #e1e1e1;
}

dl.2col dd {
     -moz-column-width: 200px;
     -webkit-column-width: 200px;
     column-width: 200px; 
     display:inline-block ! important;
    float:none;
}​

<section>
<dl class="cats title 2col">
    <dd class="t"><h2><a href="#" class="sh" id="t1">-</a> Title 1</h2></dd>

    <dd class="cat">Category 1<span>This is the first category</span></dd>

    <dd class="cat">Category 2<span>This is the second category</span></dd>

    <dd class="cat">Category 3<span>This is the third category</span></dd>

    <dd class="t"><h2><a href="#" class="sh" id="t1">-</a> Title 2</h2></dd>

    <dd class="cat">Category 1<span>This is the first category</span></dd>

    <dd class="cat">Category 2<span>This is the second category</span></dd>
</dl>
</section> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:58:38.333

我在您的示例中发现了两个问题：

*   首先是 -webkit 和 -moz 规则
*   以及您班级的 2col 名称

我尝试在 JSFiddle 中将您的 2col 类重命名为 twoCol 并添加 -webkit 和 -moz 规则，它似乎有效（[此处为小提琴示例](http://jsfiddle.net/JLVEs/14/)）

样式仍然存在一些问题，但是当窗口足够大时，它将内容分成两列

```
 <div class="cats twoCol">
    <div class="title">
        <div class="t">
            <h2><a href="#" class="sh" id="t1">-</a> Title 1</h2>
        </div>

        <section>
            <div class="cat">
                <p>Category 1<span>This is the first category</p>
            </div>

            <div class="cat">
                <p>Category 2<span>This is the second category</p>
            </div>

            <div class="cat">
                <p>Category 3<span>This is the third category</p>
            </div>
        </section>
    </div>

    <div class="title">
        <div class="t">
            <h2><a href="#" class="sh" id="t1">-</a> Title 2</h2>
        </div>

        <section>
            <div class="cat">
                <p>Category 1<span>This is the first category</p>
            </div>

            <div class="cat">
                <p>Category 2<span>This is the second category</p>
            </div>
        </section>
    </div>
</div>​

                body {
        background: #000;
    }
    .title {
        padding-bottom: 10px;
    }
.twoCol {
    -webkit-column-count: 2;
    -moz-column-count: 2;
    column-count: 2;
    -webkit-column-width: 400px;
    -moz-column-width: 400px;
    column-width: 400px;
    -webkit-column-gap: 10px;
    -moz-column-gap: 10px;
    column-gap: 10px;
    -webkit-column-rule: 1px solid #e1e1e1;
    -moz-column-rule: 1px solid #e1e1e1;
    column-rule: 1px solid #e1e1e1;
}
    h2 {
        font-weight: bold;
        font-size: 20px;
        color: #bede06;
    }
    .t {
        width: 800px;
        column-span: all;
    }
    .t a {
        color: #bede06;
        text-decoration: none;
        font-size: 22px;
    }
    t:after {
        content: '';
        display: table;
    }
    .cat {
        color: #000;
        font-size: 18px;
        border-radius: 5px;
        box-shadow: 0 0 2px #b6bcc6;
        text-shadow: 2px 2px #fff;
        background-image: linear-gradient(bottom, rgb(225,225,225) 37%, rgb(255,255,255) 69%);
        background-image: -o-linear-gradient(bottom, rgb(225,225,225) 37%, rgb(255,255,255) 69%);
        background-image: -moz-linear-gradient(bottom, rgb(225,225,225) 37%, rgb(255,255,255) 69%);
        background-image: -webkit-linear-gradient(bottom, rgb(225,225,225) 37%, rgb(255,255,255) 69%);
        background-image: -ms-linear-gradient(bottom, rgb(225,225,225) 37%, rgb(255,255,255) 69%);

        background-image: -webkit-gradient(
            linear,
            left bottom,
            left top,
            color-stop(0.37, rgb(225,225,225)),
            color-stop(0.69, rgb(255,255,255))
    );
    }
    .cat {
        width: 400px;
        height: 50px;
        margin: 0 0 10px 10px;
        padding-left: 5px;
    }
    .cat span {
        display: block;
        font-style: italic;
        font-size: 14px;
    }​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:34:35.233

```
section dl.directory {
    margin-left:1em;
    margin-bottom:7px;
    -moz-column-count:2;
    -webkit-column-count:2;
    column-count:2;
    -moz-column-gap:7px;
    -webkit-column-gap:7px;
    column-gap:7px;
    -moz-column-rule:1px solid #D0D2D3;
    -webkit-column-rule:1px solid #D0D2D3;
    column-rule:1px solid #D0D2D3;
}

section dl.directory dd {
    display:inline-block;
    -moz-column-width:225px;
    -webkit-column-width:225px;
    column-width:225px;
    margin:0 5px;
    padding:5px 0;
    border-bottom:1px solid #D0D2D3;
}

section dl.directory dd em {
    font styling here
} 
```

# string - Visual Basic - 如何将字符串拆分为分隔符？

> ID：13644292
> 
> 赞同：0
> 
> 时间：2012-11-30T11:23:44.377
> 
> 标签：string, visual-studio-2008, split

我想在分隔符是字符串时拆分字符串。

我当前的代码：

```
Sub Test()
    Dim xTest As String = "StackThisIsTheSplitterOverflow"
        MessageBox.Show(xTest.Split("ThisIsTheSplitter")(0) & xTest.Split("ThisIsTheSplitter")(1))
End Sub 
```

我希望生成的 MessageBox 是“StackOverflow”。

上述代码生成的 MessageBox 是“StackhisIs”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:40:11.527

您可以将第二个参数传递给您的`split`函数 - `StringSplitOptions.None`，以启用对单词的拆分：-

```
xTest.Split("ThisIsTheSplitter", StringSplitOptions.None) 
```

# image - 如何将文本图像转换为文字转换器？

> ID：13644297
> 
> 赞同：-1
> 
> 时间：2012-11-30T11:24:08.557
> 
> 标签：image, word

我已经搜索了许多免费软件的方法，但没有结果。我有 TIFF 文本图像，我使用过 foxit 阅读器，但没有编辑选项。有图像转换器工具的想法或者我想购买吗？给我想法？请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:30:55.153

你还没有指定你使用的操作系统，如果你正在寻找源代码来自动提取单词，所以我假设你有 Windows 和一堆你想要从中提取文本的图像。因此，一个快速的解决方案是拥有一张 Microsoft Office CD 并安装对图像执行 OCR 的 Microsoft Office Document Imaging 组件。通过这种方式，您可以提取文本。在这里找到更多信息：http: [//office.microsoft.com/en-001/help/about-microsoft-office-document-imaging-HP001077103.aspx](http://office.microsoft.com/en-001/help/about-microsoft-office-document-imaging-HP001077103.aspx)

# javascript - 如何在前瞻表达式中匹配行首和空格

> ID：13644300
> 
> 赞同：1
> 
> 时间：2012-11-30T11:24:13.183
> 
> 标签：javascript, regex

我相信这真的很容易，但我该如何匹配

1.  匹配行首或空格
2.  匹配 az
3.  匹配行尾或空格

我只想退回商品编号。2 所以对于以下字符串

```
"one 1.ignore two 2ignore ignore3 three" 
```

表达式将返回

```
["one","two","three"] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:16:57.137

您需要查找与这些项目匹配的正则表达式，这在 javascript 中不受支持。要么您进行手动迭代并提取匹配组（如@Some1.Kill.The.DJ 所示），要么您将拆分字符串而不是匹配：

```
str.split(/\s+(?:\S*?(?![a-z])\S+\s+)*/); 
```

此表达式确实匹配所有空格与包含至少一个不是字符的单词的组合`[a-z]`。但是，这个正则表达式复杂且不易维护；它有时也会产生空字符串。更好，做类似的事情

```
str.split(/\s+/).filter(RegExp.prototype.test.bind(/^[a-z]+$/)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:26:04.677

使用此代码：

```
var str = 'one 1.ignore two 2ignore ignore3 three';
str = str.replace(/\s(?=[a-z])/ig, function(text, p1) {
    return p1 ? p1 : text;
});

var arr = str.match(/([a-z]+)(?=\s|$)/ig); 
```

# java - Android 项目无法识别外部库中的类

> ID：13644301
> 
> 赞同：1
> 
> 时间：2012-11-30T11:24:14.843
> 
> 标签：java, android

我有一个 Android 项目和一个 Web 应用程序项目。我想在他们之间发送一个对象。我用一个名为 SharedObj 的类打开了一个新项目。这个类我导出到一个 jar 文件，并将它作为外部库导入到两个项目中。在 web 应用程序项目中，它被识别类 SharedObj 而在 android 项目中它不是。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:27:51.543

几周前我遇到了同样的问题。我创建了“libs”文件夹并将 *.jar 与其他外部文件一起放置在那里。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:37:39.520

如果您使用的是 Windows..

通过**右键单击 -> 复制**来复制您的 jar 文件，然后打开 eclipse 并将**其粘贴到 libs**文件夹中。然后右键单击粘贴的文件并单击**Build Path -> Add to build path**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:26:43.250

我强烈怀疑您将 jar 放入错误的文件夹中。jar 应该进入项目目录顶层的 /libs 文件夹。

# javascript - 如何检查 js 代码是在节点服务器上还是在客户端上运行

> ID：13644303
> 
> 赞同：20
> 
> 时间：2012-11-30T11:24:18.497
> 
> 标签：javascript, node.js

我想确定我的js代码是在节点服务器上运行还是在客户端上`isServer = true`运行，如果是在服务器上运行，则将其存储到一个变量中。我怎样才能做到这一点？有没有办法简单地检查是否存在仅在服务器上可用的属性，如果可能的话，哪个是最佳选择？

感谢帮助！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-30T11:27:46.887

你可以使用这个：

```
function is_server() {
   return ! (typeof window != 'undefined' && window.document);
} 
```

由于全局`window.document`对象仅存在于浏览器上下文中。

# php - 十六进制 html 值作为 php

> ID：13644313
> 
> 赞同：0
> 
> 时间：2012-11-30T11:24:45.297
> 
> 标签：php, html, hex

简单地说，我想知道为什么第一个回声回馈 \x02 而第二个回声在完全相同时不回馈一些东西。为什么第一个回声不被识别为十六进制？

```
$test = "02";
echo "\x".$test;
echo "\x02"; 
```

希望有人能解决这个问题。困扰了我一段时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:47:32.323

答案是我在另一篇关于这个主题的帖子中发布的内容。

问题链接：[创建名称服务器十六进制标头](https://stackoverflow.com/questions/13606868/create-nameserver-hex-header)

学分去[glglgl](https://stackoverflow.com/users/296974/glglgl) :)

抱歉，添麻烦了

# excel - 在一个“数据透视表”上创建多个“数据透视图”

> ID：13644320
> 
> 赞同：0
> 
> 时间：2012-11-30T11:25:19.130
> 
> 标签：excel, pivot-table

在我的 Excel 电子表格中，我有一个数据透视表，它基于从 SQL 查询中检索到的数据。

数据透视表由一系列客户组成，每个客户都有自己的股票价值。

我做了一个数据透视图，但是因为有很多客户，图表上的线条不可读。

我想为每个客户制作一个单独的图表，但是当我过滤一个客户时，每个图表都会过滤该客户 - 不允许我为每个客户制作一个图表

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:15:52.253

经过调查，添加多个数据透视图会扭曲底层数据的布局。

因此，有必要将相同的数据读入 Excel 电子表格两次，以获得第二个数据透视图。

# asp.net-mvc-4 - ASP.NET MVC 4 路由在一个特定关键字上崩溃：Ekstranett

> ID：13644321
> 
> 赞同：0
> 
> 时间：2012-11-30T11:25:29.170
> 
> 标签：asp.net-mvc-4, iis-7.5, asp.net-mvc-routing

我在我的 ASP.NET MVC 4 应用程序中使用路由，我遇到了一个非常奇怪的问题。我正在尝试建立到名为 Ekstranett 的区域的路由，但如果我使用 Ekstranett 作为第一个 URL 参数，我会收到内部服务器错误。除了 Ekstranett，我可以使用任何词，我觉得这很奇怪。这是我的设置：

```
context.MapRoute(
            "Exception",
            "Ekstranett/Exception/{action}/{*handle}",
            new { controller = "Exception", action = "General", handle = UrlParameter.Optional },
            new[] { "MyProject.Areas.Ekstranett.Controllers" }
        );

        context.MapRoute(
            "Support",
            "Ekstranett/Support/{action}/{*handle}",
            new { controller = "Support", action = "Tickets", handle = UrlParameter.Optional },
            new[] { "MyProject.Areas.Ekstranett.Controllers" }
        );

        context.MapRoute(
            "Ekstranett_default",
            "Ekstranett/{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new[] { "MyProject.Areas.Ekstranett.Controllers" }
        ); 
```

如果我将 Ekstranett 更改为 Ektranett、Testing、Foobar 或其他任何东西，它会完美运行，但如果我使用 Ekstranett，它不会。有没有人知道我为什么会遇到这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:31:30.163

只是猜测，但可能是因为 Ekstranett 是该地区的名称？可能导致某种路由冲突。出于兴趣，如果您在路线中使用所有小写字母，那行得通吗？（例如`"ekstranett/Support/{action}/{*handle}"`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:20:09.147

问题已经解决了！很久以前，我创建了一个名为 ekstranett 的虚拟目录，我删除了它，现在一切正常！

# c# - Visual c ++中的“无法实例化Active X控件”错误是什么意思？

> ID：13644326
> 
> 赞同：0
> 
> 时间：2012-11-30T11:25:47.727
> 
> 标签：c#, visual-studio-2010, visual-c++, activex

当我试图打开一个`Visual C++`项目时。出现以下两个弹出窗口：

1)`ActiveX control cannot be instantiated`

2)`Active X control not registered on this computer`

我搜索了这个错误并得到了解决方案，即将 Active X 添加到您的`Visual C++`项目中。我是新手`Visual C++`，刚开始调试一个项目。请告诉我我该怎么做？

无论如何，我打开了项目并进行构建。现在，当我尝试执行“Application.exe”时，什么也没发生。我认为这一切都是因为这个`Active X control`错误而发生的。

除了场景，请告诉我以下几点：

a) 有什么用`Active x control in visual c ++`？b）有没有办法将`visual C++`项目转换为`C#`？

我知道这是一个很大的问题，但任何提示都是显而易见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:59:16.803

从 C++ dll 创建 Interop dll，您可以将 Interop dll 添加到您的 C# 项目中。

首先，如果您有 C++ dll，那么您可以将这些 dll 用于 C# 项目。遵循以下方法

打开 Visual Studio 命令提示符（以管理员身份运行）更改 dll 所在的路径（cd C:/User/Douments/Visual Studio 2010/）键入命令

```
tlbimp CACDirect.dll /transform:dispret /out:Interop.CACDirect.dll 
```

你会得到如下结果。

```
Microsoft (R) .NET Framework Type Library to Assembly Converter 4.0.30319.1 Copyright (C) Microsoft Corporation. All rights reserved.

TlbImp : Type library imported to C:\Users\082043\Desktop\Interop.CACDirect.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:06:19.517

Visual C++ 需要一些许可控件，例如 MS Chart Control，它在设计时需要设计时许可，在运行时需要运行时许可。获得 MS Chart Control 设计时许可证的唯一已知方法是安装 Visual Studio（在您的情况下为 6.0）。您可以尝试重新安装 VS6，但不能保证它会起作用。一种解决方法是提供一个自定义对话框，该对话框提供了更改所需属性的能力。然后，您可以在运行时调用对象以更改这些属性（不使用控件的许可属性页）。解决方案可能会升级到最新的 Visual Studio，这很有用，但可能并不总是对所有最终用户都适用，因此您可以自己做出决定。

# google-custom-search - Google 自定义搜索 REST 结果数（num 字段）

> ID：13644329
> 
> 赞同：6
> 
> 时间：2012-11-30T11:25:53.227
> 
> 标签：google-custom-search

我试图弄清楚如何强制谷歌自定义搜索给我每页 20 个结果。我已尝试发送此 REST 请求，将我的新自定义搜索引擎配置为： 标准版：免费，结果页面上需要广告。

[https://www.googleapis.com/customsearch/v1?key=AIzaSyCgGuZie_Xo-hOECNXOTKp5Yk7deryqro8&cx=015864032944730029962:5ipe0q27hgy&q=test&alt=json&num=20](https://www.googleapis.com/customsearch/v1?key=AIzaSyCgGuZie_Xo-hOECNXOTKp5Yk7deryqro8&cx=015864032944730029962:5ipe0q27hgy&q=test&alt=json&num=20)

它不起作用！

但

[https://www.googleapis.com/customsearch/v1?key=AIzaSyCgGuZie_Xo-hOECNXOTKp5Yk7deryqro8&cx=015864032944730029962:5ipe0q27hgy&q=test&alt=json&num=10](https://www.googleapis.com/customsearch/v1?key=AIzaSyCgGuZie_Xo-hOECNXOTKp5Yk7deryqro8&cx=015864032944730029962:5ipe0q27hgy&q=test&alt=json&num=10)

有用！

但是在阅读文档

[https://developers.google.com/custom-search/docs/xml_results#numsp](https://developers.google.com/custom-search/docs/xml_results#numsp)

它说：

可选的。num 参数标识要返回的搜索结果的数量。

默认 num 值为 10，最大值为 20。如果请求超过 20 个结果，则仅返回 20 个结果。

注意：如果搜索结果的总数小于请求的结果数，将返回所有可用的搜索结果。

有人遇到过这个问题吗？

PS：我还尝试将配置我的新自定义搜索引擎的 REST 请求发送到： 站点搜索：起价为每年 100 美元，结果页面上的广告是可选的。

但是没有任何改变无法在请求/页面中获得 20 个结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-29T21:31:18.447

此文档 url 包含每个参数的描述。它还说 num 仅限于 1 到 10 之间的整数，包括 1 和 10。

[https://developers.google.com/custom-search/v1/using_rest#query-params](https://developers.google.com/custom-search/v1/using_rest#query-params)

# c# - 在 UserControl 上以编程方式使 OutputCache 无效

> ID：13644333
> 
> 赞同：1
> 
> 时间：2012-11-30T11:26:14.070
> 
> 标签：c#, asp.net, caching, user-controls, outputcache

有什么方法可以使 UserControl 上的 OutputCache 无效？
我已经使用 UserControls 在我的网站上设置了部分缓存，并且工作正常。
我在我的用户控件中设置了这样的输出缓存：

```
<%@ OutputCache Duration="3600" VaryByParam="None" %> 
```

我的用户控件位于`/UserControls/SomeAction.ascx`
所以我尝试使用它使其无效并且它不起作用。：

```
HttpResponse.RemoveOutputCacheItem("/UserControls/SomeAction.ascx"); 
```

我也尝试过这种方法：
我`HttpContext.Current.Cache.Insert("MyCache",DateTime.Now);`在 Global.asax 的`Application_Start`函数中设置，`Response.AddCacheItemDependency("MyCache");`在我的用户控件的`Page_Load`函数中设置。
然后我尝试通过调用另一个函数来使其无效：

```
 private void InvalidateCache()
    {
        HttpContext.Current.Cache.Insert("MyCache", DateTime.Now);
    } 
```

它仍然没有工作。

有没有办法以编程方式使 UserControl 的缓存失效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:03:29.797

使用 usercontrol 的[CachePolicy](http://msdn.microsoft.com/en-us/library/system.web.ui.usercontrol.cachepolicy.aspx)属性来创建对另一个缓存键的依赖。例如，在用户控制代码中

```
protected void Page_Load(object sender, EventArgs e)
{
    this.CachePolicy.Dependency = new System.Web.Caching.CacheDependency(null, 
        new string[] { "KeyForThisUserControl"  });
    ...
} 
```

在其他地方使用户控件的缓存无效，使用

```
Cache["KeyForThisUserControl"] = DateTime.Now; 
```

其中 Cache 指的是当前的 Web 应用程序缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:28:48.550

这可能是你的问题：

确保您设置了缓存`Location = "Server"`，否则它将缓存在客户端机器上，然后是您的代码

`HttpResponse.RemoveOutputCacheItem("/UserControls/SomeAction.ascx");`

应该管用？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T11:32:58.340

我认为问题在于您正在从控件本身调用 RemoveOutputCacheItem，这意味着该控件基本上是在尝试将自身从缓存中删除...

尝试`HttpResponse.RemoveOutputCacheItem("/UserControls/SomeAction.ascx");`从另一个页面呼叫。

# video-recording - 使用设备的相机在移动浏览器中录制和上传视频

> ID：13644335
> 
> 赞同：1
> 
> 时间：2012-11-30T11:26:21.733
> 
> 标签：video-recording, mobile-browser

一个应用程序正在 asp.net mvc3 和 jQuery 中开发。使用 Flash 对象和 jquery 插件完成录制和上传视频，以便在桌面浏览器中完全上传。

具有挑战性的是它在移动浏览器中也必须相同。由于移动设备不支持 Flash，因此需要一种从移动浏览器录制视频并上传的解决方案。

任何人都可以为此提供参考或解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T18:25:04.980

尝试使用默认的 html5 输入文件标签，使用接受属性作为“video/*”。它将使您有机会在移动设备上从其相机中录制或选择视频。希望能帮助到你。

```
<input type="file" accept="video/*" /> 
```

# jquery - 如何使用 jquery 从数据库动态显示图像？

> ID：13644339
> 
> 赞同：0
> 
> 时间：2012-11-30T11:26:31.743
> 
> 标签：jquery, image

我正在使用 jQuery。我需要在这里动态显示图像 我有图像 url 我从 db 获取它 我已经在我的解决方案资源管理器中放置了一个文件夹 Bundleimages 我将 url 保存在 db 中我正在获取的 url 并且我正在作为项目。ImageUrl 使用字符串生成器它正在显示图像 url 但需要显示图像

```
<script type="text/javascript">
    $(document).ready(function () {
        var url = "http://localhost:1711/api/ProductGet/GetProduct";
        $.getJSON(url, function (data) {
            var jsd = JSON.stringify(data);
            var data1 = '{"Items":' + jsd + '}';
            var k = jQuery.parseJSON(data1);
            alert(data);
            $.each(k.Items, function (i, item) {
                var stringbuilder = [];
                stringbuilder.push(' <div ><span class="span1"><img src="' + item.ImageURL + '" name="productimage"></span><span class="span2">' + item.ProductName + '</span><p>' + item.MaximumPrice + '</p></div>');
                $('#BundleDetails').append(stringbuilder.join(''));
            });
         });
</script>

<div class="span7" style="border: 1px black" id="BundleDetails">

</div> 
```

在这里它显示 url 但我需要显示图像任何帮助表示赞赏

```
<img src="' + item.ImageURL + '" name="productimage"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:15:26.890

你的代码对我有用。
我猜你的网址不正确。
您正在使用 MVC，您是否正确映射了 URL？

这对我有用::

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>DynamicImages</title>
    @Html.jQuery()

    <script type="text/javascript">
        $(document).ready(function () 
        {

            var url = "@Url.Action("GetImageList", "Home")";
            $.getJSON(url, function (data) {
                var jsd = JSON.stringify(data);
                var data1 = '{"Items":' + jsd + '}';
                var k = jQuery.parseJSON(data1);
                alert(data);

                $.each(k.Items, function (i, item) 
                {
                    var stringbuilder = [];
                    stringbuilder.push(' <div ><span class="span1"><img src="' + item.ImageURL + '" name="productimage"></span><span class="span2">' + item.ProductName + '</span><p>' + item.MaximumPrice + '</p></div>');
                    $('#BundleDetails').append(stringbuilder.join(''));
                });

            }); // End getJSON

        }); // End document.ready
    </script>
</head>
<body>
    <!--
    <div class="span7" style="border: 1px black" id="separat">
        <ul class="thumbnails bootstrap-examples pre-scrollable" id="productbundles">
        </ul>
    </div>
    -->

    <div id="BundleDetails">

    </div>
</body>
</html> 
```

这是我的控制器：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;

    namespace TestApp.Controllers
    {

        public class HomeController : Controller
        {

        public class ImageToDisplay
        {
            public string ImageURL;
            public string ProductName;
            public string MaximumPrice;
        }

        public JsonResult GetImageList()
        {
            List<ImageToDisplay> ls = new List<ImageToDisplay>();

            ls.Add(new ImageToDisplay { ImageURL = Url.Content("~/Content/images/editor.jpg"), ProductName = "Test1", MaximumPrice = "lol" });
            ls.Add(new ImageToDisplay { ImageURL = Url.Content("~/Content/images/google_plus_one_coin.png"), ProductName = "Test2", MaximumPrice = "lol" });

            return Json(ls, JsonRequestBehavior.AllowGet);
        } // End Action GetImageList

        public ActionResult DynamicImages()
        {
            return View();
        } // End Action About

        public ActionResult About()
        {
            return View();
        } // End Action About

    } // End Class HomeController : Controller

} // End Namespace IssueTracker.Controllers 
```

证明： ![证明](../Images/8a070a31793eb95d468220c37491af02.png)

# jquery - 在jquery中四舍五入最终输出

> ID：13644341
> 
> 赞同：15
> 
> 时间：2012-11-30T11:26:41.837
> 
> 标签：jquery, math, rounding

我有以下代码。除了我希望最终的 tinstotal 变量四舍五入到最接近的 1（2.04 被四舍五入到 3 等）之外，效果很好

```
$(document).ready(function(){

// Animate logo
$('#Logo').hide().fadeIn(800);

// Calculation Scripts
// Square Metres
var output = $('#SquareMetres'),
    tinoutput = $('#Tins'),
    priceoutput = $('#Price');
$('input[type="text"]').keyup(function() {
var width = parseFloat( $('#width').val()),
    height = parseFloat( $('#height').val()),
    result = height * width / 10000,
    finalresult = result.toFixed(2);
if (isNaN(result)) return;

output.text(finalresult);

// Tins
var tinmetres = 32.5,
    tinprice = 18.23,
    tinsresult = finalresult / tinmetres;
    tinstotal = tinsresult.toFixed(2);

tinoutput.text(tinstotal);

var price = tinstotal * tinprice,
    totalprice = price.toFixed(2);

priceoutput.text('£'+totalprice)

});
}); 
```

该脚本在底部附近的红色框中的[http://andyholmes.me/sitewizard/index.html处于活动状态。](http://andyholmes.me/sitewizard/index.html)希望各位大神帮忙，谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-30T11:31:10.107

```
tinstotal = Math.ceil(tinsresult);
tinoutput.text(tinstotal); 
```

[Math.ceil()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil)将四舍五入到下一个整数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-19T08:00:44.363

使用 javascript Math.round()

```
ex: 
var a = Math.round(2.60);
var b = Math.round(-2.60);
var c = Math.round(2.49);

Result : 
alert(a); => 3
alert(b); => -3
alert(c); => 2 
```

希望对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:28:59.467

```
priceoutput.text('£'+ Math.ceil(totalprice)); 
```

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T11:30:53.463

使用 javascript 的 Math.ceil() 方法将数字向上取整。

您可以在此处查看有关此方法的信息：

[http://www.w3schools.com/jsref/jsref_ceil.asp](http://www.w3schools.com/jsref/jsref_ceil.asp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T11:30:56.043

我想你正在寻找[Math.ceil()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)

```
Math.ceil(7.004);
// expected output: 8

Math.ceil(-7.004);
// expected output: -7 
```

# android - 无论设备方向如何，如何获得指南针方位？

> ID：13644343
> 
> 赞同：3
> 
> 时间：2012-11-30T11:26:43.817
> 
> 标签：android, iphone

我正在尝试创建一个需要我找到指南针方位的应用程序。

用户将握住他们的设备，以便屏幕始终面向他们，但能够将其旋转 360 度。

我可以成功地确定一个方向的方位 - 纵向或横向 - 但我需要找到一种无论旋转如何都能确定方位的方法。

我可以这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T11:30:30.700

您应该使用可以完全确定设备角度的陀螺仪数据。
您会发现此链接很有帮助： [http ://www.touchqode.com/misc/20101025_jsug/20101025_touchqode_sensors.pdf](http://www.touchqode.com/misc/20101025_jsug/20101025_touchqode_sensors.pdf)

# javascript - 错误处理和将日志保存到文本文件

> ID：13644345
> 
> 赞同：1
> 
> 时间：2012-11-30T11:26:48.457
> 
> 标签：javascript, html, error-handling

我想在 javascript 中进行错误处理。

我想记录 javascript 中发生的错误。

我不想使用数据库来存储错误。我想将所有错误存储在 txt 文件中（该 txt 文件应该存在于托管该网站的服务器中。这样其他人就无法访问该文件.

如何做到以上要求。

我在谷歌搜索并找到

```
function WriteToFile() {
var fso = new ActiveXObject("Scripting.FileSystemObject");
var s = fso.CreateTextFile("C:\\Test.txt", true);
s.WriteLine('Hello');
s.Close();
} 
```

这也不是在所有条件下都有效。

**1.您使用的是非ie浏览器（不支持activex对象）**

**2.您在安装了sp2的xp机器上使用ie浏览器并且activex对象被阻止**

所以请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:56:03.080

首先使用 try/catch 来检测错误：

```
try
{
    // code that could error here
}
catch(err)
{
    // do an ajax call to the server
} 
```

在该`catch`块中，您可以对服务器进行 ajax 调用。在服务器上，您将需要一些服务器端脚本（例如 PHP、ASP 等）来处理请求并将错误记录到本地文本文件中。在上面的 catch 块中，`err.message`将为您提供可以包含在 ajax 调用中的错误消息字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:21:33.943

嗨，您可以使用替代方法来处理以下代码的错误

```
jQuery.ajax({
      type: "POST",
      url: "urlpage",
      dataType: "html",
      data: "types":$("#catid").val(),
      success: function (response) {
              alert("Successfully!!!");
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
      }
    }); 
```

当发生任何错误时，您可以再次调用另一个 ajax 函数或相同的函数。

这主要适用于所有处理错误的ajax调用，试试吧。

# sql - 循环遍历记录

> ID：13644347
> 
> 赞同：1
> 
> 时间：2012-11-30T11:26:48.520
> 
> 标签：sql, sql-server-2005, while-loop

我有一张表格，其中包括以下三列。这些是保存在数据库中的 ID 更改，在这种情况下，ID 已从 1->2->3->4 变化。

```
oldID    | newID   | added  
1        | 2       | 2012-11-23  
2        | 3       | 2012-11-24  
3        | 4       | 2012-11-25 
4        | 1       | 2012-11-26 
```

我想做的是发送一个`oldID`参数并返回`newID`，逐步完成更改。例如，如果我发送`2`它返回`1`。

我在下面的 SQL 查询中没有得到任何信息，因为我真的不知道自己在做什么。

```
DECLARE @dateCurrent datetime
DECLARE @datePrevious datetime
DECLARE @oldID int
SET @dateCurrent = '1970-01-01'
SET @datePrevious = '1970-01-01'
SET @oldID = '2'

WHILE (@dateCurrent >= @datePrevious)
    BEGIN
        SELECT @oldID = newID, @datePrevious = added
        FROM theTable
        WHERE oldID = @oldID
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:29:47.457

如果要递归，可以使用公用表表达式

例如：

```
;with cte as 
(
select *, 0 as level from yourtable
union all
select t1.old, cte.new, t1.dateadded, level + 1 from yourtable t1
    inner join cte on t1.new = cte.old
    and t1.dateadded<cte.dateadded
) 
    select old, new from 
    (select old, new, ROW_NUMBER() over (partition by old order by level desc) rn from cte)
    v 
    where rn=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:49:37.433

我同意这可能看起来不是最好的解决方案，但我不打算更改自 95 年以来一直运行的系统中的某些内容。

我让它像这样工作：

```
DECLARE @dateCurrent datetime
DECLARE @datePrevious datetime
DECLARE @oldID int
SET @dateCurrent = '1970-01-01'
SET @datePrevious = '1970-01-01'
SET @oldID = '2'

WHILE (@datePrevious <= @dateCurrent )
BEGIN
SET @datePrevious = @dateCurrent 
SELECT @dateCurrent = t2.added, @oldID = t1.newID
from theTable
     inner join theTable t2
     on t2.oldID = t1.newID
     where t1.oldID = @oldID 
END
SELECT @oldID 
```

# jquery - 如何使用数据表和服务器端处理进行自定义过滤

> ID：13644350
> 
> 赞同：13
> 
> 时间：2012-11-30T11:26:55.223
> 
> 标签：jquery, datatables

我正在使用[Datatables](http://datatables.net)在我的 Web 应用程序中显示表格数据，并将其配置为使用[服务器端处理](http://datatables.net/usage/server-side)，即通过 AJAX 查询服务器以获取过滤数据。我想根据特定于我的应用程序的其他参数进行过滤，即对应于一些用户选项（例如，通过 UI 中的复选框）。如何让 DataTables 将这些额外的过滤器参数传递给服务器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-25T02:31:11.163

**此答案已针对版本 1.10.6 更新**

现在可以使用[ajax](http://datatables.net/reference/option/ajax)选项来完成。

示例代码

```
 $table.dataTable({
            "ajax":  {
                "url": "example.com/GetData",
                "type": "POST",
                "data": function(d) {
                    d.Foo = "bar";
                    d.Bar = "foo";
                    d.FooBar = "foobarz";
                }
            },
            "serverSide":true,
        }); 
```

Foo、Bar 和 FooBar 将作为附加参数与其他现有参数（如*draw、start、length*等）一起作为表单数据发布，因此根据您的服务器端语言，您可以相应地阅读它们。

在现实生活中，您可能会有一个搜索按钮和一些输入，您可以通过调用触发过滤过程

```
 var table = $table.DataTable();
        table.ajax.reload(); 
```

单击按钮时。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-30T11:26:55.223

解决方案是使用 DataTables 的[fnServerParams](http://datatables.net/usage/server-side)选项，它允许您在发送到服务器的 XMLHttpRequest 中添加要发送的自定义参数。例如：

```
$(document).ready(function() {
  $('#example').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "/IndexXhr",
    "fnServerParams": function (aoData) {
        var includeUsuallyIgnored = $("#include-checkbox").is(":checked");
        aoData.push({name: "includeUsuallyIgnored", value: includeUsuallyIgnored});
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-12T18:26:50.163

花了几个小时终于做到了！

我将在这里发布完整的方法以供大家帮助。

一个需要使用`fnServerParams`选项，它允许在发送到服务器的 XMLHttpRequest 中添加要发送的自定义参数。例如：

这是我使用的咖啡脚本：

```
jQuery ->
  table = $('#logs').dataTable
    bProcessing: true
    bServerSide: true
    sAjaxSource: $('#logs').data('source')
    fnServerParams: (aoData) ->
      applicationName = $("#applicationName").val()
      aoData.push
        name: "applicationName"
        value: applicationName

      return

  $("#applicationName").on "change", ->
    table.fnDraw()
    return 
```

我的 HTML 文件包含带有 id 的输入元素`applicationName`。请注意`fnDraw()`我用来在输入值更改时启用重绘请求的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-13T06:48:44.430

动态参数，这个对我有用，似乎是最好的解决方案

```
t = $("#tbl_SearchCustomer").DataTable({
    processing: true,
    serverSide: true,
    info: true,
    ajax: {
        url: '../Data/SearchCustomer',
        data: function (data) {
            data.CustomerCategoryID = $("#CustomerCategoryID").val(); // dynamic parameter
            delete data.columns;
        }
    },
    deferRender: true,
    columns: [
        { "data": "FullName" },            
    ],       
    dom: 'lfrtip'
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-18T13:02:53.673

这对我有用

```
$(document).ready(function() {
     table = $('#okmorders').DataTable( {
        // "ajax": 'http://cdpaha2.dev/admin/organizations/okm_orders'
				serverSide: true,
				"paging":   true,
				"searching":  false ,
        // "info":     false,
        "bLengthChange": false,
        // "iDisplayLength":50,
        // "aaSorting": [],
        // "oLanguage": { "sEmptyTable": "No orders present " } ,
        "aoColumnDefs" : [
          { 'bSortable' : false, 'aTargets' : [ 6 ]}
				],

			// 	"fnServerParams": function (aoData) {
			// 		 aoData.push({name: "includeUsuallyIgnored"});
			//  },
				ajax: {
		        url: 'yoururl.json' ,
		        type: 'POST',
						data:
						{
							'startDate':function(){return $("#startDate").val(); },
							'endDate': function(){return $("#endDate").val(); } ,
							'placedBy':function(){return $("#placedBy").val(); },
							'customer_po': function(){return $("#customer_po").val(); } ,
							'customer_ref': function(){return $("#customer_ref").val(); }
						}
    },
    } );
```

# c++ - 尽管使用了 boost::scoped_ptr，我们是否应该删除析构函数中的成员指针？

> ID：13644354
> 
> 赞同：0
> 
> 时间：2012-11-30T11:27:07.443
> 
> 标签：c++, memory, smart-pointers

最近我了解到使用 smart ptr 可以让我们的工作更轻松。我试图将 boost::scoped_ptr 添加到我的代码中。但是，我不太确定是否应该删除指向类的指针。这是我的代码：

```
 class onTimeStepOp : public QWidget
    {
        public:
            //some function here
            ~onTimeStepOp(){delete xr;}
        private:
            xmlReader *xr;
            //others.
    };

for(int i = m; i >= 1; --i) {
    boost::scoped_ptr<onTimeStepOp> otso(new onTimeStepOp(
                                             QString::number(currentFrameNum - i),  
                                             QString::number(currentFrameNum)   
                                             ));  
    //do something here.
} 
```

似乎 otso 会在作用域的末尾调用它的析构函数。所以我将析构函数添加到类中。程序运行后崩溃。但是，如果没有析构函数，程序似乎在 Valgrind 的帮助下泄漏内存。我对此很困惑。这是否意味着使用智能指针时不需要删除（可能是第二次删除释放的内存？我不确定）以及代码如何崩溃？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:28:47.100

智能指针只会调用它所持有的实例的析构函数。如果该实例碰巧有其他动态分配的成员，则不会自动清理这些成员（除非您也将它们保存在智能指针中！）

因此，在您的情况下，也将成员保存在智能指针中（`boost::scoped_ptr`或`boost::shared_ptr`等）

# ios - 当重复间隔设置为 1 秒（NSSecCalendarUnit）时，为什么在 1 分钟后重复本地通知？

> ID：13644357
> 
> 赞同：3
> 
> 时间：2012-11-30T11:27:37.110
> 
> 标签：ios, uilocalnotification

我正在尝试安排一个本地通知，一旦通知被触发，它将在每 1 秒后重复一次。应用程序启动后 10 秒触发通知。

```
UILocalNotification *notif = [[cls alloc] init];

    notif.fireDate = [[NSDate alloc]initWithTimeInterval:10 sinceDate:[NSDate date]];
    notif.timeZone = [NSTimeZone defaultTimeZone];
    notif.alertBody = @"Did you forget something?";
    notif.alertAction = @"Show me";
    //notif.soundName = UILocalNotificationDefaultSoundName;
    notif.soundName = @"applause-light-01.wav";
    notif.applicationIconBadgeNumber = 1;
    notif.repeatInterval = NSSecondCalendarUnit;
    [[UIApplication sharedApplication] scheduleLocalNotification:notif]; 
```

即使我已经使用过`notif.repeatInterval = NSSecondCalendarUnit`，通知会在 60 秒后重复。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T08:41:11.830

```
notif.fireDate = [[NSDate alloc]initWithTimeInterval:10 sinceDate:[NSDate date]]; 
```

这行代码使您的本地通知在新日期创建后触发。如果您想要立即收到通知，那么您应该像这样创建一个简单的日期，

```
notif.fireDate = [NSDate date]; 
```

希望这可以帮助。

# asp.net-mvc - 两个 MVC 应用程序使用 ninject 到相同的服务和存储库

> ID：13644358
> 
> 赞同：0
> 
> 时间：2012-11-30T11:27:37.097
> 
> 标签：asp.net-mvc, entity-framework, ninject

我正在建立一个分层系统并选择使用 ninject 作为 IoC/Di 容器。作为这个应用程序的一部分，我有两个 MVC 前端。一个用于最终用户，另一个用于管理和配置。我选择了两个前端，以便包含视图和控制器等，并且当我达到 100 多个容器时，这将使思考更容易管理。

无论如何...我想知道的是？

我可以让我的启动项目成为管理应用程序并从这里实例化 Ninject 等，然后当我的第二个 MVC 应用程序被用户调用时，它可以使用已经实例化的同一个 Ninject 容器吗？

我希望这对大家有意义。

另外顺便说一句，有人知道如何使用 Ninject 注入 DBcontext 连接字符串/名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:55:56.023

您可以使用类创建单独的类库（可能称为 SharedConfiguration？）

```
 public static class NinjectSharedConfiguration
    {
            public static void RegisterServices(IKernel kernel)
            {
                kernel.Bind<MyDbContext()
                .ToSelf()
                .InRequestScope()
                .WithConstructorArgument("nameOrConnectionString", "server = .;");
            }
    } 
```

并从两个项目中调用此方法

# html - 将画布图像保存到 html5 phonegap 中的设备库

> ID：13644361
> 
> 赞同：2
> 
> 时间：2012-11-30T11:27:48.530
> 
> 标签：html, cordova

在我的项目中，我想将画布图像保存到设备库（Android、ios）。我从 phonegap 获得了一些像 SaveImage.js 这样的插件，但它根本不起作用。

请帮我清除它。

谢谢

# c# - C# 字典键作为字典

> ID：13644366
> 
> 赞同：0
> 
> 时间：2012-11-30T11:27:55.333
> 
> 标签：c#

我的字典键是另一个字典。例如，如果我的字典（“游戏”）包含键“我的名字”，我如何查看？我有这样的事情：

```
Dictionary<string,List<ChatClient>> rooms = new Dictionary<string, List<ChatClient>>();
Dictionary<Dictionary<string, List<ChatClient>>, IGame> games = new Dictionary<Dictionary<string, List<ChatClient>>, IGame>();

public void CreateAGame(string roomName, IGame game) {
     if (rooms.ContainsKey(roomName)) {
         games.Add(rooms, game);
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:33:07.873

这是行不通的：两个相同组成的字典不会相互比较（[链接到 ideone](http://ideone.com/7krwFy)）。

```
var a = new Dictionary<string,string> {{"a","a"}};
var b = new Dictionary<string,string> {{"a","a"}};
Console.WriteLine(a.Equals(b)); 
```

一般来说，您不应该在任何可变的内容上键入您的字典。制作一个将字典转换为“规范`string`表示”的方法，并将其用作字典中`string`的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:32:30.717

```
public void ContainsDictKey(Dictionary<Dictionary<string, List<ChatClient>>, IGame> games, string key)
{
    foreach(var l in games)
    {
        if(l.Key.ContainsKey(key))
            return true;
    }
    return false;
} 
```

但是，我不确定这是否是个好主意，密钥应该是不可变的，而 Dictionary 不是不可变的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:53:58.950

我假设你想要一个层次结构

```
Games
    ChatRooms 
```

根据实际要求，您可能希望将实际聊天室存储在一个字典中，并将每个游戏的聊天室“索引”存储在另一个字典中。访问实际聊天变成了两步过程：

1.  从 _chatRoomsPerGame 字典中获取每个游戏的聊天室列表
2.  从 _allChatRooms 字典中获取实际聊天室。

虽然可以创建自己的对象来托管字典并覆盖 GetHashKey 以使用其他字典的键创建字典，但我怀疑这是否是您真正想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:32:08.120

```
games.Keys.SelectMany(x => x.Keys).Contains("myname") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:32:28.347

这样的事情可能是：

如果我们有：

```
 Dictionary<Dictionary<string, List<ChatClient>>, IGame> games = 
               new Dictionary<Dictionary<string, List<ChatClient>>, IGame>(); 
```

在某些功能中

```
public IEnumerable<T> GetByName(string myName) {
    return games.Keys.Where(x=>x.Contains("myName"));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T11:32:38.667

试试这个

```
 var innerDictionary = rooms.Keys.Where(innerdict => innerdict.ContainsKey(roomName))); 
```

# django - GAE上的Django NotimplementedError

> ID：13644368
> 
> 赞同：1
> 
> 时间：2012-11-30T11:28:03.993
> 
> 标签：django, google-app-engine

我正在使用 Django 1.41 构建我的 Web 应用程序并使用 GAE 进行部署。这么好，一切似乎都在工作，除非我尝试在注册时向用户发送电子邮件并允许用户更改密码。我得到 NotimplementedError 并且没有提供异常。我在下面粘贴了完整的堆栈。我可能做错了什么？

# 完整的 Django 回溯

```
Environment:

Request Method: POST
Request URL: http://1.ngloancalc.appspot.com/register/

Django Version: 1.4.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'carloan',
 'registeredmember',
 'contact')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/base/data/home/apps/s~ngloancalc/1.363534897067998089/registeredmember/views.py" in userregistration
  36\.             connection.open()
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/mail/backends/smtp.py" in open
  48\.                                            local_hostname=DNS_NAME.get_fqdn())
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/mail/utils.py" in get_fqdn
  16\.             self._fqdn = socket.getfqdn()
File "/base/python27_runtime/python27_dist/lib/python2.7/socket.py" in getfqdn
  129\.         hostname, aliases, ipaddrs = gethostbyaddr(name)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/remote_socket/_remote_socket.py" in gethostbyaddr
  313\.   raise NotImplementedError()

Exception Type: NotImplementedError at /register/
Exception Value: 
```

# 使用建议的自定义后端后，我收到错误“需要更多一个值来解压”

```
Environment:

Request Method: POST
Request URL: http://www.ngloancalc.appspot.com/resetpassword/

Django Version: 1.4.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'carloan',
 'registeredmember',
 'contact')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/contrib/auth/views.py" in password_reset
  160\.             form.save(**opts)
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/contrib/auth/forms.py" in save
  242\.             send_mail(subject, email, from_email, [user.email])
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/mail/__init__.py" in send_mail
  59\.                                     fail_silently=fail_silently)
File "/base/python27_runtime/python27_lib/versions/third_party/django-1.4/django/core/mail/__init__.py" in get_connection
  31\.         mod_name, klass_name = path.rsplit('.', 1)

Exception Type: ValueError at /resetpassword/
Exception Value: need more than 1 value to unpack 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:02:44.053

Django 的电子邮件后端不适用于 App Engine 的电子邮件 API。

其他人已经创建了一个，但是

[https://bitbucket.org/andialbrecht/appengine_emailbackends/overview](https://bitbucket.org/andialbrecht/appengine_emailbackends/overview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:33:49.127

仅用于开发目的的另一个解决方法是：

```
email_message.extra_headers['message-id'] = 'mydummymessageid' 
```

这可以防止 Django 尝试创建一个，因此永远不会最终尝试在 GAE 开发环境中调用*gethostbyaddr*

# javascript - 基于选择输入框隐藏一个div

> ID：13644369
> 
> 赞同：1
> 
> 时间：2012-11-30T11:28:11.870
> 
> 标签：javascript, jquery

[我在这里](http://jsfiddle.net/K9zGP/13/)得到了一些代码的帮助。我对其进行了调整以尝试隐藏整个 div 而不是元素。这只是一个小小的调整，但我似乎做了一些事情来阻止它工作。

HTML

```
<input type="text" name="text-708" value="" class="wpcf7-validates-as-required" size="40">
<div id="added_fields">
    <select name="menu-168" class="wpcf7-validates-as-required">
        <option value="Residential">Residential</option>
        <option value="Commercial">Commercial</option>
    </select>
</div> 
```

JS

```
if ($("select[name='menu-168']").val() == "Commercial") {
    $("#added_fields").addClass("hidden");
}​ 
```

有人会好心告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:30:43.580

您`did not write the code on change event of select`和*您在加载时选择的值不是商业性的，因此您在 if 下的语句不会执行*。

**[现场演示](http://jsfiddle.net/rajaadil/K9zGP/43/)**

```
$("select[name='menu-168']").change(function() {

    if ($("select[name='menu-168']").val() == "Commercial") {
        $("input[name=text-708]").addClass("hidden");
    }
    else
        $("input[name=text-708]").removeClass("hidden");
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:31:54.093

您需要在选择值更改时对其进行检查。

> 我想隐藏输入框而不是选择框恐怕

在这种情况下，您需要更改`#added_fields`选择器。试试这个：

```
$("select[name='menu-168']").change(function() {
    if ($(this).val() == "Commercial") {
        $('#added_fields').addClass("hidden");
    }
    else {
        $('#added_fields').removeClass("hidden")
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/K9zGP/54/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:30:09.203

尝试更改以下行

```
 $("#added_fields").addClass("hidden"); 
```

到

```
 $("#added_fields").hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:31:16.887

尝试

```
$("#added_fields").hide(); 
```

你可以在这里找到更多信息：http: [//api.jquery.com/hide/](http://api.jquery.com/hide/)

更新：如果您想引用您选择的更改事件，您必须在您的选择的 onselectedindexchanged 属性中触发您的函数，或者通过 jQuery 在其上添加一个更改事件：

```
$("select[name='menu-168']").change(function() {
  if ($(this).val() == "Commercial") {
    $("#added_fields").hide();
  }
}); 
```

有关更改的更多信息：http: [//api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:34:44.373

您的代码只执行一次， on `$(document).ready();`。将其包装在`.change()`事件处理程序中。

```
$("select[name='menu-168']").change(function(e) {
    if ($(this).val() == "Commercial") {
        $("#added_fields").addClass("hidden");
    }
});​ 
```

更新小提琴：http: [//jsfiddle.net/K9zGP/36/](http://jsfiddle.net/K9zGP/36/)

**更新：**

要使文本输入重新出现在 jsfiddle.net/K9zGP/46 中，请`.toggleClass()`改用：

```
$("select[name='menu-168']").change(function(e) {
    var isCommercial = $(this).val() == "Commercial";
    $("#added_fields").toggleClass("hidden", isCommercial);
});​ 
```

YAF：http: [//jsfiddle.net/K9zGP/71/](http://jsfiddle.net/K9zGP/71/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T11:35:09.437

试试这个 ：

```
$("select[name='menu-168']").change(function() {

if ( $(this).val() == "Commercial") {
    $("#added_fields").hide();
}
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T11:35:59.317

试试这个：

```
$("select").change(function(){
if($("select option:selected").val() == "Commercial") 
$("input[name=text-708]").hide();
else
$("input[name=text-708]").show();   
}); 
```

[​​演示](http://jsfiddle.net/K9zGP/52/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-30T11:37:22.373

确保您有`option:selected property`选择列表的更改事件

```
$("select[name='menu-168']").bind("change",function(e){

    if ($("select[name='menu-168'] option:selected").val() == "Commercial") {
        $("#added_fields").hide();
    }

}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-30T11:40:08.620

您必须“附加”到“隐藏”事件。

所以你可以用`click()`（或`change()`）事件来做到这一点，就像在[这个小提琴](http://jsfiddle.net/velthune/K9zGP/41/)中一样。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-30T11:50:57.260

hay yomiss 调用选择框的更改事件。检查这个小提琴。 [http://jsfiddle.net/K9zGP/44/](http://jsfiddle.net/K9zGP/44/)

```
 $("select[name='menu-168']").change(function(){
alert($(this).val());
if ($(this).val() == "Commercial") {
$("#added_fields").addClass("hidden");
}

}); 
```

# java - Java中的近似最小反馈弧集实现

> ID：13644372
> 
> 赞同：1
> 
> 时间：2012-11-30T11:28:42.127
> 
> 标签：java, graph, implementation, approximation

我想在 Java 中找到最小反馈弧集的近似算法的实现，但到目前为止我没有找到任何东西。有没有人有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:16:01.953

似乎可以实现的最简单的近似算法（但没有最小保证）是本文之一：

[反馈弧集问题的一种快速有效的启发式方法](http://www.sciencedirect.com/science/article/pii/002001909390079O)，作者：P. Eades、X. Lin、WF Smyth。

它很容易实现，并且对于大型图来说工作得非常快（我在一个有 250 万条边和大约 10 万个节点的图上进行了尝试，并在不到一分钟的时间内打破了所有循环）。

# c# - Automapper：映射与子类问题 DynamicProxies

> ID：13644379
> 
> 赞同：1
> 
> 时间：2012-11-30T11:28:51.610
> 
> 标签：c#, .net, automapper

```
public class MyClassA
{
    int Id { get; set; }
    string Name { get; set; }

    int MyClassBId { get; set; }
    int MyClassCId { get; set; }
}

public class MyClassB
{
    int Id { get; set; }
}

public class MyClassC
{
    int Id { get; set; }
} 
```

我加入：

```
using (var context = GetNewContext())
{
    var liste =
        (from myA in context.MyClassA
         join myB in context.MyClassB on myA.MyClassBId equals myB.Id
         join myC in context.MyClassC on myA.MyClassCId equals myC.Id
         select MyClassA).ToList<MyClassA>();

    return Mapper.Map<IList<MyClassA>, List<MyOtherClassA>>(liste);
} 
```

我在退货时得到了这个例外：

```
Missing type map configuration or unsupported mapping.
_FB2F4E3BBB925EC65C0AE58F6566366E06009C68B4A2C1C12EE401E77A489D87 -> IMyClassB
System.Data.Entity.DynamicProxies.SITE_FB2F4E3BBB925EC65C0AE58F6566366E06009C68B4A2C1C12EE401E77A489D87 
```

映射是：

```
Mapper.CreateMap<MyClassA, MyOtherClassA>()
    .ForMember(x => x.MyClassB, opt => opt.Ignore())
    .ForMember(x => x.MyClassC, opt => opt.Ignore()); 
```

其他问题（？）......当我尝试插入时，我必须这样做：

```
var newA = Mapper.Map<MyOtherClassA, MyClassA>(newA);
newA.MyClassB = null;
newA.MyClassC = null;

context.MyClassA.Add(newA);
context.SaveChanges(); 
```

# c++ - D3D11 无处增加参考数？

> ID：13644380
> 
> 赞同：3
> 
> 时间：2012-11-30T11:28:52.373
> 
> 标签：c++, com, c++11, directx, direct3d11

我使用 d3d11 已经有一段时间了，在发现了 directx 调试器之后，我最近发现我的程序到处都在从所有未正确释放的 com 对象中泄漏内存。经过一番窥探和数小时的代码盯着之后，我开发了一些方法来隔离我在哪里得到这些意外增加的引用计数。

首先，所有对象都包含在 std::shared_ptrs 中，并带有调用它们各自释放函数的自定义删除器。我这样做是为了永远不必调用 addref，并且第一次调用 release，即删除器中的那个，只会在对象超出范围时调用。它看起来像这样：

```
// in D3D11Renderer.h
...
// declaration
std::shared_ptr<ID3D11Device *> m_Device;
...

// after call to ID3D11CreateDeviceAndSwapChain
m_Device.reset(device, [](ID3D11Device * ptr){ptr->Release();}) 
```

问题是 api 调用中的某些随机函数只会随机增加引用计数，希望我以后必须处理它。

我发现在诊断中有用的是一个看起来像这样的函数：

```
template <typename T>
int getRefCount(T object) 
{
    object->AddRef();
    return object->Release();
} 
```

其中，只是增加和减少计数以获得该对象上的当前引用计数。使用这个，我发现，就在调用自定义删除器中的发布之前，有 10 个对我创建的 1 ID3D11Device 的未完成引用。好奇，我慢慢地回溯，在程序中一直调用这个函数，直到我最初创建它的地方。有趣的是，就在我第一次创建对象之后（甚至在 shared_ptr 获得所有权之前），未完成的 refs 的数量已经是 3！这在此之后立即发生。

```
result = D3D11CreateDeviceAndSwapChain(NULL, D3D_DRIVER_TYPE_HARDWARE, NULL, 0, &featureLevel, 1, 
                           D3D11_SDK_VERSION, &swapChainDesc, &swapChain, &device, NULL, &deviceContext);
    if(FAILED(result))
    {
        return false;
    } 
```

这是我第一次调用创建设备的任何此类函数，当我检查之后有多少参考时，它显示为 3！很明显，我误解了这些 com 对象的处理方式。有没有这样的方法我可以手动删除它们，而不是在幕后使用参考计数废话？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T12:39:40.280

每次创建缓冲区或着色器或任何依赖于设备的东西时，该对象都可能包含对设备的引用，因此会增加它的引用计数以确保它在仍在使用时不会被删除。

听起来您的方法总体上可能很有效，因为您基本上会在代码中保留一个对设备的引用以阻止它被删除，并且当您的所有内部引用都消失时释放它。但是 d3d 仍然会进行它自己的引用计数，因此当您释放对所有其他相关对象的每个引用时，引用计数只会下降到零。即使只是创建交换链和设备也会产生后台缓冲区等，这可能需要维护对设备的引用。

我尝试了同样的想法一段时间......最后发现它更容易

```
#include <atlbase> 
```

然后使用

```
CComPtr<ID311Device> m_Device 
```

因为这几乎正是该类的设计目的，并且它比 std::shader_ptr 更轻量级，因为对象中已经有一个引用计数器，因此无需单独保留一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:19:00.850

对于 Direct3D (COM) 对象，使用 shared_ptr 是不正确的，即使您使用自定义删除器也是如此。

首先，COM 对象使用侵入式引用计数，这意味着引用计数存储在对象本身中。另一方面，shared_ptr 使用非侵入式引用计数，这意味着引用计数存储在智能指针对象中。因此，对 COM 对象使用 shared_ptr 意味着您有两个独立的引用计数：COM 对象和 shared_ptr。

其次，使用自定义删除器解决了正确释放对象的问题，但并没有解决正确获取对象引用的问题。将 COM 对象分配给 shared_ptr 将增加 shared_ptr 的引用计数，但不会增加对象的引用计数。

这就解释了为什么要泄漏对象：D3D 方法会增加对象的引用计数，但您使用的 shared_ptrs 在对象的整个生命周期内仅减少一次对象的引用计数（当指向对象的所有 shared_ptrs 都被销毁时）。

因此，您需要使用 COM 智能指针，例如 ATL 的[CComPtr](http://msdn.microsoft.com/en-us/library/ezzw7k98%28v=vs.80%29.aspx)。

# php - 从静态函数获取子类名php

> ID：13644382
> 
> 赞同：2
> 
> 时间：2012-11-30T11:28:57.050
> 
> 标签：php, oop

在 php 中，我有一个 ROOT 类，所有其他类都从该类继承。

```
abstract class ROOT{
    public static function getClass(){

    }
} 
```

我希望该函数返回从此类继承的对象的类（名称）。因此，如果我创建一个对象树（扩展 ROOT）并在其上调用 getClass，它应该说“树”

函数 get_class() 仅适用于对象，因此不能在静态函数中使用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T11:34:50.420

而不是`get_class()`，使用[`get_called_class()`](http://uk3.php.net/get_called_class).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T11:35:12.243

[http://www.php.net/manual/en/function.get-called-class.php](http://www.php.net/manual/en/function.get-called-class.php)

```
abstract class ROOT {
    public static function getClass() {
        return get_called_class();
    }
}
class Tree extends ROOT {
}

$Tree = new Tree();
echo $Tree->getClass();  // Outputs "Tree" 
```

# php - 如何在javascript中的大数据中找出给定文本是否存在

> ID：13644385
> 
> 赞同：0
> 
> 时间：2012-11-30T11:29:05.363
> 
> 标签：php, javascript

在我的 php 项目中，我有一个 javascript 变量说“addText”，其中包含以下 html 内容

```
<div class="foxcontainer" style="width:100% !important;">
<h2>FREE IN HOME CONSULTATION</h2>

<ul class="fox_messages">
    <li>Invalid field: Your name</li>
    <li>Invalid field: Your email</li>
</ul>

<form enctype="multipart/form-data" class="foxform" action="/hima/bigriglawgroup/index.php/about-us#mid_131" method="post">
<!-- mod_foxcontact 2.0.19 GNU/GPLv3 -->
<div class="foxfield">
    <input class="invalidfoxtext" value="Your name" title="Your name" style="width:85% !important;display:block;float:none;margin:0 auto !important;" name="_c31f7a92d344f9a5c23d07fd438ba0b6" onfocus="if(this.value==this.title) this.value='';" onblur="if(this.value=='') this.value=this.title;" type="text"> 
    <span class="asterisk"></span>
</div>
<div class="foxfield">
    <input class="invalidfoxtext" value="Your email" title="Your email" style="width:85% !important;display:block;float:none;margin:0 auto !important;" name="_4fd8a7bb907c63baca708086b63eb7f0" onfocus="if(this.value==this.title) this.value='';" onblur="if(this.value=='') this.value=this.title;" type="text"> 
    <span class="asterisk"></span>
</div>
<div class="foxfield">
    <input class="validfoxtext" value="Phone number" title="Phone number" style="width:85% !important;display:block;float:none;margin:0 auto !important;" name="_68a05eb930e9ce854ed0c2d2d25c14a1" onfocus="if(this.value==this.title) this.value='';" onblur="if(this.value=='') this.value=this.title;" type="text">
</div>
<div class="foxfield">
    <textarea rows="" cols="" class="validfoxtext" name="_0ef408e84316ef5737db72a727579f48" title="Notes" style="width:85% !important;height:180px !important;display:block;float:none;margin:0 auto !important;" onfocus="if(this.value==this.title) this.value='';" onblur="if(this.value=='') this.value=this.title;">retret ret ret ret</textarea>
</div>
<div class="foxfield">
    <button class="foxbutton" type="submit" style="margin-right:32px;" name="mid_131">
    <span>Submit</span>
    </button>
</div>
<div class="fox-copyright" style="padding:10px 0 !important;text-indent:0 !important">
    <a target="_blank" title="Joomla contact form" href="#" style="display: none !important; display: inline !important; font-size:10px !important;">powered  by fox contact</a>
</div>

</form>

</div> 
```

在这里，我想检查该内容中是否存在字符串“无效字段”。如果它不存在，我想做一些其他功能。但我不知道该怎么做

有人知道吗？请帮助我ASPS。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:33:01.347

```
if (addText.indexOf("Invalid field") != -1) { /* it's present */ }

// OR with regex

if (/Invalid field/.test(addText)) { /* it's present */ }

// OR with case-insensitve regex:

if (/Invalid field/i.test(addText)) { /* it's present */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:33:37.483

你可以使用`strstr`，文档@http [://www.php.net/manual/en/function.strstr.php](http://www.php.net/manual/en/function.strstr.php)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:44:13.940

我真的不推荐用正则表达式解析 html，但是在 vanilla javascript 中没有简单的方法。
如果您使用 jQuery，那么[`:contains`](http://api.jquery.com/contains-selector/)选择器的任务非常简单：

```
var toSearch = "Invalid field"
    elements = $(':contains('+ toSearch +')');

// if we have any elements that contain the searched keywords
if(elements.length) {
    // do smth
} 
```

# ios - 使用预定义的发布日期向 App Store 提交应用程序，然后发布更新

> ID：13644386
> 
> 赞同：3
> 
> 时间：2012-11-30T11:29:08.307
> 
> 标签：ios, app-store, updates, appstore-approval

我们将在本周向 App Store 提交一个应用程序，其中包含预定义的发布日期（假设它是 2012 年 12 月 15 日）。

假设该应用程序已获得批准。如果我们（在批准后）发布更新（假设在 12 月 10 日），该应用程序是否仍会在 12 月 15 日发布（没有更新），还是会推迟整个发布日期直到更新获得批准？

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:30:37.130

该应用程序将以 Apple 当前批准销售的任何版本启动。如果您的新版本已经获得批准，那么它将被发布。否则，旧版本会。

值得注意的是，苹果在假期期间有一段时间不审核应用程序。

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:34:36.027

您的应用程序将在您希望它发布的日期上线。所以这意味着如果您将应用的发布日期设置为 15 日，并且您上传了另一个版本，它将在 15 日发布，但请记住，在您的应用到达之前，您无法上传新版本

# android - Android - 给按钮投下阴影

> ID：13644390
> 
> 赞同：1
> 
> 时间：2012-11-30T11:29:48.050
> 
> 标签：android, button, shadow

如何在 Android 中将阴影投射到 Button？

像那样：

[https://app-direct-www-cloudfront.s3.amazonaws.com/app_resources/1398/overview/img257128879592909522.png](https://app-direct-www-cloudfront.s3.amazonaws.com/app_resources/1398/overview/img257128879592909522.png)

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:32:22.200

您可以按如下方式向位图添加阴影：

```
Paint mShadow = new Paint(); 
// radius=10, x-offset = 0, y-offset=2, color=black

mShadow.setShadowLayer(10.0f, 0.0f, 2.0f, 0xFF000000); 
// in onDraw(Canvas) 
canvas.drawBitmap(bitmap, 0.0f, 0.0f, mShadow); 
```

类似地实现了向形状添加阴影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:41:18.297

[像这样](http://img502.imageshack.us/img502/9394/bblue9.png)使用9patch 。只需通过右边和底线指定内容区域。

# javascript - 获取伪元素样式值

> ID：13644399
> 
> 赞同：3
> 
> 时间：2012-11-30T11:30:09.140
> 
> 标签：javascript, css, dom, pseudo-element

与此问题有关[通过 JavaScript 更改 CSS 伪元素样式](https://stackoverflow.com/questions/4481485/changing-css-pseudo-element-styles-via-javascript)，是否有任何方法可以使用 javascript 访问伪元素的样式属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T03:21:00.080

这取决于浏览器。我不相信 IE 以任何方式支持这一点，但对于 FireFox 和 Webkit 浏览器，您可以使用以下内容：

```
window.getComputedStyle(element, pseudo-selector); 
```

例如：

```
window.getComputedStyle(document.body, ':before'); 
```

请参阅：[getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)

# vb.net - 在 Visual Basic 中将控制台设置为全屏和最大大小

> ID：13644400
> 
> 赞同：2
> 
> 时间：2012-11-30T11:30:09.860
> 
> 标签：vb.net

我正在尝试将控制台窗口设置为全屏，但我当前的代码无法正常工作 Module Module1

```
Sub Main()
    Console.WindowHeight = Console.LargestWindowHeight
    Console.WindowWidth = Console.LargestWindowWidth
    Console.SetBufferSize(Console.LargestWindowWidth, Console.LargestWindowHeight)
    Console.SetWindowPosition(Console.LargestWindowWidth / 2, Console.LargestWindowHeight / 2)
    Console.Read()
End Sub

End Module 
```

System.ArgumentOutOfRangeException 未处理 Message=必须设置窗口位置，以使当前窗口大小适合控制台的缓冲区，并且数字不能为负。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:26:03.573

[MSDN](http://msdn.microsoft.com/en-us/library/system.console.setwindowposition.aspx)给出了您寻求的答案：

> ArgumentOutOfRangeException：left + WindowWidth 大于 BufferWidth。或 top + WindowHeight 大于 BufferHeight。

所以你应该将窗口位置设置为 0, 0。

# ios - iOS - 当 UITextField 为空时检测键盘中的退格键

> ID：13644402
> 
> 赞同：15
> 
> 时间：2012-11-30T11:30:13.240
> 
> 标签：ios, uitextfield, uitextfielddelegate

> **可能重复：**
> [检测 UITextField 中的退格键](https://stackoverflow.com/questions/1977934/detect-backspace-in-uitextfield)

我想检测何时在键盘上按下退格键，即使 a`UITextField`为空。

我尝试使用`ShouldChangeCharachtersInRange`，但是当调用退格键并且文本为空时，它不会被调用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-11-30T12:44:30.143

您是否在 .h 文件中定义了 UITextview 的委托，或者只是在 .m 文件中将委托分配给 self 。像 textfield.delegate = self.

# c++ - 在单个生产者和多个消费者中交换没有锁的缓冲区

> ID：13644407
> 
> 赞同：0
> 
> 时间：2012-11-30T11:30:33.207
> 
> 标签：c++, c, pthreads, producer-consumer

我们有数据将定期更新的用例。但是会有多个线程读取数据。所以我们正在考虑的解决方案是使用双缓冲。所以消费者线程将读取前台页面，而生产者将更新后台页面。一旦生产者更新了后台页面，它将与该页面交换前台页面**而不需要锁定**。由于数据将相同或不同，我们仍然不在乎，因为它不会影响操作。现在的问题是如何完成这项工作，因为我知道传统的生产者消费者问题，我可以将两个缓冲区用于同一个工作并继续旋转这些东西，但要交换的问题我需要一个锁，但这就是我们想要的避免。

那么如何执行这些事情。在这方面的任何指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:41:24.443

从技术上讲，实际交换可以通过以下方式执行：

*   C++11 原子函数 - 例如`std::atomic_echange`，`std::atomic_exchange_explicit`
*   内联汇编 - 例如英特尔`lock xchg`
*   GCC 内置函数 -`__atomic_exchange`或更早版本`__sync_lock_test_and_set`
*   MSVC 功能 -`InterlockedExchangePointer`

# git - Git“没有这样的存储库”

> ID：13644409
> 
> 赞同：2
> 
> 时间：2012-11-30T11:30:42.033
> 
> 标签：git

我是 git 的一种新用户，在大量使用 svn 之后，我仍然有一些不清楚的地方。

这是我的问题：

我在 xp dev 上有 repo：ssh://xp-dev.com/my_repo_name

它包含两个分支 master 和 dev，如您所见，我有本地和远程分支

```
git branch -a
* dev
  master
  remotes/origin/dev
  remotes/origin/master

git remote -v
origin  ssh://xp-dev.com/my_repo_name (fetch)
origin  ssh://xp-dev.com/my_repo_name (push) 
```

但是当我尝试将提交的更改推送到“dev”分支时，它说：

```
git push
No such repository
fatal: The remote end hung up unexpectedly 
```

请帮助我了解问题所在。

**更新#1**

```
git remote show origin
No such repository
fatal: The remote end hung up unexpectedly 
```

**更新#2**

```
git push origin cyber_dev
No such repository
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:01:11.180

尝试：

```
git push origin dev 
```

如果这可行，那么您的 git 配置有问题。

还要确保您仍然可以访问 repo（有效的 ssh 密钥或正确的密码）。

更新：

它开始看起来像你不再有权访问回购。

尝试将项目克隆到新文件夹。

如果这不起作用，请确保您的 ssh 密钥是有序的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:18:21.303

感谢您的所有贡献，它帮助我解决了这个问题，我注意到存储库的名称发生了一些变化，我不知道这一点。我改变了它，它现在可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T06:11:48.287

这可能是由于您的系统中存储了错误/旧密码。从开始菜单打开控制面板选择用户帐户在左侧菜单中选择“管理您的凭据”编辑与 Git 或 GitHub 相关的凭据

# java - itext java pdf到文本创建

> ID：13644419
> 
> 赞同：1
> 
> 时间：2012-11-30T11:31:14.040
> 
> 标签：java, itext, pdftotext

我使用 itext 将 pdf 转换为文本文件，它实际上效果很好，但对于某些单词，它会执行以下操作：例如，在 pdf 中有类似“提出主要思想”的短语，但 itext 创建了一个类似“presentthemainideas”的输出。无论如何要纠正这种行为？

```
 String pdf="/home/can/Downloads/NLP/textSummarization/A New Approach for  Multi-Document Update Summarization.pdf";
    String txt="/home/can/myWorkSpace/PDFConverterProject/outputs/bb.txt";
    StringBuffer text=new StringBuffer() ;
    String resultText="";
    PdfReader reader;
    try {
        reader = new PdfReader(pdf);
        PdfReaderContentParser parser = new PdfReaderContentParser(reader);
        PrintWriter out = new PrintWriter(new FileOutputStream(txt));
        TextExtractionStrategy strategy;
        for (int i = 1; i <= reader.getNumberOfPages(); i++) {
            strategy = parser.processContent(i, new SimpleTextExtractionStrategy());
            text.append(strategy.getResultantText());

        }
        resultText=text.toString();
        resultText = resultText.replaceAll("-\n", "");
        out.println("-->"+resultText);

        StringTokenizer stringTokenizer=new StringTokenizer(resultText, "\n");
        PrintWriter lineWriter = new PrintWriter(new FileOutputStream("/home/can/myWorkSpace/PDFConverterProject/outputs/line.txt"));
        while (stringTokenizer.hasMoreTokens()){
            String curToken = stringTokenizer.nextToken();
            lineWriter.println("line-->"+curToken);
        }
        lineWriter.flush();
        lineWriter.close();
        out.flush();
        out.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T12:23:11.440

出现这种缺失空格字符的原因是您在呈现的 PDF 中看到的空格不一定与 PDF 的页面内容描述中的空格字符相对应。相反，您经常会在 PDF 中发现一个操作，它在渲染一个单词后将当前位置稍微向右移动，然后再渲染下一个单词。

不幸的是，同样的机制也被用来增强相邻字形的外观：在某些字母组合中，为了获得良好的外观和阅读体验，字形应该打印得比默认情况下更接近或更远。这是使用与上述相同的操作在 PDF 中完成的。

因此，在这种情况下，PDF 解析器必须使用启发式方法来确定这种转变是为了暗示一个空格字符，还是仅仅为了使字母组看起来更好。启发式可能会失败。

您`SimpleTextExtractionStrategy`用作文本提取策略。这种情况下的启发式方法是这样实现的（目前在iText 5.x github git develop 分支的[SimpleTextExtractionStrategy.java](https://github.com/itext/itextpdf/blob/develop/itext/src/main/java/com/itextpdf/text/pdf/parser/SimpleTextExtractionStrategy.java)`renderText`中的方法中）：

```
float spacing = lastEnd.subtract(start).length();
if (spacing > renderInfo.getSingleSpaceWidth()/2f)
{
    result.append(' ');
} 
```

因此，至少为空格字符的当前宽度一半宽的间隙被转换为空格字符。

这通常听起来很明智。但是，对于仅使用水平移位来分隔单词的文档，实际空格字符的当前宽度可能不是启发式方法的好衡量标准。

因此，您可以做的是尝试改进文本提取策略中的启发式方法。复制现有的，对其进行操作，然后在您的代码中使用它。

如果您为您的问题提供示例 PDF，我们可能会提供一些帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T13:56:22.843

您可以使用碧玉报告。它就像一个魅力

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-22T09:05:57.767

为了扩展 mkl 的精彩解释，这里是问题中提出的问题的具体变体的详细信息。我偶然发现了一个我想从中提取文本的文档。每个字母都用空格隔开。

```
text would read as "t e x t" 
```

我尝试实现我自己的提取策略类，如 mkl 所述。无论我尝试将哪个因素应用于“单个空间宽度”值，文本的输出方式都与以前相同。所以我调试了我的代码来查看**宽度值**本身，结果是**0**。

为了避免这种情况，您可以在 mkl 概述的代码中使用修复值：

```
float spacing = lastEnd.subtract(start).length();
if (spacing > someFixValue)
{
    result.append(' ');
} 
```

如果您将自己的提取策略基于**LocationTextExtractionStrategy**，则要覆盖的方法是：**IsChunkAtWordBoundary(...)**

# java - 断言，为空或者是特定类的实例

> ID：13644421
> 
> 赞同：0
> 
> 时间：2012-11-30T11:31:23.017
> 
> 标签：java, unit-testing, junit, assertions, hamcrest

我以为很简单

```
 Assert.assertThat(
                iterator.next(),
                Matchers.either(Matchers.nullValue()).or(
                        Matchers.instanceOf(Double.class))); 
```

所以我想 ensre next() 返回两个之一，NULL 或 Double 的实例。某事喜欢

```
Assert.assertTrue(next == null || next instanceof Double); 
```

测试运行 ( `assertThat`) 结果...

```
 java.lang.NoSuchMethodError: org.hamcrest.Matcher.describeMismatch(Ljava/lang/Object;Lorg/hamcrest/Description;)V
at org.hamcrest.core.CombinableMatcher.matchesSafely(CombinableMatcher.java:17)
at org.hamcrest.TypeSafeDiagnosingMatcher.matches(TypeSafeDiagnosingMatcher.java:55)
at org.junit.Assert.assertThat(Assert.java:772)
at org.junit.Assert.assertThat(Assert.java:738 
```

为什么？以及如何解决？

**编辑**

你是对的，与来自 Mockito 的 hamcrest lib 发生了冲突。我已经修好了。没有错误，但断言奇怪地失败了，看看：

```
 java.lang.AssertionError: 
 Expected: (null or an instance of java.lang.Double)
 got: null
at org.junit.Assert.assertThat(Assert.java:780)
at org.junit.Assert.assertThat(Assert.java:738) 
```

Null 是预期的，得到 null 并且测试失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:55:28.490

`NoSuchMethodError`指示有关编译时和运行时环境之间差异的问题。一个典型的原因是您在运行时有不同版本的 JAR。也许你有两个 Hamcrest JAR，但一个优先。仔细检查编译时和运行时类路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:55:31.737

我建议您有多个冲突的 Hamcrest 依赖项。检查您的构建路径/ Maven 依赖项。

如果您执行搜索，`java.lang.NoSuchMethodError: org.hamcrest.Matcher.describeMismatch`您将获得以下完全相同问题的条目列表：

[您在发布此问题之前是否进行了搜索？](https://stackoverflow.com/search?q=java.lang.NoSuchMethodError:%20org.hamcrest.Matcher.describeMismatch)

第一个结果对我来说是正确的：

[第一个搜索结果](https://stackoverflow.com/questions/12070514/jmock-java-lang-nosuchmethoderror-org-hamcrest-matcher-describemismatch)

# perl - 在 perl 中解析哈希引用

> ID：13644425
> 
> 赞同：2
> 
> 时间：2012-11-30T11:31:34.183
> 
> 标签：perl

我对 perl 哈希有疑问，对此的任何建议都非常感谢 - 下面只是代码片段 -

```
my @results = $sp->get_list_items($listid, $viewid); 
print Dumper @results; 
```

输出是这样的，

```
$VAR1 = { a => 1, b => 2, g => 1, }; 
$VAR2 = { c => 1, d => 2, g => 1, b => 1434, h => 2 }; 
$VAR3 = { e => 1, a => 232, f => 2 }; 
$VAR4 = { g => 1, h => 2, a => 5, b => 19 }; 
```

注意：它是分号而不是哈希引用之间的逗号！我的任务是从每个 hashref 收集 a 和 b 值（如果 a 或 b 在 hashref 中不存在，则将其替换为 0）并将其存储在哈希中，如果 hashref 用逗号连接很容易，因为它是一个分号尽管经过多次试验，这对我来说真的很难，请帮助..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:36:19.200

您误解了`Data::Dumper`. 您需要将数组 ref 发送到 Dumper 函数：

```
print Dumper \@results; 
```

否则，您发送要单独打印的数组中的元素列表。

你应该得到这样的输出：

```
$VAR1 = [
          {
            'a' => 1,
            'g' => 1,
            'b' => 2
          },
          {
            'c' => 1,
            'h' => 2,
            'b' => 1434,
            'g' => 1,
            'd' => 2
          },
          {
            'e' => 1,
            'a' => 232,
            'f' => 2
          },
          {
            'a' => 5,
            'h' => 2,
            'b' => 19,
            'g' => 1
          }
        ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:12:14.893

不知道你想如何“将 a 和 b 值存储在哈希中”，但这应该给你一些开始：

```
for my $result (@results) {
  my $a_val = $result->{a} || 0;
  my $b_val = $result->{a} || 0;

  # now do something with $a_val and $b_val ...

} 
```

# c++ - doxygen 将 doxygen 评论中的特定数据复制到降价页面

> ID：13644429
> 
> 赞同：0
> 
> 时间：2012-11-30T11:31:52.380
> 
> 标签：c++, markdown, doxygen

我想知道是否有办法将 doxygen 评论的特定部分从一个文件或多个文件复制到降价页面中。下面我描述了我正在尝试做的事情。

我正在开发一个 C++ 插件代码，它由几个模块组成。每个模块都遵循其版本编号方案。在每个插件版本中，我为每个模块选择一个特定的版本号。为了允许最终用户以编程方式访问此信息，我设置`namespace`如下：

```
namespace VersionInfo {
    string getModuleA_Version() { return "2.3"; }
    string getModuleB_Version() { return "1.0"; }
    string getPlugin_Version() { return "10.11"; }
} 
```

我还希望这些信息出现在`README.md`降价文件中。doxygen 是否可行，如果可以，我应该如何评论上面的 C++ 代码和`README.md`文件？

如果我必须在 C++ 注释中再次写下版本号，这对我来说很好。例如：

```
// Sample pseudo-code
/**
  * @brief version number for module A.
  * @version_moduleA 2.3
  */
string getModuleA_Version() { return "2.3"; } 
```

是否可以如上所述定义自定义变量，然后在markdown文件中引用它们？例如，类似：

```
// Sample pseudo-markdown
Versions
- ModuleA : @version_moduleA
- ModuleB : @version_moduleB
- ModuleC : @version_moduleC 
```

我曾尝试浏览 doxygen 主页上的文档，但我无法弄清楚。

即使您指出 doxygen 命令也会有所帮助，我会尝试从那里解决。

**编辑**@Zane 下面的评论让我想了更多。如上所述的解决方案是首选，但我认为即使我可以从降价文件*链接*到相应的评论也是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T00:21:07.217

我需要解决将源代码注释插入markdown文件的相同问题。我的计划是让 doxygen 输出 xml 并将我自己的自定义标签放在降价文件中（如 @xml_brief_description ）。然后编写一个解析 XML 文件并在 markdown 文件中进行适当替换的后处理脚本。

如果有人有更简单的方法来实现这一点，那么我会全力以赴。

# jakarta-ee - 跨 WebLogic WorkManager 线程共享事务（使用 CommonJ）

> ID：13644432
> 
> 赞同：3
> 
> 时间：2012-11-30T11:31:57.263
> 
> 标签：jakarta-ee, transactions, weblogic, weblogic-10.x, workmanagers

我已经在我通过 JNDI 查找的实体 bean 上配置了工作管理器。更改背后的想法是对一些验证进行多线程处理，因为这可能很耗时，但这需要访问当前事务。

根据我的测试，似乎无法在工作线程中访问事务。我非常想在我的工作线程中访问事务 - 我可以这样做吗？

我希望做与此[ExecutionContext](http://www.ibm.com/developerworks/library/j-jca2/index.html#N10321)类似的事情，其中​​在安排工作时传递 XID 对象，这意味着它继承了当前事务。WebLogic 支持吗？

这就是我所做的：

我已将工作管理器定义添加到`weblogic-ejb-jar.xml`如下：

```
 <work-manager>
    <name>wm/EJBWorkManager</name>
    <min-threads-constraint>
      <name>EJBWorkManager_MinThreadCount</name>
      <count>5</count>
    </min-threads-constraint>
  </work-manager> 
```

在 bean 定义中添加了参考`ejb-jar.xml`

```
 <resource-ref>
    <description>Work Manager allows multi-threading of defined units of work.</description>
    <res-ref-name>wm/EJBWorkManager</res-ref-name>
    <res-type>commonj.work.WorkManager</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

然后在我的代码中，我查找了工作管理器并安排了一些工作来执行。

```
weblogic.transaction.Transaction tx = ( weblogic.transaction.Transaction ) weblogic.transaction.TransactionHelper.getTransactionHelper().getTransaction();
log.info( tx != null ? tx.getXid().toString() : "No Transaction" );
try {
  InitialContext initialContext = new InitialContext();
  WorkManager workManager = ( WorkManager ) initialContext.lookup( "java:comp/env/wm/EJBWorkManager" );
  List<WorkItem> workItems = new ArrayList<WorkItem>(); 
  for ( int i = 0; i < 2; i++ ) {
    Work work = new Work() {
      public void run() {
        weblogic.transaction.Transaction tx = ( weblogic.transaction.Transaction ) weblogic.transaction.TransactionHelper.getTransactionHelper().getTransaction();
        log.info( tx != null ? tx.getXid().toString() : "No Transaction" );
      }
      public boolean isDaemon() {
        return false;
      }
      public void release() {
      }
    };
    workItems.add( workManager.schedule( work ) );
  }
  workManager.waitForAll( workItems, WorkManager.INDEFINITE );
} catch ( NamingException e ) {
  throw new RemoteException( "Error", e );
} catch ( IllegalArgumentException e ) {
  throw new RemoteException( "Error", e );
} catch ( InterruptedException e ) {
  throw new RemoteException( "Error", e );
} catch ( WorkException e ) {
  throw new RemoteException( "Error", e );
} 
```

我得到的输出如下所示，表明事务在生成的线程中不可用。是否可以将此事务共享到工作线程中？我认为他们已经将其作为 JCA 1.5 (JSR 112) 的一部分。

```
16 [[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'] INFO com.tracegroup.isys.weblogic.beans.session.SimpleEJB - BEA1-0474BACB4707C088B359
16 [[STANDBY] ExecuteThread: '10' for queue: 'weblogic.kernel.Default (self-tuning)'] INFO com.tracegroup.isys.weblogic.beans.session.SimpleEJB - No Transaction
16 [[STANDBY] ExecuteThread: '10' for queue: 'weblogic.kernel.Default (self-tuning)'] INFO com.tracegroup.isys.weblogic.beans.session.SimpleEJB - No Transaction 
```

**编辑：**我也尝试过使用 weblogic.connector.work.WorkManager 和 javax.resource.spi.work.WorkManager，但是在执行 JNDI 查找时这些都没有返回。这些似乎确实允许将 ExecutionContext 传递给工作管理器，从而允许给出 XID。我对这些类的初始测试似乎不起作用。也许我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:51:34.907

**来自 Oracle 支持电话的官方消息：**

> 不可能/不支持。JTA 有一个单线程模型。
> 
> 单个事务中可能涉及多个线程的一种情况是调用远程服务器。远程服务器被登记为子协调器。即便如此，整个控制流都是单线程的，因此将此模型扩展到本地线程池不会给您带来任何好处。

# ssis - 如何在ssis中将数据插入表中时实现校验和功能？

> ID：13644434
> 
> 赞同：0
> 
> 时间：2012-11-30T11:31:59.440
> 
> 标签：ssis

在将数据插入表后在我的包中。我已经使用 SQL TASK 通过更新查询填充了校验和值，这需要更多时间。如何在没有第三方组件的情况下解决这个问题。

请帮助我。

以下查询用于填充校验和 ID。在此表中，基于 Import_Id 的记录超过 1000 万条。

UPDATE Communication SET ChecksumId = CHECKSUM(address1,address2,state,zip,city,....) where import_id=?

这个过程只需要更多的时间，最少 1 或 2 小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:43:26.800

使用 T-SQL CHECKSUM 函数：http: [//msdn.microsoft.com/en-us/library/ms189788.aspx](http://msdn.microsoft.com/en-us/library/ms189788.aspx)

您可以在整行上使用它，就像：

```
select FirstName, LastName, CheckSum(*) As CheckSum
  from SomeUserTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:15:04.620

一种可能性是编写自己的校验和函数，并使用加载数据的数据流中的脚本转换将其应用于传入数据的每一行。从执行时间的角度来看，这可能是最快的；但是，如果值必须与 T-SQL CHECKSUM 匹配，则需要进行大量逆向工程。

或者，不要直接加载目标表，而是创建一个与目标表具有相同布局的工作表，以及一个定义为所需列的 CHECKSUM 的计算列：

```
CREATE TABLE WRK_Communication
(
    address1 VARCHAR(50),
    address2 VARCHAR(50),
    -- other columns
    ChecksumId CHECKSUM(address1,address2,state,zip,city,....)    
) 
```

在您的 SSIS 包中，首先使用执行 SQL 任务来截断此工作表，然后使用数据流加载它，然后使用另一个执行 SQL 任务将工作表的内容插入到目标表中。

# ios - ViewControllers 数据发送混乱

> ID：13644438
> 
> 赞同：0
> 
> 时间：2012-11-30T11:32:09.787
> 
> 标签：ios, parameter-passing, segue

我有一个有趣的问题。我有 3 个视图控制器（让我们将它们命名为 tableViewControler A、viewControler B、最终 tableViewController C）。它们都涉及过滤数据。

在 AI 中选择一个主要类别，在下一步中，我将所选类别的名称发送到 B（在 didSelectRowAtIndexPath 中像这样

```
FilterTableViewController *fViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"filterTableView"]; //B view controller
fViewController.passedValue = [categories objectAtIndex:indexPath.row]; 
```

) 控制器 B 的目的是对数据进行额外过滤（例如是否有剩余时间，哪个项目的价格最高等）。B 提到了passedValue（带有类别名称的字符串）。用户选择过滤器并单击按钮后，C 将被推送。

现在，在 C 中，我有公共 NSString“selectedCat”。在执行对 C 的 segue 之前，该字符串应在 B 中分配数据

```
FilterResultViewController *resViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"resController"]; //C viewController
resViewController.selectedCat = passedValue; 
```

现在，在 C 中，我正在请求数据。这是 http 请求，我正在返回 JSON。这一切都很好。然而，我的问题是，selectedCat 是（NULL）。我制作了 NSLogs 来查看我的数据在哪里丢失了。我发现的更令人困惑。

这是我的控制台日志

```
2012-11-30 12:27:07.976 portal_postupne[4510:11303] selected sports //This NSLog is in A
2012-11-30 12:27:10.542 portal_postupne[4510:11303] category = (null)// This NSLog is in C
2012-11-30 12:27:10.653 portal_postupne[4510:11303] passed category: sports//This NSLog is in B and gets called on button click that pushes C 
```

所以基本上我的 C 视图控制器在 B 之前以某种方式被调用。我想这就是我的类别为空的原因。我还尝试在 A 中实例化 C 并在 A 中设置类别值。再次为 Null。

接下来，我在 viewWillAppear 方法中做我的表格视图。但是我稍后将其移至 viewDidLoad ，但这并没有解决我的问题。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:51:43.407

我通过这种方式“解决”了它，可能是错误的方法。我在 NSUserDefaults 中保存了类别值。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [[NSUserDefaults standardUserDefaults] setObject:[categories objectAtIndex:indexPath.row] forKey:@"kategoria"];
    [defaults synchronize]; 
```

当我为 HTTP 请求设置参数时，然后在 C 中调用它。

```
NSMutableString *parameters = [[NSMutableString alloc]init];
    [ms appendFormat:@"&category=%@",[defaults objectForKey:@"kategoria"]]; 
```

但是我不认为，这是“正确”的方法。

# android - 使用高级应用程序杀手杀死一个应用程序会导致 android 中的应用程序崩溃

> ID：13644447
> 
> 赞同：-2
> 
> 时间：2012-11-30T11:32:41.630
> 
> 标签：android, onresume

我开发了一个安卓应用程序。它工作正常，但是当用户在他的手机中有高级应用程序杀手并用它杀死应用程序时，当你再次打开它时，应用程序会崩溃。这是因为应用程序杀手正在删除我的应用程序的全局变量的所有内容。有没有办法阻止这种情况？

其他解决方法可能像我的应用程序的 onResume() 如果它被应用程序杀手杀死，我想重新启动应用程序。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:22:36.877

你必须实现这样的回调`onSaveInstanceState`-

```
protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);    
        outState.putInt("param1", yourGlobalIntVariableName);
        outState.putString("param2", yourGlobalStringVariableName);
    } 
```

在你的`onCreate`你应该看看你的`savedInstanceState`变量是否不为空，如果它不为空，你必须采取`saveInstanceState`

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(savedInstanceState != null) {
            yourGlobalIntVariableName = savedInstanceState.getInt("param1");
            yourGlobalStringVariableName = savedInstanceState.getString("param2"));
        }
} 
```

那应该可以解决问题。

如果您有 Android 4.0 测试设备，请转到设置 -> 开发人员选项 -> “不保留活动”

核实。然后运行您的应用程序。看看它是否工作正常。理想情况下应该。操作系统可以杀死你后台堆栈中的一些活动，你的应用程序应该能够处理它。此开发人员选项将为您提供一种测试此类情况的方法。一旦你进入下一个活动，它就会从内存中删除上一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:12:01.700

如果您的应用程序被杀死，下次启动时它将从头开始，因此`onCreate`将被调用。

现在您声称您的应用程序被杀死然后`onResume`被调用。这没有任何意义。如果`onResume`被调用，那么您的应用程序可能已进入后台，因此`onPause`必须在此之前调用。检查是否`onPause`被调用并尝试弄清楚到底发生了什么。

# android - Android AlertDialog 将 PositiveButton 移到右侧，将 NegativeButton 移到左侧

> ID：13644448
> 
> 赞同：19
> 
> 时间：2012-11-30T11:32:43.517
> 
> 标签：android, android-alertdialog

我是安卓新手。

目前我想显示一个`AlertDialog`带有“确定”和“取消”按钮的框。

默认为 PositiveButton: Left, NegativeButton: Right

您能告诉我如何将 PositiveButton 移到右侧并将 NegativeButton 移到左侧吗？

如果我们将文本“OK”更改为 NegativeButton 并将“Cancel”更改为 PositiveButton，如果 Negativebutton 在按下 OK 时发出不好的声音，是否有任何机会/麻烦。

我的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(SUtils.getContext());
                    builder.setMessage("Confirmation?")
                    .setCancelable(false)
                    .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            //Todo
                            dialog.cancel();
                        }
                    })
                    .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            //TOdo
                        }
                    })

dialog = builder.create(); 
```

谢谢，天使

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-30T11:42:07.373

这可能不是一个直接的答案。但只是有关相关主题的一些信息。从谷歌自己论坛的[这个帖子中，罗曼人说..](http://code.google.com/p/android/issues/detail?id=24138)

> 未来正/负按钮的顺序将是 ICS 中使用的按钮。

每个操作系统版本的约定是

*   在 Honeycomb 之前的设备上，按钮顺序（从左到右）是正 - 中性 - 负。
*   在使用 Holo 主题的较新设备上，按钮顺序（从左到右）现在是 NEGATIVE - NEUTRAL - POSITIVE。

如果这是 android/Google 想要遵循的约定，那么遵循相同的约定不是更好吗，因为您的用户不会单独使用您的应用程序。毕竟，用户友好性是开发人员首先要寻找的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T11:37:54.873

```
AlertDialog.Builder builder = new AlertDialog.Builder(SUtils.getContext());
                builder.setMessage("Confirmation?")
                    .setCancelable(false)
                    .setNegativeButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            //TOdo
                        }
                    })
                    .setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            //TOdo
                            dialog.cancel();
                        }
                    })

                diaglog = builder.create(); 
```

但我建议您遵守约定，除非您有充分的理由更改顺序。这将使用户更容易使用您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:38:33.553

这不是最优雅的方式，但它会做你想做的事

```
AlertDialog.Builder builder = new AlertDialog.Builder(SUtils.getContext());
            builder.setMessage("Confirmation?")
                .setCancelable(false)
                .setNegativeButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        //TOdo
                        dialog.cancel();
                    }
                })
                .setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        //TOdo
                    }
                })

            diaglog = builder.create(); 
```

只需将`Cancel`按钮设为正极，将`Ok`按钮设为负极即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:40:46.263

无法更改android中的diffault设置但是您可以将文本ok更改为cancle set the functionally accroding this

```
AlertDialog.Builder builder = new AlertDialog.Builder(SUtils.getContext());
    builder.setMessage("Confirmation?")
           .setCancelable(false)
           .setNegativeButton("OK", 
               new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                            //TOdo
                        }
                   })
           .setPositiveButton("CANCEL", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                            //TOdo
                            dialog.cancel();
                        }
                    });

dialog = builder.create(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T09:01:30.070

`AlertDialog`将 按钮移到右侧的一个非常简单的方法是在处理默认布局的核心 XML 中隐藏`leftSpacer`， a 。`LinearLayout`

```
// Fetch the PositiveButton
final Button       lPositiveButton = lDialog.getButton(AlertDialog.BUTTON_POSITIVE);
// Fetch the LinearLayout.
final LinearLayout lParent         = (LinearLayout) lPositiveButton.getParent();
// Ensure the Parent of the Buttons aligns it's contents to the right.
lParent.setGravity(Gravity.RIGHT);
// Hide the LeftSpacer. (Strict dependence on the order of the layout!)
lParent.getChildAt(1).setVisibility(View.GONE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-10T09:31:05.007

检查这个[https://github.com/hslls/order-alert-buttons](https://github.com/hslls/order-alert-buttons)

```
dependencies {
    compile 'com.github.hslls:order-alert-buttons:1.0.0'
}

AlertDialogParams params = new AlertDialogParams();
params.mTitle = "title";
params.mMessage = "message";
params.mPositiveText = "Ok";
params.mNegativeText = "Cancel";
params.mCancelable = true;
params.mAlign = BUTTON_ALIGN.POSITIVE_BUTTON_LEFT;  // fix button position
params.mClickListener = new AlertDialogClickListener() {
    @Override
    public void onPositiveClicked() {

    }

    @Override
    public void onNegativeClicked() {

    }
};

AlertDialog dialog = AlertDialogBuilder.createAlertDialog(this, params); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-27T14:49:06.463

`neutral button`我发现在和之间有一个空间布局，其中按钮`-ve/+ve buttons`的位置为“1” 。`buttonBarLayout`

因此，首先我们需要删除该空间或使其可见`GONE`（`invisible`让它仍然需要一个空间`buttonBarLayout`）我们最好使用方法 onShowListner 比在显示对话框后这样做更好：

```
 alertDialog.setOnShowListener(new DialogInterface.OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            Button neutralButton = alertDialog.getButton(AlertDialog.BUTTON_NEUTRAL);
            LinearLayout view = (LinearLayout) neutralButtonOrAnyOtherBtnFromThe3Btns.getParent();
            Space space= (Space) view.getChildAt(1);
        }
 }); 
```

那么剩下的就是你的设计了，希望对你有帮助

# java - 从内部类调用外部类的成员

> ID：13644450
> 
> 赞同：0
> 
> 时间：2012-11-30T11:32:46.327
> 
> 标签：java

这是我的课：

```
public class T {
    public  int num = 100;
    private int num2 = -1;

    //inner class
    public static class Inner {
        private int num2 = 250;

        public void method() {
            System.out.println(num2);//calls inner class num
            System.out.println(...);//should print class T num
            System.out.println(...);//should print class T num2
        }   
    }
} 
```

如何使第二个和第三个*println*打印*T*类的*num*和*num2*？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T11:34:58.687

你不能 - 你的`Inner`类不是内部类，它是一个静态嵌套类。换句话说，它独立存在，没有引用 T 的实例。

如果您删除声明的`static`一部分`Inner`，则可能：

```
public class Inner {
    private int num2 = 250;

    public void method() {
        System.out.println(num2);//calls inner class num
        System.out.println(num);//should print class T num
        System.out.println(T.this.num2);//should print class T num2
    }   
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T11:39:51.567

当您声明一个嵌套类`static`时，这意味着您**不需要外部类的实例来创建您的案例中的嵌套类的**实例`Inner`，因此您无法访问`Outer`类的属性。

但是删除`static` **保证**例如`Inner`类的实例会有`Outer`类，因此它可以访问`Outer`类的成员。*

# ruby - 为什么这段代码在 Heroku 中的工作方式不同？

> ID：13644451
> 
> 赞同：0
> 
> 时间：2012-11-30T11:32:53.637
> 
> 标签：ruby, heroku, ruby-on-rails-3.2

即使 current_user 不存在，我也使用此代码在视图中设置值。如果您知道更好的方法，建议您使用另一种方法，否则我会使用引发异常。

```
def setval_if(valgood, valbad=nil)
  begin
    return valgood if yield
  rescue
  else
  end
end

setval_if("no exception raised") { true }
# => "no exception raised" # my machine, correct.
# => nil # Heroku 
```

但如果我添加这个肮脏的黑客，它也适用于heroku

```
def setval_if(valgood, valbad=nil)
  begin
    return valgood if yield
    puts "suca vaff.."
  rescue
  else
  end
end

setval_if("no exception raised") { true }
# => "no exception raised" # my machine, correct.
# => "no exception raised" # Heroku 
```

为什么为什么为什么？？？？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:55:01.157

我相信这是与正在运行的 Ruby 版本相关的问题。我可以在我的本地机器上使用 ruby​​-1.9.2-p320 下的 rvm 复制同样的问题。

我在 Heroku 上针对我的一个应用程序运行代码，但没有发生错误；该特定应用程序在 ruby​​-1.9.3-p194 上运行

你能确认你在哪个 Heroku 堆栈上运行吗？为此，只需登录 heroku，然后运行以下命令

heroku stack -a yourappnamehere

我在最新的heroku堆栈下运行了测试；雪松。

# android - 如何获取textview可绘制资源ID

> ID：13644459
> 
> 赞同：0
> 
> 时间：2012-11-30T11:33:10.303
> 
> 标签：android, android-layout, android-resources

我有一个带有一些 TextViews 的 UI，我想测试一个 textView 是否有某个可绘制资源作为背景。我正在使用以下代码，但`tag`始终为空。

```
Object tag = textView.getTag();
int backgroundId = R.drawable.bg_image_2;
if( tag != null && ((Integer)tag).intValue() == backgroundId) {
   //...do something...
}else{
   //...do something...
} 
```

哪个方法返回`R.drawable`对象的背景 ID 号？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:05:54.180

Tag 是开发人员使用 Widget 保存某些对象的功能，您可以使用 setTag() 使用 UI 小部件保存任意对象。如果您没有 setTag()，那么 getTag() 将返回 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:36:30.600

如果标签为空，那是因为您没有使用`setTag`

# ruby-on-rails - 如何将设计中的邮件链接从 localhost 更改为 herokuapp？

> ID：13644461
> 
> 赞同：2
> 
> 时间：2012-11-30T11:33:18.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, devise, devise-confirmable

我有 rails 应用程序，并且我在 heroku 中托管。创建用户时，设计会向邮件发送确认，单击链接将确认用户帐户。问题是邮件中的链接指向 localhost 而不是 herokuapp.com，所以我怎样才能将链接从 localhost 更改为 herokuapp.com。请帮我

邮件中的链接指向

```
http://localhost:3000/signup/confirmation?confirmation_token=sdgfshtdf364wygd 
```

但我希望链接指向

```
http://example.herokuapp.com/signup/confirmation?confirmation_token=sdgfshtdf364wygd 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T13:29:52.933

在 config/environments 中转到 production.rb，放在底部

```
 config.action_mailer.default_url_options = { :host => 'http://nameofyourherokuapp.herokuapp.com' } 
```

确保您在其中也有您的 smtp 设置，就像您在开发环境中一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:30:29.090

在*application.rb*集中

```
config.action_mailer.default_url_options = { :host => 'urlyouwant.com' } 
```

或者在环境目录中根据环境制作它

# python - Django分页，浏览但现在显示数据

> ID：13644463
> 
> 赞同：0
> 
> 时间：2012-11-30T11:33:28.227
> 
> 标签：python, django, pagination, django-views, django-pagination

会尽量保持简单！:)

我已经在我的 django 应用程序中设置了分页。我正在循环浏览我在分页中设置的页面。有12页，每页10条新闻。我可以单击下一步和我希望查看的页码，这一切正常。

但是来自后端的帖子中的数据没有显示，我不明白为什么。我认为这是因为我没有从 thr 模板正确访问模型。无论如何，这里是我的代码：

视图.py：

```
def press_list(request, template_name='pressbox/object_list.html', extra_context={}):
    category = PressCategory.objects.get()
    news_items = PressItem.objects.filter(is_active=True)

    paginator = Paginator(news_items, 10)

    page = request.GET.get('page', 1)

    this_page = paginator.page(page)

    page = int(page)

    try:
        this_page = paginator.page(page)
    except(EmptyPage, InvalidPage):
        raise Http404

    extra_context = {
        'category': category,
    'paginator': this_page.object_list,
    'paginator': paginator,
    "current_page_pag": page,
    'this_page': this_page,
    }
    return render_to_response(template_name, extra_context, RequestContext(request)) 
```

分页模板：

```
<div class="pag_wrap">
        <ul class='news_paginator'>
        <li class='prev'>{% if this_page.has_previous %}<a href='{{current_url}}?page={{this_page.previous_page_number}}'>&#60;</a>{% else %}<span>&#60;</span>{%endif%}</li>
        {% for page in paginator.page_range %}
        <li class='{% if forloop.last %}last {%endif%}{%ifequal current_page_pag page %}active {%endifequal%}'><a href='{{current_url}}?page={{page}}'>{{page}}</a></li>
        {% endfor %}
        <li class='next'>{% if this_page.has_next %}<a href='{{current_url}}?page={{this_page.next_page_number}}'>&#62;</a>{% else %}<span>&#62;</span>{%endif%}</li>
        </ul>
</div> 
```

新闻发布内容：

```
 <ul class="article-list">
        {% for object in paginator.page_range %}
                <li class="{{ object.category.slug }}">
                <a href="{{ object.get_absolute_url }}">

                  <img class="news_thumbnail" src="/media/{{object.thumbnail}}" alt="thumbnail" />
              <strong class="article-title">{{ object.title }}</strong>
                  <span class="article-date">{{ object.published_on|date:"M d, Y" }}</span> 
                  {{ object.short_description }}
                 {% comment %} <span class="article-category">{{ object.category.slug }}</span> {% endcomment %}
                </a>
              </li>
    {% endfor %}
            </ul> 
```

我确定是 - {% for object in paginator.page_range %} 行正在这样做，因为目前它只是循环通过帖子数量而不是内容。我不确定如何访问数据。

任何帮助将不胜感激。对 Python 和 Django 来说还很陌生，我对迄今为止所做的事情印象深刻！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:51:17.853

您正在传递`this_page.object_list`，并且`paginator`在`'paginator'`上下文中。所以`paginator`实际上并不是`oblect_list`模板中的 a 。

但是您不需要在模板中传递它，而是可以使用`this_page`，因此您的模板可以更新为

```
<ul class="article-list">
    {% for object in this_page.object_list %}
       ... your rendering code ...
    {%endfor%}
</ul> 
```

对于 django 1.4 及以上版本你可以直接做

```
{% for object in this_page %}
    ...
{%endfor%} 
```

参考：[在视图中使用 Paginator](https://docs.djangoproject.com/en/1.4/topics/pagination/#using-paginator-in-a-view)

# mysql - CLI bash，想要重新启动服务或服务

> ID：13644466
> 
> 赞同：0
> 
> 时间：2012-11-30T11:33:46.610
> 
> 标签：mysql, unix, restart

我不确定我需要使用的语法：

/etc/init.d/mysql 重启或 /etc/init.d/mysqld 重启

这是针对脚本的，因此可以很容易地移植到 Ubuntu (mysql) 或 CentOS (mysqld)。

我只是想要一个快速的一个班轮（如果可能的话）。或者我是否需要对 /etc/init.d/ 中的内容进行“查找”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:42:17.780

这应该适用于大多数 linux 发行版：

```
sudo service mysqld restart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:46:23.950

不同的系统似乎对 mysql 服务的命名不同，要么是 mysql，要么是 mysqld。因此，您可以尝试重新启动存在的那些。

```
[ -f /etc/init.d/mysql ] && /sbin/service mysql restart
[ -f /etc/init.d/mysqld ] && /sbin/service mysqld restart 
```

当发行版将 mysql 服务转换为 systemd 时，这可能会中断，因为启动文件不再位于 /etc/init.d/ 中

# java - JPQL 和可嵌入键中的简单多对多选择查询

> ID：13644467
> 
> 赞同：2
> 
> 时间：2012-11-30T11:33:52.173
> 
> 标签：java, database, jpql

我有这个模型，只有两个实体，一个用于键的可嵌入实体和一个将该键作为 id 字段的实体。

我想知道，如何编写简单的查询，例如“给我一个 id 为 5 的人的所有功能”或“给我一个名为 Somebody 的人的所有功能”。

当有可嵌入密钥时，我不明白如何访问这些信息......

我对重写我的模型犹豫不决，因为我将不得不围绕代码重写大量的东西。

我什至如何从该关联表中删除一些东西？我只是真的不知道我应该采取哪种“方式”来解决这个问题。

谢谢各位大佬的指点

```
@Entity
@Table(name = "PERSON")
public class Person {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "person_id")
    private Long id;

    @Column(name = "name", unique = true)
    private String name;
    // .. getters and setters

@Entity
@Table(name = "FUNC")
public class Function {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "function_id")
    private Long id;

    @Column(name = "name")
    private String name;
    // .. getters and setter

@Embeddable
public class PersonFunctionPK {

    @Column(name = "person_id")
    private Long personId;

    @Column(name = "function_id")
    private Long functionId;

    public PersonFunctionPK() {
    }

    PersonFunctionPK(Long personId, Long functionId) {
        this.personId = personId;
        this.functionId = functionId;
    }
    // .. getters and setter

@Entity
@Table(name = "PERSON_FUNC")
public class PersonFunction {

    @EmbeddedId
    protected PersonFunctionPK personFunctionPK;

    public PersonFunction() {}

    public PersonFunction(PersonFunctionPK personFunctionPK) {
        this.personFunctionPK = personFunctionPK;
    }

    public PersonFunction(Long personId, Long functionId) {
        this.personFunctionPK = new PersonFunctionPK(personId, functionId);
    }

    // .. getters and setter for personFunctionPK 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:04:45.100

您似乎将这些映射为单个独立实体。如果您映射实体之间的关系，那么您应该能够通过简单地调用 get 方法来完成大部分查询（不需要 jpql）

```
@Entity
@Table(name = "PERSON")
public class Person {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "person_id")
    private Long id;

    @Column(name = "name", unique = true)
    private String name;

    @ManyToMany(mappedBy = "persons", cascade=CascadeType.ALL) 
    private Collection<Function> functions;

    // .. getters and setters

@Entity
@Table(name = "FUNC")
public class Function {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "function_id")
    private Long id;

    @Column(name = "name")
    private String name;

    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(name = "PERSON_FUNC",
    joinColumns = {@JoinColumn(name = "function_id", referencedColumnName = "id")}, 
    inverseJoinColumns = {@JoinColumn(name = "person_id", referencedColumnName = "id")}) 
    private Collection<Person> persons;

    // .. getters and setter 
```

现在如果你得到一个 id 为 5 的人，你可以调用一个简单的 getter 来获取这个人的函数。如果您想将一组函数分配给所有名为 Stefan 的人，您可能仍需要使用 JPQL。您仍然需要映射 @ManyToMany，因为在 JPQL 中您指定了对象关系（而不是底层数据库）

```
select distinct f from Function f inner join f.persons p where p.name = "Stefan" 
```

我没有测试过任何这段代码，但它应该大致正确。

# android - Android发送嵌入css html的电子邮件

> ID：13644486
> 
> 赞同：1
> 
> 时间：2012-11-30T11:35:01.450
> 
> 标签：android, android-intent

我正在使用来自 android 应用程序的意图发送邮件，但我的 css 没有加载。有人可以帮我加载css吗？我哪里错了。几个小时以来，我一直坚持这个愚蠢的选择。

这是我的 div 的一部分。

`<div style="background:"+String.format(hex,colors.get(position).hex)"></div>`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:59:00.340

我有同样的问题，无法解决。我认为不可能使用默认的电子邮件客户端发送 css（如果我错了，请纠正我）。

我的工作是将 html 作为附件发送。

请参阅： [是否可以发送带有邮件意图的 html？](https://stackoverflow.com/questions/10930812/is-it-possible-to-send-html-with-the-mail-intent)

**编辑：** 这是我如何做到的示例：

*   将html另存为文件..
*   将附件添加到 Uri 对象列表
*   请参阅以下代码如何使用附件创建邮件意图..

    ```
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
        emailIntent.setType("text/html");
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "title");

        emailIntent.putExtra(Intent.EXTRA_TEXT, "email body text");
        emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
        startActivity(Intent.createChooser(emailIntent, "Email:")); 
    ```

# asp.net-mvc - 如何区分asp mvc 4形式的回发动作

> ID：13644492
> 
> 赞同：1
> 
> 时间：2012-11-30T11:35:32.280
> 
> 标签：asp.net-mvc

我有一个标准的 ASP MVC 4 表单，用户可以在其中编辑一些详细信息并单击“批准”或“拒绝”，这会导致回发。

当控制器收到回传中的模型时，我怎么知道点击了哪个按钮？

我正在寻找一种标准的方法来做到这一点，所以我不会迷惑下一个从事该项目的开发人员。

编辑我正在使用立柱，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T13:12:01.617

为每个按钮命名（每个按钮相同）和值（每个按钮唯一）。

```
 <button type="submit" name="button" value="approve">Approve</button>
 <button type="submit" name="button" value="decline">Decline</button> 
```

然后将一个字符串参数添加到您的 post 方法，称为您分配给按钮的任何名称。

```
 [HttpPost]
    public ActionResult ProcessForm (Model model, string button)
    {
        //the parameter 'button' will contain the value of the button clicked - either 'approve' or 'decline'
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T11:51:42.470

在每种 html 格式中都遇到了一个棘手的问题。它可以归结为您需要回发多少数据......如果您只需要识别模型并且实际上不需要表单数据，那么可以使用发布到不同控制器的两种不同表单轻松实现：对于下一个开发人员来说非常透明和清晰：

```
<div class="container">

<form method="POST" action="/approve/123">
    <input type="submit">
</form>

<form method="POST" action="/decline/123">
    <input type="submit">
</form>

<div> 
```

或者，如果您确实需要回发表单数据，我会将客户端 onclick 事件附加到相应更新表单操作的每个按钮。然而，对于下一个开发人员来说，这还不是很清楚......

```
<div class="container">

<form method="POST" action="/">
    <input type="submit" value="Accept" id="btn-accept">
        <input type="submit" value="Decline" id="btn-decline">
</form>

</div>

$(function(){
$("#btn-accept").click(funcion(e)({
    e.preventDefault();
    $("form").attr("action", "/approve");
    $("form").submit();
}));
$("#btn-decline").click(funcion(e)({
    e.preventDefault();
    $("form").attr("action", "/decline");
    $("form").submit();
}));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T11:45:45.617

我认为最简单的是，
将拒绝按钮的输入类型从更改`submit`为`button`this 不会回发到控制器，然后您可以使用几行代码将用户重定向到其他页面

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T11:41:47.297

您将要为“批准”或“拒绝”执行两个单独的“操作”，对吗？

我会在你的控制器中有一个批准动作，在你的控制器中有一个拒绝动作，这样他们就可以发布到他们自己的动作，而不是试图在一个控制器动作中处理这两个业务流程。

这将使每个动作的责任清晰明了。

# javascript - 打开/关闭包含 div 和图像

> ID：13644494
> 
> 赞同：3
> 
> 时间：2012-11-30T11:35:40.503
> 
> 标签：javascript, html, css

我正在尝试通过使用 css、javascript 添加/删除活动类来突出显示当前图像。

我将我的解决方案上传到了 jsfiddle，请看一下。真的很想了解这有什么问题。 [http://jsfiddle.net/BEmXZ/39/](http://jsfiddle.net/BEmXZ/39/)

**HTML**

```
<div class="container-thumbs">
    <div><a><img src=".jpg" /></a></div>
    <div><a class="active"><img src=".jpg" /></a></div> 
    <div><a><img src=".jpg" /></a></div>
</div> 
```

**Javascript**

```
var make_button_active = function() {
    //Get item siblings
    var siblings =($(this).siblings());
    //Remove active class on all buttons
    siblings.each(function (index) {
            $(this).removeClass('active');
        }
    );

    //Add the clicked button class
    $(this).addClass('active');
}   

$(document).ready(function() {
    $(".container-thumbs a").click(make_button_active);
}); 
```

**CSS**

```
.container-thumbs{
    width: 300px; height: 25; font-size: 18px;
}
.container-thumbs a{
    list-style: none; float: left; margin-right: 4px; padding: 5px;
}
.container-thumbs div a:hover, .container-thumbs div a.active {
    background-color: #f90;
}​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:42:20.900

`siblings`不起作用，因为您的锚点被包裹在 div 中。尝试：

```
var make_button_active = function() {
    $(".container-thumbs a").removeClass("active");
    $(this).addClass("active");
}

$(document).ready(function() {
    $(".container-thumbs a").click(make_button_active);
});​ 
```

[**演示。**](http://jsfiddle.net/tuKJ3/)（一个新的小提琴，因为你还没有发布你的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T11:43:15.630

试试这个代码：

单击时，它会从所有图像中删除活动类，然后将其应用于当前图像。另外我觉得你根本不需要`make_button_active`功能。

```
$(document).ready(function() {
    $(".container-thumbs a").click(function(){
         $(".container-thumbs a").removeClass("active");
         $(this).addClass("active");
    });
});​ 
```

**[演示](http://jsfiddle.net/7Vbkh/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:50:56.283

如果您将代码更改为此它至少可以工作：

```
 var make_button_active = function()
{
  //Get item siblings

  var siblings = $(".container-thumbs a");      
  siblings.each(function (index)
{
  $(this).removeClass('active');
}
);
  $(this).addClass('active');
}   

 $(document).ready(function() {
$(".container-thumbs a").click(make_button_active); 
```

});

# wcf - 如何在 Azure 中找到 WCF 错误信息？

> ID：13644495
> 
> 赞同：1
> 
> 时间：2012-11-30T11:35:46.613
> 
> 标签：wcf, azure, azure-service-runtime

当我在 Azure 中为少数操作合同方法托管 WCF 服务时，我们遇到了这个异常。它正在从服务器返回已知对象的列表。如果我返回字符串或布尔而不是列表，那么它工作正常。

> {System.ServiceModel.CommunicationException：远程服务器返回错误：NotFound。---> System.Net.WebException：远程服务器返回错误：NotFound。---> System.Net.WebException：远程服务器返回错误：NotFound。在 System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.BrowserHttpWebRequest.<>c_ *DisplayClassa.b* _9(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c_ *DisplayClass4.b*_0(Object sendState) --- 内部异常堆栈跟踪的结束 --- 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System .ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult 结果) --- 内部异常堆栈跟踪结束 --- 在 System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult 结果) 在 System.ServiceModel.Channels。 System.ServiceModel.ClientBase 处的 ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result) at ReportServiceClient.ReportServiceClientChannel.EndGetData(IAsyncResult result) at ReportServiceClient.IReportService.EndGetData(IAsyncResult result) at ReportServiceClient.OnEndGetData(IAsyncResult result) at System.ServiceModel.ClientBase` 1.OnAsyncCallCompleted(IAsyncResult 结果)}

### 笔记：

如果在 Webserver 中托管相同的服务，那么它工作正常。

如何在 Azure 中找到 WCF 错误信息？

如果我在 Webserver 中托管服务，那么我将启用 Service 的跟踪并从 svclog 文件中找到服务失败的确切原因。但我不能在 Azure 中做同样的事情。是否可以在 Azure 中找到错误信息？

# actionscript-3 - Flex PersistenceManager 没有检索我的对象，即使我可以在调试器中看到它

> ID：13644497
> 
> 赞同：0
> 
> 时间：2012-11-30T11:36:03.353
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.6, flex-mobile

我刚刚将一个应用程序从 ViewNavigatorApplication 更改为 TabbedViewNavigatorApplication 并且我的持久性管理器似乎已停止正常工作。

这是有问题的代码：

```
protected function creationCompleteHandler(event:FlexEvent):void
{
    // Populate fields using last activity from storage
    pm.load();

    // Make request, display list of actions
    var registration:Registration = pm.getProperty("registration") as Registration;

    var service:Phonotes = new Phonotes();
    var response:AsyncToken = service.ActionList("actionlist", registration.installationId);
    response.addResponder(new mx.rpc.Responder(onActionListResponse, null));
} 
```

pm 对象是在此范围之外创建的。

出于某种原因，我不断收到此错误： `Main Thread (Suspended: TypeError: Error #1009: Cannot access a property or method of a null object reference.)`

但调试器上的变量选项卡显示`this.pm.so.data.registration`已正确填充。

有人知道发生了什么吗？

我无法在谷歌上找到任何搜索此示例的示例，也无法在此站点上找到，所以我显然做错了，但在我更改应用程序类型之前它正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:52:12.603

忘记了一切。

我在上放置了一个断点`creationCompleteHandler`并再次通过调试器运行它并且*它*工作了......

很好的闪存生成器。

# android - 在android中显示带有镜像的副本图像

> ID：13644501
> 
> 赞同：6
> 
> 时间：2012-11-30T11:36:12.937
> 
> 标签：android, imageview

![在此处输入图像描述](../Images/c8720f5ec4446555a7b46a984b9fc1dc.png)

我想在 android 中使用上述类型的图像视图。

请建议我更好的解决方案来实现这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T11:39:39.657

我使用下面的代码来实现这个效果

```
public Bitmap applyReflection(Drawable drawable) {
    Bitmap originalImage = ((BitmapDrawable)drawable).getBitmap();
    final int reflectionGap = 4;
    int width = originalImage.getWidth();
    int height = originalImage.getHeight();           
    Matrix matrix = new Matrix();
    matrix.preScale(1, -1);
    Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);          
    Bitmap bitmapWithReflection = Bitmap.createBitmap(width, (height + height/2), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmapWithReflection);
    canvas.drawBitmap(originalImage, 0, 0, null);
    Paint defaultPaint = new Paint();
    canvas.drawRect(0, height, width, height + reflectionGap, defaultPaint);
    canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);

    Paint paint = new Paint();
    LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0,

            bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, TileMode.CLAMP);
    paint.setShader(shader);
    paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
    canvas.drawRect(0, height, width, bitmapWithReflection.getHeight() + reflectionGap, paint);

    return bitmapWithReflection;
} 
```

如果您遇到上述代码的任何问题，请告诉我。

学分：http: [//xjaphx.wordpress.com/learning/tutorials/](http://xjaphx.wordpress.com/learning/tutorials/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-30T11:39:05.937

试试这个 ：

```
public static Bitmap reflection(Bitmap mainImage) {
        // gap space between original and reflected
        final int reflectionGap = 4;
        // get image size
        int width = mainImage.getWidth();
        int height = mainImage.getHeight();

        Matrix matrix = new Matrix();
        matrix.preScale(1, -1);

        Bitmap reflectionImage = Bitmap.createBitmap(mainImage, 0,
                height / 2, width, height / 2, matrix, false);

        Bitmap reflectedBitmap = Bitmap.createBitmap(width,
                (height + height / 2), Config.ARGB_8888);

        Canvas canvas = new Canvas(reflectedBitmap);
        canvas.drawBitmap(mainImage, 0, 0, null);
        Paint defaultPaint = new Paint();
        canvas.drawRect(0, height, width, height + reflectionGap, defaultPaint);
        canvas.drawBitmap(reflectionImage, 0, height + reflectionGap, null);
        Paint paint = new Paint();
        LinearGradient shader = new LinearGradient(0,
                mainImage.getHeight(), 0, reflectedBitmap.getHeight()
                        + reflectionGap, 0x70ffffff, 0x00ffffff, TileMode.CLAMP);
        paint.setShader(shader);
        paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
        canvas.drawRect(0, height, width, reflectedBitmap.getHeight()
                + reflectionGap, paint);

        return reflectedBitmap;
    } 
```

# iphone - 以编程方式检测 iPhone 中的 SIM 卡是否可用

> ID：13644502
> 
> 赞同：3
> 
> 时间：2012-11-30T11:36:13.330
> 
> 标签：iphone, objective-c

嗨，我正在使用 SMSComposer 并想从通讯录中向联系人发送短信。我想检测我的 iPhone 中是否有 SIM 卡

有什么办法可以达到这个。？

我尝试了 REachability Classes，但它为您提供了有关 WWAN 和互联网连接的信息。Core Telephony Framework 是否有这样的设施。？iPhone 的运营商名称等类似的东西。？？

任何帮助，将不胜感激。谢谢维卡斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T12:03:40.813

### 斯威夫特/iOS 12+

您可以通过`CoreTelephony`框架进行尝试，例如。

```
let noAvailability = CTTelephonyNetworkInfo()
    .serviceSubscriberCellularProviders?
    .values
    .compactMap { $0.mobileCountryCode }
    .isEmpty ?? false 
```

(of )的*[官方文档](https://developer.apple.com/documentation/coretelephony/ctcarrier/1620309-mobilecountrycode)*包含有关某些边缘情况的更多信息，这可能值得考虑。`mobileCountryCode``CTCarrier`

* * *

### 原始答案

尝试链接`CoreTelephony.framework`然后：

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h>
#import <CoreTelephony/CTCarrier.h>

NSString *_code = [[[[CTTelephonyNetworkInfo alloc] init] subscriberCellularProvider] mobileCountryCode]; 
```

**[您可以在官方文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Reference/CTCarrier/index.html#//apple_ref/occ/instp/CTCarrier/mobileCountryCode)**中找到更多信息，但简要说明：

> 如果以下任何一项适用，则此属性的值是`nil`：
> 
> *   设备中没有 SIM 卡。
>     
>     
> *   该设备不在蜂窝服务范围内。
>     
>     
> 
> 在飞行模式下，该值可能`nil`在 iPhone 4S 之前的硬件上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:39:08.057

为此，您需要添加 MessageUI.framework 框架...

试试这个代码......它可以帮助你

```
Class messageClass = (NSClassFromString(@"MFMessageComposeViewController"));
if([messageClass canSendText]){
    // Sim available
}
else{
    //Sim not available
} 
```

# ruby - Ruby正则表达式：排除撇号，但如果转义则包括它

> ID：13644506
> 
> 赞同：1
> 
> 时间：2012-11-30T11:36:27.347
> 
> 标签：ruby, regex

我正在尝试编写一个 ruby​​ 正则表达式，以便从长字符串（HTML 源代码）中提取一些数据。

从下面的字符串中，我想保留四个数字（1、11、30、90）和第一个单引号字符串（blablabla）

```
AjouterRDV(1, 11, 30, 90, 'blablabla', '123' ... (it goes on) ); 
```

我的正则表达式目前适用于上述示例，但当字符串包含转义撇号时失败，例如

```
AjouterRDV(1, 11, 30, 90, 'it\'s failing!', '123' ... (it goes on) ); 
```

这是我的正则表达式，带有两个示例字符串（一个通过，另一个失败）[-Rubular](http://rubular.com/r/svmuTINl5d)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:01:58.283

一种更简单的方法（假设您不需要匹配捕获后的任何内容）：

```
AjouterRDV\((\d+),(\d+),(\d+),(\d+),'(.+?)', 
```

参见[Rubular 示例](http://rubular.com/r/gRNc5Sy0wS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:45:44.857

你可以试试这个： -

```
/AjouterRDV\( (\d+), (\d+), (\d+), (\d+), '((?:(?<=\\)[']|[^'])*)', .* \);$/ix 
```

`'((?:(?<=\\)[']|[^'])*)'`匹配`'`前面的`\`, 或匹配任何字符，除了`'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T11:51:10.400

嗯，刚刚有人评论，但似乎他删除了它。他的提议是

```
AjouterRDV\( (\d+), (\d+), (\d+), (\d+), '((?<=\\)[']|[^'])*', .* \);$ 
```

这几乎可以工作，除了它没有正确捕获第 5 组。为此，您需要：

```
AjouterRDV\( (\d+), (\d+), (\d+), (\d+), '((?:(?<=\\)[']|[^'])*)', .* \);$ 
```

它将他的“外部”组转换为非捕获组，然后捕获单引号内的选择。

# android - 使 EditText 失去对单击按钮的关注

> ID：13644510
> 
> 赞同：21
> 
> 时间：2012-11-30T11:36:31.527
> 
> 标签：android, android-edittext

我的活动中有两个`EditText`字段和一个 done `button`。当用户按下按钮时，我希望这两个`EditText`字段都失去焦点（即光标不应显示在它们中的任何一个上）。我正在使用以下代码：

```
final Button saveButton = (Button) findViewById(R.id.saveButton);
    saveButton.setOnClickListener(saveButtonListener);

private OnClickListener saveButtonListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
                Text1.clearFocus();
                Text2.clearFocus();

    }

} 
```

但是，当我按下完成按钮时，`Text1`即使我还没有点击任何光标，光标也会出现`EditText`。如何使 EditText 字段放松对单击按钮的关注

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-30T11:47:41.093

尝试将您的代码更改为：

```
private OnClickListener saveButtonListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
                Text1.clearFocus();
                Text2.clearFocus();
                saveButton.requestFocus(); //or any other View
    }

} 
```

因为关于[public void clearFocus ()](http://developer.android.com/reference/android/view/View.html#clearFocus%28%29)的文档：

> 当此视图想要放弃焦点时调用。如果焦点被清除 onFocusChanged(boolean, int, android.graphics.Rect) 被调用。
> 
> **注意：**当视图清除焦点时，框架会尝试将焦点赋予从顶部开始的第一个可聚焦视图。因此，如果这个视图是从顶部开始获得焦点的第一个视图，那么所有与清除焦点相关的回调都将在框架将焦点赋予该视图之后被调用。

意味着您必须在单击按钮时将焦点设置为其他视图，因为`Text1`在您的布局中充当第一个视图

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T12:11:00.980

您可以尝试此代码，只需将焦点移至另一个视图。

```
private OnClickListener saveButtonListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        saveButton.requestFocus(); //any other View
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-01T01:12:32.587

我能找到的最好方法是

```
private void listenToButton(){
    someButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            v.requestFocusFromTouch();
            //Proceed with things
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-10T04:30:31.823

这对我有用：

```
@Override
public void onClick(View v) {

     //To hide soft keyboard          
   InputMethodManager im = (InputMethodManager) getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);
   im.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);

   v.requestFocusFromTouch();

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-05T21:29:55.583

为该按钮设置这些行就可以了。

```
View.OnClickListener listener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        v.setFocusable(true);
        v.setFocusableInTouchMode(true);
        v.requestFocus();
        ......
    }
};
button.setOnClickListener(listener); 
```

为我工作:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T11:49:35.393

您可以`EditText`在布局中创建一个空的隐藏元素。具有 0 宽度和 0 高度的东西。然后在您的点击中您可以调用`hiddenEditText.requestFocus()`；

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-30T11:59:42.743

在按钮单击时使用以下代码：-

```
InputMethodManager imm = (InputMethodManager) view.getContext()
    .getSystemService(Context.INPUT_METHOD_SERVICE);
 imm.hideSoftInputFromWindow(view.getWindowToken(), 0); 
```

# c++ - 结构阵列奇/偶故障

> ID：13644517
> 
> 赞同：1
> 
> 时间：2012-11-30T11:36:55.403
> 
> 标签：c++, structure

我的程序生成一个带有随机数的文本文件，例如：

```
123
1234
12345
123456 
```

程序接收该文件并将随机数据放入结构数组中。然后它处理数组并输出一个如下所示的文件：

基于上述infile.txt产生的outfile.txt：

```
No      Type Odd Even Sum Digit
1234    Even 2   2    10  4
23467   Odd  2   3    22  5
123     Odd  2   1    6   3 
```

但是我遇到的问题是一切都很好并且符合预期，除了我的奇数/偶数停止在每隔一行工作！例如，第一行，它会输出正确的结果，第二行它不会，第三行它会再次工作，依此类推。

```
//oddcount, evencount. (WORKS, BUT ONLY EVERY OTHER LINE)

int countEven;
int countOdd;

for (int i = 0; i < size; i++)
{
    countEven = 0;
    countOdd = 0;
    while (t[i].no > 0)
    {
        if (t[i].no % 2 == 1)
        {
            countOdd++;
            t[i].no/= 10;
        }
        else
        {
            countEven++;
            t[i].no/=10;
        }
        n[i].oddDigits = countOdd;
        n[i].evenDigits = countEven;
    } i++;

} 
```

这是完整的代码。

```
#include <iostream>
#include <fstream>
#include <ctime>
#include <cstdlib>
#include <iomanip>

using namespace std;

const int MAX = 100;

enum NumType {Odd, Even};

struct Number
{
    int no;
    NumType type;
    int oddDigits;
    int evenDigits;
    int sumDigits;
    int noDigits;
};

void arrayToOutfile (ofstream&, char [], Number [], int);
void constructInfile (fstream&, char []);
int constructArray (fstream&, char [], Number []);
void processArray (Number [], int);
NumType whatType (int);
void getStringLabel (NumType, char []);

int main ()
{
    srand (time_t(NULL));
    fstream inFile;
    char fileName [MAX];

    cout << "Enter filename: ";
    cin >> fileName;

    constructInfile (inFile, fileName);

    cout << "----------------------------------------" << endl;

    Number n [MAX];

    int size = constructArray(inFile, fileName, n);

    processArray (n, size);

    cout << "----------------------------------------" << endl;

    ofstream outFile;

    cout << "Enter the output filename: ";
    cin >> fileName;

    arrayToOutfile (outFile, fileName, n, size);
}

void constructInfile (fstream& inFile, char fileName[])
{
    inFile.open (fileName, ios::out);

    if (!inFile)
    {
        cout << fileName << " cant be created for write"
        << endl;

        exit (-1);
    }

    int size = rand() % 51+ 50;
    for (int i = 0; i < size; i++)
    {
        inFile << rand () % 901 + 100 << endl
        << rand () % 90001 + 10000 << endl
        << rand () % 900001 + 100000 << endl;
        i++;
    }

    cout << "written to outfile successfully" << endl;

    inFile.close();

}

int constructArray (fstream& inFile, char fileName[], Number n[])
{
    inFile.open (fileName, ios::in);

    if (!inFile)
    {
        cout << fileName << " cant be accessed for array creation."
        << endl;
        exit (-1);
    }
    cout << "Begin file to array" << endl;
    int i = 0;
    while (inFile >> n[i].no)
    {
        ++i;
    }

    inFile.close();
    cout << "File to array transfer success" << endl;

    return i;

}

void processArray (Number n [], int size)
{

    cout << "Begin processing array" << endl;
    //Odd or Even Enum Label
    for (int i = 0; i < size; i++)
    {
        n[i].type = whatType (n[i].no);
    }

//copy number n array to temp n array
    Number t [MAX];

    for (int i = 0; i < size; i++)
    {
        t[i].no = n[i].no;
    }

    for (int i = 0; i <size; i++)
    {
        n[i].evenDigits = 0;
        n[i].oddDigits = 0;
    }

//oddcount, evencount. (WORKS, BUT ONLY EVERY OTHER LINE)

    int countEven;
    int countOdd;

    for (int i = 0; i < size; i++)
    {
        countEven = 0;
        countOdd = 0;
        while (t[i].no > 0)
        {
            if (t[i].no % 2 == 1)
            {
                countOdd++;
                t[i].no/= 10;
            }
            else
            {
                countEven++;
                t[i].no/=10;
            }
            n[i].oddDigits = countOdd;
            n[i].evenDigits = countEven;
        } i++;

    }

    //copy number n array to temp n array again.
    for (int i = 0; i < size; i++)
    {
        t[i].no = n[i].no;
    }

    //Sum digits    (WORKS!!!)
    //SET TO DEFAULT 0 FOR SUMDIGITS

    for (int i = 0; i <size; i++)
    {
        n[i].sumDigits = 0;
    }

    for (int i = 0; i < size;)
    {
        while (t[i].no > 0)
        {
            n[i].sumDigits = n[i].sumDigits + t[i].no % 10;
            t[i].no /= 10;
        }i++;
    }

    //copy number n array to temp n array again.
    for (int i = 0; i < size; i++)
    {
        t[i].no = n[i].no;
    }
    //SET TO DEFAULT 0 for COUNT DIGITS
    for (int i = 0; i <size; i++)
    {
        n[i].noDigits = 0;
    }

    //DIGIT COUNT
    for ( int i = 0; i < size; i++)
    {
        int countDigits = 0;

        while (t[i].no != 0)
        {
            t[i].no /= 10;
            countDigits++;
        }
        n[i].noDigits = countDigits;
    }

    for (int i = 0; i < size; i++)
    {

    }

    cout << "The array was processed" << endl;
}
//Enumerated Number type.
NumType whatType (int n)
{

    if (n % 10 % 2 == 1)
        return Odd;
    else
        return Even;
}
//From Array to Outfile.
void arrayToOutfile (ofstream& outFile, char fileName[], Number n[], int size)
{
    outFile.open (fileName);

    if (!outFile)
    {
        cout << "Array to " << fileName << " failed" << endl;
        exit (-1);
    }

    cout << "Begin from array to " << fileName << endl;

    cout << fixed << showpoint << setprecision (3);

   char label [MAX];

    outFile << "No" << "\t"
    << "Type" << "\t"
    << "Odd" << "\t"
    << "Even" << "\t"
    << "Sum" << "\t"
    << "Digit"
    << endl;

    for (int i = 0; i < size; i++)
    {
        getStringLabel (n[i].type, label);

        outFile << n[i].no << "\t"
        << label << "\t"
        << n[i].oddDigits << "\t"
        << n[i].evenDigits << "\t"
        << n[i].sumDigits << "\t"
        << n[i].noDigits << endl;
    }

    outFile.close();

    cout << "Array to outfile OK" << endl;
}

//Enumeration String label
void getStringLabel (NumType type, char label[])
{

        switch (type)
    {
        case Odd:   strcpy (label, "Odd");
            break;
        case Even:  strcpy (label, "Even");
            break;
        default:    strcpy (label, "err");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:43:56.037

你调用 i++ 两次，一次在 for(...) 中，第二次在 for 循环体中，在 while 体结束之后。

# asp.net - ASP.net 应用程序在编译后失败

> ID：13644518
> 
> 赞同：0
> 
> 时间：2012-11-30T11:36:58.397
> 
> 标签：asp.net, compilation

当我获取网站中的所有文件并将其部署在另一台服务器上而不编译它们时，它可以正常工作。但是，如果我发布网站，我会收到以下错误：

`The file '/xxxxxx.aspx' has not been pre-compiled, and cannot be requested`

我完全困惑，不知道如何解决这个问题。编译过程中似乎出了点问题。

部署服务器是 Windows 2008R2。我在 WinXPx32 和 Win7x64 上都进行了编译，但得到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:14:16.953

通常，此错误具有误导性，10 次中有 9 次是由于缺少程序集。你检查过组件吗？

检查：[http ://forums.asp.net/t/956297.aspx](http://forums.asp.net/t/956297.aspx)

# c++ - 用于检查编译时常量的静态断言未传递给宏

> ID：13644519
> 
> 赞同：3
> 
> 时间：2012-11-30T11:37:07.303
> 
> 标签：c++, visual-c++, sfinae, static-assert, compile-time-constant

**前言：**

```
switch(nValue)
{
case X:
...
case Y:
...
default:
   ASSERT_FOR_DEFAULT(nValue);
} 
```

`ASSERT_FOR_DEFAULT`是一个宏，它将显示一个（自定义）断言对话框，以报告命中“默认情况”。是的，这个宏用于运行时断言，而不是编译时断言。但是，我只需要这样，任何常量值（编译时）都不能传递给这个宏。

**问题：**

以下应该在编译时**失败：**

```
ASSERT_FOR_DEFAULT(5); 
```

是的，程序员可以在任何地方使用它，而不仅仅是`default`在`switch-case`. 他也可以使用任何未使用的表达式`switch`。但这不是问题。只需要将非常量传递给这个宏。

没有为这个宏写任何重要的东西，假设它是`ASSERT`/ `assert`。

我尝试过使用模板（使用它们其他 SFINAE/静态断言！）、数组（如`strcpy_s`）、拥有的结构`YES`、`NO`类型等等。但是找不到解决办法！

我正在使用VC2008。我知道`static_assert`等`decltype`，但不能使用 C++0x。

* * *

**编辑（解决方案）：**

```
#define STATIC_ASSERT(expr) {int array[!!(expr)]; expr;}

template <class T>  
bool noConstAllowed(T&);

int noConstAllowed(...);

#define ASSERT_FOR_DEFAULT_VALUE(val)                \
{                                                  \
    STATIC_ASSERT(sizeof(noConstAllowed(val))==sizeof(bool));   \
}

int main()
{
    int test=10;

    ASSERT_FOR_DEFAULT_VALUE(test);
    ASSERT_FOR_DEFAULT_VALUE(2);
    ASSERT_FOR_DEFAULT_VALUE(test+2);  //FAILS, but okay for me! 
} 
```

感谢 Arne Mertz 提出的这个可爱的建议。我从中得出了解决方案。 `noConstAllowed`为所有`T&`类型重载，如果传递了常量值，将调用另一个重载。两者都有不同的返回类型，因此检查大小。模板版本返回 a `bool`，它满足任何传递的变量的断言，并且对于任何常量或表达式都失败（因为返回类型将为`int`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:42:48.720

您可以重新定义宏，以便它获取参数的地址——这对于文字来说应该是失败的。但是，这不会阻止您传递一个常量变量，例如

```
const static int FIVE = 5;
ASSERT_FOR_DEFAULT(FIVE); // still works. 
```

要禁止*将*各种常量传递给您的宏，请调用一个通过非常量引用获取参数的函数：

```
template <class T>  void noConstAllowed(T&){};
#define ASSERT_FOR_DEFAULT_VALUE(val)                \
  {                                                  \
    (void*)&(val);         /* no literals*/          \
    noConstAllowed(val);   /* no constants at all */ \
    switchHitDefaultDialog(val, __FILE__, __LINE__); \
  } 
```

我想你使用类似**FILE**或其他位置宏的东西，或者你会把它变成一个函数。其中，您只需要使用两条线之一。

# controller - 从控制器重定向到 j_spring_security_logout

> ID：13644520
> 
> 赞同：1
> 
> 时间：2012-11-30T11:37:15.073
> 
> 标签：controller, spring-security, logout

我有一个带有 2 个按钮“保存”和“关闭”的表单的页面，它们都调用相同的方法，如果我检测到关闭按钮被按下，我应该重定向到 Spring Security 注销......但是当我这样做时我在 tomcat 中收到 404 错误：

```
Estado HTTP 404 - /SICCO/WEB-INF/jsp/j_spring_security_logout.jsp

type Informe de estado

mensaje /MyWebapp/WEB-INF/jsp/j_spring_security_logout.jsp

descripción El recurso requerido (/MyWebapp/WEB-INF/jsp/j_spring_security_logout.jsp) no está disponible. 
```

这段代码是：

```
@RequestMapping("guardar") 
public String guardar(Model model, @ModelAttribute("precol")Precolonoscopia precol, HttpServletRequest request) {

    if (WebUtils.hasSubmitParameter(request, "cerrar")) {
        return "j_spring_security_logout";
    }
        //things...
    return "/other/page";
} 
```

我也试过

```
return "/j_spring_security_logout" 
```

但我得到了同样的错误。

我有另一个直接调用 Spring Security Logout 的 jsp：

```
<c:url value="/j_spring_security_logout" var="url" />
<form action="${url}" method="post">
    <button name="cerrar"><s:message code="myapp.cerrar"/></button>
</form> 
```

这按预期工作......

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:19:22.623

我刚刚想出了解决方案：

```
return "redirect:/j_spring_security_logout" 
```

诀窍:)

# iphone - 弹出一个基本视图。它会弹出所有子视图吗？

> ID：13644521
> 
> 赞同：1
> 
> 时间：2012-11-30T11:37:16.337
> 
> 标签：iphone, ios, cocoa-touch, uiview, uinavigationcontroller

我使用导航控制器推送了一个视图（例如：first_view），从该视图中我推送了一些其他视图，在一种情况下，事件将通知第一个视图弹出，在这种情况下，如果我直接弹出视图会通过释放它的记忆来正确地弹出它的所有子视图？或者我是否需要通知所有子视图相应地弹出。

希望我的问题可以理解:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:42:31.243

您可以通过两种方式返回 ParentView 例如。

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

或者

如果你`view1`在推入`view2`之后`view3`然后如果你想弹出到 view2 那么你可以设置索引为 1 和`view1`索引为 0

```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:0] animated:YES];// set index of viewControler which you want to display 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:50:57.290

如果你已经 push`viewController1, viewController2, viewController3`并且`viewController4`in`UINavigationController`并且你调用`[self.navigationController popToViewController:viewController1];`或者`[self.navigationController popToRootViewController];`这将自动从导航堆栈中弹出`viewController2`和弹出。`viewController3`您不需要明确弹出它们。

# android - GoogleTV 上的 Google 云消息传递

> ID：13644522
> 
> 赞同：0
> 
> 时间：2012-11-30T11:37:19.737
> 
> 标签：android, google-tv

我想通过 Internet 从我的 Tornado 网络服务器接收实时推送通知到我的 GoogleTV。我知道 Google Cloud 消息传递是我必须向 Android 设备发送通知的一种选择。只是想确认在我开始之前我不会对 GoogleTV 上的 GCM 有任何问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:30:23.943

它会起作用的。应该没有问题。

** 实际上，在我写这篇文章的时候，它预计会起作用。但是，GSF 不在当前版本的 Google TV 上。我们希望在 JB 版本中解决这个问题。**

# c# - cryptico.js 加密消息，必须在 C# 中解密

> ID：13644525
> 
> 赞同：3
> 
> 时间：2012-11-30T11:37:29.573
> 
> 标签：c#, javascript, public-key-encryption, cryptico

我需要能够使用 C# 解密服务器上的字符串，但该字符串是使用公钥加密和客户端上的 cryptico.js 加密的。有关详细信息，请参阅末尾的上下文。

Cryptico 给了我一个这样的私有 RSA 密钥（注意 - 'like' this - 我为这个问题创建了一个新密钥）：

```
Array ( [n] => 8029845567507477803775928519657066509146751167600087041355508603090505634905205233922950527978886894355290423984597739819216469551137046641801207199138209 [e] => 3 [d] => 5353230378338318535850619013104711006097834111733391360903672402060337089936682996269976597251251223844095913209399106464214877696419418951728015128013411 [p] => 102067954277225510613941189336789903269738979633396754230261162567549753196947 [q] => 78671563708406591396117399809764267229341143260756252277657051641634753921147 [dmp1] => 68045302851483673742627459557859935513159319755597836153507441711699835464631 [dmq1] => 52447709138937727597411599873176178152894095507170834851771367761089835947431 [coeff] => 26458340158787140383846156526777567128582042036682248240414722856369310516021 
```

...加上一堆方法。

我正在尝试解密它：

```
 RSAParameters parameters = new RSAParameters();

            System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();

            parameters.Exponent = encoding.GetBytes("3");

            //dmp1
            parameters.DP =
                encoding.GetBytes("68045302851483673742627459557859935513159319755597836153507441711699835464631");

            //dmq1
            parameters.DQ =
                encoding.GetBytes("52447709138937727597411599873176178152894095507170834851771367761089835947431");

            //d
            parameters.D =
                encoding.GetBytes(
                    "5353230378338318535850619013104711006097834111733391360903672402060337089936682996269976597251251223844095913209399106464214877696419418951728015128013411");

            //p
            parameters.P =
                encoding.GetBytes("102067954277225510613941189336789903269738979633396754230261162567549753196947");

            //q
            parameters.Q =
                encoding.GetBytes("78671563708406591396117399809764267229341143260756252277657051641634753921147");

            //n
            parameters.InverseQ =
                encoding.GetBytes(
                    "8029845567507477803775928519657066509146751167600087041355508603090505634905205233922950527978886894355290423984597739819216469551137046641801207199138209");

            //coeff
            parameters.Modulus =
                encoding.GetBytes("26458340158787140383846156526777567128582042036682248240414722856369310516021");

            RSA rsa = new RSACryptoServiceProvider();
            rsa.ImportParameters(parameters);

            var decryptThis = encoding.GetBytes(ciphertext);

            var result = rsa.DecryptValue(decryptThis);

            resultString = encoding.GetString(result); 
```

但这会抛出异常“坏数据”。

有没有比 C# 更有经验的人知道我哪里出错了？

谢谢，

G

* * *

上下文详细信息：我正在尝试在应用程序的客户端和服务器端实现密码强度检查功能，但仅在服务器端使用代码。为了在客户端实现这一点，我想将假定的密码发送到服务器，判断它的强度，然后返回一个显示在客户端上的分数。这意味着我只需要在服务器上维护密码强度检查代码。作为一项额外的安全措施，我使用 cryptico.js 库对假定密码进行加密，然后将其发送到服务器进行判断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:05:47.263

BigInteger 和 RSAParameter 类以不同的格式存储数字。

BigInteger 将数字存储为 little-endian - 这意味着如果您创建一个 BigInteger 来保存十六进制数字**0xABCD** (43981) - ToByteArray 将返回字节 { **0xCD, 0xAB, 0x00** }（稍后会详细介绍额外的零）。

RSAParameter 旨在以大端格式存储数字。这意味着写入例如 Exponent 属性的字节 { **0xCD, 0xAB, 0x00 } 将被 RSA 实现解释为数字****0xCDAB00** (13478656)。

让事情变得更复杂 - RSAParameters 总是正数，而 BigInteger 支持符号。和相同的数字，0xFF - 将被不同地解释。对于 RSA，它是十进制的 255。对于 BigInteger，它意味着 -1，因为它将最高有效位解释为符号。这就是为什么要添加零 - 在构造时，BigInteger 知道我们正在传递正值 43981。但是将此值存储为两个字节会产生负数（-21555），因为最高位设置为字节**0xCD**（11001101 in二进制）。所以 BigInteger 加零表示正数。自己试试：

```
Console.WriteLine(new BigInteger(new byte[]{0xCD,0xAB}));
Console.WriteLine(BitConverter.ToString(new BigInteger(0xABCD).ToByteArray())); 
```

因此，我们将大整数作为十进制字符串“1234567...”传递给我们，我们希望将其转换为 RSA 使用的表示形式。为了做到这一点，我们需要：

1.  将字符串解析为 BigInteger。
2.  提取 BigInteger 字节。
3.  确保 BigInteger 没有添加任何前导零来补偿符号。
4.  将数组反转回大端形式，并提供给 RSA。

代码（使用您的参数）：

```
using System;
using System.Numerics;
using System.Security.Cryptography;
using System.Text;

class App
{
    static void Main()
    {
      var parameters = new RSAParameters();
      parameters.Exponent=B("3"); 
      parameters.Modulus=B("8029845567507477803775928519657066509146751167600087041355508603090505634905205233922950527978886894355290423984597739819216469551137046641801207199138209"); 
      parameters.D=B("5353230378338318535850619013104711006097834111733391360903672402060337089936682996269976597251251223844095913209399106464214877696419418951728015128013411");
      parameters.P=B("102067954277225510613941189336789903269738979633396754230261162567549753196947");
      parameters.Q=B("78671563708406591396117399809764267229341143260756252277657051641634753921147");
      parameters.DP=B("68045302851483673742627459557859935513159319755597836153507441711699835464631");
      parameters.DQ=B("52447709138937727597411599873176178152894095507170834851771367761089835947431");
      parameters.InverseQ=B("26458340158787140383846156526777567128582042036682248240414722856369310516021");

      var rsa = new RSACryptoServiceProvider();
      rsa.ImportParameters(parameters);
      var ciphertext = rsa.Encrypt(Encoding.ASCII.GetBytes("Hello"), false);
      Console.WriteLine(Encoding.ASCII.GetString(rsa.Decrypt(ciphertext, false)));
    }

    static byte[] B(string s)
    {
      var b = BigInteger.Parse(s);
      var ret = b.ToByteArray();
      if (ret[ret.Length - 1] == 0) 
      {
        Array.Resize(ref ret, ret.Length - 1);
      }
      Array.Reverse(ret);
      return ret;
    }
} 
```

# git - git 合并完整性检查

> ID：13644527
> 
> 赞同：1
> 
> 时间：2012-11-30T11:37:31.427
> 
> 标签：git, git-merge

开发人员 A 正在开发分支 2012A

我分支 2012A，并创建分支 2012B

我想要 2012A 的所有新变化，所以我只想将它们合并到 2012B 中并继续工作。

这看起来可以作为工作流程吗？

```
git checkout 2012A (switch to 2012A)
git pull origin 2012A (update 2012A)
git checkout 2012B (switch to 2012B)

git merge 2012A (merge in 2012A)
git commit -m 'commiting changes from 2012A' (commit changes from 2012A in 2012B) 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:53:11.877

It should work, however you could do it in a simpler way:

**directly from branch `2012B`**:

```
git fetch origin
git merge origin/2012A 
```

* * *

Note that you are not required to have a local branch for `2012A`: if have a repository in your *remotes* (here your remote is `origin`) you usually carry the snapshots of the remote branches. You can see them by running:

```
git branch -a 
```

(See the `remotes/...` entries of the output)

The `git fetch` command updates the snapshots, so `git fetch origin` updates your local images of the remote branches in `origin`, and `git merge origin/2012A` merges such image into the current branch (i.e. applies the patches of `origin/2012A` on `2012B`).

* * *

Suggested article: [http://longair.net/blog/2009/04/16/git-fetch-and-merge/](http://longair.net/blog/2009/04/16/git-fetch-and-merge/)

# r - 如何创建堆积线图

> ID：13644529
> 
> 赞同：16
> 
> 时间：2012-11-30T11:37:38.303
> 
> 标签：r, charts, diagram

在 R 中创建堆积条形图有多种解决方案，但是如何绘制堆积线图？

![在此处输入图像描述](../Images/ae5677ec358eac736115ac79abd82e6b.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T13:12:08.043

可以使用`ggplot2`包创建堆叠线图。

一些示例数据：

```
set.seed(11)
df <- data.frame(a = rlnorm(30), b = 1:10, c = rep(LETTERS[1:3], each = 10)) 
```

这种情节的功能是`geom_area`：

```
library(ggplot2)
ggplot(df, aes(x = b, y = a, fill = c)) + geom_area(position = 'stack') 
```

![在此处输入图像描述](../Images/185d4a272704f8fedd72b4482204c94e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T11:37:38.303

鉴于图表数据可作为数据框使用，列中有“线”，行中有 Y 值，并且 row.names 是 X 值，此脚本使用多边形函数创建堆叠折线图。

```
stackplot = function(data, ylim=NA, main=NA, colors=NA, xlab=NA, ylab=NA) {
  # stacked line plot
  if (is.na(ylim)) {
    ylim=c(0, max(rowSums(data, na.rm=T)))
  }
  if (is.na(colors)) {
    colors = c("green","red","lightgray","blue","orange","purple", "yellow")
  }
  xval = as.numeric(row.names(data))
  summary = rep(0, nrow(data))
  recent = summary

  # Create empty plot
  plot(c(-100), c(-100), xlim=c(min(xval, na.rm=T), max(xval, na.rm=T)), ylim=ylim, main=main, xlab=xlab, ylab=ylab)

  # One polygon per column
  cols = names(data)
  for (c in 1:length(cols)) {
    current = data[[cols[[c]]]]
    summary = summary + current
    polygon(
      x=c(xval, rev(xval)),
      y=c(summary, rev(recent)),
      col=colors[[c]]
    )
    recent = summary
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T14:19:06.850

只需`position = "stack"`在`geom_line(position = "stack")`. 例如：

```
dat <- data.frame(x = c(1:5,1:5),
              y = c(9:5, 10,7,5,3,1),
              type = rep(c("a", "b"), each = 5))

library(dplyr)
library(ggplot2)

dat %>% 
  ggplot(aes(fill = type,
             x = x,
             y = y,
         color = type,
         linetype = type)) +
  geom_line(position = "stack", size = 2) + # specify it here
  theme_bw() 
```

导致堆积线图：

[![在此处输入图像描述](../Images/551b0b3d3ff05ed83b2d08b111968a98.png)](https://i.stack.imgur.com/W89m4.png)

或者，您也可以将堆积线图与`geom_area`图结合起来[，如下所示](https://stackoverflow.com/questions/63599077/r-ggplot2-geom-area-get-linetype-by-group/63599188#63599188)：

```
 dat %>% 
  ggplot(aes(fill = type,
             x = x,
             y = y,
         color = type,
         linetype = type)) +
  geom_area(position="stack", 
            stat="identity",
            alpha = 0.5) +
  geom_line(position = "stack", size = 2) + 
  theme_bw() 
```

[![在此处输入图像描述](../Images/7cc7584e7bf78022ef1c440aad26f9be.png)](https://i.stack.imgur.com/Xruwf.png)

# java - 为什么 ZipFile(file, ZipFile.OPEN_READ) 不适用于 GZip

> ID：13644538
> 
> 赞同：5
> 
> 时间：2012-11-30T11:37:56.077
> 
> 标签：java, zip, gzip

我正在解压缩 Zip 档案。因为有两种类型的档案 - Zip 和 GZip。

我正在使用以下

```
ZipFile zipFile = new ZipFile(file, ZipFile.OPEN_READ); 
```

但是对于 GZip 类型的档案，它会出现以下错误

```
java.util.zip.ZipException: error in opening zip file
at java.util.zip.ZipFile.open(Native Method) 
```

此代码适用于 Zip 压缩类型档案，不适用于 GZip

有没有办法使用上面的代码，因为我有在各种功能中使用 ZipFile 的现有功能。如果我将 ZipFile 接口更改为 ZipInputStream 或 GZipInputStream，那么我需要更改多项内容。

编辑：如果传入的档案是 Zip 和 GZip 类型，我是否需要根据@Joachim Sauer 的评论进行不同的实施

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:49:27.180

正如@Joachim_Sauer 已经说过的，它们是苹果和李子。

看看 apache 的[compress](http://commons.apache.org/compress/)，它可以处理（以及更多）压缩/归档类型。但是，您需要执行不同的实现，并且您必须自己确定要使用的实现（无论您处理 zip 文件还是 gzip 文件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T12:51:35.440

[Zip](http://en.wikipedia.org/wiki/ZIP_%28file_format%29)和[gzip](http://en.wikipedia.org/wiki/GZip)是两种完全不同的文件格式。看看`java.util.zip.GZIPOutputStream`和`java.util.zip.GZIPInputStream`：

```
InputStream in = new BufferedInputStream(
    new GZIPInputStream( new FileInputStream( file) )
); 
```

# android - 如何创建可以作为 APK 安装或从市场安装的 Android 应用程序插件/扩展？

> ID：13644539
> 
> 赞同：18
> 
> 时间：2012-11-30T11:37:58.883
> 
> 标签：android

我实际上正在研究满足以下要求的应用程序的可能性：

*   主应用程序可能有 5 个停用的功能
*   如果您尝试使用已停用的功能，该应用程序会邀请您下载可以作为 APK 安装或从市场安装的扩展程序。
*   一旦安装了该功能，它就会被激活，然后就可以使用了。

所以我们可以有一些免费/非免费的功能。我已经在某些应用程序中看到过这种行为，但我不记得名字了。

Android SDK中有什么东西可以使用吗？如何实施？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T11:46:23.870

您可以使用 Service 创建 apk 并使用[http://developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)连接到此服务。而且这项服务可以做你想做的事，所以只有你的想象力才是你的极限；-)

我建议阅读以下内容：http: [//developer.android.com/guide/topics/manifest/manifest-element.html#uid](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)可以在 2 个或更多应用程序之间共享更多数据。但是他们应该用相同的键来唱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T11:56:16.430

不确定这是否是您要找的东西，但让我建议一些让您入门的东西（*可能*）

举例来说，例如，在您的应用程序中，您有 2 个按钮（而不是 5 个）

按钮 1 和按钮 2。

启动应用程序时，检查是否安装了必要的应用程序（您自己的应用程序的第三方）或未使用[`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html)

这是我在我的应用程序中使用的伪代码，用于检查用户设备上是否安装了 Google 地图：

```
boolean installedMaps = false;

// CHECK IF AN APPLICATION IS INSTALLED
PackageManager pkManager = getPackageManager();
try {
    PackageInfo pkInfo = pkManager.getPackageInfo("com.google.android.apps.maps", 0); // REPLACE THIS "com.google.android.apps.maps" WITH THE ACTUAL PACAKAGE NAME
    // Log.e("pkInfo", pkInfo.toString());
    installedMaps = true;
} catch (NameNotFoundException e) {
    e.printStackTrace();
    installedMaps = false;
} 
```

如果`boolean installedMaps`返回**true**，则启用按钮。否则，使用对话框提示用户从 Google Play 下载应用程序。

并为您需要激活或停用的每个功能执行此操作。

注意：您需要知道其他应用程序的包名称。如果您不知道，可以通过在您的设备上运行应用程序并检查 logcat 来找到它。

如果您还需要在所有相关应用程序之间共享内容，您也可以考虑使用[`Content Providers`](http://developer.android.com/guide/topics/providers/content-providers.html)

同样，我不完全确定这是否是您正在寻找的。如果我的假设有误，请纠正。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T11:52:08.997

您必须构建 6 个不同的应用程序/apk 并将它们提交到 Play 商店。至少有 2 个选项可以将应用程序集成在一起：

1.  如果您的功能采用全屏显示，那么您可以从插件应用程序中启动适当的活动。
2.  如果主屏幕（来自主应用程序的屏幕）应包含代码（功能）、来自插件应用程序的资源（布局、图像等），请查看[http://developer.android.com/guide/topics/manifest/manifest-element .html#uid](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)。使用该配置，您可以通过类名反射从插件应用程序访问代码。

您还可以使用 Resources res = mPackageManager.getResourcesForApplication("org.example.foo"); 从另一个 apk 访问资源 请参阅[是否可以在不使用内容提供程序的情况下访问另一个 APK 中的资源？](https://stackoverflow.com/questions/4593046/is-it-possible-to-access-resources-in-another-apk-without-using-content-provider)更多细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T11:59:56.640

首先-您所说的“附加功能”到底是什么意思。问题相当复杂。

1.  检查应用程序是否存在 - 只需使用`PackageManager`并尝试找到所需的包，如果发现则使用它，如果不要求用户安装。
2.  资源访问（图像、布局等） - 也包括`PackageManager`
3.  使用代码的某些部分 - 许多不同的方式来获得效果。意图 (startActivityForResult())，内容提供者。

引入免费/付费功能的更好方法可能是使用应用内支付。

# nfc - 打开 NFC 模拟器（NFC 不可用）

> ID：13644544
> 
> 赞同：6
> 
> 时间：2012-11-30T11:38:28.550
> 
> 标签：nfc, open-nfc

我已按照设置 Open NFC Emulator 的步骤进行操作。当我尝试模拟器设置时

选择`Settings->Wireless & networks->NFC settings`

新创建的 AVD 不允许任何更改。NFC 设置的复选框被禁用，在它下面我有`(Android Beam Unavailable because NFC is turned off)`

如何应用 NFC 设置？如何在模拟器中开启 NFC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:44:25.550

当您使用 OpenNFC 插件创建 AVD 时，可以激活 NFC。

但它不是在设置中完成，而是在单独的应用程序“设置 OpenNFC”中完成。

有关设置 OpenNFC 模拟器的完整算法，请参阅[此处](https://stackoverflow.com/a/6944968/222892)。

# c++ - c++ 动态分配二维数组

> ID：13644549
> 
> 赞同：0
> 
> 时间：2012-11-30T11:38:37.747
> 
> 标签：c++, arrays, dynamic, 2d, allocation

我想制作一个动态分配的二维数组，但我真的不知道该怎么做。我已经搜索了谷歌和所有内容，但无法使其正常工作。到目前为止，我的代码是：

postaH.h：

```
#ifndef POSTAHH
#define POSTAHH
#include <vector>
#include <string>
#include <iostream>
#include "feladoH.h"

using namespace std;

class postaH : public feladoH{
  private:
          int szertekek[7];
          string szovegek[7];
          int a,b;
          int** szamosszesit;
          string d,c;
          string** szovosszesit;
  public:
         postaH();
         postaH(int szertekek[7], string szovegek[7],int,int,string,string);
         ~postaH();
         postaH(postaH& pos);
         int getSzertek();
         string getSzovegek();
         void setSzertek(int ir,int hsz,int szulev, int cir, int chsz,int surg, int suly);
         void setSzovegek(string nev,string varos,string utca,string cnev,string cvaros,string cutca,string cstipus);
         void hozzaad();
         void fajlbakiir();
};
#endif 
```

postaS.cpp:

```
#include <string>
#include <iostream>
#include <fstream>
#include "postaH.h"

int seged = 0;

using namespace std;

postaH::postaH(){
          int szertekek[7];
          string szovegek[7];     
          int** szamosszesit;
          string** szovosszesit;
   }

postaH::postaH(int szertekek[7], string szovegek[7],int aa,int bb,string dd,string cc)     : a(aa),b(bb),d(dd),c(cc){
   this->szertekek[7] = szertekek[7];
   this->szovegek[7] = szovegek[7];
    szamosszesit = new int*[a];
for (int i = 0; i<a; i++){
        szamosszesit[i] = new int[b];
    }
    for (int i = 0; i<a; i++){
    for (int j = 0; j<b; j++){
        szamosszesit[i][j] = 0;
    }
szovosszesit = new string*[d];
for (int i = 0; i<d; i++){
    szovosszesit[i] = new string[d];
}
for (int i = 0; i<d; i++){
    for (int j = 0; j<c; j++){
        szovosszesit[i][j] = 0;
        }
}

postaH::~postaH(){
              delete [] szertekek;
              delete [] szovegek;
              for (int i = 0; i<a; i++){
                  delete [] szamosszesit[i];
                    } 
                    delete [] szamosszesit;
            for (int i = 0; i<d; i++){
                  delete [] szovosszesit[i];
                    } 
                        delete [] szovosszesit;
}

postaH::postaH(postaH& pos){
   this->szertekek[7] = pos.getSzertek();
   this->szovegek[7] = pos.getSzovegek(); 
    }

int postaH::getSzertek(){
return szertekek[7];
}

std::string postaH::getSzovegek(){
return szovegek[7];        
}

void postaH::setSzertek(int ir,int hsz,int szulev, int cir, int chsz,int surg, int suly){
 this->szertekek[0] = ir;
 this->szertekek[1] = hsz;
 this->szertekek[2] = szulev;
 this->szertekek[3] = cir;
 this->szertekek[4] = chsz;
 this->szertekek[5] = surg;
 this->szertekek[6] = suly;
}

void postaH::setSzovegek(string nev,string varos,string utca,string cnev,string cvaros,string cutca,string cstipus){
 this->szovegek[0] = nev;
 this->szovegek[1] = varos;
 this->szovegek[2] = utca;
 this->szovegek[3] = cnev;
 this->szovegek[4] = cvaros;
 this->szovegek[5] = cutca;
 this->szovegek[6] = cstipus;
}

void postaH::hozzaad(){

}

void postaH::fajlbakiir(){
 ofstream kezb;
 kezb.open ("kezbesitett.txt", ios::app);
 for( int i=0;i<7;i++){
      kezb << szovegek[i] << ",";
      kezb << szertekek[i] << ",";
      }
 kezb << "\n";
 kezb.close();
} 
```

所以我的问题基本上是我应该如何在头文件中进行声明，以及 cpp 文件中的构造函数、析构函数如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:59:26.097

通常，如果您要创建一个数组，最好使用适合该任务的容器：

*   `std::vector`用于项目的顺序容器。
*   `std::deque`对于需要从任一端更新的项目的顺序容器。
*   `std::list`对于将从序列中的任何点更新的顺序容器。

# php - PHP 致命错误上的 HTTP 状态标头，代码命题

> ID：13644550
> 
> 赞同：0
> 
> 时间：2012-11-30T11:38:39.193
> 
> 标签：php

如果出现 php 致命错误（用于处理 AJAX 请求），我试图弄清楚如何将 HTTP 状态标头设置为 500。

相关问题：[如何让 php 在遇到致命异常时返回 500？](https://stackoverflow.com/q/1555862/1637178)

我不想使用`register_shutdown_function`在我看来不是一个优雅的解决方案。

下面的代码是一个好的解决方案吗？

它总是适用于致命错误吗？

我假设应用程序代码在最后一次`echo`调用之前没有输出，并且没有调用`flush()`函数（调用后会阻止修改标头）。

```
<?php

set_status_code(500);

// ...
// (application code with no output)

// Application didn't crash up to this point,
// so we set http status code 200.
set_status_code(200);

echo $outputBuffer; 
```

是`flush()`唯一破坏所需行为的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:44:49.100

如果关闭 PHP 错误，每当发生致命的 PHP 错误时，Apache 都会给出 500 状态码。

# node.js - GeddyJS 和 socket.io：从服务器端捕获和发出事件

> ID：13644551
> 
> 赞同：1
> 
> 时间：2012-11-30T11:38:42.733
> 
> 标签：node.js, socket.io, geddy

我想与 Geddy 一起使用 socket.io。我只是按照以下链接中的说明进行操作：

[https://github.com/mde/geddy/wiki/Getting-started-with-Geddy,-Socket.io,-and-Authentication](https://github.com/mde/geddy/wiki/Getting-started-with-Geddy,-Socket.io,-and-Authentication)

建议我如何在服务器端捕获特定模型的“连接”事件。

还可以在下面看到我到目前为止对这个模型所做的事情......

```
geddy scaffold -rt LiveUpdate stat:string category:string 
```

并在“show.html.ejs”的“show.html.ejs”中找到了以下与socket.io相关的自动生成脚本

```
geddy.io.addListenersForModels(['LiveUpdate']);
geddy.model.LiveUpdate.on('update', function (chat) { 
  .... 
```

我真正需要的是知道如何从服务器端捕获或发出这个模型的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:10:08.123

在 Geddy 中从模型和控制器发出 socket.io 事件非常简单：

*   `geddy.io.sockets.emit`将向所有连接的客户端发出事件

如果您想监听来自特定客户端的事件或向特定客户端发送事件，您需要`after_start.js`在应用程序的配置目录中创建一个文件，并`geddy.io`像通常使用的那样使用`socket.io`：

```
geddy.io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

# c - 如何使用 CERT_CONTEXT 设置私钥引脚

> ID：13644557
> 
> 赞同：3
> 
> 时间：2012-11-30T11:39:29.213
> 
> 标签：c, cryptography, cryptoapi

我需要在没有 CSP 窗口的情况下设置私钥引脚。

我有一个`CERT_CONTEXT`结构，我`CryptAcquireCertificatePrivateKey`用静音标志打电话。函数失败并`NTE_SILENT_CONTEXT`显示错误消息。这意味着引脚未指定或不正确，并且 CSP 窗口被阻止。我需要让私钥提供者通过`CryptSetProvParam`函数设置 pin。如何仅通过`CERT_CONTEXT`结构获得提供者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-21T00:11:15.583

您想将 CryptSetProvParam 与 PP_KEYEXCHANGE_PIN（或 PP_SIGNATURE_PIN）一起使用。默认 Microsoft 加密服务提供程序不支持此标志（它旨在与基于智能卡的 CSP 一起使用）。

# jquery - 使用 jQuery html 动态添加嵌入式 ruby

> ID：13644562
> 
> 赞同：1
> 
> 时间：2012-11-30T11:39:54.220
> 
> 标签：jquery, ruby-on-rails, erb

我正在使用 jQuery 和 Ajax 将内容动态加载到我的页面中，并且我想将 Rails 链接附加到要添加的每个对象。我生成数据列表的代码是：

```
$.each(data.recipients, function(index, object){
    $("#recipient-list").append("<div id=\""+ object.id +"\" class=\"recipient-list-item "+ object.recipient_type +"\">" + object.email + "<br/> </div>");
}); 
```

我想要实现的是添加一个 link_to 来删除选定的项目。IE。`<%= link_to "Remove", delete_mail_recipient_path(object.id), method: :delete, data: {confirm: "You sure?"} %>`

是否可以使用 jQuery 将此代码添加到页面中，还是我需要使用 html 来代替？我已经看到在几个地方使用了 escape_javascript，但据我所知，它是在`js.erb`文件中使用的？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:25:02.833

你的预感是正确的:)

如果您从控制器（而不是资产）提供 js 文件，那么您应该可以访问所有 Rails 视图助手（link_to 等）。显然附加`.erb`到文件名，因此渲染调用知道首先用 erb 解析它。

所以例如

```
$.each(data.recipients, function(index, object){
   $("#recipient-list").append("<%= link_to "Remove", delete_mail_recipient_path(object.id), method: :delete, data: {confirm: "You sure?"} %>");
}); 
```

正如您所说，您可能需要将评估包装在`raw`or中`escape_javascript`。

但除此之外，我建议您将 JS 保留在您的资产中。如果跟踪所有 URL 很痛苦，可以将它们保存在与 url_helpers （即 mail_recipient_path ）名称相似的变量中并重用它们。

PS Rails 添加的数据属性是：

```
data-method="delete" data-confirm="Are you sure?" 
```

根据文档，ajax链接的链接用法是：

```
link_to("Destroy", "http://www.example.com", :method => :delete, :confirm => "Are you sure?")
# => <a href='http://www.example.com' rel="nofollow" data-method="delete" data-confirm="Are you sure?">Destroy</a> 
```

因此，通过使用该示例，您可以更改 url 以反映您要删除的对象。但是，是的，仍然需要让您的 URL 助手与您的 JS 保持同步。

也许将它们包装在如下函数中：

```
var mail_recipient_path;

mail_recipient_path = function(id) {
  return '/mail_recipients/' + id;
}; 
```

像使用 Rails 中的 URL 助手一样使用它。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:02:52.747

所以我使用 jQuery 解决了这个问题：这是我在 jquery 端的删除代码：

```
// deletes a mail recipient
function delete_recipient(element){
    target = element.attr("target");
    var confirm_delete = confirm("Are you sure you want to remove this recipient?")
    if (confirm_delete){
        $.ajax({
            url: '/delete_mail_recipient',
            type: 'delete',
            dataType: 'json',
            data: {
                id: target
            },
            dataType: 'json',
            success: function(data){
                if (data.result){
                    console.log(target);
                    $("#"+target).remove();
                }else{
                    alert("Sorry something went wrong when trying to delete that recipient.");
                }
            }
        });
    }
}

    // saves the configuration of the mails recipients
    $('#save-config').click(function(){
        var form = $('form#mail-form');
        var valuesToSubmit = $('form#mail-form').serialize();
        console.log(valuesToSubmit);            // 
        save_mail_configuration(valuesToSubmit, form)
    }); 
```

这是我为页面上我希望能够删除的动态对象设置 ID 的代码：

```
$.each(data.recipients, function(index, object){
    $("#recipient-list").append("<div id=\""+ object.id + "\" class=\"recipient-list-item "+ object.recipient_type +"\">" + object.email + "<a class=\"remove-recipient\" target=\""+ object.id + "\" > Remove</a><br/> </div>");
}); 
```

# c# - 用于删除介于两者之间的标记文本的正则表达式 和 C＃

> ID：13644563
> 
> 赞同：1
> 
> 时间：2012-11-30T11:40:06.623
> 
> 标签：c#, .net, regex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:47:19.037

[`Regex`是解析 HTML 的糟糕选择](https://stackoverflow.com/a/1732454/1583)，尤其是不一致的 HTML。

我建议使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com)来解析和更改 HTML。

> **什么是 Html Agility Pack (HAP)？**
> 
> 这是一个敏捷的 HTML 解析器，它构建了一个读/写 DOM 并支持普通的 XPATH 或 XSLT（你实际上不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

源代码下载附带了一些示例项目，展示了如何使用该库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:47:59.003

正则表达式不是解析 HTML 文件的好选择。

HTML 并不严格，其格式也不规则。

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

Regex 用于**正**则表达式

您可以使用此代码来检索它`HtmlAgilityPack`

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);

foreach(var item in doc.DocumentNode.SelectNodes("//li[a]"))// select li only if it has anchor tag
{
    item.ParentNode.RemoveChild(item);//removed anchor tag
}
//dont forget to save 
```

* * *

我想仅使用正则表达式删除标签文本..

```
Regex.Replace(input,@"(?<=<li[^>]*>)\s*<a.*?(?=</li>)","",RegexOptions.Singleline); 
```

# android - 来自 NullPointerException 的 Android 微调器崩溃

> ID：13644569
> 
> 赞同：2
> 
> 时间：2012-11-30T11:40:18.513
> 
> 标签：android, nullpointerexception, android-spinner

我正在构建一个包含微调器的应用程序。微调器由 ArrayAdapter 填充，该 ArrayAdapter 包含来自设备上数据库的数据。问题是，每当我启动应用程序时，它会立即崩溃，没有显示任何内容。我完全确定这是 Spinner 的问题，因为在我使用它之前一切都很好。

日志猫：

```
11-30 12:56:23.660: E/AndroidRuntime(3945): FATAL EXCEPTION: main
11-30 12:56:23.660: E/AndroidRuntime(3945): java.lang.NullPointerException
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.View.measure(View.java:8313)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.View.measure(View.java:8313)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.View.measure(View.java:8313)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.View.measure(View.java:8313)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.os.Looper.loop(Looper.java:130)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at java.lang.reflect.Method.invokeNative(Native Method)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at java.lang.reflect.Method.invoke(Method.java:507)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-30 12:56:23.660: E/AndroidRuntime(3945):     at dalvik.system.NativeStart.main(Native Method) 
```

我的代码（持有微调器的活动）：

```
public class UserActivity extends Activity{

    private Spinner profiles;

    private String[] arrayspinner = new String[100];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.profiles);

        Button Submit = (Button) findViewById(R.id.SubmitProfile);

        final EditText profileName = (EditText) findViewById(R.id.ProfileName);

        profileName.setText("");

        this.profiles = (Spinner) findViewById(R.id.spinner1);

        SetSql sqler = new SetSql(UserActivity.this);
        sqler.open();
        arrayspinner = sqler.getProfiles(); 
        sqler.close();

        if(arrayspinner==null){
            arrayspinner[0] = "No Profiles, Please Create One";
        }

        @SuppressWarnings({ "rawtypes", "unchecked" })
        ArrayAdapter array = new ArrayAdapter(this, android.R.layout.simple_spinner_item, arrayspinner);
        profiles.setAdapter(array);

        //I am using the post method to make sure that this spinner wont run when the activity is started
        profiles.post(new Runnable(){
            public void run(){
                profiles.setOnItemSelectedListener(new OnItemSelectedListener() {

                    @Override
                    public void onItemSelected(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {
                        // TODO Auto-generated method stub
                            if(!arrayspinner[arg2].equals("No Profiles, Please Create One")){
                                String selected = arrayspinner[arg2];
                                Intent intent = new Intent(UserActivity.this, DPAActivity.class);
                                intent.putExtra("username", selected);
                                startActivity(intent);
                            }
                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }
                });
            }

        });

        //the button listener
        Submit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String name = profileName.getText().toString();
                if(name.equals("")){
                    profileName.setHint("Please Enter Some Data Here");
                }else{
                    SetSql sqlobj = new SetSql(UserActivity.this);
                    //open a DB connection
                    sqlobj.open();
                    String[] profiledata2 = new String[100];
                    profiledata2 = sqlobj.getProfiles();
                    //setup a boolean to check if the profile name matches with one from the database
                    boolean isSame = false;
                    //run the check
                    if(profiledata2!=null){
                        for(int x=0; x<profiledata2.length; x++){
                            if(profiledata2[x].equals(name)){
                                isSame=true;
                            }
                        }
                    }
                    //use the isSame variable!
                    if(isSame){
                        profileName.setHint("This profile name is already in use!");
                        //close connection
                        sqlobj.close();
                    }else{
                        //insert profile into DB
                        sqlobj.createProfile(name);
                        //close connection
                        sqlobj.close();

                        //setup intent and move to the next activity
                        Intent intent = new Intent(UserActivity.this, DPAActivity.class);
                        intent.putExtra("username", name);
                        startActivity(intent);
                    }
                }
            }
        });
    }
} 
```

如您所见，我的代码还可以选择将数据放入数组中，以防它为空，所以那里没有空值（我希望）。

我的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Select your profile, Or create a new one!"
    android:textSize="25dp" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="30dp"
    android:text="New profile:"
    android:textSize="20dp" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/ProfileName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:hint="Profile name..." >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/SubmitProfile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Create!" />

</LinearLayout>

</LinearLayout> 
```

* * *

**编辑**

所以我确保我的数组不像你们建议的那样为空，仍然会因同样的错误而崩溃。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:23:41.653

**什么是 SetSql() ？**

您应该调试并找出什么是 null 在行：

**ArrayAdapter array = new ArrayAdapter(this, android.R.layout.simple_spinner_item, arrayspinner);**

可能是 **“arrayspinner”**

如果要从数据库查询中填充微调器，则必须通过 CursorAdapter 而不是 ArrayAdapter 提供选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:50:00.960

我很确定这是崩溃的行：

```
 if(arrayspinner==null){
        arrayspinner[0] = "No Profiles, Please Create One";
    } 
```

本质上，您将其设为 null 或不指向任何内容。只需在这里设置它，并删除先前的声明。

```
 if(arrayspinner==null){
        arrayspinner = new String[100];
        arrayspinner[0] = "No Profiles, Please Create One";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T05:49:58.383

您的 arraySpinner 包含空数据，因为只有 arrayspinner[0] 包含数据，但 arrayspinner[1] 到 arrayspinner[99] 包含空数据。您必须创建一个包含所有数据长度的数组，然后将该数组传递给您的数组适配器。像这样的东西：

```
int count = 0;
for(int i = 0; i < arrayspinner.length; i++)
{
    if(arrayspinner[i] != null)
    {
        count++;
    }
}
String[] replaceArray = new String[count];
int counter = 0;
for(int k = 0; k < arrayspinner.length; k++)
{
    if(arrayspinner[k] != null)
    {
        replaceArray[counter++] = arrayspinner[k];
    }
}
ArrayAdapter<String> array = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, replaceArray); 
```

或者您可以将arrayspinner[1] 到arrayspinner[99] 设置为一个空字符串“”；这将在微调器中为您提供 99 条空行；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:57:56.440

下面代码中的 android.R.layout.simple_spinner_item 是布局 ID。

```
 ArrayAdapter array = new ArrayAdapter(this, android.R.layout.simple_spinner_item, arrayspinner);
    profiles.setAdapter(array); 
```

这里的构造函数是 public `ArrayAdapter (Context context, int textViewResourceId, T[] objects)`。使用正确的构造函数。参考[这个](http://developer.android.com/reference/android/widget/ArrayAdapter.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T12:14:19.660

是的，如果您在开始时初始化 Arrayspinner ，则它不为空：

```
private String[] arrayspinner = new String[100]; 
```

它只是空的，所以它仍然存在。

# html - 编辑时更改输入字段背景

> ID：13644572
> 
> 赞同：2
> 
> 时间：2012-11-30T11:40:39.370
> 
> 标签：html, css, forms, input

我目前正在为我的项目开发管理面板，并且想知道如何创建输入表单，当用户在其中编辑文本时会改变其背景颜色。我需要在大表格中查看哪些单元格已被编辑。可能它必须是一些 javascripts 或者只是纯 css/html

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:46:22.577

您的表格示例：

```
<form>
First name: <input type="text" name="firstname" /><br>
Last name: <input type="text" name="lastname" />
</form>​ 
```

如果您想在 CSS 中查看实际的输入编辑
[DEMO](http://jsfiddle.net/XFNd4/)
，可以在 CSS 中使用焦点选择器 ：

```
 input:focus
    {
    background-color:yellow;
    } 
```

或者，如果您想查看所有输入编辑，您可以尝试使用 jquery，如下所示：
[DEMO](http://jsfiddle.net/XFNd4/3/)

```
$(document).ready(function(){   
    $("input[type=text]").change(function() {
           $(this).css("background","#c7c7c7");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:00:17.317

这会成功的！

`<input type="text" onblur="javascript:if(this.value!=original_value){this.style.backgroundColor='red';}else{this.style.backgroundColor='';}" />`

已编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T16:11:10.117

编辑字段时，我使用这一点 jquery 来更改背景颜色

```
 $(window).load(function() {
        $('textarea, input, select').change(function() {
            $(this).css({'background' : '#D6FFD6'});
         });
    }); 
```

# c - 指针大小、方法内的 32 位与 64 位指针大小以及方法的返回值

> ID：13644575
> 
> 赞同：0
> 
> 时间：2012-11-30T11:41:00.913
> 
> 标签：c, pointers

我有一个方法

```
**int** create_object(Object* parent, char* name, int type, int start_block) {
  ...
  return ptr_to_object;
} 
```

函数内部`ptr_to_object`似乎是 32 位的，但一旦退出，它看起来就像是 64 位。

注意：我不能使用 c99，我知道这`intptr_t`是 c99 的一部分。

你有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:26:36.110

如果您正在处理指针，请使用指针返回类型，或者将其“隐藏”在标准定义的 int 类型中，使其足够大以支持持有指针。这种类型*可以*存在但不*保证*存在（tmk）：

> **C99 7.20.1.4**能够保存对象指针的整数类型
> 
> 1.  以下类型指定了一个有符号整数类型，其属性是任何指向 void 的有效指针都可以转换为此类型，然后转换回指向 void 的指针，结果将与原始指针进行比较：
>     
>     
>     
>     **intptr_t**
>     
>     
>     
>     以下类型指定了一个无符号整数类型，其属性是任何指向 void 的有效指针都可以转换为此类型，然后转换回指向 void 的指针，结果将与原始指针进行比较：
>     
>     
>     
>     **uintptr_t**
>     
>     
>     
>     **这些类型是可选的**。

那里的关键字是*可选*的。很可能它是在您选择的平台上定义的，但对于遗留的可移植性，您最好将 a`void *`或声明一个专门的“句柄”返回给类型化或 void 指针并返回它。

与往常一样，我对任何使用兼容 C99 的平台的人完全感兴趣，该平台选择*不*公开标准中作为可选功能提供的某些功能（例如这个）。如果有人`<stdint.h>` **没有** `intptr_t`和/或`uintptr_t`我很好奇。如果您使用这样的工具链，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:54:07.673

就像@nos 所说，如果您正在处理指针，那么请使用指针类型。将它们转换为整数是不可移植的并且容易出错。

如果您不希望调用者知道它是一个指针（无论如何都不需要挖掘），那么可以使用`typedef`创建一个“句柄”类型，或者其他东西：

```
typedef my_ptr* object_handle; 
```

事实上，即使你的“句柄”*确实是*一个整数，也要这样做。抽象将允许您稍后更改它，而无需修改任何调用代码。

# sql - 如何重新索引（数字）排序的sqlite表

> ID：13644577
> 
> 赞同：3
> 
> 时间：2012-11-30T11:41:08.323
> 
> 标签：sql, sqlite

例如我有带索引的节点

```
1
2
7
8 
```

我需要将索引更改为

```
1 
2 
3 
4 
```

我可以

```
UPDATE TODO SET id = id + 1000000000
UPDATE TODO SET id = id - (1000000000 + 1) 
```

（棘手，因为 id 必须是唯一的）

移动所有索引并使 0 1 6 7 但我需要建立关系，需要使第一个索引移动到 0，其他索引移动到前一个索引。sqlite 中没有存储过程，所以我很清楚如何在没有变量的情况下建立这种关系？

欢迎每个逻辑提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:58:15.127

1.  创建一个具有相同结构的新空表，但创建`id`一个自动增量列（将其声明为`INTEGER PRIMARY KEY`）；
2.  将所有记录按所需顺序复制到该表中，但不包含该`id`列：

    ```
    INSERT INTO NewTable(all_the, other, columns)
    SELECT all_the, other, columns
    FROM OldTable
    ORDER BY id; 
    ```

3.  删除旧表，[并将新表重命名](http://www.sqlite.org/lang_altertable.html)为旧名称。

（这将创建`id`从 1 开始的 s。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T11:53:47.047

How about this?

```
 UPDATE todo SET id = rowid 
```

# powershell - 减法脚本

> ID：13644578
> 
> 赞同：1
> 
> 时间：2012-11-30T11:41:11.380
> 
> 标签：powershell

我正在尝试编写一个脚本来计算用户输入的任何数字。

```
Write-Host "$Value1"

[int]$Value1 - [int]1

do {
$outputString = read-host
$outputString - [int]1
}

until ($outputstring=0) 
```

`$Value1`定义用户输入的数字。在我看来，初始值减去 1，然后`$outputString`应该获取读取主机信息并减去 1，直到它达到 0。此时我得到的唯一输出是写入主机“ `[int]$Value1 - [int]1`”，输出减去 1。但是它不会循环，直到它达到 0。有什么办法可以解决这个问题？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:42:23.727

这个怎么样？

```
do {
    $outputString = read-host enter a number
} while ($outputstring -notmatch '^\d+$')

if($outputstring -gt 0)
{
    $outputstring..0 | ForEach-Object{
        $_
        Start-Sleep -Milliseconds 250
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:14:21.343

尝试 ：

```
do {
$outputString = read-host
$outputString -= [int]1
}
until ($outputstring -eq 0) 
```

**首先**，相等运算符 is`-eq`和 not`=`

**其次**`$outputstring`，如果你想打破循环，你需要赋值：

```
$outputString -= [int]1
$outputString = $outputString - [int]1 
```

# networking - 连接未关闭

> ID：13644579
> 
> 赞同：0
> 
> 时间：2012-11-30T11:41:13.923
> 
> 标签：networking, lan, netstat

我运行 netstat 并注意到我有很多（近 100 个）连接，这些连接在一周多之前来自不同网络上的不同本地 IP，这些连接要么仍然存在，要么`ESTABLISHED`处于状态。`CLOSE_WAIT`

所有这些连接都挂起是否有原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:55:46.060

CLOSE_WAIT 表示对端已经关闭，TCP 正在等待本地应用程序关闭连接。您的本地代码中有一个错误，即套接字泄漏。

# jquery-mobile - jQuery Mobile - 加载外部 HTML

> ID：13644587
> 
> 赞同：0
> 
> 时间：2012-11-30T11:41:56.263
> 
> 标签：jquery-mobile

我正在将一些外部 html 加载到 jquery 移动应用程序中的 div 中。一切正常，但我试图让它更平滑一点。

这是我的代码：

```
$(document).bind('pagebeforecreate', function (event, ui) {
    if (event.target.id == 'pageViewOrder') {
        //get the page
        $.getJSON(root_url + '/orders/view/' + window.viewOrderReference + '/?callback=?', null, function (d) {
            $("#viewOrder_content").html(d.html).trigger("create");
            $.mobile.loading('hide');
        });
    } 
```

发生的事情是在 ajax 调用完成之前显示页面。有没有办法在此调用完成之前停止 jquery mobile 继续显示页面？此刻它显示页面，然后内容弹出。

**编辑：**这是在单页中加载

干杯，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:10:53.063

停止显示过程很容易，您只需要调用`event.preventDefault()`. 然后，问题是确保您在检索内容后将继续执行该过程。我实际上要做的是绑定到`pagechange`，检查您是否已经检索到数据，如果没有，则中断该过程，检索数据并重新开始。如果是，则按计划进行。

```
var contentRetrieved = false; //will indicate wether the JSON call has already been executed
var contentToDisplay; //data from the JSON call

$(document).live('pagebeforechange', function (event, data) {
    if (( typeof data.toPage === "string" ) && ($.mobile.path.parseUrl(data.toPage).hash == '#pageViewOrder')) {
        if (contentRetrieved) {
           contentRetrieved = false; //content is already retrieved, we proceed with the pagechange
        } else {
           event.preventDefault(); //prevent further page change operations
           $.getJSON(root_url + '/orders/view/' + window.viewOrderReference + '/?callback=?', null, function (d) {
                contentToDisplay = {"html":d.html};
                contentRetrieved = true;
                $.mobile.changePage("#pageViewOrder");
            });
        }
    }
});

$(document).bind('pagebeforecreate', function (event, ui) {
    if (event.target.id == 'pageViewOrder') {
        $("#viewOrder_content").html(contentToDisplay.html).trigger("create");
        $.mobile.loading('hide');
    }
});​ 
```

# c# - 将 DropDownListFor 与模型一起使用

> ID：13644588
> 
> 赞同：1
> 
> 时间：2012-11-30T11:42:04.317
> 
> 标签：c#, asp.net-mvc-3, razor, html.dropdownlistfor

在我看来，我使用一个列表作为我的模型，每个列表项都是模型类型，所以它看起来像这样：

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model> 
```

我正在尝试遍历此列表并将特定属性添加到 DropDownListFor：

```
@for (int i = 0; i < Model.Count(); i++)
{
    Html.DropDownListFor(model => model.ElementAt(i).module, new SelectList(Model, Model.ElementAt(i).module));
} 
```

但是当我这样做时，它不会在我的页面上呈现下拉菜单。

![我在当地人名单中的图片](../Images/26de42d5f1246b233d16bcb45fa8bbf3.png)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:57:29.897

您无法为模型呈现下拉列表，因为无法在下拉列表中完整地表示模型。ASP.NET 应该呈现什么？

如果您想从列表中选择一个模型，您可以做的是在列表上运行 LINQ`Select`查询，从而创建`IEnumerable<SelectListItem>`这样的：

```
var selectList = Model
    .Select(x => new SelectListItem
    {
        Name = x.module_name,
        Value = x.module
    }); 
```

我试图从您发布的屏幕截图中获取值。抱歉，如果我犯了错误。你明白了……

这段代码的作用是遍历对象类型 ( `Model.Select`) 的集合并返回`SelectListItem`. 如果您不熟悉 LINQ，则需要将其`Select`视为一种变革性功能。它接受一个集合，并为每个元素将其转换为其他内容并返回结果。在这里，它获取模型集合的每个元素并创建一个`SelectListItem`. 然后它返回一个`IEnumerable<SelectListItem>`.

要在页面上呈现列表，请执行以下操作：

```
@Html.DropDownListFor(Model.MyValue, selectList) 
```

...其中 Model.MyValue 是接收所选值的变量（假设该值`model`是 a `string`，它看起来是）。

# java - 仅在调试模式下运行的 Java if 语句

> ID：13644590
> 
> 赞同：-4
> 
> 时间：2012-11-30T11:42:08.483
> 
> 标签：java

我有一个 if 语句，仅在调试模式下评估

MyStuff 类（“主”类）；

```
package com.lorenjz.jambii;

import java.io.IOException;

public class MyStuff {

   public static void main(String[] args)throws IOException {
      ControlGack gack = new ControlGack();
      gack.setVisible(true);
      new Thread() {
         public void run() {
            MainWindow mW = new MainWindow();
            mW.run();
        }}.start();
      Client c = new Client();
      try {
         c.run(null);
      } catch (IOException e) {
         e.printStackTrace();
      }
   }
} 
```

提取其所在屏幕的 RGB 颜色平均值的窗口：

```
package com.lorenjz.jambii;

import java.awt.AWTException;

public class MainWindow extends JFrame implements ComponentListener, Runnable{

    static int currentPixel;
    static int red;
    static int blue;
    static int green;
    private JPanel contentPane;
    static JPanel panel;
    static myPrefs mP;
    static Boolean serverState = false;

    public static class Globals{
        static int screenWidth = 1366;
        static int screenHeight = 768;
        static int RedforSend = 0;
    }

    public void run() {
EventQueue.invokeLater(new Runnable() {
       public void run() {
          try {
             MainWindow frame = new MainWindow();
             frame.addComponentListener(frame);
             frame.setLocation(mP.getMWXPos(), mP.getMWYPos());
             frame.setVisible(true);
          } catch (Exception e) {
             e.printStackTrace();
          }
       }});
       while (true){
          Robot robot;
          try {
             robot = new Robot();
             BufferedImage screenShot =
                robot.createScreenCapture(
                   new Rectangle(
                      new Dimension( Globals.screenWidth,Globals.screenHeight )));
             for (int xPosition = 0; xPosition < Globals.screenWidth; xPosition ++) {
                for (int yPosition = 0; yPosition < Globals.screenHeight; yPosition++){
                   currentPixel = screenShot.getRGB(xPosition, yPosition);
                   red = red +(int) (255 & (currentPixel >> 16));
                   green = green + (int) (255 & (currentPixel >> 8));
                   blue = blue + (int) (255 & (currentPixel));
                }
             }
             int numberOfSidePixels = Globals.screenWidth * Globals.screenHeight;
             red = red /numberOfSidePixels;
             green = green /numberOfSidePixels;
             blue = blue /numberOfSidePixels;
             Globals.RedforSend = red;
             if(serverState==true){
                Client.sendToServer(red,green,blue);
                Client.newMessage();
             }
             Color background = new Color(red, green, blue);
             panel.setBackground(background);
          } catch (AWTException e) {
             e.printStackTrace();
          }
       }
    }

   public MainWindow() {
      mP = new myPrefs();
      mP.init();
      setBounds(100, 100, 175, 165);
      contentPane = new JPanel();
      contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
      setContentPane(contentPane);
      contentPane.setLayout(null);
      panel = new JPanel();
      panel.setBounds(20, 15, 135, 115);
      contentPane.add(panel);
   }

   void saveFrame(JFrame frame) throws IOException {
      String X = String.valueOf(frame.getX());
      String Y = String.valueOf(frame.getY());
      int xPos = frame.getX();
      mP.setMWXPos(xPos);
      int yPos = frame.getY();
      mP.setMWYPos(yPos);
    }

    @Override
    public void componentHidden(ComponentEvent e) {
    }

    @Override
    public void componentMoved(ComponentEvent e) {
      System.out.println(
         "componentMoved event from " + e.getComponent().getClass().getName());
      try {
         saveFrame((JFrame) e.getComponent());
      } catch (IOException e1) {
         e1.printStackTrace();
      }
    }

    @Override
    public void componentResized(ComponentEvent e) {
    }

    @Override
    public void componentShown(ComponentEvent e) {
      System.out.println(
         "shown event from " + e.getComponent().getClass().getName());
    }

    public static void switchServerState(){
      serverState = true;
    }
} 
```

最后是我想将 RGB 数据转发到服务器的客户端类：

```
package com.lorenjz.jambii;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

public class Client {
    static String fromUser;
    static Boolean nm = false;
    //static PrintWriter out;
    public void run(String[] args) throws IOException {

        Socket kkSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            kkSocket = new Socket("LorensMBA.local", 4444);
            // TODO code server for pref from controlGack text input
            out = new PrintWriter(kkSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: LorensMBA.");
            //System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: LorensMBA.");
            //System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
        String fromServer;

        while ((fromServer = in.readLine()) != null) {
            System.out.println("Server: " + fromServer);

            if(fromServer.equals("Ready to Go")){
                System.out.print("Rockin");
                out.print("myStuff");
                MainWindow.switchServerState();
                }

            if (fromServer.equals("Bye."))
                break;

            //fromUser = stdIn.readLine();

            //if (nm = true){
            if (fromUser != null) {
                System.out.println("Client: " + fromUser);
                out.println(fromUser);

            }
            nm = false;
            //}
        }

        out.close();
        in.close();
        stdIn.close();
        kkSocket.close();
    }

    public static void sendToServer(int redV, int greenV, int blueV){
        //out.println("Stupid");
        fromUser = "@R"+ redV+",G"+greenV+",B"+blueV;
    }
    public static void newMessage(){
        nm = true;
    }
}

' 
```

客户端类中的“if (fromUser != null)”似乎仅在我设置断点时才被评估。我一定在这里遗漏了一些东西。我打算解决这个问题的方式是 MainWindow 将在每次屏幕截图时向客户端类发送一个 RGB 值。有人可以指出我出错的方向吗？

谢谢，洛伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:50:10.020

`fromUser``sendToServer`只有在被调用后才会为空。并且`sendToServer`在线程中被异步调用。

我的猜测是，当您正常运行代码时，`sendToServer`执行 if 语句时尚未运行并且`fromUser`仍然为空。

`sendToServer`在调试模式下，线程有更多的时间来做它的事情，并在你到达 if 语句之前设法调用。

我还注意到您有 2 个实例`MainWindow`- 不确定这是否是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:57:33.070

问题似乎出在**DATA RACE**上。因此，在调试模式下，当您设置调试点时，该值已设置，而当您正常运行时，由于 RACE，该值未设置。

变量`fromUser`是罪魁祸首。尝试同步它。

# python - Python：如何解决 ImportError

> ID：13644591
> 
> 赞同：-3
> 
> 时间：2012-11-30T11:42:09.043
> 
> 标签：python, class, import

我在一个名为的文件中有以下类`SymbolManager.py`：

```
from qgis.core import *

class SimbolManager:
  def __init__(self):
    self.initSymbols()

  def initSymbols(self):
    self.symbolMap = {}
    props = {'color': '0,0,200'}
    self.symbolMap['SimpleVertex'] = QgsMarkerSymbolV2.createSimple(props)

    props = {'width': '1', 'color': '0,0,255'}
    self.symbolMap['SimpleLine'] = QgsLineSymbolV2.createSimple(props)

  def getSymbolRenderer(self, name):
    symb = self.symbolMap[name]
    if symb is not None:
      return QgsSingleSymbolRendererV2(symb)
    return None 
```

从同一目录中的文件中，我尝试以`SymbolManager`这种方式导入：

```
from PyQt4 import QtCore, QtGui
from Ui_OsmNavigator import Ui_OsmNavigator

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from qgis.core import *

import DbConnection

from SymbolManager import SymbolManager  // HERE IS THE PROBLEM 
```

当我运行脚本时，从 QGIS 内部它给了我以下错误：

> 第 28 行，在 from SymbolManager import SymbolManager ImportError: cannot import name SymbolManager

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T11:42:57.623

因为你的课没有被叫`SymbolManager`？

```
class SimbolManager: 
      ^^^^^^ 
```

# ruby - ruby gem 更新错误 Enoent

> ID：13644601
> 
> 赞同：0
> 
> 时间：2012-11-30T11:42:43.617
> 
> 标签：ruby, rubymine

我在 Windows 上使用 RubyInstaller 安装了 Ruby。它以前可以工作，但现在我无法更新任何 gem，并且一直收到有关驱动器 F 的错误：我的机器上不存在该驱动器，我不知道这是从哪里来的，我找不到任何路径变量和运行`gem env`没有对驱动器 F 的引用：

```
C:\>gem update --system
ERROR:  While executing gem ... (Errno::ENOENT)
    No such file or directory - F:/ 
```

更新：请注意，我的 Windows 机器上有一个漫游配置文件映射到驱动器 F:，但这一直存在并且没有引起问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:13:29.743

这是网络驱动器和根文件夹的一个已知问题。

RubyInstaller 故障排除指南对此进行了介绍：

[https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-network_drive_home](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-network_drive_home)

希望有帮助。

# android - 如何在屏幕左侧显示此字母滚动视图

> ID：13644604
> 
> 赞同：2
> 
> 时间：2012-11-30T11:42:52.770
> 
> 标签：android, scrollview

这是按字母顺序排列的列表视图的图像 URL。我不能在这里发布它，因为 stackoverflow 限制我没有更多的声誉。

[http://www.freeimagehosting.net/hwg9g](http://www.freeimagehosting.net/hwg9g)

如何在屏幕左侧显示这个按字母顺序排列的滚动视图。我从互联网上获得了一个按字母顺序滚动视图的示例应用程序，并且我已经用我的项目实现了:-( 作为初学者，我不明白他们的编码方式。他们使用 drawRoundRect 方法来绘制这个。我很遗憾 drawRoundRect 和一些油漆材料是我不熟悉..！

```
public class IndexScroller {

private float mIndexbarWidth;
private float mIndexbarMargin;
private float mPreviewPadding;
private float mDensity;
private float mScaledDensity;
private float mAlphaRate;
private int mState = STATE_HIDDEN;
private int mListViewWidth;
private int mListViewHeight;
private int mCurrentSection = -1;
private boolean mIsIndexing = false;
private ListView mListView = null;
private SectionIndexer mIndexer = null;
private String[] mSections = null;
private RectF mIndexbarRect;

private static final int STATE_HIDDEN = 0;
private static final int STATE_SHOWING = 1;
private static final int STATE_SHOWN = 2;
private static final int STATE_HIDING = 3;

public IndexScroller(Context context, ListView lv) {
    mDensity = context.getResources().getDisplayMetrics().density;
    mScaledDensity = context.getResources().getDisplayMetrics().scaledDensity;
    mListView = lv;
    setAdapter(mListView.getAdapter());

    mIndexbarWidth = 20 * mDensity;
    mIndexbarMargin = 10 * mDensity;
    mPreviewPadding = 5 * mDensity;
}

public void draw(Canvas canvas) {
    if (mState == STATE_HIDDEN)
        return;

    // mAlphaRate determines the rate of opacity
    Paint indexbarPaint = new Paint();
    indexbarPaint.setColor(Color.BLACK);
    indexbarPaint.setAlpha((int) (64 * mAlphaRate));
    indexbarPaint.setAntiAlias(true);
    canvas.drawRoundRect(mIndexbarRect, 5 * mDensity, 5 * mDensity,
            indexbarPaint);

    if (mSections != null && mSections.length > 0) {
        // Preview is shown when mCurrentSection is set
        if (mCurrentSection >= 0) {
            Paint previewPaint = new Paint();
            previewPaint.setColor(Color.BLACK);
            previewPaint.setAlpha(96);
            previewPaint.setAntiAlias(true);
            previewPaint.setShadowLayer(3, 0, 0, Color.argb(64, 0, 0, 0));

            Paint previewTextPaint = new Paint();
            previewTextPaint.setColor(Color.WHITE);
            previewTextPaint.setAntiAlias(true);
            previewTextPaint.setTextSize(50 * mScaledDensity);

            float previewTextWidth = previewTextPaint
                    .measureText(mSections[mCurrentSection]);
            float previewSize = 2 * mPreviewPadding
                    + previewTextPaint.descent()
                    - previewTextPaint.ascent();

            RectF previewRect = new RectF(
                    (mListViewWidth - previewSize) / 2,
                    (mListViewHeight - previewSize) / 2,
                    (mListViewWidth - previewSize) / 2 + previewSize,
                    (mListViewHeight - previewSize) / 2 + previewSize);

            canvas.drawRoundRect(previewRect, 5 * mDensity, 5 * mDensity,
                    previewPaint);
            canvas.drawText(
                    mSections[mCurrentSection],
                    previewRect.left + (previewSize - previewTextWidth) / 2
                            - 1,
                    previewRect.top + mPreviewPadding
                            - previewTextPaint.ascent() + 1,
                    previewTextPaint);
        }

        Paint indexPaint = new Paint();
        indexPaint.setColor(Color.WHITE);
        indexPaint.setAlpha((int) (255 * mAlphaRate));
        indexPaint.setAntiAlias(true);
        indexPaint.setTextSize(12 * mScaledDensity);

        float sectionHeight = (mIndexbarRect.height() - 2 * mIndexbarMargin)
                / mSections.length;
        float paddingTop = (sectionHeight - (indexPaint.descent() - indexPaint
                .ascent())) / 2;
        for (int i = 0; i < mSections.length; i++) {
            float paddingLeft = (mIndexbarWidth - indexPaint
                    .measureText(mSections[i])) / 2;

            canvas.drawText(mSections[i], mIndexbarRect.left + paddingLeft,
                    mIndexbarRect.top + mIndexbarMargin + sectionHeight * i
                            + paddingTop - indexPaint.ascent(), indexPaint);
        }
    }
}

public boolean onTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        // If down event occurs inside index bar region, start indexing
        if (mState != STATE_HIDDEN && contains(ev.getX(), ev.getY())) {
            setState(STATE_SHOWN);

            // It demonstrates that the motion event started from index bar
            mIsIndexing = true;
            // Determine which section the point is in, and move the list to
            // that section
            mCurrentSection = getSectionByPoint(ev.getY());
            mListView.setSelection(mIndexer
                    .getPositionForSection(mCurrentSection));
            return true;
        }
        break;
    case MotionEvent.ACTION_MOVE:
        if (mIsIndexing) {
            // If this event moves inside index bar
            if (contains(ev.getX(), ev.getY())) {
                // Determine which section the point is in, and move the
                // list to that section
                mCurrentSection = getSectionByPoint(ev.getY());
                mListView.setSelection(mIndexer
                        .getPositionForSection(mCurrentSection));
            }
            return true;
        }
        break;
    case MotionEvent.ACTION_UP:
        if (mIsIndexing) {
            mIsIndexing = false;
            mCurrentSection = -1;
        }
        if (mState == STATE_SHOWN)
            setState(STATE_HIDING);
        break;
    }
    return false;
}

public void onSizeChanged(int w, int h, int oldw, int oldh) {
    mListViewWidth = w;
    mListViewHeight = h;
    mIndexbarRect = new RectF(w - mIndexbarMargin - mIndexbarWidth,
            mIndexbarMargin, w - mIndexbarMargin, h - mIndexbarMargin);
}

public void show() {
    if (mState == STATE_HIDDEN)
        setState(STATE_SHOWING);
    else if (mState == STATE_HIDING)
        setState(STATE_HIDING);
}

public void hide() {
    if (mState == STATE_SHOWN)
        setState(STATE_HIDING);
}

public void setAdapter(Adapter adapter) {
    if (adapter instanceof SectionIndexer) {
        mIndexer = (SectionIndexer) adapter;
        mSections = (String[]) mIndexer.getSections();
    }
}

private void setState(int state) {
    if (state < STATE_HIDDEN || state > STATE_HIDING)
        return;

    mState = state;
    switch (mState) {
    case STATE_HIDDEN:
        // Cancel any fade effect
        mHandler.removeMessages(0);
        break;
    case STATE_SHOWING:
        // Start to fade in
        mAlphaRate = 0;
        fade(0);
        break;
    case STATE_SHOWN:
        // Cancel any fade effect
        mHandler.removeMessages(0);
        break;
    case STATE_HIDING:
        // Start to fade out after three seconds
        mAlphaRate = 1;
        fade(5000);
        break;
    }
}

private boolean contains(float x, float y) {
    // Determine if the point is in index bar region, which includes the
    // right margin of the bar
    return (x >= mIndexbarRect.left && y >= mIndexbarRect.top && y <= mIndexbarRect.top
            + mIndexbarRect.height());
}

private int getSectionByPoint(float y) {
    if (mSections == null || mSections.length == 0)
        return 0;
    if (y < mIndexbarRect.top + mIndexbarMargin)
        return 0;
    if (y >= mIndexbarRect.top + mIndexbarRect.height() - mIndexbarMargin)
        return mSections.length - 1;
    return (int) ((y - mIndexbarRect.top - mIndexbarMargin) / ((mIndexbarRect
            .height() - 2 * mIndexbarMargin) / mSections.length));
}

private void fade(long delay) {
    mHandler.removeMessages(0);
    mHandler.sendEmptyMessageAtTime(0, SystemClock.uptimeMillis() + delay);
}

private Handler mHandler = new Handler() {

    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);

        switch (mState) {
        case STATE_SHOWING:
            // Fade in effect
            mAlphaRate += (1 - mAlphaRate) * 0.2;
            if (mAlphaRate > 0.9) {
                mAlphaRate = 1;
                setState(STATE_SHOWN);
            }

            mListView.invalidate();
            fade(10);
            break;
        case STATE_SHOWN:
            // If no action, hide automatically
            setState(STATE_HIDING);
            break;
        case STATE_HIDING:
            // Fade out effect
            mAlphaRate -= mAlphaRate * 0.2;
            if (mAlphaRate < 0.1) {
                mAlphaRate = 0;
                setState(STATE_HIDDEN);
            }

            mListView.invalidate();
            fade(10);
            break;
        }
    }

};

It would be really nice if you help me to show this alphabetical scroll bar in the left side of the screen. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:17:42.850

我是这样弄的

```
public void onSizeChanged(int w, int h, int oldw, int oldh) {
    mListViewWidth = w;
    mListViewHeight = h;

    mIndexbarRect = new RectF(mIndexbarMargin, mIndexbarMargin,
            mIndexbarMargin + mIndexbarWidth, h - mIndexbarMargin);
} 
```

这是在屏幕左侧绘制矩形的方法。

```
 private boolean contains(float x, float y) {

    return (x <= mIndexbarRect.right && y >= mIndexbarRect.top && y <= mIndexbarRect.top
            + mIndexbarRect.height());
} 
```

如果您将功能更改为以下内容，它将顺利运行。很抱歉发布这个答案有点晚。

请查看：[可索引列表视图](https://github.com/woozzu/IndexableListView/blob/master/src/com/woozzu/android/widget/IndexScroller.java)

# gcc - 内存与 ld 和 ar 命令重叠

> ID：13644616
> 
> 赞同：0
> 
> 时间：2012-11-30T11:43:47.143
> 
> 标签：gcc, compilation, ld, unix-ar, hardcoded

我用这个命令链接了一些文本文件：

> ld -r -b 二进制 -o resources1.o *.txt

我得到一个包含以下内容的文件resources.o：

> 纳米资源1.o

```
00000018 D _binary_texto4_txt_end
00000018 A _binary_texto4_txt_size
00000000 D _binary_texto4_txt_start
00000031 D _binary_texto5_txt_end
00000019 A _binary_texto5_txt_size
00000018 D _binary_texto5_txt_start
0000004a D _binary_texto6_txt_end
00000019 A _binary_texto6_txt_size
00000031 D _binary_texto6_txt_start 
```

我有来自另一个 ld 命令的其他 resources2.o 文件，但它有不同的内容：

```
00000018 D _binary___textos1_texto1_txt_end
00000018 A _binary___textos1_texto1_txt_size
00000000 D _binary___textos1_texto1_txt_start
00000031 D _binary___textos1_texto2_txt_end
00000019 A _binary___textos1_texto2_txt_size
00000018 D _binary___textos1_texto2_txt_start
0000004a D _binary___textos1_texto3_txt_end
00000019 A _binary___textos1_texto3_txt_size
00000031 D _binary___textos1_texto3_txt_start 
```

我想将这两个 resources.o 文件合并到一个 libSum.a 文件中。所以我使用这个命令：

> ar rvs libSum.a 资源1.o 资源2.o

当我将 libSum.a 链接到我的 C 程序并尝试使用这些文本时，我不能因为它们共享相同的内存偏移量。所以*二进制*__textos1_texto1_txt_start 与 _binary_texto4_txt_start (0X00000000) 具有相同的方向。

如何将两个资源文件合并到一个 .a lib 中以避免内存偏移重叠？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:41:09.647

文件内容有一个愚蠢的错误。它们是具有不同名称的同一个文件（复制和粘贴错误），因此在显示其内容时，它似乎是内存偏移错误。

现在，我正在使用下一个脚本来编译“libResources.a”库中的所有资源：

```
rm libResources.a
rm names.txt

basedir=$1
for dir in "$basedir"/*; do
    if test -d "$dir"; then
    rm "$dir"/*.o
    ld -r -b binary -o "$dir"/resources.o "$dir"/*
    nm "$dir"/resources.o >> names.txt
    fi
done

for dir in "$basedir"/*; do
    if test -d "$dir"; then
    ar q libResources.a "$dir"/*.o
    fi
done 
```

为了测试我的硬编码资源，我使用以下 C 代码：

```
/*
 ============================================================================
 Name        : linkerTest.c
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>

extern char _binary___textos1_texto1_txt_start[];
extern char _binary___textos1_texto1_txt_end[];

extern char _binary___textos2_texto4_txt_start[];
extern char _binary___textos2_texto4_txt_end[];

int main(void) {
    int i;
    int sizeTexto1 = _binary___textos1_texto1_txt_end - _binary___textos1_texto1_txt_start;
    int sizeTexto4 = _binary___textos2_texto4_txt_end - _binary___textos2_texto4_txt_start;

    for (i=0;i<sizeTexto1;i++){
        putchar(_binary___textos1_texto1_txt_start[i]);
    }

    for (i=0;i<sizeTexto4;i++){
        putchar(_binary___textos2_texto4_txt_start[i]);
    }

    return EXIT_SUCCESS;
} 
```

如果您想测试我的示例，请不要忘记在您的项目中链接文件“libResources.a”。

# jquery - 如何检查可拖动悬停在哪个元素上？

> ID：13644618
> 
> 赞同：0
> 
> 时间：2012-11-30T11:44:01.927
> 
> 标签：jquery, jquery-ui, hover, draggable

jQuery UI 中有没有办法使用设置检查拖动的可拖动元素悬停在哪个元素上`tolerance`？

这不能与 droppable 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:50:23.693

您可以为所有元素创建悬停事件

```
var elem = null;
$('*').hover(function() {elem = this}); 
```

**或者**

比这更好地为您的可拖动项目下方的元素提供一个特定的类，我假设您只想让下面的元素检测到项目是否悬停在它上面？

```
var elem = null;
$('.Underneathdraggable').hover(function() {elem = this}); 
```

这将为您提供鼠标光标下的当前项目

# javascript - JQuery 在悬停或鼠标按下时滚动

> ID：13644622
> 
> 赞同：1
> 
> 时间：2012-11-30T11:44:29.687
> 
> 标签：javascript, jquery

`overflow:hidden`我在需要滚动的容器中有一个带有缩略图的画廊。我已经让它在点击时逐步滚动，使用`.scrollLeft()`. 如何使它平滑滚动到列表末尾`mouseover`，或者最好滚动`mousedown`到列表末尾？我正在寻找一种没有插件的方法。

这就是我点击滚动时得到的。

```
$("#slider").scrollLeft($("#slider").scrollLeft() + 200); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:49:42.067

你的意思是这样的：

```
$("#someEle").hover(function(){
    $("#slider").scrollLeft($("#slider").scrollLeft() + 200);
},function(){
    $("#slider").stop();
}); 
```

# java - 使用 checkstyle 而不是使用 Eclipse 内置代码格式化程序的优势？

> ID：13644624
> 
> 赞同：3
> 
> 时间：2012-11-30T11:44:34.367
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-indigo

使用 checkstyle 而不是 Eclipse 自己的代码格式化程序有什么功能优势吗？无论哪种情况，我们都会添加一些自定义规则，但它主要基于 Sun 的 Java 代码约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:56:12.337

以下是使用*checkstyle*的一些优点：

*   在 IDE 之间可移植。如果您以后决定使用*IntelliJ*，或者您的团队使用各种 IDE，您仍然有办法强制一致性。
*   更好的外部工具。*将checkstyle*与您的外部工具集成起来要容易得多，因为它实际上是作为独立框架设计的。您可以很容易地将 SCM 作为预提交挂钩插入到您的构建工具中，或者插入到您的构建工具中。使用*Eclipse*风格约定，您需要编写或找到一个插件来做同样的事情。
*   创建自己的规则的能力。*Eclipse*定义了一大套样式，但 checkstyle 有更多，您可以添加自己的自定义规则。

*当然， Eclipse*格式化程序/样式程序的优势在于它已经内置在 IDE 中，因此如果您的团队已经在*Eclipse*上进行了标准化，您可以让每个人都快速启动并运行。但是使用*checkstyles*可以为您提供更多选择。

# java - 使用 `java2wsdl` 生成的 Web 服务是否可以包含来自多个 Java 类的 API？

> ID：13644630
> 
> 赞同：2
> 
> 时间：2012-11-30T11:44:56.277
> 
> 标签：java, web-services, axis2

我正在使用 Axis2 来运行 Web 服务。这是一个`services.xml`定义服务的文件：

```
<service name="XEWS" scope="transportsession" class="com.mc.xews.XEWS">
<messageReceivers>
    <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only" class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver" />
    <messageReceiver  mep="http://www.w3.org/2004/08/wsdl/in-out"  class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
</messageReceivers>
<parameter name="ServiceClass" locked="false">com.mc.xews.XEWS</parameter> 
```

我的问题是整个 API 位于一个 Java 文件中`XEWS.java`，而这个类被发送到`java2wsdl`. 有没有办法让多个类作为输入`java2wsdl`？此文件用于`WSDL`生成 Web 服务。现在我只使用一个类作为 的输入`java2wsdl`，所以这个类变得很大，因为有许多 API 函数......如果我知道如何将多个文件发送到 java2wsdl，它们可以很好地分组到单独的类中。从此类生成的 JavaDocs 文档也很难阅读。

Web 服务是否可以包含来自多个 Java 类的 API？

也许`extra classes`选项参数`java2wsdl`应该用于此目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:23:46.007

在 WSDL 中，最大的命名空间是服务本身（它的方法是最小的）。WSDL 不支持嵌套命名空间。Java 和 WSDL 之间最合乎逻辑的映射是 Java 类到 WSDL 服务。这就是使您无法请求传递多个 Java 类来获得单个 WSDL 的原因。您始终可以托管多个 WSDL，但您仍然必须单独生成它们。

引用[w3c](http://www.w3.org/TR/wsdl)：

```
Related concrete endpoints are combined into abstract endpoints (services) 
```

有一个 IMPORT 机制来组合 WSDL，但这被视为 WSDL2Java（或任何其他 SOAP 客户端）的单个服务，因此它仍然代表单个服务。

如果您担心实施的规模，只需查看[PayPal 的网络服务](http://www.paypalobjects.com/wsdl/PayPalSvc.wsdl)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T20:43:17.217

不，这是不可能的，因为 Axis2 生成工具以代码优先的方法将 Java 类：WSDL 映射为 1:1。假设，他们可以提供将多个 Java 类映射到单个 WSDL 的功能（这将需要生成工具中的其他参数）。

Axis2 对其他类型使用“额外类”——用作输入/输出的原始复杂类型的子类。

如果整洁紧凑的代码是唯一的问题，我建议将其重构为只有一个类定义所有必需的操作，但将执行委托给特定和适当的（多个）类。这可以被认为是一个[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)的应用。

# css - 链接中的 CSS 首字母选择器

> ID：13644634
> 
> 赞同：2
> 
> 时间：2012-11-30T11:45:28.067
> 
> 标签：css, css-selectors, pseudo-element

我目前正为这个名为`:first-letter`. 它似乎很有帮助，但最终没有按我预期的方式工作。

这是关于 jsfiddle 的一个示例，我是如何尝试的以及它应该是什么样子：

小提琴在[这里](http://jsfiddle.net/4DnKu/)

如您所见，`:first-letter`什么都不做。我希望它会覆盖正常的链接设置以及`:hover`选择器。

可能出了什么问题？任何其他想法如何**仅使用 CSS**来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:02:50.230

与其将“»”放在 HTML 中，不如将其放在 CSS 中

[http://jsfiddle.net/4DnKu/4/](http://jsfiddle.net/4DnKu/4/)

```
a.one:before {
    content: "»";
    color:#0F0;
    padding:0 5px 0 0;
} 
```

恕我直言，它不应该在 HTML 中，因为它实际上只是装饰。

所有主流浏览器都支持伪元素，只有一个你会遇到问题的是 IE<8。在那里，您可以使用 CSS 表达式作为解决方法（小心处理！）：

```
a.one {
    *zoom: expression( (new Function('elem', '\
        if(elem.before)\
            return;\
        elem.innerHTML = "<span class=ie7-before>»</span>" + elem.innerHTML;\
        elem.before = true;\
        elem.style.zoom = "1";\
    '))(this) );
}

a.one > .ie7-before,
a.one:before {
    content: "»";
    color:#0F0;
    padding:0 5px 0 0;
} 
```

这使用了很多技巧，因此除非您了解那里发生的事情，否则我不建议您使用它。

# php - 如何在php标签之后列出所有带有空格的文件

> ID：13644637
> 
> 赞同：4
> 
> 时间：2012-11-30T11:45:48.457
> 
> 标签：php, regex, linux, shell, command

是否可以使用 linux 命令在文件末尾的 php 标记后列出所有带有空格的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:05:57.427

使用[pcregrep](http://unixhelp.ed.ac.uk/CGI/man-cgi?pcregrep)进行回答，即使您的空格跨越新行，它也会匹配：

```
pcregrep -rM '\?>[\s]+[^\S]*$' *.php 
```

但未经测试，因为我没有在这台计算机上安装 pcregrep。如果您知道它不正确，请纠正我。

`?>`这应该匹配所有以空格结尾的文件。如果它后面跟着任何其他字符，那么它将不匹配（例如，如果它不是一个全 PHP 文件并且需要`?>`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T11:50:57.187

删除文件末尾的所有尾随空行。

`sed -i -e :a -e '/^\n*$/{$d;N;};/\n$/ba' file`

使用以下命令检查结束标记后带有空格的文件`grep -El '.*\?>\s+' *.php`：

```
$ cat -E nospace.php
<?php$
?>$
$

$ cat -E withspace.php
<?php$
?>     $
$

$ grep -El '.*\?>\s+' *.php
withspace.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:50:58.787

最初作为评论发布：

更好的计划：删除所有结束标签。

# jquery - jquery 和 requirejs 以及淘汰赛；从自身内部引用 requirejs 对象

> ID：13644639
> 
> 赞同：0
> 
> 时间：2012-11-30T11:46:04.980
> 
> 标签：jquery, knockout.js, requirejs

我们使用 jquery 和 requirejs 来创建一个像这样的“viewmodel”：

```
define('vm.inkoopfactuurAanleveren',
['jquery', 'underscore', 'ko', 'datacontext', 'router', 'messenger', 'config', 'store'],
function ($, _, ko, datacontext, router, messenger, config, store) {
    var
        isBusy = false,
        isRefreshing = false,
        inkoopFactuur = { factuurNummer: ko.observable("AAA") },           
        activate = function (routeData, callback) {
            messenger.publish.viewModelActivated({ canleaveCallback: canLeave });
            getNewInkoopFactuurAanleveren(callback);              
            var restricteduploader = new qq.FineUploader({                    
                element: $('#restricted-fine-uploader')[0],
                request: {
                    endpoint: 'api/InkoopFactuurAanleveren',
                    forceMultipart: true
                },
                multiple: false,                 
                failedUploadTextDisplay: {
                    mode: 'custom',
                    maxChars: 250,
                    responseProperty: 'error',
                    enableTooltip: true
                },
                text: {
                    uploadButton: 'Click or Drop'
                },
                showMessage: function (message) {                        
                    $('#restricted-fine-uploader').append('<div class="alert alert-error">' + message + '</div>');
                },
                debug: true,

                callbacks: {
                    onComplete: function (id, fileName, responseJSON) {
                        var response = responseJSON;
                    },
                }
            });
        },

       invokeFunctionIfExists = function (callback) {
           if (_.isFunction(callback)) {
               callback();
           }
       },

        loaded = function (factuur) {
            inkoopFactuur = factuur;
            var ids = config.viewIds;
            ko.applyBindings(this, getView(ids.inkoopfactuurAanleveren)); /*<----- THIS = OUT OF SCOPE!*/                /
        },

        bind = function () { },

        saved = function (success) {
            var s = success;
        },

        saveCmd = ko.asyncCommand({
            execute: function (complete) {
                $.when(datacontext.saveNewInkoopFactuurAanleveren(inkoopFactuur))
                        .then(saved).always(complete);
                return;
            },
            canExecute: function (isExecuting) {
                return true;
            }
        }),

        getView = function (viewName) {
            return $(viewName).get(0);
        },

        getNewInkoopFactuurAanleveren = function (callback) {
            if (!isRefreshing) {
                isRefreshing = true;                    
                $.when(datacontext.getNewInkoopFactuurAanleveren(dataOptions(true))).then(loaded).always(invokeFunctionIfExists(callback));
                isRefreshing = false;
            }

        },

        dataOptions = function (force) {
            return {
                results: inkoopFactuur,
                // filter: sessionFilter,
                //sortFunction: sort.sessionSort,
                forceRefresh: force
            };
        },

        canLeave = function () {
            return true;
        },            

        forceRefreshCmd = ko.asyncCommand({
            execute: function (complete) {
                //$.when(datacontext.sessions.getSessionsAndAttendance(dataOptions(true)))
                //    .always(complete);
                complete;
            }
        }),                        

        init = function () {
           // activate();
            // Bind jQuery delegated events
            //eventDelegates.sessionsListItem(gotoDetails);
            //eventDelegates.sessionsFavorite(saveFavorite);

            // Subscribe to specific changes of observables
            //addFilterSubscriptions();
        };

        init();

    return {
        activate: activate,
        canLeave: canLeave,
        inkoopFactuur: inkoopFactuur,
        saveCmd: saveCmd,
        forceRefreshCmd: forceRefreshCmd,
        bind: bind,
        invokeFunctionIfExists: invokeFunctionIfExists                  
    };
}); 
```

在“加载”方法的行`ko.applyBindings(this, getView(ids.inkoopfactuurAanleveren));`中，“this”关键字不引用“viewmodel”对象。“self”关键字似乎是指在多个“viewmodels”上找到的方法的组合。saveCmd 属性是通过敲除绑定的，但由于找不到它而给出错误。

ko.applyBindings 如何获得对视图模型的正确引用？换句话说，我们需要用什么来替换applyBindings 中的'this' 关键字。

我想你可以“要求”requirejs 给我们带有标识符“vm.inkoopfactuurAanleveren”的 ealiers 实例化对象，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:50:06.500

只需在该行之后使用该行`function ($, _, ko, datacontext, router, messenger, config, store) {`

```
var me = this; 
```

然后在你需要参考的地方使用我

*注意这可能不是最好的方法，但这就是我不这样做的方式 - cntrl 下的所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:50:53.580

您遇到的问题不是来自 RequireJS，而是来自您创建视图模型的方式以及您没有注意函数中的“this”是什么这一事实。

通过阅读您的代码，我可以告诉您加载方法中的“this”是一个看起来像这样的 jQuery Deferred 对象
`Object,
always: function (){ ... },
done: function (){ ... },
fail: function (){ ... },`

这个简短的教程将让您了解问题所在。 [http://dailyjs.com/2012/06/18/js101-this/](http://dailyjs.com/2012/06/18/js101-this/)

要使这项工作正常进行，只要您像这样调用 activate ，请在您的函数中`viewModel.activate()`更改`.then(loaded)`为。这应该使函数中的 this 成为 viewmodel 对象。`.then($.proxy(loaded, this))``getNewInkoopFactuurAanleveren``loaded`

但是，您应该决定一种更好的方法来在应用程序中构建可重用的模块或类，并在这些 RequireJS 定义方法中创建构造函数将是一个好的开始。

```
define([ "jquery" ], function ($) {  
    var User = function (username, password) {  
        this.username = username;  
        this.password = password;  
        this.isActive = false;
    }  

    User.prototype.activate = function () {  
        this.isActive = true;  
    };  

    return User;  
} 
```

请注意，RequireJS 只会调用此方法一次，这就是为什么最好创建一个构造函数，然后在您需要该类型的新对象时以这种方式使用它。

```
var user = new User("user1", "pass");  
user.activate(); 
```

在此处查看有关如何创建简单类的一些示例。 [http://weblogs.asp.net/dwahlin/archive/2011/12/19/using-the-javascript-prototype-property-to-structure-and-extend-code.aspx](http://weblogs.asp.net/dwahlin/archive/2011/12/19/using-the-javascript-prototype-property-to-structure-and-extend-code.aspx)。

# event-handling - 显示场景时没有 Javafx-2 事件

> ID：13644644
> 
> 赞同：2
> 
> 时间：2012-11-30T11:46:26.137
> 
> 标签：event-handling, javafx-2

我似乎找不到一种方法来注册场景或节点类的事件侦听器，当该场景显示时会被调度。

我希望我的 Scene 类是独立的，因此我可以使用构建器类来构建它们，并在显示它们时触发它们的任何动画。例如，我希望能够在我的应用程序类中执行以下操作...

```
public void start(Stage primaryStage) {
    primaryStage.setScene(AnimatedLoginSceneBuilder.create()
        .width(1024)
        .height(768)
        .frameRate(25)
        .build();
    )
    primaryStage.show();
} 
```

我的 AnimatedLoginSceneBuilder 类创建了一个场景和一个动画，它绑定到场景中的一些节点。但是，我只能使用 build 方法返回场景（而不是动画类）。例如，它看起来像这样......

```
public class AnimatedLoginSceneBuilder implements Builder<Scene> {
    // private members such as width, height and framerate
    // methods to set width, height and framerate (e.g. width(double width))

    public Scene build() {
        DoubleProperty x = new SimpleDoubleProperty();
        Text node = TextNodeBuilder...
        node.xProperty().bind(x);
        final Timeline animation = TimelineBuilder... // animate x
        return SceneBuilder.create()
           . // create my scene using builders (bar the node above)
           .build();
    }
} 
```

但是我没有办法播放动画，所以我想要一些钩子，比如......

```
public class AnimatedLoginSceneBuilder ... {
    ...
    public Scene build() {
        ... 
        final Timeline animation = TimelineBuilder... // animate x
        return SceneBuilder.create()
            . // create scene declaratively
            .onShow(new EventHandler<SomeEvent>() {
                @Overide public void handleSomeEvent() {
                    animation.play();
                }
            .build()
    } 
```

然后当场景显示时，它会自动播放。要问的问题太多了？

一种替代方法是让构建器类返回包装在对象中的场景和动画，并执行类似...

```
public void start(Stage primaryStage) {
    WrapperObj loginSceneWrapper = AnimatedLoginSceneBuilder.create()
       .width(1024)
       .height(768)
       .frameRate(25)
       .build();

    primaryStage.setScene(wrapperObj.getScene());
    primaryStage.show();
    wrapperObj.getAnimation().play(); 
```

但这不是我想要的，因为我希望能够从现有场景中切换到新场景并且不做任何假设。例如，我希望能够让场景中的事件处理程序能够让舞台过渡到新场景，因此，我只想能够调用 primaryStage.setScene(new scene我想去）。

有任何想法吗？

我见过的最接近的是[如何在场景图的节点中监听 WindowEvent.WINDOW_SHOWN？](https://stackoverflow.com/questions/8944445/how-to-listen-for-windowevent-window-shown-in-the-nodes-of-the-scene-graph)但这不适用于这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:15:25.640

显示时触发“显示”事件`javafx.​stage.Window`。`window.setOnShowing()`您可以使用和为适当的事件设置侦听器`window.setOnShown()`。场景是场景图的容器，没有关于显示/隐藏的逻辑。

我建议存储场景的动画根节点（从 Parent 或其子类扩展）而不是场景。并将侦听器添加到根更改事件中，例如

```
stage.getScene().rootProperty().addListener(new ChangeListener<MyAnimatedParent>() {
     @Override
     public void changed(ObservableValue<? extends MyAnimatedParent> observable, MyAnimatedParent oldValue, MyAnimatedParent newValue) {
         newValue.animate();
     }
 }); 
```

# sockets - 如何用 Go 语言创建客户端服务器？

> ID：13644646
> 
> 赞同：4
> 
> 时间：2012-11-30T11:46:30.470
> 
> 标签：sockets, go

我是新手，我试图用 Go 语言准备客户端服务器并尝试编写代码，但它没有提供任何输出。它没有给出任何错误，只是在听。

请有人帮助我，我想使用 go 创建身份验证系统，其中服务器使用用户名密码对客户端进行身份验证..

**服务器 ：**

```
package main

import (
        "fmt"
        "net"
)

func main() {
        service := "0.0.0.0:8080"
        tcpAddr, err := net.ResolveTCPAddr("tcp", service)
        checkError(err)
        listener, err := net.ListenTCP("tcp", tcpAddr)
        checkError(err)
        for {
                conn, err := listener.Accept()
                //fmt.Println("Server listerning")
                _, err = conn.Read([]byte("HEAD"))
                if err != nil {
                        conn.Close()
                }
                if err != nil {
                        continue
                }
        }
}

func checkError(err error) {
        if err != nil {
                fmt.Println("Fatal error ", err.Error())
        }
} 
```

**客户 ：**

```
package main

import (
        "bufio"
        "fmt"
        "net"
        "os"
        "strings"
)

func main() {
        if len(os.Args) != 2 {
                fmt.Println("Usage: ", os.Args[0], "host")
                os.Exit(1)
        }
        host := os.Args[1]
        conn, err := net.Dial("tcp", host+":8080")
        checkError(err)
        _, err = conn.Write([]byte("HEAD"))
        reader := bufio.NewReader(os.Stdin)
        for {
                line, err := reader.ReadString('\n')
                ftm.Println(err)
                line = strings.TrimRight(line, " \t\r\n")
                if err != nil {
                        conn.Close()
                        break

                }
        }
}
func checkError(err error) {
        if err != nil {
                fmt.Println("Fatal error ", err.Error())
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:55:49.867

我不确定您是否需要解析您的地址才能收听。

你应该能够做到这一点：

```
listener, err := net.Listen("tcp", ":8080") 
```

而且您似乎对接收到的字节服务器端没有做任何事情（您丢弃了 的结果`Read`），这解释了为什么您认为您什么也没有收到。

请注意，您的代码一次只能处理一个连接。您应该在新的 goroutine 中处理每个打开的连接。

这是相关问题中[通过 TCP 进行客户端-服务器通信的示例。](https://stackoverflow.com/questions/11202058/unable-to-send-gob-data-over-tcp-in-go-programming/11202252#11202252)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:13:18.300

我不确定您期望的确切输出是什么，因为在我看来您没有打印任何内容，只是读取客户端中的输入。正如@dystroy 指出的那样，服务器然后丢弃它收到的内容，只检查通信中的错误。

此外，您的服务器似乎*应该*只是坐在那里听，因为您有它在一个循环中这样做。如果您查看 net 包的文档，它提供了一个如何运行服务器和客户端的示例。这是我从中制作的样本，对我有用。

**服务器**：

```
ln, err := net.Listen("tcp", ":8080")
// handle error
for {
    conn, err := ln.Accept()
    // handle error
    var cmd []byte
    fmt.Fscan(conn, &cmd)
    fmt.Println("Message:", string(cmd))
} 
```

**客户**：

```
conn, err := net.Dial("tcp", "127.0.0.1:8080")
// handle error
fmt.Fprintf(conn, "message\n") 
```

编辑添加：该程序的预期结果是您运行服务器并且它正在等待。然后，您在另一个终端中运行客户端，该终端立即退出，但现在服务器已打印“消息：消息”。如果您再次运行客户端，服务器将再次打印相同的消息。我在我的机器上测试了这段代码（只是添加代码来响应错误），它像宣传的那样工作。

# html - Safari 画布百分比字体大小

> ID：13644648
> 
> 赞同：0
> 
> 时间：2012-11-30T11:46:33.513
> 
> 标签：html, canvas, safari

我有一个包含在 div 中的可拖动/可调整大小的画布元素。当 div 展开时，canvas 元素也是如此。canvas 元素有一些文本 -> `context.font("100% Impact");`。每个浏览器都可以很好地呈现它，但是无论我输入多少百分比值，Safari 似乎都显示相同大小的文本。50% 呈现相同 100% 呈现与 1000% 相同...

有人知道如何解决这个问题吗？

谢谢！

编辑：我尝试在 html 和 body 上定义初始字体大小 =>

```
html, body { font-size: 16px; } 
```

但没有运气...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T22:37:01.583

原因之一`might be`是您的字体大小小于“用户”可接受的最小值

开：`Safari-Preferences-Advanced tab` 这是一个选项`Universal access - never use font sizes smaller than....`

因此，无论您设置什么字体大小，它都不会小于该限制

# java - 单击嵌套的 jcombobox 时防止 jLabel 失去焦点

> ID：13644649
> 
> 赞同：0
> 
> 时间：2012-11-30T11:46:35.700
> 
> 标签：java, swing, focus, jlabel, jcombobox

我正在制作一个应用程序，其中包含一些带有文本（rectangleName）的“矩形”（myLabel）。每当我单击该矩形时，都会显示一个组合框（nameComboBox）来更改它的名称。

所以这是那个类的声明。

```
public class myLabel extends JLabel implements MouseListener,FocusListener{

//this.panel;
JComboBox nameComboBox;
    String rectangleName; 
```

我在该类中添加了一些焦点内容，您可以看到它实现了 FocusListener。

我只想在重新聚焦时显示组合框，否则隐藏它。我遇到的问题是，当我选择一个矩形并显示组合框时，因为它具有焦点，当我单击组合框时，矩形失去焦点，因此它隐藏了组合框。有什么办法可以防止这种情况？

编辑：

回复@mKorbel，这是我的 SSCCE

```
import java.awt.Color;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

public class MyJLabel extends JLabel implements MouseListener,FocusListener{

JComboBox nameComboBox;
JPanel mainPanel;
String name;

public MyJLabel() {

    this.setLocation(10,10);

    this.setBounds(20, 20,200,200);

    this.setBackground(Color.LIGHT_GRAY);
    this.setFocusable(true);
    setOpaque(true);

    setHorizontalAlignment(SwingConstants.CENTER);
    setFont(getFont());
    setText(this.name);
    this.nameComboBox= new JComboBox(new String[] { "option1","option2","option3"  });
    this.nameComboBox.setBounds(40,40,100,50);
    this.nameComboBox.setVisible(false);
    this.addMouseListener(this);
    this.addFocusListener(this);
}
@Override
public void focusGained(FocusEvent e) {
    System.out.println("focus gained");
    this.nameComboBox.setVisible(true);
}
@Override
public void focusLost(FocusEvent e) {
    System.out.println("focus lost");
    this.nameComboBox.setVisible(false);

}
@Override
public void mouseClicked(MouseEvent e) {
    this.requestFocus();
}
@Override
public void mousePressed(MouseEvent e) {
    // TODO Auto-generated method stub

}
@Override
public void mouseReleased(MouseEvent e) {
    // TODO Auto-generated method stub

}
@Override
public void mouseEntered(MouseEvent e) {
    // TODO Auto-generated method stub

}
@Override
public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub

}
public static void main(String[] args) {

    MyJLabel myjl=new MyJLabel();

    JFrame fr = new JFrame();
    fr.setLayout(null);

    fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JComboBox otherCombo = new JComboBox(new String[] {  "otherOption1","otherOption2","otherOption3"  });
    otherCombo.setBounds(40,400,100,50);

    fr.add(myjl.nameComboBox);
    fr.add(myjl);
    fr.add(otherCombo);

    fr.setSize(300,500);
    fr.setVisible(true);
}
} 
```

您必须开始单击底部的组合，您会在控制台中看到焦点丢失。单击灰色矩形，将获得焦点。单击矩形内的组合，矩形会立即失去焦点并获得焦点，因此无法选择项目。当我与它的组合框交互时，我不想改变矩形的焦点。

# php - 如何在 Drupal 中添加我自己的 PHP 代码

> ID：13644650
> 
> 赞同：-3
> 
> 时间：2012-11-30T11:46:35.790
> 
> 标签：php, drupal

首先，我想说我对 Drupal 不太了解。但是我有一个要求，我应该将一个特定的模块（它不是一个 drupal 模块）从一个独立的网站集成到 drupal 网站。

该模块将从用户那里获取姓名和电子邮件 ID 作为输入，系统将生成一个密钥并将该密钥发送到用户提供的电子邮件 ID。这个模块已经实现了，我只是想把它放在 drupal 站点上。我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:08:47.637

查看模块开发者指南： [http ://drupal.org/developing/modules](http://drupal.org/developing/modules)

和drupal“安装模块”页面： [http ://drupal.org/documentation/install/modules-themes](http://drupal.org/documentation/install/modules-themes)

您还可以使用 template.php i 主题目录将代码添加到“主题”您的输出：http: [//drupal.org/node/173880](http://drupal.org/node/173880)

# iphone - 在 Instruments 中进行分析时 main.m 中的内存泄漏？

> ID：13644655
> 
> 赞同：3
> 
> 时间：2012-11-30T11:47:00.673
> 
> 标签：iphone, ios, memory-management, memory-leaks

在我的一个应用程序中，我在 UIKit、UIFoundation 和 QuartzCore 中遇到内存泄漏。当我去调用树时，它显示泄漏`main.m`。我真的不知道为什么会这样。您可以在下面看到内存泄漏的屏幕截图。![在此处输入图像描述](../Images/7b93129f3cb25e710445712a5d8de169.png)

**在调用树中**

![在此处输入图像描述](../Images/13f7d31d9afb381fcfe7d78e04376857.png)

**如何解决这种泄漏？**

**内存泄漏代码**

```
- (void) showCustomPrices
{

int priceValue = 0;
NSArray* priceSplitValue = [btnpriceButton.titleLabel.text componentsSeparatedByString: @"."];
NSString* priceFinal = [priceSplitValue objectAtIndex:0];

for(int i=0;i<[priceArray count];i++)
{ 
    if([[priceArray objectAtIndex:i] isEqualToString:priceFinal]){
        priceValue = i; 
    }
}

    //Assign the cocktail to picker view
    priceActionsheet = [[UIActionSheet alloc] initWithTitle:nil
                                              delegate:self
                                     cancelButtonTitle:nil
                                destructiveButtonTitle:nil
                                     otherButtonTitles:nil];//as we want to display a subview we won't be using the default buttons but rather we're need to create a toolbar to display the buttons on

    [priceActionsheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

    pricePickerview = [[UIPickerView alloc] initWithFrame:pickerFrame];
    pricePickerview.showsSelectionIndicator = YES;
    pricePickerview.dataSource = self;
    pricePickerview.delegate = self;

    [priceActionsheet addSubview:pricePickerview];
    //[pickerView release];

    priceToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 485, 44)];
    priceToolbar.barStyle = UIBarStyleBlackTranslucent;
    [priceToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
    [barItems addObject:doneBtn];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];
    [barItems addObject:cancelBtn];

    [pricePickerview selectRow:priceValue inComponent:0 animated:YES];//Memory leaks shows 100% here

    [priceToolbar setItems:barItems animated:YES];

    [priceActionsheet addSubview:priceToolbar];

    [priceActionsheet addSubview:pricePickerview];

    [priceActionsheet showInView:self.view];  

    [priceActionsheet setBounds:CGRectMake(0, 0, 485, 320)]; 
```

}

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:24:46.930

如果您的项目不是 ARC，可能是因为您在`[super dealloc];`某个地方留下了基础类的子类。我的子类也有同样的问题`NSObject`。我忘了写`[super dealloc];`，并且得到了一些类似的泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:08:59.870

最后，我通过将选择器视图`allocation/initialisation`部分从方法移动`showCustomePrices`到`viewwillAppear`. 没有任何内存泄漏，效果很棒。

之前发生的事情是每当我单击按钮时，它都会弹出`pickerview`内存分配。这就是发生内存泄漏的原因。

现在，在进入`viewwillAppear`它之后，只需在第一次加载视图时进行分配。然后在没有任何内存分配的情况下访问 Picker View。所以内存泄漏被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:37:57.047

```
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal; 
```

在你的 main.m 中试试这个

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T12:09:35.710

```
int main(int argc, char *argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, @"yourAppName", nil);
    [pool release];
    return retVal;
} 
```

# c# - 我可以在它通过之前提取一个通过 WCF 的对象，以便我可以先操作它吗

> ID：13644656
> 
> 赞同：0
> 
> 时间：2012-11-30T11:47:03.527
> 
> 标签：c#, .net, wcf, service, poco

所以我通过 WCF 发送实体。我想做的是有机会在它们过去之前以任何我想要的方式改变实体。我不必在 WCF 中执行此操作，但我没有看到其他地方可以执行此操作，因为我希望在一个地方执行此操作。

如果有人有其他方法可以接受建议:)

我有通常的 DAL、域和服务层。他们也都有一个共同点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:51:37.313

我认为您在谈论[消息检查器](http://msdn.microsoft.com/en-us/library/aa717047.aspx)

> 消息检查器是一个可扩展性对象，可以在服务模型的客户端运行时中使用，并以编程方式或通过配置调度运行时，并且可以在收到消息之后或发送消息之前检查和更改消息。
> 
> 此示例实现了一个基本的客户端和服务消息验证机制，该机制根据一组可配置的 XML Schema 文档验证传入消息。请注意，此示例不会验证每个操作的消息。这是有意的简化。

还可以查看[IParameterInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.aspx)，在这里您可以处理客户端和服务器端的所有输入/输出参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:00:11.777

我不确定我是否正确理解了您的要求，但我会试一试。

我认为您可能正在寻找[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)(DTO)。您可以在将实体的所有所需数据发送到服务之前将其放入 DTO。然后，该服务会处理包含的数据并将另一个 DTO 发送回您的客户端。

这样，您就可以完全控制 DTO 的结构以及您的服务和客户端真正需要的数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T14:12:33.950

扩展 Jen H 的答案：

无需检查消息并处理反序列化
已序列化结果的开销，您只需在从数据库中检索结果并将结果返回给客户端之前执行自定义逻辑即可。一种方法如下所示

```
public interface IDataTransferObject
{
        void CustomizeMeSomehow();
}

[DataContract]
public class MyDataTransferObject : IDataTransferObject
{
    public void CustomizeMeSomehow()
    {
          //Your custom logic here..
    }
}

public class MyService
{
      public List<MyDataTransferObject> GetObjects()
      {
          List<MyDataTransferObjects> items = Repository.RetrieveResults();

          foreach (var item in items)
               item.CustomizeMeSomehow();

          return items;
      }  
} 
```

# r - 向量序列上的子集数据框

> ID：13644660
> 
> 赞同：2
> 
> 时间：2012-11-30T11:47:19.693
> 
> 标签：r

我有数据框`df`，我想`df`根据分类中的数字序列进行子集化。

```
 x  <- c(1,2,3,4,5,7,9,11,13)
 x2 <- x+77 
 df <- data.frame(x=c(x,x2),y= c(rep("A",9),rep("B",9)))

 df
    x y
1   1 A
2   2 A
3   3 A
4   4 A
5   5 A
6   7 A
7   9 A
8  11 A
9  13 A
10 78 B
11 79 B
12 80 B
13 81 B
14 82 B
15 84 B
16 86 B
17 88 B
18 90 B 
```

我只想要`x`增加 1 的行，而不想要增加 2 的行`x`：例如

```
 x y
1   1 A
2   2 A
3   3 A
4   4 A
5   5 A
10 78 B
11 79 B
12 80 B
13 81 B
14 82 B 
```

我想我必须在元素之间做一些减法，并检查差异是否存在`>1`，并将其与 a 结合起来，`ddply`但这似乎很麻烦。`sequence`我缺少某种功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:38:06.610

使用差异

```
df[which(c(1,diff(df$x))==1),] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:01:08.210

您的示例似乎表现良好，@agstudy 的回答可以很好地处理。但是，如果您的数据有朝一日会发生变化...

```
myfun <- function(d, whichDiff = 1) {
  # d is the data.frame you'd like to subset, containing the variable 'x'
  # whichDiff is the difference between values of x you're looking for

  theWh <- which(!as.logical(diff(d$x) - whichDiff))
  # Take the diff of x, subtract whichDiff to get the desired values equal to 0
  # Coerce this to a logical vector and take the inverse (!)
  # which() gets the indexes that are TRUE.

  # allWh <- sapply(theWh, "+", 1)
  # Since the desired rows may be disjoint, use sapply to get each index + 1
  # Seriously? sapply to add 1 to a numeric vector? Not even on a Friday.
  allWh <- theWh + 1

  return(d[sort(unique(c(theWh, allWh))), ])
}

> library(plyr)
> 
> ddply(df, .(y), myfun)
    x y
1   1 A
2   2 A
3   3 A
4   4 A
5   5 A
6  78 B
7  79 B
8  80 B
9  81 B
10 82 B 
```

# ajax - 如何预览 图片上传完成后？

> ID：13644663
> 
> 赞同：0
> 
> 时间：2012-11-30T11:47:25.747
> 
> 标签：ajax, jakarta-ee, primefaces, graphicimage

我正在使用 PrimeFaces，我想`<p:graphicImage>`在执行上传操作后立即显示上传图像的预览。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:23:28.223

您可以使用[Primefaces 动态图像流](http://www.primefaces.org/showcase/ui/dynamicImage.jsf)

像这样

```
<p:fileUpload update="myImage" fileUploadListener="#{myBean.handleFileUpload}" ....

<p:graphicImage id="myImage" value="#{myBean.chart}" />

private StreamedContent chart;  

File chartFile = new File("someFile");

chart = new DefaultStreamedContent(new FileInputStream(chartFile), "image/png"); 
```

我从展示中获取了一些代码片段......但这足以获得一般的想法......

# objective-c - AVPlayerItem seekToTime 内存泄漏

> ID：13644667
> 
> 赞同：0
> 
> 时间：2012-11-30T11:47:52.550
> 
> 标签：objective-c, memory-leaks, avfoundation, avplayer

我有 4 个视图，我使用 AVPlayerItemDidPlayToEndTimeNotification 循环播放 1-2 秒的视频，如下所示：

```
- (void)playerItemDidReachEnd:(NSNotification *)notification
{
    AVPlayerItem *playerItem = [notification object];
    [playerItem seekToTime:kCMTimeZero];
} 
```

当我查看 Activity Monitor 仪器时，我注意到连续 10 kB/s 的内存泄漏。如果我评论 seekToTime 调用，泄漏就消失了。

有任何想法吗？

# sql-server - SQL Server 2012，geography.STContains，错误的结果？

> ID：13644669
> 
> 赞同：3
> 
> 时间：2012-11-30T11:48:02.797
> 
> 标签：sql-server, geospatial, sql-server-2012

我正在使用 SQL Server 2012 `geography.STContains`（[文档](http://msdn.microsoft.com/en-us/library/ff929274.aspx)），但我不明白为什么下面的代码会失败。

如果我切换到`geometry`它工作。

有人可以解释吗？

//丹尼尔

```
declare @geo geography
set @geo = geography::STPolyFromText('POLYGON ((17.519133203852 59.8297423369731, 17.5190071588812 59.8296936773323, 17.5189979955459 59.8298203729009, 17.5191345140461 59.8298223425544, 17.519133203852 59.8297423369731))', 4326)

-- Is not within
declare @p1 geography
set @p1 = geography::STPointFromText('POINT(17.5184709839477 59.829925754067)', 4326)

-- Is within
declare @p2 geography
set @p2 = geography::STPointFromText('POINT(17.519060 59.829774)', 4326) 

select
    @geo.STContains(@p1), -- should be 0 is 1
    @geo.STContains(@p2) -- should be 1 is 0 
```

**更新：** 如果我反转它们就可以了，但是我不明白：

```
declare @geo geography
set @geo = geography::STPolyFromText('POLYGON ((17.519133203852 59.8297423369731, 17.5190071588812 59.8296936773323, 17.5189979955459 59.8298203729009, 17.5191345140461 59.8298223425544, 17.519133203852 59.8297423369731))', 4326)

select
    @geo.STAsText() Polygon,
    @geo.STPointN(1).STAsText() Point1,
    @geo.STPointN(1).Lat Point1Latitud,
    @geo.STPointN(1).Long Point1Longitude 
```

结果是：

```
Polygon 
POLYGON ((17.519133203852 59.8297423369731, 17.5190071588812 59.8296936773323, 17.5189979955459 59.8298203729009, 17.5191345140461 59.8298223425544, 17.519133203852 59.8297423369731))

Point1  
POINT (17.519133203852 59.8297423369731)

Point1Latitud   
59,8297423369731

Point1Longitude
17,519133203852 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:35:45.463

现在我发现了问题。用户从右下角开始绘制多边形并顺时针方向移动。如果我从最大纬度重新排序这些点，然后通过对 long 进行逆向排序，lat 就可以了。为它找到了一个助手，但只有当你“知道这是错误的”时才有效：

```
if(sqlGeography.EnvelopeAngle() > 90)
    sqlGeography ? sqlGeography.ReorientObject(); 
```

只需组合一个可以修复我的价值观的小解决方案：[https ://github.com/danielwertheim/GeographyFactory](https://github.com/danielwertheim/GeographyFactory)

和一篇关于它的博文：http: [//danielwertheim.se/sqlgeography-in-sql-server-2012-polygon-must-start-on-correct-position/](http://danielwertheim.se/sqlgeography-in-sql-server-2012-polygon-must-start-on-correct-position/)

并跟进真正的“问题”，即左手规则：

[http://danielwertheim.se/sqlgeography-in-sql-server-2012-polygon-must-start-on-correct-position-no/](http://danielwertheim.se/sqlgeography-in-sql-server-2012-polygon-must-start-on-correct-position-no/)

# java - 在eclipse中比较文件的问题

> ID：13644674
> 
> 赞同：1
> 
> 时间：2012-11-30T11:48:37.487
> 
> 标签：java, eclipse, eclipse-plugin, myeclipse

当我使用 Windows 7 64 位时，我从网站 [http://subclipse.tigris.org/update_1.8.x安装了 SVN 插件版本 1.8](http://subclipse.tigris.org/update_1.8.x)

当我将任何文件与存储库中的最新文件进行比较时，比较未正确显示。请参考屏幕截图并建议我是否遗漏了什么。我也在日食靛蓝中遇到了这个问题。 ![ ](../Images/efbcdb1f87df820c89a4289e5f22cc6c.png)

![在此处输入图像描述](../Images/7f85b1a130dda18bc8a1c8af27a67ccd.png)

![在此处输入图像描述](../Images/ffbb2a9ed703623f41c6a49e98977cf2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:53:34.707

我遇到了这个问题，实际上它是在默认情况下对所有文件进行比较时考虑空格。

从菜单栏中打开 Window > Preferences 在左侧树形菜单中选择 General > Compare/Patch 检查“Ignore white space” 按 Apply，然后 OK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:06:36.190

你的意思是*同步视角*吗？

按 Ctrl+F8 并从列表中选择它。

如果它不存在，请单击*MyEclipse Java ...*旁边*的“带有加号图标的窗口”*，然后从出现的列表中选择它。

# .net - 父子数据上的xslt递归模板

> ID：13644680
> 
> 赞同：4
> 
> 时间：2012-11-30T11:49:27.650
> 
> 标签：.net, xml, xslt, recursion

我正试图围绕 xslt。关于stackoverflow帮助的一些问题（ [XSLT模板和递归](https://stackoverflow.com/questions/2835567/xslt-templates-and-recursion) 以及 [XSLT for-each循环，基于变量的过滤器](https://stackoverflow.com/questions/5709024/xslt-for-each-loop-filter-based-on-variable) ）但我仍然有点困惑。我想我“将模板视为函数”（[https://stackoverflow.com/questions/506348/how-do-i-know-my-xsl-is-efficient-and-beautiful](https://stackoverflow.com/questions/506348/how-do-i-know-my-xsl-is-efficient-and-beautiful)）

无论如何...我的数据是

```
<Entities>
    <Entity ID="8" SortValue="0" Name="test" ParentID="0" />
    <Entity ID="14" SortValue="2" Name="test2" ParentID="8" />
    <Entity ID="16" SortValue="1" Name="test3" ParentID="8" />
    <Entity ID="17" SortValue="3" Name="test4" ParentID="14" />
    <Entity ID="18" SortValue="3" Name="test5" ParentID="0" />
</Entities> 
```

我想要的输出基本上是“树视图”

```
<ul>
    <li id="entity8">
        test
        <ul>
            <li id="entity16">
                test3
            </li>
            <li id="entity14">
                test2
                <ul>
                    <li id="entity17">
                        test4
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li id="entity18">
        test5
    </li>
</ul> 
```

到目前为止，我所拥有的 XSLT 是错误的，因为它肯定“将模板视为函数”，并且在执行时还会抛出 StackOverflowException (:-))

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="html" indent="yes"/>

    <xsl:template match="Entities">
        <ul>
            <li>
                <xsl:value-of select="local-name()"/>
                <xsl:apply-templates/>
            </li>
        </ul>
    </xsl:template>

    <xsl:template match="//Entities/Entity[@ParentID=0]">
        <xsl:call-template name="recursive">
            <xsl:with-param name="parentEntityID" select="0"></xsl:with-param>
        </xsl:call-template>
     </xsl:template>

    <xsl:template name="recursive">
        <xsl:param name="parentEntityID"></xsl:param>
        <xsl:variable name="counter" select="//Entities/Entity[@ParentID=$parentEntityID]"></xsl:variable>

        <xsl:if test="count($counter) > 0">
            <xsl:if test="$parentEntityID > 0">
            </xsl:if>
                <li>
                    <xsl:variable name="entityID" select="@ID"></xsl:variable>
                    <xsl:variable name="sortValue" select="@SortValue"></xsl:variable>
                    <xsl:variable name="name" select="@Name"></xsl:variable>
                    <xsl:variable name="parentID" select="@ParentID"></xsl:variable>                    

                    <a href=?ID={$entityID}&amp;ParentEntityID={$parentID}">
                        <xsl:value-of select="$name"/>
                    </a>

                    <xsl:call-template name="recursive">
                        <xsl:with-param name="parentEntityID" select="$entityID"></xsl:with-param>
                    </xsl:call-template>

                </li>           
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

我知道如何通过代码做到这一点，没问题。不过，这一次，我正在寻找 xslt 中的解决方案，对此我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:16:38.617

尽管`call-template`命名模板是该语言的一个非常有用的功能，但如果您发现自己更喜欢它们，`apply-templates`这可能表明您仍在考虑函数而不是模板。如果您在命名模板中做的第一件事是选择要操作的节点集，则尤其如此。

这是您尝试执行的操作的简单版本。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:template match="/">
        <ul>
           <xsl:apply-templates select="Entities/Entity[@ParentID=0]" />
        </ul>
    </xsl:template>

    <xsl:template match="Entity">
        <li>
           <xsl:value-of select="@Name" />
           <xsl:apply-templates select="../Entity[@ParentID=current()/@ID]" />
        </li>
    </xsl:template>
</xsl:stylesheet> 
```

请注意，不需要计数器，因为“父”的值提供了必要的上下文。

另请注意`Entities`，无论它们在树中的哪个位置，它们都以相同的方式运行，它们包含它们的`@Name`值，并将模板应用于`Entity`@ParentID 与当前级别的@ID 匹配的任何对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:57:57.733

***正确*有效的*解决*方案（当前接受的答案不会产生想要的嵌套`ul`元素：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kChildren" match="Entity" use="@ParentID"/>

 <xsl:template match="/*[Entity]">
     <ul>
       <xsl:apply-templates select="key('kChildren', '0')">
            <xsl:sort select="@SortValue" data-type="number"/>
       </xsl:apply-templates>
     </ul>
 </xsl:template>

 <xsl:template match="Entity">
   <li id="entity{@ID}">
      <xsl:value-of select="concat('&#xA;               ', @Name, '&#xA;')"/>
      <xsl:if test="key('kChildren', @ID)">
          <ul>
            <xsl:apply-templates select="key('kChildren', @ID)">
              <xsl:sort select="@SortValue" data-type="number"/>
            </xsl:apply-templates>
          </ul>
      </xsl:if>
   </li>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Entities>
    <Entity ID="8" SortValue="0" Name="test" ParentID="0" />
    <Entity ID="14" SortValue="2" Name="test2" ParentID="8" />
    <Entity ID="16" SortValue="1" Name="test3" ParentID="8" />
    <Entity ID="17" SortValue="3" Name="test4" ParentID="14" />
    <Entity ID="18" SortValue="3" Name="test5" ParentID="0" />
</Entities> 
```

**产生了想要的正确结果：**

```
<ul>
   <li id="entity8">
               test
<ul>
         <li id="entity16">
               test3
</li>
         <li id="entity14">
               test2
<ul>
               <li id="entity17">
               test4
</li>
            </ul>
         </li>
      </ul>
   </li>
   <li id="entity18">
               test5
</li>
</ul> 
```

# mysql - 重命名mysql过程

> ID：13644684
> 
> 赞同：18
> 
> 时间：2012-11-30T11:49:47.470
> 
> 标签：mysql, rename, procedure

有谁知道重命名mysql存储过程/函数的语法是什么？或者这甚至在 MySQL 中得到支持？我已经在谷歌上搜索了几分钟...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T11:52:21.683

试试这个

```
 UPDATE `mysql`.`proc`
SET name = '<new_proc_name>',
specific_name = '<new_proc_name>'
WHERE db = '<database>' AND
  name = '<old_proc_name>'; 
```

另请注意：如果已为此过程授予用户权限，您还需要更新 procs_priv 中的过程名称。

```
UPDATE `mysql`.`procs_priv`
SET Routine_name = '<new_proc_name>'
WHERE Db = '<database>' AND
  Routine_name = '<old_proc_name>';
 FLUSH PRIVILEGES; 
```

来源：[MySQL 论坛 :: Newbie :: 重命名存储过程语法](http://forums.mysql.com/read.php?10,274538,274563)

# jquery - 从 img 请求中获取响应

> ID：13644690
> 
> 赞同：2
> 
> 时间：2012-11-30T11:50:09.620
> 
> 标签：jquery, error-handling, image

如何获取（非 ajax）图像请求的响应。

使用 jQuery 我正在做：

```
$('#myimg').error(function(err) {
    console.error(err);
} 
```

然而，这个 err 对象没有从服务器发送的响应。我可以在 chrome 开发工具中查看错误响应.. 这是此错误的预期响应，但是如何从 javascript/jquery 访问该消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:02:59.910

我不认为有一种方法可以做到这一点，
而是在引发错误事件时进行 ajax 调用

```
$('img').error(function(err){
    var src = $(this).attr('src');
    $.ajax(src,[settings]);
})
$('img')[0].src = "http://asdasdasd.com"​;​​​​​ 
```

`ajax`您将在调用的错误处理程序中得到响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:18:55.867

如果您指的是 HTTP 响应，我认为您无法通过 Javascript 获得它。说明您要实现的目标，并且可能还有其他适合您需求的解决方案。

我使用[加载](http://api.jquery.com/load-event/)和[错误](http://api.jquery.com/error/)事件创建了一个[小演示。](http://jsfiddle.net/st3fan/RtX4G/)

**Javascript**

```
$('img').load(function(e) {
    // Image loaded
    console.log(e.type, e);
})
.error(function(e) {
    // Failed to load image
    console.log(e.type, e);
    $(this).addClass('error');
    // NOTE: You could also change the src attribute.
});​ 
```

**CSS**

```
img {
    width: 200px;
    height: 200px;
    margin: 10px;
    background: url('http://placekitten.com/g/200/200') no-repeat;
}
.error { border: 2px dashed red; }​ 
```

**HTML**

```
<img id="img1" src="http://placekitten.com/200/200" />
<img id="img2" src="http://placekitten.com/no/such/file" />​ 
```

# c# - C# 支持的数据类型总数

> ID：13644691
> 
> 赞同：-3
> 
> 时间：2012-11-30T11:50:22.227
> 
> 标签：c#, types

我在一家跨国公司完成了我的培训，在我的项目映射面试中，他们问了这些问题..我不确定他们......请帮忙

1) C# 中有多少种数据类型？这些是什么？

2）什么是抽象构造函数？您可以实施它们的情况或场景是什么？

感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:04:21.247

> **1\. C#中有多少种数据类型？**

技术上是无限的，因为任何类/结构都可以被认为是一种“*数据类型*”。

我认为这里的潜在含义是，有多少原始类型，它们是什么？

**他们是：**

```
byte, sbyte, short, ushort, int, uint, long, ulong, float, double, decimal, string, char, bool 
```

我认为这几乎涵盖了它......可能有一些缺失/额外的。您还可以将 DateTime 和 BigInteger 等数据类型视为数据类型。（虽然这些不是原始的）。

> **2.什么是抽象构造函数？您可以实施它们的情况或场景是什么？**

抽象构造函数是定义为抽象类的一部分的构造函数。该类不能被构造/实例化，因为它是抽象的，但是可以从抽象类的派生类中调用构造函数。因此，当您覆盖/实现抽象类（父级）时，您的实现类（子级）可以利用/调用父级中的抽象构造函数。

# asp.net-mvc - Page Inspector Runtime 必须在根 web.config 中注册。警告

> ID：13644703
> 
> 赞同：1
> 
> 时间：2012-11-30T11:51:09.670
> 
> 标签：asp.net-mvc, visual-studio-2012

在 VS 2012 更新 1 中，

运行页面检查器时，我收到“必须在 root web.config 中注册页面检查器运行时”警告。

任何人都可以帮助我解决这个问题。或者其他一些解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-19T17:37:02.567

我意识到这是一个老问题，但由于它是在搜索与 VS 2019 仍然相关的同一问题时出现的，所以我想我会提供实际答案：

这里提到的错误是指在 GAC 中需要在机器级 web.config 中发生的文件注册。不像其他答案提到的那样，在项目的 web.config 文件中。

机器级 web.config 文件位于（对于 .net 4+，我假设现在所有人都在使用）`c:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\web.config`

这是您需要添加的内容：

```
<configuration>
  ..
  <system.web>
    ...
    <compilation>
      <assemblies>
        ...
        <add assembly="Microsoft.VisualStudio.Web.PageInspector.Loader, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
      </assemblies>
    </compilation>
  </system.web>
</configuration> 
```

在您的机器级 web.config 文件中显然还有更多内容 - 我只是如上所示显示它，以便您看到它需要的层次结构。

通常这是由 VS 安装程序添加的。但是在某些情况下，安装程序无法添加甚至删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T08:28:34.403

将上面@Vicky_Raj_Sharma 建议的键/值和下的“PageInspector:ServerCodeMappingSupport”添加到“web.config”，如下所示：

```
<appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <!-- Keys above came with Hot Towel SPA template for VS2012 -->
    <!-- Keys below where manually added -->
    <add key="VisualStudioDesignTime:Enabled" value="true" />
    <add key="PageInspector:ServerCodeMappingSupport" value="Enabled"/>
 </appSettings> 
```

从 VS 中浏览页面（使用菜单浏览）时，它将在您首选的浏览器中显示该页面。

仍然没有弄清楚如何直接在 IIS8 上运行它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T14:37:08.873

要生成其某些功能所需的元数据，Page Inspector 必须通过将以下设置添加到 Web.config 文件中的元素来检测项目。即使此设置被禁用或丢失，您也可以使用 Page Inspector。但是，源选择映射等某些功能在这些条件下将不起作用。

网页配置

```
<add key="VisualStudioDesignTime:Enabled" value="true" /> 
```

# c# - 在我的 Windows 应用商店应用程序中添加词汇表的最优化方式是什么？

> ID：13644709
> 
> 赞同：1
> 
> 时间：2012-11-30T11:51:41.347
> 
> 标签：c#, xaml, windows-8

我需要做的是在我的应用程序中添加一个单词列表。我需要这个，因为当用户点击一个按钮时，我希望应用程序从这个列表中检索 3 个随机单词。那么，如何在我的 Windows 应用商店应用程序中添加这些词呢？听说这种应用程序不支持数据库，那我应该走哪条路呢？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:57:16.387

取决于单词列表，以及您希望存储的对象大小。

如果它是一个小的单词列表，那么您可以使用隔离存储。我喜欢使用 GenericObjectStorageHelper。

[http://winrtstoragehelper.codeplex.com/](http://winrtstoragehelper.codeplex.com/)

或者（也是我对大多数情况的建议）是通过 Web 服务传递 3 个单词。WinRT 被设计为可移动的（支持表面等），并且实施分离的服务层是推荐的模式。如果您有 1k+ 条记录可供选择，这将特别有用，因为它将最大限度地减少应用程序的存储需求。

创建 WCF Web 服务：

[http://blogs.msdn.com/b/ericwhite/archive/2010/05/11/getting-started-building-a-wcf-web-service.aspx](http://blogs.msdn.com/b/ericwhite/archive/2010/05/11/getting-started-building-a-wcf-web-service.aspx)

# android - 从浏览器 url 方案启动应用程序

> ID：13644712
> 
> 赞同：14
> 
> 时间：2012-11-30T11:51:42.473
> 
> 标签：android, android-intent

感谢许多好帖子，我一直在尝试使用以下代码从浏览器链接启动我的 Android 应用程序。请帮我调整清单和 href 以调用我的应用程序 -

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.afs"
  android:versionCode="1"
  android:versionName="1.1">
  <supports-screens
  android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="false"
    android:resizeable="true"
    android:anyDensity="true"/>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
<uses-sdk android:minSdkVersion="9"></uses-sdk>
<application android:label="@string/app_name" android:icon="@drawable/afs"        android:debuggable="true">
      <activity android:name=".afs"
              android:label="@string/app_name"
              android:configChanges="keyboardHidden|orientation"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
         <intent-filter>
             <data android:scheme="afs.com.afs"/>
             <data android:name="android.intent.action.VIEW" />
             <category android:name="android.intent.category.DEFAULT" />
             <category android:name="android.intent.category.BROWSABLE" />
         </intent-filter>    
    </activity>
</application> 
```

HTML 代码

```
<a href="afs.com.afs:75235">Launch Application</a> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-30T13:18:26.517

[来自文档](http://developer.android.com/guide/topics/manifest/data-element.html) 的属性`scheme://host:port/path`或`pathPrefix`或`pathPattern`。

您需要更改正确定义方案和主机定义。如果您不指定方案，则所有 URI 属性都将被忽略，并且不会被应用。

您可以使用`http`URI 方案。

```
 <data android:scheme="http" android:host="afs.com.afs"/> 
```

并在 HTML

```
<a href="http://afs.com.afs:75235">Launch Application</a> 
```

或者定义自己的 URL 方案。

```
 <data android:scheme="myapp" android:host="afs.com.afs"/> 
```

并在 HTML

```
<a href="myapp://afs.com.afs:75235">Launch Application</a> 
```

PS。

改变这个

```
 <data android:name="android.intent.action.VIEW" /> 
```

到

```
 <action android:name="android.intent.action.VIEW" /> 
```

# windows-phone-7 - dataTemplate 内边框或堆栈面板的动态背景颜色

> ID：13644713
> 
> 赞同：0
> 
> 时间：2012-11-30T11:51:43.570
> 
> 标签：windows-phone-7, colors, listbox, datatemplate

我有这个列表框代码

```
<ListBox x:Name="listaAdd" FontSize="30" Foreground="{StaticResource PhoneForegroundBrush}" ItemsSource="{Binding ListaMercados}"  Grid.Row="0"   UseLayoutRounding="False" Margin="0,0,0,52"  LayoutUpdated="listaAdd_LayoutUpdated" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid HorizontalAlignment="Stretch" Grid.Row="1" Width="480" >
                    <Grid.Background>
                        <SolidColorBrush Color="Transparent"/>
                    </Grid.Background>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="80"/>
                    </Grid.RowDefinitions>
                    <Border x:Name="borda" Tap="Borda_OnTap" Background="Transparent">
                        <ListBoxItem  x:Name="listSelected" 
                                      Grid.Row="1"
                                      IsSelected="True"
                                      VerticalAlignment="Center"  
                                      FontSize="25" 
                                      Content="{Binding Nome}"  
                                      HorizontalContentAlignment="Left" 
                                      Height="80" 
                                      Tap="ListSelected_OnTap" 
                                      FontFamily="Segoe UI" Margin="10,0,0,0" >
                            <ListBoxItem.Foreground>
                                <SolidColorBrush Color="#DEFFFFFF"/>
                            </ListBoxItem.Foreground>
                        </ListBoxItem>
                    </Border>
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu x:Name="subMenulist" Padding="0,0,0,0" FontFamily="Segoe UI" FontSize="32" Margin="0" VerticalAlignment="Center" Grid.RowSpan="1" Grid.ColumnSpan="1" TabNavigation="Local" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Background="White" >
                            <Button Grid.Column="1" 
                                        Content="excluir"  
                                        x:Name="btnExcluirDoSubMenu" 
                                        BorderThickness="0" 
                                        Margin="0,20,0,0" 
                                        Click="btnExcluirDoSubMenu_Click_1" 
                                        Foreground="#FF1A739D" 
                                        FontSize="32" 
                                        HorizontalContentAlignment="Stretch" Height="Auto" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch" >
                                <Button.Background>
                                    <SolidColorBrush Color="White"/>
                                </Button.Background>
                            </Button>
                            <Button Grid.Column="1" 
                                        Content="compartilhar" 
                                        Margin="0,-20,0,0" 
                                        x:Name="btnShare" 
                                        BorderThickness="0"
                                        Click="btnShare_Click_1" 
                                        Foreground="#FF1A739D" 
                                        FontSize="32" 
                                        HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Background="White"/>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我的列表框数据来自投标项目源，这是我的问题

对于每个新行（列表框），我需要在两种颜色之间更改背景颜色示例：第一行：蓝色第二行：红色第三行：蓝色第四行：红色。. . 如果我无法访问标签内的项目，我该如何更改背景颜色？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:48:44.320

您可以使用相同的数据绑定原则将列表框项模板中每个项目的背景属性绑定到颜色。

# postgresql - 控制台 pgAdmin 类软件

> ID：13644714
> 
> 赞同：4
> 
> 时间：2012-11-30T11:51:45.597
> 
> 标签：postgresql, ssh, console, pgadmin

我喜欢 pgAdmin III GUI 软件，但 GUI 使用的带宽比 SSH 控制台多。

psql 不是交互式的，没有菜单、表格列表等。

是否存在一些用于连接 PostgreSQL 的交互式文本模式工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T22:57:01.500

PostgreSQL 没有文本模式窗口和菜单 curses/ncurses 样式的文本模式界面；没有等效于 PgAdmin-III 的 ncurses。

我强烈建议学习`psql`并适应它。您可以远程使用 PgAdmin-III，如下所述，但从长远来看，如果您学习`psql`.

## 通过 ssh 隧道或直接连接使用 PgAdmin-III

您始终可以通过 ssh 隧道或远程 TCP/IP 连接与 PgAdmin-III 连接。这样，您就不会通过网络传输所有 GUI 数据，而只是传输 PostgreSQL 协议数据。

对于 ssh，请执行以下操作：

```
ssh -L 15432:localhost:5432 remote_host 
```

然后在 ssh 会话打开时，连接到`localhost`端口`15432`以连接到远程数据库。

即使远程数据库仅在侦听，这也将起作用`127.0.0.1`。如果您 ssh 进入堡垒主机然后从那里连接到数据库服务器，它也可以工作；只需`localhost`将`-L`参数更改为 Pg 服务器的 IP/主机名。有关更多信息，请参阅`ssh`手册，特别`LocalForward`是 IP 转发、`ProxyCommand`自定义多层隧道和`-D`动态 SOCKS 代理选项。

`socat`通过在 unix 套接字和 TCP 之间运行代理，甚至可以使用 ssh 隧道连接到仅侦听 unix 套接字连接的服务器。

当您连接到 Windows 主机时，这些都不起作用，但[`rdp2tcp`可用于通过 RDP 连接建立 TCP 隧道](http://rdp2tcp.sourceforge.net/)以获得类似的效果。看到[这个问题](https://superuser.com/questions/130552/tunneling-a-tcp-ip-connection-through-remote-desktop-connection)。

## 使用 psql

`psql`非常互动。虽然它不是一个 GUI 窗口界面，但它不仅仅是一个脚本工具。它通过`\d`命令、大量信息通过`\h`、选项卡完成、分页、`\e`中断命令编辑和许多其他交互式功能提供了对系统的大量可见性。

用于`\?`psql 帮助，以及`\h SQL_COMMAND`特定 SQL 命令的语法，例如`\h INSERT`.

# windows-phone-7 - Windows phone 8 全景控件是否不能仅使用一个全景项目滑动？

> ID：13644721
> 
> 赞同：2
> 
> 时间：2012-11-30T11:52:10.123
> 
> 标签：windows-phone-7, windows-phone-8

我正在将我的 Windows Phone 7.5 应用程序移植到 Windows Phone 8 上，我开始知道在 WP8 全景控件中不会只用一个全景项目滑动或轻弹。

但是在我的 WP 7.5 应用程序中，我只使用了一个全景项目来显示来自服务器的内容。而且我还在 WP 8 的模拟器上检查了我的 WP 7.5 应用程序，它对我来说效果很好。
我没有 Windows Phone 8 设备，所以我只想确认我的 WP 7.5 应用程序是否也可以与 Windows Phone 8 中的单个全景项目一起正常工作，还是我需要在全景控件中制作至少 2 个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:38:19.383

在 WP8 设备或模拟器上运行的 WP7 应用程序的行为应与在 WP7 上的行为相同。也就是说，您可以通过在 WP8 模拟器上运行 WP7 应用程序来检查（假设您有 WP8 SDK，如果您正在做一个移植）。您可以使用应用程序部署工具将您的 WP7 XAP 加载到您选择的 WP8 模拟器上，或者如果您的项目仍然以 WP7.5 为目标并且尚未升级到 WP8，则也可以从 VS2012 加载。

# javascript - 获取 JavaScript 中跨度的 id。

> ID：13644729
> 
> 赞同：0
> 
> 时间：2012-11-30T11:52:37.213
> 
> 标签：javascript, html

我想在 JavaScript 中获取跨度 ID，代码始终返回 M26，但我希望在不同的单击 M26 或 M27 上有不同的值：

```
function clickHandler() {
    var xid= document.getElementsByTagName("span");
    var xsp= xid[0].id;   
    alert(xsp);     
} 
}

<html>
    <BODY LANGUAGE = "javascript" onClick = "clickHandler();">
        <a href="javascript:void(0)"><u><b><span id=M26>2011-  
        2012</span></b></u></a>   
        <div id=c26 STYLE="display:none">
            <a href="javascript:void(0)"><u><b><span id=M27>2012-  
            2013</span></b></u></a>   
        <div id=c27 STYLE="display:none"> 
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:57:57.903

您面临的问题是，`var xid= document.getElementsByTagName("span");`无论您单击何处，都会在页面上获取所有跨度。

要解决此问题，您应该只在函数中传递对单击对象的引用。例如：

```
<span id=M26 onclick="clickHandler(this);" >2011-2012</span> 
```

然后在您的 javascript 代码中：

```
function clickHandler(object) {
    alert(object.id);
} 
```

然而，将事件绑定在 javascript 中而不是内联在 html 标记中是一个好主意。

本文[介绍](http://triaslama.wordpress.com/2008/07/22/four-ways-javascript-binding-event-listeners/)了将事件绑定到元素的不同方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:14:17.477

有几种方法可以获取刚刚被点击的元素的id：

传递`this`对处理程序的引用：

```
onclick="handlerFunc(this);"> 
```

或者，更好的是，将*事件对象*传递给处理程序，这也允许您操纵事件的行为：

```
onclick='handlerFunc(event);'>
//in JS:
function handlerFunc(e)
{
    e = e || window.event;
    var element = e.target || e.srcElement;
    element.id;//<-- the target/source of the event (ie the element that was clicked)
    if (e.preventDefault)
    {//a couple of methods to manipulate the event
        e.preventDefault();
        e.stopPropagation();
    }
    e.returnValue = false;
    e.cancelBubble = true;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T12:04:43.510

您可以为此使用 getAttribute() 函数...

```
function clickHandler() {
var xid= document.getElementsByTagName("span");
var xsp= xid[0].getAttribute('id');   
alert(xsp);     
} 

<html>
<body LANGUAGE = "javascript" onload = "clickHandler();">
    <a href="javascript:void(0)"><u><b><span id=M26>2011-  
    2012</span></b></u></a>   
    <div id=c26 STYLE="display:none">
        <a href="javascript:void(0)"><u><b><span id=M27>2012-  
        2013</span></b></u></a>   
    <div id=c27 STYLE="display:none"> 
</body>
</html> 
```

[见工作演示](http://jsfiddle.net/Dineshkani/8wSKM/)

# java - When send data from android to php logcat warning

> ID：13644730
> 
> 赞同：0
> 
> 时间：2012-11-30T11:52:44.810
> 
> 标签：java, php, android, httpclient, logcat

When I try to send data from android to php, I get these yellow warnings on logcat:

> Invalid use of SingleClientConnManager: connection still allocated

and:

> W/SingleClientConnManager(274): Make sure to release the connection before allocating another one.

My codes like this:

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("email", "")); 
    InputStream is=null;
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://zzzzz.com/zzz.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        httpclient.execute(httppost);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is=entity.getContent();

    } catch (IOException e) {
    } 
```

And in my zzz.php I have:

```
<?php

 $email = "aaa";

 if (session_id() == "")
 {
  session_start();
 }
 if (!isset($_SESSION['username']))
 {
   header('Location: ./index.php');
   exit;
 }
 else
 {

 $username = "******";
 $password = "****";
 $host = "****";
 $database = "****";

 $db = mysql_connect($host, $username, $password);
 if (!$db)
  {
  die('Failed to connect to database server!<br>'.mysql_error());
  }
 else
  {
   mysql_select_db($database, $db) or die('Failed to select database<br>'.mysql_error()); 
   mysql_query("UPDATE Users SET lat='".$email."' WHERE username='{$_SESSION['username']}'");
  }
}
?> 
```

By the way, I know mysql_query deprecated, I'll change it. Anyway above codes does not work. I mean it doesn't write "aaa" on lat value in mysql. Where is wrong ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:55:47.263

在我看来， $_SESSION['username'] 任何时候都没有设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:39:43.443

你需要这两行吗？

```
 httpclient.execute(httppost);
 HttpResponse response = httpclient.execute(httppost); 
```

# php - 将所有 www 重定向到非 www 站点，但一个站点除外

> ID：13644736
> 
> 赞同：0
> 
> 时间：2012-11-30T11:53:24.223
> 
> 标签：php, .htaccess, redirect

我的服务器上运行的站点很少。我希望所有站点都从 www 更改为 non-www 除了一个站点`www.abc-xyz.org`。所以我先写了具体的规则，然后是通用的。但它不工作。当我试图`www.abc-xyz.org`在浏览器中打开它时，它会进入无限循环。

我的 .htaccess 文件

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.abc-xyz\.org [NC]
RewriteRule ^(.*)$ http://www.abc-xyz.org/$1 [R=301,L]

#Generic redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:06:32.140

循环正如预期的那样，因为页面一直在加载。您要做的是删除第一个重定向，并在第二个重定向中添加“非”条件。

```
RewriteCond %{HTTP_HOST} !^www\.abc-xyz\.org [NC]
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

# c# - Correct exception to throw for an unhandled switch case for an argument?

> ID：13644737
> 
> 赞同：14
> 
> 时间：2012-11-30T11:53:34.300
> 
> 标签：c#, .net, exception

**NOTE**: This is different than the proposed duplicates as this deals with an argument rather than a value. The behavior and applicable scenarios are essentially different.

Say we have `SomeEnum` and have a switch statement handling it like:

```
enum SomeEnum
{
    One,
    Two,
}

void someFunc(SomeEnum value)
{
    switch(value)
    {
        case SomeEnum.One:
            ...
            break;
        case SomeEnum.Two:
            ... 
            break;
        default:
            throw new ??????Exception("Unhandled value: " + value.ToString());    
    }
} 
```

As you see we handle all possible enum values but still keep a default throwing an exception in case a new member gets added and we want to make sure we are aware of the missing handling.

My question is: what's the right exception in such circumstances where you want to notify that the given code path is not handled/implemented or should have never been visited? We used to use `NotImplementedException` but it doesn't seem to be the right fit. Our next candidate is `InvalidOperationException` but the term doesn't sound right. What's the right one and why?

**EDIT**: C# 8.0 introduced [switch expressions](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/switch-expression) which produce compiler warnings for non-exahustive switch statements. That's another reason why you should use switch expressions over switch statements whenever applicable. The same function can be written in a safer way like:

```
void someFunc(SomeEnum value)
{
    _ = value switch
    {
        SomeEnum.One => ....,
        SomeEnum.Two => ...., 
    }
} 
```

When a new member gets added to `SomeEnum`, the compiler will show the warning *"CS8509: The switch expression does not handle all possible values of its input type (it is not exhaustive). For example, the pattern 'EnumHandling.SomeEnum.Three' is not covered."* for the switch expression which makes it way easier to catch potential bugs.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T11:54:56.260

`ArgumentException` looks the most correct to me in this instance (though is not defined in the BCL).

There is a specialized exception for enum arguments - [InvalidEnumArgumentException](http://msdn.microsoft.com/en-us/library/system.componentmodel.invalidenumargumentexception.aspx):

> The exception thrown when using invalid arguments that are enumerators.

An alternative is [ArgumentOutOfRangeException](http://msdn.microsoft.com/en-us/library/system.argumentoutofrangeexception.aspx):

> The exception that is thrown when the value of an argument is outside the allowable range of values as defined by the invoked method.

The logic for using these is that the passed in argument (`value`) is not valid as far as `someFunc` is concerned.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-30T11:58:11.787

我会抛出，[`InvalidEnumArgumentException`](http://msdn.microsoft.com/en-us/library/system.componentmodel.invalidenumargumentexception.aspx)因为它会在这种情况下提供更详细的信息，你正在检查一个枚举

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T11:55:47.277

由于您在函数中有登录名，因此您可以抛出[InvalidArgumentException](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.common.invalidargumentexception.aspx)。

> **将无效参数传递给与**服务器的引用连接上的方法时引发的异常。

**编辑：** 更好的选择是：[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)，因为`InvalidArgumentException`在`Microsoft.SqlServer.Management.Common`命名空间中。就像是：

```
throw new ArgumentException("Unhandled value: " + value.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:03:16.300

如果您使用的是代码合同（我*强烈*推荐），您可以将其放在方法的开头：

```
Contract.Requires(value == SomeEnum.One || value == SomeEnum.Two); 
```

如果要检查具有太多单个值而无法显式写入它们的枚举范围，可以这样做：

```
Contract.Requires(SomeEnum.One <= value && value <= SomeEnum.Two); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:59:36.250

无效参数异常。当用户传递一些无效值或需要 value 值时的 null 值时，建议处理 InvalidArgumentException 。

# objective-c - how can I see what methods are slowing the display of my UIViewController?

> ID：13644739
> 
> 赞同：3
> 
> 时间：2012-11-30T11:53:40.190
> 
> 标签：objective-c, ios, xcode

I have a very complex UIViewController that loads extremely slow sometimes, it can take 4 or 5 seconds.

I do use Core Data and I have `-com.apple.CoreData.SQLDebug 1` set and have ruled out that it is the loading of my data. `CoreData: annotation: total fetch execution time: 0.0166s for 314 rows.`

I do have this data loaded into a UITableView but was under the impression only the first visible rows get renderend so no matter how many rows I have (< 500 currently) it should not slow the display of the UIView.

I looked at instruments and checked out Time Profiler but I did not see a way to tell which method in this UIView would be slow.

Any suggestions?

**UPDATE:**
For me this was caused by my custom row heights, those all have to get calculated FIRST before any data in shown:
[heightForRowAtIndexPath being called for all rows & how many rows in a UITableView before performance issues?](https://stackoverflow.com/questions/5324205/heightforrowatindexpath-being-called-for-all-row-how-many-rows-in-a-uitablevie)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:06:01.990

我最近有一个`UITableViewController`通过 Core Data 管理约 8000 行的设备。数据是用`NSFetchedResultsController`; 我不知道您是否正在使用`NSFetchedResultsController`a `NSFetchRequest`，但如果您要呈现通过 Core Data 填充的表格，我强烈推荐它。

也就是说，当您创建一个`NSFetchRequest`以提高获取和渲染的性能时，您可以做很多调整，这就是我猜性能瓶颈所在。您可以获取成批的行，以便表格的初始呈现速度很快，并且在用户滚动表格时执行额外的提取：

```
[fetchRequest setFetchBatchSize:25]; 
```

我建议阅读 Apple 的性能调整和核心数据指南：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html)

由于您使用的是 Instruments，还请检查（根据上面的链接）Core Data 缓存未命中、获取和保存。这可能会让你知道时间花在了哪里。

您还可以尝试设置断点表方法，例如`cellForRowAtIndexPath:`查看加载视图时渲染的行数与用户滚动表视图时的行数。

我还设置了以下内容，这似乎可以提高我的情况下的性能：

```
[fetchRequest setShouldRefreshRefetchedObjects:YES];
[fetchRequest setReturnsObjectsAsFaults:NO]; 
```

回复：故障，这是 Apple 的`NSFetchedRequest`文档中所说的：

> 默认值为是。如果结果类型（参见 resultType）是 NSManagedObjectIDResultType，则不使用此设置，因为对象 ID 没有属性值。如果您知道需要从返回的对象访问属性值，则可以将 returnObjectsAsFaults 设置为 NO 以获得性能优势。

核心数据可能非常复杂。如果您只打算使用一次，`NSManagedObjectContext`请查看 Erica' Sadun 的“核心数据助手”，来自她出色的 iPhone 开发者食谱。如果您要使用 Core Data 做很多事情，我强烈建议您使用它来处理合并嵌套、处理多个线程等`MagicalRecord`的大量繁重工作： [https ://github.com/magicalpanda/MagicalRecord](https://github.com/magicalpanda/MagicalRecord)`NSManagedObjectContexts`

希望这可以帮助！

# ruby-on-rails-3 - 输入 ISBN 号 Rails 3 时从 API 检索信息

> ID：13644746
> 
> 赞同：0
> 
> 时间：2012-11-30T11:54:03.357
> 
> 标签：ruby-on-rails-3, api

首先，我知道我有一些与此有关的阅读材料，但我正在寻找解决此问题的 Rails 方式

我将建立一个简单的书库，您可以在其中添加书籍，但不是通过长表格手动输入所有信息，如果我可以输入 ISBN 号并通过 api 检索所有信息，那就太好了。我相信谷歌数据有这样的api？还是有人使用其他东西？这将是我第一次使用 api，所以任何可以帮助我的建议/资源将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:58:07.553

似乎有一项服务可以提供您正在寻找的东西 - [http://isbndb.com/docs/api/20-structure.html](http://isbndb.com/docs/api/20-structure.html)

导轨代码：

```
require 'open-uri'
class BookController < ApplicationController
  def searchbook
     resp = open("http://isbndb.com/api/books.xml?access_key=#{YOUR_API_KEY}&results=details&index1=isbn&value1=#{params[:isbn]}")
     doc = Nokogiri.XML(resp.read)
     # ... process response here
  end
end 
```

[在此处](http://nokogiri.org/)阅读有关 nokogiri 的解析功能
至于 api 实际上是什么以及它是如何工作的，我认为[这](https://softwareengineering.stackexchange.com/questions/35939/how-do-web-apis-work)是一个很好的起点。

# android - After update the APK supports fewer devices than previously

> ID：13644748
> 
> 赞同：7
> 
> 时间：2012-11-30T11:54:24.630
> 
> 标签：android, android-manifest, android-2.3-gingerbread, android-2.2-froyo, zbar

I have a relative simple App that was already in the Play-Store of Google.

Now I've made an Update of this App. One Point of this Update was that I include the ZBar-Scanner. The Rest of the changes were minimal and shouldn't have any influence on my problem.

I just put the newest verison of my App in the Play-Store and I get following warning: "Warning: Active APKs support fewer devices than previously active APKs. Some users will not receive updates."

I've downloaded ZBarAndroidSDK-0.2.zip from sourceforge.net (http://sourceforge.net/projects/zbar/files/AndroidSDK/) and import it to my project as it is explained in the README-File.

I tested my App local on my HTC Wildfire S (->Version 2.3.5), on Samsung Galaxy 3 (GT-I5800 -> Version 2.2) and on my Galaxy Nexus (-> Version 4.2). There was never a Problem. Everything worked. I also tested the exported APK and had no Problems.

Now I add this APK to the Play-Store and updated my App and I get the warning for the tested devices. Neither my HTC Wildfire, nor my Samsung Galaxy 3 can update the new version.

Can anybody help me and explain me whats the Problem?

Thanks a lot!!!

**EDIT:**

My Manifest:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.myproject"
android:versionCode="5"
android:versionName="2.0" 
android:installLocation="preferExternal"
>

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11"/>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.CAMERA"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/>

<application
    android:uiOptions="splitActionBarWhenNarrow"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    >

    <!-- enable the search dialog to send searches to SearchableActivity throughout the application -->
    <meta-data
        android:name="android.app.default_searchable"
        android:value=".SearchableActivity" />

    <activity
        android:label="@string/app_name"
        android:name=".MainActivity" 
        android:screenOrientation="portrait"
        android:theme="@style/Theme.NoBackground">                                  

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

    <activity
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:name=".zbar.ZBarScannerActivity">                            
    </activity>

</application> 
```

And the Manifest of ZBar:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="net.sourceforge.zbar.android.CameraTest"
  android:versionCode="1"
  android:versionName="1.0">

<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<application android:label="@string/app_name" >
    <activity android:name="CameraTestActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:17:25.123

首先，所用设备的任何变化都必须是清单的结果。这是 Android 市场 (Google Play) 用来确定应用程序可以在哪些设备上运行的唯一方法。正如您所展示的，一个区别是您需要自动对焦。如果将此行更改为以下内容，它应该可以工作。

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"> 
```

本质上，这将允许您使用该功能，但不是必需的。这应该允许与所有以前的设备完全兼容。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/9300036/544198)。

我还应该注意，我看到您的主应用程序不需要相机，但 zbar 需要相机。这也可能有所作为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:10:55.913

**我在平板电脑Zenithink C93** ( [http://www.zenithink.com/Eproducts_C93.php](http://www.zenithink.com/Eproducts_C93.php) )上的应用程序（使用 Zbar 扫描仪）遇到了这个问题。我需要创建与 Zenithink 设备兼容的应用程序。

我在 Google 的 Play-Store 中发布了应用程序。当我尝试在 Zenithink C93 上安装应用程序时出现错误：“*此项目与您的设备不兼容*”

我的清单有这一行：

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"> 
```

但这对我没有帮助。

我也有这个支持屏幕标签：

```
<supports-screens
android:smallScreens="false"                                                               android:normalScreens="false"
android:largeScreens="true"
android:xlargeScreens="true"
android:anyDensity="true"/> 
```

奇怪的是，经过长时间的搜索解决方案后，我**完全**删除了 support-screens 标签并将 android:required="false"`<uses-feature android:name="android.hardware.camera"/>`应用程序与 Zenithink 设备兼容。

现在我的清单看起来像这样：

```
...
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15"/>  

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>

<application... 
```

这**不是一个好的**解决方案，因为应用程序将与几乎所有设备兼容，但也许它会对某人有所帮助。

# sql - 从十六进制转换为 varchar 时未得到正确答案

> ID：13644749
> 
> 赞同：0
> 
> 时间：2012-11-30T11:54:26.790
> 
> 标签：sql, sql-server, sql-server-2008

我有以下陈述：

```
declare @x varchar(10)
declare @cardnum bigint
set @cardNum=9999999999
set @x=convert(varchar, CONVERT (varbinary(8), CONVERT(BIGINT, @cardNum)))
print @x 
```

我得到的答案是`Tãÿ`没有将十六进制值`2540BE3FF`作为字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:11:16.007

试试这样：

```
declare @x varchar(50)
declare @cardnum bigint
set @cardNum=9999999999

declare @hexbin varbinary(max)
set @hexbin = CONVERT (varbinary(8), @cardNum)

Set @x = CONVERT(varchar(max), @hexbin, 1)
print @x

Set @x = CONVERT(varchar(max), @hexbin, 2)
print @x 
```

**[在此MSDN 链接](http://blogs.msdn.com/b/sqltips/archive/2008/07/02/converting-from-hex-string-to-varbinary-and-vice-versa.aspx)**上阅读有关它的更多信息

# powershell - Get Process StartTime from a remote server using Powershell

> ID：13644751
> 
> 赞同：0
> 
> 时间：2012-11-30T11:54:42.913
> 
> 标签：powershell

I'm using following command to get the start time of a windows process. This is to get the running time of a process to terminate if it running too long.

`$ProcessStartTime =(Get-Process $WinProcess -computer $computer).StartTime` (Not working)

above code not returning Start Time value from a remote server ( it can access other process information). But it getting values for a local process with following command.

`$ProcessStartTime =(Get-Process $WinProcess).StartTime` (Working)

Can some one help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:14:25.113

您可以使用 wmi 来完成这项工作：

```
gwmi win32_process -computername $computer| 
? { $_.name -eq "powershell.exe" } | 
% { $_.ConvertToDateTime( $_.CreationDate )} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:29:17.663

我的结果和你一样，但是你可以在远程计算机上创建一个新会话，然后使用调用命令来运行你的脚本：

```
$sess=new-pssession $computer
$ProcessStartTime =invoke-command -session $sess -ScriptBlock{ (Get-Process $WinProcess).StartTime} 
```

# windows-phone-7 - 在多个应用程序上单点登录 Windows Phone

> ID：13644752
> 
> 赞同：0
> 
> 时间：2012-11-30T11:54:49.737
> 
> 标签：windows-phone-7, windows-phone-8

我们正在为我们的客户开发多个应用程序，所有这些应用程序都可以使用相同的凭据（公司门户的凭据）使用。所以我们想实现像单点登录这样的东西，这样用户就不需要登录每个应用程序。我已经浏览了这些链接 [http://msdn.microsoft.com/en-us/library/live/hh826544.aspx](http://msdn.microsoft.com/en-us/library/live/hh826544.aspx)

http://stackoverflow.com/questions/5598411/single-sign-on-choices-to-use-with-windows-phone-7

这正是我需要的：

步骤 1.) 当用户登录到一个应用程序（比如 App1）时，门户将返回一个令牌，需要将此令牌存储在某处，这样只有授权的应用程序才能访问它。步骤 2.) 当任何其他应用程序（同一组）启动时，它将检查令牌的位置，如果令牌存在，它不会要求提供凭据。Step.3）当用户从任何应用程序注销时，它将从共享位置删除令牌。

我们已经使用钥匙串在 IOS 中实现了这一点（可能是错误的术语，因为我不是 ios 开发人员）。这个钥匙串为使用相同证书签名的应用程序提供了一个公共空间。

据我所知，直到 windows phone 7.5 是不可能的。Windows Phone 8 是否有此功能。如果不是，我愿意接受任何形式的建议来达到这个目的。

PS：安全是我们最关心的问题，所以当您提出建议时，请让我们知道您认为可能存在任何安全问题，尽管黑客或电话丢失。

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:51:27.207

我希望得到纠正，但这不起作用。应用程序是孤立的，不能共享数据包之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-15T08:27:01.570

我不是 Windows 应用程序的人。
但一个技巧可以奏效。
**注意：** 如果未正确考虑 API 令牌过期时间限制，以下可能会引发安全问题。

使用 firesharp / 任何 XMPP 服务（适用于 windows 客户端）将 api 令牌发送到其他设备，如通知消息。
以不显示令牌的方式处理通知。

还要记住，在 API 授权中没有注销这样的想法。
您将不得不使用令牌过期时间限制来限制访问。

# full-text-search - SphinxQL query does not return all matches

> ID：13644753
> 
> 赞同：1
> 
> 时间：2012-11-30T11:54:51.423
> 
> 标签：full-text-search, sphinx, sphinxql

I am usign SphinxQL to query Sphinx RT indexes. Found that queries return 20 matches at most (20 seems to be a [default value](http://sphinxsearch.com/docs/current.html#api-func-setlimits)).

Tried adding options the `SELECT` query to change that limit to 1000:

```
SELECT [...] OPTION cutoff = 1000, max_matches = 1000 
```

But got same results.

Is there a way to override the 20 matches result limitation using SphinxQL?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:59:29.393

您是否尝试过 LIMIT 子句？

从文档：

> 限制条款。支持 LIMIT N 和 LIMIT M,N 形式。与常规 SQL 不同（但与 Sphinx API 类似），默认情况下存在隐式 LIMIT 0,20。

[http://sphinxsearch.com/docs/current.html#sphinxql-select](http://sphinxsearch.com/docs/current.html#sphinxql-select)

# asp.net-mvc - 从 asp.net mvc3 razor 中的模型设置文件控制值

> ID：13644758
> 
> 赞同：1
> 
> 时间：2012-11-30T11:55:13.453
> 
> 标签：asp.net-mvc, asp.net-mvc-3, file-upload, razor, model

在我的 MVC 应用程序中，我将以下代码用于文件。

**模型**

```
public HttpPostedFileBase File { get; set; } 
```

**看法**

```
@Html.TextBoxFor(m => m.File, new { type = "file" }) 
```

一切工作正常..提交价值但我正在尝试从控制器模型加载文件，但它不起作用

控制器

```
public ActionResult ManagePhotos(ManagePhoto model)
{
    if(ModelState.IsValid)
    {
           //upload file
    }
    else
    {
          return View(model); //contains type HttpPostedFileBase File { get; set; }
    }
} 
```

如果我的验证在返回后失败，我如何再次加载文件输入，我的文件控件没有映射到模型到文件并且它是空的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:09:21.480

如果您知道该文件是有效的，并且想暂时保留它，您可以将其保留在会话中（但要注意内存使用情况）。

如果您知道该文件是有效的，并且想要永久保留它，请保存它并将路径保留在内存中。

如果您知道该文件是无效的，您不会想要也经常无法保留它。

通常，在验证失败期间，这会以与密码相同的方式处理 - 需要再次提供，因此只有在其他一切正常时才会请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:37:32.160

如果您想尽可能地使用户体验无缝，请尝试以下操作：

1.  在客户端添加 javascript 以验证用户输入
2.  在服务器端将所有文件临时存储在 tmp 文件存储中。清理超过 10 分钟的文件。当您需要将文件保存到存储中时执行此操作

# java - How can i visualize three nested List?

> ID：13644759
> 
> 赞同：0
> 
> 时间：2012-11-30T11:55:19.400
> 
> 标签：java, xhtml, primefaces

I have a this structure:

```
List< List< tracciato >> dataTot; 
```

with

```
public class tracciato {

   String              comando = "";
   String              nome;
   int                 posizione;
   String              tipo;
   ArrayList< String > dati = new ArrayList<>(); //  an other list 

   public tracciato() {
   }
} 
```

note that also inside the class tracciato there is an other list.... they are 3 list nested...can I use dataTable? thanks for the suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:29:16.293

我会选择类似的东西`Tree`，它会在控制台上看起来像这样：

```
List1
-List1_1
-- commando:
-- nome
---List1_1_1

and so on. 
```

但是，如果您希望它是图形的，还有一个`Tree`可用的 Java 实现。

# linker - ‘Feature detecting’ required compile flags in Make (liconv on Mac)

> ID：13644762
> 
> 赞同：1
> 
> 时间：2012-11-30T11:55:27.167
> 
> 标签：linker, makefile, conditional-compilation

Ubuntu has `libiconv` built-in to it’s standard c library and does not require it in `LDFLAGS`. OS X does not have it built-in and requires the flag to be set.

My current approach is using `ifeq` in my Makefile to conditionally set `LDFLAG += -liconv` when on OS X.

I am wondering if there is a better approach? I am heavily influenced by the feature-detection mindset of web development and hope I can use a similar approach to detect whether the flag is required on the current system or not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:27:08.040

对于手动编写的makefile，单独设置`LDFLAGS`和朋友的内容是一种可接受的方式。如果只需要几个功能，这可能会更简单。

如果您想普遍检测该功能，那么一条路线是使用诸如*CMake*或*Automake*之类的 makefile 生成器。

最后一个选项是手动执行 Automake 所做的运行时检查。那就是有一个您编译的示例文件，与其中一个选项链接并查看它是否有效。如果它不尝试下一个等等。这样您就可以测试每个功能需要哪些标志。Automake 仅在项目为`./configure`d 时执行此操作，但您可以在每次`make`运行或任何时候对您的构建设置有利时执行此操作。

# regex - 保留全局匹配组

> ID：13644770
> 
> 赞同：1
> 
> 时间：2012-11-30T11:55:54.537
> 
> 标签：regex, perl

我正在编写一个脚本来对 Linux 的`netstat`命令执行一些基本的正则表达式匹配。我的正则表达式运行良好，并在五组中为我提供了我想要的列：协议和两对 IP 地址和端口号。

然后，我在我的正则表达式上针对 netstat 的输出运行全局匹配，并遍历结果数组以在几列中打印信息：

```
my $content = `netstat -na`;
my $REGEX = '([a-z]*) +.* (\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d{1,5}) +(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d{1,5}).*ESTABLISHED';
foreach ($content =~ m/$REGEX/g) {
    printf ("%-10s%-18s%-10s%-18s%-10s\n", $1, $2, $3, $4, $5);
} 
```

然而，这并没有得到我想要的结果，因为它只打印了最后一个匹配行几次。我很快就发现我错误地使用了数字变量`$1`：`$5`它们总是引用与正则表达式匹配的最后一行的编号组。

现在这给我留下了一个问题：我想将我在原始正则表达式中定义的组与全局匹配返回的行一起使用。这是可能的还是全局匹配只是一种执行类似 grep 操作的方法？

如果在全局匹配运行时无法保存这些组或之后从数组中检索它们，我可能不得不放弃全局匹配，而是遍历行以将组保存到多维数组。在这种情况下，我几乎很想先`netstat`管`grep`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:22:24.810

尝试更改`foreach`为`while`，以便一次遍历一个匹配项，而不是一次创建所有匹配项。

```
while ($content =~ m/$REGEX/g) { 
```

# php - 确定显着增长

> ID：13644776
> 
> 赞同：1
> 
> 时间：2012-11-30T11:56:13.793
> 
> 标签：php, statistics

我有一组 Facebook 页面，我每天都在为这些页面记录“喜欢”的次数。

我想找出那些增长最快的。问题是我想知道如何去除点赞数少的页面和点赞数多的页面的“噪音”。

![facebook喜欢图表](../Images/49b2b9ec884aacc576a4eb3b213702cd.png)

我在这里尝试做的事情有什么通用技术或方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:09:54.627

或多或少在统计上正确（且简单）的答案是：

假设第一次测量是 x 喜欢，第二次测量是 y 喜欢，

然后估计增长的自然对数由下式给出

log(y / x)，误差估计为 sqrt(1 / x + 1 / y)

但由于您对增长的保守估计感兴趣，您应该使用大约 5% 的置信区间。因此，我建议使用以下功能对您的数据集进行排名。对数（y / x） - 2 * sqrt（1 / x + 1 / y）

例如：

从 1 增长到 10 将获得 0.2 的分数

从 100 增长到 400 将获得 1.16 的分数

从 10000 增长到 15000 将获得 0.38 的分数

该估计器的重要属性之一是，从 10000 到 100000 的增长将排名高于从 1000 到 10000 的增长，而从 1000 增长到 10000 的排名又将高于从 100 到 1000 的增长等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:22:58.077

一种可能性是创建一个综合衡量增长的指标，同时考虑百分比和绝对数字。

我建议取第 1 天的点赞数的以 10 为底的对数，然后将其乘以增长百分比，得出我称之为“增长排名”的值。

![在此处输入图像描述](../Images/25028ff14f2ac050a5cfecb5b498359a.png)

如果您查看“最终指标”提供了您认为重要的增长数字和您认为不重要的较小增长数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:02:05.873

您需要对增长百分比应用某种权重，我建议使用 log(B/10)，因此您排名的指标是：

```
score = log(B/10) * C 
```

您可以在那里试验常数项以及对数基数。现在一个很好的工具是谷歌，例如在谷歌搜索中输入这个来查看权重函数图：

```
y = log(x/10) 
```

或者获取 gnuplot 的副本。

# java - SAX 解析器 openStream() 错误

> ID：13644777
> 
> 赞同：0
> 
> 时间：2012-11-30T11:56:15.627
> 
> 标签：java, android, saxparser

你能告诉我为什么**SAX**解析器会在这一行中断：

```
InputStream inputStream = new URL(url).openStream(); 
```

以前我已经构建了这样的 url：

```
private String url = "http://www.nasa.gov/rss/image_of_the_day.rss"; 
```

URL 是最新且有效的，因此不是由于它。

我是 SAX 的新手，所以请原谅我的无知。

这是来自 Eclipse 的错误日志：

***11-30 20:27:24.892: E/AndroidRuntime(2388): 致命异常: main 11-30 20:27:24.892: E/AndroidRuntime(2388): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. headfirstlabs.nasadailyimage/com.headfirstlabs.nasadailyimage.NasaDailyImage}：java.lang.NullPointerException 11-30 20:27:24.892：E/AndroidRuntime(2388)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955) 11 -30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app .ActivityThread.access$600(ActivityThread.java:122) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146) 11-30 20: 27:24.892：E/AndroidRuntime(2388)：在 android.os.Handler。dispatchMessage(Handler.java:99) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.os.Looper.loop(Looper.java:137) 11-30 20:27:24.892: E/ AndroidRuntime(2388): 在 android.app.ActivityThread.main(ActivityThread.java:4340) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 java.lang.reflect.Method.invoke(Method.java:511) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit .java:551) 11-30 20:27:24.892: E/AndroidRuntime(2388): at dalvik.system.NativeStart.main(Native Method) 11-30 20:27:24.892: E/AndroidRuntime(2388): Caused作者：java.lang。NullPointerException 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 com.headfirstlabs.nasadailyimage.IotdHandler.processFeed(IotdHandler.java:58) 11-30 20:27:24.892: E/AndroidRuntime(2388):在 com.headfirstlabs.nasadailyimage.NasaDailyImage.onCreate(NasaDailyImage.java:18) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.Activity.performCreate(Activity.java:4465) 11- 30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app。 ActivityThread.performLaunchActivity(ActivityThread.java:1919) 11-30 20:27:24.892: E/AndroidRuntime(2388): ... 11 更多E/AndroidRuntime(2388): 在 com.headfirstlabs.nasadailyimage.NasaDailyImage.onCreate(NasaDailyImage.java:18) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.Activity.performCreate(Activity .java:4465) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 11-30 20:27:24.892: E/AndroidRuntime(2388) ): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 11-30 20:27:24.892: E/AndroidRuntime(2388): ... 11 更多E/AndroidRuntime(2388): 在 com.headfirstlabs.nasadailyimage.NasaDailyImage.onCreate(NasaDailyImage.java:18) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.Activity.performCreate(Activity .java:4465) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 11-30 20:27:24.892: E/AndroidRuntime(2388) ): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 11-30 20:27:24.892: E/AndroidRuntime(2388): ... 11 更多java:1049) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 11-30 20:27:24.892: E/AndroidRuntime(2388) : ... 11 更多java:1049) 11-30 20:27:24.892: E/AndroidRuntime(2388): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 11-30 20:27:24.892: E/AndroidRuntime(2388) : ... 11 更多***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:36:25.127

您需要捕获尝试打开流时引发的异常，并（至少）打印出异常消息。这应该足以解释为什么`openStream()`调用不起作用。

（我的猜测可能是您对该站点的访问被防火墙阻止了，或者您*实际上是在*尝试连接到不同的 URL。也有可能您以某种方式得到了错误的代码行......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:26:23.867

我发现有一个关于这本书的错误页面。（非常大）在第 105 页上，它说 parse 方法缺少一个参数。

你可以看看这里：

[http://oreilly.com/catalog/errataunconfirmed.csp?isbn=0636920012825](http://oreilly.com/catalog/errataunconfirmed.csp?isbn=0636920012825)

# c++ - 优化这个递归函数 [Boggle resolver]

> ID：13644779
> 
> 赞同：2
> 
> 时间：2012-11-30T11:56:17.330
> 
> 标签：c++, recursion, optimization, boggle

我实现了一个递归函数来解决这个问题：

*   使用由字母 (A...Z) 组成的 4x4 矩阵，*对于每个字母* ，仅遵循相邻和对角单元格即可获得所有*n 长度的单词。*

我的函数的想法是对每个可能的方向的每个字母进行递归调用，然后连接将要形成的字符串。当这个字符串的长度为*n*时，它会停止。为了防止返回到已经使用的字母，我创建了一个指向字母类的指针数组，它将每个新的可能字母与所有使用的字母进行比较。为此，我为每个字母创建了一个特殊的类。

这是函数：（对不起，它很长）

dirSu 表示 Up - dirGiu Down - dirDx right - dirSx left - 和所有其他的对角线位置

```
 void decisione(lettera *start, lettera *next, int count, string seq, vector <lettera*> visitate, int quanti) {

        if (next == nullptr) return ;

        if (count == quanti) {
            bool test = false;

            for (int k = 0; k < start->sequenze.size(); k++) { //To prevent same letter to be used
                if (start->sequenze[k] == seq)  {
                    test = true;
                    break;
                }
            }
            if (!test) start->sequenze.push_back(seq);
            return ;
        }

        seq = seq + next->chiave; //String concatenating every call
        count++; //Counter to decide when stop
        visitate.push_back(next); //Array of used letters

        int i;
        bool test;

        //Decide direction
        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirSu) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirSu, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirSu) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirSu, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirGiu) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirGiu, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirSx) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirSx, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirDx) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirDx, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirAdx) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirAdx, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirAsx) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirAsx, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirBdx) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirBdx, count, seq, visitate, quanti);

        test = false;
        for(i = 0; i < visitate.size(); i++) {
            if (visitate[i] == next->dirBsx) { 
                test = true;
                break;
            }
        }
        if (!test) decisione(start, next->dirBsx, count, seq, visitate, quanti);

    } 
```

好吧，当我激活3个字母的单词功能时，它真的很快，4个字母：矩阵中每个字母的计算时间为0.028s，5个字母：0.225s，6个字母：1.891s，7个字母：14.914s。

有没有办法通过优化我的函数来减少计算时间？（或删除我愚蠢的逻辑错误？）非常感谢！

我用于测试的矩阵是：

```
C A S A
C O S A
B A C I
O T A T 
```

我在每次速度测试中都使用了这个（没有按频率或随机计算），并且有了这个（自从我的问题以来我的递归函数得到了改进），我在大约 90 秒内得到了每个起始字母有 5、6、7 个字母的所有单词。字很多，虽然只是一个4x4的矩阵！如果我可以私下将其发送给您，那么看看您对同一问题的解决方案可能会很有趣。（这里不知道怎么联系你）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:09:53.790

将您的算法从递归更改为迭代（使用循环）。它通常更快。之后，其他优化与算法和数据结构相关，以降低复杂度。找到这样的优化要困难得多（但有可能）。

**编辑**：对代码的一些想法，然后是我今天完成的单词搜索的一个版本：

*   你只想要英语单词（或意大利语单词等......）。要检查这一点，您应该使用字典，它是查找单词的最有效结构，无论是在内存还是性能方面
*   有评论说这个算法是强递归的。我不同意，我做了一个迭代的，向量的副本少得多，并且有单词检查。将算法从递归传递到迭代通常会减少副本的数量。但我仍然同意这个评论的一点：某些算法在递归形式中可能会更快（但它们并不常见）。此外，这个算法并不容易找到；）
*   你应该拆分你的代码。它将更具可读性，并且更易于优化。
*   您正在编写一个 boggle 解析器，因此您应该知道您的字典必须是精确的，并且应该包含所有形式的动词（例如，对于“be”：am、are、is、was、was 等... ）。我用法语测试它，因为我的英文单词列表只有 850 个单词，太短了。
*   字典中带有重音的字母的条件并不重要，它们在这里只是为了避免使用更多的重音插槽。此外，我从文本文件中删除了每个组成的单词（其中带有插入符号）。
*   在我的电脑上，加载字典（非详尽的 350000 个法语单词，3 Mb）并搜索所有 5,6 和 7 长度的单词大约需要 0.6 秒（i7 2660K，8Gb RAM，使用 /0x 发布，由我测量，而不是由计算机;））。性能测量仅与您的机器相关，以进行比较。

所以，这里是代码。它是独立的，您只需编译它，使用英语（或意大利语或法语）单词文件（文本，每行一个单词）执行：

```
#include <string>
#include <iostream>
#include <stdlib.h>
#include <vector>
#include <time.h>
#include <map>
#include <algorithm>

// **************************************************** //
//                                                      //
// Data structure for the words : dictionnary           //
//                                                      //
// **************************************************** //
struct DicNode
{
    const char l;
    bool isEndOfWord;
    DicNode* children[26]; // a - z, case insensitive
    DicNode* parent;
    unsigned int min, max, level;

    DicNode(char c, DicNode* p = 0, bool end = false) : l(c),isEndOfWord(end),parent(p),min((unsigned int)(-1)),max(0), level(parent ? parent->level + 1 : 0)
    {
        for(unsigned int t = 0; t < 26; t++)
            children[t] = 0;
    }

    ~DicNode()
    {
        for(unsigned int t = 0; t < 26; t++)
            if(children[t])
                delete children[t];
    }

    DicNode*& at(char l)
    {
        if(l == 'à' || l == 'ä' || l == 'â')
            l = 'a';
        if(l == 'é' || l == 'è' || l == 'ê' || l == 'ë')
            l = 'e';
        if(l == 'ï' || l == 'î')
            l = 'i';
        if(l == 'ö' || l == 'ô')
            l = 'o';
        if(l == 'ü' || l == 'û' || l == 'ù')
            l = 'u';
        if(l == 'ç')
            l = 'c';
        if(l <= 'Z')
            l = 'a' + l - 'A';

        // Note: undefined behavior if l > 'Z' or l < 'A'.
        return children[(unsigned int)(l - 'a')];
    }

    bool inRange(unsigned int n) const
    {
        return n <= max && n >= min;
    }

    void print(std::string str = "") const
    {
        // Here recursive algorithm is way better because of the object-oriented structure
        if(isEndOfWord)
            std::cout << (str + l) << "\n";

        for(unsigned int t = 0; t < 26; t++)
            if(children[t])
                children[t]->print(str + l);
    }

    std::string toString() const
    {
        std::string str(level, '0');
        const DicNode* node = this;
        while(node && node->level > 0)
        {
            str[node->level - 1] = node->l;
            node = node->parent;
        }
        return str;
    }
};

void addWord(DicNode* root, const std::string& str)
{
    if(!root || str == "") return;
    DicNode* node = root;
    unsigned int i = 0;
    while(i != str.size())
    {
        if(str.size() - i > node->max) node->max = str.size() - i;
        if(str.size() - i < node->min) node->min = str.size() - i;

        char c = tolower(str[i]);
        DicNode*& n = node->at(c);
        if(!n) n = new DicNode(c,node);
        node = n;
        i++;
    }
    node->isEndOfWord = true;
}

// **************************************************** //
//                                                      //
// Data structures for the algorithm                    //
//                                                      //
// **************************************************** //

enum Direction
{
    INVALID,
    NORTH,
    NORTH_EAST,
    EAST,
    SOUTH_EAST,
    SOUTH,
    SOUTH_WEST,
    WEST,
    NORTH_WEST,
    FINISHED
};

Direction incDir(Direction d)
{
    switch(d)
    {
        case NORTH:         return NORTH_EAST;
        case NORTH_EAST:    return EAST;
        case EAST:          return SOUTH_EAST;
        case SOUTH_EAST:    return SOUTH;
        case SOUTH:         return SOUTH_WEST;
        case SOUTH_WEST:    return WEST;
        case WEST:          return NORTH_WEST;
        case NORTH_WEST:    return NORTH;
        default:            return INVALID;
    }
}

Direction operator-(Direction d)
{
    switch(d)
    {
        case NORTH:         return SOUTH;
        case NORTH_EAST:    return SOUTH_WEST;
        case EAST:          return WEST;
        case SOUTH_EAST:    return NORTH_WEST;
        case SOUTH:         return NORTH;
        case SOUTH_WEST:    return NORTH_EAST;
        case WEST:          return EAST;
        case NORTH_WEST:    return SOUTH_EAST;
        default:            return INVALID;
    }
}

std::string toString(Direction d)
{
    switch(d)
    {
        case NORTH:         return "NORTH";
        case NORTH_EAST:    return "NORTH_EAST";
        case EAST:          return "EAST";
        case SOUTH_EAST:    return "SOUTH_EAST";
        case SOUTH:         return "SOUTH";
        case SOUTH_WEST:    return "SOUTH_WEST";
        case WEST:          return "WEST";
        case NORTH_WEST:    return "NORTH_WEST";
        default:            return "INVALID";
    }
}

struct Cell
{
    char l;
    DicNode* node;
    Direction dir, dirParent;
    Cell(char l_ = 'A') : l(l_),node(0),dir(INVALID),dirParent(INVALID) {}
};

struct ProbLetter
{
    char letter;
    float proba;
};

class Map
{
    public:
        Map(unsigned int w, unsigned int h) : width(w), height(h)
        {
            data = new Cell[width * height];
            for(unsigned int t = 0; t < width * height; t++)
                data[t] = randomEnglishLetter();
        }

        static char randomEnglishLetter()
        {
            // Frequency of english letters
            static ProbLetter probas[26] =
            {
                { 'Z', 0.074f },
                { 'Q', 0.095f },
                { 'X', 0.150f },
                { 'J', 0.153f },
                { 'K', 0.772f },
                { 'V', 0.978f },
                { 'B', 1.492f },
                { 'P', 1.929f },
                { 'Y', 1.974f },
                { 'G', 2.015f },
                { 'F', 2.228f },
                { 'W', 2.360f },
                { 'M', 2.406f },
                { 'U', 2.758f },
                { 'C', 2.782f },
                { 'L', 4.025f },
                { 'D', 4.253f },
                { 'R', 5.987f },
                { 'H', 6.094f },
                { 'S', 6.327f },
                { 'N', 6.749f },
                { 'I', 6.966f },
                { 'O', 7.507f },
                { 'A', 8.167f },
                { 'T', 9.056f },
                { 'E', 12.702f }
            };

            // Random number between 0 and 1
            float p = 100.0f * float(rand() % 10000) / 9999.0f;
            float sum = 0.0f;
            for(unsigned int t = 0; t < 26; t++)
            {
                sum += probas[t].proba;
                if(p < sum) return probas[t].letter;
            }
            return probas[25].letter;
        }

        Cell& operator()(unsigned int x, unsigned int y)
        {
            return data[x + y * width];
        }

        bool inRange(int x, int y)
        {
            return x >= 0 && x < (int)width && y >= 0 && y < (int)height;
        }

        void print()
        {
            for(unsigned int y = 0; y < height; y++)
            {
                for(unsigned int x = 0; x < width; x++)
                    std::cout << "  " << data[x + y * width].l;
                std::cout << "\n";
            }
        }

        unsigned int getWidth() const { return width; }
        unsigned int getHeight() const { return height; }

    private:
        unsigned int width, height;
        Cell* data;
};

// **************************************************** //
//                                                      //
// Word-search algorithm                                //
//                                                      //
// **************************************************** //

inline void advance(int& x, int& y, Direction d)
{
    switch(d)
    {
        case NORTH:
            y--;
            return;
        case NORTH_EAST:
            x++;
            y--;
            return;
        case EAST:
            x++;
            return;
        case SOUTH_EAST:
            x++;
            y++;
            return;
        case SOUTH:
            y++;
            return;
        case SOUTH_WEST:
            x--;
            y++;
            return;
        case WEST:
            x--;
            return;
        case NORTH_WEST:
            x--;
            y--;
            return;
        default:
            return;
    }
}

struct Data
{
    Map& map;
    int x;
    int y;
};

bool descend(Data& dat, unsigned int n)
{
    DicNode* parent = dat.map(dat.x, dat.y).node;
    if(n == parent->level) return false;

    Direction dir = dat.map(dat.x, dat.y).dir;
    if(dir == FINISHED) return false;
    else if(dir == INVALID) dir = NORTH;

    int pX = dat.x, pY = dat.y;
    bool firstIteration = true;
    for(; firstIteration || dir != NORTH; dir = incDir(dir))
    {
        firstIteration = false;
        pX = dat.x;
        pY = dat.y;
        advance(pX, pY, dir);

        if(dat.map.inRange(pX, pY) // (pX, pY) is not outside the map
            && dat.map(pX, pY).node == 0 // The cell is not already used
            && parent->at(dat.map(pX, pY).l) != 0) // An entry in the dictionary exists
        {
            // We found the next node
            dat.map(dat.x, dat.y).dir = dir;
            dat.map(pX, pY).node = parent->at(dat.map(pX, pY).l);
            dat.map(pX, pY).dirParent = -dir;
            dat.x = pX;
            dat.y = pY;

            return true;
        }
    }

    return false;
}

bool ascend(Data& dat)
{
    // Go back on the previous node

    Direction dp = dat.map(dat.x, dat.y).dirParent;
    if(dp == INVALID) return false;

    dat.map(dat.x, dat.y).dir = INVALID;
    dat.map(dat.x, dat.y).dirParent = INVALID;
    dat.map(dat.x, dat.y).node = 0;
    advance(dat.x, dat.y, dp);

    dat.map(dat.x, dat.y).dir = incDir(dat.map(dat.x, dat.y).dir);
    if(dat.map(dat.x, dat.y).dir == NORTH)
        dat.map(dat.x, dat.y).dir = FINISHED;

    return true;
}

void findWordsFromPosition(Map& map, DicNode* parent, unsigned int x, unsigned int y, unsigned int n, std::vector<std::string>& output)
{
    if(!parent) return;

    bool ok = true;

    // Setup first node
    map(x, y).node = parent;
    map(x, y).dir = NORTH;

    // while we can find next node with direction
    // If marked node has right order and is end of word, or if condition on n is not verified:
    //     add it to the output (if condition on n is verified)
    //     no need to go further (because of n), so advance direction of parent cell, reset current cell, and go up for the current position
    Data dat = { map, x, y };
    while(ok)
    {
        if(map(dat.x,dat.y).node->toString() == "ane")
            std::cout << "ok\n";
        if(!descend(dat, n))
            ok = ascend(dat);
        else
        {
            DicNode* node = dat.map(dat.x, dat.y).node;
            if(node->level == n && node->isEndOfWord)
            {
                std::string str = node->toString();
                if(std::find(output.begin(), output.end(), str) == output.end())
                    output.push_back(str);
                ok = ascend(dat);
            }
            else if(!node->inRange(n - node->level))
                ok = ascend(dat);
        }
    }

    // Clean first node
    map(x, y).dir = INVALID;
    map(x, y).dirParent = INVALID;
    map(x, y).node = 0;
}

void getWords(Map& map, DicNode& dic, unsigned int n, std::vector<std::string>& output)
{
    if(n > dic.max || n < dic.min) return;

    // Search words for every position
    for(unsigned int y = 0; y < map.getHeight(); y++)
        for(unsigned int x = 0; x < map.getWidth(); x++)
            findWordsFromPosition(map,dic.at(map(x,y).l),x,y,n,output);
}

#include <fstream>

int main()
{
    srand((unsigned int)time(0));
    // Prepare the words, for example, load them from a real dictionary
    DicNode dictionary(0);
    unsigned int maxSize = 0;

    // Note: the following code make sense only if you load words from a file
    {
        std::ifstream dico("english.txt");
        std::string str;
        int count = 0;
        while(dico >> str)
        {
            if(str.size() > maxSize) maxSize = str.size();
            addWord(&dictionary,str);
            count++;
        }
        std::cout << "Read " << count << " words from dictionary, longest with " << maxSize << " letters.\n";
    }

    // Prepare the matrix
    Map mat(4,4);
    /*
    mat(0,0) = 'A';
    mat(1,0) = 'N';
    mat(2,0) = 'F';
    mat(3,0) = 'N';
    mat(0,1) = 'S';
    mat(1,1) = 'L';
    mat(2,1) = 'E';
    mat(3,1) = 'R';
    mat(0,2) = 'G';
    mat(1,2) = 'O';
    mat(2,2) = 'R';
    mat(3,2) = 'R';
    mat(0,3) = 'S';
    mat(1,3) = 'I';
    mat(2,3) = 'U';
    mat(3,3) = 'I';
    */
    std::cout << "\nMatrix:\n";
    mat.print();

    // Search words
    std::vector<std::string> words;
    for(unsigned int t = 5; t <= 7; t++)
        getWords(mat,dictionary,t,words);
    std::cout << "\nWords:\n";
    if(words.size() == 0)
        std::cout << " (no words)\n";
    else
        for(unsigned int t = 0; t < words.size(); t++)
            std::cout << " " << words[t] << "\n";
} 
```

*注意：前面的代码是一个代码搜索解析器。它现在已从答案中删除，但您仍然可以通过在此答案的编辑修订中搜索来获得它。*

**EDIT2**：一些口头解释

***词典。***它是一种[基数树](http://en.wikipedia.org/wiki/Radix_tree)，但每个节点只有一个字母要存储。它最多可以有 26 个孩子（如果包含重音和/或数字，则更多），每个字母对应一个字母。基本布局如下：

[词树 http://img571.imageshack.us/img571/2281/wtree.png](http://img571.imageshack.us/img571/2281/wtree.png)

例子：

[字典示例 http://img706.imageshack.us/img706/1244/wordsr.png](http://img706.imageshack.us/img706/1244/wordsr.png)

每个节点还包含一个布尔值，指示它是否是单词的结尾。此外，每个节点存储其子分支的最小和最大大小、其父级及其从根开始的级别（= 前缀的大小）。当我们看到没有子分支可以给出具有特定长度的单词时，它允许停止搜索单词。

***矩阵。***矩阵是一个双字母数组。但是，为了提高效率，我添加了一些数据：它在字典中的对应节点（参见算法）、到它的子节点（参见算法）和它的父节点（参见算法）的方向。

***算法。***这个想法是通过“降序”（增加表示当前找到的字符串的路径）在地图中“循环”。当无法下降时，我们必须“上升”：

```
FIND WORD:
----------

while(we can continue)
    try descend
    if(failed to descend)
        ascend
    else
        node = node of current cell
        if node is end of word
            add it to the found words, then ascend
        else if node is out of range (ie, n = 5, but with node you can only have words with 3 characters)
            ascend

DESCEND:
--------

we're from cell (x,y), with node D
for each direction (from cell.direction to north-west, clockwise)
    advance position (x,y) with direction
    if the position is valid
        and we haven't already visited the cell for this word
        and the node got with D.children[cell.letter] exists
        set the current position of the algorithm to the result of the advance
        set the direction of the old cell to the direction used to advance
        set the direction of the new cell to the opposite (pointing to the old cell)
        set the node of the new cell by the found one
        return

ASCEND:
-------

we're at (x,y)
cell.node = 0 (the cell is not considered as visited anymore)
advance the parent direction by one clockwise (if this direction is north-west, we use a special direction that say that we cannot rotate anymore: FINISHED)
cell.dir = INVALID
advance (x,y) following cell.direction_to_parent
cell.direction_to_parent = INVALID
set the current position to the result of advance 
```

图片说明：

[算法展开 http://img822.imageshack.us/img822/1374/algow.png](http://img822.imageshack.us/img822/1374/algow.png)

步骤（在损失中标明的数字）：

1.  这是我们的矩阵。我用法语词典对其进行了测试。假设我们从 (0,0) 单元格开始（无论您从哪里开始，该算法都有效）。
2.  第一个有效方向（地图中的单词+）是东。我们跟随它前进。该节点不是单词的结尾，并且仍然有效。
3.  第一个有效方向（地图中的单词 +）是东南。我们跟随它前进。该节点不是单词的结尾，并且仍然有效。
4.  第一个有效方向（地图中的单词+）是东。我们跟随它前进。该节点不是单词的结尾，并且仍然有效。
5.  没有有效的方向（地图外、已访问的单元格（E）或不在字典中），所以我们上升
6.  第一个有效方向（地图中的单词 +）是东南。我们跟随它前进。该节点不是单词的结尾，并且仍然有效。
7.  第一个有效方向（地图中的单词+）是南。我们跟随它前进。该节点不是单词的结尾，并且仍然有效。
8.  第一个有效方向（地图中的单词 +）是西。我们跟随它前进。该节点是一个单词的结尾（即“anerie”），因此我们将其添加到找到的单词列表中，然后上升。有关信息，法语中的“ânerie”在英语中是“废话”或“愚蠢”。
9.  等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:02:02.043

您正在处理大量组合，因为您不是在寻找实际的单词。如果是这样，您将能够查找字符组合并查看在特定语言中是否仍然可以使用单词。查找会花费更多时间，但会消除许多组合。
但最后，你愿意花多少时间让应用程序更快一点？

话虽如此：优化可能存在可能性，因为您按值传递向量和字符串，它们都会生成内存分配（当然对于向量，可能对于字符串）。相反，传递一个`std::array<lettera*,wordlength>`应该更快，并且也会给你这个词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T15:26:09.883

首先，您正在寻找的解决方案的数量随着长度呈指数增长，因此任何解决方案都是指数的；你所能做的就是减少常数因子。

但是，我建议对您已经找到的字符串进行排序，并对每个新字符串进行二进制搜索。对于 7 的长度，一旦排除重复项，您会发现超过 60000 个。（在一个快速实现中，我自己敲了敲，这造成了超过 10 倍的差异，差异越大，我正在寻找的字符串越长。）同样，用一个标志来注释每个单元格，指示它是否被访问或不，而不必以某种方式查找它，也应该节省大量时间。

# php - 表单值的数量作为发布到一个变量并使用 PHP 将其写入数据库中的单独行？

> ID：13644789
> 
> 赞同：1
> 
> 时间：2012-11-30T11:56:59.113
> 
> 标签：php

我正在开发一个 php 项目，我有一个用户并且必须进行风险评估——他们必须给出危害类型并给出所有危害的严重性和可能性的值。然后我想将其作为单独的行记录在数据库中。

数据库表中的列看起来像 **hazard_id、hazard_type、severity、likelihood**

表单字段如下所示： **危险类型**（*文本字段*）、**严重性**（*下拉*）和**可能性**（*下拉*）

所以我会在页面下方说上面重复的 13 行 - 都同名？或者你会有**hazard_type1**，**hazard_type2**等

然后我想将值发布到数据库中，以便每个危险在数据库中显示为不同的行。

如果有人可以提供帮助，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:03:52.233

您可以使用只需正确命名输入字段的数组

```
name="hazard_type[1]" 
```

将显示为

```
$_POST['hazard_type'][1] 
```

在你的情况下，我会使用

```
name="data[1][hazard_type]"
name="data[1][severity]"
name="data[1][likelihood]"
name="data[2][hazard_type]"
name="data[2][severity]"
name="data[2][likelihood]"
etc 
```

然后在 PHP 中你可以使用

```
$data = $_POST['data'];
foreach ($data as $element) {
  $hazard_type = $element['hazard_type'];
  $severity = $element['severity'];
  $likelihood = $element['likelihood'];
  /* Here save each element into db */ 
} 
```

# android - Android上的后退键按下停止记录器

> ID：13644795
> 
> 赞同：0
> 
> 时间：2012-11-30T11:57:21.987
> 
> 标签：android, back, onkeydown

我在`onCreate()`final中创建了一个记录器`MediaRecorder recorder=new MediaRecorder();`，当用户按下后退按钮时我需要停止记录。

为了停止录音机，我使用了以下代码。

```
final MediaRecorder recorder=new MediaRecorder();
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.noise);
    // elementi
        TextView picco=(TextView) findViewById(R.id.picco_recorder);
        ImageView noise_bar=(ImageView) findViewById(R.id.noise_bar);
        ImageView noise_bar_red=(ImageView) findViewById(R.id.noise_bar_red);
        ImageView imgnoise = (ImageView) findViewById(R.id.logo_noise);
        imgnoise.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                recorder.stop();
                recorder.release();
                Intent torna_home=new Intent(Noise.this,Index.class);
                startActivity(torna_home);
            }
        });
    // noise
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile("/dev/null");
        try{
            recorder.prepare();
        }catch(IllegalStateException e){
            Log.d("Errore",e.toString());
            e.printStackTrace();
        }catch(IOException e){
            Log.d("Errore",e.toString());
            e.printStackTrace();
        }
        recorder.start();
        double db=10*Math.log(recorder.getMaxAmplitude());
        picco.setText("" + (int)db);
        noise_bar.scrollTo(0, (int)((int)db*1.5));
        noise_bar_red.scrollTo(0, (int)((int)db*1.5));
        Timer timer=new Timer();
        timer.scheduleAtFixedRate(new RecorderTask(recorder), 0, 500);
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        Intent torna_home=new Intent(Noise.this,Index.class);
        startActivity(torna_home);
    }
    return super.onKeyDown(keyCode, event);
}
@Override
public void onBackPressed() {
    super.onBackPressed();
    recorder.stop();
    recorder.release();
}
private class RecorderTask extends TimerTask{
    TextView risultato=(TextView) findViewById(R.id.picco_recorder);
    TextView max=(TextView) findViewById(R.id.max_recorder);
    TextView media=(TextView) findViewById(R.id.media_recorder);
    ImageView noise_bar=(ImageView) findViewById(R.id.noise_bar);
    ImageView noise_bar_red=(ImageView) findViewById(R.id.noise_bar_red);
    private MediaRecorder recorder;
    public RecorderTask(MediaRecorder recorder){
        this.recorder = recorder;
    }
    public void run(){
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                double db=10*Math.log(recorder.getMaxAmplitude());
                risultato.setText("" + (int)db);
                if(Integer.parseInt(max.getText().toString())<(int)db){
                    max.setText("" + (int)db);
                    noise_bar_red.scrollTo(0, (int)((int)db*1.5));
                }
                media.setText(""+((int)db+Integer.parseInt(max.getText().toString()))/2);
                noise_bar.scrollTo(0, (int)((int)db*1.5));
            }
        });
    }
} 
```

拦截后退按钮，但它在 onCreate 之外，我无法拦截录音机！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:00:46.880

您可以改写 onBackPressed ：

```
@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
       //Stop recorder
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:57:01.550

如果按钮返回，默认行为`onKeyDown`是调用`onBackPressed`. 但是由于您已经覆盖了`onKeyDown`，因此您可能只调用`onKeyDown`. 我不知道当您覆盖这两个函数时它是如何工作的，但尝试删除`onKeyDown`并只保留`onBackPressed`并查看是否`recorder.stop()`被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:00:13.620

你必须使用

```
@Override
public void onBackPressed() {
    super.onBackPressed()
//Add your desired code here
} 
```

这应该适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:10:53.383

您始终可以覆盖任何按键。对于覆盖后退按钮，尤其是使用

```
@Override
public void onBackPressed() {
   super.onBackPressed();
   recorder.stop();//or whatever code you use to stop recorder
} 
```

也用于在oncreate之外访问记录器，声明`MediaRecorder recorder`为全局变量，在`onCreate()`方法中对其进行初始化

# jakarta-ee - Java 客户端的 Jasig-CAS 单点注销问题

> ID：13644797
> 
> 赞同：1
> 
> 时间：2012-11-30T11:57:24.073
> 
> 标签：jakarta-ee, jboss, single-sign-on, cas

我有一个 CAS 3.5 服务器和两个 Java 客户端（我们称它们为 app1 和 app2），但我无法让单点登录工作。app1 和 app2 部署在 JBoss AS7 的不同实例中。

测试用例场景是：

1 - 在浏览器选项卡中，成功登录到 app1。

2 - 在另一个选项卡中，访问 app2 后，用户已经登录。（单点登录有效）。

3 - app1 成功注销。

4 - 但是，即使在页面刷新后，用户仍会继续登录 app2。JSESSIONID cookie 仍然存在。

注销 app1（步骤 3）时，这会打印在 app2 的控制台上（日志级别：调试）：

```
08:15:42,806 DEBUG [org.jasig.cas.client.authentication.Saml11AuthenticationFilter] (http--0.0.0.0-8080-3) no ticket and no assertion found
08:15:42,807 DEBUG [org.jasig.cas.client.authentication.Saml11AuthenticationFilter] (http--0.0.0.0-8080-3) Constructed service url: http://myip:8080/app2
08:15:42,807 DEBUG [org.jasig.cas.client.authentication.Saml11AuthenticationFilter] (http--0.0.0.0-8080-3) redirecting to "https://mycasip:8443/cas/login?TARGET=http%3A%2F%2Fmyip%3A8080%2Fapp2" 
```

只是为了记录，cas server 和 app2 的 URL 似乎都构造得很好，但是，没有发生实际的重定向。我在 cas 服务器的控制台上看不到任何打印内容（再次记录日志级别：调试）

这是我的 web.xml 的摘录（我使用 SAML 发送除了用户名之外的 ldap 属性）：

```
<filter>
    <filter-name>CAS Single Sign Out Filter</filter-name>
    <filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class>
    <init-param>
        <param-name>artifactParameterName</param-name>
        <param-value>SAMLart</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>CAS Single Sign Out Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<listener>
    <listener-class>org.jasig.cas.client.session.SingleSignOutHttpSessionListener</listener-class>
</listener> 
```

SingleSignOutFilter 之前没有过滤器定义，只有应用程序显示名称和欢迎文件列表。

我已经阅读过类似的问题[（](https://stackoverflow.com/questions/6125527/jasig-cas-single-sign-out-not-working?rq=1)注意：我不使用 spring 或 jsp 并且用户在新选项卡中打开 app2 后仍处于登录状态）但解决方案对我不起作用或根本没有给出。

# google-apps-script - Google Apps 脚本授权

> ID：13644799
> 
> 赞同：2
> 
> 时间：2012-11-30T11:57:32.050
> 
> 标签：google-apps-script

我有一个函数将域中用户的电子邮件地址存储为脚本属性。最初，此功能在域 A 上运行没有问题，在域 B 上创建副本并进行所有必需的更改后，即使我多次授予访问权限，它仍会不断请求对 Google 联系人的授权。

额外细节：

1.  该脚本是从超级管理员帐户运行的
2.  我将 oAuth 与消费者密钥和秘密一起使用
3.  在`Two-legged OAuth access control`Allow access to all API's 选项下被选中

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:49:44.037

我将其与 Google 用户身份验证一起使用：

```
 $client->setApprovalPrompt('auto'); 
```

我不确定我们是否在谈论同一件事，但逻辑可能有效？！

# javascript - JS 匿名函数调用语法

> ID：13644800
> 
> 赞同：4
> 
> 时间：2012-11-30T11:57:32.177
> 
> 标签：javascript

这两者有什么区别：

```
(function () {
    alert('something');
})();​  # invocation parens after the wrapping parens 
```

和

```
(function () {
    alert('something');
}());  # invocation parens inside the wrapping parens 
```

——两者都给了我相同的结果：提醒“某事”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T11:58:53.330

没有区别。两者都会做同样的事情（调用匿名函数表达式）。

匿名函数周围的括号只是为了确保函数被解析为*表达式*而不是声明（这很重要，因为不能调用声明）。您可能还会看到其他运算符用于相同的效果。例如：

```
// All three of the following have the same effect:

!function () {
    alert('something');
}();​

+function () {
    alert('something');
}();​

(function () {
    alert('something');
}());​ 
```

请注意，如果您使用像 JSLint 这样的静态分析工具，[它可能会抱怨](http://jslinterrors.com/move-the-invocation-into-the-parens-that-contain-the-function/)您问题中的第一种形式（在分组运算符之外使用调用括号）。原因是有些人认为第二种形式更容易理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T12:05:10.957

JSLint 将`})();`调用视为*“错误”*。函数定义*和*调用是单个表达式的一部分。仅出于这个原因，调用是表达式本身的一部分是非常合乎逻辑的。

本质上，这只是个人喜好问题。个人觉得

```
(function(elem)
{
})(document.getElementById('foo')); 
```

比阅读更容易

```
(function(elem)
{
}(document.getElementById('foo'))); 
```

但是话又说回来，任何具有语法突出显示的编辑器都会使该参数无效。
底线：使用你觉得最舒服的那个，让 jslint 唠叨它，Douglas Crockford 是 JS 的权威，但这并不意味着我们都必须盲目地复制他的风格/推理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:03:27.190

将某些内容包装到括号中（在 JS 中）会强制解释器将其视为表达式。

在第一种情况下，您强制解释器将函数视为表达式，然后解释器对其进行评估，得出结论它是一个函数，然后进一步查看: `()`，因此它调用该函数。

在第二种情况下，您强制解释器也将调用括号视为表达式，因此函数调用的结果将是表达式的结果，如果它会返回某些内容（否则它将是未定义的 - 感谢 Elias van Ootegem） .

# azure - 如何将 MVC 应用程序中 Azure ACS 提供的主体传递给 WCF 服务？

> ID：13644808
> 
> 赞同：0
> 
> 时间：2012-11-30T11:57:50.730
> 
> 标签：azure, wcf-security, azure-acs

因此，我正在创建一个托管在 Azure 中的 ASP.NET MVC 应用程序。它目前通过 Azure ACS 对用户进行身份验证，该 ACS 委托给应用程序的多个客户端 IdP。

应用程序现在需要调用 WCF 服务来显示一些信息，但需要保护这些服务。我最初虽然使用 WS-Trust 协议并使用“ActAs”令牌通过应用程序传递身份，但是[Azure ACS 2.0 不会发出这种类型的令牌](https://stackoverflow.com/questions/11296421/is-identity-delegation-via-ws-trust-actas-supported-in-acs/11298814#11298814)。

如何根据用户当前的身份获取服务的访问令牌？我可以返回 ACS 以获取其他令牌，但系统不得每次都提示用户提供凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:56:23.037

我认为推荐的方法是使用自定义 STS 的身份委托，如本例所示：[http ://code.msdn.microsoft.com/windowsazure/Federate-Windows-Live-ID-556ad976](http://code.msdn.microsoft.com/windowsazure/Federate-Windows-Live-ID-556ad976)

引用描述：

> 在此示例中，我们将引导您构建一个联合和委托 Windows Live ID 声明的应用程序。该应用程序使用一个自定义安全令牌服务，该服务公开一个 WS-Federation 被动端点 (default.aspx) 并公开一个 WS-Trust 主动端点 (ActAsIssuer.svc)。被动端点联合到 Windows Azure 访问控制服务 (ACS)，主动端点将使用引导令牌并为该用户发出额外的声明。这是应用程序架构的总结图： ![在此处输入图像描述](../Images/5f8902f49263768a4b03542757ca9d82.png)

ThinkTecture [Identity Server](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)可能会帮助您部署自己的自定义 STS，或者来自同一开发人员的[IdentityModel中的类可能会有所帮助 - 有一组特定的帮助程序与 WCF 安全性和 WS-Trust 有关。](http://thinktecture.github.com/Thinktecture.IdentityModel.45/)（链接适用于 .NET 4.5 的最新版本 - 也有早期版本）。

# php - 如何拒绝特定网页与同一 IP 地址客户端的多个连接（或多个实例）？

> ID：13644809
> 
> 赞同：1
> 
> 时间：2012-11-30T11:57:54.043
> 
> 标签：php

考虑一个网页，例如[http://www.somedomain.tld/page1.php](http://www.somedomain.tld/page1.php) 我不希望有人打开 page1.php 的多个实例。如果用户打开，多个浏览器中的同一页面会断开连接并显示警告消息。

有什么建议如何进行吗？可能的 cookie 检查、简单的 .htaccess 实现、IP 检查？

如果您需要有关该场景的进一步说明，请告诉我。

已链接：[限制用户从同一 IP 访问多个页面](https://stackoverflow.com/questions/10393398/restrict-multiple-page-access-by-a-user-from-the-same-ip?lq=1)

编辑：接受“ [deceze](https://stackoverflow.com/a/13645313/1866195) ”的方向。

@Mods：您可以关闭这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:30:32.263

因此，您在这里拥有的两个工具是 IP 和 cookie。

IP 对用户来说不是唯一的。忘记他们。IP 是一种路由数据的传递机制，它们太粗糙而无法识别用户。

Cookie 不会跨浏览器共享，因此您无法使用 Cookie 跨浏览器识别用户。

此外，网络是无状态的。当网站打开时，浏览器和服务器之间没有一个持久连接。页面加载后，它在浏览器中保持打开状态，但它与服务器之间没有通信。

鉴于这些情况，使用 IP 或 cookie 几乎不可能按照您的要求进行操作。至少没有一些副作用，可能包括用户退出自己的帐户或共享相同 IP 的人彼此死锁。

您应该做的是以一种包含 HTTP 请求的无状态特性的方式编写您的应用程序。您可以通过给他一个独特的 cookie 来识别用户。相反，没有cookie的用户是新用户（包括不同的浏览器）；使用此信息对您有利。如果您需要在完成其他操作之前完成某个过程，则需要将此状态保留在服务器端并将其绑定到特定用户。即*“具有cookie XYZ 的用户接下来需要执行操作C”*，然后当用户向您的服务器发出HTTP 请求时，让服务器评估该请求并决定它是否适合用户*应该*做的任何事情；通过重定向或拒绝请求做出适当的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:03:55.683

如果有登录，那么我的解决方案可能对你有用..

如果它在多个浏览器中，这意味着在第二个浏览器中用户必须再次登录..

因此，您在数据库中记下用户信息/登录信息，一旦登录您将无法再次登录...

可能无法在不同选项卡中阻止来自同一浏览器的用户

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:00:55.430

存储IP地址，每次检查这个值和请求的URL，这样你就可以决定哪个人可以看到你的网页（多少次）。

[**限制用户从同一 IP 访问多个页面**](https://stackoverflow.com/a/10393478/1343222)

# javascript - 如何获得最大值 宽度从 对于每个“列”

> ID：13644812
> 
> 赞同：1
> 
> 时间：2012-11-30T11:58:01.237
> 
> 标签：javascript, jquery, html, css

# 介绍

你好呀，

[我有一张](http://jsfiddle.net/Dcd7R/)`<ul>`用这样的列表制作的表格。

如您所见，我添加了`getMaxLiWidth()`以实现所有人的最大`<li>`宽度。

# 前

`#`| `Name`|`Extra`

`1`| `This is a very big name`|`Extra`

# 我想要的是

`#`| `Name`                                      |`Extra`

`1`| `This is a very big name`|`Extra`

# 我得到了什么

`#`                                      | `Name`                                      |`Extra`

# 问题

如何更改我`getMaxLiWIdth()`的以获得每个“列”的最大宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:09:49.300

您需要为最宽列中的所有列表项设置 css。首先，您必须确定最宽的列，然后以最大宽度返回它，然后将其用作选择器的一部分。

```
function getMaxLiWidth() {
    var maxWidth = 0;
    var column = 0;
    $('li').each(function() {
        if (this.offsetWidth > maxWidth) {
            maxWidth = this.offsetWidth;
            column = $(this).index();
            console.log(column);
        }
    });
    return [maxWidth,column];
}

$(function() {

    var arr = getMaxLiWidth();
    $('li:nth-child(' + (arr[1] + 1) + ')').each(function() {
        $(this).css({
            'width': arr[0]
        });
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/Dcd7R/2/](http://jsfiddle.net/Dcd7R/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T12:06:37.063

您需要在此处为​​每列设置不同的格式。简单地尝试 CSS

# asp.net-mvc - MVC 点击按钮刷新视图

> ID：13644814
> 
> 赞同：0
> 
> 时间：2012-11-30T11:58:06.543
> 
> 标签：asp.net-mvc, onclick

在 MVC 中，我有最简单的视图。我添加了一个按钮。这个按钮的作用是简单地提醒（“文本”）。

```
<button id="btn-test" onClick="alert( 'test')">test</button> 
```

或者这个 javascript

```
 $("#btn-refresh").click(function () {
        //      refreshScheduler()
        alert("SSSSSSSS");
        return false;
    }); 
```

当警报关闭时，视图会刷新！！！。我不想刷新页面。我应该怎么做才能使单击的执行仅通过 anyview refresh 执行？我不需要，也不需要空间视图，也不需要目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:43:09.700

Two issues I can see:

*   Remove the onClick event from the button, and
*   the selector for the jQuery click handler is incorrect it should be #btn-test and not #btn-refresh for instance

    $("#btn-test").click(function (e) { // refreshScheduler() alert("SSSSSSSS"); e.preventDefault(); });

# jquery - 访问从 jquery ajax 发送的 struts 操作中的值作为 null

> ID：13644818
> 
> 赞同：2
> 
> 时间：2012-11-30T11:58:21.873
> 
> 标签：jquery, ajax, struts

嗨，我是 struts 2 和 jquery 的新手，我想访问从 ajax 调用发送的 struts 动作类中的一个值，但是当我尝试这样做时，我得到的数据为空，请任何人指导我。

这是代码

ajax函数：

```
var searchURL = url;
    $.ajax({
        type : "GET",
        url : "conversation.action",
        dataType: "text",
        data : searchURL,
        success : function(data)
        {

        };
    }); 
```

动作类：

```
String data;
//getter and setter methods

System.out.println("Data::"+getData()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:03:41.487

我不确定 'url' 在你的 javascript 中包含什么，但它应该明确具有 struts 变量名称，否则 Struts 不知道它应该将 url 映射到哪里。

例如，`var searchURL = 'data=www.google.com';`（其中 ' `data`' 是你的 struts 动作类中的变量名）

其他选项：

**i)**如果你的参数是一个表格。您可以通过`$('#formId').serialize()`ajax 调用的数据部分传递完整的表单数据。

**ii)**代替 struts 动作变量映射，解析动作中的请求参数。例如，在`data`ajax 函数的 ' ' 中，传递`'someUrl=www.google.com'`. 在您的操作类中，将 url 获取为`String url = request.getParameter('someUrl')`;

# iphone - 从使用 Phonegap 构建的 iOS 应用程序发布到 Facebook 墙

> ID：13644819
> 
> 赞同：0
> 
> 时间：2012-11-30T11:58:22.683
> 
> 标签：iphone, ios, facebook, ipad, cordova

我有一个使用 Phonegap 构建的应用程序，所以我只有全部 HTML 和 Java 脚本。
我可以使用两行目标 C 代码检查 facebook 是否安装在特定设备上或不在我的应用程序中。
我想在我的应用程序中有一个 facebook 分享按钮，
点击哪个按钮会从我的应用程序打开 facebook 应用程序，并将在用户的墙上发布一些数据，我可以通过这个应用程序调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:32:23.720

你为什么不试试Phonegap 的[FacebookConnect](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/FacebookConnect)插件，它适用于 iOS 和 Android。

请下载[示例](https://github.com/mgcrea/cordova-facebook-connect)应用程序并在您的代码中尝试以下代码段：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/plugin.css" />
        <title>Hello World</title>
    </head>
    <body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
            <div id="plugindemo">
                <h3>FacebookConnect Plugin</h3>
                <a href="#" class="btn large" onclick="plugin.login();">login()</a>
                <a href="#" class="btn large" onclick="plugin.requestWithGraphPath();">requestWithGraphPath()</a>
                <a href="#" class="btn large" onclick="plugin.dialog();">dialog()</a>
                <a href="#" class="btn large" onclick="plugin.logout();">logout()</a>
            </div>
        </div>
        <script type="text/javascript" src="cordova-2.2.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/plugin.js"></script>
        <script type="text/javascript" src="js/FacebookConnect.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
    </body>
</html> 
```

# c - C malloc 总是返回 null

> ID：13644820
> 
> 赞同：-2
> 
> 时间：2012-11-30T11:58:24.720
> 
> 标签：c, pointers, null, malloc

所以我每次都收到这个错误，我似乎无法弄清楚在哪里解决它。

这是它总是返回 null 的地方：

```
 wordData * ptr;
    ptr = (wordData*)malloc(sizeof(wordData)); //returns null every time
    if(NULL == ptr)
    {
       printf("\n Node creation failed in add list\n");
       return NULL;
    } 
```

这是我的结构：

```
 typedef struct _wordData
    {
        int iWordID;
        char * cWord;
        struct _wordData *next;

     } wordData; 
```

当我之前在我的列表中创建头节点时，完全相同的代码是如何工作的！编辑：阐述：

```
 printf("\n creating list with headnode as [%d] %s\n",iWordID,cWord);
    wordData *ptr;
    ptr = (wordData*)malloc(sizeof(wordData));
    if(NULL == ptr)
    {
       printf("\n Node creation failed in create list \n");
       return NULL;
    } 
```

所以上面的代码实际上创建了我的头节点。

编辑：关于内存：我有大量可用的内存:)

编辑：更多代码：

```
 void clearStr() // adding word into list with a struct containing word,wordID
    {
      add_to_list(iID,cStr,true);
      memset(cStr, '\0', sizeof(cStr) );
      iCounter = 0;
    }

    wordData* add_to_list(int iWordID, char * cWord, bool add_to_end)
    {
      char temp[strlen(cWord)+1];
      strcpy(temp, cWord);
      if(NULL == head)
      {
          return (create_list(iWordID, temp));
      } 

      if(add_to_end)
      printf("\n Adding node to end of list with iWordID [%d] %s\n",iWordID, cWord);
      else
      printf("\n Adding node to beginning of list with iWordID [%d]\n",iWordID);

      int sizeWordData = sizeof(wordData);
      printf("Size wordData is: %d",sizeWordData); //12 every time

      wordData * ptr;
      ptr = (wordData*)malloc(sizeof(wordData)); //waarom is dit null?
      if(NULL == ptr)
      {
         printf("\n Node creation failed in add list\n");
         return NULL;
      }

      ptr->iWordID = iWordID;
      ptr -> cWord,temp;
      strcpy(ptr -> cWord, temp);
      ptr->next = NULL;

      if(add_to_end)
      {
        curr->next = ptr;
        curr = ptr;
        printf("pointers geset");
      }
      else
      {
        ptr->next = head;
        head = ptr;
      }
      return ptr;
      } 
```

我已经搜索了所有内容，但没有一个给出的解决方案对我有帮助，所以我们将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:11:39.423

实际上，您之前已经用缓冲区溢出破坏了堆。

```
strcpy(ptr -> cWord, temp);//without allocating anything to cWord 
```

这将导致 malloc 行为不端。做：

```
ptr -> cWord = malloc(strlen(temp) +1);//allocate
strcpy(ptr -> cWord, temp);//then copy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:08:08.207

恐怕您的问题中没有足够的信息来正确回答它。

这个：

```
ptr = (wordData*)malloc(sizeof(wordData)); //returns null every time 
```

最好写成：

```
ptr = malloc(sizeof *ptr); 
```

它更短，重复更少，[移除演员表](https://stackoverflow.com/a/605858/28169)，并且通常更充满胜利。

但是，由于您说相同的代码在程序流程的早期工作，因此您的代码很可能在这里做正确的事情。

你分配了多少个节点？是不是某些递归失控了，分配了数百万个节点并耗尽了你的内存？

另请注意，您的标题与您的文字相矛盾，使这个问题更加混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:08:31.823

从[手册页](http://linux.die.net/man/3/malloc)中`malloc()`有两次`malloc()`可以返回`NULL`：

*   如果尺码合适`0`，可以退货`NULL`
*   如果内存请求失败

你`How ever when I create the headnode in my list earlier on the exact same code works`这么说意味着你的例子中缺少一些可能包含问题的东西：

```
ptr = (wordData*)malloc(sizeof(wordData)); 
                             ^
                         this should never be 0, so that shouldn't be the problem 
```

您的程序中是否有任何循环或递归调用？你分配了多少次？

**编辑：**
你说你只是从一个文件中读取，所以试试这个：

```
main()
  open file
  loop for length of file
     allocate your memory
  free memory 
```

如果这个最小的代码示例无法发布代码和文本文件的示例，如果它有效，那么您的较大程序中还有其他东西导致了问题，您可以从那里“建立备份”并可能找到它。

# objective-c - 使用 UIPanGestureRecognizer 围绕某个点旋转 UIView

> ID：13644821
> 
> 赞同：6
> 
> 时间：2012-11-30T11:58:28.847
> 
> 标签：objective-c, ios, core-animation, uigesturerecognizer, uipangesturerecognizer

我正在尝试创建一个动画，允许用户从窗口的一侧拉出一个面板。少量视图将在右上角可见，通过拉动它，视图将向外旋转，固定在屏幕的右下角。希望这些图像显示了我想要实现的目标（右侧的纸张表明视图的一部分将被隐藏。我希望用户能够拖动它，而不是滑动或点击。

谁能指出我如何实现这一目标的正确方向？我对 iOS 中的动画很陌生。我已经让平移手势工作了，但我需要这个点来旋转。我可以设置视图的`.center`属性，但这样做只是将整个视图移动到那个点，所以我需要一个`center`旋转，这实际上不是视图的中间，我想？

![在此处输入图像描述](../Images/134f8bf022e44cb1abac4186d2a75905.png) ![在此处输入图像描述](../Images/46b1ccf21805ee53671eaefc92522942.png)

编辑：我编写了一个有效的方法，但视图并没有“卡”在用户的手指上。我可以拖动手指，比如 45 度，但视图会移动得更多。不知道如何同步它们，有什么想法吗？

```
- (void) swipeSidebarOpen: (UIPanGestureRecognizer *) recognizer {
    //[self openOrCloseSideBar: YES];
    _sidebarView.layer.anchorPoint = CGPointMake(1.0, 1.0);
    _sidebarView.layer.position = CGPointMake(510, 330);

    UIView *shuttle = [recognizer view];

    if ([recognizer state] == UIGestureRecognizerStateBegan || [recognizer state] == UIGestureRecognizerStateChanged) {
        CGPoint vel = [recognizer velocityInView:[recognizer view]];

        if (vel.x > 0) {
            [recognizer view].transform = CGAffineTransformRotate([[recognizer view] transform], M_PI / 80.0f);
            [recognizer setTranslation: CGPointZero inView:[shuttle superview]];
        } else {
            [recognizer view].transform = CGAffineTransformRotate([[recognizer view] transform], -M_PI / 80.0f);
            [recognizer setTranslation: CGPointZero inView:[shuttle superview]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T21:26:08.557

有点晚了，但我写了一些代码来处理单指使用的平移、缩放和缩放。标准手势在微调工作或在出租车后部弹跳时缺乏一定的准确性。

这两件事可能会对你有所帮助。旋转手势目标方法能够从捏合识别器或平移接受。不过，您需要跟踪平移识别器的第一个触摸点落在哪里，因为您将计算其当前点与手势起点之间的角度。您还需要保存屏幕中心。对我来说，我将所有这些点都放入了窗口的坐标系中，因此您必须选择要使用的点并坚持使用它。

```
CGFloat /* midpoint, startpoint, point */
CGPointAngleATan2(CGPoint mp, CGPoint sp, CGPoint p)
{
    CGFloat angle = 0;
    CGFloat sAngle = atan2(sp.y-mp.y,sp.x-mp.x);
    CGFloat pAngle = atan2(p.y-mp.y,p.x-mp.x);
    angle = pAngle-sAngle;
    return angle;
}

- (CGFloat)calculateRotation:(UIGestureRecognizer *)sender;
{
    CGFloat rotation;

    if ([sender respondsToSelector:@selector(rotation)]){
        rotation = [(UIRotationGestureRecognizer *)sender rotation];
    } else {
        // convert to window co-ordinates, app specific so change if needed
        CGPoint point = [sender locationInView:self.view.window];
        rotation = CGPointAngleATan2(screenCenter,firstTouch,point);
    }
    return rotation;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:34:30.323

默认情况下，视图将围绕其中心旋转，但您可以通过`anchorPoint`为视图设置另一个来更改它`layer`。（您需要导入核心动画来做到这一点（QuartzCore.framework））。

锚点被归一化（X 和 Y 都从 0 变为 1）。默认情况下它位于中心 (0.5, 0.5)，但您想将其更改为右下角 (1.0, 1.0)。

```
myView.layer.anchorPoint = CGPointMake(1.0, 1.0); 
```

更改anchorPoint 将在屏幕上直观地移动您的视图，以便`position`超级视图中的视图层与视图旋转的点相同。

```
myView.layer.position = theFixedHerePoint; // The point you are showing in your drawing... 
```

例如：如果超级视图从 (0,0) 变为 (100, 100)，则`position`myView 的点**应该是右下角**的点，而不是 myView 的中心所在的点。如下图所示（X 是锚点 (1, 1) 和位置 (95, 95)）。*请注意，95 只是一个任意值。*

```
┌───────────────────┐
│ superview         │
│                   │
│      ┌──────────┐ │
│      │ myView   │ │
│      │          │ │
│      │          │ │
│      └──────────X │
└───────────────────┘ 
```

现在，当您平移时，您可以简单地设置适当的旋转变换，视图将围绕其右下角旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:08:31.510

您需要做的是在平移时，在 pangesturerecognizer 的处理程序中，您需要对正在平移的视图应用旋转变换。喜欢`self.SomeView.transform = CGAffineTransformMakeRotation(some rotation)`。您需要对要应用的旋转量进行一些计算。同样用于设置中心。

# php - PHP rake 迁移等效于 MongoDB

> ID：13644822
> 
> 赞同：0
> 
> 时间：2012-11-30T11:58:30.353
> 
> 标签：php, ruby-on-rails, mongodb

我正在尝试解决 MongoDB 等非关系数据库中的模式迁移问题。如果我在文档中甚至在集合之间重命名或移动字段，则可以通过使用 rake 任务或迁移将旧数据迁移到新位置来很好地处理 Rails。PHP有什么等价的吗？我知道[ruckusing](https://github.com/ruckus/ruckusing-migrations)，但我正在寻找我也可以与 MongoDB 一起使用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T07:58:41.287

有一个独立的 PHP 库 - [https://github.com/sokil/php-mongo-migrator](https://github.com/sokil/php-mongo-migrator)，专门用于使用 CLI 迁移 mongodb 模式，如 yii 的 mirgations 或其他关系数据库迁移库[http://phinx.org/](http://phinx.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:55:26.060

Rails 是一个基于 Ruby 的框架，所以如果你在 PHP 中搜索相同类型的东西，你必须看看 PHP 框架，例如：[Flow3](http://flow.typo3.org/)、[CakePHP](http://book.cakephp.org/1.3/en/The-Manual/Core-Console-Applications/Schema-management-and-migrations.html)、[Lithium](https://github.com/nashape/li3_ruckusing_migrations)、[Zend](http://framework.zend.com/)等。

他们中的一些人带着移民助手来，有些人没有。

# svn - 如何在不切换的情况下提交到不同的 svn 分支

> ID：13644824
> 
> 赞同：8
> 
> 时间：2012-11-30T11:58:29.970
> 
> 标签：svn, branch, commit

我通常在主干中处理代码，但由于最近的更改，我不得不将工作区切换到分支。

在分支中工作时是否可以在主干中提交任何更改而无需实际将项目切换到主干

我基本上想在主干和分支中提交更改，而不是一次又一次地来回切换

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T14:40:27.883

简短的回答：不

这就是上帝`svn switch`首先创造的原因。它允许您更改工作目录的底层分支而不会丢失您的工作。

这样想：开发人员有多少次因为他们对自己说*“嘿，我不必测试这个。这是一个**小**改动”*而破坏了一些东西？

即使 Subversion 允许你做你想做的事，它仍然是一个坏主意。您基本上是在代码库中进行更改，而没有真正的方法来确保它们首先工作。这就是为什么 Subversion 要求您在进行更改之前拥有一个工作目录^*。您将如何测试您的更改？

如果您不想使用`svn switch`，因为您不想丢失您的工作，您可以执行以下操作：

*   将您的整个工作目录复制到另一个位置，然后使用`svn switch`其中一个来制作该主干。
*   在你的分支上完成你的工作。提交更改并记下修订号。现在，要么做一个`svn co`要么`svn switch`得到一个主干工作副本。然后使用`svn merge -r`将您的更改合并到主干中。当然，在提交之前测试您的更改。

* * *

^* Subversion 确实允许`mkdir`、`cp`、`mv`和`rm`直接在 URL 上工作，但这主要是为了让您无需创建工作目录即可操作分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:03:06.067

检查不同文件夹中的树干。
在主干中进行更改，并将它们签入。然后将它们合并到分支，并签入合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:59:56.380

您不能提交 WC URL 之外的路径（请参阅 参考资料`svn info WCROOT`）

上述规则意味着 - 如果 WC 根位于一个级别，即分支和主干的共同父级，您可以同时提交到两个位置（分支和主干将是 WC 内的子目录）。共同的父级是 repository-root，为了**不**签出整个 repo，您​​可以使用 --depth 和 --setdepth 提交/更新选项

# wcf - 当 svcutil 从 Windows 应用程序中的 Process 对象执行时，wsdl doc 缺少 wsdl:port 元素

> ID：13644828
> 
> 赞同：3
> 
> 时间：2012-11-30T11:58:44.480
> 
> 标签：wcf, wsdl, svcutil.exe

出于不必要的原因，我正在尝试为 svcutil 创建一个包装器，然后它将标准化为指向某些地址而创建的 wsdl 和 xsd 文档。但是，我的 WCF 服务之一有两个不同的服务合同，一个用于内部处理，一个发布给外部客户端。当我从 cmd.exe 运行**svcutil /target:metadata *serviceAddress.svc***时，我得到一个完整的 wsdl 文档，其中包含以下条目：

```
<wsdl:service name="MyServiceMain">
    <wsdl:port name="BasicHttpBinding_IMyService" binding="tns:BasicHttpBinding_IMyService">
        <soap:address location="MyServiceMain.svc" />
    </wsdl:port>
    <wsdl:port name="BasicHttpBinding_IInternalServiceContract" binding="tns:BasicHttpBinding_IInternalServiceContract">
        <soap:address location="MyServiceMain.svc" />
    </wsdl:port>
</wsdl:service> 
```

但是，如果我使用 Process 对象（设置了具有相同环境变量的 ProcessStartInfo 对象，**肯定**使用相同版本的 svcutil）运行相同的命令，则其中一个 wsdl:port 元素神秘地消失了：

```
<wsdl:service name="MyServiceMain">
    <wsdl:port name="BasicHttpBinding_IMyService" binding="tns:BasicHttpBinding_IMyService">
        <soap:address location="MyServiceMain.svc" />
    </wsdl:port>
</wsdl:service> 
```

知道为什么吗？或者甚至可以指出我正确方向的东西，这可能表明引擎盖下发生了一些不同的事情。因为我现在被难住了。

# java - httpRequest 类中的 Intranet 站点

> ID：13644833
> 
> 赞同：0
> 
> 时间：2012-11-30T11:59:24.880
> 
> 标签：java, salesforce, httprequest, apex-code

我们在 httpRequest 类的 setEndpoint 中设置一个内网站点。当最后一行执行时，它返回一个错误，上面写着： System.CalloutException: Read timed out。如果我通过任何其他网站，如 www.google.com，它就可以正常工作。知道如何将端点 URL 设置为 Intranet 站点吗？

```
 string URL = 'some intranet website';
    Http http = new Http();
    HttpRequest req = new HttpRequest();
    req.setEndpoint(URL);
    req.setMethod('GET');
    HttpResponse res = http.send(req); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:22:45.323

来自 Salesforce 的所有请求都将来自其众所周知的 IP 地址池。

1.  您的 Intranet 站点是否可以从外部访问？如果您可以在浏览器中自己粘贴 URL，并不意味着 SF 可以访问它！例如，您可以在家中访问您的 Intranet（不使用 VPN、Citrix 等方式）吗？
2.  可以增加读取超时。将其设置为 1 分钟，看看会发生什么：`req.setTimeout(60000);`
3.  如果它仍然超时，我怀疑防火墙被配置为只是吞下问题。像黑洞一样，不会返回“未经授权，您是否有用户名和密码”，也不会显示此地址实际上是有效的。联系您的网络管理员并询问他是否可以将[Salesforce IP](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_om_outboundmessaging_security.htm)列入白名单。
4.  当然，您可能不想让每个 Salesforce 客户都可以访问它。如果您需要通过某些身份验证机制或决定您需要代理，这取决于您。特别是如果您的 Intranet 站点需要 NTLM 身份验证（粗略地说与 Windows 域相关 - 当然 Salesforce 服务器不会与您的 Intranet 服务器位于同一 LAN 中），则需要代理。

# sqlite - sqlite 基础知识

> ID：13644839
> 
> 赞同：1
> 
> 时间：2012-11-30T11:59:40.653
> 
> 标签：sqlite

如何构建 sqlite3 库以与 bode 块 mingw 编译器一起使用？我已经下载了它包含我要创建库`sqlite amalgamation`的四个文件。`shell.c, sqlite3.c, sqlite3.h, sqlite3ext.h``sqlite3.a`

（我用的是win xp sp3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:16:28.937

使用 SQLite的[推荐](http://www.sqlite.org/amalgamation.html)方法是将其静态编译到您的程序中，即将`sqlite3.c`文件添加到您的其他源文件中。

# facebook - 将白名单 IP 添加到受限国家/地区

> ID：13644843
> 
> 赞同：0
> 
> 时间：2012-11-30T11:59:52.180
> 
> 标签：facebook, ip, country

我们有一个仅在英国可用的应用程序 - 因此使用开发者控制台，在“设置”-“高级”下，我已将英国置于“国家限制”设置中以阻止所有其他国家/地区。

但是，我们在爱尔兰有一个呼叫中心，我需要提供对应用程序的访问权限——我尝试将他们的 IP 地址添加到“服务器 IP 白名单”中，但他们看不到应用程序。

我是否可以将爱尔兰作为一个国家/地区屏蔽 - 但是否打开了特定的 IP？

谢谢

# android - Android J4L Charts Usage 超过 10 个系列值

> ID：13644844
> 
> 赞同：0
> 
> 时间：2012-11-30T11:59:55.660
> 
> 标签：android

我的问题是显示一个系列中不超过 10 个值的 3D 条形图。来到图书馆，我使用的是我的 android 应用程序中用于图形报告的 J4L 图表。所以，当我想显示更多系列值时，我无法在图表中显示它们，我只能显示 10 个系列值。希望大家理解。

如果有人在 android 中使用 J4L 图表，请告诉我如何显示更多系列值。这对我来说非常紧急。希望大家理解。

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:45:56.670

我猜你正在使用j4L 图表的**演示**`limited to 10`版本，它只是值。

这是他们明确提到此限制的下载[链接。](http://www.java4less.com/charts/chart.php?info=download)

希望这会帮助你。

**请注意，我与该软件无关，该链接仅用于解决问题（混淆）。**

# php - 如何从 Codeigniter 中的表格网格中获取值

> ID：13644845
> 
> 赞同：0
> 
> 时间：2012-11-30T11:59:55.630
> 
> 标签：php, codeigniter

我在 Codeigniter 中开发了简单的自定义网格，我在网格中有以下列

Sl - CheckValue（复选框） - 用户 ID - 用户名 - 电子邮件

所以，如果有人检查任何行并提交，我应该能够获得所选行的值..

所以任何人都可以告诉我如何在codeigniter中做同样的事情..

```
 function showattendee($id, $offset=0)
{
    $person = $this->Person_model->get_by_id($id)->row();
    $this->form_data->id = $person->tab_classid;
    $this->form_data->classtitle = $person->tab_classtitle;
    $this->form_data->classdate = $person->tab_classtime;
    $this->form_data->createddate = $person->tab_crtdate;
    $this->form_data->peremail = $person->tab_pemail;
    $this->form_data->duration = $person->tab_classduration;

    //Show User Grid - Attendee>>>>>>>>>>>>>>>>>>>>>>>>
    $uri_segment = 0;
    $offset = $this->uri->segment($uri_segment);
    $courses = $this->Mycourses->my_courses($this->limit,$offset,$this-                 >form_data->classtitle)->result();
    // generate pagination
    $this->load->library('pagination');
    $config['base_url'] = site_url('person/index/');
    $config['total_rows'] = $this->Mycourses->count_all();
    $config['per_page'] = $this->limit;
    $config['uri_segment'] = $uri_segment;
    $this->pagination->initialize($config);
    $data['pagination'] = $this->pagination->create_links();
    // generate table data
    $this->load->library('table');
    $this->table->set_empty("&nbsp;");
    $this->table->set_heading('Ref#','Check', 'User Id','User Name', 'Email');
    $i = 0 + $offset;
    foreach ($courses as $course)
    {
        $checkarray=array('name'=>'chkclsid[]','id'=>'chkclsid','value'=>$course->user_id);
        $this->table->add_row($course->mycourse_id,form_checkbox($checkarray), $course->user_id, $course->user_name, $course->user_email);
    }
    $data['table'] = $this->table->generate(); 
```

//结束网格代码

```
 // load view
    // set common properties
    $data['title'] = 'Assign Attendees';
    $msg = '';
    $data['message'] = $msg;
    $data['action'] = site_url('person/CreateAttendees');
    //$data['value'] = "sssssssssssssssssss";
    $session_data = $this->session->userdata('logged_in');
    $data['username'] = "<p>Welcome:"." ".$session_data['username']. " | " . anchor('home/logout', 'Logout')." | ". "Userid :"." ".$session_data['id']; "</p>";
    $data['link_back'] = anchor('person/index/','Back to list of Classes',array('class'=>'back'));
    $this->load->view('common/header',$data);
    $this->load->view('adminmenu');
    $this->load->view('addattendee_v', $data);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:16:13.957

当您提交带有选中复选框的数据时，您可以通过以下方式获取这些数据。

```
$obj = $this->input->post('chkclsid');
echo $obj['0']; 
```

# java - NEO4J 在密码查询中使用数组或集合作为参数

> ID：13644847
> 
> 赞同：6
> 
> 时间：2012-11-30T11:59:56.490
> 
> 标签：java, graph, neo4j, cypher

我正在尝试调用传递参数的密码查询（在java中）以执行以下操作：

```
WHERE node.property IN [{param}] 
```

完整示例：

```
START person=node:persons('Name:*')
MATCH person->[:Girl]->friend
WHERE person.Name IN [{Names}] AND friend.Hair = 'Blond'
RETURN person.Name, friend.Name 
```

对于我尝试使用以下参数的参数：

1.  包含字符串的集合
2.  包含字符串的数组
3.  分隔字符串，例如“'Joe Blow', 'Blow Joe'”

我真的认为最后一个会起作用，但我认为参数被替换为单个字符串，即 ["'Joe Blow', 'Blow Joe'"] 而不是 ['Joe Blow', 'Blow Joe']。我通过传入一个值证明了这一点，并且奏效了。我尝试跟踪代码，但在 scala 中迷路了。

还有其他选择吗？

干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T14:08:12.740

如果删除 IN 关键字后的方括号，并使用集合作为参数，它应该会更好。

```
START person=node:persons('Name:*')
MATCH person->[:Girl]->friend
WHERE person.Name IN {Names} AND friend.Hair = 'Blond'
RETURN person.Name, friend.Name 
```

# java - 如何在软键盘上创建自己的键

> ID：13644848
> 
> 赞同：6
> 
> 时间：2012-11-30T11:59:58.763
> 
> 标签：java, android, keyboard

在 xml 文件中，我接下来执行以下操作：

```
 <Row>
        <Key android:codes="FLAG_EDITOR_ACTION" android:keyLabel="Start"  />
    </Row> 
```

在方法 onKeyDown 中的键盘类中，我创建了下一个构造

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
switch (keyCode) {
case KeyEvent.FLAG_EDITOR_ACTION: {

            return true;
}
... 
```

但不工作。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:55:11.230

您可以在 android 的键盘中添加一些操作，使用

```
android:imeOptions="actionDone" 
```

有很多 likr Go、Done、Search 等等……并使用 EditorActionListener 执行操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:16:31.833

看看[这里](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)。并非所有按键事件都会触发 onKeyDown()。您应该做的是实现[OnKeyboardActionListener](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.OnKeyboardActionListener.html)并使用任何可能适合您的回调（我认为 onKey() 或 onRelease() 都适合您）。

# c# - 具有许多空格和特殊字符的数字的正则表达式？

> ID：13644850
> 
> 赞同：0
> 
> 时间：2012-11-30T12:00:09.560
> 
> 标签：c#, .net, vb.net

嗨，我是正则表达式的新手。

有人可以告诉如何格式化正则表达式模式以验证具有许多空格和特殊字符的数字吗？这里没有定义空间位置。

我试过这样，`^[0-9]{0,12}$`但我不知道如何在中间放置空格？

```
Ex:'2356 85 568#','5875 #2545','#2525','4567' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:08:49.050

要在最多 12 个数字之间允许任意数量的空格、破折号和#-符号，请使用以下命令：

```
^[ #-]*([0-9][ #-]*){0,12}$ 
```

*   最初 0 个或多个特价商品
*   然后0-12组
    *   一位数
    *   后跟 0 个或多个特价商品

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:07:45.930

如果您最多需要 12 位数字，以及无限量的空格和井号，您可以这样做：

```
^[\s#]*([0-9][\s#]*){0,12}$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T12:19:04.067

要允许“空格和特殊字符”包含任何非数字字符，请使用：

```
^\D*(\d\D*){0,12}$ 
```

解释：

*   `^\D*`匹配字符串开头的任何非数字字符
*   `(\d\D*)`匹配单个数字后跟任何非数字
*   `{0,12}`允许前一组出现最多 12 次

# python - 在 Python 中从 Numpy 数组中删除零

> ID：13644852
> 
> 赞同：2
> 
> 时间：2012-11-30T12:00:11.607
> 
> 标签：python, arrays, numpy

我有一个关于从数组中删除的问题。我有一个估计为 900^3 大小的 3-D numpy 数组（坐标为 z、y、x）。只有少数值是非零的，但它们具有非平凡的空间分布。我想删除该数组中只有零的所有二维切片。换句话说，我想要一个大小最小的数组，其中仍然包含所有相关数据。

我的尝试看起来像：

```
 while np.all(a[0]==0):
        a=np.delete(a,0,0)
    while np.all(a[a.shape[0]-1]==0) and a.shape[0]>1:
        a=np.delete(a,-1,0) 
```

并且似乎适用于 z 方向。我怎样才能在其他两个方向上做同样的事情？还有可能有另一种更好的方法吗？

另一个想法是

```
tmp=np.delete(tmp,np.all(tmp==0,axis=1),1) 
```

但是那个似乎只从一开始就起作用，并在最后省略了零。

是否有可能在 3D 空间中旋转阵列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:03:36.910

您可以使用[转置](http://docs.scipy.org/doc/numpy/reference/generated/numpy.transpose.html)重新排列轴，但听起来您可能真的在寻找[稀疏数组](http://docs.scipy.org/doc/scipy/reference/sparse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:59:51.953

这是一个有趣的问题，这是我想出的：

```
for ax in range(3):
    all_but_ax = [i for i in range(3) if i != ax]
    a = delete(a, where(apply_over_axes(sum, abs(a), all_but_ax).ravel() == 0), 
                  ax) 
```

因此，`abs(a)`除了当前轴 == 当前 2D 切片之外，您需要检查它是否为零，这意味着它是空的。`where`给出删除的索引。

# r - 从 r 中的多个文本文件（可能有不平衡的列数）中读取前 4 列

> ID：13644854
> 
> 赞同：1
> 
> 时间：2012-11-30T12:00:15.913
> 
> 标签：r, csv

我有以下类似文本（csv）文件要阅读，其中前四列是我感兴趣的，但之后我有很多垃圾。我只想将前四列读入 R。

![在此处输入图像描述](../Images/01259afe4c8ab96471b4396962a9aed9.png)

我想要前四列，这样输出（在 excel 中打开的 csv）看起来像：

![在此处输入图像描述](../Images/8c87999236da528e7ccae558fa821068.png)

由于 SO 的限制，我无法粘贴整个文件或附加它。这是锻炼的较小示例：

```
type,latitude,longitude,name,link1,
W,43.075319,-89.386145,Mirch Masala,"<just link, jjksskkls  hskks > ","<just link, jjksskkls  hskks > "
W,43.07488,-89.390698,Himal Chuli Restaurant,"<just link, jjksskkls  hskks > ","<just link,  hskks , hsksks  > "
W,43.074887,-89.391011,Chautara Restaurant,"<just link,  hskks , hsksks  > ","<just link, jjksskkls  hskks > "
W,43.092866,-89.351587,Dobhan Restaurant,"<just link, jjksskkls  hskks > ","<just link, jjksskkls , ssjjs hskks > "
W,43.074746,-89.393137,State Street Cash Mart,"<just link, jjksskkls  hskks > ","<just link, jjksskkls , ssjjs hskks > "
W,43.072801,-89.395718,Dotty Dumplings Dowry,"<just link, jjksskkls ,    hskks > ","<just link, jjksskkls , ssjjs hskks > "
W,43.074744,-89.393046,Dobra Tea,"<just link, jjksskkls  hskks > ","<just link, jjksskkls , ssjjs hskks > "
W,43.076372,-89.380231,Hi-Madison,"<just link, jjksskkls  hskks > ","<just link, jjksskkls , ssjjs hskks > "
W,43.019624,-89.421822,Candlewood Suites Fitchburg,"<just link, jjksskkls , ssjjs hskks > ","<just link, jjksskkls , ssjjs hskks > "
W,43.08154,-89.524094,Holiday Inn Hotel & Suites Madison West,"<just link, jjksskkls 100  hskks > ","<just link, jjksskkls , ssjjs hskks > " 
```

在导入 R 时只阅读前四列有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:14:20.687

根据您对问题的评论，您的标题有些误导。您遇到问题的地方是不知道您最终`data.frame`将拥有的确切列数。

从`?read.table`帮助页面：

> count.fields 可用于确定读取文件的问题，这些问题会导致报告记录长度不正确

所以，让我们尝试一个不同的答案。

首先，让它代表您的数据：

```
"W",43.075319,-89.386145,"Mirch Masala","<J, K>"
"W",43.07488,-89.390698,"Himal Chuli Restaurant","<J, K>","<J, K>","<J, K>"
"W",43.074887,-89.391011,"Chautara Restaurant","<J, K>","<J, K>"
"W",43.092866,-89.351587,"Dobhan Restaurant","<J, K>","<J, K>","<J, K>","<J, K>"
"W",43.074746,-89.393137,"State Street Cash Mart","<J, K>"
"W",43.072801,-89.395718,"Dotty Dumplings Dowry" 
```

（如果这已经保存为文本或 csv 文件，则您不需要执行下一步，但为了一个最小的可重复示例......）

将这些行写入文本文件以模拟该`read.table`过程：

```
writeLines('"W",43.075319,-89.386145,"Mirch Masala","<J, K>"
"W",43.07488,-89.390698,"Himal Chuli Restaurant","<J, K>","<J, K>","<J, K>"
"W",43.074887,-89.391011,"Chautara Restaurant","<J, K>","<J, K>"
"W",43.092866,-89.351587,"Dobhan Restaurant","<J, K>","<J, K>","<J, K>","<J, K>"
"W",43.074746,-89.393137,"State Street Cash Mart","<J, K>"
"W",43.072801,-89.395718,"Dotty Dumplings Dowry"', "myRaggedFile.txt") 
```

这将创建一个“参差不齐”的文件，以便使用`read.table`or读取`read.csv`。然而，诀窍是用来`count.fields`计算文件应该有多少列。

```
dat <- read.csv("myRaggedFile.txt", header=FALSE, 
                col.names=1:max(count.fields("myRaggedFile.txt", sep=",")))
dat
#      X1       X2        X3                     X4     X5     X6     X7     X8
# 1     W 43.07532 -89.38614           Mirch Masala <J, K>                     
# 2     W 43.07488 -89.39070 Himal Chuli Restaurant <J, K> <J, K> <J, K>       
# 3     W 43.07489 -89.39101    Chautara Restaurant <J, K> <J, K>              
# 4     W 43.09287 -89.35159      Dobhan Restaurant <J, K> <J, K> <J, K> <J, K>
# 5     W 43.07475 -89.39314 State Street Cash Mart <J, K>                     
# 6     W 43.07280 -89.39572  Dotty Dumplings Dowry            
dat <- dat[1:4] # To keep just the first four columns
## Or, continuing with my original answer:
## read.csv("myRaggedFile.txt", header=FALSE, 
##          col.names=1:max(count.fields("myRaggedFile.txt", sep=",")))[1:4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:00:01.543

当您阅读文件时，请使用以下内容：

first4columns <- read.table("/file/path/filename.csv", header=TRUE, sep=",")[, c(1:4)]

# javascript - 范围输入更改事件不触发

> ID：13644861
> 
> 赞同：0
> 
> 时间：2012-11-30T12:00:54.460
> 
> 标签：javascript, jquery, html, events, jquery-mobile

我正在使用 jquery 和 jquery mobile 来捕获更改事件。我正在使用这个 html 和 jquery 代码：

html:

```
<input type="range" name="someName" min="0" max="10"/> 
```

jQuery：

```
$('input[type="range"]').change(function(){
    alert('asdasd');
}); 
```

当我将输入属性更改为命名时，它工作正常。像这样：

```
$('input[name="range"]').change(function(){
        alert('asdasd');
}); 
```

我不知道为什么事件没有被缓存。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:28:20.050

不要使用更改事件，使用 slidestart 或 slidestop。

更多信息：http: [//jquerymobile.com/test/docs/forms/slider/events.html](http://jquerymobile.com/test/docs/forms/slider/events.html)

这是我几天前创建的一个示例：http: [//jsfiddle.net/Gajotres/PzTeX/](http://jsfiddle.net/Gajotres/PzTeX/)

```
$("input#europe, input#us, input#uk, input#japan").live("slidestop", function() {

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T03:48:23.450

'input[type="range"]'在 Chrome 上为 true`change`时不会触发`Emulate touch screen`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:06:41.963

在我看来很好。也许您在加载元素之前调用了 jquery。它是否包含在 document.ready 中？您使用的是非 html5 浏览器吗？

```
$(function(){
    $('input[type="range"]').change(function(){
        alert('asdasd');
    });
}); 
```

# c# - WP7 和 Linq-To-SQL：Query.toList() 后 SubmitChanges 从数据库中删除项目

> ID：13644863
> 
> 赞同：0
> 
> 时间：2012-11-30T12:01:06.037
> 
> 标签：c#, windows-phone-7, linq-to-sql

我想做最简单的事情——从数据库中获取数据。当我进行查询并稍后在 DataContext 对象上调用 SubmitChanges() 时，所有获取的项目都会从数据库中删除。这是代码：

```
SubmitChanges(); // nothing happened (it is OK)
List<Flashcard> list = (from f in FlashcardsTable
                        where f.Category.IsSelected
                              && !excluded.Contains(f.FlashcardId)
                        select f).ToList();
SubmitChanges(); // All items from list are deleting from DB!! 
```

FlashcardsTable 是 DB 中的一个表，excluded 只是一个整数列表。

我的问题是为什么在调用 SubmitChanges() 时会删除数据库中的数据以及如何修复它（我想将数据留在数据库中）。

* * *

我仍在寻找我的问题的答案...这是我的代码中的更多详细信息，也许有帮助？

我在我的应用程序中做了两件事。首先创建 100 个项目并将它们放入 DB：

```
var db = new DbContext();
var flashcard = new Flashcard();
// here sets some fields on flashcard, not important...
for (var i = 0; i < 100; i++)
{
    var cat = db.CategoriesTable.First(c => c.CategoryId == categoryId);
    cat.Count++;
    flashcard.Category = cat;
    flashcard.BasketNr = 1;
    flashcard.TimeToCheck = Utils.CurrentDate.AddHours(12);
    db.FlashcardsTable.InsertOnSubmit(new Flashcard(flashcard));
}
db.SubmitChanges(); 
```

接下来我对 DB 进行查询：

```
var db = new DbContext();
db.SubmitChanges(); // here is OK, no SQL was generated
var a = (from f in db.FlashcardsTable
         where f.Category.IsSelected
         select f).ToList();
db.SubmitChanges(); // here are generated 100 SQLs deleting my data 
```

调用第二个 db.SubmitChanges() 后会生成 100 个 SQL，例如：

```
DELETE FROM [Flashcard] WHERE [FlashcardId] = @p0

-- @p0: Input Int32 (Size = 4; Prec = 0; Scale = 0) [1]

-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: System.Data.Linq, Version=7.0.0.0, Culture=neutral, PublicKeyToken=24EEC0D8C86CDA1E 
```

也许表格的定义是错误的？这里是：

```
[Table]
public class Category : INotifyPropertyChanged {

    public event PropertyChangedEventHandler PropertyChanged;

    private string name;
    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int CategoryId { get; set; }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public string Name {
        get { return name; }
        set {
            if (name != value) {
                name = value;
                if (PropertyChanged != null) {
                    PropertyChanged(this, new PropertyChangedEventArgs("Name"));
                }
            }
        }
    }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public int Count { get; set; }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public bool IsSelected { get; set; }

}

[Table]
public class Flashcard {
    public const int TYPE_TEXT = 1;
    public const int TYPE_BITMAP = 2;

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int FlashcardId { get; set; }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public DateTime TimeToCheck { get; set; }

    [Column(CanBeNull = false, UpdateCheck = UpdateCheck.Never)]
    public int Type { get; set; }

    private byte[] firstPageBitmap;
    private byte[] secondPageBitmap;
    private string firstPageText;
    private string secondPageText;

    public Flashcard(Flashcard flashcard) {
        FirstPageBitmap = flashcard.FirstPageBitmap;
        SecondPageBitmap = flashcard.SecondPageBitmap;
        FirstPageType = flashcard.FirstPageType;
        SecondPageType = flashcard.SecondPageType;
        BasketNr = flashcard.BasketNr;
        Category = flashcard.Category;
        TimeToCheck = flashcard.TimeToCheck;
    }

    public Flashcard() {
    }

    [Column(DbType = "image", UpdateCheck = UpdateCheck.Never, CanBeNull = true)]
    public byte[] FirstPageBitmap {
        get { return firstPageBitmap; }
        set {
            FirstPageType = TYPE_BITMAP;
            firstPageBitmap = value;
        }
    }

    [Column(CanBeNull = true, UpdateCheck = UpdateCheck.Never)]
    public string FirstPageText {
        get { return firstPageText; }
        set {
            FirstPageType = TYPE_TEXT;
            firstPageText = value;
        }
    }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public int FirstPageType { get; set; }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public int SecondPageType { get; set; }

    [Column(DbType = "image", UpdateCheck = UpdateCheck.Never, CanBeNull = true)]
    public byte[] SecondPageBitmap {
        get { return secondPageBitmap; }
        set {
            SecondPageType = TYPE_BITMAP;
            secondPageBitmap = value;
        }
    }

    [Column(CanBeNull = true, UpdateCheck = UpdateCheck.Never)]
    public string SecondPageText {
        get { return secondPageText; }
        set {
            SecondPageType = TYPE_TEXT;
            secondPageText = value;
        }
    }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public int BasketNr { get; set; }

    [Column(UpdateCheck = UpdateCheck.Never)]
    public int CatId { get; set; }

    [Association(ThisKey = "CatId", OtherKey = "CategoryId", IsForeignKey = true, DeleteOnNull = true)]
    public Category Category { get; set; }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:04:52.987

确保你告诉 Linq 你想分别对表格做什么

```
FlashcardsTable.DeleteAllOnSubmit(list);
    SubmitChanges(); 
```

这是删除所有这些的简单方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:50:18.370

我 99.999999% 确信这是一个错误诊断的案例。

也许您的数据确实已从数据库中删除，但我相信这**不是因为这段代码。**向我们展示真实的代码（在这个例子中你没有数据上下文，所以它是某种简化..）

您可以分析生成的 sql 以检查其中是否有删除。如果是这样，我将非常乐意为您的问题添加赏金。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:29:04.227

I figured it out. After change declaration of association Flashcard->Category everything works fine. Right code is here:

```
private EntityRef<Category> _categoryRef = new EntityRef<Category>();
[Association(ThisKey = "CatId", OtherKey = "CategoryId", IsForeignKey = true, DeleteOnNull = true, Storage = "_categoryRef")]
public Category Category
{
    get { return _categoryRef.Entity; }
    set
    {
        if (_categoryRef.Entity != value || !_categoryRef.HasLoadedOrAssignedValue)
        {
            _categoryRef.Entity = value;
        }
    }
} 
```

# magento - Magento，添加到自定义集合

> ID：13644871
> 
> 赞同：0
> 
> 时间：2012-11-30T12:02:03.837
> 
> 标签：magento, magento-1.7

我正在尝试将一些项目添加到自定义创建的集合中。阅读[Alan Storm varien data collection](http://alanstorm.com/magento_collections)和这个[SO question](https://stackoverflow.com/questions/6911536/converting-an-array-to-a-collection-in-magento)我有几个不同的选择。

这是使用 Varien_Data_Collection 的一个选项：

```
 $myResultCollection = new Varien_Data_Collection();
    $mybanner = new Varien_Object();
    foreach($myBannersCollection as $banner){
        $mybanner = $banner;
        $search_text = explode(",", $banner->getsearch_text());
        foreach ($search_text as $txt){
            if (stripos($currentProdName,$txt) !== false) {
                $myResultCollection->addItem($mybanner);
            }
        }
    } 
```

此代码引发以下错误：

```
Item (Dts_Banners_Model_Bannersadmin) with the same id "10" already exist 
```

这是代码的另一个变体，使用我当前使用的模型中的自定义集合：

```
 $myResultCollection = Mage::getModel('banners/bannersadmin');
    foreach($myBannersCollection as $banner){
        $search_text = explode(",", $banner->getsearch_text());
        foreach ($search_text as $txt){
            if (stripos($currentProdName,$txt) !== false) {
                $myResultCollection->addItem($banner);
            }
        }
    } 
```

但是这个显示了以下错误（没有显示所有内容，太长了）：

```
Invalid method Dts_Banners_Model_Bannersadmin::addItem(Array
(
    [0] => Dts_Banners_Model_Bannersadmin Object
        (
            [_eventPrefix:protected] => core_abstract
            [_eventObject:protected] => object
            [_resourceName:protected] => banners/bannersadmin
            [_resource:protected] => 
            [_resourceCollectionName:protected] => banners/bannersadmin_collection
            [_cacheTag:protected] => 
            [_dataSaveAllowed:protected] => 1
            [_isObjectNew:protected] => 
            ....... 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:21:22.500

**问题 #1：**添加到`Varien_Data_Collection`实例中的项目需要在集合的上下文中具有不同的 ID。

**问题 #2：** `Dts_Banners_Model_Bannersadmin`不是`Varien_Data_Collection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:25:16.080

发现错误。在里面，`for..each`我试图多次添加相同的对象，并且由于 ID 被重复，错误是正确的。正确代码如下：

```
$myResultCollection = new Varien_Data_Collection();
$mybanner = new Varien_Object();
$found = false;
foreach($myBannersCollection as $banner){
    $mybanner = $banner;
    $search_text = explode(",", $banner->getsearch_text());
    foreach ($search_text as $txt){
        if (stripos($currentProdName,$txt) !== false) {
            $mybanner = $banner;
            $myResultCollection->addItem($mybanner);
            $found = true;
        }
        if ($found) break;
    }
} 
```

**编辑** @benmarks 你对我的第一个片段的回答是正确的，正如我在 asnwer 上评论的那样。但在第二个我不太确定。在 Magento 中，不是所有的集合都“继承”了基本的 Varien_Data_Collection？

# objective-c - iOS - 应用程序日志记录测试和生产代码

> ID：13644872
> 
> 赞同：1
> 
> 时间：2012-11-30T12:02:11.557
> 
> 标签：objective-c, ios, logging, flurry

当我测试我的应用程序时，我正在做一堆日志记录，这对于获取有关变量状态等信息很有用。

但是我已经读到您应该在生产代码中稀疏地使用日志记录（因为它可能会减慢您的应用程序的速度）。但是我现在的问题是：如果我的应用程序正在生产中并且人们正在使用它，那么每当发生崩溃（上帝保佑）时，如果我删除了日志记录语句，我将如何解释崩溃信息？那么我想我只会有一个堆栈跟踪供我解释？

这是否意味着我应该只在对我解释发生的事情非常重要的地方才可以登录生产代码？

此外，日志记录语句将如何与崩溃报告相关联？他们会合并吗？我正在考虑使用[Flurry](http://www.flurry.com)作为分析和崩溃报告......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:32:41.553

您绝对应该在已发布的应用程序中包含大量日志记录。正如您所怀疑的，它可以在调试时为您提供极大的帮助，如果您确保您的日志消息措辞恰当、不言自明并包含所有相关细节，它甚至可以帮助您的高级用户进行自我调试。

一个好的日志系统有很多方面。有一些常见的模式通常很好遵循（尽管在 iOS 上，有些模式比其他模式更适用）：

1.  按严重程度区分您的日志。例如，错误、警告、信息、调试。作为另一个示例，Syslog 会执行此操作。除了帮助您首先关注更严重的问题之外，您还可以为您的发布版本设置“信息量”的最低级别，例如，从而排除更冗长的调试问题，同时保留您需要的大部分内容出错。这样，您就可以删除可能非常冗长或频繁的日志消息（因此可能会降低您的应用程序的速度）但留下重要的日志消息。
2.  允许在运行时配置日志级别（通常通过命令行标志完成，但显然不在 iOS 上）。例如，您可以默认仅显示警告和错误，但可以选择通过标志扩展它们。
3.  在所有日志消息中包括文件名和行号，至少在调试版本中。您可能对在发布版本中包含文件名有所保留，但至少包含行号 - 这将有助于确保您在调试时查看正确的代码；您可能（意外或有意）在同一文件中的多个位置拥有相似的日志语句。
4.  用简单的英语编写日志消息，语法良好，缩写最少，并包括所有相关变量的值。在出现错误或警告的情况下，还包括有关条件后果的声明。例如“无法连接到某些服务器：1234 - 错误 -18 (ETIMEOUT)。无法确定是否有可用的应用程序更新。”。
5.  尽量减少日志中的用户敏感数据，并非常小心地处理包含它的任何日志。永远不要记录密码或类似性质的东西 - 甚至不要记录诸如长度或散列之类的辅助内容。请注意，即使他们提供的网站地址等看似无害的东西也可能被视为敏感内容（他们可能不希望人们知道他们经常访问 www.lumberjacksandpressedwildflowers.com）。如果您对这些日志进行任何类型的传输，这一点尤其重要——您需要采用 SSL 等。

您可以从预先构建的日志系统中获得很多这些功能，例如[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack/)和[NSLogger](https://github.com/fpillet/NSLogger)（或[两者兼有](https://github.com/steipete/NSLogger-CocoaLumberjack-connector)）。毫无疑问还有其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:28:34.970

据我所知，处理您的问题的最佳选择之一是[Crashalitics](http://try.crashlytics.com/)。它是一个完全集成、免费且易于使用的崩溃报告系统。祝你好运！

# .net - System.Net：除了 NetworkCredential 之外，还有其他从 ICredentials 继承的类吗？

> ID：13644873
> 
> 赞同：4
> 
> 时间：2012-11-30T12:02:15.643
> 
> 标签：.net, security

除了 NetworkCredential 之外，在标准 .Net 库中是否还有从 ICredentials 继承的任何其他类？可能，不仅在 System.Net 命名空间中。

看起来[有关 ICredentials 的 MSDN 站点页面](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.NET.ICREDENTIALS%29;k%28VS.OBJECTBROWSER%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)不包含此信息...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T12:14:45.143

我能找到的是：

*   [`CredentialCache`](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.aspx)
*   [`NetworkCredential`](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)
*   `SystemNetworkCredential`（这是内部的）

# css - 如何使文本完全像这样？

> ID：13644876
> 
> 赞同：0
> 
> 时间：2012-11-30T12:02:31.343
> 
> 标签：css

如何使文本完全像这样？ ![在此处输入图像描述](../Images/d865b55036f8adc3b3e14ab81394d256.png)

我试过这段代码

```
text-shadow: 0.3px 0.3px 1px #eef2f3, 0 0 0 #000, 0.3px 0.3px 1px #eef2f3;  z-index:400; 
```

并且 ![在此处输入图像描述](../Images/73ce9ab5fdece4e33386f439bb71f61a.png) 无论我如何更改值，我都无法使其完全相同，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:33:24.153

因为文本有内阴影，所以它指向图形套件（Photoshop、Gimp、Corel 等），除非有新的 flash 或 js 库可以为文本添加内阴影或渐变。

使用图形套件，以下是制作如下文本的步骤：

*   打开 Adob​​e Photoshop
*   使用混合字体、颜色和样式创建所需的图形 - 您也可以花时间创建悬停/选定样式
*   导出为没有背景的 PNG-24（如果您希望能够在各种背景上使用它。如果没有，请确保您的 bkgnd 颜色与将要放置的位置匹配）
*   添加到您的网页
*   拍拍自己的后背做一些很棒的事情。

# flash - 在 Adob e Flash Pro 中编辑形状上的链接

> ID：13644877
> 
> 赞同：0
> 
> 时间：2012-11-30T12:02:37.987
> 
> 标签：flash

我在 Flash 中有形状，并为其分配了错误的链接。有人知道如何在 .fla 文件中编辑此链接吗？我花了一个多小时搜索这个属性，但没有结果。

10x 为您提供帮助。

# jquery - 来自rails jquery ajax的406错误

> ID：13644880
> 
> 赞同：1
> 
> 时间：2012-11-30T12:02:52.590
> 
> 标签：jquery, ruby-on-rails, ajax

我在我的开发环境中工作。我想要的行为：我在模态对话框上有一个表单。用户单击提交并将数据发送到我的“问题”控制器。发送了一些电子邮件，然后刷新对话框的内容以显示“消息发送成功”。很基本。问题是我无法正确设置标题，因此 rails 将数据处理为 html，而不是 javascript。电子邮件出去了，但 rails 返回 406 错误。这是我的代码：

**_social.html.erb**

```
 <div class='jqmWindow notices' id="emailModal">
      <h3>Email a link to this poll</h3>
      <p>You are emailing a link to the following poll:<br><strong><%=@question.text%></strong></p>
      <%= form_tag(:controller=>'questions', :action=>'email' , :method => "post",  :id=>"emailForm") do %>
              <%= label_tag(:emails_label, "Enter up to 20 email addresses separated by commas:" )%>
          <%= text_area_tag(:emails, "",:size => "60x6")%>
          <%= hidden_field_tag(:question_id, @question.id )%>
              <%= label_tag(:email_msg_label, "Enter a brief message to accompany your link:" )%>
          <%= text_area_tag(:email_msg, "",:size => "60x4")%><br>

          <%= submit_tag ( "Submit")%>
        <%end%>
    </div>

...

<script>

$(document).ready(function(){
  $('#shareModal').jqm();
  $('#emailModal').jqm();
  $.ajaxSetup({
    'beforeSend': function(xhr) {
        xhr.setRequestHeader("Accept", "text/javascript")
    }
  });

  $(document).ajaxSend(function(e, xhr, options) {
    var token = $("meta[name='csrf-token']").attr("content");
    xhr.setRequestHeader("X-CSRF-Token", token);
  });

...

  $('#emailForm').submit(function(){
    $.post($(this).attr('action'), $(this).serialize(), null, "script");
    return false;
  });
});

</script> 
```

**questions_controller.rb**

```
 def email
    question = Question.find(params[:question_id])
    emails = params[:emails].split(/, /)
    emails.each do |recipient|
      GenericMailer.share(question, current_user.email, recipient, params[:email_msg]).deliver
    end
    respond_to do |format|
      format.js
    end

  end 
```

**email.js.erb（现在，这段代码永远不会被执行！）**

```
alert("hello!");
$(#emailModal).html("Email sent successfully!"); 
```

**这是标题：**

```
 Request URL:http://127.0.0.1:3000/questions/emailForm/email?method=post
    Request Method:POST
    Status Code:406 Not Acceptable
    Request Headersview source
    Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
    Accept-Encoding:gzip,deflate,sdch
    Accept-Language:en-US,en;q=0.8
    Cache-Control:max-age=0
    Connection:keep-alive
    Content-Length:172
    Content-Type:application/x-www-form-urlencoded
__utma=96992031.1133215771.1353171766.1354190632.1354240040.26; __utmb=96992031.69.10.1354240040; __utmc=96992031; __utmz=96992031.1353379538.10.2.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=http://127.0.0.1:3000/questions/5
    Host:127.0.0.1:3000
    Origin:http://127.0.0.1:3000
    Referer:http://127.0.0.1:3000/questions/1
    User-Agent:Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11 
```

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:44:58.387

感谢所有回复的人。事实证明，ajax 代码甚至从未被执行过。这是一个轨道问题。这是罪魁祸首：

```
<%= form_tag(:controller=>'questions', :action=>'email' , :method => "post",  :id=>"emailForm") do %> 
```

id 被附加到请求中，而不是作为 css id 添加到表单标记中。因此 jQuery 选择器没有捕获表单提交。正确的代码：

```
<%= form_tag({:controller=>'questions', :action=>'email' }, {:id=>"emailForm"}) do %> 
```

干杯....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:32:58.173

看来您的 ajaxSetup 可能不正确，JS 的官方 MIME 类型是`application/javascript`

在标题中，您可以看到`Accept:`字符串中没有 JS 的任何内容。首先尝试调用`.js`附加的 URL 以排除您的 Rails 控制器。

然后在浏览器检查器中确保`application/javascript`在接受列表中排在第一位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:47:17.047

您是否调试了 email.js.erb 中的 javascript/jquery 代码？406 错误通常表示您的 js 代码中的拼写错误（这对于错误代码的含义并不明显）。

至少，在您的示例中，第二行有错字，缺少单引号：

```
 $('#emailModal').html("Email sent successfully!"); 
```

# mysql - MYSQL 在子查询中引用外部字段 --- SUM 与其他列不同

> ID：13644887
> 
> 赞同：3
> 
> 时间：2012-11-30T12:03:12.323
> 
> 标签：mysql, select

我无法解决这个问题......希望有人能帮助我......我得到了这个查询：

```
 SELECT V.ID, ....,

  (SELECT SUM(D.value)
   FROM E 
   LEFT JOIN I   ON E.ID = I.f1 
   LEFT JOIN D   ON I.f2 = D.ID
   WHERE E.ID_ven = V.ID) inc          

   FROM ven V
   WHERE V.ID=.... 
```

问题是：我必须 SUM(D.values) 但只能在 DISTINCT D.ID 值上。我试图用子查询：

```
 SELECT V.ID,...., 

  (SELECT SUM(D.value)    FROM (
      SELECT DISTINCT D.ID, D.value
      FROM E 
      LEFT JOIN I    ON E.ID = I.f1 
      LEFT JOIN D   ON I.f2 = D.ID
      WHERE E.ID_ven = V.ID) A1   ) inc        
  FROM ven V    WHERE V.ID=.... 
```

但是mysql给了我：错误代码：1054 Unknown column 'V.ID' in 'where Clause'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:33:02.233

`SELECT`您可以使用`GROUP BY`来完成“每个 id 的值的总和”，而不是使用两个双嵌套语句。

试试这样的查询：

```
SELECT V.ID,...., 
    (
        SELECT
            D.ID, SUM(D.value)
        FROM E 
            LEFT JOIN I ON E.ID = I.f1 
            LEFT JOIN D ON I.f2 = D.ID
        WHERE
            E.ID_ven = V.ID
        GROUP BY
            D.ID
    ) inc        
FROM ven V
WHERE V.ID=.... 
```

通过删除第二个嵌套查询，您应该能够`V.ID`在子查询中访问`ven`，当然它是表中的实际列。

# networking - IPNAT.SYS 重启后运行，停止连接到服务器

> ID：13644900
> 
> 赞同：3
> 
> 时间：2012-11-30T12:04:09.977
> 
> 标签：networking, reboot, windows-firewall, windows-2003-webserver

今天早上进来发现我们的服务器已重新启动并且网站已关闭。服务器在线并且能够通过 Logmein 进行连接。（Windows server 2003 R2 标准版 SP2）

实际症状是服务器似乎不接受任何传入的网络流量。例如。网站、FTP、SQL、来自同一网络内的 ping（外部 ping 被防火墙阻止）通过网络浏览等都没有响应。

经过调查，我们发现 IPNAT.sys 正在运行，并且命令 NET STOP IPNAT 解决了问题，一切都恢复了。

服务配置如下： Windows 防火墙/ICS（未运行）（自动）路由和远程访问（未运行）（禁用）

Windows 组件下未安装安全配置向导。

当您尝试启动 Windows 防火墙时，您会收到一条消息，指出它无法启动，因为 IPNAT.sys 已经在运行。

重新启动服务器后，同样的问题又回来了，可以如上解决。

我并不希望 WF / ICS 运行，因此可以禁用此功能，但是无法启动的事实似乎更像是症状而不是原因。（除非它在启动过程中部分启动和失败，但我可以在事件日志中看到任何内容）

问题是什么可以启动 IPNAT.sys 并且可以禁用它。

任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T10:49:49.260

我们遇到了类似的问题，NET STOP IPNAT 工作，但在我们重新启动后它会再次发生。为了阻止这种情况，我们运行了以下命令：

```
sc config ipnat start= disabled 
```

不再有 IPNAT 冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T01:56:16.300

单击我的电脑 -> 管理 -> 服务和应用程序 -> 路由和远程访问，您会发现它旁边有一个红色框，右键单击并单击禁用。

[![在此处输入图像描述](../Images/79cbcf05ea7e8e866fd021ad882dd34c.png)](https://i.stack.imgur.com/ELlCL.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T02:54:54.640

对于 Windows Server 2003 R2 版本，我今天在这里遇到了同样的问题。服务器被“Child Pornographic”病毒感染，它锁定了所有数据文件并删除了原始文件，并以某种方式禁用了防火墙。

清除所有病毒后.. 我尝试了其他来源的所有建议解决方案，例如禁用 RRAS 服务以及更改注册表项，但均无济于事。

毕竟，在启用“Windows Management Instrumentation (WMI)”服务后，我发现“Windows 防火墙/Internet 连接共享 (ICS)”服务正常工作。

对不起，我的语法很差，希望这能消除一些和我一样痛苦的人。=)

# wix - 为什么 Icon 元素需要 Id 属性以“.exe”或“.ico”结尾

> ID：13644904
> 
> 赞同：7
> 
> 时间：2012-11-30T12:04:28.040
> 
> 标签：wix, icons, windows-installer

**为什么快捷方式元素的图标应该具有以“.ico”或“.exe”结尾的 Id 属性？**

所以这段代码

```
<Icon Id="ProgramIcon" SourceFile="Images\MyAppIcon.ico"/>

<Component Guid="MY_GUID" Id="MyAppComponent">
    <File Source="MyApp.exe" Name="MyApp.exe" Id="MyApp.exe">
        <Shortcut Id="MyApp.Shortcut" Directory="ApplicationProgramMenuDir" WorkingDirectory="INSTALLDIR" Name="MyApp" Icon="ProgramIcon" Advertise="yes" />
    </File>
</Component> 
```

产生编译错误：

```
error LGHT0204: ICE50: The extension of Icon 'ProgramIcon' for Shortcut 'MyApp.Shortcut' does not match the extension of the Key File for component 'MyAppComponent'. [D:\APPS\MyProject.wixproj] 
```

但是这段代码

```
<Icon Id="ProgramIcon.ico" SourceFile="Images\MyAppIcon.ico"/>

<Component Guid="MY_GUID" Id="MyAppComponent">
    <File Source="MyApp.exe" Name="MyApp.exe" Id="MyApp.exe">
        <Shortcut Id="MyApp.Shortcut" Directory="ApplicationProgramMenuDir" WorkingDirectory="INSTALLDIR" Name="MyApp" Icon="ProgramIcon.ico" Advertise="yes" />
    </File>
</Component> 
```

编译得很好。

这是我第一次看到任何元素的 Id 属性的这种限制，它看起来很奇怪。我认为这甚至是警告都没有任何理由。所以我不了解此功能的一些基础知识。请帮助我了解所描述行为的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:19:30.263

看起来是因为这个： http: [//msdn.microsoft.com/en-us/library/aa369210.aspx](http://msdn.microsoft.com/en-us/library/aa369210.aspx)（见备注部分）。

我猜它验证失败，因为`Icon="ProgramIcon"`与快捷方式的扩展名不匹配。

[http://wix.sourceforge.net/manual-wix2/wix_xsd_shortcut.htm](http://wix.sourceforge.net/manual-wix2/wix_xsd_shortcut.htm)说

> 对 Icon 元素的标识符引用。Icon 标识符应该与它指向的文件具有相同的扩展名。例如，可执行文件（例如“my.exe”）的快捷方式应该引用带有“MyIcon.exe”等标识符的图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T12:27:39.693

我想我也许可以对此有所了解。

这可能与 id 最终成为包含图标的文件的名称有关。它会冒险猜测它使用文件扩展名来确定要使用的解析器。

**我是怎么偶然发现的？**

看似无关，我正在调查 Windows 事件日志中充满源自我们应用程序的 SxS 错误的问题。但是路径全错了：

`C:\Windows\Installer\{Guid}\ProductIcon.exe`

顺便说一下，`ProductIcon.exe`这是我们使用的图标 id。

经过仔细检查，我发现这个文件是我们产品可执行文件的副本。我们得到 SxS 错误的原因是它只复制可执行文件而没有引用的 dll-s。

# php - 如何列出自关系表？

> ID：13644908
> 
> 赞同：0
> 
> 时间：2012-11-30T12:04:35.763
> 
> 标签：php, mysql, sql

我有一张这样的桌子：

```
+----+-------+--------+
| id | title | parent |
+----+-------+--------+
| 1  | text1 |  NULL  |
+----+-------+--------+
| 2  | text2 |  NULL  |
+----+-------+--------+
| 3  | text3 |  NULL  |
+----+-------+--------+
| 4  | text4 |   1    |
+----+-------+--------+
| 5  | text5 |   1    |
+----+-------+--------+
| 6  | text6 |   2    |
+----+-------+--------+
| 7  | text7 |   3    |
+----+-------+--------+
| 8  | text8 |   5    |
+----+-------+--------+ 
```

“父”是“id”的外键，我想在 html 中列出这些行。

列表应该是这样的：

```
• text1
    ○ text4
    ○ text5
        ♦ text8
• text2
    ○ text6
• text3
    ○ text7 
```

我需要 sql_code 和 php。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:17:23.607

您应该考虑[使用 MySQL 管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)：

```
SELECT 
     t1.title AS lev1, t2.title as lev2, t3.title as lev3, t4.title as lev4
FROM 
     category AS t1
LEFT JOIN 
     category AS t2 ON t2.parent = t1.id
LEFT JOIN 
     category AS t3 ON t3.parent = t2.id
LEFT JOIN 
     category AS t4 ON t4.parent = t3.id 
```

请注意，本文推荐了一种不同于常见 parent_id/id 设置的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:26:24.320

上面的 MySQL 代码非常好.. 这是我对 PHP 代码的一点努力

```
while($lev = mysql_fetch_array($category)){

    echo $lev['lev1'];
    echo '<br>';
    if($lev['lev2'] != NULL)
    {
        &nbsp;echo $lev['lev2'];
        echo '<br>';
        if($lev['lev3'] != NULL)
        {
            &nbsp;&nbsp;echo $lev['lev3'];
            echo '<br>';
            if($lev['lev4'] != NULL)
            {
                echo $lev['lev4'];  
            }   
        }   
    }
} 
```

# perl - 如何将多个 perl 程序转换为可以安装的软件？

> ID：13644911
> 
> 赞同：0
> 
> 时间：2012-11-30T12:04:47.527
> 
> 标签：perl, fasta

我自己编写了多个 perl 程序，它们计算基因组参数、更改标题、从基因组数据或 fasta 序列中提取特定序列。有什么方法可以构建一个包/软件，它可以通过单击菜单中的按钮并使用我的 perl 程序来计算上述内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:56:16.083

[PAR::Packer](https://metacpan.org/module/pp)是一个实用程序，它将整个 Perl 项目捆绑到一个可分发的可执行文件中，而没有外部依赖项。它这样做将 Perl 解释器本身和使用的模块（带有 XS 二进制文件）打包到一个文件中。当用户执行这样的文件时，所有内容都被解压到一个临时位置，执行并在完成时清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:38:55.610

我不会触及其中的 GUI 部分，因为我认为您不会就此提出问题。感觉就像你在问一个关于分布的问题。请澄清我是否错了。

在我看来，您应该将您的程序分发为一个充满脚本的压缩目录，如下所示：

```
geneprogram/
    geneprogram.pl
        resources/
            script1.pl
            script2.pl
            script3.pl
        output/
            script1.pl/
            script2.pl/
            script3.pl/ 
```

等等。让geneprogram.pl 成为您的主要GUI 应用程序。它可以根据需要在单独的进程中调用您的脚本并检查它们的输出，这些输出应该在某个可以理解的位置，例如我展示的 output/ 目录。

[如果您的脚本具有 CPAN 依赖项，我会尝试使用App::FatPacker](http://metacpan.org/pod/App%3a%3aFatPacker)将它们“胖包”到脚本中。大多数生物学家要么根本不使用 Perl（所以不知道如何解决他们自己的依赖关系），或者更糟糕的是，使用 Perl，并且*不想*修改他们的安装以使用您的代码。如果您的依赖项使用 C - aka Perl XS，这将不起作用。对于这些库，您必须为各种架构独立构建 XS 文件，并发布软件的不同架构相关版本。

最后，您需要考虑您的受众是否已经在他们的系统上安装了合适的 Perl 版本。如果没有，您应该提供一个“独立”版本的发行版，其中包含完全可执行的 perl。

# java - 表单验证无法正常工作

> ID：13644915
> 
> 赞同：0
> 
> 时间：2012-11-30T12:04:55.177
> 
> 标签：java, javascript, html, validation

我正在尝试制作验证表格。我无法让我的验证表单正常工作电话功能无法正常工作，即使用户按下提交，我也不确定它是否只是提交，有人可以帮助我吗？

html:

```
<form onsubmit="return validate();" name="formValidation">
    <label>First Name:</label>
    <input type="text" name="firstName" /><br /><br />
    <label>Last Name:</label>
    <input type="text" name="lastName" /><br /><br />
    <label>E_mail:</label>
    <input type="text" name="Email" onchange="validateEmail(this.value)"/><br /><br />
    <label>Confirm E_mail:</label>
    <input type="text" name="confirmEmail" onchange="validateEmail(this.value)"/><br /><br />
    <label>Address:</label>
    <input type="text" name="Address" /><br /><br />
    <label>Telephone nr:</label>
    <input type="text" name="fld" /><br /><br />
    <br />
    <p>submit your form: </p><input type="submit" value="Submit" />
</form> 
```

js：

```
function validate(){
    if(document.formValidation.firstName.value == "" ||
    document.formValidation.lastName.value == "" ||
    document.formValidation.Email.value == "" ||
    document.formValidation.confirmEmail.value == "" ||
    document.formValidation.Address.value == "" ||
    document.formValidation.fld.value == "")
    {
        alert("Please fill all the boxes before submitting!");
        return false;
    } else if (telPhone(document.formValidation.fld.value)!=""){
        alert(error)
        return false
    }else {

        alert('Your form has been submitted!');
    }

}
function validateEmail(Email)   
{  
 if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(Email))  
  {  
    return true;  
  }  
    alert("You have entered an invalid email address!")  
    return (false) 
}

function telPhone(fld) {
    var error = "";
   if (fld == "") {
        error = "You didn't enter a phone number.";
    } else if (isNaN(fld)) {
        error = "The phone number contains illegal characters.";
    } else if (fld.length != 10) {
        error = "The phone number is the wrong length. Make sure you included an area code."
    }

    return error;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:21:10.640

```
<form onsubmit="return validate();" name="formValidation"  action="fileto redirect here" method="post"> 
```

# c# - 自动倒数计时器调整数据库记录

> ID：13644917
> 
> 赞同：7
> 
> 时间：2012-11-30T12:05:01.823
> 
> 标签：c#, database, asp.net-mvc-3, countdowntimer, visual-web-developer-2010

我有一个小型 MVC 网站，供朋友美发沙龙使用。在此页面上，我有一个 div 用于显示它从数据库记录中获取的数字。这个数字是当前排队等候理发的人数。

我目前拥有的是能够登录到“管理”页面并使用表格更新此号码，从“2”到“5”，然后根据有多少人坐在里面将“5”更改为“6”这个队列。

这是目前的手动操作。代码如下：

==============================

# 控制器

```
[HttpPost]
        public ActionResult Update(Data data)
        {
            if (ModelState.IsValid)
            {
                data.ID = 1; //EF need to know which row to update in the database. 
                db.Entry(data).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index", "Home");
            }

            return View(data);
        } 
```

=====================================

# 型号代码

```
{
    public class Data
    {
        public int ID { get; set; }
        public string Queue_Number { get; set; }
    }

    public class DataDBContext : DbContext
    {
        public DbSet<Data>Queue { get; set; }
    }
} 
```

我真正希望发生的是，一旦您从“管理”页面上的表单中手动更新队列编号，我希望自动倒计时 20 分钟（理发所需的粗略时间），然后队列编号自动向下调整 1 直到它变为“0”。

例如，我们有 5 人在排队，20 分钟后它自动调整为 4 人，网页将自动更新/刷新，然后又有 2 人走进，所以我们手动将其调整为 6 人排队，计时器开始再次，每 20 分钟通过队列调整 -1 直到它下降到“0”。一旦它达到“0”，它就会一直停留在那里，直到我们手动将更多人添加到队列中。

恐怕我什至不知道如何从这样的请求开始，或者即使有可能？

我非常感谢这里的专家提供的任何帮助，这些帮助可能能够为我“步步为营”。任何我没有提供的信息我都会努力补充——我意识到我不是最擅长解释自己的:-(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T12:16:32.070

你考虑过阿贾克斯吗？您是否在手动设置标志时存储上次更新时间？您可以使用 Ajax 请求同时运行使用 jquery 设置间隔。这将每 2 分钟触发一次 ajax 请求。查找上次更新的时间，如果超过 20 分钟，然后从数据库中删除一个，您的返回将是新号码，jquery 可以为您更新该号码。

实际上是一个非常简单的过程，但需要有关基础数据的更多详细信息。

这是我如何从您的问题中看到它的工作方式

**在控制器中**

```
public ActionResult ajaxUpdate()
        {
            //open connection
            dbcontext db = new dbcontext();
            db.Connection.Open();

            // get the last updated record in the database.
            var entry = db.Entry.OrderByDecending(m=> m.LastUpdatedDate).FirstOrDefault();

            //clean up
            db.Connection.Close();
            db.Dispose();

            //return -1 as error
            if(entry == null){

                return Json(-1,JsonRequestBehavior.AllowGet);

            }

            // get current number of people in queue
            Int32 numberOfPeople = entry.QueueNumber;

            TimeSpan span = DateTime.Now.Subtract(entry.LastUpdatedDate);

            if(span.Minutes >= 20){

                // if 20 mins have passed assume a person has been completed since manual update
                numberOfPeople--;

            }

            //this returns a number, alternatively you can return a Partial
            return Json(numberOfPeople, JsonRequestBehavior.AllowGet);
        } 
```

jQuery 和 Ajax

```
$(document).ready(function () {

    // run function every x minutes
    setInterval(function () {
        UpdateQueue();
    }, 100000);

});
    function UpdateQueue() {

    $.ajax({
        cache: true,
        type: 'POST',
        url: "/ControllerName/ajaxUpdate",
        async: false,
        dataType: "json",
        success: function (result) {
            // on success result will be the number returned

            // -1 is error
            if (result == -1) {
                return;

            }

            // check the -- didn't return a negative
            if (result < 0) {

                result = 0;

            }

            //find your element in the HTML to update
            $('#NumberElement').text().replaceWith(result);

        }

    });

} 
```

您必须确保在包含此代码之前包含您的 jquery 库，否则您将没有定义 Jquery。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T23:55:14.730

我已经用一点线程为您弥补了服务器端解决方案。希望我在关键部分锁上是正确的。

它的优点是您的应用程序管理员不必挂在页面上以减少当前客户的数量（就像他应该使用 ajax 请求一样）。

**这个怎么运作**

在“客户数量”更新时，它正在启动（如有必要）新的倒计时线程，该线程等待（休眠）预定义的时间间隔，然后减少数量。

```
public class CustomerAdminService
{
    // time in milliseconds it will take to decrease number of waiting customers 
    const int sleepTime = 10000;
    // current number of customers (just for simplicity - you can have it in db or somewhere else)
    static int numberOfCustomers;

    static Thread updaterThread;

    // object lock
    static readonly object locker = new Object();

    public int GetNumberOfCustomers()
    {
        return numberOfCustomers;
    }

    public void UpdateCustomers(int value)
    {
        lock (locker)
        {
            if (updaterThread == null)
            {
                //start new downcounting thread
                updaterThread = new Thread(new ThreadStart(UpdateWorker));
                updaterThread.Start();
            }
            SetNumberOfWaitingCustomers(value);
        }
    }

    private void SetNumberOfWaitingCustomers(int value)
    {
        numberOfCustomers = value;
    }

    // downcounting thread method
    private void UpdateWorker()
    {      
        while (true)
        {
            // sleep for predefined time
            Thread.Sleep(sleepTime);
            lock (locker)
            {              
                var number = GetNumberOfCustomers();             
                if (number <= 1)
                {
                    // if number of currents customers is now zero - end the downcounting thread
                    SetNumberOfWaitingCustomers(0);
                    updaterThread = null;
                    return;
                }
                SetNumberOfWaitingCustomers(number - 1);
            }
        }
    }
} 
```

*评论*：您可以考虑将 jQuery 用于一些计时器倒计时脚本。显示类似：*您可以在 40 分钟内送达 ;-)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T08:27:58.287

是的，Ajax 是关键。您的网站可以使用它与您的服务器进行不明显的通信。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T08:59:54.433

另一种方法是不更新数据库中的计数，而是简单地使用查询来确定特定时间段内的客户数量。您可以通过修改模型来代替`QueueNumber`它使用到达时间并更改控制器以插入新的数据记录来做到这一点。

```
{
    public class Data
    {
        public int ID { get; set; }
        public DateTime Arrival_Time { get; set; }
    }

    public class DataDBContext : DbContext
    {
        public DbSet<Data> Queue { get; set; }
    } 
} 
```

这样，正如其他人建议的那样，您可以使用 AJAX 来轮询队列中的人数，控制器操作可能如下所示：

```
[HttpGet]
public ActionResult NumberOfPeopleInQueue()
{
    var result = db.NumberOfCustomersSince(DateTime.Now.AddMinutes(-20));
    return Json(result);
} 
```

这种方法的好处是，如果理发开始需要更长的时间（比如 30 分钟），您可以简单地更改查询并且应用程序继续工作。

# jquery - 更改特定 id 的 jquery 自动完成下拉菜单的宽度

> ID：13644918
> 
> 赞同：0
> 
> 时间：2012-11-30T12:05:09.693
> 
> 标签：jquery, autocomplete, dropdownbox

嗨，我在我的页面中使用 Jquery 自动完成下拉菜单。但是有很多下拉菜单。我想更改特定 ID 的宽度。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:39:15.273

我发现我的自动完成下拉菜单的大小适合内容。

我在项目渲染函数上使用覆盖来为每个结果项目添加格式化 html，并通过调整项目渲染函数（我已经覆盖）中的项目大小，调整下拉菜单以适应。

我使用一个变量来存储所需的宽度，因为我需要它根据父 div 的大小动态地存储，因为我正在使用可调整大小的“portlet”。我在 ajax 成功回调中计算所需的宽度，然后在渲染函数中，我使用外部项目容器上的样式属性设置宽度（现在每个项目一个表，因为它对我来说比我尝试的所有替代方案都更好！ ) :

```
$("#tbCustomerSearch").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "CustomerData.asmx/GetAutoComplete",
            data: "{ 'prefixText': '" + request.term + " }",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataFilter: function (data) { return data; },
            success: function (data) {
                var width = $('#customerSearch').width() - 50;
                searchResultTableWidth = width;
                response($.map(data.d.Matches, function (item) {
                    return { clicked: item, value: data.d.CleanedText }
                }))
            }
        });
    },
    minLength: 3,
    select: function (e, ui) {
        CustomerSearchSelect(ui.item.clicked);
    }
}); 
```

我用来覆盖默认项目渲染的函数：

```
function PatchAutocomplete() {

$.ui.autocomplete.prototype._renderItem = function (ul, item) {
    var re = new RegExp(this.term, 'i');

        var t = "<table class='searchResults' style='width: " + searchResultTableWidth + "px'><tr><td>" +
                            item.clicked.CustomerName.replace(re, function (matchText) { return "<span class='matchedText'>" + matchText + "</span>" }) +
                        "</td><td class='alternateCell'>" +
                        ((item.clicked.MatchedName != "") ?
                                    ("<span class='alternate'>Alternate: <span class='alternateName'>" +
                                        item.clicked.MatchedName.replace(re, function (matchText) { return "<span class='matchedText'>" + matchText + "</span>" })
                                    + "</span></span>")
                                 : "") +
                                 "</td></tr></table>\n";
        return $("<li></li>")
          .data("item.autocomplete", item)
          .append("<a>" + t + "</a>")
          .appendTo(ul);

}; 
```

}

但是，如果你只需要一个静态大小，试试这个 css：

```
ul.ui-autocomplete.ui-menu { width: 400px; } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T14:00:14.270

在 CSS 中试试这个

```
#<idHere> + .ui-menu {
     width:<widthHere>;
} 
```

CSS 中的 + 用于相邻的兄弟姐妹，因此您应该能够将特定 div 或输入 ID 中的菜单下拉菜单与之匹配。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-30T14:00:01.133

`$('#foo')`将为您提供一个 JQuery 对象，其中包含带有`id="foo"`. 那应该让你开始。它在 JQuery 中被称为选择器。如果您要在 JQuery 中做很多工作，那么您应该花一些时间在[http://api.jquery.com/](http://api.jquery.com/)上学习选择器之类的东西，因为它们是有效使用该语言的核心.

# java - Java时间错误转换数据

> ID：13644921
> 
> 赞同：0
> 
> 时间：2012-11-30T12:05:20.747
> 
> 标签：java

我将此数据 **19/12/2005 17:30:45 转换为 mileseconds 时遇到**了一点问题。我不知道为什么，我翻译错误为**Jun 28 17:30:45 CEST 1995 Time :804353445798**

我使用的代码是这样的：

```
private static long ConvertTimeToTimeStamp(String time) {   

  Integer[] data = new Integer[6];
  String [] tokens = time.split(" "); 

  System.out.println(tokens[0]);
  System.out.println(tokens[1]);

  String[] d_m_y = tokens[0].split("/"); 
  String[] hh_mm_ss = tokens[1].split(":"); 

  for (int i = 0; i < d_m_y.length; i++) {
    data[i]=Integer.parseInt(d_m_y[i]); 
    // System.out.println(d_m_y[i]);        
  }

  for (int i = 0; i < hh_mm_ss.length; i++) {
    data[i+3]=Integer.parseInt(hh_mm_ss[i]); 
    //  System.out.println(hh_mm_ss[i]);    
  }
  //Calendar calendar =  Calendar.getInstance(); 
  GregorianCalendar calendar = new GregorianCalendar(); 
  calendar.set(data[0]+1970, data[1], data[2], data[3],data[4],data[5]);

  System.out.println(calendar.getTime().toString()); 
  return calendar.getTimeInMillis(); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:09:25.223

您不应手动解析日期 - 请改用[日期格式](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

```
String s = "19/12/2005 17:30:45";
Date d = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").parse(s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:08:43.593

从一开始就将此对象视为日期。这样会可靠*得多。*

使用[SimpleDateFormat.parse()](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)将您的字符串解析为日期/时间。否则，您将被简化为字符串解析/拆分/重组等，没有边界检查、类型检查等。您的解决方案是*字符串*类型的，而不是*强*类型的。

我参考了标准的 Java 库，但[Joda-Time](http://joda-time.sourceforge.net/)是在 Java 中进行日期工作的更好选择，我建议采用它以获得更直观和更安全的 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T12:09:47.920

忘掉它。使用`SimpleDataFormat`带有模式的对象`dd/MM/yyyy HH:mm:ss`将`parse()`字符串转换成日期对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T12:12:34.147

尝试...

```
private static long ConvertTimeToTimeStamp(String time) { 
   //19/12/2005 17:30:45
   SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");
   java.util.Date d = sdf.parse(time);
   return d.getTime();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T12:09:00.633

您正在混合年、月和日的顺序。该`set`方法期望它们按以下顺序排列：年、月、日，并且您将它们提供为`day + 1970`, `month`, `year`。[话虽如此，您实际上可能对像joda-time](http://joda-time.sourceforge.net/)这样的库更满意。

# ruby-on-rails - 对于这样的项目，是否有现成的 Rails 解决方案？

> ID：13644922
> 
> 赞同：-1
> 
> 时间：2012-11-30T12:05:28.680
> 
> 标签：ruby-on-rails

我需要做一个以下项目：

用户进入索引页面
登录到他的帐户
在他登录后 - 他可以看到他拥有的项目（记录）列表。
他可以编辑/预览/删除/创建项目
他的每个项目都有:title、:features、:price 字段和附加的多张图片，因此当他在编辑表单时 - 他可以添加/删除图片、更改值等
。如果他可以在提交表单之前预览更改，那也很好。

我开始在 Rails 中构建它，但后来我遇到了一个 Active Admin gem，它在轻松生成非常复杂的页面方面做得很好。所以我有了一个想法——也许有人已经发布了一个完善的项目或一个可以满足我需要的 gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:58:14.850

Checkout Spree 可能就是你要找的东西 [https://github.com/spree/spree](https://github.com/spree/spree)

为此还有一个导轨，请检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:18:12.557

我不确定是否有满足您要求的宝石。不过，我可以为你推荐一些东西。

对于项目列表和字段，请执行以下操作：

> rails g 脚手架用户标题：字符串功能：文本价格：十进制图像：字符串

对于身份验证，我建议您通过“设备”gem。

预览有点高级，需要通过 jQuery 来完成。

如果您想制作漂亮的用户项目页面，请使用 gem 'twitter-bootstrap'。浏览视频[http://railscasts.com/episodes/328-twitter-bootstrap-basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:08:14.983

I think this is easy job to create it from scratch. Use Active Admin like you mentioned and for gallery [paperclip gem](https://github.com/thoughtbot/paperclip). It's very easy to implement it. And like Arun Kumar wrote use rails generator to make your model, controller and view of items. Look at [rails scaffolding](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding).

# xcode - 有没有办法在界面生成器中更改视图控制器的类？

> ID：13644923
> 
> 赞同：1
> 
> 时间：2012-11-30T12:05:29.967
> 
> 标签：xcode, interface-builder

我在界面生成器中创建了 UIPageViewController。现在，我想将其类更改为 UIViewController 但似乎除了删除当前控制器并创建新控制器并重新添加所有转场之外我无法做到这一点。

自定义类属性仅显示 UIPageViewController 类，如果我将其设置为 UIViewController 它只会恢复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:25:14.217

事实证明，您可以编辑故事板 xml 文件，只需将 pageViewController 标记更改为 viewController 标记即可。

# jquery - IE10 中的 ARIA 属性

> ID：13644925
> 
> 赞同：7
> 
> 时间：2012-11-30T12:05:49.127
> 
> 标签：jquery, internet-explorer, internet-explorer-10, wai-aria

我正在尝试`aria-autocomplete`使用 jQuery 在元素上设置属性。但是，当**IE10**在**IE5 Quirks 模式**或**IE7 标准模式下运行**时，它会产生`Member not found`错误。

```
<input type="textbox" id="test" />​
$('#test').attr({"aria-autocomplete": "list"});​ 
```

有关演示，请参阅此[jsFiddle](http://jsfiddle.net/poztin/LaEJS/4/)。

我尝试了此处定义的各种其他 ARIA 属性：

[HTML 5：标记语言（ARIA 版）](http://dev.w3.org/html5/markup/aria/aria.html)

有些会产生相同的错误，有些则不会。

我无法重现 IE9 中的错误。

**这是IE10中的错误吗？jQuery？还是有其他我不理解的原因？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T23:15:05.650

波兹，

这是 IE10 浏览器在兼容模式下的一个已知错误。请对此错误票投赞成票，以增加修复它的可能性。[https://connect.microsoft.com/IE/feedback/details/774078](https://connect.microsoft.com/IE/feedback/details/774078)票是由 jQuery 团队提交的。

您是否在真正的 IE7 中尝试过您的代码示例？我用浏览器堆栈（WinXP/IE7）尝试了你的 jsFiddle，并且示例工作没有错误。

如果您使用兼容模式来模拟测试 IE7，那么好消息是使用原生 IE7 可以正常工作。坏消息是 IE10 兼容模式存在一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T18:58:11.957

这就是我的解决方案。在您使用的 Jquery 版本中，在我的 cas ( `jquery-1.7.2.js`) 中，第 2764 行有一段如下所示：

```
// Use this for any attribute in IE6/7
// This fixes almost every IE6/7 issue
nodeHook = jQuery.valHooks.button = {
    get: function( elem, name ) {
        var ret;
        ret = elem.getAttributeNode( name );
        return ret && ( fixSpecified[ name ] ? ret.nodeValue !== "" : ret.specified ) ?
            ret.nodeValue :
            undefined;
    },
    set: function( elem, value, name ) {
        // Set the existing or create a new attribute node
        var ret = elem.getAttributeNode( name );
        if ( !ret ) {
            ret = document.createAttribute( name );
            elem.setAttributeNode( ret );
        }
        return ( ret.nodeValue = value + "" );
    }
}; 
```

根据[https://bugs.jquery.com/ticket/12577](https://bugs.jquery.com/ticket/12577)，这是IE7模式下IE10的兼容性问题。解决方案是更改 set 函数中的返回变量：

```
 return ( ret.nodeValue = value + "" );
//for:
elem.setAttribute(name, value + ""); 
return (ret.value); 
```

# codeigniter - 在 codeigniter 中从库中执行控制器方法

> ID：13644926
> 
> 赞同：3
> 
> 时间：2012-11-30T12:05:49.007
> 
> 标签：codeigniter, github, codeigniter-2

我有一个问题，我正在为 Codeigniter 开发一个库来创建带有工人和延迟队列的作业队列（[Codeigniter-JobQueue](http://github.com/marsanla/Codeigniter-jobQueue)）。但是我有一个问题............我如何在这个库中执行或执行控制器的方法？知道这一点会很棒。

该库正在将“控制器、方法、参数”转换为“http://www.example.com/controller/method/params”。

谢谢，如果您想帮助我发展，欢迎您。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:55:59.023

使用卷曲。但是，如果您希望从控制器方法返回变量，那么您的 MVC 中的 C 设计不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:29:46.637

卷曲是一种方法。控制器应该输出内容而不是返回变量。如果您正在安排任何作业，则库应调用 URL 本身。您可以使用 codeigniter 的 cli 模式。

[http://ellislab.com/codeigniter/user-guide/general/cli.html](http://ellislab.com/codeigniter/user-guide/general/cli.html)

# javascript - 如何检测div中何时出现多行？

> ID：13644930
> 
> 赞同：3
> 
> 时间：2012-11-30T12:05:54.180
> 
> 标签：javascript, css, html, padding

我有一个特定宽度的 div 标签，它将通过 javascript 接收文本。

```
<div id="titleTop" style="width:400px; height:25px; padding-top:15px;"></div> 
```

并且每当该文本的长度超过宽度时，div 应该调整其填充，因此文本的第二行不会被位于下方的另一个 div 遮挡。

```
if(document.getElementById("titleTop").innerHTML.length >= 70){

    document.getElementById("titleTop").style.paddingTop = 5 + "px";
    document.getElementById("titleTop").style.height = 35 + "px";
} 
```

我的问题是这种方法不是很可靠。有什么方法可以检测文本是否触发了 div 内的多行？或者让填充按比例调整自己？

编辑：为了清楚起见，我的问题不在于 div 的高度（它必须始终保持 40px 高），而是在其中垂直对齐文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:10:22.840

```
.yourDivClass {
    display: table-cell;
    vertical-align: middle;    
} 
```

那应该对齐您的内容。最后，消除无关的 CSS 和 JavaScript 函数，以使代码尽可能简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:23:56.167

要具有`div`垂直居中文本的固定高度，请从 , 中删除填充`div`，然后使用：

```
style="vertical-align:middle; display:table-cell;" 
```

这将使文本垂直居中。不再需要 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:31:33.953

不需要JS。删除填充顶部，设置高度和使用`vertical-align:middle;`，`display:table-cell;` 这是一个工作[小提琴](http://jsfiddle.net/4E2Gc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:53:26.203

> 但在其中垂直对齐文本

如果要在`<div>`特定高度内垂直居中对齐文本，请将 CSS 属性设置为与（跨浏览器）的属性`line-height`相同的值。`height``<div>`

# php - jquery、php 和表单验证/重定向

> ID：13644932
> 
> 赞同：0
> 
> 时间：2012-11-30T12:06:00.767
> 
> 标签：php, jquery, jquery-mobile, jquery-validate

我正在使用`jquery mobile`并`jquery.validate`验证表单。

如果使用会话禁用 JS，我也有 PHP 验证来检查字段

表单发布到自身 ( `$_SERVER['PHP_SELF']`)

我想要做的是，一旦表单通过验证，重定向到成功页面

使用 js 和 php 验证工作正常，所以这不是我的问题

我已将其`$_POST`存储在会话变量中，并`header("Location: success.php")`用于重定向到成功页面。

当 JS 被禁用时，这工作正常，我可以`var_dump()`在 success.php 中访问会话中的 POST 数据（使用检查），问题是，当启用 JS 时，当重定向到 success.php 时，似乎什么都没有发送.

我在 HTML 中得到以下内容：

```
<div data-role="page" data-url="/apply.php" data-external-page="true" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 394px; ">undefined</div> 
```

有谁知道为什么重定向似乎不起作用？

谢谢

我的php文件如下

*   php 检查表单是否已发送
*   存储所有帖子变量
*   将会话变量设置为发布变量并将这些变量存储在表单输入`value=""`字段中
*   做验证
*   如果通过验证，则使用 header() 重定向
*   显示html表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:48:30.187

问题是因为标头必须在 JS/纯文本/类似的东西启动之前发送（重定向功能是标头）。

我的解决方案是使用 Javascript 而不是 PHP 进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:09:35.980

行。所以环顾四周，似乎 jQuery mobile 是问题所在。将 data-ajax="false" 添加到 my 似乎已经解决了重定向问题

# magento - 错误消息未显示在我在 magento 中的自定义注册表单 phtml 页面上

> ID：13644935
> 
> 赞同：0
> 
> 时间：2012-11-30T12:06:07.097
> 
> 标签：magento

我目前正在管理 magento 中的三种类型（普通用户、作者、编辑）用户。

我需要为作者和编辑创建单独的注册表单。但是所有用户都使用单`createpost action`输入保存`Accountcontroller.php`。

作者的注册表在 authorregister.phtml 中，除错误消息外，一切正常。

表单错误消息不会显示在 authorregister.phtml 文件中。然后即使在此之后我也放置了块`$this->getMessagesBlock()->getGroupedHtml();`，也没有显示错误消息。

令我惊讶的是，这些错误消息将显示在`persistent/customer/form/register.phtml`页面上。

我无法找到为什么在该页面加载时显示此表单错误消息的问题。

谁能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:03:18.890

您好，以下提示可能对您有所帮助......

在`authorregister.phtml`添加第一行

```
< div id="messages_product_view"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?>< /div>

 In Accountcontroller.php before redirect 
Mage::getSingleton('core/session')->addSuccess(Mage::helper('modulename')->__('Thank you .')); 
```

# x86-64 - 进位，GAS 约束

> ID：13644936
> 
> 赞同：2
> 
> 时间：2012-11-30T12:06:14.650
> 
> 标签：x86-64, inline-assembly

我正在 GAS 内联汇编中编写汇编长加法，

```
template <std::size_t NumBits>
void inline KA_add(vli<NumBits> & x, vli<NumBits> const& y); 
```

如果我专攻，我可以：

```
template <>
void inline KA_add<128>(vli<128> & x, vli<128> const& y){
     asm("addq  %2, %0; adcq  %3, %1;" :"+r"(x[0]),"+r"(x[1]):"g"(y[0]),"g"(y[1]):"cc");
} 
```

很好，现在如果我尝试概括以允许模板内联，并让我的编译器工作任何长度......

```
template <std::size_t NumBits>
void inline KA_add(vli<NumBits> & x, vli<NumBits> const& y){
    asm("addq  %1, %0;" :"+r"(x[0]):"g"(y[0]):"cc");
    for(int i(1); i < vli<NumBits>::numwords;++i)
        asm("adcq  %1, %0;" :"+r"(x[i]):"g"(y[i]):"cc");
}; 
```

好吧，它不起作用我不能保证进位位（CB）被传播。第一个 asm 行和第二个 asm 行之间不守恒。这可能是合乎逻辑的，因为循环增加了 i 并因此“删除”了 CB I 事物，它应该存在 GAS 约束以在两个 ASM 调用中保存 CB。不幸的是，我没有找到这样的信息。

任何的想法 ？

谢谢你，谢谢！

PS 我重写了我的函数以删除 C++ 意识形态

```
template <std::size_t NumBits>
inline void KA_add_test(boost::uint64_t* x, boost::uint64_t const* y){
    asm ("addq  %1, %0;" :"+r"(x[0]):"g"(y[0]):"cc");
        for(int i(1); i < vli<NumBits>::numwords;++i)
            asm ("adcq  %1, %0;" :"+r"(x[i]):"g"(y[i]):"cc");
}; 
```

asm 给出（GCC 调试模式），

应用程序

```
 addq  %rdx, %rax; 
```

NO_APP

```
 movq    -24(%rbp), %rdx
    movq    %rax, (%rdx) 
```

.LBB94：.loc 9 55 0

```
 movl    $1, -4(%rbp)
    jmp     .L323 
```

.L324：

```
 .loc 9 56 0

    movl    -4(%rbp), %eax
    cltq  
    salq    $3, %rax
    movq    %rax, %rdx
    addq    -24(%rbp), %rdx <----------------- Break the carry bit
    movl    -4(%rbp), %eax
    cltq  
    salq    $3, %rax
    addq    -32(%rbp), %rax
    movq    (%rax), %rcx
    movq    (%rdx), %rax 
```

应用程序

```
 adcq  %rcx, %rax; 
```

NO_APP

正如我们所读到的，还有额外的 addq，它破坏了 CB 的传播

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:43:16.393

我看不出有办法明确告诉编译器必须在没有影响`C`标志的指令的情况下创建循环代码。

这样做肯定是可能的 - 用于`lea`向上计数数组地址，`dec`向下计数循环并测试`Z`结束条件。这样，除了实际的数组总和外，循环中的任何内容都不会更改`C`标志。

你必须做一个手动的事情，比如：

```
long long tmp; // hold a register

__asm__("0:
    movq (%1), %0
    lea 8(%1), %1
    adcq  %0, (%2)
    lea 8(%2), %2
    dec %3
    jnz 0b"
    : "=r"(tmp)
    : "m"(&x[0]), "m"(&y[0]), "r"(vli<NumBits>::numwords)
    : "cc", "memory"); 
```

对于热代码，紧密的循环并不是最优的；一方面，指令具有依赖性，并且每次迭代的指令比内联/展开`adc`序列要多得多。更好的序列将类似于（`%rbp`分别`%rsi`具有源和目标数组的起始地址）：

```
0:

lea  64(%rbp), %r13
lea  64(%rsi), %r14
movq   (%rbp), %rax
movq  8(%rbp), %rdx
adcq   (%rsi), %rax
movq 16(%rbp), %rcx
adcq  8(%rsi), %rdx
movq 24(%rbp), %r8
adcq 16(%rsi), %rcx
movq 32(%rbp), %r9
adcq 24(%rsi), %r8
movq 40(%rbp), %r10
adcq 32(%rsi), %r9
movq 48(%rbp), %r11
adcq 40(%rsi), %r10
movq 56(%rbp), %r12
adcq 48(%rsi), %r10
movq %rax,   (%rsi)
adcq 56(%rsi), %r10
movq %rdx,  8(%rsi)
movq %rcx, 16(%rsi)
movq %r8,  24(%rsi)
movq %r13, %rbp     // next src
movq %r9,  32(%rsi)
movq %r10, 40(%rsi)
movq %r11, 48(%rsi)
movq %r12, 56(%rsi)
movq %r14, %rsi     // next tgt
dec  %edi           // use counter % 8 (doing 8 words / iteration)
jnz 0b              // loop again if not yet zero 
```

并且只在这些块周围循环。这样做的好处是负载被阻塞，并且您每次只处理一次循环计数/终止条件。

老实说，我会尽量不要使*一般*位宽特别“整洁”，而是明确展开代码的特殊情况，例如，二次幂的位宽。而是将标志/构造函数消息添加到非优化模板实例中，告诉用户“使用二的幂”？

# windows-phone-8 - 在 WP8 中将 ShellTileSchedule 与 Wide Tiles 一起使用

> ID：13644938
> 
> 赞同：1
> 
> 时间：2012-11-30T12:06:20.397
> 
> 标签：windows-phone-8

有没有办法在 Windows Phone 8 中使用 ShellTileSchedule 来更新宽磁贴？

Windows 8 有 TileUpdateManager 和 StartPeriodicUpdate 方法，这非常适合我想做的事情，但我在 Windows Phone 8 中找不到等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:05:32.503

可以使用更新宽背景***见***[http://www.developer.nokia.com/Community/Wiki/Generating_Live_tiles_for_Windows_Phone_from_Live_Data](http://www.developer.nokia.com/Community/Wiki/Generating_Live_tiles_for_Windows_Phone_from_Live_Data)`ShellTileSchedule`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:55:03.137

不，`ShellTileSchedule`仅支持一种分辨率的远程图像。相反，您应该使用`PeriodicTask`后台代理并自己更新磁贴（使用 C#）

# javascript - 使用数据库中的数据填充 jquery 自动完成功能

> ID：13644939
> 
> 赞同：0
> 
> 时间：2012-11-30T12:06:30.560
> 
> 标签：javascript, jquery, ruby-on-rails, haml, jquery-autocomplete

我正在使用带有类别的[jQuery Autocomplete](http://jqueryui.com/autocomplete/#categories)，我使用了运行良好的演示代码，现在我正在尝试用我的数据库中的数据填充下拉列表。我在我的视图中使用了这段代码：

```
:javascript
  $(function() {
      var data = [
          - Datasheet.find(:all).each do |ds|
            { label: "#{ds.title}", category: "Data Sheets" },
          - Brochure.find(:all).each do |br|
            { label: "#{br.title}", category: "Brochures" },

        $( "#search" ).catcomplete({
          delay: 0,
          source: data
      });
  }); 
```

但我得到了错误`undefined local variable or method 'ds' for #<#<Class:0x00000005c95a18>:0x00000005c8d570>`

我不确定是不是因为我将haml与javascript混合在一起？还有其他方法吗？在我看来，只有一个名为搜索的文本字段，它与演示代码一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:15:44.077

过滤器中的代码，例如`:javascript`不被视为 Haml，它只是通过过滤器馈送的字符串，因此`-`不会`=`像在 Haml 的其余部分中那样工作。不过，您可以使用插值（即`#{...}`块）。事实上，这就是导致你的错误的原因——在`"#{ds.title}"`Haml 中试图评估`ds`，但不是在传递给的块的上下文中`Datasheet.find`。

`#{}`块可以跨越多行，因此您可以将代码更改为以下内容：

```
:javascript
  $(function() {
      var data = [
          #{
          (Datasheet.find(:all).map do |ds|
            "{ label: \"#{ds.title}\", category: \"Data Sheets\" }"
          end +
          Brochure.find(:all).map do |br|
            "{ label: \"#{br.title}\", category: \"Brochures\" }"
          end).join(',')
          }
      ];

      $( "#search" ).catcomplete({
        delay: 0,
        source: data
      });
  }); 
```

这里不是使用`each`迭代每个数组，而是`map`创建一个新数组，然后使用`+`将两个数组相加，最后使用`join(',')`将它们组合成一个插入页面的字符串。

然而，这是一段非常丑陋和笨拙的代码。在这种情况下，更好的解决方案是将创建数组的代码提取到帮助程序中，并从您的 Haml 中调用帮助程序。

帮手：

```
def datasheet_array
  Datasheet.find(:all).map do |ds|
    "{ label: \"#{ds.title}\", category: \"Data Sheets\" }"
  end
end

def brochure_array
  Brochure.find(:all).map do |br|
    "{ label: \"#{br.title}\", category: \"Brochures\" }"
  end
end

def array_for_js
  "[#{(datasheet_array + brochure_array).join(',')}]"
end 
```

然后你的 Haml 可以更清晰：

```
:javascript
  $(function() {
      var data = #{array_for_js};

      $( "#search" ).catcomplete({
        delay: 0,
        source: data
      });
  }); 
```

# python - 与 Twitter API 1.1 一起使用的 python-twitter 应用程序的替代方案是什么？

> ID：13644943
> 
> 赞同：0
> 
> 时间：2012-11-30T12:06:51.407
> 
> 标签：python, django, twitter, python-twitter

在我的项目中，我想使用我已经存储在数据库中的 oauth 令牌访问 twitter 用户的公共时间线。我尝试使用[python-twitter](http://code.google.com/p/python-twitter/)应用程序，但它与[Twitter api 1.1](https://dev.twitter.com/docs/api/1.1/overview)有一些问题。以下是我在使用 python-twitter 时遇到的问题：-

```
Traceback (most recent call last):
 File "<console>", line 1, in <module>
 File "C:\Users\Teja\Envs\icon\Lib\site-packages\twitter.py", line 2301, in GetPublicTimeline
 hashtags. [Optional]
 File "C:\Users\Teja\Envs\icon\Lib\site-packages\twitter.py", line 620, in NewFromJsonDict
 if 'user_mentions' in data['entities']:
 AttributeError: 'unicode' object has no attribute 'get' 
```

所以任何人都可以帮助我解决这个问题或建议我可以访问推文的任何其他应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:42:44.723

我使用推特：[https ://github.com/ttezel/twit](https://github.com/ttezel/twit)

作者不久前将其更新为支持 v1.1。效果很好。

# python - 在 PyQT4 中动态删除 QLineEdit

> ID：13644946
> 
> 赞同：0
> 
> 时间：2012-11-30T12:07:01.373
> 
> 标签：python, pyqt

所以我从一个范围内动态创建 QLineEdit：

```
 for w in range(x):
            s = "s"+str(w)
            self.s = QtGui.QLineEdit(self)
            self.s.setGeometry(QtCore.QRect(15, y, 20, 40))
            self.s.setObjectName(_fromUtf8(s))   
            self.s.show()
            y += 40 
```

我希望稍后删除这些。我尝试了很多东西，但它只删除了我添加的最后一个。我找不到任何解释原因的东西：

```
for w in range(x):
    s="s"+str(w)
    self.s.deleteLater() 
```

它适用于最后一个，但在此之前没有。因此它将删除列表的底部。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:34:17.910

```
for w in range(x):
    s="s"+str(w)
    self.s.deleteLater() 
```

您正在设置`s`为 QLineEdit 的名称，但随后您将删除`self.s`，这是一个完全不同的变量，它在第一个循环中设置为最后创建的 QLineEdit。我想你想要这样的东西：

**创造**

```
self.edits = []
for w in range(x):
    s = "s"+str(w)
    s = QtGui.QLineEdit(self)
    s.setGeometry(QtCore.QRect(15, y, 20, 40))
    s.setObjectName(_fromUtf8(s))   
    s_name.show()
    self.edits.append(s)
    y += 40 
```

**删除**

```
for s in self.edits:
    s.deleteLater() 
```

# entity-framework - 包含在具有 where 条件的关系数据中

> ID：13644948
> 
> 赞同：0
> 
> 时间：2012-11-30T12:07:19.223
> 
> 标签：entity-framework

我有这个实体：

```
public class A 
{
    public List<B> B { get;set; }
}

public class B 
{
    public DateTime Date { get; set; }
    public List<C> C { get; set; }
}

public class C { } 
```

我需要从 B.Date > DateTime.Now 的 A 中获取 C。我正在尝试这样的事情：

```
var users = _db.A
.Select(a => new
{
    A = a,
    B = a.B
    .Where(b => b.Date >= DateTime.Now).Select(p => new
    {
        B = b,
        C = b.C
    })
})
.AsEnumerable()
.Select(a => a.A)
.ToList(); 
```

但 C 始终为空。我怎样才能得到C？

* * *

更新

如果我在“列表 C”中设置虚拟，它就可以工作！！如何在不设置虚拟的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:04:06.693

您可以尝试手动构建对象图。以下将只运行一个数据库查询（当第一个 foreach 循环执行时，其余的在内存中执行）：

```
var userQuery = _db.A
    .Select(a => new
    {
        A = a,
        B = a.B.Where(b => b.Date >= DateTime.Now).Select(p => new
        {
            B = b,
            C = b.C
        })
    });

var users = new List<A>();
foreach (var u in userQuery)
{
    A a = u.A;
    a.B = new List<B>();
    foreach (var x in u.B)
    {
        B b = x.B;
        b.C = x.C;
        a.B.Add(b);
    }
    users.Add(a);
} 
```

# sql-server - 从另一个存储过程调用 SQL Server 存储过程

> ID：13644965
> 
> 赞同：1
> 
> 时间：2012-11-30T12:08:17.303
> 
> 标签：sql-server, stored-procedures, sql-server-2000

在 SQL Server 2000 中，`Master`我从一个存储过程（存储过程）调用一系列其他过程。

第 n 个过程抛出`column not found`错误，但如果我单独运行它，第 n 个过程执行得很好。

如果我将此第 n 个过程放在`master`存储过程中的任何位置，它的行为方式相同。

谁能帮我找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:52:01.733

如果该过程对表执行任何类型的 DDL，则同一事务无法正确引用该表。例如，如果您有一个运行 SELECT... INTO 的存储过程，然后另一个运行 ALTER TABLE... ADD 列的语句，您将遇到此问题。

# html - 圆角裁剪

> ID：13644966
> 
> 赞同：7
> 
> 时间：2012-11-30T12:08:19.367
> 
> 标签：html, css, rounded-corners

我遇到了圆角问题，他们一直想在左侧裁剪几个像素。下面是我正在使用的代码。我试过增加数字和减少数字；我添加了一个包装器；我已经尝试了所有我能找到的不同的搜索解决方案，但它仍然失败了。谁能帮帮我，因为我似乎不太方便？显然我也不能张贴它的样子。

```
<style>
.image 
{
    width: 200px;
    position:relative;
    -webkit-border-radius: 14px;
    -moz-border-radius: 14px;
    -khtml-border-radius: 14px;  
    border-radius: 14px;
    overflow: hidden;
}

#slideshow 
{
    margin:0 0 0 0;
    position:relative;
    width:200px;
    height:133px;
    padding: 10px;
    overflow:hidden;
    -webkit-border-radius: 14px;
    -moz-border-radius: 14px;
    -khtml-border-radius: 14px; 
    border-radius: 14px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

#slideshow > div 
{
    position:absolute;
}
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

<script>
$(function() {
    $("#slideshow > div:gt(0)").hide();
    setInterval(function() 
    {
        $('#slideshow > div:first')
            .fadeOut(2000)
            .next()
            .fadeIn(2000)
            .end()
            .appendTo('#slideshow');
    }, 3000);
});
</script>

<div id="slideshow">
    <div class="image"><img alt="" class="icon-action" src="img url" width="200"/></div>
    <div class="image"><img alt="" class="icon-action" src="img url" width="200"/></div>
    <div class="image"><img alt="" class="icon-action" src="img url" width="200"/></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:20:47.020

`border-radius`当规范出来时，我遇到了同样的问题。原来你必须添加`border-radius`到`<img>`标签。然后您可以保留或删除`<div>`'`border-radius`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:54:15.997

我已经能够使用以下 css 解决这个问题。这在我的网站上有效，我希望它可以帮助您解决问题。不确定这是否是您遗漏的论点。

```
.classname {
-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
box-shadow:inset 0px 1px 0px 0px #ffffff;
background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
background-color:#ededed;
-moz-border-radius:6px;
-webkit-border-radius:6px;
border-radius:6px;
border:1px solid #dcdcdc;
display:inline-block;
color:#777777;
font-family:arial;
font-size:15px;
font-weight:bold;
padding:6px 24px;
text-decoration:none;
text-shadow:1px 1px 0px #ffffff; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:02:36.647

本质上，您需要处理嵌套的圆角，这些圆角对于这个有用的工具非常有帮助。

[http://joshnh.com/tools/get-your-nested-border-radii-right.html](http://joshnh.com/tools/get-your-nested-border-radii-right.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T02:13:27.640

你可以试试这个：

```
div.circle 
{ 
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 28px;
    -moz-border-radius: 64px;
    -webkit-border-radius: 64px; padding:32px; 
     border: 2px black;
     color:white;
     text-align:center;
    -webkit-box-shadow: 0 0 1px rgb(255,0,0);
    -moz-box-shadow: 0 0 1px rgb(255,0,0); box-shadow: 0 0 1px rgb(255,0,0); 
} 
```

# mysql - MySQL - 一对一的关系？

> ID：13644979
> 
> 赞同：65
> 
> 时间：2012-11-30T12:09:00.563
> 
> 标签：mysql, sql, database, database-design, one-to-one

我正在尝试在 MySQL 数据库中实现“一对一”关系。例如，假设我有一个用户表和一个帐户表。我想确保一个用户只能拥有一个帐户。并且每个用户只能有一个帐户。

我为此找到了两种解决方案，但不知道该使用什么，还有其他选择。

### 第一个解决方案：

```
DROP DATABASE IF EXISTS test;
CREATE DATABASE test CHARSET = utf8 COLLATE = utf8_general_ci;
USE test;

CREATE TABLE users(
    id INT NOT NULL AUTO_INCREMENT,
    user_name VARCHAR(45) NOT NULL,
    PRIMARY KEY(id)
) ENGINE = InnoDB DEFAULT CHARSET = utf8;

CREATE TABLE accounts(
    id INT NOT NULL AUTO_INCREMENT,
    account_name VARCHAR(45) NOT NULL,
    user_id INT UNIQUE,
    PRIMARY KEY(id),
    FOREIGN KEY(user_id) REFERENCES users(id)
) ENGINE = InnoDB DEFAULT CHARSET = utf8; 
```

在这个例子中，我在账户中定义了指向用户主键的外键。然后我将外键设为唯一，因此帐户中不能有两个相同的用户。要加入表，我将使用此查询：

```
SELECT * FROM users JOIN accounts ON users.id = accounts.user_id; 
```

### 第二种解决方案：

```
DROP DATABASE IF EXISTS test;
CREATE DATABASE test CHARSET = utf8 COLLATE = utf8_general_ci;
USE test;

CREATE TABLE users(
    id INT NOT NULL AUTO_INCREMENT,
    user_name VARCHAR(45) NOT NULL,
    PRIMARY KEY(id)
) ENGINE = InnoDB DEFAULT CHARSET = utf8;

CREATE TABLE accounts(
    id INT NOT NULL AUTO_INCREMENT,
    account_name VARCHAR(45) NOT NULL,
    PRIMARY KEY(id),
    FOREIGN KEY(id) REFERENCES users(id)
) ENGINE = InnoDB DEFAULT CHARSET = utf8; 
```

在此示例中，我创建了一个外键，它从主键指向另一个表中的主键。由于默认情况下主键是唯一的，这使得这种关系是一对一的。要加入表格，我可以使用它：

```
SELECT * FROM users JOIN accounts ON users.id = accounts.id; 
```

现在的问题：

*   在 MySQL 中创建一对一关系的最佳方法是什么？
*   除了这两个之外，还有其他解决方案吗？

我正在使用 MySQL Workbench，当我在 EER 图中设计一对一关系并让 MySQL Workbench 生成 SQL 代码时，我得到一对多关系：S 这让我感到困惑：S

如果我将这些解决方案中的任何一个导入 MySQL Workbench EER 图，它会将关系识别为一对多 :S 这也令人困惑。

那么，在 MySQL DDL 中定义一对一关系的最佳方法是什么。有哪些选择可以实现这一目标？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-30T12:44:22.930

> 由于默认情况下主键是唯一的，这使得这种关系是一对一的。

不，这使得关系“一对零或一”。那是你真正需要的吗？

如果**是**，那么您的“第二种解决方案”会更好：

*   它更简单，
*   占用更少的存储空间¹（因此使缓存“更大”）
*   ^(维护2)的索引更少，这有利于数据操作，
*   并且（因为您使用的是 InnoDB）自然地对数据进行[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，因此靠近的用户也将他们的帐户存储在一起，这可能有利于缓存局部性和某些类型的范围扫描。

顺便说一句，您需要制作`accounts.id`一个普通整数（不是自动增量）才能使其工作。

如果**没有**，请看下面...

> 在 MySQL 中创建一对一关系的最佳方法是什么？

好吧，“最佳”是一个重载的词，但“标准”解决方案与任何其他数据库中的解决方案相同：将两个实体（在您的情况下为用户和帐户）放在同一个物理表中。

> 除了这两个之外，还有其他解决方案吗？

从理论上讲，您可以在两个 PK 之间进行循环 FK，但这需要*延迟*约束来解决先有鸡还是先有蛋的问题，遗憾的是 MySQL 不支持这种问题。

> 如果我将这些解决方案中的任何一个导入 MySQL Workbench EER 图中，它会将关系识别为一对多：S 那也令人困惑。

我对那个特定的建模工具没有太多的实际经验，但我猜这是因为它是“一对多”的，其中“多”边通过使其独特而被限制为 1。请记住，“many”并不是“1 or many”的意思，而是“0 or many”的意思，所以“capped”版本真正的意思是“0 or 1”。

* * *

*¹不仅是附加字段的存储费用，还有二级索引的存储费用。而且由于您使用的 InnoDB[总是](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)对表进行集群，因此请注意，在集群表中二级索引比在基于堆的表中更昂贵。*

*² InnoDB[需要外键索引](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-30T12:17:00.103

您的第一种方法在帐户表中创建两个候选键：`id`和`user_id`。

因此我建议第二种方法，即使用外键作为主键。这：

*   少用一列
*   允许您唯一标识每一行
*   允许您将帐户与用户匹配

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2017-05-29T12:12:05.300

下面的方法怎么样

1.  创建表用户

    ```
    CREATE TABLE `user` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(45) DEFAULT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
    ```

2.  创建具有唯一索引的表帐户，`user_id`并`account_id`具有与用户/帐户的外键关系和主键`user_id and account_id`

    ```
    CREATE TABLE `account` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(45) DEFAULT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
    ```

3.  创建表 user2account

    ```
    CREATE TABLE `user2account` (
      `user_id` int(11) NOT NULL,
      `account_id` int(11) NOT NULL,
      PRIMARY KEY (`user_id`,`account_id`),
      UNIQUE KEY `FK_account_idx` (`account_id`),
      UNIQUE KEY `FK_user_idx` (`user_id`),
      CONSTRAINT `FK_account` FOREIGN KEY (`account_id`) REFERENCES         `account` (`id`),
      CONSTRAINT `FK_user` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
    ```

尽管此解决方案在数据库中占用的空间最大，但也有一些优势。

*   将 FK_Key 放在用户表或帐户表中是我期望的一对多关系（用户有很多帐户......）
*   虽然这种`user2account`方法主要用于定义多对多关系，但添加 UNIQUE 约束将阻止创建除一对一关系之外的其他内容`user_id`。`account_id`

我在此解决方案中看到的主要优点是您可以将工作划分为公司的不同代码层或部门

*   部门 A 负责创建用户，即使没有账户表的写权限也是可能的
*   B 部门负责创建账户，即使没有用户表的写权限也可以这样做
*   部门 C 负责创建映射，即使没有对用户或帐户表的写权限，这也是可能的
*   一旦 C 部门创建了映射，如果不要求 C 部门先删除映射，则 A 部门或 B 部门都不能删除用户和帐户。

# sencha-touch - 将 Sencha Architect 项目从 Sencha Touch v2.0.x 更新到 Sencha Touch 2.1.x

> ID：13644980
> 
> 赞同：5
> 
> 时间：2012-11-30T12:09:02.060
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect, sencha-touch-2.1

我有一个基于**Sencha Touch v2.0.x**的项目，我在**Sencha Architect 2.0**中工作。现在我已将**Sencha Architect**更新到**2.1**，并想更新我的项目以使用Sencha **Touch 2.1.x。**我怎样才能做到这一点？有没有什么转换器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:32:42.120

在 Sencha Architect 中，打开您的项目检查器。然后在资源下右键单击库并选择“升级到 Sencha Touch 2.1.x”。

![在此处输入图像描述](../Images/56e75dfed3092ae6e5ecd774f69e43dd.png)

# asp.net - 尝试构建选择命令时出现参数错误

> ID：13644982
> 
> 赞同：0
> 
> 时间：2012-11-30T12:09:17.983
> 
> 标签：asp.net

我正在通过查询字符串传递一个值，我希望该值成为我的选择命令的一部分以构建我的 GridView。但我收到以下错误。任何想法如何解决？

错误：将 nvarchar 值“<%=QueryString2%>”转换为数据类型 int 时转换失败。

C＃：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        QueryString=Convert.ToInt32(Request.QueryString["tourid"]);
    }

    private int _querystring;

    public int QueryString
    {
        get
        {
            return _querystring;
        }
        set
        {
            _querystring = value;
        }
    } 
```

ASPX：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ChinatowndbConnString %>" 
            SelectCommand="SELECT * FROM [vwSchedule] Where TourId=@tid">

            <SelectParameters>
                <asp:Parameter  DefaultValue="<%=QueryString%>" Name="tid" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:37:25.753

您不能使用`<%= ... %>`来分配服务器控件属性的值。结果，您`DefaultValue`被设置为文字 string `"<%=QueryString%>"`，这不是一个有效的整数。

尝试使用 a[`QueryStringParameter`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.querystringparameter.aspx)代替：

```
<SelectParameters>
   <asp:QueryStringParameter  
      Name="tid" 
      DbType="Int32" 
      QueryStringField="tourid"
   />
</SelectParameters> 
```

# primefaces - 单击树表行时 Primefaces 上下文菜单刷新

> ID：13644983
> 
> 赞同：1
> 
> 时间：2012-11-30T12:09:22.340
> 
> 标签：primefaces, refresh, contextmenu, treetable

情况如下：我有一个带有 3 种不同类型对象的树表。该表包含带有 event="select" 的 p:ajax。我写了 3 个不同的 contextMenus，每种类型一个......而且一切都很好。

我的问题是我想启用/禁用一些菜单项；为此，我根据所选节点的属性使用带有条件的“渲染”属性。一切正常，但只有第二次我右键单击同一个对象（第一次没有过滤 contextMenu）。

这是代码......（我只包括一种类型的对象）

树表页面：

```
<h:form id="form" prependId="false">
    <p:treeTable value="#{documentsController.root}" var="document" id="docs" 
            selectionMode="single" selection="#{documentsController.selectedNode}">

        <p:ajax event="select" process="@this" update=":form:menus"/>

        <p:column headerText="#{msg['name']}">
            <h:outputText value="#{document.name}" />
        </p:column>
    </p:treeTable>

    <h:panelGroup id="menus">
        <ui:include src="/menu/document_menu.xhtml"/>
    </h:panelGroup>

    <p:dialog id="document-rename-dialog" widgetVar="documentRenameDialog" header="#{msg.rename}">
        <h:panelGrid id="doc-rename" columns="2">
            <h:outputLabel for="name" value="#{msg.name}:" />
            <h:inputText id="name" value="#{documentsController.name}"/>
        </h:panelGrid>

        <div class="spacer-10" />

        <h:panelGroup layout="block">
            <p:commandLink onclick="documentRenameDialog.hide();" value="#{msg.cancel}"/>
            <p:commandLink actionListener="#{documentsController.renameDocument(documentsController.selectedNode.data)}"
            process="@this :form:document-rename-dialog:doc-rename"
            update=":form:docs"
            oncomplete="documentRenameDialog.hide();"
            value="#{msg.check}">
        </h:panelGroup>
    </common:dialog>
</h:form> 
```

文档菜单页面：

```
<p:contextMenu id="contextMenuDocument" for="docs" nodeType="document">
    <p:menuitem value="#{msg.rename}" process="@this docs" update=":form:document-rename-dialog:doc-rename"
        actionListener="#{documentsController.setName(documentsController.selectedNode.data.name)}"
        rendered="#{documentsController.canWrite}"
        icon="ui-icon-pencil" oncomplete="documentRenameDialog.show();"/>
</p:contextMenu> 
```

DocumentsController 类：

```
@ManagedBean
@ViewScoped
public class DocumentsController {
    private TreeNode root;
    private TreeNode selectedNode;
    private String name;

    public TreeNode getSelectedNode() {
        return selectedNode;
    }

    public void setSelectedNode(TreeNode selectedNode) {
        this.selectedNode = selectedNode;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void renameDocument(ArterDocument selectedDocument) {
        if(name != null && !name.equals("")) {
            System.out.println("Document renamed in: "+name);
            ((MyDocument)selectedNode.getData()).setName(name);
        }
        else
            addErrorMessage("Error renaming document.");
    }

    public static boolean canWrite() {
        if(((MyDocument)selectedNode.getData()).isWriteable())
            return true;
        return false;
    }
} 
```

MyDocument 类是一个简单的类，带有一个字符串（名称）和一个布尔值（可写）。

谁能告诉我如何在第一次拍摄时显示过滤后的 contextMenu？

谢谢！

# powershell - 值“1”的 Powershell 搜索文本

> ID：13644986
> 
> 赞同：2
> 
> 时间：2012-11-30T12:09:27.670
> 
> 标签：powershell, pattern-matching

请有人帮帮我，我对powershell有点陌生，所以非常感谢您的耐心和知识。

问题是：我有 txt 文件，每行都有数字。我需要解析 txt 文件并找出特定值出现的次数，因此在下面的示例中，我需要在文件中搜索该值，然后计算出现次数

例子：

```
12,
2,
41,
234,
21,
1,
11,
1, 
```

这是我迄今为止尝试过的

```
$txt = get-content 'C:\numbers.txt'
$search = $txt -match "1"
$search.count 
```

但结果也找到了 12, 41, 21, 1, 11 我如何找出如何找到仅 1 的计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:20:44.857

我认为您可以拆分每一行，然后使用-like 运算符而不是-match，使用-like，表达式的两边必须相同，（但您仍然可以使用通常的通配符 * 和 ? ）：

```
(gc c:\temp\tsts.txt |%{  $_.split(', ') -like 1 }|Measure-Object).count 
```

# iphone - 如何减小范围栏标题的大小

> ID：13644994
> 
> 赞同：1
> 
> 时间：2012-11-30T12:10:17.703
> 
> 标签：iphone, objective-c, ios, xcode, uisearchbar

如何减小范围栏标题的大小以避免重叠

![在此处输入图像描述](../Images/8c323477edac5ce1a41d2f1afe809470.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:59:16.897

很简单，只需减少您的 scopeBar`Buttons`或只是减少标题中的字符。