# StackOverflow 问答 13306000-13306999

# iphone - Xcode 错误：此设备不再连接

> ID：13306002
> 
> 赞同：17
> 
> 时间：2012-11-09T10:10:41.147
> 
> 标签：iphone, ios, xcode

在 iPhone 上执行项目时，通过 Xcode 安装项目时出现错误：

> 此设备不再连接。

而如果我打开 Xcode 管理器，我可以看到设备摘要和一个绿点。问题是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-09T11:41:57.010

尝试完全退出 Xcode 并重新打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-11T12:21:33.040

我面临同样的情况。我试过了

*   清洁和建造
*   重新启动 Xcode
*   已删除派生数据
*   重启系统

没有什么对我有用

**我切换了 USB 端口（从左到右端口），它刚刚工作。**

我知道这听起来很奇怪，但它对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T12:14:04.287

答案是重启你的 iPhone 和 Mac。通过这样做，您的问题将得到解决。这个你可以在任何版本的 Xcode 上尝试

该错误仅在尝试运行项目许多项目后出现，而不是解决供应配置文件问题。

所以，最好先解决基本错误，否则会造成另一个麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T21:11:33.977

我在安装 Xcode 5 后遇到了这个问题。我找到的解决方案是重新启动系统，它工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T10:21:29.557

尝试断开设备并重新连接。有时这可以解决此类问题。

如果这不起作用，关闭并重新打开 Xcode 可能会有所帮助。

虽然，由于您提到的是虚拟机，您可能会检查并查看 USB 端口归属于一个系统或另一个系统（Windows 与 MacOS）是否存在任何冲突。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T10:36:00.350

iPhone/iPad USB 连接本来就很挑剔，而且您正在以不受支持的方式运行 OS X。我怀疑这是问题所在。

如果您正在运行 VMware，这可能会有所帮助：[DEBUGGING ON THE IPHONE & IPAD WITH VMWARE](http://www.otakunozoku.com/debugging-on-the-iphone-ipad-with-vmware/)

基本上是这样的：在您的主机和客户端操作系统上安装 iTunes，因为适用于 Windows 的 Apple 移动设备 USB 驱动程序可能对您有所帮助。

但是，如果您认真地为 iOS 开发，使用“真正的”Mac 绝对是更简单的方法。

**更新：**从您的评论中，我了解到您需要能够在您的应用程序中使用加速度计输入。您可以使用[iSimulate](http://www.vimov.com/isimulate/)（[在 App Store 中](https://itunes.apple.com/app/isimulate/id306908756?mt=8)）将此数据从您的设备发送到 iOS 模拟器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-28T12:51:25.370

我有同样的问题。那是一根断了的电缆。

# ruby - 无法在 Ruby 中将 StringIO 转换为 String (TypeError)

> ID：13306003
> 
> 赞同：6
> 
> 时间：2012-11-09T10:10:46.997
> 
> 标签：ruby, zip, open-uri

当我使用下面的代码时，我收到以下错误消息： `can't convert StringIO into String (TypeError)`

```
array_of_lines = []
Zip::ZipInputStream::open(open("URL for zipped file", "rb")) do |io|
  file = io.get_next_entry
  puts "Downloading file #{file}"
  array_of_lines = io.readlines
  print "Downloaded ", array_of_lines.count, " elements.", "\n"
end 
```

有人能帮我吗？预先感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T07:36:44.660

您正在阅读的信息足够小，可以包含在 stringIO 对象中。通常发生的情况是，当数据变得太大（超过默认值 10KB）时，对象会从缓冲区中取出并变成一个临时文件，您需要按照您尝试的方式读取它。

您有两个选择：
1\. 从较大的文件中读取
2\. 将 openURI 字符串缓冲区的默认值设置为 0。

要设置默认缓冲区，您需要创建一个初始化程序并将其放入其中：

```
OpenURI::Buffer.send :remove_const, 'StringMax'
OpenURI::Buffer.const_set 'StringMax', 0 
```

第一行将删除当前缓冲区设置 (10KB)，第二行将其设置为 0。

不要忘记重新启动您的服务器，因为它是一个初始化程序，否则什么都不会改变。我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T12:49:27.147

该表达式`open("URL for zipped file", "rb")`返回 StringIO，而不是 String。

要获取 StringIO 的内容，需要调用方法`read`

```
string = open(url).read() 
```

# excel - Excel - 如果第一个工作表的特定单元格中的文本为 Y（或 Yes），则将整行移至下一个工作表

> ID：13306011
> 
> 赞同：1
> 
> 时间：2012-11-09T10:11:09.867
> 
> 标签：excel, conditional, excel-formula

我正在尝试设置一个公式，其中工作表 1 是日期、名称列表，最后一列 (I) 是简单的 Y 或 N（表示是或否）。

如果答案是 Y（或是），那么我希望将整行复制到下一个工作表（工作表 2）中，如果答案是 N（或否），那么它不会进入下一个工作表。

这有可能吗，如果可以，我怎么能通过单元格公式来做到这一点（如果可能的话，我不想更改 srcipt 模块）？

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:52:08.183

移动是 Excel 中的一个两步过程（即剪切 - 粘贴），因此无法通过公式来完成。

你可以调查一下

1.  自动过滤以显示基础数据工作表中的所有 Y 记录...然后您可以手动复制/粘贴它们
2.  用于显示甚至复制 Y 记录的高级过滤器，但在同一个工作表中
3.  编写一个 VBA 程序（不是函数）为您完成提取工作，您首先将手动设置每个记录中的 Y/N 字段，然后按下移动记录的按钮；您可以捕获在第 3 列中输入 Y 的事件以自动触发移动过程，但我不推荐它......如果用户不小心输入 Y 怎么办......
4.  最后，您可以在提取表上插入一个数组公式来显示 Y 记录；例子：

表 1

```
 A       B      C
1  Index    Info   Flag
2      1       A      Y
3      2       B      N
4      3       C      N
5      4       D      Y 
```

表 2

*   将工作表 1 的标题复制到 A1..A3
*   选择 B1..B3 并输入公式`=IF(Sheet1!C2="Y",Sheet1!A2:C2)`
*   按 Ctrl+Shift+ENTER 保存为数组公式
*   向下复制 B1..B3

不过不是很好，因为每条 N 记录都会得到一个 FALSE FALSE FALSE

我个人更喜欢 3) ... 按钮解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-24T17:55:49.190

你可以做一个解决方法。

在原始工作表中创建另一个选项卡或表格，通过条件提取所有行。这可以通过嵌套在 IF 语句中的 VLOOKUP 来完成。（如果单元格 = YES，则 VLOOKUP 行的其余部分）。我很抱歉没有包括确切的公式，但在该部分很容易找到视频等。

在其他工作表上，使用 PowerQuery 查询原始工作表，并附加新表中的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T07:17:05.563

只需在您想查看结果的地方输入 = 符号，然后转到整行并将光标向下拖动按 Enter。而已。看：那是TJ

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T14:44:12.093

这不是最漂亮的解决方案，但它确实有效，我在工作簿上使用它来记录收到的支票。如果支票是过时的，它会延续该行，以便该行出现在下一张纸的顶部。它是一个数组公式，所以所有数据都是连续的。

让我们使用上面 MikeD 的数据示例并对其进行扩展：

```
 A       B      C            D                  E
1  Index    Info   Flag        Index 2             Info 2
2     1       A      Y    =If(C2="Y",A2,"")  =If(C2="Y",B2,"")
3     2       B      N    =If(C3="Y",A3,"")  =If(C3="Y",B3,"")
4     3       C      N    =If(C4="Y",A4,"")  =If(C4="Y",B4,"")
5     4       D      Y    =If(C5="Y",A5,"")  =If(C5="Y",B5,"") 
```

基本上，您要在数据右侧添加列，以检查列 C 是否等于“Y”并一次复制一个单元格。所以我们最终得到的是：

```
 A       B      C      D        E
1  Index    Info   Flag  Index 2  Info 2
2     1       A      Y      1        A
3     2       B      N    
4     3       C      N    
5     4       D      Y      4        D 
```

然后在单元格 A1 中的 Sheet2 上输入以下数组公式（不要忘记使用 Ctrl+Shift+Enter）：

```
=IFERROR(INDEX(Sheet1!$D$1:$D$5,SMALL(IF(Sheet1!$D$1:$D$5<>"",ROW(Sheet1!$D$1:$D$5)),ROW(1:1))),"") 
```

然后在单元格 B1 中输入一个类似的数组公式：

```
=IFERROR(INDEX(Sheet1!$E$1:$E$5,SMALL(IF(Sheet1!$E$1:$E$5<>"",ROW(Sheet1!$E$1:$E$5)),ROW(1:1))),"") 
```

然后您可以突出显示 A1:B1 并将公式向下拖动到 A1:B5 ，您应该会看到：

```
 Index 2  Info 2
    1       A
    4       D 
```

然后您可以返回到 Sheet1 并隐藏那些看起来令人讨厌的公式列:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-21T11:44:48.010

我在 Sheet1;s A1 单元格中输入了一些数据，即客户名称，我在 sheet2 的单元格 B1 中使用此名称使用此公式 =Sheet1!B1，现在我想将数据从 sheet2;B1 移动（传输为 CUT）到 sheet3 的“C1 “cel，从哪个公式可以得出，请告诉我

# c# - CSS 在设计视图中显示而不是在运行时

> ID：13306013
> 
> 赞同：1
> 
> 时间：2012-11-09T10:11:17.610
> 
> 标签：c#, asp.net, .net, css, visual-studio-2010

我有一个具有菜单功能的基于母版页的网站。成功从 Style.css 文件中读取 CSS。我现在添加了一个单独的 Login.aspx 页面，该页面功能正常，但没有选择具有登录页面特定 css 的 Account.css 文件。我不希望登录页面引用母版页。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Login.aspx.cs" Inherits="Login" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"      type="text/javascript"></script>
    <link href="Account.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        $(document).ready(function () {
                 $('.grid_12').fadeIn(1750);
        });
    </script>
</head> 
```

我将不胜感激，因为我尝试过以我能想到的各种方式引用 Account.css 文件路径：

```
href="./Account.css"
href="Account.css"
href="~/Account.css" 
```

我现在已将 Login.aspx 页面和 Account.css 文件放在网站根目录的新登录文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:17:04.763

您可能正在使用表单身份验证的区域。
如果是，那么您可以使用

```
 <location path="Account.css">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

里面

```
<appSettings></appSettings> 
```

否则你可以使用

```
<style type="text/css" src='<%= ResolveUrl("Account.css")%>'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:24:07.130

似乎您在 IIS 上的虚拟目录中托管您的站点。如果你这样做，你的路径必须反映虚拟目录。

```
href="/virtualDir/Account.css" 
```

要做到这一点是 asp.net 使用[`ResolveClientUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveclienturl.aspx)

```
href="<%= ResolveClientUrl("~/Account.css") %>" 
```

# java - 在运行时设置 java.util.logging.config.file

> ID：13306014
> 
> 赞同：9
> 
> 时间：2012-11-09T10:11:18.953
> 
> 标签：java, logging, runtime, java.util.logging

我试图在运行时设置 java util 日志记录配置文件，以避免将其设置为 VM 参数。但这只是行不通。每当我尝试重新读取配置时，日志记录都会被完全禁用。

请参阅以下代码片段：

```
package test;

import java.io.FileInputStream;
import java.util.logging.Level;
import java.util.logging.LogManager;
import java.util.logging.Logger;

public class A {
  private static final Logger LOGGER= Logger.getLogger(A.class.getName());

  public static void main(String[] args) throws Exception {
    System.out.println("--- start");
    LOGGER.log(Level.SEVERE, "SEVERE 1");
    LOGGER.log(Level.FINEST, "FINEST 1");
    LogManager.getLogManager().readConfiguration();
    LOGGER.log(Level.SEVERE, "SEVERE 2");
    LOGGER.log(Level.FINEST, "FINEST 2");
    LogManager.getLogManager().readConfiguration(new FileInputStream("/tmp/logging.properties"));
    LOGGER.log(Level.SEVERE, "SEVERE 3");
    LOGGER.log(Level.FINEST, "FINEST 3");
    System.out.println("--- end");
  }
} 
```

如果我在没有任何 VM 参数的情况下运行该类，这是输出：

```
--- start
09.11.2012 09:59:25 test.A main
SCHWERWIEGEND: SEVERE 1
09.11.2012 09:59:25 test.A main
SCHWERWIEGEND: SEVERE 2
--- end 
```

如您所见，仅记录 SEVERE 级别，因为这是 JRE logging.properties 的默认设置。打电话`LogManager#readConfiguration()`不会改变任何事情。但是当试图从我的 logging.properties 中读取配置时，绝对没有记录任何内容。`LogManager#readConfiguration(InputStream)`调用或设置`java.util.logging.config.file`属性和调用没有区别`LogManager#readConfiguration()`。

现在看到下一个输出，当我使用 VM 属性运行相同的代码时`-Djava.util.logging.config.file=/tmp/logging.properties`：

```
--- start
2012-11-09 10:03:44.0838 SEVERE  [test.A#main()] - SEVERE 1
2012-11-09 10:03:44.0843 FINEST  [test.A#main()] - FINEST 1
--- end 
```

如您所见，SEVERE 和 FINEST 级别都被记录，并且它们以不同的格式记录。两者都在我的 custom 中指定`logging.properties`。但是调用后记录在这里停止`LogManager#readConfiguration()`！这与上面的示例不同，我不明白。此外，就像上面的示例一样，调用`LogManager#readConfiguration(InputStream)`不起作用。

那么问题是什么？根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogManager.html)设置，运行时 java.util.logging.config.file 属性应该可以工作。两个 readConfiguration() 方法也应该像我预期的那样工作。那么问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T13:35:50.460

可能是您的日志记录属性有问题。我注意到我必须在配置（根和控制台）中使用两个级别规范才能获得结果。
也许您的根记录器级别低于`FINEST`，例如`INFO`( `.level=INFO`)。
或者根本没有设置，在这种情况下我认为它是`INFO`.

我使用以下 logging.properties 运行您的代码：

```
handlers=java.util.logging.ConsoleHandler
.level=FINEST
java.util.logging.ConsoleHandler.level=FINEST 
```

没有指定`-Djava.util.logging.config.file=/tmp/logging.properties`输出是：

```
--- start
09.11.2012 14:25:49 testing.Scribble main
SCHWERWIEGEND: SEVERE 1
09.11.2012 14:25:49 testing.Scribble main
SCHWERWIEGEND: SEVERE 2
09.11.2012 14:25:49 testing.Scribble main
SCHWERWIEGEND: SEVERE 3
09.11.2012 14:25:49 testing.Scribble main
AM FEINSTEN: FINEST 3
--- end 
```

看起来正确！（我的测试类叫做 testing.Scribble，这是唯一的区别）

使用`-Djava.util.logging.config.file=/tmp/logging.properties`输出是：

```
--- start
09.11.2012 14:31:06 testing.Scribble main
SCHWERWIEGEND: SEVERE 1
09.11.2012 14:31:06 testing.Scribble main
AM FEINSTEN: FINEST 1
09.11.2012 14:31:06 testing.Scribble main
SCHWERWIEGEND: SEVERE 2
09.11.2012 14:31:06 testing.Scribble main
AM FEINSTEN: FINEST 2
09.11.2012 14:31:06 testing.Scribble main
SCHWERWIEGEND: SEVERE 3
09.11.2012 14:31:06 testing.Scribble main
AM FEINSTEN: FINEST 3
--- end 
```

看起来也正确！

# asp.net-mvc-4 - MVC 站点配置的全局/静态变量

> ID：13306018
> 
> 赞同：0
> 
> 时间：2012-11-09T10:11:28.187
> 
> 标签：asp.net-mvc-4, global-variables

跨多个会话访问 MVC 中的全局变量的最有效方法是什么？

我想访问*每个用户*、公司名称、列表页面上的项目数量等可能缓存的数据库数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:23:23.540

过去我创建了一个设置服务，并使用 IoC（例如[Ninject](http://www.ninject.org/)）将其实例化为单例。这提供了比仅使用`web.config`AppSettings 更大的灵活性。

# ruby-on-rails - Windows 和本地服务器的 wkhtmltoimage 路径是什么？

> ID：13306019
> 
> 赞同：1
> 
> 时间：2012-11-09T10:11:28.687
> 
> 标签：ruby-on-rails, windows, path, wkhtmltoimage

我在 Windows 上的本地服务器上运行 rails。我将 wkhtmltoimage 安装到 C:/Sites/wkhtmltoimage

现在我必须告诉 IMGKit 在哪里可以找到它，所以我添加了一个文件 initializers/imgkit.rb：

```
IMGKit.configure do |config|
  config.wkhtmltoimage = 'C:/Sites/wkhtmltoimage'
end 
```

但是当我尝试使用 IMGKit 时，rails 告诉我：

```
No wkhtmltoimage executable found at /usr/local/bin/wkhtmltoimage 
```

但是我为它设置了一条新的路径？

我试图要求此文件以确保它已加载

```
require 'config/initializers/imgkit.rb' 
```

但后来我被告知：无法加载这样的文件——config/initializers/imgkit.rb

我现在该怎么办？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T09:40:22.523

您必须像这样使用 .exe 放置完整路径：

```
config.wkhtmltoimage = 'C:/Sites/wkhtmltoimage/bin/wkhtmltoimage.exe' 
```

并将此路径：'C:/Sites/wkhtmltoimage/bin/' 添加到环境变量中的 PATH 中。

然后您应该会在全局范围内看到 wkhtmltoimage。

# mysql - 显示时更改行中的Mysql值

> ID：13306023
> 
> 赞同：0
> 
> 时间：2012-11-09T10:12:01.740
> 
> 标签：mysql

我有一张表`entities`。在这张表中，我得到了列：`Rank Name Spouse Level Online Class`如在站点 >>Class 中显示时所见，表中的数字值为 25 。145 .... 我希望以下消息显示为：`number 25 displayed as Good`。`number 145 displayed as Verygood`.

看到这个 [http://i.stack.imgur.com/7E2eK.png](http://i.stack.imgur.com/7E2eK.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:21:12.813

```
SELECT
CASE Class 
WHEN 25 THEN 'good'
WHEN 145 THEN 'very good'
END AS translatedNumbers
FROM yourTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:21:26.953

你需要类似的东西：

```
SELECT name,
       IF(class=25,"Good",IF(class(145,"Verygood",class)) AS display 
FROM yourtable 
```

或者您可以使用`case`：

```
SELECT name,
     CASE class 
         WHEN 25 THEN "Good" 
         WHEN 125 THEN "Verygood"
         ELSE class 
     END AS display 
FROM yourtable 
```

[在这里](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)阅读！

# javascript - Coffeescript 和变量检查

> ID：13306029
> 
> 赞同：0
> 
> 时间：2012-11-09T10:12:09.933
> 
> 标签：javascript, coffeescript

我有以下代码：

```
if variablename?
   alert "YES!"

l = []

if l[3]?
  alert "YES!" 
```

它被翻译成这样：

```
var l;

if (typeof variablename !== "undefined" && variablename !== null) {
  alert("YESSS!");
}

l = [];

if (l[3] != null) {
  alert("YESSS!");
} 
```

在 Coffeescript 中，我将如何表达`l[3] !== "undefined"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:15:53.217

只需添加`typeof`运算符，如下所示：

```
if typeof l[3] != 'undefined'
  alert 'Yes!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:27:43.130

请注意，`l[3] !== "undefined"`它询问是否`l[3]`与“未定义”的字符串不同，而不是其值是否未定义。`l[3]?`CoffeeScript 为->生成的比较`l[3] != null`将验证何时`l[3]`某个值与 undefined 或 null 不同，这是您大部分时间想要问的：）

# c++ - Eclipse Juno C++ 调试错误 193

> ID：13306030
> 
> 赞同：1
> 
> 时间：2012-11-09T10:12:13.453
> 
> 标签：c++, eclipse, debugging, eclipse-juno

这是我第一次尝试使用 Eclipse juno C++ 进行调试时发生的：

![在此处输入图像描述](../Images/f819d367bb9c6a4a6299d2bd328edbb6.png)

> `Error in final launch sequence`
> `Failed to execute MI command:`
> `-exec-run`
> `Error message from debugger back end:`
> `Error creating process <full path>... (error 193)`

使用“运行”而不是“调试”运行程序效果很好，但是当我尝试调试时，我得到了这个。我用谷歌搜索了一下，发现某个地方我应该从目录中删除任何空格；我这样做了，但它仍然无法正常工作。

我正在运行的 Eclipse 版本是：

*   蚀`IDE for C/C++ Developers`
*   版本：`Juno Service Release 1`
*   *   构建标识：`20120920-0800`

编辑：问题已解决！这是因为我忘记了用户帐户名中的空格。因为我不想费心去更改用户中的文件夹名称，所以我只是将我的工作区文件夹直接移动到我的 C 驱动器，所以它现在遵循的路径是：C:\eclipse\WorkspaceC++

非常感谢评论中的约翰：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-03T11:33:13.083

来自 OP 编辑​​：*问题已解决！*

这是因为我忘记了用户帐户名中的空格。

因为我不想费心去改变用户中的文件夹名称，所以我只是将我的工作区文件夹直接移动到我的 C 驱动器，所以它现在遵循的路径是：`C:\eclipse\WorkspaceC++`

# python - 如何打印 1-9999 的数字？

> ID：13306032
> 
> 赞同：1
> 
> 时间：2012-11-09T10:12:21.743
> 
> 标签：python

我在这里试过，但它不能打印这样的长数字

```
for i in range(1,222222222222222):
    print i 
```

错误：

```
Traceback (most recent call last):
  File "x.py", line 1, in <module>
    for i in range(1,222222222222222):
MemoryError 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T10:14:04.940

使用 [`xrange`](http://docs.python.org/2/library/functions.html?highlight=xrange#xrange).

```
for i in xrange(1, 222222222222222):
    print i 
```

> 此函数与 range() 非常相似，但返回的是“xrange 对象”而不是列表。这是一种不透明的序列类型，它产生与相应列表相同的值，但实际上并没有同时存储它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T10:15:34.697

您可能正在使用 Python2，它`range()`会生成一个数字列表。包含 222222222222222 元素的列表非常大，对于大多数 RAM 来说太大了。

与此相反，`xrange()`生成一个 xrange 对象，可以像列表一样访问（索引，迭代），但不会占用太多空间，因为值是按需计算的。

在 Python3 中，`range()`返回一个范围对象，它与 2.x 中的 xrange 对象完全一样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T10:52:58.647

使用 xrange 代替范围。range 生成一个列表，将其存储在内存中并对每个项目执行循环。这在处理相当大的数字时会产生内存错误。

xrange 是生成器而不是列表，项目是动态创建的，因此不会损害内存

我希望这有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T10:15:06.540

请改用 xrange。range 函数实际上是在内存中构造列表，而 xrange 返回一个生成器（类似于迭代器），并且一次只返回一个数字。

```
for i in xrange(1,222222222222222L):
    print i 
```

[在此处](https://stackoverflow.com/questions/94935/what-is-the-difference-between-range-and-xrange)查看有关该主题的更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T10:14:56.117

Python 在开始循环之前创建范围，导致大量内存使用/oom 错误。

你最好使用 xrange，它以更小的部分分配范围。

```
for i in xrange(from, to):
    print i 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T10:22:16.423

您也可以自己[使用 yield创建生成器：](http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement)

```
def my_gen(start, end, step):
    while start < end:
        start += step
        yield start

for x in my_gen(1, 1000, 2):
    print x 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-09T10:15:13.433

**检查这个 While 循环的例子**

```
a = 0
while a < 10 :
    a += 1
    print (a) 
```

**你也可以使用“For Loop”来做同样的事情**

```
onetoten = range(1,11)
for count in onetoten:
    print (count) 
```

# javascript - 需要将以下css转换为jquery

> ID：13306033
> 
> 赞同：0
> 
> 时间：2012-11-09T10:12:24.503
> 
> 标签：javascript, jquery, html, css

我有这样的CSS

```
#myid.myclass{
    top: 50px !important;
    right: 50px !important;
  } 
```

如何在jquery中写这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:13:53.007

```
$("#myid.myclass").css({
   "top": "50px !important",
   "right": "50px !important"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:13:45.490

尝试这个

```
 $("#myid").css('top','50px').css('right','50px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:14:13.950

```
$('#myid').css({'top': '50px !important', 'right': '50px !important'}); 
```

# javascript - 如何以同步方式放置javascript

> ID：13306034
> 
> 赞同：1
> 
> 时间：2012-11-09T10:12:24.283
> 
> 标签：javascript, jquery

我尝试了以下方法来同步执行 javascript 但我收到错误..

我所做的是首先我使用 javascript 动态包含 jquery 和 jquery ui 文件，然后出现 jquery 依赖文件。但是在加载页面时，它最后执行 jquery 和 jquery ui 文件，然后首先执行。

单个js中使用的代码：

```
(function(){
var script= document.createElement("script");
script.src="jquery.js";
script.type="text/javascript";
var pelement=document.getElementsByTagName('script')[document.getElementsByTagName('script').length-1];  

pelement.insertBefore(script,pelement);

}();

(function(){
var script= document.createElement("script");
script.src="jquery-ui.js";
script.type="text/javascript";
var pelement=document.getElementsByTagName('script')[document.getElementsByTagName('script').length-1];  

pelement.insertBefore(script,pelement);

}();

jquery depend files follows

$(document).ready... 
```

现在我收到 jquery 未定义的错误.. 即使我尝试使用 xmlhttprequest.. 但这也失败了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:34:23.360

这看起来像是使用[jQuery Promise 接口](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)的完美情况。

您可以声明一个异步操作，并指定它之后会发生什么。我在执行并行调用的非常复杂的接口中大量使用它，并且效果很好。

干杯。

# debugging - VS2012 C++

> ID：13306036
> 
> 赞同：3
> 
> 时间：2012-11-09T10:12:30.460
> 
> 标签：debugging, visual-c++, runtime-error

我正在尝试在 Visual Studio 2012 中调试 C++ 项目，并且在尝试查看字符串值时出现错误“读取字符串字符时出错。”。我能找到的唯一相关文章在这里： [http ://connect.microsoft.com/VisualStudio/feedback/details/721456](http://connect.microsoft.com/VisualStudio/feedback/details/721456)

但我的项目没有设置任何相关的预处理器选项。

这是一个屏幕截图，可以准确显示我的意思

[错误 http://img854.imageshack.us/img854/1682/09112012100524.png](http://img854.imageshack.us/img854/1682/09112012100524.png)

对此错误的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:24:32.230

`0xcdcdcdcd`是 Microsoft 调试版本中使用的特殊标记序列，并显示未初始化内存的存在：

[众所周知的魔术数字](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)

这反而表明您尚未初始化`AptConstItem`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-22T18:03:32.593

我遇到了同样的问题，这是我的构建定义中的一个问题。我可以调试一些变量，但不能调试其他变量。我不得不关闭所有优化。在 C/C++ -> 优化和链接器 -> 优化中。

# cocos2d-iphone - 检测子精灵的触摸

> ID：13306039
> 
> 赞同：0
> 
> 时间：2012-11-09T10:12:52.067
> 
> 标签：cocos2d-iphone

我小时候将精灵 B 添加到精灵 A 中。

[spriteA addChild:spriteB];

我的游戏逻辑基于 spriteB 是否被触摸。但是我无法让 spriteB 检测到触摸。

我已经将touchLocation转换为nodeSpace ..我可以让spriteA毫无问题地检测到触摸..

我使用的 if 条件是

```
if (CGRectContainsPoint(spriteB.boundingBox, touchLocation)) 
```

如果有人能指出我的方向会很甜蜜..

spriteA 被添加到 spriteBatchNode 如果这很重要。

提前致谢！

更新：

我认为孩子实际上正在检测触摸。它不起作用的原因是因为我设置了脏标签。

简而言之，这就是我的游戏的运作方式。目标从一些隐藏处弹出......玩家触摸目标以获得积分。

我有几个数组可以将目标保存在不同的位置。我为每个目标设置了脏标签..
target.dirty = TRUE 当它弹出时 target.dirty = FALSE 当它隐藏时

这相当于如果它弹出，那么它是可点击的。如果它在隐藏的后面，那么它是不可点击的。

所以就在我输入我的 if 条件之前

```
if (CGRectContainsPoint(curTarget.boundingBox, touchLocation)) 
```

我有这个

```
if(curTarget.dirty == FALSE) continue; 
```

我的问题是，当我进行上述条件检查时..我没有检测到触摸..但是如果我取消上述条件，我可以检测到所有触摸..但问题会变成相反的..这是我能够做到的点击我的目标，即使它不可见..

如果我将目标精灵添加为图层的子图层，则上述逻辑有效......

帮助！

# ios - 将 Titanium iPad App 分发到工作 iPad

> ID：13306041
> 
> 赞同：0
> 
> 时间：2012-11-09T10:12:55.570
> 
> 标签：ios, ipad, titanium, appcelerator

我为我工作的公司使用 Appcelerator Titanium 创建了一个 iPad 应用程序。这是一个我们只能在我公司使用的应用程序，并且不想尝试通过应用程序商店分发它。有没有办法将此应用程序分发到公司的 iPad，而无需将它们连接到我的开发人员计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:16:17.400

是的，您可以（例如）创建一个网站，人们可以在其中下载您的应用程序 (.ipa) 和配置文件（分发）。人们可以在他们的设备上打开该网站并“下载”这两个文件。确保只为内部使用这样做，因为 Apple 不希望看到您像这样向公众分发应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:04:15.907

您应该寻找内部应用程序。这是该过程的工作原理

1.  注册 iOS 开发者企业计划。
2.  准备您的应用程序以进行分发。
3.  创建授权设备使用您已签名的应用程序的企业分发配置文件。
4.  使用配置文件构建应用程序。
5.  将应用程序部署给您的用户。

您应该使用 Titanium Studio 打包应用程序或使用 XCode 创建存档，然后在 XCode Organizer 中选择内部分发。

# java - 调试 Intellij Idea 中使用 JNDI 调用的方法

> ID：13306048
> 
> 赞同：1
> 
> 时间：2012-11-09T10:13:23.030
> 
> 标签：java, debugging, intellij-idea, jndi

在我们的 Java 项目中，我们有一个用于`JNDI`检索 stub 到 class的方法`Foo`。在它得到一个存根之后，它会调用这个方法的一个方法来进行一些计算。这是一段代码，可以感受一下它的样子：

```
public static String getBar(String id, Map<String, Object> parameters) throws IOException {
    return getFoo().getBar(id, parameters);
}

private static Foo getFoo() throws FooException {
    try {
        InitialContext ctx = new InitialContext
                (FooProperties.getInstance().getProperties());

        return (Foo) PortableRemoteObject.narrow(ctx.lookup(
                "foo-application/" + Foo.JNDI_NAME + "/remote"),
                Foo.class);
    } catch (NamingException e) {
        throw new FooException(FooException.FOO_REMOTE_METHOD_FAILURE, e);
    }
} 
```

它给了我意想不到的结果，所以我决定使用调试来了解`Foo.getBar()`方法内部实际发生了什么。但是在我得到`Foo`实例之后，jvm 开始执行`getBar()`方法，我只看到 EJB 的内部方法的调用 - `invoke()`，`handleCallLocally()`，`calculateHash()`和类似的东西。但没有关于里面发生了什么的信息`getBar()`。
所以，问题是：我如何看待`getBar()`（**如果可能的话**）的执行。

# ruby - Ruby Open-URI 库在 404 HTTP 错误代码中中止

> ID：13306050
> 
> 赞同：7
> 
> 时间：2012-11-09T10:13:30.077
> 
> 标签：ruby, open-uri, net-http

我使用 OpenURI 库。

```
object = open("http://example.com") 
```

如果[http://example.com](http://example.com)服务器代码响应等于 200，我的程序将按预期运行。但是，如果[http://example.com](http://example.com)服务器响应代码等于 400（或其他），则脚本中止 OpenURI::HTTPError: 404 Not Found。
如果我使用“begin-rescue”构造并处理“HTTPError 异常”，我可以避免这种情况。
这是正确的方法吗？我应该使用 Net/Http 库而不是 OpenURI 来处理所有情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:24:31.203

救人`OpenURI::HTTPError`是完全合理的。请参阅此相关答案：[https ://stackoverflow.com/a/7495389/289274](https://stackoverflow.com/a/7495389/289274)

但是，如果您不想处理异常处理，可以使用以下方法`Net::HTTP`： [https ://stackoverflow.com/a/2797443/289274](https://stackoverflow.com/a/2797443/289274)

# cakephp - cakephp 2个应用程序相同的文件名问题

> ID：13306057
> 
> 赞同：1
> 
> 时间：2012-11-09T10:13:48.717
> 
> 标签：cakephp

我有 2 个应用程序共享同一个蛋糕核心。两个应用程序都包含类似的控制器和模型文件名。如果调试为 ON (> 0)，则两个应用程序都在正常工作，没有任何错误。如果它关闭，无论我在 url 中首先使用的哪个应用程序都将起作用，而其他应用程序将显示错误，例如在日志中**找不到的方法。**我知道，这与缓存有关。两个应用程序都有不同的 tmp 文件夹，我已授予必要的权限。但是第二个应用程序正在查看第一个应用程序的 tmp，以便 app2 方法不会出现在该 tmp 中。我通过删除缓存文件进行检查，有时它们没有重新生成。如何解决这个问题？我的文件夹结构

项目文件夹

应用程序1

*   控制器
*   模型
*   时间

    等应用程序2

    *   控制器
*   模型
*   tmp 等库

*   蛋糕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:59:58.163

这是一个缓存问题。您很可能正在使用 APC，并且没有为每个应用程序的缓存配置指定唯一前缀。请务必将默认`$prefix = "myapp_"'`行更改`app/Config/core.php`为每个应用程序的唯一值。

# excel - 将数据值从一个 excel 复制并粘贴到另一个 excel 到下一个空行

> ID：13306058
> 
> 赞同：0
> 
> 时间：2012-11-09T10:13:48.803
> 
> 标签：excel, vba

我需要将一组数据从一个 excel 文件复制到另一个 excel 文件。

粘贴时，我还需要将它们粘贴到所需列的下一个空行中。

此过程是否有任何宏编码，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:54:57.540

如果我正确理解您的问题，您需要做的就是：

*   确定 Copy 表中使用的最后一行，然后
*   从原件复制到该行 + 1。

像这样的东西就足够了，尽管它又快又脏。此外，我已经使它比它需要的更“详细”（因此效率更低），以试图使过程更清晰。（您并不真的需要我声明的所有变量，但我已将它们放入其中以使逻辑更加透明。）

```
Sub PasteToFollowingRow()

    Dim wks As Excel.Worksheet
    Dim rng_Source As Excel.Range
    Dim rng_NextRowDown As Excel.Range
    Dim l_LastRow As Long, l_LastColumn As Long

    Set wks = ThisWorkbook.Worksheets("generation_copy")

    l_LastRow = wks.UsedRange.Rows.Count
    l_LastColumn = wks.UsedRange.Columns.Count

    'Assumes that you'll never copy just one cell...
    If (l_LastRow = 1 And l_LastColumn = 1) Then
        Set rng_NextRowDown = wks.Cells(1, 1)
    Else
        Set rng_NextRowDown = wks.Cells(l_LastRow + 1, 1)
    End If

    Set rng_Source = ThisWorkbook.Worksheets("generation").UsedRange

    rng_Source.Copy rng_NextRowDown

ExitPoint:
    On Error Resume Next
    Set rng_NextRowDown = Nothing
    Set rng_Source = Nothing
    Set wks = Nothing
    On Error Goto 0
    Exit Sub

ErrorHandler:
    MsgBox "Error " & Err.Number & vbCrLf & Err.Description

    Resume ExitPoint

End Sub 
```

# android - ZXing与eclipse和android集成，NoClassDefFoundError

> ID：13306062
> 
> 赞同：2
> 
> 时间：2012-11-09T10:13:56.110
> 
> 标签：android, eclipse, zxing

我和所有这些关于让 zxing 在 android 中的项目上工作的问题都有同样的问题，但没有一个解决方案对我有用。这是错误日志：

```
11-09 11:06:16.009: E/AndroidRuntime(3481): FATAL EXCEPTION: main
11-09 11:06:16.009: E/AndroidRuntime(3481): java.lang.NoClassDefFoundError:            com.google.zxing.client.android.R$layout
11-09 11:06:16.009: E/AndroidRuntime(3481):     at   com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:155)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.os.Looper.loop(Looper.java:130)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at android.app.ActivityThread.main(ActivityThread.java:3835)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at java.lang.reflect.Method.invokeNative(Native Method)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at java.lang.reflect.Method.invoke(Method.java:507)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
11-09 11:06:16.009: E/AndroidRuntime(3481):     at dalvik.system.NativeStart.main(Native Method) 
```

我在buildpath中尝试了很多组合，添加源项目，添加de core.jar（在我的项目中命名为zxing-1.7.jar），将其添加为外部库......但是当我没有遇到这个问题时底部，然后我得到一个 dalvik 格式错误，说 Lcom/zxing/android: 已经添加。

我还尝试将 .jar 放在名为 libs 的文件夹中，但没有工作，在构建路径配置上检查和取消选中它。

这是我当前构建路径顺序的图像，[http](http://postimage.org/image/f496ukwkf/) ://postimage.org/image/f496ukwkf/ ，但我尝试了很多不同的组合，但都没有奏效。

谢谢，我需要让它工作，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:24:06.437

您正在尝试`android/`在项目中包含代码。您不打算这样做，而且您也没有正确设置它。如果您是新手，通过 Intent (http://code.google.com/p/zxing/wiki/ScanningViaIntent) 集成会容易得多。没有库代码可以弄乱。

# javascript - JavaScript 变量为空，没有先前的警报消息

> ID：13306067
> 
> 赞同：1
> 
> 时间：2012-11-09T10:14:17.570
> 
> 标签：javascript, json, alert, output

我正在使用以下函数从 JSON 文件创建链接列表并将它们放入 span 元素（jquery 已初始化）

```
$(document).ready(function() {

function createjson(category) {
        var content = "";
    i = 0;
    $.getJSON(category + ".txt", function(data){
        while(data[i] != null) {
            content = content + '<li class="liste"><a target="_blank" class="liste" href="' + data[i].url + '">' + data[i].name + '</a></li>';
            i++;
        }

    }); 
    document.getElementById("list_" + category).innerHTML = content;
}

createjson("cat1"); 

}); 
```

但是，如果我这样使用它，span 元素仍然是空的。只有当我更换

```
document.getElementById("list_" + category).innerHTML = content; 
```

和

```
alert("test");
document.getElementById("list_" + category).innerHTML = content; 
```

我得到了想要的输出。如何在不事先打印警报消息的情况下获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:16:37.993

那是因为`.getJSON()`是一种异步方法。在服务器有时间响应请求之前，您的代码将尝试使用内容更新 DOM。因此不插入内容。

使用警报，您可以停止执行足够长的时间以使服务器响应，因此当您添加警报时它会起作用。

正确的做法是将您的内容更新移动到成功回调中，它始终在服务器响应后运行：

```
$.getJSON(category + ".txt", function(data){
    while(data[i] != null) {
        content = content + '<li class="liste"><a target="_blank" class="liste" href="' + data[i].url + '">' + data[i].name + '</a></li>';
        i++;
    }

    $("#list_" + category).html(content);
}); 
```

在上面的例子中，我也用`document.getElementById("list_" + category).innerHTML = content;`更短的 jQuery替换了你的。`$("#list_" + category).html(content);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:21:29.347

解决此问题的不是警报，警报基本上阻塞了 UI 足够长的时间以完成 AJAX 请求。

`$.getJSON`是一种异步方法。这意味着函数调用的结果并不总是立即可用，您需要移动在`$.getJSON`回调中设置列表元素 HTML 的代码：

```
$.getJSON(category + ".txt", function (data) {
    while(data[i] != null) { ... }
    document.getElementById("list_" + category).innerHTML = content;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:18:00.250

将 html 附加到回调中，并在回调开始时重置 i。

```
$(document).ready(function() {

function createjson(category) {

    $.getJSON(category + ".txt", function(data)
    {
        var content = "";
        for(i=0; i<data.length; i++)
        {
            content = content + '<li class="liste"><a target="_blank" class="liste" href="' + data[i].url + '">' + data[i].name + '</a></li>';
        }
        document.getElementById("list_" + category).innerHTML = content;
    }); 

}

createjson("cat1"); 

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:18:39.043

使用它`!==`来比较不等于 NULL

```
 while(data[i] !== null) {
            content = content + '<li class="liste"><a target="_blank" class="liste" href="' + data[i].url + '">' + data[i].name + '</a></li>';
            i++;
        } 
```

# google-chrome - 想从谷歌浏览器监控 Https 流量

> ID：13306079
> 
> 赞同：3
> 
> 时间：2012-11-09T10:15:10.487
> 
> 标签：google-chrome, https

我想监控从谷歌浏览器发出的 Https 流量。有没有可能为了类似的目的用 C++ 编写一些东西，比如一些钩子。当我尝试挂接[ws2_32::WSASend](http://msdn.microsoft.com/en-us/library/windows/desktop/ms742203%28v=vs.85%29.aspx) API 并在 chrome 中加载我的 dll 时，它会导致崩溃。看起来 chrome 保护了 Windows API 的挂钩。我对 API 更感兴趣，而不是像 fiddler 这样可以显示 Https 流量的应用程序。

我也看到了 google 的 native-client 选项，但认为它没有用，因为任何扩展都需要使用 google web store 进行部署，这在我的情况下是不可能的。

# php - “无效的配置字段后端模型”magento如何找到丢失的部分

> ID：13306081
> 
> 赞同：2
> 
> 时间：2012-11-09T10:15:13.870
> 
> 标签：php, linux, magento-1.7, magento

我有 Magento 版本。安装了 1.7.0.2，有几个扩展。安装新主题时，该主题中包含一些扩展。（Ves Hitec 使用“magento_easy_tabs-1.1”、“Mpycho_Jquery_Lightboxes-1.2.0”、“Venustheme_ProductScroll-1.1.0”）似乎是“Venustheme_ProductScroll-1.1.0”导致了问题。当点击 Ves_extension>productscroll>configuration 时，我会收到“处理您的请求时出错”错误（其他菜单选项正常）。在前端主页上，我得到“内部服务器错误”-产品页面正常。

我已经搜索了将近 2 周，包括尝试与供应商/开发人员取得联系但没有运气！！

我认为这是一些冲突，并不难解决，请引导我走向正确的方向。

这是错误：

```
 a:5:{i:0;s:105:"Invalid config field backend model: venustheme_productscroll/system_config_backend_productscroll_checkQty";i:1;s:2024:"#0 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Adminhtml/Block/System/Config/Form.php(328): Mage::throwException('Invalid config ...')
#1/usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Adminhtml/Block/System/Config/Form.php(229): Mage_Adminhtml_Block_System_Config_Form->initFields(Object(Varien_Data_Form_Element_Fieldset), Object(Mage_Core_Model_Config_Element), Object(Mage_Core_Model_Config_Element))
#2/usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Adminhtml/Block/System/Config/Form.php(164): Mage_Adminhtml_Block_System_Config_Form->_initGroup(Object(Varien_Data_Form), Object(Mage_Core_Model_Config_Element), Object(Mage_Core_Model_Config_Element))
#3 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Adminhtml/Block/System/Config/Edit.php(92): Mage_Adminhtml_Block_System_Config_Form->initForm()
#4 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Adminhtml/controllers/System/ConfigController.php(107): Mage_Adminhtml_Block_System_Config_Edit->initForm()
#5 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Adminhtml_System_ConfigController->editAction()
#6 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('edit')
#7 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#8 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#9 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#10 /usr/local/pem/vhosts/102089/webspace/httpdocs/magento/index.php(104): Mage::run('', 'store')
#11 {main}";s:3:"url";s:120:"/magento/index.php/admin/admin/system_config/edit/section/venustheme_productscroll/key/0ab4cfadfe0b55f2cca35f94d7f388ed/";s:11:"script_name";s:18:"/magento/index.php";s:4:"skin";s:5:"admin";}  here 
```

# java - 如何在带注释的 UIThreadTest 方法中说 waitForIdleSync()

> ID：13306084
> 
> 赞同：0
> 
> 时间：2012-11-09T10:15:22.347
> 
> 标签：java, android, testing, user-interface

在我的测试项目中，所有方法都没有注释`UiThreadTest`，优点是我可以执行点击和其他任何操作，然后等待`getInstrumentation().waitForIdleSync();`UI。但缺点是我的ui中的一个按钮打开了一个对话框，它`getActivity()`在他的构造函数中调用 - 这个方法返回null，因为我的测试方法没有注释`UIThreadTest`，当我添加它时，对话框打开，但我不能使用`waitForIdleSync`。

**那么是否有任何等效的代码来等待带有此注释的 ui**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:02:05.780

根据我的经验，最好限制您使用此注释，我倾向于运行任何需要在可运行文件中与 Ui 线程交互的代码，格式如下：

```
getInstrumentation().runOnMainSync(new Runnable() {
    @Override
    public void run() {
        //code that needs to run on UI thread
    }
}); 
```

然后，您可以在执行任何操作之前和之后使用 waitForIdleSync。

# node.js - 正文解析器错误。

> ID：13306086
> 
> 赞同：1
> 
> 时间：2012-11-09T10:15:31.217
> 
> 标签：node.js, jquery, express

我没有让 Express 中的 Bodyparser 中间件工作。可能是什么问题？

我的代码：

节点.js：

* * *

```
var express = require('express')
, app = express()
, expressLayouts = require('express-ejs-layouts');

app.set('view engine', 'ejs');
app.set('layout', 'myLayout'); // defaults to 'layout'     

app.use(expressLayouts);
app.use(app.router);

app.use(express.bodyParser());  // <- Problem with this

app.get('/', function(req, res){
    res.render('aView.ejs', { layout: 'template.ejs' }) // it renders HTML & script
});

app.post('/myroute/', function(req, res) {
    console.log("output if this works");  // this works

    if(req.body)   // this results in false
        console.log("From client: "+ req.body.param(1, null) );  
    else          // else is run
        console.log("Client to server AJAX doesn't work");   

    res.send( JSON.stringify({ test : 'Server to client AJAX work'}) );  // works
});

console.log("Node.js server is running"); 
app.listen(3000); 
```

客户端代码 (jQuery 1.7.1)

```
function test()
{
    alert("this 2");  // this works
    getA(function(dat) 
    {
        alert("this 4: "+dat.test); // this works
    });  
}

function getA(callback) {
    $.ajax({
    url: '/myroute/',
        type: 'POST',
        dataType: 'json',
        data:  ['test 1','2', '4', '6'], 
        success: function(data) { if ( callback ) callback(data); },
        error: function() { if ( callback ) callback(null); },
        complete: function() { alert("Klart"); } 
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:37:10.380

你在 body 解析器之前有路由器（所以当它到达你的处理程序时，bodyParser 还没有被调用。）将 bodyParser 放在 app.router 之前

# android - 时间格式根据手机时间设置变化

> ID：13306087
> 
> 赞同：1
> 
> 时间：2012-11-09T10:15:33.433
> 
> 标签：android, time, time-format

我有一个字符串，它从数据库中返回日期和时间为`2012-11-09 13:20:17`. 现在我需要从数据库字符串中获取时间并显示时间，例如`13:20:17 pm`电话时间设置是否为`24 hour`，如果电话时间设置为，`12 hour`我应该将其显示为`01:20:17 pm`. 通过这行代码可以得到时间格式，显示是24小时还是12小时

```
String timefrmt = Settings.System.getString(context.getContentResolver(),Settings.System.TIME_12_24);
SimpleDateFormat timesettingsFormat=new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
date="2012-11-09 13:20:17";
Date myDate=null;
try {
     myDate=timesettingsFormat.parse(date);
} catch (ParseException e1) {
     // TODO Auto-generated catch block
     e1.printStackTrace();
} 
if(timefrmt==null){
     timefrmt="hh:mm aa";
}
SimpleDateFormat timeFormat=new SimpleDateFormat(timefrmt);
String time=timeFormat.format(myDate); 
```

我尝试过的示例代码在上面，但它崩溃了。谁能帮我找到解决办法。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:21:15.820

试试这个

```
public static String dateFormateNote(String date) 
{   

    try {
          DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
          DateFormat df2 = new SimpleDateFormat("hh:mm:ss");
          return df2.format(df1.parse(date));
        }
        catch (ParseException e) {
          return date;
        }
} 
```

# windows-phone-7 - 如何更改 Windows Phone 7 Web 客户端请求上的“NativeHost”字符串

> ID：13306090
> 
> 赞同：3
> 
> 时间：2012-11-09T10:15:39.160
> 
> 标签：windows-phone-7, webclient

我使用 WebClient 处理来自 WP7 应用程序的大部分请求。根据 Google App Engine 日志，UserAgent 是“NativeHost”。我想改用 appname、appversion + phone。

使用 WebClient 或 GZip WebClient 时是否可以更改此字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:45:03.510

好的，当前的工作解决方案：

```
var headers = new WebHeaderCollection();
// http://dotnetbyexample.blogspot.fi/2011/03/easy-access-to-wmappmanifestxml-app.html
var am = new Util.AppManifest(); // gets appmanifest as per link above
var maker = Microsoft.Phone.Info.DeviceStatus.DeviceManufacturer;
var model = Microsoft.Phone.Info.DeviceStatus.DeviceName;

 headers["user-agent"] = string.Format("{0} {1} {2} AppVersion {3}",
                                       maker, model, "WP7.5", am.Version);

WebClient c = new WebClient();
c.Headers = headers; 
```

现在，让我们看看我能获得多少关于运行该应用程序的手机的信息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:05:26.373

是的，您必须在[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)类上手动指定 UserAgent 字符串。

```
WebClient client = new WebClient ();

client.Headers.Add ("user-agent", "My App; V=2.1, PhoneType"); 
```

显然，您需要指定/派生要在 UserAgent 中使用的值（AppName、Version 和 Phone）。

# c# - .Net 客户端的免费短信网关

> ID：13306091
> 
> 赞同：10
> 
> 时间：2012-11-09T10:15:40.537
> 
> 标签：c#, asp.net, sms, sms-gateway

有谁知道可以使用 C# 客户端访问的任何好的免费短信网关？

我还需要一些 C# 示例包装器来与短信网关交互以发送和接收短信。

提前致谢。S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:22:01.793

看看这些网关：

[http://www.intellisoftware.co.uk/sms-gateway/](http://www.intellisoftware.co.uk/sms-gateway/)

[http://www.ozekisms.com/](http://www.ozekisms.com/)

[http://www.redoxygen.com/developers/c-sharp/](http://www.redoxygen.com/developers/c-sharp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T12:06:22.640

您也可以使用[https://codecanyon.net/item/wordpress-sms-gateway/16935285](https://codecanyon.net/item/wordpress-sms-gateway/16935285)

据我了解，它是一个完整的 SMS 网关，您可以将其安装在您的 WordPress 网站中，并通过 CURL 从任何其他网站使用。SMS 消息由您连接到 WordPress 网站的 Android 设备发送。

# groovy - 在 groovy 中复制列表列表

> ID：13306099
> 
> 赞同：5
> 
> 时间：2012-11-09T10:16:24.303
> 
> 标签：groovy

我想执行一个副本并获得两个不同的对象，这样我就可以在不影响原件的情况下处理副本。

我有这个代码（groovy 2.0.5）：

```
def a = [[1,5,2,1,1], ["one", "five", "two", "one", "one"]]
def b = a
b.add([6,6,6,6,6,6])
println a
println b 
```

产生：

```
[[1, 5, 2, 1, 1], [one, five, two, one, one], [6, 6, 6, 6, 6, 6]]
[[1, 5, 2, 1, 1], [one, five, two, one, one], [6, 6, 6, 6, 6, 6]] 
```

似乎 b 和 a 实际上是同一个对象

我可以用这种方式修复它：

```
def a = [[1,5,2,1,1], ["one", "five", "two", "one", "one"]]
def b = []

a.each {
    b.add(it)
}

b.add([6,6,6,6,6])
println a
println b 
```

这产生了我想要的结果：

```
[[1, 5, 2, 1, 1], [one, five, two, one, one]]
[[1, 5, 2, 1, 1], [one, five, two, one, one], [6, 6, 6, 6, 6]] 
```

但现在看看这个，我想要原始对象和具有唯一和排序元素的副本：

```
def a = [[1,5,2,1,1], ["one", "five", "two", "one", "one"]]
def b = a

b.each {
    it.unique().sort()
}

println a
println b 
```

产生：

```
[[1, 2, 5], [five, one, two]]
[[1, 2, 5], [five, one, two]] 
```

如果我这次尝试相同的修复它不起作用：

```
def a = [[1,5,2,1,1], ["one", "five", "two", "one", "one"]]
def b = []

a.each { 
    b.add(it)
}

b.each {
    it.unique().sort()
}

println a
println b 
```

仍然产生：

```
[[1, 2, 5], [five, one, two]]
[[1, 2, 5], [five, one, two]] 
```

这是怎么回事 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:22:35.347

只需调用`b = a`集合`b`作为列表的相同实例（包含相同的列表实例）`a`

使用方法 b 调用第二种方法`a.each { b.add(it) }`指向不同的 List 实例，但其内容与`b`中的列表实例相同`a`

你需要的是这样的：

```
def b = a*.collect()

b.each {
  it.unique().sort()
} 
```

所以`a*.collect()`为每个列表创建一个新的列表实例`a`

您也可以在一行中执行此操作：

```
def b = a*.unique( false )*.sort( false ) 
```

传递`false`并[停止那些更改原始列表的方法](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28boolean%29)`unique`，并强制它们返回新的列表实例。`sort`

[（确实，你们当中的细心的人会注意到`sort`不需要`false`传递给它，因为我们已经有了一个新实例，多亏了`unique`）]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T05:35:24.327

Groovy 有[`Collection#collectNested`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#collectNested%28groovy.lang.Closure%29)，这是 的递归形式[`#collect`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#collect%28groovy.lang.Closure%29)。这将创建任意深度列表的副本。在 1.8.1 版本之前，它被称为[`#collectAll`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#collectAll%28groovy.lang.Closure%29).

```
final a = [
    'a', [ 'aa', 'ab', [ 'aba', 'abb', 'abc' ], 'ac', 'ad' ], 'b', 'c', 'd', 'e'
]

final b = a.collectNested { it }
b[0] = 'B'

final c = a.collectNested { it * 2 }
c[0] = 'C'

assert a as String ==
    '[a, [aa, ab, [aba, abb, abc], ac, ad], b, c, d, e]'

assert b as String ==
    '[B, [aa, ab, [aba, abb, abc], ac, ad], b, c, d, e]'

assert c as String ==
    '[C, [aaaa, abab, [abaaba, abbabb, abcabc], acac, adad], bb, cc, dd, ee]' 
```

# c# - 在来自同一 MySQL 服务器的不同数据库的两个表中执行查询并连接

> ID：13306100
> 
> 赞同：0
> 
> 时间：2012-11-09T10:16:24.777
> 
> 标签：c#, mysql, sql, database

我需要通过连接来自同一服务器的不同数据库的两个表来执行查询（仅选择）。

例如查询将类似于：

```
SELECT * FROM DB1.tbl_a LEFT JOIN DB2.tbl_b ON   DB1.tbl_a.fieldX = DB2.tbl_b.fieldY WHERE .... 
```

其中`tbl_a`，分别`tbl_b`是来自 2 个不同数据库的 2 个`DB1`表`DB2`

**怎么做？**如何连接到 MySQL 服务器而不在连接字符串中指定数据库但在 sql 查询中使用`C#`.?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:20:25.477

其实这个问题已经回答过了，下面是答案：

是的，假设帐户具有适当的权限，您可以使用：

```
SELECT ...
  FROM A.table t1
  JOIN B.table2 t2 ON t2.column = t1.col 
```

您只需要在表引用之前加上它所在的数据库的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:54:03.153

> > 我需要通过连接来自同一服务器的不同数据库的两个表来执行查询（仅选择）。

对于此 SQL 用户，可以访问两个数据库。

**查询将是这样的：**

SELECT * FROM [DB1].[dbo].[tbl_a] T1 LEFT JOIN [DB2].[dbo].[tbl_b] T2 ON T1.fieldX = T2.fieldY WHERE ....

# javascript - 2列布局，如何让一列与CSS匹配其他高度

> ID：13306101
> 
> 赞同：0
> 
> 时间：2012-11-09T10:16:26.757
> 
> 标签：javascript, jquery, html, css

好吧，我有一个不常见的布局，它是一个包装元素，有 2 列并排浮动`float:left`，两列都设置了。我的问题不在于让任何一个元素与页面底部对齐。问题是，当任何一个元素大于页面并超过`100%`And 的边界时，这两个元素都不是问题，因为我希望左手元素与右手元素一起拉伸。

到目前为止我所拥有的是[http://v2.newyorkbarshow.com](http://v2.newyorkbarshow.com)

正如您所看到的，左侧的元素已经从页面中流出，这是预期的，不是真正需要的，而是预期的，因为它设置为，`height:100%;min-height:100%;`但它也被从顶部向下推了一个边距，因为标题元素是一个绝对位置元素。事实上，左右两侧都以相同的方式向下推，并且都具有上述相同的高度设置。因此，如果他们没有被边缘压低，他们将自己设定为 100% 的等价物。所以就像我说的，不希望的副作用，但在意料之中。

您还会注意到，在此示例中，右侧现在延伸得更远，因为其中有内容将其向下推。虽然左侧保持在 100%，所以我想知道是否有向下推左列以匹配右列伸展的情况，或者这是我要么 A）坚持，要么 B 需要其他的东西比CSS干预来处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:20:29.677

尝试将以下内容放在两列之后

```
<div style="clear: both"></div> 
```

# jquery - 错误消息：无法获取属性“替换”的值：对象在 IE9 中为空或未定义

> ID：13306102
> 
> 赞同：2
> 
> 时间：2012-11-09T10:16:37.393
> 
> 标签：jquery, internet-explorer-9

我已经编写了一些 jQuery 来获取图像的 alt 描述，然后去掉空格并将 & 替换为“and”，并将“/”替换为“-”。以下在 Firefox 和 chrome 中运行良好，但 IE9 我得到了这个：错误消息：无法获取属性“替换”的值：对象为空或未定义

```
$(".cruiseline").bind("click", function () {
    var altTag = $(this).children("img").attr("alt");
    var logosrc = altTag;
    var logosrc = logosrc.replace(/ /g, '').replace(/\//g, '-').replace("&", "and").toLowerCase();
    $("#cloudfive").html("<img src=\"/logos\/" + logosrc + ".jpg\" />");
}); 
```

我意识到 logosrc 被视为未定义，但它不应该是。我是否滥用了 .replace 功能？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:53:28.620

我的 jQuery 上方有这一行，删除了内部 html

```
$("#cruiselines").html(""); 
```

在 div 的父级中，我单击以获取 img alt，在 firefox 和 chrome 中它是宽容的，但在 IE 中，它说 alt 未定义，因为该元素不再存在。我太傻了……谢谢你的帮助

# javascript - 显示我的 div 字符串并追加

> ID：13306107
> 
> 赞同：2
> 
> 时间：2012-11-09T10:16:48.150
> 
> 标签：javascript, jquery

如何显示我的 div 清空然后附加到它的字符串表示？

```
 var x = $('#myDiv').outerHTML(); 
x = x.empty().append('<h1>test</h1>');

//result must look like  <div id="myDiv"><h1>test</h1></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:18:10.187

您需要jquery 的[**html()**](http://api.jquery.com/html/)方法`assign html and previous html / text if exists will be removed`。

**[现场演示](http://jsfiddle.net/mS7BX/)**

```
$('#myDiv').html('<h1>test</h1>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:49:34.540

您需要将 div 添加到父级。首先创建你想要的 div：

```
var myDiv = $('#myDiv').empty().append("<h1>test</h1>"); 
```

将其添加到容器中：

```
var outerHTMLDiv = $("<div></div>").append(myDiv).html(); 
```

outerHTMLDiv 现在是

```
 <div id="myDiv"><h1>test</h1></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:17:36.920

html() 方法将覆盖现有数据

```
$('#myDiv').html("<h1>asasas</h1>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T11:35:01.100

也许我完全误解了你想要什么，或者我不是完全疯了。但是，这是`function`我为你准备的。如果我离开了，请在下面发表评论，我将删除此答案。也就是说，这就是我认为你想要的。

还有一个[jsbin](http://jsbin.com/axebiy/1/edit)。

HTML

```
<div id="myDiv" class="some_class">Some content already exists</div> 
```

最终目标：想要清空内容，在它的地方想要显示它是如何写入的，`html`并附加一些更多的文本。您的输入是`id`元素的。

这是 jQuery

```
$(document).ready( function(){
    var id_to_change = 'myDiv';
    var content_to_add = '<h1>Test</h1>';
    show_details(id_to_change, content_to_add);
}); 
```

这是函数定义

```
function show_details( id, text ){
  var $el = $('#'+id);
  var lt = '&lt;';
  var gt = '&gt;';
  var tag = $el.prop('tagName').toLowerCase();

  // This is messed up, but I dunno how else to do it easily
  $el.text( text );
  var text_with_tags = $el.html();
  $el.text('');

  $el.append(lt+tag);

  var el = document.getElementById(id);  
  for (var attr, i=0, attrs=el.attributes, l=attrs.length; i<l; i++){
    attr = attrs.item(i);
    $el.append(' '+attr.nodeName+'="'+attr.nodeValue+'"');
  }

  $el.append(gt+text_with_tags+lt+tag+gt);
} 
```

一旦函数运行， div 的实际内容将是

```
<div class="some_class" id="myDiv"><h1>Test</h1><div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T10:20:13.270

您也可以使用[wrapInner()](http://api.jquery.com/wrapInner/)

```
 $("#id").empty().wrapInner('<h1>test</h1>')​​ 
```

# iis - IIS 服务器加载旧文件？

> ID：13306108
> 
> 赞同：1
> 
> 时间：2012-11-09T10:16:59.403
> 
> 标签：iis, iis-6, c#

我已经安装了 IIS 服务器 6.0，并且还在上面部署了我的网站。虽然我对代码做了一些改动，**但是服务器还是加载了旧版本的文件**。

设计器页面中所做的更改正在反映，但`.cs`页面没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:41:49.003

尝试使用重新启动 IIS 服务器`iisReset`

尝试清除以下文件夹`bootdrive:\%windir%\Microsoft.NET\Framework\v2.0.5 0727\Temporary ASP.NET Files`

# javascript - YUI 等价于 removeAttribute() JavaScript 方法

> ID：13306116
> 
> 赞同：0
> 
> 时间：2012-11-09T10:17:32.703
> 
> 标签：javascript, yui

YUI 相当于下面的 JavaScript 代码是什么？

```
document.getElementById("myDiv").removeAttribute("id"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T12:35:02.047

我猜你的意思是YUI2。但如果你指的是 YUI3，它与 DOM 方法完全一样：

```
Y.one('#myDiv').removeAttribute('someAttribute'); 
```

您可以在 API 文档中阅读所有 Y.Node 方法的列表：http: [//yuilibrary.com/yui/docs/api/classes/Node.html](http://yuilibrary.com/yui/docs/api/classes/Node.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:52:25.233

YUI2没有这个，但如下：

[http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_getAttribute](http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_getAttribute) http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_setAttribute

编辑：你为什么不喜欢 removeAttribute？它已完全支持跨浏览器：http://www.quirksmode.org/dom/w3c_core.html#t118

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:53:30.963

`YAHOO.util.Dom.get("myDiv").removeAttribute("id");`

# asp.net-mvc-2 - C# MVC2 DropDownListFor 提交后的错误

> ID：13306122
> 
> 赞同：2
> 
> 时间：2012-11-09T10:18:03.287
> 
> 标签：asp.net-mvc-2

我正在尝试使用下拉菜单修复 MVC2 页面上的错误。我的问题是，提交表单后，我在模型服务器端更改了下拉列表的值，但是当再次呈现视图时，未选择新值。

我在视图中定义了我的下拉列表，如下所示。

```
<%= Html.DropDownListFor(m => m.MyValueId, MyHelperClass.GetMyDropdown())%> 
```

我有一个帮助类来生成我的下拉列表，函数看起来像这样。

```
public static List<SelectListItem> GetMyDropdown()
{
    List<SelectListItem> options= new List<SelectListItem>();
    options.Add(new SelectListItem { Text = "None", Value = string.Empty });
    options.Add(new SelectListItem { Text = "MyValue", Value = "1" });
    //and more options added in the same way
} 
```

在我的视图页面上，我还有一个提交按钮，允许用户重新计算我的下拉列表的值。当用户单击按钮时，表单被提交，控制器动作如下所示。

```
[HttpPost]
public ActionResult MyViewName(MyModel model, string submitButton)
{
    //check for my submit button value
    if(submitButton == "Recalculate")
    {
        int newValue = 0;
        //some logic to set the new value
        model.MyValueId = newValue;
    }
    return View(model);
 } 
```

当我调试我的代码时，我可以看到在模型中创建并正确设置了新值。我可以在我的下拉生成方法中看到该列表已正确创建，并且存在具有我的新值的选项。在视图中，我可以调试并查看模型仍然具有正确值，但由于某种原因，下拉菜单始终是第一个选项 - Text =“None”Value =“”。

我试图尽可能地简化我的代码以避免混淆，但如果需要我会更详细地解释。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:55:48.540

做一个`ModelState.Clear()`之前`return View(model)`。
来源：http: [//blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

这不是错误，这是设计使然...

# php - 如何在不暴露源文件位置的情况下播放 mp3 文件？

> ID：13306127
> 
> 赞同：0
> 
> 时间：2012-11-09T10:18:08.997
> 
> 标签：php, javascript, jquery, html, mp3

我想播放 mp3 文件（使用 HTML、JS、jQuery、PHP），但网站中的访问者不可能获得文件的地址并因此下载它。

我能做些什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:21:41.930

简而言之：你不能。不知何故，您必须提交文件 URL，并且具有一定背景知识的用户将使用 Firebug 之类的扩展程序来查看所有发出的 HTTP 请求。

进一步思考：只要用户能够收听声音文件，它就必须以某种方式通过网络发送。一旦它到达客户端，您现在就可以控制用户对它的操作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:23:07.560

如果您只使用这些技术，则链接可能必须始终可见，因此这实际上是不可能的。

[Jplayer](http://www.jplayer.org/)是我能想到的一个选项，如果用户对查看源等内容知之甚少，他仍然能够找到 mp3 链接，但它仍然会保留大多数人都在海湾，因为他们不知道在哪里看。

如果您**真的**想对用户隐藏它，您甚至可以将 mp3 文件嵌入到 Flash 应用程序中。虽然这特别讨厌，但它会让你得到听起来像你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:22:08.217

如果您只想播放它们，您可以将它们存储在 Flash 文件或其他文件中，甚至可以从 Icecast 服务器流式传输它们

[参考](https://stackoverflow.com/questions/11158657/how-to-prevent-idm-capturing-mp3-files)

# objective-c - 将子视图添加到零大小的 UIView

> ID：13306129
> 
> 赞同：1
> 
> 时间：2012-11-09T10:18:15.417
> 
> 标签：objective-c, ios, cocoa-touch, uiview

这是我的问题，我在我的容器视图中添加了一个子视图，而我`container view`的大小为 (0,0)，我希望我`subview`的`container view`. 我可以在不自定义我的`layOutSubviews`方法的情况下实现这个目标吗？我的代码就像是

```
- initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        mySubview = [[UIView alloc] init];
        //how to code here????
        [myContainerView addSubview:mySubview];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:01:24.320

在 iOS 6 中，你应该可以通过约束来做到这一点，但在 iOS 6 之前，我不建议在非零帧之前添加子视图，或者如果你这样做了，我建议使用`layoutSubviews`来修复它。在零大小的盒子内不可能有 4 点的边距，所以它永远不会使用弹簧和支柱正确地自动调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:25:57.570

```
- initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame];
    if (self) {
        mySubview = [[UIView alloc] init];
        mySubview.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        [myContainerView addSubview:mySubview];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:06:28.140

Rob Napier 所说的......你自己的`-layoutSubviews`会很简单：

```
-(void)layoutSubviews
{
    [ super layoutSubviews ] ;

    CGRect insetBounds = CGRectInset( self.bounds, 4.0f, 4.0f ) ;
    self.<<the inset subview>>.frame = insetBounds ;
} 
```

# objective-c - 从横向旋转到纵向 (iPad) 后 UITableView 的奇怪行为

> ID：13306130
> 
> 赞同：4
> 
> 时间：2012-11-09T10:18:20.300
> 
> 标签：objective-c, ipad, uitableview, contentoffset

我试图在方法中旋转后读取 tableview 的 contentOffset

willRotateToInterfaceOrientation：持续时间：。我使用 UITableViewController 和 tableHeaderView 中的搜索栏创建了一个示例。

场景 1：给定设备处于纵向并且我隐藏了搜索栏然后我将设备旋转到横向之后我希望不会看到 UISearchbar 和 contentOffset 保持不变。

场景 2：给定设备处于横向状态并且我隐藏了搜索栏然后我将设备旋转到纵向之后我希望不会看到 UISearchbar 和 contentOffset 保持不变。

方案 1 按预期工作。场景 2 弹出 Searchbar 并且 contentoffset 为零

有人知道为什么 ContentOffset 为零吗？我希望它是 44（搜索栏的高度）。

有没有办法解决这个问题？你会怎么做？

```
//
//  ViewController.m
//  test
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{

    //is necessary to prevent showing searchbar
    dispatch_async(dispatch_get_main_queue(), ^{

        double y = self.tableView.contentOffset.y;

        self.tableView.contentInset = UIEdgeInsetsMake(-1*y, 0, 0, 0);

        NSLog(@"y %f",y);
        NSLog(@"Begin offset %@",NSStringFromCGPoint(self.tableView.contentOffset));
    });

}

- (void)viewDidAppear:(BOOL)animated{

    self.tableView.tableHeaderView = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 44)];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:52:26.300

我想我知道问题出在哪里：

UITableView 具有默认的自动调整大小掩码。因此，在将设备从纵向旋转到横向之后，UITableView 变得越来越小（这不会改变偏移量）。如果用户现在转回纵向，则 UITableView 需要被拉伸并自动滚动到顶部。为了解决这个问题，我使用了一个变量来注册每个“用户滚动”，比如

*   scrollViewWillBeginDragging（注册）
*   scrollViewDidEndDecelerating（注销）
*   在“scrollViewDidScroll”中我检查滚动是否来自用户（如果它来自用户保存偏移值）

最后在“willRotateToInterfaceOrientation”方法中，我将临时保存的偏移量设置为 UITableView 以使其保持在同一位置。

我希望会有更好的解决方案，因为我解决这个问题的方法有点棘手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T12:12:23.323

我今天遇到了类似的问题，我找到了解决方案。声明了一个维护 tableView 的 contentOffset 的实例变量。在 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 方法调用期间保留 contentOffset 值并将其应用于 - (void)viewWillLayoutSubviews 方法。我们需要重写这个方法。

```
- (void)willRotateToInterfaceOrientation(UIInterfaceOrientation)toInterfaceOrientation      duration:(NSTimeInterval)duration
{
    self.contentOffset = self.tableView.contentOffset;
}

- (void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];
    self.tableView.contentOffset = self.contentOffset;
} 
```

这解决了我的问题，没有任何令人耳目一新的问题。

# python - 如何从python中的不同目录导入模块？

> ID：13306131
> 
> 赞同：-1
> 
> 时间：2012-11-09T10:18:21.927
> 
> 标签：python, import, directory

> **可能重复：**
> [从不同的工作目录导入 Python 模块](https://stackoverflow.com/questions/1046628/importing-python-modules-from-different-working-directory)

我想导入以下目录中的文件：

```
 E:\edX\cs6.00x\week6\ProblemSet6 
```

我在尝试：

```
import 'E:\edX\cs6.00x\week6\ProblemSet6\ps6' 
```

其中 ps6.py 是我想在 IDLE 中导入的文件，但它抱怨最后一个 ' 中的 sintax 错误，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:20:33.367

你可以

```
import sys
sys.path.append("E:\edX\cs6.00x\week6\ProblemSet6") 
```

然后简单地

```
import ps6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:19:28.913

```
import sys
sys.path.append("E:\edX\cs6.00x\week6\ProblemSet6\ps6")

import file_in_ps6.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:31:11.050

```
import imp
foo = imp.load_source('ps6', 'E:\edX\cs6.00x\week6\ProblemSet6\ps6.py')
foo.BlaBla() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:31:28.313

一种可能的解决方案是将第 m 个后缀文件放在 sys.prefix 目录中。

```
>>> import sys
>>> sys.prefix
'F:\\F-ProgramFiles\\Python-3.2.3'
>>> 
```

所以在我的情况下，目录是' **F:\F-ProgramFiles\Python-3.2.3** '。我可以在此目录中创建一个名为 **“mymodules.mth”的文件（****后缀为 .mth**），其中至少包含两行，语法如下：

```
<module1 name without module filename suffix>
<absolute file path to your module1 file>
<module2 name without module filename suffix>
<absolute file path to your module2 file>
<module3 name without module filename suffix>
<absolute file path to your module3 file>
        .
        .
        . 
```

之后，如果您重新启动一个新的 python 会话，通常您应该可以看到您的模块并能够导入您想要的模块。

问候，

达里约什

# php - Codeigniter uri 语言标识符和 form_validation 不起作用

> ID：13306137
> 
> 赞同：2
> 
> 时间：2012-11-09T10:19:04.677
> 
> 标签：php, ajax, codeigniter, internationalization, validation

我在使用 codeigniter uri 语言标识符和 form_validation 时遇到问题。

问题是当我将 $config['lang_ignore'] 设置为 FALSE 时 form_validation 停止工作。如codeigniter的wiki中所述，我已经在干净的codeigniter安装和设置uri语言标识符中进行了测试。

这是我的控制器应用程序/控制器/form_validation_test.php：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Form_validation_test extends CI_Controller {

public function __construct()
{
    parent::__construct();
}

public function index()
{   
    $this->load->view('form_validation_test_view');
}

//Get Ajax POST:
public function getPost()
{
    $result = FALSE;
    $data = NULL;

    $this->load->library('form_validation');

    $this->form_validation->set_rules('user','User','required');

    $result = $this->form_validation->run();

    $response = array(
        'result' => $result
    );

    $this->output->set_content_type('application/json')
            ->set_output(json_encode($response));
}
} 
```

查看应用程序/views/form_validation_view.php：

```
<script src="http://ci_test.localhost/js/jquery-1.8.2.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ci_test.localhost/js/ci_test.js"></script>

<form name="formulario" id="formulario" action="http://ci_test.localhost/form_validation_test/getPost">
    <input type="text" id="user" name="user" value="">
</form>

<input type="button" id="btnSubmit" value="submit">

<div id="result"></div> 
```

和 Javascript 文件 js/ci_test.js：

```
jQuery(document).ready(function(){

jQuery('#btnSubmit').click(function(){

    var postData    = jQuery('#formulario').serialize();
    var targetUrl   = jQuery('#formulario').attr('action');     

    jQuery.ajax({
        url:        targetUrl,
        data:       postData,
        type:       'post',
        dataType:   'json', 

        success:    function (data, textStatus, jqXHR) {
            res = data.result ? 'TRUE':'FALSE';
            jQuery('#result').html(res);

        }

    });
});
}); 
```

如您所见，我通过 ajax 请求发送帖子，只需获取结果并将其放在 div 中。如果将“lang_ignore”设置为 TRUE，它会起作用，但如果将其设置为 FALSE，则不会。

我观察到的另一个行为是，当一切正常时，您会在 firebug 中看到 POST 请求，但是当使用 lang_ignore 作为 FALSE 时，您可以看到 POST 请求和仍在加载的 GET 请求。我不知道为什么会发生这种情况，但也许可以帮助某人找到问题。

任何帮助，将不胜感激。谢谢大家的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:03:26.223

我找到了解决方案。

如果您将 lang_ignore 参数设置为 FALSE，则 application/core/MY_lang.php 文件中的构造函数会执行一次重定向，并且（如果我错了，请纠正我）您会丢失 POST。

因此，包括语言段直接在一个请求中进行。

```
http://ci_test.localhost/en/form_validation_test/getPost 
```

它对我有用，希望可以帮助某人

# java - 服务器在java中无法接收eof

> ID：13306139
> 
> 赞同：0
> 
> 时间：2012-11-09T10:19:13.750
> 
> 标签：java

```
FileOutputStream fos = new FileOutputStream(fileName);
InputStream is = clientSocket.getInputStream();
while ((readBytes = is.read()) != -1)
{
    fos.write(readBytes);
    System.err.println(readBytes);
}
System.err.println(readBytes);
clientSocket.shutdownOutput();
fos.close();
System.out.println("Trans complete"); 
```

客户端发送-1，但服务器无法接收-1

**我怎样才能得到所有文件**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:26:51.990

在关闭 FileOutputStream 之前调用 flush()。

# c# - 在 C# 中将一长串 int[16] 转换为 16 long int[] 的最快方法是什么

> ID：13306140
> 
> 赞同：1
> 
> 时间：2012-11-09T10:19:13.733
> 
> 标签：c#, list, transpose

我有一个很长的（10000 多个条目）结构列表，每个结构都包含一个 int[16]。我想转置数据以创建 16 个 int[] 数组，这些数组长 10000 多个条目。本质上，我想转置数据。有没有比遍历列表和创建新条目更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:31:55.253

所以你只想要一个 int[16] 的数组？

也许 linq 可以做到这一点

```
var newArray = fooArray.Select(foo => foo.IntVal).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-14T22:05:01.477

这样的事情应该做你：

```
struct Widget
{
  public int[] Values = new int[16]; 
}

public int[][] TransposeWidgets( List<Widget> widgets )
{
  int cols;
  int[][] result = new int[][];

  for ( int row = 0 ; i < 16 ; ++row )
  {
    results[row] = new int[ widgets.Count ];
    for ( int col = 0 ; col < widgets.Count ; ++col )
    {
      result[row][col] = widgets[col].Values[row];
    }
  }

} 
```

尽管只对大列表进行一次迭代可能会更快。如果它真的很大，迭代该列表可能会导致分页，这会减慢速度。

# sql - 在 XMLAGG 中使用 distinct 来复制记录

> ID：13306144
> 
> 赞同：2
> 
> 时间：2012-11-09T10:19:26.900
> 
> 标签：sql, oracle

我在 sql 中使用 XMLAGG 时遇到问题。

我有一张可以重复的多条记录的表。该表包含客户地址和客户名称。

```
Create Table cust_data(
    cust_name varchar2(30),
    cust_addr_line1 varchar2(300),
    cust_addr_line2 varchar2(300),
    cust_addr_line3 varchar2(300),
    cust_addr_type varchar2(3)); 
```

该表可能包含单个客户名称和不同地址类型的多个记录。

此外，一个客户也可能有多个相同类型的地址。

所以客户可能有类似的地址

```
cust1 address1 curr_address
cust1 address2 old_address
cust1 address3 old_address
cust1 address4 old_address
cust2 address5 curr_address
cust2 address6 old_address 
```

我有一个选择，我想以逗号分隔格式取出所有带有 old_addresses 的客户名称。

使用相同的我使用以下sql

```
 select XMLAGG(XMLELEMENT(E, cust_name || ',')).EXTRACT('//text()')
 from cust_data where cust_addr_type ='old_address'; 
```

我得到以下输出：

> cust1,cust1,cust1,cust2,

如何获得输出为

> 客户1，客户2

请帮忙。

编辑#1：

其他表可以这样取：

```
Create Table cust_info(
    cust_name varchar2(30),
    Cust_account varchar2(300),
    cust_amount_paid varchar2(300),
    cust_amount_pend varchar2(300),
    cust_payment_type varchar2(300));

Create Table payment_master_info(
    pmnt_type varchar2(30),
    pmnt_desc varchar2(300),
    pmnt_rate varchar2(300),
    pmnt_tenure varchar2(300)); 
```

查询是这样的：

```
SELECT XMLAGG(XMLELEMENT(E, CUST_NAME || ',')) .EXTRACT('//text()'),
             CD.CUST_ADDR_LINE1,
             CD.CUST_ADDR_LINE2,
             CD.CUST_ADDR_LINE3,
             CI.CUST_AMOUNT_PAID,
             CI.CUST_AMOUNT_PEND,
             CI.CUST_ACCOUNT
    FROM CUST_INFO CI, PAYMENT_MASTER_INFO PM, CUST_DATA CD
 WHERE CD.CUST_NAME = CI.CUST_NAME
     AND CI.CUST_PAYMENT_TYPE = PM.PMNT_TYPE
     AND CUST_ADDR_TYPE = 'old_address'; 
```

现在数据在这个庞大。pmnt_type 中的数据范围为 10000-15000 数据，在其他表中范围为 2100000-5000000

如果我对不同的数据应用内部查询，性能会呈指数下降。

还有其他方法吗？

编辑#2：同样在使用这个内部查询时，在执行过程中，我得到一个 ORA-19011（：字符串缓冲区太小。）错误。有什么理由...？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T10:39:46.767

您可以在内部查询中使用 DISTINCT：

```
SQL> select XMLAGG(XMLELEMENT(E, cust_name || ',')).EXTRACT('//text()')
  2   from (SELECT distinct cust_name, cust_addr_type FROM cust_data)
  3  where cust_addr_type ='old_address';

XMLAGG(XMLELEMENT
-----------------
cust1,cust2, 
```

# javascript - 用jquery添加表单

> ID：13306146
> 
> 赞同：0
> 
> 时间：2012-11-09T10:19:29.327
> 
> 标签：javascript, jquery, html, ajax

我有关于 jquery 表单的问题，我得到了*启用/禁用*和更改颜色 onclick 的代码。所以现在我只需要`(href="#")`在 jquery 中创建将创建表单*播放/显示*的链接，我的想法是创建表单，当我单击禁用时启用编辑文本它将更改文本以启用和颜色（我做了），当我单击编辑图像它将允许我编辑文本..

谢谢大家&这里是我的代码：js代码

```
function changecolor(element){
if (element.innerHTML == "Disabled"){
    element.innerHTML = "Enabled";
    element.style.color = "green";
} else {
    element.innerHTML = "Disabled";
    element.style.color = "red";
}
return false; 
```

}

HTML：

```
<h1>Edit Status: 
                 <a href="#" id="edit" onClick="return changecolor(this)" style="color: red;"><font id="enable">Disabled</font></a>
            </h1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:29:34.893

如果我理解正确，您可以通过（使用 jQuery）来实现：

```
$(document).ready(function(){
    $("#enable").on("click", function(){
        if($(this).text() == "Disabled"){
            $(this).text("Enabled").css({color: "green", background: "red"});
        }else{
            $(this).text("Disabled").css({color: "red", background: "none"});
        }

    });
}); 
```

用这个替换你的代码。使用可用的最新 jQuery 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:29:07.277

```
fxnChangeColor = function () {
    $("a").click(function () {
        if ($(".c1").css("color") == "red") {
            $(".c1").css("color", "green")
        }
        else { $(".c1").css("color", "red") }
    });
}; 
```

# iphone - 由于应用内购买而被应用商店拒绝

> ID：13306147
> 
> 赞同：8
> 
> 时间：2012-11-09T10:19:32.083
> 
> 标签：iphone, ios, app-store, in-app-purchase

我最近上传了一个应用程序，由于应用内购买而被Apple拒绝，该应用程序在应用内购买之前有一个登录页面，这是不允许的。

现在我想从应用程序中删除应用内购买，所有代码都被注释掉了，但是我如何在iTunes Connect中取消激活应用内购买。

我知道在 iTunes connect 的“管理应用内购买”部分中有一个名为“Cleared for Sale”的开关，但我的问题是这是否足以将该开关设置为否。

这是否会取消激活应用程序的任何应用内购买参考，并且是否会在没有应用内购买的情况下审查应用程序？

或者我是否必须考虑其他任何事情才能通过审查而不需要应用内购买来获得应用程序。

这是来自 Apple 的消息，触发了拒绝：

> 17.2 我们发现您的应用要求客户注册个人信息才能访问非基于帐户的功能，这不符合应用商店审核指南。具体来说，用户必须注册才能购买额外的内容。应用程序在允许访问与用户无关的应用程序功能和内容之前不能要求用户注册。需要共享个人信息的用户注册必须是可选的或与帐户特定的功能相关联。此外，请求的信息必须与功能相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:00:57.573

> 现在我想从应用程序中删除应用内购买，所有代码都被注释掉了

从应用程序代码中删除应用内购买访问点（按钮操作等）就足够了听起来你已经涵盖了。

> 如何在 iTunes Connect 中取消激活应用内购买。

删除代码后就没有必要了。但是，要删除应用内购买的内容，请执行以下操作。

1.  登录 iTunes 连接
2.  转到您应用的“管理应用内购买”
3.  选择应用内购买行
4.  选择应用程序购买屏幕编辑左上角的“删除”按钮
5.  确认并为您要删除的其他人重复

重新提交，祝你好运！

# c# - 从命令行运行一个简单的 C# 程序时，如何使用我创建的 DLL？

> ID：13306152
> 
> 赞同：0
> 
> 时间：2012-11-09T10:19:45.557
> 
> 标签：c#, dll, cmd

我需要知道如何使用命令行从命令行编译和运行 C#，但我不知道如何正确使用我制作的 DLL。DLL 是一个简单的数学文件，里面的代码是：

```
using System;

namespace SimpleMaths
{
public class Operations
{

    public static int add(int a, int b)
    {
        return a + b;
    }

    public static int substract(int a, int b)
    {
        return a - b;
    }

    public static int multiply(int a, int b)
    {
        return a * b;
    }
}
} 
```

我成功地将其编译为 DLL 文件。现在我有一个名为 sum.cs 的类，我想在其中访问这个库的方法，我确实有很多乱七八糟的代码，这些代码离正确的地方很远，所以我删除了它，这就是我现在拥有的：

```
using System;
public class sum
{
public static void Main()
{

//How can I access the methods in the SimpleMaths library???
}
} 
```

通常在 Visual Studio 中，我会添加 DLL 作为引用，然后创建对象，让我可以访问这些方法。我在网上搜索过，我发现的例子让我很困惑。我是否正确地说您不能使用命令行创建对象？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:30:13.307

MS 命令行工具是 Powershell。
[这](http://www.leeholmes.com/blog/2006/10/27/load-a-custom-dll-from-powershell/)是如何从 Powershell 交互式使用 .NET DLL 的一个很好的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:23:16.003

您需要在 VS 中添加对 DLL 的引用，然后将其放在应用程序的顶部。

```
using LibraryNamespace 
```

然后你可以从你的`sum`类中调用 DLL 中的函数

```
YourLibrary.LibraryClass.LibraryMethod 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:26:30.563

您需要在命令行中使用 /reference。

```
csc /reference:library1.dll /reference:library2.dll csfile.cs 
```

还要确保在 .cs 文件中包含命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:25:10.357

您不能直接从命令行运行 DLL。您需要将其托管在某种可执行文件 (.exe) 中。

您需要添加另一个命令行应用程序类型的项目。这将包含您的主要方法。Youi 然后应该从那里引用您的 DLL。

# jquery - 我正在尝试修改此 jquery 示例，以便仅在正确的颜色滴上接受所有颜色拖动

> ID：13306156
> 
> 赞同：1
> 
> 时间：2012-11-09T10:20:08.847
> 
> 标签：jquery, droppable

我正在尝试修改此 jquery 示例，以便仅在正确的颜色滴上接受所有颜色拖动。

代码是：

```
<script>
$(function() {
    $( "#draggable1" ).draggable({ revert: "valid" });
    $( "#draggable2" ).draggable({ revert: "invalid" });
    $( "#draggable3" ).draggable({ revert: "valid" }); 

    $( "#droppable2" ).droppable({activeClass: "ui-state-hover" });
    $( "#droppable3" ).droppable({activeClass: "ui-state-hover" });
    $( "#droppable1" ).droppable({
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    });
}); 
</script>

And the divs are:
<div id="droppable1" class="ui-widget-header">
  <p> Red drop </p>
</div>
<div id="droppable2" class="ui-widget-header">
  <p> Green drop </p>
</div>
<div id="droppable3" class="ui-widget-header">
  <p> Blue drop </p>
</div>
<div id="draggable1" class="ui-widget-content">
  <p> Red drag </p>
</div>
<div id="draggable2" class="ui-widget-content">
  <p> Green drag </p>
</div>
<div id="draggable3" class="ui-widget-content">
  <p> Blue drag </p>
</div> 
```

# django - 当我提交表单时，它会转到未知 url

> ID：13306161
> 
> 赞同：0
> 
> 时间：2012-11-09T10:20:18.333
> 
> 标签：django, django-models, django-forms, django-views

这是我的查看功能：

```
def search(request):
    c = {}
    c.update(csrf(request))
    if request.method == 'POST': 
        form = Search(request.POST) 
        if form.is_valid():
            search_query=form.cleaned_data['query']
            #1
            pi=add.add(search_query)
            return HttpResponse('polls/search.html',{'pi': pi}, c) 
    else:
        return render_to_response('polls/search.html', c) 
```

这是我的网址文件：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^search/$', 'polls.views.search'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

这是我的模板：

```
 <form action="/polls/search" method="post">{% csrf_token %}
  <p><label for="query_label">query:</label>
    <input type="text" name="query_txt" id="query_txt_id" /></p>
  <input type="submit" value="Submit" />
 </form>

 {% if pi %}
    <ul>
    {% for p in pi %}
        <li>{{p}}</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No Results are available.</p>
{% endif %} 
```

当我点击提交按钮时，它不会转到同一页面。它总是寻找另一条路径，如“民意调查/搜索”。但是，我的 url 文件中的任何地方都没有提到它。

你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:23:30.693

`action`表单帖子在param中被制作为 url 。由于您的操作参数是`/poll/search`它转到该网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:23:29.487

因为那是您指定为表单`action`参数的内容。如果您希望它转到其他地方，请在其中输入不同的值（如果您希望它转到同一页面，则根本没有值）。

# ibm-mq - iseries 上的 WMQ 7.1 客户端和使用 cobol 客户端的外部同步点管理器

> ID：13306165
> 
> 赞同：1
> 
> 时间：2012-11-09T10:20:31.570
> 
> 标签：ibm-mq

我们目前正在 iseries 上实现 WMQ cobol 客户端。MQ 客户端版本为 7.1。

该程序设置为 MQPMO_SYNCPOINT，不是多线程，并且提交控制定义设置为 qccording 到此处提供的信息：

[http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/fg13800_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/fg13800_.htm)

发出 MQput 时，消息出现在队列中，但在发出全局提交时未提交。

所以我的问题是：

我是否必须在我的系列上安装 QMGR 才能使用 IBM i 外部同步点管理器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:38:35.937

简短的回答 - 是的。

引用的信息中心页面并没有很清楚地说明该页面上记录的是*队列管理器*如何执行事务协调器的角色。通常，在担任此角色时，所有 XA 协调都由队列管理器执行。但是，通过根据链接页面上的说明配置 QMgr，它可以将 XA 协调委托给本机 IBM i 提交控制。

对于使用 XA 功能的客户端，您必须购买完整的 WMQ 服务器许可证并使用随附的授权 XA 客户端组件，或者您必须在[2011 年 10 月 4 日公告](http://ibm.co/ZerDnE)删除后的某个时间下载 WMQ 客户端的新副本该组件的许可成本。

一旦您有了 XA 客户端（付费或最近的免费版本），您仍然必须为 XA 事务管理器提供一种与 QMgr 对话的方式。例如，如果使用 WebSphere Application Server，它充当事务协调器并使用客户端的通道与 MQ 重新连接，并在失败后协调任何未完成的事务。在问题中描述的解决方案中，队列管理器与事务协调器没有任何连接，因此当它接收到事务命令时，要么在其自己的 XA 上下文中解析它们，要么将它们优化为单阶段提交。

基于从问题中收集到的少量信息，最佳解决方案是 iSeries 盒子上的 QMgr，根据链接的信息中心页面配置并与应用程序和本机 IBM i 承诺控制一起运行，将满足所有这些要求。此外，应用程序可以在绑定模式下运行，这比通过网络与 QMgr 对话更可靠、更快捷。

# jquery-ui - JQuery UI 可拖动，不能拖出 twitter 引导选项卡

> ID：13306167
> 
> 赞同：4
> 
> 时间：2012-11-09T10:20:36.367
> 
> 标签：jquery-ui, twitter-bootstrap, draggable, jquery-ui-draggable

我有`droppable`一个 twitter 引导选项卡的外部。它在父行中（但我认为这不是问题）。我无法将`draggable`标签外部拖到`droppable`. `draggable`即使在更改`zIndex`. 如果不是，`zIndex`我不知道该说服什么。

这是我的问题的一个人为的小提琴：[小提琴](http://jsfiddle.net/ashanova/UPG5F/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:46:52.520

请注意，当您忽略盒子被切断的视觉效果时，会正确触发下降。所以，这只是一个显示问题：

可拖动框的父级`.tab-content`设置为`overflow: auto`，它将隐藏其边界之外的元素并添加滚动条。将其更改为`overflow: visible`，它可以正常工作。

# linux - 从 sh 文件发送命令并通过 ssh 保持登录状态

> ID：13306174
> 
> 赞同：1
> 
> 时间：2012-11-09T10:20:45.747
> 
> 标签：linux, bash, shell, ssh

我想发送一些简单的 .sh 文件中的命令（函数），并在 ssh-ing 到远程计算机时保持登录状态。

我尝试了很多方法，但到目前为止都没有奏效。这里只有一个：

```
msh(){
    SERVER=$1
    LOCAL=10.20.1.1
    SSHF=`cat /tmp/sshf.sh`
    ssh $SERVER -R 47471:$LOCAL:22 "$SSHF; bash --login"
} 
```

我也尝试过使用管道和流等复制文件，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:40:31.850

您需要在 处预留一个终端`$SERVER`，您可以使用`-t`开关进行此操作。如果我将您的功能更改为：

```
msh(){
    SERVER=$1
    LOCAL=10.20.1.1
    SSHF=`cat /tmp/sshf.sh`
    ssh -t $SERVER -R 47471:$LOCAL:22 "$SSHF; bash --login"
} 
```

它似乎做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:24:34.743

首先`scp`像这样复制文件`scp /tmp/sshf.sh $SERVER:~`

这会将您的脚本`sshf.sh`放在您的主目录中，`$SERVER`然后您可以`ssh`进入机器并运行它`ssh $SERVER cat ~/sshf.sh`

`copy_run_stay.sh`使用`sshf.sh`包含调用的脚本`echo hello`如下所示：

```
#!/bin/bash

# get server name as argument to script
SERVER=$1
script='sshf.sh' 
# copy script to server
scp $script $SERVER:~
# run script on server
ssh $SERVER cat ~/sshf.sh
# stay on server
ssh $SERVER 
```

并会产生：

```
# run the script on laptop
laptop $ ./copy_run_stay.sh
# sshf.sh gets copied to server and ran
server $ hello 
# we are still on the server
server $ 
```

# jboss6.x - Future.get(long timeout, TimeUnit unit) 在 JBoss 6 中不返回

> ID：13306177
> 
> 赞同：2
> 
> 时间：2012-11-09T10:21:02.470
> 
> 标签：jboss6.x, java.util.concurrent, timeoutexception

嗨，JBoss 6.0 Final 中的异步方法调用有问题。

这些类如下所示：

一个只是某种包含许多对象的存储。

```
@Singleton
public class Storage {

    private Map<Integer, Object> storage = new HashMap<Integer, Object>();

    @Asynchronous
    public Future<Object> getAsync(int id) {
        Object obj = null;
        while (null == obj ) {
          obj = storage .remove(id);
        }
        return new AsyncResult<Object>(obj);
    }

    public void add(int id, Object obj) {
        storage.put(id, obj(    
    }
} 
```

然后有一个类处理某些东西并尝试从存储中找到具有给定 id 的对象。它应该等待指定的时间才能从存储中找到该id的对象。如果什么都没有，请停止搜索并继续：

```
@Singleton
public class Executor {

    @Inject
    private Storage storage;

    public void execute(int id) {

        Future<Object> fut = storage.getAsync(id);
        Object obj; 
        try {
            obj = t.get(30L, TimeUnit.SECONDS);
                    // go on processing of obj is found
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        } catch (TimeoutException e) {
            //no object can be found.
            // but we never reach this place
        }
    }
} 
```

存储中可能没有给定 ID 的对象，因此 getAsync() 方法中的循环是“无限的”。这就是为什么应该在 30 秒后抛出 TimeoutException。有趣的是，TimeoutException 永远不会被抛出。

我是否遗漏了一点，例如不要在异步方法中创建“无限”循环？

**更新：**

当我在独立应用程序上做类似的事情时，它工作正常：

```
public class Test {
    public static void main(String[] args) {
        ExecutorService executor = Executors.newFixedThreadPool(10);
        Callable<Object> task = new Callable<Object>() {
          public Object call() {
              int i = 0;
              while(i == 0) {
                  i = 0;
              }
               return null;
          }
        };
        Future<Object> future = executor.submit(task);
        try {
          Object result = future.get(5, TimeUnit.SECONDS);
        } catch (TimeoutException ex) {
            ex.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    }
} 
```

所以基本上在异步方法中做一个无限循环是可以的，因为在独立的 TimeoutException 捕获块被调用！

**更新二**

当我用`getAsync()`与此类似的方法替换该方法时，`get()`成功返回而不会抛出 TimeoutException。但这就是我所期望的！

```
@Asynchronous
public Future<Telegram> getTelegramAsync(int telegramId) {
    Telegram tlgrm = null;
    try {
        Thread.sleep(10000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    return new AsyncResult<Telegram>(tlgrm);
} 
```

任何帮助，将不胜感激！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:26:17.787

没有超时异常，因为`t.get`永远不会执行。你被困在 while 循环中`getAsync`。您需要立即返回 Future 并且在 Future-Implementation 中，您需要使用一些 countdownlatch 例如等待结果可用或超时...

# mysql - SQL 为始终为假的条件返回结果

> ID：13306191
> 
> 赞同：3
> 
> 时间：2012-11-09T10:21:44.283
> 
> 标签：mysql, sql, sqlite

我对为什么以下 SQL 语句返回一行感到困惑：

```
#MySQL
select max(1) from dual where 0 = 1

#SQLite
select max(1) where 0 = 1 
```

我真的对这个结果感到困惑。任何人都可以对这种行为有所了解吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:27:44.267

`max`没有 a的聚合`group by`总是返回一行。如果底层的行集为空，它将返回一个带有`null`. 否则，它将返回您指定的列的最大值。

该`where`子句影响计算最大值的行。它不会改变查询必须返回最大值的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:27:32.853

因为 MAX 是一个标量函数，所以它需要返回一个结果，而不是一个表结果查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:27:18.863

它返回最大值（在没有匹配行的情况下返回 NULL），因此返回的单行似乎是合乎逻辑的

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)

# jquery - 使用 jquery 撤消上次执行的功能

> ID：13306192
> 
> 赞同：4
> 
> 时间：2012-11-09T10:21:49.283
> 
> 标签：jquery, undo

是否有机会撤消最后调用函数的执行。例如我点击一个

```
<nav><a href="foo">...</a></nav> 
```

它有一个 onclick-listener，类似这样：

```
$(function() {
    $('nav a').on('click', function() {
        $('nav a').removeClass('active');
        $(this).addClass('active');
        $($(this).attr('href')).addClass('active');
        return false;
    });
}); 
```

我正在寻找可以撤消最后一个函数的执行的东西。有什么建议吗？谢谢！！！:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T13:27:42.773

使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)，即

> 命令对象对于实现多级撤消很有用——如果程序中的所有用户操作都实现为命令对象，则程序可以保留最近执行的命令的堆栈。当用户想要撤消命令时，程序只需弹出最近的命令对象并执行其 undo() 方法。

基本的 JavaScript 实现如下所示：

```
function command(instance) {    
  this.command = instance;
  this.done = [];

  this.execute = function execute() {
    this.command.execute();
    this.done.push(this.command);
  };      
  this.undo = function undo() {
    var command = this.done.pop();
    command.undo();    
  };  
} 
```

要对此进行测试，请构建简单的 DOM：

```
<ul>
    <li>first</li>
</ul> 
```

并定义一个您想要使用的命令对象。这样的对象应该包含其执行逻辑以及用于重建 DOM 先前状态的其他行为（至少在我们的示例中）：

```
var appendcommand = new command({
  execute: function(){
    $('ul').append('<li>new</li>');
  },
  undo: function(){
      $('ul li:last').remove();
  }
}); 
```

执行后：

```
appendcommand.execute(); 
```

您的页面将从

*   第一的

至

*   第一的
*   新的

同时执行：

```
appendcommand.undo(); 
```

将此页面转换为其原始状态：

*   第一的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T20:28:38.260

```
$('nav a').unbind() 
```

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

*- 或者 -*

```
$('nav a').off() 
```

[http://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:28:48.217

JavaScript 引擎不会为您保存任何以前的状态，您必须自己完成。这意味着您必须跟踪要操作的对象的先前和当前状态。

在您的情况下，您可以拥有一个“先前活动”对象的列表，然后您的“撤消”将根据该列表激活前一个元素。

我没有尝试过代码，但你应该从中得到想法。此外，如果您遇到数组问题，请查看[http://www.w3schools.com/jsref/jsref_obj_array.asp 。](http://www.w3schools.com/jsref/jsref_obj_array.asp)

```
var undoList = new Array();

function manipulate(elem) {
    $('nav a').removeClass('active');
    $(elem).addClass('active');
    //...
}

function undo() {
    if(undoList.length > 0) {
        var elemToManipulate = undoList.pop();
        manipulate(elemToManipulate);
    }        
}

function manipulateWithUndo(elem) {
    undoList.push(elem);
    manipulate(elem);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:34:54.907

尝试这个：

```
var active=0;

    if(active==0)
    {
    //write here your code
    active=1;
    }else
    {
    //write here your "undo" code
    //example: Write your code but in reverse order: addclass().removeclass().removeclass()
    active=0;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-01T16:47:18.940

```
 var clk=1; 
$(document).ready(function(){
    $("button").on('click',function(){
        if(clk%2==1){
           $('#sidebar').addClass('active');
             $(".main").css("display", "flex");
         }else{

             $('#sidebar').removeClass('active');
             $(".main").css("display", "");
        }

        clk++;
    });
}); 
```

# database - 与asp.net显示一对多关系的最简单方法是什么？

> ID：13306193
> 
> 赞同：2
> 
> 时间：2012-11-09T10:21:57.643
> 
> 标签：database, visual-studio-2010, user-controls, datalist

我正在编写一个调度网络应用程序，其中有：

*   预约表
*   用户联系表
*   技术员表
*   将约会 ID 与 usercontact_id 匹配的约会 2usercontact 表
*   将约会ID匹配到技术员ID的约会2技术员表

因此，每个约会将有 0..* 联系人和 0..* 技术人员分配给他们。

每天都会有很多预约，这些预约将按分配给预约的车辆分组。

经过一番阅读，我相信 datalist 最适合这项工作，但我不确定我将如何实现显示部分。

如何最好地利用可用的 vs.net 2010 组件来显示和编辑它们？

[http://codepen.io/anon/pen/vdzoL](http://codepen.io/anon/pen/vdzoL)

# objective-c - Objective-C 如何提供动态运行时？

> ID：13306198
> 
> 赞同：14
> 
> 时间：2012-11-09T10:22:18.823
> 
> 标签：objective-c, dynamic, binding

Objective-C 如何提供“动态”运行时？这里的“动态”指的是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T10:25:52.233

一句话：Objective-C在调用之前（在运行时）决定调用哪个方法*实现。**这个想法是方法名称*和*实现*之间的连接是动态的。例如，C++ 在编译时解析名称。

例子：

```
id object = @"1";
int i = [object intValue];

object = @1;
i = [object intValue]; 
```

在此示例中，`intValue`消息首先发送到 的实例，`NSString`然后发送到`NSNumber`. 对于这两个调用，编译器发出的代码是相同的——事实上，编译器甚至不知道它向哪种对象发送消息（因为类型是`id`）。

运行时决定调用哪个实现来从字符串或`NSNumber`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:39:27.530

动态术语是指与虚拟表的绑定。也称为后期绑定，如果绑定发生在编译时，那么接收消息的真实对象是什么并不重要，重要的是对该对象的引用类型.使用后期绑定，重要的是对象（我个人更喜欢后期绑定），所以当你重写一个方法时，如果对象属于那个类，它会被调用。考虑这个类：

```
@interface Person : NSObject

@end

#import "Person.h"

@implementation Person

- (NSString*) description
{
    return @"A good person, smart but lazy";
}

@end 
```

如果您尝试记录描述：

```
NSObject* obj=[[Person alloc]init];
NSLog(@"%@",obj); // same as NSLog(@"%@",[obj description]); 
```

这会记录“一个好人，聪明但懒惰”。如果与虚拟表的绑定是静态的，则使用超类 NSObject 的描述方法，因此您只会看到大括号之间的对象地址：

```
<Person: 0x1001083b0>   // Address of the object 
```

在 C++ 中有静态绑定，我个人认为这很烦人。Java 和 Objective-C 是动态的。

# java - GUI开发期间Java中多重继承的替代方案

> ID：13306201
> 
> 赞同：2
> 
> 时间：2012-11-09T10:22:37.003
> 
> 标签：java, gwt

我遇到了以下困境：Java中没有多重继承，但我需要它，如何避免它？

以下是我开始思考它的原因。

我需要一个具有几个特定属性和行为的文本框（处理焦点和模糊事件）。我毫不犹豫地开发了 DecoratedTextBox：

```
public class DecoratedTextBox extends TextBox implements FocusHandler, BlurHandler {
    public void onBlur(BlurEvent event) {
        //cool feature implementation
    }

    public void onFocus(FocusEvent event) {
        //another cool feature
    }

    //other cool features
} 
```

我的 GUI 开始看起来不错，但我没有考虑 PasswordTextBox。它还必须具有与 DecoratedTextBox 相同的属性和行为。但是 PasswordTextBox 是从 TextBox 继承而来的，它实际上是另一个类层次结构分支。我立刻想起如果 TextArea 也具有所有这些很酷的属性和行为等，那就太好了。

那么我的设计有什么问题导致对多重继承的思考？必须做什么才能满足上述要求？

**一些澄清**

结果，我不得不从 PasswordTextBox、TextArea 等继承来利用它们的特性（这些类来自 GWT 库）。但我不明白如何在这里编织构图。

**更新**

纠正我如果我以错误的方式理解安德斯约翰森所说的话。

解决方案应如下所示：

```
public class DecoratedTextBox extend AbstractEventHandler {
    private TextBox textBox;

    //wrap TextBox methods
    public String getText() {
        return textBox.getText();
    }
}

public class DecoratedPasswordTextBox  extend AbstractEventHandler {
    private PasswordTextBox passwordTextBox;

    //wrap TextBox methods
    //...
}

public class DecoratedTextArea  extend AbstractEventHandler {
    private TextAre textArea;

    //wrap TextBox methods
    //...
}

public abstract class AbstractEventHandler implements FocusHandler, BlurHandler {
    public void onBlur(BlurEvent event) {
        //default cool feature implementation
    }

    public void onFocus(FocusEvent event) {
        //another default cool feature implementation
    }
} 
```

**更新**

我尝试了 Anders Johansen 和 Hilbrand Bouwkamp 建议的变体，但在每种情况下，我都遇到了一个问题，即我有一个添加小部件的方法（其签名无法更改），其中一个参数是 Widget 本身。因此，如果我不是从 Widget 的子类继承，我会破坏很多类。

还在继续思考解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:10:29.690

我猜不出你喜欢添加什么样的酷特性，但是如何创建一个 TextBoxBaseDecorator 类，它看起来像：

```
public class TextBoxBaseDecorater implements FocusHandler, BlurHandler, HasAttachHandlers {
  private final TextBoxBase textBoxBase;
  private final ArrayList<HandlerRegistration> handlers = new ArrayList<HandlerRegistration>();

  /*
   * Pass the TextBoxBase extending widget to be decorated.
   */
  public TextBoxBaseDecorater(TextBoxBase textBoxBase) {
    this.textBoxBase = textBoxBase;
    textBoxBase.addAttachHandler(this);
  }

  public void onBlur(BlurEvent event) {
    //cool feature implementation
  }

  public void onFocus(FocusEvent event) {
    //another cool feature
  }

  public void onAttachOrDetach(AttachEvent event) {
     if (event.isAttached() {
       handlers.add(textBoxBase.addBlurHandler(this));
       handlers.add(textBoxBase.addFocusHandler(this));
     } else {
       for (HandlerRegistration rh: handlers) {
          rh.removeHandler();
       }
       handlers.clear();
     }
  }

  //other cool features 
```

}

您可以创建子类来为特定的小部件创建包装器，例如 TextBox、PasswordTextBox 和 TextArea。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T10:26:08.053

您应该使用接口来定义事物如何交互，并使用基类来强制行为。这样你就可以使用组合+接口来显式地获得多重继承的好处。

在您的情况下：为 TextBox 类提取一个通用接口并将其用于您的 DecoratedTextBox 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:25:57.640

如果一切都失败了，你可以这样做：

```
public class ClassA extends TextBox implements FocusHandler {
 // ...
}

public class ClassB extends ClassA implements BlurHandler {
 // ...
}

public class DecoratedTextBox extends extends ClassB  {
    //other cool features
} 
```

我假设你**想**用继承来解决这个问题。否则，您可以使用*composition*。在大多数情况下，这将是一个更好的选择。

# iphone - iOS 中背景视图的屏幕截图

> ID：13306203
> 
> 赞同：1
> 
> 时间：2012-11-09T10:22:54.197
> 
> 标签：iphone, ios

我想截取我的 iOS 应用程序的特定层（不是顶层）的屏幕截图。我知道可以使用 CALayer 的“renderInContect”方法来做到这一点。但我找到的所有示例代码都是截取当前屏幕的屏幕截图（顶部图层）。如果您对此主题有任何想法，请分享。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:25:48.867

无论您的视图是在前台还是当前未显示，都应该没有区别。采用：

```
UIGraphicsBeginImageContextWithOptions(myBackgroundView.bounds.size, YES, 0.0);
[myBackgroundView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

请记住，`UIGraphicsBeginImageContextWithOptions`它仅适用于 iOS 4.0，否则使用`UIGraphicsBeginImageContext`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:26:39.143

当您想要捕获视图屏幕截图时隐藏其他视图和控件，之后也可见（取消隐藏）您在捕获图像之前隐藏的所有控件或视图

```
- (UIImage *)captureView {

  //hide controls if needed .. here hide another all view which you not want to display
    CGRect rect = [yourBackView bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [yourBackView.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    //visible controls if needed .. here visible another all view which you want to display
    return img;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:28:00.477

```
UIGraphicsBeginImageContext(self.view.bounds.size); // You can put your view here.
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData *data = [UIImagePNGRepresentation(image) retain];
UIImage *screenShot = [UIImage imageWithData:data]; 
```

# java - 指示行为与预期不符

> ID：13306209
> 
> 赞同：0
> 
> 时间：2012-11-09T10:23:27.130
> 
> 标签：java, for-loop

这是我不太明白的代码：

```
for(int i = 0; i < (i = 1); i++)
            System.out.println("FOR " + i); 
```

我希望这段代码不会显示任何内容，而是一次输出“FOR”。

我在想 i < (i=1) 应该将 i 的值与赋值 i=1 的结果进行比较，即 1 -> 所以 1<1 是错误的 -> 退出循环而不显示任何内容。

也许这种比较的方式与我理解的不同。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:26:08.270

```
i < (i = 1) 
```

这将被评估为： -

```
0 < (i = 1)  -->   0 < 1  --> true, so for loop executes 
```

在下一次运行时，when`i++`被执行并`i`变为`2`（因为，`i`来自`1`上`(i = 1)`一次循环运行的分配。）

所以，`i < (i = 1)`

评估为： -

```
2 < 1 --> false. 
```

所以，for循环退出。

**注意： -**在您的`condition part (i < (i = 1))`中，在分配 (i = 1) 发生之前，LHS 已经被评估为 0，并存储在内存中。因此，它将保持为 0。这完全与评估顺序有关。所以赋值`i = 1`不会影响 LHS 上表达式的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:26:08.130

不，你是真的。

i < (i = 1) 是问题，因为赋值 (i = 1) 是一个布尔等式为 true: 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:27:11.287

> 我在想 i < (i=1) 应该将 i 的值与赋值 i=1 的结果进行比较，即 1

是的，它将它与您的期望进行比较。但是你初始化`int i = 0`，从而拥有`0 < 1`了 which is `true`。

# ruby - 同时运行延迟作业和 Sidekiq

> ID：13306215
> 
> 赞同：15
> 
> 时间：2012-11-09T10:23:36.443
> 
> 标签：ruby, ruby-on-rails-3, delayed-job, sidekiq

我目前使用延迟作业来异步处理作业。我没有创建工人，而是经常使用这种`.delay`方法。

我想搬到 Sidekiq，但我有太多类型的工作，无法确保所有工作都是线程安全的。所以我想并行运行 Delayed Job 和 Sidekiq，一次迁移一种类型的作业。

由于 Delayed Job 和 Sidekiq 都提供了该`.delay`方法，我该如何区分两者？还有其他潜在问题吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T04:04:37.397

对于 Sidekiq 2.17.1 及更高版本，在 Rails 初始化程序的某处，调用以下命令：

```
Sidekiq.hook_rails!
Sidekiq.remove_delay! 
```

你将只有前缀`sidekiq_delay`方法等等。

（[官方文件](https://github.com/mperham/sidekiq/wiki/Delayed-Extensions#disabling-extensions)）

* * *

对于旧版本的 Sidekiq：

将以下内容放入`config/initializers/sidekiq.rb`

```
module Sidekiq::Extensions::Klass
  alias :sidekiq_delay :delay
  remove_method :delay
  alias :sidekiq_delay_for :delay_for
  remove_method :delay_for
  alias :sidekiq_delay_until :delay_until
  remove_method :delay_until
end

module Sidekiq::Extensions::ActiveRecord
  alias :sidekiq_delay :delay
  remove_method :delay
  alias :sidekiq_delay_for :delay_for
  remove_method :delay_for
  alias :sidekiq_delay_until :delay_until
  remove_method :delay_until
end

module Sidekiq::Extensions::ActionMailer
  alias :sidekiq_delay :delay
  remove_method :delay
  alias :sidekiq_delay_for :delay_for
  remove_method :delay_for
  alias :sidekiq_delay_until :delay_until
  remove_method :delay_until
end 
```

然后你可以`sidekiq_delay`在 Sidekiq 中使用队列，并`delay`在延迟作业中调用队列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-31T15:42:46.443

对于任何寻找这个的人。我确实发现 Sidekiq 现在有一个开箱即用的设置。您需要做的就是添加`Sidekiq.remove_delay!`到`config/initializers/sidekiq.rb`

此处对此进行了描述： [https ://github.com/mperham/sidekiq/wiki/Delayed-Extensions](https://github.com/mperham/sidekiq/wiki/Delayed-Extensions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:35:19.627

似乎 Sidekiq 具有向所有类添加方法的[混合功能。](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/extensions/class_methods.rb)不是 100% 确定这将如何表现，但如果您指的是实例级别，`.delay`它可能会导致问题。`delay`

我的建议是为`sidekiq`每个作业添加库，直到您将所有作业移至其中。意思是避免同时包含两个库，如果可能的话。

# php - 如何最好地使用 php 预先填充单选按钮选择？

> ID：13306218
> 
> 赞同：4
> 
> 时间：2012-11-09T10:23:49.023
> 
> 标签：php, forms, if-statement, radio-button

我正在处理申请表。

它将预先填充个人详细信息，我们已经有了他们的详细信息。基本上，我们向他们发送一个链接到他们的表单，已经填充了他们的详细信息，然后我们只需要求他们检查表单并点击提交，如果所有信息都正确。

我有以下内容可以预先填充简单的文本框：

```
<input type="text" name="forename" id="input-forename" value="<?php echo htmlspecialchars(@$_REQUEST['forename']);?>"/>    

<input type="text" name="birthdate" id="input-birthdate" value="<?php echo htmlspecialchars(@$_REQUEST['date_of_birth']);?>" /> 
```

等等

一切都很好。

不过，我在使用单选按钮时遇到了困难。

此选择例如：

```
<label for="input-title-mr">Mr: <input type="radio" name="title" id="input-title-mr" value="Mr" /></label>
<label for="input-title-mrs">Mrs: <input type="radio" name="title" id="input-title-mrs" value="Mrs" /></label>
<label for="input-title-miss">Miss: <input type="radio" name="title" id="input-title-miss" value="Miss" /></label>
<label for="input-title-ms">Ms: <input type="radio" name="title" id="input-title-ms" value="Ms" /></label> 
```

是否有可能使用checked="" 属性和php if 语句来预先检查正确的单选按钮的好方法？

也许是这样的：

```
<label for="input-title-mr">Mr: <input type="radio" name="title" id="input-title-mr" value="Mr" checked="<?php if ( @$_REQUEST['forename'] == 'Mr' ) { echo 'checked'; }?>" /></label> 
```

我希望这是有道理的，任何帮助或建议将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:28:20.983

```
<input type="radio" name="title" id="input-title-mr" value="Mr" <?php echo ($_REQUEST['title'] == 'Mr') ? 'checked="checked"' : ''; ?>  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:33:00.603

为什么不在链接中发送 get vars？比如www.thelink.com?title=Mr.

然后使用：

```
<label for="input-title-mr">Mr: <input type="radio" name="title" id="input-title-mr" value="Mr" <?php if($_GET['title'] == 'Mr') echo 'checked'; ?>" /></label>
<label for="input-title-mrs">Mrs: <input type="radio" name="title" id="input-title-mrs" value="Mrs" <?php if($_GET['title'] == 'Mrs') echo 'checked'; ?>" /></label> 
```

ETC...

# android - 我的活动中的侦听器方法（服务中的接口）不想显示简单的消息

> ID：13306221
> 
> 赞同：0
> 
> 时间：2012-11-09T10:24:02.290
> 
> 标签：android, service, interface, listener

大家好。我的简单 Android 应用程序现在遇到了很大的问题。

我拥有的 2 个主要元素是**绑定的 Service**和主要的**Activity**。我希望 Activity 显示（通过 TextViews）服务发现某些东西的事实。为此，我在 Service 中声明了一个 Listener 接口，处理向他注册的侦听器列表，并使用特定方法通知侦听器。

**我的服务**

```
 void notifyNewElement(){
        for (Listener listener : listeners) {
            listener.handleNewElement(this);
        }
    }

    public interface Listener {
        void handleNewElement(MyService sender);
    }

    private List<Listener> listeners = new ArrayList<Listener>();

    public void addListener(Listener listener) {
        this.listeners.add(listener);
    }

    public void removeListener(Listener listener) {
        this.listeners.remove(listener);
    } 
```

**主要活动**

```
 buttonStart.setOnClickListener(
                new View.OnClickListener()
                {
                    public void onClick(View view)
                    {
                        registerListener();
                    }
                });
    buttonStop.setOnClickListener(
                new View.OnClickListener()
                {
                    public void onClick(View view)
                    {
                        unresgisterListener();
                    }
                });

    void registerListener(){
        tService.addListener(this);
    }

    void unresgisterListener(){
        tService.removeListener(this);
    }

    public void handleNewElement(MyService sender) {
        Log.d("NEW_ELEM","new element found");
        message_box.setText("new element found");
    } 
```

我当然在 Activity 中恢复了 TextViews 等，我不必在这里显示代码，因为我知道那方面一切都很好。正如您在最后一个方法中看到的那样，**Log.d() 工作正常**，该方法确实被触发了。但是当我想**更新 TextView**时，Activity**无法做到，而且**服务**停止**了他的计算。有趣的是，如果我取消注册侦听器并再次注册它（通过您可以在 Activity 中看到的 2 个按钮），则在触发 handleNewElement 时服务计算不会再停止，但 TextView 仍然没有更新（它只是不再阻塞）。

我在另一个应用程序中使用了完全相同的设置，它就像一个魅力：/

如果你们对造成所有这些麻烦的原因有任何想法，很高兴与您分享！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:34:14.570

```
public void handleNewElement(MyService sender) {
    Log.d("NEW_ELEM","new element found");
    runOnUiThread(new Runnable(){
        public void run(){
            message_box.setText("new element found");
        }
    });
} 
```

# android-layout - 如何将android颜色转换为int

> ID：13306222
> 
> 赞同：1
> 
> 时间：2012-11-09T10:24:04.023
> 
> 标签：android-layout

我正在尝试发现一种将 Android 颜色转换为 int 值的方法，但无论如何我都做不到。

有没有办法将 Android 颜色转换为 int 值？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-09T10:34:07.670

澄清：颜色目前是xml格式？

如果是这样，似乎有一个函数可以将颜色从 xml 资源中提取为整数格式：http: [//developer.android.com/guide/topics/resources/more-resources.html#Color](http://developer.android.com/guide/topics/resources/more-resources.html#Color)

```
int color = res.getColor(R.color.color_name); 
```

getColor 的参数是颜色的逻辑位置，IE ...

```
<resources>
<color>
<color_name> 
```

# java - JPA 一对多过滤

> ID：13306235
> 
> 赞同：28
> 
> 时间：2012-11-09T10:24:41.003
> 
> 标签：java, jpa, one-to-many

我们正在嵌套几个实体。但是，在检索时，我们只想获取那些处于活动状态的实体。

```
@Entity
public class System {
  @Id
  @Column(name = "ID")
  private Integer id;

  @OneToMany(mappedBy = "system")
  private Set<Systemproperty> systempropertys;
}

@Entity
public class Systemproperty {
  @Id
  @Column(name = "ID")
  private Integer id;

  @Id
  @Column(name = "ACTIVE")
  private Integer active;
} 
```

请求时，`Systemproperties`我只想获取`active`( *active = 1* ) 的属性。

环顾四周，我发现了一些[*休眠注释*](https://stackoverflow.com/a/6920847/1022141)和使用[子查询](https://stackoverflow.com/a/6564642/1022141)的可能性。但是，两者都不适合我。尽管我们目前正在使用休眠，但我正在考虑用 Eclipselink 替换它，因为我们目前必须使用急切加载，并且很可能会遇到性能问题。子查询并不能很好地工作，因为我们嵌套了几个级别。

Eclipselink 似乎有一个可以工作的[*@Customizer*](http://wiki.eclipse.org/Customizing_the_EclipseLink_Application_%28ELUG%29)注释，但是它似乎遵循与休眠`@FilterDef`注释不同的概念，并且在切换时会导致额外的开销。

`@JoinColumn`似乎不允许进一步过滤。有没有标准的 JPA 方法来解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-04-05T18:50:13.643

[使用@Where](https://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/annotations/Where.html)的另一种休眠方式：

```
@Entity
public class System {
  @Id
  @Column(name = "ID")
  private Integer id;

  @OneToMany(mappedBy = "system")
  @Where(clause = "active = true")
  private Set<Systemproperty> systempropertys;
}

@Entity
public class Systemproperty {
  @Id
  @Column(name = "ID")
  private Integer id;

  @Id
  @Column(name = "ACTIVE")
  private Integer active;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T10:50:35.283

AFAIK 没有可移植的基于 JPA 的方法来执行此操作。一个干净但有点低效的解决方案是在 Java 端做所有事情并创建一个`getActiveSystemproperties()`手动迭代映射`systempropertys`并返回一组不可变的活动属性的 getter。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T07:53:13.790

我需要在 EclipseLink 中解决类似的问题。我使用了特殊的 SessionCustomizer 并更改了 OneToMany 注释的映射条件。Maybee Hibernate 也有类似的东西。

将定制器添加到持久性单元：

```
props.put(PersistenceUnitProperties.SESSION_CUSTOMIZER,MySessionCustomizer.class.getName());
EntityManagerFactory factory = new PersistenceProvider().createEntityManagerFactory(pu.getPersistenceUnitName(), props); 
```

定制器片段：

```
public class MySessionCustomizer implements SessionCustomizer {
    public void customize(Session session) throws Exception {
        final Map<?, ?> descs = session.getDescriptors();
    if (descs != null)
    {
      // This code assumes single table per descriptor!
      for (final Object descObj : descs.values())
      {
        final ClassDescriptor desc = (ClassDescriptor) descObj;
        final Class<?> sourceClass = desc.getJavaClass();

        for (DatabaseMapping mapping : desc.getMappings())
        {
          if (mapping instanceof OneToManyMapping)
          {
            final OneToManyMapping collectionMapping = ((OneToManyMapping) mapping);

            // create default foreign key condition (nescessary):
            final DatabaseField sourceField = mapping.getSourceKeyFields().get(0);
            final DatabaseField targetField = mapping.getTargetForeignKeyFields().get(0);
            final Expression defaultFkExpression =  new ExpressionBuilder(mapping.getReferenceClass()).getParameter(sourceField).equal(eb.getField(targetField));

            // add filter condition "additionalExpression"
            final Expression finalExpression = defaultFkExpression.and(additionalExpression);

             // SET default foreign key condition and filter condition to mapping
             mapping.setSelectionCriteria(finalExpression);
          }
        }
      }
    }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T09:36:28.287

没有 JPA 方式，但您可以尝试 Hibernate filetrs：[http ://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#objectstate-filters](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#objectstate-filters)

# javascript - 不在模态屏幕内显示地图

> ID：13306236
> 
> 赞同：0
> 
> 时间：2012-11-09T10:24:41.957
> 
> 标签：javascript, jquery, google-maps

我似乎无法让我的谷歌地图显示在我的模式中。代码如下。有没有人看到什么。

我只是想将地图映射到模型窗口，没有运气！

```
var mapOptions = {                                 
          zoom: 4,                                 
          center: centered,                        
          mapTypeId: google.maps.MapTypeId.ROADMAP 
        };                                         
var map = new google.maps.Map(document.getElementById('maparea'), mapOptions;

var marker = new google.maps.Marker({                         
position: loc,                                                
map: map,                                                     
title: $json.PDMOVE[x].SCNAME                                 
   });                                                        
google.maps.event.addListener(marker, 'click', function () {  
infowindow.open(map, marker);                                 
   });                                                        
 });                                                          

$("#maparea").dialog({                           
  autoOpen:true,                                 
  modal: false,                                  
  title:'Empties',                               
  height: 550,                                   
  width: 700,                                    
  buttons: {                                     
      Close: function() {                        
       $( this ).dialog( "close" );              
      }                                          
     }                                           
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:35:01.990

确保您的目标 div 在 map 被初始化之前是可见的，
您使用的模式是否具有成功功能？所以你可以初始化地图，我很确定它会起作用，或者你通过设置超时来延迟地图初始化功能。

# delphi - 在delphi中下载csv文件

> ID：13306237
> 
> 赞同：1
> 
> 时间：2012-11-09T10:24:45.707
> 
> 标签：delphi, download, twebbrowser

使用 Indy Clients (IdHTTP) 我可以下载 csv 文件，如果我使用以下代码知道文件的实际网址，它可以完美运行（[原始代码](https://stackoverflow.com/questions/8949965/controlling-file-downloads)）：

```
procedure TForm1.Button1Click(Sender: TObject);  
  var  
  Url, LocalFile: String;  
  Strm: TFileStream;  
begin  
    Url := 'http://www.cvrda.org/boats/cvrda_handicap/cvrda_ratings_2009.csv';  
    LocalFile := 'C:\cvrda_ratings_2009.csv';  
    Strm := TFileStream.Create(LocalFile, fmCreate);  

    try  
      try  
        IdHTTP1.Get(Url, Strm);  
      finally  
        Strm.Free;  
      end;  
   except  
     DeleteFile(LocalFile);  
     raise;  
   end;  
end; 
```

[http://www.cvrda.org/boats/cvrda_handicap/cvrda_handicap.htm](http://www.cvrda.org/boats/cvrda_handicap/cvrda_handicap.htm)是网站，如果我查看页面源代码，我会得到 href：“cvrda_ratings_2009.csv”。好，易于。

但是看看这个来自 Stackoverflow 的非 Delphi 示例，[示例在这里](https://stackoverflow.com/questions/11896989/php-download-a-csv-file-directly-to-the-memory-preferably-without-curl)，网站在[这里](http://financials.morningstar.com/income-statement/is.html?t=AAPL&ops=clear)，如果我按下导出按钮，我可以手动下载 csv 文件，但是要以编程方式下载文件，我如何获取整个 url实际的csv文件？我在任何地方都找不到它。

所以我想我的问题是：有没有办法获取在 TWebBrowser 中手动下载的任何 csv 文件的整个 url？

**更新**

我希望做的是以编程方式下载 csv 文件。但我不知道 csv 文件的 url 是什么。如果我单击 TWebBrowser 中的下载按钮来下载 csv 文件，则会出现一个弹出窗口。然后我必须在弹出窗口中手动按“保存”。我希望以编程方式做到这一点。如果我知道 url，我可以使用 Indy，但是因为我不知道 csv 文件的 url，所以我必须使用 TWebBrowser。

**update(12Nov2012)** 示例 2（此示例需要一个 Tbutton 和一个 TWebBrowser 在窗体上）

```
procedure TForm1.Button1Click(Sender: TObject);
var
  ovLinks: OleVariant;
  x:integer;
begin
  WebBrowser1.navigate('http://financials.morningstar.com/income-statement/is.html?t=AAPL&ops=clear');
  //wait for page to load
  ovLinks := WebBrowser1.OleObject.Document.all.tags('A');
  if ovLinks.Length > 0 then
  begin
    for x := 0 to ovLinks.Length-1 do
    begin
    if Pos('javascript:SRT_stocFund.Export()', ovLinks.Item(x).href) > 0 then
      begin
        ovLinks.Item(x).click;
        Break;
      end;
    end;
  end;
end; 
```

Sam M 的回答帮助我理解了很多，它适用于许多网页，但不是全部。我不知道如何使它适用于上面的示例 2。在上面的示例中，我可以在以编程方式单击[“导出”](http://financials.morningstar.com/income-statement/is.html?t=AAPL&ops=clear)按钮后手动下载 csv 文件。但要在本例中以编程方式下载 csv 文件，我仍然需要 csv 文件的 url。在这种情况下如何获取 csv 文件的 url 的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:56:38.667

Web 浏览器获取 HTML 文档后，您需要遍历链接标签。根据当前页面格式，您需要比较每个链接上的 innerText 以查看您想要哪个。找到所需的链接标签后，获取 href 属性。如果网页被修改为您正在查找的链接的 innerText 被运行该网站的人更改，这将不起作用。

```
procedure Parse;
var URL : string;
    i: integer;
    Document: variant;
begin
  Document := WebBrowser.Document AS IHTMLDocument3;
  for i := 0 to Document.Links.Length - 1 do begin
    if Document.Links.Item(i).innerText = 'here' then begin
      URL := Document.Links.Item(i).href;
      Break;
    end;
  end;
end; 
```

如果将来网页开始使用标签 ID 或标签名称，那就更容易了。使用 getElementById 函数，无需遍历所有元素。

# php - 如何限制 Facebook 不从我的网页中选择图片？

> ID：13306242
> 
> 赞同：2
> 
> 时间：2012-11-09T10:25:18.123
> 
> 标签：php, facebook, facebook-opengraph

我已经应用 facebook 共享代码在 facebook 上共享东西，从用户在 facebook 上共享东西的那个页面，我提到`og:image`了 facebook 理解从网页获取图像的标签。如果我要删除这个标签，那么 facebook 会自动从网页中选择任何图像，如果我在该标签中传递一个空白值，那么 facebook 也会从网页中选择任何图像。

我不希望用户在 Facebook 上分享的任何帖子中出现任何图像。谁能帮助我，我能做些什么不让 Facebook 从网页中选择任何图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:33:32.370

您可以更改配置 apache 服务器某些方面的 .htaccess 文件，如下所示：

```
RewriteEngine on 
RewriteCond %{HTTP_REFERER} !^$ 
RewriteCond %{HTTP_REFERER} !^http://(www.)?escale-japon.com(/)?.*$ [NC] 
RewriteRule .*.(gif|png|jpg|jpeg|pdf|doc|wav|bmp|avi|mpg|mpeg|mp3|zip|rar)$ http://www.escale-japon.com/graphisme/vol.jpe [R,NC] 
```

这将禁止通过其 url 自动选择图像，但用户可以下载它们。

# java - 如何获得有条件的一对多

> ID：13306243
> 
> 赞同：0
> 
> 时间：2012-11-09T10:25:20.107
> 
> 标签：java, hibernate, annotations

设想：

```
PARENT  1.\*  CHILDREN 
```

在“一对多”中，使用注释我获取了父母的所有孩子。好的...现在孩子们已经提交了*性别（f/m）*。我希望每当我得到父对象时，我可能只会得到女性或男性。*在这种情况下如何使用oneToMany*应用条件...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:28:44.730

如何使用 Hibernate 过滤器[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#filters](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#filters)。首先为您的实体定义过滤器，然后在您需要的地方启用/禁用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:58:01.583

你可以像这样使用一些 hql：

```
from Parent left outer join children c where c.male=MALE 
```

# php - 如何检查数据库重置ID的php年份是否增加

> ID：13306245
> 
> 赞同：-2
> 
> 时间：2012-11-09T10:25:28.820
> 
> 标签：php, date

嘿伙计们，我对如何检查 php 中的年份是否增加的逻辑有疑问。例如，今天是 2012 年，下周将是 2013 年。在 php 中有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:56:18.097

此函数将采用 $id 和可选的（默认使用 1）天数。如果将提供的天数添加到下一年，$id 将设置为 0，如果是同一年，则将 $id 增加 1。

```
$id = 1;
function idCheck($id, $days = 1) {
    if(date('Y', strtotime('+' . $days . ' days')) > date('Y')) {
        $id = 0;
    } else {
        $id = $id + 1;
    }
    return $id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:30:11.123

请检查此代码

[http://codepad.org/LCpndEBL](http://codepad.org/LCpndEBL)

```
<?php
    $year = date('Y'); //get current year
    $nextYear = $year + 1;
    echo 'This year: ' . $year. ' Next year:' .$nextYear;
?> 
```

输出

```
This year: 2012 Next year:2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:38:47.143

试试这个

```
$year = date('Y'); //get current year
$nextYear = "01 Jan ".($year + 1);
$future = strtotime($nextYear);
$now = time();
$timeleft = $future-$now;
echo $daysleft = round((($timeleft/24)/60)/60); 
```

通过检查 $daysleft 计数，您可以找到

# android - Android Flipboard 样式库

> ID：13306247
> 
> 赞同：1
> 
> 时间：2012-11-09T10:25:31.433
> 
> 标签：android, flipboard

我希望在我的 android Application 应用程序中实现 Flip-board 样式效果。是否有可用的图书馆

![在此处输入图像描述](../Images/d217c632e37e9a7fb30349cab3f872cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:47:54.470

不。如果你想要这种效果，你必须自己制作。

# c++ - 使用 List 类和 Pair 类的 C++ 未定义引用错误

> ID：13306250
> 
> 赞同：0
> 
> 时间：2012-11-09T10:25:38.460
> 
> 标签：c++, class

我目前在将 Pairs 添加到我的 List 程序中遇到问题，然后将其吐出以使其在我的 scramble 程序中工作，这意味着要找到类似于 boggle 的单词，但没有设置大小，我必须生成单词/字母.

这段代码在我的 scramble.cc 程序中。

```
List history;

bool placeAlreadyUsed(int x, int y, List history)
{
 for(size_t i=0; i < history.getSize(); i++)
  {
   Pair p1 = history.get(i)
   if(p1.r == x && p1.c == y)
    return true;
  }
 return false
}

bool findUsersWord(string findThis, string alreadyFound, List &history, int maxR, int maxC)
{  
  // need to find the findThis  base case
  if (findThis == alreadyFound)
    cout << "SOLVED" << endl;
    return true;

  // need to find the first letter within the board and then progress around that.
  if (alreadyFound.empty())
  {
    for (int rows = 0; rows < maxR; rows++)
      for (int cols = 0; cols < maxC; cols++)
        // find the each character within the 
        if (theBoard[rows][cols] == findThis[0])
        {
          alreadyFound = findThis[0];
          Pair newR;
          newR.r = rows;
          newR.c = cols;
          history.add(newR);
          if (findUsersWord(findThis, alreadyFound, history, maxR, maxC))
            return true;
          else
           {
            // clear out the found Board 
            size_t temp = history.getSize()
            for(size_t i=0; i<temp; i++
            {
             history.removeAt(i);
            }
          }
        }
  }
  else
  {
    // try and find the next letters within the area around the base letter
    // spin around the letter 3 * 3 grid
    for (int x= (p1.r > 0 ? p1.r-1: p1.r); y <=(p1.r == (maxR-1) ? p1.r : p1.r+1);x++)
      for (int y= (p1.c> 0 ? p1.c-1: p1.c); x<=(p1.c == (maxC-1) ? p1.c : p1.c+1);y++)
        if ((board[x][y] == findThis[alreadyFound.length()]) && (!(x==p1.r && y==p1.c)))
          // already used letter
          if (!placeAlreadyUsed(y,x,history))
          {
            alreadyFound += findThis[alreadyFound.length()];
            Pair newR;
            newR.r = x;
            newR.c = y;
            history.add(newR, alreadyFound.length());
            if (findUsersWord(findThis, alreadyFound, history, maxR, maxC))
              return true;
            else
            {
              if (alreadyFound.length() > 1)
                alreadyFound = alreadyFound.substr(0, alreadyFound.length()-1);
              history.removeAt(history.getSize()-1);
            }
          }
    return false;
  }
  return false;
} 
```

我的 list.cc 是这段代码有问题的地方：

```
#include <iostream>
#include <cassert>
#include <cstdlib>
#include "list.h"

using namespace std;

List::Node::Node()
{
 prev = next = NULL;
}

List:: List()
{
 front = new Node()
 rear = new Node()
 front->next = rear;
 rear->prev = front;

 currentIndex=0;
 current = front->next;
 size=0;
}

List::~List()
{
 _setCurrentIndex(0);
 while(current)
  {
   Node *temp = current;
   current = current -> next;
   delete temp;
  }
//not showing deep copy function b/c it isn't important for this program
void List::add(const ElementType & item, size_t index)
{
 assert(0<=index && index <= size);
 _setCurrentIndex(index);
 size++;

 Node *born = new Node;
 born->data = item;
 born->prev = current->prev;
 born->prev->next = current;
 born->prev = born;
 current = born;
}

void List::removeAt(size_t index)
{
 assert(0<=index<=getSize());
 _setCurrentIndex(index);

 Node *old = current;
 current->prev->next = current->next;
 current->next->prev = current->prev;
 delete old;
 size--;
}

void List::remove(const ElementType & item)
{
 for(size_t i=0; i<size; i++)
  {
  _setCurrentIndex(i);
   if(find(item)<getSize())
    {
     Node *tempOld = current;
     current->next->prev = current->prev;
     current->prev->next = current->next;
     current = current->next;

     delete tempOld;
     size--;
    }
  }
}

size_t List::find(const ElementType & item) const
{
 for(size_t i=0; i<size; i++)
  {
   _setCurrentIndex(i)
   if(get(i) == item)
    return i;
  }
 return getSize();
}

List::ElementType List::get(size_t index) const
{
 assert(0 <= index < size);
 _setCurrentIndex(index);
 assert(current->next != NULL);
 return current->data;
}

size_t List::getSize() const
{
 return size;
}

void List::output(std::ostream & ostr) const
{
 for(size_t i=0; i<size; i++) 
  {
  _setCurrentIndex(i);
  ostr << current->data << " ";
  }
 ostr << endl;
}

void List:: _setCurrentIndex(size_t index) const
{
 int x;
 if(currentIndex > index)
  x = currentIndex - index;
 else
  x = index-currentIndex;

 if(index < (sizez_t)x)
  {
  current = front->next;
  curentIndex=0;
  while(currentIndex != index)
   {
   current = current->next;
   currentIndex++;
   }
  }
 else if((size-index) < (size_t)x)
  {
   current = rear;
   currentIndex = size;
   while(currentIndex != index)
    {
     current = current->prev;
     currentIndex--;
    }
  }
 else
  {
   if(currentIndex > index)
    {
    while(currentIndex!=index)
     {
      current = current->prev;
      currentIndex--;
     }
    }
   else
    {
     while(currentIndex!=index)
      {
       current = current->next;
       currentIndex++;
      }
    }
  }
} 
```

我得到的错误是 scramble.cc(.text+0x480): undefined reference to List::List(List const&)' collect2: ld returned 1 exit status make: *** [scramble Error 1

任何想法到底发生了什么以及如何解决这个问题？

编辑：我没有遗漏任何包含语句，只是没有将它们放入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:31:05.887

看起来您`list.h`可能声明了一个复制构造函数`List::List(List const&)`，并且您`scramble.cc`尝试使用它。但是，您实际上并没有在`list.cc`文件中实现复制构造函数，因此在链接时，找不到复制构造函数。您需要在以下位置实现此功能`list.cc`：

```
List::List(List const& other)
{
  // Implement this
} 
```

重要提示：当您收到类似这样的错误（`file.cc(.text+0x12AB)`并提到`ld`）时，这意味着您遇到了链接器错误。这几乎总是因为您试图使用您在一个翻译单元中声明但从未在其他任何地方定义/实现的东西。编译器阶段工作得很好，因为它通常只需要找到一个声明即可构成一个格式良好的程序，但是在将您的程序链接在一起时，链接器会因为找不到实际的实现而抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:42:52.293

虽然报告的错误是您已声明但未实现复制构造函数，但*真正的*问题是您一开始不小心尝试制作列表的副本。

这就是它发生的地方

```
bool placeAlreadyUsed(int x, int y, List history) 
```

将此更改为 const 引用，错误应该会消失。

```
bool placeAlreadyUsed(int x, int y, const List &history) 
```

声明（但不实现）复制构造函数实际上是一种“防止”您的类被意外复制的方法。[boost::noncopyable](http://www.boost.org/doc/libs/1_52_0/libs/utility/utility.htm#Class_noncopyable)使用类似的技术，将复制构造函数设为私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:27:08.443

您必须将 list.h 包含在您的 scramble.cc 中

# javascript - jQuery / Javascript 计算按键被按下的次数

> ID：13306251
> 
> 赞同：2
> 
> 时间：2012-11-09T10:25:43.470
> 
> 标签：javascript, jquery, keypress

有没有办法计算用户按下 [az][0-9] 键的次数？

我想计算他在输入文本上按下按键的次数。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:28:58.510

此代码将维护一个映射，为每个键提供按键次数：

```
var map = {};
$('input')​​​​.keyup(function(e){
    var key = e.keyCode;
    if (key>=48 && key<=90) map[key] = (map[key]||0)+1;
});​ 
```

[演示](http://jsfiddle.net/dystroy/LZVJQ/)（打开控制台）

您可以在[此处](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)找到键码和字符之间的关系。

如果您想让地图更具可读性（将字符作为键而不是键码），请执行以下操作：

```
var map = {};
$('input').keyup(function(e){
    if (e.keyCode>=48 && e.keyCode<=90) {
      var key = String.fromCharCode(e.keyCode);
      map[key] = (map[key]||0)+1;
    }
});​ 
```

[演示](http://jsfiddle.net/dystroy/7Vnup/)（打开控制台）

`val`但是在输入结束时只分析字符串（使用 获得）可能会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:30:38.023

此代码有效，替换`#yourinputid`为您输入的 id 和`keycode == '13'`您要计算的键， 13 实际上是`Enter`. 只需查看`nbr`' 值，您就会知道按键被按下了多少次。

```
var nbr = 0;
    $('#yourinputid').keypress(
       function(event)
       {     
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if(keycode == '13'){
            nbr++;  
       }
    }); 
```

祝你好运。

如果您使用`OR`语句更改条件，则可以添加多个键码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T10:35:17.237

**[演示](http://jsfiddle.net/pintu31/D2EBA/5/)**

```
$(document).ready(function() {
    var count = 0;
    $('#txt').keypress(function(event){
        var key_code = event.keyCode ? event.keyCode : event.which;
        if((key_code  >=97 && key_code  <=122) || (key_code  >=48 && key_code <=57)){
           $('#cnt').html(++count);
        }     
    });
});​ 
```

# android - 如何在 Fragment 中获取对 LocationManager 的引用

> ID：13306254
> 
> 赞同：17
> 
> 时间：2012-11-09T10:25:54.410
> 
> 标签：android, fragment, locationmanager

我有一个扩展 Fragment 并实现 LocationListener 的类。当我写

```
LocationManager myLocalManager =
(LocationManager)getSystemService(Context.LOCATION_SERVICE); 
```

我收到编译时错误，因为该方法`getSystemService`不是 Fragment 的方法。

我可以做些什么来创建`LocationManager`？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-09T10:28:41.067

在你的片段中简单地调用这个：

```
LocationManager mgr = 
(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE); 
```

因此，您只需获取 Activity 并`getSystemService()`从那里调用

**编辑：** 由于该`getActivity`方法自 API 28 以来已被弃用，您可以使用：

```
LocationManager mgr = 
    (LocationManager)getContext().getSystemService(Context.LOCATION_SERVICE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T10:39:16.220

试试这个代码片段它会工作。

**代码 ：**

```
LocationManager locationManager = (LocationManager)
getContext().getSystemService(Context.LOCATION_SERVICE); 
```

# javascript - 正则表达式中的 encodeURIComponent

> ID：13306264
> 
> 赞同：1
> 
> 时间：2012-11-09T10:26:18.597
> 
> 标签：javascript, jquery, regex, replace, encode

我有更多这样的DIV：

```
<span class="date">Fri November 9, 2012</span> 
```

所有这些都在一个var中。例子：

```
var = '
...<span class="date">Fri November 9, 2012</span>...
...<span class="date">Fri November 9, 2012</span>...
'; 
```

我尝试用包含此日期的图像替换每个日期。

我有这条线，但这不起作用：

```
ver = ver.replace(/<span class="date">(.*)<\/span>/g,'<span class="date"><img src="generateLink.php?nr='+encodeURIComponent($1)+'" /></span>'); 
```

我的问题是：我不能在**regex中使用****encodeURIComponent**吗？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:33:33.713

使用回调函数替换

```
ver = ver.replace(/<span class="date">([^<]*)<\/span>/g,
function($0,$1) {
   return '<span class="date"><img src="generateLink.php?nr='+encodeURIComponent($1)+'"   /></span>'
}); 
```

并且可以更简单

```
ver = ver.replace(/(<span class="date">)([^<]*)(<\/span>)/g,
function($0,$1,$2,$3) {
    return  $1+'<img src="generateLink.php?nr='+encodeURIComponent($2)+'" />'+$3
}); 
```**

# objective-c - 可可中的单身人士，他们是邪恶的吗？

> ID：13306268
> 
> 赞同：3
> 
> 时间：2012-11-09T10:26:31.953
> 
> 标签：objective-c, cocoa, oop, design-patterns, singleton

我在这个网站上看到了很多“单身人士是邪恶的”。这几乎让我相信单身人士是病态的骗子。但是，如果是真的，为什么可可中有这么多单例？像 shareApplication、shareManager 等等。我想知道如果我不使用单例模式，我怎么能做同样的事情。例如，确保只有一个实例并在我需要时访问它。

所以我会怀疑这句话，直到我能找出更好的方法。

请帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:51:10.073

没有一个特征或模式本质上是邪恶的。Even`goto`有它的用途，有时可以提高可读性。“单例是邪恶的”源于许多新手开发者容易误用它们的事实。所以这是一个常识，有时常识不是最好的解决方案。

在您的示例`shared...`中，技术上不是单例。您可以创建数千个实例`UIApplication`或`NSFileManager`同时创建。它们更像是服务定位器（“查找我的应用程序”、“查找我的默认文件管理器”）。这些方法为我们提供了一些有用的共享值，我们需要 99% 的时间。尽管这会使单元测试变得更加困难，但这样做的好处是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:11:51.850

Cocoa 中有如此多的单例，因为它的设计早在对所有遇到问题的事物都宣布“邪恶”和“被认为有害”很酷之前就已经设计好了。

单身人士并不完全是邪恶的。如果使用得当，它们在许多情况下都能很好地工作。您已经发现了与它们相关的问题，但这并不意味着您必须立即摆脱它们，否则世界将终结。有些项目的实际情况是这样的，所以你永远不会遇到单例的问题。

显然，当它们已经存在时，您无法避免使用库单例。每当您需要某个对象，例如 NSApplication 或 NSWorkspace 时，您应该使用它们的 sharedApplication/sharedWorkspace 方法，这就是系统框架的设计方式。

在设计自己的代码时，您可以确保对象仅由工厂创建，而不是单例，并以某种方式对一些工厂方法进行编码，以便在之前请求此类对象时它们返回先前的实例。这种设计避免了全局和单例的典型缺点，即无法用模拟代替它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:47:52.103

单例通常有助于存储您的全局数据。

然而，单例通常只是用作各种随机方法和变量的垃圾场，没有任何顺序或理由。

> [http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx](http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx)

这可能就是人们不喜欢使用 Singleton 的原因。

如果您不以混乱的行为滥用 Singleton，那么在我看来，您不应该避免使用它。

# arduino - 使用 PHP 脚本控制 Arduino Uno

> ID：13306269
> 
> 赞同：2
> 
> 时间：2012-11-09T10:26:37.840
> 
> 标签：arduino

是否可以使用 PHP 网页控制 Arduino Uno？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:33:21.440

是的你可以。您可以通过 USB 将您的 Arduino 连接到您的服务器，并使用[phpSerial](http://code.google.com/p/php-serial/)。

或者您可以使用以太网屏蔽连接到您的 Arduino。在[PHP](http://en.wikipedia.org/wiki/PHP)中，您可以[打开一个流到](http://www.php.net/manual/en/function.stream-socket-client.php)您的 Arduino。

您可以编写自己的协议进行通信，例如：

要读取模拟输入的值：

1.  PHP：发送`rA0`后跟 ('\n')。
2.  Arduino 解析`rA0`: 并将模拟输入 A0 的值以[ASCII 格式](http://en.wikipedia.org/wiki/ASCII)发送回，后跟换行符 ('\n')。

多一点解释：

1.  PHP 想要读取模拟值或[I/O](http://en.wikipedia.org/wiki/Input/output)状态，因此第一个字符是`r`（设置 I/O 端口或[PWM](http://en.wikipedia.org/wiki/Pulse-width_modulation) a `w`）
2.  要指定它是模拟 I/O 端口还是数字 I/O 端口，“A”或“D”
3.  指定端口：端口 0 的 ASCII 号。
4.  知道命令在哪里结束；发送换行符。

在 Arduino 方面；

1.  解析传入的命令。
2.  如果第一个字符不等于 'r' 或 'w' 则它不是读或写命令；所以命令无效。
3.  如果第二个字符不等于“A”或“D”，则它不是模拟值或数字值，则该命令无效。
4.  然后对于数字，如果它可以超过一个字符，则创建一个由三个字符组成的 char 数组，并填充这些直到您收到一个 '\n' 或三个以上的 ASCII 数字。您可以将`atoi()`ASCII 解析为整数。

如果是合法命令；响应命令。

# solr - 将 Solr 重复值删除到多值字段中

> ID：13306272
> 
> 赞同：16
> 
> 时间：2012-11-09T10:26:42.043
> 
> 标签：solr, indexing

我的 Solr 索引包含一个具有重复值的多值字段。如何删除重复项？

索引时是否可以将重复值覆盖到多值字段中？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T17:38:55.963

我正在努力实现同样的目标。这对我有用。将以下处理器添加到您的 solrconfig.xml

```
<updateRequestProcessorChain name="deduplicateMultiValued" default="true">
        <processor class="org.apache.solr.update.processor.UniqFieldsUpdateProcessorFactory">
            <lst name="fields">
                <str>multivaluedFieldXYZ</str>
            </lst>
        </processor>
        <processor class="solr.RunUpdateProcessorFactory" />
 </updateRequestProcessorChain> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-22T00:29:57.690

参加聚会真的很晚，但在 Solr 6.0 中，试图在多值字段上添加重复条目的最佳答案对我不起作用。它之前缺少一个处理器`UniqFieldsUpdateProcessorFactory`。所以在我的 solrconfig.xml 中添加这样的东西是可行的：

```
<updateRequestProcessorChain name="uniq-fields">
<processor class="org.apache.solr.update.processor.DistributedUpdateProcessorFactory"/>
<processor class="org.apache.solr.update.processor.UniqFieldsUpdateProcessorFactory">
  <str name="fieldName">YourFieldA</str>
  <str name="fieldName">yourFieldB</str>
</processor>
<processor class="solr.RunUpdateProcessorFactory" /> 
```

YourFieldA 和 YourFieldB 是 schema.xml 中定义的字段。请注意，您还必须将其添加到正确的`requestHandler`即：

```
 <requestHandler name="/update" class="solr.UpdateRequestHandler" >
<lst name="defaults">
  <str name="update.chain">uniq-fields</str>
</lst> 
```

这不仅可以防止添加重复项，还可以在更新指定字段时从索引中删除所有重复项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:57:59.447

您需要在客户端处理它以删除重复值。

您可以自定义实现，例如[RemoveDuplicatesTokenFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.RemoveDuplicatesTokenFilterFactory)（适用于相同位置的相同文本）以过滤掉标记。基本上写一个扩展。或者

此外，如果只使用多值字段进行分面，则分面字段中的值仅计算一次。因此，即使您添加多个相同的值，也会在构面计数条目中反映为单个值。对此进行了测试。你也可以确认。

但是，重复值会导致 lengthNorm 发生变化，因此会对评分产生影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-28T10:08:16.817

我正在使用 solrJ 绑定文档，为了避免重复值，我将多值字段定义为 HashSet。

```
@Field("description")
public Collection<String> description = new HashSet<>(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-17T15:24:55.897

在最新版本的 solr 中，您可以`add-distinct`在对多值字段进行原子更新时使用。

> add-distinct：将指定的值添加到 multiValued 字段，仅当不存在时。可以指定为单个值，也可以指定为列表。

（参考：[https](https://lucene.apache.org/solr/guide/8_8/updating-parts-of-documents.html) ://lucene.apache.org/solr/guide/8_8/updating-parts-of-documents.html ）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T11:11:22.777

或者您可以在 Solr 中处理它，但在[UpdateRequestProcessor](http://wiki.apache.org/solr/UpdateRequestProcessor)中处理它，以便它在索引之前发生，您不需要了解分析链。

您可以将 java 或多种脚本语言与[ScriptUpdateProcessor一起使用](http://wiki.apache.org/solr/ScriptUpdateProcessor)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-11T11:11:58.460

此配置适用于 Solr 5.3.1

```
<updateRequestProcessorChain name="distinct-values" default="true">
    <processor class="solr.DistributedUpdateProcessorFactory"/>
    <processor class="solr.UniqFieldsUpdateProcessorFactory">
        <str name="fieldName">field1</str>
        <str name="fieldName">field2</str>
    </processor>
    <processor class="solr.RunUpdateProcessorFactory" />
</updateRequestProcessorChain> 
```

# asp.net - IIS 托管的 WCF 服务在使用时出现 405 错误

> ID：13306273
> 
> 赞同：0
> 
> 时间：2012-11-09T10:26:42.567
> 
> 标签：asp.net, wcf, web-services

我在 IIS 7 上托管我的 WCF 服务，即使它在使用 WCF 测试客户端时工作正常，但我无法从简单的控制台应用程序使用我的服务。

我已经允许在我的 IIS 上处理 .svc 和 .wsdl 文件。我不确定我还缺少什么。

这是我的代码：

```
namespace EvalServiceLibrary {
    [ServiceContract]
    public interface IEvalService {
        [OperationContract]
        void SubmitEval(Eval eval);

        [OperationContract]
        List<Eval> GetEvals();

        [OperationContract]
        void RemoveEval(String id);
    }
}

namespace EvalServiceLibrary {
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class EvalService : IEvalService {
        #region
        List<Eval> evals = new List<Eval>();

        public void SubmitEval(Eval eval) {
            eval.Id = Guid.NewGuid().ToString();
            evals.Add(eval);
        }

        public List<Eval> GetEvals() {
            return evals;
        }

        public void RemoveEval(String id) {
            evals.Remove(evals.Find(e => e.Id.Equals(id)));
        }
        #endregion
    }
} 
```

还有我的 web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="EvalServiceLibrary.EvalService">
        <endpoint address="http://localhost/WebEvalService" binding="basicHttpBinding"
          bindingConfiguration="" name="basicHttpBinding" contract="EvalServiceLibrary.IEvalService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

这是我的客户代码：

```
static void Main(string[] args) {
            EvalServiceClient client = new EvalServiceClient();

            client.SubmitEval(new Eval() { Comments = "Lorem Ipsum", Submitter = "egarcia", TimeSubmitted = DateTime.Now });

            List<Eval> evalList = client.GetEvals().ToList();

            foreach(var eval in evalList) {
                Console.WriteLine(eval.Id);
            }

            client.Close();
        } 
```

我也可以在本地 IIS 上访问该服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:14:24.830

您的 web.config 文件中的服务端点声明存在问题。尝试这个，

```
 <service name="EvalServiceLibrary.EvalService">

    <!-- This endpoint is exposed at the http://localhost/EvalServiceLibrary/EvalService.svc-->
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="" name="basicHttpBinding" contract="EvalServiceLibrary.IEvalService" />

    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service> 
```

基本上，

1.  您的端点地址无效。事实上你不需要指定。

2.  添加 MexEndpoint。

# c# - 返回的数据类型因表中的数据而异

> ID：13306275
> 
> 赞同：3
> 
> 时间：2012-11-09T10:26:57.337
> 
> 标签：c#, .net, sql-server, ado.net

我有一个包含两列的表 - [security_role_name] 和 security_role_cd 。security_role_cd 的数据类型是 Security_Role 表中的 smallint。

我有以下数据选择逻辑。返回的数据类型根据数据的场景而有所不同：-

1.  表中没有数据
2.  表中存在一条记录

**问题**

1.  为什么在这些场景中数据类型会有所不同
2.  如何纠正它

**注意**：目前我正在使用`try..catch`来满足这种情况

代码

```
 private int GetNextRoleID(SqlConnection connection)
    {
        int? newRoleID = null;
        //string commandText = "SELECT  (MAX(security_role_cd)) AS [NewRoleID] FROM Security_Role ";
        string commandText = "SELECT  TOP 1 security_role_cd AS [NewRoleID] FROM Security_Role ORDER BY security_role_cd DESC";
        SqlCommand command = new SqlCommand(commandText, connection);
        command.CommandType = System.Data.CommandType.Text;
        SqlDataReader reader = command.ExecuteReader();
        if (reader.HasRows)
        {
            while (reader.Read())
            {
                if (!reader.IsDBNull(0))
                {
                    //newRoleID = Convert.ToInt32((reader.GetInt16(0)) + 1);

                    try
                    {
                        newRoleID = Convert.ToInt32(reader.GetInt16(0)) + 1;
                    }
                    catch
                    {
                        int result = (reader.GetInt32(0));
                        newRoleID = result + 1;
                    }
                }
            }
        }
        reader.Close();

        if (newRoleID == null)
        {
            newRoleID = 1;
        }

        return (Convert.ToInt32(newRoleID));

    } 
```

参考：

1.  [如何使用 ADO.NET 获取表中列的 SqlDbType？](https://stackoverflow.com/questions/459572/how-do-i-get-the-sqldbtype-of-a-column-in-a-table-using-ado-net?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:34:04.607

你可以看看`reader.GetFieldType(0)`。例如：

```
 int i;
    switch (Type.GetTypeCode(reader.GetFieldType(0)))
    {
        case TypeCode.Int16: i = reader.GetInt16(0); break;
        case TypeCode.Int32: i = reader.GetInt32(0); break;
        // TODO: any other cases you need to handle
        default: throw new NotSupportedException();
    } 
```

或者更简单：

```
 int i = Convert.ToInt32(reader.GetValue(0)); 
```

# javascript - d3 可变长度的过渡条形图

> ID：13306280
> 
> 赞同：2
> 
> 时间：2012-11-09T10:27:16.177
> 
> 标签：javascript, d3.js

我有一个有 8 个条形图的条形图。现在我想创建一个包含 10 个条形的条形图，其中包含一个过渡。过渡效果很好，但我的新条形图也只有 8 个条形图。我的html：

```
<html>
<head>
    <title>TransitionTest</title>
    <script src="d3.v2.js"></script>
</head>
<body>
    <script src="TransitionTest.js"></script>
    <button onclick="transitioning()">
        Transition
    </button>

</body>
</html> 
```

我的脚本：

```
var data = [0,1,2,3,4,5,6,7];

var height = 500;
var width = 1000;
var svg = d3.select("body")
        .append("svg")
        .attr("class", "svg")
        .attr("width", width)
        .attr("height", height)

var xScale = d3.scale.linear()
            .domain([0,10])
            .range([0,width]);

var yScale = d3.scale.linear()
            .domain([0,9])
            .range([height,0])

var bar = svg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", function (d,i) {
            return xScale(i);
        })
        .attr("y", function (d) {
            return yScale(d);
        })
        .attr("width", function (d,i) {
            return (99);
        })
        .attr("height", function (d) {
            return (height-yScale(d));
        })
        .attr("fill", "grey");

function transitioning() {
data = [8,6,4,2,0,9,7,5,3,1];
bar.data(data)
    .transition()
    .attr("x", function (d,i) {
        return xScale(i/2);
    })
    .attr ("y", function (d) {
        return yScale(d);
    })
    .attr("width", function (d,i) {
        return (49);
    })
    .attr("height", function (d) {
        return (height-yScale(d));
    });
} 
```

**我在做什么错**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:45:21.817

您需要使用`enter()`选择添加新条，类似于您首先添加条的方式。因此，在您的函数中`transitioning()`，您需要进行另一个调用，例如

```
bar.data(data).enter().append("rect")... 
```

您可以通过首先将高度（和/或宽度）设置为 0 来使条“出现”，然后调用`transition()`并将它们设置为实际值。有关不同选择/连接的更多详细信息，请参阅[本教程](http://bost.ocks.org/mike/join/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:03:15.223

现在我将我的转换函数更改为：

```
function transitioning() {
if (i==1){
    data = [0,1,2,3,4,5,6,7];
    i=0;
}
else if (i==0){
    data = [8,6,4,2,0,9,7,5,3,1];
    i++;
}

bar.data(data).enter().append("rect")
.attr("class", "bar")
.attr("x", function(d,i) {
    return xScale(i);
})
.attr("y", height)
.attr("height", 0)
.attr("width", 99)
.attr("fill", "grey")
.transition()
.attr("height", function(d) {
    return (height-yScale(d));
})
.attr("width", 99)
.attr("y", function(d) {
    return yScale(d);
});

bar.transition()
.attr("x", function(d,i) {
    return xScale(i);
})
.attr("y", function(d) {
    return yScale(d);
})
.attr("height", function(d) {
    return (height-yScale(d));
})
.attr("width", 99)
.attr("fill", "grey");

bar.exit().transition()
.attr("y", height)
.attr("height", 0)
.remove();
} 
```

除了 exit() 函数外，它也可以工作。每次单击我都会更改我的条形图，但较长数据的最后 2 个条不会消失。当我使用 firebug 时，我可以看到，每次切换到更长的数据数组时，都会生成 2 个新的条形元素。我怎样才能让它们被删除？

# mysql - mysql 从父级中选择子级并在另一个查询中使用它

> ID：13306282
> 
> 赞同：-3
> 
> 时间：2012-11-09T10:27:20.557
> 
> 标签：mysql, database

我有 2 张桌子。

表格1

```
category_id   name   parent_id
1             test    0
2             test1   1 
3             test2   1  
4             test3   1
5             test4   2
. 
```

表_2

```
pro_id   category_id   name
1        2            prod1
2        2            prod2
3        3            prod3
4        5            prod4
.
. 
. 
```

我需要这样做

1.  获取所有`category_id`的位置`parent_id = given...`（比如“1”）
2.  在另一个表中查询`where in (all the ids returned from 1) )`... **应该是`where in ('2,3,4')`在示例情况下**

输出

`pro_id`表 2 中（在这种情况下为 1,2,3）的所有字段..

试过这个..（希望这会奏效:)）

```
select * from TABLE_2 
where category_id in (select category_id from TABLE_1 where parent_id = 1) 
```

但没有结果。

我本可以在 PHP 脚本中完成所有这些工作。但是分页有问题。所以我想让它在一个查询中工作。

那么有可能做到这一点吗？从查询中获取结果并在单个查询中使用它？如果是这样，我将不胜感激您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:34:47.747

IN 是一个非常慢的运算符，因为 SQL 通常将其计算为一系列由“OR”分隔的 WHERE 子句（WHERE x=Y OR x=Z OR...）。

所以试试这个

```
SELECT t2.*
FROM TABLE_1 t1
LEFT JOIN TABLE_2 t2 ON t2.category_id = t1.category_id
WHERE t1.parent_id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:50:13.570

这很奇怪..但我提供的查询正在工作.... :) :)

```
select * from TABLE_2 where category_id in (select category_id from TABLE_1 where parent_id = 1) 
```

总之谢谢各位...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:33:57.653

您必须在 WHERE 子句中提供字段。

```
select * from TABLE_2 where category_id in (...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T10:45:38.597

```
SELECT t2.*
FROM TABLE_1 t1
JOIN TABLE_2 t2 ON 
t2.category_id = t1.category_id
WHERE t1.parent_id = 1 
```

但是您上面编写的查询应该可以工作。

# python - Django - 查看 JSON login_required

> ID：13306283
> 
> 赞同：3
> 
> 时间：2012-11-09T10:27:27.070
> 
> 标签：python, django, json, security, http-status-codes

我有一个使用 ajax 调用并返回 JSON 的视图。

我希望它需要身份验证。

```
@login_required
def my_view(request):
    data = some_data
    return HttpResponse(json.dumps(data), mimetype='application/json') 
```

理想情况下，如果我未通过身份验证，此视图应返回 HTTP 状态*401 Unauthorized*或类似内容，以便我的 javascript 可以正确解释响应。

要求对 Ajax 请求进行身份验证是一种好习惯吗？
如果是，我怎么能从`@login_required`装饰器那里得到这个 HTTP 状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:41:11.177

1.  这是否是一种好习惯取决于 ajax 请求所请求的资源
2.  你不必使用`login_required`装饰器，你可以简单地检查里面的凭据`my_view`。如果检查失败，则返回 401。
3.  如果您有相当多的资源，并且想在其之上构建一个 REST API 用于 Ajax 目的，请考虑使用诸如[Tastypie 之](http://tastypieapi.org)类的框架。

# mfc - 如何找到“内部应用程序错误”的原因

> ID：13306284
> 
> 赞同：0
> 
> 时间：2012-11-09T10:27:26.743
> 
> 标签：mfc

在客户的站点上，我们的应用程序有时会显示“内部应用程序错误”。

我能够得到这种情况的转储文件；不幸的是，这个文件不是很有帮助：它实际上只包含信息，在哪个事件处理程序中发生了异常。由于此事件处理程序调用了许多其他函数，因此我无法追踪异常的根本原因。

当我可以在我的 PC 上重现这样的错误时，我只需在调试器中捕获第一次机会异常，问题就很容易被发现。我也没有问题找到硬崩溃的原因（例如访问冲突），因为生成的调用堆栈直接指向崩溃的原因。

我怎样才能找到这个错误的原因（在客户现场安装小工具是一种选择）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:03:50.353

1) 使用安装在客户端机器上的 Windebugger。2）然后在您的客户端获取属于该版本的 Pdb 文件。3) 打开 Windebugger，在文件菜单下选择符号路径菜单项，从显示的窗口中 - 放置符号文件的路径。4) 打开你的转储文件 5) 在底部发出命令“！Analyze -v”

调试器将为您提供堆栈跟踪、当前指令指针位置、最后抛出的（未处理？）异常或其他错误原因

# .net - 在代码中编辑 Castle Windsor Xml 配置

> ID：13306291
> 
> 赞同：0
> 
> 时间：2012-11-09T10:28:16.150
> 
> 标签：.net, xml, configuration, castle-windsor, castle

我需要提供一种通过 GUI 编辑 Castle Windsor xml 配置的方法。我不想每次都手动更改 xml。

我想要一些强类型的自定义配置设置

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:00:06.003

您是否考虑过使用[编程注册 API](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx)而不是 XML 配置？我建议采用这种方法，而不是自动编辑您的 XML 配置。

# iphone - 在 iPhone 上拨打电话的正确 URL 是什么？

> ID：13306293
> 
> 赞同：5
> 
> 时间：2012-11-09T10:28:22.847
> 
> 标签：iphone, xcode

是在 iPhone 上自动调用的代码吗

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:11111111111"]]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T10:37:15.963

你的第二行很好，可以工作。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://1111111111"]]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T10:36:41.557

从尝试 iPhone 开始，`tel://123456789`就是要走的路。`tel:123456789`至少 Safari URL 栏甚至无法识别该选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T11:05:14.090

您只能从 Iphone 设备而不是从 ipad/ipod 拨打电话，并且您可以从 iphone 拨打号码，如下代码：-

```
NSString *value=@"your number";
NSURL *url = [[ NSURL alloc ] initWithString:[NSString stringWithFormat:@"tel://%@",value]];
[[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T02:02:21.483

**答案太多，评论相互矛盾。**

*（斜线，没有斜线，分号，电话，电话提示符？）*

**Swift**，一刀切：

```
if let phoneURL = NSURL(string: "telprompt:\(phoneNumber)") {
    if UIApplication.sharedApplication().canOpenURL(phoneURL) {
        UIApplication.sharedApplication().openURL(phoneURL)
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-02T18:53:02.767

SwiftArchitect 的回答并不适合所有人。我想实际发起一个自动呼叫，而不是提示。

所以tel和telprompt是有区别的。

`tel:`实际发起呼叫。

```
if let url = URL(string: "tel:\(phoneNumber)") {
  if UIApplication.shared.canOpenURL(url) {
    UIApplication.shared.openURL(url)
  }
} 
```

`telprompt:`提示呼叫或取消。

```
if let url = URL(string: "telprompt:\(phoneNumber)") {
  if UIApplication.shared.canOpenURL(url) {
    UIApplication.shared.openURL(url)
  }
} 
```

我不知道有什么区别。问题还要求打电话。所以这种答案会帮助我节省时间。

# algorithm - 快速、小面积、低延迟的部分排序算法

> ID：13306294
> 
> 赞同：10
> 
> 时间：2012-11-09T10:28:25.760
> 
> 标签：algorithm, sorting, vhdl, verilog, fpga

我正在寻找一种快速的方法来对 81 个数字进行部分排序 - 理想情况下，我希望提取最低的 16 个值（16 个值没有必要以绝对正确的顺序排列）。

目标是 FPGA 中的专用硬件 - 所以这有点复杂，因为我希望最终实现的区域尽可能小。我查看并实现了奇偶合并排序算法，但理想情况下，我正在寻找任何可能对我的需求更有效的东西（交易算法实现大小以获得最低 16 的部分排序，不一定按顺序而不是全排序）

任何建议都会非常受欢迎

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T10:49:30.467

这可以及时完成`O(nlog_k)`，在您的情况下，n = 81 和 k = 16。当您处理大量元素时，这比`O(nlog_n)`.

算法如下：

1.  初始化最大堆数据结构。此堆将包含您的前 16 个。此堆的大小不会超过 16，并且它具有用于插入和删除的 log(k)
2.  遍历 n 个数字的列表。对于每个 n：
    *   如果堆的元素少于 16 个，则添加它
    *   如果堆有 16 个元素，则`n`与堆中的最大值进行比较（如果大于最大值则跳过，如果小于最大值，则删除`max`并添加`n`。）

这样，在每次迭代中，您都可以从当前处理的列表部分中跟踪最小的 k 数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:48:13.550

这听起来像是某种信号处理内核。如果不知道设计中的确切数据流，很难帮助回答这个问题。任何涉及排序的算法都有地址解码成本，因为您需要能够写入和读取 81 个元素的内存。如果此数据在内存中，则该成本已经支付，但如果它在不同的寄存器中，则写入它们会产生区域成本。

假设数据在内存中，您可以使用冒泡排序并取底部 16 个值。下面的代码假设有一个双端口存储器，但它可以通过在每个时钟周期交替读取和写入使用一个临时寄存器来存储写入值和写入索引来与单个端口一起工作。如果内存中只有 81 个元素，这可能不会更节省面积。或者，源存储器可以实现为两个单端口存储器，其中一个具有奇数索引，另一个具有偶数索引。

```
// Not working code 
reg [15:0] inData [80:0]; // Must be two-port
reg [3:0]  iterCount = 0;
reg [6:0]  index = 0;
reg sorting;

always @(posedge clk)
  begin
  // Some condition to control execution
  if(sorting)
    begin

    if(index == 80)
      begin 

      // Stop after 16 iterations
      if(iterCount == 15)
        begin
        sorting <= 0;
        iterCount <= 0;
        end
      else
        begin
        iterCount <= iterCount+1;
        index <= 0;
        end
      end 
    else
      begin
      // If this is smaller than next item
      if(inData[index] < inData[index+1])
        begin
        // Swap with next item
        inData[index+1] <= inData[index];
        inData[index]   <= inData[index+1];
        end
      index <= index + 1;
      end
    end
  end 
```

编辑：如果您受到延迟限制，只允许一个时钟域并且必须流水线，那么问题仅限于选择排序网络并将其映射到流水线。您不能使用资源共享，因此根据您的分拣网络，区域是固定的。

*   为 N=81 选择一个排序网络（Bitonic、Pairwise 等）（不容易）
*   构建表示排序网络的有向数据流图
*   除输出 66-81 所需的节点外，删除所有节点
*   确定一个比较节点的延迟 L
*   使用 ALAP 调度为每个时钟分配 M 个节点，其中 M*L < 1/f
*   如果调度成功，则将其编码为 HDL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:40:29.550

如果您正在寻找通用算法，那么您可以使用 Quicksort 的一个版本。快速排序围绕枢轴元素对值进行排序。您选择一个枢轴并对您的数组进行排序。然后你会得到 x 值 < pivot 和 (nx-1) 更大的值。根据 x，您可以选择任一数组继续处理。如果 x>16，那么您知道您要查找的数字都在 x 数组中，您可以继续对其进行排序。如果不是，那么您知道 x 最低，现在可以递归地在另一个数组中查找 16-x 其他人。

快速排序的结果数组没有完全排序，您只知道它们小于或大于您的枢轴。[维基百科](http://en.wikipedia.org/wiki/Quicksort)上的一些信息和[一篇论文](http://www.siam.org/meetings/analco04/abstracts/CMartinez.pdf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:40:08.790

也许修改的中位数选择是一种选择？否则，只求最少 16 次是否可行？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T10:44:59.340

首先设置一个包含 16 个值的数组。并使用选择排序之类的东西：

1.  您认为第一个值是数组中的最小值。
2.  比较第一个元素的值，第二个，直到找到比它小的数字。
3.  将其作为您的新最小值，并将其与下一个数字进行比较，直到找到一个低于它的数字。
4.  如果你完成了数组，你拥有的数字是你的最小值，将它保存在一个数组中并将它从源数组中排除，然后重新开始，直到你填满解决方案数组的 16 个位置。

# c# - 需要将超链接字段添加到包含另一列数据的网格视图

> ID：13306295
> 
> 赞同：1
> 
> 时间：2012-11-09T10:28:27.000
> 
> 标签：c#, asp.net, gridview, sqldatasource

我有一个从 sqldatasource 获取数据的 gridview，结果从 SQL 查询中获取 3 列：ID、描述和价格。

我想要做的是添加另一列，其中包含 page.aspx?id=x 格式的超链接，其中 x 是第一列的 ID 代码。这适用于表中的每一行。

我整个早上都在寻找如何做到这一点，我得到的只是我必须管理 RowDataBound 事件并使用超链接字段，但找不到任何其他解释它们如何实际协同工作的东西，即使是 msdn 文章也很友好在这个主题上含糊不清，或者对我的具体案例没有任何相关帮助，因为我正在从代码隐藏中管理 gridview。也无法弄清楚如何从其他列访问字符串，因为这是我需要在生成的超链接中插入的内容。

这是我到目前为止创建gridview的结果：

```
private void FillGrid(string qid)
{
    SqlDataSource1.ConnectionString = Connessione.connectionString;
    SqlDataSource1.SelectCommand = "SELECT art_tessuto_articolo, art_tessuto_descrizione, lipre_prezzo FROM lipre INNER JOIN listini_tessuti ON lipre.lipre_codice = listini_tessuti.listini_codice INNER JOIN art_tessuti ON lipre.lipre_articolo = art_tessuti.art_tessuto_articolo WHERE lipre_codice = @qid AND lipre_prezzo <> 0";
    SqlDataSource1.SelectParameters.Clear();
    SqlDataSource1.SelectParameters.Add("qid", qid);

    GridView1.AllowPaging = true;
    GridView1.PageSize = 500;
    GridView1.DataSource = SqlDataSource1;

    GridView1.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:44:44.587

这应该可以完成这项工作。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       HyperLink hlControl = new HyperLink();
       hlControl.Text = e.Row.Cells[0].Text; 
       hlControl.NavigateUrl = "page.aspx?id=" + e.Row.Cells[0].Text;
       e.Row.Cells[3].Controls.Add(hlControl);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:55:49.373

使用[超链接字段](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx)

```
<asp:GridView ID="GridView1" runat="server">
<Columns>
    <asp:HyperlinkField DataNavigateUrlFields="ID" DataNavigateUrlFormatString="page.aspx?ID={0}" />
</Columns>
</asp:GridView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:12:30.417

```
<asp:GridView ID="GridView1" runat="server">    
  <Columns>
  <asp:TemplateField>
  <ItemTemplate>
      <asp:HyperLink runat="server" Text="VisibleText" NavigateUrl='<%# Eval(columnname) %>'></asp:HyperLink>
  </ItemTemplate>    
  </asp:TemplateField>
  </Columns>           
</asp:GridView> 
```

# ios - 在 iOS 图标中插入应用程序的名称 = 违反指南？

> ID：13306300
> 
> 赞同：1
> 
> 时间：2012-11-09T10:28:43.870
> 
> 标签：ios, icons, naming

我的一位客户向我提供了一个图标，其中包括图标内的应用程序名称。我认为没有必要，因为应用程序的名称插入在图标下方，并且图标应该包含应用程序的明确徽标，仅此而已。不确定它是否符合 iOS 指南我已经查看了 iOS HIG，没有发现任何东西。有什么想法吗？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:33:14.863

我想你可以。但是，您应该考虑 Apple App Icons Guidelines。

[您可以在此处](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW1)查看应用程序图标指南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:33:43.243

我不知道这是否违反指南，但您的应用不会因此而被拒绝，您可以找到很多在图标上有名称的应用 => [Youtube 应用](https://itunes.apple.com/fr/app/youtube/id544007664?mt=8)

# sql-server - 详细表中的 SQL Server 列表

> ID：13306301
> 
> 赞同：2
> 
> 时间：2012-11-09T10:28:44.563
> 
> 标签：sql-server

让我们建立2个表

```
create table School
(
IdSchool int not null PK,
Name     varchar(10) not null
)

create table Prof
(
IdSchool   int not null,
IdProf     int not null,
name       varchar (10)
PK (IdSchool, IdProf)
) 
```

我想建立这样的查询：

```
IdSchool, Prof.Name* 
```

*   prof name 应该是一个列表，包含来自同一所学校的所有 profs。

现在，我知道用过程或函数构建列表不是问题，但是有没有办法构建一个可以返回这种结果的查询。

PS查询应该返回单行，所以来自*学校左连接教授*的结果表不是我想要实现的结果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:35:32.010

```
SELECT distinct Idschool, profs
FROM profs p1
CROSS APPLY
(
select substring((
    SELECT ',' + name 
    FROM profs p2    
    WHERE p1.Idschool = p2.Idschool
    FOR XML PATH('')
    ),2,1000)
    as Profs    
) profs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:54:50.240

试试这个：

```
SELECT IdSchool, Prof_name = 
    STUFF((SELECT ', ' + [name]
           FROM Prof b 
           WHERE b.IdProf = a.IdProf 
          FOR XML PATH('')), 1, 2, '')
FROM Prof a
GROUP BY IdSchool 
```

# c# - 如果模型属性更改如何触发事件

> ID：13306303
> 
> 赞同：0
> 
> 时间：2012-11-09T10:28:46.523
> 
> 标签：c#, .net

我使用后台进程和 MVP 模式开发应用程序。我可以像这样在 ModelProcess (Model) 中存储进程状态（isCanceled、isStarted 或 isPaused）吗：

```
public event EventHandler CancelChanged;
  bool isCanceled = false;
    public bool IsCanceled
    {
        get { return isCanceled; }
        set
        {
            isCanceled = value;
            if (isCanceled)
            {
                if (CancelChanged != null)
                {
                    CancelChanged(this, EventArgs.Empty);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:39:00.183

您的 setter 只会在被设置为 时调用`CancelChanged`，`isCanceled`无论`true`之前是否设置`false`过。以下代码将检查值是否存在实际变化，这使其具有幂等性。

```
set
{
    if (value != isCanceled)
    {
        isCanceled = value;
        if (CancelChanged != null)
        {
            CancelChanged(this, EventArgs.Empty);
        }
    }
} 
```

# visual-studio-2010 - 检测到错误 LNK2038 不匹配

> ID：13306305
> 
> 赞同：3
> 
> 时间：2012-11-09T10:28:48.417
> 
> 标签：visual-studio-2010, cygwin

我正在尝试使用 Geant4（物理库）运行代码并尝试在 VS2010 上编译它。似乎 Geant4 的某些库与我的 C++ 库匹配存在问题。在编译中，我得到了大量类似的错误，如下所示：

> libG4Tree.a(G4ASCIITree.o)：错误 LNK2038：检测到“_ITERATOR_DEBUG_LEVEL”不匹配：值“0”与 Workshopexample1.OBJ 中的值“2”不匹配

并且在我的 G4 库中有 100 多个不同的 .a 文件出现此错误。我真的需要关闭调试级别（'0'）。因为否则 G4 代码将需要数年才能运行。所以，我需要找到它`_ITERATOR_DEBUG_LEVEL`在我的 VS2010 中定义的位置并将其设置为“0”以避免不匹配。有人可以帮忙吗？干杯， 帕亚姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-05T11:29:14.737

该错误可能是由于在同一可执行文件或 dll 中混合调试版本和发布版本而导致的。

使用 /MDd 而不是 /MD 的静态库的发布版本，而应用程序在发布中是 /MD。在静态库项目中设置正确的 /MD 解决了这个问题。

这是在项目属性中完成的

```
Select Configuration Properties / C C++ / Code Generation in the tree
and the option Runtime Library set to the same on all your dependencies projects and application. 
```

搜索 _ITERATOR_DEBUG_LEVEL 和 _SECURE_SCL 删除它们或在所有项目和源中适当地设置它们并重建所有内容。

```
_ITERATOR_DEBUG_LEVEL = 0 // disabled (for release builds)
_ITERATOR_DEBUG_LEVEL = 1 // enabled (if _SECURE_SCL is defined)
_ITERATOR_DEBUG_LEVEL = 2 // enabled (for debug builds) 
```

简而言之，您可能正在混合发布和调试 dll。不要在调试中链接发布 dll，反之亦然！

# ruby - 如何重塑 Ruby 数组

> ID：13306308
> 
> 赞同：2
> 
> 时间：2012-11-09T10:29:06.030
> 
> 标签：ruby, arrays

有一个数组

```
a = [1, 2, 3, 4, 5, 6] 
```

我想将它重塑为

```
a = [[1, 2], [3, 4], [5, 6]] 
```

我的印象是有一种特定的方法。我刚刚通过 Array 类参考，但未能找到它。有人记得吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T10:32:48.910

你可以这样做：

```
a = [1, 2, 3, 4, 5, 6]
a.each_slice(2).to_a # => [[1, 2], [3, 4], [5, 6]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T10:33:14.803

像这样，例如：

```
a = [1, 2, 3, 4, 5, 6]
a.each_slice(2).to_a # => [[1, 2], [3, 4], [5, 6]] 
```

# asp.net - 应用 CSS 或更改标签工具提示的格式

> ID：13306311
> 
> 赞同：0
> 
> 时间：2012-11-09T10:29:08.043
> 
> 标签：asp.net

我`Label`在转发器控件中使用了一个，它显示了一个工具提示。但是，它太小，难以阅读。所以我想将格式（应用 css）更改为该工具提示。有任何想法吗？

```
<td align="left" style="width: 145px">
     <asp:Label ID="lblItem" Text='<%# Eval("Add1").ToString().Substring(0, Math.Min(Eval("Add1").ToString().Length, 20))+"..." %>'
            ToolTip='<%# Eval("Add1")%>' runat="server" />
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:00:09.900

使用 jQuery 显示工具提示，这是它的最佳解决方案，请参阅以下链接，该链接对您有帮助。

[Animated Tooltip Javascript](http://ashishware.com/Tooltip.shtml)这将非常有用，并且肯定可以正常工作，因为我已经使用过它们。

# ruby-on-rails-3 - options_from_collection_for_select 定义

> ID：13306312
> 
> 赞同：1
> 
> 时间：2012-11-09T10:29:09.587
> 
> 标签：ruby-on-rails-3

我刚刚阅读了 option_from_collection_for_select 的 Rails API 定义。

```
 Returns a string of option tags that have been compiled by iterating over the collection   and assigning the result of a call to the value_method as the option value and the text_method as the option text 
```

现在我对 Rails 很陌生，所以想知道是否有人可以将其分解成更小的部分并解释正在发生的事情，如果你愿意，可以将其简化，解释非常高级（目前对我来说很好）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:50:31.633

使用[Ruby on Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_from_collection_for_select)中的示例，假设您有一个`Person`具有`id`属性和`name`属性的模型。

假设您有一个创建新的表单`project`并将其分配给`person`. `person`也许您希望为您分配此项目的内容提供一个下拉选择。你可以用`options_from_collection_for_select`这样的东西。

```
<%= f.label :person, "Assigned Person" %>
<%= f.select(:person, options_from_collection_for_select(@people, "id", "name") ) 
```

（`f`顺便说一下，这里指的`@project`是我们示例表单的变量。）

这样做是在您的选择下拉列表`person`中为实例变量中包含的每个选项创建一个选项`@people`。每个`<option>`标签都将具有分配给其属性的`id`of ，并且该选项的文本将是's 。`person``value``person``name`

因此，如果您的`@people`变量包含`[#<Person id: 1, name: "Brock Sampson">, #<Person id: 2, name: "Byron Orpheus">]`，您将获得如下 HTML 输出：

```
<label for="project_person">Assigned person"</label>
<select id="project_person" name="project[person]">
  <option value="1">Brock Sampson</option>
  <option value="2">Byron Orpheus</option>
</select> 
```

这更有意义吗？

# database - GAE fetch() 按时间排序的不同值

> ID：13306313
> 
> 赞同：1
> 
> 时间：2012-11-09T10:29:12.397
> 
> 标签：database, google-app-engine, gql

我有一个模型：

```
class MyModel(db.Model):
    ts = db.DateTimeProperty(auto_now_add=True)
    id_from_other_source = db.StringProperty(default='')
    #some data 
```

现在我有一些与 id_from_other_source 字段匹配的 id 列表。id 的数据会随时间变化，所以一个 id 有很多数据。

我想运行这样一个查询，为每个 id 获取我只有一个最年轻的 id 条目。就像是：

```
MyModel.all().filter('id_from_other_source IN', my_id_list).order('-ts').fetch(1000) 
```

但在 id_from_other_source 中有区别。我知道您无法使用 DISTINCT 运行 GQL 查询，但也许您可以看到任何不会运行太多查询的解决方案？

一种解决方案是一个接一个地获取结果，但我真的很想用更少的查询来做到这一点。

# api - 使用谷歌距离矩阵的行驶距离

> ID：13306316
> 
> 赞同：1
> 
> 时间：2012-11-09T10:29:18.333
> 
> 标签：api, matrix

根据这篇谷歌文章[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/) 我试图找出两个或更多位置之间的行驶距离，

所以我最初有两个邮政编码，分别是 M145AR (mancester) 和 NE65HL (Newcastle on type)

这是我的帖子网址

[http://maps.googleapis.com/maps/api/directions/xml?origin=M145AR&destination=NE65HL&sensor=false&mode=driving](http://maps.googleapis.com/maps/api/directions/xml?origin=M145AR&destination=NE65HL&sensor=false&mode=driving)

当我查看为此收到的 xml 响应时，我找不到任何方法来获取我的曼彻斯特邮政与泰恩河畔纽卡斯尔邮政编码之间的行驶距离

有人可以让我知道我的帖子网址有什么问题吗？

请参阅我用于此的波纹管代码

string strURL = "http://maps.google.com/maps/api/directions/xml?origin=53.452824,-2.220085&destination=54.981049,-1.580597&mode=driving&sensor=false"; 列表距离 = new List();

```
 distances.Clear();
            HttpWebRequest wRequest = (HttpWebRequest)WebRequest.Create(strURL);

            HttpWebResponse wResponse = (HttpWebResponse)wRequest.GetResponse();
            if (wRequest.HaveResponse)
            {
                if (wResponse.StatusCode == HttpStatusCode.OK)
                {
                    StreamReader StreamHandler = new System.IO.StreamReader(wResponse.GetResponseStream());
                    XmlDocument xmlDoc = new XmlDocument();
                    xmlDoc.LoadXml(StreamHandler.ReadToEnd());
                    Response.Write(xmlDoc.GetElementsByTagName("distance").Count.ToString() + ",");
                    for (int w = 0; w < xmlDoc.GetElementsByTagName("distance").Count; w++)
                    {
                        distances.Add(float.Parse(xmlDoc.GetElementsByTagName("distance")[w].ChildNodes[0].InnerText));                            
                    }
                }

                string aa = string.Empty;
            } 
```

当我检查距离列表时，我得到波纹管数组 Count = 27

```
[0]: 106.0
[1]: 53.0
[2]: 457.0
[3]: 2470.0
[4]: 2106.0
[5]: 805.0
[6]: 1211.0
[7]: 6349.0
[8]: 660.0
[9]: 1226.0
[10]: 59693.0
[11]: 19597.0
[12]: 60784.0
[13]: 16839.0
[14]: 54486.0
[15]: 890.0
[16]: 475.0
[17]: 5702.0
[18]: 1388.0
[19]: 406.0
[20]: 161.0
[21]: 1405.0
[22]: 605.0
[23]: 489.0
[24]: 34.0
[25]: 72.0
[26]: 238469.0 
```

所以我不知道从曼彻斯特到纽卡斯尔的真实行驶距离是多少。根据谷歌，曼彻斯特和纽卡斯尔之间行驶距离的粗略估计是：148 英里

我不确定如何从 google xml 响应中获得此值，任何帮助将不胜感激。

问候 kksfdo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T20:42:16.923

如果您只想计算行驶距离而不是计算每一步的距离，那么您可以简单地选择使用距离矩阵。

如果您更改您的网址 [http://maps.google.com/maps/api/directions/xml?origin=53.452824,-2.220085&destination=54.981049,-1.580597&mode=driving&sensor=false](http://maps.google.com/maps/api/directions/xml?origin=53.452824,-2.220085&destination=54.981049,-1.580597&mode=driving&sensor=false)

到 URL [http://maps.google.com/maps/api/distancematrix/xml?origin=53.452824,-2.220085&destination=54.981049,-1.580597&mode=driving&sensor=false](http://maps.google.com/maps/api/distancematrix/xml?origin=53.452824,-2.220085&destination=54.981049,-1.580597&mode=driving&sensor=false)

您将获得总行程的距离和持续时间，但不会获得开车到目的地的每一步的距离。

这是一个相当古老的问题，但由于没有答案，我试图提供帮助。任何建议表示赞赏。

# debian - 将 lenny domU 32bit 迁移到 Squeeze Dom0 64bit

> ID：13306317
> 
> 赞同：2
> 
> 时间：2012-11-09T10:29:23.720
> 
> 标签：debian, xen

我是 xen 的新手（我曾经使用 kvm 和全虚拟化 vm）

我有一个全新的安装：squeeze amd64 和 xen 4。新创建的 domU 和导入的squeeze domU 工作正常。

现在我想导入一个旧的 lenny 32bit domU：

vm.cfg 是：

```
kernel  = "/boot/vmlinuz-2.6.26-2-xen-686"
ramdisk = "/boot/initrd.img-2.6.26-2-xen-686"
disk = [ 'phy:vxen/vm,sda1,w' ]
root = "/dev/sda1 ro" 
```

我注释了内核和 ramdisk 行并添加了 pygrub：

```
bootloader = '/usr/lib/xen-default/bin/pygrub'
#kernel  = "/boot/vmlinuz-2.6.26-2-xen-686"
#ramdisk = "/boot/initrd.img-2.6.26-2-xen-686" 
```

虚拟机无法启动，我在 grub 屏幕后收到此消息：

```
Error: (2, 'Invalid kernel', 'elf_xen_note_check: ERROR: Will only load images built for the generic loader or Linux images') 
```

在这个 vm 里面（我可以在旧服务器上启动它） Grub 已安装

```
vm:~# dpkg --list | grep grub
ii  grub                              0.97-47lenny2              GRand Unified Bootloader (Legacy version)
ii  grub-common                       1.96+20080724-16           GRand Unified Bootloader, version 2 (common files) 
```

在 /boot 我有这些文件： initrd.img-2.6.26-2-xen-686 initrd.img-2.6.26-2-686 vmlinuz-2.6.26-2-686 vmlinuz-2.6.26-2-xen -686

猫 /boot/grub/menu.lst

```
## ## End Default Options ##

title           Debian GNU/Linux, kernel 2.6.26-2-686
root            (hd0,0)
kernel          /boot/vmlinuz-2.6.26-2-686 root=/dev/sda1 ro quiet
initrd          /boot/initrd.img-2.6.26-2-686

title           Debian GNU/Linux, kernel 2.6.26-2-686 (single-user mode)
root            (hd0,0)
kernel          /boot/vmlinuz-2.6.26-2-686 root=/dev/sda1 ro single
initrd          /boot/initrd.img-2.6.26-2-686

### END DEBIAN AUTOMAGIC KERNELS LIST 
```

猫 /boot/grub/device.map

```
(hd0)   /dev/sda
(hd1)   /dev/sdb 
```

我想安装 grub2 并更新，以便能够在我的新 dom0 中启动，但 update-grub 失败

```
Searching for GRUB installation directory ... found: /boot/grub
warning: grub-probe can't find drive for /dev/sda1.
grub-probe: error: Cannot find a GRUB drive for /dev/sda1\.  Check your device.map. 
```

自从我使用 lvm 以来，我尝试了这些步骤：

```
nano /boot/grub/device.map
(hd0)   /dev/xvda
cd /dev
mknod xvda b 202 0
dpkg --configure -a
update-grub 
```

升级-grub 仍然失败。

无论如何，有人知道在我的新挤压 dom0 上运行这个旧 vm 的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:21:40.307

我想通了：在虚拟机里面修改fstab

将 /dev/sda1 替换为 /dev/xvda1

在新的 xen 服务器上复制内核文件

/boot/vmlinuz-2.6.26-2-xen-686

/boot/initrd.img-2.6.26-2-xen-686

修改新的vm.cfg：

```
 #bootloader = '/usr/lib/xen-default/bin/pygrub'
    kernel  = "/boot/vmlinuz-2.6.26-2-xen-686"
    ramdisk = "/boot/initrd.img-2.6.26-2-xen-686"

    root        = '/dev/xvda1 ro'
    disk        = [
              'phy:vxen/vm,xvda1,w',
          ] 
```

新的虚拟机将启动。

# java - 在接口中声明的匿名内部类：什么是外部类？

> ID：13306319
> 
> 赞同：3
> 
> 时间：2012-11-09T10:29:30.943
> 
> 标签：java, scjp, ocpjp, open-closed-principle

考虑以下：

```
public class OuterClass {

    private String attribute = "outer";

    class InnerClass {
        private String attribute = "inner";
        public doSomething() {
            System.out.println(this.attribute);
            System.out.println(OuterClass.this.attribute);

        }
    }

} 
```

InnerClass 不是静态的，必须针对其外部类的实例创建。

`new OuterClass().new InnerClass()`

常规的*内部*类包含对创建它的外部类的引用，可以使用`Outer.this.myAttribute`(*在存在“命名冲突”的情况下特别有用*

* * *

创建匿名内部类时也是一样：创建的匿名内部类持有对外部类的引用，这就是为什么在方法内部声明谓词（匿名方法局部内部类）时，我们仍然可以在内部类内部访问外部类的变量，而不必将它们声明为 final（而我们应该将变量作为方法参数传递。

```
public class OuterClass {

  // Do not need to be final because the innerclass keeps a reference to the outerclass
  // even if it's an anonymous innerclass, it's still an innerclass
  private String classAttribute = "classAttribute";

  public Runnable doSomething() {

    // Should be final because the variable lives on the stack and the reference to this object
    // must be copied so that the String object is still accessible when the stack frame is destroyed
    final String localVar = "localVar";

    return new Runnable() {
      @Override
      public void run() {
        System.out.println(classAttribute);
        System.out.println(localVar);
      }
    };
  }

} 
```

* * *

最后，我们可以在接口中声明常量，这些常量被隐式标记为 public static final。一个对象可以是一个常数。因此，作为匿名内部类创建的对象是接口的合法常量。

例如，在使用 Guava 时，我通常在我的接口函数和谓词中声明，这允许我利用有用的 Guava 函数，例如`Maps.uniqueIndex(...)`.

```
public interface AlternativeNameable {

  String getAlternativeName();

  Function<AlternativeNameable,String> GET_ALTERNATIVE_NAME = new Function<AlternativeNameable,String>() {
    @Override
    public String apply(AlternativeNameable input) {
      return input.getAlternativeName();
    }
  };

} 
```

* * *

所以你可能会问自己我的问题是什么？这里是：

**当将匿名类声明为接口常量时（请参阅我的上一个代码示例），匿名内部类对哪个外部类持有引用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:34:46.800

接口中定义的字段[总是隐式地具有修饰符`public static final`](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html "Java 教程：定义接口")。它是一个常量，因此它没有关联的外部类。

此外，[接口的成员类型是隐式的 public 和 static](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.5 "Java 语言规范：接口：9.5。 成员类型声明")，这也适用于匿名类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:46:33.600

接口的内部类是隐式静态的，因此不需要引用外部类。

# mysql - 从 cakephp 1.3 迁移到 2.0 后，我收到一条错误消息说缺少控制器

> ID：13306321
> 
> 赞同：0
> 
> 时间：2012-11-09T10:29:33.090
> 
> 标签：mysql, phpmyadmin, cakephp-2.3

我从 cakephp 1.3 迁移到 cakephp 2.2.3。但我收到错误“缺少控制器”。它要求我签入“/app/controller..”，但我没有名为“controller”的文件夹。转换后我有一个名为“控制器”的文件夹

所以请帮我解决这个问题..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:24:11.570

我刚从 CakePHP1.3 切换到 CakePHP2.2.3。

关于控制器，旧的 app/app_controller.php 已移至 app/Controller/AppController.php。

模型也是如此，app/app_model.php 被移动到 app/Model/AppModel.php。

Controller 和 Model 文件夹现在以大写字母开头。

此外，控制器/模型名称不再使用 _，而是使用大写字母命名：您将拥有 app/Controller/UsersController.php，而不是 app/controller/users_controller.php。

我最好的建议是从一个空的 CakePHP2.2.3 项目开始，然后将旧项目文件复制到相应的文件夹中。

您还可以在此处查看迁移指南：

[http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)

CakePHP2 有一些你应该知道的改进（比如延迟加载类以提高性能、不推荐使用的组件等）。

# objective-c - setUbiquitous:itemAtURL:destinationURL:error: 不会从 iCloud 中删除该项目

> ID：13306323
> 
> 赞同：1
> 
> 时间：2012-11-09T10:29:47.527
> 
> 标签：objective-c, cocoa-touch, cocoa, icloud, nsfilemanager

如果我发送消息

```
[[NSFileManager defaultManager] setUbiquitous:NO
                                    itemAtURL:url
                               destinationURL:iCloudURL
                                        error:&err] 
```

要从 iCloud 中删除一个项目，它实际上并没有删除 Ubiquitous Container 上的文件。这是预期的行为吗？

该方法返回 NO 并且错误对象包含

> 错误域 = NSCocoaErrorDomain 代码 = 512 “操作无法完成。（可可错误 512。）”
> 
> UserInfo=0x20870970 {NSURL=file://localhost/var/mobile/Applications/168EE8CD-4CDF-49BE-AD88-1DC7DD9CF25F/Documents/test.txt,
> 
> NSUnderlyingError=0x20863a00 “操作无法完成。（LibrarianErrorDomain 错误 2 - 无法禁用未同步项目的同步。）”}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T03:47:18.840

错误很明显。您正在尝试从 iCloud 中删除不在 iCloud 中的项目。当您想使用 删除 iCloud 中`setUbiquitous:...`的项目时，项目 URL ( `itemAtURL:`) 应该是 iCloud URL。目标 URL 可以是本地的（但如果 ubiquitous 设置为 则被忽略`NO`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T03:27:52.453

将“setubiquitous”参数指定为“no”时，您的目标 URL 需要是本地 url，而不是 iCloud 的。你有你的网址切换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T03:36:00.063

要删除 iCloud 上的项目，您可以尝试以下代码：

```
NSError *err;
NSFileCoordinator* fileCoordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
[fileCoordinator coordinateWritingItemAtURL:_url
                                    options:NSFileCoordinatorWritingForDeleting
                                      error:&err
                                 byAccessor:^(NSURL* writingURL) {
                                           NSFileManager* fileManager = [NSFileManager defaultManager];
                                           [fileManager removeItemAtURL:writingURL error:nil];
                                 }];
[fileCoordinator autorelease]; 
```

祝你好运！

# visual-studio-2010 - 如何实现从模板复制文件的 Microsoft.VisualStudio.TemplateWizard.IWizard

> ID：13306331
> 
> 赞同：0
> 
> 时间：2012-11-09T10:30:30.817
> 
> 标签：visual-studio-2010, automation, project-template

我创建了一个 Visual Studio 多项目模板，并希望将一个程序集库的额外文件夹添加到输出父项目中，该项目本身*不是*子项目。最终的项目应该是这样的。

```
Parent Project
    - Child Project 1
    - Child Project 2
    - Child Project 3
    - lib (not a project, just assemblies) 
```

该`lib`目录当前包含在我的压缩项目模板中，我想将它从那里复制到新创建的项目中。所以问题是，

1.  `Microsoft.VisualStudio.TemplateWizard.IWizard`我需要实现什么方法
2.  如何在压缩项目模板中获取对 lib 目录的引用（最好作为某种流，这样我就不必自己解压缩任何东西）
3.  如何获取对新创建的父项目目录的引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:10:15.397

请参考以下链接并下载多项目模板示例。

[多项目模板](http://vsix.codeplex.com/)

# log4j - 在 Log4j.xml 文件中声明自定义附加程序

> ID：13306333
> 
> 赞同：0
> 
> 时间：2012-11-09T10:30:36.817
> 
> 标签：log4j

我已经编写了一个自定义附加程序，那么如何在 Log4j.xml 文件中声明它。

```
My property file is[custom appender is in org.copofi.common.logging.SystemStatusAppender] :

    log4j.rootLogger=INFO,logfile,console,SystemStatus
    log4j.logger=INFO,logfile,console,SystemStatus

    # Console appender (stdout)
    log4j.appender.console=org.apache.log4j.ConsoleAppender
    log4j.appender.console.layout=org.apache.log4j.PatternLayout
    log4j.appender.console.layout.ConversionPattern=[%d{yy-MM-dd HH:mm:ss.SSS}] [%p] <%t> [%X{jsessionId}] [%c] %m%n

    # File appender
    log4j.appender.logfile=org.apache.log4j.FileAppender
    log4j.appender.logfile.File=${catalina.base}/logs/copofi.log
    log4j.appender.logfile.layout=org.apache.log4j.PatternLayout
    log4j.appender.logfile.layout.ConversionPattern=[%d{yy-MM-dd HH:mm:ss.SSS}] [%p] <%t> [%X{jsessionId}] [%c] %m%n

    log4j.appender.SystemStatus=org.copofi.common.logging.SystemStatusAppender 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:34:34.487

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="false" xmlns:log4j="http://jakarta.apache.org/log4j/">`    

<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
            <param name="Threshold" value="INFO"/>
            <layout class="org.apache.log4j.PatternLayout">
                <param name="ConversionPattern" value="%d{MMM dd, yyyy hh:mm:ss a zzz} %-5p %F.%M:%L: %m%n"/>
            </layout>

            <filter class="org.apache.log4j.varia.LevelMatchFilter">
                <!-- only the levels (comma separated) specified in LevelToMatch will be logged -->
                <param name="LevelToMatch" value="DEBUG, WARN,INFO,ERROR, FATAL"/>
                <param name="AcceptOnMatch" value="true"/>
            </filter>
        </appender>

    <root>
        <level value="INFO"/>
        <appender-ref ref="CONSOLE_LOG"/>       
    </root>

</log4j:configuration> 
```

# arm - ARM新手开发环境

> ID：13306338
> 
> 赞同：3
> 
> 时间：2012-11-09T10:31:04.107
> 
> 标签：arm

我正在寻找一些有关以特定非特定方式编程 ARM 设备的信息 [1]。假设我正在为 ARM 处理器编写代码，该处理器使用类似于 Apple II/Atari " *** *" XL/Commodore 64/DOS-PC 的机器，或者甚至运行像 VMS 或 SUNO 这样的多任务操作系统的机器。进一步假设任何外围设备/操作系统特定的东西已经被抽象为子程序。这种类型的编程示例可能是：基于文本/诅咒的游戏，如流氓或 moria；基于curses的文字处理器（或者更确切地说是基于curses之类的库）；或调制解调器/终端程序。

我正在寻找两件事。有助于学习 ARM 编程的材料，虽然 ARM 系统开发人员指南可能就足够了，但其他资源会有所帮助

我正在寻找的另一件事是一个开发环境，它包含、仿真、一个像样的宏汇编器和一个调试器。连同其他任何可以帮助我了解程序内部情况的东西。

[1] 好的。对不起，我无法抗拒那个特别的双关语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:17:40.477

infocenter.arm.com 并查看各种架构和内核的各种 ARM ARM（架构参考手册）和 TRM（技术参考手册）。这些手册比大多数其他公司的文档要好。除了新的 64 位的东西，就指令集而言，从一种架构到另一种架构的差异有些微妙。主要区别与外围设备有关，mmu 是一个缓慢变化的东西，中断管理器已经采取了很大的步骤，并且 fpu 至少被更换了一次，如果不是两次批发的话（如果你甚至有一个 fpu，有一个是例外不是它消耗大量房地产以获得如此少的回报的规则）。

我对你的问题感到困惑。我认为在学习架构/指令集和学习操作系统调用之间划清界限很重要，这是两件不同的事情。您很少需要查看源代码 (C/C++) 之外的操作系统内容，并且有限的 asm 用于手动调整的 C 库或 boostrap 代码和中断包装器。同样，架构、寄存器、指令等与外围设备（arm 的内核通常具有非常少的外围设备，大部分是供应商特定的东西），我将其作为单独的学习曲线分开，与 asm 和指令集与在任何其他平台上学习外围设备没有什么不同，只是您读写的一些地址。

如果您正在寻找非操作系统裸机，stm32f0 发现是 10 美元，我强烈推荐它。看起来 ti 有一个 Stellaris launchpad 只需多一点（等待我的到达，所以我不能谈论它们，而且运费是免费的，所以成本与 stm32 板基本相同）stm32f4 发现大约是 20 美元我几乎不会用 cortex-m4 的所有东西来调用微控制器。

升级到支持 linux 或为 linux 系统设计的有 raspberry pi、beaglebone 和 open-rd 等（pandaboard）。同样，尽管您只是在编写另一个 linux C/C++ 程序，所以那里并没有太多的兴奋（与特定平台相关，所有平台的娱乐都是相同的），并且需要的手臂知识非常少（如果有的话）。与基于 ARM 的微控制器相比，使用这些平台中的任何一个进行裸机编程都非常容易，从而为您提供类似赛车的性能。

我有一个你可能不感兴趣的拇指模拟器。gdb 有一个 armulator，它是当时公司的基石。skyeye 或类似的东西像 qemu 一样有一个 arm 指令集模拟器，除了 gdb 可以提供的东西之外，它们都不会给你很好的可见性。opencores 的 amber 项目是 armv2 克隆，您可以看到它与 armv4 和更新版本的密切关系，如果没有装满现金的盒子，您将找不到 rtl。以我的手臂和芯片经验（不，我不为手臂工作）我确实发现 amber 项目值得一看，但很多人不知道如何处理它，而且真的对这种可见性水平不感兴趣。（它是指令兼容的，一个很好的设计，但不要认为你在看一个手臂设计，那里没有秘密）。

由于微控制器基于 cortex-m，您可能会发现较旧的微控制器是上端臂核心的更好垫脚石。基于 ARM7tdmi 的产品，如 sam7s 和其他来自 nxp、st、atmel 等的产品，您仍然可以在 sparkfun 和微控制器专业人士以及 arduino 等价格的其他地方找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T00:19:10.550

您可以选择使用 ARM Cortex M 或 A 系列。如果您要开发高端应用程序，例如在智能手机/平板电脑上运行的应用程序，那么学习 ARM A 是您的选择。如果您要强调硬件/低级别的东西，例如控制器，那么您应该选择 ARM Cortex-M。如果您使用实时应用程序（我怀疑是您的情况，他们使用 R 系列）。

这些新一代 ARM 中的大多数都基于 ARMv7 架构和 ISA，因此阅读相关手册可以帮助您入门。最近，发布了新的 ARMv8 架构和 ISA，它支持 64 位处理。

从 ARM 站点下载参考和技术手册以了解硬件/外围设备。

我会接受 auslen 的购买板的建议，你可以选择 TI 的 Stellaris Launch pad，它有一个 ARM-M4F 处理器（支持浮点和 SIMD），售价 12.99 美元 [http://www.ti.com/ww /en/launchpad/stellaris_head.html?DCMP=stellaris-launchpad&HQS=stellaris-launchpad-b](http://www.ti.com/ww/en/launchpad/stellaris_head.html?DCMP=stellaris-launchpad&HQS=stellaris-launchpad-b)

或者您可以使用 ST 的发现板（基于与上述相同的处理器），但板载音频、加速度计和 USB。它的售价为 14.99 美元[http://www.st.com/internet/evalboard/product/252419.jsp](http://www.st.com/internet/evalboard/product/252419.jsp) 或 STM F3 板（10.99 美元） [http://www.st.com/internet/evalboard/product/254044 .jsp](http://www.st.com/internet/evalboard/product/254044.jsp)

在任何情况下，您都需要检查随板提供的示例，没有这些示例您将无从下手。该板带有自己的驱动程序，所有驱动程序都以某种方式抽象，因此您可以从那里开始！

至于操作系统，如果您对 RTOS 感兴趣，ARM 为其 M 系列处理器提供 CMSIS RTOS [http://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php](http://www.arm.com/products/processors/cortex-m/cortex-microcontroller-software-interface-standard.php)

本书介绍了几代 ARM 处理器。然后专注于皮质 M3。它用大量的汇编代码覆盖了它的 ISA。它还介绍了内置外围设备以及如何使用 C 启动。 [http://www.amazon.ca/Definitive-Guide-ARM-Cortex-M3/dp/185617963X/ref=sr_1_1?ie=UTF8&qid=1352506616&sr =8-1](http://www.amazon.ca/Definitive-Guide-ARM-Cortex-M3/dp/185617963X/ref=sr_1_1?ie=UTF8&qid=1352506616&sr=8-1)

祝你好运

# c++ - 在 ROI 中使用 findContours，轮廓坐标错误

> ID：13306341
> 
> 赞同：0
> 
> 时间：2012-11-09T10:31:08.910
> 
> 标签：c++, image-processing, opencv

我正在`findContours`使用`Mat`. 轮廓被很好地提取，但它们的坐标不是全局的，它们属于 ROI。因此，当我想将它们绘制成图像时，它们都被绘制在定义我的 ROI 的矩形中。我想我只是错过了一些基本的东西。有人有想法吗？

这是代码片段。

```
Mat roi(img_grad, inflated_rect);
findContours( roi, canidates, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );
for(int i = 0; i < canidates.size(); ++i) {
   drawContours(mat, canidates, i, Scalar(0,0,255), 1, CV_AA, hierarchy, 1, Point(0,0));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:50:42.117

`findContours`返回相对于您的 ROI 的坐标。

因此，您应该将所有点移动 ROI 偏移量（注意最后一个参数）：

```
for(int i = 0; i < canidates.size(); ++i) {
    drawContours(mat, canidates, i, Scalar(0,0,255), 1, CV_AA, hierarchy, 1, inflated_rect.tl());
} 
```

或获得另一个 ROI 进行绘图：

```
for(int i = 0; i < canidates.size(); ++i) {
    Mat roi2(mat, inflated_rect);
    drawContours(roi2, canidates, i, Scalar(0,0,255), 1, CV_AA, hierarchy, 1, Point(0,0));
} 
```

# c# - 使用 LINQ 查询数据库的 Web 服务在一台计算机上失败，而不是在另一台计算机上

> ID：13306347
> 
> 赞同：1
> 
> 时间：2012-11-09T10:31:44.667
> 
> 标签：c#, linq, webforms

我在我的计算机上本地开发了一个小型 Web 窗体应用程序，它运行良好，但是当我将它移动到另一台计算机时，我使用 AJAX 查询的 Web 服务失败了。

以下是相关代码：

```
/*Search for Event.country by name*/
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string[] GetVenues(string searchterm)
    {
        var _db = new MyApp.Models.EventContext();

        var myResult = from e in _db.Events
                       where e.venue.Contains(searchterm)
                       select e.venue;

        return myResult.Distinct().ToArray();
    } 
```

我怀疑我的问题出在 EventContext 类中的 OnModelCreating 方法上：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Event>().ToTable("events");
    } 
```

我从本地计算机备份数据库并在另一台计算机上恢复它，所以我怀疑我在 OnModelCreating 上做错了，因为表已经存在。我的假设正确吗？

这是我从 Firebug 查看的 Web 服务响应中收到的错误消息：

```
{"Message":"An exception occurred while initializing the database. See the InnerException for details.","StackTrace":" 
at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) 
 at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
 at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase> b__4(InternalContext c)
 at System.Data.Entity.Internal.RetryAction'1.PerformAction(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action'1 action)
 at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
 at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
 at System.Data.Entity.Internal.Linq.InternalSet'1.Initialize()
 at System.Data.Entity.Internal.Linq.InternalSet'1.get_InternalContext()
at System.Data.Entity.Infrastructure.DbQuery'1.System.Linq.IQueryable.get_Provider()
 at System.Linq.Queryable.Where[TSource](IQueryable'1 source, Expression'1 predicate)
at MyApp.WebServices.AutoComplete.GetVenues(String searchterm)","ExceptionType":"System.Data.DataException"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:13:46.810

很难从所提供的数据中明确问题的根源。

您的评论表明您无权在您朋友的计算机上调试该应用程序。您是否尝试过在 Visual Studio 中进行[远程调试？](http://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx)

您可能还想检查您的数据库中是否定义了可为空的类型，或者可能与数据库默认值不同的列值。这表明数据存在问题，以及[DataException的原因](http://msdn.microsoft.com/en-us/library/system.data.dataexception.aspx)

# maven - 指示 Maven 从 https://oss.sonatype.org/content 下载第三方插件

> ID：13306348
> 
> 赞同：2
> 
> 时间：2012-11-09T10:31:51.577
> 
> 标签：maven, maven-plugin

我想在[https://oss.sonatype.org/content/repositories/snapshots/](https://oss.sonatype.org/content/repositories/snapshots/)上使用一个插件我 知道运行插件的 maven 命令，但是如何指示 Maven 应该从哪里下载插件？我想我需要将我的设置文件更新为：

```
 <mirrors>
    <mirror>
        <id>???</id>
        <name>???</name>
        <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
    </mirror>
</mirrors> 
```

它是否正确 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:41:18.143

您应该向您的 pom 添加一个存储库，这样构建将保持可移植性，并且构建您的代码的其他开发人员将不需要更新他们的 settings.xml。

这应该做的工作：

```
<repositories>
    <repository>
        <id>repo-id</id>
        <name>repo-name</name>
        <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
    </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:36:31.457

最好的解决方案是使用您当前的配置仅进行如下测试：

```
<project>
  ...
  <pluginRepositories>
    <pluginRepository>
      <id>apache.snapshots</id>
      <url>http://repository.apache.org/snapshots/</url>
    </pluginRepository>
  </pluginRepositories>
  ...
</project> 
```

或像这样适当地更改您的设置：

```
<settings>
  ...
  <profiles>
    <profile>
      <id>apache</id>
      <pluginRepositories>
        <pluginRepository>
          <id>apache.snapshots</id>
          <name>Maven Plugin Snapshots</name>
          <url>http://repository.apache.org/snapshots/</url>
          <releases>
            <enabled>false</enabled>
          </releases>
          <snapshots>
            <enabled>true</enabled>
          </snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  ...
</settings> 
```

当然，激活配置文件。或者更改存储库管理器的配置。

# jquery - 如何在 jQuery 选项卡脚本中更改元素父级的类？

> ID：13306349
> 
> 赞同：0
> 
> 时间：2012-11-09T10:31:54.823
> 
> 标签：jquery

我使用本教程中的代码：jacklmoore.com/notes/jquery-tabs。

```
<ul class='tabs'>
    <li><a href='#tab1'>Tab 1</a></li>
    <li><a href='#tab2'>Tab 2</a></li>
    <li><a href='#tab3'>Tab 3</a></li>
</ul>
<div id='tab1'>
    <p>Hi, this is the first tab.</p>
</div>
<div id='tab2'>
    <p>This is the 2nd tab.</p>
</div>
<div id='tab3'>
    <p>And this is the 3rd tab.</p>
</div> 
```

脚本：

```
$('ul.tabs').each(function(){
    // For each set of tabs, we want to keep track of
    // which tab is active and it's associated content
    var $active, $content, $links = $(this).find('a');

    // If the location.hash matches one of the links, use that as the active tab.
    // If no match is found, use the first link as the initial active tab.
    $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
    $active.addClass('active');
    $content = $($active.attr('href'));

    // Hide the remaining content
    $links.not($active).each(function () {
        $($(this).attr('href')).hide();
    });

    // Bind the click event handler
    $(this).on('click', 'a', function(e){
        // Make the old tab inactive.
        $active.removeClass('active');
        $content.hide();

        // Update the variables with the new link and content
        $active = $(this);
        $content = $($(this).attr('href'));

        // Make the tab active.
        $active.addClass('active');
        $content.show();

        // Prevent the anchor's default click action
        e.preventDefault();
    });
}); 
```

我想修改此脚本以将“活动”类添加/删除`li`到`a`. 我尝试用 替换`$active.addClass('active');`，`$active.parent('li').addClass('active');`但结果代码的行为不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:51:06.267

您只需`active`要从先前单击的元素中删除该类：

```
// Make the old tab inactive.
$active.parent('li').removeClass('active'); 
```

您还需要添加`active`到第一个`list`元素：

```
// If no match is found, use the first link as the initial active tab.
$active.parent('li').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:53:46.543

有几个地方需要定位父 li：

```
$('ul.tabs').each(function(){
    // For each set of tabs, we want to keep track of
    // which tab is active and it's associated content
    var $active, $content, $links = $(this).find('a');

    // If the location.hash matches one of the links, use that as the active tab.
    // If no match is found, use the first link as the initial active tab.
    $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
    $active.parent('li').addClass('active');
    $content = $($active.attr('href'));

    // Hide the remaining content
    $links.parent('li').not($active).each(function () {
        $($(this).attr('href')).hide();
    });

    // Bind the click event handler
    $(this).on('click', 'a', function(e){
        // Make the old tab inactive.
        $active.parent('li').removeClass('active');
        $content.hide();

        // Update the variables with the new link and content
        $active = $(this);
        $content = $($(this).attr('href'));

        // Make the tab active.
        $active.parent('li').addClass('active');
        $content.show();

        // Prevent the anchor's default click action
        e.preventDefault();
    });
});​ 
```

我拼凑了一个似乎可以工作的 JSFiddle：

[http://jsfiddle.net/5kGTX/](http://jsfiddle.net/5kGTX/)

# objective-c - 从应用程序内将图像附加到电子邮件

> ID：13306350
> 
> 赞同：0
> 
> 时间：2012-11-09T10:32:06.490
> 
> 标签：objective-c, ios, email

我正在尝试将图像附加到从应用程序发送的邮件中我不知道该怎么做，请告知这是我的代码：

```
 NSString * subject = @"Hello";
    NSString * address = @"myMail@gmail.com";

    NSMutableString *strBody=[[NSMutableString alloc]init];
    [strBody setString:_txtName.text];
    [strBody appendString:_txtIngredients.text];
    [strBody appendString:_txtPreper.text];
    [strBody appendString:_txtServe.text];
    [strBody appendString:_txtAboutdrink.text];
    [strBody appendString:_txtSource.text];

  //NSData *data = UIImagePNGRepresentation(_imgDrink);---- here is my problem

    NSURL *url;

    NSString * path = [NSString stringWithFormat:@"mailto:%@?subject=%@&body=%@", address, subject,strBody];
    url = [NSURL URLWithString:[path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    [[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:46:34.260

如果您不介意为用户显示表单以在电子邮件中输入消息，我建议使用[`MFMailComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html). 通过它，您可以很容易地添加附件。您还可以预先填充收件人和邮件正文以及有关电子邮件的几乎所有其他内容。这是您的工具包中的一个方便的类。

# unity3d - 通过不绘制不可见的东西来降低绘制调用

> ID：13306353
> 
> 赞同：6
> 
> 时间：2012-11-09T10:32:30.143
> 
> 标签：unity3d

我正在寻找优化我的游戏的方法。

我在想是否有办法不绘制相机视图中但观众看不到的对象？

问题是我需要降低我的绘图调用，并且在任何给定时间，至少有 12 个游戏对象对相机不可见。这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:24:26.113

您正在寻找的是所谓的*遮挡剔除*，它是[Unity 的内置功能](http://docs.unity3d.com/Documentation/Manual/OcclusionCulling.html)。为了减少绘图调用的数量，还有一些对您的问题感兴趣的技术：

*   [截锥剔除](http://docs.unity3d.com/Documentation/Components/class-Camera.html)
*   [图层特定剔除](http://docs.unity3d.com/Documentation/ScriptReference/Camera-layerCullDistances.html)
*   纹理图集，即几个不同的对象共享相同的材质
*   静态和动态[绘图调用批处理](http://docs.unity3d.com/Documentation/Manual/DrawCallBatching.html)
*   [LOD](http://docs.unity3d.com/Documentation/Manual/LevelOfDetail.html)（细节层次）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T11:16:16.553

Kay 是正确的减少不可见对象的绘制调用，您需要使用遮挡剔除，

如果你仍然想减少更多的绘图调用，你应该使用资产商店提供的 Purdyjo 的免费统一插件“ **Draw Call Minimizer ”。**
这是它的[统一视频教程](http://unity3diy.blogspot.com/2014/10/how-i-reduce-draw-calls-from-69-to-12.html)

# python - python-twisted 和 SIGKILL

> ID：13306359
> 
> 赞同：5
> 
> 时间：2012-11-09T10:32:50.970
> 
> 标签：python, linux, twisted, sigkill

我有一个使用**扭曲**框架的**python应用程序。**

 **我利用存储在由 twistd 生成的 pidfile 中的值。启动器脚本检查它的存在，如果 pidfile 已经存在，则不会产生守护进程。

但是，twistd 在收到`SIGKILL`信号时不会删除 .pid 文件。这使启动器脚本认为守护程序已经在运行。

我意识到停止守护进程的正确方法是使用`SIGTERM`信号，但问题是当启动守护进程的用户注销时，守护进程永远不会收到`SIGTERM`信号，所以显然它被`SIGKILL`. 这意味着一旦用户注销，他将永远无法再次启动守护进程，因为 pidfile 仍然存在。

在这种情况下，有什么办法可以使该文件消失吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:48:19.560

从`signal(2)`手册页：

> 这些信号不能被捕获或忽略`SIGKILL`。`SIGSTOP`

因此，该进程无法响应该信号运行任何清理代码。通常你只`SIGKILL`用来终止一个不响应退出的进程`SIGTERM`（可以被捕获）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:27:17.417

您可以更改您的启动器（或将其包装在另一个启动器中）并在尝试重新启动 twistd 之前删除 pid 文件。**

# ruby-on-rails - Rails - 回形针后处理器解压缩文件夹

> ID：13306361
> 
> 赞同：2
> 
> 时间：2012-11-09T10:32:57.490
> 
> 标签：ruby-on-rails, ruby, paperclip, unzip, processor

我正在尝试解压缩以前由回形针上传的文件夹。到那时，文件已正确上传，但从未调用过后处理器方法。那是模型文件：

```
class Component < ActiveRecord::Base
    attr_accessible :dev_desc, :func_desc, :name, :platform, :pos_img, :repo_dir, :xib_name, :imgs, :folder

    validates :name, :presence => true
    validates :platform, :presence => true
    has_attached_file   :imgs,
                    :processors => [:unzipimgs]

    has_attached_file   :folder, {
                    :styles => {:original => {:processors => [:unzipfolder]}}
                    }
end 
```

这就是 lib/paperclip_processors/unzipfolder.rb 文件：

```
module Paperclip
class UnzipFolder < Processor

class InstanceNotGiven < ArgumentError; end

    attr_accessor :resolution, :whiny
    def initialize(file, options = {}, attachment = nil)
      super
      @file = file
      @whiny = options[:whiny].nil? ? true : options[:whiny]
      @basename = File.basename(@file.path, File.extname(@file.path))
      @attachment = attachment
   end
   def make
      # DO THINGS HERE

   end
end
end 
```

我尝试将“has_attached_file”写为 unzipimgs 格式和 unzipfolder 格式，但我总是得到**未初始化的常量 Paperclip::Unzipfolder**错误。

**编辑：**部分修复，问题出在文件名 :processors => [:unzipImgs] 和一个名为 unzip_imgs.rb 的文件中。现在的问题是，即使调用了 make 方法，文件还不可用： **File /Users/.../public/system/imgs//original/testfile.zip not found** 为什么还没有创建文件？

# .net - Oracle 的 ODP.Net 不能处理换行符 .Net 换行符？

> ID：13306363
> 
> 赞同：0
> 
> 时间：2012-11-09T10:33:05.397
> 
> 标签：.net, sql, oracle, odp.net

对于 .Net 4.0 应用程序，我使用 ODP.Net 11 库中的 OracleClient 类。经过一番研究，有些人注意到 ODP.net 库无法处理 Windows 换行符，而只能处理 unix 换行符（无法处理 \r）。当我用空格替换每个 \r 出现时，查询运行正常。

我在这里遗漏了什么还是甲骨文只是荒谬？

我收到以下错误：

```
Message: ORA-06550: line 1, column 6:
PLS-00103: Encountered the symbol "" when expecting one of the following:

   begin case declare exit for goto if loop mod null pragma
   raise return select update while with <an identifier>
   <a double-quoted delimited-identifier> <a bind variable> <<
   close current delete fetch lock insert open rollback
   savepoint set sql execute commit forall merge pipe
The symbol "begin was inserted before "" to continue.
ORA-06550: line 2, column 90:
PLS-00103: Encountered the symbol "" when expecting one of the following:

   begin case declare end exception exit for goto if loop mod
   null pragma raise return select update while with
   <an identifier> <a double-quoted delimited-id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:04:00.393

ODP.NET 不支持，`/r`您必须像这样删除它：

```
OracleCommand cmd = new OracleCommand();
cmd .CommandType = CommandType.Text;
cmd .CommandText = commandText.Replace("\r", ""); 
```

# php - 如何将 .html() 值从 JavaScript 传递到 CodeIgniter 控制器？

> ID：13306364
> 
> 赞同：4
> 
> 时间：2012-11-09T10:33:06.063
> 
> 标签：php, javascript, jquery, codeigniter

我有一个打印按钮，当单击它时，必须触发以下 JavaScript 函数。

```
$('.print').click(function(){
    var htmlval=$('.pop_reciept').html();
    window.open('http://localhost/ccccccc/xxxxxxx/pdf/'+htmlval,'_blank');                                  
}); 
```

`htmlval`包含带有 class 的元素的 HTML `pop_reciept`，然后我将其传递给`pdf`控制器​​：

```
public function pdf($val){
   echo $val;

   return false;

} 
```

我希望显示需要显示的 HTML 内容。但事实并非如此，而是我看到了错误

> 所提交的网址带有不被接受的字符。

请帮助或提出更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:54:50.787

大多数服务器的 url 大小限制为 8kb，大块的 html 代码很容易超过它。
发送 POST 请求也解决了不允许字符的问题。
您可以在此处找到解决方案：[Window.open and pass parameters by post method](https://stackoverflow.com/questions/3951768/window-open-and-pass-parameters-by-post-method-problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:38:44.760

将特殊字符添加到变量`$config['permitted_uri_chars']`

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_=+-'; 
```

在你的 config.php

# jquery-mobile - 如何在使用 JQueryMobile 时使用 JQuery.Validate 验证选择

> ID：13306376
> 
> 赞同：0
> 
> 时间：2012-11-09T10:33:40.903
> 
> 标签：jquery-mobile, jquery-validate, html-select

我只是在探索 JQuery 的 Validate 插件。在我用 JQueryMobile 制作的 webapp 中实现的过程中，我偶然发现验证这样的元素并不像通常的输入元素那么简单。

所以问题是：如何为选择启用验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:33:40.903

诀窍包括两部分：

1.  Validate 默认忽略`:hidden`. 但这就是 JQM 对 an 所做的`<select>`：隐藏它并在顶部放置一个 div-span-wrapper。解决方案是重新定义忽略选择器：

    ```
    {ignore: ":hidden:not(select)"} 
    ```

2.  要通知用户有关无效字段的信息，您必须在包装器上显示错误：

    ```
    $(error.element).closest('.ui-select').attr("title", error.message).addClass("invalidInput") 
    ```

现在在一个工作示例中：

```
$.validator.setDefaults({
    debug: true,
    ignore: ":hidden:not(select)",
    submitHandler: function() { alert("submitted!"); },
    showErrors: function(map, list) {
        $(this.currentElements).each(function() {
            if(this.nodeName == "SELECT") {
                $(this).closest('.ui-select').removeAttr("title").removeClass("invalidInput");
                return true;
            }
            $(this).removeAttr("title").removeClass("invalidInput");
        });
        $.each(list, function(index, error) {
            if(error.element.nodeName == "SELECT") {
                $(error.element).closest('.ui-select').attr("title", error.message).addClass("invalidInput");
                return true;
            }
            $(error.element).attr("title", error.message).addClass("invalidInput");
        });
    }
});

$('div[data-role="page"]').bind('pageinit', function(event) {
    var rules = {};
    $('input:not(:button)').each(function() {
        rules[this.name] = {required:true}; 
    });
    $('#fzgherst').each(function() {
        // revalidates the select when changed, other elements gets revalidatet onblur
        $(this).on('change', function() {$(this).valid();});
        rules[this.name] = {required:true}; 
    });
    $("form").validate({
        rules: rules
    });
}); 
```

这就是所有的人！

# c++ - 哪个工具可以列出对 C 中特定变量的写访问权限？

> ID：13306381
> 
> 赞同：4
> 
> 时间：2012-11-09T10:33:47.360
> 
> 标签：c++, c, code-analysis, static-code-analysis

不幸的是，我什至不确定如何调用这种静态分析。这不是真正的控制流分析，因为我不是在寻找函数调用，也不需要数据流分析，因为我不关心实际值。

我只需要一个工具来列出对特定变量进行写访问的位置（文件、函数）。我什至不在乎该列表是否包含无法访问的行。我可以想象编写一个简单的解析器就足以完成这项任务，但我确信肯定有一个工具可以进行这种简单的分析。

作为一个穷学生，我会很感激免费或更好的开源工具，如果有人能告诉我这种类型的静态分析实际上是如何被调用的，我将同样感激！

编辑：我忘了提到代码库中没有指针算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:40:25.137

为什么不创建变量`const`，然后记下编译器禁止写访问的所有错误？

**注意**：这不会捕获变量底层内存以某种错误方式写入的错误，例如缓冲区溢出。

**编辑**：例如：

```
const int a = 1;
a = 2;
a = 3; 
```

我的编译器产生：

```
1>MyProg.c(46): error C3892: 'a' : you cannot assign to a variable that is const
1>MyProg.c(47): error C3892: 'a' : you cannot assign to a variable that is const 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:49:01.333

你的意思是这样的吗？

![在此处输入图像描述](../Images/10923e186f41e850c5a6c0642347b119.png)

这适用于您努力使用[Frama-C 的价值分析](http://frama-c.com/try_out.html)进行分析的 C 程序。它是开源的，依赖信息也可以通过编程方式获得。随着静态分析仪的发展，它处于频谱的“精确”一侧。如果您的目标是嵌入式 C 代码，它会更好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:37:12.597

我不确定是否可以编写这样的工具。指针可用于更改内存中的任意数据，而无需引用指向该数据的其他变量。想想像这样的函数`memset()`，它会改变整个内存块。

如果您对这些类型的突变不感兴趣，您仍然必须考虑传递指针。在 C 中，您可以有任意数量的指针指向相同的数据，并且您必须分析这些指针的副本是在哪里制作的。然后可以再次复制这些副本，...

因此，即使在“简单”的情况下，也需要进行大量的代码分析。

# php - 路径中带有 exec() 和空格的 forfiles

> ID：13306389
> 
> 赞同：0
> 
> 时间：2012-11-09T10:34:06.967
> 
> 标签：php, for-loop, batch-file, cmd, exec

我正在尝试使用 exec() 中的 forfiles 递归地仅删除目录中的 sql 文件。

这就是我所拥有的：

```
$dir = date('D jS, M Y \a\t H-i a') ;

exec('forfiles /p "E:\Database Dump\\'.$dir.'\" /m *.sql /c "cmd /c del @file"') ; 
```

但是，当我在命令提示符下运行我的 PHP 脚本时，它说“@file”不是参数/有效选项。

我知道它一定与路径名中的空格有关（我认为！），我尝试在不带引号的情况下运行它，用 / 和 ^ 转义空格，但没有任何乐趣。

我怎样才能做到这一点？

* * *

这是一个回声：

```
forfiles /p "E:\Database Dump\Fri 9th, Nov 2012 at 10-36 am\" /m *.sql /c "cmd /c echo @file" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:43:58.350

一个更简单的方法就是

```
del dir\*.sql /f /q 
```

或通过子目录递归使用`/s`开关。

`forfiles`根本不需要。

# ruby-on-rails-3 - 带有 MD5 摘要的 Rails 模型 before_save

> ID：13306398
> 
> 赞同：2
> 
> 时间：2012-11-09T10:34:41.883
> 
> 标签：ruby-on-rails-3, model, before-save

我有一个模型，用户输入后必须自动填写一些记录。

然后我使用`before_save`了回调，但记录不会被存储。

这是我的模型：

```
before_save :create_relation_plus_md5
has_many :bridges
attr_accessible :id, :admin_user_id, :md5, :url, :name, :cBox

validates_presence_of :name
validates_uniqueness_of :name

def create_relation_plus_md5
    baseUrl = "http://www.mysite.com/?id="
    digest = Digest::MD5.hexdigest("#{name}#{id}#{someOtherData}")
    puts "digest : #{digest}"
    md5 = digest
    url = "#{baseUrl}#{digest}"
    # + create relations
end 
```

md5 和 url 不会被存储，我想我错过了一些东西。也许我必须`save`在方法中显式调用？

我可以解决方法`after_save`并手动回调模型，但这自然会创建一个无限循环......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:42:36.223

如果要调用 setter 方法，则需要显式引用 self 。否则，您将分配给局部变量

```
md5 = "foo" # local variable
self.md5 = "foo" # method call, value will be stored in the instance. 
```

# java - 在android中加载图像会分配很大的内存

> ID：13306399
> 
> 赞同：2
> 
> 时间：2012-11-09T10:34:42.957
> 
> 标签：java, android, memory-management, android-memory

我正在使用尺寸为 720X1136 的图像作为我的应用程序的启动画面，该应用程序仅针对三星 Galaxy Nexus 手机。实际文件大小为 513Kb（从浏览器中找到）。当活动调用 onCreate 方法并设置内容视图时，日志中提到了 13.5 MB 的内存分配。

这是我在后台加载图像的活动。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:orientation="vertical">

        <ImageView android:src="@drawable/splashscreen"
                android:id="@+id/splashscreen"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"
               />

        <WebView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:visibility="invisible"
                 android:id="@+id/webview"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
        />

</RelativeLayout> 
```

如何减少这种内存分配？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:44:41.697

> 使用 @drawable/splashscreen 这个图像作为 9-Patch 图像，然后它会减少内存分配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:15:18.087

这是解决问题的步骤。

```
mRelativeLayout=(RelativeLayout)findViewById(R.id.relative_view);
        intializeScreenSize();

        mBitmap=decodeSampledBitmapFromResource(getResources(),R.drawable.splash_background,width,height);
        mDrawable=new BitmapDrawable(getResources(), mBitmap);
        mRelativeLayout.setBackgroundDrawable(mDrawable);

public static Bitmap decodeSampledBitmapFromResource(Resources res,
            int resId, int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeResource(res, resId, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth,
                reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeResource(res, resId, options);
    }

    public void intializeScreenSize(){

        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        height= displaymetrics.heightPixels;
        width= displaymetrics.widthPixels;
    }

    public static int calculateInSampleSize(BitmapFactory.Options options,
            int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float) height / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }
        }
        return inSampleSize;
    } 
```

这是一些与在android中加载位图相关的链接。 [SO答案](https://stackoverflow.com/questions/12716574/bitmap-recycle-with-largeheap-enabled?rq=1) [有效地加载位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:21:09.570

如前所述`Alex Orlov`：“磁盘上的大小与内存中位图的大小无关。在第一种情况下，图像被压缩，另一方面，位图只是一组原始像素。” 然而，即使考虑到它被存储为原始图像，**20MB**仍然太多了。如果我们考虑每像素**4B**，那将是**5Mpix**图像，但您发布的图像肯定更小。

**我有类似的问题：**我正在加载一个具有 8MB 原始格式的图像，但是，为它分配了 32MB。后来我发现这是由 dpi 缩放引起的。如果您的图像在“drawable”文件夹中，它将根据当前屏幕 dpi 自动缩放。我有一个 XHDPI 屏幕，所以我的图像水平缩放 2 倍，垂直缩放 2 倍，这就是它占用 4 倍更多内存的原因。

您可以在此处找到有关 dpi 工作原理的更多信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

如果您不想使用这个自动 android 功能并自己缩放图像，只需将“drawable”文件夹重命名为“drawable-nodpi”。“drawable”文件夹中标记为“nodpi”的所有图像都将按原样加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:14:17.463

没有人需要像素完美的闪屏，您可以轻松地将图像尺寸缩小到原来的一半，这将为您节省 3/4 的内存占用。

另一方面，我建议完全避免启动画面，这里有一篇关于这个主题的好文章：[“启动画面是邪恶的，不要使用它们！”](http://android.cyrilmottier.com/?p=632) ，否则你可能会在谷歌上搜索“启动画面是邪恶的”并获得更多反对使用它们的论据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T10:44:02.463

13mb 很好，在限制范围内。每当此启动画面消失时，位图将被回收，内存将重新用于应用程序的其余部分。

您可以用来尝试最小化此内存占用的技巧是：

. 使用 9 补丁来拉伸图像的边界（如果设计允许）

. 降低图像质量（看起来很糟糕）

# java - 如何在投票开始前插入秒表

> ID：13306403
> 
> 赞同：1
> 
> 时间：2012-11-09T10:34:51.210
> 
> 标签：java

我可以知道如何从方法中为这段代码插入秒表`Poll()`吗...我必须在数据库启动之前进行开始计数以及轮询所花费的时间。

```
 public void poll() throws Exception {
    st = conn.createStatement();

    for (int i=0; i<10; i++) 
    {
        Timestamp start;
        rs = st.executeQuery( "select * from msg_new_to_bde" );
        Timestamp end;
        //speed = end - start;

        Collection<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
        while (rs.next()) {             
            KpiMessage filedClass = convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);

        }
        for (KpiMessage pojoClass : pojoCol) {
            System.out.println("=== Iteratioin Nr. " + i + "====");
            System.out.print(pojoClass.getSequence());
            System.out.print(pojoClass.getTableName());
            System.out.print(pojoClass.getEntryTime());
            System.out.print(pojoClass.getProcessingTime());
            System.out.println(pojoClass.getStatus());
            //            System.out.println(pojoClass.getprocessDuration());
        }
        System.out.print(pojoCol.size());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:14:52.550

```
long start = System.nanoTime();
timeThisMethod();
long end = System.nanoTime();

long howLongDidItTake = end - start; 
```

这种方法比 System.currentTimeMillis() 更精确

来自 java API 的引用：

> 返回最精确的可用系统计时器的当前值，以纳秒为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:39:01.980

您必须使用 currentTimeMillis() 函数：

启动轮询之前：

```
long start = System.currentTimeMillis(); 
```

轮询执行后：

```
long stop= System.currentTimeMillis(); 
```

执行时间是停止 - 以毫秒为单位开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:39:19.067

我相信`System.currentTimeMillis`这就是你要找的。

```
long startTime = System.currentTimeMillis();
// 
long endTime = System.currentTimeMillis();
System.out.println((endTime  - startTime) + "ms"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:41:37.350

```
java.util.Date date = new java.util.Date();    
Timestamp start = new Timestamp(date.getTime());    
//process    
java.util.Date date1 = new java.util.Date();    
Timestamp end = new Timestamp(date1.getTime()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T10:45:27.997

```
long start = System.currentTimeMillis();
rs = st.executeQuery( "select * from msg_new_to_bde" );
long stop= System.currentTimeMillis();
System.out.println("execution time: " +stop-start + " ms"); 
```

# c# - 使用正则表达式评估文件名

> ID：13306413
> 
> 赞同：0
> 
> 时间：2012-11-09T10:35:41.130
> 
> 标签：c#, regex

我有一些代码可以使用正则表达式评估文件名，这很好用，但我想添加^(第二)个模式`out_\d\d\d\d\d\d_`（然后最多 150 个字符来保存地址）。显然我不想有`\d`150次，谁能告诉我最好的方法？

谢谢

```
REGEX_PATTERN = @"out_\d\d\d\d\d\d";

if (!Regex.Match(Path.GetFileNameWithoutExtension(e.Name), REGEX_PATTERN).Success) {
  return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:37:55.790

试试这个：

```
REGEX_PATTERN = @"out_\d{1,150}"; 
```

或者

```
// For strict boundary match
REGEX_PATTERN = @"^out_\d{1,150}$"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:53:48.633

你要：

```
REGEX_PATTERN = @"^out_\d{6}(?:_.{1,150})?$"; 
```

这分解为

```
`^`             - start of string
`out_\d{6}`     - `out_` followed by 6 digits
`(?:_.{1,50})?` - an optional string of _ followed by 1-150 characters
`$`             - end of string 
```

# knockout.js - 可观察变量的先前值

> ID：13306415
> 
> 赞同：0
> 
> 时间：2012-11-09T10:35:50.100
> 
> 标签：knockout.js

我有如下输入文本：

```
<input type="text" style="width: 80%" data-bind="value: Note, event: { blur: $root.UpdateNote}" /> 
```

它包含可观察变量 Note 的值。并模糊它更新说明。我的问题是在更新之前检查 note 的先前值和 note 的当前值。

这是我的包含所有变量的构造函数

```
function Goal(data) {
var self = this;

self.GoalID = data.GoalID;
self.Note = ko.observable(data.Note); 
```

}

在我的视图模型中，我已将 note 声明为可观察变量，如下所示：

```
self.Note = ko.observable(); 
```

在 knockoutjs 中，如何获取可观察变量的先前值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:53:50.213

您可以订阅可`Note`观察的更改并指定“beforeChange”参数以获取旧值：

```
function Goal(data) {
    var self = this;

    self.GoalID = data.GoalID;
    self.Note = ko.observable(data.Note);

    self.Note.subscribe(function(oldValue) {
        console.log(oldValue);
    }, self, "beforeChange");

} 
```

这是一个例子：http: [//jsfiddle.net/vyshniakov/HACbc/](http://jsfiddle.net/vyshniakov/HACbc/)

# mysql - SQL 在 2 个表辅助上具有 Count 和 SUM 函数

> ID：13306416
> 
> 赞同：1
> 
> 时间：2012-11-09T10:35:51.367
> 
> 标签：mysql, sql, count, sum

我有一个名为客户的基本表：

```
CustId Name
AB1    George Arkin
AB2    Indiana James
AB3    Michael Anjelo 
```

和另一个名为 booking 的表：

```
CustId FlightId Price
AB1    FL134    43.00 
AB1    FL122    21.00
AB1    FL134    49.00
AB1    FL122    48.00  
AB2    FL291    40.00  
AB2    FL291    29.00  
AB2    FL293    22.00  
AB2    FL862    56.00  
AB2    FL862    12.00  
AB2    FL293    99.00  
AB3    FL900    100.00 
```

现在我想做的是加入两个表。然后，我想计算一个人预订了多少航班（显示所有人），我还希望每个人旁边都有一个总价格，将他们支付的每个价格的总和相加。到目前为止，我想出了这个：

```
SELECT C.CustId, C.Name, COUNT(DISTINCT B.FlightId) AS "NumberOfTicketsPurchased"
,      SUM(DISTINCT B.Price) AS "TotalPrice"
FROM customer C, booking B 
```

但我只得到一个结果，总价格和计数不准确。

PS，这是我在自己的时间练习的东西的示例表，为下学期的数据管理做准备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:40:00.947

您将需要 GROUP BY 才能使用 Count 和 SUM 等聚合函数。你试过这个吗？

```
SELECT C.CustId, C.CName, Count(B.FlightId) , SUM(B.Price)
FROM customer C
LEFT JOIN booking b ON b.CustId = a.CustId 
GROUP BY  C.CustId 
```

编辑

```
SELECT C.CustId, C.CName, Count(B.FlightId) , SUM(B.Price) as 'price'
FROM customer C
INNER JOIN booking b ON b.CustId = a.CustId 
GROUP BY  C.CustId
HAVING price > 75 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:52:19.353

又一个[SQL Fiddle](http://www.sqlfiddle.com/#!2/4ee9b/6/0)：

```
SELECT C.CustId, C.Name,
       COUNT(B.FlightId) AS "NumberOfTicketsPurchased",
       coalesce(SUM(B.Price), 0) AS "TotalPrice"
FROM customer C
left join booking B on c.custid = b.custid
group by c.custid, c.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:40:24.860

```
SELECT C.CustId, C.Name, COUNT(B.FlightId) AS "NumberOfTicketsPurchased"
,SUM(B.Price) AS "TotalPrice"
FROM customer C join booking B
on c.CustId = b.CustId 
group by C.CustId, C.Name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:41:56.107

首先，`SUM(DISTINCT B.Price)`从来都不是一个好主意。如果两个航班的价格相同，它们只会被计算一次。

在你的情况下，你只做一个`join`，所以根本不需要`distinct`：

```
select  c.CustId
,       c.Name
,       count(b.FlightId) AS "NumberOfTicketsPurchased"
,       sum(b.Price) AS "TotalPrice"
from    customer c
left join
        booking b
on      b.CustId = c.CustId
group by
        c.CustId
,       c.Name 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-09T10:39:37.287

尝试

```
SELECT C.CustId, C.Name 
,COUNT(DISTINCT B.FlightId) AS "NumberOfTicketsPurchased", 
SUM(DISTINCT B.Price) AS "TotalPrice" 
FROM customer C, booking B 
GROUP BY C.CustId 
```

# hibernate - Spring 数据审计在我的项目中不起作用

> ID：13306426
> 
> 赞同：1
> 
> 时间：2012-11-09T10:36:15.827
> 
> 标签：hibernate, spring-data, spring-data-jpa, auditing

我正在尝试配置弹簧数据审计。

我使用 Hibernate 4.1.6、hibernate-jpa 2.0、spring-data-jpa 1.1.0、spring 3.1.2（我在依赖项中添加了 spring-aspects，因为没有它会出错）。

我的项目配置基于此[示例](http://www.springbyexample.org/examples/spring-data-jpa-auditing.html)，并进行了一些修改：

*   我的实体不扩展 AbstractAuditable 但实现 Auditable 接口
*   我没有将 jadira 属性放在哪里的 persistence.xml，而是在 DateTime 属性上使用了以下注释：`@Type(type="org.jadira.usertype.dateandtime.joda.PersistentDateTime")`

我没有任何错误，但审核不起作用：创建记录后审核字段为空。

有谁知道我做错了什么？我可以检查什么？欢迎任何建议。

这是实体代码：

```
@Entity
public class TestEntity implements Auditable<String, Long> {
  @Column
  @Id
  @SequenceGenerator(...)
  @GeneratedValue(...)
  private Long id;

  @Column
  private String createdBy;

  @Column
  @Type(type="org.jadira.usertype.dateandtime.joda.PersistentDateTime")
  private DateTime creationDate;

  @Column
  private String lastModifiedBy;

  @Column
  @Type(type="org.jadira.usertype.dateandtime.joda.PersistentDateTime")
  private DateTime lastModifiedDate;

  // getters and setters
} 
```

这是弹簧上下文配置：

```
<jpa:repositories base-package="...." />

<jpa:auditing auditor-aware-ref="auditorAware" />
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="packagesToScan" value="..." />
  <property name="mappingResources">
    <value>.../domain-orm.xml"</value>
  </property>
  <property name="jpaVendorAdapter">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    ...
    </bean>
  </property>
  <property name="jpaProperties">
    <util:properties>
      <prop key="hibernate.generate_statistics">${hibernate.generate_statistics}</prop>
    </util:properties>
  </property>
</bean>
<context:annotation-config />

<bean id="auditorAware" class="...TestAuditorAware"/> 
```

我的审计员​​知道：

```
public class TestAuditorAware implements AuditorAware<String> {
  @Override
  public String getCurrentAuditor() {
    return "TEST";
  }
} 
```

我的域-orm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
    version="2.0">
  <persistence-unit-metadata>
    <persistence-unit-defaults>
      <entity-listeners>
        <entity-listener class="org.springframework.data.jpa.domain.auditing.support.AuditingEntityListener" />
        </entity-listeners>
      </persistence-unit-defaults>
    </persistence-unit-metadata>
</entity-mappings> 
```

**更新：**我认为问题与未注册的 AuditingEntityListener 有关。我添加了 orm.xml 配置，但这并没有解决。我认为听众仍然没有注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:16:28.367

我通过添加 orm.xml 文件解决了这个问题。起初它不起作用，因为我还在文件名中添加了一个小错字（日志中没有显示错误）。

# c# - 如何在formview项目模板中找到控件

> ID：13306427
> 
> 赞同：0
> 
> 时间：2012-11-09T10:36:18.670
> 
> 标签：c#, asp.net

*我试过这个 -*

```
if (FormView1.CurrentMode == FormViewMode.ReadOnly)
{
 DropDownList ddlexpense = (DropDownList)FormView1.Row.FindControl("ddle");
} 
```

在 FormView1 DataBound ，Init，ItemCreated 和单独的函数上，但我总是得到相同的错误 - System.NullReferenceException：对象引用未设置为对象的实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T06:43:05.330

```
var cnt = FindControl(formViewTemplate.Row, "controlName");
            var htmlControl = cnt as HtmlControl;
            if (htmlControl != null)
            {//---------------------}
private Control FindControl(Control parent, string id)
    {
        foreach (Control child in parent.Controls)
        {
            string childId = string.Empty;
            if (child.ID != null)
            {
                childId = child.ID;
            }
            if (childId.ToLower() == id.ToLower())
            {
                return child;
            }
            if (child.HasControls())
            {
                Control response = FindControl(child, id);
                if (response != null)
                    return response;
            }
        }

        return null;
    } 
```

# git - 存储库访问被拒绝。通过部署密钥访问是只读的

> ID：13306435
> 
> 赞同：302
> 
> 时间：2012-11-09T10:37:00.223
> 
> 标签：git, ssh, bitbucket, ssh-keys

从heroku成功克隆我的repo并添加另一个遥控器后

```
1/ git clone git@heroku.com:[APP].git
2/ git remote add bitbucket ssh://git@bitbucket.org/[ACCOUNT]/[REPO].git
3/ git push bitbucket master 
```

运行第 (3) 行或使用 SourceTree 后我仍然收到此错误

```
conq: repository access denied. access via a deployment key is read-only. 
```

首先，我不明白这条消息在实践中意味着什么。这是耻辱。

我确实创建了 ssh 密钥对并添加到 heroku ：

```
ssh-keygen -t rsa 
heroku keys:add ./id_rsa.pub 
```

我还在 BitBucket 的部署密钥部分添加了我的密钥。但我一定是错过了什么。这个问题不是出于懒惰，我一直在阅读各种文档，包括 BitBuckets 指南。但它仍然没有解决这个问题。

这篇文章与[Can I import my heroku git repo into bitbuket 有关吗？如何？](https://stackoverflow.com/questions/13300068/can-i-import-my-heroku-git-repo-into-bitbuket-and-how/)

其他事实：

```
ssh -T hg@bitbucket.org
conq: authenticated via a deploy key.

You can use git or hg to connect to Bitbucket. Shell access is disabled.

$ ssh -v git@bitbucket.org
OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /Users/joel/.ssh/config
debug1: Applying options for bitbucket.org
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to bitbucket.org [207.223.240.181] port 22.
debug1: Connection established.
debug1: identity file /Users/joel/.ssh/id_rsa type 1
debug1: identity file /Users/joel/.ssh/id_rsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'bitbucket.org' is known and matches the RSA host key.
debug1: Found key in /Users/joel/.ssh/known_hosts:5
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/joel/.ssh/id_rsa
debug1: Remote: Forced command: conq deploykey:13907
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: read PEM private key done: type RSA
debug1: Remote: Forced command: conq deploykey:13907
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Authentication succeeded (publickey).
Authenticated to bitbucket.org ([207.223.240.181]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env LC_CTYPE = UTF-8
PTY allocation request failed on channel 0 
```

看起来一切都很好。

* * *

## 回答 #1

> 赞同：725
> 
> 时间：2012-11-09T14:24:48.067

我的第一个困惑是关于在 BitBucket中设置**SSH 密钥的确切位置。**

我是 BitBucket 的新手，我正在设置一个仅提供*读取访问权限的***部署密钥**。

 *因此，请确保您`rsa pub key`在**BitBucket 帐户设置中进行设置**。

单击您的 BitBucket 头像并选择**Bitbucket 设置**(~~管理帐户~~）。在那里您将能够设置**SSH Keys**。

我只是删除了**Deployment Key**，我现在不需要。它奏效了

[![在此处输入图像描述](../Images/f70f02b79df6b29226fe030681c5e7d2.png)](https://i.stack.imgur.com/AHlFv.png)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-08-30T08:28:23.770

现在 SSH 选项在安全设置下

单击您的头像 --> Bitbucket 设置 --> SSH 密钥 --> 添加密钥

粘贴您的公钥

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-09-27T05:39:25.767

您需要将您的密钥添加到您的个人资料中，而**不是**添加到特定的存储库中。按照这个： [https ://community.atlassian.com/t5/Bitbucket-questions/How-do-I-add-an-SSH-key-as-opposed-to-a-deployment-keys/qaq-p/413373](https://community.atlassian.com/t5/Bitbucket-questions/How-do-I-add-an-SSH-key-as-opposed-to-a-deployment-keys/qaq-p/413373)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-12-24T20:43:31.697

部署密钥是只读的。要启用写访问，您需要：

*   从您的存储库设置中删除此部署密钥。无论如何，您将无法使用此密钥写入此存储库。

*   转到“头像 -> 设置 -> SSH 密钥”并添加相同的密钥

*   现在尝试推送删除分支

您之前可以写入存储库，但这是 BitBucket 中的一个更改，您不再能够使用部署密钥进行写入。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-07-29T02:16:58.123

“部署密钥”仅用于只读访问。以下是解决此问题的好方法。

*   创建一个 SSH 密钥并将其添加到 BitBucket（用户头像 -> Bitbucket 设置 -> SSH 密钥）
*   ~/.ssh/known_hosts
*   ssh-add -D（删除加载到 SSH 代理的密钥）
*   ssh-add ~/.ssh/your_private_key_for_bitbucket
*   ssh git@bitbucket.org -Tv（验证您的密钥是否已习惯连接到 bitbucket）
*   git push '远程名称' '分支名称'

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-08-30T06:39:03.913

如果要在管理帐户 SSH 密钥下添加相同的密钥，则必须先删除部署密钥。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-10-28T22:11:29.550

TLDR：ssh-add ~/.ssh/yourkey

我刚刚解决了这个问题。

其他答案都没有帮助。

我确实有一个 ./ssh/config 包含所有正确的东西，还有一个早期的存储库工作正常（相同的 bitbucket 帐户，相同的密钥）。然后我生成了一个 deploy_key，然后创建了一个新的存储库。

之后无法克隆新的仓库。

我希望我知道 ssh 代理如何/为什么搞砸了，但添加密钥解决了它。我的意思是在我的本地 Ubuntu 中添加密钥，而不是在 bitbucket 管理员中。命令只是

```
 ~/.ssh$ ssh-add myregualrkey 
```

希望这可以帮助某人。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-10-23T03:11:35.053

我在尝试使用部署密钥时发生了这种情况，因为这正是我想要的。

我可以通过连接`ssh -T git@bitbucket.org`，它会告诉我我有权读取我想要的存储库，但`git clone`会失败。

清除`~/.ssh/known_hosts`，通过生成新密钥`ssh-keygen`，将该新密钥添加到 bitbucket，然后重试为我修复它。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-09-24T09:32:37.840

我想再次强调以下几点：

*   您可能已将 SSH 密钥添加到**您的存储库**（例如 ExampleRepo），但这**不是 SSH 密钥所在的位置**。
*   它旨在进入**您的个人资料**。**这是屏幕左下角的小头像。**在这里，你会找到一个*不同*的地方来放置你的 SSH 密钥（在安全性下）> 然后你在这里添加密钥。
*   如果您不小心将 SSH 密钥放入存储库（而不是您的帐户），请删除存储库中的那个。

我花了很长时间才意识到，即使在阅读了这里的答案之后，它也没有点击。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-03-23T12:27:38.313

首先选择或创建要用于推送到 Bitbucket 的密钥。假设它的公钥在`~/.ssh/bitbucket.pub`

*   通过登录并转到您的公共配置文件、设置、ssh-key、添加密钥，将您的公共密钥添加到 Bitbucket。
*   配置 ssh 以在与 Bitbucket 通信时使用该密钥。例如在 Linux 中添加`~/.ssh/config`：

```
 Host bitbucket.org
    IdentityFile ~/.ssh/bitbucket 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-10T10:30:01.770

最近我遇到了同样的问题。我收到以下错误：

**存储库访问被拒绝。通过部署密钥进行的访问是只读的。**

您可以拥有两种 SSH 密钥：

1.  **适用于所有存储库**的整个帐户****
***   **每个存储库 SSH 密钥**，只能用于该特定存储库。**

 **我只是删除了我的存储库 SSH 密钥并在我的帐户中添加了一个新的 SSH 密钥，它运行良好。

我希望它可以帮助某人。干杯

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-03-22T21:52:02.147

我有同样的问题 Kabir Sarin 有。解决方案是通过 SSH 克隆 repo，而不是使用 https URL。所以这对我有帮助，希望对其他人有帮助：

```
 git clone git@bitbucket.org:{accountName}/{repoName}.git 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-22T02:47:36.350

脚步：

1.  在源服务器上创建 ssh 密钥

    `ssh-keygen`

2.  Cat 并复制位于 ~./ssh 目录下的 id_rsa.pub

3.  转到 Bitbucket，如果您已经为存储库设置了访问密钥，则删除现有的公钥
4.  转到 Bitbucket 头像> Bitbucket 设置> SSH 密钥（在安全性，左窗格下）> 单击“添加密钥”> 粘贴公钥。
5.  通过在源服务器上运行以下命令检查它是否有效

    `git remote show origin`

6.  对于从源服务器获取和推送，如果协议是“https”，那么您必须通过运行以下命令将其更改为“git+ssh”

    `git remote set-url origin git+ssh://<bitbucketaccount>@bitbucket.org/<accountname>/repo.git`

7.  检查您是否可以推送到回购。

完毕！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-16T11:00:19.690

您所需要的一切 - 添加另一个密钥并使用它。

正如我发现的第一个密钥 - 始终是部署密钥。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-26T11:47:07.847

有时它不起作用，因为您在`~/.ssh/config`.

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-08T03:49:21.843

> 能够推拉的两步过程
> 步骤1：在mac上生成ssh密钥（公钥和私钥）
> 
> 步骤2：将私钥放在mac中，将公钥放在git网站
> 
> 下面详细步骤适用于mac用户

**第 1 步：生成密钥** 

1.  （确保你已经安装了 git）[https://git-scm.com/download/mac](https://git-scm.com/download/mac)
2.  打开终端并输入`ssh-keygen`这将提示您输入密钥的存储位置，您可以输入`/Users/[machinename]/.ssh/[keyname]`
3.  接下来它会要求输入密码，您可以通过按 Enter 将其留空，或者在下一个提示时输入要再次输入的关键字
4.  这将为您创建两个密钥，私有和公共，名称为 [keyname] 和 [keyname].pub

**Step2：将密钥推送到适当的位置[mac和远程帐户，即Github、bitbucket、gitlab等]**

1.  输入`ssh-add -K ~/.ssh/[keyname]`终端以将您的私钥添加到 mac
2.  键入`pbcopy < ~/.ssh/[keyname].pub`以将公钥复制到剪贴板
3.  在您各自的 git 网站上打开帐户设置并转到添加密钥，然后粘贴上面复制的公钥

> 完成，现在你可以推拉。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2019-06-23T22:11:14.627

这是从给定 BitBucket 团队/用户克隆所有 repos 的完整代码

```
# -*- coding: utf-8 -*-
"""

    ~~~~~~~~~~~~

    Little script to clone all repos from a given BitBucket team/user.

    :author: https://thepythoncoding.blogspot.com/2019/06/python-script-to-clone-all-repositories.html
    :copyright: (c) 2019
"""

from git import Repo
from requests.auth import HTTPBasicAuth

import argparse
import json
import os
import requests
import sys

def get_repos(username, password, team):
    bitbucket_api_root = 'https://api.bitbucket.org/1.0/users/'
    raw_request = requests.get(bitbucket_api_root + team, auth=HTTPBasicAuth(username, password))
    dict_request = json.loads(raw_request.content.decode('utf-8'))
    repos = dict_request['repositories']

    return repos

def clone_all(repos):
    i = 1
    success_clone = 0
    for repo in repos:
        name = repo['name']
        clone_path = os.path.abspath(os.path.join(full_path, name))

        if os.path.exists(clone_path):
            print('Skipping repo {} of {} because path {} exists'.format(i, len(repos), clone_path))
        else:
            # Folder name should be the repo's name
            print('Cloning repo {} of {}. Repo name: {}'.format(i, len(repos), name))
            try:
                git_repo_loc = 'git@bitbucket.org:{}/{}.git'.format(team, name)
                Repo.clone_from(git_repo_loc, clone_path)
                print('Cloning complete for repo {}'.format(name))
                success_clone = success_clone + 1
            except Exception as e:
                print('Unable to clone repo {}. Reason: {} (exit code {})'.format(name, e.stderr, e.status))
        i = i + 1

    print('Successfully cloned {} out of {} repos'.format(success_clone, len(repos)))

parser = argparse.ArgumentParser(description='clooney - clone all repos from a given BitBucket team/user')

parser.add_argument('-f',
                    '--full-path',
                    dest='full_path',
                    required=False,
                    help='Full path of directory which will hold the cloned repos')

parser.add_argument('-u',
                    '--username',
                    dest="username",
                    required=True,
                    help='Bitbucket username')

parser.add_argument('-p',
                    '--password',
                    dest="password",
                    required=False,
                    help='Bitbucket password')

parser.add_argument('-t',
                    '--team',
                    dest="team",
                    required=False,
                    help='The target team/user')

parser.set_defaults(full_path='')
parser.set_defaults(password='')
parser.set_defaults(team='')

args = parser.parse_args()

username = args.username
password = args.password
full_path = args.full_path
team = args.team

if not team:
    team = username

if __name__ == '__main__':
    try:
        print('Fetching repos...')
        repos = get_repos(username, password, team)
        print('Done: {} repos fetched'.format(len(repos)))
    except Exception as e:
        print('FATAL: Could not get repos: ({}). Terminating script.'.format(e))
        sys.exit(1)

    clone_all(repos) 
```

更多信息：[https ://thepythoncoding.blogspot.com/2019/06/python-script-to-clone-all-repositories.html](https://thepythoncoding.blogspot.com/2019/06/python-script-to-clone-all-repositories.html)

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2016-06-06T16:34:11.887

对于此错误：conq：存储库访问被拒绝。通过部署密钥进行的访问是只读的。

我更改了我的密钥的名称，例如

```
cd /home/try/.ssh/
mv try id_rsa
mv try.pub id_rsa.pub 
```

我在 bitbucket 上使用自己的密钥***

# naudio - 从 NAudio 访问 WPF MediaElement 声音流

> ID：13306436
> 
> 赞同：3
> 
> 时间：2012-11-09T10:37:01.433
> 
> 标签：naudio

如果我的问题听起来很幼稚，我对使用 NAudio 很抱歉。

我的项目是使用 WPF MediaElement 控件播放视频文件，然后访问播放视频的音频流（使用 NAudio）来表示正在播放的视频的音轨（波形等）。

我研究了如何让 NAudio 访问 MediaElement 控件中视频文件的音轨，但找不到资源..

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:28:51.237

如果您愿意尝试 NAudio 1.7 的预览版（[可在 NuGet 上获得](https://nuget.org/packages/NAudio)），它现在可以使用 Media Foundation 从视频文件中读取音轨。使用`MediaFoundationReader`类。以下是将配乐保存到 WAV 文件的方法：

```
using (var reader = new MediaFoundationReader("mymovie.m4v"))
{
    WaveFileWriter.CreateWaveFile(reader, "soundtrack.wav");
} 
```

显然，对于波形绘图，您不需要制作 WAV 文件。只需查看样本值即可获得波形渲染器的峰值。

请注意，Media Foundation 仅在 Windows Vista 及更高版本上受支持。

# visual-c++ - Visual C++ 如何在远程 PC 上启动应用程序进行调试？

> ID：13306437
> 
> 赞同：3
> 
> 时间：2012-11-09T10:37:05.253
> 
> 标签：visual-c++, visual-studio-2005, remote-debugging

这可能是重复的，但我没有看到...是否可以让 VC++ 启动应用程序以在远程机器上进行调试，而不是简单地附加到已经运行的远程可执行文件？理想情况下，我想构建，将新的 .exe 复制到远程机器，并通过调试器启动它，所有这些都以某种简单的方式进行。

有没有很好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:43:26.167

对于 Visual Studio *2010 ，请参阅*[http://msdn.microsoft.com/en-us/library/ff678494.aspx#scenarios](http://msdn.microsoft.com/en-us/library/ff678494.aspx#scenarios)上的“启动远程进程”部分（归功于[https://stackoverflow.com/a/6499006/ 15926](https://stackoverflow.com/a/6499006/15926) )

# python - 如何从 Python 中的 RSS 提要中获取 XML 属性和值？

> ID：13306438
> 
> 赞同：1
> 
> 时间：2012-11-09T10:37:07.007
> 
> 标签：python, rss

我正在使用雅虎！Weather API 检索一些值。这是请求：

[洛杉矶天气](http://weather.yahooapis.com/forecastrss?w=2442047&u=c)

如何从以下获取属性和值：

```
<yweather:astronomy sunrise="6:20 am" sunset="4:52 pm"/>
<yweather:condition text="Partly Cloudy" code="29" temp="14" date="Fri, 09 Nov 2012 1:47 am PST"/> 
```

我想打印类似的东西：

```
Sunrise: 6.20 am
Sunset: 4.52 pm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:54:28.493

您可以使用`feedparser`库执行此操作：

```
import feedparser

feed = feedparser.parse('http://weather.yahooapis.com/forecastrss?w=2442047&u=c')
print 'Sunrise:', feed.feed.yweather_astronomy['sunrise']
print 'Sunset:', feed.feed.yweather_astronomy['sunset'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:51:01.850

使用[`feedparser`](http://packages.python.org/feedparser/)：

```
import feedparser

feed = feedparser.parse('http://weather.yahooapis.com/forecastrss?w=2442047&u=c')
sunrise = feed.items()[0][1]["yweather_astronomy"]["sunrise"]
sunset = feed.items()[0][1]["yweather_astronomy"]["sunset"] 
```

播放结果`parse`以了解已解析提要的结构。

# jquery - 拖放：更改背景

> ID：13306440
> 
> 赞同：3
> 
> 时间：2012-11-09T10:37:11.097
> 
> 标签：jquery, background, drag-and-drop

我有一个带有可拖动对象的页面，名为`#elementoDraggabile`.

当我`#elementoDraggabile`在 x 轴上移动时，我还想更改另一个对象的背景`#elementoDroppable`

例如，当 的位置为 时`#elementoDraggabile`，`x = 1`的背景颜色为`#elementoDroppable`，`green`何时`#elementoDraggabile`为，`x = 2`则 的背景颜色`#elementoDroppable`应为`orange`。有人可以帮助我吗？

这是我的例子：http: [//goo.gl/H3zmj](http://goo.gl/H3zmj)

* * *

好的，新文件：http: [//goo.gl/P1saz](http://goo.gl/P1saz)

`#droppable`悬停时变化的颜色。是否可以在没有悬停的情况下更改他的背景但是当我拖动时`#draggable`？可能我必须修改这一行：`$("#draggable").on("hover",function(){`。这样对吗？

谢谢大家！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:34:09.763

您可以使用[on](http://api.jquery.com/on/)事件和[位置](http://api.jquery.com/position/)功能。

```
$("#draggable").on("hover",function(){

var p = $("#draggable");
var position = p.position();

if(position.left >10)
{
    $("#droppable").css("background-color","green");
}
        if(position.left >20)
                {
                    $("#droppable").css("background-color","orange");       
                }

    }); 
```

这是工作代码：http: [//jsfiddle.net/jm8AG/](http://jsfiddle.net/jm8AG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:04:22.640

您需要使用 API，例如使用每次放置元素时触发的可放置元素的[`drop`事件来更改目标的颜色。](http://api.jqueryui.com/droppable/#event-drop)

这是一个简单的例子：

> [http://jsbin.com/udijul/1/](http://jsbin.com/udijul/1/)

# iphone - 显示设备信息

> ID：13306442
> 
> 赞同：-3
> 
> 时间：2012-11-09T10:37:14.870
> 
> 标签：iphone, ios, hardware, device

我在 iphone、ipad 设备和模拟器中获取 CUP_Frequency 时遇到问题。

```
size_t length;
     int mib[6];
        int result;

    mib[0] = CTL_HW;
    mib[1] = HW_CPU_FREQ;
    length = sizeof(result);
    if (sysctl(mib, 2, &result, &length, NULL, 0) < 0)
    {
        perror("getting cpu frequency");
    }
    cpuFre=[NSString stringWithFormat:@"%.2f Mhz",(float)result]; 
```

我正在使用此代码获取 CPU 频率，但每个设备的答案都很奇怪。在模拟器中它给出 -(minus) 值，在 ipad 中给出 0，在 iphone 中给出固定 600 MHz 值。

ipad 的价值是多少，我知道模拟器的 CPU 频率是 2400 MHz，但它给出了负值。

该怎么办？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:41:57.323

看看 UIDevice 类

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)

通过执行以下操作，您将能够获得所需的大部分信息

> [UIDevice currentDevice].model

或者

> [UIDevice currentDevice].systemVersion

等等..

# c# - 哪个 excel 文件调用了我的 C# dll？

> ID：13306446
> 
> 赞同：0
> 
> 时间：2012-11-09T10:37:22.617
> 
> 标签：c#, dll

我有一个添加到 Excel VBA 代码的非托管 C# DLL。

```
Private Declare Function DoSomething Lib "myc.dll" Alias "invokePath" (ByVal strRule As String) 
```

现在从 DLL 中，我需要知道发出请求的 excel 文件的路径。

然后，我需要从 C# DLL 中的 Excel 工作簿中的单元格中读取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:33:54.177

如果可能的话，我会将其实现为 COM 加载项，而不是从 VBA 导入该函数。通过这种方式，您将可以访问 Excel`Application`实例，该实例将成为从电子表格中获取数据并与 Excel 交互的起点，而不仅仅是从函数中返回一个值。

如果您将其作为用户定义函数 (UDF) 调用，那么您还可以访问该`Application.Caller`属性，该属性将为您提供触发 UDF 评估的单元格的引用。

# php - Jquery ajax 通过 php 上传文件

> ID：13306447
> 
> 赞同：2
> 
> 时间：2012-11-09T10:37:22.613
> 
> 标签：php, jquery, ajax, upload

我的 php 文件上传有问题，我在 jquery 中通过 ajax 使用它。

这是我在 php 上传文件中的代码：

```
if ($_FILES["file"]["error"] > 0)
{
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
} else {
    move_uploaded_file($_FILES["file"]["tmp_name"],"termine.csv");
    echo "Stored in: " . $_FILES["file"]["name"];
} 
```

这是我的 jquery ajax 语句：

```
 $('#upload_csv').click( function() {
    $.ajax({
        url: '/playground/php/updatedates.php',
        type: 'POST',
        data: $('form#csv').serialize(),
    }).done(function(txt) {
            if(txt!='')alert(txt);
    });
}); 
```

这是我在 index.php 文件中的表格：

```
<form enctype="multipart/form-data" id="csv" method="POST">
            <div style="float:left">
            <input name="file" type="file" id="file" size="100">
            <br/>
            <input type="submit" id="upload_csv" value="upload csv file">
            </div>
        </form> 
```

我得到的唯一错误消息是“错误”，仅此而已。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:51:54.720

`$().serialize`总是创建一个`url-encoded`字符串，并忽略文件输入。你必须使用另一种方法。见：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

一种选择是将表单隐藏`iframe`并触发提交事件。

还可以看看 jQuery File Upload 插件：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

# asp.net - Linq：未知之前代码中的命名空间

> ID：13306450
> 
> 赞同：3
> 
> 时间：2012-11-09T10:37:43.857
> 
> 标签：asp.net, vb.net, visual-studio-2010, linq

如果我有一些带有 LINQ 扩展的东西，比如

```
// Declaration: Code Behind
Protected MyList As IList(Of Object)
// Code Before
MyList.First() 
```

在后面的代码中，VS 总是抱怨类似`'First' is not a member of 'System.Collections.Generic.IList {...}`. 一切正常，我只是想摆脱这些烦人的错误。

我试过了：

```
<%@ Import namespace="System.Linq" %> 
```

在我的 ASPX 页面中，但它没有帮助。

我还尝试了以下方法，但都没有奏效：

*   在 web.config 的 pages-node 中添加命名空间
*   `Imports System.Linq`在后面的代码中

PS：有趣的是，Resharper 不会将其标记为错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T18:34:53.480

您可能很久以前就解决了您的问题，但是对于下一个人：

您收到的消息是正确的，但没有帮助：“First”实际上不是 List 类的成员。然而，第一个是附加到 List 类（或任何实现 IQueryable 接口的类，如 List 类）的扩展方法。
不幸的是，包含 First 方法的类位于`System.Linq`命名空间中，除非您为代码提供命名空间指令（Import/using 语句），否则编译器无法找到该类。如果您将这些语句中的任何一个添加到代码文件中，您的问题应该会消失：

```
Imports System.LINQ
Using System.LINQ 
```

但是，将声明添加到您的 .aspx 文件将无济于事。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T17:21:25.353

我使用“ System.Collections.Generic ”命名空间测试了下面的代码，它工作正常......

```
 List<int> intList = new List<int>();
               intList.Add(5);
               intList.Add(10);
               intList.Add(15);
               intList.Add(20);
               intList.Add(25);
               int x = intList.First<int>();
               int y = intList.Last<int>(); 
```

这满足你的要求了吗？？

# python - 在python中解析一个特殊的xml

> ID：13306457
> 
> 赞同：2
> 
> 时间：2012-11-09T10:38:27.557
> 
> 标签：python, xml, parsing, shell

我有一个特殊的 xml 文件，如下所示：

```
<alarm-dictionary source="DDD" type="ProxyComponent">

    <alarm code="402" severity="Alarm" name="DDM_Alarm_402">
    <message>Database memory usage low threshold crossed</message>
    <description>dnKinds = database
    type = quality_of_service
    perceived_severity = minor
    probable_cause = thresholdCrossed
    additional_text = Database memory usage low threshold crossed
    </description>
    </alarm>

        ...
</alarm-dictionary> 
```

**我知道在 python 中，我可以通过以下方式获取标签警报**中的“警报代码”、“严重性” ：

```
for alarm_tag in dom.getElementsByTagName('alarm'):
    if alarm_tag.hasAttribute('code'):
        alarmcode = str(alarm_tag.getAttribute('code')) 
```

我可以得到标签**消息**中的文本，如下所示：

```
for messages_tag in dom.getElementsByTagName('message'):
    messages = ""
    for message_tag in messages_tag.childNodes:
        if message_tag.nodeType in (message_tag.TEXT_NODE, message_tag.CDATA_SECTION_NODE):
            messages += message_tag.data 
```

但我也想在标签**描述**中获得像**dnkind** (database)、**type** (quality_of_service)、**perspective_severity** (thresholdCrossed) 和**probable_cause** (Database memory usage low threshold crossed)**这样**的值。

 ********也就是我也想解析xml中标签中的内容。**

谁能帮我解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:59:12.220

一旦您从`description`标签中获得了文本，就与 XML 解析无关。您只需要进行简单的字符串解析即可将`type = quality_of_service`键/值字符串转换为更适合在 Python 中使用的内容，例如字典

由于[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)的一些稍微简单的解析，它看起来像这样

```
messages = """
<alarm-dictionary source="DDD" type="ProxyComponent">

    <alarm code="402" severity="Alarm" name="DDM_Alarm_402">
    <message>Database memory usage low threshold crossed</message>
    <description>dnKinds = database
    type = quality_of_service
    perceived_severity = minor
    probable_cause = thresholdCrossed
    additional_text = Database memory usage low threshold crossed
    </description>
    </alarm>

        ...
</alarm-dictionary>
"""

import xml.etree.ElementTree as ET

# Parse XML
tree = ET.fromstring(messages)

for alarm in tree.getchildren():
    # Get code and severity
    print alarm.get("code")
    print alarm.get("severity")

    # Grab description text
    descr = alarm.find("description").text

    # Parse "thing=other" into dict like {'thing': 'other'}
    info = {}
    for dl in descr.splitlines():
        if len(dl.strip()) > 0:
            key, _, value = dl.partition("=")
            info[key.strip()] = value.strip()
    print info 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:53:22.447

我对 Python 并不完全确定，但经过快速研究。

看到您已经可以从 XML 中的描述标记中获取所有内容，您是否可以不按换行符拆分，然后使用等号上的 str.split() 函数拆分每一行以分别为您提供名称/值？

例如

```
for messages_tag in dom.getElementsByTagName('message'):
messages = ""
for message_tag in messages_tag.childNodes:
    if message_tag.nodeType in (message_tag.TEXT_NODE, message_tag.CDATA_SECTION_NODE):
        messages += message_tag.data
tag =  str.split('=');
tagName = tag[0]
tagValue = tag[1] 
```

（我没有考虑将每条线分开和循环）

但这应该让你走上正确的轨道:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T10:58:56.733

AFAIK 没有将文本作为`DOM`元素处理的库。

但是，您可以（在`message`变量中有消息之后）执行以下操作：

```
description = {}
messageParts = message.split("\n")
for part in messageParts:
    descInfo = part.split("=")
    description[descInfo[0].strip()] = descInfo[1].strip() 
```

然后您将以地图`description`的形式获得所需的内部信息。`key-value`

您还应该在我的代码上添加错误处理...******

# javascript - 如何在 JavaScript 中发送 XML 请求

> ID：13306458
> 
> 赞同：1
> 
> 时间：2012-11-09T10:38:32.010
> 
> 标签：javascript, jquery, ajax, xmlhttprequest

我有一个眼动仪（mirametrix）作为本地主机中的服务器运行。为了从中捕获数据，我应该发送一个 xml 请求，如下所示；

```
SEND:<GET ID="TIME_TICK_FREQUENCY" /> 
```

我有一个作为客户端运行的网络应用程序，我需要通过它向该服务器发出请求。我编写了以下代码，但似乎没有将请求正确发送到服务器。

```
var request = $.ajax({
            url: "http://127.0.0.1:4242",
            type: "GET",
            dataType: "xml",
            data: { 
                data:'<GET ID="TIME_TICK_FREQUENCY" />'

            },

        }); 
```

有人可以帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:41:59.937

```
$.ajax({
    url: ajaxurl,
    data: "<root><blah><blah></root>", 
    type: 'POST',
    contentType: "text/xml",
    dataType: "text",
    success : parse,
    error : function (xhr, ajaxOptions, thrownError){  
        console.log(xhr.status);          
        console.log(thrownError);
    } 
}); 
```

我认为你需要发布它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:42:58.813

这不是普通的 javascript .. 看起来更像 jquery .. '正确' 是什么意思。发送它很友好，但不是吗？除此之外，我看到以下问题

*   url 错误，尽管您的浏览器可能会处理它，但您的 url*应该*以斜杠结尾。
*   您的 xml 无效。需要从`<?xml version="1.0"?>`.
*   如果您通过不同于 127.0.0.1\. 的主机访问此脚本，或者如果脚本在不同于 4242 的端口上运行，则如果服务器上没有[CORS](https://developer.mozilla.org/en/docs/HTTP_access_control)标头，这将无法工作。

# opengl - pyqt：为什么 QGLWidget 受 Maya 事件影响？

> ID：13306459
> 
> 赞同：0
> 
> 时间：2012-11-09T10:38:34.233
> 
> 标签：opengl, maya, qglwidget

[带有玛雅的openGL](http://vimeo.com/53142579)

我用 QGLWidget 制作了一个 openGL 视图。使用 Maya 时出现问题。正如您在视频中看到的，当我在 Maya 中单击并移动模型面板时，QGLWidget 会损坏。我发现选框矩形显示在我的 QGLWidget 上，而不是 Maya 上。为什么会出现这个问题？

# 到约会狼

我尝试按照您的建议编辑我的代码。但是......它根本不调用 makeCurrent() 和 doneCurrent() 。我希望当我单击我的 Maya 模型面板时，它可以向我发送消息，但它没有。我错过了什么？对此感到抱歉。

```
def makeCurrent(self):
    import OpenGL.WGL as wgl
    print "MAKE CURRENT!!!"
    self.prevHDC = wgl.wglGetCurrentDC()
    self.prevHRC = wgl.wglGetCurretnContext()
    super(GLWidget, self).makeCurrent()

def doneCurrent(self):
    import OpenGL.WGL as wgl
    print "DONE CURRENT!!!"
    super(GLWidget, self).doneCurrent()
    wgl.wglMakeCurrent(self.prevHDC, self.prevHRC) 
```

我写的和上面一样。但它甚至从不显示“MESSAGE”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:55:08.057

Qt 和 Maya 的事件循环很可能正在争夺处理事件。Qt 的paintGL 做正确的事，并在调用它时使OpenGL 上下文处于当前状态。但是 Maya 不会，因此 Maya 的绘图命令最终会出现在您的 OpenGL 上下文中。

与 Maya 一起玩会很棘手，因为它需要先存储哪个 OpenGL/DC 上下文是活动的，然后再切换和恢复它，一旦完成了自己的操作。您可能必须继承 QGLWidget 和 QGLContext 才能做到这一点。

# 因评论而更新

从 QGLWidget 派生，添加两个成员`HDC m_prevHDC`and `HRC m_prevHRC`，覆盖 makeCurrent 和 doneCurrent

```
void QMyGLWidget::makeCurrent()
{
    this->m_prevHDC = wglGetCurrentDC();
    this->m_prevHRC = wglGetCurrentContext();

    QGLWidget::makeCurrent();
}

void QMyGLWidget::doneCurrent()
{
     QGLWidget::doneCurrent();

     wglMakeCurrent(this->m_prevHDC, this->m_prevHRC);
} 
```

然后从这个中间类派生你的实际 GLWidget。

# svn - svn 更新和现有文件 - 需要来自存储库的文件

> ID：13306460
> 
> 赞同：1
> 
> 时间：2012-11-09T10:38:35.807
> 
> 标签：svn, svn-update

当我提交到 svn 存储库文件 FILE.TXT 并在其他计算机上我想从这个存储库更新，但在目录 FILE.TXT 存在..它写一些*svn: Failed to add file 'FILE.TXT': object of the same name已经存在*
它可以用`svn update --force`..但是 FILE.TXT 是相同的，它早在目录中..
我需要`svn update`从存储库中获取文件。当我删除原始文件并制作时，我可以做到这一点，`svn update`但我想自动做到这一点。
最好的方法是一些参数`svn`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:03:45.290

很可能您在存储库中具有相同名称但大小写不同的**FILE.TXT**和**file.txt 文件**，在这种情况下，在 Windows 上会发生这种情况。检查[这个](http://support.beanstalkapp.com/customer/portal/articles/68097-issue-with-%22name-already-exists%22-or-%22cannot-find-the-file-specified%22-in-windows)。

# c# - MVC Jquery POST 数据，从 ActionResult 重定向到 url

> ID：13306465
> 
> 赞同：0
> 
> 时间：2012-11-09T10:38:46.263
> 
> 标签：c#, jquery, asp.net-mvc

我目前正在使用 mvc。我有一个页面上有多个按钮，这确实使事情变得有些复杂。但是，我使用的按钮调用 jquery 函数将数据发布到控制器。这按预期工作，数据到达操作，操作执行除重定向之外的所有预期操作。

该函数将数据发布到控制器，或者允许控制器查看值并建立一个 URL，然后重定向到。但是重定向不起作用，并且该函数按预期调用了成功函数。如果我将数据返回到警报中，则页面的代码将在警报窗口中返回，而不是在 url 中。

这是代码：

```
 <input type="submit" value="Assign" name="Assign" onclick="doRedirect()" />

function doRedirect() {
    var action = '@Url.Action("Redirect")';
    //alert(action);
    var opt = {
        type: "POST",
        data: {
            Team: $('#Team option:selected').val()
        },
        url: action,
        success: RedirectSuccess

    };
    jQuery.ajax(opt);
}

    function RedirectSuccess(data) {
        if (data != undefined) {   
             data;          
             }
    }

public ActionResult Redirect(string Team)
    {

        var hostName = "http://localhost/test/testpage.aspx?";
        var team = "&Team=" + Team;

        var filterUrl = Team;

        return Redirect(filterUrl);**//this doesnt work**

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:42:01.547

不要从操作中发回重定向结果，而是尝试发回您想要重定向到的 URL。在客户端，您读取请求的响应，并通过设置`window.location.href`从服务器返回的 URL 进行重定向。

在您的操作中，您可以将 URL 作为 JSON 返回，例如：

```
return Json(new { url: filterUrl }); 
```

在你的成功回调中，你这样做是为了重定向：

```
if (data !== undefined && data.url !== undefined) {   
      window.location.href = data.url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:06:00.873

这就是我所做的。

```
public string Redirect(string Team)
{

    var hostName = "http://localhost/test/testpage.aspx?";
    var team = "&Team=" + Team;

    var filterUrl = hostname + Team;

    return filterUrl;
}

function RedirectSuccess(data) {
        if (data != undefined) {
            window.location = data;          
             }
    } 
```

并在我的搜索成功

# java - 没有运行 Spring 测试

> ID：13306467
> 
> 赞同：0
> 
> 时间：2012-11-09T10:38:49.827
> 
> 标签：java, spring, maven, spring-mvc, surefire

我有以下 pom.xml surefire 配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.9</version>
    <configuration>
        <printSummary>true</printSummary>
        <redirectTestOutputToFile>true</redirectTestOutputToFile>

        <includes>
            <include>**/test/resources/META-INF/spring/test-database.properties</include> 
            <include>**/src/test/java/*.java</include>
        </includes>

        <excludes>
            <exclude>**/*_Roo_*</exclude>
            <exclude>**/database-*.properties</exclude>
        </excludes>

    </configuration>
</plugin> 
```

以及以下 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/aop
                           http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
                           http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.1.xsd
                           http://www.springframework.org/schema/jee
                           http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<!-- FOR UNIT TESTING ONLY -->

    <!--
        This will automatically locate any and all property files you have
        within your classpath, provided they fall under the META-INF/spring
        directory. The located property files are parsed and their values can
        then be used within application context files in the form of
        ${propertyKey}.
    -->

    <context:property-placeholder location="classpath*:META-INF/spring/test-database.properties"/>

    <bean id="externalProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
       <property name="ignoreResourceNotFound"><value>true</value></property>
       <property name="locations">
          <list>
            <value>classpath*:META-INF/conf/configuration.properties</value>
          </list>
       </property>
    </bean>

    <!--
        Turn on AspectJ @Configurable support. As a result, any time you
        instantiate an object, Spring will attempt to perform dependency
        injection on that object. This occurs for instantiation via the "new"
        keyword, as well as via reflection. This is possible because AspectJ
        is used to "weave" Roo-based applications at compile time. In effect
        this feature allows dependency injection of any object at all in your
        system, which is a very useful feature (without @Configurable you'd
        only be able to dependency inject objects acquired from Spring or
        subsequently presented to a specific Spring dependency injection
        method). Roo applications use this useful feature in a number of
        areas, such as @PersistenceContext injection into entities.
    -->
    <context:spring-configured/>
    <!--
        This declaration will cause Spring to locate every @Component,
        @Repository and @Service in your application. In practical terms this
        allows you to write a POJO and then simply annotate the new POJO as an
        @Service and Spring will automatically detect, instantiate and
        dependency inject your service at startup time. Importantly, you can
        then also have your new service injected into any other class that
        requires it simply by declaring a field for your service inside the
        relying class and Spring will inject it. Note that two exclude filters
        are declared. The first ensures that Spring doesn't spend time
        introspecting Roo-specific ITD aspects. The second ensures Roo doesn't
        instantiate your @Controller classes, as these should be instantiated
        by a web tier application context. Refer to web.xml for more details
        about the web tier application context setup services.

        Furthermore, this turns on @Autowired, @PostConstruct etc support. These 
        annotations allow you to use common Spring and Java Enterprise Edition 
        annotations in your classes without needing to do any special configuration. 
        The most commonly used annotation is @Autowired, which instructs Spring to
        dependency inject an object into your class.
    -->

    <context:component-scan base-package="com.mms.pone.portal">
        <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>

    <!--<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="true"/>
        <property name="testOnReturn" value="true"/>
        <property name="testWhileIdle" value="true"/>
        <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
        <property name="numTestsPerEvictionRun" value="3"/>
        <property name="minEvictableIdleTimeMillis" value="1800000"/>
        <property name="validationQuery" value="SELECT 1"/> 
        <property name="initialSize" value="5" />
        <property name="maxActive" value="25" />
    </bean> -->

     <bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="true"/>
        <property name="testOnReturn" value="true"/>
        <property name="testWhileIdle" value="true"/>
        <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
        <property name="numTestsPerEvictionRun" value="3"/>
        <property name="minEvictableIdleTimeMillis" value="1800000"/>
    </bean>

    <bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property name="persistenceUnitName" value="persistenceUnit"/>
        <property name="dataSource" ref="dataSource"/>

        <property name="persistenceXmlLocation" value="classpath*:META-INF/test-persistence.xml" />
    </bean>    
</beans> 
```

一切似乎都正确，但是当我运行 mvn clean install 或 mvn test 时，文件编译，没有显示错误并显示摘要 Tests Run: 0。

任何帮助都将受到极大的欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:19:55.187

我终于找到了这个链接，发现问题出在我的 persistence.xml 和 applicationContext.xml 中的双重属性声明。一旦这些被清理并让我的文件看起来：

应用程序上下文.xml：

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="false"/>
        <property name="testOnReturn" value="false"/>
        <property name="testWhileIdle" value="false"/>
        <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
        <property name="numTestsPerEvictionRun" value="3"/>
        <property name="maxActive" value="1" />

        <property name="minEvictableIdleTimeMillis" value="1800000"/>
    </bean> 
```

持久性.xml

```
 <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />
        <property name="hibernate.hbm2ddl.auto" value="create"/>
    </properties> 
```

一切都运行得很好。

# ruby-on-rails-3.1 - 另一个@font-face-not-working-on-IE 问题

> ID：13306473
> 
> 赞同：2
> 
> 时间：2012-11-09T10:39:15.170
> 
> 标签：ruby-on-rails-3.1, internet-explorer-8, font-face, font-awesome

首先，我想提一下，我可能阅读了关于这个问题的 50 个其他主题，但我尝试过的任何内容都不适合我。

我正在使用[font-awesome-rails gem](https://github.com/bokmann/font-awesome-rails)将 FontAwesome 与我的 rails 3.1 应用程序集成。

在开发中，所有 3 种主要浏览器（FF、Chrome 和 IE7,8）中的图标都可以正常加载。

在 Production (Heroku) 中，图标仅在 FF 和 Chrome 中加载。我在 IE7 和 8 中得到方形框。

我真的不能说这是否是浏览器问题，因为它可以在我的本地机器上运行，但也不能真的说这是一个部署问题，因为它可以在其他浏览器中运行。

有任何想法吗？

**更新：**

下面是资产管道生成的 CSS。请注意 .woff 和 .tff 文件如何附加摘要哈希，但 .eot 和 .svg 文件并非如此。这可以解释为什么在生产中没有在 IE 上加载字体。

我能做些什么来解决这个问题，还是宝石所有者应该解决这个问题？

```
@font-face {
    font-family: "FontAwesome";
    font-style: normal;
    font-weight: normal;
    src: url("/assets/fontawesome-webfont.eot?#iefix") format("eot"), 
         url("/assets/fontawesome-webfont-2b313d88274b814fa936513279e62429.woff") format("woff"), 
         url("/assets/fontawesome-webfont-db4d858c72934d23138b334666f3787f.ttf") format("truetype"), 
         url("/assets/fontawesome-webfont.svg#FontAwesome") format("svg");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:18:04.153

我添加了一个额外的样式

```
@font-face {
  font-family: "FontAwesome";
  src: asset-url('fontawesome-webfont.eot', font);
  font-weight: normal;
  font-style: normal;
} 
```

Rails 正确地将摘要哈希应用于此资产，并且 IE 将其拾取。

# c++ - 如何编译 ZBar 示例？（未定义参考...）

> ID：13306475
> 
> 赞同：3
> 
> 时间：2012-11-09T10:39:23.617
> 
> 标签：c++, linker, compiler-errors, libraries, zbar

我需要为我自己的 c++ 程序使用 ZBar 库，但我什至无法编译示例。看起来编译器找不到目标文件或类似的东西，我收到诸如“未定义对`_zbar_get_error_code'的引用”之类的错误。

[我从他们的 wiki](http://sourceforge.net/apps/mediawiki/zbar/index.php?title=HOWTO%3a_Scan_video_using_the_Processor)复制了以下来源：

```
#include <iostream>
#include <zbar.h>

using namespace std;
using namespace zbar;

class MyHandler : public Image::Handler
{
void image_callback (Image &image)
{
    for(SymbolIterator symbol = image.symbol_begin();
        symbol != image.symbol_end();
        ++symbol)
        cout << "decoded " << symbol->get_type_name() << " symbol "
             << "\"" << symbol->get_data() << "\"" << endl;
    }
};

int main (int argc, char **argv)
{
const char *device = "/dev/video0";
if(argc > 1)
    device = argv[1];
Processor proc(true, device);

proc.set_config(ZBAR_NONE, ZBAR_CFG_ENABLE, 1);

MyHandler my_handler;
proc.set_handler(my_handler);

proc.set_visible();
proc.set_active();

try {
    proc.user_wait();
}
catch(ClosedError &e) {
}
return(0);
} 
```

我尝试用 shell 命令编译它（从他们的 wiki 复制）

```
g++ -o processor -lzbar processor.cpp 
```

这是我得到的错误：

```
/tmp/ccex0UN8.o: In function `zbar::throw_exception(void const*)':
scan.cpp:(.text+0xe): undefined reference to `_zbar_get_error_code'
/tmp/ccex0UN8.o: In function `zbar::Exception::what() const':
scan.cpp:(.text._ZNK4zbar9Exception4whatEv[zbar::Exception::what() const]+0x29): undefined reference to `_zbar_error_string'
/tmp/ccex0UN8.o: In function `zbar::SymbolSet::ref(int) const':
scan.cpp:(.text._ZNK4zbar9SymbolSet3refEi[zbar::SymbolSet::ref(int) const]+0x1f): undefined reference to `zbar_symbol_set_ref'
/tmp/ccex0UN8.o: In function `zbar::Symbol::ref(int) const':
scan.cpp:(.text._ZNK4zbar6Symbol3refEi[zbar::Symbol::ref(int) const]+0x1f): undefined reference to `zbar_symbol_ref'
/tmp/ccex0UN8.o: In function `zbar::Symbol::get_type_name() const':
scan.cpp:(.text._ZNK4zbar6Symbol13get_type_nameEv[zbar::Symbol::get_type_name() const]+0x1c): undefined reference to `zbar_get_symbol_name'
/tmp/ccex0UN8.o: In function `zbar::Symbol::init(zbar::zbar_symbol_s const*)':
scan.cpp:(.text._ZN4zbar6Symbol4initEPKNS_13zbar_symbol_sE[zbar::Symbol::init(zbar::zbar_symbol_s const*)]+0x1c): undefined reference to `zbar_symbol_get_type'
scan.cpp:(.text._ZN4zbar6Symbol4initEPKNS_13zbar_symbol_sE[zbar::Symbol::init(zbar::zbar_symbol_s const*)]+0x3a): undefined reference to `zbar_symbol_get_data_length'
scan.cpp:(.text._ZN4zbar6Symbol4initEPKNS_13zbar_symbol_sE[zbar::Symbol::init(zbar::zbar_symbol_s const*)]+0x47): undefined reference to `zbar_symbol_get_data'
/tmp/ccex0UN8.o: In function `zbar::SymbolIterator::SymbolIterator(zbar::SymbolSet const&)':
scan.cpp:(.text._ZN4zbar14SymbolIteratorC2ERKNS_9SymbolSetE[_ZN4zbar14SymbolIteratorC5ERKNS_9SymbolSetE]+0x55): undefined reference to `zbar_symbol_set_first_symbol'
/tmp/ccex0UN8.o: In function `zbar::SymbolIterator::SymbolIterator(zbar::SymbolIterator const&)':
scan.cpp:(.text._ZN4zbar14SymbolIteratorC2ERKS0_[_ZN4zbar14SymbolIteratorC5ERKS0_]+0x55): undefined reference to `zbar_symbol_set_first_symbol'
/tmp/ccex0UN8.o: In function `zbar::SymbolIterator::operator++()':
scan.cpp:(.text._ZN4zbar14SymbolIteratorppEv[zbar::SymbolIterator::operator++()]+0x24): undefined reference to `zbar_symbol_next'
scan.cpp:(.text._ZN4zbar14SymbolIteratorppEv[zbar::SymbolIterator::operator++()]+0x57): undefined reference to `zbar_symbol_set_first_symbol'
/tmp/ccex0UN8.o: In function `zbar::Image::Handler::_cb(zbar::zbar_image_s*, void const*)':
scan.cpp:(.text._ZN4zbar5Image7Handler3_cbEPNS_12zbar_image_sEPKv[zbar::Image::Handler::_cb(zbar::zbar_image_s*, void const*)]+0x13): undefined reference to            `zbar_image_get_userdata'
/tmp/ccex0UN8.o: In function `zbar::Image::get_symbols() const':
scan.cpp:(.text._ZNK4zbar5Image11get_symbolsEv[zbar::Image::get_symbols() const]+0xf): undefined reference to `zbar_image_get_symbols'
/tmp/ccex0UN8.o: In function `zbar::Processor::Processor(bool, char const*, bool)':
scan.cpp:(.text._ZN4zbar9ProcessorC2EbPKcb[_ZN4zbar9ProcessorC5EbPKcb]+0x1b): undefined reference to `zbar_processor_create'
/tmp/ccex0UN8.o: In function `zbar::Processor::~Processor()':
scan.cpp:(.text._ZN4zbar9ProcessorD2Ev[_ZN4zbar9ProcessorD5Ev]+0xf): undefined reference to `zbar_processor_destroy'
/tmp/ccex0UN8.o: In function `zbar::Processor::init(char const*, bool)':
scan.cpp:(.text._ZN4zbar9Processor4initEPKcb[zbar::Processor::init(char const*, bool)]+0x24): undefined reference to `zbar_processor_init'
/tmp/ccex0UN8.o: In function `zbar::Processor::set_handler(zbar::Image::Handler&)':
scan.cpp:(.text._ZN4zbar9Processor11set_handlerERNS_5Image7HandlerE[zbar::Processor::set_handler(zbar::Image::Handler&)]+0x25): undefined reference to `zbar_processor_set_data_handler'
/tmp/ccex0UN8.o: In function `zbar::Processor::set_config(zbar::zbar_symbol_type_e, zbar::zbar_config_e, int)':
scan.cpp:(.text._ZN4zbar9Processor10set_configENS_18zbar_symbol_type_eENS_13zbar_config_eEi[zbar::Processor::set_config(zbar::zbar_symbol_type_e, zbar::zbar_config_e, int)]+0x24): undefined reference to `zbar_processor_set_config'
/tmp/ccex0UN8.o: In function `zbar::Processor::set_visible(bool)':
scan.cpp:(.text._ZN4zbar9Processor11set_visibleEb[zbar::Processor::set_visible(bool)]+0x1d): undefined reference to `zbar_processor_set_visible'
/tmp/ccex0UN8.o: In function `zbar::Processor::set_active(bool)':
scan.cpp:(.text._ZN4zbar9Processor10set_activeEb[zbar::Processor::set_active(bool)]+0x1d): undefined reference to `zbar_processor_set_active'
/tmp/ccex0UN8.o: In function `zbar::Processor::user_wait(int)':
scan.cpp:(.text._ZN4zbar9Processor9user_waitEi[zbar::Processor::user_wait(int)]+0x16): undefined reference to `zbar_processor_user_wait'
collect2: ld returned 1 exit status 
```

我正在使用 Ubuntu 12.04，安装了 build-essential 和 libzbar-dev

PS：我从已经编译的示例中选择了 ZBar 而不是 ZXing，因为它检测到更多的 QR 码（例如更倾斜、更小、有更多噪音等......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:41:18.523

你可以试试：

g++ -o 处理器 processor.cpp -lzbar

# java - LWJGL Display.update() 自动将 FPS 限制为 60

> ID：13306478
> 
> 赞同：1
> 
> 时间：2012-11-09T10:39:31.627
> 
> 标签：java, lwjgl, frame-rate, game-loop

我试图让我的游戏的 FPS 达到例如 100，即使我正确调用

```
Display.sync(100); 
```

FPS是60..

主循环如下所示：

```
int delta = this.getDelta();
this.update(delta);
this.drawGL();

this.updateFPS();

Display.update(); // Automatically caps FPS to 60--unwanted
Display.sync(100); // And yet FPS is 60 
```

我应该补充一点，完全删除`Display.sync(100);`对 FPS 没有影响..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:06:26.607

确保 Display.setVsyncEnabled(true) 不在您的代码中的任何位置，如果您在任何地方都没有，请检查您的图形驱动程序设置，有时人们在那里强制启用 vsync。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:48:06.500

这是特定于机器的。在不同的机器上运行解决了它。

谢谢

# c# - 以编程方式为文本框输入创建键绑定

> ID：13306484
> 
> 赞同：0
> 
> 时间：2012-11-09T10:39:50.533
> 
> 标签：c#, wpf, key-bindings

在搜索这个站点时，我发现这篇文章[在 WPF 中创建一个简单的、未修改的键绑定，](https://stackoverflow.com/questions/8251043/create-a-simple-unmodified-key-binding-in-wpf)它展示了如何将一个简单的命令绑定到一个键。但是，我需要的远不止这些。我还想为此命令设置一个参数。将绑定到文本框的参数，我用于输入。这是我的代码：

```
var textBinding = new Binding("Text") { Source = textBoxInput };
            buttonConfirmAddKitType.SetBinding(ButtonBase.CommandParameterProperty, textBinding);
            var keybinding = new KeyBinding
                                        {
                                            Key = Key.Enter,
                                            Command = command,
                                        };
            //Here I need a way to set the source of the command to the text of the input textbox, as done above
            textBoxInput.InputBindings.Add(keybinding); 
```

这里唯一缺少的部分是如何将键绑定命令的参数绑定到我的文本框的文本，我似乎无法在任何地方找到答案。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:37:24.283

```
 var textBinding = new Binding("Text") { Source = textBoxInput };
        buttonConfirmAddKitType.SetBinding(ButtonBase.CommandParameterProperty, textBinding);
        var keybinding = new KeyBinding
        {
            Key = Key.Enter,
            Command = command,
        };
        keybinding.CommandParameter = textBoxInput.Text;
        textBoxInput.InputBindings.Add(keybinding); 
```

# javascript - 当我在按下 ESC 时在 keyDown 事件处理程序中使用 location.reload 时，不会重新加载页面。仅在 FF

> ID：13306492
> 
> 赞同：2
> 
> 时间：2012-11-09T10:40:23.263
> 
> 标签：javascript, jquery, firefox

我发现当我按下 ESC 按钮时从 keyDown 事件处理程序调用 location.reload() 调用时，它什么也没做。有谁知道一些解决方法如何重新加载页面？我还找到了[http://bugs.jqueryui.com/ticket/4922](http://bugs.jqueryui.com/ticket/4922)，看起来这个问题已经解决了。这是一个代码示例。订阅事件：

```
jQuery(document).keydown(function (event) {
    if (event.keyCode == 27) {
        closeVideoPopup();
    }
}); 
```

和 closeVideoPopup() 方法：

```
function closeVideoPopup() {
jQuery('#fade, .window_container').fadeOut(function(){
        jQuery('#fade, a.close').remove();
    });

jQuery('ul.tabs').css('z-index', '99');
jQuery('div.framing_slider').css('z-index', '9999');

location.reload();

return false; 
```

}

**请注意，此代码在除 FF 之外的所有浏览器中都能完美运行**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T10:46:07.417

这是因为`Esc`在 Firefox 中触发它后，该键会立即停止刷新。

使用 a`setTimeout`以便在`location.reload()`事件已经完成冒泡后执行。

```
jQuery(document).keydown(function (event) {
    if (event.keyCode == 27) {
        setTimeout(closeVideoPopup, 0);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/TKmS5/5/)

* * *

[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)或者更好的是，只需调用`Esc`密钥就不会取消页面重新加载：

```
jQuery(document).keydown(function (event) {
    if (event.keyCode == 27) {
        event.preventDefault();
        closeVideoPopup();
    }
}); 
```

[**小提琴**](http://jsfiddle.net/TKmS5/6/)

# fortran - C/C++ 预处理器：如何根据参数数量生成代码

> ID：13306503
> 
> 赞同：2
> 
> 时间：2012-11-09T10:40:48.197
> 
> 标签：fortran, c-preprocessor, variadic-macros

我希望能够在我的预处理器宏中执行此操作

```
#define dble double
/* Just something that converts x to a double precision float. 
   static_cast used as an illustration: */
#define dble(x) static_cast<double>(x) 
```

我知道 C 标准预处理器不允许重载。我也知道可变参数

```
#define dble(...) 
```

至少需要一个参数，并且不允许省略括号。即使有这样的洞察力，我也不能放弃它必须是解决这个问题的一种方法的感觉。有没有人有任何聪明的想法如何做到这一点？

使用示例：

```
dble x;
x = dble(3); 
```

背景：*我实际上对将 C 预处理器用于我的 Fortran 代码很感兴趣。我想为变量声明开发一个简化的符号。对于独立应用程序，DBLE 将扩展到 DOUBLE PRECISION，如果我正在为具有 C 接口的库进行 C 互操作性编译，则 DBLE 将扩展到 REAL(C_DOUBLE)。但是，DBLE 在 Fortran 中是所谓的 INTRINSIC。DBLE(3) 将 3 转换为双精度浮点数。在独立模式下，它将是 3.0d0。在 C 互操作模式下，它将被转换为 3.0_C_DOUBLE。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:23:02.907

预处理器可以处理不同数量的参数，但是这种东西的实现有点棘手，特别是在区分`0`和一些参数的情况下。在[P99](http://p99.gforge.inria.fr)中，我有 C99 的宏，如果您对 C++ 更感兴趣（没有像 C/C++ 之类的东西，顺便说一句），请查看 boost。

使用 P99 你可以做这样的事情

```
#define dble(...) P99_IF_LT(P99_NARG(__VA_ARGS__), 1)(double)(static_cast_double(__VA_ARGS__)) 
```

对于 C99，我将使用复合文字来替换 C++'`static_cast`

```
#define static_cast_double(X) ((double){ 0 } = (X)) 
```

但这将是对其自身权利的剥夺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:53:03.187

如果您使用的是 static_cast - 您已经在 C++ 世界中，它允许您使用 double(x)。所以定义 dble double 将起作用。

对于更复杂的情况 - 好吧，cpp 并不是为了处理这个问题而设计的。也许另一个结合正则表达式的预处理器可能会有所帮助。

# qt - QSqlQuery 准备好的 SELECT 语句在 exec() 上失败

> ID：13306517
> 
> 赞同：4
> 
> 时间：2012-11-09T10:41:34.370
> 
> 标签：qt, select, exec, prepared-statement

以下代码在`QSqlQuery::exec()`. 当我在没有准备好的语句参数的情况下运行查询时，它会返回正确的结果，正如人们所期望的那样`QSqlQuery::next()`

`executedQuery()`报告`":username"`实际上并没有被参数替换，而是用 a `?`（应该是这样，因为查询没有成功执行吗？）。

`db_`是一个 QSqlDatabase 类变量和`isOpen()`报告`true`。Qt 框架版本为 4.7.3。

```
DBSql::userInfo(const QString &username, 
                QString &passwd, 
                QString &name, 
                UserPriv priv)
{
  QSqlQuery userQuery(db_);
  const QString userStr("SELECT u.id, u.fullname, u.password, p.description \
                        FROM users u INNER JOIN privilege p ON u.privilege_id = p.id \
                      WHERE u.username = :username");
  userQuery.bindValue(":username", username);

  if (!userQuery.prepare(userStr))
    std::cout << "prepare failed" << std::endl;

  if (userQuery.exec()) {
    while (userQuery.next()) {
      userId = userQuery.value(0).toInt();
      name = userQuery.value(1).toString();
      passwd = userQuery.value(2).toString();
      const QString privilegeDesc = userQuery.value(3).toString();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T11:21:10.537

你必须先`userQuery->prepare(userStr)`打电话`userQuery->bindValue(":username", username)`

# python - 使用 matplotlib 从绘图中获取数据

> ID：13306519
> 
> 赞同：11
> 
> 时间：2012-11-09T10:41:39.053
> 
> 标签：python, matplotlib, scatter-plot

我在 python 中使用 matplotlib 来构建散点图。

假设我有以下 2 个数据列表。

> X=[1,2,3,4,5]
> 
> Y=[6,7,8,9,10]

然后我使用 X 作为 X 轴值和 Y 作为 Y 轴值来制作散点图。所以我会有一张上面有 5 个散射点的图片，对吧？

现在的问题是：是否可以将这 5 个点与实际数据建立联系。例如，当我点击这 5 个点之一时，它可以告诉我我使用了哪些原始数据来得出这个点？

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T11:04:42.140

使用[Joe Kington 的 DataCursor](https://stackoverflow.com/a/4674445/190597)的略微修改版本：

```
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import matplotlib.cbook as cbook
import numpy as np

def fmt(x, y):
    return 'x: {x:0.2f}\ny: {y:0.2f}'.format(x = x, y = y)

class DataCursor(object):
    # https://stackoverflow.com/a/4674445/190597
    """A simple data cursor widget that displays the x,y location of a
    matplotlib artist when it is selected."""
    def __init__(self, artists, x = [], y = [], tolerance = 5, offsets = (-20, 20),
                 formatter = fmt, display_all = False):
        """Create the data cursor and connect it to the relevant figure.
        "artists" is the matplotlib artist or sequence of artists that will be 
            selected. 
        "tolerance" is the radius (in points) that the mouse click must be
            within to select the artist.
        "offsets" is a tuple of (x,y) offsets in points from the selected
            point to the displayed annotation box
        "formatter" is a callback function which takes 2 numeric arguments and
            returns a string
        "display_all" controls whether more than one annotation box will
            be shown if there are multiple axes.  Only one will be shown
            per-axis, regardless. 
        """
        self._points = np.column_stack((x,y))
        self.formatter = formatter
        self.offsets = offsets
        self.display_all = display_all
        if not cbook.iterable(artists):
            artists = [artists]
        self.artists = artists
        self.axes = tuple(set(art.axes for art in self.artists))
        self.figures = tuple(set(ax.figure for ax in self.axes))

        self.annotations = {}
        for ax in self.axes:
            self.annotations[ax] = self.annotate(ax)

        for artist in self.artists:
            artist.set_picker(tolerance)
        for fig in self.figures:
            fig.canvas.mpl_connect('pick_event', self)

    def annotate(self, ax):
        """Draws and hides the annotation box for the given axis "ax"."""
        annotation = ax.annotate(self.formatter, xy = (0, 0), ha = 'right',
                xytext = self.offsets, textcoords = 'offset points', va = 'bottom',
                bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),
                arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0')
                )
        annotation.set_visible(False)
        return annotation

    def snap(self, x, y):
        """Return the value in self._points closest to (x, y).
        """
        idx = np.nanargmin(((self._points - (x,y))**2).sum(axis = -1))
        return self._points[idx]
    def __call__(self, event):
        """Intended to be called through "mpl_connect"."""
        # Rather than trying to interpolate, just display the clicked coords
        # This will only be called if it's within "tolerance", anyway.
        x, y = event.mouseevent.xdata, event.mouseevent.ydata
        annotation = self.annotations[event.artist.axes]
        if x is not None:
            if not self.display_all:
                # Hide any other annotation boxes...
                for ann in self.annotations.values():
                    ann.set_visible(False)
            # Update the annotation in the current axis..
            x, y = self.snap(x, y)
            annotation.xy = x, y
            annotation.set_text(self.formatter(x, y))
            annotation.set_visible(True)
            event.canvas.draw()

x=[1,2,3,4,5]
y=[6,7,8,9,10]

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
scat = ax.scatter(x, y)
DataCursor(scat, x, y)
plt.show() 
```

产量

![在此处输入图像描述](../Images/d4b29e81c50897ef3386b21307c4c4e8.png)

您可以单击任何点，气球将显示基础数据值。

* * *

我对 DataCursor 的轻微修改是添加了该`snap`方法，该方法确保显示的数据点来自原始数据集，而不是鼠标实际单击的位置。

* * *

如果你安装了 scipy，你可能更喜欢这个版本的光标，它使气球跟随鼠标（不点击）：

```
import datetime as DT
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import numpy as np
import scipy.spatial as spatial

def fmt(x, y, is_date):
    if is_date:
        x = mdates.num2date(x).strftime("%Y-%m-%d")
        return 'x: {x}\ny: {y}'.format(x=x, y=y)
    else:
        return 'x: {x:0.2f}\ny: {y:0.2f}'.format(x=x, y=y)

class FollowDotCursor(object):
    """Display the x,y location of the nearest data point."""
    def __init__(self, ax, x, y, tolerance=5, formatter=fmt, offsets=(-20, 20)):
        try:
            x = np.asarray(x, dtype='float')
            self.is_date = False
        except (TypeError, ValueError):
            x = np.asarray(mdates.date2num(x), dtype='float')
            self.is_date = True
        y = np.asarray(y, dtype='float')
        self._points = np.column_stack((x, y))
        self.offsets = offsets
        self.scale = x.ptp()
        self.scale = y.ptp() / self.scale if self.scale else 1
        self.tree = spatial.cKDTree(self.scaled(self._points))
        self.formatter = formatter
        self.tolerance = tolerance
        self.ax = ax
        self.fig = ax.figure
        self.ax.xaxis.set_label_position('top')
        self.dot = ax.scatter(
            [x.min()], [y.min()], s=130, color='green', alpha=0.7)
        self.annotation = self.setup_annotation()
        plt.connect('motion_notify_event', self)

    def scaled(self, points):
        points = np.asarray(points)
        return points * (self.scale, 1)

    def __call__(self, event):
        ax = self.ax
        # event.inaxes is always the current axis. If you use twinx, ax could be
        # a different axis.
        if event.inaxes == ax:
            x, y = event.xdata, event.ydata
        elif event.inaxes is None:
            return
        else:
            inv = ax.transData.inverted()
            x, y = inv.transform([(event.x, event.y)]).ravel()
        annotation = self.annotation
        x, y = self.snap(x, y)
        annotation.xy = x, y
        annotation.set_text(self.formatter(x, y, self.is_date))
        self.dot.set_offsets((x, y))
        bbox = ax.viewLim
        event.canvas.draw()

    def setup_annotation(self):
        """Draw and hide the annotation box."""
        annotation = self.ax.annotate(
            '', xy=(0, 0), ha = 'right',
            xytext = self.offsets, textcoords = 'offset points', va = 'bottom',
            bbox = dict(
                boxstyle='round,pad=0.5', fc='yellow', alpha=0.75),
            arrowprops = dict(
                arrowstyle='->', connectionstyle='arc3,rad=0'))
        return annotation

    def snap(self, x, y):
        """Return the value in self.tree closest to x, y."""
        dist, idx = self.tree.query(self.scaled((x, y)), k=1, p=1)
        try:
            return self._points[idx]
        except IndexError:
            # IndexError: index out of bounds
            return self._points[0]

x = [DT.date.today()+DT.timedelta(days=i) for i in [10,20,30,40,50]]
y = [6,7,8,9,10]

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
ax.scatter(x, y)
cursor = FollowDotCursor(ax, x, y)
fig.autofmt_xdate()
plt.show() 
```

[![在此处输入图像描述](../Images/85bc701b52adf197be07b054b99519e1.png)](https://i.stack.imgur.com/G4vnA.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-02T21:41:25.613

现在可以在几行中使用 mpld3 做到这一点：

[https://mpld3.github.io/examples/html_tooltips.html](https://mpld3.github.io/examples/html_tooltips.html)

# php - 当我们用php调用文件时，将连接的文件列为数组？

> ID：13306521
> 
> 赞同：1
> 
> 时间：2012-11-09T10:41:42.857
> 
> 标签：php, resources, network-protocols

我想要实现的是，当我打开一个网站时，它会通过加载图像、swf 文件、css 文件等来启动网络活动。php 中有什么方法可以将这些资源的列表作为数组获取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:55:25.007

> 我认为这（有点）可能的唯一方法是使用 PHP 解析呈现的 HTML 页面并查找资源。– 皮哈

如果你想遵循这个方向，你可以使用[file_get_html](http://simplehtmldom.sourceforge.net/)

```
$html = file_get_html("http://stackoverflow.com");
$list = array();
foreach ( $html->find("[src=*],link") as $src ) {
    isset($src->src) AND $list[] = $src->src ;
    isset($src->href) AND $list[] = $src->href ;
}
var_dump($list); 
```

例子

```
array
  0 => string 'http://cdn.sstatic.net/stackoverflow/img/favicon.ico' (length=52)
  1 => string 'http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png' (length=61)
  2 => string '/opensearch.xml' (length=15)
  3 => string 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' (length=63)
  4 => string 'http://cdn.sstatic.net/js/stub.js?v=8a629d6e9fb6' (length=48)
  5 => string 'http://cdn.sstatic.net/stackoverflow/all.css?v=d16ae3f98d2e' (length=59)
  6 => string '/feeds' (length=6)
  7 => string 'http://i.stack.imgur.com/NAGkl.png' (length=34)
  8 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  9 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  10 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  11 => string 'http://i.stack.imgur.com/L8rHf.png' (length=34)
  12 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  13 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  14 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  15 => string 'http://i.stack.imgur.com/6QN0y.png' (length=34)
  16 => string 'http://i.stack.imgur.com/L8rHf.png' (length=34)
  17 => string 'http://i.stack.imgur.com/L8rHf.png' (length=34)
  18 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  19 => string 'http://i.stack.imgur.com/dmHl0.png' (length=34)
  20 => string 'http://i.stack.imgur.com/tKsDb.png' (length=34)
  21 => string 'http://i.stack.imgur.com/L8rHf.png' (length=34)
  22 => string 'http://i.stack.imgur.com/dmHl0.png' (length=34)
  23 => string 'http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif' (length=53) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:45:37.327

从 PHP 中找出资源并不是一个好主意，因为您还必须检查外部链接（例如 CSS 包含在任何 CSS 文件中）。在任何情况下都有太多的可能性来处理这个问题。

但是，PeeHaa 是对的，您必须解析每个文件（图像除外）。

# view - Windows 8 应用程序开发：无法更改 Visual Studio 2012 中的显示模式

> ID：13306522
> 
> 赞同：3
> 
> 时间：2012-11-09T10:41:44.873
> 
> 标签：view, windows-8, visual-studio-2012, orientation

目前我在使用 Visual Studio 2012 Professional 时遇到问题。我正在按照本教程开发一个简单的 Windows 应用商店应用程序：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)。直到此时，一切都很好。

但是，在第 3 步，我被告知要尝试不同的视图方向。这应该通过前往“设备”并在那里选择另一个视图来完成。问题是：“设备”中的所有选项都是**灰色的**（不可选择）。到目前为止，我还无法弄清楚问题是什么。

我还不能发布图片，所以这里是[截图的链接](http://s14.postimage.org/6lvbyfwlt/Options_greyed_out.png)。

*额外的信息：*

*   我在 4GB RAM、2.1 GHz Core2Duo 系统上运行 Windows 8 Enterprise（64 位）。

是否有任何 Windows 8 开发人员可以帮助我？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:32:36.993

正如 Hans Passant 亲切地指出的那样，我在本地机器上而不是在模拟器上进行测试。切换这个解决了这个问题。谢谢！[http://blogs.msdn.com/b/visualstudio/archive/2011/09/29/first-look-at-windows-simulator.aspx](http://blogs.msdn.com/b/visualstudio/archive/2011/09/29/first-look-at-windows-simulator.aspx)

# twitter-bootstrap - 在 Twitter Bootstrap 2.0 中排列标签和只读文本

> ID：13306530
> 
> 赞同：47
> 
> 时间：2012-11-09T10:42:01.733
> 
> 标签：twitter-bootstrap

我有一个混合了可编辑和只读字段的表单，我想使用 Bootstrap 设置样式。可编辑字段正确对齐，但只读字段未正确对齐，如下图所示：

![只读字段](../Images/0f182dc7b92551e4226d9f644a2fb653.png)

我使用的 HTML 是：

```
<form class="form-horizontal">
<div class="control-group">
  <label class="control-label">Name</label>
  <div class="controls">
    John Smith
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="date_of_birth">Date of Birth</label>
  <div class="controls">
    <input name="date_of_birth" id="date_of_birth" size="16" type="text" value="" />
    <span class="help-inline">dd/mm/yyyy</span>
  </div>
</div>
</form> 
```

我不想为无法编辑的字段显示只读输入，因为当用户无法在框中单击时会感到困惑/沮丧，而这些字段永远无法编辑，所以它不会将它们显示为禁用/只读真的没有意义。我只想显示文本并与标签正确对齐。有没有办法可以通过在 Bootstrap 中使用某些东西或覆盖默认样式来做到这一点？

我的问题类似于[这个](https://stackoverflow.com/questions/9887430/how-to-line-up-labels-and-read-only-fields-in-a-bootstrap-form)问题，没有得到回答（至少不是对原始问题的回答），并且由于 Bootstrap 在过去 7 个月中发布了多个版本，我认为如果有任何变化，值得再次询问.

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-08-14T19:54:08.460

从 bootstrap 3.0 开始，添加了一个类来处理这个问题

> 当您需要在水平表单中的表单标签旁边放置常规的静态文本时，请`.form-control-static`使用`<p>`

```
<div class="controls">
  <p class="form-control-static">Lorem Ipsum and then some</p>
</div> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-09T15:43:59.207

创建您自己的样式并将其应用如下 -

```
.controls.readonly
{
  padding-top: 5px;
}

<div class="control-group">
  <label class="control-label">Name</label>
  <div class="controls readonly">
    John Smith
  </div>
</div> 
```

Bootstrap 并没有涵盖所有可能发生的情况，您需要制作自己的样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-29T20:34:02.970

如果您使用的是 Bootstrap 3，请务必使用`form-control-static`该类。如果这不是一个选项，您可以使用`control-label`该类并拥有另一个删除粗体字体粗细的类。

在您的 html 中：

```
<div class="control-group">
  <label class="control-label">Name</label>
  <label class="control-label static-text">
    John Smith
  </label>
</div> 
```

在你的 CSS 中：

```
.static-text {
    font-weight: normal;
} 
```

只需确保在 html 中的属性*之后*`static-text`列出类。这样它就会覆盖建立的 by 。 *`control-label``class``font-weight``control-label`*

 *在您的情况下，您可能还想调整字体大小。

当然，如果 bootstrap 更改了`control-label`类的 CSS 属性，您可能需要返回并调整您的`static-text`类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-06T15:11:55.943

为了添加到 Simon 的帖子中，我添加`display: inline-block;`了 CSS。

这是为了匹配标签和文本的显示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-25T13:44:46.310

就像@pwaring 说的那样，对我来说还需要更多样式：

```
.controls.readonly{
 font-size: 14px;
 line-height: 20px;
 padding-top: 5px;
}

<div class="controls readonly">
    Lorem Ipsum and then some
  </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-30T02:46:05.750

这是使用 chris vdp 的答案，并为那些没有发现 chris 的答案显而易见的人（比如我和挪威的 Eduardo）提供完整的 HTML。

我可能会显示比需要更多的代码，但我发现上述解决方案不在我大部分时间需要的“复制粘贴级别”。:-) 我想为您提供一些我知道有效的东西，并且可以以一种非常明显的方式粘贴到您的代码中。只需将此结构插入 HTML 的任何位置即可。

注意：这适用于并且需要 Bootstrap 3。

```
<form class="form-horizontal" role="form">
    <div class="control-group">
        <label for="personName" class="control-label col-sm-2">Name</label>
        <div class="controls col-sm-10">
            <p id="personName" class="form-control-static">John Smith</p>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label col-sm-2" for="date_of_birth">Date of Birth</label>
        <div class="controls">
            <input class="col-sm-3" name="date_of_birth" id="date_of_birth" size="16" type="text" value="" />
            <span class="help-inline col-sm-3">dd/mm/yyyy</span>
        </div>
    </div>
</form> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-09T12:07:47.943

您可以扩展`controls`类：

```
<style>
.controls.aligncorrect{
  padding-top: 5px;
}
</style> 
```

然后像这样使用它：

```
<div class="controls aligncorrect" style="padding-top:5px;">
    John Smith
  </div> 
```*

# html - 如何在网站上链接 MSN 通话功能？

> ID：13306531
> 
> 赞同：1
> 
> 时间：2012-11-09T10:42:17.863
> 
> 标签：html, msn, msn-messenger, windows-live-messenger

我想在我的网站上创建一个图标，单击它时可以在 MSN 上呼叫我。我喜欢 Skype 的类似功能：

```
 <a href="call:myskypeid">Click here to call me on Skype</a> 
```

不用打电话，打开聊天窗口也不错。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:52:50.160

谷歌了一下，在这个网页上找到了 msnim: 协议：[http ://www.tech-recipes.com/rx/1157/msn-messenger-msnim-hyperlink-command-codes/](http://www.tech-recipes.com/rx/1157/msn-messenger-msnim-hyperlink-command-codes/)

无法测试，没有 MSN 信使。

# ruby - 如何使用二进制搜索找到数组中的插入点？

> ID：13306537
> 
> 赞同：6
> 
> 时间：2012-11-09T10:43:02.993
> 
> 标签：ruby, algorithm, binary-search

在数组中进行二分搜索的基本思想很简单，但如果搜索未能找到确切的项目，它可能会返回一个“近似”索引。（我们有时可能会返回一个值大于或小于搜索值的索引）。

为了寻找确切的插入点，似乎在我们得到大致位置之后，我们可能需要向左或向右“扫描”以找到确切的插入位置，这样，比如说，在 Ruby 中，我们可以这样做`arr.insert(exact_index, value)`

我有以下解决方案，但处理时`begin_index >= end_index`有点混乱。我想知道是否可以使用更优雅的解决方案？

（如果找到完全匹配，此解决方案不关心扫描多个匹配项，因此为完全匹配返回的索引可能指向与该值对应的任何索引......但我认为如果它们都是整数，我们在我们知道找到完全匹配后，总是可以搜索`a - 1`，找到左边界，或者搜索`a + 1`右边界。）

我的解决方案：

```
DEBUGGING = true

def binary_search_helper(arr, a, begin_index, end_index)
  middle_index = (begin_index + end_index) / 2
  puts "a = #{a}, arr[middle_index] = #{arr[middle_index]}, " +
           "begin_index = #{begin_index}, end_index = #{end_index}, " +
           "middle_index = #{middle_index}" if DEBUGGING
  if arr[middle_index] == a
    return middle_index
  elsif begin_index >= end_index
    index = [begin_index, end_index].min
    return index if a < arr[index] && index >= 0  #careful because -1 means end of array
    index = [begin_index, end_index].max
    return index if a < arr[index] && index >= 0
    return index + 1
  elsif a > arr[middle_index]
    return binary_search_helper(arr, a, middle_index + 1, end_index)
  else
    return binary_search_helper(arr, a, begin_index, middle_index - 1)
  end
end

# for [1,3,5,7,9], searching for 6 will return index for 7 for insertion
# if exact match is found, then return that index
def binary_search(arr, a)
  puts "\nSearching for #{a} in #{arr}" if DEBUGGING
  return 0 if arr.empty?
  result = binary_search_helper(arr, a, 0, arr.length - 1)
  puts "the result is #{result}, the index for value #{arr[result].inspect}" if DEBUGGING
  return result
end

arr = [1,3,5,7,9]
b = 6
arr.insert(binary_search(arr, b), b)
p arr

arr = [1,3,5,7,9,11]
b = 6
arr.insert(binary_search(arr, b), b)
p arr

arr = [1,3,5,7,9]
b = 60
arr.insert(binary_search(arr, b), b)
p arr

arr = [1,3,5,7,9,11]
b = 60
arr.insert(binary_search(arr, b), b)
p arr

arr = [1,3,5,7,9]
b = -60
arr.insert(binary_search(arr, b), b)
p arr

arr = [1,3,5,7,9,11]
b = -60
arr.insert(binary_search(arr, b), b)
p arr

arr = [1]
b = -60
arr.insert(binary_search(arr, b), b)
p arr

arr = [1]
b = 60
arr.insert(binary_search(arr, b), b)
p arr

arr = []
b = 60
arr.insert(binary_search(arr, b), b)
p arr 
```

结果：

```
Searching for 6 in [1, 3, 5, 7, 9]
a = 6, arr[middle_index] = 5, begin_index = 0, end_index = 4, middle_index = 2
a = 6, arr[middle_index] = 7, begin_index = 3, end_index = 4, middle_index = 3
a = 6, arr[middle_index] = 5, begin_index = 3, end_index = 2, middle_index = 2
the result is 3, the index for value 7
[1, 3, 5, 6, 7, 9]

Searching for 6 in [1, 3, 5, 7, 9, 11]
a = 6, arr[middle_index] = 5, begin_index = 0, end_index = 5, middle_index = 2
a = 6, arr[middle_index] = 9, begin_index = 3, end_index = 5, middle_index = 4
a = 6, arr[middle_index] = 7, begin_index = 3, end_index = 3, middle_index = 3
the result is 3, the index for value 7
[1, 3, 5, 6, 7, 9, 11]

Searching for 60 in [1, 3, 5, 7, 9]
a = 60, arr[middle_index] = 5, begin_index = 0, end_index = 4, middle_index = 2
a = 60, arr[middle_index] = 7, begin_index = 3, end_index = 4, middle_index = 3
a = 60, arr[middle_index] = 9, begin_index = 4, end_index = 4, middle_index = 4
the result is 5, the index for value nil
[1, 3, 5, 7, 9, 60]

Searching for 60 in [1, 3, 5, 7, 9, 11]
a = 60, arr[middle_index] = 5, begin_index = 0, end_index = 5, middle_index = 2
a = 60, arr[middle_index] = 9, begin_index = 3, end_index = 5, middle_index = 4
a = 60, arr[middle_index] = 11, begin_index = 5, end_index = 5, middle_index = 5
the result is 6, the index for value nil
[1, 3, 5, 7, 9, 11, 60]

Searching for -60 in [1, 3, 5, 7, 9]
a = -60, arr[middle_index] = 5, begin_index = 0, end_index = 4, middle_index = 2
a = -60, arr[middle_index] = 1, begin_index = 0, end_index = 1, middle_index = 0
a = -60, arr[middle_index] = 9, begin_index = 0, end_index = -1, middle_index = -1
the result is 0, the index for value 1
[-60, 1, 3, 5, 7, 9]

Searching for -60 in [1, 3, 5, 7, 9, 11]
a = -60, arr[middle_index] = 5, begin_index = 0, end_index = 5, middle_index = 2
a = -60, arr[middle_index] = 1, begin_index = 0, end_index = 1, middle_index = 0
a = -60, arr[middle_index] = 11, begin_index = 0, end_index = -1, middle_index = -1
the result is 0, the index for value 1
[-60, 1, 3, 5, 7, 9, 11]

Searching for -60 in [1]
a = -60, arr[middle_index] = 1, begin_index = 0, end_index = 0, middle_index = 0
the result is 0, the index for value 1
[-60, 1]

Searching for 60 in [1]
a = 60, arr[middle_index] = 1, begin_index = 0, end_index = 0, middle_index = 0
the result is 1, the index for value nil
[1, 60]

Searching for 60 in []
[60] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T10:58:02.113

这是 Oracles Java 中包含的 Java 的 java.util.Arrays.binarySearch 的代码：

```
 /**
     * Searches the specified array of ints for the specified value using the
     * binary search algorithm.  The array must be sorted (as
     * by the {@link #sort(int[])} method) prior to making this call.  If it
     * is not sorted, the results are undefined.  If the array contains
     * multiple elements with the specified value, there is no guarantee which
     * one will be found.
     *
     * @param a the array to be searched
     * @param key the value to be searched for
     * @return index of the search key, if it is contained in the array;
     *         otherwise, <tt>(-(<i>insertion point</i>) - 1)</tt>.  The
     *         <i>insertion point</i> is defined as the point at which the
     *         key would be inserted into the array: the index of the first
     *         element greater than the key, or <tt>a.length</tt> if all
     *         elements in the array are less than the specified key.  Note
     *         that this guarantees that the return value will be &gt;= 0 if
     *         and only if the key is found.
     */
    public static int binarySearch(int[] a, int key) {
        return binarySearch0(a, 0, a.length, key);
    }

    // Like public version, but without range checks.
    private static int binarySearch0(int[] a, int fromIndex, int toIndex,
                                     int key) {
        int low = fromIndex;
        int high = toIndex - 1;

        while (low <= high) {
            int mid = (low + high) >>> 1;
            int midVal = a[mid];

            if (midVal < key)
                low = mid + 1;
            else if (midVal > key)
                high = mid - 1;
            else
                return mid; // key found
        }
        return -(low + 1);  // key not found.
    } 
```

该算法已被证明是合适的，我喜欢这样一个事实，即您可以立即从结果中知道它是完全匹配还是插入点的提示。

这就是我将其翻译成红宝石的方式：

```
# Inserts the specified value into the specified array using the binary
# search algorithm. The array must be sorted prior to making this call.
# If it is not sorted, the results are undefined.  If the array contains
# multiple elements with the specified value, there is no guarantee
# which one will be found.
#
# @param [Array] array the ordered array into which value should be inserted
# @param [Object] value the value to insert
# @param [Fixnum|Bignum] from_index ordered sub-array starts at
# @param [Fixnum|Bignum] to_index ordered sub-array ends the field before
# @return [Array] the resulting array
def self.insert(array, value, from_index=0,  to_index=array.length)
  array.insert insertion_point(array, value, from_index, to_index), value
end

# Searches the specified array for an insertion point ot the specified value
# using the binary search algorithm.  The array must be sorted prior to making
# this call. If it is not sorted, the results are undefined.  If the array
# contains multiple elements with the specified value, there is no guarantee
# which one will be found.
#
# @param [Array] array the ordered array into which value should be inserted
# @param [Object] value the value to insert
# @param [Fixnum|Bignum] from_index ordered sub-array starts at
# @param [Fixnum|Bignum] to_index ordered sub-array ends the field before
# @return [Fixnum|Bignum] the position where value should be inserted
def self.insertion_point(array, value, from_index=0,  to_index=array.length)
  raise(ArgumentError, 'Invalid Range') if from_index < 0 || from_index > array.length || from_index > to_index || to_index > array.length
  binary_search = _binary_search(array, value, from_index, to_index)
  if binary_search < 0
    -(binary_search + 1)
  else
    binary_search
  end
end

# Searches the specified array for the specified value using the binary
# search algorithm.  The array must be sorted prior to making this call.
# If it is not sorted, the results are undefined.  If the array contains
# multiple elements with the specified value, there is no guarantee which
# one will be found.
#
# @param [Array] array the ordered array in which the value should be searched
# @param [Object] value the value to search for
# @param [Fixnum|Bignum] from_index ordered sub-array starts at
# @param [Fixnum|Bignum] to_index ordered sub-array ends the field before
# @return [Fixnum|Bignum] if > 0 position of value, otherwise -(insertion_point + 1)
def self.binary_search(array, value, from_index=0,  to_index=array.length)
  raise(ArgumentError, 'Invalid Range') if from_index < 0 || from_index > array.length || from_index > to_index || to_index > array.length
  _binary_search(array, value, from_index, to_index)
end

private
# Like binary_search, but without range checks.
#
# @param [Array] array the ordered array in which the value should be searched
# @param [Object] value the value to search for
# @param [Fixnum|Bignum] from_index ordered sub-array starts at
# @param [Fixnum|Bignum] to_index ordered sub-array ends the field before
# @return [Fixnum|Bignum] if > 0 position of value, otherwise -(insertion_point + 1)
def self._binary_search(array, value, from_index, to_index)
  low = from_index
  high = to_index - 1

  while low <= high do
    mid = (low + high) / 2
    mid_val = array[mid]

    if mid_val < value
      low = mid + 1
    elsif mid_val > value
      high = mid - 1
    else
      return mid # value found
    end
  end
  -(low + 1) # value not found.
end 
```

代码返回的值与 OP 为他的测试数据提供的值相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:08:00.643

### 2020 年更新

实际上，二分查找的插入问题已经得到了很好的研究。有左插入点和右插入点。代码可以在[Wikipedia](https://en.wikipedia.org/wiki/Binary_search_algorithm)和[Rosetta Code](https://rosettacode.org/wiki/Binary_search)上找到。例如，要找到左边的插入点，代码是：

```
 BinarySearch_Left(A[0..N-1], value) {
      low = 0
      high = N - 1
      while (low <= high) {
          // invariants: value > A[i] for all i < low
                         value <= A[i] for all i > high
          mid = (low + high) / 2
          if (A[mid] >= value)
              high = mid - 1
          else
              low = mid + 1
      }
      return low
  } 
```

一个注释是关于[溢出错误的](https://ai.googleblog.com/2006/06/extra-extra-read-all-about-it-nearly.html)，所以`mid`真的应该找到`low + floor((high - low) / 2)`.

## 之前的回答：

`begin_index >= end_index`实际上，使用 可以更好地处理它，而不是检查`begin_index > end_index`，并且解决方案更清洁：

```
def binary_search_helper(arr, a, begin_index, end_index)    
  if begin_index > end_index
    return begin_index
  else
    middle_index = (begin_index + end_index) / 2
    if arr[middle_index] == a
      return middle_index
    elsif a > arr[middle_index]
      return binary_search_helper(arr, a, middle_index + 1, end_index)
    else
      return binary_search_helper(arr, a, begin_index, middle_index - 1)
    end
  end
end

# for [1,3,5,7,9], searching for 6 will return index for 7 for insertion
# if exact match is found, then return that index
def binary_search(arr, a)
  return binary_search_helper(arr, a, 0, arr.length - 1)
end 
```

并且使用迭代而不是递归可能会更快并且更少担心堆栈溢出。

# jquery - 使用另一个文本框的 KeyUp 事件更新中继器文本框

> ID：13306543
> 
> 赞同：0
> 
> 时间：2012-11-09T10:43:40.037
> 
> 标签：jquery, asp.net, repeater

您好，我有一个中继器控件

```
<asp:Repeater ID="rptCashCome" runat="server">
    <ItemTemplate>
           <asp:TextBox ID="txtCurrencyNo" onkeyup="javascript:CallFunction()" CssClass="mws-textinput" runat="server"></asp:TextBox>
           <asp:TextBox ReadOnly="True" ID="txtTotal" CssClass="mws-textinput" runat="server"></asp:TextBox>

     </ItemTemplate>
     </asp:Repeater> 
```

我有一个 Jquery 函数

```
function CallFunction() {

//code here i want something like. txtCurrencyNo* 500 = txtTotal
// something like calculative here. but how will i find the Control ID of repeater ?

 } 
```

这个函数被调用。但是我如何根据文本框 KeyUp 进行计算？我如何在这里找到控件 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:46:28.020

您可以为此使用 jQuery。
采用

```
$(this).val() 
```

它将为您提供当前文本框的值。
如果另一个文本框在同一个模板中，那么您可以像这样使用（未经测试）

```
function CallFunction() {
    var firstTextBoxVal= $(this).val();
    $(this).next().val(firstTextBoxVal* 500 )
} 
```

如下更改中继器

```
<asp:Repeater ID="rptCashCome" runat="server">
<ItemTemplate>
       <asp:TextBox ID="txtCurrencyNo" onkeyup="javascript:CallFunction(this)" CssClass="mws-textinput" runat="server"></asp:TextBox>
       <asp:TextBox ReadOnly="True" ID="txtTotal" CssClass="mws-textinput" runat="server"></asp:TextBox>

 </ItemTemplate>
 </asp:Repeater> 
```

# css - 垂直表格样式 div 排列中的内容

> ID：13306544
> 
> 赞同：0
> 
> 时间：2012-11-09T10:43:39.827
> 
> 标签：css

我有一些 div 应该占据页面的整个高度。我设法让这个工作，因为我需要。（一些固定的行和一些灵活的行）就像在一个 html 表中。

我从这里的其他问题之一中得到了解决方案：

[像 HTML 表格中的表格单元格一样在 css 中布局 div](https://stackoverflow.com/questions/12935011/layout-divs-in-css-like-table-cells-in-html-tables)

今天我不得不在灵活行内添加一个 div，它应该占灵活行高度的 100%。这在所有主要浏览器中都很好用。Muahaha 那是一个很好的笑话，不是吗？当然，这在 IE 中无法按预期工作，请参阅我的 js fiddle：

```
<div class="tableContainer">
<div class="row rowA">
    <div class="cell">Test</div>
</div>
<div class="row rowB">
    <div class="cell">Test</div>
</div>
<div class="row rowC">
    <div class="cell">Test</div>
</div>
<div class="row rowD">
   <div class="cell testcell">
       <div class="testcontent">Test</div>
   </div>
</div>
<div class="row rowE">
    <div class="cell">Test</div>
</div>
</div> 
```

[http://jsfiddle.net/7ewEJ/3/](http://jsfiddle.net/7ewEJ/3/)

ie 似乎从页面中获取“100%”，而不是从封闭的灵活表格行中获取。所以蓝色 div 应该占据 purble 表行的整个空间。

*   我做错什么了吗？
*   这可能是ie高度计算中的错误吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T11:14:44.197

[http://jsfiddle.net/7ewEJ/5/](http://jsfiddle.net/7ewEJ/5/)

```
div.testcell{
height: 100%;
width: 100%;
min-width: 1px;
min-height: 1px;
/*background: #fff;*/
align: center;
display: block;

} 
```

# javascript - 使用 jquery 将锚设置为活动

> ID：13306545
> 
> 赞同：1
> 
> 时间：2012-11-09T10:43:42.000
> 
> 标签：javascript, jquery, anchor

我有一个简短的问题.. 我有 3 个内容框，并且都有一个带有指向下面内容框的锚链接的菜单！当我访问该站点时，第一个锚点设置为活跃..当我现在点击标题 1 中的第 2 个时，它会跳转到第二个锚点..但问题是我必须用鼠标滚轮滚动一点上方才能设置第二个锚点处于活动状态。

和倒退。当我在anchor1上点击box3 ..

有什么想法可以解决这个问题吗？

**当向上和向下滚动时，它完美无缺！只是跳过锚造成的问题**

**这是演示：http:** [//jsfiddle.net/wv9EQ/](http://jsfiddle.net/wv9EQ/)

这是javascript代码：

```
$(function(){
    var sections = {},
        _height  = $(window).height(),
        i        = 0;

    //// Grab positions of our sections
    $('.section').each(function(){
        sections[this.name] = $(this).offset().top;
    });

    $(document).scroll(function(){
        var $this = $(this),
            pos   = $this.scrollTop();

        for(i in sections){
            if(sections[i] > pos && sections[i] < pos + _height){
                $('a').removeClass('active');
                $('.nav_' + i).addClass('active');
            }  
        }
    });
}); 
```

**编辑：我无法将活动添加到所有链接！我将这个小型导航包括为 php 及其所有盒子的动态！当我将所有设置为活动时，所有锚都活动：D**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:50:40.907

为您的代码使用简单的方法

[http://jsfiddle.net/wv9EQ/4/](http://jsfiddle.net/wv9EQ/4/)

```
 <li><a href="#2-SP" class="head-nav-button nav_2-SP active">2\. SP.</a></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:01:53.003

单击链接时只需执行相同的操作：

```
$('.head-nav-button').click(function()
{
    $('a').removeClass('active');
    $('.nav_' + $(this).attr('href').replace('#', '')).addClass('active');
}); 
```

[http://jsfiddle.net/wv9EQ/7/](http://jsfiddle.net/wv9EQ/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:52:00.063

删除这个

```
for(i in sections){
        if(sections[i] > pos && sections[i] < pos + _height){
            $('a').removeClass('active');
            $('.nav_' + i).addClass('active');
        }  
    } 
```

只需在您需要的地方添加“活动”类，就像这里[http://jsfiddle.net/wv9EQ/6/](http://jsfiddle.net/wv9EQ/6/)

# module - Yii - 在 URL 中隐藏模块名称

> ID：13306546
> 
> 赞同：1
> 
> 时间：2012-11-09T10:43:55.153
> 
> 标签：module, yii

我现在的 URL 结构如下：

[http://www.mydomain.com/module/controller/action](http://www.mydomain.com/module/controller/action)

我需要隐藏 URL 的模块部分。有什么办法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:32:08.423

要将 URL [http://www.mydomain.com/customer/login指向模块，请在](http://www.mydomain.com/customer/login)*urlManager*下的配置 (protected/config/main.php) 中：

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName' => false,
        'rules'=>array(
            'customer/login' => 'module/controller/action',

            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

要使任何控制器操作转到模块/控制器/操作（如下所述），您可以使用：

```
'<controller:\w+>/<action:\w+>'=>'module/controller/action', 
```

或者

```
'<controller:\w+>/<action:\w+>'=>'module/<controller:\w+>/<action:\w+>', 
```

取决于值的控制器/动作部分（在 => 的右侧）是设定值还是变量。

因此，如果您希望**任何**控制器/操作转到**确切的**url 模块/控制器/操作，您将使用第一个示例。例如，如果您希望控制器/操作*站点/测试*转到*模块/控制器/操作*，您将使用上面的第一个示例

如果您希望**任何**控制器/动作转到**动态**控制器/动作，则使用第二个。例如，如果您希望控制器/操作*站点/测试*转到*模块/站点/测试*，您将使用上面的第二个示例

这个新规则必须高于 3 个默认的 Yii 规则，因为它们被读取并且从上到下并匹配它只找到的第一个规则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:51:09.553

是的，您可以在配置中定义任何 url 规则。

您的 url 规则可能如下所示：

```
'<controller:(foo|bar)>/<action>' => 'module/<controller>/<action>', 
```

# sql - 与直接运行相比，Hibernate 选择性能差 - 如何调试？

> ID：13306548
> 
> 赞同：8
> 
> 时间：2012-11-09T10:43:58.687
> 
> 标签：sql, performance, oracle, hibernate

这让我疯狂。与直接通过 Navicat 运行该查询相比，使 hibernate 简单选择非常慢。还有什么更有趣的。使用本地数据库运行此查询非常快，但远程使用它真的很差。

我正在执行 Hibernate 本机 SQL 查询（因为 HQL 或 Criteria 不支持左连接）：

```
List list = new ArrayList();
String queryStr = "select s.* from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.sales_unit_child_id) where r.sales_unit_child_id is null";
Query query = session.createSQLQuery( queryStr ).addEntity( SalesUnit.class );

Long start = System.currentTimeMillis();
list.addAll( query.list() );
Long stop = System.currentTimeMillis();
System.out.println( "Time: " + (stop - start) + "ms." ); 
```

实体的结构并不重要。SALES_UNIT 和 SALES_UNIT_RELATION 表都有大约 28k 条记录

使用本地数据库在我的**本地 JBoss**上运行的结果约为 30-120 毫秒。在**远程**数据库上运行时，本地 JBoss（相同数据）导致时间在 30000-40000 毫秒之间。当我使用 Navicat 运行这个查询时，本地和远程调用都非常快（20-30 毫秒）。

本地和远程数据库的安装方式相同 -> Oracle Enterprise Edition 11.2.0.1.0。

性能如此差的问题可能是什么？我该如何调试它？

阅读本文：[简单的休眠查询返回速度很慢](https://stackoverflow.com/questions/6609645/simple-hibernate-query-beeing-very-slow)，但设置构造函数并没有改变任何东西

编辑。

**SALES_UNIT**表包含一些关于销售单元节点的基本信息，例如名称等。唯一的关联是与表 SALES_UNIT_TYPE，如 ManyToOne。主键是 ID，字段 VALID_FROM_DTTM 是日期。

**SALES_UNIT_RELATION**包含销售单元节点之间的关系 PARENT-CHILD。由 SALES_UNIT_PARENT_ID、SALES_UNIT_CHILD_ID 和 VALID_TO_DTTM/VALID_FROM_DTTM 组成。与任何表没有关联。这里的PK是..PARENT_ID、..CHILD_ID和VALID_FROM_DTTM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:15:18.717

谢谢大家的帮助。经过长时间的努力解决这个问题，最后 kaliatech 的回答帮助我调试了这个问题。

首先，我在我的问题中犯了一个可怕的错误。我写道：

> 使用本地数据库运行此查询非常快，但远程使用它真的很差。

因为它并不完全正确。我在 Hibernate 中所做的查询看起来像一个：

```
select s.* from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.sales_unit_child_id) where r.sales_unit_child_id is null 
```

但我使用 SQL PLus 或 Navicat 进行的实际查询是：

```
select * from sales_unit s left join sales_unit_relation r on (s.sales_unit_id = r.sales_unit_child_id) where r.sales_unit_child_id is null 
```

请注意，第一个查询 select 开始：`select s.* ...`第二个是`select * ...`. 这就是表现如此糟糕的原因。现在两个查询都很快完成了。问题是，有什么区别：[性能问题：select s.* 与 select * 之间的区别](https://stackoverflow.com/questions/13398277/performance-issue-difference-between-select-s-vs-select)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:45:53.997

要获得明确的答案，我认为需要更多信息。主要是：

*   SalesUnit 实体类中是否有任何实体关联或集合字段？**<-- 这是我对您所看到的性能差异的第一个猜测，而不是任何其他信息。**

*   在非 Hibernate 环境中使用相同的 JDBC 驱动程序运行查询时，您是否有相同的性能问题？（即使用像[DbVisualizer](http://www.dbvis.com/)这样的第 3 方 JDBC 客户端）。

还，

尽管无法确定问题中的信息，但我*认为*您想查询所有没有子 SalesUnit 的 SalesUnit。正确的？（这取决于您使用 sales_unit_relation 表的目的。）如果是这样，您可以这样编写查询：

```
String queryStr = "select s.* from sales_unit s
                   left join sales_unit_relation r on 
                   (s.sales_unit_id = r.sales_unit_child_id)
                   where r.sales_unit_child_id is null"; 
```

但是，我*认为*您可能想要更像这样的东西：

```
String queryStr = "select s.* from sales_unit s
                   left join sales_unit_relation r on 
                   (s.sales_unit_id = r.sales_unit_id)
                   where r.sales_unit_child_id is null"; 
```

照原样，您的查询正在加入您在 WHERE 子句中过滤为 null 的列。如果这确实是您想要的，那么您也可以将其编写为不带 WHERE 子句的 INNER JOIN，对吗？

最后，

> 我正在执行 Hibernate 本机 SQL 查询（因为 HQL 或 Criteria 不支持左连接）

如前所述，这是不正确的。只有当被查询的实体/表之间没有映射关系时，HQL 和 Criteria 才支持左连接。因此，根据您的示例，假设 SalesUnit 与 sales_unit_relation 表所代表的任何实体/关联之间没有映射的实体关系。（无论如何，本机查询应该可以工作，但是如果存在映射关系，那么使用 HQL/Criteria 的一个好处是您可以执行`left join fetch`.）

# azure - Azure 上的西欧云服务在美国展示

> ID：13306554
> 
> 赞同：2
> 
> 时间：2012-11-09T10:44:07.443
> 
> 标签：azure, ip, cloud

我在西欧的 Windows Azure 上部署了一个应用程序。但是，我分配的 IP (168.63.108.xx) 在[http://cqcounter.com/whois/上被标记为在美国](http://cqcounter.com/whois/)

我的部署有问题吗？如果不是，它在美国上映的原因是什么？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T11:16:50.347

这可能是 whois 以及它如何将 IP 映射到位置的问题。看看[这个文件](http://download.microsoft.com/download/E/F/C/EFC5E4D8-E4EA-4EFE-9356-D8AEEBC85F50/Azure_IP_Ranges.xml)，它包含 Azure 数据中心的 IP 地址范围。以下是您将在西欧看到的：

```
<subregion name="West Europe">
  ..
  <network>168.63.0.0/19</network>
  <network>168.63.96.0/19</network>
  ..
</subregion> 
```

现在，由于 IP 范围采用 CIDR 表示法，因此有一些工具可以很容易地找到完整的范围，[比如这个](https://www.ultratools.com/tools/netMaskResult?ipAddress=168.63.96.0/19)。所以实际上，**168.63.96.0/19** = **168.63.96.0 - 168.63.127.255**。而这个范围包括 168.63.108.xx。因此，您的部署没有问题，您可以确定它位于西欧。

# asp.net - aspnet 的最大值：MaxHttpCollectionKeys

> ID：13306558
> 
> 赞同：18
> 
> 时间：2012-11-09T10:44:30.093
> 
> 标签：asp.net

我有一个发布相当大数据的表格，我收到了这个错误

```
[InvalidOperationException: Operation is not valid due to the current state of the    object.]
   System.Web.HttpValueCollection.ThrowIfMaxHttpCollectionKeysExceeded() +2419334
   System.Web.HttpValueCollection.FillFromEncodedBytes(Byte[] bytes, Encoding encoding) +58
   System.Web.HttpRequest.FillInFormCollection() +159

[HttpException (0x80004005): The URL-encoded form data is not valid.]
   System.Web.HttpRequest.FillInFormCollection() +217
   System.Web.HttpRequest.get_Form() +104
   System.Web.HttpRequest.get_HasForm() +9035903
   System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) +97
   System.Web.UI.Page.DeterminePostBackMode() +69
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +135 
```

为了解决这个问题，我[从 StackOverflow](https://stackoverflow.com/questions/8978929/asp-error-operation-is-not-valid-due-to-the-current-state-of-the-object)本身得到了这个解决方案

```
<appSettings>
    <add key="aspnet:MaxHttpCollectionKeys" value="2000" />
</appSettings> 
```

现在我想知道可以设置的最大有效值`aspnet:MaxHttpCollectionKeys`。将此键设置为最大值有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-05T20:29:47.797

你可以在 GitHub 上的[aspnetwebstack 源码中看到 MaxHttpCollectionKeys 的实现。](https://github.com/mono/aspnetwebstack/blob/master/src/System.Net.Http.Formatting/Formatting/MediaTypeFormatter.cs)

从实现看来，这些是限制：

1.  MaxHttpCollectionKeys 是一个 int，所以它可以有一个整数的最大值（*int.MaxValue: 2,147,483,647*）
2.  最小值为 1
3.  默认值为 1000

此[MSDN 页面](https://msdn.microsoft.com/en-us/library/hh975440(v=vs.120).aspx)建议不要将 MaxHttpCollectionKeys 设置为太大的值，因为这会带来安全风险。 [![在此处输入图像描述](../Images/4cfbfd2a2ce04f8d705f8a277bde3338.png)](https://i.stack.imgur.com/fWV4u.png)

# android - 创建自定义布局时未创建我的视图

> ID：13306562
> 
> 赞同：1
> 
> 时间：2012-11-09T10:44:39.047
> 
> 标签：android, webview

当我从 MainActivity 调用 MyWebView 时，未创建我的视图。它在 logcat 中给出错误

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.abc.com/com.abc.com.MainActivity}:

 android.view.InflateException: Binary XML file line #31: Error inflating class com.abc.com.MyWebView 
```

主要活动-

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new MyWebView (this,getApplicationContext()); 
}

}

public class MyWebView extends WebView{

public MyWebView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

WebView mwebview;

Activity act;
String webView_url;
RelativeLayout layout;

public MyWebView(Activity _acActivity, Context _cont) {
    super(_cont);
    act = _acActivity;
    _context = _cont;

      ViewGroup wkll = new ViewGroup(_context) {

        @Override
        protected void onLayout(boolean changed, int l, int t, int r, int b) {
            // TODO Auto-generated method stub

        }
    };      
        LinearLayout.LayoutParams tlp =
            new LinearLayout.LayoutParams( LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT );
        mwebview = new MyWebView(_context);
        wkll.addView(mwebview);
        mwebview.setLayoutParams(tlp);
    mwebview.loadUrl("http://www.google.com");

}
} 
```

# ruby-on-rails - 为什么 Routes.rb 没有从缓存中加载 IP？

> ID：13306564
> 
> 赞同：0
> 
> 时间：2012-11-09T10:44:39.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached

我正在本地测试这个。我的ip是`127.0.0.1`。ip_permissions 表是空的。当我浏览该网站时，一切都按预期工作。

现在，我想用被禁止的 IP 模拟浏览网站。所以我通过以下方式将 IP 添加到 ip_permissions 表中：

```
IpPermission.create!(:ip => '127.0.0.1', :note => 'foobar', :category => 'blacklist') 
```

在 Rails 控制台中，我通过以下方式清除缓存；`Rails.cache.clear`. 我浏览网站。我没有被发送到`pages#blacklist`.

如果我重新启动服务器。并浏览该站点，然后我被发送到`pages#blacklist`. 为什么每次更新ip_permissions表都需要重启服务器？它不应该基于缓存来获取它吗？

路线看起来像：

```
class BlacklistConstraint
  def initialize
    @blacklist = IpPermission.blacklist
  end

  def matches?(request)
    @blacklist.map { |b| b.ip }.include? request.remote_ip
  end
end

Foobar::Application.routes.draw do
  match '/(*path)' => 'pages#blacklist', :constraints => BlacklistConstraint.new
  ....
end 
```

我的模型看起来像：

```
class IpPermission < ActiveRecord::Base
  validates_presence_of :ip, :note, :category
  validates_uniqueness_of :ip, :scope => [:category]
  validates :category, :inclusion => { :in => ['whitelist', 'blacklist'] }

  def self.whitelist
    Rails.cache.fetch('whitelist', :expires_in => 1.month) { self.where(:category => 'whitelist').all }
  end

  def self.blacklist
    Rails.cache.fetch('blacklist', :expires_in => 1.month) { self.where(:category => 'blacklist').all }
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:58:16.923

您在路由文件中初始化 BlacklistConstraint，该文件在开始时仅加载一次。在那里您调用 IpPermission.blacklist 并将其存储在实例变量中。Initialize 不再被调用，因此您检查相同的记录。

如果您希望更新记录，您应该加载每个请求的记录：

```
class BlacklistConstraint
  def blacklist
    IpPermission.blacklist
  end

  def matches?(request)
    blacklist.map { |b| b.ip }.include? request.remote_ip
  end
end 
```

# delphi - JavaScript 重定向和 IdHTTP

> ID：13306571
> 
> 赞同：0
> 
> 时间：2012-11-09T10:45:00.480
> 
> 标签：delphi, delphi-xe2, indy, indy10

尝试登录 Hotmail 时，我得到一个 Javascript 重定向。有没有办法避免它？

```
IdHTTP1.Get('http://www.hotmail.com'); 
```

> **必须允许 Cookie**您的浏览器当前设置为阻止 Cookie。在您使用 Windows Live ID 之前，您的浏览器必须允许 cookie。
> 
> Cookie 是存储在您计算机上的小型文本文件，当您登录时会告知 Windows Live ID 站点和服务。要了解如何允许 cookie，请参阅 Web 浏览器中的在线帮助。
> 
> **登录**所需的JavaScript Windows Live ID 需要 JavaScript 才能登录。此 Web 浏览器不支持 JavaScript，或者脚本被阻止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:47:14.327

Indy 不会为您提供公认的用户代理，您可能必须自己设置。此外，正如它所说，您需要 JavaScript 支持，Indy 不会给您。

您唯一真正的选择是自动化 IE、WebKit 或 Gecko 之类的东西，或者包装一些无头浏览器（例如 PhantomJS）。

# apache-kafka - 如何使用 fluentd output_kafka 插件？

> ID：13306572
> 
> 赞同：1
> 
> 时间：2012-11-09T10:45:00.253
> 
> 标签：apache-kafka, fluentd

我已经通过命令“gem install fluent-plugin-kafka”为我的 fluentd 安装了 output_kafka 插件。

但是当我启动 fluentd 服务时，我在日志文件中收到以下错误消息：

2012-11-09 18:18:39 +0800: 暂时刷新缓冲区失败，下次重试将在 2012-11-09 18:52:46 +0800。error="未初始化常量*Kafka::Message* " 实例=69952455476860

似乎 output_kafka.rb 找不到模块 Kafka 或类消息，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:29:29.150

我是 Kaz，Fluentd 提交者。这听起来像是 fluent-plugin-kafka 的错误。您可以从这里报告错误，并附上您的环境描述吗？

> [https://github.com/kiyoto/fluent-plugin-kafka/issues](https://github.com/kiyoto/fluent-plugin-kafka/issues)

等你举报了，我去看看。谢谢-K

# android - Android 服务中的线程和消息处理

> ID：13306574
> 
> 赞同：1
> 
> 时间：2012-11-09T10:45:06.567
> 
> 标签：android, android-service

我有一个服务，在启动时会启动一个线程，该线程应该是服务的“主线程”。该服务绑定到其他两个服务，这是我正在使用的库的一部分。在这个线程中，我想处理从绑定的服务发送到服务的消息（因为这是绑定的工作方式......对吗？）。绑定进展顺利（返回 true），但我的问题是我似乎根本收不到任何消息。我的设置说明如下：

服务：

```
class MyService extends Service {
    onCreate(...) {
        myServiceApp = new MyServiceApp(this);
    }

    onStartCommand(...) {
        Thread thread = new Thread(myServiceApp);
        thread.start();
    }
} 
```

主线程类：

```
class MyServiceApp() {
    private Service service;
    final Handler mHandler = new Handler() {
       void handleMessage(Message msg) {
            ...
       }
    };

    void run() {
        boolean as = service.bindService(new Intent(...), ..., Context.BIND_AUTO_CREATE));
        boolean ctrl = service.bindService(new Intent(...), ..., Context.BIND_AUTO_CREATE));
        Looper.prepare();
        while(true) {
            ...
        }
    }
 } 
```

现在，我知道为了能够像这样声明一个处理程序，我需要一个线程的消息循环，所以我在 run 方法中调用 prepare()。我还觉得我需要在我的 while 循环中的每一轮都运行消息循环，所以我在那里添加了一个 Looper.loop() ，但这只是让应用程序挂在该行上。

所以我的问题是，我如何解决问题并将消息传递到我想要的地方？我知道我的应用程序架构可能不是最佳的，因此请随时就如何改进它提出建议。

# objective-c - 块声明的结构

> ID：13306576
> 
> 赞同：1
> 
> 时间：2012-11-09T10:45:14.880
> 
> 标签：objective-c, objective-c-blocks

当声明`block`使用这种语法的基本原理是什么时（即左边的括号和插入符号）？

```
(^myBlock) 
```

例如：

```
int (^myBlock)(int) = ^(int num) {
    return num * multiplier;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:53:19.940

**C 块：语法和用法**

指向块的变量采用与指向函数的变量完全相同的语法，除了 * 替换为 ^。例如，这是一个函数指针，指向一个采用 int 并返回 float 的函数：

```
float (*myfuncptr)(int); 
```

这是一个块指针，指向一个采用 int 并返回一个浮点数的块：

```
float (^myblockptr)(int); 
```

与函数指针一样，您可能希望对这些类型进行 typedef，否则它会变得相对复杂。例如，一个指向一个块的指针返回一个块，该块将类似于`void (^(^myblockptr)(void (^)()))();`，这几乎是不可能读取的。稍后一个简单的typedef，它更简单：

```
typedef void (^Block)();
Block (^myblockptr)(Block); 
```

声明块本身是我们进入未知的地方，因为它看起来不像 C，尽管它们类似于函数声明。让我们从基础开始：

```
myvar1 = ^ returntype (type arg1, type arg2, and so on) {
    block contents;
    like in a function;
    return returnvalue;
}; 
```

这定义了一个块文字（从 after = 到并包括 }），明确提及它的返回类型、参数列表、块体、return 语句，并将此文字分配给变量 myvar1。

文字是可以在编译时构建的值。整数文字（int a = 3; 中的 3）和字符串文字（const char *b = "foobar"; 中的 "foobar"）是文字的其他示例。当我们进入内存管理时，块声明是文字这一事实很重要。

在这样的块中找到 return 语句对某些人来说是令人烦恼的。您可能会问，它是否从封闭函数返回？不，它返回一个可供块调用者使用的值。请参阅“调用块”。注意：如果块有多个返回语句，它们必须返回相同的类型。

最后，块声明的某些部分是可选的。这些都是：

*   参数列表。如果该块没有参数，则可以完全跳过参数列表。

例子：

```
myblock1 = ^ int (void) { return 3; }; // may be written as:
myblock2 = ^ int { return 3; } 
```

*   返回类型。如果块没有返回语句，则假定为 void。如果块有一个 return 语句，则从它推断返回类型。这意味着您几乎总是可以跳过声明中的返回类型，除非它可能不明确。

例子：

```
myblock3 = ^ void { printf("Hello.\n"); }; // may be written as:
myblock4 = ^ { printf("Hello.\n"); };

// Both succeed ONLY if myblock5 and myblock6 are of type int(^)(void)
myblock5 = ^ int { return 3; }; // can be written as:
myblock6 = ^ { return 3; }; 
```

来源：[http ://thirdcog.eu/pwcblocks/](http://thirdcog.eu/pwcblocks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:55:23.050

我*认为*基本原理是它看起来像一个函数指针：

```
void (*foo)(int); 
```

任何 C 程序员都应该熟悉它。

# iphone - 在 nsmutablearray 中搜索并添加到另一个...？

> ID：13306583
> 
> 赞同：0
> 
> 时间：2012-11-09T10:45:41.447
> 
> 标签：iphone, search, nsmutablearray

我陷入了奇怪的境地。从某种意义上说，这很“奇怪”，它降低了我的 iPhone 应用程序的性能。我的情况就像我有一个具有以下数据类型的 nsmutablearray

```
(
    {
    Line1 = "Ashish";
    Line2 = "Gujarat";
    Line3 = "AAA";
    Line4 = "AAA";
    Line5 = "AAA";
    LineCount = 5;
},
    {
    Line1 = "George";
    Line2 = "IL";
    Line3 = "GGG";
    Line4 = "GGG";
    Line5 = 1;
    LineCount = 20;
}
) 
```

它只有两条记录，实际上我的数组有数千条。现在，当任何行具有搜索值时，我想在另一个 nsmutablearray 中添加块。例如，如果我的搜索条件是**一个**然后数组两个有第一条记录，并且数组将是

```
(
    {
    Line1 = "Ashish";
    Line2 = "Gujarat";
    Line3 = "AAA";
    Line4 = "AAA";
    Line5 = "AAA";
    LineCount = 5;
}
) 
```

LineCount 是动态的，即如果它是 10，那么 Line1....Line10 将出现在每条记录中。并且搜索必须在 Line1...LineN 内，而不是在 LineCount 字段中。前任。如果搜索条件是**5**，它不会返回任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:57:35.727

使用[NSPredicate_Class](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)进行排序

NSPredicate 类用于定义用于约束搜索的逻辑条件，无论是获取还是内存过滤。

[在这里](http://www.wannabegeek.com/?p=149)查看一个很好的例子

# arrays - 循环遍历数组以从字符串中获取数字

> ID：13306584
> 
> 赞同：0
> 
> 时间：2012-11-09T10:45:42.493
> 
> 标签：arrays, macos, applescript

我有一个包含各种窗口标题的数组。他们的标题类似于“... number 333999333 id ....”。所以数组看起来像这样：

```
array ("... number 333999333 id ....",
    "... number 333999334 id ....",
    "... number 333999335 id ....",
    "... number 333999336 id ....",
    "... number 333999337 id ....",
    "... number 333999338 id ...."
) 
```

我想使用“数字”和“id”作为分隔符，并使用它们之间的数字来创建一个仅包含这些数字的新数组（或修改现有数组）。

```
array ("333999333",
    "333999334",
    "333999335",
    "333999336",
    "333999337",
    "333999338"
) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:16:17.390

尝试：

```
set listA to {"… number 333999333 id ....", "... number 333999334 id ....", "... number 333999335 id ....", "... number 333999336 id ....", "... number 333999337 id ....", "... number 333999338 id …."}

set listB to {}
repeat with anItem in listA
    set end of listB to do shell script "echo " & quoted form of anItem & " | sed 's/.* \\([0-9]*\\) .*/\\1/'"
end repeat

return listB 
```

# git - 我的项目文件夹不再是 Git 存储库

> ID：13306585
> 
> 赞同：0
> 
> 时间：2012-11-09T10:45:53.387
> 
> 标签：git, repository, git-stash

我正在为一个项目使用 Git。直到昨天晚上，存储库已经启动并运行，我像往常一样在一天结束时关闭了我的计算机。

今天早上，当我像往常一样尝试`git status`从我的项目文件夹中运行时，我收到了这个错误：`fatal: not a git repository (or any of the parent directories): .git`

我知道在我今天早上关闭计算机并再次启动它的那一刻之间没有发生任何事情，所以我对为什么存储库会这样消失感到困惑。`.git`文件夹和`.gitignore`文件仍然存在于项目文件夹中是毫无价值的。

现在我的问题是，即使我可以在新文件夹中重新检出存储库，我仍然有我昨天隐藏的代码（使用`git stash`），包括一个 SQL 查询脚本，我花了几个小时编写和其他部分我什至不完全记得它是什么代码，因为我经常使用 stash 来存储尚未准备好提交的未完成工作。

我搜索了互联网，特别是这个地方，发现没有人有同样的问题，这更加奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:40:23.257

如果您仍然有`\.git`子目录，那么您有机会。可能有一个条目已损坏。我不记得 Git 检查了哪些具体内容以确认该文件夹是否是正确的 repo，但这些东西通常可以通过一点毅力来恢复。

先备份一下。然后再使用另一种方法以防万一（.git 通常是隐藏文件）

你的`.git`目录结构是什么 - 它是否包含所有预期的内容？

您是否有一个遥控器，您可以将大部分内容推送到该遥控器上以进行比较？

更新：请参阅[.git/HEAD 的存在是对 git 存储库的辅助检查](https://stackoverflow.com/a/8434758/717355)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:50:11.680

强制性问题：*你有备份吗？*

如果不是：不好。

如果是：将存储库的备份恢复到不同的目录，检查您知道您正在处理的最新分支/提交，如果该备份中也有存储，请将其提交到新分支。然后用损坏的存储库的源文件覆盖该分支中的源文件。这为您提供了上次未损坏的备份状态和您在此期间所做的任何事情的差异。你也可以把它藏起来。

出于这个原因，我通常会尽早提交，并经常推送到外部存储库作为备份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-28T17:42:14.007

我有同样的问题，但发生的事情是我的电脑在执行`git merge`.

显然，问题在于 HEAD 文件在关闭后已损坏。解决方案是检查`.git/HEAD`文件并将内容替换为

> 参考：参考/负责人/开发

请注意，这`develop`是我的 PC 关闭之前的当前分支。此外，这可能不适用于所有情况，但值得一试。

# iphone - 如何在字母索引标题UITable中为iphone中的数值设置#

> ID：13306586
> 
> 赞同：0
> 
> 时间：2012-11-09T10:45:57.127
> 
> 标签：iphone, objective-c, ipad, uitableview

我已经使用链接[http://www.devx.com/wireless/Article/43374实现了按字母顺序排列的部分标题](http://www.devx.com/wireless/Article/43374)

它很好用。

我用这个**逻辑来获取第一个字符作为索引**

```
 // To implement indexes and section headers
  contactsArray = [[NSMutableArray alloc] init];
  for(int i=0; i< tableViewArray.count ; i++)
  {
        Contact *contact = [tableViewArray objectAtIndex:i];
        [contactsArray addObject:contact.name];
  }

 contactIndex = [[NSMutableArray alloc] init];
  for (int i=0; i<[contactsArray count]; i++){
        //---get the first char of each contactName---
        char alphabet = [[[contactsArray objectAtIndex:i] uppercaseString] characterAtIndex:0];

    NSString *firstChar = [NSString stringWithFormat:@"%C", alphabet];

    //---add each letter to the index array---
    if (![contactIndex containsObject:firstChar])
    {            
          [contactIndex addObject:firstChar];
    } 
```

}

但如果是联系人，它会返回**1,2,3...**

![在此处输入图像描述](../Images/b5bac0d0389e90c93e2afc92711773fe.png)

**`But need to display # instead of all numaerical values headers`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:56:33.280

```
if (alphabet >= '0' && alphabet <= '9') alphabet = '#'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:04:52.107

使用**NSNumberFormatter**检查 NSString 是否为数字

```
// To implement indexes and section headers
  contactsArray = [[NSMutableArray alloc] init];
  for(int i=0; i< tableViewArray.count ; i++)
  {
        Contact *contact = [tableViewArray objectAtIndex:i];
        [contactsArray addObject:contact.name];
  }

 contactIndex = [[NSMutableArray alloc] init];
  for (int i=0; i<[contactsArray count]; i++){
        //---get the first char of each contactName---
        char alphabet = [[[contactsArray objectAtIndex:i] uppercaseString] characterAtIndex:0];

    NSString *firstChar = [NSString stringWithFormat:@"%C", alphabet];

   NSNumberFormatter *testFormatter = [[NSNumberFormatter alloc] init];

  if(nil == [testFormatter numberFromString: firstChar]){

      firstChar = @"#";
  }

    //---add each letter to the index array---
    if (![contactIndex containsObject:firstChar])
    {            
          [contactIndex addObject:firstChar];
    }       
} 
```

# jquery - jQuery：点击事件并不总是触发

> ID：13306592
> 
> 赞同：0
> 
> 时间：2012-11-09T10:46:32.383
> 
> 标签：jquery, events, click

我使用这个库来获取一个可搜索的下拉元素：[https ://github.com/opusonline/dropdown](https://github.com/opusonline/dropdown)

我做了一些小改动（增加了向列表添加新元素的可能性）

它通常可以正常工作，但是当您真正对其进行压力测试时（连续进行许多选择，滚动很多，快速悬停在元素上并单击列表中元素的顶部和底部），它不会选择正确的元素.

经过一点调试，我得出的结论是，在这些特殊情况下，下拉元素上的点击事件根本没有被触发，但悬停事件似乎工作正常。

并且这两个绑定到同一个方法链中的元素，所以都应该附加。

请看代码[http://jsbin.com/adiyen/1](http://jsbin.com/adiyen/1)

任何有关进一步调试或代码错误的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:59:25.647

这是因为显示弹出窗口的速度。目前您已将其设置为`speed: 250`并且很可能您执行选择的速度比动画过程完成的速度更快。

尝试更改为可以权衡动画和选择速度的值。您可能会认为`speed: 100`这可以为您提供一些可接受的动画和列表中项目的超快速选择。

# hive - 在 Hive 中取数据的交集

> ID：13306593
> 
> 赞同：2
> 
> 时间：2012-11-09T10:46:32.917
> 
> 标签：hive

我在蜂巢中有以下数据：

```
userid cityid
1      15
2      15
1      7
3      15
2      8
3      9
3      7 
```

而且我只想保留具有 cityid 15 和 cityid 7 的用户 ID（在我的示例中，它将是用户 ID 1 和 3）。我试过：

```
select userid from table where cityid = 15 and userid in (select userid from table where cityid = 7); 
```

但是对于蜂巢，它不起作用。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:12:22.760

好的，我找到了方法：

```
select a.userid from (select userid from table where cityid = 15) a join (select userid from table where cityid = 7) b on a.userid = b.userid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T17:08:47.683

尝试避免自加入

```
SELECT  userid
FROM
 ( SELECT userid, collect_set( cityid) as cities
   FROM table 
   GROUP BY userid 
 )
WHERE array_contains( cities, 7 )
AND array_contains( cities, 15 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:22:44.150

```
SELECT DISTINCT userid FROM table_name WHERE cityid == 15 OR cityid == 7; 
```

# java - 模拟恒星的引力？

> ID：13306596
> 
> 赞同：5
> 
> 时间：2012-11-09T10:46:35.263
> 
> 标签：java, space, gravity, motion

我正在制作一个游戏，玩家将（*在释放 mouseclick*时）以初始速度向某个方向射击“星星”，该初始速度取决于他在释放之前拖动鼠标的距离。我在画布上有一个“行星”（*静止的圆圈*），我想对移动的行星施加引力。我相信我正在使用正确的公式来计算引力等，并且我让它部分工作 - 行星会影响行星的轨迹直到某个点，当恒星似乎无休止地加速并停止根据它的角度改变方向到星星。**有什么建议**吗？（*我知道恒星不应该绕行星运行，相反。*

主类：

```
 import acm.graphics.GCompound;
    import acm.graphics.GImage;
    import acm.graphics.GLabel;
    import acm.graphics.GLine;
    import acm.graphics.GMath;
    import acm.graphics.GObject;
    import acm.graphics.GPen;
    import acm.graphics.GPoint;
    import acm.graphics.GRect;
    import acm.graphics.GOval;
    import acm.graphics.GRectangle;
    import acm.program.GraphicsProgram;
    import acm.util.RandomGenerator;
    import java.awt.Color;
    import java.awt.event.MouseEvent;
    import java.util.*;

    public class Space extends GraphicsProgram {
      public static int APPLICATION_WIDTH = 1000;
      public static int APPLICATION_HEIGHT = 1000;
      private int size = 15;
      public static double pMass = 1000;
      public static int sMass = 20;
      public static double G = 200;
      private RandomGenerator rand = new RandomGenerator();
      GOval planet, tempstar;
      shootingStar star;
      GLine line;
      double accel, xAccel, yAccel, xspeed, yspeed, angle;

      public void init(){
        planet = new GOval(APPLICATION_WIDTH/2, APPLICATION_HEIGHT/2, 30, 30);
        planet.setFilled(true);
        planet.setFillColor(rand.nextColor());
        add(planet);

      }

      public void mousePressed(GPoint point) {
        // draw a line
        tempstar = new GOval(point.getX() - size/2, point.getY() - size/2, size, size);
        tempstar.setFilled(true);
        tempstar.setColor(rand.nextColor());
        add(tempstar);
        line = new GLine(tempstar.getX() + size/2, tempstar.getY() + size/2, 
    point.getX(), point.getY());                             
        add(line);
        line.setVisible(true);
      }

      public void mouseDragged(GPoint point) {
        line.setEndPoint(point.getX(), point.getY());
      }

      public void mouseReleased(GPoint point){
        xspeed =            
    -.05*GMath.cosDegrees(getAngle(line))*GMath.distance(line.getStartPoint().getX(),         
    line.getStartPoint().getY(), line.getEndPoint().getX(), line.getEndPoint().getY());
        yspeed = 
    .05*GMath.sinDegrees(getAngle(line))*GMath.distance(line.getStartPoint().getX(), 
    line.getStartPoint().getY(), line.getEndPoint().getX(), line.getEndPoint().getY());
        System.out.println(xspeed + " " + yspeed);
        star = new shootingStar(xspeed, yspeed, this);
        if(xspeed != 0)
          add(star, tempstar.getX(), tempstar.getY());
        new Thread(star).start();
        remove(tempstar);
        remove(line);

      }

      private double getAngle(GLine line) {
        return GMath.angle(line.getStartPoint().getX(), line.getStartPoint().getY(), 
                           line.getEndPoint().getX(), line.getEndPoint().getY());
      }

      public void checkPlanet(){
        accel = .06*GMath.distance(star.getX(), star.getY(), planet.getX(), 
    planet.getY());
        angle = correctedAngle(GMath.angle(planet.getX(), planet.getY(), star.getX(), 
    star.getY()));       
        xAccel = accel*GMath.cosDegrees(GMath.angle(planet.getX(), planet.getY(), 
    star.getX(), star.getY()));
        yAccel = accel*GMath.sinDegrees(GMath.angle(planet.getX(), planet.getY(), 
    star.getX(), star.getY()));

        double newX = xspeed - xAccel*.01;
        double newY = yspeed + yAccel*.01;

        xspeed = newX + xAccel*Math.pow(.01, 2)/2;
        yspeed = newY + yAccel*Math.pow(.01, 2)/2;

        star.setSpeed(xspeed, yspeed);

      }

      public double correctedAngle(double x) {
        return (x%360.0+360.0+180.0)%360.0-180.0;
    }
    } 
```

射击之星类的相关部分：

```
 public void run() {
        // move the ball by a small interval
        while (alive) {
        oneTimeStep();
        }
      }

      // a helper method, move the ball in each time step
      private void oneTimeStep() {
        game1.checkPlanet();
        shootingStar.move(xSpeed, ySpeed);
        pause(20); 
      }

      public void setSpeed (double xspeed, double yspeed){
        xSpeed = xspeed;;
        ySpeed = yspeed;

      }
    } 
```

* * *

编辑：

当前主类方法：

```
 public void checkPlanet(){
        double xDistance = star.getX() - planet.getX();
        double yDistance = star.getY() - planet.getY();
        double distance = Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
        accel = G*pMass/Math.pow(distance, 2);

        xAccel = accel * xDistance/distance;
        yAccel = accel * yDistance/distance;

          xspeed += xAccel;

         yspeed += yAccel;

       star.setSpeed(xspeed, yspeed);

    } 
```

当前星级方法：

```
 public void run() {
        while (alive) {
          oneTimeStep();
        }
      }

      private void oneTimeStep() {
        game1.checkPlanet();
        shootingStar.move(xSpeed, ySpeed);
        pause(20); 
      }

      public void setSpeed (double xspeed, double yspeed){
        xSpeed = xspeed;;
        ySpeed = yspeed;

      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:51:56.440

哇，这比你“必须”做的要努力得多。

如果物体在板上，请计算它与物体的距离。如果它比 D 更远，则什么也不做。如果它在 D 之外，那么它在物体的引力内。只需将少量速度添加到它指向对象。假设它在 1000 X 和 500 z 之外。只需做一些简单的事情，例如除以 100，然后将其添加到对象速度上，使其向对象移动 10 x 和 5 y。每次更新时再次添加速度。

您可能还需要最大速度。这很容易计算，效果很好，并且会给你带来类似于游戏 STAR CONTROL 中的效果，其中有一颗行星，或者船只在引力的作用下相互拉近一点点。我用 10 颗行星和一颗恒星来做这个，用户基本上可以用每个行星做月球着陆器。这是一个爆炸，但我从来没有把它变成一个真正的游戏。这具有计算速度非常快的优势。有一些边缘条件，比如如果你把地图做成一个圆环，那么它们会在地图的两侧弯曲，但基本上这只是简单的加法和减法。

对于游戏来说已经足够了。你不是在制作模拟器。你在做游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:12:11.387

我不确定，但尝试将计算 xAccel 和 yAccel 值的部分更改为类似的值。

```
xDistance = XComponentObject1 - XComponentObject2; 

yDistance = YComponentObject1 - YComponentObject2;

(xDistance and yDistance can have negative values)

Distance = sqrt( xDistance^2 + yDistance^2 );

gConstant = constant Value for gravitational strenght in your world;

MassObject1 = some Mass;

MassObject2 = some other Mass;

Accel = gConstant*MassObject1*MassObject2 / (Distance^2 );

''NOW COMES THE IMPORTANT PART''

xAccel = Accel * xDistance/Distance;

yAccel = Accel * yDistance/Distance; 
```

我认为你的正弦和余弦的整个 yadayada 会产生一大堆难以追踪的错误。

# java - setHeader 文件名在 IE8 上不起作用

> ID：13306600
> 
> 赞同：0
> 
> 时间：2012-11-09T10:46:51.273
> 
> 标签：java, internet-explorer-8, header, response, itext

我正在使用以下代码部分保存一个 pdf 文件：

```
response.setContentType("application/pdf"); 
    response.setHeader("Content-disposition", 
        "inline; filename="+pd.getName()+"_"+version+".pdf") ; 
    response.setContentLength(baosPDF.size()); 
    java.io.OutputStream os;
    os = response.getOutputStream();
    baosPDF.writeTo(os); 
```

当我在我的页面中右键单击保存文件时，在 Chrome 和 Firefox 中，默认情况下它被正确命名：

```
"NameOfPd_VersionNumber.pdf" 
```

但仅在 Internet Explorer 8 中被命名为：

```
"printPDFAction.pdf" 
```

其中 printPDFAction 是创建 pdf 的操作的名称。

我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:10:10.050

使用以下标题：

```
Content-disposition: attachment; filename="xxx.pdf" 
```

同样对于 IE，使用这些标题（IE 有时会在打开它刚才保存的文件时出现问题）：

```
Cache-Control: cache, must-revalidate
Pragma: public 
```

# asp.net-mvc - razor html helper 在 html 转换期间是否会增加额外的负载？

> ID：13306602
> 
> 赞同：-1
> 
> 时间：2012-11-09T10:47:02.027
> 
> 标签：asp.net-mvc, razor, html-helper

我发现`mvc html helper`非常有用且易于使用。那是惊人的发明。

但我想知道，它是否在 html 转换期间增加了额外的负载，因为我正在努力**提高性能**。如果是这样，那么我通常会更喜欢什么？如果我的工作可以通过简单的`html`控制轻松完成，那么推荐`html helper`什么`simple html`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:57:13.047

与普通 Html 相比，Html Helpers 现在实际上对性能产生了影响。它们还允许您有效地重用代码。此外，作为一种方法，您可以将参数传递给它。仅当您不打算重用该 html 代码时才使用普通 html。

加上 Html.Helpers 是 C#（或 VB.NET）代码将被编译，因此它们会运行得非常快。从这个角度来看，您不必担心性能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:58:32.273

我建议使用 Razor Helpers，为了优化您的响应性能，您应该使用像[ASP.NET In-Memory Caching](http://msdn.microsoft.com/en-us/library/aa478965.aspx)或[App-Fabric Caching](http://msdn.microsoft.com/en-us/library/ff383731%28v=azure.10%29.aspx)这样的缓存。

# objective-c - 设置框架后如何更改标签的宽度？并获得 NSString 的宽度

> ID：13306604
> 
> 赞同：0
> 
> 时间：2012-11-09T10:47:08.190
> 
> 标签：objective-c, ios6, uilabel, xcode4.5

希望你做得很好。

我正在设置标签并调整其框架..

```
UILabel *mylabel=[[UILabel alloc]init];
    mylabel.Text=@"This is my label";
    mylabel.frame=CGRectMake(10,10,200,21); 
```

现在，如果我像这样从我设置的任何字符串中更改标签的文本

```
NSString *mystring=@"This is my first string that is to be assigned to my label dynamilcally";
mylabel.Text=mystring;
mylabel.frame.size.width=mystring.length; 
```

但什么也没发生。标签的宽度保持为 200，正如我在初始化时设置的那样。

这还需要获取**mystring**的**宽度**。如何得到它？

 **感谢期待对我的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:50:52.437

`[myLabel sizeToFit]`如果你需要它在一条线上。对于多行标签，您可以使用`NSString`'`sizeWithFont:constrainedToSize:lineBreakMode:`函数来获取字符串的大小并使用它来修改标签的高度和宽度。

例如，为您提供固定宽度为 200px 的多行标签的高度的代码：

```
CGSize textSize = { 
    200.0,   // limit width
    20000.0  // and height of text area
}; 

CGSize size = [descriptionString sizeWithFont:[UIFont systemFontOfSize:17.0] constrainedToSize:textSize lineBreakMode:UILineBreakModeWordWrap];
CGFloat height = size.height < 36? 36: size.height; // lower bound for height

CGRect labelFrame = [myLabel frame];
labelFrame.size.height = height;
[myLabel setFrame:labelFrame];
[myLabel setText:descriptionString]; 
```**

# javascript - D3 时间序列热图

> ID：13306605
> 
> 赞同：5
> 
> 时间：2012-11-09T10:47:10.447
> 
> 标签：javascript, d3.js, data-visualization, graph-visualization

我正在尝试使用 d3 制作热图，它在 x 轴上是时间序列，在 ya 数字上，颜色是单元格的值。数据是根据输入加载的，域和范围可以根据不同的输入而改变。我找不到这样的例子。有谁知道我如何创建它？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T18:19:42.223

所以我终于有时间编写我正在寻找的这段代码。我的主要问题是我对音阶的理解很好。因此，在阅读了一点之后，我可以定义一个时间尺度并使用以下代码将其映射到我的数据：

```
var xscale = d3.time.scale()
                     .domain([startDate, endDate])
                     .range([padding, w - padding]);

var xAxis = d3.svg.axis()
            .scale(xscale)
            .orient("bottom")
            .ticks(d3.time.days, 5); 
```

您可以在以下 jsfiddle 中找到我的代码的工作演示：http: [//jsfiddle.net/TD5Sk/1/](http://jsfiddle.net/TD5Sk/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T21:47:01.237

探索[d3 示例库](https://github.com/mbostock/d3/wiki/Gallery)，混合和匹配您应该能够找到一个很好的起点。共[现矩阵](http://bost.ocks.org/mike/miserables/)具有您描述的许多属性。甚至[日历示例](http://mbostock.github.com/d3/ex/calendar.html)也可能有一些有用的指针。

# php - 如何使用 php 设置 CRON 并在它的帮助下运行 php 文件？

> ID：13306609
> 
> 赞同：0
> 
> 时间：2012-11-09T10:47:20.057
> 
> 标签：php, cron, crontab, cron-task

我有两个 php 文件。在一个 php 文件中，有一个简单的 html 表单，当用户设置时间和日期并提交表单然后所有下拉值存储在数据库中时，我在其中为 cronjob 选择时间和日期创建了一些下拉列表。

现在在这个存储值的帮助下，我需要设置 cronjob，当 cron 执行时，它运行另一个 php 文件，我在其中编写了一些代码来生成 xml 文件。并且该文件每次运行时由用户存储在数据库中。

通过使用 Cpanel，我可以做到这一点，但我不想使用 cpanel。

请给我一些适当且可行的解决方案，我真的需要它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:52:35.343

使用 phps`system()`或`exec()`function 调用`crontab`命令来替换或修改运行 Web 服务器的帐户的现有 crontab。您可能必须确保允许用户使用 cron 系统，这取决于您使用的操作系统。

在 crontab 中，您可以使用两种策略之一来运行 php 脚本_ - 像任何普通命令一样调用 php cli 解释器，例如：`/usr/bin/php`并给它解释的脚本。作为替代方案，您也可以`shebang`在 php 脚本中使用并将其作为简单的可执行文件调用。-`wget`当你想在你的网络服务器中执行脚本时，用来调用一个指向你的网络服务器（可能是本地主机）的 url。

这可以作为您试验的起点：

```
#!/usr/bin/php
<?php
// the time tokens to be fed into the crontab line
$time=array('10','*','*','*','*');

// the actual command to be executed
$command=sprintf("crontab -l | (cat;echo \"%s\t%s\") | crontab", 
                 implode(' ',$time), 
                 '/usr/bin/beep');

// execute command
$result=system($command);

// output result of execution
if ($result)
  echo "Result: $result\n";
else
  echo "FAILURE!\n";
?> 
```

从 CLI 调用时为我工作。

# python - 使用python将数据写入csv文件后如何下载csv文件

> ID：13306613
> 
> 赞同：0
> 
> 时间：2012-11-09T10:47:28.230
> 
> 标签：python, csv, web.py

我正在使用 web.py 并创建一个基本网页，

我有一个基本的 html 代码，它有一个如下按钮

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Home</title>
</head>
<body>
   <form method="POST" action="/retrieve">
      <button id="submit" name="submit">Retrieve</button>
   </form>
</body> 
```

所以通过上面的代码，我可以在页面上看到一个按钮，当我们点击按钮时`Retrieve`，动作属性激活并转到所需的路径来执行操作

**index.py**代码

```
import web
import csv

urls = (
  '/retrieve',   'Retrieve',
)

app = web.application(urls, globals())
conn = mdb.connect(user='root', passwd='redhat', db='Merion_dev', host='localhost')

class Retrieve:

    def POST(self):
        cursor = conn.cursor()
        query = "SELECT * FROM adm_facility LIMIT 0,10 "
        cursor.execute(query)
        result = cursor.fetchall() 
        csv_file = csv.writer(open('Test_File.csv', 'wb'))
        csv_file.writerow(['Facility_id', 'Name', 'Account Number', 'Street'])
        for i in result :
            csv_file.writerow([i[0],i[2],i[3],i[4]])
        raise web.seeother('/retrieve')

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

因此，当我运行上面的代码时，通过写入的选择查询成功地使用数据库中的数据创建了一个 csv 文件。

现在我想做的是，当我们点击检索按钮时，数据应该被写入 csv 文件，并且应该像

当`phpmyadmin`我们单击`export`按钮时，将根据我们的选择以不同的格式下载文件，所以在这里我想在保存数据后下载文件（csv）。

谁能告诉我

1.  通过上述代码将数据保存到其中后，我们如何下载 csv 文件

2.  我们一般如何使用 python 下载 csv 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:03:50.260

您不必将其写入文件，您可以使用 StringIO ：

```
from StringIO import StringIO
import csv

import web

urls = (
  '/retrieve',   'Retrieve',
)

app = web.application(urls, globals())
conn = mdb.connect(user='root', passwd='redhat', db='Merion_dev', host='localhost')

class Retrieve:

    def POST(self):
        cursor = conn.cursor()
        query = "SELECT * FROM adm_facility LIMIT 0,10 "
        cursor.execute(query)
        result = cursor.fetchall() 
        csv_file = StringIO()
        csv_writer = csv.writer(csv_file)
        csv_writer.writerow(['Facility_id', 'Name', 'Account Number', 'Street'])
        for i in result :
            csv_writer.writerow([i[0],i[2],i[3],i[4]])
        web.header('Content-Type','text/csv')
        web.header('Content-disposition', 'attachment; filename=yourfilename.csv')
        return csv_file.getvalue()

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

# call - 如何在 Matlab GUI 中调用函数？

> ID：13306621
> 
> 赞同：0
> 
> 时间：2012-11-09T10:47:58.193
> 
> 标签：call, matlab-guide

我是 matlab 新手，我试图在 matlab GUI 中调用一个函数，但我不断收到错误消息。你能帮忙吗？

```
 function PushMe_Callback(hObject, eventdata, handles)
 set(handles.output_line,'String','I Got here');

 Get_Length(Note_Vector,output,Counter,Total_num)
 %------------------------------------------------------------
 function Get_Length(Note_Vector,output,Counter,Total_num)
 output = [ ];
 while (1)
 T = Total_num - Counter;
    for j=1:T
        [xml_input]=Get_Note(Note_Vector(j));
        output = [output xml_input];
    end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:57:40.350

您必须从 gui 数据中获取数据。您可以从函数“guidata”中检索这些数据。

实际上发生的情况是，您在“主函数”中定义了一个变量，但您无法访问该变量。

你应该做的是在“GUI_OpeningFcn”函数的句柄中添加这个变量：

```
Note_Vector = [ ];
output = [ ];
Counter = 0
for i=1:Total_num
    Note_Vector = [Note_Vector Note+Shift];
end
handles.Note_Vector = Note_Vector;
handles.GLoutput = output; %handles.output is already the handle of your GUI, don't change it.
handles.counter=counter;
handles.Total_num=Total_num;
(...)
guidata(hObject, handles); 
```

那么您可以通过简单地编写 handle.Note_Vector 在 PushMe_Callback 中检索这些数据，或者您可以通过在 Get_Length 函数句柄 = guidata(handle) 中执行以下操作来检索它们。在这种情况下，您必须输入 GUI 的句柄

```
Get_Length(Note_Vector,output,Counter,Total_num,handles.output) 
```

如果您想了解更多信息，我让您查看有关 guidata() 的 matlab 帮助文件。

# sql - SQL，查找数据库中不存在哪些数组条目

> ID：13306622
> 
> 赞同：-1
> 
> 时间：2012-11-09T10:48:03.290
> 
> 标签：sql, database, arrays

我有字符串数组。例如数组 FileNamesArray[] 中的 10 个字符串

我有一个包含 7 行的数据库表。MyFiles 表说明：

```
ID int
FileName varchar 
```

我想知道我的表中不存在数组中的哪些字符串。像这样：

```
 "SELECT * FROM (" + FileNamesArray + ") LEFTJOIN MyFiles ON FileNamesArray = MyFiles.FileName WHERE MyFiles.FileName IS NULL 
```

如何用 SQL 表达？我可以避免使用临时表吗？

PS示例

```
FileNamesArray = ['file1', 'file2', 'file3', ..., 'file10']
MyFiles = ['file0', 'file1', ..., 'file6']
I need to get answer = ['file7', 'file8', 'file9', 'file10'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:48:05.690

如果你的文件名是固定的，你可以声明一个内存表，例如

```
DECLARE @Temp TABLE (
  Filename VARCHAR(255)
)

INSERT INTO @Temp VALUES ('file1')
INSERT INTO @Temp VALUES ('file2')
INSERT INTO @Temp VALUES ('file3')
INSERT INTO @Temp VALUES ('file4')
INSERT INTO @Temp VALUES ('file5')
INSERT INTO @Temp VALUES ('file6')
INSERT INTO @Temp VALUES ('file7')
INSERT INTO @Temp VALUES ('file8')
INSERT INTO @Temp VALUES ('file9')
INSERT INTO @Temp VALUES ('file10')

SELECT t.Filename
FROM @Temp t
LEFT JOIN MyFiles mf ON t.Filename = mf.Filename
WHERE mf.Filename IS NULL 
```

我看不出您如何摆脱使用临时表，希望这会有所帮助

# java - 加入表后结果中的 EclipseLink Criteria API 计数

> ID：13306624
> 
> 赞同：1
> 
> 时间：2012-11-09T10:48:11.203
> 
> 标签：java, eclipselink, criteria-api, criteriaquery

经过我们的搜索，我仍然无法找到在*EclipseLink 标准查询*中编写此 SQL 等效项的方法：

```
SELECT preke.*, count(nuotrauka.prid) AS cnt FROM preke LEFT JOIN nuotrauka ON nuotrauka.prid=preke.prid WHERE trash = 1 GROUP BY preke.prid ORDER BY cnt DESC 
```

我尝试了连接、多选等。我需要在like`getResultList()`中返回我。`List``List``list[0] - (Preke)preke1, list[1] - (Integer)count1; list[0] - (Preke)preke2, list[1] - (Integer)count2 ...`

**编辑 1**：

```
CriteriaBuilder cb = EntityManager.getInstance().getCriteriaBuilder();
CriteriaQuery criteriaQuery = cb.createQuery(Tuple.class);
Root<Preke> from = criteriaQuery.from(Preke.class);                    
Expression<Long> count = cb.count(from.get("images"));

criteriaQuery.where(cb.equal(from.get("trash"), true));
criteriaQuery.multiselect(from.alias("preke"), count.alias("count"));
criteriaQuery.groupBy(from.get("prid"));

TypedQuery<Tuple> typedQuery = EntityManager.getInstance().createQuery(criteriaQuery);
typedQuery.setFirstResult(PAGE * ITEMS_PER_PAGE);
typedQuery.setMaxResults(ITEMS_PER_PAGE);

prekes = typedQuery.getResultList();

...

for(Tuple t : prekes) {
    Preke p = (Preke)t.get("preke");
    long count = (long)t.get("count");
    ...
} 
```

它给了我以下 JPQL 声明：

```
SELECT  t0.prid AS a1, 
        ..., 
        COUNT(t1.id) 
FROM    preke t0, 
        nuotrauka t1 
WHERE 
        ((t0.trash = ?) AND (t1.prid = t0.prid))
GROUP BY t0.prid LIMIT ?, ? 
```

这几乎没问题，但它不包括计数为 0 的结果。

如上面JPQL语句所说——`t1.prid = t0.prid`应该是坏的部分，如何替换它？我想我在这里需要的是一个`LEFT JOIN`. 但是怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:32:20.420

而不是使用

```
Expression<Long> count = cb.count(from.get("images")); 
```

尝试使用

```
Join<Preke, Nuotrauka> images = from.join("images", JoinType.LEFT);
Expression<Long> count = cb.count(images); 
```

# scheme - 从scheme中的List中获取中间元素

> ID：13306626
> 
> 赞同：1
> 
> 时间：2012-11-09T10:48:30.110
> 
> 标签：scheme

我是计划的新手，有人可以给我一些关于如何获得“列表中的中间元素”的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T12:43:57.797

这是我的解决方案。它基于[龟兔算法](http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare)（用于需要检测循环列表的任何类型的列表遍历），因此它不会比正常的列表遍历做更多的工作。:-)

```
(define (middle-elements lst)
  (if (null? lst) '()
      (let loop ((tortoise lst)
                 (hare (cdr lst)))
        (cond ((eq? tortoise hare) #f)
              ((null? hare) (list (car tortoise)))
              ((null? (cdr hare)) (list (car tortoise) (cadr tortoise)))
              (else (loop (cdr tortoise) (cddr hare))))))) 
```

它涵盖以下情况：

*   如果给定一个空列表，则返回一个空列表。
*   如果给定一个包含奇数个元素的列表，则返回一个包含中间元素的单例列表。
*   如果给定一个包含偶数个元素的列表，则返回一个包含两个中间元素的列表。
*   如果给定一个循环列表，则返回`#f`.
*   如果给出不正确的列表（包括非列表），则召唤鼻恶魔。

# vb.net - VB.net 和 GPIO

> ID：13306629
> 
> 赞同：0
> 
> 时间：2012-11-09T10:48:44.340
> 
> 标签：vb.net, gpio

我需要打开一个连接到计算机 RJ-11 端口的钱箱。手册上说的是 RJ11 连接器`case open: GPIO 63 ADD A25H(bit3)`

如何从 VB.Net 访问该 GPIO？有人有例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:46:22.730

使用 Google 我发现您可能正在使用 Biostar 嵌入式 PC 主板

[手动的](http://www.biostar-europe.com/v4/upload/PC_Manual/BIPV10-IAP_110425.pdf)

您引用的表格是：

![RJ-11 表](../Images/78a959dcd1069d4ec974a3fd2f3c5461.png)

这似乎表明您正在谈论的值是一个*STATUS*引脚 - 一个输入，而不是一个输出。现金抽屉将使用这条线向 PC 指示抽屉的状态（打开或关闭）。您将读取此位，而不是写入它，以了解抽屉的状态。

GPIO 只是内存映射 I/O。您需要在内存地址 0xA25 处使用低级内存读取来检索该字。据推测，写入*控制*引脚会导致抽屉打开。如果没有更好的设备手册，很难说。

我不认为 .NET 提供任何写入内存映射 IO 的方法，但您可以通过使用以下代码导入系统 .dll 函数来做到这一点：

[将使用 inpout32.dll 的 Visual Basic 并行端口应用程序转换为 Delphi](https://stackoverflow.com/questions/8240520/converting-visual-basic-parallel-port-app-using-inpout32-dll-in-to-delphi)

但是用您感兴趣的地址替换并行端口地址 - 即：

```
 PortAddress = &HA25    ' etc 
```

我不确定上述 DLL 是否会让您指定其他端口地址，在现代 Windows 中甚至可能无法直接写入这些端口（出于系统安全原因）。通常，您将不得不求助于从[Windows 驱动程序开发工具包](http://msdn.microsoft.com/en-us/library/windows/hardware/ff557573%28v=vs.85%29.aspx)开始- 这并不总是一种实用的方法。最好看看您的硬件制造商是否已经提供了可以导入的驱动程序。

# c++ - 带有 Boost 库的 C++ 开发 CodeBlock Ubuntu

> ID：13306637
> 
> 赞同：1
> 
> 时间：2012-11-09T10:49:09.913
> 
> 标签：c++, ubuntu, boost, codeblocks

我主要使用 Java 工作，但我必须切换到 C++ 来开发一个项目。我做了研究，发现为了在 C++ 中做可移植代码，我需要使用 Boost 或 QT 库等。因此，现在我在 Ubuntu 中下载 CodeBlock IDE，但害怕如何开始构建项目。我在网上搜索了很多关于如何将 Boost 与 CodeBlock 一起使用，但每次我发现它只能在 Windows 上工作/配置。[http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef)

请指导我如何在 Ubuntu 中使用 CodeBlock 配置 Boost 库，以便我可以编写可移植代码。如果我在编写必须在 Linux 和 Windows 环境中都支持的可移植代码的方向上错了，也请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:55:18.003

看看[http://www.boost.org/doc/libs/1_52_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_52_0/more/getting_started/unix-variants.html)

如果你不需要最新版本的 boost，你应该在 ubuntu 上安装 boost 使用

```
apt-get install libboost* 
```

# c# - 在 .Net 4 中保留安全信息

> ID：13306638
> 
> 赞同：6
> 
> 时间：2012-11-09T10:49:09.663
> 
> 标签：c#, .net-4.0, connection-string

您使用 Microsoft Visual Studio 2010 和 Microsoft .NET Framework 4 创建应用程序。应用程序连接到 Microsoft SQL Server 2008 数据库。应用程序使用 Microsoft ADO.NET SQL Server 托管提供程序。连接失败时，应用程序会记录连接信息，包括完整的连接字符串。信息以纯文本形式存储在 .config 文件中。

您需要确保数据库凭据是安全的。

您应该将哪个连接字符串添加到 .config 文件中？

**A** .Data Source=myServerAddress; 初始目录=myDataBase; 集成安全=SSPI；持久安全信息=false；

**B.**数据源=我的服务器地址；初始目录=myDataBase; 集成安全=SSPI；持久安全信息=true；

**C** .Data Source=myServerAddress; 初始目录=myDataBase; 用户 ID = 我的用户名；密码 = 我的密码；持久安全信息=false；

**D.**数据源=我的服务器地址；初始目录=myDataBase; 用户 ID = 我的用户名；密码 = 我的密码；持久安全信息=true；

根据指南，答案是“A”。但在我看来，答案是“C”。如果我们使用 Integrated Security = SSPI，我们不需要提供用户 ID 和密码。因此，Persist Security Info=false 无效。

据我所知，仅当连接字符串具有用户凭据时，持久安全信息才会生效。

你能告诉我哪一个是正确的吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T00:04:50.517

你说的对。Persist Security Info=false 只有在连接字符串中提供了用户名和密码时才有效。但问题是“你应该在 .config 文件中存储什么”并考虑到“信息以纯文本形式存储”，你不应该将 UID 和 PWD 存储在配置文件中。如果存储 C，则可以从 .config 文件中提取 PWD 和 UID。但是，如果您存储 A，则没有要提取的凭据。

我不确定，为什么 A 有`"Persist Security Info=false"`，但看起来这是一个很好的做法。请参阅 MSDN 示例：

*   [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.71).aspx)
*   [http://msdn.microsoft.com/en-us/library/ff647552.aspx](http://msdn.microsoft.com/en-us/library/ff647552.aspx)

# c# - Silverlight - 确定 UserControl 是否对用户可见

> ID：13306639
> 
> 赞同：0
> 
> 时间：2012-11-09T10:49:14.227
> 
> 标签：c#, silverlight, silverlight-5.0

我的 Silverlight 5 应用程序中有一个用户控件。此 UserControl 可以放置在任何其他控件上（可能在 TabItem、Panel 等上）。我现在必须确定 UserControl 是否对用户可见。只有当用户控件或其某些区域对用户可见时，这才应该是正确的。例如，当 UserControl 位于背景中的 TabItem 上或 UserControl 位于折叠面板上时，这可能是错误的。我可以从 VisualTree 中获取此信息吗？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:39:40.100

可以使用以下代码设置可见性：

```
MyItem.Visibility = Visibility.Visible; 
```

通常，当将一个项目放置在选项卡控件中时，它的可见性值取决于活动选项卡，更改选项卡将导致看到选项卡值，而不会提供其他选项卡值。

# pci-dss - 在 PAN 中发送前 12 位数字，是否符合 PCI-DSS？

> ID：13306640
> 
> 赞同：2
> 
> 时间：2012-11-09T10:49:18.250
> 
> 标签：pci-dss

我正在寻找一种解决方案，该解决方案要求我们捕获并发送客户 PAN 的前 12 位数字，以便启动将由客户在稍后阶段通过外部支付处理器完成的交易。

将生成具有前 12 位数字的事务日志。

从 PCI-DSS 的角度来看，这是否可行，还是需要我们完全遵守 PCI-DSS 要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T22:02:48.480

据我所知，PCI-DSS 有两个原则非常清楚：

1.  尽可能避免静态卡数据（存储中）。
2.  如果必须显示卡号，@paulg 表示前 6 个和后 4 个是可以接受的，而不是更多。这只有 10 位数字，通常有 6 位数字未知。你的 12 只留下 4 位未知数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-09T20:48:39.973

PCI 确实允许这样做，以便允许客户服务计算机搜索，以便持卡人可能正在打电话并要求信用卡号码的前 8 位数字以找到给定的客户或交易 - PCI 人员了解您无法通过解密系统上的每个信用卡号来执行有效的客户/交易搜索以执行匹配搜索。但我认为，只有当您满足 PCI-DSS 涵盖的所有其他领域的 PCI-DSS 要求时，才允许您存储未加密的部分信用卡号这一事实。

# android - 为什么我的图像在 SurfaceView 上绘制时会被拉伸？

> ID：13306641
> 
> 赞同：2
> 
> 时间：2012-11-09T10:49:17.403
> 
> 标签：android, android-layout

我在代码中手动创建 SurfaceView 并将其设置为我的活动的内容视图，如下所示：

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int width = displaymetrics.widthPixels;
int height = displaymetrics.heightPixels;
mainSurface = new MainSurface(getBaseContext());
mainSurface.getHolder().setFixedSize(width, height);
setContentView(mainSurface); 
```

然后我简单地在画布上绘制这样的图像：

```
canvas = surfaceHolder.lockCanvas(null);
int id = context.getResources().getIdentifier("imageName", "drawable", context.getPackageName());
Bitmap image = BitmapFactory.decodeResource(context.getResources(), id);
canvas.drawBitmap(image, pos[0], pos[1], null);
surfaceHolder.unlockCanvasAndPost(canvas); 
```

但事情很奇怪......有些图像/位图被拉伸并且位置因图像而异，所以如果我给两个图像相同的位置，它们不会放在同一个地方？好像有一些我不知道的布局管理正在进行，但那怎么可能呢？在 SurfaceView 上绘图时，它们不应该总是绝对位置吗？

我完全不解！

**编辑**
好的，这是因为我只有“drawable”文件夹中的图像，如果我将它们复制到“drawable-hdpi”，它们不会被拉伸！所以把我的问题转向另一个方向，我可以让 Android 停止这样做吗？我可以让Android按原样使用我的图像，即使它们只存在于“drawable”文件夹中，同时使用不同dpi文件夹中的那些图像（如图标等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:33:11.400

这是因为我只有“drawable”文件夹中的图像，如果我将它们复制到“drawable-hdpi”，它们不会被拉伸！

编辑：事实上，如果你想对所有屏幕使用相同的图像并且不让它们被 Android 调整大小，你可以将它们放在“drawable-nodpi”文件夹中

# windows-phone - 管理程序问题 WP8 模拟器

> ID：13306642
> 
> 赞同：0
> 
> 时间：2012-11-09T10:49:19.780
> 
> 标签：windows-phone, hyper-v, windows-phone-8, windows-phone-8-emulator

在尝试启动我的第一个 WP8 应用程序后，我收到一条错误消息，说它无法创建虚拟交换机。所以去我的 BIOS 并确保所有选项都根据关于运行 WP8 模拟器的先决条件的微软文章进行设置。

但是现在模拟器说，在 PC 上找不到 Hypervisor，Coreinfo 也说，Hypervisor 没有运行：

![核心资讯](../Images/6901abda55582d0e2f324234b9109413.png)

我希望你有一个解决方案:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:40:11.497

第一个问题，这台 PC 是在运行还是裸机还是作为虚拟机？因为在虚拟机中运行时不能使用 WP8 模拟器。
其次，确保 Hyper-V 已启用 - 为此您需要 Windows 8 Pro x64。如果未启用，请转到“打开或关闭 Windows 功能”并在此处启用 Hyper-V 并重新启动您的 PC。现在一切都应该工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T04:51:54.803

这是模拟器的故障排除页面：希望它有所帮助！

[http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/b06cc9f2-aa5e-4cb3-9df1-0c273e1dfd68](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/b06cc9f2-aa5e-4cb3-9df1-0c273e1dfd68)

# language-agnostic - 圈复杂度和基本圈复杂度有什么区别？

> ID：13306644
> 
> 赞同：11
> 
> 时间：2012-11-09T10:49:27.410
> 
> 标签：language-agnostic, cyclomatic-complexity

已经有一个关于[什么是圈复杂度的问题？](https://stackoverflow.com/questions/911637/what-is-cyclomatic-complexity)

但是，还有另一个术语称为 - 基本圈复杂度。

代码的这两个指标有什么区别和相似之处？他们的典型接受值是什么？此外，我了解到，为了*理解*代码，基本圈复杂度是一个更相关的指标。而从*实现*的角度来看，圈复杂度是最相关的。如果是这样，为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T22:11:34.487

如您所知，Cyclometric Complexity 有效地测量了通过方法或函数的可能独立路径的数量。这告诉我们该方法的测试有多复杂。

然而，基本的循环复杂度告诉我们，一旦我们去除了结构良好的复杂度，还剩下多少复杂度。结构良好的复杂性的一个示例是 for 循环，其中循环的条件在循环开始时声明。但是，如果我们使用 break 语句跳出循环，例如在路径中间的某个地方，我们会破坏我们的结构化组件。类似的情况是我们在单个函数中有许多 return 语句。

那么这告诉我们什么呢？

想象一下，我们有一个具有高 CC 的功能：一个难以测试的功能。现在，如果此功能的基本 CC 较低，则意味着很容易将此功能分解为其他更易于单独测试的较小功能。当基本复杂性很高时，这种重构会更困难，因为复杂性更难理解。

因此，具有高基本复杂性的代码意味着他的代码更难维护和理解。我们可以说这段代码质量较低。具有高复杂性的代码更难测试，但一般来说，当基本复杂性较低时，我们可以更容易地对此进行一些测试。

使用什么值总是有争议的，并且在一定程度上取决于应用程序的类型和使用的语言。例如，在函数内部抛出异常会使该函数变得非结构化。显然，正确使用的例外被认为是一种好的做法。同样，在函数顶部验证参数并立即返回是一种常见做法（在我看来）可以使代码更清晰。这又是一个非结构化的结构。所以我们可以想象我们可以接受基本复杂性的基本水平。

我个人对 .NET 或 Java 中的企业风格应用程序的限制是：

CC <= 16 和 ECC <= 6

对于在 C/C++ 中说的更“复杂”的应用程序，我会提出更严格的限制：

CC <= 10 和 ECC <= 4

# c# - 如何使用不同的用户（模拟）在不同域的服务器上获取文件？

> ID：13306647
> 
> 赞同：1
> 
> 时间：2012-11-09T10:49:32.543
> 
> 标签：c#, impersonation, credentials, getfiles

所以我要做的是根据用户给出的文件夹路径列出文件名等信息。并且由于可以针对位于不同域中的文件服务器，因此您需要使用不同的用户。

我`Directory.GetFiles(path)`用来获取文件。那么有没有一种简单或不太难的方法来实现呢？

PS 我在一个简单的 c# 控制台应用程序中完成所有这些工作。

**[编辑]**

我能找到的只是：[Getting the Current username when impersonated](https://stackoverflow.com/questions/7613468/getting-the-current-username-when-impersonated)

# sublimetext2 - 用括号扩展选择

> ID：13306648
> 
> 赞同：3
> 
> 时间：2012-11-09T10:49:37.173
> 
> 标签：sublimetext2

在 ST2 中，我们将选择扩展到括号​​，但如果我需要用括号扩展选择？或更一般的用括号、方括号、花括号扩展选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T10:43:45.377

选择括号： `ctrl`+ `shift`+`m`

选择html标签换行 ：`ctrl`++`shift``a`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T03:29:44.367

Sublime Text 的**Expand Selection to Brackets**被设计为可以多次调用，它的工作原理如下：

1.  如果未选择任何内容或选择不完整，则将选择第一组括号的*内容*。
2.  如果所选内容包含一组括号的完整内容，则扩展所选内容以包括封闭括号。
3.  如果选择仅包含一组括号及其内容，则扩展选择以包括父项的内容*和*包含括号。
    *   ***注意：***父容器似乎是向后发现的。有时这会将选择切换到同级容器，然后再遍历一个级别。（见下面的结果 3 和 5）

在以下示例中，从嵌套注释中的光标开始，下面的列表描述了调用**Expand Selection to Brackets**所产生的选择。

```
for (x in y) {
    if (x in z) {
        // start selection here
    }
} 
```

1.  if 语句花括号的内容被选中
2.  选择 if 语句花括号
3.  选择了 if 语句条件，包括括号
4.  选择了 for 语句的内容，包括大括号
5.  选择了 for 语句参数，包括括号

我找不到任何文件来验证这一点。ST2 和 ST3 之间的选择结果是一致的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T08:59:52.070

对于 lispers 和clojurians。这是交易。使用宏。

```
[
    {"command": "move_to", "args": {"to": "brackets"}},
    {"command": "move", "args": {"by": "characters", "forward": true}},
    {"command": "move_to", "args": {"to": "brackets"}},
    {"command": "move_to", "args": {"to": "brackets", "extend": true}}
] 
```

尝试猜测函数。例如，move_to 没有方向，第一次调用将使您向前移动，但第二次调用将您向后移动。好的移动和前进：是的，但在哪里后退？再次向前： false 是向后的。糟糕的API。也扩展（为什么不选择：真？）将随着选择移动，而没有它只是移动到某个地方。

# ios - 任何人都可以动态演示一些关于布局 UITableViewCell 的代码

> ID：13306649
> 
> 赞同：0
> 
> 时间：2012-11-09T10:49:37.400
> 
> 标签：ios, layout, uitableview, dynamically-generated

每个都`UITableViewCell`包含几个标签和图像（就像下面的 twitter 应用程序的主页一样）。我应该如何布局标签和图像，调整大小`UITableViewCell`，动态？

1.  数据是从后端获取的，如果它没有图像，那么`UITableViewCell`将适应它。
2.  `UITableView`，就像android中的列表视图一样，我已经完成了。

![推特应用](../Images/2b24066b23488ec7fca9606189a0957b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:57:07.530

您可能想查看有关自定义表格视图单元格的教程。

例如，查看这个[http://www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)。

# c - 如何在标题中使用静态函数并与浮点数组进行比较

> ID：13306650
> 
> 赞同：1
> 
> 时间：2012-11-09T10:49:37.480
> 
> 标签：c, gcc

我写了这个函数：

```
static bool colorIsEmpty(const Color col)
{
    return (col[0] == 0 && col[1] == 0 && col[2] == 0 );
} 
```

其中 Color 只是一个浮点数[3]；如果 col[3] 都为 0，则该函数不起作用；但这有效：

```
if(col[0] == col[1] == col[2] == 0) {
//gets called
} 
```

但是 gcc 给了我警告：

```
 cColorTest.c:212:5: warning: suggest parentheses around 
comparison in operand of ‘==’ [-Wparentheses] 
```

所以如果该功能有效，那就太好了，为什么它不起作用？我的意思是函数总是返回假，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:58:21.233

条件

```
if(col[0] == col[1] == col[2] == 0) { 
```

带括号

```
if(((col[0] == col[1]) == col[2]) == 0) { 
```

所以如果`col[0] == col[1]`，它检查是否`col[2] != 1`，如果`col[0] != col[1]`，它检查是否`col[2] != 0`。我坚信这不是你想要的。

```
static bool colorIsEmpty(const Color col)
{
    return (col[0] == 0 && col[1] == 0 && col[2] == 0 );
} 
```

检查所有三个数组元素是否都为 0，如果它没有给出预期的结果，那么你的数组元素不是你期望的。

根据您的应用程序，您可能需要近似测试而不是严格相等。由于浮点数的性质，在数学上具有相同结果的不同计算导致浮点算术/微积分的不同结果并不罕见。通常差异很小（但它也可能变得很大，例如由于[失去显着性/灾难性消除](http://en.wikipedia.org/wiki/Loss_of_significance)），因此经常将浮点值与容差进行比较。

也许用`col[i] == 0`近似零测试替换`fabsf(col[i]) < epsilon`是适合您目的的正确策略（`epsilon`取决于用例的适当值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:52:33.010

如果要使编译器静音，则应添加括号以强制评估顺序。但是您的比较似乎是错误的；你不能那样做。你为什么不使用第一种形式？它更具可读性，并且工作正常，除了将浮点数与`==`运算符进行比较非常不安全。

# ruby-on-rails-3.2 - 如何将参数传递给rails form_tag？

> ID：13306653
> 
> 赞同：3
> 
> 时间：2012-11-09T10:49:45.933
> 
> 标签：ruby-on-rails-3.2

我有一个问题，我想将自定义 url 参数传递给 form_tag 方法。我尝试了许多在stackoverflow上解释的方法，但似乎没有一种方法适用于rails 3.2.8。

这是我目前的：

```
<%= form_tag search_results_path,
             :method => "get",
             :params => params.merge(:button => "..."),
             class: "form-search" do %> 
```

这也不起作用：

```
<%= form_tag search_results_path,
             :method => "get",
             :params => params.except(:controller, :action).
                        merge(:button => "..."),
             class: "form-search" do %> 
```

但是当 search_results_path 完成加载时， params[:button] 没有设置。

谢谢你的帮助。

编辑：

我尝试在视图中呈现表单，该表单具有`action="/search/params?button=xxx`. 这应该是我的选项卡的初始状态，每次重新加载页面时，也应该传递这个 url 参数，以提供我当前的选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:07:25.800

伙计，请解释您要做什么，而不是如何。您不将参数传递给表单，这是没有意义的。说明你的目标是什么，我也许可以帮助你。

如果您想通过表单将参数从 url 传递到您的控制器，您只需创建一个隐藏字段并使用 params[:param_name] 设置其值

编辑==============

您必须使用 url_for 或 polymorphic_path 来生成带参数的 url。喜欢：

```
 form_tag(:url => url_for(...path_with_parameters)) 
```

或者

```
form_tag(:url => polymorphic_path(...path_with_parameters)) 
```

# iphone - 在“id”类型的对象上找不到属性“splitViewBarButtonItem” '

> ID：13306660
> 
> 赞同：1
> 
> 时间：2012-11-09T10:50:29.247
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在关注`Stanford cs193p lesson 7`使用`SplitViewControllers`和协议。我正在做与教授完全相同的事情（多次检查），但我一遍又一遍地收到这个错误。

我定义了一个协议`SplitViewBarButtonItemPresenter.h`

```
#import <UIKit/UIKit.h>

@protocol SplitViewBarButtonItemPresenter <NSObject>
@property (nonatomic,strong) UIBarButtonItem *splitViewBarButtonItem;
@end 
```

在我的主 CalculatorViewController.h

```
@interface CalculatorViewController : UIViewController <UISplitViewControllerDelegate> 
```

在 CalculatorViewController.m

```
-(id <UISplitViewControllerDelegate>)splitViewBarButtonItemPresenter
{
    id detailVC = [self.splitViewController.viewControllers lastObject];
    if(![detailVC conformsToProtocol:@protocol(SplitViewBarButtonItemPresenter)]){
        detailVC = nil;
    }
    return detailVC;
}

- (void)awakeFromNib
{ 
    [super awakeFromNib];
    super.splitViewController.delegate = self;
} 
```

后来当我尝试设置 barButtonItem

```
-(void)splitViewController:(UISplitViewController *)svc
    willHideViewController:(UIViewController *)aViewController
         withBarButtonItem:(UIBarButtonItem *)barButtonItem
      forPopoverController:(UIPopoverController *)pc
{
    barButtonItem.title = self.title;
    [self splitViewBarButtonItemPresenter].splitViewBarButtonItem = barButtonItem;
} 
```

我不断收到标题中的错误，就好像我没有正确声明协议和委托一样。我真的不知道还能去哪里寻找错误，因为我正在逐行、逐字地遵循斯坦福教授的做法。错误在这一行，特别是：

```
[self splitViewBarButtonItemPresenter].splitViewBarButtonItem = barButtonItem; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:02:18.197

首先，您的代码中有一个无限递归：

```
-(id <UISplitViewControllerDelegate>)splitViewBarButtonItemPresenter
{
    id detailVC = [self.splitViewController.viewControllers lastObject];
    if(![detailVC conformsToProtocol:@protocol(SplitViewBarButtonItemPresenter)]){
        detailVC = nil;
    }
    return [self splitViewBarButtonItemPresenter] ? UIInterfaceOrientationIsPortrait(UIInterfaceOrientation) : NO;
} 
```

该方法在 return 语句中调用自身，并且没有中止条件。其次，即使该方法会返回一个值，它也会返回 a`BOOL`但它应该返回一个`id<UISplitViewControllerDelegate>`。

第三，要么方法的返回类型错误，要么名称具有误导性。您有一个名为的协议`SplitViewBarButtonItemPresenter`，该方法的名称是`splitViewBarButtonItemPresenter`. 所以从名字上我希望它返回一个`id<SplitViewBarButtonItemPresenter>`not an `id<UISplitViewControllerDelegate>`。

最后但并非最不重要的一点是，您的`SplitViewBarButtonItemPresenter`协议不是由`CalculatorViewController`.

因此，您的代码存在很多问题，我建议您更频繁地检查。

# search - 管道搜索结果到 VIM 中的其他选项卡/窗口/缓冲区

> ID：13306664
> 
> 赞同：8
> 
> 时间：2012-11-09T10:50:47.820
> 
> 标签：search, vim, pipe

我发现了 VIM 搜索的一个不错的功能，即列出所有搜索结果和相应的行号。

例如：

```
:g/for.*bar/# 
```

问题：是否有一种“简单”的方法可以将其通过管道/放入另一个窗口/选项卡/缓冲区？

干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T11:26:23.530

我不知道如何将输出通过管道传输`:g/for.*bar/#`到新的缓冲区中，但我知道如何使用`vimgrep`来获得相同的结果。

尝试：

```
vimgrep "for.*bar" %
:copen 
```

现在您有了一个包含所有搜索结果的缓冲区，您甚至可以使用`:cn`和在它们之间导航`:cp`。

看一眼`:help quickfix`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:24:52.993

我不知道如何将输出直接重定向到缓冲区，但您可以使用`redir`将其发送到寄存器，然后将该寄存器粘贴到新缓冲区。

```
:redir @a
:g/for.*bar/#
:redir END
:enew
:put! a 
```

( `#`after `:g`) 将每个结果的行号添加到前面。

您也可以将其发送到文件中。

```
:redir > file
:g/for.*bar/#
:redir END
:e file 
```

查看`:help :redir`更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T21:29:55.520

称赞接受的答案：我做了一个映射，用 \ss （显示搜索）直接在 quickfix 窗口上打开最后一个搜索，将它添加到你的 .vimrc 中：

```
" show last search results on the quickfix window at windows bottom
nnoremap <silent><leader>ss :vimgrep /<C-r>\// % <CR> :botright copen <CR> 
```

BR

# iphone - Apple Developer 帐户和配置文件

> ID：13306665
> 
> 赞同：0
> 
> 时间：2012-11-09T10:50:48.077
> 
> 标签：iphone, ios, ipad

我想运行我在我的应用程序上构建的应用程序`IPAD`

我有一个苹果开发者帐户，当我登录网站时可以使用

但是当我在这里创建配置文件链接时

```
http://developer.apple.com/ios/manage/overview/index.action 
```

它显示访问被拒绝。

我必须为此使用不同的帐户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:53:27.837

[您还必须在https://developer.apple.com/programs/](https://developer.apple.com/programs/)加入 Apple 开发人员计划，才能在您的硬件上测试您的应用程序。

# input - 引导程序。前置和附加输入。如何最大输入字段宽度？

> ID：13306670
> 
> 赞同：19
> 
> 时间：2012-11-09T10:50:56.453
> 
> 标签：input, twitter-bootstrap

我正在使用来自 Twitter 的 Bootstrap。我想要的是制作一个前置文本、输入字段和一个按钮，但我希​​望我的输入字段具有最大可用宽度，以便提交按钮的右边缘靠近井的右边缘。在引导文档中，有一个**.input-block-level**类，它可以让任何或元素表现得像块级元素，但是将其应用于输入会导致中心输入的大小为井的大小。[http://jsfiddle.net/Uc4CE/](http://jsfiddle.net/Uc4CE/)

```
<div class="well">
<div class="input-prepend input-append">
  <span class="add-on">Some text</span>
  <input class="input" type="text" name="xxx" value="xxx" />
  <input type="hidden" name="next" value="xxx" />
  <input type="submit" value="xx" class="btn btn-info" />
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-04T09:03:49.770

**编辑：请注意，这个答案对 Bootstrap v2.3.x 有效。Bootstrap 3 已经原生解决了这个问题（[参见 doc](http://getbootstrap.com/components/#input-groups)）。**

受 A lee 的回答启发，这是我**改进的解决方案**（包括追加和前置、最小可能的附加宽度、删除不必要的样式、自动高度......）。在 Bootstrap CSS/LESS 文件之后包含这个：

```
.input-append.input-block-level,
.input-prepend.input-block-level {
  display: table;
}

.input-append.input-block-level .add-on,
.input-prepend.input-block-level .add-on {
  display: table-cell;
  width: 1%; /* remove this if you want default bootstrap button width */
}

.input-append.input-block-level > input,
.input-prepend.input-block-level > input {
  box-sizing: border-box; /* use bootstrap mixin or include vendor variants */
  -moz-box-sizing: border-box; /* for Firefox */
  display: table; /* table-cell is not working well in Chrome for small widths */
  min-height: inherit;
  width: 100%;
}

.input-append.input-block-level > input {
  border-right: 0;
}

.input-prepend.input-block-level > input {
  border-left: 0;
} 
```

在您的 HTML 中像这样使用它并记住，在这种情况下，**您必须使用`a`标签**而不是`button`按钮：

```
<div class="input-append input-block-level">
  <input type="text" />
  <a class="btn add-on">click</a>
</div> 
```

**编辑：**在 IE8 中，如果您设置`display: table`为`.input-append.input-block-level > input`，输入标签将变为不可编辑，尽管获得焦点。

完全省略此`display:`参数使其在 IE8 以及当前的 Chrome/Safari/Firefox 中按预期工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T22:07:15.767

我正在寻找类似的东西，来自[https://gist.github.com/mattjorn/5020957](https://gist.github.com/mattjorn/5020957)的这个解决方案对我有用 - 添加`.input-block-level`到你的外部 div，例如，

`<div class="input-prepend input-append input-block-level">`

然后像这样扩展引导 CSS：

```
.input-prepend.input-block-level {
  display: table;
  width: 100%;
}

.input-prepend.input-block-level .add-on {
  display: table-cell;
  background-color: white;
}

.input-prepend.input-block-level > input {
  box-sizing: border-box;
  height: 30px;
  display: table-cell;
  width: 100%;
  border-left-style: none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T11:05:14.487

可用于`div class="input-prepend input-append"`其他样式`margin-right`

您的代码的结果：

```
<div class="well">
    <div class="input-prepend input-append" style="margin-right: 108px;">
        <span class="add-on">Some text</span>
        <input class="input-block-level" type="text" name="xxx" value="xxx" />
        <input type="hidden" name="next" value="xxx" />
        <input type="submit" value="xx" class="btn btn-info" />
    </div>
</div> 
```

[http://jsfiddle.net/Uc4CE/1/](http://jsfiddle.net/Uc4CE/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:24:36.537

[根据@mdo 对此问题的评论，在](https://github.com/twitter/bootstrap/issues/6414)Twitter Bootstrap 的 3.0 分支中对此进行了修复。

但是，与此同时，当我`django-crispy forms`在`<div class="span4">`. 这说明了响应式设计。

* * *

**示例 HTML**

```
<div class="row-fluid">
    <div class="span4">
        {% crispy form %}
    </div>
</div> 
```

* * *

**样式.css**

```
/* I also set this to account for smaller widtsh */

form fieldset {
    width:100%
} 
```

* * *

**修复.js**

***注意：我也通过调整窗口大小来触发它。***

> function sizeInputs() {
> var fw = $('form fieldset').innerWidth();
> $('form .input-prepend').each(function(){ $(this).children('input').css('width', fw-$(this).children('.add-on' ).innerWidth()); }); };
> 
> $(document).ready(function() { sizeInputs(); });
> 
> $(window).resize(function() { sizeInputs(); });

# hibernate - 没有表的实体的映射

> ID：13306678
> 
> 赞同：0
> 
> 时间：2012-11-09T10:51:21.803
> 
> 标签：hibernate

我们在我们的项目中使用了hibernate，结果我们想使用hibernate的强大功能来处理后面没有表格的实体。

简化的情况如下所示。我有 3 个表 CUSTOMER_ATTRIBUTES、CONTRACT_ATTRIBUTES、CUSTOMER_CONTRACT_RELATION。两个属性表都有结构 - id（客户 id 或合同 id）、名称、值（对于每个 id，可能有更多条目）。关系表包含客户和合同之间的映射（1 个客户可以有多个合同）。

最后我想要2个实体。客户（由客户 ID 标识，并具有属性集合）和合同（由合同 ID 标识，并具有属性集合）。我想使用休眠关联将它们关联起来。

是否可以使用某种休眠映射来创建此类实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:30:35.180

您可以`@subselect`在休眠中使用注释将实体映射到查询而不是表。有关更多信息，请查看休眠[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/mapping.html)

# struts - 如何在 Action 标签中动态设置“input”属性的值 - Struts-config.xml (Struts 1.2)

> ID：13306679
> 
> 赞同：1
> 
> 时间：2012-11-09T10:51:30.697
> 
> 标签：struts, struts-1, struts-validation, struts-config

在 struts-config.xml 文件中，action 元素有一个 input 属性，当 actionForm 的 validate 方法返回一些错误时使用该属性。

```
<action
  path="/somepath"
  attribute="someForm"
  input="/some.jsp"
  name="someForm"
  parameter="status"
  scope="request"
  type="cn.mycompany.struts.action.SomeAction"/> 
```

但是我想在 validate 方法中发生错误时更改此输入属性，因为我有多个页面提交到此操作，并且我希望将其转发到当前提交页面。

我该怎么做，请帮助我。我正在使用 Struts 1.2 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:56:43.483

您需要做的就是再次映射操作。您需要的每个输入的一个映射。

```
<action
path="/somepath"
attribute="someForm"
input="/some.jsp"
name="someForm"
parameter="status"
scope="request"
type="cn.mycompany.struts.action.SomeAction"/>

<action
path="/somepath2"
attribute="someForm"
input="/some2.jsp"
name="someForm"
parameter="status"
scope="request"
type="cn.mycompany.struts.action.SomeAction"/> 
```

# android - 首选项不保存使用复合 EditTextPreferences

> ID：13306680
> 
> 赞同：0
> 
> 时间：2012-11-09T10:51:31.700
> 
> 标签：android, sharedpreferences, android-preferences, dialog-preference

我已按照本教程使用复合[对话框首选项](http://alexfu.tumblr.com/post/23683149440/android-dev-custom-dialogpreference)

所有东西都运行良好，唯一的问题是偏好没有为应用程序保存。可能是系统默认不保存首选项，所以有什么方法可以保存它们。

我已经实现`callChangeListener()`了保存首选项的方法：

```
@Override
public void onClick(DialogInterface dialog, int which) {
    switch (which) {
    case DialogInterface.BUTTON_POSITIVE:
        mText = mEditText.getText().toString();
        Log.e("**CompoundEditTextPref line 63**",mText);
        callChangeListener(mText);
        break;
    }
    super.onClick(dialog, which);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:07:52.747

你需要使用方法`persistString(String value)`。检索价值使用`getPersistedString (String defaultReturnValue)`。

看看[文档](http://developer.android.com/reference/android/preference/Preference.html#persistString%28java.lang.String%29)。

希望能帮助到你。

# plone - WARNING ZEO.zrpc ... ECONNREFUSED 启动 Plone 时出错

> ID：13306681
> 
> 赞同：3
> 
> 时间：2012-11-09T10:51:41.243
> 
> 标签：plone

我正在用户目录中为 plone 设置测试服务器。

我所做的是将生产模式下的整个 plone 目录复制到用户目录并将配置更改为另一个端口并将所有路径从`/var/plone`to`/home/user/plone`更改为我还将所有原始端口更改为不同的端口号，例如端口 8080 和 8081，到 7070以 7071 为例。

我还将 plone 目录的权限更改为我放置它的用户，并使用该用户的帐户来运行 buildout。我成功运行了 buildout ( `./bin/buildout`) 并成功启动了 zeo ( `./bin/zeo start`; output `daemon process started, pid=13123`)。

现在的问题是当我尝试运行实例（./bin/instance fg）时，我收到了这个错误：

```
 2012-11-09 18:48:45 WARNING ZEO.zrpc (13136) CW: error connecting to ('127.0.0.1', 7100): ECONNREFUSED
 2012-11-09 18:48:50 WARNING ZEO.zrpc (13136) CW: error connecting to ('127.0.0.1', 7100): ECONNREFUSED
 2012-11-09 18:49:00 WARNING ZEO.zrpc (13136) CW: error connecting to ('127.0.0.1', 7100): ECONNREFUSED
 2012-11-09 18:49:20 WARNING ZEO.zrpc (13136) CW: error connecting to ('127.0.0.1', 7100): ECONNREFUSED 
```

谁能给我一个想法如何解决这个问题？多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:59:35.790

如果在检查端口后，例如 Mikko 和 Martijn 建议您仍然看到这个，请尝试稍等。当 ZEO 实例尚未完成 Data.fs.index 文件的构建时，我经常在客户端启动期间看到此消息。如果数据库很大或机器功率不足，则可能需要很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-07T11:21:37.610

我使用以下步骤来解决这个问题：首先我使用以下方法停止并重新启动服务器：

```
bin/plonectl server stop/start 
```

我为我的站点创建了两个客户端，因此我使用以下命令一一启动它们：

```
bin/plonectl client1 start
bin/plonectl client2 start or fg 
```

最后我得到了我的解决方案。我希望它会帮助别人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:56:28.827

它无法连接 ZEO 服务器。

通过手动建立到目标端口的 TCP/IP 连接来检查 ZEO 服务器是否正在运行：

```
 telnet 127.0.0.1 7100 
```

如果它没有响应

*   端口不对

或者

*   ZEO 服务器未运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T20:12:59.367

我已经看到这个错误，因为 var/filestorage 目录上的权限/所有权问题阻止了 zeoserver 写入数据库锁定文件，即使您可以运行构建而没有错误。问题通知将显示为 zeoserver 进程 stdout 上的回溯（stderr 上没有任何内容）：

```
IOError: [Errno 13] Permission denied: '/srv/foo/var/filestorage/Data.fs.lock' 
```

根据需要调整 var/filestorage 上的权限和所有权，以确保运行 zeoserver 的用户在目录上有 rwx。

# ajax - Heroku 为 AJAX 请求发回 HTTP 状态 444 - 为什么？

> ID：13306684
> 
> 赞同：0
> 
> 时间：2012-11-09T10:51:53.690
> 
> 标签：ajax, jquery, post, heroku, nginx

我的前端 Web 应用程序使用 jQuery 的 AJAX 函数 ( `$.ajax`, `$.getJSON`, `$.post`) 通过 GET 和 POST 请求调用后端数据 API。在浏览器控制台和 Heroku 应用程序的日志中，我可以看到调用被拒绝，HTTP 状态为 444，这是 Nginx 自定义状态：

> 在 Nginx 日志中使用，表示服务器没有向客户端返回任何信息并关闭了连接（用作恶意软件的威慑）。

（虽然这并不一定意味着他们正在运行 Nginx 或者这是由于 Nginx）

任何人都知道为什么会发生这种情况或我该如何补救？这些电话并不花哨 - 这是一个示例咖啡脚本：

```
jQuery ($) ->

  tbody = $("table#top_five_table > tbody")

  $.ajaxSetup(
    dataType: "json"
  )

  $.getJSON url, (data, status, xhr) => [
    tbody.empty().html( data_munging(data) )
  ] 
```

一切都在本地工作，但显然我没有使用 Nginx 代理运行它（我假设 Heroku 是）。本地和 Heroku 实例上的请求标头看起来相同。

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:04:43.890

它的耻辱 - 我发现了一些检查引荐来源的代码，并会根据它采取某些措施来允许/拒绝路由，并且 localhost 被绕过，因此它始终有效。所以这是一个错误。

因为我提供了赏金，所以我似乎无法结束这个问题，所以我正在回答它。感谢所有花时间研究此事的人。

# php - 重写规则在 .htaccess 文件中不起作用

> ID：13306685
> 
> 赞同：1
> 
> 时间：2012-11-09T10:51:53.957
> 
> 标签：php, .htaccess, url

在我的门户中，我调用了一个 pdf 文件，路径看起来像 [http://www.mysite.com/filespath/books/online_bliss_in_five_simple_steps_1339668056/live/online_dating_bliss_in_five_simple_steps_1339668056.php](http://www.mysite.com/filespath/books/online_bliss_in_five_simple_steps_1339668056/live/online_dating_bliss_in_five_simple_steps_1339668056.php)

为了用户接受，我需要减少这个 url。然后我在 .htaccess 文件中添加一个代码。添加此行后，当我调用我的门户时，只显示一个白页，代码是

```
RewriteEngine On
RewriteRule    ^book/([A-Za-z0-9-]+_.)/?$  /live/$1.php    [NC,L] 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:58:55.523

试试这个：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^www\.askapache\.com$ [NC]
RewriteRule ^(.*)$ http://www.askapache.com/$1 [R=301,L] 
```

更多参考请点击[这里](http://www.askapache.com/htaccess/modrewrite-tips-tricks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:09:23.837

尝试编写完整路径：

```
RewriteEngine On
RewriteBase /filespath/book/
RewriteRule ^([A-Za-z0-9-]+_.)/?$ $1/live/$1.php [NC,L] 
```

# java - 在java中持久化对话框的数据

> ID：13306688
> 
> 赞同：3
> 
> 时间：2012-11-09T10:51:54.757
> 
> 标签：java, swing, jtable, jbutton, jdialog

```
if(e.getActionCommand().equals("save to file"))
    {
        System.out.println("save is pressed");
        StringBuffer fileContent = new StringBuffer();
        TableModel tModel = m_table.getModel();
        for (int i = 1; i < tModel.getRowCount(); i++) 
        {
         for(int j=0;j<tModel.getColumnCount();j++)
         {
            Object cellValue = tModel.getValueAt(i, j);
            // ... continue to read each cell in a row
            fileContent.append(cellValue);
            // ... continue to append each cell value
            fileContent.append(" ");
         }
         fileContent.append("\n");
        }
        FileWriter fileWriter;
        try {
            fileWriter = new FileWriter(new File("data.txt"));
            fileWriter.write(fileContent.toString());
            fileWriter.flush();
            fileWriter.close();
            }
        catch (IOException e1) 
        {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

我创建了一个`JDialog`其中有一张桌子。我可以通过单击按钮将表数据保存到文件中，但我想做的是将该数据保留在表中，以便下次运行程序时，该数据可用并显示在表中当按下确认按钮时。尽管我阅读了有关 Java 持久性和 Java 序列化概念的信息，但我并不清楚哪种技术适合以及如何用于此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:40:15.143

考虑`TableModel`使用,[此处](https://stackoverflow.com/a/11724866/230513)`java.util.Preferences`举例说明或,[此处](https://stackoverflow.com/a/6886694/230513)引用仅保存数据。`javax.jnlp.PersistenceService`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:17:27.047

这取决于您的应用程序。最简单快捷的方法是对象序列化。您可以将对象保存到文件中并再次加载。您将使用包含表数据的对象来执行此操作。有很多可用的教程。

您可以通过首先将对象转换为人类可读的内容（如 XML 或 JSON）并将其保存为文件来扩展序列化的概念。这样做的好处是您可以在 Java 程序以外的其他东西中使用导出的数据。编组为 XML 的框架是 JAXB。还有很多这方面的教程。

最后，您可以使用 SQL 数据库。数据库将是性能最高的替代方案。SQL ins Hibernate 中一个很好的持久性框架。它主要用于需要快速数据存储后端的大型业务应用程序。当然，您必须为此运行 SQL 服务器。再次提供大量教程。

我想对于您的情况，第一个选择将是最好的，因为它快速简便。SQL 会有点矫枉过正 ;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:18:37.887

如果您无权访问数据库（本地或服务器上），最好的方法可能是使用序列化。

考虑使用具体类来填充您的`JTable`. 所以要保存数据，你只需要让这个类实现`Serializable`，然后使用`ObjectOutputStream`. 然后稍后使用`ObjectInputStream`.

我真的不记得如何处理数据，`JTable`但您可能必须创建一个自定义 Model 类，该类从. 但最好使用 a ，因为它更灵活且易于使用。因此，您可以直接序列化列表，并在程序下次运行时检索。`AbstractTableModel``List``List`

# java - JPasswordField如何设置密码

> ID：13306689
> 
> 赞同：0
> 
> 时间：2012-11-09T10:51:58.313
> 
> 标签：java, swing, passwords, jpasswordfield

`JPasswordField`您好，当我想阅读它时，我正在使用它，这没问题，`getPassword`但是我正在做的是当未设置密码时，它会显示`InputDialog`您可以输入密码的位置，然后它应该将密码设置为`JPasswordField`但是当我使用`setText`它时没有设置它并且没有方法`setPassword()`。所以我的问题是如何设置密码`JPasswordField`？

```
String password = "";
JPasswordField passwordField = new JPasswordField();
passwordField.setEchoChar('*');
Object[] obj = {"Bitte ihr PAsswort eingeben:\n\n", passwordField};
Object stringArray[] = {"OK","Cancel"};

if (JOptionPane.showOptionDialog(null, obj, "Passwort", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, stringArray, obj) == JOptionPane.WARNING_MESSAGE)
{
password = new String(passwordField.getPassword());
}

txtFtpUser.setText(username);
panel_1.remove(txtFtpPassword);
txtFtpPassword = new JPasswordField(password);
txtFtpPassword.setBounds(10, 113, 206, 23);
panel_1.add(txtFtpPassword); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:28:06.013

您声称*不适*用于 a`setText`是不正确的。请参阅以下按预期工作的代码：*`JPasswordField`*

 *```
 public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame testFrame = new JFrame( "Test" );
        JPasswordField field = new JPasswordField(  );
        field.setColumns( 20 );
        field.setText( "Password" );
        testFrame.add( field );
        testFrame.pack();
        testFrame.setVisible( true );
        testFrame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
      }
    } );
  } 
```

您在构造函数中传递文本的变体（就像您在代码中所做的那样）也可以按预期工作。

所以我会在另一个方向搜索。以下部分

```
txtFtpUser.setText(username);
panel_1.remove(txtFtpPassword);
txtFtpPassword = new JPasswordField(password);
txtFtpPassword.setBounds(10, 113, 206, 23);
panel_1.add(txtFtpPassword); 
```

让我想知道您是否`JPasswordField`在 UI 中看到了您的新功能。当您从 a 添加/删除组件时，`Container`您需要使布局无效，如[`Container#add`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)and[`Container#remove`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#remove%28java.awt.Component%29)方法中所述。

注意：将密码作为`String`. 但是根据您的评论，您已经意识到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:38:40.310

我在这里发现错误是：

```
if (JOptionPane.showOptionDialog(null, obj, "Passwort", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, stringArray, obj) == JOptionPane.WARNING_MESSAGE)
{
password = new String(passwordField.getPassword());
} 
```

它检查它是一个警告消息，但它是一个 YES_OPTION :) 谢谢你的所有帮助。*

# html - 使用 UTF-8 时是否应该对 HTML 特殊字符进行编码？

> ID：13306693
> 
> 赞同：2
> 
> 时间：2012-11-09T10:52:15.360
> 
> 标签：html, unicode, utf-8, character-encoding

我最近听说在网站上使用 UTF-8（或 Unicode）字符集时不再需要对 HTML 特殊字符进行编码。

我的意思是非 ASCII 字符，例如 « («)、- (—) 等。HTML 中保留的字符当然应该转义（>、“等等）。

如果是真的，准备在网络上发布的大文本将比以前容易得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:21:09.257

在浏览器首先支持 UTF-8 期间，在使用 UTF-8 时，从未要求“编码”字符（使用类似字符引用`&#8212;`或实体引用等对它们进行转义）。`&mdash;`唯一的例外是小于字符“<” 和符号“&”，需要独立于编码进行转义。（好吧，在与分隔符具有相同标记的带引号的属性值中不能使用引号，但这通常可以避免。）

您仍然*可以*使用转义符号。如果您希望您或其他人必须编辑 HTML 文档以使创作工具没有适当的 UTF-8 支持，您可能会这样做。您也可能会这样做，因为您正在输入文本并且没有方便的工具来插入所有字符。但这些都是例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:54:26.153

这是真的。

自从 UTF-8 接管以来，使用 HTML 实体（特殊字符除外）已经过时了。

# php - 在另一个 PHP 文件中包含一个 PHP 文件

> ID：13306698
> 
> 赞同：0
> 
> 时间：2012-11-09T10:52:29.790
> 
> 标签：php

> **可能重复：**
> [使用 php 包括来自另一台服务器的 php 文件](https://stackoverflow.com/questions/2752783/including-php-file-from-another-server-with-php)

每个 php 程序员都知道 php 的 include() 函数用于将 php 文件包含在另一个 php 文件中，但我想知道是否可以包含驻留在不同服务器中的 php 文件。假设我想在 b.php 中包含 a.php 现在假设 a.php 和 b.php 位于不同的服务器中，在这种情况下是否可以在 b.php 中包含 a.php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:06:42.167

**我认为你从错误的角度来看它**。大多数时候，您不想合并来自不同服务器的 PHP 文件——为此，您有**其他技术**可以做到这一点。

如果您想包含来自另一台服务器的文件并获取源代码，您需要获得权限才能这样做，假设您拥有权限后，您只需将源代码复制到您的服务器即可。

但是，如果您想在不是方法的文件之间进行通信。您可以使用*AJAX*、*JSON*和*GET 参数*进行通信（可能还有许多其他方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:55:32.357

从[手册](http://php.net/manual/en/function.include.php)：

> **如果在 PHP 中启用了“ [URL fopen 包装器](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)**” （它们在默认配置中），**您可以使用 URL 指定要包含的文件**（通过 HTTP 或其他支持的包装器 - 请参阅[支持的协议和包装](http://www.php.net/manual/en/wrappers.php)器以获取协议列表）而不是本地路径名。如果目标服务器将目标文件解释为 PHP 代码，则可以使用与 HTTP GET 一起使用的 URL 请求字符串将变量传递给包含的文件。**严格来说，这与包含文件并使其继承父文件的变量范围不同。该脚本实际上正在远程服务器上运行，然后将结果包含到本地脚本中。**

凭借 60.2k 代表赋予我的权力，我建议你不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:55:19.473

是的，这是可能的，但可能是一个错误的决定？如果 b.php 发生任何事情，a.php 的服务器也会受到损害。file_get_contents 和 exec() 将允许您这样做。它运行重要还是只需要输出？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:59:12.637

正如其他人所说，不，不可能。（否则您将能够阅读任何人的服务器端代码）

在每个视图中，使用 SOAP 或 REST 之类的东西与其他机器通信会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T11:03:13.110

使用位于单独服务器上的 PHP 文件会给您带来很多问题。如果您的服务器可以访问 PHP 文件的代码，那么任何其他希望浏览该 URL 的人也可以访问。

服务器可以看到的任何外部的东西，任何人都可以看到。

# python - 我如何在python中计算大数

> ID：13306706
> 
> 赞同：-4
> 
> 时间：2012-11-09T10:52:53.690
> 
> 标签：python

我正在寻找在 python 上计算大数字，但它不能。

像这样：

9999999999999999999999999999999999**9999999999999999999999999999999999999999999999999999

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T11:17:34.770

Python 支持长整数，因此您可以只打印表达式。它可能不如 GMP 或其他库高效，但您想要做的问题是无法计算该值：

`(10**35 - 1) ** (10**52 - 1)`大约是`10 ** (35 * 10**52)`其中包含大约`10**52`数字。

让我们考虑一下我们可以假设制造多大的存储芯片。月球的质量约为`7.34767309 * 10^22`公斤，电子的质量约为`9.10938188 * 10^(-31)`公斤。让我们假设我们可以使用电子来保存十进制数字。这意味着使用月球作为记忆我们可以使用`8.066050130286116 * 10^52`电子。

这是什么意思？如果你有一个和月球一样大的超级 RAM 芯片，你就可以计算出这个数字。如果你明白了，对你有好处，否则如果你是凡人，你根本无法指望有足够的记忆。

该`DecInt`模块可以帮助您处理 100k 到数百万位的数字，但除此之外，您还需要特定的硬件和更大的数字（如您展示的示例）根本不可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:07:22.497

您可以尝试使用`DecInt`模块。
可以在[这里找到](http://home.comcast.net/~casevh/)

```
import DecInt
bignum = DecInt.DecInt(9999999999999999) ** 999999999999999999999
print str(bignum) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:18:34.860

为什么不将数字作为字符串并创建与人的手类似的功能，与字符串相乘。

假设您制作了 2 个字符串“99876”和“123”

并制作以 2 个参数为参数的 str_multiply 函数

获取后者的字符串长度。“123”由3个字符组成所以它是3（忽略空字符）这里是伪代码

```
len_2 = string_len(latter);
len_1 = string_len(former);
flag = 0;
result_string = "";
for(i=len_2-1;i>=0;i--)
{
    for(k=len_1;k>=0;k--)
    {
        a = alphabet_to_integer(latter[i]);
        b = alphabet_to_integer(former[k]);
        c = a*b;
        c = c * 10 + flag;

        flag = c/10;
        ch = integer_to_alphabet(c%10);
        result_string = concat(ch,result_string);
    }
} 
```

如果您想要的不仅仅是 2 个数字，而是 10 个数字（或更多），您可以一次又一次地调用 str_multiply 函数。

这是我第一次回答别人的问题。所以我希望这比平时更有帮助，谢谢！

# bash - 在 vim 脚本中使用 bash 计算器 - 奇怪的行为

> ID：13306707
> 
> 赞同：2
> 
> 时间：2012-11-09T10:52:54.810
> 
> 标签：bash, vim, cygwin, bc

有谁知道为什么这适用于 bash 计算器（`bc`）`vim`：

```
echo system ("echo 3+5 \| dos2unix \| bc -l") ---> output: 8   
echo system ("echo 3/5 \| dos2unix \| bc -l") ---> output: .600000000000000  
echo system ("echo 3*5 \| dos2unix \| bc -l") ---> output: 15 
```

但这不是：

```
echo system ("echo 2^5 \| dos2unix \| bc -l") ---> output: 25  
echo system ("echo 3^5 \| dos2unix \| bc -l") ---> output: 35 
```

这是在 Windows 的 cygwin 下使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:08:08.813

期权的价值是`&shell`多少？一定是`/path/to/cygwin/bash`，不是以 . 结尾的东西`cmd.exe`。问题是那`^`是 windows 中的转义字符`cmd.exe`，所以`echo 2^5`在某种程度上相当于`echo 2\5`解析成`echo 25`.

如果是`cmd.exe`添加一行

```
set shell=/path/to/cygwin/bash 
```

到你的 vimrc。

请注意，虽然`echo 2^^^^5`解决 to`echo 2^5`有点奇怪（很明显`cmd.exe`它是`echo 2^^5`），但我在一段时间前看到了关于 vim-dev 关于转义问题的很长时间的讨论`cmd.exe`，所以它可能是其中之一。不应该在最近的 vim 上发生（或者它是一个错误）。

# c# - 通过 C# 将 XPath 作为参数传递给 XSLT，

> ID：13306709
> 
> 赞同：1
> 
> 时间：2012-11-09T10:53:09.803
> 
> 标签：c#, xslt, xpath, xslt-1.0

不太确定这种方法的重要性，但我只是想尝试一下。不是直接在 C# 中使用 XPath 来使用 XML DOM 和读取值，是否可以将字符串作为参数传递给 XSLT 并在 XSLT 中将其用作 XPath？

C＃：

```
.........
......

XsltArgumentList xslArg = new XsltArgumentList();
xslArg.AddParam("XPathTest", "", SomedynamicString);
XsltSettings xslsettings = new XsltSettings(false, true);
xslTransform.Load(string_xslInput, xslsettings, new XmlUrlResolver());
xslTransform.Transform(xpathXmlOrig, xslArg, objMemoryStream);
.........
...... 
```

XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:crnObj="urn:UTCCalc">
  <xsl:output method="xml" indent="no"/>
  <xsl:param name="XPathTest"/>
.........
.......

  <xsl:template match=??$XPathTest$$??> How can the param be used?
     <!--code goes here-->
  </xsl:template>
.........
....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:02:53.980

> Instead of using XML DOM and reading Value by using XPath directly in C#, Is it possible to pass string as a param to XSLT and in XSLT use it as XPath?

**Not in XSLT 1.0 or in XSLT 2.0.**

In XSLT 3.0 (still a working draft) one may use the **[`xsl:evaluate`](http://www.w3.org/TR/xslt-30/#element-evaluate)** instruction.

It may be interesting to you to see how the **[XPath Visualizer](http://www.huttar.net/dimitre/XPV/TopXML-XPV.html)** does this: the XPath expression is used to dynamically modify the value of a specific `xsl:variable` -- even before the transformation is invoked.

Disclaimer:

The XPath Visualizer is not for sale and/or profit -- I created it 12 years ago for fun and solely with educational purposes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:37:50.517

如果您的 XSLT 处理器实现 xx:evaluate() 扩展来评估作为字符串提供的 XPath 表达式，它将起作用。这是一个很常见的扩展，但它在 XSLT 1.0 或 2.0 中都不是标准的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:48:38.590

.NET 转换引擎支持扩展 - 您可以通过以下方式做到这一点：

*   使用命名空间字符串和类的实例创建`XsltArgumentList`和调用；`AddExtensionObject`
*   使用在样式表中引用相同的命名空间字符串`xmlns:prefix=`
*   通过简单地在样式表中声明它们的（限定）名称来调用扩展上的方法，即`value-of select='prefix:MyMethod'`

# jquery - 任何基于语言环境的用于数字转换的 jquery 插件

> ID：13306711
> 
> 赞同：0
> 
> 时间：2012-11-09T10:53:16.293
> 
> 标签：jquery

我有一个用例，其中具有不同语言环境的用户使用一些负责某些计算的页面。但是，对于计算，我使用了 javascript(parseFloat)，当用户访问他的语言环境被应用的页面时，它适用于美国语言环境，并且计算部分显示奇怪的结果。

例如，美国的数字“1,250,500.75”在不同国家/地区的写法会有所不同：德国的“1.250.500,75”、法国的“1 250 500,75”和瑞士的“1'250'500.75” ，以及日本的“125,0500.75”。

Any any 建议对此/任何 jquery 插件的解决方法，该插件根据语言环境转换 NUMBER 并执行计算。

提前致谢 ！！！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:10:51.313

也许这对您来说是一个很好的解决方案：[数字格式化程序](http://code.google.com/p/jquery-numberformatter/)

# php - PHP Session ID 随每个请求而改变

> ID：13306713
> 
> 赞同：10
> 
> 时间：2012-11-09T10:53:20.050
> 
> 标签：php, session

我刚刚将我的应用程序从本地 WAMP 迁移到实际的在线服务器。这导致了会话 ID 未按其显示的样子保存的问题。

*   我已经检查了 session_start 之前输出的不需要的字符
*   我似乎找不到任何会话文件保存在我的 /tmp

这些是我的会话设置：

```
session.auto_start  Off Off
session.bug_compat_42   Off Off
session.bug_compat_warn On  On
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  1000    1000
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 5   5
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /tmp    /tmp
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0 
```

*   在线服务器正在运行：PHP 版本 5.3.9，而 WAMP 正在运行：PHP 版本 5.3.5。
*   通过查看发送的标题和每个页面加载中的响应，我得到以下信息，set-cookie 发送适当的会话 id，收到的响应发送一个新的响应，就好像没有任何请求一样。
*   我在预览 URL 上运行该站点（启用 SSL）。我不知道这有什么关系，我的域还没有注册。
*   错误代码很简单：

    `$sId = session_id();`

    `if ($sId == '') { session_start(); }`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-03-17T13:01:08.317

我刚刚解决了完全相同的问题。

事实证明，cookie PHPSESSID（记录会话）已发送，但被服务器忽略，因此会话没有被维护，并且每次页面重新加载或更改时服务器都会重新启动会话。

问题是我的 wp-config.php 中有这一行：

```
@ini_set('session.cookie_secure','On'); 
```

这意味着如果连接不安全，每个 cookie 都将被忽略，因此服务器 PHPSESSID cookie 和会话被重新启动。

检查您的**wp-config.php**或您的**init.php**。是cookies的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T12:01:07.820

You must have to write session_start(); before accessing any session variables, without it you will not able to access the session variables.

Try to put session_start() on the very first line of the file.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-03T15:53:32.863

仅使用字母数字字符作为会话 ID。我在使用“。”时遇到了这个问题。作为会话 ID 的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T10:56:54.347

`session_start`应该是文件中的第一件事，之后您可以获取会话 ID：

```
session_start();
$sId = session_id(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-12T06:15:22.210

**问题很老，最初的问题已经确定。然而，之前的答案最终在这种情况下并没有帮助。因此，如果有人遇到与我类似的问题，这是另一种方法：**

会话使用 cookie 进行管理，通常称为`PHPSESSID`. 如果该 cookie 未正确声明，因此无法包含在用户的后续请求中，则每个请求都会启动另一个会话，导致情况至少与您的情况相似。

我试图实现一个在一些反向代理后面运行的应用程序，*将公共 URL 映射*到多个应用程序，例如

```
http://public.example.com/foo/bar/script.php 
```

被委托给反向代理后面的某个服务器，提供为

```
http://foo.example.com/bar/script.php 
```

对于在`foo.example.com`带有路径前缀的上下文中运行的 PHP，`/bar`而不是`/foo/bar`设置会话 cookie 的参数，`PHPSESSID`在传递给未调整的客户时可能会导致问题。至少在我的情况下，这种观察是正确的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-28T10:33:39.713

这可能是由某些程序（例如dreamweaver、notepad）在标记之前注入的三个字符（BOM（[字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark)`<?php`））引起的，因此实际上没有初始化会话。

如果您已`error_reporting`启用，您将看到`headers already sent`..

使用十六进制编辑器检查您的文件，看看您的编辑器是否注入了任何字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T11:51:46.613

您应该首先启动会话以使用 session_* 函数。所以你需要做的第一件事是：

```
session_start(); 
```

然后你可以像这样询问会话ID

```
$id = session_id(); 
```

请注意，不建议将会话保存在对公众可用的公用文件夹中，因为访问者可以找到保存会话的文件夹并列出所有会话。然后他们可以将会话 cookie 注入他们的浏览器并控制其他访问者的用户帐户。如果您确实需要这样做，请限制对您的 /tmp 文件夹的访问。例如，使用此代码将 .htaccess 文件放在该文件夹中

```
Deny from all 
```

或者找到任何其他方法来禁止用户浏览您的 /tmp 文件夹，因为这可能是安全问题。

如果您想在每个请求上更改会话 ID，出于安全原因，您可以使用[session_regenerate_id 函数](http://php.net/manual/en/function.session-regenerate-id.php)

你会做这样的事情：

```
session_start();
session_regenerate_id();
// Do other things you want with sessions. 
```

这样，即使有人窃取了您的会话 cookie，会话 ID 也会在每次请求时更改。这可能是你的问题。PHP 有一种方法可以在每个请求上重新生成新的会话 id，所以这可能是困扰您的事情。

至于设置 php.ini 指令，您应该检查您的托管服务提供商是否允许您更改您尝试更改的 .ini 指令。是否可以更改 .ini 指令取决于服务器设置。并且会话的行为方式可能因托管而异，具体取决于它们的服务器设置方式。大多数事情都可以使用 php 函数或使用[ini_set](http://php.net/manual/en/function.ini-set.php)与此指令列表[php.ini 指令进行更改](http://www.php.net/manual/en/ini.list.php)

# c# - 通过 C# 连接到 Lotus Notes

> ID：13306729
> 
> 赞同：1
> 
> 时间：2012-11-09T10:54:28.410
> 
> 标签：c#, lotus-notes

我正在尝试通过 C# 连接到 Lotus Notes。为此我使用下面的代码

NotesSession ns = new Domino.NotesSession(); ns.初始化（）；

我收到“系统找不到指定的文件。” 初始化会话时出错，如果我没有在我的机器上打开 Lotus Notes 客户端。

但是，如果 Lotus Notes 客户端打开，我不会收到此错误。

是否必须打开 lotus notes 客户端才能连接到 lotus notes 而不会出现此错误。我错过了什么吗。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:17:41.130

我认为您可以将路径名传递给 notes.ini 文件。试试看。确保在 notes.ini 变量 KeyFileName 中指定了有效的 ID 文件名。例如。KeyFileName=yournotesid.id ID 文件应该在notes 数据目录中。notes.ini 中指定的 id 文件的路径是相对于数据目录的。

# documentation - phpDocumentor - 如何记录不同的作者更新代码和日期？

> ID：13306730
> 
> 赞同：1
> 
> 时间：2012-11-09T10:54:28.613
> 
> 标签：documentation, phpdoc, code-documentation

假设一个类的原始文档如下所示：

```
/**
 * My custom class
 *
 * This class helps you do stuff.  It's really great.
 *
 * @author  David Smith
 * @version 1.0
 */ 
```

1.  如果我来修改 50% 的代码，我如何证明我做出了重大贡献？

2.  添加日期的最佳方法是什么？例如，上次修改代码的时间、我进行更新的时间或版本的更新时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:57:47.693

我在这些年来工作过的公司中看到的一种方法就是这样做

```
 /**
 * My custom class
 *
 * This class helps you do stuff.  It's really great.
 *
 * @author  David Smith
 * @version 1.0
 *
 * @modifier Rahul Parkar
 * @modifiedDate 09/11/2012
 */ 
```

另外，我看到他们使用 2 种方法来记录更改，一种是使用 Git 之类的东西，其中每个提交都有一个提交消息，另一种是使用另一个 Doc 标签来记录更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:59:16.693

我知道我并没有真正回答你的问题，但我想知道你为什么要使用@author。

要跟踪代码更改（谁创建了文件？谁更改了它？），请使用您的版本控制系统。毕竟，这就是它的用途:)

# javascript - JQGrid 只读和编辑选项

> ID：13306739
> 
> 赞同：0
> 
> 时间：2012-11-09T10:55:16.303
> 
> 标签：javascript, jquery, jqgrid

谁能告诉我如何使一个特定列的内联编辑为假，但是当您编辑特定行时，该列是可编辑的，例如 -

`{name:'product_image', index:'ProductId', width:25, align:'right', editable:true, edittype:'file'}`,

这完美地工作，我可以通过选择行并单击编辑按钮来编辑它<然后我将看到编辑对话框，然后我可以更改所述列的值。我想让网格视图中的列只读但是，我发现了以下内容 -

```
{name:'product_image', index:'ProductId', width:25, align:'right', editable:false, edittype:'file',editoptions:{readonly: false}}, 
```

但是，这只会使该列只读，并且在编辑模式下我无法更改该值。

```
$("#list").jqGrid({
    url:'products.php?storeId=<?php echo $_SESSION["valid_store"]; ?>',
    datatype: 'xml',
    mtype: 'GET',
    colNames:['Product Id','Product Description','Department','Category','Price','Sale Price','Quantity','Extended Description','Web Item','Image'],
    colModel :[ 
      {name:'ProductId', index:'ProductId', width:20}, 
      {name:'product_name', index:'product_name', width:50, editable:true, edittype:'text', search:true, stype:'text'},
      {name:'DepartmentName', index:'DepartmentName', width:40,sortable: false, editable: true, edittype: "select"},
      {name:'CategoryName', index:'CategoryName', width:40,sortable:false, editable:true, edittype:'select'}, 
      {name:'price', index:'price', width:15, align:'right', editable:true, edittype:'text'}, 
      {name:'sale_price', index:'sale_price', width:15, align:'right', editable:true, edittype:'text'}, 
      {name:'product_qty', index:'product_qty', width:10, align:'right', editable:<?php if($edit_qty == 1){echo "true";}else{echo "false";} ?>, edittype:'text'}, 
      {name:'product_description', index:'product_description', width:100, sortable:false, editable:true, edittype:'text'},
      {name:'web_item', index:'web_item', width:15,sortable:false, editable:true, edittype:'select',editoptions:{value:{1:'True',0:'False'}}}, 
      {name:'product_image', index:'ProductId', width:25, align:'right', edittype:'file', editable: false},
    ],
    loadComplete:function(){
        $("#list").setColProp('DepartmentName', { editoptions: { value: departments} });
        $("#list").setColProp('CategoryName', { editoptions: { value: categories} });
    },
    pager: '#pager',
    rowNum:40,
    rowList:[10,20,30,40,50,60,70,80,90,100],
    sortname: 'ProductId',
    sortorder: 'desc',
    viewrecords: true,
    gridview: true,
    caption: 'Products',
    autowidth: true,
    height: tableHeight,
    cellEdit: true,
    loadtext: 'Loading Products...',
    cellurl: 'edit_product.php?storeId=<?php echo $_SESSION["valid_store"]; ?>',
    editurl: 'edit_product.php?storeId=<?php echo $_SESSION["valid_store"]; ?>',
  }).navGrid('#pager',
    {
        del: false,
        add: <?php if($add_products == 1){echo "true";}else{echo "false";}?>,
        edit: true,
        search: true
    },
    {jqModal:true,closeAfterEdit: false,recreateForm:true,onInitializeForm : function(formid){
        $(formid).attr('method','POST');
        $(formid).attr('action','');
        $(formid).attr('enctype','multipart/form-data');
        },
        beforeShowForm:function(form){
            $("#product_image", form).attr("disabled", "false");
        }, 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:05:32.263

如果我目前了解您的问题，您可以在回调内的编辑表单中设置字段`readonly`属性。有关相应的代码示例，请参见[答案](https://stackoverflow.com/a/3952654/315935)或[此答案。](https://stackoverflow.com/a/3405961/315935)`$("#product_image")``beforeShowForm`

**更新**：从您发布的代码中可以看到您使用*单元格编辑*（`cellEdit: true`）。不支持将[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing)与jqGrid 的其他编辑模式（[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)或[内联编辑）一起使用。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)

可能`cellEdit: true`是偶然使用的？在这种情况下，您应该删除解决问题的选项。

如果您确实需要使用单元格编辑，您可以将 'not-editable-cell' 类添加到 'product_image' 列。您可以`classes: "not-editable-cell"`在[colModel](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)中使用，也可以根据需要动态制作（请参阅[答案](https://stackoverflow.com/a/4725196/315935)中[的演示](http://www.ok-soft-gmbh.com/jqGrid/NonEditableCells.htm)）。该类将仅用于*单元格编辑*，将被表单编辑忽略。

 *如果您确实需要同时使用单元格编辑和表单编辑，则必须在开始表单编辑*之前*`restoreCell`调用or `saveCell`（参见[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing#methods)） （例如在[beforeInitData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)中）。方法的所有参数都可以保存在最后调用的[beforeEditCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing#events)回调中。

 *`index:'ProductId'`您的代码的最后一句话：您使用**两**列似乎很奇怪：`ProductId`和`product_image`. 可能是打字错误吗？**

# java - 如何推断此泛型类型的上限？

> ID：13306744
> 
> 赞同：0
> 
> 时间：2012-11-09T10:55:29.640
> 
> 标签：java, generics

我有一个界面如下：

```
public interface ImportedEntity<T extends ImportedEntity<T, E>, E extends Enum<E>> 
```

我想要一个具有该接口*上限*的类：

```
Class<ImportedEntity<?, ?>> c = ImportedEntity.class;
Class<ImportedEntity<?, ?>> c = ImportedEntitySubclass.class; 
```

**由于通配符**，这些显然无法编译，但就我应该放什么而不是通配符以使其编译而言，我的头快要爆炸了。

最糟糕的是我可以使用原始类型，但我觉得如果我这样做我会在某个地方出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:12:30.023

您可以像这样在右侧添加未经检查的演员表：

```
Class<ImportedEntity<?, ?>> c = (Class<ImportedEntity<?, ?>>) ImportedEntity.class;
Class<ImportedEntity<?, ?>> c = (Class<ImportedEntity<?, ?>>) ImportedEntitySubclass.class; 
```

恐怕您将不得不在*某个地方*`class`进行未经检查的演员表并接受警告，因为该属性无法保存类型信息。

# arrays - 检查变量是否包含在数组中

> ID：13306747
> 
> 赞同：0
> 
> 时间：2012-11-09T10:55:45.763
> 
> 标签：arrays, macos, applescript

我有一个包含一系列 ID 的数组。在我得到另一个数组后，我想检查它的每个单个值是否包含在主 ID 数组中。如果甚至有一个新的 ID 将变量设置为 TRUE（我处于重复循环中：“重复直到控制器为 TRUE”）。

我怎样才能做到这一点？我是 Applescript 的新手，我不知道如何进行这些批量检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:02:41.427

你可以尝试这样的事情：

```
set listA to {"A1", "A2", "A3"}
set listB to {"B1", "B2", "A3"}

set match to false
repeat with anItem in listB
    if anItem is in listA then
        set match to true
        exit repeat
    end if
end repeat

return match 
```

# performance - Delphi 中的文本文件写入性能

> ID：13306752
> 
> 赞同：6
> 
> 时间：2012-11-09T10:56:15.863
> 
> 标签：performance, delphi, file-io, delphi-xe2

我的程序正在处理传入的字符串（来自 Telnet、HTTP 等），我必须使用 Delphi XE2 将这些字符串写入文本文件以进行日志记录。

有时程序可能会崩溃，我需要确保剩余的字符串不会丢失，所以我打开/关闭每个传入字符串的文件，我遇到了一些性能问题。例如，下面的代码需要 8 秒才能完成。

我的代码包含在下面，有什么方法可以提高性能吗？

（对于下面的测试，只需创建一个带有 a `Button : Button1`、带有`OnClick`事件和 a的表单`Label : lbl1`）。

```
Procedure AddToFile(Source: string; FileName :String);
var
  FText : Text;
  TmpBuf: array[word] of byte;
Begin
  {$I-}
  AssignFile(FText, FileName);
  Append(FText);
  SetTextBuf(FText, TmpBuf);
  Writeln(FText, Source);
  CloseFile(FText);
  {$I+}
end;

procedure initF(FileName : string);
Var  FText : text;
begin
  {$I-}
  if FileExists(FileName) then  DeleteFile(FileName);
  AssignFile(FText, FileName);
  ReWrite(FText);
  CloseFile(FText);
  {$I+}
end;

procedure TForm1.Button1Click(Sender: TObject);
var tTime : TDateTime;
    iBcl : Integer;
    FileName : string;
begin
  FileName := 'c:\Test.txt';
  lbl1.Caption := 'Go->' + FileName; lbl1.Refresh;
  initF(FileName);
  tTime := Now;
  For iBcl := 0 to 2000 do
    AddToFile(IntToStr(ibcl) + '   ' +  'lkjlkjlkjlkjlkjlkjlkj' , FileName);
  lbl1.Caption  :=  FormatDateTime('sss:zzz',Now-tTime);
end; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T12:57:07.190

使用 a [`TStreamWriter`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStreamWriter)，它是自动缓冲的，并且可以处理将其缓冲区自动刷新到`TFileStream`。如果需要，它还允许您选择附加到现有文件，设置字符编码以支持 Unicode，并允许您在其各种重载[`Create`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStreamWriter.Create)构造函数中设置不同的缓冲区大小（默认为 1024 字节或 1K）。

（请注意，刷新`TStreamWriter`仅将 的内容写入`TStreamBuffer`；`TFileStream`它不会刷新 OS 文件系统缓冲区，因此在`TFileStream`释放 之前，该文件实际上并未写入磁盘。）

不要每次都创建 StreamWriter；只需创建并打开一次，最后关闭它：

```
function InitLog(const FileName: string): TStreamWriter;
begin
  Result := TStreamWriter.Create(FileName, True);
  Result.AutoFlush := True;         // Flush automatically after write
  Result.NewLine := sLineBreak;     // Use system line breaks
end;

procedure CloseLog(const StreamWriter: TStreamWriter);
begin
  StreamWriter.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
var 
  tTime : TDateTime;
  iBcl : Integer;
  LogSW: TStreamWriter;
  FileName: TFileName;
begin
  FileName := 'c:\Test.txt';
  LogSW := InitLog(FileName);
  try
    lbl1.Caption := 'Go->' + FileName; 
    lbl1.Refresh;
    tTime := Now;

    For iBcl := 0 to 2000 do
      LogSW.WriteLine(IntToStr(ibcl) + '   ' +  'lkjlkjlkjlkjlkjlkjlkj');

    lbl1.Caption  :=  FormatDateTime('sss:zzz',Now - tTime);
  finally
    CloseLog(LogSW);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:33:53.447

除了重新打开文件来将关键数据保存在磁盘上，您还可以使用[FlushFileBuffers](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364439%28v=vs.85%29.aspx)函数或通过调用带有and标志的[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)函数来打开文件以进行无缓冲 I/O （参见第一个链接中的部分）。`FILE_FLAG_NO_BUFFERING``FILE_FLAG_WRITE_THROUGH``Remarks`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T12:18:58.027

您的问题似乎是您需要在每次写入后刷新缓存，以便在应用程序崩溃时不会丢失数据。

尽管我确信这里的其他答案非常好，但您无需对代码进行如此广泛的更改。您需要做的就是 `Flush(FText)` 在每次写入后调用。

```
const
  // 10 million tests
  NumberOfTests = 1000000;

  // Open and close with each write:        19.250 seconds

  // Open once, and flush after each write:  5.686 seconds

  // Open once, don't flush                  0.439 seconds

var
  FText : Text;
  TmpBuf: array[word] of byte;

procedure initF(FileName : string);
begin
  {$I-}
  if FileExists(FileName) then  DeleteFile(FileName);
  AssignFile(FText, FileName);
  ReWrite(FText);
  SetTextBuf(FText, TmpBuf);
  {$I+}
end;

procedure CloseTheFile;
begin
  CloseFile(FText);
end;

Procedure AddToFile(Source: string);
Begin
  {$I-}
  Writeln(FText, Source);

  // flush the cache after each write so that data will be written
  // even if program crashes.
  flush ( fText );              // <<<====   Flush the Cache after each write

  {$I+}
end;

procedure TForm1.Button1Click(Sender: TObject);
var tTime : TDateTime;
    iBcl : Integer;
    FileName : string;
begin
  FileName := 'c:\Test.txt';
  lbl1.Caption := 'Go->' + FileName; lbl1.Refresh;
  initF(FileName);

  // put file close in a try/finally block to ensure file is closed
  // even if an exception is raised.
  try

    tTime := Now;
    For iBcl := 0 to NumberOfTests-1 do
      AddToFile(IntToStr(ibcl) + '   ' +  'lkjlkjlkjlkjlkjlkjlkj');
    lbl1.Caption  :=  FormatDateTime('sss:zzz',Now-tTime);

  finally
    CloseTheFile;
  end;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-27T19:32:41.167

出于某种原因，从一个文本文件中简单地读取并写入文本输出文件我发现 TextFile WriteLn 仍然是最快的方法。

```
 AssignFile(t,'c:\a\in.csv');
  Reset(t);
  AssignFile(outt,'c:\a\out.csv');
  ReWrite(outt);
  while not eof(t) do
  begin
    Readln(t,x);
    WriteLn(outt, x);   //27 sec, using LogSW.WriteLine(outx) takes 54 sec 
```

// 使用上述代码，半 Gb 文件耗时 27 秒，使用 Martijn 提供的示例中的 TStreamWriter 耗时 54 秒：o

# object - 检索对对象执行的动作的句子

> ID：13306755
> 
> 赞同：1
> 
> 时间：2012-11-09T10:56:25.007
> 
> 标签：object, action, facebook-opengraph

我需要显示给定应用程序的所有可用自定义故事类型的列表。我正在使用以下调用检索应用程序、自定义对象和自定义操作：act_AccountID/connectionobjects?access_token= *_*

```
{
  "id": "6350929420",
  "name": "SMP",  
  "url": "https://apps.facebook.com/smplatform/",
  "type": 2,
  "og_namespace": "smplatform",
  "og_actions": [
    {
      "name": "apps.uses",
      "display_name": "Use",
      "properties": [
        {
          "name": "start_time",
          "type": "date_time"
        },
        {
          "name": "end_time",
          "type": "date_time"
        },
        ...
        {
          "name": "place",
          "type": "place"
        }
      ],
      "connected_objects": [
        "website"
      ]
    },      
    {
      "name": "smplatform:cook",
      "display_name": "Cook",
      "properties": [
        {
          "name": "start_time",
          "type": "date_time"
        },
        ...
        {
          "name": "explicitly_shared",
          "type": "boolean"
        }
      ],
      "connected_objects": [
        "recipe"
      ]
    }
  ],
  "og_objects": [
    {
      "name": "website",
      "display_name": "Link",
      "properties": [
        {
          "name": "url",
          "type": "url"
        },
        ...
        {
          "name": "see_also",
          "type": "url"
        }
      ]
    },
    {
      "name": "recipe",
      "display_name": "challenge",
      "properties": [
        {
          "name": "type",
          "type": "string"
        },
        {
          "name": "determiner",
          "type": "enum"
        }
        ...
      ]
    }
  ],
  "supported_platforms": [
    1,
    2
  ],
  "tabs": [
  ],
  "picture": "https://__"
},
... 
```

（https://developers.facebook.com/docs/reference/ads-api/connectionobjects/）

现在，我想检索“使用链接”和“烹饪挑战”这两个句子。我知道这些句子可以在 App Open Graph 设置中自定义，因此我不能自己构建句子。

有没有办法检索这些句子？

谢谢。

# css - 使用基于百分比的高度和水平滚动在网站上的 CSS 绝对定位

> ID：13306763
> 
> 赞同：0
> 
> 时间：2012-11-09T10:56:50.763
> 
> 标签：css, positioning, horizontal-scrolling

有没有办法使用完整文档宽度的百分比仅使用 CSS 来定位我的元素，而不仅仅是浏览器宽度？

我正在创建一个水平滚动网站，其中所有元素的高度和顶部的对齐方式都是使用百分比设置的——这是为了适应所有浏览器大小并确保所有元素都保持比例。

如果我尝试使用类似的方式更改页面上元素的左（或右）对齐方式；

```
#my_element {
    position: absolute;
    top: 5%;
    width: 34%
    left: 10%;
} 
```

这将是浏览器窗口宽度的 10%，而不是 body 或 html 元素的实际宽度——这在标准垂直滚动网站中是有意义的，但对我没有帮助。

我目前的解决方法是使用 JavaScript 定位左侧；

```
$('#my_element').css('left', $(document).width() / 100 * 10) //Position to 10% of the page. 
```

这可行，但是当 JavaScript 加载速度不够快或我想使用 CSS 动画为各种元素设置动画时会导致一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:13:42.497

当您`width`使用百分比设置元素时，它会根据该元素的父元素进行测量。所以在下面，`body`元素是浏览器的 100% 宽度和元素`div.box`的 50% 宽度`body`。

```
<html>
<head>
  <style>
    div.box { width: 50% }
  </style>
</head>
<body>
  <div class="box">
</body>
</html> 
```

您实际上可以更改`body`和`html`元素的宽度。

因此，例如，如果您有四个“幻灯片”或“面板”，您希望成为浏览器的 100% 宽度，您可以给`html`元素 400% 的宽度，即`body`100% 的宽度（仍然是浏览器的 400%，因为它parent 是`html`元素），每张幻灯片的宽度为 25%。

[这是一个例子。](http://jsfiddle.net/flackend/cXW5w/)

我看到的唯一问题是，如果您说三张幻灯片，您的`html`元素将是 300%，每张幻灯片 33.33333...%。所以你不会有一个很好的干净的号码文件。

有趣的事实是，您也可以使用任何元素，例如`<head>`或`<script>`。即，您可以`<script>`像任何其他元素一样显示 a 的内容，方法是将其默认值更改`display: none`为`inline`or `block`... [fiddle](http://jsfiddle.net/flackend/w2pnL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:58:14.500

这确实是可能的，要跨浏览器兼容，您还需要在 html 和 body 标签中设置宽度和高度。

[样本](http://jsfiddle.net/Abyssoft/FAHSj/)

```
html {
    width:100.01%;
    height:100.01%;
}
body {
    width:auto;
    height:auto;
}
div#normaldiv {
    border: 1px blue solid;
}
div#absolutediv {
    border: 1px red solid;
    position: absolute;
    top: 5%;
    left: 10%;
    width: 34%;
    height: 20%;
}
​ 
```

该示例显示了这一点，其中 iframe 定义了窗口。使用 .01 到正常 100% 可以处理大多数像素问题。通过设置 html 和 body 的值，您还可以处理 IE6 中存在的布局问题。

# .htaccess - 重定向和隐藏部分 url

> ID：13306774
> 
> 赞同：0
> 
> 时间：2012-11-09T10:57:32.053
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

我需要一个这样的网址：

```
d-asdas.local/sometext 
```

如果之后有一些文本`local/`应该重定向到

```
d-asdas.local/homepage.php/sometext 
```

最后一件事，上面的 url 应该隐藏`homepage.php`，所以在 url 栏中可见的是这个掩码。

```
d-asdas.local/sometext 
```

这可以在`.htaccess`?

# visual-studio - 在我的“浏览方式...”VS2012 中不再有“Google Chrome”条目

> ID：13306778
> 
> 赞同：1
> 
> 时间：2012-11-09T10:57:41.260
> 
> 标签：visual-studio, visual-studio-2012

在我的 VS2012 中，我的工具栏中不再有 Google Chrome 的“浏览方式...”功能条目。我昨天注意到它，我知道它在过去工作得很好。我的第二台 Win8 电脑也有同样的问题。

![在此处输入图像描述](../Images/4d834c7668872c257eca09e243b98e27.png)

在我的带有 VS2012 的 Win7 上，我没有问题：“谷歌浏览器”条目存在并且正在工作。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:04:13.777

单击`Browse With...`并添加 Chrome。VS之后安装Chrome有可能吗？我相信该列表最初是在安装时填充的。我想 Chrome 更新可能会改变 Chrome 可执行文件的位置或类似的东西，但我只是在猜测那里。

# ruby - Compass / SASS Spriting 问题：无法读取文件？

> ID：13306780
> 
> 赞同：1
> 
> 时间：2012-11-09T10:57:43.087
> 
> 标签：ruby, sprite, compass-sass, sass

这是我的 SCSS：

```
@import "compass";

$spriteretina: sprite-map("sprite-retina/*.png");
$sprite: sprite-map("sprite/*.png");  

@mixin retina-sprite($name) {
    background-image: sprite-url($sprite);
    background-position: sprite-position($sprite, $name);
    background-repeat: no-repeat;
    display: block;
    height: image-height(sprite-file($sprite, $name));
    width: image-width(sprite-file($sprite, $name));
    @media (-webkit-min-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 3/2), (min-device-pixel-ratio: 2) {
        // Workaround for https://gist.github.com/2140082
        @if (sprite-position($sprite, $name) != sprite-position($spriteretina, $name)) {
            $ypos: round(nth(sprite-position($spriteretina, $name), 2) / 2);
            background-position: 0 $ypos;
        }
        // Set image size to the orginal size of the image
        @include background-size(ceil(image-width(sprite-path($spriteretina)) / 2) auto);
        background-image: sprite-url($spriteretina);
    }
}

.logo {
    background-image: sprite-url($spriteretina);
} 
```

当我尝试编译时，出现此错误：

```
PS C:\part\to\Website> compass compile
unchanged Frontend/img/icons-s49ccc64d2b.png
unchanged Frontend/img/sprite-s8e1b03f13e.png
Errno::ENOENT on line 28 of C: No such file or directory - Frontend/img/sprite-retina-sdc5ec023dc.png
Run with --trace to see the full backtrace 
```

我用完整的回溯运行它并得到这个：

```
Errno::ENOENT on line 28 of C: No such file or directory - Frontend/img/sprite-retina-s7f5af5584d.png
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/sass_extensions/functions/image_size.rb:28:in `open'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/sass_extensions/functions/image_size.rb:28:in `get_size_for_png'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/sass_extensions/functions/image_size.rb:21:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/sass_extensions/functions/image_size.rb:21:in `size'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/sass_extensions/functions/image_size.rb:50:in `image_dimensions'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/sass_extensions/functions/image_size.rb:4:in `image_width'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/funcall.rb:106:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/funcall.rb:106:in `_perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/node.rb:40:in `perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/operation.rb:74:in `_perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/node.rb:40:in `perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/funcall.rb:93:in `_perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/funcall.rb:93:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/funcall.rb:93:in `_perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/node.rb:40:in `perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/list.rb:70:in `_perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/list.rb:70:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/list.rb:70:in `_perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/script/node.rb:40:in `perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:257:in `visit_mixin'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:257:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:257:in `visit_mixin'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:107:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:119:in `with_environment'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:106:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:362:in `visit_media'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:266:in `visit_mixin'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:266:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:266:in `visit_mixin'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:119:in `with_environment'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:266:in `visit_mixin'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:68:in `perform_arguments'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:261:in `visit_mixin'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:107:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:119:in `with_environment'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:106:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:318:in `visit_rule'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:107:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:119:in `with_environment'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:106:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:318:in `visit_rule'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:225:in `visit_import'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:225:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:225:in `visit_import'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `map'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:107:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:119:in `with_environment'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:106:in `visit_children'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:126:in `visit_root'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:7:in `send'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/visitors/perform.rb:7:in `visit'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/tree/root_node.rb:20:in `render'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/engine.rb:315:in `_render'
  C:/ruby187/lib/ruby/gems/1.8/gems/sass-3.2.2/lib/sass/../sass/engine.rb:262:in `render'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:140:in `compile'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:139:in `compile'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/logger.rb:45:in `red'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:138:in `compile'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:118:in `compile_if_required'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:103:in `run'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:101:in `each'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:101:in `run'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/compiler.rb:100:in `run'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/commands/update_project.rb:45:in `perform'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/commands/base.rb:18:in `execute'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/commands/project_base.rb:19:in `execute'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:43:in `perform!'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:15:in `run!'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/bin/compass:30
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/bin/compass:44:in `call'
  C:/ruby187/lib/ruby/gems/1.8/gems/compass-0.12.2/bin/compass:44
  C:/ruby187/bin/compass:19:in `load'
  C:/ruby187/bin/compass:19 
```

对我来说，它似乎是在创建精灵文件之前尝试读取它。这给出了一个错误。但为什么我会遇到这种行为？我能做些什么来解决它？

我试图删除所有 .sass-cache 文件，重命名我的文件夹。但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:00:50.813

我用一种解决方法解决了这个问题。这很简单，只需在使用 sprite 的 mixin**之前添加一个选择器，如下所示：**

```
.fixesabugwithcompass {
    background-image: sprite-url($sprite-retina-sprites);
} 
```

每次在 mixin 中使用 Compass 生成图像时，仍然存在问题。此处报道： [https ://github.com/chriseppstein/compass/issues/897](https://github.com/chriseppstein/compass/issues/897)

# c# - 如何在具有可编辑单元格的 C# 窗口中使用带有数据网格视图列的树视图

> ID：13306782
> 
> 赞同：5
> 
> 时间：2012-11-09T10:57:50.180
> 
> 标签：c#, .net, winforms

我是 C# 窗口应用程序的新手。我想在 C# windows 窗体中使用`TreeView`控件。`DataGridView Column`在这个`DataGridView`单元格中是可编辑的并且可以存储数据，我的意思是用户可以从中设置和获取数据。

![在此处输入图像描述](../Images/42c58f4bc52d914ebd173958fef584b7.png)

我想创造这样的东西。

# html - 在没有 z-index 的情况下阻止 z 定位

> ID：13306786
> 
> 赞同：0
> 
> 时间：2012-11-09T10:58:16.830
> 
> 标签：html, css, z-index

请看一下：http: [//twitter.github.com/bootstrap/base-css.html](http://twitter.github.com/bootstrap/base-css.html)

像这样的例子还有很多：

![在此处输入图像描述](../Images/fcf0e90302ca9d40b81b0aa7288c8ef3.png)

如果您靠近块边界，您会看到灰色块位于白色块的下方。使用浏览器的开发人员工具，您可以看到两个框都有一个继承的`z-index: auto`;

我无法在我的网站上重现这种效果（不使用`z-index`）。
所以，我的问题是：**为什么白色下面的灰色块？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:04:18.787

这是因为第一个元素已经`position:relative`设置在它上面，而另一个没有。

**[这是一个简化的例子。](http://dabblet.com/gist/4045162)**

请注意，当您从第一个元素中删除相对定位时，它会被第二个元素隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:03:57.790

白色容器设置为 use `position:relative`，将其置于灰色框的前面。

如果灰色框也设置为使用`position:relative`，则需要在白色容器下方显示较低的 z-index。

# yii - YII Mail 在 HTML 邮件中生成不需要的 ascii 代码

> ID：13306787
> 
> 赞同：0
> 
> 时间：2012-11-09T10:58:17.317
> 
> 标签：yii, swiftmailer

我只是通过复制样本来使用 YII-Mail，但我总是在我生成的链接中得到一些 ascii 字符它们来自哪里以及如何避免它们？

```
$message = new YiiMailMessage;
$message->view = 'mail';
$message->setBody(array('model'=>$model), 'text/html');
$message->subject = Yii::t('tr','my subject');
$message->addTo('me@me.com');
$message->from = 'you@you.com';
Yii::app()->mail->send($message); 
```

并在查看文件“邮件”

```
<h1><?php echo(Yii::t('tr','This is HTML mail')); ?></h1>
<?php echo CHtml::link('Mylink', array('controller/view', 'id'=>$model->id)); ?> 
```

结果电子邮件源如下所示

```
MIME-Version: 1.0
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<h1>Incoming goods</h1>
<a href=3D"/testdrive/index.php?r=3Dcontroller/v=iew&amp;id=3D234137">Mylink</a> 
```

您可以在 = 符号之后注意到 3D。如果我有符号 = 或代码 3D 类型的转换，那会更合乎逻辑，但在这里我有他们两个，这很令人费解......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:33:42.180

事实上，额外的字符是可引用的可打印编码，我在想它们是电子邮件中的链接无法工作的原因所在。但实际上链接不起作用，因为它是相对链接而不是绝对链接！所以使用正确的

```
Yii::app()->createAbsoluteUrl 
```

在链接中将完美地完成这项工作。

# python - 如何打印/返回文件中的行数

> ID：13306789
> 
> 赞同：1
> 
> 时间：2012-11-09T10:58:28.733
> 
> 标签：python, file, count, readline, lines

> **可能重复：**
> [如何在 Python 中廉价地获得行数？](https://stackoverflow.com/questions/845058/how-to-get-line-count-cheaply-in-python)

我想打印文件中有多少行。

到目前为止我所拥有的是这个，但它会打印每一行的数量，我不确定如何让 Python 只打印最后一行。

```
filename = input('Filename: ')

f= open(filename,'r') 

counter = 1 

line = f.readline() 
while(line): 
    clean_line = line.strip() 
    print(counter) 
    line = f.readline()
    counter += 1
f.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:18:24.640

我会去...

```
with open('yourfile') as fin:
    print sum(1 for line in fin) 
```

这样可以节省将文件读入内存以获取其长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:01:00.593

```
f = open(filename, 'r')
lines = f.readlines()
number_of_lines = len(lines)
f.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:01:36.530

如果您不需要在每一行上循环，您可以使用：

```
counter = len(f.readlines()) 
```

# java - 空格作为 printf 中的分组分隔符

> ID：13306791
> 
> 赞同：6
> 
> 时间：2012-11-09T10:58:36.017
> 
> 标签：java

我知道如何使用逗号`printf`作为分组分隔符以像这样的格式打印值 `1,000,000.00`

以我使用命令的方式打印

`System.out.printf ("%,.2f", value);`

但是如何使用空格作为分组分隔符来格式化值 `1 000 000.00`

我试图找到解决方案，但使用`DecimalFormat`“现在看”的解决方案让我变得复杂（初级）。 **有没有像逗号一样简单的方法来做到这一点**？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T11:35:19.170

快速回答：

```
String result = String.format("%,.2f", value).replace(".", " ");
System.out.println(result); 
```

（假设您使用的是 Java 1.5 或更高版本）。

使用`DecimalFormat`：

```
DecimalFormat formatter = (DecimalFormat) NumberFormat.getInstance(Locale.getDefault());
DecimalFormatSymbols symbols = formatter.getDecimalFormatSymbols();
String.format(symbols.getGroupingSeparator(), ' ') 
```

甚至更好：

```
symbols.setGroupingSeparator(' ');
f = new DecimalFormat("###,###.00", symbols);
System.out.println(f.format(value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:35:56.167

Printf 不处理这个。使用 println insted。[来自oracle](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)的示例：

```
DecimalFormatSymbols unusualSymbols = new DecimalFormatSymbols(currentLocale);
unusualSymbols.setDecimalSeparator('|');
unusualSymbols.setGroupingSeparator('^');

String strange = "#,##0.###";
DecimalFormat weirdFormatter = new DecimalFormat(strange, unusualSymbols);
weirdFormatter.setGroupingSize(4);

String bizarre = weirdFormatter.format(12345.678);
System.out.println(bizarre);

out : 1^2345|678 
```

将浮点数转换为字符串：

println 使用[FloatingDecimal](http://www.docjar.com/html/api/sun/misc/FloatingDecimal.java.html)

printf 使用[FormattedFloatingDecimal](http://www.docjar.com/html/api/sun/misc/FormattedFloatingDecimal.java.html)

但是我没有时间深入研究为什么这些类是不同的。享受阅读 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:25:37.310

如果你想这样做，你应该使用 Decimalformat 这将是你的解决方案

> DecimalFormat f = new DecimalFormat("#0,000.00");
> 
> f.格式（13000）；

在这里稍微解释一下：逗号后的零数量将为您提供 DecimalFormat 将在其中插入一个点的数字数量。点后的零数量是 DecimalFormat 将写入的小数数量

编辑：哦，我刚刚看到你想在那里有空间：

因为 f.format 将返回一个字符串，您可以简单地添加`.replace("\\.", " ");`

方法。这将用空格替换所有写在那里的点

# sorting - cuda/thrust：尝试在 6GB 的 GPU RAM 中排序 2.8GB 的 数据会抛出 bad_alloc

> ID：13306793
> 
> 赞同：3
> 
> 时间：2012-11-09T10:58:45.737
> 
> 标签：sorting, cuda, thrust, bad-alloc

我刚刚开始使用推力，到目前为止我遇到的最大问题之一是似乎没有关于需要多少内存操作的文档。所以我不确定为什么下面的代码在尝试排序时会抛出 bad_alloc（在排序之前我仍然有超过 50% 的可用 GPU 内存，并且我在 CPU 上有 70GB 的 RAM）——任何人都可以解释一下这？

```
#include <thrust/device_vector.h>
#include <thrust/sort.h>
#include <thrust/random.h>

void initialize_data(thrust::device_vector<uint64_t>& data) {
  thrust::fill(data.begin(), data.end(), 10);
}

int main(void) {
  size_t N = 120 * 1024 * 1024;
  char line[256];
  try {
    std::cout << "device_vector" << std::endl;
    typedef thrust::device_vector<uint64_t>  vec64_t;

    // Each buffer is 900MB

    vec64_t c[3] = {vec64_t(N), vec64_t(N), vec64_t(N)};
    initialize_data(c[0]);
    initialize_data(c[1]);
    initialize_data(c[2]);

    std::cout << "initialize_data finished... Press enter";
    std::cin.getline(line, 0);

    // nvidia-smi reports 48% memory usage at this point (2959MB of                 
    // 6143MB)

    std::cout << "sort_by_key col 0" << std::endl;

    // throws bad_alloc

    thrust::sort_by_key(c[0].begin(), c[0].end(),
      thrust::make_zip_iterator(thrust::make_tuple(c[1].begin(),
      c[2].begin())));

    std::cout << "sort_by_key col 1" << std::endl;
    thrust::sort_by_key(c[1].begin(), c[1].end(),
        thrust::make_zip_iterator(thrust::make_tuple(c[0].begin(),
        c[2].begin())));
  } catch(thrust::system_error &e) {
    std::cerr << "Error: " << e.what() << std::endl;
    exit(-1);
  }
  return 0;
} 
```

这就是我编译代码的方式

```
nvcc -o ./bad_alloc ./bad_alloc.cu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:10:06.263

考虑到 Robert Crovella 的评论，这就是我使用 cudaMemGetInfo() 使用 39% GPU RAM 的代码的工作方式（这是在禁用 ECC 的 nvidia tesla 卡上，否则值需要更低）。

```
#include <thrust/device_vector.h>
#include <thrust/sort.h>
#include <thrust/random.h>

void initialize_data(thrust::device_vector<uint64_t>& data) {
  thrust::fill(data.begin(), data.end(), 10); }

#define BUFFERS 3

int main(void) {                                                                  
  size_t total_gpu_bytes;
  cudaMemGetInfo(0, &total_gpu_bytes);
  size_t N = (total_gpu_bytes * .39) / sizeof(uint64_t) / BUFFERS;
  try {
    std::cout << "device_vector " << (N/1024.0/1024.0) << std::endl;
    typedef thrust::device_vector<uint64_t>  vec64_t;
    vec64_t c[BUFFERS] = {vec64_t(N), vec64_t(N), vec64_t(N)};
    initialize_data(c[0]);
    initialize_data(c[1]);
    initialize_data(c[2]);
    thrust::sort_by_key(c[0].begin(), c[0].end(),
        thrust::make_zip_iterator(thrust::make_tuple(c[1].begin(),
        c[2].begin())));
    thrust::sort_by_key(c[1].begin(), c[1].end(),
        thrust::make_zip_iterator(thrust::make_tuple(c[0].begin(),
        c[2].begin())));
  } catch(thrust::system_error &e) {
    std::cerr << "Error: " << e.what() << std::endl;
    exit(-1);
  }
  return 0;
} 
```

# ios - UIActivityIndi catorView 没有在正确的时间显示

> ID：13306794
> 
> 赞同：1
> 
> 时间：2012-11-09T10:58:49.997
> 
> 标签：ios, uiactivityindicatorview, uiviewanimation

我正在制作一个允许用户在我的 IOS 应用程序中输入数据的表单。该表格允许用户输入大量重复数据。所以，有时，这个过程需要时间，我想在这个过程中显示一个 UIActivityIndi​​catorView。

不幸的是，微调器在过程结束时只出现一秒或更短，而不是像预期的那样在开始时出现。

有一些代码：

```
- (void) manageSpinner{
    spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [spinner setCenter:CGPointMake(self.view.bounds.size.width/2.0, self.view.bounds.size.height/2.0)]; // I do this becau I'm in landscape mode
    UIImageView *imageView = [[UIImageView alloc]initWithFrame:self.tableView.bounds];
    UIImage *image = [UIImage imageNamed:@"dark_gradiant.jpg"];
    [imageView setImage:image];
    [imageView addSubview:spinner];
    [self.tableView addSubview:imageView];
    [spinner startAnimating];
}

//On click save by the user
- (IBAction)save:(id)sender{

    //Collect information from the form

    myObject.name = nameTF.text;

    [...]

    if(informations OK[...]){        
        //Manage spinner
        [self manageSpinner];

        //Add : this is the long process
        for (int i=0; i<nbRepeatChooseByUser; i++) {
            [myObject register];
        }

        //Call the delegate that will dismiss the form
        [self.delegate theSaveButtonOnTheAddMyObjectTVCWasTapped:self];
    }
} 
```

在添加方法之前调用微调器，但它似乎是在该过程之后设置的。

谢谢，

亚历山大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:07:32.313

活动指示器与您的长流程在同一线程上运行，因此动画不会按您想要的方式开始。尝试在后台线程中运行您的长进程。

```
if(informations OK[...]){        
    //Manage spinner
    [self manageSpinner];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        // Do your background process here
        //Add : this is the long process
        for (int i=0; i<nbRepeatChooseByUser; i++) {
            [myObject register];
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            //This section will be called after your long process has been completed.

            //Call the delegate that will dismiss the form
            [self.delegate theSaveButtonOnTheAddMyObjectTVCWasTapped:self];
        });

    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:06:02.277

发生这种情况是因为 TableView 正在用完 mainThread，同时您希望微调器执行。在这种情况下，编译器会将操作排队。因此微调器动画会突然发生..

要同步动作，使微调器在后台线程中动画..

执行以下选项来启动和停止微调器

开始： `[spinner performSelectorInBackground:@selector(startAnimating) withObject:self];` 停止： `[spinner performSelectorInBackground:@selector(stopAnimating) withObject:self];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:09:40.037

Activity 指示器被在主线程中执行的操作阻塞。因此，将操作更改为后台线程，例如：

```
dispatch_queue_t backgroundQueue;
backgroundQueue = dispatch_queue_create("registerqueue", NULL); 
dispatch_async(backgroundQueue, ^(void) {
        for (int i=0; i<nbRepeatChooseByUser; i++)
        {
            [myObject register];
        }
    }); 
```

不要忘记导入

```
#import <dispatch/dispatch.h> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:25:35.577

我找到了一个很好的 MIT 库来管理 UISpinner：[https ://github.com/matej/MBProgressHUD](https://github.com/matej/MBProgressHUD)

# javascript - 如果下拉列表等于某个值，则更改它的值

> ID：13306799
> 
> 赞同：1
> 
> 时间：2012-11-09T10:59:01.457
> 
> 标签：javascript

抱歉，如果这个问题已经被问及并得到了回答，但我找不到任何专门满足我需求的东西。我有一个包含占位符和 javascript 的表单，以确保表单未提交且占位符仍然存在。有一个下拉框，其值为“最佳通话时间”。我想要做的是，如果这个值作为默认值传递，我希望它更改为“n/a”或空白值。我已经使用以下 javascript 使用评论框实现了这一点，但它似乎对下拉列表不起作用：

```
var comments=document.getElementById('comments').value;
    if (comments=="Comments")
      {
      document.getElementById('comments').value="";
      } 
```

这不是必填字段，因此我无法发出警报，因此如果提交为“最佳通话时间”，我只需要更改值即可。希望我已经正确解释了一切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:09:01.037

你不选择有价值的ID吗？

```
<select id="hours">
  <option value="default">Best Time To Call</option>
  <option value="six" >6</option>
  <option value="seven">7</option>
</select> 
```

如果是这样，你可以使用这个：

```
var e = document.getElementById("hours");
var value = e.options[e.selectedIndex].value;
if(value == "default")
  e.value ="six"; 
```

**更新：我已更改行为以将其设置为 default 之后的第一个选项**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:05:53.807

对于下拉列表，您需要遍历所有“选项”，找到具有该值的选项（在您的情况下为注释）并将属性添加到该“选项” - 已选中。

相反，如果您使用 jQuery，则使用 jQuery("#comments").val("") 将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:01:46.953

我推荐使用[HTML5 占位符](http://davidwalsh.name/html5-placeholder)文本；

```
<textarea id="comments" placeholder="Comments" /> 
```

这样您就不需要进行验证来解决您的自定义占位符。

# ubuntu - wkhtmltoimage 生成图片飞但是不能显示汉字但是pdf可以

> ID：13306806
> 
> 赞同：0
> 
> 时间：2012-11-09T10:59:16.223
> 
> 标签：ubuntu, wkhtmltopdf, wkhtmltoimage

我使用 wkhtmltoimage 生成图像，然后输入命令

1.  wkhtmltoimage [http://www.baidu.com/tmp/screenshot.jpg](http://www.baidu.com/tmp/screenshot.jpg)

2.  wkhtmltopdf [http://www.baidu.com/tmp/screenshot.pdf](http://www.baidu.com/tmp/screenshot.pdf)

结果是无法显示汉字。

版本：

```
wkhtmltopdf   wkhtmltopdf 0.9.6
wkhtmltoimage  wkhtmltoimage 0.11.0 rc1 
```

谁能帮我？任何帮助将不胜感激;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:40:04.343

看起来您正在尝试将 wkhtmlto_ 程序用作 OCR - 您上面的命令正在尝试将图像转换为图像并将 pdf 转换为 pdf。

这是我在我一直致力于执行此操作的 Windows 项目中使用的命令：

wkhtmltoimage --encoding "utf8" --quality 100 --zoom 1.4 --crop-w 816 C:/.../public/temporary/temp.html C:/.../public/temporary/temp.jpg

请注意我的命令中的 --encoding "utf8"。希望这可以帮助！

# emacs - 如何检查点是否在 Emacs Lisp 中的缩进点？

> ID：13306807
> 
> 赞同：1
> 
> 时间：2012-11-09T10:59:20.280
> 
> 标签：emacs, elisp

是否有测试当前点是否在缩进点的功能？即点是 的可能结果`back-to-indentation`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:35:20.293

```
(defun point-at-indentation-p ()
  (if (= (save-excursion (back-to-indentation) (point)) (point))
      (message "I'm at indentation")
    (message "I'm elsewhere"))) 
```

看起来很简单……不知道为什么要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:01:17.853

The following code will return `t` if point is at the first non-whitespace character of the current line, and `nil` otherwise:

```
(looking-back "^\\s-*") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:31:31.200

我不记得有这样的功能。我会用

```
(and (looking-at "[^ \t]\\|$")
     (save-excursion (skip-chars-backward " \t") (bolp))) 
```

请注意，使用`looking-back`有效，但`looking-back`在算法上效率低下，因此在某些病理情况下它可能会很慢。

# javascript - 通过jquery制作元素“css-absolute”时的奇怪跳转

> ID：13306812
> 
> 赞同：1
> 
> 时间：2012-11-09T10:59:29.807
> 
> 标签：javascript, jquery, css

我尝试“绝对化”以前的相关 DOM 元素，每次尝试时，都会发生一个奇怪的“跳跃”，我只是不知道我做错了什么或如何解决这个问题。

好的，可以在这里找到 JS_fiddle [http://jsfiddle.net/rhqy3/3/](http://jsfiddle.net/rhqy3/3/)

这是虚拟 HTML

```
<html>
<body>
    <br><br><h1>one</h1><br><br><br><br>
    <h2>two</h2>
</body>
</html>​ 
```

这是javascript（使用jquery）

```
jQuery.fn.absolutize = function()
{
  return this.each(function()
  {
    var element = jQuery(this);
    if (element.css('position') == 'absolute')
    {
      return element;
    }
    alert('now a jump happens, that should not happen')
    element.css("position", "absolute");
    element.css(element.offset());
    return element;

  });
}

$(document).ready(function() {
            window.setTimeout(function(){$("h1, h2").absolutize()}, 2000)
        }); 
```

​ 好的，好吧，两秒钟后，当我想将元素设置为其绝对等价物时，有一个....跳转？！？我不知道为什么。我试过`$(element).position()`而不是`offset()`，没有成功。

*更新：*澄清 - h1 停留在原处，h2 进行跳跃。我在 mac os x lion 上测试了最新的 google chrome，firefox 最新的。

我的目标是将元素（通过绝对 jquery 插件）设置为它们的真实（不跳跃）等效 css-absolute 位置，怎么做？谢谢，我真的很感激，谢谢你的时间。

**更新 2**：heureka，我已经确定了问题（仍然缺少解决方案）！问题：**DOM 太快了**。这个脚本做了什么：它获取 h1 元素，说：把它从相对上下文（正常渲染流程）中取出并将其设置为“绝对”，此时浏览器重排发生 - 因为 H1 不再在那里，一切都在上升。发生跳跃。这太快了，我们看不到。现在 jquery 函数转到 h2 并说“绝对”，但此时 h2 元素已经有了“新”的相对定位，跳跃确实发生了。这就是不是每个人都看到它的原因，**这是一个赛车条件**. 如果浏览器要缓慢触发重排，则 DOM 仍保留旧值。好的，怎么办：我们必须收集所有元素的位置值（将它们保存在某个地方），然后，在收集完所有位置值之后，我们一个接一个地更新一个元素。不太确定如何在 jquery 插件的上下文中执行此操作，但我会处理它（今晚，现在重新开始工作）。

**更新3**：下面的答案是这个问题的正确答案。多谢。这没有解决的一件事（因为我没有要求它）是其他元素的问题，这可能取决于相对定位的元素然后做一些回流舞（因为突然绝对化的元素丢失了），这个小 jquery 插件解决了这个问题[https://gist.github.com/4051578](https://gist.github.com/4051578)，它是一个名为 jquery.bodysnatch.js 的 jquery 插件，因为它的目的是“jquery 插件，它用自己的绝对定位克隆替换元素，同时隐藏和静音原件“ 玩得开心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:11:42.320

干得好！

[http://jsfiddle.net/rhqy3/9/](http://jsfiddle.net/rhqy3/9/)

```
 (function($){
        $.fn.absolutize = function() {
            var elems = [];
            this.each(function() {
                var element = $(this);

                if (element.css('position') == 'absolute') return;

                var offset = element.offset();
                elems.push({
                    el: element,
                    newRules: {
                        position: 'absolute',
                        top: offset.top,
                        left: offset.left
                    }
                });
            });

            $.each(elems, function(i, obj){
                obj.el.css( obj.newRules );
            });
        };

        $(document).ready(function() {
            window.setTimeout(function(){
                $("h1, h2").absolutize()
            }, 2000);
        });

    })(jQuery);​ 
```

问题是，它一次遍历一个传入到 absolutize() 的元素，获取偏移量并应用它。当它请求 h2 的偏移量时，h1 已经从文档流中删除。

可能有更好的编码方法，但想法是，在更改每个位置之前缓存元素的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:00:27.473

### 您需要在制作之前获取当前元素坐标`absolute`：

```
element.css(element.offset());
element.css("position", "absolute"); 
```

### 小提琴：http: [//jsfiddle.net/BYcdn/](http://jsfiddle.net/BYcdn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:24:00.743

尝试这个：

```
jQuery.fn.absolutize = function(){

     return this.each(function(){

        var element = $(this);
        element.css("top",element.position().top);
        element.css("left",element.position().left);
        //alert(element.position().top);
        element.css("position", "absolute");

        if (element.css('position') == 'absolute'){
            return element;
        }

  });
}

$(document).ready(function() {
  window.setTimeout(function(){$("h1, h2").absolutize()}, 2000)
}); 
```

​</p>

# c# - 如何使用 Linq 在 c# 列表中添加缺失值列表

> ID：13306815
> 
> 赞同：4
> 
> 时间：2012-11-09T10:59:48.963
> 
> 标签：c#, linq, list, add, items

我有一个像

```
public class MyClass
{
  public float Consumed { get; set;}
  public int RequiredValue { get; set;}
} 
```

这个类的列表

```
List<MyClass> list 
```

已经有一些 MyClass 类型的项目，其中包含“RequiredValue”，例如 3、5、6、8 和 10，以及“Consumed”属性中的相应值。我使用以下代码在 1 到 10 的范围内找到缺失值：

```
var missingValues = Enumerable.Range(1, 10).Except(list.Select(p1 => p1.RequiredValue)); 
```

我想使用 Linq 在“列表”中添加项目，这样新项目在“RequiredValue”和“Consumed”中的缺失值为 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:03:53.407

这将生成您的对象并将它们添加到集合中（您不需要初始化 Consumed 属性，因为它已经将零作为默认值）：

```
list.AddRange(Enumerable.Range(1, 10)
                        .Except(list.Select(m => m.RequiredValue))
                        .Select(i => new MyClass() { RequiredValue = i } ); 
```

# c# - 如何将pdf文件转换为图像文件，反之亦然

> ID：13306816
> 
> 赞同：0
> 
> 时间：2012-11-09T10:59:52.510
> 
> 标签：c#, vb.net, c#-4.0, vba

在我的应用程序中，我想将 PDF 文件转换为图像，然后将图像文件转换为 PDF。

是否有任何免费的 SDK 可用于实现这个..？

我已经用过 PDFSharp，但它不是免费的。有没有人知道免费的SDK ..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:02:14.020

您可以尝试类似 PDFCreator - [http://sourceforge.net/projects/pdfcreator/](http://sourceforge.net/projects/pdfcreator/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:36:57.583

你可以使用Ghostscript吗？它是一个命令行工具，可以从您的应用程序中调用： [http ://www.ghostscript.com/](http://www.ghostscript.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:14:13.690

PDF Sharp 本身怎么样？既然[是免费](http://www.pdfsharp.com/PDFsharp/index.php?option=com_content&task=view&id=29&Itemid=43)的，其实！（看起来像 3 条款 BSD。）

如果您愿意，您可以支付支持费用，但没有义务这样做。

# asp.net-mvc - 传递参数为空

> ID：13306817
> 
> 赞同：1
> 
> 时间：2012-11-09T10:59:53.273
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试从 MVC 的默认成员中删除用户，但传递的参数始终为空。我使用了`[HttpDelete]`属性，`[FromBody]`但它给出了*"500 Server internal error"*。下面是我的代码

```
 // Delete api/Del/user name

    public HttpResponseMessage DeleteUser(string user)
    {

        try
        {
            System.Web.Security.Membership.DeleteUser(user);
        }
        catch (Exception)
        {

            return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        return Request.CreateResponse(HttpStatusCode.OK);
    } 
```

这是我使用“删除”动词的调用方法。

```
http://localhost:3325/api/Del/haris2 
```

我已经为路由创建了这个 webapi 类。我在同一个控制器中有一个没有参数的 Get 方法。它的工作很好。

**WebApiConfig.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;

namespace DatabaseService_WebAPI.App_Start
{
    public class WebApiConfig
    {
        public static void Configure(HttpConfiguration config)
        {
            // Filters
            config.Filters.Add(new QueryableAttribute());

            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
            config.Routes.MapHttpRoute(
               name: "DefaultApiwithAction",
               routeTemplate: "api/{controller}/{action}",
               defaults: new { id = RouteParameter.Optional }
           );

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:20:26.283

**问题是 MVC按名称**映射您的参数。所以有两种方法可以解决你的问题

1.  将您的操作参数的名称更改为`id`您的映射路径所期望的名称，例如

    ```
    public ActionResult DeleteUser(string id)
    {
        ...
    } 
    ```

2.  更新您的路线以查找`user`参数而不是 id，例如

    ```
    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{user}",
        defaults: new { user = RouteParameter.Optional }
    ); 
    ```

# c# - MSSQL 快速更新

> ID：13306820
> 
> 赞同：4
> 
> 时间：2012-11-09T11:00:23.133
> 
> 标签：c#, sql-server, optimization, query-optimization

我有这样的 Sql 查询：

```
UPDATE tProfile SET LastActivity=@DateTimeNow WHERE UserId=@UserId AND Id IN ({0}) 
```

其中 {0} - 它是一组 id，例如：

```
UPDATE tProfile SET LastActivity=@DateTimeNow WHERE UserId=@UserId AND Id IN (1155,1684,41368) 
```

这个字符串可以有几千个 ID。

我怎样才能更轻松地执行此查询，因为此查询使用 100% CPU。

我想知道一些替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:15:01.950

如果您的 ID 是逗号分隔的列表，那么您可以使用[拆分函数](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)(UDF) 将它们插入到表变量中，然后进行更新。

```
DECLARE @IdTable TABLE (Id INT)
INSERT INTO @IdTable SELECT Id FROM dbo.SplitFunction(@IdList,',')

UPDATE p SET p.LastActivity = @DateTimeNow
FROM tProfile p INNER JOIN @IdTable i
  ON p.Id = i.Id
WHERE p.UserId = @UserId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:23:44.913

就我上网而言，IN 显示性能很慢...我建议使用两个表的 JOIN... 其中第一个表将是要更新的表，第二个表将是保存所有表的临时表Id 值...然后你的 UPDATE 查询看起来像 `UPDATE tProfile tp INNER JOIN IdTable it ON tp.Id = it.Id SET LastActivity=@DateTimeNow WHERE UserId=@UserId`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T11:05:10.803

您可以创建一个包含这些 id 的临时表，然后`UPDATE`使用`JOIN`该表。就像是：

```
UPDATE t1
SET t1.LastActivity=@DateTimeNow 
FROM tProfile t1
INNER JOIN
(
    SELECT 1115 Id
    UNION ALL
    SELECT 1684
    UNION ALL
    SELECT 41368
    ...
) t2 ON t1.UserId = t2.Id 
```

# php - 如何转义 PHP parse_ini_file 函数解析的文件中的特殊字符？

> ID：13306821
> 
> 赞同：3
> 
> 时间：2012-11-09T11:00:24.283
> 
> 标签：php, encoding, special-characters

我想在配置文件中保留某个字符串，以便由 PHP[`parse_ini_file()`](http://php.net/manual/en/function.parse-ini-file.php)函数解析。但是，此字符串包含一些需要以某种方式编码的特殊字符（带有类似`0x2C`or的代码）。`0x3D`有没有办法在这样的文件中用十六进制代码编写特殊字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T12:02:53.510

The proper way to escape INI values is to enclose them in `"double quotes"`. If your string doesn't contain double quotes, you can use it in as a value enclosed in double quotes.

Escaping single quotes with a backslash seems to work as long as there are not two consecutive double quotes in the value, as per [http://php.net/manual/en/function.parse-ini-file.php#100046](http://php.net/manual/en/function.parse-ini-file.php#100046)

If you want to do your own escaping, you certainly can:

[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php) / [`htmlspecialchars_decode`](http://www.php.net/manual/en/function.htmlspecialchars-decode.php) escapes `<`,`>`,`&` and `"`.

[`htmlentities`](http://www.php.net/manual/en/function.htmlentities.php) / [`html_entitity_decode`](http://www.php.net/manual/en/function.html-entity-decode.php) will escape very aggresively (but also very safely) to HTML entities

[`urlencode`](http://www.php.net/manual/en/function.urlencode.php) / [`urldecode`](http://www.php.net/manual/en/function.urldecode.php) will escape all special characters except `_-~.`.

[`base64_encode`](http://www.php.net/manual/en/function.base64-encode.php) / [`base64_decode`](http://www.php.net/manual/en/function.base64-decode.php) will ensure the encoded string contains only alphanumeric characters and `+=/`. This might be optimal for encoding binary data but doesn't preserve readability.

# ajax - 对话框上的 primefaces 数据表第一次不显示

> ID：13306823
> 
> 赞同：1
> 
> 时间：2012-11-09T11:00:42.450
> 
> 标签：ajax, jsf, primefaces

我正在使用 primefaces-3.4 并有一个对话框（详细信息页面），用于在母版页的数据表上显示所选项目的详细信息。我的 bean 是 @ViewScoped 并且在 actionListener 方法中我肯定会加载详细信息。当母版页显示时，第一次单击 p:commandButton，它不会填充对话框，第二次单击它会正确显示。我已经使用 Chrome 开发人员工具进行了检查，没有发现任何异常，只是所选项目的详细信息没有“绑定”到 UI。

这是我的 bean 代码和 xhtml

```
@PostConstruct
public void init() {
    // load credits if there is an account selected...
    if (mainBean.getSelectedAccount() != null) {

        ArrayList<Credit> cs = loadCredits(mainBean.getSelectedAccount());
        setCredits(cs);
        mainBean.getSelectedAccount().setCredits(cs);
    }
    if (this.selectedCredit != null) {
        ArrayList<Installation> installations = loadInstallations(selectedCredit);
        selectedCredit.setInstallations(installations);
        setPaymentAmount(Float.parseFloat(installations.get(installations.size()-1).getAmount()));
    }
}
....
//actionListener to select
public String select() {
    if (selectedCredit != null) {
        ArrayList<Installation> installations = loadInstallations(selectedCredit);
        selectedCredit.setInstallations(installations);
    }
    return null;
} 
```

这是我的 xhtml 中的片段

```
<p:dataTable var="credit" selectionMode="single"
                        emptyMessage="Kayıt Bulunamadı..."
                        selection="#{accountBean.selectedCredit}" rowKey="#{credit.id}"
                        value="#{accountBean.credits}" id="credit_table" paginator="true"
                        paginatorAlwaysVisible="false" rows="10">
                        <f:facet name="header">
                            <small>İlgili krediyi seçtikten sonra "Detay" butonuna
                                tıklayınız..</small>
                        </f:facet>
                        <p:column>
                            <h:outputText headerText="Kredi ID" value="#{credit.id}" />
                        </p:column>
                        <p:column headerText="Kredi Adı">
                            <h:outputText value="#{credit.name}" />
                        </p:column>
                        <p:column headerText="Tutarı">
                            <h:outputText value="#{credit.total}" />
                        </p:column>

                        <f:facet name="footer">
                            <p:toolbar>
                                <p:toolbarGroup align="left">
                                    <p:commandButton actionListener="#{accountBean.select}"
                                        icon="ui-icon-search"
                                        update=":productdetailform:product_detail"
                                        oncomplete="kredidetail.show();" value="Detay">
                                        <f:ajax render=":productdetailform:product_detail" />
                                    </p:commandButton>
....
<h:form id="productdetailform">
            <p:dialog id="product_detail"
                header="#{accountBean.selectedCredit.name}" widgetVar="kredidetail"
                modal="true" height="700" width="850">
                <div class="row">
                    <div class="twelve columns">
                        <ul class="block-grid three-up">
                            <li><b>Kredi Hesap Adı: </b> <h:inputText readonly="true"
                                    value="#{accountBean.selectedCredit.name}" /></li>
                            <li><b>Kredi Tutarı: </b> <h:inputText readonly="true"
                                    value="#{accountBean.selectedCredit.total}" /></li>
                            <li><b>Veriliş Tarihi: </b> <p:calendar readonly="true"
                                    pattern="dd.MM.yyyy" readonlyInput="true" id="loan_date"
                                    value="#{accountBean.selectedCredit.loanDate}" /></li>
                            <li><b>Ödenen: </b> <h:inputText readonly="true"
                                    value="#{accountBean.selectedCredit.paid}" /></li>
                            <li><b>Kalan: </b> <h:inputText readonly="true"
                                    value="#{accountBean.selectedCredit.remaining}" /></li>
                            <li><b>Durumu: </b> <h:outputText value="AKTİF" /></li>

                        </ul>
                    </div>
                </div>
                <div class="row">
                    <div class="twelve columns">
                        <p:dataTable var="ins" emptyMessage="Kayıt Bulunamadı..."
                            value="#{accountBean.selectedCredit.installations}"
                            id="credit_details_table">
                            <p:column headerText="Taksit No">
                                <h:outputText value="#{ins.installationNo}" />
                            </p:column>
                            <p:column headerText="Vadesi">
                                <h:outputText value="#{ins.paymentDue}">
                                    <f:convertDateTime pattern="dd.MM.yyyy" />
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Taksit Tutarı">
                                <h:outputText value="#{ins.amount}" />
                            </p:column>
                            <p:column headerText="Taksit Tutarı">
                                <h:outputText value="#{ins.paidAmount}" />
                            </p:column>
                            <p:column headerText="Ödeme Durumu">
                                <h:outputText value="#{ins.status}" />
                            </p:column>
                            <p:column headerText="Ödeme Tarihi">
                                <h:outputText value="#{ins.actualDate}" />
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>
            </p:dialog>
        </h:form> 
```

那么问题到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:58:37.520

AFAIK，actionListener 方法必须有签名：`public void actionListener(ActionEvent event)`。您可以尝试使用`action`而不是`actionListener`.

另外，你的数据表有一个封闭的表格吗？使用多个表单时，JSF 中存在一些错误。尝试更新整个表单而不是仅更新对话框：`update=":productdetailform"`

# sql - 将一列非唯一值与另一列非唯一值进行比较

> ID：13306825
> 
> 赞同：2
> 
> 时间：2012-11-09T11:00:44.297
> 
> 标签：sql

不知道如何正确地询问它，所以我会尝试将其可视化。我有 2 列，可以说一个是名称，并且名称重复（几个 Johns 和几个 Lukes 等）。另一列几乎是语言，但只有少数（法语、西班牙语、英语等）。基本上，每个人都可以有多种语言。

我试图找出如果给定一个名字，我可以确定哪些其他人与原始人的所有语言相关联。例如，马克知道法语和西班牙语。使用它，我会尝试找出还有谁会法语和西班牙语。因此，如果 Jeremy 懂法语、西班牙语和德语，他就会出现在结果中。

有任何想法吗？

到目前为止我有

```
accept nameIn prompt 'Search for:'
select name from sc16temp intersect (select lang from sc16temp where name='&nameIn'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:40:03.160

看起来你想要带有提醒的[关系划分。](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

[SQL小提琴](http://sqlfiddle.com/#!4/a02b4/11)

**Oracle 11g R2 模式设置**：

```
create table YourTable
(
  Name varchar(10),
  Lang varchar(10),
  primary key (Name, Lang)
);

insert into YourTable values('John', 'English');
insert into YourTable values('John', 'French');
insert into YourTable values('John', 'Spanish');
insert into YourTable values('John', 'Swedish');

insert into YourTable values('Mark', 'English');
insert into YourTable values('Mark', 'French');
insert into YourTable values('Mark', 'Spanish');

insert into YourTable values('Peter', 'English');
insert into YourTable values('Peter', 'French'); 
```

**查询 1**：

```
select T1.Name
from YourTable T1
  inner join YourTable T2
    on T1.Lang = T2.Lang
where T2.Name = 'Mark'
group by T1.Name
having count(T1.Lang) = (select count(Lang) 
                         from YourTable 
                         where Name = 'Mark') 
```

**[结果](http://sqlfiddle.com/#!4/a02b4/11/0)**：

```
| NAME |
--------
| John |
| Mark | 
```

# login - VB 2010 登录 3 次循环

> ID：13306829
> 
> 赞同：0
> 
> 时间：2012-11-09T08:31:38.540
> 
> 标签：login, loops

如何在我的登录代码上放置一个循环，如果用户第三次输入错误的密码/用户名，程序就会结束？

在这一点上，我很难放置循环代码。

这是我在 VB 2010 中的登录代码

```
Private Sub btnLogIn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogIn.Click
    Me.Refresh()
    Dim login = Me.TblUserTableAdapter1.UsernamePasswordString(txtUser.Text, txtPass.Text)

    If login Is Nothing Then
        MessageBox.Show("Incorrect login details", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    Else
        Dim ok As DialogResult
        ok = MessageBox.Show("Login Successful", "Dantiña's Catering Maintenance System", MessageBoxButtons.OK, MessageBoxIcon.Information)
        MMenu.Show()
        MMenu.lblName.Text = "Welcome " & Me.txtUser.Text & " !"
        If txtPass.Text <> "admin" Then
            MMenu.Button1.Enabled = False
            ProdMaintenance.GroupBox1.Visible = True
            MMenu.Button2.Enabled = True
            MMenu.Button3.Enabled = True
            MMenu.Button4.Enabled = True
        Else
            MMenu.Button1.Enabled = True
            ProdMaintenance.GroupBox1.Visible = True
            MMenu.Button2.Enabled = True
            MMenu.Button3.Enabled = True
            MMenu.Button4.Enabled = True
        End If
        Me.Refresh()
        Me.Hide()

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:30:57.870

尝试在方法之外初始化一个计数器，如果密码不正确，则增加计数器

像这样的东西

```
If login Is Nothing And counter<=3 Then
counter+=1 
```

# jquery - jQuery selector returns prevObject instead of normal element

> ID：13306832
> 
> 赞同：36
> 
> 时间：2012-11-09T11:01:23.697
> 
> 标签：jquery, jquery-plugins, jquery-selectors

I have some problems with selecting elements, with Jquery. When i try to select a element:

```
var images = $("#htmlChunk").find("img.Thumb");
console.log(images); 
```

i get this result:

```
>[<img>, <img>, prevObject: e.fn.e.init[1], context: #document, selector: "#htmlChunk img.Thumb"] 
```

What is causing this returned result? I tried some things but still dont get the result i wanted.

i tried to wrap the code to avoid conflict's. i tried to clear the object

This was something i found on the web. [http://drupal.org/node/272557](http://drupal.org/node/272557)

```
var images = $("#htmlChunk")['prevObject'].find("img.Thumb"); 
```

i get returned a object now, but thats also not what i wanted.

I jumped into this project so i am not well-known with the script. i tried to search for prevObject in the js files but could'nt find any.

I think the problem is that it is interfering with some other javascript file. any ideas? directions?

Edit: htmlChunk:

```
<div id="htmlChunk">
    <div class="ngg-albumoverview">
        <div class="ngg-album-compact">
            <div class="ngg-album-compactbox">
                <div class="ngg-album-link">
                    <a class="Link" href="http://........">
                        <img class="Thumb" alt="Personeelsevent" src="http://.........">
                    </a>
                </div>
            </div>
            <h4><a class="ngg-album-desc" title="Personeelsevent" href="http://.....">Personeelsevent</a></h4>
            <p><a href="http:///.......">bekijk dit album</a></p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-09T11:17:51.010

Your `images` variable is a jQuery object, so what you're seeing output in your browser's console seems to be that object. The specific output suggests that the call to `.find()` isn't actually matching any elements; compare the two console outputs from [this jsFiddle](http://jsfiddle.net/nhDp4/1/) (in Chrome).

When you call a jQuery function - such as `.find()`, `.filter()`, etc - that narrows down, or changes, the list of matched elements on an existing jQuery object the resulting jQuery object also contains a reference to the state before that function was run, which is what you're seeing as `prevObject`. This is what it uses to revert back to when you call the [`.end()`](http://api.jquery.com/end/) function.

Let's break down your code:

```
var images = $(".htmlChunk").find("img.Thumb"); 
```

The first part - `$(".htmlChunk")` - matches all elements that have the class `htmlChunk` on them, and returns a jQuery object containing those elements.

Then you call `.find("img.Thumb")` which looks for all elements that are descendents of the already matched elements (those with the class `htmlChunk`) that satisfy the criteria of being an `<img>` element and having the class `Thumb` on them.

You could use a single selector to retrieve the elements, which might give you better results:

```
var images = $(".htmlChunk img.Thumb"); 
```

If you want an array of the actual DOM elements, rather than a jQuery object containing them, you can use the [`.get()`](http://api.jquery.com/get/) function:

```
var elementArray = images.get(); 
```

* * *

To address the edit to the question to include the HTML:

You're using `$(".htmlChunk")` to obtain the initial element. However, that `<div>` element has an **ID**, not a class, of `htmlChunk` so that code won't select the element you need. You'll want to use the following:

```
var images = $("#htmlChunk").find("img.Thumb"); 
```

Note the `#` rather than the `.` in the selector.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:23:17.640

It looks like your trying to select class ".htmlChunk", but does not exist. Try selecting by id instead.

```
var images = $("#htmlChunk").find("img.Thumb"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T11:26:59.507

try this.

```
 function getId() {
             var ids = $(".htmlChunk").find("img.thumb"); //it wiill return array of image
             var sid = $(".htmlChunk").find("img#img2"); //it wiill return wat image you want
             $(".htmlChunk span").text("arrays:" + ids[0] + "  :  " + ids[1] +
             "simple imge:" + sid);
         }

    <input id="Button1" type="button" value="button" onclick= "getId();"/>

  <div class="htmlChunk">
        <img alt="" src="img/Desert.jpg" class="thumb" id="img1" />
       <img alt="" src="img/Chrysanthemum.jpg" class="thumb" id="img2" />
        <span></span>
   </div> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-22T08:59:23.817

isn't prevObject just a property of the result?

you could understand it as "the result has the following prevObject ->"

# image - htaccess 图片重定向

> ID：13306840
> 
> 赞同：0
> 
> 时间：2012-11-09T11:01:39.273
> 
> 标签：image, .htaccess, redirect, png

我需要重定向图像以使其看起来更短

是）我有的

```
"http://site.com/images/screenshots/509cd93aad063.png" 
```

我需要的

```
"http://site.com/509cd93aad063.png" or even "http://site.com/509cd93aad063" if possible. 
```

我试过了

```
RewriteRule ^(.png)$ images/screenshots/$1 [L] - No success =( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:42:56.817

您需要添加通配符`.*`

```
RewriteRule ^(.*\.png)$ images/screenshots/$1 [L] 
```

更好的是，您可以从通配符中排除 /：

```
RewriteRule ^/?([^/]*\.png)$ images/screenshots/$1 [L] 
```

这样，该规则仅适用于根路径。

一个提示，可以在线调试正则表达式：[http ://regexpal.com/](http://regexpal.com/)

# django - 如何在 Django 中使用 subprocess.Popen 解析服务器密码？

> ID：13306842
> 
> 赞同：0
> 
> 时间：2012-11-09T11:01:42.413
> 
> 标签：django, django-views

我有一个简单的表单，用户可以在其中输入服务器的远程主机、用户名和密码。我在views.py 中使用upload_file 视图处理表单。我想使用用户提供的输入运行以下命令：

```
rsync --list-only username@serveraddress 
```

要运行以下命令，用户必须输入密码，成功验证后将列出该文件。我已经从用户那里输入了密码，但是我不知道如何使用它。立即运行上述命令后，必须在终端中输入密码。如何在 Django 中实现相同的功能？这是我的views.py：

```
def upload_file(request):
    if request.method == 'POST':    
        #session_name = request.POST.get['session']
        url = request.POST.get('hostname', False)
        username = request.POST.get('username', False)
        source = str(username) + "@" + str(url)
        command = subprocess.Popen(['rsync', '--list-only', source], stdout=subprocess.PIPE).communicate()[0]
    return render_to_response('thanks.html', {'res':result, 'res1':command}, context_instance=RequestContext(request))
    else:
        pass
    return render_to_response('form.html', {'form': 'form'},  context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:37:51.480

我认为这个问题的标题有点误导，也许应该是“如何*传递*服务器密码......”。无论如何，如果我理解正确，您可以设置环境变量 RSYNC_PASSWORD：

```
command = subprocess.Popen(['rsync', '--list-only', source],
                           stdout=subprocess.PIPE,
                           env={'RSYNC_PASSWORD': my_password}).communicate()[0] 
```

注意，环境变量可能对其他系统用户可见

如果这让您感到害怕，您可以使用 rsync 选项`--password-file`（请参阅 rsync 手册）

还有一点：通过指定`env`调用者环境不再传递给 rsync 进程。

# javascript - 我怎样才能简单地使用这种数字格式验证正则表达式？

> ID：13306844
> 
> 赞同：2
> 
> 时间：2012-11-09T11:01:47.767
> 
> 标签：javascript, regex, regex-negation

所以，我有这个 if 语句：
`if (String(val).search(/^((\d+(((\,\d{3,})+)?)(\.\d+)?)|(\.\d+))$/) !== -1)`

其中说（据我所知）：
字符串必须以至少一位数字开头，或者以`.`.
如果字符串以数字开头，则字符串中可以选择使用逗号，只要逗号后跟至少三位数字即可。如果字符串中包含 a `.`，则后面必须至少跟一个数字。
只可以有一个人`.`

所以，像这样的字符串：

5
5.00
5000
5,000
5000.00
5,000.00

都会返回true

但是包含任何内容但`0-9 , .`格式错误的字符串将返回 false。所以像这样的字符串：

5,00
5,00.00
5.00.00
a5

现在，上述工作，但我想知道是否有任何方法可以简化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:07:26.620

您可以删除一些多余的括号：

```
^(\d+((\,\d{3,})+)?(\.\d+)?|\.\d+)$ 
```

类似的东西`(( ... )+)?`可以替换为: `( ... )*`，所以最终的正则表达式可能如下所示：

```
^(\d+(\,\d{3,})*(\.\d+)?|\.\d+)$ 
```

如果您想拒绝以下输入：

```
50000,000,000.0 
```

并且只允许：

```
5,000,000.0
50,000,000.0
500,000,000.0 
```

然后做这样的事情：

```
^(\d{1,3}(\,\d{3})*(\.\d+)?|\.\d+)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:09:08.833

我不认为你可以简化它，除了去掉一些括号，而且它可能还不够复杂。该模式还将允许格式错误的字符串，例如

```
50000,000,000.000000000 
```

# android - 如何在Android中做图像选框？

> ID：13306849
> 
> 赞同：-2
> 
> 时间：2012-11-09T11:02:06.823
> 
> 标签：android, scroll, imageview, horizontal-scrolling

我是 Android 编程新手，现在我正在尝试将图像放置在水平滚动视图中。

实际上我想做的是，我想显示需要从右到左自动滚动的图像数组。

到目前为止，我已经尝试如下

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <ImageView 
        android:id="@+id/image2"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:src="@drawable/icon"
        android:layout_centerHorizontal="true"
        android:layout_marginRight="5px"/>
</LinearLayout>
</HorizontalScroll> 
```

**活动档案——**

```
package com.myhorizontalScroll;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.widget.ImageView;

public class MyHorizontalScrollActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // declare a class field:
            final Handler h = new Handler();

            // later:
            final ImageView scroll=(ImageView)findViewById(R.id.image2);
            Thread t = new Thread(){
                public void run(){
                    int y = scroll.getScrollY();
                    int x = scroll.getScrollX();

                    while(y<1600){
                        // need final values to create anonymous inner class
                        final int X = x;
                        final int Y = y;
                        h.post(new Runnable() {
                            public void run() {
                                scroll.scrollTo(X, Y);
                            }
                        });
                        x++;
                        try {
                            sleep(1000/12);
                        } catch (InterruptedException e) {
                        }
                    }
                }
            };
            t.start();
    }
} 
```

现在图像视图从左到左；imageview 实际上位于左侧。

如何将图像视图放在右侧，我希望这种滚动需要连续完成。

我该如何继续呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:25:59.740

这就是我在我的一个应用程序中执行此操作的方式。这本质上用于显示喜欢帖子的用户的个人资料图片。您自然必须自己想办法，但我会尽力提供帮助。

首先，XML：

```
<LinearLayout
    android:id="@+id/linlaLikesStrip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:visibility="gone" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:text="LIKES BY:"
        android:textColor="#888888"
        android:textSize="14sp"
        android:textStyle="bold" >
    </TextView>

    <HorizontalScrollView
        android:id="@+id/horscoLikes"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true"
        android:overScrollMode="never"
        android:scrollbars="none" >

        <LinearLayout
            android:id="@+id/linlaLikes"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </LinearLayout>
    </HorizontalScrollView>
</LinearLayout> 
```

在我的 Java 代码中，我在全局范围内声明并强制转换它们，因此您必须做一些了解。

JAVA代码：

```
linlaLikes.removeAllViews();

for (int i = 0; i < arrLikes.size(); i++) {

    final getLikes newLikes = arrLikes.get(i);

    ImageView imgUsers = new ImageView(FeedDetails.this);

    // SET THE IMAGEVIEW DIMENSIONS
    int dimens = 45;
    float density = getResources().getDisplayMetrics().density;
    int finalDimens = (int)(dimens * density);

    LinearLayout.LayoutParams imgvwDimens = new LinearLayout.LayoutParams(finalDimens, finalDimens);
    imgUsers.setLayoutParams(imgvwDimens);

    // SET SCALETYPE
    imgUsers.setScaleType(ScaleType.CENTER_CROP);

    // SET THE MARGIN
    int dimensMargin = 4;
    float densityMargin = getResources().getDisplayMetrics().density;
    int finalDimensMargin = (int)(dimensMargin * densityMargin);

    LinearLayout.LayoutParams imgvwMargin = new LinearLayout.LayoutParams(finalDimens, finalDimens);
    imgvwMargin.setMargins(finalDimensMargin, finalDimensMargin, finalDimensMargin, finalDimensMargin);

    // SET PADDING
//              imgUsers.setPadding(finalDimensMargin, finalDimensMargin, finalDimensMargin, finalDimensMargin);

    // DISPLAY THE IMAGES USING THE PROFILELOADER CLASS
    proLoader.DisplayImage(newLikes.getUserProfilePicture(), imgUsers);

    // ADD THE NEW IMAGEVIEW WITH THE PROFILE PICTURE LOADED TO THE LINEARLAYOUT
    linlaLikes.addView(imgUsers, imgvwMargin);

    imgUsers.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent showProfile = new Intent(getApplicationContext(), WallPost.class);
            showProfile.putExtra("USER_ID", newLikes.getUserID());
            showProfile.putExtra("USER_PROFILE", "USER_PROFILE");
            startActivity(showProfile);
        }
    });
} 
```

一点解释：

1.  `arrLikes`是一个`ArrayList`包含个人资料图片的。我用`arrLikes.size()`来`for loop`获得正确的数字。
2.  我没有在 XML 中硬编码 ImageView（显然，因为所需的数量未知），而是在运行时动态创建必要的数量。
3.  然后遵循很多东西来设置它们的大小，`ImageViews`然后设置`Margin`它们之间的值。
4.  最后，我使用@Fedor 的延迟加载在新创建的`ImageViews`.

希望这可以帮助。并随时询问您是否对上述任何问题有任何困难。

# extjs - 如何从 Ext.Ajax.request 中获取价值

> ID：13306851
> 
> 赞同：5
> 
> 时间：2012-11-09T11:02:09.340
> 
> 标签：extjs

```
Ext.Ajax.request({
   url:'abc/abc/abc',
   success:  function(response){
      var result = Ext.decode(response.responseText);
      var value=result.roles;
   }
}); 
```

如何从 ext.ajax.request 中获取“value=result.roles”？

我正在尝试使用一个动作。

```
Ext.Ajax.request({
   url:'abc/abc/abc',
   success: function(response){
      var result = Ext.decode(response.responseText);
      var value=result.roles;
      getValue(value);                    
   }
});

function getValue(value) {
   return value;
}; 
```

但我仍然无法获得价值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T11:04:09.867

### 你需要使用这个：

```
success: function ( result, request ) {
                      var jsonData = Ext.util.JSON.decode(result.responseText);
                      var resultMessage = jsonData.data.result;
                     fn_AKExt(resultMessage, ‘Success’);
               },
failure: function ( result, request ) {
                   var jsonData = Ext.util.JSON.decode(result.responseText);
                  var resultMessage = jsonData.data.result;
                  fn_AKExt(resultMessage, ‘Error’);
} 
```

查看[如何使用带有响应文本的 Ext.Ajax.Request](http://akdora.wordpress.com/2009/02/06/how-to-use-extajaxrequest-with-response-text/)了解更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:27:19.673

```
$.ajax({
async: false, 
type: "GET",
url :"url", 
data :"",  
success:(data){ 
functionOutSideAjax(parameter);   
}  
});
functionOutSideAjax(var){  
useThisVar = parameter;  
} 
```

在 ajax 响应之外创建你的 function()，然后从你的 ajax 响应中传递所需的值，然后你可以在 javascript 文件中的任何地方使用“useThisVar”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-18T09:22:18.557

通常，AJAX 请求是异步的。这就是为什么我们没有从请求中得到价值。如果我们设置 async:false，那么我们可以得到这个值。

```
var cnt;
Ext.Ajax.request({
    method: 'POST',
    async:false,
    url: '...',
    params: {},
    success: function (response) {
        var cnt= Ext.decode(response.responseText);
    }
});
return cnt; 
```

# c++ - C++：如何快速将 char 文件读入 char 数组？

> ID：13306854
> 
> 赞同：0
> 
> 时间：2012-11-09T11:02:27.043
> 
> 标签：c++

我正在努力学习 C++。我正在将一个字符文件读入一个字符数组，如下所示：

```
#include <iostream>
#include <fstream>
#include<conio.h>
#include <stdint.h>

using namespace std;

int main () {
  char c, str[256];
  ifstream is;

  cout << "Enter the name of an existing text file: ";
  cin.get (str,256);

is.open (str); 

int32_t fileSize = 0;
if(is.is_open())
{
    is.seekg(0, ios::end ); 
    fileSize = is.tellg();
}
cout << "file size is " << fileSize << "\n";

is.close() ;

is.open (str); 

char chararray [fileSize] ;

  for(int i = 0 ; i < fileSize ; i++)
  {
    c = is.get();  
    chararray [i] = c ;
  }

for(int i = 0 ; i < fileSize ; i++)
  {
    cout << chararray [i];  
  }

  is.close();           
   getch();
  return 0;
} 
```

但是这段代码读取大字符文件很慢。现在，如何快速将 char 文件读入 char 数组？在 Java 中，我通常使用内存映射缓冲区。是否也在 C++ 中。抱歉，我是 C++ 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:59:08.523

如何将 char 文件读入 char 数组：

```
#include <iostream.h>
#include <fstream.h>
#include <stdlib.h>
#include <string.h>
int main () 
{

       char buffer[256];
       long size;

       ifstream infile ("test.txt",ifstream::binary);

       // get size of file
       infile.seekg(0,ifstream::end);
       size=infile.tellg();
       infile.seekg(0);

       //reset buffer to ' '
       memset(buffer,32,sizeof(buffer ));

       // read file content into buffer
       infile.read (buffer,size);

       // display buffer
        cout<<buffer<<"\n\n";

       infile.close();     

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:09:09.280

您可以使用 is.read(chararray, fileSize)。

# html - CSS 和 Wordpress 中的菜单设计：缩进项目但突出显示整行

> ID：13306855
> 
> 赞同：0
> 
> 时间：2012-11-09T11:02:32.880
> 
> 标签：html, css, wordpress, menu

自从我完成任何 HTML/CSS 工作以来已经很长时间了，但我自愿帮助当地一所学校在 WordPress 中重建其网站。一些长期休眠的知识又回到了我的身边，但我一直在尝试重新创建这个菜单设计：

![在此处输入图像描述](../Images/27474037ce2c84d441e26715ddee11f9.png)

这是在屏幕的左侧。

Wordpress 将项目创建为 UL，其中子项目具有嵌套的 UL。我已经破解了这个在每个项目之间插入一个红色的 HR。到目前为止，相关的 CSS 是：

（对于包含菜单的列）

```
#column-left {
    width: 240px;
    float: left;
    background: #f4d2d4;
    height: 100%;
} 
```

（对于菜单的外部 UL）

```
#menu-list{
    padding-top: 36px;
    padding-left: 34px;
    list-style: none;
} 
```

（对于菜单中的链接）

```
#menu-list a {
    font-size: 16pt;
    text-decoration: none;
    color: #c61f26; 
} 
```

（对于子项目）

```
.children {
    padding-left: 37px;
    list-style: none;
    color: black;
} 
```

（用于当前页面高亮）

```
li.current_page_item a {
    background-color: #c61f26;
    color: white !important; 
} 
```

当前生成的 HTML wordpress 如下所示：

```
<ul id="menu-list">
        <li class="page_item page-item-5 current_page_item"><a href="http://development.newbridge.bathnes.sch.uk/"><hr class="hr-red"/>Home</a></li>
<li class="page_item page-item-13"><a href="http://development.newbridge.bathnes.sch.uk/news/"><hr class="hr-red"/>News</a></li>
<li class="page_item page-item-16"><a href="http://development.newbridge.bathnes.sch.uk/school-information/"><hr class="hr-red"/>School Information</a>
<ul class='children'>
    <li class="page_item page-item-20"><a href="http://development.newbridge.bathnes.sch.uk/school-information/calendar/"><hr class="hr-red"/>Calendar</a></li>
</ul>
</li>
</ul> 
```

我对这个设置有各种问题，我不知道如何克服它们。收到的建议很感激。

1) 列的背景颜色不会一直延伸到页面下方，而只是大到足以覆盖菜单项。

2）子项目以红色文本出现，而不是黑色。

3) 子项之间的 HR 缩进到与子项文本相同的深度，而不是与父项文本相同的深度。

4) 高亮文本的红色背景只覆盖了单词，而不是整行。这是最令人头疼的问题，因为我不确定如何保持填充并仍然突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:40:55.887

我做了一个[小提琴](http://jsfiddle.net/Astraldiva/pJ3Sv/2/)来展示你的例子。它使用 first-child 和 last-child 伪类来设置正确的边界。去掉 hr 标签，你真的不需要那个。改用边框。

这是我用于演示的 html（添加了一些列表项）：

```
<div id="column-left">
    <ul id="menu-list">
        <li class="page_item page-item-5 "><a href="http://development.newbridge.bathnes.sch.uk/">Home</a></li>
        <li class="page_item page-item-13 current_page_item"><a href="http://development.newbridge.bathnes.sch.uk/news/">News</a></li>
        <li class="page_item page-item-16"><a href="http://development.newbridge.bathnes.sch.uk/school-information/">School Information</a>
            <ul class='children'>
                <li class="page_item page-item-20"><a href="http://development.newbridge.bathnes.sch.uk/school-information/calendar/">Calendar</a>  </li>
                <li class="page_item page-item-20"><a href="http://development.newbridge.bathnes.sch.uk/school-information/calendar/">Calendar</a></li>
                <li class="page_item page-item-20"><a href="http://development.newbridge.bathnes.sch.uk/school-information/calendar/">Calendar</a></li>
           </ul>
        </li>
        <li class="page_item page-item-16"><a href="http://development.newbridge.bathnes.sch.uk/school-information/">School Information</a></li>
    </ul>
</div> 
```

CSS：

```
#column-left {
width: 240px;
float: left;
background: #f4d2d4;
padding-top: 20px;
}

#menu-list{
list-style: none;
}

#menu-list li {
padding-left: 20px;
}

#menu-list li:first-child a {
border-top: 2px solid #c61f26;
border-bottom: none;
}

#menu-list a {
border-bottom: 2px solid #c61f26;
display:block;
height: 100%;
font-size: 16pt;
text-decoration: none;
color: #c61f26;
padding: 5px 0;

}

#menu-list li ul.children {
list-style: none;
color: black;
padding: 0;
}

#menu-list li ul.children li {
list-style: none;
padding: 0; 
}

#menu-list li ul.children li a {
border-bottom: 1px solid #fff;
color: #000;
text-indent: 30px;
}

#menu-list li ul.children li:first-child a{
border-top: none;
}

#menu-list li ul.children li:last-child a{
border-bottom: 2px solid #c61f26;
}

li.current_page_item {
background-color: #c61f26;
border: none;    
}

li.current_page_item a {
color: white !important; 
} 
```

希望能帮助到你。​ ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T12:52:17.270

我们可以通过简单地将类添加到该菜单来创建带有图像的导航菜单。

[![在此处输入图像描述](../Images/b4ec441b6644006edcdea3840aded02e.png)](https://i.stack.imgur.com/PXe89.png)

[![在此处输入图像描述](../Images/031582aa669627b8e93bb1e8195d172d.png)](https://i.stack.imgur.com/HVWQN.png) [![在此处输入图像描述](../Images/efcb74ef7d47ff660779518270ec7514.png)](https://i.stack.imgur.com/QiHum.png)

[![在此处输入图像描述](../Images/91f9fd78d98b67400b66db5198aa05b1.png)](https://i.stack.imgur.com/Mgm37.png)

# java - 自动调整位图图像的亮度、对比度和锐度

> ID：13306858
> 
> 赞同：5
> 
> 时间：2012-11-09T11:02:44.000
> 
> 标签：java, android, image-processing, bitmapimage

正如标题本身所暗示的那样……我必须首先自动调整对比度、亮度和锐度，然后如果需要，我必须提供手动调整搜索栏。

**是否有可用于自动调整的库**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:28:37.980

[**OpenCV**](http://opencv.willowgarage.com/wiki/)可以执行这样的操作。

[这是对比度和亮度的教程](http://docs.opencv.org/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html)。

[OpenCV 带有 android 端口](http://opencv.org/platforms/android.html)，以及一个相当活跃的社区。

[cvEqualizeHist](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_equalization/histogram_equalization.html)是一个很好的起点，它将自动调整单通道图像 (BW) 的亮度和对比度。

你可以找到非常简单的方法来找到自动调整，但我认为它仍然需要你做一些工作:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:06:50.777

您可以像使用库一样使用 ImageJ

# server-variables - 如何将值（存储在 PHP 服务器变量中）存储到在将 crossrider 安装到浏览器中时制作的扩展

> ID：13306862
> 
> 赞同：1
> 
> 时间：2012-11-09T11:03:28.620
> 
> 标签：server-variables, crossrider

当用户将扩展程序安装到他的浏览器时，有什么办法可以将值（存储在服务器变量上）存储到在 crossrider 上创建的扩展程序中？这是用户启动浏览器插件安装时的事情！

假设这样的情况：我做了一个浏览器扩展，并在我的网站上显示下载和安装扩展的链接。现在我需要存储一个取自 php 的值并将其存储在本地扩展中的某个位置，除非卸载扩展本身，否则用户无法删除该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:50:32.507

只要可以使用 URL 获取服务器变量（例如，创建一个简单地返回服务器变量值的 php 页面），您就可以在扩展中执行此操作。

**步骤1**

* * *

根据您是否需要处理返回的数据，您可以使用以下方法之一来获取和保存值。

**注意**：我建议在您的文件中实施此步骤，`background.js`以便在扩展首次运行时仅执行一次。

**方法一**【*响应不需要处理*】：使用[appAPI.db.setFromRemote()](http://docs.crossrider.com/#!/api/appAPI.db-method-setFromRemote)方法获取值并保存。

```
var serverVar = appAPI.db.get('serverVar');
if (!serverVar) {
    appAPI.db.setFromRemote(
        "<URL>", // URL to fetch the server variable
        'serverVar' // Name of key to use for saving the value
    );
} 
```

**方法二**【*响应确实需要处理*】：使用[appAPI.request.get()](http://docs.crossrider.com/#!/api/appAPI.request-method-get)方法取值，处理响应，然后使用appAPI.db.set()方法【更多信息见http:// docs.crossrider.com/#!/api/appAPI.db-method-set] 保存值：

```
var serverVar = appAPI.db.get('serverVar');
if (!serverVar) {
    appAPI.request.get(
        "<URL>", // URL to fetch the server variable
        function(response, headers) { // onSuccess callback function
            // process the reponse as required
            // e.g. trim leading and trailing spaces
            var myProcessedData = response.replace(/^\s\s*/, '').replace(/\s\s*$/, '');

            // save data to local db
            appAPI.db.set('serverVar', myProcessedData);
    });
} 
```

**第2步**

* * *

将服务器变量保存到本地数据库后，可以使用 appAPI.db.get() 方法从扩展后台范围或页面范围内检索它 [有关更多信息，请参阅 http://docs.crossrider.com/ #!/api/appAPI.db-method-get]，如下：

```
var serverVar = appAPI.db.get("serverVar"); 
```

# asp.net-mvc - MVC 异步，无需等待任务完成

> ID：13306866
> 
> 赞同：1
> 
> 时间：2012-11-09T11:03:43.827
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, asynchronous

我发出 ajax 请求来调用控制器操作，如下所示：

控制器：

```
 [AsyncTimeout(8000, Order = 3)]
    [HandleError(ExceptionType = typeof(TimeoutException), Order = 4, View = "TimeoutError")]
    public async Task<JsonResult> RemovePackageAsync(CancellationToken cancellationToken, string packageId, ICollection<int> ids)
    {
        PackageRemoveItem removeItem = new PackageRemoveItem()

        .............blah blah blah

        await this.deviceRepository.RemovePackageAsync(removeItem);
        return  this.Json(JsonConvert.SerializeObject(removeItem.Machines));
    } 
```

方法：

```
 public async Task RemovePackageAsync(PackageRemoveItem removeItem, CancellationToken cancelToken = default(CancellationToken))
    {
        await Task.Run(() =>
        {
            int[] machines = removeItem.Machines.Keys.ToArray();
            .......

        });
    } 
```

但是，当我在调试中运行它时，我的 ajax 响应会等到我的“RemovePackageAsync”完成。我在这里想要实现的是让这个方法在不同的线程上调用，让它执行而不是等待它完成，而是立即从控制器获得“真实”响应。

ajax 调用 => 控制器 => 在新线程上调用方法，不要等待它完成但返回 true => 让方法运行只要它需要。我可以做其他事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:17:44.753

异步控制器仅*在*Web 服务器内部异步工作，以从线程池中释放线程以处理并发请求。浏览器仍会同步等待您的操作返回结果。

你需要的是一个标准的控制器动作，它只是产生一个线程或任务并立即返回。

但是这样你就不能返回任何结果数据。

# c++ - MPI_Sendrecv 后其他进程挂起

> ID：13306867
> 
> 赞同：0
> 
> 时间：2012-11-09T11:03:43.967
> 
> 标签：c++, openmpi

我认为使用`MPI_Sendrecv`

```
MPI_Sendrecv(&ballPos, 2, MPI_INT, FIELD, NEW_BALL_POS_TAG, &ballPos, 2, MPI_INT, winner, NEW_BALL_POS_TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE); 
```

但我只注意到根（接收方继续运行？）。在 Sendrecv`cout`之前和之后产生：

```
0 b4 sendrecv
2 b4 sendrecv
4 b4 sendrecv
1 b4 sendrecv
3 b4 sendrecv
5 b4 sendrecv
0 after sendrecv 
```

在 sendrecv 之前所有进程都正常，但之后只有 root 解除阻塞。

**[完整来源](https://gist.github.com/4039617)：见第 147 行**

**更新**

结果应该类似于下面

```
if (rank == winner) {
    ballPos[0] = rand() % 128;
    ballPos[1] = rand() % 64;
    cout << "new ball pos: " << ballPos[0] << " " << ballPos[1] << endl;
    MPI_Send(&ballPos, 2, MPI_INT, FIELD, NEW_BALL_POS_TAG, MPI_COMM_WORLD);
} else if (rank == FIELD) {
    MPI_Recv(&ballPos, 2, MPI_INT, winner, NEW_BALL_POS_TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:24:19.220

发布的发送数量应等于发布的接收数量。在您的情况下，所有等级都发送到等级`FIELD`并从等级接收`winner`，包括`FIELD`和`winner`：

```
Rank       Sends to  Receives from
----------------------------------
0 (FIELD)  FIELD     winner
1          FIELD     winner
2          FIELD     winner
...        ...       ...
winner     FIELD     winner
...        ...       ...
numprocs-1 FIELD     winner 
```

（这样的表格有时会非常有用）

因此`FIELD`应该接收`numprocs`消息，但它只执行`MPI_Sendrecv`一次，因此`numprocs-1`调用`MPI_Sendrecv`将无法完成它们的发送。也是如此`winner`。它应该发送`numprocs`消息，但由于它只执行`MPI_Sendrecv`一次，因此只发送一条消息，因此`numprocs-1`调用`MPI_Sendrecv`将无法完成它们的接收。

还有另一个错误。MPI 标准要求发送和接收缓冲区是不相交的（即它们不应重叠），而您的代码并非如此。您的发送和接收缓冲区不仅重叠，而且是同一个缓冲区。如果要在同一个缓冲区中执行交换，MPI 提供了该`MPI_Sendrecv_replace`操作。

我不确定你想用这个`MPI_Sendrecv`语句实现什么，但我强烈怀疑你需要把它放在一个`if`语句中。

# ruby-on-rails - ruby on rails 通过重定向发送值

> ID：13306874
> 
> 赞同：0
> 
> 时间：2012-11-09T11:03:59.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, redirect

```
 @id =params[:ad]
   @empreasset = params[:check_box_id]
    case params[:commit]
    when 'delete'
      @empreasset.each do |empreasset|
        @em = Empreasset.find(empreasset)
        @em.destroy
  end
  @size=@empreasset.size
  @message = "#{@size} Employee asset(s) deleted sucessfully"
  respond_to do |format|

      format.html {redirect_to :action => :index, :id => @empreasset.ad}
      format.json {head :no_content}

end 
```

这里 (@empreasset.ad=@id) 逻辑也可以 format.html {redirect_to :action => :index, :id => @id} 也可以。但是发生错误..在控制器索引中我必须发送 id 的值。因为@empreasset.ad 对所有数据都具有相同的值。我需要发送一个@empreasset.ad 值。但是由于@empreasset.ad 在数组中，这怎么可能。我怎样才能只选择@empreasset.ad 的一个值并发送

重定向：id => @empreasset.ad？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:13:08.753

@empreasset 是一个数组，对吧？要发送此数组的一个值，请使用 @empreasset.first.ad 这将获取数组第一个元素的属性 ad。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:21:41.563

再写一行。empreasset=@empreasset.first

然后

format.html {redirect_to :action => :index, :id => empreasset.ad}

# c# - linq中的组合查询

> ID：13306876
> 
> 赞同：1
> 
> 时间：2012-11-09T11:04:05.360
> 
> 标签：c#, linq, linq-to-entities

我有两张桌子

1.  用户请求
2.  用户朋友

我想获取所有关于我的 userfriendrequests 数据，但排除那些存在于我的 userfriends.FriendID 列表中的 userfriendrequests.UserID

我的 ID 是 1，我想找回我的好友请求。

userfriendrequests-table 我的好友请求列表

```
UserID          FriendID
    2               1
    3               1
    4               1
    5               1
    6               1
    7               1 
```

userfriends-table 我的朋友列表

```
UserID          FriendID
    1               22
    1               23
    1               33
    1               55
    1               2
    1               3 
```

结果应该是：

```
userfriendrequests
UserID          FriendID
    4               1
    5               1
    6               1
    7               1 
```

现在我怎样才能在 linq 中仅在单个查询中执行此操作？

这是我迄今为止尝试过的：使用双重查询

```
List<FriendRequest> myFriendRequest = new List<FriendRequest>();
using (dbasecoreEntities dbase = Logic.Utility.dbaseContext())
{
    var ufr = (from uf in dbase.userfriendrequests
               where uf.FriendID == details.UserID && !uf.IsBlocked && !uf.IsIgnored && uf.UserID != details.UserID
               select uf).OrderBy(i => i.RequestDate).Skip(skip).Take(take).ToList();

    var myfriends = (from frnd in dbase.userfriends where frnd.UserID == details.UserID select frnd.FriendID).ToList();
    ufr = ufr.Where(i => !myfriends.Any(j => j == i.UserID)).ToList();

    myFriendRequest = (from userFriend in ufr
                   select new FriendRequest(userFriend, details.GMTTimeZone)).ToList();
}

return myFriendRequest; 
```

使用单一查询。但这需要很长时间才能返回结果。

```
using (dbasecoreEntities dbase = Logic.Utility.dbaseContext())
{
    var list = (from uf in dbase.userfriendrequests.Where(i => i.FriendID == details.UserID && !i.IsBlocked && !i.IsIgnored && i.UserID != details.UserID).AsEnumerable()
                where !dbase.userfriends.Where(i => i.UserID == details.UserID).Any(j => j.UserID == uf.UserID)
                select new FriendRequest(uf)).OrderBy(i => i.RequestDate).Skip(skip).Take(take).ToList();

    return list;
} 
```

在这里我使用 AsEnumerable 所以我可以直接使用 select new FriendRequest(uf)

10 条记录的 DOUBLE QUERY 用时不到 7 秒，100 条记录用时超过一分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:10:42.280

做组加入。如果没有为当前用户找到朋友，则选择用户

```
var query = from uf in dbase.userfriendrequests
            join frnd in dbase.userfriends 
                 on uf.UserID equals frnd.FriendID into g
            where !g.Any()
            select uf; 
```

而不是`!g.Any()`你可以使用`g.Count() == 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:30:47.187

认为它会产生相同的性能影响，但可以提供

```
var query = dbase.userfriendsrequests.Select(user => new 
                                             { 
                                              UserID = user.FriendID,
                                              FriendID = user.UserID
                                             }
                 .Except(
                   dbase.userfriends.Select(frnd => new 
                                             { 
                                              UserID = frnd.FriendID,
                                              FriendID = frnd.UserID
                                             }); 
```

去吧

# linux - 当计算机切换到睡眠模式时，TCP 连接会发生什么？

> ID：13306881
> 
> 赞同：6
> 
> 时间：2012-11-09T11:04:21.337
> 
> 标签：linux, windows, networking, tcp, power-management

我想知道当计算机进入睡眠状态时 TCP 连接会发生什么。

Linux 和 Windows 在 TCP 的实现和睡眠模式的处理方面有什么不同吗？

所以，问题是：*连接是否在睡眠模式下终止？如果不是 - 会发生什么？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:57:27.573

当计算机进入睡眠模式时，网络会话终止，因为网络接口也将关闭，因此没有传输或接收。TCP 是可靠连接，期望对方响应握手过程，ACK 和其他请求和休眠节点将无法做到这一点。

# php - 文本字段结果为超链接

> ID：13306883
> 
> 赞同：-1
> 
> 时间：2012-11-09T11:04:34.463
> 
> 标签：php, html, hyperlink, textfield

我已经制作了这张表格，您可以在其中写下您的姓名、姓氏、电话和电子邮件。使用 HTML 和 PHP。

```
name: "textfield here"
lastname: "textfield here"
phone: "textfield here"
email: "textfield here" 
```

我的PHP代码：

```
 echo "<H1>Hello " .$_POST['name']. " " .$_POST['surname']; 

 echo "I'm calling you at " .$_POST['telephone']. " or email you at ".$_POST['email']; 
```

如何使结果`email`作为超链接出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:13:39.987

要创建链接，请使用`<a>`标签，对于电子邮件链接，您可以将其设置`href`为`mailto:xyz`.

[邮寄参考](http://en.wikipedia.org/wiki/Mailto)。

还要考虑研究 XSS，因为您的代码很容易受到攻击。注意下面的使用`htmlentities()`来防止 XSS。

```
echo "<h1>Hello " .htmlentities($_POST['name']). " " .htmlentities($_POST['surname']) . "</h1>"; 

echo "<p>I'm calling you at " .htmlentities($_POST['telephone']). " or email you at <a href=\"mailto:" . htmlentities($_POST['email']) . "\">".htmlentities($_POST['email']) . "</a></p>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:07:49.637

```
echo "I'm calling you at " .$_POST['telephone']. " or email you at <a href=\"mailto:{$_POST['email']}\">{$_POST['email']}</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:07:53.443

邮递员？

并不是说我喜欢它（你会发现很难找到喜欢的人）......

```
echo "I'm calling you at " .$_POST['telephone']. " or email you at <a href='mailto:".$_POST['email']."'>".$_POST['email']."</a>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:08:01.263

使用这个：

```
 echo "I'm calling you at " .$_POST['telephone']. " or email you at 
    <a href=\"mailto:".$_POST['email'].">" $_POST['email']."</a>"; 
```

# java-ee-6 - MessageDriven Bean：Java EE 6 中的 MessageDrivenContext#setRollbackOnly() 是否仍然需要？

> ID：13306884
> 
> 赞同：0
> 
> 时间：2012-11-09T11:04:34.743
> 
> 标签：java-ee-6, ejb-3.1, message-driven-bean

我有一个消息驱动 Bean (EJB 2.1)，它执行以下操作：

```
public void onMessage(javax.jms.Message msg) {
try{
...
} catch (JMSException e) {
        e.printStackTrace();
       getMessageDrivenContext().setRollbackOnly();
} 
```

我想将这样的 bean 转换为 EJB 3.1，我想知道是否仍然需要 setRollbackOnly() 显式调用（以及因此在 bean 中注入 MessageDrivenContext 资源）？换句话说，抛出JMSException时容器不会自动回滚事务吗？如果我省略这样的方法调用会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:06:01.967

它仍然是必需的。JMSException 不是一个特例。它不会导致事务回滚。如果您省略`setRollbackOnly`并且没有其他代码部分导致回滚，则事务最终被提交。

# php - PHP 中的命名空间声明 (5.3.5)

> ID：13306885
> 
> 赞同：0
> 
> 时间：2012-11-09T11:04:37.477
> 
> 标签：php, namespaces, include

好的，我是命名空间的新手，这是场景......我有 2 个文件

库/class.mysql.inc.php

```
class MySQL{

} 
```

类/class.mysql.inc.php

```
require_once('libs/class.mysql.inc.php'); 
interface MySQLTemplate{
}
class MySQLWrapper extends MySQL implements MySQLTemplate{
} 
```

好的，这是我的问题。我如何能够将 MySQLWrapper 重命名为 MySQL？显然'class MySQL extends MySQL'不可能发生。在需要文件之前，我似乎也无法声明命名空间。（好吧，我可以，但它不接受命名空间）。我也不想碰 libs/class.mysql.inc.php 文件（如果有的话）。

有什么提示吗？提示？这里有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:40:17.420

无论您需要在哪里引用，都需要带有关键字`MySQLWrapper`的此类：[`use`](http://php.net/manual/en/language.namespaces.importing.php)

```
use MySQLWrapper as MySQL;

//do your stuff with MySQL as an alias 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:17:21.237

好的，看来您只能在文件中定义名称空间，任何包含都将被忽略。我通过在文件顶部声明一个随机命名空间来解决它（PHP 喜欢将它放在其他任何东西之前）。然后因为包含文件，所以 inlcude 类的命名空间是全局的。所以我让它工作：

库/class.mysql.inc.php

```
class MySQL{

} 
```

类/class.mysql.inc.php

```
namespace Libs;
require_once('libs/class.mysql.inc.php'); 
namespace App;
interface MySQLTemplate{
}
class MySQL extends \MySQL implements MySQLTemplate{
} 
```

希望这对其他人有帮助......我有一段时间摸不着头脑，因为我不了解它的行为。

# c# - 自定义控件事件处理程序问题

> ID：13306886
> 
> 赞同：0
> 
> 时间：2012-11-09T11:04:37.363
> 
> 标签：c#, winforms, exception, custom-controls, designer

所有，我有一个使用单例模式调用的自定义用户控件。该控件可以显示或隐藏并更新 UI（以提供显示/隐藏控件选项）我在控件构造函数中设置了一个事件处理程序。

```
this.VisibleChanged += new EventHandler(ResultsControl_VisibleChanged); 
```

并且事件处理程序是

```
void ResultsControl_VisibleChanged(object sender, EventArgs e)
{
    // Get reference to Show/Hide button.
    var showHideResults = ((SqlEditorForm)this.ParentForm).ShowHideResultsButton;
    if (instance != null)
        showHideResults.Enabled = true;

    // Change the status.
    showHideResults.Text = this.Visible ? 
        "&Hide Query Results" : 
        "&Show Query Results";
    showHideResults.Image = this.Visible ?
        Properties.Resources.HideResultsVS201224 :
        Properties.Resources.ShowResultsVS201224;
} 
```

问题在于我获取`ShowHideResultsButton`. 我收到设计师抛出的以下错误...

![设计师错误](../Images/062fa8c2cf54590d12c173df4c0547d2.png)

我在这里做错了什么？

谢谢你的时间。

* * *

*编辑。我似乎已经通过移动*

```
this.VisibleChanged += new EventHandler(ResultsControl_VisibleChanged); 
```

*从构造函数到控件的 Load 事件。所以现在的问题变成了：这是一个有效的修复吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:17:53.463

在您设计时，您`UserControl`没有参考`SqlEditorForm`. 只有当您使用设计器或代码时，它的`ParentForm`属性才会变为。在此之前，IDE 只知道它是 Form 类型。你为什么不在里面实现你的事件处理程序？`SqlEditorForm``ResultsControl``SqlEditorForm``ResultsControl_VisibleChanged``SqlEditorForm`

# java - 将matlab输入（stdin）连接到java

> ID：13306897
> 
> 赞同：1
> 
> 时间：2012-11-09T11:05:15.960
> 
> 标签：java, matlab, redirect, stdin

我正在从 matlab 调用一个 java 函数。此函数必须获取用户输入。我不确定如何将 matlab 命令窗口（从用户放置输入的位置）连接到 Java。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:03:27.863

如果java方法采用String，即

```
public void inputToJava(String input)
{
    // Do Something...
} 
```

然后在 matlab 中，使用[`input`](http://www.mathworks.co.uk/help/matlab/ref/input.html)命令从用户那里获取一个字符串。

```
responseString = input('Please enter a string: ', 's');
myJavaObject.inputToJava(responseString); 
```

# java - 安卓：java.lang.NoClassDefFoundError

> ID：13306898
> 
> 赞同：0
> 
> 时间：2012-11-09T11:05:16.850
> 
> 标签：java, android

我按照以下步骤导入 .jar：

1.  在文件夹**libs**下到您的项目根文件夹中，我将我的 Jar 文件复制到此文件夹中
2.  并右键单击 Jar 文件，然后选择**Build Path > Add to Build Path**。

jar 出现在 Android 依赖项下。

但我有这个错误： **java.lang.NoClassDefFoundError: mypackage.MyClass**

请帮我。我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:52:59.163

如果您在不同的系统中编译 JAR，那么您可能使用的是不同的 JRE。在两台计算机上尝试 javac -version ，如果它们不同，则可以针对目标 JRE 进行修复，例如：

```
javac -target 1.6 -source 1.6 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:09:52.830

您还必须将其添加到构建路径上的“订购和导出”选项卡中。右键单击您的项目-> 构建路径-> 配置构建路径（假设您在 Eclipse.

# sql - 舍入数据库表中的所有数字

> ID：13306899
> 
> 赞同：2
> 
> 时间：2012-11-09T11:05:20.750
> 
> 标签：sql, rounding

我需要将表格列中的所有数字四舍五入到小数点后 2 位（即我需要 2.109999 变为 2.11）

实现这一目标的最佳方法是什么？（它只需要作为一次性操作完成）

我正在使用 sql server 2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:08:58.257

```
UPDATE table SET column = ROUND(column, 2) 
```

如果您需要永久修改号码。除此以外：

```
SELECT ROUND(column, 2) FROM table 
```

保持现有值不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:08:21.150

来自谷歌：http: [//msdn.microsoft.com/en-us/library/ms175003.aspx](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

```
select round(foo, 2); 
```

虽然这只是猜测..

# java - Java UnsatisfiedLinkError Mac OSX

> ID：13306909
> 
> 赞同：1
> 
> 时间：2012-11-09T11:06:00.000
> 
> 标签：java, macos, unsatisfiedlinkerror

我有一个 Java 应用程序，可以在 OSX 上与 Java 1.6 配合使用。但是，一旦您更新到 java 最新版本（1.7），它就会停止工作并给出以下错误：

```
java.lang.UnsatisfiedLinkError: /Users/lvarela/Library/Application Support/Oracle/Java/Deployment/cache/6.0/41/3937a929-7be268b9-n/libpteidlibJava_Wrapper.dylib: dlopen(/Users/lvarela/Library/Application Support/Oracle/Java/Deployment/cache/6.0/41/3937a929-7be268b9-n/libpteidlibJava_Wrapper.dylib, 1): Library not loaded: @loader_path/libpteidcommon.3.5.5.dylib
  Referenced from: /Users/lvarela/Library/Application Support/Oracle/Java/Deployment/cache/6.0/41/3937a929-7be268b9-n/libpteidlibJava_Wrapper.dylib
  Reason: image not found
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1838)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at pt.gov.cartaodecidadao.applet.nativelibs.LibLoader.loadLibraryNG(LibLoader.java:55)
    at pt.gov.cartaodecidadao.applet.util.UtilApplet.init(UtilApplet.java:110)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722) 
```

我没有开发这个应用程序，而且我对 Java 还是很陌生。所以我对可能导致这个问题的原因一无所知。这是一个在线应用程序，但是我使用码头服务器在本地运行它。

你们中的任何人都可以帮我解决这个问题吗？

# objective-c - 编辑文本视图时如何禁用滚动？

> ID：13306913
> 
> 赞同：0
> 
> 时间：2012-11-09T11:06:06.893
> 
> 标签：objective-c, ios, xcode, uiscrollview, uitextview

我有一个 UIScrollView，中间有一个小 UITextView，底部有一个 Button。当我按下按钮时，我想编辑 UItextView 然后滚动到顶部。问题是，当我按下按钮时，UITextView 在代码中被编辑，然后它会自动滚动到这个 UITextView 的开头，并忽略我滚动到顶部的代码行。

```
- (IBAction)SubmitForm:(id)sender {
    if ([Titre.text length] == 0 || [TypeIntervention.text length] == 0 || [Client.text length] == 0) {
      ErrorMsg.text = @"test";
      [self.Scroll setContentOffset:CGPointMake(self.Scroll.contentOffset.x, 0)animated:YES];
    }
    else {
      DoneMsg.text = @"test";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:12:59.750

实现**UITextView 委托**并使用UIScrollView 的**scrollEnabled**属性

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView{

    self.Scroll.scrollEnabled = NO;

    return YES;
}
- (void)textViewDidBeginEditing:(UITextView *)textView {

    self.Scroll.scrollEnabled = NO;

}

- (BOOL)textViewShouldEndEditing:(UITextView *)textView{

    self.Scroll.scrollEnabled = YES;
    return YES;
}
- (void)textViewDidEndEditing:(UITextView *)textView{

    self.Scroll.scrollEnabled = YES;;
} 
```

# c - ((void *) -1) 是有效地址吗？

> ID：13306914
> 
> 赞同：19
> 
> 时间：2012-11-09T11:06:08.150
> 
> 标签：c, void-pointers

[Linux`man shmat`](http://man7.org/linux/man-pages/man2/shmat.2.html)逐字逐句：

> 返回值
> 
> [...] on error (void *) -1 返回，并*设置 errno*以指示错误的原因。

^(（POSIX 使用[略有不同的措辞](http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmat.html)来表达相同的意思。）)

是否有任何`(void *) -1`可能不是有效地址的强制性规则或定义（标准？）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T11:12:14.030

`0xffffffff`在技​​术上是 32 位环境中的有效地址，但在大多数操作系统（当然是 Linux/Windows）上将位于地址空间的保留内核部分中。这意味着在用户模式进程中，将其用作错误代码是安全的，因为没有用户模式分配函数会将其作为可用地址返回。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-09T11:10:41.673

为简单起见，考虑一台具有 16 位地址空间的机器。这台机器可以寻址从 0 到 65535 的内存。在这种情况下`(void*) -1`，它与 0xffff 相同，即 65535。虽然从技术上讲，这个地址是有效的，但很少有系统可以在那里访问任何内容。

要考虑的另一件事是几乎所有 POSIX 系统调用都会`-1`在错误时返回。

* * *

正如 Benj 所指出的，实际上可以映射 address `NULL`。例如，当您想查看是否存在具有指定 的映射时，可以使用此方法`shmid`，在这种情况下，`shmaddr`参数设置为`NULL`并且函数返回`NULL`以表示共享内存存在。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-09T14:14:47.087

要直接回答这个问题，不，没有强制性规则、定义、标准或规范说`(void *) -1`可能不是有效地址。

（当然，没有关于内存地址的规则、定义、标准或规范是强制性的。例如，我看到有人在不符合 C 标准的情况下每天走在街上，但我从未见过有人因此而被捕。但是，即使我们省略了强制部分，`(void *) -1`一般规范也不禁止用作地址。）

但是，`(void *) -1`为了使 shmat 工作，不需要不是有效地址。仅需要**成功**调用 shmat 永远不会返回`(void *) -1`，并且`(void *) -1`编译器支持它以测试来自 shmat 的返回值。如果满足这两个条件，那么程序总是可以区分成功的 shmat 调用和不成功的 shmat 调用。

关于第二个条件，C 标准不保证`(void *) -1`可以使用，因此 POSIX 在指定这是从 shmat 返回的错误时，隐式要求 C（或其他语言）实现支持它。所以这是对 POSIX 所需语言的扩展，编译器支持它通常是一件简单的事情。

关于第一个条件，请考虑我们何时可能希望 shmat 返回`(void *) -1`成功调用。可以使用或不使用用户请求的地址来调用 shmat，在这种情况下，实现会选择一个地址。在任何正常的计算机体系结构中，有多种原因使用不同值的倍数的地址。对于shmat，最明显的就是内存映射。在具有虚拟内存的体系结构上，内存以页面为单位进行映射，而 shmat 在为段映射内存时，将映射到页面的开头。任何偶数页大小都没有倍数`(void *) -1`，因为后者是奇数，所以 shmat 从不选择将段映射到`(void *) -1`. 即使 shmat 不使用页面大小，它通常也会使用其他对齐方式，例如 4、8 或 16 字节，因为提供对齐的内存意味着存储在该内存开头的结构将被对齐，这会导致更快的内存访问许多处理器。

这留下了用户请求`(void *) -1`作为地址的情况。这将是不寻常的，并且只有当内存段是单个字节或内存模型允许环绕（或者编译器提供了一个非常奇怪的内存模型，其中`(void *) -1`不是地址空间中的最后一个字节）时，它才能工作。我不能确定是否有任何 POSIX 系统支持这一点。但是，很明显，这本质上是没有用的，除了好奇之外，没有人有任何理由这样做。因此，将这种情况排除在shmat之外是安全合理的，只是说不支持，不要这样做。

# regex - 正则表达式 - 更改为驼峰式大小写/删除下划线

> ID：13306917
> 
> 赞同：3
> 
> 时间：2012-11-09T11:06:23.417
> 
> 标签：regex, sql-server-2008-r2, notepad++, ssms

我想将我的记事本/Sql Server 管理工作室中的所有字符串转换为驼峰式大小写并删除所有下划线。

例如：

```
string a = REFERENCE_DATA_ID
String b = ReferenceDataId 
```

我想删除字符串 a 中的下划线并转换为骆驼大小写，如字符串 b 所示。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-26T15:00:55.190

您可以在 notepad++ 中一步完成：

```
Find: ([a-z]+)[_]?([a-z]?)([a-z]+)[_]?([a-z]?)([a-z]+)[_]?([a-z]?)([a-z]+)\.php
Replace: $1\U$2\L$3\U$4\L$5\U$6\L$7 
```

唯一的问题是，您需要知道最低分数可以出现的最长时间以及字符串如何结束。在上面的示例中，我将 php 文件名替换为 camelCase，知道低于分数不能出现超过 3 次，更少是没有问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:27:03.283

假设您的数据已经在表中，是否必须使用正则表达式？为什么不创建一个标量函数来执行此操作并按照以下步骤操作：

1.  UPDATE tableName SET stringa = REPLACE(stringa,'_',' ') --用空格替换下划线
2.  UPDATE tableName SET stringa = dbo.ProperCase(stringa) --使用我在下面创建的函数更新字段
3.  UPDATE tableName SET stringa = REPLACE(stringa,' ','') --现在删除空格

## 功能

```
CREATE FUNCTION [dbo].[ProperCase]
(
@String VARCHAR(255)
)

RETURNS VARCHAR(255) AS

BEGIN

DECLARE @i INT
DECLARE @Char CHAR(1)
DECLARE @CorChar CHAR(1)
DECLARE @PrevAscii INT
DECLARE @PrevAscii2 INT
DECLARE @Ret VARCHAR(255)

/* Captalisation rules */

-- Capitalise first letter of each word
-- Capitalise next letter after special characters

-- eg joe o'bloggs-bloggs jr -> Joe O'Bloggs-Bloggs Jr

SET @Ret = ''
SET @i = 1
WHILE @i <= LEN(@String)

BEGIN
   SET @Char = SUBSTRING(@String, @i, 1)
   SET @CorChar = CASE  WHEN @i = 1                                 THEN UPPER(@Char)-- First letter
                    WHEN @PrevAscii = 32                        THEN UPPER(@Char)-- Follows Space
                    WHEN @PrevAscii = 39 AND @PrevAscii2 =  79  THEN UPPER(@Char)-- Follows O'
                    WHEN @PrevAscii = 45                        THEN UPPER(@Char)-- Follows Dash
                    WHEN @PrevAscii = 46                        THEN UPPER(@Char)-- Follows Fullstop
                    ELSE LOWER(@Char)
                 END
   SET @Ret = @Ret + @CorChar

   SET @i = @i + 1
   SET @PrevAscii2 = @PrevAscii
   SET @PrevAscii = ASCII(@CorChar)
END

--Now sort out capitalistaion for van, de, den, and der

SET @Ret = CASE WHEN @Ret LIKE 'Van %' THEN 'v' + SUBSTRING(@Ret,2,255) ELSE @Ret END
SET @Ret = CASE WHEN @Ret LIKE 'De %' THEN 'd' + SUBSTRING(@Ret,2,255) ELSE @Ret END
SET @Ret = CASE WHEN @Ret LIKE 'Der %' THEN 'd' + SUBSTRING(@Ret,2,255) ELSE @Ret END
SET @Ret = CASE WHEN @Ret LIKE 'Den %' THEN 'd' + SUBSTRING(@Ret,2,255) ELSE @Ret END

SET @Ret = REPLACE(@Ret,' De ',' de ')
SET @Ret = REPLACE(@Ret,' Der ',' der ')
SET @Ret = REPLACE(@Ret,' Den ',' den ')

RETURN @Ret

END 
```

# vba - Excel VBA将多行数据连接成1行

> ID：13306919
> 
> 赞同：2
> 
> 时间：2012-11-09T11:06:25.700
> 
> 标签：vba, excel

> **可能重复：**
> [Excel 连接行](https://stackoverflow.com/questions/3961436/excel-concatenate-rows)

我想使用 Excel VBA 宏将几行数据合并到一行中，并将输出放在新的工作表上，但我不知道从哪里开始。数据相当简单，由一列 ID 和一列产品组成。如果存在多个产品条目，可能会有多行具有相同的 ID，因此我正在寻找一个宏来遍历数据集并将这些多个条目合并为一个。如果该行是唯一的（即只有一个针对该 ID 的产品条目），则该行可以直接复制到输出表而不进行任何合并。

数据如下所示：

* * *

```
ID          PRODUCT

1-10OOMD6   Product SKU1 (9000)

1-10PQFV3   Product SKU2 (7000)

1-10QSCSB   Product SKU3 (50)

1-10RWX7L   Product SKU4 (2)

1-10TKZQJ   Product SKU5 (1)

1-10UROIL   Product SKU3 (12000)

1-10UROIL   Product SKU7 (12000)

1-10UROIL   Product SKU8 (12000)

1-10UW6KU   Product SKU9 (1000)

1-10UW6KU   Product SKU10 (6500)

1-10W5HR9   Product SKU11 (80)

1-10XZWX7   Product SKU12 (1)

1-10ZRXVJ   Product SKU5 (70)

1-10ZV49V   Product SKU3 (250)

1-110RQQN   Product SKU13 (1)

1-110RQQN   Product SKU2 (600)

1-110RQQN   Product SKU14 (1)

1-110RQQN   Product SKU4 (600)

1-112DJ2N   Product SKU15 (5)

1-112EWRQ   Product SKU16 (3000) 
```

* * *

我希望它最终是这样的：

* * *

```
ID  PRODUCT

1-10OOMD6   Product SKU1 (9000)

1-10PQFV3   Product SKU2 (7000)

1-10QSCSB   Product SKU3 (50)

1-10RWX7L   Product SKU4 (2)

1-10TKZQJ   Product SKU5 (1)

1-10UROIL   Product SKU3 (12000), Product SKU7 (12000), Product SKU8 (12000)

1-10UW6KU   Product SKU9 (1000),Product SKU10 (6500)

1-10W5HR9   Product SKU11 (80)

1-10XZWX7   Product SKU12 (1)

1-10ZRXVJ   Product SKU5 (70)

1-10ZV49V   Product SKU3 (250)

1-110RQQN   Product SKU13 (1), Product SKU2 (600), Product SKU14 (1), Product SKU4 (600)

1-112DJ2N   Product SKU15 (5)

1-112EWRQ   Product SKU16 (3000) 
```

* * *

这样输出表上的每个 ID 都是唯一的。

几点：

*   我无法粘贴图片，所以澄清一下：这是一个 ID：1-10OOMD6，这是一个产品：产品 SKU1 (9000)
*   数据集很大，至少 35,000 行
*   数据最初不是按 ID 排序的，但很容易做到。
*   用逗号分隔产品会很棒。
*   我想在另一个工作表上输出宏。

任何帮助将不胜感激！这将为我节省大量时间！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:47:08.120

作为一个起点：使用字典 - 如何做到这一点，看看这篇文章：[http ://www.techbookreport.com/tutorials/vba_dictionary.html](http://www.techbookreport.com/tutorials/vba_dictionary.html)

之后，只需做类似的事情（伪代码，最初你有工作要做的 vba 不会像 vba 一样工作）：

```
Dim dict as new dictionary.

for i=1 to activesheet.rows.count
Dim Key= activesheet.cells(i,1).value 'get the unique product-id
Dim Product = activesheet.cells(i,2).value  'get the product-sku

If dic.exists(Key)=false then 'the heart of this program: if key doenst exist, add a new one, if it alreadys exits, append data
dict.add(Key, Product)
else
 dict.Item(Key) = dict.Item(Key) & " " & Product
end if

next

    For Each v In dict.Keys
      'write it to your sheet
    Next 
```

我猜这种方法比另一种方法更快，仅仅是因为字典速度很快而且它不涉及多个查找循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:45:42.157

iDevelop 的评论非常正确；该网站鼓励更多“尝试然后仅在遇到困难时发布”类型的问题。但是，我确实知道，当您甚至不知道从哪里开始时，这可能会很困难！

这就是我想要的地方。

首先，我会在您的产品右侧添加一列额外的公式。我将在单元格 C2 中输入的公式是：

```
=COUNTIF($A$1:A1,A2) 
```

然后将其复制下来成为

```
=COUNTIF($A$1:A2,A3)
=COUNTIF($A$1:A3,A4) 
```

等等。这样做的目的是什么？它计算与您所在行相同但出现在 EARLIER 行上的 ID 代码数量。如果该数字大于 0，则您知道之前出现过 ID 代码。

接下来，我将构建一些代码来遍历工作表的 UsedRange。查看每一行的 C 列。如果为 0，则只需将 ID 和描述复制到新工作表。如果不是，则使用 Cells.Find 方法在目标工作表中找到较早的条目，并将描述附加到该单元格。

可能还有其他方法可以做到这一点，但代码应该足够容易编写并以可接受的速度运行。

试一试，看看你想出了什么，如果你遇到困难，一定要回复。（虽然我不会在这里待几个小时，因为这里是睡觉时间；不过，世界上很多其他人无疑会。）

祝你好运！

# actionscript-3 - 如何在点下获得顶部 mouseEnabled 对象？

> ID：13306920
> 
> 赞同：2
> 
> 时间：2012-11-09T11:06:39.170
> 
> 标签：actionscript-3, flash, apache-flex

我用于我的闪存应用程序外部触摸输入。我通过 as3 的 TUIO 库接收来自触摸面板的信号（[https://code.google.com/p/tuio-as3/](https://code.google.com/p/tuio-as3/)）

我有时会遇到问题，然后 TuioManager 错误地检测到必须接收触摸输入的对象。

```
private function getTopDisplayObjectUnderPoint(point:Point):DisplayObject {
    var targets:Array =  stage.getObjectsUnderPoint(point);
    var item:DisplayObject = (targets.length > 0) ? targets[targets.length - 1] : stage;

    if (this.touchTargetDiscoveryMode == TOUCH_TARGET_DISCOVERY_MOUSE_ENABLED) {
        while (targets.length > 0) {
            item = targets.pop() as DisplayObject;
            //ignore debug cursor/object/blob and send object under debug cursor/object/blob
            if ((item is ITuioDebugCursor || item is ITuioDebugBlob || item is ITuioDebugObject || item is ITuioDebugTextSprite) && targets.length > 0) {
                continue;
            }
            if (item.parent != null && !(item is InteractiveObject)) item = item.parent;
            if (item is InteractiveObject) {
                if ((item as InteractiveObject).mouseEnabled) return item;
            }
        }
        item = stage;
    }
    else if (this.touchTargetDiscoveryMode == TOUCH_TARGET_DISCOVERY_IGNORELIST) {
        while (targets.length > 0) {
            item = targets.pop();
            //ignore debug cursor/object/blob and send object under debug cursor/object/blob
            if ((item is ITuioDebugCursor || item is ITuioDebugBlob || item is ITuioDebugObject || item is ITuioDebugTextSprite) && targets.length > 0) {
                continue;
            }
            if (!bubbleListCheck(item)) return item;
        }
        item = stage;
    }

    return item;
} 
```

我用过`this.touchTargetDiscoveryMode == TOUCH_TARGET_DISCOVERY_MOUSE_ENABLED`。

此函数不使用`mouseChildren`属性。

例如，我在 fxg 图形中使用世界地图，我想禁用它的所有子项：`worldMap.mouseChildren = false;`

但是如果我使用系统鼠标输入，它就可以工作，但不能用于 TUIO。函数的结果`getTopDisplayObjectUnderPoint`将是子影片剪辑之一。在跟踪中，我看到的层次结构如下：

```
worldMap
    MovieClip
        ....
           MovieClip 
```

是的，我可以递归地`mouseEnabled = false`为`worldMap`. 它只能解决这个问题，但在更全局的情况下不能解决错误的对象选择问题。

我试图修改这个函数并写了两个辅助函数：

```
private function isMouseChildrenEnabled(obj:DisplayObject):Boolean {
    if (obj.parent == null) {
        return true;
    }
    return obj.parent.mouseChildren && isMouseChildrenEnabled(obj.parent);
}

private function findMouseEnabledObject(obj:InteractiveObject):InteractiveObject
{
    if (obj.mouseEnabled && isMouseChildrenEnabled(obj))
        return obj;
    return obj.parent ? findMouseEnabledObject(obj.parent) : null;
}

private function getTopDisplayObjectUnderPoint(point:Point):DisplayObject {
    var targets:Array =  stage.getObjectsUnderPoint(point);
    var item:DisplayObject = (targets.length > 0) ? targets[targets.length - 1] : stage;

    if(this.touchTargetDiscoveryMode == TOUCH_TARGET_DISCOVERY_MOUSE_ENABLED){
        while(targets.length > 0) {
            item = targets.pop() as DisplayObject;
            //ignore debug cursor/object/blob and send object under debug cursor/object/blob
            if((item is ITuioDebugCursor || item is ITuioDebugBlob || item is ITuioDebugObject || item is ITuioDebugTextSprite) && targets.length > 0){
                continue;
            }
            if (item.parent != null && !(item is InteractiveObject)) item = item.parent;
            if (item is InteractiveObject) {
                var io:InteractiveObject = findMouseEnabledObject(item as InteractiveObject);
                if (io) return io;
            }
        }
        item = stage;
    } else if (this.touchTargetDiscoveryMode == TOUCH_TARGET_DISCOVERY_IGNORELIST) {
        while(targets.length > 0) {
            item = targets.pop();
            //ignore debug cursor/object/blob and send object under debug cursor/object/blob
            if((item is ITuioDebugCursor || item is ITuioDebugBlob || item is ITuioDebugObject || item is ITuioDebugTextSprite) && targets.length > 0){
                continue;
            }
            if (!bubbleListCheck(item)) return item;
        }
        item = stage;
    }

    return item;
} 
```

但是在新修复之后，我们有新的错误:(如果我使用 flex 拖放，我会看到错误。在拖放期间，flex 显示拖动的图像并且 tuio 检测到错误的放置目标。在 trace **stage.getObjectsUnderPoint()**中，我看到如下内容：

```
[n] - image (mouseEnabled=true, mouseChildren=true)
   parent: embed_swf_drag_cursor... (mouseEnabled=false, mouseChildren=false)
      parent: application_systemManager... (mouseEnabled=true, mouseChildren=true)
          parent: stage
[n-1] - borderContainer (mouseEnabled=true, mouseChildren=true) - it is my drop target 
```

结果我有 systemManager 作为目标，但我需要 BorderContainer。

如何正确找到用户输入的启用对象？

PS 在 Linux 和 Windows 闪存播放器上测试。

*更新 13.11*

我试图编写在点下启用对象的函数：

```
private function getTopEnabledObject(object:DisplayObjectContainer, hitPoint:Point):InteractiveObject
{
    if (!object.mouseChildren)
        return  null;
    var child:DisplayObject;
    for (var i:int = object.numChildren - 1; i >= 0; i--)
    {
        child = object.getChildAt(i);
        if (child.visible && child is InteractiveObject && child.hitTestPoint(hitPoint.x, hitPoint.y, true))
        {
            if (child is DisplayObjectContainer)
            {
                var target:InteractiveObject = getTopEnabledObject(child as DisplayObjectContainer, hitPoint);
                if (target)
                    return target;
            }
            if ((child as InteractiveObject).mouseEnabled)
                return child as InteractiveObject; 
        }
    }
    return null;
} 
```

它在 5-10 次中缓慢工作。我在很短的时间内多次接触后崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:22:59.033

你这样做的方式看起来是正确的。我唯一要纠正的是，在 isMouseChildrenEnabled 中，您可以在第一个*mouseChildren = false*处停止并返回 false。

如果 Flex 添加拖动对象的图像，您将始终将其作为顶部目标。您必须为它编写一个特殊情况。

# java - 我可以在一个班级里有两个以上的 finally 块吗

> ID：13306922
> 
> 赞同：2
> 
> 时间：2012-11-09T11:06:45.977
> 
> 标签：java, exception, exception-handling, try-catch, try-catch-finally

我正在做一个需要执行两种不同操作的项目。我的主控制器方法中有一个 finally 块。

我的问题是，我最后能不能有两个以上，例如：

```
class test
{
    X()
    {
        try
        {
            //some operations
        }
        finally
        {
            // some essential operation
        }

    }

    //another method
    Y()
    {
        try
        {
            //some operations
        }
        finally
        {
            // some another essential operation
        }
    }
} 
```

那么，有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T11:08:21.340

*每个 try/catch/finally 语句*只能有一个`finally`子句，但可以有多个这样的语句，在同一个方法或多个方法中。

 *基本上，try/catch/finally 语句是：

*   `try`
*   `catch`（0个或更多）
*   `finally`（0 或 1）

...但必须*至少有*一个`catch`/ `finally`（你不能只有一个“裸”的`try`陈述）

此外，您可以嵌套它们；

```
// Acquire resource 1
try {
  // Stuff using resource 1
  // Acquire resource 2
  try {
    // Stuff using resources 1 and 2
  } finally {
    // Release resource 2
  }
} finally {
  // Release resource 1
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:10:46.337

> 最后我能有两个以上吗

是的，您可以拥有任意数量的`try - catch - finally`组合，但它们都应该正确格式化。（即语法应该是正确的）

在您的示例中，您编写了正确的语法，它将按预期工作。

您可以通过以下方式获得：

```
try
{

}
catch() // could be more than one
{

}
finally
{

} 
```

或者

```
try
{
    try
    {

    }
    catch() // more than one catch blocks allowed
    {

    }
    finally // allowed here too.
    {

    }
}
catch()
{

}
finally
{

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-29T14:08:16.167

```
public class Example {

public static void main(String[] args) {
    try{

        try{
            int[] a =new int[5]; 
            a[5]=4;
            }catch (ArrayIndexOutOfBoundsException e)
                            {
               System.out.println("Out Of Range");
            }finally{
                System.out.println("Finally Outof Range Block");
                }

        try{            
            int x=20/0;
            }catch (ArithmeticException e)
                              { 
                                  System.out.println("/by Zero");                                                                            

            }finally{
                System.out.println("FINALLY IN DIVIDES BY ZERO");
                }
    }catch (Exception e) {
        System.out.println("Exception");
    }
    finally{
        System.out.println("FINALLY IN EXCEPTION BLOCK");
    }
    System.out.println("COMPLETED");

     }
} 
```

……*

# asp.net - VS 2012 不启动webservice

> ID：13306926
> 
> 赞同：0
> 
> 时间：2012-11-09T11:07:03.290
> 
> 标签：asp.net, web-services, debugging, visual-studio-2012

## 问题是，缺少一个文件，请参阅下面的评论。问题解决了。

我从 VS 2010 迁移到 VS 2012。

从那时起，当我启动一个其中也有 Web 服务的 Web 项目时，该 Web 服务不再可访问。它在 VS 2010 中很好，也适用于 IIS 服务器。

当我尝试访问 server/MyComService.svc 上的 Web 服务时，我收到 404 错误，提示“找不到资源”。

网页本身按预期工作。

这是 web.config 中服务的定义，但由于它适用于 VS 2010 和 IIS 服务器，我认为其中存在错误：

```
 <system.serviceModel>
    <services>
      <service name="MyComService" behaviorConfiguration="WebServiceBehaviour" >
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="WebServiceBinding" contract="MyComServiceInterface">
        </endpoint>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="WebServiceBinding" maxReceivedMessageSize="4000000">
          <readerQuotas maxStringContentLength="4000000" maxBytesPerRead="4000000" maxArrayLength="4000000" />
          <security mode="None"/>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WebServiceBehaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

我也试过设置端点的地址属性，但还是不行。

我需要更改设置中的任何内容，或者如何让 VS2012 启动 Web 服务？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:15:27.613

我根据以下信息尝试了不同的方法。

```
 Check to see if you have received the following update? http://support.microsoft.com/kb/894670 
```

# apache-flex - 从 Flex 3.5 迁移到 Flex 4.6：错误 1137

> ID：13306927
> 
> 赞同：1
> 
> 时间：2012-11-09T11:07:06.783
> 
> 标签：apache-flex, migration, flex4, flex3

将现有应用程序从 flex 3.5 迁移到 4.6 时，出现以下错误：

```
Description          Resource          Path          Location          Type
1137: Incorrect number of arguments.  Expected no more than 1\.          "Project_name"                    line 0          Flex Problem 
```

我们无法理解它的来源，因为它位于资源“Project_name”的第 0 行，没有指定路径。这对我们来说太笼统了，无法追踪。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T13:35:51.447

好吧，这个问题已经差不多一年了，答案可能不再重要，但无论如何，这个问题可能已经被为其他类似问题提供的解决方案所回答：
1）[错误将 Flex 3 迁移到 Flex 4](https://stackoverflow.com/questions/7025649/error-migrating-flex-3-to-flex-4)
或
2）[1136 : 参数数量不正确。预期 1 行 27 但第 27 行没有错误？](https://stackoverflow.com/questions/10721673/1136-incorrect-number-of-arguments-expected-1-line-27-but-there-is-not-error-o)

# java - 添加用户库时出错

> ID：13306934
> 
> 赞同：0
> 
> 时间：2012-11-09T11:07:35.960
> 
> 标签：java

我在我的程序（Html 组件）中使用了一个用户库。我决定将此库复制到项目内的新位置，这样我就可以将我的项目复制到另一台计算机上。我已经从用户库列表中删除了旧库。现在我正在尝试从新位置添加库。当我从新位置添加外部 jar 并按 OK 时，库中出现错误。当我用完一个罐子时，我的所有字段都没有。

我尝试从同一位置添加另一个 jar（我以前没有使用过），但仍然有错误。

当我从其原始位置添加库时，它可以工作。

库路径有什么限制吗？可能是什么问题？

现在我注意到在 jar 文件旁边，在 jar 路径旁边，我得到“（缺失）”此外，当我只添加外部 jar 时工作。当我尝试创建用户库时仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:58:44.357

我有同样的问题。看看这个链接。

但基本上我只是再次添加了库，升级了我的 eclipse，然后重新启动它。

但看看这两个链接。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=201062](https://bugs.eclipse.org/bugs/show_bug.cgi?id=201062)

[http://www.coderanch.com/t/105941/vc/Project-missing-required-library](http://www.coderanch.com/t/105941/vc/Project-missing-required-library)

# google-drive-api - 如何“按原样”将 HTML 上传到 GDocs API？

> ID：13306935
> 
> 赞同：1
> 
> 时间：2012-11-09T11:07:36.097
> 
> 标签：google-drive-api, google-docs-api

我生成了一个 HTML 文档并使用 API 将其上传到 GDocs。但谷歌文档不断弄乱 HTML（添加额外的空格，使用另一个字体系列等等）。

如何告诉 API 不要弄乱我上传的 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:31:19.807

如果您希望将其保存为纯 HTML，请确保您没有传递`convert=true`(Drive API) 或传递`convert=false`(Docs List API v3)，这将告诉 Drive 将其视为二进制文件。缺点是您将无法在 Google Docs 中编辑该文件，但它将保持逐字节相同。

# python - Swig Python - 没有合适的默认构造函数可用

> ID：13306938
> 
> 赞同：1
> 
> 时间：2012-11-09T11:07:46.350
> 
> 标签：python, swig

我有 C++ 类，需要在 python 代码中使用它。为此，使用 SWIG 生成包装类。根据配置example.i的文档

```
/* File: example.i */
%module example

%{
#define SWIG_FILE_WITH_INIT
#include "item.h"
#include "GradedComplex.h"
#include "GradedDouble.h"
%}

%include "item.h"
%include "GradedComplex.h"
%include "GradedDouble.h" 
```

并尝试使用以下命令构建它

```
c:>swig -c++ -python example.i

c:>python setup.py build_ext --inplace 
```

item.h 是：

```
#ifndef __ITEM_H__
#define __ITEM_H__

#include <complex>
#include <functional>
#include <string>

template<typename T>
class Item
{
  std::string name_;
  T val_;

public:
  Item(std::string name, T val) : name_(name), val_(val) {}
  Item(Item<T> &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  Item(const Item<T> &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  ~Item() {}

  std::string name() const { return name_; }
  T operator()() const { return val_; }
  double norm() const { return sqrt(val_ * val_); }
  Item<T> &operator+=(Item<T> &rhs)
  {
    val_ += rhs();
    return *this;
  }
  Item<T> &operator-=(Item<T> &rhs)
  {
    val_ -= rhs();
    return *this;
  }
  Item<T> &operator*=(Item<T> &rhs)
  {
    val_ *= rhs();
    return *this;
  }
};

template<>
class Item<std::complex<double> >
{
  std::string name_;
  std::complex<double> val_;

public:
  Item(std::string name, std::complex<double> val) : name_(name), val_(val) {}
  Item(Item<std::complex<double> > &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  Item(const Item<std::complex<double> > &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  ~Item() {}

  std::string name() const { return name_; }
  std::complex<double> operator()() const { return val_; }
  double norm() const { return sqrt(val_.real() * val_.real() + val_.imag() * val_.imag()); }
};

template<typename T>
struct ItemComparator : public std::binary_function<Item<T>, Item<T>, bool>
{
  inline bool operator()(Item<T> lhs, Item<T> rhs)
  {
    return lhs.norm() < rhs.norm();
  }
};

#endif 
```

但我仍然收到以下错误

```
example_wrap.cxx(3275) : error C2512: 'Item<std::complex<double>>' : no appropriate default constructor available

c:\documents and settings\swig\Item.h(38) : warning C45
21: 'Item<T>' : multiple copy constructors specified
        with
        [
            T=double
        ]
        example_wrap.cxx(3425) : see reference to class template instantiation '
Item<T>' being compiled
        with
        [
            T=double
        ]
error: command '"C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.exe"' fa
iled with exit status 2 
```

请给我一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:44:36.280

使用此选项构建扩展... swig -nodefaultctor example.i

# python - 对具有两个索引的列表进行排序

> ID：13306946
> 
> 赞同：1
> 
> 时间：2012-11-09T11:08:08.467
> 
> 标签：python, sorting

我有一个看起来像这样的列表：

```
data = [
        [u'2012-10-31', '20', 9801, '0', '0', '0', '0'],
        [u'2012-10-31', '21', 9266, '0', '0', '0', '0'], 
        [u'2012-10-31', '22', 10526, '0', '0', '0', '0'],
        [u'2012-10-31', '23', 9570, '0', '0', '0', '0'],
        [u'2012-10-31', '1', 5256, '0', '0', '0', '0'],
        [u'2012-10-31', '0', 5020, '0', '0', '0', '0'],
        # and so on...
        ] 
```

我需要先按日期排序，即索引 0 和小时，即索引 1。我该如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T11:15:52.360

```
import datetime as dt
def parse(date, hour):
    return dt.datetime.strptime(date, '%Y-%m-%d').replace(hour = int(hour))

data = [[u'2012-10-31', '20', 9801, '0', '0', '0', '0'], [u'2012-10-31', '21', 9266, '0', '0', '0', '0'], [u'2012-10-31', '22', 10526, '0', '0', '0', '0'], [u'2012-10-31', '23', 9570, '0', '0', '0', '0'], [u'2012-10-31', '1', 5256, '0', '0', '0', '0'], [u'2012-10-31', '0', 5020, '0', '0', '0', '0'], [u'2012-10-31', '3', 6755, '0', '0', '0', '0'], [u'2012-10-31', '2', 5748, '0', '0', '0', '0'], [u'2012-10-31', '5', 7013, '0', '0', '0', '0'], [u'2012-10-31', '4', 7099, '0', '0', '0', '0'], [u'2012-10-31', '7', 6705, '0', '0', '0', '0'], [u'2012-10-31', '6', 7498, '0', '0', '0', '0'], [u'2012-10-31', '9', 7976, '0', '0', '0', '0'], [u'2012-10-31', '8', 7770, '0', '0', '0', '0'], [u'2012-10-31', '11', 7440, '0', '0', '0', '0'], [u'2012-10-31', '10', 7836, '0', '0', '0', '0'], [u'2012-10-31', '13', 8781, '0', '0', '0', '0'], [u'2012-10-31', '12', 7949, '0', '0', '0', '0'], [u'2012-10-31', '15', 13083, '0', '0', '0', '0'], [u'2012-10-31', '14', 10739, '0', '0', '0', '0'], [u'2012-10-31', '17', 16339, '0', '0', '0', '0'], [u'2012-10-31', '16', 15182, '0', '0', '0', '0'], [u'2012-10-31', '19', 12565, '0', '0', '0', '0'], [u'2012-10-31', '18', 16169, '0', '0', '0', '0']]

data.sort(key = lambda row: parse(row[0], row[1]))
for row in data:
    print(row) 
```

产量

```
[u'2012-10-31', '0', 5020, '0', '0', '0', '0']
[u'2012-10-31', '1', 5256, '0', '0', '0', '0']
[u'2012-10-31', '2', 5748, '0', '0', '0', '0']
...
[u'2012-10-31', '21', 9266, '0', '0', '0', '0']
[u'2012-10-31', '22', 10526, '0', '0', '0', '0']
[u'2012-10-31', '23', 9570, '0', '0', '0', '0'] 
```

注意：您也可以避免解析日期：

```
data.sort(key = lambda row: (row[0], int(row[1]))) 
```

就够了。在这种特殊情况下，这可能会更简单，但一般来说，当您想要订购日期时，您应该将日期解析为日期时间。

# c# - 我可以将控制台应用程序的输出数据集存储在内存中以供下次执行吗？

> ID：13306949
> 
> 赞同：1
> 
> 时间：2012-11-09T11:08:16.203
> 
> 标签：c#, .net, caching, console-application

我有一个**几乎每分钟**运行一次的控制台应用程序。它产生一些数据。

到此为止还好。

**我的问题是**：如果我想对“上一次执行中由同一控制台应用程序生成的数据”执行逻辑；我怎样才能检索这些以前的数据？

请注意，**我想避免每分钟往返于 Db**，我正在考虑是否有办法保留控制台应用程序。内存中的数据不知何故。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:15:54.623

您将无法将数据保存在内存中，因为当程序完成执行时它会丢失。

有两种选择：

1.  将数据写入本地文件，然后在程序下次运行时将其读回。
2.  修改程序，使其连续运行并循环。在这种情况下，您*将*能够将数据保留在内存中，因为程序尚未终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:10:49.050

如果可能的话，在您的机器上将 DataTable 保存为 XML，然后在您需要时在 DataTable 中读回此 XML。这对你有用

[DataTable.WriteXml](http://msdn.microsoft.com/en-us/library/3hyx9hb4.aspx) - 使用指定文件将 DataTable 的当前内容写入 XML。

[DataTable.ReadXml](http://msdn.microsoft.com/en-us/library/fs0z9zxd.aspx) - 将 XML 架构和数据从指定文件读入 DataTable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:47:07.740

您可以将数据存储在 HD 上。首选方法是使用 BinaryFormatter。例子：

```
 public static Byte[] SerializeObject(Object obj)
    {
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.TypeFormat = FormatterTypeStyle.TypesWhenNeeded;
        formatter.AssemblyFormat = FormatterAssemblyStyle.Simple;

        using(MemoryStream stream = new MemoryStream())
        {
            formatter.Serialize(stream, obj);
            return stream.ToArray();
        }
    }
    public static Object DeserializeObject(Byte[] bytes)
    {
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.TypeFormat = FormatterTypeStyle.TypesWhenNeeded;
        formatter.AssemblyFormat = FormatterAssemblyStyle.Simple;

        using(MemoryStream stream = new MemoryStream(bytes))
            return formatter.Deserialize(stream);
    } 
```

我没有对其进行测试，但您可以尝试将其加载/保存到[MemoryMappedFile](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile%28VS.100%29.aspx) (.NET 4.0)

# bash - 如何使用 shell 脚本修改配置行

> ID：13306951
> 
> 赞同：1
> 
> 时间：2012-11-09T11:08:18.370
> 
> 标签：bash, shell, awk

我有一个`phppgadmin`配置文件 ( `/usr/share/phppgadmin/conf/config.inc.php`) 它有一行：

```
$conf['extra_login_security'] = false; 
```

我想将其更改为：

```
$conf['extra_login_security'] = true; 
```

使用`bash`shell 脚本。我知道我必须使用 sed/awk 之类的东西。但不知道如何准确地使用它来做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:13:09.843

如果您想要将 false 简单地全局替换为 true，那么`sed 's/false/true/g'`就可以做到。

```
$ echo "conf['extra_login_security'] = false" | sed 's/false/true/g'
conf['extra_login_security'] = true 
```

但是，仅更改开头的行`conf[`并将值更改为 true 则更好`sed 's/\(^.*conf\[.*\] =\) false/\1 true/g'`

```
echo "conf['extra_login_security'] = false" | sed 's/\(^.*conf\[.*\] =\) false/\1 true/g'
conf['extra_login_security'] = true 
```

**编辑：**

可以通过以下方式完成该行：

`sed -i 's/\(^.*conf\[.extra_login_security.\] =\) false/\1 true/' /usr/share/phppgadmin/conf/config.inc.php`

用于`-i`保存对文件的更改，或者如果您不想覆盖原始文件，则重定向到新文件。

`sed 's/\(^.*conf\[.extra_login_security.\] =\) false/\1 true/' > mynewfile.php`

如果您没有写入权限，一个技巧`mynewfile.php`是将输出通过管道传输`tee`到`sudo`：

`sed 's/\(^.*conf\[.extra_login_security.\] =\) false/\1 true/' | sudo tee mynewfile.php`

From `man tee`tee - 从标准输入读取并写入标准输出和文件。

# google-plus - 显示错误消息的 google+ 按钮

> ID：13306954
> 
> 赞同：0
> 
> 时间：2012-11-09T11:08:22.600
> 
> 标签：google-plus

我正在尝试使用 g+ 按钮，因此我将其包装在另一个 div 中，以便自定义前景图像，让真正的 g+ 按钮在悬停时出现，但单击按钮会显示一个红色三角形。

这是代码：

```
<div class="btn" style="background:  url(./img.jpg) no-repeat;">
<div class="position">
<div class="g-plusone" data-annotation="none" data-href="{$url|escape:'url'}"></div>
</div>
</div> 
```

（'position' div 确保前景图像的正确定位）

然后我认为这是 url 的问题：所以我抑制它以调用默认的。它仍然不起作用，所以我抑制了包装 div，我仍然有相同的信息。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:39:55.553

当您没有正确的域名时，通常会出现此问题。如果您的 url 是这样的，`106.168.11.5/quest`那么 google plus 按钮将不起作用，并且会按照您所说的那样运行。

# plugins - CRM 2011 插件（消息：删除，预验证）多次删除警告

> ID：13306955
> 
> 赞同：2
> 
> 时间：2012-11-09T11:08:37.600
> 
> 标签：plugins, dynamics-crm-2011

当我删除 MarketingList(A) 时，我有一个插件可以触发并使用存储在 MarketingList(A) 上的属性中的 Guid 检索另一个 Marketing List(B)。

如果我选择 MarketingList(A) 并将其删除，则 MarketingList(B) 将被正确删除。但是，当我同时选择（A 和 B）或网格上的所有记录时，我会收到警告：“发生错误。所选操作未针对一个或多个记录完成”。警告后删除记录。

任何帮助表示赞赏！

# 插入：

```
Message: **Delete**<br>
PrimaryEntity: **list**<br>
Stage of Execution: **Pre-Validation**. 
```

# 代码：

```
if (context.MessageName == "Delete")
{
    using (var crm = new XrmServiceContext(service))
    {
        List listToDelete = crm.ListSet.Where(p => p.Id == context.PrimaryEntityId).SingleOrDefault();
        List retrievedList = crm.ListSet.Where(p => p.Id == new Guid(listToDelete.tph_WitnessMarketingListID)).SingleOrDefault();
        if (retrievedList == null) return;
        crm.DeleteObject(retrievedList);
        crm.SaveChanges();
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:33:30.263

我不确定您是否能够避免这种情况（至少在您当前的设计中）。

我相信你是正确的，问题是网格试图删除已经被删除的东西。

我怀疑网格控件在尝试删除记录之前没有检查记录是否存在。我没想到会这样；它只是给出了一个要删除的东西的列表，假设它们仍然存在似乎是合理的。

我可以看到几种解决此问题的方法。

1.  使用工作流删除记录，这样它应该始终在网格完成其工作后运行。
2.  使您的插件在帖子上异步运行，同样，它应该始终在网格完成工作后运行。
3.  从网格中删除删除按钮，并添加一个自定义功能区按钮，该按钮具有在删除前检查记录是否存在的行为。

作为旁注，您是否知道您实现的插件将执行与级联关系相同的行为？如果将关系设置为级联删除，则不需要任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:25:57.793

假设您仅将 B 的 id 的字符串存储在 A 的字段 (tph_WitnessMarketingListID) 中。B 可能在 A 之前被删除，因此删除可能失败。尝试调试您的插件以查看它失败的行。

# python - 从 appengine blobstore 提供视频的行为与静态文件不同

> ID：13306956
> 
> 赞同：0
> 
> 时间：2012-11-09T11:08:40.910
> 
> 标签：python, html, google-app-engine, video, blobstore

我在从应用引擎 blobstore 向 html5 标签提供视频时遇到问题，视频似乎挂在最后一帧上，阻止了`ended`我需要使用的触发器被触发。我也无法在视频中搜索或通过右键单击强制视频播放。如果我将文件作为静态文件上传，则文件按预期工作，触发触发器并启用搜索。

这是从 blobstore 提供的文件：

[http://jsfiddle.net/AvqUy/18/](http://jsfiddle.net/AvqUy/18/)

相同的视频用作静态文件：

[http://jsfiddle.net/AvqUy/19/](http://jsfiddle.net/AvqUy/19/)

这是blobstore的限制还是我做错了什么？

还有我处理视频文件的代码：

```
class VideoFileHandler(webapp2.RequestHandler):
    def get(self):
        video = db.get(self.request.get('video_id'))
        if video.video_file:
            self.response.headers['Content-Type'] = 'video/mpeg'
            self.response.out.write(video.video_file)
        else:
            self.response.out.write('No video file') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:21:04.393

您应该使用 send_blob。

[这是我做的一个例子](http://audio-test.appspot.com/)，它说明了使用 send_blob 和使用 html 音频和视频标签从谷歌云存储提供服务。

# javascript - 删除逗号分隔字符串末尾和开头的空格和逗号

> ID：13306962
> 
> 赞同：2
> 
> 时间：2012-11-09T11:09:02.337
> 
> 标签：javascript, regex, replace

鉴于我可以得到这样的字符串：

```
dog, cat, person

,people, boys, girls, 

people, boys, police , 
```

我将如何删除字符串末尾和开头的可能空格和逗号。因此，例如，最后两个字符串将转换为：

```
people,boys,girls
people,boys,police 
```

此外，我想删除逗号之间的空格。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T11:11:01.423

使用带有逗号和空格的字符类，以及字符串结尾的锚点`$`：

```
str = str.replace(/^[,\s]+|[,\s]+$/g, '');
str = str.replace(/\s*,\s*/g, ','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:12:33.633

```
'people, boys, police, '.replace(/[, ]+$/, '') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:59:39.110

试试这个，它可能会为你做：

```
(^[,. ]+|[,. ]+$) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T09:45:21.707

你可以试试这个

```
str.replace(/^[,\s]+|[,\s]+$/g, '').replace(/,[,\s]*,/g, ','); 
```

这里 str 是您需要解析的字符串。

# c# - 检查字符串是否为空或空，否则修剪它

> ID：13306968
> 
> 赞同：15
> 
> 时间：2012-11-09T11:09:11.987
> 
> 标签：c#, null, string

我尝试了以下方法：

```
dummy.Title = ds1Question.Title.null ? "Dummy title" : ds1Question.Title.Trim(); 
```

我期待看到类似`nullorempty`智能感知的东西，但似乎没有什么可以做到这一点。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-09T11:10:32.180

这是无效的：

```
 ds1Question.Title.null 
```

你可以有：

```
dummy.Title = ds1Question.Title == null ? "Dummy title"
                                        : ds1Question.Title.Trim(); 
```

或使用：

```
dummy.Title = (ds1Question.Title ?? "Dummy title").Trim(); 
```

这将对默认值执行不必要的修剪，但这很简单。

这些只会检查无效性。要检查是否为空，您需要调用[`String.IsNullOrEmpty`](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)，我会通过一个额外的变量来进行检查：

```
string title = ds1Question.Title;
dummy.Title = string.IsNullOrEmpty(title) ? "Dummy title" : title.Trim(); 
```

或者[`IsNullOrWhitespace`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspxhttp://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)按照 Marc 的回答使用，以避免标题为 " "*直到它被修剪后才*为空。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-09T11:26:35.737

您可以更进一步地执行 Justin Harvey 的[建议](https://stackoverflow.com/a/13306994/402022)并实现一个扩展方法（当然是在静态类中），如下所示：

```
public static string TrimmedOrDefault(this string str, string def)
{
    if (string.IsNullOrEmpty(str)) //or if (string.IsNullOrWhiteSpace(str))
    {
        // Hmm... what if def is null or empty?
        // Well, I guess that's what the caller wants.
        return def; 
    }
    else
    {
        return str.Trim();
    }
} 
```

然后你可以像这样使用它：

```
dummy.Title = ds1Question.Title.TrimmedOrDefault("Dummy title"); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-09T11:10:41.657

也许：

```
dummy.Title = string.IsNullOrEmpty(ds1Question.Title)
             ? "Dummy title" : ds1Question.Title.Trim(); 
```

或者

```
dummy.Title = string.IsNullOrWhiteSpace(ds1Question.Title)
             ? "Dummy title" : ds1Question.Title.Trim(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T11:11:35.943

```
dummy.Title = string.IsNullOrEmpty(ds1Question.Title) ? 
                         "Dummy title" : ds1Question.Title.Trim(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-04T00:10:01.607

这是我使用的一些字符串扩展。我添加了一个以进行安全修剪。希望有人会发现这些有用。

```
 /// <summary>
    /// Extensions for String
    /// </summary>
    public static class StringExtenions
    {
        public static string SafeTrim(this string input)
        {
            if (input.IsNotEmpty())
            {
                return input.Trim();
            }

            return input;
        }

        /// <summary>
        /// Checks to see if a given string is empty.
        /// </summary>        
        public static bool IsEmpty(this string input)
        {
            return string.IsNullOrEmpty(input);
        }

        /// <summary>
        /// Checks to see if a given string is not empty.
        /// </summary>        
        public static bool IsNotEmpty(this string input)
        {
            return !string.IsNullOrEmpty(input);
        }

        /// <summary>
        /// Converts text to title case.
        /// </summary>
        /// <param name="input"></param>
        /// <returns></returns>
        public static string ToTitleCase(this string input)
        {
            CultureInfo cultureInfo = Thread.CurrentThread.CurrentCulture;            
            TextInfo textInfo = cultureInfo.TextInfo;

            return textInfo.ToTitleCase(input.ToLower());
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-09T11:11:05.293

您必须通过字符串静态方法调用它，

```
dummy.Title = string.IsNullOrEmpty(ds1Question.Title) ? "Dummy title" : ds1Question.Title.Trim(); 
```

如果您希望能够直接在字符串实例上调用它，当然可以添加这样的扩展方法

```
public static bool IsNullOrEmpty(this string str)
{
    return string.IsNullOrEmpty(str);
} 
```

然后你可以使用

```
ds1Question.Title.IsNullOrEmpty() ? "Dummy title" : ds1Question.Title.Trim(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-09T11:11:27.880

你几乎明白了。试试这个：

```
dummy.Title = 
    string.IsNullOrEmpty(ds1Question.Title) ? 
    "Dummy title" : 
    ds1Question.Title.Trim(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-09T11:13:57.413

> dummy.Title = string.IsNullOrEmpty(ds1Question.Title) ？“虚拟标题”：ds1Question.Title.Trim();

# css - 在内容之后调整嵌套的 div

> ID：13306969
> 
> 赞同：0
> 
> 时间：2012-11-09T11:09:13.750
> 
> 标签：css, html

我的问题是嵌套的 div ('content') 没有根据真实内容调整他的高度，在这种情况下是我的表单。所以前一个 div 适应他的身高，但后一个 div 不这样做。我该如何解决这个问题？

HTML：

```
<div id='container'>
    <div class='content'>
        <form action="#" id="admin_form">
           <input type="text" class="input350" name="status" />
           <input type="text" class="input350" name="tlt" />
           <br>
           <input type="text" class="input350"  name="msg" />
           <input type="submit" class="input350" style="float:left;" value="Admin" />
        </form>
    </div>
</div> 
```

CSS：

```
 #container
    {
        position: absolute;
        width: 900px;
        height: auto;
        border:solid 4px #1FC3D2;

    }

#container .content
    {
        position: relative;
        background-color: #EFEFEF;
        width: 898px;
        height:auto;
        border:solid 1px #000;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:13:30.480

表单的最后一个输入是浮动的。浮动元素不会拉伸其父级的高度。

将其添加到表单之后：

```
<div style="clear:both;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:55:46.697

`float:left`从提交按钮中删除并添加此css

```
input[type="submit"]{
 display:block   
} 
```

**[演示](http://jsfiddle.net/J9D7Z/)**

# c# - 将按钮从 UserControl 提升到我的表单（asp.Net）

> ID：13306971
> 
> 赞同：1
> 
> 时间：2012-11-09T11:09:25.213
> 
> 标签：c#, asp.net, events, button, user-controls

你能帮我，告诉我为什么我的代码不正确。我想创建一个将作为注册表单的 UserControl。在这个控件中，我有一个按钮，当单击该按钮时，我希望服务器重定向到另一个页面。这是我的代码：

控制.ascx.cs：

```
public partial class ControlFormulaire : System.Web.UI.UserControl
{
    public event EventHandler ButtonClicked;// it could be named differently obviously
    protected void ValidateButton_Click(object sender, EventArgs e)
    {
               if (this.ButtonClicked != null)
                    ButtonClicked(this, new EventArgs());
    }

    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

表单.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    this.SubscribForm.ButtonClicked += new EventHandler(SubscribForm_ButtonClicked); 
}

void SubscribForm_ButtonClicked(object sender, EventArgs e)
{
    Response.Redirect("WebForm2.aspx");
} 
```

这就是我的 form.aspx：

```
<%@ Register TagPrefix="uc" TagName="Form" Src="~/ControlFormulaire.ascx"%>
<uc:Form ID="SubscribForm" runat="Server" MinVal="1" MaxVal="10" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:09:01.027

请试试这个

```
public partial class ControlFormulaire : System.Web.UI.UserControl
{
    public event EventHandler ButtonClicked;// it could be named differently obviously
    protected void ValidateButton_Click(object sender, EventArgs e)
    {
           ButtonClicked();
    }

    private void ButtonClicked()
    {
       if (ButtonClicked!= null)
       {
           ButtonClicked(this, EventArgs.Empty);
       }
    }
    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

* * *

```
protected void Page_Load(object sender, EventArgs e)
{
    ControlFormulaire.ButtonClicked+= new EventHandler(SubscribForm_ButtonClicked);
}

void SubscribForm_ButtonClicked(object sender, EventArgs e)
{
    Response.Redirect("WebForm2.aspx");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T05:49:46.767

```
此行是关键或自定义点击事件忽略更新面板
// ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(this);并注意页面定义中的 IPostBackEventHandler 部分

```
在此示例中，普通按钮和自定义单击事件 div 在更新面板中一起工作

```

公共部分类 tmp2：System.Web.UI.Page，IPostBackEventHandler
{

protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(this);
    if (!Page.IsPostBack)
    {
        div1.Attributes["onclick"] = ClientScript.GetPostBackEventReference(this, "ClickDiv");
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text += "1";
    UpdatePanel1.Update();
}
protected void Div1_Click()
{

    div1.InnerHtml += "b";
    UpdatePanel1.Update();

}

public void RaisePostBackEvent(string eventArgument)
{

    if (!string.IsNullOrEmpty(eventArgument))
    {

        if (eventArgument == "ClickDiv")
        {

            Div1_Click();

        }

    }

} 
```

}

# html - 在所有页面上打印带有页眉和页脚的 HTML 报告 - Firefox

> ID：13306974
> 
> 赞同：4
> 
> 时间：2012-11-09T11:09:45.583
> 
> 标签：html, css, printing, media-queries

我尝试了几种方法，但似乎都没有正常工作。我有一个 html 报告，我需要在每个页面中打印带有页眉和页脚的报告。我需要这个在 Firefox 中工作！

**解决方案1：**

```
<html>
<head>
<title></title>
<style type="text/css">
@media print {
#footer {
    display: block;
    position: fixed;
    bottom: 0;
}
}
</style>
</head>
<body>
<table border="0" width="100%" cellspacing="0" cellpadding="0">
  <thead>
    <tr>
      <th style="width:100%"> header content </th>
    </tr>
  </thead>
  <tfoot>
    <tr>
      <td width="100%"><table width="100%" border="0">
          <tr>
            <td colspan="4"><br>
              &nbsp;</td>
          </tr>
        </table>
  </tfoot>
  <tbody>
    <tr>
      <td width="100%"> main content </td>
    </tr>
  </tbody>
</table>
<table id="footer" width="100%">
  <tr>
    <td width="100%"> footer content </td>
  </tr>
</table>
</body>
</html> 
```

**解决方案 1 问题：**主要内容覆盖页脚。

**解决方案2：**

```
<html>
<head>
<title></title>
<style type="text/css">
@media print {
thead {
    display: table-header-group;
}
tfoot {
    display: table-footer-group;
}
}
@media screen {
thead {
    display: block;
}
tfoot {
    display: block;
}
}
</style>
</head>
<body>
<table>
  <thead>
    <tr>
      <td>header content</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> main content </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td>footer content</td>
    </tr>
  </tfoot>
</table>
</body>
</html> 
```

解决方案 2 问题：页脚位于主要内容的正下方，并不总是像我希望的那样位于页面底部。

任何帮助或其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:28:21.387

如果我理解正确，请尝试：将页脚高度设置为 50 像素（100 像素、200 像素......任何东西）并添加到主要内容边距底部：50 像素（页脚高度）

这必须排除带有页脚的重叠内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:04:06.097

好的，我找到了解决问题的方法。我会把它放在这里给那些有同样问题的人。在我的第一个示例中，我们只需为 tfoot 分配我们想要的页脚高度。

例如：

```
<tfoot>
   <tr> 
    <td width="100%"> 
     <table width="100%" border="0"> 
       <tr> 
         <td colspan="4">
         <br>&nbsp;
         </td> 
      </tr> 
      <tr> 
         <td colspan="4">
         <br>&nbsp;
         </td> 
      </tr> 
      <tr> 
         <td colspan="4">
         <br>&nbsp;
         </td> 
      </tr>
    </table> 
  </tfoot> 
```

或者分配一个班级并放置您想要的高度。

# html - 我想从 html5 视频标签中捕获和上传缩略图

> ID：13306976
> 
> 赞同：0
> 
> 时间：2012-11-09T11:10:01.953
> 
> 标签：html, video, video-thumbnails

我想从 html5 视频标签中捕获和上传缩略图，

这是我的代码

```
 var w = 135;//video.videoWidth * scaleFactor;
    var h = 101;//video.videoHeight * scaleFactor;
    var canvas = document.createElement('canvas');

    canvas.width = w;
    canvas.height = h;
    var ctx = canvas.getContext('2d');
    ctx.drawImage(_video, 0, 0, w, h);
    canvas.toDataURL("image/jpg"); 
    var blob =  canvas.msToBlob(); 
```

我在 chrome 浏览器中得到了这个异常**“对象 # 没有方法 'msToBlob'” 。**谁能帮忙，这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T03:06:57.370

Microsoft的`ms`代表，因此`msToBlob`只能在 IE 中使用。其他浏览器（一旦受支持）可能也会为其添加前缀（`webkitToBlob`）并最终切换到无前缀版本（`toBlob`）

即使您检查了各种前缀的支持，目前支持仍然有限。相反，您可以使用`toDataURL`which 返回一个 base64 编码的 URI，您可以将其用作 img 元素的 src 属性：

```
var b64 = canvas.toDataURL("image/jpg");
//later... 
thumbnailImg.src = b64; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:58:33.407

这是因为 chrome 还不支持 toBlob 方法。我检查了每晚的构建，但看不到它。

[在这里](http://code.google.com/p/chromium/issues/detail?id=83103&q=toblob&colspec=ID%20Stars%20Pri%20Area%20Feature%20Type%20Status%20Summary%20Modified%20Owner%20Mstone%20OS)讨论了一段时间，但没有任何结果，Firefox 仍在等待更好地定义此案。

所以简而言之，chrome 还不支持这个，我认为它只在 ie9 及更高版本中真正支持，所以最好不要在生产站点上使用它。

如果您尝试从画布上存储屏幕抓取，其他建议是使用 canvas.toDataURL() 进行探索；然后将其存储为base64。

抱歉，这对您来说不是更好的结果

要在 Chrome 中查看更新，请检查：

[http://code.google.com/p/chromium/issues/detail?id=67587](http://code.google.com/p/chromium/issues/detail?id=67587)

# javascript - 如何在点击时获得窗口滚动单元..当页面动画到目标位置的顶部时

> ID：13306978
> 
> 赞同：0
> 
> 时间：2012-11-09T11:10:05.630
> 
> 标签：javascript, jquery, html, css

我需要在窗口滚动和导航点击上进行视差滚动。在导航点击页面中，顶部动画显示目标。

当页面动画到目标位置的顶部时，如何在单击时获取窗口滚动单元。

/*使用这段代码我试图获取窗口滚动单元*/

```
$glob(document).ready(function() {
                $glob("#lookbook_navi a").bind("click",function(event){
                    event.preventDefault();
                    var target = $glob(this).attr("href");

                    var objWindow = $glob(window);

                    $window = $glob(window);
                    alert($window.scrollTop()); 

                    $glob("#page").animate({
                        "top": -($glob(target).position().top)
                    }, animSpeed);

                });
            }); 
```

/*使用这段代码，我得到了窗口滚动的单位..* /

```
$glob(document).ready(function(){
                // Cache the Window object
                $window = $glob(window);

               $glob('div[data-type="lookBookTab"]').each(function(){
                    var $bgobj = $glob(this); // assigning the object

                    $glob(window).scroll(function() {

                        // Scroll the background at var speed
                        // the yPos is a negative value because we're scrolling it UP!                              
                        var yPos = -($window.scrollTop() / $bgobj.data('speed')); 

                        // Put together our final background position
                        var coords = '50% '+ yPos + 'px';

                        // Move the background
                        $bgobj.css({ backgroundPosition: coords });

                    }); // window scroll Ends
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T11:40:31.953

试试这个

```
$('a[href^="#"]').on('click',function (e) {
        e.preventDefault();
        var target = this.hash,
        $target = $(target);
        $('html, body').stop().animate({
            'scrollTop': $target.offset().top
        }, 500, 'swing', function () {
            window.location.hash = target;
        });
    }); 
```

# cakephp - CakePHP：用户推荐系统，如何关联？

> ID：13306986
> 
> 赞同：1
> 
> 时间：2012-11-09T11:10:44.310
> 
> 标签：cakephp, referrer

我正在构建一个由 CakePHP 支持的网站，用户可以在其中相互引用，我在考虑“拥有并属于多个”关系（一个用户可以有多个推荐，但只能被一个推荐）这是正确的方式还是与另一个协会/道路更好？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:56:40.440

如果我假设一个用户可以推荐很多人，但只能被一个人推荐是正确的，那么这样的事情应该足以满足您的工作：

```
//User model
$belongsTo = array(
    'Referrer' => array(
        'className' => 'User',
        'foreignKey' = > 'referrer_id'
    )
);
$hasMany = array(
    'Referree' => array(
        'className' => 'User',
        'foreignKey' => 'referrer_id'  
    )
); 
```

[有关同一模型的多个关系的](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#multiple-relations-to-the-same-model)详细信息。

如何检索数据的示例：

```
//User model
public $actsAs = array('Containable');
public $recursive = -1; //better to set in AppModel IMO

public function getUser($userId = null) {
    if(empty($userId)) return false;
    return $this->find('first', array(
        'conditions' => array(
            $this->alias . '.' . $this->primaryKey => $userId
        ),
        'contain' => array(
            'Referrer',
            'Referee'
        )
    ));
} 
```

# nservicebus - 多系统环境下的 NServiceBus 发布

> ID：13306991
> 
> 赞同：0
> 
> 时间：2012-11-09T11:10:59.317
> 
> 标签：nservicebus

我在一个系统上工作，我们在多个国家拥有相同的网站。这些网站中的每一个都有自己的服务。一切正常，但我总是发现自己必须发送消息而不是作为消息发布，否则我事先知道的其他服务完全无关紧要。对我来说，发布到许多服务然后过滤它的相关性听起来毫无意义。

当想要将消息发布到某个服务子集时，我应该处理一种做法，其他人是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:40:19.007

您能否描述一下您确定特定端点系统相关性的逻辑？发布和订阅的目的是系统中有其他端点可以订阅的事件。
您不应该对您的订阅者有所了解。那么你如何确定相关性呢？

如果这些消息与特定端点无关，为什么要订阅这些消息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:18:37.513

默认情况下，端点订阅所有消息。如果您只希望某些端点订阅特定集，那么您需要将您的端点配置为 DoNotAutoSubscribe()。然后，您必须使用 Bus.Subscribe() 显式订阅端点感兴趣的每种消息类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:53:47.087

如果它确实是一条事件消息，那么您需要发布该消息。如果您需要发布到子集，您可以拥有一个单独的订阅存储，相关端点将使用该订阅存储。

通常，应该由订阅者来确定接收到的事件是否相关，但如果您*确实*有预先的信息，那么可以使用单独的订阅存储。

在我的 FOSS ESB 项目 (http://shuttle.codeplex.com/)`ISubscriptionManager`中，必须向 ESB 提供一个实现，以确定要向其发送已发布消息的订阅者 uri。尽管它*可能*有点矫枉过正，但可以提供一个自定义实现，其中包含一些执行过滤的逻辑；否则单独的订阅商店。

# android - Evernote 作为 ACTION_SEND Intent

> ID：13306996
> 
> 赞同：0
> 
> 时间：2012-11-09T11:11:26.973
> 
> 标签：android, android-intent, evernote

当我打电话给 Intent

```
 Intent share = new Intent(android.content.Intent.ACTION_SEND);
    share.setType(MIME_TYPE_TEXT);
    List<ResolveInfo> resInfo = context.getPackageManager().queryIntentActivities(share, 0); 
```

...

```
 Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), chooserDialogTitle); 
```

我可以选择 Evernote（安装后），然后我从 Evernote 获得登录或注册屏幕

当我点击后退按钮时，我的应用程序也将关闭，所有其他可选择的意图（GoogleMail、WhatsUp、SMS 等）只会自行关闭

我认为他们会覆盖后退按钮。这可能吗？有没有人有同样的问题？

# python - 如何在 Python 中获得未转义的转义十六进制值

> ID：13306999
> 
> 赞同：1
> 
> 时间：2012-11-09T11:11:37.817
> 
> 标签：python, file-io, type-conversion

[我在Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)中实现了一个简单的文件查找和读取：

```
>>>f = open("<filepath>", "rb")
>>>f.seek(0x20) #offset 0x20
>>>byte=f.read(4) #4 byte space 
```

我结束了

```
>>>byte
'\xe0\x00\x00\x00' 
```

这是预期的结果，但我需要将其用作没有转义的十六进制值以进行进一步计算。

如何将这样的字符串转换为未转义的十六进制值？（在上面的示例中，'\xe0\x00\x00\x00' 应该转换为 'e0000000' 或 '0xe0000000'。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:21:43.763

使用`encode('hex')`：

```
>>> byte.encode('hex')
'e0000000'

# convert it to int
>>> int(byte.encode('hex'), 16)
3758096384 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:18:05.953

您可以使用 byte.encode('hex') 来获取十六进制值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:42:16.427

您可以使用该`struct`模块将字节解压缩为一个数字，然后按照您希望的方式进行格式化。

```
inport struct
print '{:08x}'.format(struct.unpack('>I', byte)[0]) 
```

输出：

```
e0000000 
```