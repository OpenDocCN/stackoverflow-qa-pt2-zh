# StackOverflow 问答 12612000-12612999

# c - 给定一组 UNIX 命令的管道

> ID：12612001
> 
> 赞同：1
> 
> 时间：2012-09-26T23:33:42.187
> 
> 标签：c, shell, unix, piping

因此，我正在使用 C 创建一个基本的 UNIX shell 项目的最后阶段。我已经完成了许多不同的程序部分，但现在我想征服管道。我特别想创建一个可以处理**任意数量**管道的程序。

出于某种原因，我的代码到达某行（标记为：**//DIES HERE**）然后停止，我不知道为什么。

这是我到目前为止的代码：

```
//the contents of args[0] is {"ls","-l","-o"}
//the contents of args[1] is {"wc","-l"}

int pipefd[2];

pipe(&pipefd[0]);   // Error check!

fflush(stdout);
for (i = 0; i < commands; i++){
    int pid = fork();

    if (pid == 0){

        int command_no = i;
        int prev_pipe = ((command_no - 1) % 2) * 2;
        int current_pipe = (command_no % 2) * 2;
        printf("\ncmd %d: prev pipe %d, curr pipe %d\n\n", i, prev_pipe, current_pipe);
        fflush(stdout);

        // If current command is the first command, close the
        // read end, else read from the last command's pipe
        if (command_no == 0){
            close(pipefd[0]);
        }
        else{
            dup2(pipefd[prev_pipe], 0);
            close(pipefd[current_pipe]);                    
        }

        // If current command is the last command, close the
        // write end, else write to the pipe
        if (command_no == commands - 1){
            close(pipefd[current_pipe + 1]);                    
        }
        else{
            dup2(pipefd[current_pipe + 1], 1); //DIES HERE
        }
        // printf("Here?\n\n");
        execvp(*args[i], args[i]);
        fprintf(stderr, "Failed to exec: %s (%d: %s)\n", arrayOfCommands[i], errno, strerror(errno));
        _exit(1);
    }
} 
```

任何帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:22:39.147

我看到的主要问题`pipe()`是在循环之外。您将需要`pipe()`在每对进程之间添加一个新的。对您问题的评论也提出了一些好处。

多年前我在大学里写了一个 shell，这是我的代码中类似的循环。我相信我现在会做很多不同的事情，但它可能对你有用：

```
 for (i = 0; i < iNumPipes; ++i) {
            if (i == iNumPipes - 1) {
                    /* this is the last command
                     */
                    p[1] = fdOutput;
                    p[0] = -1;
            } else if (-1 == pipe(p)) {
                    perror("pipe");
                    exit(1);
            }

            switch (iPid = fork()) {
            case -1:
                    perror("fork");
                    exit(1);
            case 0:
                    close(0);
                    dup2(fdInput, 0);
                    close(fdInput);

                    close(1);
                    dup2(p[1], 1);
                    close(p[1]);

                    if (-1 != fdErr) {
                            close(2);
                            dup2(fdErr, 2);
                            close(fdErr);
                    }

                    pc = SearchPath(pppcAvs[i][0]);
                    execve(pc, pppcAvs[i], ppcEnv);
                    perror(pc);
                    _exit(-1);
            default:
                    close(fdInput);
                    close(p[1]);
                    fdInput = p[0];
            }

    } 
```

# ember.js - 在与不同模型相关的循环中创建 Ember.Select 对象

> ID：12612003
> 
> 赞同：1
> 
> 时间：2012-09-26T23:34:09.713
> 
> 标签：ember.js

我需要`Ember.Select`在一个循环中显示几个小部件：

```
{{#each foo}}
  {{view Ember.Select
       selectionBinding="App.s1.selected"
       contentBinding="App.s1.content"
  }}
}} 
```

问题是这会将所有这些选择绑定到同一个模型 ( `"App.s1"`)。我怎样才能将每个`Ember.Select`与不同的模型联系起来？

理想情况下，我想定义一个模型数组，并在循环中告诉 Ember 使用该数组的索引“i”，其中“i”是当前迭代的索引。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:53:08.100

您可能希望将所有 sN（s1、s2、s3 等）存储在一个数组中，例如`App.contentArray`，然后在您的模板中执行

```
{{#each item in App.contentArray}}
     {{view Ember.Select selectionBinding="item.selected" contentBinding="item.content"}}
{{/each}} 
```

不需要`i`索引或显式 for 循环。

# iphone - Xcode：警告：输出文件的多个构建命令和错误：无法打开可执行文件''

> ID：12612004
> 
> 赞同：4
> 
> 时间：2012-09-26T23:34:15.410
> 
> 标签：iphone, xcode

我一直在阅读无数其他帖子并尝试了无数次修复，但对我的问题没有任何帮助。我先说我已经有 2-3 个月没有在这台 Macbook 上使用 Xcode 了。这是唯一一个有这个问题的项目（我试过的 4 个左右）。打开 Xcode 后我做的第一件事是更改项目名称以及 .h 和 .m 文件。我通过 Xcode 而不是 Finder 完成了所有这些工作。

导航器中没有以红色文本显示任何内容，这表明无法找到它。这是我已经尝试过的（很多次）。

关闭/打开 Xcode。
清理项目和构建文件夹。
删除派生数据文件夹。
运行磁盘工具来修复权限。
重新启动计算机。
尝试了不同的代码签名组合。
从设备中删除应用程序。
在项目中搜索任何重复的文件名。

以下是逐字警告：

警告：输出文件的多个构建命令 /Users/jinser/Library/Developer/Xcode/DerivedData/Landmarks-bgnzcomxftpffiezmwocaqdydrlj/Build/Products/Debug-iphoneos/Landmarks.app/Landmarks

这是错误：

GenerateDSYMFile /Users/jinser/Library/Developer/Xcode/DerivedData/Landmarks-bgnzcomxftpffiezmwocaqdydrlj/Build/Products/Debug-iphoneos/Landmarks.app.dSYM /Users/jinser/Library/Developer/Xcode/DerivedData/Landmarks-bgnzcomxftpffiezmwocaqdydrlj/Build/ Products/Debug-iphoneos/Landmarks.app/Landmarks cd "/Users/jinser/Desktop/Kevin/Cocos2D Projects/ARSpaceships" setenv PATH "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Developer/usr/ bin:/usr/bin:/bin:/usr/sbin:/sbin" /Developer/usr/bin/dsymutil /Users/jinser/Library/Developer/Xcode/DerivedData/Landmarks-bgnzcomxftpffiezmwocaqdydrlj/Build/Products/Debug-iphoneos /Landmarks.app/Landmarks -o /Users/jinser/Library/Developer/Xcode/DerivedData/Landmarks-bgnzcomxftpffiezmwocaqdydrlj/Build/Products/Debug-iphoneos/Landmarks.app.dSYM

错误：无法打开可执行文件''

这是 Mac 10.6.8 上的 Xcode 4.2。请，任何建议将不胜感激。我正在失去理智。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T00:04:39.237

因此，对于遇到此问题且所有其他解决方案都不适合您的人，请确保您没有与项目同名的项目文件夹。例如，我的项目名为 Landmarks，我在资源中有一个文件夹，也称为 Landmarks。一旦我重命名了文件夹，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:21:44.047

不是我的答案，但 LargeGlasses 在评论中提供了真正的答案（对我而言），我已将其制定为自己的答案，因为我无法对评论进行投票。

> 项目中具有相同名称的任何两个文件都会导致此警告。

就我而言，我在不同的子文件夹中有一个同名的图标，一个由应用程序使用，另一个是位于不同文件夹中的帮助资源的一部分。解决方案是仅重命名两者之一。

感谢您对 LargeGlasses 的回答。

# java - 我需要从表格中提取我要查找的数据出现的每一行的文本

> ID：12612005
> 
> 赞同：1
> 
> 时间：2012-09-26T23:34:22.280
> 
> 标签：java, selenium-webdriver

这很可能很简单，但我找不到使用 Selenium webdriver 的方法。我有表，我需要从该表中选择一些数据。我可以使用前 3 个字段作为键，第四个字段是数据。

例子：

```
Low      wild     us       crash.
key1     key2     key3     key4 
```

我需要将文件填充 key4 循环到一个数组中，直到我到达网页的末尾。

这是表格第一行的 xpath。

```
html/body/div[2]/div[1]/div[2]/div/table/tbody/tr[2]/td[1] <key1>
html/body/div[2]/div[1]/div[2]/div/table/tbody/tr[2]/td[2] <key2>
html/body/div[2]/div[1]/div[2]/div/table/tbody/tr[2]/td[3] <key3>
html/body/div[2]/div[1]/div[2]/div/table/tbody/tr[2]/td[4] <key4> 
```

如果我编码的是 ruby​​，我可以只使用“nokogiri”如果我使用 perl，我可以只使用正则表达式......

# php - 提交时转到 URL 的下拉菜单

> ID：12612006
> 
> 赞同：0
> 
> 时间：2012-09-26T23:34:27.950
> 
> 标签：php, javascript, html

我有一个 WordPress 高级搜索，当用户从下拉菜单中选择适用的类别时，它会将他们导航到该建议的类别。我希望它在提交时将它们带到该类别，而不是在选择选项后自动执行。这是我的 JS 代码：

```
$(function(){ // bind change event to select 
    $('#dynamic_select').on('change', function () { 
        var url = $(this).val(); // get selected value 
        if (url) { // require a URL 
            window.location = url; 
        } return false; 
    }); 
}); 

$(function(){ // bind change event to select 
    $('#dynamic_select2').on('change', function () { 
        var url = $(this).val(); // get selected value 
        if (url) {  // require a URL 
            window.location = url; 
        } return false; 
    }); 
}); 
```

这是我的 HTML：

```
<form class="treatment-form-procedure">

<label class="selectstyle" id="treatment-procedure-select" style="margin-top:10px;">
    <select id="dynamic_select">
        <option selected>Select One</option>
        <option class="level-0" value="<?php bloginfo('url'); ?>/treatment/medical-dermatology/">Medical Dermatology</option>
    </select>
</label>

<input type="submit" value="Search" id="treatmentSubmit" style="padding: 10px 7px;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:03:11.980

Capture the form submit.

```
$('form.treatment-form-procedure').on('submit', function (event) {
    event.preventDefault();
    window.location = $('#dynamic_select').val();
}); 
```

***OR*** (and I like this better) update the form action:

```
$('#dynamic_select').on('change', function () {
    $(this).closest('form').attr('action', $(this).val());
}); 
```

... so the form submits to that url.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:49:08.767

只需删除 dynamic_select 的 javascript 处理程序，表单将不再提交 change 。. . 您可以删除或注释掉的代码是：

```
$(function(){ // bind change event to select 
    $('#dynamic_select').on('change', function () { 
        var url = $(this).val(); // get selected value 
        if (url) { // require a URL 
            window.location = url; 
        } return false; 
    }); 
}); 
```

# c# - 无法使用 Selenium IE 驱动程序选择 nth-child

> ID：12612009
> 
> 赞同：1
> 
> 时间：2012-09-26T23:34:53.367
> 
> 标签：c#, selenium, webdriver

我想使用 css 选择器`option`从带有 IE 驱动程序的元素中选择第二个或第 n 个元素。`select`

我尝试了以下但它不起作用。

选项：第n个孩子（1）

如果我提供一个值，它会起作用，但我并不总是知道该值，所以我喜欢由 nth-child 选择。

选项[值='1']

我在 IE8 上遇到的错误是 javascript 错误：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C; MS-RTC LM 8; .NET4.0E; Tablet PC 2.0)
Timestamp: Wed, 26 Sep 2012 23:34:46 UTC

Message: Invalid argument.
Line: 30
Char: 96
Code: 0
URI: http://blah/foo.aspx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:43:18.037

这是完全可以预料的。Internet Explorer 8 支持`querySelector()`and `querySelectorAll()`，因此 IE 驱动程序依赖于浏览器对 CSS 选择器的本机实现，这意味着您受限于浏览器提供的任何级别的 CSS 选择器支持。在 IE 8 的情况下，浏览器不支持 CSS3 选择器，因此 IE 驱动程序将无法使用任何 CSS3 选择器。当然，`nth-child()`是 CSS3 规范的一部分，所以使用 IE 8 的 IE 驱动程序将不支持`nth-child()`. 至于哪些浏览器支持哪些选择器，在[quirksmode.org](http://www.quirksmode.org/css/contents.html)上有一个很好的参考资料，其中提供了每个选择器以及支持它们的浏览器的一个很好的总结。

# ms-access - 访问数据库的 CDatabase::ExecuteSQL 批量删除

> ID：12612010
> 
> 赞同：0
> 
> 时间：2012-09-26T23:34:54.003
> 
> 标签：ms-access, mfc, odbc

我有一个包含超过 500,000 条记录的 access 数据库，我想批量删除记录。我得到了一个我需要根据特定条件删除的 id 列表，这可能是 1 ~ 5000。现在我的代码看起来像这样

```
 for ( i = 0  to 5000 )
 { 
    CDatabase.ExecuteSQL( Delete from table where id = ItemToDelete(i) ) 
 } 
```

每个 sql 调用大约需要 1 秒。

是否可以选择批量删除或有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:44:02.893

我已经很多年没有做过 Access，但我也遇到了同样的挑战。我不会首先获取满足某些条件的所有记录，而是首先尝试发出 DELETE WHERE “某些条件”。它可能仍然很慢，但会将 SQL 调用的数量从 5000 减少到 1。

有了这么大的#，一个更极端的解决方案可能只是将整个表转储到一个文本文件并编写一个小程序以仅使用您想要的那些重新加载它。对于一次性的事情可能不是一个好的解决方案，但如果你每个月都这样做......

但总的来说，最小化#Sql 调用是提高性能的最佳方式。根据服务器的不同，如果 WHERE 子句仅包含主键字段，则删除操作可能会快很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:40:22.300

该声明应为：

```
Delete from table where id between 1 and 5000 
```

如果您有条件，在大多数情况下，您应该能够构建 WHERE 语句。不要尝试使用 IN 单独列出 5000 个 ID。你会遇到各种限制。

如果无法区分删除标准，则可以在表格或 CSV 中列出单个 ID，两者都可以与 IN 一起使用。

# c - 在 C 中进行谓词赋值的更好方法？

> ID：12612016
> 
> 赞同：2
> 
> 时间：2012-09-26T23:35:42.663
> 
> 标签：c

我想要做的是避免以下情况：

```
if(*ptr > 128) {
   number = 5;
} 
```

当没有明确的分支将走向何方时，此类代码的性能很差。我想出的是：

```
int arr[] = { number, 5 };
int cond = *ptr > 128;
number = arr[cond]; 
```

根据我的测试，当输入是随机的时，它的运行速度是执行条件的两倍多。我想知道是否有更聪明的方法可以做到这一点，也许使用按位运算符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T23:48:00.793

聪明的编译器绝对应该使用正确的优化设置将其编译为条件移动；检查拆卸以确保。

有这个无分支的解决方案：

```
int mask = -(*ptr > 128);
number = (number & mask) | (5 & ~mask); 
```

最后一行也可以

```
number = ((mask & (number ^ 5)) ^ 5); 
```

如果您希望减少一项操作。但是，*请注意*，编译器也几乎无法优化其中任何一个。您最好让编译器担心这个特定的优化，除非您明确知道编译器无法进行优化（在这种情况下，您可能需要检查编译器版本或标志）。

# c# - 如何从javascript返回一个数组？（执行脚本）

> ID：12612018
> 
> 赞同：5
> 
> 时间：2012-09-26T23:36:19.183
> 
> 标签：c#, .net, webdriver, selenium-webdriver

虽然返回一个字符串很简单，但我就是不知道如何返回一个数组，这是一个不起作用的例子（myURLs 是一个全局数组变量）：

```
 List<object> list = ((IJavaScriptExecutor)driver).ExecuteScript(
        "window.myURLs = ['aa']; window.myURLs.push('bb'); return window.myURLs" 
        ) as List<object>; 
```

错误是：对象引用未设置为对象的实例。

如果有人有返回数组的示例，我很乐意看到它！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T00:02:40.267

从 JavaScript 返回数组时，.NET 绑定返回 a `ReadOnlyCollection<object>`，而不是 a `List<object>`。这样做的原因是您不能期望更改返回集合的内容并在页面上的 JavaScript 中更新它们。以下是从 WebDriver 项目自己的 .NET[集成测试中获取](http://selenium.googlecode.com/svn/trunk/dotnet/test/WebDriver.Common.Tests/)[的示例](http://selenium.googlecode.com/svn/trunk/dotnet/test/WebDriver.Common.Tests/ExecutingJavascriptTest.cs)。

```
List<object> expectedResult = new List<object>();
expectedResult.Add("zero");
expectedResult.Add("one");
expectedResult.Add("two");
object result = ExecuteScript("return ['zero', 'one', 'two'];");
Assert.IsTrue(result is ReadOnlyCollection<object>, "result was: " + result + " (" + result.GetType().Name + ")");
ReadOnlyCollection<object> list = (ReadOnlyCollection<object>)result;
Assert.IsTrue(CompareLists(expectedResult.AsReadOnly(), list)); 
```

# android - Android Listview 结合 textView 字段

> ID：12612019
> 
> 赞同：-1
> 
> 时间：2012-09-26T23:36:32.287
> 
> 标签：android, listview, orientation

我有一些问题要解决。

在纵向中，我需要简单的 listView，每行都有单独的按钮。在横向中，我需要将视图划分为两个区域。首先（假设在左边）是前面提到的 ListView。第二个区域包含几个在单击 ListView 后填充的 TextView。

问题：

1.  为了区分陆地和纵向，我将使用 layout-land 和 layout-port 文件夹。但在横向方向中，将很少有额外的控件。在 onCreate 方法中检查方向而不初始化其他控件就足够了吗？

2.  如何获得上述横向视图的描述？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:40:42.803

1.  你可以按照你说的方法来做。另一种可能性是在两种布局中都包含所有元素，但是在纵向方向中，您可以隐藏其中的一些（通过将宽度/高度设置为 0，或通过将[android:visibility](http://developer.android.com/reference/android/view/View.html#attr_android%3avisibility)设置为 2（消失））。

2.  您可以使用水平 LinearLayout 来获得两个并排的区域。LinearLayout 的第一个孩子将是您的 ListView。LinearLayout 的第二个子项可以包含您想要的额外 TextView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:13:45.717

我认为 Fragments 的使用适合您想要实现的布局。这是指向您可能会发现有用的教程的链接。 [http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)

希望有帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:49:48.183

您不需要在 onCreate 方法中检查方向，因为当方向改变时，android 操作系统会加载整个活动。

你只需要做一件事。`UI`在横向和纵向 xml 文件中提供相同的 id。这就足够了

# java - 一个抛出异常的java类

> ID：12612021
> 
> 赞同：0
> 
> 时间：2012-09-26T23:36:54.863
> 
> 标签：java, exception-handling

所以这不是一个错误，而是一个想法，我有一个 java 类，Jform1，它是一个 JForm。我试图只在 3 个文本字段中输入双精度值，然后对这些数字进行一些计算。但是，如果用户未能输入双精度值并输入任何我想抛出异常的字符，不仅仅是显示它是一个字符并且在标签或对话框中无效。所以我想创建一个 *entered_Valuenotvalid* 异常类，我该怎么做？我什至想不出该怎么做，主要是因为这是一个单独的类本身，然后 Jform 是一个单独的类，所以如果这里发生错误，那么我必须从 *entered_Valuenotvalid* 类中获取异常。

我唯一能想到的就是扩展 *entered_Valuenotvalid* 类，或者有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:58:48.003

异常只是 Throwable 的子类。创建您想要的类，选择要子类化的 JDK 异常（可能是 IllegalArgumentException），创建一个实例，然后`throw`就可以了。

# maven - 有元数据但找不到类

> ID：12612025
> 
> 赞同：0
> 
> 时间：2012-09-26T23:37:05.250
> 
> 标签：maven, jpa, many-to-many, datanucleus

雇员.java

```
@Entity
@Table(name="EMPLOYEE", 
uniqueConstraints = { @UniqueConstraint(columnNames={"EMPNO"}) })
public class Employee implements Serializable {
@Id
@Column(name="EMPNO")
private String empNo;
@Column(name="FIRSTNAME")
private String firstName;
@Column(name="midInit")
private char midInit;
@Column(name="LASTNAME")
private String lastName;
@OneToMany(fetch=FetchType.LAZY, mappedBy = "id.employee")
Set<EmployeeSchedule> schedules;
..... 
```

日程安排.java

```
@Entity
@Table(name="SCHEDULE_SLOT", uniqueConstraints = { @UniqueConstraint      
  (columnNames=        {"SLOTNO"})})
public class ScheduleSlot implements Serializable{
@Id @Column(name="SLOTNO")
private String slotNo;
@Column(name="SLOTSTART")
private Date slotStart;
@Column(name="SLOTEND")
private Date slotEnd;
@OneToMany(fetch=FetchType.LAZY, mappedBy="id.schedule")
private Set<Employee> employees ;//= new HashSet<Employee>() ;
.... 
```

EmployeeSchedule.java

```
@Entity
@Table(name="EMPLOYEE_SCHEDULE")
@AssociationOverrides(
    { @AssociationOverride 
        (   name = "id.employee", 
            joinColumns = @JoinColumn(name = "empNo")), 
      @AssociationOverride
        (   name = "id.schedule", 
            joinColumns = @JoinColumn(name = "slotNo"))     
    }) 
public class EmployeeSchedule {
@EmbeddedId 
EmployeeSchedulePK id;
@Column(name="available")
private boolean available;
@Column(name="UPDATEDON")
private Date updatedOn;
@Column(name="UPDATEDBY")
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="updatedBy")
private String updatedBy;

public EmployeeSchedule() {}

public EmployeeSchedule(EmployeeSchedulePK id) {
    this.id = id;
}
...... 
```

EmployeeSchedulePK .java

```
@Embeddable
public class EmployeeSchedulePK implements Serializable {
@ManyToOne 
private Employee employee;
@ManyToOne 
private ScheduleSlot schedule;
public EmployeeSchedulePK() {
} 
```

...

进行 Maven 安装时，出现以下错误。请指教..谢谢

DataNucleus 增强器（版本 3.1.0.release）：类的增强 “com.co.dsp.iwork.entity.EmployeeSchedule”类具有元数据，但找不到该类。请检查您的 CLASSPATH 规范。DataNucleus Enhancer 完成但出现错误。请查看增强器日志以获取完整详细信息。某些类可能已得到增强，但某些类导致了 dataneucleaus 日志显示的错误： - 类“com.co.dsp.iwork.entity.EmployeeSchedule”：填充元数据 13:22:59,059（主）调试 [DataNucleus.MetaData] -类“com.co.dsp.iwork.entity.EmployeeSchedule”字段“员工”：为嵌入类“com.co.dsp.iwork.entity.EmployeeSchedulePK”中的字段添加元数据，因为它没有出现在元数据中定义。13:22:59,059（主）调试 [DataNucleus.MetaData] - 类“com.co.dsp.iwork.entity. **13:22:59,060（主要）错误 [DataNucleus.MetaData] - **类“com.co.dsp.iwork.entity.#UNKNOWN.id”具有元数据，但找不到该类。****请检查您的 CLASSPATH 规范。** 13:22:59,061（主要）调试 [DataNucleus.MetaData] - org.datanucleus.metadata.InvalidClassMetaDataException：类“com.co.dsp.iwork.entity.EmployeeSchedule”具有元数据，但找不到该类。请检查您的 CLASSPATH 规范。13:22:59,063（主要）错误 [DataNucleus.Enhancer] - DataNucleus 增强器完成但出现错误。请查看增强器日志以获取完整详细信息。某些类可能已得到增强，但某些导致错误类“com.co.dsp.iwork.entity.EmployeeSchedule”具有元数据，但找不到该类。请检查您的 CLASSPATH 规范。org.datanucleus.metadata.InvalidClassMetaDataException：类“com.co.dsp.iwork.entity.EmployeeSchedule”具有元数据，但找不到该类。请检查您的 CLASSPATH 规范。在 org.datanucleus.metadata.ClassMetaData。

POM.xml：-

```
 <?xml version="1.0" encoding="UTF-8"?>
 <project xmlns="http://maven.apache.org/POM/4.0.0"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0   
http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.co.dsp</groupId>
<artifactId>dsp.dsp-iwork</artifactId>
<version>0.6.0-SNAPSHOT</version>
<name>DSP-iWork</name>
<packaging>jar</packaging>
<properties>
    <maven.test.skip>true</maven.test.skip>
    <dsp.version>0.6.0-SNAPSHOT</dsp.version>
    <equinox.ver>3.7.0.v20110613</equinox.ver>
<spring.maven.artifact.version>3.0.5.RELEASE</spring.maven.artifact.version>
    <slf4j.version>1.6.1</slf4j.version>
    <spring.osgi.version>1.2.1</spring.osgi.version>
</properties>
<dependencies>
    <dependency><groupId>com.co.dsp</groupId>
        <artifactId>dsp.kernel</artifactId>
        <version>${dsp.version}</version>
    </dependency>
<dependency><groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>3.1.1</version>
        <scope>runtime</scope>
    </dependency><dependency><groupId>com.co.dsp</groupId>
        <artifactId>dsp.dsi.das.dbconnection</artifactId>
        <version>${dsp.version}</version>
    </dependency><dependency>
        <groupId>com.co.dsp</groupId>
        <artifactId>dsp.dsi.das.core</artifactId>
        <version>${dsp.version}</version>
    </dependency>
    <dependency><groupId>com.co.dsp</groupId>
        <artifactId>dsp.dsi.das.api</artifactId>
        <version>${dsp.version}</version>
    </dependency>
    <dependency><groupId>com.co.dsp</groupId>
        <artifactId>dsp.dsi.dups.core</artifactId>
        <version>${dsp.version}</version>
    </dependency><dependency>
        <groupId>com.co.dsp</groupId>
        <artifactId>dsp.dsi.dups.api</artifactId>
        <version>${dsp.version}</version>
    </dependency><dependency>
        <groupId>com.co.dsp</groupId>
        <artifactId>dsp.dsi.scheduler</artifactId>
        <version>${dsp.version}</version>
    </dependency><dependency>
        <groupId>com.co.dsp</groupId>
        <artifactId>das-maven-plugin</artifactId>
        <version>${dsp.version}</version>
    </dependency>
</dependencies>
<repositories>
    <repository><id>nexus</id>
<url>http://sjc1ssadsp01.crd.co.com:8081/nexus/content/groups/public</url>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>nexus</id>
<url>http://sjc1ssadsp01.crd.co.com:8081/nexus/content/groups/public</url>
    </pluginRepository>
    <pluginRepository>
        <id>maven-repo</id>
        <name>maven repo</name>
        <url>http://repo.maven.apache.org/maven2/</url>
    </pluginRepository>
    <pluginRepository>
        <id>com.springsource.repository.bundles.milestone</id>
<name> SpringSource Enterprise Bundle Repository - SpringSource Milestone 
Releases</name>
<url>http://repository.springsource.com/maven/bundles/milestone</url>
    </pluginRepository>
</pluginRepositories>
<build><plugins><plugin>
<groupId>org.datanucleus</groupId>
<artifactId>maven-datanucleus-plugin</artifactId>
<version>3.0.1</version>
<configuration>
<fork>false</fork>
<log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
<verbose>true</verbose>
<enhancerName>ASM</enhancerName>
<persistenceUnitName>WorkPersistenceUnit</persistenceUnitName>
</configuration><executions><execution>
<phase>compile</phase><goals><goal>enhance</goal></goals></execution></executions>
</plugin><plugin>
<groupId>org.apache.felix</groupId>
<artifactId>maven-bundle-plugin</artifactId>
<version>2.3.7</version>
<extensions>false</extensions><executions>  <execution>
<id>bundle</id> <phase>package</phase><goals>
<goal>bundle</goal></goals></execution></executions>
<configuration>
<instructions>
<Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
<Bundle-Name>DSP iWork Integration</Bundle-Name>
<Bundle-Version>${dsp.version}</Bundle-Version>
<Bundle-Classpath>.</Bundle-Classpath>
<Import-Package>javax.persistence,com.co.dsp.dsi.scheduler,org.apache.log4j,
com.co.dsp.kernel.spi;version="0.3",com.co.dsp.kernel.util;version="0.3",
com.co.dsp.dsi.dups.api;version="0.3",com.co.dsp.dsi.dups.constants;version="0.3",
com.co.dsp.dsi.dups.exception,com.co.dsp.dsi.config,org.springframework.beans.factory,
org.springframework.osgi.context,org.springframework.osgi.util,
org.osgi.framework;version="1.5",com.co.dsp.dsi.das.api,javax.jdo, 
javax.jdo.identity, javax.jdo.spi</Import-Package></instructions></configuration>
</plugin></plugins>
    </build>
</project> 
```

**执行后更新部分消息： mvn clean process-classes -X**

```
 [DEBUG]Writing resolution tracking file C:\Users\502128830\.m2
\repository\asm\asm\resolver-status.properties
[DEBUG]Could not find metadata asm:asm/maven-metadata.xml in 
com.springsource.repository.bundles.milestone 
(http://repository.springsource.com/maven/bundles/milestone)
[DEBUG]Could not find metadata asm:asm/maven-metadata.xml in DN_M2_Repo 
(http://www.datanucleus.org/downloads/maven2/)
[WARNING]Could not transfer metadata asm:asm/maven-metadata.xml from/to 
local.repository (file:../../local.repository/trunk): No connector available to access 
repository     local.repository (file:../../local.repository/trunk) of type leg
acy using the available factories WagonRepositoryConnectorFactory
org.sonatype.aether.transfer.MetadataTransferException: Could not transfer metadata 
asm:asm/maven-metadata.xml from/to local.repository         
(file:../../local.repository/trunk): No connector available to access repository 
local.repository (
file:../../local.repository/trunk) of type legacy using the available factories 
WagonRepositoryConnectorFactory
        at org.sonatype.aether.impl.internal.DefaultMetadataResolver$ResolveTask.run
(DefaultMetadataResolver.java:588)
        at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run
(RunnableErrorForwarder.java:60)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask
(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run
(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.sonatype.aether.transfer.NoRepositoryConnectorException: No connector 
available to access repository local.repository (file:../../local.repository/trunk) 
of     type legacy using the available factories WagonRepositoryConnec
torFactory
        at 
org.sonatype.aether.impl.internal.DefaultRemoteRepositoryManager.getRepositoryConnector
(DefaultRemoteRepositoryManager.java:400)
        at org.sonatype.aether.impl.internal.DefaultMetadataResolver$ResolveTask.run
(DefaultMetadataResolver.java:559)
        ... 4 more
[DEBUG]Could not find metadata asm:asm/maven-metadata.xml in local (C:\Users\502128830
\.m2\repository)

[INFO]--- maven-datanucleus-plugin:3.0.1:enhance (default) @ dsp.dsp-iwork ---
[DEBUG]Could not find metadata org.datanucleus:datanucleus-core/maven-metadata.xml in 
local (C:\Users\502128830\.m2\repository)
 [WARNING]Could not transfer metadata asm:asm/maven-metadata.xml from/to 
local.repository (file:../../local.repository/trunk): No connector available to access 
repository     
local.repository (file:../../local.repository/trunk) of type leg
acy using the available factories WagonRepositoryConnectorFactory
org.sonatype.aether.transfer.MetadataTransferException: Could not transfer metadata 
asm:asm/maven-metadata.xml from/to local.repository     
(file:../../local.repository/trunk): No connector available to access repository 
local.repository (
file:../../local.repository/trunk) of type legacy using the available factories 
WagonRepositoryConnectorFactory
at org.sonatype.aether.impl.internal.DefaultMetadataResolver$ResolveTask.run
(DefaultMetadataResolver.java:588)
at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run
(RunnableErrorForwarder.java:60)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run
(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.sonatype.aether.transfer.NoRepositoryConnectorException: No connector 
available to access repository local.repository (file:../../local.repository/trunk) 
of  type legacy using the available factories WagonRepositoryConnec
torFactory
        at 
org.sonatype.aether.impl.internal.DefaultRemoteRepositoryManager.getRepositoryConnector
(DefaultRemoteRepositoryManager.java:400)
        at org.sonatype.aether.impl.internal.DefaultMetadataResolver$ResolveTask.run
(DefaultMetadataResolver.java:559)
        ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:23:54.587

你能发布你的pom吗？

您想使用 DataNucleus Enhancer 处理字节码。

您的插件必须进入编译阶段，这是错误的，因为它适用于已编译的类。

您应该将其绑定到流程类。

# c++ - 更改 inf 的 Visual C++ 输出

> ID：12612029
> 
> 赞同：2
> 
> 时间：2012-09-26T23:37:25.737
> 
> 标签：c++, visual-c++, io

在 Visual C++ 中，如果我有一个值为 inf 的 double，我使用流输出它：

```
double myval = std::numeric_limits<double>::infinity();
std::ostringstream msg;
msg << "This is infinite: " << myval; 
```

结果是“1.#INF”。

有没有简单的方法让它简单地打印“inf”或“INF”？这个字符串出现在随后将被解析的文本中，额外的字符给我们带来了问题。

我想过为 double 重载流运算符，但 double 是内置类型。

我承认我无法确切地弄清楚如何寻找基本问题的答案......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:44:49.257

这是可能的，但有点不重要，正确的方法是相当模糊的。

顺便说一句，我会注意到，当你做一些事情时，`msg << myval;`只有*一个*操作数必须是用户定义的类型，这里就是这种情况（即使*你*没有定义它，an`ostringstream`仍然是正式的用户-定义类型）。不过，这或多或少无关紧要。现有的过载`operator<<`将正常工作；你不需要提供你自己的。

我认为流是“媒人”。您有一个流缓冲区来处理实际的 I/O，还有一个语言环境来处理格式化。这样一想，解决方案就变得相当清楚了：由于您要更改的是格式，并且格式是由语言环境处理的，因此您需要更改语言环境。

然而，语言环境实际上是一个异构集合。具体来说，它是类的集合`facet`。在这种情况下，我们关心的切面就是`num_put`切面。num_put facet 类具有`do_put`各种类型的虚拟成员函数。在这种情况下，我们关心的是`double`：

```
template <class charT, class OutputIterator = std::ostreambuf_iterator<charT> >
class num_put : public std::num_put<charT, OutputIterator> {
public:
    virtual iter_type do_put(iter_type i, 
                             std::ios_base& b, 
                             char_type fill, 
                             double v) const 
    {
        if (v == std::numeric_limits<double>().infinity()) {
            static const char inf[]="inf";      
            std::copy(std::begin(inf), std::end(inf), i);
        }
        else {
            std::ostringstream temp;
            temp << v;
            std::copy(temp.str().begin(), temp.str().end(), i);
        }
        return i;           
    }
}; 
```

要使用它，您需要为相关流注入包含该方面的语言环境：

```
int main() {
    char *d="0";

    std::locale loc(std::locale::classic(), new num_put<char>);
    std::cout.imbue(loc);

    std::cout << 1.0/atoi(d);
    return 0;
} 
```

但是，我应该补充一点，这很快就被拍打在一起了，而且测试*非常*少。它适用于测试用例，也可能适用于其他狭窄的流。猜测一下，它可能需要更多的工作才能在宽流中正常工作。

# android - 创建 web 服务以在 drupal 中公开网站功能

> ID：12612030
> 
> 赞同：0
> 
> 时间：2012-09-26T23:37:40.807
> 
> 标签：android, web-services, drupal, service

我有一个已经在 Drupal 中创建的网站。在一个部分中，它由一个具有不同字段的表单组成，提交时会从数据库中返回结果。我想创建一个 android 应用程序以通过在 Android 中创建的表单访问此搜索功能，并在那里显示结果。有没有一种方法可以让我编写某种 Web 服务，它不会更改网站的任何代码并给我想要的结果。

有人可以指导我在这里做什么吗？我对 Drupal 了解不多，但我熟悉 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:38:33.987

你会想看看使用[服务](http://drupal.org/project/services)模块。Sumit Kataria 在 2011 年芝加哥 DrupalCon 上就如何[使用 Drupal 作为基础开发 android/iphone 应用程序](http://chicago2011.drupal.org/sessions/developing-apps-iphone-ipad-android-using-drupal-base-system)做了一个很好的演示（有会议视频）。他涵盖的内容比您要查找的内容更多，但确实提供了有关如何使用服务的很好的介绍。

# progress-4gl - ABL (http://www.progress.com/en/openedge/abl.html) 进展

> ID：12612031
> 
> 赞同：-1
> 
> 时间：2012-09-26T23:37:42.690
> 
> 标签：progress-4gl, openedge

我想学习 ABL（http://www.progress.com/en/openedge/abl.html）。你有什么想法我必须安装什么才能在家里练习吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:25:20.110

是的，这本手册将是很好的开始

[http://communities.progress.com/pcom/docs/DOC-16296](http://communities.progress.com/pcom/docs/DOC-16296)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:33:58.947

您需要下载评估套件。

[http://communities.progress.com/pcom/docs/DOC-103695](http://communities.progress.com/pcom/docs/DOC-103695)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T11:21:38.697

在 OpenEdge 11.6 Progress 中添加了免费的课堂版。您需要创建一个帐户，但不涉及任何费用。 [https://www.progress.com/openedge/classroom-edition](https://www.progress.com/openedge/classroom-edition)

# ruby-on-rails - 如何在我的 Rails 控制器操作之一的上下文中运行 jasmine 规范？

> ID：12612041
> 
> 赞同：0
> 
> 时间：2012-09-26T23:38:19.887
> 
> 标签：ruby-on-rails, jasmine

所以，我有一个 jasmine 规范，它只是测试使用 jQuery 检索一些 dom 元素。但是，我无法通过它，因为 jasmine runner 没有在带有 dom 元素的页面上运行。

我正在努力寻找有关如何将规范附加到控制器操作/视图的文档，以便他们可以测试事物与页面的实际交互方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:08:11.900

据我所知，您不能，而是创建页面的 html jasmine 固定装置，并在固定装置的上下文中运行您的 jasmine 测试。这是有关如何使用 jasmine 测试 jquery 和使用 jasmine-jquery 设置固定装置的更多信息。

[https://github.com/velesin/jasmine-jquery](https://github.com/velesin/jasmine-jquery)

# php - 从 views_php 过滤器返回 TRUE 未按预期工作

> ID：12612043
> 
> 赞同：3
> 
> 时间：2012-09-26T23:39:00.700
> 
> 标签：php, drupal, view

我在视图中编写了一个全局 PHP 过滤器，并且我希望在满足条件以及`TRUE`应该从我的结果集中消除该行时返回的值为 TRUE。该视图在表格中显示其结果。

我的过滤器代码如下

```
global $user;
$uid = $user->uid;
$bid = db_query("SELECT entity_id FROM {field_data_field_bid_request_reference} WHERE field_bid_request_reference_line_item_id = '$row->line_item_id'");
foreach($bid as $value) {
    $node_uid = db_query("SELECT uid FROM {node} WHERE nid = '$value->entity_id'")->fetchField();
    if( $node_uid != $uid) {
       return TRUE;
    }
} 
```

就 if 语句而言，我得到了我期望的结果。`$node_uid`正在返回我想要的，对于使用=`uid`创建节点的人来说，从.`nid``entity_id``db_query`

在我的测试中，我有 12 行，每行都有一个`line_item_id`. 有 6 个可能的结果，如果我使用 a查看foreach中的 4 `$node_uid`，我会看到它们。在我的测试用例中，我的 uid 为 5，这应该匹配 3 次。我应该在最终结果中只看到 3 行。`drupal_set_message``node_id`

问题在于，因为匹配 if 语句并应返回而应消除的 9 行`TRUE`实际上是显示的行，而应通过 if 语句测试并应显示的 3 行是从输出中删除的行。这几乎就像返回值被反转了一样。

当 if 语句通过时，我所做的就好像返回值不正确。

我本来希望返回的情况`node_id`不等于`uid`返回`TRUE`并且这些行不会出现在我的表中。

任何人都可以就可能出现的问题以及如何调试此过滤器提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:32:42.303

当过滤器显示 TRUE 时，它会过滤掉，AFAIK。所以，你可能应该有

```
if ($node_uid == $uid) {
  return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:07:37.813

我很确定您不能`foreach`在过滤器中使用语句`views_php`，只是因为过滤器的结果应该只应用于一行和一行。有点像“全有或全无”。

我建议编辑视图并将字段**Content: Author uid**添加到视图中，然后像这样调整您的`views_php`过滤器：

```
global $user;
$uid = $user->uid;
$node_uid = $row->uid;
if ($node_uid != $uid) {
  return TRUE;
} 
```

注意：*在*您将**Content: Author uid**字段添加到视图本身`$row->uid`之前，该变量将不可用。而且，您可以选择从视图中隐藏作者 uid 的值，这样没人会看到它：

 ***![将作者 uid 添加到每一行，然后将其从视图中隐藏。](../Images/be7497f5a4f9e8c5d4edb3539868b5d1.png)

希望有帮助...***

# r - R：整数与数字

> ID：12612048
> 
> 赞同：7
> 
> 时间：2012-09-26T23:39:55.253
> 
> 标签：r

这个问题可能之前已经回答过了，但我没有看到答案。

我有一个由数字和缺失值组成的数据集。一行是一个百分比。下面是一小部分假数据，其中 AA、BB 和 CC 是列名。该数据集中的第三行是百分比。

```
 AA    BB    CC
  234   432    78
 1980  3452  2323
 91.1    90  93.3
   34   123    45 
```

在这种情况下，当我读取数据集时，AA 和 CC 是数字，BB 是整数。我猜某处 90.0 被舍入到 90。如果我没有指定 BB 是数字，这会导致基本算术问题吗？

我相信如果 dd = 1 和 ee = 2 并且都是整数，那么 C 语言说 dd / ee = 0，而 R 说 dd / ee = 0.5。

下面是一系列简单的数学运算，似乎都表明 R 中的答案不会改变，无论数据是数字还是整数。尽管如此，我一直认为在读取数据时指定所有变量都是数字是明智的。使用谷歌，我发现了一个或两个数据类型似乎确实有所不同的例子，但不是在下面。

```
aa <- c(1,2,3,4,5,6,7)
bb <- 2
str(aa)
str(bb)

cc <- as.integer(aa)
dd <- as.integer(bb)
str(cc)
str(dd)

aa/bb
cc/dd
aa/dd
cc/bb

ee <- aa * aa
str(ee)
sum(ee/2)

ff <- cc * cc
str(ff)
sum(ff/2)

gg <- 4.14

hh <- ((aa * aa) * gg) / 2
hh
ii <- ((cc * cc) * gg) / 2
ii

jj <- (aa * aa) / gg
jj
kk <- (cc * cc) / gg
kk
jj == kk

mm <- as.integer(1)
nn <- as.integer(2)
mm/nn 
```

我想我希望得到保证，这不太可能是简单数学的问题，但我怀疑它可以。我一直认为这里有一个编程的基本规则，但我不确定那是什么。（我知道双精度的概念。）

感谢您对肯定是基本问题的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T23:44:40.967

使用运算符的除法`/`将始终返回“数字”，即相当于 C 中的“双精度”。首先将分子和分母强制转换为数字，然后进行除法。如果要使用整数除法，可以使用`%/%`. 如果你想创建一个整数，那么你可以使用`trunc`or`floor`或者你可以使用`round(x , 0)`或者你可以使用 as.integer。这些选项中的第一个第二个和第四个是等效的。即使打印的表示显示为整数，round 函数仍将返回“数字”。只要您对“双”/“数字”结果感到满意，我认为您无需担心。哎呀，我们甚至允许除以 0。

尽管输入为一堆整数，但您的“aa”变量被归类为“数字”，但您是否使用过：

```
aa <- 1:8  # sequences are integer class. 
```

听起来您似乎不会对[FAQ 7.31感到惊讶](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)

# hadoop - hadoop 1.0如何实现高可用

> ID：12612050
> 
> 赞同：0
> 
> 时间：2012-09-26T23:40:04.980
> 
> 标签：hadoop

由于Hadoop 2.0有一个备份节点来实现高可用，但是现在我使用的是Hadoop 1.0，所以我不知道如何解决name node的单节点故障。你能给我一些建议吗？

问题一：在Hadoop 2.0中，如果name node出现故障，backup node会自动变成name node还是需要手动更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:18:15.837

所以，这是一个老问题......不确定它是否仍然适用......

Hadoop 1.0 没有高可用性。在 2.0 之前，Hadoop 有一个 Secondary Namenode，这将有助于恢复 Namenode，但不是自动的，也不是高可用性。

因此，简单的回答是：“hadoop 1.0 如何实现高可用性？” 是：“它没有”

# flash - 为什么 scaleform 会将单独的影片剪辑上的蒙版合并为一个？

> ID：12612052
> 
> 赞同：1
> 
> 时间：2012-09-26T23:40:10.087
> 
> 标签：flash, actionscript-2, scaleform

我正在使用 scaleform gfx 3.3 进行项目。在 3Di 层上，创建了一堆不同的影片剪辑。他们中的一些人戴着面具。似乎发生的事情是所有蒙版都组合成一个 Alpha 通道。每个组件在不重叠时都会正确遮罩，但当它们重叠时，它们会共享较大组件的遮罩空间。

有没有办法强制 scaleform 单独尊重他们的面具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:39:05.833

您是否尝试过将影片剪辑移动到单独的图层并重新测试？仅供参考，Scaleform 4 中的掩蔽支持得到了极大的改进。你还在使用 3.3 有什么原因吗？

# c# - 在标签上显示特定时间的文本

> ID：12612057
> 
> 赞同：0
> 
> 时间：2012-09-26T23:40:45.277
> 
> 标签：c#, winforms

我想在标签中显示特定时间的文本，所以我在谷歌上进行了搜索，我找到了这两个解决方案：

***第一个解决方案是：***

```
public void InfoLabel(string value)
{
    if (InvokeRequired)
    {
        this.Invoke(new Action<string>(InfoLabel), new object[] { value });
        return;
    }
    barStaticItem3.Caption = value;

    if (!String.IsNullOrEmpty(value))
    {
        System.Timers.Timer timer = 
                                new System.Timers.Timer(3000) { Enabled = true };
        timer.Elapsed += (sender, args) =>
        {
            this.InfoLabel(string.Empty);
            timer.Dispose();
        };
    }
} 
```

***第二种解决方案：***

```
private void ShowTextForParticularTime(String caption)
{
    Timer t = new Timer { Interval = 5000, Enabled = true};
    t.Tick += (sender, args) => OnTimerEvent(sender, args, caption);  
}

private void OnTimerEvent(object sender, EventArgs e, String caption)
{
    barStaticItem3.Caption = caption;
} 
```

您能否告诉我这两种解决方案之间的差异，以及为什么我们使用这个符号 "=>" ，我也从这一行中一无所知：

```
if (InvokeRequired)
{
    this.Invoke(new Action<string>(InfoLabel), new object[] { value });
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:47:49.267

在 WinForms 和 WPF 中，只能从创建相关控件的线程更新 UI。这两种方法展示了两种从不同线程更新 UI 的方法。

第一种方法手动检查代码是否在不同的线程上运行，如果是，则编组对 UI 线程的调用。

第二种方法使用事件，将封送处理的细节留给 .NET

符号 => 代表一个[lamda 表达式](http://en.wikipedia.org/wiki/Anonymous_function)。你可以把它想象成一个函数指针（尽管有时它实际上是在幕后称为[表达式树的东西）。](http://msdn.microsoft.com/en-us/library/bb397951.aspx)本质上，它创建了一个变量，该变量指向可以通过引用该变量来调用的代码。

任何一种方法都应该可以正常工作。我个人更喜欢第二种方法，因为它允许框架处理更多的管道工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T23:52:07.630

好的，这里有很多解释。

您显示的两个选项之间没有重大差异。它们看起来不同的原因是因为第一个 id 在公共方法中声明了一个委托方法（lambda 表达式），而第二个只是创建了一个事件处理程序。他们做几乎完全相同的事情。事实上，您可以看到在委托方法中您有传统的事件处理程序参数（对象发送者，EventArgs e）。我个人更喜欢第二种解决方案，因为它对我来说看起来更干净。

Invoke Required 用于处理线程。在 C# 中，如果未创建可视对象的线程尝试更改可视对象，则会引发错误。为了解决这个问题，我们通过调用“Invoke”来调用创建视觉对象的线程。“InvokeRequired”属性只是告诉我们当前线程是否没有创建可视对象。在线程化或制作委托方法时，您应该始终使用它（因为您无法控制运行它们的线程。）

我希望这个简短的解释会有所帮助。如果不清楚，请发表评论

# javascript - 页面上的自动更新功能结果

> ID：12612060
> 
> 赞同：0
> 
> 时间：2012-09-26T23:41:04.610
> 
> 标签：javascript, iframe

好的，首先。没有 jquery，没有 ajax，只有纯 javascript。我在名为 text.html 的页面上有以下代码。

```
<html><body>
<script>
function live(ID,txt2) {
    var a = document.getElementById(ID);
    a.innerHTML = (txt2);
}
setInterval(live, 250);
a.innerHTML =(txt2);
</script>
<div id="txt1">Live</div><p />
</body></html> 
```

我在 live2.html 上有以下代码

```
<html>
  <body>
<p />
<iframe width="400" height="50" src="text.html" name="frameA" id="frameA"></iframe><p />        
<input type="button" value="Live" onClick="document.getElementById('frameA').contentWindow.live('txt1','L I V E')">
<input type="button" value="Rebroadcast" onClick="document.getElementById('frameA').contentWindow.live('txt1','Rebroadcast')"><br />
 <a href="text.html" target="frameA">text</a>
 </body>
</html> 
```

通过更新 iframe 中的信息，当前代码完全按照我的意愿工作。我的问题是这个。如果有人直接访问 text.html，我希望他们能够看到我将该文档更改为的内容。示例：我单击一个按钮，iframe 中的文本现在显示重新广播。其他人访问 text.html，他们也看到了转播。如果在他们查看 text.html 时，我点击了 live 按钮，text.html 页面将更新为 live 一词。我也可以对此进行 PHP 脚本编写。我已经尝试过 jquery 并且在让它正常工作方面遇到了问题，而且我真的没有知识或访问权限来实现很多其他的东西。这是一个正在进行的项目。我希望最终结果将是一个 iframe，我可以更新它，而实际上不在该框架所在的同一页面上。（同域）内容将是从图像到 youtube 嵌入和图片的任何内容。我正在尝试更全面地了解这种语言的工作原理，这就是为什么我要一步一步来。我对访问教程或查看预制解决方案没有任何问题。谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:43:23.007

我想我可能遗漏了一些东西。用户将始终看到文本“Live”，因为这是 text.html 中硬编码的内容。如果您通过 JavaScript 更改文本并不重要，因为它只会影响您正在查看的浏览器。您需要将其保存到持久存储（即数据库）并在页面上动态显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:38:52.917

live2.html 可以使用 AJAX 将更改发送到服务器，然后服务器可以更新 live.html。但这是一种糟糕的方法，因为这意味着 live.html 的内容是在您的版本控制和/或内容管理系统之外更新的。最好使用真实的数据库并动态生成页面，如 suke 所说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T01:40:58.480

首先，当学习编程语言的人没有完全理解一种语言能做什么和不能做什么时，就会发生这种情况。最初的想法是让特定的一群人知道它什么时候重播或者什么时候开始直播。我希望控制何时更改该信息，以便仅对各种管理员可用。最后，整个想法都被废弃了，完全不切实际。从本质上讲，该解决方案在我想要完成此任务的方式中并不存在。多年后...解决方案是在带有 CSS 的 div 标签内进行直播和转播。然后使用 JavaScript 函数将 div 的属性更改为隐藏或显示。按钮或链接需要与实时或重播文本存在于同一页面上。这也意味着不需要单独的框架。要从它所在的页面外部控制这个元素，只能通过在其他地方存储一个值并定期检查该值来完成。 [JSFiddle](http://jsfiddle.net/9goxv5aj/)

剧本：

```
var x = document.getElementById("txt1");
var y = document.getElementById("txt2");

function htext() {
    x.style.visibility = 'visible';
    y.style.visibility = 'hidden';
}

function stext() {
    x.style.visibility = 'hidden';
    y.style.visibility = 'visible';
}

function ctext() {
    var z = getComputedStyle(x).getPropertyValue("visibility");
    if (z != 'hidden') {
        stext();
    } else if (z != 'visible') {
        htext();
    }
} 
```

CSS：

```
#txt1 {
    visibility: hidden;
    margin-left:0px;
}
#txt2 {
    visibility:visible;
    margin-left:0px;
} 
```

的HTML：

```
<span id="txt1">Live</span>

<span id="txt2">Rebroadcast</span>

<br />
<a href="javascript://" onclick="ctext();">click</a> 
```

老实说。我不完全确定将信息存储在其他地方并检查某些条件是否为真所需的编程。上面的程序本质上将隐藏和显示一个 div。我可能会更进一步，使用 JQuery 来创建和删除实际的 div 本身。最后，这基本上接近我最终使用的解决方案，然后放弃并放弃了该项目。

# python - 在python中将\放在行尾有什么作用？

> ID：12612065
> 
> 赞同：7
> 
> 时间：2012-09-26T23:41:27.350
> 
> 标签：python

我正在查看以下代码：

```
totalDistance += \
      GetDistance(xCoords[i], yCoords[i],
                         xCoords[i+1], yCoords[i+1]) 
```

并且无法理解是什么`+= \`意思？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T23:42:27.090

`\`在一行的末尾只是表示它将在下一行继续，否则 ( `totalDist +=`) 会引发错误......（同样重要的是要注意斜线后面没有任何内容......甚至没有空格）

`+=`只需添加并分配回来

```
x = 1
x += 1 # x is now 2  (same as  x = x + 1) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T23:56:28.490

转义线紧随其后返回（在 the和隐式`\`之间不应有任何字符）。`\``\n`

还有一些其他的例外；当包含在以下匹配对中时，新行将被忽略：

*   `[]`
*   `()`
*   `{}`

换句话说，以下是等价的：

```
a= [1,2,3]
a = [1,
     2,
     3] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T00:08:05.800

`\`后跟换行符的组合表示行继续。您可以将`\`视为转义换行符，因此它没有通常的“行尾”含义。

在 Python 中，您通常可以安排代码，这样`\`就不需要了，例如。

```
totalDistance += GetDistance(
                     xCoords[i], yCoords[i],
                     xCoords[i+1], yCoords[i+1]) 
```

在这里，换行符不会结束行，因为它们在`()`

# java - Java JFrame 更新不起作用

> ID：12612068
> 
> 赞同：1
> 
> 时间：2012-09-26T23:41:48.983
> 
> 标签：java, swing, jframe

我的 Java 项目需要一些真正的帮助。它是一个控制台控制的 JFrame，您在控制台中键入的命令应该对 JFrame 窗口做出反应，但它不会。这是个大问题。这是我的代码（Engine.java）：

```
package com.boldchicky.commandsrpg.Main;

import java.io.*;

public class Engine {
public static boolean running;
public static GenerateWorld gw;

public static void main(String[] args) throws IOException{
    gw = new GenerateWorld();
    BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
    running = true;
    while(running){
        System.out.println("Enter a command:");
        String command = input.readLine();
        if(command.equalsIgnoreCase("move up")){
            gw.update(gw.getGraphics());
            GenerateWorld.x += GenerateWorld.dx;
            System.out.println("Moved!");
        } else {
            System.out.println(CommandControl.command(command));
        }
        if(CommandControl.add){
            String command2 = input.readLine();
            System.out.println(CommandControl.add(command2));
            CommandControl.add = false;
        }
        else if(CommandControl.remove){
            String command2 = input.readLine();
            System.out.println(CommandControl.remove(command2));
            CommandControl.remove = false;
        }
    }
    if(!running){
        System.exit(0);
    }
}
} 
```

命令控制.java：

```
package com.boldchicky.commandsrpg.Main;

import java.util.ArrayList;
import java.io.*;

public class CommandControl {
static ArrayList inv = new ArrayList();
public static boolean add = false;
public static boolean remove = false;
public static boolean move = false;
public static String commandReact = "";

public static String command(String command){
    BufferedReader input = new BufferedReader(new        InputStreamReader(System.in));
    if(command.equalsIgnoreCase("inventory")){
        if(inv.size() == 0){
            commandReact = "Empty!";
        }  else {
            commandReact = "";
            for(int i = 0; i<inv.size(); i++){
                commandReact += (String) inv.get(i) + "\n";
            }
        }
    }

    else if(command.equalsIgnoreCase("add")){
        add = true;
        commandReact = "What do you want to add?";
    }
    else if(command.equalsIgnoreCase("remove")){
        remove = true;
        commandReact = "Waht do you want to remove from your inventory?";
    }
    else{
        commandReact = "Please try again!";
    }
    return commandReact;
}

public static String add(String command){
    if(add){
        inv.add(command);
        commandReact = "Added!";
    }
    return commandReact;
}

public static String remove(String command){
    if(remove){
        if(inv.indexOf(command) != -1){
            inv.remove(inv.indexOf(command));
            commandReact = "Removed!";
        } else {
            commandReact = "Sorry! There is no " + command;
        }
    }
    return commandReact;
}
} 
```

生成世界.java：

```
package com.boldchicky.commandsrpg.Main;

import java.awt.*;

import javax.imageio.ImageIO;
import javax.swing.*;
import java.awt.image.*;
import java.io.File;
import java.io.IOException;

public class GenerateWorld extends JFrame{
public static int x = 0, y = 0, dx = 15, dy = 15;

public GenerateWorld() throws IOException{
    JFrame frame = new JFrame("Frame");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300, 300);

    Image background = null;
    Image player = null;
    String backgroundPath = "C:\\Users\\Jesse Du\\Documents\\java eclipse\\CommandsRPG\\res\\grass.png";
    String playerPath = "C:\\Users\\Jesse Du\\Documents\\java eclipse\\CommandsRPG\\res\\player.png";
    background = ImageIO.read(new File(backgroundPath));
    player = ImageIO.read(new File(playerPath));
    ImagePanel panel = new ImagePanel(background, player);
    frame.getContentPane().add(panel);
    frame.show();

    frame.setLocationRelativeTo(getRootPane());
    frame.setResizable(false);
    frame.setVisible(true);
}
} 
```

ImagePanel.java：

```
package com.boldchicky.commandsrpg.Main;

import java.awt.*;

import javax.swing.JPanel;

public class ImagePanel extends JPanel{
private Image backgroundImage;
private Image player;

public ImagePanel(Image background, Image player){
    super();
    this.backgroundImage = background;
    this.player = player;
}

public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.drawImage(this.backgroundImage, 0, 0, null);
    g.drawImage(this.player, GenerateWorld.x, GenerateWorld.y, null);
}
} 
```

谢谢你！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:51:16.867

您的`gw`对象，尽管是 JFrame 的一个实例，但不是您正在显示的 JFrame，因为在您的`GenerateWorld`构造函数中，创建、设计和显示了构造函数本身的本地 JFrame。不要创建本地 JFrame，而是使用`super`构造函数并将方法应用于超级实例。

```
public GenerateWorld() throws IOException {
    super("Frame");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    // ... etc 
```

此外，在这种情况下，您应该使用`repaint()`，而不是，并且您应该在修改*之后*而不是之前`update(Graphics)`调用它。

# php - PHP if(isset($_POST...)) 条件失败

> ID：12612069
> 
> 赞同：0
> 
> 时间：2012-09-26T23:41:52.060
> 
> 标签：php, forms, post, login, isset

这里的 PHP 问题，我制作了一个登录/注销类型的代码，其中一个`insert`和`delete`函数支持`login`and `logout`。

所以问题是，在我插入文本后，我根本无法删除它，因为删除按钮就像一个简单的返回按钮，并且没有使他的工作，`if(isset($_POST['delete']))`条件似乎没有任何工作。

问题可能是我正在使用两个引用同一页面的无效操作吗？导致第一个按钮工作而第二个按钮不工作。

任何人都可以理解为什么？

```
<html>
  <header></header>
  <body>
    <!-- START PHP --> 
    <?php
      //If not submit i put the submit form
      if(!isset($_POST['send'])){
        echo "<form name='send' action='' method='POST'>
          <input type='text' name='text' value=''/>
          <input type='submit' name='send' value='send' />
          </form>";
      }<!-- IF END --> 

      //If submit was set I insert $text into the db and I render
      //the delete button
      else {
        $conn= mysql_connect('localhost','root','');
        mysql_select_db('db_try',$conn ) or die(mysql_error());
        $dato=$_POST['dato'];
        mysql_query(" INSERT INTO test (value) VALUES ('$text') ") or die(mysql_error());
        echo "Operation complete";

        //Now i render the delete submit button...
        echo "<form name='delete' action='' method='POST'>
          <input type='submit' name='delete' value='delete' />
          </form>";

        //...and if i push it NOTHING, like it's only
        //a return to the first form button
        if(isset($_POST['delete'])){
          mysql_query(" DELETE FROM test WHERE value='$text' ") or die(mysql_error());
          echo "<br>Text'".$text."' deleted";
        }
      }<!-- ELSE END--> 
    ?><!-- END PHP -->
  </body>
</html>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:50:34.527

您的代码存在逻辑问题。单击删除按钮时，脚本将再次运行。您拥有的第一个条件 -`if(!isset($_POST['send']))`现在将通过，因为不再设置发送按钮，因此它进入 if 语句并且永远不会运行您的删除代码。

您的脚本似乎也容易受到 SQL 注入的攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:05:21.557

这是执行此操作的正确方法，这是一个快速提示，您需要在 mysql 插入安全等方面多做一些工作。

```
<html>
<header>
<body>

<?php

    $conn= mysql_connect('localhost','root','');
    mysql_select_db('db_try',$conn ) or die(mysql_error());

    if(isset($_POST['send'])){

        $text = $_REQUEST['text'];

        mysql_query(" INSERT INTO test (value) VALUES ('$text') ") or die(mysql_error());

        $answer = "Operation complete";

        $form = "<form name='delete' action='' method='POST'>
                <input type='submit' name='delete' value='delete' />
                </form>";

    }

    else if(isset($_POST['delete'])){

        mysql_query(" DELETE FROM test WHERE value='$text' ") or die(mysql_error());

        $answer = "Text'".$text."' deleted";

    }
    else {

        $form = "<form name='send' action='' method='POST'>
                <input type='text' name='text' value=''/>
                <input type='submit' name='send' value='send' />
                </form>";

    }

    print "<h1>" . $answer . "</h1>";
    print $form;

?>

</body>
</header>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:54:56.377

我认为它也可以工作......

```
if (!isset($_POST['submit']) || isa($_POST['submit'] != 'login')) 
```

# c# - 魅力栏不显示

> ID：12612075
> 
> 赞同：1
> 
> 时间：2012-09-26T23:43:00.303
> 
> 标签：c#, xaml, windows-8, microsoft-metro, charms-bar

实现设置魅力栏。关注 Michael Hauck 的 NuGet charmsflyout 库。

**成功**：“关于”按钮或链接显示在设置魅力中。然而 -

**问题**：单击“关于”后设置窗格消失

```
 private void CommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
    {
        var cmd = new SettingsCommand("about", "About This App", new Windows.UI.Popups.UICommandInvokedHandler(x =>
            {
                cfoSettings.IsOpen = true; // guessin problem is here??

            }));

        args.Request.ApplicationCommands.Add(cmd);

        SettingsPane.Show();
    } 
```

Xml代码：

```
 <cfo:CharmFlyout 
       x:Name="cfoSettings" 
       Heading="My Flyout" 
       HeadingBackgroundBrush="#FF4E0000">
        <StackPanel>
            <TextBlock 
               FontSize="16">CharmFlyout by John Michael Hauck</TextBlock>
            <TextBlock 
               FontSize="16">For support:</TextBlock>

        </StackPanel>
    </cfo:CharmFlyout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:24:12.817

我利用了这个并且没有任何问题，也许你想试试这个？ [Windows 8 Metro 应用程序的弹出控件](http://kuchenzeit.wordpress.com/2012/03/26/flyout-control-for-windows-8-metro-xamlc/)

# java - Maven 多模块项目和 Jenkins

> ID：12612076
> 
> 赞同：6
> 
> 时间：2012-09-26T23:43:04.887
> 
> 标签：java, maven, jenkins, multi-module

我以扁平结构的方式组织了以下项目：

```
parentProject
+-pom.xml

projectWeb <depends on libraryA and libraryB>
+-pom.xml

libraryA
+-pom.xml

libraryB
+-pom.xml 
```

parentProject 中的 pom.xml 引用了其他模块，并用于继承和依赖管理，这是一个片段：

```
<project>
    ....
    <modules>
        <module>../projectWeb</module>
        <module>../libraryA</module>
        <module>../libraryB</module>
    </modules>
    <dependencyManagement>
    ...
    </dependencyManagement>
    <build>
    ...
    </build>
    ....
</project> 
```

在**Jenkins**中，我为每个项目都有一个 maven 工作，当我构建 parentProject 时它工作正常，即。构建该`modules`部分中引用的每个项目。我遇到的问题是，当我向 SVN 提交更改时`libraryA`，我希望在构建 libraryA 之后，`projectWeb`将启动重建，但这并没有发生。有人知道我在做什么错吗？

提前致谢。

**编辑**

当我从 中删除该`modules`部分时`parentProject\pom.xml`，它按预期工作，但我失去了拥有父 pom.xml 的聚合优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:41:00.430

看起来你要求你的父 POM 做两件事：

1.  设置依赖管理的东西
2.  聚合您的构建

如果你把它分成两个 pom 通常会更好——#1 的父 pom 和#2 的聚合 pom。然后你会有类似的东西..

```
[root dir] aggregate pom.xml
+ /parent 
+ /web
+ /libA
+ /libB 
```

有关更多详细信息，请参阅此答案：[https ://stackoverflow.com/a/3301162/211993](https://stackoverflow.com/a/3301162/211993)

然后，您将配置 Jenkins 以检查根目录并运行“mvn clean install”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:04:06.503

这应该在 jenkins 作业中配置。参见“libraryA job”/“Configuration”/“Build Triggers”/“Build after other projects”

# .net - 寻求更好地理解数据绑定到 ViewModel

> ID：12612077
> 
> 赞同：0
> 
> 时间：2012-09-26T23:43:06.227
> 
> 标签：.net, wpf, xaml, data-binding

我仍然处于 WPF 和 MVVM 模式学习曲线的陡峭部分。我的部分方法是“了解星舰上的事情是如何运作的”（可以这么说）。也就是说，就我的学习方式而言，一些底层的理解对我有很大帮助。

所以在我看来，*我*在代码中采取的导致我的 ViewModel 实例化的操作是在 XAML 中声明 DataContext。有人可以为我确认或更正吗？换句话说，在这个 XAML 代码片段中，

```
<Window x:Class="MainRM21WPFapp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mainVM="clr-namespace:MainRM21WPFapp.ViewModels"
    Title="RM21 Demonstration Application" Height="500" Width="700">
<Window.DataContext>
    <mainVM:MainWindowVM />
</Window.DataContext>
<Grid>
...
</Grid> 
```

就是这个：

```
<Window.DataContext>
    <mainVM:MainWindowVM />
</Window.DataContext> 
```

这会导致 CLR 创建我的类 MainWindowVM 的新实例。我理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:04:27.430

那是对的。上面的 XAML 指示 WPF 实例化该类的实例`MainWindowVM`并将其分配给[DataContext](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)属性。例如，如果您需要调用带有参数的构造函数，您也可以在后面的代码中手动将其分配给 DataContext 属性，但 XAML 解决方案在您的情况下同样有效。

设置 DataContext 属性允许发生数据绑定。例如，如果您有一个[TextBlock](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx)控件，则可以将其绑定到属性 X：

```
<TextBlock Text="{Binding Path=X}" /> 
```

确保您的视图模型类实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口并触发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件以在属性更改时通知视图（您的 Window 类），以便它可以更新任何数据绑定。在上面的示例中，这确保了每当视图模型中属性 X 的值发生变化时，WPF 都会自动更新 TextBlock。

# android - 如何将监听器添加到 Android 上正在运行的服务

> ID：12612078
> 
> 赞同：2
> 
> 时间：2012-09-26T23:43:14.093
> 
> 标签：android

我向名为“BindService”的服务添加了一个侦听器。
然后我杀死了将侦听器添加到“BindService”的活动。
“绑定服务”仍在运行。我可以在 Eclipse 的 DDMS 上看到它。
现在我再次启动了 Activity，我想再次向“BindService”添加一个监听器。
我怎么能？

“BindService”只是一个计数服务。

使用以下代码，在我再次启动 Activity 并点击按钮“button_sendwords”后，它再次从 0 开始计数。那不是我的目的。

```
public class MainActivity extends Activity {

private ICallbackService service;
private static final int CALLBACK_MESSAGE = 1;

private Handler handler = new Handler(){
    @Override
    public void dispatchMessage(Message msg){
        if(msg.what == CALLBACK_MESSAGE){
            TextView resultlbl = (TextView)findViewById(R.id.label_result);
            resultlbl.setText((String)msg.obj);
        }else{
            super.dispatchMessage(msg);
        }
    }
};

private ICallbackListener listener = new ICallbackListener.Stub() {
    @Override
    public void receiveMessage(String message) throws RemoteException {
        handler.sendMessage(handler.obtainMessage(CALLBACK_MESSAGE, message));
    }
};

private ServiceConnection conn = new ServiceConnection(){

    @Override
    public void onServiceConnected(ComponentName name, IBinder binder) {
        service = ICallbackService.Stub.asInterface(binder);
        try{
            service.addListener(listener);
        }catch(RemoteException e){
        }
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
    }

};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btnSendWords = (Button)findViewById(R.id.button_sendwords);

    btnSendWords.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(MainActivity.this, BindService.class);
            bindService(intent, conn, BIND_AUTO_CREATE);
        }
    });
} 
```

}

# c# - Windows 8 Metro Apps C# 中 ArrayList 的继任者

> ID：12612083
> 
> 赞同：0
> 
> 时间：2012-09-26T23:44:05.187
> 
> 标签：c#, windows-8, microsoft-metro

我想在我的数组中使用行和列删除方法。因此，我想将我的数组转换`ArrayList`为使用该`RemoveAt(int index)`方法，但在使用 .NET 4.5 的 Windows 8 应用程序中没有`ArrayList`. 您能否给我一个建议，如何将我的简单`int[,]`数组转换为另一种类型，该类型具有行和列删除方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:49:49.567

您可以只使用列表列表：

```
List<List<int>> array = new List<List<int>>(); 
```

并将其初始化如下

```
for (int i = 0; i < orig_array.Length, i++)
{
    array.Add(new List<int>(orig_array[i]));
} 
```

使用这种方法，`array.RemoveAt(row)`将删除一整行，而`array[row].RemoveAt(col)`将删除一个元素。

编辑：正如 phoog 所指出的，对于声明为 int[,] 的数组，需要修改上述初始化，如下所示：

```
for (int row = 0; row < orig_array.GetLength(0), row++)
{
    array.Add(new List<int>());
    for (int col = 0; col < orig_array.GetLength(1); col++)
    {
        array[row].Add(orig_array[row, col]);
    }
} 
```

在这种情况下，使用锯齿状数组（与矩形数组相反）的优点是能够访问整行，而无需显式循环遍历这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:56:06.433

ArrayList 和所有非泛型集合已从 WinRT 中删除。[此处](http://en.csharp-online.net/CSharp_Generics_Recipes%E2%80%94Replacing_the_ArrayList_with_Its_Generic_Counterpart)的此链接将帮助您替换数组列表。

# wpf - Combobox ItemsSource 通过 objectdataprovider 通过传入一个方法参数

> ID：12612085
> 
> 赞同：2
> 
> 时间：2012-09-26T23:44:24.650
> 
> 标签：wpf, binding, objectdataprovider, method-parameters

我想从对象数据提供者填充组合框控件项。对象数据提供者调用我的自定义类的方法来获取项目列表。

但是，我的自定义类上的方法需要一个参数，然后才能返回项目列表。我不知道该怎么做。

这是我的尝试：

对象数据提供者声明：

```
<ObjectDataProvider x:Key="dataFromEnum" ObjectType="{x:Type ns:MyDataProvider}" MethodName="GetData">
            <ObjectDataProvider.MethodParameters>
                <sys:String>String.Empty</sys:String>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider> 
```

组合框声明：

```
<ComboBox Name="combobox" ItemsSource="{StaticResource dataFromEnum}" Tag="{Binding Path=Name}" /> 
```

如您所见，组合框的 Tag 属性绑定到父级数据上下文的 Name 属性。我想将该 Name 属性传递给对象数据提供者。我不确定在向对象数据提供者请求数据时如何将数据传递给它。

请指教。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:00:24.553

在 wpf 中，您必须为选择更改生成事件，因为您必须提供参考

```
clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity

 <ComboBox ItemsSource="{Binding UserSectionItems, Mode=TwoWay}" Margin="104,11,0,10" HorizontalAlignment="Left" Width="135" Name="UserCmd" >
            <l:Interaction.Triggers>
                <l:EventTrigger EventName="SelectionChanged">
                    <l:InvokeCommandAction Command="{Binding UserComboBoxSelectionCmd, Mode=TwoWay}" CommandParameter="{Binding ElementName=UserCmd,Path=SelectedItem}"/>
                </l:EventTrigger>
            </l:Interaction.Triggers>
        </ComboBox> 
```

在您的 Viewmodel 中看起来像

```
public RelayCommand<string> UserComboBoxSelectionCmd { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:04:26.957

有绑定到方法参数以调整其值的示例，但这在这里并不适用......

面对这一挑战，为什么不让 ViewModel 公开一个属性来绑定到组合控件的 ItemsSource？

通常我会有类似的东西：

```
public MySomething SelectedSomething { get; set; }
public IEnumerable<MySomething> AvailableSomethings
{
  get { /* Access a factory method or something to return applicable list for this view model state */ }
} 
```

那么绑定就变成了：

```
<ComboBox ItemsSource="{Binding path=AvailableSomethings}" SelectedItem="{Binding path=SelectedSomething}"/> 
```

# ios - iOS - 设置 ScrollView 当前页面

> ID：12612091
> 
> 赞同：0
> 
> 时间：2012-09-26T23:45:31.490
> 
> 标签：ios, scrollview, tableview, uislider, cgpoint

我正在做一个项目，我需要一个滚动视图来显示许多图像，并且我允许用户将滚动视图中的明确图片设置为收藏夹，并将收藏夹保存在 tableview 中，以便按照用户的意愿再次获取它。

我的问题是关于通过在 tableview 中选择行单元格返回的值设置滚动视图当前页面

现在这是我的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.textLabel.text;

    PagedScrollViewController *paged = [PagedScrollViewController alloc];

    NSString *page_str = [str substringFromIndex:9];

    int page_number = [page_str intValue];

    [paged.slider setValue: page_number] ;

    [paged.current_page_lbl setText:[[NSString alloc]initWithFormat:@"%i",page_number ]];

    int page = paged.slider.value ;

    NSLog(@"go to page %d",page_number);

    CGPoint pnt = CGPointMake((page-1) * paged.scrollView.frame.size.width , 0) ;
    [paged.scrollView setContentOffset:pnt animated:YES];

    NSLog(@"point is %d",pnt);

    [self dismissModalViewControllerAnimated:YES];

} 
```

从 tableview 返回时，ScrollView 页面没有更改

CGPoint 点也返回了一个负值，永远不会改变！那有什么问题？！

===========

我仍然需要帮助：

从具有确定页码的tableview返回时如何更新滚动视图？！

[这是我的故事板](http://www.imageshack.us/f/204/screenshotatq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:28:15.320

在您的内部`TableViewController`，为您的 PageScrollViewController（XIB 中的那个）创建一个出口。打电话给出口 myPaged 什么的。

然后，在里面`didSelectRowAtIndexPath`，你可以使用`myPaged`代替`paged`. （取出创建新实例的行`PageScrollViewController`）。

例如：

```
[myPaged.slider setValue: page_number]; 
```

将更改您`PageScrollViewController`在 XIB 文件中的滑块（您想要的那个）。

# javascript - HTML5 游戏的对象存储 - 使用什么？

> ID：12612093
> 
> 赞同：2
> 
> 时间：2012-09-26T23:45:40.437
> 
> 标签：javascript, xml, json, html, css

我是一个相当精通的程序员，所以学习新技术应该不是什么大问题。话虽如此，我目前正在尝试使用 canvas/javascript 等在 HTML5 中制作纸牌游戏。

我目前的问题是用什么来存储卡片的实例。我正在考虑使用 XML 来存储卡片数据，但我想限制浏览器必须做的工作量，以便游戏运行更流畅，我听说 JSON 是一个不错的选择，但我只是寻找建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:53:45.440

我认为 JSON 更好。
您可以在服务器端将对象序列化为 JSON 并将 JSON 字符串发送到客户端（浏览器），然后您的客户端将能够使用`JSON.parse`. 通过这种方式，您无需遍历 XML 来查找特定节点，而只需使用原生 JavaScript 对象/数组以更方便的方式处理数据。同样在大多数情况下，JSON 将比 XML 更紧凑，因此可以节省带宽并加快数据加载。
此外，数据类型在这里可能很重要——JSON 正确地表示数据类型（整数、布尔值、浮点数、字符串），而 XML 将它们存储为字符串，因此您需要一些额外的属性来在序列化期间设置数据类型并在反序列化期间确定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:55:34.900

我不确定如何在没有框架的情况下做到这一点，但我会使用 Backbone.JS 并创建一个实例外观的模型。例如：`{CardNumber:'2', CardColor: 'red', CardClass: 'hearts'}`。现在我将创建一个集合来保存所有这些模型，请参阅骨干集合。

所以我会在客户端存储所有这些数据，并可能为用户提供保存游戏的选项，将这些数据保存到数据库中。这会将其存储为 JSON，然后当您将其保存到数据库时，您可以对其进行序列化以获取各个组件。

如果您不想保存到数据库并且不想使用框架。尝试在 Javascript 中实现堆栈/队列。请参阅：[如何在 JavaScript 中实现堆栈和队列？](https://stackoverflow.com/questions/1590247/how-do-you-implement-a-stack-and-a-queue-in-javascript)

我希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:34:54.650

*   坚持使用 JSON，因为 JSON 只是普通 JS 对象的字符串表示，浏览器对它非常满意。JS 没有很好的 XML 处理能力，这太昂贵了。

*   使用 HTML5 localStorage 保存数据，直到您真正需要与服务器同步。频繁的服务器操作会导致您的游戏受到影响。使用批量数据传输而不是许多小型服务器连接（例如在开始和结束时）。

*   如果画布图形很密集，请考虑使用游戏库。我曾经使用过[http://jawsjs.com](http://jawsjs.com)，但应该有更好的库可用。选择性地仅渲染动态对象，而不是画布上的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T22:15:02.573

JSON 与[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)结合是一个很好的方法。

有一些库可用于序列化和反序列化 Javascript 对象，并允许您从 localStorage 存储和检索它。[简单的 Github 搜索](https://github.com/search?utf8=%E2%9C%93&q=localStorage&type=Everything&repo=&langOverride=&start_value=1)是一个很好的开始方式

# java - 将天数组织成年、月、日、小时的不同部分。爪哇

> ID：12612094
> 
> 赞同：1
> 
> 时间：2012-09-26T23:46:09.373
> 
> 标签：java, date, calendar, gregorian-calendar

有没有一种方法可以通过计算两个日期之间的差异来将天数组织到不同的部分，例如 364 天，它将是：0 年、11 个月、30 天、小时、分钟等。我想使用逻辑运算符可能像 % 和 / 一样工作，但由于不同的月份有不同的天数，有些年份是闰年，我不知道该怎么做。任何帮助将非常感激。我的代码：

```
import java.util.*;

public class CleanDate {

    public static void main(String[] args) {
        Calendar cDate = GregorianCalendar.getInstance();
        cDate.set(2011, 0, 31, 00, 00, 00);
        Date date1 = cDate.getTime();
        Date date2 = new Date();
        Calendar calendar1 = Calendar.getInstance();
        Calendar calendar2 = Calendar.getInstance();
        calendar1.setTime(date1);
        calendar2.setTime(date2);
        long milliseconds1 = calendar1.getTimeInMillis();
        long milliseconds2 = calendar2.getTimeInMillis();
        long diff = milliseconds2 - milliseconds1;
        long diffSeconds = diff / 1000;
        long diffMinutes = diff / (60 * 1000);
        long diffHours = diff / (60 * 60 * 1000);
        long diffDays = diff / (24 * 60 * 60 * 1000);
        System.out.println("Time in minutes: " + diffMinutes + " minutes.");
        System.out.println("Time in hours: " + diffHours + " hours.");
        System.out.println("Time in days: " + diffDays + " days.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:01:41.360

您可以像这样有效地使用 Joda Time： `Interval`允许获取两个日期之间的时间间隔。

```
DateTime end = new DateTime(2006, 1, 1, 0, 0, 0, 0);
Interval interval = new Interval(start, end);
Period period = interval.toPeriod();
System.out.println(period.getYears()+" years, "
period.getMonths()+" months, "+period.getWeeks()+" weeks, "+period.getDays()+", days"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-30T20:05:02.750

# java - 如何检查授权集合中是否存在授权？

> ID：12612096
> 
> 赞同：7
> 
> 时间：2012-09-26T23:46:41.817
> 
> 标签：java, spring, spring-security

```
Authentication auth = SecurityContextHolder.getContext().getAuthentication();
Collection<? extends GrantedAuthority> roles = auth.getAuthorities(); 
```

如何检查是否`roles`包含特定权限，例如`"ROLE_ADMIN"`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T22:07:39.657

我不知道任何内置函数，但这是您可以使用的实用方法。

```
if (userHasAuthority("ROLE_ADMIN")) { ... } 
```

.

```
public static boolean userHasAuthority(String authority)
{
    List<GrantedAuthority> authorities = getUserAuthorities();

    for (GrantedAuthority grantedAuthority : authorities) {
        if (authority.equals(grantedAuthority.getAuthority())) {
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-11T13:55:28.610

如果您不知道`GrantedAuthority`列表中的实现，罗伯特的回答是正确的，如下所示：

```
auth.getAuthorities().stream().anyMatch(ga -> ga.getAuthority().equals("ROLE_ADMIN")) 
```

但是，如果您知道它们都将是`SimpleGrantedAuthority`，那么您可以这样做：

```
auth.getAuthorities().contains(new SimpleGrantedAuthority("ROLE_ADMIN")) 
```

# c - 在 windows 终端中接受单字节特殊字符（在 cygwin 上测试）

> ID：12612098
> 
> 赞同：0
> 
> 时间：2012-09-26T23:47:14.943
> 
> 标签：c, utf-8, character-encoding, multibyte

我正在 Windows 终端中测试一个 C 程序。我模拟了一个我遇到问题的部分的快速示例。示例如下：

```
 $ cat test.c
 #include <stdio.h>
 #include <stdlib.h>

 int main() {
         char var[6];
         scanf("%s", var);

         int i=0;
         while(var[i] != '\0') {
              printf("%x ", var[i]);
              i++;
         }
      return 0;
 } 
```

当我使用带有“普通”字符（例如“dd”）的字符串时，输出如预期的“61 61”（十六进制 61 是字母“d”）。当我尝试输入特殊字符（例如 í（0xA1 或 U+00ED））时，我得到以下输出：

```
 $ ./a.exe
 í
 ffffffc3 ffffffad 
```

[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)上的 UTF-8 代码页显示向后的“i”实际上是 0xc3ad。我如何将此字符复制并粘贴为 0xA1，因为我真的想在终端中输入 0xA1，而不是 0xc3ad？我从“charmap”复制并粘贴它。我什至尝试在 ANSI 中保存带有字符的文本文件并复制和粘贴，但我仍然得到 0xc3ad。请帮助我。

编辑：在 mac 上运行同样的程序也给了我 c3ad。

# mysql - 更新 MySQL 语句

> ID：12612100
> 
> 赞同：-1
> 
> 时间：2012-09-26T23:47:28.360
> 
> 标签：mysql

我有以下问题：

我正在尝试在 Comp 中添加每个学生。科学。部门进入课程，这里是关系的DDL：

所需课程的值为 ('CS-001', 'Weekly Seminar', 'Comp. Sci.', 0)

* * *

```
Department 
      (dept_name [primary key], building, budget)

Course 
      (course_id [primary key], title, dept_name, credits)

Instructor 
      (ID [primary key], name, dept_name, salary) 
      Foreign Key is dept_name references Department

Section
      (course_id [primary key], sec_id [primary key], semester [primary key], year [primary key], building, room_number, time_slot_id) 
      Foreign Key course_id references Course

Teaches 
      ( ID [primary key], course_id [primary key], sec_id [primary key], semester [primary key], year [primary key]) 
       Foreign key ID references Instructor,
Foreign Key (course_id,sec_id,semester,year) references Section

Takes 
      (ID [primary key], course_id [primary key], sec_id [primary key], semester [primary key], year [primary key], grade) 
      Foreign key(course_id,sec_id,semester,year) references section Foreign key(ID) references student

Student 
      (ID [primary key], name, dept_name, tot_cred) Foreign key(dept_name) references department 
```

问题是我在尝试使用更新语句时遇到错误（错误是`1241 Operand should have 1 column`），请更正我的语法，因为它很可能是问题所在：

```
update takes
set ID=ID, course_id='CS-001', sec_id='1', semester='Fall', year=2009, grade=null
where
(
select distinct name, ID
from student natural join takes
where dept_name='Comp. Sci.'
); 
```

对不起，我是 MySQL 的新手，如果你能指导我纠正我的语法，并且可能是比我的更好的解决方案（不确定我的解决方案是否是一个解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:54:26.243

我不知道该`takes`表是什么样子，但假设您正确分配它，您的 WHERE 语句不提供比较操作。WHERE 需要对任何给定的返回行产生真或假结果。所以你需要加入`student`你的初始查询，并使用 where 来比较结果。

您的问题缺少有关 the`takes`和`student`表的信息，因此无法正确重写您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T23:56:29.317

您没有在您`WHERE`的子句中指定一列，这就是您得到的原因`Error 1241 Operand should contain 1 column(s)`

```
update takes
set ID=ID, course_id='CS-001', sec_id='1', semester='Fall', year=2009, grade=null
where
(
   select distinct name, ID
   from student natural join takes
   where dept_name='Comp. Sci.'
); 
```

或者，连接两个表

```
UPDATE  takes a 
        INNER JOIN student b
            ON a.ID = b.ID 
SET     a.ID = ID, 
        a.course_id='CS-001', 
        a.sec_id='1', 
        a.semester='Fall', 
        a.`year` = 2009, 
        a.grade = 0        -- you can't set NULL value when updating a column
WHERE   b.dept_name = 'Comp. Sci.' 
```

# javascript - 通过 Arduino 控制将 JavaScript 命令推送到网站

> ID：12612101
> 
> 赞同：0
> 
> 时间：2012-09-26T23:47:38.510
> 
> 标签：javascript, html, arduino

我有一个 HTML5 乒乓球游戏。您可以在 (http://pong.hackrdojo.com/) 上查看。如何制作控制器，我可以在其中使用带有两个按钮的面包板接口，所有按钮都链接到 Arduino 微控制器来上下移动桨？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:10:17.733

一个更简单的方法是购买一个 arduino leonardo board（在 ebay 上很便宜）。有创建键盘的演示代码。

1.  将您的罐子和开关映射到特定的键，例如键盘上的 up down 等。
2.  如果您使用的是 Windows，则可以使用一个名为 glovepie 的程序，该程序可让您设置配置文件以将特定键的键重新映射到游戏，以节省为每个游戏重新编程 arduino。

玩得开心制作游戏控制器。我就是这样做的，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:58:31.093

现在我正在使用 Aknosis 使用 Johnny Five 的解决方案（[https://github.com/rwldrn/johnny-five](https://github.com/rwldrn/johnny-five)）

我对任何其他选择持开放态度。

# workflow - 如何在 Alfresco Share 中自定义工作流详细信息页面？

> ID：12612102
> 
> 赞同：2
> 
> 时间：2012-09-26T23:47:43.857
> 
> 标签：workflow, share, alfresco, activiti

我想修改共享工作流详细信息页面 ( `/share/page/workflow-details?workflowId=activiti$XXXXX`)。具体来说，我想`Type`用另一个将显示任务标题的列替换历史表中的列（将其添加为新列也是一个很好的解决方案）。我正在使用 Alfresco Community 4.0e。

我阅读了这篇 wiki 文章[自定义共享工作流程 UI](https://wiki.alfresco.com/wiki/Custom_Share_Workflow_UI#Workflow_Details_Form)（“工作流程详细信息表单”部分），但这不是我需要更改的页面部分。

请问有什么想法吗？

您可以在这张图片中看到我要修改的列（见红色方块）：

![工作流详情页面截图](../Images/a824bff232ccf5fdcc23881256cbfaa7.png)

例如，它在哪里显示这些值（任务类型）：

```
Review

Workflow Task 
```

...我想打印这个（任务名称/标题）：

```
Quality Documents Review

Quality Documents Edition 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:13:57.423

*   要添加新列或修改显示的数据，您应该修改 `currentTasksColumnDefinitions`和`historyColumnDefinitions`在 **workflow-form.js**中，即`apache-tomcat\webapps\share\components\workflow\workflow-form.js`.

*   要修改现有的任务标题，只需要在属性文件即**workflow-messages.properties**中进行修改`apache-tomcat\webapps\alfresco\WEB-INF\classes\alfresco\workflow\workflow-messages.properties`

# app-engine-ndb - ndb ComputedProperty 过滤

> ID：12612109
> 
> 赞同：2
> 
> 时间：2012-09-26T23:48:29.803
> 
> 标签：app-engine-ndb

我有一个 User ndb.Model ，它的用户名 StringProperty 允许大写和小写字母，在某些时候我想通过用户名获取用户，但为了过滤而强制将大小写为小写。因此，我向 User: username_lower 添加了一个 ComputedProperty，它返回用户名的小写版本，如下所示：

```
 @ndb.ComputedProperty
    def username_lower(self):
        return self.username.lower() 
```

然后我像这样过滤查询：

```
 query = query.filter(User.username_lower==username_input.lower()) 
```

这有效，但是它仅适用于我将其添加到模型*后创建（放置）的用户。*之前创建的用户不会被此查询过滤。我首先认为 ComputedProperty 不适用于老用户。但是，尝试过这个并在老用户上调用 .username_lower 确实有效。

最后，我找到了一个解决方案是获取所有用户并运行 .put_multi(all_users)

因此，当您直接调用它但最初不过滤时，似乎稍后添加到模型中的 ComputedProperty 可以工作。它不会自动索引吗？或者它可能是一个缓存的东西..？

任何关于它为什么会这样表现的见解都将受到欢迎

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:30:50.667

这是预期的行为。当对象被“放置”时，ComputedProperty 的值（或我猜的任何属性）都会被索引。数据存储不执行自动模式更新或类似的操作。当您更新架构时，您需要在代码中允许不同的架构版本或单独更新您的实体。在索引更改的情况下，您别无选择，只能更新您的实体。[MapReduce API](https://developers.google.com/appengine/docs/python/dataprocessing/overview)可用于更新实体以避免请求限制等。

# javascript - 正确显示 Instagram 日期

> ID：12612110
> 
> 赞同：7
> 
> 时间：2012-09-26T23:48:33.933
> 
> 标签：javascript, api, date, instagram

这是我的网络应用程序的肮脏 JSFiddle 版本，但是，我不明白如何从 Unix 时间戳中正确调整日期，我只想显示月、日和年。

任何帮助将不胜感激！

[http://jsfiddle.net/89YCe/](http://jsfiddle.net/89YCe/)

这是代码：

```
 $(function() {
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/tags/crookedspaces/media/recent/?access_token=16741082.1b07669.121a338d0cbe4ff6a5e04543158a4f82",
        success: function(data) {
            console.log(data);
            //OKAY, now lets get to the pretty stuff, INSTAGRAM PEEKTARS.
            for (var i = 0; i < 5; i++) {
                    $(".instagram").append("\
                        <div class='instagram-feed'>\
                            <img class='instagram-image' src='" + data.data[i].images.standard_resolution.url +"' width='325px'/>\
                            <div class='igHover2'>\
                                posted by: "+data.data[i].user.username+"<br />\
                                posted on: "+Date(data.data[i].created_time).toString()+"<br />\
                            </div />\
                        </div>\
                    ");
            }
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T00:16:13.720

给你：

```
$(function() {
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/tags/crookedspaces/media/recent/?access_token=16741082.1b07669.121a338d0cbe4ff6a5e04543158a4f82",
        success: function(data) {
            console.log(data);
            //OKAY, now lets get to the pretty stuff, INSTAGRAM PEEKTARS.
            for (var i = 0; i < 5; i++) {
                var date = new Date(parseInt(data.data[i].created_time) * 1000);
                    $(".instagram").append("\
                        <div class='instagram-feed'>\
                            <img class='instagram-image' src='" + data.data[i].images.standard_resolution.url +"' width='325px'/>\
                            <div class='igHover2'>\
                                posted by: "+data.data[i].user.username+"<br />\
                                posted on: "+(date.getMonth()+1)+"/"+date.getDate()+"/"+date.getFullYear()+"<br />\
                            </div />\
                        </div>\
                    ");
                date = null;
            }
        }
    });
}); 
```

和这个工作[http://jsfiddle.net/89YCe/2/的现场演示](http://jsfiddle.net/89YCe/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T03:03:39.790

使用先前的答案，我在很多情况下都得到“NaN”。

Instagram 使用 Unix 时间戳，我发现这个脚本效果最好：

```
 $(function() {
$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "https://api.instagram.com/v1/tags/breathadvisor/media/recent/?access_token=16741082.1b07669.121a338d0cbe4ff6a5e04543158a4f82",
    success: function(data) {
        console.log(data);
        //OKAY, now lets get to the pretty stuff, INSTAGRAM PEEKTARS.
        for (var i = 0; i < 5; i++) {
            var date = new Date(data.data[i].created_time * 1000);
            var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            var year = date.getFullYear();
            var month = months[date.getMonth()];
            var date = date.getDate();
            var time = month+', '+ date+' '+year ;

                $(".instagram").append("\
                    <div class='instagram-feed'>\
                        <img class='instagram-image' src='" + data.data[i].images.standard_resolution.url +"' width='325px'/>\
                        <div class='igHover2'>\
                            posted by: "+data.data[i].user.username+"<br />\
                            posted on: "+time+"<br />\
                        </div />\
                    </div>\
                ");
            date = null;
        }
    }
}); 
```

});

这是一个jsfiddle：http: [//jsfiddle.net/jgknott/V5TCs/](http://jsfiddle.net/jgknott/V5TCs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T09:02:52.743

这是我制作的一个很好的 angularjs 工厂，用于像 instagram 一样显示日期：

```
 .factory('displaydate', ['$filter', function($filter) {
    return function (date){
        // Split timestamp into [ Y, M, D, h, m, s ]

        var actiondate = new Date(parseInt(date) * 1000);
        var today = new Date();
        if(today.getDate() === actiondate.getDate() && today.getMonth() === actiondate.getMonth() && today.getYear() === actiondate.getYear()){
            var hourssince =   today.getHours() - actiondate.getHours();
            var minutessince =   today.getMinutes() - actiondate.getMinutes();
            var secondssince =   today.getSeconds() - actiondate.getSeconds();
            if(hourssince > 0){
                date = hourssince+'u';
            }else if(minutessince > 0){
                date = minutessince+'m';
            }else{
                date = secondssince+'s';
            }
        }else{
            var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
            var diffDays = Math.round(Math.abs((today.getTime() - actiondate.getTime())/(oneDay)));
            if(diffDays >= 7){
                date = Math.round(diffDays / 7)+'w';
            }else{
                if(diffDays == '0'){
                    diffDays = '1';
                }
                date = diffDays+'d';
            }
        }
        return date;
    };
}]) 
```

# java - 存储过程不返回任何结果

> ID：12612116
> 
> 赞同：0
> 
> 时间：2012-09-26T23:49:13.100
> 
> 标签：java, oracle

我将数组的集合传递给存储过程。下面是存储过程的代码。

```
CREATE OR REPLACE PROCEDURE R5_QA_126.GIVE_ME_AN_ARRAY( p_list  in TEST_LIST, p_recordset OUT SYS_REFCURSOR)
AS
BEGIN
DBMS_OUTPUT.ENABLE(100);
DBMS_OUTPUT.PUT_LINE('Hi reached before begin');
 OPEN p_recordset FOR
  SELECT words, count
  FROM documents_token
  where words in (select word from table(p_list));
    EXCEPTION
     WHEN NO_DATA_FOUND THEN
       NULL;
     WHEN OTHERS THEN
       -- Consider logging the error and then re-raise
       RAISE;
END GIVE_ME_AN_ARRAY;
/ 
```

我有一个声明如下的类型。

```
CREATE OR REPLACE TYPE TESTREC AS OBJECT
(
  word VARCHAR2(500)
)
/ 
```

和表声明如下。

```
CREATE OR REPLACE TYPE TEST_LIST
AS TABLE OF TESTREC
/ 
```

当我尝试调用存储过程时遇到问题。ps.execute(); 从我的java代码。它不返回任何结果。

下面是我为调用数组设置的内容。

```
OracleCallableStatement ps = (OracleCallableStatement) conn
                    .prepareCall("{call GIVE_ME_AN_ARRAY(?,?)}");
            ps.setARRAY(1, array_to_pass);
            ps.registerOutParameter(2, OracleTypes.CURSOR); 
```

请让我知道我在这里做错了什么。我也在正确设置 ArrayDescriptor 和 StructDescriptor

# mysql - 为什么这个查询会导致锁等待超时？

> ID：12612117
> 
> 赞同：12
> 
> 时间：2012-09-26T23:49:20.817
> 
> 标签：mysql

我们的团队上周刚刚调试并试图找到许多 mysql 锁定超时和许多运行时间极长的查询的根源。最后，这个查询似乎是罪魁祸首。

```
mysql> explain 

SELECT categories.name AS cat_name, 
COUNT(distinct items.id) AS category_count 
FROM `items` 
INNER JOIN `categories` ON `categories`.`id` = `items`.`category_id` 
WHERE `items`.`state` IN ('listed', 'reserved') 
   AND (items.category_id IS NOT NULL) 
GROUP BY categories.name 
ORDER BY category_count DESC 
LIMIT 10\G

*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: items
         type: range
possible_keys: index_items_on_category_id,index_items_on_state
          key: index_items_on_category_id
      key_len: 5
          ref: NULL
         rows: 119371
        Extra: Using where; Using temporary; Using filesort
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: categories
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 4
          ref: production_db.items.category_id
         rows: 1
        Extra: 
2 rows in set (0.00 sec) 
```

我可以看到它正在执行令人讨厌的表扫描并创建一个临时表来运行。

为什么这个查询会导致数据库响应时间增加十倍，而一些通常需要 40-50 毫秒（项目表更新）的查询有时会爆炸到 50,000 毫秒甚至更高？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T00:32:40.047

如果没有更多信息，很难说

1.  那是在事务中运行吗？
2.  如果是这样，隔离级别是多少？
3.  有多少个类别？
4.  有多少项？

> 我的猜测是查询太慢并且它在事务中运行（这可能是因为你有这个问题）并且可能在 items 表上发出范围锁，它不允许写入继续，因此减慢更新直到他们可以锁在桌子上。

根据我从您的查询和执行计划中看到的内容，我有几条评论：

1）您的 items.state作为目录可能*会*更好，而不是在 items 的每一行上都有字符串，这是为了空间效率，并且比较 ID 比比较字符串快得多（不管引擎可能做的任何优化）。

2）我猜 items.state 是一个基数低的列（很少有唯一值），因此该列中的索引可能对您的伤害比对您的帮助更大。每个索引在插入/删除/更新行时都会增加开销，因为索引必须被维护，这个特定的索引可能没有那么多值得使用。当然，我只是猜测，这取决于其余的查询。

```
SELECT
    ; Grouping by name, means comparing strings. 
    categories.name AS cat_name, 
    ; No need for distinct, the same item.id cannot belong to different categories
    COUNT(distinct items.id) AS category_count  
FROM `items` 
INNER JOIN `categories` ON `categories`.`id` = `items`.`category_id` 
WHERE `items`.`state` IN ('listed', 'reserved') 
   ; Not needed, the inner join gets rid of items with no category_id
   AND (items.category_id IS NOT NULL) 
GROUP BY categories.name 
ORDER BY category_count DESC 
LIMIT 10\G 
```

这个查询的结构方式基本上是扫描整个 items 表，因为它使用 category_id 索引，然后通过 where 子句过滤，然后加入 category 表，这意味着在主键（categories.id ) 项目结果集中每个项目行的索引。然后按名称分组（使用字符串比较）进行计数，然后除掉 10 个结果之外的所有内容。

我会写这样的查询：

```
SELECT categories.name, counts.n
FROM (SELECT category_id, COUNT(id) n
      FROM items 
      WHERE state IN ('listed', 'reserved') AND category_id is not null
      GROUP BY category_id ORDER BY COUNT(id) DESC LIMIT 10) counts 
JOIN categories on counts.category_id = categories.id
ORDER BY counts.n desc 
```

（如果语法不完美，我很抱歉我没有运行 MySQL）

有了这个查询，引擎可能会做的是：

使用 items.state 索引获取“列出的”、“保留的”项目并按 category_id 比较数字而不是字符串，然后仅获取 10 个最高计数，然后加入类别以获取名称（但仅使用 10 个索引搜索） .

# c++ - 求解器软件，用于查找纯整数 MIP 的所有解

> ID：12612120
> 
> 赞同：2
> 
> 时间：2012-09-26T23:49:35.773
> 
> 标签：c++, c, integer, solver

我有一组问题（一组方程和不等式），我知道所有变量都必须是整数，并且有有限多个解。我知道，如果我采用任何随机目标函数并让 lp 或 mip 求解器对其进行求解，它会找到**解决**方案，但是我想要问题的**所有**解决方案，当然，尽可能高效。我并不真正关心优化任何东西，但显然大多数处理它的软件都会这样做。有没有可以做到这一点的求解器？如果是这样，哪一个是最好的/最简单的，或者你会推荐哪一个？充其量可以用作 C/C++ 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:48:57.407

[IBM ILOG CPLEX](http://www.ibm.com/software/integration/optimization/cplex-optimizer/)具有[解决方案池](http://www.decf.berkeley.edu/help/apps/ampl/cplex-doc/relnotescplex/relnotescplex19.html)功能，可免费用于学术目的。

如果您将最大池大小设置得足够大，我想您可能会获得所有解决方案。我不确定，没试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:47:46.263

Paul Rubin 有一篇关于如何找到最佳解决方案的不错的[博客文章](http://orinanobworld.blogspot.com/2012/04/k-best-solutions.html)`K`，可以很容易地推广到所有解决方案。正如 Ali 所建议的，其中一种方法是使用解决方案池。另外两种方法是：

1.  使用现有回调来跟踪和拒绝解决方案。
2.  使用带有解决方案注入的现有回调。

有关详细信息，请参阅[博客文章](http://orinanobworld.blogspot.com/2012/04/k-best-solutions.html)。

# php - 打开图 $_REQUEST 和元标记错误

> ID：12612125
> 
> 赞同：1
> 
> 时间：2012-09-26T23:50:38.657
> 
> 标签：php, codeigniter, facebook-opengraph, facebook-canvas

我一直在使用 Codeigniter 作为框架和宝塔盒作为托管服务的 Facebook 画布页面应用程序。到目前为止，我已经成功启动并运行了该应用程序，现在我正在尝试使用开放图形在人们的时间轴上发布交互。我遇到的问题是，当我将正在使用的 URL 插入调试器（http://developers.facebook.com/tools/debug）时，出现错误：

“您的 . " （逐字）

我已经浏览了我的代码，但我们还没有发现这是真的案例。所以我继续调试，发现错误集中在控制器中对 Facebook 的签名请求的 $_REQUEST 调用上。所以我用 html 标签包围了 $_REQUEST，它可以作为一种黑客攻击，但我想知道是否有更好的方法可以做。此外，它会导致图形 api 返回：

'"message": "发生意外错误。请稍后重试您的请求。", "type": "OAuthException", "code": 2"'

这是我的代码控制器的片段：

```
echo '<html>';
echo '<head>';

if(isset($_REQUEST['signed_request'])) {

    $encoded_sig = null;
    $payload = null;
    list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
    $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
    $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), TRUE), TRUE);

} else {
    echo 'error';
}
echo '</head>';
echo '</html>'; 
```

看法：

```
<!doctype html> 

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# app-name: 
              http://ogp.me/ns/fb/app-name#">

    <title>Facebook Title | Corp Name</title>
    <meta charset="utf-8" />
    <meta property="fb:admins" content="[Number]" /> 
    <meta property="fb:app_id" content="[App-id]" /> 
    <meta property="og:type"   content="app-name:action" /> 
    <meta property="og:url"    content="<?php echo base_url(); ?>" /> 
    <meta property="og:title"  content="The beginning" /> 
    <meta property="og:image"  content="[image-url]" />

    <script type="text/javascript">
    function postObject()
    {
        FB.api(
            '/me/app-name:object',
            'post',
            { invitation: '<?php echo base_url(); ?>' },
            function(response) {
            if (!response || response.error) {
                alert('Error occured');
            } else {
                alert('Accept was successful! Action ID: ' + response.id);
            }
            });
    }
    </script> 

</head>
<body>
....
</body> 
```

谢谢！

# recursion - 试图理解这个简单的递归代码

> ID：12612130
> 
> 赞同：0
> 
> 时间：2012-09-26T23:51:24.007
> 
> 标签：recursion

请帮助我理解这个简单的递归。我对编程很陌生，所以我想知道这到底是如何一步一步发生的。

我正在尝试学习递归，但我坚持添加“+”

```
function foo($bar) {
  if ($bar == 1) return 1;
  elseif ($bar == 0) return 0;
  else return foo($bar - 1) + foo($bar - 2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:02:27.580

当试图理解递归时，我发现为特定参数写下每个单独的案例然后从那里建立你的理解很有帮助。

所以让我们举个例子`foo(3)`

foo(3) -> 我们没有遇到任何基本情况，所以我们的函数现在想要返回

```
foo(2) + foo(1) 
```

首先我们需要得到 foo(2)

foo(2) -> 再次没有基本情况，所以我们返回

```
foo(1) + foo(0) 
```

foo(1) = 1 和 foo(0) = 0 （这些是我们的基本情况）所以我们看到

```
foo(2) = 1 + 0 
```

现在我们对 foo(3) 的看法被解析为

foo(3) -> (1 + 0) + foo(1)

foo(1) = 1，所以我们终于可以看到

foo(3) -> (1 + 0) + 1 = 2

你必须记住，递归基本上是构建一个函数调用的“树”——它会尽可能地沿着树向下走，然后上一层，看看它还需要做什么才能继续。我不确定这有多清楚，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:02:46.630

它真的很简单（一旦你把头绕在它周围）。在最后一行中，您调用了函数 foo 两次并将它们的返回值相加。

这是一个示例跟踪

```
call 1:
    foo(3)
    return foo(2) + foo(1)

    call 2:
        foo(2)
        return foo(1) + foo(0)

        call 3:
            foo(1)
            return 1

    unrolls to call 2:
        return 1 + foo(0)

        call 4:
            foo(0)
            return 0

    unrolls to call 2 again:
        return 1 + 0

unrolls to call 1:
    return 1 + foo(1)

    call 5:
        foo(1)
        return 1

unrolls to call 1 again:
    return 1 + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T23:54:21.240

*foo()*的第一次调用最终会调用*foo()*的另外两次调用。这两个中的每一个依次调用自己的两个，依此类推。

**第一次迭代**

富（）

**第二次迭代**

富（）富（）

**第三次迭代**

富() 富() 富() 富()

等等

因此，如果 foo() 没有达到终止条件之一，它总是会再调用自己两次。

添加一个指示调用深度的变量并让 foo() 打印出它的参数（包括调用深度参数）可能是有益的。

# mobile - Phonegap 插件执行寿命

> ID：12612134
> 
> 赞同：0
> 
> 时间：2012-09-26T23:51:53.313
> 
> 标签：mobile, cordova, phonegap-plugins

我想知道是否有人可以为我回答以下问题。

当从 JS 调用 Phonegap 自定义插件时，在插件返回`Status.RESULT`或后，插件`Status.ERROR`的生命周期是否终止，这意味着当您再次调用同一个插件时，它是创建插件的新实例还是创建插件的新实例？重用相同的现有实例（单例样式）？

我将解释我面临的任务，也许它会澄清我的问题可能造成的任何困惑。

我已经使用 HTML/JS 创建了一个应用程序。我有一个插件`ResourceManagerPlugin`负责从 CDN 加载文件并将这些文件缓存在移动设备上。`ResourceManagerPlugin`每次我需要一个新的新文件（.json、.png 等）时，我都会调用我的插件，这就是为什么我想知道是否`ResourceManagerPlugin`创建了一个新的实例，或者我是否一遍又一遍地使用同一个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:50:25.900

同一个实例被多次使用。

# python - python乘法表错误

> ID：12612136
> 
> 赞同：-1
> 
> 时间：2012-09-26T23:52:04.323
> 
> 标签：python, while-loop

我正在使用 while 循环在 python 中构建一个乘法表。虽然数字排成一行，但输出很奇怪。这张桌子在完成方面很好，但看起来很难看。我怎样才能拉直最后三列？我会发布输出的图片，但我是新用户，它不会让我这样做。

```
width = int(input("Please enter the width of the table:"))
def print_times_table(width):

    row = 0
    col = 0
    width += 1
    spaces = '  '

    while row < width:
        col = 0
        while col < width:

            print(row*col, spaces, end="")
            col += 1
        print("\n", end='')
        row +=1

print_times_table(width) 
```

输出：http: [//i.stack.imgur.com/C9AzE.jpg](http://i.stack.imgur.com/C9AzE.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:58:23.323

首先，您不需要图片；您应该能够通过缩进四个空格（或使用 {} 图标）将输出显示为文本：

```
Please enter the width of the table:4
0   0   0   0   0   
0   1   2   3   4   
0   2   4   6   8   
0   3   6   9   12   
0   4   8   12   16 
```

问题是您假设每个数字的宽度相同。这适用于 3x3，因为所有内容都是一个字符宽，但对于 5x5，有些数字是一个字符，有些是两个（当然在 10x10 时会变得更糟）。

解决此问题的简单方法是*强制*每个单元格具有相同的宽度。

首先，您必须计算所需的最大尺寸。但这很简单：它的大小为`width*width`.

接下来，您必须知道如何强制数字用完那么多字符。Python 有几种方法可以做到这一点。我将展示如何使用老式的字段说明符来做到这一点，但您应该研究如何将其转换为新样式的格式字符串。（如果这是家庭作业，教你 Python 3 的人可能会因为使用旧式字段规范而给你打分。如果只是为了你自己的自我教育，那么值得弄清楚如何同时做到这一点。）或者，你应该看看如何将其转换为使用可变宽度格式规范（`'%*d'`）而不是构建静态`'%4d'`规范。（nneonneo 的回答应该提供线索。）

```
width = int(input("Please enter the width of the table:"))
def print_times_table(width):

    row = 0
    col = 0    
    fieldspec = '%' + str(len(str(width * width))) + 'd'
    width += 1

    while row < width:
        col = 0
        while col < width:

            print(fieldspec % (row*col,), ' ', end="")
            col += 1
        print("\n", end='')
        row +=1

print_times_table(width) 
```

现在你得到：

```
Please enter the width of the table:4
 0   0   0   0   0  
 0   1   2   3   4  
 0   2   4   6   8  
 0   3   6   9  12  
 0   4   8  12  16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:48:05.687

为什么不将您的变量与 .ljust 结合使用？像这样：

```
width = int(13)
def table(width):

row = 1
col = 1
width += 1
spaces = '  '

while row < width:
    col = 1
    while col < width:
        print(str(row*col).rjust(5, ' '), end="")
        col += 1
    print("\n", end='')
    row +=1

table(width) 
```

它的工作原理完全相同（你可以使用任何你想要的数字，没关系），并根据你的数字有多大进行相应的调整......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:00:58.623

使用可变宽度字段说明符：

```
print('%*d' % (8, row*col), end='') 
```

这会自动添加足够的填充以将数字填充到（此处）8 个空格。您也可以将该间距参数作为参数传递。

要使用新样式格式语法使用可变宽度：

```
print('{:{width}}'.format(row*col, width=8), end='') 
```

# python - 在 Python 中计算 numpy 无符号整数之间差异的更好方法

> ID：12612141
> 
> 赞同：4
> 
> 时间：2012-09-26T23:53:22.297
> 
> 标签：python, numpy, uint

我正在计算`numpy.uint8`python 中两个 s 之间的绝对差，如果大于`d = abs(a - b)`，则会导致溢出错误。避免这种情况的最佳方法是什么？`b``a`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:02:17.437

正如您的评论所示，它们不是`int`s; 他们是`numpy.uint8`s。只需将它们转换为`int`s：

```
>>> a, b = map(numpy.uint8, (50, 60))
>>> a - b
__main__:1: RuntimeWarning: overflow encountered in ubyte_scalars
246
>>> a, b = map(int, (a, b))
>>> a - b
-10 
```

由于您关心速度，这里有几个测试（借用[Sven](https://stackoverflow.com/a/12612233/577088)的表格，谢谢）：

```
>>> %timeit abs(int(a) - int(b))
1000000 loops, best of 3: 410 ns per loop
>>> %timeit a - b if a > b else b - a
1000000 loops, best of 3: 470 ns per loop 
```

所以，是的，它更快，但除非我们谈论的是做数亿次，否则这并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T00:05:15.090

最简单的方法是先手动将数字转换为 Python 整数：

```
d = abs(int(a) - int(b)) 
```

Python int 不能溢出（除非内存已满）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T16:52:13.957

对我来说，它不会引发溢出错误，如果`b`大于`a`. 要留在`uint8`边界内，请使用此功能：

```
def abs_dev (a, b) :
    sub1 = a - b
    sub2 = b - a
    mask = a < b
    sub1[mask] = sub2[mask]
    return sub1 
```

# python - 允许 ToolItem 在工具栏中水平填充

> ID：12612147
> 
> 赞同：0
> 
> 时间：2012-09-26T23:54:19.697
> 
> 标签：python, layout, gtk, pygtk, toolbar

所以。
我一直忙于用 python 和 pygtk 做一个项目。我想（在顶部）有一个带有后退、前进等按钮的“工具栏”和一个长的条目，它将占据其余的水平空间。但是，我没有得到想要的效果，因为 Entry 占用的空间非常有限。

```
self.omnicont = gtk.ToolItem()

self.omni = gtk.Entry()
self.omnicont.add(self.omni) 
```

我试过 set_child_packing （似乎不适用于工具栏）。我找不到其他方法。我拥有的按钮是这样声明的：

```
self.bBack = gtk.ToolButton(gtk.STOCK_GO_BACK) 
```

和类似的，所以我认为不可能将这样的按钮放在 HBOx 中。

如何让 Entry 占用所有可用的水平空间，如果不可能，我如何让 HBox 包含带有股票图标的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:06:40.003

根据您可以使用的[文档：](http://www.pygtk.org/docs/pygtk/class-gtktoolitem.html#method-gtktoolitem--set-expand)

```
set_expand(True) 
```

在要展开的项目上。

# ruby-on-rails - 为什么选择标签在 Ruby on Rails 中保留它们的值？

> ID：12612155
> 
> 赞同：0
> 
> 时间：2012-09-26T23:54:57.833
> 
> 标签：ruby-on-rails

我的用户创建页面表单中有一个 text_field 和 select 标签：

```
= f.text_field :username, :value => "Username"
= f.select :gender, { "Male" => "male", "Female" => "female"}, :prompt => "Gender" 
```

当我离开页面并返回时，用户名 text_field 不会保留该值，但 select 标记**会**保留该值。为什么会这样？我没有做任何事情来保存选择标签性别值。我的假设是，因为它的 HTTP，默认情况下，如果我离开页面并返回，则不应保留这些值，除非我正在做一些事情来保留这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:58:52.557

您的浏览器可能会导致此问题。你使用的是什么浏览器？在浏览器中使用“查看源代码”命令来查看它是 Rails 应用程序还是浏览器。

# android - 从微调器将数组项传递给另一个活动

> ID：12612157
> 
> 赞同：0
> 
> 时间：2012-09-26T23:55:07.553
> 
> 标签：android, arrays, sdk, resources, spinner

大家好，请在这里帮助我，我有一个看起来像这样的微调器：

关于活动：

```
final Spinner cmbOpciones = (Spinner)findViewById(R.id.CmbOpciones);
spinner_adapter = ArrayAdapter.createFromResource( this, R.array.animal , android.R.layout.simple_spinner_item);
            spinner_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    cmbOpciones.setAdapter(spinner_adapter); 
```

在布局上：

```
<Spinner  android:prompt="@string/Poronga"
                   android:layout_height="wrap_content" 
                   android:layout_width="fill_parent" 
                   android:id="@+id/CmbOpciones"/> 
```

使用数组：

```
<resources>
    <string-array name="animal">
        <item>Elephant</item>
        <item>Turtle</item>
        <item>Rabbit</item>
        <item>Mouse</item>
    </string-array>

</resources> 
```

如何将微调器上数组的选定项传递给另一个活动，例如在文本视图或类似的东西中？有没有办法用字符串做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:00:52.933

我会用这样的东西......

```
cmbOpciones.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int pos, long id) {
        Intent intent = new Intent(<YourActivity>.this, Horario.class);
        intent.putExtra("selected", parentView.getItemAtPosition(pos).toString());
        startActivity(intent);
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) {
        // your code here
    }

}); 
```

然后在您打开的活动中...

```
Intent i = this.getIntent();
extras = i.getBundleExtra("extras");
String selected = "";
if(extras!=null){
    selected = extras.getStringExtra("selected");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:42:57.490

```
 cmbOpciones.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) 
            {
                Intent intent = new Intent(getApplicationContext(), Horario.class);
                intent.putExtra("selected", cmbOpciones.getSelectedItem().toString());
                startActivity(intent);

            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    } 
```

在接收方

```
 Bundle extras = getIntent().getExtras();
   if(extras != null)
    {
        String selectedItem = extras.getString("selected");
            TextView tv = (TextView)findViewById(R.id.txt01);
            tv.setText(selectedItem);
    } 
```

# c# - 在 C# 中合并数据表

> ID：12612160
> 
> 赞同：1
> 
> 时间：2012-09-26T23:55:15.850
> 
> 标签：c#

我在用 C#（dtA 和 dtB）编写的 ASP.NET 应用程序中有两个 DataTables。两者都从用户输入的文本框中填充。他们每个人一次只有一个数据行。例如，dtA 可以具有以下值 [ABC, DEF]，其中列名是名字和姓氏，dtB 可以具有以下值 [50, 100, 95]，其中列名是等级。我需要知道如何将这两个表组合成一个名为 dtC 的新数据表，这样我就可以返回 dtC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:06:42.687

就像是：

```
 var dtC = new DataTable("CombinationOfBoth");
        dtC.Columns.Add("Firstname",typeof(string));
        dtC.Columns.Add("Lastname", typeof (string));
        dtC.Columns.Add("Grade1", typeof (int));
        dtC.Columns.Add("Grade2", typeof(int));
        dtC.Columns.Add("Grade3", typeof(int));

        dtC.Merge(dtA,false,MissingSchemaAction.Ignore);
        dtC.Merge(dtB, false, MissingSchemaAction.Ignore); 
```

请注意，dtA 的列名应与“Firstname”和“LastName”相同，dtB 也应具有“Grade1”、“Grade2”、“Grade3”

或者您可以将 dtC 上的列名更改为与 dtA 和 dtB 上的列名完全相同

# .net - 如何强制 .NET 3.5 应用程序在 .NET 4.5 运行时上运行？

> ID：12612166
> 
> 赞同：5
> 
> 时间：2012-09-26T23:56:17.777
> 
> 标签：.net, .net-4.5

我正在尝试实施此处描述的解决方案：[我可以在以 .NET 3.5 SP1 为目标时使用 .NET 4 功能吗？](https://stackoverflow.com/questions/6119614/can-i-use-a-net-4-feature-while-targeting-net-3-5-sp1/6134742#6134742). 当 .NET 3.5 应用程序在 .NET 4.0 上运行时，它可以正常工作。但是，在 .NET 4.5 上，应用程序在 .NET 3.5 环境中运行。我尝试了以下方法：

```
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
<supportedRuntime version="v4.0"/>
<supportedRuntime version="v2.0.50727"/> 
```

没有成功。`Environment.Version`在 .NET 4.0 上仍然`2.0.50727.5456`显示一切正常。

有没有办法强制 .NET 3.5 应用程序使用 .NET 4.5（如果有）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T01:19:01.613

这是我的错：app.config 意外没有被复制到构建目录中。一切都适用于：

```
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
<supportedRuntime version="v4.0"/>
<supportedRuntime version="v2.0.50727"/> 
```

# apache - 如何调试 htpasswd 访问？

> ID：12612170
> 
> 赞同：1
> 
> 时间：2012-09-26T23:56:48.707
> 
> 标签：apache, .htaccess, .htpasswd

我有一个托管在 hostgator 上的站点，我已经设置了一个目录来使用 htaccess/htpasswd 进行身份验证。它工作正常，但仅适用于名为 test 的用户。

这是相关的htaccess

```
<filesMatch "(-priv)">
    AuthType Basic
    AuthName "Private Area"
    AuthUserFile /home/username/public_html/site/test/.htpasswd
    Require user test
</filesMatch> 
```

并且 htpasswd 有 2 个用户

```
test:ovCvloB9kYgBQ
admin:RxvCRMqtdryys 
```

我可以使用测试用户登录，但如果我使用*任何*其他名称身份验证失败。我可以更改测试用户的密码，并且身份验证反映了更改。该行为在浏览器和 IP 之间是一致的。

有没有办法调试这个？

在你说之前，我知道不要将 .htpasswd 文件放在 webroot 之上，这是一个测试设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:01:34.370

你有`Require user test`

改成`Require valid-user`

# java - 使用 Java 库以特定形式解析日期

> ID：12612173
> 
> 赞同：0
> 
> 时间：2012-09-26T23:57:08.690
> 
> 标签：java, date

我正在运行一个应用程序，它给我 CSV 日志作为输出。对于日期字段，它以以下形式提供给我：

“09/25/2012 08:47:46.983”

我想将输出数据读入 Java 程序，翻译给定的输出并将其作为 long 存储在我的程序中。Java 中的 DateFormat 类或其他类似类是否允许我以上述形式指定字符串？（我可以编写自己的代码来解析上述行，但我不想对传入字符串的形式做出错误的假设。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:05:07.177

```
public class TestTest {

public TestTest() {
    String dateString = "09/25/2012 08:47:46.983";

    DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy kk:mm:ss.SSS");

    try {
        Date date = dateFormat.parse(dateString);

        System.out.println("Date is: " + date.getTime());
    } catch (ParseException ex) {
        Logger.getLogger(TestTest.class.getName()).log(Level.SEVERE, null, ex);
    }

}

public static void main(String[] args) {
    TestTest test = new TestTest();
}

} 
```

# php - 如何防止来自引用页面的查询被传递？

> ID：12612175
> 
> 赞同：0
> 
> 时间：2012-09-26T23:57:32.840
> 
> 标签：php, http-headers, referer

我正在为一家 SEM 公司设置一些东西，该公司在 google 上对广告进行出价并将流量发送给各种合作伙伴。用户显示一个包含他们搜索的 KW 的 URL (site.com?k=laser%20tag) 并分析流量。到合作伙伴的传出流量通过一个文件 (site.com/outgoing.php)，该文件具有“header("Location: $destination");" 在底部，$destination 是 200 个合作伙伴的 URL 之一。

这很好用，但问题是当用户离开网站去找合作伙伴时，他们可以看到引荐页面并且可以看到搜索词是什么。他们希望合作伙伴看不到他们竞标的条款，因为这将允许合作伙伴绕过他们并推出自己的 SEM 策略。

有没有办法可以从“outgoing.php”文件中的引用 URL 中删除查询？由于所有的流量都通过这个文件，我不能把它放进去吗：

```
$ref=explode('?',$_SERVER['HTTP_REFERER'])
header("Referer: $ref");
header("Location: $destination"); 
```

或者，我是否需要首先阻止查询显示在 URL 中？

# flash - Flex 刷新树

> ID：12612176
> 
> 赞同：0
> 
> 时间：2012-09-26T23:57:42.050
> 
> 标签：flash, apache-flex

我有一个带有对象作为数据源的 mx:Tree。具有这种结构的数组

```
[ 
  {label: "label1", children: [] },
  {label: "label2", children: [] }
] 
```

问题是：如果我在此数组或此数组的某些子项中添加或删除某些元素（或重命名某些标签），我需要操作树（打开或关闭某些项目）以查看更改。有一些方法可以刷新 mx:Tree 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:17:37.683

我建议将您的数组包装在 ArrayCollection 中。然后你可以打电话

```
tree.dataProvider.refresh(); 
```

强制 itemRenderers 刷新自己。

只使用一个数组；您可能必须更换 dataProvider；概念上是这样的：

```
tree.dataProvider = updateArray; 
```

它会起作用，但可能会导致刷新并且可能无法保持所有项目打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:22:27.353

我有一个类似的问题，并且必须在每次更改数组后将数组作为 dataProvider 重新分配给树

# debugging - MDX 调试器中的数据透视表在哪里

> ID：12612178
> 
> 赞同：1
> 
> 时间：2012-09-26T23:58:19.173
> 
> 标签：debugging, ssas-2012

[我正在阅读一篇](http://cwebbbi.wordpress.com/2012/02/21/using-the-mdx-script-debugger-in-bids/) 我正在使用 SQL Server 2012 Datatools 的文章。我按 F10 开始在计算中调试 MDX 代码。光标突出显示了第一条语句，Calculate。但我没有看到数据透视表选项卡。我只看到 MDX1、MDX2、MDX3 和 MDX4 选项卡。

在哪里可以找到浏览器控件？

![在此处输入图像描述](../Images/a45a1c9656715267c9f7cc79661cbfa9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T01:11:34.407

这已被删除。我认为这不好。

[http://msdn.microsoft.com/en-us/library/ms143682.aspx](http://msdn.microsoft.com/en-us/library/ms143682.aspx)

SQL Server 2012 中的行为更改

* * *

本部分记录了 SQL Server 2012 中 SQL Server 2012 Analysis Services (SSAS) 功能报告的行为更改。

分析服务，多维模式

Management Studio 和多​​维数据集设计器中的多维数据集浏览器已被删除

允许您将字段拖放到 Management Studio 或多维数据集设计器中的数据透视表结构的多维数据集浏览器控件已从产品中删除。该控件是一个 Office Web 控件 (OWC) 组件。OWC 已被 Office 弃用并且不再可用。

# ios - iOS 音频混合

> ID：12612184
> 
> 赞同：1
> 
> 时间：2012-09-26T23:59:12.853
> 
> 标签：ios

当混合两个音频文件时，这段代码显示一个声音被视为立体声，另一个被视为单声道，这是为什么呢？为什么不能将它们都视为立体声？

```
 @property (readwrite)           AudioStreamBasicDescription stereoStreamFormat;
 @property (readwrite)           AudioStreamBasicDescription monoStreamFormat; 
```

音频文件的检查是这样的。

```
 if ((inputDataFormat.mFormatID == kAudioFormatLinearPCM) &&
    (inputDataFormat.mSampleRate == 44100.0) &&
    (inputDataFormat.mChannelsPerFrame == 2) &&
    (inputDataFormat.mChannelsPerFrame == 2) &&
    (inputDataFormat.mBitsPerChannel == 16) &&
    (inputDataFormat.mFormatFlags == (kAudioFormatFlagsNativeEndian |
                                      kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger))
    ) {
    // no-op when the expected data format is found
} else {
    status = kAudioFileUnsupportedFileTypeError;
    goto reterr;
} 
```

为什么遇到该数据格式时会触发无操作条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:26:04.670

> 当混合两个音频时，这段代码显示一个声音被视为立体声，另一个被视为单声道，这是为什么呢？

这是您正在使用的任何库的实现细节。

> 为什么不能将它们都视为立体声？

好吧，*如果您编写支持代码来复制信号/流的数据*，他们当然可以。通常，您**不**会这样做，而是保留区别（如原作者所做的那样），因此您的渲染链不会使渲染或文件大小加倍。

> 为什么遇到该数据格式时存在无操作条件？

这只是作者的写作风格。这个表达式可以写成几种方式。

# android - 获取 Toshiba Thrive 内核的编译器错误

> ID：12612188
> 
> 赞同：1
> 
> 时间：2012-09-26T23:59:39.317
> 
> 标签：android, linux-kernel

我有 Toshiba Thrive 10.1"，最近获得了它的内核源代码。我的最终目标是在其上运行桌面 Linux，例如 Ubuntu。

我找到了一个关于如何在上面获得 B&N Nook Color 的指南，然后我跟着它，对 Ubuntu 进行了修改（因为我已经下载了 Ubuntu ARM），但遇到了一个障碍：我会得到“/dev/tty0 ： 没有这样的文件或目录”。我会尝试 simlinking，但我最终会得到“没有可用的免费 VT”。

一点点谷歌搜索建议我需要启用 VT 支持。这很简单：获取 NDK，.config 文件，使用“CONFIG_VT=y”对其进行编辑。当我在那里时，我对其进行了修改以支持 CD。

然后我导出了 Thrive 的设置，然后运行 ​​make。问了我几个问题，然后我错了：

```
 CC      arch/arm/mach-tegra/pm-t2.o

arch/arm/mach-tegra/pm-t2.c:74: error: pllx causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:74: error: pllx causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:85: error: emc_0 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:85: error: emc_0 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:93: error: emc_1 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:93: error: emc_1 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:102: error: emc_2 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:102: error: emc_2 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:114: error: emc_3 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:114: error: emc_3 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:123: error: emc_4 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:123: error: emc_4 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:131: error: emc_5 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:131: error: emc_5 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:145: error: emc_6 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:145: error: emc_6 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:160: error: emc_dqsib_dly causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:160: error: emc_dqsib_dly causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:164: error: emc_quse_dly causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:164: error: emc_quse_dly causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:168: error: emc_clktrim causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:168: error: emc_clktrim causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:173: error: emc_autocal_fbio causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:173: error: emc_autocal_fbio causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:188: error: emc_autocal_interval causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:188: error: emc_autocal_interval causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:195: error: emc_cfgs causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:195: error: emc_cfgs causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:214: error: emc_adr_cfg1 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:214: error: emc_adr_cfg1 causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:228: error: emc_digital_dll causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:228: error: emc_digital_dll causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:239: error: emc_dqs_clktrim causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:239: error: emc_dqs_clktrim causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:245: error: emc_dq_clktrim causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:245: error: emc_dq_clktrim causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:251: error: emc_dll_xform_dqs causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:251: error: emc_dll_xform_dqs causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:258: error: emc_odt_rw causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:258: error: emc_odt_rw causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:269: error: arbitration_xbar causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:269: error: arbitration_xbar causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:273: error: emc_zcal causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:273: error: emc_zcal causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:278: error: emc_ctt_term causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:278: error: emc_ctt_term causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:287: error: xm2_cfgd causes a section type conflict

arch/arm/mach-tegra/pm-t2.c:287: error: xm2_cfgd causes a section type conflict

make[1]: *** [arch/arm/mach-tegra/pm-t2.o] Error 1

make: *** [arch/arm/mach-tegra] Error 2 
```

我现在的问题是，我需要做什么来解决这个问题？我没有对源代码本身进行任何修改，只是对配置文件进行了修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:17:05.870

事实证明，我*确实*有错误的 GCC。当我需要使用 4.6 时，我使用的指南说使用 4.4.3。一旦我这样做了，我就没有任何编译器错误。一些警告，但我对此无能为力。

# cnc - 需要改写CNC文件来移动绝对位置

> ID：12612192
> 
> 赞同：1
> 
> 时间：2012-09-27T00:00:24.587
> 
> 标签：cnc

这个问题实际上分为两部分。为了简单介绍这个问题，我们需要获取一个使用名为 ArtCam 的工具生成的 CNC 文件（与 Roland 铣床一起使用），并对其进行修改以移动正在切割的图案的绝对位置。

软件生成，机器接受以下格式的输入文件：

```
;;^IN;
!MC1;
!RC5000;
V50.0;
^PR;Z0,0,10500;
^PA;
V49.8;
Z0,0,1000;
V39.8;
Z0,0,100;
Z10,0,99;
Z1000,0,-13;
Z10,0,-124;
Z0,0,-125;
...thousands more Zx,y,z; instructions... 
```

我的问题的第一部分是，谁能告诉我这种文件格式叫什么？它显然不是 G 代码，我无法在任何地方找到任何参考或文档。

第二部分是，有谁知道我们可以如何轻松地修改这些文件剪切的图案的绝对位置。显然，Z 线是 X、Y、Z 位置命令，但我不知道它们是绝对的还是相对的，也不知道它们在什么坐标空间/系统中。据我所知，我们可以在顶部添加一个简单的命令来改变起点，或者我们可能需要重写所有的 Z 行，但没有关于文件格式的一些信息，我处于死胡同。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:03:34.853

我意识到这是一个老问题，您可能已经有了答案（或者现在不需要答案），但它看起来像是 RML-1，假设我的搜索是正确的。

我首先发现[它](http://www.digitalfabrication.net/tutorials/AADPL_CNC_Manual_2010.pdf)显示了与您的示例非常相似的代码。它提到了罗兰机器 MDX-540 的 ArtCAM 和输出。

搜索 Roland 的铣床信息有点无用，但通过他们[的 MDX-540 的 3D 产品](http://www.rolanddg.com/product/3d/3d/mdx-540/spec.html)提到控制命令集是“RML-1 和 NC 代码”。

然后搜索 RML-1 会得到[PDF 手册的结果](http://mlab.taik.fi/paja/wp-content/uploads/2011/01/RML1_Command_GuideENVer100.pdf)。

阅读该 PDF 时，看起来单字母命令是“模式 1”，^ 用于选择模式 2，2 个字母命令是模式 2 命令。!xx 命令对 Mode1 和 Mode2 都是通用的。

^PR 将移动设置为相对模式。^PA 将运动设置为绝对模式。Z 移动。

查看您的代码示例，似乎大多数位置都是绝对的，您需要全部重写它们。

# php - 为什么带有匿名函数的 array_walk 提供的结果与 foreach 不同？

> ID：12612195
> 
> 赞同：4
> 
> 时间：2012-09-27T00:00:43.900
> 
> 标签：php

PHP 版本 5.3.2-1ubuntu4.15

一、起始值：

```
$value_array = array('0.000','2.530',8);
$op_value = 2; 
```

试试这个：

```
 foreach($value_array as &$source_value) {
                $source_value = $source_value + $op_value;
            } 
```

并得到 $value_array == (2,4.53,10);

但是如果你运行这个：

```
 array_walk($value_array,function(&$source_value) {
                $source_value = $source_value + $op_value;
            }); 
```

你得到 $value_array == (0,2.53,8);

第一个给出了预期的结果，第二个没有。但它确实做了一些事情。多余的 0 最终被砍掉。

为什么是这样？我想使用 array_walk，但现在必须使用 foreach。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T00:09:00.130

您可以使用`use`声明来访问外部变量：

```
 array_walk($value_array,function(&$source_value) use ($op_value) {
            $source_value = $source_value + $op_value;
        }); 
```

或者如果它是一个全球性的，你可以这样做：

```
 array_walk($value_array,function(&$source_value) {
            global $op_value;
            $source_value = $source_value + $op_value;
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-07T20:53:06.560

或者你也可以使用第三个参数`array_walk`来指定一个[额外的参数](https://www.php.net/manual/en/function.array-walk.php)来传递给回调函数。

```
array_walk($value_array, function(&$source_value, $key, $extra_param) { // <--- (2) and use here
    $source_value = $source_value + $extra_param;
}, $op_value); // <--- (1) pass it here 
```

# c# - C#在服务器上创建不需要高权限的pdf文档

> ID：12612198
> 
> 赞同：0
> 
> 时间：2012-09-27T00:00:54.153
> 
> 标签：c#, .net, pdf, itextsharp

我有一个 C# 项目，我需要在其中创建一个 pdf 文档。我使用 iTextSharp dll 完成了它，但是当我在服务器上运行它时它不起作用。似乎 dll 需要比我在共享服务器上拥有的权限更高的权限。

有没有其他免费的方法可以做到这一点？我正在尝试从我拥有的网格创建 pdf，只要它有效，我不在乎我如何创建文档（从 html、背后的代码等）。

有人知道怎么做这个吗？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:25:28.623

iTextSharp 只是一个包含用于生成 PDF 的 API 的程序集。它不需要比您的 ASP.NET 应用程序更多的权限。

您是否偶然尝试将 PDF 写入磁盘？您的 ASP.NET 进程可能对您正在写入的位置没有写入权限。

我建议更好的方法是将 PDF 直接输出到响应流，假设您将 PDF 返回给 Web 用户。

# java - URL.openConnection() returns already-open connection the second time

> ID：12612214
> 
> 赞同：4
> 
> 时间：2012-09-27T00:03:13.493
> 
> 标签：java, scala, httpurlconnection

I'm working on a website-scraping application in Scala. The site I'm scraping is heavily session-oriented, so I have to hit the site once to get a session ID before I can do anything else.

I get the connection for retrieving the session ID like this:

```
url.openConnection().asInstanceOf[HttpURLConnection] 
```

It works fine. The .connected field of the returned HttpURLConnection is false, and it flips to true when I call .connect() on it. No problem.

The first hint of trouble occurs when I finish with the connection and call .disconnect() on it. The .connected field stays true. Hm.

So now I've got my session ID, and I go to get the page that has the form I want on it. I call

```
url.openConnection().asInstanceOf[HttpURLConnection] 
```

again, just like last time--same code, in fact--except this time the HttpURLConnection it gives me has the .connected field set to true! I thought at first that somehow it was giving me the same object it gave me before, but no, the memory ID is different.

So of course now when I call .setRequestProperty() on the connection, it blows up with an IllegalStateException: Already connected.

Am I misunderstanding how to use HttpURLConnection?

Notes: Scala 2.9.2, Java 6.0\. Also, the URL objects on which I call .openConnection() are different objects, not the same.

Thanks...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:26:03.007

它被称为连接池，以寻求 HTTP Keep-alive。很好。你想要它。如果您真的不这样做，请调用该`disconnect()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:29:14.833

根据我的经验，该`URL`课程不太适合基于会话的工作（尤其是基于 cookie 的会话）。

如果您想利用这一点，我建议您使用类似[Apache HTTPClient](http://hc.apache.org/httpclient-3.x/)

恕我直言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:20:20.863

听起来 HttpUrlConnection 在幕后为您[保持连接](http://en.wikipedia.org/wiki/HTTP_persistent_connection)。

查看[这篇文章](http://www.tikalk.com/java/forums/httpurlconnection-disable-keep-alive)以获取一些提示，以强制它关闭连接而不是过度帮助。

尽管在您的情况下听起来您可能想要使用 keep-alive，因为它可以通过避免不必要的连接握手来加快您对网站的调用。

# extjs - Extjs 4 : Changing wallpaper from an iframe in the web desktop example

> ID：12612215
> 
> 赞同：0
> 
> 时间：2012-09-27T00:03:15.133
> 
> 标签：extjs, wallpaper

I begin with Extjs. I'm facing a problem in **Extjs 4** with the **web desktop example**. I'm using a window to display a php page inside an **iframe**. In that page I'm using a javascript function to load a new src :

```
top.Ext.getDom('iframe-win').src = 'my-page.html'; 
```

This works great but now I'd like to modify the wallpaper at the same time with :

```
top.Ext.getBody().setStyle('background-image', 'url(./wallpapers/desk.jpg);'); 
```

But it fails in some way. My body got the new wallpaper but I don't target the right container. What is the method to call in order to target this container ?

# ios - UIImage resizableImageWithCapInsets - 可以使用笔尖指定吗？

> ID：12612216
> 
> 赞同：4
> 
> 时间：2012-09-27T00:03:20.093
> 
> 标签：ios, ios5, uiimageview, uiimage

我有一个 UIImage 可以完美地调整大小，`resizableImageWithCapInsets`以制作包含文本标签的徽章。我很想知道有没有办法在故事板或用笔尖创建的视图中做到这一点？

没有技术上的理由要求这样做。大部分 UI 都是在笔尖中完成的，我希望尽可能多地保留在那里，而不是加载图像、使其可调整大小、查找文本尺寸、调整 UIImageView 的大小，然后在代码中应用标签。

我还不能让这个项目只支持 iOS6（部署目标 ios5+），所以不能选择使用布局约束。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T05:18:23.707

就在这里。

诀窍是覆盖`-initWithCoder:`和图像设置器（`setImage:forState:`和`setBackgroundImage:forState:`）来创建您在 xib 中设置的相同图像的可调整大小版本。显然，它们仍然不会在 xib 本身中正确调整大小，但它会在初始化后正确调整大小。不要忘记设置`NAResizableButton`为自定义类`UIButton`。

当然胜过以编程方式进行。:)

**界面：**

```
#import <UIKit/UIKit.h>

@interface NAResizableButton : UIButton

@end 
```

**执行：**

```
#import "NAResizableButton.h"

@implementation NAResizableButton

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self)
    {
        [self setImage:[self imageForState:UIControlStateNormal] forState:UIControlStateNormal];
        [self setImage:[self imageForState:UIControlStateHighlighted] forState:UIControlStateHighlighted];
        [self setImage:[self imageForState:UIControlStateSelected] forState:UIControlStateSelected];
        [self setImage:[self imageForState:UIControlStateDisabled] forState:UIControlStateDisabled];

        [self setBackgroundImage:[self backgroundImageForState:UIControlStateNormal] forState:UIControlStateNormal];
        [self setBackgroundImage:[self backgroundImageForState:UIControlStateHighlighted] forState:UIControlStateHighlighted];
        [self setBackgroundImage:[self backgroundImageForState:UIControlStateSelected] forState:UIControlStateSelected];
        [self setBackgroundImage:[self backgroundImageForState:UIControlStateDisabled] forState:UIControlStateDisabled];
    }
    return self;
}

- (void)setImage:(UIImage *)inImage forState:(UIControlState)inState
{
    UIEdgeInsets edgeInsets = UIEdgeInsetsMake(ceilf(inImage.size.height / 2), ceilf(inImage.size.width / 2), ceilf(inImage.size.height / 2), ceilf(inImage.size.width / 2));
    if ([inImage respondsToSelector:@selector(resizableImageWithCapInsets:)])
    {
        // iOS 5
        inImage = [inImage resizableImageWithCapInsets:edgeInsets];
    }
    else
        inImage = [inImage stretchableImageWithLeftCapWidth:edgeInsets.left topCapHeight:edgeInsets.top];

    [super setImage:inImage forState:inState];
}

- (void)setBackgroundImage:(UIImage *)inImage forState:(UIControlState)inState
{
    UIEdgeInsets edgeInsets = UIEdgeInsetsMake(ceilf(inImage.size.height / 2), ceilf(inImage.size.width / 2), ceilf(inImage.size.height / 2), ceilf(inImage.size.width / 2));
    if ([inImage respondsToSelector:@selector(resizableImageWithCapInsets:)])
    {
        // iOS 5
        inImage = [inImage resizableImageWithCapInsets:edgeInsets];
    }
    else
        inImage = [inImage stretchableImageWithLeftCapWidth:edgeInsets.left topCapHeight:edgeInsets.top];

    [super setBackgroundImage:inImage forState:inState];
}

@end 
```

# android - 服务运行时调用Android onKeyDown

> ID：12612217
> 
> 赞同：0
> 
> 时间：2012-09-27T00:03:33.043
> 
> 标签：android, multithreading, service, gps, back-button

我的应用程序本质上是一个 gps 跟踪器。它将一个服务绑定到 GPSActivity，它创建一个线程来计算距离、速度等。

在我在服务中使用 gps 线程之前，它在 GPSActivity 中并且工作正常。我已将其切换为服务，因此如果用户需要使用另一个应用程序，它将能够在后台持续存在。

然而，有时在 gps 跟踪周期开始时，GPSActivity 中的 onKeyDown 方法被调用，而我实际上没有按下按钮。

这是否意味着 onDestroy 正在尝试被调用并且我使用了太多内存？

非常感谢任何解释这种行为的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:10:15.063

我通过调整我的 onKeyDown 方法解决了我的问题，如下所示：

```
 if(keyCode!=KeyEvent.KEYCODE_BACK){
        return super.onKeyDown(keyCode, event);

    }else{
        //must be back button 
```

# windows - Capistrano 部署问题

> ID：12612224
> 
> 赞同：0
> 
> 时间：2012-09-27T00:04:30.523
> 
> 标签：windows, linux, ruby-on-rails-3, rake, capistrano

我正在尝试让 Capistrano 部署脚本工作，在我的部署文件中，我有以下内容......

```
set :application, "example.com"
role :app, "root@12.34.56.789"
role :web, "root@12.34.56.789"
role :db,  "root@12.34.56.789", :primary => true

set :user, "root"
set :deploy_to, "/example/www/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false
set :keep_releases, 10

namespace :deploy do
  desc "Tell Passenger to restart the app."
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end

  desc "Symlink shared configs and folders on each release."
  task :symlink_shared do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
    run "ln -nfs #{shared_path}/assets #{release_path}/public/assets"
  end

  desc "Sync the public/assets directory."
  task :assets do
    system "rsync -vr --exclude='.DS_Store' public/assets #{user}@#{application}:#{shared_path}/"
  end
end

after 'deploy:update_code', 'deploy:symlink_shared' 
```

我还在部署文件中有一个 github 位置和 scm 变量。当我运行`cap deploy`它时，它开始正常，要求输入 github 私人仓库的用户名/密码，我输入它，没问题。然后在成功并正确提取代码之后，我得到以下...

> 执行“如果 [ -d /example/www/example.com/shared/cached-copy ]; 然后 cd /example/www/example.com/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 93e3432103327f29a9e66fa2755562bfe9bc4412 && git clean -q -d -x -f; 否则 git clone -q [https://github.com/example/example.git](https://github.com/example/example.git) /example/www/social u。 com/shared/cached-copy && cd /example/www/example.com/shared/cached-copy && git checkout -q -b deploy 93e3432103327f29a9e66fa2755562bfe9bc4412; fi" 服务器：["12.34.56.789"] 密码：

所以它要求输入密码。我猜这是为了ssh。我输入了 root 用户的密码，但是它无法显示这个...

```
 [12.34.56.789] executing command
 ** [12.34.56.789 :: err] Username: 
```

我也试过根本不输入密码，我得到以下信息......

> Capistrano::ConnectionError，连接失败（Net::SSH::AuthenticationFailed: root）

问题是我输入了正确的 ssh 密码……我可以使用 putty 很好地 ssh。顺便说一句，我在本地 Windows pc 上运行 cap deploy，远程框是 linux 框。当然，我的位置不是 12.34.56.78，但你明白了。关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:37:17.690

您需要使用 GitHub 的 SSH 网址，而不是 https 网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:26:04.623

能够通过将用户更改为非 root 用户来解决此问题。

# python - 在 python 中解析一个大的（~40GB）XML 文本文件

> ID：12612229
> 
> 赞同：3
> 
> 时间：2012-09-27T00:04:50.600
> 
> 标签：python, xml, xml-parsing, large-files

我有一个我想用 python 解析的 XML 文件。最好的方法是什么？将整个文档记入内存将是灾难性的，我需要以某种方式一次读取一个节点。

我知道的现有 XML 解决方案：

*   元素树
*   迷你xml

但我担心由于我提到的问题，它们不会完全正常工作。我也无法在文本编辑器中打开它——generao 中有什么好的技巧来处理巨大的文本文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T00:16:11.550

首先，您是否尝试过`ElementTree`（内置的纯 Python 或 C 版本，或者更好的`lxml`版本）？我很确定他们都没有真正将整个文件读入内存。

当然，问题在于，无论它是否将整个文件读入内存，生成的解析树最终都会在内存中。

ElementTree 有一个漂亮的解决方案，它非常简单，而且通常足够：[iterparse](http://effbot.org/zone/element-iterparse.htm)。

```
for event, elem in ET.iterparse(xmlfile, events=('end')):
  ... 
```

这里的关键是您可以在树构建时对其进行修改（通过将内容替换为仅包含父节点所需内容的摘要）。通过丢弃所有不需要保留在内存中的内容，您可以坚持按通常的顺序解析内容而不会耗尽内存。

链接页面提供了更多详细信息，包括在处理 XML-RPC 和 plist 时修改它们的一些示例。（在这些情况下，这是为了使生成的对象更易于使用，而不是为了节省内存，但它们应该足以让这个想法得到理解。）

只有当你能想出一种方法来进行总结时，这才有帮助。（在最简单的情况下，父母不需要来自其孩子的任何信息，这只是`elem.clear()`。）否则，这对你不起作用。

标准解决方案是[SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)，它是一个基于回调的 API，允许您一次在树上操作一个节点。您无需像使用 iterparse 那样担心截断节点，因为在解析完节点后这些节点就不存在了。

大多数最好的 SAX 示例都是针对 Java 或 Javascript 的，但它们并不难弄清楚。例如，如果您查看[http://cs.au.dk/~amoeller/XML/programming/saxexample.html](http://cs.au.dk/~amoeller/XML/programming/saxexample.html)，您应该能够弄清楚如何用 Python 编写它（只要您知道在哪里可以[找到xml.sax 的文档](http://docs.python.org/library/xml.sax.html)）。

还有一些基于 DOM 的库可以在不将所有内容读入内存的情况下工作，但我所知道的没有任何我相信能够以合理的效率处理 40GB 文件的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:02:03.483

最佳解决方案将部分取决于您尝试做什么，以及您的系统资源的空闲程度。将其转换为 postgresql 或类似数据库可能不是一个糟糕的首要目标；另一方面，如果您只需要提取一次数据，则可能不需要。当我必须解析大型 XML 文件时，特别是当目标是处理图形等数据时，我通常将 xml 转换为 S-expression，然后使用 S-expression 解释器（在 python 中实现）来分析按顺序标记并构建表格数据。由于它可以一次读取一行中的文件，因此文件的长度并不重要，只要生成的列表数据都适合内存即可。

# c++ - “QFileSystemWatcher：添加路径失败”但仍然有效

> ID：12612231
> 
> 赞同：0
> 
> 时间：2012-09-27T00:04:59.453
> 
> 标签：c++, file, qt, qfilesystemwatcher

我需要监视一个文件系统，我有一个函数可以递归地浏览文件夹和文件，并将它们的路径添加到我的 QFileSystemWatcher ：

```
void watchFileSystem(const QDir& dir, QFileSystemWatcher& watcher)
{
    watcher.addPath(dir.absolutePath());
    QDirIterator iterator(dir.absolutePath(), QDirIterator::Subdirectories);
    while (iterator.hasNext()) {
        QString foldername = QString(iterator.fileName());
        if (foldername != "." && foldername != ".." && foldername != "")
            watcher.addPath(iterator.filePath());
        iterator.next();
        if (!iterator.fileInfo().isDir()) {
            watcher.addPath(iterator.filePath());
        }
    }
} 
```

运行时，每个“watcher.addPath(iterator.filePath());” 我在控制台中有此错误消息：

> QFileSystemWatcher：添加路径失败：C:/.../anyfile.ext

最奇怪的是它仍然有效。当我重命名/编辑文件或文件夹时，会触发 fileChanged 和 folderChanged 事件。

任何人都知道发生了什么？我担心我的程序不稳定，这个错误不能白白显示。

感谢阅读和帮助，

拉斐尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:47:00.793

显示警告是因为您的循环添加了两次文件：

在循环的中间，您执行`iterator.next();`. 如果这会将迭代器移动到文件中，它将被添加到下一个 if 语句中。现在你的循环继续，但仍然指向同一个文件。如果文件夹名称不是“.”、“..”或“”，则不是文件，则再次添加相同的文件。

我已经重组了您的循环以使其工作：

```
while (iterator.hasNext()) 
{    
    QString fileOrFolderName = QString(iterator.fileName());

    // Skip non-folders
    if (fileOrFolderName == "." || fileOrFolderName == ".." || 
        fileOrFolderName == "")
    {
        iterator.next();
        continue;
    }

    // Add the folder or file
    watcher.addPath(iterator.filePath());
    iterator.next();
} 
```

这将在提供给函数的目录下添加所有文件夹和文件。

# windows-phone-7 - 当用户滚动时更改 WP7 全景图上的背景图像

> ID：12612236
> 
> 赞同：1
> 
> 时间：2012-09-27T00:05:52.510
> 
> 标签：windows-phone-7, windows-phone-7.1, panorama-control

只是想知道是否有人知道当用户在 Windows Phone 7 上滚动时动态更改全景背景图像的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T05:14:51.150

在 Xaml 上做：

```
 <controls:Panorama Title="my application" SelectionChanged="Panorama_SelectionChanged">
        <controls:Panorama.Background>
            <ImageBrush x:Name="myImg" ImageSource="PanoramaBackground.png"/>
        </controls:Panorama.Background>
        ...
        ..
        . // your code 
```

要在代码后面更改图像，请使用：

```
 private void Panorama_SelectionChanged(object sender, SelectionChangedEventArgs e)
     {
         myImg.ImageSource = new BitmapImage(new Uri("Jellyfish.jpg", UriKind.Relative));
     } 
```

它为我工作。希望对你也有帮助。

# firefox - 您如何检测到用户将文件夹（而不是文件）拖到浏览器中？

> ID：12612237
> 
> 赞同：4
> 
> 时间：2012-09-27T00:06:08.190
> 
> 标签：firefox, browser, file-upload, drag-and-drop, webkit

我很清楚你不能通过拖放上传整个文件夹。问题是，我如何判断是否有人尝试这样做？如果你将一个文件夹拖到浏览器中，它的行为就像你拖一个带有 webkit 不知道的扩展名的文件一样，比如“.sh”。你怎么能分辨出来？

我已经在 Mac OS X 和 Windows 上的 Chrome、Safari 和 Firefox 中对此进行了测试。根据浏览器和操作系统，我得到的结果略有不同。有时它会成功上传零字节文件。有时它会上传文件夹的图片。有时它无法上传任何内容。

event.dataTransfer.types 和 event.dataTransfer.items 都撒谎并分别说类型是“文件”或“文件”。

Firefox 给出了以下类型列表：

```
{"0":"application/x-moz-file","1":"text/x-moz-url","2":"text/plain","3":"Files"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:17:25.033

我找到了一种方法。这些信息可以通过 getAsEntry 在 dataTransfer.items 中找到，尽管在不同的浏览器中会有所不同。此外，这没有指向您想要的文件的指针，尽管假设您没有同时上传两个具有相同名称的文件，您可以根据文件名找出它。这里没有太多工作要做，所以这是我能做的最好的。

```
just_the_files = (dataTransfer) ->
    real_files_set = {}
    for item in dataTransfer.items
        entry = item.getAsEntry?() or item.webkitGetAsEntry?() or item
        if entry.isFile
            real_files_set[entry.name] = true
     (file for file in dataTransfer.files when file.name of real_files_set) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-31T08:38:14.460

在 FF 中有一个 dataTransfer 方法：**mozGetDataAt** (type, index)，当我使用 type 'text/x-moz-url' 时，它会返回文件的路径，如 'files:///D:/abc/fileName'。有趣的是，文件夹/指令的路径末尾带有“/”，例如“files:///D:/abc/folder1/”。我想知道它是否适用于这种情况？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-27T00:11:22.523

实际上，当您将文件夹拖到浏览器上时，您拖动的文件夹中的所有文件夹和文件都会显示出来..

例如在铬

它将显示“D:\my documents\Downloads\ 的索引”以及您修改文件的名称、大小和日期...

# emacs - 控制字节编译的详细程度（CL 库）

> ID：12612241
> 
> 赞同：7
> 
> 时间：2012-09-27T00:07:11.830
> 
> 标签：emacs, compilation, elisp

当批量对多个 eLisp 文件进行字节编译时，编译器的输出会充满`Warning: function `position' from cl package called at runtime`警告。我理解，虽然不太同意`cl`包裹政策。但这使得发现其他更有用的警告变得更加困难。所以，虽然没有真正的方法可以避免警告，但有没有办法选择性地关闭某种模式的所有警告？

编辑：（附上一个例子）

*创建名为 doodles.el 的文件*

```
(require 'cl)
(eval-when-compile (require 'cl))

(dotimes (i 1)
  (position ?\x "x")) 
```

`M-x` `byte-compile-file` `RET` `doodles.el`

切换到`*Compile-Log*`缓冲区：

```
doodles.el:1:1:Warning: cl package required at runtime 
```

这就是你得到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T05:47:07.270

您可以使用设置变量的局部变量块来控制字节编译器警告`byte-compile-warnings`。要关闭运行时 CL 警告，请将其放在模块末尾附近：

```
;; Local Variables:
;; byte-compile-warnings: (not cl-functions)
;; End: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:23:52.550

由于 CL 的政策，该警告`function position from cl package called at runtime`不存在（当然，它确实与它有关）但指出了一个实际的真正问题：您`position`在一个没有`(require 'cl)`. 该文件可能`(eval-when-compile (require 'cl))`意味着 CL 在编译期间可用（用于扩展 CL 宏的 ag），但不会在运行时加载。

通常这不会导致错误，因为某处的其他文件会`(require 'cl)`为您提供，但这只是您很幸运。

# c - Convert C Code to Delphi

> ID：12612243
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:07:12.013
> 
> 标签：c, delphi

I need to convert this Line from C to Delphi.

```
Int CALLBACK EXPORT EXAMPLEFUNCTION(VOID){
  SETEVENT(hasync);
  Return Success;
} 
```

Please i need some help.

thanks ;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:15:15.533

有点猜测，因为风格真的很乱，但我认为这会翻译成这样：

```
const Success = 1; //or whatever; might not be 1.
                   //assume a const definition for a value 
                   //called Success exists somewhere in scope

function EXAMPLEFUNCTION(): integer; stdcall; //CALLBACK = stdcall calling convention
begin
   SETEVENT(hasync); //hopefully this makes sense in context
   result := Success;
end; 
```

这是我在没有进一步背景的情况下能做的最好的事情。该`EXPORT`声明是一个预处理器宏，它（可能）意味着这是 DLL 的一部分，并且这是一个应该可以由加载 DLL 的程序调用的函数。在 Delphi 中，这不是函数定义的一部分。相反，您将其放在**exports**子句中。

# git - Git Clone Branch, Edit, then Merge with Master

> ID：12612244
> 
> 赞同：0
> 
> 时间：2012-09-27T00:07:39.533
> 
> 标签：git, github, clone, branching-and-merging

I'm very nooby to using git branches with other users so I was hoping for some help regarding a project. My project has 3 branches(master, auth, and dev1). I am the user of the master branch and I recently cloned the auth branch to a local folder and edited it.

My question is...How do I (push?) my corrections to the auth branch and merge it with the master branch? Can I just (merge?) the edited auth branch with the master locally?

aka

Phil owns *master

Bob owns *auth

Phil clones *auth to local computer. Edits *auth and wants to then merge edited *auth with *master.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:58:33.330

您可以简单地转到要添加更改的分支 ( `git checkout master`) 并将更改合并到它 ( `git merge auth`)。

这是一般顺序：

假设`auth`和`master`现在是相同的：

`git checkout auth`你现在在 auth 分支上 -

进行一些编辑并提交 ( `git commit -m 'awesome changes to auth branch'`)

`git checkout master`您现在位于未更改的主分支上

`git merge auth`如果一切顺利，您在 auth 中所做的更改将合并到您的`master`分支中

`git push`

* * *

AFAIK（相信我，我也是新手），如果您的朋友`master`在合并之前向分支添加类似的更改，您将遇到问题。如果发生这种情况，git 将不知道在合并期间要保存谁的更改：你的还是他的？

* * *

我也强烈推荐阅读“Pro Git”一书。它是免费的，很容易在[网上](http://google.com)找到。它非常易于阅读，并且确实有助于使一切变得有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:48:36.510

由于您拥有最新的主人，我认为这将满足您的要求：

```
git checkout master
git merge auth
git push origin master 
```

转到master，将身份验证合并到其中，然后将其推送到远程。

**但是**这样你就不会更新远程身份验证，所以你最好先推送你的提交：

```
git push origin auth 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:38:03.290

> 我的问题是......我如何（推送？）我对 auth 分支的更正并将其与 master 分支合并？我可以在本地（合并？）与 master 编辑的 auth 分支吗？

您使用以下命令将您的更正推送到 auth 分支（假设您的远程存储库的名称是“banana”）：

```
git push banana auth 
```

如果我正确地阅读了你的问题，你想推动你的分支，然后合并它们。你不能按那个顺序做。它必须是“合并，然后推送”。您只能“本地”合并，然后使用上面的命令将更改推送到远程仓库。

顺便说一句，对于每个分支，至少使用一次以下命令：

```
git push -u <branchName> 
```

这会将您的本地分支与远程分支相关联，这样您就不会收到任何恼人的消息，说“您没有默认分支，哇哦！” 或者如果您想一次推送所有分支，则无论该消息是什么。

至于合并，上面的回答已经回答了这个问题。

希望这可以解决一些问题！

# git - General Git Branch, Working with Git Flow work flow

> ID：12612245
> 
> 赞同：0
> 
> 时间：2012-09-27T00:07:44.177
> 
> 标签：git, branch, git-flow

I've been using Git Flow to help manage branch and workflow. I love how it works, although have a general question when working with multi feature branches.

For an example I would start a feature branch, make some adjustments. If I then create another feature branch, the new changes are also included in this feature branch. If I want to complete one feature branch and finish it, it won't let me unless I commit all untagged files.

Is there a better way to handle this work flow? So that I can have multi feature branches, and finish off a branch, and checkout/commit only the changes I want?

The idea is to be able to work on different issues and push code from that fix, still having different feature branches with uncommitted updates.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:09:05.080

如果您有两个功能分支 A 和 B，并且您在功能分支 A 上工作，请不要提交并切换到 B，未提交的更改将跟随您到 B 分支。这就是 git 的工作方式。您可以提交更改或存储更改。

根据您的要求，您似乎正在寻找 git stash。

有关 git stash 的更多信息，请参阅文档： [http ://www.kernel.org/pub/software/scm/git/docs/git-stash.html](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)

# objective-c - UIImage 的基本操作

> ID：12612252
> 
> 赞同：0
> 
> 时间：2012-09-27T00:08:10.200
> 
> 标签：objective-c, ios, uiimage, image-manipulation

我正在学习`UIImage`在 iOS 上使用 Objective-C 对 s 进行基本操作。假设我有一个 128x128 的正方形图像。**如何裁剪图像的下半部分并将上半部分存储在 128x64 图像中？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T00:13:53.033

你要做的是从 UIImage 的 CGImage 中得到一个更小的 CGImageRef：

```
CGImageCreateWithImageInRect([image CGImage], someRect); 
```

使用该图像，您可以创建一个新图像：

```
UIImage *nImage = [UIImage alloc] initWithCGImage:nImageRef]; 
```

糟糕，几乎忘记了，在您执行上述操作后：

```
CGImageRelease(nImageRef); 
```

# selenium - selenium standalone server 2.25 time out error

> ID：12612258
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:08:50.713
> 
> 标签：selenium, selenium-rc

I am trying to increase the timeout time for my scripts. How do I do this?

So far, I have:

```
java -jar /var/www/sites/all/srk_tests/test_data/selenium-server-standalone-2.25.0.jar -userExtensions /var/www/sites/all/srk_tests/user-extensions.js -timeout 40000  -htmlSuite *firefox mysiteurlhere /var/www/sites/all/srk_tests/organization_test/organization_test_ts.html /var/www/sites/all/srk_tests/test_results/organization_test_results.html 
```

But the "-timeout 40000" does not work.

I am trying to allow a command in my script enough time to finish running and not time out after 30000ms

thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:41:47.803

硒 RC：

```
selenium.setTimeout("40000"); 
```

硒网络驱动程序：

```
driver.manage().timeouts().implicitlyWait(40, TimeUnit.SECONDS); 
```

# c++ - 如何声明 IP 地址以将其与多个功能一起使用？

> ID：12612262
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:09:15.770
> 
> 标签：c++, networking, client-server, boost-asio, declare

我正在实现一个简单的客户端-服务器程序。我写的部分内容是：

```
 int main(void){  
    using namespace boost::asio;
    using namespace std;
     const std::string ip = "localhost";
     const int port       = 10500;
     ip::address addr = ip::address::from_string(ip);
     ip::tcp::endpoint ep(addr, port);
    ip::tcp::iostream s(ep);

     s << "TERMINATE\n" << std::flush;} //This sends Terminate command to the server.
   }
  void function(void){
       s << "TERMINATE\n" << std::flush;} // This part doesn't work.

      } 
```

我是 boost asio 和网络编程的新手。并在 Windows MingGW 上工作。

在上面的代码中，我在 main 函数中声明了 ip 地址，但是当我尝试在 main 之外声明的其他函数中使用它时，它不起作用。带有错误，例如：'s' 未在此范围内声明。如果它是一个普通变量，我会在 main 之外声明它，并且所有其他函数都可以共享。但这不适用于此。您需要在哪里以及如何声明 IP 地址和端口。我假设

```
using namespace boost::asio;
using namespace std;
const std::string ip = "localhost";
const int port = 10500;
ip::address addr = ip::address::from_string(ip);
ip::tcp::endpoint ep(addr, port);
ip::tcp::iostream s(ep); 
```

以上部分正在做声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:17:07.003

你可以把它变成一个全局变量。就像是，

```
using namespace boost::asio;
using namespace std;

ip::tcp::iostream s;

int main(void){  
    const std::string ip = "localhost";
    const int port       = 10500;
    ip::address addr = ip::address::from_string(ip);
    ip::tcp::endpoint ep(addr, port);
    s = iostream(ep);

    s << "TERMINATE\n" << std::flush;} //This sends Terminate command to the server.
}
void function(void){
    s << "TERMINATE\n" << std::flush;}
 } 
```

更好的解决方案是将其作为参数传递给您的函数。全局变量通常不好用。

```
using namespace boost::asio;
using namespace std;

int main(void){  
    const std::string ip = "localhost";
    const int port       = 10500;
    ip::address addr = ip::address::from_string(ip);
    ip::tcp::endpoint ep(addr, port);
    ip::tcp::iostream s(ep);

    function(s);
}
void function(ip::tcp::iostream &s){
    s << "TERMINATE\n" << std::flush;}
 } 
```

# java - (Homework) Java Error: Incompatible Types

> ID：12612265
> 
> 赞同：0
> 
> 时间：2012-09-27T00:09:42.747
> 
> 标签：java

I'm working on a method that takes a string time, which contains 3 to 4 numbers representing military time, such as "130" or "1245". The purpose of this method is to assign the contents of the string time to an integer array with two parts: [0] is the hour (such as "1" or "12" from my example above), and [1] represents the minutes ("30" or "45" from my example).

The if(str.length() ==3) is meant to catch strings such as "130", where the hour is less than 10 and the string lacks a leading zero.

When I compile, the errors I get read:

```
error: incompatible types
                          temp = a[1] + a[2];
                                      ^
required: String
found: int 
```

.

```
error: incompatible types
                          temp = a[0] + a[1];
                                      ^
required: String
found: int 
```

.

```
error: incompatible types
                          temp = a[2] + a[3];
                                      ^
required: String
found: int 
```

.

I've been reading up on the char data type, and from what I understand it has a numerical value similar to an integer. I've attempted to typecast with:

```
temp = (String) a[1] + a[2]; 
```

But that gives the following error:

```
error: inconvertible types
                          temp = (String) a[1] + a[2];
                                           ^
required: String
found: char 
```

At this point I'm not sure what to do. Below is my code:

```
private int[] convertStringToHoursMins(String time) {
    String str = time;
    String temp;
    char[] a = str.toCharArray();
    int[] hoursMins = new int[2];
    try {
        if (str.length() == 3) {
            hoursMins[0] = a[0];
            temp = a[1] + a[2];
            hoursMins[1] = Integer.parseInt(temp);
        }
        else {
            temp = a[0] + a[1];
            hoursMins[0] = Integer.parseInt(temp);
            temp = a[2] + a[3];
            hoursMins[1] = Integer.parseInt(temp);
        }   
    }
    catch(NumberFormatException e) {
        System.out.println("Invalid time.");
    }
    return hoursMins;
} 
```

Thanks in advance for any help you can offer.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:15:56.527

我相信你应该能够简单地做到这一点：

```
temp = "" + a[1] + a[2]; 
```

如果添加“”，它会将其转换为字符串，因此您不会收到不匹配错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:20:59.317

鉴于您已经拥有`a`as `String`，您可以替换它：

```
temp = a[1] + a[2]; 
```

和

```
temp = str.substring(1, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:13:06.520

尝试这个：

temp = String.valueOf(a[1]) + String.valueOf(a[2]);

不要做任何java，但听起来像是一个字符串到字符的转换问题:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T00:26:12.963

从您的代码中， temp 是 a `String`， a 是`char`.

```
String temp;
char[] a = str.toCharArray();

temp = a[1] + a[2]; 
```

首先，您不能`char`使用加号运算符连接变量。它只会将字符的值转换为整数，然后将它们加在一起。下面的示例打印 97。

```
 char a = '0';
    char b = '1';
    System.out.println(a+b); 
```

因此，添加两个字符的结果是一个 int。所以 a[1]+a[2] 产生 an `int`，而 temp 是 a `String`。

其次，Java 不会自动将 int 转换为 String，因此该代码是不合法的。

您想要做的是获取一个子字符串，`str`然后将其转换为一个整数`parseInt`。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T00:17:41.117

您的问题是，当编译器需要整数时，您正试图将两个字符串相加。一个更简单的解决方案是简单地使用 String 类的 substring 方法。所以你的代码看起来像：

```
private int[] convertStringToHoursMins(String time) {
    int[] hoursMins = new int[2];
    try {
        if (time.length() == 3) {
            hoursMins[0] = Integer.parseInt(time.subString(0,0);
            hoursMins[1] = Integer.parseInt(time.subString(1,2);
        }
        else {
            hoursMins[0] = Integer.parseInt(time.subString(0,1);
            hoursMins[1] = Integer.parseInt(time.subString(2,3);
        }   
    }
    catch(NumberFormatException e) {
        System.out.println("Invalid time.");
    }
    return hoursMins;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T00:32:10.090

一个提示：

```
hoursMins [0] = Integer.parseInt(time.substring(0, time.length()-2));
//Similar line for minutes
//Magic constraint filtering goes here ( no negative numbers, minutes under 60, hours under 24) 
```

保持程序简短

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-27T00:13:34.787

不兼容类型是指您从对象返回的类型与预期类型不同。调试（逐步）并找到从对象返回的类型为必要的类型。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-27T00:14:20.603

您必须先将字符串转换为整数，然后再对它们进行数学运算。

```
int a = Integer.parseInt(a[0]);
int b = Integer.parseInt(a[1]);

int temp = a+b; 
```

# python - appengine many to many field update value and lookup efficiently

> ID：12612270
> 
> 赞同：0
> 
> 时间：2012-09-27T00:10:17.400
> 
> 标签：python, database, google-app-engine, app-engine-ndb

I am using appengine with python 2.7 and webapp2 framework. I am **not** using ndb.model.

I have the following model:

```
class Story(db.Model);
    name = db.StringProperty()

class UserProfile(db.Model):
    name = db.StringProperty()
    user = db.UserProperty()

class Tracking(db.Model):
   user_profile = db.ReferenceProperty(UserProfile)
   story = db.ReferenceProperty(Story)
   upvoted = db.BooleanProperty()
   flagged = db.BoolenProperty() 
```

A user can upvote and/or flag a story but only once. Hence I came up with the above model. Now when a user clicks on the `upvote` link, on the database I try to see if the user has not already voted it, hence I do try to do the following:

1.  get the user instance with his id as `up = db.get(db.Key.from_path('UserProfile', uid))`

2.  then get the story instance as follows `s_ins = db.get(db.Key.from_path('Story', uid))`

3.  Now it is the turn to check if a `Tracking` based on these two exist, if **yes** then don't allow voting, else allow him to vote and **update the Tracking** instance.

What is the most convenient way to **fetch** a `Tracking` instance given an id(`db.key().id()`) of `user_profile` and `story`?

What is the most convenient way to **save** a `Tracking` model having given a user profile id and an story id?

Is there a better way to implement tracking?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:20:47.827

您可以尝试使用键列表进行跟踪，而不是使用单独的跟踪/用户/故事条目：

```
class Story(db.Model);
  name = db.StringProperty()

class UserProfile(db.Model):
  name = db.StringProperty()
  user = db.UserProperty()

class Tracking(db.Model):
  story = db.ReferenceProperty(Story)
  upvoted = db.ListProperty(db.Key)
  flagged = db.ListProperty(db.Key) 
```

因此，当您想查看用户是否为给定故事投票时：

```
Tracking.all().filter('story =', db.Key.from_path('Story', uid)).filter('upvoted =', db.Key.from_path('UserProfile', uid)).get(keys_only=True) 
```

现在这里唯一的问题是投票/标记列表的大小不能变得太大（我认为限制是 5000），所以你必须创建一个类来管理这个（也就是说，当添加到 upvoted /标记列表，检测是否存在 X 条目，如果存在，则启动新的跟踪对象以保存附加值）。您还必须进行事务处理，并且对于 HR，您有每秒 1 次写入的阈值。这可能是也可能不是问题，具体取决于您的预期用例。绕过写入阈值的一种方法是使用拉取队列实现支持/标记，并有一个 cron 作业根据需要拉取和批量更新跟踪对象。

这种方法有其优点/缺点。最明显的缺点是我刚刚列出的那些。然而，优点可能是值得的。您可以从单个列表（或多个，具体取决于故事的受欢迎程度）中获取对故事进行投票/标记的用户的完整列表。您可以获得完整的用户列表，而对数据存储的查询要少得多。此方法还应占用更少的存储空间、索引空间和元数据空间。此外，将用户添加到跟踪对象会更便宜，而不是为每个属性编写一个新对象 + 2 次写入，您只需为该对象支付 1 次写入 + 为列表条目添加 2 次写入（9 次写入 vs 3 次写入用于将用户添加到预先存在的跟踪故事，或 9 vs 7 用于未跟踪的故事）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:08:40.883

你的提议听起来很合理。

不要使用应用引擎生成的密钥进行跟踪。因为故事/用户的组合应该是唯一的，所以创建您自己的密钥作为故事/用户的组合。就像是

```
tracking = Tracking.get_or_insert(str(story.id) + "-" + str(user.id), **params) 
```

如果您知道故事/用户，那么您始终可以通过键名获取跟踪。

# php - PHP试图将for循环中的数字存储到数组中

> ID：12612274
> 
> 赞同：0
> 
> 时间：2012-09-27T00:11:06.530
> 
> 标签：php, arrays, math, numbers

假设我有这个代码：

```
<?php

$aLevel[] = 98;

function experience($L) {
 $a=0;
  for($x=1; $x<$L; $x++) {
    $a += floor($x+300*pow(2, ($x/7)));
    $aLevel[$x-1] = $a; // we minus one to comply with array
  }
 return floor($a/4);
}

for($L=1;$L<100;$L++) {
 echo 'Level '.$L.': '. number_format(experience($L)). '<br />';
}

echo $aLevel[0]; // Level 1 should output 0 exp
echo "<br />" . $aLevel[1]; // Level 2 should output 83 exp
// et cetera
?> 
```

我正在尝试创建一个数组来存储 exp。所以 1 级是`$aLevel[0]`，EXP 是 0（很明显），2 级是`$aLevel[1]`，EXP 是 83 等等。

下面的代码......它的工作原理。经验和关卡循环有效，但阵列无效。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:46:24.953

除了您的范围问题（`$aLevel`函数内部使用的与外部不同）之外，您计算经验的次数太多了。当 $L = 98 时，您计算 1-97 级的经验，然后当 $L = 99 时，您重新计算。此外，您将返回值除以 4，而不是存储在数组中的值。

假设我了解您要使用的算法，我可能会这样做：

```
function getExperienceByLevel ($maxLevel)
{
  $levels = array ();
  $current = 0;
  for ($i = 1; $i <= $maxLevel; $i++){
    $levels[$i - 1] = floor ($current / 4);
    $current +=  floor($i+300*pow(2, ($i/7)));
  }
  return $levels;
}

$aLevels = getExperienceByLevel (100);
for ($i = 0; $i < 100; $i++)
{
  echo 'Level ' . ($i + 1) . ': '. number_format($aLevels[$i]) . "<br />\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:14:56.950

该数组是在函数中设置的，因此在全局范围内不可用。

这有效（最好不要使用`global`，但在这种情况下它是一个快速而肮脏的解决方案）： [DEMO](http://sandbox.onlinephpfunctions.com/code/715eff8c165479bf4766c4307c5eff83d9fda37d)

```
<?php 

$aLevel[] = 98;

function experience($L) {
global $aLevel;
 $a=0;
  for($x=1; $x<$L; $x++) {
    $a += floor($x+300*pow(2, ($x/7)));
    $aLevel[$x-1] = $a; // we minus one to comply with array
  }
 return floor($a/4);
}

for($L=1;$L<100;$L++) {
 echo 'Level '.$L.': '. number_format(experience($L)). '<br />';
}

echo $aLevel[0]; // Level 1 should output 0 exp
echo "<br />" . $aLevel[1]; // Level 2 should output 83 exp
// et cetera
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:18:58.693

$aLevel[] 数组在函数外部不可访问（参见变量范围）。在脚本的末尾，$aLevel 仅包含以下内容：

```
Array ( [0] => 98 ) 98 
```

...这是正确的，因为函数内的 $aLevel 数组不是同一个变量。

尝试将 $aLevel 从您的函数返回到您的主脚本，它会起作用。

# java - The OSX firewall prompts to "accept incoming network connections" when creating a ServerSocket

> ID：12612275
> 
> 赞同：0
> 
> 时间：2012-09-27T00:11:12.620
> 
> 标签：java, macos, sockets, firewall, serversocket

I'm using sockets to communicate between local processes. This causes the OSX firewall to prompt:

```
Do you want the application "Foo.app" to accept incoming network connections? 
```

I have two problems:

*   Ideally the prompt should not appear, since the socket is only for local use
*   The dialog appears then immediately disappears, so the user doesn't have time to click "Allow" or "Deny".

The code:

```
new ServerSocket(); 
```

Note that specifying localhost or 127.0.0.1 does not prevent the prompt either:

```
new ServerSocket(0, 0, InetAddress.getByName(null)); 
```

# mysql - 使用 sha512 散列整个列

> ID：12612279
> 
> 赞同：6
> 
> 时间：2012-09-27T00:11:44.020
> 
> 标签：mysql, sha512

我有一个包含三列的表：问题、答案、散列。我想用使用 sha512 散列的 Answer 列更新 Hashed 列。

我尝试使用这种语法直接从我的 MySql 数据库中进行更新，但没有成功：

UPDATE TableName SET Hashed = SHA512(Answer) WHERE Hashed IS NULL

我知道语法错误，但不知道为什么。

在此先感谢您的帮助！

R

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T00:14:58.540

试一试。

```
UPDATE TableName SET Hashed=SHA2(Answer, 512) WHERE Hashed IS NULL; 
```

请注意，这只适用于 MySQL 5.5 以后的版本。对于 5.5 之前的版本，您必须使用应用程序代码对其进行散列（PHP 获取所有行，遍历 $row['answer'] 并将其散列到 SHA512，然后在每个行上运行 UPDATE 命令）（来源：[http ://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html#function_sha2](http://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html#function_sha2) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-24T11:16:14.877

我希望这还不算太晚。即使，也许其他人会发现这个提示：

```
UPDATE TableName SET Hashed = ENCRYPT('Answer', CONCAT('$6$', SUBSTRING(SHA(RAND()), -16))) WHERE Hashed IS NULL; 
```

它的作用是使用它的模式创建 sha-512 哈希：`$6$`来自字符串 'Answer'

如果您使用的是 debian，您也可以使用`mkpasswd`from package`libstring-mkpasswd-perl`为您生成 SHA-512，并更新为字符串。

# css - 包裹在标签中的文本区域超出标签末端

> ID：12612282
> 
> 赞同：0
> 
> 时间：2012-09-27T00:12:40.240
> 
> 标签：css

使用此标记：

```
<label for="example">
  <textarea id="example" cols="40" rows="10"></textarea>
</label> 
```

标签不随 textarea 扩展，因此 textarea 将自身推到表单中的以下字段下。

有谁知道如何使用 CSS 让标签扩展到 textarea 的大小？

我试过了：

```
label { display: table; } 
```

以及标签和文本区域上的各种边距和填充，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:00:09.567

我认为您需要正确关闭文本区域，即使用关闭 </textarea> 标记 - 不过，我不确定标签是否以这种方式使用 - 也许 for 属性通过包含目标元素而变得多余与标签标签。:shrugs: 从下面的示例中删除 </textarea> 标记会使复选框消失，如果省略该标记，则页面显示将被破坏。:)

```
<!DOCTYPE html>
<html>
<head>
</head>
  <body>
    <label for="cb">
        <textarea id="example" cols="40" rows="10"></textarea>
    </label>
    <input type='checkbox' checked='true' id='cb'/>
  </body>
</html> 
```

# python - 组中的python列表值

> ID：12612283
> 
> 赞同：1
> 
> 时间：2012-09-27T00:12:50.123
> 
> 标签：python, list

我读取一个文件并按关键字对其进行分组。我还有一个列表，如果列表中的值在组中，我如何检查它？不只检查一个条目，而是对照组检查列表中的所有条目。

示例但未针对组检查列表。我不想写任何或任何blabla。

```
hosts = ['blabla.dyndns.org','blabla1.dyndns.org']
   with open(testfile,'r') as f:
       for key,group in it.groupby(f,lambda line: line.startswith('[hosts]')):
           if not key:
               group = list(group)
               if any("blabla.dyndns.org" in s for s in group) or any("blabla.dyndns.org" in s for s in group):
                   print 'yes'
               else:
                   print 'no' 
```

谢谢，问候。

* * *

我想要脚本，例如我可以更改某些主机的协议。

```
import itertools as it
testfile='blabla.txt'

hosts = set(['blabla.dyndns.org','blabla1.dyndns.org'])

with open(testfile,'r') as f:
    for key,group in it.groupby(f,lambda line: line.startswith('[host]')):
        if not key:
            group = set(group)
            if group & hosts: # set intersection
                print '[host]\n'
                for (i, item) in enumerate(group):
                    if 'protocol' in item:
                        group[i] = 'protocol     = udp\n'
                j = ', '.join(group)
                y = j.replace(", ", "")
                print y
            else:
                print '[host]\n'
                j = ', '.join(group)
                y = j.replace(", ", "")
                print y

exit(0) 
```

不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:16:24.050

使用集合交集：

```
hosts = set(['blabla.dyndns.org','blabla1.dyndns.org'])
with open(testfile,'r') as f:
    for key,group in it.groupby(f,lambda line: line.startswith('[hosts]')):
        if not key:
            group = set(group)
            if group & hosts: # set intersection
                print 'yes'
            else:
                print 'no' 
```

# eclipse - 使用 Eclipse 设置 Akka

> ID：12612287
> 
> 赞同：6
> 
> 时间：2012-09-27T00:13:30.430
> 
> 标签：eclipse, scala, sbt, akka

我正在尝试使用 Eclipse 和 Scala 构建一个简单的 Akka 程序。我使用 g8 使用 Akka（g8 typesafehub/akka-scala-sbt）创建 sbt 项目，然后使用 sbteclispe 创建 Eclipse 项目。当我将项目导入 Eclipse 时，我收到错误消息，提示我缺少 Akka。有什么方法可以用 Eclipse 构建 Akka 项目吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:35:43.647

最简单的事情是将`sbteclipse`插件添加到您的 Sbt 构建中。它会自动为 Eclipse 生成项目文件，以便您可以导入项目及其所有设置，包括类路径。为此，请在`project/plugins.sbt`（*不是*在项目的根目录下，而是在`project`子目录下）添加以下内容：

```
addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0") 
```

然后，开始`sbt`并在提示符下写入`eclipse`. 你应该看到：

```
> eclipse
[info] About to create Eclipse project files for your project(s).
[info] Successfully created Eclipse project files for project(s):
[info] Test Project 
```

然后转到 Eclipse 并导入您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:10:18.257

我用它从 IDE 启动 1.x 微内核，我认为它来自 Henke：

> 主类：akka.kernel.Main
> 
> 虚拟机参数：-Xms256m -Xmx1024m -Dakka.home=./kernel -Dlogback.configurationFile=src/main/resources/logback.xml

在内核目录中，我有一个符号链接配置 - > ../src/main/resources

在内核目录中，我还有一个空的部署目录。没用过，但必须有。

# java - 具有多个数据源但只有一组存储库的 Spring Data + JPA

> ID：12612288
> 
> 赞同：21
> 
> 时间：2012-09-27T00:13:30.663
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我今天一直在研究这个，我开始认为我想做的事情可能是不可能的，所以我向你寻求帮助，哦，强大的 Stackoverflow。

我正在用 Java 构建一个 RESTful 服务平台，使用 Spring Data 3.1.2 + JPA 作为我的持久层（如此[处](http://static.springsource.org/spring-data/data-jpa/docs/1.1.x/reference/html/)所述）。我的数据模型对象都实现为扩展 Spring JpaRepository 接口的接口。如本例所示，我已将所有内容都连接起来并与单个数据源很好地工作（请注意，显示的数据源是 Derby，但这仅用于开发目的；在生产中，我们将使用 Oracle）：

```
<jpa:repositories base-package="com.my.cool.package.repository"/>

<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="loadTimeWeaver">
    <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
  </property>
  <property name="packagesToScan" value="com.my.cool.package" />
  <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
</bean>

<bean name="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
  <property name="entityManagerFactory" ref="emf" />
</bean>
<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="org.apache.derby.jdbc.EmbeddedDriver" />
  <property name="url" value="jdbc:derby:derbyDB" />
  <property name="username" value="dev" />
  <property name="password" value="notARealPassword" />
</bean>

<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
  <property name="databasePlatform" value="org.hibernate.dialect.DerbyTenSevenDialect" />
</bean> 
```

问题是这个应用程序需要连接到几个（Oracle）数据库。每个传入请求中包含的凭据将包含一个字段，该字段告诉应用程序要访问哪个数据库才能满足该请求。每个数据库的模式都是相同的，因此每个数据库不需要单独的存储库接口。

经过大量的谷歌搜索，很明显这是一种常见的情况。以机智：

*   [使用 Spring Data JPA 的多个数据库](https://stackoverflow.com/questions/9893274/multiple-databases-with-spring-data-jpa)
*   [Spring + Hibernate + JPA + 多个数据库](https://stackoverflow.com/questions/8703242/spring-hibernate-jpa-multiple-databases)
*   [如何使用多个数据源设置 spring data jpa](https://stackoverflow.com/questions/5870911/how-to-setup-spring-data-jpa-with-multiple-datasources)

这是（前？）Spring 开发人员的博客文章，实际上与手头的主题无关，但有人在评论中提出了它，作者回复了一些信息：

[http://blog.springsource.org/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/#comment-198835](http://blog.springsource.org/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/#comment-198835)

似乎正在出现的主题是解决这个问题的方法是定义多个 EntityManagerFactories，并将每个连接到适当的存储库，如下所示：

```
<jpa:repositories base-package="com.my.cool.package.repository1" entity-manager-factory-ref="firstEntityManagerFactory" />
<jpa:repositories base-package="com.my.cool.package.repository2" entity-manager-factory-ref="secondEntityManagerFactory" /> 
```

但是，正如我已经提到的，我想在所有数据源中重用我的存储库，所以这种方法似乎行不通。

我知道在我的代码中没有办法绕过从请求中获取相关信息的逻辑，并使用它来确定要使用的数据源（或 EntityManagerFactory）。我正在努力解决的部分是如何获取该数据源/EntityManagerFactory 的句柄并将其“注入”到我的存储库对象中。有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T22:13:58.757

如果您真的`DataSource`以多租户的方式使用不同的 es（基本上将请求分配给 a`DataSource`并在整个请求中坚持使用它），您应该看看`AbstractRoutingDataSource`. 它本质上提供了一种保留 a `Map`of `DataSource`es 的方法以及一个回调方法来返回一个用于查找`DataSource`最终要使用的 key 的键。这个方法的实现通常会查找一些线程绑定的键并将其返回（或者甚至`DataSource`依次将其映射到映射键上）。您只需要确保某些 Web 组件首先将该键绑定到线程。

如果你有它，你的 Spring 配置只需为你的子类设置一个 bean`AbstractRoutingDataSource`并将 map`DataSources`导入它。您的 Spring Data JPA 设置保持默认方式。the`EntityManagerFactoryBean`指的是`AbstractRoutingDataSource`并且你只有一个`<jpa:repositories />`元素。

# sml - ML代码错误的原因

> ID：12612308
> 
> 赞同：0
> 
> 时间：2012-09-27T00:16:26.567
> 
> 标签：sml, ml

下面的代码只是一种原型。我想知道的是为什么它无法编译。

```
fun test(list) = 
    let 
    fun inner(list) = 
    let
        val from = #1(hd(list))
        in
        if null(tl(list)) = false then innerinner(tl(list),from)
        else false
        end 
    fun innerinner(list,from) = 
        if #2(hd(list)) = from then true
        else if null(list) = false then innerinner(tl(list),from)
        else false
    in
    inner(list)
    end; 
```

错误消息是：

```
test.txt:7.34-7.44 Error: unbound variable or constructor: innerinner
test.txt:3.2-9.6 Error: unresolved flex record
(can't tell what fields there are besides #1)
test.txt:10.2-13.13 Error: unresolved flex record
(can't tell what fields there are besides #2)

uncaught exception Error
raised at: ../compiler/Toplevel/interact/evalloop.sml:66.19-66.27
.... 
```

我是 ML 编程的初学者。谁能教我什么是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:21:38.197

你在这里发生了很多事情。如果我们首先查看您遇到的错误。

1.  未绑定的变量或构造函数：innerinner

    在 sml 中，您不能在声明之前“使用”东西。在您的情况下，通过交换函数声明并因此`innerinner`在`inner`.

    如果您最终遇到想要声明两个相互递归函数的情况，那么这不是一个选项。在这种情况下，您必须使用关键字`and`。

2.  未解决的弹性记录

    这有点复杂。这是一个类型错误，与元组在内部表示为记录的事实有关（我建议你去阅读它）。因此，当您没有提供足够的信息时，类型系统会抱怨。

    我认为[这个 QA](https://stackoverflow.com/questions/9845654/sml-tuples-combination)解释得很好。总之，你不能有无界元组，因此你需要让类型系统清楚它包含多少元素。这可以通过显式类型注释函数声明来完成。但是，一般来说，您应该尽可能多地使用模式匹配。

通常，您应该始终使用模式匹配而不是元组选择器（#1、#2、...）或列表选择器（hd 或 tl）。您刚刚看到了为什么元组选择器可能是“坏的”，但是使用列表选择器而不首先测试列表是否为空会给您运行时错误（异常）。

在你的代码中加入这样的测试用例会“搞砸”并让它阅读起来很混乱。但是，如果您改用模式匹配，您的函数定义中会出现一些很好的清晰案例。此外，您通常会倾向于编写更少的代码（在我看来）。

顺便说一句，您不需要在函数的单个参数周围加上括号，例如函数的主要定义`test`。

总而言之，您的函数可能看起来像这样：

```
fun test list =
let
  fun innerinner ((x1, x2)::xs,from) =
      if x1 = from then true
      else innerinner(xs,from)
    | innerinner ([], from) = false

  fun inner ((x1, x2)::xs) = innerinner(xs,x1)
    | inner [] = false
in
  inner(list)
end 
```

# c# - 无法将 -1 提高到基于分数的理性幂

> ID：12612312
> 
> 赞同：1
> 
> 时间：2012-09-27T00:16:58.480
> 
> 标签：c#, math, rational-number, fractions, exponent

在我的 TI-84 Plus (Silver Edition) 上，我可以正确输入以下内容： (-1)^(1/3) = -1 - 数字如：(-1)^.5

现在，我的问题在于 C# 的 Math 对象。如果我发送*任何*这样的分数：`{1.667, 109.667, 0.667, 120.667} OR {4/3, 111/3, 2/3, 122/3}`，我会得到：`{NaN, NaN, NaN, NaN}`。

我是否必须编写一个新对象`MathHelper`来检查有理值并根据有限的输入开关返回答案？或者我缺少的 Math 对象是否有一个功能。我可以在计算器上做到这一点...

*PS，我还没有在网上遇到过类似的问题；所以如果这是重复的，请通知我；）*

**【我的新观点】**
谢谢大家的帮助！我已将“Microsoft.Solver.Foundation.dll”升级到 4.0 目标框架，结果发现“Rational”对象似乎只返回 -1 和“不确定”。然后在 Google 上输入 (-1)^(1/2) [nonreal ans] 后，我突然意识到我正在使用 nth-roots ！因此，事实证明我过去已经在 C# 中管理了虚数，因此解决了我的问题：

`Any even root 2n of a negative number -m will always equal an imaginary number i. (2n√-m)=i` *我不敢相信我忘记了这个简单的代数性质*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:39:39.247

在 C# 中，没有为 R 的非整数值定义 (-1)^R。如果您尝试计算 (-1)^(1/3)，C# 将首先计算 1/3，从而导致非整数R 的整数浮点数。

解决方案：使用数学恒等式：

```
 a^(x/y) = a^x * a^(1/y)  x,y integers 
```

对于负 a，使用：

```
 a^1/y = -(|a|^1/y)  // only works if y is odd 
```

或者放在一起：

```
if (a < 0) {
  if (y % 2 = 1) {
    result = a^x * -1 * (-a)^(1.0/y);   // Replace ^ with the correct C# call.
  } else {
     // NaN
  }
} else {
  result = a^(x/y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:25:21.143

您将不得不编写自己的数学助手来执行这样的功能（至少对于`Math.Pow`）。编辑：或者您可以使用`Rational`评论中提到的库。

根据文档：

> 输入：x < 0 但不是 NegativeInfinity；y 不是整数、NegativeInfinity 或 PositiveInfinity。
> 
> 结果：NaN

在此处查看文档：http: [//msdn.microsoft.com/en-us/library/system.math.pow.aspx](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)

# c# - C#：将 SQL Server 数据库备份到新的 .bak 文件

> ID：12612318
> 
> 赞同：1
> 
> 时间：2012-09-27T00:17:47.947
> 
> 标签：c#, sql-server, database, windows-forms-designer

我正在尝试制作一个能够从 SQL Server 备份和恢复数据库的 Windows 窗体应用程序。用户可以选择保存 .bak 文件的位置。

我遇到的问题是，如果该文件尚不存在，则不会创建新文件。因此，如果我从 SQL Server 中进行备份并将其保存到 C:\backup.bak 并将其作为“路径”传递到程序中它可以工作，但是如果我将文件的位置或名称更改为一个不存在它会抛出一个错误，说它无法打开备份设备。如果它不存在，是否有可能让它创建一个新的 .bak 文件，我将如何去做？

我目前的代码如下；

```
 var dataSource = txtDS.Text;
            var db = txtDbName.Text;
            var path = txtBackup.Text;
            var name = txtName.Text;
            var desc = txtDesc.Text;

            if(File.Exists( path) == true )
            {
                MessageBox.Show("Test");
            }
            else
            {

                Directory.CreateDirectory(@path);
            }

            Server myServer = new Server(dataSource);
            myServer.ConnectionContext.LoginSecure = true;
            myServer.ConnectionContext.Connect();

            var bkpDbLog = new Backup();
            bkpDbLog.Action = BackupActionType.Database;
            bkpDbLog.Database = db;

            bkpDbLog.Devices.AddDevice(path, DeviceType.File);
            bkpDbLog.BackupSetName = name;
            bkpDbLog.BackupSetDescription = desc;

            bkpDbLog.Initialize = true;
            bkpDbLog.Checksum = true;
            bkpDbLog.ContinueAfterError = true;
            bkpDbLog.Incremental = false;
            bkpDbLog.FormatMedia = false;

            bkpDbLog.PercentComplete += CompletionStatusInPercent;

            bkpDbLog.Complete += BackupCompleted;

            bkpDbLog.SqlBackup(myServer);

            if (myServer.ConnectionContext.IsOpen)
                myServer.ConnectionContext.Disconnect(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:39:00.013

我不熟悉`Backup`您在这里使用的对象（我总是发出实际`BACKUP DATABASE`命令），但我怀疑如果文件不存在与文件夹不存在与您不存在，您会得到不同的错误有权写入该文件夹。

该文件是否存在，以及您是否已指定`.Initialize`（相当于`WITH INIT`），将决定该命令在这种情况下的行为方式。

如果该文件夹不存在，您将收到错误消息，您需要先创建该文件夹（实际上是整个路径）。

如果该文件夹*确实*存在，您需要确保 SQL Server 服务帐户有权写入该文件夹。您试图写入根目录 ( `C:\`) - 驱动器根目录是现代 Windows 版本中特殊的、受保护的圣地。尝试创建一个类似的文件夹`C:\backups\`并备份到该位置。

这就是为什么我们通常允许 SQL Server 写入实例的指定备份文件夹或其他一些预先确定的位置 - 然后如果我们需要在其他地方移动/复制文件，则从那里移动/复制文件。我们通常不希望管理用户可能输入的任何文件夹的权限。

# java - 使用 AsyncTask 更新 UI（动态布局）

> ID：12612319
> 
> 赞同：0
> 
> 时间：2012-09-27T00:17:54.443
> 
> 标签：java, android, android-layout, user-interface, android-asynctask

以下代码当前在我的 main 的 onCreate() 中运行。我现在只是在测试。我一直试图在 AsyncTask 中完成这项工作，因为目标是以后能够动态更新这些，但似乎无法找到如何做到这一点。我想知道是否有人有一些见识。谢谢！

```
LinearLayout ObjectLayout = (LinearLayout) findViewById(R.id.LayoutObjects);

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.height = 140;
    params.width = 140;
    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
    for (int i = 0; i < 10; i++) {

        Button btn = new Button(this);
        btn.setLayoutParams(params);
        btn.setPadding(0, 50, 0, 0);
        btn.setTextSize(14);
        btn.setText("MyButton");
        btn.setTextColor(color.Yellow);
        // Drawable image = Drawable.createFromPath("@drawable/add_page");
        // //
        // btn.setBackgroundDrawable(image);

        btn.setBackgroundDrawable(getResources().getDrawable(
                R.drawable.add_page));
        // btn.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0);

        ObjectLayout.addView(btn);

    }

private class GetDataTask2 extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {

        // Simulates a background job.

        for (int i = 0; i < 10; i++) {
            publishProgress(btn2);
        }

        return null;
    }

    protected void publishProgress(Button btn2) {
        btn2.setLayoutParams(params2);
        btn2.setPadding(0, 50, 0, 0);
        btn2.setTextSize(14);
        btn2.setText("MyButton yo yo yo ");
        btn2.setTextColor(color.Yellow);

        btn2.setBackgroundDrawable(getResources().getDrawable(
                R.drawable.add_page));
        ObjectLayout2.addView(btn2);
        // Process width and height
    }

    protected void onPostExecute() {
        // Do some stuff here

        // Call onRefreshComplete when the list has been refreshed.

    }
} 
```

这里的代码是我的异步代码，并将布局和按钮创建定义为 mainactivity 中的实例，只是为了测试和理解这一点，但我遇到了错误，我一直在对其进行操作，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:20:49.763

我必须做一些类似的事情（一次将大约 80-120 个自定义视图膨胀/添加到可滚动布局中），我的 AsyncTask 结构是这样的：

首先，您需要将您的`Context`and传递`LinearLayout`给您的 AsyncTask。只需为此使用自定义构造函数。

`onPreExecute()`：显示进度对话框，或显示“忙碌”的内容。

`doInBackground()`：就像你一样在你的循环中创建按钮，但不要超过那个线程。创造/通货膨胀部分是大部分时间，所以不用担心。在每个循环周期结束时，`publishProgress(btn)`。

`onProgressUpdate()`：将按钮（从上方传递）设置为您喜欢的方式（文本/填充/等），并将其添加到布局中。

`onPostExecute()`: 关闭你的对话。

注意，使用一个线程充气和一个线程布局并不会提高速度。我的从没有 AsyncTask 的大约 2.5 秒到有超过 2 秒。但是，这种方式提供了一个清晰的进度对话框，而不是 UI 在膨胀所有视图时只是挂起。它可能不会更快，但*感觉*反应更快，这才是真正重要的。

**编辑：** 有关自定义构造函数的示例，请检查[此问题](https://stackoverflow.com/questions/4885350/how-to-pass-different-objects-as-a-parameter-to-asyctask)。它还展示了如何跳过构造函数并将其直接传递给`doInBackground()`方法。无论哪种方式都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:34:08.000

AsyncTasks 通常用于长时间的后台操作。因此，除非您希望在完成此类任务后更新您的按钮，否则我不确定您为什么要使用一个？

但是，如果这确实是您的目的，那么您将在 AsyncTask 的 doInBackground() 函数中执行您需要的任何任务/代码。完成后，您将在 AsyncTask 的 onPostExecute() 函数中相应地更新您的 UI。

也许您可以包含更多关于“动态加载”要求的性质的详细信息，以便社区可以为您提供更具体的答案。

# php - 字符串中的换行符？

> ID：12612320
> 
> 赞同：1
> 
> 时间：2012-09-27T00:17:58.260
> 
> 标签：php, string, parsing

我正在从服务器请求数据，当我将响应回显到页面上时，没有任何换行符，但是当我查看页面源时，**有**换行符。

这怎么可能？（即当我查看页面源代码时，我如何看到换行符？）

使用`<pre>`标签我可以让数据显示在页面上的换行符，但我想解析分隔行的字符串，我试图了解如何在字符串中找到换行符。

有道理？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T00:20:08.457

您没有看到换行符，因为 HTML 不会在标记中呈现换行符。您特别必须对换行符进行编码。最简单的方法是替换`\r\n`为`<br />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:21:04.203

在 HTML 中不显示线刹车。如果要显示线闸，请使用`<br/>`. 在 PHP 中，您可以使用`nl2br`将线刹车转移到`<br/>`

自行更换线闸：

```
$text = str_replace( array("/r/n","/r","/n"), "<br/>", $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:24:07.167

基于 ASCII 的换行符对浏览器中显示的内容没有影响（文本区域可能除外）。

要使换行符可见，请尝试`<br />`在数据发送到客户端之前或之后替换换行符。

对于服务器端，试试这个：

```
echo str_replace(PHP_EOL, '<br />', $output); 
```

# android - unwind：未知符号地址

> ID：12612322
> 
> 赞同：0
> 
> 时间：2012-09-27T00:18:08.487
> 
> 标签：android, linux

> **可能重复：**
> [调试 linux 内核恐慌](https://stackoverflow.com/questions/12523505/debugging-linux-kernel-panic)

我正在调试一次性问题。在 android 手机中浏览 gmail 时设备崩溃的地方。公共 Wifi 用于连接网络。到目前为止，我发现vector_swi中发生了页面错误，找到的lr值（获取SWI指令）是错误的。当时运行的进程是UEventObserver。

## 这是过程信息。

```
Task name: UEventObserver, pid: 675, cpu: 1, 
state: 0x0, exit_state: 0x0, stack_base: 0xd6eae000
Stack: 
[<C078939C>] __schedule+0x5b0
[<FFFFFFFF>] (null)+0x0
[<1>] (null)+0x1 
```

展开：未知符号地址 00000001 展开：未找到索引 00000001

* * *

这是崩溃的内核日志。

```
<1>[37655.473976] Unable to handle kernel paging request at virtual address 40025694

<1>[37655.473976] pgd = d7138000

<1>[37655.474007] [40025694] *pgd=9ec1a831, *pte=bf2e659d, *ppte=00000000

<0>[37655.474038] Internal error: Oops: 17 [#1] PREEMPT SMP

<4>[37655.474038] Modules linked in:

<4>[37655.474068] CPU: 1    Not tainted  (3.0.21-g572d9be-00004-g4ec4db2 #1)

<4>[37655.474099] PC is at vector_swi+0x28/0x88

<4>[37655.474129] LR is at 0x40025698

<4>[37655.474160] pc : c01065a8    lr : 40025698    psr : 60000093

<4>[37655.474160] sp : d6eaffb0  ip : 4062c18c  fp : 5ed97c24

<4>[37655.474190] r10: 58702b64  r9 : 5ea56f98  r8 : 20000010

<4>[37655.474221] r7 : 000000a8  r6 : 41b13530  r5 : 4062c270  r4 : 4062c140

<4>[37655.474251] r3 : 00000000  r2 : ffffffff  r1 : 00000001  r0 : 5ed97bd0

<4>[37655.474251] Flags: nZCv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment user

<4>[37655.474282] Control: 10c5787d  Table: 9ec3806a  DAC: 00000015

<4>[37655.474282] 
```

# ruby - rake 将参数传递给相关任务

> ID：12612323
> 
> 赞同：10
> 
> 时间：2012-09-27T00:18:27.300
> 
> 标签：ruby, rake

这是我运行 rak 相关任务的当前方式

```
task :test => [:prepare_testdir,:run_tests] 
```

目前这两个依赖任务没有参数。但我需要向其中一项任务添加参数。它应该像在命令行上一样运行

```
rake prepare_testdir[mydir] 
```

我如何将这个新参数传递给这个

```
task :test => [:prepare_testdir,:run_tests] 
```

我努力了

```
task :test => [:prepare_testdir[mydir],:run_tests] 
```

和

```
 task :test => [:prepare_testdir['mydir'],:run_tests] 
```

两者都不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T00:28:23.283

在 rake 文件中

```
task :test, [:dir] => [:prepare_testdir] do |t,args|
  puts args.inspect # {:dir=>"foo"}
end

task :prepare_testdir, :dir do |t, args|
  puts args.inspect # {:dir=>"foo"}
end 
```

调用

```
rake test[foo] 
```

# php - 未定义索引？

> ID：12612325
> 
> 赞同：-2
> 
> 时间：2012-09-27T00:18:31.690
> 
> 标签：php, post, indexing

我正在制作一个非常简单、非常容易的联系表格，当我在单独的页面上完成时，它运行良好，但是当我将它添加到当前网站时，它无法获得 $_POST，我不知道为什么。这是代码

```
$to ="enter email here";
        $name = $_POST["name"];
        $email = $_POST["email"];
        $header = "From " . $name;
        $message = $_POST["message"];
        $content = "From: ". $name ."<br /> Email: " . $email ."<br /> Message: " . $message;

        if(!filter_var($email, FILTER_VALIDATE_EMAIL)){
            echo "illegal email";
        }
        else
            {
            if (!empty($name) && !empty($message)){
                mail($to, $header, $content);
                echo"sent <br />";
                echo $content;
            }else
                {
                if(empty($email))
                    {
                        echo "your email is empty";
                    }
                    elseif(empty($name))
                    {
                        echo "please enter your name";
                    }
                    elseif(empty($message)){
                        echo "can't send empty messages";
                    }
                }   
            } 
```

html

```
<form method="post" action="mail.php">
        <table>
            <tr>
                <td>
                Name:
                </td>
                <td>
                    <input type="text" name="name" />
                </td>
            </tr>
            <tr>
                <td>
                     Email:
                </td>
                <td>
                     <input type="text" name="email"/>
                </td>
            </tr>
            <tr>
                <td>
                     Subject:
                </td>
                <td>
                     <input type="text" name="subject"/>
                </td>
            </tr>
            <tr>
                <td>
                    Message: <br /><br/><br/>
                </td>
                <td>
                    <textarea style="resize:vertical;" name="message"></textarea>
                </td>
            </tr>
            <tr>
                <td>

                </td>
                <td>
                    <input type="submit"/>
                </td>
            </tr>
        </table>
    </form> 
```

在此先感谢，如果重复，对不起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:47:18.513

通过在顶部添加类似这样的内容来检查 PHP 是否正在执行：

```
echo "Testing PHP..."; 
```

如果您在提交表单后没有看到该输出，请检查您是否将表单发布到正确的文件中。例如，您可能需要使用：

```
<form method="post" action="/mail.php"> 
```

或者

```
<form method="post" action="/php/mail.php"> 
```

...代码取决于您的网站结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:44:40.533

肯定不是 $_POST 坏了，所以它一定是与服务器相关的东西或代码中的错误。

您将表单导入到的网站上是否还有其他 PHP？如果是这样，您需要确保它不会以任何方式影响它。

还有一件事要检查，据报道，PHP 更新意外地将上传限制大小从“8M”更改为“10MB”。扫描您的 php.ini 文件并确保它们在您的上传限制中不是任何不需要的“MB”而不是“M”。

如果您在此之后仍未找到原因，我可以给出的最后一个建议是尝试使用：

```
<?php var_dump($_POST); ?> 
```

这应该揭示真正存在的东西。

# css - Bootstrap 导航栏上的阴影

> ID：12612332
> 
> 赞同：0
> 
> 时间：2012-09-27T00:19:42.950
> 
> 标签：css, twitter-bootstrap

我一直在尝试在 Twitter Bootstrap 的顶部浮动导航栏中添加阴影

这是我的网站： [http ://www.japaneselanguagefriend.com/application/home.php](http://www.japaneselanguagefriend.com/application/home.php)

我相信这是 bootstrap.min.css 中针对投影的正确区域？.navbar-inner

```
 .navbar-inner{min-height:45px;padding-left:25px;padding-right:25px;background-color:#fafafa;background-image:-moz-linear-gradient(top,
 #f89406, #fbb450);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f89406),
 to(#fbb450));background-image:-webkit-linear-gradient(top, #f89406,
#fbb450);background-image:-o-linear-gradient(top, #ffffff, #f2f2f2);background-image:linear-gradient(to bottom, #f89406, #fbb450);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',
 endColorstr='#fff2f2f2', GradientType=0);border:1px solid
 #d4d4d4;-webkit-border-radius:155px;-moz-border-radius:155px;border-radius:155px;-webkit-box-shadow:155
 155px 155px rgba(345, 5, 5, 5);-moz-box-shadow:515 155px 155px
 rgba(345, 0, 0, 5);box-shadow:155 155px 45px rgba(0, 0, 0,
 5);*zoom:1;}.navbar-inner:before,.navbar-inner:after{display:table;content:"";line-height:5;} 
```

然后我相应地调整了 mox-box-shadow 和 webkit-box-shadow 的数字。我仍然没有看到变化。所以然后我把数字提高得很高，超过 100 只是为了看看是否有任何实际变化，但仍然没有效果或阴影，谁能告诉我我做错了什么？谢谢！

# excel - 是否可以通过 Microsoft Excel 中的单元格引用单元格

> ID：12612334
> 
> 赞同：0
> 
> 时间：2012-09-27T00:20:12.297
> 
> 标签：excel, excel-formula

在我试图修复的电子表格中，在最后一页我希望它收集总数，到目前为止这是结构

```
Month | Year | Month Start | Month End | Month Total 
```

这应该如何工作是用户输入月份和年份，然后输入另一个页面的开始和结束行（月份开始和结束），这个另一个页面将包含每个事务作为单独行的事务记录，这可以意味着一个月可以有 5 笔交易，而另一个月可能有 50

我假设用户现在不知道如何从另一张表中引用数据，所以我想如何尝试并实现它，以便他们将行号添加到 Month Start 和 End 以及 Month Total 将生成公式

* * *

例如。

```
Month Start = 4 

Month End = 6

Formula Generated in Month Total = "=SUM(Transactions!E4:E6)" 
```

* * *

如果用户将 Month End 更改为 9，则上面生成的公式会将 E6 部分更改为 E9，就像我上面所说的，Transactions 表中的每一行都是一个交易，并且每个月可以有可变数量的交易

我要问的是是否可以引用这样的单元格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:35:06.800

看看[INDIRECT 函数](http://office.microsoft.com/en-us/excel-help/indirect-function-HP010062413.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:35:19.237

您可以使用该`OFFSET`函数从起点生成偏移量。

假设你的布局是这样的：

```
  ABCDE
1 年 月 开始 结束 总计
2 2012 年 1 月 4 日 9 =sum(...)

```

总列（单元格 E2）可能具有以下公式：
`=SUM(OFFSET(Transactions!E1,C2-1,0,(D2-C2)+1))`

# r - as.numeric vs chr

> ID：12612337
> 
> 赞同：1
> 
> 时间：2012-09-27T00:20:20.110
> 
> 标签：r

我有以下代码

```
fig4 <- data.frame(chads=NA,age=NA,treatment=NA,mean=NA,lower=NA,upper=NA)
fig4$chads <- as.factor(fig4$chads)
levels(fig4$chads) <- c(0,1,2,3,4,5,6)
fig4$age <- as.factor(fig4$age)
levels(fig4$age ) <- c("u80","o80")
fig4$treatment <- as.factor(fig4$treatment)
levels(fig4$treatment) <- c("OAC","OAP")
fig4$mean <- as.numeric(fig4$mean)
fig4$lower <- as.numeric(fig4$lower)
fig4$upper <- as.numeric(fig4$upper)

> str(fig4)
'data.frame':   1 obs. of  6 variables:
 $ chads    : Factor w/ 7 levels "0","1","2","3",..: NA
 $ age      : Factor w/ 2 levels "u80","o80": NA
 $ treatment: Factor w/ 2 levels "OAC","OAP": NA
 $ mean     : num NA
 $ lower    : num NA
 $ upper    : num NA 
```

到现在为止还挺好。但后来我这样做：

```
vc <- as.vector(c(6,"o80","OAC",0.1,0.02,0.25), mode = "any")
fig4 <- rbind(fig4,vc) 
```

结果是：

```
> str(fig4)
'data.frame':   2 obs. of  6 variables:
 $ chads    : Factor w/ 7 levels "0","1","2","3",..: NA 7
 $ age      : Factor w/ 2 levels "u80","o80": NA 2
 $ treatment: Factor w/ 2 levels "OAC","OAP": NA 1
 $ mean     : chr  NA "0.1"
 $ lower    : chr  NA "0.02"
 $ upper    : chr  NA "0.25" 
```

为什么数字向量变成字符向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:46:22.903

列表可以保存多种类型的对象，因此为避免将新数据转换为字符，您可以执行以下操作：

```
fig4[nrow(fig4) + 1, ] <- list(6,"o80","OAC",0.1,0.02,0.25) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T00:22:55.913

出于同样的原因，矩阵会 --- 向量和矩阵都只能保存*一种*类型。当你强迫角色融入其中时，你就会得到角色。

使用 data.frame 来保存不同类型的“列”，然后对各个列进行子集化。

# python - 在 Selenium Webdriver 中定位一个类

> ID：12612343
> 
> 赞同：0
> 
> 时间：2012-09-27T00:21:02.120
> 
> 标签：python, selenium

Python 2.7 的 Selenium 新手

一个目标是如何创建一个 with 类并让它点击？

```
<a href="#" class="create"></a> 
```

我正在尝试做的事情：

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re
self.driver.find_element_by_link_text("create").click() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:20:43.133

使用 XPath 或 CSS 选择器查找目标元素：

```
element = self.driver.find_element_by_css_selector('a[class="create"]')
element.click() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:03:58.847

您还可以使用内置的查找器来查找类。

```
element = self.driver.find_element_by_class_name("create")
element.click() 
```

# java - 使用服务帐户进行身份验证时，使用 Google Drive API 创建文件会转到哪个帐户？

> ID：12612348
> 
> 赞同：5
> 
> 时间：2012-09-27T00:21:35.077
> 
> 标签：java, android, google-drive-api

我正在尝试使用 Google Drive API 将我们的应用程序创建的日志文件发送到我们公司为 Android 开发共享的 Google Drive 帐户。大多数示例展示了如何使用 oAuth2 对最终用户的 Google Drive 帐户进行身份验证，但我们希望将文件仅发送到我们的 Google Drive 帐户。

经过一番搜索，我发现我应该为我们的应用程序创建一个 API 项目，并使用与该 API 项目关联的服务帐户来生成一个密钥，我们将其作为原始资源包含在我们的项目中，以使用 oAuth2 进行身份验证以获得所需的 GoogleCredential构建我们将用来进行 API 调用的 Drive 服务。

正确验证后，我可以使用 Google Drive API 站点上的代码示例插入一个文件，并且该文件似乎工作正常，但是我在我们的 Google Drive 帐户中看不到创建 API 项目/服务帐户的文件。尽管如此，如果我调用 Drive.files().list().execute() 并将 FileList 输出为字符串，我能够看到我们的应用程序之前插入到服务帐户的 Google Drive 中的文件。

**所以我的问题是：**是否为服务帐户创建了一个与创建服务帐户的 Google Drive 帐户不同的新 Google Drive 帐户？如果是这样，有没有办法登录到该帐户并使用普通的 Google Drive Web UI 查看文件，这样我们就可以访问日志文件，而无需编写其他一些使用服务帐户进行身份验证然后获取文件的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:20:31.453

看来我的问题最终是重复的，另一个问题对我来说有点难以找到。问题是[我在我的 Google Drive 中看不到通过代码创建的文件和文件夹，](https://stackoverflow.com/q/12211859/994519) Google 员工回答了这个问题：[https ://stackoverflow.com/a/12218662/994519](https://stackoverflow.com/a/12218662/994519)

# jquery - 删除 XML 中的空格

> ID：12612351
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:22:09.477
> 
> 标签：jquery, xml, arrays, space

这是 XML，我希望看到“这就是我想要的内容”。句子中有空格，两个句子之间用“enter”隔开。当我使用数组时，它通过输入识别每个空格甚至空格。我该怎么做才能在 Jquery 中删除数组中的空格？

`<list> <title name="symbol-B">1</title> <chr>this is the content what i want</chr>` `</list>`

这是jsfilddle

```
$.ajax({
    type: "get",
    url: "XMLFile1.xml",
    async: false,
    dataType: "xml",
    success: function (xml) {
        $(xml).find('list').each(function () {

            obj = $(this).find("title");

            if (obj.text() == "1") {
                var charList1 = (obj.next().text());
                    alert(charList1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:24:56.630

你可以使用`text`和`split`方法。

```
$('list chr').text().split(" ").join(''); 
```

[http://jsfiddle.net/aAdTA/](http://jsfiddle.net/aAdTA/)

您可以连接结果：

```
 var text = '';
 $(xml).find('list').each(function () {
        obj = $(this).find("title");
        if (obj.text() == "1") {
            text += " " + obj.next().text().split(" ").join('');
        }
 })
 alert(text) 
```

# javascript - 使用 clone & pop 来遍历数组而不是使用 for 循环有什么缺点？

> ID：12612353
> 
> 赞同：0
> 
> 时间：2012-09-27T00:22:25.843
> 
> 标签：javascript, performance

看起来这种迭代方法比 for 循环快得多：

```
var arr = window.arr.slice(0),
    fruit = arr.pop();
while (fruit) {
 fruit = list.pop();
} 
```

正如这个 jsperf 测试所证明的那样：http: [//jsperf.com/loop-iteration-length-comparison-variations/7](http://jsperf.com/loop-iteration-length-comparison-variations/7)

我知道克隆数组会造成内存损失，但是如果我在循环遍历它后立即删除克隆，我还应该厌倦什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:18:25.887

主要缺点在这里：

```
fruit = arr.pop();
while (fruit) { 
```

如果`fruit`计算结果为假（即为空、未定义、0 等），则循环将停止。这对于稀疏数组来说是很讨厌的，例如

```
var arr = [0,,,,2]; 
```

只会循环最后一个成员，然后尝试评估`arr[arr.length - 2]`，发现它返回 undefined （它不存在）所以循环结束。这在循环中是可以避免的，`for`因为您可以先测试该属性是否存在（如有必要）：

```
for (var i=0, iLen=arr.length; i<iLen; i++) {

  if (i in arr) {
    // arr has a property i so do stuff with arr[i]
  }
} 
```

因此*pop*方法可能很快，但只有在您确定没有任何值评估为 false 或通过保留计数器终止循环时才可靠：

```
var fruit, 
    i = arr.length;
do {
  fruit = arr.pop();
} while (--i) 
```

所以你不妨这样做

```
do {
  fruit = arr[--i];
} while (i); 
```

并且不打扰副本。

# windows - 交换 alt 键功能

> ID：12612355
> 
> 赞同：4
> 
> 时间：2012-09-27T00:22:47.840
> 
> 标签：windows, swap, alt-key

我需要`Alt`在 Windows 7 中交换按键功能。一家大公司需要那些在打字机上书写的老人，打字机的左侧有变音字符键，但他们现在正在开发的 Win7 有`Alt`这个目的。

两天的研究让我找到了一个驱动程序解决方案。我需要原始 Windows 7 驱动程序的源代码（两个`.sys`文件似乎是键盘驱动程序），并可能在 Windows DDK 中修改它们。或者我需要制作一个可以与默认驱动程序一起使用的附加驱动程序。如我所见，解决方案将使用 C 或 C++。但是我必须通过什么方式来实现这一点？我应该采取哪些步骤？

限制是：

1.  一次系统重启仅用于驱动安装。
2.  `Alt`在 Win7 中工作时交换键的一种简单方法（`Alt`通过同时按下它们来交换键）。
3.  没有需要重新启动的 Win7 键盘重新映射。

稍后添加：我有我需要的一切，但没有处理交换的代码。例如，我为 right`Shift`和做了一个开关`Enter`，因为只发送了一个扫描码。但是左`Alt`发送一个，右`Alt`发送两个扫描码：

```
VOID
KbFilter_ServiceCallback(
IN PDEVICE_OBJECT  DeviceObject,
IN PKEYBOARD_INPUT_DATA InputDataStart,
IN PKEYBOARD_INPUT_DATA InputDataEnd,
IN OUT PULONG InputDataConsumed
)
/*++

Routine Description:

Called when there are keyboard packets to report to the Win32 subsystem.
You can do anything you like to the packets.  For instance:

o Drop a packet altogether
o Mutate the contents of a packet
o Insert packets into the stream

Arguments:

DeviceObject - Context passed during the connect IOCTL

InputDataStart - First packet to be reported

InputDataEnd - One past the last packet to be reported.  Total number of
               packets is equal to InputDataEnd - InputDataStart

InputDataConsumed - Set to the total number of packets consumed by the RIT
                    (via the function pointer we replaced in the connect
                    IOCTL)

Return Value:

Status is returned.

--*/
{
PDEVICE_EXTENSION   devExt;
WDFDEVICE   hDevice;

hDevice = WdfWdmDeviceGetWdfDeviceHandle(DeviceObject);

devExt = FilterGetData(hDevice);

if (InputDataStart->MakeCode==0x1c)
    InputDataStart->MakeCode=0x36;
else if (InputDataStart->MakeCode==0x36)
    InputDataStart->MakeCode=0x1c;
else if (InputDataStart->MakeCode==0x9c)
    InputDataStart->MakeCode=0xb6;
else if (InputDataStart->MakeCode==0xb6)
    InputDataStart->MakeCode=0x9c;

(*(PSERVICE_CALLBACK_ROUTINE)(ULONG_PTR) devExt->UpperConnectData.ClassService)(
    devExt->UpperConnectData.ClassDeviceObject,
    InputDataStart,
    InputDataEnd,
    InputDataConsumed);
} 
```

所以我只是简单地交换分别按下和释放两个键的扫描码。正确`Alt`的是发送两个扫描码，我不确定它是通过两次调用此函数还是在`InputDataStart`结构中生成两个扫描码。我会尝试在每个扫描码上发出哔哔声，`Alt`但我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:07:14.007

解决方案：

```
if (InputDataStart->MakeCode==0x38 || InputDataStart->MakeCode==0xb8)
    InputDataStart->Flags^=KEY_E0; 
```

它交换左右 Alt 键功能。

现在我需要使交换可配置。为了最好 - 按两个 Alt。

# compiler-optimization - 分支指令和选择指令的区别

> ID：12612361
> 
> 赞同：1
> 
> 时间：2012-09-27T00:24:03.300
> 
> 标签：compiler-optimization, computer-architecture, instruction-set

`The 'select' instruction is used to choose one value based on a condition, without branching.`

我想知道分支指令和选择指令之间的区别（最好是 x86 架构和 PTX）。据我所知，`select`与分支指令相比，它更优化，但我没有清晰的画面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:51:54.440

分支是一种用于重定向控制流的通用机制。它用于实现大多数形式的`if`语句（当特定优化不适用时）。

选择是某些指令集上可用的专用指令，可以实现某些形式的条件表达式

```
z = (cond) ? x : y; 
```

或者

```
if(cond) z = x; 
```

前提是`x`和`y`是普通值（如果它们是表达式，它们都必须在选择之前计算，这可能会导致性能损失或不正确的副作用评估）。这样的指令必然比分支更受限制，但具有指令指针不变的明显优势。因此，处理器不需要在分支错误预测时刷新其流水线（因为没有分支）。因此，选择指令（如果可用）更快。

在一些超标量架构上，例如 CUDA，分支在性能方面非常昂贵，因为并行单元必须保持完全同步。例如，在 CUDA 上，块中的每个执行单元都必须采用相同的执行路径；如果一个线程分支，那么每个单元都会通过两个分支（但将对未采取的分支执行无操作）。但是，选择指令不会产生这种惩罚。

请注意，大多数编译器将使用合适的选项生成“选择”样式的指令，就像`cmov`给出一个足够简单的`if`语句一样。此外，在某些情况下，可以使用按位操作或逻辑运算将布尔条件与表达式值组合，而无需执行分支。

# php - 简单的条件语句问题

> ID：12612364
> 
> 赞同：0
> 
> 时间：2012-09-27T00:24:14.617
> 
> 标签：php

如果满足条件，我试图停止代码执行。我有

```
if(isset($fileName)){
    echo 'no more time!'
    //I want my script stops right here and don't excute the codes below...
}

//lots of codes.....
//lots of codes..... 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:25:31.487

为此，您可以简单地使用：

```
exit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:25:53.180

`exit()`输出一条消息并终止当前脚本。

```
if(isset($fileName))
{
    echo 'no more time!';
    exit();
} 
```

**[PHP 文档：exit()](http://php.net/manual/en/function.exit.php)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T00:34:30.567

您还可以使用此功能：

```
die(); 
```

# xslt - XSLT 搜索子结构的出现并在其丢失时创建它

> ID：12612365
> 
> 赞同：0
> 
> 时间：2012-09-27T00:24:17.893
> 
> 标签：xslt

给定一个输入 XML，如下所示：

```
<foodGroup>
    <fruit>
        <label>Apple</label>
        <value>1</value>
    </fruit>
    <fruit>
        <label>Banana</label>
        <value>2</value>
    </fruit>
    <vegetable/>
</foodGroup> 
```

什么是 XSL 转换，它将检查标签 = 'Orange' 且值 = 非 0 的水果是否存在。如果它缺失，则将水果/标签和水果/值结构添加到输出中。

像这样的东西：

```
<foodGroup>
    <fruit>
        <label>Apple</label>
        <value>1</value>
    </fruit>
    <fruit>
        <label>Banana</label>
        <value>2</value>
    </fruit>
    <fruit>
        <label>Orange</label>
        <value>3</value>
    </fruit>
    <vegetable />
</foodGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:37:46.323

相关测试是`<xsl:if test="not(fruit[label = 'Orange' and value != 0])">`。

以下 XSLT 给出了您要求的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml" indent="yes"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="foodGroup">
    <xsl:copy>
      <xsl:apply-templates />
      <xsl:if test="not(fruit[label = 'Orange' and value != 0])">
        <fruit>
          <label>Orange</label>
          <value><xsl:value-of select="count(fruit) + 1"/></value>
        </fruit>
      </xsl:if>      
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

这假设您希望水果值每次增加 1。如果这不是一个正确的假设，请指定您希望添加的 Orange 具有什么值。

# javascript - jQuery .load() 不会将数据加载到

> ID：12612367
> 
> 赞同：1
> 
> 时间：2012-09-27T00:25:10.143
> 
> 标签：javascript, jquery, html

我有这样的HTML：

```
<form>
<div id="to_receive_data">
</div>
</form> 
```

像这样的Javascript：

```
$("#to_receive_data").load("./loadable/a_form_to_load.php"); 
```

当 .load() 完成时，DOM 显示：

```
<form>
</form>
<div id="to_receive_data">
<input name="data_from_ajax" value"help_i_need_a_form"/>
</div> 
```

如您所见，div 已移到元素之外。

当我按下提交时，操作页面没有收到任何参数。这里有我不知道的 .load() 怪癖吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:22:35.883

.load() 方法从服务器加载数据并将返回的 HTML 放入匹配的元素中。有些函数支持类似的功能，如 .load()。请参考以下功能。

*   $.ajax
*   $.post
*   $.get

您可以使用上述任一功能。

请参考下面的例子来实现。

```
$.ajax({
  type: 'POST',
  url: './loadable/a_form_to_load.php',
  data: data,
  dataType: dataType,
  success: function (data){
     $("#to_receive_data").html(data);
  }
}); 
```

否则，如果您想要更简化的版本，也可以试试这个。

```
$.post('./loadable/a_form_to_load.php', function(data) {
  $("#to_receive_data").html(data);
}); 
```

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:03:39.063

您假设您收到的数据是有效的，您可以尝试这样的事情并绕过加载方法。

```
$.ajax({
    url: "form.php",
    dataType: "text",
    type: "GET",
    success: function (data){
         //manually insert the page
         $("#to_receive_data").html(data);
    }
}); 
```

# c# - 更改动态创建的自定义控件的位置

> ID：12612374
> 
> 赞同：0
> 
> 时间：2012-09-27T00:26:06.633
> 
> 标签：c#, winforms

假设我们有以下类`Cell`，它由一个`Label`控件组成：

```
class Cell : UserControl
{
    Label base;

    public Cell(Form form)
    {
        base = new Label();
        base.Parent = form;        
        base.Height = 30;
        base.Width = 30;
    }
} 

public partial class Form1 : Form
{ 
    Label label = new Label();

    public Form1()
    {
        InitializeComponent();

        Cell cell = new Cell(this);
        cell.Location = new Point(150, 150);   //this doesnt work            
        label.Location = new Point(150,150);   //but this does
    }
} 
```

单个`Cell`将显示在 中`Form`，但锚定到该`top left (0,0)`位置。

将 Location 属性设置为`Point`具有任何其他坐标的新属性不会执行任何操作，因为`Cell`它将保留在左上角。

但是，如果要创建一个新`Label`标签然后尝试设置其位置，则标签将被移动。

有没有办法在我的`Cell`对象上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:55:12.647

我认为您的主要问题是您没有正确地将控件添加到容器中。

首先，需要给Cell添加内部Label；

```
class Cell : UserControl
{       
    Label lbl;

    public Cell()
    {
        lbl = new Label();
        lbl.Parent = form;        
        lbl.Height = 30;
        lbl.Width = 30;
        this.Controls.Add(lbl); // label is now contained by 'Cell'
    }
} 
```

然后，您需要将单元格添加到表单中；

```
Cell cell = new Cell();
form.Controls.Add(cell); 
```

还; 'base' 是一个保留字，所以你不能这样命名内部标签控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:35:30.577

试试这个：

```
class Cell : Label
    {

    public Cell(Form form)
        {

                this.Parent = form;        
            this.Height = 30;
            this.Width = 30;
        }
    } 

    public partial class Form1 : Form
    { 
        Label label = new Label();

        public Form1()
        {
            InitializeComponent();

            Cell cell = new Cell(this);

            cell.Location = new Point(150, 150);   //this doesnt work

            label.Location = new Point(150,150);   //but this does

        } 
```

# php - 在另一个 div 中显示下拉列表中的数据

> ID：12612376
> 
> 赞同：0
> 
> 时间：2012-09-27T00:26:16.317
> 
> 标签：php, jquery, mysql, ajax, forms

我有一个下拉列表，其中包含从 MySQL 数据库中提取的值列表。这些值中的每一个在数据库中都有其他相应的属性。这是该表的结构：

编号 | 姓名 | 密码

下拉值基本上只是“名称”列中的所有值。

我想做的是在单独的 div 中显示所选下拉值的 id/name/password。也就是说，如果我从下拉列表中选择“MIT”，我希望 div 向我显示与 MIT 关联的 ID 和密码。如果我选择“哈佛”，我希望 div 显示与哈佛相关的 ID 和密码。

**我只是在寻找关于我应该如何处理这样的设置的高级建议。**

我正在考虑使用 AJAX 并将选定的值传递到一个单独的 PHP 文件中，然后该文件将提取并显示关联的 ID 和密码。然后，该 div 将包含调用该 PHP 文件并在该页面上显示值的代码。

我认为它在理论上可行，但似乎有点麻烦......有什么简化流程的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:13:32.397

您可以在选项中使用数据属性。这将通过标记公开密码，但由于它们无论如何都可以通过在下拉列表中选择选项来访问，我想这不是问题。

如果您给每个选项一个属性`data-password="thepassword"`，那么您可以`$("select").find(":selected").data("password")`检索密码。对一个`data-id`属性做同样的事情，你就是金色的。

另一种解决方案是使用以选项值作为键的 JSON 结构。假设`{"MIT":"1234","Harvard":"verysecret"}`然后使用`$("select").change()`and`$(this).val()`从您的 JSON 结构中检索相应的密码（和其他数据）。

# jquery - jQuery ajax 和 SSL

> ID：12612378
> 
> 赞同：2
> 
> 时间：2012-09-27T00:26:18.360
> 
> 标签：jquery, ajax, post, ssl

我的托管服务提供商让我能够在我的网站上启用免费的 SSL 证书。证书受信任但与我的域名不匹配，也就是说第一次浏览网站时必须手动接受证书。

现在所有页面都可以通过 https:// 访问，并且工作正常。

但是当使用 jQuery ajax 将 POST 数据发送到我的服务器时，我仍然可以看到在 firebug 中发送的所有数据 - 以明文形式。

这是因为 SSL 证书与我的域名不匹配吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:37:57.203

它与 SSL 没有任何关系。Ajax 帖子必须来自某个地方，因此 firebug 将始终能够在您的浏览器中使用它（因为它没有在浏览器实例本身内加密）。

SSL 加密您的浏览器和服务器之间的连接，以防止前夕丢失。这样其他机器就看不到数据了。如果您想查看加密形式的数据，我建议您设置一个[调试代理](http://www.charlesproxy.com)。

[在这里](http://www.youtube.com/watch?v=iQsKdtjwtYI&feature=related)查看 ssl 的解释。

# java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：-1

> ID：12612381
> 
> 赞同：0
> 
> 时间：2012-09-27T00:27:08.700
> 
> 标签：java, arrays

```
public class ParallelArray {

    public static Scanner sc = new Scanner(System.in);

    public static void main(String[] args) {
        char[] charArray = new char[5];
        int[] intArray = new int[5];
        char ch;
        int count;
        System.out.println("Enter 5 characters: ");
        for (int i = 0; i < charArray.length; i++) {
            charArray[i] = sc.next().charAt(0);
        }

        do {
            System.out.println("Enter a character: ");
            ch = sc.next().charAt(0);
            int location = search(ch, charArray);
            intArray[location]++;
            System.out.println("Again? 1-yes, 0-no");
            count = sc.nextInt();
        } while (count == 1);

        printBothLists(charArray, intArray);
    }

    public static void printBothLists(char[] charArray, int[] intArray) {
        for (int i = 0; i < charArray.length; i++) {
            System.out.println(charArray[i] + " - " + intArray[i]);
        }
    }

    public static int search(char ch, char[] charArray) {
        int count = -1;
        for (int i = 0; i < charArray.length; i++) {
            if (ch == charArray[i]) {
                count = i;
                return count;
            }
        }
        return count;
    }
} 
```

如果我输入 5 个字符，a,b,c,d,e 作为数组，然后要求用户 t 输入另一组字符，我输入 a,b,c,d,y。它将退出程序并给出错误：`- Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:39:30.013

您没有检查用户输入不存在的字符的可能性......

```
int location = search(ch, charArray);
intArray[location]++; // <-- The index is invalid... 
```

您需要在尝试访问阵列之前进行检查...

```
int location = search(ch, charArray);
if (location >= 0 && location < intArray.length) {
    intArray[location]++; // <-- The index is invalid...
} else {
    System.out.println("'" + ch + "' does not exist");
} 
```

# php - OAuth 无效签名

> ID：12612382
> 
> 赞同：0
> 
> 时间：2012-09-27T00:27:26.190
> 
> 标签：php, actionscript-3, flash, oauth, two-legged

我在使用 OAuthorization 时遇到问题，我有一个请求 PHP 脚本的 Flash 播放器应用程序。PHP 总是返回：

```
{"status":false,"message":"Invalid Signature"} 
```

我尝试了两个不同的库：

```
https://github.com/yahoo/yos-social-as3
https://github.com/iotashan/oauth-as3 
```

我不知道再尝试什么，有人可以帮我吗？

生成错误 URL 的 as3 脚本：

```
import com.yahoo.oauth.OAuthRequest;
import com.yahoo.oauth.OAuthConsumer;
import com.yahoo.oauth.OAuthSignatureMethod_HMAC_SHA1;
import com.yahoo.oauth.IOAuthSignatureMethod;
import com.yahoo.oauth.OAuthToken;
import com.yahoo.oauth.OAuthUtil;

var signature:IOAuthSignatureMethod = new OAuthSignatureMethod_HMAC_SHA1();
var consumer:OAuthConsumer = new OAuthConsumer("myKey", "mySecret");

var oauthRequest:OAuthRequest = 
    new OAuthRequest(
        "GET", 
        "http://mySite.com/index.php",
        null, 
        consumer, 
        null
    );

var request:URLRequest = new URLRequest(oauthRequest.buildRequest(signature));

var loader:URLLoader = new URLLoader;
loader.addEventListener(Event.COMPLETE, getComplete);
loader.load(request);

function getComplete(event:Event):void
{
    trace("data", URLLoader(event.currentTarget).data);
} 
```

我在 PHP 脚本中有一个生成正确 URL 的示例：

```
<?php
// include oath
require_once('OAuth/OAuth.php');

if ($mode == 'generate')
{
    $consumer = new OAuthConsumer(OAUTHKEY, OAUTHSECRET);
    $sig_method = new OAuthSignatureMethod_HMAC_SHA1;

    // call this file
    $api_endpoint = $_GET['url'];

    //use oauth lib to sign request
    $req = OAuthRequest::from_consumer_and_token($consumer, null, 'GET', $api_endpoint, $parameters);
    $sig_method = new OAuthSignatureMethod_HMAC_SHA1();
    $req->sign_request($sig_method, $consumer, null); //note: double entry of token
    echo $req->to_url();
    exit;
} 
```

这是 PHP 脚本生成的 url，这个工作：

```
http://mySite.com/index.php?
oauth_consumer_key=myKey&
oauth_nonce=20de438daf761115018b3d6f26456a6e&
oauth_signature=JpWrfU77Pl%2FfFoa%2BhVy8agq9I5Q%3D&
oauth_signature_method=HMAC-SHA1&
oauth_timestamp=1347583047&
oauth_version=1.0 
```

这是由 AS3 脚本生成的 url，这不起作用：

```
http://mySite.com/index.php?
oauth_consumer_key=myKey&
oauth_nonce=b8808c76e9aaa264964aefabb22bdc55&
oauth_signature=jZ31R4C0Ybj1dluIjy6wKCtN7D4%3D&
oauth_signature_method=HMAC-SHA1&
oauth_timestamp=1348705359&
oauth_version=1.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:40:13.200

解决了 ：）

感谢 PeeHaa 告诉我使用的是 2.0 版库，现在我正在使用 iotashan 库，即 1.0 版，它现在正在工作:)

```
import org.iotashan.oauth.IOAuthSignatureMethod;
import org.iotashan.oauth.OAuthConsumer;
import org.iotashan.oauth.OAuthRequest;
import org.iotashan.oauth.OAuthSignatureMethod_HMAC_SHA1;
import org.iotashan.oauth.OAuthToken;
import org.iotashan.utils.OAuthUtil;
import org.iotashan.utils.URLEncoding;

var signature:IOAuthSignatureMethod = new OAuthSignatureMethod_HMAC_SHA1();

var consumer:OAuthConsumer = new OAuthConsumer("myKey", "mySecret");

var oauthRequest:OAuthRequest = 
    new OAuthRequest(
        OAuthRequest.HTTP_METHOD_GET, 
        "http://mySite.com/index.php",
        null, 
        consumer, 
        null
    );

var request:URLRequest = new URLRequest(oauthRequest.buildRequest(signature, OAuthRequest.RESULT_TYPE_URL_STRING));

// Creating URLLoader to invoke Google service
var loader:URLLoader = new URLLoader;
loader.addEventListener(Event.COMPLETE, getComplete);
loader.load(request);

trace("request", request.url);

function getComplete(event:Event):void
{
    trace("data", URLLoader(event.currentTarget).data);
} 
```

# php - PHP 访问从一个孩子到另一个孩子的私有方法

> ID：12612383
> 
> 赞同：0
> 
> 时间：2012-09-27T00:27:28.890
> 
> 标签：php, oop, inheritance

```
class Master{
  protected static $DB;
  function __construct(){
    static::$DB = new DB();
    $view = new View();
  }
}

class DB extends Master{
  private function ReturnSomeData(){
    return $data;
  }
}

class View extends Master{
  public function ViewData(){
    $DBdata = static::$DB->ReturnSomeData();
  }
} 
```

致命错误：从上下文“视图”调用私有方法 DB::ReturnSomeData()

如何从 View 类访问 ReturnSomeData() 方法？有没有类似“网关”的东西？

```
class Master {
... }

class DB extends Master{
...
  public function PassItToMe(){
    return $this;
  }
}

class View extends Master{
  public function ViewData(){
    $DBdata = static::$DB->PassItToMe()->ReturnSomeData();
   }
} 
```

这是我现在的照片，但我真的迷路了。这个想法是我想从一个子类访问另一个子类的私有方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:04:31.837

你必须选择：

*   你想`ReturnSomeData()`保密吗？好吧，您将无法从外部类 [甚至子类] 访问它；
*   你想访问`ReturnSomeData()`？让它`public`。

这个想法是制作`private`[or `protected`]*字段*和公共*访问器以防万一，这是*[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)的要点之一。

# ruby-on-rails - Rails 缓存和 ActiveRecord 急切获取 - 仅在片段未缓存时获取

> ID：12612386
> 
> 赞同：2
> 
> 时间：2012-09-27T00:28:19.893
> 
> 标签：ruby-on-rails, caching, activerecord, eager-loading

我有一个控制器方法，目前看起来像：

```
@people = Person.where(conditions).includes(eager_fetch).all 
```

我现在正试图让控制器缓存感知。由于 Eager fetch 相当昂贵，因此我想避免加载尽可能多的数据。如果相关，则输出是来自 RPC 样式端点的 XML。我已经到达：

```
@people = Person.where(conditions).all
@fragments = {}
@people.dup.each do |person|
  cache_key = "fragment-for-#{person.id}-#{person.updated_at.to_i}"
  fragment = Rails.cache.fetch(cache_key)
  unless fragment.nil?
    @fragments[person.id] = fragment
    @people.delete person
  end
end
@people = Person.where(:id => @people.collect(&:id)).includes(eager_fetch).all 
```

还有另一种可能性，非常相似，只是不是在最后一行重新查询，

```
Person.send :preload_associations, @people, eager_fetch 
```

我是否缺少正确处理此问题的重要 API？目前在 Rails 3.0.12 上，但将升级到 3.2.x，所以只适用于 3.2.x 的解决方案就可以了。我的解决方案对我来说都不优雅。

*（我已经匿名化并简化了这段代码，如果我遗漏了任何重要的东西，我深表歉意）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:35:47.413

不要依赖 ActiveRecord 的急切加载。它将加载不在 ActiveRecord 每个请求查询缓存中的所有内容。

而是查询您的主要对象，然后使用您自己的狡猾方法来获取缓存的内容并查询较慢的数据存储以查找丢失的 ID。

# javascript - javascript：使用 getElementByID 填充多个 div

> ID：12612391
> 
> 赞同：0
> 
> 时间：2012-09-27T00:28:54.583
> 
> 标签：javascript, html, getelementbyid

有没有办法使用 javascript 在页面上的多个 div 或多个位置编写相同的东西客户端？

我有一个从数据库输出行的 php 脚本。要编辑内容，我想在每一行之前插入一个复选框，就像使用 iphone 编辑联系人一样，为了快速完成，我正在尝试使用 javascript 在每行之前使用 getElemenByID 填充一个带有复选框的 div。

一个问题是你不能在一个页面上拥有多个同名的 div，所以我不能写一次并让它填充多个同名的 div。如果我给 div 赋予不同的名称，那么我必须多次编写这并不吸引人，尤其是因为行数可能会有所不同。

作为一个相关的问题，使用javascript插入的复选框甚至可以工作吗？

这是非工作代码：

js

```
function edit() }
var box = '<input type="checkbox name=num[]>';
var target = "checkbox";
document.getElementById(target).innerHTML = box;
return;
}//end function 
```

html（由 PHP 从 dbase 生成）

```
<form action="edit.php" method="post">
<a href="javascript:void" onclick="edit()";>edit</a>
<div id="checkbox"></div>Row1 contents<br>
<div id="checkbox"></div>Row2 contents<br>
<form type = "submit" value="Edit">
</form> 
```

有谁知道这样做的方法，即使框出现，然后可以选择提交？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:42:17.807

## 应该使用 PHP 生成，但是...

## HTML

我猜你想为你的复选框占位符使用 span 元素（不是 div），否则你会在一行上有一个复选框，然后在复选框*下方*有“Row1 内容” ，而不是在旁边有复选框文本。

```
[X]
Row 1 Contents 
```

与（跨度）

```
[X] Row 1 Contents 
```

```
<form action="edit.php" method="post" name="frmRows" id="frmRows">
    <a href="javascript:void(0)" onclick="edit()">edit</a>
    <span class="checkbox"></span>Row1 contents<br>
    <span class="checkbox"></span>Row2 contents<br>
    <input type = "submit" value="Edit">
</form> 
```

## JavaScript

除非绝对必要，否则不建议在 JavaScript 中使用 .innerHTML（并非所有浏览器都支持，并且有更好的方法来完成相同的任务。）

```
function edit() {
    var newCb;
    var i;
    var checkboxList = document.getElementsByClassName( 'checkbox' );

    for ( i = 0; i < checkboxList.length; i++ ) {

        newCb = document.createElement( 'input' ); // Create a new input element

        newCb.setAttribute( 'type', 'checkbox' ); // Set attributes for new element
        newCb.setAttribute( 'value', 'SomeValueHere' );
        newCb.setAttribute( 'name', 'checkboxName' );
        newCb.setAttribute( 'id', 'checkbox-' + i );

        checkboxList[i].appendChild( newCB ); // Add checkbox to span.checkbox
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:59:07.320

# 的HTML

首先要做的是更新生成的 HTML。在 HTML 元素中`id`，属性应该是唯一的，就像表单中的字段名称一样。要将多个元素分类为相似，您应该使用该`class`属性。

这是一个如何构建 HTML 的示例。

```
<form action="edit.php" method="post">
<a href="javascript:void" onclick="edit">edit</a>
<div id="row1Identifier" class="editCheckbox"></div>Row1 contents</br>
<div id="row2Identifier" class="editCheckbox"><?div>Row2 contents</br>
<input type="submit" value="Submit">
</form> 
```

# javascript

使用`document.getElementsByClassName`将返回具有匹配类的元素列表。

```
​function edit () {
    // set up the variables used in this function
    var checkboxDivs = document.getElementsByClassName('editCheckbox'),
        i,
        loopDiv;
    // make the change to each div
    for (i = 0; i < checkboxDivs.length; i += 1) {
        loopDiv = checkboxDivs[i];
        loopDiv.innerHTML = '<input type="checkbox" name="' + loopDiv.id + '">';
    }
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:01:30.053

即使你可以用一行来完成（使用 jQuery，例如），你实际上会在所有 div 中运行一个循环（这是在各种元素中更改某些内容的唯一方法：在每个元素中更改它）。

因此，您可以使用纯 JavaScript 执行此操作，使用循环在所有 div 中运行修改，通过 id 获取它们（更快的方法）：

```
for(var i = 0; i < numberOfDivs; i++){
  document.getElementById("myElement" + i).innerHTML = box; //concatenating i to a base id
} 
```

您还可以使用另一种较慢的技术通过标签名称或类获取元素，甚至使用 jQuery 等库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T00:47:43.777

ID 属性在每个页面上必须是唯一的。您可以像这样使用类属性：

```
<div class="checkbox"></div>Row1 contents<br>
<div class="checkbox"></div>Row2 contents<br> 
```

然后你可以使用

```
var check = getElementsByClassName('checkbox');
for (var i=0; i< check.length; i++) {
    check[i].innerHTML = box;
} 
```

但是...这[在 IE < 9 中不起作用](http://caniuse.com/getelementsbyclassname)。如果您使用像 jQuery 这样的框架，他们已经为此实现了解决方法，但是对于纯 JS，您必须自己实现。

**jQuery 示例**

HTML

```
<div class="checkbox"></div>Row1 contents<br>
<div class="checkbox"></div>Row2 contents<br> 
```

JS

```
var box = '<input type="checkbox" name="num[]" />';
$(".checkbox").html(box); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T00:46:00.907

如果你使用 jquery：

```
function edit() {
// box = '<input type="checkbox name=num[]>'; 
var target = "checkbox"; 
$(".cb").html(box);
return; 
}//end function 

<form action="edit.php" method="post"> 
<a href="#" onclick="edit();"> edit</a> 
<div class="cb" id="checkbox">aa</div>Row1 contents<br> 
<div class="cb" id="checkbox">bb</div>Row2 contents<br> 
</form> 
```

# php - 如何更改 codeigniter 中显示的错误

> ID：12612392
> 
> 赞同：2
> 
> 时间：2012-09-27T00:28:54.863
> 
> 标签：php, codeigniter

`The URI you submitted has disallowed characters.`

如何拦截此错误？它们是`callback_`函数吗？当我尝试在 URL 中使用 = 时会发生此错误。例如我把 1=1 - 我得到这个错误。而不是我想要的错误页面`redirect('main/cate/page');`

如何捕获此错误并重定向而不是显示“遇到错误页面”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T00:42:44.657

看起来错误正在被抛出`system/core/URI.php`。幸运的是，您可以[扩展核心类](http://codeigniter.com/user_guide/general/core_classes.html)。`application/core`在调用中创建一个文件`MY_URI.php`并覆盖该函数：

```
class MY_URI extends CI_URI{
    function __construct(){
        parent::__construct();
    }
    function _filter_uri($str){
        if ($str != '' && $this->config->item('permitted_uri_chars') != '' && $this->config->item('enable_query_strings') == FALSE)
        {
            // preg_quote() in PHP 5.3 escapes -, so the str_replace() and addition of - to preg_quote() is to maintain backwards
            // compatibility as many are unaware of how characters in the permitted_uri_chars will be parsed as a regex pattern
            if ( ! preg_match("|^[".str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-'))."]+$|i", $str))
            {
                redirect('main/cate/page');
            }
        }

        // Convert programatic characters to entities
        $bad    = array('$',        '(',        ')',        '%28',      '%29');
        $good   = array('&#36;',    '&#40;',    '&#41;',    '&#40;',    '&#41;');

        return str_replace($bad, $good, $str);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:50:15.207

您需要扩展 CI_Exceptions 文件。该论坛帖子提供了有关异常和错误处理的大量信息。

[http://codeigniter.com/forums/viewthread/67096/](http://codeigniter.com/forums/viewthread/67096/)

与此覆盖类似的东西应该允许您根据错误代码进行重定向：

```
<?php  if (!defined('BASEPATH')) exit('No direct script access allowed');
class OOR_Exceptions extends CI_Exceptions
{
    public function show_error($heading, $message, $template = '', $status_code = 500)
    {
        $ci =& get_instance();
        if (!$page = $ci->uri->uri_string()) {
            $page = 'home';
        }
        switch($status_code) {
            case 403: $heading = 'Access Forbidden'; break;
            case 404: $heading = 'Page Not Found'; break;
            case 503: $heading = 'Undergoing Maintenance'; break;
        }
        log_message('error', $status_code . ' ' . $heading . ' --> '. $page);
        if ($status_code == 404) 
        {
            redirect('/mypage');
        }
        return parent::show_error($heading, $message, 'error_general', $status_code);
    }
} 
```

注意：这涵盖了基本问题 - “如何更改 codeigniter 中显示的错误”。对于这个特定的错误，可能有更具体的覆盖。

# python - 无效的命令名称“tk”

> ID：12612398
> 
> 赞同：0
> 
> 时间：2012-09-27T00:29:32.620
> 
> 标签：python, mercurial, tcl, tk

我尝试从 HgkExtension 运行命令“hg view”并收到错误“无效的命令名称“tk”。我想知道我的系统（运行 Fedora Linux）中缺少什么软件包。谢谢！

有人可以告诉我这个命令来自哪个 rpm 包吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:32:23.523

我认为您缺少[Tcl/Tk](http://en.wikipedia.org/wiki/Tcl)。另请参阅[Sourceforge.net](http://tcl.sourceforge.net/)

这是一个[与fedora相关的公告](http://osdir.com/ml/fedora-announce/2011-11/msg00893.html)，也许这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:51:42.737

```
sudo yum install tkinter 
```

应该安装 tkinter、tix 和 tk

# php - php yii 使用 CFileHelper::getMimeType 错误的 mime 类型

> ID：12612399
> 
> 赞同：0
> 
> 时间：2012-09-27T00:29:41.787
> 
> 标签：php, yii, xampp, mime-types

想检查我上传的图片是否有正确的 mime 类型：

```
 $user->image = CUploadedFile::getInstance($user, 'image'); 
```

在我的验证中，我检查了 mime 类型：

```
print_r(CFileHelper::getMimeType($this->image)); 
```

好吧，我上传了一个 pdf，mime 类型是 application/pdf。我将 pdf 重命名为 test.jpg，mime 类型现在是 image/jpg，这是一个问题。我只想接受图像。

我使用最新版本：yii-1.1.12.b600af；XAMPP Windows 1.8.0；PHP 版本 5.4.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:41:20.607

因为 Yii 默认根据扩展名定义 mime 类型。

[你可以看到代码](https://github.com/yiisoft/yii/blob/1.1.12/framework/utils/CFileHelper.php#L222)

```
public static function getMimeType($file,$magicFile=null,$checkExtension=true){//code} 
```

如你所见`$checkExtension=true`。

你可以这样尝试：

```
print_r(CFileHelper::getMimeType($this->image, null, false)); 
```

所以它不会通过扩展来决定。

出于验证目的：

```
class Item extends CActiveRecord
{
    public $image;

    public function rules()
    {
        return array(
            array('image', 'file', 'mimeTypes'=>'image/gif, image/jpeg'),
        );
    }
} 
```

始终使用现有的东西，不要尝试重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:13:47.440

PHP 提供了 finfo_open()，它实际上试图从文件内容中提取 mimetype。像这样使用：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension
$mediaFile->filemime = finfo_file($finfo, $fileName); 
    /* close connection */
finfo_close($finfo); 
```

在这里阅读更多：http: [//php.net/manual/en/function.finfo-open.php](http://php.net/manual/en/function.finfo-open.php)

以我有限的经验， finfo_open() 效果很好。

# java - 用Java构建动态网站

> ID：12612404
> 
> 赞同：0
> 
> 时间：2012-09-27T00:30:41.783
> 
> 标签：java, mysql, eclipse, tomcat

我是java开发新手！面临一些问题，有点困惑。我的目的是使用struts部署一个网站... Eclipse Mysql Tomcat 情况是我已经安装了jdk-7u7-windows-i586和eclipse-java-juno-win32但是我不能做web编程，现在我需要从下面的链接安装任何 jdk ee 版本？？ [http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-downloads-439814.html](http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-downloads-439814.html)（或） [http://www.oracle.com/technetwork/java/javaee/下载/java-ee-sdk-6u3-jdk-7u1-downloads-523391.html](http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-jdk-7u1-downloads-523391.html)

日食呢？？我需要为 Java EE 开发人员下载 Eclipse IDE 吗？

另外我应该安装哪个版本的tomcat服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:34:45.257

您可以将 Eclipse 与应用程序服务器、glass fish 和 java EE 捆绑在一起。对于应用程序开发，Glassfish 将做所有 tomcat 会做的事情，并且支持 EJB。

[http://dlc.sun.com.edgesuite.net/glassfish/eclipse/](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/)

但老实说，您可能需要从一些关于使用 Java EE 进行应用程序开发的基本教程开始。Struts 不是一个初学者概念，如果您从未玩过服务器端 java，那么它不会很直观。

# java - 线性方程java

> ID：12612407
> 
> 赞同：6
> 
> 时间：2012-09-27T00:31:11.323
> 
> 标签：java, linear-equation

我正在尝试将下面的等式转换为编程代码。目的是找到两条线的交点。并提示

(y1 - y2)x - (x1 - x2)y = (y1 - y2)x1 - (x1 - x2)y1

(y3 - y4)x - (x3 - x4)y = (y3 - y4)x3 - (x3 - x4)y3

我被告知要使用 cramers 规则，但 cramers 规则有 6 个差异变量。我将从 4 个不同的点作为 8 个变量（x1、y1、x2、y2、x3、y3、x4、y4）开始

我正在使用 Java。任何帮助，将不胜感激。这个网站上的所有问题都是针对不同类型的线性方程，代码很复杂，我没有找到任何与我相关的东西。

这就是我所拥有的，不多，但从上面的方程到可编程的东西的转变真的让我很难过。

```
import java.util.Scanner;
public class E325 {
    public static void main(String[] args) {
    /* 
     * The purpose of this program is to find the intersect
     * of two lines given by the user by four points
     * 
     * Get the four points. x1,y1 x2,y2 x3,y3 x4,y4
     */
    Scanner input = new Scanner(System.in);
    System.out.print("Enter x1 y1, x2 y2, x3 y3, x4 y4: ");
    double x1 = input.nextDouble();
    double y1 = input.nextDouble();
    double x2 = input.nextDouble();
    double y2 = input.nextDouble();
    double x3 = input.nextDouble();
    double y3 = input.nextDouble();
    double x4 = input.nextDouble();
    double y4 = input.nextDouble();

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:02:22.280

我不知道矩阵，所以我会以不同的方式解决它。

您知道足以计算每行的 m 和 b

m = (y2-y1)/(x2-x1)

b = y1 - m(x1)

计算一条线的 m 和 b，计算另一条线的 m' 和 b'。

现在在交叉点处，两条线上的 x,y 相同，因此 y = mx + b 和 y = m'x + b'。所以

mx + b = m'x + b'

x = (m'x + b' - b)/m

将 x 代入 mx + b 以获得该 x 的 y。

您仍然必须确保您找到的 x,y 在您的行 SEGMENTS 上；除非这些线是平行的，否则它们会在某个地方相交，但不一定在您开始的线段的端点之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:11:47.760

> (y1 - y2)x - (x1 - x2)y = (y1 - y2)x1 - (x1 - x2)y1
> (y3 - y4)x - (x3 - x4)y = (y3 - y4)x3 - (x3 - x4)y3
> 
> 我被告知要使用 cramers 规则，但 cramers 规则有 6 个差异变量。

不，那是完全错误的。Cramer 规则是一种求解 Ax = b 形式方程的简单技术，但其中 A 是 NxN 矩阵，x 和 b 是 N 个向量。您需要做的是将这两个方程表示为矩阵表达式。我会给你与上面对应的左侧。我将把右边和克莱默规则的应用留给你。

```
 A            *   x    = b

⌈ y1-y2   -(x1-x2) ⌉   ⌈ x ⌉
|                  | * |   |
⌊ y3-y4   -(x3-x4) ⌋   ⌊ y ⌋ 
```

将该矩阵 A 与向量 [x,y] 相乘得到

```
⌈ y1-y2   -(x1-x2) ⌉   ⌈ x ⌉   ⌈ (y1-y2)*x - (x1-x2)*y ⌉
|                  | * |   | = |                       |
⌊ y3-y4   -(x3-x4) ⌋   ⌊ y ⌋   ⌊ (y3-y4)*x - (x3-x4)*y ⌋ 
```

请注意，此结果与您的方程式对的左侧完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:57:46.040

一条线经过两点。

你有四个点和两条线。

众所周知，直线方程：

```
y = m*x + b 
```

其中`m`是斜率，`b`是 y 截距。

如果你有两行，它们看起来像这样：

```
-m1*x + y = b1
-m2*x + y = b2 
```

你可以看到矩阵方程，不是吗？

```
[ -m1    1 ]{x} = {b1} 
[ -m2    1 ]{y}   {b2} 
```

将其反转以求解两条线相交的 (x, y)。如果您不能反转矩阵，则意味着它们不相交。

克莱默法则？当然，写一个 2x2 的案例很容易。LU 分解会更一般。

# go - go Programming POST FormValue 无法打印

> ID：12612409
> 
> 赞同：5
> 
> 时间：2012-09-27T00:31:18.940
> 
> 标签：go

在我有点背景之前，我对编程语言还是很陌生。我在 Win 7 上运行 go，Windows 的最新 go 包安装程序。我不擅长编码，但我确实喜欢学习一门新语言的挑战。我想开始学习 Erlang，但根据 youtube 上的 GO I/O 视频发现 go 非常有趣。

我在 GO 中捕获 POST 表单值时遇到问题。我昨天花了三个小时在浏览器中打印一个 POST 表单值，结果惨遭失败。我不知道我做错了什么，谁能指出我正确的方向？我可以用 C#、PHP、VB、ASP、Rails 等其他语言轻松地做到这一点。我已经搜索了整个互联网，但没有找到工作示例。下面是我的示例代码。

**这是 Index.html 页面**

```
{{ define "title" }}Homepage{{ end }}

{{ define "content" }}
    <h1>My Homepage</h1>

    <p>Hello, and welcome to my homepage!</p>
    <form method="POST" action="/">
    <p> Enter your name : <input type="text" name="username"> </P>
    <p> <button>Go</button>
    </form>
    <br /><br />

{{ end }} 
```

**这是基本页面**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{{ template "title" . }}</title>
    </head>
    <body>
        <section id="contents">
            {{ template "content" . }}
        </section>
        <footer id="footer">
            My homepage 2012 copy
        </footer>
    </body>
</html> 
```

**现在一些代码**

```
 package main

import (
    "fmt"
    "http"
    "strings"
    "html/template"

)

var index = template.Must(template.ParseFiles(
  "templates/_base.html",
  "templates/index.html",
))

func GeneralHandler(w http.ResponseWriter, r *http.Request) {
    index.Execute(w, nil)
     if r.Method == "POST" {
        a := r.FormValue("username")
        fmt.Fprintf(w, "hi %s!",a); //<-- this variable does not rendered in the browser!!!

    }
}

func helloHandler(w http.ResponseWriter, r *http.Request) {
    remPartOfURL := r.URL.Path[len("/hello/"):] 
    fmt.Fprintf(w, "Hello %s!", remPartOfURL)
}

func main() {
    http.HandleFunc("/", GeneralHandler)
    http.HandleFunc("/hello/", helloHandler)
    http.ListenAndServe("localhost:81", nil)
} 
```

谢谢！

PS：在stackoverflow的每一行代码之前添加四个空格非常繁琐，尤其是在复制粘贴时。没有发现它非常用户友好或有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:11:12.127

在从请求中读取值之前写入 ResponseWriter（通过调用 Execute）会将其清除。

如果您使用此请求处理程序，您可以看到这一点：

```
func GeneralHandler(w http.ResponseWriter, r *http.Request) {
   fmt.Println(r.Method)
   fmt.Println(r.URL)
   fmt.Println("before",r.FormValue("username"))
   index.Execute(w, nil)
   if r.Method == "POST" {
     fmt.Println("after",r.FormValue("username"))
   } 
 } 
```

这将在之前和之后打印出来。但是，在这种情况下：

```
func GeneralHandler(w http.ResponseWriter, r *http.Request) {
  fmt.Println(r.Method)
  fmt.Println(r.URL)
  index.Execute(w, nil)
  if r.Method == "POST" {
    fmt.Println("after",r.FormValue("username"))
  }
} 
```

后面的值将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:36:27.447

根据 html/template 的文档，Execute 的第二个参数应该是您要放入模板的数据。

在模板中的某处添加 {{.}}，然后将要打印的字符串作为第二个参数传递。它应该作为模板的一部分呈现。

# c# - 在 C# 中连接变量值

> ID：12612410
> 
> 赞同：3
> 
> 时间：2012-09-27T00:31:23.370
> 
> 标签：c#

如何将标签名称中的变量内容与其他变量连接起来？

```
//labels: lbl_01_temp, lbl_02_temp, lbl_03_temp
string XX;
double id_01_temp, id_02_temp, id_03_temp;
lbl_XX_temp.Text= "The Device " +XX+ "has" +id_XX_temp+" ℃"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T00:33:23.233

~~连接值的干净方法是使用`String.Format`~~

 ~~```
lbl_XX_temp.Text= String.Format("The Device {0} has {1} ℃", XX, id_XX_temp); 
```~~ 

**[请参阅 MSDN 文档：String.Format()](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)**

~~也许，我误解了这个问题。我认为 OP 想要将 a`string`转换为有效的`control`权利？~~

 ~~网站：

```
string lblSelected = String.Format("lbl_{0}_temp", XX); 
Label lbl = (Label)this.FindControl(lblSelected);
lbl.Text = String.Format("The Device {0} has {1} ℃", XX, id_XX_temp); 
```

赢表格：

```
string lblSelected = String.Format("lbl_{0}_temp", XX);
Control[] ctrl = this.Controls.Find(lblSelected, true);
Label lbl = ctrl[0] as Label;
lbl.Text = String.Format("The Device {0} has {1} ℃", XX, id_XX_temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:37:17.937

`String.Format`实际上，它的性能不如您提出的问题那样的直字符串连接。这可能是滴答声和纳秒的问题，但涉及的开销`String.Format`不仅仅是说 a + b + c 进行字符串连接。

就个人而言，`String.Format`对我来说看起来更干净，但它并不快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:52:55.507

我会使用一对数组或字典（将它们设置为读者的众所周知的练习）：

```
labels[index].Text = "Device " + (index + 1) + " has temperature "
    + temperatures[index].ToString(formatString) + " ℃"; 
```

编辑

从您评论中的代码来看，您似乎想按名称识别标签，并且您将从整数变量中派生名称，如下所示：

```
for (int i=1; i<=6; i++)
{
    Label label = GetLabelForIndex(i);
    //do something with the label here
} 
```

所以问题是，*你*将如何获得给定索引的标签？换句话说， 的实现是`GetLabelForIndex(int)`什么？这个问题的答案取决于`Label`我们在谈论什么。它来自哪个图书馆？是WinForms吗？银光？WPF？如果是 WinForms，请参阅[Get a Windows Forms control by name in C#](https://stackoverflow.com/q/1536739/385844)。如果是 WPF 或 Silverlight，请参阅[按 Name 查找 WPF 控件](https://stackoverflow.com/q/12238599/385844)。这里接受的答案还建议使用带有字符串键的字典，这与我上面的建议类似。

除非您每秒执行数千次，否则使用字典的性能优势可能微不足道，在这种情况下您应该直接使用`Find`or `FindName`。~~

# php - ZF2：仅为 Ajax 调用返回 JSON

> ID：12612414
> 
> 赞同：4
> 
> 时间：2012-09-27T00:32:32.153
> 
> 标签：php, zend-framework2

我正在努力学习ZF2。我有一个使用 Ajax 获取一些数据的页面。ZF2 函数应返回 JSON 字符串。

```
<?php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\View\Model\JsonModel;

class DocumentsController extends AbstractActionController {

    public function indexAction() {

    }

    public function getTreeDataAction() {
        $json = new JsonModel(array(
                    'title' => 'Some Title'
                ));
        return $json;
    }

} 
```

但我不断收到这个致命错误：

```
( ! ) Fatal error: Uncaught exception 'Zend\View\Exception\RuntimeException' with message 'Zend\View\Renderer\PhpRenderer::render: Unable to render template "application/documents/get-tree-data"; resolver could not resolve to a file' in ../vendor/ZF2/library/Zend/View/Renderer/PhpRenderer.php on line 451 
```

我一直在寻找这个错误以及在 ZF2 中进行 ajax 调用的最佳方法，但是 ZF1 或 ZF2 测试版的结果不断出现并且不起作用。感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T05:06:35.453

嗯，这个错误几乎意味着它试图访问默认的渲染策略，这很奇怪......你有没有将 JsonStrategy 添加到你的 view_manager 中？

```
//module.config.php
return array(
    'view_manager' => array(
        'strategies' => array(
           'ViewJsonStrategy',
        ),
    ),
) 
```

此外，在您的 ajax 调用中设置正确的接受标头以仅接受`application/json`内容类型是一个好主意。有了这一套，它应该真的可以工作了。出于好奇，确实`modules/__NAMESPACE__/view/__namespace__/documents/get-tree-data.phtml`存在吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:51:23.410

尝试这样的事情......

```
$response = $this->getResponse();
$response->setStatusCode(200);

$jsonArray = {.....}
$response->setBody($jsonArray);

return $response; 
```

并确保您也将 ViewJsonStrategy 添加到您的模块配置中。

# android - 如何使异步任务正常工作

> ID：12612416
> 
> 赞同：2
> 
> 时间：2012-09-27T00:32:46.427
> 
> 标签：android

我的应用程序上有一个按钮，如果用户点击它，它将通过调用onResume()刷新当前页面，并且onResume()中有很多数据库操作。我不想让按钮按住一段时间，我想在加载数据时使用 asynctask 来制作一个进度对话框。但问题是按钮仍将处于按下状态，并且进度对话框仅在操作结束时显示很短的持续时间。

```
RefreshButton.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                onResume();
            }
        });

protected void onResume()
    {
        doneloading = false;
        monResumeloading = new onResumeloading();
        monResumeloading.execute();
        ....loading...

            doneloading = true;
    }

private class onResumeloading extends AsyncTask<Integer, Integer, String>
    {
        private ProgressDialog progressDialog;
        @Override
        protected void onPostExecute(String result)
        {
            progressDialog.dismiss();
        }

        @Override
        protected void onPreExecute()
        {
            progressDialog = new ProgressDialog(StatisticsActivity.this);
            progressDialog.setMessage("Loading...");
            progressDialog.setCancelable(true);
            progressDialog.show();

            Log.i(TAG, "              doneloading=false");
        }

        @Override
        protected void onProgressUpdate(Integer... values)
        {

        }

        @Override
        protected String doInBackground(Integer... params)
        {
            while(!doneloading)
            {
                publishProgress(0);   //dummy
                            log.i(TAG, "loading");
            }
            return null;
        }

    } 
```

我观察到“加载”日志在 asynctask 执行后立即显示，并在布尔值 doneloading 变为 false 后立即停止。但是进度对话框无法正常工作。请帮我 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:45:02.057

首先，我认为您不应该在 onResume() 函数中调用您的 AsyncTask。您可以简单地从 ClickListener 中调用它。

现在，在执行 AsyncTask 之前，您正在执行“....加载...”代码。这就是为什么按钮在执行“....加载...”时保持按下状态，然后当它完成时，它会执行你的 AsyncTask ，这实际上没有做任何事情 - 这就是为什么它只会出现很短的时间。

将您的“....加载...”代码移动到您的 AsyncTask 的 doInBackground() 中，它应该可以正常工作。

概括：

1.  点击：执行异步任务
2.  AsyncTask：打开 ProgressDialog
3.  AsyncTask：执行您的“...加载...”代码
4.  AsyncTask：等待“...加载...”代码完成，同时仍显示对话框。
5.  AsyncTask：关闭 ProgressDialog

# windows - 如何在 Windows 上使用 GUI 添加或删除 git 标签？

> ID：12612425
> 
> 赞同：3
> 
> 时间：2012-09-27T00:34:07.860
> 
> 标签：windows, git, git-gui, git-tag

> **可能重复：**
> [如何在 git gui 中使用标签进行版本控制](https://stackoverflow.com/questions/6158598/how-to-use-tags-for-versioning-in-git-gui)

我安装了 Git-1.7.11-preview20120710，我的操作系统是 Windows。

从命令行添加或删除 git 标签很容易：

添加标签：

```
git tag -a v1.4 -m 'my version 1.4' 
```

删除标签：

```
git tag -d v1.4 
```

但是如何使用 GUI 添加或删除标签？

注意：除了 Git-1.7.11-preview20120710，我不安装任何东西。Git-1.7.11-preview20120710 有内置的 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:00:39.850

也许还有其他方法，但是这样做的一种方法是转到存储库>查看日志/历史...

在日志窗口中，您可以右键单击任何提交，然后您必须选择创建和删除标签以及许多其他选项。

我建议你看看[https://tortoisegit.org/](https://tortoisegit.org/)。它是 Windows 上 git 的最佳 gui 客户端（虽然我不得不提到[GitHub For Windows](http://windows.github.com/)，这看起来很棒，但我还没有任何经验）并且在存储库的上下文菜单中具有许多功能（对 -单击存储库文件夹）。它也有许多翻译，所以如果您的母语不是英语，您可以安装您喜欢的语言包。

# ruby - 使用 SASS gem 将 SASS 转换为 CSS

> ID：12612430
> 
> 赞同：0
> 
> 时间：2012-09-27T00:34:46.567
> 
> 标签：ruby, sass

我正在尝试从 SASS 文件创建一个 CSS 文件。

起初我试图这样做。

```
sass_filename = "#{Rails.root}/app/assets/stylesheets/application.sass"
css = Sass::Engine.for_file(sass_filename).render
File.open("#{render_path}/stylesheets/application.css", "wb") {|f| f.write(css) } 
```

我出错`wrong number of arguments (1 for 2)`了，`Sass::Engine.for_file()`因为[我没有为 options field 放任何东西](http://sass-lang.com/docs/yardoc/Sass/Engine.html#for_file-class_method)。

我不确定如何设置选项字段。

我试过

`css = Sass::Engine.for_file(sass_filename, :syntax => :sass).render`

但我得到`undefined method`[]' 的 nil:NilClass` 错误。

如何设置将 SASS 转换为 CSS 的默认选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:48:08.730

如果您没有传递任何选项，请尝试对选项使用空哈希，例如“{}”：

```
sass_filename = "#{Rails.root}/app/assets/stylesheets/application.sass"
css = Sass::Engine.for_file(sass_filename, {}).render
File.open("#{render_path}/stylesheets/application.css", "wb") {|f| f.write(css) } 
```

# javascript - Jquery width $(el).width() 似乎在这里失败了

> ID：12612439
> 
> 赞同：2
> 
> 时间：2012-09-27T00:35:53.150
> 
> 标签：javascript, jquery, html, css, dom

[http://jsfiddle.net/3BFGU/27/](http://jsfiddle.net/3BFGU/27/)

有谁知道为什么包含文本“ABC”的跨度宽度返回 0。

1) 仅在 Firefox 中发生。2）如果我删除两者之间的跨度，它可以正常工作。(http://jsfiddle.net/3BFGU/30/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:49:03.773

不知道为什么 - 这可能是一个错误；然而， ...

Span 默认情况下不应该有任何宽度属性，当然它们最终会在浏览器呈现它之后进行。您可以做的是使它们成为块状元素，这应该可以解决它：

```
span { display:inline-block; } 
```

* * *

### 编辑：

其他有趣的事情是，如果您删除 ABC 跨度和它的包装器之间的所有空白，它将正常工作。这可能与空白和包装有关。浏览器可能无法提供宽度，因为容器可能从一条线开始并在另一条线结束。这可能解释了为什么将其设置为块可以修复它，因为将容器设置为块可能会使整个容器保持在一起。

# delphi - 在 TTabSheet 中将 Tframe 居中；

> ID：12612442
> 
> 赞同：1
> 
> 时间：2012-09-27T00:37:16.160
> 
> 标签：delphi, tframe

我有一个使用`PageControl`带有多个`TabSheets`. 我还在`TabSheets`运行时创建新的并用预定义帧的实例填充它们。这些框架效果很好，除了不集中在`TabSheet`. 我曾尝试使用`Frame.Align := alClient`，但没有这样做。相关代码如下：

```
CreateNewPage(3);
NewLimitedChoiceFrame := TLimitedChoiceFrame.Create(NewInputPage);
NewLimitedChoiceFrame.Parent := NewInputPage; 
```

`CreateNewPage`创建 a 的新实例`TabSheet`并使其成为`PageControl`它的所有者和父级。结果被分配给全局变量`NewInputPage`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:24:54.640

要在其父控件中居中，请执行以下操作：

```
procedure CentreControl(Control: TControl);
begin
  Control.Left := (Control.Parent.ClientWidth-Control.Width) div 2;
  Control.Top := (Control.Parent.ClientHeight-Control.Height) div 2;
end; 
```

调用此函数，传递帧。显然，您需要等到分配了父级后再这样做。

如果页面控件可以在运行时调整大小，请从选项卡的 OnResize 事件中添加对此函数的调用。或者，正如[NGLN 指出的那样，](https://stackoverflow.com/questions/12614453/anchors-akcenter)只需将控件设置`Anchors`为`[]`，VCL 框架就会在调整其父控件的大小时注意使控件居中。

# html - HTML 图像链接在 iOS 上不起作用

> ID：12612444
> 
> 赞同：2
> 
> 时间：2012-09-27T00:37:31.840
> 
> 标签：html, ios, image, hyperlink, touchscreen

我有一些“a href”图像链接并悬停在网站上进行导航（[www.byrdnick.com](http://www.byrdnick.com)，在该网站的非移动版本中）。这些图片链接似乎让 iOS 浏览器感到困惑。当您点击一次图像链接时，它会变为悬停图像。当您点击悬停图像时，没有任何反应。当您再次点击悬停图像时，您最终会被重定向到该链接。

有什么方法可以使这些图像链接起作用，还是我必须尝试一种全新的方法，例如地图之类的？

提前感谢所有帮助像我这样的人的大师！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:41:39.123

只要它与我在下面的内容类似，并且您没有任何奇怪的冲突类，您应该没问题。

```
<a href="some link"><img src="some image" /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:44:02.897

`psd2css.js`这是因为您的javascript 为调整您的 div 和链接所做的所有奇怪的事情。

我从来没有使用过这个工具，但是您的网页似乎是使用名为 psd2cssonline 的工具生成的？该工具似乎在幕后为您的所有`<a href>`链接添加了一些晦涩的处理方法。这在文件中很容易看到`psd2css.js`，一旦加载了文档，脚本就会为您的所有`<img>` `hover`功能添加一些魔力。

我没有研究这个工具添加的整个 javascript，但我很确定这是问题的原因。该工具似乎与触摸屏设备不兼容，或者在“悬停”毫无意义的移动环境中以某种方式混淆了触摸事件（您不能在触摸屏上“悬停”项目！），并且可能需要更新才能管理它生成的网站的移动版本。

同时，当您在移动设备上访问您的网站时，您可以尝试禁用此脚本（以及此工具可能生成的所有其他内容以自动将行为添加到您的链接），以避免在这种情况下弄乱“悬停”事件，并且简单地保持没有任何类似脚本的标准行为。

# android - Android -> 在主要活动中加载共享首选项

> ID：12612445
> 
> 赞同：1
> 
> 时间：2012-09-27T00:37:44.537
> 
> 标签：android, sharedpreferences

我创建了共享偏好活动，并保存了 2 个字符串...

```
 public class sharedprefs extends Activity {

    EditText email;
    EditText lozinka;
    Button btnEmail;
    Button btnLozinka;
    Button btnPovratak;
    TextView email2; 
    TextView lozinka2;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sharedpref);

        email2 = (TextView)findViewById(R.id.textView4);
        lozinka2 = (TextView)findViewById(R.id.textView5);

        email = (EditText)findViewById(R.id.editText1);
        lozinka = (EditText)findViewById(R.id.editText2);

        btnEmail = (Button) findViewById(R.id.button1);
        btnLozinka = (Button) findViewById(R.id.button2);
        btnPovratak = (Button) findViewById(R.id.button3);

        LoadPreferences();

        btnEmail.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {   

                SavePreferences("EMAIL", email.getText().toString());
                LoadPreferences();  

            }
        });

        btnLozinka.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {   

                SavePreferences("LOZINKA", lozinka.getText().toString());
                LoadPreferences();

            }
        });

        btnPovratak.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {   

                finish();

            }
        });
    }

    private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
       }

       private void LoadPreferences(){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        String stremail = sharedPreferences.getString("EMAIL", "");
        String strlozinka = sharedPreferences.getString("LOZINKA", "");
        email2.setText(stremail);
        lozinka2.setText(strlozinka);
       }

} 
```

我对其进行了测试并使用 textview 显示它们......当我退出并重新进入我的应用程序时，它们仍然显示。现在我需要这两个字符串在我的主要活动中与 httpClient 一起使用。问题是，我不知道如何将它们加载到我的主要活动中，我需要做什么（在主要活动中声明）才能使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:02:28.710

查看[Android 开发者文档](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)中关于跨多个活动处理 SharedPreferences 的说明。这也[包含在另一个答案](https://stackoverflow.com/a/2614771/663469)中。

访问 SharedPreferences 的推荐方法是：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context); 
```

所以在你的情况下，你可以把它写成：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this); 
```

这将在 PreferenceActivity 和您的正常主 Activity 中起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T00:44:49.867

您需要调用相同的方法 LoadPreferences() 您需要在您的 Main Activity （或您想要此 SharedPreference 的任何其他活动中进行编码）。

```
private void LoadPreferences()
{
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        String stremail = sharedPreferences.getString("EMAIL", "");
        String strlozinka = sharedPreferences.getString("LOZINKA", "");
        // Strings variable are ready with the values, you can assign them to other component if you want
} 
```

# python - 芹菜与 djcelery

> ID：12612450
> 
> 赞同：9
> 
> 时间：2012-09-27T00:38:19.217
> 
> 标签：python, django, celery, djcelery

在尝试在我的 django 项目上设置 celery 时，我对这两个应用程序之间的差异感到困惑。

如果有的话，两者有什么区别？在线阅读教程时，我看到它们都在使用，我不确定哪个最适合我。似乎 djcelery 有点像 celery 但为 django 量身定制？但是 celery 不需要包含在安装的应用程序中，而 djcelery 则需要。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-07-16T13:21:23.293

Django-celery 是一个为 django 提供 Celery 集成的项目，但不再需要它。

您不必再安装 django-celery。由于 3.1 版 django 支持开箱即用。

因此，要安装 celery，您可以使用 pip：

```
pip install -U Celery 
```

这是[Celery First Steps with Django 教程中的注释](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#using-celery-with-django)

> 笔记：
> 
> 以前版本的 Celery 需要一个单独的库来与 Django 一起工作，但从 3.1 开始不再是这种情况。现在支持开箱即用的 Django，因此本文档仅包含集成 Celery 和 Django 的基本方法。您将使用与非 Django 用户相同的 API，因此建议您先阅读 Celery 的第一步教程，然后再返回本教程。当您有一个工作示例时，您可以继续阅读后续步骤指南。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T00:55:20.363

使用 Django 时，您应该`django-celery`从 PyPI 安装。Celery 将作为依赖项安装。

Djcelery 将您的 django 项目与 Celery 挂钩，Celery 是一种更通用的工具，可用于各种应用程序堆栈。

[这](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#configuring-your-django-project-to-use-celery)是 Celery 的 Django 入门指南，它描述了安装 django-celery 和设置你的第一个任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-28T11:11:44.020

以前版本的 Celery 需要一个单独的库来与 Django 一起工作，但从 3.1 开始不再是这种情况。现在支持开箱即用的 Django，因此本文档仅包含集成 Celery 和 Django 的基本方法。您将使用与非 Django 用户相同的 API：[https ://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#configuring-your-django-project-to-use -芹菜](https://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#configuring-your-django-project-to-use-celery)

# c# - C# 和 .NET：Buffer.BlockCopy 对结构来说是线程安全的吗？

> ID：12612452
> 
> 赞同：0
> 
> 时间：2012-09-27T00:38:58.530
> 
> 标签：c#, .net, multithreading

基本上问题就在标题中。如果我有一个结构数组，那么 Buffer.BlockCopy 在多线程环境中会正常运行吗？换句话说，如果在 Buffer.BlockCopy 执行期间某个线程试图更新其中一个存储结构上的字段会发生什么？[http://msdn.microsoft.com/en-us/library/teyhh36d.aspx](http://msdn.microsoft.com/en-us/library/teyhh36d.aspx)文档说 Buffer 的静态方法（BlockCopy 是静态的）保证对于简单类型是线程安全的。但是如果我的结构只包含简单的类型，这个保证能不能对我有利一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:24:40.667

`Buffer.BlockCopy`它本身不是原子操作。没有什么可以阻止任何其他线程在`BlockCopy`执行时修改数组本身的数组中项的字段。

# java - 在 JSP 页面上覆盖页面标题的任何解决方案

> ID：12612455
> 
> 赞同：0
> 
> 时间：2012-09-27T00:39:38.933
> 
> 标签：java, html, eclipse, jsp, jstl

```
<jsp:include page="categories/sub-category/${param.ID}.jsp" flush="true" /> 
```

最简单的说法是找到“子类别”（即 paramID 调用）下的 jsp 的任何方式，以使每个 jsp 都有自己*唯一的*页面标题。无论是jstl，java还是你有什么，我不确定......所以唯一的要求是1）它有效2）SEO友好

我知道这种方式：

```
<script>
    document.title = "My Title";
</script> 
```

使用脚本，但这对 SEO 不利（这也是造成这种情况的主要原因是 Disqus 的“相关讨论”将以独特的页面标题显示）。

我也见过这种方式：

```
<head><title><%= param.name %></title></head> 
```

但这给我留下了“参数无法解析为变量”错误。也许我做错了什么？感谢您的任何建设性帮助。如果您需要更多信息，请告诉我...

这是它在地址栏中的外观...

```
http://localhost:8080/root/categories.jsp?ID=test-page 
```

所以从答案来看，放入*test-page.jsp*的代码是

```
<head><title>${param.name}</title></head>  correct? 
```

如何在 test-page.jsp 中将标题的值写入字符串？所以在 test-page.jsp 里面有它说“测试页的标题”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:31:47.840

您可以使用和动作`<jsp:param>`传递参数。`<jsp:include>``<jsp:forward>`

```
<jsp:include page="categories.jsp" flush="true">
   <jsp:param name="id" value="test-page.jsp"/>
   <jsp:param name="title" value="Title of test page"/>
</jsp:include> 
```

并且代码/标记`categories.jsp`应该是，

```
<head>
  <title>${param.title}</title>
</head> 
```

# oracle - Aix 列表器上的 Oracle 11gR2 将无法启动

> ID：12612456
> 
> 赞同：0
> 
> 时间：2012-09-27T00:39:47.600
> 
> 标签：oracle, listener, aix

我在 Aix 服务器上创建了一个新的 Oracle 实例。数据库运行良好，但我的监听器无法启动。我在侦听器日志中收到以下错误：

```
<msg time='2012-09-26T17:33:17.304-07:00' org_id='oracle' comp_id='tnslsnr'
 type='UNKNOWN' level='16' host_id='xxxxx111'
 host_addr='000.00.0.111'>
 <txt>TNS-12546: TNS:permission denied
 TNS-12560: TNS:protocol adapter error
  TNS-00516: Permission denied
   IBM/AIX RISC System/6000 Error: 2: No such file or directory
 </txt>
</msg> 
```

当我尝试启动监听器时，出现以下错误：

```
lsnrctl start

LSNRCTL for IBM/AIX RISC System/6000: Version 11.2.0.3.0 - Production on 26-SEP-2012 17:38:17

Copyright (c) 1991, 2011, Oracle.  All rights reserved.

Starting /oracle/QI1/112_64/bin/tnslsnr: please wait...

TNSLSNR for IBM/AIX RISC System/6000: Version 11.2.0.3.0 - Production
System parameter file is /oracle/QI1/112_64/network/admin/listener.ora
Log messages written to /oracle/QI1/saptrace/diag/tnslsnr/xxxxxx/listener/alert/log.xml
Error listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=xxxxxxx.na.xxxxx.com)(PORT=1521)))
TNS-12542: TNS:address already in use
 TNS-12560: TNS:protocol adapter error
  TNS-00512: Address already in use
   IBM/AIX RISC System/6000 Error: 67: Address already in use

Listener failed to start. See the error message(s) above... 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:25:48.537

按照@dave的回答，我检查了`sqlnet.ora`文件，错误在参数中：

```
TCP.VALIDNODE_CHECKING = YES 
```

注释掉该行后，监听器开始

```
#TCP.VALIDNODE_CHECKING = YES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:48:49.697

我发现ip地址SQLnet文件不正确。固定IP地址后，监听器就可以启动了。

# r - lapply 和 subsetting 列

> ID：12612460
> 
> 赞同：2
> 
> 时间：2012-09-27T00:40:56.547
> 
> 标签：r, subset, xts, lapply

我希望使使用`lapply()`更优雅的位...（即一个班轮会很好），而不是之前必须设置一个功能。即是否有一个标准函数可供我使用`[,c(1:4)]`或类似的东西作为参数......

所以做一个可重复的例子......

```
x <- xts(matrix(rnorm(500*8),ncol=8),Sys.Date()-500:1)
x.m <- split(x,'months') 
```

以下基本上只为从拆分创建的列表的每个元素获取前 4 列，因此我必须创建一个函数来执行此操作，但我希望它以某种方式更优雅......

```
ff <- function(xts.obj){xts.obj[,c(1:4)]}

g <- lapply(x.m, ff) 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T00:46:18.597

`[`是一个函数

```
> args(xts:::`[.xts`)
function (x, i, j, drop = FALSE, which.i = FALSE, ...) 
NULL 
```

所以，你可以使用它。这些中的任何一个都可以做到。

```
lapply(x.m, '[', , c(1:4))
lapply(x.m, '[', j=c(1:4)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T00:45:54.587

`lapply`如果只是让额外的函数漂浮在你身边，你可以在调用中使用匿名函数。

```
g <- lapply(x.m, FUN = function(x){x[, c(1:4]} 
```

# jruby - 更改 JRuby 在块中使用的类加载器

> ID：12612461
> 
> 赞同：3
> 
> 时间：2012-09-27T00:41:16.193
> 
> 标签：jruby, classloader

我想直接与 JRuby 集成，以便可以在子 ClassLoader 中调用块。

目标是将 Jars 列表传递给[自定义 ClassLoader](https://github.com/mguymon/naether/blob/master/src/main/java/com/tobedevoured/naether/PathClassLoader.java)以加载以执行块。我遇到的问题是告诉 JRuby 运行时使用新的 ClassLoader 而不是默认值。我现在拥有的是一个 hack，它手动调用`create(string class)`使用自定义 ClassLoader 构造一个实例。

对于这个[Ruby](https://github.com/mguymon/lock_jar/blob/class_loader/lib/lock_jar/class_loader.rb)，它使用[LockJar](https://github.com/mguymon/lock_jar)从文件中获取 Jars 列表，它是如何使用`tmp/IsolateJarfile.lock`的[示例：](https://github.com/mguymon/lock_jar/blob/class_loader/spec/lock_jar/class_loader_spec.rb)

```
email = LockJar::ClassLoader.new( 'tmp/IsolateJarfile.lock' ).isolate do
    email = new_instance( 'org.apache.commons.mail.SimpleEmail' )
    email.setSubject( 'test subject' )
    email
end

email.getSubject().should eql 'test subject' 
```

这是可行的，SimpleEmail 是在子 ClassLoader 中创建的。默认的 JRuby 类路径没有改变。调用`new_instance( 'org.apache.commons.mail.SimpleEmail' )`是丑陋的。理想情况下`org.apache.commons.mail.SimpleEmail.new`，可以调用 JRuby 运行时从自定义类加载器而不是默认的 JRuby 类加载器中提取。我尝试`Thread.currentThread().setContextClassLoader`在块执行期间进行更改，但这不起作用。我在 JRuby 源代码中窥探了一些，但找不到连接到 ClassLoader 的好方法。

# android - Android：如何从保存的 openFileOutput Mode_PRIVATE 填充微调器？

> ID：12612464
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:41:27.297
> 
> 标签：android, spinner, populate, fileoutputstream

我想要实现的是用以前创建的 openFileOutput 文件填充微调器。

这是创建文件的代码：

```
save.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                FILENAME = filename.getText().toString();
                COMMENTS = comments.getText().toString();
                try {
                    FileOutputStream f = openFileOutput(FILENAME,
                            Context.MODE_PRIVATE);
                    f.write(COMMENTS.getBytes());
                    f.close();
                    Toast.makeText(getBaseContext(),
                            "Saved",
                            Toast.LENGTH_SHORT).show();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        }); 
```

例如：我用上面的代码创建了这 3 个文件： File1 File2 File3

我希望我的微调器看起来像这样：

文件 1

文件2

文件 3

我遇到的问题是我不知道这是如何完成的。

我用谷歌搜索了它，但不幸的是没有结果。

有人可以向我解释如何实现这一目标，最好使用示例代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:04:25.497

我让它工作了。

使用fileList()真的很简单。

用 fileList() 填充一个数组。并使用该数组作为数组适配器的第三个参数。

# servicestack - ServiceStack - 是否有最新的、完整的文档？

> ID：12612465
> 
> 赞同：10
> 
> 时间：2012-09-27T00:41:31.480
> 
> 标签：servicestack

我正试图围绕 ServiceStack 展开思考，虽然它声称它具有非常好的文档，但到目前为止似乎并非如此。是否有文档实际说明要使用哪些接口/基类，以及它们的作用？

只是.. 有一堆问题，并且可以找到很少的答案.. 一个[新的 API 设计](https://github.com/ServiceStack/ServiceStack/wiki/New-API)显示了一个 DTO 实现 IReturn 接口的示例，以及从 Service 继承的服务 - 但是如果这是现在的首选方式，没有解释，是吗需要实现IReturn，如何处理POST/GET/etc等等等等。

任何链接将不胜感激。

是的，我有示例，但是例如，他们在此 IReturn 接口上没有任何内容.. 并且示例无论如何都不会击败文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:13:01.583

您可以[在 wiki 上找到 ServiceStack Web 框架的所有文档](https://github.com/ServiceStack/ServiceStack/wiki)

[ServiceStack 的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)[本周](https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes)刚刚发布，其中已经包含了您所有问题的答案。我会**回去完整阅读它们，**但我会提取回答您问题的片段：

## 是否有文档实际说明要使用哪些接口/基类，以及它们的作用？

在**介绍新 API**部分下是：

**新的 API 设计通过这个单一的统一接口**简化了现有的 IService 和 IRestService ：

```
public interface IService {} 
```

现在可以**在一个类中同时处理 RPC 服务和 Rest Service 请求**。该接口仅用作 ServiceStack 用于查找、注册和自动连接现有服务的标记接口。还包括一个方便的具体**服务类，其中包含对 ServiceStack 提供者的轻松访问**

## 一个新的 API 设计展示了一个 DTO 实现 IReturn 接口的示例，以及从 Service 继承的服务 - 但没有解释这是否是现在的首选方式

wiki 顶部的标题如下：

### 推荐用于未来的 Web 服务开发

由于新的 API 设计比现有 API 提供了许多好处，**我们建议将其用于任何新的 Web 服务开发**。这将需要一些时间，但我们打算移植所有旧示例以自己采用新 API。**仍然更喜欢旧 API 的一个原因**是，如果您还想支持 SOAP 客户端和端点，这仍然需要前一种方法强制执行的严格性。

在**灵感**标题下写道：

这个提议的美妙之处在于它已经**完全符合 ServiceStack 现有的基于消息的语义**，这意味着我们能够在创纪录的时间内实现它，而不会对现有代码库造成任何中断或破坏性更改。结果是**您现在可以在现有服务的同时开始创建新服务，**并且它们都将**继续无缝地并行工作**。

## 是否需要实现 IReturn

**在从类型化 C# 客户端调用服务**的标题下是：

假设您采用复制 DTO 的正常路线（以二进制形式的任一源），因此您在客户端上有类似的东西：

```
[Route("/reqstars")]
public class AllReqstars : IReturn<List<Reqstar>> { } 
```

客户端上的代码现在变成了：

```
var client = new JsonServiceClient(BaseUri);
List<Reqstar> response = client.Get(new AllReqstars()); 
```

它向 /reqstars 路由发出 GET Web 请求。当客户端上不存在自定义路由时，它会自动回退到使用 ServiceStack 的预定义路由。

最后，您还可以使用以前更明确的客户端 API（**当您没有 IReturn<> 标记时非常适合**）：

```
var response = client.Get<List<Reqstar>>("/reqstars"); 
```

所有这些 API 都有异步等效项，您可以在需要时使用它们。

## 如何处理 POST/GET/等，

整个 API 文档有效地解释了 Post 的 Get 是如何工作的。您`client.Get()`在客户端上有一个调用服务器上的，或者如果它不存在则`Get()`回退到使用。`Any()`

Wiki 页面的[底部介绍了](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)如何手动将您的服务从旧 API 移植到新 API。

以下是一些使用新 API 的示例：

*   [剃刀摇滚明星服务](http://razor.servicestack.net/rockstars)
*   [主页 TODO 示例](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/NewApiTodos.cs)
*   [综合测试套件](https://github.com/ServiceStack/ServiceStack/blob/master/tests/RazorRockstars.Console.Files/ReqStarsService.cs)

# sql - Oracle SQL - 添加一列，其中的数据不包含在任何表中

> ID：12612467
> 
> 赞同：5
> 
> 时间：2012-09-27T00:41:41.803
> 
> 标签：sql, oracle

我有这个查询：

```
Select
Trunc(Red.Fulfilled_Dtime),
P.Email,
(Red.Points_Deducted *.003)*(1/1.02) As Redeem_Amt,
Red.Player_Id,
Red.Prize_Id, 
Red.Points_Deducted
From Redemption_Log Red
Inner Join Player P On Red.Player_Id=P.Player_Id
Where Red.Prize_Id In (8907,8906,8905,8904,8903,8902,8901) 
```

我想在我的结果中添加一个名为“Currency”的列，其中我的结果中的每一行都有输出“USD”。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T00:43:13.360

您可以`virtual column`在`SELECT`声明中添加，

```
SELECT  Trunc(Red.Fulfilled_Dtime),
        P.Email,
        (Red.Points_Deducted *.003)*(1/1.02) As Redeem_Amt,
        Red.Player_Id,
        Red.Prize_Id, 
        Red.Points_Deducted,
        'USD' AS "Currency"                            -- <<== virtual column
FROM    Redemption_Log Red
        Inner Join Player P 
            On Red.Player_Id=P.Player_Id
WHERE  Red.Prize_Id In (8907,8906,8905,8904,8903,8902,8901) 
```

# php - 如何在现有项目中使用 phalcon devtools？

> ID：12612475
> 
> 赞同：1
> 
> 时间：2012-09-27T00:43:25.533
> 
> 标签：php, phalcon

我按照[这个教程](http://docs.phalconphp.com/en/0.5.0/reference/applications.html#multi-module)l 创建了一个多模块项目文件夹结构。我正在尝试在 Devtools 中使用模型创建器。

它抛出一个错误，说我需要在项目文件夹中，我是 ( `multiple/apps/frontend/models/`)。

我必须通过 devtools 创建一个项目才能使用模型创建器，还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-12T11:32:03.790

最简单的解决方法是因为您没有使用 Phalcon 生成项目，因此 .phalcon 文件夹不存在，只需在项目的根目录中创建 .phalcon 文件夹即可。这将解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:13:57.313

我不认为你做错了什么。这很可能是开发工具中的一个错误，尤其是在多模块支持的情况下。

我建议您使用工具在不同的文件夹中创建一个新项目，然后将您需要创建的模型从一个项目复制到另一个项目。有点小技巧，但这会让你继续前进，直到我们找出发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:18:03.497

我认为您在错误的目录中。Devtools 提供的命令需要在应用程序的根路径中执行。如果您使用 Devtools 创建项目，它会`.phalcon`在根路径中创建一个文件夹（以及其他文件夹）。如果执行以下命令。

```
$ phalcon project test
$ cd test
$ ls -la . 
```

您应该看到 .phalcon 文件夹。所有其他命令应从`test`文件夹执行。我希望这能解决你的问题。

# azure - 同一数据中心中的 Azure 网站和 VM

> ID：12612476
> 
> 赞同：0
> 
> 时间：2012-09-27T00:43:27.860
> 
> 标签：azure, azure-web-app-service

我有一个带有数据库的天蓝色 VM。我也有天蓝色的网站应用程序。两者都在美国东部数据中心。是同一个数据中心吗？即我需要为他们之间的流量付费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:40:32.023

它是同一个数据中心，因此，不，您无需为它们之间的带宽付费。在其他情况下，您只需支付带宽费用，每月前 5GB 是免费的。

# c++ - 如何使用 goto 打破嵌套循环

> ID：12612480
> 
> 赞同：6
> 
> 时间：2012-09-27T00:44:03.990
> 
> 标签：c++, for-loop, goto

如何使用“goto”语句跳出循环

```
for(i = 0; (i < 9); i++)
    {
        for(j = 0; j < 9; j++)
        {
            //cout << " " << Matrix[i][j];
            //cout << "i: " << i << endl;
            if(Matrix[i][j] == 0)
            {
                //temp = 10;
                [goto] ;
                //break;
            }
        }
    } 
```

当我离开嵌套的 for 循环时，我想保留 i 和 j 的值。我该如何使用 goto 语句呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T00:49:11.193

像这样：

```
int i,j;
for(i = 0; i < 9; i++)
{
    for(j = 0; j < 9; j++)
    {
        //cout << " " << Matrix[i][j];
        //cout << "i: " << i << endl;
        if(Matrix[i][j] == 0)
        {
            //temp = 10;
            goto end;
            //break;
        }
    }
}
end:
cout << i << " " << j << endl; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T00:49:38.743

就像您`goto`在任何其他情况下使用一样。只要您不跨越其中包含局部变量的作用域，您实际上可以将其视为“转到这一行和那一行”：

```
for (/* ... */) {
  /* ... */
  if (/* ... */)
    goto finalise;
}
finalise:
  foo = bar; //... 
```

但是，在很多情况下，`goto`是不是设计良好的代码的指标。绝不总是，但经常。

我建议你使用`goto`s big Brother`return`并将你的代码分解为一个函数：

```
inline std::pair<int,int> findZeroEntry(std::vector matrix) {
  for (int i = 0; i < 9; i++)
    for (int j = 0; j < 9; j++)
      if (Matrix[i][j] == 0)
        return std::make_pair(i,j);
  return std::make_pair(9,9); // error
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T02:06:54.743

好吧，[@bitmask 的回答](https://stackoverflow.com/a/12612525/464581)已经说出了我在阅读问题时想说的大部分内容。

但为了完整起见，这里有另一种技术：

```
Matrix              m;
Index2D< 9, 9 >     pos;

for( ; pos < pos.end();  ++pos )
{
    if( m( pos.x(), pos.y() ) == 0 )
    {
        break;
    }
}
cout << pos.x() << " " << pos.y() << endl; 
```

恕我直言，这是更清晰的代码。

此外，然后可以使矩阵支持通过`Index2D`值进行索引，从而将上述内容简化为……

```
Matrix              m;
Index2D< 9, 9 >     pos;

for( ; pos < pos.end();  ++pos )
{
    if( m[pos] == 0 )
    {
        break;
    }
}
cout << pos.x() << " " << pos.y() << endl; 
```

由于`Index2D`标准库中没有任何东西，因此需要在某个地方定义它，例如

```
template< int width, int height >
struct Index2D
{
    int         i_;

    int x() const { return i_ % width; }
    int y() const { return i_ / width; }

    void operator++() { ++i_; }

    bool operator<( Index2D const& other ) const
    {
        return (i_ < other.i_);
    }

    Index2D(): i_( 0 ) {}

    Index2D( int const x, int const y )
        : i_( width*y + x )
    {}

    static const Index2D endValue;
    static Index2D end() { return endValue; }
};

template< int width, int height >
Index2D< width, height > const Index2D< width, height >::endValue( 0, height ); 
```

但是，它可以在您需要此功能的任何地方重复使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T00:48:40.897

您不需要`goto`离开嵌套的 for 循环并保存这些变量。只是，您想连续跳出每个循环。只需在适当的范围级别有一个布尔值，您可以检查它是否需要跳出循环。

**更正示例**

IE：

```
bool HasFoundZero = false;
for(i = 0; i < 9; i++)
{
    for(j = 0; j < 9; j++)
    {
        //cout << " " << Matrix[i][j];
        //cout << "i: " << i << endl;
        if(Matrix[i][j] == 0)
        {
            //temp = 10;
                HasFoundZero = true;
        }
        if(HasFoundZero)
        {
            break;
        }
    }
    if(HasFoundZero)
    {
        break;
    }
} 
```

# apache - htaccess 在 ec2 suse 实例 Web 服务器上未被识别

> ID：12612481
> 
> 赞同：0
> 
> 时间：2012-09-27T00:44:29.820
> 
> 标签：apache, .htaccess, mod-rewrite, amazon-ec2, suse

好吧，这就是交易：我的 .htaccess 文件根本不工作

我的服务器设置是 Amazon EC2 实例上的 SuSE - Apache 已设置，mod_rewrite 已加载并启用 - 在我的 http.conf 中，我有：

```
<Directory />
    Options None
    AllowOverride All
    Order deny,allow
    Deny from all
</Directory>

<Directory /srv/www/htdocs/>
  AllowOverride All
</Directory>

# use .htaccess files for overriding,
AccessFileName .htaccess
# and never show them
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
</Files> 
```

*   在我安装了 CI 的服务器上，.htacces 也没有做任何它应该做的事情。例如，为了测试它是否有效，我创建了一个 .htacess，上面写着“全部拒绝”，它仍然能够访问这些页面。

*   每次更改配置文件时，我都会重新启动 apache。

什么可能导致我的 htaccess 文件无法识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:00:40.417

正在编辑错误的配置文件，

需要编辑 default-server.conf 而不是 httpd.conf 以进行更改

# sql - 如何在 SQLite 中的特定条件下进行 SQL 查询，将一个表的结果行与另一个表的行组合

> ID：12612482
> 
> 赞同：2
> 
> 时间：2012-09-27T00:44:32.583
> 
> 标签：sql, database, sqlite

我有一个包含三个表的 SQLite3 数据库。示例数据如下所示：

**原来的**

```
id    aName  code 
------------------
1     dog     DG  
2     cat     CT  
3     bat     BT  
4     badger  BDGR
...   ...     ... 
```

**翻译**

```
id   orgID   isTranslated  langID   aName     
----------------------------------------------
1     2           1         3       katze     
2     1           1         3       hund      
3     3           0         3       (NULL)    
4     4           1         3       dachs     
...   ...         ...       ...     ... 
```

**朗**

```
id Langcode
-----------
1    FR  
2    CZ
3    DE
4    RU
...  ... 
```

我想从 **Original**和**Translated**中选择所有数据，结果将包含**Original**表中的所有数据，但是得到翻译的行的*aName*将被 Translated 表中的 aName 替换，**所以***我*可以应用 ORDER BY 子句并排序以所需的方式获取数据。

 **所有数据和表格设计都是示例，只是为了说明问题。架构确实包含一些元素，例如*isTranslated*列或单独表中的翻译和原始名称。这些元素是应用程序目标/设计所必需的。

更具体地说，这是我想要生成的示例行集。如果翻译可用于 Original 中的某个**id** *，*则表**Original中的所有数据都由****Translated**中的数据修改。

 *****期望的结果**

```
id    aName  code    isTranslated
---------------------------------  
1     hund     DG         1
2     katze    CT         1
3     bat      BT         0
4     dachs    BDGR       1
...   ...      ...        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:05:09.383

这是[CASE 表达式](http://www.sqlite.org/lang_expr.html#case)的典型应用：

```
SELECT Original.id,
       CASE isTranslated
         WHEN 1 THEN Translated.aName
         ELSE        Original.aName
       END AS aName,
       code,
       isTranslated
FROM Original
JOIN Translated ON Original.id = Translated.orgID
WHERE Translated.langID = (SELECT id FROM Lang WHERE Langcode = 'DE') 
```

如果不是所有记录在 中`Original`都有对应的记录`Translated`，请`LEFT JOIN`改用。

如果保证未翻译的名称是`NULL`，则可以[`IFNULL(Translated.aName, Original.aName)`](http://www.sqlite.org/lang_corefunc.html#ifnull)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:47:46.790

您可能应该列出您想要的实际结果，这将有助于人们在未来帮助您。

在目前的情况下，我猜你想要这些方面的东西：

```
SELECT Original.id, Original.code, Translated.aName
FROM Original
JOIN Lang
ON Lang.langCode = 'DE'
JOIN Translated
ON Translated.orgId = Original.id
AND Translated.langId = Lang.id
AND Translated.aName IS NOT NULL; 
```

（查看我的[示例](http://sqlfiddle.com/#!1/d16b4/4)，看看这些是否是您想要的结果）。

* * *

无论如何，您所拥有的表格集正朝着相当标准的“翻译表格”设置迈进。但是，我会做一些基本的改变。

1.  `Original`

    *   将表格命名为特定的名称，例如`Animal`
    *   不要在表格中包含“默认”翻译（如有必要，您可以使用视图）。
    *   “代码”很好，尽管在动物的情况下，可能应该使用属/种
2.  `Lang`

    *   'Lanugage' 通常是 RDBMS 中的保留字，所以这个名字很好。
    *   具体命名您正在使用的“语言代码”（并且不要缩写列名）。实际上（最多）可能有三种不同的 ISO 代码 - 只需将它们全部抓取即可。
    *   （另外，请记住语言具有特定于语言的*名称*，因此语言也需要它自己的“翻译”表）
3.  `Translated`

    *   将表实体命名为特定的，like`AnimalNameTranslated`或类似的名称。
    *   `isTranslated`是不必要的 - 您可以从*行*的存在中推导出它- 如果该术语尚未翻译，请不要添加行。
    *   将**所有**“翻译”放入表中，*包括*“默认”翻译。这意味着您的所有条款都在一个地方，因此您不必去其他地方寻找。*****

# php - 从 https url 复制文件

> ID：12612484
> 
> 赞同：1
> 
> 时间：2012-09-27T00:44:42.867
> 
> 标签：php

我爬了一个网络来获取网络上的 pdf 文档。例如，我从中获得了 9 个 PDF 文档，并且 8 个 PDF 的复制过程运行良好，除了一个文档。我不知道怎么回事，我的连接没有问题。当我直接查看网址时，也可以，我可以手动获取该文档。网址以https开头，是https的问题吗？如何解决？我使用复制功能：

```
copy($pdfLink, $savePath . basename($pdfLink)); 
```

错误结果是：

```
Warning: copy(https://www.aclweb.org/anthology/J/J08/J08-1004.pdf) [function.copy]: failed to open stream: Invalid argument in D:\AppServ\www\suksesfunctionWrapper.php on line 19 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:48:44.873

在我看来，您需要调整 php.ini 文件中的设置，以便您可以发出 https 请求。如果您对 URL 进行硬编码，只需将 https 替换为 http。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:00:40.673

您可能需要在 php 中启用 ssl，因为该文件来自 https 源。

我相信扩展启用是openssl。在 php.ini 中查找加载 php_openssl.dll 的行并取消注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-08T12:42:16.743

试试这个：

```
$opts = array(
    "ssl"=>array(
        "allow_self_signed"=>true,
        "verify_peer"=>false,
        "verify_peer_name"=>false
    )
);

copy($pdfLink, $savePath . basename($pdfLink), stream_context_create($opts)); 
```

# c++ - 允许将 T* 与 char* 混淆。是否也允许反过来？

> ID：12612488
> 
> 赞同：28
> 
> 时间：2012-09-27T00:45:24.040
> 
> 标签：c++, language-lawyer, strict-aliasing, type-punning

**注意：**此问题已被重命名并简化，以使其更具针对性和可读性。大多数评论都引用了旧文本。

* * *

根据标准，不同类型的对象可能不会共享相同的内存位置。所以这是不合法的：

```
std::array<short, 4> shorts;
int* i = reinterpret_cast<int*>(shorts.data()); // Not OK 
```

然而，该标准允许这条规则有一个例外：任何对象都可以通过指向`char`or的指针来访问`unsigned char`：

```
int i = 0;
char * c = reinterpret_cast<char*>(&i); // OK 
```

但是，我不清楚这是否也允许反过来。例如：

```
char * c = read_socket(...);
unsigned * u = reinterpret_cast<unsigned*>(c); // huh? 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T07:02:51.263

由于涉及的指针转换，您的某些代码是有问题的。请记住，在这些情况下`reinterpret_cast<T*>(e)`具有语义，`static_cast<T*>(static_cast<void*>(e))`因为所涉及的类型是标准布局。（事实上​​，我建议您在处理存储时*始终*使用`static_cast`via 。）`cv void*`

仔细阅读标准表明，在指针转换到或从指针转换过程中，`T*`假定确实`T*`涉及到一个实际的对象——这在你的一些片段中很难实现，即使是“作弊”，这要归功于类型的琐碎性涉及（稍后会详细介绍）。但是，那将是题外话，因为...

**别名与指针转换无关。**这是 C++11 文本，概述了通常称为“严格别名”规则的规则，来自 3.10 Lvalues 和 rvalues [basic.lval]：

> 10 如果程序尝试通过非下列类型之一的左值访问对象的存储值，则行为未定义：
> 
> *   对象的动态类型，
> *   对象的动态类型的 cv 限定版本，
> *   与对象的动态类型类似（如 4.4 中定义）的类型，
> *   与对象的动态类型相对应的有符号或无符号类型，
> *   对应于对象动态类型的 cv 限定版本的有符号或无符号类型，
> *   聚合或联合类型，在其元素或非静态数据成员中包括上述类型之一（递归地包括子聚合或包含联合的元素或非静态数据成员），
> *   一个类型，它是对象的动态类型的（可能是 cv 限定的）基类类型，
> *   char 或 unsigned char 类型。

（这是 C++03 中相同子句的第 15 段，文本中有一些细微的变化，例如使用 'lvalue' 而不是 'glvalue'，因为后者是 C++11 的概念。）

根据这些规则，让我们假设一个实现为我们提供了`magic_cast<T*>(p)`“以某种方式”将指针转换为另一种指针类型的方法。通常这*将*是`reinterpret_cast`，在某些情况下会产生未指定的结果，但正如我之前解释的那样，对于指向标准布局类型的指针而言，情况并非如此。那么很明显，您的所有片段都是正确的（用 替换`reinterpret_cast`）`magic_cast`，因为`magic_cast`.

这是一个*似乎*错误使用的片段`magic_cast`，但我认为它是正确的：

```
// assume constexpr max
constexpr auto alignment = max(alignof(int), alignof(short));
alignas(alignment) char c[sizeof(int)];
// I'm assuming here that the OP really meant to use &c and not c
// this is, however, inconsequential
auto p = magic_cast<int*>(&c);
*p = 42;
*magic_cast<short*>(p) = 42; 
```

为了证明我的推理，假设这个表面上不同的片段：

```
// alignment same as before
alignas(alignment) char c[sizeof(int)];

auto p = magic_cast<int*>(&c);
// end lifetime of c
c.~decltype(c)();
// reuse storage to construct new int object
new (&c) int;

*p = 42;

auto q = magic_cast<short*>(p);
// end lifetime of int object
p->~decltype(0)();
// reuse storage again
new (p) short;

*q = 42; 
```

这个片段是精心构建的。特别是，即使由于 3.8 对象生命周期 [basic.life] 的第 5 段中规定的规则而被销毁，`new (&c) int;`我仍允许使用。相同的第 6 段给出了与存储引用非常相似的规则，第 7 段解释了一旦对象的存储被重用，用于引用对象的变量、指针和引用会发生什么——我将它们统称为 3.8/5- 7.`&c``c`

在这种情况下`&c`（隐式）转换为`void*`，这是对尚未重用的存储的指针的正确使用之一。类似地`p`是从构造`&c`新的之前获得的。`int`它的定义可能会移到 销毁之后`c`，这取决于实现魔法的深度，但肯定不是在`int`构造之后：第 7 段将适用，这不是允许的情况之一。对象的构造`short`也依赖于`p`成为指向存储的指针。

现在，因为`int`和`short`是微不足道的类型，我不必使用对析构函数的显式调用。我也不需要对构造函数的显式调用（也就是说，对通常在中声明的标准放置 new 的调用`<new>`）。从 3.8 对象生命周期 [basic.life] 开始：

> 1 [...] T 类型对象的生命周期开始于：
> 
> *   获得具有适合类型 T 的对齐和大小的存储，并且
> *   如果对象有非平凡的初始化，它的初始化就完成了。
> 
> T 类型对象的生命周期在以下情况下结束：
> 
> *   如果 T 是具有非平凡析构函数（12.4）的类类型，则析构函数调用开始，或者
> *   对象占用的存储空间被重用或释放。

这意味着我可以重写代码，以便在折叠中间变量之后`q`得到原始代码段。

请注意`p`不能折叠。也就是说，下面的内容肯定是不正确的：

```
alignas(alignment) char c[sizeof(int)];
*magic_cast<int*>(&c) = 42;
*magic_cast<short*>(&c) = 42; 
```

如果我们假设一个`int`对象是（平凡地）用第二行构造的，那么这一定意味着`&c`成为一个指向已被重用的存储的指针。因此第三行是不正确的——尽管严格来说是由于 3.8/5-7 而不是由于别名规则。

如果我们不假设，那么第二行*违反*`char c[sizeof(int)]`了别名规则：我们正在通过类型的 glvalue读取实际上是一个对象`int`，这不是允许的例外之一。相比之下，`*magic_cast<unsigned char>(&c) = 42;`就可以了（我们假设`short`在第三行简单地构造了一个对象）。

就像 Alf 一样，我还建议您在使用存储时明确使用标准放置 new。跳过琐碎类型的破坏很好，但是当遇到时，`*some_magic_pointer = foo;`您很可能面临违反 3.8/5-7（无论获得该指针的方式多么神奇）或别名规则。这也意味着存储新表达式的结果，因为一旦构造了对象，您很可能无法重用魔术指针——再次由于 3.8/5-7。

但是，读取对象的字节（这意味着使用`char`or `unsigned char`）很好，而且您甚至根本不需要使用`reinterpret_cast`或任何魔术。`static_cast`via`cv void*`可以说很适合这项工作（尽管我确实觉得标准可以在那里使用更好的措辞）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T02:09:46.137

> 这个也是：

```
// valid: char -> type
alignas(int) char c[sizeof(int)];
int * i = reinterpret_cast<int*>(c); 
```

这是不正确的。别名规则规定了在哪些情况下通过不同类型的左值访问对象是合法/非法的。有一条特定的规则说您可以通过`char`or类型的指针访问任何对象`unsigned char`，因此第一种情况是正确的。也就是说，A => B 并不一定意味着 B => A。您可以`int`通过指向 的指针`char`访问 a，但`char`不能通过指向 的指针访问 a `int`。

* * *

为了阿尔夫的利益：

> 如果程序尝试通过非下列类型之一的泛左值访问对象的存储值，则行为未定义：
> 
> *   对象的动态类型，
> *   对象的动态类型的 cv 限定版本，
> *   与对象的动态类型类似（如 4.4 中定义）的类型，
> *   与对象的动态类型相对应的有符号或无符号类型，
> *   对应于对象动态类型的 cv 限定版本的有符号或无符号类型，
> *   聚合或联合类型，在其元素或非静态数据成员中包括上述类型之一（递归地包括子聚合或包含联合的元素或非静态数据成员），
> *   一个类型，它是对象的动态类型的（可能是 cv 限定的）基类类型，
> *   char 或 unsigned char 类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T05:46:55.137

关于……的有效性……</p>

```
alignas(int) char c[sizeof(int)];
int * i = reinterpret_cast<int*>(c); 
```

在`reinterpret_cast`产生有用的指针值的意义上，它本身是否可以，取决于编译器。在此示例中，未使用结果，特别是未访问字符数组。所以关于这个例子，没有什么可以说的了：它只是*取决于*.

但是让我们考虑一个确实涉及别名规则的扩展版本：

```
void foo( char* );

alignas(int) char c[sizeof( int )];

foo( c );
int* p = reinterpret_cast<int*>( c );
cout << *p << endl; 
```

并且让我们只考虑编译器保证一个有用的指针值的情况，一个将指针放置在相同字节内存中的情况（这取决于编译器的原因是标准，在 §5.2.10/7 中，仅保证它用于*类型*对齐兼容的指针转换，否则将其保留为“未指定”（但是，整个 §5.2.10 与 §9.2/18 有点不一致）。

现在，对标准 §3.10/10 的一种解释，即所谓的“严格别名”条款（但请注意，该标准从未使用过“严格别名”一词），

> 如果程序尝试通过非下列类型之一的泛左值访问对象的存储值，则行为未定义：
> 
> *   对象的动态类型，
> *   对象的动态类型的 cv 限定版本，
> *   与对象的动态类型类似（如 4.4 中定义）的类型，
> *   与对象的动态类型相对应的有符号或无符号类型，
> *   对应于对象动态类型的 cv 限定版本的有符号或无符号类型，
> *   聚合或联合类型，在其元素或非静态数据成员中包括上述类型之一（递归地包括子聚合或包含联合的元素或非静态数据成员），
> *   一个类型，它是对象的动态类型的（可能是 cv 限定的）基类类型，
> *   一个`char`或`unsigned` `char`类型。

正如它本身所说，这与驻留在字节中的对象的*动态类型有关。*`c`

有了这种解释，如果在那里放置了一个对象，则读取操作`*p`是可以的，否则不是。所以在这种情况下，数组是通过指针访问的。并且没有人怀疑*另一种方式*是有效的：即使可能在这些字节中放置了一个对象，您*也可以*通过 §3.10/10 的最后一点自由地将该对象作为值序列访问。`foo``int``char``int*`*`foo``int`*`char`**

 **因此，通过这种（通常的）解释，在`foo`放置了一个`int`之后，我们可以将它作为对象访问，因此在名为 的内存区域`char`中至少存在一个对象；我们可以访问它，所以至少那里也存在一个；所以[大卫在另一个答案中断言](https://stackoverflow.com/a/12613099/464581)对象不能被访问为, 与这种通常的解释不兼容。`char``c``int``int``char``int`

David 的断言也与最常见的placement new 用法不兼容。

关于还有什么其他可能的解释，也许可以与大卫的断言兼容，嗯，我想不出任何有意义的解释。

因此，总而言之，就神圣标准而言，仅将自己转换为`T*`指向数组的指针实际上是否有用取决于编译器，并且访问指向的可能值是否有效取决于存在的内容。特别是，考虑一个陷阱表示`int`：如果位模式恰好是那样，你不会希望它在你身上爆炸。所以为了安全起见，你必须知道里面有什么，位，正如`foo`上面的调用所示*，编译器通常不知道*，就像 g++ 编译器的严格的基于对齐的优化器一般不知道......</ p>**

# php - 是否可以在 PHP 中创建一个名为“echo”的函数？

> ID：12612489
> 
> 赞同：0
> 
> 时间：2012-09-27T00:45:45.817
> 
> 标签：php

> **可能重复：**
> [我可以覆盖 PHP 内置函数 echo() 吗？](https://stackoverflow.com/questions/2182743/can-i-override-the-php-built-in-function-echo)

在 Python 等语言中，“echo”不是一种语言结构。是否可以在 PHP 中隐藏内置的“echo”构造并实现如下函数：

```
function echo($value) {
    return $value;
} 
```

这是错误消息：

```
PHP Parse error: syntax error, unexpected 'echo' (T_ECHO), expecting identifier (T_STRING) or '(' 
```

# json - 如何使用 Yojson 解析 JSON 文件？

> ID：12612493
> 
> 赞同：0
> 
> 时间：2012-09-27T00:46:01.493
> 
> 标签：json, ocaml

任何人都可以帮助我使用 Yojson 解析 json 文件吗？我在网上找不到任何例子。我对 yojson 的工作原理有点困惑......

[http://mjambon.com/yojson-doc/Yojson.Safe.html](http://mjambon.com/yojson-doc/Yojson.Safe.html)

是不是太有帮助。谁能将我链接到一个简单的 yojson 示例？谢谢！

我只想从简单的开始......就像读入一个 json 文件，然后把整个东西吐出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:46:30.923

看看`examples`源代码中的子目录怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:48:34.693

文档相当透明。显而易见的方法是使用`to_string`and `from_string`。

# windows - Apache 2.2.23 下载适用于 Windows 7 的 msi

> ID：12612494
> 
> 赞同：0
> 
> 时间：2012-09-27T00:46:07.847
> 
> 标签：windows, apache

有人能告诉我 .msi 文件在 Apache 的 Apache 下载站点上 Windows 7 上的 Apache 2.2.23 的位置吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:38:45.680

2.2.23 还没有任何官方的 MSI 安装程序，只有二进制文件（可能不是官方的）。您可以尝试在 Apache 的群组上发帖并询问相关信息，但可能会在某个时候出现，打包人员都是志愿者，IIRC。

# c# - 通过网络控制 .Net 远程应用程序的安全方法

> ID：12612500
> 
> 赞同：1
> 
> 时间：2012-09-27T00:46:46.517
> 
> 标签：c#, .net, sockets

我有一个在多个平台上运行的应用程序，但是所有业务逻辑都在 c# .net 中 - 我希望能够通过网络从另一个应用程序“远程控制”一个应用程序，并想知道它们是否是安全方面的任何指导方针。我将使用套接字进行通信。我主要担心的是。

1）我希望实际的网络连接尽可能安全，而不必安装证书（除非它们是在没有用户干预的情况下生成和存储的）
2）我只希望在获得许可的情况下可以从另一个应用程序控制该应用程序。一个例子可能是应用程序 A 提示应用程序 B 想要控制它的权限。此时，用户将单击“是”或输入由应用程序 A 生成的代码。在此之后，用户将不再被要求通过重新启动等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:16:20.383

随着用户输入代码以允许通信，这听起来像是使用使用[对称密钥算法](http://en.wikipedia.org/wiki/Symmetric_key)的加密方法来保护通道。关键本质上是用户输入的内容以允许进行通信。

但是，为了建立密钥，主要问题是如何将密钥传递给用户。

如果可以安全地假设存在运行应用程序 A 的操作员并且操作员可以与应用程序 B 的用户交谈，那么操作员可以简单地告诉用户代码是什么。

但是，如果应用 A 或应用 A 的运营商与用户没有直接联系，那么您将不得不走不同的路线。

# objective-c - IOS 6 navigationController 导航栏

> ID：12612501
> 
> 赞同：1
> 
> 时间：2012-09-27T00:47:06.543
> 
> 标签：objective-c, uinavigationbar, ios6, addsubview

我刚刚将手机更新到 IOS 6，但在 UINavigationController 导航栏上添加 UIImageView 时遇到了一些问题。这是我的代码

```
UIImage *logoImage = [UIImage imageNamed:@"navigationbar.png"];
UIImageView *logoImageView = [[UIImageView alloc] initWithImage:logoImage];
UINavigationBar *navBar = self.navigationController.navigationBar;
[navBar addSubview:logoImageView];
[logoImageView release]; 
```

这将在导航栏上添加徽标，它在较低版本的 IOS 6 上效果很好。但在 IOS 6 上显示了徽标，但**后退按钮位于徽标后面，因此后退按钮不显示。**

我不想覆盖 UINavigationBar drawrect，因为我在弹出代码的某处也有 UINavigatioBar。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:39:16.470

`UIImageView`我认为您在 IOS 6 中不需要 a 。

您可以像这样在`UINavigationBar`（例如 in `AppDelegate`）中放置一个背景图像：

```
[[UINavigationBar appearance] setBackgroundImage :[UIImage imageNamed:@"navigationbar"]]; 
```

找到了一个很好的网站，它解释了 IOS 6 中的一些新的用户界面定制：

[点击这里](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)

# objective-c - Objective-C NSMutableArray removeObjectAtIndex：崩溃

> ID：12612504
> 
> 赞同：1
> 
> 时间：2012-09-27T00:47:24.597
> 
> 标签：objective-c, ios, xcode, uitableview, nsmutablearray

我有一个带有表格视图的视图控制器，您可以在其中删除单元格。我有另一个处理称为书签的类，该类称为`BookmarkHandler`. 有一些方法可以上传书签、获取整个书签数组和删除书签。下面是这个类：

```
+ (NSMutableArray *)bookmarkCollection {

NSMutableArray *bookmarkCollection = [[NSUserDefaults standardUserDefaults] objectForKey: @"bookmarks"];

if (!bookmarkCollection) {

    bookmarkCollection = [[NSMutableArray alloc] init];
}

return bookmarkCollection;
}

+ (void)deleteBookmark: (NSIndexPath *)indexPath {

    NSMutableArray *bookmarkCollection = [[NSUserDefaults standardUserDefaults] objectForKey: @"bookmarks"];

    [bookmarkCollection removeObjectAtIndex: indexPath.row];

    [[NSUserDefaults standardUserDefaults] setObject:bookmarkCollection forKey: @"bookmarks"];

    [[NSUserDefaults standardUserDefaults] synchronize];

}
+ (void)uploadBookmark:(NSDictionary *)singleBookmark {

    NSMutableArray *bookmarkCollection = [[NSUserDefaults standardUserDefaults] objectForKey: @"bookmarks"];

if (!bookmarkCollection) {

    bookmarkCollection = [[NSMutableArray alloc] init];
} 

NSMutableDictionary *bookmark1 = [[NSMutableDictionary alloc] initWithDictionary: singleBookmark];

NSMutableDictionary *bookmark2 = [[NSMutableDictionary alloc] initWithDictionary: singleBookmark];

NSNumber *number1 = [[NSNumber alloc] initWithInt: 1];
NSNumber *number2 = [[NSNumber alloc] initWithInt: 2];

[bookmark1 setObject:number1 forKey: @"bookmarkTag"];
[bookmark2 setObject:number2 forKey: @"bookmarkTag"];

[bookmarkCollection addObject: bookmark1];
[bookmarkCollection addObject: bookmark2];

[[NSUserDefaults standardUserDefaults] setObject:bookmarkCollection forKey: @"bookmarks"];

[[NSUserDefaults standardUserDefaults] synchronize];

} 
```

书签集合是一个可变数组，由具有名称和日期对象/键的字典填充。这些名称和日期是填充另一个视图控制器中表格视图单元格标题的内容。表格视图中的单元格数量由`[[BookmarkHandler bookmarkCollection] count];`

在另一个视图控制器中，您可以删除表格视图单元格，所以我要做的是实现委托方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

if (editingStyle == UITableViewCellEditingStyleDelete) {

    [BookmarkHandler deleteBookmark: indexPath]; 

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject: indexPath] withRowAnimation:UITableViewRowAnimationLeft];
}
} 
```

因此，当我删除一个单元格时，我`BookmarkHandler`通过调用`deleteBookmark:`从表视图中删除该行来删除一个书签。但有时这条线上会出现崩溃：

```
 [bookmarkCollection removeObjectAtIndex: indexPath.row]; 
```

但是没有崩溃日志，我添加了一个 All Exceptions 断点。

有什么我做错了吗？感谢帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:29:52.137

问题在这里：

```
NSMutableArray *bookmarkCollection = [[NSUserDefaults standardUserDefaults] objectForKey: @"bookmarks"]; 
```

NSUserDefaults 不保存可变数组，它只是将它保存为 NSArray。
所以获取它的可变副本：

```
NSMutableArray *bookmarkCollection = [[[NSUserDefaults standardUserDefaults] objectForKey: @"bookmarks"] mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:09:14.727

您应该检查 indexPath.row 以确保它没有越界。在此之后，您可能会找到原因。

```
if (indexPath.row>=0 && indexPath.row<bookmarkCollection.count) {
    [bookmarkCollection removeObjectAtIndex: indexPath.row];
} else {
    NSLog(@"indexPath.row is out of boundry of bookmarkCellection size: %d", bookmarkCollection.count);
} 
```

# linux - phpmyadmin，允许从动态IP地址访问

> ID：12612505
> 
> 赞同：0
> 
> 时间：2012-09-27T00:47:24.760
> 
> 标签：linux, apache, apache2, phpmyadmin

我已经对我的 /user/phpmyadmin/apache.conf 文件设置了限制，因此只有我可以访问 phpmyadmin 页面。

```
Order deny,allow
Deny from all
Allow from 92.8.xxx.xxx 
```

我有一个动态 IP 地址，每次我的路由器重置时，我都必须更改 apache.conf 文件中的 IP 地址。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:54:08.070

我自己没有尝试过，但它应该可以工作：

访问[http://www.no-ip.com/](http://www.no-ip.com/)并注册一个免费域。下载他们的一个客户端并在您的电脑上运行它。它会自动将您的外部 IP 地址更新为该免费域。然后，您可以直接输入该域地址：例如

从 example.serve.com 允许

注意：客户端应用程序确实需要 24/7 全天候在您的电脑上运行，以便它可以不断更新。

# c++ - 从文件中读取 HTML 标签并在终端中正确显示它们

> ID：12612506
> 
> 赞同：0
> 
> 时间：2012-09-27T00:47:31.477
> 
> 标签：c++, html, enums, terminal, escaping

我是 C++ 的初学者，对 JAVA 有粗略的了解。我正在尝试读取一个看起来像这样的 HTML 文件。

```
<red>Red <dim>dim and red</dim> back to red</red>

<blue>Blue <underline>underlined blue <dim>dim</dim> underlined blue</underline>
and <cyan>cyan</cyan> and blue again</blue> 
```

这是我正在使用的代码的一个非常小的片段。我的问题的一个例子是，我无法弄清楚如何清除暗淡的格式并将文本保持为红色，直到到达结束标记（上面的第一行代码）。

```
void print_well_formed_file(ifstream& ifs) {
Lexer lexer; Token tok;
stack<string> tags;
string fstring;
term_colors_t scancolor;
term_attrib_t scanattrib;

while(getline(ifs,fstring)){
    lexer.set_input(fstring);
    while(lexer.has_more_token()){
    tok = lexer.next_token();
        switch(tok.type){
            case TAG:
                if(tok.value[0] != '/'){
                    tags.push(tok.value);
                    if(tok.value == "red")
                        scancolor = RED;
                    else if(tok.value == "green")
                        scancolor = GREEN;
                    else if(tok.value == "yellow")
                        scancolor = YELLOW;
                    else if(tok.value == "blue")
                        scancolor = BLUE;
                    else if(tok.value == "magenta")
                        scancolor = MAGENTA;
                    else if(tok.value == "cyan")
                        scancolor = CYAN;
                    else if(tok.value == "dim")
                        scanattrib = DIM;
                    else if(tok.value == "underline")
                        scanattrib = UNDERLINE;
                    else if(tok.value == "bright")
                        scanattrib = BRIGHT;
                    cout << term_cc(scancolor, DEFAULT_COLOR, scanattrib);

                }else if(tags.top() == tok.value.substr(1)){
                    tags.pop();
                    //THIS IS WHERE THE END TAGS WOULD BE PROCESSED.
                }

            break;
            case IDENT:
                cout << tok.value << " ";
            break;
            case ERRTOK:
                cout << "Syntax Error: " << tok.value;
                noerror = false;
            break;
        }
    }

} 
```

以及下面正在实现的功能。

```
std::string term_cc(term_colors_t fg=DEFAULT_COLOR, 
                term_colors_t bg=DEFAULT_COLOR, 
                term_attrib_t attr=DEFAULT_ATTRIB);

std::string term_bg(term_colors_t bg=DEFAULT_COLOR);
std::string term_fg(term_colors_t fg=DEFAULT_COLOR);
std::string term_attrib(term_attrib_t attrib=DEFAULT_ATTRIB);
std::string term_clear(); 
```

我曾尝试在 else 循环中使用堆栈命令，但在运行时收到分段错误。

我知道我要问的内容相对模糊，但我使用终端转义命令和枚举类型来模拟终端读取 HTML 的方式。

```
enum term_attrib_t {
DEFAULT_ATTRIB = '0',
BRIGHT    = '1',
DIM       = '2',
UNDERLINE = '4',
BLINK     = '5',
REVERSE   = '7',
HIDDEN    = '8'
};

// the colors, background or foreground
enum term_colors_t {
BLACK   = '0',
RED     = '1',
GREEN   = '2',
YELLOW  = '3',
BLUE    = '4',
MAGENTA = '5',
CYAN    = '6',
WHITE   = '7',
DEFAULT_COLOR = '9'
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:12:30.993

您的文件看起来更像是 XML 文件而不是 HTML。任何 HTML 文件的 Html 解析器都非常复杂。您不会在任何合理的时间内找到它，也不会自己编写它。

我建议您浏览 Internet 以获取 XML 阅读器。有几十个。最后我有我自己的，我可以大体上分享。

# javascript - Javascript 优化与 C 优化相比如何

> ID：12612508
> 
> 赞同：0
> 
> 时间：2012-09-27T00:47:46.927
> 
> 标签：javascript, c, optimization

我目前在低级 C 课程中，但我将 Javascript 编程为我的工作。

到目前为止，这是我的书所涉及的几个 C 优化/问题领域（刚开始，所以我没有太多）：

*   过程开销（恢复寄存器、创建堆栈等）
*   有时创建临时变量而不是在循环中读取/写入内存。

此外，可以花多少时间“优化”Javascript？C 被编译为机器代码，并且可以花费更多时间来编译可执行文件。一个典型的 JS 编译器优化花费了多少时间？

Javascript 是一种比 C 更高级别的语言，因此我实际上并不“知道”下面发生了什么。我应该担心哪些优化？我现在在 C 中学习的内容是否也适用于 Javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:12:07.403

Javascript 和 C 有如此完全不同的表达方式，我怀疑甚至可以比较优化技术。

对于这篇文章，我将只看程序员可以进行的优化：

**C：**

*   选择最合适的数据类型。(int/long/float/double)
*   位域和字边界对齐。
*   使用`malloc`和选择何时释放内存以及何时重用它。
*   中间计算

**Javascript：**

*   避免在需要时创建无意义的对象。对象重用
*   中间计算
*   避免过于频繁地刷新 DOM
*   将大量未使用的引用设置为`null`

就像一个简单的例子。这两者真的是天壤之别，所以我必须将优化技术简化为：

*   重用你能做的
*   不要做你不需要做的事情。
*   如果你做了一些计算成本很高的事情并且你再次需要它——保存它。
*   **选择合适的算法。**

就我而言，列表中的最后一项是任何编码人员都可以学习如何做的最重要的优化。

*   如果您有更好的分类可以使用，请不要使用[BogoSort 。](http://en.wikipedia.org/wiki/Bogosort)（提示，你会的。）
*   看看你的标准库是否有一个快速的方法来做你想做的事情。在你证明你的旧轮子不起作用之前，不要重新发明轮子。
*   在分析表明值得付出努力之前，不要太担心进行微优化。

Disclaimer: Yes, I know the old adage of 'Premature optimization is the root of all evil.' Choosing a smart, or at the very least, not terribly dumb way to solve a problem is **not** premature..

# office365 - Office 2013 应用程序：如何在 Excel 2013 中为任务窗格应用程序设置单元格样式

> ID：12612513
> 
> 赞同：0
> 
> 时间：2012-09-27T00:48:30.443
> 
> 标签：office365, office-2013

我是第一次编写 Microsoft excel 任务窗格应用程序。我了解 Microsoft 为绑定到不同单元格而创建的 JavaScript API。

我在 JavaScript API 中看不到任何允许您执行常见功能的内容，例如：

1.  更改活动工作表
2.  创建新工作表
3.  更改单元格颜色、字体、大小、边框等。

我想知道如何完成这些功能......我是否必须将 VB 文件合并到我的应用程序中，如果是，如何？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:38:32.030

你是对的。

创建新工作表、更改格式应该留给用户，或者您可以为他们提供一个工作簿，该工作簿将代表带有样式的模板布局。

关于更改活动工作表，您可能不需要这样做。API 提供了绑定，使您能够附加到工作簿中任何位置的单元格、矩阵和表格，这些提供了与数据的双向绑定。

如果您描述您设想的场景，我可以尝试提供一些指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T12:35:15.330

您仍然无法创建新工作表，但您现在可以设置单元格格式。

这是一个示例格式函数。
函数 Format1() { var tableData = new Office.TableData(); Office.select("bindings#MyTableXXX").setFormatsAsync( [

```
 //row 1
                { cells: { row: 0, column: 2 }, format: { alignHorizontal: "right", fontSize: 15 } },

                //row 2
                { cells: { row: 1, column: 0 }, format: { numberFormat: "dd-mmm-yy", fontStyle: "bold" } }, 
                { cells: { row: 1, column: 1 }, format: { fontColor: "red", fontStyle: "bold", numberFormat: "#,###.00", borderColor: "blue" } },

                //row 3
                { cells: { row: 2 }, format: { height: 30 } },

                //Whole table: 'Office.Table.All', 'Office.Table.Data' (no headers) and 'Office.Table.Headers'
                { cells: Office.Table.All, format: { borderStyle: "dotted" } },

                ],
        function (asyncResult) {

            //NOW DO OUTPUT OR ERROR - add your own output method here
            if (asyncResult.status === "failed") {
                writeToPage('Error Format1: ' + asyncResult.error.message, 3);
            }
            else {
                writeToPage('Table cell formats changed', 1);
            }
        });
} 
```

有关详细信息，您可以查看[http://microsoft-office-add-ins.com](http://microsoft-office-add-ins.com)

# c# - 行为不一致的文件上传按钮

> ID：12612514
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:48:37.527
> 
> 标签：c#, android, .net, file-upload, webview

我有一个注册页面，上面有一个文件上传按钮。这是 C# 中的 aspx 页面。

当我在浏览器中运行它时，它工作正常。当我在 android 应用程序的 web 视图中运行它时，它不会在你的 android 手机中启动文件菜单。当我在我的 android 手机上的浏览器中运行该页面时，它会在我的手机上启动文件菜单。

我如何让它在网络视图中工作。

我的asp标签。

```
<asp:FileUpload ID="FileUpload1" runat="server" Height="30px" Width="217px" /> 
```

我的安卓网页视图

```
case R.id.register:            
mWebView2 = (WebView) findViewById(R.id.webview);    
mWebView2.getSettings().setJavaScriptEnabled(true);    
mWebView2.loadUrl("www.mysite.com/AndroidAddMember.aspx");
mWebView2.setWebViewClient(new HelloWebViewClient());           
return true; 
```

我试图实现您提供的代码。我现在在 FILECHOOSER_RESULTCODE 上遇到错误。错误是 FILECHOOSER_RESULTCODE 无法解析为变量。

```
case R.id.register:            
        //mWebView2 = (WebView) findViewById(R.id.webview);    
        //mWebView2.getSettings().setJavaScriptEnabled(true);    
        //mWebView2.loadUrl("http://www.bangmeornot.com/AndroidAddMember.aspx");
        //mWebView2.setWebViewClient(new HelloWebViewClient());   
        mWebView2.setWebChromeClient(new WebChromeClient()   
        {   
            //The undocumented magic method override   
            //Eclipse will swear at you if you try to put @Override here   
            public void openFileChooser(ValueCallback<URL> uploadMsg) {   

            ValueCallback<URL> mUploadMessage = uploadMsg;   
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);   
            i.addCategory(Intent.CATEGORY_OPENABLE);   
            i.setType("image/*");   
            BangMeorNot.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);        
            }   
        });   

        return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:08:40.710

显然，股票浏览器[使用未记录的方法](http://m0s-programming.blogspot.com/2011/02/file-upload-in-through-webview-on.html)来完成文件上传。要在您的应用中启用此功能，您必须执行以下操作：

```
mWebView2.setWebChromeClient(new WebChromeClient()  
{  
    //The undocumented magic method override  
    //Eclipse will swear at you if you try to put @Override here  
    public void openFileChooser(ValueCallback<Uri> uploadMsg) {  

    mUploadMessage = uploadMsg;  
    Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
    i.addCategory(Intent.CATEGORY_OPENABLE);  
    i.setType("image/*");  
    MyAwesomeActivity.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);       
    }  
}); 
```

注意：此函数的确切参数在不同版本的 Android 中有所变化。对于适用于所有 Android 版本的解决方案，请查看[此问题，或尝试使用](https://stackoverflow.com/questions/5907369/file-upload-in-webview)[此答案](https://stackoverflow.com/a/12746435/663469)中列出的参数。

# sql - 如何在 SQL Server 中的值列表中找到匹配项，向下舍入到最接近的匹配项

> ID：12612521
> 
> 赞同：0
> 
> 时间：2012-09-27T00:49:14.353
> 
> 标签：sql, sql-server

我知道 SQL Server 中的 ABS 和 Round 函数，但我相信我的问题有点不同，我不确定如何使用它们来达到预期的结果。

假设我有一个数字：8000

我有一个查询返回这个数字列表：0、5000、10000、15000

如果我在这个列表中使用 ABS 函数，例如

```
DECLARE @target as INT
SET @target = 8000
SELECT TOP(1) @result AS Number
FROM dbo.Numbers
ORDER BY ABS(Number - @target) 
```

我得到10000

这是预期的

但是我怎样才能让这个返回 5000 即我总是得到四舍五入的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:54:11.393

理解你的问题意味着你想要最接近的匹配而不需要过去：

添加一个`WHERE Number <= @target`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T00:58:58.003

试试这个：

```
...
WHERE Number <= @target
ORDER BY Number DESC 
```

我们只需得到`ORDER BY Number DESC`不大于@target ( ) 的第一个数字 ( `WHERE Number <= @target`)。

`ABS`在这方面失去`ORDER BY`的好处是 DBMS 现在应该能够使用索引`Number`（如果有的话）。

# iphone - 如何将 iOS 上的文件存储在不同的 temp/catch 文件夹中

> ID：12612523
> 
> 赞同：1
> 
> 时间：2012-09-27T00:49:21.480
> 
> 标签：iphone, ios, xcode, cocoa-touch

我正在尝试从服务器下载消息并将其存储在 iPhoine Temp/catch 文件夹中，如下所示：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *cacheDirectory = [paths objectAtIndex:0];
    return cacheDirectory; 
```

但同时我在解压缩消息时遇到问题，它会覆盖数据库中的同名图像并在所有消息中显示相同的图像我的问题是如何将每个文件存储在 iOS temp/catch 文件系统中自己的文件夹中，以便相同名称图像不会被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:04:21.883

将目录附加到您的 cacheDirectory：

[cacheDirector stringByAppendingPathComponent:@"directoryName"];

您可以在其中存储单独的电子邮件。我还将文件 URL 散列为文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:02:51.710

附加到 cacheDirectory `"/filename_dir`" 他们附加`filename`并存储在那里。

希望能帮助到你

# matlab - 在 MatLab 中过滤噪声

> ID：12612528
> 
> 赞同：3
> 
> 时间：2012-09-27T00:49:47.123
> 
> 标签：matlab, filter, noise-reduction

您好我正在尝试使用 MatLab 过滤包含 4 个对象的图像。我的第一张图像有一个黑色背景和白色物体，所以我很清楚通过使用 BW 标签找到这些大的白色部分并将它们与图像分离来过滤掉每个图像。

下一张图片虽然有噪点。现在我有一张白线穿过我的对象的图像，它们现在实际上是相互连接的。如何在 MatLab 中过滤掉这些行？椒盐噪声怎么样？是否有 MatLab 函数可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:27:20.987

可以通过多种方式过滤噪声。典型的噪声过滤过程将是阈值>中值过滤>模糊>阈值。然而，关于噪声类型的信息对于适当的噪声过滤可能非常重要。例如，由于您的图像中有线条，您可以尝试使用[霍夫变换](http://www.mathworks.com/help/images/ref/hough.html)来检测它们并将它们从游戏中取出（或[houghlines](http://www.mathworks.com/help/images/ref/houghlines.html)）。另一种方法可以是实施[RANSAC](https://en.wikipedia.org/wiki/Ransac)。对于椒盐噪声类型，应该使用具有适当窗口大小的[medfilt2](http://www.mathworks.com/help/images/ref/medfilt2.html)来捕获噪声特征（例如 3x3 窗口将很好地处理 1 像素大的噪声波动......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:32:37.427

如果您可以忍受稍微扭曲对象，您可以使用带有一点对比度拉伸的[闭合（形态）过滤器。](http://en.wikipedia.org/wiki/Mathematical_morphology#Closing)您将需要图像处理工具箱，但这是总体思路。

*   模糊以消除线条，否则关闭过滤器将删除您的对象。您可以使用**fspecial**创建一个高斯过滤器并使用**imfilter**来应用它
*   使用**imclose**将关闭过滤器应用于图像，其蒙版大于您的噪声，但小于对象块（我在示例中使用了 3x3 菱形）。
*   使用**im2bw**对图像设置阈值，以便每个像素都变成纯黑色或纯白色

我附上了一个我必须为学校项目做的例子。在我的例子中，背景是白色的，物体是黑色的，我在腐蚀和膨胀之间伸展。侵蚀后你看不到灰色，但它就在那里（因此有必要进行阈值处理）。

您当然可以直接进行关闭（腐蚀后膨胀），然后进行阈值。请注意此过滤如何扭曲对象。

仅供参考，通常使用移动平均滤波器清除椒盐噪声，但这会留下图像灰度。对于我的项目，我需要一个纯黑白（用于 BW 标签），并且形态过滤器可以很好地完全消除噪音。

![形态过滤示例](../Images/92519ef05388eaeae675ee5f9284867a.png)

# c - 通过套接字发送哈希表的内容

> ID：12612530
> 
> 赞同：0
> 
> 时间：2012-09-27T00:49:58.790
> 
> 标签：c, sockets, tcp, hashtable

使用带有套接字的 TCP 服务器/客户端设置，我将如何将诸如哈希表的内容从服务器发送到客户端？

我正在寻找的格式是`IP address: content`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:24:14.633

我建议你用[msgpack](http://msgpack.org/)二进制序列化格式打包你的哈希表，通过你的套接字发送它并在另一端解压它。

例如在 Ruby 中（这只是一个示例 - msgpack 可用于[许多其他语言](http://msgpack.org/#crosslang)！）这将给出：

```
require "msgpack"
> msg = {"192.0.2.1"=>"foo", "192.0.2.2"=>"bar"}.to_msgpack
 => "\x82\xA9192.0.2.1\xA3foo\xA9192.0.2.2\xA3bar"
> msg.bytesize
 => 29 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:25:21.727

您是否需要以相同的顺序重建另一端的表？如果是这样，您需要发送数组位置。如果没有，您可以按照您喜欢的任何顺序发送所有字符串，客户端可以插入。

最简单的方法是以文本模式发送，尽管这通常会在客户端增加一点工作。就个人而言，我会发送表格大小以及预期的字符串数量，并每行发送一个条目：

```
117 5
puppy
kitten
cub
joey
duckling 
```

如果我也需要数组位置，那么以文本形式发送它们也没有错（但您可能更喜欢二进制）：

```
117 5
8 puppy
42 kitten
57 cub
101 joey
105 duckling 
```

# php - 根据表单选项生成输出

> ID：12612533
> 
> 赞同：0
> 
> 时间：2012-09-27T00:50:19.383
> 
> 标签：php, javascript, mysql, ajax, forms

我无情地搜索了这个，我找不到我的困惑的答案 - 我认为问题是我不确定要搜索什么！无论如何，我的问题是这个......

**场景：** 想象一下，为了争论，有一个食谱数据库，你想让用户能够根据各种标准生成食谱建议列表。

以网页的形式，我希望这是左侧的一系列下拉框。用户将从下拉框中选择他们的过滤器选项，并在按下提交按钮后，将显示符合标准的食谱列表。

因此，他们可以，例如选择“膳食类型”、“卡路里”、“烹饪时间”，然后（在点击提交后）取回符合要求的食谱建议列表。

（理想情况下，它们会出现而不需要重新加载页面，并且会包含在滑块中进行浏览，但如果我对底层部分进行排序，我可能会破解那部分......）

**要求：** 我只需要知道 - 在最高级别 - 我将使用哪些技术来实现这一点（以及它们如何协同工作的过程）。

我猜我需要一个带有带有标准标记的食谱的 MySQL dB，然后使用表单和 php 从数据库中提取。它是否正确？！

似乎是一个常见的要求，但我找不到关于如何实现这一点的好读物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:59:38.673

看看 PHP guide to prepare statements。您将基本上针对数据所在的表编写一个 select 语句，其中 select 语句的 where 子句是用户在表单中选择的参数。

[PHP 准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)

您要坚持使用准备好的语句的原因是，它们通常更安全地防止通过表单使用 SQL 注入对您的站点进行攻击。

对于端到端解决方案，您的前端将提交到一个 PHP 页面，然后该页面将处理用户指定的标准，将这些标准转换为准备好的语句，该语句将从您的表中查找数据。表本身将需要具有与条件相对应的列。这更多地涉及到数据库设计，这是一个更大的主题，在这里要讨论，但是有很多指南可以解决这个问题。

你真的想把解决方案分解成子组件，然后找到各种指南来解决这些部分。祝你好运，希望这会有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:56:41.390

过程：

1) 用户进行选择并点击提交按钮。这将向您将收集这些信息的 PHP 页面（可以是同一个 PHP 页面）发起 HTTP POST。

2）用PHP打开一个MySql数据库连接。您需要了解 SQL 才能从 MySql DB 中提取数据。取决于您的数据库架构的布局方式。

3）一旦您拉出此信息，将它们显示为用户可以单击的复选框。

这是最低限度的。

如果你想更花哨，你可以使用 JQuery ajax post (http://api.jquery.com/jQuery.post/) 这样页面就不会刷新。

祝你好运，我已经饿了。哈哈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:21:34.393

When the user selects options in your form and submits it, this will run a PHP script on the server. The server retrieves the option parameters, and uses them to construct a SQL query. For instance, the script might contain something like:

```
$criteria = array();
if (isset($_POST['calories'])) {
    $criteria[] = 'calories < '.$_POST['calories']);
}
if (isset($_POST['time'])) {
    $criteria[] = 'cooking_time < '.$_POST['time']);
}
...
$query = 'SELECT * FROM recipes WHERE '.implode(' AND ', $criteria); 
```

You use a library like mysqli or PDO to perform the query and get the results. Then you loop through the results, and format them into an HTML table which will be returned to the user as the resulting web page.

Or the PHP script could return the results as JSON data. Your web page could use AJAX to get this data from the server, then use JavaScript to format it into a table.

# c - 测量 C 中缓存大小和缓存行大小的影响

> ID：12612536
> 
> 赞同：2
> 
> 时间：2012-09-27T00:51:03.617
> 
> 标签：c, caching

我刚刚[在这里](http://igoro.com/archive/gallery-of-processor-cache-effects/)阅读了一篇博文并尝试做类似的事情，这是我检查示例 1 和 2 中的内容的代码：

```
int doSomething(long numLoop,int cacheSize){
    long k;
    int arr[1000000];
    for(k=0;k<numLoop;k++){
        int i;
        for  (i = 0; i < 1000000; i+=cacheSize) arr[i] = arr[i];
    }
} 
```

如博文所述，doSomething(1000,2) 和 doSomething(1000,1) 的执行时间应该差不多，但我分别得到了 2.1s 和 4.3s。谁能帮我解释一下？谢谢你。

更新 1：我刚刚将数组的大小增加到了 100 倍

```
int doSomething(long numLoop,int cacheSize){
    long k;
    int * buffer;
    buffer = (int*) malloc (100000000 * sizeof(int));
    for(k=0;k<numLoop;k++){
        int i;
        for  (i = 0; i < 100000000; i+=cacheSize) buffer[i] = buffer[i];
    }
} 
```

不幸的是，doSomething(10,2) 和 doSomething(10,1) 的执行时间仍然相差很大：3.02s 和 5.65s。任何人都可以在你的机器上测试这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:06:39.093

使用 doSomething(1000, 2)，您正在执行的内部循环是使用 doSomething(1000,1) 时计数的一半。

您的内部循环按 cacheSize 递增，因此值为 2 的迭代次数仅为值为 1 的一半。该数组的大小约为 4MB，这是典型的虚拟内存页面大小。

实际上我有点惊讶的是，一个好的编译器不会优化这个循环，因为没有变量变化。这可能是问题的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:16:33.923

您的 4M 数组大小不够大。整个数组适合缓存（并且在第一个`k`循环之后在缓存中），因此时序由指令执行决定。如果您制作`arr`的缓存大小远大于缓存大小，您将开始看到预期的效果。

（当你`arr`比缓存更大时，你会看到一个额外的效果：运行时间应该随着`arr`大小线性增加，直到你超过缓存，当你会看到性能拐点并且它会突然变得更糟并且运行时间将以新的线性比例增加)

编辑：我尝试了您的第二个版本，并进行了以下更改：

1.  更改以`volatile int *buffer`确保`buffer[i] = buffer[i]`不会被优化掉。
2.  编译`-O2`以确保循环得到充分优化，以防止循环开销占主导地位。

当我尝试得到几乎相同的时间时：

```
kronos /tmp $ time ./dos 2
./dos 2  1.65s user 0.29s system 99% cpu 1.947 total
kronos /tmp $ time ./dos 1
./dos 1  1.68s user 0.25s system 99% cpu 1.926 total 
```

在这里，您可以看到将步幅设为两个完整缓存行的效果：

```
kronos /tmp $ time ./dos 16
./dos 16  1.65s user 0.28s system 99% cpu 1.926 total
kronos /tmp $ time ./dos 32
./dos 32  1.06s user 0.30s system 99% cpu 1.356 total 
```

# c# - 如何从其他类获取事件？

> ID：12612542
> 
> 赞同：0
> 
> 时间：2012-09-27T00:52:10.033
> 
> 标签：c#, user-interface, event-handling

在课程之间传递事件的最佳方式是什么。问题是：我有一个连接类，当连接特定的 USB 设备时，我希望作为另一个类的 GUI（它将配置设备）有一个“已连接”标志，并且当它断开连接时有一个“断开”标志。我正在考虑创建一个新的eventHandler，并将this eventHandler添加到UI控制器类，连接类将“触发”事件，这是正确的，还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:03:23.500

有两种方法可以解决这个问题。一种是在连接状态更改时触发一个[事件。](http://msdn.microsoft.com/en-us/library/8627sbea%28v=vs.110%29.aspx)GUI 可以监听事件并适当地更新其显示。这是一个相对简单的模型，并且在不同的库中得到很好的支持，因为事件是 C# 语言的一部分。

第二种方式，使用 Windows Presentation Foundation 或类似的库，是通过[数据绑定](http://msdn.microsoft.com/en-us/library/ms750612.aspx)。UI 控件“绑定”到连接类，当连接类的属性更新时，UI 会自动更新。这设置起来稍微复杂一些，并且是特定于库的（链接是针对 WPF 的）。然而，它是一个更加强大和灵活的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:24:53.920

您也可以尝试使用`EventAggregator`Microsoft Prism 的。我更喜欢它，因为它高度解耦并且相当轻量级。

更多关于棱镜和`EventAggregator`：

[http://msdn.microsoft.com/en-us/library/ff921122(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff921122(v=pandp.20).aspx)

# asp.net-mvc-3 - 如何删除子操作的输出缓存（MVC3）

> ID：12612545
> 
> 赞同：3
> 
> 时间：2012-09-27T00:53:03.390
> 
> 标签：asp.net-mvc-3

我试试这段代码

```
public ActionResult RemoveCache(Guid product_Id)  
{  
    var url = Url.Action("ProductPreview", "Common", new { product_Id = product_Id });  
    HttpResponse.RemoveOutputCacheItem(url);  
    return RedirectToAction("Index");  
} 
```

删除子操作的输出缓存，但它不起作用。请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:20:29.327

使用 MVCDonutCaching nuget 包：[http ://mvcdonutcaching.codeplex.com/](http://mvcdonutcaching.codeplex.com/)

请参阅标题为“使用”的部分：http: [//www.devtrends.co.uk/blog/donut-output-caching-in-asp.net-mvc-3](http://www.devtrends.co.uk/blog/donut-output-caching-in-asp.net-mvc-3)

用于从缓存中删除项目。有 Html.Action 重载带有您添加的参数以强制甜甜圈洞（因此排除缓存）

```
@Html.Action("Login", "Account", true)
```

上面的 true 意味着“不要缓存这个子动作 - 创建一个甜甜圈洞”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-10T16:57:10.937

如果接受清除所有 chid 操作的输出缓存，这是一种方法：

```
OutputCacheAttribute.ChildActionCache = new MemoryCache("NewRandomStringNameToClearTheCache"); 
```

`NewRandomStringNameToClearTheCache`应该是一个随机字符串。

来源参考： [http ://dotnet.dzone.com/articles/programmatically-clearing-0](http://dotnet.dzone.com/articles/programmatically-clearing-0)

# sql - “SELECT .. IN” pgsql 查询的限制

> ID：12612549
> 
> 赞同：0
> 
> 时间：2012-09-27T00:53:25.587
> 
> 标签：sql, postgresql

我有一个包含大约 14000 个 objectID 的 .csv 文件。我的目标是检索与这些 objectID 关联的某些字段。到目前为止，我所做的是将所有 objectID 连接到一个逗号分隔的列表中，我将其附加到此查询的末尾：

```
SELECT objectName, objectType FROM objectTable WHERE objectID IN 1001, 1002, 1003... 
```

然而，这非常（非常）慢，因为我的数据库有大约 1600 万个唯一的 objectID。有没有更好的方法来构建这样的查询？我必须分批运行吗？（我也尝试过，但速度慢得令人难以忍受）还是我的整个方法都错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:59:53.420

将 objectID 加载到表中，然后加入该表。

```
SELECT objectName, objectType
FROM objectTable INNER JOIN objectids ON (objecttable.objectid = objectids.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:00:00.173

w/ 16m objectIDs，上传查询字符串可能比实际运行它需要更长的时间。

从您的 CSV 文件创建一个表，并预加载所有 objectID。假设您将此表称为“objectIDs”，主行是“id”。现在你可以说：

```
SELECT objectName, objectType FROM objectTable
INNER JOIN objectIDs ON objectIDs.objectID=objectTable.objectID 
```

内连接会自动剔除 objectTable 中所有未连接的东西，并与你的 IDs 表以 1:1 的关系连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:31:00.290

如果您已经有一个包含所有数字的逗号分隔字符串，则可以使用准备好的语句 - 使用您使用的任何客户端的语法。普通 SQL 中的示例：

```
PREPARE myplan (text) AS
    SELECT o.objectname, o.objecttype
    FROM   (SELECT unnest(string_to_array($1, ','))::int AS objectid) x
    JOIN   objecttable o USING (objectid);

EXECUTE myplan('1001, 1002, 1003'); 
```

**或者**，如果您从*数据库服务器上的*有效 CSV 文件开始，创建一个临时表，`COPY`将数据写入其中（[`COPY`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)非常快），然后再`JOIN`写入。

```
CREATE TEMP TABLE tmp_x (objectid int);

COPY tmp_x FROM '/path/to/my/file.csv';

    SELECT o.objectname, o.objecttype
    FROM   tmp_x
    JOIN   objecttable o USING (objectid);

DROP TABLE tmp_x;   -- optional; dropped automatically at end of session 
```

如果您的文件在另一台机器上，请改用[`psql`'s 元命令`\copy`](http://www.postgresql.org/docs/current/interactive/app-psql.html)。

你肯定有索引`objecttable.objectid`吗？这很关键。

# java - SpringMvc 实例化 Bean - 单例

> ID：12612552
> 
> 赞同：-1
> 
> 时间：2012-09-27T00:54:03.787
> 
> 标签：java, spring-mvc, singleton, nullpointerexception, factory-pattern

在下面提到的代码中，我创建了这个，因为我得到了 java.lang.NullPointerException，请参阅下面的错误日志。当我实现它时，它已修复并且运行良好。然而，这里的一位成员告诉我——

*“您正在为每次调用 getOfficerRegistrationValidation 创建新的 bean。这包括重新创建数据库对象，这些对象非常昂贵，并且如果某些对象应该只创建一次（单例），则可能会产生错误。您应该找到一种方法来使 OfficerRegistrationValidation 可重用并且线程安全，这样您就可以只使用其中一个并将其注入到您想要仅使用 IoC 的任何位置”*

我认为他是对的，有人可以告诉我最好的方法是什么，而不必再次实例化我所有的 bean。我只想实例化某些 bean 而不会遇到这个问题。

```
public final class BeanFactory() {

    private static ClassPathXmlApplicationContext context;

    private static ClassPathXmlApplicationContext getContext() {
        if (context== null) {
            context = new ClassPathXmlApplicationContext("applicationContext.xml");
        }
        return context;
    }

    public static OfficerRegistrationValidation getOfficerRegistrationValidation() {
        return (OfficerRegistrationValidation) getContext().getBean("officerRegistrationValidation");
    }
} 
```

在控制器中进行如下调用：`BeanFactory.getOfficerRegistrationValidation().validate(....)

**错误日志：**

```
java.lang.NullPointerException
    at com.crimetrack.service.OfficerRegistrationValidation.validate(OfficerRegistrationValidation.java:51)
    at org.springframework.validation.DataBinder.validate(DataBinder.java:725)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:815)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:367)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:20:35.233

我将冒险猜测你在问什么（因为你的问题没有提供你使用 beanfactory 的动机，也没有提供足够的代码来提供完整的图片）......

Spring bean 默认实例化为单例。因此，您应该能够配置 Spring 以`OfficerRegistrationValidation`使用 XML 或注释 ( `@Component`) 创建对象，然后使用注释将其注入到您的控制器中`@Inject`。

注释是要走的路 - 只需确保您的 Spring 配置 XML ( `applicationContext.xml`) 中有以下内容：

```
<context:component-scan base-package="com.acme.project" />
<mvc:annotation-driven /> 
```

然后只需将`@Component`注释添加到您的`OfficerRegistrationValidation`类的类声明中：

```
@Component
public class OfficerRegistrationValidation {
    // ...
} 
```

然后在您的控制器中，为您的 OfficerRegistrationValidation 声明一个字段并对其进行注释：

```
@Controller
public class MyController {
    @Inject
    private OfficerRegistrationValidation officerRegistrationValidation;
    // ...
} 
```

现在您将可以访问`OfficerRegistrationValidation`控制器中的单例 bean - 只需要大约 4 行代码！

# html - 多个段落不环绕 IE7 中的左浮动元素

> ID：12612556
> 
> 赞同：1
> 
> 时间：2012-09-27T00:54:13.193
> 
> 标签：html, css, internet-explorer-7, css-float

我在一个向左浮动的容器中有一个图像和一个标题，并且我有多个段落应该环绕这些段落。我已经完成了基本思想的 jsfiddle，它适用于我检查过的所有地方，除了 IE7 及以下版本。而且，当然，客户端使用 IE7。

这是一件很初级的事情。快把我逼疯了！我错过了什么。提前谢谢了！！！

[http://jsfiddle.net/BALUn/](http://jsfiddle.net/BALUn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:46:15.067

`p.main`尝试为to设置样式规则`width: auto;`，看看是否有帮助。

# playframework-2.0 - 我无法导入securesocial.core.java.BaseUserService；在游戏框架中安装securesocial时

> ID：12612560
> 
> 赞同：0
> 
> 时间：2012-09-27T00:54:34.797
> 
> 标签：playframework-2.0, securesocial

我做了以下事情：

1.  我已将 module-code/ 的内容复制到我的应用根目录中的 modules/securesocial/ 文件夹中。
2.  我已将 Build.scala 更新为以下内容：

    ```
    import sbt._
    import Keys._
    import PlayProject._

    object ApplicationBuild extends Build {

    val appName         = "XXXXXX"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
    )

    val ssDependencies = Seq(
      // Add your project dependencies here,
      "com.typesafe" %% "play-plugins-util" % "2.0.1",
      "org.mindrot" % "jbcrypt" % "0.3m"
    )

    val secureSocial = PlayProject(
        "securesocial", appVersion, ssDependencies, mainLang = SCALA, path = file("modules/securesocial")
    ).settings(
      resolvers ++= Seq(
        "jBCrypt Repository" at "http://repo1.maven.org/maven2/org/",
        "Typesafe Repository" at "http://repo.typesafe.com/typesafe/releases/"
      )
    )

    // Only compile the bootstrap bootstrap.less file and any other *.less file in the stylesheets directory
    def customLessEntryPoints(base: File): PathFinder = (
        (base / "app" / "assets" / "stylesheets" / "bootstrap" * "bootstrap.less") +++
        (base / "app" / "assets" / "stylesheets" / "bootstrap" * "responsive.less") +++
        (base / "app" / "assets" / "stylesheets" / "bootstrap" * "tooltip.less") +++
        (base / "app" / "assets" / "stylesheets" * "*.less")
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here
      lessEntryPoints <<= baseDirectory(customLessEntryPoints)
    ).dependsOn(secureSocial).aggregate(secureSocial) 
    ```

3.  我已添加`include "securesocial.conf"`到 application.conf。

我不知道为什么它仍然给我一个错误:(。我得到的错误是：

未找到：值securesocial

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:10:23.230

该模块现在可作为可下载的依赖项使用。如果您将 Build.scala 文件更改为类似于下面的示例，它应该可以工作：

```
object ApplicationBuild extends Build {
val appName         = "myapp"
val appVersion      = "1.0-SNAPSHOT"

val appDependencies = Seq(
    "securesocial" % "securesocial_2.9.1" % "2.0.6"
)
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  resolvers += Resolver.url("SecureSocial Repository", url("http://securesocial.ws/repository/releases/"))(Resolver.ivyStylePatterns)
)
} 
```

[项目用户指南](http://securesocial.ws/guide/overview.html)上有关于如何安装它的详细说明。

# java - 通过 ImageMagick 流式传输的 JPEG 文件与原始文件的大小不同

> ID：12612561
> 
> 赞同：3
> 
> 时间：2012-09-27T00:54:35.907
> 
> 标签：java, imagemagick, inputstream, jpeg, im4java

我正在使用 ImageMagick 进行一些图像处理。我正在尝试从返回输入流的服务中流式传输文件并即时进行图像处理，而不会让文件撞到 HDD。

当我使用 InputStream、OutputStream、FileOutputStream 类将输入流转换为文件时，生成的文件大小与存储在服务上的文件相同（初始文件大小为 9 MB）。这可以。当我通过 ImageMagick 运行输入流时，即使我没有进行任何操作，生成的文件也会更小（2 MB）。我不确定我做错了什么，或者 ImageMagick 是否在我不知道的情况下对文件做了什么。这是我的代码片段：

```
IMOperation op = new IMOperation();
ConvertCmd convert = new ConvertCmd();

InputStream is = s.getFileFromBucket(BUCKET, filename);
op.addImage("-");  // read from stdin
op.addImage(outfile);
Pipe pipeIn = new Pipe (is,null);
convert.setInputProvider(pipeIn);
convert.run(op);
is.close(); 
```

所以我希望文件的大小与传入的大小相同，因为我还没有对它做任何事情，但它更小。

有人建议该服务可能在流式传输时中途死亡，这就是文件如此之小的原因。我不认为是这种情况，因为我通过 ImageMagick 运行的每个测试，输出文件大小都是相同的（2 MB）。此外，当我使用查看器查看生成的文件时，它会毫无问题地显示该文件。最后，当我将输入流转换为文件时，总是会生成一个 9 MB 的文件，并且在查看器中可以正常显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:18:08.200

Jpeg 是一种压缩格式，Imagemagick 会自动进行一些压缩。

见：[http ://www.imagemagick.org/Usage/formats/#jpg](http://www.imagemagick.org/Usage/formats/#jpg)

“随着 JPEG 质量越来越低，图像的大小也越来越小。当用户或源图像格式文件未设置 JPEG 质量时，默认质量设置约为 92%，这是一个非常高质量。”

也许您的输入 Jpeg 是无损的 -> 100%

*编辑：*您可以通过将压缩率设置为 92 来拍摄原始图片并将其保存为 jpeg 并使用任意图像处理程序进行测试。之后只需比较文件大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:38:52.980

您应该按照 romedius 的建议 (+1) 进行操作。

此外，只需运行

```
identify -verbose input.stream  > input.txt
identify -verbose output.stream > output.txt 
```

然后比较两个结果，看看*到底有*什么不同。

# c++ - 以路径/安装/构建独立方式了解资源路径的好方法

> ID：12612569
> 
> 赞同：3
> 
> 时间：2012-09-27T00:55:29.053
> 
> 标签：c++, c, path, convention

在我的 GNU/Linux 环境中，我的软件的所有图形资源都安装在`/usr/share/pixmaps`. 在 Wintendo 中，一切都会进入`C:\Program files\myappname`. 在不同的操作系统中，在其他地方。

什么是最常见的方法、约定、良好实践，以便我可以抽象我的方式来引用我以路径/安装/构建独立方式在我的代码中打开的文件？基本上是一种引用资源路径的可移植方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:07:25.983

创建`ifelse`OS 的预处理器链定义`#defines`映射到检索正确路径的真实函数调用的函数名称：

```
#if _WIN32
#define GetResourcesFolderString GetResourcesFolderStringW
#elif ((macintosh) || (Macintosh) || (__APPLE__ & __MACH__))
#define GetResourcesFolderString GetResourcesFolderStringM
#elif __gnu_linux__
#define GetResourcesFolderString GetResourcesFolderStringU
//...and so on
#endif

//...Later...

std::string GetResourcesFolderStringW() {
    return "C:/Program files/myappname/"
}
std::string GetResourcesFolderStringM() {
    return "Mac folder path here";
}
std::string GetResourcesFolderStringU() {
    return "/usr/share/pixmaps/";
} 
```

这样你只调用一个函数，并且根据你的构建目标调用正确的函数而不改变代码。

硬编码路径通常不是一个好主意，此处仅用于说明目的。您可能应该设置一个配置文件或类似文件，以允许各个系统具有单独的安装路径并且仍然能够找到资源。

# javascript - 使用 capybara/selenium 访问 javascript 文件中的函数

> ID：12612571
> 
> 赞同：2
> 
> 时间：2012-09-27T00:55:37.717
> 
> 标签：javascript, ruby, selenium, capybara

我对整个硒和水豚有点陌生，希望能得到一些指导。我目前正在尝试访问包含在框架集中的 JSP 文件中的函数，但我没有任何运气来解决这个问题。

基本上我去从一个框架导航jsp文件

```
<FRAME name="sideFrame" src="AppMenu.jsp" noresize="yes" scrolling="no" 
```

到该文件中具有以下内容的函数：

```
 <a onclick="nav_swap(this.id)" class="nav" id="view_new_page" href="javascript:submitWithAction('ViewNewPage', 'view_new_page');">View New Page /a> 
```

我已经研究过 xpath 和 inside_frame，但我认为这不会帮助我解决我面临的这个问题。

这就是我目前所拥有的：

```
session.find(:xpath,"//FRAME[@src='AppMenu.jsp']/..").all(:xpath,".//A[@id='view_new_page']/..").click 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:15:28.140

您必须首先为目标 iframe调用[select_frame ，然后在该上下文中使用选择器。](http://selenium-client.rubyforge.org/classes/Selenium/Client/GeneratedDriver.html#M000150)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:24:21.097

嗯。到目前为止，我遇到了获取元素的属性。我为此使用了js。提供的代码示例：

```
public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    } 
```

希望这能给你一些新的想法。

# python - py-postgresql 多线程问题

> ID：12612572
> 
> 赞同：3
> 
> 时间：2012-09-27T00:55:44.590
> 
> 标签：python, multithreading, postgresql, pyramid, py-postgresql

我发现在重负载下，我的金字塔网络应用程序会抛出 py-postgresql 异常，例如`postgresql.exceptions.ProtocolError`. 一些搜索显示，py-postgresql 不是线程安全的，一个连接不能被多个线程同时使用。

我试图建立某种池机制，但我仍然得到 ProtocolErrors :(

我究竟做错了什么？

首先，我创建多个连接对象：

```
 for x in range(num_db_connections):
        self.pool.append(Connection(conn_string,x)) 
```

池中的每个对象都包含`db_lock = threading.Lock()`一个与数据库的连接`self.conn = postgresql.open( conn_string )`

然后我尝试获取连接上的锁定并使用它做一些工作。这段代码可以由多个线程同时执行，但我认为`work`由于锁定，没有两个线程可以同时在一个连接上运行。

```
 time_start = time.time()
    while time.time() - time_start < self.max_db_lock_wait_time:
        for conn in self.pool:
            acquired = conn.db_lock.acquire(False)
            if acquired:
                try:
                        lst = conn.work()
                finally:
                    conn.db_lock.release()
                return lst
        time.sleep(0.05)
    raise Exception('Could not get connection lock in time') 
```

也许我的代码有缺陷，或者我误解了 py-postgresql 的“线程不安全”的性质？请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:32:50.773

你确定你没有在你的锁之外使用游标对象吗？

只是一个建议：不要使用 time.sleep() 和“尝试”锁定，而是使用队列将连接对象从池中弹出/推送到池中。那已经是线程安全的，并且它有一个超时参数。更有效。特别是如果您有很多线程而只有几个连接。（当您需要运行 100 000 个查询时，这些微小的睡眠指令会加起来。所有这些指令都会增加您的响应时间。）

# python - 如何从 Django 视图进行并发 Web 服务调用？

> ID：12612576
> 
> 赞同：0
> 
> 时间：2012-09-27T00:56:00.957
> 
> 标签：python, django, concurrency

> **可能重复：**
> [Python 中的异步 HTTP 调用](https://stackoverflow.com/questions/4962808/asynchronous-http-calls-in-python)

我有一个 Django 视图，它需要从多个 Web 服务中检索搜索结果，将结果混合在一起并呈现它们。我以前从未在 Django 中做过任何多线程。什么是现代、高效、安全的方法？

我对此一无所知，但[gevent](http://www.gevent.org/)似乎是一个合理的选择。我应该用那个吗？它与 Django 配合得好吗？我应该去别处看看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:22:44.253

不确定gevent。最简单的方法是使用线程[*]。这是一个如何在 Python 中使用线程的简单示例：

```
# std lib modules. "Batteries included" FTW.
import threading
import time

thread_result = -1

def ThreadWork():
  global thread_result
  thread_result = 1 + 1
  time.sleep(5)  # phew, I'm tiered after all that addition!

my_thread = threading.Thread(target=ThreadWork)
my_thread.start()  # This will call ThreadWork in the background.
                   # In the mean time, you can do other stuff
y = 2 * 5  # Completely independent calculation.
my_thread.join()  # Wait for the thread to finish doing it's thing.
                  # This should take about 5 seconds,
                  # due to time.sleep being called
print "thread_result * y =", thread_result * y 
```

您可以启动多个线程，让每个线程进行不同的 Web 服务调用，然后加入所有这些线程。一旦所有这些加入调用都返回，结果就出来了，你就可以混合它们了。

更高级的提示：你应该调用加入超时；否则，您的用户可能会无限期地等待您的应用向他们发送响应。更好的是让您在请求到达您的应用程序之前进行这些 Web 服务调用；否则，您的应用程序的响应能力取决于您所依赖的服务。

关于一般线程的警告：小心可以由两个（或更多）不同线程访问的数据。对相同数据的访问需要“同步”。最流行的同步设备是锁，但还有很多其他设备。threading.Lock 实现了一个锁。如果您不注意同步，您可能会在您的应用程序中写入“竞争条件”。众所周知，此类错误很难调试，因为它们无法可靠地重现。

在我的简单示例中，thread_result 在 my_thread 和主线程之间共享。我不需要任何锁，因为主线程直到 my_thread 终止才访问 thread_result。如果我没有调用 my_thread.join，结果有时会是 -10 而不是 20。你自己试试吧。

[*] Python 没有真正的线程，因为并发线程不会同时执行，即使您有空闲内核。但是，您仍然可以获得并发执行；当一个线程被阻塞时，其他线程可以执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:57:55.800

我刚刚很好地解决了这个问题`futures`，[在 3.2 中可用](http://docs.python.org/3.2/library/concurrent.futures.html)并向后[移植到包括 2.x 在内的早期版本](http://pypi.python.org/pypi/futures)。

就我而言，我正在从内部服务中检索结果并对其进行整理：

```
def _getInfo(request,key):
    return urllib2.urlopen(
        'http://{0[SERVER_NAME]}:{0[SERVER_PORT]}'.format(request.META) +
        reverse('my.internal.view', args=(key,))
        , timeout=30)

…

    with futures.ThreadPoolExecutor(max_workers=os.sysconf('SC_NPROCESSORS_ONLN')) as executor:
        futureCalls = dict([ (
            key,executor.submit(getInfo,request,key)
        ) for key in myListOfItems ])
        curInfo = futureCalls[key]
        if curInfo.exception() is not None:
            # "exception calling for info: {0}".format(curInfo.exception())"
        else:
            # Handle the result… 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:52:17.883

gevent 不会帮助您更快地处理任务。在资源占用方面，它比线程更有效。当使用 Django（通常通过 gunicorn）运行 gevent 时，您的 Web 应用程序将能够处理比普通 django wsgi 应用程序更多的并发连接。

**但是**：我认为这与您的问题无关。您想要做的是在一个 Django 视图中处理一项庞大的任务，这通常不是一个好主意。我个人建议您不要在 Django 中为此使用线程或 gevents greenlets。我看到了独立 Python 脚本或守护程序或其他工具的意义，但不适用于 Web。这主要导致不稳定和更多的资源占用。相反，我同意[dokkaebi](https://stackoverflow.com/users/931277/dokkaebi)和 [Andrew Gorcester](https://stackoverflow.com/users/471671/andrew-gorcester)的评论。不过，这两种评论都有所不同，因为这实际上取决于您的任务是什么。

1.  如果您可以将您的任务拆分为许多较小的任务，您可以创建多个视图来处理这些子任务。这些视图可以返回类似于 JSON 的内容，并且可以通过前端的 AJAX 使用。像这样，您可以在页面“进入”时构建页面内容，而用户无需等到整个页面加载完毕。

2.  如果您的任务是一大块，那么最好使用任务队列处理程序。[芹菜浮现](http://celeryproject.org/)在脑海。如果 Celery 太过分了，你可以使用[zeroMQ](http://www.zeromq.org/bindings:python)。这基本上像上面提到的 Andrew 一样工作：您安排任务进行处理并从前端页面轮询后端，直到任务完成（通常也通过 AJAX）。你也可以在这里使用[长轮询之](http://en.wikipedia.org/wiki/Push_technology#Long_polling)类的东西。

# css - CSS Nav未在父项下对齐

> ID：12612579
> 
> 赞同：0
> 
> 时间：2012-09-27T00:57:06.587
> 
> 标签：css, nav

我的导航栏有一个小问题，我无法修复。当我希望它浮动在父级下方时，child1 级别浮动到左侧。

这是我的小提琴[http://jsfiddle.net/rrdsV/](http://jsfiddle.net/rrdsV/)

有两个选项的导航是“页面样式”和“第三方插件”

先感谢您！乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:05:19.850

只需`position: relative`向您的父母申请 -[**演示**](http://jsfiddle.net/rrdsV/1/)

```
#navcontainer ul li {
    display: inline;
    padding-right: 15px;
    position: relative;
    overflow: visible; /* to satisfy 1.8% of IE7 users */
} 
```

# mysql - 具有范围的 MySQL LIKE 不起作用

> ID：12612580
> 
> 赞同：5
> 
> 时间：2012-09-27T00:57:08.053
> 
> 标签：mysql, sql-like

我有一个数据库表*mytable*，其列*名*采用 Varchar 格式，列*date*具有 Datetime 值。我想用按日期分组的某些参数来计算名称。这是我所做的：

```
SELECT
    CAST(t.date AS DATE) AS 'date',
    COUNT(*) AS total,
    SUM(LENGTH(LTRIM(RTRIM(t.name))) > 4 
        AND (LOWER(t.name) LIKE '%[a-z]%')) AS 'n'
FROM
    mytable t
GROUP BY 
    CAST(t.date AS DATE) 
```

这里的范围语法似乎有问题，如果我这样做`LIKE 'a%'`，它确实可以正确计算所有以“a”开头的字段。但是，上面的查询对于 n 返回 0，尽管应该计算所有包含至少一个字母的字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T01:07:18.167

你写：

> *这里的范围语法似乎有问题*

确实如此。MySQL 的 LIKE 运算符（通常是 SQL）[不支持范围表示法](http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html#operator_like)，仅支持简单的通配符。

尝试 MySQL 的非标准[RLIKE](http://dev.mysql.com/doc/refman/5.6/en/regexp.html#operator_regexp)（又名 REGEXP），以获得更全面的模式匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T01:07:55.657

我相信 LIKE 只是用于搜索字符串的一部分，但听起来你想实现一个正则表达式来搜索一个范围。

在这种情况下，请改用 REGEXP。例如（简化）：

```
SELECT * FROM mytable WHERE name REGEXP "[a-z]" 
```

您当前的查询正在寻找一个字面意思为“[az]”的字符串。

更新：

```
SELECT
CAST(t.date AS DATE) AS 'date',
COUNT(*) AS total,
SUM(LENGTH(LTRIM(RTRIM(t.name))) > 4 
    AND (LOWER(t.name) REGEXP '%[a-z]%')) AS 'n'
FROM
mytable t
GROUP BY 
CAST(t.date AS DATE) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T01:11:39.887

您的 LIKE 语句中有正则表达式，它不起作用。您需要使用[RLIKE](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)或[REGEXP](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)。

```
SELECT CAST(t.date AS DATE) AS date,
    COUNT(*) AS total
FROM mytable AS t
WHERE t.name REGEXP '%[a-zA-Z]%' 
GROUP BY CAST(t.date AS DATE)
HAVING SUM(LENGTH(LTRIM(RTRIM(t.name))) > 4 
```

仅供参考，MySQL 的字符串很糟糕，所以你真的应该在插入数据库之前进行修剪。这样，您就不会在每次想要选择时都获得所有疯狂的开销。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T01:07:12.167

我相信您想使用 WHERE REGEXP '^[az]$' 而不是 LIKE。

# mongodb - 更新mongodb中子数组的子元素

> ID：12612581
> 
> 赞同：13
> 
> 时间：2012-09-27T00:57:16.620
> 
> 标签：mongodb, multidimensional-array

我在 Mongo 中有这些数据：

```
{
    "_id" : ObjectId("505fd43fdbed3dd93f0ae088"),
    "categoryName" : "Cat 1",
    "services" : [
        {
            "serviceName" : "Svc 1",
            "input" : [
                { "quantity" : 10, "note" : "quantity = 10" }, 
                { "quantity" : 20, "note" : "quantity = 20" }
            ]
        },
        {
            "serviceName" : "Svc 2",
            "input" : [
                { "quantity" : 30, "note" : "quantity = 30" }, 
                { "quantity" : 40, "note" : "quantity = 40" }
            ]
        }
    ]
} 
```

现在我想更新“Svc 1”的数量：

```
{ "quantity" : 10, "note" : "quantity = 10" } 
```

像：

```
{"quantity": 100, "note": "changed to 100"} 
```

我该如何处理 Mongo？

据我所知，操作运算符只支持第一个数组，有人建议使用子子数组元素的索引，但问题是如何在运行时知道该索引？（我正在使用 MongoDB 的本机 C# 驱动程序）

提前感谢您的帮助！

约翰尼

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T05:39:43.910

由于数组中有一个数组，因此没有任何简单的方法可以引用嵌套子数组，除非您知道要更新的数组中的位置。

因此，例如，您可以使用 C# 等效项更新“Svc 1”的第一个输入：

```
db.services.update(

    // Criteria
    {
        '_id' : ObjectId("505fd43fdbed3dd93f0ae088"),
        'services.serviceName' : 'Svc 1'
    },

    // Updates
    {
        $set : {
            'services.$.input.0.quantity' : 100,
            'services.$.input.0.note' : 'Quantity updated to 100'
        }
    }
) 
```

如果您不知道嵌套`input`数组的位置，则必须获取匹配的 ，在应用程序代码中`services`迭代数组，然后是更新的数组。`input``$set`

或者，您可以修改嵌套数组以使用嵌入式文档，例如：

```
{
    "categoryName" : "Cat 1",
    "services" : [
        {
            "serviceName" : "Svc 1",
            "input1" : { "quantity" : 10, "note" : "quantity = 10" }, 
            "input2" : { "quantity" : 20, "note" : "quantity = 20" }
        },
    ]
} 
```

然后您可以按名称更新，例如`input1`：

```
db.services.update(

    // Criteria
    {
        '_id' : ObjectId("5063e80a275c457549de2362"),
        'services.serviceName' : 'Svc 1'
    },

    // Updates
    {
        $set : {
            'services.$.input1.quantity' : 100,
            'services.$.input1.note' : 'Quantity updated to 100'
        }
    }
) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-07T06:54:01.237

由于您不知道要更新的值的位置，因此首先插入具有更新信息的新值，然后删除要更新的值。

```
db.services.update(
   {
    '_id' : ObjectId("505fd43fdbed3dd93f0ae088"),
    'services.serviceName' : 'Svc 1'
   },
   {
    { $addToSet: { 'services.$.input' : "new sub-Doc" }
   }
) 
```

然后在插入成功时删除

```
db.services.update(
   {
    '_id' : ObjectId("505fd43fdbed3dd93f0ae088"),
    'services.serviceName' : 'Svc 1'
   },
   {
    { $pull: { 'services.$.input' : { "quantity" : 10, "note" : "quantity = 10" } }
   }
) 
```

当索引未知并且文档应该具有具有相同键的子文档时，这很有[用](https://stackoverflow.com/questions/12612581/update-an-element-in-sub-of-sub-array-in-mongodb)

# crystal-reports - 水晶报表页脚打印在页面底部

> ID：12612583
> 
> 赞同：5
> 
> 时间：2012-09-27T00:57:31.110
> 
> 标签：crystal-reports, report

我有 Page Footer()PF A 和 B，每当我抑制 PFa 时，PFb 都会在报告页脚之后向上移动。将垂直线想象为行号，

```
|Page Header
|Details
|Report Footer
|Page Footer A
|Page Footer B 
```

PFa 仅显示在最后一页，使用抑制部分中的公式：

```
pagenumber <> totalpagecount 
```

这是结果

```
Page 1           Page 2
|Page Header     |Page Header
|Details         |Details
|Report Footer   |Report Footer
|Page Footer B   |Page Footer A
|                |Page Footer B 
```

现在我希望报告是这样的

```
Page 1           Page 2
|Page Header     |Page Header
|Details         |Details
|Report Footer   |Report Footer
|                |Page Footer A
|Page Footer B   |Page Footer B 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T11:47:34.447

在 Section Expert 中有一个选项“在页面底部打印”，使用它可以将其保持在底部。这通常用于创建发票或账单以将总数保持在底部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-05T11:34:07.533

如果您有多个页脚并且您通过各种规则将它们抑制，那么水晶中的问题是页脚 A 不会粘在底部，但即使 B 被抑制，它也会占据页脚 B 顶部的位置。要修复检查“底层以下部分”。这为我解决了问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T18:30:46.330

我有点晚了，但是在我的报告中，我有 2 个页眉和 4 个页脚，这取决于我们公司内的哪个组织正在打印报告。

2之后，页脚后的空间变得非常糟糕，我发现我需要添加“底层以下部分”才能让它们正确打印在页面底部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:28:40.203

在左边距，。右键单击报告页脚并转到部分专家。在页面底部打印选项中放置一个复选框。这应该为你做。

报表页脚不会像页脚那样得到处理。此选项将告诉报告在页面底部为您打印。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:25:33.130

如果您希望它向下移动但不在页面底部，您可以添加另一个部分（例如 PFC），然后将 PFb 的内容移动到 PFC 并添加一个公式来反转 PFa 的抑制：

```
pagenumber = totalpagecount 
```

然后只需使 PFb 的尺寸与 PFa 相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-21T13:00:53.073

使用 Section Expert / Page footer 中的选项：保留最小页脚，将在页面底部打印页脚，只需确保每个页脚具有相同的高度（以某种方式保留最大的页脚？）

# ios - IOS 6 NSDateFormatter

> ID：12612585
> 
> 赞同：3
> 
> 时间：2012-09-27T00:57:50.377
> 
> 标签：ios, ios6, nsdateformatter

请帮助我使用 IOS6 上的 dateformatter，请参阅下面的代码

```
NSString stringDate = @"12/31/9999"; 
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init]; 
[dateFormatter setDateFormat:@"MM/dd/yyyy"]; 
NSDate *dateCheck = [dateFormatter dateFromString:stringDate]; 
NSLog(@"Date = %@", dateCheck); 
```

输出是

```
Date = 1999-12-31 08:00:00 +0000 
```

这是将字符串日期转换为日期 12/31/9999 时的输出。

从以前版本的 IOS6 输出是

```
Date = 9999-12-31 08:00:00 +0000 // Correct 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:58:33.030

我为我公司的企业应用程序对此进行了修复。

它应该为使用已知格式字符串的日期格式化程序解决这个问题（就像我们用来从我们的 sqlite 数据库中解析日期的那些）。

但是，它不会修复：

1.  将 isLenient 设置为 true 的 NSDateFormatters。
2.  使用样式而不是格式字符串进行解析的 NSDateFormatter。

它似乎不会对 iOS 5 或 5.1 造成负面影响。在那之前我没有测试过任何东西。但是，我确实有点弄乱了 NSDateFormatter 的内部，所以这可能无法通过 App Store 提交过程。但是，如果您在 Enterprise 程序下编写程序（或仅使用 ad hoc 部署），这应该不是问题。此外，如果您启用了 isLenient，它会尝试让路，但不能保证您不会遇到任何问题。

我想强调这是一个临时解决方案。我没有在所有可能的情况下对此进行测试，因此您应该自担风险实施此操作。

我创建了以下类别：

NSDateFormatter+HotFix.h

```
#import <Foundation/Foundation.h>

@interface NSDateFormatter (HotFix)

- (NSDate*)dateFromString:(NSString *)string;

@end 
```

NSDateFormatter+HotFix.m

```
#import "NSDateFormatter+HotFix.h"
#import <objc/runtime.h>

@implementation NSDateFormatter (HotFix)

- (NSDate*)dateFromString:(NSString *)string
{
    if (!string) return nil;

    //HACK: Use the original implementation
    void* baseFormatter = nil;
    object_getInstanceVariable(self, "_formatter", &baseFormatter);
    if (!baseFormatter) return nil;

    //Use the underlying CFDateFormatter to parse the string
    CFDateRef rawDate = CFDateFormatterCreateDateFromString(kCFAllocatorDefault, (CFDateFormatterRef)baseFormatter, (CFStringRef)string, NULL);
    NSDate* source = (NSDate*)rawDate;

    //We do not support lenient parsing of dates (or styles), period.
    if (source && !self.isLenient && self.dateStyle == NSDateFormatterNoStyle && self.timeStyle == NSDateFormatterNoStyle)
    {
        //If it worked, then find out if the format string included a year (any cluster of 1 to 5 y characters)
        NSString* format = [self dateFormat];
        NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:@"y{1,5}" options:NSRegularExpressionCaseInsensitive error:NULL];
        NSArray* matches = [regex matchesInString:format options:0 range:NSMakeRange(0, [format length])];

        if ([matches count] > 0)
        {
            for (NSTextCheckingResult* result in matches)
            {
                //Check for the y grouping being contained within quotes.  If so, ignore it
                if (result.range.location > 0 && result.range.location + result.range.length < [format length] - 1)
                {
                    if ([format characterAtIndex:result.range.location - 1] == '\'' && 
                        [format characterAtIndex:result.range.location + result.range.length + 1] == '\'') continue;
                }

                NSString* possibleYearString = [string substringWithRange:result.range];
                NSInteger possibleYear = [possibleYearString integerValue];

                if (possibleYear > 3500)
                {
                    NSCalendar* calendar = [NSCalendar currentCalendar];
                    NSDateComponents* dateComp = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:source];
                    dateComp.year = possibleYear;

                    return [calendar dateFromComponents:dateComp];
                }
            }
        }
    }

    return [source autorelease];
}

@end 
```

它将替换 NSDateFormatter 现有的 dateFromString 方法。它的工作原理是尝试正常解析字符串，然后检查 formatString 中是否有一组年份格式字符。如果是，它会手动拉出年份并检查它是否大于 3500。最后，如果是这种情况，它会重写输出以具有正确解析的年份。

只需将其包含在您的项目中，它就会生效。您不需要将标头导入使用 NSDateFormatter 的每个文件中，只需编译 .m 即可修改该类。如果您有任何其他更改 dateFromString: 的类别，则无法定义此类的效果。

我希望这有帮助。

# android - 部分滚动视图 - XML Android

> ID：12612586
> 
> 赞同：0
> 
> 时间：2012-09-27T00:57:50.567
> 
> 标签：android, android-layout, scrollview

我的布局中有很多行，我需要一个部分滚动视图。我想修复线性布局和第一个表格行以及其余部分的滚动视图。现在，我有这段代码：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout>

        <TextView
        />
    </LinearLayout>

    <TableRow
            >

        <TextView
            />

        <TextView
            />

        <TextView
            />
    </TableRow>
</TableLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

<TableLayout
        >

    <TableRow
            >
        <TextView
                />
        <TextView
                />
        <TextView
                />
    </TableRow>

    <TableRow
            >
        <TextView
                />
        <TextView
                />
        <TextView
                />
    </TableRow>
</TableLayout>
</ScrollView> 
```

但不编译。我应该如何使用滚动视图来实现我的目标？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:46:55.480

*   至少您需要在每个 XML 元素中定义`android:layout_height`并对其进行编译。`android:layout_width`
*   一个布局只能包含 1 个父元素。您需要将整个内容包装在`LinearLayout`适合您需要的布局或任何布局中。

# html - HTML 表单标签，实际的默认事件或行为是什么？

> ID：12612587
> 
> 赞同：3
> 
> 时间：2012-09-27T00:58:01.440
> 
> 标签：html, forms, events

这确实不是一个确切的问题。但是我一直很好奇，并试图查找它以找出答案。只是为了我自己的好奇心。那么，如果您不提供方法，浏览器的默认行为是什么？或者也不提供动作？是的，我知道从语法的角度来看它是不正确的。但是我注意到现在很多人都在使用 AJAX，忽略了正常的表单标签属性，这就是我好奇的原因。如果没有启用 JS 的人发生在一个没有方法或者没有动作的表单的站点上怎么办？

标准浏览器有什么作用吗？喜欢尝试在您当前所在的页面上获取/发布？或其他一些事件/行为。我知道当我在其中一个事件中单击提交按钮时，页面似乎正在重新加载。但它是发布/获取，其他吗？什么都没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:04:22.663

我相信 W3 标准是在没有提供表单操作的情况下重新加载/请求相同的 URL。

我可以确认这是最新的 Firefox 15 正在做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:01:58.177

根据[W3 标准](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)，默认的方法是 GET 方法。action 字段是强制性的，因此如果浏览器不知道将查询重定向到哪里，则可能不会发送任何内容。

# ios - 什么使用 Passbook 的日志记录端点？

> ID：12612597
> 
> 赞同：6
> 
> 时间：2012-09-27T00:59:29.537
> 
> 标签：ios, ios6, passbook

我刚刚开始实施我的存折 Web 服务。

在文档中，我看到有一个可选的日志端点，但不明白什么使用/消耗这个端点？

据我所知，它只供希望检查日志的人使用。

为了清楚起见，Apple 的文档说日志应该可以通过

> 对 webServiceURL /version /log 的 POST 请求

但我不明白为什么我们不能对 webServiceURL/version/myAppsLogs 使用 GET 请求

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T22:06:30.523

根据规范，Passbook 将 POST 一个 JSON 文档到您的日志记录端点。GET 不允许提交数据。这个 JSON 文档将只有一个键“日志”，它是一个字符串数组。您只需使用 HTTP 200 状态进行响应。

示例通信如下所示：

```
POST /yourwebServiceURL/v1/log HTTP/1.1
主机：你的服务器
内容类型：应用程序/json
内容长度：83

{
  “日志”：[
    "记录消息 1",
    "记录消息 2",
    “记录消息 n”
  ]
}

HTTP/1.1 200 正常
连接：关闭

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:52:34.667

如果 Passbook 本身在 pass 中或在您的 api 实现中发现错误，它会使用此 url。我绝对建议记录通过此 url 出现的所有内容，错误非常全面，它帮助我找到了一些我不知道的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:14:03.527

您需要实施

对 webServiceURL /version /log 的 POST 请求

因此 Passbook 可以将日志上传到您的服务器。

获取日志的 GET 调用取决于您在 POST 调用中收到日志时执行的操作。例如，如果您将它们保存在文件中，您可以让用户（可能是管理员用户）下载文件或其中的一部分。

如果将每个 POST 操作保存在数据库的一行上，则可以发送最后 n 行...

# wordpress - 在 buddypress 中制作 www.mydomain.com/[USER]/

> ID：12612611
> 
> 赞同：0
> 
> 时间：2012-09-27T01:00:46.803
> 
> 标签：wordpress, path, buddypress

就这么简单，这正是我想要在我的 buddypress 中做的事情：

www.mydomain.com/[USER]/ 以便它指向用户的公共配置文件。

我找到了这个链接，但对我没有帮助 [http://wordpress.org/support/topic/plugin-theme-my-login-username-in-permalink](http://wordpress.org/support/topic/plugin-theme-my-login-username-in-permalink)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:41:52.910

我猜你想要友好的 URL？您的问题有点笼统，您可能需要重新措辞。但是，如果这是我认为的那样，请执行以下操作：

1.  在管理员中，转到`Settings -> Permalinks`
2.  选择任何格式
3.  修改或创建您的 .htaccess 文件，因为它在页面底部告诉您
4.  获取[此插件](http://wordpress.org/extend/plugins/edit-author-slug/)[可选步骤]
5.  安装它[可选步骤]
6.  转到`Settings -> Edit author slug`[可选步骤]
7.  为您的作者创建您想要的 slug [可选步骤]
8.  进入`Users`管理员
9.  单击`edit`任何用户
10.  一直走到底部，上面写着“Edit Author Slug”
11.  选择你想要的格式

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:27:49.730

这是一个更简单的方法：

将配置文件放在根目录中 - [http://example.org/username/](http://example.org/username/)

```
define ( 'BP_ENABLE_ROOT_PROFILES', true ); 
```

这在您的 wp-content/plugins/bp-custom.php 文件中。如果您没有这样的文件，请创建一个。

更多信息： [http ://codex.buddypress.org/extending-buddypress/changeing-internal-configuration-settings/](http://codex.buddypress.org/extending-buddypress/changing-internal-configuration-settings/)

# c - gtk - 用 C 中的按钮关闭窗口窗体

> ID：12612613
> 
> 赞同：5
> 
> 时间：2012-09-27T01:01:09.403
> 
> 标签：c, gtk

我有一个带有菜单的主窗口，它可以打开另一个窗口。这个辅助窗口有一个关闭按钮。该按钮已连接单击的信号。我的问题是我不知道如何关闭/销毁该父窗口。我尝试过使用 gtk_widget_destroy，但出现错误，因为窗口不是小部件 .... 我还没有找到任何销毁父窗口的函数 ....

谁能给我指路，好吗？提前致谢。

*-----------------------------------------------------------*

好的。我贴一段代码。当我执行程序时，我单击“打开窗口”按钮。使用“关闭”按钮打开一个新窗口。如果我单击“关闭”按钮，我会在终端中收到下一个错误：(Windows:13801): Gtk-CRITICAL **: gtk_widget_destroy: assertion `GTK_IS_WIDGET (widget)' failed

代码是：

```
#include <stdlib.h>
#include <gtk/gtk.h>
#include <gdk/gdkkeysyms.h>

void open_window(GtkWidget *widget, gpointer window);
void close_window(GtkWidget *widget, gpointer window);

int main( int argc, char *argv[])
{
    GtkWidget *window;
    GtkWidget *fixed;
    GtkWidget *button;

    gtk_init(&argc, &argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title(GTK_WINDOW(window), "Windows");
    gtk_window_set_default_size(GTK_WINDOW(window), 230, 150);
    gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);

    fixed = gtk_fixed_new();
    gtk_container_add(GTK_CONTAINER(window), fixed);

    button = gtk_button_new_with_label("Open window");

    gtk_fixed_put(GTK_FIXED(fixed), button, 50, 50);
    gtk_widget_set_size_request(button, 80, 35);

    g_signal_connect(G_OBJECT(button), "clicked",
                     G_CALLBACK(open_window), G_OBJECT(window));

    g_signal_connect_swapped(G_OBJECT(window), "destroy",
                             G_CALLBACK(gtk_main_quit), NULL);

    gtk_widget_show_all(window);

    gtk_main();

    return 0;

}

void open_window(GtkWidget *widget, gpointer window)
{
    GtkBuilder *builder;
    GtkWidget *secondWindow = NULL;

    builder = gtk_builder_new ();
    gtk_builder_add_from_file (builder, "secondWindow.glade", NULL);

    secondWindow = GTK_WIDGET (gtk_builder_get_object (builder, "secondWindow"));

    gtk_builder_connect_signals (builder, NULL);

    g_object_unref (G_OBJECT (builder));

    gtk_window_set_modal(GTK_WINDOW(secondWindow), TRUE);
    gtk_widget_show_all(secondWindow);
}

void close_window(GtkWidget *widget, gpointer window)
{
    gtk_widget_destroy(GTK_WIDGET(window));
} 
```

在文件“secondWindow.glade”中定义了一个窗口、一个表格和一个放置在表格中间单元格中的按钮。此外，它还为名为“close_window”的“单击”事件按钮定义了一个句柄。

如果有人想执行它，请链接到 glade 文件：[https ://sites.google.com/site/marvalsiteimages/secondWindow.glade](https://sites.google.com/site/marvalsiteimages/secondWindow.glade)

我希望这可以帮助您理解我的问题。谢谢。

*-------------------------------------------------*

基于响应的最终代码：

```
void open_window(GtkWidget *widget, gpointer window)
{
    GtkBuilder *builder;
    GtkWidget *secondWindow = NULL;
    GtkWidget *closeButton = NULL;

    builder = gtk_builder_new ();
    gtk_builder_add_from_file (builder, "secondWindow.glade", NULL);

    secondWindow = GTK_WIDGET (gtk_builder_get_object (builder, "secondWindow"));
    closeButton = GTK_WIDGET (gtk_builder_get_object (builder, "closeWindowButton"));

    g_signal_connect (G_OBJECT (closeButton),
                      "clicked",
                      G_CALLBACK (close_window),
                      G_OBJECT (secondWindow)); // here is the magic: the callback will get the window to close

    g_object_unref (G_OBJECT (builder));

    gtk_window_set_modal(GTK_WINDOW(secondWindow), TRUE);
    gtk_widget_show_all(secondWindow);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T16:02:01.127

您的问题是第二个窗口的按钮的“单击”信号是从 glade 文件连接的。但是信号处理程序需要一个指向窗口的指针来销毁它。这是通过信号回调的“user_data”参数传递的。

一种方法是在 Glade 中将第二个窗口作为 user_data 参数传递（看看这个[Glade 教程](http://blog.borovsak.si/2009/09/glade3-tutorial-6-signals.html)），但该参数应该是一个指针，我不知道如何使用 glade 来做到这一点。**编辑**：只需在glade 中单击与此信号关联的用户数据字段，弹出窗口将允许您选择要传递给信号处理程序的对象。只需选择您的“secondWindow”对象。

另一种方法是从 glade 文件中删除信号处理，并从代码中手动连接单击的信号，将指向第二个窗口的指针作为用户数据传递：

```
void open_window(GtkWidget *widget, gpointer window)
{
    GtkBuilder *builder;
    GtkWidget *secondWindow = NULL;
    GtkWidget *closeButton = NULL;

    builder = gtk_builder_new ();
    gtk_builder_add_from_file (builder, "secondWindow.glade", NULL);

    secondWindow = GTK_WIDGET (gtk_builder_get_object (builder, "secondWindow"));
    closeButton = GTK_WIDGET (gtk_builder_get_object (builder, "closeWindowButton"));

    g_signal_connect (G_OBJECT (closeButton),
        "clicked",
        G_CALLBACK (close_window),
        G_OBJECT (secondWindow)); // here is the magic: the callback will get the window to close

    g_object_unref (G_OBJECT (builder));

    gtk_window_set_modal(GTK_WINDOW(secondWindow), TRUE);
    gtk_widget_show_all(secondWindow);
} 
```

# excel - VBA 计算百分比

> ID：12612617
> 
> 赞同：-1
> 
> 时间：2012-09-27T01:01:34.773
> 
> 标签：excel, vba

所以我需要一些帮助。我对 VBA 很陌生，所以我遇到了一些麻烦。好吧，我的工作簿中有多张工作表（excel）。我想要做的是，计算在 D 列中有多少个单元格有“未完成”这个词的百分比，并将结果放在某个单元格的主工作表中。例子：

```
Sub Get_Percentage()

If Range("Jackson,_Mr._Vince_R.TrainingSt'!D2:D100").Value = "IMCOMPLETE" Then
    put outcome in "TotalSummery%"!E2
If Range("Carter,_Mr._Oscar_R_(Oscar)Trai'!D2:D100").Value = "IMCOMPLETE" Then
    put outcome in "TotalSummery%"!E4
If Range("Taravella,_Mr._Jim_(Jim)Trainin'!D2:D100") Value = "IMCOMPLETE" Then
    put outcome in "TotalSummery%"!E5

End Sub 
```

仅供参考：我有 10 个标签。不确定这是否是一个宏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:52:20.047

这是一个简单的方法。我正在为一张纸做。您可以循环使用它

```
Sub Sample()
    Dim ws As Worksheet
    Dim SearchText As String
    Dim WordCount As Long, ColDTotalWordCount As Long
    Dim PercentageWord As Double

    Set ws = ThisWorkbook.Sheets("Sheet1")

    SearchText = "IMCOMPLETE"

    With ws
        '~~> Count the occurances of the word "IMCOMPLETE"
        WordCount = Application.WorksheetFunction.CountIf(.Columns(4), SearchText)

        '~~> Count the total words in Col D
        ColDTotalWordCount = Application.WorksheetFunction.CountA(.Columns(4))

        '~~> Calculate Percentage
        PercentageWord = WordCount / ColDTotalWordCount
        Debug.Print Format(PercentageWord, "00.00%")
    End With
End Sub 
```

上面的代码也可以转换为一个函数，当您循环浏览工作表时非常有用。

```
Option Explicit

Sub Sample()
    Dim wSheet As Worksheet
    Dim TextToSearch  As String

    Set wSheet = ThisWorkbook.Sheets("Sheet1")

    TextToSearch = "IMCOMPLETE"

    Debug.Print GetPercentage(wSheet, TextToSearch)
End Sub

Function GetPercentage(ws As Worksheet, SearchText As String) As String
    Dim WordCount As Long, ColDTotalWordCount As Long
    Dim PercentageWord As Double

    With ws
        '~~> Count the occurances of the word "IMCOMPLETE"
        WordCount = Application.WorksheetFunction.CountIf(.Columns(4), SearchText)

        '~~> Count the total words in Col D
        ColDTotalWordCount = Application.WorksheetFunction.CountA(.Columns(4))

        '~~> Calculate Percentage
        PercentageWord = WordCount / ColDTotalWordCount
        GetPercentage = Format(PercentageWord, "00.00%")
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:00:57.133

```
Sub FindAndCountWordInExcelWorkBook(Byval SearchString As String)

SearchString = "IMCOMPLETE"

Dim oRange As Range, aCell As Range, bCell As Range
    Dim ws As Worksheet
    Dim ExitLoop As Boolean
    Dim FoundAt As String
    On Error GoTo Err
    Dim i As Integer
    For i = 1 To Worksheets.Count

        Set ws = Worksheets(i)
        Set oRange = ws.UsedRange

        Dim CountOfKeyWord As Integer

        Set aCell = oRange.Find(What:=SearchString, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)
        If Not aCell Is Nothing Then
            Set bCell = aCell
            FoundAt = aCell.Address
            Do While ExitLoop = False
                Set aCell = oRange.FindNext(After:=aCell)

                If Not aCell Is Nothing Then
                    If aCell.Address = bCell.Address Then Exit Do
                    CountOfKeyWord = CountOfKeyWord + 1
                    FoundAt = FoundAt & ", " & aCell.Address
                Else
                    ExitLoop = True
                End If
            Loop
        Else
           ' MsgBox SearchString & " not Found"
        End If

    Next i

    MsgBox "The Search String: " & SearchString & ", appeared " & CountOfKeyWord & " times at these locations: " & FoundAt
    Exit Sub
Err:
    MsgBox Err.Description
End Sub 
```

# ios - Facebook iOS SDK 的 openActiveSession 后访问令牌过期

> ID：12612629
> 
> 赞同：9
> 
> 时间：2012-09-27T01:03:26.710
> 
> 标签：ios, facebook, login

我在设置中使用带有 iOS 6 Facebook 的 3.1 Facebook SDK，并且我的应用已获得授权。

这完美地执行：

```
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *fbSession, FBSessionState fbState, NSError *error) { ... } 
```

但是，现在当我尝试获取“我”信息时，出现错误：

```
com.facebook.sdk:ParsedJSONResponseKey = {
    body =     {
        error =         {
            code = 190;
            "error_subcode" = 463;
            message = "Error validating access token: Session has expired at unix time 1348704000\. The current unix time is 1348706984.";
            type = OAuthException;
        };
    };
    code = 400;
} 
```

如果我看`[error code]`它等于5。我不应该在登录后获得有效的访问令牌吗？我需要调用重新授权吗？

**更新**：重新授权没有帮助。奇怪的是，我的 activeSession 的 accessToken 总是一样的。尽管调用了 closeAndClearToken。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:58:38.343

* * *

**更新**：此问题已在 Facebook iOS SDK 3.1.1 中得到解决。

* * *

我从 github 上同步了代码，发现他们没有`accountStore renewCredentialsForAccount:completion:`在任何地方调用。我更改了以下代码`authorizeUsingSystemAccountStore`，它似乎已经解决了这个问题。

```
// we will attempt an iOS integrated facebook login
[accountStore requestAccessToAccountsWithType:accountType
                                      options:options
                                   completion:^(BOOL granted, NSError *error) {

                                       // this means the user has not signed-on to Facebook via the OS
                                       BOOL isUntosedDevice = (!granted && error.code == ACErrorAccountNotFound);

                                       dispatch_block_t postReauthorizeBlock = ^{
                                           NSString *oauthToken = nil;
                                           if (granted) {                                                                                                      
                                               NSArray *fbAccounts = [accountStore accountsWithAccountType:accountType];
                                               id account = [fbAccounts objectAtIndex:0];
                                               id credential = [account credential];                                                   
                                               oauthToken = [credential oauthToken];
                                           }

                                           // initial auth case
                                           if (!isReauthorize) {
                                               if (oauthToken) {
                                                   _isFacebookLoginToken = YES;
                                                   _isOSIntegratedFacebookLoginToken = YES;

                                                   // we received a token just now
                                                   self.refreshDate = [NSDate date];

                                                   // set token and date, state transition, and call the handler if there is one
                                                   [self transitionAndCallHandlerWithState:FBSessionStateOpen
                                                                                     error:nil
                                                                                     token:oauthToken
                                                    // BUG: we need a means for fetching the expiration date of the token
                                                                            expirationDate:[NSDate distantFuture]
                                                                               shouldCache:YES
                                                                                 loginType:FBSessionLoginTypeSystemAccount];
                                               } else if (isUntosedDevice) {
                                                   // even when OS integrated auth is possible we use native-app/safari
                                                   // login if the user has not signed on to Facebook via the OS
                                                   [self authorizeWithPermissions:permissions
                                                                  defaultAudience:defaultAudience
                                                                   integratedAuth:NO
                                                                        FBAppAuth:YES
                                                                       safariAuth:YES
                                                                         fallback:YES
                                                                    isReauthorize:NO];
                                               } else {
                                                   // create an error object with additional info regarding failed login
                                                   NSError *err = [FBSession errorLoginFailedWithReason:nil
                                                                                              errorCode:nil
                                                                                             innerError:error];

                                                   // state transition, and call the handler if there is one
                                                   [self transitionAndCallHandlerWithState:FBSessionStateClosedLoginFailed
                                                                                     error:err
                                                                                     token:nil
                                                                            expirationDate:nil
                                                                               shouldCache:NO
                                                                                 loginType:FBSessionLoginTypeNone];
                                               }
                                           } else { // reauth case
                                               if (oauthToken) {
                                                   // union the requested permissions with the already granted permissions
                                                   NSMutableSet *set = [NSMutableSet setWithArray:self.permissions];
                                                   [set addObjectsFromArray:permissions];

                                                   // complete the operation: success
                                                   [self completeReauthorizeWithAccessToken:oauthToken
                                                                             expirationDate:[NSDate distantFuture]
                                                                                permissions:[set allObjects]];
                                               } else {
                                                   // no token in this case implies that the user cancelled the permissions upgrade
                                                   NSError *error = [FBSession errorLoginFailedWithReason:FBErrorReauthorizeFailedReasonUserCancelled
                                                                                                errorCode:nil
                                                                                               innerError:nil];
                                                   // complete the operation: failed
                                                   [self callReauthorizeHandlerAndClearState:error];

                                                   // if we made it this far into the reauth case with an untosed device, then
                                                   // it is time to invalidate the session
                                                   if (isUntosedDevice) {
                                                       [self closeAndClearTokenInformation];
                                                   }
                                               }
                                           }
                                       };

                                       if (granted) {
                                           [accountStore renewCredentialsForAccount:[[accountStore accountsWithAccountType:accountType] lastObject] completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
                                               dispatch_async(dispatch_get_main_queue(), postReauthorizeBlock);
                                           }];
                                       } else {
                                           // requestAccessToAccountsWithType:options:completion: completes on an
                                           // arbitrary thread; let's process this back on our main thread
                                           dispatch_async(dispatch_get_main_queue(), postReauthorizeBlock);
                                       }

                                   }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:10:45.127

所以它已经解决了，但是我一直从我们的后端调用 /me 来验证，因为你不能信任这个设备。

因此，当后端返回授权错误时，我会调用`FBSession`'s 。`+ (void)renewSystemAuthorization`

# c# - MVVM 应用程序中的工具箱设计

> ID：12612633
> 
> 赞同：1
> 
> 时间：2012-09-27T01:03:56.240
> 
> 标签：c#, .net, wpf, mvvm, toolbox

我需要在我的应用程序之上设计一个工具箱菜单，如下所示。任何时候只能选择一个工具，所以它就像单选按钮。

在 MVVM 应用程序中实现此功能的最明智的方法是什么？

![在此处输入图像描述](../Images/2a7ca0a7ae4199bb2bba65ffd3086060.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:30:10.217

我建议使用`ToggleButtons`这个（或者更确切地说是样式为 ToggleButtons 的单选按钮）。[您可以在这个 SO question](https://stackoverflow.com/questions/2362641/how-to-get-a-group-of-toggle-buttons-to-act-like-radio-buttons-in-wpf)上找到如何执行此操作（第二个答案，*而不是*接受的答案）。

# cisco - 使用 GNS3 配置多个 FastEthernet 接口

> ID：12612635
> 
> 赞同：0
> 
> 时间：2012-09-27T01:04:17.200
> 
> 标签：cisco, ospf

我正在为我的网络互联课程做一个实验室，我正在使用 GNS3 作为模拟器。我可以在每个路由器上配置单个 FastEthernet 接口，但我需要每个路由器有两个。我正在使用 c7200 映像和路由器。

这是我配置路由器的尝试。

Router>enable Router#conf t 输入配置命令，每行一个。以 CNTL/Z 结尾。Router(config)#interface f0/0 Router(config-if)#ip address 172.16.1.1 255.255.255.192 Router(config-if)#no shutdown Router(config-if)#exit Router(config)#interface f0/1 ^ % 在“^”标记处检测到无效输入。

路由器（配置）#

每次我尝试执行 f0/1 接口时，都会收到检测到无效输入的消息。

为什么？！！？

任何帮助将不胜感激，谢谢:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:13:20.860

似乎接口 FastEthernet0/1 不存在？

使用命令`Router#show ip interface brief`, 来验证接口是否存在。

如果不存在，在 GNS3 中，您可以通过路由器的*配置*选项菜单（*插槽*选项卡）添加其他接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-21T17:25:00.937

我有同样的问题。右键单击路由器，单击配置，转到插槽，单击插槽0，在（2FE）上选择第二个。申请，好的，现在你有 2 个 FastEthernet 接口。

# c# - 使用实体框架asp.net4.0从数据库中检索多个图像

> ID：12612638
> 
> 赞同：-1
> 
> 时间：2012-09-27T01:04:27.863
> 
> 标签：c#, entity-framework-4, sql-server-2008-r2, asp.net-4.0

我制作了一个电影租赁系统，用户在其中登录，我想向他展示前 3 部租借的电影以及以图像的形式。那么如何绑定数据库中的多个图像。

我正在使用 asp.net 4.0 和实体框架连接到 sql server 2008R2 进行存储。

我是这项技术的初学者，所以请耐心等待。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:57:11.770

我猜你使用 a `Gridview`or`Repeater`控件来显示列表。

如果是`GridView`，您可以使用`TemplateColumn`并添加 a `ImageControl`，使用 a`ImageHandler`从数据库中获取图像。

如何创建处理程序：

```
public class SignatureHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        int recordid = Convert.ToInt32(context.Request.QueryString["recordId"]);
        Movie movie = GetMovie(recordid);
        context.Response.ContentType = movie.ImageFileType;
        context.Response.BinaryWrite(movie.ImageFile.ToArray());

    }        

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

# c# - 需要值转换器来引用数据绑定对象实例

> ID：12612642
> 
> 赞同：1
> 
> 时间：2012-09-27T01:05:21.317
> 
> 标签：c#, wpf, data-binding, valueconverter

所以我有一个具有多个属性的对象，我使用 WPF 绑定到我的 GUI。大多数 GUI 直接绑定到我的对象实例中的属性。但是，某些 GUI 元素需要首先通过 ValueConverter 进行处理，因为它们间接依赖于绑定对象中的属性。我可以创建 valueconverter，但不确定如何引用数据绑定对象以便为转换提取正确的属性值。

在伪代码中我想这样做：

```
public object Convert(object value, Type targetType, object parameter,
    System.Globalization.CultureInfo culture)
{
    parameter = Databoundobject.EngineRating;
    double weight = EngineList.selfInstance.WeightList[parameter];
} 
```

我可以在调用 gui 中找到不引用数据绑定源的示例，但没有一个示例。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:10:49.663

该方法`value`中的参数`Convert()`将保存来自数据绑定源的原始值。

因此，如果您在对`EngineRating`属性的绑定中使用转换器，`value`将保存您要查找的值。（您需要将其转换回原始类型）

# cocos2d-iphone - iOS 6 Game Center 在身份验证时崩溃

> ID：12612643
> 
> 赞同：4
> 
> 时间：2012-09-27T01:05:25.720
> 
> 标签：cocos2d-iphone, ios6, game-center

我正在 Cocos2d-iPhone 中构建游戏，当我更新到 iOS 6 时，我注意到 Apple 改变了 Game Center 身份验证的方式，使用`authenticateHandler`而不是`authenticateWithCompletionHandler`.

我添加了新的身份验证方法，但如果玩家尚未登录 Game Center，游戏现在会崩溃。如果用户已经登录，则验证没有问题。

这是我的代码：

```
if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0"))
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
    {
        if (viewController != nil)
        {
            AppController *appDelegate = (AppController*)[UIApplication sharedApplication].delegate;

            [delegate.viewController presentViewController:viewController animated:YES completion:nil];
        }
        else if (localPlayer.isAuthenticated)
        {
            NSLog(@"Player authenticated");
        }
        else
        {
            NSLog(@"Player authentication failed");
        }
    };
} 
```

尝试呈现 Game Center viewController 时似乎崩溃了，即使我使用完全相同的代码来呈现`GKTurnBasedMatchmakerViewController`没有问题。

任何帮助将非常感激。

编辑：这是崩溃时抛出的异常：

`Uncaught Exception UIApplicationInvalidInterfaceOrientation: Supported orientations has no common orientation with the application, and shouldAutorotate is returning YES`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:17:47.917

在这里您可以找到有关崩溃的有用信息，我认为这是根本原因。 [https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

应用应提供委托方法 application:supportedIntefaceOrientationsForWindow 并确保 Portrait 是返回的掩码值之一。

我添加了以下代码来修复此崩溃。

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:30:27.920

有类似的问题，我在 viewDidLoad 中测试 isAuthenticated 和 authenticateHandler，在中间加载当前视图时尝试呈现游戏中心视图时一直崩溃。我将此测试移至 viewDidAppear

*   (void)viewDidAppear:(BOOL)动画{

现在工作正常...

同样对于 ios 6，Game Center 只会提示未经身份验证的用户一次，如果他们拒绝登录，它将禁用该应用程序的 Game Center，然后用户将进入 Game Center 登录。

# centos - 星号进入 SSH 设置

> ID：12612644
> 
> 赞同：0
> 
> 时间：2012-09-27T01:05:29.433
> 
> 标签：centos, voip, asterisk

我是 VoIP 主题的新手。但我真的需要弄清楚如何将 Asterisk 设置为 CentOS ssh ......计划是：我有一个 SSH，将购买一个 DID 号码，并希望在这个 SSH 中配置 Asterisk 以使用 DID 号码来接听电话。只接听电话。当有人呼叫 DID 时，它应该使用 DTMF 启动 IVR……并将 DTMF 中的日志保存到 .txt 文件中……有人可以帮我解决这个问题吗？发布一些答案和一些提示给我学习或教程链接。或者甚至联系我，我可以支付这个费用...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:29:51.497

试试看这本书

[Asterisk - 电话的未来](http://www.google.com.ua/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CEcQFjAE&url=http://book.huihoo.com/pdf/asterisk-the-future-of-telephony/AsteriskTFOT-2.pdf&ei=nWZnULeeBer_4QSJpYDACA&usg=AFQjCNF_RjsRDNwFDK0CkAjoGQkaA846tQ&sig2=bPLhS_iF6n3gcsV-QH1Vqg)

如果你想自己做，你可以做到以下几点：

[1)使用 yum](http://www.asterisk.org/downloads/yum)安装星号

2) 设置 sip 扩展[sip.conf](http://www.voip-info.org/wiki/view/Asterisk+config+sip.conf)

3) setup dialplan [dialplan介绍](http://www.voip-info.org/wiki/view/Asterisk+Dialplan+Introduction)

4) 创建 AGI 脚本以保存到文件[AGI](http://www.voip-info.org/wiki/view/Asterisk+AGI)。当然，您需要一些编程经验才能做到这一点。

或聘请一些自由职业者为您工作

[http://freelancer.com](http://freelancer.com)

# python - Python - 元素树正在删除 XML 声明

> ID：12612648
> 
> 赞同：10
> 
> 时间：2012-09-27T01:06:23.767
> 
> 标签：python, xml, elementtree

我正在用元素树编写一些 XML。

我为代码提供了一个以 XML 声明开头的空模板文件：`<?xml version= "1.0"?>`当 ET 完成更改并写入完整的 XML 时，它会剥离声明并从根标记开始。我怎样才能阻止这个？

写调用：

`ET.ElementTree(root).write(noteFile)`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T01:18:14.860

根据[文档](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)：

> 写（文件，编码=“us-ascii”，xml_declaration=无，方法=“xml”）
> 
> 将元素树以 XML 格式写入文件。file 是文件名，或为写入而打开的文件对象。encoding [1](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)是输出编码（默认为 US-ASCII）。xml_declaration 控制是否应将 XML 声明添加到文件中。使用 False 表示从不，True 表示永远，None 仅在不是 US-ASCII 或 UTF-8 时使用（默认为 None）。方法是“xml”、“html”或“text”（默认为“xml”）。返回一个编码的字符串。

因此，`write(noteFile)`仅当编码不是 US-ASCII 或 UTF-8 并且编码是 US-ASCII 时才明确告诉它编写 XML 声明；因此，您没有得到任何声明。

我猜如果你没有读这么多，你的下一个问题将是“为什么我的 Unicode 坏了”，所以让我们同时修复这两个问题：

```
ET.ElementTree(root).write(noteFile, encoding="utf-8", xml_declaration=True) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-02T03:09:42.103

ElementTree 有不同的版本。他们中的一些人接受这个`xml_declaration`论点，一些人不接受。

我碰巧有的没有。当且仅当它发出声明`encoding != 'utf-8'`。所以，为了得到声明，我打电话给`write(filename, encoding='UTF-8')`.

# c# - 数据网格为空时提示消息

> ID：12612660
> 
> 赞同：0
> 
> 时间：2012-09-27T01:08:21.650
> 
> 标签：c#, .net, wpf, xaml

我正在使用 WPF。我正在使用数据网格在其中动态添加项目。

最初加载应用程序时，datagrid 为空，或者当 datagrid 中的所有项目都被删除时，它只显示 datagrid 标题。

如何删除标题，并显示“请插入项目”之类的消息。当数据网格为空时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:16:23.113

我会`IValueConverter`为此使用一个。直接绑定到 Items 源，当它为 null/empty 时，然后 return `Visibility.Collapsed`。将文本通知添加为`TextBlock`，并使用参数否定转换器。

```
<TextBlock Text="There are no items" 
    Visibility="{Binding Items,
        Converter={StaticResource ItemsToVisibilityConverter},ConverterParameter=negate}" />
<DataGrid Visibility="{Binding Items,
        Converter={StaticResource ItemsToVisibilityConverter}}">
</DataGrid> 
```

转换器必须使用`ConverterParameter`：

```
public class ItemsToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var items = value as IEnumerable<object>;
        bool isVisible = items != null && items.Count() > 0;
        if ((string)parameter == "negate") isVisible = !isVisible;
        return isVisible ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# python - 计算numpy数组中的相邻单元格

> ID：12612663
> 
> 赞同：4
> 
> 时间：2012-09-27T01:09:08.537
> 
> 标签：python, arrays, numpy, scipy

过了午夜，也许有人知道如何解决我的问题。我想计算相邻单元格的数量（这意味着具有其他值的数组字段的数量，例如数组值附近的零）作为**每个有效值的总和！**.

例子：

```
import numpy, scipy
s = ndimage.generate_binary_structure(2,2) # Structure can vary
a = numpy.zeros((6,6), dtype=numpy.int) # Example array
a[2:4, 2:4] = 1;a[2,4] = 1 # with example value structure
print a 
>[[0 0 0 0 0 0]
  [0 0 0 0 0 0]
  [0 0 1 1 1 0]
  [0 0 1 1 0 0]
  [0 0 0 0 0 0]
  [0 0 0 0 0 0]]
# The value at position [2,4] is surrounded by 6 zeros, while the one at
# position [2,2] has 5 zeros in the vicinity if 's' is the assumed binary structure. 
# Total sum of surrounding zeroes is therefore sum(5+4+6+4+5) == 24 
```

如果我的值的结构不同，我如何以这种方式计算零的数量？我以某种方式相信必须使用 SciPy 的[binary_dilation](http://tinyurl.com/d6jpna5)函数，它能够扩大值结构，但简单的重叠计数不能让我得到正确的总和，或者是吗？

```
print ndimage.binary_dilation(a,s).astype(a.dtype)
[[0 0 0 0 0 0]
 [0 1 1 1 1 1]
 [0 1 1 1 1 1]
 [0 1 1 1 1 1]
 [0 1 1 1 1 0]
 [0 0 0 0 0 0]] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T03:09:20.937

使用*卷积*计算邻居：

```
import numpy
import scipy.signal

a = numpy.zeros((6,6), dtype=numpy.int) # Example array
a[2:4, 2:4] = 1;a[2,4] = 1 # with example value structure

b = 1-a
c = scipy.signal.convolve2d(b, numpy.ones((3,3)), mode='same')

print numpy.sum(c * a) 
```

`b = 1-a`允许我们计算每个零而忽略零。

我们使用一个 3x3 的全 1 内核进行卷积，它将每个元素设置为它及其 8 个相邻值的总和（其他内核也是可能的，例如`+`仅用于正交相邻值的内核）。使用这些求和值，我们屏蔽了原始输入中的零（因为我们不关心它们的邻居），并对整个数组求和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:21:55.880

我想你已经明白了。膨胀后，1 的数量是 19，减去 5 的起始形状，你有 14。这是围绕你的形状的零的数量。您总共有 24 个重叠。

# facebook - 如何在 Sencha T2 中读取文件中的数据？

> ID：12612665
> 
> 赞同：1
> 
> 时间：2012-09-27T01:09:18.683
> 
> 标签：facebook, sencha-touch, sencha-touch-2

Sencha Touch 2 有一个名为“Jog With Friends”的示例应用程序，它有助于实现 FB 的移动身份验证。

在示例应用程序的 auth 部分中，对 FB 的引用`appId`如下：

```
 ...
    FB.init({
        appId  : MyApp.app.facebookAppId,
        cookie : true
    });
    ... 
```

我想这意味着应该有一个这样的文件

> /MyApp/app/facebookAppId

包含我的 FB 应用程序 ID 号。

但我不知道这个文件应该有什么**扩展名**，以及应用程序 ID 号应该以**哪种格式存储在这个文件中。**

知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:13:36.007

转到 Facebook 开发者网站并创建一个应用程序：http: [//developers.facebook.com/apps](http://developers.facebook.com/apps) - 在简单过程结束时，您将看到应用程序 ID。

要么在这里硬编码，要么，看起来很可能，将其设置为 Sencha Touch 中应用程序对象的 facebookAppId 属性。

事实上，这是在该示例文件夹根目录下的 app.js 文件中设置的：

```
launch: function() {
    this.facebookAppId = ''; // <-- add it here
    if (this.facebookAppId === '') {
    ... 
```

# android - 我的应用程序 UI 在 android 4.0 和 4.1 上看起来都变形了

> ID：12612667
> 
> 赞同：0
> 
> 时间：2012-09-27T01:09:52.737
> 
> 标签：android

当我在 android 2.2 上测试我的应用程序时，它似乎工作正常。但是，当我在 4.0 或 4.1 上对其进行测试时，UI 看起来像这样。文本框显示为灰色，没有边框。任何想法为什么会发生这种情况？

value-v14 的内容：

```
<resources>

    <style name="AppTheme" parent="android:Theme" />

</resources> 
```

![在此处输入图像描述](../Images/b45857b672aba79c7a34b73fed4521e1.png)

# jquery - 用 jquery 加速移动元素

> ID：12612671
> 
> 赞同：0
> 
> 时间：2012-09-27T01:10:20.967
> 
> 标签：jquery, jquery-animate

移动一个物体很简单。想象一下：

```
 $("#myelement").animate({left:'+=200'},2000); 
```

问题是我希望我的元素开始缓慢移动并在此过程中不断加速。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:13:39.797

[http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

您需要使用 jQuery 缓动插件，并使用 EASE IN 选项。我推荐“easeInExpo”，但您可以在这里看到所有选项：http: [//jqueryui.com/demos/effect/easing.html](http://jqueryui.com/demos/effect/easing.html)

如果您只需要放松，我认为 jQuery ui（内置插件）是矫枉过正的。您可以以精简的形式使用该插件。

它看起来像这样：

```
$("#myelement").animate({left:'+=200'},2000, 'easeInExpo'); 
```

您可能还喜欢“easeInCubic”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:14:58.310

[animate](http://api.jquery.com/animate/)函数有一个缓动选项。您可以加载一个预定义的或自己制定一个，以达到您想要的效果。

[这些](http://gsgd.co.uk/sandbox/jquery/easing/)是一些我使用的非常好的预先构建的。

# java - 程序跳过每一行，但不知道为什么

> ID：12612674
> 
> 赞同：1
> 
> 时间：2012-09-27T01:10:51.990
> 
> 标签：java, arrays, lines, skip

我的程序打印行上的所有数据，但只打印每隔一行。我知道它与“nextLine”有关，但我找不到导致问题的原因。

```
import java.io.*;
import java.util.*;

public class hw2
{
    public static void main (String[] args) throws Exception
    {

    String carrier;
    int flights;
    int lateflights;
    int ratio;

    String[][] flightData= new String [221][3];
    String[] temp;

    File file = new File ("delayed.csv");
    Scanner csvScan = new Scanner(file);

    int c = 0;
        while ((csvScan.nextLine()) != null){

        String s = csvScan.nextLine();

        temp = s.split(",");

        for(int i =0; i < temp.length ; i++)
            System.out.println(temp[i]);

        flightData[c][0] = temp[1];
        flightData[c][1] = temp[6];
        flightData[c][2] = temp[7];
        c = c+1;
        }

    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:20:31.133

考虑这种方法（请参阅[此处的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)）：

```
Scanner csvScan = new Scanner(file);
while (csvScan.hasNextLine()) {
    String s = csvScan.nextLine();
    // for testing
    System.out.println(s);
    // ... rest of code
} 
```

# vb.net - Outlook VSTO 插件部署 .NET，除了 ClickOnce 之外的 Web 自动更新工具？

> ID：12612675
> 
> 赞同：1
> 
> 时间：2012-09-27T01:11:00.963
> 
> 标签：vb.net, outlook, vsto, clickonce, add-in

大家好，我想知道是否有一个工具可以让我的 Outlook 插件（假设它已成功安装给许多用户）从 Web 服务器获取自动更新？我正在考虑 ClickOnce，但我不确定是否使用它，因为它的实现存在缺陷。

你有什么建议吗？还是应该使用 ClickOnce 部署它？

你们中有人对 ClickOnce 部署有意见/经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:10:05.990

这是一篇描述如何为应用程序添加自动更新服务的文章，看一下：[向您的程序添加自动更新](http://www.codeproject.com/Articles/19623/Adding-automatic-updates-to-your-program-Part-1)

**更新：**

另一种有趣的方法是“ [.NET 应用程序更新程序组件](http://windowsclient.net/articles/appupdater.aspx)”，它是类似问题“ [.NET 的自动更新库？](https://stackoverflow.com/questions/691663/auto-update-library-for-net) ”的答案，您也可以在其中找到其他有趣的答案。

# ios - 嵌入式 Vimeo 视频无法通过 ios 模拟器在 iPad Safari 上运行

> ID：12612684
> 
> 赞同：1
> 
> 时间：2012-09-27T01:12:38.247
> 
> 标签：ios, ipad, ios-simulator, mobile-safari, vimeo

我已经用谷歌搜索了这个问题，但我没有发现任何有用的信息。我的问题很简单：为什么我不能在 Safari 中运行 iPad 的 iOS 模拟器上播放嵌入的 Vimeo 视频（使用通用 iframe 嵌入代码）？

是因为iOS模拟器不支持这个，还是一个更复杂的问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-08T22:17:09.190

我的 Vimeo 嵌入也有同样的问题。我首先通过模拟器在 iPhone 上的 Safari 中注意到它。然后我在 iPad 上的 Safari 中试了一下（通过模拟器）。最后，我试着在 Vimeo 网站上观看*任何视频。*没有人使用模拟器在 iPad/iPhone 上工作。所以我不认为这个问题是特定于嵌入或任何特定视频的。看来，通过模拟器在 iOS 上的 Safari 中播放 Vimeo 视频是个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:08:33.817

这对您遇到的每个 vimeo 视频都是通用的，还是仅适用于您尝试嵌入的特定视频？例如，如果您在移动 safari 上访问 vimeo.com，您是否可以在 iOS 模拟器中播放他们的任何视频？

如果您可以在 Vimeo.com 上播放视频，那么问题在于您尝试嵌入的特定视频。当 Vimeo 切换到 HTML5 时，2 年前上传的某些 Vimeo 视频处理不佳。通过将视频重新上传回 Vimeo 并让它们重新处理，可以解决此问题。然后使用新生成的嵌入代码。

# nginx - 如何读取 NINGX PHP FPM 慢日志？

> ID：12612685
> 
> 赞同：0
> 
> 时间：2012-09-27T01:12:44.570
> 
> 标签：nginx, php

日志输出如下所示。: 后面的数字是毫秒所用的时间吗？

```
[26-Sep-2012 23:41:50]  [pool www] pid 17761
script_filename = /srv/bindings/f8d625f884a64f62aea671b2088910cd/code//index.php
[0x0000000001006408] execute() /srv/bindings/f8d625f884a64f62aea671b2088910cd/code/includes/database/database.inc:2139
[0x0000000001005cf0] execute() /srv/bindings/f8d625f884a64f62aea671b2088910cd/code/includes/database/database.inc:664
[0x0000000001005a38] query() /srv/bindings/f8d625f884a64f62aea671b2088910cd/code/includes/database/select.inc:1264
[0x0000000001004760] execute() /srv/bindings/f8d625f884a64f62aea671b2088910cd/code/sites/all/modules/views/plugins/views_plugin_query_default.inc:1398
[0x0000000001003c40] execute() /srv/bindings/f8d625f884a64f62aea671b2088910cd/code/sites/all/modules/views/includes/view.inc:1098
[0x00000000010027f8] execute() /srv/bindings/f8d625f884a64f62aea671b2088910cd/code/sites/all/modules/views/includes/view.inc:1118 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:48:05.740

不，是调用函数的脚本的行号。

例子：

执行（）/srv/bindings/f8d625f884a64f62aea671b2088910cd/code/includes/database/database.inc:2139

这意味着函数 execute() 在第 1 行被调用。2139 在 database.inc 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:27:23.747

是后面的数字：（我猜你的意思是之后）

如果是的话：

输出 query_string 和 exec_time

[http://php-fpm.org/wiki/New_slowlog_format](http://php-fpm.org/wiki/New_slowlog_format)

# php - 使用 Google API 制作日历工具。我应该使用 OAuth 服务帐户吗？

> ID：12612688
> 
> 赞同：0
> 
> 时间：2012-06-25T19:28:36.103
> 
> 标签：php, api, calendar

我正在为客户创建日历工具。他的工作日历在我可以访问的 Google 帐户中。我将使用 Google Calendar API 作为该工具，但我对 Google API 和 OAuth 的东西不熟悉。我将使用 PHP。我需要使用 OAuth2 服务帐户，还是应该从该 Google 帐户创建一个常规的 OAuth2 Web 应用程序客户端 ID？

如果此信息有帮助，我将制作的工具将执行此操作： 1) 允许我的客户填写一个表格，该表格将创建一个新日历并在其中填充几个事件。2) 每周两次向邮件列表发送一封电子邮件，列出对这些日历所做的更改。

我还将制作一个显示每个日历的 iframe 的页面，以便他的客户即使没有 Google 帐户也可以看到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:51:22.290

[也许像这个](https://github.com/montania/Google-Calendar-API-PHP-Class)这样的第三方类，可能对你来说是一个更好的开始。这只是一个轻量级版本，但还有更广泛的版本。重要的是他们已经为您实施了困难的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:02:15.290

如果您的客户需要通过 Google 进行身份验证，您应该使用 OAuth2 或最新版本。使用令牌比要求客户输入他们的电子邮件和密码要安全得多。

一个测试 API 调用的好地方是[http://googlecodesamples.com/oauth_playground/](http://googlecodesamples.com/oauth_playground/)这也有一个链接到支持它的 API 的 OAuth2 游乐场。

# apache - 怎么屏蔽8080端口

> ID：12612695
> 
> 赞同：3
> 
> 时间：2012-09-27T01:13:34.750
> 
> 标签：apache, tomcat

我想阻止端口 8080，因为人们可以访问我的网站 www.foo.com:8080，这是我不想要的。人们应该只能访问 www.foo.com。我在端口 80 和 mod_proxy 上使用 Apache 将调用重定向到 8080 上的 Tomcat。

我有点不知所措。任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:49:50.237

尝试使用[mod_proxy_ajp](https://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)代替将请求转发到 Tomcat。[然后仅使用AJP 连接](https://tomcat.apache.org/tomcat-6.0-doc/config/ajp.html)器（没有[HTTP 连接器](https://tomcat.apache.org/tomcat-6.0-doc/config/http.html)）配置 Tomcat 实例。这样就不能直接用浏览器访问了。

无论如何，引入评论中提到的防火墙总是一个好主意，仅用于公开您希望可用的服务。

# java - 重载的构造函数将得到 null listModel

> ID：12612697
> 
> 赞同：-2
> 
> 时间：2012-09-27T01:13:37.440
> 
> 标签：java, jlist, defaultlistmodel

我的重载构造函数似乎有一个相当特殊的问题

在默认构造函数 AutoFleetServicesMain()

我有

```
listModel = new DefaultListModel();
list = new JList(listModel); 
```

并在重载的构造函数 AutoFleetServicesMain(int i)

我有

```
listModel.addElement(dbh.findAll()); 
```

根据我的输出，默认构造函数在重载之前调用，所以我看不出 listModel 为空的原因

虽然如果我添加 listModel = new DefaultListModel(); 对于重载的构造函数，它将运行而不会出错，但我仍然没有得到列表？

关于我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:17:25.417

听起来你想*链接*你的构造函数，但这不会自动发生。尝试将以下语句添加到`AutoFleetServicesMain(int)`构造函数的开头：

```
this(); 
```

这将在后续逻辑之前调用默认构造函数。有关构造函数链接的更多示例，请参阅这篇文章：[如何在 Java 中从另一个构造函数调用一个构造函数？](https://stackoverflow.com/questions/285177/how-do-i-call-one-constructor-from-another-in-java)

# sql-server - 将十六进制转换为 INT，反之亦然

> ID：12612700
> 
> 赞同：0
> 
> 时间：2012-09-27T01:13:47.003
> 
> 标签：sql-server, sql-server-2008, tsql, type-conversion

我将创建一个由十六进制值组成的序列号

使用这种格式：

```
XX-XX-XX-YYYY
Which XX-XX-XX is default value
And YYYY is the incrementing hexa decimal value 
```

现在要根据十六进制值创建序列号，我需要将 6 添加到最后生成的十六进制值

```
MIN: 2D41 + 6 = 2D47    
     2D47 + 6 ... and so on
MAX: 4100   generation of serial will stop when I meet the MAX value. 
```

我已经在 c# 中创建了它，但我需要在 SQL 上进行

```
int num1 = int.Parse("2D41", NumberStyles.HexNumber); //Convert hex to int
int result = num1 + 6; //Add + 6 for increment
string myHex = result.ToString("X");  //Convert result to hex
MessageBox.Show(myHex);  // result 2D47 
```

这如何在 T-SQL 中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:18:35.093

```
DECLARE @x VARBINARY(8) = 0x00002D41;
SELECT CONVERT(VARBINARY(8), CONVERT(INT, @x) + 6); 
```

为了将输出作为字符串处理：

```
DECLARE @x VARBINARY(8) = 0x00002D41;
SELECT CONVERT(CHAR(10), CONVERT(VARBINARY(8), CONVERT(INT, @x) + 6), 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T01:22:27.343

希望这可以帮助你

```
declare @seed varchar(max) = '2D41';
declare @limit varchar(max) = '4100';

select convert(int, convert(varbinary(max), '0x'+@seed,1)),
       convert(int, convert(varbinary(max), '0x'+@limit,1));

;with seedlimit(seed, limit) as (
    select convert(int, convert(varbinary(max), '0x'+@seed,1)),
           convert(int, convert(varbinary(max), '0x'+@limit,1))
)
select SerialNumber = 'XX-XX-XX-' + right(convert(varchar(10),cast(s.seed + 6 * v.number as varbinary(max)),1),4)
from seedlimit s
join master.dbo.spt_values v on type='p'
where s.seed + 6 * v.number <= s.limit; 
```

基本成分在那里，您可以根据答案创建视图/过程/功能，

输出：

```
SerialNumber
-------------
XX-XX-XX-2D41
XX-XX-XX-2D47
...
XX-XX-XX-40F7
XX-XX-XX-40FD 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:17:42.163

如果您已经在 C# 中拥有它，请将其保留在那里，只需将您的代码转换为 SQL CLR 函数。

一个简单的例子见：

[http://blog.sqlauthority.com/2008/10/19/sql-server-introduction-to-clr-simple-example-of-clr-stored-procedure/](http://blog.sqlauthority.com/2008/10/19/sql-server-introduction-to-clr-simple-example-of-clr-stored-procedure/)

# debugging - Response.TransmitFile 的问题

> ID：12612701
> 
> 赞同：0
> 
> 时间：2012-09-27T01:13:54.143
> 
> 标签：debugging, download, response.write, event-viewer

过去 2 天我一直在解决一个问题。我尝试以各种可能的方式进行调试，但徒劳无功。在我的本地一切正常。但在生产中失败了。以下是有关该问题的简要说明。我有一个下载按钮，当我单击该按钮时，我打算从服务器下载文件。

protected void Download_Click(object sender, EventArgs e) {

```
 Button downloadButton = sender as Button;
    string filePath = downloadButton.CommandArgument;       

     string stuid = Session["browse_files_for_student"].ToString();
    string stuUsername = MyHelper.GetUsernameForStudentID(stuid);
    MyHelper.LogAccess(User.Identity.Name, StudentUsername.Text, filePath, MyHelper.LogAccessType.Read); 
    FileInfo file = new FileInfo(filePath);

    // Download the file
    Response.Clear();
    Response.AppendHeader("content-disposition", "attachment; filename=" + file.Name);
    try
    {
        Response.TransmitFile(filePath);           
    }
    catch (IOException error)
    {
         Response.Cookies.Add(new HttpCookie("global_last_error", "The file is in use by another process."));
        Response.Redirect("~/Public/KnownError.aspx");
    }
    Response.End();

} 
```

我在它生成的事件查看器上看到：TransmitFile failed:FileName:dsdfsfd.doc,Impersonation Enabled:0,Token Valid:1 HRESULT:0x8007052e。

环境：网站部署在 Windows 2000 服务器上。

任何帮助和意见将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:14:34.297

运行应用程序的帐户（可能是 IIS 池帐户）无权访问您尝试发送的文件。错误代码的`0x8007052e`意思是：

```
Error code: (HRESULT) 0x8007052e (2147943726) - Logon failure: unknown user name or bad password. 
```

将来您可以使用例如 cdb 命令检查错误代码（cdb 是免费提供的 Windows 调试工具的一部分）：

```
cdb notepad.exe 
```

然后在它开始之后：

```
0:000> !error  0x8007052e
Error code: (HRESULT) 0x8007052e (2147943726) - Logon failure: unknown user name or bad password. 
```

希望能帮助到你 ：）

# xpages - 如何在应用程序布局项按钮/节点中运行 SSJS？

> ID：12612702
> 
> 赞同：1
> 
> 时间：2012-09-27T01:13:59.150
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

我刚刚开始将 xe:applicationLayout 用于应用程序。我在“放置栏”中添加了一个“基本节点”。我想在节点/按钮的单击上运行一些服务器端 JavaScript 代码。我已经尝试计算基本节点的 onClick 属性，但这并没有做任何事情，而且似乎 onClick 只运行客户端 JavaScript。

是否有可以运行 SSJS 的属性或节点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:53:00.807

设置节点的提交值属性。（应用程序布局中所有位置的过程都是相同的；这是banner.ApplicationLinks 的示例片段）

```
 <xe:this.bannerApplicationLinks>
                <xe:basicContainerNode styleClass="firstApplication" label="${langString_CRM['CREATE']}">
                    <xe:this.children>
                        <xe:basicLeafNode submitValue="company_new" 
```

然后将事件处理程序添加到您的页面并根据提交的值运行您的 SSJS

```
 <xp:eventHandler event="onItemClick" submit="true"
        refreshMode="partial" disableValidators="true" refreshId="cois_application_layout"
        execMode="partial">
        <xp:this.action><![CDATA[#{javascript:          
        var submittedValue=context.getSubmittedValue();
// evaluate the submitted value here ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:38:58.830

不是最好的版本，但它可以工作。将按钮添加到 XPage 并隐藏，然后使用 css。在您的应用程序布局中添加一个客户端脚本，该脚本使用 dojo.byId 获取按钮的句柄并对它们执行 click()。然后，当您单击不同的按钮时，很容易更新不同的面板。

# c++ - 如果初始化变量，编译器的性能会受到什么影响？

> ID：12612707
> 
> 赞同：1
> 
> 时间：2012-09-27T01:14:35.907
> 
> 标签：c++, c, performance, compiler-construction

萨特这样说：

> “在 C 和 C++ 类似的低级效率传统中，编译器通常不需要初始化变量，除非你明确地这样做（例如，局部变量，从构造函数初始化列表中省略的被遗忘的成员）”

我一直想知道为什么编译器不初始化int32和float之类的原语为0。如果编译器初始化它会对性能造成什么影响？它应该比不正确的代码更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:24:47.563

实际上，这个论点是不完整的。统一变量可能有两个原因：效率和缺乏合适的默认值。

*1) 效率*

大多数情况下，它是过去的遗留物，当时 C 编译器只是 C 到汇编翻译器并且不执行任何优化。

这些天来，我们有智能编译器和[死存储消除](http://llvm.org/docs/Passes.html#dse)，在大多数情况下可以消除冗余存储。演示：

```
int foo(int a) {
    int r = 0;
    r = a + 3;
    return r;
} 
```

转化为：

```
define i32 @foo(i32 %a) nounwind uwtable readnone {
  %1 = add nsw i32 %a, 3
  ret i32 %1
} 
```

尽管如此，在某些情况下，即使是更智能的编译器也无法消除冗余存储，这可能会产生影响。对于稍后零碎初始化的大型数组...编译器可能没有意识到所有值最终都会被初始化，因此不会删除冗余写入：

```
int foo(int a) {
    int* r = new int[10]();
    for (unsigned i = 0; i <= a; ++i) {
        r[i] = i;
    }
    return r[a % 2];
} 
```

请注意下面的调用`memset`（我需要为`new`调用加上`()`值初始化的后缀）。即使`0`不需要，它也没有被消除。

```
define i32 @_Z3fooi(i32 %a) uwtable {
  %1 = tail call noalias i8* @_Znam(i64 40)
  %2 = bitcast i8* %1 to i32*
  tail call void @llvm.memset.p0i8.i64(i8* %1, i8 0, i64 40, i32 4, i1 false)
  br label %3

; <label>:3                                       ; preds = %3, %0
  %i.01 = phi i32 [ 0, %0 ], [ %6, %3 ]
  %4 = zext i32 %i.01 to i64
  %5 = getelementptr inbounds i32* %2, i64 %4
  store i32 %i.01, i32* %5, align 4, !tbaa !0
  %6 = add i32 %i.01, 1
  %7 = icmp ugt i32 %6, %a
  br i1 %7, label %8, label %3

; <label>:8                                       ; preds = %3
  %9 = srem i32 %a, 2
  %10 = sext i32 %9 to i64
  %11 = getelementptr inbounds i32* %2, i64 %10
  %12 = load i32* %11, align 4, !tbaa !0
  ret i32 %12
} 
```

*2）默认？*

另一个问题是缺乏合适的值。虽然 a`float`可以完美地初始化为`NaN`，但整数呢？没有表示没有值的整数值，根本没有！`0`是一个候选者（除其他外），但有人可能会争辩说它是最差的候选者之一：它很可能是一个数字，因此可能对手头的用例具有特定含义；你确定你对这个默认的含义感到满意吗？

*深思熟虑*

最后，单元化变量还有一个优点：它们是可检测的。编译器可能会发出警告（如果它足够聪明的话），并且*Valgrind* **会**引发错误。这使得逻辑问题可以被**检测到**，并且只有检测到的问题才能被纠正。

当然，一个标记值，例如`NaN`，同样有用。不幸的是......整数没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:38:09.087

初始化可能会以两种方式影响性能。

首先，初始化变量需要时间。当然，对于单个变量，它可能可以忽略不计，但正如其他人所建议的那样，它可以与大量变量、数组等相加。

其次，谁能说零是合理的默认值？对于每一个零是有用的默认值的变量，可能还有另一个不是。在这种情况下，如果您确实将其初始化为零，则会产生进一步的开销，将变量重新初始化为您实际想要的任何值。您基本上支付了两次初始化开销，而不是在默认初始化未发生时支付一次。请注意，无论您选择什么作为默认值（零或其他），这都是正确的。

鉴于存在开销，不初始化并让编译器捕获对未初始化变量的任何引用通常更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:26:34.647

基本上，变量引用内存中的一个位置，可以对其进行修改以保存数据。对于一个未初始化的变量，程序只需要知道这个位置在哪里，编译器通常会提前计算出来，因此不需要任何指令。但是当你希望它被初始化时（比如说，0），程序需要使用额外的指令来做到这一点。

一个想法可能是在程序启动时使用 memset 将整个堆清零，然后初始化所有静态内容，但这对于在读取之前动态设置的任何内容都不需要。这对于基于堆栈的函数也是一个问题，每次调用函数时都需要将其堆栈帧归零。简而言之，允许变量默认为未定义会更有效，特别是当堆栈经常被新调用的函数覆盖时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:29:39.710

使用 -Wmaybe-uninitialized 编译并找出答案。这些是编译器无法优化原始初始化的唯一地方。

至于堆...

# javascript - 获取 html 元素作为字符串

> ID：12612709
> 
> 赞同：5
> 
> 时间：2012-09-27T01:14:57.873
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jQuery，获取整个元素的 html](https://stackoverflow.com/questions/3614212/jquery-get-html-of-a-whole-element)

假设我有：

```
<span>my span</span> 
```

我希望将 html 作为这个跨度的字符串

我用：

`var mySpan = $('span');`

如何处理 mySpan var 作为结果字符串`"<span>my span</span>"`

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T01:18:01.300

我认为这会有所帮助：http: [//jsfiddle.net/HxU7B/2/](http://jsfiddle.net/HxU7B/2/)。

* * *

更新。

`mySpan[0].outerHTML`将采用先前选定的节点并获得本机`outerHTML`属性。由于旧的 Firefox 版本没有该属性，我们可以使用一些 hack 来获取 html - 只需将节点克隆到 dummy `div`，然后获取此 div 的 innerHTML：`$('<div/>').append(mySpan.clone()).html()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:16:55.550

jQuery 无法做到这一点，但常规的 JavaScript DOM 对象可以：

```
var mySpanString = $('span').get(0).outerHTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T02:26:36.457

正如其他人所说，您可以使用**outerHTML**或**clone -> append -> html()**

但这里有另一种方法，

```
var nodeName = mySpan[0].nodeName.toLowerCase();
var outerHtml = "<"+nodeName +">"+mySpan.html()+"</"+nodeName +">"; 
```

# ruby-on-rails - javascript_include_tag 是否应该总是最后加载？

> ID：12612722
> 
> 赞同：1
> 
> 时间：2012-09-27T01:16:36.257
> 
> 标签：ruby-on-rails, view

[Railscast#369](http://railscasts.com/episodes/369-client-side-performance)解释了如何将 javascript_include 标记移动到 application.html.erb 的底部可以缩短加载时间，因为它允许页面与 javascript 同时加载。

从给出的简单示例来看，javascript 标记似乎应该始终位于页面底部。然而，Rails 默认将它放在顶部这一事实意味着（至少对我而言），这可能并不总是正确的。

什么时候有人不会将 javascript 标记移动到 application.html.erb 的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:09:48.213

如果您在加载之前调用任何 javascript，那么您可能会遇到问题。作为视图 (blah.html.erb) 文件中的示例，您可能有：

```
<script>
    jquery('#element_id').append("<p>Error Message</p>");
</script> 
```

它将查找由 include 标记加载的 jQuery。不是一个好的做法，但有时会发生。

此外，您可以使用一个 js 视图文件 (blah.js.erb)，它也会在加载之前查找 jQuery。

# java - 设置 java 系统属性、-D 或 System.setProperty() 的最佳实践是什么？

> ID：12612723
> 
> 赞同：11
> 
> 时间：2012-09-27T01:16:46.890
> 
> 标签：java

我需要为我目前正在处理的 RMI 应用程序设置代码库，并且首先使用成功完成了这项工作

```
try{
  ResourceBundle config = ResourceBundle.getBundle("myApp");
  String codeBaseUrl = config.getString("codeBaseUrl");
  System.setProperty("java.rmi.server.codebase", codeBaseUrl);
} catch (Exception e) {
  e.printStackTrace();
} 
```

后来使用

```
java -Djava.rmi.server.codebase=http://192.168.1.1/path/to/codebase ... 
```

在命令行上。

这两种方法都允许更改代码库而无需重新编译，但 System.setProperty 方法允许将代码库捆绑到属性文件中并使用相同的启动命令。

我读过的大多数教程/文档都使用 -D 方法，这让我相信这被认为是最佳实践，但我一直找不到任何解释为什么我应该使用其他方法的东西。

-D 是否被认为是设置系统属性（如代码库）的最佳实践，这有什么好处/它避免了哪些陷阱？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T01:21:04.457

（已编辑 - 我误读了这个问题）

比较两者：

*   `-D`是*可配置*的 - 它是在运行时指定的
*   资源包`System.setProperty()`仍然是“运行时”，但它是通过一个超出启动命令的文件进行编辑的

首先，通过在运行时指定设置来驱动灵活的行为总是比硬编码行为更可取（除非行为实际上并不灵活——即，除非这样做有价值，否则不要使用配置）。

使用文件的主要缺点是它可能包含敏感数据，例如密码，系统管理员不希望这些数据永久存在于磁盘上。如果密码是作为启动命令的一部分输入的，那么它是短暂的并且更加安全（会话命令历史记录不受限制）。

使用文件的好处是您可以建立正确的设置并将它们保留在文件中。您甚至可以通过源代码管理来管理文件。

还有另一个更安全的选择，那就是让启动程序要求在命令行上输入密码，这样就不会留下任何痕迹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T01:45:10.090

我会使用 System.setProperty （在应用程序的最顶部，因为对于某些属性，否则可能为时已晚），但从配置文件中获取信息。

您几乎已经这样做了，但我也允许设置任意属性，而不仅仅是一些硬编码的键。

我喜欢将它与我的应用程序已经使用的配置文件结合起来，该文件还包含其他（非 System.properties）设置。我通过在系统属性前面加上 -D 来区分两者（就像在命令行中一样）：

```
 # some configuration
 a.b.c = xxx

 # RMI settings
 -Djava.rmi.server.codebase = http://192.168.1.1/path/to/codebase 
```

将有一个默认位置可以找到此属性文件，但可以通过命令行开关覆盖（以便您可以在不同配置之间切换或轻松安装多个代码）。

拥有一个文件还有一个额外的好处，那就是它也可以用作文档（关于哪些选项可用，它们的默认值是什么等等）。

我真的希望 Java 有一个内置的工具来从属性文件中获取系统属性，以及其他 JVM 设置，如内存和类路径。目前，您必须自己完成所有这些工作，无论是在 Java 中还是在特定于操作系统的 shell 包装器中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T01:57:02.173

除非有特殊原因（例如避免暴露敏感信息或防止修改），否则我建议使用“-D”选项而不是使用 System.setProperty 添加属性。

*   它更简单（更少的代码）
*   它允许以独立于应用程序的方式直接配置
*   它避免了在您的应用程序代码有机会设置它们之前在初始化期间读取系统属性的问题。

我的另一个建议是不要将系统属性用作大量特定于应用程序的属性的垃圾场。如果您有很多应用程序配置属性，请使用单独的 Properties 对象（或更复杂的东西）并从单独的属性文件（或更复杂的东西）加载它。其他人可能不同意我的观点，但我发现这是一种更好的方法。

（但显然，如果您使用的是在系统属性中查看的标准或第 3 方子系统，那么这就是您需要做的。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T01:24:08.697

因为通过在运行时传入参数，您可以轻松地拥有一个用于开发和生产（以及其他）环境的代码库，而无需将语句硬编码到您的代码中。例如，在开发中您可能想要连接到 192.168.0.1 的服务器，而在生产中您可能想要连接到 10.0.1.1。为了通过使用 System.setProperty 进行硬编码来实现此结果，您需要有条件语句，这可能会变得混乱。

您通常不希望为每个环境重新编译您的应用程序，因此在运行时传递参数或使用可以根据系统更改的某种类型的属性文件通常是最方便的。

# java - 使用 JarJar 重新打包工具

> ID：12612726
> 
> 赞同：12
> 
> 时间：2012-09-27T01:17:15.963
> 
> 标签：java, google-app-engine, jersey

我已将 Web 应用程序部署到 Google 应用程序引擎，并且我的 Web 服务使用 jersey 1.14 框架。当我尝试在 GAE 上使用或调用 Web 服务时，我得到一个 java.lang.IncompatibleClassChangeError：Implementing class。我四处搜索并意识到 jersey 1.14 依赖于 asm 3.1 而 google app engine 使用 asm 4.0 并意识到我必须使用 JarJar 来打包依赖项来解决这个问题，但我不知道如何做到这一点与罐子。我发现的教程非常神秘，面向有经验的程序员。所以有人可以发布一个面向初学者的教程，或者引导我完成解决这个问题的步骤。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-11-08T09:33:35.397

好吧，这是一个很晚的答案，但是如果有人经过可能会有所帮助。我将举一个例子来解释这一点。jarjar 可用于重新打包 java 库。它可用于更改命名空间，例如 org.apache.common.codec 需要更改为 some_random_name.org.apache.common.codec。稍后从[jarjar 下载站点](https://code.google.com/p/jarjar/downloads/list)下载 jarjar将要更改的 jar 文件 (myinjar.jar) 和下载的 jarjar 粘贴到一个文件夹中并`java -jar jarjar-1.4.jar process myrules.txt myinjar.jar myoutjar.jar`在 myrules.txt 中运行此命令添加这些行

```
rule org.apache.commons.codec.** some_random_name.org.apache.commons.codec.@1 
```

输出 myoutjar.jar 将保存到同一文件夹中，您可以在项目中使用它而不会发生任何冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T12:43:54.013

您可以使用 jdk 的 jar 命令来提取和合并 jar 文件。
*jar -xvf firstjar.jar* .... 它将提取 jar 类文件夹/包明智 -com/pak1/pak2
现在同样提取第二个 jar 并合并两个展开的文件夹
不，您可以创建一个合并的类文件的 jar。
*jar -cvf mappedjar.jar [folders name [ex com org ...]]*，有关详细信息，请检查 jar 命令的工作方式。

# javascript - 如何在 JavaScript 游戏中添加可点击文本

> ID：12612727
> 
> 赞同：-3
> 
> 时间：2012-09-27T01:17:21.243
> 
> 标签：javascript, html

我正在制作一个 javascript 游戏，我希望能够添加一个主菜单，但我不知道确切的方法。我正在寻找一种使 filltext() 可点击但无济于事的方法。我查了一下，但没有找到适合我需要的答案。游戏原型可以在这里查看：sketchy.idreesinc.com。有谁知道无论如何要实施这个？我正在使用 javacript 和 HTML5 的 canvas 元素，但我更喜欢 javascript。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:17:06.703

# 首先要了解 HTML 和 canvas 的事情

## DOM

HTML 元素是 DOM（文档对象模型）的一部分，它是网页的数据结构。DOM 元素可以具有触发事件（如`click`），并且事件侦听器对这些事件做出反应。

## 浏览器

您的 Web 浏览器将 DOM 元素转换为屏幕上的像素。它还处理输入并确定在您单击页面时要触发的元素事件。

## 帆布

该`canvas`元素允许您渲染位图图像。您基本上可以通过一些 javascript 调用在像素网格上设置颜色以制作漂亮的图片。

# 这一切意味着什么

当您在 HTML（标签）中创建链接元素时，`<a>`浏览器会呈现文本并将点击侦听器附加到元素，以便链接实际工作。

当您使用 javascript 在画布上绘制像素时，浏览器对 DOM 的理解停留在画布上。浏览器知道 DOM 并且 DOM 知道画布，但它不跟踪画布中绘制的各个项目。

# 答案

您实际上无法将事件附加到画布中的文本，但是有很多方法可以获得*单击文本的所需行为，发生了一些事情*。

一种方法是将单击事件附加到，`canvas`但不是始终运行此事件侦听器的简单事件侦听器，而是需要检查单击是否发生在文本上或画布上的其他位置。

事件侦听器函数使用包含`Event`事件信息的参数调用。

# 谷歌的东西

一些关于这些的快速阅读应该让您开始使用工作菜单。

*   注册 javascript 事件监听器
*   javascript事件鼠标坐标

# javascript - 在javascript中使用for循环将多个元素绑定到事件处理程序

> ID：12612735
> 
> 赞同：0
> 
> 时间：2012-09-27T01:17:49.463
> 
> 标签：javascript, jquery, html, css

我找到了一种将带有 for 循环的数组中的单个元素绑定到 jQuery 中的事件处理程序的方法。

本指南有助于将我推向那个方向：
[http ://www.foliotek.com/devblog/keep-variable-state-between-event-binding-and-execution/](http://www.foliotek.com/devblog/keep-variable-state-between-event-binding-and-execution/)

现在我更深一层，我正在尝试将数组中具有相同前缀的多个元素绑定到 jQuery 中的事件处理程序。

## 这是有效的：

```
var menu=new Array("#power","#services","#cashback","#schedule");

$(document).ready(function(){
    $(function() {
        for(var i in menu)
        {
            (function() {
                var x = menu[i];
                var y = menu[i]+'_menu';
                 $(x).hover(
                     function () {
                        $(x).css({ backgroundColor: "#000", color: "#3ABCEF"});
                        $(y).show();
                     },
                     function () {
                        $(x).css({ backgroundColor: "#333", color: "#FFF"});
                        $(y).hide();
                     }
                );
                 $(y).hover(
                     function () {
                        $(x).css({ backgroundColor: "#000", color: "#3ABCEF"});
                        $(y).show();
                     },
                     function () {
                        $(x).css({ backgroundColor: "#333", color: "#FFF"});
                        $(y).hide();
                     }
                );
            })();
        }
    }); 
}); 
```

## 这是我真正想要的：

```
var menu=new Array("#power","#services","#cashback","#schedule");

$(document).ready(function(){
    $(function() {
        for(var i in menu)
        {
            (function() {
                var x = menu[i];
                var y = menu[i]+'_menu';
                 $(x,y).hover(
                     function () {
                        $(x).css({ backgroundColor: "#000", color: "#3ABCEF"});
                        $(y).show();
                     },
                     function () {
                        $(x).css({ backgroundColor: "#333", color: "#FFF"});
                        $(y).hide();
                     }
                );
            })();
        }
    }); 
}); 
```

## 更新 ::: 这是最终的工作实施：

```
var menu=new Array("#power","#services","#cashback","#schedule");

$(document).ready(function(){
    for(var i in menu)
    {
        (function(x, y) {
             $(x+','+y).hover(
                 function () {
                    $(x).css({ backgroundColor: "#000", color: "#3ABCEF"});
                    $(y).show();
                 },
                 function () {
                    $(x).css({ backgroundColor: "#333", color: "#FFF"});
                    $(y).hide();
                 }
            );
        })(menu[i], (menu[i] + '_menu'));
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:28:01.380

替代变量 x 和 y 设置函数参数运行 @param

```
(function(x, y) {

             $(x+','+y).hover(
                 function () {
                    $(x).css({ backgroundColor: "#000", color: "#3ABCEF"});
                    $(y).show();
                 },
                 function () {
                    $(x).css({ backgroundColor: "#333", color: "#FFF"});
                    $(y).hide();
                 }
            );
})(menu[i], (menu[i] + '_menu')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:21:17.887

不要`$`使用两个参数调用，将它们加入一个字符串：

```
$(x + "," + y).hover( 
```

这样，您将获得所需的选择器：`"#power,#power_menu"`等等。`$`使用两个参数调用只会将第一个用作选择器，将第二个视为要从中选择的上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:24:36.340

```
$(menu.join(', ')).hover(); 
```

然后在悬停调用的匿名函数中：

```
var _this = $(e.target);
var id = _this.attr('id');
var secondary_elm = $('#' + id + '_menu');
secondary_elm.show(); 
```

最终结果是这样的：

```
 $(menu.join(', ')).hover(
                 function (e) {
                    var _this = $(e.target);
                    var id = _this.attr('id');
                    var secondary_elm = $('#' + id + '_menu');
                    secondary_elm.show();
                 },
                 function (e) {
                    var _this = $(e.target);
                    var id = _this.attr('id');
                    var secondary_elm = $('#' + id + '_menu');
                    secondary_elm.show();
                 }
            ); 
```

这留下了悬停在辅助元素上。在不了解 HTML 结构的情况下，我想这是您想要重新检查的内容。开始使用 .hover() 事件是一件痛苦的事情。当你开始听多个不同的元素来做同样的事情时，你会要求一大堆混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:30:20.783

```
jQuery(function($) {

    // put this in your loop body:

    var $x = $('#x');
    var $y = $('#' + $x.attr('id') + '_menu');

    function mouseIn(event) {
        var $this = $(event.target);    // x or y
        $x.css({ backgroundColor: "#000", color: "#3ABCEF"});
        $y.show();
    }

    function mouseOut(event) {
        var $this = $(event.target);    // x or y
        $x.css({ backgroundColor: "#333", color: "#FFF"});
        $y.hide();
    }

    $x.add($y).hover(mouseIn, mouseOut);
}); 
```

# http - 是否可以从 http 响应头生成完整的 url

> ID：12612736
> 
> 赞同：0
> 
> 时间：2012-09-27T01:17:57.233
> 
> 标签：http, url, filter, network-programming, http-headers

我希望获得服务器通过其 http-header(response) 设置的文件的完整 url。我正在做某种数据包过滤。是否可以从 http 响应标头生成完整的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:43:59.893

不，这是不可能的。您需要实际的 HTTP 请求。

# .net - 从 .NET 4.0 和 Visual Studio 2010 过渡到 .NET 4.5 和 Visual Studio 2012

> ID：12612743
> 
> 赞同：0
> 
> 时间：2012-09-27T01:18:32.317
> 
> 标签：.net, wpf, wpf-controls

WPF 和 WCF 开发人员。编写业务应用程序和 UI 非常基础。想要转到 4.5 以获得并行处理的便利性和功能。

通常，在 Visual Studio 的新版本中，我会阅读一本关于 WPF 的书和一本关于 .NET 的书。
每个都有我最喜欢的作者。

在这一点上，我得到的印象是 UI 端 .NET 4.5 与 4.0 并没有什么不同。
我没有看到 4.5 中的新 UI 控件。

我需要阅读有关 WPF 4.5 的书吗？UI 的变化是否足以证明刷新的合理性？

已经接近投票，我得到（并接受）它。
我是否应该提出另一个问题，即 4.5 中是否有任何新的 UI 控件从 4.0 开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:17:25.670

WPF 4.5 中几乎没有与数据库相关的有用改进和新功能。

有一个“功能区”控件。

更多信息：http: [//msdn.microsoft.com/en-us/library/bb613588.aspx](http://msdn.microsoft.com/en-us/library/bb613588.aspx)

阅读一些关于新对象和属性的文档。你不需要整本书。

# .htaccess - .htaccess 使用查询字符串变量重定向

> ID：12612745
> 
> 赞同：0
> 
> 时间：2012-09-27T01:18:39.230
> 
> 标签：.htaccess

我怎样才能重定向一个像 `http://sample.com/view_image?v=random key like youtube`

到

`http://sample.com/view/?v=random key like youtube`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:21:53.973

在文档根目录的 htaccess 文件中，您可以执行以下任一操作：

```
Redirect 301 /view_image /view/ 
```

或者

```
RedirectMatch 301 ^/view_image$ /view/ 
```

或者，如果您已经有规则并且不希望 mod_alias 指令与您现有的重写规则冲突，则可以使用 mod_rewrite：

```
RewritRule ^/?view_iamge$ /view/ [L] 
```

在所有三种情况下，`?v=something`查询字符串都会自动附加到末尾。

# javascript - 我需要担心吗？- “暴露 chrome JS 对象...”

> ID：12612746
> 
> 赞同：0
> 
> 时间：2012-09-27T01:18:39.710
> 
> 标签：javascript, firefox, firebug

我一直在 Firebug 中看到以下错误，但我不明白它的含义或它是否重要：

> 将 chrome JS 对象暴露给内容`__exposedProps__`是不安全的并且已弃用。有关详细信息，请参阅[https://developer.mozilla.org/en/XPConnect_wrappers](https://developer.mozilla.org/en/XPConnect_wrappers)。

提供的链接有点超出我的想象。

我的问题是：

*   我应该担心我网站上的这个错误吗？
*   如何防止此错误？
*   *有人可以用外行的*术语解释这意味着什么的基础知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:56:33.570

根据[这个关于 jQuery 的错误报告](http://bugs.jquery.com/ticket/12470)，这将是 FireQuery 的问题，而不是你正在做的任何事情。

您是否安装了 FireQuery 和 Firebug？如果是这样，请尝试禁用它并查看错误是否仍然发生。

# javascript - 字符串异或加密因某些密钥而失败

> ID：12612747
> 
> 赞同：0
> 
> 时间：2012-09-27T01:18:41.867
> 
> 标签：javascript, encryption, xor

我正在尝试用php“加密”一个字符串（js代码），然后使用javascript对其进行解码。

这是php函数：

```
function xor_string( $text, $xorKey ) {
    $xored = '';
    $chars = str_split( $text );

    $i = 0;

    while ( $i < count( $chars ) ) {
        $xored .= chr( ord( $chars[$i] ) ^ $xorKey );
        $i++;
    }

    return $xored;
} 
```

这是js函数：

```
function xor_string( str, key ) {
    var xored = "";
    for (i=0; i<str.length;i++) {
        var a = str.charCodeAt(i);
        var b = a ^ key;
        xored = xored+String.fromCharCode(b);
    }
    console.log(xored);
} 
```

对于某些键，这种方式可以双向使用，但对于其他键则失败，例如：

```
echo urlencode( xor_string( 'document.location.href.search', 67 ) ); 
```

回报：

```
%27%2C+6.%26-7m%2F%2C+%227%2A%2C-m%2B1%26%25m0%26%221+%2B 
```

当我尝试使用javascript“解码”它时：

```
var str = decodeURIComponent("%27%2C+6.%26-7m%2F%2C+%227%2A%2C-m%2B1%26%25m0%26%221+%2B");
xor_string( str, 67 ); 
```

它返回：

```
dohument.lohation.href.searhh 
```

**任何人都知道为什么会这样？**

对于某些“键”，例如 120 和其他键，它可以正常工作，但对于许多其他键，它会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:28:37.840

经典:-)

PHP`urlencode`与 JavaScript 并不完全相同`encodeURIComonent`：它们处理空白的方式不同；一种用途`+`，另一种`%20`。

你需要处理它，例如[phpjs 提供了一个 PHP-compliant`decodeURI`函数](http://phpjs.org/functions/urldecode)。

```
> var phpstring = "%27%2C+6.%26-7m%2F%2C+%227%2A%2C-m%2B1%26%25m0%26%221+%2B";
> xor_string(decodeURIComponent(phpstring.replace(/\+/g, "%20")), 67 );
"document.location.href.search" 
```

`xor`正如您可能注意到的那样，此错误仅命中使用您的函数（及其参数）编码为空格的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:41:46.493

更好的解决方案是使用`rawurlencode()`而不是`urleconde()`.

`rawurlencode()`会将空格转换为“%20”，但`urlencode()`会将空格转换为“+”。'%20' 是`decodeURIComponent()`对空间的期望。

请参阅以下完整示例：

```
<?php
    function xor_string( $text, $xorKey ) {
    $xored = '';
    $chars = str_split( $text );
    $i = 0;
    while ( $i < count( $chars ) ) {
        $xored .= chr( ord( $chars[$i] ) ^ $xorKey );
        $i++;
    }
    return $xored;
    }
?><html>
<body>
Encoded (php):
<div id="phpUrlEncode">
<?=urlencode( xor_string( 'document.location.href.search', 67 ) )?>
</div>
<div id="phpRawUrlEncode">
<?=rawurlencode( xor_string( 'document.location.href.search', 67 ) )?>
</div>
<br />
Decoded (js):
<div id="jsDecodeUrl"></div>
<div id="jsDecodeRawUrl"></div>
<script type="text/javascript">
function decodeStr(rawId,displayId) {
    var raw = document.getElementById(rawId).innerHTML;
    document.getElementById(displayId).innerHTML = xor_string(decodeURIComponent(raw),67);
}

function xor_string( str, key ) {
    var xored = "";
    for (i=0; i<str.length;i++) {
        var a = str.charCodeAt(i);
        var b = a ^ key;
        xored = xored+String.fromCharCode(b);
    }
    //console.log(xored);
    return xored;
}

decodeStr('phpUrlEncode','jsDecodeUrl');
decodeStr('phpRawUrlEncode','jsDecodeRawUrl');
</script>
</body>
</html> 
```

# css - 如何自定义 twitter bootstrap CSS 的默认值？例如类=容器

> ID：12612751
> 
> 赞同：-1
> 
> 时间：2012-09-27T01:19:23.737
> 
> 标签：css, twitter-bootstrap

在我的`<head>`标签中，我放置了`bootstrap.css`

如果我放置`<div class="container">`它会创建一个固定的宽度。我想要发生的是`container`通过导入另一组样式表来操纵宽度的默认值。

另一种情况是，如果我放置了一个`span8`如何在没有实际编辑的情况下在其上放置背景颜色`bootstrap.css`，则使用新的样式表对其进行自定义。

放2个样式表可能吗？然后继承/操作`bootstrap.css`新样式表中的所有值？

如果我的解释不是那么清楚，我深表歉意。很难用语言表达我想要发生的事情。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:29:54.460

添加第二个样式表时，可以覆盖第一个样式表的规则。只需确保以正确的顺序将它们添加到您的 html 页面。

如果您想确保规则不会被覆盖，您可以添加**!important**。例子：

```
.example {
    color: red !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:33:53.700

对的，这是可能的。这就是 CSS 的“级联”部分。简短的回答是在 bootstrap.css 之后和 responsive.css 之前添加您自己的样式表，您的样式将被使用，因为它们是最新定义，即规则“级联”下来。

长答案是[看看文档](http://www.w3.org/TR/CSS21/cascade.html)。如果你有时间，那里有很多东西要学。

还可以查看[引导程序自定义页面](http://twitter.github.com/bootstrap/customize.html)

# objective-c - 如何将 GPUImage 添加到 iOS 项目中？

> ID：12612752
> 
> 赞同：6
> 
> 时间：2012-09-27T01:19:26.327
> 
> 标签：objective-c, ios, gpuimage

我正在尝试制作一个相机/照片应用程序，它将在图像上添加过滤器。我听说过 Brad Larson 的 GPUImage，所以我下载了它并尝试操作它以更熟悉代码。

现在，我在 Xcode 中创建了一个新项目并将其添加到我的框架中，但我不知道如何在新项目中使用它。

如何在我的新项目中正确使用 GPUImage？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T13:31:54.150

[我不知道我怎么能比我在 GitHub 项目的第一页](https://github.com/BradLarson/GPUImage)和“将框架添加到您的 iOS 项目”部分下的 README.md 中的分步说明更清楚：

> 一旦您获得了该框架的最新源代码，就可以非常简单地将其添加到您的应用程序中。首先将 GPUImage.xcodeproj 文件拖到应用程序的 Xcode 项目中，以将框架嵌入到项目中。接下来，转到应用程序的目标并将 GPUImage 添加为目标依赖项。最后，您需要将 libGPUImage.a 库从 GPUImage 框架的 Products 文件夹拖到应用程序目标中的 Link Binary With Libraries 构建阶段。
> 
> GPUImage 需要一些其他框架才能链接到您的应用程序中，因此您需要在应用程序目标中添加以下内容作为链接库：
> 
> *   核心媒体
> *   核心视频
> *   OpenGLES
> *   AV基金会
> *   石英芯
> 
> 您还需要找到框架标头，因此在项目的构建设置中，将标头搜索路径设置为从应用程序到 GPUImage 源目录中 framework/ 子目录的相对路径。使此标头搜索路径递归。
> 
> 要在您的应用程序中使用 GPUImage 类，只需使用以下内容包含核心框架标头：
> 
> ```
> #import "GPUImage.h" 
> ```
> 
> 注意：如果您在尝试使用 Interface Builder 构建界面时遇到错误“Unknown class GPUImageView in Interface Builder”等，您可能需要在项目的构建设置中将 -ObjC 添加到您的 Other Linker Flags 中。
> 
> 此外，如果您需要将其部署到 iOS 4.x，当前版本的 Xcode (4.3) 似乎要求您在最终应用程序中弱链接 Core Video 框架，否则您会看到崩溃并显示消息“未找到符号” : _CVOpenGLESTextureCacheCreate" 当您创建存档以上传到 App Store 或进行临时分发时。为此，请转到项目的 Build Phases 选项卡，展开 Link Binary With Libraries 组，然后在列表中找到 CoreVideo.framework。将列表最右侧的设置从必需更改为可选。
> 
> 此外，这是一个支持 ARC 的框架，因此如果您想在针对 iOS 4.x 的手动引用计数应用程序中使用它，您还需要将 -fobjc-arc 添加到您的其他链接器标志中。

要查看实际情况，请查看我随框架提供的许多示例应用程序中的任何一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T01:57:35.857

请阅读此页面[http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)和此：[https ://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

注意：简单来说，你可以将framework/source文件夹中的所有源代码文件复制到你的项目中，并导入GPUImage.h来使用。

问候！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-20T05:43:08.900

将 GPUImage 集成到项目中的最简单的方法可能是通过[cocopods](/questions/tagged/cocopods "显示标记为“cocopods”的问题")。尽管 Brad 实际上并未维护 GPUImage CocoaPods 存储库，但它的维护非常定期，它使集成变得轻而易举。

# [`>`去实现它（梦想）;去得到它（东西](http://cocoapods.org/pods/GPUImage)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-31T23:04:49.517

以下是如何在**Xcode** for **iOS的****Swift 5**中使用 Visual Directions 执行此操作：

 ****在你开始之前有两件事。

*   **你应该在你的项目的副本/副本**上开始这个过程，直到你得到它正确（我花了几次尝试），或者甚至从一个新项目开始。如果出现问题，您希望保持原始项目完好无损
*   如果您打开了一个项目，其中包含您尝试复制的 GPUImage，请确保先将其关闭。你会得到一个错误，说有一个项目已经打开

[![在此处输入图像描述](../Images/220723be5f9662ab38fad55c7f814c91.png)](https://i.stack.imgur.com/NYUTQ.png)

1- 转到 GPUImage [gitHub 页面](https://github.com/BradLarson/GPUImage3)

2-在右上角，单击绿色`Code`按钮，然后单击`Download Zip`

[![在此处输入图像描述](../Images/5a97a967a328be116b3ef24ab213c35e.png)](https://i.stack.imgur.com/ROjcP.png)

3- 在您当前的 Xcode 项目（您要使用 GPUImage 的项目）中单击蓝色项目图标下方的第一个文件夹

[![在此处输入图像描述](../Images/fa0b446a6e56b8904ddbfd037b09a1ed.png)](https://i.stack.imgur.com/dIXVD.png)

4-之后转到Xcode的顶部并单击`File`>`Add Files to "yourProject"`

[![在此处输入图像描述](../Images/1b2dbcd31b7bd78a3acb6d702289491e.png)](https://i.stack.imgur.com/3nu8G.png)

5-当新窗口出现时，转到`Downloads`（或您在第二步中下载 GPUImage 的任何位置）> `GPUImage3-master`> `framework`>`GPUImage.xcodeproj`然后单击`Add`。确保`Copy Items if Needed`并`Create groups`接受检查很重要。

[![在此处输入图像描述](../Images/51edf26599f435cbf13b3086f42286b0.png)](https://i.stack.imgur.com/6jrEB.png)

6-您现在将`GPUImage.xcodeproj`在第 3 步中的同一文件夹下看到您的 Xcode 项目（无需对其进行任何操作）

[![在此处输入图像描述](../Images/a73ae7815186f6b05d10cf64dcf7fa5a.png)](https://i.stack.imgur.com/baHhd.png)

7-单击您的**主**项目的`blue project icon`>`Build Phases`并且中间/中心窗格应该打开`TARGETS`。确保**不要单击****GPUImage.xcodeproj**，即错误文件夹

[![在此处输入图像描述](../Images/5426b5633e1d2c14662879ed28ed0e00.png)](https://i.stack.imgur.com/yA7Ru.png)

8-仍在构建阶段下单击`Dependencies`，然后单击`plus sign`

[![在此处输入图像描述](../Images/4cfd8d6eaecf3ba6144b2051caaed329.png)](https://i.stack.imgur.com/61OG2.png)

9-当弹出窗口出现时选择`GPUImage_iOS`然后选择`Add`（确保选择**iOS**版本而不是 macOS 版本）

[![在此处输入图像描述](../Images/edcc2f41c24d00fd61e6f31f075c7eb8.png)](https://i.stack.imgur.com/DtINR.png)

10-您现在将看到下面的`GPUImage_iOS`依赖项`Dependencies`（此处无需执行任何操作）

[![在此处输入图像描述](../Images/6397ebba1d53219e644e3cca8b7ed620.png)](https://i.stack.imgur.com/K4rn7.png)

11 - 现在仍然在`Build Phases`单击`Link Binary`库，然后单击`plus sign`

[![在此处输入图像描述](../Images/c91235b1046c2c7f21f849da5c730b46.png)](https://i.stack.imgur.com/nWDWi.png)

12-当弹出窗口出现在*Workspace* > *GPUImage* > select`GPUImage.framework from 'GPUImage_iOS' target ...`然后按`Add`（确保选择`iOS`版本而不是 macOS 版本）

[![在此处输入图像描述](../Images/3401aada52976f6dc6e2d1b401487d47.png)](https://i.stack.imgur.com/SpSnf.png)

13-现在图书馆已链接（无需在这里做任何事情）

[![在此处输入图像描述](../Images/ddc7f1062b97502c5c9755d653742fb8.png)](https://i.stack.imgur.com/rRVOZ.png)

14(a)- 这很重要，如果在 Build Phases 下没有**Copy Files 文件** 夹，则转到 Xcode 顶部并选择`Editor`> `Add Build Phase`> `Add Copy Files Build Phase`。如果文件夹已经存在，**我不确定如果文件夹已经存在该怎么办**。*Copy Files 文件*夹最初并不适合我，我使用步骤 14(b) 创建了它。我**假设**它是否已经存在，只需打开它并继续执行**第 16 步**

[![在此处输入图像描述](../Images/e2ec260a264220d9ecacb63ab771c845.png)](https://i.stack.imgur.com/SD1nS.png)

`Add Copy Files Build Phase`14(b)-如果由于某种原因**变灰**，[请执行此操作](https://stackoverflow.com/a/28446747/4833705)或在`Build Phases`左上角按`plus sign`，然后选择`New Copy Files Phase`

[![在此处输入图像描述](../Images/ae6206d378f8c2716ed625340a97430b.png)](https://i.stack.imgur.com/vGEsZ.png)

`Copy Files`15- 现在您将在 Build Phases 下看到一个全新的目录

[![在此处输入图像描述](../Images/daf7049b870c1ccca0ad18abccc2d19a.png)](https://i.stack.imgur.com/deU2z.png)

16-如果`Copy Files`尚未打开，请按切换按钮将其打开，然后`Destination`更改`Resources`为`Framework`

[![在此处输入图像描述](../Images/3105f4e8f57b176b70413b647293c822.png)](https://i.stack.imgur.com/Tmq6B.png)

17- 在 下`Copy Files`，按`plus sign`，当弹出窗口出现时，如果这是一个**iOS**项目，在 下`Products`，选择**顶部** `GPUImage.framework`并按添加。最后一步是在布拉德的指导下

> 添加一个新的 Copy Files 构建阶段，将其目标设置为 Frameworks，并将**上层 GPUImage.framework（适用于 iOS）**或下层 GPUImage.framework（适用于 Mac）添加到该阶段

[![在此处输入图像描述](../Images/40606096358aae1237f89c217675c66e.png)](https://i.stack.imgur.com/8ayxs.png)

18-现在`GPUImage.framework`刚刚添加到`Copy Files`

[![在此处输入图像描述](../Images/3be5ef542cf268ca11ec51ec23a39280.png)](https://i.stack.imgur.com/maWUS.png)

19-您的构建阶段屏幕应该如下所示

[![在此处输入图像描述](../Images/33757386db0012b48825b98930b5cd95.png)](https://i.stack.imgur.com/znTJ3.png)

20-清理项目`Shift+Command+K`

21-在您打算使用 GPUImage 的任何文件中转到顶部并输入`import GPUImage`（它应该开始出现在自动完成下）然后构建您的项目。

[![在此处输入图像描述](../Images/d20a2be1ff8f5e059802859d29df1a9b.png)](https://i.stack.imgur.com/6pffc.png)

22-测试GPUImage中的类和方法是否在你的项目中工作

```
// nothing is supposed to actually happen here, just test to see if the SmoothToonFilter() class and filterWithOperation() method are recognized without any errors
let testImage = UIImage(named:"some_image_from_your_assets")!
let toonFilter = SmoothToonFilter()
let _ = testImage.filterWithOperation(toonFilter) 
```

[![在此处输入图像描述](../Images/24fd913df2db679ceb40c9372a987261.png)](https://i.stack.imgur.com/dJogm.png)

完毕！****

# facebook - 无法在 facebook 上注册网站

> ID：12612754
> 
> 赞同：0
> 
> 时间：2012-09-27T01:19:40.180
> 
> 标签：facebook, authentication

我想在我的网站上安装 Facebook 登录，所以我去这里： [https ://developers.facebook.com/docs/guides/web/#login](https://developers.facebook.com/docs/guides/web/#login)

我必须注册我的网站，所以我单击链接并转到此处： [https ://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

我选择了网站选项，但它让我回到了原来的位置：developers.facebook.com/docs/guides/web/

有什么我做错了吗？是的，我在执行此操作时已登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:22:18.043

[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)在此页面中，只需单击右上角的创建新应用程序。

# database - 为什么向数据库字段添加索引会加速对该字段的搜索？

> ID：12612756
> 
> 赞同：15
> 
> 时间：2012-09-27T01:19:52.333
> 
> 标签：database, search, conceptual

我是数据库新手，并且一直在阅读向需要搜索的字段添加索引可以显着加快搜索时间。我理解这个现实，但很好奇它实际上是如何工作的。我已经对这个主题进行了一些搜索，但没有找到任何好的、简洁的、而不是关于它如何工作的技术性答案。

我读过它类似于书后的索引的类比，但是对于唯一元素的数据字段（例如用户数据库中的电子邮件地址），使用书后类比将提供与非索引搜索相同的线性查找时间。

这里发生了什么来加快搜索时间？我已经阅读了一些关于使用[B+-Trees](http://en.wikipedia.org/wiki/B%2Btree#Search)进行搜索的内容，但是描述有点太深入了。我正在寻找的是对正在发生的事情的高级概述，以帮助我从概念上理解它，而不是技术细节。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-27T05:06:05.757

扩展搜索算法的效率，数据库性能的一个关键领域是访问数据的速度。一般来说，从磁盘读取数据比从内存读取数据慢很多。

为了说明这一点，让我们假设所有内容都存储在磁盘上。如果您需要在表中的每一行数据中搜索某个字段中的某些值，您仍然需要从磁盘中读取整行数据以查看是否匹配——这通常称为“表扫描” '。

如果您的表是 100MB，那么您需要从磁盘读取 100MB。

如果您现在对要搜索的列进行索引，简单来说，索引将存储数据的每个唯一值以及对相应整行数据的确切位置的引用。与整个表的 100MB 相比，该索引现在可能只有 10MB。

从磁盘读取 10MB 的数据（读取每个匹配的完整行数据可能需要多一点）比读取 100MB 快大约 10 倍。

不同的数据库将以不同的方式将索引或数据存储在内存中，以使这些事情变得更快。但是，如果您的数据集很大并且不适合内存，那么磁盘速度会产生巨大的影响，而索引可以显示出巨大的收益。在内存中仍然可以有很大的性能提升（以及其他效率）。

一般来说，这就是为什么你可能不会注意到索引一个很容易放入内存的小数据集有任何明显的区别。

底层细节会因系统而异，实际上会复杂得多，但我一直发现磁盘读取与内存读取是一种易于理解的解释方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T04:48:02.553

好的，经过一番研究和讨论，这是我学到的：

从概念上讲，索引是它正在索引的数据字段的排序副本，其中每个索引值都指向它的原始（未排序）行。因为数据库知道值是如何排序的，所以它可以应用更复杂的搜索算法，而不仅仅是从头到尾查找值。[二进制搜索算法](http://en.wikipedia.org/wiki/Binary_search_algorithm)是排序列表搜索算法的一个简单示例，它将最大搜索时间从*O(n)*减少到*O(log n)*。

附带说明：一个体面的排序算法通常需要*O(n log n)*才能完成，这意味着（正如我们之前可能听说过的）你应该只在你经常搜索的字段上放置索引，因为它有点多添加索引（包括排序）比进行几次完整搜索要昂贵。例如，在超过 1,000,000 个条目的大型数据库中，排序的成本比搜索一次的成本高 20 倍。

编辑：请参阅@Jarod Elliott 的[答案](https://stackoverflow.com/a/12614426/1642982)，以更深入地了解搜索效率，特别是关于从磁盘操作读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:29:52.597

继续您的书后类比，如果页面*按该元素排序，*则查找时间与非索引搜索相同，是的。

但是，如果您的书是按作者排序的书评列表，但您只知道 ISBN，该怎么办。ISBN 是独一无二的，是的，但您仍然需要扫描每条评论才能找到您正在寻找的评论。

现在，在书的后面添加一个索引，按 ISBN 排序。繁荣，快速的搜索时间。这类似于数据库索引，从索引键 (ISBN) 到实际数据行（在本例中为您的书的页码）。

# paypal - 以下PayPal产品之间有什么关系？

> ID：12612757
> 
> 赞同：1
> 
> 时间：2012-09-27T01:20:20.990
> 
> 标签：paypal

PayPal 为其支付产品制定了复杂的命名策略，但其中一些似乎具有共同的构建块。以下产品品牌如何相关，它们的历史是什么？

这三个似乎是最新的产品：

*   贝宝支付标准
*   贝宝付款高级
*   贝宝支付专业版
*   贝宝支付专业版（PayFlow 版）

这两个似乎已被弃用或即将退出：

*   网站付款标准
*   网站支付专业版

上述产品的文档似乎经常引用“PayFlow”产品：

*   贝宝支付流链接
*   贝宝支付流专业版

这似乎是上述产品中的一些（但不是全部）的基础，而这两个实际上可能是同一个产品：

*   贝宝支付网关
*   Payflow支付网关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:40:57.697

请参考以下博客（最近写的），其中详细解释了 PayPal API 和产品

[http://whyidentity.blogspot.in/2012/09/paypal-apis-galaxy-not-so-far-away.html](http://whyidentity.blogspot.in/2012/09/paypal-apis-galaxy-not-so-far-away.html)

如果您需要更多详细信息，请告诉我们

# iphone - iPhone5 的默认 568h@2x.png

> ID：12612767
> 
> 赞同：10
> 
> 时间：2012-09-27T01:21:06.420
> 
> 标签：iphone, ios, splash-screen, iphone-5, launching-application

我想更新我的应用程序，以便可以部署在 iPhone5 上。

Xcode(4.5) 有一个 Default-568h@2x.png 是一个黑色图像 (640X1136)。

在 iPhone5 的模拟器中，它仍然加载旧的 Default@2x.png。我想知道它在实际设备上是否相同？

谢谢！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T01:32:21.270

从模拟器中的硬件菜单切换到“iPhone (Retina 4-inch)”设备，您应该会在启动时看到 iPhone 5 的默认图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T15:22:28.153

**当我使用iOS 5.1**启动 iPhone 4" 模拟器时发生在我身上。当更改为**iOS 6**时，启动图像就可以了。

# c - 使用 sscanf 从 C 中的字符串常量中读取单个字符

> ID：12612789
> 
> 赞同：1
> 
> 时间：2012-09-27T01:24:16.423
> 
> 标签：c, string, c-strings

我正在尝试从传递给函数的字符串常量中读取单个字符并将它们放入数组中。我想要的最终结果是一个字符串数组，它与字符串常量相同。这是我的代码：

```
for(int i = 0; i < string_length; i++)
{
    sscanf(string, "%c", &array[i]);
} 
```

当字符串是“字符串”时，我得到的只是一个 string_length 大小的数组，每个值都是一个 s。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:29:39.490

sscanf 无法记住您的索引位置并自动增加指针。因此，实际上，每次您在循环中调用它时，它都会读取第一个字符。

尝试如下

```
sscanf(string+i, "%c", &array[i]); 
```

**附加说明：** 您也可以使用 strcpy 或 memcpy 将字符串复制到字符数组中。我希望您有充分的理由为此使用 sscanf。

# asana - 将文档附加到任务

> ID：12612790
> 
> 赞同：0
> 
> 时间：2012-09-27T01:24:29.387
> 
> 标签：asana

我找不到通过[http://developers.asana.com上的 Asana API 将文档附加到任务的方法](http://developers.asana.com)

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:32:12.917

（我在 Asana 工作）

抱歉，目前无法通过 API 为任务添加附件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T00:31:36.763

虽然 Greg 在撰写本文时是正确的，但我现在很高兴地说您可以通过 API 获取*和*上传附件：[https ://asana.com/developers/api-reference/attachments](https://asana.com/developers/api-reference/attachments)

# java - 从 IndexColorModel 获取索引？

> ID：12612796
> 
> 赞同：2
> 
> 时间：2012-09-27T01:24:58.670
> 
> 标签：java, image

我有一个使用 IndexColorModel 的 BufferedImage 来显示一些使用调色板的图形数据。然后我使用 绘制到缓冲区`createGraphics()`，并且我想将这些数据转换回索引数组。但是，我能找到的所有方法都能得到 RGB 值，而不是实际的索引值。这似乎有点傻，因为虽然我*可以*遍历我的调色板并找到合适的颜色，但直接获取值会简单得多。

这甚至可以不手动找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:52:53.327

如果您不能修改/覆盖`createGraphics()`方法（因为属于没有源的外部 JAR 库），您实际上必须手动查找您的对象。

否则，如果您可以访问`createGraphics()`源代码，则有两种选择：

*   如果某些方法客户端需要索引作为返回对象，而其他客户端需要 RGB 值作为返回，则可以构建一个`HashMap<Integer, RGB>`作为返回。整数将是索引和 RGB 对象本身或像字符串这样的原始值。

*   如果您有效地找到了访问方法源代码的方法并确认索引是您的流程所必需的基本数据，只需返回一个 Integer => 索引，以便您可以在 O(1) 处获取目标对象。

# javascript - 两个三元表达式合二为一

> ID：12612813
> 
> 赞同：3
> 
> 时间：2012-09-27T01:29:09.930
> 
> 标签：javascript, ternary-operator

我试图在一个表达式中表达这两个三元运算符。有人能帮我吗？

```
 var longer = a.length > b.length ? a: b;
    var shorter = a.length > b.length ? b : a; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:32:56.227

您可以从 JavaScript 1.7（现在是 1.8.5）开始执行此操作：[解构赋值（合并到自己的页面/部分）](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Destructuring_assignment_%28Merge_into_own_page.2Fsection%29)。

正如每个人都可以（可能）想象的那样，[跨浏览器的兼容性非常糟糕](http://www.robertnyman.com/javascript/javascript-1.7.html#destructuring-assignment)。但由于这是一个家庭作业问题，我将把它留在这里作为答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:35:10.483

如果您打算在表达式中声明这两个变量，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:39:31.030

您可以将第一个表达式设置为嵌套作为第二个条件的赋值......但在这种情况下，我认为您应该保留两个单独的行以避免混淆您的代码。嵌套三元组不会给您带来性能提升，因此没有任何用处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:42:21.250

具有 2 个值的最清晰的解决方案类似于（可能需要调整语法）：

```
[shorter, longer] = [a, b].sort(function(a, b) {return a.length > b.length}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T02:02:48.667

我看到这个问题已经回答了。但是，我为了好玩而尝试过，

```
shorter = ((a.length < b.length) && (longer = b))||((longer = a)&&false) ? a: b; 
```

更新：

正如@MattWhipple 建议的那样，您可以缩短它（您可能会在控制台中看到警告）

```
((a.length < b.length) && (shorter = a) && (longer = b)) || ((shorter = b) && (longer = a)) 
```

# c# - 当声卡仅报告通道掩码为 3 时，通过 SlimDX XAudio2 从后通道播放单声道编码的音频

> ID：12612816
> 
> 赞同：1
> 
> 时间：2012-09-27T01:29:39.867
> 
> 标签：c#, playback, channel, directsound, xaudio2

我有一个较旧的系统 (XP)，它允许我使用 DirectSoundBuffer 和 WAVEFORMATEXTENSIBLE 对象以及为后置扬声器设置的 ChannelMask 通过 DirectX 从后置声道（右后和/或左后）播放单声道编码的 PCM 音频。

我正在尝试在旧系统上重做相同的功能以及使用 .Net 和 SlimDx XAudio2 的新系统，但是当我在旧系统上调用 SetOutputMatrix 时，它会忽略我为除前左声道和前右声道之外的任何内容设置的所有内容，即使声卡设置为 5.1 环绕声。在新系统上它工作正常。当我在旧系统上调用 GetDeviceDetails 时，它报告通道掩码为 3（只有前两个扬声器）。我猜这就是为什么即使旧的 C++ DirectSound 有效，它也只允许我在前面播放。我猜声音驱动程序有误，但我找不到任何更新。

有解决方法吗？

这是来自 XAudio2 C++ Basic Sound Demo 的示例，具有相同的行为

```
if( FAILED( hr = XAudio2Create( &pXAudio2, flags ) ) )
{
    wprintf( L"Failed to init XAudio2 engine: %#X\n", hr );
    CoUninitialize();
    return 0;
}

UINT32 devCount;

hr = pXAudio2->GetDeviceCount(&devCount);

XAUDIO2_DEVICE_DETAILS devDetails;

hr = pXAudio2->GetDeviceDetails(0, &devDetails); 
```

在这里，当我获得设备详细信息时，ChannelMask 为 3（前置扬声器），即使声卡配置设置为 5.1。声卡是旧的 SoundMax AC'97 卡。稍后当我执行以下操作时：

```
float fMatrix[6] = {0};

pSourceVoice->GetOutputMatrix(pMasteringVoice, 1, 6, fMatrix);

fMatrix[0] = 0.0;
fMatrix[1] = 1.0;
fMatrix[2] = 1.0;
fMatrix[3] = 1.0;
fMatrix[4] = 1.0;
fMatrix[5] = 1.0;

hr = pSourceVoice->SetOutputMatrix(NULL,1,6, fMatrix);

pSourceVoice->GetOutputMatrix(pMasteringVoice, 1, 6, fMatrix); 
```

在第一个 GetOutputMatrix 之后，fMatrix 的 [0] 和 [1] 索引设置为 1.0。当我调用 SetOutputMatrix 时，我试图将其他通道设置为 1.0，但在 GetOutputMatrix 之后，fMatrix 只有 [1] 设置为 1.0。其他都是0。

注意：当调用 SetOutputMatrix 并且它没有设置它不会失败的所有值时，它返回 OK。

# python - 如何把这个for循环变成一个while循环python

> ID：12612821
> 
> 赞同：-1
> 
> 时间：2012-09-27T01:29:53.763
> 
> 标签：python

> **可能重复：**
> [将 for 循环转换为 while 循环](https://stackoverflow.com/questions/12610623/converting-a-for-loop-to-a-while-loop)

```
def splitList(myList, option):
    snappyList = []
    for i in myList:
        if option == 0:
            if i > 0:
                snappyList.append(i)
        if option == 1:
            if i < 0:
                snappyList.append(i)
    return (snappyList) 
```

嗨，我有这段代码，在 for 循环下效果很好。它根据用户输入的内容返回正面或负面的元素。我需要让它在一个while循环下工作，我不知道如何让它工作而不被困在一个while循环中。

任何想法或提示将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:03:58.067

冒着因未严格遵守您的问题而遭到反对的风险，Python 比许多其他更传统的语言具有更好的（简单）循环设施。（我也意识到，基于今天早上有非常相似的问题，这可能是家庭作业）。显然，学习`while`循环的工作方式具有一定的价值，但是在 Python 中这样做会掩盖其他设施。例如，您的示例使用单个列表理解：

```
def splitList2(myList, option):
    return [v for v in myList if (1-2*option)*v > 0]

print(splitList2([1,2,3,-10,4,5,6], 0))
print(splitList2([1,2,3,-10,4,5,6], 1)) 
```

输出：

```
[1, 2, 3, 4, 5, 6]
[-10]
>>> 
```

理解中的条件语法看起来很复杂，因为您的`option`to effect 映射很差。在 Python 中，与许多其他动态和函数式语言一样，您可以直接传入比较函数：

```
def splitList3(myList, condition):
    return [v for v in myList if condition(v)]

print(splitList3([1,2,3,-10,4,5,6], lambda v: v>0))
print(splitList3([1,2,3,-10,4,5,6], lambda v: v<0))
print(splitList3([1,2,3,-10,4,5,6], lambda v: v%2==0))

[1, 2, 3, 4, 5, 6]
[-10]
[2, -10, 4, 6]
>>> 
```

请注意这是多么灵活：使代码适应完全不同的过滤条件变得微不足道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:32:46.123

尝试以下操作：

```
def splitList(myList, option):
    snappyList = []
    i = 0
    while i < len(myList):
        if option == 0:
            if myList[i] > 0:
                snappyList.append(myList[i])
        if option == 1:
            if myList[i] < 0:
                snappyList.append(myList[i])
        i+=1
    return (snappyList) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:05:48.550

这是实际拆分列表的简洁方法，而不仅仅是过滤它：

```
from operator import ge,lt
def splitlist(input, test=ge, pivot=0):
    left = []
    right = []
    for target, val in (((left if test(n, pivot) else right), n) for n in input):
        target.append(val)

    return left, right 
```

你会注意到它使用了一个 for 循环，因为它是做事的正确方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:34:41.857

```
def splitList(myList, option):
    snappyList = []
    myListCpy=list(myList[:]) #copy the list, in case the caller cares about it being changed, and convert it to a list (in case it was a tuple or similar)
    while myListCpy:  #There's at least one element in the list.
        i=myListCpy.pop(0)  #Remove the first element, the rest continues as before.
        if option == 0:
            if i > 0:
                snappyList.append(i)
        if option == 1:
            if i < 0:
                snappyList.append(i)
    return (snappyList) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T01:36:37.803

```
def splitList(myList, option):
    snappyList = []
    while len(myList) > 0:
        i = myList.pop()
        if option == 0:
            if i > 0:
                snappyList.append(i)
        if option == 1:
            if i < 0:
                snappyList.append(i)
    return snappyList 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T01:42:52.370

```
def splitList(myList, option):
    snappyList = []
    myList_iter = iter(myList)
    sentinel = object()
    while True:
        i = next(myList_iter, sentinel)
        if i == sentinel:
            break
        if option == 0:
            if i > 0:
                snappyList.append(i)
        if option == 1:
            if i < 0:
                snappyList.append(i)
    return (snappyList) 
```

或者，您可以使用异常处理程序而不是哨兵

```
def splitList(myList, option):
    snappyList = []
    myList_iter = iter(myList)
    while True:
        try:
            i = next(myList_iter)
        except StopIteration:
            break
        if option == 0:
            if i > 0:
                snappyList.append(i)
        if option == 1:
            if i < 0:
                snappyList.append(i)
    return (snappyList) 
```

# java - Android：存储和读取变量值的不同方式？

> ID：12612822
> 
> 赞同：0
> 
> 时间：2012-09-27T01:30:01.097
> 
> 标签：java, android, storage

我有大约 16 个变量，其中的值需要保存以供以后调用/编辑。我已经尝试过 SQLite 数据库，因为我是 Android 的新手，这对我来说太难了。稍后我将不得不回到 SQL。还有其他方法可以存储这些值以供以后调用/编辑吗？谢谢！如果可能的话，也许把我链接到一个教程？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:31:25.873

您可以尝试使用[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:45:12.330

SharedPreferences 是另一种选择。这是一个非常简单的[示例](http://saigeethamn.blogspot.jp/2009/10/shared-preferences-android-developer.html) ，如何使用它。
使用 SharedPreferences 存储 16 个变量会使您的代码看起来很长。
我建议您更加努力地使用 SQlite 数据库。

# ios - 在 iOS 6 上处理 iDevice 旋转

> ID：12612830
> 
> 赞同：1
> 
> 时间：2012-09-27T01:31:34.487
> 
> 标签：ios, uiview, rotation, ios6

我无法弄清楚如何在 iOS 6 上处理设备旋转。当设备旋转时，我有三件事需要单独更改。

*   我有一个处理多个子 UIViewControllers 或 UINavigationControllers 的父 UIViewController（它基本上是一个自定义的 UITabBarController）。我不希望这个旋转。
*   这些子视图控制器中的每一个都将根据自己的设置旋转或不旋转。（我想要一些旋转，一些不旋转）。
*   在标签栏中，我希望每个标签图标（一个 UIView）旋转到方向。

我将如何在 iOS 6 中实现这一点，我在 iOS 5 中得到了一切工作。

这是我到目前为止所拥有的：

在父 UIViewController 中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotate
{
    return NO;
}

- (BOOL)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

在子视图控制器中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
        return YES;
}

- (BOOL)shouldAutorotate
{
        return YES;
}

- (BOOL)supportedInterfaceOrientations
{
        return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:31:23.390

要正确支持 iOS6，还有更多内容。iOS 6 发行说明概述了一些事情：

[https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

这一点可能有用：

> 为了兼容性，仍然实现 shouldAutorotateToInterfaceOrientation: 方法的视图控制器不会获得新的自动旋转行为。（换句话说，它们不会回退到使用应用程序、应用程序委托或 Info.plist 文件来确定支持的方向。）相反，shouldAutorotateToInterfaceOrientation: 方法用于合成将由 supportedInterfaceOrientations 方法返回的信息.

但您也应该看看 WWDC 2012 的 Session 236 - The Evolution of View Controllers。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T03:21:17.677

如果要在导航堆栈中支持不同的方向，则必须先继承 UINavigationController 并覆盖supportedInterfaceOrientations。

```
- (NSUInteger)supportedInterfaceOrientations
{
    //I want to support portrait in ABCView at iPhone only.
    //and support all orientation in other views and iPad.

    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone)
    {
        // find specific view which you want to control.
        if ([[self.viewControllers lastObject] isKindOfClass:[ABCView class]])
        {
            return UIInterfaceOrientationMaskPortrait;
        }
    }

    //support all
    return UIInterfaceOrientationMaskAll;
} 
```

# c - 如何在while循环中扫描多个输入？

> ID：12612831
> 
> 赞同：0
> 
> 时间：2012-09-27T01:31:44.527
> 
> 标签：c, while-loop

```
while((player1chip==-1)||(player2chip==-1)||(player3chip==-1)){                                                              
    player1chip=-1; player2chip=-1; player3chip=-1;                                                       
    printf("How many chips would you like to play with (3-10):\n");
    scanf("%d%d%d", &player1chip, &player2chip, &player3chip);
    getchar();
} 
```

我想一次获得 3 个值，但循环似乎已经运行了 3 次......我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:14:42.913

scanf() 语句对于您要执行的操作有点奇怪，因为您说您期望使用“%d%d%d”来没有分隔的三个数字。如果 while 循环的目的是填充 playerchip 变量，则应为它们使用一个数组并遍历该数组，如下所示：

```
playerchip[3];   
for(int i=0; i<3; i++) {
    printf("How many chips would player %d like to play with (3-10)?:\n", i);
    scanf("%d", &playerchip[i]);
} 
```

如果保留命名方案，则不能使用循环轻松填充变量。不过，要回答您最初的问题，要一次获取多个数字，您需要在 scanf() 语句中添加一些分隔符：

```
scanf("%d %d %d", &a, &b, &c); 
```

这样，每个人都知道一个数字何时结束，另一个数字何时开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:37:31.907

```
int p1chip=-1, p2chip=-1, p3chip=-1;
do {
  printf("How many chips would you like to play with (3-10)?\n");
  scanf("%d%d%d", &p1chip, &p2chip, &p3chip);
} while ((p1chip == -1) || (p2chip == -1) || (p3chip == -1)) 
```

试试看。

# android - 在android中使用FFMPEG库转换视频

> ID：12612833
> 
> 赞同：3
> 
> 时间：2012-09-27T01:32:22.323
> 
> 标签：android, ffmpeg

我有一个问题，我从服务器收到了一个视频文件，该文件无法通过我正在制作的应用程序的视频视图播放。我不知道实际问题是什么，因为所有视频都是通过相同的视频视图播放的，但是从服务器端接收到的视频没有播放。所以，我认为我必须将 FFMPEG 集成到我们的 android 应用程序中，这样我就可以在运行时转换播放每个视频。为此，我通过许多网站阅读了更多关于 FFMPEG 库与 Android 集成的信息，例如：

```
http://www.roman10.net/how-to-build-android-applications-based-on-ffmpeg-by-an-example/ 
```

从 GitHub 下载了一些项目，`(https://github.com/appunite/AndroidFFmpeg)`但无法通过 NDK 成功构建库。我错过了一些东西，我正在使用 Windows 机器，这可能是个问题。我想要关于此的确切解决方案，这意味着使用 FFMPEG 库构建 android 项目的逐步解决方案。如果您有一些有用的建议，请与我分享。

# validation - Symfony2 验证负数

> ID：12612834
> 
> 赞同：0
> 
> 时间：2012-09-27T01:32:29.837
> 
> 标签：validation, symfony

我正在尝试向 Synfony2 表单上的纬度和经度字段添加验证。它应该很简单，我将validation.yml定义如下

```
Acme\PictBundle\Entiti\Proxy
        longitude:
            - Min: { limit: -180 }
            - Max: { limit: 180 } 
```

但这会导致像这样的输入字段

```
<input type="text" value="" pattern=".{4,3}" maxlength="3" name="acme_pictbundle_proxytype[longitude]" id="niwa_pictbundle_proxytype_longitude"> 
```

由于 maxlength 值，我无法输入值 -179、100.1 或 99.1。实体将属性注释为 float ( `@var float $longitude`) 并且数据库将其作为 double 并且 1.1 被接受，因此它并不认为它需要是整数。如何阻止 Symfony2 将 maxLength 约束添加到数字字段？

# c# - 使用框架在 Unity 中创建线程

> ID：12612836
> 
> 赞同：0
> 
> 时间：2012-09-27T01:32:37.337
> 
> 标签：c#, thread-safety, frame, unity3d

我有一个任务是创建一个写入文件的线程安全日志记录类。每十帧我应该将我选择的一些信息从一个单独的脚本推送到日志记录类。我想知道该怎么做。到目前为止，这是我的代码。

```
public class Threading
{

    public bool Execute = true;
    public Vector3 player;
    public Vector3 WriteTime;
    System.Collections.Generic.Queue<float> values;
    // Use this for initialization
    void Start ()
    {

    }

    // Update is called once per frame
    void Update () 
    {

    }
    public void execute()
    {
        while (Execute)
        {
            System.Threading.Thread.Sleep(500);
            values.Enqueue(player.x);
            UnityEngine.Debug.Log("value");
        }

        System.IO.StreamWriter write = new System.IO.StreamWriter("values.txt"); // writes to file every 5 seconds

        while (values.Count > 0)
        {
            WriteTime = write.WriteLine(values.Dequeue().ToString());
        }
        write.Close();
    }

    public void Lock() // applied Lock threading
    {

            while(true)
            {
                lock (this)
                {
                   // dont have anything here yet. Trying to figure out locks
                }
            }

    } 
```

谢谢你。

# iphone - 无法识别的选择器发送到实例错误

> ID：12612837
> 
> 赞同：-1
> 
> 时间：2012-09-27T01:32:44.123
> 
> 标签：iphone, objective-c, xcode

我有两种看法。一种视图是注册视图。当用户单击注册 UIBarButtonItem 时，它会将他们带到该视图。在该视图上，还有另一个 UIBarbuttonitem 显示“返回” - 因此当用户单击该按钮时，它会将他们带到上面有注册按钮的主视图。然后如果用户再次点击注册按钮，就会抛出这个错误；

```
2012-09-26 19:22:53.256 Users[14763:c07] -[Registration signUp:]: unrecognized selector sent to instance 0x747e5b0
2012-09-26 19:22:53.257 Users[14763:c07] *** Terminating app due to uncaught exception

UsersViewController.h

@interface UsersViewController : UIViewController
@property (nonatomic, strong) Registration *registration;

UsersViewController.m
Signup event:
    self.registration = [[Registration alloc]initWithNibName:@"Registration" bundle:nil];
    [self.view addSubview:self.registration.view];

Registration.h
    @interface Registration : UIViewController
    @property (nonatomic, strong) Registration *mainView; 

Registration.m
Back button Event
   self.mainView = [[Registration alloc]initWithNibName:@"UsersViewController" bundle:nil]; 
```

[self.view addSubview:self.mainView.view]

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T01:46:06.247

当按下条形按钮时，处理代码应如下所示：

```
- (IBAction)showRegistration:(id)sender
{
    Registration *registrationViewController = [[Registration alloc] init];
    [self.navigationController pushViewController:registrationViewController];
} 
```

确保您的主视图控制器嵌入在导航控制器中，并且操作系统应该为您完成其余的工作。您的注册视图控制器上会有一个后退按钮，可以将您的用户带回到上一个视图。addSubview 不是通常用于在这样的视图之间导航的方法。你也可以使用

```
[self presentViewController:registrationViewController animated:YES]; 
```

或者如果你使用故事板，

```
[self performSegueWithIdentifier:@"go to registration view"]; 
```

有很多方法可以做到这一点，但 addSubview 不是你要找的机器人。

此外，您不想为呈现的视图控制器提供指向其呈现器的属性。您应该阅读 Cocoa 中的委托设计模式。您需要为 Registration 视图控制器提供一个委托属性，在 MainViewController 出现时将其分配为 Registration 视图控制器的委托，然后为 MainViewController 实现一个委托回调方法，以便在您的 Registration 视图时执行所需的任何工作控制器被解雇。

# android - Dialog.setTitle 不会显示全文

> ID：12612841
> 
> 赞同：1
> 
> 时间：2012-09-27T01:33:12.877
> 
> 标签：android, dialog

我一直在修改一个应用程序，它有一个包含很多项目的列表视图。当我长按一个项目时，它会显示一个带有重命名、删除和其他选项的菜单。这个 contextMenu 有一个标题，使用从项目中获取的字符串，如固定文本和项目名称（我将它们压缩为一个字符串）。一切顺利。

但是，当我单击重命名时，它会显示一个对话框。对话框标题由 dialog.setTitle() 设置，使用与上面相同的字符串。但是当字符串长度足够小，比如小于 20 时，它显示得很好。但如果长度太长，如30以上，则不显示字符串，只显示不带项目名称的固定文本。

我跟踪了应用程序，发现在设置标题时，字符串是相同的。但显示是不同的。唯一的区别是前者我使用ContextMenu.setHeaderTitle()，后者我使用Dialog.setTitle()。我传递的参数总是相同的。

菜单标题代码如下：

```
 public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    AdapterContextMenuInfo mi = (AdapterContextMenuInfo) menuInfo;
    menu.add(0, CONTEXT_MENU_RENAME, 0, getString(R.string.preset_rename));
    menu.add(0, CONTEXT_MENU_DELETE, 0, getString(R.string.preset_delete));
    mItemId = mi.position;
    // super.onCreateContextMenu(menu, v, menuInfo);
    // Log.d(LOGTAG,"mItemId is :" + mItemId);
    String titleName = "" + getString(R.string.station_name)+ "" +getNameFromId(mItemId);
    Log.e(LOGTAG, "1\. getNameFromId = " + titleName);
    menu.setHeaderTitle(titleName);
} 
```

对话框标题代码如下：

```
 case DIALOG_RENAME_ID:
        String titleName = "" + getString(R.string.station_name)+ "" + getNameFromId(mItemId);
        Log.e(LOGTAG, "2\. getNameFormId " + titleName);
        mRenameDialog.setTitle(titleName);   // Note: here set the dialog
        final EditText editText = (EditText) mRenameDialog
                .findViewById(R.id.name);
        editText.setText(getNameFromId(mItemId));
        Button bOk = (Button) mRenameDialog.findViewById(R.id.save);

        bOk.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                String rename = editText.getText().toString();
                if (TextUtils.isEmpty(rename)) {
                    Context context = getApplicationContext();
                    Toast toast = Toast.makeText(context, getString(R.string.station_name_empty),
                            Toast.LENGTH_SHORT);
                    toast.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL, 0, 0);
                    toast.show();
                } else {
                    saveStationName(mItemId,rename);
                    mRenameDialog.dismiss();
                }
            }
        });
        Button bCancel = (Button) mRenameDialog.findViewById(R.id.cancel);
        bCancel.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mRenameDialog.dismiss();
            }
        });
        break; 
```

有人可以知道原因吗？有人可以解释并修复它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:17:47.590

问题可能是对话框或 ContextMenu 的设置，这不是您的应用程序定义的，而是通用组件设置。对话框或上下文菜单的标题是一个文本视图，可能由单行属性设置。在这种情况下，可能是 contextmenu 没有设置 singleLine 属性，但对话框将 singleLine 属性设置为 true。您可以查看源代码的 dialog_title.xml 文件。

# php - mongodb php更新所有条目索引上的随机日期

> ID：12612847
> 
> 赞同：0
> 
> 时间：2012-09-27T01:34:42.950
> 
> 标签：php, mongodb

我正在尝试更新我收藏中的随机日期。
下面的代码使用相同的随机日期更新所有条目，我希望循环遍历所有条目并为每个条目提供不同的日期。

我设法使用索引使其工作。
索引大型数据集的最佳方法是什么？

```
$date_1 = strtotime(date('Y-m-d H:i:s'));
$date_2 = strtotime("2012-07-26 09:00:00");

$m = new Mongo();
$db = $m->comedy;
$collection = $db->cartoons;

$cursor = $collection->find();

$query = array('_id'=>array('$exists' => true));

foreach ($cursor as $obj){
    $randomDate = rand($date_1,$date_2);

    $collection->update(
        $query,  
        array('$set' => array("ts"=> new MongoDate($randomDate) )), 
        array('multiple' => true)
    );
} 
```

**编辑：**

```
foreach ($cursor as $obj){
    $randomDate = rand($date_1,$date_2);
    $id = $obj["_id"];
    $collection->update(
        array('_id'=> $id),   
        array('$set' => array("ts"=> new MongoDate($randomDate) )), 
        array('multiple' => true)
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:32:27.050

最佳索引方式的答案实际上取决于您通常如何查询数据。您需要添加适当的索引来提高查询性能。

对于您的特定代码示例，问题在于您正在迭代集合，但通过`$query`将匹配整个集合的泛型传递：

```
$query = array('_id'=>array('$exists' => true)); 
```

**并且**您正在传递`'multiple' => true`它将更新集合中匹配的每条记录。

因此，实际结果将是为集合中的每条记录迭代一次集合，将集合中的所有条目更新为`$randomDate`.

更正后的循环类似于：

```
foreach ($cursor as $obj) {
    $randomDate = rand($date_1, $date_2);
    $collection->update(
        array('_id'=> $obj->['_id']),   
        array('$set' => array('ts' => new MongoDate($randomDate) )), 
        array('multiple' => false)
    );
} 
```

# youtube-api - 如何使用 API 将 youtube 网络摄像头小部件上传到一个帐户？

> ID：12612855
> 
> 赞同：6
> 
> 时间：2012-09-27T01:35:45.480
> 
> 标签：youtube-api

我嵌入了 youtube 上传小部件，以允许用户使用他们的网络摄像头记录自己。作为在线申请的一部分，他们正在回答一些问题。我想拍摄这些网络摄像头记录并将它们上传到我的组织托管的一个中央 youtube 帐户。

这可能吗？非常感谢任何有关如何完成此操作的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:44:11.290

[由于http://youtube-eng.blogspot.com/2012/02/video-uploads-from-your-sites-community_15.html](http://youtube-eng.blogspot.com/2012/02/video-uploads-from-your-sites-community_15.html)中概述的原因，它不受支持/可能且不推荐

# magento - Magento Enterprise - 无效缓存

> ID：12612856
> 
> 赞同：0
> 
> 时间：2012-09-27T01:35:53.440
> 
> 标签：magento

只是一个简单的问题：

无效的缓存是否意味着缓存没有运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T01:56:39.127

不，只是意味着它需要刷新。

在 Magento 中，每当您对产品、静态块等进行更改时，它都会识别出数据库中的数据与缓存中的数据不同。不幸的是，Magento 没有意识到缓存数据有**什么**不同，只是**有些**不同。

您将需要进入*系统 > 缓存管理*并刷新无效的缓存类型。

如果您愿意，可以将其设置为自动刷新。

创建一个模块（或使用现有模块），您可以使用它来设置 cron 作业以刷新缓存。创建一个文件：{namespace}/{modulename}/Model/Observer.php

在那个文件里面：

```
<?php
class <namespace>_<modulename>_Model_Observer {

  public function refreshCache() {
    try {
      $allTypes = Mage::app()->useCache();
      foreach($allTypes as $type => $blah) {
        Mage::app()->getCacheInstance()->cleanType($type);
      }
    } catch (Exception $e) {
      // do something
      error_log($e->getMessage());
    }
  }

} 
```

在模块的 etc/config.xml 中：

```
<config>
  ...
  <crontab>
    <jobs>
      <{modulename}_refresh_cache>
        <schedule><cron_expr>* * * * *</cron_expr></schedule>
        <run><model>{modulename}/observer::refreshCache</model></run>
      </{modulename}_refresh_cache>
    </jobs>
  </crontab>
  ...
</config> 
```

现在只要在您的服务器上正确配置了 cron，缓存就会自动更新，就像 cron 运行一样频繁。

# javascript - 引用外部 javascript 文件

> ID：12612859
> 
> 赞同：2
> 
> 时间：2012-09-27T01:36:02.577
> 
> 标签：javascript

我想将数组值存储在外部 javascript 文件中，然后使用内部脚本编写一个循环，列出存储在外部文件中的数组值。我的 javascript 文件是：

```
var Arr = new Array("one", "two", "three") 
```

我的内部脚本

```
<script src="test.js" datatype "text/javascript"></script>
<script type="text/javascript">
for (x in Arr)
{
document.write("<br />"+ Arr[x]);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:39:04.820

是的，但是使用 AJAX 获取这些值而不使用`document.write`. 还有，那个`datatype "text/javascript"`东西应该`type="text/javascript"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:55:17.090

函数中的 test.js Arr 变量？？

示例：test.js

```
(function() {

    var Arr = new Array("one", "two", "three");
}); 
```

或者

```
function fn() {

    var Arr = new Array("one", "two", "three");
}; 
```

然后是html文件：

```
<script src="test.js" type="text/javascript"></script>
<script type="text/javascript">

    console.log(Arr); // Undefined Results
</script> 
```

* * *

其他示例：test.js

```
var Arr = new Array("one", "two", "three"); 
```

.html 文件：

```
<script src="test.js" type="text/javascript"></script>
<script type="text/javascript">

    console.log(Arr); // ["one", "two", "three"]
</script> 
```

* * *

# php - 以动态/编程方式创建类属性

> ID：12612860
> 
> 赞同：2
> 
> 时间：2012-09-27T01:36:06.817
> 
> 标签：php, oop, codeigniter

我希望做一些类似于 CodeIgniter`load`对象工作方式的事情。您可以使用以下方法实例化一个类，在此示例中为模型：

`$this->load->model('some_model', 'custom_name')`

该模型`some_model`现在可以通过 访问`$this->custom_name`。这是否利用了`__set()`或者`__get()`是完全不同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:44:29.637

不，codeigniter 不使用 getter/setter。假设`$this`在上下文中可用：

```
$dynamic_class_name    = 'some_model';
$dynamic_property_name = 'custom_name';

$this->$dynamic_property_name = new $dynamic_class_name; 
```

大功告成，实例化时还可以传递动态构造函数参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:54:39.963

您也可以使用反射类。

[http://php.net/manual/en/class.reflectionclass.php](http://php.net/manual/en/class.reflectionclass.php)

```
<?php

    $reflection = new ReflectionClass($class_name);
    $this->$class_name = $reflection->newInstanceArgs($params); 
```

# android - 如何在等待共享意图弹出时显示进度对话框

> ID：12612862
> 
> 赞同：2
> 
> 时间：2012-09-27T01:36:19.283
> 
> 标签：android

我注意到在旧设备上，一旦您执行标准共享意图（fb、twitter、电子邮件等），在弹出实际共享对话框之前会有几秒钟的延迟。我想知道在等待此共享对话框出现时如何弹出进度对话框？

这是我的代码：

```
 private void share(String subject,String body) {
        Intent share = new Intent(Intent.ACTION_SEND);
        share.setType("text/plain");
        share.putExtra(android.content.Intent.EXTRA_SUBJECT, title);
        share.putExtra(android.content.Intent.EXTRA_TEXT, body);
        startActivity(Intent.createChooser(share, "Share via"));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T01:53:58.527

我想出了怎么做。当您调用 startActivity(shareIntent) 时，方法中的 onPause 会被调用。所以为了解决这个问题，我做了以下事情：

*   创建一个类进度对话框变量。
*   在我的分享功能开始时显示进度对话框。
*   在 onPause 我做了以下事情：

* * *

```
if(dialog.isShowing()){
  dialog.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T06:20:33.480

我建议以下方法：

1.  首先创建一个进度对话框并显示它
2.  通话分享活动
3.  隐藏返回主活动的进度对话框（onResume）

这是代码：

```
ProgressDialog shareWaitDialog;

private void shareIt() {
    String subject="Subject";
    String text  = "text....";
    shareWaitDialog = new ProgressDialog(getActivity());
    shareWaitDialog.setTitle("Sharing...");
    shareWaitDialog.setMessage(subject);
    shareWaitDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    shareWaitDialog.show();

    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            subject);
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,
            text));
    startActivity(Intent.createChooser(sharingIntent,
            "Share using:"));
}

@Override
public void onResume() {
    if (shareWaitDialog != null && shareWaitDialog.isShowing())
        shareWaitDialog.hide();

    super.onResume();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:45:22.903

这似乎是不可能的——您无法知道 Intent Chooser 何时准备好显示。就您的应用而言，这似乎是一个异步操作。

要确认这一点，您可以尝试对函数计时：

```
private void share(String subject,String body) {
    //Timing code
    long startTime = System.currentTimeMillis();

    Intent share = new Intent(Intent.ACTION_SEND);
    share.setType("text/plain");
    share.putExtra(android.content.Intent.EXTRA_SUBJECT, title);
    share.putExtra(android.content.Intent.EXTRA_TEXT, body);
    startActivity(Intent.createChooser(share, "Share via"));

    //Timing code
    long endTime = System.currentTimeMillis();
    Log.d("Test", "Time for share function: " + (endTime-startTime) + "ms");
} 
```

如果你得到一个非常小的结果，这意味着你的函数正在快速执行，并且瓶颈在Android系统本身（你无法影响）。

另一方面，如果你得到了大约 500 多毫秒的结果，那么使用 XepterX 描述的方法并[显示一个 Progress Dialog](http://developer.android.com/guide/topics/ui/dialogs.html#ProgressDialog)可能是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-31T11:50:06.087

你可以试试这段代码：

```
void share(String link) {
    final ProgressDialog ringProgressDialog = ProgressDialog.show(this, "", getString(R.string.please_wait), true);
    ringProgressDialog.setCancelable(false);
    new Thread(new Runnable() {
        public void run() {
            try {
            // your share method for sharing link or image or anything
                shareTextUrl(link);
            } catch (Exception e) {
            }
            ringProgressDialog.dismiss();
        }
    }).start();
    ringProgressDialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
        @Override
        public void onDismiss(DialogInterface dialog) {

        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-23T21:42:43.820

显示对话框似乎非常困难，相反，您可以在单击共享按钮时显示“等待应用程序...”之类的 Toast。吐司可以填补时间空白。

```
mShare.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            Toast.makeText(ReferralActivity.this, "Waiting for Apps to Send", Toast.LENGTH_SHORT).show();

            try {
                String sAux = "Content To Share";
                Intent i = new Intent(Intent.ACTION_SEND);
                i.setType("text/plain");
                i.putExtra(Intent.EXTRA_SUBJECT, "Sample");
                i.putExtra(Intent.EXTRA_TEXT,sAux);
                startActivity(Intent.createChooser(i, "Share using:"));
            } catch(Exception e) {
                //e.toString();
            }
        }
    }); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-27T01:41:47.097

您可以使用 AsyncTask() 来帮助您显示对话进度，例如，

```
 private class TestTask extends AsyncTask<Void, Void, Void> {

    protected void onPreExecute() { 
        //show dialog 
    }

    protected void doInBackground(Object... params) { 
        private void share(subject,body); 
    }

    protected void onPostExecute(Long result) {
        //cancel dialog
    }
} 
```

并通过以下方式开始任务

```
new TestTask().execute(); 
```

[您可以从此处的文档](http://developer.android.com/reference/android/os/AsyncTask.html)中找到有关 AsyncTask() 的更多信息。

# c++ - 选择排序升序

> ID：12612864
> 
> 赞同：0
> 
> 时间：2012-09-27T01:36:38.083
> 
> 标签：c++

那是我的功能：

```
int main() {
    double data[100];

    int num;

    cout<<"num= ";
    cin>>num;

    for(int i = 1; i <= num; i++) {
        cout<<i<<" element = ";
        cin>>data[i];
    }

    Sort(data, num);

    for (int i = 1; i <= num; i++) {
        cout<<data[i]<<endl;
    }

    return 0;
}

void Sort(double data[], int n) {
    int i,j,k;
    double min;

    for(i = 0; i < n-1; i++) {
        k = i;
        min = data[k];

        for(j = i+1; j < n; j++)
            if(data[j] < min) {
                k = j;
                min = data[k];
            }
        data[k] = data[i];
        data[i] = min;
    }
} 
```

如果我为 exp 写。三个元素：8,9,1 再次 cout 8,9,1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:43:39.867

```
for(int i = 1; i <= num; i++) { // WRONG 
```

我想你的意思是：

```
for(int i = 0; i < num; i++) { // RIGHT 
```

C中的数组是0索引的记住。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:47:45.407

你的排序功能很好。唯一的问题是您在`1`through `n`（含）位置输入元素，而您应该在函数的两个循环中使用`0`through （含）。`n-1``main()`

如果您需要通过 打印数字`1`，请`n`使用

```
cout<<(i+1)<<" element = "; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T02:04:13.877

您应该在 for 循环中使用 0 索引开始 `for(int i = 0; i < N; ++i)`

因此修复这两个索引错误将使您的代码正常运行。

**原因是：**

如果您将数据写入`data[]`using`1`作为开头，则数据数组的第一项将是一个随机数：

如果插入 3 个元素，则数组将如下所示：

```
data[0] = ??? // maybe a very very big number
data[1] = 8
data[2] = 9
data[3] = 1 
```

在您的 Sort 函数中，您的索引从 0 开始并在之前结束`num`，这意味着您的代码只会排序`data[0], data[1], data[2]`。

如果您使用： num = 3, 3 2 1 作为原始代码的输入数据，您可以看到 3 和 2 已排序

我猜你的排序代码是从某个地方用谷歌搜索的，请尝试理解它。

不错的在线算法课程：[https ://www.coursera.org/course/algs4partI](https://www.coursera.org/course/algs4partI)

很不错的算法网书：[http ://algs4.cs.princeton.edu/home/](http://algs4.cs.princeton.edu/home/)

顺便说一句，如果它有大括号，`for(j = i+1; j < n; j++)`在`Sort`函数中会更好。`{` `}`

# php - 制作 PHP JavaScript 聊天室

> ID：12612867
> 
> 赞同：0
> 
> 时间：2012-09-27T01:37:40.563
> 
> 标签：php, javascript, web, chat

我正在尝试为我的网站制作一个 PHP / JavaScript 聊天系统。在不刷新页面的情况下如何做到这一点？

JavaScript 可以： --动态地将文本添加到文本框。

PHP 可以： -- 将聊天保存到聊天日志文件，并更新聊天室，让每个人都可以看到它。

第二部分似乎需要您刷新页面。我不想每次用户说什么都刷新页面。有没有办法在后台运行 PHP 而无需执行 POST 或 GET？我是否需要使用不同的服务器端语言，例如 Python 或 Ruby？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:06:25.523

如果您想制作一个只使用一个日志文件的聊天室应用程序，即您网站上的每个人都登录到同一个房间，那么使用 php 和 ajax 以及一些 jquery 并不难。流程如下：您希望用户输入消息并发送，对吗？您需要一个表单：

```
<form name="message" action="">
    <input name="usermsg" type="text" id="usermsg" size="63" />
    <input name="submitmsg" type="submit"  id="submitmsg" value="Send" />
</form> 
```

这就是表单的标记，接下来，您需要能够无缝接收用户输入的内容，无论用户在文本框中键入什么并将其发送到脚本，这就是 ajax 的用武之地：

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>
<script type="text/javascript" >
//when the user clicks the button with the id submitmsg, the input is taken
$("#submitmsg").click(function(){   
    var clientmsg = $("#usermsg").val();
            //after the input's value is taken, it's sent to a script called
            //pst.php
    $.post("post.php", {text: clientmsg});
            //after the message is sent, the input's value is set to null
            //to allow the user to type a new message               
    $("#usermsg").attr("value", "");
    return false;
});
</script> 
```

完成此操作后，我们需要查看脚本 post.php 的外观以及它的作用，基本上，它会抓取通过 ajax 发送给它的输入并将其写入文件，然后将文件加载到网页上以及所有然后可以查看用户之间发送的消息，在一定时间后进一步使用 ajax 重新加载文件，以便用户始终了解它包含的任何消息，这是 php 脚本：

```
<?
session_start();
if(isset($_SESSION['name'])){
$text = $_POST['text'];

$fp = fopen("log.html", 'a');
fwrite($fp, "<div class='msgln'><b>".$_SESSION['name']."</b>: ".stripslashes(htmlspecialchars($text))."<br></div>");
fclose($fp);
}
?> 
```

请注意，我使用了一个会话，这是为了获取登录用户的名称并将其输出到日志文件。我相信你可以看到登录系统如何适应这个，无论如何，在编写之后数据到文件中，我们需要上传它以便用户可以看到：

```
<div id="chatbox">
<?php
if(file_exists("log.html") && filesize("log.html") > 0){
    $handle = fopen("log.html", "r");
    $contents = fread($handle, filesize("log.html"));
    fclose($handle);

    echo $contents;
}
?>
</div> 
```

那是日志文件将被加载的分区，现在，只剩下一件事了，我们需要在一定时间后重新加载文件，并且可能添加一个自动滚动功能：

```
//Load the file containing the chat log
function loadLog(){     
    var oldscrollHeight = $("#inner").attr("scrollHeight") - 20;
    $.ajax({
        url: "log.html",
        cache: false,
        success: function(html){        
            $("#inner").html(html); //Insert chat log into the #chatbox div             
            var newscrollHeight = $("#inner").attr("scrollHeight") - 20;
            if(newscrollHeight > oldscrollHeight){
                $("#inner").animate({ scrollTop: newscrollHeight }, 'normal'); //Autoscroll to bottom of div
            }               
        },
    });
}
setInterval (loadLog, 2500);    //Reload file every 2.5 seconds 
```

就是这样，应该可以工作，希望这对你有帮助，以防你还没有得到有用的答案，你会等很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:43:33.493

您可以在 msg.php 文件中检索聊天消息并使用 jQuery 刷新它并将其包含到您的主文件中。（您的主页面不会加载，但会刷新）。您可以为此使用**Prototype**，它与 jQuery 相同，但非常易于使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:42:01.730

如果您不希望页面刷新，您可以使用 Ajax 发布。这是一个实现。

[http://css-tricks.com/jquery-php-chat/](http://css-tricks.com/jquery-php-chat/)

如果它是一个小规模的网站，那很好。否则我会推荐使用 Erlang 或 Go 编程来支持你的聊天！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:42:11.077

AJAX 应该适合您的需求；它可以从 JS 发送数据由 PHP 处理，并接收任何返回的对象再次由 JS 处理。

教程：[http](http://css-tricks.com/jquery-php-chat/) ://css-tricks.com/jquery-php-chat/或 [http://code.jenseng.com/jenChat/](http://code.jenseng.com/jenChat/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T01:43:01.010

使用 Javascript 和 PHP 有几种方法可以做到这一点。最基本的一种是通过 Javascript 的 XMLHttpRequest 函数发送您的 Javascript POST 请求。这使您无需重新加载页面即可发送和接收数据。谷歌“AJAX”以获取有关如何以这种方式发送数据并处理结果的信息。

PHP 将这些作为常规 POST 请求，因此您可以在后端对它们做任何您想做的事情以返回数据。但是您使用 PHP 来返回数据，而不是发送新网页，因此您可以通过网络发送文本，这是最简单的方式。

出于聊天室的目的，AJAX 将要求您的 javascript 代码每隔几秒钟轮询一次服务器以查看是否有任何新聊天进入。这不是很有效。你真正想要的是服务器上的东西，它可以保持与客户端的连接，并在发生变化时告诉它。为此，您需要在 javascript 中使用 Websockets，并创建一个 PHP 套接字服务器。如何实际做这两件事超出了这个答案的范围。但是使用您正在谈论的技术是可能的。

# r - 计算 R 中 AR(2) 过程的相关系数

> ID：12612875
> 
> 赞同：3
> 
> 时间：2012-09-27T01:39:24.773
> 
> 标签：r, statistics, time-series

我有一个时间序列问题，我可以很容易地手动解决，只是它需要很长时间，因为我有 4 个不同的`AR(2)`进程并且想要为每个进程计算至少 20 个滞后。

我想要做的是使用 Yule Walker 方程来计算 rho，如下所示：

我有一个二阶自回归过程，`AR(2)`. `Phi(1)`为 0.6 和`Phi(2)`0.4。

我想计算`rho(k)`所有滞后的相关系数`k = 20`。

所以`rho(0)`自然会是 1 和`rho(-1) = rho(1)`。所以

```
rho(1) = phi(1) + phi(2)*rho(1)
rho(k) = phi(1)*rho(k-1) + phi(2)*rho(k-2) 
```

现在我想在 R 中解决这个问题，但我不知道如何开始，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T06:06:04.033

你可以用 R 语言试试我的程序，

在 R 脚本中：

```
AR2 <- function(Zt,tetha0,phi1,phi2,nlag)
{
 n <- length(Zt)
 Zbar <- mean(Zt)
 Zt1 <- rep(Zbar,n)
 for(i in 2:n){Zt1[i] <- Zt[i-1]}
 Zt2 <- rep(Zbar,n)
 for(i in 3:n){Zt1[i] <- Zt[i-2]}
 Zhat <- tetha0+phi1*Zt1+phi2*Zt2
 error <- Zt-Zhat
 ACF(error,nlag)
}

ACF <- function(error,nlag)
{
 n <- length(error)
 rho <- rep(0,nlag)
 for(k in 1:nlag)
 {
  a <- 0
  b <- 0
  for(t in 1:(n-k)){a <- a+(error[t]*error[t+k])}
  for(t in 1:n){b <- b+(error[t]^2)}
  rho[k] <- a/b
 }  
 return(rho)
} 
```

在 R 控制台中：

让你有一个 Zt 系列，tetha(0) = 0, phi(1) = 0.6, phi(2) = 0.4, and number of lag = 20

> AR2(Zt,0,0.6,0.4,20)

# php - << $xmlSend = << <text <?xml="" version="1.0" encoding="UTF-8" ?=""><vmcamexm>问问题 问问题 2012-09-27T01:39:47.583 141 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. $xmlSend = << <text <?xml="" version="1.0" encoding="UTF-8" ?=""><vmcamexm><business><id_company>{$idCompany}</id_company> <id_branch>{$idBranch}</id_branch> <country>{$Country}</country> <user>{$User}</user> <pwd>{$pwd}</pwd></business> <transacction><merchant>{$Merchant}</merchant> <reference>50000</reference> <tp_operation>13</tp_operation> <creditcard><crypto>{$Crypto}</crypto> <type>V/MC</type> <name>{$name}</name> <number>{$number}</number> <expmonth>{$expmonth}</expmonth> <expyear>{$expyear}</expyear> <cvv-csc>{$cvv}</cvv-csc></creditcard> <amount>{$cantidad}</amount> <currency>{$Currency}</currency> <usrtransacction>1</usrtransacction></transacction></vmcamexm> TEXT; echo "

```
"; print_r(htmlspecialchars($xmlSend)); echo "
```

"; //$url = $tUrl; $vars = "&xml=" . $rc4->limpiaVariable(urlencode($xmlSend)); $header[] = "Content-type: application/x-www-form-urlencoded"; $ch = curl_init(); $postfields = "info_asj3=1".$vars; curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_URL,$Url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_TIMEOUT, 250); curl_setopt($ch, CURLOPT_POST, true); curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields); curl_setopt($ch, CURLOPT_HTTPHEADER, $header); $data = curl_exec($ch); if (curl_errno($ch)) { $data = curl_error($ch); } else { curl_close($ch); } 我正在与一家使用它连接到 xml 提要的新公司合作。但是使用这个开头<< <text会弄乱它下面的所有代码。我没有收到任何错误，代码可以工作，但是我下面的所有 0="" 1="" 2="" 3="" 4="" 11="" php="" 代码都是黑色的，老实说不容易管理。如果我把它拿出来，xml="" 提要就不能正常工作。有人可以告诉我为什么这是有效的，什么是更好的方法来实现这一点？我到处搜索，找不到关于该主题的任何内容。请帮忙！="" 提前感谢任何人花时间回答！="" 您的代码中的错误是：="" downloadimage(incontext);="" 它应该是="" downloadimage(inref);="" phpxmlcurl="" 回答="" this="" answer="" is="" useful="" 这是字符串的heredoc语法。="" 对字符串使用="" heredoc="" 对多行字符串有好处，并且可以避免引用问题。="" 于="" 2012-09-27t01:41:11.847="" 这是一个="" 字符串，如果您遇到问题，可能是由于结束序列的缩进：="" 文本;="" <--="" 必须在文本文件的第="" 列。="" http:="" php.net="" manual="" en="" language.types.string.php#language.types.string.syntax.heredoc="" 2012-09-27t01:42:32.550="" related="" hibernate="" -="" 如何将@indexedembedded="" 实体列表的子集映射到附加字段？="" ie遇到post后停止加载页面="" c#="" regex="" expression="" for="" html="" eclipse="" juno="" kepler="" crashes="" python="" compare="" dict.keys()="" with="" list,="" bug="" in="" go="" 在="" 中重用="" http="" 连接="" 如何将可编译的="" 代码嵌入到="" confluence="" gridview更新上的“锁定时无法更改边界”="" prolog="" binary="" tree="" all="" but="" one="" input="" buttons="" work="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：12612878
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：php, xml, curl

```
$xmlSend = <<<TEXT
                    <?xml version="1.0" encoding="UTF-8"?>
                        <VMCAMEXM>
                            <business>
                                <id_company>{$idCompany}</id_company>
                                <id_branch>{$idBranch}</id_branch>
                                <country>{$Country}</country>
                                <user>{$User}</user>
                                <pwd>{$pwd}</pwd>
                            </business>
                            <transacction>
                                <merchant>{$Merchant}</merchant>
                                <reference>50000</reference>
                                <tp_operation>13</tp_operation>
                                <creditcard>
                                    <crypto>{$Crypto}</crypto>
                                    <type>V/MC</type>
                                    <name>{$name}</name>
                                    <number>{$number}</number>
                                    <expmonth>{$expmonth}</expmonth>
                                    <expyear>{$expyear}</expyear>
                                    <cvv-csc>{$cvv}</cvv-csc>
                                </creditcard>
                                <amount>{$cantidad}</amount>
                                <currency>{$Currency}</currency>
                                <usrtransacction>1</usrtransacction>
                            </transacction>
                        </VMCAMEXM>
TEXT;

echo "<pre>";
print_r(htmlspecialchars($xmlSend));
echo "</pre>";

            //$url = $tUrl;         
            $vars = "&xml=" . $rc4->limpiaVariable(urlencode($xmlSend)); 
            $header[] = "Content-type: application/x-www-form-urlencoded";
            $ch = curl_init();
            $postfields = "info_asj3=1".$vars;

             curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
             curl_setopt($ch, CURLOPT_URL,$Url);
             curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
             curl_setopt($ch, CURLOPT_TIMEOUT, 250);
             curl_setopt($ch, CURLOPT_POST, true);
             curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
             curl_setopt($ch, CURLOPT_HTTPHEADER, $header);          

             $data = curl_exec($ch);
                if (curl_errno($ch)) {
                   $data = curl_error($ch);          
                } else {
                   curl_close($ch);
                } 
```

我正在与一家使用它连接到 xml 提要的新公司合作。但是使用这个开头`<<<TEXT`会弄乱它下面的所有代码。我没有收到任何错误，代码可以工作，但是我下面的所有 php 代码都是黑色的，老实说不容易管理。如果我把它拿出来，xml 提要就不能正常工作。有人可以告诉我为什么这是有效的，什么是更好的方法来实现这一点？我到处搜索，找不到关于该主题的任何内容。请帮忙！

提前感谢任何人花时间回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:41:11.847

这是字符串的***[Heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)***语法。

对字符串使用 Heredoc 对多行字符串有好处，并且可以避免引用问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:42:32.550

这是一个 HEREDOC 字符串，如果您遇到问题，可能是由于结束序列的缩进：

文本; //<-- 必须在文本文件的第 0 列。

[http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)</text会弄乱它下面的所有代码。我没有收到任何错误，代码可以工作，但是我下面的所有></text></vmcamexm></text>

# .net - 安装 Visual Studio 2012 后 Visual Studio 2008 中的命名空间和 AjaxToolkit 错误，

> ID：12612880
> 
> 赞同：2
> 
> 时间：2012-09-27T01:40:07.113
> 
> 标签：.net, visual-studio-2008, namespaces, web-config, visual-studio-2012

我已经使用 Visual Studio 2008 Professional 几年了。去年我下载并安装了 Visual Studio 2010 Express，没有任何问题。最近我下载并安装了visual studio 2012 web express，现在我在vs 2008中的现有网络应用程序有很多错误。大多数错误都与缺少命名空间有关，即使它们在 web.config 文件中已详细说明。 **是什么导致了这些错误，更重要的是我怎样才能摆脱它们？？？**

**一些错误：**
未声明名称“AjaxControlToolkit”。
未声明名称“替换”。
未定义类型“Guid”。
未定义类型“列表”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:47:52.593

我有一个类似的问题。但是通过删除网络参考来修复它。没有它一切正常。有一个投诉：找不到 LiquidTechnologies.Runtime.Net20，版本 = 7.1.4.1284，文化 = 中性，PublicKeyToken = 64bee40f6e1c14f0。

与制作网络服务的人交谈，但他说不需要第 3 方 dll ......

我的解决方案中不再有网络参考。所以这不是一个好的解决方案。

但是这里的问题可能是由于从 windows/.Net framerok 等中删除了 dlss 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:49:40.877

我不知道为什么，但从 web.config 中删除以下内容后，一切又开始工作了。

```
<roleManager enabled="true" defaultProvider="MySQLRoleProvider">
        <providers>
            <add name="MySQLRoleProvider" connectionStringName="App_DBConnection" applicationName="GRMS 3.0" type="System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=xxxxx"/>
        </providers>
    </roleManager>
    <membership defaultProvider="MySqlMembershipProvider">
        <providers>
            <add name="MySqlMembershipProvider" connectionStringName="App_DBConnection" applicationName="App3.0" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=xxxxx" passwordFormat="Encrypted" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="true" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/>
        </providers>
    </membership>
<profile enabled="true" defaultProvider="MySQLProfileProvider">
  <providers>
    <add name="MySQLProfileProvider" connectionStringName="App_DBConnection" applicationName="App 3.0" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=xxxxxx"/>
  </providers>
  <properties>
    <add name="Name" type="System.String" provider="MySQLProfileProvider" allowAnonymous="true"/>
    <group name="ProjectInfo">
      <add name="CurrProjectID" allowAnonymous="false" type="System.guid"/>
      <add name="CurrProjectName" allowAnonymous="false" type="System.String"/>
    </group>
  </properties>
</profile> 
```

# asp.net-mvc-3 - 带有附加 HTML 的 MVC3 Html.BeginForm()

> ID：12612882
> 
> 赞同：4
> 
> 时间：2012-09-27T01:40:13.553
> 
> 标签：asp.net-mvc-3, mvcextensions

我正在编写一些我想呈现 MVC BeginForm 但还包含其他 HTML 的代码。

例如。

```
@using (Html.BeginMyCustomForm()) {

} 
```

这吐出来

```
<form action="" etc> 
```

加

```
<input type="hidden" name="my-additional-field-i-always-want">

@Html.ValidationMessageFor(m => m) 
```

这可能吗？
我知道我会考虑某种扩展或最有可能的东西。
希望这是有道理的，并提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:56:56.830

在 BeginForm 的扩展中包含这些内容不是一个好主意。原因是好的设计要求对象应该做一件事。这被称为单一职责原则。

您现在希望您的表单对象也创建输入和验证。

相反，使用 MVC 模板系统并创建一个默认模板来满足您的需求。您还应该使用 Html.HiddenFor 而不是使用输入标签，除非有特定的理由不这样做。

另一种选择是使用 MVC 脚手架来生成你想要的。

更多关于编辑器模板[http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

更多关于脚手架[http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:50:58.087

也许你可以使用这样的东西？

```
public static class FormExtensions
{
    public static MvcForm BeginMyCustomForm(this HtmlHelper htmlHelper)
    {
        var form = htmlHelper.BeginForm();
        htmlHelper.ViewContext.Writer.write( .... )
        return form;
    }
} 
```

# python - 正则表达式快速查询

> ID：12612884
> 
> 赞同：0
> 
> 时间：2012-09-27T01:40:15.250
> 
> 标签：python, regex

快速正则表达式问题。

我想要一个表达式，它可以找到一行中的第一个数字以及该行末尾的一个单词。（这将排除其中的任何数字）

IE 如果字符串是“12345hello”，那么我希望正则表达式找到“1hello”

或者即使是“12345hel45667lo”也能找到相同的东西。

我有第一个数字，但我认为可行的表达是：

```
print re.findall(r'^\d\D+',string) 
```

这只是给我空括号，或者如果我取出 \D，则给我第一个数字。是什么赋予了？

编辑：如果我输入 | 因为或者然后我得到了我想要的东西。返回字符串中的单词以及第一个数字，但在单独的分组中。我想要这一切合而为一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:45:28.880

```
print re.findall(r'^\d|\D+',string)

print re.sub(r'(?<!^)\d', '', "12345hel45667lo9a") -> '1helloa' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:41:38.093

我唯一能想到的就是运行一个 for 循环来扫描字符串中的字母并将它们组合起来。

# c - 浮点异常和太大的常量警告？

> ID：12612885
> 
> 赞同：0
> 
> 时间：2012-09-27T01:40:20.123
> 
> 标签：c, floating-point-exceptions

我不愿发布我的代码，因为这是为了学校作业，但基本上我需要遍历一个`uint64_t`可能非常大的代码。

所以，我的值基本上可能是 10 个字符长。它最初是一个`int`，并且代码部分有效（但没有完成创建它应该完成的输出），但后来我得到了错误`"warning: integer constant is so large that it is unsigned"`。

然后我将其更改`int`为`uint64_t`（乘以 10），它会给我一个浮点异常。

没有代码的任何见解？

编辑：添加一点点代码......

```
 uint64_t number = 1U;

 ...

 for (int x = 0; x < y; x++) {
     number *= 10;
 } 
```

^ 这给了我浮点异常。

不确定这是否足以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:33:03.773

`for`您是否检查过循环执行了多少次？在你的`for`循环中，`number`以指数比例增加。我写了一个小程序来展示这种情况。

```
 1 #include <stdio.h>
  2 #include <stdlib.h>
  3 #include <stdint.h>
  4 
  5 #define MAXLOOP 100
  6 
  7 int
  8 main(void)
  9 {
 10     uint64_t number = 1U;
 11     int i;
 12 
 13     for(i = 0; i < MAXLOOP; ++i){
 14         number *= 10;
 15         printf("%d\t%lu\n", i, number);
 16     }
 17 
 18     return 0;
 19 }
 20 
```

输出是：

```
0       10
1       100
2       1000
3       10000
4       100000
5       1000000
6       10000000
7       100000000
8       1000000000
9       10000000000
10      100000000000
11      1000000000000
12      10000000000000
13      100000000000000
14      1000000000000000
15      10000000000000000
16      100000000000000000
17      1000000000000000000
18      10000000000000000000
19      7766279631452241920 <--- overflow, uint64_t can store 18,446,744,073,709,551,616 as its max value
20      3875820019684212736
21      1864712049423024128
22      200376420520689664
23      2003764205206896640
24      1590897978359414784
25      15908979783594147840
26      11515845246265065472
27      4477988020393345024
28      7886392056514347008
29      5076944270305263616
30      13875954555633532928
31      9632337040368467968
32      4089650035136921600
33      4003012203950112768
34      3136633892082024448
35      12919594847110692864
36      68739955140067328
37      687399551400673280
38      6873995514006732800
39      13399722918938673152
40      4870020673419870208
41      11806718586779598848
42      7386721425538678784
43      80237960548581376
44      802379605485813760
45      8023796054858137600
46      6450984253743169536
47      9169610316303040512
48      17909126868192198656
49      13070572018536022016
50      1578511669393358848
51      15785116693933588480
52      10277214349659471872
53      10538423128046960640
54      13150510911921848320
55      2377900603251621888
56      5332261958806667264
57      16429131440647569408
58      16717361816799281152
59      1152921504606846976
60      11529215046068469760
61      4611686018427387904
62      9223372036854775808
63      0
64      0
65      0
66      0
67      0
68      0
69      0
70      0
71      0
72      0
73      0
74      0
75      0
76      0
77      0
78      0
79      0
80      0
81      0
82      0
83      0
84      0
85      0
86      0
87      0
88      0
89      0
90      0
91      0
92      0
93      0
94      0
95      0
96      0
97      0
98      0
99      0 
```

我想你很容易理解。:->

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:52:47.850

默认情况下，整数文字是有符号的。如果您`U`在文字上使用后缀，则告诉编译器使其无符号，例如`123456789U`. 那应该清除有关常量太大的警告。或者，您可以使用`UINT64_C()`来自`<stdint.h>`.

如果不看一些代码，很难知道是什么导致了你的 FPE。

# android - 从 SD 卡获取多个图像以显示在 Coverflow 中

> ID：12612887
> 
> 赞同：1
> 
> 时间：2012-09-27T01:40:37.253
> 
> 标签：android, image, external, sd-card, image-gallery

如何让多个图像显示在此封面流中。我遇到空指针异常和其他问题。如何能够从 SD 卡加载图像，不知道 SD 卡上有多少图像？图片数量不固定。通过使用以下代码，我能够毫无问题地显示一张图像：

```
i.setImageBitmap(BitmapFactory.decodeFile("/mnt/sdcard/pic03.png")); 
```

它加载了一张图片，从 SD 卡中指定的一张，并将所有的封面流图像制作为同一张图片 pic03.png，大约十几个相同的图片填充了封面流。太好了，但是我想将所有图像加载到 SD 卡上。所以每个图像都填充了coverflow的每个部分，而不是一个相同的图像填充所有它们。

完全迷失在这里并试图这样做并从 Logcat 获得空指针异常，想知道为什么？有谁知道如何让它工作？

下面是我正在使用的代码来给您一些想法：请注意，当从 SD 卡上的指定地址加载一张图像时，它确实有效。至少那部分效果很好，但是有多个图像？

```
// added this code inside the onCreate method to load the cursor with images only if the IS_PRIVATE column
// in the sqlite database is equal to the integer 1 

String[] img = { MediaStore.Images.Media._ID };
imagecursor = managedQuery(
MediaStore.Images.Media.EXTERNAL_CONTENT_URI, img,
MediaStore.Images.Media.IS_PRIVATE + "='" + 1 +"'",null, MediaStore.Images.Media._ID + "");
image_column_index = imagecursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);
count = imagecursor.getCount();

//-------------------------------------------------------------------
// ImageAdapter class is a nested class inside of the CoverFlowExample class

public class ImageAdapter extends BaseAdapter {
int mGalleryItemBackground;
private Context mContext;
private FileInputStream fis;

// originally earlier version of this app loaded images from the R.drawable folder like this

private Integer[] mImageIds = {

  //  R.drawable.pic01,
  //  R.drawable.pic02,
  //  R.drawable.pic03,
  //  R.drawable.pic04,
  //  R.drawable.pic05,
  //  R.drawable.pic06,
  //  R.drawable.pic07,
  //  R.drawable.pic08,
  //  R.drawable.pic09
};

//---------------------------------------------------------------------
// getView() method that is in the ImageAdapter class that extends the BaseAdapter class
// this class is a nested class inside the CoverFlowExample class that extends Activity.
// the CoverFlowExample class is used to implement the coverflow part of the app as an Activity

public View getView(int position, View convertView, ViewGroup parent) {
  // to load from resources like SD card
  ImageView i = new ImageView(mContext);

 // use for single image -->  i.setImageBitmap(BitmapFactory.decodeFile("/mnt/sdcard/pic03.png"));

 image_column_index = imagecursor.getColumnIndexOrThrowMediaStore.Images.Media.DATA);
 imagecursor.moveToPosition(position);

 int id = imagecursor.getInt(image_column_index);
 i.setImageURIUri.withAppendedPathMediaStore         .Images.Media.EXTERNAL_CONTENT_URI, ""+ id));

 // image from R.drawable use -->  i.setImageResource(mImageIds[position]);
 i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
 i.setScaleType(ImageView.ScaleType.MATRIX);            
 return i;

  // return mImages[position];  <-- not using this as im am not getting image from R.drawable
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:11:16.467

问题似乎`String[] img = { MediaStore.Images.Media._ID }` 是该列中包含的唯一列`imagecursor`，当您尝试获取该`DATA`列时，`imagecursor.getColumnIndexOrThrowMediaStore.Images.Media.DATA)`

# java - 泛型类中删除的所有 HashMap 类型值？

> ID：12612888
> 
> 赞同：10
> 
> 时间：2012-09-27T01:40:43.960
> 
> 标签：java, generics, compiler-errors

为什么以下不编译？`+`编译器对打印行中的符号给出错误。

```
public class Test<T> {
  HashMap<Integer,Integer> m = new HashMap<Integer, Integer>();
  public static void main(String[] args) {
    Integer zero1 = 0;
    Integer zero2 = 0;
    Test t = new Test();
    t.m.put(1,zero1);
    t.m.put(2,zero2);
    System.out.println(t.m.get(1)+t.m.get(2)==t.m.get(2));
  }
} 
```

我理解类型擦除，但 m 是 a `HashMap<Integer,Integer>`，它根本不应该依赖于类型`<T>`。为什么编译器拒绝这个？在第一行删除`<T>`允许编译，但我不明白为什么这不应该工作。

这是编译器错误还是这种行为背后有任何逻辑？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T02:09:51.380

我没有解释*为什么*，但行为似乎确实是正确的定义。[*Java 语言规范*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)[的第 4.8 节“原始类型”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)*明确指出：*

 *> 未从其超类或超接口继承的原始类型 C的构造函数（[第 8.8 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8)）、实例方法（[第 8.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)、[第 9.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.4)）或非静态字段（[第 8.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3)）的类型是对应于的原始类型`M`在对应于 C 的泛型声明中擦除其类型。

在您的示例中，原始类型 C 是`Test`（与`Test<Object>`or`Test<Integer>`或诸如此类相反），非静态字段`M`是`m`. 作为上述规则的结果，类型`t.m`是原始类型`HashMap`，而不是`HashMap<Integer, Integer>`，所以返回类型`t.m.get(Object)`是`Object`而不是`Integer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:59:40.403

只需更换您的线路：

```
Test t = new Test(); 
```

经过：

```
Test<Integer> t = new Test<Integer>(); 
```

这将起作用。*

# ruby-on-rails - 如何在 Squeel 语句中使用动态属性/列？

> ID：12612889
> 
> 赞同：1
> 
> 时间：2012-09-27T01:40:54.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring, squeel

在我[之前的问题](https://stackoverflow.com/questions/12604949/how-to-dynamically-generate-association-names)中，我最终发现以下代码似乎按预期工作：

```
def my_squeel_query
  table_name = Squeel::Nodes::Stub.new("#{self.class.to_s.tableize}_comment_associations".to_sym)

  commenters.
    .where{
      table_name.article_id.eq(my{self.id})
    }
end 
```

**是否可以使`article_id`语句像为`table_name`变量所做的那样动态？**

也就是说，我想做一些类似以下的东西：

```
def my_squeel_query
  table_name = Squeel::Nodes::Stub.new("#{self.class.to_s.tableize}_comment_associations".to_sym)

  commenters.
    .where{
      table_name.<DYNAMIC_KEY>.eq(my{self.id}) # '<DYNAMIC_KEY>' refers to a column name present in the 'commenters' database table.
    }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:43:07.120

您可以使用[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send).

```
column_name = :article_id
commenters.where{
  table_name.send(column_name).eq(my{self.id})
} 
```

# java - 动态链接库和 Java

> ID：12612891
> 
> 赞同：1
> 
> 时间：2012-09-27T01:41:04.930
> 
> 标签：java, dll, java-native-interface, dynamic-linking

我在 C++ 中创建了一个 dll，并在 java 中编写了这个类：

```
public class VolumeControl {

    public native float GetVolume();

    public native void SetVolume(float val);

    public native void VolumeUp();

    public native void VolumeDown();

    public native void Mute();

    static {
         System.load("some_path/VolumeControl.dll");
    }
} 
```

如果我从这个文件中调用函数，它工作得很好，但是当我试图这样做时：

```
public class Server {

    public static void main(String[] args) {
        VolumeControl ctrl = new VolumeControl();
        ctrl.Mute();
    }
} 
```

我明白了：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError:
RemoteControl.VolumeControl.Mute()V 
```

当然，这两个类都在同一个包中。我该如何解决？谢谢。

**Update1**：​​好的问题是，我将这些类添加到包中。当我将它们移动到默认包时，一切正常。但是现在如果我想将此 dll 与不同的包一起使用，我需要重新构建它。

**Update2**：实际上我根本无法将它添加到包中，当我尝试时：#javah VolumeControl，我得到错误：

```
Could not find class file for 'VolumeControl'. 
```

**Update3**：我手动将包的名称添加到 C++ 函数中，它可以工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:41:03.987

如果将 javah 实用程序集成到 makefile 中以确保始终在双方（客户端/服务器）上假定接口，则使用 javah 实用程序可能会有所帮助。

# spring - 在运行时后期更改 SessionFactory 数据源 jdbcurl

> ID：12612892
> 
> 赞同：2
> 
> 时间：2012-09-27T01:41:11.310
> 
> 标签：spring, hibernate, hsqldb

我正在为没有网络连接的环境编写桌面 java 应用程序。我正在尝试将应用程序数据尽可能安全地存储在加密的进程内 hsqldb 中，并使用未加密的用户信息 hsqldb。hsqldb 要求在创建连接时在 jdbcurl 中设置 crypto_key。我的应用程序使用 hibernate 进行持久化，使用 Spring 进行配置和注入。

我目前的方案是将用户名、密码哈希、盐和加密数据库的 crypto_key 存储在未加密的用户表中。crypto_key 由使用用户密码作为密钥的非对称加密保护。因此，应用程序不知道应用程序数据的 crypto_key 是什么，直到它运行了足够长的时间以加载 gui 并验证用户。

这是我当前的 applicationContext.xml。Spring 使用它来让 Hibernate 正常运行。

```
 <?xml version="1.0" encoding="UTF-8"?>
  <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<context:component-scan base-package="com.company.domain" />
<context:component-scan base-package="com.company.service" />

<tx:annotation-driven />

<bean id="userDataSource" 
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" 
        value="jdbc:hsqldb:./ReviewDatabase/users" />
    <property name="username" value="reviewer" />
    <property name="password" value="$kelatonKey" />
</bean>

<bean id="mainDataSource" 
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" 
        value="jdbc:hsqldb:./ReviewDatabase/data" /> <!-- TODO: ;crypt_key=;crypt_type=AES -->
    <property name="username" value="reviewer" />
    <property name="password" value="$kelatonKey" />
</bean>

<bean id="userSessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="userDataSource" />
    <property name="annotatedClasses">
        <list>
            <value>com.company.domain.AppUser</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<bean id="mainSessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="mainDataSource" />
    <property name="annotatedClasses">
        <list>
<!--                <value>com.companu.domain.Person</value> -->
<!--                <value>com.company.domain.Thing</value> -->
<!--                <value>com.company.domain.Thing1</value> -->
<!--                <value>com.company.domain.Thing2</value> -->
<!--                <value>com.company.domain.Review</value> -->
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <pro key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<bean id="mainTransactionManager" 
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="mainSessionFactory" />
</bean>

<bean id="userTransactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="userSessionFactory" /> 
</bean>
</beans> 
```

这是我希望注入 SessionFactory 的类的示例

```
@Repository("ReviewDao")
public class HibernateReviewDao implements ReviewDao{

private SessionFactory mainSessionFactory;

@Autowired
public void setMainSessionFactory(
        SessionFactory mainSessionFactory){
    this.mainSessionFactory = mainSessionFactory;
}

@Override
@Transactional(value = "mainTransactionManager")
public void store(Review review) {
    mainSessionFactory.getCurrentSession().saveOrUpdate(review);

}

@Override
@Transactional(value = "mainTransactionManager")
public void delete(Long reviewId) {
    Review review = (Review)mainSessionFactory.getCurrentSession()
            .get(Review.class, reviewId);
    mainSessionFactory.getCurrentSession().delete(review);
}
} 
```

最后，这是我在验证用户并获得该 crypto_key 后尝试做的事情。

```
String jdbcUrl = "jdbc:hsqldb:./ReviewDatabase/data2;crypt_key=" + secret + ";crypt_type=AES";
    ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()
    .applySetting("hibernate.dialect", "org.hibernate.dialect.HSQLDialect")
    .applySetting("hibernate.show_sql", "true")
    .applySetting("hibernate.hbm2ddl.auto","update")
    .applySetting("hibernate.connection.driver_class", "org.hsqldb.jdbcDriver")
    .applySetting("hibernate.connection.url", jdbcUrl)
    .applySetting("hibernate.connection.username", "reviewer")
    .applySetting("hibernate.connection.password", "$kelatonKey")
    .buildServiceRegistry();

    SessionFactory mainSessionFactory = new MetadataSources(serviceRegistry)
        .addAnnotatedClass(com.company.domain.Review.class)
        .addAnnotatedClass(com.company.domain.Person.class)
        .addAnnotatedClass(com.company.domain.Thing.class)
        .addAnnotatedClass(com.company.domain.Thing1.class)
        .addAnnotatedClass(com.company.domain.Thing2.class)
        .buildMetadata()
        .buildSessionFactory();
    org.springframework.orm.hibernate4.HibernateTransactionManager htm = 
            (HibernateTransactionManager)context.getBean("mainTransactionManager");
    context.getAutowireCapableBeanFactory().initializeBean(mainSessionFactory, "mainSessionFactory"); 
    htm.setSessionFactory(mainSessionFactory); 
```

但是，这样，对上述对象的第一个查询会导致`org.hibernate.HibernateException: No Session found for current thread`

在 hibernate 初始化、依赖项被注入并且发生其他各种 tom-foolery 之后，我该如何更改 jdbcurl？我一直在推迟这部分开发，希望谷歌最终能通过，但我没有想法可以搜索。所有的答案都将被羞怯地接受:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:08:47.423

我想知道这是否[有帮助，我可以在运行时替换 Spring bean 定义吗？](https://stackoverflow.com/questions/4041300/can-i-replace-a-spring-bean-definition-at-runtime)，您可以虚拟化 bean 属性以开始，然后在运行时更改 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:01:59.210

因此，配方中缺少的部分是 LocalSessionFactoryBean。它得到了 sessionFactory 设置，所以我可以替换在初始化时创建的 sessionFactories。这是我必须从问题中更改的代码

```
 org.springframework.orm.hibernate4.HibernateTransactionManager htm = 
            (HibernateTransactionManager)context.getBean("mainTransactionManager");
    Class<?>[] classes = new Class<?>[5];
    classes[0] =  com.company.domain.Thing1.class;
    classes[1] =  com.company.domain.Thing2.class;
    classes[2] =  com.company.domain.Person.class;
    classes[3] =  com.company.domain.Thing.class;
    classes[4] =  com.company.domain.Review.class;

    String jdbcUrl = "jdbc:hsqldb:./ReviewDatabase/data3;crypt_key=" + secret + ";crypt_type=AES";

    java.util.Properties hibernateProperties = new java.util.Properties();
    hibernateProperties.setProperty("hibernate.dialect", "org.hibernate.dialect.HSQLDialect");
    hibernateProperties.setProperty("hibernate.show_sql", "true");
    hibernateProperties.setProperty("hibernate.hbm2ddl.auto","update");
    hibernateProperties.setProperty("hibernate.connection.driver_class", "org.hsqldb.jdbcDriver");
    hibernateProperties.setProperty("hibernate.connection.url", jdbcUrl);
    hibernateProperties.setProperty("hibernate.connection.username", "reviewer");
    hibernateProperties.setProperty("hibernate.connection.password", "$kelatonKey");

    LocalSessionFactoryBean slfb = new LocalSessionFactoryBean();
    slfb.setHibernateProperties(hibernateProperties);
    slfb.setAnnotatedClasses(classes);
    try {
        slfb.afterPropertiesSet();
    } catch (IOException e) {
        Log.warn("Cannot connection to application database");
        Log.write(e.getLocalizedMessage());
        Log.write(e.getStackTrace());
        return;
    }
    SessionFactory mainSessionFactory = slfb.getObject();
    context.getAutowireCapableBeanFactory().initializeBean(mainSessionFactory, "mainSessionFactory");

    htm.setSessionFactory(mainSessionFactory);  
    for(ListenForNewSessionFactory dao : daos){
        dao.setNewSessionFactory(mainSessionFactory);
    } 
```

我让每个 Dao 实现一个接口来设置 sessionFactory，并让他们每个人在初始化时将自己添加到静态列表中。它不是很可重用，但它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T09:50:18.863

我使用了以下技巧 - 无论我需要 a `SessionFactory`，我都使用 a （下面） - 代表我实际使用`SessionFactoryFactory`的唯一方法。`SessionFactory`

```
@Component
public class SessionFactoryFactory {
    @Autowired
    private LocalSessionFactoryBean sessionFactoryBean;

    @Autowired
    private DriverManagerDataSource dataSource;

    private SessionFactory sessionFactory;

    private SessionFactory getSessionFactory() {
        if (null == sessionFactory) {
            sessionFactory = sessionFactoryBean.getObject();
        }
        return sessionFactory;
    }

    public Session openSession() {
        return getSessionFactory().openSession();
    }

    public void updateDataSourceUrl() throws IOException {
        sessionFactory = null;
        sessionFactoryBean.afterPropertiesSet();
    }
} 
```

# javascript - 无法从 Node.js 读取 Azure 配置设置

> ID：12612894
> 
> 赞同：3
> 
> 时间：2012-09-27T01:41:23.603
> 
> 标签：javascript, node.js, azure

我正在 Azure 中运行 Node.js 应用程序，并尝试获取如下配置设置：

```
var azure = require('azure');

azure.RoleEnvironment.getConfigurationSettings(function(error, settings) {
   if (error) {
      console.log(error);
      return;
   }

   console.log('Settings: %s', settings);
}); 
```

但输出总是这样：

```
{ "code": "ENOENT", "errno": "ENOENT", "syscall": "connect", "fileName": "\\\\.\\pipe\\WindowsAzureRuntime" } 
```

我正在使用 IISNode 使用所有最新位在 IIS 中运行 Node.Js。如果我在 Azure VM（即 node.exe server.js）上手动运行 node，我也会遇到同样的错误。在 Azure Development Fabric 中的 PC 上运行时也是如此。

提前感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:42:02.563

由于您提到您在 IISNode 中运行，因此它必须是 Web 角色。请注意[SDK 自述文件](https://github.com/WindowsAzure/azure-sdk-for-node)中的以下内容：

> 服务运行时允许您与当前角色正在运行的机器环境进行交互。请注意，**仅当您的代码**在 Azure 模拟器或云中以辅助角色运行时，这些命令才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T10:54:00.093

这是我的解决方案。这不好，但至少它现在有效。

1.  像这样创建一个 .NET 控制台应用程序

    使用 Microsoft.WindowsAzure；使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Text；使用 System.Threading；使用 System.Threading.Tasks；

    命名空间 CloudConfigurationHelper { 类程序 { 静态 int MaxRetryTime = 10;

    ```
     public static Dictionary<string, string> GetSettings(string[] keys)
        {
            Dictionary<string, string> settings = new Dictionary<string, string>();

            try
            {
                foreach (string key in keys)
                {
                    settings[key] = CloudConfigurationManager.GetSetting(key);
                }
            }
            catch
            {
                MaxRetryTime--;

                if (MaxRetryTime <= 0)
                {
                    return settings;
                }

                Thread.Sleep(2000);
                return GetSettings(keys);
            }

            return settings;
        }

        static int Main(string[] args)
        {
            var settings = GetSettings(args);
            if (settings.Count != args.Length)
            {
                return -1;
            }

            foreach (string key in settings.Keys)
            {
                Console.WriteLine(key + "=" + settings[key]);
            }

            return 0;
        }
    } 
    ```

    }

2.  放置启动任务以读取 azure 配置变量并写入 .env 文件。使用[https://github.com/motdotla/dotenv](https://github.com/motdotla/dotenv)读取 .env 文件并加载到 process.env。

env.cmd 文件：

```
@echo off
cd %~dp0
CloudConfigurationHelper.exe %* 
```

在 ServiceDefinition.csdef 中添加启动任务：

```
<Task commandLine="Env.cmd YOUR_SETTING_KEY &gt; ..\.env executionContext="elevated" /> 
```

3.  在 NodeJS web 角色中，我们只需要通过`process.env["YOUR_SETTING_KEY"]`

# wordpress - 如何阻止 WordPress 评论小部件与主题评论冲突

> ID：12612903
> 
> 赞同：0
> 
> 时间：2012-09-27T01:42:31.620
> 
> 标签：wordpress, widget, comments, conflict

我有一个小部件可以检索和显示 WordPress 网站的最新评论。它显示评论作者、Gravatar、评论和日期/时间。

显示评论的功能在一个类中。

我遇到的问题是，每当我显示此小部件时，它都会混淆或与为我的 WordPress 主题返回的评论数量发生冲突。

例子。在小部件中选择显示 5 条评论。在网站上的一个页面上，我有一篇有 8 条评论的帖子。启用小部件时，仅显示这 8 条评论中的 6 条。

如果我禁用小部件，则会显示所有评论。

这是显示评论的功能

```
/**
     * Retrieves the latest comments
     *
     * Shows a list of latest comments ordered by the date added
     *
     * @param int $limit - The number of posts to display
     * @param int $chars - The number of characters to display for the post body
     * @param int $size - Size of the comment Gravatar
     * @param boolean $displayCommentsIcon - Whether to display the comment Gravatar
     *
     */
     public function aaw_get_latest_comments($display_comments_icon = true, $comments_icon_size = 50, $comments_amount = 5, $comments_chars = 35, $display_comments_date = true) {
        global $comments;

        $com_excerpt = '';

        $aaw_comments = get_comments(array('number' => $comments_amount, 'status' => 'approve'));

        if($aaw_comments){
            foreach((array)$aaw_comments as $aaw_comment){
                if($comments_chars > 0) {
                    $com_excerpt = self::aaw_snippet_text($aaw_comment->comment_content, $comments_chars);
                }

                echo '<li>';

                    if($display_comments_icon == 'true'){
                        echo '<a href="'.esc_url(get_comment_link($aaw_comment->comment_ID) ).'" title="'. __('Commented on: ', $this->hook). $aaw_comment->post_title.'">';
                        echo get_avatar($aaw_comment, $comments_icon_size);
                        echo '</a>';
                    }
                    echo '<div class="aaw_info">';
                    echo '<a href="'.esc_url(get_comment_link($aaw_comment->comment_ID) ).'" title="'. __('Commented on: ', $this->hook). $aaw_comment->post_title.'">';
                        echo '<i>'.strip_tags($aaw_comment->comment_author).'</i>: '.strip_tags($com_excerpt).'...';
                    echo '</a>';
                    if($display_comments_date == 'true'){
                        echo '<span class="aaw_meta">'.get_comment_date('j M Y',$aaw_comment->comment_ID).' '.__('at', $this->hook).' '.get_comment_date('g:i a',$aaw_comment->comment_ID).'</span>';
                    }
                    echo '</div>';
                echo '</li>';

            }
        } else {
            echo '<li>'.__('No comments available', $this->hook).'</li>'."\n";
        }

    } 
```

这就是我调用函数的方式：

```
<?php $advanced_activity_widget->aaw_get_latest_comments($display_comments_icon == 'true' ? 'true' : 'false', $comments_icon_size, $comments_amount, $comments_chars, $display_comments_date == 'true' ? 'true' : 'false'); ?> 
```

起初我以为是 Gravatar 导致了冲突，但是我删除了它，它并没有做出改变。

任何帮助将不胜感激。谢谢

编辑：这似乎`get_comment_link()`是导致问题的原因。

如果我删除该函数的两个实例，则调用小部件并且注释显示正常。我试过了：`wp_reset_postdata();` `wp_reset_query();` `rewind_posts();`都没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:52:36.127

尝试`wp_reset_query()`在`foreach`循环之后添加调用。

[http://codex.wordpress.org/Function_Reference/wp_reset_query](http://codex.wordpress.org/Function_Reference/wp_reset_query)

# jquery - html元素宽度小于单个子元素宽度的总和？

> ID：12612909
> 
> 赞同：6
> 
> 时间：2012-09-27T01:43:17.033
> 
> 标签：jquery, html, css, dom, width

[http://jsfiddle.net/3BFGU/71/](http://jsfiddle.net/3BFGU/71/)

html 父元素的宽度（使用 1$(el).width()1 计算）小于子元素的组合宽度。

1.  仅在 Firefox 中发生。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:52:48.860

可能，总宽度是宽度的总和，这些**小数宽度以前**以某种方式四舍五入。这个总和不等于容器的宽度。我发现更多的元素会产生更多的不准确性，例如 5 个元素的 3 像素差异。

实际上，**内联文本块**可以有**小数**宽度，例如 10.6px 。因此，连续放置的三个块将占用 31.8px ≈ 32px。但是当每个宽度四舍五入到 ≈ 11px * 3 = 33px 时。这是一个像素的差异。[http://jsfiddle.net/3BFGU/86/](http://jsfiddle.net/3BFGU/86/)

*nb* Firefox 的字体渲染引擎仅在**font-size > 15px**时才开始使用亚**像素字母放置**（至少对于 Verdana、Arial 和 Segoe UI，它们应用了极端提示）。当每个字母都具有整数宽度值并且字符串中所有相同的字母具有完全相同的光栅图像时。这种行为可以清楚地看到并在和之间切换**`letter-spacing: .9px;``font-size: 14.9px;``font-size: 15.1px;`**

 **除此之外，一年前我做[了一个小操场](http://yakunins.com/misc/type-test/index.html)来测试不同浏览器的渲染引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:49:49.943

看起来像 Firefox 中的错误....可能是舍入错误？

错误不一致。如果您在第二个跨度内添加一个空格，则在“新”之后它会正确计算（我正在 14.0.1 上进行测试）。

[http://jsfiddle.net/DigitalBiscuits/3BFGU/81/](http://jsfiddle.net/DigitalBiscuits/3BFGU/81/)

此外，如果您再次将最后一个“w”更改为大写字母，它会正确计算。 [http://jsfiddle.net/DigitalBiscuits/3BFGU/83/](http://jsfiddle.net/DigitalBiscuits/3BFGU/83/)

这会让我相信这取决于 Firefox 以像素为单位计算元素大小的方式，并且必须有一些四舍五入，向上或向下，这会导致这种差异。

# ~编辑~

我刚刚更新到 15.0 并且得到了相同的结果。我会测试所有版本，直到我完全更新并让你知道结果。

在 15.0.1 上再次相同，最新版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:57:31.677

在计算时，确切的宽度正在汇总。这可能会导致 ff 显示这样的结果。**

# c - 将 void(char*) 函数作为 void(void) 执行

> ID：12612914
> 
> 赞同：0
> 
> 时间：2012-09-27T01:43:54.147
> 
> 标签：c, memory, function-pointers

```
void print( char * str ){ printf("%s",str); }

void some_function(){
    ... Loads a file into `char * buffer` ...
    ... Stores the function print before `buffer` address ...
    ((void(*)(void))buffer();
} 
```

在文件中，有一个“Hello World”，还有一些不可读的字符。执行缓冲区将打印“Hello World”。

我知道你可以执行这样的指针：

```
void (*foo)(int) = &bar; // such that void bar(int)
(*foo)(123); 
```

但是将 void(int) 函数作为 void(void) 函数执行，其函数和参数在内存中对我来说是新的。

是否有一个函数在内存中的外观标准（如字符串以空字符终止），以便您可以以这种方式执行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:58:43.613

> 但是将 void(int) 函数作为 void(void) 函数执行，其函数和参数在内存中对我来说是新的。

好的。这是未定义的行为，您永远不应该这样做。它可能会在某些实现上起作用，但不能保证结果。

> 是否有一个函数在内存中的外观标准（如字符串以空字符终止），以便您可以以这种方式执行它？

不，没有。更相关的是，没有关于如何将参数传递给函数的标准——这取决于实现，并且不要求以具有不同类型的函数兼容的方式实现它。

但是在这种情况下，程序员正在利用函数在内存中的样子的知识，并以这样一种方式准备文件，即当它加载到内存中并在这个特定的实现中运行时，它会做正确的事情。毕竟，这是加载程序所做的……它们将程序从文件读取到内存中，然后执行它们。利用程序中的错误将恶意代码加载到程序的内存中并让程序执行它的漏洞利用程序也使用此方法。

# php - 会话在 php 中不起作用

> ID：12612915
> 
> 赞同：1
> 
> 时间：2012-09-27T01:43:54.750
> 
> 标签：php, session

我只为我授予完全访问权限的两个管理员用户创建了一个表。

```
session_start();
$query="select * from tbl_user where username='$username' and password='$password'";
$result=mysql_query($query);
$count=mysql_num_rows($result);
if($count>0)
{          
    $row=mysql_fetch_row($result);
    if($row[0]=='1')
    {
        $_SESSION['admin']='admin';
    }
    else
    {
        $_SESSION['admin']='user';
    }
    header("Location:http://localhost/test/sample.php");
} 
```

在此`sample.php`，我提供如下访问权限：

```
<td>
    <?php
        if($_SESSION['admin']=='admin')
        {
    ?>
    <a href='Subscribers.php'>&nbsp;Subscribers</a>
    <?php
        }
    ?>
</td>
<td>
    <a href='CreateRelease.php'>&nbsp;Releases</a>
</td> 
```

在`sample.php`，我写了`session_start`，但是，我可以用任何用户登录。只会显示`Releases`选项。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:47:17.803

`session_start()`在您需要会话的每个脚本中首先调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:52:33.920

既然你说你做过`session_start();`，`sample.php`所以问题出在其他地方。

注意你说的表格的第一列`tb_user`是`username(admin or user)`？

是`0`还是`1`？如果没有，那么问题就在这里：

```
// $row[0] is the value of username you said, how could it be 1?
if($row[0]=='1') { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:52:57.290

这里有一个问题：

```
if($row[0]=='1') 
```

这着眼于 $row 的第一列。根据您的评论，这是用户名。您应该使用什么来确定用户是否是管理员。

```
// Something like this
if($row['isAdmin'] == 1) 
```

# javascript - 选项卡面板内的 extjs 视口

> ID：12612919
> 
> 赞同：2
> 
> 时间：2012-09-27T01:44:36.453
> 
> 标签：javascript, extjs, viewport, tabpanel

美好的一天，我是 extjs 新手，我正在使用 extjs 3，我的布局有问题，我有选项卡面板，选项卡 1 的内部将是视口，选项卡 2 只是一个简单的内容，但是当我点击tab2，视口没有消失，应该是视口只在选项卡1或第一个选项卡。以下是我的代码，请帮忙，如果我的代码有问题怎么办。

```
var Tabs;
var chatUi;
var content = "centerpanel";

var viewport1 = new Ext.Viewport({
    //id:       'chatUiLayout',
    layout: 'border',
    //renderTo :    'liveChatTextLiveHelp',
    items: [{
        width: 150,
        region: 'east',
        title: 'east'
    }, {
        region: 'center',
        title: 'center'
    }]
});

Tabs = new Ext.TabPanel({
    id: 'liveChatTextLiveHelp',
    renderTo: 'div-live-chat',
    activeTab: 0,
    //region:       'center',
    //hieght:       200,
    plain: true,
    items: [{
        title: 'Live help',
        items: [ //viewport1  
        ],
        html: "<div id='" + content + "' class='90pers' ></div>"
    }, {
        title: 'Tab 2',
        html: "tab 2 content"
    }

    ],
    scope: this,
    listeners: {
        afterrender: function () {
            viewport1.render(content);
        },
        scope: this

    }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T01:52:14.297

视口是代表整个浏览器窗口的特殊容器。他们总是将自己呈现给身体，使他们成为进入其他事物的不良候选人。而不是视口，您应该尝试使用`panel`or `container`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:37:05.487

您可能正在选项卡 1 中寻找边框布局，类似于[Windows with Layouts example](http://docs.sencha.com/ext-js/4-0/#!/example/window/layout.html)。
视口无法隐藏，因为它绑定到浏览器窗口。

# asp.net - 无法加载文件或程序集“System.Net.Http，版本 = 4.0.0.0”

> ID：12612920
> 
> 赞同：4
> 
> 时间：2012-09-27T01:44:42.883
> 
> 标签：asp.net, dll, windows-runtime, portable-class-library

我不知道我做了什么，但我可能已经`System.Net.Http 4.0.0.0`从 GAC 中移除了。我有一个以 WinRT 为目标的 Windows 便携式库，它正在编译和工作正常，现在每次尝试运行它时都会出现以下错误

> 无法加载文件或程序集 'System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其依赖项之一。系统找不到指定的文件。":"System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a

我怎样才能重新添加`System.Net.Http 4.0.0.0`？每次找.dll，都找到2.0.0.0版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T20:15:01.147

要在 Windows 8 之前的 Windows 版本上修复此问题，请转至添加或删除程序并执行 .NET Framework 4.5 的修复安装。

要在 Windows 8 或更高版本上配对此功能，您需要运行系统还原以将 Windows 二进制文件还原到早期版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:49:07.710

您是否尝试过删除，然后重新添加项目中的引用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:36:48.247

尝试文件夹：
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0并使用 gacutil 工具从文件夹 C:\Program Files (x86)\Microsoft SDKs\Windows\v7
将 dll 复制到 GAC
.0A\Bin

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T22:58:49.910

如果是但现在不是，很可能您在项目中更改了某些内容，如果我理解正确，您正在创建一个便携式库（而不是 Windows 商店），如果是这种情况，您可能更改了您的平台。重新定位，打开项目的属性，然后在库->目标框架中单​​击更改，如果您选择了所有内容或选择了 .NET Framework 4.0.3，则不允许使用 System.Net.Http，以解决此问题，您需要退出一些选择并启用 .NET Framework 4.5，因为这是使用 System.Net.Http 的最低版本。

# css - 具有 HTML 绝对字体大小的字体的 CSS 重置

> ID：12612926
> 
> 赞同：0
> 
> 时间：2012-09-27T01:45:24.717
> 
> 标签：css

场景如下：

```
<link rel="stylesheet" type="text/css" href="/assets/bootstrap/css/bootstrap.min.css"/>
....
<font size="5">Some large font text</font>
<font size="3">Some smaller font text</font>
.... 
```

如何重置字体标签（即删除引导程序的 CSS）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:44:54.920

您可以删除不推荐使用的字体标签并编写跨度标签并通过 calss 名称在 Css 文件中使其成为样式并在 html 中调用它，例如：

```
<span class="font">Some large font text</span> 
```

在 CSS 中

```
.font{font-size:13px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:48:12.903

`font`不再是有效的 HTML。您应该考虑使用语义 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:10:29.240

如果 HTML 代码无法更改，您可以通过将以下规则添加到 bootstrap.min.css 文件来更改/重置大小（和其他属性）：

```
font[size="3"] {font-size: 10pt;}
font[size="5"] {font-size: 20pt;} 
```

# sql - 我应该使用什么 SQL 查询？

> ID：12612927
> 
> 赞同：1
> 
> 时间：2012-09-27T01:45:26.897
> 
> 标签：sql, database

这个表。问题是****找到使用最多成分的比萨****

我知道答案很特别，但我不知道如何使用查询找到它。我尝试了很多不同的方法，但都没有奏效。提前致谢。

```
 pizza    | ingredient | amount 
------------+------------+--------
 margarita  | cheese     |    120
 margarita  | spice      |      5
 ham        | ham        |    150
 ham        | spice      |      5
 napolitana | anchovies  |    100
 napolitana | olives     |     75
 napolitana | spice      |     10
 hawaiian   | ham        |    100
 hawaiian   | pineapple  |    100
 hawaiian   | spice      |      5
 cabanossi  | cabanossi  |    150
 cabanossi  | spice      |     10
 siciliano  | onion      |     50
 siciliano  | capsicum   |     75
 siciliano  | olives     |     50
 siciliano  | anchovies  |     50
 siciliano  | spice      |     15
 americano  | salami     |    120
 americano  | pepperoni  |     75
 americano  | spice      |     10
 mexicano   | onion      |     75
 mexicano   | capsicum   |     75
 mexicano   | mushroom   |     50
 mexicano   | chilli     |     25
 mexicano   | spice      |     20
 seafood    | seafood    |    200
 seafood    | spice      |      5
 garlic     | garlic     |     25
 garlic     | spice      |     10
 vegetarian | onion      |     50
 vegetarian | capsicum   |     50
 vegetarian | mushroom   |     50
 vegetarian | peas       |     50
 vegetarian | tomato     |     50
 vegetarian | spice      |      5
 mushroom   | mushroom   |    100
 mushroom   | spice      |      5
 special    | cheese     |     25
 special    | tomato     |     25
 special    | ham        |     25
 special    | anchovies  |     25
 special    | olives     |     25
 special    | mushroom   |     25
 special    | bacon      |     25
 special    | egg        |     25
 special    | pineapple  |     25
 special    | cabanossi  |     25
 special    | salami     |     25
 special    | capsicum   |     25
 special    | onion      |     25
 special    | peas       |     25
 special    | seafood    |     25
 special    | spice      |     10
 stagiony   | ham        |     75
 stagiony   | mushroom   |     50
 stagiony   | olives     |     50
 stagiony   | anchovies  |     25
 stagiony   | spice      |     10 
```

* * *

我只需要知道使用最多成分的披萨的名称。答案是从食谱组中**选择比萨饼 count( *)>=all (select count(* ) from recipe group by Pizza);**

输出是：

## 比萨

特别（1排）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T01:47:17.570

***...最多的成分***

以下查询列出了所有比萨饼及其成分总数。`LIMIT 1`如果要显示成分最多的比萨，请添加。

```
SELECT pizza, COUNT(*) totalIngredients
FROM tableName
GROUP BY pizzaList
ORDER BY totalIngredients DESC
-- LIMIT 1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/946b9/4)

然而，这个查询出现了一个问题。如果两个比萨共享最多的成分，则仅显示排序顺序中的第一个。要在顶部显示所有比萨饼，请使用以下代码：

```
SELECT pizza, COUNT(*) totalIngredients
FROM pizzaList
GROUP BY pizza
HAVING COUNT(*) = 
(
  SELECT MAX(totalCount)
  FROM
  (
    SELECT  COUNT(*) totalCount
    FROM    pizzaList
    GROUP BY pizza
  ) x
) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/946b9/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:48:03.207

这将是：

```
SELECT pizza, COUNT(pizza) AS ingredientcount FROM pizzas GROUP BY pizza ORDER BY ingredientcount DESC LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:50:19.727

假设`amount`是该*成分*的数量，并且您的意思是最大数量（即数量）的成分：

```
SELECT pizza
FROM tableName
GROUP BY pizza
ORDER BY SUM(amount) DESC
LIMIT 1 
```

如果您指的是最大数量的*不同成分*（即独特成分的数量）：

```
SELECT pizza
FROM tableName
GROUP BY pizza
ORDER BY COUNT(ingredient) DESC
LIMIT 1 
```

`DISTINCT`请注意，如果给定的比萨饼可能会列出两次相同的成分，则您可能需要在计数中添加 a 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:57:21.217

您的问题的答案取决于几件事。您想要最大数量的整体成分，还是最大数量的不同成分。另外，您只想要第一个还是按顺序列出？

首先，假设您想要浇头的总量。对此的查询如下：

```
SELECT TOP (1) Pizza, sum(amount) as TotalAmount
FROM PizzaTable
GROUP BY Pizza
ORDER BY sum(amount) DESC 
```

要获得的不仅仅是最顶行，请删除`TOP (1)`.

现在，让我们假设您想要成分的数量，而不是总量。对此的查询将是：

```
SELECT TOP (1) Pizza, count(*) as NumberOfIngredients
FROM PizzaTable
GROUP BY Pizza
ORDER BY count(*) DESC 
```

同样，删除`TOP (1)`列表而不是单个条目。

# javascript - 正则表达式匹配不返回真或假

> ID：12612929
> 
> 赞同：0
> 
> 时间：2012-09-27T01:45:57.730
> 
> 标签：javascript, regex

当有括号的值时，我正在尝试匹配。

```
var onsuccess = "aaa;bbb(ccc)";
onsuccess.split(';').forEach(function (success) {
                var re = new RegExp("\(.*?\)");
                document.write(success + ": " + success.match(re) + "<br>");
        });​ 
```

输出是

```
aaa: ,
bbb(ccc): , 
```

预期是

```
aaa: false
bbb(ccc): true 
```

我哪里错了？我一直以这个页面为例： [http ://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

这是我的小提琴：http: [//jsfiddle.net/valamas/8B5zw/](http://jsfiddle.net/valamas/8B5zw/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:55:42.003

```
var onsuccess = "aaa;bbb(ccc)";
onsuccess.split(';').forEach(function (success) {
   var re = /\(.*?\)/;
   document.write(success + ": " + re.test(success) + "<br>");
}); 
```

***[工作演示。](http://jsfiddle.net/XkNBr/)***

***注意：***如果使用`new RegExp(...)`，则需要转义反斜杠。

您的正则表达式应该是`var re = new RegExp("\\(.*?\\)");`，但由于您的正则表达式中没有变量，您应该只使用正则表达式文字。​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:47:18.007

`.match()`返回匹配组的数组。

您正在考虑`.test()`，它返回真或假。

此外，您`\`的 s 正被 Javascript 字符串文字所吞噬。
您应该改用正则表达式文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:50:19.210

这缺少一个要匹配的组，以及一个布尔值：

```
var onsuccess = "aaa;bbb(ccc)";
onsuccess.split(';').forEach(function (success) {
                //var re = new RegExp("(\(.*?\))");
                var re = /.*(\(.*?\)).*/;
                document.write(success + ": " + !!success.match(re) + "<br>");
        });​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T02:06:26.463

## 使用 .test 而不是强制转换

```
var onsuccess = "aaa;bbb(ccc)";
var rxParens = /.*(\(.*?\)).*/;

onsuccess.split(";").forEach(function(success) {
    document.write(success + ': ' + rxParens.test(success) + '<br>' );
}); 
```

* * *

```
aaa: false
bbb(ccc): true 
```

* * *

顺便说一句，.test 的执行速度比 .match 快很多倍[http://jsperf.com/exec-vs-match-vs-test/5](http://jsperf.com/exec-vs-match-vs-test/5)

# cakephp-1.3 - Cakephp 使用 this->set without array

> ID：12612931
> 
> 赞同：0
> 
> 时间：2012-09-27T01:46:06.210
> 
> 标签：cakephp-1.3, cakephp-2.0

无法弄清楚我在这里做错了什么：

我有一个控制器：

```
$this->set('sizes', array('4x4'=>'4x4','6x6'=>'6x6','8x8'=> '8x8')); 
```

该视图具有以下内容：

```
echo $this->Form->input('size'); 
```

下拉框与阵列正确显示。

在相同功能下的同一控制器中，我有：

```
$this->set('states', 'this state'); 
```

该视图具有以下内容：

```
echo $this->Form->input('state'); 
```

但是“状态”文本框中没有任何信息。如果我将状态线更改为：

```
$this->set('states', array('this state')); 
```

将显示一个下拉框，其中包含单个条目。我想让文本框填充信息而不是下拉框。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:01:51.250

可以肯定的是，您是否尝试过设置`type`表单输入？

```
$this->Form->input('state', array('type' => 'text')); 
```

可能没有填充输入，因为它使用单数“状态”而不是“状态”。我也一直理解表单字段是用`$this->data/$this->request->data`数组中的数据填充的。选择、复选框等是一种特殊情况，因为它们有一个选项数组，在您的大小输入的情况下，它会填充`$sizes`.

因此，假设您的表单模型是`Order`并且您设置`$this->request->data`了`OrdersController`：

```
$this->request->data['Page']['state'] = 'this state'; 
```

如果由于某种原因这对您不起作用，您始终可以明确设置输入的值：

```
$this->Form->input('state', array('value' => $states)); 
```

# c++ - c++ 项目需要通过 kinect 进行语音识别的 dll

> ID：12612935
> 
> 赞同：1
> 
> 时间：2012-09-27T01:46:55.690
> 
> 标签：c++, dll, kinect, speech-recognition

我是 kinect 开发的新手，我看过 kinect sdk 中给出的名为“SpeechBasics-D2D”的语音识别示例项目。效果很好。我需要将整个项目作为类库（如 .dll 文件）。我已从项目及其所有引用中删除了“TurtleController”类。（仍然工作正常）。然后我删除了 GUI 部分并尝试从我的主项目中启动“SpeechBasics”类，它不会开始通过 kinect 收听。我只是将示例项目“SpeechBasics-D2D”转换为类库项目并尝试从我的主项目中调用它。请给我一些建议，因为我被困在这一点上，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:28:56.570

Kinect 演示应用程序使用 Microsoft Speech Platform SDK；版本 11 是最新的。

[http://www.microsoft.com/en-us/download/details.aspx?id=27226](http://www.microsoft.com/en-us/download/details.aspx?id=27226)

在 C++ 示例中，我将查看“CSpeechBasics::CreateFirstConnected()”函数。这是查找 Kinect 传感器并将其链接到语音 SDK 的函数。由它进行的附加函数调用都与此相关。

请注意对此处创建的引用进行了哪些调用。这些是程序的其余部分如何链接到语音 SDK（Kinect 仅用作麦克风），因此是您希望通过 DLL 公开的内容。

另外 - 我建议在这篇文章中添加“speech-recognition”和可能的“speechrecognitionengine”标签。这可能会吸引更多解决此问题的人。

# php - 无法连接 - 数据库或编码错误

> ID：12612937
> 
> 赞同：-4
> 
> 时间：2012-09-27T01:47:01.657
> 
> 标签：php, mysql, cakephp, mysqli

我们已经上传了站点并且站点[http://bartanwale.gls.in](http://bartanwale.gls.in)显示错误：

```
"could not connect" 
```

然后我们也纠正了各种。

我们检查了代码的每一部分

我们已经仔细检查了数据库。

请使用我们发现以下错误的萤火虫帮助我们解决错误 - 他们不必对它做任何事情。

```
The character encoding declaration of the HTML document was not found when 
prescanning the first 1024 bytes of the file. When viewed in a 
differently-configured browser, this page will reload automatically. The encoding
declaration needs to be moved to be within the first 1024 bytes of the file.

<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=UTF-8"/>

The character encoding declaration of the HTML document was not found when 
prescanning the first 1024 bytes of the file. When viewed in a 
differently-configured browser, this page will reload automatically. 
The encoding declaration needs to be moved to be within the first 1024 bytes of 
the file.

...(u){r=u.arguments?'chrome':u.stack?'firefox':window.opera&&!('stacktrace' in u)?... 
```

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:54:04.160

我在您的源代码中发现了这个错误，在现在显示为“无法连接：”的 div 中

**警告**：mysql_fetch_array() 期望参数 1 是资源，在第**753**行的**/home/bartanwa/public_html/bartanwale/trendcart/api/api_methods.php中给出的布尔值**

 **也许您可以粘贴错误中引用的 php 文档的第 753 行周围的一些代码？**

# iphone - 带有 UIActivityIndi catorView 加载资源然后调用另一个 ViewController 的启动画面

> ID：12612938
> 
> 赞同：0
> 
> 时间：2012-09-27T01:47:10.463
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我很难尝试做一些简单的事情，

我有一个视图控制器，我想将它用作主菜单视图控制器的启动屏幕。我不明白为什么不从飞溅中调用模态。

有人知道发生了什么吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    indicator.frame = CGRectMake(0.0, 0.0, 180.0, 180.0);
    indicator.center = self.view.center;    
    [self.view addSubview:indicator];
    [indicator bringSubviewToFront:self.view];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = TRUE;

    //prepare all resources for app

    [indicator startAnimating];

    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    MainMenuViewController* mainMenu = [sb instantiateViewControllerWithIdentifier:@"mainMenu"];

    mainMenu.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:mainMenu animated:YES];
} 
```

如果我使用相同的代码附加一个按钮按下事件，它可以正常工作：

```
//[btn1 addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];

- (void)buttonPressedAction:(id)sender
{

    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    MainMenuViewController* mainMenu = [sb instantiateViewControllerWithIdentifier:@"mainMenu"];

    mainMenu.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:mainMenu animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:57:25.857

我改变了`viewDidLoad` 它`viewDidAppear`，它工作正常。我不知道为什么

# perl - 调试 perl 脚本时收到“dumpvar.pl 不可用”消息

> ID：12612940
> 
> 赞同：1
> 
> 时间：2012-09-27T01:47:14.767
> 
> 标签：perl, debugging

调试 perl 脚本时收到以下错误消息。

> “dumpvar.pl 不可用”

我可以进入调试模式，但是当我使用 x 命令检查变量的值时，出现错误消息，这是怎么回事？

我的 perl 版本如下

> 这是为 sun4-solaris 构建的 perl v5.8.8

我的操作系统信息如下

> SunOS 5.10 Generic_118822-30 sun4u sparc SUNW,Sun-Fire-V440

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:15:27.287

您是否从 @INC 中删除了 /usr/lib/perl/perl-5.16.0/lib/5.16.0 的等价物？如果那不存在，则调试器无法运行它来获取“x”输出。

让我们检查您的 Perl 安装：

```
perl -de0
x [qw(a b c)] 
```

如果这可行，那么您已经在您尝试调试的程序中以某种方式增加了您的@INC。在同一个调试器会话中：

```
p $INC['dumpvar.pl'] 
```

将打印出 dumpvar.pl 所在的目录，您可以在尝试调试的程序中检查 @INC 以查看该库的 @INC 条目是否已删除。

如果上面的“x”命令不起作用，你会得到类似的东西

```
Can't locate dumpvar.pl in @INC (@INC contains: ... 
```

那么你有一个损坏的 Perl 并且需要自己安装它（[perlbrew](http://perlbrew.pl)非常方便）或者与你的系统管理员讨论它。

# php - 如何通过 php 从服务器读取 .doc 文件并在 android 应用程序中显示 .doc 文件的文本？

> ID：12612948
> 
> 赞同：1
> 
> 时间：2012-09-27T01:47:57.517
> 
> 标签：php, android, parsing

我的服务器中有一个单词（.doc）文件，其位置类似于（...../mfunction/booklist.doc）。所以现在我很困惑如何在android应用的listview中获取（.doc）该文件的文本。是通过 JSON 解析还是 XML 解析或其他方式完成的。以哪种方式会更好？我对 PHP 代码感到困惑，我将如何管理它？我的想法是它不像通常的 JSON 或 XML 解析。

我需要更好的解释和细节，任何人都可以通过提供有关 PHP 代码的任何想法或教程链接来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:07:01.507

如果您可以在您的环境中安装软件包，请查看Antiword [。](http://www.winfield.demon.nl/)使用 this 和 shell_exec()，您应该能够检索 word 文档的内容。

另请阅读[https://stackoverflow.com/a/265079/473475](https://stackoverflow.com/a/265079/473475) - 如果您无法安装 Antiword，它会建议一个解决方案。

# audio - 使用 portaudio 将多音频音调到声卡

> ID：12612951
> 
> 赞同：0
> 
> 时间：2012-09-27T01:48:06.087
> 
> 标签：audio, portaudio

我正在尝试为声卡生成音调（频率：1950 赫兹，持续时间：40 毫秒，电平：-30 分贝，右声道（立体声），在蒸汽 1 上）。最后，我想播放其中两种音调（一种进入通道 1，一种进入通道 2）。

非常感谢任何帮助或指导。

谢谢，DW

* * *

嗨 Bjorn，我试过这个，但我没有得到我期望的频率（而且声音似乎不干净）。有什么想法有什么问题吗？我非常感谢任何帮助。

```
#define SAMPLE_RATE   (44100)
#define TABLE_SIZE   (200)
float FREQUENCY = 422;

...
for(int i=0; i<TABLE_SIZE; i++ )
{
    data.sine[i] = (float) sin( (double)i * ((2.0 * M_PI)/(double)SAMPLE_RATE) * FREQUENCY );
}

data.left_phase = 0;
data.right_phase = 0;
...

... in callback function ...
for(unsigned long i = 0; i < framesPerBuffer; i++ )
{   

  // fill output buffer with sin wave
  *out++ = data->amp * data->sine[data->left_phase];  // left     
  *out++ = data->amp * data->sine[data->right_phase]; // right                  

  data->left_phase += 1;    

  if( data->left_phase >= TABLE_SIZE ) 
    data->left_phase -= TABLE_SIZE;           

  data->right_phase += 1; 

  if( data->right_phase >= TABLE_SIZE ) 
    data->right_phase -= TABLE_SIZE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:20:41.730

PortAudio 有生成音调的示例代码，你只需要弄清楚频率。例如看这个答案：

[[portaudio]传输和检测频率 - Windows](https://stackoverflow.com/questions/11451934/portaudiotransmit-and-detect-frequency-windows)

更新：

无需尝试存储正弦数据表，只需使用以下公式计算回调中的正弦值：

幅度[n] = sin(n * desiredFreq * 2 * pi / 采样率)

因此（未经测试）您的代码将如下所示：

```
typedef struct
{
    long n;
} MyData;

float FREQUENCY = 422;

static int MyCallback(  
                    const void *inputBuffer, 
                    void *outputBuffer,
                    unsigned long framesPerBuffer,
                    const PaStreamCallbackTimeInfo* timeInfo,
                    PaStreamCallbackFlags statusFlags,
                    void *userData 
                  )
{   
    MyData *data = (MyData*)userData;
    float *out = (float*)outputBuffer;    

    (void) timeInfo; /* Prevent unused variable warnings. */
    (void) statusFlags;
    (void) inputBuffer;     

    for(unsigned long i = 0; i < framesPerBuffer; i++ )
    {               
        // fill output buffer with sin wave
        float v = sin( data->n * FREQUENCY * 2 * PI / (float) SAMPLERATE )
        *out++ = v; // left         
        *out++ = v; // right
    }   

    return paContinue;
} 
```

此代码并非没有问题：例如。最终 n 将“环绕”，我不确定随着输入变大， sin 是否仍然准确和有效。尽管如此，这是一个很好的起点，如果您只需要在现代硬件上生成几秒钟的音调，这确实是您所需要的。如果您需要更高级的东西，请先使其工作，然后您可以担心使用 LUT 使其更高效和更强大。

# c# - C# 将 COMObject 转换为 Excel.Workbook

> ID：12612954
> 
> 赞同：1
> 
> 时间：2012-09-27T01:48:18.890
> 
> 标签：c#, office-interop, .net

我正在尝试在 C# 应用程序中打开工作簿。当我调用 Open 方法时，它返回 a`System__COMObject`而不是 Workbook。这是我的代码：

```
 Microsoft.Office.Interop.Excel._Application excelApp = new Application();
  Microsoft.Office.Interop.Excel._Workbook wb = new WorkBook();      

  wb  = excelApp.Workbooks.Open(filepath, Type.Missing, Type.Missing, Type.Missing,
                        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

错误是一个`System.InvalidCastException`. 任何想法我做错了什么？

**编辑：**我现在不安装任何 COM 包或调整任何设置。我是否需要任何 COM 组件才能使用 Interop？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:39:16.023

不确定您从哪里获得 System.InvalidCastException 但我认为您不能以这种方式构造 Workbook 实例。只需简化为...

```
Microsoft.Office.Interop.Excel._Workbook wb = excelApp.Workbooks.Open(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:46:57.677

好的，您发生了一些奇怪的事情，因为 Excel 互操作中的“WorkBook”是一个接口，而不是一个类。"= new WorkBook()" 根本不应该工作。

```
var excelApp = new Application();
var wb = excelApp.Workbooks.Open( filepath, Type.Missing, Type.Missing, 
Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing ) as Workbook; 
```

应该让你得到你所追求的东西。声明中的类型（使用 _Application）也看起来有点可疑。

此示例使用 Excel 的 COM 引用，还要确保在引用属性中将“Embed Interop Types”选项设置为“True”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T23:25:25.190

我在对这个问题进行了深入研究之后。我发现 Microsoft.Interop 与 Excel 存在一些已知问题。我最终决定采用另一种解决方案 Flexcel。

# c++ - C'switch'用法？

> ID：12612958
> 
> 赞同：0
> 
> 时间：2012-09-27T01:48:43.990
> 
> 标签：c++, c

> **可能重复：**
> [在基于 C 的编程难题中调试 switch 语句](https://stackoverflow.com/questions/7175348/need-help-solving-a-c-based-programming-puzzle)

我在网上找到了以下 C 问题：

```
 #include<stdio.h>
  int main()
  {
          int a=10;
          switch(a)
          {
                  case '1':
                      printf("ONE\n");
                      break;
                  case '2':
                      printf("TWO\n");
                      break;
                  defa1ut:
                      printf("NONE\n");
          }
          return 0;
  } 
```

虽然我从未使用过 int '10' 的 'switch' 和 char '1'，但我认为最糟糕的情况是无法编译，或者会执行“default”。但是不，在我的 VStudio 上，它直接进入“返回 0”。为什么是这样？

顺便说一句，虽然我有几年的 C 编程经验，但我以前的座右铭是坚持使用 MSDN 或可用的代码示例。现在随着采访和提问，我的技能的扎实性肯定受到了挑战。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T01:49:19.490

`defa1ut`不一样`default`。

那是一个未使用且无法访问的标签。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T02:00:22.983

正如 SLaks 所指出的，`defa1ut`是用户定义的标签（例如 a `goto`），而不是 switch 关键字`default`。这就是您没有看到预期输出的原因。

但是要回答您的另一个问题，在 C 中您可以将`char`文字与整数进行比较。本例`'1'`中的数值为 49，假设您使用的是 ASCII 字符集。

假设您的意思是`default`，并且您使用的是 ASCII，您的代码示例等效于：

```
 int a=10;
      switch(a)
      {
              case 49:             // ASCII value of '1'
                  printf("ONE\n");
                  break;
              case 50:             // ASCII value of '2'
                  printf("TWO\n");
                  break;
              default:
                  printf("NONE\n");
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T05:33:27.260

你正在阅读`defa1ut`; `default`default 是 C 语言的关键字，但`defau1t`不是。如果您希望输出只是“NONE”，请使用`default`而不是`defau1t`.

# python - 在 ruby 中构建函数参数并将它们重用于其他函数

> ID：12612963
> 
> 赞同：0
> 
> 时间：2012-09-27T01:49:48.103
> 
> 标签：python, ruby

我在 Ruby 中有几个函数，我需要使用相同的命名参数参数来调用它们。前任。

```
config = { 'options' => {'key' => 'val' }, 'stuff' => '123' }

foo(arg1, arg2, **config)
bar(newarg1, newarg2, **config) 
```

我再次使用 **config 在 python 中的 kwargs 中。

我不知道如何在 Ruby 中做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T02:50:09.440

**编辑：** Ruby 2.0 引入了 splat 运算符和关键字参数，所以如果你使用 Ruby >= 2.0，你可以只使用`foo(arg, keyword: arg_default)`and `foo(1, **{:keyword => arg})`。如果您使用的是 Ruby 1.x，那么以下内容适用：

* * *

Ruby 1.x 没有关键字参数的 splat 运算符（事实上，Ruby 1.x 甚至**没有**关键字参数）。相反，您只需`config`将最后一个参数作为最后一个参数，您的函数的用户可以传入一个哈希值，您可以从中提取密钥：

```
foo(arg1, arg2, config)
bar(newarg1, newarg2, config) 
```

在*Python*`foo`中，你会`bar`以这种方式定义：

```
def foo(arg1, arg2, **config):
    # config now contains any keyword arguments passed to foo 
```

并称之为：

```
foo(1, 2, some="key", another="value")
# or if you have a hash from elsewhere
foo(1, 2, **{"some": "key", "another": "value"}) 
```

在*Ruby*中，以这种方式实现了类似的构造：

```
def foo(arg1, arg2, config={})
    # config is *still* a positional argument even though it has a default value!
    # do stuff with your configuration hash
    # as if it were a dictionary of keyword args
    # for example:
    default_config = {:options {:key => 'value'}, :stuff => 123}
    config = default_config.merge(config)
end 
```

它以这种方式调用：

```
foo(1, 2, :some => 'key', :another => 'value')
# which translates into
foo(1, 2, {:some => 'key', :another => 'value'})
# the {} are optional for the last argument 
```

如果我们将 Ruby 代码*直接*翻译成 Python，它看起来*像*这样：

```
def foo(arg1, arg2, config=None):
    # This is not *quite* exact because we can still call `foo(1, 2, config={})`
    # but I think it is as close as you can get in Python
    if config is None:
        config = {}
    # Now we can do things with the config dictionary. 
```

你会称之为：

```
# Note: no ** (splat) operator in front of our dictionary
foo(1, 2, {"some": "key", "another": "value"}) 
```

# jquery - jQuery 目标角色 = 主要咏叹调

> ID：12612964
> 
> 赞同：0
> 
> 时间：2012-09-27T01:49:51.903
> 
> 标签：jquery, wai-aria

我正在尝试将我的角色 = 主 div 定位为 jQuery 中的 ajaxish 负载，但我不知道该怎么做？我只是使用 [role=main] 还是有其他语法。

另外，如果由于某种原因不建议这样做，请告诉我。

# c++ - boost::algorithm - 拆分字符串会返回一个额外的标记

> ID：12612965
> 
> 赞同：4
> 
> 时间：2012-09-27T01:49:55.710
> 
> 标签：c++, string, boost

也许有人可以告诉我这里发生了什么？

我的意图是在大括号上拆分输入字符串：即：' **(** ' 或 ' **)** '。

对于**“(well)hello(there)world”**的输入字符串，我希望返回 4 个标记*：你好; 那里; 世界*。

正如您从下面的示例应用程序中看到的那样，我得到了 5 个令牌（第一个是空字符串）。

有没有办法让这个**只返回非空字符串？**

```
#include <iostream>
#include <boost/algorithm/string.hpp>
#include <vector>
int main()
{
    std::string in = "(well)hello(there)world";

    std::vector<std::string> tokens;
    boost::split(tokens, in, boost::is_any_of("()"));

    for (auto s : tokens)
        std::cout << "\"" << s << "\"" << std::endl;

    return 0;
} 
```

**输出：**

```
$ a.out
""        <-- where is this token coming from?
"well"
"hello"
"there"
"world" 
```

我试过使用`boost::algorithm::token_compress_on`，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:52:56.603

是的，返回的第一个结果是第一个左括号之前的空集 {}。行为符合预期。

如果您不想使用该结果，只需测试一个空的返回变量并将其丢弃。

要测试这是预期的行为，请在行尾放置一个括号，最后您将得到另一个空结果。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-29T13:47:17.843

这个线程有点旧，但这是更好的解决方案`boost::token_compress_on`，在分隔符后添加`boost::split`

# ruby-on-rails - 在 Rails 迁移中设置不同的默认值？

> ID：12612969
> 
> 赞同：1
> 
> 时间：2012-09-27T01:50:18.293
> 
> 标签：ruby-on-rails, ruby, migration, rails-migrations

我正在尝试编写迁移，它看起来像这样：

```
class AddStatusToWorks < ActiveRecord::Migration
  def self.up
    change_table :works do |t|
        t.string :status
    end
  end

  def self.down
    change_table :works do |t|
        t.remove :status
    end
  end
end 
```

问题是，我想根据表中已经存在的布尔值“完成”为“状态”设置不同的默认值。如果完成 = true，则状态 =“完成”。如果没有，status = "work in progress." （我想要一个字符串而不是作为布尔值保持完整的原因是因为我希望那里能够有两个以上的状态可能性。）知道怎么做吗？我是否像这样在其中粘贴一个 if 语句

```
change_table :works do |t|
        t.string :status
           if (:complete == true)
               :value => "complete"
           else
               :value => "wip"
end 
```

呃，所以看起来不太对劲。我用谷歌搜索了一下，发现你可以设置 :default 值，但这并不是我想要的。任何想法/帮助都会很可爱。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:36:14.117

您根本不需要默认值，您只需要添加新列并为其赋值。像这样的东西应该工作：

```
def self.up
  change_table :works do |t|
      t.string :status
  end
  Works.reset_column_information
  Works.where(:complete => true).update_all(:status => 'complete')
  Works.where(:complete => [false, nil]).update_all(:status => 'wip')
end 
```

有关. [_](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations) _`reset_column_information`

您也可以直接在数据库中执行此操作，但您必须小心不同的布尔表示（PostgreSQL 想要`'t'`and `'f'`，MySQL 想要`1`and `0`，SQLite 想要`1`and`0`但是 Rails 错误地使用`'t'`and `'f'`，...）：

```
t = connection.quote(true)
connection.execute(%Q{
  update works
  set status = case complete
    when #{t} then 'complete'
    else 'wip'
  end
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:58:19.087

请记住，创建记录时会立即创建默认值，因此还没有没有默认值的字段值。您可能希望将这种逻辑移动到您的模型中。也许在 ActiveRecord 回调中，即 before_validation 或 before_save。

# python - 通过 Apache 使用 MOD_WSGI 强制与 BOTTLE.PY 建立 HTTPS 连接？

> ID：12612972
> 
> 赞同：0
> 
> 时间：2012-09-27T01:50:49.850
> 
> 标签：python, https, bottle

我正在尝试使用 BOTTLE.PY 和 Apache 强制建立 HTTPS 连接。HTTPS 运行良好，我只需要确保客户端通过 SSL 连接。有没有办法强制这种行为？最好我希望浏览器重定向到等价物。HTTPS 连接 如果是 HTTP 连接。正在尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:06:44.230

您可以通过以下方式执行此操作`mod_rewrite`：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^(.*) https://your_server.com/$1 
```

（在 a`.htaccess`或 Apache 配置文件中。）

`RewriteCond`您也可以使用的替代方法是...

```
RewriteCond %{HTTPS} !^on$ 
```

# c# - Monodroid JNI for Java 反射调用私有方法

> ID：12612975
> 
> 赞同：0
> 
> 时间：2012-09-27T01:51:53.827
> 
> 标签：c#, java, java-native-interface, xamarin.android, jnienv

在 Monodroid 项目中，我需要能够调用类的私有方法。从[一个相关问题的答案](https://stackoverflow.com/a/12610875/362536)来看，这似乎可以通过反射在 Java 中实现：

```
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import android.os.ParcelFileDescriptor;

...

ParcelFileDescriptor pipe[] = null;

try {
    Method createPipeMethod = ParcelFileDescriptor.class.getDeclaredMethod("createPipe");
    pipe = (ParcelFileDescriptor[]) createPipeMethod.invoke(null);
} catch (NoSuchMethodException e) {
    throw new RuntimeException(e);
} catch (IllegalAccessException e) {
        throw new RuntimeException(e);
} catch (InvocationTargetException e) {
    throw new RuntimeException(e);
} 
```

我需要使用来自 Monodroid 的这段代码。不幸的是，[`java.lang.reflect`在 Monodroid 中不可用](https://stackoverflow.com/a/11376050/362536)。但是，有人建议我可以使用 Monodroid 项目中的 JNI 运行此代码。[Xamarin 文档指出内联 JNI 是可能的](http://docs.xamarin.com/android/advanced_topics/Java_Integration_Overview)，而无需绑定整个 JAR。不幸的是，[进一步的文档](http://docs.xamarin.com/android/advanced_topics/Working_With_JNI)没有说明更多关于这个主题的内容。此外，[关于 JNIEnv 的文档](http://androidapi.xamarin.com/?link=T:Android.Runtime.JNIEnv)是空白的。

看起来我需要`JNIEnv.CallVoidMethod()`，但我不知道该怎么做。我找不到示例或更多文档。

**如何在我的 Monodroid 项目中使用，或以`java.lang.reflect`其他方式调用私有方法？`.createPipe``ParcelFileDescriptor`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:03:01.433

您是否尝试过使用 C# 反射`Android.OS.ParcelFileDescriptor`？

[http://docs.mono-android.net/index.aspx?link=T%3AAndroid.OS.ParcelFileDescriptor](http://docs.mono-android.net/index.aspx?link=T%3AAndroid.OS.ParcelFileDescriptor)

我还没有尝试过，但如果 Android 的 Mono 甚至包装了 Java 类的私有成员，那么简单地使用 C# 反射可能就足够了。

如果这失败了，您可以继续 JNI 尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T09:39:45.437

JNI应该是可能的：http: [//docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/working_with_jni#_Static_Methods](http://docs.xamarin.com/guides/android/advanced_topics/java_integration_overview/working_with_jni#_Static_Methods)

未经测试的粗略草图：

```
var methodId = JNIEnv.GetStaticMethodID(ParcelFileDescriptor.Class.Handle, 
                                        "createPipe", 
                                        "()[Landroid/os/ParcelFileDescriptor;");
var result = JNIEnv.CallStaticObjectMethod(myCSharpFileDescriptorInstance.Handle,
                                           methodId); 
```

# ember.js - 这被认为是糟糕的 ember 架构设计吗？

> ID：12612976
> 
> 赞同：0
> 
> 时间：2012-09-27T01:51:59.070
> 
> 标签：ember.js

我的整个应用程序都有一个 rootElement，其中就是我的 ApplicationView。在这个应用程序视图中，我有一个 ContainerView，它创建了我的 LeftMenu、RightMenu 和 Body。如果我将 LeftMenu 和 RightMenu 绝对定位在 rootElement div 之外，这是一个糟糕的设计吗？

![余烬设计](../Images/99db9920ef54a2c5ff67baac6f76a64b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:21:08.793

我看不出有什么特别的问题，除了你可能会遇到 z-index 问题，因为你在定位的视图上施加了 DOM 层次结构约束。

# macos - mongod 运行，但只输出所有输出到路径，就是这样

> ID：12612977
> 
> 赞同：13
> 
> 时间：2012-09-27T01:52:01.147
> 
> 标签：macos, mongodb

我现在完全迷失了，非常感谢您的帮助。我通过 Homebrew 安装了 mongoDB，并在我的硬盘上的根目录上创建了一个 data/db 目录。到目前为止一切似乎都很好。然后我继续运行 mongod 并遇到以下情况：

```
all output going to: /usr/local/var/log/mongodb/mongo.log 
```

这是我上次运行时日志文件的内容（它的最新部分）：

```
Wed Sep 26 18:46:19 [initandlisten] MongoDB starting : pid=7720 port=27017 dbpath=/usr/local/var/mongodb 64-bit host=Notionworks-MacBook-Pro.local
Wed Sep 26 18:46:19 [initandlisten] 
Wed Sep 26 18:46:19 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Wed Sep 26 18:46:19 [initandlisten] db version v2.2.0, pdfile version 4.5
Wed Sep 26 18:46:19 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Wed Sep 26 18:46:19 [initandlisten] build info: Darwin bs-osx-106-x86-64-1.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_49
Wed Sep 26 18:46:19 [initandlisten] options: { bind_ip: "127.0.0.1", config: "/usr/local/etc/mongod.conf", dbpath: "/usr/local/var/mongodb", logappend: "true", logpath: "/usr/local/var/log/mongodb/mongo.log" }
Wed Sep 26 18:46:19 [initandlisten] journal dir=/usr/local/var/mongodb/journal
Wed Sep 26 18:46:19 [initandlisten] recover : no journal files present, no recovery needed
Wed Sep 26 18:46:19 [websvr] admin web console waiting for connections on port 28017
Wed Sep 26 18:46:19 [initandlisten] waiting for connections on port 27017 
```

据我所知，一切看起来都运行正常（但是我真的不知道我在看什么）。唯一看起来不对劲的是 dbpath，根据文档默认为 /data/db/

任何帮助将不胜感激！

**编辑：**

对不起，我忘了提到我确实在运行 mongod 之后尝试运行 mongo。这是代码：

```
Notionworks-MacBook-Pro:locomotivecms Notionwork$ mongod
all output going to: /usr/local/var/log/mongodb/mongo.log
mongo
db.test.save( { a: 1} )
db.test.find() 
```

你觉得这很正常吗？它不返回任何东西...

***更新：***

解决了！我很傻，试图`mongo`在同一个终端窗口中输入命令。我没有意识到您必须打开一个新窗口才能运行它。mongoDB的设置教程中没有提到必须打开一个新窗口，我也没有把两个和两个放在一起。我很困惑，因为我认为 mongoDB 只是坐在那里思考......现在效果很好！我现在要弄清楚的是如何永久更改 mongoDB 的默认路径，这样我就不必每次都使用 --dbpath 来更改它。现在它默认为 usr/local/var/mongodb。我只需要找到配置文件并在可能的情况下更改它......刚刚在日志中找到它！耶！我看看能不能改！再次感谢您的及时回复！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T18:25:07.367

您现在需要更改文件的限制，即 266。

** 警告：软限制太低。文件数为 256，应至少为 1000

在命令行中输入以下内容进行更改：
`ulimit -n 1000`

您可能会收到更改它的 maxproc 错误，您可以[在这篇文章中找到更多信息](https://serverfault.com/questions/15564/where-are-the-default-ulimits-specified-on-os-x-10-5)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T02:21:08.780

如果您想开始使用该实例，只需键入

```
mongo 
```

在新终端中或使用 --fork 运行 mongod

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T08:14:51.813

输入`mongo`新的终端。

# c# - 虚拟成员在运行时类型上分派

> ID：12612981
> 
> 赞同：2
> 
> 时间：2012-09-27T01:52:18.260
> 
> 标签：c#, oop

OOP 中讨论的功能/主题之一是虚拟成员。我正在查看如下声明：

***虚拟成员在运行时类型上分派***

这是否意味着虚拟方法依赖于它正在接受或处理的可变类型的对象类型？

任何更正或评论将不胜感激。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T01:56:50.843

不，它与方法接受的参数无关，因为每个实现的参数应该相同。这意味着虚拟方法将在运行时根据调用该方法的类型进行解析。考虑一下：

```
public class Parent
{
    public virtual string SayHi()
    {
        return "Hi!";
    }
}

public class NiceChild : Parent
{
    public override string SayHi()
    {
        return "Hello World!";
    }
}

public class MeanChild : Parent
{
    public override string SayHi()
    { 
        return "You suck!";
    }
} 
```

现在，我们有一个方法：

```
public void PrintHi(Parent instance)
{
    Console.WriteLine(instance.SayHi());
} 
```

如果您看到的只是上面的方法，您可以使用以下三种方法之一调用该方法，但直到运行时才知道结果：

```
PrintHi(new Parent()); // Hi
PrintHi(new NiceChild()); // Hello World!
PrintHi(new MeanChild()); // You suck! 
```

# php - fwrite 跨域？

> ID：12612989
> 
> 赞同：0
> 
> 时间：2012-09-27T01:53:08.773
> 
> 标签：php, fwrite

下面的代码可以吗？或者没有，因为它是一个安全问题？我想从一个文件夹 fwrite 到另一个文件夹，所以如果 fwrite 函数位于 /1，我可以 fwrite 到 /2 上的 .txt 文件吗？

```
<?php
$myFile = "../news/derp.txt";
$fh = fopen('derp.txt', 'w') or die("File Can't Be Written To.");
$stringData = "Yo, .";
fwrite($fh, $stringData);
fclose($fh);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:55:54.090

只要脚本在对文件具有写入权限的上下文中执行，它就应该可以工作。

安全问题问题需要更多关于您正在使用它做什么以及第二个目录是否公开可见的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:55:24.347

PHP 很可能无法写入远程文件，但如果它是本地文件夹，则仅取决于 PHP 是否具有对该文件夹 + 文件的写入权限。

读这个：

“如果 PHP 已经确定文件名指定了一个本地文件，那么它将尝试在该文件上打开一个流。该文件必须可供 PHP 访问，因此您需要确保文件访问权限允许此访问。如果您已启用安全模式或 open_basedir 可能会应用进一步的限制。”

[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:56:13.917

PHP 可以写入文件系统上的任何位置。PHP 不限于运行它的服务器的域，这就是 LFI 如此高效的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T01:56:57.400

PHP 可以写入它具有写入权限的任何目录。如果您无权访问它，例如共享服务器上的其他人的帐户，那么不，您可能无法做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T02:10:14.773

我的问题的答案是肯定的。我只是不知道情况，以及升入档案的正确方法。这是最终的工作脚本。从 /1/fwrite.php 编写，这是脚本。

```
<?php
$file = fopen("../2/derp.txt","w");
fwrite($file,"Hello World!");
fclose($file);
?> 
```

# iphone - 为另一个半透明视图后面的视图调用 [view setNeedsDisplay] 是否不会调用 drawRect:？

> ID：12612998
> 
> 赞同：0
> 
> 时间：2012-09-27T01:55:32.147
> 
> 标签：iphone, ios, alpha, drawrect, subviews

我有两种看法：

带有 alpha 1.0 的
视图 A 带有 0.5的 alpha 视图 B

两者都是子视图，视图 B 在视图 A 之后添加为子视图，这意味着不透明视图 A 通过半透明视图 B 部分可见。

当我同时调用`setNeedsDisplay`两个视图时，只会`drawRect`调用视图 B。

我知道这`setNeedsDisplay`不会立即调用`drawRect`，所以我猜如果 A 完全不可见，这将是有道理的。

当我可以看到视图 A 到 B 的一部分时，为什么 A`drawRect`仍然没有被调用？也许我没有正确理解文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:20:04.473

回答我自己的问题 - 在这种情况下不调用 drawRect 。