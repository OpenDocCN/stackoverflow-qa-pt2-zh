# StackOverflow 问答 12752000-12752999

# objective-c - 如何将 scrollView 向下移动 44 倍以为 NavBar 腾出空间

> ID：12752000
> 
> 赞同：0
> 
> 时间：2012-10-05T18:26:38.550
> 
> 标签：objective-c, ios, uiscrollview, navbar

我正在使用以下代码来创建我的滚动视图。我想将 scrollView 向下移动 44px 以为我的导航栏腾出空间。

```
scroll = [[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
scroll.backgroundColor = [UIColor clearColor];
scroll.delegate = self;
image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Menu.png"]];
scroll.contentSize = image.frame.size;
[scroll addSubview:image];
scroll.minimumZoomScale = scroll.frame.size.width / image.frame.size.width;
scroll.maximumZoomScale = 2.0;
[scroll setZoomScale:scroll.minimumZoomScale];

UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];

[doubleTap setNumberOfTapsRequired:2];

[scroll addGestureRecognizer:doubleTap];
self.view = scroll; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:38:24.390

你不能只是在界面构建器中添加一个滚动视图作为出口，把它放在你的导航栏下面。

在 .h 中声明滚动视图

在 ViewDidLoad 下的 .m

```
[scroll setScrollEnabled:YES];
[scroll setContentSize: CGSizeMake(320, 1000)]; ////or whatever size you want here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:48:36.477

您可能希望使用不同的框架对其进行初始化......但这取决于创建此导航栏的位置/方式。如果你有一个视图控制器，并且这些都是视图控制器视图的子视图，那么你应该在 viewDidLoad 中创建对象，然后只需先创建导航栏，使用 self.view.bounds 获取初始化宽度。我假设你想把 UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleBottomMargin 在这里作为 autoResizingMask。然后，如果滚动视图是导航栏下方视图的其余部分，则可以使用为其创建框架

```
CGRect scrollFrame = CGRectInset(self.view.bounds, 0, navbar.bounds.size.height) 
```

放一个 UIViewAutoresizingFlexibleWidth 的 autoresizingMask | 滚动视图上的 UIViewAutoResizingFlexibleHeight。

如果您以不同的位置/方式创建视图，那么其中一些可能需要修改。我假设您的视图是顶部的导航栏，x 像素高（在这种情况下为 44，但在设置滚动视图框架的上下文中并不重要）。然后是填充视图其余部分的滚动视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:43:42.830

您的代码是正确的，要手动创建一个框架：

scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0,44,320,480)];

:)

这适用于 iPod 和 iphone View 但这会让滚动从 44px 开始

# c++ - 双向链表：未解决的外部

> ID：12752001
> 
> 赞同：5
> 
> 时间：2012-10-05T18:26:43.033
> 
> 标签：c++

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

这又是一个家庭作业，我的导师给了我们很多反馈，但我仍然对这个编译问题感到迷茫。

当我将 main 函数放在实现文件中时，程序编译并完美运行。但是，当我将 main 函数放入 main.cpp 时，编译器会抱怨：

```
 unresolved external symbol "public: __thiscall doublyLinkedList<int>::doublyLinkedList<int>(void)" (??0?$doublyLinkedList@H@@QAE@XZ) referenced in function 
```

# 头文件

```
#ifndef H_doublyLinkedList
#define H_doublyLinkedList

#include <iostream>
#include <cassert>

using namespace std;

//Definition of the node
template <class Type>
struct nodeType
{  
   Type info;
   nodeType<Type> *next;
   nodeType<Type> *back;  
};

template <class Type>
class doublyLinkedList
{
public:
const doublyLinkedList<Type>& operator=
                       (const doublyLinkedList<Type> &);
  //Overload the assignment operator.

void initializeList();
  //Function to initialize the list to an empty state.
  //Postcondition: first = NULL; last = NULL; count = 0;

bool isEmptyList() const;
  //Function to determine whether the list is empty.
  //Postcondition: Returns true if the list is empty,
  //               otherwise returns false.

void destroy();
  //Function to delete all the nodes from the list.
  //Postcondition: first = NULL; last = NULL; count = 0;

void print() const;
  //Function to output the info contained in each node.

void reversePrint() const;
  //Function to output the info contained in each node
  //in reverse order.

int length() const;
  //Function to return the number of nodes in the list.
  //Postcondition: The value of count is returned.

Type front() const;
  //Function to return the first element of the list.
  //Precondition: The list must exist and must not be empty.
  //Postcondition: If the list is empty, the program 
  //               terminates; otherwise, the first 
  //               element of the list is returned. 

Type back() const;
  //Function to return the last element of the list.
  //Precondition: The list must exist and must not be empty.
  //Postcondition: If the list is empty, the program
  //               terminates; otherwise, the last
  //               element of the list is returned. 

bool search(const Type& searchItem) const;
  //Function to determine whether searchItem is in the list.
  //Postcondition: Returns true if searchItem is found in
  //               the list, otherwise returns false.

void insert(const Type& insertItem);
  //Function to insert insertItem in the list.
  //Precondition: If the list is nonempty, it must be in
  //              order.
  //Postcondition: insertItem is inserted at the proper place
  //               in the list, first points to the first
  //               node, last points to the last node of the
  //               new list, and count is incremented by 1.

void deleteNode(const Type& deleteItem);
  //Function to delete deleteItem from the list. 
  //Postcondition: If found, the node containing deleteItem
  //               is deleted from the list; first points
  //               to the first node of the new list, last
  //               points to the last node of the new list,
  //               and count is decremented by 1; otherwise,
  //               an appropriate message is printed. 

doublyLinkedList(); 
  //default constructor
  //Initializes the list to an empty state.
  //Postcondition: first = NULL; last = NULL; count = 0;

doublyLinkedList(const doublyLinkedList<Type>& otherList); 
  //copy constructor
~doublyLinkedList(); 
  //destructor
  //Postcondition: The list object is destroyed.

public:
int count;
nodeType<Type> *first; //pointer to the first node
nodeType<Type> *last;  //pointer to the last node

public:
void copyList(const doublyLinkedList<Type>& otherList); 
  //Function to make a copy of otherList.
  //Postcondition: A copy of otherList is created and
  //               assigned to this list.
};

#endif 
```

# 实现文件：

```
#include <iostream>
#include <cassert>
#include "doublyLinkedList.h"

using namespace std;

template <class Type>
doublyLinkedList<Type>::doublyLinkedList()
{
first= NULL;
last = NULL;
count = 0;
}

template <class Type>
bool doublyLinkedList<Type>::isEmptyList() const
{
return (first == NULL);
}

template <class Type>
void doublyLinkedList<Type>::destroy()
{  
nodeType<Type>  *temp; //pointer to delete the node

while (first != NULL)
{
    temp = first;
    first = first->next;
    delete temp;
}

last = NULL;
count = 0;
}

template <class Type>
void doublyLinkedList<Type>::initializeList()
{
destroy();
}

 template <class Type>
 int doublyLinkedList<Type>::length() const
{
return count;
}

template <class Type>
void doublyLinkedList<Type>::print() const
{
nodeType<Type> *current; //pointer to traverse the list

current = first;  //set current to point to the first node

while (current != NULL)
{
    cout << current->info << "  ";  //output info
    current = current->next;
}//end while
}//end print

 template <class Type>
 void doublyLinkedList<Type>::reversePrint() const
 {
nodeType<Type> *current; //pointer to traverse 
                         //the list

current = last;  //set current to point to the 
                 //last node

while (current != NULL)
{
    cout << current->info << "  ";  
    current = current->back;
}//end while
}//end reversePrint

template <class Type>
 bool doublyLinkedList<Type>::
                   search(const Type& searchItem) const
{
bool found = false;
nodeType<Type> *current; //pointer to traverse the list

current = first;

while (current != NULL && !found)
    if (current->info >= searchItem)
        found = true;
    else
        current = current->next;

if (found)
   found = (current->info == searchItem); //test for 
                                          //equality

 return found;
 }//end search

template <class Type>
Type doublyLinkedList<Type>::front() const
{
assert(first != NULL);

return first->info;
}

template <class Type>
Type doublyLinkedList<Type>::back() const
{
assert(last != NULL);

return last->info;
}

template <class Type>
void doublyLinkedList<Type>::insert(const Type& insertItem)
{
nodeType<Type> *current;      //pointer to traverse the list
nodeType<Type> *trailCurrent; //pointer just before current
nodeType<Type> *newNode;      //pointer to create a node
bool found;

newNode = new nodeType<Type>; //create the node
newNode->info = insertItem;  //store the new item in the node
newNode->next = NULL;
newNode->back = NULL;

if(first == NULL) //if the list is empty, newNode is 
                  //the only node
{
   first = newNode;
   last = newNode;
   count++;
}
else
{
    found = false;
    current = first;

    while (current != NULL && !found) //search the list
        if (current->info >= insertItem)
            found = true;
        else
        {
            trailCurrent = current;
            current = current->next;
        }

    if (current == first) //insert newNode before first
    {
        first->back = newNode;
        newNode->next = first;
        first = newNode;
        count++;
    }
    else
    {
          //insert newNode between trailCurrent and current
        if (current != NULL)
        {
            trailCurrent->next = newNode;
            newNode->back = trailCurrent;
            newNode->next = current;
            current->back = newNode;
        }
        else
        {
            trailCurrent->next = newNode;
            newNode->back = trailCurrent;
            last = newNode;
        }

        count++;
    }//end else
}//end else
}//end insert

template <class Type>
void doublyLinkedList<Type>::deleteNode(const Type& deleteItem)
{
nodeType<Type> *current; //pointer to traverse the list
nodeType<Type> *trailCurrent; //pointer just before current

bool found;

if (first == NULL)
    cout << "Cannot delete from an empty list." << endl;
else if (first->info == deleteItem) //node to be deleted is  
                                   //the first node
{
    current = first;
    first = first->next;

    if (first != NULL)
        first->back = NULL;
    else
        last = NULL;

    count--;

    delete current;
}
else 
{
    found = false;
    current = first;

    while (current != NULL && !found)  //search the list
        if (current->info >= deleteItem)
            found = true;
        else
            current = current->next;

    if (current == NULL)
        cout << "The item to be deleted is not in " 
             << "the list." << endl;
    else if (current->info == deleteItem) //check for 
                                             //equality
    {
        trailCurrent = current->back; 
        trailCurrent->next = current->next;

        if (current->next != NULL)
            current->next->back = trailCurrent;

        if (current == last)
            last = trailCurrent;

        count--;
        delete current;
    }
    else
        cout << "The item to be deleted is not in list." 
             << endl;
}//end else
}//end deleteNode

template <class Type>
void doublyLinkedList<Type>::copyList(const doublyLinkedList<Type>& otherList)
 {

//cout << "The definition of this function is left as an exercise." << endl;
//cout << "See Programming Execrise 9." << endl;

 template <class Type>
 doublyLinkedList<Type>::doublyLinkedList(const doublyLinkedList<Type>& otherList)
 {

// cout << "The definition of the copy constructor is left as an exercise." <<         endl;
 // cout << "See Programming Execrise 9." << endl;
}

template <class Type>
const doublyLinkedList<Type>& doublyLinkedList<Type>::operator=
                        (const doublyLinkedList<Type> &)

//  cout << "Overloading the assignment operator is left as an exercise." << endl;
//  cout << "See Programming Execrise 9." << endl;
}

 template <class Type>
 doublyLinkedList<Type>::~doublyLinkedList()
 {

//cout << "Definition of the destructor is left as an exercise." << endl;
//cout << "See Programming Execrise 9." << endl;
 } 
```

# 主功能：

```
//Program to test various operations on a doubly linked list

#include <iostream>
#include "doublyLinkedList.h"  

using namespace std; 

int main()
{
char choice;
int n = 0;
 doublyLinkedList<int> myList;

cout<<"this is a test"<<endl;

do {
 cout<<"Main Menu:"<<endl;
 cout<<"Choice of operations to perform on Dobule Linked List"<<endl;
 cout<<"Create list values :  C"<<endl;
 cout<<"Initialize List:   Z"<<endl;
 cout<<"Check List Empty:   M"<<endl;
 cout<<"Destroy List:   E  "<<endl;
 cout<<"Print List  : P"<<endl;
 cout<<"Reverse printed list:  R"<<endl;
 cout<<"Length of List: L"<<endl;
 cout <<"Front of List: F"<<endl;
 cout<<"Back of List: B"<<endl;
 cout<<"Search list: S"<<endl;
 cout<<"Insert List: I"<<endl;
 cout<<"delete list: D"<<endl;
 cout<<"use copy constructor : U" <<endl;
 cout <<"quit: Q"<<endl;

 cin >> choice;
 if ((choice == 'I' )|| (choice =='D')|| (choice == 'S'))
 {
     cout<<"Enter value to manipulate: "<<endl;
     cin >> n;
 }
 switch ( choice) 
 {
 case 'C':
  cout<<"Please enter a list"<<endl;
 while(n!= -999){
     myList.insert(n);
     cin>>n;}
     break;

 case 'S':  if (myList.search(n))
            cout<< " List contains: "<<n<<endl;
            else
                cout<<"List does not contain "<<n<<endl;
            break;
case 'I': 
    myList.insert(n);
    cout<<"element was inserted"<<endl;
    break;
case 'D':
        myList.deleteNode(n);
        cout<<"node was deleted"<<endl;
        break;

case 'L':  cout<<"Length is \n"<<endl;
    myList.length();
    break;
case 'B': 
        cout<<"back element is :  "<< myList.back();
        break;
case 'F' : 
    cout<<"front element is "<<myList.front();
    break;
case 'Z' : myList.initializeList();
        cout<<"list initialized"<<endl;
case 'M': if (myList.isEmptyList())
        cout<<"is empty"<< endl;
        else
        cout<<"is not empty"<<endl;
        break;
    case 'E': myList.destroy();
    cout<<"list destroyed"<<endl;
    break;
    case 'P': myList.print();
    break;
    case'R': cout<<"reversed"<<endl;
    myList.reversePrint();
    break;
    }
    }while(choice!= 'Q');
    return 0;

 } 
```

我正在寻找指导。我知道答案很简单，我只是没有看到它。我考虑过使用关键字 extern，但不确定如何使用它。就像我在标签中所说的那样，这是家庭作业，所以我不是在寻找快速解决方案，而是希望从错误中吸取教训。我非常感谢这个网站和所有成员。

我在这里发布的所有代码都是图书出版商免费提供的，除了 main.cpp 之外，我省略了我的原始代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:35:50.163

您需要将实现移动到头文件中。与普通函数不同，编译器需要能够在使用时查看所有模板代码。

有关更多信息，请参阅此问题中的答案：

[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:40:41.813

问题是您的主编译单元（*使用*它们的地方）中没有可用的模板定义。

这意味着您需要对其使用的类型进行显式实例化。

1.  添加

    ```
    template class doublyLinkedList<int>; 
    ```

    到 doublyLinkedList.cpp 的末尾以显式实例化它。

2.  或者在标题中包含 cpp，

3.  或直接进入 main.cpp

# c++ - 优化我的代码以查找给定整数的因子

> ID：12752007
> 
> 赞同：4
> 
> 时间：2012-10-05T18:27:02.540
> 
> 标签：c++, factors

这是我的代码，但我想对其进行优化。我不喜欢在 n 的平方根之前测试所有数字的想法，考虑到一个人可能面临寻找大量因素的事实. 你的回答会有很大帮助。提前致谢。

```
unsigned int* factor(unsigned int n)
{    
    unsigned int tab[40];
    int dim=0;
    for(int i=2;i<=(int)sqrt(n);++i)
    {
        while(n%i==0)
        {
            tab[dim++]=i;
            n/=i;
        }
    }
    if(n>1)
        tab[dim++]=n;
    return tab;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:48:25.263

这是关于如何在“正确”c++ 中执行此操作的建议（因为您标记为[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")）。

**PS。**差点忘了提：我优化了对`sqrt`away 的调用 :)

[在http://liveworkspace.org/code/6e2fcc2f7956fafbf637b54be2db014a](http://liveworkspace.org/code/6e2fcc2f7956fafbf637b54be2db014a)上现场观看

```
#include <vector>
#include <iostream>
#include <iterator>
#include <algorithm>

typedef unsigned int uint;

std::vector<uint> factor(uint n)
{    
    std::vector<uint> tab;

    int dim=0;
    for(unsigned long i=2;i*i <= n; ++i)
    {
        while(n%i==0)
        {
            tab.push_back(i);
            n/=i;
        }
    }
    if(n>1)
        tab.push_back(n);
    return tab;
}

void test(uint x)
{
    auto v = factor(x);
    std::cout << x << ":\t";
    std::copy(v.begin(), v.end(), std::ostream_iterator<uint>(std::cout, ";"));
    std::cout << std::endl;
}

int main(int argc, const char *argv[])
{
    test(1);
    test(2);
    test(4);
    test(43);
    test(47);
    test(9997);
} 
```

输出

```
1:  
2:  2;
4:  2;2;
43: 43;
47: 47;
9997:   13;769; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:48:01.033

有一个简单的更改会在一定程度上缩短运行时间：将所有 2 分解，然后只检查奇数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T18:42:45.713

如果你使用

```
... i*i <= n; ... 
```

它可能比 i <= sqrt(n) 运行得快得多

顺便说一句，您应该尝试处理负 n 的因素，或者至少确保您永远不会传递一个负数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T18:38:39.880

恐怕你不能。地球上没有已知的方法可以在多项式时间内分解大整数。但是，有一些方法可以帮助您稍微（不显着）加快您的程序。搜索维基百科以获取更多参考。[http://en.wikipedia.org/wiki/Integer_factorization](http://en.wikipedia.org/wiki/Integer_factorization)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T18:39:04.390

从您的解决方案中可以看出，您发现基本上所有素数（条件`while (n%i == 0)`）都是这样工作的，特别是对于大数的情况，您可以事先计算素数，并只检查那些。质数计算可以使用埃拉托色尼筛法或其他一些有效的方法来完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T19:56:21.903

```
unsigned int* factor(unsigned int n) 
```

如果`unsigned int`是典型的 32 位类型，则数字太小，任何更高级的算法都无法获得回报。试炼师平时的强化当然是值得的。

如果您将除以 2 移出循环，并且只除以循环中的奇数，如[Pete Becker 所述](https://stackoverflow.com/a/12752287/1011995)，您实际上是将输入数字分解所需的除法数减半，从而加快该函数几乎是 2 倍。

如果您更进一步，并从循环中的除数中消除 3 的倍数，您可以减少除数，从而将速度提高接近 3 倍（平均而言；大多数数字没有任何大质因数，但可以被 2 或 3 整除，对于那些加速比要小得多；但无论如何这些数字很快就会被分解。如果你分解更大范围的数字，大部分时间都花在分解少数数字上有大的素数除数）。

```
// if your compiler doesn't transform that to bit-operations, do it yourself
while(n % 2 == 0) {
    tab[dim++] = 2;
    n /= 2;
}
while(n % 3 == 0) {
    tab[dim++] = 3;
    n /= 3;
}
for(int d = 5, s = 2; d*d <= n; d += s, s = 6-s) {
    while(n % d == 0) {
        tab[dim++] = d;
        n /= d;
    }
} 
```

如果您真的经常调用该函数，那么值得预先计算不超过 65535 的 6542 个素数，将它们存储在静态数组中，然后仅除以素数以消除所有先验保证不会找到除数的除法.

如果`unsigned int`恰好大于 32 位，那么使用更高级的算法之一将是有利可图的。您仍然应该从试验除法开始，以找到小的主要因素（无论小应该意味着`<= 1000`,还是可能需要测试，我的直觉是平均而言，较小的值之一会更好）`<= 10000`。如果在试除法阶段之后因式分解尚未完成，则使用例如 Miller-Rabin 测试的确定性（针对所讨论的范围）变体检查剩余因子是否为素数。如果不是，请使用您最喜欢的高级算法搜索一个因子。对于 64 位数字，我推荐[Pollard 的 rho 算法](http://en.wikipedia.org/wiki/Pollard's_rho_algorithm)`<= 100000``<= 1000000`或椭圆曲线分解。Pollard 的 rho 算法更容易实现，并且对于这么大的数字可以在可比较的时间内找到因子，所以这是我的第一个建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T18:45:11.573

Int 是遇到任何性能问题的方式。我只是试图用 boost 来测量你的算法的时间，但没有得到任何有用的输出（太快）。所以你根本不应该担心整数。

如果你使用 i*i 我能够在 15.097 秒内计算出 1.000.000 个 9 位整数。优化算法是件好事，但与其“浪费”时间（取决于您的情况），重要的是要考虑一个小的改进是否真的值得付出努力。有时您必须问自己是否需要能够在 10 秒内计算 1.000.000 个整数，或者 15 是否也可以。

# c# - 将 XML 读入包含 List 的类

> ID：12752008
> 
> 赞同：3
> 
> 时间：2012-10-05T18:27:03.470
> 
> 标签：c#, xml, linq-to-xml

我正在使用 XDocument 读取 XML 文件并将其加载到类中。每个“站点”节点应该是一个类，其中“标签”节点是一个列表。我无法将“标签”元素作为列表加载到类中。

以下是课程：

```
public class Site
{
    public string name;
    public string prefix;
    public List<Tag> tags;
}
public class Tag
{
    public string Name { get; set; }
    public string Column { get; set; }
} 
```

这是将 XML 数据加载到类中的代码：

```
settings = XDocument.Load("settings.xml");
IEnumerable<Site> sites = settings.Descendants("site").Select(x => new Site()
{
   name = x.Element("name").Value,
   prefix = x.Element("prefix").Value,
   // How to load the "tag" elements into a List<Class>?
}); 
```

使用以下 XML 示例：

```
<settings>
    <site>
        <name>name1</name>
        <prefix>prefix1</prefix>
        <tags>
            <tag column="col1">tag1</tag>
            <tag column="col2">tag2</tag>
            <tag column="col3">tag3</tag>
        </tags>
    </site>
    <site>
        <name>name2</name>
        <prefix>prefix2</prefix>
        <tags>
            <tag column="col1">tag1</tag>
            <tag column="col2">tag2</tag>
            <tag column="col3">tag3</tag>
        </tags>
    </site>
</settings> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:12:33.757

这有效：

```
using System.IO;
using System.Xml.Serialization;

namespace Playground
{
    public class Program
    {
        [XmlRoot("settings")]
        public class Settings
        {
            [XmlElement("site")]
            public Site[] Sites;
        }

        public class Site
        {
            [XmlElement("name")]
            public string Name;

            [XmlElement("prefix")]
            public string Prefix;

            [XmlArrayItem("tag", typeof(Tag))]
            [XmlArray("tags")]
            public Tag[] Tags;
        }

        public class Tag
        {
            [XmlAttribute("column")]
            public string Column;

            [XmlText]
            public string Name;
        }

        public static void Main(string[] args)
        {
            using (FileStream reader = new FileStream("mydoc.xml", FileMode.Open))
            {
                XmlSerializer ser = new XmlSerializer(typeof (Settings));
                Settings o = ser.Deserialize(reader) as Settings;
            }
        }
    }
} 
```

进一步阅读：

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx)（最重要的是 XmlSerializer 类）

[http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.71).aspx)

还有关于 XSD 的 Wikipedia 文章（不能发布两个以上的超链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:30:46.537

试试这个，在您的评论位置 // 如何加载...：（未经测试）

```
tags = x.Element("tags").Elements("tag").Select(r => new Tag() { Column=r.Attribute("column"), Value = r.Value } ); 
```

# vb.net - 使用 VB.net 创建动态表

> ID：12752015
> 
> 赞同：0
> 
> 时间：2012-10-05T18:27:37.860
> 
> 标签：vb.net

我的代码有这个小问题只是创建/显示最后一个表格单元。我知道它可能很小，但无法弄清楚我做错了什么。下面是我的代码。

```
 Dim tbl As Table = New Table()

    tblrow = New TableRow
    tblcell = New TableHeaderCell
    tblcell.Text = zone_name
    tblcell.HorizontalAlign = HorizontalAlign.Center
    tblrow.Cells.Add(tblcell)
    tbl.Rows.Add(tblrow)

    tblrow = New TableRow
    tblcell = New TableCell
    lblDesc = New Label
    lblDesc.ID = "lbl_" & zone_name
    lblDesc.Text = randomNum
    tblcell.HorizontalAlign = HorizontalAlign.Center
    tblcell.Controls.Add(lblDesc)
    tblrow.Cells.Add(tblcell)

    tbl.Rows.Add(tblrow) 
```

****** *** ** *** ****编辑****** ** *** ** *** ** *** *******

 **公共函数 add_table(ByVal zone_name As String, ByVal hgt As Integer, ByVal randomNum As Integer, ByVal fontSize As Integer)

```
 Dim tbl As Table = New Table()

    tbl.ID = "tbl_" & zone_name

    tblrow = New TableRow
    tblcell = New TableCell

    tblcell.Text = zone_name
    tblcell.HorizontalAlign = HorizontalAlign.Center
    tblrow.Cells.Add(tblcell)

    tbl.Rows.Add(tblrow)

    tblrow = New TableRow
    tblcell = New TableCell

    lblDesc = New Label
    lblDesc.ID = "lbl_" & zone_name
    lblDesc.Text = randomNum
    tblcell.HorizontalAlign = HorizontalAlign.Center
    tblcell.Controls.Add(lblDesc)
    tblrow.Cells.Add(tblcell)

    tbl.Rows.Add(tblrow)

    Return tbl
End Function

    tblrow = New TableHeaderRow

    tblcell = New TableHeaderCell
    tblcell.Controls.Add(add_table(zone_name, hgt, randomNum, fontSize))
    tblSeatMap.Rows.Add(tblrow) 
```**

# spring - 如何更新过时的代码

> ID：12752017
> 
> 赞同：0
> 
> 时间：2012-10-05T18:27:43.740
> 
> 标签：spring, jpa, jersey

尝试将 Jersey+Spring+JPA2.0 与 Hibernate、Glassfish 和 MySQL 一起使用，我在[http://persistentdesigns.com/wp/jersey-spring-and-jpa/](http://persistentdesigns.com/wp/jersey-spring-and-jpa/)找到了一个非常简短的在线教程。经过一番头疼之后，我终于知道它已经过时了（根据[http://monkieblankie.blogspot.com/2011/12/revisit-jersey-spring-jpa-hibernate.html](http://monkieblankie.blogspot.com/2011/12/revisit-jersey-spring-jpa-hibernate.html)）。为了更新它，我从`pom.xml`.

```
<repository>
        <id>central</id>
        <url>http://localhost:8081/artifactory/repo1</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository> 
```

但后来我不断收到下面的错误。我所做的只是从`applicationContext.xml`. 数据库现在

```
p:url="jdbc:mysql://localhost:3306/learnrest". 
```

我得到的错误是

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personService': Injection of persistence methods failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.AbstractMethodError
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:324) 
```

有谁知道如何更新源代码以使其正常工作？

更新：在下面为每个请求添加堆栈跟踪的第一部分。

```
INFO: Processing PersistenceUnitInfo [
name: testa
...]
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@10f66ec: defining beans [myResource,personService,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,dataSource,entityManagerFactory,transactionManager,jpaAdapter]; root of factory hierarchy
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'personService': Injection of persistence methods failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.AbstractMethodError
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:324)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:998)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.AbstractMethodError
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1337)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:308)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:297)
at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:224)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:503)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:473)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:598)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:569)
at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:192)
at org.springframework.beans.factory.annotation.InjectionMetadata.injectMethods(InjectionMetadata.java:117)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:321)
... 58 more
Caused by: java.lang.AbstractMethodError
at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:613)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:72)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:224)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:291)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1368)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)
... 77 more

SEVERE: PWC1306: Startup of context /jerseySpringJPA failed due to previous errors
SEVERE: PWC1305: Exception during cleanup after start failed

org.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started
at org.apache.catalina.session.StandardManager.stop(StandardManager.java:873)
at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5571)
at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5384)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:31:52.440

AbstractMethodError 表示正在调用一个抽象方法，这通常在编译时被捕获。将此视为运行时错误表明您的某些库之间存在一些不兼容。如果您的类路径中有 Hibernate 或任何其他依赖项，请检查您是否没有多个版本。

要查看包含哪些依赖项，您可以在 Maven 中运行 dependency:tree 目标。

# haskell - 如何为 Haskell 记录自定义 Show 实例？

> ID：12752020
> 
> 赞同：2
> 
> 时间：2012-10-05T18:28:01.410
> 
> 标签：haskell

我有一个 Haskell 记录数据类型，如下所示：

```
data Client = Client { clientId :: Int
                     , nickname :: Text
                     , clientSink :: Maybe (WS.Sink WS.Hybi00)
                     , clientRoom :: Maybe Room
                     } 
```

我无法从中派生 Show 实例，因为 WS.Sink 没有 Show 实例。

如何制作仅排除 clientSink 字段的 Show 实例，但像普通记录一样打印其余记录字段？

我应该为 WS.Sink 创建一个自定义 Show 实例吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T19:20:22.997

为 WS.Sink 添加一个 Show 实例

```
instance Show WS.Sink where show a = "Sink" 
```

或您想要的任何虚拟值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T20:31:59.170

在这种情况下，我不确定您是否真的想要 , 的实例`Show`。从[文档](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Text-Show.html#t%3aShow)。

> Show 的派生实例具有以下属性，这些属性与 Read 的派生实例兼容：
> 
> *   show 的结果是一个仅包含常量的语法正确的 Haskell 表达式，假设在声明类型的点处有效的固定性声明。它仅包含在数据类型、括号和空格中定义的构造函数名称。当使用带标签的构造函数字段时，还使用大括号、逗号、字段名称和等号。

这确实伴随着它仅适用于派生实例的警告，但我是合同的忠实拥护者，并且已经习惯于假设这`read . show`实际上是一个无操作。当然，在尝试自动派生实例时，您会再次遇到同样的问题`Read`，因此您现在使用不会引入语义错误`Show`，这只是一个偏好问题。

根据您的上下文（大胆猜测，您正试图通过在某处打印中间值来进行调试？）定义另一个类型类并实现类似`toString`函数可能对您最有效，而不会误导`show`您的实例的功能。例如，

```
class ToString a where
    toString :: a -> String

instance ToString Client where
    toString c = "Client {"
                 ++ shows (clientId c) ", "
                 ++ shows (nickname c) ", "
                 ++ shows (isJust (clientSink c)) ", "
                 ++ show (clientRoom c)
                 ++ "}" 
```

然后如果你想把它变成一个`Show`实例，它就像

```
instance Show Client where
    show = toString 
```

# scala - Scala 中的 REST API、WebSocket 和 ZeroMQ。用什么？

> ID：12752021
> 
> 赞同：1
> 
> 时间：2012-10-05T18:28:16.030
> 
> 标签：scala, rest, websocket, zeromq

假设我有一些通过 ZeroMQ 套接字进行通信的服务，并且我想向单页 Web 应用程序提供对该服务的访问。我希望 Web 应用程序与提供 REST API（用于控制和查询）和 WebSockets（用于监视）的服务通信，并且通过将 ZeroMQ 与第一个服务通信来实现这一点。我想用 Scala 写这个。

我可以使用哪些选项来构建第二个服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:02:44.620

一个非常集成的解决方案是为此使用 Akka/Play2。

[Akka 将是通过 akkas ZeroMQ Module](http://doc.akka.io/docs/akka/2.0.3/scala/zeromq.html)与 ZeroMQ socktes 通信的核心组件，它为您提供了一个很好的 Scala-API 和 Akka/Actor 集成。[然后可以使用play-mini](https://github.com/typesafehub/play2-mini)或[play2](http://www.playframework.org/)通过 HTTP/WebSockets 访问此 Akka/Actor 系统，主要区别在于定义 HTTP 端点的风格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T15:28:05.283

对于 REST API，我会推荐[Spray](https://github.com/spray/spray) - 一个很好的库，具有非常简洁和灵活的 DSL，用于定义 Web 服务。我们已将 Spray 集成到我们当前的项目中，并且对它非常满意。至于play-mini，AFAIK，它取决于整个play2项目，所以你最终会得到很多你不需要的东西。

# java - Android Java - 在欧洲和其他国家/地区，浮点数自动用逗号而不是句点表示

> ID：12752022
> 
> 赞同：2
> 
> 时间：2012-10-05T18:28:22.337
> 
> 标签：java, android, internationalization, floating-point

欧洲的小数惯例似乎使用逗号 (,) 而不是句点 (.)。这是否意味着浮动可能（**自动**）在欧盟和其他有此公约的国家/地区出现“3,1415 ...”？

也就是说...如果我打电话给`Float.toString(motionEvent.getX())`，我可能会得到 215,35 而不是 215.35 （在屏幕中间的某个地方）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:30:09.357

[`Float.toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#toString%28float%29)不使用文化，不 - 格式是固定的。有关详细信息，请参阅文档，包括：

> 如果 m 小于 10-3 或大于或等于 107，则它以所谓的“计算机科学计数法”表示。令 n 为唯一整数，使得 10n ≤ m < 10n+1；然后让 a 是 m 和 10n 的数学精确商，使得 1 ≤ a < 10。然后将大小表示为 a 的整数部分，作为一个十进制数字，后跟“。” ('\u002E')，后跟表示 a 小数部分的十进制数字，然后是字母 'E' ('\u0045')，然后是 n 表示为十进制整数，由 Integer 方法生成。到字符串（整数）。m 或 a 的小数部分必须打印多少位？必须至少有一个数字来表示小数部分，超过这个数字是 m

如果您使用诸如欧洲语言环境的默认设置之类的东西*，它将*使用逗号。[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:30:41.240

这个问题是“语言环境”（如何打印出浮点的文本表示，而不是浮点本身的值）。

是的，AFAIK，欧洲语言环境支持“，”而不是“。”：

> *   [http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)
> 
> 一个常见的错误是在生成机器可读的输出时隐式使用默认语言环境。这往往适用于开发人员的测试设备（特别是因为许多开发人员使用 en_US），但在用户处于更复杂区域设置的设备上运行时会失败。
> 
> 例如，如果您正在格式化整数，则某些语言环境将使用非 ASCII 十进制数字。再举一个例子，如果您正在格式化浮点数，某些语言环境将使用 ',' 作为小数点和 '.' 用于数字分组。这对于人类可读的输出是正确的，但如果呈现给另一台计算机可能会导致问题（例如，parseDouble(String) 无法解析这样的数字）。您还应该警惕不采用 Locale 的 toLowerCase() 和 toUpperCase() 重载

附录：

换句话说，有些 API 是区域感知的，而有些则不是。一个令人讨厌的副作用是，某些代码可能*会*在恰好配置为一种语言环境的手机上正常工作，而在配置为不同语言环境的手机上可能会失败（甚至崩溃！）。

诀窍是要意识到这个问题，并熟悉哪些 API 是区域感知的，哪些不是区域感知的。

有问题的示例“Float.toString()”*不是*.

# javascript - 为什么 JavaScript 对象的这种扩展不起作用？

> ID：12752037
> 
> 赞同：0
> 
> 时间：2012-10-05T18:29:20.943
> 
> 标签：javascript, prototype

我对JavaScript中的对象和原型模式一定有一些误解，但我不明白为什么下面的代码不起作用：

```
Object.prototype.log = function() {
  console.log(this);
  return this;
}

var test = { 'foo' : 'bar'};
test.log(); 
```

为什么这会引发`object has no method 'log'`错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:33:28.773

尝试在 log 函数中记录一个值：

Object.prototype.log = function(){console.log(this.foo);};

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:37:08.523

这应该根据规范工作。我将您的代码按原样粘贴到 IE10 中，它工作正常。

# java - Java中parseFloat的正确方法是什么

> ID：12752038
> 
> 赞同：9
> 
> 时间：2012-10-05T18:29:25.803
> 
> 标签：java, floating-point, precision

我注意到 Java 浮点精度的一些问题

```
 Float.parseFloat("0.0065") - 0.001  // 0.0055000000134110451
       new Float("0.027") - 0.001          // 0.02600000000700354575
       Float.valueOf("0.074") - 0.001      // 0.07399999999999999999 
```

我不仅有问题，`Float`还有`Double`.

有人可以解释幕后发生的事情，我们如何才能获得准确的数字？在处理这些问题时，处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-05T18:33:40.117

问题很简单，`float`精度有限。它不能完全代表`0.0065`。（当然，同样如此`double`：它具有更高的精度，但仍然是有限的。）

使上述问题更加明显的另一个问题是，它`0.001`是 a`double`而不是 a `float`，因此您`float`将被提升为 a`double`来执行减法，当然此时系统无法恢复 a 丢失的精度`double` *本来*可以代表开始。为了解决这个问题，你会写：

```
float f = Float.parseFloat("0.0065") - 0.001f; 
```

使用`0.001f`而不是`0.001`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T18:32:38.670

看看[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。你的结果在我看来是正确的。

如果您不喜欢浮点数的工作方式，请尝试使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)之类的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T18:32:32.440

你得到了正确的结果。没有`float`确切的 0.027 这样的，也不存在这样的`double`. 如果您使用or ，您将*始终*收到这些错误。`float``double`

`float`并`double`存储为*二进制分数*：类似于 1/2 + 1/4 + 1/16... 您无法将所有十进制值完全存储为有限精度二进制分数。这在数学上是不可能的。

唯一的选择是使用`BigDecimal`，您可以使用它来获取精确的十进制值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-05T18:47:57.230

从[原始数据类型的 Java 教程页面](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)：

> 如果浮点字面量以字母`F`or结尾，则它的类型为浮点型`f`；否则它的类型是 double 并且可以选择以字母`D`或. 结尾`d`。

所以我认为你的文字（`0.001`）是双打的，你从浮点数中减去双打。

试试这个：

```
System.out.println((0.0065F - 0.001D)); // 0.005500000134110451
System.out.println((0.0065F - 0.001F)); // 0.0055 
```

...你会得到：

```
0.005500000134110451
0.0055 
```

所以`F`给你的文字添加后缀，你应该会得到更好的结果：

```
Float.parseFloat("0.0065") - 0.001F
new Float("0.027") - 0.001F
Float.valueOf("0.074") - 0.001F 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-05T18:54:02.860

我会将您的浮点数转换为字符串，然后使用 BigDecimal。

[这个](http://rayfd.me/2007/04/26/the-evil-bigdecimal-constructor/)链接解释得很好

```
new BigDecimal(String.valueOf(yourDoubleValue)); 
```

不要使用 BigDecimal 双构造函数，因为你仍然会得到错误

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T18:32:50.290

长话短说，如果您需要任意精度，请使用 BigDecimal 而不是 float 或 double。您将看到各种使用浮点数的这种性质的舍入问题。

顺便说一句，不要使用 BigDecimal 的 float/double 构造函数，因为它会有同样的问题。请改用 String 构造函数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-05T18:33:52.147

浮点数不能准确表示十进制数。如果您需要在 Java 中准确表示数字，则应使用 java.math.BigDecimal 类：

```
BigDecimal d = new BigDecimal("0.0065"); 
```

# android - __android_log_write() 的输出未显示在 logcat 中

> ID：12752043
> 
> 赞同：4
> 
> 时间：2012-10-05T18:29:51.560
> 
> 标签：android, java-native-interface

我正在为 Android 开发一些本机 c 代码，并尝试使用此代码进行输出：

```
__android_log_write(ANDROID_LOG_INFO, "Native", "TEST LOG"); 
```

Eclipse 中的 logcat 和命令行都无法显示消息，同时显示从 java 层调用 Log.d() 的输出。我已经用 objdump 验证了 __android_log_write() 在我的 .so 文件的符号表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:42:49.630

它应该是

```
__android_log_print(ANDROID_LOG_INFO, "Native", "TEST LOG"); 
```

`_print`代替`_write`

不要忘记`include <android/log.h>`

# arrays - Perl如何检查数组是否仍然为空？

> ID：12752045
> 
> 赞同：41
> 
> 时间：2012-10-05T18:29:59.607
> 
> 标签：arrays, perl

希望这应该很简单。我初始化一个空数组，执行 grep 并将结果（如果有）放入其中，然后检查它是否为空。像这样：

```
my @match = ();
@match = grep /$pattern/, @someOtherArray;
if (#match is empty#) {
    #do something!
} 
```

这样做的标准方法是什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-05T18:32:00.733

您将看到所有这些用于测试数组是否为空的习语。

```
if (!@match)
if (@match == 0)
if (scalar @match == 0) 
```

在标量上下文中，数组被评估为其包含的元素数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-24T16:34:09.460

如果您使用的是 arrayref 而不是数组，例如

```
my $existing_match = data_layer->find('Sale',{id => $id}); 
```

说上面返回一个数组，然后使用：

```
if( scalar(@$existing_match) == 0) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2021-12-16T16:03:36.380

我也发现这也有效，但我不确定它是否记录在案：

```
if ($#match == -1) 
```

# vb.net - 无法从 IE 中的 ActiveX 对象听到 Windows 消息

> ID：12752048
> 
> 赞同：1
> 
> 时间：2012-10-05T18:30:08.683
> 
> 标签：vb.net, internet-explorer, com, activex

经过一番研究，我终于让我的 ActiveX 对象工作了，现在我想在有人修改混音器控件中的值时收听 Windows 消息（消息编号 = 977）

问题是，如果我让我的类继承自 Form 类，它会停止在 IE 中工作，据我所知，听到 Windows 消息的唯一方法是通过 Form。

我有将方法和事件添加到我的 ICOMEvents 和 ICOMMethods 接口的模糊想法，尽管我想知道是否有更好的方法来做到这一点，或者它是否不可能。

我的班级样本，如果它没有从 Form 继承，一切正常！

```
{Guid("ECA5DD1D-096E-440c-BA6A-0118D3516AAA")} _
{ClassInterface(ClassInterfaceType.None)} _
{ComDefaultInterface(GetType(ICOMMethods))} _
{ComSourceInterfaces(GetType(ICOMEvents))} _
Public Class Class1
'When inherited, can not call any method in IE
Inherits System.Windows.Forms.Form 
Implements ICOMMethods 
```

注意：我无法制作 Windows 窗体控件并使其与 ActiveX 兼容，我需要成为一个类库。

另一种方式：我也在考虑添加一个计时器并每隔 X 秒检查一次音量……不是很整洁，但会不那么痛苦，因为我已经有了所有必要的方法来检查音量（XP、Vista 和 7）。对这种或另一种方法的任何评论都可能非常有用！

Way2：创建一个隐藏的窗口窗体？？（做了一些测试，不工作）

# captcha - 将验证码生成器从 PHP4 转换为 PHP5

> ID：12752049
> 
> 赞同：0
> 
> 时间：2012-10-05T18:30:10.383
> 
> 标签：captcha, php4, php-5.2

我有一个用 PHP4 编写的旧图像验证码生成器，我需要将其转换为 PHP5 对于我需要更改哪些内容以使其开始工作有什么建议吗？我收到的主要错误是“资源解释为图像，但使用 MIME 类型文本/html 传输”当我说**header('Content-type: image/ JPEG'）；**

```
<?php
extract($HTTP_GET_VARS);
extract($HTTP_POST_VARS);

session_start(); 

$alphanum  = "ABGKLMNPRSTUXZ"; 
$rand = substr(str_shuffle($alphanum), 0, 5); 
$image = imagecreatetruecolor(65,25);
$background = imagecolorallocate($image, 255, 255, 255);
$border = imagecolorallocate($image, 128, 128, 128);
$colors[] = imagecolorallocate($image, 128, 64, 192);
$colors[] = imagecolorallocate($image, 192, 64, 128);
$colors[] = imagecolorallocate($image, 108, 192, 64);

imagefilledrectangle($image, 1, 1, 65 - 2, 25 - 2, $background);
imagerectangle($image, 0, 0, 65 - 1, 25 - 1, $border);

for ($i = 0; $i < 5; $i++){
    $x1 = rand(0, 65 - 5);
    $y1 = rand(0, 25 - 5);
    $x2 = $x1 - 4 + rand(2, 8);
    $y2 = $y1 - 4 + rand(2, 8);
    imageline($image, $x1, $y1, $x2, $y2,$colors[rand(0, count($colors) - 1)]);
}

$textColor = imagecolorallocate ($image, 30, 30, 30); 

imagestring ($image, 8, rand(8,10), rand(1,8),  $rand, $textColor); 

$_SESSION['image_random_value'] = md5($rand); 

header("Expires: Mon, 26 Jul 1998 06:00:00 GMT");  
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");  
header("Cache-Control: no-store, no-cache, must-revalidate");  
header("Cache-Control: post-check=0, pre-check=0", false);  
header("Pragma: no-cache");
header('Content-type: image/jpeg');

imagejpeg($image); 
imagedestroy($image); 
?> 
```

如果它有帮助的话，这张图片会加载到这里的页面中：

```
 function textCounter(field, countfield, maxlimit) {
    if (field.value.length > maxlimit)
    field.value = field.value.substring(0, maxlimit);
    else
    countfield.value = maxlimit - field.value.length;
    }
    function form_visible(){
    var el = document.getElementById('sf');
    if(el.style.display == 'inline'){
    el.style.display = 'none';
    }else{
    el.style.display = 'inline';
    }
    }
    var shows = 0;
    var lc;
    var i;
    var image;
    var ny;
    function show(star_img,rnid) 
    {
    if (shows){
    if(rnid==lc){
    return;
    }
    }

    for (i=1; i");
    for (var i=1; i");
    }
    document.write("Please Select");
    }

     $value) {
    ${$key} = $value;
    } 
    foreach($_POST AS $key => $value) {
    ${$key} = $value;
    } 

    $db=mysql_connect($db_host,$database_user,$database_pass) or die("**MySQL Error:** Unable to connect to database please check that you have provided the correct *   Database Login username*   Database Login Password");
        mysql_select_db($db_name,$db)or die("**MySQL Error:** Unable to select database please check that you have provided the correct 
```

*   `Database name"); echo "

    "; $day =date("D d"); $month =date("M"); $year =date("Y"); $dt="$year-$month-$day"; $ent=mysql_query("SELECT * FROM ez_ccomment_opt"); $rowi=@mysql_fetch_array($ent); if($do=="do_sign" && $id=="$mid"){ if ($comment !="" && $email !="" && $name !="" && $rating!=""){ if(md5($_POST['security']) == $_SESSION['image_random_value']){ $comment = str_replace ("",">", $comment); $name = str_replace ("",">", $name); $email = str_replace ("",">", $email); $website = str_replace ("", $comment); $comment = str_replace ("

    ", "
    ", $comment); $name = stripslashes ($name); $comment = stripslashes ($comment); $lis="0"; if($rowi[filter]=="y"){ $user=file("badwords.txt"); for($x=0;$xPlease enter valid security image."; } }else{ $w="1"; echo "Please fill in the required fields.";} } ob_start(); echo ""; echo "Rating*"; ?> showform(1); "; echo "Comments* Name* Email* (Will not be shown) Security Image*make sure to type security image in ALL CAPITAL characters!
    * = Required

    "; echo ""; ob_end_flush(); if($w=="1"){ ?> var el = document.getElementById('sf'); el.style.display = 'inline'; "; $list = ("SELECT * FROM ez_ccomment WHERE status='confirmed' AND ccid='$id' ORDER BY op DESC"); $row_num1= @mysql_num_rows(mysql_query($list)); $list_per_page=$rowi['limit_pp']; if($row_num1>0){ echo "**Comments**"; }else{ echo "**No ratings yet. Be the first to add a rating!**"; } if($start==""){ $start=1; } if($start==""||$start==1){ $sfrom=0; }else{ $sfrom=(($start-1)*$list_per_page); } $end=$list_per_page; $gr=0; $list.= (" LIMIT $sfrom,$end"); $blist=(mysql_query($list)); while($row=@mysql_fetch_array($blist)){ if(substr_count($row[email],"@")==1){ $name="$row[name]"; }else{ $name="$row[name]"; } $messag=$row[message]; $messag=wordwrap($messag, 55, "\n", 1); $row[rating]=round($row[rating],2); if ($row[rating] == 5) { $star = "images/5star.gif" ; $pk="5 - Excellent!"; } if ($row[rating]>=1 && $row[rating]=2 && $row[rating]=3 && $row[rating]= 4 && $row[rating]= 5) { $star = "images/5star.gif" ; $pk="5 - Excellent!"; } if ($row[rating] $messag*$row[name], $row[date]*"; $gr+=1; } $list_per_page=$rowi['limit_pp']; echo ""; if($start==""){ $start=1; } if($start==""||$start==1){ $sfrom=0; }else{ $sfrom=(($start-1)*$list_per_page); } $end=$list_per_page; if ($row_num1>$list_per_page){ $no_of_page=$row_num1/$list_per_page; $no_page=explode(".",$no_of_page); if($no_page[1]>0){ $no_of_page+=1; } echo ""; echo ""; if($start > 1){ $s=$start-1; echo "Previous"; } echo ""; $last=round($no_of_page,0); for($i=1;$i$i "; }else{ echo " **$i** "; } }else{ if($i>$start+3){ if($once==""){ echo " ....... $last"; } $once="yes"; }elseif($i0){ echo "1 ....... "; } $tonce="yes"; }else{ if($i!=$start){ echo " $i "; }else{ echo " **$i** "; } } } } echo ""; if($start Next"; }elseif($start>=$i){ $next = ""; } echo "$next"; } echo ""; ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:19:36.957

在该代码中，只需将 $HTTP_GET_VARS 更改为 $_GET 并将 $HTTP_POST_VARS 更改为 $_POST

```
extract($_GET);
extract($_POST); 
```

我试过了，它有效。

# mysql - Mysql 选择更新锁最长持续时间

> ID：12752051
> 
> 赞同：1
> 
> 时间：2012-10-05T18:30:17.093
> 
> 标签：mysql, locking

是否设置了我们可以持有此锁的最长时间？

还是永远直到当前事务终止或提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:42:29.463

如果您使用 InnoDB，该`innodb_lock_wait_timeout`变量定义了锁在超时之前将等待多长时间。

该`table_lock_wait_timeout`设置记录为“未使用”。

# c# - 如何检测功能区上切换按钮的状态？

> ID：12752052
> 
> 赞同：4
> 
> 时间：2012-10-05T18:30:18.137
> 
> 标签：c#, vsto, ribbon, togglebutton

我在功能区中添加了一个切换按钮，现在我想将其状态发送到另一个对象。代码如下。

```
public void Butt_Click(Office.IRibbonControl control)
{
  something.SendButtVal(control.State);
} 
```

当然，`control.State`行不通。我怀疑我需要强制`control`转换为类型`ToggleButton`或类似的东西，但智能感知没有给我任何东西......

我可以看到接口的 API 在`IRibbonControl`这里[，](http://msdn.microsoft.com/en-us/library/office/microsoft.office.core.iribboncontrol_members.aspx)但我想查看实现类的列表，就像在 JavaDocs 中一样。我如何到达那里？

编辑

请注意，我问的是功能区组件。请参阅方法签名。它是功能区上的切换按钮。问题是我没有获得`Checked`财产并且（可能）需要转换`control`为正确的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:48:54.243

您需要更改您的签名。切换按钮不正确。有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/office/aa433867%28v=office.12%29.aspx)。

```
public void ToggleButtonOnAction(IRibbonControl control, bool pressed)
{
  MessageBox.Show("ToggleButton was switched " + pressed ? "on" : "off");
} 
```

# xcode - 将应用程序设置为 iphone4 及更高版本，以及 ios6

> ID：12752060
> 
> 赞同：-1
> 
> 时间：2012-10-05T18:30:49.257
> 
> 标签：xcode

我有 3 个问题我找不到答案。

1.  我如何将我的应用程序设置为仅适用于 iPhones-4 及更高版本？
2.  如何在我的 xcode ios6 中安装以检查我的应用程序？
3.  如果我的应用程序仅适用于 iphone4 及更高版本，我是否需要 57x57 的图标？

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:48:25.110

广告 1\. 这是不可能的，即使您在代码中检测到 iPhone 型号，也有人可以在旧 iPhone 上购买您的应用程序（如果您为 iOS 6 构建应用程序，则为 3GS）。您应该支持给定 iOS 版本上可用的所有设备。

广告 2\. 从 Mac AppStore 安装最新的 XCode (4.5.1)

广告 3。是的，你知道。

# delphi - 是否有更好地过滤 Delphi 2006 组件调色板项目的插件？

> ID：12752061
> 
> 赞同：0
> 
> 时间：2012-10-05T18:31:10.990
> 
> 标签：delphi, plugins, delphi-2006

我的 Delphi 2006 安装中有数百个组件，但我总是很难找到以前没有使用过的组件，而这可能是我目前需要的解决方案。我有许多未记录的包，但是通过组件的名称，您可以了解它的作用。

例如：

我需要一个 RadioButton，所以我有`TRadioButton`，`TElRadioButton`或者`TAdvRadioButton`选择哪个具有我需要的自定义属性。

但是当我单击工具面板的过滤器按钮时，我必须从组件名称的开头键入。如果我有一个字段编辑器，我只能输入名称的一部分，并且调色板向我显示名称中间也有该术语的组件，我会过得很开心！！！

**有谁知道德尔福2006如何？**

![在此处输入图像描述](../Images/86abec3743618b3e6b428f3692924c1d.png)

*我知道 Delphi XE2 有这个过滤器字段。*

![在此处输入图像描述](../Images/6b7d9e28da0e5be4461c75c99edfe6ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:32:52.353

DDevExtensions IDE 扩展 (http://andy.jgknet.de/blog/ide-tools/ddevextensions/) 有一个组件选择器，可以满足您的需要

（也使用 D2006，所以它肯定有效）

# character-encoding - é 是标签吗？什么编码错误可能导致这种情况？

> ID：12752062
> 
> 赞同：1
> 
> 时间：2012-10-05T18:31:14.020
> 
> 标签：character-encoding

这似乎只发生在 Chrome 中，但是当使用 AJAX 发送包含 JSON 编码的字符串`é`（它本身是通过输入 输入`Alt+0233`）时，它以某种方式最终成为数据库中的一个选项卡（字符 9）并“使用”以下内容特点。

我对显示 é 而不是 é 并不陌生，因为那是 UTF8 编码的“版本”被视为 iso-8559-1，但是什么可能导致`0b11101001`变成`0b00001001`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:51:20.140

虽然我还没有找到编码错误的原因，但我已经通过检查发送数据的字符编码并在必要时重新编码来解决这个问题。

# java - Eclipse 在调试模式下启动时显示无法连接到 VM 错误

> ID：12752064
> 
> 赞同：11
> 
> 时间：2012-10-05T18:31:25.203
> 
> 标签：java

当我在调试模式下打开任何程序时，Eclipse 显示无法连接到 VM 错误。这是异常堆栈

```
 java.net.SocketException: socket closed
    at java.net.PlainSocketImpl.socketAccept(Native Method)  //I dont know which socket is closed in my PC
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)
    at java.net.ServerSocket.implAccept(ServerSocket.java:453)
    at java.net.ServerSocket.accept(ServerSocket.java:421)
    at org.eclipse.jdi.internal.connect.SocketTransportService.accept(SocketTransportService.java:95)
    at org.eclipse.jdi.internal.connect.SocketTransportImpl.accept(SocketTransportImpl.java:56)
    at org.eclipse.jdi.internal.connect.SocketListeningConnectorImpl.accept(SocketListeningConnectorImpl.java:135)
    at org.eclipse.jdt.internal.launching.StandardVMDebugger$ConnectRunnable.run(StandardVMDebugger.java:107)
    at java.lang.Thread.run(Thread.java:619) 
```

即使我的本地主机工作正常，我 ping 127.0.01 和本地主机都工作正常，即使我重新启动我的电脑，甚至得到同样的错误。不知道我的 PC 中关闭了哪个套接字。请帮助我..我正在使用 eclipse 8.x

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T10:37:57.177

这是因为您的机器中的 localhost 设置。在 /etc 文件夹中的 hosts 文件中检查您的 ip 与 localhost

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-09T09:47:52.163

添加`127.0.0.1 localhost`到 /etc/hosts，在我的 mac 上解决了同样的问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-01T14:38:08.607

将以下内容添加到`eclipse.ini`文件中可以解决此问题：

```
-vm
C:\Program Files\Java\jdk1.7.0_71\jre\bin\javaw.exe (path of javaw.exe ) 
```

确保路径`javaw.exe`应该写在下一行`-vm`。

这是我的`eclipse.ini`文件：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20140116-2212
-product
org.eclipse.epp.package.standard.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
--launcher.appendVmargs
-vm
C:\Program Files\Java\jdk1.7.0_71\jre\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx512m 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-21T10:04:01.797

如果您是 MAC 用户，请使用以下步骤

```
sudo -su root
vi /etc/hosts
---> now insert following line and save the file opened in vi editor
127.0.0.1 localhost 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-24T09:36:05.947

解决方案之一是创建项目后，“单击下一步”，[在此处输入图像描述](https://i.stack.imgur.com/uw5tQ.jpg)“未完成”

取消选中“创建 module-info.java 文件”框

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-08T04:02:30.577

我使用 Springsource 的 eclipse 版本遇到了这个问题。我的问题是我的调试配置被定义为使用 Javascript 调试器，而我正在尝试调试 Java 程序。

解决方案：转到“Debug As”->“Debug Configurations”，然后在该窗口的某处（在我的情况下为 SpringSource 3.1 的末尾）将 Eclipse JDT Launcher 设置为调试器选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-24T09:50:41.440

基本解决方案之一是

当您创建新项目时，取消选中“创建 module-info.java 文件”框

（单击下一步下一步完成）[在此处输入图像描述](https://i.stack.imgur.com/rGyVc.jpg)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-21T20:33:16.377

解决问题的最简单方法：

1.  选择“调试配置” [![在此处输入图像描述](../Images/020aa7bb7fd44d305ab71ee456e190a6.png)](https://i.stack.imgur.com/0R7T5.png)
2.  选择“参数”-选项卡 [![在此处输入图像描述](../Images/2ab984c4e44b0bbe629f057a2ea4d414.png)](https://i.stack.imgur.com/mVnjm.png)
3.  删除参数“--add-modules=ALL-SYSTEM” [![在此处输入图像描述](../Images/56830c129cdf0b3f882fa6b73f76d233.png)](https://i.stack.imgur.com/RQVxr.png)
4.  然后“应用”和“调试”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-14T16:54:40.440

我在 Windows 10 机器上的情况是为项目选择了错误的 JRE，导致错误。

最初仅列出了安装在用户主目录中的默认 JRE（在 Eclipse - Window->Preferences->Java->JRE 中）。 [我添加了另外两个 JRE。](https://i.stack.imgur.com/2rThQ.png)

接下来我进入项目，选择我想调试的包，进入“调试配置”并选择一个新添加的 JRE [（在我的例子中是 Java15）。](https://i.stack.imgur.com/Pb1dt.png)

之后调试开始工作得很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-03T21:47:49.807

右键单击您的项目名称，然后选择 Build Path->Configure Build Path。单击库选项卡并检查您的库（尤其是 Tomcat 库）是否在“模块路径”而不是“类路径”下。就我而言，我的项目需要 Tomcat 库。当我将 Tomcat 库放在“类路径”下时，它不起作用。当我将库移动到“Modulepath”时，它可以工作。[1](https://i.stack.imgur.com/w3PIZ.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-13T04:52:24.823

删除我的`module-info.java`文件为我解决了这个问题。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-10-05T18:38:48.633

您需要在启用调试端口的情况下启动服务器，并使用同一端口将调试器与服务器连接。

对于“Tomcat”服务器，您可以添加以下内容以调试模式启动它，调试端口为`8453`.

```
 -Xdebug -Xrunjdwp:transport=dt_socket,address=8453,server=y,suspend=n 
```

# node.js - 产生的phantomjs进程挂起

> ID：12752065
> 
> 赞同：4
> 
> 时间：2012-10-05T18:31:27.577
> 
> 标签：node.js, phantomjs

我正在尝试创建一个节点服务器来生成 phantomjs 进程以创建屏幕截图。Grab.js 脚本在执行时工作正常，我已经确认它写入标准输出。问题是产生进程的节点代码只是挂起。我已经确认 phantomjs 在路径中。任何人都知道这里可能发生了什么或我如何解决这个问题？

这是渲染页面并将数据写入标准输出的 phantomjs 代码 (grab.js)：

```
var page = require('webpage').create(),
  system = require('system'),
  fs = require('fs');

var url = system.args[1] || 'google.com';

page.viewportSize = {
  width: 1024,
  height: 1200
};

page.open(url, function() {
  var b64 = page.renderBase64('png');
  fs.write('/dev/stdout', b64, 'w');
  phantom.exit();
}); 
```

这是产生幻影进度并打印结果（挂起）的节点代码：

```
var http = require('http'),
  exec = require('child_process').exec,
  fs = require('fs');

exec('phantomjs grab.js google.com', function(error, stdout, stderr) {
  console.log(error, stdout, stderr);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:03:51.603

我在 exec 上遇到过类似的问题，然后改用 spawn 并且它起作用了。根据这篇[文章](http://www.hacksparrow.com/difference-between-spawn-and-exec-of-node-js-child_process.html)，*当您希望子进程向 Node 返回巨大的二进制数据时使用 spawn，当您希望子进程返回简单的状态消息时使用 exec。* hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-11T06:47:28.360

我有同样的问题，就我而言，它不在nodejs中，而是在phantomjs（v2.1）中。

当 phantom 的 open 方法挂起时[，这是一个已知问题。](https://github.com/ariya/phantomjs/issues/14529)

此外，找到[第二个链接](http://qaru.site/questions/12473815/how-to-exit-phantom-if-it-hangs-on-pageopen-with-example)（我猜是同一个人写的），其中作者指出 requestAnimationFrame 不适用于 tweenJs，这会导致冻结。PhantomJS 返回 unixtimestamp 但 tweenjs 期望它是 DOMHighResTimeStamp，等等......

技巧是注入 request-animation-frame.js （该文章中也提供了）

# c# - .NET 中的路由困难（非 MVC）

> ID：12752067
> 
> 赞同：0
> 
> 时间：2012-10-05T18:31:34.270
> 
> 标签：c#, asp.net, routing

我的路由行为有问题。而且我无法弄清楚问题是我的编程问题还是托管问题。

我在 global.asax.cs 中的 Application_Start 方法上注册了这条路线

```
routes.MapPageRoute("redir", "{pagename}", "~/routehandler.aspx"); 
```

它是最简单的路线，应该允许我路由简单的请求，例如

```
www.mypage.com/pagename 
```

问题是，虽然这在我的开发环境中完美运行，但当我将它上传到我的主机时，它会随时崩溃。它会在一段时间内工作得很好，然后，每天有几个小时，它就不会工作了。我尝试重新启动网站，编写一堆代码强制路由在每个请求上注册，一切。然而，每天有一段时间，使用这条路线只会显示一个 404 页面。

我没有可用的 URL 重写模块。

所以，我的问题是，是我的托管服务搞砸了我还是我只是写了错误的代码？

谢谢！

# html - iOS - UIWebView 不显示 HTML

> ID：12752068
> 
> 赞同：0
> 
> 时间：2012-10-05T18:31:36.097
> 
> 标签：html, ios, ios5, uiviewcontroller, uiwebview

我有一个 UIViewController 里面我放了一个 UIWebView

然后我将它添加到 .h 文件中：

```
#import <UIKit/UIKit.h>

@interface BuildBusinessController : UIViewController
@property (weak, nonatomic) IBOutlet UIWebView *theWebView;

@end 
```

并将其作为 .m 文件

```
#import "BuildBusinessController.h"

@interface BuildBusinessController ()

@end

@implementation BuildBusinessController
@synthesize theWebView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    theWebView.delegate = self;
}

- (void)viewDidUnload
{
    [self setTheWebView:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)viewDidAppear:(BOOL)animated
{  
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"build_business" ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:htmlFile];
    NSURLRequest *rq = [NSURLRequest requestWithURL:url];
    [theWebView loadRequest:rq];
}

@end 
```

但是 build_business.html 文件没有在视图内呈现，而且我在这一行收到警告：theWebView.delegate = self; 其中说：

从不兼容的类型 BuildBusinessController *const_string 分配给 id 'UIWebViewDelegate

有人知道我在这里做错了什么吗？感觉我忘记了一件小事:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:35:26.140

你只是忘记`UIWebViewDelegate`了你的类定义：

```
#import <UIKit/UIKit.h>

@interface BuildBusinessController : UIViewController <UIWebViewDelegate>
@property (weak, nonatomic) IBOutlet UIWebView *theWebView;

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:53:35.883

除了 FX 答案，我想你忘了在 viewDidAppear 中添加这个（在 loadRequest 之后）：

```
[self.view addSubview:theWebView]; 
```

**更新**：该问题是由 OP 未能在 Storyboard 中为 UIWebView 配置委托引起的。此处提供的代码片段仅在您手动编码时才有效。否则，正如@FX 在下面的评论中所述，Storyboard 将自动实现这一点。

# java - 补充地图

> ID：12752093
> 
> 赞同：3
> 
> 时间：2012-10-05T18:33:44.033
> 
> 标签：java, memory, map

我们有两个互补地图的代码，如下所示：

```
private final Map<Integer, String> idToName = new HashMap<Integer, String>();
private final Map<String, Integer> nameToID = new TreeMap<String, Integer>(); 
```

每当我们将某些东西放入其中时，我们也会像这样放入另一个（键和值颠倒）：

```
nameToID.put(name, id);
idToName.put(id, name); 
```

我们遇到了这个应用程序的内存问题。这里似乎有很多重复。有没有办法提高内存效率？我们可以使用一些单一的结构？我意识到这可能是以时间效率为代价的，所以我对权衡取舍很感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:35:19.803

这正是[Guava](https://code.google.com/p/guava-libraries/) [`BiMap`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap)所做的，尽管您只能获得如此多的额外内存效率。最大的优势`BiMap`不是内存效率，而是“它负责确保值是唯一的，并且你不能忘记更新逆映射”。

```
BiMap<Integer, String> idToName = HashBiMap.create();
idToName.put(1, "foo");
idToName.inverse(); // returns a BiMap mapping "foo" to 1
idToName.inverse().put("bar", 2); // idToName now has an extra mapping 2 -> "bar" 
```

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:37:55.170

您可以考虑使用 Google Guava 中的 BiMap 类（docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html），但我不知道它会占用更多内存高效的。

```
private final Map<Integer, String> idToName = new BiMap<Integer, String>();
private final Map<String, Integer> nameToID = idToName.inverse(); 
```

您只需添加到`idToName`地图中：

```
idToName.put(name, id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:38:28.150

您也可以使用 apache commons [**BidiMap**。](http://commons.apache.org/collections/api-release/org/apache/commons/collections/BidiMap.html)

BidiMap 公开了一个方法，该方法`inverseBidiMap()`获取此映射的视图，其中键和值被反转。

希望有帮助！

# python - PyGTK 单选按钮都被选中

> ID：12752098
> 
> 赞同：1
> 
> 时间：2012-10-05T18:34:08.603
> 
> 标签：python, gtk, pygtk, gedit

我正在尝试使用 PyGTK 创建一个窗口，该窗口基于字符串数组动态创建单选按钮（一个看起来像 ["option 1", "option 2", "option 3"] 的数组将创建 3 个单选按钮带有对应于数组元素的标签）。

我的问题是所有单选按钮都被选中，它们不能被取消选中，因此我无法连接到“切换”事件。我看不出我做错了什么。

```
class SelectionWindow(Gtk.Window):

    def __init__(self):
        global options
        super(EmulatorSelectionWindow, self).__init__()
        self.set_title("Select an Emulator")
        box = Gtk.VBox(spacing=10)
        group = Gtk.RadioButton(None, "test radio")
        box.pack_start(group, True,True, 0)
        for option in options:
            r = Gtk.RadioButton(group, option)
            r.connect("toggled", self.on_radio_selection, option)
            print "before setting active", r.get_active()
            r.set_active(False)
            print "after setting active", r.get_active()
            box.pack_start(r,True, True, 0)
        self.add(box)

    def on_radio_selection(self, widget, data=None):
        print "toggle pressed", data 
```

调用 get_active() 的打印语句总是打印 True

[编辑] 我正在加载 Gtk

```
from gi.repository import Gtk 
```

![这是我的窗户](../Images/aa73a21357300a6768f5e0fb169072d5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:15:41.387

似乎在较新的版本中，您使用了静态方法[Gtk.RadioButton.new_with_label_from_widget](http://python-gtk-3-tutorial.readthedocs.org/en/latest/button_widgets.html#Gtk.RadioButton.new_with_label_from_widget)而不是您当前用于创建单选按钮的方法（适用于 pygtk 2.0 版本）。尝试在代码中更改`Gtk.RadioButton`为。 希望这可以帮助！`Gtk.RadioButton.new_with_label_from_widget`

# jquery-ui - 检查是否可见每次都返回 false

> ID：12752099
> 
> 赞同：2
> 
> 时间：2012-10-05T18:34:10.157
> 
> 标签：jquery-ui, hide, jquery-ui-accordion, visible

我在确定特定 dom 对象是否可见时遇到问题。我将以下代码输出到控制台，即使我可以在屏幕上看到该元素，它也总是返回 false。

```
console.log(itemElement.innerText +" is visible: " + $(itemElement.id).is(':visible')); 
```

我正在测试的上下文是查看 jQuery Accordion 对象中的列表项是否可见。我正在遍历所有列表元素（包括子列表元素）并执行此检查。始终检查返回 false。我到处搜索答案，但找不到答案。

这是显示布局外观的 html。我已经对其进行了一些编辑以使其合理，但您应该对它的设置方式有一个很好的了解。

```
<div id="collection_form">
  <div id="element_container">
    <ul class="element_list element_group ui-sortable">
       <li id="de_1" class="element_group_parent eg-collapsed element_group_leaf">
          stuff in here is same as below
       </li>
       <li id="de_29" class="element_group_parent eg-collapsed element_group_leaf">
         <div>
           <span>Room Booking</span>
           <span class="element_type"> - Group</span>
           <span class="remove_element">remove</span>
           <div style="clear:both"></div>
         </div>
         <ul class="element_group">
           <li id="de_30" class="element_config_form element_group_leaf">
              <div>
                <span>Room Number</span>
                <span class="element_type"> - Text</span>
                <span class="remove_element">remove</span>
                <div style="clear:both"></div>
              </div>
           </li>
         </ul>
      </li>
      <li id="de_31" class="element_group_parent eg-collapsed element_group_leaf">
        <div></div>
        <ul class="element_group">
          <li id="de_32" class="element_config_form element_group_leaf">
              <div> more stuff </div>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</div> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:50:15.090

试试这个 ：

```
 $(itemElement).is(':visible');  // this works if itemElement is a DOM element, or even if itemElement is a jQuery wrapped DOM elemenent 
```

我怀疑你`itemElement.id`是`undefined`

但是如果 itemElement.id 被正确定义（作为你的 itemElement 的 id，在这种情况下意味着 itemElement 是一个 DOM 元素）你可以做到这两个：

```
$("#"+itemElement.id).is(':visible'); 
```

甚至更好：

```
$(itemElement).is(':visible'); 
```

# git - 为什么 Git 会生成随机 SHA？

> ID：12752107
> 
> 赞同：1
> 
> 时间：2012-10-05T18:35:07.293
> 
> 标签：git, version-control, sha

如果 SHA 是由提交中的数据生成的，那么 Git 会知道两个提交何时相同。

这将解决重新设置和生成实际上相同的提交时的问题，但 Git 认为它们是不同的，因为它们具有不同的 SHA。

这个逻辑是正确的还是我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T18:44:24.817

提交的 SHA 包括父 SHA 提交。这就是为什么即使提交本身没有改变，它在变基时也会改变 - 它是父级的变化（因为变基的全部意义）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T18:44:35.163

如果它们真的是相同的提交，它们将具有相同的随机 SHA。

假设您断言使用随机 SHA 是正确的......如果提交在差异方面是相同的，那么它们仍然是不同的，因为时间、制作它们的人以及应用差异的先前提交。等等

# sql - 如何在 sql 中使联接表更新有效（从我的 ruby 代码中可以有效！！）

> ID：12752109
> 
> 赞同：1
> 
> 时间：2012-10-05T18:35:23.213
> 
> 标签：sql, postgresql, sql-execution-plan

这是我无法理解的奇怪事情，我正在使用 PostGreSql9.2 ...

我有这个数据库：

```
movies (id, title, votes)
infos (id, movie_id, info_type, value) 
```

我想用 infos.value 更新 movies.votes，加入 movies.id = infos.movi​​e_if 并且只有 info_type = 100 （这是投票的类型..）

我尝试了 2 个不同的查询：

```
update movies
set votes = cast(i.value as integer)
from movies m inner join infos i on m.id = i.movie_id
where i.info_type = 100 
```

其中（使用解释）预测运行时间约为 1100 万秒（太多了！）

第二次尝试：

```
update movies m
set votes = cast(
(
  select value
  from infos i
  where i.info_type = 100 and i.movie_id = m.id
  limit 1
) AS integer); 
```

这应该是“只有”2万秒..还是太多了

我真的不知道查询计划是如何工作的，所以我尝试使用 ruby​​ 脚本（使用 active_record）来做到这一点......这是：

```
Info.find_in_batches(:conditions => "info_type = 100") do |group|
    group.each{ |info|
        movie = Movie.find(info.movie_id)
        movie.votes = info.value.to_i
        movie.save
    }
end 
```

对于那些不读 ruby​​ 的人来说，这个查询只是遍历所有满足 info_type = 100 条件的信息，然后为每个它搜索相应的电影并更新它。

而且速度非常快！只需几分钟，还有所有的 ruby​​/orm 开销！！

现在，为什么？知道电影大约有 60 万条记录，但只有 20 万条（三分之一）有带有票数的信息记录。这仍然不能解释正在发生的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:06:55.420

### `EXPLAIN`

正如@ruakh 已经解释的那样，您可能误解了`EXPLAIN`告诉您的内容。如果您想要以秒为单位的实际时间，请使用`EXPLAIN ANALYZE`.

但请注意，这实际上执行了语句。[我在这里](http://www.postgresql.org/docs/current/interactive/sql-explain.html)引用手册：

> `ANALYZE` 重要提示：请记住，当使用该选项时，该语句实际上会被执行。尽管 EXPLAIN 将丢弃 SELECT 将返回的任何输出，但该语句的其他副作用将照常发生。如果您希望`EXPLAIN ANALYZE`在`INSERT`, `UPDATE`, `DELETE`, `CREATE` `TABLE AS`, or`EXECUTE`语句上使用而不让命令影响您的数据，请使用以下方法：
> 
> ```
> BEGIN;
> EXPLAIN ANALYZE ...;
> ROLLBACK; 
> ```

尽管如此，第一次查询的估计值仍然很高，表明存在严重问题。

### 怎么了？

至于您的**第三种方法**：对于大表，让数据库服务器一次更新整个（大）表**总是**比为每一行向服务器发送指令快一个数量级 - 如果新的值来自数据库内部。更多在[这个相关的答案](https://stackoverflow.com/a/7518619/939860)中。如果您的测试结果并非如此，那么您的（测试）设置可能有问题。而事实上，它是...

您的**第一个查询***完全出错*了。糟糕的性能估计表明它是多么的错误。当您在子句中将表连接`movies`到表时，您忘记了将结果行绑定到表中的行的条件。这导致 a ，即(600k) 中的**每一**行都会随着 (200k) 中的**每**一次投票而更新，从而导致**120 000 000 000 次更新**。好吃。而且都错了。永远不要执行这个。甚至在可以回滚的事务中也不行。`infos``FROM``WHERE``UPDATE``CROSS JOIN`**`movies`**`values`****

 ******您的**第二个查询**也出错*了*。它运行一个*相关子查询*，即它为每一行运行一个单独的查询。那是 60 万个子查询，而不仅仅是 1 个，因此性能很差。

这是正确的 600k 子查询。不是200k。你指示 Postgres 更新**每**部电影，无论如何。那些没有匹配`infos.value`(no `info_type = 100`) 的人会在 中收到一个`NULL`值`votes`，并覆盖之前的任何内容。

另外，我想知道那`LIMIT 1`在做什么？

*   要么`(infos.movie_id, infos.info_type)`是`UNIQUE`，那你就不需要`LIMIT`。
*   或者不是`UNIQUE`。如果您打算保留该结构，请添加`UNIQUE index`to 。`infos`

### 正确查询

```
UPDATE movies m
SET    votes = i.value::int
FROM   infos i
WHERE  m.id = i.movie_id
AND    i.info_type = 100
AND    m.votes IS DISTINCT FROM i.value::int; 
```

这很像您的第一个查询，只是简化并正确执行，加上增强。

*   无需`movies`第二次加入。你只需要`infos`在`FROM`子句中。

*   实际上将要更新的行绑定到携带新值的行，从而避免（意外）`CROSS JOIN`：

    ```
    WHERE  m.id = i.movie_id 
    ```

*   避免空更新，它们会付出代价而没有收获。这就是最后一行的用途。

应该是几秒钟或更短的时间，而不是几百万秒。
顺便说一句，*索引*对这个查询没有帮助，表扫描对于所描述的数据分布来说更快，因为您使用了所有（或三分之一）所涉及的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:30:16.130

> […] 其中（使用解释）预测运行时间约为 1100 万秒（太多了！）
> 
> […] 这应该是“只有”20 000 秒.. 还是太多了

我认为您误解了`EXPLAIN`. 正如[其文档](http://www.postgresql.org/docs/9.2/static/sql-explain.html)中所解释的那样，“估计的语句执行成本”（即“计划者对运行语句需要多长时间的猜测”）不是以*秒*为单位，而是“以任意成本单位，但通常意味着磁盘页面获取”。

所以 PostgreSQL 猜测第二条语句的运行速度将比第一条语句快大约 500 倍，但两者都不会像你想象的那么长。:-)******

# javascript - 每月第一天的 Javascript 日期对象问题

> ID：12752113
> 
> 赞同：0
> 
> 时间：2012-10-05T18:35:34.057
> 
> 标签：javascript, jquery, html

我正在使用 Javascript 日期，我对尝试从字符串中获取日期有点困惑。

这是我的代码：

```
var formatDate = function(dateObj) {
    // make sure date values are two digits and months start at 1
    var adjMonth = dateObj.getMonth() + 1;
    var adjDate = dateObj.getDate();
    if (adjMonth < 10) adjMonth = '0' + adjMonth;
    if (adjDate < 10) adjDate = '0' + adjDate;

    // build and return dateStr
    var dateStr = dateObj.getFullYear() + '-' + adjMonth + '-' + adjDate;
    return dateStr;
};

$(document).ready(function() {
    var testIn1 = "2012-02-01";
    var testDate1 = new Date(testIn1);
    var testDate1Str = formatDate(testDate1);

    var testIn2 = "2012-01-31";
    var testDate2 = new Date(testIn2);
    var testDate2Str = formatDate(testDate2);

    $('#output').html("---Input = '" + testIn1 + "':<br>" + testDate1 + "<br>" + testDate1Str + "<br>"
                     +"---Input = '" + testIn2 + "':<br>" + testDate2 + "<br>" + testDate2Str + "<br>");
});​ 
```

我从中得到的结果是：

```
---Input = '2012-02-01':
Tue Jan 31 2012 18:00:00 GMT-0600 (CST)
2012-01-31
---Input = '2012-01-31':
Mon Jan 30 2012 18:00:00 GMT-0600 (CST)
2012-01-30 
```

这对我来说毫无意义，为什么一天休息？从 2012-02-01 获得 2012-01-31 似乎并不明智......我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:41:10.363

如果您不通过时间，它看起来像`Date.parse`使用GMT，它将是您所在时区 (GMT-6) 的前一天。如果您确实通过了明确的时间，则此行为将被抑制：`00:00:00``18:00:00`

```
Date.parse(testIn1 + " 00:00:00"); 
```

# types - Coffeescript 会采用类似于 Typescript 的可选类型吗？

> ID：12752114
> 
> 赞同：4
> 
> 时间：2012-10-05T18:35:39.760
> 
> 标签：types, coffeescript, typescript

随着最近 Typescript 的出现和它声称的*可选*静态类型，Coffeescript 开发人员可能会觉得错过了[这些功能](http://siek.blogspot.gr/2012/10/is-typescript-gradually-typed-part-1.html)

Coffeescript 是否**能够**和/或**可能**在未来版本中采用*可选*类型，语法将如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:29:51.557

这个想法已经被提出并被拒绝了好几次。参见例如[issue 1833](https://github.com/jashkenas/coffee-script/issues/1833)。

有一个名为[Contracts.coffee](http://disnetdev.com/contracts.coffee/)的分支。

# regex - 更改正则表达式以避免引用标记

> ID：12752115
> 
> 赞同：1
> 
> 时间：2012-10-05T18:35:48.417
> 
> 标签：regex, perl, quote

[我有一个从以前的 SO 问题](https://stackoverflow.com/questions/12719935/regex-with-recursive-expression-to-match-nested-braces)中提供的方便的正则表达式：

```
$regex = qr/
    (sp\s+              #start with 'sp'        
    \{                  #opening brace
      (                 #save to $2
         (?:            #either
            \{ (?-1) \} #more braces and recurse
            |           #or
            [^{}]++     #non-brace characters
         )*             #0 or more times
      )                 #end $2
    \}                  #ending brace
    )                   #end $1
    /x; 
```

我使用它从格式为 的文件中提取文本结构`sp {}`，并可能进一步嵌套花括号。它正确地将以下文本保存在 $1 中：

```
sp {foo {bar} baz} 
```

但是我遇到了一个问题：引用。在我的文本中，竖线可以用来引用：

```
sp {foo |}}}}bar}}}{{|} 
```

整个事情是一个结构，但我当前的正则表达式只会 match `sp {foo |}`。事情变得更加复杂，因为可以使用反斜杠在引号内转义竖线：

```
sp {foo |}\|bar|} 
```

也应该匹配。有没有人对如何加强这个正则表达式来处理引号和引号转义有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:48:44.993

查看像 Text::Balanced 这样的 CPAN 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:50:19.987

代替

```
[^{}] 
```

和

```
(?: [^|{}]++
|   \| (?: [^\\|]++ | \\. )*+ \|
) 
```

# c# - 将复选框添加到 WPF 消息框

> ID：12752117
> 
> 赞同：1
> 
> 时间：2012-10-05T18:35:55.403
> 
> 标签：c#, .net, wpf, c#-4.0

据我了解，WPF 的消息框可以自定义。我想知道是否可以将 CheckBox 添加到 WPF MessageBox 中，例如 - 不要再显示此消息等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:40:58.863

可能，您可以根据需要更改 WPF 控件样式和模板，请参阅以下链接以获取更多参考：

[自定义消息框](https://stackoverflow.com/questions/3169996/c-sharp-wpf-custom-message-box)

[http://blogsprajeesh.blogspot.com/2009/12/wpf-messagebox-custom-control.html](http://blogsprajeesh.blogspot.com/2009/12/wpf-messagebox-custom-control.html)

[http://www.codeproject.com/Articles/201894/A-Customizable-WPF-MessageBox](http://www.codeproject.com/Articles/201894/A-Customizable-WPF-MessageBox)

[http://www.codeproject.com/Articles/22511/WPF-Common-TaskDialog-for-Vista-and-XP](http://www.codeproject.com/Articles/22511/WPF-Common-TaskDialog-for-Vista-and-XP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:05:05.763

可以只使用在ctor中检查的Window Passed，这样你就可以取回值

```
bool checked = false;    
Window1 win1 = new Window1(ref input);
Nullable<bool> dialogResult = win1.ShowDialog();
System.Diagnostics.Debug.WriteLine(dialogResult.ToString());
System.Diagnostics.Debug.WriteLine(checked.ToString()); 
```

# android - AdMob 横幅的关闭按钮

> ID：12752118
> 
> 赞同：2
> 
> 时间：2012-10-05T18:35:59.710
> 
> 标签：android, admob

有没有办法在 AdMob 的横幅上设置关闭按钮？我的意思是那些小'x'来消除横幅......

我目前正在将横幅添加到布局中，如下所示：

```
<com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="my_id_here"
        ads:testDevices="TEST_EMULATOR"
        ads:loadAdOnCreate="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:54:35.100

目前无法使用 SDK 在横幅广告中包含 X 按钮。希望这个功能在未来的某个时候可以使用。

# vb.net - 如何在 Outlook 中枚举任务请求

> ID：12752120
> 
> 赞同：1
> 
> 时间：2012-10-05T18:36:02.737
> 
> 标签：vb.net, outlook, add-in, outlook-addin

我希望枚举用户在收件箱中收到的任务请求。我认为我有正确的方法，查看收件箱文件夹，然后检查邮件类等于 IPM.taskrequest 的位置，但现在可以了。这是我的代码，任何建议将不胜感激，谢谢！

```
Private Sub GetTaskRequests(objApp As Microsoft.Office.Interop.Outlook.Application)
        Dim objNS As Outlook.NameSpace = objApp.GetNamespace("MAPI")
        Dim folder As Outlook.MAPIFolder = _
            objNS.GetDefaultFolder( _
            Outlook.OlDefaultFolders.olFolderInbox)

        Dim searchCriteria As String = "[MessageClass] = 'IPM.TaskRequest'"
        Dim strBuilder As StringBuilder = Nothing
        Dim counter As Integer = 0
        Dim taskItem As Outlook._TaskRequestItem = Nothing
        Dim folderItems As Outlook.Items = Nothing
        Dim resultItem As Object = Nothing
        Dim TTDcounter As Integer = 0
        Try
            folderItems = folder.Items
            folderItems.IncludeRecurrences = True
            If (folderItems.Count > 0) Then
                resultItem = folderItems.Find(searchCriteria)
                If Not IsNothing(resultItem) Then
                    strBuilder = New StringBuilder()
                    Do
                        If (TypeOf (resultItem) Is Outlook._TaskRequestItem) Then
                            counter += 1
                            taskItem = resultItem
                            If Not (taskItem.Status = Outlook.OlTaskStatus.olTaskComplete) Then
                                strBuilder.AppendLine("#" + counter.ToString() + _
                                " Subject: " + taskItem.Subject + _
                                " Percent Complete: " + taskItem.PercentComplete.ToString() + _
                                " Body: " + taskItem.DueDate)

                                If taskItem.Categories = "TTD" Then
                                    TTDcounter += 1
                                    Dim listarray() As String = {taskItem.Delegator, taskItem.Subject, taskItem.DueDate, stripEstComp(taskItem.Body.ToString())}
                                    taskPaneControl3.ListView1.Items.Add(TTDcounter).SubItems.AddRange(listarray)
                                End If

                            End If
                        End If
                        Marshal.ReleaseComObject(resultItem)
                        resultItem = folderItems.FindNext()
                    Loop Until IsNothing(resultItem)
                End If
            End If
            If Not IsNothing(strBuilder) Then
                Debug.WriteLine(strBuilder.ToString())
            Else
                Debug.WriteLine("There is no match in the " + _
                                   folder.Name + " folder.")
            End If
        Catch ex As Exception
            System.Windows.Forms.MessageBox.Show(ex.Message)
        Finally
            If Not IsNothing(folderItems) Then Marshal.ReleaseComObject(folderItems)
        End Try
    End Sub 
```

# java - 如何以无配置的方式将可选任务 sshexec 加载到 Ant 中？

> ID：12752124
> 
> 赞同：2
> 
> 时间：2012-10-05T18:36:28.190
> 
> 标签：java, ant, ssh, jsch

我正在使用 sshexec，它依赖于 jsch-0.1.48.jar。我不能只把它放到 ant/lib 目录中，因为其他希望使用相同构建脚本的用户必须先在他们的机器上进行配置，然后才能这样做。

我想要做的是能够引用 jsch-0.1.48.jar 作为项目的一部分。目前，我把它放在 project/libs 目录中，我正在尝试类似：

```
<property name="lib" location="lib"/>

<taskdef name="sshexec" classname="org.apache.tools.ant.taskdefs.optional.ssh.SSHExec">
  <classpath>
    <pathelement location="${lib}/jsch-0.1.48.jar"/>  
  </classpath>
</taskdef> 

<target name="sshcmd" description="ssh command">    
    <sshexec host="X.X.X.X" username="USER" password="PASS" command="cmd" trust="true"/>
</target> 
```

但这不起作用：

```
C:\dev\trunk\project:>ant sshcmd
Buildfile: C:\dev\trunk\project\build.xml

BUILD FAILED
C:\dev\trunk\project\build.xml:275: taskdef A class needed by class org.apache.tools.ant.taskdefs.optional.ssh.SSHExec cannot be found: com/jcraft/jsch/Logger
using the classloader AntClassLoader[C:\dev\trunk\project\lib\jsch-0.1.48.jar]

Total time: 0 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:14:17.367

sshexec任务内置[于](http://ant.apache.org/manual/Tasks/sshexec.html)ANT 中，您无需调用 taskdef 操作即可使用它。缺少的只是jsch jar。

这可以使用引导目标安装，如下所示（来自[Maven Central](http://search.maven.org/)）：

```
<target name="bootstrap" description="Install missing jars">
    <mkdir dir="${user.home}/.ant/lib"/>
    <get src="http://search.maven.org/remotecontent?filepath=com/jcraft/jsch/0.1.48/jsch-0.1.48.jar" dest="${user.home}/.ant/lib/jsch.jar"/>
</target> 
```

该目标只需要运行一次，之后 ANT [sshexec](http://ant.apache.org/manual/Tasks/sshexec.html)任务将在开发人员的 PC 上按预期运行。

# 更新

如果您不想下载 jars，另一种机制可以从命令行传递 ANT 库的位置，如下所示：

```
ant -lib /path/to/project/lib/dir ... 
```

有关 ANT 库管理的更多详细信息，请参阅[ANT 手册](http://ant.apache.org/manual/running.html#libs)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-08T14:51:11.350

jsch jar 与我的项目打包在一起。所以我没有下载它，而是将它复制到 ant 库中。构建将在第一次运行时失败，这对我的目的来说很好。它将第二次成功，因为 jar 将在库中并且将在启动时加载。

```
<target name="jschset" description="Set the jar">   
    <copy file="${lib}/jsch-0.1.48.jar" tofile="${ant.home}/lib/jsch-0.1.48.jar"/>
</target> 
```

# java - 从 Java 中的 JSON 响应中提取数据？

> ID：12752128
> 
> 赞同：-1
> 
> 时间：2012-10-05T18:36:49.680
> 
> 标签：java, json, jackson

这个问题来自我自己的问题here，

[将 JSON 响应转换为 Java 中的字符串？](https://stackoverflow.com/questions/12735545/getting-json-response-into-string-in-java/12736397#12736397)

嗯，我确实得到了预期的结果。现在，如果我想提取 JSON 响应的特定部分并用它来表示，将其保存在数据库中，我该怎么做？

我正在考虑使用杰克逊 JSON 解析器。我检查了教程，但它只使用文件而不是 HTTP 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:39:46.350

杰克逊是个不错的选择。我不知道您从教程中收集到了什么；您可能需要阅读它们之外的内容。Jackson 是一个很好的处理 JSON 的 Java 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:41:31.713

[`Gson`](http://code.google.com/p/google-gson/)是一个优秀的 json 解析器。您可以使用它将 json 转换[为 Java 对象](https://sites.google.com/site/gson/gson-user-guide#TOC-Object-Examples)。

```
Gson gson = new Gson();
Foo foo = gson.fromJson("{your json string}", Foo.class); 
```

如果您不确定`Foo`该类应该是什么样子，您始终可以`Foo`按照您认为的外观创建并序列化它以与您的 json 字符串进行比较。

```
Gson gson = new Gson();
gson.toJson(new Foo()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:53:10.983

我相信[这](http://wiki.fasterxml.com/JacksonStreamingApi)就是你要找的。请注意，注释中的`// or URL, Stream, Reader, String, byte[]`意思是可以使用任何形式的输入流。只需从您正在使用的 HTTP 连接获取输入流并解析即可。\

实际上，您可能已经阅读过的教程（使用对象映射）也可以完成同样的事情。读取 JSON 流的方法，无论是 String、InputStream 还是其他方法，都被重载以获取多个输入并将它们映射到相应的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:02:28.263

你可以传递一个字节而不是一个文件。查看杰克逊[API](http://jackson.codehaus.org/1.8.8/javadoc/org/codehaus/jackson/map/ObjectMapper.html)

您可以从请求中获取参数并将它们转换为字节数组吗？

```
String source = "" +request.getParameter("param1");
byte[] byteArray = source.getBytes("UTF-8"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T19:07:23.957

假设 JSON 是一个简单的普通对象，可以通过字符串读取。只需将输入流转换为正确图表集中的纯字符串，然后我认为可以使用 Jackson 映射器解析字符串。

getMapper().readValue(dataStr, Class.class);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T21:08:55.950

我假设您的整个响应是一个 json，而不仅仅是它的一部分。

你可以试试 Genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)。它具有杰克逊的大部分功能以及其他非常有用的功能，Genson 也更易于使用，并且比杰克逊更易于扩展。这是一个解决方案，您将使用 Genson 的数据绑定功能将流反序列化为 java 对象，然后您将使用您的对象并做任何您想做的事情。

```
InputStream instream = entity.getContent();
Genson genson = new Genson();
ObjectReader reader = genson.createReader(instream);
DeserializeIntoThisClass myObject = genson.deserialize(DeserializeIntoThisClass.class, reader, new Context(genson));
// and now you can work with this object and store it in a database if you want 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T18:52:39.370

您可以通过`URL`而不是`File`，您可以从 Javadocs 中找到它，因此：

```
MyObject ob = new ObjectMapper().readValue(url, MyObject.class); 
```

# sql - 在SQL中获取两个日期之间一周的开始日期和结束日期的最佳方法是什么

> ID：12752136
> 
> 赞同：1
> 
> 时间：2012-10-05T18:37:35.873
> 
> 标签：sql, sql-server, sql-server-2005

我使用 SQL Server 2005。我有一个开始和结束日期。

前任：

```
START_DATE    END_DATE
2011-04-24    2012-05-05 
```

我想获取两个日期之间每周的所有开始日（SQL 设置为星期日）和结束日（星期六）。

期望的结果：

```
2011-04-24    2011-04-30
2011-05-01    2011-05-07
2011-05-08    2011-05-14
....
2012-04-29    2012-05-05 
```

现在我知道我可以做一些事情，`DATEADD(week, 1, 2011-04-24)`直到我到达我的结束日期，但在我到达我的结束日期之前我不太明白该怎么做（没有光标或一段时间）。我想在一个查询中完成。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:57:07.803

使用日期功能是一种聪明且具有前瞻性的选择。一个很棒的方法是[sqlteam](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=61519)上的 F_TABLE_DATE。

我提取了相关的代码片段来说明如何一次性利用：

```
declare @sDate datetime,
        @eDate datetime;

select  @sDate = '2011-04-24',
        @eDate = '2012-05-05';

;with AllDatesBetween (d)
as  (   
        select dateadd(dd, n-1, @sDate)
        from    util.Number
        where   n <= datediff(dd, @sDate, @eDate+1)
    )
select  distinct
        dateadd(dd,(datediff(dd,'17530107',d)/7)*7,'17530107') [weekStart],
        dateadd(dd,((datediff(dd,'17530107',d)/7)*7)+6,'17530107') [weekEnd]
from    AllDatesBetween
order
by      1,2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:46:26.027

我还将分享一组我使用的常用日期函数。只需将其创建为表值函数：

```
 set ANSI_NULLS ON
    set QUOTED_IDENTIFIER ON
    go

    CREATE FUNCTION [dbo].[udfCommonDates] (@date datetime)
    RETURNS @t table (week_start datetime,
                      week_end datetime,
                      lastweek_start datetime,
                      lastweek_end datetime,
                      month_start datetime,
                      month_end datetime,
                      lastmonth_start datetime,
                      lastmonth_end datetime,
                      yesterday_start datetime,
                      yesterday_end datetime,
                      today_start datetime,
                      today_end datetime,
                      thisweek_monday_start datetime,
                      thisweek_monday_end datetime,
                      year_start datetime,
                      year_end datetime,
                      tomorrow_noon datetime,
                      today_noon datetime,
                      date_only datetime)
    BEGIN
       INSERT @t
       SELECT
       dbo.get_week_start ( @date ) AS week_start,
       dbo.get_week_end   ( @date ) AS week_end,
       dbo.get_week_start ( DATEADD(d, -7, @date ) ) AS lastweek_start,
       dbo.get_week_end   ( DATEADD(d, -7, @date ) ) AS lastweek_end,
       dbo.get_month_start( @date ) AS month_start,
       dbo.get_month_end  ( @date ) AS month_end,
       dbo.get_month_start ( DATEADD(m,-1, @date) ) AS lastmonth_start,
       dbo.get_month_end  ( DATEADD(m,-1,@date) ) AS lastmonth_end,
       dbo.get_yesterday_start ( @date ) AS yesterday_start,
       dbo.get_yesterday_end ( @date ) AS yesterday_end,
       dbo.get_today_start (@date) AS today_start,
       dbo.get_today_end ( @date ) AS today_end,
       dbo.get_weekday_start(1,@date) AS thisweek_monday_start,
       dbo.get_weekday_end(1,@date) AS thisweek_monday_end,
       dbo.get_year_start(@date) AS year_start,
       dbo.get_year_end(@date) AS year_end,  
       dbo.get_tomorrow_noon(@date) AS TomorrowNoon,
       dbo.get_today_noon(@date) AS TodayNoon,
       dbo.get_date_only(@date) AS DateOnly
    RETURN
    END 
```

以下是这些的标量值函数：

```
 CREATE FUNCTION [dbo].[get_date_only] (@date datetime)
    RETURNS datetime
    WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
    AS    
    BEGIN
        RETURN dateadd(day, DateDiff(day, 0, GetDate()), 0)
    END
    GO

CREATE FUNCTION [dbo].[get_month_end] (@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    
BEGIN
   RETURN dateadd(ms, -3, dateadd (m,datediff(m,0,
          dateadd(m,1,@date)),0))
END
GO

CREATE FUNCTION [dbo].[get_month_start] (@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    
BEGIN
   RETURN dateadd(m,datediff(m,0, @date),0)
   END
GO

CREATE FUNCTION [dbo].[get_today_end] (@today datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    
BEGIN
   return dateadd(ms, -3, datediff(d,0,dateadd(d,1,@today)))
END
GO

CREATE FUNCTION [dbo].[get_today_noon](@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   RETURN DATEADD(hh, 12, DATEADD(d,DATEDIFF(d,0, @date),0))
END
GO

CREATE FUNCTION [dbo].[get_today_start] (@today datetime)
RETURNS datetime 
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   return dateadd(day, 0, datediff(d,0,@today))
END
GO

CREATE FUNCTION [dbo].[get_tomorrow_noon](@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   RETURN DATEADD(hh, 12, DATEADD(d,DATEDIFF(d,-1, @date),0))
END
GO

CREATE FUNCTION [dbo].[get_week_end] (@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   return dateadd(yyyy, datepart(yyyy,
      dateadd(weekday,7-datepart(weekday, @date),@date))-1900, 0)
    + dateadd(ms, -3,
      dateadd(dy, datepart(dy,
     dateadd(weekday,7-datepart(weekday, @date),@date)),0) )
END
GO

CREATE FUNCTION [dbo].[get_week_start] (@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   return dateadd(yyyy, datepart(yyyy,
      dateadd(weekday,1-datepart(weekday, @date),@date))-1900, 0)
    + dateadd(dy, datepart(dy,
      dateadd(weekday,1-datepart(weekday, @date),@date))-1,0)
END
GO

CREATE FUNCTION [dbo].[get_weekday_end] (@weekday tinyint,
                                 @date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   return dateadd(yyyy, datepart(yyyy,
      dateadd(weekday,@weekday-
      datepart(weekday, @date),@date))-1900, 0)
    + dateadd(ms, -3,
      dateadd(dy, datepart(dy,
      dateadd(weekday,@weekday-datepart(weekday, @date),
                                        @date)),0) )
END
GO

CREATE FUNCTION [dbo].[get_weekday_start] (@weekday tinyint,
                                   @date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   return dateadd(yyyy, datepart(yyyy,
      dateadd(weekday,@weekday-
      datepart(weekday, @date),@date))-1900, 0)
    + dateadd(dy, datepart(dy,
      dateadd(weekday,@weekday-datepart(weekday, @date),
                                        @date))-1,0)
END
GO

CREATE FUNCTION [dbo].[get_year_end] (@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
RETURN DATEADD(year, DATEDIFF(year, 0, GetDate())+1, 0)-1
END
GO

CREATE FUNCTION [dbo].[get_year_start] (@date datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   RETURN DATEADD(year,DATEDIFF(year,0, @date),0)
END
GO

CREATE FUNCTION [dbo].[get_yesterday_end] (@today datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   return dateadd(ms, -3, datediff(d,0,@today))
END
GO

CREATE FUNCTION [dbo].[get_yesterday_start] (@today datetime)
RETURNS datetime
WITH SCHEMABINDING, RETURNS NULL ON NULL INPUT
AS    BEGIN
   RETURN dateadd(day, -1, datediff(d,0,@today))
END
GO 
```

您可以像这样执行整个表值函数：

`SELECT * FROM [MyDB].[dbo].[udfCommonDates] (GetDate())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:21:46.597

刚刚找到了一种使用递归的方法！

```
;WITH DaysOfWeek AS 
( 
    SELECT {d '2011-04-24'} AS StartOfWeek
    UNION ALL 
    SELECT DATEADD( week, 1, jdr.StartOfWeek) AS StartOfWeek
    FROM JoursDuReleve jdr 
    WHERE DATEADD(week, 1, jdr.StartOfWeek) <= {d '2012-05-05'}
) 
SELECT StartOfWeek, DATEADD(day, 6, StartOfWeek) AS EndOfWeek  
FROM DaysOfWeek
ORDER BY StartOfWeek DESC 
OPTION (MAXRECURSION 0) 
```

# php - 使用数据库信息更新页面

> ID：12752138
> 
> 赞同：0
> 
> 时间：2012-10-05T18:37:49.987
> 
> 标签：php, jquery

我正在尝试为我的站点创建一个刷新算法，但不希望将一堆`$.post()`脚本发送到服务器检查更新。因此，我想知道当数据库中的某些内容发生更改时，是否有任何好的方法可以向正在查看的页面发送更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:39:57.197

您可以使用 html5 网络套接字

你需要一个服务器，P2P 在浏览器之间还不能工作。请参阅：[我是否需要服务器才能使用 HTML5 的 WebSockets？](https://stackoverflow.com/questions/1530023/do-i-need-a-server-to-use-html5s-websockets)

Websocket（HTML5 套接字）是一种在浏览器和服务器之间建立双向开放连接的方法。否则，您将不得不使用仅拉取的 XHR（又名 Ajax）。Mozilla 写了一篇很棒的文章来解释他们是如何构建的：BrowserQuest（或者只是玩它：[http](http://browserquest.mozilla.org/) ://browserquest.mozilla.org/ ）

替代品一般都是基于 Flash XMLSocket！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:45:30.003

常见的方法称为[*Comet*](http://en.wikipedia.org/wiki/Comet_%28programming%29)。

基本上，您创建一个`XMLHttpRequest`，将其发送到服务器并等待。服务器保持连接打开，并发送数据，然后在每次服务器端发生某些事情时将其关闭。它也可以不发送任何内容并每 30 秒左右关闭一次以清理一些东西。

*WebSockets*是一项相当新的技术，它将成为未来的发展方向，但我鼓励你现在就使用*Comet*，除非你想玩一些在 Web 开发前沿的东西。

# asp.net-mvc - 自定义 ModelMetadataProvider 是一个单例，但依赖于请求范围的服务

> ID：12752143
> 
> 赞同：2
> 
> 时间：2012-10-05T18:38:11.173
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ninject, ioc-container

在我的 ASP.NET MVC 项目中，我有一个需要 service 的自定义 ModelMetadataProvider `PropertyAccess`。我目前正在使用构造函数注入和 IOC 容器 (Ninject) 来完成脏活。问题是`PropertyAccess`请求范围，而我的 ModelMetadataProvider 只创建一次（在应用程序启动时）。这会导致`PropertyAccess`服务过时/不正确。

万一这很重要，这是我在 Global.asax 中设置 ModelMetadataProvider 的方式：

```
private void RegisterModelMetadataProvider()
{
    var metadataProvider = DependencyResolver.Current.GetService<CustomModelMetadataProvider>();
    ModelMetadataProviders.Current = metadataProvider;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:38:11.173

[我正在回答我自己的问题（问答风格），但我不相信这是一个理想的解决方案。如果您有更好的方法（例如只需要配置的方法），请发表评论或留下替代答案。]

不是`PropertyAccess`直接传递给单例类，而是传递 a `PropertyAccessLocator`，它可用于根据`PropertyAccess`需要获取当前请求的 。

**这是 PropertyAccessLocator**

```
public class PropertyAccessLocator
{
    public PropertyAccess Get()
    {
        return DependencyResolver.Current.GetService<PropertyAccess>();
    }
} 
```

**这是一个示例 ModelMetadataProvider**

```
public class CustomModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    private readonly PropertyAccessLocator _propertyAccessLocator;

    public CustomModelMetadataProvider(
        PropertyAccessLocator propertyAccessLocator)
    {
        _propertyAccessLocator = propertyAccessLocator;
        // required because PropertyAccess is request scoped
        // while this class is a singleton 
    }

    protected override ModelMetadata CreateMetadata(
        IEnumerable<Attribute> attributes,
        Type containerType,
        Func<object> modelAccessor,
        Type modelType,
        string propertyName)
    {
        var metadata = base.CreateMetadata(
            attributes, containerType, modelAccessor, modelType, propertyName);
        var propertyAccess = _propertyAccessLocator.Get();
        // todo use propertyAccess to do something with the metadata...
        return metadata;
    }
} 
```

# file - MatLab - 根据名称执行函数

> ID：12752147
> 
> 赞同：2
> 
> 时间：2012-10-05T18:38:20.177
> 
> 标签：file, matlab

我有几个 MatLab 函数，几乎所有函数都有测试函数。现在还没有真正的测试函数命名约定，所以我最终得到了像`test_functionName`, `tests_functionName`,`FunctionName_Test`等这样的函数。

但是，我看到这些功能有两个共同点：

*   该名称包含“测试”（不同的大小写）。
*   它们没有输入或输出参数。

我想编写一个函数，它会在给定文件夹下（或在 PATH 中）找到尊重这两个条件并执行它们的所有函数。这样我就可以在一次调用中执行我所有的测试功能。

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:49:12.457

您可以执行以下操作：

```
fun=dir('*test*.m'); %% look for matlab scripts which name contains 'test'
fun={fun.name};      %% extract their names
fun=fun(cellfun(@(x) (nargin(x)==0),fun)); %% select the ones with no input arguments
fun = regexprep(fun, '.m', ''); % remove '.m' from the filenames
cellfun(@eval,fun); %% execute them 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:49:04.873

首先，获取文件夹下的所有文件：

```
 d = dir(myFolder); 
```

删除扩展名不是的那些`.m`：

```
 indexes = strcmp('.m',{d.ext});
   d(indexes) = []; 
```

然后，收集他们所有的名字：

```
 fileNames = {d.Name}; 
```

检查哪一个以测试开始或结束：

```
 testPrefix = strncmp('test',fileNames)
   testPostfix = %# Left as an exercise to the reader
   sutiableFileNames = fileNames( testPrefix | testPostfix); 
```

现在您可以使用 `nargin' 检查参数的数量：

```
 numOfInParams  = cellfun(@nargin,sutiableFileNames);
   numOfOutParams = cellfun(@nargout,sutiableFileNames); 
```

然后再次过滤（我想你已经明白了）

# css - 显示基于列但似乎非表格的数据的最佳方式是什么？

> ID：12752148
> 
> 赞同：0
> 
> 时间：2012-10-05T18:38:22.503
> 
> 标签：css

我试图在我的网页中保持语义正确，但不知道如何继续：

我的数据看起来像这样或需要：

```
Name:  lastname, first mi Address:  123 Main St.  City, State, Zip:  more...
Fieldx:  data1 Fieldy:  more data... 
```

我不想要的是顶部带有列标题的常规表格数据外观：

```
name                 Address
lastname, first mi   Some address... 
```

我不知道该怎么做。当我查找无表格 CSS 时，我只找到表单和布局。

我在这里错了我应该使用带有 CSS 的表单布局（并且没有表格）......它只是不是“表单”吗？

编辑：我是否只是将所有内容放在一个 div 中，然后放在带有浮动的跨度中，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:56:23.397

我认为DIV是要走的路。与 CSS 结合使用时，DIV 为您提供了更好的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:09:26.573

您所拥有的是结构上的名称/值对列表，它对应于一个两列表。它也可以被标记为一个`dl`元素，如果我们采用自由现代的解释，`dl`它实际上不是定义列表而是描述列表，而描述列表实际上是名称/值对的列表。它也可以被标记为一个`ul`元素，其中每个`li`元素包含两个`span`元素（带有类），但是这样你就失去了结构中类似数组的想法。最后，您可以使用一些`div`或`p`容器，其中包含`span`具有交替类的元素。

所有这些都与语义（意义）无关。相反，它与结构有关。与其考虑哪种方法更“正确”，不如考虑哪种方法最适合样式化（并且可能在处理中，例如在客户端脚本中）。如果你想要表格布局，使用表格是很自然的。（有点有趣的是，如果您*不*想要这样的布局，那么您可能不应该使用表格，因为旧版本的 IE 不允许您`table`以非表格方式设置元素的样式。）

如果您打算将数据作为示例中的内联文本，那么我会使用

```
<div class=foo>
<span class=name>Name</span> <span class=value>lastname, first mi</span>
<span class=name>Address</span> <span class=value>123 Main St. </span>
  ...
</div> 
```

这是一个有点冗长的标记，但它可以很容易地设置样式，因为它`div`没有`span`默认样式（除了`div`意味着前后换行），并且您可以方便地使用类选择器。

# python - Python：TLS/SSL 连接已关闭

> ID：12752157
> 
> 赞同：0
> 
> 时间：2012-10-05T18:38:50.503
> 
> 标签：python, https, amazon-s3

我的代码

```
conn = __get_s3_connection(s3_values.get('accessKeyId'), s3_values.get('secretAccessKey'))
key = s3_values.get('proposal_key') + proposal_unique_id + s3_values.get('proposal_append_path')
request = urllib2.Request(conn.generate_url(s3_values.get('expires_in'), 'GET', bucket=s3_values.get('bucket'), key=key))
request.add_header('Accept-encoding', 'gzip')
response = urllib2.urlopen(request) 
```

网址看起来像`https://production.myorg.s3.amazonaws.com/key/document.xml.gz?Signature=signature%3D&Expires=1349462207&AWSAccessKeyId=accessId`

这种方法在 1 小时前运行良好，但是当我运行相同的程序时，它会抛出

```
Traceback (most recent call last):
  File "/Users/hhimanshu/IdeaProjects/analytics/src/utilities/documentReader.py", line 145, in <module>
    main()
  File "/Users/hhimanshu/IdeaProjects/analytics/src/utilities/documentReader.py", line 141, in main
    x = get_proposal_data_from_s3('documentId')
  File "/Users/hhimanshu/IdeaProjects/analytics/src/utilities/documentReader.py", line 54, in get_proposal_data_from_s3
    response = urllib2.urlopen(request)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 392, in open
    response = self._open(req, data)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 410, in _open
    '_open', req)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 370, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1194, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1161, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 6] _ssl.c:503: TLS/SSL connection has been closed> 
```

可能是什么原因？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:37:24.613

这是因为断断续续的互联网连接。自行解决

# matlab - 查找列中具有特定值的行

> ID：12752158
> 
> 赞同：2
> 
> 时间：2012-10-05T18:38:58.817
> 
> 标签：matlab, matrix, statistics

> **可能重复：**
> [在矩阵中查找条目匹配某些约束的行？](https://stackoverflow.com/questions/10969521/find-rows-in-matrix-where-entries-match-certain-constraints)

在 Matlab 中，我有一个矩阵（MxN），我想找到特定列中的条目等于指定值的行。例如，我有一个矩阵如下：

```
 0    0   0   0   0   0   0   0   1   0
   1    0   0   0   0   0   1   0   0   1
   0    0   1   0   0   0   0   0   0   0
   0    0   0   1   0   0   0   0   1   0
   0    0   0   0   1   0   0   0   0   1
   0    0   0   0   0   0   0   0   0   0
   0    1   1   0   0   0   1   0   1   0
   0    0   0   0   0   0   0   0   0   1
   0    0   0   0   0   0   0   0   0   0
   0    0   0   0   0   0   0   0   0   1 
```

我想找到第 7 个元素等于 的行`1`。在此示例中，结果矩阵应包含第 2 行和第 7 行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-05T18:41:00.503

如果您的矩阵被调用`A`，只需执行以下操作：

```
A(A(:,7)==1,:) 
```

PS：我认为这个问题已经被回答了一百万次了......

# google-fusion-tables - 从地图信息窗口链接到实际记录

> ID：12752165
> 
> 赞同：2
> 
> 时间：2012-10-05T18:39:39.253
> 
> 标签：google-fusion-tables

我有一个带有地图视图的融合表。我想在地图信息窗口的底部添加一个链接，以便能够编辑该特定记录。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:40:41.530

您需要使用 Fusion Tables API 自己创建编辑 UI。没有内置链接可以拉动记录本身进行编辑，尽管这是一个绝妙的主意。

-丽贝卡

# image-processing - 为什么我们应该使用灰度进行图像处理

> ID：12752168
> 
> 赞同：35
> 
> 时间：2012-10-05T18:39:51.580
> 
> 标签：image-processing

我认为这可能是一个愚蠢的问题，但是在阅读了很多关于图像处理的内容并进行了很多搜索之后，我看到的每个关于图像处理的示例都使用灰度来工作

我知道灰度图像只使用一个颜色通道，通常只需要 8 位来表示，等等......但是，当我们有彩色图像时为什么要使用灰度？灰度的优点是什么？我可以想象那是因为我们需要处理的位更少，但即使在今天使用更快的计算机，这也是必要的吗？

我不确定我是否清楚我的疑问，我希望有人能回答我

非常感谢您

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-06T16:33:20.190

正如[张约翰](http://www.quora.com/Computer-Vision/If-you-had-to-choose-would-you-rather-go-without-luminance-or-chrominance/answer/John-Zhang)所解释的：

> 亮度在区分视觉特征方面更为重要

John 还给出了一个很好的建议来说明这个特性：拍摄给定的图像并将亮度平面与色度平面分开。

为此，您可以使用 ImageMagick[单独](http://www.imagemagick.org/Usage/color_basics/#separate)的运算符，*将每个通道的当前内容提取为灰度图像*：

```
convert myimage.gif -colorspace YCbCr -separate sep_YCbCr_%d.gif 
```

这是它在示例图像上给出的内容（左上：原始彩色图像，右上：亮度平面，底行：色度平面）：

![在此处输入图像描述](../Images/474cc1209b7cfa7671b9d6b0ea5da50b.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-08T05:08:55.263

To elaborate a bit on deltheil's answer:

1.  Signal to noise. For many applications of image processing, color information doesn't help us identify important edges or other features. There are exceptions. If there is an edge (a step change in pixel value) in hue that is hard to detect in a grayscale image, or if we need to identify objects of known hue (orange fruit in front of green leaves), then color information could be useful. If we don't need color, then we can consider it noise. At first it's a bit counterintuitive to "think" in grayscale, but you get used to it.
2.  Complexity of the code. If you want to find edges based on luminance AND chrominance, you've got more work ahead of you. That additional work (and additional debugging, additional pain in supporting the software, etc.) is hard to justify if the additional color information isn't helpful for applications of interest.
3.  For learning image processing, it's better to understand grayscale processing first and understand how it applies to multichannel processing rather than starting with full color imaging and missing all the important insights that can (and should) be learned from single channel processing.
4.  Difficulty of visualization. In grayscale images, the watershed algorithm is fairly easy to conceptualize because we can think of the two spatial dimensions and one brightness dimension as a 3D image with hills, valleys, catchment basins, ridges, etc. "Peak brightness" is just a mountain peak in our 3D visualization of the grayscale image. There are a number of algorithms for which an intuitive "physical" interpretation helps us think through a problem. In RGB, HSI, Lab, and other color spaces this sort of visualization is much harder since there are additional dimensions that the standard human brain can't visualize easily. Sure, we can think of "peak redness," but what does that mountain peak look like in an (x,y,h,s,i) space? Ouch. One workaround is to think of each color variable as an intensity image, but that leads us right back to grayscale image processing.
5.  Color is complex. Humans perceive color and identify color with deceptive ease. If you get into the business of attempting to distinguish colors from one another, then you'll either want to (a) follow tradition and control the lighting, camera color calibration, and other factors to ensure the best results, or (b) settle down for a career-long journey into a topic that gets deeper the more you look at it, or (c) wish you could be back working with grayscale because at least then the problems seem solvable.
6.  Speed. With modern computers, and with parallel programming, it's possible to perform simple pixel-by-pixel processing of a megapixel image in milliseconds. Facial recognition, OCR, content-aware resizing, mean shift segmentation, and other tasks can take much longer than that. Whatever processing time is required to manipulate the image or squeeze some useful data from it, most customers/users want it to go faster. If we make the hand-wavy assumption that processing a three-channel color image takes three times as long as processing a grayscale image--or maybe four times as long, since we may create a separate luminance channel--then that's not a big deal if we're processing video images on the fly and each frame can be processed in less than 1/30th or 1/25th of a second. But if we're analyzing thousands of images from a database, it's great if we can save ourselves processing time by resizing images, analyzing only portions of images, and/or eliminating color channels we don't need. Cutting processing time by a factor of three to four can mean the difference between running an 8-hour overnight test that ends before you get back to work, and having your computer's processors pegged for 24 hours straight.

Of all these, I'll emphasize the first two: make the image simpler, and reduce the amount of code you have to write.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-24T21:12:00.360

我不同意灰度图像总是比彩色图像更好的暗示。这取决于处理的技术和总体目标。例如，如果您想计算水果盘图像中的香蕉数量，那么当您拥有彩色图像时，分割会容易得多！

由于用于获取它们的测量设备，许多图像必须是灰度的。想想电子显微镜。它正在测量不同空间点的电子束强度。AFM 在拓扑上测量样品上各个点的共振振动量。在这两种情况下，这些工具都返回一个奇异值——一个强度，因此它们隐含地创建了一个灰度图像。

对于基于亮度的图像处理技术，它们通常可以充分应用于整体亮度（灰度）；但是，在许多情况下，拥有彩色图像是一种优势。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T17:34:50.630

二进制可能太简单了，不能代表图片字符。颜色可能太多并影响处理速度。

因此，选择灰度，它在两端的中间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-28T08:53:10.323

首先开始图像处理，无论是灰度图像还是彩色图像，最好专注于我们正在应用的应用程序。除非和其他情况，如果我们随机选择其中之一，则会在我们的结果中产生准确性问题。例如，如果我想处理垃圾桶的图像，我更喜欢选择灰度而不是彩色。因为在 bin 图像中，我只想使用优化的边缘检测来检测 bin 图像的形状。我不关心图像的颜色，但我想正确地看到 bin 图像的矩形形状。

# javascript - 无法在 IE8 中的文本框上设置焦点

> ID：12752171
> 
> 赞同：0
> 
> 时间：2012-10-05T18:40:13.013
> 
> 标签：javascript, jquery, internet-explorer-8

IE8 似乎是我最近存在的祸根。在我的应用程序中创建新步骤时，我试图设置焦点。这是我的代码：

```
$(this).stepField('action_description').focus(); 
```

这适用于我测试过的所有其他浏览器（Firefox、Chrome、Safari）。它甚至适用于 IE9，但不适用于 IE8。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:44:23.633

在 ie8 中工作：

```
 setTimeout(function() {
        $('#myElement').focus();
    }, 10); 
```

* * *

SO来源： [jQuery focus() 有时在 IE8 中不起作用](https://stackoverflow.com/questions/1326993/jquery-focus-sometimes-not-working-in-ie8)

MS 记录的问题：http: [//support.microsoft.com/kb/979954](http://support.microsoft.com/kb/979954)

# facebook - 第三方网站上的 facebook 登录表单

> ID：12752173
> 
> 赞同：0
> 
> 时间：2012-10-05T18:40:17.103
> 
> 标签：facebook, oauth, facebook-login

Facebook 被我公司的防火墙阻止，但我想开发一个应用程序，员工可以在其中单击我们将其发送到他们的电子邮件的链接，并提供对其 Facebook 帐户和更新的访问权限。防火墙阻止了 facebook.com，所以我不能让用户在 facebook.com url 上输入他们的用户名和密码。我可以让用户在应用程序登录并获得访问权限的内部网站上输入他们的用户名和密码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:14:53.790

获取用户密码并使用它以该用户身份登录，这违背了 oauth 的目的。oauth 旨在让用户永远不必向您的应用透露他们的密码，但仍然能够为您的应用提供他们自己的一些 Facebook 数据。这样，只有用户选择共享的 facebook 数据可用于您的应用程序。用户也可以选择允许您的应用代表他们发布，[请参阅此处](https://developers.facebook.com/docs/publishing/)了解详细信息。

我的建议是让用户从工作网络（facbook.com url 可用）外部验证您的应用程序。这样，您仍然可以代表他们发帖，并且您的应用程序可以从他们的个人资料中获取某些信息以转发给他们，而您无需知道他们的密码。

# crash - VS2012用字节数组加载资源文件崩溃

> ID：12752178
> 
> 赞同：0
> 
> 时间：2012-10-05T18:40:37.057
> 
> 标签：crash, bytearray, visual-studio-2012, unhandled-exception, resource-editor

我曾经使用 VS2010，它从资源文件加载 System.Byte[]（字节数组）没有问题，但是现在当我用 Visual Studio 2012（VS2012）打开同一个资源文件时崩溃。

这是从 Resources.resx 文件复制的格式：

```
 <data name="BYTEARRAY_1" type="System.Byte[], mscorlib">
<value>
    e1xydGYxXGFuc2lcYW5zaWNwZzEyNTJcZGVmZjBcZGVmb
    c1xmcHJxMlxmY2hhcnNldDAgQXJpYWw7fXtcZjFcZnJvb
    ...
    NCAqKioqKioqKioqKioqKioqKioqKioqKioqKipccGFy 
```

我的问题是出了什么问题，我该如何解决？现在正确的格式是什么？

第二个问题是如何将新的字节数组添加到资源文件中。我看到了插入图像、字符串、文件和图标的能力，而不是字节数组。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:40:45.840

我采取的解决方案是重新编码并简单地将文件作为资源插入。作为资源的文件可以作为字节数组加载。这是一些工作，但至少文件更容易维护。

Microsoft 仍然有一个错误，他们在 Visual Studio 2012 (VS2012) 中引入了该错误，但他们的错误实际上对我很有帮助。

# dialog - CKEditor 3 对话框定位

> ID：12752180
> 
> 赞同：4
> 
> 时间：2012-10-05T18:40:42.907
> 
> 标签：dialog, position, ckeditor

我已经检查并尝试了这里发布的方法来设置 CKEditor 对话框的弹出位置：

[以编程方式设置 CKEditor 对话框的位置](https://stackoverflow.com/questions/3407896/programatically-set-the-position-of-ckeditors-dialogs)

这似乎已被弃用或不完整。尝试对“链接”对话框执行此操作时，对话框格式不正确，好像此 onShow 定义替换了默认操作而不是添加到默认操作。有什么建议可以更改此代码或使用新方法将链接对话框放置在更靠近菜单栏的位置吗？

```
CKEDITOR.on('dialogDefinition', function(e) {
   var dialogDefinition = e.data.definition;

   dialogDefinition.onShow = function() {
       this.move(200, 100);
   }
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:28:11.483

你是对的。您的代码正在覆盖基本`onShow`定义。

您所要做的只是保存一个默认值 (generic) `onShow`，然后覆盖它，以便调用保存的那个并最终执行您的代码：

```
CKEDITOR.on( 'dialogDefinition', function( event ) {
    var dialogDefinition = event.data.definition,
        genericOnShow = dialogDefinition.onShow;

    dialogDefinition.onShow = function() {
        genericOnShow.apply( this );
        this.move( 10, 10 );
        // ...or anything you want ;)
    }
}); 
```

瞧！

PS。[请记住始终使用apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)或[call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)传递上下文。

# ios - iOS 地图：仅在地图单击时取消选择注释

> ID：12752188
> 
> 赞同：1
> 
> 时间：2012-10-05T18:41:28.940
> 
> 标签：ios, mkmapview, uigesturerecognizer, mkannotation

我有带有注释的地图以及周围的一些按钮和视图。我正在使用 didSelectAnnotationView 和 didDeelectAnnotationView 但只要单击屏幕上的任何内容（包括我的按钮），似乎都会调用取消选择。有没有办法只在地图上单击而不是按钮或其他地方时才触发取消选择？

# oracle - 在 Oracle RAC 中依赖时间戳而不是序列

> ID：12752192
> 
> 赞同：0
> 
> 时间：2012-10-05T18:41:43.060
> 
> 标签：oracle, timestamp

[Oracle RAC 和序列](https://stackoverflow.com/questions/4866959/oracle-rac-and-sequences)

我已阅读此答案。我还有一个问题。

*当一个节点要求时间戳时（比如在 GMT 中，并且节点处于不同的时区），这个节点是否需要在每次需要保存时向 node-master 询问时间戳？* 我想知道它是否确实询问了主节点，那么使用序列与时间戳没有任何优势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:02:35.507

I am not sure, about your intentions, but sequence is granted to be unique. Not ordered, but unique.

That is the main advantage (I would rather say purpose) of sequence over timestamp.

# .htaccess - 如何在 htaccess 上使用 HTTP_REFERER 进行重定向

> ID：12752196
> 
> 赞同：0
> 
> 时间：2012-10-05T18:42:02.050
> 
> 标签：.htaccess

我做了我的研究，但我仍然无法完成这项工作......

我要做的就是将所有传入流量从另一个网页上的特定链接重定向到我选择的页面......

```
Options +FollowSymLinks
RewriteCond %{HTTP_REFERER} http://theotherwebsite.qc.ca/ [NC]
RewriteRule ^http://www.cnn.com$ [L] 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:55:25.070

1.  RewriteCond 需要一个正则表达式

    `RewriteCond %{HTTP_REFERER} ^http://theotherwebsite\.qc\.ca/ [NC]`

2.  RewriteRule 需要一个正则表达式什么应该重定向和目标

    `RewriteRule ^(.*) http://www.cnn.com [L]`

# .net-4.0 - foreach 是使用 BlockingCollection 的唯一方法吗 在 C# 中？

> ID：12752198
> 
> 赞同：4
> 
> 时间：2012-10-05T18:42:07.947
> 
> 标签：.net-4.0, task-parallel-library, blockingcollection

我现在开始与 TPL 合作。我在[这个视频](http://www.youtube.com/watch?v=r1FbKiHYHcw#t=1441s)中看到了一个使用 TPL 的简单版本的生产者/消费者模型。

这是问题所在：

以下代码：

```
BlockingCollection<Double> bc = new BlockingCollection<Double>(100);
IEnumerable<Double> d = bc.GetConsumingEnumerable(); 
```

返回`IEnumerable<Double>`可以使用 foreach 迭代（并自动使用）的：

```
foreach (var item in d)
{
    // do anything with item
    // in the end of this foreach,
    // will there be any items left in d or bc? Why?
} 
```

我的问题是：

1.  如果我得到`IEnumerator<Double> dEnum = d.GetEnumerator()`from （例如，用循环`d`迭代）也会消耗列表吗？（我的回答：我不这么认为，因为 the 与没有*联系*，如果你明白我的意思的话。所以它会消耗，但不会，甚至不会）`d``while``d.MoveNext()``dEnum`*`d``dEnum``d``bc`*
**   我可以以循环以外的方式循环`bc`（或） ，消耗物品吗？（循环比循环快得多，我担心科学计算问题的性能问题）`d``foreach``while``foreach`*   在类型中究竟*消耗*`BlockingCollection<T>`是什么意思？*

 *例如，代码：

```
IEnumerator<Double> dEnum = d.GetEnumerator();
while (dEnum.MoveNext())
{
    // do the same with dEnum.Current as
    // I would with item in the foreach above...
} 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:45:36.013

没有“性能问题” `foreach`。`foreach`与直接使用循环相比，直接使用枚举器不太可能给您带来任何可衡量的性能改进。

话虽如此，[`GetConsumingEnumerable()`](http://msdn.microsoft.com/en-us/library/dd287186.aspx)返回一个标准`IEnumerable<T>`，因此您可以选择任何方式枚举它。`IEnumerator<T>`直接通过它获取和枚举仍然会以同样的方式工作。

请注意，如果您不想使用`GetConsumingEnumerable()`，可以直接使用[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)。默认情况下，`BlockingCollection<T>`包装 a `ConcurrentQueue<T>`，实际上只是提供了一个更简单的 API ( `GetConsumingEnumerable()`) 来使 Producer/Consumer 场景更易于编写。直接使用 a`ConcurrentQueue<T>`将更接近于使用`BlockingCollection<T>`而不使用可枚举。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T18:46:14.247

> 如果我得到`IEnumerator<Double> dEnum = d.GetEnumerator()`from d （例如，用 while 循环遍历 d ） d.MoveNext() 也会消耗列表吗？

绝对地。`foreach`无论如何，这就是循环要做的所有事情。

> 我可以以除 foreach 循环之外的方式循环 bc（或 d），消耗这些项目吗？（while 循环比 foreach 循环快得多，我担心科学计算问题的性能问题）

如果您的`while`循环速度更快，则表明您做错了什么。它们应该完全相同 - 除了`foreach`循环也会处理迭代器，你应该这样做......

如果您可以发布一个简短但完整的程序来证明这种差异，我们可以更详细地查看它。

另一种方法是使用[`Take`](http://msdn.microsoft.com/en-us/library/dd287085.aspx)（和类似的方法）。

> BlockingCollection 类型中的准确消费是什么意思？

有效地“从集合中删除下一个项目”。*

# python - 高效使用 Python 列表推导

> ID：12752208
> 
> 赞同：1
> 
> 时间：2012-10-05T18:42:50.833
> 
> 标签：python, list-comprehension

我有一个可能很长的 Python 对象列表。在特定时间，我对列表中具有特定属性的所有元素感兴趣，例如`flag`，评估为 False。为此，我一直在使用列表理解，如下所示：

```
objList = list()
# ... populate list
[x for x in objList if not x.flag] 
```

这似乎运作良好。形成子列表后，我可能需要执行一些不同的操作：

1.  下标子列表以获取 index 处的元素`ind`。
2.  计算子列表的长度（即具有 的元素的数量`flag == False`）。
3.  在子列表中搜索特定对象的第一个实例（即使用列表的`.index()`方法）。

我已经使用简单的方法实现了这些，即形成子列表，然后使用它的方法来获取我想要的数据。我想知道是否有更有效的方法来解决这些问题。＃1和＃3至少看起来可以优化，因为在＃1中我只需要子列表的第一个`ind + 1`匹配元素，不一定是整个结果集，而在＃3中我只需要搜索子列表直到我找到一个匹配的元素。

有没有一种好的 Pythonic 方式来做到这一点？我猜我可能能够以`()`某种方式使用语法来获取生成器，而不是创建整个列表，但我还没有找到正确的方法。我显然可以手动编写循环，但我正在寻找与基于理解的方法一样优雅的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:51:30.493

如果您需要多次执行这些操作中的任何一个，其他方法的开销会更高，列表是最好的方法。它也可能是最清晰的，所以如果内存不是问题，那么我建议直接使用它。

如果内存/速度是一个问题，那么还有其他选择 - 请注意，速度方面，这些实际上可能会更慢，具体取决于您的软件的常见情况。

对于您的场景：

```
#value = sublist[n]
value = nth(x for x in objList if not x.flag, n)

#value = len(sublist)
value = sum(not x.flag for x in objList)

#value = sublist.index(target)
value = next(dropwhile(lambda x: x != target, (x for x in objList if not x.flag))) 
```

使用[`itertools.dropwhile()`](http://docs.python.org/py3k/library/itertools.html#itertools.dropwhile)和来自 itertools 文档[的`nth()`配方。](http://docs.python.org/py3k/library/itertools.html#itertools-recipes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:01:51.020

我假设你可能会做这三件事中的任何一件，而且你可能会做不止一次。

在这种情况下，您想要的基本上是编写一个懒惰评估的列表类。它将保留两条数据，一个评估项目的*真实* `list`缓存，以及其余数据的生成器。然后你可以这样做`ll[10]`，它会评估到第 10 个项目，`ll.index('spam')`它会评估直到它找到`'spam'`，然后`len(ll)`它会评估列表的其余部分，同时将它看到的内容缓存在真实列表中，所以什么都不做不止一次。

构建它看起来像这样：

```
LazyList(x for x in obj_list if not x.flag) 
```

但是在您真正开始使用它之前，实际上不会计算任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:17:10.000

由于您评论说您*可以*`objList`更改，如果您也不需要索引或搜索 objList 本身，那么您最好只存储两个不同的列表，一个带有，一个带有。然后您可以直接使用第二个列表，而不是每次都使用列表推导来构造它。*`.flag = True``.flag = False`*

 *如果这适用于您的情况，它可能是最有效的方法。*

# c++ - C++ 将所需的 DLL 与应用程序链接

> ID：12752213
> 
> 赞同：0
> 
> 时间：2012-10-05T18:43:23.623
> 
> 标签：c++, mingw

> **可能重复：**
> [程序无法启动，因为缺少 libgcc_s_dw2-1.dll](https://stackoverflow.com/questions/4702732/the-program-cant-start-because-libgcc-s-dw2-1-dll-is-missing)
> [程序找不到 libgcc_s_dw2-1.dll](https://stackoverflow.com/questions/4984612/program-cant-find-libgcc-s-dw2-1-dll)

所以我使用 MinGw C++ 编译器（g++），我创建了最简单的应用程序，它只打印“Hello World”。现在我想构建这个应用程序而不是在调试模式下，并在另一台计算机上运行它。我在网上搜索了这个问题，发现有人使用 PEDUMP 来查看程序需要什么 DLL，我使用了它，而简单的 Hello World 只需要 Kernel32.dll（显然位于 system32 中）和我认为是 MinGw 编译器的 libgcc_s_dw2-1.dll。现在我如何将 libgcc_s_dw2-1.dll 链接到我的应用程序？它是在应用程序（exe）内部链接（绑定）还是分离（不确定链接如何工作），如果它是分离的，我如何告诉程序在哪个目录中查看该特定dll？希望我很清楚，因为我不知道如何解释。

```
#include<iostream>

using namespace std;

int main()
{
cout << "Hello";
} 
```

`这是代码@jarekczek

# php - 使用 php 函数 stripslashes 保存数据库

> ID：12752218
> 
> 赞同：1
> 
> 时间：2012-10-05T18:43:48.080
> 
> 标签：php, html, database, sql-update

我在数据库上保存 $p 有一个问题。如果我保存 $_POST["content"] 未修改，它就可以工作。但是如果我用stripslashes修改它是行不通的。我不明白原因。

```
$_POST["content"] is text from function innerHTML
mysql_connect("XX","XX","XX");
mysql_select_db("XX");
$p=stripslashes($_POST["content"]);
mysql_query("UPDATE TEXTO SET VALOR='.$p.' WHERE id=2"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:47:28.197

您不想在更新数据库之前去掉斜杠，您实际上想要做相反的事情。我会推荐

```
$p=mysql_real_escape_string($_POST["content"]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:46:17.990

这是错误所在：

```
mysql_query("UPDATE TEXTO SET VALOR='.$p.' WHERE id=2"); 
```

您不需要`$p`. 你可以这样做：

```
mysql_query("UPDATE TEXTO SET VALOR='$p' WHERE id=2"); 
```

或者：

```
mysql_query("UPDATE TEXTO SET VALOR='".$p."' WHERE id=2"); 
```

字符串周围的双引号将在评估时插入变量。

**然而**

您应该真正考虑远离使用`mysql_*`功能，因为它们已被弃用；要么 要么`PDO`会让`mysqli_*`您编写更安全的代码。

# java - Tomcat6 中的类路径资源（在 Jetty 中工作）

> ID：12752219
> 
> 赞同：1
> 
> 时间：2012-10-05T18:43:51.687
> 
> 标签：java, classpath, tomcat6, maven-3, maven-jetty-plugin

我在迁移到 Maven3 的旧版 Web 应用程序时遇到问题。

我需要从目录结构中位于的 Classpath 中获取一个文件：

> /src/main/resources/com/thinkglish/geoip/GeoIP.dat

当我使用 Maven 构建创建 .war 文件时，我可以确认此 .dat 文件位于（应该位于）以下位置：

> WEB-INF/classes/com/thinkglish/geoip/GeoIP.dat

我正在尝试两种不同的方法来从我的一个类中获取资源，该类实现了*javax.servlet.Filter*：

```
ClassPathResource resource = new ClassPathResource("com/thinkglish/geoip/GeoIp.dat"); 
```

和

```
URL resource = getClass().getResource("/com/thinkglish/geoip/GeoIp.dat"); 
```

如果我使用 Maven 的 Jetty 插件启动应用程序，这两种方式都**可以正常工作**。但是，当我在 Tomcat 中部署应用程序并启动服务器时，找不到资源。

在第一种情况下，我得到 a `java.io.FileNotFoundException: class path resource [com/thinkglish/geoip/GeoIp.dat] cannot be resolved to URL because it does not exist`，在第二种情况下，资源是`null`.

关于这一切的一个奇怪的事情是，如果我使用一种方法或另一种方法试图从类路径（例如`com/thinkglish/struts/i18n/MessageResources.properties`或`com/thinkglish/filter/LanguageFilter.class`）获取另一个资源，它可以正常工作。

你对此有任何猜测吗？.dat 扩展名是否可能与此有关？

* * *

# 已编辑 - 更多数据！

我在 .dat 文件所在的完全相同的目录中添加了一个新的 .properties 模拟文件：

> /src/main/resources/com/thinkglish/geoip/mock.properties

我试图在 Tomcat6 中获取它并且**它有效**！

```
ClassPathResource resource = new ClassPathResource("com/thinkglish/geoip/mock.properties"); 
```

我开始认为我需要在配置方面做一些其他事情，以使 Tomcat6 接受 .dat 文件作为类路径资源。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:52:37.710

以下应该工作：

```
String classpathLocation = "com/thinkglish/geoip/GeoIp.dat";
URL classpathResource = Thread.currentThread().getContextClassLoader().getResource(classpathLocation);
// Or:
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream(classpathLocation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:37:12.127

我可能在这里完全看错了树...但是您检查过 GeoIP.dat / GeoIp.dat 的大写吗？Tomcat 是否在区分大小写的操作系统上运行？

# c++ - 如何创建 C++ 模板以最佳方式传递值？

> ID：12752220
> 
> 赞同：6
> 
> 时间：2012-10-05T18:43:54.467
> 
> 标签：c++, templates

我似乎记得我使用类型的大小来选择参数的值传递或引用传递。

就像是：

```
void fun( check<A> a ){
    ...
} 
```

生成或：

```
void fun( A a ){
    ...
} 
```

或者

```
void fun( A & a ){
    ...
} 
```

取决于类型 A 的大小和编译应用程序的架构。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T19:02:42.003

在 C++11 中，您可以使用[`std::conditional`](http://en.cppreference.com/w/cpp/types/conditional)：

```
#include <type_traits>

class A { ... };

typedef std::conditional<
   std::is_trivially_copyable<A>::value && sizeof(A) <= sizeof(int),
   A, const A&>::type AParam;

// Direct usage
void f(AParam param);

// Wrap into template class
template <typename T> struct check:
   std::conditional<std::is_arithmetic<T>::value, T, const T&> {};

void f(check<A>::type param); 
```

对于 C++03 编译器，您可以使用 Boost implementation - [Boost.TypeTraits library](http://www.boost.org/libs/type_traits/)。

正如@sehe 提到的，还有正确实现所需功能的[Boost.CallTraits 库](http://www.boost.org/libs/utility/call_traits.htm)：

```
#include <boost/call_traits.hpp>

class A { ... };

void f(boost::call_traits<A>::param_type param); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T18:59:16.543

你所描述的并不*直接*存在（至少，不是*标准*的）

**编辑**发现 OP 可能指的是什么：

## 0\. 提升[通话特性](http://www.boost.org/doc/libs/1_51_0/libs/utility/call_traits.htm)

`call_traits<T>::param_type`可能是 Op 的想法/记忆：

```
template<typename T> 
   using check = typename boost::call_traits<T>::param_type;

void f(check<A> param); 
```

> *定义一个类型，表示将 T 类型的参数传递给函数的“最佳”方式。*
> 
> **例子**
> 
> 下表显示了 call_traits 对各种类型的影响，该表假定编译器支持部分特化：如果不支持，则所有类型的行为方式都与“myclass”的条目相同，并且不能使用 call_traits使用引用或数组类型。 ![在此处输入图像描述](../Images/884df87fd317c56af2fb6c3476c8b077.png)

您可能指的是~~两三~~ 件事，AFAICT *：*

### 1.`rvalue`参考资料

我可以想象你的意思是你可以优化移动语义。例如：

```
struct Demo
{
     Demo(std::string&& tomove) : _s(std::move(tomove)) { }
   private:
     std::string _s;
}; 
```

这边走，

```
 std::string a_very_large_string;
 Demo moving(std::move(a_very_large_string)); // prevents a copy 
```

* * *

### 2.完美转发：

完美转发与适用于*一般*情况的原则相同：

```
#include <tuple>
#include <string>
#include <vector>

typedef unsigned int uint;

template <typename... T>
void AnotherDemo(T... args)
{
    std::tuple<T...> perfect(std::forward<T>(args)...); // optimal

    // more code using perfect, passing it by reference etc.
}

int main(int argc, const char *argv[])
{
    AnotherDemo(std::string("moved")); // moved
    AnotherDemo(42);                   // copied

    std::vector<double> v { 1,2,3 };
    AnotherDemo(v);                    // copied
    AnotherDemo(std::move(v));         // moved
} 
```

### 3.元编程：

基于@Rost 的回答，您可以使用元编程来实现这一点：

例如使用*模板别名*：

```
#include <type_traits>

template<typename T> 
   using check = typename boost::call_traits<T>::param_type;

void f(check<A> param); 
```

# javascript - iframe 与 applet 上的 allowtransparency

> ID：12752222
> 
> 赞同：1
> 
> 时间：2012-10-05T18:44:03.827
> 
> 标签：javascript, debugging, iframe, applet, transparency

我制作了一个小程序并在其上放置了一个带有 allowtransparency 的 iframe。

但我无法单击小程序上的任何位置，因为 iframe 正在“阻止”它。但这不应该是因为allowtransprency？？？该怎么办？？？

```
 <div id="content">
                <div class="humans">
                    <iframe allowTransparency="true" class="humans-frame" id="qcontent" src="inner.php" width="760"
                    height="582" frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0"
                     scrolling="no" style="background:transparent"></iframe>
                    <div class="humans-box">
                        <applet  allowtransparency="true" id="applet" code="main.AvatarClient.class" archive="AvatarClient_40.jar"
                        name="Chat" width="760" height="582" scriptable="true" MAYSCRIPT="true">
                            <param name="cache_option" value="NO">
                            <param name="wmode" value="transparent">
                            <param name="localization" value="locDK/"></param>
                            <param name='userName' value='lotta' />
                            <param name='password' value='test1234' />
                        </applet>
                    </div>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T17:58:48.850

与其`allowtransparency`在 上使用，不如在不相关的问题中`iframe`使用`clip`对元素进行分层：

*   [CSS3 IE9点击通过伪元素？](https://stackoverflow.com/questions/11868360/css3-ie9-click-through-pseudo-element/12771673#12771673)

# algorithm - 如何在给定的文本中找到匹配的括号或大括号的位置？

> ID：12752225
> 
> 赞同：32
> 
> 时间：2012-10-05T18:44:11.720
> 
> 标签：algorithm

许多文本编辑器和 IDE 都有一个功能，当光标放在其中一对的开始或结束字符上时，会突出显示匹配的括号、方括号或花括号。

给定文本文件中左括号或右括号的位置，使用什么算法来查找匹配括号的位置？请记住，这些字符可以嵌套，因此只需向前或向后扫描文本，直到找到相反的字符是不够的。

**例子：**

我最近在用 Java 编写[Brainf*ck](http://en.wikipedia.org/wiki/Brainfuck)解释器时遇到了这个问题。`[`并且`]`在该语言中类似于 while 循环，并且可以嵌套。解释器需要根据数据指针的值找到匹配的`[`或`]`依赖的值。有关嵌套的说明，请参见[ROT13 示例代码](http://en.wikipedia.org/wiki/Brainfuck#ROT13)。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-05T18:44:11.720

给定开括号在字符数组中的位置，有一个简单的算法使用计数器来查找匹配的右括号。

*   将计数器初始化为 1。
*   向前循环（向右）遍历文本。
    *   如果遇到另一个左括号，则递增计数器。
    *   如果遇到右括号，则递减计数器。
*   当计数器达到零时，您已找到匹配的右括号。

在代码中，这看起来像：

```
public int findClosingParen(char[] text, int openPos) {
    int closePos = openPos;
    int counter = 1;
    while (counter > 0) {
        char c = text[++closePos];
        if (c == '(') {
            counter++;
        }
        else if (c == ')') {
            counter--;
        }
    }
    return closePos;
} 
```

在给定右括号的情况下，查找匹配的左括号位置的算法是相反的。

*   将计数器初始化为 1。
*   向后（向左）循环遍历文本。
    *   如果遇到左括号，则递减计数器。
    *   如果遇到右括号，则递增计数器。
*   当计数器达到零时，您已找到匹配的左括号。

在代码中：

```
public int findOpenParen(char[] text, int closePos) {
    int openPos = closePos;
    int counter = 1;
    while (counter > 0) {
        char c = text[--openPos];
        if (c == '(') {
            counter--;
        }
        else if (c == ')') {
            counter++;
        }
    }
    return openPos;
} 
```

**注意：**上面的两个例子都假设括号是平衡的，所以没有进行数组边界检查。一个真正的实现会检查你没有跑出数组的末尾，如果你这样做了，就会抛出一个异常（或返回一个错误代码），表明括号在输入文本中是不平衡的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-06T15:12:53.097

```
private String GetJsonFromString(String source, String tagName)
    {
        int tagIndex = source.IndexOf(tagName);
        if (tagIndex < 0) return "";
        string rightSource = source.Substring(tagIndex).Trim();

        int openBrackeIndex = rightSource.IndexOf("{");
        if (openBrackeIndex < 0) return "";
        rightSource = rightSource.Substring(openBrackeIndex).Trim();

        int closePos = 0;
        int counter = 1;
        while (counter > 0)
        {
            char c = rightSource.ToCharArray()[++closePos];
            if (c == '{')
            {
                counter++;
            }
            else if (c == '}')
            {
                counter--;
            }
        }
        return rightSource.Substring(0, closePos + 1);
    } 
```

# entity-framework - 实体框架代码优先 - 使用现有的空数据库

> ID：12752232
> 
> 赞同：1
> 
> 时间：2012-10-05T18:44:31.143
> 
> 标签：entity-framework, entity-framework-4.1

在 EF Codefirst 5.0 上工作，在部署时我们创建了空数据库以创建用户名和权限级别设置，因为在数据库服务器中，该用户仅特定于该数据库。

所以我们完成了上述步骤并尝试运行应用程序，它抛出异常，因为它不是由 EF 代码首先创建的，有什么解决方案可以处理这种情况？

对此的帮助真的很感激。

错误：无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性。

# sql - SQL 在 concat 语句之间打印一个空格

> ID：12752234
> 
> 赞同：9
> 
> 时间：2012-10-05T18:44:50.500
> 
> 标签：sql, concatenation

将两列连接在一起，只希望它们在列中一起显示，两个数字之间有一个空格。它不断地将两个数字相加。一个是 bigint，另一个是 smallint。最终会显示在 SSRS 报告中，但现在只是使用 SQL 查询数据

```
 (NBR +''+ ACCT_NBR) as acct, 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-05T18:47:02.760

尽管您没有提到数据库，但请尝试

MySQL

```
concat(NBR,' ',ACCT_NBR) as acct 
```

SQL 服务器

```
CAST(NBR AS VARCHAR)+' '+CAST(ACCT_NBR AS VARCHAR) as acct 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T18:51:33.203

您没有提及您使用的是哪种 SQL，但根据情况，您可能需要先将值转换为字符串。对于 SQL 服务器...

```
(Cast(NBR as varchar(20)) + ' ' + Cast(ACCT_NBR as varchar(20))) as acct, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-08T17:03:13.957

我知道这篇文章已经回答并且是正确的。但是想发布以下答案，因为从 SQL Server 2017 开始，这太容易了，将来有人可能会觉得这很有帮助。

```
CONCAT_WS(CHAR(10),Cast(NBR as varchar(20)) ,Cast(ACCT_NBR as varchar(20))) as acct 
```

CHAR(10) 可以用于 SQL SERVER 中的空间。您可以将 CHAR(10) 替换为您喜欢的任何分隔符。例如，

```
CONCAT_WS(',',Cast(NBR as varchar(20)) ,Cast(ACCT_NBR as varchar(20))) as acct 
```

上面的查询将在要连接的每个字符串之间添加分隔符“，”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T18:10:59.057

如果它是 Oracle 数据库，请尝试

```
NBR || ' ' || ACCT_NBR as acct 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-22T09:27:37.603

```
Stuff(Coalesce(', ' + [Address1], '') + Coalesce(', ' + [Address2], '') + Coalesce(', ' + [City], '') + Coalesce(', ' + [State], '') + Coalesce(', ' + [Country], '') +Coalesce('-' + [Zip], ''), 1, 1, '') AS [Address] FROM Customers 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-06T03:40:45.137

我知道我迟到了 7 年，但我觉得我应该试一试。

`(NBR +space(5) + ACCT_NBR) as acct`

这将在 2 个连接项之间添加 5 个空格。我如何测试的示例如下：

```
select
+ N'(Contactname: '+ contactname + space(5)  + N'(Company_Name: ' + companyname + N')' + N'(Contact_Title: ' + contacttitle + N')'
from Sales.Customers 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-04-14T23:27:38.320

在 Teradata SQL 中，您可以使用以下内容。它总是会拉到最后 3 天。

```
WHERE create_ts BETWEEN  (DATE -3 || ' ' || '00:00:00') AND (DATE -1 || ' ' || '23:59:59') 
```

# install4j - 是否可以在 install4j 文件之间共享脚本？

> ID：12752235
> 
> 赞同：2
> 
> 时间：2012-10-05T18:44:50.970
> 
> 标签：install4j

如果我有两个不同的 install4j 文件需要相同的复杂脚本，有没有办法在两个文件之间共享该脚本，或者复制和粘贴复制是唯一的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:50:49.060

您可以使用合并的项目来重用屏幕和操作及其配置的脚本。

在 General Settings->Merged Projects 下，添加一个具有“运行脚本”操作的项目，其中包含脚本。然后，您可以在 Installer->Screens & Actions 下添加指向该操作的链接。

# javascript - 从 WebMethod 和 sammy.js 返回 JSON 数据

> ID：12752239
> 
> 赞同：2
> 
> 时间：2012-10-05T18:44:57.107
> 
> 标签：javascript, sammy.js

我正在尝试在[此处遵循单页应用程序示例](http://www.bluelemoncode.com/post/2012/05/17/Single-page-application-in-aspnet-using-Sammyjs.aspx)

在应该解析 JSON 的地方出现错误：SyntaxError: JSON.parse: unexpected character if I leave out dataType: 'json' If I put in dataTyp: 'json', then no errors, but json is not returned and我的模板没有填写。

我放了一个gridview，看看我的列表是否正在返回......确实如此。

我已经加载了 jquery、sammy.js、json2.js 和 sammy.template.js..all 最新和最好的。

我知道这是一个差异网站上的示例应用程序，我感谢你们的时间。我只是喜欢关注和理解，因为 SPA 应用程序令人兴奋。

javascript:

```
$(document).ready(function () {
    //alert('Jquery has loaded');

    var loadOptions = { type: 'get', dataType: 'json', cache: false };
    var app = $.sammy('#sammyDiv', function () {
        this.use('Template');
        this.use('Session');
        this.around(function (callback) {
            var context = this;
            this.load('Default.aspx/GetEmployees', { cache: false })  // loadOptions ) // { dataType: 'json', cache: false })

                    .then(function (items) {

                        context.items = JSON.parse(items).d;   // browser parser... I believe it fails right here
                        //context.items = $.parseJSON(items).d;  //jQuery handling
                        //alert(context.items);
                        //context.items = JSON.stringify(items);
                    })
                    .then(callback);

        }); 
```

cs代码：

```
 static List<Employees> emps;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            emps = new List<Employees>();
            Employees emp = new Employees("Kedar", "Kulkarni", "0001", "A");
            Employees emp1 = new Employees("ABC", "XYZ", "21211", "B");
            emps.Add(emp);
            emps.Add(emp1);
        }

        /* using foreach method
        foreach (Person person in persons)
            {
                    Response.Write(String.Format("Name : {0} Age : {1} Address : {2} Job : {3}", person.Name, person.Age, person.Address, person.Job));
                    Response.Write("</br>");
            }
         */
        this.GridView1.DataSource = emps;   //for testing to see if my list gets returned
        this.GridView1.DataBind();
    }

    [WebMethod,  ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
    public static List<Employees> GetEmployees()
    {
        return emps;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:49:35.803

终于找到了我的答案：

我取出 dataType: 'json' 并替换为下面。一切都很好。

var loadOptions = { type: 'get', cache: false, contentType: "application/json; charset=utf-8" };

# arrays - 检查 Array 是否按 Log(N) 排序

> ID：12752241
> 
> 赞同：0
> 
> 时间：2012-10-05T18:45:00.793
> 
> 标签：arrays, algorithm

我听说可以使用一些分而治之的算法来检查数组是否在 Log(N) 中排序。我知道的最快方法是 O(N) （只需遍历列表并检查元素是否大于前一个）。

我在网上查了一下，什么都找不到，但我想在放弃之前在这里问问有没有人知道。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T18:47:58.987

要检查数组是否在没有先前知识的情况下排序，您需要至少查看所有元素一次，因此 O(n) 是最小值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:47:57.757

不可能的。您必须查看每个元素。

# matlab - matlab：在一个文件中分离数据集

> ID：12752242
> 
> 赞同：0
> 
> 时间：2012-10-05T18:45:03.173
> 
> 标签：matlab, dataset

我有一个包含任意数量的独立数据集的数据文件；数据分为三列，包含任意数量的行，并将在 MATLAB 中进行处理。第一列包含时间值，另外两列包含相应的数据。这三个集合是串联的，每个集合不一定包含相同数量的行，时间值也不一定在同一时间开始或结束。例如，考虑以下具有三个数据集的矩阵，由最左列中的时间范围确定：

```
0.010    xxx    xxx
0.012    xxx    xxx
0.014    xxx    xxx
0.008    xxx    xxx
0.011    xxx    xxx
0.013    xxx    xxx
0.014    xxx    xxx
0.016    xxx    xxx
0.009    xxx    xxx
0.010    xxx    xxx
0.012    xxx    xxx
0.015    xxx    xxx 
```

其中 xxx 是对本练习不重要的数据值，但它们必须与最左侧列中的相应时间值保持关联。在 MATLAB 中将每个数据集与其他数据集分开的最简单/最有效的方法是什么？也就是说，我想最终将每个集合放在一个单独的变量中：

```
var1
0.010    xxx    xxx
0.012    xxx    xxx
0.014    xxx    xxx

var2
0.008    xxx    xxx
0.011    xxx    xxx
0.013    xxx    xxx
0.014    xxx    xxx
0.016    xxx    xxx

var3
0.009    xxx    xxx
0.010    xxx    xxx
0.012    xxx    xxx
0.015    xxx    xxx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:00:18.263

首先，您实际上并不想要单独的变量。您需要元胞数组，如`var{1}`, `var{2}`, `var{3}`, 或由变量 索引`var{i}`。

其次，在我看来，分离数据集的标准是当从一行到下一行的时间步长变为负数时。那准确吗？如果是这样，那么`diff`会帮助你。要查找边缘值，请使用以下内容：

```
edges = find(diff(x(:,1)) < 0); 
```

现在，`for`在边缘周围添加一个循环，并将适当的范围直接提取到您的元胞数组中。请注意，此示例中只有两个“边”...您的第一组从一个开始并运行到第一个边。您的第二组从 edge+1 开始并运行到 edge2，而您的最后一组从 edge2+1 开始并运行到数组的末尾。

```
starts = [1; edges];
stops  = [edges + 1; length(x)]; 
```

我把剩下的代码留给你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:11:31.383

这是我的尝试：

```
%# read the data
[a,b,c] = textread('data.txt', '%f%s%s');

%# find proper indices to the groups of data
inds = [
    1                   %# include first entry
    find(diff(a)<0)+1   %# add one because diff shrinks the array by 1
    length(a)];         %# include the last entry

%# simply loop over the indices, and assign each range thus defined
%# to an entry in a cell array
A = cell(numel(inds)-1,1);
B = A;
C = A;
for ii = 1:numel(inds)-1
    range = inds(ii) : inds(ii+1)-1;
    A{ii} = a(range);
    B{ii} = b(range);
    C{ii} = c(range);
end 
```

# php - 如果不是搜索结果，请在表单中提交搜索词

> ID：12752243
> 
> 赞同：-3
> 
> 时间：2012-10-05T18:45:06.087
> 
> 标签：php, search, conditional-statements

如果没有结果，我想将搜索词（例如 foo 的含义）提交到表单中

细节：

我有一个带有 if else 条件的搜索功能，如果有搜索结果而不是显示带有“未找到搜索结果”的 else 消息

我想通过一个表单提交来更改“未找到搜索结果”，其中值将是用户尝试查找的任何搜索词。所以...

```
if search result found {
 //display result
} else {
  // auto submit below form if above condition is not true ( means if no search result found )

    <form action="to url" method="post">
    <input name="title" type="text" />
    </form>
} 
```

以上是我用来提交表格的表格。

**编辑：**

这是实际的代码

```
.......

if (count($results))
            $qa_content['title']=qa_lang_html_sub('main/results_for_x', qa_html($inquery));
        else { ?>

            <form id="nosearch" method="POST" action="<?php echo qa_opt('site_url'); ?>ask" class="top-askbox" >
                    <input name="title" type="text" value="<?php echo $inquery; ?>">
            </form>
            <script>$("#nosearch").submit();</script>

        <?php }

....... 
```

这是我工作的部分。实际文件太长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:53:57.500

你可以使用这样的东西

```
 if (is in search ) {
 //display result
} else {
  // auto submit below form if above condition is not true ( means if no search result found )

    <form action="to url" id="main" method="post">
    <input name="title" type="text" value="$value" />
    </form>
<script>$("#main").submit();</script>

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:03:16.930

好的，让我们再试一次。我的论点是，当您可以在 php 中轻松处理表单时，让前端自动发布表单是荒谬的......

```
if (count($results))
    $qa_content['title']=qa_lang_html_sub('main/results_for_x', qa_html($inquery));
else { 
    $url = 'http://whatever.com/your-search-file.php';
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL, $url);
    curl_setopt($ch,CURLOPT_POST, count($_POST));
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($_POST));
    $result = curl_exec($ch);
    curl_close($ch);

    if($results)
    {
        //echo results or do whatever
    }
    else
    {
        // your auto post failed. deal with it
    }
} 
```

假设 cUrl 是您的选择。如果没有，请使用其他人提到的 jquery 选项。

# google-app-engine - 已部署的 GAE 应用程序上的交互式控制台

> ID：12752245
> 
> 赞同：2
> 
> 时间：2012-10-05T18:45:12.300
> 
> 标签：google-app-engine, google-cloud-datastore

当您在本地测试 GAE 应用程序时，可以使用“交互式控制台”在应用程序中运行任意代码。有没有办法为[appengine.google.com](http://appengine.google.com)上部署的 GAE 应用程序执行此操作？

能够在控制台中对实时应用程序执行数据存储操作会很有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T19:18:54.537

你可以让 dev_appserver 控制台在生产环境中可用，在你的 app.yaml 中添加如下内容：

```
- url: /admin/.*
script: google.appengine.ext.admin.application
login: admin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:46:09.230

试试那个 Appstats 游乐场。[https://developers.google.com/appengine/docs/python/tools/appstats](https://developers.google.com/appengine/docs/python/tools/appstats)

# android - 知道一个顶点或一条边，做一个内接圆的等边三角形

> ID：12752249
> 
> 赞同：3
> 
> 时间：2012-10-05T18:45:30.167
> 
> 标签：android, canvas, geometry

我正在学习 Android，现在我正在尝试使用 Canvas 类。

我想画一个内接已知圆的规则（等边）三角形。

我认为一定有比进入三角学、毕达哥拉斯、...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:35:30.893

做三角是我发现的最直接的方法。下面是一个用于在正常“指向上方”方向绘制等边三角形的函数。我在[这里](https://gist.github.com/3843841)发布了一个更复杂的实现，它也处理旋转三角形。

```
private void drawCircumscribedTriangle(Canvas canvas, float circleCenterX, float circleCenterY, float radius, Paint paint) {
    float xOffsetFromCenter = FloatMath.cos((float)Math.PI/6) * radius;
    float yOffsetFromCenter = FloatMath.sin((float)Math.PI/6) * radius;

    canvas.drawLine(circleCenterX, circleCenterY - radius, circleCenterX + xOffsetFromCenter, circleCenterY + yOffsetFromCenter, paint);
    canvas.drawLine(circleCenterX + xOffsetFromCenter, circleCenterY + yOffsetFromCenter, circleCenterX - xOffsetFromCenter, circleCenterY + yOffsetFromCenter, paint);
    canvas.drawLine(circleCenterX - xOffsetFromCenter, circleCenterY + yOffsetFromCenter, circleCenterX, circleCenterY - radius, paint);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:26:16.660

多亏了 Acj，我明白了，但这并不是我想要的，因为我希望它被填充（这是我的错，因为我没有指定它）。

无论如何，我根据自己的需要调整了 Acj 的代码，这里是：

```
private void drawCircumscribedTriangle(Canvas canvas, float circleCenterX, float circleCenterY, float radius, Paint paint) {

        float xOffsetFromCenter = FloatMath.cos((float)Math.PI/6) * radius;
        float yOffsetFromCenter = FloatMath.sin((float)Math.PI/6) * radius;

        Path path = new Path();
        path.setFillType(Path.FillType.EVEN_ODD);

        path.moveTo(circleCenterX, circleCenterY - radius);
        path.lineTo(circleCenterX + xOffsetFromCenter, circleCenterY + yOffsetFromCenter);
        path.lineTo(circleCenterX - xOffsetFromCenter, circleCenterY + yOffsetFromCenter);
        path.lineTo(circleCenterX, circleCenterY - radius);
        path.lineTo(circleCenterX, circleCenterY - radius);
        canvas.drawPath(path, paint);
} 
```

再一次，所有的优点都是为了Acj

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-27T14:34:48.993

自`FloatMath.cos(float)`API 23 以来已弃用，这个对棘手等边问题的答案需要将以下代码行更新为

```
float xOffsetFromCenter =  ((float)Math.PI/6) * radius;
float yOffsetFromCenter =  ((float)Math.PI/6) * radius; 
```

# scheme - 方案二叉搜索树

> ID：12752250
> 
> 赞同：1
> 
> 时间：2012-10-05T18:45:32.123
> 
> 标签：scheme, racket

我已经将辅助函数定义为：

```
;; returns value of node
(define (value node)
  (if (null? node) '()
      (car node)))

;; returns left subtree of node
(define (left node)
  (if (null? node) '()
      (cadr node)))

;; returns right subtree of node
(define (right node)
  (if (null? node) '()
      (caddr node))) 
```

我正在尝试编写一个函数`leaves`，该函数按从左到右的顺序返回一个带有树叶的列表。

```
(define (leaves tree)
    (if (and (?null (left tree)) (?null (right tree)))
        ???
        (leaves (left tree)) (leaves (right tree)))) 
```

但这是我所能得到的

例如： (leaves '(1 (2 () ()) (3 () ()))) 应该评估为 '(2 3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:26:52.793

到目前为止，您`???`需要评估叶子的价值，即。`(value node)`因为它是您迭代的基本情况。此外，您将需要在迭代案例中组合从基本案例返回的值。 `list`当您需要组合多个结果时，通常是第一个尝试的好选择，`cons`通常是我的第二次尝试。接受这些建议，您的`leaves`函数如下所示：

```
(define (leaves tree)
    (if (and (null? (left tree)) (null? (right tree)))
        (value tree)
        (list (leaves (left tree)) (leaves (right tree))))) 
```

其中，当在您的样本上运行时，`(leaves '(1 (2 () ()) (3 () ())))`确实评估为`(2 3)`.

然而; 你还没有完成！我们仅使用 1 级递归进行测试。如果我们做一棵更大的树呢？类似的东西：`(leaves '(1 (2 (4 () ()) (5 () ())) (3 (6 () ()) (7 () ()))))` 运行这个给出`((4 5) (6 7))`. 这些是按正确顺序排列的正确值，但我们有太多的结构，太多的括号。这是您在整个计划生涯中都会遇到的典型问题，所以让我解释一下为什么会发生这种情况，以及如何着手解决这个问题。

如果查看我们`if`表单的两个分支，您会注意到它`(value tree)`返回一个原子，或者在这种情况下返回一个数字。else 分支取两个 of`???`并将其转换为`???`. 我们将多次执行 else 分支——只要我们不在基本情况下。这意味着我们将继续包裹，包裹，包裹到越来越深的列表结构中。所以这就是我们要做的。

让我们在基本情况下返回一个列表，并在递归情况下保持我们的列表平坦。要在我们的基本情况下返回一个列表，它就像 return`(list (value tree))`而不是 just一样简单`(value tree)`。在递归的情况下，我们需要一个函数，它需要 2 个列表并将它们组合起来，而不需要创建更深的列表。这样的功能确实存在 - `append`。那么让我们看看我们的`leaves`函数现在是什么样子的：

```
(define (leaves tree)
        (if (and (null? (left tree)) (null? (right tree)))
            (list (value tree))
            (append (leaves (left tree)) (leaves (right tree))))) 
```

**间奏曲 - 测试用例**

Racket 有一个测试套件库，它的进入门槛非常低，称为[rackunit](http://docs.racket-lang.org/rackunit/quick-start.html)。让我们在文件底部汇总几个快速测试用例。

```
(require rackunit)
;;empty tree
(check-equal? (leaves '()) '())

;;simple balanced tree
(check-equal?
 (leaves '(1 (2 () ()) (3 () ())))
 '(2 3))

;;larger balanced tree
(check-equal?
 (leaves '(1 (2 (4 () ()) (5 () ())) (3 (6 () ()) (7 () ()))))
 '(4 5 6 7))

;;unbalanced tree
(check-equal?
 (leaves '(1 (2 (4 () ()) ()) (3 () ())))
 '(4 3)) 
```

最近，racket 增加了对子模块的支持和对测试子[模块](http://blog.racket-lang.org/2012/06/submodules.html)的特定支持，如果您好奇并想研究它们。

* * *

回到我们的叶子问题。运行我们的测试，我们注意到我们的函数在不平衡的树上表现不佳。`()`当我们有一个只有 1 个叶子的节点时，我们会得到额外的 s。那是因为每当我们在一个不是叶子的节点处时，我们都会遍历左子树和右子树。我们真正需要的是我们的`if`. 我们可以嵌套`if`s，但方案的`cond`形式更有意义。

现在，我们要填写的模板是：

```
(define (leaves tree)
  (cond [(leaf? tree) (...)]
    [(and (has-left? tree) (has-right? tree)) 
     (...)]
    [(has-left? tree) (...)]
    [(has-right? tree) (...)]
    [else (error "should never get here")])) 
```

如果这是家庭作业，我会停在那里，并让您满意地理解和解决剩下的问题。我希望我的解释能给你更多的方向，只是“这里是代码”的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:23:22.137

好吧，这似乎您正在执行[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)，但是如果您有两个孩子（或者只有一个，如果您不想打印只有一个孩子的节点），您不会打印自己。

我的目标是首先解决这个问题，然后改变你的解决方案来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T19:10:23.423

```
(define (list-of-leaves tree)
  (if(leaf? tree)
     (list (node tree))
     (cond((right-branch-only? tree)(list-of-leaves (right-branch tree)))
          ((left-branch-only? tree)(list-of-leaves (left-branch tree)))
          (else(append (list-of-leaves (left-branch tree))
                       (list-of-leaves (right-branch tree))))))) 
```

# iphone - 重新加载自己创建的 UITableViewCell

> ID：12752252
> 
> 赞同：1
> 
> 时间：2012-10-05T18:45:37.227
> 
> 标签：iphone, ios, xcode, uitableview

我有一个自定义 UITableViewcell 应该在使用该代码时加载一个图像：

```
- (void)setImageWithURL:(NSURL *)URL
{
    dispatch_queue_t taskQ = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(taskQ, ^{
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:URL]];
        imageView.image = image;
        NSLog(@"test");
    });
} 
```

它加载图像的速度非常快，所以我得到的响应“测试”非常快，但它需要在 tableView 中加载。此外，如果我选择它加载图像的行。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:56:59.500

只要 setImageWithURL: 被称为 cellForRowAtIndexPath 的效果，那么它应该会如您所愿地显示出来......但是，您需要调用 imageView.image = image; 在主线程上。这适用于所有与 UI 相关的任务。所以你会想要：

```
- (void)setImageWithURL:(NSURL *)URL
{
    dispatch_queue_t taskQ = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(taskQ, ^{
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:URL]];
        dispatch_async(dispatch_get_main_queue(), ^{
            imageView.image = image;
            NSLog(@"test");
        });
    });
} 
```

编辑：

使用 NSOperationQueue。

创建一个操作队列作为视图控制器的成员。

```
 m_operationQueue = [NSOperationQueue new];
    m_operationQueue.maxConcurrentOperationCount = 1 // if you want to load images in order; 
```

确保在视图卸载和表刷新时取消操作

```
 [m_operationQueue cancelAllOperations]; 
```

在 setImageWithURL 中做你的事

```
- (void)setImageWithURL:(NSURL *)URL
{
    [m_operationQueue addOperationWithBlock:^{
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:URL]];
        dispatch_async(dispatch_get_main_queue(), ^{
            imageView.image = image;
            NSLog(@"test");
        });
    }];
} 
```

再次编辑：

抱歉，忘记了 setImage 在您的自定义表格单元格中。您可以：

1) 使其成为您在 +(void)initialize 中初始化的静态对象；单元格的方法 2）通过视图控制器上的类方法使其成为一个静态对象 2）创建一个可用于表格单元格的单例实例

设计偏好取决于您，如果您想要保持一致，则取决于您一直在使用的其他实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:54:04.860

下载完图像后，您应该调用 [tableView reloadData]。

有一个类似的问题有一个接受的答案，但它也有使用[SDWebImage](https://github.com/rs/SDWebImage)的建议。看一看：[如何让 UITableViewCell 图像更新为下载的图像而无需滚动 UITableView](https://stackoverflow.com/questions/7874505/how-to-get-uitableviewcell-images-to-update-to-downloaded-images-without-having)

# grails - 在 jboss 5.1.2 上以 Oracle 11g 作为后端部署 grails 应用程序时出错。

> ID：12752253
> 
> 赞同：0
> 
> 时间：2012-10-05T18:45:42.280
> 
> 标签：grails

下面是我的 datasource.groovy，然后是我得到的错误。任何见解/指导将不胜感激。

```
dataSource {
pooled = true
driverClassName = "oracle.jdbc.driver.OracleDriver"
dialect = "org.hibernate.dialect.Oracle10gDialect"
} 
```

```
hibernate {
cache.use_second_level_cache = true
cache.use_query_cache = false
cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}

// environment specific settings
environments {
development {
dataSource {
dbCreate = "update"
url = "jdbc:oracle:thin:@fcoh1s-z-arlu48.fas.gsa.gov:2500:gtran11g"
username = "username"
password = "password"

}

}
} 
```

**错误**

```
[org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/GWACPriceTool-0.1]] (main) Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'oracle.jdbc.driver.OracleDriver' for connect URL 'jdbc:h2:mem:grailsDB;MVCC=TRUE;LOCK_TIMEOUT=10000'
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:126)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:707)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
at org.codehaus.groovy.grails.commons.spring.DefaultRuntimeSpringConfiguration.getApplicationContext(DefaultRuntimeSpringConfiguration.java:153)
at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:170)
at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:127)
at org.codehaus.groovy.grails.web.context.GrailsConfigUtils.configureWebApplicationContext(GrailsConfigUtils.java:121)
at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:104)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4389)
at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:321)
at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:145)
at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
at org.jboss.web.deployers.WebModule.startModule(WebModule.java:122)
at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
at $Proxy38.start(Unknown Source)
at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:297)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:826)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:556)
at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
at org.jboss.system.ServiceController.start(ServiceController.java:460)
at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55)
at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179)
at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1454)
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1172)
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1193)
at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1113)
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:826)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:556)
at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:789)
at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:699)
at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:403)
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:778)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:543)
at org.jboss.system.server.profileservice.repository.AbstractProfileService.registerProfile(AbstractProfileService.java:308)
at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:256)
at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
at org.jboss.Main.boot(Main.java:221)
at org.jboss.Main$1.run(Main.java:556) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:25:17.903

你用来创建你正在部署的war文件的命令是什么？

如果使用“grails war”，那么这将默认为生产环境。请参阅[http://grails.org/doc/2.1.0/ref/Command%20Line/war.html](http://grails.org/doc/2.1.0/ref/Command%20Line/war.html)。

目前您没有任何生产数据库设置，要使用您的开发数据库进行部署的战争，请使用“grails dev war”命令来创建它。

另一个不使用“grails dev war”的选项是将 -Dgrails.env=development 设置为启动参数。请参阅[http://docs.jboss.org/jbossas/guides/installguide/r1/en/html/start-stop.html](http://docs.jboss.org/jbossas/guides/installguide/r1/en/html/start-stop.html)。这允许您将相同的战争部署到所有环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:09:33.030

看起来数据库 URL 以某种方式没有被正确拾取。检查配置中的拼写错误或其他内容。

`Cannot create JDBC driver of class 'oracle.jdbc.driver.OracleDriver' for connect URL 'jdbc:h2:mem:grailsDB;MVCC=TRUE;LOCK_TIMEOUT=10000'`

# python - Python 方法不在类中运行

> ID：12752258
> 
> 赞同：-1
> 
> 时间：2012-10-05T18:46:07.790
> 
> 标签：python

我是 Python 新手，似乎无法弄清楚为什么 .getRow 方法不运行。我在 dbMain.py 中创建了一个 DBMain 类，我正在使用 pyTest.py 创建 DBMain 对象来运行 getRow。当我在 Eclipse 中运行调试器并且 DBMain 的构造函数运行时，但是当调用 getRow 方法时没有任何反应。

pyTest.py

```
import dbMain

def main():
    db = dbMain.DbMain()
    db.getRow()

if __name__ == '__main__':
    main() 
```

dbMain.py

```
#@PydevCodeAnalysisIgnore
import pyodbc
class DbMain(object):
    cncx = ''
    def __init__(self):
        cnxn = pyodbc.connect(driver='{SQL Server}', 
                              server='server', 
                              database='database', 
                              uid='name', 
                              pwd='pwd')

    def getRow(): 
        cursor = cnxn.cursor()
        cursor.execute("select user_id, user_name from users")
        row = cursor.fetchone()
        return row 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:47:11.663

1.  您不会*从*`getRow`. 也许你想包括类似的东西

    ```
    ...
    return row 
    ```

2.  您的`getRow()`方法未绑定到该类。实例方法的签名应该类似于`getRow(self)`- 第一个参数是实例，它是显式接收的（但在调用时隐式传递`someinstance.method()`）。

要具有功能性，您可能应该将 dbMain 更改为以下内容：

```
#@PydevCodeAnalysisIgnore
import pyodbc
class DbMain(object):
    def __init__(self):
        # make cnxn an attribute of the instance
        self.cnxn = pyodbc.connect(driver='{SQL Server}', server='server', 
            database='database', uid='name', pwd='pwd')

    # receive `self` explicitly
    def getRow(self): 
        cursor = self.cnxn.cursor()
        cursor.execute("select user_id, user_name from users")
        row = cursor.fetchone()
        # actually return something
        return row 
```

进一步阅读：

*   [Python：类和实例属性之间的区别](https://stackoverflow.com/questions/207000/python-difference-between-class-and-instance-attributes)

# jsf - 在 facelet 页面中使用 #{resource} 值表达式时生成两次上下文路径

> ID：12752267
> 
> 赞同：0
> 
> 时间：2012-10-05T18:46:42.150
> 
> 标签：jsf, jsf-2, resources

我正在使用`#{resource['library:file']}`facelets 页面中的表达式来生成一个带有 RichFaces (4.2.2.Final) 工具栏中的图像的 ajaxified 按钮。

```
<h:form>
    <rich:toolbar height="40px">
        <rich:toolbarGroup>
            <a4j:commandButton value="my label" image="#{resource['icons:icon32.gif']}"/>
    </rich:toolbarGroup>
    </rich:toolbar>
</h:form> 
```

为上下文路径生成两次的 a4j:commandButton 生成以下代码。

```
<input type="image" alt="my label" 
    src="/com.test.my.context/com.test.my.context/faces/javax.faces.resource/icon32.gif?ln=icons" 
    value="my label" 
    onclick="RichFaces.ajax(&quot;j_idt73:j_idt76&quot;,event,{&quot;incId&quot;:&quot;1&quot;} );return false;" 
    name="j_idt73:j_idt76" id="j_idt73:j_idt76"> 
```

如果我`<h:graphicImage library="icons" name="icon32.gif"/>`在`rich:toolbarGroup`生成的 URL 内使用是正确的。

此外，我使用 css 包含了图像，`background: url(#{resource['library:file']})`它没有给出我搜索的结果，但它有效！

1.  该表达式是否`#{resource['library:file']}`只允许在 css 文件中使用？
2.  我的代码中的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:23:31.893

根据[JIRA 问题 RF-12523](https://issues.jboss.org/browse/RF-12523)，它已在 4.3.1.Final 中修复。

# c++ - 从 Cascade QML 调用 C++ 函数

> ID：12752268
> 
> 赞同：2
> 
> 时间：2012-10-05T18:46:53.723
> 
> 标签：c++, qml, cascade, blackberry-10

我想从 Cascade QML 调用 C++ 函数

这是计算器QML.cpp

```
// Default empty project template
#include "CalcolatorQML.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>
#include <QDebug>

using namespace bb::cascades;

CalcolatorQML::CalcolatorQML(bb::cascades::Application *app)
: QObject(app)
{
// create scene document from main.qml asset
// set parent to created document to ensure it exists for the whole application lifetime
QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);

// create root object for the UI
AbstractPane *root = qml->createRootObject<AbstractPane>();
// set created root object as a scene
app->setScene(root);
//Container *container = root->findChild<Container*>("myContainer");
}
void CalcolatorQML::injectContainer(){
qDebug("NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN");
} 
```

我声明了这个函数，因为`Q_INVOKABLE void injectContainer();` 这是 CalcatorQML.hpp

```
// Default empty project template
#ifndef CalcolatorQML_HPP_
#define CalcolatorQML_HPP_

#include <QObject>

namespace bb { namespace cascades { class Application; }}

/*!
 * @brief Application pane object
 *
 *Use this object to create and init app UI, to create context objects, to register the new             meta types etc.
 */
class CalcolatorQML : public QObject
{
Q_OBJECT
public:
CalcolatorQML(bb::cascades::Application *app);
virtual ~CalcolatorQML() {}
Q_INVOKABLE void injectContainer();
};

#endif /* CalcolatorQML_HPP_ */ 
```

这是我的main.qml，你可以在b1看到点击这个语句`injection.injectContainer1();`

```
import bb.cascades 1.0

Page {
content: Container {
    Container {
        layout: StackLayout {
        }
        TextField {
            id: textFieldId
        }
        Container {
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            verticalAlignment: VerticalAlignment.Center
            horizontalAlignment: HorizontalAlignment.Center
            Button {
                id: b1
                text: "1"
                onClicked: {
                    injection.injectContainer();
                }
            }
            Button {
                id: b2
                text: "2"
            }
            Button {
                id: b3
                text: "3"
            }
        }
        Container {
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            verticalAlignment: VerticalAlignment.Center
            horizontalAlignment: HorizontalAlignment.Center
            Button {
                id: b4
                text: "4"
            }
            Button {
                id: b5
                text: "5"
            }
            Button {
                id: b6
                text: "6"
            }
        }
        Container {
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            verticalAlignment: VerticalAlignment.Center
            horizontalAlignment: HorizontalAlignment.Center
            Button {
                id: b7
                text: "7"
            }
            Button {
                id: b8
                text: "8"
            }
            Button {
                id: b9
                text: "9"
            }
        }
        Container {
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            verticalAlignment: VerticalAlignment.Center
            horizontalAlignment: HorizontalAlignment.Center
            Button {
                id: b0
                text: "0"
            }
        }
        Container {
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            verticalAlignment: VerticalAlignment.Center
            horizontalAlignment: HorizontalAlignment.Center
            Button {
                id: bPlus
                text: "+"
            }
            Button {
                id: bMult
                text: "*"
            }
            Button {
                id: bEqual
                text: "="
            }
            Button {
                id: bDivide
                text: "/"
            }
            Button {
                id: bMinus
                text: "-"
            }
        }
    }
}
}// end of Page 
```

我的问题是函数`injectContainer`没有被调用 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:18:53.623

在 CalcatorQML.cpp 中，行**前**：

```
AbstractPane *root = qml->createRootObject<AbstractPane>(); 
```

添加：

```
qml->setContextProperty("app", this); 
```

然后在 QML 中的 onClicked 中，尝试：

```
app.injectContainer(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:56:50.420

试试这个

```
AbstractPane *root = qml->createRootObject<AbstractPane>(); 
qml->setContextProperty("root", this); 
```

在 Qml onClick 中写入

```
root.injectContainer(); 
```

# iphone - 我需要什么才能在 iPhone 设备上运行 xCode 应用程序供我个人使用：没有 AppStore、没有商业、没有公开 - 只是个人用途？

> ID：12752269
> 
> 赞同：0
> 
> 时间：2012-10-05T18:46:56.040
> 
> 标签：iphone, xcode

我想知道，在 iPhone 设备上安装我的 xCode 应用程序需要什么？

例如，我构建了 CoolGuitarTuner 应用程序，我想自己使用它并可能与几个朋友分享。

我可以以某种方式将它复制到我的 iPhone 上供我自己使用，而无需任何注册或付款吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:57:07.300

你仍然需要一个 99 美元的开发者帐户。无论您是否列出任何待售应用程序，这都应该是您所需要的。或者你可以越狱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:33:54.047

您可以通过 [iPhone 测试应用程序](https://developer.apple.com/programs/ios/test.html)

[这个博客](http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices)提供了有关如何在您的设备上部署应用程序的详细信息

希望这会帮助你。

# c# - 当我从 C#.net 中的不同变量中删除时，为什么它会从其他变量中删除？

> ID：12752273
> 
> 赞同：1
> 
> 时间：2012-10-05T18:47:19.627
> 
> 标签：c#, asp.net-mvc, linq

我有下面的代码。**如果RecoveryRecords**变量中的数据不在 ValidClaimControl 编号中，我将根据以下条件删除它。

在**RecoveryRecords.Remove(s)**执行该行后，它也将从**记录**变量中删除。我实际上需要来自**记录**变量的数据。

我想知道如何在**记录**变量中保留数据？

```
List<List<Field>> records = new List<List<Field>>();
List<List<Field>> RecoveryRecords = new List<List<Field>>();

//Some Logic here to populate records variable

RecoveryRecords = records;
List<string> validClaimControlNo = new List<string>();

//Some Logic here to populate validClaimControlNo variable

foreach (List<Field> s in RecoveryRecords.ToList())
{
    foreach (Field f in s)
    {
        if (!(validClaimControlNo.Contains(f.Value)))
          RecoveryRecords.Remove(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T18:50:26.240

这条线不符合你的想法，我怀疑：

```
RecoveryRecords = records; 
```

它只是将 的值（对对象`records`的*引用*）复制为 的新值`RecoveryRecords`。这两个变量引用同一个对象。如果您想要一个包含来自 的数据副本的*新列表*`records`，您需要明确地执行此操作，例如

```
RecoveryRecords = new List<List<Field>>(records); 
```

或者

```
RecoveryRecords = records.ToList(); 
```

请注意，即使这也只是列表的浅表副本 - 如果您写道：

```
RecoveryRecords[0].Add(new Field()); 
```

该更改也将在其中可见`records[0]`，因为它们都将引用相同的`List<Field>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T18:49:50.907

通过将元素枚举到新列表中

```
RecoveryRecords = records.ToList(); 
```

（就像你在 foreach 循环中说的那样`RecoveryRecords.ToList()`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T18:50:59.303

替换这两行：

```
List<List<Field>> records = new List<List<Field>>();
List<List<Field>> RecoveryRecords = new List<List<Field>>(records); 
```

并删除此行：

```
RecoveryRecords = records; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T18:51:40.363

这就是为什么：

```
RecoveryRecords = records; 
```

你没有两个变量指向不同的列表，你有两个变量指向同一个列表。

制作列表的副本：

```
RecoveryRecords = new List<List<Field>>(records); 
```

注意：现在您有两个单独的列表，但您应该知道列表中的`List<Field>`项目在两个列表中是相同的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T18:52:45.040

使用这条线：

```
RecoveryRecords = records; 
```

您正在传递`records`to `RecoveryRecords`( *reference* ) 的指针，这意味着`records`列表中的每个更改都在`RecoveryRecords`. 因此，您应该克隆列表，并且可以使用以下代码执行此操作：

```
RecoveryRecords = new List<List<Field>>(records); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T18:56:21.567

您正在使用这行代码浅复制您的记录对象

```
RecoveryRecords = records; 
```

你需要做一个深拷贝

```
RecoveryRecords = new List<List<Field>>(records); 
```

这是许多编程语言的共同主题。维基百科很好地解释了它，[http](http://en.wikipedia.org/wiki/Object_copy) ://en.wikipedia.org/wiki/Object_copy 。

# java - java indexof(String str) 方法复杂度

> ID：12752274
> 
> 赞同：25
> 
> 时间：2012-10-05T18:47:20.773
> 
> 标签：java, algorithm

> **可能重复：**
> [String.indexof() 函数调用的成本/复杂性是多少](https://stackoverflow.com/questions/3562919/what-is-the-cost-complexity-of-a-string-indexof-function-call)

java indexof(String str) 方法的复杂性是什么。我的意思是有像 KMP 这样的字符串匹配算法，它在线性时间内运行。我正在实现一个需要在一个非常大的字符串中搜索大子字符串的系统，所以我可以使用 java indexof(String str) 方法还是应该实现 KMP。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-05T18:48:38.947

Java[实现](http://www.docjar.com/html/api/java/lang/String.java.html)的复杂性`indexOf`是`O(m*n)`where`n`和`m`are 分别是搜索字符串和模式的长度。

提高复杂性的方法是使用例如[Boyer-More](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)算法来智能地跳过比较与模式不匹配的字符串的逻辑部分。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-05T18:53:52.373

java`indexOf`函数复杂度是`O(n*m)`其中n是文本的长度，m是模式的长度
这里是`indexOf`原始代码

```
 /**
     * Returns the index within this string of the first occurrence of the
     * specified substring. The integer returned is the smallest value
     * <i>k</i> such that:
     * <blockquote><pre>
     * this.startsWith(str, <i>k</i>)
     * </pre></blockquote>
     * is <code>true</code>.
     *
     * @param   str   any string.
     * @return  if the string argument occurs as a substring within this
     *          object, then the index of the first character of the first
     *          such substring is returned; if it does not occur as a
     *          substring, <code>-1</code> is returned.
     */
    public int indexOf(String str) {
    return indexOf(str, 0);
    }

    /**
     * Returns the index within this string of the first occurrence of the
     * specified substring, starting at the specified index.  The integer
     * returned is the smallest value <tt>k</tt> for which:
     * <blockquote><pre>
     *     k &gt;= Math.min(fromIndex, this.length()) && this.startsWith(str, k)
     * </pre></blockquote>
     * If no such value of <i>k</i> exists, then -1 is returned.
     *
     * @param   str         the substring for which to search.
     * @param   fromIndex   the index from which to start the search.
     * @return  the index within this string of the first occurrence of the
     *          specified substring, starting at the specified index.
     */
    public int indexOf(String str, int fromIndex) {
        return indexOf(value, offset, count,
                       str.value, str.offset, str.count, fromIndex);
    }

    /**
     * Code shared by String and StringBuffer to do searches. The
     * source is the character array being searched, and the target
     * is the string being searched for.
     *
     * @param   source       the characters being searched.
     * @param   sourceOffset offset of the source string.
     * @param   sourceCount  count of the source string.
     * @param   target       the characters being searched for.
     * @param   targetOffset offset of the target string.
     * @param   targetCount  count of the target string.
     * @param   fromIndex    the index to begin searching from.
     */
    static int indexOf(char[] source, int sourceOffset, int sourceCount,
                       char[] target, int targetOffset, int targetCount,
                       int fromIndex) {
    if (fromIndex >= sourceCount) {
            return (targetCount == 0 ? sourceCount : -1);
    }
        if (fromIndex < 0) {
            fromIndex = 0;
        }
    if (targetCount == 0) {
        return fromIndex;
    }

        char first  = target[targetOffset];
        int max = sourceOffset + (sourceCount - targetCount);

        for (int i = sourceOffset + fromIndex; i <= max; i++) {
            /* Look for first character. */
            if (source[i] != first) {
                while (++i <= max && source[i] != first);
            }

            /* Found first character, now look at the rest of v2 */
            if (i <= max) {
                int j = i + 1;
                int end = j + targetCount - 1;
                for (int k = targetOffset + 1; j < end && source[j] ==
                         target[k]; j++, k++);

                if (j == end) {
                    /* Found whole string. */
                    return i - sourceOffset;
                }
            }
        }
        return -1;
    } 
```

你可以简单地实现`KMP`算法而不使用`indexOf`像这样

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.util.Scanner;

public class Main{
    int failure[];
    int i,j;
    BufferedReader in=new BufferedReader(new InputStreamReader(System.in));
    PrintWriter out=new PrintWriter(System.out);
    String pat="",str="";
    public Main(){
            try{

            int patLength=Integer.parseInt(in.readLine());
            pat=in.readLine();
            str=in.readLine();
            fillFailure(pat,patLength);
            match(str,pat,str.length(),patLength);
            out.println();
            failure=null;}catch(Exception e){}

        out.flush();
    }
    public void fillFailure(String pat,int patLen){
        failure=new int[patLen];
        failure[0]=-1;
        for(i=1;i<patLen;i++){
            j=failure[i-1];
            while(j>=0&&pat.charAt(j+1)!=pat.charAt(i))
                j=failure[j];
            if(pat.charAt(j+1)==pat.charAt(i))
                failure[i]=j+1;
            else
                failure[i]=-1;
        }
    }
    public void match(String str,String pat,int strLen,int patLen){
        i=0;
        j=0;
        while(i<strLen){
            if(str.charAt(i)==pat.charAt(j)){
                i++;
                j++;
                if(j==patLen){
                    out.println(i-j);
                    j=failure[j-1]+1;
                }
            } else if (j==0){
                    i++;
            }else{
                j=failure[j-1]+1;
            }

        }
    }
    public static void main(String[] args) {
        new Main();
    }
} 
```

# .net - WCF：已超出最大字符串内容长度配额 (8192)

> ID：12752277
> 
> 赞同：2
> 
> 时间：2012-10-05T18:47:35.277
> 
> 标签：.net, wcf

好吧，我不知道发生了什么。我在这里和谷歌搜索中找到了一堆帖子，但他们都说几乎相同的事情：更改客户端和服务器中的 maxStringContentLength。我已经这样做了，但我仍然遇到同样的错误。我也尝试过以编程方式更改最大长度，但没有骰子。

服务器上的 Web.config：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="2147483647" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="320" maxStringContentLength="2147483647" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:52826/Service1.svc" binding="basicHttpBinding"
      bindingConfiguration="BasicHttpBinding_IService1"
      contract="ServiceReference1.IService1"
      name="BasicHttpBinding_IService1">        
  </endpoint>
</client>

<behaviors>
  <endpointBehaviors>
    <behavior name="wsServiceBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483646" />
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

在客户端：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:52826/Service1.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
    name="BasicHttpBinding_IService1" />
</client> 
```

我还注意到，当我运行该服务时。生成的配置文件列出 maxStringContentLength = "8192"。我尝试关闭“启动服务时始终重新生成配置文件”选项并直接编辑配置文件以增加最大值，但它仍然不起作用。

--EDIT-- 看来该服务实际上并没有像 Eugune 提到的那样选择配置。我添加了：

```
 <services>
  <service name="Courrier.myService">
    <endpoint address="http://localhost:52826/Service1.svc" binding="basicHttpBinding"
      bindingConfiguration="BasicHttpBinding_IService1"
    contract="ServiceReference1.IService1">
    </endpoint>
  </service>
</services> 
```

但仍然无法正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:08:47.750

当我在客户端看到这个错误时，通常意味着服务抛出了异常。如果您为 Web 服务打开了显示错误，则异常中的堆栈跟踪很容易突破 8192 字符串限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:33:42.450

您确定您确实更改了服务器上的配额吗？在您的“服务器”配置中，您定义了一个具有增加配额的 BasicHttpBinding_IService1 绑定，但随后您只能在 <client> 部分中使用它。

# android - 从 Android 中的 URL 加载时，图像加载较小

> ID：12752278
> 
> 赞同：3
> 
> 时间：2012-10-05T18:47:37.790
> 
> 标签：android, url, imageview

我需要从我的 Android 应用程序中的 URL 加载图像

为此，我在布局中创建了一个 ImageView。以下是图像视图

```
<ImageView
    android:id="@+id/MyImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_gravity="center_horizontal">          
</ImageView> 
```

然后在我的代码中，我使用以下内容在此 ImageView 中加载图像

```
ImageView bmImage = (ImageView)this.findViewById(R.id.MyImage);
String urldisplay = urls[0];
Bitmap mIcon11 = null;
try {
    InputStream in = new java.net.URL(urldisplay).openStream();
    mIcon11 = BitmapFactory.decodeStream(in);
} catch (Exception e) {
    Log.e("Error", e.getMessage());
    e.printStackTrace();
}

bmImage.setImageBitmap(mIcon11); 
```

位于我的 URL 路径上的图像大小为 320 X 50。但很奇怪，当图像显示在 ImageView 中时，大小变得非常小，几乎是宽度和高度的一半

我已经尝试了很多但没有解决方案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:46:01.903

我认为问题在于您正在设置位图像素并期望设备像素

尝试获取屏幕的密度，然后设置宽度/高度，使其相应地拉伸，如下所示：

```
ImageView bmImage = (ImageView)this.findViewById(R.id.MyImage);
String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }

 bmImage.setImageBitmap(mIcon11);
 if(mIcon11 != null){
   int width = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, mIcon11.getWidth(), this.getResources().getDisplayMetrics());
   int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, mIcon11.getHeight(), this.getResources().getDisplayMetrics());

   bmImage.setMinimumWidth(width);
   bmImage.setMinimumHeight(height);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T20:17:37.773

使用此 [图像加载库](https://github.com/nostra13/Android-Universal-Image-Loader) 并确保在 DisplayImageOptions 中包含此配置`imageScaleType(ImageScaleType.EXACTLY_STRETCHED)`

# c++ - 着色器存储缓冲区中的 OpenGL 顶点

> ID：12752279
> 
> 赞同：5
> 
> 时间：2012-10-05T18:47:39.160
> 
> 标签：c++, opengl

我现在正在使用计算着色器开发粒子系统。我把我所有的粒子放在一个着色器存储缓冲区中。一个粒子包含两个顶点，当前位置和前一个位置。

```
struct Particle{
    glm::vec4   _currPosition;
    glm::vec4   _prevPosition;
}; 
```

在调度我的计算着色器后，我想直接从着色器存储缓冲区中绘制所有粒子。所以这就是我所做的：

```
glBindBufferBase(GL_SHADER_STORAGE_BUFFER, 0, shaderStorageBufferID);
_shaderManager->useProgram("computeProg");
glDispatchCompute((_numParticles/WORK_GROUP_SIZE)+1, 1, 1);
glMemoryBarrier(GL_SHADER_STORAGE_BARRIER_BIT);
_shaderManager->useProgram("shaderProg");
glBindBuffer(GL_ARRAY_BUFFER, shaderStorageBufferID);
glVertexPointer(4,GL_FLOAT, sizeof(glm::vec4), (GLvoid*)0);
glEnableClientState(GL_VERTEX_ARRAY);
glDrawArrays(GL_POINTS, 0, _numParticles);
glDisableClientState(GL_VERTEX_ARRAY); 
```

问题是我在屏幕上看到了 _numParticles，但一半是用我的粒子结构的 _prevPosition 属性渲染的。这意味着一个粒子被解释为在屏幕上绘制的两个顶点。但我希望他跳过每个粒子结构中的 _prevPosition 属性。我的错在哪里？

也许我初始化着色器存储缓冲区的方式很重要：

```
GLuint shaderStorageBufferID;

glGenBuffers(1, &shaderStorageBufferID);
glBindBuffer(GL_SHADER_STORAGE_BUFFER, shaderStorageBufferID);
glBufferData(GL_SHADER_STORAGE_BUFFER, numParticles*sizeof(Particle), NULL ,GL_STATIC_DRAW);
struct Particle* particles = (struct Particle*) glMapBufferRange(GL_SHADER_STORAGE_BUFFER, 0, numParticles*sizeof(Particle), GL_MAP_WRITE_BIT | GL_MAP_INVALIDATE_BUFFER_BIT);
for(int i = 0; i < numParticles; ++i){
    particles[i]._currPosition = glm::vec4(i, 0, 0.0, 1.0f);
    particles[i]._prevPosition = glm::vec4(i, 0, 1.0, 1.0f);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T20:36:44.973

您的`Particle`结构包含两个`vec4`。您的[计算着色器](https://stackoverflow.com/q/12742142/734069)`vec4`为每个数组元素写入两个s。

然而这一行：

```
glVertexPointer(4,GL_FLOAT, sizeof(glm::vec4), (GLvoid*)0); 
```

告诉 OpenGL 你正在传递一个`vec4`s 数组。你不是。您正在传递一个数组，其中每个元素都是*两个* `vec4`s。你想跳过第二个。

因此，通过提供适当的步幅来告诉 OpenGL：

```
glVertexPointer(4, GL_FLOAT, sizeof(Particle), (GLvoid*)0); 
```

哦，顺便说一句：您仍在[使用错误的屏障](https://stackoverflow.com/a/12742848/734069)。仅仅因为您的代码恰好运行并不意味着它是有保证的。除非您正确地做所有事情，否则不同步的加载/存储操作可能会很棘手。

# c++ - 错误：未在此范围内声明“驱动程序”

> ID：12752280
> 
> 赞同：-2
> 
> 时间：2012-10-05T18:47:39.947
> 
> 标签：c++, mysql, linux

遵循 MySQL C++ 连接器上的 MySQL 站点的语法，但效果不佳，这里有一个片段：

```
#include "/usr/include/mysql++/mysql++.h"
#include "/usr/include/mysql/mysql.h"
#include "/usr/include/mysql/mysql_version.h"
#include "/usr/include/mysql_connection.h"
#include "/usr/include/mysql_driver.h"
#include <cppconn/driver.h>
#include <cppconn/connection.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
#include <cppconn/prepared_statement.h>

using namespace std;
using namespace sql::mysql;
using namespace sql;

sql::mysql::MySQL_Driver *driver;
driver = sql::mysql::get_mysql_driver_instance();
sql::Connection *con;
con = driver->connect("tcp://127.0.0.1:3306", "db", "password");
sql::PreparedStatement  *prep_stmt;
prep_stmt = con->prepareStatement("INSERT INTO db(srcIP, srcCountry, destIP, destHost, destPort, blIP) VALUES (?, ?, ?, ?, ?, ?)");

    prep_stmt->setString(1, src_ip);
    prep_stmt->setString(2, country_code);
    prep_stmt->setString(3, dest_ip);
    prep_stmt->setString(4, host_name);
    prep_stmt->setString(5, dest_prt);
    prep_stmt->setString(6, blip);
    prep_stmt->execute();

    delete prep_stmt;
    delete con;

            }
        else

sql::mysql::MySQL_Driver *driver;
driver = sql::mysql::get_mysql_driver_instance();
sql::Connection *con;
    con = driver->connect("tcp://127.0.0.1:3306", "db", "password");
sql::PreparedStatement *prep_stmt;
    prep_stmt = con->prepareStatement("INSERT INTO db(srcIP, srcCountry, destIP, destHost, destPort, blIP) VALUES (?, ?, ?, ?, ?, ?)");

    prep_stmt->setString(1, src_ip);
    prep_stmt->setString(2, country_code);
    prep_stmt->setString(3, dest_ip);
        prep_stmt->setString(4, he->h_name);
    prep_stmt->setString(5, dest_prt);
    prep_stmt->setString(6, blip);
    prep_stmt->execute();

    delete prep_stmt;
    delete con; 
```

编译：

g++ sql.c -o sql -I/usr/include -I/usr/include/mysql -I/usr/include/mysql++ -I/usr/local/include -I/usr/local/include/cppconn -lmysqlcppconn - lmysql++ -lstdc++ -lmysqlpp -lmysqlclient

并且总是在第二组 MySQL 驱动程序上得到错误：

错误：未在此范围内声明“驱动程序”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:02:12.940

仅根据我所看到的，您希望成为 else 案例一部分的语句周围似乎缺少大括号。如果你这样做：

```
if (x)
{
   // do something
}
else
   Foo* foo = new foo();
   foo->someFunction(); 
```

您将在读取的行上看到错误，`foo->someFunction();`因为 else 仅包含一个没有大括号的语句，并且 foo 在那之后超出了范围。你需要这样做：

```
if (x)
{
   // do something
}
else
{
   Foo* foo = new foo();
   foo->someFunction();
} 
```

# git - Git合并不使用默认合并消息，打开带有默认消息的编辑器

> ID：12752288
> 
> 赞同：78
> 
> 时间：2012-10-05T18:48:02.473
> 
> 标签：git, git-merge

如何强制`git merge`使用默认合并消息而不是用所述消息加载我的编辑器？

我没有在 中列出编辑器`git config -l`，所以我不确定它为什么会打开一个编辑器。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-05T18:54:17.143

经过一番挖掘找到了答案

编辑：根据马克的建议，这是最好的方法：

```
git config --global core.mergeoptions --no-edit 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-10-05T19:00:04.813

采用

```
export GIT_MERGE_AUTOEDIT=no 
```

或者

```
git merge --no-edit 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-17T17:32:37.263

这是 Git 的一项新功能，[在 Git 1.7.10](https://git-blame.blogspot.com/2012/02/anticipating-git-1710.html)中引入，使用旧功能（不要在合并时提供消息）将这两行放在您的`.bash_profile`or`.bashrc`

```
GIT_MERGE_AUTOEDIT=no
export GIT_MERGE_AUTOEDIT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-28T18:25:22.417

试试这个

`git merge --no-ff --no-edit -m "my custom merge message" somebranch`

# c - 如何从 IAR EWARM 的内联汇编程序调用另一个模块中的 C 函数？

> ID：12752289
> 
> 赞同：0
> 
> 时间：2012-10-05T18:48:19.767
> 
> 标签：c, inline-assembly, extern, cortex-m3, iar

我在硬故障处理程序中有一些组装。该程序集基本上是为了将当前堆栈指针作为参数传递（在 R0 中）。看起来是这样...

```
__asm("    mov     r0, sp\n"
  "    bl      SavePC\n"
  "    bx      lr"); 
```

当 SavePC 在同一个 c 文件中时，这可以正常工作。但是，当将 SavePC 放在另一个 c 文件中时，我没有运气。我试图像这样导入函数......

```
__asm("IMPORT SavePC\n"
" mov r0, sp\n"
" bl SavePC\n"
" bx lr"); 
```

...但我一定做错了什么。编译器报告以下...

```
Error[Og005]: Unknown symbol in inline assembly: "IMPORT" 
Error[Og005]: Unknown symbol in inline assembly: "SavePC" 
Error[Og006]: Syntax error in inline assembly: "Error[54]: Expression can not be forward"
Error[Og005]: Unknown symbol in inline assembly: "SavePC" 
Error while running C/C++ Compiler 
```

带有程序集的 c 文件包括带有 SavePC 原型的头文件...

```
extern void SavePC(unsigned long); 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:26:55.130

即使调用正确，您的代码也无法正常工作。

```
bl _SavePC
bx lr 
```

您认为指令中`LR`寄存器中的值是多少？`bx lr`指令本身的地址！该`bl`指令已将其放在那里。这实际上是`while (1);`带有 bx 指令的 a。

嵌套函数调用看起来更像这样：

```
push lr
bl _SavePC
pop pc 
```

要获取堆栈寄存器，请使用相应的 CMSIS 函数：

*   `__get_MSP()`用于主堆栈指针 (MSP)
*   `__get_PSP()`进程堆栈指针 (PSP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:53:28.140

使用 extern 是一个坏习惯，因为它容易出错。C-99 标准为外部提供了一种安全的替代方案。您应该在没有 extern 关键字的头文件中编写函数原型。然后在两个 C 文件中包含头文件。然后链接器负责将函数链接到不同的文件中。

例子：

# 文件：custom_header.h

```
void SavePC(unsigned long); 
```

# 文件：source_c_file.c

```
#include "custom_header.h"

void SavePC(unsigned long)
{
      ....
      ....

      ....

} 
```

# 文件：user_c_file.c

```
#include "custom_header.h"

void someFunction(void)
{
.
.
.

__asm("    mov     r0, sp\n"
  "    bl      SavePC\n"
  "    bx      lr");

.
.
.
} 
```

# java - 列出 LAN 上所有计算机的名称或 ip

> ID：12752292
> 
> 赞同：0
> 
> 时间：2012-10-05T18:48:26.730
> 
> 标签：java, networking

谁能帮我列出所有用JAVA连接到局域网的计算机的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:04:29.023

在不使用外部系统调用的情况下解决此问题的一种方法是尝试每个可能的 IP 地址。

遍历地址，使用类似这样的方式向每个地址发送数据......

```
for (int i =0; i<100; i++) {
    String ip = "192.168.1." + i
    InetAddress address = InetAddress.getByAddress(ip); 
} 
```

您收到的任何响应都将表明一个活动 IP。但是，在这种方法中，您将受到子网的限制。

# html - 在一行上显示 4 个复选框，而不是在一行上显示所有复选框

> ID：12752309
> 
> 赞同：0
> 
> 时间：2012-10-05T18:49:35.803
> 
> 标签：html, jsf, jsf-2, checkbox, selectmanycheckbox

我使用 JSF 2.0 创建了 Web 应用程序，其中有复选框可以选择为`h:selectManyCheckbox`. 下面是我的代码

```
<h:selectManyCheckbox value="#{UserRegistration.pagesSelected}" id="myPages">
    <f:selectItem itemValue="registerForPatentss" itemLabel="Register New Applicant"/>
    <f:selectItem itemValue="success" itemLabel="Register New Project" />
    <f:selectItem itemValue="getReportss" itemLabel="Patent Reports" />
    <f:selectItem itemValue="searhPatentss" itemLabel="Search For Project" />
    <f:selectItem itemValue="addUserss" itemLabel="Add User Account" />
    <f:selectItem itemValue="logPatentSystemss" itemLabel="System Log" />
    <f:selectItem itemValue="userlistss" itemLabel="Details Of Registered Users" />
</h:selectManyCheckbox> 
```

我得到的输出是

```
[] Register New Applicant [] Register New Project [] Patent Reports [] Search For Project [] Add User Account [] System Log [] Details Of Registered Users 
```

问题是**这是在一条线上**。

我想要的是如下。

```
[] Register New Applicant [] Register New Project [] Patent Reports [] Search For Project
[] Add User Account [] System Log [] Details Of Registered Users 
```

即**一行4个复选框....**

知道如何完成这项工作吗？

## 编辑 1

HTML 生成的输出是

```
<table id="myPages">
    <tr>
<td>
<input name="myPages" id="myPages:0" value="registerForPatentss" type="checkbox" checked="checked" /><label for="myPages:0" class=""> Register New Applicant</label></td>
<td>
<input name="myPages" id="myPages:1" value="success" type="checkbox" checked="checked" /><label for="myPages:1" class=""> Register New Project</label></td>
<td>
<input name="myPages" id="myPages:2" value="getReportss" type="checkbox" checked="checked" /><label for="myPages:2" class=""> Patent Reports</label></td>
<td>
<input name="myPages" id="myPages:3" value="searhPatentss" type="checkbox" checked="checked" /><label for="myPages:3" class=""> Search For Project</label></td>
<td>
<input name="myPages" id="myPages:4" value="addUserss" type="checkbox" checked="checked" /><label for="myPages:4" class=""> Add User Account</label></td>
<td>
<input name="myPages" id="myPages:5" value="logPatentSystemss" type="checkbox" checked="checked" /><label for="myPages:5" class=""> System Log</label></td>
<td>
<input name="myPages" id="myPages:6" value="userlistss" type="checkbox" /><label for="myPages:6" class=""> Details Of Registered Users</label></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:51:49.587

[`<t:selectManyCheckbox>`](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_selectManyCheckbox.html)用简单的用法描述查看 tomahawk's ，例如[这里](http://www.mail-archive.com/users@myfaces.apache.org/msg40494.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T15:20:55.237

你可以用 CSS 做到这一点：

```
 <style type="text/css">
        .cb table {
            width: 100%;
        }

        .cb tr {
            display: inline;
        }

        .cb td {
            display: inline-block;
            width: 24%;
        }
    </style>

    <h:form>
        <div class="cb">
            <h:selectManyCheckbox value="#{UserRegistration.pagesSelected}" id="myPages">
                <f:selectItem itemValue="registerForPatentss" itemLabel="Register New Applicant"/>
                <f:selectItem itemValue="success" itemLabel="Register New Project"/>
                <f:selectItem itemValue="getReportss" itemLabel="Patent Reports"/>
                <f:selectItem itemValue="searhPatentss" itemLabel="Search For Project"/>
                <f:selectItem itemValue="addUserss" itemLabel="Add User Account"/>
                <f:selectItem itemValue="logPatentSystemss" itemLabel="System Log"/>
                <f:selectItem itemValue="userlistss" itemLabel="Details Of Registered Users"/>
            </h:selectManyCheckbox>
        </div>
    </h:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:59:37.927

使用战斧的库

```
xmlns:t="http://myfaces.apache.org/tomahawk"

<t:selectManyCheckbox value="#{UserRegistration.pagesSelected}" id="myPages" layout="pageDirection"  layoutWidth="4">
    <f:selectItem itemValue="registerForPatentss" itemLabel="Register New Applicant"/>
    <f:selectItem itemValue="success" itemLabel="Register New Project" />
    <f:selectItem itemValue="getReportss" itemLabel="Project Reports" />
    <f:selectItem itemValue="searhPatentss" itemLabel="Search For Project" />
    <f:selectItem itemValue="addUserss" itemLabel="Add User Account" />
    <f:selectItem itemValue="logPatentSystemss" itemLabel="System Log" />
    <f:selectItem itemValue="userlistss" itemLabel="Details Of Registered Users" />
</t:selectManyCheckbox> 
```

## [参考](http://www.coderanch.com/t/523945/JSF/java/align-items-inside-selectManyCheckbox)

# ruby - 西纳特拉服务

> ID：12752310
> 
> 赞同：1
> 
> 时间：2012-10-05T18:49:42.060
> 
> 标签：ruby, sinatra

> **可能重复：**
> [Sinatra 是多线程的吗？](https://stackoverflow.com/questions/6278817/is-sinatra-multi-threaded)

我有一个需要在 Ruby 1.8.7 上运行的 Web 服务。目前我正在使用带有 Thin 的 Sinatra 来托管服务。

我做了一个测试来提交两个请求：“A”和“B”。如果我只提交 A，这只是一个“helloworld”请求，我会立即得到结果。如果我先发送请求 B，这比请求 A 花费更多的时间和资源，我会在大约同一时间收到 A 和 B 的结果。似乎 Sinatra 同步处理它们。

有没有办法让 Sinatra 多线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:55:42.237

Thin 是多线程的，但您需要告诉它要启动多少台服务器：`thin start --servers 3`. 否则它将没有足够的工人来满足您的要求。请参阅文档中的[用法](http://code.macournoyer.com/thin/usage/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:21:17.940

您可能想查看[async-sinatra](https://github.com/raggi/async_sinatra)。

# iphone - 不推荐使用的方法和 iOS 部署目标的概念

> ID：12752311
> 
> 赞同：1
> 
> 时间：2012-10-05T18:49:43.213
> 
> 标签：iphone, ios, xcode, cocoa-touch

谁能解释一下iOS项目中iOS部署目标构建设置的概念。我有一个应用程序需要从 iOS 4.3 到 iOS 6.0 的支持。我的 iOS 部署目标应该是什么？

当我将其设置为 4.3 时，它编译得很好，但如果我将其更改为 6.0，我会看到很多不推荐使用的方法的编译警告。处理此问题的理想方法是什么。我应该删除我在 iOS 6.0 上看到的所有警告，记住它仍然支持 4.3 目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:19:55.740

部署目标是您指定应用程序所需的最低 iOS 版本的方式。如果您需要支持 iOS 4.3 及以上版本，您的部署目标应该是 iOS 4.3。

“不推荐使用的方法”是已标记为在将来某个时候从 SDK 中删除的方法。根据所讨论的 API，您可能别无选择，只能继续使用它们，只要您必须以 iOS 4.3 为目标。

考虑尽快提高所需的 iOS 版本，以便您可以利用最新的 API。这将在最多的最新 iOS 设备上提供最佳的整体兼容性和性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:24:55.603

部署目标是可以运行您的应用程序的最早版本的 iOS。因此，如果您想支持从 iOS 4.3 到 6.0，您应该将*部署目标*设置为 4.3，并将*Base SDK*设置为 iOS 6.0。

不推荐使用的方法是 SDK 的未来版本将不再支持的方法。这些方法会发出警告并可能导致不安全的代码，因为有更好的方法。它鼓励不要使用它们。有时，您需要根据操作系统的版本运行一种或其他方法，但这超出了问题的范围；-)

总之，理想情况取决于您的产品，但请记住，iOS 用户很早就采用了新版本的操作系统。所以我会从 iOS 5.0 升级到 6.0，但这是我个人的看法 ;-)

# python - 导入 CSV 文件时 Python 3 中的 UnicodeDecodeError

> ID：12752313
> 
> 赞同：17
> 
> 时间：2012-10-05T18:49:54.090
> 
> 标签：python, unicode, csv, python-3.x, non-ascii-characters

我正在尝试使用以下代码导入 CSV：

```
 import csv
    import sys

    def load_csv(filename):
        # Open file for reading
        file = open(filename, 'r')

        # Read in file
        return csv.reader(file, delimiter=',', quotechar='\n')

    def main(argv):
        csv_file = load_csv("myfile.csv")

        for item in csv_file:
            print(item)

    if __name__ == "__main__":
        main(sys.argv[1:]) 
```

这是我的 csv 文件的示例：

```
 foo,bar,test,1,2
    this,wont,work,because,α 
```

和错误：

```
 Traceback (most recent call last):
      File "test.py", line 22, in <module>
        main(sys.argv[1:])
      File "test.py", line 18, in main
        for item in csv_file:
      File "/usr/lib/python3.2/encodings/ascii.py", line 26, in decode
        return codecs.ascii_decode(input, self.errors)[0]
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xce in position 40: ordinal not in range(128) 
```

显然，它击中了 CSV 末尾的字符并引发了该错误，但我不知道如何解决这个问题。有什么帮助吗？

这是：

```
 Python 3.2.3 (default, Apr 23 2012, 23:35:30)
    [GCC 4.7.0 20120414 (prerelease)] on linux2 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T19:37:09.377

看来您的问题归结为：

```
print("α") 
```

您可以通过指定来修复它[`PYTHONIOENCODING`](http://docs.python.org/dev/using/cmdline.html)：

```
$ PYTHONIOENCODING=utf-8 python3 test.py > output.txt 
```

笔记：

```
$ python3 test.py 
```

如果您的终端配置支持它，应该按原样工作，其中`test.py`：

```
import csv

with open('myfile.csv', newline='', encoding='utf-8') as file:
    for row in csv.reader(file):
        print(row) 
```

如果上面`open()`没有`encoding`参数，那么你会`UnicodeDecodeError`得到`LC_ALL=C`.

即使没有重定向，`LC_ALL=C`你也会得到，即，在这种情况下是必要的（在[PEP 538：](https://docs.python.org/3/whatsnew/3.7.html#pep-538-legacy-c-locale-coercion)在 Python 3.7+ 中实现的 Legacy C Locale Coercion 之前）。`UnicodeEncodeError``PYTHONIOENCODING`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-05T18:55:15.467

在[python 文档](http://docs.python.org/py3k/library/csv.html?highlight=csv#csv)中，您必须设置文件的编码。以下是该网站的示例：

```
import csv

 with open('some.csv', newline='', encoding='utf-8') as f:
   reader = csv.reader(f)
   for row in reader:
     print(row) 
```

编辑：您的问题似乎与打印有关。尝试使用漂亮的打印机：

```
import csv
import pprint

with open('some.csv', newline='', encoding='utf-8') as f:
  reader = csv.reader(f)
  for row in reader:
    pprint.pprint(row) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-30T20:40:19.700

另一种选择是通过传递错误处理程序来掩盖错误：

```
with open('some.csv', newline='', errors='replace') as f:
   reader = csv.reader(f)
   for row in reader:
    print(row) 
```

它将用“缺失字符”替换文件中任何不可解码的字节。

# javascript - Web 应用程序不会在第一次加载时运行，只有在 html 5 和 javascript 中刷新页面后

> ID：12752314
> 
> 赞同：0
> 
> 时间：2012-10-05T18:49:55.620
> 
> 标签：javascript, html

> **可能重复：**
> [画布drawImage第一次不绘制图像](https://stackoverflow.com/questions/3850312/canvas-drawimage-doesnt-draw-images-the-first-time)

我制作了一个 Web 应用程序，其中我制作了一个游戏，游戏在第一次加载时不起作用，它只在您刷新页面时运行，在 mozilla 或 chrome 上它再次启动（即正常）。代码如下：

```
 <!DOCTYPE html>

 <html>
 <head>

<script>

function init() {

img=new Image();
img.src= "Device-Android.png";
img1= new Image();
img1.src= "background.png";
play=new Image();
play.src="play.png"; 

    canvas1 = document.getElementById('canvas');
//alert("show");        
    if (canvas1 && canvas1.getContext) {
        ctx = canvas1.getContext('2d');

ctx.drawImage(img,0,0,394,726);
ctx.drawImage(img1,37,92,317,477);
ctx.drawImage(play,149,300,70,40);
//alert("show somthing");
ctx.font = "bold 15pt sans-serif";
document.onmousedown = initGame;
    }

}
................ remaining functions

 </script>

</head>

<body onload="init();">

  <center>

   <canvas id="canvas" width="387" height="700">  <h1>Memory Game</h1>   </canvas>

    </center>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:18:30.150

当您尝试绘制它们时，可能是您的图像没有完全加载。当你 onload=init(){image.src="...";} 它是 image.src 调用开始加载图像。如果您立即绘制到画布（几行之后），它还没有完成加载。当您重新加载页面时，它会在最后一次加载页面的缓存中。

编写一个预加载器。或者在调用 init() 之前加载这些图像。

有一个变量可以告诉您图像是否已完成加载。我认为它是 image.complete

# jquery - $_POST 和 $_REQUEST 数据在 location.reload() 上丢失

> ID：12752315
> 
> 赞同：0
> 
> 时间：2012-10-05T18:50:00.537
> 
> 标签：jquery, ajax, forms, post, request

我在父 html 表单中有一个 ajax 表单（不是我的代码！）。用例场景是提示用户输入个人资料信息，打开一个弹出窗口以将多个联系人添加到帐户，然后继续填写个人资料的其余部分。

联系人框允许用户添加新联系人、编辑现有联系人或删除联系人。

问题是当用户提交ajax表单进行添加、编辑或删除时，整个页面刷新，父表单中任何未保存的$_POST数据都会丢失。

如果我在页面上按 Enter 键，或者按 Ctrl + $ 或 Cmd + R，则 $_POST 数据不会丢失。这些是我读过的一些文章，试图弄清楚这件事：

*   [https://stackoverflow.com/questions/12734535/ajax-complete-without-page-reload](https://stackoverflow.com/questions/12734535/ajax-complete-without-page-reload)
*   [使用 PHP、jQuery 以模态形式填充字段](https://stackoverflow.com/questions/2649913/populating-fields-in-modal-form-using-php-jquery)
*   [“location.reload()”丢失 POST/SESSION 数据？（F5 / Ctrl+R 保留数据？）](https://stackoverflow.com/questions/10861176/location-reload-loses-post-session-data-f5-ctrlr-keeps-data)
*   [“location.reload()”丢失 POST/SESSION 数据？（F5 / Ctrl+R 保留数据？](https://stackoverflow.com/questions/10861176/location-reload-loses-post-session-data-f5-ctrlr-keeps-data)）

我是一名 PHP 开发人员和一个 AJAX 新手，所以请原谅我在这里缺乏知识。`return false;`我试图用and来模仿 Ctrl+R 效果`location.reload(true)`，但都没有奏效。我错过了什么？

这是我的弹出框代码：

```
$("#contact-dialog").dialog({
    autoOpen: false,
    width: 600,
    modal: true,
    buttons: {
      "Ok": function() {
        var bValid = true;
        allFields.removeClass( "ui-state-error" );

        bValid = bValid && checkLength( contact_first_name, "first name", 2, 64 );
        bValid = bValid && checkLength( contact_last_name, "last name", 2, 64 );
        bValid = bValid && checkLength( title, "title", 1, 64 );
        bValid = bValid && checkLength( phone, "phone", 6, 30 );
        bValid = bValid && checkLength( email_address, "email_address", 5, 128 );

        if ( bValid ) {
          if (contact_count % 2) {
          $( "#contacts" ).append();
          } else {
          $( "#contacts" ).append();
          }
          contact_count++;

          $.ajax({
                type: "POST",
                url: "facility-categories-ajax.php",
                data: { 
                    type: 'add-to-contacts',
                    input: $('#contact-dialog-link').val(),
                    cid: $('#contact-dialog-id').val(),
                    first_name: contact_first_name.val(),
                    last_name: contact_last_name.val(),
                    title: title.val(),
                    phone: phone.val(),
                    email_address: email_address.val(),
                    twitter: twitter.val(),
                    facebook: facebook.val(),
                    linkedin: linkedin.val()
                },
                complete: function(data) {
                    location.reload();
                    return false;
                }
          });

          $(this).dialog("close");
        }
      },
      Cancel: function() {
        contact_update.val('-1');
        $(this).dialog("close");
      }
    },
    close: function() {
      allFields.val("").removeClass("ui-state-error");
      tips.text("");
      if (contact_update.val() > -1) {
        delete_contact(contact_update.val());
      }
    }
  }); 
```

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:12:33.447

删除 local.reload() 以停止刷新页面。您可以删除整个完整的：function(){}，因为它仅对 ajax 调用成功返回后的处理有用。并考虑添加另一个按钮，例如“完成更改”以关闭对话框。例如：

```
 (...)
 buttons: {
    "Done": function() {
        $(this).dialog('close');
    },
(...) 
```

# xml - XSLT -- 为根元素生成唯一 id 并将该值附加到子元素的 id

> ID：12752317
> 
> 赞同：1
> 
> 时间：2012-10-05T18:50:06.320
> 
> 标签：xml, xslt, identity

我需要：

(1)为根元素生成唯一的id属性

(2) 将该 id 附加到子元素

(3) 将任意父元素的名称和顺序附加到子元素的 id 属性中

**注意——我的机器上有一个可以使用 XSLT 2.0 但更喜欢 1.0 的 XML 编辑器，因为每当我使用 Visual Basic 运行宏时，我认为 Microsoft xml/xslt 处理器只能处理 xslt 1.0。它似乎不喜欢2.0。

源 XML 示例：

```
<root>
<segment>
<para>Text of the segment here.</para>
</segment>
<segment>
<para>Text of the segment here.</para>
<para>Text of the segment here.</para>
</segment>
<segment>
<para>Text of the segment here.</para>
<sub_segment>
<para>Text of the segment here.</para>
</sub_segment>
</segment>
</root> 
```

所需的输出 XML：

```
<root id="idrootx2x1">
<segment id="idrootx2x1.segment.1">
<para id="idrootx2x1.segment.1.para.1">Text of the segment here.</para>
</segment>
<segment id="idrootx2x1.segment.2">
<para id="idrootx2x1.segment.2.para.1">Text of the segment here.</para>
<para id="idrootx2x1.segment.2.para.2">Text of the segment here.</para>
</segment>
<segment id="idrootx2x1.segment.3">
<para id="idrootx2x1.segment.3.para.1">Text of the segment here.</para>
<sub_segment id="idrootx2x1.segment.3.sub_segment.1">
<para id="idrootx2x1.segment.3.sub_segment.1.para.1">Text of the segment here.</para>
</sub_segment>
</segment>
</root> 
```

这是我到目前为止的 XSLT：

```
<xsl:template match="*|@*|text()">
<xsl:copy>
    <xsl:apply-templates select="*|@*|text()"/> 
</xsl:copy> 
</xsl:template>

<xsl:template match="root">
<xsl:copy>
    <xsl:attribute name="id"><xsl:value-of select="generate-id()"/></xsl:attribute>
    <xsl:apply-templates select="*|@*|text()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="segment | para | sub_segment">
<xsl:copy>
    <xsl:attribute name="id">
        <xsl:value-of select="name(.)"/>.<xsl:number format="1" level="single"/>
    </xsl:attribute>
    <xsl:apply-templates select="*|@*|text()"/>
</xsl:copy>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:14:57.707

您可以像这样将您的父母编号传递给孩子：

```
<xsl:template match="@*|node()">
<xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="root">
<xsl:copy>
    <xsl:attribute name="id"><xsl:value-of select="generate-id()"/></xsl:attribute>
    <xsl:apply-templates select="@*|node()">
        <xsl:with-param name="prev_id" select="generate-id()"/>
    </xsl:apply-templates>
</xsl:copy>
</xsl:template>

<xsl:template match="segment|para|sub_segment">
<xsl:param name="prev_id"/>
<xsl:copy>
    <xsl:variable name="cur_id">
        <xsl:value-of select="concat($prev_id,'.',name())"/>.<xsl:number format="1" level="single"/>
    </xsl:variable>
    <xsl:attribute name="id"><xsl:value-of select="$cur_id"/></xsl:attribute>
    <xsl:apply-templates select="@*|node()">
        <xsl:with-param name="prev_id" select="$cur_id"/>
    </xsl:apply-templates>
</xsl:copy>
</xsl:template> 
```

如果有一些其他非编号元素包裹了编号元素，请将标识模板更改为

```
<xsl:template match="@*|node()">
<xsl:param name="prev_id"/>
<xsl:copy>
    <xsl:apply-templates select="@*|node()">
        <xsl:with-param name="prev_id" select="$prev_id"/>
    </xsl:apply-templates>
</xsl:copy>
</xsl:template> 
```

以便它转发父编号

# iphone - 根据 Pickerview Choice iphone sdk 更改按钮的操作

> ID：12752319
> 
> 赞同：0
> 
> 时间：2012-10-05T18:50:09.907
> 
> 标签：iphone, xcode, button, sdk, action

我向你解释我正在尝试做什么。

我有一个 PickerView 和一个按钮，我希望当我在 Pickerview 上选择行“Action1”时，当我点击我的按钮时，该操作变为 UIAlert。当我选择行“Action2”时，操作当我点击我的按钮时变成一个 ModalTransition。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:27:11.440

可能有多种解决方案可以做到这一点

1.  根据 PickerView 选择设置 Button Tag，在 Action/Selector Method 中，您可以基于 Tag 创建 Switch Case。并且可以执行Action

2.  您可以在 Action/Selector Method 中直接在 Picker View 上进行 switch case。

但是，如果您想在按钮的不同状态上设置多个选择器，您可以使用

```
[btn addTarget:self action:@selector(method1) forControlEvents:UIControlEventTouchUpInside];
[btn addTarget:self action:@selector(method2) forControlEvents:UIControlEventTouchDown]; 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:22:11.843

将按钮单击的方法设置为

```
[btn addTarget:self action:@selector(method1) forControlEvents:UIControlEventTouchUpInside]; 
```

在方法中，您可以实现一个案例，其中案例选项可以是选择器输出中的值（设置一个整数以通过`UIPickerViewDelegates`( `pickeroption`)了解选择器的选定索引

```
-(void)method1
{
switch pickeroption
case 1:
Action1
break;
case2: 
action 2
break;
} 
```

# php - 图像的 PHP require() 偶尔会返回无效/截断的图像

> ID：12752321
> 
> 赞同：1
> 
> 时间：2012-10-05T18:50:11.590
> 
> 标签：php, image, apache

我编写了一个用于在目录中加载图像的快速 PHP 脚本，但我发现它经常在错误控制台中给我“图像被截断或损坏”错误，尽管图像没有损坏。如果我浏览到它的完整路径，我可以正常查看图像，我也可以下载它并毫无问题地查看它。我试过使用不同的浏览器，但有同样的问题。

奇怪的是，有些图像可以正常工作，而有些则不能。该问题似乎与文件大小无关。

我的代码非常简单，而且我已经使用了很多年了：

```
if (isset($_GET['i']) && is_numeric($_GET['i'])) {
$path = 'D:/Images/';
if (is_file($path . $i . '.jpg')) {
   header('content-type: image/jpg');
   require($path . $i . '.jpg');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:53:21.710

您不应该使用包含图像的要求，就好像它是 PHP 代码一样。您应该使用[`readfile()`](http://php.net/readfile)，它只会打开图像并将其直接发送到浏览器：

```
readfile($path . $i . '.jpg');
exit; 
```

另请注意，您需要`exit()`在`readfile()`.

# android - 如何将 Facebook 应用请求链接到 Android 应用

> ID：12752326
> 
> 赞同：2
> 
> 时间：2012-10-05T18:50:28.363
> 
> 标签：android, facebook-requests

我可以在我的 Android 应用上打开 AppRequestsListener，邀请朋友并向他们发送应用请求。但是，直到我找到[这个答案](https://stackoverflow.com/questions/11014002/android-app-after-successfully-sending-apprequests-friends-did-not-get-notific)，即您必须在 Facebook 应用程序设置中勾选“Facebook 上的应用程序”并在“画布 URL”和“安全画布 URL”字段中输入虚假 URL，该应用程序请求才到达。我这样做了，然后所选的 facebook 朋友正确地收到了通知。

但是，现在单击收到的应用程序请求后，只会打开一个空白页面。而我希望应用程序直接重定向到[我的 Wingman 应用程序的这个 Play 商店链接](http://bit.ly/PwOczB)。从我的感觉来看，最合理的解决方案是在 Canvas URL 和 Secure canvas URL 中包含 play store 链接，但这也只是显示一个空白页面。

我不明白为什么我什么都没找到，一定有这么多 iPhone/Android 应用程序向 facebook 朋友发送请求，然后链接到应用程序商店。

# c# - TableLayoutPanel 高度属性不起作用

> ID：12752328
> 
> 赞同：0
> 
> 时间：2012-10-05T18:50:42.203
> 
> 标签：c#, winforms

```
 TableLayoutPanel t = new TableLayoutPanel();  
        t.RowStyles.Add(new RowStyle(SizeType.AutoSize));
        t.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100));
        t.CellBorderStyle = TableLayoutPanelCellBorderStyle.Single;
        Label lbl = new Label();
        lbl.Margin = new System.Windows.Forms.Padding(20, 150, 20, 20);
        lbl.Text = "Hello";
        t.Controls.Add(lbl, 0, 0);
        this.Text = t.Size.Height.ToString();
        this.Controls.Add(t); 
```

为什么 t.Size.Height 属性总是给我 100 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:00:27.697

这总是返回 100 的原因是您需要：

*   `AutoSize = true`
*   `AutoSizeMode =AutoSizeMode.GrowAndShrink`
*   `t.RowCount >= 1`
*   `t.ColumnCount >= 1`

    ```
     TableLayoutPanel t = new TableLayoutPanel();
        t.AutoSize = true;    //added
        t.AutoSizeMode =AutoSizeMode.GrowAndShrink;    //added
        t.RowCount = 1;  //added
        t.ColumnCount = 1;   //added
        t.RowStyles.Add(new RowStyle(SizeType.AutoSize));
        t.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100));
        t.CellBorderStyle = TableLayoutPanelCellBorderStyle.Single;
        Label lbl = new Label();
        lbl.Margin = new System.Windows.Forms.Padding(20, 150, 20, 20);
        lbl.Text = "Hello";
        t.Controls.Add(lbl, 0, 0);
        this.Controls.Add(t);
        this.Text = t.Size.Height.ToString();  //moved 
    ```

在将表格添加到表单后，您还需要将高度检查移动到，否则不会发生任何布局操作。

# cocoa - 如何创建具有倾斜效果的 NSAffineTransform？

> ID：12752331
> 
> 赞同：2
> 
> 时间：2012-10-05T18:50:57.790
> 
> 标签：cocoa, graphics

我对使用 Cocoa 绘图非常陌生，并且正在开发一个涉及六边形网格的实验性应用程序。为了简化这一点，我想倾斜坐标系，使 Y 轴向左旋转 30 度。[我在 Apple 的Cocoa Drawing Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Transforms/Transforms.html)中遇到了这个，这表明它是可能的：

> 将非均匀缩放变换与旋转变换相结合也可以使您的内容产生倾斜效果。

但是，我无法理解这是如何工作的，也无法找到任何示例。

如何设置 NSAffineTransform 以使 X 轴保持水平而 Y 轴逆时针旋转 30 度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:56:51.333

不幸的是，没有像变换、旋转等那样简单的方法。

您必须创建一个变换矩阵：

```
0            tan(skewy)   0
tan(skewx)   0            0
0            0            1 
```

`setTransformStruct:`与 一起使用`NSAffineTransformStruct`：

```
typedef struct _NSAffineTransformStruct {
  CGFloat m11, m12, m21, m22;
  CGFloat tX, tY;
} NSAffineTransformStruct; 
```

**对于倾斜，m11、m22、tx 和 ty 为零；m12 是棕褐色（歪斜），m21 是棕褐色（歪斜）**

在 Apple 的文档中有更多关于矩阵的信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Transforms/Transforms.html#//apple_ref/doc/uid/TP40003290- CH204-BCIIICJI](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Transforms/Transforms.html#//apple_ref/doc/uid/TP40003290-CH204-BCIIICJI)

希望这可以帮助！

# c# - 将记录的所有 SQL Server 列值存储为 C# 中的唯一变量

> ID：12752335
> 
> 赞同：0
> 
> 时间：2012-10-05T18:51:03.153
> 
> 标签：c#, sql-server

我正在用 C# 编写一个程序，该程序将从临时表中获取数据，然后将相同的数据插入 SQL Server 数据库中它们各自的新位置。该程序将按顺序执行以下步骤：

1.  从暂存表的第一行中选择列
2.  将每一列存储为唯一变量
3.  将数据插入数据库中新的相应位置（每个值将发送到数据库中的多个不同表，并且这些值在许多表之间重复）
4.  移动到下一条记录
5.  从步骤 1 开始重复，直到处理完所有记录

那么有没有办法遍历整个记录集，将列中的每个结果存储为唯一变量，而不必为要存储的每个值编写单独的查询？有 51 列都必须放在某个地方，我认为硬编码 51 个变量并使用自定义查询对数据库进行硬编码并不是非常有效的。

我想过用一个多维数组来做这件事，但那只是一个包含大量值的字符串。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:56:22.367

虽然您可以通过 .NET 应用程序做到这一点，但实际上使用 SQL 语句更容易实现。SQL 具有在表之间移动数据的良好语法：

```
INSERT INTO [Destination] ([Columns,])
SELECT [Columns,]
FROM [Source] 
```

如果要在数据库之间移动数据，只需将其中一个数据库链接到另一个数据库，然后运行查询。如果您使用的是 SQL Server Management Studio，则可以按照[本文](http://msdn.microsoft.com/en-us/library/ff772782.aspx)设置链接服务器。否则，您可以使用该[`sp_addlinkedserver`](http://msdn.microsoft.com/en-us/library/ms190479.aspx)过程来注册链接服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:31:48.597

您可以创建一个包含表中每一列的属性的类，并使用像 Dapper 这样的微型 ORM 从数据库中填充这些类的实例列表。然后，您可以遍历列表并对其他表进行插入。

您甚至可以为您的各个插入创建其他类，并使用 AutoMapper 从您的源类中创建这些实例。

但是......对于你想要达到的目标来说，这可能都是矫枉过正的。

# java - 如何实现通用的服务器发送事件 Servlet

> ID：12752337
> 
> 赞同：0
> 
> 时间：2012-10-05T18:51:24.450
> 
> 标签：java, jakarta-ee, servlets

我正在尝试以一种通用方式实现服务器[发送事件](http://dev.w3.org/html5/eventsource/)的服务器代码，即我的应用程序的任何对象都可以向客户端发送消息，因此我决定仅为 SSE 实现一个特定的 Servlet。最初的测试代码就像一个魅力，但不够灵活，无法从我的应用程序的不同部分发送消息。因此，我重写了代码，使所有引用 Servlet 对象的对象都可以向客户端发送消息：

```
public class PushServlet extends HttpServlet {

    private Thread threadServlet;
    private boolean processando=true;
    private MensagemSSEBean mensagem;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        threadServlet=Thread.currentThread();
        response.setContentType("text/event-stream; charset=utf-8");
        while (processando){
            if(!pausarThread())
                break;
            enviarMensagemParaOCliente(response.getWriter());
        }
        enviarMensagemDeFechamento(response.getWriter());
    }

    private void enviarMensagemParaOCliente(PrintWriter saida) {
        ConversorMensagemSSE conversor = new ConversorMensagemSSE();
        saida.print(conversor.converter(mensagem));
        saida.flush();
    }

    private synchronized void enviarMensagemDeFechamento(PrintWriter saida) {
        mensagem.setMensagem("#FECHAR_CONEXAO#");
        enviarMensagemParaOCliente(saida);
        saida.close();
    }

    public synchronized void enviarMensagem(MensagemSSEBean mensagem) throws IOException {
        this.mensagem=mensagem;
        threadServlet.notifyAll();
    }

    public synchronized void finalizar(){
        processando=false;
    }

    private boolean pausarThread() {
        try {
            threadServlet.wait();
            return true;
        } catch (InterruptedException e) {
            e.printStackTrace();  
        }
        return false;
    }
} 
```

如您所见，我暂停了 Servlet 线程，直到调用“enviarMensagem”为止。我没有测试这段代码，基本上是因为我不知道如何获得这个 Servlet 对象。有人可以解释一下我如何从任何对象中获取这个 Servlet 对象吗？另一个重要问题，这是解决此类问题的理想方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:01:07.247

最后我以一种通用的方式实现了它。servlet 类现在每十秒发送一次 keep-alive 或共享队列中的消息：

```
public class PushServlet extends HttpServlet {

    private boolean processing = true;
    private HttpServletResponse response;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.response = response;
        configureAndStart();
        while (processing) {
            try {
                sendMessages();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    private void configureAndStart() throws IOException {
        processing = true;
        response.setContentType("text/event-stream; charset=utf-8");
        sendMessage(new SSEMessageBean(SSEEventType.START));
    }

    private void sendMessages() throws IOException, InterruptedException {
        SSEMessageBean message = MessageQueueController.getInstance().getNextMessage();
        while (message != null) {
            sendMessage(message);
            message = MessageQueueController.getInstance().getNextMessage();
            if (message.getEventType() != SSEEventType.END)
                return;
        }
        Thread.sleep(10000);
        sendMessage(new SSEMessageBean(SSEEventType.KEEP_ALIVE));
    }

    public void sendMessage(SSEMessageBean message) throws IOException {
        SSEMessageConverter converter = new SSEMessageConverter();
        PrintWriter out = response.getWriter();
        out.print(converter.convert(message));
        out.flush();
        if (message.getEventType() == SSEEventType.END) {
            processing = false;
            out.close();
        }
    }
} 
```

想要向客户端发送事件的对象只需写入共享队列。

# ruby-on-rails - Hartl 教程第 5.3.2 节：Rails 路由

> ID：12752340
> 
> 赞同：1
> 
> 时间：2012-10-05T18:51:37.993
> 
> 标签：ruby-on-rails, routes, match, railstutorial.org, static-pages

我一直按照教程中的内容进行操作。到目前为止，一切都顺利进行，直到本节。

我应该将 config/routes.rb 文件中的“GET”语句更改为以下内容：

```
SampleApp::Application.routes.draw do
  root to: 'static_pages#home'

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
```

这应该使测试通过。他们没有通过。作为 9 个类似错误之一，它们继续失败，并出现以下错误：

```
Failure/Error: visit about_path
NameError:
   undefined local variable or method 'about_path' .... 
```

我不知道如何让这件事通过，这样我才能继续前进。我错过了什么？哈特尔错过了什么？其他问过这个问题的人从来没有得到任何有意义的答案，甚至在尝试时也没有得到任何答案。

在有人问之前：

Rails、Ruby 和其他已安装组件的所有版本与本教程中使用的版本完全相同，与今天 2012-10-05 编写的版本完全相同。一切都与教程完美匹配。

更新：这是当前的 static_pages_spec.rb 文件

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do

    it "should have the h1 'Sample App'" do
      visit root_path
      page.should have_selector('h1', text: 'Sample App')
    end

    it "should have the base title" do
      visit root_path
      page.should have_selector('title',
                        text: "Ruby on Rails Tutorial Sample App")
    end

    it "should not have a custom page title" do
      visit root_path
      page.should_not have_selector('title', text: '| Home')
    end
  end

  describe "Help page" do

    it "should have the h1 'Help'" do
      visit help_path
      page.should have_selector('h1', text: 'Help')
    end

    it "should have the title 'Help'" do
      visit help_path
      page.should have_selector('title',
                        text: "Ruby on Rails Tutorial Sample App | Help")
    end
  end

  describe "About page" do

    it "should have the h1 'About'" do
      visit about_path
      page.should have_selector('h1', text: 'About Us')
    end

    it "should have the title 'About Us'" do
      visit about_path
      page.should have_selector('title',
                    text: "Ruby on Rails Tutorial Sample App | About Us")
    end
  end

  describe "Contact page" do

    it "should have the h1 'Contact'" do
      visit contact_path
      page.should have_selector('h1', text: 'Contact')
    end

    it "should have the title 'Contact'" do
      visit contact_path
      page.should have_selector('title',
                    text: "Ruby on Rails Tutorial Sample App | Contact")
    end
  end
end 
```

耙路线结果：

```
 root  /                  static_pages#home
   help  /help(.:format)    static_pages#help
   about  /about(.:format)   static_pages#about
   contact  /contact(.:format) static_pages#contact 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:07:10.527

尝试将您的 routes.rb 更改为：

```
match '/about',   to: 'static_pages#about', as: 'about' 
```

您还应该重新加载 Spork 以应用更改。您还可以添加：

```
load "#{Rails.root}/config/routes.rb" 
```

到你的`Spork.each_run`块中，以便在每次运行 Spork 时重新加载路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T01:21:45.417

重新加载 spork 对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T08:48:43.280

嗨，尝试将其添加到您的规格中。

```
describe "Static pages" do
include Rails.application.routes.url_helpers
....... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-19T19:14:59.737

我认为你应该在浏览器中输入

```
http://localhost:3000/ 
```

而不是`http://localhost:3000/static_pages/home`例如获取主页。我认为问题不在于代码，而在于如何访问页面。在教程中5.3.2之前的部分，您需要访问`localhost:3000/static_pages/home`才能访问主页。按照 5.3.2 中的说明操作后，您只需键入`http://localhost:3000/`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T00:03:10.920

我刚刚遇到此错误，并在解决此问题时得到了一些帮助。我错误地分别在 layouts/_header.html.erb 和 static_pages/home.html.erb 上添加了 signin_path 和 signup_path。这让每个页面都对 signin_path 是什么感到困惑。

我犯的另一个错误是根路径。如果您从示例应用程序目录运行“rm public/index.html”，routes.rb 中的“root 'static_pages#home”应该可以工作。问题是公共目录中的内容在您自定义应用程序时会覆盖应用程序的任何其他部分。希望这可以帮助你喜欢它帮助我:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-10T20:49:11.813

默认情况下，命名路由在规范中不可用。将以下代码添加到 spec_helper.rb 文件中：

```
RSpec.configure do |config|
  config.include Rails.application.routes.url_helpers
end 
```

# drupal - Drupal 6 - 菜单消失问题

> ID：12752342
> 
> 赞同：1
> 
> 时间：2012-10-05T18:51:40.380
> 
> 标签：drupal, drupal-6, drupal-navigation

我正在使用 Drupal6。

我在 Site Building -> Menus 中定义了一个名为“sidebar link”的菜单。然后是我的代码，我构建了类似“menu_tree('menu-sidebar-links');”的菜单。

如果我在主页或子页面上，那么我希望该菜单展开。有用。

但是，它经常消失。菜单停止扩展。为了解决这个问题，我必须清除 Drupal 中的缓存，然后它才能重新开始工作。

我在 Drupal 6 中发现了一个潜在的修复方法，[无法构建菜单路由器和链接](https://stackoverflow.com/questions/3007643/drupal-6-fails-to-build-menu-router-and-links)

但在这个解决方案中，该变量仅在我运行更新时设置。我试过了，它有效。但在下一次加载时，它不会重建。因此，不知何故，该变量再次设置为 FALSE。但我希望它每次都重建，也许只是一个菜单而不是全部（我有 3 个菜单，这些菜单工作正常，因为那些只是链接而不是子菜单）。

有人可以建议修复吗？

PS：我无法提供链接，因为此代码正在网站重新设计中使用，并且在上线之前只能在内部网络中访问。

谢谢

# java - java中的所有方法都是隐式虚拟的吗

> ID：12752343
> 
> 赞同：23
> 
> 时间：2012-10-05T18:51:42.903
> 
> 标签：java

如果java中没有编译时绑定，这是否意味着所有绑定都是在运行时完成的？

但是根据运行时绑定的 OOP 概念，函数必须具有 virtual 关键字。所有方法在 java 中都是隐式虚拟的，或者 java 中是否存在任何编译时绑定

如果有任何编译时绑定，你能给我一些具体的情况，或者更多信息的链接

1.  静态（这里没有绑定的意义，因为静态不属于对象）
2.  final （这不是一个有效点，因为它可以通过另一种方式实现）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-05T18:54:56.777

在 Java 中，所有 non- `static`、 non-`final`和 non-`private`方法默认都是虚拟的。然而，JVM 足够聪明，可以找到只有一种给定方法实现的类，并将其转换为静态绑定。

这样您就不必记住`virtual`关键字（由于 C++ 中的析构函数丢失而导致内存泄漏`virtual`？），而性能不会受到太大影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T18:56:46.210

非静态方法调用是 Java 的主要（唯一）动态方面。Java中的所有方法都是虚拟的。这不适用于基于对象的静态类型在编译时绑定的静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T07:03:26.117

我们不能在子类中覆盖的方法通常称为非虚拟方法。

在 Java 中，默认情况下，私有和最终方法是非虚拟的。其他方法默认是虚拟的。

# python - 如何在我的 PC 上重置我的 pypi.python.org 密码

> ID：12752348
> 
> 赞同：0
> 
> 时间：2012-10-05T18:51:56.587
> 
> 标签：python, python-3.x

如何重置我的[pypi.python.org](http://pypi.python.org/pypi)密码？

我刚刚在[pypi.python.org](http://pypi.python.org/pypi)网站上重置了我的密码，现在我无法从命令提示符注册/上传分发，因为它一直给我一个`401 basic auth failed`错误

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:41:21.710

您可能需要在位于您的主目录中的[.pypirc](http://docs.python.org/distutils/packageindex.html#the-pypirc-file)文件中更新您的密码。您可以使用以下命令对其进行编辑：

```
$ nano ~/.pypirc 
```

如果您更喜欢其他编辑器`nano`，只需将其替换为您选择的编辑器即可。

# php - 数据表：来自 ajax 的两个表

> ID：12752349
> 
> 赞同：0
> 
> 时间：2012-10-05T18:52:02.860
> 
> 标签：php, datatables

从 ajax 源上的两个表中获取数据的最佳方法是什么？

我正在使用数据表，例如：

```
$('#user_types').dataTable({
            'bServerSide' : true,
            'bProcessing' : true,
            'sAjaxSource' : 'datatables/ajax_file.php',
            'iDisplayLength' : 50,  
            "sPaginationType": "bootstrap",
            "oLanguage":{
                    "sSearch": "",
                    "sLengthMenu": "Limit: _MENU_"
                },
            'aaSorting': [[3, 'desc']],
            'aoColumns' : [
                null,
                null,
                null,
                null,
                null,
                null,
                null,
                {'bSortable' : false},
            ]
        }) 
```

现在，在 ajax_file.php 上，我正在从一张表中读取所有信息。现在我需要从另一个表中获取一列，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:55:58.737

`datatables/ajax_file.php`将您中的查询从“普通”选择查询更改为使用`JOIN`or的查询，`UNION`将要显示的表连接在一起。

# mysql - MySQL显示不正确的数据

> ID：12752350
> 
> 赞同：-1
> 
> 时间：2012-10-05T18:52:07.520
> 
> 标签：mysql

除了上面的问题，我想知道是否有任何方法可以优化这个 MySQL 语句。

```
SELECT *
FROM `products`
WHERE
  `category` = 3073 OR
  `category` = 3074 OR
  `category` = 3100 OR
  `category` = 3102 OR
  `category` = 3106 OR
  `category` = 3109 OR
  `category` = 3111 OR
  `category` = 3115 OR
  `category` = 3130 OR
  `category` = 3134 OR
  `category` = 3144 OR
  `category` = 3146 OR
  `category` = 3152 OR
  `category` = 3157 OR
  `category` = 3162 OR
  `category` = 3163 OR
  `category` = 3164 OR
  `category` = 3166 OR
  `category` = 3167 OR
  `category` = 3168 OR
  `category` = 3170 OR
  `category` = 3171 OR
  `category` = 3177 OR
  `category` = 3181 OR
  `category` = 3182 OR
  `category` = 3184 OR
  `category` = 3190 OR
  `category` = 3191 OR
  `category` = 3192 OR
  `category` = 3213 OR
  `category` = 3224 OR
  `category` = 3227 OR
  `category` = 3228 OR
  `category` = 3235 OR
  `category` = 3238 OR
  `category` = 3239 OR
  `category` = 3240 OR
  `category` = 3244 OR
  `category` = 3245 OR
  `category` = 3246 AND
  `active` = 1 AND
  `price_notax` > 0 AND
  `deleted` = 0
ORDER BY `position` ASC
LIMIT 0, 24; 
```

该语句还显示字段值为`price_notax`equal的产品`0`，为什么？我说这个数字需要高于`0`...

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:55:48.143

```
SELECT *
FROM products
WHERE category in (3073, 3074) -- and so on
AND `active` = 1
AND `price_notax` > 0 
AND `deleted` = 0 
ORDER BY `position` -- ASC is by default
LIMIT 0, 24 
```

您的查询显示错误的结果，因为您使用了 OR AND，因此如果只有一个条件为真（例如 category=3100），那么它会显示它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:55:12.670

那是因为“and”优先于“or”，并且在您的语句中，只有最后一部分将“anded”到`category`= 3246。您需要在 or 部分周围放置方括号 ()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:56:20.463

为什么不创建这些类别 ID 的数组，然后使用

```
 WHERE category IN somearray 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T18:57:00.043

当评估该 WHERE 子句时，任何 ORed 子句为真将使 AND 子句的状态无关紧要。要纠正这个问题，您必须用括号括住一组 OR 子句，以便单独评估它们......

但是要以更高的可读性完成同样的事情，请改用 IN 子句：

```
SELECT * 
FROM products 
WHERE category IN (3073, 3074, 3100, 3102, 3106, 3109, 3111, 3115, 3130, 3134, 3144, 3146, 3152, 3157, 3162, 3163, 3164, 3166, 3167, 3168, 3170, 3171, 3177, 3181, 3182, 3184, 3190, 3191, 3192, 3213, 3224, 3227, 3228, 3235, 3238, 3239, 3240, 3244, 3245, 3246) 
AND active = 1 
AND price_notax > 0 
AND deleted = 0 
ORDER BY position ASC LIMIT 0, 24; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T18:59:53.163

`OR`的优先级低于`AND`。

更正确的 SQL：

```
SELECT * 
FROM `products` 
WHERE ( 
    `category` = 3073 OR `category` = 3074 OR `category` = 3100 OR 
    `category` = 3102 OR `category` = 3106 OR `category` = 3109 OR 
    `category` = 3111 OR `category` = 3115 OR `category` = 3130 OR 
    `category` = 3134 OR `category` = 3144 OR `category` = 3146 OR 
    `category` = 3152 OR `category` = 3157 OR `category` = 3162 OR 
    `category` = 3163 OR `category` = 3164 OR `category` = 3166 OR 
    `category` = 3167 OR `category` = 3168 OR `category` = 3170 OR 
    `category` = 3171 OR `category` = 3177 OR `category` = 3181 OR 
    `category` = 3182 OR `category` = 3184 OR `category` = 3190 OR 
    `category` = 3191 OR `category` = 3192 OR `category` = 3213 OR 
    `category` = 3224 OR `category` = 3227 OR `category` = 3228 OR 
    `category` = 3235 OR `category` = 3238 OR `category` = 3239 OR 
    `category` = 3240 OR `category` = 3244 OR `category` = 3245 OR 
    `category` = 3246 )
    AND `active` = 1 
    AND `price_notax` > 0 
    AND `deleted` = 0 
ORDER BY `position` ASC 
LIMIT 0, 24; 
```

# python - Python：如何使用 BeautifulSoup 抓取前 3 个 ul=class 的元素？

> ID：12752352
> 
> 赞同：0
> 
> 时间：2012-10-05T18:52:21.393
> 
> 标签：python

我正在使用以下脚本来抓取信息以创建邮政邮寄标签。

该脚本从`ul`我的县公共税收数据库的类“描述关键字”标签中抓取所有数据。

我的问题是如何只抓取类“描述键”的前 3 个`li`元素。`ul`请记住，此类在 html 中使用了 100 多次，我只需要包含邮寄地址信息的前 3 个元素。

我需要添加什么才能仅获取`li`我需要的元素？

该脚本运行良好，但它获取了太多信息。

谢谢

以下代码行获取了我需要的所有数据，但还提供了 2 个我不需要的额外`li`元素。

```
a = soup.findAll(attrs={"class" : "description keywords"}) 
```

我只需要收集类的前3个`li`元素- `ul`“描述关键字”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:02:57.060

```
soup.find_all('title', limit=1) 
```

您可以将限制设置为`find_all`。这实际上不会让你的代码更快，因为`find_all`它仍然被调用——它只是返回更少的结果。对于实际更快的处理，您可以调用`find_next`3 次。

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-the-tree](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-the-tree)

# c# - 如何将常量与 C# 中的接口相关联？

> ID：12752364
> 
> 赞同：31
> 
> 时间：2012-10-05T18:53:28.083
> 
> 标签：c#, c++-cli, idl, webidl

某些语言允许您将常量与接口相关联：

*   [Java 示例](https://stackoverflow.com/q/9700081/49942)
*   [一个 PhP 的例子](https://stackoverflow.com/q/5350672/49942)

W3C 抽象接口也是如此，例如：

```
// Introduced in DOM Level 2:
interface CSSValue {

  // UnitTypes
  const unsigned short      CSS_INHERIT                    = 0;
  const unsigned short      CSS_PRIMITIVE_VALUE            = 1;
  const unsigned short      CSS_VALUE_LIST                 = 2;
  const unsigned short      CSS_CUSTOM                     = 3;

  attribute DOMString       cssText;
  attribute unsigned short  cssValueType;
}; 
```

我想定义这个接口，以便可以从 C# 调用它。

显然 C# 无法定义与接口关联的常量。

*   将这样的接口转换为 C# 的常用方法是什么？
*   DOM 接口是否有任何“规范”C# 绑定？
*   尽管 C# 不能，但是否有另一种 .NET 语言可以定义与接口关联的常量？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2018-04-06T11:35:24.670

我添加了一个 Get only 属性并在定义中使用 const 对其进行备份。

```
public interface IFoo
{
    string ConstValue { get; }
}

public class Foo : IFoo
{
    public string ConstValue => _constValue;
    private string _constValue = "My constant";
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-05T19:22:02.667

回答你的第三个问题：

> 尽管 C# 不能，但是否有另一种 .NET 语言可以定义与接口关联的常量？

C++/CLI 允许您`literal`在接口中定义值，这些值等效`static const`于 C# 中的值。

```
public interface class ICSSValue
{
public:
    literal short CSS_INHERIT = 0;
    literal short CSS_PRIMITIVE_VALUE = 1;
    literal short CSS_VALUE_LIST = 2;
    literal short CSS_CSS_CUSTOM = 3;

    property DOMString^ cssText;
    property ushort cssValueType;
} 
```

然后，您可以通过 C# 访问这些值：

```
public static void Main()
{
    short primitiveValue = ICSSValue.CSS_PRIMITIVE_VALUE;

    Debug.Assert(primitiveValue == 1);
} 
```

有关更多详细信息，请参阅[MSDN 上的此页面。](http://msdn.microsoft.com/en-us/library/5yzft952%28v=vs.100%29.aspx)

免责声明：在接口中不允许使用常量值的设计决定是一个很好的决定。暴露实现细节的接口很可能是一个泄漏的抽象。在此示例中，CSS 值类型可能最好是枚举。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-05T18:56:23.773

如果你想要一个地方来存储你的常量，我会使用一个静态类：

```
public static class MyConstants
{
    public const int first = 1;
    public const int second = 2;
    public const string projectName = "Hello World";
} 
```

那是（至少一个）通用标准。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-05T19:02:20.260

C# 不允许在接口中使用常量，因为常量是一个实现方面，理论上不属于仅定义行为协议的类型。

我怀疑 Java 人员允许在接口中使用 const 字段，或者因为接口在内部被视为某种抽象类，或者因为他们需要它来弥补类型系统中的某些缺陷，例如枚举。

我不确定您所说的“DOM 接口的规范绑定”是什么意思。C# 不在浏览器中运行。

也就是说，您需要将常量放在其他地方，例如结构或枚举（如果它们是数字）。也许遵循某种命名约定会有所帮助——如果你的接口是`IFooBar`那么可能包含你的常量的结构可以被调用`IFooSetttings`，或者`IFooValues`任何合适的。

除了 C# 和 VB.NET，我不知道任何 CLR 语言，但我很确定 VB 不允许这样做（尽管已经有一段时间了）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-16T13:08:56.840

我一直使用 SO，但这是我第一次在这里发帖。我找到了这篇文章，试图解决同样的问题。当我看到关于使用静态类的帖子（由 Servy 撰写）时，我开始考虑通过将接口嵌入到该静态类中来解决这个问题。

```
// define an interface with static content
public static class X {
    // define the interface to implement
    public interface Interface {
        string GetX();
    }

    // static content available to all implementers of this interface
    public static string StandardFormat(object x) {
        return string.Format("Object = {0}", x.ToString());
    }
}

// Implement the interface
public class MyX : X.Interface {
    public override string ToString() {
        return "MyX";
    }

    #region X.Interface Members

    public string GetX() {
        // use common code defined in the "interface"
        return X.StandardFormat(this);
    }

    #endregion
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-05-04T19:57:32.283

C# 8 现在允许在`interface`定义中使用常量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-13T11:34:52.820

一个抽象类会做接口会做的所有事情（好吧，除了通过`typeof(T).IsInterface`测试）并允许使用常量。

反对嵌入接口中的常量（或枚举）是错误的。这是一个命名问题。在它们有意义的非常精确的上下文中命名常量比在上下文中命名它们更好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-12T15:23:54.697

遇到了同样的问题 - 需要在接口中定义常量。发现了另一种可能性：通过在接口上使用扩展方法。像这样：

```
public interface IFoo
{
    // declarations
}

public static class IFooExtensions
{
    public static int Bar(this IFoo x) => 50;
} 
```

但是，这将需要接口实例从中获取常量：

```
IFoo foo;
foo.Bar(); 
```

你也可以在接口实现中使用这个常量：

```
public class Foo: IFoo
{
    public Foo() {
        var x = this.Bar();
    }
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-25T08:23:31.600

尝试定义方法参数和/或返回值

```
public enum IFIleValue
{
    F_OK = 0,
    F_WRONG_NAME = -1,
    F_ERROR_OBJECT_DATA = -2,
};

public interface IFile
{
     IFIleValue New(String Name=null);
     IFIleValue Open(String Path);
     IFIleValue Save();
     IFIleValue SaveAs(String Path);
     IFIleValue Close();
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-01-27T08:46:45.937

可以使用自定义属性：

```
[Constant("CSS_INHERIT", 0)]
[Constant("CSS_PRIMITIVE_VALUE", 1)]
public interface BlaBla 
```

自定义属性类可能如下所示：

```
[AttributeUsage(AttributeTargets.Interface, AllowMultiple = true, Inherited = false)]
public class ConstantAttribute: Attribute
{
    public ConstantAttribute(string key, object value)
    {
        // ...
    }
} 
```

可以使用检索常量

```
object[] attributes = typeof(BlaBla).GetCustomAttributes(typeof(ConstantAttribute),
    inherit: false); 
```

# android - 带有 mp3 音调的 Android 飞溅活动

> ID：12752366
> 
> 赞同：0
> 
> 时间：2012-10-05T18:53:46.370
> 
> 标签：android, multithreading, android-asynctask, mp3, splash-screen

在我的 android 应用程序中，我想在加载启动程序时播放 mp3 音调。我已经完成了动画启动程序。这是我的代码。请有人帮我播放 mp3 音调。

```
package com.bni.www;

 import android.app.Activity;
 import android.content.Intent;
 import android.graphics.PixelFormat;
 import android.os.Bundle;
 import android.os.CountDownTimer;
 import android.view.Window;
 import android.view.WindowManager;
 import android.view.animation.Animation;
 import android.view.animation.AnimationUtils;
 import android.widget.ImageView;
 import android.widget.LinearLayout;

public class Main extends Activity {

 public void onAttachedToWindow() {
     super.onAttachedToWindow();
     Window window = getWindow();
     window.setFormat(PixelFormat.RGBA_8888);
    }

   @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

 setContentView(R.layout.spalsh);
 CountDown _tik;
 _tik=new CountDown(12000,100,this,Login.class);
 //Intent intent=new Intent(Main.this,Login.class);   
 _tik.start();
 StartAnimations();
 //startActivity(intent);
}
  private void StartAnimations() {
 Animation anim = AnimationUtils.loadAnimation(this, R.anim.alpha);
 anim.reset();
 LinearLayout l=(LinearLayout) findViewById(R.id.lin_lay);
 l.clearAnimation();
 l.startAnimation(anim);

 anim = AnimationUtils.loadAnimation(this, R.anim.translate);
 anim.reset();
 ImageView iv = (ImageView) findViewById(R.id.logo);
 iv.clearAnimation();
 iv.startAnimation(anim);

   }

 }

 class CountDown extends CountDownTimer{
 private Activity _act;
 private Class _cls;
 public CountDown(long millisInFuture, long countDownInterval,Activity act,Class cls) {
 super(millisInFuture, countDownInterval);
 _act=act;
 _cls=cls;
 }
 @Override
 public void onFinish() {
 _act.startActivity(new Intent(_act,_cls));
 _act.finish();
 }
@Override
public void onTick(long millisUntilFinished) {

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:00:29.043

使用此代码播放音频。

```
mp = MediaPlayer.create(yourclassname.this, R.raw.mysound);
                        mp.setOnCompletionListener(new OnCompletionListener() {

                            @Override
                            public void onCompletion(MediaPlayer mp) {
                                // TODO Auto-generated method stub
                                mp.release();
                            }

                        });   
                        mp.start(); 
```

# python - 如何将轴标签移动到matplotlib中的箭头附近

> ID：12752373
> 
> 赞同：4
> 
> 时间：2012-10-05T18:53:59.690
> 
> 标签：python, matplotlib

下面是我绘制函数的代码，我需要将“X”和“Y”标签移动到第一象限，它们通常放置在相应箭头附近的位置。这是怎么做的？

```
import pylab as p
import numpy as n

from mpl_toolkits.axes_grid import axislines

def cubic(x) :
    return x**3 + 6*x

def set_axes():
    fig = p.figure(1)
    ax = axislines.SubplotZero(fig, 111)
    fig.add_subplot(ax)

    for direction in ['xzero', 'yzero']:
        ax.axis[direction].set_axisline_style('->', size=2)
        ax.axis[direction].set_visible(True)

    for direction in ['right', 'top', 'left', 'bottom']:
        ax.axis[direction].set_visible(False)

    ax.axis['xzero'].set_label('X')
    ax.axis['yzero'].set_label('Y')

    ax.axis['yzero'].major_ticklabels.set_axis_direction('right')
    ax.axis['yzero'].set_axislabel_direction('+')
    ax.axis['yzero'].label.set_rotation(-90)
    ax.axis['yzero'].label.set_va('center')

set_axes()

X = n.linspace(-15,15,100)
Y = cubic(X)

p.plot(X, Y)

p.xlim(-5.0, 5.0)
p.ylim(-15.0, 15.0)

p.xticks(n.linspace(-5, 5, 11, endpoint=True))
p.grid(True)

p.show() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T18:17:22.227

通常，要更改轴的（例如`ax.xaxis`）标签位置，您会执行`axis.label.set_position(xy)`. 或者你可以只设置一个坐标，例如'ax.xaxis.set_x(1)`。

在您的情况下，它将是：

```
ax['xzero'].label.set_x(1)
ax['yzero'].label.set_y(1) 
```

但是， （以及or中的`axislines`任何其他内容）是一个有点过时的模块（这就是存在的原因）。在某些情况下，它不能正确地对事物进行子类化。因此，当我们尝试设置标签的 x 和 y 位置时，没有任何变化！`axisartist``axes_grid``axes_grid1`

* * *

一个快速的解决方法是使用`ax.annotate`在箭头末端放置标签。但是，让我们先尝试以不同的方式制作情节（之后我们无论如何都会回来`annotate`）。

* * *

这些天来，您最好使用新的脊椎功能来完成您想要完成的事情。

将 x 和 y 轴设置为“归零”很简单：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()

for spine in ['left', 'bottom']:
    ax.spines[spine].set_position('zero')

# Hide the other spines...  
for spine in ['right', 'top']:
    ax.spines[spine].set_color('none')

ax.axis([-4, 10, -4, 10])
ax.grid()

plt.show() 
```

![在此处输入图像描述](../Images/45a9de2d328f236b7ad67c1b93f30371.png)

但是，我们仍然需要漂亮的箭头装饰。这有点复杂，但它只是用适当的参数进行注释的两次调用。

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()

#-- Set axis spines at 0
for spine in ['left', 'bottom']:
    ax.spines[spine].set_position('zero')

# Hide the other spines...
for spine in ['right', 'top']:
    ax.spines[spine].set_color('none')

#-- Decorate the spins
arrow_length = 20 # In points

# X-axis arrow
ax.annotate('', xy=(1, 0), xycoords=('axes fraction', 'data'), 
            xytext=(arrow_length, 0), textcoords='offset points',
            arrowprops=dict(arrowstyle='<|-', fc='black'))

# Y-axis arrow
ax.annotate('', xy=(0, 1), xycoords=('data', 'axes fraction'), 
            xytext=(0, arrow_length), textcoords='offset points',
            arrowprops=dict(arrowstyle='<|-', fc='black'))

#-- Plot
ax.axis([-4, 10, -4, 10])
ax.grid()

plt.show() 
```

![在此处输入图像描述](../Images/4ad50459903a4b320d444a4ec9bc263a.png)

（箭头的宽度由文本大小（或 的可选参数`arrowprops`）控制，因此如果您愿意，指定类似`size=16`to`annotate`会使箭头更宽一些。）

* * *

此时，最简单的方法是添加“X”和“Y”标签作为注释的一部分，尽管设置它们的位置也可以。

如果我们只是传入一个标签作为注释的第一个参数而不是一个空字符串（并稍微改变对齐方式），我们将在箭头末端得到漂亮的标签：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()

#-- Set axis spines at 0
for spine in ['left', 'bottom']:
    ax.spines[spine].set_position('zero')

# Hide the other spines...
for spine in ['right', 'top']:
    ax.spines[spine].set_color('none')

#-- Decorate the spins
arrow_length = 20 # In points

# X-axis arrow
ax.annotate('X', xy=(1, 0), xycoords=('axes fraction', 'data'), 
            xytext=(arrow_length, 0), textcoords='offset points',
            ha='left', va='center',
            arrowprops=dict(arrowstyle='<|-', fc='black'))

# Y-axis arrow
ax.annotate('Y', xy=(0, 1), xycoords=('data', 'axes fraction'), 
            xytext=(0, arrow_length), textcoords='offset points',
            ha='center', va='bottom',
            arrowprops=dict(arrowstyle='<|-', fc='black'))

#-- Plot
ax.axis([-4, 10, -4, 10])
ax.grid()

plt.show() 
```

![在此处输入图像描述](../Images/7f0988ff5492046c2da83eb9407a98bb.png)

只需一点点工作（直接访问脊椎的变换），您就可以[概括使用注释](https://gist.github.com/3845684)来处理任何类型的脊椎对齐（例如“掉落”的脊椎等）。

无论如何，希望能有所帮助。如果你愿意，你也[可以用它变得更漂亮。](https://stackoverflow.com/questions/4694478/center-origin-in-matplotlib/4718438#4718438)

# mysql - MySQL 按 ID 和最新日期时间分组

> ID：12752375
> 
> 赞同：7
> 
> 时间：2012-10-05T18:54:03.597
> 
> 标签：mysql, sql, select, group-by

我在这里看到了类似类型的问题，但没有一个对我的情况有所帮助。

我有一张表可以说测试（使用 mysql MyISAM）

测试具有以下架构：

```
 TID INT PRIMARY KEY AUTO_INCREMENT
    TData varchar (data that i want to select)
    TUserID INT (this will be joined with users table, same users can have many records here)
    TViewedAt DATETIME (records each time user visits page, datetime format) 
```

现在，每次当前登录的用户访问测试页面时，它都会在此表中添加记录，记录访问者的用户 ID，用户访问的一些数据和日期和时间，每次都会自动递增 TID。

然后我有一个后端管理页面，我可以在其中查看哪个用户访问了测试页面，访问了多少次，数据和时间。基本上它是一个包含 20-25 个最新行列表的表格。我的查询应该只为每个数据选择一条记录。用户的数据可以相同，但时间不同，但我只想为每个用户选择一个最新的数据。因此，如果用户访问测试页面 10 次，则有 10 条记录进入数据库，但表中仅显示 1 条最新记录。如果另一个用户访问页面 15 次，它会显示第二个用户的 1 条记录，这又是最新的，所以现在我们总共有 2 行显示在表格上。我让一切正常工作，但出于某种原因 GROUP BY 并且 MAX(date) 没有给我每个日期的最新日期时间。

这是我的查询：

```
 SELECT *
   FROM Test
   WHERE TUserID = 123
   GROUP BY TData
   ORDER BY TViewedAt 
```

返回 2 行，其中所有行都不是最新的。

多谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T19:05:30.710

我认为通过以下方式可以实现您所需要的，这些操作就是所谓的“分组最大值”。

**选项1**

这是最容易理解的，子查询将返回`TID`所有用户的最大值，因为它与我们`max`一起使用，`Group By`而不是我们执行其他查询来获取这些 ID 的所有数据。

```
 Select TID, TData, TUserID, TViewedAt
 From Test 
 Where TID In(
    Select Max(TID)
    From Test
    Group By TUserID
) 
```

**选项 2**

理解起来稍微复杂一些，但很可能更有效，这是基于当`t1.TViewedAt`处于最大值时，没有`t2.TViewedAt`更大的值并且 t2 行值将是`NULL`。

```
SELECT t1.TID, t1.TData, t1.TUserID, t1.TViewedAt
FROM Test t1
LEFT JOIN Test t2 ON t1.TUserID = t2.TUserID AND t1.TViewedAt < t2.TViewedAt
WHERE t2.TUserID IS NULL; 
```

**结果**

```
TID TData   TUserID   TViewedAt
4   test3   123       2012-10-05 00:00:00.000
5   test2   213       2012-10-03 00:00:00.000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:59:56.967

您需要`GROUP BY TUserID`最大聚合。

```
SELECT
  TID,
  TData,
  main.TUserID
  main.TViewedAt
FROM
  yourTable main
  JOIN ( 
    SELECT TUserID, MAX(TViewedAt) AS TViewedAT FROM yourTable GROUP BY TUserID
  ) tmax ON main.TUserID = tmax.TUserID AND main.TViewedAt = tmax.TViewedAt 
```

这是一种结合子查询的可移植方法。子查询提取`TUserID,TViewedAt`每个用户的最新信息，并将其与主表结合起来以提取`TData`匹配项。

如果您一次只需要一个用户，您可以执行以下操作：

```
SELECT 
  TData,
  TViewedAt
FROM yourTable
WHERE TUserID = 'someid'
GROUP BY TUserId
HAVING TViewedAt = MAX(TViewedAt) 
```

上面的内容只能按照我编写的方式在 MySQL 中工作。其他 RDBMS 会抱怨`TData`出现在`SELECT`列表中但不在`GROUP BY`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T13:53:54.510

以下查询，可能对您有所帮助-

```
select * from pages where date(create_date)=(select date(create_date) from pages order by create_date limit 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:01:28.747

```
SELECT t1.TData, t1.TUserID, t1.TViewedAt 
FROM Test t1
JOIN
(SELECT TUserID, MAX(TViewedAt)
FROM Test
GROUP BY TUserID) t2
ON t1.TUserID = t2.TUserID AND t1.TViewedAt=t2.TViewedAt 
```

# html - 正确使用 HTML 5 部分元素作为页眉和页脚之间的内容？

> ID：12752386
> 
> 赞同：2
> 
> 时间：2012-10-05T18:54:48.660
> 
> 标签：html, semantics

我已经阅读了有关使用 HTML 5元素的[冲突](http://www.impressivewebs.com/html5-section/) [网页。](https://developer.mozilla.org/en-US/docs/Sections_and_Outlines_of_an_HTML5_document)`section`将它用作我的页眉和页脚之间的部分在语义上是否合适？

```
<body>
  <header>logo, nav links</header>
  <section>main content of my webpage</section>
  <footer>copyright, more links, contact info</footer>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:05:46.623

一个很好的起点是 Bruce Lawson 的[Scooby Doo 和提议的 HTML5`<content>`元素](http://www.brucelawson.co.uk/2012/scooby-doo-content-element/)。

您会在其中找到指向[Ian (Hixie) Hickson 意见的](http://lists.w3.org/Archives/Public/public-whatwg-archive/2012Aug/0298.html)链接，他是 WHATWG 版本的 HTML5（又名 HTML 生活标准）的编辑，直到最近还是 W3C 版本的 HTML5 标准的编辑。

他所说的（并且至少在过去 5 年中一直在说）是那里不需要切片元素。如果您需要不在页眉或页脚中的所有内容的包含元素，则`<div>`使用该元素。

另一方面，W3C HTML 工作组的另一位成员 Steve Faulkner[`<maincontent>`](http://www.html5accessibility.com/tests/maincontent.html)为您的用例提出了该元素，理由是允许将 ARIA“主要”角色合并到原生 HTML 中。

`<body>`FWIW，对我来说，你应该在页眉和页脚之间有一个特殊的元素，而不是在页眉和页脚之间，这似乎很奇怪，`<section>`所以`<article>`我同意 Hixie。

我也不相信[史蒂夫的评论](http://www.brucelawson.co.uk/2012/scooby-doo-content-element/#comment-1017996)，因为它会标记主要内容，即使其他分段和页眉/页脚元素没有正确标记，因为似乎没有任何情况我可以提倡它的用途。它似乎只适用于想要半途而废的网络作者。

请注意，如果`<maincontent>`确实被接受，它将不是 HTML5 的一部分。它最早可能出现的是 HTML 5.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:13:18.560

`<section>`在语义上比`<div>`. `<section>`HTML5 的要点之一是它帮助浏览器理解文档的[大纲](http://html5doctor.com/outlines/)。

您的方法实际上取决于我们页面的内容。`<header>`和之间的所有内容是否`<footer>`紧密相关，或者可以将其分解为更多`<sections>`，甚至其他元素？

总是会有充满矛盾建议的来源，尤其是对于 HTML5 处于开发和利用阶段的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:58:40.137

如果您使用标题 ( `h1`to `h6`)，则您已经在使用可以称为“隐式部分”的内容。以下两个标记示例的大纲在语义**上****是相同**的：

示例 1：

```
<body>
  <header>
   <h1>My cool site</h1>
   …
  </header>
  <section>
   <h1>My cool article</h1>
   …
  </section>
  <footer>…&lt;/footer>
</body> 
```

示例 2：

```
<body>
  <header>
   <h1>My cool site</h1>
   …
  </header>

  <h2>My cool article</h2>
   …

  <footer>…&lt;/footer>
</body> 
```

因此，在这种情况下，您是否显式添加`section`并不重要：大纲（语义结构）将是相同的。旁注：[建议](http://www.w3.org/TR/html5/headings-and-sections.html#headings-and-sections)始终明确使用分段元素来分段内容：

> 还鼓励作者在分节内容的元素中显式包装节，而不是依赖于在分节内容的一个元素中具有多个标题所生成的隐式节。

（但是，这仅适用于分割内容，而不是分割根（如`body`））

现在，如果我们不知道您使用的标题，您的问题一般无法回答。有些情况需要您使用`section`(或`article`)，否则您会得到错误的页面大纲。在某些情况下，显式`section`（或`article`）的使用是可选的。

一些一般性提示（仅适用于“原型”网站；当然有很多例外；这些提示应该只是给您一个想法）

*   您网站的每个页面都应该有一个**网站标题**（例如“约翰的博客”）*和*一个**内容标题**（例如“我发现了一个有趣的视频”）
    *   站点标题是 中的第一个标题`body`，它不包含在分段元素（`section`、或）`article`中`nav``aside`
*   网站标题“支配”页面的所有范围，例如在大多数情况下 a) 导航和 b) 内容
*   页面的所有范围都应该有一个标题（不过，您可以使用 CSS 在视觉上隐藏它们）。如果您不能或不想为范围指定标题，*则必须*使用分段元素（`section`、或） `article`，这将创建无标题/隐式标题`nav``aside`

# android - Android：联系人选择器意图 | 无法实例化类型 Uri

> ID：12752388
> 
> 赞同：7
> 
> 时间：2012-10-05T18:54:57.137
> 
> 标签：android, android-contacts

我正在尝试仅选择带有电话号码的联系人。并且我正在关注[此代码](http://developer.android.com/training/basics/intents/result.html)

```
static final int PICK_CONTACT_REQUEST = 1;  // The request code
...
private void pickContact() {
    Intent pickContactIntent = new Intent(Intent.ACTION_PICK, new Uri("content://contacts"));
    pickContactIntent.setType(Phone.CONTENT_TYPE); // Show user only contacts w/ phone numbers
    startActivityForResult(pickContactIntent, PICK_CONTACT_REQUEST);
} 
```

但不幸的是，它显示一个错误：`Cannot instantiate the type Uri`

实际上我有另一个工作代码可以完美运行，但是在选择电子邮件联系人时崩溃。我只需要电话号码。

```
Intent intentContact = new Intent(Intent.ACTION_PICK,
                                ContactsContract.Contacts.CONTENT_URI);
intentContact.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivityForResult(intentContact, PICK_CONTACT); 
```

并且在`onReceive()`，这个方法被调用

```
public void getContactInfo(Intent intent) {

    ContentResolver cr = getContentResolver();
    cursor = cr.query(intent.getData(), null, null, null, null);

    while (cursor.moveToNext()) {
        String contactId = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts._ID));
        if (Integer
                .parseInt(cursor.getString(cursor
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            Cursor phones = getContentResolver().query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null,
                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = " + contactId, null, null);
            while (phones.moveToNext()) {
                phoneNumber = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            }
            phones.close();
        } else {
            snipp.showAlertDialog(getApplicationContext(), "No Number",
                    "Cannot read number", false);
        }

    }
    cursor.close();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T19:13:59.477

这对我有用：

```
private void pickContact() {
    Intent pickContactIntent = new Intent( Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI );
    pickContactIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
    startActivityForResult(pickContactIntent, PICK_CONTACT_REQUEST);
} 
```

**编辑：**

你`onActivityResult()`应该是这样的：

```
@Override
public void onActivityResult( int requestCode, int resultCode, Intent intent ) {

    super.onActivityResult( requestCode, resultCode, intent );
    if ( requestCode == PICK_CONTACT_REQUEST ) {

        if ( resultCode == RESULT_OK ) {
                Uri pickedPhoneNumber = intent.getData();
                // handle the picked phone number in here.
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T19:11:53.590

请改用 Uri.parse()。你不能直接创建一个 Uri

# jquery - 在 VB.NET 中解析序列化字符串

> ID：12752391
> 
> 赞同：0
> 
> 时间：2012-10-05T18:55:17.570
> 
> 标签：jquery, asp.net-mvc, vb.net

我正在使用这个 jQuery 将序列化的表单数据发送到我的控制器操作：

```
var data = $('#quiz').serialize();
            //alert(data);

            $.ajax({
                url: '/Challenge/GetQuizScore',
                type: 'post',
                data: { data: data },
                dataType: 'text',
                success: function (result) {
                    // update chart

                }, 
```

然后，我使用这个控制器来读取它：

```
<EmployeeAuthorize()>
<HttpPost()>
Function GetQuizScore(ByVal data As String) As JsonResult

    Debug.Print(data)

    Return Json(data)

End Function 
```

数据的输出是这样的：

> 4=正确&5=锻炼+定期

解析此类数据的最佳方法是什么，以便我可以在我的操作中使用它（最好像这样循环遍历它：

```
For Each item in myData

    If (item.value == myArray.value) Then
    ' do something
    Else
    ' do something else
    End If

Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:00:16.167

你应该使用`json`

```
 $.ajax({
                url: '/Challenge/GetQuizScore',
                type: 'post',
                data: { data: data },
                dataType: 'json',
                success: function (result) {
                    // update chart

                }, 
```

# asp.net - ASP.NET Web.Sitemap - 一个角色没有显示在导航菜单中，而其他角色则显示在导航菜单中

> ID：12752393
> 
> 赞同：0
> 
> 时间：2012-10-05T18:55:25.913
> 
> 标签：asp.net, asp.net-roles, sitemapprovider

我正在开发一个 ASP.NET C# 应用程序，该应用程序具有为应用程序中的各种用户级别定义的三个角色：“用户”、“经理”和“管理员”。我已经完成了大部分用户和管理员的工作，并且刚刚在管理器部分添加了一个页面。但是“经理”部分没有出现在我的 TreeView 导航菜单中。[我在http://blogs.ipona.com/davids/archive/2009/01/12/8554.aspx](http://blogs.ipona.com/davids/archive/2009/01/12/8554.aspx)阅读了出色的博客文章，我似乎遵循了他定义的所有“规则”，但它仍然不是工作。

这是我的 Web.sitemap 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0">
  <siteMapNode url="#">
    <siteMapNode url="~/User/Default.aspx" roles="Admin,Manager,User" title="Home" />
    <siteMapNode url="~/User/About.aspx" roles="Admin,Manager,User" title="About" description="About this application" />
    <siteMapNode roles="Admin,Manager,User" title="User Functions">
      <siteMapNode url="~/User/CreateNewIPR.aspx" roles="Admin,Manager,User" title="Create New IPR" description="Enter a new IPR" />
      <siteMapNode url="~/User/ListIPRs.aspx" roles="Admin,Manager,User" title="List IPRs" description="List all the IPRs you have entered" />
      <siteMapNode url="~/User/ViewIPRDetails.aspx" roles="Admin,Manager,User" title="View IPR Details" description="View details of an IPR" />
    </siteMapNode>
    <siteMapNode roles="Admin" title="Admin Functions">
      <siteMapNode url="~/Admin/ManageApprovalLevels.aspx" roles="Admin" title="Manage Approval Levels"
               description="Allows administrators to add/edit approval levels" />
      <siteMapNode url="~/Admin/ManageUsers.aspx" roles="Admin" title="Manage Users &amp; Roles" description="Allows administrators to add users to roles and add new users to the system" />
      <siteMapNode url="~/Admin/ManageApprovers.aspx" roles="Admin" title="Manage Approvers" description="Allows administrators to manage approvers" />
    </siteMapNode>
    <siteMapNode roles="Manager" title="Manager Functions">
      <siteMapNode url="~/Manager/ApprovalsList.aspx" roles="Manager" title="Approve Purchase Requests" description="Allows managers to approve purchase requests" />
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

这是“Manager”文件夹中的 Web.config：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="Admin,Manager" />
      <deny users="*" />
    </authorization>
  </system.web>
</configuration> 
```

最后，这里是我在根 Web.config 中定义 SiteMap 提供程序的地方：

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
  <providers>
    <add name="XmlSiteMapProvider" description="Default SiteMap provider" type="System.Web.XmlSiteMapProvider" siteMapFile="IPRTracker.sitemap" securityTrimmingEnabled="true" />
  </providers>
</siteMap> 
```

这是我得到的屏幕截图（请注意，缺少 Manager 部分）：

![显示 NavMenu 的屏幕截图](../Images/6ba96470d4f434fcd52d82d3fc2f0911.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:26:46.093

好吧，事实证明这是相当简单的事情，尽管我并不完全理解它。在 Web.sitemap 中，以下行：

```
<siteMapNode roles="Manager" title="Manager Functions"> 
```

需要改为：

```
<siteMapNode roles="Admin,Manager" title="Manager Functions"> 
```

即使我正在测试的用户 ID 是所有三个角色（管理员、经理和用户）的成员。

# c# - asp.net Treeview 问题（无法显示子节点）

> ID：12752395
> 
> 赞同：3
> 
> 时间：2012-10-05T18:55:30.513
> 
> 标签：c#, asp.net, treeview

我已经为此工作了一段时间，但无法解决问题。我搜索了 S/O 和 Google，但没有运气。希望这里有人可以帮助解决这个问题。

我无法在 TreeView 控件中显示子节点。正在从数据库中检索数据。
根节点看起来很好，但没有显示子节点。如何让子节点显示？

我的代码是：

```
private void PopulateTreeNode(DataSet dsList)
{
    var treeNode = new TreeNode();
    foreach (DataRow dr in dsList.Tables[0].Rows)
    {
        if (dr["RecordTypeID"].ToString() == "1")
        {
            TreeNode NewNode = new TreeNode(dr["CustomerName"].ToString(), dr["customerID"].ToString());
            treeCustomer.Nodes.Add(NewNode);
        }
        else if (dr["RecordTypeID"].ToString() == "2")
        {
            TreeNode pNode = new TreeNode(dr["CustomerName"].ToString(), dr["customerID"].ToString());
            pNode.ChildNodes.Add(pNode);
        }
        else if (dr["RecordTypeID"].ToString() == "3")
        {
            TreeNode pNode = new TreeNode(dr["CustomerName"].ToString(), dr["customerID"].ToString());
            pNode.ChildNodes.Add(pNode);
        }
    }
    treeCustomer.Nodes.Add(treeNode);
    treeCustomer.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:07:16.517

如果您手动添加这样的节点，则不需要调用 treeCustomer.DataBind() 。它可能正在清理你的树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:06:46.177

您是否尝试过调用 treeCustomer.ExpandAll() ？

您可能还需要设置树视图的各种属性；关于显示扩展图像等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:12:46.987

看起来您正在将 pNode 添加到 pNode 的子节点。这意味着它永远不会被添加到 treeCustomer，因为只有 treeNode 被添加到 treeCustomer。它可能应该添加到 treeNode 的子节点中，或者可能添加为 treeNode 的节点。

# xaml - 在 xaml 中使用自定义字体

> ID：12752397
> 
> 赞同：3
> 
> 时间：2012-10-05T18:55:33.197
> 
> 标签：xaml, windows-8, custom-font

我需要在 xaml (c#) 中使用自定义字体。字体未安装在计算机上。

如果字体在应用程序安装文件夹中，那么即使未安装也可以使用它（/Fonts/New12.ttf#New12）

我的问题是自定义字体是在本地计算机上创建的，不能在安装的文件夹中。

问题是我无法将 ttf 文件复制到应用程序安装文件夹，而且我不知道如何使用不在应用程序安装文件夹上的自定义字体

有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:25:51.973

将字体添加到您的项目中，将其**Build Action**更改为**Content**。然后只需内联引用它或作为 Style 或 BasedOn 值的一部分，例如；

```
<TextBlock FontFamily="/Fonts/New12.ttf#New12" Text="Check out my awesome font!" /> 
```

那应该为你做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T09:54:22.080

我找到了解决方案，

对于`FontFamily`你可以写的值

`"ms-appdata:///local/MyFont.ttf#FontName"`

（本地是`ApplicationData::Current->LocalFolder`）

# ruby-on-rails - 带有句点的 RSpec 控制器示例参数

> ID：12752398
> 
> 赞同：2
> 
> 时间：2012-10-05T18:55:38.617
> 
> 标签：ruby-on-rails, rspec

在我的控制器规范中，当我执行该行时：

```
 post :register_pass, :device_id => 'DEV1C3', :pass_type_id => 'pass.com.example.GSPassType', :serial_no => '5ER14L' 
```

我得到一个`ActionController::RoutingError`：

```
 Failure/Error: post :register_pass, :device_id => 'DEV1C3', :pass_type_id => 'pass.com.example.GSPassType', :serial_no => '5ER14L'
  ActionController::RoutingError:
   No route matches {:action=>"register_pass", :controller=>"purchases/passbook/registrations", :pass_type_id=>"pass.com.example.GSPassType", :serial_no=>"5ER14L", :device_id=>"DEV1C3"} 
```

即使`rake routes | grep register_pass`退货

```
register_pass POST   /v1/devices/:device_id/registrations/:pass_type_id/:serial_no(.:format)        {:action=>"register_pass", :controller=>"purchases/passbook/registrations"} 
```

但是，当我删除`:pass_type_id`值中的句点时，`post`上面列出的行会执行并且路由被识别（我使用 rspec 验证了这一点，甚至直接卷曲它，在预期的控制器操作中放置一个断点，路由工作）。

我尝试使用`Rack::Utils.escape`带句点的值，但这也失败了。我还尝试手动将句点更改为它们的 URL 编码值，但 rails 似乎没有在 params 哈希中解码它们。

为什么在这种情况下经期不起作用？

以及如何获得一个传入句点的值（无需`String#gsub`在控制器中使用手动解码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:12:44.817

您遇到了两个问题：1）句点是 URL 序列中的有效字符，因此不会被`Rack::Utils.escape`or替换`URI.escape`，2）Rails 将句点视为路径分隔符以在末尾启用格式解析url，例如 .json、.xml 等（定义见`ActionController::Routing::SEPARATORS`）。

对于这个用例，我建议向这条路线添加约束，允许您允许`:post_id`. 我看不到您的路由文件是什么样的，但随着更改可能是这样的：

```
post "/v1/devices/:device_id/registrations/:pass_type_id/:serial_no(.:format)" => 
  "purchases/passbook/registrations#register_pass", 
  :constraints => { :pass_type_id => /.*/ } 
```

[在Rails 路由指南](http://guides.rubyonrails.org/routing.html)中添加了有关添加此约束的其他方法的大量重要信息

# javascript - 完成后如何从javascript数组中删除ajax

> ID：12752404
> 
> 赞同：0
> 
> 时间：2012-10-05T18:56:06.250
> 
> 标签：javascript, arrays, ajax, variables

完成后如何从数组中删除 jQuery Deferred？我有：

```
myarray[key]=$.ajax({

}).done(function(response){

 // work with response,
 // then delete myarray[key];

}); 
```

这不起作用：

```
var myvar=function(){
  if(myvar){
    alert(1);
  }
} 
```

似乎声明必须完成检查变量是否设置的事件，因此在变量声明中删除变量不应该工作如何超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:03:57.623

这取决于 myarray 是数组还是对象。如果它是一个对象，你可以这样做

```
delete myarray[key]; 
```

但如果它是一个数组，那么它会稍微复杂一些。[John Resig在这里](http://ejohn.org/blog/javascript-array-remove/)写了关于删除数组元素的帖子

如果您想更简单地执行此操作，并且它是一个数组，则可以将其删除

```
myarray[key] = undefined; 
```

但是你应该注意，`myarray`当你这样做时，它并没有变小。

`$.ajax`返回一个 Deferred 对象，并`.done()`返回一个不同的 Deferred 对象。理想情况下，您将执行以下操作：

```
myarray[key]=$.ajax({

});
myarray[key].done(function(response){
 // work with response,
 // then delete myarray[key];
}); 
```

# ios - iOS：在特定时间播放音频文件并在特定持续时间后停止

> ID：12752405
> 
> 赞同：0
> 
> 时间：2012-10-05T18:56:09.180
> 
> 标签：ios, audio, avaudioplayer

我的应用程序有一个长度为 500 微秒的音频文件。我希望应用程序用户在 100 微秒（通过按下按钮）播放音频，音频将在 150 微秒自动停止。这是我到目前为止所做的代码：

```
 AVAudioPlayer *audioPlayer = [[[AVAudioPlayer alloc]
                   initWithContentsOfURL:[NSURL fileURLWithPath:filePath]
                   error:nil] autorelease];
    [audioPlayer setCurrentTime:100.00f];
    [audioPlayer play]; 
```

你能帮我解决停止的部分吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:17:38.740

您可以创建一个具有所需播放间隔的 NSTimer 实例，然后在计时器触发时停止音频。在主线程上创建计时器，并在代码中适用区域的某个位置创建音频播放器的引用。确保您处理中断、IE、用户以某种方式暂停或停止音频，或者如果音频播放器在某处被释放，您的应用程序进入后台，或者您需要处理的任何其他事情，方法是使计时器无效和处置。有关 NSTimer 的信息，请参阅文档。 [http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

# c# - 皮肤控制，与 CSS 不同的语法

> ID：12752408
> 
> 赞同：0
> 
> 时间：2012-10-05T18:56:20.043
> 
> 标签：c#, themes, skin

我有一个关于皮肤布局控制的问题（主题）

我希望 img 水平居中，但是 *.skin 的语法与 CSS 有点不同，

我这样写

```
<asp:image Skinid="homepage"    
  runat="server"    
  imageUrl="/"./image/home_pic.png     
  style="margin:0 auto"    
  bordwe="0"    
  ImageAlign="Right"/> 
```

**ImageAlign="Right" 有效！**但**ImageAlign="center"**不起作用

我也尝试过**Align 和 Float**，但它们都不起作用

有人可以分享一些解决方案吗，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:00:39.540

[这是 ImageAlign 属性的有效值列表](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.imagealign.aspx)。

尝试使用普通的 img 标签，使用 style="margin:0 auto; display: block" 或居中段落。

# javascript - 创建 javascript 对象属性时出错

> ID：12752409
> 
> 赞同：1
> 
> 时间：2012-10-05T18:56:19.843
> 
> 标签：javascript, object, associative

我正在尝试创建一个 javascript 关联对象，一切正常，但传递给创建属性名称的变量不起作用，而不是将变量值存储为将变量转换为字符串并显示变量名称本身。

下面的快速示例

```
var users = {};
var genID = someId;

createObj('userID', function(userID, username, email) {
users[userID] = { genID: { a: a, b: b, c: c, d: d } };
}) 
```

预期结果;

```
users = { 1: { 11: { a: 1, b: 2, c: 3, d: 4 } } } 
```

得到结果；

```
users = { 1: { genID: { a: 1, b: 2, c: 3, d: 4 } } }​ 
```

请帮我解决这些问题。谢谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:59:50.720

您需要方括号语法：

```
users[userID] = {};
users[userID][genID] = { a: a, b: b, c: c, d: d }; 
```

基本上`genID`必须在需要表达式的地方使用（在方括号内）。当需要对象文字时，您在左侧使用它。`genID`在那里被视为常量标识符，并且不被评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:00:04.257

如果你看看你做了什么。第一件事起作用了：`users[userID]`。然而，第二个`genID`没有。那是因为当您使用对象表示法时，它假定您输入的是“名称”而不是变量，所以它不能解决这个问题。更好的是：

```
var obj = {};
obj[genID] = {a: a, b: b, c: c, d: d};
users[userID] = obj; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:59:14.387

```
users[userID] = {};
users[userID][genID] = { { a: a, b: b, c: c, d: d } }; 
```

# ios - iOS GCD 用于 UITableView

> ID：12752424
> 
> 赞同：4
> 
> 时间：2012-10-05T18:57:12.663
> 
> 标签：ios, multithreading, tableview, grand-central-dispatch

我有一个非常密集的 UITableView 需要稍微优化一下。问题是，如何利用大中央车站有效地做到这一点。每个单元格都有一个带有几个标签和两个图像的 UIView。我已经对 TableViewCell 进行了子类化，并且视图正在被重用，尽管当表变大时它仍然有点滞后。我将如何使用 GCD 优化表？或者有没有更好的解决方法？我在线程管理和寻找一些建议方面不是很强。

**这是我的表格视图的代码：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
JointCAD *currentCall = [[xmlParser calls] objectAtIndex:indexPath.row];
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture3.png"]];

TableViewCell *cell = (TableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
{
    cell = [[TableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.callTypeLabel.text = currentCall.currentCallType;
cell.locationLabel.text = currentCall.location;
cell.unitsLabel.text = currentCall.units;
cell.stationLabel.text = [@"Station: " stringByAppendingString:currentCall.station];
cell.selectedBackgroundView = cell.selectionView;

if ([currentCall.callType isEqualToString:@"F"]) {
    cell.imageType = Fire;
}
else {
    cell.imageType = EMS;
}

if ([currentCall.county isEqualToString:@"W"]) {
    cell.imageType1 = Washington;
}
else {
    cell.imageType1 = Clackamas;
}

return cell;
} 
```

**这是子类的tableviewcell：**

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {

    callView = [[UIView alloc] initWithFrame:CGRectMake(7.5, 7, 305, 65)];
    [callView setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin |
     UIViewAutoresizingFlexibleRightMargin |
     UIViewAutoresizingFlexibleWidth];
    [callView setContentMode:UIViewContentModeTopLeft];
    [callView setBackgroundColor: [UIColor colorWithRed:240.0/255.0 green:240.0/255.0 blue:240.0/255.0 alpha:1.0]];
    callView.layer.borderWidth = 1.0;
    callView.layer.borderColor = [UIColor colorWithRed:(0/255.0)  green:(0/255.0)  blue:(0/255.0)  alpha:1.0].CGColor;

    [self.contentView addSubview:callView];

    callTypeLabel = [[UILabel alloc]initWithFrame:CGRectMake(5, 2, 190, 21)];
    callTypeLabel.font = [UIFont boldSystemFontOfSize:12.0];
    callTypeLabel.textColor = [UIColor blackColor];
    callTypeLabel.backgroundColor = [UIColor clearColor];
    callTypeLabel.highlightedTextColor = [UIColor whiteColor];
    callTypeLabel.adjustsFontSizeToFitWidth = YES;
    [callView addSubview:callTypeLabel];

    locationLabel = [[UILabel alloc]initWithFrame:CGRectMake(5, 17 , 190, 15)];
    locationLabel.font = [UIFont systemFontOfSize:10.0];
    locationLabel.textColor = [UIColor blackColor];
    locationLabel.backgroundColor = [UIColor clearColor];
    locationLabel.highlightedTextColor = [UIColor whiteColor];
    locationLabel.adjustsFontSizeToFitWidth = YES;
    [callView addSubview:locationLabel];

    unitsLabel = [[UILabel alloc]initWithFrame:CGRectMake(4, 43, 190, 21)];
    unitsLabel.font = [UIFont systemFontOfSize:10.0];
    unitsLabel.textColor = [UIColor blackColor];
    unitsLabel.backgroundColor = [UIColor clearColor];
    unitsLabel.highlightedTextColor = [UIColor whiteColor];
    unitsLabel.adjustsFontSizeToFitWidth = NO;
    [callView addSubview:unitsLabel];

    stationLabel = [[UILabel alloc]initWithFrame:CGRectMake(195 , 25, 75, 20)];
    stationLabel.font = [UIFont systemFontOfSize:12.0];
    stationLabel.textColor = [UIColor blackColor];
    stationLabel.backgroundColor = [UIColor clearColor];
    stationLabel.highlightedTextColor = [UIColor whiteColor];
    stationLabel.adjustsFontSizeToFitWidth = YES;
    [callView addSubview:stationLabel];

    CGRect countyImageFrame = CGRectMake(275, 10, 18, 18);
    UIImageView *countyImageView = [[UIImageView alloc] initWithFrame:countyImageFrame];
    countyImageView.image = countyImage;
    [callView addSubview:countyImageView];

    CGRect callTypeImageFrame = CGRectMake(275, 37, 18, 18);
    UIImageView *callTypeImageView = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    callTypeImageView.image = callTypeImage;
    [callView addSubview:callTypeImageView];

    selectionView = [[UIView alloc] initWithFrame:CGRectMake(10, 7, 200, 65)];
    [selectionView setBackgroundColor: [UIColor clearColor]];

    }

    return self;
}

- (void)setImageType:(CallType)newImageType {
imageType = newImageType;

if (imageType == Fire) {
    CGRect callTypeImageFrame = CGRectMake(275, 37, 18, 18);
    UIImageView *callTypeImageView = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    callTypeImageView.image = [UIImage imageNamed:@"red.png"];
    [callView addSubview:callTypeImageView];
}
else if (imageType == EMS) {
    CGRect callTypeImageFrame = CGRectMake(275, 37, 18, 18);
    UIImageView *callTypeImageView = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    callTypeImageView.image = [UIImage imageNamed:@"yellow.png"];
    [callView addSubview:callTypeImageView];
    }
}

- (void)setImageType1:(County)newImageType1 {
imageType1 = newImageType1;

if (imageType1 == Washington) {
    CGRect callTypeImageFrame = CGRectMake(275, 10, 18, 18);
    UIImageView *countyImageView = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    countyImageView.image = [UIImage imageNamed:@"blue.png"];
    [callView addSubview:countyImageView];
}
else if (imageType1 == Clackamas) {
    CGRect callTypeImageFrame = CGRectMake(275, 10, 18, 18);
    UIImageView *countyImageView = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    countyImageView.image = [UIImage imageNamed:@"green.png"];
    [callView addSubview:countyImageView];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:43:05.800

这有点微妙，但您的代码将停留的主要区域是 setImageType: 方法。

您在此处将一个以编程方式创建的图像视图添加到您的视图层次结构中：

```
UIImageView *callTypeImageView = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
callTypeImageView.image = [UIImage imageNamed:@"red.png"];
[callView addSubview:callTypeImageView]; 
```

但是您永远不会真正删除旧的图像视图。更好的方法可能是将创建的图像视图缓存在单元格的属性中，然后在设置图像类型时，在创建新图像视图之前将消息 -[UIView removeFromSuperview] 发送到旧图像视图。

正如您现在的代码所示，每次出列单元格时，都会向其中添加一个新的图像视图，因此每次用户上下滚动表格视图时，都会创建一个新的图像视图并将其添加到单元格中。每个单元格中很快就会有几十个图像视图。我怀疑这会导致对图像视图的 drawRect 调用比实现您的目的实际需要的多很多倍。

更好的方法是将这两种类型的图像视图作为您在单元格的 init 方法中创建的属性，这些属性仅在 setType 方法中配置。这样，您只需为每种类型创建一个图像视图，并且只需在适当的 setType 方法中设置配置其图像。这样做，请记住 removeFromSuperview 将释放图像视图，因此您必须将其声明为强属性（假设您使用的是 ARC）。

我很欣赏这些解决方案都与 Grand Central Dispatch 无关，但希望这可以解决您的问题，而无需使用大锤来破解 :)。

# java - 部署错误

> ID：12752433
> 
> 赞同：1
> 
> 时间：2012-10-05T18:57:52.020
> 
> 标签：java, eclipse, gwt, tomcat, jboss

我正在尝试在 jboss 中部署一个 GWT 项目，但我遇到了这个错误

* * *

```
> 18:59:51,074 ERROR
> [org.jboss.kernel.plugins.dependency.AbstractKernelController] Error
> installing to PreReal:
> name=vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war
> state=PostClassLoader mode=Manual requiredState=PreReal:
> org.jboss.deployers.spi.DeploymentException:
> java.lang.ClassNotFoundException: t1.server.GreetingServiceImpl from
> BaseClassLoader@47bebb{vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war}
>   at
> org.jboss.resteasy.integration.deployers.ResteasyScannerDeployer.checkDeclaredApplicationClassAsServlet(ResteasyScannerDeployer.java:257)
> [:6.0.0.Final]    at
> org.jboss.resteasy.integration.deployers.ResteasyScannerDeployer.scan(ResteasyScannerDeployer.java:108)
> [:6.0.0.Final]    at
> org.jboss.resteasy.integration.deployers.ResteasyScannerDeployer.internalDeploy(ResteasyScannerDeployer.java:64)
> [:6.0.0.Final]    at
> org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1832)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1550)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1491)
> [:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654)
> [jboss-dependency.jar:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679)
> [:2.2.0.GA]   at
> org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.process(MainDeployerPlugin.java:106)
> [:6.0.0.Final]    at
> org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.process(ProfileControllerContext.java:143)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner$HDScanAction.deploy(HDScanner.java:240)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner$HDScanAction.complete(HDScanner.java:192)
> [:0.2.2]  at
> org.jboss.profileservice.management.TwoPCActionWrapper.doComplete(TwoPCActionWrapper.java:57)
> [:0.2.2]  at
> org.jboss.profileservice.management.actions.AbstractTwoPhaseModificationAction.complete(AbstractTwoPhaseModificationAction.java:74)
> [:0.2.2]  at
> org.jboss.profileservice.management.actions.AbstractTwoPhaseModificationAction.prepare(AbstractTwoPhaseModificationAction.java:95)
> [:0.2.2]  at
> org.jboss.profileservice.management.ModificationSession.prepare(ModificationSession.java:87)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.internalPerfom(AbstractActionController.java:234)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.performWrite(AbstractActionController.java:213)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.perform(AbstractActionController.java:150)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.perform(AbstractActionController.java:135)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner.scan(HDScanner.java:146)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner.run(HDScanner.java:90)
> [:0.2.2]  at
> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
> [:1.6.0_30]   at
> java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
> [:1.6.0_30]   at
> java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
> [:1.6.0_30]   at
> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
> [:1.6.0_30]   at
> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
> [:1.6.0_30]   at
> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
> [:1.6.0_30]   at
> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> [:1.6.0_30]   at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> [:1.6.0_30]   at java.lang.Thread.run(Thread.java:662) [:1.6.0_30]
> Caused by: java.lang.ClassNotFoundException:
> t1.server.GreetingServiceImpl from
> BaseClassLoader@47bebb{vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war}
>   at
> org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:480)
> [jboss-classloader.jar:2.2.0.GA]  at
> java.lang.ClassLoader.loadClass(ClassLoader.java:247) [:1.6.0_30]     at
> org.jboss.resteasy.integration.deployers.ResteasyScannerDeployer.checkDeclaredApplicationClassAsServlet(ResteasyScannerDeployer.java:253)
> [:6.0.0.Final]    ... 41 more 18:59:51,117 WARN 
> [org.jboss.profileservice.deployment.hotdeploy.HDScanner] Scan failed:
> org.jboss.deployers.client.spi.IncompleteDeploymentException: Summary
> of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):
> *** DEPLOYMENTS IN ERROR: Name -> Error vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war
> -> org.jboss.deployers.spi.DeploymentException: java.lang.ClassNotFoundException: t1.server.GreetingServiceImpl from
> BaseClassLoader@47bebb{vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war}
> DEPLOYMENTS IN ERROR:   Deployment
> "vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war"
> is in error due to the following reason(s):
> java.lang.ClassNotFoundException: t1.server.GreetingServiceImpl from
> BaseClassLoader@47bebb{vfs:///home/chun/Documents/dev/jboss-6.0.0/server/default/deploy/t1.war}
>   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1370)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1316)
> [:2.2.0.GA]   at
> org.jboss.deployers.plugins.main.MainDeployerImpl.checkComplete(MainDeployerImpl.java:968)
> [:2.2.0.GA]   at
> org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.checkComplete(MainDeployerPlugin.java:82)
> [:6.0.0.Final]    at
> org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.checkComplete(ProfileControllerContext.java:138)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner$HDScanAction.deploy(HDScanner.java:246)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner$HDScanAction.complete(HDScanner.java:192)
> [:0.2.2]  at
> org.jboss.profileservice.management.TwoPCActionWrapper.doComplete(TwoPCActionWrapper.java:57)
> [:0.2.2]  at
> org.jboss.profileservice.management.actions.AbstractTwoPhaseModificationAction.complete(AbstractTwoPhaseModificationAction.java:74)
> [:0.2.2]  at
> org.jboss.profileservice.management.actions.AbstractTwoPhaseModificationAction.prepare(AbstractTwoPhaseModificationAction.java:95)
> [:0.2.2]  at
> org.jboss.profileservice.management.ModificationSession.prepare(ModificationSession.java:87)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.internalPerfom(AbstractActionController.java:234)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.performWrite(AbstractActionController.java:213)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.perform(AbstractActionController.java:150)
> [:0.2.2]  at
> org.jboss.profileservice.management.AbstractActionController.perform(AbstractActionController.java:135)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner.scan(HDScanner.java:146)
> [:0.2.2]  at
> org.jboss.profileservice.deployment.hotdeploy.HDScanner.run(HDScanner.java:90)
> [:0.2.2]  at
> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
> [:1.6.0_30]   at
> java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
> [:1.6.0_30]   at
> java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
> [:1.6.0_30]   at
> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
> [:1.6.0_30]   at
> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
> [:1.6.0_30]   at
> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
> [:1.6.0_30]   at
> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> [:1.6.0_30]   at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> [:1.6.0_30]   at java.lang.Thread.run(Thread.java:662) [:1.6.0_30] 
```

* * *

这是我的 web.xml 文件

```
<web-app> 
  <!-- Servlets -->
  <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>t1.server.GreetingServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/t1/greet</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>T1.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

这是我的 servlet 代码：

```
package t1.server;

import t1.client.GreetingService;
import t1.shared.FieldVerifier;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

/**
 * The server side implementation of the RPC service.
 */
@SuppressWarnings("serial")
public class GreetingServiceImpl extends RemoteServiceServlet implements
        GreetingService {

    public String greetServer(String input) throws IllegalArgumentException {
        // Verify that the input is valid. 
        if (!FieldVerifier.isValidName(input)) {
            // If the input is not valid, throw an IllegalArgumentException back to
            // the client.
            throw new IllegalArgumentException(
                    "Name must be at least 4 characters long");
        }

        String serverInfo = getServletContext().getServerInfo();
        String userAgent = getThreadLocalRequest().getHeader("User-Agent");

        // Escape data from the client to avoid cross-site script vulnerabilities.
        input = escapeHtml(input);
        userAgent = escapeHtml(userAgent);

        return "Hello, " + input + "!<br><br>I am running " + serverInfo
                + ".<br><br>It looks like you are using:<br>" + userAgent;
    }

    /**
     * Escape an html string. Escaping data received from the client helps to
     * prevent cross-site script vulnerabilities.
     * 
     * @param html the html string to escape
     * @return the escaped string
     */
    private String escapeHtml(String html) {
        if (html == null) {
            return null;
        }
        return html.replaceAll("&", "&amp;").replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;");
    }
} 
```

我试图在没有成功的情况下解决这个问题。有人可以帮助我吗？请原谅我的英语水平！！！

这是文件夹的结构：

```
-----t1
 |     `-----gwt
 |      |     `-----clean
 |      |      |     `-----images
`-----WEB-INF
 |     `-----classes
 |      |     `-----t1
 |      |      |     `-----client
 |      |      |     `-----server
 |      |      |     `-----shared
 |     `-----deploy
 |      |     `-----t1
 |      |      |     `-----rpcPolicyManifest
 |      |      |      |     `-----manifests
 |     `-----lib 
```

# c# - 在联合身份令牌上获取“不是有效的 Base-64 字符串”

> ID：12752434
> 
> 赞同：6
> 
> 时间：2012-10-05T18:57:53.223
> 
> 标签：c#, asp.net-mvc, azure, wif

浏览我的 mvc3 azure web 角色时，我随机收到 base 64 编码错误。我正在使用带有被动身份验证的 WIF 对我的 ADFS 服务器进行身份验证。我无法确定这是从哪里来的，但我有一个想法，希望得到一些反馈/帮助。

从调用堆栈来看，它看起来像是来自一个坏 cookie。当我从 chrome 开发人员控制台查看我的 cookie 时，来自 wif/adfs 的“FedAuth”cookie 是唯一出现的东西。所以我在想这些 cookie 不知何故被损坏或其中包含无效字符。我正在努力验证这一点，但由于错误是随机发生的，因此需要一些时间。有没有人经历过类似的事情或有任何可能导致这种情况的倾向？任何帮助表示赞赏！

这是一个例外：

```
The input is not a valid Base-64 string as it contains a non-base 64 character, more      than two padding characters, or a non-white space character among the padding characters.
[FormatException: The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. ]
   System.Convert.FromBase64String(String s) +0
   Microsoft.IdentityModel.Web.ChunkedCookieHandler.ReadInternal(String name, HttpCookieCollection requestCookies) +613
   Microsoft.IdentityModel.Web.ChunkedCookieHandler.ReadCore(String name, HttpContext context) +174
   Microsoft.IdentityModel.Web.CookieHandler.Read(String name, HttpContext context) +133
   Microsoft.IdentityModel.Web.CookieHandler.Read(HttpContext context) +59
   Microsoft.IdentityModel.Web.CookieHandler.Read() +65
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +84
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +119
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +270 
```

我一直在对我的 cookie 进行更多测试，我可以看到每次请求我的 fedauth cookie 都会变得越来越大。这可能是问题的一部分或全部。最终，随机地添加了一些坏字符。令牌以这些结束标记“”结尾。我可以看到，当安全上下文令牌关闭标记后出现一些额外字符时，它会失败。每次发生错误时，额外的字符都不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:58:17.597

弄清楚了。哎呀...程序员错误...

当用户第一次登录我的应用程序时，我从我的数据库中提取一些角色信息并为他们创建声明。我每次都重新添加这些声明，所以我的会话令牌正在增长......并且增长......最终这导致令牌分成 2、3、4、5、6 个 cookie，最终有些东西只是窒息这。我不再每次都添加索赔。不再看到这个问题。

感谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:03:25.423

我有一个类似的错误消息，使用 base64 对查询字符串中的参数进行编码，我有一个 %3d 在查询字符串中显示良好，但是当我在代码中检索它时，asp.net 将它转换为一个 = 符号。我在解密 base64 之前通过调用 Server.UrlEncode() 解决了这个问题。可能是 cookie 中的 base64 值在被解密之前被解码。

# html - 流体（可堆叠）内容问题

> ID：12752437
> 
> 赞同：0
> 
> 时间：2012-10-05T18:58:13.133
> 
> 标签：html, css

我正在构建一个由 50% 宽度 div 和 25% 宽度 div 组成的流畅网站，我遇到的问题是对齐，特别是与 Chrome 对齐。

我在这里上传了代码：http: **//tekulated.com/test100/**

`.half { float: left; width: 50%; } .quater { float: left; width: 25%; } .half img, .quater img { width: 100%; display: block; }`

如果您在**Firefox**中加载示例并调整浏览器大小，您会发现它运行良好。然而，在**Chrome**中，div 会不成比例地增长，因此会产生很大的差距。

~ 删除`display: block`解决了这个问题，但是我遇到了图像填充问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:10:18.790

好的，所以发生的情况是，与它的行伙伴和边缘进入底行区域相比，您示例中的大红色框有点太大了，然后将框推到右侧，然后使最后一个框换行到下一个（逻辑）行

我认为确保大红色图像的高度与较小的行高成正比会有所帮助。这只是一个图像调整大小的问题。

希望有帮助。

# linux - 当两个线程轮询时，带有 POLLOUT 事件的 Poll() 始终返回 0，但与一个线程一起工作

> ID：12752439
> 
> 赞同：1
> 
> 时间：2012-10-05T18:58:29.040
> 
> 标签：linux, linux-kernel, driver, linux-device-driver

我正在使用一个名为 Netmap 的程序。我有两个接口（eth0 和 eth1），我在每个接口上创建了一个 netmap 实例。

我们将 eth0 的 netmap 实例的文件描述符称为**fd0**。Eth1 将是**fd1**。此外，这里的事件是**POLLOUT**。

如果我有一个线程轮询任一接口，则 poll() 总是返回正数。一旦我创建了第二个线程来轮询另一个接口，那么两个 poll() 调用都会返回 0。

示例：我在 fd0 上创建一个 poll() 线程。Poll() 总是返回一个正值。一旦我在 fd1 上 poll()，两个 poll 都返回 0。

为什么是这样？

# php - codeigniter 加入多行，其中

> ID：12752442
> 
> 赞同：1
> 
> 时间：2012-10-05T18:58:35.490
> 
> 标签：php, codeigniter, join, left-join

我正在尝试为 CodeIgniter 上编写的网站编写搜索功能，但模型中的 join 语句有问题。

控制器将一组搜索条件传递给模型函数： get_sales($search_criteria);

```
function get_sales($search_criterie){

    $this->db->join('sales_prices', 'sales_prices.sale_id = sales.sale_id', 'left');
    $this->db->join('sales_sizes', 'sales_sizes.sale_id = sales.sale_id', 'left');
    $query = $this->db->get_where('sales', $search_criterie);
    $sale_data = $query->result_array();

} 
```

我遇到了两个问题：

1) 我需要 sales_sizes 连接中的 WHERE 子句。现在它加入 sales_sizes.sale_id ON sales.sale_id 但我希望能够通过 $search_criteria 数组按大小过滤。我怎样才能做到这一点？

2）每个销售通常有多种尺寸，我希望查询的输出格式如下：

```
Array
(
    [sale_id] => 1
    [sale_category] => shoes
    [sale_price] => 29.99
    [sale_sizes] => Array
        (
            [0] => 10
            [1] => 10.5
            [2] => 11

        )

) 
```

我尝试了一些 foreach 循环来格式化输出，但无法让它工作。希望有人可以提供帮助。

更新：

如何将以下查询结果处理为上述格式？

```
Array
(
    [0] => Array
        (
            [sale_id] => 1
            [sale_category] => shoes
            [sale_price] => 29.99
            [sale_size] => 10
        )

    [1] => Array
        (
            [sale_id] => 1
            [sale_category] => shoes
            [sale_price] => 29.99
            [sale_size] => 10.5
        )

    [2] => Array
        (
            [sale_id] => 1
            [sale_category] => shoes
            [sale_price] => 29.99
            [sale_size] => 11    
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:45:06.523

我个人不太喜欢使用给定的活动记录。我发现它经常限制程序员编写更复杂的查询。如果您发现这也是正确的，您可以按如下方式重写您的查询：

```
$this->db->query('SELECT * FROM `sales_prices`, `sales_sizes` WHERE `sales_prices`.`sale_id` =   `sales`.`sale_id` AND `sales_sizes`.`sale_id` = `sales`.`sale_id` AND `sales`  = ?', array($search_criterie));
$sale_data = $query->results(); 
```

这将生成相同的结果，并且还将参数化您的查询。请注意，问号对应于数组中的值，这些值将构成`$this->db->query()`函数的第二个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:10:19.083

**试试这种类型的查询**

```
$this->db->select('places.*, category.*')
            ->from('places')
            ->join('category', 'places.category_id = category.category_id', 'left')
            ->join('places_reviews', 'places_reviews.place_id = places.id', 'left')
            ->where('places.category_id', $category_id)
            ->limit($limit, $offset)
            ->order_by($sort_by, $sort_order); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T18:26:35.187

下面的解决方案对你有用，它不会产生精确的输出，但非常接近一个。

```
$this->db->select('sales.*, GROUP_CONCAT(DISTINCT sales_prices.sale_id) as sales_price GROUP_CONCAT(DISTINCT sales_sizes.sale_id) as sales_size') 
```

这将为您生成一个逗号分隔的值。

# php - PHP 合并表格行

> ID：12752445
> 
> 赞同：0
> 
> 时间：2012-10-05T18:58:50.520
> 
> 标签：php, html-table

我得到了一个 DOMDocument 表，如下所示：

```
 name   | user      | comment
 -----------------------------
 Test   | user1     | Line 1
 Abc    | user2     | Line 1
        |           | Line 2
 Test2  | user3     | Line 1
 Test3  | user3     | Line 1
        |           | Line 2
        |           | Line 3 
```

如您所见，有时评论会覆盖多个表格行。（显然，当评论很长时）
当这些换行发生时，除了评论一个之外的所有字段都是空的。

如何将这些包装的评论合并在一起并输出？

我目前正在像这样输出它们：

```
foreach ($xml->getElementsByTagName('table')->item(1)->getElementsByTagName('tr') as $row) {
        echo "<tr>";
        foreach ($row->getElementsByTagName('td') as $column) {
            echo "<td>" . $column->textContent . "</td>";
        }
        echo "</tr>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:33:40.593

在您知道下一行包含什么之前，您正在输出每一行。另一种方法是将每一行存储在一个数组中，如果下一行满足特定条件（例如，换行），则允许您更正前一行。然后，您可以在处理后将结果数组输出为 HTML 表。

像这样的东西（未经测试）：

```
// build array
$rows = array();
$xmlRows = $xml->getElementsByTagName('table')->item(1)->getElementsByTagName('tr');
foreach ($xmlRows as $xmlRow) {
    $emptyFields = 0;
    $row = array();
    $xmlColumns = $xmlRow->getElementsByTagName('td');
    foreach ($xmlColumns as $xmlColumn) {
        if (empty($xmlColumn->textContent)) { // count empty fields
            $emptyFields++;
        }
        $row[] = $xmlColumn->textContent;
    }
    if ($emptyFields >= 2) { // detect if wrapping has occurred
        $lastRow = array_pop($rows); // remove last row from array
        $lastRow[2] .= $row[2]; // update last row with wrapped data
        $row = $lastRow; // use newly merged row
    }
    $rows[] = $row;
}
// output array
foreach ($rows as &$row) {
    $row = '<td>' . implode('</td><td>', $row) . '</td>';
}
echo '<table><tr>' . implode('</tr><tr>', $rows) . '</tr></table>'; 
```

# mysql - 如何在组中获得重复值

> ID：12752447
> 
> 赞同：2
> 
> 时间：2012-10-05T18:59:02.857
> 
> 标签：mysql, sql

我想使用单选查询查找组中重复值的数量。我不能使用我想在某个组中查找出现次数的 group by 列。

例如

```
obsid    Name      Value                 
1        Ronak     120
2        Ronak     125   
3        Ronak     120                      
4        Pankti    130                      
5        Pankti    130
6        Sanket    140     
7        Aakash    140
8        Unnat     120 
```

现在我想在 mysql 中开发选择查询，给我以下结果

```
obsid    Name      Value     Value_occurrence             
1        Ronak     120       2
2        Ronak     125       1              
4        Pankti    130       2              
6        Sanket    140       1
7        Aakash    140       1
8        Unnat     120       1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:01:22.897

```
SELECT min(obsid) AS obsid, Name, Value, COUNT(*) AS Value_occurence
FROM yourTable
GROUP BY Name, Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:00:59.583

按所需列分组并用于`COUNT`计算每组中的行数：

```
SELECT MIN(`obsid`) AS `obsid`, `Name`, `Value`, COUNT(*) AS Value_occurrence             
FROM yourtable
GROUP BY `Name`, `Value` 
```

试试[这个在线演示](http://sqlfiddle.com/#!2/723c0/2)，它显示了您的示例数据和上述查询的结果。

# regex - 按 VIM 中垃圾数字后出现的数字对列表进行排序

> ID：12752453
> 
> 赞同：5
> 
> 时间：2012-10-05T18:59:35.863
> 
> 标签：regex, sorting, vim

我需要对一些包含 1,000 个条目的列表进行排序和比较。列表如下所示：

```
11-2-3049_2007_squib.pdf
11-11-5476_2004_squib.pdf
13-2-5477_2006_squib.pdf
14-3-3045A_2004_squib.pdf
14-CMF-3046_2004_squib.pdf
14-2-3047_2005_squib.pdf
14-4-3048_2004_squib.pdf
15-7-3050P_2004_squib.pdf 
```

我希望按第二个`-`和之前的数字进行排序`_`，例如`3049`在第一个示例中。

我无法将按列排序和正则表达式的东西结合起来取得任何成功。大家有什么建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T19:06:10.760

这应该可以解决问题：

```
:sort r  /\v^(.{-}-){2}\zs.{-}\ze_/ 
```

看

```
:help sort 
```

这里的背景

正则表达式包含一些曲折：

*   `\v`进入*非常神奇*的模式（减少逃避的需要）
*   `\zs`并`\ze`标记实际匹配结果的开始和结束
*   `{-}`执行非贪婪的 kleene-star 匹配（在 Perl 表示法中，`.{-}`将是`.*?`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T19:10:49.287

使用外部`sort`程序：

```
:%!sort -n -t- -k3,3 
```

# uibutton - 使用 NSLayoutConstraint 实例化和设置 UIButton 子类的大小

> ID：12752454
> 
> 赞同：0
> 
> 时间：2012-10-05T18:59:36.907
> 
> 标签：uibutton, nslayoutconstraint

在实例化它时如何设置它的大小`UIButton`，准备好使用它`NSLayoutConstraint`？

代码：

```
UIButtonRaisedSilver *loginButton = [UIButtonRaisedSilver buttonWithType:UIButtonTypeCustom];
[loginButton addTarget:self action:@selector(login) forControlEvents:UIControlEventTouchUpInside];
[loginButton setTitle:@"Log in" forState:UIControlStateNormal];

NSDictionary *views = @{@"tableView" : self.tableView, @"loginButton": loginButton, @"signupButton": signupButton};

[NSLayoutConstraint constraintsWithVisualFormat:@"V:[tableView]-50-[loginButton()]"
                                        options:NSLayoutFormatAlignAllCenterX
                                        metrics:nil
                                          views:views]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:43:28.847

事实证明，宽度和高度也是 iOS6/(OSX 10.8) 中约束系统的一部分（我认为它的 10.8 - 尚未为 Mac OS 开发）。

确保约束是垂直的高度，并在括号中设置高度，如下所示...

例如：

```
[NSLayoutConstraint constraintsWithVisualFormat:@"V:[loginButton(30)]"
                                    options:NSLayoutFormatAlignAllCenterX
                                    metrics:nil
                                      views:views]; 
```

# django - django-social-auth 在 render_to_response 中的 NoReverseMatch

> ID：12752458
> 
> 赞同：1
> 
> 时间：2012-10-05T18:59:51.137
> 
> 标签：django, python-2.7

我只想制作一个页面，该页面具有使用 django-social-auth 登录到 twitter/facebook/google 的链接。

但我得到一个错误`NoReverseMatch: Reverse for '' with arguments '(u'twitter',)' and keyword arguments '{}' not found.`

```
 def index(request):
        ctx = {}
        return render_to_response('index_before_login.html', {}, RequestContext(request)) 
```

index_before_login.html 如下

```
<li><a href="{% url socialauth_begin 'twitter' %}">Enter using Twitter</a></li> 
```

urls.py 如下

```
 urlpatterns = patterns('',
        url(r'^$', 'lebabcartoon.views.index'),
        #url(r'^socialauth_', 'lebabcartoon.views.index'),
        url('', include('social_auth.urls')), 
```

我的环境是 Django ver1.5 Python 版本：2.7.3 django-social-auth：0.7.5

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:46:42.643

将 url 名称用引号括起来

```
{% url 'socialauth_begin' 'twitter' %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-16T22:47:04.283

使用新的 python-social-auth 和 django > 1.4 来拯救某人

用这个 ：

```
{% url 'social:begin' 'twitter' %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T18:27:55.077

我遇到了类似的问题，请尝试将以下内容添加到项目中的 url.py 文件中。

```
url(r'auth/', include('social_auth.urls')) 
```

并且还要确保你的 url 参数用引号括起来，像这样。

```
{% url "socialauth_begin" "twitter" %} 
```

# apache - 使用 Apache 部署 Trac 1.0 - 'chrome' 和 'site' 文件夹 MIA

> ID：12752463
> 
> 赞同：2
> 
> 时间：2012-10-05T18:59:59.790
> 
> 标签：apache, plugins, installation, trac

`Trac 1.0`我刚刚安装了using的副本`easy_install-2.6`，但在解读[安装文档](http://trac.edgewall.org/wiki/TracInstall)的“Deploy Trac”部分时遇到了麻烦。

发出后`easy_install-2.6 Trac=1.0`，我就这样创建了我的环境：

```
trac-admin /www/virtualhosts/trac initenv 
```

接下来，我设置权限：

```
chown -R apache.apache /www/virtualhosts/trac/ 
```

我的`/etc/httpd/conf.d/trac.conf`文件如下所示：

```
<Location /trac>
   SetHandler mod_python
   PythonHandler trac.web.modpython_frontend
   # "/www/virtualhosts/svn/trac" is the folder you gave to trac-admin initenv earlier
   PythonOption TracEnv /www/virtualhosts/trac
   # "/trac" is the same as the Location above
   PythonOption TracUriRoot /trac
   # "/tmp" should be some writable temporary directory
   SetEnv PYTHON_EGG_CACHE /tmp 
   # "trac" can be any string, but must be the same for all
   # Trac instances on the same Apache install
   PythonInterpreter trac
</Location>
<Location /trac/login>
   AuthType Basic
   AuthName "Trac User"
   AuthUserFile /www/virtualhosts/trac/conf/trac.htpasswd
   Require valid-user
</Location> 
```

我重新加载了 httpd 配置：

```
service httpd reload 
```

没有看到任何错误，我通过将浏览器指向`http://my.site/trac/`. Trac 应用程序加载正常。

在文档中，有一个关于**Deploying Trac**的部分。这是我有点模糊的地方。我的 trac 安装是否尚未部署？或者这是一个额外的步骤？

其次，在**Mapping Static Resources**下，文档解释了如何给两个目录取别名：chrome 和 site。在**Apache ScriptAlias**示例的开头，文档提供了以下命令：

```
trac-admin /var/trac/env deploy /path/to/trac/htdocs/common 
```

我的系统上没有 /var/trac/env。我找不到这个目录是在哪里创建的，除非它应该是在 Trac 1.0 的初始安装期间设置的。

有人可以解释创建 chrome/site 目录需要做什么吗？我知道这些是 Apache 的别名，但我没有得到上面引用的命令，其中 trac-admin 在 /var/trac/env 中使用了一些东西。该目录不存在，因此我无法发出该部署命令。

我需要 chrome/site 别名才能安装插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:17:26.373

一方面，不要使用 mod_python。它不再被维护，并且存在一些已知问题。 [设置您的服务器以使用 WSGI](http://trac.edgewall.org/wiki/TracModWSGI)将为您提供更好的体验。

特别是关于`deploy`命令，Trac 文档确实可以更清楚一点。我相信这两个目录路径都只是占位符，到目前为止与文档中使用的路径没有任何关系。它们只是为了匹配后面的配置文件示例中使用的路径。

根据您提供的信息和我设置 Trac 系统时的笔记，请尝试以下命令：

```
trac-admin /www/virtualhosts/trac deploy /www/virtualhosts/trac/deploy 
```

这应该`deploy`在您的 Trac 目录中创建一个子目录，并使用“cgi-bin”和“htdocs”子文件夹填充它。从那里，只需根据您正在执行的部署类型修改您的 Apache 配置文件（有关[FastCGI](http://trac.edgewall.org/wiki/TracFastCgi)和[WSGI](http://trac.edgewall.org/wiki/TracModWSGI)页面的更多详细信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T23:16:58.700

*/var/trac/env*的意思是`/path/to/trac-env`，在您的情况下转换为`/www/virtualhosts/svn/trac`- 您的“Trac 环境”在光盘上的真实位置。

该`deploy`指令实际上创建了新目录并将静态内容提取到其中，如您所知，Trac 以及 Trac 插件资源。每当您更新`trac/htdocs`内容时，您都可以重复调用它。您甚至可以将这样的一种`trac/htdocs/common`用于由同一 Trac 版本提供的多个 Trac 环境。只需确保检查目录权限以确保来自 Web 服务器进程的读取访问权限。

`chrome/site`根本不是真正的目录，只是对目录的引用`<trac-env>/htdocs`。

仍然有一些插件需要解压才能正常工作，所以你也需要[设置一个缓存目录](http://trac.edgewall.org/wiki/TracInstall#SettingupthePluginCache)。

# css - CSS 类别列表中的间距

> ID：12752466
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:00:05.327
> 
> 标签：css, whitespace

请查看此页面：
[http](http://www.technodoze.com)
://www.technodoze.com 查看页面右侧类别中的按钮。
请参阅“提示和技巧”一词。
问题1：
在整个列中展开。
问题是：我希望我的单元格仅根据文本字符串进行扩展，但看起来很尴尬。
问题 2：
查看链接 Web Designing，其中一半位于一条线上，另一条位于另一条线上，我希望它位于同一条线上。（一个`<a>`链接，一行。）
我的代码：

```
<style type="text/css">
  .cat_link a, .cat_link a:hover, .cat_link a:focus{
  padding: 0.25em;
  color:#3B5998;
  font-family: Verdana;
  text-decoration: none;
  border:1px solid #DADADA;
  border-radius: 5px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  background: #EDEFF4;
  margin-left: 0;
  margin-right: 0;
  line-height:2;
  margin-top: 1em;
  margin-bottom: 1em;
}
  .cat_link {
  line-height:2;
}
</style> 
```

HTML 代码：

```
<p class="cat_link">
  <a href="http://www.technodoze.com/search/label/Cell%20Phones">Cell Phones</a>
  <a href="http://www.technodoze.com/search/label/Android">Android</a>
  <a href="http://www.technodoze.com/search/label/Tips%20and%20Tricks">Tips and Tricks</a>
  <a href="http://www.technodoze.com/search/label/Amazing">Amazing</a>
  <a href="http://www.technodoze.com/search/label/Web%20Designing">Web Designing</a>
  <a href="http://www.technodoze.com/search/label/Windows%20Tips">Windows Tips</a>
  <a href="http://www.technodoze.com/search/label/Physics">Physics</a>
  <a href="http://www.technodoze.com/search/label/CSS">CSS</a>
  <a href="http://www.technodoze.com/search/label/CSS%203">CSS 3</a>
  <a href="http://www.technodoze.com/search/label/Communication">Communication</a>
  <a href="http://www.technodoze.com/search/label/Facebook%20tips">Facebook Tips</a>
  <a href="http://www.technodoze.com/search/label/Dajjal">Dajjal</a>
  <a href="http://www.technodoze.com/search/label/Bermuda%20Triangle">Bermuda Triangle</a>
</p> 
```

如果可以的话，请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:07:32.117

您已`text-align: justify`在页面正文上设置；为这些类别标签重置它，`text-align: left`它将修复那个奇怪的间距。

为确保文本不会像您在问题 #2 中描述的那样换行，请`white-space: nowrap`在每个类别标签（选择器`.cat_link a`）上进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:12:25.473

问题1：解决了`text-align:left`-

问题2：可以`display:block;`在a元素中放入a来强制换行，但是如果文本比容器大的话就会换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:12:37.360

将此添加到 css 类

```
.cat_link{
   text-align: left ;  /* gets rid of wierd white space */
}

.cat_link a{
    white-space: nowrap;   /*stops buttons from taking up two lines */
   } 
```

# java - 向 TitleAreaDialog 添加关键侦听器

> ID：12752468
> 
> 赞同：0
> 
> 时间：2012-10-05T19:00:16.620
> 
> 标签：java, swt, eclipse-rcp, jface, keylistener

我需要为我添加一个关键监听`TitelAreaDialog`器，有什么解决方案可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:06:55.997

您可以使用以下方法添加`Listener`一个`Display`：

```
Listener listener = new Listener() {
    public void handleEvent(Event event) {
        System.out.println(event.character);
    }
}
getShell().getDisplay().addFilter(SWT.KeyDown, listener); 
```

这将在不消耗事件的情况下输出所有按下的键，即底层小部件仍将注册事件。

* * *

`close()`请记住在 的方法中再次删除它`Dialog`：

```
@Override
public boolean close()
{
    getShell().getDisplay().removeFilter(SWT.KeyDown, listener);
    super.close();
} 
```

# magento - Magento - 交易电子邮件 - 变量

> ID：12752472
> 
> 赞同：0
> 
> 时间：2012-10-05T19:00:34.740
> 
> 标签：magento, variables, invoice

是否可以在 creditmemo 电子邮件中使用 {{var invoice.increment_id}}？如果我这样做是行不通的...

```
<p><strong>Bestellnummer:</strong> {{var order.increment_id}}</p>
<p><strong>Datum:</strong> {{var creditmemo.created_at}}</p>
<p><strong>Rechnung:</strong> {{var invoice.increment_id}}</p>
<p>Liebe(r) {{htmlescape var=$order.getCustomerName()}},<br/><br/> 
```

不工作。有人对我有提示吗？谢谢！

编辑
这是正确的吗？编辑 Mage_Sales_Model_Order_Creditmemo 类并添加：

```
//Get Invocie from order Object 
        if ($order->hasInvoices()) {
            // "$_eachInvoice" is each of the Invoice object of the order "$order"
            foreach ($order->getInvoiceCollection() as $_eachInvoice) {
                $invoice = $_eachInvoice->getIncrementId();
            }

            //$invoice = $order->getInvoiceCollection();
        } 
```

也

```
$mailer->setTemplateParams(array(
                'order'      => $order,
                'creditmemo' => $this,
                'comment'    => $comment,
                'invoice'    => $invoice,
                'billing'    => $order->getBillingAddress()
            )
        ); 
```

然后在我的电子邮件模板中调用变量 {{var invoice}}？
但它没有显示，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:24:39.633

您应该在模块中重写`Mage_Sales_Model_Order_Creditmemo`模型并将所需的逻辑添加到`sendUpdateEmail()`方法中以在贷项通知单电子邮件模板中获取发票对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:49:32.657

见我的第一篇文章。我猜对了。感谢扎瓦。
问题是，您必须将此代码放在 sendUpdateEMail() 之上的一种方法，在 sendEmail() 中。

谢谢！

# shell - SSL 证书客户端验证 - 如何？

> ID：12752487
> 
> 赞同：0
> 
> 时间：2012-10-05T19:01:47.110
> 
> 标签：shell, unix, ssl, ssl-certificate, client-certificates

我们正在 Windows 2008 Server 中使用 F5 负载平衡器设置 VIP。我的 IT 部门已经设置了这个 VPI URL [https://mydomain.com](https://mydomain.com) & 我需要在下面的场景中进行测试，但不知道该怎么做？

```
SSL termination should happen for all requests.
Should reject/drop the request if client SSL does not match.
Forward the request to my application, if client SSL matches. 
```

糟糕的是，在负载均衡器上配置证书的方式是，如果客户端 SSL 不匹配，LB 将拒绝请求，并且只有在客户端 SSL 匹配时才会接受它。

谁能告诉我如何使用一些shell脚本或其他方式来测试它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:25:34.697

您可以使用[openssl s_client](http://www.openssl.org/docs/apps/s_client.html)或[curl](http://curl.haxx.se/docs/manpage.html)：

```
$ curl --cert bogus_cert.pem https://mydomain.com 
```

# html - 奇怪的 抵消

> ID：12752493
> 
> 赞同：1
> 
> 时间：2012-10-05T19:02:36.027
> 
> 标签：html, css

我有 3`<div>`个并排放置的块。它们是**相同**的，唯一的区别是最后一个`<div>`（在最右边）有更多的文本。但是，所有块都具有固定的宽度和高度。出于某种原因，最后一个`<div>`位置比其他位置高。我这辈子都想不通！

见这里：http: [//jsfiddle.net/ZrSF4/](http://jsfiddle.net/ZrSF4/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:04:37.903

您应该适用`vertical-align: top`于所有 div：http: [//jsfiddle.net/ZrSF4/1/](http://jsfiddle.net/ZrSF4/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:04:55.433

然后你必须垂直对齐，例如`vertical-align:top;`

[http://jsfiddle.net/ZrSF4/2/](http://jsfiddle.net/ZrSF4/2/)

# c++ - g++,如何找到出错的地方？

> ID：12752494
> 
> 赞同：-5
> 
> 时间：2012-10-05T19:02:36.403
> 
> 标签：c++, compiler-errors, g++, segmentation-fault

伙计们！我写了一个 C++ 源代码。但是我发现某个地方有错误。

“分段错误：11”

但我不知道有关错误的详细信息以及在哪里修复？

你们知道一些命令可以显示错误在哪里。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:09:33.383

对于`gcc`生成的代码，您通常使用`gdb`基于 - 的工具或`gdb`本身。赶紧跑

```
gdb <program> 
```

...然后在里面`gdb`：

```
run <arguments> 
```

...它会在崩溃发生的地方停止。

要使用调试信息获得有关要编译的程序位置的合理信息，即使用该`-g`选项。为避免混淆，您可能希望编译时不进行优化，即不带任何`-O...`选项。但是，某些错误仅在打开优化时才会触发（注意：这些通常仍然是您的代码中的错误，而**不是**优化器中的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:04:53.100

使用 GNU 调试器 (GDB)。添加断点并运行代码。在这里你可以找到东西。[http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html](http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:09:07.083

听起来您的程序正在尝试访问无效（不存在）的地址。它也有可能试图访问未对齐的数据。我之前在尝试访问未对齐的结构时已经看到了这一点。

阅读分段错误：[http ://en.wikipedia.org/wiki/Segmentation_fault](http://en.wikipedia.org/wiki/Segmentation_fault)

# get - 关于GET的幂等性

> ID：12752497
> 
> 赞同：7
> 
> 时间：2012-10-05T19:02:51.267
> 
> 标签：get, idempotent

我一直在阅读 GET HTTP 方法，尤其是它的幂等性。

这是我的理解：如果我调用 GET 操作 1 次或 100 万次（或任意次数），结果应该是相同的。

我对这个定义的问题是这样的。
想象一下，如果我有一个电影数据库，并且我执行了一个 GET 操作，在该操作中我返回了数据库中的所有詹姆斯邦德电影。
想象一下，我运行这个查询一百万次，在第 500,000 次之后，其他人在数据库上运行 POST 查询，添加了一部新的邦德电影。
好吧，现在一半的 GET 操作返回 N 个结果，另一半返回 N+1 个结果。

这不是像通常描述的那样破坏幂等性吗？**一个函数的幂等性是不是更好的定义是只要底层数据不变，**
无论执行多少次，它都会返回相同的结果？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:05:11.037

GET idempotent 因为它不（或不应该）改变资源。这并不要求资源是静态的，并且没有其他任何东西（如帖子）永远不会改变它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:05:53.043

`GET`幂等性是关于调用不会改变被调用的资源这一事实。

其他方法做什么是另一回事。**

# json - 通过 PHP 获取 Google Books API 数据时遇到问题

> ID：12752504
> 
> 赞同：1
> 
> 时间：2012-10-05T19:03:14.893
> 
> 标签：json, curl, google-books

当前代码采用表单输入并对其执行此操作：

```
$apikey = 'myapikey';
$q = urlencode($bookSearchTerm);
$endpoint = 'https://www.googleapis.com/books/v1/volumes?q=' . $q . '&key=' . $apikey;
$session = curl_init($endpoint);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($session);
curl_close($session);
$search_results = json_decode($data);
if ($search_results === NULL) die('Error parsing json'); 
```

只是为了踢球，我也做过

```
echo $endpoint; 
```

这表明

```
https://www.googleapis.com/books/v1/volumes?q=lord+of+the+rings&key=myapikey 
```

当我将该 URL 输入浏览器时，我得到一个全屏数据，告诉我，除其他外，有 814 个项目。

然而，当我在页面上运行代码时，我得到

```
Error parsing json 
```

有人可以告诉我哪里出错了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:32:16.703

通过对评论的回复，可以设置，也可以不设置。也可能是解析器无法解析返回的内容，因为它的数据格式不正确。检查`$data`结果是什么。如果它是正确的，那么 PHP 站点上的 json_decode 文档可能是它对于解析器来说太大而无法解析（达到递归限制），尽管我对此表示怀疑。

返回的内容可能会溢出 PHP 分配的内存限制。PHP 将 JSON 解析为关联数组或编号数组，这可能会很昂贵。因此，如果您返回的内容太大，它将无法完成解析并仅返回 null。

# jquery - Coffeescript中的基本jquery onload动画

> ID：12752510
> 
> 赞同：2
> 
> 时间：2012-10-05T19:03:41.550
> 
> 标签：jquery, coffeescript

我对这个咖啡脚本完全陌生，但 Rails 似乎希望我使用它，所以我正在尝试一下。

我有点了解咖啡脚本页面上的基本示例，但我不确定如何将此 jquery 函数转换为咖啡脚本

```
$(function() {
   $('#alert').delay(100).show("drop", { direction:"up" }, 900);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:12:23.823

[InPursuit](https://stackoverflow.com/users/631017/inpursuit)是正确的，但我相信`$ ->`它更像是一种咖啡成语。

```
$ ->
  $('#alert').delay(100).show 'drop', direction: "up", 900 
```

...编译为：

```
$(function() {
  return $('#alert').delay(100).show('drop', {
    direction: "up"
  }, 900);
}); 
```

查看[此链接](http://coffeescript.org/#try:$%20-%3E%0A%20%20$%28%27#alert%27%29.delay%28100%29.show%20%27drop%27,%20direction:%20%22up%22,%20900)以查看它的实际效果，并与咖啡 repl 一起玩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:08:35.127

这应该有效：

```
$(() ->
  $('#alert').delay(100).show('drop', {direction:"up"}, 900)) 
```

# syntax-highlighting - 将语法突出显示从其他编辑器导入 Joe 编辑器？

> ID：12752511
> 
> 赞同：3
> 
> 时间：2012-10-05T19:03:45.277
> 
> 标签：syntax-highlighting, joe-editor

有谁知道/有任何关于乔的好语法亮点？

我喜欢这个编辑器，但是我无法忍受 Joe 默认自带的语法高亮。我真的很喜欢 Vim、nano 或 notepad++ 等其他编辑器附带的默认语法突出显示，但 joe 的……是的。

有没有什么简单的方法可以将 Vim 或 nano 或 notepad++ (heh) 或之类的语法高亮导入到 joe 中？我试图研究更改 joe 中的语法突出显示，但我无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-03T03:07:13.570

github 用户[cmur2](https://github.com/cmur2) (Christian Nicolai) 为 JOE 提供了大量改进的语法亮点。

[https://github.com/cmur2/joe-syntax](https://github.com/cmur2/joe-syntax)

该存储库包含一个 README.md，它解释了如何使用改进的语法突出显示配置。

# iphone - 将字符串保存到属性列表（plist）文件？

> ID：12752513
> 
> 赞同：0
> 
> 时间：2012-10-05T19:03:55.480
> 
> 标签：iphone, arrays, plist

我一直在尝试保存到属性列表文件，但是它不起作用，因为它只是将对象保存到数组而不是实际文件本身，这意味着它保存的内容并没有明显持久化。

```
[[category objectAtIndex:questionCounter] replaceObjectAtIndex:5 withObject:myString];
[category writeToFile:filePath atomically:YES]; 
```

我之前使用它来将属性列表文件保存到文档目录，以便我可以编辑并保存到它们：

```
NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *plistFilePath = [documentsDirectory stringByAppendingPathComponent:fileNameFull];

if([[NSFileManager defaultManager] fileExistsAtPath:plistFilePath]) {

    category = [NSMutableArray arrayWithContentsOfFile:plistFilePath];

    NSLog(@"Files exist.");

}
else {

    filePath = [[NSBundle mainBundle] pathForResource:fileNamer ofType:@"plist"];
    category = [NSMutableArray arrayWithContentsOfFile:filePath];

    NSLog(@"Files have been created.");

} 
```

我的属性列表由数组组成，在这些数组中我试图保存我的对象（字符串）。我有一种感觉，这是微不足道的，但我无法发现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:14:04.507

当你试图保存你的数组时，你正在传递`filePath`which 指向你不能写入的主包目录。您想`plistFilePath`改用，如下所示：

```
[category writeToFile:plistFilePath atomically:YES]; 
```

# sql-server-2005 - VB6 如何捕获 ADO 命令超时错误并显示自定义 MsgBox

> ID：12752515
> 
> 赞同：0
> 
> 时间：2012-10-05T19:04:02.163
> 
> 标签：sql-server-2005, vb6

我查看了所有的 VB6 错误号都无济于事，似乎命令对象本身负责后台的错误消息框。我需要知道的是他们是否以某种方式更改 ADODB.CommandTimeout 错误本身的 MsgBox。我的第一个想法是捕获错误（使用错误号），然后以这种方式设置一个 MsgBox。但是，我找不到有关处理 ADO 事件的任何错误号的任何文档。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:22:42.953

好吧，我变得聪明并使用了这个：

```
On Error GoTo ERRS
....
ERRS:
    MsgBox Err.Number 
```

这给了我要捕获的特定错误号（在本例中：“-2147217871”），然后使用简单的 If 语句来测试错误号是否 = -2147217871，如果是，则显示我的 MsgBox。像魅力一样工作（嗯，我猜，和 VB6 和 ADO 一样多的“魅力”）。我仍然习惯于 VB6 的遗留错误处理。感谢 paulsm4 或您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:13:05.917

不管它值多少钱，错误代码都是 0x80040e31。您可以谷歌搜索“错误 80040e31 超时已过期”。当然，您可以在代码中检查该错误状态。

以下是 ADO 错误代码列表：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms677004%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677004%28v=vs.85%29.aspx)

# sql - sql过程中的文件名

> ID：12752516
> 
> 赞同：0
> 
> 时间：2012-10-05T19:04:03.740
> 
> 标签：sql, sql-server, sql-server-2008

我在 T-SQL 中有这个工作

插入 provaxml (arquivo)

```
sELECT  CAST(BulkColumn AS XML) FROM OPENROWSET(BULK N'C:\2012-09\myfile.xml', SINGLE_BLOB)as arquivo 
```

我正在尝试编写一个程序：

```
alter proc adentro (@nome nvarchar(max))as
insert into provaxml  (arquivo)
sELECT  CAST(BulkColumn AS XML) FROM OPENROWSET(BULK N'C:\2012-09\myfile.xml', SINGLE_BLOB)as arquivo 
```

我必须如何写才能通过变量@nome 更改文件名我尝试过这种方式但没有用

```
 alter proc adentro (@nome nvarchar(max))as
insert into provaxml  (arquivo)
sELECT  CAST(BulkColumn AS XML) FROM OPENROWSET(BULK N @nome, SINGLE_BLOB)as arquivo 
```

提前致谢

亚历杭德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:17:32.243

尝试这样的事情......（我昨天刚刚使用这种技术进行了类似的查询）

```
DECLARE @sql varchar(4000);
SET @sql = 'INSERT INTO provaxml (arquivo) SELECT CAST(BulkColumn AS XML) FROM OPENROWSET(BULK ''' + @nome + ''', SINGLE_BLOB) as arquivo';

EXEC( @sql ); 
```

我把这个包裹在一个游标里（我知道......我是一个使用游标的坏孩子。但我认为这是一个很好的用途），这样我就可以在每次迭代时用不同的文件名填充我的变量.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:34:38.713

谢谢 DeadZone 我用这段代码写过并且正在工作

ALTER proc [dbo].[adenti] (@entra nvarchar(max))as DECLARE @sql varchar(4000); SET @sql = 'INSERT INTO provaxml (arquivo) SELECT CAST(BulkColumn AS XML) FROM OPENROWSET(BULK ''' + @entra + ''', SINGLE_BLOB) as arquivo'; 执行（@sql）；

# html - 如何使用 CSS 选择和设置所有具有 UL 子元素的 LI 元素？

> ID：12752518
> 
> 赞同：2
> 
> 时间：2012-10-05T19:04:15.203
> 
> 标签：html, css

> **可能重复：**
> [活动孩子的父母的复杂 CSS 选择器](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)

我正在制作一个 CSS 上下文菜单，我希望所有具有子菜单的列表项的样式都不同，以便向用户直观地表示它们具有子菜单。

上下文菜单是一个 UL 元素，它的列表项是 LI，子菜单是 UL。**我已经有了功能**，我只需要能够以不同的方式设置子菜单项的样式，以便它们明显不同。

## 代码和伪代码：

* * *

我有什么（工作CSS）：

```
.bhContextMenu,
.bhContextMenu LI UL{
background:white;
background:rgba(255,255,255,0.95);
border:0.5mm solid lightgray;
border-color:rgba(0,0,0,0.25);
border-radius:1mm;
box-shadow:0 1mm 2mm lightgray;
box-shadow:0 1mm 2mm rgba(0,0,0,0.25);
cursor:default;
display:none;
list-style:none;
margin:0;
padding:0;
position:absolute;
width:1.5in;
}
.bhContextMenu LI{
padding:1mm 4mm;
}
.bhContextMenu LI:hover{
 background: lightgray;
 background: rgba(0,0,0,0.1);
}
.bhContextMenu LI UL{
display:none;
list-style:none;
position:absolute;
left:1.5in;
margin-top:-1.5em;
}
.bhContextMenu LI:hover UL,
.bhContextMenu LI UL:hover{
display:block;
}
.bhContextMenu HR{
border: none;
border-bottom: 0.5mm solid lightgray;
} 
```

我还想要什么（伪代码）：

```
.bhContextMenu LI contining UL{
font-weight:bold;/* or something */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:15:50.387

除非您只[区分空元素和非空元素](http://reference.sitepoint.com/css/pseudoclass-empty)（您不是...），否则您不能根据元素的内容来选择元素。

你能做的是

1.  更改您的标记为包含子菜单的菜单项添加一个类，并为其设置样式。

2.  在“不可见/折叠”模式下更改子菜单的样式，以便它们实际上可见，但仅作为一个小箭头或您想使用的其他任何东西来指示那里有一个子菜单。在这里演示：http: [//jsbin.com/ojociq/1/edit](http://jsbin.com/ojociq/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:25:04.337

如前所述，您所要求的无法使用 CSS 选择器解决（请参阅[规范](http://www.w3.org/TR/css3-selectors/#selectors)）。

当然，您可以将类添加到列表项中，但解决您需要的最简单的方法是一行简单的 jQuery 脚本：

```
$('li').has('ul').addClass('has-ul');​ 
```

[演示](http://jsfiddle.net/ZSXTk/)

# javascript - SVG 捕获鼠标坐标

> ID：12752519
> 
> 赞同：17
> 
> 时间：2012-10-05T19:04:22.630
> 
> 标签：javascript, svg

我知道有关 svg 鼠标坐标的问题以前在这里被问过，但我对我正在经历的当前行为感到非常困惑，而且似乎没有一个线程能够解决这个问题。

我用于捕获坐标的方法：

```
var pt = svg.createSVGPoint();  // Created once for document

function alert_coords(evt) {
    pt.x = evt.clientX;
    pt.y = evt.clientY;

    // The cursor point, translated into svg coordinates
    var cursorpt =  pt.matrixTransform(svg.getScreenCTM().inverse());
    console.log("(" + cursorpt.x + ", " + cursorpt.y + ")");
} 
```

问题在于将鼠标点击坐标转换为用户空间中的 svg 坐标。我正在使用坐标在屏幕上拖动一个矩形，并且随着光标在 svg 空间中进一步向右移动，坐标变得越来越倾斜。为了以简单的方式对此进行测试，我在全局 svg 空间中放置了三个矩形，分别位于 (100, 500)、(500, 500)、(1000, 500) 和 (1000, 200)。使用一个简单的记录功能，我收到的坐标（加或减 5 表示鼠标不精确）是 (98, 473), (487, 470), (969, 471), (969, 190)。正如您所看到的，鼠标沿着 x 或 y 轴移动得越远，它变得越不准确。我尝试使用与捕获鼠标坐标相同的方法在小提琴中复制它，但我无法在那里复制它...... 另一件可能很重要的事情是，当我记录 svg 文档时，宽度和高度设置为略小于视图框值的值，即。给定视图框值为“0 0 1400 700”的情况下，宽度为 1380，高​​度为 676。无论如何，这是小提琴，所有 svg 属性都与我的程序中的相同。

[http://jsfiddle.net/ASLma/11/](http://jsfiddle.net/ASLma/11/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T17:30:16.147

似乎问题是直接在浏览器中打开 svg。相反，我通过 embed 标签将它嵌入到 html 页面中，效果很好。我不确定为什么这对我的鼠标坐标精度很重要，但解决方案就是解决方案。

# android - Spinner 是否有 TextChangedListener 的替代品

> ID：12752535
> 
> 赞同：1
> 
> 时间：2012-10-05T19:05:35.173
> 
> 标签：android, spinner, textchanged

通过阅读 Android 文档，我了解到无法将 addTextChangedListener 用于 Spinner，但是是否有我缺少的替代方法？

我已经创建了许多表单，并且我想在有未保存的更改时通知用户（当我使用 EditText 框时我可以这样做）。

下面是 EditText 的 textChangeListener 示例：

```
 inspectionReferenceEditText.addTextChangedListener(new TextWatcher(){
         public void afterTextChanged(Editable s) {
         }
         public void beforeTextChanged(CharSequence s, int start, int count, int after) {
         }
         public void onTextChanged(CharSequence s, int start, int before, int count) {
             changesMade = true;
         } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:10:12.470

由于 Spinner 不涉及用户输入文本，我看不出 TextWatcher 将如何提供帮助。但是，您可以使用[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)在用户进行更改时收到通知。

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    int previous = -1;
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        if(previous != position && previous < -1) {
            Log.v("Example", "Item Selected: " + parent.getItemAtPosition(position).toString());
            // Do something
        }
        previous = position;
    }

    public void onNothingSelected(AdapterView<?> parent) {}
}); 
```

# ios - 将对象中的值从 1 更改为 true

> ID：12752541
> 
> 赞同：0
> 
> 时间：2012-10-05T19:06:04.143
> 
> 标签：ios, format-specifiers

我有一个对象，其中包含值 1 或 0 表示真或假。例如，让我们称我的对象 Stuff 和东西看起来像这样。

```
@interface Stuff : NSObject {

NSString *_boolValue1;
NSString *_boolValue2;
} 
```

当我用值填充我的实体时，例如： Stuff *stuff = [[Stuff alloc] init...] 如果我使用 NSLog 显示存储在 boolValue1 和 boolValue2 中的值，它们可能会输出 1 或 0。我想使用 NSLog 输出类似 [stuff.boolValue1 == 1 ？@“真假”]。我错过了什么？我收到格式指定类型“id”但参数类型为“BOOL”的错误...

```
NSString *myStr = [NSString stringWithFormat:@"%@", [stuff.boolValue1 isEqualToString:@"1" ? @"true" : @"false"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:11:44.323

您的括号只是在错误的位置，因为 isEqualToString 运算符返回布尔值。

```
NSString *myStr = [NSString stringWithFormat:@"%@", [stuff.boolValue1 isEqualToString:@"1"] ? @"true" : @"false"]; 
```

或者，更简单、更典型的方式，使用以下评论中的建议：

```
NSString *myStr = [NSString stringWithFormat:@"%@", [stuff.boolValue1 boolValue] ? @"true" : @"false"]; 
```

# php - PhpStorm中单个文件中红色波浪线的含义

> ID：12752542
> 
> 赞同：12
> 
> 时间：2012-10-05T19:06:06.073
> 
> 标签：php, ide, phpstorm

我正在使用 PhpStorm IDE，并且仅在一个特定文件中，它开始显示文件名和路由到带有红色下划线的文件的文件夹名称（就像文本处理器中的拼写错误）。没有什么重要的，它总是吸引我的眼球。任何人都知道原因以及如何更好地摆脱它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T19:18:09.957

这些线条表示存在检查错误。可以通过查看该文件并检查红色条的右边距来定位错误，如下所示：

![在此处输入图像描述](../Images/6ed99a97976e2dec8c6e82a1f2819e78.png)

然后你会看到，类似于 Word，在文本行下方有一个波浪线，类似于以下内容：

![在此处输入图像描述](../Images/6b17e78b6d7fdb78379d9f31ffcd132d.png)

如果检查看起来不正确，请检查 PHP 版本的设置（文件 > 设置 > 项目设置 > PHP > PHP 语言级别）。如果您确定检查无效，您可以通过单击出现错误的位置然后使用左侧的红色“灯泡”将其关闭：

![在此处输入图像描述](../Images/e61c5198abca5427f883f38e43cd7245.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:12:25.567

我想我会用这个词作为答案......

会猜测它认为这些文件（汇总到文件夹）包含错误。在编辑器的左边距查看有问题的文件。猜测他们都有感知到的错误。PDT / Zend Studio 也是如此。

见红色 X：http: [//imagebin.org/231026](http://imagebin.org/231026)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:14:09.540

你试过悬停在红线上吗？当您这样做时，应该会弹出实际的错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-12T14:55:15.477

有时，如果您使用“自动复制”js 从 Web（例如 gii）复制代码，可能会发生这种情况。
编码混淆了。

如果您从 Gii 复制源代码，请使用鼠标手动选择它。

# javascript - 转义 SVG 以嵌入文本

> ID：12752544
> 
> 赞同：0
> 
> 时间：2012-10-05T19:06:11.093
> 
> 标签：javascript, svg, escaping

我有一个 SVG 文档，其中包含一个如下所示的组：

```
<g xml:id="id10883">
     <textArea fill="#ffffff" xml:id="id1900" xml:space="preserve">[SPX][departure]</textArea>
</g> 
```

[SPX][departure] 在运行时被 JavaScript 映射中的适当值替换。我如何输入类似的数据作为填充值，例如

```
<g xml:id="id10883">
     <textArea fill="[SPX][color]" xml:id="id1900" xml:space="preserve">[SPX][departure]</textArea>
</g> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:20:30.133

为什么不直接向元素添加一个类呢？

```
<g xml:id="id10883">
    <textArea class="spx_color" xml:id="id1900" xml:space="preserve">[SPX][departure]</textArea>
</g> 
```

然后，您可以简单地执行以下操作：

```
var spx_color = document.getElementsByClassName("spx_color");
for (var i = 0, l = spx_color.length; i < l; ++i) {
    spx_color[i].setAttribute("fill", "#ffffff");
} 
```

如果你想保留你的占位符`[SPX][color]`，你可以这样做：

```
var elements = document.getElementsByTagName("*");
for (var i = 0, l = elements.length; i < l; ++i) {
    if (elements[i].getAttribute("fill") == "[SPX][color]") {
        elements[i].setAttribute("fill", "#ffffff");
    }
} 
```

请注意，此代码实际上并不是那么高效，因为它遍历了所有 DOM 元素。所以你应该根据你现有的代码来改变它（例如只获取`textArea`元素......）。

# c# - 更改会话参数/变量

> ID：12752547
> 
> 赞同：0
> 
> 时间：2012-10-05T19:06:20.627
> 
> 标签：c#, debugging, asp.net-4.0, session-variables

因为我试图通过使用`QueryString`as data to evaluate 来测试/调试我的应用程序。

我试图通过会话变量实现相同的方法

在我[关于 QueryStrings 的另](https://stackoverflow.com/questions/12544893/altering-querystring-parameters-values)一篇文章中，我正在寻找一种通过辅助方法操作 QueryString 的方法。

现在我正在尝试使用与 QueryStrings 相同的方法继续并尝试对会话变量进行相同的操作

代码是

```
 public static class Sesion
    {
    public sealed class Act
    {
    public const string edit = "edit", add = "add", remove = "remove", replace = "replace";
    }

            public static void Modify(string action, string New_Value, string CurSes_ParamName, string NewSession_paramName = null, bool redirectWithNewQuerySettings = false)
            {

                #region <<=========== reflect to readonly & set QueriString ReadOnly - false ============>>

                //HttpContext.Current.Request.QueryString["qs_key"]; 

                // reflect to readonly property 
                PropertyInfo isReadOnly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);

                // make collection editable 
                isReadOnly.SetValue(HttpContext.Current.Session, false, null);

                #endregion
                switch (action)
                {
                    case Act.remove:
                        if (itsNotAnEmptySession())
                            HttpContext.Current.Session.Remove(CurSes_ParamName);
                        break;
                    case Act.replace:
                        HttHttpContext.Current.Session.Remove(CurSes_ParamName);
                        HttpContext.Current.Session.Add(NewSession_paramName , New_Value);
                        break;
                    case Act.edit:
                        HttpContext.Current.Session.Set(CurSes_ParamName, New_Value);
                        break;

                    case Act.add:
                        HttpContext.Current.Session.Add(NewSession_paramName , New_Value);
                        break;

                }

                isReadOnly.SetValue(HttpContext.Current.Session, true, null);

            }
        }
} 
```

我上线时尝试将只读值设置为 false 的错误：因为我对 .net 的经验还不够丰富，所以我不明白我哪里出错了，或者……完全不可能在会话变量。

`Object does not match target type.`

在 QueryString 上尝试并使用此方法很好，就像在这行代码中一样：

```
isReadOnly.SetValue(HttpContext.Current.Request.QueryString, false, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:24:23.400

你不能对 session 做同样的事情：

首先，`Http.Current.Session`不是`NameValueCollection`(like `QueryString`)，而是[HttpSessionState](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate%28v=vs.100%29.aspx) (它解释了你的`Object does not match target type`消息)

然后，`HttpSessionState`有一个`IsReadonly`属性，但是......它是只读的（你不能设置它）。当`IsReadonly`属性 from`NameValueCollection`是可设置的。

所以......没办法（至少这样）。

# jquery - 使用多个 Ruby on Rails 控制器/视图和滑动页面转换的单页网站

> ID：12752548
> 
> 赞同：0
> 
> 时间：2012-10-05T19:06:20.970
> 
> 标签：jquery, html, css, ruby-on-rails, ajax

我无法想象这会非常复杂，但是我的 Rails 水平非常基础。我的想法是，我将制作一个包含多个页面和部分的网站（就像您通常拥有的那样）。每个页面显然都会有一个视图/布局/部分等。所以现在，我想让网站有一个页面，或者至少对用户来说看起来像一个页面，但是顶部总会有一个横幅/标题. 这个想法是，在顶部单击的任何链接都会自动将用户向下滚动到正确的位置，而无需再次重新加载页面（看起来很简单）。我将面临的问题是 URL 控制器问题，如果它是一个单页网站，我该如何更改 URL？我想知道是否有人可以使用 Rails 解决这种设计/开发风格。

一个例子是：[www.smokeybones.com](http://www.smokeybones.com/)

数据库将链接到菜单和菜单中的项目，所以这就是我的模型。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:18:30.877

你为什么要为此使用 Rails？为什么你需要模型呢？如果您想链接相同的页面元素 - 只需在链接中使用锚点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:20:51.453

只需使用页面锚。这个页面在这里做了一些非常相似的事情[http://www.kemperwebteam.com](http://www.kemperwebteam.com)

```
<a href="#page1">Navigate to Page 1</a>
...
<h1 name="page1">Page 1 Content</h1> 
```

# wpf - WPF 网格拆分器问题

> ID：12752552
> 
> 赞同：0
> 
> 时间：2012-10-05T19:06:44.410
> 
> 标签：wpf, gridsplitter

我有这个控制：

图片：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/999d1290-2d69-4cd0-9396-072e765e8364](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/999d1290-2d69-4cd0-9396-072e765e8364)

![在此处输入图像描述](../Images/9878d6cb717c30802ecfbb79424d4a8b.png)

如何在顶部箭头附近添加 GridSplitter，这样当我向下拖动拆分器时，橙色管道的高度会增加。只能向下拖动（不允许向上）

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="900">
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="20"/>
        <RowDefinition Height="auto" />
        <RowDefinition Height="40" />
        <RowDefinition Height="auto"/>
        <RowDefinition Height="20" />
        <RowDefinition Height="auto" />
        <RowDefinition Height="auto" />
        <RowDefinition Height="auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="auto"/>
        <ColumnDefinition Width="auto" />
    </Grid.ColumnDefinitions>
    <Grid x:Name="arrowLine" Grid.Row="0" Grid.Column="0" Height="20" Width="1" Background="Black"/>
    <Polygon Grid.Column="0" Grid.Row="1"  Fill="Black" Points="0,-6 10,-6 5,0" FillRule="Nonzero" HorizontalAlignment="Center" />
    <!-- The gripper on the Top -->
    <StackPanel Grid.Row="2">
        <Grid Grid.Column="1" Margin="0,0,0,0"  VerticalAlignment="Top" Width="100" Height="40">
            <Rectangle x:Name="OrangeBar" Fill="#FFD61D2B">
            </Rectangle>
            <Rectangle x:Name="OrangeBarShine">
                <Rectangle.Fill>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#00000000" Offset="1"/>
                        <GradientStop Color="#FFFFB141" Offset="0.172"/>
                        <GradientStop/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
        </Grid>
    </StackPanel>
    <Polygon Grid.Column="0" Grid.Row="3"  Fill="Black" Points="0,6 10,6 5,0" FillRule="Nonzero" HorizontalAlignment="Center" />
    <Grid  Grid.Row="4" Grid.Column="0" Height="20" VerticalAlignment="Center" Width="1" Background="Black"/>
    <Line Grid.Row="5" X1="25" Y1="0" X2="50" HorizontalAlignment="Center" Y2="20" StrokeThickness="1" Stroke="Black"></Line>
    <Line Grid.Row="5" Grid.Column="1" X1="-25" Y1="20" X2="130" Y2="20" Fill="Black" HorizontalAlignment="Left" StrokeThickness="1" Stroke="Black"></Line>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:30:36.643

从底部变大有什么问题？

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="40" />            
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" Background="White"/>    
    <StackPanel Grid.Row="1" Grid.Column="0" Background="Orange"/>
    <GridSplitter Grid.Row="2"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Center"
        Background="White" 
        ShowsPreview="True"
        Height="5"/>
    <StackPanel Grid.Row="3" Grid.Column="1" Background="White"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:12:13.013

如果您想在不移动栏的顶部位置的情况下执行此操作，那么这是一个坏主意。即使你可以让它工作，拖动也是基于增量的。只需一点点拖动，就会导致栏突然变得比屏幕大。

如果您想调整栏的大小并同时等量移动它的位置，请考虑将栏上方的单元格和栏的高度绑定在一起。

考虑将分离器移动到条形图下方。然后将栏上的最小高度设置为栏的高度发生变化时的高度。

# php - 带有 cURL 的会话

> ID：12752555
> 
> 赞同：3
> 
> 时间：2012-10-05T19:06:57.393
> 
> 标签：php, curl, get, request

我想我有一个非常简单的问题。我目前正在开发一个 API，在您使用它之前，您必须先登录。登录是通过 http 请求进行的，因此要登录，您将访问

```
http://myapi.com/login.php?email=mail@mail.com&password 
```

例如。

当电子邮件和密码正确时，我设置了一些会话变量并开始一个会话：

```
session_start();
$_SESSION['idUser'] = $row['id'];
$_SESSION['email'] = $row['email'];
print(json_encode(array("authenticated" => true))); 
```

但是，当我访问 api 并从终端通过 cURL 发出请求（不是登录）时，它说我没有被授权，而我首先执行了登录请求。在另一个页面上的每个 api 调用上，我都会检查会话变量。如果已设置，则用户已登录：

```
function checkSession()
{
    session_start();
    if(!isset($_SESSION['idUser']) || !isset($_SESSION['email']))
    {
            print json_encode(array("error" => "Not authorized"));
            exit();
    }
} 
```

为什么说我没有授权？当我从网络浏览器访问页面时，一切正常。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T19:16:03.843

这可能是因为您的 PHP 会话代表您使用 cookie 将会话存储在用户的浏览器上。这就是您的 php 应用程序在每次向您的 PHP 页面发出 HTTP 请求时识别您的用户的方式。

您必须使用 cUrl 的“cookie”选项。

基本上，您将首先登录并使用 with 存储会话 cookie

```
curl -c cookies.txt http://myapi.com/login.php?email=mail@mail.com&password=yourpassword 
```

然后你做下一个请求告诉 cUrl**发回**cookie

```
curl -b cookies.txt http://myapi.com/login.php?email=mail@mail.com&password 
```

您会在 cookies.txt 中看到以纯文本形式存储的 cookie

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:15:51.120

需要一个饼干罐...

[http://curl.haxx.se/libcurl/php/examples/cookiejar.html](http://curl.haxx.se/libcurl/php/examples/cookiejar.html)

浏览器 cookie ！= 您的代码（curl 客户端）cookie。

现在我脑子里卡着曲奇怪兽的歌……

# linux - 在linux中合 并两个md5文件

> ID：12752556
> 
> 赞同：2
> 
> 时间：2012-10-05T19:07:08.793
> 
> 标签：linux, bash, merge, md5

**我正在寻找的是一种以自动方式合并两个 md5 文件（我们称它们为`a.md5`和`b.md5`）内容的方法。** 理想情况下，我想从 bash 脚本中执行此操作，但我愿意探索替代方案。

我`a.md5`通过以下方式生成：

```
cd a && find . -type f -print0 | xargs -0 md5sum > ../a.md5 
```

其中文件夹`a`中有许多文件和目录。从另一个文件夹`b`，我同样生成`b.md5`.
以下是 .md5 文件内容的片段：

```
8f56e29ec16b2d59949c4a95b5607574  ./usr/share/man/man1/infocmp.1.gz
f245d527f4dd1fabab719b64414dccf7  ./usr/share/man/man1/clear.1.gz
c0ae88d29fc406c937c3f64511fa1ab0  ./usr/share/man/man1/modeline2fb.1
3b83017b7acd38a553c3132a0ccb1fd8  ./usr/share/man/man1/fbset.1
83530bf6b1a19ca69022536e7ca810b5  ./usr/share/man/man1/sqlite3.1 
```

稍后，文件夹`a`将添加新文件（例如日志文件），然后被文件夹覆盖`b`，因此文件夹的所有唯一文件`a`和`b`都存在，并且对于所有冲突，文件 from`a`被替换为文件从`b`.

同样，我想合并 and 的内容，`a.md5`以便`b.md5`在任何冲突中，该`b.md5`值都会替换`a.md5`特定文件的值；但是，由于在合并之前添加了一些我不希望在结果中出现的文件，因此我不能简单地重新计算一个新的 md5 文件。

作为文件注释，为上述需求提供一些上下文，`a`并且`b`每个都是嵌入式 linux 文件系统的内容；的内容`a`被编程到一个干净的文件系统中，而 的内容`b`在运行时被解压缩到文件系统中。md5 的目标是验证内容是否已正确部署，并忽略运行时由各种事物生成的文件。我将在我的 PC 上生成 md5，并在`md5sum -c`嵌入式系统上进行。

如上所述，一个 bash 脚本将是理想的，但我愿意接受其他建议，只要该过程可以自动化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:17:54.070

一种可能的方式：您可以`sort -k2`同时使用列表和使用`join -1 2 -2 2`来合并 a.md5 和 b.md5。最后，您应该删除两个位置中存在的文件的重复信息，`sed`应该能够做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:30:19.610

这个怎么样：

```
cat a.md5 b.md5|sort|uniq 
```

# c# - 为什么我的演员不是从 T 到 SomeStruct 当 T 是接口时工作？

> ID：12752562
> 
> 赞同：4
> 
> 时间：2012-10-05T19:07:30.720
> 
> 标签：c#, generics, interface, operator-overloading, type-conversion

当我尝试使用从接口类型到泛型结构类型的用户定义转换运算符时，我收到一个编译错误，指出无法转换类型：

```
public interface J { }
public struct S<T> {
    public static explicit operator S<T>(T value) {
        return new S<T>();
    }
}
public static class C {
    public static S<J> Test(J j) {
        return (S<J>)j; // <- error: cannot convert type 'J' to type 'S<J>'
    }
} 
```

请注意，如果 J 是一个类，则转换将起作用。

有一个[关于转换为 class 的类似问题](https://stackoverflow.com/questions/12533748/why-isnt-it-possible-to-define-implicit-cast-operator-from-interface-to-class)，答案是派生类可能实现接口并在是否应使用用户定义的强制转换方面产生歧义。但是对于结构体，不能有派生类型，编译器知道我的结构体没有实现 J。

也许是为了避免接口实现新接口时出现意外的语义变化？也许这只是偶然？也许我犯了一个天真的错误？引用规范会很棒，但我真的很喜欢它最初是这样设计的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:09:37.543

好吧，系统无法进行*实际*转换，因为`S<J>`没有实现`J`. 如果您更改声明，它会正常工作：

```
public struct S<T> : J {...} 
```

在类的情况下，可以声明一个类的子类型，它*确实*实现了`J`. 但是结构不能被扩展，所以如果`S`没有实现`J`，那么你可以保证任何“是”的类`S`都不会实现`J`。因此 no`J`永远不会是`S<T>`.

**那么为什么它不调用你的显式转换运算符呢？**我认为答案在 C# 规范中，[如此 SO post](https://stackoverflow.com/a/1208929/120955)中所述。

* * *

6.4.1 允许的用户定义转换

C# 只允许声明某些用户定义的转换。特别是，不可能重新定义已经存在的隐式或显式转换。对于给定的源类型 S 和目标类型 T，如果 S 或 T 是可空类型，则令 S0 和 T0 引用它们的基础类型，否则 S0 和 T0 分别等于 S 和 T。仅当满足以下所有条件时，才允许类或结构声明从源类型 S 到目标类型 T 的转换：

*   S0 和 T0 是不同的类型。
*   S0 或 T0 是发生运算符声明的类或结构类型。
*   ***S0 和 T0 都不是 interface-type***。
*   排除用户定义的转换，不存在从 S 到 T 或从 T 到 S 的转换。

* * *

因此，如果我没看错，因为`J`它是一个接口，它不会被识别为显式转换运算符的候选对象。

# algorithm - 通过外部元素进行 3 路分区

> ID：12752564
> 
> 赞同：0
> 
> 时间：2012-10-05T19:07:40.213
> 
> 标签：algorithm, partitioning

Bentley-Mcilroy 设计了一种 3 路分区算法，其运行方式有点像这样（基于第一个元素进行分区。最初`i = p = 0`和`j = q = n-1`）：

```
Scan i from left to right so long as a[i] < a[lo].
Scan j from right to left so long as a[j] > a[lo].
Exchange a[i] with a[j].
If a[i] == a[lo], exchange a[i] with a[p] and increment p.
If a[j] == a[lo], exchange a[j] with a[q] and decrement q. 
```

只要`i <= j`. 一旦打破，

```
Scan j and p from right to left and exchange a[j] with a[p].
Scan i and q from left to right and exchange a[i] with a[q]. 
```

现在我想修改它，而不是围绕第一个元素对其进行分区，我可以根据任何外部元素对它进行分区，比如一个整数`pivot`（它可能`pivot`与数组中的一个元素相同，可能是第一个一个也！）。我怎样才能做到这一点？我尝试通过设置`p`为-1而不是0来做到这一点，但不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:19:33.367

您需要将所有引用替换`a[lo]`为`pivot`。

# actionscript-3 - 是否可以在没有 PixelBender 的情况下创建 Flash AS3 自定义滤镜（BitmapFilter）

> ID：12752565
> 
> 赞同：0
> 
> 时间：2012-10-05T19:07:40.080
> 
> 标签：actionscript-3, image-processing

我在这里是因为我简直不敢相信`BitmapFilter`不使用 PixelBender 就无法创建自定义 Flash。

任何人都知道是否有办法这样做？

Flash 有一些原生过滤器，例如：

*   辉光过滤器；
*   DropShadowFilter;
*   模糊滤镜；
*   等等

我希望能够像这样使用它：

```
var myBitmap:Bitmap = new Bitmap();
var myCustomFilter:CustomFilter = new CustomFilter();
myBitmap.filters = [myCustomFilter]; 
```

但我想扩展`BitmapFilter`创建我自己的过滤器的类！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:29:43.043

**对的，这是可能的。**

James Ward 创建了一个名为**pbjAS**的库来做到这一点！
此处的代码示例和库：[宣布 pbjAS – An ActionScript 3.0 Pixel Bender Shader Library](http://www.jamesward.com/2009/04/29/announcing-pbjas-an-actionscript-3-pixel-bender-shader-library/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:23:24.013

如果您希望它的外观和行为类似于其他 (PixelBender) 过滤器，那么是的，您必须在 PixelBender 中编写它 - 但是这样做有什么问题？它比看起来更容易，而且尝试起来很有趣。

如果需要，您可以使用变换（和过滤器）来操作 BitmapData 类中的像素，但与普通过滤器相比，速度差异会很大，不要期望构建运行流畅的实时效果！人们使用 PixelBender 过滤器将密集的数学工作委托给 GPU，因为它比 AS3 快得多 - 如果您想要任何实时过滤器效果，即使您不想要，PixelBender 也是明智的选择。

一探究竟：

[http://www.adobe.com/devnet/pixelbender.html](http://www.adobe.com/devnet/pixelbender.html)

希望这可以帮助

# layout - Qt4：隐藏次要小部件，同时保持中央小部件的大小

> ID：12752566
> 
> 赞同：4
> 
> 时间：2012-10-05T19:07:47.513
> 
> 标签：layout, qt4, pyqt4, qmainwindow

我有一个带有主要“显示”小部件和几个小部件的 QMainWindow。我希望能够在鼠标进入或离开窗口时打开/关闭小部件。

我可以通过实现`enterEvent`和`leaveEvent`调用显示/隐藏不必要的小部件来实现这个基本功能。然而，Qt4 的默认行为是保持 QMainWindow 几何形状固定，并调整重要的小部件的大小。我宁愿维护这个小部件的几何形状，并根据需要移动/调整 QMainWindow 的大小。这可能吗？

这是 PyQt4 中的一个简化示例

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

app = QApplication([''])

class MyWidget(QWidget):
    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)

        layout = QVBoxLayout()
        self.setLayout(layout)
        self.main = QPushButton("major")
        self.main.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
        self.minor = QPushButton("minor")
        layout.addWidget(self.main)
        layout.addWidget(self.minor)

    def enterEvent(self, event):
        self.minor.show()

    def leaveEvent(self, event):
        self.minor.hide()

mw = QMainWindow()
mw.setCentralWidget(MyWidget())
mw.show()

app.exec_() 
```

我希望 MyWidget 的边界改变为环绕此按钮，而不是“主要”按钮的增长/缩小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:01:04.790

我用 PySide 在 Mac OS X 上破解了你的例子。经过一段时间的尝试，我找到了以下解决方案：

```
from PySide.QtGui import *
from PySide.QtCore import *

app = QApplication([''])

class MyWidget(QWidget):
    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)

        layout = QVBoxLayout()
        self.setLayout(layout)
        self.main = QPushButton("major")
        self.main.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)
        self.minor = QPushButton("minor")
        layout.addWidget(self.main)
        layout.addWidget(self.minor)

    def resizeEvent(self, event):
        self.appendix = self.minor.frameGeometry().height() + 2
        if self.minor.isVisible():
            self.varheight = mw.height() - self.appendix
        else:
            self.varheight = mw.height()

    def enterEvent(self, event):
        self.minor.show()
        mw.resize(mw.width(), self.varheight + self.appendix)

    def leaveEvent(self, event):
        self.minor.hide()
        mw.resize(mw.width(), self.varheight)

mw = QMainWindow()
mw.setCentralWidget(MyWidget())
mw.show()

app.exec_() 
```

这并不完美，因为初始状态不检查鼠标位置。此外，魔术“+ 2”应该可以从小部件几何的其他一些指标中计算出来。但是对于这个例子应该没​​问题。

这个实现需要几个小时才能正确完成。确保所有计算都处于固定状态至关重要。否则布局引擎会产生难以理解的结果，甚至是无限循环。

`resizeEvent`从小部件大小中获取正确的值，但仅此而已。然后使用这些值并调整大小`enterEvent`。`leaveEvent`

我的变量没有初始化。您可以这样做，但第一次调整大小要早于我们的其他事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T11:16:24.130

你可以试试这段代码。你可以直接继承 QMainWindow，而不是继承 QWidget。

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyWindow( QMainWindow ):
    def __init__( self, parent = None ):
        QMainWindow.__init__( self, parent )

        self.widget = QWidget( self )
        lyt = QVBoxLayout()

        self.main = QPushButton( "major" )
        self.minor = QPushButton( "minor" )

        if not self.underMouse() :
            self.minor.hide()
            self.setMaximumHeight( self.main.sizeHint().height() )

        else :
            self.setMaximumHeight( self.minor.sizeHint().height() + self.main.sizeHint().height() )

        lyt.addWidget( self.main )
        lyt.addWidget( self.minor )

        self.widget.setLayout( lyt )
        self.setCentralWidget( self.widget )

    def enterEvent( self, event ) :

        self.minor.show()
        self.setMaximumHeight( self.minor.sizeHint().height() + self.main.sizeHint().height() )
        self.adjustSize()

        event.accept()

    def leaveEvent( self, event ):

        self.minor.hide()
        self.setMaximumHeight( self.main.sizeHint().height() )
        self.adjustSize()

        event.accept()

if __name__ == '__main__' :

    app = QApplication( [] )

    Gui = MyWindow()
    Gui.show()

    app.exec_() 
```

# java - 标志为假时跳过条件

> ID：12752568
> 
> 赞同：4
> 
> 时间：2012-10-05T19:07:55.620
> 
> 标签：java

我有几个独立的 if 条件，在每个条件下，我将评估一个布尔变量值，无论是真还是假。

如果布尔变量值在第一个 if 条件中为 false，那么我如何跳过所有条件的其余部分。

```
private static boolean isRecommended(Fruit fruit) {
    boolean isRecommended = true;

    if(fruit.weight > 2){
        isRecommended = false;
    }
    if(!"red".equals(fruit.color)){
        isRecommended = false;
    }
    if(!"sweet".equals(fruit.taste)){
        isRecommended = false;
    }
    if(!fruit.isPerishable){
        isRecommended = false;
    }

    return isRecommended;
} 
```

如果执行了第一个 if() 条件，那么是否可以返回该值。我知道在循环中我们可以使用`continue`关键字来跳过循环执行的其余部分。我们怎样才能在这里实现类似的东西。

**更新：**

我并不是指第一个 if() 条件，如果执行了任何 if() 条件，那么像 continue 在循环中那样跳过其余条件的最佳方法是什么

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-05T19:10:05.753

```
return fruit.weight <= 2 
    && "red".equals(fruit.color) 
    && "sweet".equals(fruit.taste)
    && fruit.isPerishable; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T19:09:57.243

对于一般解决方案，您可以使用`else if`：

```
if(fruit.weight > 2){
    isRecommended = false;
}
else if(!"red".equals(fruit.color)){
   //etc...
} 
```

但在您的具体示例中，您可以只使用布尔逻辑：

```
return !(
   fruit.weight > 2 ||
   !"red".equals(fruit.color) ||
   !"sweet".equals(fruit.taste) ||
   !fruit.isPerishable
); 
```

[您可以使用您的 IDE 通过应用德摩根定律](http://en.wikipedia.org/wiki/De_Morgan's_laws)来重构此表达式的逻辑。大多数体面的 IDE 只需敲几下键就可以为您做到这一点。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-05T19:11:53.833

您可以像这样压缩它，通过使用多个将提前返回并跳过其余部分的返回语句。为了更加简洁，我还删除了不需要的花括号。

```
private static boolean isRecommended(Fruit fruit) {
    if(fruit.weight > 2)
        return false;
    if(!"red".equals(fruit.color))
        return false;
    if(!"sweet".equals(fruit.taste))
        return false;
    if(!fruit.isPerishable)
        return false;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-05T19:10:49.567

> 如果执行了第一个 if() 条件，那么是否可以返回该值。

不就是这样吗？

```
if(fruit.weight > 2){
    return false; // etc.
} 
```

还是我误解了你的问题？

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-05T19:09:57.737

测试将在第一次未验证时停止。

```
private static boolean isRecommended(Fruit fruit) {
    return 
            fruit.weight <= 2
            && "red".equals(fruit.color)
            && "sweet".equals(fruit.taste)
            && fruit.isPerishable
    ;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-05T19:09:53.460

你可以写

```
return isRecommended; 
```

在你的ifs里面。return 可以多次使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T19:09:59.490

只需`return false`在您的第一个条件中添加 a 即可。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-05T19:18:27.097

简单的答案是`return`在`if`块内，而不是设置一个值。但是，这并不是完全可扩展的，并且`return`块内的 ing 会增加代码复杂性。

复杂但更灵活的答案是创建一个`interface`允许您实现自定义逻辑的方法。

```
interface RecommendationFilter<T>
{
    boolean recommend(T item);
} 
```

然后，在某些实现中，可以使用一堆一般加载`RecommendationFilter`的 s 来循环。

```
class FruitChecker
{
    private final Set<RecommendationFilter<Fruit>> filters = ...;

    public boolean isRecommended(Fruit fruit)
    {
        boolean recommended = true;

        for (RecommendationFilter<Fruit> filter : filters)
        {
            if ( ! filter.recommend(fruit))
            {
                recommended = false;
                break;
            }
        }

        return recommended;
    }
} 
```

这个想法可以很好地扩展，并且可以实现一些非常有趣的实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-05T19:34:49.940

将其余`if`语句包装在一个`else`语句中：

```
private static boolean isRecommended(Fruit fruit) {
    boolean isRecommended = true;

    if(fruit.weight > 2){
        isRecommended = false;
    } else {
        if(!"red".equals(fruit.color)){
            isRecommended = false;
        }
        if(!"sweet".equals(fruit.taste)){
            isRecommended = false;
        }
        if(!fruit.isPerishable){
            isRecommended = false;
        }
    }

    return isRecommended;
} 
```

ps 我强烈建议使用空格而不是制表符进行缩进。选项卡通常不会以您想要的方式移植到其他编辑器或环境。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-12T18:18:28.507

我找到了另一种解决方案，即使用带有 break 语句的标签块。下面是代码

```
private static boolean isRecommended(Fruit fruit) {
    boolean isRecommended = true;

    labelA:
    {
        if(fruit.weight > 2){
            isRecommended = false;
            break labelA;
        }
        if(!"red".equals(fruit.color)){
            isRecommended = false;
            break labelA;
        }
        if(!"sweet".equals(fruit.taste)){
            isRecommended = false;
            break labelA;
        }
        if(!fruit.isPerishable){
            isRecommended = false;
        }
    }
    return isRecommended;

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-08T20:05:43.490

```
 private static boolean isRecommended(Fruit fruit) {
    while(true)
    {
      boolean isRecommended = true;

      if(fruit.weight > 2){
          isRecommended = false;
          break;
      }
      if(!"red".equals(fruit.color)){
          isRecommended = false;
          break;
      }
      if(!"sweet".equals(fruit.taste)){
          isRecommended = false;
          break;
      }
      if(!fruit.isPerishable){
          isRecommended = false;
          break;
      }
    }
    return isRecommended;
} 
```

# python - python wx AUI Notebook，添加平铺的页面

> ID：12752571
> 
> 赞同：0
> 
> 时间：2012-10-05T19:08:09.227
> 
> 标签：python, wxpython, wxwidgets

我正在用服务器/客户端做一个小程序并使用 python wx.aui_notebook，

我想在每个加入的客户上添加一个笔记本页面，我这样做了，但问题是该页面就像停靠/折叠..（我希望我使用正确的术语）我想要的是新页面add 将显示在屏幕上，例如将占用可用空间的一半，

屏幕截图 1 是发生的事情，屏幕截图 2 是我想要发生的事情（我手动完成了这个，我希望它是自动的）

截图1：

![在此处输入图像描述](../Images/a9149aa8019c1995604f3461c3074542.png)

截图2：

![在此处输入图像描述](../Images/cf1677db0acb01517bd3629b1569fd8e.png)

感谢帮助，

杰克

# java - Gradle：战争任务有冲突的包含/排除

> ID：12752580
> 
> 赞同：8
> 
> 时间：2012-10-05T19:09:01.540
> 
> 标签：java, groovy, build, build-process, gradle

我正在尝试使用 Gradle 构建一个 war 文件，但是我遇到了一个问题，它排除了一个目录并包含了另一个恰好具有相同名称但父目录不同的目录。

请注意，在下面的第一个代码示例中，`css/`最终`war`文件中都没有包含两个目录——我假设是因为 Gradle 认为我想排除**任何**命名的目录`css/`，而不管其绝对路径如何。

基本上我想排除`src/main/webapp/css`和包含`build/tmp/css`，因为后者包含缩小的代码。我怎样才能做到这一点？我尝试过以各种方式指定绝对路径，但没有任何成功。

```
war {
  dependsOn minify
  from('build/tmp/') { include ('css/') }
  exclude('WEB-INF/classes/', 'css/')
} 
```

如果我不这样排除`css/`：

```
war {
  dependsOn minify
  from('build/tmp/') { include ('css/') }
  exclude('WEB-INF/classes/')
} 
```

那么结果是包含了缩小和非缩小的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:12:10.630

我不确定为什么要排除`WEB-INF/classes/css`而不是`src/main/webapp/css`在 build.gradle 中，但是复制缩小的 CSS 文件而不是原始文件是通过以下方式实现的：

```
apply plugin: 'war'

war {
  // dependsOn 'minify'

  from 'src/main/webapp'
  exclude 'css' // or: "exclude 'WEB-INF/classes/css'"

  from('build/tmp/css') {
    include '**/*.css'
    into 'css' // or: "into 'WEB-INF/classes/css'"
  }
} 
```

# java - CXF Rest Client 不处理我的对象

> ID：12752584
> 
> 赞同：4
> 
> 时间：2012-10-05T19:09:07.893
> 
> 标签：java, json, cxf, jackson

我正在使用 JAXRSClientFactory 从我的 RESTful Web 服务的界面创建一个 CXF 客户端代理。

我的界面代表 CRUD 操作，因此我的 create 接受一个自定义 Object 并从中创建一个 DB 条目。当我将对象传递给 create 方法时，我会得到：

```
org.apache.cxf.jaxrs.client.ClientWebApplicationException: org.apache.cxf.interceptor.Fault: .No message body writer has been found for class : class com.example.Calss, ContentType : application/json. 
```

我通过向该方法添加一个提供程序列表`JacksonJsonProvider`来解决此问题，该`JAXRSClientFactory.create`方法解决了编组对象。

然后我尝试执行读取操作，该操作返回一个`Response`实体是自定义对象的对象。当我尝试阅读时，我收到此错误：

```
org.apache.cxf.jaxrs.client.ClientWebApplicationException: .Problem with reading the response message, class : class javax.ws.rs.core.Response, ContentType : application/json. 
```

我可以通过从我的 中删除提供程序来解决此问题`JAXRSClientFactory.create`，但这会导致创建操作失败。

我似乎无法解决这个问题（在使用相同的客户端对象时）。有人遇到过这种情况么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T20:14:24.803

这个问题源于使用 Jackson 作为 JSON 映射器。在我的接口定义中，我返回了一个`Response`对象，Jackson/CXF 不知道如何处理，所以 Jackson 没有编写它。

解决方案是这样的：

```
JacksonJsonProvider provider = new JacksonJsonProvider();
provider.addUntouchable(Response.class);
providerList.add(provider);         
webService = JAXRSClientFactory.create(url, IWebService.class, providerList); 
```

# java - 从内部类中访问变量“适配器”。需要宣布最终

> ID：12752589
> 
> 赞同：2
> 
> 时间：2012-10-05T19:09:40.667
> 
> 标签：java, android, android-intent

变量“适配器”和声明 final 中的问题。我的 IDE 不断告诉“适配器”需要被声明为最终版本，我在哪里以及如何做？这让我站住了，我似乎无法从那里继续前进。请帮忙。它在这里引用此代码和问题：[Android ImageView from ListView](https://stackoverflow.com/questions/11920687/android-imageview-from-listview)

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;

import android.content.Intent;
import android.widget.TextView;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "http://imforchange.org/international-movement-for-change/testing/data.xml";

    // XML node keys
    static final String KEY_EVENT = "event"; // parent node
    static final String KEY_ID = "eventId";
    static final String KEY_TITLE = "eventName";
    static final String KEY_DESCRIPTION = "eventDescription";
    static final String KEY_ABSTRACT = "eventAbstract";
    static final String KEY_DATE = "eventDate";
    static final String KEY_PRICE = "eventPrice";
    static final String KEY_LINK = "eventLink";
    static final String KEY_ADDRESS = "eventAddress";
    static final String KEY_CUSTOM_LINK = "eventCustomlink";
    static final String KEY_PICTURE = "eventPicture";
    static final String KEY_ICON = "eventIcon";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        LazyAdapter  adapter = new LazyAdapter(this, songsList);

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_EVENT);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
            map.put(KEY_ABSTRACT, parser.getValue(e, KEY_ABSTRACT));
            map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
            map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));
            map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
            map.put(KEY_ADDRESS, parser.getValue(e, KEY_ADDRESS));
            //map.put(KEY_CUSTOM_LINK, parser.getValue(e, KEY_CUSTOM_LINK));
            map.put(KEY_PICTURE, parser.getValue(e, KEY_PICTURE));
            map.put(KEY_ICON, parser.getValue(e, KEY_ICON));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                    // Get the item that was clicked

                    HashMap<String, String> map = adapter.getItem(position); 
                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(), DetailView.class);
                    in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
                    in.putExtra(KEY_PICTURE, map.get(KEY_PICTURE)); 
                    in.putExtra(KEY_DESCRIPTION, map.get(KEY_DESCRIPTION));
                    in.putExtra(KEY_PRICE, map.get(KEY_PRICE));
                    in.putExtra(KEY_LINK, map.get(KEY_LINK));
                    startActivity(in);
                }
        });     
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:12:35.160

您没有发布声明变量“适配器”的代码，而只是在它前面放了一个“final”修饰符，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:20:22.510

当您尝试在 Overridden 方法中访问外部变量时，例如“onItemClick”方法，您需要将该变量设为 final。通过将关键字“final”放在变量声明的前面很容易做到这一点。另一种方法是使该变量成为成员变量。查看这篇文章以了解有关成员变量的更多信息。[https://stackoverflow.com/a/9332462/661074](https://stackoverflow.com/a/9332462/661074)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:24:09.530

您在这里有三个选择：

*   使变量适配器成为一个字段

*   使变量适配器成为最终的局部变量

*   将变量适配器复制到另一个最终变量，并在内部类中使用该新的最终变量。

[这个链接](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)解释了更多

# wpf - WPF 多个过滤器 CollectionViewSource，添加的第一个过滤器可以正常工作，添加的第二个过滤器不能

> ID：12752591
> 
> 赞同：3
> 
> 时间：2012-10-05T19:09:51.130
> 
> 标签：wpf, filter, event-handling, collectionviewsource

我有一个绑定到 CollectionViewSource 的 ListView。我按照这篇文章（被很多人引用）进行了多重过滤：[http ://www.zagstudio.com/blog/456#.UG8r6E1lWLE](http://www.zagstudio.com/blog/456#.UG8r6E1lWLE)

我设置了两个用于测试的复选框，除了添加过滤器之外什么都不做。每当我首先单击其中一个时，过滤器都会添加到 CollectionViewSource 并且它可以工作。然后，当我单击相反的复选框时，而不是将另一个过滤器添加到 CollectionViewSource 并且两个过滤器都在工作，我的列表视图变为空白（当它不应该基于数据时，并且这以选中我的复选框的任一顺序发生）

这是相关代码：（背景：此应用程序处理过滤“订单”的运输软件）

加载订单：

```
public class Order
{
    public int index { get; set; }
    public string host { get; set; }
    public Int64 orderNumber { get; set; }
    public string batchStatus { get; set; }
    public string sku { get; set; }
    public int numItems { get; set; }
    public string orderSource { get; set; }
    public string sourceOrderNumber { get; set; }
    public DateTime orderDate { get; set; }
    public DateTime orderTime { get; set; }
    public int customerID { get; set; }
    public string shipMethod { get; set; }
    public string billingState { get; set; }
    public bool statusChanged { get; set; }
    public int numSkus { get; set; }
    public string marketName { get; set; }
    public float weight { get; set; }
}

public class Orders : ObservableCollection<Order>
{
    public Orders()
    {
        SqlDataReader reader1 = cmd.ExecuteReader();
        while (reader1.Read())
        {
            Order order = new Order();

            order.host = (string)safeGetString(reader1, 0);
            order.orderNumber = (Int64)reader1["OrderNumber"];
            order.batchStatus = (string)safeGetString(reader1, 2);
            order.orderSource = (string)safeGetString(reader1, 3);
            order.sourceOrderNumber = safeGetString(reader1, 4);
            order.orderDate = (DateTime)reader1["OrderDate"];
            order.customerID = (int)reader1["CustomerID"];
            order.shipMethod = (string)safeGetString(reader1, 7);
            order.billingState = (string)safeGetString(reader1, 8);
            order.numItems = (int)reader1["NumItems"];
            order.numSkus = (int)reader1["NumSKUs"];
            order.marketName = (string)safeGetString(reader1, 11);
            order.weight = (float)(double)reader1["ShippedWeight"];

            this.Add(order);
        }
        reader1.Close();
    } 
```

设置 CollectionViewSource：

```
cvs = (CollectionViewSource)(this.Resources["cvs"]); 
```

复选框功能：（使用 filterString 硬编码“过滤内容”进行测试）

```
public void checkBox2_Checked(object sender, RoutedEventArgs e)
    {
        filterString = "TX";
        cvs.Filter += new FilterEventHandler(billingStateFilter);
    }
    public void checkBox1_Checked(object sender, RoutedEventArgs e)
    {
        filterString = "Standard";
        cvs.Filter += new FilterEventHandler(shippingMethodFilter);
    } 
```

最后，过滤器：

```
private void shippingMethodFilter(object sender, FilterEventArgs e)
    {
        Order order = e.Item as Order;
        if ((order.shipMethod != filterString))
        {
            e.Accepted = false;
        }
    }

    public void billingStateFilter(object sender, FilterEventArgs e)
    {
        Order order = e.Item as Order;
        if ((order.billingState != filterString))
        {
            e.Accepted = false;
        }
    } 
```

就像我说的，第一个过滤器总是有效的。第二个总是使屏幕空白。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:19:26.287

您正在为两个过滤器重复使用过滤器字符串，一旦您选中每个框*，两个*过滤器都将被应用。所以如果你：

1.  检查 checkBox1，然后 filterString 将是“标准”并且 shippingMethodFilter 将被连接。
2.  检查checkBox2，然后filterString 将是“TX”和billingStateFilter 将被挂钩。

shippingMethodFilter 绝不会脱钩。因此它将继续基于“TX”的filterString进行过滤。

您可能应该添加一个过滤器方法来检查是否检查了 checkBox1/checkBox2，然后选择性地应用它的过滤逻辑。就像是：

```
private string shippingFilterString = "Shipping";
private string billingFilterString = "TX";

private void collFilter(object sender, FilterEventArgs e)
{
    Order order = e.Item as Order;
    if (checkBox1.IsChecked == true && (order.shipMethod != shippingFilterString ))
        e.Accepted = false;
    if (checkBox2.IsChecked == true && (order.billingState != billingFilterString ))
        e.Accepted = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T18:16:05.243

我在此发布了一篇博客：[https ://hoomanvisualstudio.blogspot.com/b/post-preview?token=mpPyAk0BAAA.ygnewdzslszANX8AchX0hg.uW17QZR22-f_JUqjDTBcyA&postId=4200491240358821673&type=POST](https://hoomanvisualstudio.blogspot.com/b/post-preview?token=mpPyAk0BAAA.ygnewdzslszANX8AchX0hg.uW17QZR22-f_JUqjDTBcyA&postId=4200491240358821673&type=POST)

有很多方法。一种简单的方法是将条件滚动到一个谓词中。

MyViewModel myViewModel = new MyViewModel();

// 将采用您的过滤器的集合 var _itemSourceList = myViewModel.MyCollection;

var filter = new Predicate(item => ((Model)item).FirstName.ToString().Contains("John") && ((Model)item).LastName.ToString().Contains("Doe"));

_itemSourceList.Filter = 过滤器；myDataGrid.ItemsSource = myViewModel.MyCollection;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:45:22.803

```
for (i = 0; i < numberItemsFilterStrings.Length; i++)
            {
                switch (numberItemsFilterStrings[i])
                {
                    case "One Item":
                        if (order.numItems != 1)
                        {
                            e.Accepted = false;
                        }
                        break;
                    case "Between 2 - 5":
                        if ((order.numItems < 2) || (order.numItems > 5))
                        {
                            e.Accepted = false;
                        }
                        break;
                    case "Between 6 - 25":
                        if ((order.numItems < 6) || (order.numItems > 24))
                        {
                            e.Accepted = false;
                        }
                        break;
                    case "Greater Than 25":
                        if (order.numItems < 25)
                        {
                            e.Accepted = false;
                        }
                        break;
                }
            } 
```

所以这是我正在创建的过滤器之一的代码。它适用于第一个过滤器，因为不接受与过滤器不匹配的所有订单。但是当我检查第二个过滤框时，没有订单显示，因为在最初接受的订单中，现在它们也没有被接受，没有留下任何订单

# r - ggplot中的条形图未按因子分组

> ID：12752592
> 
> 赞同：1
> 
> 时间：2012-10-05T19:09:53.277
> 
> 标签：r, ggplot2

我正在尝试绘制一个条形图，`ggplot2`其中每个因素都获得观察值的平均值。但是，该图是整个人口的平均值，并没有按因子分解/分组，这就是我想要的

这是图表： ![在此处输入图像描述](../Images/c37eb8804077dd174a550aa5348ac9ee.png)

当我计算组的平均值时，会有一个差异，这就是我想要绘制的。

```
 US      Foreign
1 89.76   124.02 
```

这是数据框中整列的平均值

```
mean(clients$OrderSize)
[1] 96.71 
```

这是数据框的结构。我有 CountryType 作为一个因素，因为这是我想要分组的：

```
str(clients)
'data.frame':   252774 obs. of  4 variables:
$ ClientID     : Factor w/ 252774 levels "58187855","59210128",..: 19 20 21 22 23 24 25 26 27 28 ...
$ Country      : Factor w/ 207 levels "Afghanistan",..: 196 60 139 196 196 40 40 196 196 196 ...
$ CountryType  : Factor w/ 2 levels "Foreign","US": 2 1 1 2 2 1 1 2 2 2 ...
$ OrderSize    : num  12.95 21.99 5.00 7.50 44.5 ... 
```

这是我正在打的电话：

```
ggplot(data = clients, aes(x=CountryType, y=mean(OrderSize))) + geom_bar() + ylab("") 
```

我尝试明确地将 CountryType 设置为一个没有运气的因素：

```
ggplot(data = clients, aes(x=factor(CountryType), y=mean(OrderSize))) + geom_bar() + ylab("") 
```

我是否需要在打电话之前预先计算两组的平均值，`ggplot`或者我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:14:17.177

尝试更多类似的东西：

```
dat <- data.frame(x = rep(letters[1:2],each = 25),y = 1:50)
ggplot(dat,aes(x = x,y = y)) + 
    stat_summary(fun.y = mean,geom = "bar") 
```

![在此处输入图像描述](../Images/c8e79b5288b91bbd3ee2884018e5c303.png)

作为一般说明，请避免使用诸如`aes(y = value)`where`value`是单个值的习惯用法，而不是数据框中列的名称。这不是**ggplot2**的用途。（虽然在某些情况下可以打破所有规则......）

# android - 检查在线状态android

> ID：12752598
> 
> 赞同：2
> 
> 时间：2012-10-05T19:10:07.070
> 
> 标签：android

我使用此代码检查设备在应用加载时是否在线。

```
public boolean isOnline() 
{
    ConnectivityManager connMgr = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    return (networkInfo != null && networkInfo.isConnected());
} 
```

但这总是返回 true，即使它关闭了计算机 Wifi 进行测试。这个功能只是测试连接能力还是实际连接？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T19:14:05.447

尝试使用：

```
private boolean isOnline()
    {
        try
        {
            ConnectivityManager cm = (ConnectivityManager)mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
            return cm.getActiveNetworkInfo().isConnectedOrConnecting(); 
        }
        catch (Exception e)
        {
            return false;
        }
    } 
```

`mContext`您正在使用的上下文在哪里。

我的猜测是您的代码可以在设备上正常运行，但您可能正在模拟器上进行测试。我注意到有时即使计算机的互联网关闭，模拟器也会保持连接状态。要获得正确的功能，您应该进入设置并从那里禁用 WiFi 和移动数据，而不是关闭计算机 WiFi。

此外，如果设备正在连接，我上面给出的代码也会返回 true，而您使用的代码只有在您已经建立连接时才会返回 true。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T19:31:26.647

这段代码一直对我有用。

`

```
public boolean isNetworkAvailable() {
        ConnectivityManager cm = (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);

// test for connection
        if (cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            return true;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T03:20:07.210

```
protected boolean isOnline() 
{
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null) { // connected to the internet
        if (activeNetwork.getType() == ConnectivityManager.TYPE_WIFI) {
            if (activeNetwork.isConnected())
                haveConnectedWifi = true;
        } else if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE) {
            if (activeNetwork.isConnected())
                haveConnectedMobile = true;
        }
    }

    return haveConnectedWifi || haveConnectedMobile;
} 
```

并且需要这两个权限`manifest`

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# python - Django 多对多交集过滤

> ID：12752601
> 
> 赞同：9
> 
> 时间：2012-10-05T19:10:11.927
> 
> 标签：python, django, orm, django-queryset

为简单起见，假设我只有 2 个模型：书籍、作者

```
class Author(models.Model):
    name = models.CharField(max_length='100')
    ...

class Book(models.Model):
    name = models.CharField(max_length='100')
    authors = models.ManyToManyField(Author)
    ... 
```

我想使用作者列表过滤书籍。我试图做的是：

```
authors = [...] # a list of author objects
Books.objects.filter(authors__in=authors) 
```

但是在这里，当我想要他们与作者时，他们将被 ORed。有什么方法可以进行多对多过滤吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T19:44:34.063

您可以将一堆 Q 对象 & 在一起：

```
q = Q()
for author in authors:
    q &= Q(authors=author)
Books.objects.filter(q) 
```

要排除作者不在列表中的书籍，您可以将查询限制为与列表中作者数量完全相同的书籍：

```
Books.objects.annotate(count=Count('authors')).filter(count=len(authors)).filter(q) 
```

**更新：**

根据评论，我认为要求是获得列表中至少一位作者撰写的所有书籍，但排除列表之外任何作者的书籍。

所以我们构建了一个查询集来选择我们讨厌的作者：

```
# this queryset will be embedded as a subquery in the next
bad_authors = Author.objects.exclude(name__in=['A1', 'A2']) 
```

然后排除它们以找到我们想要的书籍：

```
# get all books without any of the bad_authors
Books.objects.exclude(authors__in=bad_authors) 
```

这将返回所有书籍，但由您列表之外的人创作的书籍除外。如果您还想排除那些没有列出作者的人，请添加另一个排除调用：

```
Books.objects.exclude(authors__in=bad_authors).exclude(authors=None) 
```

这将使我们只剩下一本或多本好书所写的书！

# ruby - 如何防止法拉第从 URL 中删除尾部斜杠？

> ID：12752603
> 
> 赞同：1
> 
> 时间：2012-10-05T19:10:16.737
> 
> 标签：ruby, http, faraday

我正在尝试使用 Faraday gem（版本 0.8.4）与外部 API 进行交互。API 要求在 URL 上使用斜杠，例如`https://api.example.com/1.2/`. 这是我用来发出请求的代码：

```
connection = Faraday.new(:url => 'https://api.example.com/1.2/')
response = connection.get do |request|
  request.params['api_key'] = 'MY_KEY'
end 
```

但是，在检查响应后，我看到尾部斜杠已从 URL 中删除：

```
response.env[:url]
=> #<URI::HTTPS:0x007fda3513d5f0 URL:https://api.wpengine.com/1.2?api_key=MY_KEY> 
```

我很难弄清楚如何防止斜线被剥离。有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:10:11.490

我能够通过将斜杠移动到`get`方法中来使其工作：

```
connection = Faraday.new(:url => 'https://api.example.com')
response = connection.get('/1.2/') do |request|
  request.params['api_key'] = 'MY_KEY'
end

response.env[:url]
=> #<URI::HTTPS:0x007fdb95166f98 URL:https://api.example.com/1.2/?api_key=MY_KEY> 
```

# jquery - JQuery Mobile - 后续访问时动态填充的嵌套列表格式问题

> ID：12752609
> 
> 赞同：1
> 
> 时间：2012-10-05T19:10:37.437
> 
> 标签：jquery, formatting

我遇到了格式化动态列表的问题。我相信我对 JQM 进行了正确的调用，以便它重新设置样式，因为它在第一次访问时正确显示。如果我然后返回并尝试再次遍历列表，则列表没有格式。

我为此创建了一个 jsfiddle：http: [//jsfiddle.net/wsLFs/41/](http://jsfiddle.net/wsLFs/41/)

要让它中断，请单击“转到第 2 页”->“添加一些东西”-> 第 2 项注意此时事情看起来不错。现在单击项目 2 下的任何子项目，然后转到“转到第 2 页”-> 项目 2。

请注意，现在它没有任何列表样式。项目上没有右箭头，每种样式周围也没有框。

# python - 使用 xlutils 复制 XLS 时保留命名范围

> ID：12752617
> 
> 赞同：1
> 
> 时间：2012-10-05T19:11:11.733
> 
> 标签：python, xls, xlrd, xlwt, xlutils

我有一些代码可以打开 Excel 工作簿`xlrd`，使用 复制，使用`xlutils`更新，`xlwt`然后将其写回另一个文件。

生成的工作簿缺少原始中存在的所有命名范围。我 100% 确定原件中存在命名范围，因为我实际上是在读取它们（从`xlrd`对象中，在复制之前）并基于它们进行更新。

假设这是 using 的自然效果，我`xlutils.copy.copy`是否有某种方法可以重新创建从同一工作簿`xlwt`的版本中读取的命名范围？`xlrd`文档（至少，我能找到的）很少。

这是一个显示问题的python会话：

```
>>> from xlrd import open_workbook
>>> wb = open_workbook('sc_auction_template.xls', formatting_info=True)
>>> print len(wb.name_obj_list) # see, there are named ranges
9
>>> from xlutils.copy import copy
>>> wb2 = copy(wb)
>>> wb2.save('test.xls')
>>> wb = open_workbook('test.xls')
>>> print len(wb.name_obj_list) # but now there are none!
0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:28:45.590

目前，不幸的是，答案是**否定**的，`xlwt`不支持写名字。也许有一天，但我不希望它很快。

据我所知，以编程方式在 .xls 文件中写入名称的唯一方法是自动化应用程序的运行实例，例如 Windows 上的 Excel 本身，带有[`pywin32`](http://sourceforge.net/projects/pywin32/)或[`pywinauto`](http://code.google.com/p/pywinauto/)或某种 Visual Basic 等。我相信有如果您无法使用 Excel，则可以使用类似的方法编写 OpenOffice.org 脚本。

# string - 要求文件为字符串

> ID：12752622
> 
> 赞同：125
> 
> 时间：2012-10-05T19:11:40.787
> 
> 标签：string, node.js, express, require

我正在使用 node + express，我只是想知道如何将任何文件作为字符串导入。假设我有一个 txt 文件，我想要的只是将它加载到一个变量中。

```
var string = require("words.txt"); 
```

我反对

```
modules.exports = function(){

    var string = "whatever";

    return string;

} 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-10-05T19:43:56.590

如果是针对（少数）特定扩展，您可以添加自己的[`require.extensions`](http://nodejs.org/api/globals.html#globals_require_extensions)处理程序：

```
var fs = require('fs');

require.extensions['.txt'] = function (module, filename) {
    module.exports = fs.readFileSync(filename, 'utf8');
};

var words = require("./words.txt");

console.log(typeof words); // string 
```

否则，您可以混合[`fs.readFile`](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)使用[`require.resolve`](http://nodejs.org/api/globals.html#globals_require_resolve)：

```
var fs = require('fs');

function readModuleFile(path, callback) {
    try {
        var filename = require.resolve(path);
        fs.readFile(filename, 'utf8', callback);
    } catch (e) {
        callback(e);
    }
}

readModuleFile('./words.txt', function (err, words) {
    console.log(words);
}); 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2018-04-15T04:54:05.190

要将 CSS 文件读取为字符串，请使用此代码。它适用于`.txt`.

```
const fs = require('fs')
const path = require('path')

const css = fs.readFileSync(path.resolve(__dirname, 'email.css'), 'utf8') 
```

ES6：

```
import fs from 'fs'
import path from 'path'

let css = fs.readFileSync(path.resolve(__dirname, 'email.css'), 'utf8') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-08-14T18:39:13.283

所选答案已**弃用**，**不再推荐**。NodeJS 文档[建议](https://nodejs.org/api/modules.html#modules_require_extensions)使用其他方法，例如：

> 通过其他一些 Node.js 程序加载模块

但它不再扩大。

*   你可以像这样使用一个非常简单的库：[require-text](https://www.npmjs.com/package/require-text)

*   或者自己实现它（比如上面的包：）

    > ```
    > var fs = require('fs');
    > module.exports = function(name, require) {
    >    return fs.readFileSync(require.resolve(name)).toString();
    > }; 
    > ```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-05T19:16:49.097

您必须使用模块中的`readFile`功能。`filesystem`

[http://nodejs.org/docs/v0.3.1/api/fs.html#fs.readFile](http://nodejs.org/docs/v0.3.1/api/fs.html#fs.readFile)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-28T04:47:12.677

您可以要求 .json 文件，包括 node.js 和 TypeScript。这是唯一支持被要求（）的格式，适用于序列化文本。您可以使用编译时工具将文件打包成 json，例如[https://github.com/cancerberoSgx/fs-to-json](https://github.com/cancerberoSgx/fs-to-json)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-03T10:25:42.963

我最简单的解决方案是

```
var string = require("fs").readFileSync("file.txt", 'utf8')
console.log("string = ", string); 
```

# python - Python奇怪的ImportError：没有名为错误的模块

> ID：12752624
> 
> 赞同：2
> 
> 时间：2012-10-05T19:11:45.093
> 
> 标签：python, module

我创建了一个应该作为服务运行的 python 软件。它有一个模块和一个脚本，位于 /etc/init.d 下。我使用 distutils 来打包系统。一切都安装得很好，但是当我尝试从 /etc/init.d 运行脚本时，它会引发以下异常：

```
Traceback (most recent call last):
  File "/etc/init.d/printserver.py", line 11, in <module>
    from myprintserver import *
  File "/etc/rc.d/init.d/printserver.py", line 12, in <module>
    import myprintserver.printserver 
ImportError: No module named printserver 
```

当我尝试通过命令行导入模块时，它运行良好。

```
[root@linuxbox Code]# python
Python 2.7.3 (default, Jul 24 2012, 10:05:38) 
[GCC 4.7.0 20120507 (Red Hat 4.7.0-5)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from myprintserver import *
>>> from myprintserver.printserver import *
>>> daemon = PrintServer('/tmp/printer-daemon.pid','/dev/null','/tmp/dlog','/tmp/dlog')
>>> 
```

我检查了站点包下的模块，一切看起来都很好。我在错误出现之前打印了 sys.path 并且包含了 /usr/lib/python2.7/site-packages 。sys.path 打印输出如下：

```
['/etc/rc.d/init.d', '/usr/lib/python2.7/site-packages/escpos-1.0-py2.7.egg', '/usr/lib/python2.7/site-packages/pyusb-1.0.0a3-py2.7.egg', '/usr/lib/python2.7/site-packages/mechanize-0.2.5-py2.7.egg', '/usr/lib/python2.7/site-packages/PIL-1.1.7-py2.7-linux-x86_64.egg', '/usr/lib64/python27.zip', '/usr/lib64/python2.7', '/usr/lib64/python2.7/plat-linux2', '/usr/lib64/python2.7/lib-tk', '/usr/lib64/python2.7/lib-old', '/usr/lib64/python2.7/lib-dynload', '/usr/lib64/python2.7/site-packages', '/usr/lib64/python2.7/site-packages/gst-0.10', '/usr/lib64/python2.7/site-packages/gtk-2.0', '/usr/lib/python2.7/site-packages', '/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:36:08.823

该问题是由于 /etc/init.d 下的脚本与模块具有相同的名称而引起的。因此，当我尝试包含模块时，脚本本身被包含。

更改脚本的名称解决了这个问题。

由于脚本没有名为 printserver 的类，因此引发了错误。这在开发过程中不是问题，因为模块和脚本都在同一个目录中，并且首先包含模块。

# xpages - 如何使用带有本地 json 数据的 dojo 数据网格

> ID：12752627
> 
> 赞同：1
> 
> 时间：2012-10-05T19:12:00.050
> 
> 标签：xpages, dojo, dojox.grid.datagrid, xpages-extlib

我正在尝试构建一个数据网格，用户可以从中编辑、添加、删除条目，并将其作为 json 存储在 JavaScript 变量中。我让它重复使用，但维护起来需要做很多工作。当我尝试使用 dojo.store.Memory 时出现错误。这是带有 UP1 的 8.5.3，尝试使用 ext lib。

```
var Lodging = [{"CheckIn":"" ,"Check-out":"","Nights":"","Hotel":"","Rate":"","JTR":"","JTRcomments":""}];
var jtrStore = new dojo.store.Memory({data:Lodging, idProperty: "CheckIn"}); 
```

错误：

```
com.ibm.xsp.exception.EvaluationExceptionEx: Error while executing JavaScript action expression In the control : _id3 At line 2, column 31 of: #{javascript:var Lodging = [{"CheckIn":"" ,"Check-out":"","Nights":"","Hotel":"","Rate":"","JTR":"","JTRcomments":""}]; var jtrStore = new dojo.store.Memory({data:Lodging, idProperty: "CheckIn"}); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:54:37.223

dojo.store.Memory 是一个客户端 JS 构造。您的错误表明您在服务器端脚本中。那是行不通的。服务器端 dojo 正在进行中，在任何已发布的 XPages 版本中均不可用。您想将该代码放入脚本块中，以便将其发送到客户端执行

# vb.net - 试图在 VB 2012 的图片框中显示 2 个叠加层

> ID：12752629
> 
> 赞同：1
> 
> 时间：2012-10-05T19:12:06.800
> 
> 标签：vb.net

我正在尝试在 Picturebox 控件中将 2 个天气雷达图像叠加在一起。图形的尺寸都是 600、550。我的代码没有给我任何错误，但是当我运行它时，它只是给了我一个空白表格。我究竟做错了什么？

这是我的代码：

```
Dim Image1 As New Bitmap("http://radar.weather.gov/ridge/Overlays/Topo/Short/FWS_Topo_Short.jpg")
    Dim Image2 As New Bitmap("http://radar.weather.gov/ridge/RadarImg/N0R/FWS_N0R_0.gif")
    Dim Image3 As New Bitmap(600, 550)
    Dim g As Graphics = Graphics.FromImage(Image3)
    g.DrawImage(Image1, New Point(0, 0))
    g.DrawImage(Image2, New Point(0, 0))
    PictureBox1.Image = Image3
    g.Dispose()
    g = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:45:22.097

Bitmap 不能使用 URI，需要指定本地路径。但是，您可以使用带有位图的流，因此首先打开站点图像的流并通过它加载它。

例如：

```
 Dim Image1 As Bitmap = GetStreamBitmap("http://radar.weather.gov/ridge/Overlays/Topo/Short/FWS_Topo_Short.jpg")
        Dim Image2 As Bitmap = GetStreamBitmap("http://radar.weather.gov/ridge/RadarImg/N0R/FWS_N0R_0.gif")

        'TODO implement error checking, "if image1 is nothing" etc..

        Dim Image3 As New Bitmap(600, 550)
        Dim g As Graphics = Graphics.FromImage(Image3)
        g.DrawImage(Image1, New Point(0, 0))
        g.DrawImage(Image2, New Point(0, 0))

        PictureBox1.Image = Image3

        g.Dispose()
        g = Nothing

        Image2.Dispose()
        Image1.Dispose()

'...

    Private Function GetStreamBitmap(url As String) As Bitmap

        Dim bmp As Bitmap = Nothing

        Try
            Dim request As System.Net.WebRequest = _
                System.Net.WebRequest.Create(url)

            Dim response As System.Net.WebResponse = request.GetResponse()
            Dim responseStream As System.IO.Stream = response.GetResponseStream()
            bmp = New Bitmap(responseStream)

        Catch ex As System.Net.WebException
            ' handle error here
        End Try

        Return bmp

    End Function 
```

# asp.net-mvc - Asp.net MVC 将列表实体列表发布到表单

> ID：12752630
> 
> 赞同：0
> 
> 时间：2012-10-05T19:12:12.383
> 
> 标签：asp.net-mvc, list, post

我知道一种将列表发布到表单的方法，参考链接是[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

我有一个需要发布 List> 的场景，通过使用上面链接中提到的代码，我得到了帖子中的值。

生成的html如下：

```
 <input class="input-micro valid" min="1" name="posItems[0][0].Quantity" required="required" value="30" type="text">
<input class="input-micro valid" min="1" name="posItems[1][0].Quantity" required="required" value="20" type="text">
<input class="input-micro valid" min="1" name="posItems[2][0].Quantity" required="required" value="20" type="text">

<input class="input-micro valid" min="1" name="posItems[0][1].Quantity" required="required" value="20" type="text">
<input class="input-micro valid" min="1" name="posItems[1][1].Quantity" required="required" value="50" type="text">
<input class="input-micro valid" min="1" name="posItems[2][1].Quantity" required="required" value="20" type="text"> 
```

我的帖子动作就像

公共 ActionResult 保存（列出 posItems）

当两个列表具有相同数量的项目或者您可以说两个列表具有相同计数时，这很有效。

当第二个列表中的计数大于第一个列表时，我不会从第二个列表中获取附加值。

请参阅下面的示例，其中第二个列表比第一个列表多 1 个项目。

```
 <input class="input-micro valid" min="1" name="posItems[0][0].Quantity" required="required" value="30" type="text">
<input class="input-micro valid" min="1" name="posItems[1][0].Quantity" required="required" value="20" type="text">
<input class="input-micro valid" min="1" name="posItems[2][0].Quantity" required="required" value="20" type="text">

<input class="input-micro valid" min="1" name="posItems[0][1].Quantity" required="required" value="20" type="text">
<input class="input-micro valid" min="1" name="posItems[1][1].Quantity" required="required" value="50" type="text">
<input class="input-micro valid" min="1" name="posItems[2][1].Quantity" required="required" value="20" type="text">
<input class="input-micro valid" min="1" name="posItems[3][1].Quantity" required="required" value="114" type="text"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T08:34:19.060

cshtml:

```
<ul>
        <li><input type="text" name="Items[0].Name" /></li>
        <ul>
            <li><input type="text" name="Items[0].SubItems[0].Name" /></li>
            <li><input type="text" name="Items[0].SubItems[1].Name" /></li>
            <li><input type="text" name="Items[0].SubItems[2].Name" /></li>
        </ul>
    </ul>
    <ul>
        <li><input type="text" name="Items[1].Name" /></li>
        <ul>
            <li><input type="text" name="Items[1].SubItems[0].Name" /></li>
            <li><input type="text" name="Items[1].SubItems[1].Name" /></li>
            <li><input type="text" name="Items[1].SubItems[2].Name" /></li>
        </ul>
    </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:28:29.830

你说的是二维数组。为了在二维数组中有一个项目 1，你必须有一个项目 0。因为你没有 [3][0]，所以不可能有 3[1]。这就是数组的工作方式，你无法改变它。

您唯一的选择 a) 不使用多维数组或 b) 创建 [3][0]

# jquery - 一刀切的 json 传输（开发、chrome 打包的应用程序和 phonegap、单一代码库）

> ID：12752639
> 
> 赞同：0
> 
> 时间：2012-10-05T19:12:37.290
> 
> 标签：jquery, cordova, google-chrome-extension

我正在制作一个 phonegap 应用程序和一个 chrome 打包的应用程序，它们大部分时间都需要在本地运行，并且偶尔会从我的服务器以 json 格式接收数据。

我想不出一个既能在两个平台上工作，又能在开发中工作的单一解决方案。

最初我得到了填充的 json，这对于测试和 phonegap 都很好，但是当我尝试将我的应用程序作为 chrome 扩展测试时，由于 chrome 告诉我有关内联 javascript 的规则，它失败了。

由于 chrome 扩展失败，我将所有 ajax 从 jsonp 更改为普通 json。

现在，当我想测试时，我通常导航到我要测试的 html 页面的 file:// 位置，但我不能从这里做任何 ajax。

在 chrome 中测试，由于同源策略的东西，它是被禁止的。

但是，在生产中，这些方法似乎运行良好。

关于如何解决这个问题的任何建议？

tl:dr: JSONP 适用于 phonegap 和 file://，不适用于 chrome 应用 JSON 适用于 phonegap 和 chrome 应用，不适用于 file://

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:35:38.573

Chrome 扩展确实允许远程 JSONP，但只能通过 HTTPS 连接。查看[CSP（内容安全警察）](http://developer.chrome.com/extensions/contentSecurityPolicy.html)，特别是*“放松默认策略”*会话。

# c - fork 和 execve 的问题

> ID：12752647
> 
> 赞同：1
> 
> 时间：2012-10-05T19:13:19.233
> 
> 标签：c, linux, process, fork, execv

因此，对于课堂作业，我们正在制作自己的基本外壳。在其他功能中，它必须能够处理绝对路径并使用 fork() 和 execv 执行外部应用程序。

这个想法是程序派生一个子进程，调用 execv 替换所述子进程，并在外部执行完成时终止它。

不幸的是我错过了这门课，我尝试了几个我在网上找到的例子，但都没有奏效。问题是父进程复制 execv 命令并自行终止。现在我只是想让它执行“/bin/ls”并返回到shell的主循环。

这是有问题的代码。我想我错过了一些简单的东西。是的，这对教授来说是个好问题，但他不遵守周五的办公时间，我不想等待数小时或数天才能收到电子邮件回复。:P 同样，我知道我应该实施更好的错误检查。现在我将使用基本功能，稍后我将添加花里胡哨。

我已经确认以下所有变量都有其正确的值。问题是我如何只导致子进程在 execv 之后关闭并阻止父进程这样做？

TLDR：自学如何使用 fork/execv 并发现我完全一无所知。

```
161 pid_t child = fork();
162 
163 if(child != -1) 
164   if(token[0] == '.' || token[0] == '/') 
165     if(access(token, X_OK) == 0) {
166       char** charArgs = toCharMatrix(args);
167       execv(token, charArgs);
169     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:21:47.303

父进程必须等待子进程完成......并且为了识别子进程和父进程，请使用 fork 返回的进程 id.. 参见下面的示例：

```
int runcmd(char *cmd)
{
  char* argv[MAX_ARGS];
  pid_t child_pid;
  int child_status;

  parsecmd(cmd,argv);
  child_pid = fork();
  if(child_pid == 0) {
    /* This is done by the child process. */

    execv(argv[0], argv);

    /* If execv returns, it must have failed. */

    printf("Unknown command\n");
    exit(0);
  }
  else {
     /* This is run by the parent.  Wait for the child
        to terminate. */

     do {
       pid_t tpid = wait(&child_status);
       if(tpid != child_pid) process_terminated(tpid);
     } while(tpid != child_pid);

     return child_status;
  }
} 
```

# r - 从中央银行网页下载经济官方数据

> ID：12752648
> 
> 赞同：10
> 
> 时间：2012-10-05T19:13:18.800
> 
> 标签：r, dataframe

我一直在寻找我的问题的任何答案。我读[了这个](https://stackoverflow.com/questions/7407735/importing-wikipedia-tables-in-r)，[这个](https://stackoverflow.com/questions/12372355/r-crashing-on-readhtmltable-call-to-wikipedia)和[这个](https://stackoverflow.com/questions/12208043/r-readhtmltable-function-error)以及其他一些相关的，但我仍然没有得到答案。

我的问题很简单（我希望如此）但答案不是（至少对我自己而言），我想从[这个](http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm)网络导入一些经济数据，这是每个月测量的尼加拉瓜经济活动的指标，到目前为止我已经试过这个：

```
library(XML)
u <- "http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm"
u <- htmlParse(u,encoding="UTF-8")
imae <- readHTMLTable(doc=u, header=T)
imae

library(httr)
u2 <- "http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm"
page <- GET(u2, user_agent("httr"))
x <- readHTMLTable(text_content(page), as.data.frame=TRUE) 
```

没有你想象的成功。第一段代码给了我这个输出

```
 $`NULL`
                                  BANCO CENTRAL DE NICARAGUA    NA    NA    NA   NA   NA   NA   NA   NA   NA   NA    NA    NA       NA
1                                                             <NA>  <NA>  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>     <NA>
2 <U+633C><U+3E64>ndice Mensual de Actividad Económica(IMAE)  <NA>  <NA>  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>     <NA>
3                                           (Base: 1994=100)  <NA>  <NA>  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>     <NA>
4                                                             <NA>  <NA>  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>     <NA>
5                                                        Año   Ene   Feb   Mar  Abr  May  Jun  Jul  Ago  Sep  Oct   Nov   Dic Promedio
6                                                             <NA>  <NA>  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>     <NA>
7                                                       1994 101.6 107.6 100.1 95.7 94.7 92.8 92.1 96.8 98.5 97.4 101.7 121.1    100.0
8                                               Fuente: BCN.  <NA>  <NA>  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>     <NA> 
```

我尝试使用`skip.rows=1:5`，但它并没有真正改变太多的主要结果`NA`。有没有人可以对这个问题有所了解？

预期的结果是一个 data.frame，其中包含[本网站中显示的信息](http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T16:48:26.130

正如我在评论中提到的那样，问题很可能是由于编码不良的表格而引起的。

您可以尝试类似以下的方法（使用 RStudio 在 Ubuntu 上测试）。它要求您安装[wget](http://www.gnu.org/software/wget/)和[html tidy](http://tidy.sourceforge.net/)。*如果您不想安装这些有用的程序，请跳转到此答案的更新部分。*

1.  下载页面并“整理”它。

    ```
    system("wget http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm")
    system("tidy 4.IMAE.htm > new.html") 
    ```

2.  像往常一样继续使用 R

    ```
    library(XML)
    u <- htmlParse("new.html")
    imae <- readHTMLTable(u) 
    ```

3.  如果我们查看上面的输出`readHTMLTable`，我们会看到我们需要跳过几行。让我们再次运行它：

    ```
    imae <- readHTMLTable(u, skip.rows=c(1:5, 7, 27, 28), header=TRUE)
    imae
    # $`NULL`
    #     Año   Ene   Feb   Mar   Abr   May   Jun   Jul   Ago   Sep   Oct   Nov   Dic Promedio
    # 1  1994 101.6 107.6 100.1  95.7  94.7  92.8  92.1  96.8  98.5  97.4 101.7 121.1    100.0
    # 2  1995 113.2 105.0 113.6  98.0 100.9  95.4  99.8 101.5 108.3 107.1 107.6 133.2    107.0
    # 3  1996 123.6 116.0 109.1 107.3  94.8 101.2 100.7 115.3 110.6 112.7 117.5 137.7    112.2
    # 4  1997 133.4 115.9 117.4 118.8 120.4 108.2 107.4 111.1 120.3 117.7 119.5 142.3    119.4
    # 5  1998 131.4 120.4 127.9 118.4 130.2 116.5 122.1 129.7 127.3 127.5 112.7 156.6    126.7
    # 6  1999 146.0 139.6 146.9 134.8 140.6 131.8 130.6 128.3 128.9 131.8 142.7 172.6    139.5
    # 7  2000 157.8 142.1 147.3 138.5 137.7 135.7 128.9 131.2 141.7 143.0 156.6 191.2    146.0
    # 8  2001 163.3 143.8 154.8 141.5 147.6 134.0 135.7 143.3 138.2 138.8 145.3 187.3    147.8
    # 9  2002 152.1 144.7 143.3 142.1 143.1 131.9 136.1 145.7 146.4 147.8 157.5 185.0    148.0
    # 10 2003 159.3 151.4 149.1 142.7 139.7 139.1 145.6 147.8 154.9 158.4 157.8 195.7    153.5
    # 11 2004 172.8 157.1 166.9 153.6 161.2 150.5 155.3 153.3 156.6 155.6 167.7 213.0    163.6
    # 12 2005 183.1 170.6 173.6 158.7 160.8 158.5 158.8 168.7 165.8 165.4 178.4 218.8    171.8
    # 13 2006 187.7 177.8 185.6 161.8 166.4 163.2 164.7 175.1 175.1 185.3 189.6 231.2    180.3
    # 14 2007 200.1 184.1 196.5 180.1 169.7 171.4 181.6 180.9 173.0 182.8 202.0 236.7    188.2
    # 15 2008 205.4 194.4 193.1 205.9 171.0 174.8 181.3 190.7 183.1 182.7 182.5 244.7    192.5
    # 16 2009 195.7 191.0 190.8 177.0 168.1 172.6 179.2 185.6 178.9 181.4 191.3 241.4    187.7
    # 17 2010 195.2 193.7 205.1 185.2 179.3 190.1 191.6 190.0 193.5 197.6 210.9 266.0    199.8
    # 18 2011 213.9 207.4 217.3 198.7 196.1 198.8 191.9 210.0 203.7 207.9 217.3 274.5    211.5
    # 19 2012 233.6                                                                      233.6 
    ```

### 更新：提供帮助的小功能

如果您可以忍受对重音字符进行一些文本清理，W3C 提供[了 html tidy 的在线实现](http://services.w3.org/tidy/tidy)。这使您可以编写如下基本函数：

```
tidyHTML <- function(URL) {
  require(XML)
  URL = gsub("/", "%2F", URL)
  URL <- gsub(":", "%3A", URL)
  URL <- paste("http://services.w3.org/tidy/tidy?docAddr=", URL, sep = "")
  htmlParse(URL)
} 
```

用法很简单：

```
u <- tidyHTML("http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm")
readHTMLTable(u) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T21:13:40.167

如果表格的结构不如您链接到的其他响应中的结构好，这有点像 hack 工作。但如果格式不改变，它实际上更像是一次性的，但要注意——可能会有风险。人们可能会添加更通用的解决方案。

```
require(RCurl)
require(XML)
u <- "http://www.bcn.gob.ni/estadisticas/trimestrales_y_mensuales/siec/datos/4.IMAE.htm"

webpage <- getURL(u)
lines <- readLines(tc <- textConnection(webpage)); close(tc)
pagetree <- htmlTreeParse(lines, error=function(...){}, useInternalNodes = TRUE)

# parse tree by any tables
x <- xpathSApply(pagetree, "//*/table", xmlValue)  

# remove white space and such w/ regexes
unlisted <- unlist(strsplit(x, "\n"))
notabs <- gsub("\t","",unlisted)
nowhitespace <- sub("^[[:space:]]*(.*?)[[:space:]]*$", "\\1", notabs, perl=TRUE)
data <- nowhitespace[!(nowhitespace %in% c("", "|"))] 
```

这是狡猾的部分：

```
months<-data[5:16]
data_out<-data[18:(length(data)-4)] #omits 2012 data to easily fit structure argument

finalhack<-data.frame(t(structure(
data_out,dim = c(14,18),.Dimnames =     
list(c('year',months,'index'),seq(1994,2011))))) 
```

# cvs - 如何在 CVS 中获取远程修改的文件列表

> ID：12752649
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:13:32.273
> 
> 标签：cvs

我想在 CVS 中有远程修改文件的列表。我正在使用 WINCVS，我看不到任何选项来获取 CVS 上的修改文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:02:49.763

我认为您正在寻找的命令被称为`cvs status`

如果你有一个 bash 或类似的 shell，你可以得到一个远程修改文件的列表，如下所示：

```
E:\tmp> cvs status | grep "Need"
cvs status: Examining .
File: A.h               Status: Needs Patch
File: B.h               Status: Needs Patch
File: B.cpp             Status: Needs Patch 
```

如果您真的想获取文件（而不仅仅是查看列表），请使用`cvs update`.

# android - 用于 android 包名称的 ant 正则表达式

> ID：12752650
> 
> 赞同：4
> 
> 时间：2012-10-05T19:13:36.790
> 
> 标签：android, regex, ant, build-process

在我的 android 项目中，我所有的 .java 视图文件都根据当前包的名称导入 R 文件。当我在 Android Manifest 中更改我的包名称时（动态地，不通过 Eclipse 或任何其他 IDE 重构），我需要引用我的所有 java 文件以指向生成的新 R 文件

我正在通过 Ant 制作构建脚本，但我不确定正则表达式约定是什么样的

需要替换的字符串如下所示：

`import com.mysite.myapp.R;`

IE。

`import com.sushiroll.california.R`

这就是我在我的 ant 构建脚本中的内容

```
<replaceregexp file="src/*"
           match="import*.R"
           replace="import ${current.package}.R"
           byline="true">
        <fileset dir="src/.">
            <include name="*.java"/>
        </fileset>
</replaceregexp> 
```

我想匹配所有说`import`和结尾的字符串`.R`

并将其替换为`import $current.package}.R`

对于蚂蚁正则表达式，我该怎么说？我写的匹配和替换只是猜测

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:26:13.907

您需要在 .R 之前对旧包名称字符进行分组

如果你知道包名

```
 match="import com\.mysite\.myapp\.R;" 
```

如果您现在知道包名称，但如果您从不同的包导入 R，请准备好因错误导入而失败

```
 match="import (.*).R;" 
```

替换为

`replace="import ${current.package}.R;"`

和

```
 <fileset dir="src">
        <include name="**/*.java"/>
    </fileset> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:28:46.180

```
<replaceregexp
   match="import .+?\.R;"
   replace="import ${current.package}.R;"
   flags="g"
> 
... 
```

如果您在一行中有两个导入，则需要where`+?`以便它可以工作，并且`g`需要，因此不仅每个文件的一个导入被替换。尽管目前每个文件只有一个，因为您将所有文件都替换为相同的字符串，但这是普遍正确的正则表达式...

# css - CSS background-position 属性的最小值和最大值

> ID：12752651
> 
> 赞同：0
> 
> 时间：2012-10-05T19:13:41.267
> 
> 标签：css

`background-position`CSS属性的最大值和最小值是多少（以像素为单位） ？

更准确地说，如果我们使用

```
background-position: xpos ypos; 
```

`xpos`和`ypos`是像素，和 的允许范围是`xpos`多少`ypos`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:24:19.437

以像素为单位指定时的值[`background-position`](http://www.w3.org/TR/CSS21/colors.html#propdef-background-position)定义为`<length>`，它是一个实数。

[实数](http://www.w3.org/TR/CSS21/syndata.html#numbers)的规范没有提到数字本身的任何限制。

可用的实际值将受到浏览器中的实现的限制。根据用于跟踪文档的变量的大小，文档的大小是有限制的。较旧的浏览器可能有 32767 像素（16 位，有符号）的限制，但现在我们看到更大的网页，限制可能更像 2147483647 像素（32 位，有符号）。

由于浏览器的实现方式不同，为了安全起见，您应该将值保持在合理的范围内。

# api - Shopify API CARTS - 更改 line_item line_price 以覆盖价格

> ID：12752654
> 
> 赞同：3
> 
> 时间：2012-10-05T19:13:49.343
> 
> 标签：api, shopify

Shopify 有一个 CARTS api，但它是只读的。我试图找到一种方法来操纵 line_item 的 line_price 或 price 属性。Shopify 支持已指示我在这里寻求答案。

由于没有关于此的适当文档，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:15:33.807

产品有变体，一个行项目有一个产品 ID 和一个变体 ID。订单项也有价格。而且，无论您如何访问该项目（使用 Ajax API 或后端 API），您都无法操纵价格。如果要更改价格，则必须更改产品的变体价格。您使用后端 API 和产品或变体调用执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:48:13.743

您不能直接操纵购物车中订单项的价格。正如您所提到的，购物车 API 是只读的。这里的所有都是它的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-01-03T13:43:50.723

是的你可以！

不要惹恼人们，您可以对您的商店做任何您想做的事情。

您可以通过 JavaScript 来完成，这是我使用过的一些相关代码：

```
//update price when changing quantity
  function updatePricing() {
    jQuery('#quantity').val(jQuery('#choose-select-value option:selected').val());

      var quantity  = jQuery('#choose-select-value').val();
      var unitPriceTotal = jQuery('.product .total-price').text(); 

      var totalPrice = unitPriceTotal  * quantity;

      jQuery('.product .price').html().replace(regInput ,totalPrice);
} 
```

这只是帮助你去正确的地方的一种方式......

但是，如果您不知道某事，请人们不要乱来，这是您的商店，您可以做任何事情....

我希望这有助于你找到方法。

# android - 如何制作带有此边框的 ListView？

> ID：12752656
> 
> 赞同：0
> 
> 时间：2012-10-05T19:13:56.867
> 
> 标签：android, listview, border, listviewitem

我想做一个像foursquare一样的ListView（下图）。我熟悉自定义项目。

![在此处输入图像描述](../Images/de97ae79fab2ef9eee80292569b424b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:37:33.733

您可以在 xml 中的另一个布局内创建布局。给外部布局一个灰色背景，然后在内部布局的边框上添加填充。

# facebook - 在没有用户登录的情况下标记粉丝页面的粉丝。我该如何解决这个问题？

> ID：12752669
> 
> 赞同：0
> 
> 时间：2012-10-05T19:15:07.470
> 
> 标签：facebook, facebook-graph-api, desktop-application

据我所知，您只能标记与当前使用的 access_token 关联的帐户的朋友。这意味着如果我希望能够制作一个应用程序来在 facebook 上分享带有标记功能的照片，我必须制作一个身份验证系统，用户需要输入他的密码才能登录 FB，然后我请求并存储他的六十天_访问令牌。这种方法对于 Web 应用程序来说很好，但是如果我必须实现一个桌面触摸屏界面，在一个任何人都可以看到他输入用户和密码的环境中，用户与系统进行交互，就会很麻烦。我在公共触摸屏上遇到了这个问题，用户可以在其中拍照并将其发送到 Facebook。该接口是用 C++ 和 curl 库实现的。由于触摸在非常拥挤的环境中，而且屏幕很大，我们体验到用户害怕输入他的账户/通行证。我们通过为我们存储所有照片的活动创建一个粉丝页面来解决这个问题。由于我们已经存储了粉丝页面管理员访问令牌，我们不需要登录用户，但显然我们无法标记任何用户朋友，这大大降低了解决方案的病毒化潜力。

那么，考虑到这个问题，我该如何面对呢？

*   我真的需要对用户进行身份验证才能标记他们的朋友吗？
*   有没有创造性的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:58:42.913

是的，如果您想在帖子中标记用户或他们的朋友，您需要他们登录 - 这是照片标记 API 的要求。

我能想到的唯一选择是给用户一个他们以后可以访问的 URL（例如在他们的手机或 PC 上），这将提示他们授权您的应用程序并在那时进行标记。

# objective-c - 如何在游戏中心使用 ios 6 挑战

> ID：12752670
> 
> 赞同：2
> 
> 时间：2012-10-05T19:15:19.857
> 
> 标签：objective-c, xcode, game-center

首先，

我对objective c / xcode dev还很陌生，所以我很有可能成为木偶。我编写了一些简单的应用程序来尝试一些事情，我最近的一个是测试游戏中心类/功能。

我已将 ok 与排行榜和成就联系起来 - 但我无法应对挑战。

我添加了以下代码....在我的 .m

```
 GKLeaderboard *query = [[GKLeaderboard alloc] init];
          query.category = LoadLeaderboard;
          query.playerScope = GKLeaderboardPlayerScopeFriendsOnly;
          query.range = NSMakeRange(1,100);

          [query loadScoresWithCompletionHandler:^(NSArray *scores, NSError *error)
           {NSPredicate *filter = [NSPredicate predicateWithFormat:@"value < %qi", scoreint];
                NSArray *lesserScores = [scores filteredArrayUsingPredicate:filter];

               [self presentChallengeWithPreselectedScores: lesserScores];

           }
           ]; 
```

这段代码基本上取自苹果，只是替换了变量名......然而，这在 [self presentChallengeWithPreselectedScores: lesserScores] 上给出了错误；

ARC 不允许将 Objective-C 指针隐式转换为“int64_t *”（又名“long long *”）

LoadLeaderboard 被定义为字符串 scoreint 被定义为整数，认为这可能不是 int64_t 的问题，但这似乎没有什么区别。

我敢肯定，对于有任何线索的人来说，这是一个简单的解决方法。但我此刻正在挣扎。因此，如果有人可以善良并帮助有需要的傻瓜，那将不胜感激

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:10:17.727

欢迎来到堆栈溢出。我不知道您的`presentChallengeWithPreselectedScores`方法实现，所以我无法确定（尽管该方法看起来采用 64 位整数，而您正试图为其提供一个数组）。

提出挑战有两种方式：

**1** - 这是更简单的方法 - 如果你已经成功实现了排行榜和分数发布到游戏中心，挑战在 iOS6 中开箱即用，用户可以随时查看排行榜 - 选择提交的分数（或完成的成就）并选择“挑战好友”。

**2** - 第二种方法是建立一个朋友选择器，让用户在你的游戏中发出挑战。但是考虑到您是 Objective-c 和游戏中心的新手，这并不容易。但是供您参考，这里是您的操作方式：

当您为排行榜提交 GKScore 对象时 - 您可以像这样保留和使用该 GKScore 对象（称为 myScoreObject）：

```
[myScoreObject issueChallengeToPlayers:selectedFriends message:yourMessage]; 
```

其中 selectedFriends 是一个 NSArray（朋友选择器应该生成它） - 该消息是可选的，只有当您想向受到挑战的朋友发送消息时才能使用。

# sql - 如何弄清楚为什么行从我的 SQL 服务器中消失？

> ID：12752671
> 
> 赞同：0
> 
> 时间：2012-10-05T19:15:20.253
> 
> 标签：sql, sql-server-2008

我正在使用由另一个程序员团队维护多年的 SQL Server 2008 安装。

我有一个问题，数据行似乎神秘地从我的服务器中的特定表中消失了。

我希望能够建立某种监控系统，当表格被修改时会告诉我，以及修改的摘要。

我认为“触发器”可能是我正在寻找的东西，但我以前从未使用过它们。触发器是我想要使用的吗？如果是，那么学习使用它们的好资源是什么？有更好的解决方案吗？

我想我应该提一下，我所指的表不是那么频繁更新，所以我认为增加一点开销应该没什么大不了的，但我更喜欢我可以刷掉的解决方案一旦问题得到解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:33:01.063

以下示例应该是您要查找的内容的基本概念。

```
CREATE TABLE MyTestTable(col1 int, col2 varchar(10));
GO

CREATE TABLE MyLogTable(col1 int, col2 varchar(10), ModDate datetime, ModBy varchar(50));
GO

CREATE TRIGGER tr_MyTestTable_IO_UD ON MyTestTable AFTER UPDATE, DELETE
AS
    INSERT MyLogTable
    SELECT col1, col2, GETDATE(), SUSER_SNAME()
    FROM   deleted;
GO

Insert MyTestTable Values (1, 'aaaaa');
Insert MyTestTable Values (2, 'bbbbb');
UPDATE MyTestTable Set col2 = 'bbbcc' WHERE col1 = 2;
DELETE MyTestTable;
GO

SELECT * FROM MyLogTable;
GO 
```

但是，请记住，仍有一些方法可以删除触发器不会捕获的记录。（TRUNCATE TABLE 和各种批量更新命令。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:25:55.490

FOR DELETE 触发器可以帮助您捕获正在被删除的行。您可以创建一个审计表（您要监控的表的副本），然后将此代码添加到您的触发器中：

```
INSERT INTO [Your Audit Table]
SELECT * FROM deleted 
```

我还看到了一些涉及 FOR XML 的“更高级”的场景。

我不知道触发器将有助于确定谁在删除记录，但您可能能够证明记录正在被删除，也许是什么时间等。这可以帮助您进一步排除故障。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:22:38.247

另一种解决方案是将[Sql Profiler](http://msdn.microsoft.com/en-us/library/ms173757.aspx)附加到具有特定条件的数据库。这将记录每个查询运行以供您检查。

我喜欢远离触发器，但它们可以帮助解决你的问题，就像 Draghon 说的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:19:46.630

我想你已经想通了。触发器可能是您最好的选择，因为它尽可能接近数据。检查代码（编程甚至存储过程）不会像触发器那样为您提供足够的保证；在这种情况下，删除触发器。

查看这篇文章：[http ://www.go4expert.com/forums/showthread.php?t=15510](http://www.go4expert.com/forums/showthread.php?t=15510)

# c# - 向网站发送新的数据库记录

> ID：12752672
> 
> 赞同：1
> 
> 时间：2012-10-05T19:15:24.920
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010

我们在整个工厂有几个终端，员工将使用这些终端通过我们的供应/仓库部门提交零件请求。

这个供应仓库将有一个终端显示“订单”网站，显示零件编号列表和等待它们的员工。

现在一切正常，但我只知道如何通过在标签中编码来刷新数据`<META REFRESH>`，这并不能很好地工作，并且会导致表单上的许多其他信息在此过程中丢失。

我将如何告诉网页“监听”更改或简单地每分钟更新一次 GridView？

我见过网站这样做。一旦有人回应，这个网站就会弹出一条注释，金融网站每隔几秒钟就会弹出最新的股票报价，等等。我不知道这项技术被称为什么或我将如何使用它。

我是否在代码隐藏中编写了一些代码？

```
protected void Page_Load(object sender, EventArgs e) {
  // ???
} 
```

这是我所拥有的基础知识。

```
<asp:SqlDataSource ID="productionDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:CPWEB_PRODUCTION %>" SelectCommand="SELECT [RequestID], [Employee], [DateStamp], [Line], [PartNo], [Workorder], [Qty], [MTF], [Status] FROM [vwRequestsEx] WHERE ([Status] = @Status)"><SelectParameters>
  <asp:ControlParameter ControlID="ddlSelector" Name="Status" PropertyName="SelectedValue" Type="String" />
  </SelectParameters>
</asp:SqlDataSource>
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True" AutoGenerateColumns="False" AutoGenerateSelectButton="True" CellPadding="1" DataSourceID="productionDataSource2" EmptyDataText="No Records to Display" Font-Size="Small" ForeColor="#333333" OnSelectedIndexChanged="GridViewRow_Selected" ShowHeaderWhenEmpty="True" HorizontalAlign="Left" RowHeaderColumn="RequestID" Width="95%">
  <Columns>
    <asp:BoundField DataField="RequestID" HeaderText="RequestID" SortExpression="RequestID" />
    <asp:BoundField DataField="Employee" HeaderText="Employee" SortExpression="Employee" />
    <asp:BoundField DataField="DateStamp" HeaderText="DateStamp" SortExpression="DateStamp" />
    <asp:BoundField DataField="Line" HeaderText="Line" SortExpression="Line" />
    <asp:BoundField DataField="PartNo" HeaderText="PartNo" SortExpression="PartNo" />
    <asp:BoundField DataField="Workorder" HeaderText="Workorder" SortExpression="Workorder" />
    <asp:BoundField DataField="Qty" HeaderText="Qty" SortExpression="Qty" />
    <asp:BoundField DataField="MTF" HeaderText="MTF" SortExpression="MTF" />
    <asp:BoundField DataField="Status" HeaderText="Status" SortExpression="Status" />
  </Columns>
</asp:GridView> 
```

我最近收到很多反对票。Downvoters：没关系，但请让我知道为什么，这样我就会明白哪里出了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:23:34.650

在回答这个问题时，有一个使用 UpdatePanels 和 Timer 的简单解决方案：[gridview that is updated often](https://stackoverflow.com/questions/10533288/gridview-that-is-updated-frequently)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:32:07.340

您应该考虑使用[SignalR](http://mvc.syncfusion.com/demos/ui/grid/ProductShowCase/SignalR)来实现这一点。

# c# - 重定向所有网络流量

> ID：12752673
> 
> 赞同：3
> 
> 时间：2012-10-05T19:15:29.750
> 
> 标签：c#, network-programming

> **可能重复：**
> [如何在 C# 中创建一个简单的代理？](https://stackoverflow.com/questions/226784/how-to-create-a-simple-proxy-in-c)

我正在编写一个代理应用程序，我想处理所有网络连接。我已经编写了服务器和客户端应用程序，所以现在我只需要将网络连接重定向到它。

我搜索了很多，这就是我发现的：

```
//For sniffing the socket to capture the packets has to be a raw socket, with the
//address family being of type internetwork, and protocol being IP
mainSocket = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);

//Bind the socket to the selected IP address
mainSocket.Bind(new IPEndPoint(IPAddress.Parse(cmbInterfaces.Text), 0));

//Set the socket  options
mainSocket.SetSocketOption(SocketOptionLevel.IP,    //Applies only to IP packets
SocketOptionName.HeaderIncluded,                    //Set the include the header
true);                                              //option to true

byte[] byTrue = new byte[4] {1, 0, 0, 0};
byte[] byOut = new byte[4]{1, 0, 0, 0}; //Capture outgoing packets 
```

我不确定这是否对我有帮助，因为我无法取消原始请求。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:35:43.167

您能够透明地拦截所有网络流量的唯一方法是使用驱动程序，由于显而易见的原因，您将无法在 c# 中执行此操作。也就是说，可以使用[winpcap](http://www.winpcap.org/)作为内核模式组件并在 c# 中执行应用程序逻辑。已经编写了一些与 winpcap 一起使用的[互操作代码](http://pcapdotnet.codeplex.com/)，尽管我没有使用它，所以不能说支持有多稳定和/或完整。

# svn - 使用 ()s 使用 svn 移动文件名

> ID：12752682
> 
> 赞同：0
> 
> 时间：2012-10-05T19:16:01.823
> 
> 标签：svn, command-line, mv

如何使用 svn 移动名称中带有 ()s 的文件。我试过：

```
svn mv https://subversion.assembla.com/svn/semiosnet/Test Protocol\ \(office\).docx https://subversion.assembla.com/svn/semiosnet/Repeaters_Network/Test Protocol\ \(office\).docx
svn: Cannot mix repository and working copy sources 
```

这显然似乎不起作用。有什么提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:24:14.040

这有效：

```
svn mv https://subversion.assembla.com/svn/semiosnet/Test\ Protocol\ \(office\).docx https://subversion.assembla.com/svn/semiosnet/Repeaters_Network/Test\ Protocol\ \(office\).docx 
```

# javascript - 在 Javascript 中刷新 $(document).ready

> ID：12752685
> 
> 赞同：4
> 
> 时间：2012-10-05T19:16:13.523
> 
> 标签：javascript, jquery, javascript-events

我有一个在我的页面上连续运行的脚本，它会检测是否有新项目已提交到我的数据库，此时它会向我的页面添加额外的 html：

```
var count_cases = -1;

setInterval(function(){    
    $.ajax({
        type : "POST",
        url : "new_lead_alerts_process.php",
        dataType: 'json',
        cache: false,
        success : function(response){
            $.getJSON("new_lead_alerts_process.php", function(data) {
                if (count_cases != -1 && count_cases != data.count) {
                    //add new HTML element to page
                    $('#content').prepend("<div class=\"reportRow\"><div id=\"reportRowLeft\" style=\"width: 63px;\">"+dayOfMonth+"</div><div id=\"reportRowCenter\">"+timeSubmitted+"</div><div id=\"reportRowRight\" style=\"width: 126px;\"><div id=\"claimButton"+data.id+"\"><form action=\"\" method=\"post\" name=\""+data.id+"\"><input type=\"hidden\" id=\"lead_id"+data.id+"\" name=\"lead_id\" value=\""+data.id+"\" /><input type=\"hidden\" id=\"client_id"+data.id+"\" name=\"client_id\" value=\""+data.client_id+"\" /><input type=\"hidden\" id=\"user_id"+data.id+"\" name=\"user_id\" value=\"1\" /><input type=\"image\" name=\"submit\" class=\"claimButton\" onClick=\"expand('claimed"+data.id+"');collapse('claimButton"+data.id+"');\" src=\"images/claim.gif\" id=\""+data.id+"\" style=\"width: 126px; height: 29px; margin: 0; border: 0px; padding: 0; background: none;\"></form></div><img id=\"claimed"+data.id+"\" style=\"display: none;\" src=\"images/claimed.gif\" /></div><div id=\"clear\"></div></div>");
                }
            count_cases = data.count;
            });
        }
    });
},1000); 
```

当用户单击新创建的元素中的按钮时，我有另一个脚本通过 AJAX 向数据库提交更新。它看起来像这样：

```
//update db when lead is claimed
$(document).ready(function(){
    $(".claimButton").click(function(){
        var element = $(this);
        var Id = element.attr("id");
        var client_id = $("#client_id"+Id).val();
        var user_id = $("#user_id"+Id).val();
        var lead_id = $("#lead_id"+Id).val();
        var dataString = 'client_id='+client_id+'&user_id='+user_id+'&lead_id='+lead_id;

        $.ajax({
            type: "POST",
            url: "new_lead_alerts_update.php",
            data: dataString,
            cache: false
        });
    return false;});
    }); 
```

我的问题是，第二个 AJAX 提交似乎不起作用。我认为这是因为 $(document).ready 命令仅在页面首次加载时触发，并且由于我通过 AJAX 动态更新页面内容，添加到页面的任何新元素都可以'不提交。

我尝试过 .delegate 和 .live，而不是 .ready，但似乎都不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:19:24.370

将 document.ready 中的功能设置为回调，然后每次从 ajax 将新元素附加到页面时执行此操作，如下所示：

```
$(document).ready(function(){ MakeClaim(); });

function MakeClaim(){
 $(".claimButton").click(function(){
    var element = $(this);
    var Id = element.attr("id");
    var client_id = $("#client_id"+Id).val();
    var user_id = $("#user_id"+Id).val();
    var lead_id = $("#lead_id"+Id).val();
    var dataString = 'client_id='+client_id+'&user_id='+user_id+'&lead_id='+lead_id;

    $.ajax({
        type: "POST",
        url: "new_lead_alerts_update.php",
        data: dataString,
        cache: false
    });
 return false;});
}

success : function(response){
        $.getJSON("new_lead_alerts_process.php", function(data) {
            if (count_cases != -1 && count_cases != data.count) {
             //that huge string
             MakeClaim();
            }
            count_cases = data.count;
        });
} 
```

**编辑**

尝试改变这个：

```
onClick=\"expand('claimed"+data.id+"');collapse('claimButton"+data.id+"');\" 
```

到

```
onClick=\"expand('claimed"+data.id+"');collapse('claimButton"+data.id+"');return false;\" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:28:04.283

请试试这个：

```
function TryIt(getId)
{
        var element = $(getId);
        var Id = element.attr("id");
        var client_id = $("#client_id"+Id).val();
        var user_id = $("#user_id"+Id).val();
        var lead_id = $("#lead_id"+Id).val();
        var dataString = 'client_id='+client_id+'&user_id='+user_id+'&lead_id='+lead_id;

        $.ajax({
            type: "POST",
            url: "new_lead_alerts_update.php",
            data: dataString,
            cache: false
        });

} 
```

只需在 claimButton 中使用 javascript onclick 函数并随时调用 TryIt **()**函数。

# javascript - 在javascript中循环遍历数组时跳过不匹配的字符串

> ID：12752689
> 
> 赞同：0
> 
> 时间：2012-10-05T19:17:03.777
> 
> 标签：javascript

在下面的代码中，我有一个表单输入。当用户搜索恰好在数组中的字符串时，我希望它输出查询。当用户碰巧搜索不在数组中的字符串时，我想输出一条错误消息。问题是当用户在数组中搜索除 item [0] 之外的字符串（在本例中为*ipsum*）时，他们会收到一条错误消息*，然后*他们会返回他们的查询。我想知道是否可以使用下面的代码来解决这个问题，或者是否应该采用不同的方法来解决这个问题（我知道这是一种观点）。

```
<form>
<input type="text" id="formInput"></input>
<input type = "button" id="search"></input>

</form>

<script>

var search = document.getElementById("search");

var data = ["lorim", "ipsum"];

search.onclick = function(){
var formInput = document.getElementById("formInput").value;
for (i=0; i<data.length; i++){

    if (data[i] === formInput) {

      alert(data[i]);
    }   
      else{ alert("not working yet");   }
}
};

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:22:17.693

:) 坚持下去。

要记住的是，您只能在搜索完所有内容后说“不，没有找到它”。所以......保留一个标志:)

```
var didntFind = true;
for (var i = 0; i < data.length; i++) {
    if (data[i] === formInput) {
        alert(data[i]);
        didntFind = false;
        break;
    }
}

if (didntFind) alert('error!'); 
```

您也可以在循环`i === data.length-1` *之后*检查 if ，但上面的代码应该不会让您感到困惑。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:22:42.277

您不需要循环，只需使用[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
search.onclick = function(){
    var formInput = document.getElementById("formInput").value;

    if (data.indexOf(formInput) === -1) {
        // they entered a bad search term
        return;
    }

    // do the rest of your search logic
}; 
```

# ios - UIWebView loadString 在故事板 prepareForSegue 函数中不起作用？

> ID：12752690
> 
> 赞同：0
> 
> 时间：2012-10-05T19:17:09.437
> 
> 标签：ios, uiwebview, uistoryboardsegue

我在网上看到很多示例都`loadString`调用了将静态 HTML 加载到`UIWebView`.

我正在尝试在`prepareForSegue()`我的应用程序的功能中构建相同的功能。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    MYCLASSController *destViewController = segue.destinationViewController;

    if ([segue.identifier isEqualToString:@"fromListToDetail"]) {
        // let's suppose getHtmlTextForItem returns the NSString @"<b>Some HTML text</b> with formatting"       
        [destViewController.htmlText loadHTMLString: [db getHtmlTextForItem:bookId] baseURL:nil];
    }
} 
```

但它不加载任何东西。你知道如何解决这个问题吗？？？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:31:33.263

尝试在您的类 MYCLASSController 的 viewDidLoad 方法中加载内容。

```
- (void) viewDidLoad {
[UIWebViewInstance loadHTMLString: @"something" baseURL:nil];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:58:33.130

直到你的 segue 被执行之后，web 视图才会被实例化。您可以在调试器中确认这一点。

您应该将 HTML 作为字符串属性传递给视图控制器，然后将其加载到 viewDidLoad 中的 Web 视图中。只允许视图控制器管理自己的视图是一个很好的一般原则。外部对象不应该能够修改它们。有关更多信息，请参阅[这篇](http://oleb.net/blog/2012/02/passing-data-between-view-controllers/)精彩的文章。

# node.js - 托管 Cloud Foundry Node.js 应用程序

> ID：12752692
> 
> 赞同：0
> 
> 时间：2012-10-05T19:17:16.567
> 
> 标签：node.js, hosting, cloud-foundry

我有一个要构建并部署到 Cloud Foundry 的 Node.js 应用程序。我知道 Cloud Foundry 不允许将域名指向它的服务器，但我只是想知道是否还有其他选项可以在唯一域名而不是标准 app.cloudfoundry.com 下部署生产版本。

我在某处读到 Cloud Foundry 将作为服务提供给一些托管服务提供商，但似乎还没有找到。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:41:52.297

Per Andy Piper 的评论 > “当商业/生产版本在今年年底之前上线时，CloudFoundry.com 应该提供自定义域等。像 AppFog 这样的其他提供商确实已经提供 CloudFoundry 托管。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-24T19:02:23.557

您可以使用 Pivotal Cloud Foundry (PWS) [https://run.pivotal.io/](https://run.pivotal.io/)之类的东西，让您使用 cf 部署应用程序并提供域管理，您可以在其中添加私有域并将 cfapps.io 域的路由映射到你的 DNS

例如，如果您想将这样的路由添加 ***`example.yourdomain.com`***到您的 cloudfoundry 应用程序

创建一个新域：

`cf create-domain 'MY ORG' yourdomain.com`

然后您可以创建从应用程序到 CF 上的 DNS 记录的映射

`cf map-route APP_NAME yourdomain.com --hostname example`

然后在您的 DNS 管理器中更新记录以指向您的应用程序 cfapps.io 域

**DNS 记录**

`example ==> myCFapp.cfapps.io`

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-06T05:46:43.857

我买了一个 debian vps 并在上面安装了我需要的一切。redis，mongodb，节点，git。如果您想在云提供商处托管您的数据库，还有 node-jitsu 看起来不错。

# mysql - 什么是对大数据进行排序的最佳数据存储

> ID：12752694
> 
> 赞同：0
> 
> 时间：2012-10-05T19:17:28.140
> 
> 标签：mysql, sorting, nosql

我有数百万（30-1 亿）条多列记录。我需要在多列上对这些数据进行排序并在页面中显示它们。存储这些数据的最佳方式是什么？

假设是否有一个包含列 T(id, c1,c2 ... cn) 的表。在 MYSQL 中，这个查询看起来像这样：

select id from T order by cx, cy limit 1000, 1000

我可以假设它是一个只读表，但我需要快速响应。

NoSQL 数据库对这个问题有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:34:13.063

如果您的表被正确索引，它会相当快，即使有数百万或记录。当您开始添加条件时，例如 WHERE some_date < now() 表分区也可能会有所帮助，但您必须提前计划以适应您的需求，否则可能会减慢速度。

NoSQL 的优势是速度和灵活的模式，但是对于数百万条记录，它将需要大量内存，此外，在 Redis 等某些情况下，当它写入磁盘等时，它需要有 50% 的内存可用于分叉。是响应你现在还不够快？您的查询是否命中正确的索引？

# jquery - Ajax 自定义函数

> ID：12752696
> 
> 赞同：0
> 
> 时间：2012-10-05T19:17:36.050
> 
> 标签：jquery, ajax

我正在尝试为 ajax 构建自定义函数，但输出为“null”

```
$("form[id*='admin-handler/announcements'] #submit").click(function(e) {
    e.preventDefault();
    ajaxCall("/admin-handler/announcements", $(this).serialize(),  function(data) {
        alert(data);
    });

});
function ajaxCall(_url, _data, callback) {
    $.ajax({
        type: "POST",
        url: _url,
        data: _data,
        dataType: 'json',
        success: function(data) {
            callback(data);
        }
    }); 
} 
```

所以..我的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:20:11.280

`$(this).serialize()`在您的参数列表中将尝试序列化`#submit`，而不是`form`它所属的元素。

而且由于您是`#submit`通过其 ID 访问的，因此前面的`form`选择器*应该*是多余的。

# javascript - Dojo - 将 getAttr 与其他 Dojo 函数一起使用

> ID：12752698
> 
> 赞同：0
> 
> 时间：2012-10-05T19:17:50.097
> 
> 标签：javascript, dojo

我是 Dojo 的新手，似乎找不到合适的文档或示例来说明如何完成我想要完成的工作。我正在创建一个决策树样式文档，该文档可以动态地将新选项添加​​到现有元素。该代码应在特定 DIV 的末尾添加一个新节点。为此，它必须找到名为 branchID 的元素的 value 属性。然后它将值加一并将新的 HTML 添加到页面中。在 jQuery 中，我会使用这个

```
$('#btnAddFork').click( function(){
    var branchID = $('#branchID').attr( 'value' );
    var newNodeHTML = "<div class='node'>new node #" + (++n) + "</div>';
    $('div#NodeDIV').append( newForkHTML );
}); 
```

此代码适用于我在需求更改迫使我使用不同的框架之前创建的概念证明。我正在 Dojo 中尝试以下操作

```
require(["dojo/dom-construct", "dojo/dom", "dojo/dom-attr", "dojo/on", "dojo/domReady!"],
function(domConstruct, dom, on){
  on(dom.byId("btnAddFork"), "click", function(){
    var n = domAttr.get("branchID", "value");
    domConstruct.place("<div class='node'>new node #" + (++n) + "</div>", "NodeDIV");
  });
}); 
```

Dojo 代码在我尝试为 n 赋值的那一行中消失了。错误消息是“TypeError：对象不是函数”。错误消息没有指出我找到解决方案的正确方向。我确信这是我试图使用 domAttr.get 函数来获取值的方式，但我似乎无法找到使这项工作按我期望的方式工作的方法。Dojo 如何处理这样的事情？如果有人可以指出有关如何/为什么需要按照它的方式编写解决方案的文档，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:50:27.127

我能够找到该问题的解决方案，但我不会删除该问题，而是提供有关我发现的内容的详细信息，以便其他人可能不会犯下真正的初学者级错误。问题是我在 require 语句之后编写函数定义的方式。函数定义要求指定 require 中的每个项目（domReady 除外，因为它是加载器的辅助函数）。我在阅读文档时错过了这个*小细节。*以下代码完全按预期工作。

```
require(["dojo/dom-construct", "dojo/dom", "dojo/on", "dojo/dom-attr", "dojo/domReady!"],
function(domConstruct, dom, on, domAttr){
  on(dom.byId("btnAddFork"), "click", function(){
    var n = domAttr.get("branchID", "value");
    domConstruct.place("<div class='node'>new node #" + (++n) + "</div>", "NodeDIV"); 
    domAttr.set("branchID", "value", n);
  });
}); 
```

请注意，在工作代码中，我将 domAttr 添加到函数定义中。大概第四次或第五次通读 domAttr 的所有文档后，我意识到我没有将它添加到函数定义中。我阅读的 Dojo 文档对构建 require 语句以及如何使用它并不完全清楚，所以我在最初的几次都错过了这个。

# python - 在 Windows 7 中调试 cython 扩展

> ID：12752704
> 
> 赞同：0
> 
> 时间：2012-10-05T19:18:26.040
> 
> 标签：python, windows-7, gdb, mingw, cython

我正在尝试调试 cython 扩展模块。我一直按照[http://docs.cython.org/src/userguide/debugging.html](http://docs.cython.org/src/userguide/debugging.html)中的说明进行操作， 因为我使用的是 Windows 7，因此无法进行 apt-get install 来获取 python 的调试版本。所以当我运行 cygdb 时，我使用 python 而不是 python-dbg

在 gdb 内部（具有 python 支持，即 gdb-python27.exe）我可以使用 cy break module.function 设置断点我可以运行使用 pyd 和 cy run 的 python 脚本，但是，执行不会在集合处停止断点，并继续直到它崩溃（这就是我正在尝试调试的）产生回溯如果我执行 cy step 或 cy bt 或 cy list 它会抱怨“当前未选择任何帧”。

有人知道发生了什么吗？我怀疑我可能需要一个带有调试符号的 python 构建。如果是这样的话，有人知道我在哪里可以下载这样的版本吗？

# facebook - 正确使用 STREAM 表和 filter_key facebook FQL 查询

> ID：12752709
> 
> 赞同：2
> 
> 时间：2012-10-05T19:18:47.033
> 
> 标签：facebook, facebook-fql

在文档中它只提到 AND 和 NOT。我尝试使用 OR 的原因是将大型结果集分解为多个查询并确保查询不会失败。

例如：此查询返回一个结果：

> 从流中选择 post_id WHERE (source_id = '100000462790227') AND strpos(lower(message),'sweet') >=0 AND (filter_key = 'others')

但是当我在过滤键上添加 OR 时，我得到了空结果

> SELECT post_id FROM stream WHERE (source_id = '100000462790227') AND strpos(lower(message),'sweet') >=0 AND (filter_key = 'others' OR filter_key = 'nf')

是 OR，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:38:05.873

我终于明白什么是核心问题了。流表 filter_key 'other' 和 'owner' 仅适用于一个 source_id。我的原始查询也对多个 source_id 进行了 OR 操作，例如 (source_id = '100000462790227' OR source_id = '12345670' )。

这个组合返回空结果！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:49:49.990

以下是我的结论和观察：

FQL 支持第一个“OR”。

当 iOS SDK 调用成功时，我看到“Graph API explorer”的一个问题有时会失败

如果您使用“LIMIT X”限制呼叫，其中 X 小于 100，您也会在第二个查询中得到答案。关于与大型结果集相关的问题以及正确的限制是什么的帖子很少（我读到的都是基于反复试验的）。

# amazon-ec2 - 如何在 AWS EC2 中同步机器密钥？

> ID：12752717
> 
> 赞同：3
> 
> 时间：2012-10-05T19:19:28.950
> 
> 标签：amazon-ec2, formsauthentication, machinekey, autoscaling

由于自动缩放不允许缓冲期和/或不够智能，不能只允许“新请求”进入由于自动缩放而计划关闭的实例，因此我试图避免使用粘性-ELB 提供的会话。否则，这种行为会给一些客户留下登录屏幕。

该网站和其他 RESTful Web 服务在 IIS7 中运行。该网站正在使用基于经典表单的身份验证（MVC3 中的内置成员资格提供程序），但很快将迁移到自定义成员资格提供程序以查看 cookie 并解密然后给出判断。RESTful Web 服务已经在使用自定义成员资格提供程序。

在这种情况下，我认为对于该网站，如果不通过其 ELB 使用粘性会话，我将无法通过。

RESTful Web 服务的 ELB 可以配置为非粘性，因为它们单独观察每个请求上的 cookie，以查看是否存在具有某些加密值的身份验证令牌。但是，这里的问题是 FormsAuthentication.Enrypt 和 FormsAuthentication.Decrypt 方法，它们在后台使用 MachineKeys。对 ？！如果不是，那么它不是问题，但是如果他们这样做了，那么如何在 EC2 中的自动缩放实例之间同步机器密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:01:21.390

最佳实践是生成一个机器密钥并放入您的 web.config 文件中。这样，当 Auto Scaling 启动和停止实例时，键将始终保持不变，而不依赖于实际实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T17:21:40.723

由于推荐的网站似乎已被黑客入侵（[http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)），我建议改用以下过程：

1.  打开 IIS 管理器
2.  选择您正在管理的网站
3.  在 ASP.NET 部分中，选择`Machine Key`（如果您没有看到此部分，请阅读下文）
4.  取消选中`Automatically generate at runtime`并`Generate unique keys for each application`
5.  `Generate Keys`在“操作”菜单中单击，然后单击`Apply`
6.  打开您`web.config`的标签并将其复制`<machineKey>`到您的网络场中的其他网络服务器，以便它们都使用相同的 machineKey

另外，您不会有任何网站记录您的 IP 地址和生成的机器密钥（如果我们是愤世嫉俗的话）。

* * *

如果您的 IIS 管理器中没有 ASP.NET 部分，则可以使用以下过程启用它（来自[https://serverfault.com/questions/129714/asp-net-area-in-iis-7 -on-windows-2008](https://serverfault.com/questions/129714/asp-net-area-in-iis-7-on-windows-2008)）：

在**Windows 7**中，您可以从控制面板 -> 程序 -> 程序和功能 -> 打开或关闭 Windows 功能来启用 ASP.NET。展开 Internet 信息服务 -> 万维网服务 -> 应用程序开发功能，然后单击 ASP.NET。

在**Windows Server 2008**中，打开服务器管理器 -> 单击角色 -> 单击添加角色 -> 选择 Web 服务器 (IIS) -> 在角色服务中单击 ASP.NET，它将提示输入必要的依赖角色服务，然后单击添加所需的角色服务。

# android - 如何在Android中创建一个带有“@”标签的按钮？

> ID：12752721
> 
> 赞同：1
> 
> 时间：2012-10-05T19:19:34.713
> 
> 标签：android, layout, button, input

我正在开发一个自定义 IME（输入法引擎），在 Android 中也称为 SoftKeyboard，我必须创建一个带有“@”作为标签的按钮。这有点棘手，因为“@”字符是一个特殊字符，SDK 使用它来解析 .xml 布局文件。我也试过放一个 [& # 0 0 6 4 ;] （HTML @的编码），但它也给了我一个错误。 **我需要的是：一个带有“@”标签的按钮**。有什么提示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:24:50.143

将@ 放在引号“@”中 - 奇怪但似乎有效。或者，如果您想要文字“@”，您会这样做`\"@\"`

# php - 在 PHP foreach 循环中访问 $_POSTed 变量数组

> ID：12752723
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:19:44.257
> 
> 标签：php, arrays, multidimensional-array, foreach, indexing

我希望从 HTML 表单中遍历一些 $_POSTed 变量。不幸的是，我无法弄清楚访问每个“行”来对其进行处理。

```
$_POST['names'] = array('alan', 'bob', 'carl', 'dan', 'ed');
$_POST['emails'] = array('0@.com', '1@com', '2.com', '3.com', '4.com');
$data=$_POST;

foreach($data as $index=>$row){
  doSomethingNames($row[$index]); //in reality, this would be a more complicated function that needs to access each row's variables, same for printEmails()
  doSomethingEmails($row[$index]); 
}

function doSomethingNames($row){
   print_r($row['names']);// should print alan-bob-carl-dan-ed
}

function doSomethingEmails($row){
   print_r($row['emails']); //should print 0.com-1.com-2.com-3.com-4.com
} 
```

运行此代码当前不会打印任何内容。有人可能会提供任何帮助来帮助我访问每一行的数据，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:49:55.947

更好的方法是使用另一种数组结构：

```
<?php
    $data['names'] = array('0aa', '1bb', '2cc', '3dd', '4ee');
    $data['emails'] = array('AA', 'BB', 'CC', 'DD', 'EE');

    $united_data = array();
    $count = count( $data['names'] );

    for( $i = 0; $i < $count; $i++ )
    {
        array_push( $united_data, 
            array( 'name' => $data['names'][$i], 'email' => $data['emails'][$i] )
        );
    }

    foreach( $united_data as $key => $val ){
        printNames( $united_data[$key] );
        printEmails( $united_data[$key] );

    }

    function printNames( $row ){
        echo 'name: ' . $row['name'] . ', ';
    }

    function printEmails( $row ){
        echo 'email: ' . $row['email'] . '<br>';
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:28:33.440

这可以像这样完成：

```
$data['names'] = array('0aa', '1bb', '2cc', '3dd', '4ee');
$data['emails'] = array('AA', 'BB', 'CC', 'DD', 'EE');

foreach($data as $index => $row){
  echo $index . ': ' . implode('-', $row);
} 
```

这将打印索引的名称并使用[implode()](http://php.net/manual/en/function.implode.php)来获取元素的字符串。

新示例：

```
$data['names'] = array('0aa', '1bb', '2cc', '3dd', '4ee');
$data['emails'] = array('AA', 'BB', 'CC', 'DD', 'EE');

for ($i = 0; $i < count($data['names']); $i++) {
  echo $data['names'][$i] . ': ' . $data['emails'][$i] . '<br />';
} 
```

**这仅在两个数组的元素数量相同时才有效。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:23:56.310

你试图完成你不想要的事情的方式绝对不是一个有效的方式。使用 PHP 的数组函数[`implode()`](http://php.net/manual/en/function.implode.php)。

```
function printNames($row) {
  echo implode("-", $row['names']);
} 
```

这样做是遍历数组的每个成员并返回一个字符串，其中迭代值由“胶水”（在本例中为减号）分隔。请记住，胶水是可选的，执行以下操作也是有效的（尽管不鼓励，最好使用空字符串代替胶水）。

```
function printNames($row) {
  echo implode($row['names']);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:25:47.643

只需使用`implode()`. 它将数组中的值与`-`.

```
 function printNames($row){     
 print_r(implode('-',$row)); // should print 0aa-1bb-2cc-3dd-4ee
}

function printEmails($row){
 print_r(implode('-', $row)); //should print AA-BB-CC-DD-EE
} 
```

**编辑：**

```
 foreach($data as $index => $row){
  foreach($row as $k =>$v) {
  if($k === 'names')
   printNames($v);
  else 
    printEmails($v);
 }
}

 function printNames($elem){
   print_r($elem); echo '-';// should print 0aa-1bb-2cc-3dd-4ee
 }

function printEmails($element){
   print_r($elem); echo'-'; //should print AA-BB-CC-DD-EE
} 
```

# jquery - 如何将其写入 If success 或 if submit else

> ID：12752724
> 
> 赞同：0
> 
> 时间：2012-10-05T19:19:44.583
> 
> 标签：jquery, if-statement

这是我的表单附带的验证代码，它按原样工作。

但是我想向它添加另一个功能，因为它成功或没有验证错误并准备好表单提交以在期间执行另一个功能

我只想将两者结合为一个语句，当表单成功或返回 true 时，加载等待。

```
 if (ValidationErrors[FormID].join("|").search(id) == -1) 
            ValidationErrors[FormID].push(id);
            return false;

           }else {

           for (var i = 0; i < ValidationErrors[FormID].length; i++) {

            if (ValidationErrors[FormID][i] == id) 

            ValidationErrors[FormID].splice(i, 1);
           }

             return true;
         }
      }

           Loading function

        function ShowProgressAnimation() {
              $("#loading-div-background").css({ opacity: 0.8 });
               $("#loading-div-background").show();
               $(".button-2").hide();
        } 
```

第一次尝试这个版本：

```
 if (ValidationErrors[FormID].join("|").search(id) == -1) 
              ValidationErrors[FormID].push(id);
             return false;

            }   else {
            for (var i = 0; i < ValidationErrors[FormID].length; i++) {
                if (ValidationErrors[FormID][i] == id) 
                    ValidationErrors[FormID].splice(i, 1);

            } else {

                 function ShowProgressAnimation() {
               $("#loading-div-background").css({ opacity: 0.8 });
               $("#loading-div-background").show();
               $(".button-2").hide();

          }         

            return true;
        } 
```

第二版：

```
 if (ValidationErrors[FormID].join("|").search(id) == -1) 
          ValidationErrors[FormID].push(id);
            return false;
        }
        else {
            for (var i = 0; i < ValidationErrors[FormID].length; i++) {
                if (ValidationErrors[FormID][i] == id) 
                    ValidationErrors[FormID].splice(i, 1);
            } 

           function() {

                               $(ShowProgressAnimation() {
               $("#loading-div-background").css({ opacity: 0.8 });
               $("#loading-div-background").show();
               $(".button-2").hide();

                   });
             }            

            return true;
          } 
```

第三版：

```
 if (ValidationErrors[FormID].join("|").search(id) == -1) 
            ValidationErrors[FormID].push(id);
            return false;
        }
        else {
            for (var i = 0; i < ValidationErrors[FormID].length; i++) {
                if (ValidationErrors[FormID][i] == id) 
                    ValidationErrors[FormID].splice(i, 1);
            } 

                              function ShowProgressAnimation() {
               $("#loading-div-background").css({ opacity: 0.8 });
               $("#loading-div-background").show();

                return true;
              } 
```

# android - 比较android中的两个字符串

> ID：12752734
> 
> 赞同：0
> 
> 时间：2012-10-05T19:20:25.050
> 
> 标签：android, json, string

> **可能重复：**
> [用 == 比较两个相同的字符串返回 false](https://stackoverflow.com/questions/7375427/comparing-two-identical-strings-with-returns-false)

我很难解决这个代码。这可能看起来很傻，但我无法弄清楚发生了什么。我正在解析一个`JSONArray`（没什么大不了的！）我正在使用 for 循环遍历数组。我想在用户输入和值匹配时打破循环。这是我的代码

```
String regi = null;
JSONObject studentObject = null;
try {
JSONArray returned = test.getInternetData();
int i;
for (i = 0; i < returned.length(); i++) {
    studentObject = returned.getJSONObject(i);
    regi = studentObject.getString("REGISTRATION_NO");
    if (regi == reg) {
        name = studentObject.getString("STUDENT_NAME");
        break;
    }
}
course = studentObject.getString("COURSE_CODE");
Log.d("Details", name + course + regi + i);//Out put: nullGraduate081018394:name - null
//course: Graduate (same for all), regi: last registration number, 
//i: giving totalnumber of objects 
```

据我所知，循环在找到匹配项时应该停止。将`COURSE_CODE`与学生相对应。我错过了什么吗？

**请注意：**该函数`getInternetData()`返回整个`JSON Array`. 循环完全遍历每个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:24:15.180

字符串无法`==`在 Java 中进行比较。你必须使用`string1.equals(string2)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:25:06.413

使用`regi.equals(reg)`or`regi.contentEquals(reg)`代替，`==`你会没事的:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:25:10.687

使用 `regi.contentEquals(reg)` 或`!regi.contentEquals(reg)` 比较

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T19:25:12.690

你应该使用`regi.contentEquals(reg)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T19:43:56.683

尝试使用这个

```
JSONArray returned = test.getInternetData();
int i;
for (i = 0; i < returned.length(); i++) {
// added the below line
studentObject = new JsonObject();
studentObject = returned.getJSONObject(i);
regi = studentObject.getString("REGISTRATION_NO");
if (regi.equals(reg)) {
    name = studentObject.getString("STUDENT_NAME");
    break;
}
} 
```

而不仅仅是

```
JSONArray returned = test.getInternetData();
int i;
for (i = 0; i < returned.length(); i++) {
studentObject = returned.getJSONObject(i);
regi = studentObject.getString("REGISTRATION_NO");
if (regi == reg) {
    name = studentObject.getString("STUDENT_NAME");
    break;
}
} 
```

# ffmpeg - FFmpeg 保存 rtmp 直播 3 分钟后中断

> ID：12752737
> 
> 赞同：0
> 
> 时间：2012-10-05T19:20:52.650
> 
> 标签：ffmpeg, rtmp

我正在玩 ffmpeg 并且能够将实时流保存到文件中。这样做的命令是：

```
ffmpeg -re -i "rtmp://<ip addr>/livestream live=1" -f h264 test.flv 
```

但是，我已经对此进行了两次测试，并且两次 ffmpeg 在获取 3:28 的实时视频后都会停止。

整个输出在这里：

```
bash-4.2$ ffmpeg -re -i "rtmp://<ip addr>/livestream live=1" -vcodec libx264 -f h264 test.flv
WARNING: gnome-keyring:: couldn't connect to: /home/me/.cache/keyring-bpajcJ/pkcs11: No such file or directory
ffmpeg version 0.10.4 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jul 20 2012 22:01:52 with gcc 4.7.0 20120507 (Red Hat 4.7.0-5)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib --mandir=/usr/share/man --arch=i686 --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables' --enable-bzlib --disable-crystalhd --enable-gnutls --enable-libass --enable-libcdio --enable-libcelt --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopenjpeg --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libxvid --enable-x11grab --enable-avfilter --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib --cpu=i686 --enable-runtime-cpudetect
  libavutil      51\. 35.100 / 51\. 35.100
  libavcodec     53\. 61.100 / 53\. 61.100
  libavformat    53\. 32.100 / 53\. 32.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 61.100 /  2\. 61.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\.  6.100 /  0\.  6.100
  libpostproc    52\.  0.100 / 52\.  0.100
WARNING: gnome-keyring:: couldn't connect to: /home/me/.cache/keyring-bpajcJ/pkcs11: No such file or directory
Metadata:
  videocodecid          avc1
  width                 320.00
  height                240.00
  frameWidth            320.00
  frameHeight           240.00
  displayWidth          320.00
  displayHeight         240.00
  framerate             29.97
trackinfo:
  timescale             90000.00
  language              eng
sampledescription:
  sampletype            H264
  type                  video
  profile-level-id      42e00c
  sprop-parameter-sets  Z0LgDNoFB+wEQAAC7sAAr8gh,aM4zyA==
  description           {H264CodecConfigInfo: profile: "Baseline", level: 1.2, frameSize: 320x240, displaySize: 320x240, PAR: 1:1, frameRate: 29.97}
rtpsessioninfo:
  name                  H264 Stream 1
  origin                - 1486490083 118668671 IN IP4 10.93.183.3
  timing                0 0
  protocolversion       0
attributes:
  range                 npt=now-
[flv @ 0x9578ee0] Estimating duration from bitrate, this may be inaccurate
Input #0, flv, from 'rtmp://<ip addr>/livestream live=1':
  Duration: N/A, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: h264 (Constrained Baseline), yuv420p, 320x240 [SAR 1:1 DAR 4:3], 14.99 tbr, 1k tbn, 59.94 tbc
[buffer @ 0x99ee900] w:320 h:240 pixfmt:yuv420p tb:1/1000000 sar:1/1 sws_param:
[libx264 @ 0x9584540] using SAR=1/1
[libx264 @ 0x9584540] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2
[libx264 @ 0x9584540] profile High, level 1.2
Output #0, h264, to 'test.flv':
  Metadata:
    encoder         : Lavf53.32.100
    Stream #0:0: Video: h264, yuv420p, 320x240 [SAR 1:1 DAR 4:3], q=-1--1, 90k tbn, 14.99 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
Press [q] to stop, [?] for help
RTMP_ReadPacket, failed to read RTMP packet body. len: 16582bitrate= 212.1kbits/s    
frame= 3111 fps= 15 q=-2.0 Lsize=    5385kB time=00:03:27.47 bitrate= 212.6kbits/s    
video:5385kB audio:0kB global headers:0kB muxing overhead 0.000000%
[libx264 @ 0x9584540] frame I:13    Avg QP:18.70  size: 31866
[libx264 @ 0x9584540] frame P:1908  Avg QP:22.29  size:  2392
[libx264 @ 0x9584540] frame B:1190  Avg QP:29.24  size:   451
[libx264 @ 0x9584540] consecutive B-frames: 39.5% 24.0% 13.0% 23.4%
[libx264 @ 0x9584540] mb I  I16..4:  0.2%  1.2% 98.6%
[libx264 @ 0x9584540] mb P  I16..4:  0.0%  0.0%  0.7%  P16..4: 22.0%  3.5%  2.6%  0.0%  0.0%    skip:71.2%
[libx264 @ 0x9584540] mb B  I16..4:  0.0%  0.0%  0.2%  B16..8: 15.6%  2.8%  1.1%  direct: 1.3%  skip:78.9%  L0:47.0% L1:42.2% BI:10.8%
[libx264 @ 0x9584540] 8x8 transform intra:2.2% inter:8.5%
[libx264 @ 0x9584540] coded y,uvDC,uvAC intra: 98.0% 94.9% 73.9% inter: 14.5% 16.0% 11.3%
[libx264 @ 0x9584540] i16 v,h,dc,p:  0% 50% 17% 33%
[libx264 @ 0x9584540] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu:  7% 21% 11%  3% 13%  6% 21%  4% 14%
[libx264 @ 0x9584540] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 11% 21% 14%  5% 11%  7% 14%  5% 12%
[libx264 @ 0x9584540] i8c dc,h,v,p: 65% 15% 10% 10%
[libx264 @ 0x9584540] Weighted P-Frames: Y:0.5% UV:0.1%
[libx264 @ 0x9584540] ref P L0: 80.8% 10.4%  7.6%  1.2%  0.0%
[libx264 @ 0x9584540] ref B L0: 94.9%  4.8%  0.2%
[libx264 @ 0x9584540] ref B L1: 96.4%  3.6%
[libx264 @ 0x9584540] kb/s:212.48 
```

虽然我没有看到任何错误。看起来ffmpeg认为流已经结束了？但这是不可能的，因为它是直播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:02:09.987

这很可能与在服务器端执行的 swf 验证有关（参见“swfVfy”标志）。您可以尝试以下方法，看看流是否更进一步。

ffmpeg -i "rtmp:///livestream live=1 swfVfy=1 swfUrl=url_to_the flash_player_here" -y test.flv

不幸的是，在我的情况下，我无法让 ffmpeg 的 swfVfy 工作，并且让相同流的示例与 rtmpdump 一起正常工作。

# ios6 - 在 iPhone5 [[UISCreen mainScreen] bounds].size 返回为 320x480？

> ID：12752738
> 
> 赞同：8
> 
> 时间：2012-10-05T19:21:01.280
> 
> 标签：ios6, retina-display, screen-size

在 iPhone5 [[UISCreen mainScreen] bounds].size 返回为 320x480。为什么。在我正在阅读的所有帖子中，人们都说它返回了正确的屏幕尺寸。这里发生了什么？我是否缺少 .plist 文件中的某些内容或其他内容？

顺便说一句，我正在手动编码 GUI，所以没有 XIB。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-05T22:39:24.417

除非您的应用程序在其捆绑包中包含 Default-568h.png，否则它将在 iPhone 5 上 480 点高的旧屏幕沙箱内运行，并且无法在该沙箱之外绘制或查看任何尺寸。

请注意，仅在使用 Xcode 4.5 和 iOS 6 SDK（或可能更高版本）构建应用程序以提交到 Apple 的应用商店时才允许包含此 Default-568h.png。

补充：使用 iOS 8 SDK（或更高版本）构建并在 iOS 8（或更高版本）下运行应用程序时，LaunchScreen.xib 还将删除 480 高度沙箱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:14:02.990

看起来有一个启动图像是 [[UIScreen mainScreen] bounds] 在 iPhone5 上正常工作的先决条件。对于我们这些依赖图像设计团队的人来说，这是一个问题。看起来您只需将启动图像组合在一起并将其放置到位。

真的没有更好的办法吗？任何人？

# iphone - Xcode 中的运行时错误，因为代码行太多

> ID：12752739
> 
> 赞同：0
> 
> 时间：2012-10-05T19:21:06.617
> 
> 标签：iphone

I have written a large code (a calculator program) about 220,000 line of code and more in my base implementation file. The program build and run well, but whenever it comes to execute the codes from specific line number and further, the program stops, and gives a run time error. There is no problem with the code, I have tried it in smaller scale, (I mean deleting some lines) when it become smaller it runs ok. My question here is this, does the Xcode have limitation in capacity of each file when running? And if the answer is NO, so what should I do?

# sql - 在 sql join where 子句中使用字段

> ID：12752743
> 
> 赞同：1
> 
> 时间：2012-10-05T19:21:31.873
> 
> 标签：sql, crystal-reports, openedge

我正在尝试使用 sql 语句编写水晶报告，因为它运行得更快。但是我在某些链接上遇到了麻烦。我需要在后续链接中使用链接的结果作为标准。

好的，这是我的陈述的示例：

（标有**的行是有问题的行）

```
SELECT
    Part.PartNum,
    Cust.CustNum,
    Cust.CustID,
    YTD.Qty
FROM
    (
    SELECT
        Pub.Part.PartNum,
        Pub.Part.UserChar1 AS CustID
    FROM
        Pub.Part
    ) AS Part
        LEFT OUTER JOIN (
            SELECT
                Pub.Customer.CustID,
                Pub.Customer.CustNum,
                Pub.Customer.Name
            FROM
                Pub.Customer
            WHERE
                Pub.Customer.CustID = '1038'
        ) AS Cust 
            ON Part.CustID = Cust.CustID
        LEFT OUTER JOIN (
            SELECT
                Pub.OrderDtl.PartNum,
                Sum(Pub.OrderDtl.OrderQty) AS Qty
            FROM
                Pub.OrderHed JOIN Pub.OrderDtl ON
                    Pub.OrderHed.OrderNum = Pub.OrderDtl.OrderNum
            WHERE
                **Pub.OrderHed.CustNum = Cust.CustNum AND**
                **Pub.OrderDtl.PartNum = Part.PartNum AND**
                YEAR(Pub.OrderHed.OrderDate)=YEAR(CURDATE())
            GROUP BY 
                Pub.OrderDtl.PartNum
        ) AS YTD ON Part.PartNum = YTD.PartNum 
```

现在，我收到一条错误消息：

```
Part.PartNum cannot be found or is not specified for the query. 
```

Cust.CustNum 出现同样的错误。你能帮我弄清楚我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:28:59.800

问题是您在无法执行的子查询中使用了其中一个别名。你将不得不做类似的事情：

```
SELECT Part.PartNum,
  Cust.CustNum,
  Cust.CustID,
  YTD.Qty
FROM
(
  SELECT Pub.Part.PartNum,
    Pub.Part.UserChar1 AS CustID
  FROM Pub.Part
) AS Part
LEFT OUTER JOIN
(
  SELECT Pub.Customer.CustID,
    Pub.Customer.CustNum,
    Pub.Customer.Name
  FROM Pub.Customer
  WHERE Pub.Customer.CustID = '1038'
) AS Cust
  ON Part.CustID = Cust.CustID
LEFT OUTER JOIN
(
  SELECT Pub.OrderDtl.PartNum,
    Sum(Pub.OrderDtl.OrderQty) AS Qty,
    Pub.OrderHed.CustNum
  FROM Pub.OrderHed 
  JOIN Pub.OrderDtl 
    ON Pub.OrderHed.OrderNum = Pub.OrderDtl.OrderNum
  WHERE YEAR(Pub.OrderHed.OrderDate)=YEAR(CURDATE())
  GROUP BY Pub.OrderDtl.PartNum, Pub.OrderHed.CustNum
) AS YTD
  ON Part.PartNum = YTD.PartNum
  AND Cust.CustNum = YTD.CustNum 
```

更多地查看您的查询，您实际上可以摆脱两个子查询：

```
SELECT Part.PartNum,
  Cust.CustNum,
  Cust.CustID,
  YTD.Qty
FROM Pub.Part Part
LEFT OUTER JOIN Pub.Customer Cust
  ON Part.CustID = Cust.CustID
  AND Cust.CustID = '1038'
LEFT OUTER JOIN
(
  SELECT d.PartNum,
    Sum(d.OrderQty) AS Qty,
    h.CustNum
  FROM Pub.OrderHed h
  JOIN Pub.OrderDtl d
    ON h.OrderNum = d.OrderNum
  WHERE YEAR(h.OrderDate)=YEAR(CURDATE())
  GROUP BY d.PartNum
) AS YTD
  ON Part.PartNum = YTD.PartNum
  AND Cust.CustNum = YTD.CustNum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:35:35.483

这是因为您无法在另一个子查询 (YTD) 中访问父子查询 (cust, part)

但是，在您的情况下，解决方案很简单，而是在 ON 子句中过滤：

```
SELECT
    Part.PartNum,
    Cust.CustNum,
    Cust.CustID,
    YTD.Qty
FROM
    (
    SELECT
        Pub.Part.PartNum,
        Pub.Part.UserChar1 AS CustID
    FROM
        Pub.Part
    ) AS Part
        LEFT OUTER JOIN (
            SELECT
                Pub.Customer.CustID,
                Pub.Customer.CustNum,
                Pub.Customer.Name
            FROM
                Pub.Customer
            WHERE
                Pub.Customer.CustID = '1038'
        ) AS Cust 
            ON Part.CustID = Cust.CustID
        LEFT OUTER JOIN (
            SELECT
                Pub.OrderDtl.PartNum,
                Sum(Pub.OrderDtl.OrderQty) AS Qty,
                Pub.OrderHed.CustNum
            FROM
                Pub.OrderHed JOIN Pub.OrderDtl ON
                    Pub.OrderHed.OrderNum = Pub.OrderDtl.OrderNum
            WHERE
                YEAR(Pub.OrderHed.OrderDate)=YEAR(CURDATE())
            GROUP BY 
                Pub.OrderDtl.PartNum
        ) AS YTD ON Part.PartNum = YTD.PartNum AND Cust.CustNum = YTD.CustNum 
```

# java - 如何查看 JRE 和/或 GAE 类的调试日志

> ID：12752749
> 
> 赞同：1
> 
> 时间：2012-10-05T19:21:59.033
> 
> 标签：java, google-app-engine, logging

是否可以更改 JRE 和/或 GAE 类的日志记录级别？

我尝试将其放入 logging.properties 文件中：

```
sun.net.www.protocol.http.HttpURLConnection.level = ALL
com.google.appengine.api.urlfetch.level = ALL 
```

我试图从代码更改级别：

```
Logger.getLogger("sun.net.www.protocol.http.HttpURLConnection").setLevel(Level.ALL);
Logger.getLogger("com.google.appengine.api.urlfetch").setLevel(Level.ALL); 
```

但到目前为止，我只在 GAE 控制台中看到我自己的应用程序的日志。我不知道如何调试仅在 GAE 中发生但不在我的本地沙箱中发生的问题......（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:57:35.360

本地环境和生产环境之间的差异通常可以很容易地找到，而无需从 Google 类进行日志记录。例如对于 URLFetch，它是 10 秒超时。描述您尝试调试的问题可能会更好。

# jquery - 从模态提交表单

> ID：12752762
> 
> 赞同：0
> 
> 时间：2012-10-05T19:22:51.213
> 
> 标签：jquery

我在页面上有一个表单，但是没有提交。有一个使用 colorbox 插件启动模式对话框的链接。[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

该链接实际上在该对话框中。这是我的代码

**JS**

```
$('#openModal').colorbox({ 
    html: 'some text <input id="mySubmit" type="button" value="submit form">' 
});

$('#mySubmit').click(function() {
    $('#myForm').submit();
}); 
```

**HTML**

```
 <div id="openModal">open modal</div>

</form> 
```

似乎不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:25:44.977

`.click()`您在按钮包含在 dom 之前调用。改用事件委托：http: `.delegate()` [//api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
$(document).delegate('#mySubmit', 'click', function() {
    $('#myForm').submit();
}); 
```

# solr - Solr 的硬件规格建议

> ID：12752765
> 
> 赞同：0
> 
> 时间：2012-10-05T19:22:58.453
> 
> 标签：solr, hardware

我正在寻找 Solr 搜索引擎的硬件规范。我们的要求是建立一个索引大约 5 到 900 万份文档的搜索系统。每秒的峰值查询量约为 50 人。我查看了戴尔网站并认为机架服务器可能是好的。所以我做了一个样品产品。你怎么看我的选择？您对 Solr 系统的硬件规格有任何经验吗？

PowerEdge R815 R815 机箱，最多可容纳六个 2.5 英寸硬盘

处理器

2x AMD Opteron 6276, 2.3GHz, 16C, Turbo CORE, 16M L2/16M L3, 1600Mhz Max Mem

附加处理器

没有第三/第四处理器编辑

操作系统

无操作系统编辑

操作系统媒体套件

无编辑

操作系统和软件客户端访问许可证

无编辑

记忆

64GB 内存 (8x8GB)，1333MHz，用于 2 个处理器的双排 LV RDIMM 编辑

硬盘配置

PERC H200 控制器（非混合驱动器）没有 RAID 编辑

内部控制器

PERC H200 集成 RAID 控制器编辑

硬盘驱动器

1TB 7.2K RPM SATA 2.5in 热插拔硬盘编辑

数据保护优惠

无编辑

嵌入式管理

iDRAC6 Express 编辑

系统文档

电子系统文档和 OpenManage DVD 套件编辑

网络适​​配器

Intel® Gigabit ET NIC, Dual Port, Copper, PCIe-4 编辑

网络适​​配器

Intel® Gigabit ET NIC, Dual Port, Copper, PCIe-4 编辑

主机总线适配器/融合网络适配器

无编辑

电源

1100 瓦冗余电源编辑

电源线

NEMA 5-15P 转 C13 壁式插头，125 伏，15 安培，10 英尺 (3m)，电源线编辑

BIOS 设置

性能 BIOS 设置编辑

导轨

无机架导轨或电缆管理臂编辑

挡板

PowerEdge R815 边框编辑

内置光驱

DVD ROM、SATA、内部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:37:12.317

我同意马尔科（不是我自己，其他马尔科：）。

您应该使用例如[jMeter](http://jmeter.apache.org/)来测试您的配置的功能（最重要的指标当然是：响应时间如何随并行用户的数量而变化），然后根据这些结果做出明智的决定。

准备好使用 JVM 内存设置，看看是否会影响整体性能。我还将测试各种应用程序服务器，以了解该决定如何影响响​​应时间。

PS 如果您选择使用 jMeter，您绝对应该使用[jMeter 插件](http://code.google.com/p/jmeter-plugins/)，这将允许您（[复合图](http://code.google.com/p/jmeter-plugins/wiki/CompositeGraph)）在同一张图上显示并行用户数和服务器处理器、内存和网络负载的响应时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:42:57.393

这是一个非常开放的问题，有太多的细节未知——稻草人硬件规格真的不是很有用（TL；DR）

只有一种明智的方法可以解决这个问题，那就是凭经验。

# nlp - 如何计算 TF-IDF

> ID：12752771
> 
> 赞同：1
> 
> 时间：2012-10-05T19:23:19.987
> 
> 标签：nlp, tf-idf

我想使用 TF-IDF 的余弦相似度方法获得两个单词的语义相似度。首先，我想从 wikipedia 或 word-net 中获取这些单词的含义。之后，我想对文本进行预处理并找到 TF-IDF。当我搜索这个问题时，我发现要找到 TF-IDF，我们应该有一个训练集和测试集。在我的情况下，哪个是训练集，哪个是测试集？如何使用计算结果计算余弦相似度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:38:06.440

训练阶段是在 TF-IDF 中找到权重，权重是根据文档中给定单词与所有文档的频率[计算得出的。](http://en.wikipedia.org/wiki/Vector_space_model#Example%3a_tf-idf_weights)一旦你有了所有的权重，就意味着你把每个文档变成了一个包含 N 个单词的向量。

现在，给定两个文档 i 和 j，您可以通过 Cosine 函数计算它们的相似度。两个向量的余弦相似性度量是通过它们的点积在它们的大小上计算出来的。[在这里](http://en.wikipedia.org/wiki/Cosine_similarity)查看更多信息。

# c# - 获取字符串中的星期几

> ID：12752773
> 
> 赞同：-3
> 
> 时间：2012-10-05T19:23:27.217
> 
> 标签：c#, regex

我有一个输出字符串，它将包含一个工作日（星期一、星期二等）。

例如，

```
"Some tex may appear before week day, Monday, will only be one occurrence of the weekday" 
```

如何从字符串中检索工作日？

我可以使用 IF 语句链来查看字符串是否包含工作日，但想知道是否有更简洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:30:48.473

这将构建一个正则表达式，它将找到一周中的某一天。

```
var pattern = string.Format("({0})", string.Join("|", Enum.GetValues(typeof (DayOfWeek)).OfType<DayOfWeek>()));

var match = Regex.Match("some text here, Thursday maybe text here", pattern, RegexOptions.IgnoreCase);

Assert.AreEqual("Thursday", match.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:29:14.277

我会做一些寻找当天索引的事情，然后从那里拉出来。就像是：

```
int first = str.IndexOf("Thursday");
int last = str.LastIndexOf("Thursday");
string day = str.Substring(first, last); 
```

代码可能不是 100% 正确，但类似的东西应该可以工作。如果超过一天，您显然必须每天都这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:29:16.337

检查它是否存在于字符串中

```
string text = "some text here, Thursday maybe text here";

if (text.Contains("thursday")) // Make text to lower case before checking
{
    ...
} 
```

删除它

```
text = text.Replace("thursday", ""); // Regex would be better to make it case-insensitive 
```

一周中的所有日子都这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:41:50.210

假设不考虑这种情况并且只发生一种情况：

```
string found = "";

string myString = "some text here, Thursday maybe text here";

foreach (string str in myString.Split())

    foreach (DayOfWeek day in Enum.GetValues(typeof(DayOfWeek)))

        if(day.ToString() == str) found = str; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T19:36:55.550

```
int intCounter = 0;
string strWeekName = "";
string strContent = "Some text wednesday";
strContent = strContent.ToUpper;
while (intCounter < 7) {
  if (strContent.Contains(DateAndTime.WeekdayName(intCounter).ToUpper())) {
      strWeekName = DateAndTime.WeekdayName(intCounter);
      break; 
  }
  intCounter++; 
}

MsgBox "Weekday " + strWeekName; 
```

# c++ - 在 Linux 上安装 kde 运行时库的问题

> ID：12752774
> 
> 赞同：0
> 
> 时间：2012-10-05T19:23:28.037
> 
> 标签：c++, linux, kde, kdevelop

我正在尝试在 Linux (2.6.18-308.11.1.el5) 上为 kscope 安装 kde 运行时库。

[http://kscope.sourceforge.net/install.shtml](http://kscope.sourceforge.net/install.shtml)

我已经从[ftp://ftp.kde.org/pub/kde/stable/4.9.2/src/下载了 kde-runtime-4.9.2](ftp://ftp.kde.org/pub/kde/stable/4.9.2/src/)

但是，在下载的文件中，我找不到有关如何安装它的 INSTALL 或其他帮助文件。

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T17:43:17.267

这是你可以做的（假设你不在 kubuntu 上）：

1) 将 kubuntu 的 backports 添加到现有 ppa（以访问 KDE 库）：
# sudo add-apt-repository ppa:kubuntu-ppa/backports
2) 更新包索引：
# sudo apt-get update
3) 安装 kdebase-运行时 deb 包：
# sudo apt-get install kdebase-runtime

这应该工作

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:25:06.473

kscope 在 2008 年发布了最新版本，并且依赖于 KDE 3 库。

kdelibs 4 与 kdelibs 3 不兼容。要使其运行，您需要一个仍支持 kde3 的发行版。（或者自己编译kde3）

我建议您使用替代应用程序 - 例如 KDevelop（您实际上用 kdevelop 标记了您的问题）

# javascript - jQuery-ui 小部件工厂、事件处理程序等

> ID：12752775
> 
> 赞同：2
> 
> 时间：2012-10-05T19:23:31.203
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

我最近一直在开发一些 jQuery 小部件，但有两件事一直困扰着我，所以我来找你，希望你能有更好的方法来做这件事。

1）我非常喜欢使用“那个”而不是这个的事实。使代码更清晰，避免了很多错误。为了简单起见，我总是使用“that”作为小部件的 this。但是我不知道如何使我的“那个”全球化，所以我要做的是：

```
$.widget("widgetName", {
    method1: function() {
        var that = this;
    },
    method2: function() {
        var that = this;
    }
}); 
```

如您所见，这在代码中很繁重，而且也好不到哪里去。我想知道我是否可以这样做：

```
 var that = $.widget("widgetName", {
     method1: function() {
         //do something
     },
     method2: function() {
         //do something
         that.method1();
     }
  }); 
```

或者这会带来什么问题吗？如果这是不可能的，你认为最好的方法是什么？

2）这确实与我的第一个问题相关，并且对它的回答应该足够了：对于我的事件处理程序，我经常需要使用我的“那个”来调用例如方法。所以我目前做的是

```
 $.widget("widgetName", {
     _handlers: {},
     _create: function() {
         var that = this;
         that._handlers: {
             handler1: function(e) { 
                 //do something
                 that.method();
             } //...
         };
         that.on("event", that._handlers.handler1);
     },
     method: function() {}
 }); 
```

你有没有更好的方法可以做到这一点？我最大的需要是能够将 that._handlers 的整个初始化移出 that._create

这些都是相当开放的问题。我真的想找到一种方法让我的 jquery 小部件真正清晰和可维护，我很想知道人们是怎么做的。

非常感谢您对此的意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T19:40:17.337

为了扩展我的评论，这里是你如何绑定你的处理程序以保留`this`

```
 $.widget("widgetName", {
     _handlers: {},
     _create: function() {
         this._handlers.handler1 = $.proxy(function(e) { 
                 //do something
                 this.method();
         }, this);
         this.element.on("event", this._handlers.handler1);
     },
     method: function() {}
 }); 
```

或者您可以交换它，以便轻松覆盖 3rd 方开发人员的处理程序：

```
 $.widget("widgetName", {
     _handlers: {
         handler1: function(e) { 
             //do something
             this.method();
         }
     },
     _create: function() {
         this.element.on("event", $.proxy(this._handlers.handler1,this));
     },
     method: function() {}
 }); 
```

**编辑：**如果你真的想要一个全局`that`变量，这是一种不污染全局范围的方法：

```
(function($){
     var that;
     $.widget("widgetName", {
         _handlers: {
             handler1: function(e) { 
                 //do something
                 that.method();
             }
         },
         _create: function() {
             that = this;
             this.element.on("event", this._handlers.handler1);
         },
         method: function() {}
     });
})(jQuery); 
```

# php - 百分比的正则表达式语法

> ID：12752779
> 
> 赞同：-1
> 
> 时间：2012-10-05T19:23:48.457
> 
> 标签：php, regex

正则表达式问题。需要更换 img.msg.yahoo.com/avatar.php？与 www.sitename.com/rproxy?url=img.msg.yahoo.com/avatar.php%3f

```
%VAR-Comments-data.regex("/img.msg.yahoo.com\/avatar.php\?/", "www.sitename.com/rproxy?url=img.msg.yahoo.com/avatar.php[\x25]/'")% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:44:01.717

您可能需要转义 URL 中的点：

```
%VAR-Comments-data.regex("/img\.msg\.yahoo\.com\/avatar\.php\?/", "www.sitename.com/rp 
```

# c++ - char 数组转 int

> ID：12752780
> 
> 赞同：1
> 
> 时间：2012-10-05T19:23:53.363
> 
> 标签：c++, type-conversion

我正在做一些编程练习，其中一个涉及从头开始实现一个日期类对象。

总的来说，它的类设计和实现部分是小菜一碟，但在日期输入和复制到私有数据成员时出现了问题。

日期输入法必须是MM/DD/YY格式，类数据成员必须是三种int类型（月、日、年）才能进行练习。

所以我的实现包括使用 cin 将输入输入到字符数组，然后将这些数组元素转换为类数据成员的 int 数据类型。

最初我想分别取每个数字列，将 10 列乘以 10 并添加 one 列以获得 int 但这并没有成功，因为您仍在对字符数据类型进行数学操作数。

我确实找到了解决方案，但它是一个杂项，我觉得必须有一个更好、更有说服力的方法来做到这一点。

另外作为旁注，我想知道是否有人可以告诉我为什么当我将 char 数组大小从 9 减少到 8 时在运行时出现堆栈溢出错误。我认为 char 数组只需要 \0 字符的大小 + 1 . 根据我的计算，我应该对 temp[8] 总共 9 个位置（2 天 2 个月 2 年和 2 / 和 1 \0 =9）很好，我确定我在这里遗漏了一些东西。无论如何，如果这很重要，我正在为我的编译器使用 VC++ 2008。

```
#include <iostream>
#include <iomanip>

using std::cout;
using std::endl;
using std::cin;

//---------------------------------------------------------------------------
class date {
private:
    int day, month, year;
public:
    date() : day(0), month(0), year(0) {};
    void getDate(char*);
    void showDate();
    int chartoint(char);
};

int date::chartoint(char a) {
    switch(a) {
        case '0': return 0;
        case '1': return 1;
        case '2': return 2;
        case '3': return 3;
        case '4': return 4;
        case '5': return 5;
        case '6': return 6;
        case '7': return 7;
        case '8': return 8;
        case '9': return 9;
    };
};

void date::getDate(char dArray[]) {

    day=(chartoint(dArray[3])*10+chartoint(dArray[4])); 
    month=(chartoint(dArray[0])*10+chartoint(dArray[1])); 
    year=(chartoint(dArray[6])*10+chartoint(dArray[7])); 

};

void date::showDate()
{
    cout << std::setiosflags(std::ios::fixed | std::ios::showpoint);
    (month<10) ? cout << std::setw(2) << std::setfill('0') << month : cout << month;
    cout << "/";
    (day<10) ? cout << std::setw(2) << std::setfill('0') << day : cout << day;
    cout << "/";
    (year<10) ? cout << std::setw(2) << std::setfill('0') << year : cout << year;
    cout << endl;

};
//---------------------------------------------------------------------------
int main()
{
    date a;
    char temp[9];

    cout << "Enter Date (mm/dd/yy): ";
    cin >> temp;

    a.getDate(temp);

    a.showDate();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:36:54.520

看来，最简单的方法是读入`int`变量并跳过分隔`/`字符。也就是说，您将定义一个输入运算符：

```
std::istream& operator>> (std::istream& in, date& value) {
    // read the value for a date
    return in;
} 
```

如果你将一个字符串读入一个`char`数组，你需要确保你不会尝试存储比`char`数组中的空间更多的字符。此外，您应该始终验证读取是否成功：

```
if (std::cin >> std::setw(sizeof(temp) >> temp) {
    // process the read characters
} 
```

请注意：不要尝试`sizeof()`像上面那样使用指向`char`数组的指针：它会确定指针的大小，而不是指向数组的大小。

顺便说一句，您正确计算出存储日期及其终止空字符需要 9`char`秒。为什么你认为它们会适合 8 `char`s 的数组？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T19:46:48.367

极其简单的解决方案（尽管是 C 风格）是使用函数`int`直接读取：`char*`[`sscanf()`](http://en.cppreference.com/w/cpp/io/c/fscanf)

```
void date::getDate(const char *sDate) // const = "getDate will not change sDate"
{
    sscanf(sDate, "%d/%d/%d", &month, &day, &year);
}; 
```

C++ 解决方案将使用`std::string`代替`char*`，因此 main 的主体应如下所示：

```
date a;
std::string temp;

cout << "Enter Date (mm/dd/yy): ";
cin >> temp;

a.getDate(temp);
a.showDate(); 
```

那么你的`getDate`方法可以引用`std::string`对象，换句话说，它不会改变`const std::string&`。要从您那里读取值，则`std::string`可以构造`std::istringstream`对象：

```
#include <sstream>
...
void date::getDate(const std::string& sDate)
{
    std::istringstream ssDate(sDate);
    ssDate >> month;
    ssDate.ignore();
    ssDate >> day;
    ssDate.ignore();
    ssDate >> year;
}; 
```

另请注意，该方法`chartoint`是多余的，`showDate()`可能很简单，如下所示：

```
void date::showDate()
{
    cout << std::setw(2) << std::setfill('0') << month << '/';
    cout << std::setw(2) << std::setfill('0') << day << '/';
    cout << std::setw(2) << std::setfill('0') << year << endl;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:44:05.073

这是使用 std::stringstream 的解决方案：

```
#include <iostream>
#include <iomanip>
#include <sstream>

using std::cout;
using std::endl;
using std::cin;
using std::stringstream;

//---------------------------------------------------------------------------                                                                                                                                                                                                                                                                                             
class date {
private:
  int day, month, year;
public:
  date() : day(0), month(0), year(0) {};
  void getDate(char*);
  void showDate();
};

void date::getDate(char dArray[]) {
  std::stringstream ss(dArray);
  ss>>month;
  ss.ignore();
  ss>>day;
  ss.ignore();
  ss>>year;
};

void date::showDate()
{
  cout << std::setiosflags(std::ios::fixed | std::ios::showpoint);
  (month<10) ? cout << std::setw(2) << std::setfill('0') << month : cout << month;
  cout << "/";
  (day<10) ? cout << std::setw(2) << std::setfill('0') << day : cout << day;
  cout << "/";
  (year<10) ? cout << std::setw(2) << std::setfill('0') << year : cout << year;
  cout << endl;

};
//---------------------------------------------------------------------------                                                                                                                                                                                                                                                                                             
int main()
{
  date a;
  char temp[9];

  cout << "Enter Date (mm/dd/yy): ";
  cin >> temp;

  a.getDate(temp);

  a.showDate();
  return 0;
} 
```

还有一种更短的方法来编写你的 chartoint 函数，它利用了 ASCII 中的 0-9 都是连续布局的事实：

```
int date::chartoint(char a) {
  return a-'0';
}; 
```

另请注意，当您声明一个数组时，[] 内的值实际上是 SIZE，而不是最后一个合法索引。因此 temp[8] 的数组声明在索引 0-7 中仅包含 8 个值。

# c# - Ninject BeginLifeTimeScope

> ID：12752783
> 
> 赞同：0
> 
> 时间：2012-10-05T19:24:06.210
> 
> 标签：c#, ninject, autofac

是否有使用 Autofac 的以下代码的 Ninject 等效项：

```
 public T Create<T>()
    {
        var requestScope =
            container.BeginLifetimeScope(
                builder => builder.RegisterType(typeof(T)).AsSelf());

        var viewModel = requestScope.Resolve<T>();

        lock (viewModelToContainersSyncLock)
        {
            viewModelsToContainers[viewModel] = requestScope;
        }

        return viewModel;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-25T10:28:25.207

**AutoFac：**

您可以通过在任何现有生命周期范围内调用 BeginLifetimeScope() 方法来创建生命周期范围，从根容器开始。生命周期范围是一次性的，它们会跟踪组件的处置，因此请确保您始终调用“Dispose()”或将它们包装在“使用”语句中。

```
using(var scope = container.BeginLifetimeScope())
{
  // Resolve services from a scope that is a child
  // of the root container.
  var service = scope.Resolve<IService>();

  // You can also create nested scopes...
  using(var unitOfWorkScope = scope.BeginLifetimeScope())
  {
    var anotherService = unitOfWorkScope.Resolve<IOther>();
  }
} 
```

**忍者：**

Ninject 中有四个内置作用域，还有一些通过扩展提供的其他作用域：[对象作用域](https://github.com/ninject/ninject/wiki/Object-Scopes)

据我了解您的问题，您追求的最合理范围是***InScope()***。***然后，您可以使用.InScope(Func selectScope)***方法轻松定义自己的范围。

你可以创建这样的东西：

```
public class ScopeObject
{ }

public static class ProcessingScope
{
  public static ScopeObject Current {get; set;}
}

using Xunit;
public class NinjectCustomScopeExample
{
  public class TestService { }

  [Fact]
  public static void Test()
  {
    var kernel = new StandardKernel();
    kernel.Bind<ScopeObject>().ToSelf().InScope( x => ProcessingScope.Current );

    var scopeA = new ScopeObject();
    var scopeB = new ScopeObject();

    ProcessingScope.Current = scopeA;
    var testA1 = kernel.Get<ScopeObject>();
    var testA2 = kernel.Get<ScopeObject>();

    Assert.Same( testA2, testA1 );

    ProcessingScope.Current = scopeB;
    var testB = kernel.Get<ScopeObject>();

    Assert.NotSame( testB, testA1 );

    ProcessingScope.Current = scopeA;
    var testA3 = kernel.Get<ScopeObject>();

    Assert.Same( testA3, testA1 );
  }
} 
```

希望这可以帮助。

# c# - 为什么我的 resx 文件没有嵌套在解决方案资源管理器中的表单类文件中？

> ID：12752789
> 
> 赞同：0
> 
> 时间：2012-10-05T19:24:40.687
> 
> 标签：c#, visual-studio-2010, visual-studio

> **可能重复：**
> [Visual Studio 2008 未在解决方案资源管理器中正确嵌套文件](https://stackoverflow.com/questions/3017052/visual-studio-2008-not-nesting-files-properly-in-solution-explorer)

我在解决方案资源管理器中的一些`.resx`文件嵌套在设计器文件旁边的表单类中。但是，有些不是，而只是列表中的下一项。

我尝试重建解决方案，关闭并重新打开 Visual Studio 等。我检查了 resx 文件的内容，它们是相同的。

没关系，但我更喜欢它们是嵌套的，因为我有很多表格，而且解决方案资源管理器本来就很混乱。该程序仍然可以正常运行。

谢谢。

![图片](../Images/7c8b56865ece7eed7101ade083662aaf.png)

# android - 与互联网连接相关的 Android 异常

> ID：12752797
> 
> 赞同：1
> 
> 时间：2012-10-05T19:25:05.990
> 
> 标签：android, json

我的目标是通过 android 设备检索 JSON。我用来成功的代码如下：

```
 public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } 
```

不幸的是，因为我无法成功连接到内部人员，我在 HttpResponse 行收到以下错误：

java.lang.runtimeexception 无法启动活动组件信息：android.os.Network

我在 Stackoverflow 的其他线程中读到，可能的解决方案是启动一个新线程。但我不知道该怎么做。

PS 我已经在 androidmanifest.xml 中声明了互联网权限行，即

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:26:02.667

尝试这个..

```
public JSONObject getJSONFromUrl(String url) {
                 JSONObject j = null;
        // Making HTTP request
        try {
            // defaultHttpClient
            HttpParams httpParameters = new BasicHttpParams();
            HttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            //HttpEntity httpEntity = httpResponse.getEntity();
           // is = httpEntity.getContent(); 
            j = new JSONObject(EntityUtils.toString(httpResponse.getEntity()));

        }finally{
                     return j;
                }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:16:22.817

这是我编写的一个类，用于从服务器（谷歌应用引擎）查询数据，它建立连接并在线读取内容。

```
public class QueryServer 
{ 
    public static final String URL = "http://10.0.2.2:8888/";

@SuppressWarnings("unused")
private class GetXMLTask extends AsyncTask<String, Void, String>
{
    @Override
    protected String doInBackground(String... urls)
    {           
        String output = null;           
        try
        {               
             for (String url : urls) 
             {                      
                output = getOutputFromUrl(url); 
                Log.d("Server Return", output);
             }               
        }
        catch(Exception e)
        {
            Log.d("Exception", e.getMessage());
        }
        return output;
    }           
  } 
  private String getOutputFromUrl(String url)
  {
        StringBuffer output = new StringBuffer("");
        try 
        {
            InputStream stream = getHttpConnection(url);
            BufferedReader buffer = new BufferedReader(new InputStreamReader(stream));
            String s = "";
            while ((s = buffer.readLine()) != null)
            {
                output.append(s);
                output.toString();
            }
        }
        catch (IOException e1) 
        {
            e1.printStackTrace();
        }

        return output.toString();
    } 
    // Makes HttpURLConnection and returns InputStream
    private InputStream getHttpConnection(String urlString) throws IOException 
    {
        InputStream stream = null;
        try 
        {                
            java.net.URL url = new java.net.URL(urlString);
            URLConnection connection = url.openConnection();      
            HttpURLConnection httpConnection = (HttpURLConnection) connection;
            httpConnection.setRequestMethod("GET");
            httpConnection.connect();

            if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) 
            {
                stream = httpConnection.getInputStream();
            }
        } 
        catch (Exception ex) 
        {
            ex.printStackTrace();
        }
        return stream;
    } 
    protected void onPostExecute(String output) 
    {

    }
} 
```

# arraylist - 在 Java 中将 Tokenizer 与 ArrayList 一起使用

> ID：12752807
> 
> 赞同：0
> 
> 时间：2012-10-05T19:25:41.647
> 
> 标签：arraylist, java.util.scanner, stringtokenizer

我正在尝试获取字符串的 ArrayList 并将其分开，以便我可以从每一行中提取标题。

这是 ArrayList 的内容：

汤姆索亚；马克吐温；1972；8.50；f；
草叶；惠特曼，沃尔特；1975；29.99；p；
罗密欧与朱丽叶；莎士比亚，威廉；1980；4.99；d；
了不起的盖茨比；菲茨杰拉德，F.斯科特；1979；5.99；f；
红字；霍桑，纳撒尼尔；1981；4.78；f；
河流的耳语；萨姆斯，费罗尔；1984；21.95；f；
白鲸；梅尔维尔，赫尔曼；1962；13.98；f；
最后的莫希干人；库珀，詹姆斯·费尼莫尔；1968；8.75；f；
奥德赛;荷马;1950;9.99;f;
圣诞颂歌；狄更斯，查尔斯；1966；12.50；f；
悲惨世界；雨果，维克多；1988；19.98；f；
黑暗之心；康拉德，约瑟夫；1970；14.45；f；
动物农场；奥威尔，乔治；1978；10.00；f；
坎特伯雷故事集；乔叟，杰弗里；1965；20.00；d；
老人与海；海明威，欧内斯特；1966；9.95；f；

我需要制作一个方法或其他东西，让行的第一部分一直到“;”。

这是我用于类似的代码，除了这是读取数据文件：

```
while (datascanner.hasNext())
File datafile = new File (data name)
Scanner datascanner = new Scanner(datafile)
String data = datascanner.nextLine()
StringToeknizer dataParser = new StringTokenizer(data, ";")
String title = dataParser.nextToken() 
```

我需要与此类似的东西，但它会搜索数组列表而不是文件。然后我将提取每一行的其他内容：

```
String author = dataParser.nextToken()
int CopyR = dataParser.nextToken() 
```

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:29:10.150

只需遍历列表并应用您的逻辑

```
for(String line : myArrayList)
{
    StringTokenizer st = new StringTokenizer(line, ";");
    String author = st.nextToken();
    //etc.
} 
```

# javascript - ColdFusion：只需按一下按钮，即可将 CFSELECT 动态添加到文档中

> ID：12752812
> 
> 赞同：0
> 
> 时间：2012-10-05T19:25:55.283
> 
> 标签：javascript, coldfusion

现在我正在一个项目中，后端有商家解决方案服务。不幸的是我搞砸了。最初，我们认为我们不必填充网站加载后“生成”的任何表单字段。所以我简单地使用了一些 javascript 来创建额外的表单条目，只需点击一个按钮。这工作得很好，我们可以使用用户放在那里的任何东西从 ColdFusion 上传到数据库。

但是我们的管理层没有给我们适当的设计要求。他只是回来说“好的，现在只需添加一些下拉菜单，以便他们选择版本”。我想你可以在这里看到问题。现在我们需要使用来自服务器的信息填充*一些*动态表单字段。Ergo 客户端解决方案现在基本上是废话。

所以我来为你帮助朋友。有没有办法仍然保留我对 JS 所做的功能与 ColdFusion 等效？我知道必须有，但我试图找到一个简单的转换。

addInput.js 文件的外观如下：

```
// JavaScript Document
var counter = 0;
var UID = counter + 1;
var limit = 3;
function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "<input type='hidden' value='new' name='Detail_ID'>"
                         + "<input type='text' value='' name='level' maxlength=255  PASSTHROUGH='style=width:640;color:#editcolor#' TABINDEX='5'>"
                         +"<input type='text' value='' name='offer' maxlength=255  PASSTHROUGH='style=width:640;color:#editcolor#' TABINDEX='5'>"
                         +"<input type='text' value='' name='disclaimer' maxlength=255  PASSTHROUGH='style=width:640;color:#editcolor#' TABINDEX='5'>";
                         "<CFSELECT NAME = 'version_no' QUERY = VersionList VALUE = 'code' DISPLAY = 'description' SELECTED = #version_no# ></CFSELECT>"
          document.getElementById(divName).appendChild(newdiv);
          counter++;
     }
} 
```

这是在主 .cfm 页面上创建它的按钮：

```
<input type="button" value="Add Another VIP Level" onClick="addInput('dynamicInput');"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:53:50.747

我认为您的问题显示了对 CF 以及任何应用程序服务器如何工作的误解。您的浏览器向服务器发送请求，服务器读取冷融合但使用它生成 html，然后将其发送回您的浏览器。如果不请求另一个页面，以及另一个到服务器的往返，就没有办法让coldfusion为你做任何事情。

但不要害怕，你可以做一些事情。加载一个 JS 框架并将一个 AJAX 命令发送到一个 cfm，其中只有你的 cfselect 代码。它可以返回 HTML，然后您可以使用 JS 将其直接注入您的页面。

# playframework - 播放框架模块 vs 子项目

> ID：12752814
> 
> 赞同：4
> 
> 时间：2012-10-05T19:25:58.877
> 
> 标签：playframework, playframework-2.0, playframework-2.1, playframework-2.2

我无法理解模块和子项目之间的区别。有什么区别，哪个应该用于模块应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:24:49.307

使用这两种方法，您都可以单独编译、运行和测试代码。*使用子项目，您可以共享设置，并且它通过源代码*连接到依赖它的项目：

> 当您在开发模式下运行 Play 应用程序时，相关项目会自动重新编译，如果某些项目无法编译，您将在浏览器中看到结果。（http://www.playframework.org/documentation/2.0.4/SBTSubProjects）

播放模块只是一个 JAR 依赖项，可以像播放应用程序一样构建。所以你依赖一个*二进制文件*。

两种方式都用于构建模块化应用程序，也许子项目更容易处理，但如果您希望在多个播放应用程序之间共享代码，则模块更有意义。

# knockout.js - 对复杂的 Knockout viewModel/models 的建议？

> ID：12752817
> 
> 赞同：8
> 
> 时间：2012-10-05T19:26:24.570
> 
> 标签：knockout.js

我有一个非常动态的站点，它在页面中使用自定义应用程序/小部件，我正在研究如何在 Knockout 的帮助下改进站点。

*   db <-命名空间
    *   选项卡 [] -> 选项卡
        *   ID
        *   标题
        *   类型
        *   项目 [] -> 小部件
            *   ID
            *   css
            *   私房
            *   特定于小部件的 viewModel
    *   服务

如果每个“小部件”都是存在于同一选项卡（div）中的视图模型，我会遇到什么样的问题？

是否可以有一个从顶部开始并包含其他模型的 viewModel？还是我应该有单独的模型并只使用 ko.applyBindings(vm, element) 来应用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T20:15:37.673

我们在这两种方式上都取得了成功，但通常我们会使用您提到的第一个场景，其中一个整体父视图模型包含其他更具体的视图模型的实例。一般做法建议避免`applyBindings`频繁打电话。在您的实例中快速提及淘汰赛的“with”绑定似乎是合适的：http: [//knockoutjs.com/documentation/with-binding.html](http://knockoutjs.com/documentation/with-binding.html)

这将使您的选项卡中的绑定表达式更加专注于它们所代表的视图模型：

```
<script type="text/javascript">
    var ParentViewModel = function(){
        this.tabOneViewModel = new TabOneViewModel();
        this.tabTwoViewModel = new TabTwoViewModel();
    }
    var TabOneViewModel = function(){
        this.tabOneTitle = 'Tab One';
    }
    var TabTwoViewModel = function(){
        this.tabTwoTitle = 'Tab Two';
    }
    $(function(){
        var parentViewModel = new ParentViewModel();
        ko.applyBindings(parentViewModel,$('#main')[0]);
    });
</script>
<body>
    <div id="main">
        <div data-bind="with:tabOneViewModel">
            <div data-bind="text:tabOneTitle"></div>
        </div>
        <div data-bind="with:tabTwoViewModel">
            <div data-bind="text:tabTwoTitle"></div>
        </div>
    </div>
</body> 
```

最终，如何构建 dom 和视图模型完全取决于您自己，只需列出一个我们发现有用的常见示例。

# javascript - 克隆一个 DOM 事件对象以重新调度

> ID：12752818
> 
> 赞同：12
> 
> 时间：2012-10-05T19:26:34.370
> 
> 标签：javascript, dom, dom-events

一些浏览器不允许您重新分派已经分派的事件，但允许您根据可以从现有事件对象获得的值创建新的事件对象。

是否有适用于任何事件类型的通用且可重用的解决方案，或者如果失败，是否有针对特定事件类型执行此操作的方法（在我的情况下，我目前关心该`mousewheel`事件）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-19T16:44:54.430

似乎现在有一个更好的解决方案，因为`initMouseEvent`等已被弃用。例如，[MouseEvent()](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)构造函数将属性表作为其第二个参数，您可以为此使用现有的 MouseEvent 对象：

```
let my_event = new MouseEvent(`foo`, some_existing_mouse_event);
dispatchEvent(my_event); 
```

其他类别的事件具有类似的构造函数，应该以相同的方式使用。例如[ClipboardEvent()](https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/ClipboardEvent)。

[jsfiddle 示例](http://jsfiddle.net/99yst971/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T19:38:54.743

我找到了自己的答案，至少针对 MouseEvents：

```
function cloneMouseEvent( e ) {
    var evt = document.createEvent( "MouseEvent" );
    evt.initMouseEvent( e.type, e.canBubble, e.cancelable, e.view, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget );
    return evt;
} 
```

然后，您可以使用以下命令在目标上分派事件：

```
target.dispatchEvent( evt ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T06:48:13.143

您可能想要使用（记录不充分的）[NWEvents 库](http://javascript.nwbox.com/NWEvents/)

```
NW.Event.dispatch(target, e.type, false, e); 
```

适用于任何事件，也适用于较旧的 IE。

# c# - 设置 FIPS 模式是否会更改 OpenSSL 中的签名？

> ID：12752819
> 
> 赞同：0
> 
> 时间：2012-10-05T19:26:43.387
> 
> 标签：c#, .net, openssl, bouncycastle

我认为这是一个愚蠢的问题，但是......在 OpenSSL 中调用 FIPS_mode_set(1) 实际上会改变我要返回的签名，如果是这样，如果我试图在 bouncycastle/.NET 中做同样的事情，我有什么需要做的吗？

背景：出于我所做的目的，我实际上并不真正关心 FIPS，我只是想获得一个 C#.NET 实现，该实现产生与现有 OpenSSL 实现匹配的签名。根据我的阅读，现有代码正在做的是计算 SHA256 哈希，然后应用 .pem 文件中的私有 RSA 密钥。它使用 EVP_Sign* 函数来做到这一点。我尝试使用 System.Security.Cryptography.SHA256 来生成哈希值，以及 bouncycastle 的 PemReader、AsymmetricCypherKeyPair、RsaEngine 和 Pkcs1Encoding 类……但我的输出不匹配。

OpenSSL 实现调用 FIPS_mode_set(1)，这是我觉得我唯一没有考虑到的事情......根据我的阅读，所做的只是让它，所以如果你使用任何没有经过认证的 FIPS 兼容的东西，它就会出错，即它不应该改变签名的输出。但我有这种唠叨的感觉...

哦，PKCS1 是用于匹配 OpenSSL 对 EVP_SignFinal 所做的正确编码，对吧？

# rest - 具有用户友好桌面部署的 Web 框架？

> ID：12752820
> 
> 赞同：1
> 
> 时间：2012-10-05T19:26:50.630
> 
> 标签：rest, backbone.js, ria, offline

我正在使用 Backbone.js 构建一个 Web 应用程序（虽然我还没有绑定到 Backbone）。我需要一个后端框架，仅用于通过 RESTful API 持久化到数据库。但是，我还需要能够将其部署为“桌面”应用程序以供离线使用，即运行本地服务器并启动浏览器窗口，但我不希望用户必须从命令行启动服务器运行应用程序。

我可以将 SQLite 用作数据库，因为它只是一个单用户应用程序，它只是我坚持使用的框架。我看过以下内容：

*   Rails 和 Django：默认 Web 服务器太脆弱，需要 Ruby/Python 并从命令行运行。我知道 Bitnami 堆栈，但在 99mb 时，它的依赖关系太大，并没有完全对用户隐藏。
*   Sproutcore：从命令行运行，也太笨重了。
*   睡衣桌面 - 取决于 MSHTML，我怀疑这会限制我使用 HTML5 功能的能力。

我倾向于创建一个 Java 应用程序，它启动一个 Scala/Lift 服务器实例并打开一个 Web 浏览器，然后放在系统托盘中（有点像 WAMP）。是否有人熟悉为用户友好部署而构建的独立桌面应用程序的工具或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:47:43.723

我不知道 PHP 是否适合您？然后我会推荐[phpdock](http://www.nusphere.com/products/phpdock.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:45:54.540

web2py 具有独立的部署到桌面功能，不依赖于 Python：[http ://web2py.com/books/default/chapter/29/14#How-to-distribute-your-applications-as-binaries](http://web2py.com/books/default/chapter/29/14#How-to-distribute-your-applications-as-binaries)

正如 Eydun 所说，[phpdock](http://www.nusphere.com/products/phpdock.htm)是一种选择，但它是商业许可的。

我决定使用 Java/Spring/H2/Hibernate/Jetty。我发现 Jetty 非常快地处理请求，因此应用程序在浏览器中启动时看起来是实时的。[这里](http://steveliles.github.com/setting_up_embedded_jetty_8_and_spring_mvc_with_maven.html)有一个关于嵌入 Jetty 服务器的教程。我想构建一个启动服务器和浏览器的 GUI 非常简单。

另一个 Java 选项是使用[Play Framework](http://www.playframework.org)，对于那些来自 Django/Rails 背景的人来说，它可能更熟悉。但是，Play 2.0+ 的[“创建应用程序的独立版本”](http://www.playframework.org/documentation/2.0.4/ProductionDist)的文档表明他们已经放弃使用 Java EE 容器（Tomcat/Jetty）和 WAR 文件，转而使用 JBoss Netty 的捆绑副本运行 JAR，所以让它按照你想要的方式运行可能需要一些工作。

如果您可以使用/学习 Scala，我会推荐 Play Framework 方法。

# javascript - 将 div 添加为节点的唯一子节点

> ID：12752822
> 
> 赞同：0
> 
> 时间：2012-10-05T19:26:54.493
> 
> 标签：javascript, dom

我正在尝试将 div 作为唯一的子节点添加到节点。如果该节点已经有任何子节点，则将它们设为 div 的子节点。

原始 DOM 看起来像：

```
<a href = "">
  <span id="gsp" > </span>
  <span id="gbsp"> some text </span>
</a> 
```

我希望输出为：

```
<a href = "">
  <div id="oaa_web_accessibility_highlight">  
    <span id="gsp" > </span>
    <span id="gbsp"> some text </span>
  </div>
</a> 
```

相反，下面的片段给了我：

```
<a href = "">
  <div id="oaa_web_accessibility_highlight">  </div>
    <span id="gsp" > </span>
    <span id="gbsp"> some text </span>
</a> 
```

**我正在尝试使用以下代码段，但它不起作用。**

```
var new_div_element = this.document.createElement('div');
new_div_element.id = 'oaa_web_accessibility_highlight';
node.insertBefore(new_div_element, node.childNodes[0]);
for (var i =0; i < node.childNodes.length; i++) {  
  if (i == 0) continue;        
  node.childNodes[0].appendChild(node.childNodes[i]);        
} 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:37:17.323

像这样做：

```
var new_div_element = document.createElement('div');
new_div_element.id = 'oaa_web_accessibility_highlight';

while (node.firstChild) {  
      new_div_element.appendChild(node.firstChild);        
}

node.appendChild(new_div_element); 
```

`node`这会清空into的孩子`new_div_element`，然后附加`new_div_element`到现在为空的`node`。

它不使用`innerHTML`，因此您不会破坏正在传输的元素的任何状态。

* * *

仅供参考，您无法正常工作的原因是您的循环正在递增`i`，但是`.childNodes`当您执行`.appendChild`.

由于`.childNodes`是一个实时列表，因此当您将其中一个项目移动到其他位置时，它的内容会更新。结果，在删除第一个孩子之后，第二个孩子在该索引处取而代之。由于您`i`的增量，它跳过了在列表中重新定位的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:19:06.270

如果你愿意使用 jQuery，它有一个`wrapAll`方法可以为你做这件事。

```
$(node).children().wrapAll('<div id="oaa_web_accessibility_highlight"></div>'); 
```

# asp.net - Viewmodel 对象上的 ASP.NET MVC 3 DataBinder.Eval 抛出“不包含属性”

> ID：12752824
> 
> 赞同：1
> 
> 时间：2012-10-05T19:27:04.277
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, viewmodel, databinder

我有一个使用标准模型的视图，但现在我需要在页面上添加来自两个不同模型的信息。在做了一些研究来处理这个问题后，我创建了一个 ViewModel。现在我在尝试显示我的观点时遇到错误：

DataBinding：“VirtualAuthtech.ViewModels.CMSCalculatorViewModel”不包含名为“WORKCY”的属性。

这是我的视图模型

```
namespace VirtualAuthtech.ViewModels
{
    public class CMSCalculatorViewModel
    {
        public CPT CPT { get; set; }
        public GPCI GPCI { get; set; }
    }
} 
```

CPT 是我最初使用的第一个模型，然后我需要添加 GPCI

这是我的观点的 ActionResult

```
public ActionResult _CMSCalculator()
        {
            string CPTCode = string.Empty;
            string MOD = string.Empty;
            string GPCIPayID = "31146";
            string GPCIYear = "2011";
            if (Request.Params["CPT1"] != null)
            {
                CPTCode = Request.Params["CPT1"];
                MOD = Request.Params["MOD"];
            }
            return PartialView("_CMSCalculatorPanel", (string.IsNullOrEmpty(CPTCode) ? null as CMSCalculatorViewModel : CPTDataHelper.GetCPTGPCI(CPTCode, MOD, GPCIPayID, GPCIYear)));
        } 
```

这是从我的模型中获取数据的方法

```
 public static CMSCalculatorViewModel GetCPTGPCI(string CPTCode, string MOD, string GPCIPayID, string GPCIYear)
    {
        using (var DB = new VADataContext())
        {
            var view = new CMSCalculatorViewModel();
            if (String.IsNullOrWhiteSpace(MOD))
            {
                view.CPT = (from cpt in DB.CPTs
                            where cpt.CPT1 == CPTCode
                            select cpt).FirstOrDefault<CPT>();
                view.GPCI = (from gpci in DB.GPCIs
                             where gpci.PAYID == GPCIPayID && gpci.YEAR == GPCIYear
                             select gpci).FirstOrDefault<GPCI>();
            }
            else
            {
                view.CPT = (from cpt in DB.CPTs
                            where cpt.CPT1 == CPTCode && cpt.MOD == MOD
                            select cpt).FirstOrDefault<CPT>();
                view.GPCI = (from gpci in DB.GPCIs
                             where gpci.PAYID == GPCIPayID && gpci.YEAR == GPCIYear
                             select gpci).FirstOrDefault<GPCI>();
            }
            return view;
        }
    } 
```

现在我的视图正在使用新的 ViewModel 并且我正在尝试显示一个字段：

```
<div style='float:left; width: 35px; margin: 0; padding: 0; text-align: center; color: #094ab2'>@VirtualAuthtech.CallbackPanelHelper.GetFieldNumber(Model, "WORKCY")</div> 
```

我在这段代码中遇到错误：

```
public static double GetFieldNumber(object data, string fieldName)
        {
            object text = DataBinder.Eval(data, fieldName);
            if (text == null || text.ToString() == string.Empty)
                return 0;
            double number = Convert.ToDouble(text);
            return number;
        } 
```

这是说我的模型不包含我正在寻找的字段的属性。我是否需要告诉它查看我的视图模型的 CPT 部分？

这是我创建的第一个 ViewModel，所以我可能会搞错这一切。任何帮助我朝着正确的方向前进将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:44:55.260

为什么调用 GetFieldNumber？以下行有什么问题：

```
<div style='float:left; width: 35px; margin: 0; padding: 0; text-align: center; color: #094ab2'>@Model.CPT.WORKCY</div> 
```

但是，如果您必须使用运行时绑定，那么函数中的行可能应该是：

```
object text = DataBinder.Eval((CMSCalculatorViewModel)data.CPT, fieldName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:13:19.733

我能够使用此代码使其正常工作。

```
<div style='float:left; width: 35px; margin: 0; padding: 0; text-align: center; color: #094ab2'>@if(Model == null) { <text>0</text> } else { @VirtualAuthtech.CallbackPanelHelper.GetFieldNumber(Model.CPT, "WORKCY") }</div> 
```

但是，我在这个视图中还有很多其他领域。我宁愿不必检查每个模型是否为空。如果您有其他解决方案，请分享。

# .net - .manifest 文件是否仅适用于托管的 .NET 程序集？

> ID：12752828
> 
> 赞同：0
> 
> 时间：2012-10-05T19:27:22.740
> 
> 标签：.net

.manifest 文件是否仅适用于托管的 .NET 程序集？或者它们也可以用于本机代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:33:17.923

清单是 .NET 程序集的一部分。

本机代码中没有直接的等价物（例如，所有类型元数据都不是为本机代码定义的东西）。

来自维基百科上的[清单（CLI）](http://en.wikipedia.org/wiki/Manifest_%28CLI%29)：

> 程序集清单是一个文本文件，其中包含有关 CLI 程序集的元数据。它描述了程序集中的组件的关系和依赖关系、版本信息、范围信息以及程序集所需的安全权限。

# c++ - Socket.io 用于 node.js 以外的其他平台

> ID：12752829
> 
> 赞同：2
> 
> 时间：2012-10-05T19:27:42.123
> 
> 标签：c++, python, sockets, socket.io

我正在寻找一个与 socket.io(node.js) 完全一样的库，但我在其他平台、c++ 或 python 中需要它。

这是关于网站的服务器应用程序。我的应用程序与 node.js 一起工作，但我需要为 C++/python 或其他东西更改它。

socket.io 很棒，因为它会自动选择技术来连接服务器——取决于您使用的浏览器/硬件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:52:15.817

对于 Python，您可以查看 >> Websockets with python << [Can I use Socket.IO with Django?](https://stackoverflow.com/questions/4190186/can-i-use-socket-io-with-django) Django 是一个使用 Python 语言的网络框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:43:57.123

[通过TornadIO2](https://github.com/mrjoes/tornadio2)有一个 Python 的 Socket.IO 实现，将与[Tornado](http://www.tornadoweb.org/)异步 Web 服务器一起使用。我在 TornadIO 1.0 的时候用过这个

[Go](http://golang.org/)有一个我使用的，但它只与 Socket.IO 0.6.x 兼容：[go-socket.io](https://github.com/justinfx/go-socket.io)

只需查看 socket.io Wiki 以获取其他链接：
[https ://github.com/learnboost/socket.io/wiki](https://github.com/learnboost/socket.io/wiki)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:25:17.217

socket.io 的协议定义可在此处获得 [https://github.com/LearnBoost/socket.io-spec](https://github.com/LearnBoost/socket.io-spec)

我参与了几个项目，出于各种原因，我们决定实际实施我们自己的客户。这并不难，尤其是因为您只需要支持传输（xhr-polling 是最简单的恕我直言）。

还有可能回馈社会......

# dart - Dart 是完整的端到端 Web 应用程序解决方案吗？

> ID：12752833
> 
> 赞同：4
> 
> 时间：2012-10-05T19:28:15.993
> 
> 标签：dart

我对 dart 完全陌生，我从未在 dart 中做过任何程序，但我很好奇并且有几个问题，我知道 dart 也可以在服务器端运行，这是否意味着它不仅是客户端编程（如 javascript )，我们也可以编写一些服务器端代码吗？（像java），

在那种情况下，当我使用企业级大型应用程序时，dart 是否依赖于任何服务器端语言，如 Java？，以及 Dart 的数据库支持级别是多少？

可能的问题是它在网络上能做什么或不能做什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:44:35.697

Dart 在虚拟机中运行服务器端。您将能够在 webServer 上运行 dart 应用程序并访问该服务器上的文件。有一个图书馆[dart:io](http://api.dartlang.org/docs/continuous/dart_io.html)可以让你做到这一点。IO 仅适用于服务器端。Dart 不需要 Java 或任何其他语言即可工作。您拥有 Dart VM（服务器端）和客户端，您的 dartcode 将使用 dart2js 编译为 javascript。

很少有项目涉及数据库。但据我了解，目前还没有什么东西真的很棒。

只需在此处搜索数据库驱动程序：[http ://blog.dartwatch.com/p/community-dart-packages-and-examples.html](http://blog.dartwatch.com/p/community-dart-packages-and-examples.html)

# javascript - 使用 jquery 读取 HTML 表的第一列值

> ID：12752834
> 
> 赞同：7
> 
> 时间：2012-10-05T19:28:17.693
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

我有一张桌子：

```
<table id="ItemsTable" >​
    <tbody>
   <tr>
     <th>
       Number
     </th>
     <th>
       Number2
     </th>
    </tr>
  <tr>
    <td>32174711</td>     <td>32174714</td>
  </tr>
  <tr>
    <td>32174712</td>     <td>32174713</td>
  </tr>
</tbody>
</table> 
```

我需要将值 32174711 和 32174712 以及列号的所有其他值放入一个数组或列表中，我使用的是 jquery 1.8.2。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T19:45:42.637

```
var arr = [];
$("#ItemsTable tr").each(function(){
    arr.push($(this).find("td:first").text()); //put elements into array
}); 
```

请参阅此链接进行演示：

[http://jsfiddle.net/CbCNQ/](http://jsfiddle.net/CbCNQ/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T19:30:51.063

您可以使用`map`方法：

```
var arr = $('#ItemsTable tr').find('td:first').map(function(){
     return $(this).text()
}).get() 
```

[http://jsfiddle.net/QsaU2/](http://jsfiddle.net/QsaU2/)

来自 jQuery`map()`文档：

> 描述：通过一个函数传递当前匹配集中的每个元素，生成一个包含返回值的新 jQuery 对象。. 由于返回值是一个 jQuery 包装的数组，因此 get() 返回的对象与基本数组一起使用是很常见的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T19:30:40.600

```
// iterate over each row
$("#ItemsTable tbody tr").each(function(i) {
    // find the first td in the row
    var value = $(this).find("td:first").text();
    // display the value in console
    console.log(value);
}); 
```

[http://jsfiddle.net/8aKuc/](http://jsfiddle.net/8aKuc/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T19:32:06.553

从你所拥有的，你可以使用第一个孩子

```
var td_content = $('#ItemsTable tr td:first-child').text()
// loop the value into an array or list 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T19:34:20.000

[http://jsfiddle.net/Shmiddty/zAChf/](http://jsfiddle.net/Shmiddty/zAChf/)

```
var items = $.map($("#ItemsTable td:first-child"), function(ele){
    return $(ele).text();
});

console.log(items);​ 
```

# wolfram-mathematica - Mathematica 列表输出

> ID：12752835
> 
> 赞同：3
> 
> 时间：2012-10-05T19:28:18.440
> 
> 标签：wolfram-mathematica

当我要求嵌套列表的特定元素时，Mathematica 给了我一个奇怪的输出。

我有：

```
testroots = {{0, 0, 0}, {0, 0, 0}} 
```

当我要求

```
testroots[[0,0]] 
```

这应该给我一个 0，而不是*Mathematica*说

```
Symbol 
```

我不明白为什么会这样或者我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:46:40.760

正如 b.gatessucks 和 bill s 已经写的那样，Mathematica 列表从索引 1 开始。但是索引 0 也是允许的，并给出了`Head`表达式的。这是什么意思？

好吧，`{a,b,c}`Mathematica 中的列表在内部是 Form 的表达式`List[a, b, c]`。你可以通过应用`FullForm`它来看到：

```
FullForm[{a, b, c}]
(*
==> List[a, b, c]
*) 
```

左括号前面的部分，在这里`List`，被称为表达式的头部。并且`testroots[[0]]`相当于`Head[testroots]`which 给出`List`了一个列表。这是有道理的，因为在完整的表达式中，`List`在元素之前。

但是你的表情`testroots[[0,0]]`呢？它访问列表头部的头部。您列表的开头是`List`. 但是头是`List`什么？毕竟，它没有表格`Head[arg1, arg2, ...]`。

对于原子表达式，Mathematica 给出了描述原子*类型*的符号。例如`Head[1]`is `Integer`, `Head["Hello"]`is`String`和`Head[foo]`is `Symbol`（假设`foo`尚未分配给）。请注意，上述形式的表达式的头部也可以被认为是表达式的类型。列表`List`的类型是`a+b`，完整形式的类型`Plus[a, b]`是`Plus`，即总和。

现在`List`是一个符号，因此`Head[List]`是`Symbol`。因此，对于任何列表，例如您的`testroots`，`testroots[[0,0]]`都将评估为`Symbol`。

要获取列表第一个元素的第一个元素，请使用`testroots[[1,1]]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T18:28:53.373

Mathematica 索引从 1 开始，而不是从零开始。所以 testroots 的 [[0,0]] 条目不存在。您可以使用获取第一个元素

```
testroots[[1, 1]] 
```

# javascript - 在 JSP/JavaScript 中删除特殊字符的另一种方法？

> ID：12752840
> 
> 赞同：0
> 
> 时间：2012-10-05T19:28:32.790
> 
> 标签：javascript, function, jsp, analytics

> **可能重复：**
> [JavaScript 删除特殊字符串不起作用](https://stackoverflow.com/questions/12747470/javascript-remove-special-characters-string-not-working)

我正在尝试删除发送到 Google Analytics 的动态填充值中的特殊字符；' 在某些产品（如“Matt's”）中会导致 JS 错误。

这对我来说尤其具有挑战性，因为我并不真正了解 JavaScript 或 JSP。我编写了以下代码，但没有达到预期的效果。还有另一种方法可以做到这一点吗？我必须直接在锚标记中修改自定义变量和 _trackEvent 调用。下面是自定义变量的代码：

```
 <script type="text/javascript">
                function removeSplChars(inStr) {
                inStr = inStr.replace(/[^a-zA-Z0-9 ]/g, "");
                return inStr;
                }
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', '<c:out value="${profileId}"/>']);
                <c:choose>
                <c:when test="${(lastCmdName eq 'CategoryDisplay') or (lastCmdName eq 'ProductDisplay')}" >
                _gaq.push(['_setCustomVar',
                2, // This custom var is set to slot #2.
                '<c:choose><c:when test="${WCParam.source eq 'search'}">Search</c:when><c:otherwise><c:out value="${topCat}" /></c:otherwise></c:choose>', // The top-level name for your online content categories.
                '<c:choose><c:when test="${WCParam.source eq 'search'}">Search <c:out value="${WCParam.searchTerm}" /></c:when><c:otherwise><c:out value="${topCat}" />|<c:out value="${subCatA}" />|<c:out value="${subCatB}" />|<c:out value="${subCatC}" /></c:otherwise></c:choose>', // Records value of breadcrumb name
                3 // Sets the scope to page-level.
                ]); 
                </c:when>
                <c:otherwise>
                </c:otherwise>
                </c:choose>
                removeSplChars('<c:out value="${topCat}" />', '<c:out value="${subCatA}" />', '<c:out value="${subCatB}" />', '<c:out value="${subCatC}" />');
                 _gaq.push(['_trackPageview']);
                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
                </script> 
```

举个例子，在用 *// Records value of breadcrumb name*注释的行中， Google 正在输出如下代码：

[2,Kitchen Tools,Kitchen Tools|Textiles|Chef& # 0 3 9 ; s Apron|,3]"（当然符号之间没有空格）

我正在寻找的是
[2，厨房工具，厨房工具|纺织品|厨师围裙|，3]“

我尝试在语句中添加 escapeXml="false" ，但这给了我一个“意外标识符”错误，没有详细信息。

现在，我也尝试了下面的代码。我希望它用测试替换特殊字符，但没有任何反应。

```
 <script type="text/javascript" src="<c:out value="${jspStoreImgDir}javascript/Util.js"/>">
                    String.prototype.unescapeHtml = function () {
                        var temp = document.createElement("li");
                        temp.innerHTML = this;
                        var result = temp.childNodes[0].nodeValue;
                        temp.removeChild(temp.firstChild);
                        return result;}
                    '<c:out value="${catNameDisplay}" />'.unescapeHtml().replace((/[^a-zA-Z0-9 ]/g, 'test');

                    </script> 
```

任何帮助深表感谢。我整天都在研究这个问题，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:34:54.923

抱歉，之前的回答很愚蠢。我道歉。它应该做的恰恰相反。

我在这里注意到的一件事是您可能会向该`removeSplChars`方法传递多个参数。函数的结构方式，它只会修复第一个字符串。

另外..正在返回“固定”字符串，而您假设它将被内联修复

你正在做类似的事情：

```
removeSplChars(arg1, arg2, arg3, arg4); 
```

并期望 , `arg1`, `arg2`,`arg3`和`arg4`是固定的，然而，它们不是。更好的是：

```
arg1 = removeSplChars(arg1);
arg2 = removeSplChars(arg2);
arg3 = removeSplChars(arg3);
arg4 = removeSplChars(arg4); 
```

好的，所以这“应该”解决您的问题。玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:41:29.380

它可以像这样逃脱：

`<%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %> ${fn:escapeXml(myString)}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:24:58.100

```
String.prototype.unescapeHtml = function () {
    var temp = document.createElement("div");
    temp.innerHTML = this;
    var result = temp.childNodes[0].nodeValue;
    temp.removeChild(temp.firstChild);
    return result;
}

'&#039'.unescapeHtml().replace(/[^0-9a-zA-Z]/gi, ''); 
```

我从[http://paulschreiber.com/blog/2008/09/20/javascript-how-to-unescape-html-entities/](http://paulschreiber.com/blog/2008/09/20/javascript-how-to-unescape-html-entities/)获得了 unescapeHtml 代码，并在取消转义后应用了正则表达式来删除特殊字符。

试试看。只需替换我为您的变量设置的字符串即可。

# android - Actionbarsherlock IcsSpinner - 宽度始终设置为最宽的项目

> ID：12752847
> 
> 赞同：4
> 
> 时间：2012-10-05T19:29:04.823
> 
> 标签：android, spinner, actionbarsherlock

我正在使用 Actionbarsherlock 并希望使用自定义操作栏布局，但仍需要导航列表。因此，我包含了一个 IcsSpinner 小部件。但是，宽度总是与最大的项目一样大，这是不希望的。我把它从操作栏里拿出来调试，仍然得到相同的结果：

![短文本](../Images/f4e3d07ad210c9b1edeb24545d09b270.png)

![在此处输入图像描述](../Images/b6fa1ac2be66083bf17a36dd13ff322f.png)

片段代码

```
public class TestFragment extends SherlockFragment {
private final String[] testStrings = {"Short","Not so long text"};
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view=inflater.inflate(R.layout.test_layout, container, false);
    IcsSpinner spinner = (IcsSpinner)view.findViewById(R.id.test_spinner);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
             R.layout.spiner_test_row, R.id.spinner_text, testStrings);
    spinner.setAdapter(adapter);
    return(view);
    }
} 
```

test_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.actionbarsherlock.internal.widget.IcsSpinner
    android:id="@+id/test_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

R.layout.spinner_test_row

```
<?xml version="1.0" encoding="utf-8"?>
<TextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinner_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="16sp" /> 
```

更改为标准 Spinner（在姜饼模拟器上）可以正常工作：

![在此处输入图像描述](../Images/ef52a2a0caa44390cb0aa22e95be5291.png)

![在此处输入图像描述](../Images/bef78d3af3b2438c86dd5b7975c5796f.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T02:29:24.087

这似乎是 ActionBarSherlock 中 IcsSpinner 组件的默认行为，即使在我的 ICS 设备上运行 Honeycomb+ 版本的 Android 时也是如此 - 例如 Square Wallet。

Jake 建议不要使用 IcsSpinner 组件，但没有它就没有简单的方法来使用自定义操作栏布局和维护导航列表 UI。除非 Jake 可以建议和替代，否则我将继续使用它，确保在他伟大的库的未来版本中进行全面测试。

# file-upload - Netty 4.x 示例的文件上传

> ID：12752853
> 
> 赞同：1
> 
> 时间：2012-10-05T19:29:30.827
> 
> 标签：file-upload, netty, httpserver

如何使用 Netty 4.x 制作上传 http 文件服务器？对于 3.x 是一个示例，对于 4.x 示例仅用于提供静态文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-15T05:03:02.780

我用 netty-all:4.1.32.Final 做上传文件服务器

```
 // Post request
    private void formParams(HttpServerRequest request, ByteBuf content, Map<String, String> formParams, Map<String, MemoryFileUpload> fileParams) {
        if (content != null) {
            // POST Params
            FullHttpRequest dhr = new DefaultFullHttpRequest(request.version(), request.method(), request.uri(), content, request.requestHeaders(), EmptyHttpHeaders.INSTANCE);
            HttpPostRequestDecoder postDecoder = new HttpPostRequestDecoder(new DefaultHttpDataFactory(false), dhr);
            List<InterfaceHttpData> postData = postDecoder.getBodyHttpDatas();
            for (InterfaceHttpData data : postData) {
                // General Post Content
                if (data.getHttpDataType() == InterfaceHttpData.HttpDataType.Attribute) {
                    MemoryAttribute attribute = (MemoryAttribute) data;
                    formParams.put(attribute.getName(), attribute.getValue());
                }
                // Upload
                else if (data.getHttpDataType() == InterfaceHttpData.HttpDataType.FileUpload) {
                    MemoryFileUpload fileUpload = (MemoryFileUpload) data;
                    fileParams.put(fileUpload.getName(), fileUpload);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:43:06.640

HttpPostRequestDecoder 尚未移植到 4.0.0.x。所以不支持它atm。它在待办事项清单上。

# html - CSS：单个的不同垂直对齐方式

> ID：12752857
> 
> 赞同：0
> 
> 时间：2012-10-05T19:30:01.143
> 
> 标签：html, css, html-table, alignment, center

我正在尝试创建一个表格，其中包含画廊中的图像及其下方的名称。我想将每列中的图像垂直居中，并将名称对齐在底部`<td>`，但我似乎无法让它工作。到目前为止，这是我的代码：

```
table.gallery {
    width:100%;
    text-align: center;
    table-layout: fixed;
}
table.gallery td {
    padding: 10px 10px 10px 10px;
    width:33%;
    overflow: hidden;
}
table.gallery td img{
    vertical-align: middle;
}
table.gallery td span.desc {
    vertical-align: bottom;
} 
```

和我的 PHP 代码来显示表格：

```
<table border="0" class="gallery"><tr>
<?php
    $curtd = -1;
    foreach ($img_arr as $item) {
        $curtd++;
        if ($curtd >= 3){
            echo '</tr><tr>';
            $curtd = 0;
        }
        echo '<td><center><a href="'.$item['link'].'" target="_blank"><img src="'.$item['thumb'].'" /></a></center>
                <span class="desc"><a href="'.$item['link'].'" target="_blank">'.$item['title'].'</a></span></td>';
    }
?>
</tr></table> 
```

我的图像看起来垂直居中没有问题，但名称仍直接显示在图像下方，而不是单元格底部。我怎样才能解决这个问题？

编辑：这是由 PHP 代码生成的 HTML（删除 URL 和东西只是为了节省空间）：

```
<table border="0" class="gallery"><tr>
<td>
    <center><a href="[link]" target="_blank"><img src="[URL]" /></a></center>
    <span class="desc"><a href="[link]" target="_blank">[name]</a></span>
</td>
<td>
    <center><a href="[link]" target="_blank"><img src="[URL]" /></a></center>
    <span class="desc"><a href="[link]" target="_blank">[name]</a></span>
</td>
<td>
    <center><a href="[link]" target="_blank"><img src="[URL]" /></a></center>
    <span class="desc"><a href="[link]" target="_blank">[name]</a></span>
</td>
</tr><tr>
<td>
    <center><a href="[link]" target="_blank"><img src="[URL]" /></a></center>
    <span class="desc"><a href="[link]" target="_blank">[name]</a></span>
</td>
<td>
    <center><a href="[link]" target="_blank"><img src="[URL]" /></a></center>
    <span class="desc"><a href="[link]" target="_blank">[name]</a></span>
</td>
<td>
    <center><a href="[link]" target="_blank"><img src="[URL]" /></a></center>
    <span class="desc"><a href="[link]" target="_blank">[name]</a></span>
</td>
</tr></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:33:42.270

请试试这个：

使用两个 tr 标签并在第一个图像 - ，下一个 - 名称 -

# javascript - 在 javascript 计算时使用 CSS 动画

> ID：12752864
> 
> 赞同：7
> 
> 时间：2012-10-05T19:30:35.927
> 
> 标签：javascript, css-transitions, css-animations

我正在开发一个需要在启动时生成和计算一堆数组的 Web 应用程序。我想在发生这种情况时显示一个加载页面，并且可能会播放一些 CSS 动画，但似乎 CSS 动画会在执行 javascript 时挂起。我已经有一个加载栏，它会根据处理的关键事件进行更新，但我想使用 css-transitions 来使其平滑一点。

我想知道是否有任何方法可以在 javascript 执行时让某些东西动画化？

我知道我可以设法不时将控制权交还给浏览器以让它刷新，但我发现使用 javascript 在后台计算某些东西只会冻结你的整个界面是很愚蠢的。

编辑：这是我正在谈论的一个愚蠢的例子：http: [//jsfiddle.net/YWefx/13/](http://jsfiddle.net/YWefx/13/) 如果禁用 css 转换，则每次迭代都会更新栏，但如果启用它，转换将只发生在最后。所以我最终要么不得不在每个循环之间等待 400 毫秒，失去 4 秒只做动画，最后有一个流畅的动画（失去了显示进度条的好处），或者没有动画条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:49:34.273

CSS3 动画不会被 Javascript 阻止，除非正在进行一些密集的处理（在这种情况下，您可能会卡顿）。

如果您在加载期间触发它们，我可能会看到它们会被延迟，直到它们到达脚本的该部分。

解决此问题的一种方法是在脚本的最开始设置超时以在特定时间触发动画更改。

另一个（也许更好）的选择是使用关键帧。确保在加载开始之前调用它。[http://dev.w3.org/csswg/css3-animations/#keyframes](http://dev.w3.org/csswg/css3-animations/#keyframes)

# ajax - 如何将模型对象添加到我的 AJAX.ActionLink

> ID：12752870
> 
> 赞同：0
> 
> 时间：2012-10-05T19:31:15.193
> 
> 标签：ajax, asp.net-mvc-3

我有一个 Html.ActionLink 需要发布到服务器：

```
@Html.ActionLink("Some Text", "controller", "service", Model, new { @class = "btn btn-primary", @id = "someText" }) 
```

我试着把它变成一个 AJAX 帖子：

```
@Ajax.ActionLink("Some Text", "controller", "service", Model, new { @class = "btn btn-primary", @id = "someText" }, new AjaxOptions(){HttpMethod = "POST"}) 
```

没有像上面的Html.Actionlink那样的字符串、字符串、字符串、对象、对象的重载。

我对 AJAX 不是很熟悉，但有没有办法告诉 AJAX 传递相同的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:40:48.427

看起来您的参数顺序不正确。先于`AjaxOptions`属性。

```
@Ajax.ActionLink("Some Text", "controller", "service", Model, new AjaxOptions(){HttpMethod = "POST"}, new { @class = "btn btn-primary", @id = "someText" }) 
```

# objective-c - 可以创建但不能打开具有 iCloud 支持的 UIManagedDocument

> ID：12752874
> 
> 赞同：3
> 
> 时间：2012-10-05T19:31:49.423
> 
> 标签：objective-c, ios, core-data, icloud, uimanageddocument

我正在创建一个具有 iCloud 支持的新 UIManagedDocument，如下所示：

1.  使用本地沙盒 URL 分配和初始化
2.  设置持久存储选项以支持 iCloud：ubiquitousContentNameKey 和 ubiquitousContentURL。我唯一生成的名称和 URL 指向我的 ubiquityContainer / CoreData。
3.  使用 UIManagedDocument 的 saveToURL 方法在本地保存到沙箱。
4.  在完成处理程序中，使用 FileManager 的 setUbiquitous 方法移动到 iCloud。

到目前为止，这种舞蹈有效。（嗯，有点）。在我调用 setUbiquitous 后，我收到一个错误，说它不成功，但是文档移动到了云端。完成后，我在云中有一个新文档。这似乎是一个错误，因为我已经能够用其他人的代码复制它。

我实际上是在“文档视图控制器”中生成此文档，其中列出了云中的所有文档。因此，当这个新文档的最终完成处理程序完成时，由于 NSMetadataQuery，它会显示在表格视图中。到目前为止，我认为非常标准的用法。

要编辑文档，用户点击并转到“单视图文档视图控制器”。

在这个视图控制器中，我需要“重新打开”选定的文档，以便用户可以编辑它。

所以我再次经历了一系列步骤：

1.  使用 fileURL 分配 / 初始化 UIManagedDocument —— 这次，URL 来自云端。
2.  使用相同的设置设置我的持久存储选项，与上面的步骤 2 相同。

现在，我尝试了第 3 步，即从磁盘打开文档，但它失败了。文档处于“Closed | SavingError”状态并且尝试打开失败。

**有谁知道为什么我的文档会创建 OK，移动到云 OK，但是在随后的立即尝试中无法打开？（实际上，在该应用程序的启动中进行了一次尝试 - 见下文）。具体来说，什么会使 UIManagedDocument 实例被创建但处于关闭、不可打开的状态？**

**有趣的是，如果我退出应用程序并再次启动，我可以点击并重新加载文档并进行编辑。**

偶尔我可以很简单地创建、打开和编辑，比如插入一个托管对象，然后它进入关闭状态 | 保存错误状态。

错误信息：

我将 UIManagedDocument 子类化并覆盖了 -handleError: 方法以尝试获取更多信息，这就是我得到的（以及我放入的其他一些调试日志）：

2012-10-05 14:57:06.000 基础 [23687:907] 单个文档视图控制器视图已加载。文档：fileURL：file://localhost/private/var/mobile/Library/Mobile%20Documents/7PB5426XF4~com~howlin~MyApp/Documents/New%20Document%2034/documentState：[关闭]

2012-10-05 14:57:06.052 MyApp[23687:907] 文档状态已更改。当前状态：5 文件URL：file://localhost/private/var/mobile/Library/Mobile%20Documents/7PB5426XF4~com~howlin~MyApp/Documents/New%20Document%2034/ documentState：[关闭 | 保存错误]

2012-10-05 14:57:06.057 Foundations [23687:5303] UIManagedDocument 错误：商店名称：新文档 34 已在使用中。存储 URL：file://localhost/private/var/mobile/Library/Mobile%20Documents/7PB5426XF4~com~howlin~MyApp/Documents/New%20Document%2034/StoreContent.nosync/persistentStore 正在使用存储 URL：file:/ /localhost/var/mobile/Applications/D423F5FF-4B8E-4C3E-B908-11824D70FD34/Documents/New%20Document%2034/StoreContent.nosync/persistentStore

2012-10-05 14:57:06.059 MyApp[23687:5303] { NSLocalizedDescription = "商店名称：新文档 34 已在使用中。\n\t商店 URL：file://localhost/private/var/mobile/ Library/Mobile%20Documents/7PB5426XF4~com~howlin~MyApp/Documents/New%20Document%2034/StoreContent.nosync/persistentStore\n\t 使用商店 URL：file://localhost/var/mobile/Applications/D423F5FF-4B8E -4C3E-B908-11824D70FD34/Documents/New%20Document%2034/StoreContent.nosync/persistentStore\n"; NSPersistentStoreUbiquitousContentNameKey = "新文档 34"; }

该错误似乎认为我正在创建一个在随后打开时已经存在的商店。我现在应该在第二次打开时在持久存储上设置这些 iCloud 选项吗？我已经尝试过这种方法，但它也没有奏效。

我研究了关于 UIManagedDocument 的斯坦福讲座，但看不出我做错了什么。

这是我创建文档并迁移到云的方法：

```
- (void) testCreatingICloudDocWithName:(NSString*)name
{

    NSURL* cloudURL = [self.docManager.iCloudURL URLByAppendingPathComponent:name isDirectory:YES];

    NSURL* fileURL = [self.docManager.localURL URLByAppendingPathComponent:name];

    self.aWriting = [[FNFoundationDocument alloc] initWithFileURL:fileURL];

    [self setPersistentStoreOptionsInDocument:self.aWriting];

    [self.aWriting saveToURL:fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
        if (success == YES) {

            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                //create file coordinator
                //move document to icloud

                NSFileCoordinator* fileCoordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
                NSError* coorError = nil;
                [fileCoordinator coordinateWritingItemAtURL:cloudURL options:NSFileCoordinatorWritingForReplacing error:&coorError byAccessor:^(NSURL *newURL) {

                    if (coorError) {
                        NSLog(@"Coordinating writer error: %@", coorError);
                    }

                    NSFileManager* fm = [NSFileManager defaultManager];
                    NSError* error = nil;
                    NSLog(@"Before set ubiq");
                    [fm setUbiquitous:YES itemAtURL:fileURL destinationURL:newURL error:&error];
                    if (!error) {
                        NSLog(@"Set ubiquitous successfully.");
                    }
                    else NSLog(@"Error saving to cloud. Error: %@", error);

                    NSLog(@"State of Doc after error saving to cloud: %@", self.aWriting);
                }];

            });

        }
    }];

} 
```

这是我在persistentStore上为iCloud设置选项的地方：

```
- (void)setPersistentStoreOptionsInDocument:(FNDocument *)theDocument
{
    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

    [options setObject:[theDocument.fileURL lastPathComponent] forKey:NSPersistentStoreUbiquitousContentNameKey];
    NSURL* coreDataLogDirectory = [self.docManager.coreDataLogsURL URLByAppendingPathComponent:[theDocument.fileURL lastPathComponent]];
    NSLog(@"Core data log dir: %@", coreDataLogDirectory);
    [options setObject:coreDataLogDirectory forKey:NSPersistentStoreUbiquitousContentURLKey];

    theDocument.persistentStoreOptions = options;
} 
```

这是我尝试重新打开它的地方：

```
- (void) prepareDocForUse
{

    NSURL* fileURL = self.singleDocument.fileURL;

    if (![[NSFileManager defaultManager] fileExistsAtPath:[fileURL path]]) {
        NSLog(@"File doesn't exist");
            }
    else if (self.singleDocument.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        [self.singleDocument openWithCompletionHandler:^(BOOL success) {
            if (!success) {
                NSError* error;
                [self.singleDocument handleError:error userInteractionPermitted:NO];
            }
            [self setupFetchedResultsController];
        }];
    } else if (self.singleDocument.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        [self setupFetchedResultsController];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T17:00:58.430

我的目标是 iOS7，我使用单个 UIManagedDocument 作为我的应用程序数据库，目的是按照 Apple 在其文档中的建议更好地集成 CoreData 和 iCloud。我有同样的问题，我用下面的代码解决了。

自从我编写它以来，我将 PSC 选项设置移动到 UIManagedDocument 的惰性实例化中。

我的原始代码使用带有成功标准函数的回调创建、关闭然后重新打开文档。我在 Erika Sadun 的一本书上找到了它。一切似乎都很好，但我无法重新打开刚刚创建然后关闭的文档，因为它处于“保存错误”状态。我为此浪费了一周的时间，我无法理解我做错了什么，因为在重新开放之前一切都很完美。

以下代码在我的 iPhone5 和 iPad3 上完美运行。

尼古拉

```
-(void) fetchDataWithBlock: (void (^) (void)) fetchingDataBlock
{

    //If the CoreData local file exists then open it and perform the query
    if([[NSFileManager defaultManager] fileExistsAtPath:[self.managedDocument.fileURL path]]){
        NSLog(@"The CoreData local file in the application sandbox already exists.");

        if (self.managedDocument.documentState == UIDocumentStateNormal){
            NSLog(@"The CoreData local file it's in Normal state. Fetching data.");
            fetchingDataBlock();
        }else if (self.managedDocument.documentState == UIDocumentStateClosed){
            NSLog(@"The CoreData local file it's in Closed state. I am opening it.");

            [self.managedDocument openWithCompletionHandler:^(BOOL success) {
                if(success){
                    NSLog(@"SUCCESS: The CoreData local file has been opened succesfully. Fetching data.");
                    fetchingDataBlock();
                }else{
                    NSLog(@"ERROR: Can't open the CoreData local file. Can't fetch the data.");
                    NSLog(@"%@", self.managedDocument);
                    return;
                }
            }];
        }else{
            NSLog(@"ERROR: The CoreData local file has an unexpected documentState: %@", self.managedDocument);
        }
    }else{
        NSLog(@"The CoreData local file in the application sandbox did not exist.");
             NSLog(@"Setting the UIManagedDocument PSC options.");
        [self setPersistentStoreOptionsInDocument:self.managedDocument];

        //Create the Core Data local File
        [self.managedDocument saveToURL:self.managedDocument.fileURL
                       forSaveOperation:UIDocumentSaveForCreating
                      completionHandler:^(BOOL success) {

            if(success){

                NSLog(@"SUCCESS: The CoreData local file has been created. Fetching data.");
                fetchingDataBlock();

            }else{
                NSLog(@"ERROR: Can't create the CoreData local file in the application sandbox. Can't fetch the data.");
                NSLog(@"%@", self.managedDocument);
                return;
            }

        }];

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:05:48.130

您最近是否在测试各种版本的 iOS？尝试将保存的文档的标题更改为“新文档 34”以外的名称，我遇到了同样的问题，我相信这与使用相同文档 url 从应用程序的不同 sdk 编译中保存的冲突文档有关。

# facebook - Facebook 多好友请求总是突出显示第一个用户

> ID：12752875
> 
> 赞同：1
> 
> 时间：2012-10-05T19:31:50.273
> 
> 标签：facebook, multi-friend-selector

我正在开发适用于 iOS 的应用程序。我正在使用 facebook 多好友请求对话框。我在触摸显示模式下使用它，它被加载到 UIWebView 中。

当对话框加载时，列表中的第一个朋友总是高亮显示，即使在我选择了一些朋友之后也是如此。这使它在选择用户时看起来不对。

有没有办法改变这种行为，以便在您点击单元格之前不会突出显示朋友单元格？

# image - 基于数据excel制作图像移动

> ID：12752876
> 
> 赞同：0
> 
> 时间：2012-10-05T19:31:55.287
> 
> 标签：image, excel

我很好奇是否可以根据导入到 Excel 电子表格中的数据对图像进行编程，例如燃气表从空变为燃料。如果是这样，是否有人知道执行此操作的任何指南以及我需要哪种程序来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:36:34.033

有可能的。

您将使用 VBA 并有两张图像，一张是针，一张是量规

然后你会根据数据改变针的角度。

# java - 确定性 GUID/UUID 生成的 Java/.NET 实现

> ID：12752885
> 
> 赞同：3
> 
> 时间：2012-10-05T19:32:41.780
> 
> 标签：java, .net, guid, uuid

我正在尝试在 Java 中复制以下 .NET 代码

[https://github.com/LogosBible/Logos.Utility/blob/master/src/Logos.Utility/GuidUtility.cs](https://github.com/LogosBible/Logos.Utility/blob/master/src/Logos.Utility/GuidUtility.cs)

我已经用 Java 编写了等效代码，但我得到了最终 GUID/UUID 的不同值

我为 Java 所做的更改 - 要将 UUID 转换为字节数组（上面代码中的第 3 步），我使用了以下 - [GUID 到 ByteArray](https://stackoverflow.com/questions/2983065/guid-to-bytearray)

```
 ByteBuffer bb = ByteBuffer.wrap(new byte[16]);
    bb.putLong(namespaceId.getMostSignificantBits());
    bb.putLong(namespaceId.getLeastSignificantBits());
    byte[] namespaceBytes = bb.array() 
```

对于散列部分（第 4 步），我使用 apache-commons message-digest 类

```
 final MessageDigest sha = MessageDigest.getInstance("SHA-1");
    final ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    outputStream.write(namespaceBytes);
    outputStream.write(nameBytes);
    sha.update(outputStream.toByteArray());
    final byte[] hash = sha.digest(); 
```

其余代码完全相同。

然而，在经历了这里发布的关于 Java 的有符号字节数组和 .NET 的无符号字节的其他问题之后。我已经记录了我在每个点得到的输出，并且在这两个步骤中我没有看到输出中有任何相似之处。

在阅读了几个线程之后，我意识到 GUID.toByteArray() 方法的工作方式与我在 java 中转换值的方式不同。.NET 中的字节数组也是无符号的，Java 不支持这种类型。如何修复代码以使其适用于 Java？

# mysql - 如何从文件中插入而不重复

> ID：12752887
> 
> 赞同：0
> 
> 时间：2012-10-05T19:32:53.680
> 
> 标签：mysql

我在文件中有一些数据，`csv`我想将其插入 Mysql 表中。我的问题是如何以不向表中插入重复值的方式做到这一点。我查看了以下参考[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)并且有一个关键字`IGNORE`，但看不到如何使用它来仅插入唯一值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:40:16.083

添加唯一索引并使用您提到的 IGNORE ：

> ALTER TABLE`myTable`添加唯一的 idxName (myFieldA, myFieldB,myFieldC);

或在命令行上过滤 csv 文件：

> 排序 -u in.csv > out.csv

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:34:01.343

在要插入的表上添加唯一性约束或唯一索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:40:28.630

使用一列或多列在表上添加唯一索引：

```
CREATE TABLE `test` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`start` VARCHAR(10) DEFAULT NULL,
`end` VARCHAR(10) DEFAULT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `start` (`start`,`end`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8; 
```

您将使用忽略来跳过由于重复索引错误而出错的行。

```
INSERT IGNORE into test (id, start, end) values (1,'test','test'); 
```

使用负载：

```
LOAD DATA INFILE 'file_name' IGNORE INTO TABLE test; 
```

# matlab - Matlab中的a+文件权限

> ID：12752890
> 
> 赞同：2
> 
> 时间：2012-10-05T19:33:10.007
> 
> 标签：matlab

我在 Matlab 中使用 a+ 权限打开了一个文件进行读写，并将数据附加到文件末尾。我能够正确地将数据写入文件并将其附加到文件中，但我无法读取。虽然文件权限定义说读写，但我无法阅读。你能帮帮我吗？有人遇到过这个问题吗？

```
 fid = fopen('E:\code folder\Translation values.txt','a+')
    [Array] = fscanf(fid,'%f %f') 
```

返回的数组为空。textscan 的问题也是如此。元胞数组为空。但是当我将权限更改为 r+ 时，它工作正常。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:17:29.137

该标志`a+`代表“追加和读取”，因此，文件位置指示指针可能指向文件末尾。如果是这样，您可能需要致电`fseek`或`frewind`在阅读之前致电。

# iphone - 我的 iPhone 上没有安装我的 xcode 应用程序，我该怎么办？

> ID：12752893
> 
> 赞同：0
> 
> 时间：2012-10-05T19:33:30.890
> 
> 标签：iphone, xcode

我没有越狱的 iPhone，我现在不想越狱。我将 myAppName.app 应用程序转换为 myAppName.ipa。我在 iTunes 上加载我的应用程序，但是当我同步时，该应用程序没有安装在我的 iPhone 上。我的 iPhone iOS 是 iOS 6，我在 Xcode 4.4.1 上制作应用程序，所以在 iOS 5.1 上制作应用程序，所以我无法从 Xcode 在我的 iPhone 上运行我的应用程序。

有人可以告诉我如何解决这个问题吗？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:53:55.210

如果我理解正确，您正在尝试在 iPhone 上运行您的应用程序。正确的？如果是这种情况，您将不得不在develop.apple.com 上购买会员资格。完成后，请按照以下步骤操作：[http](http://www.youtube.com/watch?v=dUdHifLTyrE&feature=BFa&list=PLdtvnlkHu09KgpdUgjkUnoTWqwTcqKGGH) ://www.youtube.com/watch?v=dUdHifLTyrE&feature=BFa&list=PLdtvnlkHu09KgpdUgjkUnoTWqwTcqKGGH 。我建议您观看此视频，因为这些步骤已经非常清楚地解释了，如果您仔细按照它进行操作，您很可能能够在第一时间运行您的应用程序。

此外，如果您使用 Xcode 4.5 开发应用程序并在 3.5" 屏幕上运行它们，请取消选中文件检查器下的“使用自动布局”。有关更多信息，请检查：[presentViewController: crash on iOS <6 (AutoLayout)](https://stackoverflow.com/questions/11198981/presentviewcontroller-crash)

希望这能回答你的问题！一切顺利！

# python - 如何从 linux 的后台检测 python 中的组合键？

> ID：12752898
> 
> 赞同：1
> 
> 时间：2012-10-05T19:33:59.253
> 
> 标签：python, linux

我想做的是让一个脚本在后台运行，当我按下一个组合键（例如 Fn + w）时，另一个脚本被执行。

如果这在 python 中很难做到，我可以在另一个中做到，或者如果有人知道另一种方法来做到这一点。

我正在使用带有 XFCE 的 Ubuntu 11.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:52:45.697

存在一个名为 python-xlib 的 python 库。您可以在系统 [http://python-xlib.sourceforge.net/上获取密钥并执行某些操作](http://python-xlib.sourceforge.net/)

这是一个示例代码，服务器通过网络接收密钥代码并按下它：

```
import Xlib.display
import Xlib.X
import Xlib.XK
import Xlib.protocol.event
import Xlib.ext.xtest
import socket, sys

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
keycode = None
try:
        s.bind(("", 49999))
        i=0
        display = Xlib.display.Display()

        while True:
                daten, addr = s.recvfrom(1024)
                if (daten != 'ende'):
                        keycode = daten
                if keycode == '111' or keycode == '116':
                        print '%d up/down' % i
                        Xlib.ext.xtest.fake_input(display, Xlib.X.KeyPress, int(keycode) )
                        display.sync()
                if keycode == '117':
                        # A
                        Xlib.ext.xtest.fake_input(display, Xlib.X.KeyPress, int(
keycode) )
                        display.sync()
                if keycode == '118':
                        # Y
                        Xlib.ext.xtest.fake_input(display, Xlib.X.KeyPress, int(keycode) )
                        display.sync()
                if keycode == '119':
                        # SPACE
                        Xlib.ext.xtest.fake_input(display, Xlib.X.KeyPress, int(keycode) )
                        display.sync()
                if daten == 'ende':
                        if keycode != None:
                                Xlib.ext.xtest.fake_input(display, Xlib.X.KeyRelease, int(keycode) )
                                keycode = None
                                display.sync()
                        daten = None
                        continue

finally:
        s.close() 
```

# css - 使用 box-sizing:border-box 的陷阱是什么？

> ID：12752899
> 
> 赞同：2
> 
> 时间：2012-10-05T19:34:00.293
> 
> 标签：css, border-box

我最近再次查看 box-sizing 属性。我觉得边界框实际上是一个更合适的模型。我希望我的盒子包含填充和边框，而无需每次在宽度计算中都考虑它，这在使用 100% 宽度时实际上是不可能的。

那么问题是什么是陷阱？为什么我不应该使用边框框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:37:02.830

我能想到的唯一问题是 IE7&8 不支持，在 IE9 上工作正常

# java - gwt - 调用异步函数时 Web 模式下的错误

> ID：12752902
> 
> 赞同：1
> 
> 时间：2012-10-05T19:34:03.087
> 
> 标签：java, eclipse, gwt, login, war

我在 WGT 中制作了一个简单的登录应用程序，它要求用户输入用户名和密码，验证服务器端“硬编码”（不涉及数据库）的详细信息，然后显示一个包含一些信息的简单表格......

当我在 Eclipse 中运行应用程序时 - 一切正常，但在我执行到 WAR 文件并在浏览器中运行 HTML 文件后，单击登录按钮后，我得到：

```
 "Unable to initiate the asynchronous service invocation (GreetingService_Proxy.greetServer) -- check the network connection" 
```

我阅读了该问题并在 moudle.xml 文件中添加了一些内容：

```
<inherits name="com.google.gwt.core.Core" />
<add-linker name="xs" /> 
```

但现在我收到了这个错误：在 IE9 上：

URL file:///C:/Users/meital/Desktop/workspace2/New%20folder/meitalgwt/greet 无效或违反同源安全限制

在火狐上：

```
(NS_ERROR_DOM_BAD_URI): Access to restricted URI denied code: 1012 INDEX_SIZE_ERR: 1 DOMSTRING_SIZE_ERR: 2 HIERARCHY_REQUEST_ERR: 3 WRONG_DOCUMENT_ERR: 4 INVALID_CHARACTER_ERR: 5 NO_DATA_ALLOWED_ERR: 6 NO_MODIFICATION_ALLOWED_ERR: 7 NOT_FOUND_ERR: 8 NOT_SUPPORTED_ERR: 9 INUSE_ATTRIBUTE_ERR: 10 INVALID_STATE_ERR: 11 SYNTAX_ERR: 12 INVALID_MODIFICATION_ERR: 13 NAMESPACE_ERR: 14 INVALID_ACCESS_ERR: 15 VALIDATION_ERR: 16 TYPE_MISMATCH_ERR: 17 SECURITY_ERR: 18 NETWORK_ERR: 19 ABORT_ERR: 20 URL_MISMATCH_ERR: 21 QUOTA_EXCEEDED_ERR: 22 TIMEOUT_ERR: 23 INVALID_NODE_TYPE_ERR: 24 DATA_CLONE_ERR: 25 result: 2152924148 filename: file:///C:/Users/meital/Desktop/workspace2/New%20folder/meitalgwt/012B81D90198FC382E15B5001E0AD8FE.cache.js lineNumber: 579 columnNumber: 0 inner: null data: null 
```

有谁知道会是什么？

重要的是说我是 GWT 的新手，所以请在你的回答中包括我可能错过的任何基本步骤......

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:46:58.983

问题是您没有运行服务器，而只是尝试从硬盘驱动器上的文件运行整个应用程序。您使用的`xs`链接器允许您从目录运行 JavaScript，但如果没有服务器，则异步服务调用无法与之对话。

相反，考虑使用 Tomcat 或 Jetty 作为服务器，在其中部署你的战争，并在你的计算机上启动它们。完成此操作后，`xs`将不再需要启用链接器的链接器行。

查看 GWT 文档中的 Deploying 页面了解更多信息 - 您不仅需要部署到*服务器*，还需要部署到可以运行 RPC 服务的服务器：[https ://developers.google.com/web-toolkit/doc /latest/DevGuideDeploying#DevGuideDeployingServletContainerUsingRPC](https://developers.google.com/web-toolkit/doc/latest/DevGuideDeploying#DevGuideDeployingServletContainerUsingRPC)

当然还有另一种选择，但它可能对您没有帮助：删除异步服务调用。如果您不调用服务器，那么您不需要任何软件运行该服务。

# ruby-on-rails - MiniTest 版本没有 Mocha 猴子补丁 (RuntimeError)

> ID：12752905
> 
> 赞同：1
> 
> 时间：2012-10-05T19:34:18.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, minitest

知道如何解决这个问题。最近当我尝试打开我的 Rails 控制台（开发和生产）时发生了这种情况。我看到了一个错误报告。但是有什么临时解决办法吗？

```
lib/mocha/integration/mini_test.rb:56:in `<class:TestCase>': No Mocha monkey-patch for MiniTest version (RuntimeError)
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha/integration/mini_test.rb:20:in `<class:Unit>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha/integration/mini_test.rb:19:in `<module:MiniTest>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha/integration/mini_test.rb:18:in `<top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha/integration.rb:45:in `block in <top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha/integration.rb:44:in `each'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha/integration.rb:44:in `<top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/mocha-0.12.6/lib/mocha.rb:2:in `<top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/testing/mochaing.rb:2:in `block in <top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/core_ext/kernel/reporting.rb:11:in `block in silence_warnings'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/core_ext/kernel/reporting.rb:22:in `with_warnings'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/testing/mochaing.rb:2:in `<top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/test_case.rb:8:in `<top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/console/app.rb:2:in `<top (required)>'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/application.rb:299:in `initialize_console'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/application.rb:152:in `load_console'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/commands/console.rb:27:in `start'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/carlos/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:37:39.130

好的，我想，我可以使用以前版本的 minitest 来工作

```
gem 'minitest', '3.5.0' 
```

# html - Div的高度太多，没有减少？

> ID：12752907
> 
> 赞同：1
> 
> 时间：2012-10-05T19:34:26.067
> 
> 标签：html, css

我正在尝试创建一个包含一些链接的菜单栏。这是我的相关代码：

**CSS：**

```
#menuBar {
    overflow: auto;
    padding: 0px 0px;
    margin: 15px 0px;
}
div#menuItem ul li {
    padding: 0px 20px 0px 20px;
    list-style-type: none;
    display: inline;
}
div#menuItem ul a {
    font-size:14px;
} 
```

**HTML**

```
<div id="menuBar">
<div id="menuItem"> 
<ul>
<li> <a href="index.php"> HOME</a> </li>
<li> <a href="index.php"> ABOUT</a> </li>
</ul>
</div> <!-- Menuitem closes -->
</div> 
```

所以，这里的问题是 menuBar 的最小高度保持不变。我希望它显示得更小一些。我尝试设置`#menuBar {padding -5px 0px }`. 但是，什么也没有发生。

我怎么做。如果我完全删除填充代码。div 的高度变得非常小，仅足以容纳文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:38:06.237

通过使用`line-height`or`height`属性为 div 设置一个高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:39:25.243

`div#menuItem ul li`尝试向左浮动，然后添加`display:block`到您的`a`元素和显式`line-height`值。

```
div#menuItem ul li {
    padding: 0px 20px 0px 20px;
    list-style-type: none;
    display: inline;
    float:left;
}

div#menuItem ul a {
    display: block;
    font-size:14px;
    line-height: 1;
    text-decoration: none;
 }​ 
```

# android - 关闭相机意图后无法更改 imageview src

> ID：12752913
> 
> 赞同：2
> 
> 时间：2012-10-05T19:35:05.677
> 
> 标签：android, android-imageview

我有一个小问题。

代码目标：单击打开相机的图像视图，然后在获取图片后更改图像视图。imageview 不是照片的缩略图。

问题：imageview 不刷新。

我尝试过：[Android imageView 切换问题](https://stackoverflow.com/questions/4888078/android-imageview-switching-problem?rq=1)， [在按钮单击时更改 ImageView](https://stackoverflow.com/questions/3490953/changing-imageview-on-button-click)， [ImageView onClickListener 更改图像源](https://stackoverflow.com/questions/3497157/imageview-onclicklistener-changing-the-image-source?rq=1) （不能使用 viewSwitcher b/c 有两个以上可能的视图组合）， [如何更改背景或图像源当点击android中的可点击imageview时？](https://stackoverflow.com/questions/6544904/how-to-change-the-background-or-the-image-source-when-a-clickable-imageview-in-a?rq=1)

我的代码：

```
public class CacTestActivity extends Activity {

private static final int CAMERA_PIC_REQUEST = 2500;
private Bitmap bmp;
private ImageView ivPic;
private Thread thread;

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cactest);

    ivPic = (ImageView) findViewById(R.id.imgCacSetPhoto);

    ivPic.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(intent, CAMERA_PIC_REQUEST);
            } catch (Exception e) {
            }
        }
    });
    thread = new Thread(){
        @Override
        public void run(){
            ivPic = (ImageView) findViewById(R.id.imgCacSetPhoto);
            ivPic.setImageResource(R.drawable.takephotoyes);
            ivPic.invalidate();
        }
    };
}

protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if (getResources().getConfiguration().orientation != Configuration.ORIENTATION_PORTRAIT){
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
    if (resultCode == RESULT_OK){
        if (requestCode == CAMERA_PIC_REQUEST){
            //If getting pic bitmap is successful, then change imageview source
            //thread.start();       //Does not work
        }
    }
}
} 
```

这个问题之前已经被问过很多次了，但是经过多次搜索，我还没有找到解决方案。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:03:29.227

确保 Eclipse 中项目属性中的目标 Android 版本与清单中的 targetSdk 匹配。

*   右键单击项目 > 属性 > Android 选项卡，并确保所选的 Android 目标与您的 targetSdk 匹配

# oracle - Oracle 每日数据库备份 - 无需 Enterprise Manager

> ID：12752916
> 
> 赞同：1
> 
> 时间：2012-10-05T19:35:14.607
> 
> 标签：oracle, oracle10g, database-backups

我是一名 SQL Server DBA，但我们有一个 Oracle 10g 数据库，我需要开始执行每日备份。我们没有企业管理器。有没有办法像在 SQL Server 中一样在 Oracle 中安排每日备份？

如果这个问题对于甲骨文的人来说是非常初级的，我深表歉意，但我在尝试研究这个问题并想出“使用 EM”以外的答案时遇到了非常困难的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:20:18.500

在您的情况下，最简单的方法是制作一个简单的 Windows 批处理脚本来设置 ORACLE_HOME 和 PATH 并使用 rman 进行备份。在 Windows 任务计划程序中计划脚本。假设您的数据库是生产数据库，因此在存档日志模式下运行，您的脚本可能是这样的：（我不是 Windows 专家，因此您可能很容易发现细微的错误）

rman_backup.bat：

```
ORACLE_SID=your_oracle_sid
ORACLE_HOME=d:/where/your/installation/is
PATH=%ORACLE_HOME%/bin;%PATH%
rman cmdfile=your_rman_actions_script.rman log=your_log_file.log 
```

your_rman_action_script.rman 看起来像

```
connect target=/
backup DATABASE PLUS ARCHIVELOG; 
```

有关文档，请查看[Oracle 10g 数据库文档](http://www.oracle.com/pls/db102/homepage)并从 2 天 dba 开始。之后检查在此处找到的备份文档[管理](http://www.oracle.com/pls/db102/portal.portal_db?selected=4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:09:34.783

我会（但是，我的背景更多是在 Unix 上，在 Windows 上较少）从数据库外部进行调度，使用 OS Scheduler 运行备份脚本。假设没有真正的备份系统可用。

在备份开始时，您将运行 SQL 脚本将表空间置于备份模式（ALTER TABLESPACE x BEGIN BACKUP），然后备份表空间数据文件，然后恢复正常模式（ALTER TABLESPACE x END BACKUP）。PL/SQL 可以在这里用于循环所有表空间。

之后，您将备份控制文件（ALTER SYSTEM BACKUP CONTROLFILE ...），最后您将循环重做日志足够的时间，以使所有相关日志数据都已归档，并备份归档日志。

至于做增量备份 f.ex。在整个工作周内，只需执行日志轮换和存档日志复制部分。

# android - Android（4 及更高版本）键盘使可见按钮不可点击

> ID：12752921
> 
> 赞同：2
> 
> 时间：2012-10-05T19:35:36.673
> 
> 标签：android, keyboard

当我单击 Edittext 时，会出现键盘。有一个按钮在键盘打开时仍然可见，但不可点击。只有当您点击“返回”按钮并且键盘消失时，您才能单击该按钮。即使键盘可见，我也希望能够单击该按钮。此问题仅适用于 4 及更高版本的 android，在旧版本中一切正常。

即使弹出键盘，如何使该可见按钮可点击？

这是代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:mm="http://millennialmedia.com/android/schema"
android:id="@+id/mainLayout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView android:id="@+id/topLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/logo_desc"
    android:src="@drawable/top_logo" />      

<EditText
    android:id="@+id/searchField"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/topLogo"
    android:inputType="textPersonName" >
</EditText>   

<Button
    android:id="@+id/searchButton"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/searchField"
    android:layout_centerHorizontal="true"
    android:text="@string/search_button_label"  />        

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:14:51.197

轮到自己`<com.millennialmedia.android.MMAdView/>`造成了问题。它与所有其他组件在同一个 RelativeLayout 中。将 MMAdView 放到主布局内的另一个布局中解决了这个问题。

# reporting-services - 报表查看器 - 查找 - 对象引用未设置为对象的实例

> ID：12752927
> 
> 赞同：0
> 
> 时间：2012-10-05T19:36:10.817
> 
> 标签：reporting-services, ssrs-2008, reportviewer

在报表查看器中，我有一个正确显示的报表。但是，当我尝试通过在搜索框中键入关键字并单击“查找”来查找文本字符串时，我收到

```
Object reference not set to an instance of an object. 
```

我在网上读到，如果有一列宽度 < 0.05 英寸，则可能会发生这种情况，但本报告并非如此——最窄的一列是 0.75 英寸。

是否还有其他已知原因导致此错误？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:56:02.433

看看这个[线程](http://www.bi-rootdata.com/2012/10/an-error-occurred-during-client.html)。它可能会帮助你。

# python - 在python中递归删除列表（列表列表的列表......）中的空格

> ID：12752929
> 
> 赞同：2
> 
> 时间：2012-10-05T19:36:12.390
> 
> 标签：python, recursion

我正在尝试从列表列表中的元素中删除所有空格（可能是列表列表等）

如果有意义的话，我编写的模块会单独返回基本案例的第一次出现，而不是整个递归对象。知道我做错了什么吗？

非常感谢！

```
def remove_spaces_from_list_recursive(the_list): #can deal with lists of lists of lists etc...
        if type(the_list) is str:
                print "base case happens", the_list
                return the_list.replace(" ","")

        else:
            print "base case didn't happen for", the_list
            for element in the_list:
                    return remove_spaces_from_list_recursive(element)

data=['2', [['101', '103'], ['0', '0'], ['0', '0'], ['101', '101'], ['0', '0'], ['151', '157'], ['310', '310'], ['116', '116'], ['206', '206'], ['167', '169'], ['097', '097'], ['093', '104'], ['275', '275'], ['67', '73'], ['0', '0'], ['81', '83'], ['118', '139'], ['112', '112'], ['106', '106'], ['205', '207'], ['189', '189'], ['230', '230'], ['188', '188'], ['101', '134'], ['0', '0'], ['087', '099'], ['0', '0'], ['103', '105'], ['129', '139'], ['199', '202'], ['146', '146'], ['163', '163'], ['0', '0'], ['100', '103'], ['0', '0'], ['297', '298'], ['308', '311'], ['74', '78'], ['0', '0'], ['161', '163'], ['255', '255'], ['86', '86'], ['154', '157'], ['245', '250'], ['0', '0'], ['145', '149'], ['159', '163'], ['301', '301'], ['318', '326'], ['218', '221'], ['223', '226'], ['240', '240'], ['91', '93'], ['154', '154'], ['109', '109'], ['119', '119'], ['244', '244'], ['158', '176'], ['224', '224'], ['245', '245'], ['68', '71'], ['116', '119'], ['167', '167'], ['81', '81'], ['0', '0'], ['0', '0'], ['0', '0'], ['109', '118'], ['0', '0'], ['0', '0'], ['260', '260'], ['88', '88'], ['244', '246'], ['101', '101'], ['160', '163'], ['0', '0'], ['255', '255'], ['248', '248'], ['95', '95'], ['159', '163'], ['84', '91'], ['161', '161'], ['120', '120'], ['311', '311'], ['141', '153'], ['230', '232'], ['103', '105'], ['137', '162'], ['111', '111'], ['254', '258'], ['278', '278'], ['204', '208'], ['257', '257'], ['85', '85'], ['150', '150'], ['79', '79'], ['82', '86'], ['191', '194'], ['242', '245'], ['249', '249'], ['0', '0'], ['165', '168'], ['310', '310'], ['0', '0'], ['254', '257'], ['273', '276']]]

data2=remove_spaces_from_list_recursive(data)
print data2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:40:19.487

我认为您的意思是使用列表理解而不是`return`循环中的 a 。

```
else:
    print "base case didn't happen for", the_list
    return [remove_spaces_from_list_recursive(element) for element in the_list] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:40:54.977

您需要在返回之前将您的函数映射到每个元素：

```
def remove_spaces_from_list_recursive(the_list): #can deal with lists of lists of lists etc...
        if isinstance(the_list, basestring):
            print "base case happens", the_list
            return the_list.replace(" ","")
        else:
            print "base case didn't happen for", the_list
            return map(remove_spaces_from_list_recursive, the_list) 
```

以前，该函数只返回第一个元素，这就是它的结尾。

# php - Mysql嵌套查询问题

> ID：12752930
> 
> 赞同：0
> 
> 时间：2012-10-05T19:36:18.810
> 
> 标签：php, mysql

我创建了一个带有嵌套 select 语句的 mysql seect 语句。现在我的 mysql 技能（或缺乏）非常有限。下面是我写的代码。我得到空白结果或警告。mysql_fetch_Array 错误。现在我收到一个错误，上面写着“子查询返回超过 1 行”任何人都可以指出我如何开始解决这个问题的正确方向。谢谢您的帮助。

```
 <?php
session_start();

$memberId = $_GET['id'];

$loggedId = $_SESSION['id'];

include('../connect_DB.php');

$sql = 'SELECT bins.tag_Id, tagging_Info.plant_Id, tagging_Info.photo_Id FROM bins inner join tagging_Info on bins.tag_Id = tagging_Info.tag_Id inner join collections on collections.id = bins.collection_Id WHERE collections.member_Id ='.$memberId.' and collections.id=(SELECT id FROM collections where member_Id='.$memberId.')'; 

$result = mysql_query($sql) or die(mysql_error());
while($row = mysql_fetch_array($result)) {

   $collection = "Success"; // test to see if working

}
echo $collection;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:12:03.463

您是否尝试过仅执行子查询以查看实际返回了多少条记录并确保实际设置了 $memberId？

用户拥有多个集合是有意义的，因此您可能应该调整主查询以在子查询结果上使用 IN 而不是 = 。

# c# - ArgumentException：C# 中的“路径中的非法字符”

> ID：12752937
> 
> 赞同：1
> 
> 时间：2012-10-05T19:36:39.310
> 
> 标签：c#, xml, filepath, argumentexception

我在执行代码时收到的错误是：'ArgumentException 未处理。路径中有非法字符。

我正在使用以下代码访问我的 .xml 文件。

```
string appPath = Path.GetDirectoryName(System.Environment.CommandLine);
FileInfo fi = new FileInfo(appPath + @"\Books.xml"); 
```

我正在为控制台应用程序执行此操作，而不是 WinForm。一段时间以来，我一直在详尽地搜索和搜索 SO。

这是家庭作业项目的一部分。这是我遇到的唯一问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:41:24.763

```
string appPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
FileInfo fi = new FileInfo(Path.Combine(appPath, "Books.xml")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:38:34.673

`System.Environment.CommandLine`不返回路径 - 它返回为运行应用程序而执行的命令行的值。

您可能需要使用`Assembly.GetExecutingAssembly().Location`（正如 Furqan Safdar 在[他的回答](https://stackoverflow.com/a/12752999/1583)中发布的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:43:16.777

CommandLine 返回的 EXE 路径的格式很奇怪，因此您需要执行以下操作：

```
string appPath = Path.GetDirectoryName(System.Environment.CommandLine.Trim('"', ' ')); 
```

那应该行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:53:30.043

使用此代码获取应用程序目录：

```
var rootDirectory = AppDomain.Current.BaseDirectory; 
```

祝你好运！

# c# - 如何在文件更改后刷新检索日期的类？

> ID：12752938
> 
> 赞同：1
> 
> 时间：2012-10-05T19:36:40.193
> 
> 标签：c#, filesystems

我有从某个文件中检索日期的类。在我对该文件进行更改后，我希望该类获取新日期，但它一直显示原始日期。我什至尝试过创建该类的新实例，但得到了相同的结果。我错过了什么？

编辑：简单地说，我正在寻找重新加载类，以便替换它的缓存。

```
namespace ProgramUpdater
{
   class clsGetFileDates
   {
       private DateTime eappwDateC = File.GetLastWriteTime(@"c:\files\eappw.exe");                          

       public DateTime EappwDateC         
       {                                
           get { return eappwDateC; }   
           set { eappwDateC = value; }  
       }                                
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:39:52.893

你想看看 FileSystemWatcher 类。

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

您可以设置 FileSystemWatcher 以在特定文件的 LastWriteTime 更改时通知您，在这种情况下，它将调用您指定的事件处理程序。在该事件处理程序中，您可以更新您的成员变量。

# ios - 使用@property ivars 的最佳实践

> ID：12752946
> 
> 赞同：2
> 
> 时间：2012-10-05T19:37:15.043
> 
> 标签：ios, objective-c-2.0

有人可以分享一些关于在初始化方法或指定初始化程序中使用@property iVars 的最佳实践/代码约定的知识吗？

请看我的例子：

```
@interface MyClass ()
@property(nonatomic,strong) nsstring *tempString;
@property(nonatomic,strong) NSMutableArray *arrItems;
@end

@implementation ViewController

- (id)init
{
    if (self = [super init]) {

        //Is this best practice / correct
        _tempString = @"";
        _arrItems = [[NSMutableArray alloc] initWithCapacity:0];
        ...
        ...

        //Or this
        self.tempString = @"";
        self.arrItems = [[NSMutableArray alloc] initWithCapacity:0];
    }
    return self;
}

@end 
```

关于为什么应该使用其中一个或另一个的任何建议？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:09:43.193

Apple 关于这个主题的指南包含在恰当命名的部分[Don't Use Accessor Methods in Initializer Methods 和 dealloc](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:55:29.243

阅读此主题：[为什么我不应该在 init/dealloc 中使用 Objective C 2.0 访问器？](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)

换句话说，如果您不打算使用 KVO，您可以使用第二种方法：

```
//Or this
        self.tempString = @"";
        self.arrItems = [[NSMutableArray alloc] initWithCapacity:0]; 
```

但是要小心使用 alloc-init，不要忘记自动释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:02:34.267

我更喜欢属性的惰性实例化方法。

之后，`@synthesize`您可以覆盖您的 getter 以延迟实例化您的属性

例如：

```
-(NSString *)tempString {

    if(!tempString) {
        _tempString = @"";
    }
    return _tempString;
} 
```

和

```
-(NSMutableArray *)arrItems {

    if(!_arrItems) {
        _arrItems = [[NSMutableArray alloc] initWithCapacity:0];
    }
    return _arrItems;
} 
```

如果您确实想在`init`方法中设置属性，请使用点表示法，`self.myProperty`以便它使用为属性定义的设置器，而不是直接使用私有类方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T20:04:05.667

根据 Apple 的说法，您不应*在*`init...`或`dealloc`方法中使用访问器：

> 您应该始终直接从初始化方法中访问实例变量，因为在设置属性时，对象的其余部分可能尚未完全初始化。即使您不提供自定义访问器方法或不知道您自己的类中的任何副作用，未来的子类也很可能会覆盖该行为。

取自此文档：[封装数据](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T19:55:47.550

由于 Jeremy 提到的原因，在定义它时，通常最好使用属性表示法，部分（大部分？）。

当您可以在方法设置器覆盖中设置断点并将其应用于修改变量的所有代码路径时，调试特定变量会容易得多。

另一个原因是保持一致的内存管理模型，尽管它不太重要，因为您使用的是 ARC。但是，如果您不是，并且强保留，那么您将确保您设置到该属性的对象在您设置该属性的任何地方都会自动释放，并且如果您直接设置该属性，则不必处理释放当前值多变的。

无论您使用什么实践，一致性对于维护/可读性和调试都很重要。

# facebook - 我的应用程序的 Facebook access_token 不工作，而图形 API 的 access_token 工作

> ID：12752948
> 
> 赞同：0
> 
> 时间：2012-10-05T19:37:19.427
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我的访问令牌有问题。我已经制作了自己的应用程序，并获得了 Facebook 用户的许可，我就是我。而且我也给了 facebook graph api 相同的权限。但是，当我可以使用带有图形 api 访问令牌的 FQL 轻松获得结果时，我无法使用自己的应用程序访问令牌获得结果。我的访问令牌有什么问题。

它不是用户访问令牌。也许这可能是个问题，但是图形 api 也不是用户访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:15:50.377

根据错误消息，您需要使用通过[身份验证](https://developers.facebook.com/docs/authentication/)流程检索到的用户访问令牌 - 您不能为此使用应用程序访问令牌。

您在评论中提到您已成功使用来自[Graph API Explorer](https://developers.facebook.com/tools/explorer)工具的访问令牌 - 这也是该工具使用客户端 oauth 流检索的用户访问令牌。这与为您自己的应用程序使用应用程序访问令牌不同。

# php - 为什么我会收到 PDO 查询错误？

> ID：12752950
> 
> 赞同：2
> 
> 时间：2012-10-05T19:37:22.267
> 
> 标签：php, pdo

提前道歉，因为我真的不确定如何提出这个问题，所以如果你需要知道任何事情，请发表评论而不是投反对票，我会编辑。

我的主页上有预告链接，点击后会打开一个包含完整文章的窗口。我目前正在将我的 MySQL 代码转换为 PDO 并且有点卡住了。

在 MySQL 中，我曾经执行以下操作（这里，$foo_query 是第一页的查询）：

```
$id = $_GET['id'];

$sql = "SELECT id, postdate, title, body FROM FooBarTable WHERE id = $id";
if ($foo_query = mysql_query($sql)) {
    $r     = mysql_fetch_assoc($foo_query);
    $title = $r["title"];
    $body  = $r["body"];
} 
```

这对我来说很容易理解。我一直在尝试使用我所知道的来转换它，结果我不太了解。到目前为止，我有以下内容：

```
$id = $_GET['id'];

$sql = $DBH->prepare("SELECT id, postdate, title, body FROM FooBarTable WHERE id = :id OR id = $id");
$sql->bindParam(':id', $_REQUEST['id'], PDO::PARAM_INT);
if ($foo_query = $DBH->query($sql)) {
    $r->setFetchMode(PDO::FETCH_ASSOC);
    $r     = $foo_query->fetch();
    $title = $r["title"];
    $body  = $r["body"];
}
$sql->execute(); 
```

这会引发“PDO::query() 期望参数 1 为字符串”的错误。这是针对“if”行的。

我是否正确地编写了任何 PDO？我需要从这里做什么？一个朋友最近教了我 MySQL，但他根本不知道 PDO，这意味着我不能问他的建议（不是很有帮助......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:50:59.347

这是正确的方法，带有注释：

```
try {
    //Connect to the database, store the connection as a PDO object into $db.
    $db = new PDO("mysql:host=localhost;dbname=database", "user", "password");

    //PDO will throw PDOExceptions on errors, this means you don't need to explicitely check for errors.
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    //PDO will not emulate prepared statements. This solves some edge cases, and relives work from the PDO object.
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    //Prepare the statement.
    $statement = $db->prepare("SELECT id, postdate, title, body FROM FooBarTable WHERE id = :id");
    //Bind the Value, binding parameters should be used when the same query is run repeatedly with different parameters.
    $statement->bindValue(":id", $_GET['id'], PDO::PARAM_INT);
    //Execute the query
    $statement->execute();

    //Fetch all of the results.
    $result = $statement->fetchAll(PDO::FETCH_ASSOC);
    //$result now contains the entire resultset from the query.
}
//In the case an error occurs, a PDOException will be thrown. We catch it here.
catch (PDOException $e) {
    echo "An error has occurred: " . $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:40:39.687

您需要使用[`PDOStatement::execute`](http://www.php.net/manual/en/pdostatement.execute.php)而不是[`PDO::query`](http://www.php.net/manual/en/pdo.query.php)：

```
$foo_query = $sql->execute(); 
```

您也可以在调用时一次绑定所有参数`execute`：

```
$foo_query = $sql->execute(array(
    ':id' => $id
)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:45:42.887

尝试这个：

```
$sql = $DBH->prepare("SELECT id, postdate, title, body 
  FROM FooBarTable WHERE id = :id OR id = $id");
$sql->bindParam (':id', $_REQUEST['id'],PDO::PARAM_INT);
$sql->execute();

while($row = $sth->fetch(PDO::FETCH_ASSOC)) {
  $title = $row["title"];
  $body = $row["body"];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T19:41:13.063

您应该将其更改为：

```
$sql->execute();
if($r = $sql->fetch()) {
    $title = $r["title"];
    $body = $r["body"]; 
```

# ember.js - 余烬路由无法正常工作

> ID：12752954
> 
> 赞同：0
> 
> 时间：2012-10-05T19:37:42.943
> 
> 标签：ember.js, ember-old-router

我的路由器中有 3 个视图。索引视图选择**viewtwo**作为默认值。

问题是当我去**viewone**或**viewthree**时，它​​会通过索引路由！并加载**viewto**，然后重新路由到我单击**viewone**或**viewthree**的任何一个，并且在我的设置中导致一些故障，因为每个视图对HTML做了一些事情，然后它必须在离开之前撤消，但有些东西同步得不太好（我测试过它有与加载速度和应用javascript的速度有关，因为我的故障只有在我快速来回单击时才会发生）。

在 didInsertElement 被销毁之前，它的反面是什么？

另外为什么从索引路由加载视图？

```
index: Ember.Route.extend({
    route: '/',
    redirectsTo: 'viewtwo'
}),

viewone: Ember.Route.extend({
    route: '/viewone',
connectOutlets: function( router ) {
....

viewtwo: Ember.Route.extend({
    route: '/viewtwo',
connectOutlets: function( router ) {
....    

viewthree: Ember.Route.extend({
    route: '/viewthree/:item_id',
connectOutlets: function( router, item ) {
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:37:51.340

> 在 didInsertElement 被销毁之前，它的反面是什么？

`willDestroyElement`. 请参阅此页面：[http ://emberjs.com/api/classes/Ember.View.html#event_willDestroyElement](http://emberjs.com/api/classes/Ember.View.html#event_willDestroyElement)

> 另外为什么从索引路由加载视图？

index 加载 viewto 的原因是重定向，但我想你已经知道了。不知道你在这里问什么。

至于通过索引的所有路线，您可能想要发布一个模仿这个问题的小提琴。`/viewthree`不应从您发布的内容中输入索引。如果您发布可以重现问题的小提琴，它将帮助人们提供更好的答案。

# python - python中的单独函数？

> ID：12752956
> 
> 赞同：1
> 
> 时间：2012-10-05T19:37:50.800
> 
> 标签：python

我不确定功能是否是我正在寻找的词。事实上，我真的不知道我在说什么，但我有一些代码，但它并没有完全按照我的意愿去做。基本上我想复制并粘贴我拥有的这段代码并将其通过电子邮件发送给某人。我希望他们能够简单地将其复制并粘贴到他们的终端并执行计算。：

```
## SCSAC.py

def round(x, base=5):
    return int(base * round(float(x)/base))

option = 'yes'
while (option == 'yes'):
    x=float(raw_input('How many accumulated orders do you have from retailers: '));
    y=float(raw_input('How many units are in the inventory: '));
    z=float(raw_input('How many accumulated orders have you placed: '));
    print 'Place an order of %s units' % round(((x / 25 + y / 10 + z / 25) + 115));
    print ; 
    option=raw_input("Do you wish to calculate another order? (Enter 'yes' to continue or any other key to quit):: ");
    print 
```

每当我逐行键入此代码时，它都能完美运行。那是因为这里基本上发生了 3 件不同的事情。

1.  我定义了“round”，它将一个值四舍五入到最接近的 5。

2.  我定义了一个选项以在完成后循环程序

3.  我定义了实际的程序，并在其中对答案进行了四舍五入，并以循环选项结束。您可能会注意到 2`print`不打印任何内容，但它们只是有空行。

当我复制并粘贴它时，我得到一个语法错误。我不是程序员，我整天都在玩这个。我只想知道如何编辑此代码，以便它可以复制/粘贴，并且可以按照预期的方式运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:45:01.003

尝试在 shell 中使用[IPython](http://ipython.org/)而不是常规的 Python 解释。使用 IPython，您可以键入`%cpaste`，然后粘贴一整段代码，它将逐步为您执行，将中间变量保存到工作内存中。

如果您坚持在常规解释器中粘贴它，则逐行粘贴，并特别注意缩进。缩进通常是粘贴语法错误的来源。

更好的是，使用[Emacs](http://www.gnu.org/software/emacs/)。然后您可以将粘贴的代码保存到文件中，例如`test.py`，键入`M-x shell`，然后`python test.py`快速运行它。或者，如果您将其保存到`test.py`IPython 中的文件中，您也可以键入`%run "test.py"`，它将运行代码并再次将中间变量存储到工作内存中。

如果您在进行多次更改后复制/粘贴它，只需将其保存到文件中并像脚本一样运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:50:26.590

您可以将代码保存在文件中，然后使用 Python 运行它。
您可以添加`#!/usr/bin/env python`到文件的开头，以便它可以在 *nix 系统上运行（如果您有执行权限）。

或者，您可以执行`python SCSAC.py`并运行您的代码。这适用于所有系统（AFAIK）。您可以将文件通过电子邮件发送给您的人，她可以使用 Python 运行它。这似乎是最简单的方法。

# c# - Umbraco 中的 UrlRewriting.net 重定向 6 次

> ID：12752962
> 
> 赞同：0
> 
> 时间：2012-10-05T19:38:32.210
> 
> 标签：c#, redirect, umbraco, urlrewriting.net

我有一个 Umbraco 网站，现在我开始使用它附带的 Urlrewriting.net。

现在似乎所有重定向页面在 1 次点击后都加载了 6 次。Page_Load 事件在通过重定向加载的页面上被命中 6 次，而“正常”（当然）只命中该事件一次。

我在 Umbraco 中使用无扩展名页面，我的重定向规则如下所示：

```
<add name="Category"
     virtualUrl="~/cat/(.+)/(.+)"
     rewriteUrlParameter="ExcludeFromClientQueryString"
     destinationUrl="~/category/?CategoryId=$1"
     ignoreCase="true" /> 
```

如果我将虚拟 url 更改为具有 .aspx 扩展名的虚拟 url，用重写器捕获那个并重定向，那么我就没有这个问题。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:40:45.607

原来，这与 Umbraco 无关。问题是由一个名为 NivoSlider 的组件引起的，当没有可用的图像 url 时，它一直在加载我们网站的默认页面。愚蠢的问题有点疯狂，但我想我会在这里提到它来结束这个问题并让 Umbraco 的人知道他们没有做得这么糟糕；）

# javascript - 使用 Jquery 的营业时间表格

> ID：12752964
> 
> 赞同：0
> 
> 时间：2012-10-05T19:38:32.007
> 
> 标签：javascript, jquery, html, forms, select

我正在尝试使用 JavaScript 修改表单以填充此表单的选项。我几乎完成了，但我达到了一个我无法克服的里程碑。我想知道是否有人可以提供帮助。该示例可在此处获得：http: [//jsfiddle.net/vladc77/bq5U6/3/](http://jsfiddle.net/vladc77/bq5U6/3/)

我可以成功分配休息日（周六和周日），但我无法通过选中/取消选中表单中的复选框来更改所有工作日的状态（禁用/启用）。请让我知道在不改变我为该行中的复选框分配样式的方式的情况下可以做什么：

```
 $(this).append(' <span class="closed custom-checkbox"><input type="checkbox" name="closed" value="closed" class="closed" id="closedHoursElement" onchange="closedHours()"><span class="box"><span class="tick"></span></span></span>Closed'); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:44:49.097

这是因为您正在尝试获取复选框的兄弟姐妹。它唯一的兄弟姐妹是 span 元素。选择元素是父元素的兄弟。

```
$('input[type=checkbox]').change(function() {   
       $(this).parent().siblings('select').prop('disabled', this.checked);
}); 
```

[http://jsfiddle.net/vladc77/bq5U6/3/](http://jsfiddle.net/vladc77/bq5U6/3/)

您还应该使用[.prop()](http://api.jquery.com/prop/)设置禁用属性。对于 jQuery 1.6+

来自 jQuery 文档

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

使用 prop 设置 disabled 属性，您只需将其设置为 true 或 false

```
$(element).prop('disabled',true);  // disabled
$(element).prop('disabled',false); // not disabled 
```

# c# - Azure 表存储 - 按分区键删除实体 REST API

> ID：12752965
> 
> 赞同：1
> 
> 时间：2012-10-05T19:38:33.097
> 
> 标签：c#, rest, azure, azure-table-storage

有没有办法仅通过 PartitionKey 删除实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:50:54.580

我假设您的意思是“有没有办法删除所有具有给定分区键的实体？” 答案是不。

要删除实体，您必须知道其完整身份（分区键 + 行键）。

# java - JSF 页面中的 Primefaces TabMenu

> ID：12752975
> 
> 赞同：0
> 
> 时间：2012-10-05T19:39:16.593
> 
> 标签：java, jsf, jsf-2, primefaces

我正在使用 Primefaces [TabMenu](http://www.primefaces.org/showcase-labs/ui/tabMenuDemos.jsf)的 JSF 页面。我设法找到了这篇[文章](https://stackoverflow.com/questions/12545319/tabs-in-jsf-page-are-not-working)的一种可能的解决方案。这是迄今为止的解决方案：

主页：

```
<div id="settingsHashMapz" class="settingsHashMap" style="width:1150px; height:400px; position:absolute; top:20px; left:1px">

    <p:tabMenu id="tabs" activeIndex="0" >  
        <p:menuitem value="General" url="/DCProfileTabGeneral.jsf" />  
        <p:menuitem value="Zones" url="/DCProfileTabZones.jsf" />  
        <p:menuitem value="UPS" url="/DCProfileTabUPS.jsf" />  

    </p:tabMenu>  

</div> 
```

选项卡中的 JSF 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>

    </h:head>
    <h:body>
        <ui:composition>
            <h:panelGroup>
                <h:form id="zones" >
                    <!-- The sortable data table -->
                    .................

                    <!-- The paging buttons -->
                    <h:commandButton styleClass="bimage" value="first" action="#{DCProfileTabZonesController.pageFirst}"
                                     disabled="#{DCProfileTabZonesController.firstRow == 0}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    ....................

                    <!-- Set rows per page -->
                    <h:selectOneMenu id="setrows" value="#{DCProfileTabZonesController.rowsPerPage}" converter="javax.faces.Integer" maxlength="2">                                    
                        <f:selectItem itemValue="5" itemLabel="5" />
                        <f:selectItem itemValue="10" itemLabel="10" />
                        <f:selectItem itemValue="20" itemLabel="20" />
                        <f:selectItem itemValue="50" itemLabel="50" />
                        <f:selectItem itemValue="100" itemLabel="100" />     
                        <f:selectItem itemValue="200" itemLabel="200" />
                        <f:ajax render="@form" event="change" execute="@form" listener="#{DCProfileTabZonesController.pageFirst}" />
                    </h:selectOneMenu>&nbsp;

                   ........................
                </h:form>         
            </h:panelGroup>
        </ui:composition>
    </h:body>
</html> 
```

我希望我能解决表格问题。但是我发现了这些问题：当我单击`h:commandButton`更改表格页面时，我被重定向到 page `DCProfileTabZones.jsf`。我没有返回到 page `DatacenterProfile.jsf?id=1002#`。也许这是因为我使用`h:commandButton`.

第二个问题来自`h:selectOneMenu`. 当我选择不同的数字时，我在 Firebug 中收到此错误消息：

```
ReferenceError: mojarra is not defined
function onchange(event) {
mojarra.ab(this, event, "valueChange", "@form", "@form");
} 
```

请您给我一些建议，我可以如何解决这些问题。

# ruby - 回溯在 JRuby 中的相关性不如 MRI 1.9

> ID：12752976
> 
> 赞同：1
> 
> 时间：2012-10-05T19:39:18.697
> 
> 标签：ruby, debugging, jruby, ruby-1.9, backtrace

我遇到了 JRuby 的问题，回溯不如 1.9.3 相关，例如：

**在 jruby-1.6.8 中**

```
[1] pry(main)> a = Task.create(title:"Test")
ArgumentError: wrong number of arguments (2 for 0)
from /Users/salta/.rvm/gems/jruby-1.6.8/gems/mongoid-3.0.6/lib/mongoid/persistence.rb:230:in `create' 
```

**在 ruby​​-1.9.3-p194**

```
[1] pry(main)> a = Task.create(title:"Test")
ArgumentError: wrong number of arguments (2 for 0)
from /Users/salta/apps/asabo/app/models/task.rb:17:in `initialize' 
```

真正的问题来自于`/Users/salta/apps/asabo/app/models/task.rb:17`不`/Users/salta/.rvm/gems/jruby-1.6.8/gems/mongoid-3.0.6/lib/mongoid/persistence.rb:230`

您知道解决方法还是我们必须应对？

谢谢你！

使用 ：

*   Mac OS X 10.8.2
*   转速 1.16.6
*   jruby-1.6.8（1.9 分支）
*   红宝石-1.9.3-p194

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:17:01.240

如果它仍然存在于 JRuby 1.7 中，我建议将此作为 JRuby 错误提交。您可以在我们的 JIRA 跟踪器[http://bugs.jruby.org](http://bugs.jruby.org)或在我们的 Github 存储库[https://github.com/jruby/jruby](https://github.com/jruby/jruby)上执行此操作。

它看起来对我来说可能是一个错误，但我们需要更多细节。

# ruby-on-rails - 如何使用devise 1.5.3和rails 3.2.8将refinerycms与现有的rails应用程序集成

> ID：12752981
> 
> 赞同：0
> 
> 时间：2012-10-05T19:39:43.130
> 
> 标签：ruby-on-rails

我有使用 rails 3.2.8、devise 1.5.3 并使用语言环境（en、pt）的 rails 应用程序。我只想知道如何将 reinerycms 与此应用程序集成，因为 refinerycms 2.0.8 不支持设计 1.5.3。请告诉任何与设计 1.5.3 兼容的炼油厂版本或任何简单的解决方案。谢谢。ateq

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:48:59.693

正如[Mikhail D 回答您的其他问题](https://stackoverflow.com/a/12723167/429758)一样，您应该使用 Refinerycms 1.0 版。

1.x 系列 - v1.0.11 - 的最后一个版本的 refinerycms-authentication 依赖于[1.4.3 版本的 Devise](http://rubygems.org/gems/refinerycms-authentication/versions/1.0.11#runtime_dependencies)。所以 1.0 稳定版本的炼油厂cms 应该可以很好地与 Devise 1.5.3 配合使用

如果您正在寻找具体说明，请按照此博文中的相关步骤操作：[Integrating Refinery + Rails 3.2 into your existing Rails App](http://sdownie.com/blogs/integrating-refinery-rails-3-2-into-your-existing-rails-app)，但版本如下：

```
git 'git://github.com/resolve/refinerycms.git', :branch => '1-0-stable' do 
```

另外，正如 Mikhail 之前提到的，最好升级 Devise :-)

# php - 定义包含 HTML 的 php 变量以及随后在脚本中使用的动态可设置变量？

> ID：12752983
> 
> 赞同：1
> 
> 时间：2012-10-05T19:39:51.967
> 
> 标签：php, html, pass-by-reference, scope

我想知道我是否想这样做可能是不可能的...我的 PHP 代码循环遍历图像目录中的 jpgs 和 flv 文件，并生成在某些情况下由 HTML 组成的内容，在其他情况下与动态确定的值相结合的 CSS 组成，例如例子：

```
'ul.set li.'.$className.
'{background: url(imagessmall/'.$fileName.') 
left -2px no-repeat;}' 
```

由于上述（以及更长的 HTML + 变量部分）在代码中出现不止一次，并且因为它会使代码更易于查看和维护，所以我希望能够将这些 html + $variable 分开预先定义一组变量，然后根据需要引用它们，例如：

```
$SDImagePreview = 
     'ul.set li.'.$className. 
    '{background: url(imagessmall/'.$fileName.') 
     left -2px no-repeat;}'
             .
             .
             .
//Code that dynamically sets $className and $fileName is here

$write = fwrite($fileCSS, $SDImagePreview); 
```

我在 stackoverflow 和其他地方读过关于使用 &，如 &$fieldName 通过引用传递值，但还没有找到定义变量的示例，该变量*在*其中具有可以动态设置值的变量。

我是否正在尝试做一些不可行的事情？或者是否有其他建议：实施我所描述的一般方法？感谢您的任何建议。

我不想将 html 嵌入代码本身，而是希望能够在代码开头定义一组变量，然后根据需要引用它们，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:15:34.920

是的，您可能只需将您的 CSS 直接放入您的代码中，只需添加：

```
<style type="text/css" media="screen">
(...) you generate CSS
<?php print $SDImagePreview; ?>
</style> 
```

如果是用于缓存的外部 .css 文件，CSS 加载速度最快，但在您的情况下，CSS 需要在 PHP 中生成，因此无法进行缓存。如果您想更改其他 .css 文件已经定义的 CSS 规则，请将其放在后面。

# svn - 我可以将现有的 Subversion/Jenkins 环境迁移到 Cloudbees 吗？

> ID：12752984
> 
> 赞同：1
> 
> 时间：2012-10-05T19:40:05.607
> 
> 标签：svn, jenkins, cloudbees

我们有一个现有的自托管 Subversion 存储库和 Jenkins 服务器，我们正在考虑迁移到 CloudBees。

*   是否可以迁移维护所有历史记录**和用户名**的 Subversion 存储库？任何关于如何顺利做到这一点的建议都值得赞赏。
*   是否可以迁移我们现有的 Jenkins 作业配置和历史记录？如果是这样，提示appeated。
*   Beta 版[客户提供的执行](https://developer.cloudbees.com/bin/view/DEV/Customer+Provided%20Slaves)器功能的工作情况如何，正如我们所需要的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:20:06.443

此处介绍了 Subversion 迁移：

[http://developer.cloudbees.com/bin/view/DEV/Subversion+-+Importing+a+repository](http://developer.cloudbees.com/bin/view/DEV/Subversion+-+Importing+a+repository)

这里有一篇文章涵盖了更改作者 - [有没有办法通过整个存储库历史记录更改 SVN 用户用户名？](https://stackoverflow.com/questions/1195339/is-there-a-way-to-change-a-svn-users-username-through-the-entire-repository-hist)

此外 - 如果您订阅 CloudBees Pro（或更高）层，那么我们可以为您加载一个干净的转储文件并在此过程中节省大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:26:19.623

*   颠覆迁移是可能的，即使我不记得确切的技术过程，我们（cloudbees）为一些客户做了
*   迁移作业配置和历史记录也是可能的。最简单的方法是压缩您的“工作”目录并将其发送
*   客户提供的 slaves 已经测试了 3 个月，并被大量的 beta 测试人员使用。我不确定它什么时候会被认为是 GA，但我对这个功能非常有信心。

# javascript - 将全局变量传递给Javascript中的事件回调函数？

> ID：12752985
> 
> 赞同：1
> 
> 时间：2012-10-05T19:40:14.127
> 
> 标签：javascript, node.js, scope, eventemitter

在下面的代码中，我试图`mydata`传递给回调。这是我遇到的一个更大问题的示例问题。我假设这是一个范围问题。我的代码有什么问题和/或我应该怎么做？

```
var EventEmitter = require('events').EventEmitter;
var myevent      = new EventEmitter();
var mydata       = 'my data!';

function myfunc (data, mydata) {
  console.log(data);
  console.log(mydata);
};

myevent.on('data', function(data, mydata) {myfunc(data,mydata)});

myevent.emit('data', "data!"); 
```

返回：

```
data!
undefined 
```

我希望它返回：

```
data!
my data! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:43:56.730

回调的参数`mydata`列表中的参数隐藏了同名的全局变量。

由于您在该位置未传递任何参数，因此其值为`undefined`.

任何一个：

1.  更改参数的名称，或
2.  删除参数，或
3.  通过所需的值，例如`myevent.emit('data', "data!", mydata);`

ps：

```
myevent.on('data', function(data, mydata) {myfunc(data,mydata)}); 
```

最好写成：

```
myevent.on('data', myfunc); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T19:52:54.970

我将做一个疯狂的猜测（因为我不熟悉`EventEmitter`）并说`emit`的第一个参数是事件的名称，其余参数传递给处理程序。

如果是这种情况，您不会将任何内容传递给第二个回调参数，这就是它以`undefined`. 试试这个：

```
myevent.emit('data', "data!", "mydata!"); 
```

注意：我忽略了您的阴影问题，因为它与问题无关，只是一种不好的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T19:55:17.303

修改后的代码：您可以访问全局变量。从您不需要将其作为参数传递的任何地方。即使你传递一个参数。您可以使用访问全局变量，`window.mydata` 因为您使用的是 nodejs 您可以使用访问全局变量`global.mydata`

```
var EventEmitter = require('events').EventEmitter;
var myevent      = new EventEmitter();
var mydata       = 'my data!';

function myfunc (data) {
  console.log(data);
  console.log(mydata);
};

myevent.on('data', myfunc);

myevent.emit('data', "data!"); 
```

# css - css ie/FF 与 chrome 完全不同

> ID：12752990
> 
> 赞同：1
> 
> 时间：2012-10-05T19:40:30.727
> 
> 标签：css, html, internet-explorer

我刚刚完成了我的投资组合网站，这是我第一次尝试使用 html5，它在 Chrome 中看起来很棒。但是当我在 IE 和 FF 中测试它时，除了 IE9 之外，还有一些主要的差异都出现在标题中。我认为这是因为标题具有固定的位置。我这样做是因为菜单。我创建了一个寻呼机，如果我没有将位置设置为固定，当您单击菜单项时菜单就会消失。

第二个错误是使用 IE 时，所有图像都有蓝色边框，Chrome 上不会出现。

第三个错误是标题中的字体也与 IE 不同。我使用了@font-face 字体。

我的 HTML 和 CSs 代码在 W3C 上验证。

您可以在[www.nathaliedehertogh.be找到该网站](http://www.nathaliedehertogh.be)

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:45:13.937

您需要在标题中清除以允许内容按照需要流动。

IE 的蓝色边框只需要一个 CSS 设置：

```
img {
  border: 0;
} 
```

至于字体，有些字体在 IE 中无法正确读取。我得到的错误是：

@font-face 未能通过 OpenType 嵌入权限检查。权限必须是可安装的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:46:13.720

您没有在您的 div 'kopregel' 中定义高度。这会导致问题，因为您在其中定义了高度的元素。

注意：我看到它在 FF 中都被破坏了，东西正在向右移动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:46:50.363

您需要做的就是将 clear:both 添加到#menu，并将border:0 添加到 img。

在某些浏览器中，蓝色轮廓是默认的，以显示图像是链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:44:23.080

您的标头的问题是您需要`clear`css 中的功能。

这是新的和编辑的代码。

```
#content, hr {
    clear: left;
    margin-left: auto;
    margin-right: auto;
    width: 80%;
} 
```

固定位置没有问题，这只是一个常见问题，希望这有助于让我知道！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T05:27:10.070

Chrome 与 IE 的另一个主要区别，请查看 [http://technofizzle.blogspot.in/2013/04/chrome-and-ie-display-image-completely.html](http://technofizzle.blogspot.in/2013/04/chrome-and-ie-display-image-completely.html)

# c++ - 什么样的 C++ 常量/宏是 -1.#IND？

> ID：12752991
> 
> 赞同：1
> 
> 时间：2012-10-05T19:40:31.953
> 
> 标签：c++, function, math, pow

数学“pow”函数返回 -1.#IND。-1.#IND 是什么类型的错误值，如何检测 if 语句中的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T19:45:12.747

`-1.#IND`是Windows上[NaN](http://en.wikipedia.org/wiki/NaN)的文本表示。

您可以使用这个小函数检查浮点值是否为 NaN：

```
// NaN never compares equal, not even to itself
bool is_nan(double d){ return d != d; } 
```

（正如@chris 所说，如果你有一个符合 C++11 的标准库，你可以[`std::isnan`](http://en.cppreference.com/w/cpp/numeric/math/isnan)进入`<cmath>`。）

在正常的程序流程中，只要您对数学输入进行健全检查，就不必担心 NaN。当然，你也可以换一种方式，只做数学计算，然后检查 NaN。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T19:53:00.590

您看到的值是表示*NaN*或*不是数字*。这些值显示为具有未定义值的浮点运算的结果。例如，`0.0 / 0.0`将产生一个 NaN。还有许多其他情况会产生 NaN。如果要确定浮点值是否为 NaN，可以对其进行测试：

```
if (std::isnan(value)) {
    ...
} 
```

作为浮点运算的结果，很少有其他特殊值可以产生，例如，正无穷或负无穷大，并且也有`<cmath>`针对这些的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:17:39.297

-1#IND 通常在代码中某处有 /0 时发生。通过使用 -ve 指数检查 0 的 pow 函数中的所有分母或基数来防止它。

完成除法或 pow 操作后，如果您没有检查输入，请使用以下命令检查输出：

```
if (output != output)  return 0; // or some default
else                   return output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T21:22:38.163

`-1.#IND`是 NaN，而不是数字。NaN 的出现有很多原因。0.0/0.0 等表达式是不确定的；如果你尝试，你会得到一个 NaN。-1（或任何负实数）的平方根是纯虚数；使用 float 或 double`sqrt`函数，你会得到一个 NaN 结果。这里的结果不是不确定的，但也不是真实的。这是一个NaN。

另一种表达方式`sqrt(-1.0)`是`pow(-1.0, 0.5)`。这也会生成一个 NaN。

# java - 在用户定义的 LinkedList 中创建推送和弹出方法

> ID：12752996
> 
> 赞同：3
> 
> 时间：2012-10-05T19:41:08.603
> 
> 标签：java, linked-list, stack

最近，我班一直在学习ArrayLists和LinkedLists。上周我们收到了一个任务，要求我们在 LinkedList 堆栈类中创建 push 和 pop 方法。我了解堆栈背后的逻辑，因此它是后进先出的，但我在实际代码中遇到了麻烦。我对计算机科学相当陌生（这是我的第二门课程），这个特殊的任务确实让我把头发拔了出来。我已经上交了这个作业，但我们下周有期中考试，我想好好完成它。我一直在网上和我的教科书上寻求帮助，但没有。我的教授只把我介绍给助教，助教只关心帮助我处理逻辑，而不是实际的代码。我将在下面发布教授给我的说明以及到目前为止的代码。

**来自教授：**

使用以下 Java 文件中给出的模板实现堆栈：

CS401StackInterface.java CS401StackLinkedListImpl.java

```
public interface CS401StackInterface<E>
{
   /**
    * Get the top element on the stack.
    * 
    * @return the first element on the stack.
    */
   public E pop();

   /**
    * Adds an element on the top of the stack.
    * 
    * @param e - The element to be added to the stack.
    */
   public void push(E e);

   /**
    * Determines the number of elements in this data structure.
    * 
    * @return the number of elements currently resident in this
    *         data structure.
    */
   public int size();
} 
```

这是我尝试定义方法的实际类：

```
public class CS401StackLinkedListImpl<E> implements CS401StackInterface<E> 
{
    private LinkEntry<E> head;
    private int num_elements;

    public CS401StackLinkedListImpl()
    {
        head = null;
        num_elements = 0;
    }

    public void setElement(LinkEntry<E> anElement){
        head = anElement;
    }

    /*Append the new element to the end of the list*/
    public void push(E e)
    {
        LinkEntry<E> temp = new LinkEntry<E>();
        temp.element = e;
        temp.next = head;
        head = temp;
    }

    /*Remove the most recently pushed element at the end of the list*/
    public E pop()
    {
        head.next = head;
        num_elements--;
        return (E) head;
    }

    public int size()
    {
        LinkEntry<E> temp = new LinkEntry<E>();
        for (temp = head; head != null; head = head.next)
            num_elements++;
        return num_elements;
    }

    public String toString()
    {
        String string = "";
        LinkEntry<E> temp = new LinkEntry<E>();
        for (temp = head; temp != null; temp = temp.next)
        {
            string += temp.element.toString() + "";
        }
        return string;
    }

/* ------------------------------------------------------------------- */
/* Inner classes                                                      */
    protected class LinkEntry<E>
    {
        protected E element;
        protected LinkEntry<E> next;

        protected LinkEntry() { element = null; next = null; }
    }
} 
```

最后，这是我测试方法的主要课程：

```
import java.util.*;

public class App {

    public static <E> void main(String[] args) {

        CS401StackLinkedListImpl<String> my_stack = new CS401StackLinkedListImpl<String>();
        my_stack.push("Brian");
        my_stack.push("Chris");
        my_stack.push("Joe");
        System.out.println("Stack size: " + my_stack.size());
        my_stack.pop();
        System.out.println("Stack size: " + my_stack.size());
        my_stack.toString();
    }

} 
```

当我运行我的主类时，这就是它返回的内容：

```
Stack size: 3
Exception in thread "main" java.lang.NullPointerException
    at week6.CS401StackLinkedListImpl.pop(CS401StackLinkedListImpl.java:30)
    at week6.App.main(App.java:66) 
```

我遇到的所有事情都只是告诉我创建一个新堆栈，这很容易，因为我不必担心代码的“内部”，但这不是我需要的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:56:07.660

问题出在你的`size`方法上。它破坏了 的值，`head`因此它是`null`。然后你的电话会`pop`得到一个 NPE。

您也有变量初始化的问题 -`num_elements`每次调用都会增加`size`. 您可以通过增加调用的变量来简化这一点`push`。

如果使用的话，你`setElement`也会破坏你的堆栈，因为它只是设置`head`，而不修补下一个指针。

抱歉，我看到这是在家庭作业中上交的......所以这里有一些更正代码的具体方法：

```
public CS401StackLinkedListImpl()
{
    head = null;
    num_elements = 0;
}

public void setElement(LinkEntry<E> anElement)
{
    if (head != null)
        anElement.next = head.next; //New top-of-stack needs to point to next element, if any
    else
        anElement.next = null;
    head = anElement;
}

/*Append the new element to the end of the list*/
public void push(E e)
{
    LinkEntry<E> temp = new LinkEntry<E>();
    temp.element = e;
    temp.next = head;
    head = temp;

    num_elements++; // Increase number of elements count here
}

/*Remove the most recently pushed element at the end of the list*/
public E pop()
{
    E result = head.element; // Save return value of TOS
    head = head.next; // Corrected POP action
    num_elements--;
    return result;
}

public int size()
{
    //Remove below since count is kept accurate with push/pop methods
    //LinkEntry<E> temp = new LinkEntry<E>();
    //for (temp = head; head != null; head = head.next)
    //    num_elements++;
    return num_elements;
} 
```

`pop`如果没有元素，您可能希望添加一个附加检查以引发比 NPE 更好的异常，例如：

```
if (head == null)
    throw new StackUnderflowException(); // and define a StackUnderflowException; or use a standard exception with a message 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:01:53.330

```
/*Append the new element to the end of the list*/
public void push(E e)
{
    LinkEntry<E> temp = new LinkEntry<E>();
    temp.element = e;
    temp.next = head;
    num_elements++;//Increment count<--- Correction
    head = temp;
}

/*Remove the most recently pushed element at the end of the list*/
public E pop()
{
    E returnValue =head.element ;<--- Correction
    head=head.next;<--- Correction
    num_elements--;//Decrement count
    return  returnValue;
}

public int size()
{
   return num_elements;<--- Correction
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:49:50.033

```
public void push(E e) 
```

好像没问题。

```
public E pop() 
```

看起来不太好：您分配给`head.next`元素本身，这会创建一个循环。然后你返回实际的`head`. 您应该首先将当前头保存在某处，然后更新`head`对下一个元素的引用并返回前一个头。

```
public int size() 
```

方法是错误的：首先你实例化一个无用的元素，`temp`但你不需要它（因为你将在循环中使用 temp 并且你应该将它初始化为 current `head`。然后检查你的 for 循环：你正在`head`使用循环迭代结束时的停止条件。你不应该使用`head`，因为你只是在列表上迭代而不是修改它，而只是`temp`（检查你的`toString`代码是否正确）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:53:42.150

查看代码，您的 Pop 方法似乎是倒退的。

在您的 push 方法中，您将当前的*head*元素分配给新 LinkEntry 的 'next' 属性，然后将其设为新的 head。因此，当您将项目从列表中弹出时，您需要将“下一个”元素分配回列表的*头部*。所以你的代码，即：

```
head.next = head; 
```

应该：

```
LinkEntry<E> toReturn = head;
head = head.next;
return toReturn.element; 
```

实际上，您将*头*引用克隆到堆栈顶部的当前项（以便您可以返回它），然后移动*头*引用以指向堆栈中的下一项

# ant - Gradle：如何定义依赖于 ant 目标的任务

> ID：12752997
> 
> 赞同：3
> 
> 时间：2012-10-05T19:41:09.640
> 
> 标签：ant, gradle, taskdef

嗨，如果我列出所有带有任务的`gradle testGradle`任务 - 我看到所有导入的 ant 任务，但是当我尝试创建依赖于 ant 任务的任务时，我得到“无法确定任务'：testGradle'的依赖关系”。

有问题的那一行：`task testGradle(dependsOn: 'init' )`- 它显然没有看到 ant init 任务。

我做错了什么？

## 构建.gradle

```
println "this will always runs  first"
task buildM << {
  println "Importing ..."
  ant.importBuild  'build.xml'
  println "Done importing"
}

task testGradle(dependsOn : init ) << {
  println tasks.getByPath('init').path
} 
```

## 全部完成任务

## 其他任务

all compile - 编译主源代码树 java 文件

```
deploy - deploy WAR file
**init** - Prepare for running compiling artifacts
.... 
```

byWorld5 copyTestConfiguration - 复制单元测试配置 deployLoggerProperties - 将 logging.properties 部署到 tomcat execMoped importTasks install - 在 Tomcat 列表中安装应用程序 - 列出 Tomcat 应用程序 init - 准备运行编译工件 reload - 在 Tomcat 中重新加载应用程序 start - 启动 Tomcat 应用程序 stop - 停止 Tomcat应用程序测试 - 运行 junit 测试 编译 - 编译主源代码树 java 文件

```
init - Prepare for running compiling artifacts 
```

## **> 毕业-v**

## 摇篮 1.1

Gradle 构建时间：2012 年 7 月 31 日星期二下午 1:24:32 UTC Groovy：1.8.6 Ant：Apache Ant(TM) 版本 1.8.4 编译于 2012 年 5 月 22 日 Ivy：2.2.0 JVM：1.6.0_24（Sun Microsystems Inc. 20.0-b12) 操作系统：Linux 2.6.32-220.23.1.el6.x86_64 amd64

**>gradle -c**

org.gradle.api.GradleScriptException：评估根项目“moped_gradle”时出现问题。在 org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:54) 在 org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:127) 在 org.gradle.configuration.BuildScriptProcessor .evaluate(BuildScriptProcessor.java:38) 在 org.gradle.configuration.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:43) 在 org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:463) 在 org. org.gradle.configuration.ProjectEvaluationConfigurer.execute(ProjectEvaluationConfigurer.java:23) 在 org.gradle.configuration 的 gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:75)。在根项目“moped_gradle”上。在 org.gradle.api.internal.AbstractDynamicObject.propertyMissingException(AbstractDynamicObject.java:43) 在 org.gradle.api.internal.AbstractDynamicObject.getProperty(AbstractDynamicObject.java:35) 在 org.gradle.api.internal.CompositeDynamicObject.getProperty (CompositeDynamicObject.java:60) 在 org.gradle.groovy.scripts.BasicScript.propertyMissing(BasicScript.java:70) 在 build_62g86rvs7k0vqsu3ssgdsrobsc.run(/home/natalik/MyInstalls/moped_gradle/build.gradle:14) 在 org.gradle .groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:52) ... 33 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:28:08.577

必须在配置阶段调用该`ant.importBuild`语句才能工作。我在执行过程中做到了。