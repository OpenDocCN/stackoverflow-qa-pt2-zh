# StackOverflow 问答 15626000-15626999

# android - 第一行或最后一行的 Sqlite NullPointerException

> ID：15626000
> 
> 赞同：1
> 
> 时间：2013-03-25T22:25:03.537
> 
> 标签：android, sqlite, nullpointerexception, cursor

我已经通过空指针和查询帖子搜索了高低，但仍然无法解决这个问题。我正在使用自定义适配器对 ListView 进行充气，然后使用 ItemLongClickListener 将其注册，从而引发上下文菜单。上下文菜单中填充了从数据库中检索到的数据，这些数据使 ListView 膨胀...同样的行数，显然...但是当我查询第一项（为 int id 传入的位置“0”）时，我得到一个例外。但是，如果我在它传入后将其增加一，我会在最后一行得到相同的异常。所有其他行都很好地显示了查询的数据。我可以包含更完整的代码，但我认为我在这里遗漏了一些更基本的东西......有什么想法吗？提前感谢，我的第一个问题——如果我的帖子需要以不同的方式进行，请也告诉我！

```
listview.setAdapter(new MyCustomAdapter(text, image));
listview.setOnItemLongClickListener(new OnItemLongClickListener() {
@Override
public boolean onItemLongClick(AdapterView<?> parent, View strings,
                int position, long id) {
            // showToastMessage("" + position);
            showDialogOnLongClick(position);
            return true;
        }
}); 
```

对话生成器，它调用数据库函数：

```
private void showDialogOnLongClick(int position) {
    Builder alert = new AlertDialog.Builder(this);
    // AlertDialog alert = new AlertDialog.Builder(this).create();
    ArrayList mSelectedItems = new ArrayList();

    ArrayList<String> listInfo = getListInfo(position);

   ...

} 
```

并且，数据库的实际查询：

```
 // Getting single list item data
public ArrayList<String> getListInfo(int id) {
    DatabaseHelper helper = new DatabaseHelper(this);
    database = helper.getReadableDatabase();
    //to increment, or not to increment?
    id++;
    // Cursor cursor =
    // database.rawQuery("SELECT * FROM list_data WHERE _id ='"+ id +"'",
    // null);
    Cursor cursor = database.query("list_data", new String[] { "listTitle",
            "listContent", "dateCreated", "dateModified" }, "_id = " +     id
            + "", null, null, null, null);

    if (cursor != null && (cursor.getCount() > 0))
        cursor.moveToFirst();

    ArrayList<String> result = new ArrayList<String>();
    result.add(cursor.getString(cursor.getColumnIndex("listTitle")));
    result.add(cursor.getString(cursor.getColumnIndex("listContent")));
    result.add(cursor.getString(cursor.getColumnIndex("dateCreated")));
    result.add(cursor.getString(cursor.getColumnIndex("dateModified")));

    return result;
} 
```

日志猫：

```
03-25 15:13:20.113: E/AndroidRuntime(12639): FATAL EXCEPTION: main
03-25 15:13:20.113: E/AndroidRuntime(12639): java.lang.NullPointerException
03-25 15:13:20.113: E/AndroidRuntime(12639):    at com.baked.listanywhere.ActivityMain.showDialogOnLongClick(ActivityMain.java:310) 
```

谢谢参观！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:41:06.193

> 但是当我查询第一项（为 int id 传入的位置“0”）时，我得到了一个异常。

尝试查找 id 为 0 的行很可能会返回一个空游标，SQLite`INTEGER PRIMARY KEY`应该始终大于零。如果您的自定义适配器是 CursorAdapter 则不是通过`position`尝试传递，那么参数 in是当前行的 id。`id``id``onItemClick`

* * *

当 Cursor 为空时，此代码将引发异常，因为您无法从不存在的行中读取数据：

```
if (cursor != null && (cursor.getCount() > 0))
    cursor.moveToFirst();

...
result.add(cursor.getString(cursor.getColumnIndex("listTitle"))); // Exception! 
```

更好的方法是检查结果`moveToFirst()`：

```
if(cursor != null && cursor.moveToFirst()) {
    ...
    result.add(cursor.getString(cursor.getColumnIndex("listTitle")));
} 
```

* * *

至于：

```
java.lang.NullPointerException
    at com.baked.listanywhere.ActivityMain.showDialogOnLongClick(ActivityMain.java:310) 
```

MainActivity 中的第 310 行是什么？

# java - PWC1231 和 PWC6344

> ID：15626002
> 
> 赞同：3
> 
> 时间：2013-03-25T22:25:07.770
> 
> 标签：java, jsp, glassfish-2.x

我有两台在**Glassfish 2.1**上运行的服务器，它们都有相同的网络应用程序。

两次出现这个错误：一些jsp页面停止显示只显示一个空白页面，并且在日志中打印了以下错误...

> PWC1231：servlet jsp 的 Servlet.service() 抛出异常 java.io.FileNotFoundException: /path/to/jsp/file/jsp_file.jsp.java (Permission denied) at java.io.FileOutputStream.open(Native Method) at java .io.FileOutputStream.(FileOutputStream.java:179) 在 org.apache.jasper.compiler.AntJavaCompiler.getJavaWriter(AntJavaCompiler.java:213) 在 org.apache.java.io.FileOutputStream.(FileOutputStream.java:70)。 jasper.compiler.Compiler.generateJava(Compiler.java:173) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:409) 在 org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:470) 在 org.apache.jasper.servlet.JspServlet。service(JspServlet.java:364) at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:411) at org.apache.catalina .core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:855) 在 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:703) 在 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:542 ) 在 org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:366) 在 org.apache.struts.action.RequestProcessor 的 org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:474)。 doForward(RequestProcessor.java:1056) 在 org.apache.struts.tiles.TilesRequestProcessor。doForward(TilesRequestProcessor.java:261) at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:388) at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:316) at org.apache .struts.action.RequestProcessor.process(RequestProcessor.java:231) 在 org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164) 在 org.apache.struts.action.ActionServlet.doPost(ActionServlet.java :415) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:738) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:831) 在 org.apache.catalina.core.ApplicationFilterChain.servletService( ApplicationFilterChain.java:411) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:317) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:198) 在 com.my.app.filtro.FiltroCallcenter.doFilter(FiltroCallcenter.java:90) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain. java:230) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:198) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:288) at org.apache.catalina.core .StandardContextValve.invokeInternal(StandardContextValve.java:271) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:202) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:632) 在com.sun.enterprise 的 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:577)。web.WebPipeline.invoke(WebPipeline.java:94) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:206) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:632)在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:577) 在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:571) 在 org.apache.catalina.core.ContainerBase.invoke (ContainerBase.java:1080) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:632) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:150)。 catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:577) 在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:571) 在 org.apache.catalina.core。ContainerBase.invoke(ContainerBase.java:1080) 在 org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:272) 在 com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:第637章） .sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341) 在 com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263) 在 com.sun.enterprise .web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214) 在 com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:265）在 com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run（SSLWorkerThread.java:106）

**紧随其后的是：**

> PWC6344: 无法为文件 /path/to/jsp/file/jsp_file.jsp.java|#] 创建输出编写器

有时只打印 PWC6344 错误，有时两者都打印，PWC1231 错误后面总是跟着 PWC6344（这有点道理，因为发生 IOException 时会抛出该异常）。

好吧，两次都发生了这个错误，我唯一做的就是停止并启动实例，一切又好了，而且这个错误只发生在其中一个服务器上。

发生了什么事？...或者我如何诊断是什么导致了这种情况，这样我就可以解决问题，而不是永远停止并重新开始...

**更新：**

正如 sbridges 所建议的那样，我正在调查这可能是文件描述符问题，但是！，文件处理程序的最大数量是 811975，其中一个服务器上打开了 4520 个文件，而另一个服务器上只有 6894 个文件处理程序是 359532。

所以，我想可以肯定地说这不是问题！

有人有其他理论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:48:47.200

> PWC6344: 无法为文件 /path/to/jsp/file/jsp_file.jsp.java|#] 创建输出编写器

如果底层操作系统用尽了打开文件进行读取或写入所需的文件处理程序/描述符，也会发生这种情况。我对 CentOS 不是很熟悉，但[Google](http://google.com/search?q=centos%20file%20descriptors)暗示它有一个“相对较低”的限制，即 1024，因为在搜索结果中有很多与之相关的问题。在结果中，您会看到很多关于如何增加它的问题/答案，例如[以下博客](http://pro.benjaminste.in/post/318453669/increase-the-number-of-file-descriptors-on-centos-and)：

> # [在 Centos 和 Fedora Linux 上增加文件描述符的数量](http://pro.benjaminste.in/post/318453669/increase-the-number-of-file-descriptors-on-centos-and)
> 
> 在 CentOS/Fedora/Redhat 上为普通用户增加文件描述符的数量是非常难以学习的。网上有很多不完整的演练，有些有错别字和其他问题。
> 
> 以下是将打开文件描述符限制从 1024（默认值）提高到 65535 的步骤：
> 
> 1.  以 root 身份编辑 /etc/sysctl.conf 并添加以下行：
>     
>     
>     
>     ```
>      fs.file-max = 512000 
>     ```
>     
>     
> 2.  在 bash 提示符下，运行：
>     
>     
>     
>     ```
>      $ sysctl -p 
>     ```
>     
>     
>     
>     这将导致设置生效。您也可以`cat 512000 > /proc/sys/fs/file-max`，但可能会在重新启动时重置。
>     
>     
> 3.  编辑 /etc/security/limits.conf 并添加以下内容：
>     
>     
>     
>     ```
>      * - nofile 65535 
>     ```
>     
>     
>     
>     如果您愿意，请参阅内联注释以了解有关其作用以及如何使其更具限制性的更多详细信息。
>     
>     
> 4.  以 root 身份运行
>     
>     
>     
>     ```
>      $ ulimit -n 65535 
>     ```
>     
>     
>     
>     并确保您没有错误。要仔细检查，请运行`ulimit -n`并确保响应为 65535。
>     
>     
> 5.  确保为 SSH 打开 PAM 身份验证，否则当您尝试以普通用户身份连接时，您将看不到新的限制。编辑 /etc/ssh/sshd_config 并确保您有：
>     
>     
>     
>     ```
>      UsePAM yes 
>     ```
>     
>     
>     
>     `/sbin/service sshd restart`如果您进行了任何更改，请重新启动 SSH 。
>     
>     
> 6.  使用新的 SSH 会话和 shell 以普通用户身份登录并运行：
>     
>     
>     
>     ```
>      $ ulimit -n 65535 
>     ```
>     
>     
>     
>     再次运行`ulimit -n`检查并祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:42:44.060

看起来权限设置不正确，无法将编译好的jsp页面写入​​磁盘，

```
/path/to/jsp/file/jsp_file.jsp.java (Permission denied) 
```

该目录/文件的权限是否正确？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:57:50.857

重命名`jsp_file.jsp.java`为`jsp_file.jsp`.

# mysql - mysql比较2行同一张表

> ID：15626006
> 
> 赞同：0
> 
> 时间：2013-03-25T22:25:18.210
> 
> 标签：mysql

我正在尝试比较 2 行并显示相同的行。我浏览过但找不到正确的解决方案。

表 A

```
Count     status         Division
20          A               1
30          B               2
10          c               1
12          z               1 
```

从上表中我想显示谁的划分是相同的。

```
Count     status         Division
20          A               1
10          c               1
12          z               1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:44:31.057

```
Select * from TableA
Group By Division 
having Count(*) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:30:42.763

尝试这个

```
Select * from TableA 
Group By Division 
Having Count(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T05:21:38.187

在这里我使用了case语句，它对我有用

选择 CompanyCode ,'Commission Pec', Year ,sum(当 CommissionType='Commission Recevied' 然后 JAN else 0 end)/sum(当 CommissionType='Net Payments from WM' and isnull(JAN,0)<>0 then JAN else 1 end) 来自 Commission_Consolidate

按公司代码、年份分组

结尾

# ruby-on-rails - 拆分 gem 仪表板操作不起作用

> ID：15626007
> 
> 赞同：0
> 
> 时间：2013-03-25T22:25:22.580
> 
> 标签：ruby-on-rails, rubygems, ab-testing

尝试在 Split gem 中重置实验以进行 a/b 测试时，我不断收到服务器错误：

```
NoMethodError at /_split/reset/listing_headline
undefined method `reset' for nil:NilClass
file: dashboard.rb location: block in <class:Dashboard> line: 31 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:04:37.710

也许不是您的情况，但是当有人使用符号而不是字符串作为测试名称时，我已经看到了这一点。

示例：不要使用：

:myTest => {}

利用：

```
"myTest" => {
  :alternatives => [
    { :name => 'default', :percent => 50 },
    { :name => 'alt', :percent => 50 },
  ],
  :resettable => false
  :metric => :lead,
} 
```

# sql - 来自 SQL 的多个 Bing 地图图钉未在 Firefox 和 Chrome 中显示，但在 IE 中显示

> ID：15626010
> 
> 赞同：1
> 
> 时间：2013-03-25T22:25:26.227
> 
> 标签：sql, json, bing-maps, pushpin, webmatrix-2

我在我的 Webmatrix2 网站中显示了一个 Bing 地图 (v7)，其中包含使用 JSON 查询从 SQL Express 数据库中提取的一系列图钉和信息框。

虽然地图出现在我正在测试的所有 3 个浏览器（IE、FF 和 Chrome）中，但图钉有时不会在 FF 和 Chrome 中显示，尤其是当我使用 Cntrl+F5 刷新时

这是我的第一个 JSON 和 Bing 地图应用程序，所以预计会有一些错误。

关于如何改进代码并获得显示一致性的任何建议？

```
 @{
    Layout = "~/_MapLayout.cshtml";
}

 <script type="text/javascript" src="~/Scripts/jquery-1.9.1.min.js"></script>           
 <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
 <link rel="StyleSheet" href="infoboxStyles.css" type="text/css"> 
<script type="text/javascript">

    var map = null;
    var pinLayer, pinInfobox;
    var mouseover;
    var pushpinFrameHTML = '<div class="infobox"><a class="infobox_close" href="javascript:closeInfobox()"><img src="/Images/close2.jpg" /></a><div class="infobox_content">{content}</div></div><div class="infobox_pointer"><img src="images/pointer_shadow.png"></div>';
    var pinLayer = new Microsoft.Maps.EntityCollection();
    var infoboxLayer = new Microsoft.Maps.EntityCollection();

    function getMap() {
        map = new Microsoft.Maps.Map(document.getElementById('map'), {
            credentials: "my-key",
            zoom: 4,
            center: new Microsoft.Maps.Location(-25, 135),
            mapTypeId: Microsoft.Maps.MapTypeId.road
        });
        pinInfobox = new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0, 0), { visible: false });
        AddData();

    }

    $(function AddData() {
        $.getJSON('/ListSchools', function (data) {
            var schools = data;
            $.each(schools, function (index, school) {
                for (var i = 0; i < schools.length; i++) {
                    var pinLocation = new Microsoft.Maps.Location(school.SchoolLat, school.SchoolLon);
                    var NewPin = new Microsoft.Maps.Pushpin(pinLocation);

                    NewPin.title = school.SchoolName;
                    NewPin.description = "<a href=SchoolDetails?searchschool=" + school.SchoolID + ">-- Learn More --</a>";
                    pinLayer.push(NewPin); //add pushpin to pinLayer
                    Microsoft.Maps.Events.addHandler(NewPin, 'mouseover', displayInfobox);
                }
            });
            infoboxLayer.push(pinInfobox);
            map.entities.push(pinLayer);
            map.entities.push(infoboxLayer);
        });
    })

    function displayInfobox(e) {
        if (e.targetType == "pushpin") {
            var pin = e.target;
            var html = "<span class='infobox_title'>" + pin.title + "</span><br/>" + pin.description;

            pinInfobox.setOptions({
                visible: true,
                offset: new Microsoft.Maps.Point(-33, 20),
                htmlContent: pushpinFrameHTML.replace('{content}', html)
            });

            //set location of infobox
            pinInfobox.setLocation(pin.getLocation());
        }
    }

    function closeInfobox() {
        pinInfobox.setOptions({ visible: false });
    }

    function getCurrentLocation() {
        var geoLocationProvider = new Microsoft.Maps.GeoLocationProvider(map);
        geoLocationProvider.getCurrentPosition();
    }

  </script>

<body onload="getMap();">
<div id="map"  style="position:relative; width:800px; height:600px;"></div>
     <div>
         <input type="button" value="Find Nearest Schools" onclick="getCurrentLocation();" />
      </div>
</body> 
```

JSON文件很简单

```
@{
    var db = Database.Open("StarterSite");    
    var sql = @"SELECT * FROM Schools WHERE SchoolLon !=  ' ' AND  SchoolLon != 'null' ";
    var data = db.Query(sql);
    Json.Write(data, Response.Output);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T11:57:38.720

在调用 AddData 函数之前添加您的 pinLayer、infobox 和 infoboxLayer，看看是否有区别。还要验证 school.SchoolLat 和 school.SchoolLon 是数字，而不是数字的字符串版本。如果它们是字符串，则使用 parseFloat 将它们转换为数字。除此之外一切看起来都很好。

# macos - 如何使用 XCode 4.6 和 OS X 10.8 设置 SDL2

> ID：15626012
> 
> 赞同：4
> 
> 时间：2013-03-25T22:25:40.647
> 
> 标签：macos, xcode4, sdl, osx-mountain-lion

有没有人有任何指南或信息如何使用 MAC OS X 10.8 和 XCode 4.6 或更高版本设置 SDL2。

我设法构建了 SDL2 并假设拥有我需要的所有文件。我应该在哪里放置我的库文件并设置 XCode 项目以便能够构建和运行一个简单的示例？

详细解释将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T08:11:34.687

1.  [从此处](http://libsdl.org/download-2.0.php)从 ework 下载最新的 SDL （向下滚动到“开发库”）。
2.  将`SDL2.framework`捆绑包复制到`/Library/Frameworks`（可能需要 root 权限）
3.  如果 XCode 由于代码签名问题而崩溃，请从终端运行：`codesign -f -s - /Library/Frameworks/SDL2.framework/SDL2`
4.  在 XCode 中创建一个 Cocoa 项目。
5.  去除多余的文件和框架，如下图所示：
6.  在侧边栏顶部选择项目名称，然后在主窗格中选择“构建设置”。将“预编译前缀头”设置为“否”。清除“前缀标题”设置中的路径，将该设置留空。
7.  展开项目目标抽屉，然后选择测试目标并单击“-”按钮。出现提示时，确认您确实要删除此目标。
8.  添加 SDL 框架包：您将看到`SDL2.framework`. 添加它。
9.  从左侧边栏中选择项目，然后为您的应用目标选择“构建阶段”。单击“复制捆绑资源”下的“+”按钮，然后选择`SDL2.framework`添加。
10.  填写`main.c`以下代码：
11.  编译并使用`Command`+运行`R`。如果一切正常，您将`SDL_Init success!`在 Xcode 的下部窗格中看到输出。

![多余的文件](../Images/4679d7e2fea2232b7874c2d563cb7969.png) ![多余的图书馆](../Images/834a28312d1d2c23ec58f57ebd2edadb.png)

```
#include <SDL2/SDL.h>

int main(int argc, const char * argv[]){
    if(SDL_Init(SDL_INIT_EVERYTHING) != 0) {
        puts("SDL_Init error");
        return -1;
    }
    else {
        puts("SDL_Init success!");
        return 0;
    }
} 
```

资料来源：[Mavericks OS X 上的 SDL2](http://joseph-long.com/writing/sdl-and-os-x/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:33:51.077

我让它工作了。对于任何有同样问题的人，请看看这个视频。

[http://www.youtube.com/watch?v=0EuT_61SHJE](http://www.youtube.com/watch?v=0EuT_61SHJE)

谢谢

# plugins - Sublime Text 2 的更新包

> ID：15626015
> 
> 赞同：3
> 
> 时间：2013-03-25T22:25:59.963
> 
> 标签：plugins, package, sublimetext2

我为 sublime text 2 编写了一个包 ( [LoremIpsum](https://github.com/billymoon/LoremIpsum) )，并将其提交到包控制列表。它运行良好，我可以看到有 10K+ 人安装了该软件包（在[社区软件包列表中](http://wbond.net/sublime_packages/community)）。我现在已经更新了，不知道怎么通知包控制列表。

最初，我分叉了包控制列表，添加了我的包，然后发送了一个拉取请求。我现在不能这样做，因为我没有对列表进行任何更改 - 我只需要通知它我的包已经更新（或者我更新了吗？这会以某种方式自动发生吗？）

我应该怎么做才能使我的更新版本的包可用？我如何检查是否发布了正确的版本 - 并且可以访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:33:48.340

你不必做任何事情。包控制将从您的存储库中获取最新的。虽然如果你添加了一个自定义 packages.json 文件，你也需要更新它。

此外，在社区软件包列表中，您可以查看版本日期（在撰写本文时为 v2013.01.20.07.51.55）。当它“更新”时，版本号将被更新。

编辑：旁注，您应该将 *.pyc 添加到您的 .gitignore

# iphone - 奇怪的 UITableView 行为

> ID：15626016
> 
> 赞同：0
> 
> 时间：2013-03-25T22:26:00.183
> 
> 标签：iphone, ios, objective-c

请看一下图像。![具有单元格位移的 UITable](../Images/d099bca155649154624571ae6dc1b799.png)

我有一个带有自定义单元格和 2 个部分的 UITableView。一旦 UITableView 填充了足够多的单元格，它们都无法在屏幕上显示，最后一部分中的最后一个单元格将出现在屏幕的最顶部。该单元格甚至不应该在 UITableView 中可见，因为它是最后一个单元格，并且它完全出现*在外面*UITableView，在屏幕的顶部。我什至不知道从哪里开始在我的代码中寻找这个问题。我只创建了几个 UITableViews，所以我绝对不是这个错误的所有潜在原因的专家。Table是通过IB设置的，初始化代码在viewWillAppear中，虽然设置代码不多。我目前正在阅读 UITableView 的 scrollView 以及 contentInset 以查看是否有对此行为的解释。有没有人遇到过这样的错误？我觉得它足够独特，可能不需要梳理我所有的代码来确定。无论如何，我将在下面发布相关代码。谢谢您的帮助！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{

    NSString *uniqueIdentifierForPlayerCell = @"customPlayerCell";

    //Initialize PlayerTableViewCell and set it's properties
    PlayerTableViewCell *playerCell = nil;
    playerCell = (PlayerTableViewCell *)[tableView dequeueReusableCellWithIdentifier:uniqueIdentifierForPlayerCell];

    if (playerCell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"PlayerTableViewCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects) {
            if([currentObject isKindOfClass:[PlayerTableViewCell class]]) {
                playerCell = (PlayerTableViewCell *)currentObject;
                break;
            }
        }
    }
    playerCell.textLabel.opaque = NO;
    playerCell.textLabel.textColor = self.textColor;
    playerCell.textLabel.font = [UIFont systemFontOfSize:18.0];
    playerCell.textLabel.backgroundColor = [UIColor clearColor];
    playerCell.selectionStyle = UITableViewCellSelectionStyleNone;
    playerCell.accessoryButton.hidden = YES;
    playerCell.reorderButton.hidden = YES;

    NSString *uniqueIdentifierForAlleyCell = @"customAlleyCell";

    //Initialize AlleyTableViewcell and set it's properties
    AlleyTableViewCell *alleyCell = nil;
   alleyCell = (AlleyTableViewCell *)[tableView     dequeueReusableCellWithIdentifier:uniqueIdentifierForAlleyCell];

    if (alleyCell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"AlleyTableViewCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects) {
            if([currentObject isKindOfClass:[AlleyTableViewCell class]]) {
                alleyCell = (AlleyTableViewCell *)currentObject;
                break;
            }
        }
    }

    alleyCell.textLabel.opaque = NO;
    alleyCell.textLabel.textColor = self.textColor;
    alleyCell.textLabel.font = [UIFont systemFontOfSize:18.0];
    alleyCell.textLabel.backgroundColor = [UIColor clearColor];
    alleyCell.selectionStyle = UITableViewCellSelectionStyleNone;
    alleyCell.accessoryButton.hidden = YES;
    alleyCell.deleteButton.hidden = YES;

//Alternate background colors for each section where section 0 is Alley section and section 1 is Player section. Stores the RGB values of the specific background color to the specific cell for future use
if(indexPath.section == 0 && (indexPath.row %2 == 0)) {
    alleyCell.contentView.backgroundColor = self.backgroundColor;
    alleyCell.isRed = 95.0/255.0;
    alleyCell.isGreen = 94.0/255.0;
    alleyCell.isBlue = 94.0/255.0;
    self.alleyField.backgroundColor = self.backgroundColor;
}
else if(indexPath.section == 0 && (indexPath.row %2 == 1)){
    alleyCell.contentView.backgroundColor = self.alternateColor;
    alleyCell.isRed = 92.0/255.0;
    alleyCell.isGreen = 92.0/255.0;
    alleyCell.isBlue = 92.0/255.0;

    self.alleyField.backgroundColor = self.alternateColor;
}
else if(indexPath.section == 1 && (indexPath.row %2 == 0)) {
    playerCell.contentView.backgroundColor = self.backgroundColor;
    playerCell.isRed = 95.0/255.0;
    playerCell.isGreen = 94.0/255.0;
    playerCell.isBlue = 94.0/255.0;

    self.playerField.backgroundColor = self.backgroundColor;
}
else if(indexPath.section == 1 && (indexPath.row %2 == 1)) {
    playerCell.contentView.backgroundColor = self.alternateColor;
    playerCell.isRed = 92.0/255.0;
    playerCell.isGreen = 92.0/255.0;
    playerCell.isBlue = 92.0/255.0;

    self.playerField.backgroundColor = self.alternateColor;
}

//If Alley array is empty, add alley TextField and return cell
if(indexPath.section == 0) {
    if([self.allAlleys count] == 0) {
        [alleyCell addSubview:self.alleyField];
        self.alleyField.text = nil;
        return alleyCell;
    }
    //Else set the alley name to the nameLabel text and return cell
    else {
        if(indexPath.row < [self.allAlleys count]) {
            alleyCell.textLabel.text = [self.allAlleys objectAtIndex:indexPath.row];
            if([alleyCell.textLabel.text isEqualToString: self.selectedAlley]) {
                alleyCell.accessoryButton.hidden = NO;
            }
            else {
                alleyCell.accessoryButton.hidden = YES;
            }
            return alleyCell;
        }
        //Add alley TextField to the last cell of the UITableView and return cell
        else {
            [alleyCell addSubview:self.alleyField];
            self.alleyField.text = nil;
            return alleyCell;
        }
    }
}
//If Player array is empty, add Player TextField and return cell
else if(indexPath.section == 1) {
    if([self.bowlrNames count] == 0) {
        [playerCell addSubview:self.playerField];
        self.playerField.text = nil;
        return playerCell;
    }
    //Else set the Player name to the nameLabel text and return cell
    else {
        if(indexPath.row < [self.bowlrNames count]) {
            playerCell.textLabel.text = [self.bowlrNames objectAtIndex:indexPath.row];
            for(int i = 0; i < [self.selectedBowlrs count]; i++) {
                if([playerCell.textLabel.text isEqualToString: [self.selectedBowlrs objectAtIndex:i]]) {
                    playerCell.accessoryButton.hidden = NO;
                    playerCell.reorderButton.hidden = NO;
                }
            }
            return playerCell;
        }
        //Add Player textField to the last cell of the UITableView and return cell
        else {
            [playerCell addSubview:self.playerField];
            self.playerField.text = nil;
            return playerCell;
        }
    }
}
}

//Actions for selecting a row in the UITable
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

//If it is in the Alley section
if(indexPath.section == 0) {

    //If the selected cell is the same as the last selected cell
    if(self.lastIndexPathForAlleyCells && indexPath.row == self.lastIndexPathForAlleyCells.row) {
        [tableView beginUpdates];
        self.lastIndexPathForAlleyCells = nil;
        AlleyTableViewCell *previousCell = (AlleyTableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
        //[tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];
        previousCell.selected = NO;
        self.selectedAlley = nil;
        previousCell.accessoryButton.hidden = YES;
        [tableView endUpdates];
        return;
    }

    //Else the selected cell is not the last selected cell

    AlleyTableViewCell *previousCell = (AlleyTableViewCell *)[tableView cellForRowAtIndexPath:self.lastIndexPathForAlleyCells];
    previousCell.selected = NO;
    previousCell.accessoryButton.hidden = YES;
    AlleyTableViewCell *cell = (AlleyTableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    cell.selected = YES;
    cell.accessoryButton.hidden = NO;
    self.selectedAlley = cell.textLabel.text;

    self.lastIndexPathForAlleyCells = indexPath;
    [self.tableView reloadData];

}

else if(indexPath.section == 1) {
    PlayerTableViewCell *cell = (PlayerTableViewCell *)[tableView cellForRowAtIndexPath:indexPath];

    //If player is not already selected
    if([self playerIsSelected:cell.textLabel.text] == NO) {

        //Set selected to YES and reveal buttons
        cell.selected = YES;
        cell.accessoryButton.hidden = NO;
        cell.reorderButton.hidden = NO;

        //If 8 Players are currently selected, UIAlertView informs user they have reached the limit
        if([self.selectedBowlrs count] == 8) {
            NSString *message = @"You can only select up to 8 players";
            UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Max Players Selected" message:message delegate:self cancelButtonTitle:[self okButtonTitle] otherButtonTitles:nil, nil];
            alertView.tag = TAG_FULLGAME;
            [alertView show];
        }
        else {
            //Insert name into selectedBowlrs array
            [self.selectedBowlrs insertObject:cell.textLabel.text atIndex:0];

            //Reorder bowlrNames array
            NSString *bowlrName = [self.bowlrNames objectAtIndex:indexPath.row];
            [self.bowlrNames removeObjectAtIndex:indexPath.row];
            [self.bowlrNames insertObject:bowlrName atIndex:0];

            //Move selected row to top of section
            [self moveIndexPathToTop:indexPath];
        }
    }
    //Else the player is already selected
    else {

        //Set selected to NO and hide buttons
        cell.selected = NO;
        cell.accessoryButton.hidden = YES;
        cell.reorderButton.hidden = YES;

        [self.selectedBowlrs removeObject:cell.textLabel.text];
        [self.bowlrNames removeObject:cell.textLabel.text];
        [self.bowlrNames insertObject:cell.textLabel.text atIndex:[self.selectedBowlrs count]];

        [self moveIndexPathToMiddle:indexPath];

        for(int i = 0; i < [self.selectedBowlrs count]; i++) {
            NSLog(@"%@", [self.selectedBowlrs objectAtIndex:i]);
        }
    }
}
[self performSelector:@selector(reloadData) withObject:nil afterDelay:.25];
}

//Returns the number of rows for each section
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
switch (section) {
        //For Alley section
    case 0:
        //If the array is empty, return 1 row for the Alley Textfield
        if([self.allAlleys count] == 0)
            return 1;
        //Else return the number of elements in the array + 1 for the Alley Textfield
        else
            return [self.allAlleys count] + 1;
        break;
        //For Player section
    case 1:{
        //If the array is empty, return 1 row for the Player Textfield
        if([self.bowlrNames count] == 0)
            return 1;
        //Else return the number of elements in the array + 1 for the Player Textfield
        else
            return [self.bowlrNames count] + 1;
        break;
    }
    default:
        break;
}
return 0;
}

//Set up appearance for section headers
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0, self.tableView.bounds.size.width, 25.0)];
UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectZero];

CGFloat isRed = 84.0/255.0;
CGFloat isGreen = 84.0/255.0;
CGFloat isBlue = 84.0/255.0;

self.headerColor = [[UIColor alloc]initWithRed:isRed green:isGreen blue:isBlue alpha:0.5];

headerLabel.backgroundColor = self.headerColor;
headerLabel.opaque = NO;
headerLabel.textColor = self.textColor;
headerLabel.highlightedTextColor = [UIColor whiteColor];
headerLabel.font = [UIFont systemFontOfSize:18.0];
headerLabel.frame = CGRectMake(0.0, 0.0, self.tableView.bounds.size.width, 25.0);

if (section == 0) {
    [headerView setBackgroundColor:self.backgroundColor];
    headerLabel.text = @"Alley";
    [headerView addSubview:headerLabel];
}
else {
    [headerView setBackgroundColor:self.backgroundColor];
    headerLabel.text = @"Bowlr";
    [headerView addSubview:headerLabel];
}
return headerView;
}

-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {

return YES;
}

//Used to delete row of UITable
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

self.indexPathForEditing = indexPath;

if(editingStyle == UITableViewCellEditingStyleDelete) {

    //For Alley section
    if(indexPath.section == 0) {

        //Set up UIAlertView
        NSString *message = @"Are you sure?";
        UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Delete Alley?" message:message delegate:self cancelButtonTitle:[self cancelButtonTitle] otherButtonTitles:[self deleteButtonTitle], nil];
        alertView.tag = TAG_Alley;
        [alertView show];

    }
    //For Player section
    else if(indexPath.section == 1) {

        //Set up UIAlertView
        NSString *message = @"All information for this Bowlr will be deleted";
        UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Delete Bowlr?" message:message delegate:self cancelButtonTitle:[self cancelButtonTitle] otherButtonTitles:[self deleteButtonTitle], nil];
        alertView.tag = TAG_Player;
        [alertView show];
    }
}
[self performSelector:@selector(reloadData) withObject:nil afterDelay:.25];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:35:33.880

好的，我认为您需要在这里记住两件基本的事情。

(1) 你绝不能将某些东西作为子视图添加到单元格中。仅将其添加到单元格的`contentView`. 这段代码是错误的：`[alleyCell addSubview:self.alleyField];`

(2) 这些单元正在被重复使用。您可能有 100 行但只有 10 个单元格，在用户滚动时不断重复使用。因此，您必须将每个单元格从空状态完全设置，如果它不是处于空状态，则需要将其设置为空状态。如果您在一次传递中将文本字段添加到单元格`cellForRowAtIndexPath`，则必须记住在每隔一次传递中删除文本字段`cellForRowAtIndexPath`，否则文本字段可能会显示在其他行中，因为另一行可能会重复使用相同的单元格。

（另请参阅我的书本部分末尾的讨论：[http](http://www.apeth.com/iOSBook/ch21.html#_the_three_big_questions) ://www.aeth.com/iOSBook/ch21.html#_the_three_big_questions它讨论了忘记重复使用单元格的简单后果。）

此外，我几乎不需要添加框架很重要。您正在添加一个子视图，但我不知道它的框架是什么。使用正确的（意思是错误的）框架值，该子视图可能会出现在单元格之外。另外，您是否使用不同高度的单元格？如果是这样，请记住，因为单元格被重复使用，它的高度可能会改变。因此，自动调整大小行为会导致框架发生变化。

# cplex - GAMS CPLEX 理解 IIS 报告

> ID：15626020
> 
> 赞同：2
> 
> 时间：2013-03-25T22:26:16.203
> 
> 标签：cplex, gams-math

我将 GAMS 与 CPLEX 优化器一起使用。在 CPLEX 优化器中有一个选项“iis”，以便它生成不可约不一致的约束集。如果我将 iis 选项设置为 1（或者我认为是 0 以外的任何值，但我只测试了 0 和 1），则会列出 iis 方程和变量。

但我的问题是这个列表没有以有用或易于使用的方式给出。它不会在作为 IIS 一部分的方程式集中列出特定方程式，而是列出代码中可以找到该方程式的行。但是这条线是由GAMS自己生成的，以这种形式来理解，既不实用也不友好。

例如，我收到一个 iis 报告，其中包含一堆行，每行如下所示：

=E'upper:'445793'<7432。

但我知道可以将所有这些乱七八糟的内容翻译成更用户友好的内容，例如：

Upper: purchase_limit(12385, 972130, t443) < 7432.83

事实上，我以前什至收到过这种格式的结果。但我似乎无法复制这种更友好的格式。

我联系了 GAMS 的支持，但响应很慢，所以我想我会问这个社区。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:04:14.207

好吧，经过 2 天的时间翻阅文档并试图从 GAMS corp 获得帮助后，我终于找到了问题：

正确标记的 iis 是在列表文件（.lst 文件）中生成的，但乱码版本也是在其中生成的列表文件，在文件尾部附近生成，便于查看。

如果有人设置了 iis 标志并在 GAMS 中生成了一个列表文件，请务必通过该文件查找类似“IIS found”的内容。在 .lst 文件中的注释之后不久，您将找到 IIS 方程和变量的列表。

我希望这有助于为其他人节省时间，或者至少为我将来，当我下次再次需要此帮助时。

# kml - 带照片的独立 KMZ

> ID：15626023
> 
> 赞同：2
> 
> 时间：2013-03-25T22:26:45.790
> 
> 标签：kml, arcgis, esri, kmz, self-contained

最初，我在 ArcGIS 10.1 中创建了我的 KMZ 文件，其中包括一些潜在填海地的纬度/经度。最后，我有一个 KMZ 文件，当单击每个地标时，它会弹出一个包含站点描述和照片的信息框。这些照片目前存储在网上，我想让这个 KMZ 文件包含这些照片，以便我的 web 地图更容易发布，它使用 ESRI 的 Javascript API 来访问 KMZ 文件。我已解压缩 KMZ 文件并尝试将图像的绝对 URL 更改为仅文件名，因为所有文件都存储在同一目录中。然后我选择了 KML 文件、我测试过的照片以及我的图标并将它们压缩，将文件类型从 ZIP 更改为 KMZ，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T17:14:58.723

在最后一步中，尝试将它们解压缩，以便 KML 可以直接访问图像 URL。网站访问 KML，KML 指向照片 URL。

# sparql - DBpedia 查询：SnorQL VS SparQL VS QueryBuilder？

> ID：15626024
> 
> 赞同：2
> 
> 时间：2013-03-25T22:26:46.063
> 
> 标签：sparql, dbpedia

什么是[http://dbpedia.org/snorql/](http://dbpedia.org/snorql/)和[http://dbpedia.org/sparql/](http://dbpedia.org/sparql/)和[http://querybuilder.dbpedia.org/](http://querybuilder.dbpedia.org/)？

SnorQL VS SparQL 似乎都类似地运行以下代码：

```
SELECT ?resource ?value
WHERE { 
   ?resource a <http://dbpedia.org/class/yago/CitiesAndTownsInDenmark> .
   ?resource <http://dbpedia.org/property/populationTotal> ?value .
   FILTER (?value > 100000)
}
ORDER BY ?resource ?value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:33:02.933

它们是（不同的）用户界面，可让您在 DBpedia SPARQL 端点[http://dbpedia.org/sparql/](http://dbpedia.org/sparql/)上构建和执行 SPARQL 查询。

结果在所有三个环境中应该是相同的，因为它们使用相同的端点（因此相同的数据）。

# mysql - Magento CSV 导入图像丢失

> ID：15626025
> 
> 赞同：0
> 
> 时间：2013-03-25T22:26:46.623
> 
> 标签：mysql, magento, csv, import, magento-1.7

我通过使用 magento 中的导入/导出工具导出产品来编辑我的产品，导入它们后我遇到了重新索引过程存在问题，我终于修复了。

但是现在我所有的图像都丢失了，并且没有显示在前端，有人可以帮我解决这个问题吗？

/1/_/1_7_138.jpg 是 CSV 图像位置的格式

我还尝试将媒体/类别/产品中的图像移动到媒体/导入，但仍然无法正确显示

我还尝试在媒体文件夹中编辑从 755 到 77 的文件权限，但仍然没有

我也在相应的 SQL 数据库中运行了这个

```
INSERT INTO catalog_product_entity_media_gallery (attribute_id, entity_id, `value`)
SELECT ga.attribute_id, v.entity_id, v.value
FROM catalog_product_entity_varchar v
INNER JOIN eav_entity_type et ON et.entity_type_code=\'catalog_product\'
INNER JOIN eav_attribute va ON va.entity_type_id=et.entity_type_id AND
va.frontend_input=\'media_image\' AND va.attribute_id=v.attribute_id
INNER JOIN eav_attribute ga ON va.entity_type_id=et.entity_type_id AND
ga.attribute_code=\'media_gallery\'
LEFT JOIN catalog_product_entity_media_gallery g ON g.entity_id=v.entity_id AND
g.value=v.value
WHERE v.value<>\'no_selection\' AND v.value<>\'\' AND g.value IS NULL; 
```

并得到以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your
MySQL server version for the right syntax to use near '\'catalog_product\' INNER JOIN
eav_attribute va ON va.entity_ty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:46:17.877

使用导入/导出时，媒体/导入文件夹中的文件夹结构必须与 csv 文件中指定的相同。因此，如果在 CSV 中将媒体文件名指定为“/1/_/1_7_138.jpg”，则Magento 根目录中*必须*存在文件“/media/import/1/_/1_7_138.jpg”。否则导入/导出将找不到媒体文件。

最简单的解决方案是，不在您的 csv 中定义文件夹结构，而是将所有应该导入的媒体文件直接放在 media/import/ 中。所以在你的情况下：

**CSV 条目**（例如在“缩略图”列中）：1_7_138.jpg

**文件**：/media/import/1_7_138.jpg

不幸的是，Magento 无法导入自己的出口！因此，必须修改导出的 CSV，才能在另一个 Magento 安装中导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:04:27.117

不确定您是否遇到与我相同的问题，但是当我重新导入产品时，我的图像损坏了**，但**图像仍然与产品相关联，只是没有设置为基础、小、缩略图等

我做了类似的事情

```
update catalog_product_entity_varchar AS v inner join catalog_product_entity_media_gallery AS g on v.entity_id = g.entity_id set v.value = g.value where (v.attribute_id = '85' or v.attribute_id = '86' or v.attribute_id = '87'); 
```

在我的数据库中重新分配它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T23:49:05.457

不确定您是否仍有问题，但为了帮助您列出的 INSERT 查询，它不起作用，因为单引号被转义。我猜你在某处的帖子中找到了这个查询，当查询发布时，单引号用“\'”转义。

如果您将所有的 \' 更改为单引号，如下所示：

INSERT INTO ......
INNER JOIN eav_entity_type et ON et.entity_type_code='catalog_product' <-- 是我将 \' 更改为单个 ' 的地方。您需要对整个查询执行此操作。

然后查询应该可以工作。我还建议作为一种好的做法，您首先在没有插入命令的情况下运行选择，以确保它在盲目运行插入命令之前返回良好的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T03:41:49.833

签入以下

数据库表 `catalog_product_entity_media_gallery` 是否有您要查找的图像的条目。

类似于 1 703 17 /1/_/1_7_138.jpg

然后转到 media/catalog/product/1/_/ 并检查此图像文件是否存在。

额外刷新缓存并检查。

# python - 列表列表：为什么改变 a[1][0] 的值也会改变 a[0][0]？

> ID：15626028
> 
> 赞同：2
> 
> 时间：2013-03-25T22:27:00.550
> 
> 标签：python, list

谁能解释一下这里发生了什么？我了解 python`int`是按值分配的（而不是按引用分配的）。

```
>>> alist = [1,2,3]
>>> a = [[0]*3]*4
>>> a[0][0] = len(alist)
>>> alist.append(1)
>>> a[1][0] = len(alist)
>>> a[0][0]a
4
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:36:42.390

当您使用符号创建列表时`*`，您正在重复相同的元素。不是元素的*副本*，而是相同的对象。

当您重复的对象是不可变的（例如整数）时，您不会注意到。

当对象是可变的（例如列表）时，您会得到重复*的相同列表。*如果您对一个列表进行更改，那么您将对所有列表进行更改。

在您的情况下，您对 element 进行了更改`[1]`，它反映在 element 中`[0]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T22:35:39.453

问题是您的外部列表包含相同内部列表值的多个副本。您可以这样判断：

```
a = [[0]*3]*4
print(a[0] is a[1]) # prints True 
```

如果你想要一个二维的零列表，我建议对外部使用列表推导，以便获得单独的内部列表实例：

```
a = [[0]*3 for _ in range(4)]
print(a[0] is a[1]) # prints False

a[0][0]=1
print(a[1][0]) # prints 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T22:29:58.107

这可能会有所帮助（只是在每一行转储`list`和的值）：`a`

```
#With some commentary
>>> alist = [1,2,3] #Created a list with 3 elements
>>> alist
[1, 2, 3]
>>> a = [[0]*3]*4 #Created a list with 3 copies of one element and then copied it 4 times
>>> a
[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]
>>> a[0][0] = len(alist) #Set the 0th element of the 0th copy to 3
>>> a #Now you can see where that value was copied
[[3, 0, 0], [3, 0, 0], [3, 0, 0], [3, 0, 0]]
#The rest is just a permutation of that first 'bug'
>>> alist.append(1)
>>> alist
[1, 2, 3, 1]
>>> a[1][0] = len(alist)
>>> a
[[4, 0, 0], [4, 0, 0], [4, 0, 0], [4, 0, 0]]
>>> a[0][0]
4 
```

关于这段代码的一个不直观的事情可能是它`[0]*3`似乎做了你所期望的，而`[[0]*3]*4`没有做到。为此，我只能猜测（还不是 Python 专家）单个长度的 int 列表是以一种看起来很直观的方式处理的，而列表列表则回到了复制方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T22:35:27.180

没问题。`[[0]*3]*4`创建了一个包含 3 个元素列表的 4 个副本的列表。a[0]、a[1]、a[2] 和 a[3] 都指向同一个列表。

```
>>> a=[[0]*3]*4
>>> a
[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]
>>> a[0][0]='hello'
>>> a
[['hello', 0, 0], ['hello', 0, 0], ['hello', 0, 0], ['hello', 0, 0]]
>>> for mylist in a:
    ...     print id(a)
    ...
    42701168
    42701168
    42701168
    42701168
>>> 
```

# google-maps - Google Maps V3 折线绘图/编辑/继续绘图

> ID：15626035
> 
> 赞同：7
> 
> 时间：2013-03-25T22:27:37.450
> 
> 标签：google-maps, google-maps-api-3, google-polyline

我正在寻找一种通过谷歌地图 v3 绘制折线的方法。完成后，可以编辑多段线，然后继续绘制相同的多段线。

我已经阅读了很多关于 DrawingManager（在 3.7 中引入）的内容，并阅读了这里找到的 V3 的大部分 API：

[https://developers.google.com/maps/documentation/javascript/overlays#drawing_tools](https://developers.google.com/maps/documentation/javascript/overlays#drawing_tools)

这显示了这个例子：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/drawing-tools](https://google-developers.appspot.com/maps/documentation/javascript/examples/drawing-tools)

developer.google 示例很棒，它允许用户通过单击最后一个顶点来绘制和完成折线。但是一旦完成，我似乎无法找出如何继续在同一条折线上绘图。这可能吗？

我知道 Google Maps API 最高版本为 10（Frozen）。我什至查看了他们的发布和实验版本，但那里没有谈论它。

我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:00:09.007

用谷歌创建的问题：[http](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5213) ://code.google.com/p/gmaps-api-issues/issues/detail?id=5213 希望它得到更多的“喜欢”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:49:00.227

DrawingManagerOptions 中的 PolylineOptions 忽略路径属性。因此，您可以做的是在绘制时（在 polylinecomplete 事件上）在 las 折线的末端和新折线的开始之间绘制一条新的折线。

```
google.maps.event.addListener(drawingManager, 'polylinecomplete', function(event) {
      if (event.type == google.maps.drawing.OverlayType.POLYLINE) {
        //save last point
        //draw a new polyline to join last final point and this first point if this isn't the first polyline
      }
}); 
```

希望能帮助到你

# android - 在运行时从 android 应用程序上的 scada 系统获取信息

> ID：15626037
> 
> 赞同：1
> 
> 时间：2013-03-25T22:27:56.427
> 
> 标签：android, alarm, scada

是否可以创建一个 Android 应用程序来显示来自 SCADA 系统的警报摘要？如果是，我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:27:01.793

取决于您拥有的 SCADA 系统，您需要更具体地提出您的问题。

许多 SCADA 系统将警报保存在 SQL 数据库中，因此您应该能够从中提取一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T18:42:46.433

我为 Android 制作了一个名为 UniGO 的小型 scada 系统。您会在该应用程序中找到一个警报系统。可能是您正在寻找的东西。它有一个用于轮询您的 HMI/PLC 的后台服务。振动和噪音，LED 状态。如果您使用 modbus TCP/IP，它将为您工作。

最好的问候米凯尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:08:35.153

实现这一点的方法之一是在 SCADA 内部创建一个 TCP 服务器（如果您的 SCADA 允许）并使其回复来自客户端的数据请求。然后您创建 Android 应用程序，该应用程序将定期轮询该 TCP 服务器并显示收集的数据（在您的情况下为警报）。如果您的 SCADA 软件不允许在内部创建 TCP 服务器，那么您可以使用某种通用编程语言创建一个外部 TCP 服务器，该服务器将定期轮询 SCADA 以通过 SCADA 理解的某些协议（如 DDE、OPC ......）收集所需的数据，并将该数据提供给 Android 客户端。或者，如果您的警报可以在 PLC 中找到，那么您可以跳过 SCADA 并使用 PLC 理解的协议直接寻址 PLC - 例如 MODBUS、S7、FINS...）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T17:06:57.710

是的，是否可以创建一个 Android 应用程序来显示来自[SCADA-LTS](https://github.com/sdtabilit/Scada-LTS/tree/develop-sdtabilit)系统的警报摘要？

你可以：

*   使用 SOAP 或 REST API 连接到我们的 SCADA，
*   或从 SCADA-LTS 直接显示在 webbrowser 警报摘要页面中。

# javascript - 检测用户何时在 primefaces 数据表中检查或取消选中客户端的行

> ID：15626041
> 
> 赞同：0
> 
> 时间：2013-03-25T22:28:28.443
> 
> 标签：javascript, jquery, checkbox, primefaces, datatable

我使用[此行编辑 primefaces 数据表，并通过](http://www.primefaces.org/showcase/ui/datatableRowEditing.jsf)[此示例](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)添加了多项选择功能

然后我想在客户端检测用户何时选中或取消选中一行以及每次更改时检查的行数

我用萤火虫尝试了很多方法....但没有结果

这是我的一篇文章（仅用于测试）：

```
$(function(){                       
                $('.ui-chkbox-box.ui-widget.ui-corner-all.ui-state-default').mousemove(function(){

                    if(('.ui-chkbox-box.ui-widget.ui-corner-all.ui-state-default').hasClass('ui-state-active'))
                        alert('show');
                }); 
```

你有什么主意吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:17:07.540

如果您只想知道用户何时单击了位于数据表中的复选框，则可以使用此代码来侦听单击并验证它是否被选中：

```
jQuery(".ui-chkbox").click(function () {
    if(jQuery(this).find("span").first().hasClass("ui-icon-check"))
        alert("unchecked");            
    else
        alert("checked");
} 
```

请注意，if 子句是倒置的，这是因为在 primefaces 将类“ui-icon-check”添加到 div 之前将调用此函数。

# xamarin.android - 如何在 MVVMCross 中使用 Google Maps v2 API

> ID：15626042
> 
> 赞同：3
> 
> 时间：2013-03-25T22:28:41.977
> 
> 标签：xamarin.android, mvvmcross

我正在尝试让 Google Maps v2 API 与 MvvmCross v2 (vNext) 一起使用，但遇到了一些问题。

我使用带有 MvvmCross 的 Google 地图的示例有一个从 MvxBindingMapActivityView 继承的视图。问题是它使用了 Google Maps v1 API 中的 MapView，但该 API 已被弃用，并且 Google 不再发布许可证密钥。

我有一些改编自 Xamarin Google Maps v2 示例的代码，效果很好：

[https://github.com/xamarin/monodroid-samples/tree/master/MapsAndLocationDemo_v2](https://github.com/xamarin/monodroid-samples/tree/master/MapsAndLocationDemo_v2)

但我不明白如何让它与 MvvmCross v2 一起工作。它还使用片段，我不确定当前版本的 MvvmCross 是否支持这个？

我可以通过从 MvvmCross 视图触发 Intent 来让我的 Google Maps v2 Activity 在 MvvmCross 框架之外正常工作，这绝对是一个选项，但我想知道 MvvmCross 内部是否有任何支持 Google Maps v2 或者是否所涉及的黑客行为将比它的价值更麻烦。

谢谢！

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:20:26.807

v1 ( `master`) 和 v2 ( `vNext`) MvvmCross 中的地图代码都依赖于 Google Maps v1 API - 因此不再是新应用程序的选项。

同时，`master`也`vNext`牢牢扎根于 Android v1 和 v2 - 所以不包含任何片段支持。

所以你对情况的分析是对的。

* * *

使用 Google Maps v2 进行开发的一些选项包括：

1.  在您的应用程序中为需要新样式映射的页面/选项卡添加一个非 Mvvm Activity。

2.  尝试实现`ExFragmentActivity`- 有或没有数据绑定支持。

    为此，您首先需要从 Android 的`FragmentActivity`类继承，然后您需要提供一些额外的方法和属性。在 MvvmCross monodroid Activity中[插入 Monogame 视图中的](https://stackoverflow.com/questions/13201174/insert-a-monogame-view-inside-mvvmcross-monodroid-activity)更多信息。

    `ExFragmentActivity`这样做有很多剪切和粘贴，但我认为将工作提高到非数据绑定级别应该是微不足道的。

    更进一步——为了让数据绑定也能正常工作——你可能会发现你需要调整绑定/膨胀代码——围绕`LayoutInflater`. FragmentManager 挂钩到父 FragmentActivity 的方式可能需要调整。抱歉，我没有关于如何执行此操作的更多详细信息 - 我认为这就是`hackery`可能涉及到一些实验。

3.  v3 将具有完整的 Fragment 支持 - 因此切换到 v3（当它发布时）并使用 Fragment 是未来支持的一种选择。但是，从旧版本到 v3 的更改相当大 - 所以现在这样做可能不是一个选择 - 取决于您在项目中的位置。

# css - CSS重置：垂直标签位置？

> ID：15626044
> 
> 赞同：4
> 
> 时间：2013-03-25T22:28:55.543
> 
> 标签：css

我想完全重置 a`button`的继承 CSS，使其行为与任何其他内联块元素完全相同。但是，我遇到了一个问题，即按钮的文本永远卡在垂直居中。

在下面的小提琴（和屏幕截图）中，根据 Chrome 开发者控制台，`button`和`div`具有**完全相同的样式**，但按钮的文本是垂直居中的，而 div 的不是：

[http://jsfiddle.net/rgthree/vT3a7/](http://jsfiddle.net/rgthree/vT3a7/)

![按钮与 div](../Images/fb62c9824b004a352d9bb230f0fac274.png)

任何人都知道将完全重置按钮的属性或选择器，特别是包括其标签位置？

* * *

# 回答

除了 Chrome ~25 之外的任何浏览器都没有办法。我联系了 Chromium 项目，说它在 Chrome 27 中不起作用（请参阅@winterblood 答案和评论）。他们这样说：

> 问题是我们现在在按钮内的匿名块上使用 margin:auto 来在按钮内进行居中以获得安全居中。所以，不幸的是，没有办法从 CSS 中对其进行样式设置。您之前能够控制这种行为实际上是泄漏的实现细节。

所以，真正的答案是你不能在任何浏览器中设置它的样式，除了 Chrome ~25`-webkit-box-align`不经意暴露，正如@winterblood 回答的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:46:46.503

对于 webkit，您需要使用or`-webkit-box-align`的值覆盖。`baseline``start`

我还没有在 Firefox 中实现这一点（从非常简短的角度来看）。

# c++ - 如何使用 POCO 解析 xml 文件并将特定节点提取到 std::string？

> ID：15626048
> 
> 赞同：2
> 
> 时间：2013-03-25T22:29:13.480
> 
> 标签：c++, xml, xml-parsing, poco, sbml

我想使用 POCO 的库提取单个节点，但不知道该怎么做。我是 XML 新手。

XML 本身看起来像这样（缩写）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Created by XMLPrettyPrinter on 11/28/2012 from  -->
<sbml xmlns = "http://www.sbml.org/sbml/level2/version4" level = "2" version = "4">
<model id = "cell">
  <listOfSpecies>
</listOfSpecies>
  <listOfParameters>
     <parameter id = "kk1" value = "1"/>
  </listOfParameters>
  <listOfReactions>
     <reaction id = "J1" reversible = "false">
... much stuff here ..
  </listOfReactions>
</model>
</sbml> 
```

我想提取 listOfReactions 节点中的所有内容并将其存储在 std::string 中，以便以后进行 MD5 散列。

我试过这个：

```
ifstream in(JoinPath(gTestDataFolder, "Test_1.xml").c_str());
InputSource src(in);
DOMParser parser;
AutoPtr<Document> pDoc = parser.parse(&src);
NodeIterator it(pDoc, Poco::XML::NodeFilter::SHOW_ALL);
Node* pNode = it.nextNode();

while(pNode)
{
    clog<<pNode->nodeName()<<endl;
    string elementID = "listOfReactions";
    if(pNode->nodeName() == "listOfReactions")
    {
         //Extract everything in this node... how???
    }

    pNode = it.nextNode();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T20:11:06.513

我自己也遇到了类似的问题。例如，在应用了“Poco::XML::NodeFilter::SHOW_ALL”过滤器的情况下，遍历 XML 文档时将包括所有节点类型（元素、文本、CDataSection 等）。我发现 POCO 不包含从“NextNode()”返回的每个节点中的所有数据。

如果想要访问 XML 节点的属性，首先必须使用“hasAttributes()”查询节点以检查它是否具有任何属性，然后如果有，则遍历这些属性中的每一个以找到感兴趣的属性。

XML 示例：

```
<?xml version="1.0"?>
<reaction id="J1" reversible="false"> 
```

C++ 示例：

```
...
Poco::XML::NamedNodeMap* attributes = NULL;
Poco::XML::Node* attribute = NULL;

while(pNode)
{
 if( (pNode->nodeName() == "reaction") && pNode->hasAttributes())
 {
   attributes = pNode->attributes(); 
   for(unsigned int i = 0; i < attributes->length(); i++)
   {
     attribute = attributes->item(i);
     cout << attribute->nodeName() << " : " << attribute->nodeValue() << endl
   }
  }
  pNode = it.nextNode();
}
... 
```

应该输出：

```
id : J1
reversible : false 
```

如果想要访问两个 XML 标记之间的文本，如下面的 XML 示例所示，首先必须找到名称与感兴趣的标记匹配的节点，就像您在示例中所做的那样，然后检查下一个通过调用“NextNode()”来查看该节点是否具有节点名称“#text”或“#cdata-section”。如果是这种情况，则此“下一个节点”的值将包含 XML 标记之间的文本。

XML 示例：

```
<?xml version="1.0"?>
<listOfReactions>Some text</listOfReactions> 
```

C++ 示例：

```
...
while(pNode)
{
 if(pNode->nodeName() == "listOfReactions")
 {
   pNode = it.nextNode();
   if(pNode->nodeName() != "#text")
   {
     continue; //No text node present
   }
   cout << "Tag Text: " << pNode->nodeValue() << endl;
  }
  pNode = it.nextNode();
}
... 
```

应该输出：

```
Some text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:35:35.553

试试[这些幻灯片](http://pocoproject.org/slides/170-XML.pdf)，以及 API 参考的[Poco 文档](http://pocoproject.org/docs/)。

这里还有一个很好的[教程，](http://www.codeproject.com/Articles/253418/Learning-Poco-Load-XML-Configuration)其中有一个简单易懂的示例，说明您正在尝试做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T12:55:10.973

游戏迟到了，但也许仍然有用。我正在研究 Poco XML 以提取以 xml 传递的天气数据。我发现@JBently 提到的 PDF 幻灯片是一个很好的介绍。这提供了 hpp 文件。这个[例子](http://poco.roundsquare.net/2010/08/08/pocoxmlsaxparser/)涵盖了实现。我省略了 LexicalHandler。

我查看字符串 listOfReactions，当找到时，我将属性名称和值添加到 startElement() 中的字符串。在 characters() 中，我将节点中的文本添加到字符串中，并将其添加到可以遍历的向量中。

输出：

> id=J1,reversible=false,false move
> id=J2,reversible=true,true move

我稍微更改了您的 xml 以进行测试，并转义了双引号以在程序中使用。

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?><sbml xmlns = \"http://www.sbml.org/sbml/level2/version4\" level = \"2\" version = \"4\">
    <model id = \"cell\">
        <listOfSpecies>species</listOfSpecies>
        <listOfParameters>
            <parameter id = \"kk1\" value = \"1\"/>
        </listOfParameters>
        <listOfReactions>
            <reaction id = \"J1\" reversible = \"false\">false move</reaction>
            <reaction id = \"J2\" reversible = \"true\">true move</reaction>
        </listOfReactions>
    </model>
</sbml> 
```

主要的：

```
#include <iostream>

#include "MyHandler.hpp"

using namespace std;

int main() {
    auto s = {XML file from above};
    MyHandler handler {};
    Poco::XML::SAXParser parser {};
    parser.setFeature(Poco::XML::XMLReader::FEATURE_NAMESPACES, false);
    parser.setFeature(Poco::XML::XMLReader::FEATURE_NAMESPACE_PREFIXES, true);
    parser.setContentHandler(&handler);

    try {
        parser.parseString(s);
    } catch (Poco::Exception& e) {
        cerr << e.displayText() << endl;
    }
    auto saved = handler.saved_reactions();
    for (auto& i : saved) {
        cout << i << endl;
    }
    return 0;
} 
```

MyHandler.hpp：

```
#ifndef MYHANDLER_HPP_
#define MYHANDLER_HPP_

#include <iostream>
#include <vector>
#include <Poco/SAX/Attributes.h>
#include <Poco/SAX/ContentHandler.h>
#include <Poco/SAX/SAXParser.h>

class MyHandler: public Poco::XML::ContentHandler {
public:
    MyHandler();
    virtual ~MyHandler();

    // ContentHandler overrides, begin.
    void setDocumentLocator(const Poco::XML::Locator* loc);
    void startDocument();
    void endDocument();
    void startElement(
            const Poco::XML::XMLString&,
            const Poco::XML::XMLString&,
            const Poco::XML::XMLString&,
            const Poco::XML::Attributes&);
    void endElement(
            const Poco::XML::XMLString&,
            const Poco::XML::XMLString&,
            const Poco::XML::XMLString&);
    void characters(const Poco::XML::XMLChar ch[], int, int);
    void ignorableWhitespace(const Poco::XML::XMLChar ch[], int, int);
    void processingInstruction(const Poco::XML::XMLString&, const Poco::XML::XMLString&);
    void startPrefixMapping(const Poco::XML::XMLString&, const Poco::XML::XMLString&);
    void endPrefixMapping(const Poco::XML::XMLString&);
    void skippedEntity(const Poco::XML::XMLString&);
    // ContentHandler overrides, end
    std::vector<std::string> saved_reactions();

private:
    bool show = false;
    std::string reactions_s {};
    std::vector<std::string> reactions_v {};
};

#endif /* MYHANDLER_HPP_ */ 
```

MyHandler.cpp：

```
#include "MyHandler.hpp"

MyHandler::MyHandler() {}
MyHandler::~MyHandler() {}

void MyHandler::setDocumentLocator(const Poco::XML::Locator* loc) {
}

void MyHandler::startDocument() {
}

void MyHandler::endDocument() {
}

void MyHandler::startElement(const Poco::XML::XMLString& namespaceURI, const Poco::XML::XMLString& localName, const Poco::XML::XMLString& qname, const Poco::XML::Attributes& attributes) {
    int x {0};
    std::cout << "qname: " << qname << std::endl;
    /*    std::cout << "getValue(): " << attributes.getValue(qname) << std::endl;
    std::cout << "getLength(): " << attributes.getLength() << std::endl;*/
    if (qname == "listOfReactions") {
        show = true;
    }
    if (show) {
        if (attributes.getLength()) {
            reactions_s.clear();
            x = attributes.getLength();
            for (int i = 0; i < x; ++i) {
                std::cout << "getQName(): " << attributes.getQName(i) << ", getValue(): " << attributes.getValue(i) << std::endl;
                if (reactions_s.size()) reactions_s += ",";
                reactions_s += attributes.getQName(i) + "=" + attributes.getValue(i);
            }
        }
    }
}

void MyHandler::endElement(const Poco::XML::XMLString& allocator,
        const Poco::XML::XMLString& allocator1,
        const Poco::XML::XMLString& allocator2) {
}

void MyHandler::characters(const Poco::XML::XMLChar ch[], int start, int length) {
    std::cout << std::string(ch + start, length) << std::endl;
    if (show) {
        reactions_s += "," + std::string(ch + start, length);
        reactions_v.emplace_back(reactions_s);
    }
}

void MyHandler::ignorableWhitespace(const Poco::XML::XMLChar ch[], int start, int length) {
}

void MyHandler::processingInstruction(const Poco::XML::XMLString& allocator, const Poco::XML::XMLString& allocator1) {
}

void MyHandler::startPrefixMapping(const Poco::XML::XMLString& allocator, const Poco::XML::XMLString& allocator1) {
}

void MyHandler::endPrefixMapping(const Poco::XML::XMLString& allocator) {
}

std::vector<std::string> MyHandler::saved_reactions() {
    return reactions_v;
}

void MyHandler::skippedEntity(const Poco::XML::XMLString& allocator) {
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-06T14:58:54.287

假设 XML 在文件“hello.xml”中

```
<root>
    <headers>
        <header>Hello</header>
        <header>World</header>
    </headers>
</root> 
```

可以这样解析：-

```
#include <string>
#include <sstream>
#include <Poco/Exception.h>
#include <Poco/AutoPtr.h>
#include <Poco/Util/XMLConfiguration.h>

using namespace std;
using namespace Poco;
using namespace Poco::Util;

int main(int argc, char*argv[]) {

    int counter = 0;
    AutoPtr apXmlConf(new XMLConfiuration("hello.xml"));
    try {
        while(1) { // Loop breaks by Poco exception
            stringstream tag;
            tag << "headers.header[" << counter++ << "]";
            string header = apXmlConf->getString(tag.str());
            cout << header << " ";
        }
    } catch(NotFoundException& e) { (void)e; }
    cout << endl;
    return 0;
} 
```

希望有帮助。

# java - 如何在 IntelliJ 12 中为 Find Usages 设置默认范围？

> ID：15626052
> 
> 赞同：22
> 
> 时间：2013-03-25T22:29:34.090
> 
> 标签：java, android, intellij-idea, settings, keyboard-shortcuts

经过长时间的 Android 开发中断后，我回到了 IntelliJ，所以我再次习惯了它。我遇到的问题是，例如，当您想查看正在使用的类的位置时，您会将插入符号放置在类声明中并`cmd``alt``F7`（在 Mac OS X 上）发出*Find Usages*，它正在从 mapping.txt 返回内容和seed.txt以及 .java 结果，即使我可以设置*默认值*`shift``cmd``alt``F7`并取消勾选：*搜索文本出现*，甚至将*范围*从项目文件更改为自定义范围（例如），当我再次调用*Find Usages*时，这些选项***不会保存***。

 *有谁知道个性化*Find Usages*的方法，使其更接近 Eclipse 的功能？（即，找到真正的用法而不是文本搜索出现）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-14T11:28:05.667

从未来报告：问题中描述的行为现已实施（[评论中提到的 Intellij 问题](https://youtrack.jetbrains.com/issue/IDEA-87037)）。

要配置`cmd``alt``F7`在默认范围内运行，首先要针对某个符号运行它

[![找到的用法](../Images/fda6504fe42bdbfe4b0055a41eab0e07.png)](https://i.stack.imgur.com/JP6Uf.png)

单击扳手图标，可以选择预定义范围之一，或创建一个新范围（使用`...`按钮）。

[![范围列表](../Images/f735c85a559c3d5b11bbd485ff63250a.png)](https://i.stack.imgur.com/bORmH.png)

`+`创建一个新的范围。找到要查看的文件夹，然后单击`Include recursively`。瞧！

[![创建范围](../Images/68f364033278d483c60893a1d00e0e56.png)](https://i.stack.imgur.com/W11nm.png)

任何后续搜索都将使用该范围，直到它被更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-11T13:11:22.580

而不是`cmd``alt``F7`使用快捷方式`alt``F7`。这将打开一个弹出窗口，供您选择范围、测试事件和使用类型。您将不得不进行一次此选择。下次您按下时`alt``F7`，您的选择就会被记住。

结果是`alt``F7`随后`enter`为您提供所需的东西。*

# css - 使用媒体查询时在 CSS linter 中出现错误

> ID：15626062
> 
> 赞同：2
> 
> 时间：2013-03-25T22:30:25.793
> 
> 标签：css, media-queries, csslint

当我通过[CSS Linter](http://csslint.net/)输入下面的代码时，我得到了六个错误。这些错误是在 linter 还是 CSS 中？我看不出 CSS 有什么问题。无论设置如何，我似乎都无法关闭或忽略错误。

```
@media ( max-width: 320px ) {
    .test {
        padding: 20px;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-14T09:37:57.147

我只需要删除空格即可通过：

```
@media (max-width:320px) {
    .test {
        padding: 20px;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T22:44:39.163

您的代码是有效的，只是 css 链接对格式很挑剔。

如果您将其更改为以下内容，它会非常满意：

```
@media(max-width:320px){.test{padding:20px;}} 
```

我建议使用这个网站来验证你的 CSS：

[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)

# regex - bash 逃逸 ~ 波浪号

> ID：15626067
> 
> 赞同：4
> 
> 时间：2013-03-25T22:30:45.763
> 
> 标签：regex, bash

波浪号字符是否需要在 bash 脚本中转义？

我试图用 \~ 来逃避它，但它没有帮助。如果我删除 ~ 字符，下面的代码将按预期工作。

```
 if ! [[ "$line" =~ ^[0-9a-zA-Z-~]+$ ]]; then
                    echo "skipping .. $line"
                    continue
            fi 
```

如何在上述表达式中添加波浪号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T22:44:18.413

不要把~放在-之后。将正则表达式更改为：

```
if ! [[ "$line" =~ ^[0-9a-zA-Z~-]+$ ]]; then 
```

你会没事的。

查看[这篇文章](https://stackoverflow.com/a/4068725/465183)以获得更多解释为什么*连字符*可能是该类的最后一个元素。

# java - 扫描仪不工作

> ID：15626068
> 
> 赞同：0
> 
> 时间：2013-03-25T22:30:46.297
> 
> 标签：java, string, terminal, java.util.scanner

我有这个代码：

```
byte[] nombre = new byte[20];
                System.out.print("Cuenta a modificar: ");
                cuenta = s.nextInt();
                boolean existe = estaRepetido(cuenta);
                if (existe == false){
                    System.out.println("La cuenta no existe");
                }
                else {
                    String nomCliente;
                    System.out.print("Nombre: ");
                    nomCliente = s.nextLine();
                    System.out.print("Cantidad: ");
                    double cantidad = Double.parseDouble(s.nextLine());
                    for( int i = 0; i < 20 && i < nomCliente.getBytes().length; i++ ){
                        nombre[i] = nomCliente.getBytes()[i];
                    }
                    String nomModificar = new String (nombre);
                    modificar(cuenta, nomModificar, cantidad);
                } 
```

但是当在终端上以某种方式在海外运行时，nomCliente = s.nextLine(); 以这样的结尾：

```
Cuenta a modificar: 0
Nombre: Cantidad: 0 
```

有任何想法吗？这只是一个非常大的方法的一部分，但这是唯一引起麻烦的扫描仪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:35:31.003

该`nextInt()`方法离开`\n`（结束行）符号并立即被 拾取`nextLine()`，跳过下一个输入。你想要做的是使用`nextLine()`一切，并在以后解析它：

```
String nextIntString = keyboard.nextLine(); //get the number as a single line
int nextInt = Integer.parseInt(nextIntString); //convert the string to an int 
```

这是迄今为止避免问题的最简单方法——不要混合你的“下一个”方法。仅使用`nextLine()`，然后解析`int`s 或单独的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:35:39.910

`s.nextLine()`当您想在扫描下一个输入之前等待用户输入键时，您需要使用 。利用：

```
try {
    cuenta = Integer.parseInt(s.nextLine());
} catch (Exception e){
    //Do whatever you want.
} 
```

# javascript - Hammer.js - Internet Explorer 10 中的旋转

> ID：15626071
> 
> 赞同：2
> 
> 时间：2013-03-25T22:31:07.923
> 
> 标签：javascript, jquery, internet-explorer-10, hammer.js

我在使用hammer.js-touch-framework 时遇到了一些问题，更准确地说，是旋转触发器。我的代码非常简约，正如您在这个 jsfiddle 中看到的那样（我正在使用来自官方hammer.js-website 的 jquery.hammer.js）：

[http://jsfiddle.net/kgEFs/](http://jsfiddle.net/kgEFs/)

我的主要问题是，`rotation`两者`pinch`都没有被触发，只有点击被触发。我知道，其他浏览器可能更适合 Web 开发，但我对如何使对象旋转感兴趣，即使在 Internet Explorer 中也是如此。使用 MSIE 10轻按`<div>`会触发轻按事件，甚至可以旋转对象，如果有值（您可以通过简单地更改`e.rotation`为 来检查`10`）。我已经得到了一次旋转事件，但我无法重现我是如何实现它的。

有任何想法吗？

# css - 使背景大小在 IE 中工作而不扭曲纵横比

> ID：15626072
> 
> 赞同：1
> 
> 时间：2013-03-25T22:31:11.267
> 
> 标签：css

我想在我的网页上设置背景图片。我为此使用 background-size=cover 。它给了我我想要的东西，但它在 IE8 中不起作用。我尝试[了这个使用过滤器的解决方案](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)

```
#container{
    position: absolute;
    height: 100%;
    width: 100%;

    background: url('img/dogs.jpg') no-repeat center center;
    background-size: cover;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img/dogs.jpg', sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img/dogs.jpg', sizingMethod='scale');
} 
```

但它似乎只是拉伸图像以使其适合背景并扭曲图像的纵横比。有人可以建议任何其他解决方案吗？

# linux - sha1密码哈希linux

> ID：15626073
> 
> 赞同：19
> 
> 时间：2013-03-25T22:31:31.033
> 
> 标签：linux, bash, shell, cryptography, sha1

我想要的是能够获得特定密码的 sha1 哈希值。

因此，例如，如果我的密码是“hello”，我需要在 linux 中输入什么命令来获取 hello 的 sha1 散列值？

我试过了

```
echo -n "hello" | sha1sum 
```

但是它返回的值没有给出数据库存储过程接受的值，该存储过程接受散列值来验证登录（问题不在这个存储过程中，因为我们到处都使用它来进行验证） .

基本上，

我只需要知道一个命令来给出一个字符串并取回它的 sha1 哈希值

谢谢！:)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-05-24T20:31:30.770

我知道这真的很旧，但这就是为什么它不起作用以及如何处理它：

当你运行

```
echo -n "hello" | sha1sum 
```

如您的示例所示

```
aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d  - 
```

注意最后的“-”。

前面的散列是 hello 的正确 sha1 散列，但破折号弄乱了散列。

为了只获得第一部分，您可以这样做：

```
echo -n "hello" | sha1sum | awk '{print $1}' 
```

这将通过 awk 提供您的输出，并且只为您提供第一列。结果：“你好”的正确 sha1

```
aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-30T13:05:08.713

```
echo -n YOUR_TEXT | sha1sum | awk '{print $1}' 
```

将 YOUR_TEXT 与您必须散列的文本交换。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T03:10:01.343

密码格式在不同的应用程序中可能不同。例如，`/etc/passwd`您可以使用以下命令生成 SHA-256 密码：

```
# perl -e 'print crypt("password", q($5$salt$)), "\n";'
$5$salt$Gcm6FsVtF/Qa77ZKD.iwsJlCVPY0XSMgLJL0Hnww/c1
# 
```

对于`LDAP`（例如 for `slapd.conf`）中的密码，它可能是：

```
# slappasswd -h "{SSHA}"
New password:
Re-enter new password:
{SSHA}bjEe8dPBjyecc7hD1kUhxQUdF9dt4Hya
# 
```

您需要知道应用程序的确切密码格式以及密码是如何生成的。

# asp.net - Sql 上的数据插入慢

> ID：15626074
> 
> 赞同：0
> 
> 时间：2013-03-25T22:31:41.467
> 
> 标签：asp.net, sql, entity-framework

我只是想从数据集中将数据导入数据库（Sql），但是当我尝试导入 70000 行时它有点慢。我做错了什么或错过了什么？请给我一些建议，我怎样才能做得更好？

这是我的 asp.net 代码：

```
ArtiDB entity = new ArtiDB();
int grid = 50;

foreach (string item_kisiler in kisiler)
{
    if (item_kisiler == "")
        continue;
    if (Tools.isNumber(item_kisiler) == false)
        continue;
    else
    {
        string gsm1 = item_kisiler;
        if (gsm1.Length > 10)
            gsm1 = gsm1.Substring(1, 10);
        entity.veriaktar(gsm1, gg, grid);

    }                       
} 
```

这是我的商店程序：

```
alter proc veriaktar
(   
@gsm1 nvarchar(50)=null,   
@userid uniqueidentifier,
@grupid int = 0
)
as 
begin
Declare @AltMusID int
    if not exists (select * from tbl_AltMusteriler with (updlock, rowlock, holdlock) where Gsm1=@gsm1 and UserId=@userid)
        begin 
            insert into tbl_AltMusteriler (Gsm1,UserId) 
            values (@gsm1,@userid)          
            Set @AltMusID = scope_identity()
        end
    else
        begin 
        Set @AltMusID = (select AltMusteriID from tbl_AltMusteriler with (updlock, rowlock, holdlock) where Gsm1=@gsm1 and UserId=@userid)
        end
        if (@grupid != 0)
            begin
            if not exists (select * from tbl_KisiGrup with (updlock, rowlock, holdlock) where GrupID=@grupid and AltMusteriID=@AltMusID)
                begin
                    insert into tbl_KisiGrup values(@grupid,@AltMusID)
                end
            end
        end 

go 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:24:20.393

该服务器旨在与集合一起使用。您要求它一次处理一行，每行处理*三次*。停止这样做，事情会变得更好。

首先回到您的 VB 文档并寻找一种方法来*处理* `INSERT`所有*70,000*行。如果您可以使用 SQL Server 的批量复制 (bcp) 功能，您应该能够在 10-20 秒内插入整个集合。

读取-测试-更新范式可能在这里工作，但它很容易出错并迫使服务器比必要的工作更加努力。如果这 70,000 个中的一些是新的而其他是更新的，则将它们批量放入一个临时表并用于`MERGE`将其应用于`tbl_AltMusteriler`.

第二，`uniqueidentifier`不是好兆头。它看起来像`tbl_AltMusteriler`用于生成代理键。为什么不是一个简单的整数呢？生成（使用 ）会更快`IDENTITY`，更容易阅读，查询更快，并且通常具有更好的 PK 属性。（另外，请确保自然键和代理项都被声明为唯一的。如果两行具有相同的值`gsm1`和`userid`，这意味着什么，仅相差`AltMusteriID`？）

简而言之，找到一种方法来一次插入所有行，这样您与 DBMS 的交互就仅限于一次或最多两次调用。

# python - 延迟延迟列表达到最大递归深度

> ID：15626076
> 
> 赞同：2
> 
> 时间：2013-03-25T22:31:55.677
> 
> 标签：python, twisted, twisted.internet

我有大量文档要插入到 MongoDB 中（可能 n > 100000）。我不想一次创建 100000 个延迟，但我不想按顺序执行和等待每个查询，因为我有一个到 MongoDB 的连接池并且我想充分利用它。所以我有一个生成器函数，它将产生延迟以供`DeferredLazyList`.

```
def generate_update_deferreds(collection, many_docs):
    for doc in many_docs:
        d = collection.update({'_id': doc['_id']}, doc, upsert=True)
        yield d 
```

这是链接延迟 upsert 的生成的代码，以及`DeferredLazyList`.

```
@defer.inlineCallbacks
def update_docs(collection, many_docs):
    gen_deferreds = generate_update_deferreds(collection, many_docs)
    results = yield DeferredLazyList(gen_deferreds, count=pool_size, consume_errors=True) 
```

`DeferredLazyList`类似于[DeferredList](http://twistedmatrix.com/documents/current/api/twisted.internet.defer.DeferredList.html "延迟列表")，但不是接受延迟列表等待它接受迭代器。延迟从迭代器中检索，同时只有`count`延迟激活。这用于有效地批处理延迟，因为它们是在生成时创建的。

```
class DeferredLazyList(defer.Deferred):
    """
    The ``DeferredLazyList`` class is used for collecting the results of
    many deferreds. This is similar to ``DeferredList``
    (``twisted.internet.defer.DeferredList``) but works with an iterator
    yielding deferreds. This will only maintain a certain number of
    deferreds simultaneously. Once one of the deferreds finishes, another
    will be obtained from the iterator.
    """

    def __init__(self, deferreds, count=None, consume_errors=None):
        defer.Deferred.__init__(self)

        if count is None:
            count = 1

        self.__consume_errors = bool(consume_errors)

        self.__iter = enumerate(deferreds)
        self.__results = []
        for _i in xrange(count):
            # Start specified number of simultaneous deferreds.
            if not self.called:
                self.__next_save_result(None, None, None)
            else:
                break

    def __next_save_result(self, result, success, index):
        """
        Called when a deferred completes.
        """
        # Make sure we can save result at index.
        if index is not None:
            results_len = len(self.__results)
            if results_len <= index:
                self.__results += [NO_RESULT] * (index - results_len + 1)
            # Save result.
            self.__results[index] = (success, result)

        # Get next deferred.
        try:
            i, d = self.__iter.next()
            d.addCallbacks(self.__next_save_result, self.__next_save_result, callbackArgs=(True, i), errbackArgs=(False, i))

        except StopIteration:
            # Iterator is exhausted, callback self with results.
            self.callback(self.__results)

        # Pass through result.
        return result if success or not self.__consume_errors else None 
```

问题是当延迟从`generate_update_deferreds()`他们`.called`已经设置`True`为导致`DeferredLazyList`递归调用自身时产生。

正在发生的事情是：

1.  在`DeferredLazyList.__init__()`中，`self.__next_save_result()`称为`count`次（比如 5）。

2.  每次调用都`self.__next_save_result()`消耗 1 个 deferred from `self.__iter`，并且它本身被添加为回调。

3.  因为产生的 deferred 已`.called`设置为`True`，所以`d.addCallbacks(self.__next_save_result, ...)`立即调用`self.__next_save_result()`并且此循环继续，直到 a`RuntimeError`被引发，因为已经达到递归深度。

我在达到递归限制之前打印了一个堆栈跟踪，以确认这是问题的原因：

```
File "/home/caleb/it/Development/projects/python/amazon/bin/feeds-daemon/lib/server.py", line 937, in update_many_docs
    results = yield DeferredLazyList(gen_deferreds, count=self.mongo_connections, consume_errors=True, return_results=True)
File "/home/caleb/it/Development/projects/python/amazon/bin/feeds-daemon/lib/twisted.py", line 157, in __init__
    self.__next_save_result(None, None, None)
File "/home/caleb/it/Development/projects/python/amazon/bin/feeds-daemon/lib/twisted.py", line 222, in __next_save_result
    d.addCallbacks(self.__next_save_result, self.__next_save_result, callbackArgs=(True, i), errbackArgs=(False, i))
File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 290, in addCallbacks
    self._runCallbacks()
File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 551, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
File "/home/caleb/it/Development/projects/python/amazon/bin/feeds-daemon/lib/twisted.py", line 222, in __next_save_result
    d.addCallbacks(self.__next_save_result, self.__next_save_result, callbackArgs=(True, i), errbackArgs=(False, i))
File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 290, in addCallbacks
    self._runCallbacks()
File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 551, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
File "/home/caleb/it/Development/projects/python/amazon/bin/feeds-daemon/lib/twisted.py", line 222, in __next_save_result
    d.addCallbacks(self.__next_save_result, self.__next_save_result, callbackArgs=(True, i), errbackArgs=(False, i))
# Repeated until the RuntimeError
exceptions.RuntimeError: maximum recursion depth exceeded 
```

任何帮助将不胜感激。顺便说一句，我正在运行带有 Twisted 12.1.0 的 Python 2.7.3，而 MongoDB 的内容实际上只与理解上下文相关。

* * *

我想要每个 deferred 的结果，但`cooperate()`不返回这些结果，所以我在将它们交给`CooperativeTask`s 之前为每个 deferred 添加了一个回调：

```
from twisted.internet.defer import DeferredList, inlineCallbacks
from twisted.internet.task import cooperate

NO_RESULT = object()

def generate_update_deferreds(collection, many_docs, save_results):
    for i, doc in enumerate(update_docs):
        d = collection.update({'_id': doc['_id']}, doc, upsert=True)
        d.addBoth(save_result, i, save_results) # Save result
        yield d

def save_result(result, i, save_results):
    save_results[i] = result

@inlineCallbacks
def update_docs(collection, many_docs):
    save_results = [NO_RESULT] * len(many_docs)
    gen_deferreds = generate_update_deferreds(collection, many_docs, save_results))
    workers = [cooperate(gen_deferreds).whenDone() for _i in xrange(count)]
    yield defer.DeferredList(workers)
    # Handle save_results... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:18:25.740

Twisted 中有一些工具可以帮助您更轻松地做到这一点。例如合作：

```
from twisted.internet.task import cooperate

def generate_update_deferreds(collection, many_docs):
    for doc in update_docs:
        d = collection.update({'_id': doc['_id']}, doc, upsert=True)
        yield d

work = generate_update_deferreds(...)
worker_tasks = []
for i in range(count):
    task = cooperate(work)
    worker_tasks.append(task)

all_done_deferred = DeferredList([task.whenDone() for task in worker_tasks]) 
```

# eclipse-plugin - 初学黄瓜查询-安装黄瓜eclipse插件后如何创建特征文件

> ID：15626083
> 
> 赞同：0
> 
> 时间：2013-03-25T22:33:03.303
> 
> 标签：eclipse-plugin, cucumber

从链接[http://mrpotes.github.com/cukes-jvm-eclipse-plugin/update-site](http://mrpotes.github.com/cukes-jvm-eclipse-plugin/update-site)安装黄瓜 eclipse 插件后，我重新启动了 eclipse 并一直在尝试创建一个黄瓜功能文件。

我正在尝试创建我的第一个功能。但是当我选择`File - New - Project`or时`File - New - Other`，我看不到列出的黄瓜功能，因此我可以选择并创建一个功能文件。

请帮助我完成在 Eclipse 中创建黄瓜功能文件的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:17:47.413

我不使用那个插件，但功能文件只是一个文本文件，你为什么不创建一个呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T17:50:28.537

安装最新版本的 Eclipse，其中“安装新软件”（Help->Install New Software..）选项可用。执行以下步骤：

1.  帮助->安装新软件..
2.  安装窗口将打开，在该窗口中单击添加按钮
3.  添加存储库窗口将打开，在该类型中输入以下
    名称：黄瓜
    位置：[http ://cucumber.github.com/cucumber-eclipse/update-site](http://cucumber.github.com/cucumber-eclipse/update-site)
4.  点击确定

重新启动 Eclipse 后，您可以创建功能文件。

# linux - 使用 ip tuntap 命令点击接口和 /dev/net/tun 设备

> ID：15626088
> 
> 赞同：11
> 
> 时间：2013-03-25T22:33:31.200
> 
> 标签：linux, networking, network-programming, tap, tun

我正在使用`ip tuntap`创建一个点击界面，如下所示：

```
$ sudo ip tuntap add mode tap tap0 
```

之后，我设置接口并使用通用 IP 命令对其进行寻址。然后我可以看到我的界面并用一个简单的`ifconfig`.

现在，一位老师告诉我，通过创建一个 tap 接口（在这种情况下命名为 tap0），我会找到一个`/dev/net/tap0`节点，并且我可以在其中写入或读取它。但是，我找不到它。我“只是”有一个`/dev/net/tun`.

我必须处理这个 tun 节点，还是我真的应该有一个 tap0 节点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-02-06T14:15:27.967

自从提出这个问题以来已经有很长时间了，但我认为发布一个实际答案以供将来参考是个好主意。

Tap 接口和 tun 接口一样，是内核内 TUN/TAP 设备驱动程序提供的虚拟接口。该驱动程序最初提供的唯一接口是`/dev/net/tun`问题中提到的字符设备。

通过发出：

```
$ sudo ip tuntap add mode tap tap0 
```

我们指示`ip tuntap`创建一个名为 的网络接口`tap0`，这是通过[`ioctl(2)`](http://man7.org/linux/man-pages/man2/ioctl.2.html)对上述设备文件的正确调用`/dev/net/tun`来与底层 TUN/TAP 设备驱动程序对话来完成的，正如我们[在`ip tuntap`源代码](https://bitbucket.org/ymcrcat/iproute2/src/82f0e0f3c5046409473a726df2647becfe6a514d/ip/iptuntap.c?at=master&fileviewer=file-view-default#iptuntap.c-48)中所看到的那样。

其中一个`ioctl(2)`调用（带有`TUNSETIFF`选项的调用，首先被调用）返回一个文件描述符，该文件描述符与新创建的虚拟接口相关联，并且可以由进程使用。

* * *

总结一下：

> 我必须处理这个 tun 节点，还是我真的应该有一个 tap0 节点？

设备文件仅用作创建 tap 和 tun 接口的`/dev/net/tun`起点，用户空间实用程序如`iproute2`. 在这个问题的背景下，没有必要像`ip tuntap`我们的工作那样处理它。

**不需要或不**希望为使用分接接口的进程创建任何额外的`/dev/net/tap0`设备文件。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-06T13:56:47.483

you need to activate that link with command

# ip link set dev tap0 up

after that you can use it.**

# php - PHP中加密文本的解密

> ID：15626089
> 
> 赞同：0
> 
> 时间：2013-03-25T22:33:32.370
> 
> 标签：php, encryption, rsa, cryptico

我正在尝试在 PHP 中解码加密数据，但是返回值一直返回为空。

要解密的数据作为数据参数进入 PHP 文件。

```
$dataArg1 = $_REQUEST["data"];

// Retrieve $encryptedData from storage ...
//
// Load the private key and decrypt the encrypted data
$encryptedData = $dataArg1;
$privateKey = array ( array(123456,654321,123456), array(123456,1234),
                      array(1234567,4321)
                    );
    openssl_private_decrypt($encryptedData, $sensitiveData, $privateKey); 
```

上面的函数来自 Stack Overflow 上另一个帖子的第二个响应： [如何在 javascript 中加密数据并在 php 中解密？](https://stackoverflow.com/questions/2414064/how-to-encrypt-data-in-javascript-and-decrypt-in-php)

我假设解密后的值在 PHP 变量 $sensitiveData 中。

当我在屏幕上回显它时，我什么也得不到。

```
echo("sensitiveData=[$sensitiveData]<br />"); 
```

想法？

更新： openssl_private_decrypt() 的返回值为 FALSE，返回值为 NULL。

更新 2：我从以下 URL 创建了公钥/私钥。 [http://shop-js.sourceforge.net/crypto2.htm](http://shop-js.sourceforge.net/crypto2.htm)

在底部，有一行：并将以下内容放入您的私人脚本中（可能在您的本地硬盘上 - 而不是在互联网上 - 如果找到您的私钥，这整个事情都是无用的。）

```
<script>
function decrypt() {
 // key = [ [d], [p], [q] ];
 var key=[[123456789,123456789,123456789],[123456789,1234],[123456789,4321]];
 document.form.text.value=rsaDecode(key, document.form.text.value);
}
</script>
(actual values changed) 
```

我将翻译的“var key=”行复制到 PHP（根据我的其他帖子）。上面的翻译使用嵌入式数组。然后我将该密钥传递给解密函数。

我的想法是 PHP 文档将私钥称为“混合”。我想知道是否可能需要不同格式的私钥。

这是输出：

```
dataArg1=[jmOdss9ktFc\"WO5eltUZXt0rpqS1NluNKa]

bResult=[]

sensitiveData=[]

var_dump=[NULL ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:59:30.817

$privateKey 必须采用某种格式。您不能只是向它输入随机数据并神奇地期望它知道如何处理它。

此外，看看你正在使用的 js，它不仅仅是在做 RSA。它有一个名为`base64ToText`. 它用它来解码密文，将第一个字节作为“加密会话密钥”的长度，得到“加密会话密钥”，用 RSA 解密，然后用它作为 RC4 的密钥来解密它。但这也存在许多问题。除其他外，与名称可能暗示的`base64ToText`PHP 不同。`base64_encode`

无论如何，我无法让它工作。就个人而言，我会推荐更像这样的东西（它可以与 PHP / [phpseclib 的 Crypt_RSA](http://phpseclib.sourceforge.net)互操作）：

[http://area51.phpbb.com/phpBB/viewtopic.php?p=208860](http://area51.phpbb.com/phpBB/viewtopic.php?p=208860)

也就是说，我确实设法弄清楚了一些事情。您的 js 库使用 base-28。要将数字从该格式转换为一种 phpseclib 使用，您需要使用此函数：

```
function conv_base($num)
{
    $result = pack('N', $num[count($num) - 1]);

    for ($i = count($num) - 2; $i >= 0; --$i) {
        _base256_lshift($result, 28);
        $result = $result | str_pad(pack('N', $num[$i]), strlen($result), chr(0), STR_PAD_LEFT);
    }

    return $result;
}

function _base256_lshift(&$x, $shift)
{
    if ($shift == 0) {
        return;
    }

    $num_bytes = $shift >> 3; // eg. floor($shift/8)
    $shift &= 7; // eg. $shift % 8

    $carry = 0;
    for ($i = strlen($x) - 1; $i >= 0; --$i) {
        $temp = ord($x[$i]) << $shift | $carry;
        $x[$i] = chr($temp);
        $carry = $temp >> 8;
    }
    $carry = ($carry != 0) ? chr($carry) : '';
    $x = $carry . $x . str_repeat(chr(0), $num_bytes);
} 
```

这是我用来确认其正确性的脚本：

```
<?php
include('Math/BigInteger.php'); 

$p = array(242843315,241756122,189); 
$q = array(177094647,33319298,129); 
$n = array(45173685,178043534,243390137,201366668,24520); 

$p = new Math_BigInteger(conv_base($p), 256); 
$q = new Math_BigInteger(conv_base($q), 256); 
$n = new Math_BigInteger(conv_base($n), 256); 

$test = $p->multiply($q); 
echo $test . "\r\n" . $n; 
```

IE。他们匹配。

我还将您的 js 移植`base64ToText`到 PHP：

```
function decode($t)
{
    static $b64s = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_"';
    $r = '';
    $m = $a = 0;
    for ($n = 0; $n < strlen($t); $n++) {
        $c = strpos($b64s, $t[$n]);
        if ($c >= 0) {
            if ($m) {
                $r.= chr(($c << (8-$m))&255 | $a);
            }
            $a = $c >> $m;
            $m+=2;
            if ($m == 8) {
                $m = 0;
            }
        }
    }

    return $r;
} 
```

在我可能遇到的其他潜在问题中......谁知道他们的 RC4 实现是否正确？他们的 base64 实现并非如此，因此 RC4 实现也被打破并非没有先例。

# javascript - 为什么使用 popcorn.js 不显示 XML 字幕？

> ID：15626090
> 
> 赞同：1
> 
> 时间：2013-03-25T22:33:35.513
> 
> 标签：javascript, xml, html, popcornjs

我从 Popcorn Javascript 网站获得了 popcorn.js。它运行良好，对开始、结束和文本进行了硬编码。现在我添加了另一个函数来获取字幕 XML（start、dur 和 text）并存储到 subtitleArray。我将第一个文本字幕替换为 firstLine(subtitleArray[0][2])。然后运行它，它不会显示第一行，但会显示下一行。我认为它可能不会同时运行所有功能还是其他什么？

```
<html>
    <head>
        <title>HTML5 included Javascript....</title>
        <meta name="description" content="Test" charset="utf-8"></meta>
        <script src="popcorn.js"></script>
        <script type="text/javascript">

                var subtitleArray = new Array(); //stored all values from XML caption file
                var firstLine;

                function loadXMLDoc(dname)
                {
                    if (window.XMLHttpRequest)
                    {
                    xhttp=new XMLHttpRequest();
                    }
                    else
                    {
                    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xhttp.open("GET",dname,false);
                    xhttp.send();

                    return xhttp.responseXML;
                }

                function getCaption()
                {

                    var tempArray = new Array();
                    var c = document.getElementById('container');

                    captionsDoc = loadXMLDoc("captions.xml");
                    x=captionsDoc.getElementsByTagName('text');

                    for(var i=0;i<x.length;i++)
                    {
                        var tempArray = new Array();
                        tempArray[0] = x[i].getAttribute('start'); // get start time
                        tempArray[1] = x[i].getAttribute('dur'); // get duration time
                        tempArray[2] = x[i].childNodes[0].nodeValue; // get text

                        subtitleArray[i] = tempArray; //put all 3 values in array

                    }           

                    c.innerHTML = subtitleArray[0][2];
                    firstLine = subtitleArray[0][2];

                } 

                document.addEventListener("DOMContentLoaded", function () {

                    var popcorn = Popcorn("#video");

                    popcorn.subtitle({
                        start: 0,
                        end: 3,
                        text: firstLine, // "Hello World" replace to subtitleArray[0][2]
                        target: "text"
                    }).subtitle({
                        start: 3,
                        end: 6,
                        text: "This is second line",
                        target: "text"
                    });

                    popcorn.play();
                }, false);

            window.onload = getCaption;

        </script>
    </head>
    <body>

        <div>
            <video id="video" width="320" height="240" controls="true" preload="none">
                <source src="caption.mp4" type="video/mp4" />
                <source src="caption.webm" type="video/webm" />
                <source src="caption.ogg" type="video/ogg" />
            </video> 
        </div>
        <div id="text" style="width:980px;height:50px;"></div>
        <div id="container"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T14:00:53.180

```
for (var i = 0; i < subtitleArray.length; i++) {
    pop.footnote({
        start: subtitleArray[i][0],
        end: subtitleArray[i][1],
        text: subtitleArray[i][2],
        target: "yourDiv'sId"
    });

} 
```

# android - Osmdroid 和捏

> ID：15626091
> 
> 赞同：5
> 
> 时间：2013-03-25T22:33:35.780
> 
> 标签：android, zooming, openstreetmap, osmdroid, pinch

我正在使用 osmdroid (3.0.8) 开发一个应用程序。当我使用两根手指进出缩放时，缩放从地图的中心开始，而不是从两根手指的中间开始（使用`MapView.setMultiTouchControls(true);`）。我试图实现捏（[捏](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847)），但结果不好。我读过其他类似的问题，但没有找到好的解决方案。

注意：我必须使用 OSM，而不是其他解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:07:05.223

Osmdroid 3.0.10 支持在您捏合的位置进行缩放。

如果您有兴趣尝试，这些示例还包括两指旋转手势叠加。

# linux - 在 GDB 中写入十六进制

> ID：15626093
> 
> 赞同：13
> 
> 时间：2013-03-25T22:33:52.787
> 
> 标签：linux, gdb, buffer, overflow

我正在学习软件安全课程，我们目前正在学习缓冲区溢出以及它们是如何被利用的。我有一个我知道如何利用的程序，但我似乎无法这样做，因为我必须编写它不允许我编写的十六进制。

我需要编写从以下位置生成的数据：

```
perl -e 'print "A"x48; print "\x1b\x88\x04\x08";' 
```

但是，我无法将该输出重定向到命令行参数，因为程序以交互方式运行。从历史上看，我曾使用 xclip 将其复制到剪贴板，然后将其粘贴到正在运行的应用程序中，但由于某种原因，这个十六进制序列不允许我使用 xclip 来复制它（它显示没有任何内容被复制）。

例如：

```
perl -e 'print "A"x48; print "\x1b\x88\x04\x08";' | xclip -sel clip 
```

如果之后我按 ctrl+V，则不会粘贴任何内容。如果我只是从终端窗口复制并粘贴输出，则会粘贴错误的十六进制（我假设这是因为十六进制不是可见的 ASCII）。

我的问题是：GDB 是否有办法让我将这样的生成文本插入到交互式运行程序中？

我知道如果可利用程序采用命令行参数，我可以这样做：

```
run $(perl -e 'print "A"x48; print "\x1b\x88\x04\x08";') 
```

但由于它不通过 cli 参数运行，因此无法使用。

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T04:17:28.423

> 我的问题是：GDB 是否有办法让我将这样的生成文本插入到交互式运行程序中？

您的问题是基于误解：您似乎认为 GDB 以某种方式拦截了您正在执行的“粘贴”，而不是让目标程序读取字符。

但是，GDB*不会*拦截任何输入，除非您在断点处*停止*（或由于信号）。因此，当您的程序正在运行（并读取输入）时，GDB 本身被阻塞（在`waitpid`系统调用中）等待某些事情发生。

那么是什么阻止您的程序接收控制字符呢？您的终端模拟器可以。

好的，如何安排非 ASCII 输入？三种方式之一（两种非常相似）：

1.  使用来自文件的输入
2.  使用命名管道的输入
3.  使用 gdbserver

对于方法#1：

```
perl -e 'print "A"x48; print "\x1b\x88\x04\x08";' > /tmp/input
gdb ./a.out
(gdb) run < /tmp/input   # voila: GDB reads terminal,
                         # your program reads /tmp/input 
```

方法#2：

```
mkfifo /tmp/pipe
perl -e 'print "A"x48; print "\x1b\x88\x04\x08";' > /tmp/pipe &
# perl will block, waiting for someone to read the pipe
gdb ./a.out
(gdb) run < /tmp/pipe 
```

上述两种方法都适用于“正常”程序（读取的程序`STDIN`），但对于直接读取终端的程序（例如，，，）`sudo`将`passwd`失败`gpg`。

方法#3：

```
perl -e 'print "A"x48; print "\x1b\x88\x04\x08";' |
gdbserver :0 ./a.out  # gdbserver will print a TCP port, e.g. 4321
                      # and stop the program at start

# in another window,
gdb ./a.out
(gdb) target remote :4321
# gdb will now attach to gdbserver, you can set breakpoints and continue. 
```

# php - Yii框架可以验证CFormModel类的规则函数中的字段数组吗

> ID：15626094
> 
> 赞同：2
> 
> 时间：2013-03-25T22:33:54.407
> 
> 标签：php, yii, frameworks, yii-cform

我正在将动态文本字段添加到模型中名为名称的属性中，但我喜欢为视图中数组名称中的每个名称设置验证规则，这可以在 CForm 模型中取消验证规则吗？例如我想验证单击按钮后是否需要每个名称。

这是带有 CActiveForm 的视图的代码

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'test',
'enableClientValidation'=>true,
'clientOptions'=>array(
    'validateOnSubmit'=>true,
),
)); ?>

<p class="note">Campos <span class="required">*</span> son obligatorios.</p>

<div class="row">
    <?php echo $form->labelEx($model,'Age'); ?>
    <?php echo $form->textField($model,'age'); ?>
    <?php echo $form->error($model,'age'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'Name'); ?>
    <?php echo $form->passwordField($model,'names[0]'); ?>
    <?php echo $form->error($model,'names[0]'); ?>

</div>

<div class="row">
    <?php echo $form->labelEx($model,'Name'); ?>
    <?php echo $form->passwordField($model,'names[1]'); ?>
    <?php echo $form->error($model,'names[1]'); ?>

</div>

<div class="row buttons">
        <?php echo CHtml::submitButton('test'); ?>
    </div>

<?php $this->endWidget(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:15:40.350

您需要编写一个自定义验证器，假设要验证的属性是一个数组，并将另一个验证器的结果应用于其每个元素。

我使用[这个验证器](http://www.yiiframework.com/extension/array-validator/)作为起点；在稍微清理和尽可能简化之后，我得到了这个用于服务器端验证的代码：

```
protected function validateAttribute($object, $attribute)
{
    $value = $object->$attribute;

    if (!is_array($value) ) {
        $this->addError($object, $attribute, "TODO: error message");
        return;
    }
    else if ($this->isEmpty($value)) {
        if (!$this->allowEmpty) {
            $this->addError($object, $attribute, "TODO: error message");
        }

        return;
    }

    // $this->validator and $this->parameters are supposed to be
    // attributes of your custom validator class that you set from
    // inside rules().
    $validator = self::createValidator(
        $this->validator,
        $object,
        array($attribute),
        $this->parameters);

    $errors = array();

    // Iterate over $value, validating each item in turn.
    // Since $validator may be a filtering validator, we need to make
    // sure that any changes it makes to the validated item stick, so
    // we iterate by reference and do a bit of back and forth shuffling.
    foreach($value as $key => &$item) {
        $object->$attribute = $item; // the only way
        $validator->validateAttribute($object, $attribute);
        $item = $object->$attribute; // make any changes stick

        if ($object->hasErrors($attribute)) {
            $errors[$key] = $object->gerErrors($attribute);
            $object->clearErrors($attribute);
        }
    }

    unset($item); // always a good idea after foreach by reference
    $object->$attribute = $value; // undo the damage

    // And now decide what to do with $errors, which is per-item.
    // This should be good:
    foreach ($errors as $key => $error) {
         $object->addError("$attribute[$key]", $error);
    }
} 
```

好的，但是客户端验证呢？看来这应该是可能的，但我还没有测试过：

```
public function clientValidateAttribute($object,$attribute)
{
    // Since this is copy/pasted from above, it's an obvious candidate
    // for refactoring into a private method. I 'm keeping it simple.
    $validator = self::createValidator(
        $this->validator,
        $object,
        array($attribute),
        $this->parameters);

    $js = '';

    // No need for filtering support here (I think...)
    foreach($value as $key => $item) {
        $object->$attribute = $item;
        $js .= $validator->clientValidateAttribute($object, $attribute);
    }

    return $js;        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:25:03.000

首先，您需要指定模型中的关系。例如：

```
'user' => array(self::BELONGS_TO, 'User', 'user_id'), 
```

然后在搜索功能中使用该关系，如：

```
$criteria->with=array('user'); 
```

并在您的视图中使用它，例如：

```
array(
'name'=>'username_search',
'value'=>'$data->user->username',
'header'=>'Posted By',
), 
```

# java - 类数组的字母顺序

> ID：15626096
> 
> 赞同：0
> 
> 时间：2013-03-25T22:34:14.877
> 
> 标签：java, sorting, java-7, bubble-sort

我有一个 Class 数组`Customer`。我想`Customer`根据名为`name`.

这是我正在使用的代码：

```
int j;
        boolean flag = true;  // will determine when the sort is finished
        Customer temp;
        while ( flag )
        {
            flag = false;
            for ( j = 0;  j < count_customers;  j++ )
            {

                if ( customers[ j ].getName().toString().compareToIgnoreCase( customers[ j + 1 ].getName().toString() ) > 0 )
                {
                    temp = customers[ j ];
                    customers[ j ] = customers[ j+1 ];     // swapping
                    customers[ j+1 ] = temp; 
                    flag = true;
                 } 
             } 
         } 
```

`customers[]``Customer` `count_customers`是代表活跃客户数量的数组。出于某种原因，当我运行下面的代码时，什么也不返回：

```
 for(int i=0; i < count_customers; i++)
        {
            tmp_results += customers[ i ].toString() + "\n";
        } 
```

`.toString()`在`Customer`类中定义，它只是打印出关于客户的所有信息。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:38:40.110

创建一个新类`CustomerComparator`并排序您的`Customer[]`使用`Arrays.sort(array, new CustomerComparator());`

```
public class CustomerComparator implements Comparator<Customer> {

    @Override
    public int compare(Customer c1, Customer c2) {
        return c1.getName().compareTo(c2.getName());
    }

} 
```

# jquery - JQM 根据表单选择值删除元素

> ID：15626100
> 
> 赞同：2
> 
> 时间：2013-03-25T22:34:37.860
> 
> 标签：jquery, jquery-mobile

我正在尝试在我的第一个 JQM 站点中添加一个条件表单元素

本质上，如果先前选择的值符合预定义的常数，我想添加一个字段。

```
<select id="list1">
    <option value="1">Item1</option>
    <option value="2">Item2</option>
</select>
<select id="list2">
    <option value="3">Item3</option>
    <option value="4">Item4</option>
</select> 
```

`list2`使用 JQM，如果从中选择了选项值 2 ，我想动态删除`list1`

我确信这是一个新手问题......但这正是我的身份。任何帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:45:36.153

```
$('#list1').on('change', function () {
 if ($(this).val() == '2') {
  $('#list2').parent('div').hide();
 } else {
    $('#list2').parent('div').show();
 }
}); 
```

示例：[显示/隐藏选择菜单](http://fiddle.jshell.net/Palestinian/Jv3mv/)

# excel - 在 VBA 中创建过期发票摘要

> ID：15626104
> 
> 赞同：1
> 
> 时间：2013-03-25T22:35:01.670
> 
> 标签：excel, vba

嗨：我希望创建一个表格，按客户和年龄（0-30、31-60、61-90、91-120、>120）记录未结发票的数量。A 列至少包含 1000 行，包含 50 个不同的客户端，已排序。客户有时会被添加和删除。B 列包含每张发票打开的天数，行数相同。因此摘要应为第一列中的客户名称，以及上述 5 个期间的 5 列。总共 50 个客户意味着摘要中有 50 行，外加一个标题。

到目前为止我所做的：我可以插入 COUNTIF 公式`CountIf(B1:B15,"<60") - CountIf(B1:B15,"<31")`来得出正确的计数。但我所指的范围因文件而异。A1:A15 今天是客户 A，明天可能是 A1:A29。如果我可以在开始之前在 A 列中命名不同的范围，那么公式将是一个快照：`CountIf(ClientA, "<60")` 或者也许有更简单的方法。

作为最后的手段，我可​​以对列表进行 50 次排序（对于每个客户端）并在每次排序后运行计算，但这将是很多代码。并且客户列表不时更改，因此需要维护排序字段。提前致谢。

# java - Seam3 @ViewConfig 重定向页面 https

> ID：15626105
> 
> 赞同：0
> 
> 时间：2013-03-25T22:35:18.040
> 
> 标签：java, jsf, jboss7.x, seam

我有 seam 3.1.0 Final 应用程序，使用 @ViewConfig 作为安全部分，它可以很好地重定向 http，

```
@ViewConfig
public interface AppViewConfig {

static enum Checkout {
    @ViewPattern("/test/*")
    @User
    ADMIN,

    @FacesRedirect
    @ViewPattern("/*")
    @AccessDeniedView("/denied.xhtml")
    @LoginView("/login.xhtml") //todo I need redirect https://localhost:443/myApp/login.xhtml
    ALL;
} 
```

}

但我需要重定向到 https 例如（“ [https://domain.com:443/myApp/login.xhtml](https://domain.com:443/myApp/login.xhtml) ”）页面我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:22:26.907

Seam 3 使用名为 Seam Faces 的子系统处理 JSF。根据这个[Seam Faces 问题](https://issues.jboss.org/browse/SEAMFACES-192)，为页面指定 http 或 https 方案的问题仍未解决。

# scheme - 初学者方案：将二叉搜索树变成列表

> ID：15626116
> 
> 赞同：1
> 
> 时间：2013-03-25T22:35:58.553
> 
> 标签：scheme, racket

我在使用二叉搜索树并将它们转换为列表时遇到问题。

```
(define-struct node (key val left right))
;; A binary search tree (bst) is either
;; empty, or
;; a structure (make-node k v l r), where
;; k is a number (the key),
;; v is a string (the value),
;; l is a bst, where every key in l is less than k, and
;; r is a bst, where every key in r is greater than k. 
```

谁能给我提示如何解决这个问题？

创建一个使用二叉搜索树的函数 bst 并返回二叉搜索树节点的 value 字段中所有字符串的列表，该列表必须根据二叉搜索树中的键值降序排列。

```
;;Examples: (bst (make-node 4 "James" (make-node 2 "Kien" empty empty)
;;(make-node 5 "Jack" empty (make-node 11 "Cole" empty empty)))) => (list "Cole" "Jack" "James" "Kien") 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:43:35.197

基本上，您必须使用反向[顺序遍历](http://en.wikipedia.org/wiki/Tree_traversal#In-order)（右子树/值/左子树）访问树中的所有节点，同时创建一个带有答案的列表。这些方面的东西：

```
(define (tree->list tree)
  (if (empty? tree)
      empty
      (append (tree->list (node-right tree))
              (cons (node-val tree)
                    (tree->list (node-left tree)))))) 
```

它按预期工作：

```
(define bst
  (make-node 4 "James"
             (make-node 2 "Kien" empty empty)
             (make-node 5 "Jack" empty
                        (make-node 11 "Cole" empty empty))))

(tree->list bst)
=> (list "Cole" "Jack" "James" "Kien") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T19:23:58.710

```
(define (tree->list tree)
  (if(leaf? tree)
     (list (node tree))
     (cond((right-branch-only? tree)(append (list(node tree))
                                            (tree->list (right-branch tree))))
          ((left-branch-only? tree)(append (list(node tree))
                                           (tree->list (left-branch tree))))
          (else(append (list (node tree))
                       (append (tree->list (left-branch tree))
                               (tree->list (right-branch tree)))))))) 
```

# delphi - 如何在 Windows XP 上挂接 ws2_32.connect？

> ID：15626119
> 
> 赞同：1
> 
> 时间：2013-03-25T22:36:10.903
> 
> 标签：delphi, winapi, hook, winsock

我一直`connect`在外部进程中挂钩 ws2_32 的功能。我只是简单地创建进程，`CREATE_SUSPENDED`然后将“hook.dll”注入到进程中以挂钩`connect`函数。在 Windows 7 x64 上一切正常，我使用了大约 5 个不同的挂钩库（MagicAPIHook、UALLHook、AFXCodeHook、GenCodeHook、DetourHook 等）。但是，它似乎*根本不适*用于 Windows XP。所有其他 API 函数似乎在 Windows XP 上都可以正常工作（`MessageBox`、`CreateProcess`、`VirtualAlloc`等）。我怎么上钩`connect`？

# mercurial - 使用 Mercurial 测试新功能集的最佳策略是什么

> ID：15626125
> 
> 赞同：1
> 
> 时间：2013-03-25T22:36:31.867
> 
> 标签：mercurial

我在 Mercurial 中设置了一个存储库，其中包含所有新的开发代码（并且我正在使用包含稳定版本的稳定分支）。

当我想测试新功能但将其与默认分支隔离时，最好使用什么策略？

只有当我确定它工作正常时，我才想把它放在默认分支中。我认为为每个新功能创建分支是没有意义的。

我记得读过一些关于创建临时分支然后在一切按预期工作时将其删除的内容。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:30:57.250

> 我认为为每个新功能创建分支是没有意义的。

重新考虑一下。“每个任务的分支”是完全正确和有效的工作流程：您将更改与主线分开（但可以从/默认同步/获取更改），完成和测试的更改可以集成到主线（合并分支）或放弃（关闭分支）和你会回到历史上的干净点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:55:21.003

您（每个认真的开发人员）都需要一个系统的分支模型，而不是一些随机的最佳策略或技巧。搜索 git-flow 和 hg-flow。

# unix - 在 awk 中接受命令行参数

> ID：15626128
> 
> 赞同：0
> 
> 时间：2013-03-25T22:36:45.487
> 
> 标签：unix, awk

我环顾四周，发现只有涉及该主题的问题或为我提供的答案不起作用。这是问题：

我正在为学校做一项作业，该作业要求我阅读 awk 脚本的命令行参数（一开始似乎很奇怪，但是嗯）。我们使用的是旧版本的 Unix，而我正在运行 Bash。此 awk 只有 -f 和 -Fc 选项。基本上，我一直在尝试执行“awk -f awk_script arg1 arg2 arg3 arg4 arg5 arg6”，但每次 awk 都尝试将 arg1 作为文件打开，但事实并非如此。我在其他地方看到的一个例子是：

```
awk 'BEGIN { print "ARGV[1] = ", ARGV[1] }' foo bar 
```

它应该打印“foo”，但在这个系统上我只得到输出“ARGV[1] = awk: can't open foo”。所以，总而言之，有没有办法解决这个问题？可以 awk 这个旧的读取命令行参数并将它们用于输入文件以外的任何内容吗？讲师注释文件暗示了上述用法（打印 foo），但他的程序甚至没有运行，所以......

任何帮助将不胜感激。

编辑后：使用 SunOS 5.10 并且此 awk 不支持 -v 选项，仅支持 -f 和 -Fc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-13T08:42:17.370

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:53:19.007

一种可能的解决方法（可能不可接受）是使用 -v 选项`awk`。

```
awk -v arg1=foo 'BEGIN { print arg1; }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:11:49.790

使用`nawk`或`/usr/xpg4/bin/awk`。这些是支持更多功能的较新版本的 awk。

或者，您可以安装另一个版本的 awk`mawk`或 GNU awk。

# php - PHP - 打印出一个数组似乎并没有产生我想要的

> ID：15626131
> 
> 赞同：0
> 
> 时间：2013-03-25T22:37:00.510
> 
> 标签：php, json

我正在使用 PHP 并尝试创建一个看起来像这样的数组：

```
{
    "aps" : {
        "alert" : "Hey"
    },
    "custom_control" : {
        "type" : "topic_comment",
        "object":{
            "topic_id":"123",
            "topic_section":"test"
                        "plan_id":"456"
        }
    }
} 
```

我的代码是：

```
 <?php
    $message = array(
        "aps" => array(
            "alert" => "hey"
        ),
        "custom_control" => array(
            "type" => "topic_comment",
            "object" => array(
                "topic_id" => "123",
                "topic_section" => "abc",
                "plan_id" => "456"
            )
        )
    );

print_r($message);
?> 
```

但打印出来的是这样的：

```
Array ( [aps] => Array ( [alert] => hey ) [custom_control] => Array ( [type] => topic_comment [object] => Array ( [topic_id] => 123 [topic_section] => abc [plan_id] => 456 ) ) ) 
```

看起来这与我想要的格式完全不同。还是我在某些方面不正确？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:38:05.077

似乎您忘记了对 $message 变量进行 json_encode 编码。

```
<?php echo json_encode($message); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:39:18.557

你需要这样做：`echo json_encode($message);`

`print_r($message);`只是转储数组的内容，用于调试。

# javascript - 如何阅读和显示用户 Twitter 提要？

> ID：15626133
> 
> 赞同：1
> 
> 时间：2013-03-25T22:37:03.883
> 
> 标签：javascript, html, json, twitter

这可能是一个大问题，但我发现 Twitter 开发者网站比 Facebook 开发者网站更令人困惑。因此，在完成 Facebook API 之后，我想做更多的研究并了解 Twitter API 的工作原理。

我想做的是制作一个基本的应用程序，它可以读取和显示登录用户的 Twitter 主页，并将 Tweet 发布到他们的个人资料中。但首先，我如何阅读和显示用户提要？首先，我必须对用户和我的应用程序进行身份验证。任何人都可以向我展示一个我可以阅读的代码示例吗？然后我将不得不阅读用户提要。这是通过向 /statuses/user_timeline.json 发送 GET 请求来完成的，但是如何在代码中执行此操作？我如何接收响应，最后如何向用户显示？

我知道 Facebook 在他们的网页上有一个示例，它逐步引导您完成这样的过程（使用代码），但是 Twitter 有类似的东西吗？如果没有，有线索的人可以给我一点指南和一些代码吗？

现在，如果您知道/有时间进一步回复，我想知道如何将某些内容发布到用户流。我假设它是通过向某物发送 POST 请求来完成的，但我还没有阅读过。如果您知道，请随时将其添加到您的答案中。如果没有，没有压力。阅读流是最重要的。

所以，感谢您花时间阅读本文，希望有人知道如何执行此操作/在哪里阅读此内容。提前致谢。

*   亚历山大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:45:13.993

如果您刚刚开始使用 API，您应该查看[Temboo](http://temboo.com)。Temboo 让您在浏览器中试验数千个 API 调用，然后以您选择的语言（Java、iOS、Android、PHP、Ruby、Python、节点.js）。如果您使用 Javascript，您还可以向 Temboo API 生成 curl 请求。

Temboo 的 Twitter 支持将帮助您完成上述所有操作，请访问：[https ://www.temboo.com/library/Library/Twitter](https://www.temboo.com/library/Library/Twitter)

（完全披露：我在 Temboo 工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:48:55.233

我使用 PHP 来获取用户的推文。我假设它也可以用 JS 完成。

这是我使用的：

```
function getTweets($userid,$x){
    $url = "http://api.twitter.com/1/statuses/user_timeline/$userid.xml?count=$x";
    $xml = simplexml_load_file($url) or die('Could not get tweets');
    echo '<ul>';
    foreach($xml->status as $status){
      echo grabTweetData($status);
    }
    echo '</ul>';
}

function grabTweetData($status) {
    $id = $status->id;
    $user = $status->screen_name;
    $text = twitterify( $status->text );
    $timestamp = $status->created_at;
    $date = substr($timestamp, 0, 10).', '.substr($timestamp, -4).' at '.substr($timestamp, 11, 5);

    $tweet = '<a href="https://twitter.com/'.$user.'/status/'.$id.'"><li>';
    $tweet .= '<div class="ttext">'.utf8_decode($text).'</div>';
    $tweet .= '<div class="tdate">Posted on: '.$date.'</div>';
    $tweet .= '</li></a>';
    return $tweet;
}

function twitterify($ret) {
    //links #tags and @users
    $ret = preg_replace("#(^|[\n ])([\w]+?://[\w]+[^ \"\n\r\t< ]*)#", "\\1<a href=\"\\2\" >\\2</a>", $ret);
    $ret = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a href=\"http://\\2\" >\\2</a>", $ret);
    $ret = preg_replace("/@(\w+)/", "<a href=\"http://www.twitter.com/\\1\" >@\\1</a>", $ret);
    $ret = preg_replace("/#(\w+)/", "<a href=\"http://twitter.com/search?q=\\1&src=hash\" >#\\1</a>", $ret);
    return $ret;
} 
```

# javascript - 链接的 JS 不在慢速网络服务器上运行

> ID：15626137
> 
> 赞同：-1
> 
> 时间：2013-03-25T22:37:28.160
> 
> 标签：javascript, html, xampp

我有一个可能非常简单的问题，完全是在欺骗我。

我有一个使用相当慢的 USB 棒运行的 Web 服务器 (XAMPP)。我有一个非常简单的文件结构：

```
--htdocs  
  --projects
    --callback  
      index.html  
        --js
          jquery-1.9.1.min.js
          callbackclient.js  
        --css
          main.css 
```

出于某种原因，我无法让一个简单的链接脚本工作：这是我的 index.html

```
<!DOCTYPE HTML>
<html>
  <head>
    <script src='js/jquery-1.9.1.min.js' type='text/javascript'></script>
    <script src='js/callbackclient.js' type='text/javacsript'></script>
    <link href='css/main.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    This is a test
  </body>
  <script>
    $(document).ready(function(){
      tester();
    });
  </script>
</html> 
```

这是我的 callbackclient.js：
`function tester(){ console.log("test"); }`

当我点击`localhost/projects/callback`浏览器时，按预期显示“这是一个测试”，但在控制台中出现错误：

`Uncaught ReferenceError: tester is not defined`

如果我尝试运行 tester(); 我会得到同样的结果 直接从控制台，但`$("head")`正确选择了我猜这意味着 jQuery 加载正常的 head 元素。

我一定错过了一些基本的东西——有人请赐教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:41:20.407

可能是您在脚本标签上拼错了类型。`text/javacsript`代替`text/javascript`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:46:03.343

在你的 callbackClient.js 中试试这个：

```
var tester = function (){ console.log("test"); } 
```

如果可行，您只需将函数设置为变量，然后调用它。如果这不起作用，那么我只需删除 HTML 页面上的 JS 代码并在 callbackClient.js 中执行此操作：

```
jQuery(function () {
    // Logic here
    console.log('this is working, right?');

    var functionName = function () {
        console.log('blah blah blah')
    }

    functionName();
}) 
```

希望有帮助！

# sql - 如何在我的 SELECT (T-SQL) 中使用变量

> ID：15626138
> 
> 赞同：2
> 
> 时间：2013-03-25T22:37:30.793
> 
> 标签：sql, sql-server, performance, tsql

我写了一个`INSERT/SELECT`非常有效的疯狂声明，除了我认为如果我可以避免使用`LEN([stats].[dbo].[Domain].[DomainName])`两次，它可以再调整一点。现在运行需要 20 秒，如果我`LEN`用实际数字替换这些部分进行测试，实际上需要一秒钟，因此我希望！

我一直在绞尽脑汁想如何将它变成一个变量，这样我就可以使用它两次，但只有一次性能受到影响。我在 SQL Server 2008 R2 上物有所值。

非常感谢！

```
INSERT INTO [stats].[dbo].[5MinStats] (Qty, MsgRequest, MsgRecType, MsgDateTime, DomainID)
   SELECT
      COUNT([stats].[dbo].[RawMsgLog].[MsgRequest]) AS Qty, 
      [stats].[dbo].[RawMsgLog].[MsgRequest], 
      [stats].[dbo].[RawMsgLog].[MsgRecType], 
      DATEADD(minute, DATEDIFF(minute, 0, [stats].[dbo].[RawMsgLog].[MsgDateTime])/ 5 * 5, 0) AS MsgDateTime, 
      [stats].[dbo].[Domain].[DomainID] 
   FROM 
      [stats].[dbo].[RawMsgLog], [stats].[dbo].[Domain]
   WHERE 
      RIGHT([stats].[dbo].[Domain].[DomainName], LEN([stats].[dbo].[Domain].[DomainName])) = RIGHT([stats].[dbo].[RawMsgLog].[MsgRequest], LEN([stats].[dbo].[Domain].[DomainName]))
      AND [stats].[dbo].[RawMsgLog].[switch] = 1
   GROUP BY 
      [stats].[dbo].[RawMsgLog].[MsgRequest], 
      [stats].[dbo].[RawMsgLog].[MsgRecType], 
      DATEADD(minute, DATEDIFF(minute, 0, [stats].[dbo].[RawMsgLog].[MsgDateTime]) / 5 * 5, 0), 
      [stats].[dbo].[Domain].[DomainID]
   ORDER BY 
      MsgDateTime ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:40:15.060

将您更改`WHERE`为以下内容：

```
WHERE stats.dbo.Domain.DomainName LIKE '%' + stats.dbo.RawMsgLog.MsgRequest 
```

这避免了`RIGHT()`and`LEN()`函数，并允许您的查询使用任何可用的索引......将函数应用于索引列将混淆它们并导致使用扫描。

我还会做一些其他的改变......

1.  别名你的表。
2.  `[]`不需要的话不要用...
3.  使用显式`JOIN`.

这会给你以下查询：

```
INSERT INTO stats.dbo.5MinStats (
    Qty, 
    MsgRequest, 
    MsgRecType, 
    MsgDateTime, 
    DomainID
)
SELECT 
    COUNT(rml.MsgRequest) as Qty, 
    rml.MsgRequest, 
    rml.MsgRecType, 
    DATEADD(minute, 
      DATEDIFF(minute, 0, rml.MsgDateTime)/ 5 * 5, 0) as MsgDateTime, 
    d.DomainID 
FROM 
    stats.dbo.RawMsgLog rml
    JOIN stats.dbo.Domain d
        ON d.DomainName LIKE '%' + rml.MsgRequest
WHERE rml.switch=1
GROUP BY 
    rml.MsgRequest, 
    rml.MsgRecType, 
    dateadd(minute, datediff(minute, 0, rml.MsgDateTime)/ 5 * 5, 0), 
    d.DomainID
ORDER BY MsgDateTime ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:46:09.593

您可以使用它`CHARINDEX`来加快速度：

```
WHERE CHARINDEX([stats].[dbo].[Domain].[DomainName], [stats].[dbo].[RawMsgLog].[MsgRequest]) > 0 
```

`DomainName`如果在列中的任何位置找到 in的值，这将返回 true `MsgRequest`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:59:08.240

在你的条件的前半部分，你做了一个“正确”，子字符串的长度与字段本身的长度相同（即 right(field, len(field))。你可以删除它并只使用该字段然后，您的比较可以是通配符文本：

```
WHERE stats.dbo.RawMsgLog.MsgRequest like '%' + stats.dbo.Domain.DomainName 
```

你也可以使用这个子字符串比较，但我想它会更慢。

```
right(stats.dbo.RawMsgLog.MsgRequest, LEN(stats.dbo.Domain.DomainName)) = stats.dbo.Domain.DomainName 
```

# php - 呼应一个 并获取它的 id

> ID：15626139
> 
> 赞同：0
> 
> 时间：2013-03-25T22:37:45.193
> 
> 标签：php, html

目前，在显示用户发布的所有帖子时，我执行以下操作：

```
while($info=mysql_fetch_array($data)) {
echo "<div id = 'posts'>";
   echo $info['subject'];
   echo $info['post-item'];
echo "</div>";

} 
```

但是，然而，我现在需要将获取的每个元素视为一个实际的帖子，而不仅仅是一个输出`div`，以获取每个帖子的 post_id，以便能够真正使用户能够与不同的帖子进行交互，例如“喜欢”一个帖子。

我曾尝试将喜欢的东西超链接到喜欢的东西 `href`，`?id=$thispost`但是遇到了用户更改网址等问题，或者即使我还想添加评论功能，我也需要一种不同的方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:47:40.367

至于不同的任务，您将传递不同的查询字符串：

```
<a href="page.php?do=like&id=2">like this</a>
<a href="page.php?do=comment&id=2">comment</a>
<a href="page.php?do=share&id=2">share this</a> 
```

在`page.php`中，你会...

```
if (isset($_GET['do'] && isset($_GET['id'])) {
    $do = $_GET['do'];
    $id = $_GET['id'];
} else exit("blabla");

switch ($do) {

    case 'like':
        // do sth
        break;

    case 'comment':
        // do sth
        break;

    // etc.

} // switch 
```

当然，通过 URL 传递值打开了操作的大门。
因此，要么存储`$do`和`$id`in`$_SESSION`要么 in `$_POST`。

示例`$_POST`：

```
$h = "";
while ($info = mysql_fetch_array($data)) {

    $h .=  '<div id = "posts">';
    $h .= '<form method="post" action="page.php">';
    $h .= "{$info['subject']}<br />{$info['post-item']}";
    $h .= "<input type=\"hidden\" name=\"id\” value=\”{$info['id']}\” />';
    $h .= '<input type="submit" name="do" value="like" />';
    $h .= '</form></div>';

}
echo $h; 
```

评论：
1\. 不要使用`mysql_*`, but `mysqli_*`or `PDO`-> 使您的代码面向未来且更安全
2\. 此代码在每个帖子周围创建一个表单，其中包含该帖子的 id（来自 db）的隐藏字段...
3\. 和一个按钮，它将向用户发送不可见的 id `page.php`。4\. 在`page.php`，你读到`$_POST`，就像我上面的例子一样`$_GET`：

```
if (isset($_POST['id'])) {
    $do = $_POST['do'];
    $id = $_POST['id'];
} else exit("blabla"); 

// etc. 
```

# c# - 动态访问 Windows 远程桌面

> ID：15626141
> 
> 赞同：0
> 
> 时间：2013-03-25T22:37:47.413
> 
> 标签：c#, .net, windows, user-accounts

这是我的设置：我有一个“服务器”计算机（Win7Pro），它通过以太网连接到 X 个其他“客户端”计算机（Win7Home）。

是否有一种解决方案可以在该客户端计算机上动态创建（C#？）用户以授予对特定时间段的远程桌面连接的访问​​权限？例如：用户 1 应该可以从上午 11 点到下午 1 点访问计算机 2 的远程桌面连接，用户 2 应该可以从下午 3 点到晚上 8 点访问同一台计算机。此预订时间应由服务器计算机上的软件创建。有没有办法远程给用户时隙？

谢谢， 5erv3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:48:45.480

为此，您必须将远程桌面客户端设置为侦听不同的端口并编写可以解密 RDP 流量、确定用户名并拒绝的中间“防火墙”（或者，如果您愿意，可以使用 RDP 转发器）基于分配给用户的时隙的连接。我不知道已经存在任何类似的东西。

这是一项艰巨的任务，但我认为这当然是可能的。

有关 RDP 协议本身实现的详细信息，我建议您从[www.freerdp.com开始](http://www.freerdp.com/)

# javascript - 消除跨度问题

> ID：15626143
> 
> 赞同：0
> 
> 时间：2013-03-25T22:37:56.333
> 
> 标签：javascript, jquery, html

我有一个如下所示的食谱应用程序：http: [//i.stack.imgur.com/FxL7R.png](http://i.stack.imgur.com/FxL7R.png)

在成分范围的末尾是一个删除按钮。出于某种原因，我的代码不起作用（这意味着它没有删除成分范围）：

HTML：

```
 <div class='formelementcontainer funky'>
        <label for="ingredient">Ingredients</label>
        <div id='ingredientsCOUNT' class='sortable'>
            <span>
                <input type="text" class='small' name="ingredient" id="ingredient" placeholder='QTY'/>
                <select name='measurements'>
                    <option value='' name='' checked='checked'>--</option>
                    <?foreach ($measurements as $m):?>
                        <option value='<?=$m->id;?>'><?=$m->measurement;?></option>
                    <?endforeach;?>
                </select>
                <input type="text" name="ingredient" id="ingredient" placeholder='Ingredient'/>
                <a class='float-right delete-button' id='deleteThis' style='margin:10px 2px;' href='#'><img src='<? echo base_url()."public/img/delete.png";?>' height='11' width='11' /></a>
            </span>
        </div>
        <div class="clear"></div>
        <div class='addSPAN tabover'>
            <a class='float-right' id='btnAddIngredients' href='#'>Add Ingredient</a>
        </div>
        </div> 
```

查询：

```
(function($) { 
$(document).ready(function () {
    $('#btnAddIngredients').click(function () {
        var num = $('#ingredientsCOUNT span').length;
        var newNum = new Number(num + 1);
        $('#ingredientsCOUNT > span:first')
            .clone()
            .attr('name', 'ingredient' + newNum)
            .appendTo('#ingredientsCOUNT')
            .fadeIn();
    });
    $('#deleteThis').click(function () {
        var span = $(this).closest('span');
        span.fadeOut('slow', function() { span.remove(); });
    });
});
})(jQuery); 
```

应该发生的是当我点击**X**时，最近的跨度（包含跨度）被删除。但是当我点击它时，什么也没有发生。有什么建议么？感谢大家的帮助！

* * *

编辑

这是一个 JSFIDDLE：http: [//jsfiddle.net/sjDk7/1/](http://jsfiddle.net/sjDk7/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:59:08.110

这里的问题是您将事件处理程序附加到文档中尚未包含的元素。最简单的解决方案是将事件处理委托给祖先元素，使用`on`：

```
$('.formelementcontainer').on('click', '.deleteThis', function () {
    var span = $(this).closest('span');
    console.log(span);
    span.fadeOut('slow', function () {
        span.remove();
    });
}); 
```

[你可以在这里](http://jsfiddle.net/Zy3Qn/)看到一个演示。

# java - 当我将 Bouncy Castle 添加为安全提供程序时，电子邮件应用程序不起作用

> ID：15626145
> 
> 赞同：0
> 
> 时间：2013-03-25T22:38:07.357
> 
> 标签：java, cryptography, bouncycastle

我目前正在使用 Bouncy Castle，我意识到每当我添加安全提供商时，都不会发送电子邮件。我不明白为什么添加 Bouncy Castle 会阻止电子邮件发送。

```
import java.math.BigInteger;
import java.security.InvalidKeyException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.SignatureException;

import java.security.cert.X509Certificate;
import java.util.Date;

import org.bouncycastle.asn1.x509.X509Name;
import org.bouncycastle.x509.X509V1CertificateGenerator;

@SuppressWarnings("deprecation")
public class RootCertificateAuthority {
    public KeyPair pair;
    String issuer = "CN=TRN";
    public X509Certificate rootcert;

    public  RootCertificateAuthority(){
        generateRSAKeyPair();
        generateV1Certificate();
    }

    public KeyPair generateRSAKeyPair() {
        KeyPairGenerator kpGen;
        try {
            kpGen = KeyPairGenerator.getInstance("RSA");
            kpGen.initialize(1024);
            return kpGen.generateKeyPair();
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @SuppressWarnings("deprecation")
    public void generateV1Certificate()  {
        // Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
        this.pair = generateRSAKeyPair();
        // Security.provider.7=org.bouncycastle.jce.provider.BouncyCastleProvider;
        X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
        certGen.setIssuerDN(new X509Name( issuer));
        certGen.setNotBefore(new Date(System.currentTimeMillis()));
        certGen.setNotAfter(new Date(System.currentTimeMillis() + (1000L * 60 * 60 * 24 * 100)));
        certGen.setSubjectDN(new X509Name( issuer));
        certGen.setPublicKey(pair.getPublic());
        certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");

        try {
            rootcert= certGen.generateX509Certificate(pair.getPrivate(),"BC");
        } catch (InvalidKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SignatureException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchProviderException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    };
}

//This class is used to send mail
import java.io.IOException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.Security;
import java.security.cert.CertificateException;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

import javax.mail.Address;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class PleaseEmail {
    RootCertificateAuthority CertificateAuthority;
    List<String> userslist;
    KeyStore keystore;

    public PleaseEmail(){
        userslist = new ArrayList<String>();
        CertificateAuthority = new RootCertificateAuthority();
        try {
            keystore= KeyStore.getInstance(KeyStore.getDefaultType());
            java.io.FileInputStream fis = null;
            fis = new java.io.FileInputStream("U:/mykeystore.jks");
            keystore.load(fis, "password".toCharArray());
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (CertificateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (KeyStoreException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }

    public void sendMail(){
        Properties props = new Properties( );
        props.put("mail.host","smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");
        Session mailConnection = 
            Session.getInstance(props, new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("XXX@GMAIL.COM","password");
            }
        });

        try {
            MimeMessage message = new MimeMessage(mailConnection);
            message.setFrom(new InternetAddress("opd@gmail.com"));
            message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse("xxx@gmail.com"));
            message.setSubject("Testing Subject");
            message.setText("Dear Mail Crawler," +
                    "\n\n No spam to my email, please!");
            Transport.send(message);
        } catch (AddressException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Security.addProvider(
            new org.bouncycastle.jce.provider.BouncyCastleProvider());
        PleaseEmail a = new PleaseEmail();
        a.sendMail();
    }
} 
```

# css - 如何将我的网站布局为 4 行 1 列？

> ID：15626146
> 
> 赞同：0
> 
> 时间：2013-03-25T22:38:07.333
> 
> 标签：css

我希望我的页面类似于[雅虎](http://au.yahoo.com/?p=us)我的预期结果，代码如下。我尝试了不同的方法但不起作用。它应该在中间并且有以下部分。

**预期结果**

```
 50%            |LeftHeader                middleHeader                 RightHeade|    50% 
 50%            |                    50% Menu1 Menu2 Menu3 50%                    |    50%

 50%            |Content goes here ***********************************************|    50%
                |*****************************************************************|

 50%            |                   50% text of Footer goes here 50%              |    50% 
```

这些行>> | 显示边框部分，例如页脚很大，但它的文本应该在中心。

我的代码如下

```
 <html>
    <head>
       <style>
    #wrapper {
        margin: 0 auto;
        width:50%;
    }
    #header {
        background-color:#faa;
        height:50px;
        font-size: 0;
    }
    #header > div {
        display: inline-block;
        width: 33.3333%;
        font-size: 12pt;
        height: 100%;
    }
    #left {
        background-color:red;
        height:20px;
    }
    #middle {
        background-color:yellow;
        height:20px;
    }
    #right {
        background-color:green;
        height:20px;
    }
    #menu {
        width: 100%;
        margin: 0 auto;
        background-color:#faa;
        height: 20px;
        font-size: 0;
    }
    #menu > a {
        display: inline-block;
        font-size: 12pt;
        width: 33.333%
    }
    #content {
        top:50px;
        bottom:150px;
        overflow:auto;
    }
    #footer {
        bottom: 0;
        width: 100%;
        background-color:#afa;
        height:150px;
    }
    #footer > div {
        margin-left: 50%;
    }
    </style

>
    </head>
    <body>
    <div id="wrapper">
        <div id="header">
            <div id="left">
              left header
            </div>
            <div id="middle">
              middle
            </div>
            <div id="right">
              right header
            </div>
        </div>
        <div id="menu">
         <a href="#">menu1</a>
         <a href="#">menu2</a>
         <a href="#">menu3</a>
      </div>
        <div id="content">
           content
        </div>
        <div id="footer">
           footer is here
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:13:48.907

使用一系列`<div>`s in `inline-block`,`relative`位置 和`margin: 0 auto`居中。页脚可以放在底部`position: absolute`，但您必须手动添加边距，因为绝对定位不支持自动居中。

**CSS：**

```
#wrapper {
    margin: 0 auto;
    width:50%;
}
#header {
    background-color:#faa;
    height:50px;
    font-size: 0;
}
#header > div {
    display: inline-block;
    width: 33.3333%;
    font-size: 12pt;
    height: 100%;
}
#left {
    background-color:red;
    height:20px;
}
#middle {
    background-color:yellow;
    height:20px;
}
#right {
    background-color:green;
    height:20px;
}
#menu {
    width: 50%;
    margin: 0 auto;
    background-color:#faa;
    height: 20px;
    font-size: 0;
}
#menu > a {
    display: inline-block;
    font-size: 12pt;
    width: 33.333%
}
#content {
    top:50px;
    bottom:150px;
    overflow:auto;
}
#footer {
    position: absolute;
    bottom: 0;
    margin-left: 12.5%;
    width: 25%;
    background-color:#afa;
    height:150px;
} 
```

在这里查看小提琴：http: [//jsfiddle.net/8gmdk/](http://jsfiddle.net/8gmdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:48:25.450

要将所有内容居中在屏幕中心，您可以使用以下命令：

```
body {
    width: 960px; /* define yours, you can also use max-width if you're going to use a fluid layout */
    position: relative;
    margin: 0 auto;
    left: 0;
    right: 0;
} 
```

祝你好运！

# c++ - 本机 C 结构数组到托管 (C++/Cli) 结构数组

> ID：15626147
> 
> 赞同：0
> 
> 时间：2013-03-25T22:38:12.797
> 
> 标签：c++, .net, c, interop, c++-cli

我正在尝试将本机 C 结构数组转换为 C++/Cli 托管结构数组，然后我可以将其传递给 C#。我正在寻找最好的和更高效的方法。我试图避免使用循环进行转换的明显方式。

这是我的代码：

```
#pragma unmanaged

struct MyStruct 
{
    int Integer;
    double Double;
};

static void populateNative(MyStruct*&structArray,int size)
{
    structArray = new MyStruct[size];
    for(int i=0;i<size;i++)
    {
        structArray[0].Integer = i;
        structArray[0].Double = i;
    }
}

#pragma managed

using namespace System;
using namespace System::Runtime::InteropServices;

public ref struct MyStructManaged
{
    int Integer;
    double Double;
};

int main(array<System::String ^> ^args)
{
    int size = 10;
    MyStruct *structArray;
    populateNative(structArray, size);

    //How to transform MyStruct* to array<MyStructManaged> ?

    return 0;
} 
```

如何将结构数组从本机转换为托管 C++？

谢谢。

# c# - 通过“以最高权限运行”的计划任务启动时无法读取存储的凭据

> ID：15626148
> 
> 赞同：3
> 
> 时间：2013-03-25T22:38:17.977
> 
> 标签：c#, winapi, windows-7, credentials

我正在开发一个在后台运行（可能）很长时间的实用程序，并在系统重新启动时自动恢复。该实用程序需要提升权限才能运行（即“以管理员身份运行”），因此我不能依赖注册表（`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`）的“运行”部分，因为它只会启动具有默认权限的进程。

因此，我正在使用带有“登录”触发器的计划任务，该触发器使用 TaskScheduler API，运行级别为“TASK_RUNLEVEL_HIGHEST”，它以提升的权限启动应用程序（并且没有 UAC，这是必需的）。到目前为止，一切都很好。

问题是此应用程序还将凭据存储在凭据管理器中，并在重新启动后重新读取它们（例如，当触发上述计划任务时）。这是使用 advapi32.dll 中的 CredRead()/CredWrite() 函数完成的。由于某种原因，当使用 RUNLEVEL_HIGHEST 启动任务时，CredRead() 函数返回 false，并且 GetLastError() 返回 1168（“未找到元素”）。

根据文档，CredWrite() 存储的凭据与当前用户令牌的登录会话相关联；我使用持久类型“LOCAL_MACHINE”存储了我的凭据，即它应该在当前会话之外持续存在 - 事实上，即使任务无法读取它，它也会显示在凭据管理器中。

因此，似乎以最高权限启动的任务导致它无法看到最初启动实用程序时创建的凭据 - 即使应用程序必须以提升的权限启动（否则它甚至在之前由于不相关的原因而失败存储凭证）。

FWIW，我认为问题在于，由于从“以管理员身份运行”命令提示符运行而导致的提升，以及由于作为具有“以最高权限运行”的任务而启动的提升在某种程度上导致了不同的“级别”海拔。我觉得我只是缺少有关如何创建计划任务或 CredWrite/CredRead 的东西。任何帮助深表感谢！

更新：根据 CodyGray 在评论中的建议，我尝试在应用清单中设置 requiredExecutionLevel。这并没有改变我原来的问题的行为。

我也查过，当前WindowsIdentity( `WindowsIdentity.GetCurrent()`)的token、user SID、各种“IsAuthenticated”等属性在工作和非工作情况下都是一样的。

我还添加了对 CredEnumerate() 的调用，它返回“false”并将错误代码设置为 1168（“未找到”，与上面的 CredRead() 相同）。因此，这表明该过程无法找到该用户的任何存储凭据，而不仅仅是我的应用程序的凭据。

最后，如果我从任务计划程序手动运行任务，它会按预期工作并找到存储的凭据。该问题似乎仅在登录时触发任务时出现。

更新#2

我（简要地）能够在开发机器上重现该问题，这是我以前无法做到的。似乎只有当用户是两个组（例如“用户”和“管理员”）的成员时才会出现问题。我的默认开发箱登录名只是“管理员”的成员。当我创建一个属于这两个组的新用户时，我重现了这个问题。但是，在仅用户/仅管理员/两者之间来回切换用户后，我无法再重现该用户的问题（即使他们又回到两个组中）。

我找到了一种解决方法，即将凭证存储在其他地方（目前可以接受，不是理想的长期，但最终这些都不是超敏感的凭证）。但是，我仍然想了解这里发生了什么。我有时间会继续试验，但同时感谢任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-08T09:18:58.490

我终于想通了：在 Windows 任务计划程序中右键单击您的任务->单击属性打开一个新窗口。导航到触发器选项卡。点击编辑。在高级设置下，勾选“延迟任务”复选框并指定一个时间，比如 10 分钟。单击确定以保存您的设置。现在关闭任务计划程序。您的计划任务应该能够从凭证管理器中读取凭证。此设置也可以通过使用任务调度程序 api 的代码进行配置。

# xml-parsing - FOMUnsupportedTextTypeException - 从 Atom 提要中删除 type="Text/Html" 属性

> ID：15626150
> 
> 赞同：-1
> 
> 时间：2013-03-25T22:38:22.943
> 
> 标签：xml-parsing, websphere-portal, atom-feed, lotus-wcm

我无法从已解析的 Atom Feed 中获取条目。我正在从 Web 服务获取这些提要。事情是代码在我的本地服务器上工作得非常好，但是当我将它部署在我的开发盒上时，我得到了`FOMUnsupportedTextTypeException`异常。当我检查生成的 Atom 提要的差异时，我发现提要 xml 几乎没有变化。下面是我的`local`饲料

```
<atom:entry>
<atom:id>e0f7f5e7-a5f3-4a2e-a87d-d8def2b6bc2c</atom:id>
<atom:title">Locations</atom:title>
<atom:author>
<atom:uri>uid=wpsadmin,o=defaultWIMFileBasedRealm</atom:uri>
<atom:name>wpsadmin</atom:name>
</atom:author> 
```

在这里我的 `dev`盒子生成了 xml。

```
<atom:entry>
<atom:id>e0f7f5e7-a5f3-4a2e-a87d-d8def2b6bc2c</atom:id>
<atom:title type="text/html">Locations</atom:title>
<atom:author>
<atom:uri>uid=wpsadmin,o=defaultWIMFileBasedRealm</atom:uri>
<atom:name>wpsadmin</atom:name>
</atom:author> 
```

唯一的区别`type="text/html"`在于`atom:title`

我正在使用 abdera 解析器来解析 atom 并在本地和开发中使用 IBM Portal 8。

我收到此代码错误

```
Document<Feed> doc = response.getDocument();   
Feed feed = (Feed) doc.getRoot();   
for (Entry entry : feed.getEntries()) {  //exception at this line 
```

例外是`FOMUnsupportedTextTypeException`

这是完整的异常详细信息

```
[3/28/13 8:15:22:630 CDT] 0000041f servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: An exception was thrown by one of the service methods of the servlet [/jsp/html/searchWCM.jsp] in application [APA_SearchWCM]. Exception created : [org.apache.abdera.parser.stax.FOMUnsupportedTextTypeException: Unsupported Text Type: text/html
    at org.apache.abdera.parser.stax.FOMBuilder.getTextType(FOMBuilder.java:66)
    at org.apache.abdera.parser.stax.FOMFactory.createElement(FOMFactory.java:558)
    at org.apache.abdera.parser.stax.FOMBuilder.constructNode(FOMBuilder.java:108)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.createOMElement(StAXOMBuilder.java:430)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.createNextOMElement(StAXOMBuilder.java:298)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:223)
    at org.apache.abdera.parser.stax.FOMBuilder.next(FOMBuilder.java:93)
    at org.apache.axiom.om.impl.llom.OMContainerHelper.buildNext(OMContainerHelper.java:164)
    at org.apache.axiom.om.impl.llom.OMNodeHelper.getNextOMSibling(OMNodeHelper.java:40)
    at org.apache.axiom.om.impl.llom.OMNodeImpl.getNextOMSibling(OMNodeImpl.java:106)
    at org.apache.axiom.om.impl.traverse.OMChildrenIterator.getNextNode(OMChildrenIterator.java:36)
    at org.apache.axiom.om.impl.traverse.OMAbstractIterator.hasNext(OMAbstractIterator.java:69)
    at org.apache.axiom.om.impl.traverse.OMFilterIterator.hasNext(OMFilterIterator.java:54)
    at org.apache.abdera.parser.stax.util.FOMElementIteratorWrapper.hasNext(FOMElementIteratorWrapper.java:37)
    at org.apache.abdera.parser.stax.util.FOMList.buffer(FOMList.java:62)
    at org.apache.abdera.parser.stax.util.FOMList.get(FOMList.java:71)
    at org.apache.abdera.parser.stax.util.FOMList$BufferIterator.next(FOMList.java:197)
    at org.apache.abdera.parser.stax.FOMFeed.getEntry(FOMFeed.java:208)
    at com.ibm.searchwcm.SearchAndFilter.getSearchResultFromServer(SearchAndFilter.java:279)
    at com.ibm.searchwcm.SearchAndFilter.getSearchResult(SearchAndFilter.java:115)
    at com.ibm._jsp._searchWCM._jspService(_searchWCM.java:204)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:205)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:136)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:79)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:928)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025) 
```

谁能告诉我如何从中删除`type="text/html"`属性`atom:title`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:39:29.503

正如[Atom 规范所示](https://www.rfc-editor.org/rfc/rfc4287#section-3.1.1)，该提要不正确：

```
Text constructs MAY have a "type" attribute.  When present, the value
MUST be one of "text", "html", or "xhtml".  If the "type" attribute
is not provided, Atom Processors MUST behave as though it were
present with a value of "text". 
```

Abdera 拒绝它是正确的。根据您的问题，Lotus Web Content Manager 似乎正在生成该提要；如果是这样，那是 WCF 中可能已修复的错误。如果这两个盒子产生不同的提要，也许它们运行不同的版本。

编辑：从您的[另一个问题](https://stackoverflow.com/questions/15438052/ibm-websphere-portal8-seedlist-getting-401-error-when-parsing-xml-from-url)中，我可以看到您的代码正在从`azeez:10039/wps/mycontenthandler/`. 您需要弄清楚为什么您的两个环境在这里产生不同的提要，而不是试图修补无效数据。

# ios - 您可以使用 iOS6 SDK 构建，但在 iPhone 5 上保留信箱吗？

> ID：15626152
> 
> 赞同：1
> 
> 时间：2013-03-25T22:38:25.547
> 
> 标签：ios, ios6

使用 iOS5 SDK 构建的应用程序会生成一个适合 iPhone 4S 及更低版本的 3.5" 屏幕的窗口。如果在 4" 显示屏的 iPhone 5 上运行相同的应用程序，它会被加黑。一旦升级到 iOS6 SDK，似乎同一个应用程序将在 iPhone 5 上获得全屏窗口。有没有办法坚持使用 iOS6 SDK 但强制应用程序仅使用 3.5" 屏幕分辨率（即把信箱放回去）？

ps 在我的情况下，这不会是永久性的，但我想专注于 3.5" 应用程序布局，直到我准备好让应用程序在更大的屏幕上正确重排。

更新：还想指出，我知道 Apple 很快就会在 App Store 中禁止不支持 4 英寸屏幕的应用程序。我现在只是担心 AdHoc 部署以进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:16:04.013

当您删除 Default-568@2x.png 加载屏幕时，它将禁用您的应用程序的 iphone5 屏幕尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:25:21.700

5月1日快到了，别这样了。调整您的 iPhone5 用户界面的布局。

# c# - 通过反射在同一个程序集中生成代码

> ID：15626157
> 
> 赞同：4
> 
> 时间：2013-03-25T22:38:47.527
> 
> 标签：c#, .net, reflection, t4

我已经开始涉足 T4 并且一开始相处得很好，但后来遇到了一个实际上非常明显并且可能无法解决的问题，但也许有一种方法我只是缺乏了解或了解的经验。

给定以下课程：

```
public class T4Test : CodeActivity
{
    protected override void Execute(CodeActivityContext context)
    {
    }

    [Input("InX")]
    public InArgument<string> InX { get; set; }

    [Output("OutX")]
    public OutArgument<string> OutX { get; set; }
} 
```

我想要这个作为输出：

```
public class ActivityWrapper
{
    private readonly T4Test _activity;
    private readonly ActivityContext _context;

    public ActivityWrapper(T4Test activity, ActivityContext context)
    {
        this._activity = activity;
        this._context = context;
    }

    public string InX
    {
        get { return this._activity.InX.Get(this._context); }
    }

    public string OutX
    {
        get { return this._activity.OutX.Get(this._context); }
        set { this._activity.OutX.Set(this._context, value); }
    }
} 
```

我已经弄清楚了我需要的反射的东西，我知道 T4 代码应该是什么样子，但是有一个问题：我需要它与`T4Test`类在同一个项目中。但是，要加载程序集并对其进行反映，需要对其进行编译——但如果我打算修改同一个程序集的代码，那当然有点困难。（而且我猜 NCrunch 并没有简化事情。）

现在这是我希望仍然可以解决这个问题的事情：

*   该项目*将*在没有生成的类的情况下编译。这是因为该类将实现由 IoC 容器自动注册/解析的接口。无论如何它也是不可测试的，因为`ActivityContext`不能被嘲笑。
*   出于这个原因，它不必一直存在或正确。在实际交付 DLL 之前，我只需要能够说“立即生成”。
*   出于同样的原因，我也不关心 T4 模板是否真的存在于项目中——只要生成的文件最终出现在项目中（尽管不需要另一个项目作为模板并构建 PostBuild 事件来复制`.cs`文件） .
*   准确地说，它甚至不需要是T4。如果有任何其他可行的方法可以做到这一点，我也很乐意使用它。

有什么办法可以做到这一点？（这是否足够清楚？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:53:53.920

我想提出一种替代方法来反映生成的程序集，因为转换 T4 仅在项目成功构建并生成正确的输出时才有效，前提是程序集没有过时。

如果您使用特定于主机的 T4 模板，您可以通过 EnvDTE 接口访问 Visual Studio 自动化模型。使用它，您可以遍历当前加载的 Visual Studio 解决方案的 CodeModel，而无需先构建它。

看看我对这个 SO 问题的回答：[Design Time Reflection](https://stackoverflow.com/questions/14134016/design-time-reflection/14402269#14402269)。借助有形模板库中的免费模板，您可以在设计时轻松“反映”现有类并检测用所需属性装饰的属性：

```
<#
var project = VisualStudioHelper.CurrentProject;

// get all class items from the code model
var allClasses = VisualStudioHelper.GetAllCodeElementsOfType(project.CodeModel.CodeElements, EnvDTE.vsCMElement.vsCMElementClass, false);

// iterate all classes
foreach(EnvDTE.CodeClass codeClass in allClasses)
{
    // iterate all properties
    var allProperties = VisualStudioHelper.GetAllCodeElementsOfType(codeClass.Members, EnvDTE.vsCMElement.vsCMElementProperty, true);
    foreach(EnvDTE.CodeProperty property in allProperties)
    {
        // check if it is decorated with an "Input"-Attribute
        if (property.Attributes.OfType<EnvDTE.CodeAttribute>().Any(a => a.FullName == "Input"))
        {
            ...
        }
    }
}
#> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T01:30:41.050

*T4Test.tt*

```
<#@ include file="Activities.tt" #>
<#
var t4test = new Activity("T4Test")
{
    Input("InX"),
    Output("OutX"),
};
GenerateCode(t4test);
#> 
```

*活动.tt*

```
<#@ template language="C#" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #>
<#+
class Activity : IEnumerable<Property>
{
    private string name, wrapper;
    private List<Property> properties;
    public Activity(string name, string wrapper = null)
    {
        this.name = name;
        this.wrapper = wrapper ?? name + "Wrapper";
        this.properties = new List<Property>();
    }
    public void Add(Property property)
    {
        this.properties.Add(property);
    }
    public IEnumerator<Property> GetEnumerator()
    {
        return this.properties.GetEnumerator();
    }
    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
    public void GenerateCode()
    {
        // ...
    }
}
class Property
{
    private bool output;
    private string name, type;
    public Property(bool output, string name, string type)
    {
        this.output = output;
        this.name = name;
        this.type = type;
    }
}
Property Input(string name, string type = "string")
{
    return new Property(false, name, type);
}
Property Output(string name, string type = "string")
{
    return new Property(true, name, type);
}
void GenerateCode(params Activity[] activities)
{
    WriteLine("namespace Foo");
    WriteLine("{");
    PushIndent("   ");
    foreach (var activity in activities)
    {
        WriteLine("class " + activity.name);
        WriteLine("{");
        PushIndent("   ");
        // ...
        PopIndent();
        WriteLine("}");
    }
    PopIndent();
    WriteLine("}");
}
#> 
```

# r - 在R中用NA替换值

> ID：15626158
> 
> 赞同：2
> 
> 时间：2013-03-25T22:38:50.143
> 
> 标签：r, sum, na

我有一个看起来像这样的字符向量：

```
"Internet" "Internet" "-1"       "-5"       "Internet" "Internet" 
```

我想**将**所有*负数值*（-1、-5 等）的值替换为`NA`.

我用这段代码做到了：

```
hintsData$WhereSeekHealthInfo[hintsData$WhereSeekHealthInfo < 0] <- NA 
```

这似乎有效：

```
head(hintsData$WhereSeekHealthInfo)
# [1] "Internet" "Internet" NA         NA         "Internet" "Internet" 
```

但是当我这样做的时候

```
> sum(hintsData$WhereSeekHealthInfo == "Internet")
# [1] NA 
```

基本上我不能再对这些值求和了，因为我以某种方式改变了向量？

在运行 NA 代码之前，我能够运行代码并获得以下信息：

```
> sum(hintsData$WhereSeekHealthInfo == "Internet")
# [1] 1691 
```

那么，如何用 NA 替换“-1”、“-5”等值，但仍然得到：

```
> sum(hintsData$WhereSeekHealthInfo == "Internet")
# [1] 1691 
```

如果您有任何想法，请告诉我。我确实发现了有关替换为 NA 的其他问题，但由于我不知道为什么一旦我替换为 NA 我就不能再计算值了，我不确定要搜索或排除什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:48:55.357

`sum`有个`na.rm`参数，将其设置为`TRUE`，您将删除`NA`. （一般来说，`1+NA = NA`，所以你想删除这些`NA`值）

话虽如此，`<0`鉴于您的向量是字符（在这种情况下确实有效，但我不想假设它是健壮的）

`NA`设置价值观的惯用方法`R`是使用`is.na<-`，例如

```
is.na(hintsData$WhereSeekHealthInfo) <- hintsData$WhereSeekHealthInfo <0 
```

根据您读取数据的方式，您可以设置它来处理您的信息

例如，如果您在读取文本文件之前知道有效响应，则可以创建自己的类

```
 setAs("character","Q1", function(from) factor(from ,levels = c('Internet','Newspaper'))

 read.csv('mytextfile.csv', colClasses = list(WhereSeekHealthInfo = 'Q1') 
```

或者也许（对 NA 值更明确，对有效值的含义不太明确。

```
 setAs("character","Q1b", function(from) {is.na(from) <- suppressWarnings(as.numeric(from)) <0;from}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:48:19.247

这样做的原因是 `x == NA`返回`NA`任何值`x`（即使`x`是它本身`NA`）。

所以你应该使用Arun的建议，`sum(..., na.rm=TRUE)`

# objective-c - “/=”在目标c中是什么意思

> ID：15626159
> 
> 赞同：2
> 
> 时间：2013-03-25T22:39:08.480
> 
> 标签：objective-c

```
- (void) reduce{
    int u = numerator;
    int v = denominator;
    int temp;

    while (v != 0) {
        temp = u % v;
        u = v;
        v = temp;
    }

    numerator /= u;
    denominator /= u;

} 
```

我目前正在开始学习目标 c，只是想知道这段代码实际上是做什么的？

```
numerator /= u;
denominator /= u; 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:40:00.363

`a /= b`和 是一样的`a = a / b`。它只是简写符号，就像`+=`,`&=`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:40:50.640

它是除然后分配的简写运算符。

长版本是：

```
numerator = numerator  / u; 
```

其他类似的运算符是`+=`, `*=`,`-=`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:41:22.487

它的一种简短形式

```
numerator = numerator / u;
denominator = denominator / u; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T22:41:27.673

它像 int a += 1，但除而不是加。:)

# php - PHP Cookies 和 MySQL

> ID：15626163
> 
> 赞同：0
> 
> 时间：2013-03-25T22:39:32.027
> 
> 标签：php, mysql, cookies

我目前正在尝试进行 PHP 调用以在用户首次登陆页面时接收由以下代码块设置的 cookie

```
if (empty($_COOKIE["uuid"])) {
$uuid = uniqid();  // or use a real UUID
setcookie("info", $uuid, $thisAid, $thisSubID, $thisURL, time()+30*24*60*60, "/");
}
else {
$uuid = $_COOKIE["uuid"];
foreach($_COOKIE as $name => $uuid){
// you can check any conditions based on cookie name $name
$cookiequery = "INSERT INTO table_name(WebTraffic) VALUES(" . mysql_escape_string($uuid) . ##")";
mysql_query($cookiequery);
unset($cookiequery); 
```

然后在用户点击特定页面以从 cookie 中获取值并将其添加到数据库时向数据库添加另一行

```
if (isset($_COOKIE["uuid"]))
$values = '';
$sql = "    INSERT INTO WebTraffic (aid, subID, campaignID, URL, uuid) VALUES(";
foreach ($_COOKIE as $name => $uuid)
$values .= "'$uuid'";

$sql .= $values.")"; 
```

但两者都没有工作，有人能指出我正确的方向吗？谢谢！

编辑：这些值是前面设置的字符串：

```
$thisAID = $_GET['aID'];
$thisSubID = $_GET['subID'];
$thisCampaignID = $_GET['campaignID'];
$thisURL = $_SERVER['REQUEST_URI'];
$uuid = uniqid(); 
```

从传递的 URL 中提取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:44:34.517

您可能需要查看在 PHP 中正确设置 cookie。该`setcookie()`函数最多需要 6 个参数，如下所示：

```
setcookie(name,value,expire,path,domain,secure) 
```

您`setcookie()`在调用中有 7 个参数并且未正确遵循结构：

```
setcookie("info", $uuid, $thisAid, $thisSubID, $thisURL, time()+30*24*60*60, "/") 
```

此外，您正在使用您的代码检查一个名为“uuid”的空 cookie，`empty($_COOKIE["uuid"])`但是您正在设置一个名称为 info 的 cookie。

您需要将其重新安排为：

```
setcookie("uuid", $uuid, time()+30*24*60*60, "/") 
```

但是我不知道`$thisAid`, `$thisSubID`or`$thisURL`变量包含什么或用于什么？

[W3 Schools](http://www.w3schools.com/php/func_http_setcookie.asp)有一个很好的例子，`setcookie()`而且总是有[PHP 手册](http://php.net/manual/en/function.setcookie.php)本身

如果您想使用一个 cookie 来存储所有变量，然后构建 SQL 查询，那么您可以为每个变量单独设置一个 cookie，如下所示：

```
setcookie("uuid", $uuid, time()+30*24*60*60, "/")
setcookie("thisAid", $thisAid, time()+30*24*60*60, "/")
setcookie("thisSubID", $thisSubID, time()+30*24*60*60, "/")
setcookie("thisURL", $thisURL, time()+30*24*60*60, "/")
setcookie("campaignID", $thisCampaignID, time()+30*24*60*60, "/") 
```

或者使用 ; 设置一个 cookie 用于分隔每个值的符号，如下所示：

```
setcookie("uuid", $thisAid . ";" . $thisSubId . ";" . $thisCampaignID. ";" . $thisURL . ";" . $uuid, time()+30*24*60*60, "/") 
```

然后，您可以使用该`explode()`函数将 cookie 值分开，然后在其上使用 foreach 循环来构建您的 SQL 查询，如下所示：

```
 $values = explode( ";", $_COOKIE['uuid'] );

    foreach( $values as $value ) {  $sqlValues .= $value . ","; }

    $sql = "INSERT INTO WebTraffic (aid, subID, campaignID, URL, uuid) VALUES($sqlValues); 
```

或者使用上面的多个 setcookie() 调用，您可以这样做：

```
 $sql = "INSERT INTO WebTraffic (aid, subID, campaignID, URL, uuid) VALUES($_COOKIE['thisAid'], $_COOKIE['subID'], $_COOKIE['campaignID'], $_COOKIE['thisURL'], $_COOKIE['uuid'] ); 
```

但是要注意的另一件事是，在从数据库中插入或检索信息时，您确实应该使用准备好的语句，以避免 SQL 注入攻击。你知道这些是什么/你正在使用任何预防技术来避免它们吗？

# javascript - 尝试使用 alt 和 alt+shift 对热键使用相同的字母

> ID：15626166
> 
> 赞同：-1
> 
> 时间：2013-03-25T22:39:50.990
> 
> 标签：javascript, jquery, html, google-chrome

我正在使用 Chrome 并尝试使用 JQuery 将**alt+a**映射到一个输入，并将**alt+shift+a**映射到另一个输入。我已经使用 chrome 对其进行了调试，但仍然无法弄清楚。我很困惑，这是做到这一点的最佳方式。我不确定这是否可能。我也尝试在两个输入上都使用 accesskey="a" 但在这种情况下它只是命中第二个输入。

任何想法或帮助将不胜感激。谢谢

```
<!DOCTYPE html>
<html>
   <head>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"/>
      <script type="text/javascript" language="JavaScript">
         $(document).ready( function () {
         $(document).keyup('alt+a',       function () { $('suc').click(); });
         $(document).keyup('alt+shift+a', function () { $('try').click(); } );
         });
      </script>
   </head>
   <body>
      <form>
         <input type="submit" formaction="file:///C:/Users/me/Desktop/success.html" value="Success" accesskey="a" id="suc">
         <input type="submit" formaction="file:///C:/Users/me/Desktop/tryAgain.html" value="TryAgain" accesskey="a" id="try" >
      </form>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:04:31.317

我强烈建议使用[https://github.com/keithamus/jwerty](https://github.com/keithamus/jwerty)来处理键盘事件。

它看起来像这样

```
jwerty.key('alt+a', function() {
    // success
});

jwerty.key('alt+shift+a', function() {
    // try again
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:36:25.280

原来我设置了 accesskey 属性并试图使用 jquery 设置热键。

Chrome 听起来好像发生了错误。我用这篇文章寻求帮助：[http ://www.openlogic.com/wazi/bid/188026/Easy-Keyboard-Shortcuts-for-Web-Pages](http://www.openlogic.com/wazi/bid/188026/Easy-Keyboard-Shortcuts-for-Web-Pages)

我将继续使用[https://github.com/tzuryby/jquery.hotkeys](https://github.com/tzuryby/jquery.hotkeys)。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
        $(document).keyup(
            function(e) {
                e = e || window.event; // because of Internet Explorer quirks...
                k = e.which || e.charCode || e.keyCode; // because of browser differences...
                if (k == 65 && e.altKey && !e.ctrlKey && !e.shiftKey) {
                    $('form').prop('action', 'file:///C:/Users/me/Desktop/tryAgain.html').submit();
                } else if (k == 65 && e.altKey && !e.ctrlKey && e.shiftKey) {
                    $('form').prop('action', 'file:///C:/Users/me/Desktop/success.html').submit();
                } else {
                    return true; // it's not a key we recognize, move on...
                }
                return false;
        });
</script>
</head>
<body>
<form>
<input type="submit" formaction="file:///C:/Users/me/Desktop/success.html" value="Success" id="suc">
<input type="submit" formaction="file:///C:/Users/me/Desktop/tryAgain.html" value="TryAgain" id="try" >
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:16:16.110

嗯，alt+shift+a 在 Chrome 中似乎没有按预期响应，可能存在冲突。我正在使用以下代码同时触发 alt+a 和 alt+shift+a 触发#try：

```
$(window).on('keypress', function(e){
    if(e.altKey && e.which===97)
        $('#suc').trigger('submit');
});
$(window).on('keypress', function(e){
    if(e.altKey && e.shiftKey && e.which===97)
        $('#try').trigger('submit');
}); 
```

你可以试试`if(e.altKey && e.ctrlKey && e.which===97)`#try。

# node.js - 使用 node.js 处理多个请求

> ID：15626173
> 
> 赞同：0
> 
> 时间：2013-03-25T22:40:28.337
> 
> 标签：node.js, connection

我想制作某种类型的中继服务器：

*   从某些客户端向节点服务器发送请求，例如：http myServer:port/node1?command=foo&type=bar
*   解析出 request.url: /node1?command=foo&type=bar
*   根据请求将 GET 发送到附加了 request.url 的第二台服务器，并从服务器（request.url）接收 JSON 对象：http someOtherServer/node1?command=foo&type=bar
*   将 JSON 对象传递回客户端

目前我可以从请求中访问 url，但您可能知道这不是一项艰巨的任务，因为它是“request.url”。基本上我想从 iPhone 应用程序调用 heroku 实例，让 heroku 实例将请求中继到另一台服务器并将响应发送回 iPhone 应用程序。

# ruby-on-rails - 没有参数 $1 ...为 Postgresql 向 Rails 发送 SQL 语句，我做错了什么？

> ID：15626174
> 
> 赞同：1
> 
> 时间：2013-03-25T22:40:31.430
> 
> 标签：ruby-on-rails, postgresql

```
ActiveRecord::Base.connection.execute(
          "WITH numberofdays AS 
          (SELECT percent_change FROM asset_histories 
          WHERE date < $1
          AND asset_symbol = $2
          ORDER BY date DESC
          LIMIT $3)
          SELECT stddev_samp(percent_change) as stdev FROM numberofdays",
          [day,symbol,daystolimit]) 
```

其中 day、symbol 和 daystolimit 是在上述代码之前分配的变量。它们是这样分配的：

```
day = '2013-03-25'
symbol = 'AAPL'
daystolimit = 20 
```

我不想使用`#{variable}`，因为可能存在恶意。如标题所述，我的声明正在返回

`PGError ERROR: there is no parameter $1 LINE 1 ... WHERE date <$1 AND...`

使用 Postgresql 9.2 和 rails 3.2

编辑添加我在这里找到的替代解决方案：

除了 mu 在他使用 connection.method(:quote) 的地方太短之外，我找不到关于它的文档，所以我遇到了另一篇这样引用的帖子：

```
a = ActiveRecord::Base.connection
a.execute(%Q{SELECT * FROM table WHERE id = #{a.quote(variable)}...}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:19:51.053

从[罚款（？）手册](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html#method-i-execute)：

> **执行（sql，名称 = nil）**
> 
> 执行 SQL 语句，成功时返回 PGresult 对象，否则引发 PGError 异常。

请注意，第二个参数不是用于绑定参数，它是（AFAIK）日志记录目的的名称。

ActiveRecord 实际上并没有在内部使用绑定参数，它只是自己进行引用和转义，并为数据库构建一个大的 SQL 字符串（*cringe*）。`quote`您可以使用方法和字符串插值来模仿这种行为：

```
q = ActiveRecord::Base.connection.method(:quote)
ActiveRecord::Base.connection.execute(%Q{
    WITH numberofdays AS 
    (SELECT percent_change FROM asset_histories 
    WHERE date < #{q[day]}
    AND asset_symbol = #{q[symbol]}
    ORDER BY date DESC
    LIMIT #{daystolimit})
    SELECT stddev_samp(percent_change) as stdev FROM numberofdays
}) 
```

您必须自己确保这`daystolimit`是一个数字（或者也引用它并在 SQL 中转换为整数）。

[或者，使用原始 pg](http://rubydoc.info/gems/pg/frames)接口连接到数据库并使用实际准备好的语句。

# python - django 中的 DISTINCT ON

> ID：15626175
> 
> 赞同：21
> 
> 时间：2013-03-25T22:40:34.767
> 
> 标签：python, mysql, django

我将如何执行以下查询：

```
OrderNotes.objects.filter(item=item).distinct('shared_note') 
```

基本上，我需要获取所有`OrderNotes`项目，在`shared_note`. 当我尝试这样做时，我得到：

```
 raise NotImplementedError('DISTINCT ON fields is not supported by this database backend')

NotImplementedError: DISTINCT ON fields is not supported by this database backend 
```

我正在使用mysql，无法在这里更改数据库。django 中的解决方法是什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-26T02:37:25.243

```
OrderNotes.objects.filter(item=item).values_list('shared_note', flat=True).distinct() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T22:43:41.760

这是我想出的最好的：

```
>>> items, item_ids = [], []
>>> for item in OrderNotes.objects.filter(shared_note=219):
...     if item.shared_note not in item_ids:
...         items.append(item)
...         item_ids.append(item.shared_note) 
```

# floating-point - 浮点数和可以用字符串表示的浮点数范围

> ID：15626176
> 
> 赞同：-2
> 
> 时间：2013-03-25T22:40:36.850
> 
> 标签：floating-point, discrete-mathematics

参考位串 010011110110

```
We also assume that when the number is stored as a floating point (real) number, 6 of the 12 bits are reserved for the mantissa (or significand)

If the string represents a floating point number, what is this (smallest) number? 
```

和

```
Find the range (or interval) of floating point numbers that could be represented by the same string.

value=(-1)^s (1+m/26 )^{e-24} is what I think I need in order to solve one of the, 
```

这是我要在 28 日星期四进行评估的最后两个问题，我已经完成了所有其他问题，此时我不知道其中是否有任何问题是正确的，我只是被困在这些问题上。我不知道为什么我必须作为网络专业的学生上一门计算机科学课，但这让我很生气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:35:07.373

`6 of the 12 bits are reserved for the mantissa`和`value=(-1)^s (1+m/26 )^{e-24}`

第二个在逻辑上应该是 `value=(-1)^s (1+m/2^6 )^{e-2^4}`

所以让我们开始吧：

*   1位符号s
*   1 隐含前导 1 + 6 位 m（=0 到：63）用于有效位（共 7 位）
*   指数剩余 5 位（e=0 到 31）

所以最大有效值为,`1+63/64`即`127/64`,`(2^7-1)/2^6``2-2^-6`

最大指数为`31-16=15`。

所以最大数量是`(2-2^-6)*2^15=2^16-2^9=65536-512=65024`

最小值为 -65024。

**编辑**

现在，我不确定我是否完全理解相同字符串的问题......

如果问题是哪个区间将四舍五入到相同的浮点数，那么

*   这取决于舍入方法
*   它取决于指数

如果我们假设数字四舍五入到最接近的浮点数，则区间中的每个数字`(f-ulp(f)/2,f+ulp(f)/2)`都将四舍五入到相同的浮点数 f。

如果 f=(-1)^s*(1+m/2^6)*2^(e-2^4)，则 ulp(f) 为 2^(e-2^4-6)，所以你明白了。包含区间边界取决于详细的舍入方法（舍入到最接近的偶数）。

对于最小正值，我不知道...

*   最小的指数都保留用于表示非正规数和零。
*   或者这个表示中可能没有零......

在第一种情况下，对于非正规化，最小指数为`1-16=-15`，最小正值为`2^-6*2^-15 = 2^-21`

在第二种情况下，最小指数为`0-16=-16`，最小正值为`1*2^-16`。

第三种情况，如果只有零是特例，并且没有非规范化，则最小值为`(1+2^-6)*2^-16`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:57:46.937

由于基数为 2，尾数为 6，并假设精度为 12 位，根据[浮点数的维基百科](http://en.wikipedia.org/wiki/Floating_point)，我相信范围为 100000 * 2^011111 到 011111 * 2^011111 或更确切地说是 -32*2^31到 31*2^31，其中最小值是 1*2^100000 或者更确切地说是 1*2^-32。

# php - 来自 jQuery $.post 的 PHP 会话

> ID：15626178
> 
> 赞同：1
> 
> 时间：2013-03-25T22:40:43.853
> 
> 标签：php, jquery, session, .post

我在这里和其他地方阅读了很多关于这个问题的文章，但没有找到可以帮助我的答案。而且由于主题似乎相当广泛，我认为最好的方法是询问。

我目前正在通过 jquery 文件中的 $.post-script 将表单中的登录数据发送到 php 脚本。那里没有问题。我有一个类通过一系列函数来验证和保护字符串，所以完全没有问题。我一直在设置会话，我可以通过将函数（数据）添加到我的 $.post 来打印并获取它。

我已将 session_start() 添加到 php 脚本和 index.php 中。我正在使用 Chromium 并且可以看到已设置会话，但是当我进行 print_r($_SESSION); 结果是空的。显然，这也导致我的 if(isset($_SESSION['uid'])) 也不起作用。

js：

```
$('#login').submit(function(e){
    e.preventDefault();
    values = {};
    var url = '../admin/php/signIn.php';
    console.log('Clicked on submit.');
    $.each($(this).serializeArray(), function(i, field){
        values[field.name] = field.value;
    });
    $.post(url, {username: values.username, password: values.password})
    .done(function(data){ location.reload(); /*alert(data);*/ })
    .fail(function(){ alert('Fail.'); });
}); 
```

php:

```
private function login($uid, $uname){
    $_SESSION['uid'] = $uid;
    echo $_SESSION['username'] = $uname;
    session_start();
} 
```

我在其中一个会话上添加了一个回声，只是为了能够通过 jquery 看到它。是“私人功能[...]”还是其他地方的问题？（就像我之前所说的那样，与班级一起玩。）

我希望这对某人有意义，因为我在这里迷路了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:42:40.800

您必须在开始分配可变会话`session_start()` **之前调用。**

# java - Selenium RemoteWebDriver 似乎无法识别 Web 元素的 javascript 更改

> ID：15626181
> 
> 赞同：0
> 
> 时间：2013-03-25T22:40:51.177
> 
> 标签：java, selenium-webdriver, selenium-grid, remotewebdriver

在执行一些 javascript 后，我​​一直在尝试测试 WebElements 的可见性。WebElements 可以通过以下 xpaths 找到：

```
 public static final String MOBILE_APPS_RUNNING_APP_XPATH = "//*[@id='app_slider']/ul/li[1]/a[@class='app nike-running']";
 public static final String MOBILE_APPS_FUELBAND_APP_XPATH = "//*[@id='app_slider']/ul/li[1]/a[@class='app nike-fuelband']";
 public static final String MOBILE_APPS_BASKETBALL_APP_XPATH = "//*[@id='app_slider']/ul/li[1]/a[@class='app nike-basketball']";
 public static final String MOBILE_APPS_TRAINING_APP_XPATH = "//*[@id='app_slider']/ul/li[2]/a[@class='app nike-training']";
 public static final String MOBILE_APPS_KINECT_APP_XPATH = "//*[@id='app_slider']/ul/li[2]/a[@class='app nike-kinect']";
 public static final String MOBILE_APPS_MORE_APPS_XPATH = "//*[@id='app_slider']/ul/li[2]/a[@class='app nike-more']"; 
```

页面加载时，前三个元素是可见的。一个 javascript 函数通过`-moz-transform: translate3d(-1084px, 0px, 0px);`style 属性使元素移动，以便接下来的三个元素变得可见。这适用于本地 Firefox 浏览器，它可以获取更改，但是当我尝试在网格设置中使用附加到 Firefox 浏览器的 RemoteWebDriver 时，这些元素不再可见。我已经通过屏幕截图验证了这些元素在 RemoteWebDriver 中仍然可见，但我怀疑这些元素是由 RemoteWebDriver 缓存的，而不是从更新的 DOM 中获取的。

有没有办法验证这一点，如果是这样，我怎样才能刷新 DOM 以便我可以看到元素现在可见？

澄清一下：我`driver.findElement(By.xpath(...))`在 javascript 执行后使用该方法，并等待元素变得可见，但它永远不会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:02:07.443

事实证明，selenium-server（和 FirefoxDriver）的版本在我的本地机器和网格之间是不同的，即使 Firefox 的版本在两个环境之间是一致的。在我的本地机器（按预期工作）上，我使用的是 selenium-server_2.25.0，而网格使用的是 selenium-server_2.28.0（没有按预期工作）。产生影响的差异之一是 FirefoxDriver 更改为使用 Firefox 本机事件。我验证了对 selenium-server_2.31.0 的更新按预期恢复了功能（和可见性）。

# php - 在 Magento 授权后，我在哪里根据订单详细信息设置订单状态？

> ID：15626189
> 
> 赞同：0
> 
> 时间：2013-03-25T22:41:35.167
> 
> 标签：php, magento, e-commerce, magento-1.7, payment-gateway

作为额外的欺诈控制，我想在客户下订单后根据某些订单详细信息设置不同的订单状态。

就像是：

```
if($order->getPayment()->getTransaction()->getAdditionalInformation('avszip') != Y)
  $order->setState('review for fraud');
else
  $order->setState('processing'); 
```

我会在哪里做这个？我假设我会拦截一些默认的 setState 代码行

```
app/code/core/Mage/Sales/Model/Order/Payment.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:51:45.217

`sales_order_place_after`您可以为或创建一个观察者`sales_order_payment_place_end`

```
<events>
    <sales_order_place_after>
        <observers>
            <fraudtracking>
                <type>singleton</type>
                <class>fraudtracking/observer</class>
                <method>changestatus</method>
            </fraudtracking>
        </observers>
    </sales_order_place_after> 
```

在你的observer.php

```
//Create a new status in Admin -> System -> Order Statuses
$STATE = 'fraud';

$_order = $event->getOrder();
if($order->getPayment()->getTransaction()->getAdditionalInformation('avszip') != Y){
    $_order->addStatusHistoryComment('Review for fraud', $STATE)
                   ->setIsVisibleOnFront(false)
                   ->setIsCustomerNotified(false);
} 
```

# google-apps-script - 服务错误：SitesApp：将公告从一个公告页面移动到另一个公告页面时发生内部错误

> ID：15626194
> 
> 赞同：0
> 
> 时间：2013-03-25T22:42:06.000
> 
> 标签：google-apps-script, google-sites

哪些步骤将重现该问题？

1.  将以下函数加载到 Google 站点中。
2.  运行函数 moveblogs()。

什么是预期的输出？

我希望所有 2013 年的博客文章（公告）都将其标题记录在 Logger 中，然后移动到新的博客（公告页面）。

你看到了什么呢？

我看到了错误：

> 服务错误：SitesApp：内部错误（第 25 行，文件“代码”）关闭

如果可能，请提供重现问题的小示例脚本的代码：

```
 function moveblogs() {

  var fromblog =  SitesApp.getPageByUrl("https://sites.google.com/a/mydomain.com/intranethome/home/Around-Intranet");
  var toblog =  SitesApp.getPageByUrl("https://sites.google.com/a/mydomain.com/intranethome/home/2013-around-Intranet");

    var nextbloc = 0;

    while (true) {
      var pages2 = fromblog.getAllDescendants({"start":nextbloc,"max":100});

      if (pages2.length > 0){

        Logger.log("starting at.."+nextbloc+" there are .."+pages2.length+" pages starting with.."+pages2[0].getTitle());
        var i = nextbloc;
        for (var x in pages2) {

          var publishedyear = Utilities.formatDate(pages2[x].getDatePublished(),"GMT","yyyy")
          Logger.log("year: "+publishedyear);

          if (publishedyear==2013) {

            Logger.log("Title: "+pages2[x].getTitle());

            pages2[x].setParent(toblog);
            Utilities.sleep(1000);
          }
          i = i + 1;          
        }    
      } else {
        break;      
      }
      nextbloc = nextbloc + 100;

    }      

} 
```

请在下面提供任何附加信息。

1.  注释掉第 25 行可以成功记录 2012 年的博客文章。
2.  下面的代码可以在单独的函数中移动单个博客文章：

    `blogpost.setParent(toblog);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T20:06:46.773

我认为其中一个公告中的一个标题实际上存在问题。此脚本有效，但可能会超时。但是重新运行它只会继续它停止的地方。

```
 function moveblogs() {

  var fromblog =  SitesApp.getPageByUrl("https://sites.google.com/a/mydomain.com/intranethome/home/Around-Intranet");
  var toblog =  SitesApp.getPageByUrl("https://sites.google.com/a/mydomain.com/intranethome/home/2013-around-Intranet");

  var nextbloc = 0;

  while (true) {

    var pages2 = fromblog.getChildren({"start":nextbloc,
                                       "max":10,
                                       includeDrafts: false,
                                       includeDeleted: false,
                                      });

    if (pages2.length > 0){

      Logger.log("starting at.."+nextbloc+" there are .."+pages2.length+" pages starting with.."+newblogtitle);
      var i = nextbloc;
      for (var x in pages2) {

        var newblogtitle = pages2[x].getTitle();
        //var pageType = pages2[x].getPageType();

        var publishedyear = Utilities.formatDate(pages2[x].getDatePublished(),"GMT","yyyy")

          if (publishedyear==2013) {

          Logger.log("Title: "+ newblogtitle);

          try{

            pages2[x].setParent(toblog);
            //    Utilities.sleep(1000);
          }catch(err){
            Logger.log(err);
          }
        }
        i = i + 1;          
      }    
    } else {
      break;      
    }
    nextbloc = nextbloc + 10;

  }      

}

} 
```

# c++ - 使用在当前函数下方声明的函数（允许循环依赖）？

> ID：15626200
> 
> 赞同：0
> 
> 时间：2013-03-25T22:42:46.947
> 
> 标签：c++, function, g++, dependencies

因此，C++ 不允许我在物理上使用高于我声明它的函数（换句话说，该函数的行号必须小于其使用的行号）。我的问题是我的功能都至少依赖于其他功能之一。换句话说：

```
void funct1()
{
     if (something is true)
     {
         funct2();
     }
     else
          cout << someResult;
}

void funct2()
{
     if(something is true)
     {
         funct3();
     }
     else
          cout << someResult;
}

void funct3()
{
     if (something is true)
     {
         funct1();
     }
     else
          cout << someResult;
}
} 
```

换句话说，在某些情况下，每个函数都需要调用其他函数之一。不管我把函数放在什么顺序，这都行不通，因为至少有一个依赖于它下面的东西。编译时如何使编译器看起来低于当前函数（即读取所有内容然后决定什么是有效的）我在 CodeBlocks 上使用 g++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:43:43.867

在函数定义之前添加一些前向声明：

```
void funct1();
void funct2();
void funct3(); 
```

这样，您可以按任何顺序使用这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:44:56.140

我假设你的意思是最后一个函数是`funct3`. 您可以使用单个前向声明来逃避：

```
void funct2();

void funct1() { if(something is true) { funct2(); } else cout << someResult; }

void funct3() { if(something is true) { funct1(); } else cout << someResult; }

void funct2() { if(something is true) { funct3(); } else cout << someResult; } 
```

它只是完成了循环。`funct2 <- funct1 <- funct3 <- funct2`.

但是，我高度怀疑任何具有此类依赖关系的代码。

# java - Android onclick 事件？

> ID：15626201
> 
> 赞同：2
> 
> 时间：2013-03-25T22:42:54.270
> 
> 标签：java, android, onclick, onclicklistener

我正式为为什么这不能正常工作而发疯。我已经尝试了几乎所有东西，但它没有正确调用 onclick 事件？

这是我在 = 符号后收到的错误消息

```
The type new DialogInterface.OnClickListener(){} must implement the
inherited abstract method
DialogInterface.OnClickListener.onClick(DialogInterface, int) 
```

并不断告诉我添加未实现的项目。但我认为它是用`View v`?

谁能帮我理解为什么这不能正常工作？

即使我在一开始就实现了 onclick 侦听器，它仍然无法正常工作？我很混乱？

```
<ImageView
    android:id="@+id/eraserBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:layout_weight="1"
    android:background="@drawable/selector_tool_bg"
    android:src="@drawable/eraser" />

            mEraserBtn = (ImageView) findViewById(R.id.eraserBtn);

             mEraserBtn.setOnClickListener(new OnClickListener){
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    int nBtnID = mEraserBtn.getId();
                    // If the mode is not changed, open the setting view. If the mode is same, close the setting view. 
                    if(nBtnID == mEraserBtn.getId()){
                        if(mSCanvas.getCanvasMode()==SCanvasConstants.SCANVAS_MODE_INPUT_ERASER){
                            mSCanvas.toggleShowSettingView(SCanvasConstants.SCANVAS_SETTINGVIEW_ERASER);
                        }
                        else{
                            mSCanvas.setCanvasMode(SCanvasConstants.SCANVAS_MODE_INPUT_ERASER);
                            mSCanvas.showSettingView(SCanvasConstants.SCANVAS_SETTINGVIEW_ERASER, false);
                        }
                    }   
                }
                }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:47:01.060

> 类型 new DialogInterface.OnClickListener(){} 必须实现继承的抽象方法 DialogInterface.OnClickListener.onClick(DialogInterface, int)

您导入了不正确`OnClickListener`的 . 您的导入必须是

```
import android.view.View.OnClickListener; 
```

并不是

```
import android.content.DialogInterface.OnClickListener; 
```

两者具有相同的名称（容易犯错误），但它们是不同的。当心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:47:39.807

可能您的应用程序中有另一个 ClickListener for Dialog，或者您正在导入错误的 ClickListener，请尝试这样做并测试是否是：

```
 mEraserBtn.setOnClickListener(new android.view.View.OnClickListener){ 
```

如果它有效，您需要按照前面提到的方式组织您的导入

# php - php获取数组中元素的位置

> ID：15626205
> 
> 赞同：-4
> 
> 时间：2013-03-25T22:43:04.647
> 
> 标签：php, arrays, indexing, position

我尝试在我的数组中获取元素的位置，但这不起作用，这是我的代码：

```
<?php
function getWorldRank(){
$query = ("SELECT nickname FROM users ORDER BY score, updateDate Desc ");

mysql_query("SET NAMES 'utf8'");

//GOES TO THE DB WITH THE QUERY
$result = mysql_query($query);

//CHECKS IF THE QUERY IS LEGAL
if(!$result)
return false;

//CHECKS IF THERE ARE NO ROWS FOUND IN THE TABLE
if(mysql_num_rows($result)==0)
return false;

    while($row = mysql_fetch_array($result, MYSQL_ASSOC))
    {
         $returned_array[] = $row;
    }
    return $returned_array;

       }

      $a=getWorldRank();

    echo $key = array_search('vvvv', $a); 
    echo $key = array_search('bbbb', $a); 

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:48:33.820

尝试这个：

```
function getWorldRank() {
  $query = ("SELECT nickname FROM users ORDER BY score, updateDate Desc ");
  mysql_query("SET NAMES 'utf8'");

  //GOES TO THE DB WITH THE QUERY
  $result = mysql_query($query);

  // CHECKS IF THE QUERY IS LEGAL
  if(!$result) {
    return false;
  }

  // CHECKS IF THERE ARE NO ROWS FOUND IN THE TABLE
  if(!mysql_num_rows($result)) {
    return false;
  }

  $returned_array = array();

  while($row = mysql_fetch_assoc($result)) {
    $returned_array[] = $row['nickname'];
  }
  return $returned_array;
}

$a = getWorldRank();

if(!$a) {
  print 'No results returned by database';
} else {
  echo 'vvvv key: ' . array_search('vvvv', $a); 
  echo 'bbbb key: ' . array_search('bbbb', $a); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:47:09.127

你想改变一行：

```
$returned_array[] = $row; 
```

至

```
$returned_array[] = $row['nickname']; 
```

那么你将返回一个数组，而不是数组数组。

# mysql - 我如何将社区构建器从 joomla 1.0 迁移到 joomla2.5

> ID：15626206
> 
> 赞同：0
> 
> 时间：2013-03-25T22:43:17.740
> 
> 标签：mysql, database, joomla, joomla2.5

我正在将我的网站从 joomla 1.0 迁移到 joomla 2.5 并面临一个关键问题。

我正在使用一个名为 community builder 的组件，并且我知道它的表格字段的名称与 joomla 1.0 不同。请任何人都可以帮助我并告诉我如何轻松迁移此组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:07:19.473

你不能直接从 Joomla 1.0 迁移到 2.5，但是我真的不明白你为什么还在运行这么旧版本的 Joomla。

您首先必须迁移到 Joomla 1.5。有关如何执行此操作的更多信息，请访问以下链接：

[http://docs.joomla.org/Migrating_from_1.0.x_to_1.5_Stable](http://docs.joomla.org/Migrating_from_1.0.x_to_1.5_Stable)

完成后，确保您运行的是 1.5.26，它是 1.5 系列的最新版本。然后您需要安装 JUpgrade，它是一个可以轻松将您的 Joomla 1.5 站点迁移到 2.5 的组件。

[http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658)

请注意，迁移过程仅更新核心文件和扩展。它不会更新第 3 方扩展，因此您需要安装与您的 Joomla 版本兼容的扩展版本。

这将是一个很大的过程，所以也请考虑从头开始，因为这可能是更容易的选择。

这些也可能对您有用：

*   [为什么我应该保持我的 Joomla 版本是最新的？](https://stackoverflow.com/questions/12247985/why-should-i-keep-my-joomla-version-up-to-date/12247989#12247989)
*   [提高安全性的扩展](https://stackoverflow.com/questions/11036763/joomla-2-5-4-hacked-having-trouble-with-diagnosis/11037642#11037642)

希望这可以帮助

# asp.net-mvc-4 - 在 MVC 中使用 ajax 调用的 404

> ID：15626207
> 
> 赞同：1
> 
> 时间：2013-03-25T22:43:18.887
> 
> 标签：asp.net-mvc-4

我试图弄清楚为什么我的 MVC4 Web 应用程序能够进行这个 ajax 调用

```
 $.ajax({ 
    url: '@Url.Action("GetData")',
    type: 'GET',
    async: false,
    contentType: 'application/json',
    success: function (result) {
        serverData = result;
    }
}); 
```

在 IIS7 上

但在 IIS6 上，我得到 404 - [http://xxxx/MyController/GetData](http://x.x.x.x/MyController/GetData)未找到。我看到的不同之处在于它在 IIS6 上被配置为应用程序。

我已经尝试过如何指定 url：'@Url.Action("GetData")'，

```
"MyController", "GetData"
"", "GetData" 
```

还没有运气

这些是我在 global.asax 中的路线

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "MyController", // Route name
            "{action}/{id}", // URL with parameters
            new { controller = "MyController", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

谢谢！

# android - 访问安卓流量统计

> ID：15626210
> 
> 赞同：1
> 
> 时间：2013-03-25T22:43:38.783
> 
> 标签：android, traffic

我想监控我的移动热点的流量。

我发现`TrafficStats.getTotalRxBytes`，但这不会让我精确监控 android 移动热点功能（或任何其他应用程序）的使用情况。如何访问**数据使用**菜单的统计信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:05:58.117

> 我找到了 TrafficStats.getTotalRxBytes 但这不会让我精确监控 android 移动热点功能（或任何其他应用程序）的使用情况。

`TrafficStats`还有其他方法——比如`getUidTxBytes()`——可以让你通过 UID 来监控流量，这大致相当于 app. 但是，您可能需要进行一些实验才能确定究竟什么会包含“android 移动热点功能”，而且这不是不可能的`TrafficStats`，至少在 UID 级别上是这样。

欢迎您检查[AOSP 设置应用程序](https://github.com/android/platform_packages_apps_settings)以了解数据使用屏幕是如何实现的，尽管我怀疑在 Android SDK 中除了`TrafficStats`.

# apache - Apache 2 虚拟主机共享 1 个公共目录

> ID：15626214
> 
> 赞同：1
> 
> 时间：2013-03-25T22:43:48.353
> 
> 标签：apache, virtualhost

我有 2 个虚拟站点转到指定目录之外的同一目录。例如。

```
example1.com -> /var/www/example1
/var/www/example1/index.html meta redirects to /var/www/common/index.php?id=example1

example2.com -> /var/www/example2
/var/www/example2/index.html meta redirects to /var/www/common/index.php?id=example2 
```

问题是我收到 Apache Not Found 错误。但是， ' `locahost/example1`' 工作正常， ' `locahost/example2`' 工作正常。问题出在虚拟主机配置中，也许？

两者都是（缩写）...

```
<VirtualHost *:80>
  ServerName example1.com
  DocumentRoot /var/www/example1
</VirtalHost>

<VirtualHost *:80>
  ServerName example2.com
  DocumentRoot /var/www/example2
</VirtalHost> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:00:32.423

对于它的价值，我无法弄清楚这一点。我最终在 web 根目录中做了两个虚拟服务器，然后从那里使用服务器端 php 来控制内容。如果有人认为这很糟糕或对此问题有实际答案，我很想知道。

# pandas - 删除在某些变量中没有有限值的 pandas 数据帧行

> ID：15626215
> 
> 赞同：1
> 
> 时间：2013-03-25T22:44:01.527
> 
> 标签：pandas, notnull

对于以下简单但看似常见/有用的任务，我看不到内置函数是什么：删除对我的任何关键列都没有价值的行。

```
def keepIfPopulated(adf,interestingVars):
        good=0
        for vv in interestingVars:
            good+=adf[vv].notnull()
        return(adf[good>0]) 
```

如果只有一列感兴趣，我可以选择保留它，但大多数 pandas 函数都将一个或多个标签作为参数，所以这个问题是关于如何一次检查一个*或多个*列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:57:02.713

```
adf = adf.dropna(subset=interestingVars, how='all') 
```

# c# - 有效使用类中的静态字段和方法？在构造函数或声明中初始化？我需要指导

> ID：15626216
> 
> 赞同：1
> 
> 时间：2013-03-25T22:44:03.277
> 
> 标签：c#, oop, class-design

我知道在面向对象编程中何时使用或不使用静态字段和方法存在许多问题，但大多数示例归结为使用 Math.Pi 或类似的简化示例。

作为一名程序员，我已经严重不复存在了，我猜这是由于我的残疾造成的，我一般无法遵守 OOP 编程。如果由我决定，我会对我的许多程序使用函数式方法，但我的程序员同事不一定同意。

我知道并非所有问题都可以在 OOP 环境中得到最好的解决，但我将尝试提出一个我目前面临的问题，我认为最好使用 OOP 技术来解决。

我的主要问题是我不明白在 C# 中使用 OOP 时如何最好地利用系统资源。在向我的类引入静态字段和方法以及何时将资源声明为静态或非静态时，我无法可视化内存分配和执行流程。

因此，这是对我手头问题的简短解释：

我需要开发一个在两个断开连接的系统之间同步信息的“实用程序”。“系统 1”使用“票证”运行，其中包含客户报告并由测试人员验证的错误信息。我可以通过.Net 的实体框架通过 Linq 查询到 SQL 数据库，将 Ticket 内容作为对象访问。

“系统 2”使用需要根据“系统 1”的工单创建的工作项进行操作。“实用程序”需要保持此信息同步，并且可以从两个系统进行更改。所以我需要在程序运行之间保持有关不同对象状态的信息。

所以我使用“系统 1”的数据库（只读）来创建与“系统 2”创建初始工作项的要求相匹配的本地对象，并通过二进制序列化存储本地对象，这样我就可以在接下来在本地运行并比较值，避免不必要的网络和服务器负载，然后通过各自的 API 更新系统。

虽然我有一个可行的解决方案，但我不确定它是否运行有效。我有一个类 (LocalTicket) 和一个类 (LocalWorkItem)，用于在运行之间保持状态，但是 LocalTicket 类使用数据库连接来收集有关工单的信息，并且我声明了一个静态列表来保存来自服务器的值与本地对象进行比较。在输入第一个 LocalTicket 对象的构造函数之前，我不会初始化列表，而是通过 LINQ to Object 查询来完成的。

这会导致我的 LINQ 查询在每次创建 LocalTicket 时执行，还是只执行一次？我最好是通过类中的静态方法从 LINQ 查询初始化列表，还是让非静态方法用对象填充列表并要求我的实用程序类中的调用方法创建一个新对象以能够比较对象？还是在定义时直接初始化？从查询内容创建的结果 LocalTickets 在本地使用，并在每次运行时重新创建，以检测通过帮助台应用程序对数据库所做的实际更改。

如果这看起来像一堆垃圾，我很抱歉，但我不知道如何用更明确的方式来描述它......

我想我需要一些关于设计类的指导，这些类包含对生成对象的外部源的调用，比如工厂的东西或其他东西。

在上下文中阅读此内容时，我很惊讶是否有人真的可以给我任何建议，但我抓住机会......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T10:27:24.703

创建一个“服务”类来管理每个单独的远程服务器，通过那里的方法保存和查询工单或工作项的列表。

您不希望工单或工作项的列表一直保持不变——您的应用程序需要不时刷新其中的一些。

所以：

*   票务服务。
*   工作清单服务。

对于良好的编程形式，这些服务最好不要作为静态变量，而是作为主程序中的全局变量拥有。

然后，您的主要工作循环可以包括：

```
this.ticketService = new TicketService( /*some DB location*/);
this.worklistService = new WorklistService( /*worklist DB or URL location*/);
while (stillRunning) {
    List<Ticket> tickets = ticketService.queryTickets();
    syncTickets( tickets);
    // wait 1 minute.
} 
```

希望这可以帮助。

# trac - TracJSGanttChart 抛出错误

> ID：15626217
> 
> 赞同：-1
> 
> 时间：2013-03-25T22:44:05.910
> 
> 标签：trac, gantt-chart

如果我没有添加正确的自定义工单字段，TracJSGanttChart 会抛出错误而不是呈现图表。

我试图通过添加*userstart*和*userfinish*来解决这个问题。但它仍然崩溃并显示以下错误消息：*完成不是自定义工单字段*

所以似乎有更多的领域是必要的。某处是否有示例*trac.ini*以便我可以从那里复制缺少的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:29:39.873

很明显，甘特图渲染器在这里要求开始、结束和（百分比）完成。

*添加另一个完整*的自定义字段并让它飞起来应该不会太难。欢迎您提交缺陷，或者更好地为[TracJsGanttPlugin](http://trac-hacks.org/wiki/TracJsGanttPlugin)提交增强票以请求简单启动收据，因为当前的配置提示确实看起来相当复杂。

# c# - 查询表达式“@ID = @@IDENTITY”中的语法错误（缺少运算符）

> ID：15626220
> 
> 赞同：0
> 
> 时间：2013-03-25T22:44:24.227
> 
> 标签：c#, sql-server, ms-access

我从[这里给出了宝贵的建议](https://stackoverflow.com/questions/15622011/unable-to-retrieve-microsoft-access-autonumber-values)

但是正如主题标题所说，我在 btnLogin 方法中收到错误，这与我之前的问题有关，但我认为确实是同样的问题？我这样说是因为我没有从我以前的问题中得到错误。如果有人可以在这里帮助我，请提前感谢。

访问 2003 VS 2010 c#

这是我的 btnLogin 方法

```
 OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;

        cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime)";
        cmd.CommandText = "SELECT @ID = @@IDENTITY"; 

        cmd.Parameters.AddWithValue("@UserName", txtUserName.Text);
        cmd.Parameters.AddWithValue("@LoggedInDate", DateTime.Now.ToShortDateString());
        cmd.Parameters.AddWithValue("@LoggedInTime", DateTime.Now.ToString("HH:mm"));
        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();
        myCon.Close(); 
```

这是我的 btnLogOut 方法。

```
 OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;

       cmd.CommandText = " UPDATE [LoginLogTable] SET [LoggedOutDate] = ?, [LoggedOutTime] = ? WHERE ID = @ID";
       cmd.Parameters.AddWithValue("@LoggedOutDate", DateTime.Now.ToShortDateString());
        cmd.Parameters.AddWithValue("@LoggedOutTime", DateTime.Now.ToString("HH:mm"));
        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery(); 
```

该代码的目的是记录用户登录的日期和时间以及用户注销的日期和时间。

**更新2** 我也试过这个......

```
cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime)" +  "SELECT @ID = @@IDENTITY"; 
```

然后我收到错误...

> SQL 语句末尾缺少分号 (;)。

**更新 3**

```
cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES 
(@UserName, @LoggedInDate, @LoggedInTime)";   "SELECT @ID = @@IDENTITY"; 
```

我放了一个; 我得到了错误......

> 只有赋值、调用、递增、递减和新对象表达式可以用作语句

查看其他解决方案提供了我的其他成员

**更新 4**

我认为这里的一些建议可能只适用于 SQL Server。我正在使用 MS Access 2003。

**更新 5**

```
cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES 
(@UserName, @LoggedInDate, @LoggedInTime);  SELECT @ID = @@IDENTITY"; 
```

接收错误...

> 在 SQL 语句结束后找到的字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:48:57.810

看来您的代码可能有错误。您将 cmd 的 Text 设置为第一行，然后将其完全替换为第二行：

```
cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime)";
cmd.CommandText = "SELECT @ID = @@IDENTITY"; 
```

所以你实际上只执行：

```
cmd.CommandText = "SELECT @ID = @@IDENTITY"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:06:50.173

在第一个登录方法中，您通过设置两次来覆盖命令文本：

```
cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime)";
cmd.CommandText = "SELECT @ID = @@IDENTITY"; 
```

在“更新 2”中，您在 INSERT 语句之后立即连接 SELECT 语句，从而产生以下 SQL：

```
INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime)SELECT @ID = @@IDENTITY 
```

你必须设置一个';' 在 INSERT 语句的末尾，在“SELECT”之前。

顺便说一句。使用 SCOPE_IDENTITY()，而不是 @@IDENTITY，请参阅[http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)和[SQL：如何获取我刚刚插入的值的 id？](https://stackoverflow.com/questions/45651/sql-how-to-get-the-id-of-values-i-just-inserted)

另外，这里有一个类似的问题，显示了执行命令的正确方法： [如何获取最后插入的 id？](https://stackoverflow.com/questions/5228780/how-to-get-last-inserted-id)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:09:23.083

如果您正在考虑获取用户 ID，则必须将两个语句合并到一个批次中

```
 cmd.CommandText = "INSERT INTO LoginLogTable (UserName, LoggedInDate, LoggedInTime) VALUES (@UserName, @LoggedInDate, @LoggedInTime) SELECT @@IDENTITY"; 
```

# php - 数组中的未知错误？PHP

> ID：15626224
> 
> 赞同：0
> 
> 时间：2013-03-25T22:44:37.107
> 
> 标签：php, arrays

如果有人能看到这段代码的问题，如果你能启发我，我会很高兴？我已经尝试过`echo var_dump($content_array2);`了，它说数组包含 5 (0-4) 个字符串应该没问题，它应该打印`$values[0]`and`$values[1]`但仍然说 Undefined offset: 1 在我回显值的同一行？

```
<?php
    $myFile = 'demo.txt';
    $content = file_get_contents($myFile);
    $content_array2 = explode("\n", $content);      
?>

<?php for($i = 0; $i < count($content_array2); $i++):
       $values = explode(';', $content_array2[$i]);?>
       <li><?php echo $values[0].$values[1]; ?></li>
<?php endfor; ?> 
```

现在它只是 demo.txt 中的垃圾，看起来像这样：

kgkhjvk;4;mvbjhgv;jkhgiuh;kluhouyghb

jhghjgv;2;j,hgbkjh;k,jhkj;kjhuihb

jhghjgv;2;j,hgbkjh;k,jhkj;kjhuihb

jhghjgv;2;j,hgbkjh;k,jhkj;kjhuihb

jhghjgv;2;j,hgbkjh;k,jhkj;kjhuihb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:01:30.153

我已经更正了您的代码并进行了测试...现在可以使用...

解决方案：

```
<?php
$myFile = 'demo.txt';
$content = file_get_contents($myFile);
$content_array2 = explode("\n", $content);      

$values = array(); //says that $values is an array  

for($i = 0; $i < count($content_array2); $i++):

    //values now is an array of array
    $values[$i] = explode(';', $content_array2[$i]);

    //skip the empty line and print $values[$row][$column]
    if($values[$i][0])
        echo "<li>". $values[$i][0]." ".$values[$i][1]." ".$values[$i][2]." ".$values[$i][3]." ".$values[$i][4] ."</li>";

 endfor; 
?> 
```

测试和工作！

# c - 线程工作者和 epoll

> ID：15626234
> 
> 赞同：0
> 
> 时间：2013-03-25T22:45:01.440
> 
> 标签：c, linux, network-programming

我正在尝试实现一个处理许多 tcp 连接的服务器，根据一天中的时间从 100 到 1000 个连接/天。在阅读了很多关于每个连接线程的 c10k 问题并仅使用 epoll 之后，我决定将两者都用作线程池，并且 main 将充当调度程序，因此每个新连接都将分配给一个线程。

我有很多问题在其他任何地方都找不到答案。以下线程安全吗？在添加新的 fd 之前我需要锁定吗？

```
int main ()
{
    while(i < number_threads)
      {         
        pthread_create( &id , NULL ,  worker , (void*) epoll_fd[i]);
        i++;
      }

//is it ok to add the new_sock for the epoll_fd[i] so the thread can pick it up
int y = 0;
    while(1) {
        new_sock = accept(...);
           if (epoll_ctl(epoll_fd[y], EPOLL_CTL_ADD, new_sock, &ev) < 0)
            {
                print error; 
            }
    y++;
    if (y == number_threads)
    y = 0;
    }

}

void *worker(void *epfd)
{
epoll_wait //start waiting for event
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:25:03.623

如果你这样做：

```
pthread_create( &id , NULL ,  worker , (void*) epoll_fd + i); 
```

在线程函数中，这个：

```
void *worker(void *vp_epfd) {
  int *p_epfd = (int*) vp_epfd; 
```

那么它应该可以工作，并且是线程安全的，假设您`*p_epfd`在正确的位置检查更新。

# git - jenkins in cloudbees 远端意外挂断

> ID：15626237
> 
> 赞同：2
> 
> 时间：2013-03-25T22:45:10.670
> 
> 标签：git, jenkins, bitbucket, cloudbees

我在 bitbucket 中有存储库，我想用运行 jenkins 作为服务的 Cloudbees 配置这个存储库

我的问题是当我尝试运行 Jenkins 构建时收到此错误消息

> 克隆远程 repo 'origin' 时出错：无法克隆 ssh://myRepo@bitbucket.org/myRepo/app1.git hudson.plugins.git.GitException：无法克隆 ssh://myRepo@bitbucket.org/myRepo/app1 .git at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.clone(CliGitAPIImpl.java:219) at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1001) at hudson.plugins.git.GitSCM$2.invoke (GitSCM.java:942) at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2236) at hudson.remoting.UserRequest.perform(UserRequest.java:118) at hudson.remoting.UserRequest.perform(UserRequest.java: 48) 在 hudson.remoting.Request$2.run(Request.java:326) 在 hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java :334) 在 java.util.concurrent。FutureTask.run(FutureTask.java:166) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang .Thread.run(Thread.java:722) 引起：hudson.plugins.git.GitException：命令“git clone --progress -o origin ssh://myRepo@bitbucket.org/myRepo/app1.git /scratch/ jenkins/workspace/myRepo 自动化构建”返回状态码 128：标准输出：克隆到 '/scratch/jenkins/workspace/myRepo 自动化构建'...GitException：命令“git clone --progress -o origin ssh://myRepo@bitbucket.org/myRepo/app1.git /scratch/jenkins/workspace/myRepo 自动化构建”返回状态码 128：stdout：克隆到 '/scratch /jenkins/workspace/myRepo 自动化构建'...GitException：命令“git clone --progress -o origin ssh://myRepo@bitbucket.org/myRepo/app1.git /scratch/jenkins/workspace/myRepo 自动化构建”返回状态码 128：stdout：克隆到 '/scratch /jenkins/workspace/myRepo 自动化构建'...
> 
> **标准错误：警告：将 'bitbucket.org,207.223.240.182' (RSA) 永久添加到已知主机列表中。权限被拒绝（公钥）。致命：远端意外挂断**

我认为问题在于我需要将 bitbucket 添加到“已知主机列表”中，但我不知道如何在托管在 Cloudbees 服务器中的 Jenkins 上执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:53:49.127

转到 /configure，您应该会在配置列表中看到 CloudBees SSH 密钥。将其添加到您的 BitBucket 存储库的密钥列表中，以使 Jenkins 可以访问该存储库。

# udp - 提升 ASIO 和 UDP 错误

> ID：15626239
> 
> 赞同：0
> 
> 时间：2013-03-25T22:45:24.143
> 
> 标签：udp, boost-asio, socketexception

我有两个几乎相同的测试程序（A 和 B），它们使用相同的 boost asio UDP 异步代码。

这是接听电话：

```
_mSocket.async_receive_from(
            boost::asio::buffer(_mRecvBuffer), _mReceiveEndpoint,
            boost::bind(&UdpConnection::handle_receive, this,_mReceiveEndpoint,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
// _mReceiveEndpoint is known and good. the buffer is good too. 
```

// 这里是处理程序

```
void handle_receive(const udp::endpoint recvFromEP, const boost::system::error_code& error,std::size_t  bytesRecv/*bytes_transferred*/)
{
    boost::shared_ptr<std::string> message(new std::string(_mRecvBuffer.c_array(),bytesRecv));
    if (!error) 
      {
      doSomeThingGood();
      } 
else {
        cerr << "UDP Recv error : " << error << endl;
    }
} 
```

所以这就是发生的事情，都在本地主机上。

如果我先启动程序“A”，然后程序“B”，“A”会给出 UDP Recv 错误：服务器：10061。程序“A”继续发送正常，“B”接收正常。

您可以在上面的句子中交换“A”和“B”，它仍然是正确的。

如果我通过再次调用 mSocket.async_receive_from 尝试重置错误的读取条件，则会收到错误 10054。

我在网上查过这些错误......不是很有帮助。

任何人都知道这些是什么意思，如果发生这种情况，我如何在程序中恢复？有没有办法重置插座？

健全性检查....两个程序都可以在只有两个端口的环回上运行吗？A 发送 = 20000，A 接收 = 20001 B 发送 = 20001，B 接收 = 20000

TL;DR 看起来好像我在发送之前尝试收听，我收到一个错误并且我无法从中恢复。如果我在发送后听，我很好。

- 编辑 - 看来 McAfee 主机入侵防护对我做了一些讨厌的事情......如果我在 VS2010 中调试，我会卡在他们的 DLL 中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:29:40.450

在我的接收处理程序中，我没有再次调用 _mSocket.async_receive_from() ......我只是打印了错误并退出了。

愚蠢的错误，只是在这里发帖以防它帮助其他人。

同样对于具有不同分辨率的类似问题： _mSocket.set_option(boost::asio::socket_base::reuse_address(true));

如果您有多个听众，这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T19:11:35.470

一些消息来源解释说您应该在 Windows 上使用 SO_REUSEADDR。但是没有人提到可以在绑定和*不*绑定套接字的情况下接收 UDP 消息。下面的代码将套接字绑定到本地listen_endpoint，这是必不可少的，因为没有它您可以并且仍然会收到您的UDP消息，但默认情况下您将拥有端口的独占所有权。

但是如果你在socket上（或者使用TCP的时候在acceptor上）设置reuse_address(true)，然后再绑定socket，就会让多个应用，或者你自己应用的多个实例再做一次，每个人都会收到消息。

```
// Create the socket so that multiple may be bound to the same address.
boost::asio::ip::udp::endpoint listen_endpoint(
    listen_address, multicast_port);

// == important part ==
socket_.open(listen_endpoint.protocol());
socket_.set_option(boost::asio::ip::udp::socket::reuse_address(true));
socket_.bind(listen_endpoint);
// == important part ==

boost::array<char, 2000> recvBuffer;
socket_.async_receive_from(boost::asio::buffer(recvBuffer), m_remote_endpoint,
        boost::bind(&SocketReader::ReceiveUDPMessage, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred) 
```

来源： http: [//www.boost.org/doc/libs/1_45_0/doc/html/boost_asio/example/multicast/receiver.cpp](http://www.boost.org/doc/libs/1_45_0/doc/html/boost_asio/example/multicast/receiver.cpp)

# javascript - 使用 jQuery 在 BODY 标记的末尾放置“脚本”

> ID：15626240
> 
> 赞同：6
> 
> 时间：2013-03-25T22:45:32.653
> 
> 标签：javascript, jquery, google-chrome-extension

这是我想要在“body”标签之前的“脚本”：

```
<script type="text/javascript">
  var vglnk = { api_url: '//api.viglink.com/api',
                key: '89dcd0a12ff35d227eaaaff82503030b' };

  (function(d, t) {
    var s = d.createElement(t); s.type = 'text/javascript'; s.async = true;
    s.src = ('https:' == document.location.protocol ? vglnk.api_url :
             '//cdn.viglink.com/api') + '/vglnk.js';
    var r = d.getElementsByTagName(t)[0]; r.parentNode.insertBefore(s, r);
  }(document, 'script'));
</script> 
```

我希望这段代码是我放“这里”的地方

```
<html>
<head>
</head>

<body>
    Some HTML and stuff
    HERE
</body>

</html> 
```

我将如何在 jQuery 中解决这个问题？（我是通过一个扩展来做这个的。主要是在 Chrome 中，但也在 Firefox 和 Internet Explorer 中。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T11:07:43.627

您需要[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)在您想要的每个页面上进行插入。

内容脚本的代码非常简单，不需要 jQuery。

```
var code = "your script code here";
var script = document.createElement("script");
script.setAttribute("type", "text/javascript");
script.appendChild(document.createTextNode(code));
document.body.appendChild(script); 
```

因为它只会在您甚至不需要定义函数时才被调用。您可以在内容脚本附加的任何 Web 上使用调试器调试代码 ( `F12`)，您将在内容脚本选项卡中看到您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T07:43:11.013

关于添加 jQuery 的最佳位置，我遇到了同样的问题：到标题还是在正文标记之前？答案是没关系。

整个页面（或[DOM](https://en.wikipedia.org/wiki/Document_Object_Model)）需要初始化或加载才能完成您正在做的事情。

*和...*

正文中的信息越多，确保加载文档所需的依赖就越多。

上面两句话是多余的，因为：

所有 jQuery UI、基本语法、小部件等都通过以下方式触发：

```
$(document).ready( function() {
    $("#some_id").click( function {
        More code here
    });
});` 
```

上面的代码意味着在 jQuery 可以运行之前需要加载完整的 HTML 页面（或“文档”），AKA 初始化。

需要加载 jQuery 才能使 UI 工作的顺序。实际的库需要首先，然后是 UI。该库可以从 jquery.com 下载并上传到设计师网站空间或通过 CDN（内容显示网络）以节省带宽。这是订单应该如何的示例：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script> 
```

注意库是第一行，然后是 UI。在这种情况下，我加载了[jQuery Mobile](https://en.wikipedia.org/wiki/JQuery_Mobile)。

总之，没关系。这主要是一种偏好。更多关于*[Unclear where $(document).ready 的内容](https://forum.jquery.com/topic/unclear-where-document-ready-goes#14737000004139019)*。

# java - Javascript to Java Applet Uncaught TypeError: Object # 没有方法

> ID：15626242
> 
> 赞同：1
> 
> 时间：2013-03-25T22:45:47.453
> 
> 标签：java, javascript, applet

这是来自[http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)的一个示例我已经剥离了很多功能，因为我只是想让基本的小程序工作但即使我直接从 zip 中运行他们的示例，它给了我一个错误，说 ![在此处输入图像描述](../Images/9946867e7a4bcb97027668313ad773e9.png) 我也尝试将这些类归档到一个 jar 文件中，看看是否有帮助，但它仍然继续给我同样的错误。

我认为问题出在文件夹/文件结构上，但我不确定。

JavaScript 和 HTML

```
<script>
function enterNums(){
mathApplet.userName = "John Doe";
var greeting = mathApplet.getGreeting();
}
</script>
    <script src="http://www.java.com/js/deployJava.js"></script>
<script>
  var attributes = { 
    id:'mathApplet', 
    code:'jstojava.MathApplet',  
    width:1, 
    height:1
  } ;
  var parameters = { 
    codebase:"/scripts/java/", 
    jnlp_href:"math_applet.jnlp"
  } ;
  deployJava.runApplet(attributes, parameters, '1.7');
</script>
<p><a href="javascript:enterNums();">Launch Example</a></p> 
```

JNLP 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+">
<information>
    <title>Math Applet - JavaScript to Java LiveConnect</title>
    <vendor>Sun</vendor>
</information>
<resources>
    <!-- Application Resources -->
    <j2se version="1.6+"
          href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="jstojava.jar" main="true" />

</resources>
<applet-desc 
     name="Math Applet"
     main-class="MathApplet"
     width="1"
     height="1">
 </applet-desc>
 <update check="background"/>
</jnlp> 
```

Java 代码

```
package jstojava;
import java.applet.Applet;

public class MathApplet extends Applet{
  public String userName = null;

  public String getGreeting() {
    return "Hello " + userName;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:59:48.940

因此，在意识到您可以在 Java 控制台控制面板>Java>高级>显示控制台中打开错误跟踪

在控制台中按 5 设置最高跟踪级别。

事实证明，由于网络服务器上不允许 mime 类型，因此未下载 jnlp 文件。

# java - 连接 3G 与 Wi-Fi 连接

> ID：15626243
> 
> 赞同：1
> 
> 时间：2013-03-25T22:45:58.313
> 
> 标签：java, android, http, http-headers

我正在开发一个使用 xml webservice 的 android 应用程序。在 wi-fi 网络中连接时工作正常，但在 3G 网络中连接时，失败（未找到 http 404）。

它不仅仅发生在设备中。为了进行测试，我在桌面中创建了一个 main 方法，并且出现了问题。当我连接到 Wifi 网络工作和 3G 网络失败。

在 3g 或 wifi 中，我看到 HttpRequest 标头和他的信息相同。

可以是什么？帮我！！

```
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 10000);
HttpConnectionParams.setSoTimeout(httpParams, 10000);       

System.setProperty("http.keepAlive", "false");
HttpClient client = new DefaultHttpClient(httpParams);
HttpGet get = new HttpGet(url);

get.addHeader("Referer", "http://rast.sample.com/sample");
get.addHeader("User-Agent","Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22");
get.addHeader("Content-Type","application/x-www-form-urlencoded");
get.addHeader("X-Requested-With","XMLHttpRequest11");
get.addHeader("Accept","application/xml, text/xml, */*");
get.addHeader("Cache-Control","no-cache"); // HTTP/1.1
get.addHeader("Expires", "Sat, 26 Jul 1997 05:00:00 GMT");
get.addHeader("Connection","close");

HttpResponse resp = client.execute(get);
HttpEntity entityResp = resp.getEntity(); 
```

我认为可能是3G缓存的问题，我该如何清理？

编辑：我意识到 3G 有时有效，有时无效。

我进行了以下测试：在 3G 上使用两台设备，一台工作，另一台不工作。我启用该设备作为不工作设备的接入点（共享工作设备的 3G 网络），然后其他设备也工作。

Edit2：我意识到浏览网站，连接到 3G 网络，它可以工作。会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:51:49.557

可能是由于连接尚未建立而出现问题...

尝试按照此处的建议等待连接：[https ://stackoverflow.com/a/8679706/944070](https://stackoverflow.com/a/8679706/944070)

也适用于 3G

**编辑：**

在您的额外代码之后，我还建议将超时更改为 from `10000`to`45000`或`60000`3G 总是比 wifi 慢！

**编辑2：**详细说明[等待wifi连接到android](https://stackoverflow.com/questions/8678362/wait-until-wifi-connected-on-android)链接。

更改您的代码，例如：

```
Thread t = new Thread() {
    @Override
    public void run() {
        try {
            //check if connected!
            int count = 0;
            while (!isConnected(YourActivityName.this)) {
                count++;
                //Wait to connect
                Thread.sleep(1000);  
                // log to help you understand what is going on...
                Log.w("debug", "no connection try "+ count); // ... do not forget to remove it!
                // DO NOT TRY FOR EVER!!!
                if(count > Number_of_allowed_times) {
                    break;
                }
            }
            if(isConnected(YourActivityName.this)) {
               Log.w("debug", "network connection OK! ");
               // here you can do your stuff
            } else {
               Log.w("debug", "no connection tried " + count +" times");
            }

        } catch (Exception e) {
        }
    }
};
t.start(); 
```

`isConnected`就像在链接：

```
public static boolean isConnected(Context context) {
    ConnectivityManager connectivityManager = (ConnectivityManager)
        context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = null;
    if (connectivityManager != null) {
        networkInfo = connectivityManager.getActiveNetworkInfo();
    }

    return networkInfo == null ? false : networkInfo.getState() == NetworkInfo.State.CONNECTED;
} 
```

而不是 Thread and wait 您可以使用`BroadcastReceiver`for`android.net.conn.CONNECTIVITY_CHANGE`和当连接建立时收到通知以刷新/下载内容。

# uiview - iOS6 - 更改视图中的嵌入式子视图

> ID：15626245
> 
> 赞同：0
> 
> 时间：2013-03-25T22:46:03.130
> 
> 标签：uiview, ios6

我正在寻找一些想法，什么是实现以下行为的最佳方法（如果可能的话，也是代码/伪代码的起点）：

*   带有 ViewA 的 BookViewController - 包含一些 UILabel（例如关于一本书的信息）
*   带有 ViewB 的 MainViewController - 包含一些 UI 元素并在中间显示 ViewA（一次一个视图）

用户应该能够在 ViewB 内滑动以查看不同的书籍，即我需要管理多个 ViewA 视图，创建新视图并用新数据填充它们，然后替换 ViewB 中可见的当前实例。因此，我将有效地改变屏幕中心的视图。完成此功能的最简单和最有效的方法是什么？任何建议意见表示赞赏 - 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:54:26.953

你只需要一个视图控制器。它应该控制一个滚动视图，在中心启用分页，例如三个书本视图，一个可见，一个左右。控制器应管理这些图书视图中显示的数据。

# python - 使用 py2app 打包 wxpython 应用程序会改变 GUI 行为

> ID：15626248
> 
> 赞同：3
> 
> 时间：2013-03-25T22:46:04.023
> 
> 标签：python, macos, wxpython, py2app

我正在使用的 wxpython 应用程序出现一些非常奇怪的行为。当我直接运行应用程序（例如 python ./main.py）时，一切正常。但是，当我运行应用程序的打包版本（使用 py2app 制作）时，我会遇到一些奇怪的行为。

具体来说：我有一个复选框，选中后会打开一个 wx.Frame。直接运行应用程序时，它工作正常。当我使用打包版本时，第一次单击复选框时没有任何反应。要显示窗口，我必须取消选中该复选框，然后重新选中它。click 事件*确实*被触发，并且 frame.show() 被调用，但第一次点击时窗口永远不会出现。

这是 py2app 配置代码：

```
from setuptools import setup

APP = ['MessengerVisualization.py']
DATA_FILES = ['UVVSSCIC.FMT', 'data', 'magfield', 'shaders', 'textures', 'features.csv', 'libspice.dylib', 'Na.M2.PSD.fast.stick.density.dat', 'messenger_kernels']
OPTIONS = {'argv_emulation': False}

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app']
) 
```

这是显示（）窗口的代码的缩写版本：

```
def handler(evt):
    if cb.GetValue():
        frame = UVVSFrame(None, -1, 'MASCS UVVS Data: %s (%s)' % (species,typestr),
                  size=(854, 480), controller=self, view=view_b,
                  data_provider=self.uvvs_provider,
                  shader_style=style)
        frame.identifier = wx.NewId()
        frame.Bind(wx.EVT_CLOSE, frame_cleanup(frame.identifier))
        frame.Show() 
```

看起来其他人在使用 argv_emulation 时遇到了问题，但将其设置为 False 似乎并不能解决我的问题。

我还尝试在捕获事件时执行 frame.show()、frame.hide()、frame.show()（以防某些东西阻止了第一次 show()），但这并没有帮助。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T20:11:53.380

我没有解决方案，但我想添加我的观察结果（不知道为什么我不能对这个问题发表评论）。

我在创建 wx.Dialog 的按钮处理程序时遇到了同样的问题。该对话框仅在我再次单击该窗口后出现。但是，wx.MessageDialog 使用 ShowModal 正确显示。还有其他想法吗？这个问题是所有应用程序构建者共有的，还是只是 py2app？

# r - R - 当向量在两个矩阵中时，如何向量化外积之和的计算？

> ID：15626254
> 
> 赞同：1
> 
> 时间：2013-03-25T22:46:35.550
> 
> 标签：r, vectorization

R-当向量在两个矩阵中时，如何向量化外积之和的计算-`X`和`Y`？

**例子 ：**

```
X = cbind(1:3, 2:4)
Y = cbind(0:2, c(0,0,1))
> X
     [,1] [,2]
[1,]    1    2
[2,]    2    3
[3,]    3    4
> Y
     [,1] [,2]
[1,]    0    0
[2,]    1    0
[3,]    2    1

> outer(X[1,],Y[1,]) + outer(X[2,],Y[2,]) + outer(X[3,],Y[3,])
     [,1] [,2]
[1,]    8    3
[2,]   11    4 
```

我想矢量化操作：

`outer(X[1,],Y[1,]) + outer(X[2,],Y[2,]) + outer(X[3,],Y[3,])`- 可能吗 ？Mayby 具有一般结构的东西，例如：`lapply( ,FUN=outer)`，然后取列表中的元素总和？否则我必须循环过去`outer(X[i,],Y[i,])`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T22:53:46.527

这只是`matrix multiplication`：

```
t(X) %*% Y
v     [,1] [,2]
# [1,]    8    3
# [2,]   11    4 
```

您需要一个 2*2 矩阵，并且矩阵 X 和 Y 的维度都是 3*2。转置 X 得到 2*3，当与 3*2 矩阵相乘时，得到所需的 2*2 矩阵。

# asp.net-mvc - MVC 4 - 为什么我的身体被设置为 1903px x 300px？

> ID：15626257
> 
> 赞同：0
> 
> 时间：2013-03-25T22:46:44.347
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我创建了一个 MVC 4 应用程序（Internet 模板）。它创建的主体是 1903px 宽 x 300px 高。在下图中，您可以看到它是如何渲染的。我没有看到指定宽度的任何地方，我很好奇它为什么决定创建 1903px 的宽度（和 300px 的高度）。

![在此处输入图像描述](../Images/5c0db200a4d2d0e68b997ff5a3ecefbe.png)

如果有帮助，主页的 HTML 如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - The Exchange Site</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-left">
                    <img src="~/Images/CompanyLogo.png">
                </div>
                <div class="float-right">
                    <section id="login">
                        @Html.Partial("_LoginPartial")
                    </section>
                    <nav>
                        <ul id="menu">
                            <li>@Html.ActionLink("Home", "Index", "Home")</li>
                            <li>@Html.ActionLink("About", "About", "Home")</li>
                            <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div id="body">
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; @DateTime.Now.Year - Siesta Key Software, LLC</p>
                </div>
            </div>
        </footer>

        @Scripts.Render("~/bundles/ExchangeSite")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T13:32:09.193

I've just had exactly the same issue / question. It is setting the width based on the width of the browser window. If you make your window narrower and refresh the screen you will see that the width property (and probably the height property) have changed. I got around this by explicitly setting the width in the Site.css of the body as follows :

```
body {
    width:2000px;
} 
```

# asp.net - 如何在页面上找到 GridView

> ID：15626259
> 
> 赞同：0
> 
> 时间：2013-03-25T22:46:51.037
> 
> 标签：asp.net, gridview, findcontrol

我在我的页面上嵌套了 GridView（默认），我需要在里面获取 GridView 的 ID，但它返回 null。我在嵌套的 GridViews 之外有一个 UpdatePanel。它正在使用母版页。

```
GridView gv = (GridView)UpdatePanel1.FindControl("GridViewSchedule"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:05:14.177

这是递归查找控件的辅助方法。

```
public static Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id)
        return root;

    return root.Controls.Cast<Control>()
        .Select(c => FindControlRecursive(c, id))
        .FirstOrDefault(c => c != null);
}

// Usage
var gridView = FindControlRecursive(UpdatePanel1, "GridViewSchedule"); 
```

# java - 使用 Java Swing 平均成绩

> ID：15626262
> 
> 赞同：-4
> 
> 时间：2013-03-25T22:47:00.663
> 
> 标签：java, swing

我有一个家庭作业，我一直在编码。我以为我已经完成了，但每当我想显示平均值时，它会在内容窗格中显示一个 0 列表。

这是任务的描述。

> 编写一个 Swing 程序，声明一个最大长度为 50 的空成绩数组。在 while 循环中实现一个 JOptionPane 输入框，以允许用户输入成绩。当用户输入 -1 的标记值时，这将表示数据输入循环的结束。
> 
> 输入成绩后，内容窗格应显示从最低到最高排序的成绩。编写一个循环遍历数组，查找大于零 (0) 的元素。保持这些项目的运行计数，并将它们累积到一个总数中。将总计除以输入的成绩数以找到平均值，并将平均值显示在排序的成绩列表的末尾。使用 DecimalFormat 方法将平均值显示为小数点后 2 位。

```
/*
    Chapter 7:      Average of grades
    Programmer:     
    Date:           
    Filename:       Averages.java
    Purpose:        To use the Java Swing interface to calculate the average of up to 50 grades.
                    Average is calculated once -1 is entered as a value. The grades are then sorted
                    from lowest to highest and displayed in a content pane which also displayes the average.
*/

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;
import java.text.DecimalFormat;

public class Averages extends JFrame
{
    //construct conponents
    static JLabel title = new JLabel("Average of Grades");
    static JTextPane textPane = new JTextPane();
    static int numberOfGrades = 0;
    static int total = 0;
    static DecimalFormat twoDigits = new DecimalFormat ("##0.00");

    //set array
    static int[] grades = new int[50];

    //create content pane
    public Container createContentPane()
    {
        //create JTextPane and center panel
        JPanel northPanel = new JPanel();
        northPanel.setLayout(new FlowLayout());
        northPanel.add(title);

        JPanel centerPanel = new JPanel();
        textPane = addTextToPane();
        JScrollPane scrollPane = new JScrollPane(textPane);
            scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
            scrollPane.setPreferredSize(new Dimension(500,200));
        centerPanel.add(scrollPane);

        //create Container and set attributes
        Container c = getContentPane();
            c.setLayout(new BorderLayout(10,10));
            c.add(northPanel,BorderLayout.NORTH);
            c.add(centerPanel,BorderLayout.CENTER);

        return c;
    }

    //method to add new text to JTextPane
    public static JTextPane addTextToPane()
    {
        Document doc = textPane.getDocument();
        try
        {
            // clear previous text
            doc.remove(0,doc.getLength());

            //insert title
            doc.insertString(0,"Grades\n",textPane.getStyle("large"));

            //insert grades and calculate average
            for(int j=0; j<grades.length; j++)
            {
                doc.insertString(doc.getLength(), grades[j] + "\n", textPane.getStyle("large"));
            }
        }
        catch(BadLocationException ble)
        {
            System.err.println("Couldn't insert text");
        }

        return textPane;
    }

    //method to sort array
    public void grades(int grdArray[])
    {
        //sort int array
        for (int pass = 1; pass<grdArray.length; pass++)
        {
            for (int element = 0; element<grdArray.length -1; element++)
            {
                swap(grades, element, element + 1);

            }
        }
            addTextToPane();

    }

    //method to swap elements of array
    public void swap(int swapArray[], int first, int second)
    {
        int hold;
        hold = swapArray[first];
        swapArray[first] = swapArray[second];
        swapArray[second] = hold;
    }

    //execute method at run time
    public static void main(String args[])
    {
        JFrame.setDefaultLookAndFeelDecorated(true);
        Averages f = new Averages();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //accept first grade
        int integerInput = Integer.parseInt(JOptionPane.showInputDialog(null, "Please enter a grade (0-100) or -1 to calculate the average"));

        //while loop accepts more grades, keeps count, and calulates the total
        int count = 0;
        int[] grades = new int[50];
        int num = 0;
        while (count<50 && num!= -1)
        {
            num = Integer.parseInt(JOptionPane.showInputDialog(null, "Please enter a grade (0-100) or -1 to calculate the average" + (count+1)));
            if(num!=-1)
                grades[count] = num;
            count++;

        }

        //create content pane
        f.setContentPane(f.createContentPane());
        f.setSize(600,375);
        f.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:59:30.957

请分解问题。

从统计开始：

```
/**
 * Statistics
 * @author Michael
 * @link http://stackoverflow.com/questions/15626262/averaging-grades-using-java-swing?noredirect=1#comment22167503_15626262
 * @since 3/25/13 7:50 PM
 */
public class Statistics {
    public static double getAverage(int numValues, int [] values) {
        double average = 0.0;
        if ((values != null) && (numValues > 0) && (values.length >= numValues)) {
            for (int i = 0; i < numValues; ++i) {
                average += values[i];
            }
            average /= numValues;
        }
        return average;
    }
} 
```

接下来，我建议您暂时将 Swing 完全排除在外。做一个纯文本输入/输出用户界面。

```
import java.util.Scanner;

/**
 * StatisticsDriver
 * @author Michael
 * @link http://stackoverflow.com/questions/15626262/averaging-grades-using-java-swing?noredirect=1#comment22167503_15626262
 * @since 3/25/13 7:50 PM
 */
public class StatisticsDriver {
    public static final int MAX_VALUES = 50;

    public static void main(String [] args) {
        int [] values = new int[MAX_VALUES];
        Scanner scanner = new Scanner(System.in);
        boolean getAnotherValue;
        int numValues = 0;
        do {
            System.out.print("next value: ");
            String input = scanner.nextLine();
            if (input != null) {
                values[numValues++] = Integer.valueOf(input.trim());
            }
            System.out.print("another? [y/n]: ");
            input = scanner.nextLine();
            getAnotherValue = "y".equalsIgnoreCase(input);
        } while (getAnotherValue);
        System.out.println(Statistics.getAverage(numValues, values));
    }
} 
```

现在你有了这些，把你的注意力转向 Swing。

太多的年轻程序员在解决问题之前就已经绕着 Swing 的轴心转了转。不要犯那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:01:25.537

Well , The first mistake than I can see is this :

You are hidden the static array grades in main

int[] grades = new int[50];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:54:44.373

你已经`grades`声明了两次数组。一次在本地`main()`，第二次在全球范围内。当您要求用户输入他们的成绩时，您将各种位置分配给`main()`. 但是，当您在 中获取信息时`addTextToPane()`，您将调用全局声明的`grades`数组。

删除 中的以下内容后`main()`，问题就解决了。

`int[] grades = new int[50];`

# mysql - 无法创建外键

> ID：15626269
> 
> 赞同：0
> 
> 时间：2013-03-25T22:47:14.130
> 
> 标签：mysql, sql, mysql-workbench

我写了一个[简单的 SQL](http://freetexthost.com/3tlggyxi0c)语句来为 wordpress 创建插件——只有几个有关系的表。我决定在 MySQL 工作台中对其进行一些测试，一切都很好，得到了表和关系。然后我正在尝试对其进行正向工程-工作台稍微[更改了文本](http://freetexthost.com/btuuhr6gek)...然后报告错误： ![在此处输入图像描述](../Images/459bee3d398b9e69937dd03b96894e38.png)

老实说，我在这里很困惑......架构看起来很简单，我确定我没有制作任何类型，为什么会出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:52:08.713

确保两个表中的列相同，包括外键和主键的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:50:07.140

会不会是引擎？InnoDB 处理外键，但我认为标准的 MyISAM 并不总是，或者至少并不总是，这取决于版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:52:12.953

如果您尝试将外键限制添加到包含数据的表中的属性，如果未满足外键限制，您可能会遇到问题。我的意思是，如果属性中有一个现在是外键的值，并且该值不包含在外键引用的表的属性中。

# tomcat - Apache Tomcat 环境变量

> ID：15626272
> 
> 赞同：0
> 
> 时间：2013-03-25T22:47:31.977
> 
> 标签：tomcat, solr

当我从 IDE 将 .war 文件部署到 Tomcat 中时，我定义：

```
-Dsolr.solr.home=/home/vicita/Desktop/lucene-solr/solr/solr_h 
-Dsolr.data.dir=/home/vicita/Desktop/lucene-solr/solr/solr_h/data 
```

但是，当我将它部署到远程机器时，我必须定义该参数。我遵循的书说我必须在一个 xml 文件中将其定义为 $TOMCAT_HOME/conf/Catalina/localhost ：

```
<Context path="/solr" docBase="/usr/share/tomcat/webapps/solr.war" debug="0" crossContext="true">
    <Environment name="solr/home" type="java.lang.String" value="/usr/share/solr_h/" override="true"/>
</Context> 
```

顺便一提：

```
/usr/share/solr_h 
```

是我应该提到的目录。我想知道的第一件事是我没有在这里定义像 solr.solr.home 这样的变量？

我的 .war 找不到该文件夹​​并引发错误的第二件事。我尝试创建 setenv.sh 并输入：

```
-Dsolr.solr.home=/usr/share/solr_h
-Dsolr.data.dir=/usr/share/solr_h/data 
```

但是，当 Tomcat 启动时，它会说：

```
/usr/share/tomcat/bin/setenv.sh: line 1: -Dsolr.solr.home=/usr/share/solr_h: No such file or directory
/usr/share/tomcat/bin/setenv.sh: line 2: -Dsolr.data.dir=/usr/share/solr_h/data: No such file or directory
Using CATALINA_BASE:   /usr/share/tomcat
Using CATALINA_HOME:   /usr/share/tomcat
Using CATALINA_TMPDIR: /usr/share/tomcat/temp
Using JRE_HOME:        /usr/java/default
Using CLASSPATH:       /usr/share/tomcat/bin/bootstrap.jar:/usr/share/tomcat/bin/tomcat-juli.jar 
```

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:24:19.427

localhost 下的 xml 文件与我的 .war 文件的名称不同。我为它分配了与 .war 相同的名称，它已解决。

# shell - Shell 脚本 if 语句子句总是在执行

> ID：15626279
> 
> 赞同：0
> 
> 时间：2013-03-25T22:48:09.737
> 
> 标签：shell, if-statement, xen

我有一个始终执行的 if 语句，但我不知道为什么。

这是代码：

```
var=dom1
if(var=$(ssh root@192.168.0.200 /usr/sbin/xm li | grep dom1 | awk '{print $1}')); then 
```

如果为真，则要执行的代码。

问题是，if 语句之后的东西总是执行，不管它是否正确。

if 语句中的命令有效，因为我已经手动尝试过。

xm li 只提供所有正在运行的虚拟机，其余部分确保返回的唯一内容是虚拟机的名称。当 dom1 在另一台机器上运行时，它返回 dom1。当 dom1 不在另一台机器上运行时，它不会返回任何内容。

我不确定发生了什么，任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:50:39.067

使用`awk`命令完成将失败，因为您不能依赖`awk`（shell 中不支持布尔值）的退出状态。相反，只需使用`grep`它自己来匹配*boolean logic*。通过在您的原始 POST 中提供一些示例输入和匹配规则，我将帮助您做到这一点。

* * *

如果您真的想`awk`在帖子中使用 like 的解决方法：

而且，

```
var=$(ssh root@192.168.0.200 /usr/sbin/xm li | awk '/dom1/{print $1}')
if [[ $var ]]; then
    # ...
fi 
```

如果子命令有输出，这将起作用。你可以先测试一下。

# java - Java - 初始化 HashMap 的 HashMap

> ID：15626280
> 
> 赞同：17
> 
> 时间：2013-03-25T22:48:11.497
> 
> 标签：java, oop, initialization

我是 java 新手，通过创建一个简单的 NaiveBayes 分类器来练习。我还是对象实例化的新手，想知道如何初始化 HashMap 的 HashMap。在向分类器中插入新的观察结果时，我可以为给定类中未见的特征名称创建一个新的 HashMap，但我需要初始化吗？

```
import java.util.HashMap;

public class NaiveBayes {

    private HashMap<String, Integer> class_counts;
    private HashMap<String, HashMap<String, Integer>> class_feature_counts;

    public NaiveBayes() {
        class_counts = new HashMap<String, Integer>();
        // do I need to initialize class_feature_counts?
    }

    public void insert() {
        // todo
        // I think I can create new hashmaps on the fly here for class_feature_counts
    }

    public String classify() {
        // stub 
        return "";
    }

    // Naive Scoring:
    // p( c | f_1, ... f_n) =~ p(c) * p(f_1|c) ... * p(f_n|c)
    private double get_score(String category, HashMap features) {
       // stub
       return 0.0;
    }

    public static void main(String[] args) {
        NaiveBayes bayes = new NaiveBayes();
       // todo
     }
} 
```

请注意，此问题并非特定于朴素贝叶斯分类器，只是想我会提供一些上下文。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T22:52:56.937

是的，你需要初始化它。

```
class_feature_counts = new HashMap<String, HashMap<String, Integer>>(); 
```

当你想给 class_feature_counts 添加一个值时，你也需要实例化它：

```
HashMap<String, Integer> val = new HashMap<String, Integer>();
// Do what you want to do with val
class_feature_counts.put("myKey", val); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-25T22:54:01.747

递归通用数据结构，如地图的地图，虽然不是一个彻底的坏主意，但通常[表明您可以重构一些东西](https://testing.googleblog.com/2017/11/obsessed-with-primitives.html)- 内部地图通常可以是一阶对象（具有命名字段或内部地图），而不仅仅是一个地图。您仍然需要初始化这些内部对象，但它通常是一种更清洁、更清晰的开发方式。

例如，如果您有 a，`Map<A,Map<B,C>>`您通常会真正存储 A 到 Thing 的映射，但 Thing 的存储方式恰好是映射。您通常会发现隐藏 Thing 是一个地图这一事实更简洁、更容易，而是将 Thing`Map<A,Thing>`定义为的映射存储为：

```
public class Thing {
    // Map is guaranteed to be initialized if a Thing exists
    private Map<B,C> data = new Map<B,C>();

    // operations on data, like get and put
    // now can have sanity checks you couldn't enforce when the map was public
} 
```

* * *

此外，查看 Guava 的[Mulitmap/Multiset](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)实用程序，它们对于这种情况非常有用，特别是它们会自动执行内部对象初始化。对于您的情况，请注意，几乎任何时候您`Map<E, Integer>`都需要一个 Guava Multiset。更干净更清晰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T22:51:19.907

在通过引用变量使用它之前，您*必须创建一个对象。*这个对象有多复杂并不重要。您不需要在构造函数中对其进行初始化，尽管这是最常见的情况。根据您的需要，您可能希望改用“延迟初始化”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T22:57:10.573

1.  不要用`HashMap`. 太局限了。
2.  是的，您需要初始化`class_feature_counts`. 您将为其添加条目，因此它必须是有效的地图。事实上，在声明时初始化而不是在构造函数中初始化，因为每个启动方式只有一种。我希望你现在正在使用 Java 7；这种方式更简单。

    私有 Map<String, Integer> classCounts = new HashMap<>();

    私有 Map<String, Map<String, Integer>> classFeatureCounts = new HashMap<>();

编译器将从 <> 中推断出类型。此外，我将变量名更改为标准 Java 驼峰式风格。是否`classCounts`和`classFeatureCounts`连接？

# php - php正则表达式在不同服务器上的工作方式不同

> ID：15626281
> 
> 赞同：1
> 
> 时间：2013-03-25T22:48:18.637
> 
> 标签：php, regex, expression, regex-greedy

我正在使用正则表达式从网页获取 URL。

在本地主机上（带有 Suhosin-Patch (cli) 的 PHP 5.3.15（内置：2012 年 8 月 24 日 17:45:44））代码：

```
$file = file_get_contents("http://www.etech.haw-hamburg.de/Stundenplan/");
$pattern = "/<a href=\"([^\"]*.pdf)\">(.*)<\/a>/iU";
preg_match_all($pattern, $file, $matches);
echo "<pre>";
print_r($matches);
echo "</pre>"; 
```

给出：

```
=> Array
(
        [0] => Sem_IuE_E1a.pdf
        [1] => Sem_IuE_E2a.pdf
        [2] => Sem_IuE_E3a.pdf
        [3] => Sem_IuE_E4a.pdf
        [4] => Sem_IuE_E6AT.pdf
        [5] => Sem_IuE_E7.pdf
        [6] => Sem_IuE_E1b.pdf
        [7] => Sem_IuE_E2b.pdf
        [8] => Sem_IuE_E3b.pdf
        [9] => Sem_IuE_E4b.pdf
        [10] => Sem_IuE_E6II.pdf
        [11] => Sem_IuE_E6KT.pdf
        [12] => Sem_IuE_BMT1.pdf
        [13] => Laborplan%20BMT1%20KoP%201.pdf
        [14] => Sem_IuE_BMT2.pdf
        [15] => Sem_IuE_BMT3.pdf
        [16] => Sem_IuE_BMT4.pdf
        [17] => Sem_IuE_BMT5.pdf
        [18] => Sem_IuE_BMT6.pdf
        [19] => Sem_IuE_IE2.pdf
        [20] => Sem_IuE_IE4.pdf
        [21] => Sem_IuE_IE6.pdf
        [22] => Sem_IuE_AM.pdf
        [23] => Sem_IuE_IKM1.pdf
        [24] => Legende_Stud.pdf
        [25] => Kalender.pdf
        [26] => Doz.pdf
        [27] => Doz.pdf
    ) 
```

同时，在远程服务器（PHP 5.3.3（cli）（构建：2013 年 2 月 22 日 02:51:11））上，相同的代码给出：

```
=> Array
    (
        [0] => Sem_IuE_E2a.pdf
        [1] => Sem_IuE_E7.pdf
        [2] => Sem_IuE_E1b.pdf
        [3] => Sem_IuE_E2b.pdf
        [4] => Sem_IuE_E3b.pdf
        [5] => Sem_IuE_E6II.pdf
        [6] => Sem_IuE_E6KT.pdf
        [7] => Sem_IuE_BMT1.pdf
        [8] => Laborplan%20BMT1%20KoP%201.pdf
        [9] => Sem_IuE_BMT2.pdf
        [10] => Sem_IuE_BMT3.pdf
        [11] => Sem_IuE_BMT4.pdf
        [12] => Sem_IuE_BMT5.pdf
        [13] => Sem_IuE_BMT6.pdf
        [14] => Sem_IuE_IE2.pdf
        [15] => Sem_IuE_IE4.pdf
        [16] => Sem_IuE_IE6.pdf
        [17] => Sem_IuE_AM.pdf
        [18] => Doz.pdf
        [19] => Doz.pdf
    ) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:21:40.970

我没有准确的答案。但是在您的问题中，您提到使用 PHP 5.3.3 和 PHP 5.3.15 会产生不同的结果。

我看了一下[PHP5 ChangeLog](http://www.php.net/ChangeLog-5.php)，答案可能就在哪里，并看到了以下可能的解释。

*   [PHP 5.3.6](http://www.php.net/ChangeLog-5.php#5.3.6)：

> 将捆绑的 PCRE 升级到版本 8.11。(伊利亚)

*   [PHP 5.3.7](http://www.php.net/ChangeLog-5.php#5.3.7)

> 将捆绑的 PCRE 升级到版本 8.12。（斯科特）

我阅读了两个 PCRE 版本的发行说明，我不确定在你的情况下什么会影响匹配，除了一些提到 UTF8 编码的更正。

但是，在查看`U`修饰符时，我在[PCRE 配置选项](http://www.php.net/manual/en/pcre.configuration.php#ini.pcre.backtrack-limit)中注意到：

> PCRE 的回溯限制。对于 PHP < 5.3.7，默认为 100000。

我的猜测是`U`(PCRE_UNGREEDY) 修饰符中的一些修复改变了两者之间的部分`<a>`匹配的方式。这是有道理的，因为通过查看您正在抓取的页面的源代码，在早期 PHP 版本中唯一匹配的是`<a>`不包含内部 HTML 的标签。

例如，这个匹配：

```
<a href="Sem_IuE_E2a.pdf">E2a</a> 
```

这个没有：

```
<a href="Sem_IuE_E4a.pdf"><span lang=IT style='mso-ansi-language:IT'>E4a</span></a> 
```

**非常有趣，但是如何解决呢？**

我无法访问较早的 PHP 版本，因此无法对其进行测试，但我会说删除正则表达式的贪婪部分，因为您不需要匹配`<a></a>`标签内的部分，因为该值已包含在 PDF 文件名中：

```
$pattern = "/<a href=\"([^\"]*.pdf)\">/i"; 
```

**或者**

使用[DOM 解析器](http://php.net/manual/en/class.domdocument.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:33:25.277

我想出了一个解决方法。如果你打开页面，去掉标签，然后解析你应该得到更一致的答案。来自 Microsoft 应用程序（目标页面）的代码非常糟糕。

```
<?php
$file = file_get_contents("http://www.etech.haw-hamburg.de/Stundenplan/");
$file = strip_tags($file,'<a>');
$pattern = "!\<a href=[\"|']([^.]+\.pdf)[\"|']\>([^\<]+)\<\/a\>!iU";
preg_match_all($pattern, $file, $matches);
echo "<pre>";
print_r($matches);
echo "</pre>";
?> 
```

# ruby-on-rails - 在 Rails 入门项目中使用简单表单时遇到问题

> ID：15626283
> 
> 赞同：0
> 
> 时间：2013-03-25T22:48:24.587
> 
> 标签：ruby-on-rails, simple-form

尝试创建表单时出现以下错误，`undefined method 'model_name' for NilClass:Class`

我的这个项目是为了捕捉我的想法。我可以使用谷歌文档，但认为这应该很容易尝试为自己编写应用程序。下面是我认为应该来自我在 newopp.html.erb （在我的 opps 视图文件夹中）的简单表单站点上阅读的代码。

我创建了一个控制器和一个模型，我确信我的问题的一部分是我无法弄清楚我需要编写什么代码或添加什么代码才能正确完成此步骤。我看过的所有教程都给了我一些想法，可以尝试并尝试使工作无济于事。

所以基本上我坐在一个名为 opps_controller.rb 的 rails 生成的控制器和一个名为 opp.rb 的模型上。这两个都不过是生成器提供的，因为我不得不回到第一格

我开始使用的简单表单代码

```
<%= simple_form_for @opp do |f| %>
  <%= f.input :title %>
  <%= f.input :subtitle %>
  <%= f.input :description %>
  <%= f.input :idea %>
  <%= f.input :added %>
  <%= f.button :submit %>
<% end %> 
```

opp.rb 文件

```
class Opp < ActiveRecord::Base
  attr_accessible :added, :description, :idea, :subtitle, :title
end 
```

如果有什么不同，我已经迁移了数据库，我使用引导配置运行了简单的表单安装脚本。我正在使用`rails 3.2.9`和`ruby 1.9.3p362`（2012-12-25 修订版 38607）[x86_64-darwin12.2.1]

正如我提到的，我只有一个使用生成器创建的空白控制器，我需要让 CRUD 功能正常工作。在这一点上，我尝试过的一切都失败了。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:45:43.500

不应该`newopp.html.erb`，只是`new.html.erb`。所以路径是`/views/opps/new.html.erb`

如果您仍然收到错误，请确保`@opp`在控制器中定义：

```
class OppsController < ApplicationController
  def new
    @opp = Opp.new
  end

  def create
    @opp = Opp.new
    if @opp.update_attributes(params[:opp])
      ...
    else
      render 'new'
    end
  end
end 
```

# php - 让用户在浏览网站时保持登录状态

> ID：15626288
> 
> 赞同：0
> 
> 时间：2013-03-25T22:48:31.717
> 
> 标签：php

当用户登录我的网站 login.php 时，会检查他们是否拥有正确的用户名密码或者他们是否是管理员：

```
session_start ();

$username = '';
$password = '';
$dbusername = '';
$dbpassword = '';
if (isset($_POST['Email']) && isset($_POST['Password']))
{
    $username = $_POST['Email'];
    $password = md5($_POST['Password']);

$query = mysql_query("SELECT * FROM member WHERE Email ='$username' AND Password='$password'");

$numrow = mysql_num_rows ($query);
// user login
if ($numrow!=0)
{
    while ($row = mysql_fetch_assoc($query))
    {
        $dbusername = $row['Email'];
        $dbpassword = $row['Password'];
    }

    //Check to see if they match
    if ($username==$dbusername&&$password==$dbpassword)
    {
        header("Location: member.php");
        $_SESSION ['Email']=$username;

    }
    }
    else 
    {
        // admin login
        $query2 = mysql_query("SELECT * FROM admin WHERE Email ='$username' AND Password ='$password'");
        $numrow2 = mysql_num_rows ($query2);
        if ($numrow2!=0)
        {
            while ($row = mysql_fetch_assoc($query2))
            {
                $dbusername = $row['Email'];
                $dbpassword = $row['Password'];
            }

            //Check to see if they match
          if ($username==$dbusername&&$password==$dbpassword)
            {
                header("Location: admin.php");
                $_SESSION ['Email']=$username;
            }
            else{

                echo "Incorrect password";
            }

        }
            else{
        if ($username!=$dbusername&&$password!=$dbpassword)
        {die("That user does not exist!");
        }
        }
    }
} 
```

它们被重定向到 member.php（下面的相关代码）

```
session_start ();

     If (logged_in() === true)//Email 
           echo "Welcome, ".$_SESSION['Email']. "!<br><ahref='logout.php'>Logout</a>";
     else
    die ("You must be logged in"); 
```

这一切都很好，用户已登录并且他们的用户名显示在页面顶部，但是如果用户返回主页或网站上的任何其他页面，他们将不再登录。完全不知道该怎么做这个，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:55:28.283

您需要在重定向用户之前设置会话变量

# ruby-on-rails - 如何将我的 Wordpress 网站的博客链接重定向到新的子域？

> ID：15626299
> 
> 赞同：0
> 
> 时间：2013-03-25T22:49:21.383
> 
> 标签：ruby-on-rails, wordpress, url, subdomain, redirect

我当前的网站 (www.cooksmarts.com) 在 Wordpress 上。我们正在启动一个 Rails 应用程序（将由 Heroku / Engine Yard 等服务托管），并正在考虑将应用程序放在我们的根域中。如果是这样，我们会将我的博客移至子域，例如 blog.cooksmarts.com。现在所有博客条目都在子文件夹 www.cooksmarts.com/cs-blog 中更新。如何仅将对该子文件夹的调用重定向到新的子域？例如，如果任何现有链接指向[http://www.cooksmarts.com/cs-blog/2013/03/Chicken-Recipe](http://www.cooksmarts.com/cs-blog/2013/03/Chicken-Recipe)，它将自动重定向到[http://blog.cooksmarts.com/2013/03 /鸡肉食谱](http://blog.cooksmarts.com/2013/03/Chicken-Recipe)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:57:22.540

在 cs-blog 文件夹中创建子域

只需像这样在您的 htaccess 文件中添加重写规则

```
RewriteCond %{HTTP_HOST} ^www.cooksmarts.com/cs-blog/ [OR]
RewriteCond %{HTTP_HOST} ^cooksmarts.com/cs-blog/
RewriteRule (.*) http://blog.cooksmarts.com/$1 [R=301,L] 
```

然后转到 wordpress 管理员设置并更改

*   WordPress 地址 (URL)
*   网站地址 (URL) 来自 blog.cooksmarts.com

# android - 有没有办法预览 IntelliJ IDEA 12 中另一个视图中使用的片段？

> ID：15626302
> 
> 赞同：18
> 
> 时间：2013-03-25T22:49:55.113
> 
> 标签：android, intellij-idea, android-fragments, preview

我最近从 Eclipse 切换到 IntelliJ IDEA 12。有没有一种好方法可以预览另一个 xml 布局文件中使用的片段？

在 Eclipse 中，有一种方法可以指定我正在使用的片段，这非常有用。

![在此处输入图像描述](../Images/09a65af8b71947a266a334b12bdc4517.png)

**编辑（澄清）**：我指的是查看在另一个 xml 布局中引用的片段的能力。假设我正在创建一个配置文件屏幕 (activity_profile.xml) 并希望包含一个包含图片、名称等的片段 (fragment_pic.xml)。当我在 activity_profile.xml 中包含该片段时，它不会显示在activity_profile 布局的预览。它只显示“<fragment>”

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-08-13T20:05:08.190

您可以在 XML 中执行此操作：

```
<fragment
    android:name="com.yourpackage.yourapp.yourfragment"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    tools:layout="@layout/fragment_layout" 
</fragment> 
```

在顶视图中，工具命名空间由 this 限定，与 xmlns:android 命名空间限定符相同：

```
xmlns:tools="http://schemas.android.com/tools" 
```

从 Eclipse 迁移到 Android Studio 预览版后，我也遇到了同样的问题，尽管幸运的是，Android Studio 建议您在检查定义时在 XML 中提供这个，非常方便:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T23:14:03.333

我认为您的意思是 GUI 设计器。要在 xml 视图和设计器视图之间切换，请单击红色圈出的按钮。

![在此处输入图像描述](../Images/73d22f695b6060d47d58aee279f27fc0.png)

# r - R 中的 Switch 语句（解包参数）

> ID：15626303
> 
> 赞同：2
> 
> 时间：2013-03-25T22:49:55.340
> 
> 标签：r

谷歌搜索在这方面的回报并不多。你如何在 R 中解压缩参数？

例如，如果我尝试在 R 中使用 switch

```
switch("AA",c("AA"=5,"BB"=6)) 
```

我会回来的`c("AA"=5,"BB"=6)`我会在现实中

本质上，我希望能够`switch("AA","AA"=5,"BB"=6)`使用矢量映射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:16:38.240

这是一种解决方法，但请尝试：

```
do.call("switch", append(list("AA"), list("AA"=5, "BB"=6))) 
```

允许您将`do.call()`参数列表传递到`switch()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T23:45:00.093

这就是`switch`打算使用的方式。第一个参数被评估并匹配后续配对列表的第一个元素：

```
 aa <- "AA"
 switch(aa,"AA"=5,"BB"=6)
#[1] 5
 switch("BB","AA"=5,"BB"=6)
#[1] 6 
```

至少这是“性格”争论的策略。数字参数的过程是不同的。需要`?switch`仔细阅读详细信息部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T00:13:09.783

```
> c("AA"=5,"BB"=6)["AA"]
AA 
 5 
> c("AA"=5,"BB"=6)["BB"]
BB 
 6 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T23:15:23.307

你的例子很短，也许你可以通过这种方式获得所需的功能：

```
my.vector = c("AA"=5,"BB"=6)
my.vector[names(my.vector ) == "AA"]

AA 
 5 
```

?

# java-me - 使用 J2ME 清除画布

> ID：15626313
> 
> 赞同：1
> 
> 时间：2013-03-25T22:50:46.313
> 
> 标签：java-me, midp, lcdui

我正在尝试创建一个程序，该程序在随机位置显示两个图像并每秒更改它们。然而，我的问题是当图像被重绘时，我仍然可以在以前的位置看到图像。

如果相关的话，我正在使用 WTK 2.52。

```
public void run()
{

    while(true)
    {
        dVert = rand.nextInt(136);
        dHorz = rand.nextInt(120);
        rVert = 136 + rand.nextInt(136);
        rHorz = 120 + rand.nextInt(120);

        try
        {
            Thread.sleep(1000);
        }
        catch (InterruptedException e)
        {
            System.out.println("Error");
        }
        repaint();
    }
}

public void paint(Graphics g)
{
    int width = this.getWidth() / 2;
    int height = this.getHeight() / 2;
    g.drawImage(imgR, rVert, rHorz, g.TOP | g.LEFT);
    g.drawImage(imgD,dVert,dHorz,g.TOP | g.LEFT);

    //g.drawString(disp, width, 50, Graphics.TOP | Graphics.HCENTER);
    //g.drawString(centerMsg,width, height, Graphics.TOP | Graphics.HCENTER);
    System.out.println(width);
    System.out.println(height);
} 
```

[完整代码](http://pastebin.com/pKf76SJk)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T05:23:29.797

你像这样清除画布：

```
g.setColor(0x000000); // Whatever color you wish to clear with
g.setClip(0,0,getWidth(),getHeight());
g.fillRect(0,0,getWidth(),getHeight()); 
```

因此，只需在绘制图像之前插入这些线条。

# php - Laravel 路由过滤器到特定的 url

> ID：15626320
> 
> 赞同：1
> 
> 时间：2013-03-25T22:51:32.920
> 
> 标签：php, routing, ckeditor, laravel

我正在尝试将路由过滤器应用于特定的 url。所以，我的文件在公共目录下：

```
/public/js/kcfinder/browse.php 
```

我的过滤器：

```
Route::filter('admin', function ()
{

    if (!Sentry::check())
    {
        // if not logged in, redirect to login

        return Redirect::to_route('admin_login');
    }
    elseif (!Sentry::user()->has_access('is_admin'))
    {
        //logout
        Sentry::logout();
        // has no access
        return View::make('error.access_error');
    }

}); 
```

最后我的模式：

```
Route::filter('pattern: js/kcfinder/*', 'admin'); 
```

如果我尝试访问

```
/public/js/kcfinder/browse.php 
```

该规则不起作用。

我可以看到文件的全部内容。

如果我尝试访问

```
/public/js/kcfinder/blahblah.php 
```

过滤器效果很好。因为没有文件名为

```
blahblah.php 
```

目录下。

任何帮助都会非常棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:36:44.640

那是因为您的`.htaccess`文件说如果请求 URI 与现有文件匹配，则不要重写，只需按原样显示/执行文件。

所以，你有两个选择：

您可以在`.htaccess`文件中创建必要的过滤器，以便某些目录中的文件**始终**被重写并发送到`index.php`.

```
RewriteCond %{REQUEST_URI} ^/js/kcfinder
RewriteRule \.php$ index.php [L,QSA] 
```

这个条件和规则集需要放在检查文件和目录的条件之上。

或者，您可以在 Laravel 中创建经过身份验证的路由来手动获取和执行文件。（不建议这样做，因为您必须使用`eval()`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:19:58.000

我一直在尝试将 ckfinder 集成到 Laravel 身份验证系统中，但最终发现这太费力了。这可能是可能的，但我的解决方案很简单。当我渲染 Ckeditor 小部件时，我在 PHP 中设置了一个普通的旧会话变量，然后在 ckfinders auth check 例程中检查会话变量是否存在。

```
// When rendering widget
session_start();
$_SESSION['enable_ckeditor'] = true;

// In ckfinder somewhere
session_start();
return isset( $_SESSION['enable_ckeditor'] ) ?: $_SESSION['enable_ckeditor']; 
```

# java - 为什么 Java 的“受保护”的受保护程度低于默认值？

> ID：15626321
> 
> 赞同：4
> 
> 时间：2013-03-25T22:51:37.743
> 
> 标签：java, terminology, semantics, access-specifier

在 Java 中，我们有四个访问说明符：`public`、`protected`、 package-private （默认）和`private`. 这是[众所周知](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private/215579#215579) [的](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private/215579#215579)，对我来说不是问题。

我的问题是关于`protected`. 如[这里的表](https://stackoverflow.com/a/215505/732016)所示，为字段提供 package-private 的默认访问说明符可防止包外的子类使用它，但应用关键字`protected`实际上并不能保护它——相反，它会将其开放给任何包裹。

那么，为什么不`protected`保护东西呢？为什么它的限制比没有修饰符*少？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T23:00:45.377

If we accept that those are the four access levels that should exist (private, package-private, package-private-plus-subclasses, and public), and we accept that package-private should be the default access level when you don't specify something else, then this question becomes: "why is package-private-plus-subclasses called `protected`?" And the answer to that is that it borrowed/inherited the term from C++ (which doesn't have a concept of "packages", but uses `protected` to mean "private-plus-subclasses").

(I'm posting this answer as community wiki to encourage others to add to it, since I'm guessing that there's more to the story than just this. Also, because someone may want to add some justification of why these are the four access levels that should exist — e.g., why we have package-private-plus-subclasses but no private-plus-subclasses — and of why package-private should be the default.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T23:06:15.147

由于这是一个相当开放的问题，我将提供一些半相关的历史背景。在 Java 1.0 中有一个额外的访问修饰符，private protected。这是受保护的减去包访问权限。此修饰符令人困惑，实施不佳，并在 1.1 中删除。这有助于描绘包是逻辑模块化单元的画面，因此是默认的访问级别。

归根结底，这归结为对开发人员有意义的个人选择。每个人的想法都不一样，所以对我来说完全有意义的命名约定可能会让你非常困惑（反之亦然）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:59:57.403

受保护的比公开的更具限制性。这就是为什么它被称为它是什么。

我希望语言设计者将默认访问说明符命名为“包保护”，因为默认值对很多程序员来说非常混乱。我更赞成将保护作为默认值，或者根本没有默认值.

# android - （初学者）如何通过带有惰性列表的主 url 地址从站点加载图像？

> ID：15626322
> 
> 赞同：0
> 
> 时间：2013-03-25T22:51:39.497
> 
> 标签：android, url, imageview, lazylist

我正在尝试找到一种方法将所有图像从网站主页（使用图像滑块）加载到图像视图/列表视图中（很像该死的应用程序）。在我的最后一个问题上，我问了一个类似的问题，但从未得到我可以实际使用的答案。有人告诉我使用lazylist 并使用这个问题中的一些东西[Lazy load of images in ListView](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)，但我完全不知道如何实现这些东西，因为我对android编程完全陌生。我不能得到一段随机的代码并且知道如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:57:19.390

尝试以下链接：

**[延迟将图像从 url 加载到列表视图](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/)**

**[什么是惰性列表](https://stackoverflow.com/questions/15621936/whats-lazylist)**

**[Android开发教程：listview图片的异步延迟加载和缓存](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)**

**在这些之后，您可以返回这里并通过代码示例**提出从反复试验中产生的问题。

# jquery - 如何通过 jQuery 将 pattern="" 添加到具有特定类的元素

> ID：15626328
> 
> 赞同：-1
> 
> 时间：2013-03-25T22:52:04.490
> 
> 标签：jquery

有很多关于如何向特定元素添加额外类的说明，但是我将使用什么 dom 元素来添加（例如）`pattern="[0-9]*"`类的所有输入元素`.number`？

我是 JavaScript 新手，所以任何方向都有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:54:09.983

`$(".number").attr('pattern', '[0-9]*');`

# windows-8 - Win8 JS App：如何防止向后导航？无法设置 WinJS.Navigation.canGoBack

> ID：15626329
> 
> 赞同：2
> 
> 时间：2013-03-25T22:52:06.330
> 
> 标签：windows-8, navigation, winjs, appbar

为 Windows 8 开发相当新，我正在开发一个具有相当扁平模型的应用程序。我看了又看，但似乎找不到关于如何设置 WinJS 页面以防止向后导航的明确答案。我曾尝试深入研究 API，但它没有说明任何内容。

我尝试使用的代码是

```
WinJS.Navigation.canGoBack = false; 
```

不走运，它一直抱怨该属性是只读的，但是，没有设置方法可以更改它。

提前谢谢，~肖恩

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T05:06:30.880

`canGoBack`确实只有一个 getter（定义在 中`base.js`），它反映了 backstack 的缺失或存在；即`nav.history.backstack`.

按钮本身的外观由相关按钮 DOM 对象上的 disabled 属性控制，该属性又是控制可见性的 CSS 选择器的一部分。因此，如果您自己修改后退按钮的显示，请注意导航管道也在做同样的事情。

可以显式设置后台堆栈；有一个示例[导航和导航历史示例](http://code.msdn.microsoft.com/windowsapps/Navigation-sample-cf242faa) ，其中包括恢复历史记录以及使用[beforenavigate](http://msdn.microsoft.com/en-us/library/windows/apps/br229838.aspx)阻止导航，代码如下：

```
 // in ready
    WinJS.Navigation.addEventListener("beforenavigate", this.beforenavigate);

    //
    beforenavigate: function (eventObject) {
        // This function gives you a chance to veto navigation. This demonstrates that capability
        if (this.shouldPreventNavigation) {
            WinJS.log && WinJS.log("Navigation to " + eventObject.detail.location + " was prevented", "sample", "status");
            eventObject.preventDefault();
        }
    }, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:22:17.470

您无法更改 canGoBack，但您可以禁用按钮以隐藏它并释放历史堆栈。

```
 // disabling and hiding backbutton
    document.querySelector(".win-backbutton").disabled = true;
    // freeing navigation stack
    WinJS.Navigation.history.backStack = []; 
```

这将防止后退并仍然允许前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:01:53.010

如此多的搜索和尝试禁用后退按钮的不同方法，终于找到了一个不错的解决方案。它改编自另一个 stackoverflow 问题。

*原始算法：[如何在 JavaScript 中按类获取元素？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)*

* * *

**我的解决方案**

在片段页面的开头，就在页面定义开始声明 ready: 函数时，我使用了上述算法的改编版本，并使用生成的元素选择来设置 disabled 属性。

```
 // Retrieve Generated Back Button
        var elems = document.getElementsByTagName('*'), i;

        for (i in elems)
        {
            if((" "+elems[i].className+" ").indexOf("win-backbutton") > -1)
            {
                var d = elems[i];
            }
        }

        // Disable the back button
        d.setAttribute("disabled", "disabled"); 
```

该代码从页面的 DOM 中获取所有元素，并将其过滤为生成的后退按钮。当找到合适的元素时，它被分配给一个变量，然后我们可以从那里设置 disabled 属性。

* * *

我找不到很多关于在 WinJS 导航应用程序中解决默认导航的文档，所以这里有一些失败的方法（仅供参考）：

*   通过类和设置获取元素 | 可能因为做错而失败，因为我对 HTML 和 javascript 几乎没有经验。

*   使用上述方法，但在 for 循环中设置属性会破坏应用程序并导致其因未知原因冻结。

*   在导航完成之前在 default.js 中设置属性。| javascript 调用将无法识别被调用的方法或 DOM 元素，可能是由于页面的初始化状态。

还有其他一些，但我认为必须有更好的方法来在页面加载后检索元素。如果有人能启发我，我将不胜感激。~肖恩·R。

# uml - 我可以混合使用用例和部署 UML 图吗？

> ID：15626330
> 
> 赞同：2
> 
> 时间：2013-03-25T22:52:07.213
> 
> 标签：uml, requirements, use-case

我是 UML 世界的新手，到目前为止，我已经学习了用例、活动和部署 UML 图的基础知识。我需要用户与系统交互的位置，例如用户发送电子邮件，然后由系统处理，然后发送给代理（人），然后代理（人）再次响应并与系统交互。

我很难想象这些需求，以及它是否应该是用例、活动或部署的组合。我可以混合它们吗？什么是标准做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:54:03.693

如您所知，用例用于捕获需求。在识别和详细说明用例时，您会从用户的角度来看待问题。只关注参与者期望系统做什么。第一步是识别用例和参与者，然后详细说明用例流程。

**1- 确定用例和参与者**

在您的示例中，发送电子邮件可能是由最终用户（您的参与者）发起的用例。接下来发生的事情（例如系统向代理发送通知）可以建模为该用例流程的一部分。

另一个用例可能是代理参与者在收到系统通知后处理他们必须做的事情（此用例的先决条件可能是已收到通知）。

请注意，您可以将这两个用例组合在一起，并将代理作为次要参与者（次要参与者与用例交互但不启动它）。是否这样做，是建模者的选择，取决于用例的大小、用例的数量和许多其他因素。

**2-详细说明用例**

在确定用例和参与者之后，您应该详细说明用例。最重要的部分是详细说明用例流程（参与者和系统的逐步交互）。这可以写为文本或绘制为活动图。

* * *

所以回答你的问题：是的，将活动图和用例结合起来是可能的并且非常普遍；这是一个活动图，用于显示用例的步骤流程。

另一方面，部署图与需求获取阶段完全无关。它们对系统的物理结构以及硬件组件和软件组件如何交互进行建模。

事实上，在类图、序列图、状态图和许多其他图之前学习组件图是很奇怪的。

# ios - GKGameCenterViewController 总是显示挑战而不是排行榜

> ID：15626333
> 
> 赞同：7
> 
> 时间：2013-03-25T22:52:31.080
> 
> 标签：ios, objective-c, uiviewcontroller, game-center

我正在使用[Apple 的代码](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/GameKit_Guide.pdf)来显示`GKGameCenterViewController`：

```
GKGameCenterViewController *gameCenterController = [[GKGameCenterViewController alloc] init];
if (gameCenterController != nil) {
    gameCenterController.gameCenterDelegate = self;
    [self presentViewController:gameCenterController animated:YES completion:nil];
} 
```

这是描述上述代码的文本：

> **Game Center UI 由您的视图控制器显示 (iOS)**
> 
> Game Kit 使用的约定是让您的视图控制器之一呈现 Game Kit 视图控制器。您的视图控制器充当它呈现的视图控制器的委托，以便在玩家完成查看呈现的屏幕时通知它。清单 2-1 显示了这种模式最常见的用途，即显示 Game Center 用户界面。Game Center 视图控制器显示许多不同的 Game Center 内容，因此大多数游戏都应该提供一个按钮，将玩家带到此屏幕，即使游戏还使用自定义用户界面显示 Game Center 内容。

当我使用推荐的代码时，我进入了这个屏幕（GameCenter Challenges），这不是我想要的：

![GameCenter 挑战屏幕](../Images/addc6828f4a94d9684f704c5b19ace5e.png)

我也试过这段代码：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"gamecenter:"]]; 
```

通过使用该代码，我进入了我希望显示的屏幕：

![在此处输入图像描述](../Images/e025092a3c080444a866938780d6d3e2.png)

我误解了什么还是我做错了什么？第一段代码不应该把我带到主菜单吗？为什么不显示排行榜？

**更新**

我按照[phix23](https://stackoverflow.com/a/15626483/814730)`viewState`的建议实施：

```
GKGameCenterViewController *gameCenterController = [[GKGameCenterViewController alloc] init];
if (gameCenterController != nil) {
    gameCenterController.gameCenterDelegate = self;
    gameCenterController.viewState = GKGameCenterViewControllerStateLeaderboards;
    [self presentViewController:gameCenterController animated:YES completion:nil];
} 
```

但是，它仍然显示相同的挑战屏幕，尽管我想/尝试显示排行榜屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:05:44.213

从 iOS 6 开始可用，`GKGameCenterViewController`它可以显示支持游戏中心的应用程序的排行榜、成就和挑战。

`viewState`您可以通过设置的来更改初始视图`GKGameCenterViewController`。如果您不设置此属性，它将显示默认视图，即您的案例中的挑战视图。我猜你没有设置任何排行榜或成就，所以没有什么可以显示的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T00:35:29.397

对于 iOS 7.0，我使用以下内容：

**显示排行榜：**

```
- (void)displayLeaderboard:(UIViewController *)viewController
{
    GKGameCenterViewController *gameCenterController = [[GKGameCenterViewController alloc] init];
    if (gameCenterController != nil) {
        gameCenterController.gameCenterDelegate = self;
        gameCenterController.viewState = GKGameCenterViewControllerStateLeaderboards;
        [viewController presentViewController:gameCenterController animated:YES completion:nil];
    }
} 
```

**展示成果：**

```
- (void)displayAchievements:(UIViewController *)viewController
{
    GKGameCenterViewController *gameCenterController = [[GKGameCenterViewController alloc] init];
    if (gameCenterController != nil) {
        gameCenterController.gameCenterDelegate = self;
        gameCenterController.viewState = GKGameCenterViewControllerStateAchievements;
        [viewController presentViewController:gameCenterController animated:YES completion:nil];
    }
} 
```

请注意，尝试使用这些功能的视图控制器将需要传递自身（即*viewController*参数必须设置为某个活动视图控制器）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T16:44:09.763

使用`GKGameCenterViewController`和设置视图状态：

```
//Create a leaderboard view controller
GKGameCenterViewController *leaderboardViewController = [[GKLeaderboardViewController alloc] init];
leaderboardViewController.viewState = GKGameCenterViewControllerStateLeaderboards;

//Set the time scope (ex. All Time, This Week, Today) and the leaderboard ID
leaderboardViewController.timeScope = GKLeaderboardTimeScopeAllTime;
leaderboardViewController.leaderboardCategory = leaderboardID;

//Set the delegate so we can handle various actions including dismissal
leaderboardViewController.leaderboardDelegate = self;

//Present the view controller
[self presentViewController:leaderboardViewController animated:YES completion:nil]; 
```

此代码将显示一个视图控制器，显示您的所有游戏排行榜（或排名，如果只有一个）。您还可以设置属性，例如要显示的排行榜、时间范围、委托等。另外请注意，您可以使用`GKAchievementViewController`.

您在问题中提供的代码，

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"gamecenter:"]]; 
```

启动 GameCenter 应用程序。这意味着 iOS 将**退出**您的应用程序并切换到 GameCenter。这可能会让用户感到困惑。您还应该避免让用户离开您的应用程序。相反，请使用在`GKViewControllers`您的应用程序内部以模态方式呈现的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:22:30.423

尝试使用此代码：

```
-(void)showGameCentersDefaultPage {
    GKGameCenterViewController *gameCenterController = [[GKGameCenterViewController alloc] init];
     if (gameCenterController != nil) {
           gameCenterController.gameCenterDelegate = self;
           gameCenterController.viewState = GKGameCenterViewControllerStateDefault;
           [self presentViewController:gameCenterController animated:YES completion:nil];
      }
} 
```

如果您想从特定类型的 GameCenter 排行榜开始，您可以使用您的**leaderboardID调用以下方法**

```
- (void)showLeaderboard:(NSString*)leaderboardID {
    GKGameCenterViewController *gameCenterController = [[GKGameCenterViewController alloc] init];
    if (gameCenterController != nil) {
        gameCenterController.gameCenterDelegate = self;
        //The next three lines are the lines of interest...
        gameCenterController.viewState = GKGameCenterViewControllerStateDefault;
        gameCenterController.leaderboardTimeScope = GKLeaderboardTimeScopeToday;
        gameCenterController.leaderboardCategory = leaderboardID;
        [self presentViewController:gameCenterController animated:YES completion:nil];
     }  
} 
```

# function - 双链表删除回节点功能

> ID：15626335
> 
> 赞同：0
> 
> 时间：2013-03-25T22:52:40.680
> 
> 标签：function, linked-list

/* 函数 delete_back() 有问题；我认为删除功能 3 部分有问题。还有 remove_ele() 我不知道怎么做，谢谢。为什么我用同样的方法删除元素不起作用 */

```
#include <iostream>

using namespace std;

template<class T>
class doulinked
{
private:
    doulinked *head;
    doulinked *tail;
    doulinked *prev;
    doulinked *next;

    T data;
public:
    doulinked()
    {
        head=tail=prev=next=NULL;
        T data;
    }
    void Inlist (doulinked *head);
    void add(T d);
    void insert_node();
    void remove(doulinked* v);
    void push_tail(T d); 
    void delete_front();
    void delete_back();
    void remove_ele (T d);
    template <class U>
    friend ostream & operator<<(ostream & os, const doulinked<U> & dll);
};
template<class U>
ostream & operator<<(ostream & os,const doulinked<U> & dll)
{
    doulinked<U> * tmp = dll.head;
    while (tmp)
    {
      os << tmp->data << " ";
      tmp = tmp->next;
    }

  return os;
}
template<class T>
void doulinked<T>::add(T d)
{
    doulinked *n = new doulinked;
    n->data=d;
        if( head == NULL)
        {
            head = n;
            tail = n;
        }
        else
        {
            head->prev = n;
            n->next = head;
            head = n;
        }
}
template<class T>
void doulinked<T>::push_tail(T d)
{
    doulinked *n = new doulinked;
    n->data=d;
        if( tail == NULL)
        {
            head = n;
            tail = n;
        }
        else
        {
            tail->next = n;
            n->prev = tail;
            tail = n;
        }

}
template <class T>
void doulinked<T>::delete_front()
{
    remove(head); 
}
template <class T>
void doulinked<T>::delete_back()
{
    remove(tail);
}
template <class T>
void doulinked<T>::remove(doulinked* v) 
{   
    if(v->prev!=NULL && v->next!=NULL)
    {
        doulinked* p = v->prev; 
        doulinked* n = v->next;             
        p->next = n;                
        n->prev = p;
        delete v;
    }
    else if(v->prev==NULL && v->next!=NULL)
    {
        doulinked* n =v->next;             
        head->next = n;                
        n->prev = head;
        delete head;
        head=n;
    }
    else if(v->prev!=NULL && v->next==NULL) // have some wrong with this loop;
    {
        doulinked* p=v->prev;
        p->next=tail;
        tail->prev=p;
        delete tail;
        tail=p;
    }

 }
template <class T>
void doulinked<T>::remove_ele(T d)  // have some wrong with this loop
{

    if(head->data==d)
    {
        remove(head);
        head=head->next;
    }
    else
        head=head->next;
}

int main()
{
    doulinked<int> dll;
    dll.add(5123);
    dll.add(1227);
    dll.add(127);
    dll.push_tail(1235);
    dll.push_tail(834);
    dll.push_tail(1595);
    dll.delete_front();
    //dll.delete_back();
    //dll.remove_ele(834);
    cout<<dll<<endl;
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:03:59.987

你的设计有点混乱。

设计链表（如`std::list`）的传统 C++ 方法具有单独的`node`和`list`类，而不是充当两者的单个类：

```
template <typename T> struct node {
    node *prev, *next;
};
template <typename T> struct list {
    node *head, *tail;
}; 
```

如果你只想传递`node`指针，那很好——但是你必须传递节点*指针*，而不是节点*对象*。并且 mutator 函数也必须返回一个指针——如果你调用`delete_front`头节点，你现在得到了一个对删除节点的引用；您需要它`next`，或者您丢失了对列表的任何引用。由于构造函数必须返回一个指针，所以不能使用真正的公共构造函数；你想要一个静态工厂方法。等等。

您还必须对头部之前（和尾部之后）是否有“哨兵节点”保持一致。如果您在构造函数中创建哨兵——正如你正在做的那样——插入到末尾的新节点需要指向哨兵——你没有这样做。

此外，您使用的整个`head`/概念对于节点 API 是错误的。`tail`（此外，混合和匹配来自不同样式的名称非常令人困惑——你需要`add`匹配`delete_front`和`push_tail`匹配`delete_back`……）要拥有一个`push_tail`方法，你要么必须遍历整个列表（使其成为 O(N)），要么必须让每个节点都持有`tail`指针（使任何列表更改 O(N)），或者您必须让头部持有一个`tail`指针，而尾部持有一个`head`指针。

最后一个有效（当只有一个节点需要每个节点时，它为每个节点浪费了几个指针，但这并不重要）。但想想就让人困惑。

实际上，只创建一个循环列表要简单得多，其中头部`prev`指向尾部（或哨兵）而不是 0，而尾部`next`指向头部（或哨兵）而不是 0。这为您提供了 a 的所有优点单独`list`的类，不需要那个类——如果你有一个指向头部的指针，那么你只需要引用整个列表（因为`node`头部和`node->prev`尾部，或者如果你有一个哨兵，或者类似地）。

此外，您的构造函数没有多大意义：

```
doulinked()
{
    head=tail=prev=next=NULL;
    T data;
} 
```

这会创建一个名为 的本地默认构造`T`变量`data`，然后……什么也不做。你可能想设置`data`一些东西。您可能想为此使用初始化程序。在这种情况下，您不需要做任何事情，因为这已经是默认设置了。

而且我不确定`Inlist`应该做什么。

至于`remove_ele(T d)`，想必你想删除 who 的第一个元素`data == d`，对吧？如果你`find`先写一个方法，那么它是微不足道的：`remove(find(d))`. （我假设这`find`会引发异常；如果您想`find`返回 null 或 sentinel 或其他东西，并`remove_ele`返回`true`or `false`，显然您需要多一行来检查 find 是否有效。）

如果您不知道如何编写`find`方法……嗯，这就是链表的重点，所有遍历函数都有一个简单的递归定义，包括`find`：

```
node *node::find(T d) {
    if (data == d) { return this; }
    if (next) { return next->find(d); }
    return 0;
} 
```

无论如何，我认为与其试图敲打你的代码直到它工作，你应该查看各种设计的现有实现，直到你理解差异，然后选择你想要的设计并尝试实现它。

# php - 如果 0 更改为 1，则更改 mySQL 数据库记录值 onclick

> ID：15626339
> 
> 赞同：0
> 
> 时间：2013-03-25T22:53:09.873
> 
> 标签：php, jquery, mysql, ajax

嗨，我已经建立了一个表格来显示我的文章，我正在构建它，因此您可以单击星形图标，它将使文章成为特色（如 Joomla 的），我坚持的部分是我需要检查价值数据库中的字段，如果它为 0，则为 1，如果为 1，则为 0。最简单的方法是什么？我知道的唯一方法是将特征值添加到 id 然后通过 ajax 发送该 id 并使用我的 sql 语句执行 if else 语句，但我已经在我的文章 id 的元素上使用了一个 id。如果有人可以提供帮助，将不胜感激！提前致谢

SQL

```
$sql_articles = "UPDATE `app_articles` SET `art_featured` = 0 WHERE `art_id` =".$_POST['art_id']; 
```

0 在哪里我需要它是 0 或 1，这取决于它已经拥有的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:55:01.517

```
UPDATE table SET field = (1 - field) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:57:21.673

如果您的列包含单个位，请使用否定运算符，1 变为 0，0 变为 1

```
UPDATE MyTable SET A = (~field) 
```

# javascript - 通过排除其中的几个标签来获取两个标签之间的所有内容

> ID：15626340
> 
> 赞同：-1
> 
> 时间：2013-03-25T22:53:14.013
> 
> 标签：javascript, xml, regex

我想通过排除该内容中的几个标签来检索 xml 的两个标签之间的所有内容。这个的常规表达式是什么？例如，在下面的 xml 中，我想提取标签之间`<ASObject mappedClass="com.taliantsoftware.claims.indemnity.PayeeAllocationDTO" encoding="0">`和`</ASObject>`排除`<updated tagClass="boolean">false</updated> and <voided tagClass="boolean">false</voided>`标签之间的所有内容。

```
<ASObject mappedClass="com.taliantsoftware.claims.indemnity.PayeeAllocationDTO" encoding="0">
    <payeecustomerid tagClass="double">2004570.0</payeecustomerid>
    <amount tagClass="double">2131.2</amount>
    <new tagClass="boolean">true</new>
    <percent tagClass="double">100.0</percent>
    <updated tagClass="boolean">false</updated>
    <voided tagClass="boolean">false</voided>
    <remainderindicator tagClass="boolean">true</remainderindicator>
    <detailamountstatustypecode tagClass="String">pnd</detailamountstatustypecode>
    <primary tagClass="boolean">true</primary>
    <mailtoindicator tagClass="boolean">true</mailtoindicator>
    <checkgroupnumber tagClass="double">1.0</checkgroupnumber>
    <detailamountstatustypename tagClass="String">Pending</detailamountstatustypename>
    </ASObject> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:32:45.190

如果您只想删除更新和无效的标签，这个正则表达式应该可以工作：

```
var clean_xml = xml.replace(/<(updated|voided).*</\1>/,'') 
```

笔记：

*   您可以添加其他标签，但它们不能使用此正则表达式自动关闭
*   xml解析器更可靠

**编辑**

如果您必须首先捕获 ASObject 标记，则正则表达式不是很漂亮。使用递归模式可能会更好。

```
/(<ASObject.*)<(updated|voided).*<\/\2>(.*)<(updated|voided).*<\/\4>(.*<\/ASObject>)/ 
```

然后连接结果数组的索引 1,3,5。

# python - sqlalchemy 测试：当 unique=True 时添加相同的用户两次不抛出异常

> ID：15626346
> 
> 赞同：1
> 
> 时间：2013-03-25T22:53:52.960
> 
> 标签：python, testing, sqlalchemy, flask, flask-sqlalchemy

我正在使用`Flask`，我的`SQLAlchemy`模型是

```
class User(UserMixin, db.Model):
    __tablename__ = 'users'
    # noinspection PyShadowingBuiltins
    uuid = Column('uuid', GUID(), default=uuid.uuid4, primary_key=True,
                  unique=True)
    email = Column('email', String, nullable=False, unique=True) # yes unique is True 
```

我编写测试并导入数据，例如

```
app = Flask(__name__)
app.config['SECRET_KEY'] = dev.SECRET_KEY
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////tmp/test.db'
db = SQLAlchemy(app) 
```

我的测试看起来像

```
class TestUser(TestCase):
    def setUp(self):
        db.create_all()

   def test_add_existing_user(self):
        user = User('test_add_existing_user', 'welcome')
        db.session.add(user)
        db.session.commit()
        self.assertEquals(1, len(User.query.all()))

        db.session.add(user)
        db.session.commit()
        self.assertEquals(2, len(User.query.all())) # just to verify if it saves the same user twice.

    def tearDown(self):
        db.drop_all()
        db.session.remove() 
```

当我运行这个测试时，我看到

```
Failure
Traceback (most recent call last):
  File "<project path>/tests/test_user.py", line 28, in test_add_existing_user
    self.assertEquals(2, len(User.query.all()))
AssertionError: 2 != 1 
```

似乎它没有两次保存同一个用户，但我希望抛出我没有收到的异常，我在这里没有做什么或错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:58:32.383

刚刚意识到，我保存了`user`两次，而不是使用 sae 电子邮件创建新用户。

SQLAlchemy 将根据需要多次保存同一个用户。

做以下工作

```
 def test_add_existing_user(self):
        user = User('test_add_existing_user', 'welcome')
        db.session.add(user)
        db.session.commit()
        self.assertEquals(1, len(User.query.all()))

        db.session.add(User(user.email, 'welcome'))
        db.session.commit() 
```

# android - OpenGL ES 2.0 中的简单纹理四边形旋转

> ID：15626351
> 
> 赞同：0
> 
> 时间：2013-03-25T22:54:14.833
> 
> 标签：android, rotation, opengl-es-2.0, transformation

**编辑 6** - 完全重写与评论/正在进行的研究有关

**编辑 7** - 添加投影/视图矩阵.....

由于我对此还没有走多远，因此我从 Google 演示中添加了视图/投影矩阵 - 请参见下面的代码：如果有人能指出我哪里出错了，我将不胜感激，因为我仍然得到一个当我将 ""gl_position = a_position * uMVPMatrix;" + 放入我的顶点着色器时出现空白屏幕（使用 "gl_position = a_position;" + 我的四边形至少显示......）

**在班级级别声明：（四班）**

```
 private final float[] rotationMat = new float[16];
    private FloatBuffer flotRotBuf;
    ByteBuffer rotBuf;
    private int muRotationHandle = -1;              // Handle to the rotation matrix in the vertex shader called "uRotate" 
```

**在类杠杆上声明：（渲染器类）**

```
 private final float[] mVMatrix = new float[16];
    private final float[] mProjMatrix = new float[16];
    private final float[] mMVPMatrix = new float[16]; 
```

**设置纹理并执行（或应该执行）旋转的例程（这是在我的 Quad 类中**

```
public void setTexture(GLSurfaceView view, Bitmap imgTexture, float[] mvpMatrix){
        this.imgTexture=imgTexture;

      // get handle to shape's transformation matrix
        mMVPMatrixHandle = GLES20.glGetUniformLocation(iProgId, "uMVPMatrix");

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

//      Matrix.setRotateM(rotationMat, 0, 45f, 0, 0, 1.0f);    //Set rotation matrix with angle and (z) axis

//       rotBuf = ByteBuffer.allocateDirect(rotationMat.length * 4);
         // use the device hardware's native byte order
//       rotBuf.order(ByteOrder.nativeOrder());
         // create a floating point buffer from the ByteBuffer
//       flotRotBuf = rotBuf.asFloatBuffer();
         // add the coordinates to the FloatBuffer
//       flotRotBuf.put(rotationMat);
         // set the buffer to read the first coordinate
//       flotRotBuf.position(0);

//       muRotationHandle = GLES20.glGetUniformLocation(iProgId, "uRotation");  // grab the variable from the shader
//       GLES20.glUniformMatrix4fv(muRotationHandle, 1, false, flotRotBuf); //Pass floatbuffer contraining rotation matrix info into vertex shader
         //GLES20.glUniformMatrix4fv(muRotationHandle, 1, false, rotationMat, 1); //Also tried this ,not use floatbuffer

        //Vertex shader
        String strVShader =  
            //    "uniform mat4 uRotation;" +
                  "uniform mat4 uMVPMatrix;" +
                  "attribute vec4 a_position;\n"+
                  "attribute vec2 a_texCoords;" +
                  "varying vec2 v_texCoords;" +
                  "void main()\n" +
                  "{\n" +
                  "gl_Position = a_Position * uMVPMatrix;"+  //This is where it all goes wrong....         
                  "v_texCoords = a_texCoords;" +
                  "}";

        //Fragment shader

        String strFShader =
            "precision mediump float;" +
            "varying vec2 v_texCoords;" +
            "uniform sampler2D u_baseMap;" +
            "void main()" +
            "{" +
            "gl_FragColor = texture2D(u_baseMap, v_texCoords);" +
            "}";

        iProgId = Utils.LoadProgram(strVShader, strFShader);
        iBaseMap = GLES20.glGetUniformLocation(iProgId, "u_baseMap");
        iPosition = GLES20.glGetAttribLocation(iProgId, "a_position");
        iTexCoords = GLES20.glGetAttribLocation(iProgId, "a_texCoords");
        texID = Utils.LoadTexture(view, imgTexture);

    } 
```

**从我的渲染器类：**

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    // TODO Auto-generated method stub

    //Set viewport size based on screen dimensions      
    GLES20.glViewport(0, 0, width, height);

    float ratio = (float) width / height;
    Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

}

    public void onDrawFrame(GL10 gl) {
    // TODO Auto-generated method stub

    //Paint the screen the colour defined in onSurfaceCreated
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    quad1.setTexture(curView, myBitmap, mMVPMatrix);  //SetTexture now modified to take a float array (See above) - Note I know it's not a good idea to have this in my onDrawFrame method - will move it once I have it working!

    quad1.drawBackground(); 
} 
```

我现在已经删除了所有与旋转相关的东西，现在只是尝试在顶点着色器中应用 uMVPMatrix 后显示一个静态四边形。但仍然没有:-(

如果我只是将该行更改回 'default' ：

```
 "gl_Position = a_position;\n"+ 
```

然后我至少显示了我的纹理四边形（显然没有旋转，我希望如此）。

还要指出的是，mvpMatrix 肯定被完整地接收到 setTexture 方法中是有效的（包含与我从 Google 开发人员代码记录 mvpMatrix 的内容时出现的相同数据）。我不确定如何检查着色器是否完好无损地接收它？我没有理由相信它不是。

真的很感激和所有的帮助——我一定是在某个地方出错了，但我就是找不到。谢谢！

**编辑 2**：在为这个问题添加了赏金之后，我只想知道如何旋转我的纹理四边形精灵（2D），保持我必须将其渲染为基础的代码。（即，我需要添加什么才能旋转以及为什么）。谢谢！

**编辑 3**不适用

**编辑 4**重新措辞/简化的问题

**编辑 5**添加了错误截图

![在此处输入图像描述](../Images/eb656efa3366d3c8eaa8cded4a70bf3b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:12:29.933

**编辑**：编辑以支持使用 Android SDK 的 Java。

正如 Tobias 所指出的，OpenGL 中任何顶点变换的惯用解决方案都是通过使用矩阵运算来完成的。如果您打算继续使用 OpenGL 进行开发，重要的是您（最终）了解矩阵运算中涉及的底层线性代数，但通常最好使用数学库将线性代数计算抽象为更易读的格式。在 android 环境下，您应该使用 [matrix][1] 类来操作浮点数组，以创建如下所示的旋转矩阵：

```
// initialize rotation matrix
float[16] rotationMat; 
Matrix.setIdentityM(rotationMat,0); 

// angle in degrees to rotate
float angle = 90;

// axis to rotate about (z axis in your case)
float[3] axis = { 0.0,0.0,1.0};

// For your case, rotate angle (in degrees) about the z axis. 
Matrix.rotateM(rotationMat,0,angle,axis[0],axis[1],axis[2]); 
```

然后你可以将旋转矩阵绑定到一个着色器程序，如下所示：

```
// assuming shader program is currently bound ...
GLES20.glUniformMatrix4fv(GLES20.glGetUniformLocation(shaderProgramID, "uRotation"), 1, GL_FALSE, rotationMat); 
```

您的顶点着色器（正在传递的程序`rotationMat`）看起来像：

```
precision mediump float;
uniform mat4 uMVPMatrix;
uniform mat4 uRotation;
attribute vec2 a_texCoords;
attribute vec3 a_position;
varying v_texCoord;

void main(void)
{
    v_texCoord = a_texCoords;
    gl_Position = uMVPMatrix* uRotation * vec4(a_position,1.0f);
} 
```

或者，您可以在此着色器程序之外进行预乘`uMVPMatrix* uRotation`并将结果传递给您的着色器程序以避免过多的重复计算。

一旦您习惯了使用这个更高级别的 API 进行矩阵运算，您就可以通过阅读[Nicol Bolas](https://stackoverflow.com/users/734069/nicol-bolas)编写的精彩教程[来](http://www.arcsynthesis.org/gltut/Positioning/Tut06%20Rotation.html#d0e6309)研究内部运算是如何执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:44:51.600

绕 z 旋转的旋转矩阵：

```
cos a -sin a 0
sin a  cos a 0
    0      0 1 
```

如何记住如何构造它：
a 是以弧度为单位的角度，对于 a = 0，矩阵产生恒等矩阵。cos 必须在对角线上。一个罪的前面必须有一个标志，切换标志与旋转的方向相反。

同样可以构造围绕 x 和 y 的旋转：

```
1      0     0
0  cos a sin a
0 -sin a cos a

 cos a 0 sin a
     0 1     0
-sin a 0 cos a 
```

如果您不熟悉矩阵算术，这里有一些代码：

```
for (int i=0; i<4; i++) {
    vertices_new[i*5+0] = cos(a) * vertices[i*5+0] - sin(a) * vertices[i*5+1]; // cos(a) * v[i].x - sin(a) * v[i].y + 0 * v[i].z
    vertices_new[i*5+1] = sin(a) * vertices[i*5+0] + cos(a) * vertices[i*5+1]; // sin(a) * v[i].x + cos(a) * v[i].y + 0 * v[i].z
    vertices_new[i*5+2] = vertices[i*5+2]; // 0 * v[i].x + 0 * v[i].y + 1 * v[i].z
    vertices_new[i*5+3] = vertices[i*5+3]; // copy texture u
    vertices_new[i*5+4] = vertices[i*5+4]; // copy texture v
} 
```

# git - 'git remote show'详解

> ID：15626353
> 
> 赞同：6
> 
> 时间：2013-03-25T22:54:31.220
> 
> 标签：git, branch, git-branch, git-remote, remote-branch

老实说，我找不到任何输出的详细文档`git remote show`（当然不在[手册页上](https://www.kernel.org/pub/software/scm/git/docs/git-remote.html)）

特别是，对这些`Local`部分的清晰、准确的解释将不胜感激。

我感到困惑的一个例子：

在这里，我有两个遥控器，*klas*和*origin*以及它们产生的输出：

```
> git remote show klas
* remote klas
  Fetch URL: ..\klasrepo
  Push  URL: ..\klasrepo
  HEAD branch: master
  Remote branches:
    experiment  tracked
    feature     tracked
    master      tracked
    pu          tracked
    stashbranch tracked
  Local branch configured for 'git pull':
    pu merges with remote pu
  Local refs configured for 'git push':
    experiment pushes to experiment (fast-forwardable)
    feature    pushes to feature    (fast-forwardable)
    master     pushes to master     (fast-forwardable)
    pu         pushes to pu         (up to date)
> git remote show origin
* remote origin
  Fetch URL: C:/Temp/git/.\barerepo.git
  Push  URL: C:/Temp/git/.\barerepo.git
  HEAD branch: experiment
  Remote branches:
    experiment tracked
    master     tracked
  Local branches configured for 'git pull':
    experiment  merges with remote experiment
    master     rebases onto remote master
  Local refs configured for 'git push':
    experiment pushes to experiment (up to date)
    master     pushes to master     (fast-forwardable) 
```

请注意，*experiment*和*master*都列在**两者** `local refs configured for 'git push'`下。这意味着什么？我已将 master 和 Experiment 配置*为*分别跟踪*origin/master*和*origin/experiment* *（*并*pu*跟踪*klas/pu*）。

 ***我的本地*功能*分支未设置为跟踪任何内容，但仍列在下面`local refs configured for 'git push'`（唯一的连接似乎是相同的名称，未提及另一个非跟踪分支*foo*）。`git push`而在*功能*上`fatal: The current branch feature has no upstream branch.`- 几乎没有“快进”。

似乎列出的本地分支的标准`local refs configured for 'git push'`是恰好存在同名的远程分支？

以供参考：

```
> git branch -vva
  experiment                0cf7b2a [origin/experiment] added rand content 82 to .\rand_content.txt
* feature                   4b25f46 added rand content 62 to bar.txt
  foo                       40aee50 added rand content 17 to .\rand_content.txt
  master                    4b25f46 [origin/master] added rand content 62 to bar.txt
  pu                        44ad10b [klas/pu] added rand content 51 to doo.txt
  remotes/klas/experiment   1f4e89b app
  remotes/klas/feature      884e953 added rand content 80 to bar.txt
  remotes/klas/master       57877c1 added in tobias repo
  remotes/klas/pu           44ad10b added rand content 51 to doo.txt
  remotes/klas/stashbranch  8678cf0 added rand content 44 to .\rand_content.txt
  remotes/origin/HEAD       -> origin/master
  remotes/origin/experiment 0cf7b2a added rand content 82 to .\rand_content.txt
  remotes/origin/master     4b25f46 added rand content 62 to bar.txt
> git config --list --local | select-string 'branch|remote'
remote.origin.url=C:/Temp/git/.\barerepo.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.master.remote=origin
branch.master.merge=refs/heads/master
branch.master.rebase=true
remote.klas.url=..\klasrepo
remote.klas.fetch=+refs/heads/*:refs/remotes/klas/*
branch.experiment.remote=origin
branch.experiment.merge=refs/heads/experiment
branch.pu.remote=klas
branch.pu.merge=refs/heads/pu
> git --version
git version 1.8.1.msysgit.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:10:19.940

这似乎是 Git 1.8.1 中的一个错误。

浏览 Git 源代码（特别是`remote.c`和`builtin/remote.c`），“为 'git push' 配置的本地 refs”下的列表计算如下：

1.  收集已配置的推送 refspec：
    *   读取`.git/remotes/<remotename>`（过时的配置文件；请参阅`git help repository-layout`）
    *   读取`.git/branches/<branchname>`（另一个过时的配置文件）
    *   检查`remote.<remotename>.push`配置项
2.  如果步骤 #1 没有找到任何东西，`:`则用作唯一的推送 refspec
3.  查找与收集的推送 refspecs 匹配的所有 {local, remote} 分支组合

请注意，上述算法不关注`branch.<branchname>.remote`、`branch.<branchname>.merge`或`push.default`。

在典型的使用模式下，上述算法中的第 1 步将永远找不到任何已配置的 refspec，因此`:`将被使用。该 refspec 是一个简单的匹配 refspec，因此如果在本地和远程存储库中都有一个名为的分支，则在典型用法`git remote show <remotename>`中将始终打印。`<branchname> pushes to <branchname>``<branchname>`***

# javascript - 基于动态可见元素数据属性插入 HTML 表格行“标题”

> ID：15626354
> 
> 赞同：1
> 
> 时间：2013-03-25T22:54:32.083
> 
> 标签：javascript, jquery, html

假设我有一个包含行的表，其中包含具有数据时间属性的表单元格，并且可能可见也可能不可见（即显示：无）。这种可见性是动态的，并且在任何时候一行都可能发生变化。

这些行中只有三个表格单元格中的第一个包含数据时间属性。

表行已根据其子项的数据时间属性值进行分组。我的目标是利用 JS/jQuery 在任何特定数据时间值的**第一个/唯一可见出现的上方插入一个新表行。**此行应包含一个表格单元格，该表格单元格跨越表格的整个宽度，并具有与相应数据时间值等效的文本。

示例开始：

```
<table>
  <tr style="display:none;">
    <td data-time="7:15 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td data-time="8:00 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td data-time="8:00 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td data-time="8:00 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td data-time="9:30 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr style="display:none;">
    <td data-time="9:30 pm"></td>
    <td></td>
    <td></td>
  </tr>
<table> 
```

示例目标：

```
<table>
  <tr style="display:none;">
    <td data-time="7:15 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td colspan="3">8:00 pm</td>
  </tr>
  <tr>
    <td data-time="8:00 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td data-time="8:00 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td data-time="8:00 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td colspan="3">9:30 pm</td>
  </tr>
  <tr>
    <td data-time="9:30 pm"></td>
    <td></td>
    <td></td>
  </tr>
  <tr style="display:none;">
    <td data-time="9:30 pm"></td>
    <td></td>
    <td></td>
  </tr>
<table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:14:15.607

这是你想要的：-

[http://jsfiddle.net/9XTat/](http://jsfiddle.net/9XTat/)

```
 $('#addRow').click(function(){
     $('td[data-time]',$('tr').not('tr[style="display:none;"]')).each(function(i,o){
        var lastelement = $('td[data-time="' + $(this).data('time') + '"]').first();

        if((lastelement.parent('tr').prev('tr.textRow')).length == 0)
        {
        var newelement = '<tr class="textRow"><td colspan="3">' + $(this).data('time') + '</td> </tr>'
        lastelement.parent().before(newelement);
        }

    }); 
```

# crystal-reports - Crystal Reports：为什么备忘录类型的字段被截断为 255 个字符？

> ID：15626361
> 
> 赞同：2
> 
> 时间：2013-03-25T22:55:15.193
> 
> 标签：crystal-reports, crystal-reports-xi

我正在使用在远程 Windows 系统上运行并通过 Citrix 访问的 Crystal Reports XI (11.5.12.1838) 工作。数据来自 Blackbaud Raiser's Edge 导出。

我有两个不同的自定义报告，它们需要显示可以是任意长度的注释（来自 Raiser's Edge）。在这两种情况下，数据库行只是被拖放到报表中的一个字段中。它会无限增长。在一份报告中，它有效；另一方面，它没有，而是将文本截断为 255 个字符（或者可能是字节：RTF 版本在文本的前面被截断）。

报告的标准是不同的（一个是报告单个成分，另一个[不起作用]是与特定个人相关的成分）。但是，我不太清楚可能导致此问题的原因，因此无法缩小报告配置的哪些方面需要调整。

有任何想法吗？我会注意到，在损坏的报告中，该字段正确增长并且键入“备忘录”——它仅增长到足以容纳 255 个字符然后停止。

编辑：不，不涉及公式字段。我无法真正拆分数据库中的字符串。

编辑2：谢谢大家的建议。数据库是最新的，并且字段在 Crystal Reports 中显示为备注。两个报告中的连接是相同的（一个有效的和一个无效的），并且备注字段不参与链接。令人讨厌的是，CR 不允许您浏览备注字段上的数据，但 Length() 函数为该字段返回 255。除非你们都可以想到 CR 截断数据的原因，否则我可能在 Raiser's Edge 中存在导致此问题的错误。

编辑 3：我在十六进制编辑器中调出 MDB，全文（过去 255 个字符）在那里，所以我在 Crystal Reports 中做错了，不能为此责怪 Blackbaud。

**编辑4：终于修复了！**好的，我不明白*为什么*会出现这个问题，但我纯粹是偶然发现选择和取消选择“选择不同的记录”会导致这个问题。如果它打开，备忘录会被截断。如果它关闭，它不会。你们谁能向这个可怜的傻瓜解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-23T09:04:05.760

我刚刚解决了同样的问题，发现报告中的文本公式值被截断为 255 个字符，原因是*验证数据库*选项显示了未映射的数据字段。

一旦我处理了未映射的数据字段，被截断的字段立即将其输出扩展到超过 255 个字符。

# asp.net-mvc - MVC 框架是否不适合丰富的页面设计？

> ID：15626363
> 
> 赞同：4
> 
> 时间：2013-03-25T22:55:19.987
> 
> 标签：asp.net-mvc

只是作为这个问题的前缀，我决定看看将我们的旧遗留系统（从 vb6、vba、vb.net 到 c#.net 的 40 多个程序）移动到使用相同 DAL（条形码终端和一个基于 Web 的系统），因为我大部分时间都在修复 15 年前的 vba 程序中糟糕或不存在的业务逻辑。我最近构建了一个完整的实体框架模型，并使用了流利的验证，并且在使用了一段时间后对它感到非常满意。

这个小团队熟悉网络表单（但不是很熟悉），但最近几天我探索了 MVC Razor。我喜欢 MVC 框架，直到我尝试开始尝试在同一页面上添加更多功能，然后复制我们最近放入 Web 表单的系统似乎非常困难。以前，我会急切地加载客户及其所有子实体，然后将其绑定到客户的单个页面，以便他们可以访问所有内容（这是他们想要的），它工作正常并且不慢。从这个单一页面，我可以编辑他们所有的帐户详细信息/联系人/电子邮件/电话/工作。

我在 MVC 中完成和看到的所有示例都处理单个更新、单个编辑等，但您肯定不能将每个操作分离到新的视图/页面中吗？我可以将丰富的模型传递给 MVC 中的视图，但是尝试更新所有不同的子实体会很痛苦。

这可能是 MVC 并非设计用于的确切设计，这没关系，如果 MVC 将成为一个更好的平台，我愿意对其进行调整，但是您打算如何处理添加这种复杂性？我见过的一些方法：

1.  很多局部视图？将子信息传递给他们（或 id 和延迟加载）？
2.  我已经看到了将多个`<forms>`事物包裹起来并以这种方式处理操作的方法。
3.  将几乎所有任务分开

如果解决方案更轻量级且更易于维护，我将去研究我需要的任何东西，我只是想在早期阶段看看我是否在浪费时间。任何指向我应该问的正确问题的指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T23:24:16.443

与现有的任何其他技术相比，ASP.NET MVC 在处理复杂页面方面或多或少都没有更好的能力。

当然，MVC 比 Web 窗体应用程序需要更多的低级工作，没有直接绑定支持，但在大多数情况下，这是一件好事，并且在呈现页面的方式上提供了更大的灵活性。

MVC 的整体理念之一是让您对事物有更多的控制权，但这种控制会导致在大多数非平凡的情况下需要更多的知识和更多的努力。MVC 提供了许多工具功能来加速琐碎的工作（例如创建基于标准表的 CRUD），但是当您拥有复杂的模型时，您将不得不自己完成大部分工作。

这并不是说 MVC 不适合它，而只是控制和灵活性需要权衡取舍，而您需要承担更多责任。

在您的情况下，您只需创建一个包含您想要的所有字段的视图模型。然后，您创建表单来编辑这些字段。在您的控制器中，您将需要展开该视图模型并在数据库中创建或更新必要的记录。这并不难，但它比 WebForms 数据绑定工作量更大。

您可以查看 MVC 的更高级工具（商业），例如 Telerik 的工具，它们开发了更多类似数据绑定的界面，但 MVC 不是拖放技术，需要您连接并编写所做的事情的各种逻辑。

如果您需要拖放、数据绑定功能，那么不需要。MVC 不是正确的技术。但是 WebForms 也要求您接受许多妥协，并以多种方式束缚您的手脚。

你可以使用局部视图，但我很少使用它们。我更喜欢使用 Editor/DisplayTemplates，因为它们负责正确命名表单字段，即使对于集合和复杂对象也是如此。如果您不小心，PartialViews 往往会有很多陷阱。我几乎只将它们用作花哨的包含，或者在使用 Ajax 时。

我不确定您所说的“`<forms>`围绕所有内容包装多个”是什么意思。您不能在 HTML 中嵌套表单，这是不合法的。如果您的意思是在表格的每一行周围放置一个表单，那么在大多数情况下这也不是有效的 html （在表格和 tr 之间放置表格是不合法的）。

如果您有一个可以询问的具体问题会有所帮助，含糊的反对意​​见无助于我们解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:35:45.990

您可以在 MVC 中完成在 WebForms 中可以完成的任何事情。不同之处在于 MVC 通常会要求您编写更多代码，因为它并没有真正为您提供任何“控件”来放置在您的页面上。

在 WebForms 中，很容易使用 . 创建主/详细视图`GridView`，`FormView`然后将所有内容包装在 中以`UpdatePanel`实现自动 AJAX 支持。

在 MVC 中，虽然您确实有像[`WebGrid`](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid%28v=vs.111%29.aspx)和[`AjaxHelpers`](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajaxhelper%28v=vs.108%29.aspx)扩展方法这样的帮助程序，但创建视图和/或页面需要更多地了解事物如何工作才能获得所需的功能。当我开始一个新的 MVC 项目时，我包括以下内容：

1.  [Backbone.js](http://backbonejs.org/) - 对 RESTful* API 执行 CRUD 操作的客户端“ORM”
2.  [Knockout.js](http://knockoutjs.com/) - 客户端视图模型和视图的实时数据绑定
3.  [Knockback.js](http://kmalakoff.github.com/knockback/) - 在 Knockout 视图模型中包装 Backbone 模型

使用这三个框架，您可以使用 MVC 和 WebAPI 快速创建强大的单页应用程序。

# spring - 集成测试：测试 Autowired 注解

> ID：15626365
> 
> 赞同：0
> 
> 时间：2013-03-25T22:55:22.120
> 
> 标签：spring, testing, dependency-injection, autowired

我想在春天测试注入依赖关系。

我有一堂课：

```
 public SomeClass {
   @Autowired
   SomeBean bean ;
   public SomeBean getBean(){
     return this.bean ;
   }
 } 
```

我想要这样的测试：

```
public SomeClassTest {
  SomeClass someClass ;
  @Before
  public void setUp(){
    someClass = new SomeClass() ;
  }                              
  @Test public testBeanWired(){
    assertNotNull(someClass.getBean()) ;                                                  
  }                          
} 
```

我已经尝试使用带有测试配置文件的 ContextConfiguration，但是测试失败了，我不想在测试中使用 @Autowired，我想创建我的类的一个实例并且 bean 会自动自动装配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:58:28.290

这只有在 bean 使用 @Configuration 注释并且字节码被检测时才有可能。否则，只有 Spring 创建的 bean 是自动装配的。不是使用`new`. 因为 Spring 无法知道您创建了一个对象，并且它必须在其中注入一个依赖项。

这是依赖注入的一个基本原则：对象由容器实例化和注入，而不是你。

# scala - 如何将依赖项添加到 SBT 构建文件

> ID：15626367
> 
> 赞同：3
> 
> 时间：2013-03-25T22:55:27.860
> 
> 标签：scala, sbt, ivy

我有一个 SBT 构建文件，其中包含很多这样的行：

“org.apache.mahout”%“mahout-math”%“0.5”

指定依赖项。我有一个要添加到依赖项中的新 Jar。我如何找出我应该写的这个 "blah" % "blah" % "blah.0" 形式？

我知道这可能是一个非常基本的问题。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:58:04.980

如果您想要的依赖项在存储库中不可用，您可以将 jar 放在项目根目录中的“lib”文件夹中，否则与任何依赖项一样，您应该获取工件的信息（组 ID、名称、版本和存储库） （尝试在 google 中搜索“maven”+ 库名称）。

[SBT 文档](http://www.scala-sbt.org/release/docs/Getting-Started/Library-Dependencies.html)中详细解释了所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:31:44.823

对于基本的 java 库，在[MVN Repository](http://mvnrepository.com/)中的搜索应该会快速产生 pom（如果正在寻找）。关于 SBT 解析的规则，特别是在 Scala 交叉编译项目中，请参考[SBT](http://www.scala-sbt.org/release/docs/Getting-Started/Library-Dependencies.html)

# java - 如何在没有 MANIFEST.MF 的情况下运行 Java .jar？

> ID：15626369
> 
> 赞同：27
> 
> 时间：2013-03-25T22:55:30.460
> 
> 标签：java, manifest

是否可以运行不包含`MANIFEST.MF`文件的 Java 应用程序？当然，也有静态`main`方法，只是缺少清单文件。该应用程序依赖于几个外部`.jar`文件。

如果这可能，该怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T22:59:25.557

有可能，您可以指定要从命令行运行的类：

```
java -cp yourJar.jar your.main.Class 
```

同样的问题在这里：

[如何从 Jar 运行一个不在其 Manifest 文件中的 Main-Class 的类](https://stackoverflow.com/questions/5474666/how-to-run-a-class-from-jar-which-is-not-the-main-class-in-its-manifest-file)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T23:13:18.650

您还可以使用以下命令添加清单：

```
jar  -uvfe  your.jar foo.bar.Baz
java -jar your.jar        # tries to run main in foo.bar.Baz 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T22:59:01.853

当然！只需使用这个：

```
java -cp MyJar.jar com.example.Main 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-03T22:35:12.110

是的，用这个

java -cp myJar.jar package.className

# java - 使用 Eclipse 和轴 2 生成第一个 Web 服务客户端的问题

> ID：15626371
> 
> 赞同：0
> 
> 时间：2013-03-25T22:55:42.863
> 
> 标签：java, eclipse, axis2

[我精确地遵循了本教程](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)的每一步（除了跳过第 4 步，因为我现在只想让它在 eclipse 中工作）。

我小心翼翼地使用每个软件的确切版本（eclipse helios、axis 2 1.5.2 等）。我在 mac os x 10.7.5 上运行它，现在在本教程中的 windows 上运行。

无论如何，一切都很顺利，直到我去创建测试客户端的第 5 步。我可以通过向导创建客户端——但前提是我将它指向这个 URL：

```
localhost:8080/MyFirstWebService/services/FirstWebSertice?wsdl 
```

而不是教程中的这个

```
http://localhost:8080/axis2/services/FirstWebService?wsdl 
```

之后，它不会生成名为 FirstWebServiceStub.java 和 FirstWebServiceCallbackHandler.java 的两个类，而是生成如下图所示的几个类。

这是一个重大差异吗？我做错了什么吗？我应该如何翻译本教程中的代码以使其与生成的类一起使用？

```
package com.sencide;

import java.rmi.RemoteException;
import com.sencide.FirstWebServiceStub.AddTwoNumbers;
import com.sencide.FirstWebServiceStub.AddTwoNumbersResponse;

public class TestClient {

 public static void main(String[] args) throws RemoteException {

  FirstWebServiceStub stub = new FirstWebServiceStub();
  AddTwoNumbers atn = new AddTwoNumbers();
  atn.setFirstNumber(5);
  atn.setSecondNumber(7);
  AddTwoNumbersResponse res = stub.addTwoNumbers(atn);
  System.out.println(res.get_return());

 }
} 
```

![在此处输入图像描述](../Images/a3dc360e3d7598918687436cecd0751f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:25:51.343

`FirstWebServiceLocator`是 Axis 1.x 生成的类，但是教程中的代码需要 Axis2 生成的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:26:37.263

该 URL`http://localhost:8080/axis2/services/FirstWebService?wsdl`将由本教程第 4 步中安装的服务处理。由于您跳过了该步骤，因此 URL 将不起作用。

在正常的 tomcat 行为下，URL 的“/axis2”部分引用部署在 tomcat 中的特定 Web 应用程序（WAR 文件）。在这种情况下，从 tomcat 的角度来看，Web 应用程序是axis2.war。

URL 的“services/FirstWebSertice”部分引用了在 Axis2 环境中运行的特定 Axis2 服务（AAR 文件）。

正如@andreas-veithen 所指出的，您的项目资源管理器映像中的样板 java 类似乎是由 Axis 而不是 Axis2 生成的。Axis 和 Axis2 实际上是两个不同的 Web 服务库；一个不仅仅是另一个的更新版本。似乎您以某种方式使用了错误的代码生成器来生成这些类。

# python - Python/Numpy - 两个数组中匹配行的叉积

> ID：15626375
> 
> 赞同：5
> 
> 时间：2013-03-25T22:56:16.197
> 
> 标签：python, numpy, cross-product

获取两个数组之间每个对应行的叉积的最佳方法是什么？例如：

```
a = 20x3 array
b = 20x3 array
c = 20x3 array = some_cross_function(a, b) where:
c[0] = np.cross(a[0], b[0])
c[1] = np.cross(a[1], b[1])
c[2] = np.cross(a[2], b[2])
...etc... 
```

我知道这可以通过一个简单的 python 循环或使用 numpy 的 apply_along_axis 来完成，但我想知道是否有任何好的方法可以完全在 numpy 的底层 C 代码中完成这项工作。我目前使用一个简单的循环，但这是迄今为止我的代码中最慢的部分（我的实际数组有数万行长）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T23:05:49.943

当我意识到我的错误时，我可能不得不在几分钟内删除这个答案，但显而易见的事情不起作用吗？

```
>>> a = np.random.random((20,3))
>>> b = np.random.random((20,3))
>>> c = np.cross(a,b)
>>> c[0], np.cross(a[0], b[0])
(array([-0.02469147,  0.52341148, -0.65514102]), array([-0.02469147,  0.52341148, -0.65514102]))
>>> c[1], np.cross(a[1], b[1])
(array([-0.0733347 , -0.32691093,  0.40987079]), array([-0.0733347 , -0.32691093,  0.40987079]))
>>> all((c[i] == np.cross(a[i], b[i])).all() for i in range(len(c)))
True 
```

# bash - <<< bash 运算符会发生什么？

> ID：15626376
> 
> 赞同：1
> 
> 时间：2013-03-25T22:56:22.943
> 
> 标签：bash

我一直将 bc 与 <<< 运算符一起使用

```
bc <<< 3+3 
```

但我想知道 <<< 到底是做什么的？它会回声和管道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:57:24.543

根据 GNU bash 手册

```
3.6.7 Here Strings

A variant of here documents, the format is:

<<< word
The word is expanded and supplied to the command on its standard input. 
```

所以我想这只是一个通过管道传输到标准输入的here字符串。

# java - java 和 json jackson 属性 - 运行时的不同类型

> ID：15626384
> 
> 赞同：2
> 
> 时间：2013-03-25T22:57:14.237
> 
> 标签：java, json, jackson

我正在调用外部 Web 服务来获取对象作为 json。这个对象有一个属性“值”，它有时是一个字符串，有时是一个字符串数组。

```
public class MyClass {

    // ... other variables

    private String value;

    public String getValue() {
        return value;
    }

    @JsonProperty("value")
    public void setValue(String value) {
        this.value = value;
    }
} 
```

目前，我收到一个`org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.lang.String out of START_ARRAY token`抱怨该字段的错误。我想知道是否有人可以提示`value`我在课堂上定义的正确方法是什么。

这是我必须处理的示例 json 的一部分：

```
 {
      "id": 12016907001,
      "type": "Create",
      "value": "normal",
      "field_name": "priority"
    },
    {
      "id": 12016907011,
      "type": "Create",
      "value": [
        "sample",
        "another"
      ],
      "field_name": "tags"
    } 
```

谢谢。

**- 编辑**

我将值的类型更改为 Object ，它解决了我的问题。但是，我仍然想知道是否有更好的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T13:54:18.233

一个简单的技巧是启用[DeserializationFeature#ACCEPT_SINGLE_VALUE_AS_ARRAY](http://fasterxml.github.com/jackson-databind/javadoc/2.1.1/com/fasterxml/jackson/databind/DeserializationFeature.html#ACCEPT_SINGLE_VALUE_AS_ARRAY)然后使用 Daniel 的答案。如果 Web 服务返回一个字符串，Jackson 将把它变成一个单元素集合。

编辑：

如果您无法升级到 Jackson 1.8 或更高版本以使用此功能，您可以执行以下操作：

```
private Collection<String> value;

public Collection<String> getValue() {
    return value;
}

public void setValue(Object value) {
    if (value instanceof Collection) {
        this.value = (Collection<String>) value;
    } else {
        this.value = Arrays.asList((String) value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:28:21.793

value 是一个数组，因此不能转换为字符串。

你的java类应该是这样的：

```
class MyClass
{
   public int id;
   public String type;
   public Collection<String> value;
   public String field_name;
} 
```

例如，我正在使用公共领域（这会很好）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:20:20.823

您可以使用[JsonNode](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/JsonNode.html)作为您的值的类型。之后，您可以根据`isArray()`（或`isValueNode()`）的返回值处理您的值。我认为 JsonNodes 是处理原始 JSON 的最便捷方式，因为它们提供了超出这些简单检查的广泛功能。

```
if (value.isArray()) {

    // process your array

} else {

    // process your string

} 
```

# python - Python 3 - 使用 for 循环打印 *args 时出错

> ID：15626388
> 
> 赞同：0
> 
> 时间：2013-03-25T18:08:18.203
> 
> 标签：python, python-3.x

我通过观看一系列教程来学习 python 3，
在其中一个关于可选函数参数 ( `*args`) 的视频中，讲师使用 for 循环打印传递给函数的可选参数（元组）。

当我尝试运行讲师的脚本时，出现错误：

* * *

导师脚本：

```
def test(a,b,c,*args):  
    print (a,b,c)  
for n in args:  
    print(n, end=' ')  

test('aa','bb','cc',1,2,3,4) 
```

输出：

```
C:\Python33\python.exe C:/untitled/0506.py  
Traceback (most recent call last):  
  File "C:/untitled/0506.py", line 4, in <module>  
    for n in args: print(n, end=' ')  
NameError: name 'args' is not defined  

Process finished with exit code 1 
```

* * *

```
def test(a,b,c,*args):  
    print (a,b,c)  
    print (args)  

test('aa','bb','cc',1,2,3,4) 
```

输出：

```
aa bb cc  
(1, 2, 3, 4)  
Process finished with exit code 0 
```

* * *

是什么导致了错误？
PS：我使用的是 Python 3.3.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:14:02.273

你的缩进错误：

```
def test(a,b,c,*args):  
    print (a,b,c)  
    for n in args:  
        print(n, end=' ')  

test('aa','bb','cc',1,2,3,4) 
```

缩进在 Python 中很重要；您的版本在函数*之外*`for n in args:`声明了循环，因此它立即运行。由于只是一个局部变量，它没有在函数之外定义，你得到一个.*`test()``args``test()``NameError`*

# command-line - 在批处理文件中使用运算符“+=”的问题

> ID：15626393
> 
> 赞同：2
> 
> 时间：2013-03-25T22:57:51.467
> 
> 标签：command-line, batch-file, sum

好的，这很简单。每次使用`+=`运算符时，我只想给一个数字加 1！

所以我像这样进入提示：

```
C:\Users\fsilveira>SET teste=000007

C:\Users\fsilveira>ECHO %teste%
000007

C:\Users\fsilveira>SET /A teste+=1
8
C:\Users\fsilveira> 
```

喔不错哟。似乎工作得很好。

从上一个的行为来看，如果我再次使用相同的运算符，它应该只是添加 1 到 8 对吗？所以我想我会有9个？但这是正在发生的事情：

```
C:\Users\fsilveira>SET teste=000008

C:\Users\fsilveira>ECHO %teste%
000008

C:\Users\fsilveira>SET /A teste+=1
1
C:\Users\fsilveira> 
```

什么？8 + 1 是 1 吗？o_O

当涉及到数字 8 时，它不应该如何工作（或者我认为它应该如何工作）

我在这里要疯了。

请有人可以帮助我并向我解释发生了什么？我真的不知道！

问候，菲利普

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T23:11:50.157

当以 0 为前缀时，它被插入为八进制数。并且 00008 不是有效的八进制数。您可以通过以下方式看到它的效果：

```
C:\Users>SET teste=000020

C:\Users>ECHO %teste%
000020

C:\Users>SET /A teste+=1
17 
```

其中`00020`八进制是`16`十进制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:03:10.853

该数字`8`没有 5 个前导零。如果您在做数学，请使用实数。:-)

这在我的机器上运行良好，在 Win7 64 位的命令窗口中：

```
C:\Users\Ken>set /a teste=8
8
C:\Users\Ken>set /a teste+=1
9
C:\Users\Ken>set /a teste+=1
10
C:\Users\Ken>echo %test3%
10

C:\Users\Ken> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T23:40:15.207

您可以通过删除前导零来避免这种情况：

```
C:\>set teste=000008

C:\>echo %teste%
000008

C:\>for /f "tokens=1*delims=0" %i in ("$0%teste%") do @set teste=%j

C:\>set /a teste+=1
9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:20:08.330

作为回应

```
"number 7 doesn't have 5 leading zeros too.. but still works with the operator!" 
```

您只会遇到数字 > 7 的前导零的问题，因为 0-7 Octal 与 0-7 Decimal 相同！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T23:10:59.483

前导零使事情变得复杂；我本来预计'000007'不会以这种方式工作 - 底线是：'000008'; 或任何带有前导零的“8”都被作为字符串处理。例子：

C:\Users\op>设置 f=foo

C:\Users\op>回显 %f%

富

C:\Users\op>set /a f+=1

1

# pandas - “TypeError：只有长度为 1 的数组可以转换为 Python 标量”

> ID：15626396
> 
> 赞同：2
> 
> 时间：2013-03-25T22:58:04.180
> 
> 标签：pandas

这对我来说看起来像是一个错误`pandas.Series.all`（`df`是一个 Pandas`DataFrame`对象，`pd`是 的简写`pandas`）：

```
In [18]: df.foo.apply(lambda x: x.startswith(u'bar').head()
Out[18]:
0    True
1    False
2    True
3    True
4    False
Name: foo

In [19]: (df.baz == u'frobozz').head()
Out[19]: 
0    False
1    False
2    True
3    True
4    False
Name: baz

In [20]: (type(Out[20]), type(Out[19]))
Out[20]: (pandas.core.series.Series, pandas.core.series.Series)

In [21]: pd.Series.all(Out[18], Out[19])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-310-d132f431d45f> in <module>()
----> 1 pd.Series.all(Out[18], Out[19])

/home/jones/.virtualenvs/proj/local/lib/python2.7/site-packages/pandas/core/series.pyc in f(self, *args, **kwargs)
    276     @Appender(func.__doc__)
    277     def f(self, *args, **kwargs):
--> 278         result = func(self, *args, **kwargs)
    279         if isinstance(result, np.ndarray) and result.ndim == 0:
    280             # return NumPy type

/home/jones/.virtualenvs/proj/local/lib/python2.7/site-packages/numpy/core/_methods.pyc in _all(a, axis, dtype, out, keepdims)
     28 def _all(a, axis=None, dtype=None, out=None, keepdims=False):
     29     return um.logical_and.reduce(a, axis=axis, dtype=dtype, out=out,
---> 30                                  keepdims=keepdims)                                                                                                                       
     31
     32 def _count_reduce_items(arr, axis):

TypeError: only length-1 arrays can be converted to Python scalars 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:15:42.700

从文档中， pd.Series.all 似乎只采用一个 Series 对象。尝试这个 -

```
pd.Series.all(Out[18].append(Out[19])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:17:08.387

这对我来说似乎不是一个错误，但我不知道你的想法`pd.Series.all(Out[18], Out[19])`。

```
>>> pd.Series.all?
Type:       instancemethod
String Form:<unbound method Series.all>
File:       /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.10.1-py2.7-macosx-10.6-intel.egg/pandas/core/series.py
Definition: pd.Series.all(self, *args, **kwargs)
Docstring:
a.all(axis=None, out=None)

Returns True if all elements evaluate to True. 
```

您正在使用类中的版本，因此第一个参数被解释为实例，第二个参数被解释为轴。 `pandas`正在尝试将`Series`您传递的第二个整数转换为一个整数以将其理解为一个轴，如果数组的长度> 1，这将无法工作。

# mysql - SHOW ENGINE INNODB STATUS 缺少死锁部分

> ID：15626399
> 
> 赞同：1
> 
> 时间：2013-03-25T22:58:21.383
> 
> 标签：mysql, innodb, database-deadlocks

我们遇到了死锁并试图从 InnoDB 引擎获取有关它的信息，但我们没有得到 LATEST DETECTED DEADLOCK 部分。谁能帮我理解为什么会这样？是否有一些配置可能会丢失？

谢谢！

```
SHOW ENGINE INNODB STATUS;

=====================================
130325 15:37:30 INNODB MONITOR OUTPUT
=====================================
....
----------
SEMAPHORES
----------
....
------------
TRANSACTIONS
------------
....
--------
FILE I/O
--------
....
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
....
---
LOG
---
....
----------------------
BUFFER POOL AND MEMORY
----------------------
....
--------------
ROW OPERATIONS
--------------
....
----------------------------
END OF INNODB MONITOR OUTPUT
============================ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:00:21.333

您的服务器自启动以来没有任何死锁，因此省略了该部分。为什么你认为你已经陷入僵局？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T21:32:49.030

您可以尝试新的 5.6 变量：[http](http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_print_all_deadlocks) ://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_print_all_deadlocks ，这样您就可以记录所有死锁。

或处理应用程序中的错误 (1213)，请参阅[https://dev.mysql.com/doc/refman/5.6/en/innodb-error-codes.html](https://dev.mysql.com/doc/refman/5.6/en/innodb-error-codes.html)。

# keyboard - ps/2键盘接口VHDL

> ID：15626400
> 
> 赞同：2
> 
> 时间：2013-03-25T22:58:27.117
> 
> 标签：keyboard, vhdl, fpga, intel-fpga, ps2

好的，所以我正在尝试实现一个键盘控制器以与 Altera DE2 FPGA 板一起使用，并且遇到了一些问题。我已经在 quartus 模拟器中运行了这段代码，一切似乎都在做我认为应该做的事情。但是，当我尝试将其编程到 FPGA 上时，没有任何效果。我已将其定位为我模拟 ps/2 时钟的方式，而系统时钟似乎并不是它们实际运行的方式。

我模拟了 50 mhz、20ns 周期的系统时钟和 90ns 周期的 ps2clock。在整个仿真过程中将 ps2data 设置为随机值时，会将正确的位加载到 8 位扫描代码中。问题是当编程到板上时，状态机永远不会离开空闲状态。当数据位为零时，状态机应该在 ps2 时钟的下降沿离开空闲状态，这似乎永远不会发生。我将 ps2data 和 ps2clock 引脚连接到正确的输入，但似乎无法找出问题所在。

我没有添加对此进行测试的顶级实体，但它只是获取输出 keyCode 并将其发送到 7seg 显示器之一。我觉得这个问题的答案与 ps2clock 有关，我只是不确定到底是什么。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity keyboard is
    Port ( Clk          :   in std_logic; --system clock
           ps2Clk       :   in std_logic; --keyboard clock
           ps2Data      :   in std_logic; --keyboard data
           reset        :   in std_logic; --system reset
           keyReady     :   out std_logic;
           DoRead       :   in std_logic; -- when to read
           keyCode      :   out std_logic_vector(7 downto 0);
           pFalling     :   out std_logic; --debugging
           pFixedClk    :   out std_logic_vector(1 downto 0); --debugging
           divClock_out : out std_logic; --debugging
           clockCount_out : out std_logic_vector(9 downto 0); --debugging
           testDiv_out     : out std_logic;
           bitCount_out : out std_logic_vector(3 downto 0);
           shiftIn_out  : out std_logic_vector(8 downto 0)); --debugging
end keyboard;

architecture Behavioral of keyboard is

component div_counter is
    Port(clk, reset : in std_logic;
                Q   : out std_logic_vector(9 downto 0));
end component div_counter;

signal shiftIn              : std_logic_vector(8 downto 0); -- shifted in data
signal ps2fixedClock        : std_logic_vector(1 downto 0); -- 2 bit shift register
signal divClock             : std_logic ; -- main clock/512 
signal clockCount           : std_logic_vector(9 downto 0); -- debugging
signal ps2falling           : std_logic ;   
signal bitCount             : std_logic_vector(3 downto 0); 
signal keyReady_sig         : std_logic;

type state_type is (idle, shift, ready);
signal state : state_type;  
begin

keyReady <= keyReady_sig;

-------------------------------
--- counter to divide the main clock by 512
-------------------------------
counter : div_counter
    Port map(clk    => Clk,
            reset   => reset,
                Q   => clockCount);

clockCount_out <= clockCount;               
divided_clock : process (clockCount)
begin
    if clockCount = "1000000001" then
        divClock <= '1';
    else
        divClock <= '0';
    end if; 
end process divided_clock;                  

testDiv_out <= divClock;
------------------------------------
------ 2 bit shift register to sync clocks
------------------------------------
ps2fixed_Clock : process (reset, divClock)
begin
    if reset = '1' then
        ps2fixedClock <= "00";  
    elsif (divClock'event and divClock = '1') then  
        ps2fixedClock(0) <= ps2fixedClock(1);
        ps2fixedClock(1) <= ps2Clk;
    end if;
end process ps2fixed_Clock;

pFixedClk <= ps2fixedClock;
-----------------------------------
-------- edge detector 
-----------------------------------
process (ps2fixedClock)
begin
    if ps2fixedClock = "01" then
        ps2falling <= '1';
        else
        ps2falling <= '0';
    end if; 
end process;

pFalling <= ps2falling;
bitCount_out <= bitCount;

--------------------------------
------- state machine
--------------------------------
state_machine : process (divClock, reset)
begin
    if (reset = '1') then
        state <= idle;
        bitCount <= "0000";
        shiftIn <= (others => '0');
        keyCode <= (others => '0');
        keyReady_sig <= '0';
    elsif (divClock'event AND divClock = '1') then

        if DoRead='1' then
            keyReady_sig <= '0';
        end if; 

        case state is
        when idle =>
            bitCount <= "0100";
            if ps2falling = '1' and ps2Data = '0' then
                state <= shift;
            end if;         
        when shift =>
                if bitCount >= 9 then
                    if ps2falling = '1' then -- stop bit
                        keyReady_sig <= '1';
                        keyCode <= shiftIn(7 downto 0);
                        state <= idle;
                    end if;
                elsif ps2falling='1' then
                    bitCount <= bitCount + 1;
                    shiftIn(7 downto 0) <= shiftIn(8 downto 1);
                    shiftIn(8) <= ps2Data;  
                end if; 
        when others =>
            state <= idle;
    end case;
    end if;
end process;    

shiftIn_out <= shiftIn;
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-30T21:24:16.977

稍后回来回答这个问题......

事实证明，这不起作用的原因是因为我使用的是 usb -> ps2 适配器，而不是原始的 ps2 连接器键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:10:08.907

您尝试将 ps2clock 同步到您的 divClock。但是，divClock 是一个使能信号，而不是一个时钟。它不是很活跃。

我建议你在 ps2fixed_Clock 进程中使用 clk

```
ps2fixed_Clock : process (reset, clk)
begin
    if reset = '1' then
        ps2fixedClock <= "00";  
    elsif (rising_edge(clk)) then  
        ps2fixedClock(0) <= ps2fixedClock(1);
        ps2fixedClock(1) <= ps2Clk;
    end if;
end process ps2fixed_Clock; 
```

你也应该在你的 state_machine 进程中使用 clk

```
state_machine : process (clk, reset)
begin
    if (reset = '1') then
        ...
    elsif (rising_edge(clk)) then
        ... 
```

如果您想使用时钟分频器（divided_clock 过程），您可以生成一个启用信号（就像您所做的那样）并在同步时钟**后**使用它，例如在状态机中！

# session - 登录经典asp后显示用户特定数据

> ID：15626406
> 
> 赞同：-2
> 
> 时间：2013-03-25T22:59:02.673
> 
> 标签：session, asp-classic, database-connection

我的项目有此代码，我希望将用户定向到他们的帐户页面，该页面显示特定于他们的数据。即他们的供应商名单。我意识到我需要创建一个会话变量，但我不知道将它放在我的代码中的哪个位置，而且我不知道在帐户页面中指定用户的代码。任何人都可以帮忙吗？这是我的代码。

```
<%
'Connection String
Dim Conn
'Query to be executed
Dim SQLQuery
'Recordset
Dim rs
'StudentNo Of Logged in user
Dim UserName
'Password of User
Dim Password

'Getting information from submitted form
UserName = request.form("username")
Password = request.form("password")
RememberMe = request.form("rememberme")

'If not blank Username password submitted
if UserName <> "" or Password <> "" then  

'Creating connection Object    
set Conn=server.createobject("ADODB.Connection")

'Creating Recordset Object    
set rs = Server.CreateObject("ADODB.Recordset")    

'Initialising Provider String    
connStr = "DRIVER={Microsoft Access Driver (*.mdb)};DBQ="& Server.MapPath("database.mdb")&";"   

'Opening Connection to Database    
Conn.open  connStr        
'Query to be executed    
SQLQuery = "select * from customers_tbl where c_email = '"&UserName&"' AND c_password = '"&Password&"'"   
'Retrieving recordset by executing SQL   
set rs=Conn.execute(SQLQuery)    
'If no records retrieved    
if rs.BOF and rs.EOF then        
Response.Redirect "customerlogin.htm?username=" & UserName    
else         
'If remember me selected        
if RememberMe = "ON" then
'Writing cookies permanently            
Response.Cookies("UserName")=UserName            
Response.Cookies("Password")=Password            
Response.Cookies("UserName").Expires = Now() + 365            
Response.Cookies("Password").Expires = Now() + 365            
Response.Redirect "customeraccount.htm"
else
'writing cookies temporarily            
    Response.Cookies("UserName")=UserName            
    Response.Cookies("Password")=Password            
    Response.Redirect "customeraccount.htm"
end if        
'Closing all database connections        
Conn.Close       
rs.close          
set rs = nothing        
set Conn = nothing    
end if
else    
'Invalid User    
Response.Redirect "customerlogin.htm?UserName=blank"
end if
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:16:03.227

假设您的客户表的主键称为 CustomerId 那么您可以有类似的东西

```
if rs.BOF and rs.EOF then        
Response.Redirect "customerlogin.htm?username=" & UserName    
else
Session("CustomerId") = rs("customerid") 
```

然后在您的客户帐户页面上，您可以进行查询

```
SQLQuery = "select * from customers_tbl where customerid = "&Session("CustomerId") 
```

关于您的代码，我注意到两件事。

首先，您似乎拥有带有 .htm 扩展名而不是 .asp 扩展名的 asp 页面。大概您已经更改了相关的 IIS 设置，以便它将 .htm 页面视为 ASP 而不是平面 html

其次，您使用的是 ODBC 连接字符串。这将起作用，但 OLEDB 驱动程序被认为更快 - 例如

```
connstr = "PROVIDER=Microsoft.Jet.OLEDB.4.0;DATA SOURCE=""& Server.MapPath("database.mdb") 
```

# api - MDGModifier 返回值

> ID：15626408
> 
> 赞同：3
> 
> 时间：2013-03-25T22:59:04.593
> 
> 标签：api, plugins, sdk, maya

我正在更新我的命令以使用 MDGModifier::commandToExecute 而不是 MGlobal::executeCommand 以提供撤消机制。问题是我的命令序列取决于从以前的命令返回的值，并且由于 MDGModifier 保存所有命令而不是执行它们，我不知道如何去做......示例：

```
MStringArray commandResult; 
MGlobal::executeCommand("polyCube", commandResult);
MGlobal::executeCommand( "polyTriangulate " + commandResult[0]); 
```

由于 MDGModifier::commandToExecute 没有给我返回值（commandResult），我会将什么传递给第二个命令？我想这很简单，人们已经弄清楚了。任何帮助是极大的赞赏！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:46:13.077

您可以在命令中使用多个 MDGModifier 实例。在您的命令的 doIt 中，每当子命令依赖于先前子命令创建的 DG 节点的名称时，安排在第一个 MDGModifier 上创建 DG 节点，调用第一个 MDGModifier 的 doIt，然后安排第二个使用 DG 节点现在已知的名称在第二个 MDGModifier 上的子命令，并调用第二个 MDGModifier 的 doIt。您的命令的 redoIt 只是以相同的顺序在两个 MDGModifiers 上调用 doIt，而您的命令的 undoIt 在两个 MDGModifiers 上调用 undoIt，但顺序相反。

在您给出的示例中，您的第一个子命令是 polyCube，它创建多个 DG 节点，因此使用 MDGModifier::commandToExecute 调度 polyCube comamnd 是以可撤销的方式实现这一目标的最简单方法。但与 MDGModifer::createNode 或 MDagModifier::createNode 不同的是，它不会为您提供任何 MObject 引用创建的节点，您需要一个来获取名称。要获得这样的 MObject，您需要在调用 MDGModfier 的 doIt 之前使用 MDGMessage::addNodeAddedCallback 添加回调，然后将其删除。

警告：未经测试！

```
class MyCommand: public MPxCommand
{
    ...

    MDGModifier             m_modifier1;
    MDGModifier             m_modifier2;

    static void NodeAdded( MObject& node, void* clientData )
    {
        if ( node.hasFn( MFn::kMesh ) )
        {
            *static_cast< MObject* >( clientData ) = node;
        }
    }

    MStatus doIt( const MArgList& args )
    {
        MObject                 node;
        MFnDependencyNode       nodeFn;
        MCallbackId             nodeAddedId;

        nodeAddedId = MDGMessage::addNodeAddedCallback( NodeAdded, &node );
        m_modifier1.commandToExecute( "polyCube" );
        m_modifier1.doIt();
        MMessage::removeCallback( nodeAddedId );
        nodeFn.setObject( node );
        m_modifier2.commandToExecute( "polyTriangulate " + nodeFn.name() );
        m_modifier2.doIt();
        return MStatus::kSuccess;
    }

    MStatus redoIt()
    {
        m_modifier1.doIt();
        m_modifier2.doIt();
        return MStatus::kSuccess;
    }

    MStatus undoIt()
    {
        m_modifier2.undoIt();
        m_modifier1.undoIt();
        return MStatus::kSuccess;
    }

    ...
}; 
```

# java - MulticastSocket 不要在 mac os x 上禁用环回

> ID：15626411
> 
> 赞同：0
> 
> 时间：2013-03-25T22:59:12.913
> 
> 标签：java, windows, macos, multicast, multicastsocket

我在 mac os x 中有一个严重的问题。我在 mac os x 中开发一个备份分布式应用程序。应用程序必须将文件发送到网络，并且网络的对等方必须备份文件。因此，为此我使用了 2 个线程：第一个线程从系统读取文件并使用我预定义的协议将它们上传到网络，第二个线程正在等待来自网络中其他对等方的消息。

我使用以下代码：

发送线程：

```
String putchunk_string = "MESSAGE TO SEND...";
DatagramSocket socket = new DatagramSocket ();
string address = "225.0.0.2"; // ip of multicast 
string port = 4002; // port of multicast 

byte buf[] = putchunk_string.getBytes();

DatagramPacket pack = newDatagramPacket(buf,buf.length,
InetAddress.getByName(address),port);
socket.send(pack);
socket.close(); 
```

接收线程：

```
started=true;
MDataChannel = new MulticastSocket(4002);
MDataChannel.setLoopbackMode(true);
MDataChannel.setTimeToLive(1);
MDataChannel.joinGroup(InetAddress.getByName("225.0.0.2"));
while(started)
{
  received_packet = new DatagramPacket(message, message.length);
  MDataChannel.receive(received_packet);

  //....More code to parse the message
} 
```

我的问题是：我必须将计算机连接到路由器、一个 windows 和其他 mac os x，并且我在两者中都有相同的代码。当我将文件从 windows 发送到 mac os x 计算机时，一切都很好。mac计算机从windows计算机接收数据包，而windows计算机不接收任何数据包，因为我使用setloopbackmode禁用了multicastsocket上的环回。但是当我从mac os x计算机发送到windows时我遇到了一个问题：windows计算机接收到数据包，但mac计算机也接收到数据包，他不应该接收，因为是自己的数据包，我有禁用环回的setloopbackmode（true） .

我在 os x 中使用 java 1.6，但我已经尝试了 1.7。

我没有这样做，或者这是 osx 上的 java 多播套接字的错误？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:03:29.300

我想我找到了答案..当目标机器等于源机器时，基本上 Windows 会考虑一个环回数据报。当目标套接字等于源套接字时，Mac os x 会考虑一个环回数据报。

问候

# javascript - 如何访问不同域上的元素？

> ID：15626414
> 
> 赞同：2
> 
> 时间：2013-03-25T22:59:30.167
> 
> 标签：javascript

我正在尝试制作一个 java 脚本程序，它需要一个单词列表并为每个单词提供句子。

到目前为止，您可以输入一个单词，它会链接到“sentence.yourdictionary.com/ + your word”。Yourdictionary.com 提供基于单词的句子列表。因此，如果您输入“yo”，它会将您链接到[此处](http://sentence.yourdictionary.com/yo)

我想出了 jQuery，它可以在 Yourdictionary.com 上获得列表的第一句话，这就是我想要的。

```
$("ul.example>li").first() 
```

但是我怎样才能从我的 javascript 中执行这段代码，所以它会从你的字典中复制第一句话，并将其放入我的 html 文件中？

这是我当前的代码，如果您想查看它：

```
 <textarea rows="10" cols="22"  onKeydown="if(event.keyCode==13) { getWord(' ') }" id="word"></textarea> <br>
    <button onClick='getWord(" ")'>Enter (Spaces)</button><button onClick='getWord("\n")'>Enter (Lines)</button>
    <p id="demo"></p>

    <script>
        var words = [];
        var partLink = "http://sentence.yourdictionary.com/";
        function getWord(splitter) {
            var wordList = $("#word").val();
            words = wordList.split(splitter);
            for(var i=0; i<words.length; i++) {
                makeLink(words[i]);             
            }
        }
        function makeLink(word) {
            var link = partLink + word;
            $("#demo").append("<a href='" + link + "'>" + word +"</a><br/>");
        }
    </script> 
```

**编辑**

为了解决这个问题，我使用了 AnyOrigin.com。然后我将 data.contents 加载到变量 Sitecontents 中，并将其转换为 jQuery 对象。然后我通过执行 jquery`$("ul.example>li", siteContents).first()`

# object - Cocos2d 移除远处的物体（java）

> ID：15626415
> 
> 赞同：0
> 
> 时间：2013-03-25T22:59:30.793
> 
> 标签：object, range, cocos2d-android

嗨，我有雪碧，它是 granade ^^

问题是它何时爆炸。它应该杀死远处的所有目标（在这种情况下都在屏幕上），但它会随机杀死它们。

```
public void Explode(Object sender)
{
    ArrayList<Enemy> targetsToBlow = new ArrayList<Enemy>();
    targetsToBlow.addAll(targets);
    Bullet bullet = (Bullet)sender;
    float x = bullet.getPosition().x;
    float y = bullet.getPosition().y;
//  Log.i("Explode", "boom");
//  Log.i("Target",String.valueOf(y));
    for (int i=0;i<targetsToBlow.size();i++) 
    {
        Enemy enemy = targetsToBlow.get(i);
        float xd = enemy.getPosition().x - x;
        float yd = enemy.getPosition().y - y;
        float distance = (float) Math.sqrt(xd*xd + yd*yd);
        Log.i("Distance", String.valueOf(distance));
        if(distance<20000/2)
        {
            enemy.setHp(bullet.dmg);
            Log.i("Explode", "boomed1");
        }
        else if(distance<=20000)
        {
            enemy.setHp(bullet.dmg/2);
            Log.i("Explode", "boomed2");
        }
        if(enemy.getHp()<=0)
        {               
            targets.remove(enemy);
            removeChild(enemy, true);
            money++;
            moneyLabel.setString("GOLD: "+money);
        }
        targetsToBlow.remove(i);
    }
    projectiles.remove(bullet);
    removeChild(bullet, true);

} 
```

我试图从最后一个索引中做到这一点，但是它没有杀死并且granade留在屏幕上。我不知道出了什么问题：/请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:36:49.353

问题出在删除它们后的数组列表项索引中。我认为这就是他们中的一些人留在现场的原因。

我做的和简单的拍摄一样：

```
public void Explode(Object sender)
{
    ArrayList<Enemy> targetsToDelete = new ArrayList<Enemy>();      

    Bullet bullet = (Bullet)sender;

         for (Enemy enemy : targets){
             if(isEnemyInRange(bullet, enemy, 100))
                {
                    enemy.setHp(bullet.dmg);
                    if(enemy.getHp()<=0)
                    {
                        targetsToDelete.add(enemy);
                    }
                }

            }
            for (Enemy target : targetsToDelete){
                targets.remove(target);
                removeChild(target, true);
            }

    projectiles.remove(bullet);
    removeChild(bullet, true);

} 
```

所以项目索引没有改变，在第一个循环之后我可以销毁并删除我需要的所有项目:)

# php - 如何让 PHP 网页在一年中的每一天（2013 年）打印？

> ID：15626419
> 
> 赞同：-4
> 
> 时间：2013-03-25T22:59:46.883
> 
> 标签：php, for-loop, strtotime

我对 PHP 很陌生，我正在尝试制作一个 PHP 网页，可以打印出 2013 年的每一天，例如：

2013 年 1月 1 日 2013 年
1 月 2 日
.........................
2013年
12 月 31 日

我一直在玩下面这段代码的不同变体，但我不能让日期增加一次以上。

```
$date = "2013-01-01";

for ($counter = 0; $counter <= 365; $counter++) {

$newdate = strtotime('+1 day', strtotime($date));
$newdate = date('Y-m-j', $newdate);

echo "$newdate<br>"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:06:08.883

很简单，当你使用时`strtotime( string )`，就会出现问题。

其他重要的事情是您需要添加日期`$date`或添加`$counter`日期`strtotime( originalDate . '+'.$counter.' day')`

**1 没有使用 $date 的计数器。**

```
<?php

$date = "2013-01-01";

for ($counter = 0; $counter <= 364; $counter++) {

    echo "$date<br>";

    $newdate = strtotime( $date . '+1 day');
    $newdate = date('Y-m-j', $newdate);
    $date = $newdate;

}

?> 
```

**2带计数器：**

```
<?php

$date = "2013-01-01";

for ($counter = 0; $counter <= 364; $counter++) {

    $newdate = strtotime( $date . '+'.$counter.' day');
    $newdate = date('Y-m-j', $newdate);

    echo "$newdate<br>";
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:07:22.537

您总是使用`$date`变量来计算日期，但您没有更改它。您的循环将迭代 366 次（它从 0 开始，并以包括 365 结束）。也呼应第`$date`一个，否则您将从 1 月 2 日开始

```
$date = "2013-01-01";

for ($counter = 0; $counter < 365; $counter++) {
    echo "$date<br>";
    $date = date('Y-m-j', strtotime('+1 day', strtotime($date)));
} 
```

# dynamics-crm-2011 - 来自 CRM 2011 中插件的警报消息

> ID：15626422
> 
> 赞同：3
> 
> 时间：2013-03-25T22:59:52.107
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

我在帐户字段的更新上注册了一个插件。每当用户更新父帐户记录时，此插件都会更新所有子联系人。用户希望看到一条弹出（确认）消息，说明“所有子联系人即将更新”。当用户单击取消时，不会发生更新。

以下是我的问题相同：

1.  最好的方法是什么？
2.  是否可以首先显示来自插件的警报消息？
3.  知道 JavaScript 的*onsave*是选项之一，它可以防止注册的插件触发吗？

笔记。每当使用父客户字段创建联系人记录时，我都有一个工作流，它使用父客户字段更新联系人字段。Also a JavaScript to populate the fields automatically on contact form when a parent customer ( *Account* ) is chosen is in place.

还有一种方法可以在表单的“保存时”上更新地址字段之前和之后获取字段值吗？我问这个因为当且仅当帐户记录上的地址字段有更新时我才必须显示弹出窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:37:25.313

1.  实现这一目标的最简单方法是**不**使用插件。一般的经验法则是，如果一项任务需要用户交互（操作在 GUI 级别），则应该使用这种称为 JavaScript 的可怕东西。

2.  是的，但不是你想的那样。您可以通过抛出异常来使执行崩溃，并且在某些情况下您会收到一条错误消息。这**不是**一条路。曾经。

3.  不确定这是否是尝试停止插件的最佳解决方案。我的建议是添加一个隐藏字段，该字段设置为用户决定的任何内容。在插件（**每次都会**触发）中，您只需检查字段的值并相应地停止/继续。

自己的建议：
为什么不让上述字段显示？这样，用户会收到警告，但也可以在自己方便的时候进行设置。当然，它需要额外的逻辑来检查字段是否已更改，以确定是否显示警报。

# java - How can I sort a LinkedList based on the last names without using an sort methods such as Collections.sort

> ID：15626430
> 
> 赞同：2
> 
> 时间：2013-03-25T23:00:22.630
> 
> 标签：java, sorting

I have a LinkedList called recordInformation that contains an object at each index. The object consists of a first name, last name, numnbr, and balance separated by spaces. So recordInformation looks like [[firstName lastName number balance][fname lastname number bal]]. Everytime I add a record to recordInformation, I sort the list based on last name. I've attempted to write a method, but when I output the list in another method, the indexes have not changed. Is compareTo the correct way to check for alphabetical order?

```
public void sortRecords(LinkedList list){
    if (list.size()==1)
        return;

    Object obj = recordInformation.getLast();
    String sortVar = obj.toString();
    String[] varArray = sortVar.split(" ");

    for (int i=0;i<list.size();i++){
        Object obj1 = recordInformation.get(i);
        String compare = obj1.toString();
        String[] compareArray = compare.split(" ");
        //varArray[1] and compareArray[1] hold the last names
        if ((varArray[1].compareTo(compareArray[1]))<0){
            recordInformation.add(i,obj);
            recordInformation.remove(list.size()-1);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:01:59.883

如果您想保持排序顺序并同时在插入时做很多事情，那么`LinkedList`这是最后使用的数据结构之一。

你所追求的是[红黑](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)树。在java中它被实现为`java.util.TreeMap`类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:44:30.463

如果您从一开始就控制了列表，为什么不将元素插入正确的位置？

我的意思是如果有A，你需要放C，然后放A->C，如果有B，那么放A->B->C。这样你就不会使用 Collections.sort （或任何排序）。

# multithreading - Troubleshooting "unhandled exception in thread" error

> ID：15626435
> 
> 赞同：2
> 
> 时间：2013-03-25T23:00:49.883
> 
> 标签：multithreading, python-2.7

When I execute this code

```
import class3,thread

t3 = class3.test3
thread.start_new_thread(t3.func3,()) 
```

where `class3` is

```
class test3(object):
    def func3():
        while 1:
            print "working!!" 
```

I get an error:

> Unhandled exception in thread started by <unbound method test3.func3>

What is the meaning of this error, and how do I fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:05:55.450

调用它，看看会发生什么：

```
TypeError: unbound method func3() must be called with test3 instance as first argument (got nothing instead) 
```

您要么必须创建`func3`一个实例方法并初始化您的类：

```
class test3(object):
        def func3(self):
            while True:
                print "working!!"

t3 = test3() 
```

或者做`func3`一个`staticmethod`：

```
class test3(object):
    @staticmethod
    def func3():
        while True:
            print "working!!" 
```

# iphone - Obj C - Autocomplete

> ID：15626436
> 
> 赞同：0
> 
> 时间：2013-03-25T23:00:58.343
> 
> 标签：iphone, objective-c, xcode4, autocomplete, textfield

Hey I got a problem with a tutorial I found for autocompletion: It says -

*Now, when the text in the text field has changed (ie: in the EditingChanged handler), just call the GetSuggestions method, which will return an array of strings that match the parameter passed*

```
NSArray *suggestions = [autocomplete GetSuggestions:textField.text]; 
```

*You can do whatever you want with these suggestions, I displayed them in a table view and when the user taps a cell, the text is added to the text field ([source](http://www.radulucaciu.ro/iphone-autocomplete-class/5/))*

Well I placed the array in

```
...textField:(UITextField *)textField shouldChangeCharactersInRange... 
```

but I cannot figure out how to 'call' the suggestions when I write something right behind my text somewhat like autocorrection :/ any thoughts?

tried something like

```
if ([textField.text length] > 0){
        ..somehow call suggestions

    } 
```

but that just doesn't work :P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:10:50.560

您需要创建一个视图来显示它们。到目前为止，您所做的只是将自动完成建议加载到一个数组中。

您需要在 TableView 或其他内容中显示它们。看这里以获得关于它们如何工作的好教程。-> [http://www.youtube.com/watch?v=_Qbjwx0hB6A&list=SPE83F832121568D36&index=13](http://www.youtube.com/watch?v=_Qbjwx0hB6A&list=SPE83F832121568D36&index=13)

好好看看作者提供的源代码，他演示了他是如何使用数组来填充一个TableView的。

编辑：youtube 教程是针对 OS X 编程的 NSTableView 的，但你掌握了它的窍门。

# bash - Parameter expansion bash

> ID：15626437
> 
> 赞同：0
> 
> 时间：2013-03-25T23:01:04.337
> 
> 标签：bash

I'm recursively counting lines in files whose format is given in command line as a parameter, e.g. *.txt... In this example I'm searching for all .txt files and counting their lines. Additionally, I have to echo input parameters. My problem is with echo, when I try "$1", it expands and echoes all the .txt files, also with '$1' it echoes $1... What I want is not to expand and just echo raw input, in this case *.txt.

EDIT:

I'm calling the script with 2 parameters, first is the starting directory of recursion, and the second one is the format of desired file type.

```
./script.sh test *.txt 
```

Then, I need to echo both of the parameters and recursively count the lines of the files whose format is given with 2nd parameter

```
echo $1
echo $2

find /$1 -name "$2" | wc -l 
```

This code isn't working currently, but I'm trying to fix parameter echo first.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:09:54.540

如果你真的想禁用`glob`ing （这很奇怪），你可以设置：

```
set -o noglob 
```

要将此选项设置回 off ：

```
set +o noglob 
```

但我不知道你真正想做什么，但我觉得你做错了。您应该考虑对上下文进行更多解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:23:18.237

没有办法仅针对您的特定脚本执行此操作。不要试图`./script.sh foo *.txt`按照你想要的方式工作。这不是 shell 的工作方式，也没有其他实用程序可以这样做。

相反，您应该以相同的方式`find`执行`grep`此操作：只需要求用户引用：

```
./script.sh foo '*.txt' 
```

执行此操作时，您可以在 script.sh 中使用`$2`带引号将其保留为模式（如在您的`find /$1 -name "$2" | wc -l`, 或不带引号将其扩展为多个文件名，如在您的`echo $2`.

# php - Apache doesn't execute script of index.php in root automatically

> ID：15626438
> 
> 赞同：2
> 
> 时间：2013-03-25T23:01:08.170
> 
> 标签：php, apache, http

This is strange: my Apache is configured with `DirectoryIndex index.html,index.php` so when I type [http://gustavopi-macmini.local/](http://gustavopi-macmini.local/) it searches for `index.php` and loads it ok if there is only html tags in the file.

But if I put some php script in `index.php`, it loads `index.html.en` instead (It Works!). However, if I type [http://gustavopi-macmini.local/index.php](http://gustavopi-macmini.local/index.php) it loads and executes the script.

Also, if I put an `index.php` file in a subdirectory and type [http://gustavopi-macmini.local/somesubdirectory/](http://gustavopi-macmini.local/somesubdirectory/) it loads and executes `index.php` normally as it should...

Why this strange behavior of "jumping" from a php script in the root occurring?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T23:05:11.693

定义的“目录索引”文件的顺序也决定了它们的优先级*。*

在您的情况下，如果 an`index.html`和 a`index.php`都存在，Apache 将选择`index.html`.

要改变这一点，改变“目录索引”文件的顺序；

```
DirectoryIndex index.php index.html 
```

在此处阅读文档：

[http://httpd.apache.org/docs/2.2/mod/mod_dir.html](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T00:43:44.563

不要将逗号 (,) 放在**index.html**和**index.php**之间，正如“thaJeztah”所说，**DirectoryIndex**指令中的顺序很重要，它定义了如果有两个文件索引将提供的文件。请求目录中的 html 和 index.php ：

如果你想优先考虑 index.html 写这个：

**DirectoryIndex index.html index.php**

如果你想优先考虑 index.php 写这个：

**DirectoryIndex index.php index.html**

# javascript - Fill horizontal space

> ID：15626439
> 
> 赞同：1
> 
> 时间：2013-03-25T23:01:16.173
> 
> 标签：javascript, html, css

I want the green area here to fill the entire horizontal white area between the green and the blue area. The problem is that I don't know what I should put on it's `width` attribute, currently it is `500px`.

```
<article id="chat">
</article>
<aside id="channel-attendees">
</aside> 
```

`chat` is the left bar, `channel-attendees` the right one.

```
#chat {
    background: green;
    float: left;
    height: 500px;
    width: 500px;
}

#channel-attendees {
    background: blue;
    float: right;
    width: 200px;
    height: 500px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:04:04.487

将绿色宽度更改为 90%，将蓝色宽度更改为向左浮动 10%，这应该适用于所有类型的显示器；）

```
#chat {
    background: none repeat scroll 0 0 green;
    float: left;
    height: 500px;
    width: 90%;
}

#channel-attendees {
    background: none repeat scroll 0 0 blue;
    float: left;
    height: 500px;
    width: 10%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:12:21.157

如果您希望绿色区域是灵活的和具有固定宽度的蓝色区域，您只需要从绿色块中删除浮动和宽度，您还需要将 margin-right 添加到值 = 蓝色块宽度的绿色块中。

```
#chat {
background: green;  
height: 500px;   
margin-right: 200px;
} 
```

并将蓝色块放在绿色之前。

```
 <body>
  <header>
    <a href="#"><img src="img/icon256.png"></a>
        <div id="menu">
            <div id="user">
                <img id="user-avatar" src="img/avatar.jpg">
                <span id="user-name">Michael</span>
            </div>
        </div>
    </header>
    <div id="channels">
    </div>
    <aside id="channel-attendees">
    </aside><article id="chat">
    </article> 
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:03:29.560

而不是使用`width`试试这个：

```
#chat {
  background: green;
  float: left;
  height: 500px;
  position: absolute;
  right: 200px;
  left: 0;
} 
```

# python - cherrypy file upload combined with requests post request

> ID：15626441
> 
> 赞同：1
> 
> 时间：2013-03-25T23:01:43.057
> 
> 标签：python, rest, file-upload, cherrypy, python-requests

I'm having a hard time combining a python requests post request with a cherrypy server in order to upload a file.

Here's what the server side code inside the cherrypy server looks like:

```
@cherrypy.expose
def upload(self, myFile=None):
    out = """<html>
    <body>
    myFile length: %s<br />
    myFile filename: %s<br />
    myFile mime-type: %s
    </body>
    </html>"""

    size = 0
    allData=''
    logging.info('myfile: ' + str(myFile))
    while True:
            data = myFile.file.read(8192)
            allData+=data
            if not data:
                    break
            size += len(data)
    savedFile=open(myFile.filename, 'wb')
    logging.info('writing file: ' + myFile.filename)
    savedFile.write(allData)
    savedFile.close()
    return out % (size, myFile.filename, myFile.type) 
```

And the client side (for now) is simply a python requests call: testfile = open('testfile', 'r') request = requests.post("http://:8088/upload/", files={'myFile': testfile})

Unfortunately I don't have too much experience with these two frameworks and I'm wondering where the miscommunication is happening. When this is executed, the myFile variable is not populated (not even sure if it's supposed to be) and I'm not exactly sure how cherrypy is supposed to receive the file. All help is appreciated!

PS. Errors I've received:

```
File "/usr/lib/pymodules/python2.7/cherrypy/_cprequest.py", line 656, in respond
response.body = self.handler()
File "/usr/lib/pymodules/python2.7/cherrypy/lib/encoding.py", line 188, in __call__
self.body = self.oldhandler(*args, **kwargs)
File "/usr/lib/pymodules/python2.7/cherrypy/_cpdispatch.py", line 34, in __call__
return self.callable(*self.args, **self.kwargs)
File "/usr/bin/apt-repo", line 194, in upload
data = myFile.file.read(8192)
AttributeError: 'NoneType' object has no attribute 'file'

10.136.26.168 - - [25/Mar/2013:15:51:37] "POST /upload/ HTTP/1.1" 500 1369 "" "python-    requests/0.8.2" 
```

So I tried doing this with the default example. Here's what I changed the upload method to:

```
@cherrypy.expose
def upload(self, myFile=None):
    out = """<html>
    <body>
        myFile length: %s<br />
        myFile filename: %s<br />
        myFile mime-type: %s
    </body>
    </html>"""

    # Although this just counts the file length, it demonstrates
    # how to read large files in chunks instead of all at once.
    # CherryPy reads the uploaded file into a temporary file;
    # myFile.file.read reads from that.
    size = 0
    while True:
        data = myFile.file.read(8192)
        if not data:
            break
        size += len(data)
    print out % (size, myFile.filename, myFile.content_type)
    return out % (size, myFile.filename, myFile.content_type)
""" 
```

Very basic. Came straight out of cherrypy's documentation.

Here's what I'm doing on the client side:

```
jlsookiki@justin1:~$ ls -lh bnt-beapi_1.9.6_amd64.deb 
-rw-r--r-- 1 jlsookiki users 30K Mar 26 11:20 bnt-beapi_1.9.6_amd64.deb
jlsookiki@justin1:~$ python
>>> import requests
>>> files = open('bnt-beapi_1.9.6_amd64.deb', 'rb')
>>> url = "http://0.0.0.0:8089/upload"
>>> r = requests.post(url, files={'myFile': files})
>>> print r.text
 <html>
        <body>
            myFile length: 0<br />
            myFile filename: bnt-beapi_1.9.6_amd64.deb<br />
            myFile mime-type: application/x-debian-package
        </body>
 </html> 
```

For some reason, the file is not actually getting sent over and is not being read. Anyone have any idea why this is happening?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:19:46.177

确保当您启动服务器时，cherrpy 代码具有访问/权限以写入您尝试保存文件的位置。

# c - 在函数中通过指针传递字符数组

> ID：15626444
> 
> 赞同：0
> 
> 时间：2013-03-25T23:02:13.600
> 
> 标签：c, arrays, pointers

我有以下代码：

```
#include <stdio.h>
#include <string>

int scan_url(const char url[], char *hostname[], int maxhostlen) {
//stuff the function does...probably not relevant to this question
}
int main() {
    char url[63] = {'\0'};
    char hostname[63] = {'\0'};
    int help = scan_url(url, &hostname, 15);
    return(0);
} 
```

我想通过指向函数scan_url的指针传递char数组“主机名”。但是，当我尝试时，出现以下错误：

> 错误 C2664：“scan_url”：无法将参数 2 从“char (*)[63]”转换为“char *[]”

该错误突出显示了我在此处发布的倒数第三行代码......特别是它强调了函数“scan_url”中的“&”。

这里发生了什么？

编辑：

我的目的是返回在 scan_url 函数中计算的主机名值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:26:24.760

尽管有令人困惑、过度暗示的语法，但`[]`在您的函数参数中并不表示数组，而是表示指针。

因此，当`char url[]`作为函数参数出现时，`url`具有指向字符的指针类型而不是字符数组的类型。

类似地，当`char *hostname[]`作为函数参数出现时，`hostname`具有指向 char 指针的指针的类型，而不是指向 char 的指针数组的类型。

在 C 中，数组永远不会完整地传递给函数，您只能传递指向事物的指针或指向事物数组的指针，但不能传递数组本身。这`[]`只是说“它是一个指针”的另一种方式，使用`[]`而不是的好处`*`是，您可以显示传递指针的意图，而不是指向单个事物，而是传递指向事物的指针，然后是其他事物喜欢它，IOW，一个指向数组元素的指针。

OTOH，如果您有`char something[][10]`作为函数参数，`something`则将具有指向 10 个字符数组的指针类型。第一个`[]`会“衰减”到`*`.

如果您有`char (*something)[10]`作为函数参数，`something`则也将具有指向 10 个字符数组的指针类型。这里没有“衰减” `[]`to`*`因为`something`已经是一个指针。

这几乎就是您在传递时试图推入函数的内容`&hostname`，因为 in是一个 63 个字符的数组`main()`，`hostname`并且`&hostname`是一个指向 63 个字符的数组的指针。

但是，如前所述，`hostname`函数中参数的实际类型是指向 char 指针的指针。

因此，您传递的内容和函数期望的内容是不兼容的，它们具有完全不同的类型：指向 63 个字符数组的指针与指向字符指针的指针。这就是您看到的编译错误的原因。

您可能应该更改`char *hostname[]`为`char hostname[]`或`char *hostname`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:03:47.280

您会收到错误消息，因为它们是根本不同的类型。您的函数需要一个指向指针的指针，但这与您要提供的指向数组的指针不同。

如果要写入提供的字符数组，则只需传递一个普通指针：

```
int scan_url(const char url[], char hostname[], int maxhostlen) {
    strcpy(hostname, "blah");  // or whatever
}

scan_url(url, hostname, 15); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T23:07:21.533

您可以像这样声明 scan_url ：

```
int scan_url(const char url[], char hostname[], int maxhostlen) { 
```

并这样称呼它：

```
int help = scan_url(url, hostname, 15); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T23:07:52.457

通常将指针和数组表示法都指定为函数参数是多余的，因为它们都被视为相同 - 作为指针。将它们结合起来意味着您正在尝试传递一个指针数组，或者更确切地说是一个指向指针的指针。

为了与您的其他声明保持一致，只需取出`*`：

```
int scan_url(const char url[], char hostname[], int maxhostlen) 
```

# optimization - 从一组中快速选择位

> ID：15626446
> 
> 赞同：0
> 
> 时间：2013-03-25T23:02:39.883
> 
> 标签：optimization, language-agnostic, montecarlo

我想从已知的位掩码中选择一些随机位。理想情况下，我也想以随机顺序选择这些位，但该任务可以分为稍后选择和改组。

数据的一些附加特征：

*   位掩码是 64 位长
*   所选位数为 4、8、16 或 32
*   通常会设置 40 到 60 位（总是至少一半）
*   我需要对单个位掩码进行数百万个随机选择（结果用于统计模拟）

这是一个掩码示例和我期望的内容（选择随机 4 位）：

```
mask    0111111011111011111110111111111111111101111111100111101111111111
random4 ....1...........1........1...............1......................
shuffled bit positions: 41, 16, 4, 25 
```

在此示例中，我不应该返回位位置 0，因为它已被禁用。

这是该算法的一个已知热点，所以我想尽可能多地利用它的性能（随机选择的测试只需要比我当前的随机选择实现长约 2 倍的时间）。我目前的想法是用位掩码中设置的位位置填充`n`a 中的第一个数字。`char positions[64]`因此，对于上面的示例，我最终会得到：`[1, 2, 3, 4, 5, 6, 8, 9, ...]`. 然后开始在`0`和之间选择随机数`n`来选择一个随机位位置。每次选择后将位置设置为-1，如果我再次点击-1，则重复随机选择。

这对于选择 4 个数字非常有用，但在选择 32 个数字时会经常重复选择。

另一个想法是创建一个如上所述的位置数组，然后使用 Fisher-Yates 对其进行洗牌并选择第一个`n`位置。这需要在数组中进行更多写入，并且总是需要生成与设置位一样多的随机数，这对于仅选择 4 位可能是一种过度杀伤。

有没有更快的方法来生成这些数据？我的目标是模拟的准确性，所以实际上我可以在一秒钟内检查多少次随机迭代。

语言真的不重要，但我猜 C 将在这里占主导地位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:45:40.483

您不必进行完整的 Fisher-Yates 洗牌。`n`获得第一个值后只需停止即可。您甚至可以将部分改组的数组重新用于下一个样本。这是 C99 中的一个示例：

```
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

// Assumes that the array a contains numbers 0..63 in any order
static void print_random_bits(uint64_t bitmask, int num_bits, int a[64]) {
    for (int i = 0, j = 63; i < num_bits; ++i, --j) {
        int r = rand() % (j + 1);
        int t = a[r];
        if (r != j) {
            a[r] = a[j];
            a[j] = t;
        }
        printf("random bit %2d: %d\n", t, bitmask & (1ULL << t) ? 1 : 0);
    }
}

int main(void) {
    int a[64];

    for (int i = 0; i < 64; ++i) {
        a[i] = i;
    }

    uint64_t bitmask = 0x5555555555555555ULL;

    for (int i = 0; i < 10; ++i) {
        print_random_bits(bitmask, 8, a);
        printf("\n");
    }

    return 0;
} 
```

# perl - 常见的日志格式拆分

> ID：15626447
> 
> 赞同：0
> 
> 时间：2013-03-25T23:02:47.187
> 
> 标签：perl, apache

我试图找出用 perl**分割 CLF 格式行**（apache access.log 文件中的链接）的最快方法。多年来，他们已经积累了数百万。以下是我到目前为止测试过的内容。我的最后一次尝试已经比使用正则表达式更快了。

但是 - 你怎么看 -**有没有办法更快地做到这一点**？

```
1 2 3 4 - - 13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0 200 202
1: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
1.2.3.4 - - 13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0 200 202
2: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
202 200 1.2.3.4 - - 13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0
3: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
1.2.3.4 - - 13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0 200 202
4: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
GET / ..?,-" HTTP/1.0 13/Jun/2007:03:20:15 +0200 1.2.3.4 - - 200 202
5: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0 1.2.3.4 - - 200 202
6: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
---- hit <ENTER> to start Test ----
Benchmark: timing 100000 iterations of Method 1, Method 2, Method 3,
Method 4, Method 5, Method 6...
1: 39 wallclock s(37.64usr + 0.12sys = 37.77CPU) @2647.81/s(n=100000)
2: 39 wallclock s(38.35usr + 0.19sys = 38.53CPU) @2595.18/s(n=100000)
3: 39 wallclock s(37.19usr + 0.14sys = 37.33CPU) @2678.74/s(n=100000)
4: 38 wallclock s(36.80usr + 0.08sys = 36.88CPU) @2711.57/s(n=100000)
5: 38 wallclock s(36.93usr + 0.14sys = 37.07CPU) @2697.89/s(n=100000)
6: 38 wallclock s(36.11usr + 0.16sys = 36.27CPU) @2757.10/s(n=100000) 
```

8X----------------

```
#!/usr/bin/perl -w
use strict;
use warnings;
use FileHandle;
use Date::Parse;
use Benchmark;

STDOUT->autoflush(1); #....................................... autoflush STDOUT

our $s='1.2.3.4 - - [13/Jun/2007:03:20:15 +0200] "GET / ..?,-" HTTP/1.0" 200 202';
our (@T,$host,$timestamp,$request);

print "---- test functionality -----------------------------------\n";

split1(); print join(" ",@T)."\n1: [$host] [$timestamp] [$request]\n";
split2(); print join(" ",@T)."\n2: [$host] [$timestamp] [$request]\n";
split3(); print join(" ",@T)."\n3: [$host] [$timestamp] [$request]\n";
split4(); print join(" ",@T)."\n4: [$host] [$timestamp] [$request]\n";
split5(); print join(" ",@T)."\n5: [$host] [$timestamp] [$request]\n";
split6(); print join(" ",@T)."\n6: [$host] [$timestamp] [$request]\n";

print "---- hit <ENTER> to start Test ----"; <>;

timethese (
  100000,
  {'1' => '&split1',
   '2' => '&split2',
   '3' => '&split3',
   '4' => '&split4',
   '5' => '&split5',
   '6' => '&split6',
  }
);

exit(0);

1;

sub split1
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  @T = $s =~ m/^(\d+)\.(\d+)\.(\d+)\.(\d+) (\S+) (\S+) \[(.+)\] "(\S+) (.*?) (\S+)" (\S+) (\S+)$/;
  #----------------------------------------------------------------------------
  $host=unpack("N",pack("C4",@T));
  $timestamp=str2time($T[6]);
  $request=join(" ",$T[7],$T[8],$T[9]);
}

sub split2
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  @T=split(/ /,$s); 
  splice(@T,5,@T-7,join(" ",@T[5..(@T-3)]));
  splice(@T,3,2   ,join(" ",@T[3..4     ])); 
  chomp($T[6]); $T[3]=substr($T[3],1,-1); $T[4]=substr($T[4],1,-1);
  #----------------------------------------------------------------------------
  $host=unpack("N",pack("C4",split(/\./,$T[0]))); 
  $timestamp=str2time($T[3]);
  $request=$T[4];
}

sub split3
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  my $i; my $x=$s; 
  $i=rindex($x,' ');push(@T,substr($x,$i+1)); $x=substr($x,0,$i);
  $i=rindex($x,' ');push(@T,substr($x,$i+1)); $x=substr($x,0,$i);
  $i=index($x,' ');push(@T,substr($x,0,$i));  $x=substr($x,$i+1,-1);
  $i=index($x,' ');push(@T,substr($x,0,$i));  $x=substr($x,$i+1);
  $i=index($x,' ');push(@T,substr($x,0,$i));  $x=substr($x,$i+2);
  $i=index($x,']');push(@T,substr($x,0,$i));  push(@T,substr($x,$i+3));
  #----------------------------------------------------------------------------
  $host=unpack("N",pack("C4",split(/\./,$T[2])));
  $timestamp=str2time($T[5]);
  $request=$T[6];
}

sub split4
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  my $i; my $x=$s;
  $i=rindex($x,' ');$T[6]=substr($x,$i+1); $x=substr($x,0,$i);
  $i=rindex($x,' ');$T[5]=substr($x,$i+1); $x=substr($x,0,$i);
  $i= index($x,' ');$T[0]=substr($x,0,$i); $x=substr($x,$i+1,-1);
  $i= index($x,' ');$T[1]=substr($x,0,$i); $x=substr($x,$i+1);
  $i= index($x,' ');$T[2]=substr($x,0,$i); $x=substr($x,$i+2);
  $i= index($x,']');$T[3]=substr($x,0,$i); $T[4]=substr($x,$i+3);
  #----------------------------------------------------------------------------
  $host=unpack("N",pack("C4",split(/\./,$T[0])));
  $timestamp=str2time($T[3]);
  $request=$T[4];
}

sub split5
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  my ($i,$j); my $x=$s;
  $i=index($x,'"')+1;
  $j=rindex($x,'"');
  $T[0]=substr($x,$i,$j-$i); 
  my $a=substr($x,0,$i-3);
  $i=rindex($a,'[');
  $T[1]=substr($a,$i+1); $a=substr($a,0,$i-1);
  $x=$a.substr($x,$j+1);
  push(@T,split(/ /,$x));      
  #----------------------------------------------------------------------------
  $request=$T[0];
  $timestamp=str2time($T[1]);
  $host=unpack("N",pack("C4",split(/\./,$T[2])));
}

sub split6
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  my ($i,$j); my $x=$s;
  $i=index($x,'[');
  $j=rindex($x,'"');
  $T[0]=substr($x,$i+1,26);
  $T[1]=substr($x,$i+30,$j-$i-30);
  push(@T,split(/ /,substr($x,0,$i-1).substr($x,$j+1)));
  #----------------------------------------------------------------------------
  $timestamp=str2time($T[0]);
  $request=$T[1];
  $host=unpack("N",pack("C4",split(/\./,$T[2])));
} 
```

8X----------------

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:27:02.583

为了建立在 amon 发现的结果的基础上，str2time 是瓶颈，我（任意）选择进行第一次拆分并使用 str2time 和[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece#Date-Parsing)进行测试，实际上它更快。我还没有完成配置文件以查看延迟是否仍在解析器中（或者现在正在使用 OO 模块）。

```
#!/usr/bin/perl

use strict;
use warnings;

use FileHandle;
use Date::Parse;
use Time::Piece;
use Benchmark;

STDOUT->autoflush(1); #....................................... autoflush STDOUT

our $s='1.2.3.4 - - [13/Jun/2007:03:20:15 +0200] "GET / ..?,-" HTTP/1.0" 200 202';
our (@T,$host,$timestamp,$request);

print "---- test functionality -----------------------------------\n";

parse(); print join(" ",@T)."\n1: [$host] [$timestamp] [$request]\n";
piece(); print join(" ",@T)."\n2: [$host] [$timestamp] [$request]\n";

print "---- hit <ENTER> to start Test ----"; <>;

timethese (
  100000,
  {
   '1' => \&parse,
   '2' => \&piece,
  }
);

exit(0);

1;

sub parse
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  @T = $s =~ m/^(\d+)\.(\d+)\.(\d+)\.(\d+) (\S+) (\S+) \[(.+)\] "(\S+) (.*?) (\S+)" (\S+) (\S+)$/;
  #----------------------------------------------------------------------------
  $host=unpack("N",pack("C4",@T));
  $timestamp=str2time($T[6]);
  $request=join(" ",$T[7],$T[8],$T[9]);
}

sub piece
{ $host='';$timestamp='';$request='';@T=();
  #----------------------------------------------------------------------------
  @T = $s =~ m/^(\d+)\.(\d+)\.(\d+)\.(\d+) (\S+) (\S+) \[(.+)\] "(\S+) (.*?) (\S+)" (\S+) (\S+)$/;
  #----------------------------------------------------------------------------
  $host=unpack("N",pack("C4",@T));
  $timestamp=Time::Piece->strptime($T[6], '%d/%b/%Y:%H:%M:%S %z')->epoch;
  $request=join(" ",$T[7],$T[8],$T[9]);
} 
```

在我供电不足的上网本上，我得到：

```
---- test functionality -----------------------------------
1 2 3 4 - - 13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0 200 202
1: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
1 2 3 4 - - 13/Jun/2007:03:20:15 +0200 GET / ..?,-" HTTP/1.0 200 202
2: [16909060] [1181697615] [GET / ..?,-" HTTP/1.0]
---- hit <ENTER> to start Test ----
Benchmark: timing 100000 iterations of 1, 2...
         1: 29 wallclock secs (27.58 usr +  1.03 sys = 28.61 CPU) @ 3495.28/s (n=100000)
         2: 11 wallclock secs (11.25 usr +  0.00 sys = 11.25 CPU) @ 8888.89/s (n=100000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:48:49.617

最后我发现这种方法使用

*   一个包，拆包替代品
*   一个小哈希和 Time::Local 'timegm_nocheck'

它比第一次尝试快了近 4.5 倍，并且每分钟拆分约 1.000.000 条 CLF 行。通过修改 timegm 功能，它可能会更快。

```
#!/usr/bin/perl -w
use strict;
use warnings;
use Date::Parse;
use Time::Piece;
use Time::Local 'timegm_nocheck';
use Benchmark;

our %midx = ('Jan'=>0,'Feb'=>1,'Mar'=>2,'Apr'=>3,'May'=>4,'Jun'=>5,
             'Jul'=>6,'Aug'=>7,'Sep'=>8,'Oct'=>9,'Nov'=>10,'Dec'=>11);

our $re = qr/\A
            (\d+)\.(\d+)\.(\d+)\.(\d+)
        [ ] (\S+)
        [ ] (\S+)
        [ ] \[(\d+)\/(\S+)\/(\d+):(\d+):(\d+):(\d+) [ ] (\S+)\]
        [ ] "(\S+) [ ] (.*?) [ ] (\S+)"
        [ ] (\S+)
        [ ] (\S+)
            \z/x;

my $s='1.2.3.4 - - [13/Jun/2007:03:20:15 +0200] "GET / ..?,-" HTTP/1.0" 200 202';

print "[".join('],[',split1ST($s))."]\n";
print "[".join('],[',splitCLF($s))."]\n"; 
```

[16909060],[1181697615],[/ ..?,-"],[GET],[HTTP/1.0],[200],[202],[-],[-]

[16909060],[1181697615],[/ ..?,-"],[GET],[HTTP/1.0],[200],[202],[-],[-]

```
print "---- hit <ENTER> to start Test ----"; <>;

timethese (
  1000000,
  { 'split1ST' => '&split1ST($s)',
    'splitCLF' => '&splitCLF($s)',
  }
); 
```

基准测试：对 split1ST、splitCLF 的 1000000 次迭代计时...

split1ST：338 挂钟秒（329.54 usr + 0.30 sys = 329.83 CPU）@ 3031.85/s（n=1000000）

splitCLF：76 挂钟秒（73.79 usr + 0.16 sys = 73.94 CPU）@ 13523.75/s (n=1000000)

=> splitCLF 比第一次尝试快 4.46 倍

```
exit(0);

1;

sub split1ST
{ @T = $s =~ m/^(\d+)\.(\d+)\.(\d+)\.(\d+) (\S+) (\S+) \[(.+)\] "(\S+) (.*?) (\S+)" (\S+) (\S+)$/;
  return ( unpack("N",pack("C4",@T)), #.............................. host-IPv4
           str2time($7), #........................................... timestamp
           $9,$8,$10,$11,$12,$5,$6)  # request,method,pro,sta,bytes,authusr,usr
}

sub splitCLF 
{ shift =~ $re;
  return ( ((((($1<<8)|$2)<<8)|$3)<<8)|$4, #......................... host-IPv4 
           Time::Local::timegm_nocheck($12,$11,$10,$7,$midx{$8},$9)-$13*36, #ts
           $15,$14,$16,$17,$18,$5,$6) #request,method,pro,sta,bytes,authusr,usr
}

1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:34:41.933

我花了一个小时摆弄正则表达式，把我的头包裹在`splice`s 和`substr`恐怖，甚至一些 C 代码上。然后，我做了一件至关重要的事情：

```
# set the benchmark iterations down to ~ 1E4
$ perl -d:NYTProf the-script.pl
$ nytprofhtml
# open ./nytprof/index.html in browser 
```

我*分析*了代码（使用[Devel::NYTProf](https://metacpan.org/module/Devel%3a%3aNYTProf)）。不足为奇：解析字符串只用了很少的时间。正则表达式应用程序`split1`总共花费了大约 144 毫秒。然而，日期解析在`str2time`. 这几乎是 1:25 的关系！

### 结论：

> 过早的优化是万恶之源。– *D. 克努斯*

使用一个很好的、可读的正则表达式，比如

```
my $split1_1_regex = qr/\A
        (\d+)\.(\d+)\.(\d+)\.(\d+)
    [ ] (\S+)
    [ ] (\S+)
    [ ] \[( [^\]]+ )\]
    [ ] "(\S+ [ ] .*? [ ] \S+)"
    [ ] (\S+)
    [ ] (\S+)
\z/x; 
```

它的执行速度与您的 (r)index/substr 恐怖一样快，但在一定程度上是自记录的，而且肯定更容易调试。这与干净、惯用的 Perl 可能是最快的 Perl 的经验一致。

然后，您可以选择要么接受`str2time`缓慢，要么尝试优化它。如果您管理可证明的加速，您可能需要考虑向[上游](https://github.com/gbarr/perl-TimeDate)发送补丁。您还可以尝试使用其他库，或编写`str2time`针对您的特殊用例进行优化的自己的函数。

# java - 正则表达式在 Java 中无法按预期工作

> ID：15626448
> 
> 赞同：2
> 
> 时间：2013-03-25T23:02:52.507
> 
> 标签：java, regex

我正在使用在 RegexBuddy 中有效但在 Java 中无效的正则表达式。

这是我的正则表达式：`(?<=(files)\\s)(.*)`

这是我正在测试的字符串：`"–files /root1/file1.dat;/root/file2.txt"`

在 RegexBuddy 中它返回：`"/root1/file1.dat;/root/file2.txt"`但在 Java 中它只返回文字 word `files`。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:05:06.800

试试这个正则表达式：

```
(?<=files\\s)(.*) 
```

**编辑**添加说明

我猜你正在服用`group(1)`

你的正则表达式：`(?<=(files)\\s)(.*)`有三个匹配组：

```
group 0:/root1/file1.dat;/root/file2.txt
group 1:files
group 2:/root1/file1.dat;/root/file2.txt 
```

我的：`(?<=files\\s)(.*)`有两个：

```
group 0:/root1/file1.dat;/root/file2.txt
group 1:/root1/file1.dat;/root/file2.txt 
```

后面的组实际上是没有必要的，如果你想得到'/root1.....$'，你就不必分组`(.*)`，`group(2)`

```
(?<=files\\s).* 
```

将完成这项工作。

无论如何，如果你想坚持你的正则表达式，采取`group(2)`

我希望解释清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:21:39.777

奇怪，我正在运行它，如果我把括号放在文件周围，我看不出有什么区别。后视中的括号没有任何区别。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class regex
{
    public static void main(String[] args)
    {

        String s = "-files /root1/file1.dat;/root/file2.txt";
        Pattern p = Pattern.compile("(?<=-(files)\\s)(.*)");
        Matcher m = p.matcher(s);
        System.out.println(m.find());
        System.out.println(m.group());
    }
} 
```

请注意，如果您尝试像这样解析命令行参数，那么这可能是一个坏主意，因为您会遇到（可能）与其他参数重叠的问题。那么“-docs freds-files -files blah.txt”之类的情况呢？

# javascript - 在非 IE 浏览器中使用 window.open 打开的居中对齐窗口

> ID：15626449
> 
> 赞同：1
> 
> 时间：2013-03-25T23:02:52.773
> 
> 标签：javascript, html, css

我正在使用 window.open 打开一个新页面，我发现我只能使用以下代码在 IE 中将其水平居中。它会愉快地在 Chrome、Firefox 和 Safari 中垂直居中，但仅此而已。关于可能导致这种情况的任何想法？

```
var left = Number((screen.width/2)-(700/2));
var top = Number((screen.height/2)-(500/2));

var windowFeatures = 'channelmode=0,directories=0,fullscreen=0,location=0,menubar=0,resizable=0,scrollbars=0,status=0,width=700,height=500,top='+top+'left='+left;
window.open('access-modal.html', '', windowFeatures); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:35:44.187

`left`里面的声明前缺少逗号`windowFeatures`：

```
var left = Number((screen.width / 2) - (700 / 2));
var top = Number((screen.height / 2) - (500 / 2));

var windowFeatures = 'channelmode=0,directories=0,fullscreen=0,location=0,menubar=0,resizable=0,scrollbars=0,status=0,width=700,height=500,top=' + top + ',left=' + left;
window.open('access-modal.html', '', windowFeatures); 
```

# javascript - 带着阿贾克斯回归

> ID：15626451
> 
> 赞同：-2
> 
> 时间：2013-03-25T23:03:02.830
> 
> 标签：javascript, jquery, ajax

我试图用ajax返回一个成功和失败的值，但它只返回未定义的。这是我的脚本

```
function loginCheck(email, password, id){
    $.get("inc/ajax/login_check.php",
        {email:email, password:password},
        function(html){
            if(html == 0){
                return 0;
            }
            else{
                return 1;
            }
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:07:16.417

请，请，请不要使用 GET 作为用户和密码的方法，从安全角度来看，这是一个糟糕的主意。

话虽如此，对于您的问题：
$.get 是 $ajax 的简写。有时，在对象中声明数据的引用是一种更好的做法，这样可以确保它被正确发送。尝试使用具有完整正确语法的 $ajax，如下所示：

```
$.ajax({
url: url,
data: data,
success: success,
dataType: dataType
}); 
```

例子：

```
$.ajax({
type: "POST",
url: "some.php",
data: { name: "John", location: "Boston" }
}).success(function( msg ) {
alert( "Data Saved: " + msg );
}); 
```

完整文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# eclipse - Eclipse Gradle 插件：像 Maven 一样自动添加依赖项

> ID：15626453
> 
> 赞同：4
> 
> 时间：2013-03-25T23:03:13.213
> 
> 标签：eclipse, maven, gradle

我读到 Gradle 结合了 Maven 和 Ant 的优点，所以我正在尝试。

我已经根据 Gradle 网页为 Eclipse 安装了最好的集成 Gradle 插件。它是 SpringSource STS 团队制作的插件。只需安装此插件，我就可以轻松创建“新项目 - > Gradle 项目”。

**使用插件 m2e，一个用于 Eclipse 的 Maven 插件，自动搜索和添加依赖项很容易。是否可以对 Gradle 做同样的事情？如何？**

先感谢您 ：）

卡洛斯

更新：按照我在博客中写的说明，在 Eclipse 中安装和配置 Gradle 非常容易：http: [//estiloasertivo.blogspot.com.es/2013/03/tutorial-howto-install-and-configure.html](http://estiloasertivo.blogspot.com.es/2013/03/tutorial-howto-install-and-configure.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T23:30:37.093

Eclipse Gradle 工具还不支持自动搜索和添加依赖项。我推荐使用[http://search.maven.org](http://search.maven.org)找到要添加的依赖项，然后将“Grails”下列出的依赖项信息复制到`dependencies`构建脚本的块中。

# android - 修改Android中远程布局的背景drawable

> ID：15626455
> 
> 赞同：0
> 
> 时间：2013-03-25T23:03:19.053
> 
> 标签：android, android-layout, android-widget, drawable, remoteview

我有一个带有可绘制背景的小部件布局：

```
<RelativeLayout
    android:id="@+id/basic_widget_layout"
    android:background="@drawable/basic_widget_style_2"
    android:clickable="true" > 
```

`@drawable/basic_widget_style_2`是两个形状的图层列表。

我还有一个配置活动，它显示我的小部件预览以进行实时调整：

```
<include android:id="@+id/preview_include"
         layout="@layout/basic_widget_layout" /> 
```

我正在尝试`@drawable/basic_widget_style_2`通过我的配置活动以编程方式进行调整，并在`@+id/preview_include`.

在我的配置活动中，我有启动我的特定 appWidgetId，所以我的问题是 - 是否有可能获取`@drawable/basic_widget_style_2`属于启动我的活动的小部件的方法？

此外，如何使`<include>`-ed 布局背景可绘制对象无效？似乎无论我做什么，布局都保持静态（尝试使用 invalidate()、refreshDrawable() 和我见过的更多技巧）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T09:21:46.123

我无法理解您到底想在背景可绘制对象中更改什么。

为了获得 View 的可绘制形状，您需要为包含形状的项目分配一个 id，然后执行以下操作：

```
//change the color to the specific needed
LayerDrawable preview_include = (LayerDrawable)(this.findViewByID(R.id.preview_include)).getBackground();
final GradientDrawable preview_include_shape = (GradientDrawable)   include.findDrawableByLayerId(R.id.rectange); 
```

例如，如果要更改形状的颜色，请执行以下操作：

```
 preview_include_shape.setColor(getResources().getColor(getResId("white", R.color.class))); 
```

具有形状的 XML Drawable 可能如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<!-- Up 2dp Shadow -->
<item >
    <shape  android:shape="rectangle">

        <solid android:color="@color/shadow" />
         <corners 
          android:radius="3dp"
             />
    </shape>
</item>

<!-- A rectange -->
<item android:top="3px" android:id="@+id/rectange">
    <shape android:shape="rectangle">
        <corners 
            android:topLeftRadius="3dp"
            android:topRightRadius="3dp"
            android:bottomLeftRadius="3dp"
            android:bottomRightRadius="3dp"/>
            <solid android:color="@color/black"
                    />
    </shape>
</item> 
```

# javascript - 调整 iframe Internet Explorer 9 的大小

> ID：15626466
> 
> 赞同：2
> 
> 时间：2013-03-25T23:04:16.623
> 
> 标签：javascript, html, iframe, resize, internet-explorer-9

试图创建一个函数来重新调整 iframe 的大小`window.onload`。

以下适用于 Fire Fox，但不适用于 IE 9。搜索后，我尝试了其他一些示例，但它们弄乱了 Fire Fox 的重新调整大小，并且没有修复 IE 9 的重新调整大小。

有什么建议么？

```
<script type="text/javascript" language="javascript">
  function sizeFrame() {
    var frames = document.getElementsByTagName('iframe'); 
    for (var i = 0; i < frames.length; i++){ 
      var fID     = frames[i].id; 
      var F       = document.getElementById(fID);

      if(F.contentDocument && F.contentDocument.documentElement.scrollHeight) {
        F.height = F.contentDocument.documentElement.scrollHeight+30; //FF 3.0.11, Opera 9.63, and Chrome

      } else if(F.contentDocument && F.contentDocument.documentElement.offsetHeight) {
        F.height = F.contentDocument.documentElement.offsetHeight+30; //standards compliant syntax – ie8

      } else {
        F.height = F.contentWindow.document.body.scrollHeight+30; //IE6, IE7 and Chrome
      }
    }
  }

  window.onload=sizeFrame; 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T20:55:57.083

我想如果你刚刚

```
F.contentWindow.document.body.offsetHeight+30; 
```

而不是你目前拥有的三个测试，它对你来说会更好。

# python - SQLAlchemy 无法连接到 mssql 数据库

> ID：15626467
> 
> 赞同：31
> 
> 时间：2013-03-25T23:04:17.250
> 
> 标签：python, sql-server, sqlalchemy

这是我的简单测试脚本。只是尝试做一个基本的选择语句。在教程中找到了基本位。

```
from sqlalchemy import *

db = create_engine('mssql+pyodbc://user:pass@ip_address/database_name')    

db.echo = True 
metadata = MetaData(db)

users = Table('member', metadata, autoload=True)

def run(stmt):
    rs = stmt.execute()
    for row in rs:
        print row

s = users.select(users.c.fname == 'Bill')
run(s) 
```

经过一个小时的搜索并尝试了一些解决方案，我并没有比开始时更接近解决它。希望我只是在某个地方犯了一个简单的错误，但我找不到它......

这是我得到的错误

```
sqlalchemy.exc.DBAPIError: (Error) ('IM002', '[IM002] [unixODBC][Driver Manager]Data source name not found, and no default driver specified (0) (SQLDriverConnect)') None None 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-25T23:58:17.997

如果未在 URL 中指定，则`mssql+pyodbc`方言的默认驱动程序将是“SQL Server”[1]。这意味着您需要在 /etc/unixODBC/odbcinst.ini 中有一个如下所示的部分：

```
[SQL Server]
Driver=/path/to/library.so 
```

它在 Windows 上“自动”工作，因为如果您打开*Administrator Tools* -> *Data Sources (ODBC)*，您很可能会在*Drivers*选项卡下找到一个名为“SQL Server”的条目。

在 Linux 上，您可以使用 FreeTDS 驱动程序，也可以使用 Microsoft 的官方驱动程序（我推荐这个）。

安装驱动程序后，您应该在 /etc/unixODBC/odbcinst.ini 中有这样的内容：

```
[FreeTDS]
Driver=/usr/lib/libtdsodbc.so
Threading=1

[ODBC Driver 11 for SQL Server]
Description=Microsoft ODBC Driver 11 for SQL Server
Driver=/opt/microsoft/msodbcsql/lib64/libmsodbcsql-11.0.so.2270.0
Threading=1
UsageCount=1 
```

然后，您只需向`driver`URL 添加一个查询字符串参数，其值与部分名称匹配。

带有 FreeTDS 的示例 URL：

```
mssql+pyodbc://user:pass@ip_address/database_name?driver=FreeTDS 
```

带有官方驱动程序的示例 URL：

```
mssql+pyodbc://user:pass@ip_address/database_name?driver=ODBC+Driver+11+for+SQL+Server 
```

[1] [https://bitbucket.org/sqlalchemy/sqlalchemy/src/aa3a8f016f3e4396d125b18b0510abdf72aa8af2/lib/sqlalchemy/dialects/mssql/pyodbc.py?at=default#cl-236](https://bitbucket.org/sqlalchemy/sqlalchemy/src/aa3a8f016f3e4396d125b18b0510abdf72aa8af2/lib/sqlalchemy/dialects/mssql/pyodbc.py?at=default#cl-236)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:12:00.537

您收到的错误可能表明没有名为 IM002 的 DSN 设置。您是否尝试过直接测试 ODBC 连接以验证其设置是否正确？您是否安装了适当的 Microsoft SQL Server 数据库驱动程序？

# class - Python：类实例化

> ID：15626474
> 
> 赞同：0
> 
> 时间：2013-03-25T23:05:02.630
> 
> 标签：class, python-2.7

我希望能够打开这样的文件：

> 42.65 42.75
> 
> -72.85 -72.75
> 
> TW52 42.73 -72.84 2.1
> 
> TW98 42.727 -72.81 2.9
> 
> TW2a 42.688 -72.82 1.1
> 
> CT4b 42.715 -72.78 2.4
> 
> CT5c 42.682 -72.779 2.41

我想使用一个类来做到这一点，但我不确定我会如何处理它......到目前为止我有这个

```
class Homework:

    fname = raw_input("Enter the name of the input file ==> ")
    in_file = open(fname, "r")

    def __init__(self, in_file):
            self.in_file[0] = pID
            self.in_file[1] = latitude
            self.in_file[2] = longitude
            self.in_file[3] = distance

    def displayFile(self):
        print self.in_file[0], self.in_file[1], self.in_file[2], self.in_file[3]

x = Homework()
print x.displayFile() 
```

前两行，我希望能够将它们存储在某个地方以供以后使用，然后将其余部分存储为 pID、纬度、经度和距离。

我希望能够将第 0 个索引：TW52 存储到 pID 之类的对象并存储第一个索引：42.73 到纬度，-72.84 到经度，2.1 到距离。我怎么能做到这一点？我收到错误消息，它告诉我当只给出 1 个参数时， **init正好需要 2 个参数！**任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:08:42.350

您的错误说`__init__`需要两个参数，但您只给了它一个（`self`自动传递）。`in_file`你从来没有为参数传递任何东西：

```
in_file = open(filename, "r")

x = Homework(in_file)
x.displayFile()

in_file.close() 
```

我建议您在开始上课之前通读 Python 教程。您似乎在向后分配变量。

# c# - 列表框中 Remove 和 RemoveAt 的区别

> ID：15626485
> 
> 赞同：-2
> 
> 时间：2013-03-25T23:05:48.820
> 
> 标签：c#, listbox

`Remove`& `RemoveAt`in和有什么不一样**`ListBox`**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:30:37.080

好吧，首先，如果你有一个`ListBox listBox;`，那么`listBox`没有方法`Remove`或`RemoveAt`。它会是`listBox.Items.Remove(...)`或`listBox.Items.RemoveAt(...)`。我在这里假设您使用的是`ListBox`in `System.Windows.Forms`。

`Remove`现在，和之间的区别在于`RemoveAt`一个需要从列表**中删除的项目，****另一个需要一个索引**。

为了更清楚，让我们创建一个`List<int> list = new List<int>(new int[] { 10, 20, 30, 40 });`. 由于**C# 中的所有内容都是从零开始的**，因此列表中索引 0 处`10`的值是 ，索引 1 处的值是`20`，等等。

`List`s，就像`ObjectCollection`s 一样，拥有`Remove`和`RemoveAt`方法。在我们的简单列表的情况下，调用`list.Remove(20);`将删除`20`它在列表中找到的第一个出现。`list`将与被删除后`{ 10, 30, 40 }`的元素一起结束。`20`

如果我们不调用`Remove`on `list`，而是调用`list.RemoveAt(1);`，它会对列表做同样的事情。我们正在删除索引*处*`1`的列表元素：在这种情况下，`20`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-05T11:42:46.203

我正在计算 RemoveAt 和 Remove 函数之间的差异。查看以下代码段：

```
 {
           while(ShowListBox.Items.Count != 0)
           {

               for(int i = 0; i < ShowListBox.Items.Count; i++)
               {
                   ShowListBox.Items.Remove(ShowListBox.Items[i].ToString());
               }
               while (ShowListBox.Items.Count > 0)
               {
                   ShowListBox.Items.RemoveAt(0);
               }

           }

       } 
```

在上面的代码中，所有数据都被删除（列表框中的文本、数字和任何符号）

当使用 Remove 函数来 RemoveAt 时，这会失败。

# clearcase - ClearCase - 是否可以在不合并的情况下在集成分支中查看新文件？

> ID：15626490
> 
> 赞同：1
> 
> 时间：2013-03-25T23:06:05.723
> 
> 标签：clearcase

我对使用 ClearCase 还是很陌生，所以如果这个问题（因为缺乏更好的术语）愚蠢，请原谅。

我尝试先搜索，但在描述/查找有关它的信息时遇到了麻烦（遮蔽和黯然失色并不是我想要的）。

问题很简单： **是否可以设置我的配置规范，这样当我设置到我的视图和我的分支中时，我可以从集成分支中看到新文件？**

我发现经常需要手动“合并”到我的分支中才能使用/查看其他开发人员提交的任何新文件，这似乎很麻烦。

这是分支结构

```
MAIN -- release_integration -- projA_release... -- <<specific work_tix branches>> 
```

我使用的配置规范

```
 element * CHECKEDOUT
 element * .../work_tix_12345/LATEST
 element * .../projA_release_integration/LATEST
 element * .../projA_release_integration/LATEST -mkbranch work_tix_12345
 element * .../release_integration/LATEST -mkbranch projA
 element * /main/LATEST -mkbranch release_integration
 ##element * .../release_integration/LATEST
 element * /main/LATEST 
```

**更新：** 手动合并“向下”的示例。查看合并回`work_tix_2`分支。否则，我看不到从`work_tix_3`.

![在此处输入图像描述](../Images/2c23fd28ada06cb81250c52a775e71b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:51:28.957

*来自集成 (`release_integration`或`projA_release_integration`)的*新*`work_tix_12345`文件在分支中还没有版本。*

 *考虑到您的配置规范，这意味着您应该在创建这些版本时立即看到它们。

如果您正在讨论集成分支中的新*版本*，对于*已经*在 中修改的文件`work_tix_12345`，那么是的，您不会立即看到这些版本。
A[`cleartool findmerge -print`](https://stackoverflow.com/questions/2730294/clearcase-findmerge-usage/2730665#2730665)会让您知道是否有新版本需要考虑。*

# mysql - LEFT JOIN 仅第一行

> ID：15626493
> 
> 赞同：175
> 
> 时间：2013-03-25T23:06:12.107
> 
> 标签：mysql, join, left-join, groupwise-maximum

我读了很多关于只获取左连接的第一行的帖子，但是，由于某种原因，这对我不起作用。

这是我的结构（当然是简化的）

**饲料**

```
id |  title | content
----------------------
1  | Feed 1 | ... 
```

**艺术家**

```
artist_id | artist_name
-----------------------
1         | Artist 1
2         | Artist 2 
```

**feeds_artists**

```
rel_id | artist_id | feed_id
----------------------------
1      |     1     |    1 
2      |     2     |    1 
... 
```

现在我想获取文章并只加入第一个艺术家，我想到了这样的事情：

```
SELECT *
    FROM feeds 
    LEFT JOIN feeds_artists ON wp_feeds.id = (
        SELECT feeds_artists.feed_id FROM feeds_artists
        WHERE feeds_artists.feed_id = feeds.id 
    LIMIT 1
    )
WHERE feeds.id = '13815' 
```

只是为了获得 feeds_artists 的第一行，但这已经不起作用了。

`TOP`由于我的数据库，我无法使用，我无法对结果进行分组，`feeds_artists.artist_id`因为我需要按日期对它们进行排序（我通过这种方式对它们进行分组得到了结果，但结果不是最新的）

也尝试了 OUTER APPLY - 也没有成功。老实说，我真的无法想象这些行中发生了什么——这可能是我无法让它工作的最大原因。

解决方案：

```
SELECT *
FROM feeds f
LEFT JOIN artists a ON a.artist_id = (
    SELECT artist_id
    FROM feeds_artists fa 
    WHERE fa.feed_id = f.id
    LIMIT 1
)
WHERE f.id = '13815' 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-25T23:10:07.093

如果您可以假设艺术家 ID 随着时间的推移而增加，那么`MIN(artist_id)`将是最早的。

所以尝试这样的事情（未经测试......）

```
SELECT *
  FROM feeds f
  LEFT JOIN artists a ON a.artist_id = (
    SELECT
      MIN(fa.artist_id) a_id
    FROM feeds_artists fa 
    WHERE fa.feed_id = f.feed_id
  ) a 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-12-12T11:47:24.850

没有子选择的版本：

```
 SELECT f.title,
          f.content,
          MIN(a.artist_name) artist_name
     FROM feeds f
LEFT JOIN feeds_artists fa ON fa.feed_id = f.id
LEFT JOIN artists a ON fa.artist_id = a.artist_id
 GROUP BY f.id 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2019-01-17T09:59:54.453

@Matt Dodges 的回答让我走上了正轨。再次感谢所有答案，同时帮助了很多人。让它像这样工作：

```
SELECT *
FROM feeds f
LEFT JOIN artists a ON a.artist_id = (
    SELECT artist_id
    FROM feeds_artists fa 
    WHERE fa.feed_id = f.id
    LIMIT 1
)
WHERE f.id = '13815' 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-04-30T11:24:38.997

基于这里的几个答案，我发现了一些对我有用的东西，我想概括并解释正在发生的事情。

兑换：

```
LEFT JOIN table2 t2 ON (t2.thing = t1.thing) 
```

至：

```
LEFT JOIN table2 t2 ON (t2.p_key = (SELECT MIN(t2_.p_key) 
    FROM table2 t2_ WHERE (t2_.thing = t1.thing) LIMIT 1)) 
```

连接 t1 和 t2 的条件从`ON`and 移到内部查询`WHERE`中。`MIN(primary key)`or`LIMIT 1`确保内部查询只返回 1 行。

选择一个特定行后，我们需要告诉`ON`它是哪一行。这就是为什么`ON`要比较连接表的主键。

您可以使用内部查询（即 order+limit），但它必须返回所需行的一个主键，该主键将告诉`ON`要加入的确切行。

**更新 - 适用于 MySQL 5.7+**

与 MySQL 5.7+ 相关的另一个选项是使用`ANY_VALUE`+ `GROUP BY`。它将选择一个不一定是第一个的艺术家姓名。

```
SELECT feeds.*,ANY_VALUE(feeds_artists.name) artist_name
    FROM feeds 
    LEFT JOIN feeds_artists ON feeds.id = feeds_artists.feed_id 
GROUP BY feeds.id 
```

有关 ANY_VALUE 的更多信息：[https ://dev.mysql.com/doc/refman/5.7/en/group-by-handling.html](https://dev.mysql.com/doc/refman/5.7/en/group-by-handling.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-09T14:11:45.437

我用过别的东西（我觉得更好......）并想分享它：

我创建了一个具有“组”子句的 VIEW

```
CREATE VIEW vCountries AS SELECT * PROVINCES GROUP BY country_code

SELECT * FROM client INNER JOIN vCountries on client_province = province_id 
```

我想说的是，我认为我们需要做这个解决方案，因为我们在分析中做错了什么......至少在我的情况下......但有时这样做更便宜重新设计一切......

我希望它有帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-17T20:06:11.570

我想给出一个更*笼统的答案*。*当您只想选择 LEFT JOIN 中的第一项时*，可以处理任何情况。

您可以使用 GROUP_CONCATS 的子查询（也已排序！），然后只需拆分 GROUP_CONCAT 的结果并仅获取其第一项，就像这样...

```
LEFT JOIN Person ON Person.id = (
    SELECT SUBSTRING_INDEX(
        GROUP_CONCAT(FirstName ORDER BY FirstName DESC SEPARATOR "_" ), '_', 1)
    ) FROM Person
); 
```

由于我们将*DESC*作为我们的*ORDER BY*选项，因此这将为像“Zack”这样的人返回一个 Person id。如果我们想要一个名字像“Andy”的人，我们会将*ORDER BY FirstName DESC*更改为*ORDER BY FirstName ASC*。

这是灵活的，因为这将订购的权力完全掌握在您的手中。但是，经过大量测试，它在用户和数据量很大的情况下*无法很好地扩展。*

但是，它在为管理员运行数据密集型报告时很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-24T10:52:51.183

这是我使用 group by 子句的答案。

```
SELECT *
FROM feeds f
LEFT JOIN 
(
    SELECT artist_id, feed_id
    FROM feeds_artists
    GROUP BY artist_id, feed_id 
) fa ON fa.feed_id = f.id
LEFT JOIN artists a ON a.artist_id = fa.artist_id 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-25T17:11:55.650

对于像 DB2 和 PostgreSQL 这样的数据库，您必须使用关键字`LATERAL`来指定子查询`LEFT JOIN`：（*这里是针对 DB2）*

```
SELECT f.*, a.*
FROM feeds f
LEFT JOIN LATERAL  
(
    SELECT artist_id, feed_id
    FROM feeds_artists sfa
    WHERE sfa.feed_id = f.id
    fetch first 1 rows only
) fa ON fa.feed_id = f.id
LEFT JOIN artists a ON a.artist_id = fa.artist_id 
```

# mongodb - 用于更新/插入字段的 Mongo 索引

> ID：15626495
> 
> 赞同：0
> 
> 时间：2013-03-25T23:06:44.357
> 
> 标签：mongodb

我正在尝试为集合中的所有文档插入一个新字段。我在“user_id”字段上有一个升序索引。

a) 为了从索引中受益，被更新/插入的字段是否应该被索引包含/转换？b）此外，鉴于我不执行任何范围操作，哈希索引在这种情况下是否更高效。

```
db.collA.update(  { user_id: 123 }
                , { $set : { newfield : "something" } }
                , { multi:true} ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:25:34.733

回答问题的 A 部分：不。插入或更新现有文档的索引属性实际上会导致索引的性能问题。如果您打算大批量执行此操作，您可能应该在操作后重新索引或修复。

B 部分：不。标准索引类型很好地涵盖了这个用例。如果“user_id”确实标识了一个文档，您可以考虑将其设为文档的“_id”，但是，这是一个有点高级的设计决策，并且对集合有影响（正面和负面）。

# python - Python - 获取文件使用的总字节数

> ID：15626498
> 
> 赞同：0
> 
> 时间：2013-03-25T23:06:48.247
> 
> 标签：python, file, filesize, filenotfoundexception

我正在尝试获取所有文件使用的字节总数。

到目前为止，我得到的是以下内容。

```
 def getSize(self):
    totalsize = 0
    size = 0
    for root, dirs, files in os.walk(r'C:\\'):
        for files in files:
            size = os.stat(files).st_size
    totalsize = totalsize + size 
```

但是，运行这个时，弹出如下错误*FileNotFoundError: [WinError 2] The system cannot find the file specified: 'hiberfil.sys'*

有谁知道我如何解决这个错误并正确计算磁盘上的总字节数？

编辑：在看了这个之后，我想出了下面的代码。

```
def getSize():
    print("Getting total system bytes")
    data = 0
    for root, dirs, files in os.walk(r'C:\\'):
        for name in files:
            data = data + getsize(join(root, name))
    print("Total system bytes", data) 
```

但是我现在收到以下错误。*PermissionError：[WinError 5] 访问被拒绝：'C:\\ProgramData\Microsoft\Microsoft Antimalware\Scans\History\CacheManager\MpScanCache-1.bin'*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:26:12.330

这可能会有所帮助：

```
import os
import os.path

def getSize(path):
    totalsize,filecnt = 0,0
    for root, dirs, files in os.walk(path): 
        for file in files:
            tgt=os.path.join(root,file)
            if os.path.exists(tgt): 
                size = os.stat(tgt).st_size
                totalsize = totalsize + size
                filecnt+=1
    return totalsize,filecnt

print '{:,} bytes in {:,} files'.format(*getSize('/Users/droid')) 
```

印刷：

```
110,058,100,086 bytes in 449,723 files 
```

或者，如果是权限错误，请使用以下命令：

```
 try:
                size = os.stat(tgt).st_size
                totalsize = totalsize + size
                filecnt+=1
            except (#Permission Error type...): 
                continue 
```

# php - 如何使用 PHP 使用从 ASP.net 返回的 WebService 数据表

> ID：15626500
> 
> 赞同：0
> 
> 时间：2013-03-25T23:06:53.603
> 
> 标签：php, asp.net, web-services, datatable

我想知道，如何正确“使用”在 ASP.net WebService 方法中返回的**DataTable 。**

我处理这个例子：

**ASP.net 网络服务：**

```
[WebMethod]
public DataTable searchDatabase(string search)
{

    SqlConnection conn = null;
    SqlDataReader rdr = null;
    conn = new
                    SqlConnection("Data Source=ASUSX301A\\MSSQLINSTANCE;Initial Catalog=db_sp_vaje;Integrated Security=True;Pooling=False");
    conn.Open();

    // 1\.  create a command object identifying
    //     the stored procedure
    SqlCommand cmd = new SqlCommand(
        "dbo.sp_iskanje", conn); //here is my stored procedure which works 100%

    // 2\. set the command object so it knows
    //    to execute a stored procedure
    cmd.CommandType = CommandType.StoredProcedure;

    // 3\. add parameter to command, which
    //    will be passed to the stored procedure
    cmd.Parameters.Add(
        new SqlParameter("@myInput", search));

    // execute the command
    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = cmd;
    DataTable dt = new DataTable();
    dt.TableName = "oglasi";
    dt.WriteXml(@"path", true);
    da.Fill(dt);

    // iterate through results, printing each to console

    return dt; 
} 
```

如果我在 ASP.net 中调用这个 web 服务也可以正常工作，我会从带有循环的数据表中得到结果。

**现在如何从 web 服务中获取可以在 PHP 中显示/回显的数据表？**

到目前为止，我的 PHP 文件中有这个：（顺便说一句：如果我在 PHP 中从 ASP.net 调用默认的 HelloWorld() webservice 方法效果很好）

```
$client = new SoapClient("http://localhost:10994/WebService.asmx?WSDL");
$params->Param1 = "car"; //this is search variable
$result = $client->searchDatabase($params)->searchDatabaseResult;

print_r ($result); 
```

结果是： ![php错误](../Images/9f2dcac84e8eaf362a078fa4f48576fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T07:44:06.173

你试过这个：

```
$params->search = "car"; //this is search variable 
```

它对我来说很好，但我不知道如何使用行和列:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T05:10:12.627

我尝试了这样的事情并且工作正常。

```
$client = new SoapClient("http://localhost/WebService.asmx?WSDL");
$result = $client->__soapCall("functionName", array($SoapCallParameters));

var_dump($result->functionNameResult); 
```

# iphone - 为什么宏中的条件语句在 IOS 中对习语不起作用？

> ID：15626501
> 
> 赞同：0
> 
> 时间：2013-03-25T23:06:57.090
> 
> 标签：iphone, ios, ipad, user-interface

我想为 iPhone 4、iPhone 5 和 iPad 编写一个通用应用程序。

首先，我为 iPad 开发代码。现在我想把它移植到其他设备上。

我在文件的顶部写了该代码。当我调试时，我发现它永远不会进入第二个条件。尽管设备是 iPhone4，但它始终采用 IS_IPAD 条件的值。

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
#define IS_IPHONE_5 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 568.0f)
#define IS_IPHONE_4 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 480.0f)
#ifdef IS_IPAD
#define CELL_WIDTH 180
#define CELL_HEIGHT 123
#define CONTAINER_WIDTH 950
#define NUM_OF_ITEMS_IN_ROW 4
#define CONTAINER_LEFT_MARGIN 50
#define CONTAINER_TOP_MARGIN 70
#define CONTAINER_OUTER_TOP_MARGIN 0
#define CONTAINER_OUTER_LEFT_MARGIN 0
#define CELL_PADDING_RIGHT 32
#define CELL_PADDING_BOTTOM 20
#define MIN_CONTAINER_HEIGHT 450
#elif IS_IPHONE_4
#define IPAD_TO_IPHONE4 0.3
#define CELL_WIDTH 180 * IPAD_TO_IPHONE4
#define CELL_HEIGHT 123 * IPAD_TO_IPHONE4
#define CONTAINER_WIDTH 950 * IPAD_TO_IPHONE4
#define NUM_OF_ITEMS_IN_ROW 4
#define CONTAINER_LEFT_MARGIN 50 * IPAD_TO_IPHONE4
#define CONTAINER_TOP_MARGIN (70 * 0.3)
#define CONTAINER_OUTER_TOP_MARGIN 0 * IPAD_TO_IPHONE4
#define CONTAINER_OUTER_LEFT_MARGIN 0 * IPAD_TO_IPHONE4
#define CELL_PADDING_RIGHT 32 * IPAD_TO_IPHONE4
#define CELL_PADDING_BOTTOM 20 * IPAD_TO_IPHONE4
#define MIN_CONTAINER_HEIGHT 450 * IPAD_TO_IPHONE4
#endif 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:20:58.413

你在这里使用编译时检查。当预处理器到达这一行时

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
```

之后，`IS_IPAD`总是**被**定义。它的作用是告诉预处理器，任何时候它`IS_IPAD`在代码中看到，它都应该用`(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)`. *它不执行该代码*，它只是用另一段文本替换一段文本。

这对于**运行时**检查来说很好，这意味着您可以在代码中执行以下操作：

```
if (IS_IPAD) {
    ...do something iPad-specific
} 
```

但是预处理器检查**总是**如此，因为`#if IS_IPAD`和`#ifdef IS_IPAD`是在代码编译之前发生的预处理器检查 - 也就是说，它们在编译期间在您的 Mac 上运行，而不是在应用程序运行时在您的设备上运行。**`#if``#ifdef`**

# android - 没有用户设置 minfree 值来运行它，应用程序不会运行？

> ID：15626512
> 
> 赞同：0
> 
> 时间：2013-03-25T23:08:14.407
> 
> 标签：android

一位用户联系了我，说他需要设置“...minfree 值”才能让我的 Android 应用程序运行。这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:13:11.367

谷歌是你的**朋友**，伙计。

[http://www.androidcentral.com/fine-tuning-minfree-settings-improving-androids-multi-tasking](http://www.androidcentral.com/fine-tuning-minfree-settings-improving-androids-multi-tasking)

[http://www.chargeforums.com/forum/droid-charge-development/3144-good-minfree-values.html](http://www.chargeforums.com/forum/droid-charge-development/3144-good-minfree-values.html)

[http://www.vikitech.com/10319/boost-performance-android-phone-supercharger](http://www.vikitech.com/10319/boost-performance-android-phone-supercharger)

[http://tech-trip.com/android-memory-management/](http://tech-trip.com/android-memory-management/)

这都是关于**内存管理和调整**的。你的应用程序。给他的钻机带来了沉重的负担。所以你可能想**优化你的代码**，它是内存。用法。

# c# - 函数传递错误 作为异步方法的参数

> ID：15626514
> 
> 赞同：3
> 
> 时间：2013-03-25T23:08:37.070
> 
> 标签：c#, task-parallel-library, entity-framework-6

我正在修改现有项目以利用 EF6 (alpha3) 异步扩展方法。我有一种方法采用 func 参数，该参数被传递到 linq to entity 查询中。这是工作代码的示例，预异步：

```
public IEnumerable<type> GetTypeSet(Func<Type, bool> predicate)
    {
        return dbSet.Where(d => d.isPublic == true).Where(predicate).tolist();
    } 
```

应用异步后：

```
public async Task<IEnumerable<Type>> GetTypeSet(Func<Type, bool> predicate)
    {
        return await(dbSet.Where(d => d.isPublic == true)
        .Where(predicate)).ToListAsync();
    } 
```

此时，我收到一条错误消息，指出 IEnumerable 没有 ToListAsync 的定义。如果我删除`.Where(predicate)`它可以正常工作。

我很好奇我是否正确地解决了这个问题，或者在异步工作时是否有更好的选择来传递谓词。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:15:53.660

您`.Where( predicate )`使用的是`IEnumerable.Where`扩展方法，而不是`IQueryable.Where`.

这意味着，谓词正在您的应用程序中运行，而不是在数据库服务器上。

如果要使用`IQueryable.Where`，则必须将谓词作为`Expression<Func<type, bool>>`- 表达式树 - 而不是作为委托传递。

因此，只需将您的方法签名更改为：

```
public async Task<IEnumerable<Type>>
  GetTypeSet(Expression<Func<Type, bool>> predicate)
{
  ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T23:15:46.177

我假设`ToListAsync`是扩展方法 on`IQueryable<T>`而不是`IEnumerable<T>`. 您应该将`predicate`参数的类型更改为`Expression<Func<Type, bool>>`.

由于`IQueryable<T>`实现`IEnumerable<T>`了所有的`IEnumerable<T>`扩展方法，like`Where(this IEnumerable<T>, Func<T, bool>)`都是可用的，但通常不是您打算使用的。

因为`predicate`是一个`Func<Type, bool>`类型

```
dbSet.Where(d => d.isPublic == true) 
```

是`IEnumerable<Type>`你想要的时候`IQueryable<Type>`。更改 to 的类型`predicate`将`Expression<Func<Type, bool>>`导致使用`Queryable.Where`扩展方法，该方法根据需要返回一个`IQueryable<Item>`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T23:17:30.143

您必须使函数采用表达式，否则 Where 扩展将回退到 IEnumerable，而不是 IQueryable。而 ToListAsync 只是 IQueryable 上的扩展方法。

```
public async Task<IEnumerable<Type>> GetTypeSet(Expression<Func<Type, bool>> predicate)
{
    return await(dbSet.Where(d => d.isPublic == true)
    .Where(predicate)).ToListAsync();
} 
```

干杯

# ios - Apple声称应用程序崩溃，但我无法弄清楚

> ID：15626515
> 
> 赞同：1
> 
> 时间：2013-03-25T23:08:39.540
> 
> 标签：ios, objective-c, crash, crash-reports

Apple 声称我的应用程序在启动时崩溃，但我看不到在哪里。在我的 iPhone 和 iPad 上运行完美。这是崩溃日志，请帮助我检查似乎是什么问题。

苹果笔记：

> 我们发现您的应用在运行 iOS 6.1.3 的 iPhone 5 和 iPad 上崩溃，这不符合 App Store 审核指南。
> 
> 应用程序在运行 iOS 6.1.3 的 iPhone 5 和 iPad 上启动时崩溃。使用多个 iPhone 5 和 iPad 设备进行了审查，但结果是相同的。

[崩溃日志](http://a1.phobos.apple.com/us/r30/Purple/v4/e3/d9/62/e3d962bf-3f5b-f604-20af-1238e9f17510/temp..yamyuwng.crash)：

```
Incident Identifier: A054AD54-C009-416E-B6EE-0EC7BA01C643
CrashReporter Key:   fbcc902d2921b94c746024ab49f67df0ffaed5e9
Hardware Model:      xxx
Process:         LogoQuizOrig [2532]
Path:            /var/mobile/Applications/440F4F2C-12A2-4071-92E5-C061CDD2B64E/LogoQuizOrig.app/LogoQuizOrig
Identifier:      LogoQuizOrig
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-03-25 13:49:11.916 -0700
OS Version:      iOS 6.1.3 (10B329)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
(0x317443e2 0x3943f95e 0x314d2308 0x41218 0x41024 0x433fa 0x43074 0x3963a01e 0x42f48 0x42edc 0x41332 0x40a70 0x4073c 0x335b3a9c 0x335b3620 0x335ab82e 0x33553d1a 0x335537a8 0x335531ea 0x3526b5f2 0x3526b222 0x317193e2 0x31719386 0x3171820a 0x3168b238 0x3168b0c4 0x335aa468 0x335a72b4 0x3fde6 0x3fd9c)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x39933350 __pthread_kill + 8
1   libsystem_c.dylib               0x398a9fb2 pthread_kill + 54
2   libsystem_c.dylib               0x398e6366 abort + 90
3   libc++abi.dylib                 0x38e8edda abort_message + 70
4   libc++abi.dylib                 0x38e8c094 default_terminate() + 20
5   libobjc.A.dylib                 0x3943fa58 _objc_terminate() + 144
6   libc++abi.dylib                 0x38e8c118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x38e8c1b0 std::terminate() + 16
8   libc++abi.dylib                 0x38e8d626 __cxa_rethrow + 90
9   libobjc.A.dylib                 0x3943f9b0 objc_exception_rethrow + 8
10  CoreFoundation                  0x3168b29c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x3168b0c4 CFRunLoopRunInMode + 100
12  UIKit                           0x335aa468 -[UIApplication _run] + 664
13  UIKit                           0x335a72b4 UIApplicationMain + 1116
14  LogoQuizOrig                    0x0003fde6 0x3d000 + 11750
15  LogoQuizOrig                    0x0003fd9c 0x3d000 + 11676

Thread 1:
0   libsystem_kernel.dylib          0x39933d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x39881ad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x398817f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x39881680 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x399235d0 kevent64 + 24
1   libdispatch.dylib               0x3985ed22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3985a374 _dispatch_mgr_thread + 32

Thread 3:
0   libsystem_kernel.dylib          0x39933d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x39881ad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x398817f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x39881680 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x39922e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x39922fd0 mach_msg + 48
2   CoreFoundation                  0x317192b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3171802c __CFRunLoopRun + 900
4   CoreFoundation                  0x3168b238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3168b0c4 CFRunLoopRunInMode + 100
6   WebCore                         0x37693390 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3988c0de _pthread_start + 306
8   libsystem_c.dylib               0x3988bfa4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3b3f5524
    r4: 0x00000006    r5: 0x3b3f5b78      r6: 0x1fd2ae64      r7: 0x2fdc3a14
    r8: 0x1fd2ae40    r9: 0x00000300     r10: 0x0000000c     r11: 0x1fd29610
    ip: 0x00000148    sp: 0x2fdc3a08      lr: 0x398a9fb7      pc: 0x39933350
  cpsr: 0x00000010 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T17:51:57.987

我有同样的问题，在几台设备（iPhone/iPad/iPod touch）上测试过，仍然无法重现错误。这个链接让我觉得代码可能不是问题，而是审查过程：[Universal iPad App 由于启动崩溃而被拒绝，我无法重现](https://stackoverflow.com/questions/2770031/universal-ipad-app-rejected-because-of-launch-crash-that-i-cant-reproduce?rq=1)

# javascript - 根据工作日通过 jquery 加载 .txt 文件

> ID：15626517
> 
> 赞同：0
> 
> 时间：2013-03-25T23:08:43.300
> 
> 标签：javascript, css

我搜索了这个和几个网站以找到答案，但没有找到任何可以帮助解决我的问题的方法，所以我们开始吧。

基本上我想要做的是通过 jquery 将 .txt 文件加载到我的网站中。

这我可以用一个简单的 get 命令来完成。

我找到了一个可以在网上为我完成这项工作的解决方案

```
<span id="dynamicdate">THIS SHOULD BE DYNAMIC</span>

<script type="text/javascript">
$(function(){
   $.get("menu/menudeldia.txt", function(data) {
      $("#dynamicdate").html(data);
   });
});
</script> 
```

现在一周中的每一天都应该加载另一个文本文件或文件的其他部分。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:15:49.957

您需要做的是使用 Javascript 的 Date 对象和 getDay() 函数。更多信息在这里：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

然后使用 switch case 语句根据星期几决定要加载的文本文件： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

这些方面的东西：

```
var today = new Date();
var day = today.getDay();

switch(day) {
  case(0):
    file = "/sunday.txt";
    break;
  case(1):
    file = "/monday.txt";  
    break;
  default: 
    file = "/otherday.txt";
    break;
}

$.get(file, function(data) {
  $("#dynamicdate").html(data);
}); 
```

# sql-server - 我需要使用哪种连接来从多个表中创建一个表？

> ID：15626522
> 
> 赞同：0
> 
> 时间：2013-03-25T23:09:09.583
> 
> 标签：sql-server

我有 3 个表 A、B 和 C。每个表都有一个 ID 和一个值字段。我使用什么样的连接将这些合并到一个表中，其中包含一个 ID 字段和列值 A、值 B、值 C？

自然，我只希望结果表中的每个 ID 有 1 条记录。谢谢。

例子：

表 A：

```
1 x
2 y 
```

表 B：

```
2 a
3 b 
```

表 C：

```
2 m 
```

结果我需要：

```
1 x - -
2 y a m
3 - b - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:22:35.050

如果 Id 分布在所有表中，请将它们联合在一起并对其进行分组/聚合：

```
SELECT Id, MAX(ValueA) AS ValueA, MAX(ValueB) AS ValueB, MAX(ValueC) AS ValueC
FROM (
    SELECT Id, ValueA, NULL AS ValueB, NULL AS ValueC
    FROM TableA
    UNION ALL
    SELECT Id, NULL AS ValueA, ValueB, NULL AS ValueC
    FROM TableB
    UNION ALL
    SELECT Id, NULL AS ValueA, NULL AS ValueB, ValueC
    FROM TableC
)
GROUP BY Id 
```

如果每个 Id 是唯一的并且在每个表中存在一次：

```
SELECT TableA.Id, TableA.ValueA, TableB.ValueB, TableC.ValueC
FROM TableA
INNER JOIN TableB ON TableA.Id = TableB.Id
INNER JOIN TableC ON TableA.Id = TableC.Id 
```

如果每个 Id 都是唯一的，存在于 TableA 中并且存在一次或不存在于其他表中（不存在的值作为`NULL`s 提供）：

```
SELECT TableA.Id, TableA.ValueA, TableB.ValueB, TableC.ValueC
FROM TableA
LEFT OUTER JOIN TableB ON TableA.Id = TableB.Id
LEFT OUTER JOIN TableC ON TableA.Id = TableC.Id 
```

如果每个 Id 在 TableA 中唯一存在但可能在其他表中多次存在，请使用某种聚合，例如`MAX`or `SUM`：

```
SELECT TableA.Id, MAX(TableA.ValueA) AS ValueA, SUM(TableB.ValueB) AS ValueB, MIN(TableC.ValueC) AS ValueC
FROM TableA
INNER JOIN TableB ON TableA.Id = TableB.Id
INNER JOIN TableC ON TableA.Id = TableC.Id
GROUP BY TableA.Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:22:24.047

听起来你想要一个左连接。我还使用 CTE 从各个表中获取所有 id：

```
WITH ids as
(
    SELECT id from table1
    UNION
    SELECT id from table2
    UNION
    SELECT id from table3
)

SELECT distinct ids.id, t1.col1, t2.col1, t3.col1 
FROM ids
LEFT JOIN Table1 as t1
ON ids.id = t1.id
LEFT JOIN Table2 as t2
ON ids.id = t2.id
LEFT JOIN Table3 as t3
ON ids.id = t3.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T23:23:14.937

以下代码使用 FULL JOIN 为每个 ID 返回一行，无论该 ID 是否存在于所有表中。

```
CREATE TABLE #A
    ( Id INT NOT NULL
    , Value VARCHAR(10) NOT NULL);

CREATE TABLE #B
    ( Id INT NOT NULL
    , Value VARCHAR(10) NOT NULL);

CREATE TABLE #C
    ( Id INT NOT NULL
    , Value VARCHAR(10) NOT NULL);

INSERT INTO #A (Id, Value)
VALUES (1, 'x'), (2, 'y');

INSERT INTO #B (Id, Value)
VALUES (2, 'a'), (3, 'b');

INSERT INTO #C (Id, Value)
VALUES (2, 'm');

SELECT Id = COALESCE(a.Id, b.Id, c.Id)
    , ValueA = a.Value
    , ValueB = b.Value
    , ValueC = c.Value
FROM #A a
FULL JOIN #B b
    ON a.Id = b.Id
FULL JOIN #C c
    ON a.Id = c.Id; 
```

# java - 如何从布局xml android调用方法

> ID：15626526
> 
> 赞同：1
> 
> 时间：2013-03-25T23:09:37.043
> 
> 标签：java, android

我想获取设备的宽度大小并将其放入“android:layout_width”

我试图这样做：

> android:layout_width="GetSizeOfDevice()"

但它不起作用......我如何从布局 xml 调用方法？

顺便说一句，GetSizeOfDevice() 做：

```
Display display = getWindowManager().getDefaultDisplay();
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2)
{
    Point size = new Point();
    display.getSize(size);
    int width1 = size.x;
    return width1/4;
}
else
{
    int width1 = display.getWidth();
    return width1/4;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:57:18.730

你们可能错过了明显的......如果你只是要获得宽度并用它填充字段，那么为什么不使用 layout_width="fill_parent" 呢？您可以从布局文件中调用方法的唯一位置是 android:onClick="doSomething()"，我强烈反对这种做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:27:49.340

这是你如何获得宽度：

```
// getting the width of the display
Context context = getActivity().getBaseContext();
WindowManager window = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
Display display = window.getDefaultDisplay();
final int width = display.getWidth(); 
```

然后使用以下命令设置新宽度`.setWidth()`：

```
yourView.setWidth(width); 
```

我已经对此进行了测试，并且**可以正常工作**。[正如Bill Mote](https://stackoverflow.com/users/617044/bill-mote)所指出的，没有必要从布局中调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:16:59.940

您不能从 xml 布局调用 java 方法。

`weightSum/weight`使用布局属性可以轻松实现您想要做的事情。

只需为视图的父布局组（Linearlayout，framelayout ...）设置 weightSum，如下所示：

```
android:WeightSum="4" 
```

并为您的视图集：

```
android:Weight="1"
andrpod:layout_width="wrap_content" 
```

然后视图将自动缩放到屏幕宽度的 1/4

# templates - Click 在主干中调用函数两次

> ID：15626528
> 
> 赞同：10
> 
> 时间：2013-03-25T23:09:43.917
> 
> 标签：templates, backbone.js, view, duplicates

我已经创建了在主干视图上触发两次警报的非常快速的示例。

[http://jsfiddle.net/feronovak/8svqX/](http://jsfiddle.net/feronovak/8svqX/)

这没什么特别的，它真的是让我了解如何正确调用单独的视图，所以它们不会触发以前的点击方法。现在我生成了两个视图，第二个视图覆盖了#boxSearch 中的表单。当我单击按钮 Search 时，它也会生成 alert `doSearch SearchLocation`。我期待只看到 alert `doSearch SearchLatitude`。我做错了什么？

```
var Geo = {
    Views: {},
    Templates: {}
};

Geo.Templates.SearchLocation = _.template( $("#tpl-search-location").html());
Geo.Templates.SearchLatitude = _.template( $("#tpl-search-latitude").html());

Geo.Views.SearchLocation = Backbone.View.extend({
    initialize: function() {
        this.render();
    },
    el: $("#boxSearch"),
    template: Geo.Templates.SearchLocation,
    render: function() 
    {
        $(this.el).html(this.template);
    },
    events: {
        "click input[type=button]": "doSearch"
    },
    doSearch: function(e) {
        e.preventDefault();
        alert('doSearch SearchLocation');
    }
});

Geo.Views.SearchLatitude = Backbone.View.extend({
    initialize: function() {
        this.render();
    },
    el: $("#boxSearch"),
    template: Geo.Templates.SearchLatitude,
    render: function() 
    {
        $(this.el).html(this.template);
    },
    events: {
        "click input[type=button]": "doSearch"
    },
    doSearch: function(e) {
        e.preventDefault();
        alert('doSearch SearchLatitude');
    }
});

$(document).ready(function(e) {
    var searchLocation = new Geo.Views.SearchLocation();
    var searchLatitude = new Geo.Views.SearchLatitude();
}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T00:20:08.903

这是 Backbone 应用程序中经常出现的“幽灵视图”问题：

*   将视图附加到 DOM 元素
*   将另一个视图附加到同一个 DOM 元素
*   您在 DOM 元素上触发了一个事件（或者更糟的是，在两个视图都监听的其他地方触发了一个事件）
*   两种视图都会触发它们的事件处理程序，通常会造成严重破坏。

正如@machineghost 指出的那样，您的代码中没有任何内容可以取消绑定第一个视图，因此两个视图都附加到`#boxSearch`，并且两个视图都将响应该`click`事件。有几种方法可以解决这个问题：

*   您可以在事件处理程序中调用`e.stopPropagation()`（[docs](http://api.jquery.com/event.stopPropagation/)）（我认为这就是您想要做的`e.preventDefault()`）。这将防止事件一旦被触发就冒泡，因此最后定义的视图会捕获它。这可行，但请注意，您仍然有两个视图，并且过时的幽灵视图可能有其他副作用。

*   你可以让每个视图用一个 class 渲染它自己的 DOM 元素，`.boxSearch`然后调用`view.remove()`你不再需要的那个。这可能是最简洁的选择，但这意味着动态创建大部分 DOM，这比用 HTML 编码更昂贵且难以管理。

*   您可以给每个视图一个清理方法，例如`.clear()`or `.exit()`，它可以调用`view.undelegateEvents()`and `view.stopListening()`。然后确保在完成视图后调用此方法。

如果你小心确保它被调用并确保它清除所有需要清除的东西，那么它运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T23:17:53.527

当您向元素添加另一个视图时，它不会自动删除旧视图；如果你想这样做，你必须明确调用`yourFirstView.remove()`. 但是，这样做也会删除该元素；如果您只想取消绑定事件而不删除可以使用的元素`yourFirstView.undelegateEvents()`。

值得一提的是，这是 Backbone 的故意行为：通常，能够在单个`el`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:58:51.293

当主干使用 jQuery（或 Zepto ......无论哪种，假设 jQuery 并让您根据需要替换）将事件绑定到视图中的元素时，它处理事件*就好像*事件从元素冒泡到`el`元素一样。

`delegateEvents`您可以在带注释的源中找到此行为的来源：

[http://documentcloud.github.com/backbone/docs/backbone.html](http://documentcloud.github.com/backbone/docs/backbone.html)

```
delegateEvents: function(events) {
  if (!(events || (events = _.result(this, 'events')))) return this;
  this.undelegateEvents();
  for (var key in events) {
    var method = events[key];
    if (!_.isFunction(method)) method = this[events[key]];
    if (!method) continue;

    var match = key.match(delegateEventSplitter);
    var eventName = match[1], selector = match[2];
    method = _.bind(method, this);
    eventName += '.delegateEvents' + this.cid;
    if (selector === '') {
      this.$el.on(eventName, method);
    } else {
      this.$el.on(eventName, selector, method);
    }
  }
  return this;
}, 
```

关键是理解关于 `this.$el.on(eventName, method);`和`this.$el.on(eventName, selector, method);`

对于 jQuery，请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)的“直接和委托事件”部分。

关于您的代码，希望您能明白它为什么会这样。您没有覆盖`el`元素*本身*，因此两个委托绑定仍然有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T20:25:12.543

有时您想确保您的视图层次结构不会导致重叠的侦听器绑定。例如，如果您有带有子 UL-s 的 UL-s 的树状视图。这些 UL 存在于 DOM 中，您希望将主干视图绑定到 a;; 内的某个按钮；LI。那么你应该在“>”的帮助下使用更严格的选择器，而不是：

```
"click li .btn": "handleClick" 
```

你将会拥有：

```
"click li > .btn": "handleClick" 
```

# c# - 如何在 Telerik().Grid 按钮单击中调用 JavaScript 函数？

> ID：15626529
> 
> 赞同：0
> 
> 时间：2013-03-25T23:09:45.600
> 
> 标签：c#, asp.net-mvc

我想在 Telerik().Grid 中调用 Ajax 函数。

这是我的 Telerik().Grid

```
 @(Html.Telerik().Grid(Model)
        .Name("SiteGrid")
        .Columns(columns =>
        {
            columns.Bound(o => o.PKComID).Width(50);
             columns.Bound(o => o.CompanyName).Width(50);    
//In here I want to add a button and call the Ajax function when click the button   
        })    

          .Pageable(paging => paging.PageSize(15).Style(GridPagerStyles.NextPreviousAndNumeric).Position(GridPagerPosition.Bottom))
                 .Sortable()
    ) 
```

这是我的 Java 脚本函数

```
<script type="text/javascript">

    function getCompanyDetails(companyID) {

        $.ajax({

            type: 'POST',
            dataType: 'html',
            url: '@Url.Action("CompanybyID", "Search")',
            data: ({ ComID: companyID }),
            success: function (data) {
                //alert(data);
                $('#companyDetails').html(data);

            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        });

    }
  </script> 
```

如何`getCompanyDetails()`在网格视图中调用该函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T20:11:38.550

```
@(Html.Telerik().Grid(Model)
        .Name("SiteGrid")
        .Columns(columns =>
        {
            columns.Bound(o => o.PKComID).Width(50);
            columns.Bound(o => o.CompanyName).Width(50);      
        })    
           .ClientEvents(events => events.OnComplete("getCompanyDetails"))
          .Pageable(paging => paging.PageSize(15).Style(GridPagerStyles.NextPreviousAndNumeric).Position(GridPagerPosition.Bottom))
                 .Sortable()
    ) 
```

官方示例： [http ://demos.telerik.com/aspnet-mvc/razor/grid/customcolumncommand](http://demos.telerik.com/aspnet-mvc/razor/grid/customcolumncommand)

# python - python：我如何测试@unittest.expectedFailure 是否存在特定类型的错误？

> ID：15626531
> 
> 赞同：1
> 
> 时间：2013-03-25T23:09:56.653
> 
> 标签：python, unit-testing, sqlalchemy

考虑这个测试函数

```
 @unittest.expectedFailure
    def test_add_existing_user(self):
        user = User('test_add_existing_user', 'welcome')
        db.session.add(user)
        db.session.commit()
        self.assertEquals(1, len(User.query.all()))

        db.session.add(User(user.email, 'welcome'))
        db.session.commit() 
```

此测试将失败，`IntegrityError`因为用户电子邮件列有`unique=True`

该测试工作正常，但我需要检查我的测试遇到的错误是否是`IntegrityError`，有没有办法测试/验证引发的错误？

因为错误可能发生在最后一条语句执行之前很久，然后我们的测试中就会出现误报

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:14:36.913

您可以使用`self.assertRaises`它来确保引发特定错误。

```
def test_add_existing_user(self):
    """
    Checks that unique constraints return an IntegrityError.
    """
    user = User('test_add_existing_user', 'welcome')
    db.session.add(user)
    db.session.commit()
    self.assertEquals(1, len(User.query.all()))

    db.session.add(User(user.email, 'welcome'))
    self.assertRaises(IntegrityError, db.session.commit) 
```

# python - Python中的线程-线程还是进程？

> ID：15626533
> 
> 赞同：0
> 
> 时间：2013-03-25T23:10:01.307
> 
> 标签：python, multithreading, process

python中的线程是如何实现的？python是否为每个线程创建一个单独的进程？

考虑这段代码。

```
from threading import Thread
from time import sleep

class testThread(Thread):
    def __init__(self):
        Thread.__init__(self)
    def run(self):
        while True:
            print "Thread inner!"
            sleep(5)
threadTest = testThread()
threadTest.start()       
while True:
    print "Thread outer!"
    sleep(10) 
```

在 shell 上运行此代码，然后执行 Ctrl+C 时，“线程外部”打印停止，但是“线程内部”继续打印，直到我使用“kill -9 pid”命令手动终止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:29:11.400

在 Linux 上，每个线程都是一个线程，而不是一个单独的进程。用于`ps`查看脚本运行时启动了哪些进程，您将看到一个 python 进程。

[线程模块](http://docs.python.org/2/library/threading.html#thread-objects)注释的文档：

> 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。初始值继承自创建线程。可以通过 daemon 属性设置标志。
> 
> ...
> 
> 有一个“主线程”对象；这对应于 Python 程序中的初始控制线程。它不是一个守护线程。

字里行间，整个 Python 程序只有在所有非守护线程（包括主线程）退出时才会退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:35:36.067

线程不是单独的进程。它们与主线程共享相同的资源。发生的事情是 Python 在退出之前等待所有线程完成运行。

如果您希望 Python 在主进程退出后退出，[请守护](http://docs.python.org/2/library/threading.html#thread-objects)所有其他线程。您可以按如下方式执行此操作：

```
...
threadTest.daemon = True
threadTest.start()
... 
```

这将适用于非常基本的线程。但是，根据文档（上面链接）：

> 守护程序线程在关闭时突然停止。它们的资源（如打开的文件、数据库事务等）可能无法正常释放。如果您希望线程优雅地停止，请将它们设为非守护进程并使用合适的信号机制，例如事件。

# node.js - 自动上传图片到服务器，无需重新加载页面

> ID：15626535
> 
> 赞同：0
> 
> 时间：2013-03-25T23:10:05.703
> 
> 标签：node.js, express, webrtc

我正在使用 WebRTC、nodejs 和 express js 创建一个视频聊天应用程序。我想在我的服务器上有图像，其中包含每个聊天室中流的快照。每个房间一张图片。

我提出的解决方案是为每个房间分配一个领导者，其任务是获取快照（每个流的图像数据）并合并为一个图像并将其上传到服务器，将其存储在 imgs/rooms/ 下，每次有人重复此操作加入或离开房间或每 5 分钟一次。

然而，问题是在不重新加载页面的情况下上传图像。

我很感谢我能得到的任何帮助，请指出我正确的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:26:24.357

看看[阿贾克斯](https://en.wikipedia.org/wiki/Ajax_%28programming%29)。它能够与您的网络服务器异步通信，因此用户不必更新他的页面。您可以使用 websockets 获得相同的结果，但这更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:52:16.357

使用客户端文件上传插件，如[Jquery File Upload](https://github.com/blueimp/jQuery-File-Upload)或[uploadify](http://www.uploadify.com/)。一旦配置了这些插件，您就可以通过服务器上的请求对象访问该文件。

# javascript - 在 json 子数组上运行每个循环

> ID：15626538
> 
> 赞同：0
> 
> 时间：2013-03-25T23:10:23.057
> 
> 标签：javascript, ajax, json

我有一个 json 数组，其中有一个子数组，格式如下：

```
[{"id":"188","stars":"2","staryes":"2","starers [{"starfirstname":"Name1","starlastname":"Name1","staruser":"1"},
{"starfirstname":"Name2","starlastname":"Name2 ","staruser":"3"}],"time":"1364151043","postedby":"43","text":"TEST","firstname":"Name3","lastname":"Name3","picture":"806243.jpg"}] 
```

我可以通过这样做在整个数组上运行一个循环：

```
 $.each(data, function(i, data) { //function }) 
```

但我不知道如何让循环在子数组“starers”上运行

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:12:28.443

假设您的 JSON 确实有效，它是一个常规的 JavaScript 数组：

```
for (var i = 0; i < thing.starers.length; i++) {
    var starer = thing.starers[i];

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:13:14.743

在您的`.each`回调中，`data`将是每个碰巧具有`starers`属性的对象。所以从那里再次循环（为了清楚起见，我重命名`data`为`item`）：

```
$.each(data, function(i, item) { 
    $.each(item.starers, function(i, starer) { 
        // do something
        // e.g. alert(starer.starfirstname);
    });
}); 
```

# clojure - 用clojure中的函数映射转换映射

> ID：15626542
> 
> 赞同：2
> 
> 时间：2013-03-25T23:10:50.740
> 
> 标签：clojure

我试图想出一种方法来通过将另一个映射中的函数应用于每个值来转换 clojure 哈希映射。这是我到目前为止所拥有的：

```
(defn transform-map [m fm]
  (into {} (for [[k v] m]
    (let [mfn (get fm k identity)] [k (mfn v)])))

(def m {:a 0 :b 0 :c 0 :d 0})
(def fm {:a inc :b dec :c identity})
(transform-map m fm)  ;=> {:a 1, :b -1, :c 0, :d 0} 
```

这很好用，但前提是每个函数都采用一个参数，即键的当前值。如果我想在我的函数映射中放置一个函数，该函数使用的值不是同一个键中的值，该怎么办？例如，假设我想将键的总和`:a`放入`:b`键中`:d`？

我可以尝试类似：

```
(assoc fm :d (fn[a b] (+ a b))) 
```

但是有没有办法可以改变我的`transform-map`函数，以便在该函数调用中使用适当的参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T04:39:48.713

我建议分解函数以及它们如何应用于转换映射。下面是一个例子来说明：

```
;; functions which take some params and return a result
(defn sub [a b] (- a b))
(defn add [a b] (+ a b))

;; data map
(def data {:a 5 :b 4 :c 3})

;; transformation map key => output key, value is vector of function
;; to apply and the params that function will take from the data map
(def transformations {:a [inc :a]
                      :b [dec :b]
                      :c [add :a :b]
                      :d [sub :b :c]})

; The transformation function
(defn transform-map [m fm]
  (into {} (map (fn [[k v]]
                  [k (apply (first v)
                            ((apply juxt (rest v)) m))])
                fm)))

(transform-map data transformations) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:24:57.137

一种更通用的构建方法是从初始映射开始，然后减少其上的转换函数集合：

“假设我想将键 :a 和 :b 的总和放入键 :d 中？”

```
user> (def m {:a 0 :b 0 :c 0 :d 0}
#'user/m 
user> (reduce #(%2 %1) m [#(assoc % :a (inc (:a %))) 
                          #(assoc % :b (inc (:b %))) 
                          #(assoc % :d (+ (:a %) (:b %)))]) 
{:a 1, :c 0, :b 1, :d 2} 
```

虽然这更冗长，因为您必须为每个指定操作 ( `assoc`) 和目标 ( `:b`etc. )，但它可以让您表达任何转换并为您提供提供额外参数的地方。也许更重要的是，它使排序明确，而不依赖于地图的内部排序。

您可以将输入构造为 [target action] 对，以使其稍微不那么冗长：

```
user> (reduce (fn [result [target action]] 
                  (assoc result target (action result))) 
                 m 
                 [[:a #(inc (:a %))] 
                  [:b #(inc (:b %))] 
                  [:d #(+ (:a %) (:b %))]])
{:a 1, :c 0, :b 1, :d 2} 
```

# facebook-graph-api - 如何使 Open Graph 用户生成的图像标志工作

> ID：15626544
> 
> 赞同：0
> 
> 时间：2013-03-25T23:11:16.520
> 
> 标签：facebook-graph-api, http-post, facebook-opengraph

我正在尝试按照 OG 文档中的说明发布带有大照片的开放图操作：

[将照片添加到故事](https://developers.facebook.com/docs/opengraph/howtos/adding-photos-to-stories/)

我的操作已获得所有可选操作的批准，包括用户生成的照片。

每当我发出此操作时，故事仍会出现在股票行情中，就好像发布请求中没有包含用户生成的照片一样。没有为我的应用创建相册，显然照片没有添加到所述相册中。

我应该遵循一些未记录的行为吗？我是否应该在执行此操作的对象的标头中省略 og:image？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:29:15.990

I figured out my problem.

The documentation was wrong in the examples section on this topic on facebook docs.

Their example had dashes where underscores are needed: i.e.

**user-generated = user_generated**

```
POST /me/cookbook:eat?
recipe=http://www.example.com/recipes/pizza/&
image[0][url]=http://www.example.com/recipes/pizza/pizza.jpg&
image[0][user-generated]=true&
image[1][url]=http://www.example.com/recipes/pizza/pizza2.jpg&
image[1][user-generated]=true&
access_token=VALID_ACCESS_TOKEN 
```

should be

```
POST /me/cookbook:eat?
recipe=http://www.example.com/recipes/pizza/&
image[0][url]=http://www.example.com/recipes/pizza/pizza.jpg&
image[0][user_generated]=true&
image[1][url]=http://www.example.com/recipes/pizza/pizza2.jpg&
image[1][user_generated]=true&
access_token=VALID_ACCESS_TOKEN 
```

In case anyone else runs into this before they fix the documentation. Opened a bug report: [Bug Report](https://developers.facebook.com/bugs/636543626362066)

# html - 清除填充之间 标签

> ID：15626545
> 
> 赞同：0
> 
> 时间：2013-03-25T23:11:19.950
> 
> 标签：html, css

我实际上有一个带有 3 个链接和 1 个搜索栏的菜单。

代码如下所示：

```
<ul class="menu">
    <li><a href="#">Menu1</a></li>
    <li><a href="#">Menu2</a></li>
    <li><a href="#">Menu3</a></li>
    <li><input type="text" name="search" id="search"/><a href="#">Search</a></li>
</ul> 
```

基本上我已经给 .menu 类赋予了一种样式，对于我用作最后一项的文本框来说，它的填充有点多。

有什么我可以清除 -.menu 类的 Padding 并给出一个新的甚至一个边距，以正确定位我的文本框？

或者我应该只在`<li>`???中创建文本框

编辑：这是我正在使用的 css：

```
.menu{
padding: 13px 0 13px 0;
display: inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:19:39.003

如果您想在 .menu 中定位特定输入，您可以使用 target `.menu li input`，如下所示：

```
.menu{
padding: 13px 0 13px 0;
display: inline;
}

.menu li input{
padding: 2px 0 2px 0;
display: inline;
} 
```

您可以将内部的属性（例如填充/边距）更改为`.menu li input`适合您的任何内容，而不会影响其他元素。

**jsFiddle在这里-http** : [//jsfiddle.net/st5ZA/1/](http://jsfiddle.net/st5ZA/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:21:16.040

这是你想要的？

HTML

```
<ul class="menu">
<li><a href="#">Menu1</a></li>
<li><a href="#">Menu2</a></li>
<li><a href="#">Menu3</a></li>
<li><input type="text" name="search" id="search"/><a href=""></a></li> 
```

CSS

```
.menu li input{
padding: 2em;
margin: 2em;
} 
```

# javascript - javascript 根据 Id 和类将样式应用于所选元素

> ID：15626547
> 
> 赞同：0
> 
> 时间：2013-03-25T23:11:27.217
> 
> 标签：javascript

我对 javascript 很陌生，我想知道如何设置特定 HTML 的样式，如下所示：

```
<a id="234" action="." class="rawup"</a>
<a id="234" action="." class="rawdown"></a> 
```

我希望将样式应用于上述内容，例如：

```
document.getElementById("234").style.backgroundPosition='0px 150px'; 
```

效果很好..但是，我想做的是getElementById，然后是getElementByClass（？），这样我就可以区分“rawup”和“rawdown”类。所以，像：

```
document.getElementById("234").getElementByClass("rawup").style.backgroundPosition='0px 150px'; 
```

我尝试了上述方法，但它似乎不起作用 - 想知道是否有人可以指导我。对不起，这里是 JS 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:17:55.697

第一：你*不能*有多个相同的元素[`id`](http://www.w3.org/TR/html5/dom.html#the-id-attribute)。这就是我们称它们为*标识符*的原因。`id`在多个元素上使用相同的值是无效的（而且是荒谬的） 。

但是要回答如何同时查询`id`和的问题`class`，您*可以*在[支持`querySelector`/`querySelectorAll`](http://caniuse.com/#feat=queryselector)的浏览器上执行此操作。但如果`id`以数字开头则不是，因为`querySelector`/`querySelectorAll`使用 CSS 选择器，并且`id`以数字开头的值在 CSS 中无效（它们在 HTML 中有效）。

如果我们假设你想找到一个带有`id` `"abc"`和 class的元素`"foo"`，但你不想找到`"abc"`没有 class 的元素`"foo"`，你可以这样做：

```
var element = document.querySelector("#abc.foo");
if (element) {
    // Found it
}
else {
    // Didn't find it
} 
```

但同样，不要用 来区分两个元素`id` `"abc"`，因为你不能将相同的元素赋予`id`多个元素。

# javascript - 是否可以访问 Javascript/jQuery 范围滑块？

> ID：15626550
> 
> 赞同：1
> 
> 时间：2013-03-25T23:11:36.593
> 
> 标签：javascript, jquery, jquery-ui, accessibility

我正在开发一个需要满足 AA 可访问性的网站。一页有大量结果，可以使用 Javascript 应用过滤器以减少结果数量。设计要求范围滑块按美元值进行过滤。

范围滑块（例如 jQuery UI Slider）是否有任何可访问性限制，或者是否有既定的解决方法？它们是否“开箱即用”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:00:41.270

您必须确保用户可以访问*表单*元素，以便他们可以操作它。因此，不必逐字单击拖动图标并沿滑块拖动它，因为他们可能看不到关于它们沿滑块有多远以及当前值是多少的视觉反馈。

为了确保滑块可访问，您需要使用使用有效*表单*元素的滑块来表示值。例如绑定到`<select>`( [http://jqueryui.com/slider/#hotelrooms](http://jqueryui.com/slider/#hotelrooms) ) 的那个。

我过去制作了一个绑定到单选按钮的按钮，因此拖动滑块会自动选择单选按钮，示例如下：http: [//jsfiddle.net/amyamy86/J4eL3/](http://jsfiddle.net/amyamy86/J4eL3/)

# c++ - 错误：“=”标记和许多其他标记之前的预期主表达式

> ID：15626551
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:11:45.703
> 
> 标签：c++

要么我失明，要么没有错误。我想这可能是第一选择。请帮我大海捞针。这是我的错误列表的一部分：

```
server.cpp: In function ‘int main(int, char**)’:
server.cpp:64:16: error: expected primary-expression before ‘=’ token
server.cpp:71:14: error: expected primary-expression before ‘=’ token
server.cpp:71:24: error: expected primary-expression before ‘)’ token
server.cpp:71:24: error: expected ‘;’ before ‘)’ token
server.cpp:72:12: error: expected primary-expression before ‘=’ token
server.cpp:80:10: error: expected primary-expression before ‘=’ token
make: *** [server] Error 1 
```

这是我的代码的一部分：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <netdb.h>
#include <iostream>
#include <regex.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <string.h>
#include <string>
#include <stdlib.h>
#include <locale.h>
#include <cstring>
#include <signal.h>
#include <dirent.h>

using namespace std;

/* global variables */
// error codes
#define ERR_OK = 0;
#define ERR_PARAMS = 1;
#define ERR_SOCKET = 2;
#define ERR_BIND = 3;
#define ERR_OTHER = 99;

// others
#define LISTEN_BACKLOG 50

/* function prototypes */
void printErr(int EC);
int second(int port);

int main(int argc, char **argv)
{
  int pflag = 0;
  string pvalue;
  int port;
  int c;

  opterr = 0;
  while((c = getopt (argc, argv, "p:")) != -1) {
    switch(c) {
      case 'p':
        pflag = 1;
        pvalue.assign(optarg);
      break;
      case '?':
        if(optopt == 'c')
          fprintf(stderr, "Option -%c requires an argument.\n", optopt);
        else if(isprint (optopt))
          fprintf(stderr, "Unknown option `-%c'.\n", optopt);
        else
          fprintf(stderr, "Unknown option character `\\x%x'.\n", optopt);
        return ERR_PARAMS;
      default:
        abort();
    }
  }

  if(pflag == 0) {
    printErr(ERR_PARAMS);
    return ERR_PARAMS;
  }
  printf ("pvalue = %s\n", pvalue.c_str());

  port = atoi(pvalue.c_str());

  second(port);

  return ERR_OK;
} 
```

我在整个代码中还有更多类似的错误，所以我认为有一些东西就像缺少 collumn od 一样。你看到了吗？我不。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T23:19:17.947

其他答案是正确的，问题是符号常量

```
#define ERR_OK = 0;
#define ERR_PARAMS = 1;
#define ERR_SOCKET = 2;
#define ERR_BIND = 3;
#define ERR_OTHER = 99; 
```

但是，在 C++ 中有更好的方法来解决这些问题：

```
const int ERR_OK = 0;
const int ERR_PARAMS = 1;
const int ERR_SOCKET = 2;
const int ERR_BIND = 3;
const int ERR_OTHER = 99; 
```

或者，C 和 C++ 都允许

```
enum ERROR_CODES {
  ERR_OK,
  ERR_PARAMS,
  ERR_SOCKET,
  ERR_BIND,
  ERR_OTHER = 99
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T23:12:40.393

您`#define`的 s 不正确，它们应该如下所示，例如：

```
#define ERR_PARAMS 1 
```

也就是说，它们不应`=`以分号结尾，也不应以分号结尾。`#define`是一个预处理器指令。它们不遵守与其他 C++ 相同的语法规则。特别是，预处理器指令以换行符结束，而不是分号。

```
#define ERR_PARAMS = 1; 
```

这实际上定义`ERR_PARAMS`为`= 1;`. 如果您随后在代码中替换`ERR_PARAMS`为`= 1;`，您会看到为什么会弹出一些错误。例如，考虑这一行：

```
printErr(ERR_PARAMS); 
```

如果你`ERR_PARAMS`在这里替换，你会得到：

```
printErr(= 1;); 
```

那肯定不对！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T23:12:56.707

```
#define ERR_OK = 0;
#define ERR_PARAMS = 1;
#define ERR_SOCKET = 2;
#define ERR_BIND = 3;
#define ERR_OTHER = 99; 
```

应该

```
#define ERR_OK 0
#define ERR_PARAMS 1
#define ERR_SOCKET 2
#define ERR_BIND 3
#define ERR_OTHER 99 
```

宏不是变量。它没有值。这是一个预处理功能。

您到处都弹出语法错误的原因是因为`ERR_OK`等被替换为`= 0;`而不是`0`例如。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T23:17:00.663

```
#define ERR_OK = 0;
#define ERR_PARAMS = 1;
#define ERR_SOCKET = 2;
#define ERR_BIND = 3;
#define ERR_OTHER = 99; 
```

应该

```
#define ERR_OK 0
#define ERR_PARAMS 1
#define ERR_SOCKET 2
#define ERR_BIND 3
#define ERR_OTHER 99 
```

# php - Google 短网址 - 最大网址长度

> ID：15626552
> 
> 赞同：0
> 
> 时间：2013-03-25T23:11:46.597
> 
> 标签：php, google-api, maxlength, short-url

我正在使用[Google URL Shortner API](https://developers.google.com/url-shortener/)，我想知道从 google 返回的 URL 是否有任何最大长度。

我的意思是，短网址被称为短网址，因为它们很短，所以它们应该是最大`x`字符长度。我想知道那`x`是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:15:51.140

没有办法知道它们的真实长度，URL 有一天可能会长 1 个字符，因为它们用完了唯一链接。

但目前它们有 5 个字符长，混合了数字、大小写字母和大写字母。

# asp.net-mvc - MVC 在视图中显示相关子实体

> ID：15626556
> 
> 赞同：1
> 
> 时间：2013-03-25T23:11:51.140
> 
> 标签：asp.net-mvc, eager-loading

我正在尝试在 MVC 4 应用程序中构建一个视图，该视图将显示域模型以及来自它的相关子实体的所有数据，但由于某种原因，我无法访问视图中的子级属性。Intellisense 看不到它们。

这是我的域模型，称为订阅者：

```
public class Subscriber
{

    [Required]
    [Display(Name = "Subscriber ID")]
    public int SubscriberId { get; set; }

    [Required]
    [DataType(DataType.DateTime)]
    [Display(Name = "Date Created")]
    public DateTime DateCreated { get; set; }

    //set to money in DB
    [Display(Name = "Credits (Money owed to customer)")]
    private static decimal _Credits = 0;
    public decimal Credits { get { return _Credits; } set { _Credits = value; } }

    //set to money in DB
    [Display(Name = "Debits (Money owed to us)")]
    private static decimal _Debits = 0;
    public decimal Debits { get { return _Debits; } set { _Debits = value; } }

    public List<UserProfile> Users { get; set; }

    public List<Website> Websites { get; set; }

    public List<Order> Orders { get; set; }

    public List<SubscriberNote> SubscriberNotes { get; set; }

} 
```

如您所见，订阅者有一堆相关的子实体。这是我使用急切加载方法的控制器代码：

```
public ActionResult Edit(int id = 0)
    { 
        var Subscriber = db.Subscribers
                           .Where(s => s.SubscriberId == id)
                           .Include(s => s.Users)
                           .Include(s => s.SubscriberNotes)
                           .Include(s => s.Orders)
                           .Include(s => s.Websites.Select(w => w.DomainNames))
                           .FirstOrDefault();

        return View(Subscriber);
    } 
```

Ans 这是我的控制器：

```
@model PpModels.Models.Subscriber

@{
ViewBag.Title = "Edit";
}

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Subscriber</legend>

    @Html.HiddenFor(model => model.SubscriberId)

    --deleted fro brevity--

    --Problem is below--

    <div class="editor-label">
        @Html.LabelFor(model => model.Users.FirstName)
    </div>    

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

MVC 不喜欢 model.Users.FirstName。如何访问这些值？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:16:40.913

您将不得不遍历此属性，因为它是一个`List`. `Users`将没有该`FirstName`属性，但其中的每个用户都会。

```
@foreach(var user in model.Users)
{
    <div class="editor-label">
        @Html.LabelFor(model => user.FirstName)
    </div>
    ....  
} 
```

# javascript - 内联 Javascript 有效，但在外部时无效

> ID：15626560
> 
> 赞同：1
> 
> 时间：2013-03-25T23:12:20.000
> 
> 标签：javascript, jquery, html, css

我有这个简短的 Javascript 代码，我想把它放在一个外部文件中。原因是因为会有很多 .htm 页面会使用它。因此，我不想将其全部内联在每个文件中，而是将其放入外部文件中。

但问题是，它不起作用。该脚本基本上是一个“返回顶部”按钮。当我将脚本放入`.htm`文件中时，它可以完美运行。顺便说一句，我正在将`.htm`文件加载到 中`Div`，这会导致问题吗？`.load()`编辑：文件是通过jQuery 函数加载的。

我也尝试将脚本内联在我的中`index.html`，但它也无法在那里工作。

这是代码：

```
$('.backtotopwrapper').click(function(){
  $('body,html').animate({scrollTop: "0px"},1500);
}); 
```

更新：我已经测试了我的其他 .js 代码以及与 .htm 文件无关的代码。特定于 .htm 中元素的代码是唯一不起作用的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:42:38.373

好的，3个文件：

*   main.html
*   loremIpsum2.html
*   myScroll.js

1）。在*main.html*我调用 jQuery 和*myScroll.js* **外部**文件我还有一个空的包装器*div* ( `<div id="loader"></div>`) 我使用 jQuery放置*loremIpsum2.html*`.load()`的内容所以

```
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>link to external js file</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="myScroll.js"></script>
  <script>
  /* <![CDATA[ */
   $(document).ready(function() {
     $("#loader").load("loremIpsum2.html");
   }); // ready​​​
  /* ]]> */
  </script>
 </head>
 <body>
  <div id="wrap">
   <div id="loader"></div>
  </div><!--wrap-->
 </body> 
</html> 
```

2）。在*loremIpsum2.html*中，我只有一堆段落，但最后我有我的按钮：

```
<a class="backtotopwrapper" href="javascript:;">go to top</a> 
```

3）。在*myScroll.js*我有我的滚动按钮的功能：

```
$(function () {
    $('body').on("click", ".backtotopwrapper", function () {
        $('body,html').animate({
            scrollTop: 0
        }, 1500);
    });
}); 
```

由于我正在加载按钮所在的文件 via `.load()`，因此我正在使用`.on()`其委托形式。

查看**[DEMO](http://www.picssel.com/playground/jquery/CSS_externalJSfile_25mar13.html)**并随意探索源代码。

**注意**：`.on()`需要 jQuery v1.7+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-07T14:14:02.447

我遇到了同样的问题，但没有执行这里提到的任何解决方案，我实际上发现了当我的外部脚本不起作用但相同的代码在内部工作时它对我有用的原因。

只需从外部脚本文件名中删除任何空格/特殊字符，例如，不要将其称为“admin-script.js”，而是将其称为“adminscript.js”，不使用连字符等特殊字符，然后使用新名称引用脚本就是这样，它对我有用。

# android - 如何在android中的布局之间切换？

> ID：15626564
> 
> 赞同：0
> 
> 时间：2013-03-25T23:12:33.357
> 
> 标签：android

我正在制作一个联系人列表应用程序，并且我有一个可以帮助您保存联系人的主屏幕。我在那里有一个搜索按钮。然后我创建了另一个 UI，我称之为搜索屏幕。当我点击主屏幕上的搜索按钮时，我想被重定向到另一个 UI，即搜索屏幕。我打算为搜索按钮添加 setOnClickListener 方法，但是当我单击按钮时如何从主屏幕切换到搜索屏幕？

```
btn_goSearch.setOnClickListener(new OnClickListener() {

        ?????????

        }
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:28:19.037

```
 @Override
        public void onClick(View v) {
                Intent intent = new Intent(Currentactivity, YourSearcgActivity.class);
                intent.putExtra("EXIT", false);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:22:00.013

您应该创建另一个`Activity`，也许将其称为 SearchActivity，当用户单击按钮时，只需以简单的意图启动 SearchActivity，它将加载自己的布局和所有内容：

```
startActivity(new Intent(context,SearchActivty.class)); 
```

# php - PHP标头位置未重定向

> ID：15626568
> 
> 赞同：0
> 
> 时间：2013-03-25T23:12:47.617
> 
> 标签：php, redirect, header

我试图用 php add 制作一个刽子手游戏，我得到了整个工作，除了如果你用尽猜测它不会重定向到 fail.php。奇怪的是，如果你赢了，它会重定向。我不知道有什么问题这是我的 quess_letter.php 文件：

```
<?php
ob_start();
$letter = $_POST['letter'];
if (preg_match('/^[a-zA-Z]$/', $letter)) {

    $guesses = intval(substr($_COOKIE['hangman'], 0, 1));

    $word = explode(" ", $_COOKIE['hangman_word']);
    if (!strpos($_COOKIE['hangman_word'], $letter) && $letter != substr($_COOKIE['hangman_word'], 0, 1)) {
        $guesses -= 1;
        if ($guesses == 0) {
            header("location: fail.php");
        }
    }

    $i = 0;
    foreach(str_split($word[0]) as $l) {
        if ($l == $letter) {
            $word[1][$i] = $l;
        }
        $i++;
    }

    $new_cookie = strval($guesses) . " " . substr($_COOKIE['hangman'], 1) . $letter . " ";

    setcookie('hangman', $new_cookie, time() + 3600 * 24);
    setcookie('hangman_word', "$word[0] $word[1]", time() + 3600 * 24);
    if ($word[0] != $word[1]) {
        header("location: index.php");
    } else {
        header("location: win.php");
    }
} else {
    header("location: index.php?error=true");
}

?> 
```

这是整个文件。它应该在 $guesses 等于 0 时重定向。并且在重定向之前没有打印任何内容。我已经研究过了，但没有一个答案有效。有人可以解释什么是错的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:22:10.583

如果您确定 $guesses 将准确地达到“ **0 ”**

尝试

```
if ($guesses == 0) 
{
header("location: fail.php");
exit(); 
} 
```

# php - 插入phpmysql表单而不刷新页面

> ID：15626570
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:12:54.437
> 
> 标签：php, jquery, mysql, ajax, webforms

我是编程新手，所以请帮我编写脚本，

```
 <?php
if(isset($_FILES['files'])){
    $errors= array();
    foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
        $file_name = $key.$_FILES['files']['name'][$key];
        $file_size =$_FILES['files']['size'][$key];
        $file_tmp =$_FILES['files']['tmp_name'][$key];
        $file_type=$_FILES['files']['type'][$key];  
        if($file_size > 2097152){
            $errors[]='File size must be less than 2 MB';
        }       
        $query="INSERT into upload_data (`USER_ID`,`FILE_NAME`,`FILE_SIZE`,`FILE_TYPE`) VALUES('$user_id','$file_name','$file_size','$file_type'); ";
        $desired_dir="user_data";
        if(empty($errors)==true){
            if(is_dir($desired_dir)==false){
                mkdir("$desired_dir", 0700);        // Create directory if it does not exist
            }
            if(is_dir("$desired_dir/".$file_name)==false){
                move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
            }else{                                  // rename the file if another one exist
                $new_dir="$desired_dir/".$file_name.time();
                 rename($file_tmp,$new_dir) ;               
            }
         mysql_query($query);           
        }else{
                print_r($errors);
        }
    }
    if(empty($error)){
        echo "Success";
    }
}
?>

<form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="files[]" multiple/>
    <input type="submit"/>
</form> 
```

我正在使用这个脚本，它会上传图像，但它不会将值插入数据库，而且我不希望我的页面刷新，所以请帮我写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:15:51.393

一般来说，像这样使用像 Uploadify 这样的第三方脚本可能会更好；[http://www.uploadify.com/](http://www.uploadify.com/)

这将允许您根据需要进行操作，即使使用相同的后端脚本也是如此。

它还有一个进度条。

# knockout.js - 防止带有 jquery ui 对话框的提交按钮结合敲除 if 语句

> ID：15626572
> 
> 赞同：0
> 
> 时间：2013-03-25T23:12:58.047
> 
> 标签：knockout.js, jquery-ui-dialog

我有一个问题，我使用 KO if 标记在请求时将对话框代码带入 DOM。对话框上有一个带有提交按钮的表单。我希望阻止提交按钮使用 e.preventDefault(); 问题在于文档加载时，因为对话框不在 DOM 中，所以这个覆盖功能不起作用。

我在这里创建了一个 JSFiddle 来演示这个问题：

[http://jsfiddle.net/rZBhx/4/](http://jsfiddle.net/rZBhx/4/)

```
model = new function () {};
model.functions = ko.observable();
model.data = ko.observable();
model.data.status = ko.observable("Status: model is live");
model.data.visible = ko.observable(false);

model.functions.showDialog = function (dialogVisible) {
    if (dialogVisible == true) {
        model.data.status("Status: Darth Dialog Activated");
        model.data.visible(true);
        $("#darthDialog").dialog({
            modal: true
        });
    } else {

        model.data.status("Status: Darth Dialog Deactivated");
        $("#darthDialog").dialog('close');
        model.data.visible(false);
    }

};

ko.applyBindings(model);

$(function preventSubmit(e) {

    $("#submissionForm").submit(function (e) {
        e.preventDefault();
        model.status("Status: Saved by Ko.da");
        return false;

    });
}); 
```

作为旁注，在我的小提琴中，取消按钮只能与 ko if 语句一起使用。我不确定这是为什么。在我的实时站点中，这没有发生。如果您从 HTML 中删除 ，则提交被阻止，并且取消按钮继续工作。

有没有什么办法可以使它起作用，同时保持 KO if's？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:50:00.703

对您来说最简单的事情是在块内的元素`submit`上使用绑定。`form`然后，当它可见（绑定）时，提交处理程序将附加到当前 DOM 元素。

`<form action="/darkSide/submission" data-bind="submit: submitForm" id="submissionForm" method="post">`

然后，只需添加一个`submitForm`函数（或您想在模型上调用的任何函数）。

示例：http: [//jsfiddle.net/rniemeyer/gDkXf/](http://jsfiddle.net/rniemeyer/gDkXf/)

您可能还想看看使用自定义绑定来封装围绕 jQuery UI 对话框的逻辑。看看这个答案：[integration jquery ui dialog with knockoutjs](https://stackoverflow.com/questions/8611327/integrating-jquery-ui-dialog-with-knockoutjs/8611892#8611892)

# database - 将图像保存在数据库或服务器目录中

> ID：15626573
> 
> 赞同：2
> 
> 时间：2013-03-25T23:13:04.520
> 
> 标签：database, image, file-upload, jsf-2, primefaces

我使用 java、tomcat、jsf 和 primefaces

我的产品表中有一个“图像”字段，我想问你哪个更好：将图像保存在数据库中或服务器的一个目录中

如果第二种情况最好，请向我解释一下如何管理它（我从来没有机会遇到这种情况）

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-26T04:55:50.010

是否要将**图像二进制文件保存在数据库中**或**将图像文件保存在服务器目录中**取决于您的需要。

永无止境的辩论仍在继续，您可以通过几个键轻松找到它。

**以下是我的做法（第二种方法），它从不让我失望：**
假设您正在构建一个电子商务网站，并希望托管卖家上传的图片，例如产品图片并稍后显示。

1.  将上传的图像文件物理保存在您的服务器上**。**假设目录是**/baseFolder/**，文件的完整路径是**/baseFolder/path/to/image.jpg**。
2.  在 Tomcat 中添加一个**虚拟主机**，以便您的**[http://localhost:8080/imageBase/](http://localhost:8080/imageBase/)**指向物理目录**/baseFolder/**。还有许多其他方法可以制作这种映射。
3.  将相对路径**/path/to/image.jpg**存储在数据库中。所以当你想展示它时，你可以简单地说：`<img src="#{webappRoot}/baseFolder/#{pathRetrievedFromDatabase}"/>`. 在这种情况下，它将是`<img src="#{webappRoot}/baseFolder/path/to/image.jpg"/>`

当然，有很多不同的方法可以实现相同的目标。这是我能想到的最简单的方法来解释它是如何管理的。
希望能帮助到你。

# c - C ABI：更改 void 函数以返回 int 是一项重大更改吗？

> ID：15626579
> 
> 赞同：13
> 
> 时间：2013-03-25T23:13:19.680
> 
> 标签：c, return-type, abi

是否有任何非异国情调的架构/操作系统/编译器发生以下变化：

```
void func(void *, int, int) 
```

至：

```
int func(void *, int, int) 
```

会破坏ABI吗？（即为共享库的“void”版本编译的程序在使用“int”版本运行时会中断）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T02:18:29.197

有几条评论说不，我们可以通过一点推理来加强这一点。`void func(void *, int, int)`在最熟悉的 ABI 中，允许带有声明的函数使用`int`作为临时寄存器返回结果的寄存器；它不需要保存和恢复它。需要带有声明的函数`int func(void *, int, int)`才能**使用**将`int`返回结果的寄存器。在其他方面，这些声明是相同的。因此，任何实现的`int func(void *, int, int)`机器码也是满足的机器码`void func(void *, int, int)`。

换句话说，调用者无法区分故意在返回寄存器中返回结果的机器代码和恰好在该寄存器中留下一些临时计算的代码。

请注意，这种推理要求被调用的函数隐藏在 ABI 后面；它依赖于 ABI 指定的二进制行为。如果被调用函数的源代码在被调用函数被编译时是可见的（或者可能影响调用如何实现的其他部分），那么优化可能会导致绕过 ABI 的行为（例如，观察被调用例程不使用返回寄存器，因此在调用者中使用它来保存一些预期在调用过程中保持不变的值）。

既然你说这是一个共享库，你可能是安全的：共享库是单独编译的，它的源代码对它的调用者不可用。但是，您应该考虑侧通道。例如，共享库可能是一组共享源并包含跨库调用的库的一部分。在这种情况下，某人可能有一个旧版本的共享库，它是在编译时考虑到`void`源代码的，而新版本的共享库则包含`int`源代码。（甚至这需要不寻常的源代码安排或将信息集成到多个编译单元的花哨的编译器。）

# java - 自动标记 slf4j 参数化变量？

> ID：15626582
> 
> 赞同：1
> 
> 时间：2013-03-25T23:13:58.263
> 
> 标签：java, logging, slf4j

我正在使用 slf4j。我有很多看起来像这样的日志语句；

```
LOG.debug("I like {} and {}", new Object[] { "foo", "bar" }); 
```

执行此日志语句时，我会得到如下所示的日志；

```
I like foo and bar 
```

正如预期的那样。但是，我希望日志消息参数具有额外的格式，以使日志解析器更容易。所需的日志消息，字面上看起来像这样；

```
I like [foo] and [bar] 
```

显然我可以将文字日志语句更新为`I like [{}] and [{}]`，但这是一个很大的变化，使日志语句看起来不必要的混乱，并且对于未来不是很灵活。

有人可以提出一个更快的解决方案，同时仍然与 slf4j 保持一致吗？我正在使用的实现是 logback-classic 来执行实际的 lgoging。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:15:33.997

如果你使用 Logback，可能你可以构建一个自定义的 appender/encoder/layout/converter。在 Logback 中，Appender 接受 LoggingEvent，它通常委托给编码器，然后委托给布局以构造消息。查看源代码，看看哪个部分是您进行自定义处理的最佳位置。

# c# - 无参数构造函数上传图片

> ID：15626583
> 
> 赞同：1
> 
> 时间：2013-03-25T23:14:02.940
> 
> 标签：c#, json, asp.net-mvc-3

我知道程序只需要这个 WrappedJsonResult2 UploadImageSmall() 没有参数，但我在 UploadImage 中发送参数。

我更改了此代码，因为我想在一个视图中有两个 UploadImage 并且在任何地方我都给了 2 来更改 id，也许我在某个地方犯了错误（在 Upload Image 部分），但我真的不知道这个问题在哪里。

[一张上传图片的教程](http://www.dustinhorne.com/post/2011/11/16/AJAX-File-Uploads-with-jQuery-and-MVC-3.aspx)

错误

```
 No parameterless constructor defined for this object.
    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

    Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.

    Source Error:
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +199
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +572
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +449
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116 
```

上传图片

```
@using (Html.BeginForm("UploadImageSmall", "StronaGlowna", FormMethod.Post,
                                         new
                                             {
                                                 enctype = "multipart/form-data",
                                                 id = "ImgForm2",
                                                 name = "ImgForm2",
                                                 target = "UploadTarget"
                                             }))
{
    <input type="file" name="imageFile2" />

    <input type="button" value="Zapisz" onclick="UploadImage2()" />
}
<iframe id="UploadTarget2" name="UploadTarget2" onload="UploadImage_Complete2();" style="position: absolute;
    left: -999em; top: -999em;"></iframe>
<div id="Images2">
</div>
<script type="text/javascript">
    var isFirstLoad2 = true;

    function UploadImage2() {
        $("#ImgForm2").submit();
    }
    function UploadImage_Complete2() {
        //Check to see if this is the first load of the iFrame
        if (isFirstLoad2 == true) {
            isFirstLoad2 = false;
            return;
        }

        //Reset the image form so the file won't get uploaded again
        document.getElementById("ImgForm2").reset();

        //Grab the content of the textarea we named jsonResult .  This shold be loaded into
        //the hidden iFrame.
        var newImg2 = $.parseJSON($("#UploadTarget2").contents().find("#jsonResult2")[0].innerHTML);

        //If there was an error, display it to the user
        if (newImg2.IsValid == false) {
            alert(newImg2.Message);
            return;
        }

        //Create a new image and insert it into the Images div.  Just to be fancy,
        //we're going to use a "FadeIn" effect from jQuery
        var imgDiv2 = document.getElementById("Images2");
        var img2 = new Image();
        img2.src = newImg2.ImagePath;

        //Hide the image before adding to the DOM
        $(img2).hide();
        imgDiv2.appendChild(img2);
        //Now fade the image in
        $(img2).fadeIn(500, null);
    }
</script> 
```

JSON

```
[HttpPost]
        public WrappedJsonResult2 UploadImageSmall(HttpPostedFileWrapper imageFile)
        {

            if (imageFile == null || imageFile.ContentLength == 0)
            {
                return new WrappedJsonResult2
                {
                    Data = new
                    {
                        IsValid = false,
                        Message = "No file was uploaded.",
                        ImagePath = string.Empty
                    }
                };
            }

            var fileName = String.Format("{0}.jpg", Guid.NewGuid().ToString());
            var imagePath = Path.Combine(Server.MapPath(Url.Content("~/Content/UserImages")), fileName);

            imageFile.SaveAs(imagePath);

            var model = new StronaGlowna();
            if (!TryUpdateModel(model))
            {
            }
            model.MaleZdjecie = String.Format("~/Content/UserImages/{0}", fileName);

            return new WrappedJsonResult2
            {
                Data = new
                {
                    IsValid = true,
                    Message = string.Empty,
                    ImagePath = Url.Content(String.Format("~/Content/UserImages/{0}", fileName))
                }
            };
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:20:13.123

您可以尝试使用部分视图。下面的一些链接：

[http://highoncoding.com/Articles/638_Understanding_Partial_Views_in_ASP_NET_MVC_Application.aspx](http://highoncoding.com/Articles/638_Understanding_Partial_Views_in_ASP_NET_MVC_Application.aspx)

[http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)

希望它是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:55:07.813

这是问题-> public **WrappedJsonResult2 UploadImageSmall(HttpPostedFileWrapper imageFile2)**我忘记更改 imageFile 名称，因为在 JSON 事件中必须获得相同的参数名称。

# quartz.net - 简单作业的 SchedulerException

> ID：15626593
> 
> 赞同：2
> 
> 时间：2013-03-25T23:15:37.377
> 
> 标签：quartz.net, quartz.net-2.0

我正在尝试开始使用 Quartz.Net 2.0。一个非常简单的测试应用程序失败了`SchedulerException`

> 触发器的相关作业名称不能为空

代码改编自版本 2.0[迁移指南](http://quartznet.sourceforge.net/migration_guide.html)

```
ISchedulerFactory schedFact = new StdSchedulerFactory();
IScheduler classSched = schedFact.GetScheduler();
classSched.Start();
IJobDetail job = JobBuilder.Create<ClassificationJob>()
                    .WithIdentity("myJob", "My Group")
                    .WithDescription("My Description")
                    .Build();

TimeZoneInfo tzUtc = TimeZoneInfo.Utc;
DateTime startTime;

startTime = DateTime.UtcNow;

ITrigger trigger = TriggerBuilder.Create()
    .WithIdentity("myTrigger", "My Group")
    .WithDescription("My Description")
    .StartAt(startTime)
    .WithSimpleSchedule(x => x.WithIntervalInSeconds(10).RepeatForever())
    .Build();

classSched.ScheduleJob(trigger); // Exception on this line 
```

为什么会失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:39:04.580

我认为有两个问题。

首先，（尽管迁移指南中有示例），我认为您需要说明触发器与哪个作业相关，即调用 .ForJob 方法，例如

```
ITrigger trigger = TriggerBuilder.Create()
    .WithIdentity("myTrigger", "My Group")
    .WithDescription("My Description")
    .StartAt(startTime)
    .WithSimpleSchedule(x => x.WithIntervalInSeconds(10).RepeatForever())
    .ForJob(job)
    .Build(); 
```

其次，您用于安排作业的语法只有在作业之前已添加时才有效（例如，如果您之前调用过 classSched.AddJob(job,true); // 或 classSched.AddJob(job,false);

如果这还没有完成，那么您需要使用语法

```
 classSched.ScheduleJob(job, trigger); 
```

# css - YUI3 Y.Panel - 如何在页面加载时隐藏 HTML 内容？

> ID：15626594
> 
> 赞同：1
> 
> 时间：2013-03-25T23:15:40.813
> 
> 标签：css, yui, yui3

我有一个面板，我将其用作模式对话框，因此在页面加载时内容应该从视图中隐藏。但是，如果我使用 CSS 设置 div`display:none`或者`visibility:hidden`YUI `show()`&`hide()`方法无法正常工作（例如，单击按钮调用模态对话框会使屏幕变灰，但引用的 div 不会出现）。谁能指出我做到这一点的最佳方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:23:32.327

尝试添加`yui3-widget-loading`到容器中`div`。当 Y.Panel 被实例化时，它会移除这个类。然后您可以定义`.yui3-widget-loading { display:none; }`它在页面加载期间不可见。

# java - 从 servlet 读取 xml 文件

> ID：15626600
> 
> 赞同：2
> 
> 时间：2013-03-25T23:15:57.107
> 
> 标签：java, xml, servlets

我无法从我的 servlet 正确加载文件 xml：这就是代码：

```
 try{

           DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
           DocumentBuilder db = dbf.newDocumentBuilder();
           Document doc = db.parse("db.xml");
       } catch (Exception ex) {
       ex.printStackTrace();
           out.print("File Not Found!");
   } 
```

db.xml 位于类文件夹中，其中包含类和 java 文件...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:27:32.690

你需要使用`getResourceAsStream()`

```
 try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(getClass().getResourceAsStream("db.xml"));
    } catch (Exception ex) {
        ex.printStackTrace();
        out.print("File Not Found!");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:19:42.733

如果您在 war 文件的根文件夹中有 XML 文件，则可以使用上下文应用程序文件夹的[真实路径读取它。](http://www.mkyong.com/javaee/the-method-getrealpathstring-from-the-type-servletrequest-is-deprecated/)

```
String contextPath = request.getSession().getServletContext().getRealPath("/"); 
```

以另一种方式，您可以[在多模块环境中使用上下文类加载器](https://stackoverflow.com/questions/1771679/difference-between-threads-context-class-loader-and-normal-classloader)：

```
ClassLoader classloader = Thread.currentThread().getContextClassLoader()
Document doc = db.parse(classloader.getResourceAsStream(contextPath+ "/db.xml")); 
```

在某些环境中，不需要额外的斜线。

# javascript - 可以将常规 JavaScript 转换为 asm.js，还是只是为了加速静态类型的低级语言？

> ID：15626611
> 
> 赞同：61
> 
> 时间：2013-03-25T23:16:51.367
> 
> 标签：javascript, asm.js

我已阅读问题[如何使用 asm.js 进行测试和开发？](https://stackoverflow.com/questions/14953351/how-to-test-and-develop-with-asm-js)，并且接受的答案提供了指向[http://kripken.github.com/mloc_emscripten_talk/#/](http://kripken.github.com/mloc_emscripten_talk/#/)的链接。

该幻灯片的结论是“*静态类型的语言，尤其是 C/C++ 可以有效地编译为 JavaScript* ”，因此我们可以“*期望编译的 C/C++ 的速度仅比本地代码慢 2 倍，或者更好，今年晚些时候*”。

但是非静态类型的语言，比如常规的 JavaScript 本身呢？可以编译成asm.js吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-26T08:31:43.603

> JavaScript 本身可以编译成 asm.js 吗？

不是真的，因为它的动态特性。这与尝试将其编译[为 C](https://stackoverflow.com/q/5192223/1048572)甚至[本机代码](https://stackoverflow.com/q/2962210/1048572)时的问题相同——您实际上需要随它一起发布一个 VM 以处理这些非静态方面。至少，这样的虚拟机是可能的：

> > [js.js](https://github.com/jterrace/js.js)是 JavaScript 中的 JavaScript 解释器。[SpiderMonkey](https://developer.mozilla.org/en/SpiderMonkey)没有尝试从头开始创建解释器，而是将其编译为[LLVM](http://llvm.org/)，然后[emscripten](http://emscripten.org/)将输出转换为 JavaScript。

> 但是如果 asmjs 代码比普通 JS 运行得更快，那么将 JS 编译为 asmjs 是有意义的，不是吗？

不， [asm.js](http://asmjs.org/spec/latest/)是一个非常受限的 JS 子集，可以很容易地转换为字节码。然而，您首先需要将 JS 的所有高级功能分解为该子集才能获得此优势 - imo 是一项相当复杂的任务。但是 JavaScript 引擎经过设计和优化，可以将所有这些高级功能*直接*转换为字节码——那么为什么还要费心像 asm.js 这样的中间步骤呢？Js.js 声称比“原生”JS 慢 200 倍左右。

> 那么一般的非静态类型语言呢？

幻灯片讨论了[*……只是 C/C++？*](http://kripken.github.com/mloc_emscripten_talk/#/33)向前。具体来说：

> > [动态语言](http://kripken.github.com/mloc_emscripten_talk/#/37)
> > 
> > 可以编译整个 C/C++ 运行时并以适当的语义解释原始语言，但这不是轻量级的
> > 
> > 从这些语言到 JavaScript 的源到源编译器会忽略语义差异（例如，数字类型）
> > 
> > 实际上，这些语言依赖于特殊的虚拟机来提高效率
> > 
> > 他们的源到源编译器失去了在这些 VM 中所做的优化

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-11T00:12:15.757

回答一般问题“有可能吗？” 那么答案是肯定的，JavaScript 和 asm.js 子集都是图灵完备的，因此存在翻译。

是否应该这样做并期望性能收益是另一个问题。简短的回答是“不，你不应该”。我把这比作试图压缩一个压缩文件；是的，可以运行压缩算法，但通常您不应期望生成的文件更小。

**简短的回答：**动态类型语言的性能成本来自代码的含义；具有相同含义的静态类型程序将承担相同的成本。

要理解这一点，重要的是要理解*为什么*asm.js 提供了性能优势。或者，更一般地说，为什么静态类型的语言比动态类型的语言表现更好。简短的回答是“运行时类型检查需要时间”，更长的回答将包括优化静态类型代码的改进可行性。例如：

```
function a(x) { return x + 1; }
function b(x) { return x - 1; }
function c(x, y) { return a(x) + b(y); } 
```

如果`x`和`y`都已知是整数，我可以将函数优化`c`为几个机器代码指令。如果它们可以是整数或字符串，优化问题就会变得更加困难；在某些情况下，我必须将它们视为字符串附加，而在其他情况下则将其视为附加。特别是，发生在 中的加法运算有四种可能的解释`c`；它可以是加法，或字符串追加，或强制到字符串和追加的两种不同变体。随着您添加更多可能的类型，可能的排列数量会增加；在最坏的情况下，对于动态类型语言，您有*k^n 个*可能的表达式解释，其中涉及*n 个*项，每个项可能有任意数量的*k*类型。在静态类型语言中，k=1，因此任何给定表达式总是有 1 种解释。正因为如此，优化器在优化静态类型代码方面从根本上比动态类型代码更有效：在寻找优化机会时需要考虑的排列更少。

这里的重点是，当从动态类型代码转换为静态类型代码时（就像从 JavaScript 转换为 asm.js 时所做的那样），您必须考虑原始代码的语义。这意味着类型检查仍然会发生（它刚刚被拼写为静态类型代码）并且所有这些排列仍然存在以扼杀编译器。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-27T16:30:31.783

关于*asm.js*的一些事实，希望可以使概念清晰：

1.  是的，您可以手动编写*asm.js*方言。

    如果您确实查看了*asm.js*的示例，那么它们远非*用户友好*。显然，Javascript 不是创建此代码的前端语言。

2.  将 vanilla Javascript 翻译成*asm.js*方言是**不可能**的。

    想一想——如果你已经可以以完全静态的方式翻译标准 Javascript，为什么还需要*asm.js*呢？*asm.js*的唯一存在意味着 Javascript JIT 人员在一些人中放弃了他们的承诺，即 Javascript 将在没有开发人员任何努力的情况下变得更快。

    这有几个原因，但我们只能说**JIT**很难像理解静态编译器一样理解动态语言。然后可能让开发人员充分了解 JIT。

最后归结为使用正确的工具来完成任务。如果您想要静态的、高性能的代码，请使用*C* / *C++* ( / *Java* ) - 如果您想要动态语言，请使用*Javascript*、*Python* ......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-09T22:37:06.907

asm.js 的创建是为了有一小部分可以轻松优化的 javascript 子集。如果您有办法将 javascript 转换为 javascript/asm.js，则不再需要 asm.js - 该方法可以直接插入到 js 解释器中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-22T14:11:40.933

理论上，如果可以使用 asm.js 中存在的语言的有限子集来表达，则可以将任何 JavaScript 操作转换/编译/转译为 asm.js。然而，在实践中，目前没有工具能够将普通的 JavaScript 转换为 asm.js（2017 年 6 月）。

[无论哪种方式，将具有静态类型](https://stackoverflow.com/questions/1517582/what-is-the-difference-between-statically-typed-and-dynamically-typed-languages)的语言转换为 asm.js 会更有意义，因为静态类型是 asm.js 的要求，而缺少静态类型是普通 JavaScript 的特性之一，这使得编译成 asm 变得异常困难.js。

早在 2013 年 asm.js 大热的时候，就有尝试[编译类似 JavaScript 的静态类型语言](http://jlongster.com/Compiling-LLJS-to-asm.js,-Now-Available-)，但无论是语言还是编译器，似乎都被抛弃了。

今天，在 2017 年，JavaScipt 子集[TypeScript](https://www.typescriptlang.org/)和[Flow](https://flow.org/)将是转换为 asm.js 的合适候选者，但两种语言的核心开发团队都对这种转换不感兴趣。[LLJS](http://jlongster.com/Compiling-LLJS-to-asm.js,-Now-Available-)有一个可以编译为 asm.js 的 fork，但那个项目几乎已经死了。[ThinScript](https://github.com/evanw/thinscript)是最近的一次尝试，它基于 TypeScript，但它似乎也没有被激活。

因此，生成 asm.js 代码的最佳和最简单的方法仍然是用 C/C++ 编写代码并对其进行转换/编译/转译。然而，在可预见的未来，我们是否愿意这样做还有待观察。[Web Assembly](http://webassembly.org/)可能很快会完全取代 asm.js，并且已经出现了类似 TypeScript 的语言，例如[TurboScript](https://github.com/01alchemist/TurboScript)和[AssemblyScript](https://github.com/dcodeIO/AssemblyScript)，它们可以转换为 Web Assembly。事实上，TurboScript 最初是基于 ThinScript 并用于编译成 asm.js，但他们似乎已经放弃了这个功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-30T15:44:40.183

可以通过首先将常规 JavaScript[编译为 C](https://stackoverflow.com/a/31307856/975097)或 C++，然后使用[Emscripten](https://github.com/kripken/emscripten)将生成的代码编译为 asm.js 来将常规 JavaScript 转换为asm.js。我不确定这是否实用，但它仍然是一个有趣的概念。

还有一个名为[NectarJS](https://github.com/NectarJS/nectarjs)的编译器将 JavaScript 编译为 WebAssembly 和 ASM.js。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-25T23:48:21.220

检查这个[http://badassjs.com/post/43420901994/asm-js-a-low-level-highly-optimizable-subset-of](http://badassjs.com/post/43420901994/asm-js-a-low-level-highly-optimizable-subset-of)

基本上你需要检查你的代码是否与*asm.js*兼容（没有强制或类型转换，你需要管理内存等）。这背后的想法是用 javascript 编写代码，检测瓶颈并更改代码以使用 asm.js 和 aot 编译而不是 jit 和动态编译......有点 PITA 但你仍然可以使用 javascript 或其他像 c++ 或更好的语言......在不久的将来，lljs......

# jquery - jQuery动画导航栏，不能动画

> ID：15626615
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:17:16.617
> 
> 标签：jquery

好的，所以我有点困惑，我尝试了任何方法，但仍然无法为我的链接背景颜色设置动画，甚至是简单的警报，帮助我解决问题：

```
/* jQuery */

$(document).ready(function () {

    $("#menu a").mouseover(function () {
        $(this).animate({ "left": "-=50px" }, "slow");

    });

}); 
```

HTML：

```
<div id="menu">
<ul>
<li><a href="http://www.xn----2hckboeejufb0a1k.com/">One</a></li>
<li><a href="http://www.xn----2hckboeejufb0a1k.com/">Two</a></li>
<li><a href="http://www.xn----2hckboeejufb0a1k.com/">Three</a></li>
</ul>
</div> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:29:54.983

尝试添加不透明度兄弟。

$(this).animate({ opacity: 0.25, left: '-=50', height: 'toggle' }, 'slow');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:46:27.977

```
 $("#menu a").mouseover(function () {
        changeColor($(this),["olive","red","blue","white"]);
    });
    function changeColor(component,colors){
        var firstColor = colors[0];
        for(var i in colors){
            component.animate({ backgroundColor: colors[i]}, 'slow' , function(){
                if(colors.length < (i + 1)){
                    component.animate({ backgroundColor: colors[i + 1]},'slow',function(){
                        component.animate({ backgroundColor: firstColor}, 'slow');
                    });
                }
            });
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:21:45.420

你的例子工作得很好......见：http: [//jsfiddle.net/georeith/MhmAm/](http://jsfiddle.net/georeith/MhmAm/)

除非元素具有非静态位置属性，否则该`left`属性将不起作用。`a`

`background-colour`如果没有插件，您也无法为属性设置动画。见：[https ://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

否则，请确保您正确加载了 jQuery 库并检查控制台是否有任何错误。

# c# - 如何在 Web 用户控件中创建键值对属性

> ID：15626624
> 
> 赞同：0
> 
> 时间：2013-03-25T23:18:50.750
> 
> 标签：c#, asp.net, properties, webforms, web-user-controls

我想将值列表从页面传递给 Web 用户控件。

像这样的东西：

```
<uc:MyUserControl runat="server" id="MyUserControl">
    <DicProperty>
        <key="1" value="one">
        <key="2" value="two">
               ...
    </DicProperty>  
</uc:MyUserControl> 
```

如何在 Web 用户控件中创建某种键值对属性（字典、哈希表）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:56:14.633

`Dictionary`您可以在用户控件后面的代码中创建一个公共属性：

`public Dictionary<int, string> NameValuePair { get; set; }`

然后在创建新用户控件的表单的代码隐藏中，您可以填充该新属性：

```
Dictionary<int, string> newDictionary = new Dictionary<int, string>();

newDictionary.Add(1, "one");
newDictionary.Add(2, "two");
newDictionary.Add(3, "three");

MyUserControl.NameValuePair = newDictionary; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:36:01.083

我找到了一种解决方案：

```
public partial class MyUserControl : System.Web.UI.UserControl
{
    private Dictionary<string, string> labels = new Dictionary<string, string>();

    public LabelParam Param
    {
        private get { return null; }
        set
        { 
            labels.Add(value.Key, value.Value); 
        }
    }

    public class LabelParam : WebControl
    {
        public string Key { get; set; }
        public string Value { get; set; }

        public LabelParam() { }
        public LabelParam(string key, string value) { Key = key; Value = value; }
    }
} 
```

在页面上：

```
<%@ Register src="MyUserControl.ascx" tagname="MyUserControl" tagprefix="test" %>

<test:MyUserControl ID="MyUserControl1" runat="server">
    <Param Key="d1" value="ddd1" />
    <Param Key="d2" value="ddd2" />
    <Param Key="d3" value="ddd3" />
</test:MyUserControl> 
```

# ruby - 坚持 LearnStreet Ruby 培训。简单的 Ruby 代码第 5 课

> ID：15626625
> 
> 赞同：0
> 
> 时间：2013-03-25T23:18:51.240
> 
> 标签：ruby, methods

尝试使用新的 LearnStreet 在线教程学习 Ruby。

你现在能写一个方法add_interest吗！在帐户对象上，它采用一个参数百分比并将该百分比的余额添加到帐户中？

提示 2 调用参数为 10 的方法。

提示 1 百分比计算 - (@balance * percent)/100

我的尝试：

```
def account.add_interest!(percentage)
  (@balance * percentage)/100
end

account.add_interest!(10) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:53:27.733

我对 Ruby 很陌生，但只是想插话。如果您有任何问题，请告诉我。我有 95% 的把握这可以重构。

```
class Account
  def self.add_interest_to_current_balance(balance, percentage)
    percentage_amount_in_dollars = (percentage * balance)/(100)
    percentage_amount_in_dollars + balance
  end
end

puts Account.add_interest_to_current_balance(500, 10) #should return 550 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T12:29:40.000

这个答案对我有用，试一试：

```
def add_interest!(percentage)

  interest = (@balance * percentage)/100

  @balance = @balance + interest

end

account.add_interest!(10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:28:15.230

看来你需要设置`@balance`. 您的方法`add_interest!`仅返回值，但不会将`@balance`实例变量设置为新值。

```
def add_interest!(percentage)
  interest = (@balance * percentage)/100
  @balance = @balance + interest
end 
```

可能工作得更好。

在方法的末尾添加一个 bang`!`是与其他 Ruby 开发人员交流的一种常用方法，即该方法会做一些令人惊讶的事情，比如永久地改变一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T05:49:31.997

100% 在 learnstreet 上工作

```
def account.add_interest!(percentage)
     @balance = @balance + (@balance * percentage)/100
end

account.add_interest!(10) 
```

我也被困住了，之前：D

# latex - 从 .pdf 或 .tex 生成漂亮的 Web 文档

> ID：15626626
> 
> 赞同：0
> 
> 时间：2013-03-25T23:18:54.733
> 
> 标签：latex, documentation-generation

我在 LaTex 中为应用程序编写了一个文档，并且想知道在网页中显示的最佳方式是什么。我可以将它转换为 HTML，但我想知道是否有更好的方法来自动完成所有漂亮的 css 样式，就像在其他 web 文档中一样。

我正在寻找像 Sphinx 这样的东西，但从未使用过它，所以不确定它是否是已经在 .tex/.pdf 中制作的文档的一个很好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:24:31.967

这就是我所做的，（谢谢@Blender）

使用 tex4ht (texmaker) 将 Latex 文件导出为 html，并使用[pandoc](http://johnmacfarlane.net/pandoc/)将 html 文件转换为 reStructuresText，并编辑该 .rst 以符合[sphinx](http://sphinx-doc.org/)的规范。这是必要的，因为我想将乳胶文件分解为几个不同的 HTML 文件。

然后使用 sphinx 生成 PDF 文件。我想我会继续写 .rst，所以很容易将两者转换为 HTML 和 PDF。

添加答案，以便任何有相同问题的人都会得到一些想法。

# java - 将 RGB 颜色传递给 .setBackgroundColor

> ID：15626628
> 
> 赞同：3
> 
> 时间：2013-03-25T23:19:15.650
> 
> 标签：java, swing, colors, hex

我有一些颜色，以`RGB`格式编码：`121E31 hex`. 如何**将**这种颜色传递给**Java`Color`类**？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T23:21:49.620

这通常使用[decode](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#decode%28java.lang.String%29)完成：

```
Color color = Color.decode("0x121E31"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:24:37.083

“121E31”颜色的 RGB 值为：18,30,49

为此，请参阅[http://www.yellowpipe.com/yis/tools/hex-to-rgb/color-converter.php](http://www.yellowpipe.com/yis/tools/hex-to-rgb/color-converter.php)

现在可以使用 java 类添加这个 RGB 值，如下所示

颜色 c = 新颜色（18,30,49）；

# plugins - Typo3 使用 sr_include_pages 扩展将多个页面渲染到一个页面上

> ID：15626632
> 
> 赞同：0
> 
> 时间：2013-03-25T23:19:24.677
> 
> 标签：plugins, typo3

我是typo3的新手，我正在为我的客户创建这个网站。我想要实现的是将多个页面呈现到一个页面上。所以我做了一些研究并偶然发现了 sr_include_pages 扩展。根据描述，扩展完全符合我的需求，但对于我的生活，我无法让它发挥作用。到目前为止，这是我的页面设置：

*   六页
*   第一个有两条记录。一种是纯文本。另一个是 sr_include_pages 扩展（都在 colPos 0）
*   其他五页包含一条纯文本记录（暂时），每页都位于 colPos 0

在第一页我添加了一些简单的排版如下：

```
plugin.tx_srincludepages_pi1
page = PAGE
page.typeNum = 0
page.10 = CONTENT
page.10.table = tt_content
page.10.select{
  where = colPos = 0
}
page.10.renderObj = COA
page.10.renderObj{
  10 = TEXT
  10.field = header
  10.wrap = <h1>|</h1>
  20 = TEXT
  20.field = bodytext
  30 < plugin.tx_srincludepages_pi1
} 
```

当我切换到前端时，它会呈现所有内容（甚至是我在插件记录中添加的标题），但会呈现其他五页的内容。如果你们知道解决这个问题的更简单的方法，我对一切都开放

如果这是我在这里发布的一些菜鸟问题，我深表歉意。但我真的试着在发帖前做功课。谢谢！尖刺_mp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:26:18.657

如果你想硬编码页面ID，你应该没问题（包含css_styled_content）

page.10 < styles.content.get page.10.select.pidInList = 1,2,4

不过，不是很灵活。这是关于这个主题的主题 [http://lists.typo3.org/pipermail/typo3-english/2011-August/076460.html](http://lists.typo3.org/pipermail/typo3-english/2011-August/076460.html)

# c# - HTTPS 请求的正确形式

> ID：15626641
> 
> 赞同：2
> 
> 时间：2013-03-25T23:20:28.980
> 
> 标签：c#, httprequest, webclient

我需要发送 POST 请求并接收访问令牌。Http 请求应如下所示：

```
POST /oauth/token HTTP/1.1
Host: api.quizlet.com
Authorization: Basic c3ZWRUhNZVA0aDp3eS4yUXA0ZXNFY0xQUFl2WkRFTGpn
Content-Type: application/x-www-form-urlencoded; charset=UTF-8

grant_type=authorization_code&code=GENERATED_CODE 
```

我不知道如何在我的请求中发送“grant_type”和“code”，因为（根据我测试过的 Fiddler）它们应该在请求正文中。

我的代码如下所示：

```
 client = new WebClient();
            client.Headers[HttpRequestHeader.Authorization] = "Basic " +       "MY_SECRET_CODE";
            client.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            client.Headers[HttpRequestHeader.Host] = "api.quizlet.com";
            client.Headers[HttpRequestHeader.AcceptCharset] = "UTF-8";
            client.UploadStringCompleted += ClientOnUploadStringCompleted;
            client.UploadStringAsync(tokenUrl, "POST",string.Format("grant_type={0}&code={1}",
                                                   HttpUtility.HtmlEncode("authorization_code"),HttpUtility.HtmlEncode(code))); 
```

顺便说一句，这段代码在 WP7 上运行，我已经搞砸了这个单一的请求将近 2 天，而我在请求中提供的那些值是 100% 正确的，因为我试图在 Fiddler 中粘贴示例请求并收到正确的令牌。

编辑：我忘记了数据中的 redirect_uri 参数，我试图上传，所以它不起作用......正确的数据字符串应该如下所示：

```
 string.Format("grant_type={0}&code={1}&redirect_uri={2}",
            HttpUtility.HtmlEncode("authorization_code"),HttpUtility.HtmlEncode(code),    HttpUtility.HtmlEncode("http://someurl.com")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:27:29.330

至少一个问题似乎是目标服务器的预期字符集应该设置在 ContentType 标头中，而不是 AcceptCharset：

```
 client.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded; charset=UTF-8";
            client.Headers[HttpRequestHeader.Host] = "api.quizlet.com";
            //client.Headers[HttpRequestHeader.AcceptCharset] = "UTF-8"; 
```

# c - 32 位与 64 位编译

> ID：15626642
> 
> 赞同：1
> 
> 时间：2013-03-25T23:20:36.397
> 
> 标签：c, macos, gcc, assembly

我正在尝试构建 libgloss，但是当我运行 make 时，我收到一系列与我的 64 位 osx 相关的消息：

```
/libgloss/i386/cygmon-crt0.S:76:suffix or operands invalid for `push' 
```

当我查看这个文件时，我得到了`movl`32`pushl`位序列。但我找不到正确的选项来添加`make`以编译为 32 位。有人有想法吗？我用谷歌搜索了它，我找到了一些选项，但它没有用（比如`--32`......）

# html - Chrome Table 未扩展 div

> ID：15626649
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:21:17.063
> 
> 标签：html, css, google-chrome, css-tables

目前，我的网站在 Firefox、IE 和 Safari 中运行良好，但有一部分在 Chrome 中无法运行。

看一眼：`http://tinyurl . com/chxg2tb`

底部的表格在 Chrome 中扩展超出了内容边框，而不是像在 Firefox、IE 和 Safari 中那样扩展边框。

这让我很困惑，因为通常像这样的错误发生在 Firefox 和 IE 工作正常，然后 webkit 浏览器不工作，但在这种情况下它只是 Chrome。

由于某种原因，该表没有扩展父 div，我不知道为什么。

我唯一能想到的是溢出的东西，但我一直无法让它合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:41:52.597

这不是最好的解决方案，但您可以创建一个包装表格的 div 并像这样设置 div css：

```
height: 120px; 
```

# php - PHP 变量返回一个空值

> ID：15626658
> 
> 赞同：1
> 
> 时间：2013-03-25T23:21:46.500
> 
> 标签：php, html, mysql, forms, textbox

我创建了一个文本框，因此当管理员键入名称并单击提交时，它将显示从数据库中检索到的数据列表。

```
 <form method="post" action="">
        <?php 
        $teacherName = $_POST['teacherName'];
        if ($_POST['submitted'] == 1) {
            if($teacherName != ""){
                $getName = mysql_query("SELECT name, user_id FROM members WHERE name = '$teacherName'");
                $teacherdetails = mysql_fetch_array($getName);
                $teachername = $teacherdetails['name'];
                $teacher_id = $teacherdetails['user_id'];

                if($teachername != ""){
                    print $teachername . "<br/>";
                } else {
                    print "Give a valid name <br/>";
                }     
            }
        }

        if ($teachername == ""){ ?>
        Teacher name:<input type="text" size="20" name="teacherName"><input type="hidden" name="submitted" value="1"><br/>
      <input type="submit" value="Submit" /> 

<?php $getModule = mysql_query("......"); 
          while ($row2 = mysql_fetch_array($getModule)) { ?>   
          <input type="checkbox" name="modules[]" value="<?php print $row2["module_id"]?>"/> <?php print $row2["module_name"] . '<br/>'; } ?>
          </div><br/> <?php } ?>
          <input type="submit" value="Submit" />
</form> 
```

下面我写了这段代码（在同一个脚本中）：

```
<?php

$modules = $_POST['modules'];

for($i = 0; $i < count($modules); $i++){
    $module=mysql_query("INSERT INTO module (module_id,user_id) VALUES ('$modules[$i]','$teacher_id')"); 
}
?> 
```

但是由于某种原因，当我调用变量“$teacher_id”（这是我之前从数据库中检索到的值。它在表单中工作正常）时，它什么也不返回。它是空的，但我不明白为什么。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:29:25.807

首先，将 PHP 放在表单标签之外的顶部。

其次，您收到的数据可能是一个数组；具有多个结果集；

这样做只是以防它返回；

```
 foreach($teacherdetails AS $teacher) {
//also set the values of the variables here
echo $teacher['name'];
echo $teacher['user_id'];

} 
```

关于最后一点，$teacher_id 是否成功打印了结果？

另外，输入和发布的模块在哪里？

# java - 如何实现高效的 Alpha-Beta 修剪游戏搜索树？

> ID：15626660
> 
> 赞同：0
> 
> 时间：2013-03-25T23:21:53.620
> 
> 标签：java, android, artificial-intelligence, game-theory, alpha-beta-pruning

我正在尝试学习人工智能以及如何在程序中实现它。最容易开始的地方可能是简单的游戏（在本例中为井字游戏）和游戏搜索树（递归调用；不是实际的数据结构）。[我](http://www.youtube.com/watch?v=Unh51VnD-hA)在有关该主题的讲座中发现了这个非常有用的视频。

我遇到的问题是对算法的第一次调用需要很长时间（大约 15 秒）才能执行。我已经在整个代码中放置了调试日志输出，似乎它调用了算法的某些部分的次数过多。

以下是为计算机选择最佳移动的方法：

```
 public Best chooseMove(boolean side, int prevScore, int alpha, int beta){
    Best myBest = new Best(); 
    Best reply;

    if (prevScore == COMPUTER_WIN || prevScore == HUMAN_WIN || prevScore == DRAW){
        myBest.score = prevScore;
        return myBest;
    }

    if (side == COMPUTER){
        myBest.score = alpha;
    }else{
        myBest.score = beta;
    }
    Log.d(TAG, "Alpha: " + alpha + " Beta: " + beta + " prevScore: " + prevScore);
    Move[] moveList = myBest.move.getAllLegalMoves(board);
    for (Move m : moveList){
        String choice;
        if (side == HUMAN){
            choice = playerChoice;
        }else if (side == COMPUTER && playerChoice.equals("X")){
            choice = "O";
        }else{
            choice = "X";
        }
        Log.d(TAG, "Current Move: column- " + m.getColumn() + " row- " + m.getRow());
        int p = makeMove(m, choice, side);
        reply = chooseMove(!side, p, alpha, beta);
        undoMove(m);
        if ((side == COMPUTER) && (reply.score > myBest.score)){
            myBest.move = m;
            myBest.score = reply.score;
            alpha = reply.score;
        }else if((side == HUMAN) && (reply.score < myBest.score)){
            myBest.move = m;
            myBest.score = reply.score;
            beta = reply.score;
        }//end of if-else statement
        if (alpha >= beta) return myBest;
    }//end of for loop
    return myBest;
} 
```

`makeMove`如果该点为空并返回一个值（-1 - 人类获胜，0 - 平局，1 - 计算机获胜，-2 或 2 - 否则），则该方法进行移动。虽然我相信错误可能出在`getAllLegalMoves`方法中：

```
 public Move[] getAllLegalMoves(String[][] grid){
    //I'm unsure whether this method really belongs in this class or in the grid class, though, either way it shouldn't matter.
    items = 0;
    moveList = null;
    Move move = new Move();

    for (int i = 0; i < 3; i++){
        for(int j = 0; j < 3; j++){
            Log.d(TAG, "At Column: " + i + " At Row: " + j);
            if(grid[i][j] == null || grid[i][j].equals("")){
                Log.d(TAG, "Is Empty");
                items++;
                if(moveList == null || moveList.length < items){
                    resize();
                }//end of second if statement
                move.setRow(j);
                move.setColumn(i);
                moveList[items - 1] = move;
            }//end of first if statement
        }//end of second loop
    }//end of first loop
    for (int k = 0; k < moveList.length; k++){
        Log.d(TAG, "Count: " + k + " Column: " + moveList[k].getColumn() + " Row: " + moveList[k].getRow());
    }
    return moveList;
}

private void resize(){
    Move[] b = new Move[items];
    for (int i = 0; i < items - 1; i++){
        b[i] = moveList[i];
    }
    moveList = b;
} 
```

**总而言之：**是什么导致我的电话，选择最好的举动，花了这么长时间？我错过了什么？有没有更简单的方法来实现这个算法？任何帮助或建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:53:01.297

带有 alpha beta 剪枝的极小极大树应该被可视化为一棵树，树的每个节点都是一个可能的移动，许多轮到未来，它的子节点是可以从中获取的所有移动。

为了尽可能快并保证您只需要与您向前看的移动次数线性空间，您进行深度优先搜索并从一侧“扫描”到另一侧。例如，如果您想象要构建整个树，那么您的程序实际上一次只会构建一个从引导到根的单链，并丢弃它完成的任何部分。

我现在只是要复制维基百科的伪代码，因为它非常非常简洁明了：

```
function alphabeta(node, depth, α, β, Player)         
    if  depth = 0 or node is a terminal node
        return score
    if  Player = MaxPlayer
        for each child of node
            α := max(α, alphabeta(child, depth-1, α, β, not(Player) ))     
            if β ≤ α
                break                             (* Beta cut-off *)
        return α
    else
        for each child of node
            β := min(β, alphabeta(child, depth-1, α, β, not(Player) ))     
            if β ≤ α
                break                             (* Alpha cut-off *)
        return β 
```

笔记：

-'for each child of node' - 与其编辑当前棋盘的状态，不如*创建一个全新的棋盘，它是应用移动的结果。*通过使用不可变对象，您的代码将不太容易出现错误，并且通常可以更快地进行推理。

-要使用此方法，请为您可以从当前状态进行的每一个可能的移动调用它，给它深度 -1，-Infinity 为 alpha，+Infinity 为 beta，并且它应该从轮到不动的玩家开始在这些调用中 - 返回最高值的调用是最好的调用。

这在概念上非常简单。如果你编码正确，那么你永远不会一次实例化超过（深度）板，你永远不会考虑无意义的分支等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:06:50.690

我不会为你分析你的代码，但由于这是一个很好的编码 kata，我为井字游戏写了一个小 ai：

```
import java.math.BigDecimal;

public class Board {

    /**
     * -1: opponent
     * 0: empty
     * 1: player
     */
    int[][] cells = new int[3][3];

    /**
     * the best move calculated by eval(), or -1 if no more moves are possible
     */
    int bestX, bestY;

    int winner() {
        // row
        for (int y = 0; y < 3; y++) {
            if (cells[0][y] == cells[1][y] && cells[1][y] == cells[2][y]) {
                if (cells[0][y] != 0) {
                    return cells[0][y];
                }
            }
        }

        // column
        for (int x = 0; x < 3; x++) {
            if (cells[x][0] == cells[x][1] && cells[x][1] == cells[x][2]) {
                if (cells[x][0] != 0) {
                    return cells[x][0];
                }
            }
        }

        // 1st diagonal
        if (cells[0][0] == cells[1][1] && cells[1][1] == cells[2][2]) {
            if (cells[0][0] != 0) {
                return cells[0][0];
            }
        }

        // 2nd diagonal
        if (cells[2][0] == cells[1][1] && cells[1][1] == cells[0][2]) {
            if (cells[2][0] != 0) {
                return cells[2][0];
            }
        }

        return 0; // nobody has won
    }

    /**
     * @return 1 if side wins, 0 for a draw, -1 if opponent wins
     */
    int eval(int side) {
        int winner = winner();
        if (winner != 0) {
            return side * winner;
        } else {
            int bestX = -1;
            int bestY = -1;
            int bestValue = Integer.MIN_VALUE;
        loop:
            for (int y = 0; y < 3; y++) {
                for (int x = 0; x < 3; x++) {
                    if (cells[x][y] == 0) {
                        cells[x][y] = side;
                        int value = -eval(-side);
                        cells[x][y] = 0;

                        if (value > bestValue) {
                            bestValue = value;
                            bestX = x;
                            bestY = y;
                            if (bestValue == 1) {
                                // it won't get any better, we might as well stop thinking
                                break loop;
                            }
                        }
                    }
                }
            }
            this.bestX = bestX;
            this.bestY = bestY;
            if (bestValue == Integer.MIN_VALUE) {
                // there were no moves left, it must be a draw!
                return 0;
            } else {
                return bestValue;
            }
        }
    }

    void move(int side) {
        eval(side);
        if (bestX == -1) {
            return;
        }
        cells[bestX][bestY] = side;
        System.out.println(this);

        int w = winner();
        if (w != 0) {
            System.out.println("Game over!");
        } else {
            move(-side);
        }
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        char[] c = {'O', ' ', 'X'};
        for (int y = 0; y < 3; y++) {
            for (int x = 0; x < 3; x++) {
                sb.append(c[cells[x][y] + 1]);
            }
            sb.append('\n');
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        long start = System.nanoTime();
        Board b = new Board();
        b.move(1);
        long end = System.nanoTime();
        System.out.println(new BigDecimal(end - start).movePointLeft(9));
    }
} 
```

精明的读者会注意到我不使用 alpha/beta 截止值。尽管如此，在我有点过时的笔记本上，这在 0.015 秒内完成了一场比赛......

没有分析你的代码，我不能确定问题是什么。但是，您在搜索树的每个节点上记录每个可能的移动可能与它有关。

# c# - 从 RotateTransform3D 获取数据

> ID：15626661
> 
> 赞同：1
> 
> 时间：2013-03-25T23:21:56.030
> 
> 标签：c#, wpf, rotatetransform

我用这个 C# 代码设置了我的 RotateTransform3D：

```
rotation = new RotateTransform3D(
    new AxisAngleRotation3D(new Vector3D(0, 0, 1),
    Convert.ToDouble(5)),
    new Point3D(0, 0, 0)
); 
```

我如何找回“5”？如果我做

```
MessageBox.Show(rotation.Rotation.toString()) 
```

它说`System.Windows.Media.Media3D.AxisAngleRotation3D`但是“.Rotation”应该产生一个`Rotation3D`对象，就像[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.rotatetransform3d.rotation.aspx)说的那样。

我怎样才能做到这一点？

**编辑**：其他信息

在我的代码中，我将其设置`RotateTransform3D`为 a 内的孩子`Transform3DGroup`：

```
myGroupArray[0].Children.Add(
    new RotateTransform3D(
        new AxisAngleRotation3D(new Vector3D(0, 0, 1),
        Convert.ToDouble(5)),
        new Point3D(0, 0, 0)
    )
); 
```

在另一个函数中，我尝试用这个来恢复我的“5”：

```
RotateTransform3D rotation = new RotateTransform3D();
rotation = (RotateTransform3D)myGroupArray[0].Children[0]; 
```

现在，即使在做

```
MessageBox.Show(rotation.Rotation.Angle.ToString()); 
```

导致错误，因为`Rotation3D`不包含`Angle`属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:39:37.950

它适用于

```
MessageBox.Show((rotation.Rotation as AxisAngleRotation3D).Angle.ToString()); 
```

感谢 iTateSLC（从[这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d33068e6-4d9a-4178-ab1c-a7d0166806cc)）的解决方案：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:52:26.060

`5`你在你的构造函数中传入的是[MSDN](http://msdn.microsoft.com/en-us/library/ms602556.aspx)也说`AxisAngleRotation3D`的“角度” 。因此，您应该能够从 Rotation 中检索它：

```
MessageBox.Show((rotation.Rotation as AxisAngleRotation3D).Angle.ToString()); 
```

`System.Windows.Media.Media3D.AxisAngleRotation3D`继承自`Rotation3D`因此它是一个`Rotation3D`。

编辑：我错过了需要演员表。原因是`RotateTransform3D`该类将旋转定义为 - 的基类，`AxisAngleRotation3D`它没有该`Angle`属性。由于您知道您已经使用实际创建了它，因此`AxisAngleRotation3D`您可以将其转换为一个。

# excel - 我将如何获取excel列表

> ID：15626667
> 
> 赞同：0
> 
> 时间：2013-03-25T23:22:22.043
> 
> 标签：excel

我有一个电子表格，其中一列有很多条目。我想在它旁边创建一个列，其中包含第一列的值，这些值平均是第一个原始列的 16 个条目。基本上我只想平均每 16 个值并创建一个新列，该列的长度是原始值的 1/16。有没有简单的方法在excel中做到这一点？我有这些数据的文本文件，用于创建数据列，因此我总是可以编写一个 python 脚本来执行此操作..但这似乎很麻烦。谢谢！~安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:37:16.297

假设您的列的值从单元格开始`A1`并从那里向下，那么您可以使用以下公式`B1`

```
=AVERAGE(OFFSET($A$1,16*(ROW()-1),0,16)) 
```

从那里开始，选择`B1`并下拉右下角以填充其他值。

# matlab - 将矩阵的部分提取到单元阵列中

> ID：15626670
> 
> 赞同：0
> 
> 时间：2013-03-25T23:22:28.300
> 
> 标签：matlab, matrix, octave, vectorization, cell-array

我有一个相当大的矩阵`M`，我只对其中的几列感兴趣。我有一个布尔向量`V`，其中的值`1`表示感兴趣的列。例子：

```
 -1 -1 -1  7  7 -1 -1 -1  7  7  7
M  =  -1 -1  7  7  7 -1 -1  7  7  7  7
      -1 -1  7  7  7 -1 -1 -1  7  7 -1

V  =   0  0  1  1  1  0  0  1  1  1  1 
```

如果 的多个相邻值`V`都是`1`，那么我希望将 的相应列`M`提取到另一个矩阵中。这是一个示例，使用之前的矩阵。

```
 -1  7  7             -1  7  7  7
M1  =  7  7  7       M2  =  7  7  7  7
       7  7  7             -1  7  7 -1 
```

我怎样才能有效地做到这一点？我希望矩阵的所有这些部分都`M`存储在一个单元阵列中，或者至少有一种有效的方法来一个接一个地生成它们。目前我在一个while循环中这样做，它没有我想要的那么有效。

（请注意，我的示例仅包含值`-1`，`7`只是为了清楚起见；这不是我使用的实际数据。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:06:21.170

我不确定的一件事是是否有更好的方法来找到`being_indices`and `end_indices`。

代码：

```
X = [1     2     3     4     5     1     2     3     4     5
     6     7     8     9    10     6     7     8     9    10
    11    12    13    14    15    11    12    13    14    15
    16    17    18    19    20    16    17    18    19    20
     1     2     3     4     5     1     2     3     4     5
     6     7     8     9    10     6     7     8     9    10
    11    12    13    14    15    11    12    13    14    15
    16    17    18    19    20    16    17    18    19    20];

V = logical([ 1     1     0     0     1     1     1     0     1    1]);

find_indices = find(V);
begin_indices = [find_indices(1)  find_indices(find(diff(find_indices) ~= 1)+1)];
end_indices = [find_indices(find(diff(find_indices) ~= 1)) find_indices(end)];

X_truncated = mat2cell(X(:,V),size(X,1),[end_indices-begin_indices]+1);
X_truncated{:} 
```

输出：

```
ans =

     1     2
     6     7
    11    12
    16    17
     1     2
     6     7
    11    12
    16    17

ans =

     5     1     2
    10     6     7
    15    11    12
    20    16    17
     5     1     2
    10     6     7
    15    11    12
    20    16    17

ans =

     4     5
     9    10
    14    15
    19    20
     4     5
     9    10
    14    15
    19    20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:20:47.350

您可以利用此`diff`功能，将您的`V`矢量分成块

```
% find where block differences exist
diffs = diff(V);
% move start index one value forward, as first value in
% diff represents diff between first and second in original vector
startPoints = find(diffs == 1) + 1;
endPoints = find(diffs == -1);

% if the first block begins with the first element diff won't have
% found start
if V(1) == 1
    startPoints = [1 startPoints];
end

% if last block lasts until the end of the array, diff won't have found end
if length(startPoints) > length(endPoints)
    endPoints(end+1) = length(V);
end

% subset original matrix into cell array with indices
results = cell(size(startPoints));
for c = 1:length(results)
    results{c} = M(:,startPoints(c):endPoints(c));
end 
```

# python - python中具有巨大矩阵的矩阵运算

> ID：15626673
> 
> 赞同：5
> 
> 时间：2013-03-25T23:22:49.927
> 
> 标签：python, python-2.7, numpy, matrix-multiplication, adjacency-matrix

有人知道如何在 python 中使用巨大的矩阵吗？我必须使用形状为 (10^6,10^6) 的邻接矩阵并执行包括加法、缩放和点积在内的操作。使用 numpy 数组我遇到了 ram 问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T21:22:19.727

How about something like this...

```
import numpy as np

# Create large arrays x and y.
# Note they are 1e4 not 1e6 b/c of memory issues creating random numpy matrices (CookieOfFortune) 
# However, the same principles apply to larger arrays
x = np.random.randn(10000, 10000)
y = np.random.randn(10000, 10000)

# Create memory maps for x and y arrays
xmap = np.memmap('xfile.dat', dtype='float32', mode='w+', shape=x.shape)
ymap = np.memmap('yfile.dat', dtype='float32', mode='w+', shape=y.shape)

# Fill memory maps with data
xmap[:] = x[:]
ymap[:] = y[:]

# Create memory map for out of core dot product result
prodmap = np.memmap('prodfile.dat', dtype='float32', mode='w+', shape=x.shape)

# Due out of core dot product and write data
prodmap[:] = np.memmap.dot(xmap, ymap)

# Create memory map for out of core addition result
addmap = np.memmap('addfile.dat', dtype='float32', mode='w+', shape=x.shape)

# Due out of core addition and write data
addmap[:] = xmap + ymap

# Create memory map for out of core scaling result
scalemap = np.memmap('scalefile.dat', dtype='float32', mode='w+', shape=x.shape)

# Define scaling constant
scale = 1.3

# Do out of core  scaling and write data
scalemap[:] = scale * xmap 
```

This code will create files xfile.dat, yfile.dat, ect that contain the arrays in binary format. To access them later you simply need to do `np.memmap(filename)`. Other arguments to `np.memmap` are optional, but reccomended (arguments like dtype, shape, ect.).

# jquery-ui - 无法在初始化之前调用对话框上的方法；试图调用方法“选项”

> ID：15626675
> 
> 赞同：2
> 
> 时间：2013-03-25T23:23:05.593
> 
> 标签：jquery-ui, jquery-ui-dialog

我在我的应用程序中使用对话框。但是我在为 IE 优化我的页面时遇到了一些问题。在我的`document.ready`函数中，我称之为

```
$("#DFormExport").dialog({
resizable: true,
modal: false,
autoOpen: false,
width: 750
}); 
```

初始化我的对话框，然后当用户点击按钮时我调用它，因为 mydialog 中按钮的类型取决于某些用户选择

```
$("#DFormExport").dialog("option", "buttons", {
     "Vytisknout": function () {
       loading(1);
       tiskText($("#DExportCo").attr("href"),"", $("#DExportCo").attr("rm"));
      },
      Zrušit: function () {
        $(this).dialog("close");
       }
}).dialog('option', 'title', 'Vytisknout'); 
```

在 chrome 和 FF 中一切正常，但在 IE 中我得到了`cannot call methods on dialog prior to initialization; attempted to call method 'option'`

那么有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:16:52.970

所以我终于找到了解决方案。为了修复 IE 错误，我只是在创建过程中将对话框保存到变量`var dialog=$("#DFormExport").dialog({...})`，然后`dialog.dialog("option", "buttons", {....})`改为调用

# java - 解析xml的更好方法

> ID：15626686
> 
> 赞同：8
> 
> 时间：2013-03-25T23:24:29.130
> 
> 标签：java, xml, sax

多年来我一直在解析这样的 XML，我不得不承认，当不同元素的数量变大时，我觉得这样做有点无聊和筋疲力尽，这就是我的意思，示例虚拟 XML：

```
<?xml version="1.0"?>
<Order>
    <Date>2003/07/04</Date>
    <CustomerId>123</CustomerId>
    <CustomerName>Acme Alpha</CustomerName>
    <Item>
        <ItemId> 987</ItemId>
        <ItemName>Coupler</ItemName>
        <Quantity>5</Quantity>
    </Item>
    <Item>
        <ItemId>654</ItemId>
        <ItemName>Connector</ItemName>
        <Quantity unit="12">3</Quantity>
    </Item>
    <Item>
        <ItemId>579</ItemId>
        <ItemName>Clasp</ItemName>
        <Quantity>1</Quantity>
    </Item>
</Order> 
```

这是相关部分（使用 sax）：

```
public class SaxParser extends DefaultHandler {

    boolean isItem = false;
    boolean isOrder = false;
    boolean isDate = false;
    boolean isCustomerId = false;
    private Order order;
    private Item item;

        @Override
    public void startElement(String namespaceURI, String localName, String qName, Attributes atts) {
        if (localName.equalsIgnoreCase("ORDER")) {
            order = new Order();
        }

        if (localName.equalsIgnoreCase("DATE")) {
            isDate = true;
        }

        if (localName.equalsIgnoreCase("CUSTOMERID")) {
            isCustomerId = true;
        }

        if (localName.equalsIgnoreCase("ITEM")) {
            isItem = true;
        }
    }

    public void characters(char ch[], int start, int length) throws SAXException {

        if (isDate){
            SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM/dd");
            String value = new String(ch, start, length);
            try {
                order.setDate(formatter.parse(value));
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }

        if(isCustomerId){
            order.setCustomerId(Integer.valueOf(new String(ch, start, length)));
        }

        if (isItem) {
            item = new Item();
            isItem = false;
        }

    }

} 
```

我想知道有没有办法摆脱这些随着元素数量不断增长的可怕布尔值。一定有更好的方法来解析这个相对简单的xml。仅通过查看执行此任务所需的代码行看起来很难看。

目前我正在使用 SAX 解析器，但我愿意接受任何其他建议（除了 DOM，我在内存解析器中买不起我有巨大的 XML 文件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T23:59:20.807

如果您控制 XML 的定义，则可以使用 XML 绑定工具，例如**JAXB**（用于 XML 绑定的 Java 体系结构）。在 JAXB 中，您可以为 XML 结构定义模式（支持 XSD 和其他）或注释您的 Java类以定义序列化规则。一旦您在 XML 和 Java 之间建立了清晰的声明式映射，对 XML 的编组和解组就变得微不足道了。

使用 JAXB 确实需要比 SAX 处理程序更多的内存，但是存在按部分处理 XML 文档的方法：[处理大型文档](http://jaxb.java.net/guide/Dealing_with_large_documents.html)。

[Oracle 的 JAXB 页面](http://www.oracle.com/technetwork/articles/javase/index-140168.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T11:26:42.290

这是一个将 JAXB 与 StAX 结合使用的示例。

输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Personlist xmlns="http://example.org">
    <Person>
        <Name>Name 1</Name>
        <Address>
            <StreetAddress>Somestreet</StreetAddress>
            <PostalCode>00001</PostalCode>
            <CountryName>Finland</CountryName>
        </Address>
    </Person>
    <Person>
        <Name>Name 2</Name>
        <Address>
            <StreetAddress>Someotherstreet</StreetAddress>
            <PostalCode>43400</PostalCode>
            <CountryName>Sweden</CountryName>
        </Address>
    </Person>
</Personlist> 
```

人.java：

```
@XmlRootElement(name = "Person", namespace = "http://example.org")
public class Person {
    @XmlElement(name = "Name", namespace = "http://example.org")
    private String name;
    @XmlElement(name = "Address", namespace = "http://example.org")
    private Address address;

    public String getName() {
        return name;
    }

    public Address getAddress() {
        return address;
    }
} 
```

地址.java：

```
public class Address {
    @XmlElement(name = "StreetAddress", namespace = "http://example.org")
    private String streetAddress;
    @XmlElement(name = "PostalCode", namespace = "http://example.org")
    private String postalCode;
    @XmlElement(name = "CountryName", namespace = "http://example.org")
    private String countryName;

    public String getStreetAddress() {
        return streetAddress;
    }

    public String getPostalCode() {
        return postalCode;
    }

    public String getCountryName() {
        return countryName;
    }
} 
```

个人列表处理器.java：

```
public class PersonlistProcessor {
    public static void main(String[] args) throws Exception {
        new PersonlistProcessor().processPersonlist(PersonlistProcessor.class
                .getResourceAsStream("personlist.xml"));
    }

    // TODO: Instead of throws Exception, all exceptions should be wrapped
    // inside runtime exception
    public void processPersonlist(InputStream inputStream) throws Exception {
        JAXBContext jaxbContext = JAXBContext.newInstance(Person.class);
        XMLStreamReader xss = XMLInputFactory.newFactory().createXMLStreamReader(inputStream);
        // Create unmarshaller
        Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        // Go to next tag
        xss.nextTag();
        // Require Personlist
        xss.require(XMLStreamReader.START_ELEMENT, "http://example.org", "Personlist");
        // Go to next tag
        while (xss.nextTag() == XMLStreamReader.START_ELEMENT) {
            // Require Person
            xss.require(XMLStreamReader.START_ELEMENT, "http://example.org", "Person");
            // Unmarshall person
            Person person = (Person)unmarshaller.unmarshal(xss);
            // Process person
            processPerson(person);
        }
        // Require Personlist
        xss.require(XMLStreamReader.END_ELEMENT, "http://example.org", "Personlist");
    }

    private void processPerson(Person person) {
        System.out.println(person.getName());
        System.out.println(person.getAddress().getCountryName());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:48:02.343

在 SAX 中，解析器将事件“推送”到您的处理程序，因此您必须像在这里习惯的那样做所有的内务处理。另一种选择是 StAX（`javax.xml.stream`包），它仍在流式传输，但您的代码负责从解析器“拉”事件。这样，在程序的控制流中编码了哪些元素的逻辑以什么顺序被编码，而不必用布尔值显式表示。

根据 XML 的精确结构，可能存在使用[XOM](http://xom.nu)之类的工具包的“中间方式” ，它具有一种操作模式，您可以将文档的子树解析为类似 DOM 的对象模型，处理该树枝，然后抛出它离开并解析下一个。这对于具有许多相似元素的重复文档很有用，每个元素都可以单独处理 - 您可以轻松地在每个树枝中对基于树的 API 进行编程，但仍然具有流式处理行为，可以让您有效地解析大型文档。

```
public class ItemProcessor extends NodeFactory {
  private Nodes emptyNodes = new Nodes();

  public Nodes finishMakingElement(Element elt) {
    if("Item".equals(elt.getLocalName())) {
      // process the Item element here
      System.out.println(elt.getFirstChildElement("ItemId").getValue()
         + ": " + elt.getFirstChildElement("ItemName").getValue());

      // then throw it away
      return emptyNodes;
    } else {
      return super.finishMakingElement(elt);
    }
  }
} 
```

您可以使用 StAX 和 JAXB 的组合来实现类似的事情 - 定义代表您的重复元素（本例中的 Item）的 JAXB 注释类，然后创建一个 StAX 解析器，导航到第一个`Item`开始标记，然后您可以解组一个完整的`Item`一次从`XMLStreamReader`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T21:27:06.033

我一直在使用这个库。它位于标准 Java 库之上，让我的工作变得更轻松。特别是，您可以按名称请求特定元素或属性，而不是使用您描述的大“if”语句。

[http://marketmovers.blogspot.com/2014/02/the-easy-way-to-read-xml-in-java.html](http://marketmovers.blogspot.com/2014/02/the-easy-way-to-read-xml-in-java.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T00:06:19.353

我一直在使用[xsteam](http://xstream.codehaus.org/)将我自己的对象序列化为 xml，然后将它们作为 Java 对象加载回来。如果您可以将所有内容表示为 POJO，并且正确地注释 POJO 以匹配 xml 文件中的类型，您可能会发现它更易于使用。

当一个 String 表示 XML 中的一个对象时，您可以只写：

`Order theOrder = (Order)xstream.fromXML(xmlString);`

我一直使用它在一行中将对象加载到内存中，但是如果您需要对其进行流式传输并随时处理，您应该能够使用[HierarchicalStreamReader](http://xstream.codehaus.org/javadoc/index.html)来遍历文档。这可能与@Dave 建议的 Simple 非常相似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T00:21:02.647

正如其他人所建议的那样，Stax 模型将是最小化内存占用的更好方法，因为它是基于推送的模型。我个人使用过 Axio（在 Apache Axis 中使用）并使用 XPath 表达式解析元素，这比您在提供的代码片段中完成的遍历节点元素更简洁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-08T12:44:20.933

还有另一个支持更紧凑的 XML 解析的库 RTXML。该库及其文档位于[rasmustorkel.com](http://rasmustorkel.com)上。我在原始问题中实现了文件的解析，并在此处包含了完整的程序：

```
package for_so;

import java.io.File;
import java.util.ArrayList;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import rasmus_torkel.xml_basic.read.TagNode;
import rasmus_torkel.xml_basic.read.XmlReadOptions;
import rasmus_torkel.xml_basic.read.impl.XmlReader;

public class Q15626686_ReadOrder
{
    public static class Order
    {
        public final Date            _date;
        public final int             _customerId;
        public final String          _customerName;
        public final ArrayList<Item> _itemAl;

        public
        Order(TagNode node)
        {
            _date = (Date)node.nextStringMappedFieldE("Date", Date.class);
            _customerId = (int)node.nextIntFieldE("CustomerId");
            _customerName = node.nextTextFieldE("CustomerName");
            _itemAl = new ArrayList<Item>();
            boolean finished = false;
            while (!finished)
            {
                TagNode itemNode = node.nextChildN("Item");
                if (itemNode != null)
                {
                    Item item = new Item(itemNode);
                    _itemAl.add(item);
                }
                else
                {
                    finished = true;
                }
            }
            node.verifyNoMoreChildren();
        }
    }

    public static final Pattern DATE_PATTERN = Pattern.compile("^(\\d\\d\\d\\d)\\/(\\d\\d)\\/(\\d\\d)$");

    public static class Date
    {
        public final String _dateString;
        public final int    _year;
        public final int    _month;
        public final int    _day;

        public
        Date(String dateString)
        {
            _dateString = dateString;
            Matcher matcher = DATE_PATTERN.matcher(dateString);
            if (!matcher.matches())
            {
                throw new RuntimeException(dateString + " does not match pattern " + DATE_PATTERN.pattern());
            }
            _year = Integer.parseInt(matcher.group(1));
            _month = Integer.parseInt(matcher.group(2));
            _day = Integer.parseInt(matcher.group(3));
        }
    }

    public static class Item
    {
        public final int      _itemId;
        public final String   _itemName;
        public final Quantity _quantity;

        public
        Item(TagNode node)
        {
            _itemId = node.nextIntFieldE("ItemId");
            _itemName = node.nextTextFieldE("ItemName");
            _quantity = new Quantity(node.nextChildE("Quantity"));
            node.verifyNoMoreChildren();
        }
    }

    public static class Quantity
    {
        public final int _unitSize;
        public final int _unitQuantity;

        public
        Quantity(TagNode node)
        {
            _unitSize = node.attributeIntD("unit", 1);
            _unitQuantity = node.onlyInt();
        }
    }

    public static void
    main(String[] args)
    {
        File xmlFile = new File(args[0]);
        TagNode orderNode = XmlReader.xmlFileToRoot(xmlFile, "Order", XmlReadOptions.DEFAULT);
        Order order = new Order(orderNode);
        System.out.println("Read order for " + order._customerName + " which has " + order._itemAl.size() + " items");
    }
} 
```

您会注意到检索函数以 N、E 或 D 结尾。它们指的是当所需数据项不存在时要执行的操作。N 代表返回 Null，E 代表抛出异常，D 代表使用默认值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-04T13:11:26.583

**不使用外部包甚至 XPath 的解决方案：**使用`enum`“PARSE_MODE”，可能与`Stack<PARSE_MODE>`：

**1）基本解决方案：**

a) 字段

```
private PARSE_MODE parseMode = PARSE_MODE.__UNDEFINED__;
// NB: essential that all these enum values are upper case, but this is the convention anyway
private enum PARSE_MODE {
    __UNDEFINED__, ORDER, DATE, CUSTOMERID, ITEM };
private List<String> parseModeStrings = new ArrayList<String>();
private Stack<PARSE_MODE> modeBreadcrumbs = new Stack<PARSE_MODE>(); 
```

b）让你的`List<String>`，也许在构造函数中：

```
 for( PARSE_MODE pm : PARSE_MODE.values() ){
        // might want to check here that these are indeed upper case
        parseModeStrings.add( pm.name() );
    } 
```

c)`startElement`和`endElement`：

```
@Override
public void startElement(String namespaceURI, String localName, String qName, Attributes atts) {
    String localNameUC = localName.toUpperCase();
    // pushing "__UNDEFINED__" would mess things up! But unlikely name for an XML element
    assert ! localNameUC.equals( "__UNDEFINED__" );

    if( parseModeStrings.contains( localNameUC )){
        parseMode = PARSE_MODE.valueOf( localNameUC );
        // any "policing" to do with which modes are allowed to switch into 
        // other modes could be put here... 
        // in your case, go `new Order()` here when parseMode == ORDER
        modeBreadcrumbs.push( parseMode );
    } 
    else {
       // typically ignore the start of this element...
    }
}   

@Override
private void endElement(String uri, String localName, String qName) throws Exception {
    String localNameUC = localName.toUpperCase();
    if( parseModeStrings.contains( localNameUC )){
        // will not fail unless XML structure which is malformed in some way
        // or coding error in use of the Stack, etc.:
        assert modeBreadcrumbs.pop() == parseMode;
        if( modeBreadcrumbs.empty() ){
            parseMode = PARSE_MODE.__UNDEFINED__;
        }
        else {
            parseMode = modeBreadcrumbs.peek();
        }
    } 
    else {
       // typically ignore the end of this element...
    }

} 
```

... 那么，这意味着什么？在任何时候，您都知道您所处的“解析模式”......`Stack<PARSE_MODE> modeBreadcrumbs`如果您需要找出您通过哪些其他解析模式到达这里，您还可以查看......

然后，您的`characters`方法变得更加清洁：

```
public void characters(char[] ch, int start, int length) throws SAXException {
    switch( parseMode ){
    case DATE:
        // PS - this SimpleDateFormat object can be a field: it doesn't need to be created hundreds of times
        SimpleDateFormat formatter. ...
        String value = ...
        ...
        break;

    case CUSTOMERID:
        order.setCustomerId( ...
        break;

    case ITEM:
        item = new Item();
        // this next line probably won't be needed: when you get to endElement, if 
        // parseMode is ITEM, the previous mode will be restored automatically
        // isItem = false ;
    }

} 
```

**2）更“专业”的解决方案：**
`abstract`具体类必须扩展的类，然后无法修改`Stack`等。注意，这检查`qName`而不是`localName`. 因此：

```
public abstract class AbstractSAXHandler extends DefaultHandler {
    protected enum PARSE_MODE implements SAXHandlerParseMode {
        __UNDEFINED__
    };
    // abstract: the concrete subclasses must populate...
    abstract protected Collection<Enum<?>> getPossibleModes();
    // 
    private Stack<SAXHandlerParseMode> modeBreadcrumbs = new Stack<SAXHandlerParseMode>();
    private Collection<Enum<?>> possibleModes;
    private Map<String, Enum<?>> nameToEnumMap;
    private Map<String, Enum<?>> getNameToEnumMap(){
        // lazy creation and population of map
        if( nameToEnumMap == null ){
            if( possibleModes == null ){
                possibleModes = getPossibleModes();
            }
            nameToEnumMap = new HashMap<String, Enum<?>>();
            for( Enum<?> possibleMode : possibleModes ){
                nameToEnumMap.put( possibleMode.name(), possibleMode ); 
            }
        }
        return nameToEnumMap;
    }

    protected boolean isLegitimateModeName( String name ){
        return getNameToEnumMap().containsKey( name );
    }

    protected SAXHandlerParseMode getParseMode() {
        return modeBreadcrumbs.isEmpty()? PARSE_MODE.__UNDEFINED__ : modeBreadcrumbs.peek();
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes)
            throws SAXException {
        try {
            _startElement(uri, localName, qName, attributes);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    // override in subclasses (NB I think caught Exceptions are not a brilliant design choice in Java)
    protected void _startElement(String uri, String localName, String qName, Attributes attributes)
            throws Exception {
        String qNameUC = qName.toUpperCase();
        // very undesirable ever to push "UNDEFINED"! But unlikely name for an XML element
        assert !qNameUC.equals("__UNDEFINED__") : "Encountered XML element with qName \"__UNDEFINED__\"!";
        if( getNameToEnumMap().containsKey( qNameUC )){
            Enum<?> newMode = getNameToEnumMap().get( qNameUC );
            modeBreadcrumbs.push( (SAXHandlerParseMode)newMode );
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        try {
            _endElement(uri, localName, qName);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    // override in subclasses
    protected void _endElement(String uri, String localName, String qName) throws Exception {
        String qNameUC = qName.toUpperCase();
        if( getNameToEnumMap().containsKey( qNameUC )){
            modeBreadcrumbs.pop(); 
        }
    }

    public List<?> showModeBreadcrumbs(){
        return org.apache.commons.collections4.ListUtils.unmodifiableList( modeBreadcrumbs );
    }

}

interface SAXHandlerParseMode {

} 
```

然后，具体子类的显着部分：

```
private enum PARSE_MODE implements SAXHandlerParseMode {
    ORDER, DATE, CUSTOMERID, ITEM
};

private Collection<Enum<?>> possibleModes;

@Override
protected Collection<Enum<?>> getPossibleModes() {
    // lazy initiation
    if (possibleModes == null) {
        List<SAXHandlerParseMode> parseModes = new ArrayList<SAXHandlerParseMode>( Arrays.asList(PARSE_MODE.values()) );
        possibleModes = new ArrayList<Enum<?>>();
        for( SAXHandlerParseMode parseMode : parseModes ){
            possibleModes.add( PARSE_MODE.valueOf( parseMode.toString() ));
        }
        // __UNDEFINED__ mode (from abstract superclass) must be added afterwards
        possibleModes.add( AbstractSAXHandler.PARSE_MODE.__UNDEFINED__ );
    }
    return possibleModes;
} 
```

PS 这是更复杂的东西的起点：例如，您可以设置一个`List<Object>`与`Stack<PARSE_MODE>`: 保持同步的，`Objects`然后可以是您想要的任何东西，使您能够“返回”到上升的“XML 节点”你正在处理的一个。但是，不要使用 a `Map`： the`Stack`可能会`PARSE_MODE`多次包含同一个对象。这实际上说明了所有树状结构的一个基本特征：***没有单独的节点*** *（这里：解析模式）* ***是孤立存在的：它的身份始终由通向它的整个路径定义***。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-25T23:57:27.747

```
 import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

public class JXML {
private DocumentBuilder builder;
private Document doc = null;
private DocumentBuilderFactory factory ;
private XPathExpression expr = null;
private XPathFactory xFactory;
private XPath xpath;
private String xmlFile;
public static ArrayList<String> XMLVALUE ;  

public JXML(String xmlFile){
    this.xmlFile = xmlFile;
}

private void xmlFileSettings(){     
    try {
        factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        xFactory = XPathFactory.newInstance();
        xpath = xFactory.newXPath();
        builder = factory.newDocumentBuilder();
        doc = builder.parse(xmlFile);
    }
    catch (Exception e){
        System.out.println(e);
    }       
}

public String[] selectQuery(String query){
    xmlFileSettings();
    ArrayList<String> records = new ArrayList<String>();
    try {
        expr = xpath.compile(query);
        Object result = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) result;
        for (int i=0; i<nodes.getLength();i++){             
            records.add(nodes.item(i).getNodeValue());
        }
        return records.toArray(new String[records.size()]);
    } 
    catch (Exception e) {
        System.out.println("There is error in query string");
        return records.toArray(new String[records.size()]);
    }       
}

public boolean updateQuery(String query,String value){
    xmlFileSettings();
    try{
        NodeList nodes = (NodeList) xpath.evaluate(query, doc, XPathConstants.NODESET);
        for (int idx = 0; idx < nodes.getLength(); idx++) {
          nodes.item(idx).setTextContent(value);
        }
        Transformer xformer = TransformerFactory.newInstance().newTransformer();
        xformer.transform(new DOMSource(doc), new StreamResult(new File(this.xmlFile)));
        return true;
    }catch(Exception e){
        System.out.println(e);
        return false;
    }
}

public static void main(String args[]){
    JXML jxml = new JXML("c://user.xml");
    jxml.updateQuery("//Order/CustomerId/text()","222");
    String result[]=jxml.selectQuery("//Order/Item/*/text()");
    for(int i=0;i<result.length;i++){
        System.out.println(result[i]);
    }
} 
```

}

# php - 从列表中找出最长单词的长度

> ID：15626688
> 
> 赞同：0
> 
> 时间：2013-03-25T23:24:32.620
> 
> 标签：php, string, performance

该列表如下所示：

```
Lorem ipsum dolor sit amet,
consectetur adipisicing elit,
sed do eiusmod tempor
... 
```

我想缩进所有这样的单词：

```
Lorem       ipsum       dolor   sit    amet,
consectetur adipisicing elit,
sed         do          eiusmod tempor 
```

（或至少第一列）

我已经设法使用数组和`str_pad`：

```
$lines = explode("\n", $text);
$counts = array();

foreach($lines as $line){
  $words = explode(' ', $line);
  foreach($words as $index => $word){
    if(!isset($counts[$index]) || $counts[$index] < strlen($word))
      $counts[$index] = strlen($word);
  }
}

$text = '';

foreach($lines as $line){
  $words = explode(' ', $line);
  foreach($words as $index => $word)
    $text .= str_pad($word, $counts[$index], ' ' , STR_PAD_RIGHT) . ' ';

  $text .= "\n";
} 
```

但由于文本非常大，它使用了相当多的内存。有没有其他方法可以做到这一点，而无需将文本拆分为数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:33:16.073

If the file is extremely large, you could read the file line by line instead of loading it all into an array at once with `file()`.

```
$fh = fopen("alice.txt", "r");
$fh = fopen("yourfile.txt", "r");

while( !feof($fh) ){

    $line = fgets($fh);
    $Newerline = str_replace("-", " ", $line);

    $textArray = str_word_count($Newerline,1); 

    //now go through the line word by word
    foreach ($textArray as $index => $word){
        trim($word);
        $wordLength = mb_strlen($word);

        //is this word the longest for this column?
        if($wordLength > $longWords[$index]['longestWordlen'] ){
            $longWords[$index]['longestWordlen'] = $wordLength;
            $longWords[$index]['longestWord'] = $word;
        }

    }
    //echo $line;
}
//rewind the file pointer to the beginning
rewind($fh);

ksort($longWords);//associative array will be out of order since longest word shows up differently

//now create a new file to hold the new version
$fileh = fopen( "newFile.txt", "c");

while( !feof($fh) ){
    $line = fgets($fh);
    $Newerline = str_replace("-", " ", $line); 

    $textArray = str_word_count($Newerline,1); 

    $newLine =  "";
    //now go through the line word by word
    foreach ($textArray as $index => $word){
        //set the length of this words column
            $pad_length = $longWords[$index]['longestWordlen'];

            $newLine .= str_pad($word, $pad_length + 1, " ", STR_PAD_RIGHT);

    }
    $newLine .= PHP_EOL;

    //save the newLine to file
    fwrite($fileh, $newLine);

    //echo $newLine;
}

fclose($fileh);
fclose($fh); 
```

This loads one line at a time and writes one line at a time. Should use less memory.

# javascript - 是否可以通过 html5/js 与 WIFI / WIFI DIRECT 互动？

> ID：15626690
> 
> 赞同：2
> 
> 时间：2013-03-25T23:24:36.173
> 
> 标签：javascript, html, api, wifi

我想做一个使用wifi信息的网站。我可以用任何 HTML5 API 做到这一点吗？我想要当前的 wifi 主机名和对等连接，其他连接到同一个 wifi 主机。

编辑：对于那些对潜在的 HTML5 WIFI API 感到好奇的人，目前还不可能。这是相关的，但实验性的[https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:01:19.410

据我所知，无法通过浏览器中的 javascript 访问 WIFI 信息。

# facebook - Facebook OAuth 登录：无效的站点 URL 和无效的应用程序域

> ID：15626695
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:25:02.450
> 
> 标签：facebook, oauth, oauth-2.0, facebook-login, facebook-oauth

我的应用程序的域是`thehub.j.layershift.co.uk`

在“应用程序域”框中，我试图输入：`thehub.j.layershift.co.uk`

我还选择`Website with Facebook Login`并在`Site URL`框中，我试图输入：`http://thehub.j.layershift.co.uk/login`

在我测试时，“localhost:8080”一切正常。这些域是无效的吗？

编辑：再试一次，还是不行。这肯定不会这么难？？？

再次编辑：截图：http: [//i.imgur.com/rGkrZn4.png ?1](http://i.imgur.com/rGkrZn4.png?1)

最终编辑：

原来这是 Facebook 的一个问题。在与那边的支持人员交谈后，他在大约 0.5 秒内修复了它。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:40:05.793

尝试以下（为我工作）：

*   在应用程序域中放置`layershift.co.uk`

*   在应用程序 URL 中放置`http://thehub.j.layershift.co.uk`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:40:40.903

`thehub.j.layershift.co.uk`不是域 - 它是一个 URL。您应该尝试仅在域字段中放置**域**。

那将是——

```
layershift.co.uk 
```

`thehub.j`URL ( )的其他部分是`layershift.co.uk`.

您可能还想查看的另一件事是 URL`http://layershift.co.uk`实际上被重定向到`http://layershift.com`. Facebook 在重定向时无法从该 URL 检索数据。

* * *

关于站点 URL，您要放置的是站点/应用程序的登录页面。当您将站点 URL 设置为 时`/login`，任何访问您的应用程序（登录或未登录）的人都将被定向到该`/login`页面。

# neo4j - Neo4j 更新唯一索引值的唯一性

> ID：15626696
> 
> 赞同：1
> 
> 时间：2013-03-25T23:25:04.263
> 
> 标签：neo4j, cypher

这

唯一性=create_or_fail

创建新节点时效果很好，因为如果已经存在重复的索引键/值，它会抛出 4xx 响应。

但是，如果节点已经存在并被索引并且需要更新索引值，那么（我知道）没有办法更新值并且如果新值已经存在则失败。这是因为如果新值已经存在，那么 Add Node to Index REST 调用不会引发 4xx 响应。据我所见，将节点添加到索引甚至不参与索引的唯一性。

一种解决方案是删除节点并重新添加它，但这并不容易，因为必须重新创建该节点上的所有其他索引和关系。

另一种解决方案是将唯一性参数添加到将节点添加到索引 REST 调用 [http://docs.neo4j.org/chunked/1.9.M05/rest-api-indexes.html#rest-api-add-node-to -指数](http://docs.neo4j.org/chunked/1.9.M05/rest-api-indexes.html#rest-api-add-node-to-index)

对此有何其他想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T19:33:09.233

我遇到了这个问题，这就是我想出的解决方法。

在更新期间，在 REST 批处理中执行以下操作：

1.  删除所需索引的所有节点索引条目
2.  在所需索引上使用 CreateOrFail 创建一个新节点，除了使用普通属性而不是使用虚拟属性，例如`DeleteMe=true`
3.  将节点添加到所需的索引，因为如果它到此为止，则上一步成功
4.  更新节点的属性
5.  使用 Cypher 语句删除虚拟节点 Ex：

    `START n=node:index_name(index_key={value}) WHERE (n.DeleteMe!)=true DELETE n`

# php - php中的SEO友好和干净的URL

> ID：15626697
> 
> 赞同：0
> 
> 时间：2013-03-25T23:25:04.290
> 
> 标签：php, database, wordpress, url, url-rewriting

实际上我的问题无法直接理解，但我认为您可以从以下示例中理解

*   [http://www.timestips.com/gadgets/samsung-galaxy-s4-specifications-and-features/](http://www.timestips.com/gadgets/samsung-galaxy-s4-specifications-and-features/)
*   mashable.com/2012/12/11/responsive-web-design/
*   [https://www.facebook.com/timestips](https://www.facebook.com/timestips)

在 wordpress 中没有任何 html 或 php 页面页面或文件夹名称小工具在服务器中不可用但是当用户访问此链接时以 html 形式打开

> 我创建了我自己的网站，用户登录他们从 www.website.com/profile.php 访问个人资料，但我想让每个用户像 www.website.com/userid 像 facebook 一样链接

* * *

所以我只想知道如何打开这些 url 我开发了整个网站，但我只想更新 /profile.php 到 /username

感谢您阅读并回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:28:46.053

启用 mod_rewrite, apache => htaccess

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:33:16.507

在这个链接上，我在谷歌搜索这个问题后写了，我找到了解决方案 [点击这里查看本教程，然后阅读以下步骤](http://www.timestips.com/programming/custom-profile-url-like-facebook-url-routing-with-php/)

**0) 问题**

我试着这样问你：

我想打开像 facebook 个人资料 www.facebook.com/kaila.piyush 这样的页面

它从 url 获取 id 并将其解析为 profile.php 文件并从数据库返回 fetch 数据并将用户显示到他的个人资料

通常，当我们开发任何网站时，其链接看起来像 www.website.com/profile.php?id=username example.com/weblog/index.php?y=2000&m=11&d=23&id=5678

现在我们用新样式更新而不是重写我们使用 www.website.com/username 或 example.com/weblog/2000/11/23/5678 作为永久链接

```
http://example.com/profile/userid (get a profile by the ID) 
http://example.com/profile/username (get a profile by the username) 
http://example.com/myprofile (get the profile of the currently logged-in user) 
```

**1) .htaccess**

在根文件夹中创建一个 .htaccess 文件或更新现有文件：

```
Options +FollowSymLinks
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php 
```

那有什么作用？

如果请求是针对真实目录或文件（存在于服务器上的），则不提供 index.php，否则每个 url 都会重定向到 index.php。

**2) 索引.php**

现在，我们想知道要触发什么动作，所以我们需要读取 URL：

在 index.php 中：

```
// index.php    

// This is necessary when index.php is not in the root folder, but in some subfolder...
// We compare $requestURL and $scriptName to remove the inappropriate values
$requestURI = explode(‘/’, $_SERVER[‘REQUEST_URI’]);
$scriptName = explode(‘/’,$_SERVER[‘SCRIPT_NAME’]);

for ($i= 0; $i < sizeof($scriptName); $i++)
{
    if ($requestURI[$i] == $scriptName[$i])
    {
        unset($requestURI[$i]);
    }
}

$command = array_values($requestURI);
With the url http://example.com/profile/19837, $command would contain :

$command = array(
    [0] => 'profile',
    [1] => 19837,
    [2] => ,
)
Now, we have to dispatch the URLs. We add this in the index.php :

// index.php

require_once("profile.php"); // We need this file
switch($command[0])
{
    case ‘profile’ :
        // We run the profile function from the profile.php file.
        profile($command([1]);
        break;
    case ‘myprofile’ :
        // We run the myProfile function from the profile.php file.
        myProfile();
        break;
    default:
        // Wrong page ! You could also redirect to your custom 404 page.
        echo "404 Error : wrong page.";
        break;
} 
```

**2）profile.php**

现在在 profile.php 文件中，我们应该有这样的内容：

```
// profile.php

function profile($chars)
{
    // We check if $chars is an Integer (ie. an ID) or a String (ie. a potential username)

    if (is_int($chars)) {
        $id = $chars;
        // Do the SQL to get the $user from his ID
        // ........
    } else {
        $username = mysqli_real_escape_string($char);
        // Do the SQL to get the $user from his username
        // ...........
    }

    // Render your view with the $user variable
    // .........
}

function myProfile()
{
    // Get the currently logged-in user ID from the session :
    $id = ....

    // Run the above function :
    profile($id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:47:38.597

我想你是在问干净的网址？

你不想这样做`http://mysite.com/profile.php?id=foo`

但你会喜欢这个`http://mysite.com/foo`

您将用户名（在本例中为“foo”）传递给某个脚本的位置，以便您可以使用它做一些事情。

@godesign 正确地告诉您需要在 .htaccess 文件中启用 mod_rewrite 。你可以用它做很多有趣的事情，你也应该阅读它和正则表达式。

这是我的 .htaccess 文件的样子（针对示例进行了修改）：

```
RewriteEngine On
RewriteRule ^([a-z]+)$ profile.php?id=$1 [L] 
```

这需要与正则表达式匹配的任何内容 -`^([a-z]+)$`位 - 并将其放入`$1`变量中。

阅读更多：

[http://wettone.com/code/clean-urls](http://wettone.com/code/clean-urls)

[http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

[http://www.brand3.com/blogs/htaccess-mod_rewrite-ultimate-guide/](http://www.branded3.com/blogs/htaccess-mod_rewrite-ultimate-guide/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T23:32:17.243

如果您想要一个每个用户都有自己的子站点的 WordPress 站点，您应该查看[BuddyPress](http://buddypress.org/)。这是一个 WordPress 社交网络插件。

# asp.net - 如何在页面加载时运行 html 表单按钮？

> ID：15626699
> 
> 赞同：0
> 
> 时间：2013-03-25T23:25:23.290
> 
> 标签：asp.net

我想在页面加载时运行提交按钮

这是我的表单，它重定向到贝宝，我想在页面加载时运行

```
<head id="Head1" runat="server">
<title></title>
</head>

<body>
<form id="form1" runat="server" action="<%= ConfigurationManager.AppSettings["PayPalSubmitUrl"] %>" 
    method="post" >
<input type="hidden" name="cmd" value="_cart"/>
<input type="hidden" name="upload" value="1"/>
<input type="hidden" name="business" value="<%= ConfigurationManager.AppSettings["PayPalEmailAddress"] %>"/>
<input type="hidden" name="item_name_1" value="Shopping_Cart"/>
<input type="hidden" name="amount_1"  value="<%=Session["Total"].ToString() %>" /> 
<input type="hidden" name="currency_code" value="EUR" />
<input type="submit" id="submit" runat="server"   value="PayPal"  />
</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:32:17.647

文档准备好后，使用一些 Jquery 和 Javascript 提交表单。

```
$(document).ready(function() {
document.forms["form1"].submit(); 
}); 
```

# c++ - c++ 继承重载成员

> ID：15626707
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:26:13.983
> 
> 标签：c++, inheritance, struct

我有两个类 A、B，其中 B 继承 A。我有两个结构 C、D，其中 D 继承 C。A 将多个结构 C 实例化为成员。如何实现 B 实例化 struct D 而不是 C 的成员？我当然可以将 D 作为新成员添加到 B，但是 B 也会为 C 分配内存，这将是浪费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:28:26.860

模板？

```
template <typename ContainedT = C>
class A {
    ContainedT x, y, z;
};

class B : public A<D> {
    ...
}; 
```

# .htaccess - 重写以删除 url - kohana 3.2 和 .htacess

> ID：15626713
> 
> 赞同：0
> 
> 时间：2013-03-25T23:27:18.410
> 
> 标签：.htaccess, kohana, kohana-3.2

我安装的 Kohana 3.2 运行良好。该站点是可导航的，并且 CRUD 功能也有效。他在示例地址：www.site.com.br/folder/。

在 .Htacess 我有

```
 # Turn on URL rewriting
     RewriteEngine On

     # Installation directory ()
     RewriteBase /folder/

     # Protect hidden files from being viewed
    Files .*>
    Order Deny,Allow
    Deny From All
    /Files>

     # Protect application and system files from being viewed
     RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

     # Allow any files or directories that exist to be displayed directly
     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     # Rewrite all other URLs to index.php/URL
     RewriteRule .* index.php/$0 [PT] 
```

当我编写完整的 url `www.site.com.br/folder/`url 时，它可以工作。

但是现在服务器指向根目录，我需要像`www.site.com.br`在其他作品中一样，删除`folder/`.

我尝试了一些选项，但 Kohana 停止工作：

`RewriteRule .* folder/index.php/$0 [PT]`或者 `RewriteRule ^folder/(.*).* index.php/$0 [PT]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:46:37.623

您只需`RewriteBase`要从超文本访问脚本中删除 。然后，URI 将在 Kohana 中正确解析。

# objective-c - Objective C @autoreleasepool 无限循环截图

> ID：15626715
> 
> 赞同：0
> 
> 时间：2013-03-25T23:27:25.537
> 
> 标签：objective-c, xcode, memory-leaks, screenshot, autorelease

我有一个内存问题，小型应用程序每 X 毫秒获取无限量的屏幕截图并将它们显示在图像视图中。即使使用自动释放，它也会很快淹没内存。这是代码：

```
- (void)draw {
    do {
        @autoreleasepool {
            CGImageRef image1 = CGDisplayCreateImage(kCGDirectMainDisplay);

            NSBitmapImageRep *bitmapRep = [[NSBitmapImageRep alloc] initWithCGImage:image1];
            NSImage *image = [[NSImage alloc] init];
            [image addRepresentation:bitmapRep];
            _imageView.image = image;
            [NSThread sleepForTimeInterval:1];
        }
    }while(true);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T23:31:54.647

你需要使用释放图像`CGImageRelease`

```
- (void)draw {
    do {
        @autoreleasepool {
            CGImageRef image1 = CGDisplayCreateImage(kCGDirectMainDisplay);

            NSBitmapImageRep *bitmapRep = [[NSBitmapImageRep alloc] initWithCGImage:image1];
            NSImage *image = [[NSImage alloc] init];
            [image addRepresentation:bitmapRep];
            _imageView.image = image;
            CGImageRelease(image1);   // release the image
            [NSThread sleepForTimeInterval:1];
        }
    }
    while(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:39:21.760

我假设您在这里没有使用 ARC。

您似乎误解了自动释放池的作用。它不会通过自己的特权神奇地释放对象（这就是 ARC 的用途！）。您将对象添加到池中 - 通过使用`autorelease`（在托管保留/释放模式下）或通过使用为您自动释放的便利构造函数 - 当它被销毁时，每次将该对象添加到池中时，池将释放每个对象一次水池。您在此处用于创建对象的方法`alloc`返回您拥有的对象，因此您必须明确释放该对象的所有权。

只需添加到循环的底部：

```
[image release];
[bitmapRep release];
CGImageRelease(image1); 
```

# c# - 代码样式：shop.AddProduct(product) 还是 shop.Products.Add(product)？

> ID：15626725
> 
> 赞同：2
> 
> 时间：2013-03-25T23:28:20.260
> 
> 标签：c#, architecture, coding-style

这是我一直在问自己的一个问题，所以我决定在这里问你们。

假设我有一个`Shop`-object，其中包含一个`ProductList`-object 作为实例变量。my `Shop`-object 的核心功能当然是能够添加`Product`.

**将产品添加到商店的公共界面应该是什么样的？**

`shop.AddProduct(product)`

或者

`shop.Products.Add(product)`?

感谢您的想法和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:39:06.670

这确实是一个关于是否将 Products 作为属性公开，或者是否使用方法的问题。并且已经有很多关于这个的问题。例如：

[属性与方法](https://stackoverflow.com/questions/601621/properties-vs-methods)

在大多数情况下，当它们不是容器对象的功能部分时，我个人更喜欢属性。我的意思是，产品不是商店不可分割的一部分。商店仍然是商店，即使它没有产品。

产品只是存在于商店中的物品。因此，它们作为收藏品非常有意义。尽管我可能会有一个 Inventory 属性，其中 Products 是该库存的属性。

无论如何，方法在做某事时往往更有意义。不只是包含一些东西。例如`store.PurchaseProduct(product)`，会从产品集合中删除项目，但它也会做一些事情（向收银台添加资金，进行库存管理等）。

使用方法的另一个原因是当您在操作集合时需要做几件事情时。例如，假设您不希望在不确保钱进入收银台或记录破损的情况下从产品中移除物品。然后，我仍然会使用一个属性，但我会将该属性设为私有，并且只能通过执行操作的方法来访问它。

然而，这在很大程度上是一个哲学论证。无论哪种方式，人们都会有意见。重要的是你自己的意见。

# android - WebView 未使用 ViewPager 加载

> ID：15626734
> 
> 赞同：3
> 
> 时间：2013-03-25T23:29:01.743
> 
> 标签：android, android-webview, android-viewpager

我正在尝试构建一个`ViewPager`包含一堆`WebViews`. 我能够得到`ViewPager`工作，但是，只有初始`WebView`加载它的内容。当我滑动到其他视图时，它们是空白的。没有错误信息或任何东西。当我对代码进行断点时，`loadUrl`正在使用正确的 Url 命中，所以不确定发生了什么：

**活动**

```
public class BrowserPager extends SherlockFragmentActivity {
    private  List <String> urls;
    private static int NUMBER_OF_PAGES;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        setContentView(R.layout.browser_pager);

        urls = GetUrls();
        NUMBER_OF_PAGES = urls.getCount();

        mViewPager = (ViewPager)findViewById(R.id.pager);
        mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mMyFragmentPagerAdapter);
    }

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override
        public Fragment getItem(int index) {            
            return Browser.newInstance(urls.get(index));
        }

        @Override
        public int getCount() {  
             return NUMBER_OF_PAGES;  
        }
   }
} 
```

**分段**

```
public class Browser extends SherlockFragment {

    private String mUrl;
    private WebView mWebView;

    public static Browser newInstance(String url) {

        Browser b = new Browser();
        Bundle bundle = new Bundle();
        bundle.putString("url", url);
        b.setArguments(bundle);

        return b;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        if (getArguments() != null)
            mUrl = getArguments().getString("url");     

        return inflater.inflate(R.layout.browser, container, false);
    }

    @Override
    public void onResume()
    { 
        super.onResume();

        DisplaySite();
    }   

    private void DisplaySite() {

        mWebView = (WebView)getActivity().findViewById(R.id.webview);

        mWebView.getSettings().setSupportZoom(true);  
        mWebView.getSettings().setBuiltInZoomControls(true);
        mWebView.loadUrl(mUrl);

        final ProgressBar progess = (ProgressBar)getActivity().findViewById(R.id.ProgressBar);

        mWebView.setWebViewClient(new WebViewClient() {
              public void onPageStarted(WebView view, String url, Bitmap favicon) {
                progess.setVisibility(View.VISIBLE);
                progess.setProgress(0);
              }

              public void onPageFinished(WebView view, String url) {
                progess.setVisibility(View.GONE);
              }

        });

        mWebView.setWebChromeClient(new WebChromeClient() {

              public void onProgressChanged(WebView view, int progress) {
                  progess.setProgress(progress);
              }
        });
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:46:20.847

问题可能是以下行：

```
mWebView = (WebView)getActivity().findViewById(R.id.webview); 
```

在这里，您要求`Activity`(!) 找到具有 id 的第一个视图`R.id.webview`。现在想想当有多个相同`Browser`片段的实例附加到`Activity`...时会发生什么。确切地说，总是返回具有该 id 的第一个匹配项。换句话说：url 将始终加载到`WebView`第一个附加`Browser`片段的 。

而不是`WebView`从膨胀`Activity`，您将希望通过在片段的根视图中找到视图来膨胀`WebView`与每个片段相关的内容：`Browser`

```
mWebView = (WebView) getView().findViewById(R.id.webview); 
```

基本上，您需要使用正确的范围进行视图查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T21:36:21.667

如果您将适配器设置为从 PagerAdapter 继承，则可以完成此操作。[https://goo.gl/0J1aCh](https://goo.gl/0J1aCh)

```
 @Override
    public Object instantiateItem(ViewGroup container, int position) {

        Page page = pages.get(position);
        Magazine magazine = dispatcher.getMagazine();

        WebView webView = new WebView( activity );
        ActionBar.LayoutParams params =
                new ActionBar.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT );

        webView.setLayoutParams(params);

        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl( magazine.getFileLocation() + "/" + page.getName());

        container.addView( webView );

        return webView;
    } 
```

# c++ - 增加堆栈大小以使用 alloca()？

> ID：15626737
> 
> 赞同：5
> 
> 时间：2013-03-25T23:29:16.660
> 
> 标签：c++, c, performance, memory, memory-management

这是两个重叠的问题——我希望尝试将 alloca() 用于大型数组，而不是在堆上分配动态大小的数组。这样我就可以提高性能而不必进行堆分配。但是，我得到的印象堆栈大小通常很小？增加堆栈大小以便我可以充分利用 alloca() 是否有任何缺点？是不是我拥有的 RAM 越多，我可以按比例增加我的堆栈大小就越大？

EDIT1：最好是Linux

EDIT2：我没有指定的大小 - 我宁愿知道如何判断决定限制/边界的因素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T23:33:04.467

在大多数 unix-y 平台上，堆栈大小（默认情况下）为 8MB，在 Windows 上为 1MB（即，因为 Windows 具有[从堆栈外问题中恢复的确定性方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082.aspx)，而 unix-y 平台通常会抛出通用`SIGSEGV`信号）。

如果您的分配很大，那么在堆上分配与在堆栈上分配之间不会有太大的性能差异。当然，堆栈每次分配的效率稍高一些，但是如果您的分配很大，则分配的数量可能会很小。

如果你想要一个更大的类似堆栈的结构，你总是可以编写自己的分配器，它从 malloc 获得一个大块，然后以类似堆栈的方式处理分配/解除分配。

```
#include <stdexcept>
#include <cstddef>

class StackLikeAllocator
{
    std::size_t usedSize;
    std::size_t maximumSize;
    void *memory;
public:
    StackLikeAllocator(std::size_t backingSize)
    {
        memory = new char[backingSize];
        usedSize = 0;
        maximumSize = backingSize;
    }
    ~StackLikeAllocator()
    {
        delete[] memory;
    }
    void * Allocate(std::size_t desiredSize)
    {
        // You would have to make sure alignment was correct for your
        // platform (Exercise to the reader)
        std::size_t newUsedSize = usedSize + desiredSize;
        if (newUsedSize > maximumSize)
        {
            throw std::bad_alloc("Exceeded maximum size for this allocator.");
        }

        void* result = static_cast<void*>(static_cast<char*>(memory) + usedSize);
        usedSize = newUsedSize;
        return result;
    }

    // If you need to support deallocation then modifying this shouldn't be
    // too difficult
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T23:35:02.960

程序主线程获取的默认堆栈大小是特定于编译器（和/或特定于操作系统）的东西，您应该查看相应的文档以了解如何扩大堆栈。

您可能无法将程序的默认堆栈扩大到任意大的大小。

然而，正如已经指出的那样，您可能能够在运行时创建一个线程，并使用您想要的大小的堆栈。

无论如何，`alloca()`一次分配的大缓冲区并没有太大的好处。您不需要多次释放和重新分配它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T23:49:07.190

`alloca()`和`new`/之间最重要的区别`malloc()`是，当您从当前函数返回时，分配的所有内存`alloca()`都将消失。

`alloca()`仅对小型临时数据结构有用。

它仅对小数据结构有用，因为大数据结构会破坏堆栈的缓存局部性，这会给您带来相当大的性能损失。数组作为局部变量也是如此。

`alloca()`仅在非常特殊的情况下使用。如果不确定，请不要使用它。

一般规则是：不要将大数据结构（> = 1k）放在堆栈上。堆栈不缩放。这是一种非常有限的资源。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T23:46:25.547

回答第一个问题：堆栈大小通常相对于堆大小较小（这在大多数 Linux 应用程序中都是如此）。

如果您计划的分配*相*对于实际的默认堆栈大小来说很大，那么我认为最好使用堆中的动态分配（而不是尝试增加堆栈大小）。使用内存（填充、读取、操作）的成本可能会远远超过分配的成本。在这种情况下，通过从堆栈分配，您不太可能看到可衡量的好处。

# php - 如何处理嵌套循环中的变量？

> ID：15626742
> 
> 赞同：2
> 
> 时间：2013-03-25T23:29:56.887
> 
> 标签：php, arrays, variables, loops

我的脚本循环浏览我的 WordPress 网站上的帖子。

我还在计算未发布帖子的数量并将其存储在我的`$i`变量中。

但是，由于这是循环多个结果，因此我需要`$i`在每次迭代后将最终数字存储在一个唯一变量中。

**我该如何处理？**我可以`$currentID`在任何阶段使用我的变量吗？

这是我的PHP片段供参考：

```
while ( $query->have_posts() ) : $query->the_post();

    $currentID = get_the_ID();

        while ( $events_list->have_posts() ) :

            $events_list->the_post();

            $postdate = get_the_date('Y-m-d');
            $currentdate = date('Y-m-d');

            if ($postdate > $currentdate) {
                $i++;
            }

        endwhile;

// preferrably store the total of $i here in a unique variable then reset $i

    the_content();

endwhile; 
```

非常感谢任何指针:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:33:37.760

为什么不让一个数组通过一个键来保存所有值`$currentID`？

```
$postCount = array();
while(condition){
  $currentID = get_the_ID();
  $i = 0; // don't forget to reset your counter
  // processing goes here
  while(condition){
    // more processing goes here
    $i++;
  }
  $postCount[$currentID] = $i;
} 
```

这将为您留下一个数组，其中包含`$i`外部循环的每次迭代的值。的值`$i`将存储在等于 的键中`$currentID`。不要忘记在每次迭代后重置您的计数器！

# sql - SQL Server 通过另一个表调整列中的每个值

> ID：15626743
> 
> 赞同：0
> 
> 时间：2013-03-25T23:30:01.463
> 
> 标签：sql, sql-server, loops

我有两张桌子，`TblVal`和`TblAdj`。

在`TblVal`我有一堆值，我需要根据给`TblAdj`定的值进行调整`TblVal.PersonID`，`TblVal.Date`然后返回一些`ViewAdjustedValues`. 我必须只应用那些调整`TblAdj.Date >= TblVal.Date`。

麻烦的是，由于所有的调整要么是减法，要么是除法，所以需要按顺序进行。这是表结构：

`TblVal`: `PersonID, Date, Value`
`TblAdj`:`PersonID, Date, SubtractAmount, DivideAmount`

我想返回`ViewAdjustedValues`：`PersonID, Date, AdjValue`

我可以在不`TblAdj`使用`WHILE`循环和`IF`块进行迭代的情况下根据需要进行减法或除法吗？是否有一些我可以执行的嵌套 SELECT 表魔术会更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:42:07.767

尝试以下操作：

```
 with CTE_TblVal (PersonID,Date,Value)
as 
(
   select A.PersonID, A.Date, A.Value 
   from TblVal A
   inner join TblAdj B
   on A.PersonID = B.PersonID
   where B.Date >= A.Date
)
update CTE_TblVal
set Date = TblAdj.Date,
    Value = TblAdj.Value
from CTE_TblVal
   inner join TblAdj 
   on CTE_Tblval.PersonID = TblAdj.PersonID
output inserted.* into ViewAdjustedValues
select * from ViewAdjustedValues 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:31:18.970

我认为你可以在没有循环的情况下做到这一点，但你是否愿意是另一个问题。我认为有效的查询如下（SQL Fiddle [here](http://sqlfiddle.com/#!6/f3de7/1)）。关键思想如下：

每个 SubtractAmount 的最终效果是减去 SubtractAmount 除以同一 PersonID 的所有后续 DivideAmount 的乘积。与 PersonID 关联的日期与此调整无关（幸运的是）。CTE AdjustedAdjustments 包含这些调整后的 SubtractAmount 值。

PersonID 的初始值除以该人员日期当天或之后的所有 DivideAmount 值的乘积。

如果 x 的所有值都是正数，则 EXP(SUM(LOG(x))) 用作聚合产品。您应该限制 DivideAmount 值以确保这一点，或相应地调整代码。

如果没有 DivideAmounts，则关联产品为 NULL 并更改为 1。类似地，调整后的 SubtractAmount 值的 NULL 总和更改为零。左连接用于保留不受任何调整的值。

SQL Server 2012 支持聚合的 OVER 子句，这有助于聚合“所有以后的 DivideAmounts”。

```
WITH AdjustedAdjustments AS (

select
  PersonID,
  Date,
  SubtractAmount/
  EXP(
    SUM(LOG(COALESCE(DivideAmount,1)))
      OVER (
        PARTITION BY PersonID
        ORDER BY Date
        ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING
      )
  ) AS AdjustedSubtract,
  DivideAmount
  FROM TblAdj
)

  SELECT
    p.PersonID,
    p.Value/COALESCE(EXP(SUM(LOG(COALESCE(DivideAmount,1)))),1)
      -COALESCE(SUM(a.AdjustedSubtract),0) AS AmountAdjusted
  FROM TblVal AS p
  LEFT OUTER JOIN AdjustedAdjustments AS a
  ON a.PersonID = p.PersonID
  AND a.Date >= p.Date
  GROUP BY p.PersonID, p.Value, p.Date; 
```

# jquery - div 上的 CSS 边框突然停止在 chrome 中工作。仍然可以在 Firefox 中使用

> ID：15626744
> 
> 赞同：1
> 
> 时间：2013-03-25T23:30:07.510
> 
> 标签：jquery, css, border

所以正如标题所说，刚才发生了一些奇怪的事情。我正在研究我的记忆游戏，重新打开页面后，使用键盘箭头导航时 div 周围的边框停止显示。（单击窗口以使箭头起作用。）我总是使用谷歌浏览器，但现在发生这种情况我去了火狐并且边框显示在那里：s

你也一样吗？： http: [//jsfiddle.net/94jerdaw/USesV/](http://jsfiddle.net/94jerdaw/USesV/)

我怀疑这是css，因为我没有改变它，至少不是**故意的......**

正如我所提到的，单击结果框架以获取焦点，然后查看是否在 chrome/FF 中正确获取此内容：

```
$('#' + tar).addClass("target"); 
```

与此相关：

```
.target{
    width:94px;
    height:94px;
    border:3px solid black;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:46:03.603

我在 Chrome 中也看到了这个问题。一种解决方法是向您的卡片添加第二个类（例如，`.card-grey`）并将`:after`伪元素应用于该类。然后，当您添加时`.target`，您也可以删除`.card-grey`，反之亦然。

[http://jsfiddle.net/USesV/1/](http://jsfiddle.net/USesV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:19:25.897

为您找到了快速解决方案。添加内容：""; 到目标css，它可以工作。

```
.target{
    content:"";

    width:94px;
    height:94px;
    border:3px solid black;
} 
```

见：http: [//jsfiddle.net/CZdux](http://jsfiddle.net/CZdux)

# function - 用动态名称定义一个值

> ID：15626745
> 
> 赞同：3
> 
> 时间：2013-03-25T23:30:12.197
> 
> 标签：function, clojure, variable-variables

所以我想将一个函数传递给 def 的“名称”部分。问题是：“def 的第一个参数必须是符号”

我正在尝试例如：

```
(def serverNumber 5)
(def (str "server" serverNumber) {:id serverNumber :value 4939}) 
```

但我找不到 annannnnny 方法来做到这一点。任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:42:23.137

首先，我必须指出，这似乎是个坏主意。您为什么要尝试`def`使用动态生成的名称生成 s ？（正如@pst 已经指出的那样，映射是使用动态生成的标识符创建绑定的常用解决方案。）

假设您有这样做的正当理由（也许它是您为用户生成定义的某些库功能的一部分），您可以使用宏来完成此操作：

```
(defmacro def' [sym-exp & other-args]
  `(def ~(-> sym-exp eval symbol) ~@other-args))

(def serverNumber 5)
(def' (str "server" serverNumber) {:id serverNumber :value 4939}) 
```

请注意，这只适用于顶层（因为宏在编译时运行）。如果你想在函数或其他东西中这样做，那么你只需要使用 eval：

```
(defn def'' [sym-exp & other-args]
  (eval `(def ~(-> sym-exp eval symbol) ~@other-args))) 
```

* * *

如果您只想创建一堆代理，也许这样的事情会起作用：

```
(def servers
  (vec (for [i (range 5)]
         {:id i :value 4939}))) 
```

然后你可以通过索引访问它们：

```
(servers 0)
; => {:id 0, :value 4939} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:49:58.397

的运行时等价物`def`是`intern`：

```
(intern *ns*
        (symbol (str "server" server-number))
        {:id server-number :value 4939}) 
```

# php - 如果我不在查询调用中对反斜杠进行 url 编码，我会发生什么坏事？

> ID：15626748
> 
> 赞同：1
> 
> 时间：2013-03-25T23:30:20.890
> 
> 标签：php, url, url-encoding

我知道 php 的`http_build_query()`url-encodes 查询字符串中的反斜杠字符。我也知道反斜杠是一个保留字符，这使它成为该函数所需的行为。我见过我尊重的人，因为程序员在他们的查询字符串中使用未编码的反斜杠，并且一直想做同样的事情来让我的网址看起来更好一点。在避免对我的反斜杠进行 url 编码时，我必须期待哪些坏事（如果有的话）？

我什至开始考虑打破 url 编码约定的原因是谷歌在他们的查询字符串中使用加号。有谁知道他们这样做会发生什么坏事？

我最终要解决的问题是以某种方式`?q=MVC`用人类易读、url 安全的字符来分隔我的调用，而不必设置多个查询变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:38:18.087

[RFC](http://www.ietf.org/rfc/rfc3986.txt)对此非常清楚：

> > 查询 = *( pchar / "/" / "?" )
> > 
> > 字符斜线（“/”）和问号（“？”）可以表示查询组件内的数据。请注意，一些较旧的错误实现可能无法正确处理此类数据......

因此，在查询部分使用斜杠很好（除非您必须处理 2005 年“旧”的实现）。

# java - Prime 速度测试仪

> ID：15626749
> 
> 赞同：0
> 
> 时间：2013-03-25T23:30:21.870
> 
> 标签：java, testing, performance, processing-efficiency

我在 Java 中完成了一项家庭作业，以创建查找素数等的类（您会在代码中看到更好的内容）。

我的代码：

```
 class Primes {

    public static boolean IsPrime(long num) {
        if (num%2==0){
            return false;
        }

        for (int i=3; i*i<=num;i+=2) {
            if (num%i==0) {
                return false;    
            }
        }
        return true;
    }   //  End boolen IsPrime

    public static int[] primes(int min, int max){
        int counter=0;
        int arcount=0;

        for (int i=min;i<max;i++){
            if (IsPrime(i)){
                counter++;
            }   
        }

        int [] arr= new int[counter];
        for (int i=min;i<max;i++){
            if (IsPrime(i)){
                arr[arcount]=i;
                arcount++;
            }               
        }
        return arr;
    }   //  End Primes

    public static String tostring (int [] arr){
        String ans="";
        for (int i=0; i<arr.length;i++){
            ans= ans+arr[i]+ " ";
        }
        return ans;
    }

    public static int closestPrime(long num){
        long e = 0 , d = 0 , f = num;
        for (int i = 2; i <= num + 1 ; i++){
            if ((num + 1) % i == 0){
                if ((num + 1) % i == 0 && (num + 1) == i){
                    d = num + 1;
                    break;
                }
                num++;
                i = 1;
            }
        }
        num = f;
        for (int i = 2; i < num; i++){
            if ((num - 1) % i == 0){
                if ((num - 1) % i == 0 && (num - 1) == i){
                    e = num - 1;
                    break;
                }
                num--;
                i = 1;
            }
        }
        num = f;
        if (d - num < num - e) System.out.println("Closest Prime: "+d);
        else System.out.println("Closest Prime: "+e);

        return (int) num;
    }   //  End closestPrime

}//end class 
```

我的代码的目标是更快（和正确）。我很难做到这一点。建议？

**新代码：

```
class Primes {

     public static boolean IsPrime(int num) {

         if (num==1){
             return false;
         }
         for (int i=2; i<Math.sqrt(num);i++) {
             if (num%i==0) {
                 return false;
             }
         }
         return true;
     }
          //  End boolen IsPrime

     public static int[] primes(int min, int max){
         int size=0;
         int [] arrtemp= new int[max-min];

         for (int i=min;i<max;i++){
             if (IsPrime(i)){
                 arrtemp[size]=i;
                 size++;
             }   
         }

         int [] arr= new int[size];
         for (int i=0;i<size;i++){
                arr[i]=arrtemp[i];

             } 
         return arr;

     }  

    public static String tostring (int [] arr){
        String ans="";
        for (int i=0; i<arr.length;i++){
            ans= ans+arr[i]+ " ";
        }
        return ans;
    }

    public static int closestPrime(int num) {
        int count=1;    
        for (int i=num;;i++){

            int plus=num+count, minus=num-count;
            if (IsPrime(minus)){

                return minus;

            }

            if (IsPrime(plus)) {
                return plus;

            }
            count=count+1;
        }
    }   //  End closestPrime

}//end class 
```

我确实试图让它变得更好一点。你觉得呢，它可以进一步改进吗？（速度测试还是很高的……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:48:00.217

在您的`primes`功能中，您：

*   检查当前数是否能被二整除
*   检查它是否是素数
*   创建一个数组来放入你的输出。
*   在将其放入数组之前，再次检查范围内的每个数字的素数。

问题出在最后一步。通过仔细检查每个数字是否为素数，您正在重复最昂贵的操作。

您可以使用动态数据结构并在找到它们时向其中添加质数。这样你只需要检查一次。

或者，您可以创建一个布尔数组，它是您的输入范围的大小。然后，当您找到素数时，将相应的数组值设置为 true。

**更新：**

您仍然可以进行许多改进，但有些改进需要比其他改进更多的工作来实施。查看您的测试细节，看看什么适合您的需求。

低垂的果实：

*   使用 an`ArrayList`收集在 中找到的素数`primes`，而不是循环两次。
*   在`closestPrime`中，您正在检查 两侧的每一个值`num`：其中一半是偶数，因此不是素数。您可以调整代码以仅检查奇数的素数。

实施起来更棘手：

*   尝试更高级的算法`IsPrime`：查看[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

最重要的是，您应该花一些时间弄清楚代码中的瓶颈到底在哪里。通常，性能问题是由我们认为非常好的代码引起的。您可能会考虑查看您的开发环境中可用的代码分析选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:46:48.490

我看到你的回答有几个问题。首先，2是质数。您在 IsPrime 中的第一个条件打破了这一点。其次，在您的素数方法中，您正在循环从最小值到最大值的所有数字。您可以放心地忽略所有负数和所有偶数（就像在 IsPrime 中所做的那样）。将这两种方法结合起来并节省所有额外的周期会更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:45:39.430

您对 isPrime() 进行了多次调用，每个调用都非常昂贵。您的第一步应该是尽量减少这样做的次数，因为任何给定数字的结果都不会改变，因此多次调用是没有意义的。您可以通过在计算值后存储值来进行[记忆：](http://en.wikipedia.org/wiki/Memoization)

```
ArrayList<Integer> memoList = new ArrayList<Integer>();
for(int i = 0; i < max; i++) {
  if(isPrime(i)) {
    memoList.add(i);
  }
} 
```

现在 memoList 保存了所有你需要的素数，直到`max`，你可以快速循环它们，而无需每次都重新计算它们。

其次，你可以改进你的`isPrime()`方法。您的解决方案循环遍历从 3 到 sqrt(n) 的每个奇数，但是既然我们知道了质数，为什么不直接遍历质数呢？

```
public static boolean IsPrime(long num) {
    for(int p : memoList) {
        if(num % p == 0) {
            return false;
        }
    }
    return true;
} 
```

这些更改应该会显着提高您的代码运行速度，但是已经*有很多*关于计算素数的更有效方法的研究。[Prime Numbers](http://en.wikipedia.org/wiki/Prime_number)的 Wikipedia 页面提供了一些关于您可以尝试的进一步策略（尤其是素数筛）的非常好的信息。

请记住，由于这是家庭作业，您应该确保在上交时引用此页面。欢迎您使用和扩展此代码，但不引用此问题和您使用的任何其他资源都是抄袭。

# macos - 从 Qt 创建者中构建时，qmake 找不到 opencv 包

> ID：15626757
> 
> 赞同：2
> 
> 时间：2013-03-25T23:31:09.127
> 
> 标签：macos, qt, opencv, qmake

我对 Qt 环境相当陌生，并且在尝试构建时遇到了错误。我也是 StackOverflow 的新手，所以如果我错过了格式，请原谅我。当我从命令行运行`qmake`时，它会找到`opencv`包并生成一个 Makefile，但是当我从 Qt Creator 运行它时，它找不到 OpenCV。

这是我的 .pro 文件

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-03-24T21:23:01
#
#-------------------------------------------------

QT       += core
QT       -= gui
TARGET = cvtest
CONFIG   += console
CONFIG   -= app_bundle
CONFIG+=link_pkgconfig
PKGCONFIG+=opencv
TEMPLATE = app
SOURCES += main.cpp 
```

我认为这与完全限定 qmake 的路径有关。如果我跑

> qmake /Users/matt/untitled1/untitled1.pro -r -spec macx-g++ CONFIG+=x86_64

在命令行上它工作正常，但是如果我以 Qt Creator 的方式完全限定 qmake 的路径；

> /Users/matt/Qt5.0.0/5.0.0/clang_64/bin/qmake /Users/matt/untitled1/untitled1.pro

我收到以下错误：

> 项目错误：未找到包 opencv

关于如何在不进入命令行的情况下在 Qt Creator 中进行这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T15:38:39.153

尝试将此添加到您的 .pro 文件中：

```
QT_CONFIG -= no-pkg-config 
```

我相信 Mac 版 Qt 是使用`--no-pkg-config`配置选项构建的。

# ruby - 对 BigDecimal 的一般强制

> ID：15626758
> 
> 赞同：2
> 
> 时间：2013-03-25T23:31:24.177
> 
> 标签：ruby

我正在验证一些地理空间数据，我需要将其他数据类型强制转换为 BigDecimal。

我能得到的最接近的是通过以下代码片段：

```
def is_decimalizable?(coordinate)
  !coordinate.to_d.zero?
end 
```

当然，`to_d`对于无效的强制，返回零，这使得有效的类似零的数字结构无法通过测试。不过，我真的无法在`BigDecimal`文档中看到更好的方法。（有一种`BigDecimal#coerce`方法并没有真正记录有用的用例。）

```
# Good:
is_decimalizable?(-100)        #=> true
is_decimalizable?('-100')      #=> true
is_decimalizable?(-100.0)      #=> true
is_decimalizable?('-100.0')    #=> true
is_decimalizable?('-100.0lng') #=> true
bigd = BigDecimal.new('0.1')
is_decimalizable?(bigd)        #=> true

is_decimalizable?('asdf')      #=> false

# Bad:
is_decimalizable?(0)          #=> false
is_decimalizable?('0')        #=> false
is_decimalizable?(0.0)        #=> false
is_decimalizable?('0.0')      #=> false
is_decimalizable?('0.0lng')   #=> false
bigd = BigDecimal.new('0.0')
is_decimalizable?(bigd)       #=> false 
```

有人对此有更强大的解决方案吗？我正在使用 ruby​​2.0.0-p0 来获得它的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:31:20.677

在控制台进行大量修改后，我确定正则表达式确实是唯一的出路。我想知道`BigDecimal`这种行为是否是疏忽，或者有一些我不知道的非常好的理由。

# mysql - 空闲的mysql数据库会消耗内存吗？

> ID：15626760
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:31:30.097
> 
> 标签：mysql, memory

我有一个巨大的 mysql 数据库，大约 5Gb。我正在为这些数据库表使用 InnoDB。我注意到 PHPMyadmin（MySql 在 1Gb VPS 上运行）变得相当慢，有时甚至没有响应。

由于我根本不使用数据（目前），我将表从该数据库（我们称之为数据库**A**）移动到另一个**B**（我每天在**A**中创建新表）

现在数据库 A 只有 300Mb 的数据。但是，PHPMyadmin 仍然很慢，有时甚至没有响应。

即使我没有使用它，这是由数据库**B引起的吗？**

编辑：根据“top”，MySql 消耗了大约 20% 的服务器内存。但是，使用“free”命令检查，分配了 95% 的服务器内存。没有其他明显的程序会消耗内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:09:43.493

这取决于您的服务器设置 (my.cnf)。如果您将 mySQL 配置为通过基于进程的缓冲区（myISAM 的 key_block_size 或 INNODB 的 innodb_buffer_pool）消耗 20% 的内存，那么 mysql 将不会增长，除非查询使用基于线程的缓冲区并且配置为很大。

如果分配了 95% 的系统内存，它分配到哪里？文件系统缓存中的内存吗？另一个过程？

另请注意，当您移动数据库、删除表等时，mySQL 的基于用户的内存在大多数情况下都会被刷新，并且缓冲区需要在 mysql 中重新填充，因此您正在执行的操作会更多地访问磁盘。

另一件事。如果 PHPmyadmin 在新数据库内存上运行缓慢。您的应用程序可能会因为另一个数据库而更难地访问 mysql，这会迫使 PHPMyadmin 的所有新查询访问磁盘以获取新数据库的表。

所有这些逻辑都由 my.cnf 更改控制。

# android - 有登录活动时如何在 Android 应用中处理 Intent

> ID：15626761
> 
> 赞同：0
> 
> 时间：2013-03-25T23:31:41.343
> 
> 标签：android, android-intent

在正确处理活动之间的流程方面，我正在寻求建议。假设我有两个活动 - LoginActivity 和 MainActivity：

```
<activity
android:name=".LoginActivity"
android:configChanges="keyboardHidden|orientation"
android:label="@string/app_name"
android:launchMode="singleTop"
android:screenOrientation="portrait">
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>

<activity
android:name=".MainActivity"
android:configChanges="keyboardHidden|orientation"
android:label="@string/app_name"
android:launchMode="singleTop"
android:screenOrientation="portrait" /> 
```

现在，当应用程序启动时，我启动 LoginActivity，如果登录成功，我将显示 MainActivity。

现在，当我想处理某些类型的意图时，问题就开始了。假设我想向我的应用程序添加自定义架构：

```
<intent-filter>
    <data android:scheme="customschema" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

我会将这个添加到哪个活动中？理想情况下，我希望将它添加到 MainActivity，然后在 onNewIntent 方法中处理它，但我的应用程序可能没有启动，在这种情况下，我首先需要运行 LoginActivity。另一方面，如果我将其添加到 LoginActivity，一旦用户成功登录，我需要一种方法将该意图传递给 MainActivity。或者如果应用程序已经启动，我需要将焦点从 LoginActivity 切换到 MainActivity 并立即传递意图数据。

我相信这个问题之前一定已经解决了，我宁愿遵循最佳实践，也不愿尝试发明自己的解决方案——这就是我寻求建议的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:52:23.940

您**必须**永远不会有一个以上的**LoginActivity****实例**。

一旦您收到“主要活动”的意图，请确保在 onCreate 方法中检查登录，如果用户未登录，则将意图返回给 LoginActivity。

如果用户已到达 LoginActivity，但已经登录，则将意图返回到主要活动。

这可能会导致 UI 出现故障，但这仅表示设计错误，因为任何类型的事件都不应该到达未登录的应用程序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:36:27.983

忘记我最初说的，我在想广播接收器。

改用 Commonsware 的这个解决方案：

[如何通过可编程方式创建/禁用意图过滤器？](https://stackoverflow.com/questions/14142101/how-to-create-disable-intent-filter-by-programmable-way/14142215#14142215)

# jquery - 在滚动和单击事件上上下移动 div？

> ID：15626762
> 
> 赞同：3
> 
> 时间：2013-03-25T23:31:42.083
> 
> 标签：jquery, scroll

我想创建一个类似于 chanel.com 的网站，如果向下滚动，一个新的 div 会向上移动到页面顶部。不同的是，在我正在设计的网站上，它对点击也应该有相同的效果。在我的网站上，有两个按钮也应该在单击、展开和折叠网站的第二部分时上下移动相同的 div。

通过查看 Stack Overflow 上的其他问题，我走到了这一步，但现在我被困住了。我的问题是：我第一次在点击时上下移动 div，它工作正常。第二次，这一切都很奇怪和神经质。它弹回，无需上下滚动。

我在[这里的 jsFiddle](http://jsfiddle.net/nadyalev/e8jjJ/3/)中制作了我的网站的简化版本，以防任何人更容易修改代码。

如果有人可以帮助我解决这个问题，将不胜感激！这是我的代码：

```
var ovf, slider;

$(function(){
    ovf = this.getElementById("signUp");
    slider = this.getElementById("intro");
    winResize();
    $(window).bind({resize: winResize, scroll: winScroll});

});

function winResize(){   
    ovf.style.top = slider.offse## Heading ##tHeight + "px";
}

function winScroll(){
var op = 1 - ($(document).scrollTop() / slider.offsetHeight);
}

$(document).ready(function(){
    $("#scrollDown a").live('click',function(e){
       console.log('test');
       $('#signUp').animate({
    top: '0',
  }, 500, function() {
    // Animation complete.
  });

    });
});

$(document).ready(function(){
    $("#scrollUp a").live('click',function(e){
       console.log('test');
       $('#signUp').animate({
    top: '99%',
  }, 500, function() {
    // Animation complete.
  });

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:37:13.977

这是一个工作[jsFiddle](http://jsfiddle.net/e8jjJ/4/)。

您需要在活动中更改您的`0`to 。`0%``scrollDown`

```
function winScroll(){
var op = 1 - ($(document).scrollTop() / slider.offsetHeight);
}

$(document).ready(function(){
    $("#scrollDown a").live('click',function(e){
       console.log('test');
       $('#signUp').animate({
    top: '0%',
  }, 500, function() {
    // Animation complete.
  });

    });
});

$(document).ready(function(){
    $("#scrollUp a").live('click',function(e){
       console.log('test');
       $('#signUp').animate({
    top: '100%',
  }, 500, function() {
    // Animation complete.
  });

    });
}); 
```

# php - oop 无法让这个小脚本正常工作

> ID：15626769
> 
> 赞同：0
> 
> 时间：2013-03-25T23:32:19.243
> 
> 标签：php, oop

我不知道为什么这不起作用。我是新手，刚刚学习。

登录.php

```
<?php

    include 'core/init.php';

    if   (empty($_POST) === false) {
        $username = $_POST['username'];
        $password = $_POST['password'];

        $user = new User();

        if (empty($username) === true || empty($password) === true) {
            echo 'you need to enter a username and password';
        } else if ($user->userExists($username) === false) {
            echo 'we cant find that username. have you registered?';
        } else echo 'ok';
     }

    ?>      <?php

    include 'core/init.php';

    if   (empty($_POST) === false) {
        $username = $_POST['username'];
        $password = $_POST['password'];

        $user = new User();

        if (empty($username) === true || empty($password) === true) {
            echo 'you need to enter a username and password';
        } else if ($user->userExists($username) === false) {
            echo 'we cant find that username. have you registered?';
        } else echo 'ok';
     }

    ?>      <?php

    include 'core/init.php';

    if   (empty($_POST) === false) {
        $username = $_POST['username'];
        $password = $_POST['password'];

        $user = new User();

        if (empty($username) === true || empty($password) === true) {
            echo 'you need to enter a username and password';
        } else if ($user->userExists($username) === false) {
            echo 'we cant find that username. have you registered?';
        } else echo 'ok';
    }

?> 
```

用户.php

```
<?php
    require_once 'core/classes/Connect.php';

    class User {

        private $db;

        public function __construct() {
            $this->db = new Connect();
            $this->db = $this->db->dbConnect();
        }

        public function userExists($username) {
            $st = $this->db->prepare("SELECT COUNT(user_id) FROM users WHERE username=?");
            $st->bindParam(1, $username);
            $st->execute();

            if ($st->rowCount() == 1) {
                return true;
            } else return false;    
        }    
    }
?> 
```

我一直在努力学习 OOP，每个人都告诉我最好的学习方式是尝试而不是寻求帮助。我正在尝试构建一个简单的登录，然后让它变得更复杂。

当我输入正确的用户名时，它就`echo`不行了。相反，`echo`我们找不到那个用户名。你注册了吗？请提供任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:42:09.933

我不知道您的`Connect`-class （尤其是 method `rowCount`）如何工作，但问题似乎如下：您的查询返回具有给定用户名的 user_ids 的数量，但您计算行数。

更换

```
$st = $this->db->prepare("SELECT COUNT(user_id) FROM users WHERE username=?"); 
```

和

```
$st = $this->db->prepare("SELECT user_id FROM users WHERE username=?"); 
```

应该做的伎俩。

而且由于您正在学习更多评论：

`empty($username) === true`等于`empty($username)`。大多数程序员更喜欢后者（因为它更短）。

`userExists`此外，将方法声明为静态似乎更有意义。

# clojure - 如何从 lein repl 中删除函数？

> ID：15626771
> 
> 赞同：5
> 
> 时间：2013-03-25T23:32:21.570
> 
> 标签：clojure, leiningen, vimclojure

在 lein REPL 会话期间，我可以定义许多函数。但是，有时我希望会话“忘记”它们 - 例如，当我执行 (run-all-tests) 时，这会突出显示我不再需要的测试失败。有没有办法在不重新启动的情况下从会话中删除功能或清理它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:48:30.627

`ns-unmap`按照 Clojure 命名空间页面[http://clojure.org/namespacesuser](http://clojure.org/namespacesuser)中的描述使用>

```
(defn foo [x] (inc x))                    
#'user/foo     
user> (foo 3)       
4                                                                                
user> (ns-unmap *ns* 'foo)     
nil
user> (foo 3)
CompilerException java.lang.RuntimeException: Unable to resolve symbol: foo in this context, compiling:(NO_SOURCE_PATH:1:1) 
```

# c# - 绑定到集合计数

> ID：15626774
> 
> 赞同：4
> 
> 时间：2013-03-25T23:33:00.293
> 
> 标签：c#, wpf, xaml, binding

我正在尝试创建一个小按钮，该按钮通过绑定显示自定义类的实际 Count 属性。这是我的自定义类代码片段：

```
public sealed class Counter : IEnumerable<MyClass>
{
    private List<MyClass> m_Collection;

    public Int32 Count
    {
        get { return m_Collection.Count; }
    }

    ... 
```

这是我的窗口代码片段：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        m_Counter = new Counter();
    } 
```

这是我的 MainWindow 的 XAML 片段：

```
<Window ... DataContext="{Binding RelativeSource={RelativeSource Self}}">
...
   <Button Content="{Binding Path=m_Counter.Count}" Height="40" Width="40"/> 
```

嗯……我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:38:33.263

您应该在 Counter 上实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)`PropertyChanged`并在修改时使用**Count**作为属性名称`m_Collection`

就像是

```
public sealed class Counter : IEnumerable<MyClass> , INotifyPropertyChanged
{
    private List<MyClass> m_Collection;

    public Int32 Count
    {
        get { return m_Collection.Count; }
    }

    public void Add(MyClass item)
    {
        m_Collection.Add(item);
        if (PropertyChanged != null)
            PropertyChanged(null, new PropertyChangedEventArgs("Count"));
    }

public event PropertyChangedEventHandler PropertyChanged; 
```

您可能必须为所有 List 突变事件触发它。

更简单的事情是做类似的事情

```
 public sealed class Counter2 : IEnumerable<MyClass>
    {
        private ObservableCollection<MyClass> m_Collection = new ObservableCollection<MyClass>();

        public ObservableCollection<MyClass> Collection
        {
            get
            {
                return m_Collection;
            }
        }

    } 
```

并在 XAML 中绑定到`Collection.Count`

# iphone - 在一个应用程序中为 iPhone 4 和 iPhone 5 开发

> ID：15626778
> 
> 赞同：1
> 
> 时间：2013-03-25T23:33:33.263
> 
> 标签：iphone, ios, xcode

我已经离开 iOS 开发一段时间了，我遇到了障碍。

我的一个应用程序有一个 UIImageView 图形，然后我有覆盖视觉效果的按钮。除了自动布局之外，我能够让一切正常工作。

如果我将笔尖设置为 3.5 并在 3.5 模式下运行模拟器，一切都会很好。如果我在 4.0 模式下运行它，按钮都会移动。这也适用于与此相反的情况。

我不确定如何绕过移动的按钮。有没有办法或者应该有2个笔尖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:40:52.877

如果您不使用 IB，那么您将获得基于此的视图和布局的大小。

我通常对verticalOffset (NSInteger) 使用单个值，并基于Y 值使用不同的值倍数，具体取决于界面元素。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];

if (screenBounds.size.height == 568) { // iPhone 5
    verticalOffset = 20;
} else {
    verticalOffset = 0;
} 
```

如果将来 Apple 发布 768 像素高度的 iPhone 5.5（我开玩笑.. 哈！）

您只需要添加一个新的 verticalOffset 值，视图就会自动填充新的大小。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];

if (screenBounds.size.height == 768) { // iPhone 5.5
    verticalOffset = 30;
} else if (screenBounds.size.height == 568) { // iPhone 5
    verticalOffset = 20;
} else {
    verticalOffset = 0;
} 
```

如果您想支持旧 iOS 版本，IB/iPhone的**简单方法**是关闭自动布局

![关闭自动布局](../Images/f0d0a0bd1c05d5e944fa1ec7bd16f85c.png)

并关闭**最高值**的自动调整大小。

![在此处输入图像描述](../Images/2341d552853447281c2aa8e9a01166ff.png)

在 IB 中为 iPhone 5 布局视图，当您使用 iPhone 3.5in 时，所有界面元素将挤入 3.5in 大小（确保在以较高尺寸布局时留出足够的空白）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:19:20.610

你可以按照这个很好的自动布局教程：[http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:23:47.733

在 3.5 英寸屏幕上开发，但启用 autoLayout。浏览视图中的每个项目并调整自动调整大小。- 选择项目 - 通过在界面生成器中放大/缩小，向下到白色箭头所在的位置。单击看起来像 H 的小按钮。 - 这将允许您调整每个项目的调整

![在此处输入图像描述](../Images/3fd19037c54bd74735c6edc18ff79de4.png)

![在此处输入图像描述](../Images/51670c9d565c6b51a351eb6b6a4f11c7.png)

# git - 尝试提交 .gitignore 的错误消息

> ID：15626783
> 
> 赞同：0
> 
> 时间：2013-03-25T23:34:12.187
> 
> 标签：git, vim

我是 git 的初学者，正在设置一个初始项目，刚刚创建了一个 .gitignore 文件，我试图推送它，但提交时出错。

我创建了一个远程存储库并将其克隆并完成了一些测试提交/推送/拉取。

现在我刚刚创建了一个 .gitignore 并希望将其推送到远程存储库。如果我执行“git status”，我会得到：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   .gitignore 
```

但是，如果我尝试执行“git commit .gitignore”，我会得到：

```
E325: ATTENTION
Found a swap file by the name ".git/.COMMIT_EDITMSG.swp"
          owned by: Me   dated: Mon Mar 25 15:51:27 2013
         file name: ~Me/Desktop/MyProject/iOS/.git/COMMIT_EDITMSG
          modified: YES
         user name: Me   host name: Me-MacBook-Pro.local
        process ID: 28500
While opening file ".git/COMMIT_EDITMSG"
             dated: Mon Mar 25 16:32:44 2013
      NEWER than swap file! 
```

为什么会这样，我应该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:36:55.757

该错误实际上来自vim。这根本不是 git 消息。它告诉您大约 45 分钟前 vim 在编辑 git commit 消息时崩溃（或被杀死）。

Vim 应该问你想如何进行。你应该告诉它忽略交换文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-25T23:40:23.933

也许尝试从 repo 中删除文件然后提交忽略

```
git rm --cached filename 
```

# python - 如何：将“单击”我屏幕的一部分，然后执行键盘命令的 Python 脚本？

> ID：15626786
> 
> 赞同：0
> 
> 时间：2013-03-25T23:34:23.580
> 
> 标签：python, asp.net, python-2.7, screen-scraping, web-crawler

Python 菜鸟。

我试图让 Python 选择我屏幕的一部分。在这种情况下，它是 Firefox 窗口中的一个小窗口——它是 Firebug 源代码。然后，一旦它选择了正确的区域，control-A 选择全部，然后 control-C 复制。如果我能弄清楚这一点，那么我会做同样的事情并将所有副本粘贴到 .txt 文件中。

我真的不知道从哪里开始——有这类东西的库吗？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:40:52.470

正如您在评论中提到的，数据全部在 HTML 中开始（我猜它在您的 Firebug 屏幕截图中显示为灰色，因为它是一个隐藏元素）。这种方法避免了尝试自动化浏览器的复杂性。以下是我如何获取数据的粗略概述：

*   下载整个页面的 HTML - 我首先会手动执行此操作（即从浏览器中的文件 > 保存），如果您要处理大量页面，请弄清楚如何下载您以后想要的所有页面. 如果你想在这部分使用 python，我推荐[urllib2](http://docs.python.org/2/library/urllib2.html)。每个页面的 URL 可能非常结构化，因此您可以轻松地将它们存储在列表中，然后下载每个页面并将其保存在本地。.

*   编写一个脚本来解析 HTML -[不要使用 regex](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。由于您使用的是 Python，因此请使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)之类的东西，它将为页面创建一个很好的对象表示，然后您可以获得所需的元素。

你提到你是python的新手，所以肯定会有一个学习曲线，但这实际上听起来像是一个非常可行的项目，可以用来学习更多的python。

如果您在每一步都遇到了特定的障碍，请使用一些示例代码开始一个新问题，展示您要完成的工作，人们会非常愿意提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:09:16.547

我会研究 PyQt 或 PySide，它们是 Qt 顶部的 Python 包装器。Qt 是一个大怪物，但它有很好的文档记录，我相信一旦你抓住你的屏幕部分，它会帮助你在你的项目中进一步发展。

# c# - 在字符串中的套接字上丢失字符

> ID：15626787
> 
> 赞同：0
> 
> 时间：2013-03-25T23:34:34.780
> 
> 标签：c#, sockets, tcp, tcplistener

我正在通过套接字发送消息。在客户端，我正在使用 StringBuilder 组装消息

```
StringBuilder sb = new StringBuilder(message);
sb.Insert(0, (char)11);
sb.Append((char)28);
sb.Append((char)13); 
```

从客户端发送到服务器

```
Byte[] data = new Byte[1024];
data = Encoding.ASCII.GetBytes(message.ToString());
NetworkStream stream = client.GetStream();
stream.Write(data, 0, data.Length); 
```

服务器端

```
StringBuilder message = new StringBuilder(Encoding.ASCII.GetString(bytesReceived, 0, bytesReceived.Length)); 
```

然后我想检查我的消息是否包含在正确的容器中，但由于某种原因，检查中的最后 2 个字符等于 0，而不是正确的 28 和 13。

```
if (((int)messsage[message.Length - 2] == 28) && ((int)message[message.Length - 1] == 13)) 
```

提前感谢您的帮助

添加了要求的数据

```
byte[] bytes = new byte[1024];
NetworkStream stream = tcpClient.GetStream();
stream.Read(bytes, 0, bytes.Length); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:17:30.987

`Stream.Read`最多读取`bytes.Length`字节，它的返回值会告诉你它实际读取了多少字节。

如果这还不够，那么您将需要`Stream.Read()`再次致电。

此外，`bytes.Length`将始终返回数组的长度，而不是读取的字节数。

查看您的发送代码，您可能希望尽可能多地从流中读取，将读取的内容附加到字符串生成器，然后检查最后 2 个字符是否为 28 和 13，如果是，那么您有你的完整信息。

# knockout.js - 有没有办法使用敲除的“if”绑定将元素加载到页面但不评估其他绑定？

> ID：15626788
> 
> 赞同：0
> 
> 时间：2013-03-25T23:34:47.623
> 
> 标签：knockout.js

我处于需要将具有淘汰赛绑定的元素加载到 DOM 的情况，但我并不总是希望这些绑定进行评估。在以下示例中，请参阅内部 div 了解我的意思：

```
<ul data-bind="foreach: planets">
    <li>
        Planet: <b data-bind="text: name"> </b>
        <div data-bind="if: capital">
            I still want to load this text for later display, when I define "capital"
            Capital: <b data-bind="text: capital.cityName"> </b>
        </div>
    </li>
</ul>

<script>
    ko.applyBindings({
        planets: [
            { name: 'Mercury', capital: null }, 
            { name: 'Earth', capital: { cityName: 'Barnsley' } }        
        ]
    });
</script> 
```

我的特殊情况是，我为要加载到 dom 中的元素有“编辑”和“不编辑”模板，这两个模板都已加载到页面中。当我将此元素的新实例添加到页面时，我遇到了问题，因为“未编辑”模板已加载并查找尚未定义的值（因为用户正在将它们添加到新对象）。

我的具体例子：

```
<!-- ko foreach: books -->
    <div data-bind="visible: !editing()" class="row-fluid card-box">
        <div data-bind="visible: !isPaperback()"> // I want to load this but not evaluate the isPaperback because the user hasn't defined that yet - currently getting null reference errors here  
        </div>
    </div>
    <div data-bind="visible: editing" class="row-fluid card-box">

    </div>
<!-- /ko --> 
```

我能想到的一个解决方案与我上面的问题配对，但如果有更好的方法来完成这项工作，我绝对愿意接受建议。为我的“newBook”对象设置非空默认值会更好吗，当用户单击“添加”时，它会被推送到“books”数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:37:37.973

一种选择是使您的`capital`属性可观察并使用`if`绑定来限制该区域。然后，当您进行填充时`capital`，绑定将做出反应并显示您的内容。

这是一个示例：

```
var Planet = function(data) {
   this.name = data.name;
   this.capital = ko.observable(data.capital);
};

var viewModel = {
    planets: [
        new Planet({ name: 'Mercury', capital: null }),
        new Planet({ name: 'Earth', capital: { cityName: 'Barnsley' } })
    ]
}

ko.applyBindings(viewModel);

//populate capital in 2 seconds
setTimeout(function() {
    viewModel.planets[0].capital({ cityName: "Gotham" });
}, 2000); 
```

[http://jsfiddle.net/rniemeyer/QqPfV/](http://jsfiddle.net/rniemeyer/QqPfV/)

# python - 如何在骨架化图像中找到连接点？

> ID：15626789
> 
> 赞同：0
> 
> 时间：2013-03-25T23:34:54.320
> 
> 标签：python, image-processing

我在 [这里](https://stackoverflow.com/questions/6173424/locating-the-end-points-of-a-bridge-like-structure-in-an-image)找到了用于查找骨架化图像连接点的代码。

代码没有找到所有的交汇点，而只找到了主要的交汇点。

我如何调整此代码以查找骨架图像中的所有连接点？

在我的示例图片中：[https](https://docs.google.com/file/d/0ByS6Z5WRz-h2U3NBWWZ6V3FqeUk/edit?usp=sharing) ://docs.google.com/file/d/0ByS6Z5WRz-h2U3NBWWZ6V3FqeUk/edit?usp=sharing我想在骨架中至少找到 6 个连接点！

我的代码：

在找到连接点之前，我准备了图像：我转换为二进制，填充孔并进行骨架化。

```
import numpy as np
from numpy import array
import cv2
import pymorph as m
import mahotas
import scipy.ndimage.morphology as mo

def skeletonize(img):
    h1 = np.array([[0, 0, 0],[0, 1, 0],[1, 1, 1]]) 
    m1 = np.array([[1, 1, 1],[0, 0, 0],[0, 0, 0]]) 
    h2 = np.array([[0, 0, 0],[1, 1, 0],[0, 1, 0]]) 
    m2 = np.array([[0, 1, 1],[0, 0, 1],[0, 0, 0]])    
    hit_list = [] 
    miss_list = []
    for k in range(4): 
        hit_list.append(np.rot90(h1, k))
        hit_list.append(np.rot90(h2, k))
        miss_list.append(np.rot90(m1, k))
        miss_list.append(np.rot90(m2, k))    
    img = img.copy()
    while True:
        last = img
        for hit, miss in zip(hit_list, miss_list): 
            hm = mo.binary_hit_or_miss(img, hit, miss) 
            img = np.logical_and(img, np.logical_not(hm)) 
        if np.all(img == last):  
            break
    return img

#input image
nomeimg = 'DUPLInuova/fionda 3/c (3).jpg'
img = cv2.imread(nomeimg)
gray = cv2.imread(nomeimg,0)
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) #con 4,4 si vede tutta la stella e riconosce piccoli oggetti
graydilate = cv2.erode(gray, element) #imgbnbin

ret,thresh = cv2.threshold(graydilate,127,255,cv2.THRESH_BINARY_INV) 
imgbnbin = thresh

cv2.imshow('binaria',imgbnbin)
cv2.waitKey()

#finding a unique contour
contours, hierarchy = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)
print(len(contours))

Areacontours = list()
calcarea = 0.0
unicocnt = 0.0
for i in range (0, len(contours)):
    area = cv2.contourArea(contours[i])
    if (area > 90 ):  #con 90 trova i segni e togli puntini
        if (calcarea<area):
            calcarea = area
            unicocnt = contours[i]

cnt = unicocnt            
print(len(cnt))
cv2.drawContours(thresh,contours,-1,(0,255,0),3)

#fill holes
des = imgbnbin
cv2.drawContours(des,[unicocnt],0,255,-1)

gray = cv2.bitwise_not(des)

cv2.imshow('gray tappabuchi grAY',gray)
cv2.waitKey()

kernel = cv2.getStructuringElement(cv2.MORPH_ELLIPSE,(3,3))
res = cv2.morphologyEx(gray,cv2.MORPH_OPEN,kernel)

cv2.imshow('res tappabuchi',res)
cv2.waitKey()

rest = cv2.bitwise_not(res)

print(rest)

cv2.imshow('rest tappabuchi 2',rest)
cv2.waitKey()

skel = skeletonize(rest)
skel = skel.astype(np.uint8)*255
print(skel)
cv2.imshow('skel',skel)
cv2.waitKey(0)

imgbnbin = m.binary(skel)

#FINDING junction and PRUNING
print("mohatas imgbnbin")
print(imgbnbin)

b2 = m.thin(imgbnbin)
b3 = m.thin(b2, m.endpoints('homotopic'), 15) # prune small branches, may need tuning

outputimage = m.overlay(imgbnbin, b3)
mahotas.imsave('outputs.png', outputimage)

# structuring elements to search for 3-connected pixels
seA1 = array([[False,  True, False],
       [False,  True, False],
       [ True, False,  True]], dtype=bool)

seB1 = array([[False, False, False],
       [ True, False,  True],
       [False,  True, False]], dtype=bool)

seA2 = array([[False,  True, False],
       [ True,  True,  True],
       [False, False, False]], dtype=bool)

seB2 = array([[ True, False,  True],
       [False, False, False],
       [False,  True, False]], dtype=bool)

# hit or miss templates from these SEs
hmt1 = m.se2hmt(seA1, seB1)
hmt2 = m.se2hmt(seA2, seB2)

# locate 3-connected regions
b4 = m.union(m.supcanon(b3, hmt1), m.supcanon(b3, hmt2))

# dilate to merge nearby hits
b5 = m.dilate(b4, m.sedisk(10))

# locate centroids
b6 = m.blob(m.label(b5), 'centroid')

outputimage = m.overlay(imgbnbin, m.dilate(b6,m.sedisk(5)))
mahotas.imsave('output.png', outputimage) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T15:58:54.453

根据我的理解，骨架中的连接点是具有超过 2 个黑色像素作为邻居的像素（如果背景 = 白色，骨架 = 黑色）。

所以一个简单的解决方案是遍历黑色像素，并计算当前像素周围的黑色像素数量。需要代码吗？可以修改您用于骨架化的代码来执行此操作。

# javascript - 我该如何处理 Javascript 中的这种错误？

> ID：15626794
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:35:26.987
> 
> 标签：javascript, javascript-framework

如何确保没有在数组中输入两个逗号..这是针对从用户输入生成数组的 Web 应用程序，它是一个文本字段..我无法将其更改为其他任何内容。

例子 .. `var names=["Kim",,"Andrew","Ashley"];`

在这个数组中，我们有两个连续的逗号，而不是一个..我如何确保如果用户输入任何不好的字符，我只需将其取出..如逗号、点等..额外逗号的示例，考虑到我没有其他选择，只能处理生成这样的数组的文本字段，如何实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:39:38.807

通过函数（见下文）运行数组以删除数组中的无效值。在您的情况下， .中的第二个元素的值*未定义*`["Kim",,"Andrew","Ashley"]`。

```
var stripEmpty = function (ary) {
    var result = [];
    for (var i = 0; i < ary.length; i++) {
        if (ary[i] !== undefined) {
            result.push(ary[i]);
        }
    }
    return result;
}; 
```

然后你可以这样做：

```
var names = ["Kim",,"Andrew","Ashley"];
var strippedNames = stripEmpty(names);    //  ["Kim","Andrew","Ashley"] 
```

见工作小提琴：http: [//jsfiddle.net/amyamy86/LymAZ/](http://jsfiddle.net/amyamy86/LymAZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:12:18.483

这不是一个错误，只是您将表单中的空条目添加到您的数组中。尝试这个：

```
//assume your array has been filled up

var mod_names = names.join("#"); // you can use any delimeter apart from '#'

if(mode_names.indexOf(" ") > -1){
  mode_names.replace(/\s+/gi, "");
}
mode_names.replace(/#/gi, " ");
mod_names = mod_names.split(); // the default is a space char
names = mode_names; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:04:37.480

两个连续的逗号（或前导逗号）是一个[省略号](http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.4)，它增加下一个成员的索引。省略的成员不作为数组的属性存在。要查找此类成员，您可以使用`in`运算符：

```
var a = [,0,1,,  , ,2,3,,  ,];

var i = a.length;

while (i--) {

  if (!(i in a)) {  // returns true if a has no index i
    a.splice(i, 1);
  }
}

alert(a); // 0,1,2,3 
```

这也处理数组文字中的额外空格。

# android - 细蓝色进度条

> ID：15626796
> 
> 赞同：6
> 
> 时间：2013-03-25T23:35:37.897
> 
> 标签：android, android-progressbar, android-drawable

我正在尝试创建一个细的蓝色进度条，类似于：

![在此处输入图像描述](../Images/98a93695355e4e30575808c809c7ed5d.png)

我不太擅长`Drawables`，但是我将 更改`ProgressBar`为绿色，但我不知道如何使它变薄和蓝色：

```
<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:orientation="vertical"
     >
      <ProgressBar 
        android:id="@+id/ProgressBar" 
        android:layout_centerInParent="true"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:progressDrawable="@drawable/progress"
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:visibility="gone"
    />

</LinearLayout> 
```

**可绘制**

```
<?xml version="1.0" encoding="utf-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="5dip" />
            <gradient
                    android:startColor="#ff9d9e9d"
                    android:centerColor="#ff5a5d5a"
                    android:centerY="0.75"
                    android:endColor="#ff747674"
                    android:angle="270"
            />
        </shape>
    </item>

    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                        android:startColor="#80ffd300"
                        android:centerColor="#80ffb600"
                        android:centerY="0.75"
                        android:endColor="#a0ffcb00"
                        android:angle="270"
                />
            </shape>
        </clip>
    </item>
    <item
        android:id="@android:id/progress"
    >
        <clip>
            <shape>
                <corners
                    android:radius="5dip" />
                <gradient
                    android:startColor="#33FF33"
                    android:endColor="#008000"
                    android:angle="270" />
            </shape>
        </clip>
    </item>

</layer-list> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-22T21:42:28.483

高度由`android:layout_height="wrap_content`属性定义。例如，您可以将其设置为 2dp，以创建更细的进度条。

更改颜色会有点困难，因为您使用的是渐变。因此，您必须将开始和结束颜色更改为某种蓝色。

**我正在使用什么**

```
<ProgressBar
    android:id="@+id/progressbar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="4dp"
    android:layout_marginTop="0.01dp"
    android:max="100"
    android:progress="50"
    android:progressDrawable="@drawable/myprogressbar"
    android:secondaryProgress="0" /> 
```

**可绘制文件夹中的**MyProgressBar.xml****

 **```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="0dip" />
            <gradient android:startColor="#C0C0C0" android:centerColor="#F8F8FF"
                android:centerY="0.75" android:endColor="#ffffff" android:angle="90" />
            <stroke android:width="0.01dp" android:color="#6B8E23" />
        </shape>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:radius="0dip" />
                <gradient android:startColor="#9ACD32" android:endColor="#FFFF00"
                    android:angle="90" />
                <stroke android:width="1dp" android:color="#6B8E23" />
            </shape>
        </clip>
    </item>
</layer-list> 
```

用您自己的蓝色代码替换颜色代码：

> android:startColor="#C0C0C0" android:centerColor="#F8F8FF" android:endColor="#ffffff"**

# java - 来自 JTextArea Java 的 ActionListener

> ID：15626799
> 
> 赞同：0
> 
> 时间：2013-03-25T23:35:52.857
> 
> 标签：java, actionlistener, keyevent

我是 Java 新手，并试图为我的程序找出最后一件事。

这是我编写的程序，布局完全没问题。

![在此处输入图像描述](../Images/53e64c074d8989009ce843e0b408bdef.png)

现在我的程序假设在键盘上按下按钮时突出显示按钮（而不是通过按下屏幕上的按钮）

我不确定我必须使用什么，因为它需要采取的操作是当他们在`JTextArea`. 我正在尝试使用`KeyEvent`with`KeyPressed`但不确定这是否正确，因为它并没有真正起作用。

我现在不能在这里发布我的代码，因为这是一个作业，我不希望我的一些同学在谷歌上搜索并使用它，如果他们在这里找到它。（哈哈）

这里需要的是我的代码:)

```
import javax.swing.*; // import all javax.swing
import java.awt.*; // import all java.awt
import java.awt.event.*;

public class Sample extends JFrame implements KeyListener { // start of the
                                                            // class

    private JTextArea field = new JTextArea(10,15); // create an instance of
                                                        // JTextField
    private JPanel mainPanel = new JPanel(); // create an instance of JPanel
    private JPanel TopFieldPan = new JPanel();
    private JPanel MainBtnsPan = new JPanel();
    private JPanel FifthRowPan = new JPanel();

    JPanel fifthBtn = new JPanel();

    private static JButton Space = new JButton("");

    public Sample() { // start of the weather constructor

        Space.setPreferredSize(new Dimension(280, 45));
        fifthBtn.add(Space);

        TopFieldPan.add(field);

        FifthRowPan.setLayout(new BoxLayout(FifthRowPan, BoxLayout.X_AXIS));
        FifthRowPan.add(fifthBtn);
        MainBtnsPan.setLayout(new GridLayout(5, 5, 0, 0));

        MainBtnsPan.add(FifthRowPan);

        mainPanel.add(TopFieldPan);
        mainPanel.add(MainBtnsPan);

        this.add(mainPanel);

        Space.setSelected(true);
        field.addKeyListener(this); // important !!!

        setTitle("Typing Tutor"); // set the title to the frame
        setSize(300, 300); // set the fixed size
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        setLocationRelativeTo(null); 
        setVisible(true); // make it visible

    } // ends of the constructor

    public void keyPressed(KeyEvent e) {

        if (e.getKeyCode() == KeyEvent.VK_SHIFT) {
            Space.setBackground(Color.green);

        }

    }

    public void keyReleased(KeyEvent evt) {
        Space.setBackground(null);
    }

    public void keyTyped(KeyEvent evt) {
        // TODO Auto-generated method stub

        if(evt.getKeyChar() == 'a' || evt.getKeyChar() ==  'A')
        {
            Space.setBackground(Color.green);
        }
        else if(evt.getKeyChar() == 'b' || evt.getKeyChar() == 'B')
        {
            Space.setBackground(Color.red);
        }       
    }

    public static void main(String[] args) { // start of the main method

        new Sample();

    } // ends of main method

} // ends of class 
```

我试图尽可能地简化代码，这是最后一个。

所以当我按下它时，我试图做到这一点，`a`或者`A`它应该突出显示那个空间 JButton。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:08:57.137

创建您的按钮及其映射到的键的映射，如下所示：

```
Map<String, JButton> buttonMap = new HashMap<String, Button>(); 
```

然后，当您添加按钮时，将它们添加到地图中，如下所示：

```
buttonMap.put(FirstRow[i].toLowerCase(), btn); 
```

然后，将类似这样的内容添加到您的 KeyTyped 中：

```
public void keyTyped(KeyEvent evt) {
    String keyPressed = new String(""+evt.getKeyChar()).toLowerCase();
    JButton tmp = buttonMap.get(keyPressed);
    if(null != tmp){
        tmp.doClick();
    }
} 
```

我对第 1 行和第 2 行的代码快速执行了此操作。您必须使用它才能使其适用于特殊键，但它应该可以让您到达您想要去的地方。

我把它贴在这里，以保持答案很小。 [http://pastebin.com/t1v8d6Hi](http://pastebin.com/t1v8d6Hi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:57:07.750

你的代码看起来不错，你似乎有一个与 KeyListener 一起工作的基本机制。您可能需要考虑如何停止鼠标单击按钮，JButton.setEnabled(false) 有效，但会更改按钮的绘制方式，因此您可能需要覆盖paint方法。您可能只需要将 keylistener 连接到一个组件，窗口将获取所有事件，即当它具有焦点时的文本区域。您的主要任务是弄清楚如何将按键事件映射到按钮，也许使用哈希图或其他东西来存储 JButtons，键是字符代码？

# jquery-selectors - 为什么 IE8 找不到这些属性？

> ID：15626814
> 
> 赞同：0
> 
> 时间：2013-03-25T23:37:30.633
> 
> 标签：jquery-selectors, internet-explorer-8, jquery-attributes

我在 IE 9 和其他所有内容中都收到警报和预期行为，但在 IE 8 中没有这样的运气。这可能是什么原因？

```
container.find('[style*="left:"],[data-item-left],[style*="top:"],[data-item-top]').each(function(index){
            // do stuff
    }); 
```

[示例小提琴](http://jsfiddle.net/WrKHS/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:51:19.807

我的解决方案是使用[更通用的选择器](http://api.jquery.com/all-selector/)。

# ios - 如何创建自定义 UIViewAnimation

> ID：15626815
> 
> 赞同：1
> 
> 时间：2013-03-25T23:37:30.920
> 
> 标签：ios, xcode, uiview, xcode4.5, uiviewanimation

创建自定义 UIView 动画过渡的最简单方法是什么？在 Google 搜索中弹出的大多数教程都不是最新的。（我使用的是 XCode 4.5 版本）在我当前的 iPhone 应用程序中，我的屏幕转换有以下代码：

```
[UIView beginAnimations:@"View flip" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:1.25];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view                            cache:YES];    
[UIView commitAnimations]; 
```

我想要一些独特的东西，而不是 5 或 6 个内置过渡。关于从哪里开始的任何想法或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:16:59.113

我认为这就是你要找的：

```
[UIView animateWithDuration:0.3 animations:^{
    //Move frame or transform view
}]; 
```

在该块内，您可以放置​​任意动画代码。

# objective-c - 创建 NSSavePanel 后未调用 NSString 类别方法

> ID：15626820
> 
> 赞同：0
> 
> 时间：2013-03-25T23:38:15.567
> 
> 标签：objective-c, objective-c-category

我有[一个简单的 Cocoa 应用程序](https://dl.dropbox.com/u/21723817/TrimWhitespace.zip)（压缩后 39 KB），它由一个应用程序委托 ( `AppDelegate`) 和一个`NSString`类别（以及一个什么都不做的默认窗口）组成。

在其`init`方法中，`AppDelegate`创建一个`NSSavePanel`. 在执行此操作之前和之后，它会记录通过`NSString`类别方法修剪掉空格和换行符的字符串的长度：`stringByTrimmingWhitespace`.

该字符串由空格和换行符组成。我的类别方法应该修剪所有这些字符，从而产生一个长度为 0 的字符串。

在`NSSavePanel`创建之前，我的`stringByTrimmingWhitespace`方法被调用并返回一个长度为 0 的字符串，正如预期的那样。创建之后`NSSavePanel`，我的`stringByTrimmingWhitespace`方法似乎没有被调用，并且调用的任何方法都不会修剪换行符。但是，`NSString`执行完全相同的操作的不同类别方法 - <code>stringByTrimmingWhitespaceAndNewlines - 被调用并按预期工作。

我完全不知道是什么导致我`stringByTrimmingWhitespace`没有被调用或如何修复它（除了重命名它，这是我所做的）。我还担心其他类上的其他类别方法可能会被丢弃。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T05:19:36.507

似乎`NSSavePanel`是在 NSString 上加载一个类别供自己使用，其名称与您的`-[NSString(TurnerAdditions) stringByTrimmingWhitespace]`方法冲突。您可以使用以下代码进行验证：

```
NSString *foo = @"!";
NSLog(@"Responds to '-stringByTrimmingWhitespace': %@", [foo respondsToSelector:@selector(stringByTrimmingWhitespace)] ? @"YES" : @"NO");
NSSavePanel *panel = [NSSavePanel savePanel];
NSLog(@"Responds to '-stringByTrimmingWhitespace': %@", [foo respondsToSelector:@selector(stringByTrimmingWhitespace)] ? @"YES" : @"NO"); 
```

为什么它的行为与您的不同有点奇怪（编辑：不，不是，请参阅@rdelmar 的评论）。

您应该***始终***在您的类别中为方法名称添加前缀，特别是对于这样的实例。Cocoa 命名约定相当明确，这使得它很可能发生名称冲突。由于处理类别的方式（例如，它们可以在您不知情的情况下在应用程序的执行过程中加载），编译器很难/不可能提供冲突错误。

# android - 调用 MediaController.show() 时 Android 应用程序崩溃 - 无法添加窗口 - 令牌 null 无效

> ID：15626826
> 
> 赞同：4
> 
> 时间：2013-03-25T23:38:34.117
> 
> 标签：android

我正在创建一个音乐流媒体应用程序。根据[android's MediaPlayer guide](http://developer.android.com/guide/topics/media/mediaplayer.html#mpandservices)，我正在从服务控制 MediaPlayer。这一切都很好，现在我正在尝试添加一个 MediaController 来控制播放。为此，我让我的服务实现 MediaController.MediaPlayerControl，并将我的 Activity 绑定到我的服务，然后使用来自 ServiceConnection 的服务上下文从 Activity 实例化 MediaController。

*播放器.java*

```
public class Player extends Activity implements OnClickListener, OnItemClickListener, MediaController.MediaPlayerControl {
    private MediaController mediaController;
    private ServiceConnection mConnection = new ServiceConnection() {    
        @Override
        public void onServiceConnected(ComponentName className, IBinder service) {
            // We've bound to LocalService, cast the IBinder and get LocalService instance
            LocalBinder binder = (LocalBinder) service;
            mService = binder.getService();
            mBound = true;
            showMediaController();
        }    
        @Override
        public void onServiceDisconnected(ComponentName arg0) {
            mBound = false;
        }
    };
    ...
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_player);

        startService(
            new Intent(this, PlayerService.class)
            .setAction("com.limastreamer.action.NEXTSHOW"));

        bindService(
            new Intent(this, PlayerService.class),
            mConnection,
            Context.BIND_AUTO_CREATE);
    }

    public void showMediaController() {
        if (mBound) {
            mediaController = new MediaController(this);
            mediaController.setAnchorView(
                findViewById(R.id.player)
                );
            mediaController.setMediaPlayer(mService);
            mediaController.setEnabled(true);
            mediaController.show(0);
        }
    }
} 
```

*PlayerService.java*

```
public class PlayerService extends Service implements MediaController.MediaPlayerControl {
    private MediaPlayer mMediaPlayer;

    public class LocalBinder extends Binder {
        PlayerService getService() {
            return PlayerService.this;
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        String action = intent.getAction();
        if (action.equals("com.limastreamer.action.NEXTSHOW")) {
            if (mMediaPlayer == null)
            {
                mMediaPlayer = new MediaPlayer();
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                mMediaPlayer.setLooping(false);         
            }
            try
            {
                mMediaPlayer.reset();
                mMediaPlayer.setDataSource(url);
                mMediaPlayer.prepareAsync(); // prepare async to not block main thread
            }
            catch (Exception ex)
            {
                Toast.makeText(getApplicationContext(), "Failed to prepare MediaPlayer", Toast.LENGTH_SHORT).show();
            }
        }
    }

    @Override
    public boolean canPause() {
        return true;
    }

    @Override
    public boolean canSeekBackward() {
        return true;
    }

    @Override
    public boolean canSeekForward() {
        return true;
    }

    @Override
    public int getBufferPercentage() {
        return 0;
        }

    @Override
    public int getCurrentPosition() {
        if (mMediaPlayer != null && mMediaPlayer.isPlaying())
            return mMediaPlayer.getCurrentPosition();
        else
            return 0;
    }

    @Override
    public int getDuration() {
        if (mMediaPlayer != null && mMediaPlayer.isPlaying())
            return mMediaPlayer.getDuration();
        else
            return 0;
    }

    @Override
    public boolean isPlaying() {
        if (mMediaPlayer != null)
            return mMediaPlayer.isPlaying();
        else
            return false;
    }

    @Override
    public void pause() {
        if (mMediaPlayer != null)
            mMediaPlayer.pause();
    }

    @Override
    public void seekTo(int msec) {
        if (mMediaPlayer != null)
            mMediaPlayer.seekTo(msec);
    }

    @Override
    public void start() {
        if (mMediaPlayer != null)
            mMediaPlayer.start();       
    }
} 
```

R.id.player 指的是我的 xml 布局的根元素。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/player"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Player" > 
```

在调用`mediaController.show();`应用程序时出现异常：`Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?`

从查看关于 SO（[例如](https://stackoverflow.com/questions/2634991/android-1-6-android-view-windowmanagerbadtokenexception-unable-to-add-window)）的其他问题来看，这似乎是由于在此处使用了错误的上下文引起的：`mediaController = new MediaController(this);`，即使用了 Activity 上下文以外的其他内容。但据我所知，我使用的是 Activity 上下文。

我试过了：

1.  使用布局中的其他视图作为锚视图（即使[文档](http://developer.android.com/reference/android/widget/MediaController.html#setAnchorView(android.view.View))说您可以使用 Activity 的主视图）
2.  将 MediaController 放在一个片段中，并使用 getActivity() 作为上下文，如下[所示](https://stackoverflow.com/questions/6444288/strange-behavior-videoviewer-fragment-not-working-with-mediacontroller)
3.  将 MediaController 放在 xml 布局中，而不是以编程方式对其进行实例化。
4.  将 VideoView 设置为锚视图（有人说它仅适用于 VideoView）。
5.  创建一个扩展 VideoView 并实现 MediaPlayerControl 的新类，并在该类中实例化 MediaController，使用在初始化为上下文时传递给该类的保存的上下文，并`this`作为锚视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-01T08:39:38.230

您的活动应实现 MediaPlayer.OnPreparedListener 并将服务的 mediaPlayer 的 onPreparedListener 设置为播放器活动。

```
public class MyMediaPlayer extends Activity implements 
MediaController.MediaPlayerControl,MediaPlayer.OnPreparedListener {
...
public void onCreate(Bundle savedInstanceState) {
...
    //this mediaPlayer is the reference of your media player inside your service
    mediaPlayer.setOnPreparedListener(this);
...
}
...
} 
```

您还必须在创建活动后启动您的服务

```
 Intent in=new Intent(MainPlayer.this,MyMediaPlayer.class);
        startActivity(in);
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        //START YOUR SERVICE TO PREPARE YOUR PLAYER 
```

这对我有用。

# php - 按 asc 或 desc 搜索查询顺序

> ID：15626830
> 
> 赞同：0
> 
> 时间：2013-03-25T23:38:56.690
> 
> 标签：php, mysql

嗨，在不再次执行查询的情况下从查询中进行“排序”的最佳方法是什么？假设当我必须使用表单查找姓名或姓氏时，我有一个搜索查询，例如：

```
 //Array for storing WHERE part of query
   $where=array();  

   if(!empty($name)) AND !empty($surname)){
         $where[]="Name LIKE '%$name%'" .
            "AND Surname LIKE '%$surname%'";
   }
   elseif(!empty($name)){
        $where[]="Name LIKE '%$name%'";
   }
   elseif(!empty($surname)){
       $where[]="Surname LIKE '%$surname%'";
   }

   $where = implode(' AND ', $where);

   $sql="SELECT Name,Surname FROM TABLE WHERE $where ORDER BY Name DESC";

   $res = mysql_query($sql);

   while ($row = mysql_fetch_array($res, MYSQL_NUM)) {
           $name    = $row[0];
           $surname    = $row[1];
           echo"$name";
           echo"$surname";

    } 
```

如何在搜索“Name LIKE %surname%”后以 ASC 模式（ORDER BY Name ASC）显示姓名或姓氏，而无需再次执行 SQL 查询？例如，当我搜索包含“ich”字的名称时，我想以这种方式列出一个列表：

```
 MICHAEL
  PICHAEL
  XICHAEL
    => the ASC mode
  XICHAEL
  PICHAEL
  MICHAEL
   => the DESC mode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:32:24.420

你说的是像这样颠倒数组的顺序吗？

```
<?php

  //Array for storing WHERE part of query
   $where=array();  

   if(!empty($name) && !empty($surname)){
         $where[]="Name LIKE '%$name%'" .
            "AND Surname LIKE '%$surname%'";
   }
   elseif(!empty($name)){
        $where[]="Name LIKE '%$name%'";
   }
   elseif(!empty($surname)){
       $where[]="Surname LIKE '%$surname%'";
   }

   $where = implode(' AND ', $where);

   $sql="SELECT Name,Surname FROM TABLE WHERE $where ORDER BY Name";

   $res = mysql_query($sql);

    $names = array();
    $surnames = array();
    $wholeNames = array();

    $x='0';
   while ($row = mysql_fetch_array($res)) {

           if(!empty($row['Name'])){
                $names[$x] = $row['Name'];
           }
           if(!empty($row['Surname'])){
                $surnames[$x] = $row['Surname'];
           }

           if(!empty($row['Name'])&&!empty($row['Surname'])){
             $wholeNames[$x] = $row['Name'].' '.$row['Surname'];
           }
          $x++; 
    }
print "<pre>\n";
print_r ($names);
print_r ($surnames);
print_r ($wholeNames);
print "</pre>\n";

$reversed_names=array_reverse($names);
$reversed_surnames=array_reverse($surnames);
$reversed_wholeNames=array_reverse($wholeNames);

print "<pre>\n";
print_r ($reversed_names);
print_r ($reversed_surnames);
print_r ($reversed_wholeNames);
print "</pre>\n";

?> 
```

需要注意的一点是，如果您将 LIKE 与通配符一起使用，则搜索“Art”将匹配 Bart、Arthur、carter 以及其中包含“Art”的任何其他单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:44:28.847

我真的不认为我正确理解了您的问题，但是我要在这里冒险并猜测您只想按两个不同的列排序？

```
 $sql="SELECT Name,Surname FROM TABLE WHERE $where ORDER BY Name DESC, Surname ASC"; 
```

`"`顺便说一句，您的查询字符串中有一个额外的

此外，您可能想研究使用`mysql_fetch_assoc`而不是`mysql_fetch_array`

这只是我现在在挑剔......但不是使用：

```
 echo"$name";
    echo"$surname"; 
```

你可以写：

```
echo $name;
echo $surname; 
```

# php - 集成 PayPal 快速结账的更简单方法？

> ID：15626831
> 
> 赞同：5
> 
> 时间：2013-03-25T23:39:01.890
> 
> 标签：php, javascript, wordpress, curl, paypal

我已经为 Wordpress CMS 构建了一个产品生成和显示插件，现在我正在尝试为结账过程集成某种形式的 PayPal 集成。

我有购物车、产品、运输、总计，所有这些都是我想出来的，我希望有人能指出我将这些信息发送到 PayPal 的最简单方向。我知道这样做的一些方法并不那么安全，而另一些方法会让你像某种表演犬一样跳过篮球。我一直在尝试学习如何使用 cURL，然后如何让它与 PHP 一起工作——它看起来真的有点乱。我现在确实有 cURL 在我的 WAMP 服务器上工作......但是......

有更好的方法还是我应该继续学习 cURL？

我可以格式化数据，但它需要发送到 PayPal，并且不介意使用 JavaScript 执行此操作 - 这不是付费墙，每个订单都由人工检查准确性 - 所以有人在弄乱客户端脚本不会打扰我。我也绝对想将它们发送到 PayPal，我不想存储/处理他们的信用卡信息。但是，如果有 IPN，那就太好了。有人可以指出我正确的方向或向我保证我已经朝着那个方向前进了吗？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:42:45.437

这就是我使用所有表单详细信息自动重定向到 PayPal 的方式；

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="paypal">

 <input type="hidden" name="cmd" value="_xclick" />
  <input type="hidden" name="cbt" value="Return to example" />
 <input type="hidden" name="business" value="email" />
 <input type="hidden" name="item_name" value="example Purchase" />
 <input type="hidden" name="amount" value="9.99">
 <input type="hidden" name="button_subtype" value="services" />
 <input type="hidden" name="no_shipping" value="1">
 <input type="hidden" name="return" value="URL" />
 <input type="hidden" name="notify_url" value="URL"/>
 <input type="hidden" name="cancel_return" value="URL" />
<input type="hidden" name="currency_code" value="USD"/>
<input type="hidden" name="image_url" value="" />
<input type="hidden" id="custom" name="custom" value="invoice_id to track"/>
 <input type="hidden" class="btn btn-primary" style="width:100%" alt="PayPal - The safer, easier way to pay online!"/>

</form> 
```

对于多个产品，您可以简单地将更多产品添加到表单中，例如；

```
<input type="hidden" name="item_name_1" value="Item #1">
<input type="hidden" name="amount_1" value="1.00">
<input type="hidden" name="item_name_2" value="Item #2">
<input type="hidden" name="amount_2" value="2.00"> 
```

但是，使用这种方法并不是很好

所有数据都需要使用 PHP 生成并输入到页面中，您还需要在 IPN 回调时检查交易以确保其已支付。

```
<script type="text/javascript">
  function myfunc () {
     var frm = document.getElementById("paypal");
     frm.submit();
  }
  window.onload = myfunc;
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T07:30:54.420

您可能想要使用新的 PayPal SDK。他们有一套很好的示例代码，包括快速结账和 IPN 的代码。在此处尝试 [https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index) 获取用于快速结帐的 SDK。此时，它们应该是 SDK 98 for PHP。

您不必担心 Curl，SDK 会为您处理所有这些。一个典型的调用可能是这样的。

```
$setECResponse = $paypalService->SetExpressCheckout($setECReq); 
```

这行代码是在示例之后建模的。都是面向对象的。他们为您提供课程。在这种情况下，您填写了一个请求对象，示例准确显示了如何执行；只需使用示例作为您的模板。

听起来您想进行 PayPal Express 结账，这样您就不必处理信用卡或类似的事情。用户被重定向到 PayPal 网站，所有金融交易都在那里进行。用户被重定向回您的站点。然后您有一个页面，用户可以在其中查看订单并在他们批准后单击提交。当用户单击提交时，您调用一个 PayPal API 告诉 PayPal 交易已被批准。然后 PayPal 执行交易并向您发送带有交易 ID 的确认信息。然后，您可以调用 getTransactionDetails 并向客户显示确认信息。您还可以将这些交易详细信息放入数据库中。

以下是您可以为此调用的 API。这些模型与它们提供的示例代码非常接近

```
$paypalService->SetExpressCheckout($setECReq); 
```

控制转到 PayPal URL，用户在那里浏览几个页面。控制权返回给您。

您的订单审核页面 $paypalService->GetExpressCheckoutDetails($getExpressCheckoutReq);

您的订单确认页面

```
$paypalService->GetExpressCheckoutDetails($getECReq);

$paypalService->DoExpressCheckoutPayment($DoECReq); 
```

告诉 PayPal 进行交易。

```
$paypalService->GetTransactionDetails($request); 
```

在这里，您可以将交易详细信息放入数据库。您还可以向自己发送一封包含所有详细信息的邮件，这样您就可以知道何时发生交易。

IPN 可能有点棘手。他们提供了一个示例 IPN 侦听器，这将有所帮助。您需要在 PayPal 网站上设置您的侦听器 URL。您还需要设置 SSL 证书。

SDK 是相当新的，但 PayPal 正在开发一种更新的做事方式，developer.paypal.com。它是在上个月左右才出来的。你可能也想调查一下。

# c# - 使用 Javascript 进行 WCF 身份验证

> ID：15626834
> 
> 赞同：1
> 
> 时间：2013-03-25T23:39:22.010
> 
> 标签：c#, javascript, wcf

我喜欢保护 wcf 服务，而不是在每次来自 javascript 的调用时都传递用户名密码。我想我可以用 cookie 实现它？我不知道从哪里开始。我喜欢看代码来理解，它说的不仅仅是文字。有很多示例如何使用 .NET 进行身份验证，但我不确定与 javscript 的关系如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:58:46.690

你可以做什么

1.  [在ASP.NET 兼容](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)模式下托管 WCF
2.  拒绝匿名访问 Web.Config 中的服务 uri
3.  在您的网站上实施表单身份验证

第**1**步和第**2**步将确保不向 WCF 服务授予匿名访问权限。第**3**步将确保通过 javascript 请求自动传递任何身份验证 cookie

# c# - 在“使用”块中初始化对象是否会将其置于块之外？

> ID：15626835
> 
> 赞同：0
> 
> 时间：2013-03-25T23:39:25.337
> 
> 标签：c#, c#-4.0

我有一些看起来像这样的代码：

```
Object o;
using (SqlConnection sql = GetSqlConnection) {
    using (SqlCommand sqlCommand = GetSqlCommand()) {
        using (Datareader dr = GetDataReader()) {
            o = new Object();
            while (dr.read()) {
                //do something
            }
        }
        if (o == null) // RESHARPER SAYS THAT THIS WILL ALWAYS BE TRUE
            //do something
    }
} 
```

在我检查的地方`o == null`，ReSharper 说这个命令总是正确的。我不明白这种行为；是否处理块中初始化的所有对象`using`，或者仅处理使用`using`语句创建的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:43:51.223

当 using 块关闭时，它将对该对象调用 Dispose()，这取决于 IDisposable 的实现，可能会将对象设置为 null。但是，在您的情况下，“o”不是 IDisposable 或在 using 块中，我愿意相信 ReSharper 在这种情况下存在错误，因为当我的安装中有完全相同的代码时，它会提示我替换

```
if(o == null) 
```

与错误，与您的问题完全相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:47:37.410

如果您的代码与编写的代码完全相同，并且 Resharper 真的在抱怨您指出的那一行，那么这是错误的。

事实上，ReSharper 恰恰相反：比较是多余的，因为它*永远不会*是真的。您立即设置`o`为 a `new Object()`，因此它永远不会是`null`。除了您在开始语句中放入的变量之外，该`using`块对变量的值没有影响。在离开一个`using`块时，一个实例通过调用`IDisposable.Dispose`它被处理掉，并且它超出了范围。

但是，我确实想纠正您似乎有的一个巨大误解：***处理对象不会将其设置为 null***。以下代码在尝试关闭已处置的对象时仍会崩溃*：*

```
var conn = new SqlConnection(GetConnectionString());
conn.Open();
conn.Dispose();

if (conn != null)
{
  conn.Close();
} 
```

“被处置”是适用于对象实例的条件；这意味着他们的资源已经被清理干净，不能再安全使用了。“为空”是适用于*变量*的条件；这意味着它们不引用其定义类型的*任何*实例，不管是废弃的还是其他的。

`using`关键字和接口用于管理对象实例的`IDisposable`is-disposed-of 状态。它们对程序中变量的 is-a-null-value 状态没有影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T23:42:04.650

> 在“使用”块中初始化对象是否会将其置于块之外？

**没有**。[这是证据。](http://liveworkspace.org/code/23ZQBJ%243)

当然，您正在使用的对象将被释放（这是使用的全部意义），但在块内完成的事情不会受到影响。不过，这是一个新范围，因此您会收到**以下**代码的警告：

```
Object o;
using (SqlConnection sql = GetSqlConnection) {
    using (SqlCommand sqlCommand = GetSqlCommand()) {
        using (Datareader dr = GetDataReader()) {
            Object o = new Object();
            while (dr.read()) {
                //do something
            }
        }
        if (o == null) // RESHARPER SAYS THAT THIS WILL ALWAYS BE TRUE
            //do something
    }
} 
```

（注意内部范围内第二个对象 o 的声明）。

# javascript - 查找 HTML 页面中的所有 iFrame 并替换它们

> ID：15626837
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:39:52.310
> 
> 标签：javascript, jquery, google-chrome-extension

我想使用 jQuery 查找页面中的所有 iFrame，然后替换它的源。

我是从 chrome 扩展中执行此操作的，因此任何替换它的方法，然后加载 iframe（以便 iframe 在页面视图中处于活动状态），都是我正在寻找的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:45:41.380

您可以通过在元素名称上调用 jquery 选择器来创建元素的所有实例：

```
$('iframe') 
```

您可以使用 jquery attr() 方法设置任何元素的属性。要将页面上的所有 iframe 替换为 google.com，您可以执行以下操作：

```
$('iframe').attr('src','http://google.com'); 
```

**--免责声明：以下代码是评论中引用的示例，不是原始问题的答案：**

这是您将如何迭代每个 iframe 并检查它的宽度：

```
$('iframe').each(function(){
    var currentIframeWidth = $(this).width();
    //do something with width here
}); 
```

# sql - 生成 sql 命令时，Entity Framework 无法解释的性能下降似乎很好

> ID：15626840
> 
> 赞同：0
> 
> 时间：2013-03-25T23:40:06.230
> 
> 标签：sql, sql-server, asp.net-mvc, entity-framework

我有一个带有实体框架的 MVC4 应用程序用于数据访问。到目前为止，我的应用程序似乎运行良好，其中一个页面返回了大约 13,000 多行，并且连接超时。另外，在我尝试运行返回 13,000 多行的页面后，网站的其余部分也开始变得非常缓慢。虽然我使用的是相当复杂的 linq 查询，但我使用的是 Stack Exchange miniprofiler，并使用其中的 sql，我确定我的查询花费了不到一秒钟的时间（通过在 LINQ 查询中运行生成的 sql 来验证）直接 SSMS；可能需要 2 秒，顶部）。即使返回的结果集很小，分析器也会说类似“T+0.97ms，Reader 10393ms”。它最终会恢复正常。

我四处寻找有关 READER 声明告诉我的文档，但收效甚微。这是否意味着将结果流式传输回 Web 服务器所需的时间是多少？无论如何，如果有人知道这里会发生什么，我将不胜感激。如果有人想要，我可以发布 LINQ 代码，但就像我说的，我非常有信心它生成的 SQL 是好的。

谢谢

编辑：我可能会提到一件事：这是在中等信任下运行的共享托管环境中。此外，如果相关，这里是超时堆栈跟踪：

> System.Data.EntityCommandExecutionException：执行命令定义时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() 在 System.Data.SqlClient.SqlDataReader.get_MetaData() 在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:49:39.623

我相信我已经想通了。不幸的是，我并没有真正被允许发布代码，但事实证明，在我的 Linq 查询末尾添加 .AsNoTracking() 可以让阅读器执行时间缩短到大约 3-4 秒。我猜想在如此大的模型中启用更改跟踪来实现如此多的对象是瓶颈。这是可以接受的，因为这是一个只读列表。

@bleepzter，我尝试了你的建议，直接运行 Sql 要快得多，所以这绝对引导我走上解决方案的道路。

# ruby - 如何通过 Middleman 安装和使用 Slim 模板引擎

> ID：15626845
> 
> 赞同：5
> 
> 时间：2013-03-25T23:40:37.567
> 
> 标签：ruby, slim-lang, middleman

我是 Middleman 和 ruby​​ 的新手。

我已经安装了 Ruby 我已经安装了 Middleman 和 gems 来让它运行。

我需要使用 slim 而不是默认的模板系统。

所以我安装了 Slim gem。Slim 的网站只说我需要“slim”才能让它工作。

中间人网站说我只需要将模板引擎添加到 config.rb 文件中，但它没有给出示例......

对于没有红宝石背景的人来说，这无济于事。

我在 git 上找了几个 config.rb ，它们都有：

```
require 'slim' 
```

和

```
# Set slim-lang output style
Slim::Engine.set_default_options :pretty => true

# Set template languages
set :slim, :layout_engine => :slim 
```

我将它添加到我的 config.rb 文件并创建了 layout.slim 和 index.html.slim

当我刷新本地服务器时，我得到：

```
Not Found

`/' not found. 
```

我用 Boilerplace 安装了中间人。我不确定是否还有更多需要更改的文件，但是我在网上找不到任何好的资源，这很奇怪。

谁能给我一些关于我缺少什么的方向？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T16:04:56.473

所以我们开始了......经过大量阅读和搜索谷歌的例子，我想我明白了。

让 Slim 与 Middleman 合作

1.  添加`gem "slim"`到项目的 gemfile
2.  转到命令行，在您的项目文件夹中，然后`gem install bundler`
3.  在 config.rb 文件中添加`require 'slim'`
4.  启动中间人服务器进行测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-09T22:51:46.773

yterajima的[middleman](https://github.com/yterajima) [-slim](https://github.com/yterajima/middleman-slim)项目在这方面很有帮助。

安装非常简单。

```
$ gem install middleman
$ gem install middleman-slim
$ middleman init PROJECT_NAME --template slim 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-27T18:14:43.497

Bundler 提示：您还可以使用`Bundler.require`. 如果您在组中有宝石，则可以将它们包括在内：`Bundler.require :group1, :group2 ...`

# jquery - Twitter iframe 小部件删除滚动条

> ID：15626846
> 
> 赞同：3
> 
> 时间：2013-03-25T23:40:38.103
> 
> 标签：jquery, iframe, twitter

一直试图弄清楚如何删除 iframe twitter 小部件中的滚动条。我知道我不能用 css 做到这一点所以我的下一个外观是用 jquery 尝试了以下但似乎不起作用

```
$("iframe").ready(function () {
    $(".stream", this).css("overflow-x", "hidden");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:13:58.020

您可以使用 css 禁用它。我使用这个插件（[https://github.com/kevinburke/customize-twitter-1.1](https://github.com/kevinburke/customize-twitter-1.1)）来覆盖twitters css，然后添加：

```
.timeline .stream {overflow:hidden;} 
```

我还通过将相同的 css 直接添加到本地存储的 twitter widget.js 副本中来隐藏滚动条（大约第 30 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T21:42:47.437

**简单的解决方案**

在 iframe 标记中将滚动属性设置为 no。像这样：

```
scrolling="no" 
```

完整的 iframe 示例：

```
<iframe scrolling="no" title="Twitter Tweet Button" style="border:0;overflow:hidden;" src="https://platform.twitter.com/widgets/tweet_button.html"  height="28px" width="76px"></iframe> 
```

# c++ - 从函数参数获取持久对象

> ID：15626847
> 
> 赞同：0
> 
> 时间：2013-03-25T23:40:44.833
> 
> 标签：c++, v8

我目前基于 XML 和 Javascript 实现我的用户界面。我写了很多包装类，到目前为止一切正常。只有一件事让我烦恼。我无法从我的一个函数的参数创建持久对象。说我有以下功能：

```
void UIManager::registerJSObject(JSObjectPtr objPtr) { 
```

使用我的包装器注册到 Javascript 的 JSObject（包装 v8::Handle）指向本地函数参数，因此在函数之后它被删除。现在显然那不是我想要的。

我的第一种方法是向 JSObject 类添加一个 makePersistent 方法，如下所示：

```
void JSObject::makePersistent() {
    v8::Persistent<v8::Object> newObj = v8::Persistent<v8::Object>::New(mObject);
    mObject = newObj;
} 
```

可悲的是它没有工作，该对象仍然被垃圾收集。所以我认为当我在那里这样做时可能为时已晚，并且由于某种原因从回调的 Arguments 参数中获取它时已经必须转换它并且我将包装器更改为此（仅用于测试）：

```
template<uint32 size, typename T, typename... FullArgs, typename... Args>
Res expand(const v8::Arguments& args, Args... curArgs) {
    return expand<size + 1, FullArgs...>(args, curArgs..., ObjectWrap::unwrap<T>(v8::Persistent<v8::Value>::New(args[size])));
} 
```

可悲的是，那也不起作用。我无法获得在 javascript 中分配的对象的持久句柄。我在谈论那个代码：

```
var frame = {
    xmlTemplate: "testXml.xml",

    onTemplateLoaded: function () {
        this.frame1.button1.Caption = "Test";
    },

    buttonClicked: function(button) {
        button.Caption = "Clicked";
    }
};

UIMgr.loadUIElement(frame); 
```

并且 id 喜欢调用 buttonClicked 函数或设置一些字段，不仅在 UI.load 函数中，而且在以后。

有谁知道我是否遗漏了什么或者这是一个错误？

问候穆佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:04:52.213

好的，我找到了解决方案。我已经在正确的轨道上，持久句柄的创建必须在原始对象上完成，所以我修改了我的扩展成员函数，第二次重载，特别是对于应该获取 JSObject 的参数。

和之前看到的差不多：

```
 template<uint32 size, typename T, typename... FullArgs, typename... Args>
    typename std::enable_if<std::is_same<T, JSObjectPtr>::value, Res>::type expand(const v8::Arguments& args, Args... curArgs) {
        return expand<size + 1, FullArgs...>(args, curArgs..., ObjectWrap::unwrap<T>(v8::Persistent<v8::Value>::New(args[size])));
    } 
```

JSObjectPtr 的 ObjectWrap::unwrap 中有有趣的部分：

```
 template<typename T>
    static typename std::enable_if<std::is_same<T, JSObjectPtr>::value, JSObjectPtr>::type unwrap(v8::Persistent<v8::Value> val) {
        v8::Persistent<v8::Object> objh = v8::Persistent<v8::Object>::Cast(val);

        return std::make_shared<JSObject>(objh);
    } 
```

它必须作为**v8** ::Persistent 传递给函数，否则它将不起作用。

JSObject 有一个用于持久句柄的构造函数，并将其转换为弱引用，当没有人再使用 JSObject 时（并且实际上必须收集它时），该弱引用会被调用。

# c# - C# Mysql 没有更新数据

> ID：15626849
> 
> 赞同：0
> 
> 时间：2013-03-25T23:40:52.960
> 
> 标签：c#, mysql

我正在尝试在 C# 中创建一个类来操作 Mysql 数据
我可以使用我的方法获取数据但我无法更新数据，并且没有返回任何异常

我使用此行来调用我的方法
`Email1.Text=bdOp.alterContent(Email1.Text, "Email");`

方法'alterContent'：

```
公共字符串 alterContent（字符串值，字符串名称）
{
    字符串查询=“更新conteudo集conteudo=@valor其中nome=@nome”；

```
cmd.Parameters.Clear();
cmd.Parameters.AddWithValue("@valor", valor);
cmd.Parameters.AddWithValue("@nome", nome);

try
{
    conn.Open();
    cmd.CommandText = query;
    cmd.ExecuteNonQuery();
    conn.Close();
    return "Sucesso.";
}
catch (Exception erro) { return erro.ToString(); } 
```

}

```

这个方法有返回字符串，因为我曾经用来检查异常
我不知道为什么这段代码没有更新我的数据并且没有返回任何异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:55:52.623

昨晚我遇到了非常相似的情况......它在 MVC 中，所以我不得不停止虚拟本地主机，并进行干净的构建。重新启动视觉工作室后......它工作了。我也没有收到任何错误。

此外，验证 Email.Text 中的文本，也许那里可能会引发问题。

# php - 根据字段值传递数据库字段 ID 的运行 SQL

> ID：15626851
> 
> 赞同：1
> 
> 时间：2013-03-25T23:41:02.037
> 
> 标签：php, jquery, mysql, ajax, database

我正在尝试构建一个 CMS，我可以在其中单击星形图标，它将更改`art_featured`我数据库中的值，所以说如果`art_featured`值为 0，然后单击星形图标，我想将字段的值从 0 更改为 1 . 我有点工作，但我不知道如何传递`art_featured`价值，通常我只会`id`在我的，`span`但我已经在使用它，所以我可以告诉我需要更改哪篇文章，所以我怎么能得到`art_featured`我的语句的值，所以我可以运行 if 和 else 语句，然后根据 的值`SQL`运行某个语句，`SQL``art_featured`

提前感谢您的帮助！

桌子

```
art_id  art_title  art_company    art_featured
1       lorem 1    lorem ipsum 1  1
2       lorem 2    lorem ipsum 2  0 
```

HTML/PHP

```
<section class="row">
    <?php
    $sql_categories = "SELECT art_title, art_company, art_id, art_featured FROM app_articles"; 

        if($result = query($sql_categories)){
            $list = array();

            while($data = mysqli_fetch_assoc($result)){
                array_push($list, $data);
            }

            foreach($list as $i => $row){ 
            ?>
                <div class="row">
                    <div class="column two"><p><?php echo $row['art_title']; ?></p></div>
                    <div class="column two"><p><?php echo $row['art_company']; ?></p></div>
                    <div class="column one"><span id="<?php echo $row['art_id']; ?>" class="icon-small star"></span></div>
                </div>
            <?php
            }
        }
        else {
            echo "FAIL";
        }
    ?>
    </section> 
```

jQuery

```
 $(".star").click(function(){

        var art_id = $(this).attr('id');

        $.ajax({
        type: "POST",
        data: {art_id:art_id},
        url: "ajax-feature.php",
        success: function(data){
            if(data != false) {

            } 
            else {

            }  
        }
        });

    }); 
```

MYSQL/PHP

```
 if(isset($_POST['art_id'])) {

    $sql_articles = "UPDATE `app_articles` SET `art_featured` = 1 WHERE `art_id` =".$_POST['art_id'];

    if(query($sql_articles)) {
        echo "YES";
    }
    else {
        echo "NO";
    }
}
else {
    echo "FAIL";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:09:29.637

```
$sql_detail = "SELECT * FROM app_articles
WHERE art_id = " . $_POST['art_id'];
$sql_result = mysql_query($sql_detail);
if(mysql_num_rows($sql_result) > 0) { // the art_id supplied exists

    while($sR = mysql_fetch_array($sql_result)) {

        $art_title = $sR['art_title'];
        $art_company = $sR['art_company'];
        $art_featured = $sR['art_featured];

        // Do whatever you want with these variables

    }

} else { // the art_id supplied does not exist

} 
```

将 $_POST['art_id'] 直接传递到 SQL 语句中是不安全的，因此您可能应该阅读数据清理。但这应该可以。

# windows - 64 位 Windows 上的 OpenSSL

> ID：15626852
> 
> 赞同：2
> 
> 时间：2013-03-25T23:41:06.257
> 
> 标签：windows, openssl, 64-bit

我正在尝试在 Windows 8 上构建和链接 OpenSSL，但我发现它确实令人生畏。我应该提到我知道以下帖子

*   [OpenSSL Windows x64 编译错误](https://stackoverflow.com/questions/2753960/openssl-windows-x64-compilation-error)
*   [你如何为 x64 编译 OpenSSL？](https://stackoverflow.com/questions/158232/how-do-you-compile-openssl-for-x64)
*   [构建 OpenSSL VC++ 静态 64 位库](https://stackoverflow.com/questions/15304327/building-openssl-vc-static-64bit-libs)

但他们都没有解决我真正需要知道的问题。因此，我决定将我的经验作为一个新帖子与大家分享！

首先，我可以在 Win32 操作系统上成功构建和链接 OpenSSL，并且它可以完美运行。我知道**Windows 8**带有[WOW64](http://en.wikipedia.org/wiki/WoW64)。“<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa384249%28v=vs.85%29.aspx" rel="nofollow noreferrer">WOW64 是一个 x86 模拟器允许基于 32 位 Windows 的应用程序在 64 位 Windows 上无缝运行”，但是当我运行基于 Windows 7 32 位构建的应用程序时，我收到错误“<strong>程序无法启动，因为您的计算机中缺少 libeay32.dll……</strong>”，而“<strong>libeay32.dll”显然存在并且没有丢失。

为了避免注册表丢失的东西，我尝试在 Windows 8 上以 32 位模式构建 OpenSSL。构建成功完成，应用程序正确链接，没有错误。当我再次运行该应用程序时，我收到了相同的错误消息。

然后我尝试根据以下步骤在 64 位模式下构建它；

```
set PATH=%PATH%;c:\perl\bin;c:\nasm;
call "c:\visual studio\2012\vc\vcvarsall.bat" x64
perl Configure VC-WIN64A no-shared no-idea
call ms\do_win64a
copy ms\libeay32.def ms\libeay64.def /Y
copy ms\ssleay32.def ms\ssleay64.def /Y

ssed -e s/out32/out64/g ms\ntdll.mak | ssed … > ms\ntdll-64.mak
ssed -e s/out32/out64/g ms\nt.mak | ssed … > ms\nt-64.mak

nmake -f ms\ntdll-64.mak
nmake -f ms\ntdll-64.mak test
nmake -f ms\ntdll-64.mak install 
```

在这种情况下，我在构建过程中收到了很多关于“数据转换和数据丢失可能性”的警告，但它是构建的，而“<strong>test”失败“<strong>install”生成输出。

现在，当我尝试使用新的“<strong>libeay64.lib 和 ssleay64.lib”在 Visual Studio 中构建我的解决方案时，我收到了几乎数千个错误，提示“未解析的外部符号”</p>

因此，如果可能，请回答以下问题；

1.  为什么我无法在 Windows 8（64 位）上运行我的 32 位应用程序？
2.  为什么在 Windows 8 上正确构建 OpenSSL（32 位模式），仍然遇到同样的错误？
3.  在 OpenSSL 构建（64 位模式）中，我做错了吗？

我正在使用**OpenSSL ver 1.0.1e**、**Visual Studio 2012**和**nasm 2.10.07**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:56:16.193

我部分回答你的问题：

你可以在WOW64中运行64位下的32位。

对于 64 位下的 OpenSSL，Visual Studio 下有一个编译器选项 /WX，这意味着将警告视为错误。从 makefile 中删除该编译器选项。你会收到很多警告。但是 OpenSSL 会被编译。

由于大多数模块都没有被编译并且它们的目标文件没有生成，这就是你得到链接器错误的原因。请让我知道它是否解决了您的问题。

# php - 正则表达式：获取 TeX 命令

> ID：15626853
> 
> 赞同：2
> 
> 时间：2013-03-25T23:41:19.040
> 
> 标签：php, regex, tex

我有一个像这样的字符串：

```
$str = "\textaolig 3 \texthtbardotlessjvar  \textrthooklong
    B \textbenttailyogh ; \textinvomega q \textscaolig
    . \textbktailgamma p \textinvsca r \textscdelta
    D \textctinvglotstop ! \textinvscripta s \textscf
    2 \textctjvar I \textlfishhookrlig t \textsck"; 
```

我想用正则表达式获取所有 TeX 命令（\textaolig 等）。我试过了：

```
\\([[a-z]\s]+) 
```

但没有运气。有人可以帮我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:44:24.583

首先，您必须用单引号将字符串括起来，因为在使用双引号时，如果您使用反斜杠，它将尝试转义一个字符，这不是您的情况。

其次，您必须使用`\\\\`来匹配反斜杠。

~~我不知道 TeX 命令，但`[\w\s\.;]+`如果需要，我会尝试匹配，以便更正它：~~

```
$str = '\textaolig 3 \texthtbardotlessjvar \textrthooklong
    B \textbenttailyogh ; \textinvomega q \textscaolig
    . \textbktailgamma p \textinvsca r \textscdelta
    D \textctinvglotstop ! \textinvscripta s \textscf
    2 \textctjvar I \textlfishhookrlig t \textsck';
    preg_match_all('/\\\\(?P<tex>\w+)/s', $str, $m);

    var_dump($m["tex"]); 
```

# python - 用 Y 压缩 X,Y

> ID：15626854
> 
> 赞同：0
> 
> 时间：2013-03-25T23:41:51.043
> 
> 标签：python, zip

我有一组这样的数据，格式为 x,y：

```
a = [([2,-2,0.29]), 0)([-2,0,1.9]), 2),([ 2,1,2.35]),3),([2, -3,2.96]), 3) 
```

有没有办法通过 y 压缩，以便我将 ([ 2,1,2.35]),([2, -3,2.96]) 放在一起？我想把它们放在一起，这样我就可以找到两个 x 中每一个的最大 x 和 y。如您所见，我的 x 项实际上本身就是一个 x,y,z。

*编辑* 这是我尝试过的代码。我需要一种方法来实现我不必在“3”中编码的地方。

```
import numpy as np
a = [([2, -2, 0.29], 0), ([-2, 0, 1.9], 2), ([2, 1, 2.35], 3), ([2, -3, 2.96], 3)]
b = [0,2,3,3,5,5,6,6,6,8,8,9,10,11,11,11,16,16,16,16,17,18,19,20,20,20,23,24,25,26,28]
cur = []
for x,y in a:
if y == 3:
    cur.append(x)
    b.remove(3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:32:10.767

您可以这样做将它们放入默认字典中。

```
from collections import defaultdict
new_data = defaultdict()
for data_point in a:
 if data_point[1] in new_data:
   new_data[data_point[1]].append(data_point[0])
 else:
   new_data[data_point[1]] = [data_point[0]] 
```

然后得到你可以做的每个部分的最大值

```
for item in new_data.items():
     print "For key: ",
     print item[0]
     print max([data[0] for data in item[1]])
     print max([data[1] for data in item[1]])
     print max([data[2] for data in item[1]])
     print "---------" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:00:03.337

```
In [1]: a = [([2, -2, 0.29], 0), ([-2, 0, 1.9], 2), ([2, 1, 2.35], 3), ([2, -3, 2.96], 3)]

In [2]: result={}

In [3]: for x in a:
   ...:     result.setdefault(x[1],[]).append(x[0])
   ...:     

In [4]: result[3]
Out[4]: [[2, 1, 2.35], [2, -3, 2.96]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:50:13.290

我认为有两种解决方案。

如果您知道所有相等`y`值的组彼此相邻（例如，因为您的列表已排序），您可以使用`itertools.groupby`组合相邻值：

```
from itertools import groupby

def condense_on_y(lst):
    return [group[0][1], [x for x,y in group]
            for group in groupby(lst, lambda item: item[1])] 
```

如果您的列表可能不按顺序排列，那么我认为您需要将内容放入另一个数据结构中。这是使用`defaultdict`and的解决方案`itertools.chain.from_iterable`：

```
from collections import defaultdict

def condense(lst):
    dct = defaultdict(list)
    for x, y in lst:
        values[y].append(x)

    return list(dct.items()) # list(...) wrapper not needed in Python 2 
```

# python - 无需 CUPS 即可获取 USB 打印机信息

> ID：15626860
> 
> 赞同：0
> 
> 时间：2013-03-25T23:42:18.730
> 
> 标签：python, linux, printing, linux-kernel, usb

我想通过 USB 连接多台打印机并将打印文件发送到每台打印机。我了解打印机被列为`/dev/usb/lp0`, `/dev/usb/lp1`, 目前我正在使用此 python 指令将文件发送到打印机

```
for files in os.listdir('/folder/with/print/files'):
        shutil.copyfile('/folder/with/print/files', '/dev/usb/lp0') 
```

但是，我注意到 Linux 并没有`lp0`按`lp1`任何特定顺序进行标记。因为我像这样向打印机发送文件，所以我不想使用 CUPS 来获取我每台打印机的信息。我不想让我的打印调用依赖于搜索驱动程序，因为我已经为这些打印机格式化了这些文件。相反，我想找到一种替代方法来获取 lp*（lp0、lp1 等）的打印机信息。我最好是通过 python 来实现，或者通过使用`os`函数来通过 Linux 内核。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:17:09.853

不要直接写入打印机设备，而是尝试在 shell 命令中使用 lpr！

[http://www.tldp.org/HOWTO/Printing-Usage-HOWTO-2.html](http://www.tldp.org/HOWTO/Printing-Usage-HOWTO-2.html)

看起来它可以让您按名称选择打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-19T10:31:07.737

可以使用以下命令获取 USB 设备供应商/型号/序列号`udevadm`：

```
udevadm info -q property /dev/usb/lp0 
```

应该足以区分设备。

# c++ - 链表打印不正确？

> ID：15626862
> 
> 赞同：2
> 
> 时间：2013-03-25T23:42:30.730
> 
> 标签：c++, class, linked-list

```
 struct stack_struct
    {
        int number;
        struct stack_struct *next_number;
    };

    stack_struct *mainStruct;

    class stack_class
    {
    private:

        struct stack_struct *head;

    public:
        stack_class();
        //~stack_class();
        void pushNumber(int number);
        void popANumber();
        void findNumber();
        void clearStack();
        void sizeFinder();
        void printStack();

    };

    stack_struct *pointerFunc,*pointerFunc2,*pointerFunc3,*printPointer;

    stack_class::stack_class()
    {
        head=NULL;
    }

    void stack_class::pushNumber(int numberFunc)
    {

        if(head==NULL)
        {
            head = new stack_struct;
            head->number = numberFunc;
            head->next_number = NULL;
            pointerFunc2=head;
        }
        else
        {
            pointerFunc = new stack_struct;
            pointerFunc->number=numberFunc;
            pointerFunc->next_number=NULL;
            head->next_number=pointerFunc;
            head=pointerFunc;
        }
    }

    void stack_class::printStack()
    {

                while(pointerFunc2)
                {
                    cout<<pointerFunc2->number<<endl;
                    pointerFunc2=pointerFunc2->next_number;
                }

    }

    int optionChosen;

    int main()
    {
        stack_class mainClassStack;
        do
        {

            cin>>optionChosen;

            switch(optionChosen)
            {
            case 1:
            {
                int pushInt;
                cout<<"\n\nEnter Number: ";
                cin >> pushInt;
                mainClassStack.pushNumber(pushInt);
                break;
            }
            case 2:
            {
                break;
            }
            case 3:
            {
                break;
            }
            case 4:
            {
                break;
            }
            case 5:
            {
                break;
            }
            case 6://print
            {
                mainClassStack.printStack();

                break;
            }
            default:
            {
                break;
            }
            }
        }while(optionChosen!=7);

        return 0; 
```

我正在尝试使用动态内存（链表）实现堆栈类型的数据列表。但是当我尝试打印列表时，它只打印一次列表，如果我尝试使用选项 6 再次重新打印，它就像列表消失了。我检查了两次代码，但无法弄清楚问题所在。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:46:47.350

问题是当你第一次用这个打印堆栈时

pointerFunc2=pointerFunc2->next_number;

pointerFunc2 成为第一次迭代后的最后一个元素。所以这就是你认为它消失的原因。您应该在打印后重置​​ pointerFunc2 以指向头节点。所以先保存它，然后在遍历整个列表后恢复它，这样下次打印堆栈时，您将从头节点开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T23:46:07.633

您的代码的问题在于，在您打印堆栈后，您并没有重置`pointerFunc2`为`head`.

要么正确重置它，要么在打印函数中使用局部变量。

这是您的函数的更正版本：

```
void stack_class::printStack()
{
    while (pointerFunc2)
    {
        cout << pointerFunc2->number << endl;
        pointerFunc2 = pointerFunc2->next_number;
    }

    // reset pointerFunc2 so the next iteration
    // can start at the head and print again.
    pointerFunc2 = head;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T23:46:15.407

第二次打印不起作用的原因是您使用的是全局变量而不是本地变量：

```
stack_struct *pointerFunc2; 
```

当你在函数或类之外声明一个变量时，它就变成了全局变量。全局变量在函数调用中仍然存在，并保留最后设置到其中的值。为了成为局部变量，需要在*内部* `printStack`声明一个变量，初始化到堆栈的头部，然后在退出函数时将其丢弃。关于`pointerFunc`.

和变量未使用`printPointer`，`pointerFunc3`可以从源代码中删除。

# php - 标签栏代表的标准模式是什么

> ID：15626866
> 
> 赞同：1
> 
> 时间：2013-03-25T23:42:52.903
> 
> 标签：php, iphone, ios, nsurlconnection, nsmutabledata

使用标签栏传输数据的标准模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:48:06.017

1.  在您的计算机上设置本地服务器（最终这将托管在网站上，等等......）为此，我建议以下内容：

2.  按照说明下载 XAMPP ( [http://www.apachefriends.org/en/xampp-macosx.html )](http://www.apachefriends.org/en/xampp-macosx.html)

    *   在应用程序中安装

    *   使应用程序中 XAMPP 文件夹中的 htcdocs 对所有人进行读写

    *   创建一个名为 Tutorials 的新文件夹（在 htcdocs 中）
    *   添加一个名为 index.php 的新 php 文件
    *   编写 php 代码（注意这不安全，只是一个非常基本的示例）

在 index.php 中 write: // 很不安全，但这会找到函数参数名称

```
if(function_exists($_GET['f'])) {
    //If found, call the function with value as a parameter
   $_GET['f']($_GET['value']);
}
//actual function that takes in a number and finds the square of the number
function getLabel($number){
    //This variable response with parameter name is equal to the number times the number    
    $response['name']=$number*$number;
    //Return the data to the caller (in JSON encoded format)
    echo json_encode($response);
} 
```

-保存并关闭您的 index.php 文件

1.  在 Xcode 中创建一个新项目，使用文本标签对其进行设置，该标签将在屏幕上显示结果（如果您不知道如何执行此操作，非常简单的谷歌教程）

在 Xcode 中设置连接

详细信息和步骤在 .h 和 .m 文件中进行了说明（很抱歉，不确定为什么这里的代码部分没有这样显示）

```
//Step 1, add NSURLConnectionDataDelegate
    //.h
@interface ViewController : UIViewController<NSURLConnectionDataDelegate>
@property (strong, nonatomic) IBOutlet UILabel *answer;
@end 
```

.m

```
#import "ViewController.h"

@interface ViewController ()
{//step 2 local data objects
    NSMutableData*webData;
    NSURLConnection*connection;

}
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Step 8 call (send) the request
    [self getData];
    // Do any additional setup after loading the view, typically from a nib.

    //NSDictionary*dict=[NSJSONSerialization se]
}
//Step 3 implement this method 
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [webData setLength:0];
}

//Step 4 append the connection data to your object
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [webData appendData:data];
}

//Step 5 Process results from request (called automatically when the data arrives)
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    //Main parse

    //Web data

    NSError*error;

    //Dictionary serialized (processed) using JSON (Way of encoding data from a web request)
    NSDictionary*data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:&error];

    //If data is nil, then print error
    if (data==nil) {
        NSLog(@"%@",error);
    }

    //Print the data
    NSLog(@"%@",data);

    //Get the numerical result from the dictionary key name
    NSNumber*num=[data valueForKey:@"name"];

    //Convert number to string
    NSString*label=[num stringValue];

    //Set the label to this result
    _answer.text=label;

}
//Step 7, actually initialize the request
-(void)getData{
    //I will break this down as if it where a generic method
    //Connect to the index.php file via this URL

    //Localhost/tutorials is the XAMPP folder on your computer

    //index.php is the php file

    //getLabel(int number){}
    //?f=getLabel (calling this method in the php file)

    //number=900
    //&value=900 is the parameter
    NSURL*url=[NSURL URLWithString:@"http://localhost/tutorials/index.php?f=getLabel&value=900"];

    //In the php file it does number*number and returns the results

    //URL request
    NSURLRequest*request=[NSURLRequest requestWithURL:url];

    //Set the connection
    connection = [NSURLConnection connectionWithRequest:request delegate:self];

    if (connection) {
        webData=[[NSMutableData alloc]init];
    }

    //*****Results of this request are processed by step 5

}//Step 6, in case data connection fails
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    NSLog(@"fail");

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

# php - 使用令牌防止双重表单提交

> ID：15626868
> 
> 赞同：6
> 
> 时间：2013-03-25T23:43:19.000
> 
> 标签：php

我试图通过添加令牌隐藏字段来防止用户重复提交论坛。

所以这是我到目前为止所做的（在加载论坛之前，我有这段代码来创建一个以当前时间为值的令牌。

```
$token = time();
setcookie('formToken', $token, time() + 3600); 
```

在我的论坛中，我有一个像这样的隐藏输入

```
<form method="post" action="'.$PHP_SELF.'?action=update">
<input type="hidden" name="token" value="'.$token.'" />
<input type="submit" value="go" />
</form> 
```

现在在我的页面顶部 $action == "update" 我有这个代码

```
if(isset($_POST)  &&  ($_POST['token'] != $_COOKIE['formToken'])){
    $error_list .= '<li>You can not submit this forum twise.</li>';
} 
```

如果我按 F5 刷新页面，它会再次提交表单而不显示我的错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T23:58:31.037

我建议您使用[**PRG 模式**](http://en.wikipedia.org/wiki/Post/Redirect/Get)（Post/Redirect/Get），该模式也由`phpbb`.

> Post/Redirect/Get (PRG) 是一种 Web 开发设计模式，可以防止一些重复的表单提交，为用户代理（用户）创建更直观的界面。PRG 以可预测的方式实现书签和刷新按钮，不会创建重复的表单提交。

![http://upload.wikimedia.org/wikipedia/commons/3/3c/PostRedirectGet_DoubleSubmitSolution.png](../Images/3d675ce0f0cd575cef78dac454ce20b6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T23:59:06.343

为什么不直接在表单提交成功时设置一个会话？

所以`$_SESSION['submitted'] = 1`;

然后你可以检查它。

或者做

```
if(isset($_POST['submit'])  &&  ($_POST['token'] != $_COOKIE['formToken'])){
    $error_list .= '<li>You can not submit this forum twice.</li>';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-30T10:14:02.197

gd1 answer 不会阻止在复杂的 javascript 表单代码上通过各种 jQuery 绑定双击提交或意外双重提交。

双击可能比禁用提交按钮或使用 javascript 隐藏它更快，所以这也不是一个完整的答案。

会话令牌也不起作用，因为会话尚未写入，因此对于第二个进程可用或更新，这可能只是几毫秒后共享相同的会话 ID。仅在完成第一个过程时才存储会话。

Cookie 技术可能是一个答案，只要两个进程都能够以阻塞方式通过 cookie 进行通信，这可能会导致与上述会话共享相同的问题。

最好的解决方案是使用服务器的共享内存访问来检查其他进程是否已经使用预生成的数据哈希处理了数据（订单、付款等），或者使用数据库表阻塞选择和插入来检查预生成的哈希已经提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-21T08:54:34.190

我使用这种方式来防止双重提交，到目前为止它在所有场合都有效。如果您需要其他问题，请告诉我，因为本教程假设您具有数据库和 PHP 的中级知识。

第 1 步：在数据库中添加一个字段，如下所示：将 YOUR-TABLE 替换为数据库表的名称。

```
 ALTER TABLE `YOUR-TABLE` ADD `token` VARCHAR(35) NULL DEFAULT NULL AFTER    `creationtoken`, ADD UNIQUE (`token`) ; 
```

步骤 2 在您的表单页面上，您将其添加到第一行：它将创建一个唯一的令牌，该令牌将与您的查询一起插入到您的数据库表中，以便以后可以检查它以确保没有其他类似的提交到您的数据库，这意味着没有双重表单提交。

```
 <?php 
    session_start(); 
    date_default_timezone_set('America/Chicago');
    $_SESSION['token'] = md5(session_id() . time());
    ?> 
```

然后在您的提交按钮之前添加：

```
 // add this before the submit button
    // this will post the unique token to the processing page.

    <div style="width:100%; color:#C00; font-weight:normal;">Session Token: <?php echo strtolower($_SESSION['token']) ?></div>     

    <input type="hidden" name="token" id="token" value="<?php echo  $_SESSION['token']?>" />
    // add this before the submit button

    <input type="submit" id="submit" name="submit" class="button" value="Submit" /> 
```

第 3 步：现在在您的 process.php 页面上

```
 //this is where all of your form processing takes place.

    // this is where you call the database
    // if you need the database file let me know...
    include("../common/databaseclass.php");
    $db= new database();

    //here the token is posted then the database table is checked and 
    //if the form has already been added it will return a 1 and will 
    //cause the query to die and echo the error message. 

    $token = $_POST['token'];
    $query = "SELECT token FROM YOURTABLE WHERE token = '$token' LIMIT 1";
    $result = $db->query($query);
    $num = mysql_num_rows($result);

    if ($num>0) {die('your form has already been submitted, thank you');}

    else {

    $host = "localhost";
    $user = "user";
    $pass = "password";
    $db_name = "database";

    mysql_connect($host,$user,$pass);
    @mysql_select_db($db_name) or die( "Unable to select database");

    // table query      
    $sql1="INSERT INTO YOURTABLE (
    `token`,
    `user`,
    `email`,
    `password`,
    `newaccount`,
    `zipcode`,
    `city`,
    `state`,
    `country`,
    `telephone`,
    `creationip`,
    `createdaccount`
     ) 
     VALUES (
     '$token',
     '$username',
     '$email',
     '$password',
     '$newaccount',
     '$zipcode',
     '$city',
     '$state',
     '$country',
     '$phone',
     '$ipadress',
     '$createdaccount'

       )";

    $db->query($sql1);
    header("location:" http://home.php ");      

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T00:07:08.950

**建议1）**

成功提交时删除 cookie (removeTokens)

```
 function removeToken()
{
    //set formToken cookie val to "" (or any default xxxx) and the past expiry date for it 
    setcookie("formToken", "", time()-3600);
    //try to unset - this is not needed ,we may try it
    unset($_COOKIE['formToken']);
} 
```

即只是在您的页面上 if(isset($_POST)) removeToken();

**建议2）**

按照 Tom Wright 在此处的建议执行重定向，[当按 f5 时避免在 php 中重新提交表单](https://stackoverflow.com/questions/722547/avoiding-form-resubmit-in-php-when-pressing-f5)

```
 header('Location: formsubmitSucess.php'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-04T13:56:54.237

我遇到了同样的问题，这里有一个简单的解决方法：

```
if(!empty($_SESSION['form_token']) && time() - $_SESSION['form_token'] < 3){
    $data['message'] = 'try again later';
    return;
}
$_SESSION['form_token'] = time(); 
```

在我的情况下，PRG 模式没有任何效果，因为表单同时提交了多次并且代码没有被执行并且没有保存数据来比较它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-14T11:57:47.067

对于同样的问题，我编写了一个代码来将它用于我自己的东西。它具有 PRG 模式，可以灵活地在同一页面上使用它或与外部 PHP 文件一起使用以进行重定向 - 易于使用且安全，也许这可能会对您有所帮助。

```
class unPOSTer {

        private 
            $post = "KEEP_POST";

        public function __construct(string $name = null) {
            if (version_compare(PHP_VERSION, "5.4.0") >= 0) {
                if (session_status() == PHP_SESSION_NONE) {
                    session_start();
                }
            } else {
                if (!$_SESSION) {
                    session_start();
                }
            }
            $this->post = $name;
        }

        public function unPost() {
            if (session_status() !== PHP_SESSION_ACTIVE) {
                session_start();
            } elseif (strcasecmp($_SERVER["REQUEST_METHOD"],"POST") === 0) {
                $_SESSION[$this->post] = $_POST;
                header("Location: " . $_SERVER["PHP_SELF"] . "?" . $_SERVER["QUERY_STRING"]);
                exit;
            } elseif (isset($_SESSION[$this->post])) {
                $_POST = $_SESSION[$this->post];
            }
        }

        public function retrieve($data) {
            if (isset($_SESSION[$this->post])) {
                $posts = @$_SESSION[$this->post][$data];
                if (isset($posts)) {
                    return $posts;
                } else {
                    return null;
                }
            } 
        }

        public function reset() {
            if (isset($_SESSION[$this->post])) {
                unset($_SESSION[$this->post]);
            }
        }
    } 
```

然后像这样使用它：

```
<?php
    require_once "unPOSTer.class.php";
    $unpost = new unPOSTer();
    $unpost->unPost();
?>
<form action='' method=POST>
    <input type=text name=fname value="<?php echo $unpost->retrieve("fname"); ?>" placeholder="First Name">
    <input type=text name=lname value="<?php echo $unpost->retrieve("lname"); ?>" placeholder="Last Name">
    <input type=submit name=send value=Send>
</form>
<?php echo $unpost->reset(); ?> 
```

不需要太多配置，如果您愿意，可以在您发送表单数据的每个页面上进行配置。该`retrieve()`方法会吐出您发送的数据，以防您可能返回并修复某些内容。随意在我的[GitHub](https://github.com/thielicious/unPOSTer)页面上 fork/pull 它，我在那里添加了 2 个演示。

# mysql - Windows 与 Linux 上的 MySQL“每组获取 n 行”？

> ID：15626871
> 
> 赞同：0
> 
> 时间：2013-03-25T23:43:49.027
> 
> 标签：mysql, sql, database

我一直在努力解决这个问题，但我似乎无法弄清楚问题所在。如果我知道问题出在哪里，我会寻找解决方案，但我不明白为什么会这样。

所以无论如何，我有这张桌子：

```
CREATE TABLE `comments` (   
  `comment_id` bigint(20) NOT NULL AUTO_INCREMENT,   
  `comment_what_id` bigint(20) NOT NULL,  
  `comment_user_id` bigint(20) NOT NULL,  
  `comment_owner_id` bigint(20) NOT NULL,  
  `comment_extra` int(11) NOT NULL,  
  `comment_type` tinyint(3) NOT NULL,  
  `comment_text` text NOT NULL,  
  `comment_date` int(12) NOT NULL,  
  PRIMARY KEY (`comment_id`),  
  KEY `comments_user_id` (`comment_user_id`),  
  KEY `comment_type` (`comment_type`),  
  KEY `comment_what_id` (`comment_what_id`)  
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

这是我的行：

```
INSERT INTO `comments` (`comment_id`, `comment_what_id`, `comment_user_id`, `comment_owner_id`, `comment_extra`, `comment_type`, `comment_text`, `comment_date`) VALUES  
(109, 21, 1, 1, 10, 1, 'first', 1363915838),  
(110, 21, 1, 1, 10, 1, 'second\n', 1363915847),  
(114, 21, 1, 1, 10, 1, 'third\n', 1363915891),  
(115, 21, 1, 1, 10, 1, 'fourth\n', 1363915896),  
(117, 21, 1, 1, 10, 1, 'last', 1363915911),  
(154, 53, 10, 1, 10, 1, 'Hello! :D\n', 1363968585) 
```

现在，当我尝试获取每个（即和）的第一`n`行时， MySQL 有时会断开连接，有时我会在所有返回的行中获取值，并且每一行中的列都是完全空的。 这似乎只发生在 Linux 操作系统中，当我尝试获取第 53 和 21 行时。顺便说一句，如果这很重要，我正在使用 Linux Mint。当我尝试获取其他值时，它似乎工作得很好。我不知道这两个值是怎么回事。`comment_what_id``53``21``0``comment_text`

所以，这是我的查询：

```
set @num := 0, @type := '';  
SELECT * FROM (  
    SELECT  
        comment_id,   
        comment_what_id,  
        comment_owner_id,  
        comment_extra,  
        comment_text,   
        comment_date,  
        @num := if(@type = `comment_what_id`, @num + 1, 1) as `row_number`,  
        @type := `comment_what_id` as dummy  
    FROM `comments`  
    WHERE `comments`.comment_what_id IN (53,21) AND comment_type = 1  
    ORDER BY comment_what_id, comment_date DESC  
) `all` WHERE row_number <= 4; 
```

如果我遗漏了什么，请告诉我，因为它让我发疯。

# nsstring - 我应该在 dealloc 中释放简单的 NSString

> ID：15626873
> 
> 赞同：0
> 
> 时间：2013-03-25T23:44:13.870
> 
> 标签：nsstring, release, dealloc

我有.h：

```
@property (nonatomic,retain) NSString *myString; 
```

以 .m 为单位：

```
@synthesize myString;
myString =@"Test"; 
```

我必须在 dealloc 中释放它吗？
因为有时我的应用会因为 [myString release] 而崩溃，不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:22:29.260

只要属性定义了“retain”属性，就需要在dealloc中释放。

现代 Objective C 中的 ARC（自动引用计数）具有内置的垃圾收集，因此不再需要释放和保留。

# jquery - 根据位置更改链接域扩展

> ID：15626878
> 
> 赞同：0
> 
> 时间：2013-03-25T23:44:45.113
> 
> 标签：jquery

我设法让访问该网站的人所在的国家/地区：

```
<script type='text/javascript'>
$(window).load(function(){
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
  $("#hello").html(
        'Country: ' + data.address.country);
});
});
</script>

<p id="hello"></p> 
```

现在我正在努力的是我有一个基本链接

```
<a href="http://www.google.com" id="global">Google</a> 
```

我想根据位置更改网址的扩展名，例如

```
if data.address.country = Australia change "www.google.com" to "www.google.com.au"
or if data.address.country = New Zealand change "www.google.com" to "www.google.co.nz"
or if data.address.country = Any thing else leave it as is "www.google.com" 
```

我知道这不是真正的代码，但希望它足够清楚，您知道我来自哪里，可能使代码通用，以便我将来可以添加其他位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:51:44.767

你可以做一个映射：

```
var country_map = {
    'Australia': 'google.com.au',
    'New Zealand': 'google.co.nz'
    'Russia': 'google.ru'
};

var country = data.address.country;

if (country in country_map) {
    link.href = link.href.replace('google.com', country_map[country];
} 
```

Google.com[会重定向到用户的相应国家](https://support.google.com/websearch/bin/answer.py?hl=en&answer=873)/地区，因此我实际上不会一开始就触摸这些链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:51:53.283

尝试动态更改 href 属性

```
 $.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
      $("#hello").html(
         'Country: ' + data.address.country);
      });
      $('#global').attr('href', map[data.address.country])
    }); 
```

然后在你的代码的某个地方写一张地图，上面写着

```
 var map = {
          'Australia': 'google.au',
          'India' : 'google.in'            

         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:52:06.623

首先，您需要将每个国家/地区映射到各自的 URL。您应该使用 AJAX 调用返回的确切值作为对象的键。

```
var country = data.address.country;
var urls = {
  'Australia':'www.google.com.au',
  'New Zealand':'www.google.co.nz',
  ...
} 
```

现在为不匹配的国家/地区设置默认值，如果有匹配的国家/地区，将 Google URL 替换为匹配的值。

```
var googleUrl = 'www.google.com';
if (urls[country]){
  googleUrl = urls[country];
} 
```

最后，一旦您选择了合适的 URL，您就可以`href`使用 jQuery 的`prop()`函数来更改属性。

```
$("#global").prop('href',googleUrl); 
```

### [一个简单的例子](http://jsfiddle.net/Rjq5C/)

# html - 当用户离开我的网站时，在移动设备上实现一个持久栏？

> ID：15626886
> 
> 赞同：1
> 
> 时间：2013-03-25T23:45:35.970
> 
> 标签：html, jquery-mobile, iframe

当用户转到非现场页面时，我们需要在屏幕顶部保留一个导航栏。这通常可以通过将新页面放入 iframe 中轻松实现。

在 iPhone 和 Android 等移动平台上实现此功能时会出现问题。

有没有办法告诉 iframe 像普通网页一样缩放其内容以适应页面的宽度？

# jquery - 将复杂的 JSON 对象发送到 MVC

> ID：15626892
> 
> 赞同：0
> 
> 时间：2013-03-25T23:45:41.487
> 
> 标签：jquery, asp.net-mvc, json

实际上，我有一个指纹细节对象，在我的应用程序的客户端生成。我使用 java 脚本获得这个对象，它是一个“复杂对象”

我尝试使用 ajax 语法将其发送到服务器

```
$.ajax({
            //   url: baseUri+'HomeController/saveexpense',
            url: '@Url.Action("GetFingerPrint", "Home")',
            type: 'POST',
           // dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({ obj: fmdTest }),
            success: function(result) {

            }
        }); 
```

这在 obj:SimpleObject 时对我很有用，但是对于我的新复杂对象，调试显示该对象仅包含 {} （即空）

我认为问题是因为我的对象现在是一个复杂的对象而不是一个简单的对象

还

```
data: JSON.stringify(fmdTest), 
```

没有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:00:25.477

最后，我已经解决了这个问题，根据我所阅读的内容，只要它具有反序列化过程中所需的无参数构造函数，JSON 对任何对象进行字符串化都没有任何问题）但是，幸运的是我发现制造商提供了一些方法来序列化我的 fmd。

# r - 将函数应用于对名称进行操作的数据框中的每一列

> ID：15626893
> 
> 赞同：2
> 
> 时间：2013-03-25T23:45:43.750
> 
> 标签：r, plyr, apply

我正在尝试编写一些将采用数据框并绘制每个数字列的东西，其中包含用于非正态分布的简单图和用于正态分布的控制图：

```
library(plyr)
library(qcc)
library(ggplot2)

#generate data frame
data <- data.frame(seq_len(10),LETTERS[seq_len(10)],rnorm(10,5,3),rep(1,10),rep(2,10),rnorm(10,3,1),runif(10))

##checks heterogeneity
has_range <- function(data) { if(all( abs(data - mean(data)) == 0)) FALSE else TRUE}

##test for normality
normtest <- function(data) {if(has_range(data) == FALSE) FALSE else {
  if(shapiro.test(data)$p.value < 0.05) FALSE else TRUE}}

##Control charts for Normal data, simple plots otherwise
drawplot<-function(data, ref=NULL) {
  Sys.sleep(.1)
  print(names(data))
  if(normtest(data) == FALSE) {
    plot(x=ref, y=data, ylab=names(data))
  } else {
    qcc(data,type="xbar.one", labels=ref, ylab=names(data))  
  }
}

## Apply drawplot to all numeric columns in data frame
colwise(drawplot, is.numeric, ref=data[[2]])(data) 
```

问题是每个应用族函数似乎都删除了列名，我不能使用列名来标记图：

```
print(names(data)) 
```

给出 NULL 结果。

还有一个看似无关的错误正在突然出现：

```
Error: length(rows) == 1 is not TRUE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:04:43.787

您需要创建一个使用名称的函数，否则将无法在函数中访问这些名称。

你不能传递`x = NULL`给`plot`，所以我重写了你的一些函数（`qcc`也在用原子向量大惊小怪`x`）

就像是

```
drawplot<-function(n, data, ref=NULL) {
  Sys.sleep(.1)
  print(n)

  if(normtest(data[[n]]) == FALSE) {
    if(is.null(ref)){ref <- seq_along(data[[n]])}
    plot(x=ref, y=data[[n]], ylab=n)
  } else {
    qcc(data[,n, drop=FALSE], type="xbar.one", labels=ref,ylab = n)  
  }
}

lapply(names(Filter(is.numeric,dd)), drawplot, data = dd) 
```

请注意，此函数也适用于位置索引（但标签不会那么漂亮）

# actionscript-3 - 日历动作脚本 3

> ID：15626896
> 
> 赞同：1
> 
> 时间：2013-03-25T23:46:06.973
> 
> 标签：actionscript-3, flash, adobe, flash-cs5

我需要在 AS3 中制作一个定期看起来像这样的日历：

![常规日历](../Images/71430b3f9093dd40bddbb1d72ca7add9.png)

当点击日期时：

![点击日期](../Images/8dd6a896016c7d237e0fbb53d255282a.png)

我想我已经掌握了基础知识，但我不知道从哪里开始，我无法弄清楚我的代码有什么问题以使日子正常工作。

主要代码：

```
package code {

import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;

public class Main extends MovieClip {

    private var days:Array = new Array();
    public var selectedDay:Day = null;

    public function Main() {
        // constructor code
        var across: int = 7;

        for( var i:int = 0; i < 31; i++)
        {
            var row:int = Math.floor( i / across );
            var col:int = i % across;

            var d:Day = new Day();
            addChild(d);
            d.x = col * (d.width);
            d.y = row * (d.height);
            days.push(d);
            d.addEventListener(MouseEvent.CLICK, onClick);
        }

    }

    public function onClick(e:MouseEvent):void{
        if (selectedDay == null){
            trace("meow!");
            days[1].gotoAndStop(2);
        }
        else if (selectedDay != null){

        }
}
}

} 
```

和日期代码：

```
package code {

import flash.display.MovieClip;
import flash.text.TextField;

public class Day extends MovieClip {

    public var weekday_txt:TextField;
    public var date_txt:TextField;

    public function Day() {
        // constructor code
        for (var num:int = 0; num < 7; num++){

            var weekDays:Array = new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");
            weekday_txt.text = weekDays[num];
            //trace(weekDays[num]);
            date_txt.text = ""+42;
        }
    }
}

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:17:33.403

我重写了你的课程，因为它比试图解释逻辑错误更容易：

```
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;

public class Main extends MovieClip{

    private var days:Array = new Array();
    private var selectedDay:Day;

    public function Main() {
        stop();

        days = new Array();
        var weekDayTitles:Array = new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");

        var across:int = 7;
        for (var i:int=0; i<31; i++){
            var row:int=Math.floor(i/across);
            var col:int = i%7;

            var d:Day = new Day();
            addChild(d);
             d.x = col * (d.width);
            d.y = row * (d.height);
            d.setWeekDay(weekDayTitles[col]);
            d.setDate(""+(i+1));
            days.push(d);
            d.addEventListener(MouseEvent.CLICK, onClick);
        }
    }

    public function onClick(e:MouseEvent):void{
        if (selectedDay != null){
            selectedDay.setAsUnSelected();
        }
        selectedDay = Day(e.target);
        selectedDay.setAsSelected();
    }

}// Class 
```

你的 Day 课程应该是这样的：

```
// make sure this class is linked to a movieclip 
// in your library that has two frames 
// frame 1 = "unselected"
// frame 2 = "selected";

// make sure to have 2 textfields in the linked symbol, one named : "weekdayTxt" and the other "dateTxt"

public class Day extends MovieClip{

    public var weekday_txt:TextField;
    public var date_txt:TextField;

    public function Day() {
        gotoAndStop(1);
        weekday_txt = this.weekdayTxt;
        date_txt = this.dateTxt;
    }

    public function setWeekDay(_day:String):void{
        weekday_txt.text = _day;
    }

    public function setDate(_date:String):void{
        day_txt.text = _date;
    }

    public function setAsSelected():void{
        this.gotoAndStop(2);
    }

    public function setAsUnSelected():void{
        this.gotoAndStop(1);
    }

}// Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:34:11.967

好吧，我认为您确实掌握了它的要点，但我注意到您的 onClick 方法始终以数组的第二天为目标并将其设置为转到第 2 帧，因为它看起来不像您曾经初始化过“selectedDay”。 ..：

```
public function onClick(e:MouseEvent):void{
    if (selectedDay == null){
        trace("meow!");
        days[1].gotoAndStop(2);
    }
    else if (selectedDay != null){

    }
} 
```

将功能更改为：

```
public function onClick(e:MouseEvent):void{
    if (selectedDay != null){
       selectedDay.gotoAndStop(1);  //assuming frame 1 is an "unselected" state 
    }  // you don't really need an else, if you are not going to do anything in it
    selectedDay = e.target;
    selectedDay.gotoAndStop(2);
}

public function getSelectedDayInfo():Object{
    var _object = new Object();
    _object.weekday = "nothing selected";
    _object.date = "nothing selected";
    if(selectedDay != null){
        _object.weekday = selectedDay.weekday_txt.text;
        _object.date = selectedDay.date_txt.text;
    }
    return (_object);
} 
```

希望有帮助...

# c# - 方法变量错误。不明原因

> ID：15626906
> 
> 赞同：-2
> 
> 时间：2013-03-25T23:46:40.247
> 
> 标签：c#, sql-server, variables, methods, scope

以下获取数据库名称和密码的方法都可以。

```
public static string getdbname(out string dbname)
{
    Console.WriteLine("Enter the database name.\n");
    string dbasename = Console.ReadLine();
    Console.WriteLine();
    dbname = dbasename;
    return dbname; 
}

public static string getdbpass(out string dbpass)
{
    Console.WriteLine("Enter the database password.\n");
    string dbasepass = Console.ReadLine();
    Console.WriteLine();
    dbpass = dbasepass;
    return dbpass;
} 
```

访问变量时，我`invalid expression term string`从 getdbpass() 和getdbname 收到一条错误`expected }`消息。

```
/**
 * Create string for an SQL Connection
 **/
public static string connTest()
{
    // Call in the out variables
    string name, pass;
    getdbname(out dbname);
    getdbpass(out dbpass);
    ...
    ... 
```

我希望这可以帮助您找出问题所在，因为我已经尝试了几件事，从重命名变量一直到重新定位变量。还没有工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:50:47.543

```
string dbname;
string dbpass;

getdbname(out dbname);
getdbpass(out dbpass); 
```

您的方法都使用相同的值返回*和*传回。`out`您可能需要重新考虑这一点。

我宁愿只声明返回值：

```
public static string getdbname() { ... } 
```

并调用：

```
string dbname = getdbname(); 
```

尽量避免使用`out`从方法返回值。

# ios - 从 Facebook 请求用户信息和好友

> ID：15626909
> 
> 赞同：0
> 
> 时间：2013-03-25T23:46:49.867
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我希望结合对 Facebook Graph API 的调用。我想一口气收集朋友和个人资料信息。

我还在这里提出了一个单独的问题问题[——Facebook SDK 收集用户信息和朋友](https://stackoverflow.com/questions/15623536/facebook-sdk-collecting-user-information-and-friends)

为这两个部分创建 Facebook Graph 请求的正确/最简单的方法是什么？

用户使用此权限数组登录：

```
NSArray *permissionsArray = @[ @"user_about_me", @"user_birthday", @"user_location", @"email"]; 
```

然后我试图创建一个图形连接来获取信息'例如'用户名、电子邮件、朋友列表。理想情况下，我想在一个 FBRequest 中执行此操作，而不是单独的 FBRequestConnection(s)。我怎样才能做到这一点？我查看了 Facebook SDK 信息，但看不到如何执行此操作，我如何才能找到有关此的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:03:52.787

您可以在一次 API 调用中获取所有这些信息：

```
/me?fields=id,username,email,friends 
```

我不确定 iOS 的语法。

如果您想要更多关于您朋友的数据，您可以通过[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)指定字段，如下所示：

```
/me?fields=id,username,email,friends.fields(id,name,username,birthday) 
```

# java - Spring Security REST 授权

> ID：15626917
> 
> 赞同：0
> 
> 时间：2013-03-25T23:47:48.230
> 
> 标签：java, jakarta-ee, spring-security, restful-authentication

我厌倦了寻找如何通过 Spring Security REST json 登录。我为 Android/iOS 编写后端。这是我的**security.xml：**

```
<http use-expressions="true" create-session="stateless" entry-point-ref="restAuthenticationEntryPoint">        
        <intercept-url pattern="/auth/**" access="permitAll" />
        <intercept-url pattern="/**" access="isAuthenticated()" />      
        <custom-filter ref="myFilter" position="FORM_LOGIN_FILTER"/>  
        <logout />               
    </http> 

    <beans:bean id="myFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
          <beans:property name="authenticationManager" ref="authenticationManager"/>
          <beans:property name="authenticationSuccessHandler" ref="mySuccessHandler"/>
    </beans:bean>
    <beans:bean id="mySuccessHandler" class="com.teamodc.jee.webmail.security.MySavedRequestAwareAuthenticationSuccessHandler"/>

    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="userDetailsService" />   
        <authentication-provider ref="authenticationProvider" />
    </authentication-manager> 

    <beans:bean id="authenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <beans:property name="userDetailsService" ref="userDetailsService"/>
    </beans:bean> 
```

这是我的**身份验证控制器：**

```
@Controller
@RequestMapping(value = "/auth")
public class AuthorizationController {

    @Autowired
    @Qualifier(value = "authenticationManager")
    AuthenticationManager authenticationManager;

    private SimpleGrantedAuthority anonymousRole = new SimpleGrantedAuthority("ROLE_ANONYMOUS");

    @RequestMapping(value = "/login", method = RequestMethod.POST, headers = {"Accept=application/json"})
    @ResponseBody
    public Map<String, String> login(@RequestParam("login") String username, @RequestParam("password") String password) {
        Map<String, String> response = new HashMap<String, String>();

            UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password);

            try {
                Authentication auth = authenticationManager.authenticate(token);
                SecurityContextHolder.getContext().setAuthentication(auth);

                response.put("status", "true");             
                return response;
            } catch (BadCredentialsException ex) {
                System.out.println("Login 3");
                response.put("status", "false");
                response.put("error", "Bad credentials");
                return response;
            }
        } 
```

最后，我的**web.xml：**

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/appServlet/servlet-context.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/dispatcher.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>charsetFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>charsetFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>   

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我已经从 Firefox rest 客户端对其进行了测试，但是当我将 URL 设置为 bla/user/1 时，我花了 401（这是正确的），但是当 URL 是 bla/auth/login 时，我花了 404，并返回 WARN [org .springframework.web.servlet.PageNotFound] - 但是当我在@Controller 中标记路径时会怎样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:46:56.407

您的`login()`方法似乎映射到`/auth/auth/login`. 方法级别`@RequestMapping`注释上给出的路径是相对于类级别注释的路径。

尝试将方法级别注释更改为`@RequestMapping(value = "/login"...`.

**编辑：**
如果这只是一个错字，并且处理程序映射仍然存在问题，请确保您在 spring 上下文中有适当的说明：

1.  `<context:component-scan base-package="package.for.controllers"/>`为了让你的控制器实例化为spring bean。
2.  `<mvc:annotation-driven/>`为了支持带`@RequestMapping`注释的控制器方法。有关更多信息，请参阅[参考文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-enable)。

此外，请确保它们实际上在相同的上下文中（通常在 servlet 上下文中）。

# javascript - 从 XML 文件解析

> ID：15626919
> 
> 赞同：0
> 
> 时间：2013-03-25T23:47:57.553
> 
> 标签：javascript, jquery, xml

如何从输出以下内容的 php 文件中解析 jQuery 中的 lat 和 long 值：

```
<gps>
    <loc lat="42.6438" lon="21.9275" alt="29.7" spd="0" dir="342" cep="203.1" upd="2013-03-09 02:10:31"/>
</gps> 
```

更新！这是我在 head.php 中的完整代码

```
 $.ajax({
            type: "GET",
            url: "gps-tracking/track.xml",
            dataType:'data',
            complete: function(data){
                    var loc = $("loc");
                    var lat = loc.attr("lat");
                    var lon = loc.attr("lon");
                    console.log(data);
                    console.log(lat);
            }
        }); 
```

控制台.log（数据）；输出这个：

```
Object { readyState= 4 , responseXML=document, responseText= "<gps><loc lat="40.6438"...03-09 02:10:31"/></gps>" , more...} 
```

控制台.log（纬度）；输出：未定义！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:34:32.143

实际上你的代码：

```
complete: function(data){
                    var loc = $("loc");
                    var lat = loc.attr("lat");
                    var lon = loc.attr("lon");
                    alert (lat);
            } 
```

尝试将 Dom 元素“loc”存储到 var loc 中。首先，您应该尝试使用完整函数的数据，因为那里存储了您的 php 值。

然后尝试创建一个 DOM 元素，如`$(data).children('loc').attr('lat');`

小演示小提琴：http: [//jsfiddle.net/P6JVw/](http://jsfiddle.net/P6JVw/)

这里是你应该使用的代码：

```
complete: function(data){
                        var xmlObj = $(data.responseText).children('loc');
                        var loc = xmlObj.attr('loc');
                        var lat = xmlObj.attr('lat');
                        var lon = xmlObj.attr('lon');;
                        alert (lat);
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:49:55.000

很简单。打电话`attr()`

```
var loc = $("loc");
var lat = loc.attr("lat");
var lon = loc.attr("lon"); 
```

# android - 如何在不共享源代码的情况下创建和使用 Android 库？

> ID：15626930
> 
> 赞同：1
> 
> 时间：2013-03-25T23:48:33.573
> 
> 标签：android

**我做了什么**

我创建了一个库项目，其中包含几个带有自定义属性的自定义视图。该库还包含一个测试布局来测试视图。

我还阅读了：[https ://code.google.com/p/android/issues/detail?id=9656#c81](https://code.google.com/p/android/issues/detail?id=9656#c81)

因此，在库的测试布局中，我确实使用了`http://schemas.android.com/apk/res-auto`命名空间。

**我正在尝试做的事情**

然后我开始了一个新项目来使用该库，并且在共享源代码时将库包含到该项目中非常容易；在测试应用程序的主要活动中，我可以轻松地使用`setContentView(R.layout.libactivity)`

但是，在关闭库项目并尝试使用库的 jar 之后证明是困难的！

我在库的 /bin 文件夹中找到了库 jar - 但它只包含类而没有资源。

然后我导出了一个库 jar - 其中包含资源文件以及 .class 文件。但是这是如何使用的？

**具体问题**

如何夸大`libactivity`我包含在库中的测试活动？

我知道在 stackoverflow 上有类似的问题 - 但它们似乎已经过时且相互冲突，因为谷歌可以在库中包含资源文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:49:49.843

以下是我如何在不共享源代码的情况下创建库项目。它需要两个项目：基础库和发布库。

**基本库**- 这是您放置所有源代码的地方，即您的所有活动、自定义视图等。如果您愿意，您可以将资源文件放入此库中，但这不是必需的。

**发布库**- 包含来自基本库的 bin/ 文件夹的 jar 以及您想要包含的任何资源文件。如果您在基础库项目中包含了任何资源文件，则需要将它们复制到该项目中。

当你想使用你的代码时，你添加发布库，就像添加任何其他共享库一样。您的源代码将可用，但隐藏，因为它位于 jar 文件中。唯一需要注意的是，您的资源文件将可见，因为它们位于共享库项目中。不幸的是，我无法找到一种方法来保持这些不可见。

因此，为了具体说明您的情况，您将自定义视图放置在基础库项目中。测试布局需要进入发布库项目。

您的第三个项目（一个用于测试库的项目）只需要对发布库的引用，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:56:22.393

哈...这是一个很好的问题，如果您要**使用**xmls 导出您的库项目，那没关系...

然后将导出的库 Jar 添加到启动项目的 libs 文件夹中，您会在 R 文件中找到这些 XML。

让我知道它是否有效...

# c - 编译器看不到的常量

> ID：15626934
> 
> 赞同：2
> 
> 时间：2013-03-25T23:48:55.013
> 
> 标签：c, makefile, configure, automake

我对下面的代码有疑问。它给我带来了错误，什么也没告诉我。

我有一个文件 memory.h 我有：

```
#ifndef BLOCK_SIZE
#define BLOCK_SIZE 8
#endif 
```

我还有带有片段的 configuration.ac 文件，如下所示：

```
AC_ARG_WITH([block-size],
    [AS_HELP_STRING([--with-block-size],["Define blocksize to initialize with. Default value: 8]")],
        [bsize="$withval"],
        [])

if test ! -z "${bsize}"; then
        if test  "${bsize}" > 0 ; then
                AC_DEFINE_UNQUOTED([BLOCK_SIZE], [$b_size], [Defining block size in bytes])
        else
                AC_DEFINE_UNQUOTED([BLOCK_SIZE], [8], [Default block size : 8B])
        fi
fi 
```

后来我用命令`./configure --with-block-size=16 --with-allocator=STR_MIN`完成了makefile的制作。但是现在当我使用`make`命令时，我得到了很多错误：

```
memory.c: In function 'initialize':
memory.c:15:59: error: expected expression before ')' token
memory.c: In function 'allocate':
memory.c:26:41: error: expected expression before ')' token
memory.c:53:56: error: expected expression before ';' token
memory.c: In function 'defragment':
memory.c:140:73: error: expected expression before ')' token
memory.c: In function 'diagnoze':
memory.c:174:183: error: expected expression before ',' token 
```

所有有错误的行如下所示：

```
mem -> unused_list -> address = malloc(count * BLOCK_SIZE);
new -> address = space -> address + size * BLOCK_SIZE; 
```

看起来编译器根本看不到 BLOCK_SIZE。现在只有一个问题为什么。了解我，我可能在这段代码中吃了后一两个。但我找不到它，也不知道还有什么会导致这个问题。我之前使用的所有其他 automake 命令（包括 ./con..）都没有抛出任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:24:06.520

和我想的一样愚蠢的错误。我只需要换行：

```
AC_DEFINE_UNQUOTED([BLOCK_SIZE], [$bsize], [Defining block size in bytes]) 
```

正如有人建议的那样，没有遗漏的引号，而只是简单的_很多。无论如何感谢您的帮助。

# .net - 引用类中的指向成员函数

> ID：15626937
> 
> 赞同：1
> 
> 时间：2013-03-25T23:49:07.143
> 
> 标签：.net, function, pointers, c++-cli, member

我正在尝试使用自定义 .NET ref 类来控制按钮系统。它由添加到父窗体的类内的一个 PictureBox 组成。当它检测到点击时，它需要调用构造函数中指定的函数，该函数是父类内部的方法。

例如：

```
//in the custom class file
public ref class CButton {
    private: void (*callingproc)(void);
    public:
    CButton(void (*cproc)(void)) {
        callingproc = cproc;
    }
    button_dowork() {
        //do our code to detect if the click was in the right place and call our proc
        callingproc();
    }
};
//in the form.h
void cp(void) {
    //do our form work
}
void Form_CreateCButton() {
    CButton^ t = gcnew CButtom(cp);
} 
```

当我按照说明进行操作时，上面会导致“使用 &ns::form::cp 创建指向成员的指针”的错误，然后是“指向成员的指针对托管类无效”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:03:18.960

看起来您的类正在存储指向（全局）函数的指针。

也许您的 void cp() 函数在一个类中（“表单”？）。在这种情况下，它实际上是一个成员函数。全局函数不同于成员函数，因此类不能存储指针。

也许您应该考虑委托（特别是如果您使用的是 .Net）。请参阅：http: [//msdn.microsoft.com/en-us/library/ms379617 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379617(v=vs.80).aspx)

# android - 安全功能：EditTextPreference 不大于 100？

> ID：15626938
> 
> 赞同：1
> 
> 时间：2013-03-25T23:49:12.473
> 
> 标签：android, edittextpreference

Android中是否可以限制用户可以输入的最大和最小数字是`EditTextPreference`多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:01:11.857

您可以使用[OnPreferenceChangeListener](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)来捕获用户输入并进行验证，可能会通过返回 true/false 来阻止将其写入首选项。

# tcl - 如何检索在执行跟踪命令前缀期间发生的错误

> ID：15626939
> 
> 赞同：1
> 
> 时间：2013-03-25T23:49:13.223
> 
> 标签：tcl

跟踪文档指出“如果在执行 commandPrefix 时发生错误，那么整个命令名称将返回相同的错误。” 但是，当我执行下面的代码时，我没有看到错误，它有一个错误的命令前缀。如何获取此错误信息？

```
proc a args { puts hello }
proc b args { bad stuff }
trace add execution a leave b
a 
```

我只是得到“你好”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:48:31.187

首先，由`hello`程序*打印*，而不是由程序*返回*。执行跟踪不会捕获打印输出。（您可以通过在通道上分层变换来捕获 Tcl 8.6 中的打印输出`stdout`，但这是完全不同的事情。）

因此，让我们将您的代码改为这样，这样可以更清楚地了解正在发生的事情：

```
proc a args { puts hello; return flimgargle }
proc b args { puts "b:$args"; error "bad stuff" }
trace add execution a leave b
puts [a] 
```

使用 tclsh8.4 和 tclsh8.6（基于当前的开发 HEAD 构建），我得到了这个（最后一行是错误消息）：

```
你好
b:a 0 flimgargle 离开
坏的东西

```

使用 tclsh8.5（特别是 8.5.2），我得到这个：

```
你好
b:a 0 flimgargle 离开
漱口水

```

这是tclsh8.5 中[的一个已知错误](http://sourceforge.net/tracker/?func=detail&aid=3608676&group_id=10894&atid=110894)（由于在 8.5 和 8.4 之间实现跟踪的方式发生了变化），该错误将在下一个版本 (8.5.14) 中修复。我们只是为此测试候选版本，所以修复应该很快就会广泛可用。

# c++ - 处理数百万个排列

> ID：15626941
> 
> 赞同：0
> 
> 时间：2013-03-25T23:49:28.540
> 
> 标签：c++, c, performance

我正在尝试计算 20x20 布尔矩阵的数百万 (10 ⁸ ) 个排列。我能够很快地计算它们。之后，我需要使用标准输出显示它或将其存储到文件中。您认为可以在 4 小时内以某种方式管理这么多数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:56:58.823

10 ^(18)操作？让我们看看...您的 PC 可能不会比每秒10 ⁹到 10 ^(10条指令更好。)所以，你至少需要 10 ⁹到 10 ^(10)秒来做 10 ^(18)次操作，也就是超过 31 年的时间。这速度够快吗？在 31 年的过程中，您的 PC 是否还活着并拥有不间断的电源？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:44:00.360

一个 20x20 的布尔矩阵是 400 位 = 50 字节 * 10^8 排列 = 5 * 10^9 字节 = 5 GB。

使用 3 GBit/s SATA 驱动器，您的下限为

```
5 GB = 40 GBit / 3 GBit/s ~ 13.3 sec 
```

在我 5 岁的电脑上，复制一个 1.9 GB 的文件大约需要 82 秒。这涉及读取和写入 1.9 GB。因此，编写 10^8 400 位值的二进制表示的上限约为 215 秒。

编写一个 ASCII 表示将使用大约 50 GB 并且需要大约 8-10 倍的时间，大约 2150 秒。这将超过 35 分钟。

综上所述，我认为在 4 小时之内写完这么多数据应该是可以的。

**更新**：

我没有 5 GB 的主内存来保存所有排列。因此，我多次写入相同的数据。调用这个

```
./a.out a.bin 100 
```

在我的机器上写入大约 4.7 GiB 的数据并花费 114 秒。

```
#include <fstream>

struct matrix {
    unsigned char data[50];
    void write(std::ostream &f) {
        f.write(reinterpret_cast<char*>(data), sizeof(data));
    }
};

static const unsigned long N = 1000000;
matrix permutations[N];

int main(int argc, char **argv)
{
    // prevent sparse file
    for (unsigned long j = 0; j < N; ++j)
        permutations[j].data[j % 50] = 1;

    std::ofstream f(argv[1]);
    f.sync_with_stdio(false);
    unsigned long m = std::stoi(argv[2]);
    for (unsigned long i = 0; i < m; ++i) {
        for (unsigned long j = 0; j < N; ++j)
            permutations[j].write(f);

    }

    return 0;
} 
```

使用 ASCII 表示看起来很相似

```
struct matrix {
    unsigned char data[50];
    friend std::ostream &operator<<(std::ostream &f, const matrix &x) {
        static int bits[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };
        for (int i = 0; i < 50; ++i) {
            for (int j = 0; j < 8; ++j)
                f << (x.data[i] & bits[j] ? '1' : '0');
        }

        return f;
    }
}; 
```

并在`main`for 循环中

```
for (unsigned long i = 0; i < m; ++i) {
    for (unsigned long j = 0; j < N; ++j)
        f << permutations[j] << '\n';
} 
```

写入 10^7 个排列在磁盘上使用了大约 3.8 GiB，大约花费了 4:41 分钟。写十倍的内容可能需要一个小时或 90 分钟。在当前的硬件上，这应该更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T00:44:49.097

使用 10^8 个排列，每个排列打包成 50 个字节（400 位），它将提供大约 5 GB 的数据。应该可以在普通磁盘上以每秒 100 MB 的速度将其存储到磁盘上的文件中——5 GB 数据的总写入时间为 50 秒。

因此，只要您可以足够快地生成排列，在指定的 4 小时内将它们存储到文件中应该没有问题。

# php - 无法从 PHP 中的 SQL 临时表中获取值？

> ID：15626947
> 
> 赞同：1
> 
> 时间：2013-03-25T23:49:49.450
> 
> 标签：php, sql

这段代码对我有用。

```
$result = mysql_query("select * from tbl_rating limit 1 ;");

while($row = mysql_fetch_array($result)){

   echo $row["NameA"];

} 
```

但是，此代码不起作用。谁能指出我的错误？谢谢。

```
$result = mysql_query("create temporary table ub_rank as 
select similar.NameA,count(*) rank
from tbl_rating target 
join tbl_rating similar on target.NameB= similar.NameB and target.NameA != similar.NameA and target.Rate= similar.Rate 
where target.NameA = 'tutorA'
group by similar.NameA;

select * from ub_rank limit 1 ;");

while($row = mysql_fetch_array($result)){

    echo $row["NameA"];

  } 
```

错误信息：

**警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源**

但是，我想知道为什么我可以在具有相同结构的第一个代码中获得值？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:56:49.927

`mysql_query()`一次不支持多个查询。您需要将查询分成两个单独的调用：

```
mysql_query("create temporary table ub_rank as 
  select similar.NameA,count(*) rank
  from tbl_rating target 
  join tbl_rating similar on target.NameB= similar.NameB and target.NameA !=  similar.NameA and target.Rate= similar.Rate 
  where target.NameA = 'tutorA'
  group by similar.NameA
");
$result = mysql_query("select * from ub_rank limit 1 ;");

while($row = mysql_fetch_array($result)){
  echo $row["NameA"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:57:44.790

`mysql_query()`，因为它已被弃用，所以无论如何你都不应该使用它，它不允许你在这样的单个调用中执行多个查询。从技术上讲，有一种骇人听闻的方法可以伪造它来执行多个查询，但它只会提供第一个结果集。

您需要单独执行这些查询。或者，如果您转换为 using `mysqli`，则可以使用`mysqli_multi_query`，但这实际上仅适用于不需要结果集的情况。

# wpf - 执行期间的 WPF 标签内容显示

> ID：15626949
> 
> 赞同：1
> 
> 时间：2013-03-25T23:49:57.177
> 
> 标签：wpf, events, label

抱歉，我是 WPF 的新手：

当我单击一个按钮时，我希望在函数启动时看到标签中显示的一条消息，然后我希望在函数完成时看到另一条消息。

在这里的代码中，我只看到单击按钮时显示的最后一条消息值。有人可以向我解释为什么吗？

由于这不起作用，我将如何完成我真正想要的 - 在一段时间内看到一条消息（如“处理”），然后在函数完成时看到另一条消息（如“完成”）？

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        MessageLabel.Content = "I never see this";

        System.Threading.Thread.Sleep(2000);

        MessageLabel.Content = "I only see this";
    }
} 
```

* * *

谢谢布拉赫什玛！这是我想要的 BackgroundWorker 对象的代码。

```
public partial class MainWindow : Window
{
    private BackgroundWorker backgroundWorker1 = new BackgroundWorker();

    public MainWindow()
    {
        InitializeComponent();

        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.WorkerSupportsCancellation = false;

        backgroundWorker1.DoWork += worker_DoWork;
        backgroundWorker1.RunWorkerCompleted += worker_RunWorkerCompleted;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        MessageLabel.Content = "I see this now";

        if (backgroundWorker1.IsBusy != true)
        {
            backgroundWorker1.RunWorkerAsync(); 
        }
    }

    private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        System.Threading.Thread.Sleep(2000);
    }

    private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        MessageLabel.Content = "and I see this too";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:53:28.930

您看不到更改的原因是因为这一切都在 UI 线程上运行，直到第二次更新标签*之后才有机会刷新屏幕。*
您应该使用**[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)**来运行代码的“繁重”部分（例如，标签的睡眠 + 更新）

您的代码的快速示例：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    MessageLabel.Content = "I never see this";

    BackgroundWorker bw = new BackgroundWorker();
    bw.DoWork += (s,a) =>
          {
                Thread.Sleep(2000);
          };
    bw.RunWorkerCompleted += (s, a) =>
          {
                MessageLabel.Content = "I saw it now";
          };
    bw.RunWorkerAsync(); // Start BackgroundWorker 
```

# java - 方法递归和排列

> ID：15626950
> 
> 赞同：0
> 
> 时间：2013-03-25T23:50:00.160
> 
> 标签：java, recursion

我试图理解下面写的代码。我可以在一定程度上跟进。我想我了解第一个结果是如何实现的，但不确定其他结果如何。以下是代码和我的解释。

代码：

```
public static void main(String [] args)
{
    String str ="abc";
    permuatation(str,"");
}

private static void permuatation(String str, String current) {
    if(str.equals(""))
    {
        System.out.printf("Result: %s",current);
        System.out.println();
    }
    else
    {
        for (int i = 0; i < str.length(); i++)
        {
            char c= str.charAt(i);
            permuatation(str.substring(0, i)+ str.substring(i+1), current + c);

        }
    } 
```

我对 abc 等字符串的解释；

1.对于 i = 0; i < 字符串长度；增加 i

2.在索引处我转换为字符（a）；

3.使用子串（剩余字符-bc）和（当前字符a）的参数运行排列方法；

4.现在使用字符串 bc

5.对于 i = 0; i < 字符串长度；增加 i

6.在索引处我转换为字符（b）；

7.使用子串（剩余字符-c）和（当前字符ab）的参数运行排列方法；

8.对于 i = 0; i < 字符串长度；增加 i

9.在索引处我转换为字符（b）；

10.使用substring(remaining characters -) and(current character abc)的参数运行置换方法；

11 as string = "" 打印当前字符 abc

其他排列是如何实现的？任何指导将不胜感激。

# html - twitter 引导和画布定位

> ID：15626952
> 
> 赞同：4
> 
> 时间：2013-03-25T23:50:18.197
> 
> 标签：html, twitter-bootstrap, twitter-bootstrap-2

我正在尝试在我的一个项目中使用 twitter 引导程序，而我真正想要的是带有链接的标题和页面中间的 HTML 画布。参考：

![示例引导页面](../Images/07e834c1697ab6825e646a1369d52285.png)

当我添加一个 html 画布标签并给它一个宽度和高度时，我得到了两个不良影响：

*   画布的上边框被截断，必须对画布应用边距
*   画布被推到右边，我必须再次对其应用边距。

**我希望画布留在页面的中心。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T01:10:33.140

为了让你的画布元素保持在屏幕的中心，你必须用一个包含的 div 来包装它，如下所示。

```
<div>
    <canvas></canvas>
</div> 
```

然后，我们需要创建并应用一个类，该类将使包含的 div 与内部的画布具有相同的像素宽度。

```
<style>
    .container-canvas {
        /* This could be done in one single declaration. See the extended sample. */
        margin-right: auto;
        margin-left: auto;
        width: 800px;
    }
</style>

<div class="container-canvas">
    <canvas width="800" height="480"></canvas>
</div> 
```

这将使您的画布居中，并在您调整浏览器窗口大小时保持画布居中。至于覆盖新创建的画布元素的导航栏，您需要向主内容容器添加更多样式。

```
<style>
    .container-main {
        margin-top: 75px;
    }
</style>

<div class="container container-main">
    <div class="container-canvas">
        <canvas width="800" height="480"></canvas>
    </div>
</div> 
```

有关扩展/完整示例，请参见下文：

```
<!doctype html>
<html>
    <head>
        <title>Bootstrap + Canvas</title>

        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/bootstrap-responsive.css">

        <style>
            .container-main {
                margin-top: 75px;
            }

            .container-canvas {
                margin: 0 auto;
                width: 800px;
            }

            canvas {
                border: 1px solid #333;
            }
        </style>

    </head>
    <body>
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="brand" href="#">Project name</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container container-main">
            <div class="container-canvas">
                <canvas id="mycanvas" width="800" height="480">
                    This is my fallback content.
                </canvas>
            </div>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script>
            function draw() {
                var canvas = document.getElementById("mycanvas");

                if (canvas.getContext) {
                    var ctx = canvas.getContext("2d");

                    ctx.fillStyle = "rgb(200,0,0)";
                    ctx.fillRect(10, 10, 55, 50);

                    ctx.fillStyle = "rgba(0,0,200,0.5)";
                    ctx.fillRect(30, 30, 55, 50);
                } else {
                    alert("Canvas isn't supported.");
                }
            }

            $(function() { 
                draw();
            });
        </script>
    </body>
</html> 
```

# android - Android 中的资源类型警告

> ID：15626953
> 
> 赞同：3
> 
> 时间：2013-03-25T23:50:35.340
> 
> 标签：android, eclipse, logcat

我知道我有一个非常模糊的要求，所以如果您没有遇到以下错误，可能不值得继续阅读。

由于我下载了适用于 Android 的 4.1.2 SDK，我的应用程序在 LogCat(Eclipse) 中产生了警告：

```
Failure getting entry for 0x010802c0 (t=7 e=704) in package 0 (error -75) 
```

当我开始为 SDK 4.0.3 编码时，警告没有出现。

没有关于警告的更多信息，因此很难找出警告的来源。有没有人有类似的问题，可以给我一个提示在哪里看？

我确定问题出在某个 xml 文件中，但无论是布局、样式还是字符串，我都不知道。我也不知道如何进行有意义的试错搜索，因为项目变得相当复杂。有没有办法确定在该地址下寻找哪个资源？

我一直在网上搜索，尤其是在 stackoverflow.com 上寻找提示或解决方案，但一无所获，所有类似的帖子都至少有另一个信息可以圈出警告的原因。

好吧，提前感谢您的帮助。

**编辑：** 只是偶然我删除了我的应用程序的 Logcat 过滤器并观察了系统日志的其余部分，结果证明不仅仅是我的应用程序产生了这个警告消息。我想这与手机上运行的三星版本的 Android 有关吗？

如果在适当的时间内对这个话题没有进一步的兴趣，我想我会删除这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T07:05:18.517

如果有人来到这个页面，因为同样的错误，它不仅仅是三星的事情。就我而言，问题发生了，因为我试图调用`setLocale`一个扩展`PreferenceActivity`和实现的 Activity `OnSharedPreferenceChangeListener`。这会导致上述错误的循环。希望能帮助到你 ：）

# php - PHP Regexp 负前瞻

> ID：15626955
> 
> 赞同：7
> 
> 时间：2013-03-25T23:50:47.717
> 
> 标签：php, regex-negation

我正在尝试匹配用 { } 包裹的所有单词，但不匹配带有“_loop”的单词。我看不出我的 reg 表达式哪里出错了。

```
 $content   = '<h1>{prim_practice_name}</h1><p>{prim_content}</p><p>Our Locations Are {location_loop}{name} - {state}<br/>{/location_loop}</p>';
 $pattern = '/\{(\w*(?!\_loop))\}/'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T00:18:16.057

发生这种情况是因为 \w* 在您检查之前“吃掉”了停止词“_loop”，以防止您应该首先检查这个词（在 \w* 之前），如下所示：

```
$pattern = '/\{((?!\w*_loop\})\w*)\}/'; 
```

或者你可以使用: `?< !`:

```
$pattern = '/\{(\w*(?<!_loop))\}/'; 
```

# cookies - CORS 不适用于 IE10 中的 cookie

> ID：15626965
> 
> 赞同：7
> 
> 时间：2013-03-25T23:52:19.660
> 
> 标签：cookies, gwt, cross-domain, internet-explorer-9, internet-explorer-10

我有使用 CORS 并设置 cookie 的 GWT 应用程序。它在 Chrome、Firefox、Opera 中运行良好，但在 IE10（版本 10.0.9200.16521）中出现此错误：

```
SCRIPT5022: com.google.gwt.core.client.JavaScriptException: (InvalidStateError) 
 code: 11
 ABORT_ERR: 20
 DATA_CLONE_ERR: 25
 DOMSTRING_SIZE_ERR: 2
 HIERARCHY_REQUEST_ERR: 3
 INDEX_SIZE_ERR: 1
 INUSE_ATTRIBUTE_ERR: 10
 INVALID_ACCESS_ERR: 15
 INVALID_CHARACTER_ERR: 5
 INVALID_MODIFICATION_ERR: 13
 INVALID_NODE_TYPE_ERR: 24
 INVALID_STATE_ERR: 11
 NAMESPACE_ERR: 14
 NETWORK_ERR: 19
 NOT_FOUND_ERR: 8
 NOT_SUPPORTED_ERR: 9
 NO_DATA_ALLOWED_ERR: 6
 NO_MODIFICATION_ALLOWED_ERR: 7
 PARSE_ERR: 81
 QUOTA_EXCEEDED_ERR: 22
 SECURITY_ERR: 18
 SERIALIZE_ERR: 82
 SYNTAX_ERR: 12
 TIMEOUT_ERR: 23
 TYPE_MISMATCH_ERR: 17
 URL_MISMATCH_ERR: 21
 VALIDATION_ERR: 16
 WRONG_DOCUMENT_ERR: 4: InvalidStateError 
B3D7C8F35C000AA1ADFE700845710C1A.cache.html, line 1102 character 7 
```

我看到执行时抛出了错误：

```
xhr.withCredentials = true; 
```

这是 GWT javascript 代码：

```
function create_3(){
  var xhr;
  if ($wnd.XMLHttpRequest) {
    xhr = new $wnd.XMLHttpRequest;
  }
   else {
    try {
      xhr = new $wnd.ActiveXObject('MSXML2.XMLHTTP.3.0');
    }
     catch (e) {
      xhr = new $wnd.ActiveXObject('Microsoft.XMLHTTP');
    }
  }
  xhr.withCredentials = true;
  return xhr;
} 
```

我找到了这篇文章： [在 IE9 中使用 cookie 发出 CORS 请求？](https://stackoverflow.com/questions/10941281/make-a-cors-request-in-ie9-with-cookies)

但是我升级到 IE10 并没有任何区别。

还有其他人遇到类似问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-19T13:15:32.713

我有一个类似的问题（一般使用 CORS，而不是专门使用 GWT）。事实证明，浏览器设置阻止了第三方 Cookie（IE10 > Internet 选项 > 隐私 > 高级 > 第三方 Cookie > 接受）。为了解决这个问题，我检查了“覆盖自动 cookie 处理”、​​“接受”（第三方 Cookie）和“始终允许会话 cookie”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-10T16:37:29.330

要求用户重新配置他们的浏览器以允许所有 3rd 方 cookie 不太可能成功。此处的正确解决方法是确保目标第 3 方资源具有可用于第 3 方上下文中使用的资源的 P3P 策略。[http://blogs.msdn.com/b/ieinternals/archive/2013/09/17/simple-introduction-to-p3p-cookie-blocking-frame.aspx](http://blogs.msdn.com/b/ieinternals/archive/2013/09/17/simple-introduction-to-p3p-cookie-blocking-frame.aspx)

# c# - 检测 UTF8 名称

> ID：15626975
> 
> 赞同：0
> 
> 时间：2013-03-25T23:53:00.940
> 
> 标签：c#, websocket, buffer

我正在将数据流式传输到我的缓冲区，并且我可能收到的一个可能的数据包以字节 5 开头，并且是 UTF-8 编码的（没有固定的字节大小）有什么方法可以检测到这个吗？目前，如果我这样做

```
 do
    {
        WebSocketReceiveResult result = await Conn.ReceiveAsync(readBuffer, token);
        Console.WriteLine(Encoding.UTF8.GetString(readBuffer.Array, 0, result.Count));
    } 
```

我可以看到它出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:02:08.483

除非在流的开头有 BOM 标记，否则您无法确定 - 您通常会提前从上下文（文档或约定）中知道您收到的数据是 UTF-8 还是其他格式。

我很好的 Unicode 入门可以在这里找到：

[http://www.joelonsoftware.com/printerFriendly/articles/Unicode.html](http://www.joelonsoftware.com/printerFriendly/articles/Unicode.html)

# ruby-on-rails - 用户邀请！在测试中不发送电子邮件

> ID：15626977
> 
> 赞同：1
> 
> 时间：2013-03-25T23:53:04.757
> 
> 标签：ruby-on-rails, ruby, devise, devise-invitable

我正在尝试为我的用户模型创建一些测试。当我使用 devise_invitable User.invite 邀请用户加入我的应用程序时！创建一个用户，但似乎没有记录电子邮件。`ActionMailer::Base.deliveries.count == 0`. 在生产电子邮件中发送，当我在测试中使用我的客户电子邮件时`ActionMailer::Base.deliveries.count`是正确的数字。

在 devise_invitable 中是否缺少一些东西来配置用于测试的电子邮件发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T02:16:34.160

我在两个环境的测试和开发中都面临同样的问题，并注意到它`ArgumentError - An SMTP To address is required to send a message. Set the message smtp_envelope_to, to, cc, or bcc address.`在日志中静默返回。

我没有使用`Devise::InvitationsController`，所以在我的情况下调用`confirm!`是必要的，因为`:confirmable`启用了。

```
User.invite!(invite_params, current_user) do |u|
  u.confirm!
end 
```

设计邀请（1.4.0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:52:51.730

我相信这不是设计的东西，Rails 默认情况下在测试环境中实际上并不发送电子邮件，你可能有类似的行

```
# Tell Action Mailer not to deliver emails to the real world.
# The :test delivery method accumulates sent emails in the
# ActionMailer::Base.deliveries array.
config.action_mailer.delivery_method = :test 
```

在您的 config/environments/test.rb 上，为了实际发送电子邮件，您可以评论此行并使用您的 production.rb 的 ActionMailer 配置，但不建议这样做，因为您可以使用 ActionMailer::Base.deliveries 数组本身来测试您的电子邮件。

# tcp - 如果连接空闲，TCP 滑动/拥塞窗口是否会缩小？

> ID：15626982
> 
> 赞同：2
> 
> 时间：2013-03-25T23:53:56.927
> 
> 标签：tcp, tcp-ip

如果是这样，应用程序是否可以做出任何合理的猜测，或者更好的是 API 调用，以确定空闲多长时间导致窗口缩小？

需要低延迟的应用程序是否会在空闲时定期发送不必要的流量以保持窗口大小？

另一种表述问题的方式——Google 做了什么（除了避免 tcp 本身并只使用 ip / udp）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-12T17:51:59.360

[RFC2581] 建议如下：“如果 TCP 在超过重传超时的时间间隔内没有发送数据，则 TCP 应该在开始传输之前将 cwnd 设置为不超过 RW [初始窗口]。” 重传超时可能大约是几个往返时间，因此您需要保持相当高的发送速率以避免这种情况。那是假设您正在使用的实现遵循此建议。我不确定今天的常见做法是什么。

如果您控制平台，您可能可以使用 tcp 配置参数进行设置。在 Linux 上：tcp_slow_start_after_idle 但是请注意，关闭它可能会导致空闲后出现过大的突发。当发送处于活动状态时，发送窗口将被填满，因此只有在 ack 到达时才会将新段计量到网络中。在一段空闲时间之后，您将被允许一次填充该窗口。

# c++ - 在类中使用结构时出错

> ID：15626984
> 
> 赞同：-9
> 
> 时间：2013-03-25T23:54:25.397
> 
> 标签：c++, class, struct

我在 C++ 中，IDE 是 Visual Studio 2012。我不知道为什么我不能这样做，这根本没有意义。正如标题所说，我试图在一个类中放置一个结构，但它根本不允许我这样做。我尝试将其置于公共、私有、受保护的范围内，然后尝试将其置于全局范围内，但没有任何效果。

```
class foobar
{
public:
    struct foo
    {
        int ass;
    };

    foo bar;
    bar.ass = 1; //getting a weird error on this line
}; 
```

我如何将一个结构放在一个类中？感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T23:56:04.847

如果您要做的是在构造类型的对象时将`ass`成员初始化为，那么**在 C++11**中，您可以这样做：`1``foo`

 **```
class foobar
{
public:

    struct foo
    {
        int ass = 1;
    //          ^^^
    };

    foo bar;
}; 
```

你可以在这里看到一个[活生生的例子](http://liveworkspace.org/code/3ji7qM$2)。

上述语法等价于更冗长的基于构造函数的初始化，这是**C++03中的***唯一选项* （也可能在 VS2012 附带的 VC11 编译器版本中，它以[不完全符合C++11 标准](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)）：

 **```
class foobar
{
public:

    struct foo
    {
        foo() : ass(1) { }
    //        ^^^^^^^^

        int ass;
    };

    foo bar;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T23:56:16.477

C++ 不允许在类声明中初始化变量。您*必须*编写一个构造函数来执行此操作。****

# ruby-on-rails - Active Record 模型在视图中没有识别方法

> ID：15626985
> 
> 赞同：0
> 
> 时间：2013-03-25T23:54:57.573
> 
> 标签：ruby-on-rails

这是一个非常简单的问题。我正在观看一个 railscast，其中一个方法在模型中定义为：

```
def self.nameoffunction
   ...
end 
```

然后他能够在他的视图中使用 Model.nameoffunction 引用该方法。

这是 2010 年的 railscast，所以我猜从那以后发生了一些变化，因为当我尝试在我的模型中创建一个函数时，当我尝试在视图中引用它时，我得到了未定义的方法。

我希望按照以下方式在我的模型中创建一个方法：

```
def blahblah(variable)
    a = select('column').where('...variable referenced here...').limit(2) 
    b = []
    b.push(a[0]['column'])
    b.push(a[1]['column'])
    return b.sum
end 
```

当我进入控制台并输入时，`Model.blahblah`我得到未定义的错误。

所以我的问题是我什么时候可以使用该方法`Model.blahblah`，何时必须创建一个对象，例如`Model.find_by_id(3)`在我可以使用该方法之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:57:53.440

您需要添加`self.`，所以它是一个类方法，而不是像您当前拥有的那样的实例方法。

```
def self.blahblah(variable)
    a = select('column').where('...variable referenced here...').limit(2) 
    b = []
    b.push(a[0]['column'])
    b.push(a[1]['column'])
    return b.sum
end 
```

另一种选择是执行以下操作：

```
class << self
  def blahblah(variable)
    a = select('column').where('...variable referenced here...').limit(2) 
    b = []
    b.push(a[0]['column'])
    b.push(a[1]['column'])
    return b.sum
  end
end 
```

# ios - UITableView 上的工件

> ID：15626987
> 
> 赞同：3
> 
> 时间：2013-03-25T23:55:28.073
> 
> 标签：ios, objective-c, uitableview, uikit

我已经为该表的第一行创建了一个`UITableView`并正在使用自定义。`UITableViewCell`唯一的问题是左上角有某种伪影。单击此框所在的区域会使其暂时消失，然后再次出现。盒子一直都在。`UITableViewCell`包括以下内容：

*   `UITextView`（描述）
*   `UIImageView`（最右边的图片）
*   `UILabel`（字符数）

我已经尝试删除所有这些子视图，并且该框仍然出现。

![表视图工件](../Images/d936787c6929a8af801c34c4dcdfc9c7.png) ![已打开混合图层的工件](../Images/2c3dd470cfd78063c550ad82a33445cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:03:43.707

如果即使您删除了自定义单元格的所有子视图，该框仍然出现，则它必须来自另一个具有超出其边界的框架的单元格。例如，标题视图。测试这一点的一种方法是确保为所有视图启用子视图剪辑。

# css - 使某个图像不受img css的影响

> ID：15626989
> 
> 赞同：1
> 
> 时间：2013-03-25T23:55:42.357
> 
> 标签：css, styles

我的页面上有这个 CSS。

```
img {
  opacity:0.4;
  filter:alpha(opacity=40);
}

img:hover {
  opacity:1;
  filter:alpha(opacity=100);
} 
```

我想要一些不受此影响的图像`opacity`。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:57:30.587

最好的方法是给它一个**唯一的**ID 并单独定位它：

```
img#theID { 
// CSS for that particular image here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:20:18.080

# 方法一

完成此类事情的最流行方法建议使用特异性。基本上，选择器越具体，优先级越高。考虑这个标记

```
<section>
  <div class="container">
    <img src="blahblah.jpg" />
    <div class="wrap">
      <img src="blahblahblah.jpg">
    </div>
  </div>
<section>
<img>
<img> 
```

如果你使用

```
img {
  /* Styles */
} 
```

这些样式将应用于所有人。但是如果你使用这样的东西

```
section .container .wrap img {
  /* Different Styles */
} 
```

这些样式将优先于该图像，因为 CSS 喜欢您可以给出的最具体的答案。

# 方法二

除了[user125697](https://stackoverflow.com/a/15627008/1470950)给出的这个答案，它建议使用 id

```
/* img#ID - ID can be whatever you want*/
img#hover {
  opacity:1;
  filter:alpha(opacity=100);
} 
```

你会这样暗示它

```
<img id="hover" src="blahblah.jpg" /> 
```

Chris Coyier 曾就此发表过一篇[文章](http://codepen.io/chriscoyier/pen/lzjqh)。要测试结果，只需从框中删除其中一个类，您就会看到它改变了颜色。所以基本上类总是被ID覆盖

# 方法三

## 不鼓励

我知道的最后一种方法是使用`!important`，它会覆盖页面上的每种样式。无论。这是非常不赞成的，因为它会在未来产生很多问题。

# solr - 使用 solr 4.2 如何使用/启用模糊短语搜索

> ID：15626990
> 
> 赞同：2
> 
> 时间：2013-03-25T23:55:47.953
> 
> 标签：solr, lucene

所以现在我只是使用管理界面来运行搜索查询。我知道波浪号〜后缀会导致单词变得模糊搜索。

但是，短语呢？我尝试了“一些词”〜但它似乎并没有在应该返回的时候返回结果。知道为什么吗？我需要特殊的字段类型或特殊的过滤器吗？

现在，一切都很普通，但我确实导入了很多数据。（大约 1200 万行）。我知道那里有些东西应该通过一个很好的模糊匹配返回，而不是。

任何帮助表示赞赏。

此外，如果它有所作为，我想使用 levenshtein 算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:11:15.123

[ComplexPhraseQueryParser](https://cwiki.apache.org/confluence/display/solr/Other+Parsers#OtherParsers-ComplexPhraseQueryParser)可用于处理通配符和模糊短语查询。

# c++ - 不同文件共享的 C++ 全局指针

> ID：15626997
> 
> 赞同：1
> 
> 时间：2013-03-25T23:56:39.420
> 
> 标签：c++, pointers, static

所以我正在尝试制作一个 C++ / OpenGL 程序（使用 Visual Studio 2010），它使用一个名为 Operation 的类来处理键盘输入。关键是要学习一些东西，因为我是 C++ 和 OpenGL 的新手。

我正在使用数组'bool keysDown [256]'来存储按下了哪些键。同样，我想创建一个操作数组“Operation *keyOps[256]”来操作这些键。

我的问题来了，这些键中的大多数都没有操作，所以我想要一个完全不做任何事情的操作类，但我只需要一个不同文件可以使用的全局实例/指针。

现在我想做的是以某种方式创建这个“无操作”类的单个实例，并使其可用于包含此标头的任何文件，而无需在每个文件中声明它。（类似于 NULL，仅以 Operation 类的形式出现）

到目前为止，我的“解决方案”是使用这样的命名空间，

（操作.h）

```
#ifndef _OPERATION_H
#define _OPERATION_H

#include <iostream>

#include <GL\glut.h>

namespace operations{

    class Operation{
        protected:
            std::string _name;
        public:
            Operation(std::string name) : _name(name){}
            virtual void operate()=0;
            std::string getName(){return _name;}
    };

    (...)

    class OPnop: public Operation{
        public:
            OPnop(): Operation("No operation"){}
            void operate(){}
    };
    static OPnop OPNOP;
    Operation* nop(); //implemented in .cpp > {return &OPNOP;}

    (...)
};
#endif 
```

其他文件可以使用 operations::nop() 函数获得指向 OPNOP 实例的指针。我已经测试过并且可以正常工作，但是我不确定这在后台是否可以正常工作。

我一直在搜索全局变量的外部和静态用法，但我可能并不完全理解，也没有找到与我的问题相关的答案。如果我没记错的话，extern 变量也必须在其他文件中声明，而 static 为包括它在内的每个文件创建一个不同的变量。

所以我的问题是，有没有办法声明/实例化这个“无操作”，以便包括这个头的所有文件都可以直接访问同一个唯一实例而不必使用函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:09:11.630

实际上，`static`关键字在命名空间上下文中的含义与类上下文不同。我相信你想要做的就是`extern`在你的头文件中声明它，并在实现（`.cpp`）文件中初始化它一次。看看[这个问题](https://stackoverflow.com/questions/10534991/sharing-static-variables-across-files-namespace-vs-class)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:01:38.157

[我在这里](https://github.com/chunkyguy/opengl-series/blob/master/ios/06_diffuse_lighting/source/iOS_main.h)做了类似的事情。

我正在使用带有单个全局实例的 Gesture 类作为 gGesture 来处理所有用户交互。

```
 // .h file
    struct Gesture_{
        int fingers;
        int taps;
        eGestureAction action;
        bool continious;
    };
    typedef struct Gesture_ Gesture;

    extern Gesture gGesture; 
```

为了回答您关于静态与外部的问题，外部通过不向所有翻译单元添加相同的符号来避免链接器问题。

笔记：

1.  该代码最初旨在用于基于 C 的项目，但我认为您会明白的。

2.  Gesture 对象适用于基于触摸的设备。